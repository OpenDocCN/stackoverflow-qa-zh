# StackOverflow 问答 11942000-11942999

# javascript - “花括号总是应该在语句行”规则如此重要吗？

> ID：11942005
> 
> 赞同：4
> 
> 时间：2012-08-13T20:44:01.663
> 
> 标签：javascript, google-style-guide

我理解“分号隐式插入”，但我不确定它是否发生在函数表达式的情况下。

例如，这两个表达式总是会平等地解释：

```
Matrix.scale = function (mat, scaleX, scaleY, dest) {
// useful code
};

Matrix.scale = function (mat, scaleX, scaleY, dest)
{
// useful code
}; 
```

我喜欢第一个，我也注意到 Google 也喜欢它：http: [//google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml](http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml?showone=Code_formatting#Code_formatting) ?showone=Code_formatting#Code_formatting 。但我的同事不喜欢这种风格。问题出现了是否严格遵守这条规则，即使有函数声明，或者它是对统一性的贡献，并且这段代码在经过巧妙的缩小后不会中断？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T20:53:30.543

在其他语言中，这可能是一个品味问题，但在 JS 中，很难找到错误的来源。考虑以下[代码片段](http://jsfiddle.net/EqM8H/)，它可能不会像第一眼所期望的那样：

```
function foo()
{
  return
  {
    bar: 1
  };    
};

console.log(foo()); // => undefined 
```

进一步阅读：[http](http://en.wikipedia.org/wiki/JavaScript_syntax) ://en.wikipedia.org/wiki/JavaScript_syntax （搜索“分号插入”）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T20:58:07.307

代码风格只是关于如何格式化代码和命名变量的协议：

*   使用这种语言进行编码、开发特定库等的人的（子）社区。
*   你的公司。

很难说这两个因素中哪一个更具有决定性，但如果说优秀公司的代码风格与“野外”的代码风格密切相关，这并不是一个大胆的说法。部分原因是因为在优秀的公司中，代码通常是为开源贡献的，因此最好不要重新发明它。

有些语言非常坚定、彻底，并被绝大多数风格指南所认可。例如，`this_is_very_uncommon_to_java`。

至于javascript，情况并非如此。没有像抽象的、通用的“javascript 代码风格”这样的东西。大括号的问题仍然是 javascript 社区中大量讨论的话题，分号也是如此。我想，这只是因为 js-developing 的任何其他问题都已经解决了；）

如果您需要建议（看起来您想要），请与您的同事和平相处。达成任何协议并遵守。这是最重要的 - 团队中的良好关系会超过任何代码样式协议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T21:04:35.437

根据书[Code Complete](https://rads.stackoverflow.com/amzn/click/com/B004OR1XGK)，括号应该放在第一行（称为控制语句），因为放在第二行会产生误导，因为它不显示代码的逻辑结构。如果从图形的角度来看，第二种方法如下所示：

![在此处输入图像描述](../Images/fc9c7d173dd591127d8be348eb3c6617.png)

其中线 AE 代表以下内容，这与此问题中声明的第二种方法类似。

```
A function foo ()
B {
C     print "Hello";
D     print "World";
E } 
```

您可以看到具有误导性，因为您无法判断 B 行是否从属于 A 行，或者 B 行是否是其自己的单独语句

**编辑：如果图像太抽象，这里快速解释为什么大括号通常与控制语句一起包含在第一行**

函数有两个主要元素：

1.  控制结构
2.  函数的语句

通过将大括号放在第二行（图像中的 B 行），它既不在控制语句中，也不是函数语句的一部分。

**编辑 2**

IMO，每一行代码都应该有一个目的是节省垂直空间，以便在我的屏幕上一次查看更多行并保留代码的逻辑含义。因此，当大括号与函数声明在同一行时，它就与它打开的语句相关联。但是，当它单独位于一行时（在我的示例中为 B 行）并且它没有缩进以显示从属于函数声明，那么它会破坏代码的逻辑含义，因为它既不与控制结构相关联也不是函数语句。因此，通过将大括号与函数声明放在同一行，那么每一行代码都有一个用途，它包含代码的逻辑含义，并且它节省了我的屏幕空间。

```
function foo() { // brace is on the same line and it's associated with the statement that it opens
    print "Hello"; // this line does something
    print "World"; // this line does something
} // this last brace terminates the function which is part of the control construct 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T20:46:45.533

这是100％的口味问题。无论您喜欢什么，我都同意最好保持一致。因此，如果你是一个项目的新手，你真的应该遵循既定的风格指南。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T20:50:21.710

如果您不为 Google 工作，则无需遵守该规则。它不会破坏任何东西。就我个人而言，我喜欢后一个版本，它多了一条线。

# windows - 自动启动 Metro 应用程序

> ID：11942006
> 
> 赞同：1
> 
> 时间：2012-08-13T20:44:05.813
> 
> 标签：windows, windows-8, microsoft-metro, startup

我想编写一个在用户登录后自动启动的 Windows 8 Metro 应用程序。

对于桌面应用程序，我知道如何使用注册表项或将链接复制到启动文件夹。在这种情况下，我正在寻找与最后一种方法等效的 Metro。因为我希望用户可以轻松删除它。

如何链接到我的（或任何）Metro App 以将链接放在启动文件夹或类似的东西中？

（顺便说一句，系统应该首先向用户显示 Metro 开始屏幕，而不是我的应用程序。但他应该能够随时从活动应用程序选项卡（左键）中选择应用程序。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T21:16:46.783

这是不可能的。即使您可以在启动时启动它 [1]，该应用程序也会在后台暂停。此外，所有 Metro 应用程序在启动时都会显示启动画面。

你想达到什么目的？如果它运行代码，后台任务将执行此操作，并且不需要您的应用程序开始被启动。

如果它进入 MRU 列表，那么这是自动管理的，但系统，即使你的应用程序在那里，它也可以随时终止，并从列表中老化。

如果您不想创建单独的启动机制，您可以注册一个协议处理程序 - 例如。Myapp://stuff - 并使用标准 ShellExecute 函数打开它以启动您的应用程序。

请注意，您不能捆绑此应用程序并将其放在 appx 包中的启动组中。它必须从 appx 本身带外传递。此外，您**无法**停止显示初始屏幕。

[1] 因为您还要求做一些在 win 8 商店应用程序包中不能做的事情，您可以创建另一个 exe，它可以使用支持的 API 来启动 Metro 应用程序。将此应用程序放在启动组中将具有您想要的行为。您需要的 API：http: [//msdn.microsoft.com/en-us/library/windows/desktop/Hh706903 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/Hh706903(v=vs.85).aspx)

# openxml - Open XML：将段落转换为简单的 HTML

> ID：11942013
> 
> 赞同：1
> 
> 时间：2012-08-13T20:44:12.143
> 
> 标签：openxml, openxml-sdk

我有一个 Paragraph 对象，并希望将它包含的内部文本转换为 HTML 片段。

我使用 Microsoft 的 Open XML SDK 2.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T01:05:48.327

```
 [Test]
    public void GetHTMLOutOfParagraphsWithoutHeadingInformation()
    {

        var paragraphs = new List<Paragraph>();
        StyleDefinitionsPart styles = null;

        // Open the file read-only since we don't need to change it.
        using (var wordprocessingDocument = WordprocessingDocument.Open(documentFileName, true))
        {
            paragraphs = wordprocessingDocument.MainDocumentPart.Document.Body
                .OfType<Paragraph>().ToList();
            styles = wordprocessingDocument.MainDocumentPart.StyleDefinitionsPart;

            foreach (var p in paragraphs)
            {
                using (var memoryStream = new MemoryStream())
                {
                    var doc = WordprocessingDocument.Create(memoryStream, WordprocessingDocumentType.Document);
                    doc.AddMainDocumentPart().AddPart(styles);
                    doc.MainDocumentPart.Document = new Document();
                    doc.MainDocumentPart.Document.Body = new Body();
                    doc.MainDocumentPart.Document.Body.Append(p.CloneNode(true));
                    doc.MainDocumentPart.Document.Save();
                    Console.WriteLine(GetHTMLOfDoc(doc));
                }
            }
        }
    }

    string GetHTMLOfDoc(WordprocessingDocument doc)
    {

        HtmlConverterSettings settings = new HtmlConverterSettings()
        {
            PageTitle = "Test Title",
            CssClassPrefix = "Pt",
            Css = "",
            ConvertFormatting = false,

        };

        XElement html = HtmlConverter.ConvertToHtml(doc, settings);
        var notNullAnyMore = html.XPathSelectElement("//*[local-name() = 'body']");
        return notNullAnyMore.ToStringNewLineOnAttributes();
    }
} 
```

# python - 启动 Django 项目时在 Aptana 中出现 32/64 位架构错误

> ID：11942014
> 
> 赞同：0
> 
> 时间：2012-08-13T20:44:11.837
> 
> 标签：python, django, aptana, 32bit-64bit

像大多数其他使用当前 OS X 版本的 Mac/MySQL 用户一样，我经历了让 Python、MySQL 和 MySQLdb (MySQL-Python) 很好地协同工作的正常问题。这已经工作了一段时间，但我想使用 Aptana 来调试我的工作 Django 项目，当我尝试运行调试器或运行项目时，我遇到了可怕的“mach-o”错误。

有趣的是，我已经将 Aptana 配置为使用我正在使用的同一 python（在 Aptana 内部和外部都用“which python”确认），并且我已经确认 Aptana 调用的 python 是 32 -bit 应该是（与系统终端报告相同）。此外，当我在 Aptana 中使用终端时，使用交互式 python shell 我能够成功地“导入 MySQLdb”。所以我很难过。

在参数下，我根据指令将其添加到程序参数中：

运行服务器 8081 --noreload

但这不应该影响任何AFAIK。我不知道下一步该做什么。这是我尝试启动时 Aptana 抛出的错误：

```
pydev debugger: starting
Validating models...

Traceback (most recent call last):
  File "/Applications/Aptana Studio 3/plugins/org.python.pydev_2.6.0.2012062515/pysrc/pydevd.py", line 1392, in <module>
    debugger.run(setup['file'], None, None)
  File "/Applications/Aptana Studio 3/plugins/org.python.pydev_2.6.0.2012062515/pysrc/pydevd.py", line 1085, in run
    pydev_imports.execfile(file, globals, locals) #execute the script
  File "/Users/my/path/project/manage.py", line 14, in <module>
    execute_manager(settings)
  File "/Library/Python/2.7/site-packages/django/core/management/__init__.py", line 438, in execute_manager
    utility.execute()
  File "/Library/Python/2.7/site-packages/django/core/management/__init__.py", line 379, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/Library/Python/2.7/site-packages/django/core/management/base.py", line 191, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/Library/Python/2.7/site-packages/django/core/management/base.py", line 220, in execute
    output = self.handle(*args, **options)
  File "/Library/Python/2.7/site-packages/django/core/management/commands/runserver.py", line 67, in handle
    self.run(*args, **options)
  File "/Library/Python/2.7/site-packages/django/core/management/commands/runserver.py", line 78, in run
    self.inner_run(*args, **options)
  File "/Library/Python/2.7/site-packages/django/core/management/commands/runserver.py", line 88, in inner_run
    self.validate(display_num_errors=True)
  File "/Library/Python/2.7/site-packages/django/core/management/base.py", line 249, in validate
    num_errors = get_validation_errors(s, app)
  File "/Library/Python/2.7/site-packages/django/core/management/validation.py", line 28, in get_validation_errors
    from django.db import models, connection
  File "/Library/Python/2.7/site-packages/django/db/__init__.py", line 78, in <module>
    connection = connections[DEFAULT_DB_ALIAS]
  File "/Library/Python/2.7/site-packages/django/db/utils.py", line 93, in __getitem__
    backend = load_backend(db['ENGINE'])
  File "/Library/Python/2.7/site-packages/django/db/utils.py", line 33, in load_backend
    return import_module('.base', backend_name)
  File "/Library/Python/2.7/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/Library/Python/2.7/site-packages/django/db/backends/mysql/base.py", line 14, in <module>
    raise ImproperlyConfigured("Error loading MySQLdb module: %s" % e)
django.core.exceptions.ImproperlyConfigured: Error loading MySQLdb module: dlopen(/Library/Python/2.7/site-packages/_mysql.so, 2): no suitable image found.  Did find:
    /Library/Python/2.7/site-packages/_mysql.so: mach-o, but wrong architecture 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:16:08.303

Take a look at: [How do I force Python to be 32-bit on Snow Leopard and other 32-bit/64-bit questions](https://stackoverflow.com/questions/2088569/how-do-i-force-python-to-be-32-bit-on-snow-leopard-and-other-32-bit-64-bit-quest) on ways to configure Python to run in 32 bits (VERSIONER_PYTHON_PREFER_32_BIT environment variable seems a good choice).

Or maybe: [Troubles with PyDev and external libraries in OS X](https://stackoverflow.com/questions/2881055/troubles-with-pydev-and-external-libraries-in-os-x)

# windows-phone-7 - 给定两个地理坐标获取路线距离

> ID：11942016
> 
> 赞同：0
> 
> 时间：2012-08-13T20:44:15.503
> 
> 标签：windows-phone-7, bing-maps

我正在创建一个在其中使用地图控件的 Windows Phone 应用程序。我想计算 Windows Phone 中两个地理坐标之间的行驶距离？请问有什么帮助吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:42:57.610

您需要在 MSDN 杂志[http://msdn.microsoft.com/en-us/magazine/hh148148.aspx中完成此示例](http://msdn.microsoft.com/en-us/magazine/hh148148.aspx)

它解释了如何进行路由并在结果中获取距离属性。

# python - BeautifulSoup 无法正确读取标签

> ID：11942020
> 
> 赞同：0
> 
> 时间：2012-08-13T20:44:28.553
> 
> 标签：python, xml, beautifulsoup

我正在尝试使用 BeautifulSOup 解析 xml，但会导致输出不正确。

文件.xml：

```
<?xml version="1.0" ?> 
<opening name="value1" >
      <element name="value1.1"/>
      <element name="value1.2">
        <element name="1.2.1"/>
      </element>
      <element name="value1.3">
        <element name="value1.3.1"/>
      </element>
</opening> 
```

使用以下代码：

```
>>> a=open('file.xml').read()
>>> import BeautifulSoup
>>> s= BeautifulSoup.BeautifulSoup(a)
>>> print s.prettify() 
```

我得到以下输出：

```
<?xml version='1.0' encoding='utf-8'?>
<opening name="value1">
 <element name="value1.1">
 </element>
 <element name="value1.2">
 </element>
 <element name="1.2.1">
 </element>
 <element name="value1.3">
 </element>
 <element name="value1.3.1">
 </element>
</opening> 
```

为什么将所有元素显示为开始标签的子元素？如何正确解析此文件？

我也尝试过使用 s= BeautifulSoup.BeautifulStoneSoup(a) 但这也没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:53:55.110

`BeautifulSoup`主要是一个`HTML`解析器，它尽力处理格式错误的 HTML。那里有`lxml`我强烈推荐的 XML 库 - 试试看。

一个例子：

```
import lxml.etree

xml = """<?xml version="1.0" ?> 
<opening name="value1" >
      <element name="value1.1"/>
      <element name="value1.2">
        <element name="1.2.1"/>
      </element>
      <element name="value1.3">
        <element name="value1.3.1"/>
      </element>
</opening>
"""

r = lxml.etree.fromstring(xml)
r.xpath('//element/@name')
# ['value1.1', 'value1.2', '1.2.1', 'value1.3', 'value1.3.1'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:10:17.697

Beautiful Soup 3 需要一个特殊的参数来让标签正确关闭。您需要 BeautifulStoneSoup 构造函数的 selfClosingTags 参数。使用类似的东西：

```
soup = BeautifulStoneSoup(markup, selfClosingTags=['element']) 
```

# mysql - MYSQL 插入和更新的记录数

> ID：11942024
> 
> 赞同：2
> 
> 时间：2012-08-13T20:44:41.087
> 
> 标签：mysql, sql

我有以下 SQL 语句

```
INSERT INTO my_counts (type,code,count) SELECT type,id ,1 from my_data WHERE user_id=10
ON DUPLICATE KEY UPDATE count = count + 1; 
```

这里**type,code**是一个复合主键。

您能否让我知道如何找出插入的记录数以及单独更新的记录数？

我知道**SELECT ROW_COUNT()**给出了受影响的行（2 用于更新，1 用于插入）。但是如何分别找出

```
1) the number of rows updated 
2) the number of rows inserted 
```

谢谢你的帮助

问候

基兰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T22:51:42.243

我不知道从诊断信息中获取此信息的好方法。

在任何情况下，假设您已经控制它以便只有*刚刚* `INSERT`编辑的行在表中（或只会被查询），这可以在事后简单地检索：

```
SELECT COUNT(*) as Inserted, SUM(count - 1) as Updated
FROM my_counts; 
```

（请注意，正如我的 SQLFiddle[示例](http://www.sqlfiddle.com/#!2/20b13/1/0)中所包含的，这些数字实际上可以从基础数据中预测出来）。

# c++ - 腐败不提数组

> ID：11942026
> 
> 赞同：-1
> 
> 时间：2012-08-13T20:44:52.257
> 
> 标签：c++, visual-studio-2010

我对 c++ 相当陌生，想知道为什么我的数组不断损坏。在破坏 ammo_bank 之前，它会经过多次 for 循环，尽管它在该行之前已正确分配。然后它给了我错误写入违规

```
class bullet{
public:
    int x, y, damage, speed;
    char direction;
};

bullet * ammo_bank[100];
void render(player avatar, riflemen enemy){
    bullet projectile;
    int counter1, counter2, icurrentammo;
    icurrentammo = current_ammo -1;
    for (counter1 = 0; counter1 <=SCREEN_HEIGHT; counter1++){
        for (counter2 = 0; counter2 <=SCREEN_WIDTH; counter2++){     // corruption occurs a few times before here
            screen[counter1][counter2] = '.';
        }
    }
    system("cls");
    screen [avatar.y][avatar.x] = AVATAR_SYMBOL;
    screen [enemy.y][enemy.x] = RIFLEMEN_SYMBOL;
    while (icurrentammo >= 0){
        projectile = *ammo_bank[icurrentammo];                 // Writing error
        screen[projectile.x][projectile.y] = BULLET_SYMBOL;
        projectile.x ++;
        icurrentammo --;
    }

    for (counter1 = 0; counter1 <=SCREEN_HEIGHT; counter1++){
        cout << endl;
        for (counter2 = 0; counter2 <=SCREEN_WIDTH; counter2++){
            cout << screen[counter1][counter2];
        }
    }

void playerShoot(player avatar){
    ammo_bank[current_ammo] = new bullet(); // Create the MyClass here.
    bullet projectile = *ammo_bank[current_ammo];
    projectile.x = avatar.x + 1;
    projectile.y = avatar.y;
    projectile.speed = 2;
    projectile.direction = 'f';
    projectile.damage = 1;
    *ammo_bank[current_ammo] = projectile;
    current_ammo++;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:48:57.613

screen[][] 是如何声明的。如果是 screen[SCREEN_HEIGHT][SCREEN_WIDTH]，那么你的问题是你使用 <= 而你应该只使用 <。

# php - PHP mysql代码帮助解码

> ID：11942028
> 
> 赞同：1
> 
> 时间：2012-08-13T20:44:55.940
> 
> 标签：php, asp.net, mysql, json

我在我的数据库中的项目下有这个值：

> a:1:{i:0;a:9:{s:12:"model_number";s:10:"TT1-W";s:5:"price";s:4:"3810";s: 10:"unit_price";d:3135.6300000000001091393642127513885498046875;s:8:"id_price";d:3810;s:9:"sales_tax";d:290.3700000000000045474735088646411895751953125;s:5:"sales";d:3084.6300000000001091393642127513885498046875;s:7: "服务";s:2:"51";s:7:"货运";s:3:"384";s:13:"co_cat";s:3:"X4";}}

使其更易于阅读：

```
a:1:
    {
    i:0;
    a:9:
        {
        s:12:"model_number";
        s:10:"TT1-W";
        s:5:"price";
        s:4:"3810";
        s:10:"unit_price";
        d:3135.6300000000001091393642127513885498046875;
        s:8:"id_price";
        d:3810;
        s:9:"sales_tax";
        d:290.3700000000000045474735088646411895751953125;
        s:5:"sales";
        d:3084.6300000000001091393642127513885498046875;
        s:7:"service";
        s:2:"51";
        s:7:"freight";
        s:3:"384";
        s:13:"co_cat";
        s:3:"X4";
        }
    } 
```

我无法找出如何解码这个字符串，因为它似乎无法在页面上显示它的 php 代码中找到对它的引用。在我看来它是 JSON，但我似乎找不到上述的“标准”格式，以便开始弄清楚它从哪里开始和在哪里结束。

我需要使用 ASP.net 进行解码。但话又说回来，我需要弄清楚它是什么，然后才能开始解码它！

对它的任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:47:43.960

尝试反序列化： [function.unserialize](http://www.php.net/manual/de/function.unserialize.php)

编辑：如果您可以使用 C# 库： [如何反序列化 PHP 序列化数组/变量/类并在 C# 中返回合适的对象](https://stackoverflow.com/questions/1914585/how-to-unserialize-php-serialized-array-variable-class-and-return-suitable-objec)

EDIT2： [Visual Studio 提示：在 VB.NET 项目中使用 C# 的三种方法](http://www.christec.co.nz/blog/archives/290)

编辑3：

> 我需要弄清楚它是什么

在字符串中存储（和恢复）数组和对象（以及其他类型，请参阅手册）是标准的 PHP 解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T20:48:36.273

这似乎是 PHP 的序列化方法。你只需要使用 PHP`unserialize()`就可以了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T20:50:53.563

这看起来是一个序列化的对象。PHP的[`unserialize`](http://www.php.net/manual/en/function.unserialize.php)可能是你想要的：

> `unserialize()`获取单个序列化变量并将其转换回 PHP 值。

没有将其转换为 ASP.Net 对象的内置方法，但它是一种常规格式，因此您*可以*构建自己的解析器来创建该特定结构的属性的简单字典表示。

但是，如果您尝试在 ASP.Net 中反序列化 PHP 对象，您可能做错了什么！

# java - 在屏幕上显示 ListView 并通过单击按钮向其中添加元素

> ID：11942029
> 
> 赞同：0
> 
> 时间：2012-08-13T20:45:03.063
> 
> 标签：java, android, listview

我创建了这个简单的 android 活动来演示我的问题。

我只希望屏幕有一个 textInput 和一个按钮。在这两个下面，如果按下按钮，我想创建一个ListView（按钮基本上调用了一些方法并获取一个String数组。我希望ListView显示这个数组。

所以它是一个普通的屏幕、一个按钮、一个文本输入，当按下按钮时它会调用一个方法并接收一个字符串数组并希望在它们下面打印列表。

```
public class TagListViewer  extends ListActivity {

    private Button clickBtn;
    EditText textInput;
    String[] resultStr = {"a", "b", "c"}; //Ideally would want this inside the button OnClickListener... but couldn't bcz I needed one for the Array adapter.

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.tagselection);

        clickBtn = (Button) findViewById(R.id.CreatePL);
        clickBtn.setText("Search");
        textInput = (EditText) findViewById(R.id.textInput);

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, resultStr);
        setListAdapter(adapter);

        clickBtn.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                ArrayAdapter<String> adapter = (ArrayAdapter<String>) getListAdapter();

                adapter.add("ABC"); //This I could use the array I get to add its elements
                adapter.notifyDataSetChanged();
            }

        });
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T21:05:20.907

我不确定您的问题是什么，但我注意到您正在尝试将项目添加到原始字符串数组并创建两个不同的适配器......我对这个问题有预感。看看下面的简单变化：

```
public class TagListViewer  extends ListActivity {
    // Make adapter a class variable
    private ArrayAdapter<String> adapter;

    private Button clickBtn;
    EditText textInput;

    // You cannot add items to a primitive String array, we'll convert this to an ArrayList
    String[] resultStr = {"a", "b", "c"}; 
    List<String> list = new ArrayList<String>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tagselection);

        // Add contents of resultStr to the dynamic List
        Collections.addAll(list, resultStr);

        clickBtn = (Button) findViewById(R.id.CreatePL);
        clickBtn.setText("Search");
        textInput = (EditText) findViewById(R.id.textInput);

        // Reflect class variable change and use list instead of resultStr
        adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, list);
        setListAdapter(adapter);

        clickBtn.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                // This will add the one phrase "ABC"
                //adapter.add("ABC");

                // This will add the contents of textInput
                adapter.add(textInput.getText().toString());
            }
        });
    }
} 
```

**从评论中添加**

ListActivity 需要`android.R.id.list`在其布局中有一个带有 id 的 ListView：

```
<ListView android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/> 
```

# powershell - 取消隐藏使用 -WindowStyle Hidden 运行的 powershell 窗口？

> ID：11942032
> 
> 赞同：5
> 
> 时间：2012-08-13T20:45:13.303
> 
> 标签：powershell, scheduled-tasks, powershell-2.0

[在后台](https://stackoverflow.com/questions/4814390/hiding-of-scheduled-execution-of-powershell-script)运行powershell 窗口时，如何重新连接到它？或者相反，它的输出是否打算通过日志文件查看？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T21:59:00.147

通常，您只需输出到日志并检查计划任务。但是，如果您可以容忍控制台窗口短暂闪烁，您可以调用 Win32 API 来控制控制台窗口的可见性，例如：

```
$src = @'
    [DllImport("Kernel32.dll")]
    public static extern IntPtr GetConsoleWindow();
    [DllImport("User32.dll")]
    public static extern bool ShowWindow(IntPtr hWnd, Int32 nCmdShow);
'@

Add-Type -Name ConsoleUtils -Namespace Foo -MemberDefinition $src

$hide = 0
$show = 1

$hWnd = [Foo.ConsoleUtils]::GetConsoleWindow()
[Foo.ConsoleUtils]::ShowWindow($hWnd, $hide)

Start-Sleep -Sec 5

[Foo.ConsoleUtils]::ShowWindow($hWnd, $show)

Read-Host "Press any key to exit" 
```

通常您不想显示窗口，但也许您定义了一个环境变量，然后让脚本检查该环境变量的某个值并在这种情况下显示窗口，例如`$env:DebugSchTask -eq 'yes'`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-27T12:14:11.170

您始终可以通过创建新的 PowerShell 会话并使用`-WindowStyle`开关来更改当前窗口的窗口样式：

```
PowerShell -Command {exit} -WindowStyle Hidden # Hide the window

Start-Sleep 1 # Do something while hidden

PowerShell -Command {exit} -WindowStyle Normal # Unhide the window 
```

如果您有一个监控脚本，这也可以工作，该脚本开始隐藏并且仅在满足条件时才显示。

# graphviz - 存在集群时的 GraphViz 水平顺序

> ID：11942033
> 
> 赞同：7
> 
> 时间：2012-08-13T20:45:37.533
> 
> 标签：graphviz, dot

好的，我知道在 GraphViz 中排序节点的问题已经被散列到了濒临死亡的地步，但我还没有看到有人解决排序*集群*的问题。我尝试了书中的所有技巧：

*   文件中节点的顺序是从左到右。如果我不添加集群，dot 只会做正确的事情并以正确的顺序显示它们而无需任何提示。但是，当添加集群时，点会打乱（随机化？）顺序。

*   我添加了不可见的边缘来尝试强制子集群之间的顺序；但似乎一旦将子集群放置在集群内，dot 就会决定一些特定的顺序，并且会毫不犹豫地让边缘遍布地图以保留它。

*   由于节点顺序和不可见边使我失败，我转而尝试强制节点的位置。这再次失败，因为只有 dot 会进行聚类，并且它会忽略输入位置。甚至通过 fdp 运行 dot 的未修改输出（使用生成的位置）也会导致崩溃，所以我也放弃了那个方向。

这是一个生成下图的[示例点文件。](http://www.ben-kiki.org/oren/stackoverflow/diagram.txt)绿线是我添加的“不可见”边缘，但未成功尝试强制 dot 从左到右排序所有内容。如果这成功了，绿线将从锚点向左穿过节点，然后向右移动，而不会相互交叉。例如，每个 be.0 将位于其兄弟 be.1 的左侧，对于 tg-s 也是如此）。如您所见， dot 打乱了子集群的顺序（将 .1 同级放在 .0 的左侧）。就好像它是故意这样做的，由于一些限制，不管任何边缘。我找不到任何方法来说服它不这样做。这非常令人沮丧，因为生成的图表非常适合我的需求。

[![乱序点簇](../Images/1bea455dbd2081b0cb9f60c3ad1081a1.png)](https://i.stack.imgur.com/r5bgg.png)
[（来源：[ben-kiki.org](http://www.ben-kiki.org/oren/stackoverflow/diagram.png)）]

所以。有**什么**办法可以强制 dot 尊重集群内集群的某种顺序？

*编辑*：进一步研究，似乎集群的默认顺序与节点的顺序相反。也就是说，通常（在 TB 图中），文本中最先出现的节点往往会出现在文本中稍后出现的节点的*左侧*；但似乎首先出现在文本中的子集群往往会出现在文本中稍后出现的子集群的*右侧*。现在，如果这是一条硬性规定，生活将是美好的；然而，dot 仍然有时（但不那么频繁）坚持重新排列子集群，不管任​​何由此产生的交叉边缘，似乎“只是因为”。所以问题仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-01-04T21:05:11.237

有点晚了，但这里有一些其他的想法：（示例数据有点大，无法使用）

无论如何，您是否尝试过：

*   edge[constraint=false] 在一些黑/红线上（constraint=false 可能会出现一些奇怪的长边路由）
*   和/或 edge[weight=1000] 在绿线上（更难正确），
*   你可能还想加入更多的脚手架
*   你不能在集群中排名=相同，所以如果需要它必须在脚手架节点上

这是一个轻量级的例子，它成功地改变了包括集群在内的一半节点的顺序

```
digraph G {
    subgraph cluster_sa{
    edge[weight=1000]
    subgraph cluster_s1a{ s1a1->s1a2 }
    subgraph cluster_s2a{ s2a1->s2a2 }
    subgraph cluster_s1a_{ s1a1_->s1a2_ }
    subgraph cluster_s2a_{ s2a1_->s2a2_ }
    s1a2->s1a1_
    s2a2->s2a1_
    }
{
    edge[constraint=false]
    subgraph cluster_ta{
    subgraph cluster_t1a{ t1a1->t1a2 }
    subgraph cluster_t2a{ t2a1->t2a2 }
    subgraph cluster_t1a_{ t1a1_->t1a2_ }
    subgraph cluster_t2a_{ t2a1_->t2a2_ }
    t1a2->t1a1_
    t2a2->t2a1_
    }
    edge[tailport=s headport=s]
    s1a2_->t1a1
    s2a2_->t2a1
}
edge[color=green]
node[color=green]
{rank=same s1a0->s2a0->t2a0->t1a0}
s1a0->s1a1
s2a0->s2a1
t1a0->t1a2_
t2a0->t2a2_

t1a2_->t1a1_->t1a2->t1a1
t2a2_->t2a1_->t2a2->t2a1
} 
```

在 viz-js.com 上呈现

[![弯曲](../Images/e7ee97836dc8d71c1f2d1efd17d632b8.png)](https://i.stack.imgur.com/oPSGK.png)

有时以反向顺序连接节点也可能很有用（例如 t2a2_->t2a1_[dir=back] 而不是上面的实际上会更好，因为绿色箭头可以被删除，给出一个直的黑色箭头）但我不认为这对你的情况会有所帮助

# json - Neo4j - 在非托管扩展中以 JSON 格式返回 Collection 对象

> ID：11942037
> 
> 赞同：0
> 
> 时间：2012-08-13T20:45:56.173
> 
> 标签：json, neo4j

我为 Neo4j 编写了一个非托管扩展，我需要它来返回一个集合（我有一个集合）并想以 JSON 格式返回它，但是当我尝试返回对象时，我得到了

```
SEVERE: A message body writer for Java class java.util.ArrayList, and Java type class java.util.ArrayList, and MIME media type application/json was not found
Aug 14, 2012 8:56:51 AM com.sun.jersey.spi.container.ContainerResponse write
SEVERE: The registered message body writers compatible with the MIME media type are:
*/* ->
  com.sun.jersey.core.impl.provider.entity.FormProvider
  com.sun.jersey.core.impl.provider.entity.StringProvider
  com.sun.jersey.core.impl.provider.entity.ByteArrayProvider
  com.sun.jersey.core.impl.provider.entity.FileProvider
  com.sun.jersey.core.impl.provider.entity.InputStreamProvider
  com.sun.jersey.core.impl.provider.entity.DataSourceProvider
  com.sun.jersey.core.impl.provider.entity.XMLJAXBElementProvider$General
  com.sun.jersey.core.impl.provider.entity.ReaderProvider
  com.sun.jersey.core.impl.provider.entity.DocumentProvider
  com.sun.jersey.core.impl.provider.entity.StreamingOutputProvider
  com.sun.jersey.core.impl.provider.entity.SourceProvider$SourceWriter
  com.sun.jersey.server.impl.template.ViewableMessageBodyWriter
  com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider$General
  com.sun.jersey.core.impl.provider.entity.XMLListElementProvider$General

javax.ws.rs.WebApplicationException: com.sun.jersey.api.MessageException: A message body writer for Java class java.util.HashSet, and Java type class java.util.HashSet, and MIME media type application/json was not found 
```

我的 Java 代码是

```
Set<Long> matches = new HashSet<Long>();
return Response.ok(matches, MediaType.APPLICATION_JSON).build(); 
```

我假设它会处理列表，但从上面的错误中我可以看到它没有。这在 Neo4j 非托管扩展中是否可行

# php - 无法在ajax中传递值

> ID：11942043
> 
> 赞同：-1
> 
> 时间：2012-08-13T20:46:21.867
> 
> 标签：php

我正在尝试通过以下代码传递价值，但无法请任何人检查，也许我在某个地方弄错了

```
<input type="button" name="vote" value="Yes" width="100" onclick="getVote('; echo "y".$info['autoid']; echo')"/> 
```

问题出在以下行**“y”.$info['autoid'];** 如果我删除**“y”。**它工作正常。但我想传递 y 和产品 ID。

基本上我正在尝试将 y 与 int 结合起来。

**好的，这里是完整的代码。**

```
 <script type="text/javascript">

  function getVote(int)
  {
  if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
    }
  else
    {// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
       xmlhttp.onreadystatechange=function()
         {
         if (xmlhttp.readyState==4 && xmlhttp.status==200)
         {
      document.getElementById("poll").innerHTML=xmlhttp.responseText;
           }
    }
 xmlhttp.open("GET","../poll/"+int,true);
xmlhttp.send();
}
</script>

<div id="poll">
 <form>
poll - :
<input type="button" name="vote" value="Yes" width="100" onclick="getVote('; echo     "y".$info['autoid']; echo')"/>
<input type="button" name="vote" value="No" width="100" onclick="getVote('; echo   "n".$info['autoid']; echo')"/>
</form>
 </div> 
```

**谢谢大家...我找到了另一种方式，我们可以通过“-”表示是，而为“n”则为空**

```
<input type="button" name="vote" value="Yes" width="100" onclick="getVote('; echo "-".$info['autoid']; echo')"/>
<input type="button" name="vote" value="No" width="100" onclick="getVote('; echo $info['autoid']; echo')"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:52:18.237

您试图在双引号中包含双引号，但不清楚您的 php 包装器在哪里？

我将 onclick 属性重写为：

```
onclick="getvote( <?php echo "y{$info['autoid']}"?> " 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:09:27.727

您的代码在问题所在的位置有点混乱。

用这个：

```
<input type="button" name="vote" value="Yes" width="100" onclick="getVote('y<?php echo $info['autoid']; ?>');"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T21:02:44.090

int 是 javascript 中的保留字，您也应该使用 JQuery 之类的东西来处理您的 ajax 调用。

# javascript - 缩放多边形以使边缘匹配

> ID：11942046
> 
> 赞同：13
> 
> 时间：2012-08-13T20:46:39.120
> 
> 标签：javascript, geometry, 2d, html5-canvas, polygon

我正在使用 JavaScript 画布开发一个项目，并且需要能够将光标捕捉到距多边形一定距离的位置。我已经可以捕捉到多边形本身，但我需要让光标离得更远。

据我所知，最好的方法是缩放多边形并捕捉到它，但是当我缩放多边形时，旧多边形的边缘和新多边形的边缘之间的距离并不总是匹配向上。

这是问题的一个例子：

![在此处输入图像描述](../Images/ad1a21fc6ffacc00ce52c909ad32d842.png) ![在此处输入图像描述](../Images/552e43674dc4cb3f50bc22a613f55125.png)

**编辑：**灰色代表原始多边形，如果我正常缩放多边形，红色是我得到的，绿色是我想要完成的

我已经尝试将多边形转换为原点并乘以比例因子，但似乎无法将每个边缩放特定距离。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T13:18:19.160

我为给定的多边形制作了一个[jsFiddle](http://jsfiddle.net/MadLittleMods/vqKvM/39/)，计算了一个我希望满足您要求的外部多边形。[我在这个pdf 文档](https://drive.google.com/viewerng/viewer?a=v&pid=sites&srcid=ZGVmYXVsdGRvbWFpbnxqa2dhZGdldHN0b3JlfGd4OjQ4MzI5M2Y0MjNmNzI2MjY)中把数学放在了后面。

**更新：**已编写代码来处理垂直线。

```
function Vector2(x, y)
{
    this.x = x;
    this.y = y;
}

function straight_skeleton(poly, spacing)
{
    // http://stackoverflow.com/a/11970006/796832
    // Accompanying Fiddle: http://jsfiddle.net/vqKvM/35/

    var resulting_path = [];
    var N = poly.length;
    var mi, mi1, li, li1, ri, ri1, si, si1, Xi1, Yi1;
    for(var i = 0; i < N; i++)
    {
        mi = (poly[(i+1) % N].y - poly[i].y)/(poly[(i+1) % N].x - poly[i].x);
        mi1 = (poly[(i+2) % N].y - poly[(i+1) % N].y)/(poly[(i+2) % N].x - poly[(i+1) % N].x);
        li = Math.sqrt((poly[(i+1) % N].x - poly[i].x)*(poly[(i+1) % N].x - poly[i].x)+(poly[(i+1) % N].y - poly[i].y)*(poly[(i+1) % N].y - poly[i].y));
        li1 = Math.sqrt((poly[(i+2) % N].x - poly[(i+1) % N].x)*(poly[(i+2) % N].x - poly[(i+1) % N].x)+(poly[(i+2) % N].y - poly[(i+1) % N].y)*(poly[(i+2) % N].y - poly[(i+1) % N].y));
        ri = poly[i].x+spacing*(poly[(i+1) % N].y - poly[i].y)/li;
        ri1 = poly[(i+1) % N].x+spacing*(poly[(i+2) % N].y - poly[(i+1) % N].y)/li1;
        si = poly[i].y-spacing*(poly[(i+1) % N].x - poly[i].x)/li;
        si1 = poly[(i+1) % N].y-spacing*(poly[(i+2) % N].x - poly[(i+1) % N].x)/li1;
        Xi1 = (mi1*ri1-mi*ri+si-si1)/(mi1-mi);
        Yi1 = (mi*mi1*(ri1-ri)+mi1*si-mi*si1)/(mi1-mi);
        // Correction for vertical lines
        if(poly[(i+1) % N].x - poly[i % N].x==0)
        {
            Xi1 = poly[(i+1) % N].x + spacing*(poly[(i+1) % N].y - poly[i % N].y)/Math.abs(poly[(i+1) % N].y - poly[i % N].y);
            Yi1 = mi1*Xi1 - mi1*ri1 + si1;
        }
        if(poly[(i+2) % N].x - poly[(i+1) % N].x==0 )
        {
            Xi1 = poly[(i+2) % N].x + spacing*(poly[(i+2) % N].y - poly[(i+1) % N].y)/Math.abs(poly[(i+2) % N].y - poly[(i+1) % N].y);
            Yi1 = mi*Xi1 - mi*ri + si;
        }

        //console.log("mi:", mi, "mi1:", mi1, "li:", li, "li1:", li1);
        //console.log("ri:", ri, "ri1:", ri1, "si:", si, "si1:", si1, "Xi1:", Xi1, "Yi1:", Yi1);

        resulting_path.push({
            x: Xi1,
            y: Yi1
        });
    }

    return resulting_path;
}

var canvas = document.getElementById("Canvas");
var ctx = canvas.getContext("2d");

var poly = [
    new Vector2(150, 170),
    new Vector2(400, 120),
    new Vector2(200, 270),
    new Vector2(350, 400),
    new Vector2(210, 470)
];

draw(poly);
draw(straight_skeleton(poly, 10));

function draw(p) {
    ctx.beginPath();
    ctx.moveTo(p[0].x, p[0].y);
    for(var i = 1; i < p.length; i++)
    {
        ctx.lineTo(p[i].x, p[i].y);
    }
    ctx.strokeStyle = "#000000";
    ctx.closePath();
    ctx.stroke();
} 
```

将多边形放入点对象数组中。

该函数在画布上`draw(p)`绘制多边形。`p`

给定的多边形在数组 poly 中，在数组 poly 中的外部。

`spacing`是多边形之间的距离（如绿色图中的箭头所示）

* * *

在安格斯约翰逊的评论之后，我制作了更多的小提琴来展示他提出的问题。这个问题比我最初想象的要困难得多。

*   [http://jsfiddle.net/vqKvM/5/](http://jsfiddle.net/vqKvM/5/)
*   [http://jsfiddle.net/vqKvM/6/](http://jsfiddle.net/vqKvM/6/)
*   [http://jsfiddle.net/vqKvM/7/](http://jsfiddle.net/vqKvM/7/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-13T17:07:33.160

我做了一个 Clipper 的 javascript 端口，用它你可以按照你想要的方式进行缩放。

这是一个膨胀多边形的例子：

![在此处输入图像描述](../Images/ae9f69f22bbe3010bd30f7833fe5d4a3.png)

查看 Javascript Clipper 的[LIVE DEMO](http://jsclipper.sourceforge.net/5.0.2.2/main_demo.html)。

[并从https://sourceforge.net/projects/jsclipper/](https://sourceforge.net/projects/jsclipper/)获取 clipper.js 文件。

如何偏移多边形并在 html5 画布上绘制它们的[完整代码示例。](https://sourceforge.net/p/jsclipper/wiki/Home/#b72-full-code-example-drawing-offsetted-polygons-using-canvas)

如果需要，相反的（放气）也是可能的：

![偏移多边形](../Images/162e3c81271dbbd4de4539352fe5b971.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-14T21:00:27.087

ISTM，您所追求的是多边形偏移算法或库。
请参见 [膨胀/放气（偏移、缓冲）多边形的算法](https://stackoverflow.com/questions/1109536/an-algorithm-for-inflating-deflating-offsetting-buffering-polygons)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-13T21:34:37.700

一种方法是找到多边形的每条边与光标点之间的距离，并保持最小。

要计算点和线段之间的距离，请将点投影到支撑线上；如果投影落在端点之间，则解是点到线的距离；否则，解是到最近端点的距离。

这很容易使用矢量演算来计算。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-26T09:24:26.860

我可以使用[JSTS](https://github.com/bjornharrtell/jsts)库（[JTS](https://github.com/dr-jts/jts)的 JavaScript 端口）提供解决方案。该库具有用于膨胀/放气（偏移）多边形的方法。

如果您想获得具有不同类型边缘的膨胀多边形，您可以设置上限和连接样式。您唯一需要做的就是将多边形坐标转换为非常简单的 JSTS 坐标：

`function vectorCoordinates2JTS (polygon) { var coordinates = []; for (var i = 0; i < polygon.length; i++) { coordinates.push(new jsts.geom.Coordinate(polygon[i].x, polygon[i].y)); } return coordinates; }`

转换坐标后，您可以膨胀多边形：

```
function inflatePolygon(poly, spacing) {
  var geoInput = vectorCoordinates2JTS(poly);
  geoInput.push(geoInput[0]);

  var geometryFactory = new jsts.geom.GeometryFactory();

  var shell = geometryFactory.createPolygon(geoInput);
  var polygon = shell.buffer(spacing);
  //try with different cap style
  //var polygon = shell.buffer(spacing, jsts.operation.buffer.BufferParameters.CAP_FLAT);

  var inflatedCoordinates = [];
  var oCoordinates;
  oCoordinates = polygon.shell.points.coordinates;

  for (i = 0; i < oCoordinates.length; i++) {
    var oItem;
    oItem = oCoordinates[i];
    inflatedCoordinates.push(new Vector2(Math.ceil(oItem.x), Math.ceil(oItem.y)));
  }
  return inflatedCoordinates;
} 
```

使用我在[jsFiddle](http://jsfiddle.net/Mallack/kjwf5qq4/2/)上发布的代码，您将得到如下内容：

[![在此处输入图像描述](../Images/5bebad349c60e6fc801fc1445295d659.png)](https://i.stack.imgur.com/vRwj3.png)

*附加信息：* 我通常使用这种类型的充气/放气（稍作改动）来设置地图上绘制的多边形的半径边界（使用 Leaflet 或 Google 地图）。您只需将 lat,lng 对转换为 JSTS 坐标，其他一切都相同。例子：

[![在此处输入图像描述](../Images/d34df9ef8c6efdb1b1eb8cf55e47b0ea.png)](https://i.stack.imgur.com/XfgDK.png)

# jquery - Twitter Bootstraps 选项卡功能的自定义动画

> ID：11942051
> 
> 赞同：3
> 
> 时间：2012-08-13T20:46:53.303
> 
> 标签：jquery, twitter-bootstrap, css-animations

我将此功能用于选项卡/导航系统：

```
# http://twitter.github.com/bootstrap/javascript.html#tabs

$('#myTab a').click(function (e) {
  e.preventDefault();
  $(this).tab('show');
}) 
```

但是，我想使用自定义 CSS 动画。这可能吗？我知道有一个“淡入淡出”功能，但我找不到有关此功能的太多文档。

任何帮助，非常感谢！

亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:02:43.753

使用类“tab-pane”将“fade”添加到 div 的类属性中，另外将“in”添加到活动选项卡中。

```
<div class="tab-pane active fade in" id="tab1">
 ...
</div>
<div class="tab-pane fade" id="tab2">
 ...
</div> 
```

其他动画：

```
$('.tabs').tabs()
    .bind('change', function (e) {
        $(this).next().hide().<<Add code to show >>
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T02:07:21.953

尝试使用“slideDown”或“fadeIn”。基本的 jquery 效果应该像 'show' 一样应用。

[http://api.jquery.com/category/effects/](http://api.jquery.com/category/effects/)

# ios - 在ios中 NSString = NSString 会导致内存泄漏吗？

> ID：11942055
> 
> 赞同：0
> 
> 时间：2012-08-13T20:47:01.850
> 
> 标签：ios, memory-leaks, nsstring, automatic-ref-counting, nscopying

我已经看到了一些答案，但这些答案还不够扩展，我认为它们是在引入 ARC 之前。

所以如果我有两个 NSSstring 我可以设置

```
string1 =string2; 
```

或者

```
NSString * a1=@"String";
al=@"Lead"; 
```

不会导致内存泄漏或其他问题？

编辑：视图控制器或委托属性设置为（复制，非原子）怎么样？

Edit2：它应该是 NSString *al=@"String"。我希望这不会改变它不会泄漏的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:49:28.463

不，分配和重新分配字符串文字不会导致内存泄漏。当不使用 ARC 并分配使用`alloc`、`retain`、或以 . 为前缀的方法时`copy`，您只需要担心内存泄漏。`mutableCopy``new`

```
NSString a1=[@"String" mutableCopy];  
al=@"Lead";//This will cause a leak since you called copy above. 
```

有关详细信息，请参阅[高级内存管理规则](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html#//apple_ref/doc/uid/20000994-BAJHFBGH)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:00:05.233

也不会在 ARC 中泄漏。

但是，您可能想知道在这种情况下您正在处理引用 - 不执行隐式复制（除非您使用复制或复制限定属性）。

> 编辑：视图控制器或委托属性设置为（复制，非原子）怎么样？

为`NSString`s? 是的，`copy`应该是`NSString`s 的默认值。`nonatomic`应该是一切的默认值。当然，也有例外——当您可能偏离默认值时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T20:49:18.580

您的代码是安全的，不会泄漏。Cocoa 和 NSStrings 非常聪明地处理这些问题。

由于 NSString 是不可变的，因此您最终可能会发生其他有趣的事情，如果您尝试担心指针本身，您可能会感到奇怪。但是您的示例不受这些问题的影响。

# php - 从一个数组创建另一个数组

> ID：11942057
> 
> 赞同：1
> 
> 时间：2012-08-13T20:47:19.300
> 
> 标签：php, arrays, sorting, array-filter

我在[PHP](http://en.wikipedia.org/wiki/PHP)中得到了这个数组：

```
$arr =('1-1.jpg','1-2.jpg','11-3.jpg', '1-4.jpg', '3-5.jpg', '41-5.jpg','1-3.jpg','4-5.jpg','14-5.jpg','54-5.jpg','64-5.jpg','14-5.jpg', '1-5.jpg'); 
```

我需要这个数组，但我在服务器上有 PHP 5.27 版本:(

```
$newarray=('1-1.jpg','1-2.jpg','1-3.jpg', '1-4.jpg', '1-5.jpg'); 
```

忘记服务器版本，标准是“1-”。如何获取仅以“1-”开头的所有元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T20:53:24.867

使用此代码：

```
<?php
$arr = array('1-1.jpg','1-2.jpg','11-3.jpg', '1-4.jpg', '3-5.jpg', '41-5.jpg','1-3.jpg','4-5.jpg','14-5.jpg','54-5.jpg','64-5.jpg','14-5.jpg', '1-5.jpg');
$newarray = array();
foreach($arr as $item) {
    if(substr($item, 0, 2) == '1-') $newarray[] = $item;
}
sort($newarray); // Add this to sort the array
?> 
```

您可以使用`sort`后的函数`foreach`对数组进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T20:54:37.240

```
<?php
$new_array = array();
foreach ($old_array as $line) {
   if (substr($line, 0, 2) == "1-") {
      $new_array[] = $line;
   }
}
?> 
```

这将检查每个元素的前两个字符是否为 1-，如果是，则将其添加到新数组中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T22:21:49.277

Another way would be to use PHP's [`array_filter`](http://php.net/manual/en/function.array-filter.php) method:

```
$arr = array('1-1.jpg','1-2.jpg','11-3.jpg', '1-4.jpg', '3-5.jpg', '41-5.jpg','1-3.jpg','4-5.jpg','14-5.jpg','54-5.jpg','64-5.jpg','14-5.jpg', '1-5.jpg');
$newArr = array_filter($arr, "filterArray"); // stores the filtered array

function filterArray($value){
    return (substr($value, 0, 2) == "1-");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T22:07:21.697

使用[preg_grep](http://www.php.net/preg_grep)

```
$arr = array('1-1.jpg','1-2.jpg','11-3.jpg', '1-4.jpg', '3-5.jpg', '41-5.jpg','1-3.jpg','4-5.jpg','14-5.jpg','54-5.jpg','64-5.jpg','14-5.jpg', '1-5.jpg');

print_r(preg_grep('#^1-#', $arr)); 
```

演示：[http ://codepad.org/ipDmYEBI](http://codepad.org/ipDmYEBI)

# javascript - 我应该怎么做才能使这个菜单栏在 Internet Explorer 7 及更高版本中正常工作？

> ID：11942058
> 
> 赞同：0
> 
> 时间：2012-08-13T20:47:22.697
> 
> 标签：javascript, asp.net, css, menubar

我有一个 CSS 模板，我正在尝试对其进行一些更改，以便在我的网站中使用它。我面临一个奇怪的问题，我不知道如何解决它。当用户单击其中一个选项时，网站顶部的菜单栏以这样的方式设计，该选项将位于一个深绿色的矩形内，如下图所示：

![在此处输入图像描述](../Images/d7feefe15d270c31060e0bcc0c576c88.png)

这个矩形使用以下 CSS 实现：

```
/* TOP MENU */
#nav{
    position:relative;
    z-index:200;
    padding:0;
    text-align:right
}
#topnav, #topnav ul{
    margin:0;
    padding:0;
    list-style-type:none;
    list-style-position:outside;
}

#topnav{padding:25px 0 0 0; float:right}

#topnav a{
    padding:0 20px 34px 20px;
    color:#fff;
    text-decoration:none;
}

#topnav li a:hover{
    text-decoration: none;
  }
#topnav li.current > a{}

#topnav li{
    float:left;
    position:relative;
    font-size:12px;
    padding:0 0 0 0px;
    margin:0;
    height:35px;
    line-height:35px;
    cursor:pointer;
}
#topnav li.last{padding:0; margin:0}
#topnav li li{
    padding-right:0px;
    display:block;
    line-height:25px;
    padding:0px 0px 0px 0;
    margin-right:0;
    text-align:left !important;
    float:none;

}
#topnav ul {
    position:absolute;
    display:none;
    width:160px;
    top:58px;
    left:0;
    padding:15px 0 13px 0;
    text-align:left;
    background-position:0 13px !important
}

#topnav li ul a{
    width:130px;
    display:block;
    margin:0 0px;
    padding:8px 15px;
    font-size:12px !important;
    line-height:16px;
    color:#fff;
    text-align:left !important;
    text-transform:capitalize;

}

#topnav li ul a:hover{}

#topnav ul ul{
    top:0px;
}   

#topnav li ul ul {
    left:160px;
    margin:0px 0 0 0px;
}

#topnav li:hover ul ul, #topnav li:hover ul ul ul, #topnav li:hover ul ul ul ul{
    display:none;
}
#topnav li:hover ul, #topnav li li:hover ul, #topnav li li li:hover ul, #topnav li li li li:hover ul{
    display:block;
}
#topnav li.back {}
#topnav li.back {z-index:8;position: absolute;}
#topnav > li a, #topnav > li a:hover, #topnav > li a:visited{z-index:10;position:relative} 
```

此外，该矩形随鼠标移动的移动取决于以下 Javascript 文件：

```
<script type="text/javascript" src="./Scripts/jquery.lavalamp.js"></script>

    <script type="text/javascript" src="./Scripts/lavalamp-config.js"></script>
    <script type="text/javascript" src="./Scripts/jquery.easing.1.1.js"></script>
    <script type="text/javascript" src="./Scripts/jquery.preloader.js"></script> 
```

我的问题是我公司的大多数机器都使用**Internet Explorer 7**，并且菜单无法正常使用。当我单击其中一个选项时，没有任何变化，这意味着我没有被重定向到另一个页面。除此之外，矩形形状仅围绕第一个选项。**为什么？以及如何解决？**

由于我是作为 ASP.NET 应用程序开发的，因此我将所有 CSS 和 Javascript 文件放在母版页中，对于菜单栏，我将其开发为用户控件。

[这是JSFiddle](http://jsfiddle.net/Zqd8u/)的链接，但由于缺少图像而未完成。 *很抱歉，但我不熟悉 JSFiddle。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:50:13.210

代替

```
<script type="text/javascript" src="./Scripts/jquery.lavalamp.js"></script>

<script type="text/javascript" src="./Scripts/lavalamp-config.js"></script>
<script type="text/javascript" src="./Scripts/jquery.easing.1.1.js"></script>
<script type="text/javascript" src="./Scripts/jquery.preloader.js"></script> 
```

和：

```
<script>
if ($.browser.version < 9.0 && $.browser.msie) {
document.getElementsByTagName("head")[0].innerHTML = '<script type="text/javascript" src="./Scripts/jquery.easing.1.1.js"></script><script type="text/javascript" src="./Scripts/jquery.preloader.js"></script><script type="text/javascript"  src="./Scripts/jquery.lavalamp.js"></script><script type="text/javascript" src="./Scripts/lavalamp-config.js"></script>';
}
else {
    document.getElementById("head")[0].innerHTML = '<script type="text/javascript" src="./Scripts/jquery.easing.1.1.js"></script><script type="text/javascript" src="./Scripts/jquery.preloader.js">';
}

​​&lt;/script>​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

# codeigniter - 尝试到达 index() 时如何避免这种循环

> ID：11942060
> 
> 赞同：1
> 
> 时间：2012-08-13T20:47:29.203
> 
> 标签：codeigniter, codeigniter-2, pyrocms, ion-auth

我正在尝试检查是否`$this->current_user`已设置，否则重定向到登录页面，但因为 Wall 是我的默认路由，它会循环并给我**500 Internal Server Error**，有没有人对如何使用它有一些想法？我正在使用[PyroCMS](http://pyrocms.com)，他们使用[IonAuth](http://benedmunds.com/ion_auth/)。

```
class Wall extends Public_Controller {

   public function __construct() {
        parent::__construct();

    if (empty($this->current_user)) {
         $this->session->set_flashdata('error', 'Debes iniciar sesión para acceder a esta página');
         redirect(site_url());
     }
    }

 } 
```

提前欢呼和感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:14:22.960

redirect() 方法重定向到一个 URL。您可以使用 redirect(site_url('login')); 只要您确保已准备好名称为“登录”的控制器。

如果您不想使用 site_url()，也可以将 URL 硬编码为：

重定向（'http://www.yoursite.com/login'）；

# .net - 如何使用 Microsoft Word API 和书签功能以编程方式将不同的文本添加到同一个书签集合？

> ID：11942061
> 
> 赞同：0
> 
> 时间：2012-08-13T20:47:32.993
> 
> 标签：.net, ms-word, bookmarks

我正在尝试在 word 文档中为所有带有文本“示例”的字段添加书签。我需要用书签名称“fld_sample”为所有这些添加书签。我正在使用 Microsoft.Office.Interop.Word API 以编程方式执行此操作。下面的代码是我尝试过的示例代码。

```
using Microsoft.Office.Interop.Word;
using System.Reflection; 

Object oTrue = true; Object oFalse = false;
Application oWord = new Application();
Document oWordDoc = new Document();
oWord.Visible = true;
Object oTemplatePath = @"string Path";

oWordDoc = oWord.Documents.Add(ref oTemplatePath, ref oMissing, ref oMissing, ref      oMissing);

//selecting the range of text to bookmark.
Range rng = oWordDoc.Range(12, 18);

 oWordDoc.Bookmarks.Add("fld_sample", rng);

 //selecting the next range of text to bookmark with same name
 Range rng1 = oWordDoc.Range(102, 108);

 oWordDoc.Bookmarks.Add("fld_sample", rng1); 
```

但书签只为第二个值范围添加，而不是为第一个文本范围添加。任何人都可以帮助我使用此代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:55:05.107

每个书签都需要有一个唯一的名称。您的第二次调用有效地*重新分配*了书签“fld_sample”。如果您想要一个集合，您可以在代码中的循环中引用，将后续书签命名为“fld_sample2”、“fld_sample3”等。

# php - 将一定数量的命名项目从一个数组移动到另一个数组

> ID：11942068
> 
> 赞同：1
> 
> 时间：2012-08-13T20:48:04.987
> 
> 标签：php, arrays

我不完全确定逻辑将如何解决这个问题。我的大脑被炸了，我无法清晰地思考。

我正在处理一些 POST 数据，该数组中的一个字段是数量字符串。我可以读取此字符串并确定是否有超过 1 个小部件需要处理。

```
if($quantity <= 1){ //$_POST[widget1] } 
```

现在说有 4 个小部件。数量字段将反映这个数字，但我将如何遍历它们并将它们分配给自己的新数组？

```
$_POST[widget1], $_POST[widget2], $_POST[widget3], $_POST[widget4] 
```

我如何获取该数量编号，并使用某种通配符或前缀或其他东西从 post 数组中获取那么多和那些特定的命名项目？我不知道这是一个`for`, 或`while`, 还是什么类型的操作。如何循环访问 $_POST['widget* *X* *']，其中 X 是我的数量？

最终结果是我希望有一个结构如下的数组：

```
$widgets[data1]
$widgets[data2]
$widgets[data3]
$widgets[data4] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T20:50:43.377

使用`for`循环，您可以使用`$_POST`变量访问键，如`$_POST["widget$i"]`

```
$widgets = array();
for ($i=1; $i<=$quantity; $i++) {
  // Append onto an array
  $widgets[] = $_POST["widget$i"];
} 
```

但是，更好的长期解决方案是更改 HTML 表单，使其首先通过添加`[]`表单输入的`name`属性将数组传回 PHP：

```
<input type='text' name='widgets[]' id='widget1' value='widget1' />
<input type='text' name='widgets[]' id='widget2' value='widget2' />
<input type='text' name='widgets[]' id='widget3' value='widget3' /> 
```

通过 PHP 访问`$_POST['widgets']`，已经是一个数组！

```
var_dump($_POST['widgets']); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T20:52:38.273

迭代项目的数量，至少超过一个（如您所描述的）：

```
$widgets = array();
foreach (range(1, max(1, $quantity)) as $item)
{
    $name = sprintf('widget%d', $item);
    $data = sprintf('data%d', $item);
    $widget = $_POST[$name];
    // do whatever you need to do with that $widget.
    $widgets[$data] = $widget;
} 
```

# java - 在 Java 中将 nvarchar(max) 数据类型转换为字符串

> ID：11942073
> 
> 赞同：4
> 
> 时间：2012-08-13T20:48:29.030
> 
> 标签：java, sql, sql-server-2008

我正在使用 jTDS API 在 SQL Server 2008 上执行以下 sql 查询：

```
SELECT  a , b , c FROM [db].[dbo].[table] where d = 1; 
```

这三个字段的数据类型如下：

```
a  -- nvarchar(255)
b  -- nvarchar(255)
c  -- nvarchar(max) 
```

当我使用 Java 执行查询时，a 和 b 的字符串值是纯文本，但对于 c，我得到以下值：

```
net.sourceforge.jtds.jdbc.ClobImpl@2b34fb 
```

它似乎存储为对象，如何将其转换为普通字符串？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T07:57:29.053

尝试了@Roberto Navaron 发送的链接，它起作用了，只是将对象传递给此方法，将其类型转换为 clob 并返回字符串

```
private String clobToString(Clob data) {
    StringBuilder sb = new StringBuilder();
    try {
        Reader reader = data.getCharacterStream();
        BufferedReader br = new BufferedReader(reader);

        String line;
        while(null != (line = br.readLine())) {
            sb.append(line);
        }
        br.close();
    } catch (SQLException e) {
        // handle this exception
    } catch (IOException e) {
        // handle this exception
    }
    return sb.toString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-21T05:29:26.093

或者我们可以使用这个 -

*   字符串 getNString(int columnIndex)
*   字符串 getNString（字符串 columnLabel）

[http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html)

# objective-c - iOS 中的 SOAP - 从 XML 中提取多个字符串

> ID：11942076
> 
> 赞同：0
> 
> 时间：2012-08-13T20:48:35.487
> 
> 标签：objective-c, ios, web-services, soap, xml-parsing

在我正在制作的 iOS 程序中，我正在请求使用 SOAP 的课程列表。这是回复格式

```
<ListCoursesResponse>
          <statusMessage xmlns="xxx">string</statusMessage>
          <courseID xmlns="xxx">string</courseID>
          <courseTitle xmlns="xxx">string</courseTitle>
        </ListCoursesResponse>
        <ListCoursesResponse>
          <statusMessage xmlns="xxx">string</statusMessage>
          <courseID xmlns="xxx">string</courseID>
          <courseTitle xmlns="xxx">string</courseTitle>
</ListCoursesResponse> 
```

我使用的方法是将每个单独的课程提取为数组中的一个元素，而不是逐步遍历每个课程的数组并提取课程 ID 之间的内容。但是，我不知道如何提取多个，因为当我返回它时，它只显示第一门课程。如果我以不好的方式解释了这一点，请告诉我，以便我可以尝试更好地解释。

我的问题是，处理在 XML 响应中返回的大量课程（200 多个）的最佳方法是什么？

编辑：我正在使用的代码片段，它只返回 1 个 ID。

```
NSString *tag1Open = @"<ListCoursesResponse>";
    NSString *tag1Close = @"</ListCoursesResponse>";
    NSString *courseIDOpen = @"<courseID xmlns=\"http://drm.mediuscorp.com/\">";
    NSString *courseIDClose = @"</courseID>";
    result = @"";
    NSArray *XMLarray1 = [XMLResult componentsSeparatedByString:tag1Open];
    if ([XMLarray1 count] > 1) {

        for (int i = 0; i < [XMLarray1 count]; i++) {
            NSString *courseIDString = [[[XMLarray1 objectAtIndex:1]componentsSeparatedByString:tag1Close]objectAtIndex:0];

            NSArray *courseID = [XMLResult componentsSeparatedByString:courseIDOpen];

            if ([courseID count] > 1) {

                for (int i = 0; i < [courseID count]; i++) {
                    courseIDString = [[[courseID objectAtIndex:1]componentsSeparatedByString:courseIDClose]objectAtIndex:0];

                }

            }
        NSLog(@"Course ID: %@",courseIDString);

        }
        [persArray addObject:result];
        for (int i = 0; i < [persArray count]; i++) {
            NSLog(@"%@",[persArray objectAtIndex:i]);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:46:37.953

与其尝试使用 NSString 方法自己解析 SOAP XML 响应响应，不如使用 XML Parser 来处理此任务。iOS 有一个内置的 XML Parser，称为[NSXMLParser](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)，可供您使用。（还有许多可用的第三方 XML Parser 组件，包括 SAX 和 DOM 变体）

这是[一个教程，给出了一个使用 NSXMLParser 的例子](http://wiki.cs.unh.edu/wiki/index.php/Parsing_XML_data_with_NSXMLParser)。

# .net - 处理 Entity Framework 5 中的枚举更改

> ID：11942078
> 
> 赞同：8
> 
> 时间：2012-08-13T20:48:37.107
> 
> 标签：.net, entity-framework, enums, migration, entity-framework-5

在[这个问题](https://stackoverflow.com/questions/11909537/does-the-new-migrations-feature-of-entity-framework-5-fully-support-enum-changes/11941863#11941863)中，我发现枚举更改不是由实体框架迁移处理的。实际上，枚举更改甚至不会导致模型更改错误，因此您可以随意更改枚举而无需控制。

导致不同 int 值的枚举更改（例如顺序更改或删除）可以有效地使数据库数据无效，因为现在存储的整数的含义是错误的。

为了使迁移工作，您必须手动执行更改更改的枚举值的自定义 SQL。

问题是，开发人员必须记住这样做，如果有疏忽，则可能会发生有效的数据损坏。

有人如何对此进行检查？如果枚举发生更改，是否有可能抛出模型更改错误或类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:08:02.017

当您将枚举移到另一个项目以用作库时，.Net 中存在类似的枚举问题：

[http://bytes.com/topic/c-sharp/answers/271483-q-why-casting-enum#post1086722](http://bytes.com/topic/c-sharp/answers/271483-q-why-casting-enum#post1086722)

试试看 - 枚举通常非常脆弱。答案是始终为您的枚举分配一个明确的值，以防止这两个问题。这使您仍然可以利用它们的核心价值（使用清晰的名称而不是幻数以及在方法参数中键入安全性的更多内容），但会阻止您悄悄地破坏一切。

您可以通过代码审查或通过正则表达式的提交后挂钩来强制执行此策略。

# macos - JNI_CreateJavaVM 与 jre 64 位

> ID：11942080
> 
> 赞同：0
> 
> 时间：2012-08-13T20:48:43.820
> 
> 标签：macos, qt, java-native-interface, x86-64, i386

我正在 OS X 上开发一个 Qt 项目。
我正在使用 Jni 并包含 Java jdk 中存在的标头 jni.h。
我正在使用函数 JNI_CreateJavaVM 创建 vm，其符号位于 libclient.dylib 中（libjvm.dylib 是符号链接）。

问题是我的应用程序是 64 位的，而这个库是用于 i386 架构的，所以我无法链接/加载它。
如何在 64 位应用程序中使用此功能？

我唯一的选择是以 32 位构建 Qt，但我不太喜欢这样，因为我将永远被困在 32 位......（除非 java 为 64 位提供这个库）

# sql - 使用带有 INSERT INTO 语句的 OpenQuery

> ID：11942083
> 
> 赞同：3
> 
> 时间：2012-08-13T20:49:02.427
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我目前每天使用以下内容对表进行数据仓库：

```
DROP TABLE mytable 

SELECT firstcolumn, secondcolumn INTO mytable
FROM OPENQUERY (mylinkedserver, 'SELECT firstcolumn, secondcolumn FROM linkedtable') 
```

我想开始使用 TRUNCATE （以保留系统资源和索引）：

```
TRUNCATE TABLE mytable

INSERT INTO mytable (firstcolumn, secondcolumn)
? 
```

如何将 OpenQuery 与 INSERT INTO 语句一起使用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T20:55:26.783

我相信语法是：

```
TRUNCATE TABLE mytable

INSERT INTO mytable (firstcolumn, secondcolumn)
SELECT firstcolumn, secondcolumn 
FROM OPENQUERY (mylinkedserver, 'SELECT firstcolumn, secondcolumn FROM linkedtable') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T20:54:57.957

你试过了吗：

```
INSERT INTO mytable(firstcolumn, secondcolumn)
  SELECT firstcolumn, secondcolumn
  FROM OPENQUERY
  (
    mylinkedserver, 
    'SELECT firstcolumn, secondcolumn FROM linkedtable'
  ); 
```

# iphone - 识别我的 UILongPressGestureRecognizer 是从哪个单元格按下的，无法为其添加标签

> ID：11942084
> 
> 赞同：2
> 
> 时间：2012-08-13T20:49:05.910
> 
> 标签：iphone, objective-c, ios, xcode

我将我的 UILongPressGestureRecognizer 添加到一个单元格中，如下所示：

```
 UILongPressGestureRecognizer *longpressGesture = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longPressHandler:)];
    longpressGesture.minimumPressDuration = 2.5;
    longpressGesture.t
    [longpressGesture setDelegate:self];
    [cell addGestureRecognizer:longpressGesture];
    [longpressGesture release]; 
```

我想知道 UILongPressGestureRecognizer 被按下了哪个单元格，我无法为其添加标签，是否有一些巧妙的技巧可以找出这些信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T20:54:45.410

您将其添加到单元格中，因此该单元格是识别器的视图：

```
- (void)longPressHandler:(UILongPressGestureRecognizer *)gr {

    UITableViewCell *cell = (UITableViewCell *)gr.view;
    // ...
} 
```

# jasmine - 有没有办法在整个环境中添加 Jasmine 匹配器

> ID：11942085
> 
> 赞同：37
> 
> 时间：2012-08-13T20:49:07.083
> 
> 标签：jasmine, jasmine-matchers

有很多文档展示了如何向 Jasmine 规范添加匹配器（例如，[这里](https://github.com/pivotal/jasmine/wiki/Matchers)）。

有没有人找到将匹配器添加到整个环境的方法？我想创建一组有用的匹配器，以供任何和所有测试调用，而无需在我的规范中使用 copypasta。

目前正在对源代码进行逆向工程，但如果存在的话，更喜欢一种经过验证的真实方法。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-13T20:54:15.607

当然，您只需在`beforeEach()`没有任何规范范围的情况下调用，并在那里添加匹配器。

这将全局添加一个`toBeOfType`匹配器。

```
beforeEach(function() {
  var matchers = {
    toBeOfType: function(typeString) {
      return typeof this.actual == typeString;
    }
  };

  this.addMatchers(matchers);
});

describe('Thing', function() {
  // matchers available here.
}); 
```

我创建了一个文件`spec_helper.js`，其中包含自定义匹配器之类的内容，我只需要在运行规范套件的其余部分之前将其加载到页面上即可。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-04-24T09:35:28.267

这是茉莉花2.0+的一个：

```
beforeEach(function(){
  jasmine.addMatchers({
    toEqualData: function() {
      return {
        compare: function(actual, expected) {
          return { pass: angular.equals(actual, expected) };
        }
      };
    }
  });
}); 
```

请注意，这使用 angular 的`angular.equals`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-25T05:45:39.210

编辑：我不知道这是一个可能会发生变化的内部实现。使用风险自负。

```
jasmine.Expectation.addCoreMatchers(matchers) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-19T08:47:35.363

根据之前的答案，我为**angular-cli**创建了以下设置。我的匹配器中还需要一个外部模块（在本例中为 moment.js）

**注意**在这个例子中，我添加了一个equalTester，但它应该与客户匹配器一起使用

创建一个`src/spec_helper.ts`包含以下内容的文件：

```
// Import module
import { Moment } from 'moment';

export function initSpecHelper() {

  beforeEach(() => {
    // Add your matcher
    jasmine.addCustomEqualityTester((a: Moment, b: Moment) => {
      if (typeof a.isSame === 'function') {
        return a.isSame(b);
      }
    });
  });

} 
```

然后，在`src/test.ts`导入`initSpecHelper()`函数中添加执行它。我将它放在 Angular 的 TestBed init 之前，它似乎工作得很好。

```
import { initSpecHelper } from './spec_helper';

//...

// Prevent Karma from running prematurely.
__karma__.loaded = function () {};

// Init our own spec helper
initSpecHelper();

// First, initialize the Angular testing environment.
getTestBed().initTestEnvironment(
  BrowserDynamicTestingModule,
  platformBrowserDynamicTesting()
);

//... 
```

# php - PHP mysql动态表（考勤表）

> ID：11942088
> 
> 赞同：2
> 
> 时间：2012-08-13T20:49:26.240
> 
> 标签：php, mysql, dynamic

我的数据库中有 3 个表：

*   学生
*   培训班
*   出席

前 2 个表有 2 个字段（id、name），第三个有：corseID、studID、attDate 和 attStatus，其中 attStatus 存在或不存在

我需要的是：具有以下属性的动态表：

*   第一列的标题应为“姓名”，其中填充了学生表中的学生姓名（完成）
*   第一行应填充出勤表中 attDate 字段中的日期（完成）
*   上述列和行之间的其余单元格应从出勤表中的 attStatus 字段中提取出勤状态，给出学生姓名和出勤日期

请提供如何解决此问题的演练（越详细越好）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T05:23:52.770

您可以使用以下 SQL 查询来获取**所有**记录：

```
SELECT
s.id Student_ID,
s.name Student_Name,
c.name Course_Name,
a.attStatus Attendance_Status,
a.attDate Attendance_Date
FROM students s
INNER JOIN attendance a ON (s.id=a.studID)
INNER JOIN courses c ON (a.courseID=c.id)
ORDER BY a.attDate ASC 
```

**编辑**：

您没有说学生是否可以每天参加多门课程，所以我认为可以。

在 PHP 方面，执行以下操作：

```
$dates=array();
$students=array();
while($row=mysqli_fetch_assoc($result))
{
 if(!in_array($dates[$row["Attendance_Date"]])) $dates[]=$row["Attendance_Date"];
 if(empty($students[$row["Student_ID"]]))
   $students[$row["Student_ID"]]=array("name"=>$row["Student_Name"]);
 if(empty($students[$row["Student_ID"]][$row["Attendance_Date"]])
   $students[$row["Student_ID"]][$row["Attendance_Date"]]=array();
 $students[$row["Student_ID"]][$row["Attendance_Date"]][$row["Course_Name"]]=$row["Attendance_Status"];
} 
```

所以当循环结束时，你可以得到这样的`$students`数组：

```
Array(2) =>
{
  123 =>
   {
     "name"=>"Einstein",
     "2012-08-01"=>
      {
        "Math"=>"present",
        "Phys"=>"absent"
      }
     "2012-08-02"=>
      {
        "Liter"=>"absent",
        "Music"=>"present"
      }
   }
  456 =>
   {
     "name"=>"Heisenberg",
     "2012-08-01"=>
      {
        "Math"=>"absent",
        "Phys"=>"present"
      }
   }
} 
```

并且所有日期都在`$dates`数组中。然后你可以`foreach`在`$dates`数组中画出第一行，然后再`foreach($students){foreach($dates){}}`画出每一行。

# c# - 使用 GUID 作为会话密钥？

> ID：11942092
> 
> 赞同：0
> 
> 时间：2012-08-13T20:49:33.097
> 
> 标签：c#, asp.net, session, guid

基本上我有一个在多个页面中持久存在的对象，所以我使用 Session 来保存和检索该对象。我正在为会话密钥使用 GUID。我使用静态构造函数来创建 GUID。

这是对象的示例：

```
class Customer
{
    private static readonly string _sessionKey;

    public static string SessionKey
    {
        get { return _sessionKey; }
    }

    static Customer()
    {
        _sessionKey = Guid.NewGuid().ToString();
    }
} 
```

然后我在我的代码中使用它，如下所示：

```
Session.Add(Customer.SessionKey, new Customer()); 
```

...

```
Customer C = Session[Customer.SessionKey] as Customer; 
```

我个人更喜欢这种方法，而不是 Session 键的 a`const string`或`string`文字。只是想知道这是否有任何缺点或您使用了哪些其他方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T20:51:37.987

为什么要这样做？您应该只定义常量并完成它。如果您迭代或将调试器与`Session`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T20:57:55.120

如果您`Customer`在会话中有对象 - 以常量名称保存。否则考虑`Customer`以常量名称保存对象集合。

注意：如果您打算使用其他状态提供程序（SQL/状态服务）而不是默认的内存中的提供程序，请确保您的`Customer`对象是可序列化的并且在请求之间有意义。

# python - 两个 Web 服务器之间的安全通信（带有 Django 和 Google App Engine 的 Amazon EC2）

> ID：11942094
> 
> 赞同：3
> 
> 时间：2012-08-13T20:49:43.760
> 
> 标签：python, django, google-app-engine, amazon-ec2, urllib

我有一个网站，它使用 Amazon EC2 与 Django 和 Google App Engine 来实现其强大的图像 API 和图像服务基础设施。当用户上传图像时，浏览器会向我的 EC2 服务器发出 AJAX 请求以获取 Blobstore 上传 URL。我通过我的 Django 服务器获取这个，所以我可以检查用户是否经过身份验证，然后服务器需要从 App Engine 服务器获取 url。上传完成并在 App Engine 中处理后，我需要将上传信息发送回 django 服务器，以便构建所需的模型实例。我怎样才能做到这一点？我正在考虑使用 urllib，但我怎样才能保护它以确保这些 url 只能由我的服务器访问，而不是由网络用户访问？也许某种秘密密钥？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T20:26:40.997

除了 Https 调用（您应该将信息传输到 django ）之外，您还可以使用 AES 加密（使用 Pycrypto/任何其他库）。它需要一个密钥来加密您的消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T21:13:12.620

对于服务器到服务器的通信，传统的安全建议会建议在 Web 服务器级别对 URL 进行某种 IP 范围限制，以及任何默认安全措施。但是，由于您是从云提供商向另一个云提供商进行呼叫，因此您永久控制客户端和服务器 IP 地址的能力可能会减弱。

也就是说，我建议使用标准的用户名/密码身份验证机制和 HTTPS 来确保传输安全。一个基本的身份验证用户名/密码将是我的建议（`https:\\username:password@appengine.com\`）。此外，我会确保在特定时间窗口内根据一定数量的失败尝试强制执行锁定。这将阻止尝试暴力破解密码。

根据您在 App Engine 上使用的 Web 框架，可能已经支持我刚才提到的部分或全部内容。如果您使用有关您的架构的更多细节更新此问题或使用更多信息打开一个新问题，我们可以为您提供更准确的建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T21:22:33.910

[SDC](https://developers.google.com/secure-data-connector/)提供从 AppEngine 到其他地方的专用网络的安全隧道——如果您在那里运行它，它可能是您的 EC2 实例。

# javascript - 发送“this”作为参数 | 是否可以？

> ID：11942102
> 
> 赞同：0
> 
> 时间：2012-08-13T20:50:21.653
> 
> 标签：javascript

很难描述应用程序，但基本上我需要将“this”作为参数发送，而不是在函数中使用“this”来使用它。情况如下：

```
paragraph_element.addEventListener( "click", vFlipBP ); 
```

这是 vFlipBP 的一部分

```
/**
 *vFlipBP
 */

function vFlipBP( element_or_string ) {
    var previous_page_element,
        previous_tag_element,
        current_page_element,
        select_element;
    console.log( 'element_or_string ' + element_or_string ); 
    if( typeof ( element_or_string ) === 'string' ) {
        select_element = document.getElementById( element_or_string );
    } else {
        select_element = this;
    }

.
.
. 
```

问题是即使这是有效的 JavaScript....jshint.com 警告“可能严格违反”

我只是喜欢没有警告......并且不想配置 jshint.com。

我希望我的代码能够 100% 通过，而不必搞乱配置。

挑剔……但正是我想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T20:57:40.940

如果您**必须**更改代码，请执行以下操作：

```
function vFlipBP( element_or_string ) {
    var previous_page_element,
        previous_tag_element,
        current_page_element,
        select_element = this;
    console.log( 'element_or_string ' + element_or_string ); 
    if( typeof ( element_or_string ) === 'string' ) {
        select_element = document.getElementById( element_or_string );
    } 
```

您所犯的错误是在来自像 JSHint 这样不那么成熟的工具的“干净”报告中赋予了如此多的价值。在你的函数中打开“use strict”，让实际的 JavaScript 运行时抱怨。

*编辑*- 根据@minitech 对这个问题的原始化身给出的回答，等待我关于 JSHint 抱怨的假设可能是错误的。如果真的是 JSHint 担心`this`可能为 null 的情况，那我觉得担心这个警告就更傻了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T21:04:32.483

在 javascript 中，有两种方法可以显式声明`this`在方法被调用时将指向的内容：应用和调用。

```
vFlipBP.apply(objectYouWantToBeThis, [element_or_string]); 
```

或者

```
vFlipBP.call(objectYouWantToBeThis, element_or_string); 
```

# objective-c - 带有子详细视图和绑定的主详细视图

> ID：11942104
> 
> 赞同：0
> 
> 时间：2012-08-13T20:50:29.673
> 
> 标签：objective-c, binding, nsarraycontroller, master-detail

我尝试在界面构建器中使用带有绑定的附加详细信息视图来制作主详细信息视图。整个应用程序适用于 Mac OSX。

我有 3 个表格视图。Master-Table、DetailsOfMaster-Table 和 DetailsOfDetails-Table 对于每个 tableview 我都有一个数组控制器。

我的数据结构是一个充满对象的数组，如下所示：

```
@interface Node : NSObject
   @property (strong)NSString* name;
   @property (assign)NSArray* details;
@end 
```

每个节点的详细信息再次被其他节点填充。

*   Master-ArrayController 的内容数组绑定到我的节点数组。
*   Details-ArrayController 的 content-array 绑定到 Master-ArrayController 的 Selection.details
*   DetailDetails-ArrayController 的 content-array 绑定到 Details-ArrayController 的 Selection.details

每个 tabel view 的 Content 都绑定到对应的数组控制器上，key、arrangedObjects 和 Tabel Column 都被绑定到了 mappedObjects.name

一切都编译得很好。问题是 Detail- 和 DetailsDetail-Table 没有得到更新。 ![详细视图未更新](../Images/11acb4aaeb500519f72df8faae0af704.png)

我错过了一些绑定吗？我希望能够使用界面构建器设置的绑定完全显示我的数据结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:28:17.617

绑定都是正确的，错误是属性@property (assign)NSArray* details 的错误属性；需要@property (retrain)NSArray* 详细信息；

# objective-c - 核心数据：model 为 nil 而 modelURL 有效

> ID：11942105
> 
> 赞同：4
> 
> 时间：2012-08-13T20:50:31.560
> 
> 标签：objective-c, ios, core-data

`__managedObjectModel`即使 modelURL 存在也为零。有[一个类似的帖子](https://stackoverflow.com/questions/6750156/nsmanagedobjectmodel-initwithcontentsofurl-returns-nil-eventhough-the-modelurl-i)，但接受的答案（重命名模型文件并重新启动 Xcode）对我不起作用。

```
- (NSManagedObjectModel *)managedObjectModel
{
    if (__managedObjectModel != nil) {
        return __managedObjectModel;
    }
    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"Failed" withExtension:@"momd"];

    __managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];

    return __managedObjectModel;
} 
```

`modelURL`我在控制台里po

```
(lldb) po modelURL
(NSURL *) $4 = 0x088832f0 file://localhost/Users/philip/Library/Application%20Support/iPhone%20Simulator/5.1/Applications/9E59167C-8D9E-4ADE-BBD7-0BE9A33A6A86/Failed.app/Failed.momd/ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T22:11:13.080

3小时后我解决了这个问题..终于。解决方案很简单：只需使用以下代码

```
__managedObjectModel = [NSManagedObjectModel mergedModelFromBundles:nil]; 
```

代替

```
NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"Failed" withExtension:@"momd"];
__managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL]; 
```

原因是我曾经创建了新的模型文件（.xcodemodeld）并删除了旧的。并且这两个模型文件具有不同的名称。事实上，旧模型文件根本没有被删除。它仍然在应用程序主包中。

我检查了 iphone 模拟器目录，惊讶地看到两个编译好的模型文件 (.momd) 都在那里！我试图删除旧的妈妈。但是每次我的应用程序运行时，旧的妈妈都会再次出现。我去检查目标构建阶段并确保旧模型文件不在编译源中。太奇怪了..

由于主包中存在多个已编译的模型文件，因此需要将它们合并。这就是为什么`mergedModelFromBundles:`起作用而不是单个`modelURL`.

如果您从不删除任何模型文件，则使用单个 modelURL 应该没问题。

虽然问题解决了，但我不明白为什么模拟器将所有已删除的模型文件保留在主包中。这对我来说没有意义。有人会解释吗？

# html - 这个极简的 HTML5 标记有效吗？

> ID：11942116
> 
> 赞同：8
> 
> 时间：2012-08-13T20:51:30.327
> 
> 标签：html, validation, minimum

```
<!DOCTYPE html>
<meta charset="utf-8">
<body>
Hello, world! 
```

**[代码来源](http://bost.ocks.org/mike/d3/workshop/hello-world.html)**

如果是这样，除了删除“你好，世界！” 是否有任何标签可以被删除并且仍然有效，您怎么知道它仍然有效？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-13T20:53:51.153

这是无效的。要检查它，您可以在[W3C Validator中运行它](http://validator.w3.org/#validate_by_input)

错误是：**元素头缺少子元素标题的必需实例。**

...

**更新**

正如**vcsjones**所说，该`head`元素是可选的。那`title`是需要的。**感谢 mootinator**指出也是`body`可选的。

所以最简单的有效文件将是：

```
<!DOCTYPE html>
<title></title> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T22:18:33.180

（假设 HTML5 的*HTML 语法*。）

请注意，在某些情况下，该`title`元素也是可选的。

根据[HTML5 的定义`head`](http://www.w3.org/TR/2014/REC-html5-20141028/document-metadata.html#the-head-element)：

> 在大多数情况下，该`title`元素是必需的子元素，但是当更高级别的协议提供标题信息时，例如在将 HTML 用作电子邮件创作格式时，在电子邮件的主题行中，`title`可以省略该元素。

因此，从“高级协议”获取标题的文档的最小标记是这样的：

```
<!DOCTYPE html> 
```

如果文档是 an 的值[`iframe`](http://www.w3.org/TR/2014/REC-html5-20141028/embedded-content-0.html#the-iframe-element)-[`srcdoc`](http://www.w3.org/TR/2014/REC-html5-20141028/embedded-content-0.html#attr-iframe-srcdoc)就是这个（假设容器文档提供了标题）：

```
<html> 
```

对于独立文档，它是这样的（`title`元素需要一些实际内容，如[kapep 所述](https://stackoverflow.com/a/26498926/1591669)，因此“...”只是一个示例）：

```
<!DOCTYPE html>
<title>…&lt;/title> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-22T01:13:14.353

标题标签不能为空或仅包含空格。因此，如果文档位于需要标题标签的上下文中，则必须设置有效的标题值。

标题[内容模型](http://www.w3.org/TR/html5/document-metadata.html#the-title-element)被定义为“不是元素间空白的文本”。

“仅由 [空格字符] 序列组成的空文本节点和文本节点”是[元素间空白](http://www.w3.org/TR/html5/dom.html#inter-element-whitespace)。空格字符是空格、制表符、换行符、换页符和回车符。

如果标题标签为空，W3C 验证器会抱怨“元素标题不得为空”。验证器只需添加空格就可以了，即使根据规范这是不正确的。

如果添加另一个非空格字符，则有效：

```
<!DOCTYPE html>
<title>x</title> 
```

如果您想伪造一个“空”标题，您可以使用其他空格字符，如不间断空格或零宽度不间断空格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-27T15:33:14.500

[Nu Html Checker](https://validator.w3.org/nu/)（目前唯一被 WHATWG[认可](https://whatwg.org/validator/)的 HTML 验证器）不会产生任何错误或警告的最小 HTML 文档如下：

```
<!DOCTYPE html>
<html lang="">
<title>x</title> 
```

# java - 你如何让 GSON 省略 null 或空对象以及空数组和列表？

> ID：11942118
> 
> 赞同：19
> 
> 时间：2012-08-13T20:51:41.123
> 
> 标签：java, json, gson

我正在使用 Gson，并且我必须缩小某些 Json 字符串的大小。我想通过让它不将空对象、空值以及空列表和数组放入 Json 字符串来做到这一点。

有没有一种简单的方法可以做到这一点？

让我澄清一下：我希望跳过所有内容：emptyProp:{} 或 emptyArray:[]。我希望跳过任何只包含空属性的对象。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-06-13T14:27:40.143

只要您不将 serializeNulls() 设置为 GsonBuilder，就会默认排除 Null 值。

空列表的一种方法是创建一个 JsonSerializer

```
class CollectionAdapter implements JsonSerializer<List<?>> {
  @Override
  public JsonElement serialize(List<?> src, Type typeOfSrc, JsonSerializationContext context) {
    if (src == null || src.isEmpty()) // exclusion is made here
      return null;

    JsonArray array = new JsonArray();

    for (Object child : src) {
      JsonElement element = context.serialize(child);
      array.add(element);
    }

    return array;
  }
} 
```

然后注册

```
Gson gson = new GsonBuilder().registerTypeHierarchyAdapter(Collection.class, new CollectionAdapter()).create(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-11T09:03:33.590

根据[PomPom](https://stackoverflow.com/a/17089654/7306276)，HashMap 可以通过以下方式序列化：

```
class MapAdapter implements JsonSerializer<Map<?, ?>> {
        @Override
        public JsonElement serialize(Map<?, ?> src, Type typeOfSrc,JsonSerializationContext context) {
            if (src == null || src.isEmpty())
                return null;
            JsonObject obj = new JsonObject();
            for (Map.Entry<?, ?> entry : src.entrySet()) {
                obj.add(entry.getKey().toString(), context.serialize(entry.getValue()));
            }
        return obj;
        }
    } 
```

# javascript - 使用 REST 关联记录

> ID：11942121
> 
> 赞同：-1
> 
> 时间：2012-08-13T20:51:55.780
> 
> 标签：javascript, rest, dynamics-crm-2011

[我正在尝试按照 SDK 示例（示例：使用 REST 端点](http://msdn.microsoft.com/en-us/library/hh372956)关联和解除关联记录）通过 REST 将记录与 JS 和 jQuery 关联/解除关联。

我在这两种情况下都遇到同样的错误：

> “引用集合属性的 '$links' 端点不支持更新操作”。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:34:36.843

您可能想看一个[简单的示例，该示例创建并发送电子邮件并关联发送用户](http://community.dynamics.com/product/crm/crmtechnical/b/crmcustomereffective/archive/2011/12/06/using-the-crm-2011-rest-services-and-deep-insert-to-create-activities.aspx)

# php - 将大文件（大于 10MB）从 Android 上传到 PHP 服务器

> ID：11942122
> 
> 赞同：3
> 
> 时间：2012-08-13T20:52:04.313
> 
> 标签：php, android, upload, shared

首先很抱歉，如果这已经被问到并解决了。我真的进行了艰苦的搜索，无法找到更好的解决方案。

要求：我们正在开发一个 Android 应用程序，我们需要将视频文件上传到 Web 服务器中的文件夹。Web 服务器在 PHP 中运行。视频文件非常大（超过 10 MB）。Web 服务器托管在共享托管服务器上，PHP 上传限制为 2MB。

我希望我的要求很清楚，可以理解。

我们挣扎了几天，发现 apache FTP 可以解决我们的问题。在少睡几个晚上之后，我们能够通过 FTP 完成上传。FTP 中的问题是，如果数据（Internet / 3G）出现故障，则 FTP 停止并且在数据（Internet / 3G）可用后无法恢复。

现在我们回到第 1 点。再次搜索如何将大文件从 android 设备上传到 PHP 服务器。

我需要你的建议。请帮忙。

感谢和问候马来语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:57:00.400

听起来您需要将上传限制为仅在用户使用 WiFi 时发生。无论如何，您都希望这样做，因为大多数运营商现在都采用计量数据计划；如果数据连接在您的场景中丢失，那么用户每次上传的传输量将超过 10MB，因为每次尝试都在传输一些东西。

# tfs-workitem - 如何以编程方式更改 TFS 2010 工作项链接类型

> ID：11942123
> 
> 赞同：2
> 
> 时间：2012-08-13T20:52:10.757
> 
> 标签：tfs-workitem

我已经使用 tfs api 以编程方式在不同团队项目中的工作项之间添加链接，目前所有链接都设置为[相关链接](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.workitemtracking.client.relatedlink%28v=vs.100%29.aspx)，但我想将其中一些更改为 tfs2010 中支持的其他一些类型，例如“父"等。但我不知道该怎么做。有任何想法吗？

编辑：

最初我是这样添加的：

```
RelatedLink link = new RelatedLink(iLinkMe); 
wi.Links.Add(link); 
```

当我认为我应该添加时：

```
WorkItemLinkTypeEnd linkTypEnd = store.WorkItemLinkTypes.LinkTypeEnds["Parent"];
RelatedLink linkBetter = new RelatedLink(linkTypEnd, iLinkMe); 
wi.Links.Add(linkBetter ); 
```

但我没有，（而且我不喜欢“父”字符串，我正在寻找一个枚举），那么如何更改 linkTypeEnd？我猜我可以通过*wi.Links*修改它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:57:00.820

看看这个[网站](http://blogs.microsoft.co.il/blogs/shair/archive/2010/02/27/tfs-api-part-22-create-link-between-work-item-parent-child-etc.aspx)如何`Create Link Between Work Item (Parent, Child etc…)`。

# javascript - URL 更改动画

> ID：11942127
> 
> 赞同：0
> 
> 时间：2012-08-13T20:52:31.380
> 
> 标签：javascript, ajax

Bleacherreport 在他们的网站上有一项功能，可让您使用箭头键在故事之间浏览。虽然这没什么了不起的，但我想了解他们是如何做到的，并更改浏览器地址栏中的 URL。

通过 AJAX 加载新内容是一回事，但我从未见过它在刷新 URL 的同时完成。从一个内容到下一个内容还有一个向左滑动的动画。

示例： [http ://bleacherreport.com/articles/1295213-in-depth-look-at-the-business-behind-a-holdout](http://bleacherreport.com/articles/1295213-in-depth-look-at-the-business-behind-a-holdout)

使用箭头键

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:58:50.390

他们并没有真正“刷新” URL。正如您所说，他们正在使用 AJAX 来获取新内容，然后在加载后更新 URL（可能是 via `window.history.pushState`）以匹配该特定文章的路由（这样，如果您确实刷新了页面，您'仍然会被带到相同的内容）。

您可以手动执行此操作（使用前面提到的`window.history.pushState`），或者有许多处理客户端 URL 路由的框架，例如[Backbone.js](http://backbonejs.org/)和[Sammy.js](http://sammyjs.org/)。

# php - PHP 简单 HTML DOM 解析器 - 组合两个数组

> ID：11942130
> 
> 赞同：0
> 
> 时间：2012-08-13T20:52:44.940
> 
> 标签：php, html, dom, web-scraping

我想要做的是在 Trip Advisor 上抓取一个页面 - 我从第一页获得了我需要的内容，然后我执行另一个循环以从下一页获取内容但是当我尝试将这些详细信息添加到现有数组时由于某种原因不起作用。

```
error_reporting(E_ALL);
include_once('simple_html_dom.php');

$html = file_get_html('http://www.tripadvisor.co.uk/Hotels-g186534-c2-Glasgow_Scotland-Hotels.html');

$articles = '';

// Find all article blocks
foreach($html->find('.listing') as $hotel) {
    $item['name']     = $hotel->find('.property_title', 0)->plaintext;
    $item['link']     = $hotel->find('.property_title', 0)->href;

    $item['rating']    = $hotel->find('.sprite-ratings', 0)->alt;
    $item['rating']    = explode(' ', $item['rating']);
    $item['rating']    = $item['rating'][0];

    $articles[] = $item;
}

foreach($articles as $article) {

    echo '<pre>';
    print_r($article);
    echo '</pre>';

   $hotel_html = file_get_html('http://www.tripadvisor.co.uk'.$article['link'].'/');

   foreach($hotel_html->find('#MAIN') as $hotel_page) {
       $article['address']            = $hotel_page->find('.street-address', 0)->plaintext;
       $article['extendedaddress']    = $hotel_page->find('.extended-address', 0)->plaintext;
       $article['locality']           = $hotel_page->find('.locality', 0)->plaintext;
       $article['country']            = $hotel_page->find('.country-name', 0)->plaintext;

       echo '<pre>';
       print_r($article);
       echo '</pre>';

       $articles[] = $article;
    }
}

echo '<pre>';
print_r($articles);
echo '</pre>'; 
```

这是我得到的所有调试输出：http: [//pastebin.com/J0V9WbyE](http://pastebin.com/J0V9WbyE)

网址：[http ://www.4playtheband.co.uk/scraper/](http://www.4playtheband.co.uk/scraper/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:48:11.673

我会改变

```
$articles = ''; 
```

到：

```
$articles = array(); 
```

在 foreach() 之前：

```
$articlesNew = array(); 
```

遍历数组时，插入新数组

```
$articlesNew[] = $article; 
```

最后合并数组

```
$articles = array_merge($articles, $articlesNew); 
```

来源：[http](http://php.net/manual/en/function.array-merge.php) ://php.net/manual/en/function.array-merge.php更多数组 php 合并/组合。

当已经在 PHP 中遍历数组时，我从未尝试更改数组，但是如果您不正确地使用 C++ 集合执行此操作，除非您处理致命异常，否则它将崩溃。我的疯狂猜测是您不应该在迭代时更改数组。我知道我永远不会那样做。使用另一个变量。

# iphone - 用户滚动浏览文本视图后如何启用按钮

> ID：11942143
> 
> 赞同：3
> 
> 时间：2012-08-13T20:53:56.677
> 
> 标签：iphone, objective-c, ios

我正在尝试做这样的事情：首先，在启动时，“接受”按钮被禁用，用户必须阅读文本视图区域中的条款和条件，然后将启用接受按钮。到目前为止，这是我的代码，有人可以给我一些建议吗？

```
- (IBAction)acceptAction:(id)sender {
    if ([self.termConditionTextView scrollsToTop] == true) {
        [acceptButtonOutlet setEnabled:NO];
        [[[UIAlertView alloc] initWithTitle:@"Term & Condition" message:@"Please read term &    condition first. Thank you." delegate:nil cancelButtonTitle:@"Back" otherButtonTitles:nil] show];
    } else {
        [acceptButtonOutlet setEnabled:YES];
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T21:24:22.250

创建按钮时，设置`myButton.enabled = NO`

为您的滚动视图设置`UIScrollViewDelegate`。

然后实现`scrollViewDidScroll`委托功能。在函数中，检查滚动视图的内容偏移量以查看是否已到达底部。像这样的东西：

```
- (void)scrollViewDidScroll: (UIScrollView*)scrollView
{
    float scrollViewHeight = scrollView.frame.size.height;
    float scrollContentSizeHeight = scrollView.contentSize.height;
    float scrollOffset = scrollView.contentOffset.y;

    if (scrollOffset + scrollViewHeight == scrollContentSizeHeight)
    {
        myButton.enabled = YES;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T21:33:33.260

我会在 textview 底部（在它下方）有接受按钮，并将它们都包装在`UIScrollView`. 在这种情况下，用户必须滚动到底部才能接受。当然，您知道无论如何都没有人阅读文本。这是我过去实现此类功能的最简单方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T21:07:55.793

我认为一个`IBAction`是不够的。你需要一个`IBOutlet`指向你的按钮，当你第一次加载视图时，你将它设置为`disabled`. 然后你可以通过实现协议和类似的东西来检查你的`scrollview`（或`tableview`相同的交易）是否处于底部： [Is there a way to simulation a scrollViewDidScrollToBottom in UIScrollView?](https://stackoverflow.com/questions/3120793/is-there-a-way-to-simulate-a-scrollviewdidscrolltobottom-in-uiscrollview) . 发生这种情况时，您将按钮更改为。`UIScrollViewDelegate``enabled`

# iphone - SetUserTrackingMode 不起作用

> ID：11942144
> 
> 赞同：3
> 
> 时间：2012-08-13T20:53:58.827
> 
> 标签：iphone, ios5, mkmapview

我正在 iPhone 上编写地图应用程序，并希望地图在用户改变方向时旋转。我已经阅读了关于 stackoverflow 的大部分帖子。如果我们使用的是 iOS 5 或更高版本，他们中的大多数建议使用`setUserTrackingMode`with 。`MKUserTrackingModeFollowWithHeading`由于某种原因，这似乎对我不起作用。以下是我的代码：

```
-(IBAction)getLocation  //This is a button
{
    mapView.showsUserLocation=YES;  //mapView is the instance of MKMapView
    [mapView setUserTrackingMode:MKUserTrackingModeFollowWithHeading animated:YES];
} 
```

这仅显示用户位置，但如果我移动手机，它不会旋转。还有一件事是，我从互联网上下载了一个项目，并包含了这一行。它只是第一次在那里工作。我不知道为什么会这样。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-01-04T14:50:41.917

您需要等待“MapView”完成加载...

**跟随：**

```
- (void)mapViewDidFinishLoadingMap:(MKMapView *)mapView {
    mapView.userTrackingMode = MKUserTrackingModeFollow;
} 
```

**跟随和标题：**

```
- (void)mapViewDidFinishLoadingMap:(MKMapView *)mapView {
    mapView.userTrackingMode = MKUserTrackingModeFollowWithHeading;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T11:41:25.813

更简单的方法是包含一个[`MKUserTrackingBarButtonItem`](http://www.google.com/url?sa=t&rct=j&q=mkusertrackingbarbuttonitem&source=web&cd=1&ved=0CEgQFjAA&url=http://developer.apple.com/library/ios/documentation/MapKit/Reference/MKUserTrackingBarButtonItemClassRef/Reference/Reference.html&ei=zYorUK3UKIHAhAeyk4CYBA&usg=AFQjCNHJN58Ol9KlWqYV9EfaG7ER911pVg)而不是创建您自己的按钮。它的作用与 iOS 5 地图应用程序中的按钮完全相同，并且易于设置。

以下是如何使用它：

```
// You should have an outlet to your map view called mapView
MKUserTrackingBarButtonItem *userTrackingButton;
userTrackingButton = [[MKUserTrackingBarButtonItem alloc] initWithMapView:self.mapView];

// You need an outlet to your toolbar too
[self.toolbar setItems:[NSArray arrayWithObject:userTrackingButton]]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-14T01:10:59.857

将“动画”更改为“动画”并重试

# c# - 有什么方法可以生成一个不长于 UUID (GUID) 的唯一编号？

> ID：11942145
> 
> 赞同：-1
> 
> 时间：2012-08-13T20:54:01.050
> 
> 标签：c#, uniqueidentifier

> **可能重复：**
> [生成唯一 ID 的公式？](https://stackoverflow.com/questions/744081/formulas-to-generate-a-unique-id)

基本上我需要生成一个唯一的数字，但我不希望它太长，比如 UUID。那个大小的一半（如果不是更小）。

谁能想到任何方法来做到这一点？

基本上我将有一个可能被多人使用的应用程序，该应用程序生成文件并将它们上传到 Web 服务器。这些名称必须是唯一的。

顺便说一句，我不想​​使用数据库表来跟踪这些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T20:55:27.177

生成一个 UUID，并且只取字符串的前半部分。

如果您担心生成重复的 ID，您的选择是使它们成为非随机和自动递增的，或者检查是否存在新生成的 ID：

```
do {
  newId = generateNewId();
} while (idExists(newId)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:14:25.770

如果您需要它独特且简短的 UUID 并使用 url 缩短器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T21:19:38.773

勾起了我的好奇心：

```
// create a 32-bit uid:
    var i = BitConverter.ToUInt32(Guid.NewGuid().ToByteArray(), (new Random()).Next(0, 12));
// create a 64-bit uid
    var l = BitConverter.ToUInt64(Guid.NewGuid().ToByteArray(), (new Random()).Next(0, 8)); 
```

当然，以下内容可能同样适用，因为当您截断它时您会丢失 guid 的大部分功能，并且不妨求助于随机数：

```
l = BitConverter.ToUInt64(BitConverter.GetBytes((new Random()).NextDouble()), 0); 
```

...如果您正在寻找 64 位整数。

# python - * nix系统中python中的自重启守护进程

> ID：11942146
> 
> 赞同：3
> 
> 时间：2012-08-13T20:54:05.890
> 
> 标签：python, daemon

我需要在 python 中创建一个守护进程。我确实搜索并找到了一段很好的[代码](http://www.jejik.com/articles/2007/02/a_simple_unix_linux_daemon_in_python/)。该守护程序应在系统引导后自动启动，如果意外关闭，则应启动它。[我浏览了 Unix 环境中的高级编程中](https://rads.stackoverflow.com/amzn/click/com/0201563177)关于守护进程的章节，并且有两个问题。

要在启动后自动运行脚本，我需要将我的守护程序脚本放到 /etc/init.d。那是对的吗？

我应该怎么做才能重生守护进程？根据这本书，我需要在 /etc/inittab 中添加一个重生条目，但我的系统上没有 /etc/inittab。我应该自己创建吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T20:56:11.903

如果你在 Ubuntu 上，我建议你研究一下[暴发户。](http://upstart.ubuntu.com/)`inittab`这比老实说要好得多，但确实涉及一些学习曲线。

**编辑**（由 Blair 编写）：这是我最近为自己的一个程序编写的暴发户脚本的改编示例。像这样的基本 upstart 脚本是相当可读/可理解的，尽管（像许多这样的事情一样）当你开始做一些花哨的事情时它们会变得复杂。

```
description "mydaemon - my cool daemon"

# Start and stop conditions. Runlevels 2-5 are the 
# multi-user (i.e, networked) levels. This means 
# start the daemon when the system is booted into 
# one of these runlevels and stop when it is moved
# out of them (e.g., when shut down).
start on runlevel [2345]
stop on runlevel [!2345]

# Allow the service to respawn automatically, but if
# crashes happen too often (10 times in 5 seconds) 
# theres a real problem and we should stop trying.
respawn
respawn limit 10 5

# The program is going to daemonise (double-fork), and
# upstart needs to know this so it can track the change
# in PID.
expect daemon

# Set the mode the process should create files in.
umask 022

# Make sure the log folder exists.
pre-start script
    mkdir -p -m0755 /var/log/mydaemon
end script

# Command to run it.
exec /usr/bin/python /path/to/mydaemon.py --logfile /var/log/mydaemon/mydaemon.log 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T21:25:51.520

要创建守护程序，请使用您找到的代码中所示的双 fork()。然后你需要为你的守护进程编写一个初始化脚本并将它复制到/etc/init.d/。

[http://www.novell.com/coolsolutions/feature/15380.html](http://www.novell.com/coolsolutions/feature/15380.html)

有许多方法可以指定守护程序如何自动启动，例如 chkconfig。

[http://linuxcommand.org/man_pages/chkconfig8.html](http://linuxcommand.org/man_pages/chkconfig8.html)

或者您可以为某些运行级别手动创建符号链接。

最后，当服务意外退出时，您需要重新启动服务。您可以在 /etc/inittab 中包含服务的重生条目。

[http://linux.about.com/od/commands/l/blcmdl5_inittab.htm](http://linux.about.com/od/commands/l/blcmdl5_inittab.htm)

# javascript - javascript未分配的默认函数参数

> ID：11942149
> 
> 赞同：4
> 
> 时间：2012-08-13T20:54:11.410
> 
> 标签：javascript, node.js, optional-parameters

在以下函数中：

```
foo = function(a){
    if (!a) a = "Some value";
    // something done with a
    return a;
} 
```

当未声明“a”时，我想为函数的其余部分分配一个默认值，虽然“a”是一个参数名称并且没有声明为“var a”，但它是该函数的私有变量吗？执行函数后，它似乎没有显示为全局变量，这是标准（即一致）的可能用途吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T21:01:13.700

它是函数范围内的私有变量。它对全局范围是“不可见的”。
至于你的代码，你最好这样写

```
foo = function(a){
    if (typeof a == "undefined") a = "Some value";
    // something done with a
    return a;
} 
```

因为`!a`可以为真`0`，空字符串`''`或只是`null`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T20:56:21.687

是的，在这种情况下`a`，函数内部有一个范围。您甚至可以使用它来覆盖本地范围的全局变量。例如，您可以这样做`function ($){....}(JQuery);`，您知道这`$`将始终是 JQuery 框架的一个变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T20:58:42.967

参数始终具有私有函数范围。

```
var a = 'Hi';
foo = function(a) {
    if (!a) a = "Some value";
        // something done with a
        return a;
    };
console.log(a); // Logs 'Hi'
console.log('Bye'); // Logs 'Bye' 
```

# objective-c - 如何计算plist中的项目

> ID：11942154
> 
> 赞同：1
> 
> 时间：2012-08-13T20:54:36.303
> 
> 标签：objective-c, ios, cocoa-touch

我有一个问题，我如何计算我的 plist 文件中的项目。我试过了：

```
NSString *bundlePathofPlist = [[NSBundle mainBundle]pathForResource:@"Mything" ofType:@"plist"];

    NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:bundlePathofPlist];

    NSArray *dataFromPlist = [dict valueForKey:@"some"];

    for(int i =0;i<[dataFromPlist count];i++)
    {
        //NSLog(@"%@",[dataFromPlist objectAtIndex:i]);
        [self setTableData:[dataFromPlist count]];

    }

    NSLog(@"%@", tableData); 
```

但在这一行出现错误：

```
 [self setTableData:[dataFromPlist count]];

Implicit conversion of 'NSUInteger' (aka 'unsigned int') to 'NSArray *' is disallowed with ARC 
```

和警告：

```
Incompatible integer to pointer conversion sending 'NSUInteger' (aka 'unsigned int') to parameter of type 'NSArray *'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:58:50.617

看起来你`setTableData`举了一个`NSArray`例子。您需要在循环中预先准备一个数组，然后设置一次，如下所示：

```
NSMutableArray *data = [NSMutableArray array];
for(int i =0;i<[dataFromPlist count];i++)
{
    //NSLog(@"%@",[dataFromPlist objectAtIndex:i]);
    [data addObject:[NSNumber numberWithInt:[[dataFromPlist objectAtIndex:i] count]]];
}
[self setTableData:data]; 
```

这假设您的方法需要一个包含 s 的实例`setTableData`数组。`NSNumber``int`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T20:56:33.800

问题是您在`[dataFromPlist count]`for 循环中使用，这是没有意义的。你可能的意思是`[dataFromPlist objectAtIndex:i]`。

或者，更惯用的说法是，

```
for (NSArray *elt in dataFromPlist) {
    [self setTableData:elt];
} 
```

虽然我确实想知道你为什么用不同的元素一遍又一遍地调用 -setTableData:。

# cookies - Cookie 控制 Joomla 模块 - “无 XML 文件”

> ID：11942156
> 
> 赞同：0
> 
> 时间：2012-08-13T20:54:41.940
> 
> 标签：cookies, joomla, module, joomla1.5, joomla-module

我一直在尝试安装[Cookie Control](http://civicuk.com/cookie-law/cookie_configuration_v5) Joomla 模块，我尝试了所有三种安装方法（上传、目录、URL）。每次我尝试它都会返回错误

“错误！在包中找不到 Joomla！XML 设置文件。”

根目录下肯定有一个XML文件，我是从这里下载的：http: [//www.joostrap.com/civic-cookie-control-joomla-module](http://www.joostrap.com/civic-cookie-control-joomla-module)

有谁知道这方面的常见错误，或者为什么这个模块可能会发生这种情况？

我正在运行 Joomla v1.5 并且之前已经安装了扩展，但从未出现错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T21:05:32.467

您在安装时收到此错误，因为该模块适用于 Joomla 2.5，而不是 1.5。

我不确定将扩展名转换为 1.5 是否仍然有效，但值得一试。据我所知，您需要更改的唯一文件是 XML。

1.  `<extension`至`<install`

2.  `version="2.5"`至`version="1.5"`

3.  删除`<config>`标签

4.  消除`<fields name="params">`

5.  更改`<fieldset name="basic">`为`<params>`

6.  将所有`<field>`标签更改为`<param>`

或者您可以查看[Joomla 扩展目录](http://extensions.joomla.org/)以获取 1.5 兼容扩展

# c# - Webgrid 中的 Html.ActionLink 返回空字符串

> ID：11942159
> 
> 赞同：0
> 
> 时间：2012-08-13T20:54:46.043
> 
> 标签：c#, asp.net-mvc, actionlink

我正在尝试将 ActionLink 添加到 webgrid 列，但遇到了问题。

如果我像这样添加操作链接，它会起作用并链接到主 UserDetails 页面：

```
grid.Column(header: "", format: (item) => Html.ActionLink("Details", "UserDetails", "Admin")) 
```

但是，如果我尝试传入网格项的用户，它会返回空字符串。

这个：

```
grid.Column(header: "", format: (item) => Html.ActionLink("Details", "UserDetails", "Admin", new { username = item.user }, null)) 
```

结果如下：

```
<a href=""> 
```

我搜索了这个网站并尝试了一些变体，但没有一个奏效。包含：

```
grid.Column(header: "", format: @<text>@Html.ActionLink("Details", "UserDetails", "Admin", new { username = (string)item.user }, null)</text>) 
```

在我的控制器中，我有：

```
public ActionResult UserDetails(string username)
    {    
        return View();
    } 
```

我的这个视图和网格的模型是

```
List<UserInfo> 
```

其中 UserInfo 有“用户”和“活动日期”。

我还是 MVC 的新手，所以我希望我忽略了一些愚蠢的事情。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:16:02.870

ActionLink 使用您的路由来确定它是否可以构建链接。如果没有，它有时什么也不返回。从 Reflector（下图）中，注意 htmlHelper.RouteCollection。检查您的 global.asax（并且可能使用您想要构建的 URL 运行您的站点），以确保您的路由表将路由该 URL。

```
public static MvcHtmlString ActionLink(this HtmlHelper htmlHelper, string linkText, string actionName, string controllerName, RouteValueDictionary routeValues, IDictionary<string, object> htmlAttributes)
{
    if (string.IsNullOrEmpty(linkText))
    {
        throw new ArgumentException(MvcResources.Common_NullOrEmpty, "linkText");
    }
    return MvcHtmlString.Create(HtmlHelper.GenerateLink(htmlHelper.ViewContext.RequestContext, htmlHelper.RouteCollection, linkText, null, actionName, controllerName, routeValues, htmlAttributes));
} 
```

# css - 替代伪类？

> ID：11942160
> 
> 赞同：1
> 
> 时间：2012-08-13T20:54:46.963
> 
> 标签：css, internet-explorer, html

我为围绕一些文本的框创建了一个漂亮的人造图例：[jsfiddle](http://jsfiddle.net/Dtj5P/)。但是，我的解决方案使用`:before`和`:after`伪类，这在 IE 7 和 IE 8 中不起作用。真可惜。

所以我决定开始尝试定义我自己的跨度来代替伪类`:before`和`:after`伪类。不幸的是，我的解决方案似乎适用于`:before`替代品，但不适用于`:after`替代品：[jsfiddle](http://jsfiddle.net/c4uvU/)。此外，由于某些莫名其妙的原因，盒子的内容已经向上移动。

是否有可能仅通过 CSS 和 HTML 完成我正在做的事情？我不想将任何 Javascript 或 jQuery 加入其中。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:44:01.527

[http://www.webdevout.net/test?01&raw](http://www.webdevout.net/test?01&raw)：

```
<!doctype html>
<html>
    <头部>
        <标题></标题>
        <风格>
html {
    溢出-y：滚动；
    背景：#ff3366；
    字体：16px 衬线；
}
字段集 {
    边框：3px 实心#ffc2d1；
}
传奇 {
    背景：网址（http://img820.imageshack.us/img820/4242/spritearrowdown.png）无重复3px 50%；
    填充：0 0 0 13px；
}
html > /**/ 正文
legend { /* 如果它在 IE8 中的外观真的让你感到困扰：*/
    位置：相对；
    右：-13px；
}
        </style>
    </head>
    <正文>
        <form action="foo">
            <字段集>
                <legend>模型预测指导</legend>
                字段集
            </fieldset>
        </form>
    </正文>
</html>
```

# php - php curl multi如何传递回调值

> ID：11942167
> 
> 赞同：0
> 
> 时间：2012-08-13T20:55:26.187
> 
> 标签：php, curl

我在 php 中使用 curl multi exec。我从 db 中读取了一些 url 并传递给 curl。这些 url 也有与之关联的 id。下载完成后，了解与其关联的 id 很重要。你能告诉我是否有传递一个变量，curl 会在响应中返回它。

在此先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T22:04:33.993

您可以为每个 curl 句柄维护自己的数据关联。

```
$associatedData = array();

$ch = curl_init();
$id = (int) $ch; // will yield a unique number because resources have a globally unique numeric id
$associatedData[$id] = array('data' => $foo);

// now add it via curl_multi_add_handle() etc... 
```

然后，稍后在处理句柄时，您可以查找关联的数据

```
$id = (int) $ch; 
$data = $associatedData[$id]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-11T15:42:29.167

将私有数据存储在 cURL 简单句柄中，例如：

```
curl_setopt($ch, CURLOPT_PRIVATE, $url->getId());
// then later
$id = curl_getinfo($ch, CURLINFO_PRIVATE); 
```

PHP 手册中没有（还）记录这个“私有数据”特性。它已在 PHP 5.2.4 中引入。它允许您在 cURL 句柄中存储和检索您选择的字符串。将它用于 URL ID。

请参阅重复问题[php-CURL Multi 获取有关特定句柄的信息](https://stackoverflow.com/q/24267397/165030)。

# c++ - 在 C/C++ 中向左旋转

> ID：11942168
> 
> 赞同：1
> 
> 时间：2012-08-13T20:55:43.530
> 
> 标签：c++, c, bit-manipulation, bits

> **可能重复：**
> [如何在 C](https://stackoverflow.com/questions/2835469/how-to-perform-rotate-shift-in-c)
> [位向左旋转函数中执行旋转移位](https://stackoverflow.com/questions/10134805/bitwise-rotate-left-function)

在 C/C++ 中，我有`<<`和`>>`作为左大便和右移。

为了测试这个运算符的功能，我想找到一个数字的第一个设置位，`n`左移 1，然后`|`用我之前找到的第一位做移位后的数字。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:00:55.713

```
long long int shiftleft(long long int number, unsigned n)    
{unsigned minusone=sizeof(long long int)*8-1;
 long long int r= number & (1LL<<minusone);//save the sign, which is the most significant bit
 long long int mask = (1LL<<minusone)-1;  //a mask to get all other bits

 return ( number<<n) | ((number & mask) >>(minusone-n)) | r; //rotate left in a loop only 63 bits 
} 
```

没有测试过代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:02:05.573

您可以像这样向左旋转：

```
int n; // amount to rotate by
unsigned int d; // the positive number to rotate.
if(n < (CHAR_BIT * sizeof(int)))
    int x = (n << d)|(n >> ((CHAR_BIT * sizeof(int)) - d)); 
```

但是，这仅适用于正数。右旋转可以这样完成：

```
if(n < (CHAR_BIT * sizeof(int)))
    int x = (n >> d)|(n << ((CHAR_BIT * sizeof(int)) - d)); 
```

这也仅适用于正数。

# c++ - 使用非文字字符串引发 out_of_range 异常。什么是小恶？

> ID：11942169
> 
> 赞同：2
> 
> 时间：2012-08-13T20:55:45.050
> 
> 标签：c++, exception

我正在编写一个小型库，当输入参数超出范围时，它会执行一些可能引发异常的事情。我会抛出一个 std::out_of_range 似乎很简单。

我还想生成一个很好的消息，例如“你给了我 X，但 Y 是范围内的最大值” - 即我正在格式化一个字符串并希望将它用于异常。

奇怪的是构造函数的签名是

`explicit out_of_range (const string& what_arg)`

也就是说，它需要对字符串的 const 引用。当我们从函数中弹出时，我在堆栈上创建的任何字符串都将被销毁，为异常捕获器留下一堆乱七八糟的垃圾。所以我只有几个选择：

1.  使用字符串文字，因此不会生成好的消息。它在程序的生命周期内有效。
2.  在函数中将字符串设为静态，并在抛出时重写。线程安全对我的程序来说不是问题，但这感觉很脏。
3.  子类 out_of_range 以便它获取字符串的副本，并使用对副本的引用调用超类构造函数，以便副本在异常对象的生命周期内存在。

我倾向于 3 作为最不严重的，并且可以说是比直接使用标准类更好的设计，但我不得不问：真的没有办法直接使用标准的 out_of_range 类和生成的字符串吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T20:58:48.573

异常将保存您传入的字符串的*副本*，而不仅仅是引用。您可以安全地在本地创建字符串并将其传递给异常的构造函数，而不必担心生命周期问题。

请注意，字符串是通过引用传递的这一事实并不会抑制在构造函数内部进行复制的可能性，这似乎让您感到困惑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T20:59:06.280

你的假设是错误的。想象一下这个类：

```
struct Foo
{
    std::string s;
    Foo(std::string const & str) : s(str) { }
}; 
```

你能看一下构造函数并得出结论，`Foo a(std::string("hello"));`创建一个悬空引用吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T21:01:51.707

您的`what_arg`参数将被复制到 ctor 中的异常成员中。

# c# - Resharper 建议将 CompareTo 更改为 CompareOrdinal

> ID：11942171
> 
> 赞同：12
> 
> 时间：2012-08-13T20:55:57.903
> 
> 标签：c#, resharper

我有一个执行各种比较的分拣机。Resharper 说我应该从 更改`String.CompareTo`为`String.CompareOrdinal`。这真的提供了很多好处还是我应该调整检查规则？

相比于：

```
config.Sort(delegate(configData data1, configData data2)
{
    if (data1.SettingName.Equals(data2.SettingName))
    {
        string m1 = data1.SettingMachine;
        string m2 = data2.SettingMachine;
        if (m1 == null)
            m1 = string.Empty;
        if (m2 == null)
            m2 = string.Empty;
        return m1.CompareTo(m2);
    }

    return data1.SettingName.CompareTo(data2.SettingName);
}); 
```

比较序数：

```
config.Sort(delegate(configData data1, configData data2)
{
    if (data1.SettingName.Equals(data2.SettingName))
    {
        string m1 = data1.SettingMachine;
        string m2 = data2.SettingMachine;
        if (m1 == null)
            m1 = string.Empty;
        if (m2 == null)
            m2 = string.Empty;
        return String.CompareOrdinal(m1, m2); ;
    }

    return String.CompareOrdinal(data1.SettingName, data2.SettingName);
}); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-14T00:05:37.653

Resharper 担心，如果您要在使用不同默认字符编码的系统上运行代码，则比较可能会失败。`CompareOrdinal`是文化不变的，从而消除了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:00:16.243

我的猜测是 Resharper 试图阻止空引用。

使用第一个代码片段时data1 或 data2 为*null会发生什么情况？*将此与第二个代码片段进行比较。

这种方式只是更安全一些。

**编辑**

在这两个片段中，第一个`if`都会失败，但我当然指的是比较部分:)

# javascript - 隐藏/显示 JS 中的 DIV 不再起作用 - 潜在的冲突 btw 脚本

> ID：11942172
> 
> 赞同：0
> 
> 时间：2012-08-13T20:56:01.447
> 
> 标签：javascript, jquery, css

我使用[本教程](http://www.randomsnippets.com/2008/02/12/how-to-hide-and-show-your-div/)来隐藏/显示 DIV。不幸的是，由于某种原因它不再起作用（同时我在我的代码中修改了一些东西）......你看到问题来自哪里了吗？jsfiddle： http: [//jsfiddle.net/Grek/C8B8g/](http://jsfiddle.net/Grek/C8B8g/) 我认为下面的2个脚本可能存在冲突：

```
function showonlyone(thechosenone) {
    $('.textzone').each(function(index) {
        if ($(this).attr("id") == thechosenone) {
            $(this).show(200);
        }
        else {
            $(this).hide(200);
        }
    });
}

$('.activity-title a').click(function(){
  $('.textzone').fadeOut(2000);
  var region = $(this).attr('data-region');    
  $('#' + region).fadeIn(2000);
})​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T21:03:36.150

你有一些问题正在发生。你缺少`data-source`你的`<a>`元素。它们的“区域源”隐藏在具有某些功能的 href 内。我删除了它`data-source`，现在一切正常。

你想做这样的事情：

```
$('.activity-title a').click(function(){
    var region = $(this).attr('data-region'); 
    $('.textzone:visible').fadeOut(2000, function () { 
        $('#' + region).fadeIn(2000);
    });

    return false; // stops href from happening    
})​;

// HTML Structured like so:
<div class="source-title-box"><span class="activity-title">
    <a href="#" data-region="source-region">Our region</a></span>
</div> 
```

[**jsFiddle 演示**](http://jsfiddle.net/C8B8g/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:12:12.267

我从您在[jsFiddle](http://jsfiddle.net/C8B8g/6/)中的标记中假设每个链接 ( `.activity-title a`) 都有一个`.textzone`. 我`onclick`从这些锚点中删除了该事件。这样第一个链接对应第一个`.textzone`：

```
<div id="source-container">
    <div id="source-region" class="textzone">
      <p><span class="activity-title">Interacting with the nature</span></p>
      <p>blablabla</p>
    </div>
    <div id="source-oursource" class="textzone">
        <p><span class="activity-title">Pure, pristine, and sustainable source</span></p>
        <p>blablabla</p>
    </div>
    <div class="source-title-box"><span class="activity-title"><a href="#">Our region</a></span></div>
    <div class="source-title-box"><span class="activity-title"><a href="#">Our source</a></span></div>
</div>​ 
```

然后使用脚本，我只需使用`index`单击的链接来确定`.textzone`要显示的适当内容：

```
var textZones = $(".textzone");
var anchors = $('.activity-title a').click(function(e){
    e.preventDefault();
    var index = anchors.index(this);
    textZones.filter(":visible").fadeOut(2000, null, function() {
        textZones.eq(index).fadeIn(2000);        
    });
})​ 
```

# android - Viewpager、兼容性包、冰淇淋三明治和导出签名应用程序

> ID：11942175
> 
> 赞同：0
> 
> 时间：2012-08-13T20:56:17.357
> 
> 标签：android, android-fragments, android-viewpager

我看到了这个[ViewPager、兼容性包和冰淇淋三明治](https://stackoverflow.com/questions/10928762/viewpager-compatibility-package-and-ice-cream-sandwich)，以及[Android ICS API 是否有一个原生等效于 ViewPager 支持库？](https://stackoverflow.com/questions/9958013/does-the-android-ics-api-have-a-native-equivalent-to-viewpager-support-lib)与我的问题相似，但不是我真正想问的问题。

场景类似，我有一个仅限 ICS 的应用程序，并且我在其上应用 ViewPager（我已经避免了 FragmentPagerAdapter 和 FragmentStatePagerAdapter 不会因为兼容性包问题而落入 fragmentmanager）。

问题是，当我导出已签名的应用程序时，我注意到在 proguard 映射上它还从支持库中导出了所有片段内容，例如：

```
 android.support.v4.app.ActivityCompatHoneycomb -> android.support.v4.app.a:
 android.support.v4.app.BackStackRecord -> android.support.v4.app.b:
 android.support.v4.app.BackStackState -> android.support.v4.app.BackStackState:
 android.support.v4.app.NoSaveStateFrameLayout -> android.support.v4.app.u: 
```

那么，我不确定，我的应用程序是否会应用支持库对象而不是使用漂亮的系统范围片段管理器？我怎样才能阻止它这样做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:11:18.013

简单的答案是，如果您查看**[文档](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)**，您会看到包含 viewpager 的包是**android.support.v4.view**因此，当您使用 viewpager 时，它需要加载 viewpager 使用的所有类以及一些它们在同一个包内。希望这可以帮助。

# vb.net - 多次循环数据集会出错

> ID：11942177
> 
> 赞同：0
> 
> 时间：2012-08-13T20:56:24.937
> 
> 标签：vb.net, oracle, odp.net

我有一个 OracleDataAdapter，它用 1 行 2 列、一个主键和一个数字填充我的数据集 ds。在触发事件后，我循环遍历它以在循环框中定期显示（现在按下按钮。

```
For Each DataRow As DataRow In ds.Tables(0).Rows
        Try
            listB.Items.Add("ID: " & DataRow("racoreceivedid").ToString())
            listB.Items.Add("Phone: " & DataRow("phone").ToString())
        Catch ex As Exception
            MsgBox(ex.Message)
        End Try 
```

但是，当我不止一次地运行这段代码时，我出现了这个错误：ORA-06550 我最初在尝试填充数据集时遇到了这个错误，但是变量名错误。如果它已经运行一次，我不确定为什么我会再次收到此错误。

# html - 从网页 (html) 运行 perl cgi 脚本

> ID：11942178
> 
> 赞同：0
> 
> 时间：2012-08-13T20:56:27.037
> 
> 标签：html, perl, cgi, dreamhost

我一直在寻找有关如何从 html 网页运行 perl 程序的教程。我找不到一个教程，甚至找不到一个很好的起点来清楚地解释如何做到这一点......

我想做的是在 perl 中使用 WWW::mechanize 在 wordpress 网站的后端为我填写一些信息。在我能做到这一点之前，我只想看到检索到的 html 显示在浏览器中，就像实际网站将显示在浏览器中一样。这是我的perl：

```
print "Content-type: text/html\n\n";
use CGI;
use WWW::Mechanize;
my $m = WWW::Mechanize->new();

use WWW::Mechanize;
$url = 'http://www.storagecolumbusohio.com/wp-admin';
$m->post($url);
$m->form_id('loginform');
$m->set_fields('log' => 'username', 'pwd' => 'password');
$page = $m->submit();
$m->add_handler("request_send",  sub { shift->dump; return });
$m->add_handler("response_done", sub { shift->dump; return });
print $page->decoded_content; 
```

这段代码在命令提示符下工作（实际上我在 mac 上，所以是终端）。但是，当用户单击链接时，我希望它可以在网站上工作。

我学到了一些东西，但是因为我是一个 perl 菜鸟，所以这让我感到困惑。似乎有两种方法可以做到这一点（我可能是错的，但这是我从我所阅读的内容中收集到的）。人们一直在谈论的一种方式是使用某种“模板方法”，例如 embperl 或 modperl。另一种是将 perl 程序作为 cgi 脚本运行。从我在各个网站上阅读的内容来看，cgi 似乎是最简单和最常见的解决方案？为了做到这一点，我被告知我需要更改 httpd.conf 文件中的几行。我在哪里可以找到该文件来更改它？我知道我在 apache 服务器上，但我的网站是由 dreamhost 托管的。我仍然可以访问此文件吗？如果可以，如何访问？

任何帮助将不胜感激，因为您可能会说我没有线索并且很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:00:58.500

[要在 dreamhost 上使用 cgi 脚本](http://wiki.dreamhost.com/CGI)，只需

1.  给脚本一个`.cgi`扩展名
2.  将脚本放在网络服务器可见的地方
3.  赋予脚本正确的权限（至少 0755）

你可能想看看你能不能得到一个玩具脚本，比如说，

```
#!/usr/bin/perl
print "Content-type: text/plain\n\nHello world\n"; 
```

在处理调试较大的脚本之前工作。

也就是说，我在您的脚本中没有看到的是标题。我想你会想说类似的话

```
print "Content-type: text/html\n\n"; 
```

*在*你的另一个`print`电话之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:42:50.860

我建议您首先在本地服务器上测试您的代码。我假设您使用的是 windows 或类似的问题，因此请使用 xamp [http://www.apachefriends.org/en/xampp.html](http://www.apachefriends.org/en/xampp.html)或 wamp [http://www.wampserver.com/en/](http://www.wampserver.com/en/)或获取真正的操作系统像[http://www.debian.org](http://www.debian.org)（你也可以在 vm 中运行它）。

您不应该像那样打印内容类型，而是使用“打印标题”，请参阅此页面： http: [//perldoc.perl.org/CGI.html#CREATING-A-STANDARD-HTTP-HEADER%3a](http://perldoc.perl.org/CGI.html#CREATING-A-STANDARD-HTTP-HEADER%3a)

确保为 perl 正确配置了 apache 服务器，另请参阅这些常见问题：http: [//oreilly.com/openbook/cgi/ch12_01.html](http://oreilly.com/openbook/cgi/ch12_01.html)

另请参阅[如何通过命令行将 POST 和 GET 数据发送到 Perl CGI 脚本？](https://stackoverflow.com/questions/2224158/how-can-i-send-post-and-get-data-to-a-perl-cgi-script-via-the-command-line)用于在命令行上进行测试。

# c - 从可执行文件中删除死代码

> ID：11942179
> 
> 赞同：1
> 
> 时间：2012-08-13T20:56:28.897
> 
> 标签：c, gcc, ld

我的目标是从我的可执行文件中删除尽可能多的死代码以减少代码大小。我遵循了 Stack Overflow 上其他一些问题的一些提示，并`-fdata-sections -ffunction-sections... + ...--gc-sections`在我的 makefile 中使用。不过我有一个问题。

我首先编译我所有`.o`的`-fdata-sections -ffunction-sections`用作标志。然后我将这些归档到一个静态库 ( `lib.a`) 中。然后我正在构建链接这个的可执行文件`lib.a`并使用`--gc-sections`这个链接器中的标志。然而，这似乎并没有做任何改进。这是因为我先存档吗？归档会消除分割成部分的影响吗？（此外，我使用的任何形式的“条带”似乎根本不会影响可执行文件*！*）

# android - 无法找出 gmail 的 IMAP 邮件服务器

> ID：11942185
> 
> 赞同：0
> 
> 时间：2012-08-13T20:56:52.770
> 
> 标签：android, jakarta-mail, mail-server

我正在 android 上制作一个使用 JavaMail API 从 gmail 帐户检索电子邮件的应用程序。这是我的代码：

```
 Properties props = new Properties();
    props.setProperty("mail.store.protocol", "imaps");
    props.setProperty("mail.imaps.host", mailServer);
    props.setProperty("mail.imaps.port", "993");
    props.setProperty("mail.imaps.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
    props.setProperty("mail.imaps.socketFactory.fallback", "false");
    if (debug) Log.i("check","before session");
    Session imapSession = Session.getDefaultInstance(props,null);
    if (debug) Log.i("check","after session"); 
```

每当代码到达 imapSession 行时，应用程序就会崩溃。换句话说，它永远不会到达最后一行。我尝试了几个 mailServer 字符串：

```
imaps.gmail.com
imap.gmail.com
imaps.googlemail.com
imap.googlemail.com 
```

似乎没有任何效果。是港口吗？我确定我已经添加了正确的权限，日志 cat 中的错误无论如何都没有提到权限。

**另一个问题**我可以从哪里获得有关 Gmail 和其他电子邮件服务器的此类信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:21:25.627

让我们从简化事情开始。您已经犯了几个[常见的 JavaMail 错误](http://www.oracle.com/technetwork/java/javamail/faq/index.html#commonmistakes)。扔掉你的代码，使用[JavaMail FAQ 中的简单代码连接到 Gmail](http://www.oracle.com/technetwork/java/javamail/faq/index.html#gmail)。然后使用[JavaMail FAQ 中的提示来调试](http://www.oracle.com/technetwork/java/javamail/faq/index.html#debug)任何剩余的问题。如果您仍有问题，请在此处发布更多详细信息。

# php - Cakephp 2 多个数据库

> ID：11942189
> 
> 赞同：1
> 
> 时间：2012-08-13T20:57:09.377
> 
> 标签：php, cakephp, cakephp-2.1

我想根据域切换数据库，从另一个数据库中选择凭据，但我无法切换..

**应用控制器.php**

```
// Select username, password and database based on domain
$this->Company->find('first', [...]);

if ($company) {
    // Connect to second database, droping connection from first.
    $dataSource = ConnectionManager::getDataSource('default');
    $dataSource->config['login'] = $company['Company']['dbuser'];
    $dataSource->config['password'] = $company['Company']['dbpass'];
    $dataSource->config['database'] = $company['Company']['dbname'];

    /**
     * PROBLEM START HERE:
     * Here, need to use new database settings, and, this case
     * Company table does not exists, but I always get it, so,
     * I think I am connected with the first and not second connection.
     */
    print_r($this->Company->find('first'));
} 
```

我该如何纠正这个？

**编辑**

我试过没有成功：

```
ConnectionManager::drop('default');
ConnectionManager::create('default', $settings); 
```

`print_r(ConnectionManager::create('default', $settings))`回报：

```
[... lots of things ... ]
[config] => Array
    (
        [persistent] => 
        [host] => localhost
        [login] => login
        [password] => password
        [database] => database
        [port] => 3306
        [datasource] => Database/Mysql
        [prefix] => 
    )
[... more things ... ] 
```

**编辑 2**

现在，我可以切换数据库，但是，公司模型总是得到旧的数据库设置。

**FooController.php**

```
<?php
App::uses('AppController', 'Controller');

class FooController extends AppController {
    var $uses = array('Foo', 'Company');

    public function index() {
        echo'<pre>';
        print_r($this->Company->find('first')); // Here I get from old settings
        print_r($this->Foo->find('first')); // Here I gete from new settings
        echo'</pre>';

        $this->layout = false;
        $this->render(false);
    }
} 
```

**应用控制器.php**

```
public function beforeFilter() {
    $company = ClassRegistry::init('Company')->find('first');
    $settings = array(
        'datasource' => 'Database/Mysql',
        'persistent' => false,
        'host' => 'localhost',
        'login' => $company['Company']['dbuser'],
        'password' => $company['Company']['dbpass'],
        'database' => $company['Company']['dbname'],
        'prefix' => ''
    );

    ConnectionManager::getDataSource('default')->disconnect();

    ConnectionManager::drop('default');
    ConnectionManager::create('default', $settings);

    ConnectionManager::getDataSource('default')->connect();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:20:36.447

您可以在数据库配置文件中切换数据库。

如下配置您的 Config/database.php 文件：

```
<?php
class DATABASE_CONFIG {

    // config for e.g. localhost
    public $default = array(
        'datasource' => 'Database/Mysql',
        'persistent' => false,
        'host' => 'localhost',
        'login' => 'root',
        'password' => 'xxxxx',
        'database' => 'cake',
        'encoding' => 'utf8'
    );

    // DB config specifically for your domain
    public $domain_x = array(
        'datasource' => 'Database/Mysql',
        'persistent' => false,
        'host' => 'localhost',
        'login' => 'username_at_hosting_provider',
        'password' => '087bJ#ytvh&^YU#T',
        'database' => 'blabla_cake',
        'encoding' => 'utf8'
    );

    public function __construct(){
        // switch config depending on domain / env('HTTP_HOST')
        if(env('HTTP_HOST')=='domain_x.com'){
            $this->default = $this->domain_x;
        }
        // otherwise keep $this->default
    }
} 
```

## 编辑：

回答你的问题似乎有点太快了：它并没有真正涵盖你的问题。对不起！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T13:30:39.333

好的，所以我设法解决了这个问题，在`__construct`AppModel 中创建函数并将所有代码删除默认数据源并使用新配置创建另一个。像这样的东西：

应用模型.php

```
public function __construct($id = false, $table = null, $ds = null)
{
    App::uses('CakeSession', 'Model/Datasource');

    parent::__construct($id, $table, $ds);

    if ($this->useDbConfig == 'default') {
        // Change the datasource config
        $user = CakeSession::read('Auth.User');
        $this->changeDataSource($user);
    }
}

public function changeDataSource($config)
{ 
    ...
    ...
    ...
    $dados = array();
    $dados['database']   = $config['titulo_bd'];
    $dados['host']       = $config['host_bd'];
    $dados['login']      = $config['login_bd'];
    $dados['password']   = $config['senha_bd'];
    $dados['datasource'] = 'Database/Mysql';
    $dados['persistent'] = false;
    $dados['prefix']     = '';
    $dados['encoding']   = 'utf8';

    ConnectionManager::create('default', $dados);
    ConnectionManager::getDataSource('default')->connect();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T01:46:47.777

看起来您需要动态创建配置并即时更改配置。我不知道这是否可行，但它可能会引导您找到答案。

首先，我们需要为要使用的数据源创建一个配置。为此，我们可以使用[ConnectionManager::create](http://api.cakephp.org/view_source/Connection-Manager#l-195)

接下来，我们需要即时更改配置，为此我们可以使用[Model::setDataSource](http://api.cakephp.org/view_source/model#line-3152)

我没试过，但看起来*应该*可以。如果有问题，请发表评论，以便我更新答案。

编辑：这可能不起作用，因为每个模型都需要更改为新的数据源。您可以使用一种`ConnectionManager::drop()`方法来删除`default`配置，然后再`ConnectionManager::create('default', array(...));`使用新的默认值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-20T11:17:58.840

我的情况非常相似。就我而言，我有两种类型的连接。一种是使用 Config/database.php 文件进行连接配置的默认核心连接。第二个是动态配置，它使用为登录用户保存的数据库详细信息。因此，对于一些特定操作，我必须在默认数据库连接和基于用户的数据库连接之间切换。它是这样出现的。

从默认文件切换到基于用户的数据库连接

```
try {
  ConnectionManager::getDataSource('default')->disconnect();
  ConnectionManager::drop('default');
  ConnectionManager::create('default', $this->config);
  ConnectionManager::getDataSource('default')->connect();
  $db = ConnectionManager::getDataSource('default');
} catch (MissingDatabaseException $e) {
  $this->Session->setFlash($e->getMessage()); 
} 
```

其中 $this->config 是基于用户的连接。

要切换回基于默认文件的连接，我会：

```
try {
  ConnectionManager::getDataSource('default')->disconnect();
  ConnectionManager::drop('default');
  $dbconfig = new DATABASE_CONFIG();
  ConnectionManager::create('default', $dbconfig->default);
  ConnectionManager::getDataSource('default')->connect();
  $db = ConnectionManager::getDataSource('default');
} 
```

其中 $dbconfig->default 即 $default 包含我在 Config/database.php 中的默认连接配置

# java - FLAG_ACTIVITY_CLEAR_TOP 在清除所有活动之前挂起？

> ID：11942198
> 
> 赞同：1
> 
> 时间：2012-08-13T20:57:50.410
> 
> 标签：java, android

我有一个像这样 A -> B -> C 的活动堆栈。我正在从 C 启动活动 A，顶部清晰。现在发生的是它会立即完成 C，然后它将恢复 A，然后大约 2 秒后它会完成B. 在杀死活动 B 之前，我很困惑是什么导致了这两秒钟的延迟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T07:13:30.777

它是Android的功能：首先创建新的活动供用户查看，然后完成以前的旧活动......

# php - 查询结果存入一个变量

> ID：11942201
> 
> 赞同：0
> 
> 时间：2012-08-13T20:57:55.043
> 
> 标签：php, mysql

我已经阅读了其他一些类似的帖子，但我似乎无法很好地实现它们。我正在从另一个程序调用 php 脚本，该程序需要以一个变量、空格或逗号分隔的形式返回结果。php 连接到一个数据库（那里没问题）并运行一个查询，该查询将返回 2 到 6 个左右匹配的行。我需要将这些结果放在一个变量中，但似乎无法得到它。

这就是我卡住的地方。

```
$t = "SELECT user FROM call_times WHERE client='$clientid' AND start <= $date AND end >=          $date";
$result = mysql_query($t) or die(mysql_error());
while ($row = mysql_fetch_array($result)) {

$temp = $row['user'];
}
echo $temp; 
```

查询运行良好，但您可以从代码中看到我正在尝试（并且失败）在下部执行的操作。我需要 $temp 来保存结果列表（例如：5567889 57479992 4335780（每个都是用户列中的不同条目））。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T21:00:20.393

```
$array = array();
while ($row = mysql_fetch_array($result)) {
   $array[] = $row['user'];
}

$string = implode(" ", $array); 
```

现在 $string 具有以空格分隔的`user`列值。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T21:04:46.337

尝试一下[`group_concat()`](http://mahmudahsan.wordpress.com/2008/08/27/mysql-the-group_concat-function/)，您将不需要 PHP 来操纵结果。

# c - 什么是 cURL 选项参数生命周期？

> ID：11942208
> 
> 赞同：2
> 
> 时间：2012-08-13T20:58:46.213
> 
> 标签：c, curl

我第一次使用 cURL，虽然文档看起来相当完整，但我看不到在哪里可以找到`curl_easy_setopt()`参数所需的生命周期。

这是我的意思的一个例子：

```
char* str = strdup("my user agent");
curl_easy_setopt(curl_handle, CURLOPT_USERAGENT, str);
free(str); 
```

`curl_handle`调用后有效吗`free()`？

内容是否`str`已被复制或是否仍由 curl 某处直接引用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T21:02:35.323

[来自官方文档：](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html)

> 作为 'char *' 参数传递给 libcurl 的字符串由库复制；因此，在 curl_easy_setopt() 返回后，与指针参数关联的字符串存储可能会被覆盖。此规则的例外情况在下面的选项详细信息中进行了描述。
> 
> 在 7.17.0 版本之前，不复制字符串。相反，用户被迫保持它们可用，直到 libcurl 不再需要它们。

因此，如果您使用最新版本的 libcurl，您可以在设置后立即释放字符串。

# php - 验证失败后 CakePHP 重建页面

> ID：11942212
> 
> 赞同：0
> 
> 时间：2012-08-13T20:58:59.830
> 
> 标签：php, cakephp

我来这里问他们如何在 CakePHP 框架中验证后重建 HTML 页面但没有成功。我解释得更好，当我提交表单并且某些数据没有被 CakePHP 验证时，他会返回到表单，并在屏幕上显示我填写的适当数据以及必要的验证错误消息。假设我有同一个 HTML 页面一个 DIV，它是一个手风琴，当在手风琴上的某处单击时打开或关闭。

当 CakePHP 框架将表单返回到手风琴时，您如何获得与提交时完全相同的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:08:02.073

以下是步骤： 1\. 使用 Onsubmit 表单事件设置隐藏变量，该变量将存储当前活动的手风琴面板。在您的 javascript 方法中，您可以使用以下方法获取活动的手风琴选项卡：

```
var active = $( ".selector" ).accordion( "option", "active" ); 
```

[这是](http://docs.jquery.com/UI/Accordion#option-active)指导您如何获得活动标签的链接。

2.  提交表单后，在手风琴面板顶部显示所有错误。 [这是链接](https://stackoverflow.com/questions/11630373/show-all-model-validation-errors-on-top-of-the-page-in-cakephp)，如何在页面顶部显示所有验证错误。

3.  向包含活动选项卡的 $validationErrors 添加一个额外参数。

4.  在页面加载时，您可以打开由您添加到`$validationErrors`数组中的参数标识的给定选项卡。

# javascript - 使用 .innerhtml 输入带有链接的列表

> ID：11942213
> 
> 赞同：0
> 
> 时间：2012-08-13T20:59:00.377
> 
> 标签：javascript, syntax

当我使用 .innerHTML 下面的功能时。该列表出现在我的 ul 元素下，id 为archive_content。唯一的问题是当我将 li 元素转为链接时，该功能不再起作用。我想知道是否有人知道这背后的原因。

```
function art()
{
//Define art content inside list below 
var archive_content =
"<li>hey</li>"+
"<li>hey</li>"+
"<li>hey</li>"+
"<li>hey</li>";

document.getElementById("archive").innerHTML='Drawings';
document.getElementById("archive_content").innerHTML= archive_content;
} 
```

编辑：这就是我尝试将它们变成链接的方式

```
 var archive_content =
"<li><a href="#">hey</a></li>" +
"<li><a href="#">hey</a></li>"+
"<li><a href="#">hey</a></li>"+
"<li><a href="#">hey</a></li>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T21:08:55.990

在以双引号为界的字符串中不能有双引号字符。

```
"lorem "foo" ipsum" // throws a syntax error
"lorem 'foo' ipsum" // OK 
```

在 JavaScript 中使用单引号来绑定字符串。

```
var archive_content =
'<li><a href="#">hey</a></li>' +
'<li><a href="#">hey</a></li>' +
'<li><a href="#">hey</a></li>' +
'<li><a href="#">hey</a></li>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:12:03.487

您不应该对 href 和完整字符串都使用双引号。要么：

```
var archive_content =
'<li><a href="#">hey</a></li>' +
'<li><a href="#">hey</a></li>' +
'<li><a href="#">hey</a></li>' +
'<li><a href="#">hey</a></li>'; 
```

或这个：

```
var archive_content =
"<li><a href='#'>hey</a></li>" +
"<li><a href='#'>hey</a></li>" +
"<li><a href='#'>hey</a></li>" +
"<li><a href='#'>hey</a></li>"; 
```

将解决问题。

# arrays - bash 在循环中分配给数组索引的麻烦

> ID：11942214
> 
> 赞同：7
> 
> 时间：2012-08-13T20:59:05.543
> 
> 标签：arrays, bash

我可以让它在 ksh 中工作，但不能在 bash 中工作，这真的让我发疯。希望这是我忽略的显而易见的事情。

我需要运行一个外部命令，输出的每一行都将存储在数组索引中。

这个简化的示例看起来像是在循环中正确设置了数组，但是在循环完成后，这些数组分配消失了吗？就好像循环被完全视为一个外壳？

垃圾.txt

```
this is a
test to see
if this works ok 
```

testa.sh

```
#!/bin/bash

declare -i i=0
declare -a array

echo "Simple Test:"
array[0]="hello"
echo "array[0] = ${array[0]}"

echo -e "\nLoop through junk.txt:"
cat junk.txt | while read line
do
    array[i]="$line"
    echo "array[$i] = ${array[i]}"
    let i++
done

echo -e "\nResults:"
echo "       array[0] = ${array[0]}"
echo " Total in array = ${#array[*]}"
echo "The whole array:"
echo ${array[@]} 
```

输出

```
Simple Test:
array[0] = hello

Loop through junk.txt:
array[0] = this is a
array[1] = test to see
array[2] = if this works ok

Results:
      array[0] = hello
Total in array = 1
The whole array:
hello 
```

因此，在循环中，我们分配 array[i] 并且 echo 验证它。但是在循环之后，我回到了包含“hello”的数组[0]，没有其他元素。

跨 bash 3、4 和不同平台的结果相同。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T21:02:48.897

因为您的 while 循环在管道中，所以循环体中的所有变量分配对于执行循环的子 shell 来说都是本地的。（我相信`ksh`不会在子shell中运行该命令，这就是您在`bash`.

```
while read line
do
    array[i]="$line"
    echo "array[$i] = ${array[i]}"
    let i++
done < junk.txt 
```

很少，如果有的话，你想用`cat`管道将*单个*文件传递给另一个命令吗？改用输入重定向。

更新：由于您需要从命令而不是文件运行，因此另一个选项（如果可用）是进程替换：

```
while read line; do
...
done < <( command args ... ) 
```

如果进程替换不可用，您需要输出到临时文件并从该文件重定向输入。

如果您使用的是 bash 4.2 或更高版本，则可以在循环之前执行这两个命令，原始管道进入循环将起作用，因为 while 循环是管道中的*最后一个*命令。

```
set +m    # Turn off job control; it's probably already off in a non-interactive script
shopt -s lastpipe
cat junk.txt | while read line; do ...; done 
```

更新 2：这是一个基于 user1596414 评论的无循环解决方案

```
array[0]=hello
IFS=$'\n' array+=( $(command) ) 
```

您的命令的输出仅根据换行符拆分为单词（因此每一行都是一个单独的单词），并将生成的 line-per-slot 数组附加到原始数组。如果您只使用循环来构建数组，这非常好。它也可以被修改以适应少量的每行处理，类似于 Python 列表理解。

# c# - DropDownList Autopostback 清除字段，恢复为默认值

> ID：11942217
> 
> 赞同：0
> 
> 时间：2012-08-13T20:59:21.130
> 
> 标签：c#, asp.net, drop-down-menu, autopostback

我在详细信息视图的两个不同字段中有两个下拉列表，第一个确定第二个的值。

当我从第一个 ddl 自动回发中选择一个值时，会删除详细信息视图中已经存在的所有数据并将第一个下拉列表恢复为第一个选择。

此外，当我从列表中选择（多次更改 ddl 选择）时，它会抛出：

Eval()、XPath() 和 Bind() 等数据绑定方法只能在数据绑定控件的上下文中使用。

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.InvalidOperationException：Eval()、XPath() 和 Bind() 等数据绑定方法只能在数据绑定控件的上下文中使用。

源错误：

[没有相关的源代码行]

```
------First DDL

<asp:DropDownList ID="DropDownList1" runat="server" DataSourceID="SQLLEAVECODE"
DataTextField="LEAVETYPE" DataValueField="LEAVECODE"
onselectedindexchanged="DropDownList1_SelectedIndexChanged"
AppendDataBoundItems="True" ViewStateMode="Enabled" AutoPostBack="True"
SelectedValue='<%# BIND("REQLEAVECODE") %>' Width="80px">
<asp:ListItem> </asp:ListItem>
</asp:DropDownList>

-------Second DDL

<asp:DropDownList ID="DropDownList2" runat="server" DataSourceID="SqlDataSource1"
DataTextField="REASON" DataValueField="REASON" 
SelectedValue='<%# Bind("leavetype") %>'>
</asp:DropDownList>

---------page load
protected void Page_Load(object sender, EventArgs e)
{
if (!IsPostBack)
{
DetailsView1.DataBind();
}
}

--------DDL 1 selectedIndexChange
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
DropDownList lvtype = (DropDownList)(DetailsView1.FindControl("DropDownList1"));
DropDownList lvreason = (DropDownList)(DetailsView1.FindControl("DropDownList2"));
Label27.Text = lvtype.SelectedValue.ToString();

DetailsView1.Fields[4].Visible = true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T04:46:46.037

如果`Drop-down`在`DetailsView`then 请处理`ItemCommand event`of`DetailsView`而不是`DropDownList1_SelectedIndexChanged`。

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T05:34:54.827

您的标记是指`ID="DropDownList1"`和`ID="DropDownList2"`。

但是，您的事件处理程序指的是`DetailsView1.FindControl("DropDownList6")`and `DetailsView1.FindControl("DropDownList6")`。这可能与您的问题有关吗？

# ruby-on-rails - 我应该如何通过 Rhodes（没有 RhoConnect/Sync）处理用户验证？

> ID：11942218
> 
> 赞同：0
> 
> 时间：2012-08-13T20:59:23.887
> 
> 标签：ruby-on-rails, http-authentication, rhomobile

我有一个基于 Rails 的站点，它提供所有相关页面的 XML 版本。此外，它还具有 HTTP 身份验证。

我处理移动应用程序登录的计划是将用户名/密码发布到登录页面，假设我得到了很好的响应，我将为用户和密码设置全局变量变量，并使用经过验证的受保护数据发出所有请求用户/在标题中传递。注销只会擦除用户/密码全局变量。

是处理这个问题的最好方法还是我让事情变得比他们需要的更困难？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T21:01:49.023

是的，尽管我的建议是使用像[Devise](https://github.com/plataformatec/devise/)或[authLogic](https://github.com/binarylogic/authlogic/)这样的 gem ，因为滚动你自己的身份验证充满了潜在的问题。

有多种方法可以包含 Rhodes 的外部库，包括 RubyGems 和自定义扩展。有关信息，请参阅下面的链接。

[http://docs.rhomobile.com/rhodes/extensions](http://docs.rhomobile.com/rhodes/extensions)

# actionscript-3 - 术语未定义

> ID：11942219
> 
> 赞同：1
> 
> 时间：2012-08-13T20:59:28.037
> 
> 标签：actionscript-3

我的主游戏循环有问题。当玩家被摧毁时，我删除了游戏循环的 eventListener。但是，我从collisionCheck 函数中得到一个错误，即术语未定义。即使 collisionCheck 是 gameLoop 的一部分并且 eventListener 已被删除。

```
if(planeHP <= 0){
    removePlayer();
}

public function removePlayer(){
    removeEventListener(Event.ENTER_FRAME, moveGameObject);
    trace("removed");
}

public function moveGameObject(event:Event){
    collisionCheck();
} 
```

我可以在输出窗口中看到错误之前的“已删除”跟踪。错误总是来自collisionCheck 函数。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:49:55.730

问题是我在 collisionCheck 中有多个循环，并且调用 removePlayer 的循环不是最后一个，因此即使我删除了侦听器，它也会继续。只需在 removePlayer() 之后添加一个 return 即可解决问题。

# salesforce - Salesforce - 将字符串从一个类传递到另一个类！- 顶尖

> ID：11942220
> 
> 赞同：0
> 
> 时间：2012-08-13T20:59:27.617
> 
> 标签：salesforce, parameter-passing, apex-code

**您好**，
我现在有一个问题，我无法解决。

**问题**：我目前有 2 个类，例如 A 类和 B 类。AI 类内部有一个在 Accounts 上运行的 for 循环。

```
Class A{
    for(Account t: listAccounts){
         String abc = t.Name;
         String URL = 'http://testURL.com/test?q1='+t.id+'&q2='+t.Name.......till q50';
    }
} 
```

所以每次这个 for 循环在一个帐户上运行时，它都会生成一个新的 URL。我想要一种将这个 URL 从 for 循环传递到另一个类的方法，该类在 VF 页面上显示它。因此，B 类是 VF 页面的控制器。

URL 的长度将超过 500 个字符，因此无法将其作为自定义设置传递并在另一个控制器上检索它。

```
Class B{
       public String getURL(){
         //Somehow fetch that URL everytime the loop runs 
         return URL;
       }
} 
```

现在，VF 页面将调用此控制器类 B 来检索 URL 并将其显示为输出链接。

**我尝试过**的：我尝试过使用 getter 和 setter，但它没有用。为什么？因为 VF 页面严格调用没有参数的 getURL() 方法。

我也尝试将它保存在自定义设置中，但由于长度太长，这是不可能的！

**请帮忙。任何形式的帮助将不胜感激！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:46:56.960

您是否尝试过全局静态变量？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T14:05:30.103

谢谢大家的帮助，但我能找到的唯一出路是将它保存在一个自定义对象上，该对象可以在 Account 上查找，然后执行 SOQL 以将其放入 B 类。

谢谢你们的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T22:00:15.373

您可以在 A 类上创建一个静态方法来返回给定`Account`对象的 URL。

然后 B 类可以在 Visualforce 页面上查找当前帐户的 Id：

```
Id id = ApexPages.currentPage().getParameters().get('id'); 
```

并将该 ID 传递给 A 类的静态方法以获取该帐户的 URL。

这适用于显示帐户详细信息的 Visualforce 页面，但不适用于帐户列表。

# jquery - 在动态 SELECT ID 中捕获 SELECT 更改

> ID：11942221
> 
> 赞同：-1
> 
> 时间：2012-08-13T20:59:32.190
> 
> 标签：jquery

我有一个表，里面有几个带有动态生成 ID 的选择。

像这样的东西： `<select id="Select_1">...` `<select id="Select_2">...` `<select id="Select_3">...`

有没有一种方法可以让我在每次选择的变化时都能捕捉到？

我尝试了几种方法，例如： `$("select").change` `$("#Select_").change` `$("select#Select_").change`

他们都没有工作...

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:27:44.287

给 select 元素一个通用类，并使用该类调用 change：

HTML：

```
<select class="sel" id="select_1">
<option value="y">Yellow</option>
<option value="b">Blue</option>
</select>
<br/>
<select class="sel" id="select_2">
<option value="g">Green</option>
<option value="r">Red</option>
</select> 
```

查询：

```
$(document).ready(function() {
    $('.sel').change(function(){
        alert($(this).find('option:selected').val());
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:04:37.523

尝试这个：

```
$(document).on('change', 'select', function (event) {

  // your code here
  // `this` scope is pointing to current select which value was changed

  $(this).val() // get selected value
  $(this).attr('id') // or this.id - current ID

}); 
```

我希望它能帮助你开始。

# xml - NodeJs CMS - 构建 CMS 时将 XML 或 JSON 作为存储格式

> ID：11942222
> 
> 赞同：2
> 
> 时间：2012-08-13T20:59:34.247
> 
> 标签：xml, json, node.js, content-management-system

我正在使用 Express 在 NodeJs 之上用 javascript 编写 CMS。我的目标是构建过去几年我每天都在 .NET 中构建的东西，但现在纯粹是在 javascript 中构建的。目前，我有基本的流程工作，内联编辑页面（使用“contenteditable”属性），然后将这些可编辑 div 的 HTML 解析为 JSON 并将其存储在 MongoDB 中。

反过来，所需部分的 JSON 被解析回 HTML 服务器端并使用 jQuery 插入到 JSDom 文档中，然后将整个文档发送到客户端。

这一切都很完美，但现在我正在与一位同事讨论，他质疑将 HTML 存储为 JSON 的部分。在他看来，这应该是 XML，但在将所有内容都更改为 XML 之前，我想听听关于这个问题的更多意见。

XML 在流程的任何部分都比 JSON 有优势吗？我将不得不使用 XSLT 将 XML 格式化为 HTML，而不是像我所知的那样将 JSON 解析回 HTML。

对此的任何意见将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-12T14:14:22.900

是的，JSON 适用于 Javascript 中的对象，而 XML 适用于您尝试存储的 HTML。因此，请看一下 JSONML，它是一种写下 XML 的 JSON 语法。规范真的很简单，所以简而言之。

1.  你从一个代表（根）节点的数组开始
2.  该数组中的第一项是表示节点名称的字符串
3.  下一项，如果是对象，就是节点上所有属性的枚举
4.  数组的其余部分表示节点的子节点（如果有）。这里的每个项目可以是一个字符串（对于一个文本节点）或另一个遵守相同规则的数组（对于一个元素节点）

这是 JSONML 的一个示例：

```
[
    "lcSequenceOption",
    [
        "lcAnswerContent",
        "Some answer content"
    ],
    [
        "lcSequence",
        {
            "value": 0
        }
    ]
] 
```

转换为以下 XML：

```
<lcSequenceOption>
    <lcAnswerContent>Some answer content</lcAnswerContent>
    <lcSequence value="0" />
</lcSequenceOption> 
```

JSONML 没有提供处理指令的符号。在 JSONML 之上编写自定义规则并不难。在我工作的组织中，我们解释每个以“？”开头的节点名（规则 2）。作为处理指令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:10:00.590

我倾向于使用像 BaseX 这样的 XML 数据库解决方案将数据存储在 XML 中，原因如下：

*   它非常适合使用 XSLT 以符合标准的方式生成其他标记格式，例如 HTML
*   使用符合标准的语言（如 XPath）很容易查询
*   转换为几乎所有其他格式相对容易（例如使用 XSL:FO 的 PDF）
*   在几乎任何编辑器中都易于阅读/理解

对我来说，将 HTML 之类的标记语言（我假设 CMS 的输入数据格式）转换为 JSON，然后在以“读取”模式呈现 CMS 页面时将 JSON 转换回 HTML 感觉很复杂。假设输入格式是有效的 XHTML，您可以将其存储和检索为本机 XML，这对我来说感觉更自然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-04T14:17:51.400

我建议您使用 JSON，它不需要太多存储空间。

最重要的是它超级快，我已经测试过在 nodejs 中解析查询字符串和 json 对象，json 比查询字符串更快。我相信它也会比 XML 更快。

我最新的开源项目[ourjs.org](http://ourjs.org)也是基于JSON 的。它也是一个小型 CMS，很容易将数据缓存在内存中，因此 JSON 就是其中之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T21:39:58.117

JSON 绝对是一种更“节点原生”的存储格式。正如您所指出的，它也可以很好地与 mongo (couch, riak) 配合使用。将数据存储为 JSON 而不是（字符串化）XML 的另一个优点是，您可以随时在 mongoDB 中开始索引和查询属性。

如果你很好地组织你的应用程序，`toJSON()`用方法替换你的页面序列化器是非常简单的，`toXML()`反之亦然。你的决定不是一成不变的，但因为它似乎对你有用并且“它是节点方式”，所以我会坚持使用 JSON。

如果有人愿意的话，我很想看到一些支持 XML 的答案。

# jquery-mobile - 同位素间歇性地在 div 上返回 0px 高度

> ID：11942224
> 
> 赞同：1
> 
> 时间：2012-08-13T20:59:38.430
> 
> 标签：jquery-mobile, jquery-isotope

我的同位素布局在其容器上返回 0px 高度。刷新页面总能解决问题。

有没有人遇到过这个？

这是我的同位素：

```
var $container = $('#Stream');
$container.imagesLoaded(function () {
    $container.isotope({
    itemSelector: '.stream-items',
    transformsEnabled: false
}); 
```

尽管在 Chrome、Safari 和 FF 上间歇性地发生，但它始终如一地发生。我所说的“间歇性”是指有时它在第一次加载，其他人在第三次或第四次，但最终总是会发生。

我在 jQuery Mobile 上运行并尝试加载各种选项（window.load、pageinit 等），但无论如何都会发生。

因此，非常感谢任何想法，包括任何会强制刷新以始终解决问题的技巧。

谢谢！

更新：刚刚注意到调整窗口大小也会重置为 0px 高度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-28T16:30:29.400

看起来同位素没有足够的时间来计算图像。所以我改用 window.load 。工作一种享受：

```
$(window).load(function(){
    // Gallery Isotope
    $(function(){
        var $container = $('#gallery');
        $container.isotope({
        itemSelector: 'li',
            masonry : {
                columnWidth : 320
            }
        });
    });
}); 
```

# java - JNA 在没有来自 java 的源代码的情况下调用 DLL

> ID：11942230
> 
> 赞同：4
> 
> 时间：2012-08-13T21:00:22.153
> 
> 标签：java, dll, java-native-interface, jna

我必须调用一个 dll 方法并且我没有来自 dll 的源代码，我正在阅读有关 JNI 并了解您应该具有在代码 (.h) 中输入 JNI 库的源代码。

我的第二次拍摄是 JNA，但我遇到了同样的错误，尽管您不必更改 DLL 中的任何内容。

我创建了两个类来测试：

**界面：**

```
package icom;

import com.sun.jna.Library;

public interface IConectorT extends Library {
    int StartConector(byte[] conectorStatus, String icomPath);
} 
```

**DLL方法调用：**

```
package icom;

import com.sun.jna.Native;

public class ConectorTJna {

    public static void main(String args[]) {

        IConectorT lib = (IConectorT) Native.loadLibrary("ConectorT", IConectorT.class);
        int teste = lib.StartConector(null, "C:\\ICOM");
        System.out.println("RESULT: " + teste);
    }
} 
```

当我调用该`lib.StartConector`方法时，我得到了这个：

> 线程“主”java.lang.UnsatisfiedLinkError 中的异常：查找函数“StartConector”时出错：找不到指定的过程。在 com.sun.jna.Function.(Function.java:179) 在 com.sun.jna.NativeLibrary.getFunction(NativeLibrary.java:350) 在 com.sun.jna.NativeLibrary.getFunction(NativeLibrary.java:330)在 com.sun.jna.Library$Handler.invoke(Library.java:203) 在 $Proxy0.StartConector(Unknown Source) 在 icom.ConectorTJna.main(ConectorTJna.java:10)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:29:56.807

Did you specify path to the library, e.g. using system property?

Here are the details from "Getting Started with JNA" guide:

> Make your target library available to your Java program. There are two ways to do this:
> 
> 1.  The preferred method is to set the **jna.library.path** system property to the path to your target library. This property is similar to **java.library.path**, but only applies to libraries loaded by JNA.
>     
>     
> 2.  Change the appropriate library access environment variable before launching the VM. This is **PATH** on Windows, **LD_LIBRARY_PATH** on Linux, and **DYLD_LIBRARY_PATH** on OSX.

Taken from: [https://github.com/twall/jna/blob/master/www/GettingStarted.md](https://github.com/twall/jna/blob/master/www/GettingStarted.md)

# c# - 抛出故障异常 来自 WCF 服务方法

> ID：11942231
> 
> 赞同：0
> 
> 时间：2012-08-13T21:00:27.147
> 
> 标签：c#, .net, wcf, fault, faultexception

我正在学习 WCF，目前专注于故障章节。

据我了解，当服务抛出时，WCF 处理 FaultException 异常的方式略有不同。

因此，从服务中抛出的所有异常都应该包装到 FaultException 中似乎是个好主意。

在设计方面，对于 WCF 似乎偏爱的设计（实际逻辑与“服务”配置/托管/类似服务的细节之间的清晰分离），这对我来说似乎有点违反直觉。

那么这是一个好习惯吗？还是应该使用任何其他技术？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:11:15.343

通常的做法是在您的 WCF 服务上设置一个`FaultContract`，它定义了它是如何失败的，然后在客户端处理这个问题。

[http://msdn.microsoft.com/en-us/library/ms733721.aspx](http://msdn.microsoft.com/en-us/library/ms733721.aspx)

[http://blogs.msdn.com/b/endpoint/archive/2011/01/14/wcf-spike-faultcontract-faultexception-lt-tdetail-gt-and-validation.aspx](http://blogs.msdn.com/b/endpoint/archive/2011/01/14/wcf-spike-faultcontract-faultexception-lt-tdetail-gt-and-validation.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T21:13:08.403

看看以下内容：

*   [WCF 错误处理和一些最佳实践](http://blogs.msdn.com/b/pedram/archive/2008/01/25/wcf-error-handling-and-some-best-practices.aspx)
*   [异常管理](http://msdn.microsoft.com/en-us/library/cc949036.aspx)
*   [避免错误中的异常](http://blogs.msdn.com/b/drnick/archive/2008/05/20/avoid-exceptions-in-faults.aspx)

# c# - C# 中支持（类字符串）方法的不可变集合，例如“Contains(IEnumerable ）”？

> ID：11942234
> 
> 赞同：0
> 
> 时间：2012-08-13T21:00:34.713
> 
> 标签：c#, string, collections, immutability

`String`类代表“字符的集合”并且是不可变的。它的索引器只定义了 get 函数，这没关系，因为`Char`“struct”也是不可变的。所有`String`用于操作的方法都返回`String`类的新实例。

我最近需要一个不可变的通用集合，它与（我们称之为）*完全*一样。`String``Foo<T>`

*   它应该是**通用**的（尽管我只会将它与结构一起使用）。
*   它应该是**不可变**的。
*   它应该具有**用于**​​项目序列的方法，例如：
    *   `IndexOf(Foo<T>)`或者`IndexOf(IEnumerable<T>)`
    *   `StartsWith(Foo<T>)`或者`StartsWith(IEnumerable<T>)`
    *   `EndsWith(Foo<T>)`或者`EndsWith(IEnumerable<T>)`
    *   `Take(int, int)`（带有起始索引和长度，就像`Substring`）
    *   `Contains(Foo<T>)`或者`Contains(IEnumerable<T>)`
    *   `LastIndexOf(Foo<T>)`或者`LastIndexOf(IEnumerable<T>)`
    *   等等

我创建了一个不可变类，用于对其项目的只读访问，并编写了一些扩展方法来模仿 String 的功能，但我真的怀疑我的实现效率（我实际上要求`Replace`方法，[here](https://stackoverflow.com/q/11913268/704144)）。我对替代品很好奇。因为`String`做了我需要的一切（不幸的是，只有字符），所以感觉就像重新发明了轮子。

我需要的最简单的定义是“通用字符串”。

*   .NET 中有类似的东西还是为.NET 编写的？
*   如果没有，一些创建指南会很棒。

* * *

**回答和评论后编辑：**

我需要的**不是**包装*指定*的底层可变集合并将其表示为只读的包装器。我需要的是一个真正不可变的`T`with 方法集合来**处理`T`**. `IList<T>.IndexOf(T)`例如，它获取item的**索引**。现在想想`String.IndexOf(String)`方法，它（不像 的`IndexOf(Char)`方法`String`）获取一个字符**序列**`String`的索引并且有很多这样的方法。

现在，为什么我不使用`ReadOnlyCollection<T>`：除了它不支持“ *(String-like) 方法，例如 Contains(IEnumerable)* ”之外，它也不是**不可**变的。一个例子：

```
var array = new char[] { 'a', 'b', 'c', 'd', 'e' };
var str = new string(array);
// array[2] is 'c' and str[2] is also 'c'
// I can't do str[2] = 'f', but:
array[2] = 'f';
// Now, array[2] is 'f' but str[2] is still 'c' 
```

没有办法（[这不是黑客](http://philosopherdeveloper.wordpress.com/2010/05/28/are-strings-really-immutable-in-net/ ".NET 中的字符串真的不可变吗？")）来改变字符串的状态。现在，让我们来看看`ReadOnlyCollection<T>`：

```
var array = new int[] { 1, 2, 3, 4, 5 };
var col = new ReadOnlyCollection<int>(array);
// Here the col[2] is 3
// I can't do col[2] = 6, but:
array[2] = 6;
// Now the col[2] is 6 as well. 
```

* * *

**根据要求进行编辑 - 我目前使用的是：**

集合（`Foo<T>`）：

```
// Something I started like an hour ago. The only thing it does right now is to
// copy (not wrap) a specified enumerable and provide read-only access to it.
public sealed class Foo<T> : IList<T> where T: struct
{
    private readonly T[] _Array;

    public T this[int index] { get { return _Array[index]; } }
    IList<T>.this[int index]
    {
        get { return this[index]; }
        set { throw new NotSupportedException(); }
    }
    public Foo(IEnumerable<T> collection)
    {
        // Enumerable.ToArray() method copies the content of the specified array.
        // Whetever happens to the "collection", value of "_Array" will stay the same. 
        _Array = collection.ToArray();
    }

    // Most of the methods of IList<T> are explicitly implemented. IsReadOnly
    // returns true and the methods that cause a change in collection throw
    // "NotSupportedException"s just like ReadOnlyCollection<T>.
    // IEnumerable<T> implementation uses an iterator block.
} 
```

扩展方法：

```
// Extensions I used to manipulate collections so far.
// These are the things I want to get rid of.
public static class FooHelpers
{
     // I remove the bodies of these methods due to the confusion they have caused.
     // How they work is irrelevant and I posted these because of a request.
     public static bool Contains<T>(this IEnumerable<T> collection,
         IList<T> pattern) { }
     public static int IndexOf<T>(this IEnumerable<T> collection,
         IList<T> pattern) { }
     public static int LastIndexOf<T>(this IList<T> collection,
         IList<T> pattern) { }
     public static IEnumerable<int> IndicesOf<T>(this IEnumerable<T> collection,
         IList<T> pattern) { }
     public static IEnumerable<int> LastIndicesOf<T>(this IList<T> collection,
         IList<T> pattern) { }
     public static IEnumerable<T[]> Split(this IList<T> source,
         IList<T> seperator) { }
     public static bool StartsWith<T>(this IEnumerable<T> collection,
         IList<T> pattern) { }
     public static bool EndsWith<T>(this IList<T> collection,
         IList<T> pattern) { }
     public static IEnumerable<T> Take<T>(this IList<T> collection,
         int startIndex,
         int length) { }
     public static IEnumerable<T> Take<T>(this IEnumerable<T> collection,
         int startIndex,
         int length) { }
     public static IEnumerable<T> TakeAll<T>(this IList<T> collection,
         int startIndex) { }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:05:16.303

这里似乎有2个问题：

1) 创建不可变集合

简短的回答是**No**，对此没有内置支持。

最接近的答案确实是 a `ReadOnlyCollection`，您可以创建一个简单的包装器

```
public class ImmutableCollection<T> : ReadOnlyCollection<T> {

  public ImmutableCollection(IEnumerable<T> source) : base(source.ToList()) {}

} 
```

构造函数中的`ToList`调用会复制源集合，以便您可以修改源集合

如果失败，您将不得不实现自己的类，可能继承自`IList<T>`或`IEnumerable<T>`并提供您自己的 get 访问器。

无论哪种方式，您都必须记住，每个`T`都不能保证是不可变的（即使使用结构，因为结构可能具有作为引用对象的字段成员）。

但是由于您仍然必须复制源集合以使您的集合不可变，因此最好使用第一个示例。

2) 提供额外的函数来执行类似字符串的操作。

您必须实现自己的功能：

```
 public bool Contains(IEnumerable<T> pattern) {
   return IndicesOf(pattern).Any();
 }           

 public int IndexOf(IEnumerable<T> pattern) {
   return IndicesOf(pattern).Select(x=>(int?)x).FirstOrDefault() ?? -1;
 }           

 public int LastIndexOf(IEnumerable<T> pattern) {
   return IndicesOf(pattern).Select(x=>(int?)x).LastOrDefault()?? -1;
 }           

 public IEnumerable<int> IndicesOf(IEnumerable <T> pattern) {
  var count=pattern.Count();
  return Enumerable.Range(0,this.Count()-count).Where(i=> pattern.SequenceEqual(internalTake(i,count)));
 }           

 public IEnumerable<int> LastIndicesOf(IEnumerable<T> pattern) {
   return IndicesOf(pattern).Reverse(); // Could Optimize
 }

 private IEnumerable<IEnumerable<T>> internalSplit(IEnumerable<T> seperator) {
   var splitPoints=this.IndicesOf(seperator);
   var length=seperator.Count();
   var lastCount=0;
   foreach(var point in splitPoints.Where(x=>!splitPoints.Any(y=>y<x && y+length>x))) {
        yield return this.Take(lastCount,point-lastCount);
        lastCount=point+length;
   }
   yield return this.TakeAll(lastCount);
 } 

 public ImmutableCollection<T>[] Split(IEnumerable<T> seperator) {
   return internalSplit(seperator).Select(x=>new ImmutableCollection<T>(x)).ToArray();
 }          

 public bool StartsWith(IEnumerable<T> pattern) {
    return pattern.SequenceEqual(this.Take(pattern.Count()));
 }           
 public bool EndsWith(IEnumerable<T> pattern) {
    return pattern.SequenceEqual(this.Skip(this.Count()-pattern.Count()));
 }           

 private IEnumerable<T> internalTake(int startIndex, int length) {
    var max=(length==-1) ? this.Count() : Math.Min(this.Count(),startIndex+length);
    for (int i=startIndex;i<max;i++) yield return this[i];
 }

 public ImmutableCollection<T> Take(int startIndex, int length) {
    return new ImmutableCollection<T>(internalTake(startIndex,length));
 }           

 public ImmutableCollection<T> TakeAll(int startIndex) {
    return new ImmutableCollection<T>(internalTake(startIndex,-1));
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:39:48.720

我认为这就是您要查找的内容： List.AsReadOnly [http://msdn.microsoft.com/en-us/library/e78dcd75.aspx](http://msdn.microsoft.com/en-us/library/e78dcd75.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-25T04:20:40.917

如果您想要一种找到子序列的有效方法，那么最好的方法可能是为此目的编写您自己的集合。我建议将 a`T[]`与 an 结合使用`int[]`来存储每个值的哈希码。然后可以——在很大程度上——将查找序列的任务减少为`T`查找哈希值序列。可以将 N 个哈希码的序列转换为 3N 个字符的字符串，使用 3 个字符来存储每个哈希码，然后使用`string.Contains`或正则表达式解析器来执行序列查找。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-13T21:51:58.280

只读集合？ [http://msdn.microsoft.com/en-us/library/ms132474.aspx](http://msdn.microsoft.com/en-us/library/ms132474.aspx)

# c# - Neo4jClient 使用索引加载

> ID：11942237
> 
> 赞同：1
> 
> 时间：2012-08-13T21:00:49.940
> 
> 标签：c#, insert, indexing, neo4j, neo4jclient

Neo4J 和 .Net Neo4Jclient 非常新，但我正在尝试启动并运行一个基本项目。任何人都会有一些基本的代码或示例来使用索引将节点添加到服务器，同时允许相同节点类型之间的关系？该项目的最终目标是创建普林斯顿 Wordnet 的图形版本 - [http://wordnet.princeton.edu/](http://wordnet.princeton.edu/)

最初我试图在相同类型的两个节点之间创建关系，称它们为根词。它们应该通过 IS_SYNONYM 关系关联。根节点需要进行全文索引以允许搜索。这个“应该”允许我搜索给定词根的所有同义词。

我是这样看待这种关系的：

(RootWord1, **Type[A]** ) < ==:[IS_SYNONYM] == > (RootWord2, **Type[A]** )

这些是我开始使用的基本结构：

```
public class RootWord
    {
        [JsonProperty()]             
        public string Term { get; set; }
    }

public class IsSynonym : Relationship
        , IRelationshipAllowingSourceNode<RootWord>
        , IRelationshipAllowingTargetNode<RootWord>
    {
        public const string TypeKey = "IS_SYNONYM";

        public IsSynonym(NodeReference targetNode)
            : base(targetNode){}

        public IsSynonym(NodeReference targetNode, object data)
            : base(targetNode, data){}

        public override string RelationshipTypeKey
        {
            get { return TypeKey; }
        }
    } 
```

我已经盯着这个有一段时间了，所以非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T13:23:48.497

下面的代码将为根词添加同义词：（您可能需要检查您的“单词”和“同义词”是否已经在数据库中，以便您可以创建一个关系）

```
public static void AddNodeToDb(IGraphClient graphClient, string index, RootWord word, RootWord synonym)
{
    if (!graphClient.CheckIndexExists(index, IndexFor.Node))
    {
        var configuration = new IndexConfiguration { Provider = IndexProvider.lucene, Type = IndexType.fulltext };
        graphClient.CreateIndex(index, configuration, IndexFor.Node);
    }

    var wordReference = graphClient.Create(word, null, GetIndexEntries(word, index));
    var synonymReference = graphClient.Create(synonym, null, GetIndexEntries(synonym, index));
    graphClient.CreateRelationship(wordReference, new IsSynonym(synonymReference));

    Console.WriteLine("Word: {0}, Synonym: {1}", wordReference.Id, synonymReference.Id);
} 
```

'GetIndexEntries' 方法获取您要放入对象（RootWord）索引中的条目，因为您只有术语，这很容易：

```
private static IEnumerable<IndexEntry> GetIndexEntries(RootWord rootWord, string indexName)
{
    var indexKeyValues =
        new List<KeyValuePair<string, object>>
            {
                new KeyValuePair<string, object>("term", rootWord.Term)
            };

    return new[]
               {
                   new IndexEntry
                       {
                           Name = indexName,
                           KeyValues = indexKeyValues.Where(v => v.Value != null)
                       }
               };
} 
```

因此，假设您输入了“Ace”、“Great”，您可以查询（使用 Cypher）如下：

```
START n=node(0)
MATCH n-[:IS_SYNONYM]->res
RETURN res 
```

（假设节点 0 是您想要的根词！）这将返回“伟大”节点。同时，因为我们还创建了全文索引，所以可以使用以下代码搜索rootword：

```
public static void QueryTerms(IGraphClient gc, string query)
{
    var result = gc.QueryIndex<RootWord>("synonyms", IndexFor.Node, "term:" + query).ToList();
    if (result.Any())
        foreach (var node in result)
            Console.WriteLine("node: {0} -> {1}", node.Reference.Id, node.Data.Term);
    else
        Console.WriteLine("No results...");
} 
```

拥有这些节点后，您可以遍历“IS_SYNONYM”关系以获取实际的同义词。

# c# - Microsoft 单击一次签名时发生错误：密钥在指定状态下无效

> ID：11942244
> 
> 赞同：0
> 
> 时间：2012-08-13T21:01:22.233
> 
> 标签：c#, clickonce

我正在尝试将我的应用程序的新部署发布到共享位置。我收到此错误“**签名时发生错误：密钥在指定状态下无效。** ”

1.  注意这是自移至新域以来第一次这样做。
2.  共享位置位于旧域中，起初我认为这是因为它无法访问旧共享位置中所需的信息，因为我没有应用我的凭据来访问旧共享，这可能是密钥的原因信息可能不匹配。

使用我的凭据登录后，它没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-06-23T08:15:58.663

只是添加一个旧问题，因为我在域更改后遇到了这个问题，并且已经有一个有效的签名证书在项目上工作。不得不重新导入它，然后它就起作用了。

# django - Django TastyPie 正确放置嵌套用户模型

> ID：11942245
> 
> 赞同：2
> 
> 时间：2012-08-13T21:01:22.673
> 
> 标签：django, django-models, tastypie

我正在尝试使用 Django TastyPie 来更新我的模型。我有一个身份模型，充当默认 Django 用户模型的包装器：

```
class Identity(ProfileBase):
    user = models.OneToOneField(User, related_name='identity')
    avatar = models.ImageField(upload_to=avatar_upload_path, blank=True,
        null=True) 
```

我有我的`UserResource`：

```
class UserResource(ModelResource):

    class Meta:
        resource_name = 'user'
        queryset = User.objects.all()
        fields = ['email', 'first_name', 'last_name']
        include_resource_uri = False 
```

我有我的`IdentityResource`：

```
class IdentityResource(ModelResource):
    user = fields.ToOneField(UserResource, 'user', full=True)

    class Meta:
        resource_name = 'identity'
        queryset = Identity.objects.select_related()
        fields = ['user', 'avatar']
        always_return_data = True
        include_resource_uri = False

        authentication = OAuthTokenAuthentication()
        authorization = Authorization() 
```

我目前正在使用 ModelResource`obj_update`方法成功更新 first_name、last_name `IdentityResource`：

```
def obj_update(self, bundle, request, **kwargs):
    print 'updating object'
    bundle = self.full_hydrate(bundle)
    bundle.obj.user = request.user
    user = bundle.data['user']
    bundle.obj.user.first_name = user['first_name']
    bundle.obj.user.last_name = user['last_name']
    return super(IdentityResource, self).obj_update(bundle, request, user=request.user) 
```

**我想提出一个`PUT`请求，并可选择更新用户或身份模型上的任何字段（用户上的名字、姓氏或身份上的头像字段）。**我宁愿不必手动访问捆绑数据中的每个字段并手动将它们设置在模型上，就像我在上面所做的那样。

我怎样才能在 TastyPie 中自然地做到这一点？有人可以解释解决这个问题的更好方法吗？任何方向都非常感谢。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T05:20:48.553

这是我提供一个尝试尽可能多地利用 Tastypie 的答案的机会。

它比 OP 的请求更通用（它会更新任何用户，而不仅仅是登录的用户）。在现实世界中，您可能想要添加某种身份验证/授权。

```
from tastypie.resources import ModelResource
from tastypie.authorization import Authorization
from django.contrib.auth.models import User
from myapp.account.models import Identity

class IdentityResource(ModelResource):
    class Meta:
        queryset = Identity.objects.all()

class UserResource(ModelResource):
    class Meta:
        queryset = User.objects.all()
        allowed_list_methods = ['get']
        allowed_detail_methods = ['get','put']
        authorization = Authorization()

    def dehydrate(self, bundle):
        identity_bundle = self.build_identity_bundle(bundle)
        identity_bundle = IdentityResource().full_dehydrate(identity_bundle)
        return identity_bundle

    def obj_update(self, bundle, request, **kwargs):
        user_bundle = super(UserResource, self).obj_update(bundle, request, **kwargs)
        identity_bundle = self.build_identity_bundle(user_bundle)
        IdentityResource().obj_update(identity_bundle, request)
        return user_bundle

    def build_identity_bundle(self, user_bundle):
        identity_bundle = IdentityResource().build_bundle(
                obj=user_bundle.obj.get_profile(),
                data=user_bundle.data
            )
        return identity_bundle 
```

该示例支持的是：

*   获取扁平化的用户+身份资源
*   放置一个扁平的用户+身份资源，更新两个模型

您可能希望在 API 中注册 UserResource，而不是 IdentityResource。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T04:42:05.110

你可以做这样的事情。

```
# Find all properties in user model.
properties = [prop for prop in bunder.obj.user if not prop.startswith('__')]
bundle_user = bundle.data['user']
# Find the property in bundle user and set it back on user if it exists.
for property in properties:
  if property in bundle_user:
    setattr(bundle.obj.user, property, bundle_user[property]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T13:20:43.637

也许我错过了重点，但您是否尝试过`PATCH`-method 请求？Tastypie 将获取所有已发送的属性并在数据库中更新它们，而所有未发送的属性都保持不变。

# datanucleus - 批量更新数据核错误

> ID：11942248
> 
> 赞同：1
> 
> 时间：2012-08-13T21:01:32.233
> 
> 标签：datanucleus, jdoql

我正在尝试在 datanucleus 中使用 JDOQL 批量更新，但出现以下异常，

2013 年 12 月 8 日 13:06:56 信息 DataNucleus.Persistence：属性 datanucleus.cache.level2 未知 - 将被忽略 13 年 12 月 8 日 13:06:56 信息 DataNucleus.Persistence：========= ======== 持久性配置 =============== 12/08/13 13:06:56 信息 DataNucleus.Persistence：DataNucleus 持久性工厂 - 供应商：“DataNucleus”版本：“2.2.5”12/08/13 13:06:56 INFO DataNucleus.Persistence：DataNucleus Persistence Factory 已为数据存储 URL="jdbc:derby:;databaseName=metastore_db;create=true" driver="org.apache 初始化。 derby.jdbc.EmbeddedDriver" userName="APP" 12/08/13 13:06:56 INFO DataNucleus.Persistence: ======================= ==================================== 12/08/13 13:06:57 INFO Datastore.Schema：使用“无”初始化目录“”，架构“APP”自动启动选项 12/08/13 13:06:57 INFO Datastore.Schema：目录“”，模式“APP”已初始化 - 管理 0 个类 12/08/13 13:06:57 INFO DataNucleus.MetaData：注册监听器元数据初始化

要执行的查询： UPDATE myDomain.MTable t SET t.tableName = 'tmp3' WHERE t.tableName == 'tmp' 12/08/13 13:06:57 INFO DataNucleus.JDO: 抛出异常 JPQL UPDATE 查询没有更新条款！查询应该类似于“UPDATE Entity e SET e.param = new_value WHERE [where-clause]” org.datanucleus.exceptions.NucleusUserException：JPQL UPDATE 查询没有更新子句！查询应该类似于 org.datanucleus.query.JDOQLSingleStringParser$Compiler 中 org.datanucleus.query.JDOQLSingleStringParser$Compiler.compileUpdate(JDOQLSingleStringParser.java:236) 中的“UPDATE Entity e SET e.param = new_value WHERE [where-clause]” .compileSelect(JDOQLSingleStringParser.java:160) 在 org.datanucleus.query.JDOQLSingleStringParser$Compiler.compile(JDOQLSingleStringParser.java:125) 在 org.datanucleus.query。

我正在使用 DN-core-2.2.4、DN-RDBMS-2.2.4、DN-Enhancer-2.1.3 和 DN-ConnectionPool-2.0.3。

我触发更新的代码片段如下，

```
openTransaction();
Query q = pm.newQuery("javax.jdo.query.JDOQL", query);
q.compile();
Collection<?> result = (Collection<?>) q.execute();
committed = commitTransaction(); 
```

关于我做错了什么的任何指示。

我的查询格式为“UPDATE myDomain.A t SET t.tableName = 'tmp3' WHERE t.tableName == 'tmp'”

# javascript - 将服务器响应格式化为人类可读的

> ID：11942257
> 
> 赞同：3
> 
> 时间：2012-08-13T21:02:12.077
> 
> 标签：javascript, code-formatting, pretty-print

我正在执行 AJAX 请求以从 API（例如 Twitter 的 API）获取一些响应，并使用[highlight.js](http://softwaremaniacs.org/soft/highlight/en/)向用户显示响应以突出显示代码，但通常服务器会以尽可能少的空格/新行响应，例如这个：

```
[{"in_reply_to_user_id_str":null,"contributors":null,"coordinates":null,"favorited":false,"id_str":"235118001274368000","geo":null,"user":{"id_str":"481202814","profile_background_tile":false,"id":481202814,"time_zone":"Brasilia","screen_name":"Juu_kimura","profile_sidebar_fill_color":"F6FFD1","default_profile_image":false,"location":"Paran\u00e1 ","favourites_count":2 ... 
```

有什么方法可以格式化它，以便在应用突出显示之前更易于阅读？

*PS：响应可以是任何格式，JSON，XML，HTML，...*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:08:02.213

如果您已经解析`response`了 JavaScript 对象：

```
var response = {"in_reply_to_user_id_str":null,"contributors":null,"coordinates":null,"favorited":false,"id_str":"235118001274368000"};
JSON.stringify(response, null, 4); 
```

产量：

```
"{
    "in_reply_to_user_id_str": null,
    "contributors": null,
    "coordinates": null,
    "favorited": false,
    "id_str": "235118001274368000"
}" 
```

我不知道 XML 和 HTML 的任何通用解决方案。

# 也可以看看

*   [如何在（unix）shell 脚本中漂亮地打印 JSON？](https://stackoverflow.com/questions/352098)

# forms - 表单 GET 和重定向可能吗？

> ID：11942260
> 
> 赞同：0
> 
> 时间：2012-08-13T21:02:22.733
> 
> 标签：forms, redirect, get

我无法弄清楚如何设置表单以将字符串提交给附属公司，但也无法将用户重定向到我自己托管的感谢页面。我正在使用 GET 方法提交字符串。

这是我的表格的一个非常愚蠢的版本

```
<form action="http://xxxxx.com/api/post.ashx" method="get">                                                 
<div>
<label ><span>First Name <font style="color: red;">*</font></span></label>
<input type="text"  name="First" value="" maxlength="128" class="form-text required" />
</div>
<div >
<label ><span>Last Name <font style="color: red;">*</font></span></label>
<input type="text"  name="Last" value="" size="60" maxlength="128" class="form-text required" />
</div>
<div >
<label ><span>Phone Number <font style="color: red;">*</font></span></label>
<input class="form-text" type="text" maxlength="14" name="phone1" id="phone1" value="">
</div>

</div>                                                      
<input class="form-submit" type="submit" id="edit-submit" name="op" value="Submit" />
</div></form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T21:06:15.497

如果我正确理解您的问题，iframe 在这里是一种解决方案。

# jquery - 基于链式选择设置默认值的最佳方法

> ID：11942265
> 
> 赞同：1
> 
> 时间：2012-08-13T21:02:43.807
> 
> 标签：jquery, select, chained

我使用两个选择（链接），每个选择具有站点和类型、3 个站点和 2 个类型的值。所以我根据选择的文本输入设置默认值，我要走这条路

```
if ("car" == $("#type").val() && "bmw" == $("#site").val()) $("#id").val('1565');
if ("truck" == $("#type").val() && "bmw" == $("#site").val()) $("#id").val('1565'); 
```

例如对于 bmw 网站，这将在其他 2 个网站上重复。

除了 6 个 if 语句之外，还有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:26:07.437

如何使用嵌套关联数组 - 基本上定义你的数据然后查找它......

```
var data = {
    car: {
        bmw: 1565,
        ford: 1900
    },
    truck: {
        bmw: 1565,
        volvo: 2001
    }
}

var typeValue = $("#type").val();
var siteValue = $("#site").val();

var dataValue = data[typeValue][siteValue];

if (dataValue) {
    $("#id").val(dataValue);
} 
```

# c# - 包含接口的深拷贝对象

> ID：11942267
> 
> 赞同：1
> 
> 时间：2012-08-13T21:02:53.670
> 
> 标签：c#, .net

我有以下课程，我想做一个深拷贝。

```
public class KeyInfo
{
  public KeyInfo(IKeySetup keySetup, IKeyData data)
  {
    KeySetup = keySetup;
    Data = data;
  }

  public IKeySetup KeySetup { get; set; }
  public IKeyData Data { get; set; }

  public KeyInfo DeepCopy()
  {
    var keyInfo = (KeyInfo) this.MemberwiseClone();
    return keyInfo;
  }
} 
```

如何复制接口？我是否必须为接口实现 ICloneable，然后让每个具有这些接口之一的类都实现 Clone()？有没有办法避免每个类都必须实现这样的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:11:48.577

由于没有内置的方法可以对对象进行深度复制，因此您必须提供自己的方法才能这样做。

`IKeySetup`通过将/的实现者包含在接口中来强制实现`IKeyData`DeepCopy 可能是个好主意。要求`ICloneable`可能是另一种方法 - 编译时（通过派生`IKeySetup`/`IKeyData`从`ICloneable`）或运行时通过 trhowing if object does not support `ICloneable`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T04:47:44.423

您可以使用[Fasterflect](http://fasterflect.codeplex.com/)方法通过 emit 复制对象。

# django - 如何在 Django 模板中使用 Matplotlib 图像？

> ID：11942268
> 
> 赞同：5
> 
> 时间：2012-08-13T21:02:56.950
> 
> 标签：django, image, templates, matplotlib

*背景：* *我从 Django 开始，对 Python 的经验有限，所以请多多包涵。我编写了一个 Python 脚本，它定期运行（在 cron 作业中）将数据存储到 SQLite3 数据库中，我想从中读取并使用 Matplotlib（更具体地说，使用 Basemap）生成图像。这始于对学习 Python 和构建一个足够“有趣”的项目的兴趣。我之所以选择 Django 框架，是因为它的文档似乎相当完善，尽管我对 web.py 感到惊喜，因为它的要求是“轻量级”的（但是 web.py 的稀疏文档使它开始变得有点困难） ; 但目前，我还没有完全死心于一个框架。*

[问题 1874642](https://stackoverflow.com/q/1874642)中的示例几乎是我正在寻找的，它可以即时生成图像，而无需将其写入磁盘（因此必须定期清理生成的文件）。

但是，我不清楚如何将生成的图像合并到模板中，而不是让浏览器简单地显示图像。从教程材料中，我猜应该可以将包含在某些中的变量表示`django.template.Context`为`django.http.HttpResponse`.

所以我要问的是：

1.  是否有必要`print_png`在生成的 Matplotlib`FigureCanvas`对象上调用 a ？或者是`FigureCanvas`复制的“未打印”到上下文，以便在 Django 模板中我明确地编写 HTML`img`标签并手动放置标签的属性？

2.  我的印象是我*必须*将 Canvas 写入磁盘（即执行 a `canvas.print_figure("image.png")`），以便 HTML`img`标记在 Django 模板中看到它。但我想确定没有“更易于管理的方式”——即在`Context`并让模板“神奇地”生成它。如果确实需要写入磁盘，我想我可以使用 Django 的文件系统缓存工具以某种方式写入生成的图像（当然，检查是否已经为给定的输入参数集写入了图像）。我欢迎您在这方面提出建议，因为目前尚不清楚将生成的图像的大小和数量，因此我希望避免花费磁盘空间，而是更喜欢等待生成图像（即使需要几秒钟）。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:50:43.583

您可以将`StringIO`对象传递给`pyplot.savefig()`，并通过`StringIO.getvalue()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-24T01:50:17.630

此视图将提供 PNG 图像。只需将其绑定到某个 URL ，然后在标签`"img.png"`中使用它即可。`img`

```
def create_fig(request):
    # MPL stuff
    response = HttpResponse(content_type='image/png')
    fig.savefig(response)
    return response 
```

当然，这假设您可以生成独立于主视图的图像。您可以将参数传递给图像，例如 (in `urls.py`)：

```
url(r'^img(?P<nr>\d+).png$', create_fig), 
```

它将一个（字符串代表的）数字`nr`传递给`create_fig`.

# python - 金字塔 Web 应用程序中的（会话）身份验证

> ID：11942271
> 
> 赞同：3
> 
> 时间：2012-08-13T21:03:16.277
> 
> 标签：python, pyramid, beaker

我正在开发一个基于金字塔框架的 python web 应用程序。我正在尝试向它添加会话身份验证。据我了解：

*   用户可以登录/退出（需要安全性）；用户数据保存在数据库中
*   身份验证通过会话 ( `request.session`)处理

首先：会话身份验证是一个不错的选择还是有更好的选择？其次：我无法真正了解文档和示例。

到目前为止，我已经关注了[http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/tutorials/wiki2/authorization.html#adding-login-and-logout-views](http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/tutorials/wiki2/authorization.html#adding-login-and-logout-views)我有一个登录/注销表格。但是，我`authn_policy`的是[http://docs.pylonsproject.org/projects/pyramid/en/latest/api/authentication.html#pyramid.authentication.SessionAuthenticationPolicy](http://docs.pylonsproject.org/projects/pyramid/en/latest/api/authentication.html#pyramid.authentication.SessionAuthenticationPolicy)

由于金字塔中的会话工厂不安全（请参阅[http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/narr/sessions.html](http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/narr/sessions.html)），我使用 *pyramid_beaker* 代替。

配置是：在`__init__.py`：`session_factory = session_factory_from_settings(settings)`

在 .ini 文件中：

```
beaker.session.lock_dir = %(here)s/data/sessions/lock
beaker.session.type = ext:database
beaker.session.sa.url = mysql://user:pass@localhost:3306/db
beaker.session.table_name = user_session 
```

我希望我能把我的问题说清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:32:06.000

我会说这取决于你想做什么。如果您使用 Beaker，会话身份验证可以正常工作，但我喜欢使用 AuthTktAuthenticationPolicy 来获得额外的超时和重新发布选项，并且即使您清除会话，您的身份验证也不会消失。

# python - Python解析路径列表

> ID：11942276
> 
> 赞同：0
> 
> 时间：2012-08-13T21:03:39.020
> 
> 标签：python, parsing

我有一个`.txt`文件中的路径列表，我正在尝试使用 python 解析路径名中的一个文件夹。

```
9999\New_folder\A\23818\files\  
9999\New_folder\A\18283_HO\files\  
... 
```

我有兴趣做的是在和之间拉线`9999\New_folder\A\`，`\files\`这样我最终得到：

```
23818  
18283_HO 
```

任何帮助，将不胜感激！

编辑：非常感谢大家！根据您的输入提出以下代码。

```
input_text = open('C:\\Python\\textintolist\\Document1.txt', 'r')
output_text = open('output.txt', 'w')

paths =[]

for line in input_text:
    paths.append(line)

for path in paths:
        output_text.write(str(path.split('\\')[3])+"\n") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:08:36.630

```
>>> s = '9999\\New_folder\\A\\23818\\files\\'
>>> s.split('9999\\New_folder\\A\\')[1].split('\\')[0]
'23818' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:10:41.073

有很多解决方案。如果所有路径都像 9999\New_folder\A#number#\files\ 那么您可以通过查找倒数第三个和倒数第二个“\”来简单地获取子字符串。您可以通过使用`rfind()`（http://docs.python.org/library/string.html#string.rfind）来做到这一点

另一种更通用的方法是使用正则表达式。 [http://docs.python.org/library/re.html](http://docs.python.org/library/re.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T21:10:54.007

如果您的路径始终采用这种格式：

```
>>> paths
['9999\\New_folder\\A\\23818\\files\\', '9999\\New_folder\\A\\18283_HO\\files']
>>> for path in paths:
...     print path.split('\\')[3]
...
23818
18283_HO 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T21:23:38.853

```
#sm.th. like this should work:
file_handler = open("file path")
for line in file_handler:   
    re.search(r'\\(.[^\\]+)\\files', line).groups(0)[0] 
```

# c# - 在 C# 中使用接口的问题

> ID：11942281
> 
> 赞同：1
> 
> 时间：2012-08-13T21:04:07.130
> 
> 标签：c#, interface

我正在尝试为我正在制作的类创建一个设置，因此在创建它时可以为其设置一个管理器类，并且可能需要通过接口调用该类中的函数

这些调用并不总是需要的，并且管理器可能并不总是调用这个类的类，因此简单的返回值并从管理器类中使用它是不符合要求的。

我想做的是遵循代码。（试图尽可能多地去除不必要的东西）

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    interface Itester
    {
        void LoadTest();
    }

    public partial class Form1 : Form, Itester
    {

        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void button2_Click(object sender, EventArgs e)
        {

            World testWorld = new World();
        testWorld.SetManager(this);
            testWorld.InitializeWorld();

        }

        void Itester.LoadTest()
        {
            //random action I want run
            label1.Text = "Ran LoadTest()";
        }

    }

    public class World
    {
        Itester worldManager;

        public World()
        {
            InitializeWorld();
        }

        private void InitializeWorld()
        {
            worldManager.LoadTest();
        }

        public void SetManager(Itester test)
        {
            worldManager = test;
        }

    }

} 
```

我基于它得到这个错误。该错误指的是“世界级的公共空白”

错误 1 ​​可访问性不一致：参数类型“WindowsFormsApplication1.Itester”的可访问性低于方法“WindowsFormsApplication1.World.SetManager(WindowsFormsApplication1.Itester)”XYZ 位置 Form1.cs 316 21 Feudal World

我所期望的就是这样。

Form1 类创建 World Class 的本地实例，然后运行它的构造函数（什么都不做），然后将自己设置为它的 Manager（理论上可能是另一个实现 Itester 接口的类），最后它再次调用 World Class 并询问它初始化世界，我希望世界类调用 Form1 实例并让它更新按钮上的标签。

lvl1:Form1 -> lvl2:World -> lvl3:Form1(或其他经理) -> 将 void 返回到 lvl2:World -> 将 void 返回到 lvl1:Form1

我错过了什么，为什么这不起作用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T21:06:08.927

您的界面没有可访问性修饰符，因此假定为`internal`. 将其更改为公开：

```
public interface Itester
{
    void LoadTest();
} 
```

您需要这样做的原因是因为该方法`SetManager`是公共的，因此任何可以使用 SetManager 方法的人也必须能够看到该接口。

> 现在我只需要弄清楚它为什么有效

考虑`SetManager`可以从*任何*程序集中调用它，因为它是公共的。因此，如果有人正在创建程序集，他们可以引用您的程序集并调用`worldInstance.SetManager`. 我们称该程序集为 BigHappyAssembly。

现在考虑 is 的第一个参数`SetManager`，`ITester`但它是内部的。当 BigHappyAssembly 尝试调用 SetManager 时，会出现一个问题：*我应该给什么作为第一个参数？*它无权访问该`ITester`类型，因此它不知道第一个参数是什么。

为了防止这种情况发生，编译器会阻止你引入这个问题。它警告您您已经创建了一个公共成员，任何人都可以调用，但不是每个人都能够知道参数是什么。

# php - Htaccess 重定向问题

> ID：11942283
> 
> 赞同：0
> 
> 时间：2012-08-13T21:04:14.620
> 
> 标签：php, .htaccess

在 php 站点的 .htaccess 文件中

有一段代码

```
RewriteCond %{HTTP_HOST} ^test.com$
RewriteRule ^(.*)$ "https\:\/\/www\.test\.com\/$1" [R=301,L] 
```

它究竟是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:05:56.447

这意味着，如果您请求`http://test.com/...`（请注意此处为否`www`） - 您将被重定向到通讯员`http://www.test.com/...`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T21:06:04.293

将 test.com 请求重定向到[https://www.test.com](https://www.test.com)并保留所有 URI 参数。

# javascript - Gmaps4rails：如何向 json 添加属性

> ID：11942284
> 
> 赞同：0
> 
> 时间：2012-08-13T21:04:17.180
> 
> 标签：javascript, ruby-on-rails, gmaps4rails

我正在尝试将 id 属性添加到使用 Gmaps4rails gem（顺便说一句很棒的 gem）创建的标记中，以便在单击标记时可以使用该 id 修改列表元素。

现在我有这个：

```
@users.to_gmaps4rails do |user, marker|                                                                                                          
    marker.title user.name
    marker.json "\"id\": #{user.id}"
end 
```

，但它似乎不起作用。

我正在尝试像这样读取 id 属性：

```
for (var i = 0; i <  Gmaps.map.markers.length; ++i) {   
      google.maps.event.addListener(Gmaps.map.markers[i].serviceObject, 'click', function(event) {                 
        alert(event.id);   //<-------------Not working     
      });
    } 
```

有什么想法可以将我的用户 ID 存储到标记中，以便我可以在点击事件块中读取它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:28:37.053

做：

```
for (var i = 0; i <  Gmaps.map.markers.length; ++i) {
  var marker = Gmaps.map.markers[i];
  google.maps.event.addListener(marker.serviceObject, 'click', onMarkerClick(marker, event));
}

function onMarkerClick(marker, event){
  return function(event){
    alert(marker.id);
  }
} 
```

# c# - C# Microsoft Visual Studio 发布模式

> ID：11942286
> 
> 赞同：0
> 
> 时间：2012-08-13T21:04:30.033
> 
> 标签：c#, visual-studio-2010

我在调试模式下使用 Microsoft Visual Studio 2010 创建了一个 C# 项目，然后在发布模式下构建它，这样我就可以在没有 Visual Studio 的其他机器上运行代码。[我受此](https://stackoverflow.com/questions/1057878/how-to-compile-the-finished-c-sharp-project-and-run-it-outside-visual-studio)激励。

一切似乎都运行良好。但是，我的 ' .../bin/release ' 文件夹有 .dll 文件，而不是 .exe 文件，我可以从另一台机器上复制和运行。

我该如何解决这个问题？

编辑：这是解决方案资源管理器屏幕截图： ![在此处输入图像描述](../Images/41860b9babf6fe2939c843820a6b4ee4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:22:10.367

在 Visual Studio 中单击生成、发布。

# android - 按钮上的长按和短按应该会产生不同的结果

> ID：11942290
> 
> 赞同：2
> 
> 时间：2012-08-13T21:04:35.500
> 
> 标签：android, multithreading, android-button

`Button`当我按住它 3 秒钟时，我需要更改布局，但是当我快速按下一次时，它应该只是播放声音。

在下面的代码中，无论如何都会发出声音（因为在这种情况下没关系）。

我的问题是它**只会**在您第一次使用时更改页面，`Button`无论是按住（更改布局）还是短按（仅播放声音）。因此，如果我按住按钮并更改布局，但然后我返回它不会再次工作。此外，如果使用短按来播放声音，我无法按住按钮来更改布局。

```
final Button b1pad1 = (Button) findViewById(R.id.b1pad1);
b1pad1.setOnTouchListener(new View.OnTouchListener() {

    public boolean onTouch(View v, final MotionEvent event) {
        // TODO Auto-generated method stub
        switch(event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            MediaPlayer mp = MediaPlayer.create(PhotosActivity.this, R.raw.sub);
            mp.start();
            holdTimer = new Thread() {
                public void run() {
                    try {
                        int timer = 0;
                        while (timer<3000) {
                            sleep(100); 
                            if (event.getAction() == MotionEvent.ACTION_UP) { 
                                //checks whether you lifted your finger before 
                                //the 3 seconds.
                                breaked = "no"; 
                                //"no" means "don't change layout"
                                changetobrowser(b1pad1, breaked);
                                break;    
                            }
                            timer = timer + 100;
                        }
                        if (breaked.equals("")){
                            breaked = "go"; //go means "change the layout"
                            changetobrowser(b1pad1,breaked);
                        }
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
            };

            holdTimer.start();
            break;

        case MotionEvent.ACTION_UP:
            // End
            break;
        }

        return false;
    }
});

public void  changetobrowser(Button but, String breaked) {
    if (breaked.equals("go")){
        Intent browseIntent = new Intent(PhotosActivity.this, BrowseScreen.class);
        startActivity(browseIntent); 
    } else {
    }
} 
```

问题可能是什么？这甚至是最简单的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T22:47:24.850

您是否考虑过使用`OnLongClickListener`? 当 a`View`被单击并保持一小会儿时调用它。对于其他情况，您可以使用一个简单的`OnClickListener`，在按下时调用。

更多信息在这里：http: [//developer.android.com/reference/android/view/View.OnLongClickListener.html](http://developer.android.com/reference/android/view/View.OnLongClickListener.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T22:37:43.493

你的方法是完全错误的（当然是国际海事组织）。

除了使用 a`Thread`来跟踪时间，您还可以使用`System.currentTimeMillis()`.

另外，我建议您对该`onTouch()`方法进行一些阅读，以便更好地了解它的工作原理。尤其是`MotionEvent`事件。

# mysql - 无法在 MySQL 集群上设置 IndexMemory 和 DataMemory

> ID：11942295
> 
> 赞同：1
> 
> 时间：2012-08-13T21:04:59.907
> 
> 标签：mysql

我正在 64 位 Debian Linux 上设置 MySQL 集群（版本 7.2.4）。集群有两个管理/SQL 节点和两个数据节点。**每个服务器在/var/lib/mysql-cluster/config.ini**中都有以下内容：

```
[NDBD DEFAULT]
NoOfReplicas=2
DataDir=/var/lib/mysql-cluster
DataMemory=256M
IndexMemory=64M

[MYSQLD DEFAULT]

[NDB_MGMD DEFAULT]

[TCP DEFAULT]

# Management node 1
[NDB_MGMD]
NodeId=1
HostName=192.168.25.10
DataDir=/var/lib/mysql-cluster

# Management node 2
[NDB_MGMD]
NodeId=2
HostName=192.168.25.11
DataDir=/var/lib/mysql-cluster

# Storage node 1
[NDBD]
NodeId=3
HostName=192.168.25.12

# Storage node 2
[NDBD]
NodeId=4
HostName=192.168.25.13

[MYSQLD]
NodeId=5
HostName=192.168.25.10

[MYSQLD]
NodeId=6
HostName=192.168.25.11

[MYSQLD]
[MYSQLD] 
```

文档和我自己对 Google 的研究让我相信这会将数据内存设置为 256 MB，将索引内存设置为 64 MB。但是，当使用此配置启动集群时，这些设置不适用：

```
mysql> SELECT node_id, memory_type, total FROM ndbinfo.memoryusage;
+---------+--------------+----------+
| node_id | memory_type  | total    |
+---------+--------------+----------+
|       3 | Data memory  | 83886080 |
|       3 | Index memory | 19136512 |
|       4 | Data memory  | 83886080 |
|       4 | Index memory | 19136512 |
+---------+--------------+----------+
4 rows in set (0.03 sec) 
```

对于每个节点，数据内存为 80 MB，索引内存为 18 MB，这是 MySQL Cluster 文档中的默认值。

我尝试了一些小的调整，例如将 [NDBD DEFAULT] 更改为 [ndbd default]，但没有任何效果。有谁知道为什么我无法更改这两个设置？

与往常一样，我们将不胜感激任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:06:31.293

使用新配置启动两个管理服务器时：您是否使用 --reload 重新启动管理节点以实际从配置文件加载新配置？如果不使用 --reload ，则将使用先前有效配置的缓存版本。为了让配置被数据节点拾取，它们也必须重新启动。

伯恩德

# java - 加载页面，然后在页面加载时执行 javascript

> ID：11942296
> 
> 赞同：0
> 
> 时间：2012-08-13T21:05:00.533
> 
> 标签：java, javascript, bookmarklet, autologin

我想在 NetBeans 中创建一个按钮，单击该按钮将打开一个网页，等待网页加载，然后登录到该站点。我在这里有一些代码，但我不确定在此之后该怎么做：

```
javascript:(function (){
    window.open("http://www.stackoverflow.com");
    object.onload="LoginToThisSite"
})(); 
```

我还有一个小书签，可以让你自动登录到网站，我只是不知道如何将它与按钮联系起来。

这是我在 NetBeans 中用于按钮的代码：

```
public void actionPerformed(ActionEvent evt) {
    String cmd = evt.getActionCommand();
    if (cmd == "POST") {
        try {
            String url = "http://www.stackoverflow.com";
            java.awt.Desktop.getDesktop().browse(java.net.URI.create(url));
        }
        catch (java.io.IOException e) {
            System.out.println("Couldn't open browser...");
        }
    }
} 
```

我会很感激我能得到的所有帮助，因为我不擅长用 Java 编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:37:02.067

使用 $(document).ready()

此函数将在文档加载后执行

（jQuery）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T14:15:22.193

由于您无权访问您尝试进行身份验证的网站，因此您可以做的最好的事情是等待任意时间长度（在本例中为 30000 毫秒）：

```
<body onload="setTimeout(authenticationAttempt,30000);">
    <script>
        function authenticationAttempt() {
            // add your code to login here
            alert('after 30 seconds i assume the page is loaded');
        }
    </script>
</body> 
```

这是一个 jsfiddle 示例，它允许 bing.com 在运行其他代码之前加载 5 秒。

[http://jsfiddle.net/DaveAlger/CFLh2/](http://jsfiddle.net/DaveAlger/CFLh2/)

如果您尝试验证的网站是公开的，您应该发布一个链接，因为我仍然认为除非您有权更改学校网站上的代码，否则您正在尝试的内容将不被允许。

# mercurial - 如何在 Mercurial 中列出已配置的 url？

> ID：11942301
> 
> 赞同：2
> 
> 时间：2012-08-13T21:05:22.177
> 
> 标签：mercurial

显然我可以`cat .hg/hgrc`在 *nix 上执行类似的操作来查看我配置的路径，但是有内置的 Mercurial 命令吗？谷歌搜索“hg list configured urls”似乎没有任何有用的结果，也没有`hg help urls`（我注意到）。

是否有任何命令可以显示我配置的网址？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T22:02:59.990

`hg paths`就是你要找的。`hg help paths`会给你更多的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T20:32:23.960

正确的答案确实`hg paths`是[顺利雷鬼](https://stackoverflow.com/users/881190/smooth-reggae)写的，但你知道，还有[`showconfig`command](http://selenic.com/hg/help/showconfig)，它将显示组合配置文件的任何部分。

使用的意义不大`hg showconfig paths`，打字时间较长，但对于快速检查其他配置设置的值很有用。

# ruby-on-rails - Rails & Devise：电子邮件确认文本字段？

> ID：11942305
> 
> 赞同：7
> 
> 时间：2012-08-13T21:05:42.403
> 
> 标签：ruby-on-rails, devise

我正在使用 Rails 3.2 和设计。我想知道 Devise 是否提供了一个“电子邮件（地址）确认”字段，就像密码确认一样，供用户输入密码字段，然后在网站发送确认电子邮件或处理注册注册之前输入密码确认字段. 如果不是，我必须添加一个 email_confirmation 并验证用户模型（在 rails g 设计用户之后）吗？

提前致谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-21T19:57:29.083

我还没有发现 devise 是否符合您的要求（问题是指类似于 :password_confirmation 的第二个 :email_confirmation 字段，'confirmable' 似乎仅与确认*链接*有关）。我也必须这样做，并且我想出了如何使用内置的活动记录验证（rails 3.2.8，devise 2.1.2）来做到这一点：

1.  在您的模型中添加到`confirmation: true`您的电子邮件验证和.`:email_confirmation``attr_accessible`
2.  在您的视图中添加一个`:email_confirmation`字段。

例如，在您的模型中（不假设其他验证或 attr_accessibles）：

```
attr_accessible :email, :email_confirmation
validates :email, confirmation: true 
```

这将使用内置的活动记录“确认”验证（与密码相同）。最后，在您的视图中，您需要添加以下内容：

```
<div><%= f.label :email_confirmation %>
<%= f.email_field :email_confirmation %></div> 
```

可能有一种更清洁的方法，但这对我有用。但是，到目前为止，我唯一的设计经验是将它添加到现有模型中，在它为您生成模型时我没有使用它（大概是相同的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-01-22T16:11:13.363

我面临着同样的问题。

**这是我解决它的方法**

[来自官方 RailsGuide](https://guides.rubyonrails.org/active_record_validations.html#confirmation)

当您有两个应该接收完全相同内容的文本字段时，您应该使用此帮助程序。例如，您可能想要确认电子邮件地址或密码。此验证创建一个虚拟属性，其名称是必须附加“_confirmation”确认的字段名称。

```
class Person < ApplicationRecord
  validates :email, confirmation: true
end 
```

在您的视图模板中，您可以使用类似

```
<%= text_field :person, :email %>
<%= text_field :person, :email_confirmation %> 
```

`email_confirmation`仅当is not时才执行此检查`nil`。要要求确认，请确保为确认属性添加存在检查（我们将`presence`在本指南的后面部分查看）：

```
class Person < ApplicationRecord
  validates :email, confirmation: true
  validates :email_confirmation, presence: true
end 
```

还有一个`:case_sensitive`选项可用于定义确认约束是否区分大小写。此选项默认为 true。

```
class Person < ApplicationRecord
  validates :email, confirmation: { case_sensitive: false }
end 
```

此帮助程序的默认错误消息是“**不匹配确认**”。

根据我的实验，使用[官方 RailsGuide](https://guides.rubyonrails.org/active_record_validations.html#message)，

如果您想将确认消息更改为，**必须正确给出电子邮件确认**，然后使用这种方式添加**消息**选项：

```
class Person < ApplicationRecord
  validates :email, confirmation: true
  validates :email_confirmation, presence: { message: "must be given correctly" }
end 
```

就这样。

**我希望这有帮助**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-16T18:30:59.737

与原始答案相比，新版本的 Rails 有一些细微差别。只是想我会添加这个以防它帮助其他人。

将`attr_accessor`for **email_confirmation**添加到您的模型并根据**email_confirmation字段验证****电子邮件**字段。除非您已将电子邮件字段配置为区分大小写，否则在验证时将 case_sensitive 设置为 false 。**`{ case_sensitive: false }`**

 **`app/models/user.rb`

```
class User < ApplicationRecord
  attr_accessor :email_confirmation
  validates :email, confirmation: { case_sensitive: false }
end 
```

在注册参数上允许**email_confirmation**。

`app/controllers/users/registrations_controller.rb`

```
def configure_sign_up_params
  devise_parameter_sanitizer.permit(:sign_up, keys: [:email_confirmation])
end 
```

将**email_confirmation**字段添加到您的注册表单。

`app/views/devise/registrations/new.html.erb`

```
<%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
  <%= render 'devise/shared/error_messages', resource: resource %>

  <div class="field">
    <%= f.label :email %>
    <%= f.email_field :email, autofocus: true, autocomplete: 'email', required: true %>
  </div>

  <div class="field">
    <%= f.label :email_confirmation %>
    <%= f.email_field :email_confirmation, required: true %>
  </div>

  <!-- other fields -->
<% end %> 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-13T23:16:00.047

假设您已安装 gem，当您执行此功能时：

```
rails generate devise:install 
```

它将生成您的迁移文件，其中将包含您需要朝您所指的方向前进的 email_confirmation 内容。您所要做的就是*不要*将其注释掉。否则，我会注释掉我不需要的所有其他内容。

您所指的模块称为可**确认的**

假设你还没有找到这个，这个链接将解释其余的：

[如何使用 Devise 设置电子邮件确认？](https://stackoverflow.com/questions/8186584/how-do-i-set-up-email-confirmation-with-devise)**

# macos - 不支持 -i 参数时，如何使用 grep 和 sed 替换多个文件中的字符串？

> ID：11942306
> 
> 赞同：12
> 
> 时间：2012-08-13T21:05:47.030
> 
> 标签：macos, unix, sed, grep

我试过这个命令，

```
grep '/static' dir/* | xargs sed -i 's/\/static//g' 
```

但我使用的 sed 版本不支持 -i 参数。

要将文件中的字符串替换为与输出相同的输入文件，我通常这样做：

```
sed 's/\/static//g' filename.txt > new_filename.txt ; mv new_filename.txt filename.txt 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-14T02:24:40.027

OS X 的版本`sed`确实支持`-i`，但它*需要*`""`一个参数来告诉它备份文件（或不备份）使用什么文件扩展名。顺便说一句，您只想`grep -l`获取文件名。

```
grep -l '/static' dir/* | xargs sed -i "" 's/\/static//g' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T21:14:58.857

Use perl:

```
$ perl -pi.bak -e 's@/static@@g' dir/* 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T21:33:22.040

You can do this using a loop:

```
for file in $(grep -l '/static' dir/*) ; do
    sed 's/\/static//g' $file > $file.$$ && mv $file.$$ $file
done 
```

I use the `.$$` suffix (`$$` is the process id of the current shell) to avoid collisions with existing file names, and `&&` rather than `;` to avoid clobbering the input file if the `sed` command fails for some reason. I also added `-l` so grep prints file names rather than matching lines.

Or you can install GNU sed (I'm not sure exactly how to do that on OSX).

# php - PHP Session + MySQL 资源

> ID：11942308
> 
> 赞同：2
> 
> 时间：2012-08-13T21:05:55.150
> 
> 标签：php, mysql

是否可以将 mysql 资源提供给 $_SESSION 变量？

```
//mysqldb.inc.php
class mySqlDb
{
    private $link;

    public function __construct($_host = '', $_db = '', $_user = '', $_pwd = '')
    {
           $link = mysql_pconnect(...);
    }

    public function query($data)
    {
           $r = mysql_query($data, $this->link);
           return $r;
    }
}

//index.php
session_start();
include_once('mysqldb.inc.php');

$sqlobj = new mySqlDb();
$sqlobj->dbconnect($db_host, $db_name, $db_user, $db_pwd);
$_SESSION['mysqldb'] = $sqlobj;

//check.php
session_start();
include_once('mysqldb.inc.php');

$sqlobj = $_SESSION['mysqldb'];
$sqlobj->query(...); 
```

`$sqlobj->query(...)`返回

> 致命错误：main()：脚本试图执行方法或访问不完整对象的属性。请确保您尝试操作的对象的类定义“mySqlDb”在调用 unserialize()*之前*已加载或提供 __autoload() 函数以加载 D:\apache\www\check.php 中的类定义第 4 行`

如果我使用`$_SESSION['mysqldb'] = serialize($sqlobj)`并且`$sqlobj = unserialize($_SESSION['mysqldb'])`我有这个错误：

> 警告：mysql_query() 期望参数 2 是资源，在 D:\apache\www\mysqldb.inc.php 中给出的整数...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T21:09:07.707

你不能持久化 php 资源。

就是这样——你不能。所以每次都需要连接数据库。

[`$_SESSION`文档](https://www.php.net/manual/en/intro.session.php)说明：

> 因为会话数据是序列化的，所以资源变量不能存储在会话中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T21:08:29.257

你有这个：

```
$sqlobj = new mySqlDb(); 
```

但是你这样做：

```
$_SESSION['mysqldb'] = $sql; 
```

即你正在设置`$_SESSION['mysqldb']`一个不存在的对象。试试`$sqlobj`吧。

# java - Java：列表没有通过套接字正确发送？

> ID：11942312
> 
> 赞同：2
> 
> 时间：2012-08-13T21:06:10.803
> 
> 标签：java, list, sockets, object, client

我有另一个套接字问题。与我的其他问题相比，这实际上相当奇怪。好的，所以我有一个客户端连接到服务器，该服务器通过 ObjectOutputStream 以恒定速率发送数据并通过 ObjectInputStream 接收数据。我有一个包含玩家坐标、游戏模式等的玩家对象列表。当客户端移动其玩家时，更新的坐标会发送到服务器，并且列表中的玩家对象也会更新。嗯，应该是更新了...我在服务器端打印出更改的坐标，但是当我将列表发送给玩家打印输出时，坐标并没有改变。这是播放器类：

```
public static class Player implements Serializable {
    private static final long serialVersionUID = 8841477887428285969L;
    public int x, y, gamemode, ID;
    public String name;
    public Player(int x, int y, int gamemode, int ID, String name) {
        this.x = x;
        this.y = y;
        this.gamemode = gamemode;
        this.ID = ID;
        this.name = name;
    }

    public void setPosition(int x, int y) {
        this.x = x;
        this.y = y;
    }
} 
```

服务器接收更新的坐标并打印前后的位置：

```
Package.Client_Server main_packet = (Package.Client_Server) obj;
System.out.println(S00.getPlayerByID(ID).x + ", " + S00.getPlayerByID(ID).y);
S00.getPlayerByID(ID).setPosition(main_packet.x, main_packet.y);
System.out.println(S00.getPlayerByID(ID).x + ", " + S00.getPlayerByID(ID).y); 
```

这里是客户端打印从服务器发送的自己的坐标的地方。 **问题出在这里...**更新后的坐标没有显示在这里，但仍然是旧坐标。难道我做错了什么？List 中仍然只有一个对象，因此它不仅仅是在某处创建更多对象......

```
Package.Server_Client main_packet = (Package.Server_Client) obj;
ID = main_packet.client_ID;
C00.players = main_packet.players;
System.out.println(C00.players.get(ID).x + ", " + C00.players.get(ID).y);
System.out.println(main_packet.players.get(ID).x + ", " + main_packet.players.get(ID).y); 
//I tried printing the list directly from the package as well but it isn't updated either... 
```

哎呀，我什至会显示从服务器发送到包含列表的客户端的包：

```
public static class Server_Client implements Serializable {
    private static final long serialVersionUID = 5198487406288606819L;
    public int client_ID;
    public int online;
    public List<Player> players;
    public Server_Client(int client_ID, int online, List<Player> players) {
        this.client_ID = client_ID;
        this.online = online;
        this.players = players;
    }
} 
```

我的整个问题是更新的坐标在服务器端的玩家列表中，但是一旦列表被发送到客户端，更新的数据就不再更新......整个过程开始之前都是一样的。这是套接字如何工作的问题，还是我只是可怕地陷入了一个小错误？List 不可能是问题，因为我将它交换为一组 Player 对象，但它仍然无法在客户端正确读取。帮助？

编辑：也可以看到这种效果，因为当另一个客户端连接到服务器时，客户端 1 看不到客户端 2，因为列表没有更新，但客户端 2 可以看到客户端 1，就像他第一次连接到服务器时一样。客户端 1 的控制台总是说他是唯一连接的玩家（列表中有 1 个项目），而控制台 2 总是说有 2 个玩家连接（即使客户端 1 已断开连接）。因此，该列表不会被更新。那么是什么原因造成的呢？

这是方法'getPlayerByID（int ID）'：

```
public static Package.Player getPlayerByID(int ID) {
    for(int i = 0; i < players.size(); i++) {
        if(players.get(i).ID == ID) {
            return players.get(i);
        }
    }
    throw new NoSuchElementException("No player has the ID: " + ID);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T21:24:19.930

确保您是否将相同的对象引用传递给您用来执行此操作的单个实例，`ObjectOutputStream`或者[`ObjectOutputStream.writeUnshared(Object)`](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectOutputStream.html#writeUnshared%28java.lang.Object%29)在[`ObjectOutputStream.reset()`](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectOutputStream.html#reset%28%29)该对象的写入之间调用。

如果你不这样做，`ObjectOutputStream`将看到对象已经写入并写入对先前序列化表单的引用，而不是在你第一次编写它时，这将是对象的序列化状态。

# python - 缺失值掩盖了数组相关性（numpy.ma）

> ID：11942313
> 
> 赞同：3
> 
> 时间：2012-08-13T21:06:14.073
> 
> 标签：python, arrays, numpy, missing-data

我正在尝试使用 numpy.ma.corrcoef 在存在缺失数据的情况下计算相关性。

根据文档：除了处理丢失的数据外，此功能与`numpy.corrcoef`. 有关更多详细信息和示例，请参阅`numpy.corrcoef`。

这是一个双变量数据集，其中只有第一个和第二个点具有两个变量的数据。

```
array([[ 0.00494576, -0.01331578],
   [-0.00146498, -0.01349548],
   [ 0.00430321,         nan],
   [-0.00937105,         nan],
   [        nan, -0.01356873],
   [        nan, -0.01375538],
   [        nan, -0.00277393],
   [        nan,  0.0082988 ],
   [        nan,  0\.        ],
   [        nan,  0.00275103],
   [        nan,  0.00547947],
   [        nan, -0.01375538],
   [        nan,  0.0110194 ],
   [        nan, -0.00549452],
   [        nan,  0.01910017],
   [        nan, -0.02462505],
   [        nan, -0.01676017],
   [        nan,  0.0112046 ],
   [        nan,  0.01108045],
   [        nan,  0.01639381],
   [        nan,  0.01078178],
   [        nan, -0.01078178]]) 
```

当我将其转换为掩码数组（np.ma.masked_array(t,np.isnan(t)) ，其中 t 是上面的数组）并在其上运行 np.ma.corrcoef （rowvar=False）时，变量以 -86.52 的形式给出（绝对值，而不是百分比！）。而仅在前两个点上运行 np.corrcoef 会产生 1 的相关性（再次是绝对值）。根据文档，后一个值是我认为我应该从第一次操作中得到的值。

我的 Python 版本（Mac OS X.6.8 上的 Enthought 64 位 PyLab）信息如下，我使用的是 Numpy 版本 1.6.1。

Python 2.7.3 |EPD 7.3-1（64 位）| （默认，2012 年 4 月 12 日，11:14:05）输入“copyright”、“credits”或“license”以获取更多信息。

请告知我在这里缺少的东西！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T15:05:33.133

我认为这可能是 numpy.ma.corrcoef 中的一个错误（或者更确切地说可能是在 np.ma.extras._covhelper 中，我认为它不会正确地将掩码从一列传播到另一列，但对于单个数组输入，但是也许我看错地方了）。

使用`np.ma.corrcoef(b[:,0], b[:,1])`并创建错误报告......`np.ma.corrcoef(b[:,0], b[:,1])`给出了预期的结果，因此它是一个简单的解决方法，直到它被修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:27:52.383

作为`a`您的示例数组，我有：

```
In [1]: np.ma.corrcoef(a[:2])
Out[1]: 
masked_array(data =
 [[1.0 1.0]
 [1.0 1.0]],
             mask =
 [[False False]
 [False False]],
       fill_value = 1e+20) 
```

我正在使用 numpy 版本 1.6.2

# magento - 如何在购物车中获取捆绑商品

> ID：11942317
> 
> 赞同：1
> 
> 时间：2012-08-13T21:06:49.830
> 
> 标签：magento, cart

我正在尝试制作一个自定义购物车页面，并且需要一些帮助来拉动构成捆绑产品的各个 sku。

换句话说，我如何从捆绑产品的单个 sku 的“报价”对象中提取出来。

任何帮助将不胜感激。谢谢， 逾越节

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T21:46:48.347

```
$quote->getProduct()->getData('sku'); 
```

# android - 我可以使用 SQLiteManager 确定 Android 数据库版本吗？

> ID：11942318
> 
> 赞同：0
> 
> 时间：2012-08-13T21:06:51.500
> 
> 标签：android, sqlite, version

根据[this question](https://stackoverflow.com/questions/3707797/where-does-android-store-sqlite-database-version)，Android数据库文件包含版本号。但是我不知道如何使用 SQLiteManager for Firefox 找到它。

是否可以使用此工具查看版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:14:18.580

@zapl 写道：

> `execute PRAGMA user_version`; 在同一个地方，您可以执行其他 SQLite 查询 - 这将向您显示 SQLiteOpenHelper 设置的版本

# c# - 使用 WCF 的自定义控件打破了 VS2010 设计器视图

> ID：11942319
> 
> 赞同：0
> 
> 时间：2012-08-13T21:06:51.880
> 
> 标签：c#, visual-studio-2010, wcf, silverlight

我为 Silverlight 网站设计了一个自定义控件。当我运行调试器或释放它并通过 http 将其拉起时，该控件可以正常工作。在控件本身的设计器视图中，它也显示得很好。

当我将控件作为控件添加到 MainPage.xaml 应用程序时，问题就出现了。设计师打破说：并且发生了未处理的异常。System.NullReferenceException 对象引用未设置为对象的实例。

控件在运行其 Loaded() 事件时从 WCF 服务中提取其数据。WCF 服务位于远程 IIS 服务器上，而不是本地主机上。

我想控件正在破坏，因为它无法在设计器视图中从服务中提取数据。有没有办法解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:26:56.240

您可以使用[DesignerProperties.IsInDesignTool](http://msdn.microsoft.com/en-us/library/system.componentmodel.designerproperties.isindesigntool(v=vs.95).aspx)属性。`true`如果您的代码在 VS 设计器或 Expression Blend 等设计器工具中运行，则此属性具有值，`false`否则。

在您的`Loaded`事件处理程序中，您可以读取此属性的值，并且仅当此属性的值为 时才调用您的 WCF 服务`false`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T00:01:00.713

除了@Luke 所说的之外，您实际上应该解决问题的核心：您的数据加载代码在加载失败时抛出。也许只是优雅地处理错误并捕获错误并返回空数据？通常，对于用户体验而言，什么都不显示（或显示消息）比显示崩溃更好。您的控制现在也会在真正的发布模式下崩溃 - 即，如果数据连接失败。

IsInDesignTool 属性仍然非常方便：一旦加载数据失败，在返回空数据集之前，检查 IsInDesignTool 是否为真（如 Luke 所说） - 如果是，则返回**硬编码示例**数据集。这样，当 contorl 无法加载并且检测到 VisualStudio 或 Blend 时，它将显示一些测试数据，并在设计视图中显示为已填充内容。

# .net - 是否可以在运行时编辑 .NET 可执行文件的资源？

> ID：11942320
> 
> 赞同：0
> 
> 时间：2012-08-13T21:06:56.587
> 
> 标签：.net, resources, runtime, edit

我正在开展一个项目，以确保我所有的密码安全。我不想使用另一个文件来保存密码，我希望它是独立的。因此，在运行时（假设当我按下应用按钮或 FormClosing 事件等时）我需要编辑将保留加密密码的资源。有可能吗？如果可以，怎么办？如果不可能，最好的选择是什么？顺便说一句，我也不想使用注册表，因为它会破坏可移植性。

提前致谢！

编辑：资源是指嵌入的资源。

编辑：在杰森的回答之后，我需要稍微改变一下问题；有什么方法可以将任何内容写入正在运行的可执行文件本身？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T21:13:29.340

[本文](http://support.microsoft.com/kb/319292)展示了如何使用流访问程序集中的嵌入式资源。可以让您充分了解如何编辑您提到的密码资源。

编辑; 啊，更好：

[如何读取嵌入式资源文本文件](https://stackoverflow.com/questions/3314140/how-to-read-embedded-resource-text-file)

编辑：

只需使用[StreamWriter](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx)例如

```
using (Stream stream = Assembly.GetExecutingAssembly()
                               .GetManifestResourceStream("file1.txt"))
using (StreamWriter sw = new StreamWriter(stream))
{
    sw.Write("This is a test");
} 
```

编辑：

好的，看起来像一个死胡同：

[如何在 C# 中读取并写入嵌入式资源](https://stackoverflow.com/questions/3736267/how-to-read-then-write-to-an-embedded-resource-in-c-sharp)

> 嵌入式资源被编译到您的程序集中，您无法编辑它们。

# c# - Linq 将具有 xml 属性的对象集合转换为表示 xml 元素的对象集合？

> ID：11942321
> 
> 赞同：0
> 
> 时间：2012-08-13T21:07:05.197
> 
> 标签：c#, linq, linq-to-xml, linq-to-objects

我有一个`IEnumerable<Item>`where Item 有一个名为“widgets”的属性，其中包含 xml 作为字符串。xml 包含每个小部件的元素，每个小部件可以包含一个名为“foo”的可选元素。例如：

```
<widgets>
    <widget code="A">
        <foo>1</foo>
    </widget>
    <widget code="B" />
</widgets> 
```

我可以将其展平`IEnumerable<Item>`为代表小部件的匿名类型的 IEnumerable 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:20:41.760

I'm not sure if `foo` can be repeating element or not, but in this case it's returned as an `Enumerable<String>`, which is simple enough to change.

The setup (here there are two items, with the same `Widgets` XML):

```
public class Item
{
    public string Name;
    public string Widgets;
}

var xml = "<widgets>\r\n    <widget code=\"A\">\r\n        <foo>1</foo>\r\n    </widget>\r\n    <widge" +
"t code=\"B\" />\r\n</widgets>";

var item1 = new Item {Name = "I1", Widgets = xml};
var item2 = new Item {Name = "I2", Widgets = xml};
var items = new Item[] {item1, item2}.AsEnumerable(); 
```

The widget selection process:

```
var widgets = 
    from item in items
    from widget in XElement.Parse(item.Widgets).Elements("widget")
    select new {
        Name = item.Name,
        Code = widget.Attribute("code").Value,
        Foo = widget.Elements("foo").Select(f => f.Value)
    }; 
```

That gives you 4 items (I1 A, I1 B, I2 A, I2 B) with Name (from Item) and Code and Foo (from the XML) set correctly.

If you want `foo` to be a single element, the change is as follows (setting `FirstOrDefault` basically), which will give you nulls for when `foo` isn't around:

```
var widgets = 
    from item in items
    from widget in XElement.Parse(item.Widgets).Elements("widget")
    select new {
        Name = item.Name,
        Code = widget.Attribute("code").Value,
        Foo = widget.Elements("foo").Select(f => f.Value).FirstOrDefault()
    }; 
```

# delphi - DCC32 编译器配置文件和命令行参数优先级

> ID：11942322
> 
> 赞同：5
> 
> 时间：2012-08-13T21:07:12.247
> 
> 标签：delphi, delphi-5, dcc32

我正在尝试第一次使用 DCC32 通过命令行构建我的 Delphi 应用程序。我对我的项目的配置文件几乎没有疑问。通过 IDE 编译时，我必须将一些搜索路径添加到项目中。当我删除它们时，编译失败。

现在如果我通过命令行编译它是否需要指定配置文件详细信息或搜索路径参数？

没有任何参数：

```
dcc32.exe   project1.dpr 
```

带有一些参数：

```
dcc32.exe -u%Shared% -ND:\out project1.dpr 
```

我有以下疑问：

1.  如果未提及配置文件详细信息，那么它将自动从 project.cfg（由 IDE 创建）中获取设置？
2.  如果是，那么如果我在命令行中提到了 -U,-N 选项，那么它将覆盖 .cfg 文件中的所有设置？
3.  这个问题听起来很愚蠢，但想知道在 IDE 上通过命令行编译有什么用？

请提供一些帮助来解决我的疑问。任何与 dcc32 编译选项相关的信息将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T21:21:42.580

***1\. - 如果项目配置文件未在命令行选项中指定，是否会从 IDE 生成的项目 cfg 文件中获取设置？***

是的。

* * *

***2\. - 当我在命令行中使用 -U、-N 选项时，会覆盖项目 cfg 文件中的所有设置吗？***

否。尽管命令行选项优先，但只有您指定的那些选项会覆盖项目 *.cfg 文件中的设置，而不是整个配置

* * *

***3\. 命令行编译和IDE编译有区别吗？***

不。谈论Delphi 5没有区别。在我看来，命令行方式*只是*为您带来了通过命令行批处理自动化构建过程的可能性，而无需打开IDE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:21:28.817

已经有一段时间了，但我相信您对命令行与 .cfg 文件的假设是正确的。您可以自己验证这一点，方法是在 .cfg 中设置一个路径并在命令行上指定不同的路径，例如，在 .cfg 引用的文件中有错误，然后查看编译器是否遇到错误。

从命令行编译对于自动构建系统很方便，但在其他方面与通过 IDE 编译相同。

# c# - EF AddOrUpdate 种子不更新子实体

> ID：11942325
> 
> 赞同：16
> 
> 时间：2012-08-13T21:07:19.797
> 
> 标签：c#, entity-framework, entity-framework-migrations

我在播种数据时遇到了一些问题，我能够用一个非常小的应用程序重现该问题。
鉴于您有此种子方法：

```
 protected override void Seed(JunkContext context)
    {
        context.Junks.AddOrUpdate(x => x.Name,
            new Junk()
            {
                Name = "BANANAS!!",
                Item = new JunkItem()
                {
                    Name = "APPLES!!!"
                }
            }
        );
    } 
```

当您在 PMC 中运行 update-database 时，所有实体都会成功创建。好的。
但是当你想去更新数据库时，说你的种子方法现在是这样的：

```
 protected override void Seed(JunkContext context)
    {
        context.Junks.AddOrUpdate(x => x.Name,
            new Junk()
            {
                Name = "BANANAS!!",
                Item = new JunkItem()
                {
                    Name = "ORANGES!!!"
                }
            }
        );
    } 
```

子实体未更新。似乎我们可以重新播种的唯一方法是擦除数据库并重新播种所有内容。我想我明白为什么这不能像我期望的那样工作，但也许有人可以指出我正确的方向来相应地更新这个种子方法。我知道我可以写出 context.JunkItems。(...) 但这似乎会超出“AddOrUpdate”的全部目的。

我想我必须为每个子实体定义“键”。示例：“垃圾”获取 x => x.Name 但“垃圾项目”当前必须设置“更新密钥”。我假设这是问题所在，但我将如何处理呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-14T09:50:12.813

EF 中没有命令自动更新子级 -`AddOrUpdate`没有区别，它在内部检查顶级实体的存在（`Junk`在您的情况下），如果不存在则插入或更新它。在这种情况下，子项的插入是一个副作用，因为当`AddOrUpdate`内部调用`Add`它时，它会添加整个对象树。`AddOrUpdate`确实比人们预期的要少得多，但即使有这么少量的魔法，它也应该只用于迁移播种，因为它是非常昂贵的操作（每个实体的额外往返数据库和大量反射）。

必须始终单独更新子级 - 它可能需要您自己对数据库进行单独查询才能找到正确的子级和常见的 EF 更新。

# android - AIR ArgumentError: 错误 #2004: - Android

> ID：11942327
> 
> 赞同：2
> 
> 时间：2012-08-13T21:07:22.497
> 
> 标签：android, air, flash-cs6

**收到此错误：**

```
ArgumentError: Error #2004: One of the parameters is invalid.
    at Error$/throwError()
    at flash.filesystem::File/set nativePath()
    at flash.filesystem::File()
    at TestingRandomSound_fla::MainTimeline/GetContents()[TestingRandomSound_fla.MainTimeline::frame1:22]
    at TestingRandomSound_fla::MainTimeline/frame1()[TestingRandomSound_fla.MainTimeline::frame1:47]
    at runtime::ContentPlayer/loadInitialContent()
    at runtime::ContentPlayer/playRawContent()
    at runtime::ContentPlayer/playContent()
    at runtime::AppRunner/run()
    at AppEntryCommon/run()
    at global/runtime::AndroidMobileDeviceAppEntry() 
```

从这段代码：

```
import flash.desktop.NativeApplication;
import flash.events.Event;
import flash.display.Sprite;
import flash.display.StageAlign;
import flash.display.StageScaleMode;
import flash.filesystem.File;
import flash.ui.Multitouch;
import flash.ui.MultitouchInputMode;

    var myDocuments:File = new File(File.applicationDirectory.nativePath+"\\sample"); 
```

它适用于我的 Air Desktop，但不适用于 Android 设备。我包含了文件夹示例，但它仍然无法正常工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T15:27:00.000

这行得通。但显然应用程序目录中的文件是只读的

```
var prefsFile:File = File.applicationDirectory;
prefsFile = prefsFile.resolvePath("assets/xml/preferences.xml"); 
```

我创建了一个 xml 首选项文件。但是如果我想在上面写，我必须将它复制到文档目录中......

# java - Grails createCriteria MissingMethodException

> ID：11942328
> 
> 赞同：3
> 
> 时间：2012-08-13T21:07:24.400
> 
> 标签：java, hibernate, grails

我们有一段代码可以选择一大堆用户 ID（200,000+）。然后代码循环通过每个获取更多信息。

```
 def crit = Subscription.createCriteria()
        def result = crit.get {
            projections {
                rowCount()
            }
            eq('userId', userId)
            eq('deptId', deptId)
            ge('endDate', new Date())
        } 
```

我们只想知道是否存在“有效”的记录。这工作正常。直到我们在阵列中进一步创下纪录。然后 Grails 抛出以下异常：

```
2012-08-13 16:00:45,518 ERROR subscription.service.SubscriptionServiceImpl(?:?) - No signature of method: static com.me.subscription.model.Subscription.createCriteria() is applicable for argument types: () values: []
groovy.lang.MissingMethodException: No signature of method: static com.me.subscription.model.Subscription.createCriteria() is applicable for argument types: () values: [] 
```

为什么这个循环对数千条记录很好，然后弹出这个异常？

通过 IntelliJ 中的调试器查看代码表明所有参数都是有效的。但是当我运行一个表达式时：

```
def asd = Subscription.createCriteria() 
```

方法不见了。这不是一个模拟的方法。这是在生产中运行的。我是否达到了一些顶级边界？

# ruby-on-rails - 组合查询后未定义的方法

> ID：11942331
> 
> 赞同：0
> 
> 时间：2012-08-13T21:07:50.540
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我的模型是：

```
class City < ActiveRecord::Base
  belongs_to :region
  has_many  :activities
  has_many  :restaurants
end

class Activity < ActiveRecord::Base
    belongs_to :city
end 
```

在城市索引页面上，我想根据每个循环中的布尔值显示所有城市的活动和餐厅。

我的城市管理员：

```
def index 
@region = Region.find(params[:region_id])
@cities = @region.cities

@activities = @cities.activities.find_all_by_homepage_city(true)
@restaurants = @city.restaurants.find_all_by_homepage_city(true)
@activities_restaurants = @activities + @restaurants
end 
```

查看城市索引页面

```
- @activities_restaurants.each do |b|
              %li 
                =link_to b.name, polymorphic_path([@region, @city, b]) 
```

我收到错误消息“未定义的方法‘活动’”我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:27:15.157

此行导致错误：

```
@activities = @cities.activities.find_all_by_homepage_city(true) 
```

您不能调用@cities.activities，而是执行以下操作：

通过关联添加 has_many 到 Region

```
class Region < ActiveRecord::Base
  has_many :activities, :through => :cities
end 
```

然后你就可以打电话了：

```
@activities = @region.activities.find_all_by_homepage_city(true) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:16:04.597

Is @city set somewhere else? Not seeing it in the code here.

I would try simplifying your code. If you reduce @activities_restaurants to just @activities or @restaurants, rather than both, does either work?

That'll get you started at least.

# ios - iOS如何实现这种图像效果（看图）

> ID：11942332
> 
> 赞同：0
> 
> 时间：2012-08-13T21:07:50.530
> 
> 标签：ios, image, effect

嘿，伙计们，我正在构建一个 iphone 应用程序，在其中显示带有几个图像和信息的列表，就像应用程序商店一样。现在我正在尝试实现这样的效果：![在此处输入图像描述](../Images/3213028ca141b5253b1b0b07e709a9c4.png)

看看应用程序图像，他们喜欢这种漂亮的“3D 感觉”，还有一些阴影。我怎样才能做到这一点？是否有任何框架可以使这个过程变得简单？它不需要看起来相同，但我想找到一种方法让我的徽标更加清晰和闪亮。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T21:13:57.827

是的，它被称为 CoreAnimation。

例如，如果您想为 UIView 实例提供阴影效果，请使用以下命令：

```
#import <QuartzCore/QuartzCore.h>

view.layer.shadowOffset = CGSizeMake(8, 8);
view.layer.shadowColor = [UIColor blackColor].CGColor;
view.layer.shadowOpacity = 0.667;
view.layer.shadowRadius = 4; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:26:35.827

现在你可以在 iOS 上使用 Core Image 过滤器，“闪亮”效果更容易实现：

[https://developer.apple.com/library/mac/#documentation/graphicsimaging/Conceptual/CoreImaging/ci_tasks/ci_tasks.html](https://developer.apple.com/library/mac/#documentation/graphicsimaging/Conceptual/CoreImaging/ci_tasks/ci_tasks.html)

# facebook - 通过具有权限的 API 将 Facebook 应用程序添加到页面

> ID：11942335
> 
> 赞同：0
> 
> 时间：2012-08-13T21:07:57.787
> 
> 标签：facebook, facebook-c#-sdk

如何通过具有 Publish_stream 权限的 API 将应用程序添加到页面（我已创建）？

这是迄今为止我使用 app.js 尝试过的一系列事情。使用页面访问令牌代码将应用程序添加到页面正在将应用程序添加到页面应用程序部分，但无法添加“publish_stream,manage_pages”权限。

登录 Facebook

```
private const string Scope = "publish_stream,manage_pages";
   FacebookClient _fb = new FacebookClient();
   var fbLoginUrl = _fb.GetLoginUrl(
                new
                {
                    client_id = AppId,
                    client_secret = Appsecret,
                    redirect_uri = RedirectUri,
                    response_type = "code",
                    scope = Scope,
                    state = state
                }); 
```

获取短期访问令牌

```
if (Request.QueryString["code"] != null)
            code = Request.QueryString["code"];
           var result = _fb.Post("oauth/access_token",
                                  new
                                  {
                                      client_id = AppId,
                                      client_secret = Appsecret,
                                      redirect_uri = RedirectUri,
                                      code = code,
                                      scope = Scope,
                                      response_type="token"
                                  }); 
```

获取长寿命访问令牌

var result1 = _fb.Post("oauth/access_token", new { client_id = AppId, client_secret = Appsecret, grant_type = "fb_exchange_token", fb_exchange_token= Session["fb_access_token"] as string });

获取页面访问令牌

```
dynamic accounts = _fb.Get("me/accounts"); 
```

使用页面访问令牌将应用程序添加到页面

```
var sResult = _fb.Post("<PAGE-ID>/tabs",
                                                    new
                                                    {
                                                        app_id = AppId,
                                                        access_token = <PAGE ACCESS TOKEN>,
                                                        scope = Scope
                                                    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T00:36:48.387

从您的评论看来，您正试图将应用程序“作为”发布到页面上——这是不可能的。您需要使用从页面管理员检索到的页面访问令牌发布，并且此页面访问令牌允许您代表页面发布帖子。应用程序不能“作为自己”发布。

# php - php自定义数组排序季节

> ID：11942339
> 
> 赞同：1
> 
> 时间：2012-08-13T21:08:02.107
> 
> 标签：php, arrays, sorting

我有一个数组：

```
$a = array("Freshman Spring" => 3, "Freshman Winter" => 2, "Freshman Summer" => 4, "Freshman Fall" => 1); 
```

每个学年会有不同的数组，但没有数组会混合 fre、soph 等年份。

我的问题是我需要按照学校的季节（秋季、冬季、春季、夏季）对这个数组进行排序。我尝试使用 uksort 但我的代码实际上什么也没做，因为无论如何它都会以相同的方式排序。

```
function cmp($a, $b) {
    $a = preg_replace('@^(freshman|sophomore|junior|senior) @', '', $a);
    $b = preg_replace('@^(freshman|sophomore|junior|senior) @', '', $b);
    return strcasecmp($a, $b);
}

uksort($a, "cmp"); 
```

我明白了：

```
Array
(
    [Freshman Fall] => 1
    [Freshman Spring] => 3
    [Freshman Summer] => 4
    [Freshman Winter] => 2
) 
```

但需要得到这个：

```
Array
(
    [Freshman Fall] => 1
    [Freshman Winter] => 2
    [Freshman Spring] => 3
    [Freshman Summer] => 4
) 
```

uksort 是要走的路吗？我做错了什么？请记住，数组值不会是那些值，它们将保存对象。非常感谢任何和所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:09:35.787

为什么不使用值作为键 {1,2,3,4} 并将“对象”存储为值。让排序变得非常容易......

如果您想要漂亮的名称，您始终可以将 {1,2,3,4} 映射到定义或类常量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T21:19:48.963

你真的很亲近。实际上， uksort 正在做你要求它做的事情，去掉等级名称，并按第二个单词的字母顺序排序。你需要它做的有点不同——你要求它按季节排序。您将不得不根据您想要查看的排序顺序为它们编写自己的比较。您可以使用 mr-sk 给出的解决方案，也可以执行以下操作：

```
function cmp($a, $b) {
    $a = preg_replace('@^(freshman|sophomore|junior|senior) @', '', $a);
    $b = preg_replace('@^(freshman|sophomore|junior|senior) @', '', $b);
    $seasons = array("FALL"=>0, "WINTER"=>1, "SPRING"=>2, "SUMMER"=>3);
    return $seasons[strtoupper($a)]-$seasons[strtoupper($b)];
} 
```

此外，您可以将您的正则表达式（如果您确定只会在开头得到这些词）更改为

```
/^\w* / 
```

享受！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T21:23:46.980

您的代码失败，因为您仅在季节上执行 strcasecmp() - 换句话说，您正在按字母顺序排列季节，这就是您的结果显示的内容。您需要按定义的顺序进行排序。

我会这样做，将季节转换为预先分配的数字：

```
function cmp($a, $b) {
    $seasons = array('Fall'=>1, 'Winter'=>2, 'Spring'=>3, 'Summer'=>4);
    $aParts = explode(' ', $a);
    $bParts = explode(' ', $b);

    $a = $seasons[$aParts[1]];
    $b = $seasons[$bParts[1]]

    return $b - $a;
} 
```

如果你想包括这些类：

```
function cmp($a, $b) {
    $classes = array('Freshman'=>1, 'Sophomore'=>2, 'Junior'=>3, 'Senior'=>4);
    $seasons = array('Fall'=>1, 'Winter'=>2, 'Spring'=>3, 'Summer'=>4);
    list($aClass, $aSeason) = explode(' ', $a);
    list($bClass, $bSeason) = explode(' ', $b);
    $aNum = 10*$classes[$aClass] + $seasons[$aSeason];
    $bNum = 10*$classes[$bClass] + $seasons[$bSeason];

    return $bNum - $aNum;           
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-13T21:19:00.350

您正在按键排序，而不是按值排序。如果你按键排序，你会得到秋天 < 春天 < 夏天 < 冬天。

只需使用

```
asort($a); 
```

这将按值 (1,2,3,4) 排序，但保留关键相关性。

# java - 从 servlet 重定向而不更改 url？

> ID：11942341
> 
> 赞同：3
> 
> 时间：2012-08-13T21:08:13.237
> 
> 标签：java, apache, jakarta-ee

我有一个 apache 服务器，它适用`mod_rewrite`并`mod_proxy`基于重写映射文件。用户只是访问服务器，并不知道他被重定向到另一个提供源文件的服务器。一切都由 apache 在后台处理。

因为我现在想要更复杂的重定向，所以我考虑了 java/jsf/servlet 中的一些解决方案。

我可以从 servlet 实现同样强大的 url 重新映射吗？如果是这样，我该如何开始？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T21:13:47.547

*   从 Java/servlet 重定向的解决方案：

如果它在同一台机器上，您可以使用`forward`：

```
request.getRequestDispatcher("pathToNewServletOrJsp").forward(request, response); 
```

（带有相对路径）并且URL不会改变，否则你必须使用`sendRedirect`：

```
response.sendRedirect("pathToNewServletOrJsp"); 
```

在这种情况下 - URL 会改变。

*   另一种解决方案是在您的 文件中为[301 重定向](https://stackoverflow.com/questions/9322454/syntax-for-301-redirect-of-www-to-non-www-using-httpd-conf)创建规则。[`.htaccess`](https://en.wikipedia.org/wiki/.htaccess)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:22:20.193

你可以使用 Tuckey.org 的 URLRewrite：

*   [http://tukey.org/urlrewrite/](http://tuckey.org/urlrewrite/)

它可以很容易地与 spring mvc 集成，并允许编写非常复杂的规则。

问候

菲利普

# groovy - 了解 Groovy 计数闭包

> ID：11942349
> 
> 赞同：3
> 
> 时间：2012-08-13T21:08:59.687
> 
> 标签：groovy, closures

我刚开始使用 Groovy，虽然最终在 Java 环境中可以使用闭包令人耳目一新，但我在`count`按自己的意愿工作时遇到了问题。

假设我有一个`Foo`看起来像这样的类：

```
public class Foo {

    private boolean isBar;

    public boolean isBar() {
        return isBar;
    }

    public boolean setIsBar(boolean isBar) {
        this.isBar = isBar;
    }

} 
```

现在假设我有一个`List`实例`Foo`，并且我想计算为真的`Foo`对象的数量。`isBar`我期待它看起来像这样：

```
foos.count { it.isBar() } 
```

或者使用属性表示法，简单地说：

```
foos.count { it.bar } 
```

但是，这不会返回预期的结果，它只是返回 0。

我尝试用一​​个简单`List`的整数来测试它。要计算 2 的出现次数，我可以这样做：

```
[1, 2, 2, 3].count(2) 
```

但是我不应该能够使用闭包来执行以下操作吗？

```
[1, 2, 2, 3].count { it == 2 } 
```

后者似乎也没有返回预期的结果。我所做的研究似乎表明我正在做的事情是正确的，但显然不是。使用它的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T21:28:56.150

根据[Groovy，JDK](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html#count%28groovy.lang.Closure%29) `Collection#count(Closure)`直到 1.8.0 才添加。你可以试试`#sum`：

```
assert [1, 2, 2, 3].sum() { it == 2? 1 : 0 } == 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T21:29:10.727

`Collection.count`1.6以下的文档：

> `Number count(Object value)`
> 
> 计算此集合中给定值的出现次数

因此：

```
> [1, 2, 2, 3].count(2)
2 
```

`Collection.count`1.8 以下的文档：

> `Number count(Object value)`
> 
> 计算此集合中给定值的出现次数。
> 
> `Number count(Closure closure)`
> 
> 计算此集合中满足给定闭包的出现次数。

文档真的，真的很有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-26T20:27:00.390

在 groovy 1.8+ 中，您可以编写：

```
[1, 2, 2, 3].iterator().count { it == 2 } 
```

由于向后兼容，DefaultGroovyMethods 的新方法签名为：

```
public static Number count(Iterator self, Closure closure) { 
```

# c# - 无论类型如何，我都可以在运行时为 OrderBy 实例化 IComparer 类吗？

> ID：11942354
> 
> 赞同：4
> 
> 时间：2012-08-13T21:09:12.307
> 
> 标签：c#, reflection, ienumerable

有人知道这是否可能吗？我有一个自定义 Attribute 类，它定义了一个为属性实现 IComparer 的 Type。我想通过反射访问该类型并将其实例化以在 IEnumerable.OrderBy() 中使用：

```
[System.AttributeUsage(System.AttributeTargets.Property)]
public class SortComparer : System.Attribute
{
    public Type ComparerType;

    public SortComparer(Type ComparerType)
    {
        this.ComparerType = ComparerType;
    }
}

var property = typeof(PerTurbineResultViewModel).GetProperty(SortColumn);

var sortComparer = property.GetCustomAttributes(typeof(SortComparer), true).FirstOrDefault() as SortComparer;

if (sortComparer != null)
{
    var insta = Activator.CreateInstance(sortComparer.ComparerType);
    this.Results = lstResults.Select(r => new ResultViewModel(r)).
                        OrderBy(p => property.GetValue(p, null), insta));
} 
```

上面的代码不能编译，因为`OrderBy<TSource, TResult>`要求第二个参数是类型`IComparer<TResult>`（在编译时是未知的）。

有没有办法实例化“insta”变量并将其转换为`IComparer<TResult>`使用“属性”中的类型信息？

编辑：第一个选项让我非常接近：

```
Func<ResultViewModel, PropertyInfo> sel = t => property;

this.Results = infoGeneric.Invoke(Results, new object[] { vals, sel, insta }) as IEnumerable<ResultViewModel>; 
```

除了我得到属性选择器的运行时异常：

```
// Object of type 'System.Func`2[ResultViewModel,System.Reflection.PropertyInfo]' cannot be converted to type 'System.Func`2[ResultViewModel,System.Reflection.RuntimePropertyInfo]'. 
```

RuntimePropertyInfo 似乎是内部的......还有其他方法可以传入属性选择器吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T21:11:52.317

基本上你有两个选择：

*   也可以使用反射调用`OrderBy`：获取泛型方法定义，然后调用[`MethodInfo.MakeGenericMethod`](http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.makegenericmethod.aspx)以获取构造的版本，然后调用它。
*   在 C# 4 中使用`dynamic`来让内置的迷你编译器为您完成繁重的工作

编辑：因为`property.GetValue()`只有返回`object`，你几乎肯定*必须*通过反射路线。要么，要么你可以使用第三种，一个可怕但非常简单的选择......

...让你所有的比较器实现`IComparer<object>`，并在其中进行转换。然后你`TResult`会是`object`，你可以投：

```
object tmp = Activator.CreateInstance(sortComparer.ComparerType);
IComparer<object> comparer = (IComparer<object>) tmp;
this.Results = lstResults.Select(r => new ResultViewModel(r))
                         .OrderBy(p => property.GetValue(p, null), comparer); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-17T15:27:37.633

有时通过工厂函数实例化帮助类来使用函数式方法会更好。

*   实现`IComparer`接口的泛型类 [ [1](https://github.com/guneysus/underscore.net/blob/bf908a46fbc7499bcae685e6a4e5cfb9845b1ab0/src/iter.net/GenericEqualityComparer%601.cs) ]

    ```
    internal class GenericEqualityComparer<T> : IEqualityComparer<T>
    {
      private readonly Func<T, T, bool> _comparer;

      public GenericEqualityComparer(Func<T, T, bool> comparer) {
          _comparer = comparer;
      }

      public bool Equals(T x, T y)
      {
          return _comparer(x, y);
      }

      public int GetHashCode(T obj)
      {
          return base.GetHashCode();
      }
    } 
    ```

*   使用工厂方法实例化通用比较器类 [ [2](https://github.com/guneysus/underscore.net/blob/bf908a46fbc7499bcae685e6a4e5cfb9845b1ab0/src/iter.net/Iter.cs) ] 并将`Func<T, T, int> compare`委托作为参数传递给此类

    ```
     IComparer<Point> comparer = comparator<Point>((a, b) =>
      {
          return (a.X + a.Y) - (b.X + b.Y);
      });

      comparer.Compare(new Point(0, 0), new Point(0, 0)); // should return zero
      comparer.Compare(new Point(100, 0), new Point(0, 0)); // should return a value greater than zero
      comparer.Compare(new Point(0, 0), new Point(100, 0)); // should return a value less than zero 
    ```

# macos - 双击 shell 脚本问题（Mac 上的 .COMMAND）

> ID：11942359
> 
> 赞同：4
> 
> 时间：2012-08-13T21:09:49.093
> 
> 标签：macos, shell, terminal

尝试通过双击在 Mac 上运行以下 test.command 脚本。（要求：**必须****双击**运行）

```
#!/bin/sh
sudo java -jar ExecutableJar.jar 
```

这是输出。（终端保持打开状态并显示以下消息）

```
Last login: Mon Aug 13 15:59:05 on ttys001
/Applications/Application\ Folder/test.command ; exit;
code-mac:~ code$ /Applications/Application\ Folder/test.command ; exit;
Unable to access jarfile ExecutableJar.jar
logout

[Process completed] 
```

当我从终端运行相同的命令时......

```
sudo java -jar ExecutableJar.jar 
```

...它工作正常并按预期打开可执行 jar（在提示我输入密码后）。有任何想法吗？另外，如果可能的话，我希望脚本要么根本不打开终端，要么至少在启动可执行 jar 后关闭终端。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-13T23:38:57.337

将以下内容添加到脚本的开头使其在双击时按预期工作。

```
cd "$(dirname "$0")" 
```

整个*test.command*脚本如下：

```
#!/bin/sh
cd "$(dirname "$0")"
sudo java -jar ExecutableJar.jar & 
```

在 sudo 命令末尾添加 & 使可执行 jar 作为后台进程运行，并允许处理 sudo 之后的进一步命令，在我的情况下，关闭终端窗口。（否则它保持打开状态）

最后，将以下任一内容添加到脚本的末尾将在完成后关闭它。第一种方法关闭所有终端窗口，有点矫枉过正，但它完成了工作。

```
killall Terminal 
```

第二个将提示用户关闭终端窗口，让用户选择。

```
osascript -e 'tell application "Terminal" to quit' 
```

最后一个重要的说明是，这两种关闭技术都不适用于我的情况。由于我的脚本需要 sudo 并提示用户输入密码，因此在用户有机会输入密码之前，使用任一路由提示用户关闭终端 (osascript) 或关闭终端 (killall)。为了先询问密码然后运行可执行 jar，请使用：

```
sudo -v 
```

如果需要，提示输入密码，然后使用 & 在后台运行可执行 jar 并使用 killall 或 osascript。

# python - 在 Python 中序列化 JSON 时出现“TypeError: (Integer) is not JSON serializable”？

> ID：11942364
> 
> 赞同：189
> 
> 时间：2012-08-13T21:10:04.820
> 
> 标签：python, json, encoding, typeerror

我正在尝试从 python 向 json 文件发送一个简单的字典，但我不断收到“TypeError: 1425 is not JSON serializable”消息。

```
import json
alerts = {'upper':[1425],'lower':[576],'level':[2],'datetime':['2012-08-08 15:30']}
afile = open('test.json','w')
afile.write(json.dumps(alerts,encoding='UTF-8'))
afile.close() 
```

如果我添加默认参数，那么它会写入，但整数值会作为字符串写入 json 文件，这是不可取的。

```
afile.write(json.dumps(alerts,encoding='UTF-8',default=str)) 
```

* * *

## 回答 #1

> 赞同：297
> 
> 时间：2012-08-13T21:36:25.820

我发现了我的问题。问题是我的整数实际上是 type [`numpy.int64`](https://docs.scipy.org/doc/numpy-1.10.0/user/basics.types.html)。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2018-05-29T06:32:46.623

似乎在 Python 3 中将 numpy.int64 转储为 json 字符串可能存在问题，并且 python 团队已经就此进行了对话。更多细节可以在[这里](https://bugs.python.org/issue24313)找到。

Serhiy Storchaka 提供了一种解决方法。它工作得很好，所以我把它贴在这里：

```
def convert(o):
    if isinstance(o, numpy.int64): return int(o)  
    raise TypeError

json.dumps({'value': numpy.int64(42)}, default=convert) 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2020-01-09T05:52:31.247

正如@JAC 在最高评价答案的评论中指出的那样，通用解决方案（适用于所有 numpy 类型）可以在线程 [Converting numpy dtypes to native python types](https://stackoverflow.com/questions/9452775/converting-numpy-dtypes-to-native-python-types)中找到。

不过，我将在下面添加我的解决方案版本，因为就我而言，我需要一个通用解决方案，将这些答案与其他线程的答案结合起来。这应该适用于几乎所有 numpy 类型。

```
def convert(o):
    if isinstance(o, np.generic): return o.item()  
    raise TypeError

json.dumps({'value': numpy.int64(42)}, default=convert) 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-06-04T17:11:43.887

# 只需将数字从`int64`(from numpy) 转换为`int`.

例如，如果变量`x`是 int64：

```
int(x) 
```

如果是 int64 数组：

```
map(int, x) 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-08-28T15:50:55.233

您有**Numpy 数据类型**，只需更改为普通`int()`或`float()`数据类型。它会正常工作。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-02-24T13:18:13.063

This might be the late response, but recently i got the same error. After lot of surfing this solution helped me.

```
alerts = {'upper':[1425],'lower':[576],'level':[2],'datetime':['2012-08-08 15:30']}
def myconverter(obj):
        if isinstance(obj, np.integer):
            return int(obj)
        elif isinstance(obj, np.floating):
            return float(obj)
        elif isinstance(obj, np.ndarray):
            return obj.tolist()
        elif isinstance(obj, datetime.datetime):
            return obj.__str__() 
```

Call `myconverter` in `json.dumps()` like below. `json.dumps(alerts, default=myconverter).`

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-04-07T20:43:23.713

这为我解决了这个问题：

```
def serialize(self):
    return {
        my_int: int(self.my_int), 
        my_float: float(self.my_float)
    } 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-04-24T00:00:07.627

同样的问题。列出包含的数量**`type numpy.int64 which throws a TypeError`**。对我来说快速的解决方法是

```
mylist = eval(str(mylist_of_integers))
json.dumps({'mylist': mylist}) 
```

它转换`list`为`str()`和函数像**Python**`eval()`表达式一样评估**字符串**，并在我的情况下以 a 形式返回结果。**`list of integers`**

 *** * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-06-01T05:25:17.337

使用以下代码解决问题。

```
import json
from numpyencoder import NumpyEncoder
alerts = {'upper':[1425],'lower':[576],'level':[2],'datetime':['2012-08-08 
15:30']}
afile = open('test.json','w')
afile.write(json.dumps(alerts,encoding='UTF-8',cls=NumpyEncoder))
afile.close() 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-10-30T12:46:22.650

或者，您可以先将对象转换为数据框：

```
df = pd.DataFrame(obj) 
```

然后将其保存`dataframe`在`json`文件中：

```
df.to_json(path_or_buf='df.json') 
```

希望这可以帮助**

# android - Android，opengl ES 1.1，退出应用程序

> ID：11942365
> 
> 赞同：0
> 
> 时间：2012-08-13T21:10:21.200
> 
> 标签：android, opengl-es

我正在opengl es 11 for android中编写一个非常简单的应用程序，我想在用户按下“退出”按钮时退出应用程序。

问题是 Activity 类中的 finish() 方法不起作用，onDrawFrame 一直被调用，除非用户按下后退按钮，否则无法关闭应用程序。

我知道从代码中关闭应用程序不在 Android 的逻辑中，但这只是一个退出按钮！

PS：我想通过 onDrawFrame 方法关闭应用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:28:11.643

> 我想通过 onDrawFrame 方法关闭应用程序

这不是“关闭”Android 应用程序的有效方式，根本不应该考虑。您应该在活动类中保留对渲染器的引用，并且每当活动暂停/恢复时，它都会自动调用`onPause()`/ `onResume()`。分别从这些方法调用[`GLSurfaceView.onPause()`](http://developer.android.com/reference/android/opengl/GLSurfaceView.html#onPause%28%29)和。[`GLSurfaceView.onResume()`](http://developer.android.com/reference/android/opengl/GLSurfaceView.html#onResume%28%29)

# ios - 将 Table View 数组拆分为标签和副标题

> ID：11942366
> 
> 赞同：0
> 
> 时间：2012-08-13T21:10:21.007
> 
> 标签：ios, cocoa-touch, uikit

Xcode 新手，我正在浏览一些苹果文档，它展示了我如何设置文本和字幕。我对指南的问题是如何实施它们。

这就是我的数组当前的样子：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    //Initialize the array.
    listOfItems = [[NSMutableArray alloc] init];

    //Add items
    [listOfItems addObject:@"Iceland"];
    [listOfItems addObject:@"Greenland"];
    [listOfItems addObject:@"Switzerland"];
    [listOfItems addObject:@"Norway"];
    [listOfItems addObject:@"New Zealand"];
    [listOfItems addObject:@"Greece"];
    [listOfItems addObject:@"Rome"];
    [listOfItems addObject:@"Ireland"];

} 
```

这就是它返回数据的方式：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier];
    }

    // Set up the cell...
    NSString *cellValue = [listOfItems objectAtIndex:indexPath.row];
    cell.textLabel.text = cellValue;

    return cell;
} 
```

这只是标题，我想放一个副标题。我将插入什么代码来实现字幕？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:32:54.357

要为您的单元格设置字幕，请使用以下`detailtextLabel`属性：

```
cell.detailTextLabel.text = @"My Subtitle"; 
```

`UITableViewCellStyleSubtitle`如果您希望字幕以正常方式显示（左对齐，在主文本标签下方，灰色字体稍小），您还应该确保您的单元格样式设置为

# java - 如果编译器自动将字符串连接转换为 StringBuilder，为什么要显式使用 StringBuilder？

> ID：11942368
> 
> 赞同：40
> 
> 时间：2012-08-13T21:10:28.050
> 
> 标签：java, stringbuilder

> **可能重复：**
> [Java 中 toString() 中的 StringBuilder 与字符串连接](https://stackoverflow.com/questions/1532461/stringbuilder-vs-string-concatenation-in-tostring-in-java)

我想知道，由于编译器在执行字符串连接时在内部使用 StringBuilder 来附加字符串，那么如果字符串连接已经为您完成了这项工作，那么有什么意义，为什么我还要使用 StringBuilder 呢？还有其他具体原因吗？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-08-13T21:11:50.013

正如您所提到的，您不应该使用`StringBuilder`简单的字符串连接表达式来代替，例如`a + " = " + b`. 后者打字速度更快，更容易阅读，而且编译器`StringBuilder`无论如何都会在内部使用 a ，因此重写它并没有性能优势。

但是`StringBuilder`，如果您在循环中连接大量字符串，则很有用。以下代码效率低下。它需要 O(n ² ) 时间来运行并创建许多临时字符串。

```
String result = "";
for (int i = 0; i < foo.length; ++i)
{
    result += bar(foo[i]);  // Bad
} 
```

试试这个：

```
StringBuilder sb = new StringBuilder();
for (int i = 0; i < foo.length; ++i)
{
    sb.append(bar(foo[i]));
}
String result = sb.toString(); 
```

编译器只优化简单的`a + b + c`表达式。它无法自动优化上述代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T21:12:34.263

您在哪里假设字符串连接在内部使用 stringbuilder ？也许一个简单的 concat 会被优化掉，但这绝对不会：

```
String s = "";

for (int i = 0; i < 1000; i++){
  for (int j = 0; j < 1000; j++){
    s+= "" + i + j
}
} 
```

# jquery - jQuery 自动完成在结果中添加转义字符 ater 向上或向下箭头

> ID：11942370
> 
> 赞同：0
> 
> 时间：2012-08-13T21:10:29.733
> 
> 标签：jquery, autocomplete

看看这里：

[http://jsfiddle.net/zK3Wc/27/](http://jsfiddle.net/zK3Wc/27/)

有人对此有快速简单的解决方法吗？

基本上，如果用户向上或向下箭头，则会在输入字段中添加 html 转义字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:17:20.370

在您的`projects`数组中，您有 unicode 字符引用。如果您的网站编码为 UTF-8，则可能没有必要。

见这里：http: [//jsfiddle.net/zK3Wc/28/](http://jsfiddle.net/zK3Wc/28/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T22:25:21.053

固定的！

[http://jsfiddle.net/zK3Wc/32/](http://jsfiddle.net/zK3Wc/32/)

在一些谷歌搜索和另一个 SO Question 的帮助下；在“焦点”对象下，我添加了这个：

```
 $( ".project" ).val( ui.item.label );
        function decode(input){
          return $('<div/>').html(input).text();
        }
        $(function(){
          $('.project').keydown(function(){
            $($(this)).val(decode($($(this)).val()));
          });
        }); 
```

希望这可以帮助遇到此问题的其他人！

在 IE 7、8、9 FF、Chrome 和 Safari 中测试。

# migration - 升级到 JasperReports 4.7.0 后，编辑器不显示 staticText 值或 textField 值。编译没有错误

> ID：11942371
> 
> 赞同：1
> 
> 时间：2012-08-13T21:10:32.103
> 
> 标签：migration, jasper-reports

我们正在将我们的报告从*JasperReports/iReport*从*3.0*版迁移到*4.7.0 版*。我安装了*iReport 4.7.0*并且还能够毫无问题地执行大多数现有报告。

由于报表很少，在*iReport*的编辑器中，***textField / staticText***文本框是空的。这些值应该在运行时应用，但它也是空的。因此，当单击**预览**按钮时，会生成空报告。

数据库连接也设置正确。

检查它们的相应属性时，正确分配了***textField***表达式/文本值（示例：） `$F{balance}`。

我是 JasperReports 的新手，完全不知道如何解决这个问题。任何见解都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T21:51:12.290

尝试在所有文本字段上选择不同的字体。它们可能只是看起来是空的，但您使用的字体没有安装。

# objective-c - xcode 4.4.1 中的更改 - 创建 ViewController.xib？

> ID：11942376
> 
> 赞同：2
> 
> 时间：2012-08-13T21:11:00.287
> 
> 标签：objective-c, cocoa-touch, xcode4, ios

好吧，我目前正在阅读一本关于 iOS 编程的书，但是由于 xcode 中与 MainWindow.xib 文件相关的更改我迷路了，由于 xocde 的更改和书的方向，我无法遵循这本书。

书上说：

*3\. Xcode 应该创建项目。在 Groups & Files 窗格中，展开 Classes 和 Resources 文件夹，然后单击 MainWindow.xib。选择查看 | 实用程序 | 主菜单中的对象属性。选择查看 | 从主菜单显示调试器区域。现在您可以看到 Xcode 界面的所有主要区域（图 1-7）。熟悉信息和控件的布局。*

为此，我需要为自己创建 MainWindow.xib，好吧，我创建了它。

下一步如下：（**这是我迷路的地方）**

*4\. 单击 QuickStartViewController.xib 在 Interface Builder 中打开它。从 Xcode 4 开始，现在内置了 Interface Builder，因此您可以直接在项目窗口中编辑您的界面。*

这是**图 1-8。Interface Builder 中的视图画布**：（对不起，因为我是新用户，所以我还不能发布图像）所以这里是 imgur 中的链接。

[http://imgur.com/RvWqD,HRCyA#1](http://imgur.com/RvWqD,HRCyA#1)

*5\. 你应该看到一个**如图 1-8**所示的画布。单击窗口中间的 View 按钮（带有虚线轮廓的正方形），画布上将出现一个视图**（图 1-9）**。*

这是**图 1-9。显示视图的画布**

[http://imgur.com/RvWqD,HRCyA#0](http://imgur.com/RvWqD,HRCyA#0)

**图 1-9。显示视图的画布**

好吧，我在这里做什么？随着xcode的变化和我迷失的书的参考，我唯一创建的是MainWindow.xib文件，但是，**ViewController.xib是什么？**

我需要创建它吗？还是在创建项目时在文件中（可能是不同的名称），但是当我在导航区域（搜索框）中搜索“ViewController.xib”时什么都没有出现，当我输入“ViewController”时（没有.xib ) 它出现两个文件，**“ViewController.h”和“ViewController.m”**。

ViewController.xib的那个东西我看不懂，在哪里？还是我需要创建它？我迷路了，有人可以解释一下吗？

**谢谢！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T21:23:17.917

.xib 文件用于应用程序页面的可视化视图。如果您的应用由一页组成，则不应创建多个 .xib（如果您没有本地化）。如果你想在控制器之间导航，你应该创建另一个。当然你可以不使用 Interface Builder 来完成它，但是对于开始它是非常有用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T08:25:16.803

文件 - 新文件 - 目标 c 类

记得检查（有XIB接口）

# ruby-on-rails - 方法给出 ActiveRecord::Relation 错误？

> ID：11942377
> 
> 赞同：0
> 
> 时间：2012-08-13T21:11:04.990
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我有 3 个模型，称为价格、单价和购买。Price 和 UnitPrice 模型有一个名为的属性`amount`，我试图将其限定并获取两者的总和。我创建了两个范围，一个用于两个模型的总和。另一个范围是获取`date`两个模型`date`字段的属性。

我正在尝试这样做：

```
<%= number_to_currency(current_user.purchases.today.total) 
```

但得到错误：

```
NoMethodError in pages#home

undefined method `today' for #<ActiveRecord::Relation:0x77f94c0> 
```

我的代码：

```
class Purchase < ActiveRecord::Base
  belongs_to :user
  belongs_to :price
  belongs_to :unit_price

  def total
    self.price.sum(:amount) + self.unit_price.sum(:amount)
  end

  def today
    self.price.where(:date => Date.today) && self.unit_price.where(:date=> Date.today)
  end
end

class Price < ActiveRecord::Base
  attr_accessible :amount, :date
  belongs_to :user
  has_many :purchases
end

class UnitPrice < ActiveRecord::Base
  attr_accessible :amount, :date
  belongs_to :user
  has_many :purchases
end 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T23:13:01.093

我认为您的问题可能是您使用的是类方法而不是实例方法。在您的 Purchase 类中，删除`self.`方法定义之前的：

```
class Purchase < ActiveRecord::Base
  def total
    self.price.sum(:amount) + self.unit_price.sum(:amount)
  end

  def today
    self.price.where(:date => Date.today) && self.unit_price.where(:date=> Date.today)
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T21:10:49.173

方法`total`和`today`在模型对象上定义。当你打电话给 你时，`current_user.purchases`你关联到一个关系，`has_many`这意味着最终它是数组。因此，您不能在其上调用 Purchase 方法。你可以这样做：

```
 class Purchase < ActiveRecord::Base
    # ...
    scope :today, lambda { joins(:unit_price, :price).
                             where(:price => {:date => Date.today}, 
                                   :unit_price => { :date => Date.today }) }
    def total
        self.price.sum(:amount) + self.unit_price.sum(:amount)
    end
  end 
```

然后这样称呼它：

```
 <%= number_to_currency(current_user.purchases.today.inject{ |sum, p| sum + p.total }) %> 
```

范围可以在关系上调用。

您需要调用注入，因为再次`total`是购买方法并且关系是数组，因此您需要聚合数组。为了保持代码干净，您可能需要定义一个`today_purchases_total`方法，`User`然后您可以像这样调用它：

```
 <%= number_to_currency(current_user.today_purchases_total) %> 
```

有关这方面的更多信息，您可以参考[http://guides.rubyonrails.org/active_record_querying.html#scopes](http://guides.rubyonrails.org/active_record_querying.html#scopes)和所有一般的 RoR 指南。

# bash - 如何在不使用“kill 0”的情况下终止 Bash 中某个子 shell 级别的所有内容？

> ID：11942380
> 
> 赞同：1
> 
> 时间：2012-08-13T21:11:11.600
> 
> 标签：bash, process, kill, subshell

**语境：**

说我有：

```
(
#outer subshell
    {
    #inner command group, pipe-connected to ensure simultaneous invocation
        do_first_thing
        #die, somehow
    } | { 
    #inner command group, pipe-connected to ensure simultaneous invocation
        sleep 10
        do_second_thing
    }
)
echo "out" 
```

我有一个外部子shell（不必是一个；它可以是一个命令组，也可以完全删除）。在那里面，我有两个同时被调用的管道连接的命令组。我希望两个组都开始执行，然后，当第一组完成时（第二组仍然在运行`sleep`），我希望*外部子shell*的执行停止，即`#die, somehow`行所在的位置。

**问题：**

我应该怎么做才能确保`#die, somehow`到达该行时，`#outer subshell`关卡中的所有内容都终止，但在它之后继续执行（即被`out`打印）？

**我试过的：**

一种解决方案是使用`kill 0`（杀死当前进程组中的所有内容）来退出两个内部命令组，但这种`echo "out"`情况永远不会发生；整个小组都将被杀死，而不仅仅是外部子壳。

我也尝试过暂时覆盖然后`unset`ing`exit`函数，但这似乎只是将问题推到了另一个位置。也许我做错了；我绝不是 Bash 大师。

**为什么？**

在不深入细节的情况下，奇怪的 subshel​​l 连接的命令组是必要的，因为使用`&`fork out 进程在我的系统上无法确定地工作（嵌入式 *nix）。因此，管道连接的组确保如果`do_first_thing`运行时间过长（在上面的示例中为 10 秒），`do_second_thing`将会发生。实际用例要复杂得多，但这是问题的根源。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T21:25:13.403

沿着这些思路的结构是否合适？

```
touch /tmp/sentinel-file
(do_first_thing; rm /tmp/sentinel-file) &
pid=$!
sleep 10
if [[ -r /tmp/sentinel-file ]]
then
  kill $pid
  rm /tmp/sentinel-file
  do_second_thing
fi 
```

如果您运行此副本的多个副本，则会出现一些竞争条件，但在某些方面它可能比您现在所做的要干净一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:56:08.390

```
#!/bin/bash                                                                     
(
  #outer subshell                                                                 
  {
    #inner command group, pipe-connected to ensure simultaneous invocation      
    first_step;
    ps -ef | grep './lol.bash' | awk '{print $2}' | xargs kill;
    #die, somehow                                                           
  } | {
    #inner command group, pipe-connected to ensure simultaneous invocation      
    ./lol.bash;
  }
)
echo "out" 
```

并且 lol.bash 包含你的睡眠，然后是所谓的“second_step”......它不是很干净，但它会转动。

另一种方法是在第二部分创建一个循环，检查第一步是否完成，一段时间，然后离开，或者在第一步中清理所有东西，如果时间到了就做一些事情.. .

注意：显然你可以在每一步启动一个不同的进程，然后在你想要的时候杀死它......（你只需要知道 pid......）

# coordinates - 为什么月球的 ehem 位置和查找表位置之间存在差异

> ID：11942381
> 
> 赞同：1
> 
> 时间：2012-08-13T21:11:27.970
> 
> 标签：coordinates, azimuth, pyephem

我正在尝试使用 python 的 ephem 模块定位月球位置（高度和方位角），并将其与查找表进行比较，以了解我所在位置的明显月球位置。我注意到我获得的角度值存在显着差异。这是我的测试代码。

```
>>> o = ephem.Observer()
>>> o.lat = 39.2545
>>> o.lon = -76.7095
>>> o.elevation = 80
>>> o.date = datetime.datetime.utcnow()
>>> print o.date
2012/8/13 21:00:55
>>> m = ephem.Moon(o)
>>> import math
>>> azimuth = math.degrees(m.az)
>>> azimuth
286.2894281178355
>>> alt = math.degrees(m.alt)
>>> alt
19.35235063580148 
```

现在，将这些角度与查找表值进行比较：

```
 Date/Time             Zenith         Azimuth
2012 Aug 13 21:00:00.0      88.45125       294.56966
2012 Aug 13 21:20:00.0      91.82583       297.59090 
```

注意：Alt = 90 - 天顶。所以我们的天顶值为：70.64764

我的问题是，为什么有区别？查找表给出了**表观**角度。这有什么关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T05:55:58.693

你的问题是你不小心提供了弧度`lat`和`lon`值，因为当 PyEphem 被赋予一个浮点数时，它总是假设你正在做“原始数学”并以弧度提交值：

```
>>> o.lat = 39.2545
>>> o.lon = -76.7095 
```

如果您想提供学位并让 PyEphem 翻译，您可以提供字符串：

```
>>> o.lat = '39.2545'
>>> o.lon = '-76.7095' 
```

或者，您可以提供使用`math`函数计算的数字，如果这可以帮助您保持一切正常，因为 PyEphem 将字符串转换为数字的做法不是标准的 Python 习惯用法，而每个人`math.radians()`在阅读您的代码时都会理解：

```
>>> o.lat = math.radians(39.2545)
>>> o.lon = math.radians(-76.7095) 
```

您实际询问的具有这些大弧度值的观察者位于 89:07:01.8° N、284:52:09.8° E 的位置，该位置非常靠近北极。

# r - 使用 R - 将向量从一个表转换为另一个表

> ID：11942390
> 
> 赞同：0
> 
> 时间：2012-08-13T21:12:03.477
> 
> 标签：r, vector, input, expression

我正在对图表进行一些批处理，并且在从字符串中定位另一个表时遇到问题。

```
# Source table

t<-read.csv(file="Results.csv",header=TRUE)

# Graph Input

g<-read.csv(file="Graphs.csv",header=TRUE) 
```

图形输入包含我想要生成的所有图形的列表，源表中包含所有数据：

```
y<-paste(g[1,1])
x<-paste(g[1,2]) 
```

is和的向量`x`是`t$mass`和`y`的`t$luminosity`数据在表中的位置。但是，如果我键入，我只会得到向量或表达式，而不是包含数据值的表。`mass``luminosity``t``y``"t$luminosity"`

如何让它调用正确的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T21:33:49.103

I would suggest a workaround with the aes_string function from ggplot2:

```
library(stringr)
library(ggplot2)
x <- str_replace(x, "t[$]", "")
y <- str_replace(y, "t[$]", "")
ggplot(data=t) + geom_point(aes_string(x=x, y=y) 
```

# excel - 脚本一遍又一遍地循环——为什么？

> ID：11942392
> 
> 赞同：2
> 
> 时间：2012-08-13T21:12:17.860
> 
> 标签：excel, vba

我是一个 VBA 新手，并尝试制作两个与 If 语句一起使用的循环 - 根据此代码：

```
Sub Filter()
For Count = Worksheets("STR").Range("A1").End(xlDown).Row To 1 Step -1
    For Counter = 5 To Worksheets("Filter").Range("A5").End(xlDown).Row
    With Worksheets("STR").Range("C" & Count)
        If .Value Like Worksheets("Filter").Range("C" & Counter).Value _
            Or .Value Like Worksheets("Filter").Range("D" & Counter).Value _
            Or .Value Like Worksheets("Filter").Range("E" & Counter).Value _
            Or .Value Like Worksheets("Filter").Range("A" & Counter).Value Then
                Worksheets("STR").Range("D" & Count) = "X"
                'Worksheets("STR").Row("A" & Count).EntireRow.Delete
            Next Counter
        End If
    End With
Next Count
End Sub 
```

在某个阶段，我想它会一遍又一遍地循环，直到它崩溃。调试器告诉我这是“End If”行，但我看不出有什么问题。有没有办法让这更容易？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T21:31:53.303

四件事

1.  缩进你的代码。这将确保您不会像@barrowc 建议的那样犯错误。
2.  我建议不要使用`End(xlDown)`查找最后一行。有关如何找到最后一行的信息，请参阅此[链接。](https://stackoverflow.com/questions/11169445/error-finding-last-used-cell-in-vba)
3.  `ScreenUpdating`转为 False 并将其重新打开。
4.  使用错误处理

应用上述 4 条建议后，您的代码将如下所示。

```
Option Explicit

Sub Filter()
    Dim LastRowSTR As Long, LastRowFilter As Long

    On Error GoTo Whoa

    Application.ScreenUpdating = False

    With Sheets("STR")
        LastRowSTR = .Range("A" & .Rows.Count).End(xlUp).Row
    End With

    With Sheets("Filter")
        LastRowFilter = .Range("A" & .Rows.Count).End(xlUp).Row
    End With

    For Count = LastRowSTR To 1 Step -1
        For Counter = 5 To LastRowFilter
            With Worksheets("STR").Range("C" & Count)
                If .Value Like Worksheets("Filter").Range("C" & Counter).Value _
                Or .Value Like Worksheets("Filter").Range("D" & Counter).Value _
                Or .Value Like Worksheets("Filter").Range("E" & Counter).Value _
                Or .Value Like Worksheets("Filter").Range("A" & Counter).Value Then
                    Worksheets("STR").Range("D" & Count) = "X"
                    'Worksheets("STR").Row("A" & Count).EntireRow.Delete
                End If
            End With
        Next Counter
    Next Count
LetsContinue:
    Application.ScreenUpdating = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub 
```

有趣的阅​​读。

**话题：“犯错”是人之常情**

**链接**：[http ://siddharthout.wordpress.com/2011/08/01/to-err-is-human/](http://siddharthrout.wordpress.com/2011/08/01/to-err-is-human/)

# sql - 选择包含 SQL 的选项

> ID：11942393
> 
> 赞同：0
> 
> 时间：2012-08-13T21:12:20.747
> 
> 标签：sql, select, option

我有以下内容：

```
 `<select name="year" size="1" class="input" id="year" onChange="window.focus();" style="BACKGROUND-COLOR: #f7ed79; COLOR: #000000; font-family: Arial; font-size: 10px; width:60px;"> 
  <?php
  $sql = mysql_query("SELECT * FROM years");      
         while ($row = mysql_fetch_array($sql, MYSQL_ASSOC)) {
         echo("<option "); if($year==$row['year']) {echo "selected='selected'";}  
         echo ("value=\""); echo($row['year']); echo("\">"); echo($row['year']); 
         echo("</option>");
         };
         ?>
     </select>` 
```

这给了我多年的选择余地。但我希望有可能查看 SELECT YEAR 之前的年份编号，无论年份先到。

这里有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T21:27:33.410

我希望我能很好地理解它。

第一个选项：

```
<select name="year" size="1" class="input" id="year" onChange="window.focus();" style="BACKGROUND-COLOR: #f7ed79; COLOR: #000000; font-family: Arial; font-size: 10px; width:60px;">
<option selected="selected" disabled="disabled">Select year:</option>
<?php
      $sql = mysql_query("SELECT * FROM years");      
             while ($row = mysql_fetch_array($sql, MYSQL_ASSOC)) {
             echo("<option "); if($year==$row['year']) {echo "selected='selected'";}  
             echo ("value=\""); echo($row['year']); echo("\">"); echo($row['year']); 
             echo("</option>");
             };
 ?>
 </select> 
```

第二个选项：

```
<select name="year" size="1" class="input" id="year" onChange="window.focus();" style="BACKGROUND-COLOR: #f7ed79; COLOR: #000000; font-family: Arial; font-size: 10px; width:60px;">
<optgroup label="Select year:">
<?php
      $sql = mysql_query("SELECT * FROM years");      
             while ($row = mysql_fetch_array($sql, MYSQL_ASSOC)) {
             echo("<option "); if($year==$row['year']) {echo "selected='selected'";}  
             echo ("value=\""); echo($row['year']); echo("\">"); echo($row['year']); 
             echo("</option>");
             };
 ?>
</optgroup></select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:27:50.857

这可能会使它更容易阅读。此外，您应该考虑使用`mysqli_`或 PDO 函数。

```
<select id="year" class="input" name="year" onchange="window.focus();" style="background-color: #f7ed79; color: #000000; font-family: Arial; font-size: 10px; width:60px;">
<?php
  $sql = mysql_query("SELECT * FROM years") or die(mysql_error());

  while ($row = mysql_fetch_assoc($sql))
  {
    $selected_value = '';

    //not sure where $year is populated
    if($row['year'] == $year)
    {
      $selected_value = ' selected="selected"';
    }
?>
     <option value="<php echo $row['year'] ?>"<?php echo $selected_value ?>><php echo $row['year'] ?></option>
<?php
     };
?>
</select> 
```

# android - JqueryMobile 1.2 - 弹出窗口错误 - Andorid 4.0 设备上的表单输入问题

> ID：11942395
> 
> 赞同：1
> 
> 时间：2012-08-13T21:12:31.667
> 
> 标签：android, forms, jquery-mobile, popup

我正在测试新的 JQM 1.2 弹出窗口功能，并注意到在弹出窗口中嵌入表单输入时出现问题。使用我的 Android 4.0 手机浏览测试站点时，弹出窗口中的表单输入不会调出允许文本输入的键盘。实际上键盘会弹出，但只有大约 1 秒钟，然后它会滑开。

这可以通过使用任何 Android 4.0 设备浏览到以下 URL 并单击“表单”示例来复制，然后尝试在登录框中输入文本：http: [//jquerymobile.com/demos/1.2.0-alpha。 1/docs/pages/popup/index.html](http://jquerymobile.com/demos/1.2.0-alpha.1/docs/pages/popup/index.html)

有谁知道强制android键盘保持在原位以允许用户输入的任何变通方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:03:50.110

我发现这个问题已经在 J​​QM github 问题跟踪器上报告了，所以这是一个已知的错误。尚无修复，但如果您遇到此问题，这里是检查更新的链接： [https ://github.com/jquery/jquery-mobile/issues/4797](https://github.com/jquery/jquery-mobile/issues/4797)

# android - 尽管清单文件中设置了纵向，但 HTC Chacha 显示横向

> ID：11942396
> 
> 赞同：0
> 
> 时间：2012-08-13T21:12:33.350
> 
> 标签：android

我今天正在开发一个应用程序，我`portrait`在清单文件中设置了所有活动的方向。现在当我在我的`Xperia U`手机上部署应用程序时，它工作正常。但是当我在我的朋友中部署它时，`htc Chacha`它显示的布局不是纵向的。而是布局显示在`landscape`.

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T21:52:09.760

因为 HTC ChaCha 的屏幕默认为横向 - 这意味着当您将手机置于纵向模式（键盘向下）时，Android 的屏幕方向实际上设置为横向模式，而不是像在其他手机上那样纵向。设备上安装的 Android 操作系统版本已修改以反映这一点。

这就是为什么你会看到行为上的差异。

# imagemagick - imagemagick 获取具有最常见颜色的像素的坐标

> ID：11942398
> 
> 赞同：1
> 
> 时间：2012-08-13T21:12:40.557
> 
> 标签：imagemagick

简而言之，我想找出具有主要颜色的像素的坐标。

具体来说，我想实现以下目标：

1.  找到主要颜色。主要是指图像中大多数像素具有的颜色（我使用直方图实现了它）

2.  在获得这种颜色（在我的情况下是黑色）之后，我想找到一个黑色的像素，并且它只被黑色像素包围。基本上，黑色最集中区域的中心。

到目前为止，我只能获得主要颜色。

```
convert src.png -format %c histogram:info: > x.txt
cat x.txt | awk '{print $1}' | sed 's/://g' > x1.txt
h=$(sort -n x1.txt | tail -1)
cat x.txt | grep "$h"
rm -rf x.txt 
```

结果：

```
 169211: (  0,  0,  0,255) #000000 black 
```

现在，我还可以获得黑色的所有坐标

```
convert src.png txt: | grep black
469,799: (  0,  0,  0,255)  #000000  black
470,799: (  0,  0,  0,255)  #000000  black
471,799: (  0,  0,  0,255)  #000000  black
472,799: (  0,  0,  0,255)  #000000  black
473,799: (  0,  0,  0,255)  #000000  black
474,799: (  0,  0,  0,255)  #000000  black
475,799: (  0,  0,  0,255)  #000000  black
476,799: (  0,  0,  0,255)  #000000  black
477,799: (  0,  0,  0,255)  #000000  black
478,799: (  0,  0,  0,255)  #000000  black
... 
```

但是我需要一个黑色像素的随机坐标，该坐标位于周围只有黑色像素的地方......

我正在使用 Linux 和 Imagemagick 版本 6.6.5

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T09:00:37.850

## （更新以消除一些弱点）

**首先**，找到你的主要颜色。您似乎已经知道如何执行此操作，因此我跳过此步骤。~~（我也没有为此检查或验证您的代码......）~~

您的代码有一些弱点：

1.  你只清理了`x.txt`，而不清理你的`x1.txt`.

2.  `| sed 's/://g'`您应该从第二个命令中删除该部分。它从您的变量中消除了`:`冒号，但这可能导致`h=21`（而不是`h=21:`）导致您`grep "$h"`找到所有这些行：

    ```
     1: (221, 86, 77) #DD564D srgb(221,86,77)
     1: (221,196,192) #DDC4C0 srgb(221,196,192)
     1: (221,203,197) #DDCBC5 srgb(221,203,197)
    [...] 
    21: (255,255,255) #FFFFFF white 
    ```

    如果你坚持下去，`h=21:`你会找到你正在寻找的一行！（验证示例：使用内置`rose:`图像代替您的`src.png`来了解我的意思。）

**其次**，在图像上应用非常少量的*模糊*，方法是对每个像素及其每个位置的 8 个周围像素进行平均：（`-blur 1x65535`此操作使用 3x3 方形*内核*）。在该步骤之后，在生成的图像中，只有那些像素将保持纯黑色，这些像素在原始图像中仅被黑色像素包围。

**第三**，使所有非黑色像素变白：通过对图像应用 - 操作。（另请参阅[**“形态学”**](http://homepages.inf.ed.ac.uk/rbf/HIPR2/morops.htm)，尤其是[**“侵蚀”**](http://homepages.inf.ed.ac.uk/rbf/HIPR2/erode.htm)。）这会通过将所有非黑色颜色变为白色来消除图像中的所有其他颜色，并简化对纯黑色像素的搜索。（*注意：这不适用于不包含至少一个纯黑色像素的 3x3 像素区域的 src.png 文件...*）~~`-fill white +opaque black`~~ `-fill white -opaque black`[](http://homepages.inf.ed.ac.uk/rbf/HIPR2/morops.htm)**[](http://homepages.inf.ed.ac.uk/rbf/HIPR2/erode.htm)**

 *******第四：**我们必须考虑图像边界上的像素（这些像素没有 8 个邻居！），因此我们将颜色“无”分配给这些像素`-virtual-pixel none`。

我将使用名为“logo:”的 ImageMagick 内置特殊图片来演示我的方法：

```
convert logo: logo.png 
```

![](../Images/417e107916b96f78f8b8e59ef7e8a127.png)

正如您很容易看到的那样，该图像以白色作为其主要颜色。（所以我切换了这个例子的代码，使所有白色像素变黑......）

**到目前为止的命令行：**

```
convert                                                \
   logo:                                               \
  -virtual-pixel none                                  \
   $(for i in {1..2}; do echo " -blur 1x65535 "; done) \
  -fill black                                          \
  -opaque white                                        \
   2_blur-logo-virtpixnone.png 
```

这是并排的2张图片：

*   左侧的 logo.png
*   2_blur-log-virtpixnone.png 在右边

![](../Images/417e107916b96f78f8b8e59ef7e8a127.png) ![](../Images/f2f368771828fe3b9f9ad7fa540f708b.png)

**第五：** *皮革，冲洗，重复。*

现在让我们应用该算法的更多迭代，例如 100、500、1000 和 1300，并且还对结果应用注释，以便我们知道哪个图像是哪个：

```
for j in 100 500 1000 1300; do
   convert                                                       \
      logo:                                                      \
     -virtual-pixel none                                         \
      $(for i in $(seq 1 ${j}); do echo " -blur 1x65535 "; done) \
     -fill black                                                 \
     -opaque white                                               \
     -gravity NorthEast -annotate +10+10 "$j iterations"         \
      ${j}_blur-logo-virtpixnone.png
done 
```

正如您可以清楚地看到的那样，我的算法使黑色区域收敛到您在查看原始图像时直觉猜测为白色区域的“中心”的那个点`logo.png`：

![](../Images/84c2ed48f9b2ff3234130fb3b1c76860.png) ![](../Images/d8731dd63d34d843fa66052275ea2a75.png)

![](../Images/035e282dd7446b50c8623655da0bc578.png) ![](../Images/c2d22e7cdf230fac76befff5bbc4c7e5.png)

一旦你得到一个没有黑点的输出图像，你就太频繁地迭代了。返回一个迭代。:-)

现在应该只有非常有限数量的符合您标准的*候选像素。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-15T15:07:46.097

我喜欢这种使用欧几里得距离形态学的方法——它使巫师看起来相当恶魔（！）并且在一秒钟内运行！

```
convert logo: -virtual-pixel none             \
              -morphology Distance Euclidean  \
              -auto-level -channel GB         \
              -threshold 85% 85.png 
```

![在此处输入图像描述](../Images/9914eb1ee7c24d928ec95aaf6403bce4.png)

阈值设置为 95% 和 99% 可以为您提供这些：

![在此处输入图像描述](../Images/38c5b7f7819fd3620631b15389a7952d.png)

![在此处输入图像描述](../Images/5057bf66feb2eb5985f61bcbdd142ee0.png)

而且，如果你想要文本坐标：

```
convert logo: -virtual-pixel none -morphology Distance Euclidean -auto-level -threshold 99% txt:- | grep white
151,328: (255,255,255,1)  #FFFFFF  white
152,328: (255,255,255,1)  #FFFFFF  white 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T21:23:13.327

这只是一个预感而不是一个完整的答案，但您可以先使用模糊滤镜对图像进行预处理。那么模糊图像中的黑色像素在原始图像中一定有黑色邻域。

不过，这不适用于任意颜色。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-03T11:25:37.427

这是一个在几分之一秒内运行的不同想法......

如果您正在寻找大的黑色区域，请反复将图像平铺成越来越小的图块，直到获得全黑的图块，然后选择该图块的中心。这是一个显示收敛的小视频。该过程正在查看半透明的红色区域，直到找到仅包含黑色的区域。

![在此处输入图像描述](../Images/9aaa5acfe42d62c8eb5a8df310c2cf82.png)

这是代码：

```
#!/bin/bash
# Set interesting pixels to black, others to white
convert logo: -fill black +opaque white -negate start.png

# Now tile, into 4,9,16,25 till we get a tile that is fully black
for i in $(seq 2 8); do
   rm tmp*.png 2> /dev/null
   convert -crop ${i}x${i}@ start.png tmp%d.png
   for f in tmp*png; do
     mean=$(identify -format "%[mean]" "$f")
     if [ "$mean" = "0" ]; then
        j=$((i*i))
        echo "$f" of $j tiles
        exit
     fi
   done
done 
```

输出是这样的：

```
tmp6.png of 9 tiles 
```*****

# android - 我是否必须同时声明 WRITE_EXTERNAL_STORAGE 和 READ_EXTERNAL_STORAGE？

> ID：11942400
> 
> 赞同：37
> 
> 时间：2012-08-13T21:12:55.863
> 
> 标签：android, permissions, android-sdcard

申报就够了`<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />`还是我也必须申报`<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />`？Javadocs 省略了这一重要信息。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-07T11:58:46.743

最好是显式地声明两个权限，但仅声明`android.permission.WRITE_EXTERNAL_STORAGE`会在构建时自动添加`android.permission.READ_EXTERNAL_STORAGE`到您的 APK。

您可以在 APK 上使用该命令`aapt dump badging`来查看 Android 认为使用写入权限*意味着*您也需要读取权限。

这是我的一个 APK 的 aapt 的一些输出，我*只* `WRITE_EXTERNAL_STORAGE`在清单中声明：

```
uses-permission:'android.permission.WRITE_EXTERNAL_STORAGE'
uses-permission:'android.permission.READ_EXTERNAL_STORAGE'
uses-implied-permission:'android.permission.READ_EXTERNAL_STORAGE',
  'requested WRITE_EXTERNAL_STORAGE' 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-13T21:17:58.497

`READ_EXTERNAL_STORAGE`仅存在于 Jelly Bean（16 级）。根据[文档](http://developer.android.com/about/versions/android-4.1.html#Permissions)，Jelly Bean 的所有应用程序都具有该权限，即使没有声明它：

> 提供对外部存储的受保护读取访问。默认情况下，在 Android 4.1 中，所有应用程序仍然具有读取权限。这将在未来的版本中进行更改，以要求应用程序使用此权限明确请求读取访问权限。如果您的应用程序已经请求写入权限，它也会自动获得读取权限。有一个新的开发人员选项可以打开读取访问限制，以便开发人员根据 Android 未来的行为来测试他们的应用程序。

因此，您应该声明它以供将来兼容，但这可能不是问题的根源，除非您使用的是果冻豆手机并设置开发人员选项“保护 USB 存储”选项。

# python - 如何将 scrapy.log 模块与自定义日志处理程序一起使用？

> ID：11942403
> 
> 赞同：4
> 
> 时间：2012-08-13T21:13:28.233
> 
> 标签：python, logging, scrapy

我一直在做一个[Scrapy](http://scrapy.org/)项目，到目前为止一切都很好。但是，我对 Scrapy 的日志记录配置可能性并不满意。目前，我已经设置`LOG_FILE = 'my_spider.log'`了`settings.py`我的项目。当我`scrapy crawl my_spider`在命令行上执行时，它会为整个爬取过程创建一个大日志文件。这对我的目的来说是不可行的。

如何将 Python 的自定义日志处理程序与[`scrapy.log`](http://doc.scrapy.org/en/0.14/topics/logging.html#module-scrapy.log)模块结合使用？特别是，我想利用 Python [`logging.handlers.RotatingFileHandler`](http://docs.python.org/library/logging.handlers.html#rotatingfilehandler)，这样我就可以将日志数据分成几个小文件，而不必处理一个大文件。不幸的是，Scrapy 的日志记录工具的文档不是很丰富。提前谢谢了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-06-21T13:34:15.780

您可以通过首先在 scrapy.utils.log.configure_logging 中禁用 root 句柄然后添加您自己的日志处理程序来将所有 scrapy 日志记录到文件中。

在scrapy项目的settings.py文件中添加如下代码：

```
import logging
from logging.handlers import RotatingFileHandler

from scrapy.utils.log import configure_logging

LOG_ENABLED = False
# Disable default Scrapy log settings.
configure_logging(install_root_handler=False)

# Define your logging settings.
log_file = '/tmp/logs/CRAWLER_logs.log'

root_logger = logging.getLogger()
root_logger.setLevel(logging.DEBUG)
formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')
rotating_file_log = RotatingFileHandler(log_file, maxBytes=10485760, backupCount=1)
rotating_file_log.setLevel(logging.DEBUG)
rotating_file_log.setFormatter(formatter)
root_logger.addHandler(rotating_file_log) 
```

我们还根据需要自定义日志级别（DEBUG 到 INFO）和格式化程序。要在你的蜘蛛、管道中添加自定义日志，我们可以像普通的 python 日志一样轻松地做到这一点，如下所示：

内部管道.py

```
import logging
logger = logging.getLogger()
logger.info('processing item') 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T18:18:49.880

您可以像这样集成自定义日志文件（我不确定如何集成旋转器）：

在您的蜘蛛类文件中：

```
from datetime import datetime
from scrapy import log
from scrapy.spider import BaseSpider

class ExampleSpider(BaseSpider):
    name = "example"
    allowed_domains = ["example.com"]
    start_urls = ["http://www.example.com/"]

    def __init__(self, name=None, **kwargs):
        LOG_FILE = "scrapy_%s_%s.log" % (self.name, datetime.now())
        # remove the current log
        # log.log.removeObserver(log.log.theLogPublisher.observers[0])
        # re-create the default Twisted observer which Scrapy checks
        log.log.defaultObserver = log.log.DefaultObserver()
        # start the default observer so it can be stopped
        log.log.defaultObserver.start()
        # trick Scrapy into thinking logging has not started
        log.started = False
        # start the new log file observer
        log.start(LOG_FILE)
        # continue with the normal spider init
        super(ExampleSpider, self).__init__(name, **kwargs)

    def parse(self, response):
        ... 
```

输出文件可能如下所示：

`scrapy_example_2012-08-25 12:34:48.823896.log`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-20T20:42:41.300

Scrapy 使用标准的 python 记录器，这意味着您可以在创建蜘蛛时抓取和修改它们。

```
import scrapy
import logging
from logging.handlers import RotatingFileHandler

Class SpiderSpider(scrapy.Spider):
    name = 'spider'
    start_urls = ['https://en.wikipedia.org/wiki/Spider']

    handler = RotatingFileHandler('spider.log', maxBytes=1024, backupCount=3)
    logging.getLogger().addHandler(handler)

    def parse(self, response):
        ... 
```

# excel - 如何在excel VBA中获取“单元格”对象

> ID：11942405
> 
> 赞同：12
> 
> 时间：2012-08-13T21:13:31.603
> 
> 标签：excel, vba

所以我使用 for each 循环来遍历一堆行。我遇到了一个问题，我正在删除行并导致一行被跳过，所以我已经更改为 do while 循环。

我遇到的问题是试图获得一个“细胞”对象。之前我有：

```
For Each C In Worksheets("Blah").Range("A2:A" & lastRow).Cells 
```

我可以做类似的事情

```
C.Offset(1, 0)
C.Value = "Troy" 
```

等等我尝试使用：

```
C = Worksheets("Blah").Cells(iRow, 2) 
```

但这只是给 C 单元格的值。我如何获得实际的单元格对象？

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-13T21:23:34.400

删除行时，最好从下往上进行。您的特殊问题是您需要 Set 关键字将 C 设置为范围对象，而不是“让” C 设置为范围值。Range 有一个默认属性 Value，当您省略一个属性时，该属性就是所使用的属性。因此，在分配对象变量时必须使用 Set。这是一个向后循环以删除行并分配对象变量的示例。

```
Sub DeleteRows()

    Dim i As Long
    Dim rRng As Range
    Dim rCell As Range

    Set rRng = Sheet1.Range("A1:A9")

    For i = rRng.Rows.Count To 1 Step -1
        Set rCell = rRng.Cells(i, 1)
        If rCell.Value Mod 2 = 1 Then
            rCell.EntireRow.Delete
        End If
    Next i

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-25T17:54:23.543

要获取对象引用而不是值本身，您需要使用“设置”

```
Set C = Worksheets("Blah").Cells(iRow, 2) 
```

# django - Django mod_wsgi 请求需要 6 秒

> ID：11942408
> 
> 赞同：1
> 
> 时间：2012-08-13T21:13:52.367
> 
> 标签：django, apache, mod-wsgi

简而言之，我的问题是我的请求需要很长时间，我无法找出原因。我不知道我还能做些什么来弄清楚为什么要花这么长时间。我可能忽略了哪些其他技术来帮助我缩短请求时间？

这整个场景让我挠头很长时间了。我创建了一个测试服务器作为虚拟盒子，并在服务器上加载了 vagrant。每当我尝试从 virtualbox 的主机访问 Apache/Django 网站时，尽管请求平均需要 6 秒。我读到 mod_wsgi 第一次加载应该需要一些时间，但是即使在后续访问中也需要大约 6 秒才能加载。

这是 Django 工具栏的输出

```
Resource    Value
User CPU time   183.972 msec
System CPU time     606.908 msec
Total CPU time  790.880 msec
Elapsed time    5720.771 msec
Context switches    12800 voluntary, 21 involuntary 
```

如您所见，经过的时间非常长，而总 CPU 时间大约在一分钟左右。不过，我有点担心人数众多`Context switches`。无论如何，我接下来尝试使用以下命令分析 Apache

```
$ ab -n 400 http://127.0.0.1:8080/scheduling/instruments
...
Time taken for tests:   5.389 seconds
Complete requests:      400
...
Time per request:       13.473 [ms] (mean) 
```

这对我来说没有任何意义，因为它在我的浏览器完成一个请求的时间内完成了 400 个请求。当我在浏览器中发出相同的请求时，通常需要 6 秒。我唯一的最后一个想法是，请求必须以某种方式花费 5 秒才能使 mod_wsgi 启动 django 并从那里处理请求。以下是我的`httpd.conf`文件中的相关部分以及我`django.wsgi`用于为应用程序提供服务的文件

```
# Use apache to serve the static media files
AliasMatch ^/([^/]+)/media/(.*) /var/www/apps/$1/media/$2

<DirectoryMatch ^/var/www/apps/([^/]+)/media>
Order deny,allow
Allow from all
</DirectoryMatch>

WSGIDaemonProcess django_apps user=apache group=root
WSGIProcessGroup django_apps
WSGISocketPrefix /var/run/wsgi
WSGIScriptAliasMatch ^/([^/]+) /var/www/apps/$1/django.wsgi 
```

和 django.wsgi apache 加载

```
import os
import sys

path = '/var/www/apps'
path2 = '/var/www/apps/scheduling'
path3 = '/var/www/apps/scheduling/debug_toolbar'
if path not in sys.path:
    sys.path.append(path)
if path2 not in sys.path:
    sys.path.append(path2)
if path3 not in sys.path:
    sys.path.append(path3)

os.environ['DJANGO_SETTINGS_MODULE'] = 'scheduling.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler()

import scheduling.monitor
scheduling.monitor.start(interval=1.0) 
```

schedule.monitor 是从本网站逐字复制的[Reloading Source Code](http://code.google.com/p/modwsgi/wiki/ReloadingSourceCode#Monitoring_For_Code_Changes)

如果有帮助，服务器是托管在我的本地 Mac Lion 上的 VirtualBox，所有端口转发都已正确设置。服务器是 Centos 6，默认安装 Apache 2.2 和 Django 1.3.1

* * *

编辑：原来问题出在虚拟机上。因为虚拟机被配置为使用我的本地机器作为 DNS，所以从机器内部进行 DNS 查找可能需要 5 秒以上的时间。这意味着任何时候机器连接到另一台服务器（也就是查找我们的 SQL 服务器），它都会冻结，巧合的是在 mod_wsgi 收到请求和我的 python 视图收到请求之间。将值更改`/etc/resolv.conf`为我们的本地 DNS 解决了这个问题。

# database - 在 Oracle 11g R2 中解锁帐户

> ID：11942410
> 
> 赞同：5
> 
> 时间：2012-08-13T21:13:52.703
> 
> 标签：database, oracle, oracle11g

我知道这个问题已经被问过很多次了，但是这个问题让我很困惑。我刚安装`Oracle 11g R2`。我正在尝试解锁`Scott/Tiger account`，以便我可以使用它们来制作 `SQL Developer connection`. 我试图做类似下面的事情 - 我总是得到用户`SCOTT`不存在？为什么会这样？我做错了什么吗？

```
SQL> conn system/abcdef1234
Connected.
SQL> alter user scott account unlock;
alter user scott account unlock
           *
ERROR at line 1:
ORA-01918: user 'SCOTT' does not exist 
```

任何想法将不胜感激。

**更新：-**

```
SQL> select username,account_status from dba_users where username='SCOTT'; 
no rows selected 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T22:02:07.130

在安装过程中，被问到的问题之一是您是否要安装示例模式（`SCOTT`、`HR`等）。如果`SCOTT`用户不存在，您似乎选择不安装示例模式。

您可以创建一个新用户，向该用户授予适当的权限，然后构建要使用的表。例如

```
CREATE USER rjchar 
  IDENTIFIED BY rjchar
  DEFAULT TABLESPACE users
  TEMPORARY TABLESPACE temp;

GRANT create session,
      create table,
      create view,
      create procedure,
      create trigger
   TO rjchar; 
```

然后，您可以从 SQL Developer 以用户身份登录`rjchar`并开始构建您的架构。或者，您可以使用安装在服务器上的脚本[手动安装示例模式。](http://docs.oracle.com/cd/B19306_01/server.102/b14198/installation.htm#I4367)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-20T17:54:07.360

在 SQL 开发人员中

oracle 11g 的默认连接

转到连接>新连接

连接名称 = HR 或使用任何名称

用户名 = hr

密码 = 您的密码（这是您在安装 Oracle 11g 时选择的密码）

检查“保存”选项

角色：默认

端口 1521

SID : orcl

如果要创建 SYSDBA 帐户（管理员帐户）

连接名称 = admin ORCL 或使用任何名称

用户名 = sys

密码 = 您的密码（这是您在安装 Oracle 11g 时选择的密码）

角色：sysdba（从下拉列表中）

端口 1521

SID : orcl

测试并保存连接

以防万一您的 HR 帐户由于连接多次而被锁定，您可以通过登录您的 SYS DBA 帐户来解决此问题

在您列表上的对象列表中，转到其他用户和

转到 HR 帐户 > RT 点击

编辑用户

选择你喜欢的密码

和 UN CHECK The account locked 和 Uncheck the Password Expired options if they check in

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-07T17:18:48.643

-- 这可能会有所帮助

> ALTER 用户 hr 由 hr 帐户解锁标识；
> 
> 授予连接，资源到小时；
> 
> 由 OE 帐户解锁识别的 ALTER USER OE；
> 
> 将连接、资源授予 OE；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T21:33:17.890

它存在吗？尝试

```
select username,account_status from dba_users where username='SCOTT'; 
```

# c# - 从 ComboBox ASP.Net 发布值

> ID：11942411
> 
> 赞同：0
> 
> 时间：2012-08-13T21:13:52.930
> 
> 标签：c#, asp.net, post, combobox, ajaxcontroltoolkit

我正在尝试使用 ASP.NET 4.0 从 AjaxToolKit ComboBox 发布值。

这是我的代码：

WebForm1

HTML

```
<body>
    <ajaxToolkit:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
    </ajaxToolkit:ToolkitScriptManager>
    <div>
        <ajaxToolkit:ComboBox ID="ComboBox1" runat="server">
        </ajaxToolkit:ComboBox>
        <asp:Button ID="Button1" runat="server" Text="Button" UseSubmitBehavior="true" PostBackUrl="~/WebForm2.aspx" />
    </div>
</body> 
```

C＃

```
protected void Page_Load(object sender, EventArgs e)
{
    for (int i = 0; i < 5; i++)
    {
        ListItem tmpListItem = new ListItem("Item " + i.ToString());
        tmpListItem.Value = "Item " + i.ToString();
        ComboBox1.Items.Add(tmpListItem);
    }
} 
```

WebForm2

C＃

```
protected void Page_Load(object sender, EventArgs e)
{
    HttpContext tmpHttpContext = HttpContext.Current;
    string cmboBoxValue = tmpHttpContext.Request["ComboBox1"];
} 
```

我为 cmboBoxValue 得到的只是空值。

我很沮丧，因为我知道这一定很简单。我确信我过去已经完成了 100 次。

我看过这里

[如何使用 C# 提交 http 表单](https://stackoverflow.com/questions/1273998/how-to-submit-http-form-using-c-sharp)

但这并没有帮助。它必须与 asp:Button 一起提交。

希望这些信息足以让您做出回应。

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:53:28.187

提供以下代码：

将此代码放在 default.aspx 页面上

```
<cc1:ComboBox ID="ComboBox1" runat="server" AutoCompleteMode="Suggest" AutoPostBack="True" DropDownStyle="Simple">
<asp:ListItem>India</asp:ListItem>
<asp:ListItem>Lanka</asp:ListItem>
<asp:ListItem>Pak</asp:ListItem>
<asp:ListItem>Aus</asp:ListItem>
<asp:ListItem>Aps</asp:ListItem>
</cc1:ComboBox> 
```

将此代码放在button1单击事件上

```
protected void Button1_Click(object sender, EventArgs e)
    {        
         Label1.Text = "You selected" + ComboBox1.SelectedItem.Text;       
    } 
```

您也可以查看下面的链接并在您的 CSS 页面上工作。（阅读已勾选的答案）

[AjaxControlToolkit，组合框样式](https://stackoverflow.com/questions/1691630/ajaxcontroltoolkit-combobox-style)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:43:00.887

在另一位成员的帮助下，我能够找到答案。在这里能找到它：

[使用 NameValueCollection 在 ASP.NET 中获取 POST 值](https://stackoverflow.com/questions/12011905/get-post-values-in-asp-net-using-namevaluecollection)

# http-status-codes - 检查http状态是否成功

> ID：11942415
> 
> 赞同：1
> 
> 时间：2012-08-13T21:14:12.570
> 
> 标签：http-status-codes

在经典 ASP 中，我将页面的状态设置为 410 Gone，因为内容之前已被我们的管理员删除。有没有办法检查这是否成功应用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:18:50.963

正如@dash 指出的那样，[Fiddler](http://www.fiddler2.com/fiddler2/)是调试和验证 HTML / 服务器响应的好工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T21:28:46.240

是的，您可以通过许多调试工具或网站进行检查。这里有几个网站：

*   [http://web-sniffer.net/](http://web-sniffer.net/)
*   [http://www.axandra.com/free-online-seo-tool/status-code.php](http://www.axandra.com/free-online-seo-tool/status-code.php)

# oracle - Oracle 11g 是否优化了数组上的 For 循环？

> ID：11942417
> 
> 赞同：2
> 
> 时间：2012-08-13T21:14:23.363
> 
> 标签：oracle, for-loop, plsql, oracle11g

Oracle 11g 是否优化了数组上的 For 循环？如果是这样，它是如何做到的？

示例：
以下代码是否将每个实例`lt_some_array(i)`视为指向数组中索引处记录的指针`i`？或者，它是否每次都查找它？

```
FOR i IN lt_some_array.FIRST..lt_some_array.LAST
LOOP
   field1 := lt_some_array(i).field1;
   field2 := lt_some_array(i).field2;
   field3 := lt_some_array(i).field3;
   field4 := lt_some_array(i).field4;
   field5 := lt_some_array(i).field5;
   field6 := lt_some_array(i).field6;
   do_something();
END LOOP; 
```

澄清：
编译器是否将其视为如下（其中 lr_some_row 是指针而不是副本）：

```
FOR i IN lt_some_array.FIRST..lt_some_array.LAST
LOOP
   lr_some_row := lt_some_array(i);
   field1 := lr_some_row.field1;
   field2 := lr_some_row.field2;
   field3 := lr_some_row.field3;
   field4 := lr_some_row.field4;
   field5 := lr_some_row.field5;
   field6 := lr_some_row.field6;
   do_something();
END LOOP; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:31:54.900

是的，Oracle 11g 为您执行该优化。

该功能是在 10g 中添加的。[请参阅演示文稿“PL/SQL 性能 - 揭穿神话”](http://www.oracle.com/technetwork/database/features/plsql/plsql-performance-debunking-the-myt-131194.zip)的第 60 页。它包含一个与您的代码非常相似的示例。手动优化在 9iR2 中几乎快两倍，但在 10gR1 中根本没有帮助。

虽然我不能告诉你甲骨文是如何做到的。据我所知，关于 Oracle 工作原理的详细程度并不存在。

# c++ - 模板的 MSVC 重载错误，但不是 g++

> ID：11942419
> 
> 赞同：0
> 
> 时间：2012-08-13T21:14:46.200
> 
> 标签：c++

我在其他论坛上问过，但没有人回答：SI 不断得到：

> 6 个重载中没有一个可以转换所有参数。

我只在视觉工作室中遇到这个问题。当我使用 g++ 或代码块编译时，它工作得非常好。

我调用模板的代码是：

```
MemDeSerialize(ListOfItems, SerializedData, size_t(Data[2])); 
```

定义：

```
typedef struct
{
    //......
} PanelItem;

std::vector<PanelItem> ListOfItems;

template<typename T>
void MemDeSerialize(T& Destination, unsigned char* &Source){...}

template<typename T>
void MemDeSerialize(T*& Destination, unsigned char* &Source, size_t Size){...}

template<typename T>
void MemDeSerialize(std::vector<T> &Destination, unsigned char* &Source, size_t Size)
{
    Destination.resize(Size);
    for (size_t I = 0; I < Size; ++I)
        MemDeSerialize(&Destination[I], Source, Size);
}

                                                /** FUNCTION OVERLOADS **/

void MemDeSerialize(Model* Destination, unsigned char* &Source);

void MemDeSerialize(PanelItem* Destination, unsigned char* &Source);

void MemDeSerialize(Compass* Destination, unsigned char* &Source);

void MemDeSerialize(FontChar* Destination, unsigned char* &Source); 
```

我不断收到的错误是：

```
1>error C2665: 'MemDeSerialize' : none of the 6 overloads could convert all the argument types
1>could be 'void MemDeSerialize<PanelItem>(T *&,unsigned char *&,size_t)'
1>          with
1>          [
1>              T=PanelItem
1>          ]
1>          while trying to match the argument list '(PanelItem *, unsigned char *, size_t)'
1>          see reference to function template instantiation 'void MemDeSerialize<PanelItem>(std::vector<_Ty> &,unsigned char *&,size_t)' being compiled
1>          with
1>          [
1>              _Ty=PanelItem
1>          ]
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

任何想法为什么？它在代码块中编译得很好；只是不是视觉工作室。

我一直这样称呼它：`MemDeSerialize(ListOfItems, SerializedData, size_t(Data[2]));`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:02:17.773

好吧，我不能说它为什么会发生，但 MSVC 似乎希望你定义一个指针变量作为引用传递：

```
template<typename T>
void MemDeSerialize(std::vector<T> &Destination, unsigned char* &Source, size_t Size)
{
    Destination.resize(Size);
    for (size_t I = 0; I < Size; ++I)
    {
        T* foo = &Destination[I];
        MemDeSerialize(foo, Source, Size);
    }
} 
```

我的猜测是，`&Destination[I]`直接传递只是给你指针值（元素的地址），它实际上并没有给你一个可以引用的指针变量。GCC 在允许您对临时人员执行此操作方面可能更灵活。

从标准的角度来看，我不知道正确的行为是什么。

# mysql - 通过 SSH 导入 magento 数据库时出错

> ID：11942420
> 
> 赞同：2
> 
> 时间：2012-08-13T21:14:55.813
> 
> 标签：mysql, magento, command-line, ssh, terminal

尝试通过 SSH 转储 magento 数据库时出现以下错误

```
ERROR 1452 (23000) at line 82966: Cannot add or update a child row: a foreign key constraint fails (`aloodawp/#sql-4136_fcf760`, CONSTRAINT `FK_EAV_ATTRIBUTE_ENTITY_TYPE_ID_EAV_ENTITY_TYPE_ENTITY_TYPE_ID` FOREIGN KEY (`entity_type_id`) REFERENCES `eav_entity_type` (`entity_type_id`) ON DELET) 
```

我不是真正的 shell 或 mysql 专家，了解基础知识，以前从未遇到过这个问题

**解决了**

```
Are you getting this error when you dump, or when you are reading the dump back in? SET FOREIGN_KEY_CHECKS=0; and SET FOREIGN_KEY_CHECKS=1; around your dump should solve the problem. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T04:53:44.310

将评论转换为答案：

当您转储或重新读取转储时，您是否收到此错误？

```
SET FOREIGN_KEY_CHECKS=0; 
```

和

```
SET FOREIGN_KEY_CHECKS=1; 
```

在你的转储周围应该可以解决问题。

# bash - 移动大量文件

> ID：11942422
> 
> 赞同：66
> 
> 时间：2012-08-13T21:15:01.613
> 
> 标签：bash

如果我运行命令`mv folder2/*.* folder`，我会收到“参数列表太长”错误。

我找到了一些 and 的例子`ls`，`rm`处理这个错误，使用`find folder2 -name "*.*"`. 但我无法将它们应用于`mv`.

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-08-13T21:18:33.593

```
find folder2 -name '*.*' -exec mv {} folder \; 
```

`-exec`运行任何命令， `{}`插入找到的文件名，`\;`标记 exec 命令的结束。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-08-13T21:44:09.390

其他`find`答案有效，但对于大量文件来说非常慢，因为它们为每个文件执行一个命令。一种更有效的方法是`+`在末尾`find`使用，或者使用`xargs`：

```
# Using find ... -exec +
find folder2 -name '*.*' -exec mv --target-directory=folder '{}' +

# Using xargs
find folder2 -name '*.*' | xargs mv --target-directory=folder 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-13T21:18:32.113

`find folder2 -name '*.*' -exec mv \{\} /dest/directory/ \;`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-08-21T10:14:13.983

首先，感谢卡尔的回答。我对此只有轻微的修正。

**我的场景：**

/source/directory 中的数百万个文件夹，其中包含子文件夹和文件。目标是复制它并保持相同的目录结构。

为此，我使用这样的命令：

```
find /source/directory -mindepth 1 -maxdepth 1 -name '*' -exec mv {} /target/directory \; 
```

这里：

*   -mindepth 1 ：确保不移动根文件夹
*   -maxdepth 1 ：确保只搜索一级子级。所以它的所有内容也会被移动，但你不需要搜索它。

上面答案中建议的命令使结果目录结构变平 - 这不是我想要的，所以决定分享我的方法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-08-08T17:24:56.893

这个单行命令应该适合您。是的，它很慢，但即使处理数百万个文件也可以。

```
for i in /folder1/*; do mv "$i" /folder2; done 
```

它会将所有文件从文件夹移动`/folder1`到`/folder2`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-08-07T16:03:54.270

*find*不适用于非常长的文件列表，它会给你同样的错误“参数列表太长”。结合使用*ls*、*grep*和*xargs*对我有用：

`$ ls|grep RadF|xargs mv -t ../fd/`

它成功地移动了大约 50,000 个文件，其中 mv 和 find 单独失败。

# objective-c - 解析 .plist 项目

> ID：11942425
> 
> 赞同：1
> 
> 时间：2012-08-13T21:15:04.890
> 
> 标签：objective-c, ios, cocoa-touch

当我试图解析一些奇怪的事情时。

我在数我的物品

```
NSString *bundlePathofPlist = [[NSBundle mainBundle]pathForResource:@"Mything" ofType:@"plist"];

     NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:bundlePathofPlist];

        NSArray *dataFromPlist = [dict valueForKey:@"some"];

      NSMutableArray *data = [NSMutableArray array];
    for(int i =0;i<[dataFromPlist count];i++)
    {
        //NSLog(@"%@",[dataFromPlist objectAtIndex:i]);
        [data addObject:[NSNumber numberWithInt:[dataFromPlist count]]];
    }
    [self setTableData:data];

        NSLog(@"%@", tableData); 
```

进而：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    return [tableData count];
} 
```

这很好用，但随后在`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {`

我试过

```
NSString *bundlePathofPlist = [[NSBundle mainBundle]pathForResource:@"Mything" ofType:@"plist"];

NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:bundlePathofPlist];

NSArray *dataFromPlist = [dict valueForKey:@"some"];

NSLog(@"%@", dataFromPlist);

cell.Data.text = [NSString stringWithFormat:@"%@", dataFromPlist];

return cell; 
```

但输出是：

```
2012-08-13 23:08:48.130 [30278:707] (
    Yeah,
    Trol,
   LOL,

) 
```

在我的表格单元中它也显示为

```
(
        Yeah,
        Trol,
       LOL,

    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:27:28.750

所以你得到了

```
( yeah, trol, lol ) 
```

……在一个牢房里，对吧？现在，这很自然。如果您阅读过文档`NSLog's`或`NSString's`文档，您会发现`%@`格式说明符调用对象的描述方法——反过来，对于一个`NSArray`对象，它是一个漂亮的括号、逗号分隔的列表......再次，它的对象的描述.

你可能想要的是

```
cell.Data.text = [dataFromPlist objectAtIndex:indexPath.row]; 
```

# entity-framework - EF 4.4.0.0 code first using group on view not grouping result

> ID：11942426
> 
> 赞同：1
> 
> 时间：2012-08-13T21:15:04.537
> 
> 标签：entity-framework, group-by, ef-code-first

```
public partial class ContactDetailView
{
    public virtual long LayerId { get; set; }
    public virtual long? AccountId { get; set; }
    public virtual long? UserId { get; set; }
    public virtual string LayerDescription { get; set; }
    public virtual long ContactId { get; set; }
    public virtual short CategoryTypeId { get; set; }
    public virtual string ContactCompany { get; set; }
    public virtual long ProfileId { get; set; }
    public virtual string ContactName { get; set; }
    public virtual short? TitleId { get; set; }
    public virtual string TitleDescription { get; set; }
    public virtual short? PhoneTypeId { get; set; }
    public virtual string PhoneNumber { get; set; } 
    public virtual short? EmailTypeId { get; set; }
    public virtual string EmailAddress { get; set; }
}

internal class ContactDetailViewMapping : EntityViewMappingBase<ContactDetailView>
{
    public ContactDetailViewMapping()
        : base()
    {
        HasKey(x => x.UserId).HasKey(x => x.LayerId).HasKey(x => x.ContactId);
        Property(x => x.LayerId).IsRequired();
        Property(x => x.AccountId).IsOptional();
        Property(x => x.UserId).IsOptional();
        Property(x => x.LayerDescription).IsRequired().HasMaxLength(250);
        Property(x => x.ContactId).IsRequired();
        Property(x => x.CategoryTypeId).IsRequired();
        Property(x => x.ContactCompany).IsOptional().HasMaxLength(250);
        Property(x => x.ProfileId).IsRequired();
        Property(x => x.ContactName).IsOptional().HasMaxLength(250);
        Property(x => x.TitleId).IsOptional();
        Property(x => x.TitleDescription).IsOptional().HasMaxLength(250);
        Property(x => x.PhoneTypeId).IsOptional();
        Property(x => x.PhoneNumber).IsOptional().HasMaxLength(15);
        Property(x => x.EmailTypeId).IsOptional();
        Property(x => x.EmailAddress).IsOptional().HasMaxLength(250);

        ToTable("vContactDetail");
    }
}

public interface IContactService : ICIBaseService<Contact>
{
    IQueryable<ContactDetailView> Search(long userId);
    IQueryable<ContactDetailView> ContactsDetail(long userId);
    Contact MatchContact(string firstName, string lastName, string emailAddress);
} 
```

In the controller after I create an instance of the contactService from IContactService , this the code to do the filtering and grouping:

```
 var query = contactService.ContactsDetail(UserContext.UserId);
        if (model.CategoryId > 0)
        {
            query = query.Where(c => c.CategoryTypeId == model.CategoryId);
        } 
        if (model.LayerId > 0)
        {
            query = query.Where(c => c.LayerId == model.LayerId);
        } 
```

AT this point I get back all the data without the grouping:

```
 var result = (from contact in contactService.ContactsDetail(UserContext.UserId)
                    group contact by new
                        {
                            ContactId = contact.ContactId,
                            AccountId = contact.AccountId,
                            UserId = contact.UserId,
                            CategoryTypeId = contact.CategoryTypeId,
                            ContactCompany = contact.ContactCompany,
                            ProfileId = contact.ProfileId,
                            ContactName = contact.ContactName,
                            PhoneTypeId = contact.PhoneTypeId,
                            PhoneNumber = contact.PhoneNumber,
                            EmailTypeId = contact.EmailTypeId,
                            EmailAddress = contact.EmailAddress,
                            TitleId = contact.TitleId,
                            TitleDescription = contact.TitleDescription
                        }
                        into groupedContact
                        select new ContactSearchResultModel
                            {
                                ContactId = groupedContact.Key.ContactId,
                                ContactName = groupedContact.Key.ContactName,
                                Title = groupedContact.Key.TitleDescription,
                                Company = groupedContact.Key.ContactCompany,
                                BusinessEmail = groupedContact.Key.EmailAddress,
                                WorkPhone = groupedContact.Key.PhoneNumber
                            }

                            ).OrderBy(c => c.ContactName)
                            .ToList(); 
```

I should get back 504 rescords I get back 523, all the data without the group. I ran profiler and did not see the group by included in the executed statement

```
exec sp_executesql N'SELECT 
[Project1].[C1] AS [C1], 
[Project1].[ContactId] AS [ContactId], 
[Project1].[ContactName] AS [ContactName], 
[Project1].[TitleDescription] AS [TitleDescription], 
[Project1].[ContactCompany] AS [ContactCompany], 
[Project1].[EmailAddress] AS [EmailAddress], 
[Project1].[PhoneNumber] AS [PhoneNumber]  
FROM ( SELECT 
[Extent1].[ContactId] AS [ContactId], 
[Extent1].[ContactCompany] AS [ContactCompany], 
[Extent1].[ContactName] AS [ContactName], 
[Extent1].[TitleDescription] AS [TitleDescription], 
[Extent1].[PhoneNumber] AS [PhoneNumber], 
[Extent1].[EmailAddress] AS [EmailAddress], 
1 AS [C1]
FROM [dbo].[vContactDetail] AS [Extent1]
WHERE [Extent1].[UserId] = @p__linq__0
)  AS [Project1]
ORDER BY [Project1].[ContactName] ASC',N'@p__linq__0 bigint',@p__linq__0=2 
```

Any ideas is greatly appreciated.

For now I made work by issuing the filter first, retrieving the data and doing the groupby after I get the result.

# python - 将字符串拆分为字符串

> ID：11942429
> 
> 赞同：2
> 
> 时间：2012-08-13T21:15:20.340
> 
> 标签：python

有没有办法在一个字符处将字符串拆分为多个（不仅仅是 2 个）字符串，允许空白字符串，字符串名称和顺序已知？例如：

`john..doe.1985`会分裂成`first = 'john'`, `middle = ''`, `last = 'doe'`, 和`dob = 1985`?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T21:17:23.943

您可以使用`split`方法和可迭代解包：

```
>>> first, middle, last, str_dob = "john..doe.1985".split(".")
>>> dob = int(str_dob)
>>> first
'john'
>>> middle
''
>>> last
'doe'
>>> dob
1985 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-13T21:18:04.503

```
>>> first, middle, last, dob = 'john..doe.1985'.split('.')
>>> first
'john'
>>> middle
''
>>> last
'doe'
>>> dob
'1985' 
```

# android - Android 在 GoogleMap 应用程序中使用 NullPointerException 强制关闭

> ID：11942430
> 
> 赞同：1
> 
> 时间：2012-08-13T21:15:25.423
> 
> 标签：android, google-maps, overlay, forceclose, geopoints

在这个活动中，我从数据库中的任务表中获取纬度和经度，然后我将它们放入带有标记图像的地图中：

我在日志猫中有一个强制关闭，出现空指针异常...

```
public class MaptoDo extends MapActivity{
MapView mv;
MapController mc;
SQLiteDatabase sql;
Cursor c;
GeoPoint p;
double [] lat;
double[]lon;
List<Overlay> listOfOverlays;
  @Override
    public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Intent in =getIntent();
        mv=(MapView) findViewById(R.id.mapView);
        mv.setBuiltInZoomControls(true);
        mv.setSatellite(true);
        mv.setTraffic(true);
        sql=openOrCreateDatabase("db",0,null);
        c=sql.rawQuery("select * from Mission",null);
        if(c.getColumnCount()!=0){
            int i=0;
            while(c.moveToNext()!=false){
                lat[i]=c.getDouble(3);
                lon[i]=c.getDouble(4);
            }
            }
        for(int i=0;i<lat.length;i++)
        {
            p=new GeoPoint((int)lat[i]*1000000,(int) lon[i]*1000000);
            mc.animateTo(p);
            mc.setZoom(8);
            MapOverlay mapOverlay = new MapOverlay();
            listOfOverlays = mv.getOverlays();
            listOfOverlays.clear();
            listOfOverlays.add(mapOverlay);
            mv.invalidate();

        }
    }
  @Override
  public boolean onCreateOptionsMenu(Menu menu) {
    // TODO Auto-generated method stub
    MenuItem itIn=menu.add("Zoom in");
    itIn.setIcon(R.drawable.in);
    MenuItem itOut=menu.add("Zoom out");
    itOut.setIcon(R.drawable.out);
    return super.onCreateOptionsMenu(menu);

  }
  @Override
  public boolean onOptionsItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
    if(item.getTitle()=="Zoom in")
    {
        MapController mc=mv.getController();
        mc.zoomIn();
    }
    else if(item.getTitle()=="Zoom out")
    {
        MapController mc=mv.getController();
        mc.zoomOut();
    }

    return super.onOptionsItemSelected(item);
  }
@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

public class MapOverlay extends com.google.android.maps.Overlay
{
    @Override
    public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
            long when) {
        super.draw(canvas, mapView, shadow);
        Point screenPts = new Point();
        mapView.getProjection().toPixels(p, screenPts);
        Bitmap bmp = BitmapFactory.decodeResource(
        getResources(), R.drawable.redpushpin);
        canvas.drawBitmap(bmp, screenPts.x-20, screenPts.y-34, null);
        return true;
    }
    @Override
    public boolean onTouchEvent(MotionEvent event, MapView mapView)
    {
    if (event.getAction() == 1) {
    GeoPoint p = mapView.getProjection().fromPixels((int) event.getX(),(int) event.getY());
    Toast.makeText(getBaseContext(),"Location: "+p.getLatitudeE6() / 1E6 + "," +
    p.getLongitudeE6() /1E6 ,Toast.LENGTH_SHORT).show();
    }
            return false;

    }
} 
```

}

这是 logcat 的踪迹：

```
08-14 00:43:33.068: E/AndroidRuntime(652): FATAL EXCEPTION: main
  08-14 00:43:33.068: E/AndroidRuntime(652): java.lang.RuntimeException: Unable to start activity ComponentInfo{sarah.android/sarah.android.MaptoDo}: java.lang.NullPointerException
   08-14 00:43:33.068: E/AndroidRuntime(652):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
   08-14 00:43:33.068: E/AndroidRuntime(652):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
   08-14 00:43:33.068: E/AndroidRuntime(652):   at android.app.ActivityThread.access$1500(ActivityThread.java:117)
   08-14 00:43:33.068: E/AndroidRuntime(652):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
   08-14 00:43:33.068: E/AndroidRuntime(652):   at android.os.Handler.dispatchMessage(Handler.java:99)
  08-14 00:43:33.068: E/AndroidRuntime(652):    at android.os.Looper.loop(Looper.java:130)
   08-14 00:43:33.068: E/AndroidRuntime(652):   at android.app.ActivityThread.main(ActivityThread.java:3683)
  08-14 00:43:33.068: E/AndroidRuntime(652):    at java.lang.reflect.Method.invokeNative(Native Method)
  08-14 00:43:33.068: E/AndroidRuntime(652):    at java.lang.reflect.Method.invoke(Method.java:507)
  08-14 00:43:33.068: E/AndroidRuntime(652):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
   08-14 00:43:33.068: E/AndroidRuntime(652):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
  08-14 00:43:33.068: E/AndroidRuntime(652):    at dalvik.system.NativeStart.main(Native Method)
 08-14 00:43:33.068: E/AndroidRuntime(652): Caused by: java.lang.NullPointerException
 08-14 00:43:33.068: E/AndroidRuntime(652):     at sarah.android.MaptoDo.onCreate(MaptoDo.java:40)
 08-14 00:43:33.068: E/AndroidRuntime(652):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
 08-14 00:43:33.068: E/AndroidRuntime(652):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T21:53:01.767

```
lat[i]=c.getDouble(3);
lon[i]=c.getDouble(4); 
```

看起来你没有初始化你的数组，你只是在顶部声明了它们：

```
double [] lat;
double [] lon; 
```

您必须实例化它们，例如：

```
double [] lat = new double[5];
double [] lon = new double[5]; 
```

您还需要`mc`在调用变量之前对其进行实例化。你可以像这样实例化它：

```
mc = mv.getController(); 
```

# mysql - 具有计数的左外连接不返回计数为 0 的行

> ID：11942431
> 
> 赞同：2
> 
> 时间：2012-08-13T21:15:26.080
> 
> 标签：mysql

我正在尝试返回表 A（组）中所有项目的简单列表，其中包含 B 列（users_groups）中相应用户数的计数，但我无法弄清楚我哪里出错了。

```
SELECT groups.gid, name, COUNT(uid) AS groupcount
FROM groups
LEFT OUTER JOIN users_groups ON groups.gid = users_groups.gid
WHERE aid = ? 
```

我目前有两个组，其中一个有三个用户。该行以 groupcount 中的正确值返回，但我错过了应该以 0 groupcount 显示的第二行。谁能指出我正确的方向？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T21:17:58.477

大概这是因为援助在 users_groups 中而不是在组中。

左外连接将创建一个值为 NULL 的行。“is null”以外的任何比较都将导致不匹配。

您可以通过执行以下操作来解决此问题：

```
where coalesce(aid, ??) = ?? 
```

如果这是您查询的意图。

或者，另一种选择是您的查询中没有分组依据。试试这个：

```
SELECT groups.gid, name, COUNT(uid) AS groupcount
FROM groups LEFT OUTER JOIN
     users_groups
     ON groups.gid = users_groups.gid
WHERE aid = ? 
group by groups.gid, name 
```

Mysql 的缺点是您可以在 SELECT 子句中包含未聚合的列。但是，它仅按 group by 中的内容分组。由于您没有为分组指定任何内容，因此它会在所有数据上生成一行。gid 和 name 的值是从输入中任意选择的。

# php - PHP site built in local, need to transfers include paths and secure files with .htacces

> ID：11942441
> 
> 赞同：0
> 
> 时间：2012-08-13T21:15:52.307
> 
> 标签：php, .htaccess, webserver, localhost, php-include

I am making a site in local.

My paths looks like this in my website : (I know they are written in a dirty way...)

in php :

```
include 'C:\wamp\www\horticole/inventaire/pages-parts/listing/next-page-module.php'; 
```

in html :

```
background:url(http://localhost/horticole/images/header-bg-small.jpg);

// other example : 
<img src="http://localhost/horticole/inventaire/photos/indisponible.jpg" /> 
```

So, what will be the replacement acceptables links for the php files and for the html files ? ) Per example, for an include, what do I do here : (let's say my site name is www.urmom.com

```
include 'www.urmom.com/inventaire/pages-parts/listing/next-page-module.php';

//or
include 'http://www.urmom.com/inventaire/pages-parts/listing/next-page-module.php';

//or
include 'public_html/inventaire/pages-parts/listing/next-page-module.php';

//or what ? 
```

also, if I include this :

```
include '(site)/pages-parts/database-settings.php'; 
```

Will it be secure ? can someone can acces to my database settings or it's okay like this ? It may look dumb, but can people include my file and use my variables ?

The only thing I secured is PDO requests. I will replace all the links at once with a ctrl+f, so I want to be sure that it will work before giving acces to anything to public. I also want that only my "includes" and "require" in scripts can acces to the files in "(site)/pages-parts" or other folders, not visitors. what would be the .htacces code to place in the .htacces file in this folder to do that ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T21:31:32.593

To include a file you could use something like this:

```
require_once($_SERVER['DOCUMENT_ROOT'] . '/pathtofile.php'); 
```

Regarding the security of `include '(site)/pages-parts/database-settings.php';`

That depends on what is in that file. However, on a high level, a way to protect that file would be to move it from the document root folder

# css - 嵌套在锚点中的跨度的以下标记应该是什么？

> ID：11942442
> 
> 赞同：1
> 
> 时间：2012-08-13T21:15:53.710
> 
> 标签：css, html

我正在尝试学习 html 和标记的基础知识。

我想创建一个包含两行信息的锚。

第一行：链接名称第二行：简短说明

例如

```
<a href='#'>
<span>Studies</span>
<span class="alt">-Information about studies</span>
</a> 
```

它是否正确？

如有必要，应如何修改以下（第二跨度）？

谢谢

PS。两条线都需要用跨度包围以进行 CSS 样式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T23:20:43.727

首先，不排除使用`br`标签。这是一个适合`br`标签的语义位置（强制在一行或一段文本内进行硬中断）。另外，如果您使用`br`标签，则可能不再需要将两行文本中的任何一行放在单独的标签中，除非您想对它们进行不同的样式设置。

```
<a href='#'>
    Studies<br/>
    -Information about studies
</a> 
```

其次，尝试在禁用样式表的情况下查看 HTML（我在 Firefox 中通过按 ctrl-shift-S 执行此操作，并借助 Web Developer 扩展提供了一点帮助）。浏览器是否能够仅基于提供的 HTML 以易于阅读的方式呈现内容？在某种程度上，“无样式”内容出现的可读性越高，HTML 的语义就越正确。

鉴于第二行文本似乎次于第一行（副标题，不那么重要，可能多余或不完全必要），将第一行放在`strong`标签中或将第二行放在`small`标签中是两种方法如果您愿意，可以确定两条线的相对重要性。

```
<a href='#'>
    <strong>Studies</strong><br/>
    -Information about studies
</a>

<a href='#'>
    Studies<br/>
    <small>-Information about studies</small>
</a> 
```

这里有一些个人喜好的空间。这只是两种方法。

在这种情况下使用标签可能有点牵强`small`，但并非完全不合适。标签通常`small`用于“细则”、归属、免责声明或旁注。它在语义上并不意味着文本很小，但它确实倾向于用于次要于其他内容的内容（阐明其他内容）。它应该只用于长度较短的文本。

并且`strong`标签不必设置为粗体。事实上，这就是语义标记的全部意义：它没有指定或暗示内容的样式。它所做的只是为内容的含义或上下文提供提示。可以`strong`合理地为标签赋予`font-weight:normal`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:19:21.723

为了实现这些在单独的行中，请尝试改用`<div>`标签。您仍然可以为样式指定一个类，唯一的区别是`<div>`s 是块元素；它们中的每一个都呈现在单独的行上。这是您的代码的修改版本：

```
<a href='#'>
Studies
<div class="alt">-Information about studies</div>
</a> 
```

另一种更可取的方法是将元素设置为块元素。可以通过将 CSS[显示](http://www.w3schools.com/cssref/pr_class_display.asp)属性设置为`block`. 就像是：

```
<a href='#'>
Studies
<span class = "alt block">-Information about studies</span>
</a> 
```

（请注意，这`class = "alt block"`意味着该元素同时具有类`alt`和`block`，并且还要注意第一个`<span>`已被删除，因为不需要使用任何东西来设置该节点的样式）。

CSS：

```
.block {
    display: block;
} 
```

希望对您有所帮助！

# r - 获取数据表中每一行的最后 1 的索引 (R)

> ID：11942443
> 
> 赞同：4
> 
> 时间：2012-08-13T21:16:03.657
> 
> 标签：r, data.table

我目前正在尝试习惯`data.table`在`R`. 我想获取`1`数据表每一行中最后一次出现的索引，比如`a`将该新列添加到`a`. 我的代码如下：

```
 a = data.table(matrix(sample(c(0,1),500,rep=T),50,10))
  a[,ind:=apply(a==1,1,function(x) max(which(x)))] 
```

尽管如此，我认为这可以使用更多`data.table`语法以简短的方式编写。因此，我的问题是：如何在没有组件`apply`内的功能的情况下做到这一点？`j``[`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T22:22:44.270

好问题。是的`apply`，逐行不是页面效率，`which`将为每一行分配，并`a==1`创建一个新的逻辑矩阵，大小为`a`.

在`data.table`我们按列做事。 *有时*，`data.table`使用`for`列循环（从不`for`循环行）是-ish：

```
a[,ans:=0L]
for (i in 1:10) set(a,which(a[[i]]==1),"ans",i)

identical(a$ind, a$ans)
# [1] TRUE 
```

如您所见，这是一种完全不同的风格。但是，我认为，这应该是：

*   页面高效；即，它按内存中连续的列运行
*   需要与（仅）一列而不是整列一样大的工作内存`a`
*   调用`which()`（非原始向量化函数）`10`而不是`nrow(a)`时间

不过，我没有做任何速度测试，所以我可能不得不吃掉我的话。

见`?set`。

作为对评论的回应，为了检查它是如何工作的，`set`恰好返回了一个指向 的指针`data.table`，因此我们可以查看前几行的进展情况。

```
a[,ans:=0L]   # add column by reference, initialized with 0L

> head(a)
   V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 ans
1:  0  0  1  0  1  1  0  1  1   1   0
2:  0  0  1  1  0  0  1  1  1   1   0
3:  0  1  0  0  0  1  1  1  1   0   0
4:  0  0  0  1  1  0  1  1  1   1   0
5:  1  1  1  1  0  0  0  0  0   1   0
6:  1  1  0  1  1  0  1  0  1   1   0 
```

现在希望以下内容揭示了它是如何工作的：

```
> for (i in 1:10) print(head(set(a,which(a[[i]]==1),"ans",i)))
   V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 ans
1:  0  0  1  0  1  1  0  1  1   1   0
2:  0  0  1  1  0  0  1  1  1   1   0
3:  0  1  0  0  0  1  1  1  1   0   0
4:  0  0  0  1  1  0  1  1  1   1   0
5:  1  1  1  1  0  0  0  0  0   1   1
6:  1  1  0  1  1  0  1  0  1   1   1
   V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 ans
1:  0  0  1  0  1  1  0  1  1   1   0
2:  0  0  1  1  0  0  1  1  1   1   0
3:  0  1  0  0  0  1  1  1  1   0   2
4:  0  0  0  1  1  0  1  1  1   1   0
5:  1  1  1  1  0  0  0  0  0   1   2
6:  1  1  0  1  1  0  1  0  1   1   2
   V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 ans
1:  0  0  1  0  1  1  0  1  1   1   3
2:  0  0  1  1  0  0  1  1  1   1   3
3:  0  1  0  0  0  1  1  1  1   0   2
4:  0  0  0  1  1  0  1  1  1   1   0
5:  1  1  1  1  0  0  0  0  0   1   3
6:  1  1  0  1  1  0  1  0  1   1   2
   V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 ans
1:  0  0  1  0  1  1  0  1  1   1   3
2:  0  0  1  1  0  0  1  1  1   1   4
3:  0  1  0  0  0  1  1  1  1   0   2
4:  0  0  0  1  1  0  1  1  1   1   4
5:  1  1  1  1  0  0  0  0  0   1   4
6:  1  1  0  1  1  0  1  0  1   1   4
   V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 ans
1:  0  0  1  0  1  1  0  1  1   1   5
2:  0  0  1  1  0  0  1  1  1   1   4
3:  0  1  0  0  0  1  1  1  1   0   2
4:  0  0  0  1  1  0  1  1  1   1   5
5:  1  1  1  1  0  0  0  0  0   1   4
6:  1  1  0  1  1  0  1  0  1   1   5
   V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 ans
1:  0  0  1  0  1  1  0  1  1   1   6
2:  0  0  1  1  0  0  1  1  1   1   4
3:  0  1  0  0  0  1  1  1  1   0   6
4:  0  0  0  1  1  0  1  1  1   1   5
5:  1  1  1  1  0  0  0  0  0   1   4
6:  1  1  0  1  1  0  1  0  1   1   5
   V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 ans
1:  0  0  1  0  1  1  0  1  1   1   6
2:  0  0  1  1  0  0  1  1  1   1   7
3:  0  1  0  0  0  1  1  1  1   0   7
4:  0  0  0  1  1  0  1  1  1   1   7
5:  1  1  1  1  0  0  0  0  0   1   4
6:  1  1  0  1  1  0  1  0  1   1   7
   V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 ans
1:  0  0  1  0  1  1  0  1  1   1   8
2:  0  0  1  1  0  0  1  1  1   1   8
3:  0  1  0  0  0  1  1  1  1   0   8
4:  0  0  0  1  1  0  1  1  1   1   8
5:  1  1  1  1  0  0  0  0  0   1   4
6:  1  1  0  1  1  0  1  0  1   1   7
   V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 ans
1:  0  0  1  0  1  1  0  1  1   1   9
2:  0  0  1  1  0  0  1  1  1   1   9
3:  0  1  0  0  0  1  1  1  1   0   9
4:  0  0  0  1  1  0  1  1  1   1   9
5:  1  1  1  1  0  0  0  0  0   1   4
6:  1  1  0  1  1  0  1  0  1   1   9
   V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 ans
1:  0  0  1  0  1  1  0  1  1   1  10
2:  0  0  1  1  0  0  1  1  1   1  10
3:  0  1  0  0  0  1  1  1  1   0   9
4:  0  0  0  1  1  0  1  1  1   1  10
5:  1  1  1  1  0  0  0  0  0   1  10
6:  1  1  0  1  1  0  1  0  1   1  10
> 
```

# ruby - Has anyone gotten Padrino to work with Sprockets and Compass?

> ID：11942449
> 
> 赞同：2
> 
> 时间：2012-08-13T21:16:39.263
> 
> 标签：ruby, rack, sprockets, padrino

I'm on Padrino 0.10.7 and I haven't been able to get Sprockets to recognize Compass in the load path.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-06T00:01:18.323

这是我在这个主题上找到的唯一一个关于 SO 的问题。

得到这个与以下工作：

*   [padrino-pipeline](https://github.com/Ortuna/padrino-pipeline) gem - 沿着 Sprockets 路线走下去

在某个地方（我使用了我的 app.rb 文件），您将需要以下内容：

```
Sass.load_paths << "#{Gem.loaded_specs['compass'].full_gem_path}/frameworks/compass/stylesheets"
Sass.load_paths << "#{Gem.loaded_specs['compass'].full_gem_path}/frameworks/blueprint/stylesheets" 
```

不确定是否有更简单的方法。感觉应该有。此外，任何让 image-url() sass 方法工作的巧妙方法？

**编辑**：有一种方法可以让 image-url 工作 - 如果你认为上面的内容很混乱，也可以将它添加到你的 app.rb 中......

```
assets.context_class.class_eval do
  def settings
    YourAppName::App.settings
  end

  include Padrino::Helpers::AssetTagHelpers
end 
```

（其中 YourAppName 是描述您的应用程序的模块的名称，位于 app.rb 的顶部）

# knockout.js - 如何使用淘汰赛 js 进行以下验证？

> ID：11942453
> 
> 赞同：0
> 
> 时间：2012-08-13T21:17:01.243
> 
> 标签：knockout.js

如何使用淘汰赛 js 进行以下验证？我有以下视图模型：

```
function ViewModel () {
        var self = this;
        self.ListName = ko.observable();
        self.Current = ko.observable();
        self.MyVideos = ko.observableArray();
    } 
```

MyVideos 具有以下结构：

```
 [{
                "VideoID": 1,
                "VideoName": "First Video"
    },
    {
                "VideoID": 2,
                "VideoName": "First Video"
    }] 
```

所以 Current 和 VideoId 是关系，我想用 self.Current 值呈现 VideoName。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:38:39.240

您可以松散地使用这个快速编写的代码。它创建一个计算来查找第一个数组项及其 VideoName 属性。当然，还要添加错误检查。

```
self.Current = ko.computed(function(){
    return self.MyVideos()[0].VideoName;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T00:17:32.883

听起来像是`Current`并且`VideoId`您想要显示`VideoName`. 对于那种情况，你可以这样做：

```
self.CurrentName = ko.computed(function() {
    var currentId = self.Current();

    var currentVideo = ko.utils.arrayFirst(self.MyVideos(), function(video) {
        return currentId === video.VideoId; 
    });

    return currentVideo ? currentVideo.VideoName : 'none';

}); 
```

# asp.net - Integer column in GridView is being sorted as a string

> ID：11942454
> 
> 赞同：2
> 
> 时间：2012-08-13T21:17:09.713
> 
> 标签：asp.net, vb.net, gridview, gridview-sorting

I have a `GridView`, which has a column as shown below:

```
<asp:TemplateField HeaderText="Vendor Path" SortExpression="DocumentTemplateFieldID" ItemStyle-HorizontalAlign="Center" HeaderStyle-HorizontalAlign="Center">
    <ItemTemplate>
        <asp:Label ID="vendor" Height="10px" Width="60px" runat="server" Text='<%# Eval("DocumentTemplateFieldID") %>'> </asp:Label>
    </ItemTemplate>
</asp:TemplateField> 
```

I allow sorting; however, it sorts it as if it were a string. In the database, it is an integer column.

How do I make my `GridView` accept that I'm really putting integers in there? I tried to convert it and that didn't work.

Code added:

```
Protected Sub TaskGridView_Sorting(ByVal sender As Object, ByVal e As GridViewSortEventArgs) Handles GridView1.Sorting
    dsData = Session("dataTableView")
    Dim sortExpression As String = e.SortExpression
    Dim direction As String = String.Empty
    If SortDirection = SortDirection.Ascending Then
        SortDirection = SortDirection.Descending
        direction = " DESC"
    Else
        SortDirection = SortDirection.Ascending
        direction = " ASC"
    End If
    Dim table As DataTable = dsData
    table.DefaultView.Sort = sortExpression + direction
    GridView1.DataSource = table
    GridView1.DataBind()
    Session("dataTableView") = table
End Sub
Private Property SortDirection() As SortDirection
    Get
        If Session("sortDir") = Nothing Then
            Session("sortDir") = SortDirection.Ascending
        End If

        Return CType(Session("sortDir"), SortDirection)
    End Get

    Set(ByVal value As SortDirection)
        Session("sortDir") = value
    End Set

End Property 
```

Updated:

```
Public Function initialQuery(ByVal vendorID As String) As DataTable
    Dim objConn As IDbConnection = Nothing
    Dim dsData As New DataTable
    Dim objParams(0) As IDbDataParameter
    Try
        objConn = DBAccess.GetConnection
        objParams(0) = DBAccess.CreateParameter("DWSVendorID", DbType.String, vendorID, ParameterDirection.Input)
        'Need to figure out how to add the below code:
        If (Not IsNothing(vendorID) And Not vendorID = 0) Then

            '      strBlder.Append("WHERE B.DocumentProviderID = '" + vendorID.ToString + "' ")
        End If
        dsData = DBAccess.ExecuteDataTable(objConn, DataAccessHelper.Schema & "LLC.[DWSMappingToolInitialQuery]", objParams)

    Finally
        If Not objConn Is Nothing Then
            DBAccess.CloseConnection(objConn)
        End If
    End Try
    If dsData.Rows.Count > 0 Then
        Return dsData
    End If

    Return Nothing
End Function 
```

# linux - Find -exec and Bash scripts

> ID：11942457
> 
> 赞同：0
> 
> 时间：2012-08-13T21:17:26.907
> 
> 标签：linux, bash

I'm writing a script in bash. I invoke it with

```
find *.zip -type f -exec ./myscript.sh {} \; 
```

At the top of my script I invoke another script like this:

```
#!/bin/bash
. ticktick.sh 
```

I get the following error

```
.: ticktick.sh: file not found 
```

If I invoke the script like this

```
./myscript.sh somefile.zip 
```

it works If I put the ticktick.sh script in my path in another directory it breaks, so that isn't an option. Is there some special kind of context that scripts called with a find have? I'm obviously new to BASH scripting. Any help would be appreciated

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:43:20.673

我认为有2个问题。

1.：如果要搜索当前目录下的所有zip文件，必须编写如下命令

```
find . -type f -name *.zip -exec ... 
```

2.：你在 myscript.sh 之前执行 ./ 。所以 myscript.sh 必须在当前工作目录中。如果您的脚本位于 /home/jd/ 并且您从 /home/ 执行它，您的 myscript.sh 将找不到。首先，您必须确定文件的目录：

```
install_path=$(dirname $(readlink -f $0)) 
```

所以你完整的 find 命令是：

```
find . -type f -name *.zip -exec $install_path/myscript.sh {} \; 
```

myscript.sh 文件必须与 ticktick.sh 位于同一目录中

# objective-c - 引用另一个类的静态 NSString * const

> ID：11942458
> 
> 赞同：21
> 
> 时间：2012-08-13T21:17:32.507
> 
> 标签：objective-c, static, constants

在 AI 类中有这个：

```
static NSString * const kMyConstant = @"my constant string"; 
```

我如何从 B 类中引用它？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-13T21:23:21.800

您应该在标题中 extern 字符串，然后在实现中定义字符串。

```
//ClassA.h
extern NSString * const kMyConstant;

//ClassA.m
NSString * const kMyConstant = @"my constant string";

//ClassB.h/m
#import "ClassA.h"

...
    NSLog(@"String Constant: %@", kMyConstant); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-13T21:21:50.317

您需要删除`static`-- 指定`kMyConstant`仅在与此链接的文件中可见。

然后，在 Class A 的标头中声明（而不是*定义*）字符串：

```
extern NSString * const kMyConstant; 
```

并将该标头导入您要使用此字符串的任何位置。该`extern`声明说存在一个`NSString * const`名称`kMyConstant`，其存储是在其他地方创建的。

如果静态定义*已经*在标头中，则需要将其移至其他位置（通常是实现文件）。事物只能定义一次，如果您尝试导入定义变量的文件，您将收到链接器错误。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-13T21:22:34.543

如果它是静态的，则不能（这就是 static 关键字的用途）。

但是，如果您只是将其声明为全局变量，则可以执行以下操作：

```
// ClassA.m

NSString *const str = @"Foo";

// ClassB.m

extern NSString *const str;

NSLog(@"str is: %@", str); 
```

# email - Emails marked as spam - SPF passes, DKIM passes, sender-id passes

> ID：11942459
> 
> 赞同：12
> 
> 时间：2012-08-13T21:17:46.143
> 
> 标签：email, gmail, dns, spf, dkim

I've been struggling to figure out why this is happening, but my emails are being marked as spam by Gmail and Hotmail (they work in Yahoo.)

SPF, DKIM, rDNS, and sender-id all pass. What's weirder is I've send the EXACT same email with its exact contents from my dev server and Gmail accepts it as not spam even though every one of those checks which passes in production fails in dev. Hotmail still marks it as spam though.

Any idea what could be going on? Here is an example header from Gmail (with IPs and domains changed for privacy):

```
Delivered-To: REMOVED@gmail.com
Received: by 10.194.16.130 with SMTP id g2csp192349wjd;
    Mon, 13 Aug 2012 14:04:10 -0700 (PDT)
Received: by 10.236.193.105 with SMTP id j69mr12819871yhn.21.1344891849751;
    Mon, 13 Aug 2012 14:04:09 -0700 (PDT)
Return-Path: <mailer@mydomain.com>
Received: from mail.mydomain.com (mydomain.com. [xxx.xxx.xxx.xxx])
    by mx.google.com with ESMTPS id e22si563514yhh.132.2012.08.13.14.04.08
    (version=TLSv1/SSLv3 cipher=OTHER);
    Mon, 13 Aug 2012 14:04:09 -0700 (PDT)
Received-SPF: pass (google.com: domain of mailer@mydomain.com designates xxx.xxx.xxx.xxx as permitted sender) client-ip=xxx.xxx.xxx.xxx;
Authentication-Results: mx.google.com; spf=pass (google.com: domain of mailer@mydomain.com designates xxx.xxx.xxx.xxx as permitted sender) smtp.mail=mailer@mydomain.com; dkim=pass header.i=@mydomain.com
Received: from mydomain.com (localhost [127.0.0.1])
by mail.mydomain.com (8.14.4/8.14.4/Debian-2ubuntu1) with ESMTP id q7DL48tq019625
for <REMOVED@gmail.com>; Mon, 13 Aug 2012 17:04:08 -0400
X-DKIM: OpenDKIM Filter v2.3.2 mail.mydomain.com q7DL48tq019625
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=mydomain.com;
s=server; t=1344891848;
bh=lpw+5POmINBjQYgQBdJvY2d+m84MY8hwTqZ6riNfH8I=;
h=Date:From:To:Message-ID:Subject:Mime-Version:Content-Type:
 Content-Transfer-Encoding;
b=KnYSvSzFewOGFyYWvP1DfCvyRfp6y31BfOPTOgRsZ7nGB4PXuau84euzuhs82V4lx
 ++DjN3iPxSj07euW+y7aRe9R2YiXKJFVNh7cbcJX8+tc3LMmnR7Cv27iP3Yvv6mQMd
 uz4Engql3bXLVVDKcLLj/Fj2eiwtWzW4chA2GNTQ=
Received: (from root@localhost)
by mydomain.com (8.14.4/8.14.4/Submit) id q7DL48Dm019624
for REMOVED@gmail.com; Mon, 13 Aug 2012 17:04:08 -0400
Date: Mon, 13 Aug 2012 17:04:08 -0400
From: "Website" <mailer@mydomain.com>
To: REMOVED@gmail.com
Message-ID: <50296bc866dfc_4b8593bd18556b8@mydomain.com.mail>
Subject: You've received a message from Bob.
Mime-Version: 1.0
Content-Type: text/html;
charset=UTF-8
Content-Transfer-Encoding: 7bit
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=mydomain.com; q=dns/txt; s=server; t=1344891848; bh=LfadLl6eJEB+NgiTbBlcBhOt/9NKcG0wapkrAjlGqfg=; h=content-transfer-encoding:content-type:date:from:message-id:mime-version:subject:to; b=mTB8TBb+gG7ESxeVbfqHANKUMeNbdwK/hSIq58oin5ERNSMKOIvZKY9cQJRoY/Q96PQ7J+7b3ZkZuwcg+zMkQyhK7YACvFAz4SUWqpdqiZrBDw8Vqy3PjkGFcz2V5vyUOjI6vN/Y6iOj1zlocC+/p8lkpw3upwxr7cNoe5/Kwu8= 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T00:25:42.557

另一个人不知道他在说什么，只是在猜测。

'Received: (from root@localhost)' 是你的问题。这需要反映来自电子邮件...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:43:54.843

你的问题是：

**域：** mydomain.com **ip：** xxx.xxx.xxx.xxx

还有**root@** localhost

您需要更改邮件客户端中的信息！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-08T14:49:17.323

我有完全一样的问题。就我而言，我已经正确配置了我的邮件客户端。我有一个主域 ( `mydomain.com`)，我的邮件服务器还支持`mydomain2.com`使用 virtual_domains 的另一个域 ( )。但是，用于 ( `mydomain2.com`) 的电子邮件始终以 Gmail 中的垃圾邮件告终。邮件测试员的分数`mydomain2.com`是`9.7/10`。这是来自 Gmail 的原始标头（我已将 IP 和电子邮件地址替换为示例 ips）

```
Delivered-To: myemail@gmail.com
Received: by 10.80.177.154 with SMTP id m26csp9759783edd;
        Sat, 7 Jan 2017 16:28:58 -0800 (PST)
X-Received: by 10.84.128.67 with SMTP id 61mr108683153pla.153.1483835337902;
        Sat, 07 Jan 2017 16:28:57 -0800 (PST)
Return-Path: <noreply@mydomain2.com>
Received: from mail.mydomain.com (xx-xxx-x-xxx.com. [xx.xxx.x.xxx])
        by mx.google.com with ESMTPS id s186si84168719pgb.6.2017.01.07.16.28.57
        for <myemail@gmail.com>
        (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
        Sat, 07 Jan 2017 16:28:57 -0800 (PST)
Received-SPF: pass (google.com: domain of noreply@mydomain2.com designates xx.xxx.x.xxx as permitted sender) client-ip=xx.xxx.x.xxx;
Authentication-Results: mx.google.com;
       dkim=pass header.i=@mydomain2.com;
       spf=pass (google.com: domain of noreply@mydomain2.com designates xx.xxx.x.xxx as permitted sender) smtp.mailfrom=noreply@mydomain2.com;
       dmarc=pass (p=REJECT dis=NONE) header.from=mydomain2.com
Received: from myhomerouter by mail.mydomain.com (Postfix) with ESMTPSA id 284538419F for <myemail@gmail.com>; Sun,
  8 Jan 2017 00:28:57 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=mydomain2.com; s=mail; t=1483835337; bh=g3zLYH4xKxcPrHOD18z9YfpQcnk/GaJedfustWU5uGs=; h=From:Subject:Date:To:From; b=rwN/rSaqojz5pKVoYwb99Ec0TZzkHCo140KMlFVe47jl7Ui64w4DoNpCgZFeYEX87
     8NZuBQdfnrirZWbZ7ibydoi07Poz6PZjKoLdRToMcqrtcGVfA+UrJPGQ3EE/QrnYf4
     W0Hyb3PpUO+WVcwDL/rvvVm6ZnfjdIjobJpFj1fU=
From: First Name lastname <noreply@mydomain2.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Mac OS X Mail 10.2 \(3259\))
Subject: Test
Message-Id: <8D89561C-0226-4C6B-A8D1-54A2F210F031@mydomain2.com>
Date: Sat, 7 Jan 2017 19:28:56 -0500
To: First Name <myemail@gmail.com>
X-Mailer: Apple Mail (2.3259)

test 
```

# php - PHP - Selenium 服务器不通过 PHPUnit_Extension_SeleniumTestCase 连接？

> ID：11942461
> 
> 赞同：0
> 
> 时间：2012-08-13T21:17:47.467
> 
> 标签：php, selenium, phpunit

我刚刚通过“pear install phpunit/PHPUnit_Selenium”安装了 PHPUnit Selenium 扩展。该系统目前仍在使用 PHP 5.2，因此我必须使用 PHPUnit_Extension_SeleniumTestCase 而不是 PHPUnit_Extension_Selenium2TestCase。我一直在尝试运行 PHPUnit 文档中给出的基本测试：

```
<?php
class WebTest extends PHPUnit_Extensions_SeleniumTestCase
{
    protected function setUp()
    {
        $this->setBrowser('firefox');
        $this->setBrowserUrl('http://www.example.com/');
    }

    public function testTitle()
    {
        $this->url('http://www.example.com/');
        $this->assertEquals('Example WWW Page', $this->title());
    }

}
?> 
```

但是，由于以下原因，测试中的测试结果被跳过：

```
1) WebTest::testTitle
Could not connect to the Selenium Server on localhost:4444.

Z:\applications\xampplite\php\phpunit:46 
```

有人对我为什么会遇到这个问题有任何建议吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:58:31.897

解决方案是一个愚蠢的解决方案。我没有启动和运行 Selenium 服务器。如果您有同样的问题，请确保从[Selenium 下载页面](http://seleniumhq.org/download/)下载服务器，然后在尝试测试之前启动 jar。

# java - 创建和维护多个密码

> ID：11942466
> 
> 赞同：3
> 
> 时间：2012-08-13T21:18:08.620
> 
> 标签：java, multithreading, encryption

我遇到了一个问题，即多个线程正在争夺 RSA `javax.crypto.Cipher`，我正在考虑保留一组密码 - 每个线程一个。但是`Cipher.getInstance()`给了我同样的例子。我应该研究 a`clone()`还是有更好的方法，比如 a `new Cipher()`？我们已经考虑过`synchronized{}`并且只使用单个实例，`Cipher`但它太慢了。感谢您提前提供的所有帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T21:32:24.527

在我看来，不同的线程得到不同的`Cipher`实例——至少在 Mac OSX 下的 JDK 1.6.0_33 下。也许这是因为我正在使用 BouncyCastle 提供程序？

您是尝试`getInstance()`从同一个线程调用两次还是从不同的线程调用？ `clone()`Ciphers 似乎不可用，所以这不是一个选项。

以下代码似乎至少为我吐出了不同的身份哈希码对象：

```
private static final ThreadLocal<Cipher> localDigest = new ThreadLocal<Cipher>() {
    @Override
    protected Cipher initialValue() {
        try {
            return Cipher.getInstance("RSA");
        } catch (Exception e) {
            // ugly but necessary
            throw new RuntimeException(e);
        }
    }
};

public static void main(String[] args) {
    new Thread(new MyRunnable()).start();
    new Thread(new MyRunnable()).start();
}

private static class MyRunnable implements Runnable {
    @Override
    public void run() {
        Cipher cipher = localDigest.get();
        System.out.println("Got digest " + System.identityHashCode(cipher));
        ...
    }
} 
```

# android - 选择时如何从微调器中删除项目

> ID：11942469
> 
> 赞同：0
> 
> 时间：2012-08-13T21:18:17.187
> 
> 标签：android, spinner, android-spinner

我有 2 个微调器，这 2 个微调器应该有不同的选定项目。

这是 addItemsOnSpinner 方法，两个微调器使用相同的字符串数组。

```
public void addItemsOnSpinner(Spinner spinner,String[] names) {

        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, names);
        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner.setAdapter(dataAdapter);
      } 
```

如何从微调器 2 中删除我在微调器 1 中选择的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:31:31.743

您可以保存 String[] 名称的原始名称，然后在第一个微调器上发生选择时，使用原始列表重新创建第二个微调器数据适配器，但删除您在微调器中选择的元素，这只是一个想法，我已经接触了 android 一段时间

# javascript - 基本的javascript代码布局

> ID：11942471
> 
> 赞同：3
> 
> 时间：2012-08-13T21:18:24.577
> 
> 标签：javascript, jquery

我有一个我认为相当简单的问题，但我找不到答案。我有一个我创建的对象文字，它对函数进行分组，我想知道如何创建一个位于对象文字内部的变量，并且该对象文字中的所有函数都可以编辑/访问。目前我知道如何做到这一点的唯一方法是创建一个全局变量，但我想停止以这种方式填充全局变量。为了更好地描述我正在寻找的小提琴

[http://jsfiddle.net/aT3J6/](http://jsfiddle.net/aT3J6/)

谢谢你的帮助。

```
var clickCount = 0;

/* I would like to place clickCount inside hideShowFn Object but all function inside need access to it, so global within hideShowFn */

hideShowFn = {
    init:function(){  
     $('.clickMe').click(this.addToCount);                
    },

addToCount:function(){
    clickCount++;
    $('<p>'+ clickCount + '</p>').appendTo('body');
    }
}

hideShowFn.init(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T21:22:07.607

创建一个立即调用并返回对象的函数，函数内部包含私有变量，如下所示：

```
var obj = (function () {
    var privateStuff = 'private';
    return {
        func1: function () { 
            //do stuff with private variable
        },
        func2: function () {
            //do stuff with private variable
        }
    };
}()); 
```

[http://jsfiddle.net/BE3WZ/](http://jsfiddle.net/BE3WZ/)

这是在[函数式编程](http://en.wikipedia.org/wiki/Functional_programming)中拥有私有变量的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T21:26:30.270

[http://jsfiddle.net/mattblancarte/aT3J6/10/](http://jsfiddle.net/mattblancarte/aT3J6/10/)

另一种选择是伪古典风格：

```
function Constructor(){
  var private = 'private';
  this.public = 'public';

  this.methods = {
    //your methods here...
  };
}

var obj = new Constructor(); 
```

不要忘记使用 'new' 关键字，否则您将在全局范围内。

您翻译成这种风格的代码将是：

```
function Test(){
  var that = this,
      clickCount = 0;

  this.init = function(){
    $('.clickMe').click(this.addToCount);
  };

  this.addToCount = function(){
    clickCount++;
    $('<p>'+ clickCount + '</p>').appendTo('body');
  };
}

var test = new Test();
test.init(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T21:25:07.413

您可以按照[Cokegod](https://stackoverflow.com/a/11942519/887539)所说的那样创建一个闭包，或者您可以简单地将变量添加到对象并使用它访问它`this`

 ~~~~```
hideShowFn = {
    clickCount: 0,
    init:function(){  
        $('.clickMe').click(this.addToCount);                
    },
    addToCount:function(){
        this.clickCount++;
        $('<p>'+ this.clickCount + '</p>').appendTo('body');
    }
}

hideShowFn.init(); 
```~~  ~~**这不起作用，因为 Musa 说范围`addToCount`将是单击的 dom 节点。**

但是请参阅Cokegod的回答。~~~~

# regex - 连续 4 或 5 位数字的正则表达式，后跟较长字符串中的字母？

> ID：11942475
> 
> 赞同：3
> 
> 时间：2012-08-13T21:18:36.700
> 
> 标签：regex, notepad++

对于像这样的文字

```
1" 77568T86 34 
2" 5347A1Q 456 
```

我想返回字符串`77568T`和`5437A`

我猜我想要一些像这样开始的东西`\d{4,5}`

编辑：感谢所有回复。不幸的是，notepad++ 没有任何功能，即使它们与在线正则表达式测试器一起使用。

我认为问题在于 notepad++ 对 {} 的处理，因为会`(\d[A-Z])`找到匹配项。

建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T21:20:46.920

是的，你在正确的轨道上。`[A-Z]`只需在数字组后面添加一个（`[A-Za-z]`如果不区分大小写，请使用）。

```
\d{4,5}[A-Z] 
```

如果它前面应该有空格或某个边界，请在前面加上`\b`

```
\b\d{4,5}[A-Z] 
```

我不熟悉 Notepad++ 如何处理匹配捕获组，但很可能你会希望整个事情都被包围`()`

```
\b(\d{4,5}[A-Z]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T21:21:48.273

你猜对了。您只需要在表达式的末尾添加一个字母类：

```
\d{4,5}[a-zA-Z] 
```

（这允许大写或小写；`a-z`如果您只想要大写，请删除）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T21:25:18.400

这应该有效：

```
\d{4,5}[A-Z] 
```

[你自己看](http://regexr.com?31qtg)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T21:31:11.337

使用这个正则表达式`(?i)\b\d{4,5}[a-z]`

# python - Numpy和备用矩阵，如何获得密集的第一行

> ID：11942476
> 
> 赞同：2
> 
> 时间：2012-08-13T21:18:38.633
> 
> 标签：python, numpy

我有一个名为 X 的 spase 矩阵。如何获得稀疏的第一行、第二行等...

所以，我知道应该有 100 行。

我该如何做这个循环？

```
 for i in xrange(10):
          X[i] = row I want 
```

我想要的行也应该是稀疏格式。

谢谢

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:28:06.703

`X[i]` *是*你想要的行。它已经是稀疏形式了（尽管如果你把它做成 a 可能会有所帮助`scipy.sparse.csr_matrix`）。通常我们在没有索引的情况下遍历矩阵的行，简单地说：

```
for row in X:
    do_stuff(row) 
```

虽然如果索引是必要的，你也可以写：

```
for i, row in enumerate(X):
    do_other_stuff(i, row) 
```

# iphone - Installing a TestFlight app on iOS iPhone Simulator - Registration Failed

> ID：11942477
> 
> 赞同：25
> 
> 时间：2012-08-13T21:18:39.257
> 
> 标签：iphone, ios, registration, simulator, testflight

I'm attempting to install a TestFlight app on XCode's iOS simulator using the iPhone simulator. The link to the TestFlight app takes me to a page that says "This device will need to be registered before it can install betas."

There is a friendly Register button. When I click the register button, it says "Registering Device" and then it takes me to the iPhone's General settings page. If I navigate back to the TestFlight page, it says "Registration Failed."

Does anyone know of a way to install a TestFlight app on the iPhone Simulator? Thanks.

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-13T21:29:53.280

The app you are trying to install is an app compiled for arm architecture, which is different from the simulator (the simulator is not an emulator). The simulator only runs x86 apps compiled for it. You will need to contact the developer of the application to send you the x86 binaries, and add them directly to the application directory of the iOS simulator. The directory (on Xcode 4.5 beta 4) is /Applications/Xcode45-DP4.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/Applications. Note that the simulator's sdk version has to match the version of iOS you are trying to use the simulator with.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-24T11:15:43.053

**如果您需要测试您的发布应用程序** ，您可以在发布版本上运行您的去 -> 产品-> 方案 -> 编辑方案-> 在运行更改调试到发布中，您可以在模拟器中检查您的发布版本

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-13T21:26:06.083

如果我不得不猜测，我会假设由于模拟器不是有效的设备，它无法将 TestFlight 配置文件安装到设备上，因此注册过程失败（当您被定向到 iPhone 的设置时，它会尝试在您的设备上安装配置文件）。

请问您为什么要尝试通过 iPhone Simulator 安装该应用程序？如果应用程序的代码存在于 GitHub 上，您可以使用 GitHub for Mac 应用程序签出代码，并使用 XCode 编译项目并将其构建到 iOS 模拟器。应该没有任何理由必须在 iOS 模拟器上安装 TestFlight。

# android - Having a problen to develop lockscreen for android

> ID：11942478
> 
> 赞同：1
> 
> 时间：2012-08-13T21:18:40.710
> 
> 标签：android, locking, screen, lockscreen

I want to develop an android application that will be an alternative lockscreen. I searched a lot and i couldn't found an explanation about how to make an app to work like a lockscreen. I understand that there is no official android API for lockscreens, but there must be way, because there are a lot of alternative lockscreens applications in the market. Does someone know how could i make my app work like a lockscreen? Or if there is a basic code out there of lockscreen app that i can learn from it how to do it? Thanks a lot (:

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T18:25:47.273

这通常完成的方式是创建一个成为家庭应用程序的应用程序，然后在屏幕打开时显示您的自定义锁屏并在用户成功解锁时隐藏它以便他们可以使用设备。

请务必查看与此非常相似的[关于 SO 的众多问题。](https://stackoverflow.com/search?q=lockscreen)

# python - 为什么在 Python 中 open() 优于 file()？

> ID：11942482
> 
> 赞同：16
> 
> 时间：2012-08-13T21:18:53.943
> 
> 标签：python, file

> **可能重复：**
> [Python - 何时使用文件与打开](https://stackoverflow.com/questions/112970/python-when-to-use-file-vs-open)

从官方python文档中，

[http://docs.python.org/library/functions.html#file](http://docs.python.org/library/functions.html#file)

> 打开文件时，最好使用 open() 而不是直接调用此构造函数

但它没有给出理由。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-13T21:31:26.050

[Python之禅](http://www.python.org/dev/peps/pep-0020/)：

> 应该有一种——最好只有一种——明显的方法来做到这一点。

所以要么要么`file`应该`open`去。

```
>>> type(file)
<type 'type'>
>>> type(open)
<type 'builtin_function_or_method'> 
```

`open`是一个可以返回任何东西的函数。`file()`只返回`file`对象。

虽然它似乎`open`只返回`file`Python 2 上的对象。而在 Python 2.5 之前`file`，`open`它们是同一个对象。

正如@gnibbler 在评论中所建议的那样，存在的最初原因`file`可能是将其用作基类的名称。

此外，`file()`原则上可以返回其他类型，例如`int()`在早期 Python 版本中所做的：

```
>>> type(int(2**64)) is long
True
>>> type(int()) is int
True
>>> int is long
False 
```

[这个答案与@Ryan 的答案](https://stackoverflow.com/a/112989/4279)非常相似。

另外[BDFL说](http://article.gmane.org/gmane.comp.python.devel/60890)：

> “文件类是 Python 2.2 中新增的。它表示内置 open() 函数返回的对象的类型（类）。它的构造函数是 open() 的别名，但*为了将来和向后兼容*，open()仍然是首选。” ^(（强调我的）)

# javascript - Is it possible to override css in Disqus 2012 using javascript after the Disqus thread has loaded?

> ID：11942483
> 
> 赞同：2
> 
> 时间：2012-08-13T21:18:56.637
> 
> 标签：javascript, css, disqus, overriding

I have updated to Disqus 2012 and my CSS overrides no longer work as Disqus is now loaded in an iframe.

However, I can override CSS using the inspector after the Disqus thread has loaded, so I am wondering if it would be possible to do this using javascript that fires just after the Disqus thread/iframe has loaded onto the page?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T23:06:34.637

Disqus 2012 确实在 iframe 内部，并且无法使用`#disqus_thread`属性外部的 CSS 语句来定位 iframe。

抱歉，如果你现在想在 Disqus 中使用 CSS，你必须恢复到经典的 Disqus。不过不要担心，因为 CSS 是许多 Disqus 用户（包括我）所需要的功能。

# nosql - RavenDB中的索引类型鉴别器和多态类型的属性

> ID：11942486
> 
> 赞同：2
> 
> 时间：2012-08-13T21:19:03.393
> 
> 标签：nosql, ravendb

考虑存储在 RavenDB 中的以下（简化的）域模型：

```
public abstract class PriceCalculation
{
 // omitted for brevity
}

public class CostBasedPriceCalculation : PriceCalculation
{
 public decimal Margin { get; private set; }
}

public class FixedPriceCalculation : PriceCalculation
{
 public decimal FixedPrice { get; private set; }
}

public class ProductPricingStrategy
{
 public string ProductId { get; private set; }
 public PriceCalculation PriceCalculation { get; private set; }
} 
```

存储的实体是`ProductPricingStrategy`，我希望能够按价格计算类型以及价格计算特定变量查询集合。例如，我想获得一组基于成本的价格计算且边际小于 0.2 的所有产品定价策略。换句话说，我希望能够查询以下投影：

```
public class FlattenedProductPricingStrategy
{
  public string PriceCalculationType { get; set; }
  public decimal? FixedPrice { get; set; }
  public decimal? Margin { get; set; }
} 
```

蛮力方法是存储一个扁平的类层次结构，与投影更紧密地匹配，而不是直接存储域对象模型。在从 RavenDB 检索和持久化后，展平对象将映射到域对象。出于其他原因，我考虑过使用中间对象，例如能够处理映射类中的所有序列化问题以及具有用于重构的缓冲区，但是我已经远离它。有没有办法避免这个中间对象，直接根据原始对象模型创建索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:21:33.467

您需要定义这样的索引：

```
from s in docs.ProductPricingStrategy
select new
{
  s.PriceCalculation.Margin,
  s.PriceCalculation.FixedPrice
} 
```

然后就可以正常查询了。

# javascript - Google Streetview：在给定半径内显示标记

> ID：11942487
> 
> 赞同：1
> 
> 时间：2012-08-13T21:19:19.663
> 
> 标签：javascript, google-maps, google-maps-api-3, google-street-view

我已经毫无问题地向谷歌地图街景视图添加了自定义标记。我现在只想显示我添加的标记，仅当用户在标记坐标的几度范围内并且在从更远距离平移街景时不可见。我看过一些关于在给定半径内删除标记的论坛帖子，但不是相反。

更多背景... 我正在尝试使用街景 api 制作一个简单的复活节彩蛋狩猎游戏。

任何想法都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:48:30.560

你说“我看过一些关于在给定半径内删除标记但不是相反的论坛帖子”，使用该机制并反转测试。

# javascript - 如何使 D3.js 中的强制布局图响应屏幕/浏览器大小

> ID：11942500
> 
> 赞同：57
> 
> 时间：2012-08-13T21:20:22.630
> 
> 标签：javascript, svg, d3.js, force-layout

我有一个使用强制布局的图表，但它有一个固定的宽度`w`和高度`h`：

```
var svg = d3.select("#viz").append("svg")
            .attr("id", "playgraph")
            .attr("width", w)
            .attr("height", h)

var force = d3.layout.force()
              .nodes(nodes)
              .links(links)
              .charge(-1600)
              .linkDistance(45)
              .size([w, h]); 
```

尽管屏幕或浏览器窗口大小发生变化，但这会导致 svg 图形不会按比例缩小或缩小。为了使其具有响应性（即自动调整自身大小），我尝试使用`viewBox`和`preserveAspectRatio`属性：

```
var svg = d3.select("#viz").append("svg")
            .attr("id", "playgraph")
            .attr("width", w)
            .attr("height", h)
            .attr("viewBox", "0, 0, 600, 400")
            .attr("preserveAspectRatio", "xMidYMid meet"); 
```

不幸的是，这不起作用，因为当我调整浏览器窗口大小时没有任何反应。我想知道力图的 是否`.size([w, h])`与此有关。

请阐明如何使用力布局图`viewBox`和属性。`preserveAspectRatio`

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-08-14T09:01:27.967

问题不在 内`.size()`，而是您在 内说明 SVG 尺寸`.attr("width", w) .attr("height", h)`。删除这两个属性，你会得到它的权利......

```
var svg = d3.select("#viz").append("svg")
            .attr("id", "playgraph")
             //better to keep the viewBox dimensions with variables
            .attr("viewBox", "0 0 " + w + " " + h )
            .attr("preserveAspectRatio", "xMidYMid meet"); 
```

[http://jsfiddle.net/aaSjd/](http://jsfiddle.net/aaSjd/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-10-06T05:12:19.040

此处显示的解决方案：[http](http://bl.ocks.org/mbostock/3355967) ://bl.ocks.org/mbostock/3355967对我来说效果很好！

```
window.addEventListener('resize', resize); 

function resize() {
    var width = window.innerWidth, height = window.innerHeight;
    svg.attr("width", width).attr("height", height);
    force.size([width, height]).resume();
} 
```

确保在添加所有行、节点等之后运行 resize()。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-07T20:29:00.137

Duopixel 非常接近我所需要的，除了我不知道他为什么嵌套两个`<g>`元素并将事件侦听器附加到最外面`<g>`（还需要在所有内容后面有一个不可见的矩形，以使 g 对其整个空间内的事件做出反应）。

将侦听器附加到`<svg>`自身更容易，然后您只需要一个 internal `<g>`。

这是我的全屏强制导向示例：

```
var width = 1000,
    height = 1000;

var color = d3.scale.category20();

var svg = d3.select("body")
    .append("svg")
      .attr({
        "width": "100%",
        "height": "100%"
      })
      .attr("viewBox", "0 0 " + width + " " + height )
      .attr("preserveAspectRatio", "xMidYMid meet")
      .attr("pointer-events", "all")
    .call(d3.behavior.zoom().on("zoom", redraw));

var vis = svg
    .append('svg:g');

function redraw() {
  vis.attr("transform",
      "translate(" + d3.event.translate + ")"
      + " scale(" + d3.event.scale + ")");
}

function draw_graph(graph) {
  var force = d3.layout.force()
      .charge(-120)
      .linkDistance(30)
      .nodes(graph.nodes)
      .links(graph.links)
      .size([width, height])
      .start();

  var link = vis.selectAll(".link")
      .data(graph.links)
      .enter().append("line")
      .attr("class", "link")
      .style("stroke-width", function(d) { return Math.sqrt(d.value); });

  var node = vis.selectAll(".node")
      .data(graph.nodes)
      .enter().append("circle")
      .attr("class", "node")
      .attr("r", 5)
      .style("fill", function(d) { return color(d.group); })
      .call(force.drag);

  node.append("title")
      .text(function(d) { return d.name; });

  force.on("tick", function() {
    link.attr("x1", function(d) { return d.source.x; })
        .attr("y1", function(d) { return d.source.y; })
        .attr("x2", function(d) { return d.target.x; })
        .attr("y2", function(d) { return d.target.y; });

    node.attr("cx", function(d) { return d.x; })
        .attr("cy", function(d) { return d.y; });
  });
};

draw_graph(data); 
```

# php - 确保一次性执行 PHP/MySQL 代码？

> ID：11942504
> 
> 赞同：0
> 
> 时间：2012-08-13T21:20:49.083
> 
> 标签：php, mysql, execute

有没有办法确保以下代码一次性执行（因此，如果访问者在键盘上按下转义键或关闭浏览器，它不会只执行一半。重要的是它们全部一次性完成或根本不执行）。

```
mysql_query($queryone);

mysql_query($querytwo);

unlink($file);

unlink($thumb);

mysql_query($querythree); 
```

感谢所有回复和示例代码会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:24:24.593

如果用户停止浏览器，这些语句很可能都将执行，但为了确保它们执行，请[`ignore_user_abort(true);`](http://www.php.net/manual/en/function.ignore-user-abort.php)在这些语句之前添加以告诉 PHP 在检测到客户端断开连接时不要终止。

请参阅`php.ini`设置[ignore_user_abort](http://www.php.net/manual/en/misc.configuration.php#ini.ignore-user-abort)。这将允许脚本运行完成，无论客户端是否仍然连接。

进一步阅读：

[http://www.php.net/manual/en/features.connection-handling.php](http://www.php.net/manual/en/features.connection-handling.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T21:28:18.470

您可能需要 mysql 事务。当并非所有查询都成功时，这些功能（提交、回滚等）将撤消查询。 [mysql事务](http://dev.mysql.com/doc/refman/5.0/en/commit.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T21:45:29.020

> 因此，如果访问者在键盘上按 Escape 或关闭浏览器，它不会只执行一半

关闭浏览器或按转义键（或任何键）的访问者不会影响服务器上运行的脚本。无论客户端做什么，您的脚本都将完成运行。

> 重要的是它们都是一口气完成的，或者根本没有

你绝对应该看看[MySQL Transactions](http://dev.mysql.com/doc/refman/5.0/en/sql-syntax-transactions.html)。您可能还想考虑将事务放在[存储过程](http://dev.mysql.com/doc/refman/5.0/en/stored-routines.html)中。

# jsp - struts 1单选按钮分组

> ID：11942509
> 
> 赞同：0
> 
> 时间：2012-08-13T21:21:37.307
> 
> 标签：jsp, struts, radio-button, grouping

Struts 1.x 我有一排单选按钮和 2 个不同的项目，它们拥有不同的属性。这将创建 2 组不同的输入单选按钮。一次使用 name="item_t1"，另一个使用 name="item_t2"。然后这些不组合在一起。我怎样才能将它们组合在一起。我知道单选按钮按名称分组，但在这种情况下，名称具有不同的上下文。

```
<logic:iterate id="item" name="searchResults" property="searchResultsList">
<logic:notEmpty name="item" property="itemId_type1" >
    <bean:define id="itemId_t1" name="item" property="itemId_type1"/>
    <tr>
        <td valign="middle">
        <html:radio property="selectedItemId_t1" value="<%=itemId_t1%>"/>
        </td>
    </tr>
</logic:notEmpty>
<logic:notEmpty name="item" property="itemId_type2" >
    <bean:define id="itemId_t2" name="item" property="itemId_type2"/>
    <tr>
        <td valign="middle">
            <html:radio property="selectedItemId_t2" value="<%=itemId_t2%>"/>
        </td>
    </tr>
</logic:notEmpty>
</logic:iterate> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:12:33.383

在 Struts 1.x 中，具有相同属性的元素将被分组。所以你有两个组的原因是你有一组链接到“selectedItemId_t1”属性的单选按钮和另一个链接到“selectedItemId_t2”属性的单选按钮。

您需要将两个集合（t1 和 t2）链接到表单中的同一属性（例如属性 selectedItemId），然后，如果您需要区分哪个集合与哪个集合，请通过解析值来执行此操作。例如，您可以将值设置为 "t1<%=itemId_t2%>" 和 "t2<%=itemId_t2%>" 并在您的 selectedItemId 设置器中解析值以去掉前 2 个字符（告诉您它们是否为 t1或 t2)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:48:41.330

最后，我确实找到了一种 jsp 级别的方法，无需更改表单。我使用标准输入类型。并将字段设置为隐藏属性。我为单选按钮设置了 onClick 以分别设置字段。

```
<html:hidden property="itemId_t1" styleId="itemId_t1"/>
<html:hidden property="itemId_t2" styleId="itemId_t2"/>

function setSelectedItemId_t1(item1Id)
{
    getElementById("itemId_t1").value = item1Id
    getElementById("itemId_t2").value = null
}
function setSelectedItemId_t2(item2Id)
{
    getElementById("itemId_t2").value = item2Id;
    getElementById("itemId_t1").value = null
}

<logic:iterate id="item" name="searchResults" property="searchResultsList">
<logic:notEmpty name="item" property="itemId_type1" >
    <bean:define id="itemId_t1" name="item" property="itemId_type1"/>
    <tr>
        <td valign="middle">
        <input type="radio" name="sameItem" value="<%=itemId_t1%>" onclick="setSelectedItemId_t1(value)" /> 
        </td>
    </tr>
</logic:notEmpty>
<logic:notEmpty name="item" property="itemId_type2" >
    <bean:define id="itemId_t2" name="item" property="itemId_type2"/>
    <tr>
        <td valign="middle">
        <input type="radio" name="sameItem" value="<%=itemId_t2%>" onclick="setSelectedItemId_t2(value)" />
        </td>
    </tr>
</logic:notEmpty>
</logic:iterate> 
```

这似乎是最好的方法。

# c#-4.0 - 如何在 Paypal SOAP API 快速结账中设置运费

> ID：11942514
> 
> 赞同：0
> 
> 时间：2012-08-13T21:21:54.063
> 
> 标签：c#-4.0, paypal, express-checkout, paypal-soap

我正在添加 20.00 的项目并将订单总额设置为 22.00

```
 paymentDetails.OrderTotal = new PayPalSandboxWS.BasicAmountType()
     {
         currencyID = ConvertProgramCurrencyToPayPalSandbox(currency),
         Value = "22.00"
     }; 
```

并将运费总额设置为 2.00

```
 paymentDetails.ShippingTotal = new PayPalSandboxWS.BasicAmountType()
     {
         currencyID = ConvertProgramCurrencyToPayPalSandbox(currency),
         Value = "2.00"
     }; 
```

但我收到此错误：`The totals of the cart item amounts do not match order amounts.`

请协助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:11:10.233

您错过了设置`ItemTotal`值！这导致了这个错误：

```
double itemTot  = 20.0;
double tot      = 22.0;
double shipping = 2.0;
string desc     = "";
var paymentDetailsItemTypes = new List<PaymentDetailsItemType>();

PaymentDetailsType pdt = new PaymentDetailsType()
{        
    OrderDescription = desc,
    OrderTotal = new BasicAmountType()
    {
        currencyID = CurrencyCodeType.EUR,
        Value = tot.ToString("0.00", System.Globalization.CultureInfo.InvariantCulture)
    },
    PaymentDetailsItem = paymentDetailsItemTypes.ToArray(),
    ShippingTotal = new BasicAmountType()
    {
        currencyID = CurrencyCodeType.EUR,
        Value = shipping.ToString("0.00", System.Globalization.CultureInfo.InvariantCulture)
    },
    ItemTotal = new BasicAmountType()
    {
        currencyID = CurrencyCodeType.EUR,
        Value = itemTot.ToString("0.00", System.Globalization.CultureInfo.InvariantCulture)
    }
}; 
```

# c# - 从数据集中加密 XML 文件

> ID：11942517
> 
> 赞同：1
> 
> 时间：2012-08-13T21:22:03.423
> 
> 标签：c#, .net, vb.net, winforms

我有一个连接到几个数据库的 winforms 应用程序。但是，即使用户未连接到互联网，我也希望使用我的应用程序。我一直在本地将数据集写入 XML 文件并根据用户偏好读取它们，无论是从数据库下载还是使用本地数据文件。

```
DataSet.WriteXml(localPath) 
```

随着应用程序的改进，我想加密 XML 文件以防止用户查看内部（那里有一堆数据，但应用程序根据分配给用户的访问级别选择性地显示数据）。我查看了“Rijndael Managed”并得到了一个基于[VB.NET 中的加密/解密文件](http://www.codeproject.com/Articles/12092/Encrypt-Decrypt-Files-in-VB-NET-Using-Rijndael)的原型。我无法弄清楚如何在没有将它们保存到磁盘的情况下将流传递给密码学类。

现在，我将 Dataset 中的 xml 文件保存到一个临时目录并构建一个新流并将其传递给 CrypotoStream，然后将加密文件写入所需的位置。

我正在寻找一种直接传入流而不将其写入磁盘的解决方案。请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T22:00:14.497

更好的使用方法是 EncryptedXml 类

[EncryptedXml 类](http://msdn.microsoft.com/en-us/library/system.security.cryptography.xml.encryptedxml.aspx) 加密可能需要不同的加密强度、密钥库等方法。请遵循 MSDN 文档中的示例。这不是一个简短的实现，但它工作得非常好。

其他选择

写入 MemoryStream 并使用 MemoryStream.ToArray();

读取加密流

只需使用 CryptoStream 加载数据集。

参考this like to read/decrypt [读取/解密加密的XML文件，然后在内部处理](https://stackoverflow.com/questions/10539670/read-decrypt-encrypted-xml-file-and-then-process-internally)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T21:29:57.140

听起来[MemoryStream](http://msdn.microsoft.com/en-us/library/system.io.memorystream.aspx)可能是您正在寻找的东西。

# apache - 使用 Apache 作为后台进程启动 JAR 文件

> ID：11942523
> 
> 赞同：0
> 
> 时间：2012-08-13T21:22:28.853
> 
> 标签：apache, bash, background-process, executable-jar

我有一个可运行 JAR 文件形式的数据解析实用程序。我还有一个 Apache 服务器（Ubuntu 12.04），数据文件上传到该服务器。无论如何，我可以在上传文件时将所述 JAR 文件作为后台进程启动吗？（仅供参考：多个进程的文件访问在这里不是问题；我已将文件锁定到位。）

相关想法：如果上述方法不可行，我总是可以从 bash 脚本启动上述 JAR 文件。但是，我仍然不确定如何通过 Apache 做到这一点。我是一个有效使用它的新手。

**编辑：**刚刚注意到[这个潜在的 php 解决方案](https://stackoverflow.com/questions/2540332/running-bash-scripts-in-php)。Apache 人：这是个好主意，还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T22:02:26.673

也许您可以使用[文件交替监视器](http://en.wikipedia.org/wiki/File_Alteration_Monitor)来实现这一点。它可以配置为后台守护程序，如果发现新文件则执行操作。如果您想避免在文件当前上传时启动，请等待大约。文件更改时间后 5 分钟开始处理您的实用程序。

我使用类似的技术来监控 Samba 共享上的上传文件，它运行良好。

# c# - 是否可以访问模型中的注释值？

> ID：11942526
> 
> 赞同：0
> 
> 时间：2012-08-13T21:22:45.250
> 
> 标签：c#, .net, annotations

是否可以从代码中访问模型中注释的值。

例如：

```
 [Table("TableA", Schema="SchemaA")]
    public class TableA
    {
        [Key]
        public decimal TABLE_ID { get; set; }
     } 
```

当我不知道实际的主键名称是什么时，有没有办法通过获取“KEY”从这个模型中获取 TABLE_ID？

# floating-point - 为什么 LLVM 不通过优化浮点指令？

> ID：11942527
> 
> 赞同：5
> 
> 时间：2012-08-13T21:23:05.437
> 
> 标签：floating-point, llvm, compiler-optimization

看上面。我写了示例函数：

`source.ll:`

```
define i32 @bleh(i32 %x) {
entry:
  %addtmp = add i32 %x, %x
  %addtmp1 = add i32 %addtmp, %x
  %addtmp2 = add i32 %addtmp1, %x
  %addtmp3 = add i32 %addtmp2, %x
  %addtmp4 = add i32 %addtmp3, 1
  %addtmp5 = add i32 %addtmp4, 2
  %addtmp6 = add i32 %addtmp5, 3
  %multmp = mul i32 %x, 3
  %addtmp7 = add i32 %addtmp6, %multmp
  ret i32 %addtmp7
} 
```

`source-fp.ll:`

```
define double @bleh(double %x) {
entry:
  %addtmp = fadd double %x, %x
  %addtmp1 = fadd double %addtmp, %x
  %addtmp2 = fadd double %addtmp1, %x
  %addtmp3 = fadd double %addtmp2, %x
  %addtmp4 = fadd double %addtmp3, 1.000000e+00
  %addtmp5 = fadd double %addtmp4, 2.000000e+00
  %addtmp6 = fadd double %addtmp5, 3.000000e+00
  %multmp = fmul double %x, 3.000000e+00
  %addtmp7 = fadd double %addtmp6, %multmp
  ret double %addtmp7
} 
```

为什么当我使用优化这两个功能时

`opt -O3 source[-fp].ll -o opt.source[-fp].ll -S`

一个`i32`得到优化，但`double`一个没有？我预计将`fadd`合并为一个`fmul`. 相反，它看起来完全一样。

是因为标志设置不同吗？我知道某些可能的优化`i32`对于`double`. 但是没有简单的常量折叠超出了我的理解。

我正在使用 LLVM 3.1。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T21:56:30.060

说*不可能*进行优化并不完全正确。我将通过前几行来展示允许和不允许转换的地方：

```
 %addtmp = fadd double %x, %x 
```

第一行可以安全地转换为`fmul double %x 2.0e+0`，但这实际上并不是对大多数架构的优化（`fadd`通常与 一样快或更快`fmul`，并且不需要生成常量`2.0`）。请注意，除非溢出，此操作是精确的（就像所有按 2 的幂缩放）。

```
 %addtmp1 = fadd double %addtmp, %x 
```

这条线可以转换为`fmul double %x 3.0e+0`. 为什么这是一个合法的转变？因为产生的计算`%addtmp`是精确的，所以无论计算为`x * 3`还是都只发生一次舍入`x + x + x`。因为这些是 IEEE-754 基本操作，因此正确舍入，所以结果是相同的。溢出怎么办？除非另一个也溢出，否则两者都不会溢出。

```
 %addtmp2 = fadd double %addtmp1, %x 
```

这是第一行不能合法地转化为常数 * x。 `4 * x`将精确计算，没有任何舍入，而`x + x + x + x`导致两次舍入：`x + x + x`舍入一次，然后添加`x`可能第二次舍入。

```
 %addtmp3 = fadd double %addtmp2, %x 
```

同上；`5 * x`将进行四舍五入；`x + x + x + x + x`招致三个。

唯一可能会进行有益转换的行将替换`x + x + x`为`3 * x`. 但是，子表达式`x + x`已经存在于其他地方，因此优化器很容易选择不使用此转换（因为如果不使用，它可以利用现有的部分结果）。

# c# - 获取Form2的一个textbox100的值到Form1

> ID：11942533
> 
> 赞同：0
> 
> 时间：2012-08-13T21:23:39.260
> 
> 标签：c#, forms, textbox

当 DateTime.Now = 用户输入日期时，我想隐藏一个按钮。textbox100 在 Form2 中并且已经公开，但我知道缺少其他内容，因为我收到错误消息：“名称 'textBox100' 在当前上下文中不存在。”

谢谢你。

```
public void Form1_Load(object sender, EventArgs e)
{
    var dateTimeStr = textBox100.Text;
    var user_time = DateTime.Parse(dateTimeStr);
    var time_now = DateTime.Now;

    if (time_now >= user_time)
    {
        button1.Visible = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T21:46:41.700

您需要改善表格之间的沟通。[请参阅此问题](https://stackoverflow.com/questions/4648845/communication-between-forms)中已接受的答案。

适应您的代码：

```
using ( var form = new Form2() )
{
    var dateTimeStr = form.textBox100.Text;
    var user_time = DateTime.Parse(dateTimeStr);
    var time_now = DateTime.Now;

    if (time_now >= user_time)
    {
        button1.Visible = false;
    }
} 
```

如果在取TextBox的值之前需要等待，即等待用户输入输入，那么可以这样写：

```
string dateTimeStr;
using ( var form = new Form2() )
{
    form.submitButton.OnMouseUp += (source, e) =>
    {
        dateTimeStr = form.textBox100.Text;
    };
} 
```

假设您在表单的某处有一个提交按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:27:16.310

即使它是公共的，它仍然属于类`Form2`

```
var dateTimeStr = Form2.textBox100.Text; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T21:36:15.003

如果 Form2 没有实例化在 Form1 中有引用，则无法获取 textbox100 的文本。然后使用 UnLoCo 的线路。当然它必须在 Form2 中公开

# javascript - Javascript 中的 {} + []

> ID：11942540
> 
> 赞同：5
> 
> 时间：2012-08-13T21:24:47.137
> 
> 标签：javascript

> **可能重复：**
> [CodeMash 2012 的“Wat”演讲中提到的这些奇怪的 JavaScript 行为的解释是什么？](https://stackoverflow.com/questions/9032856/what-is-the-explanation-for-these-bizarre-javascript-behaviours-mentioned-in-the)

当我输入

```
{} + [] 
```

在 Google Chrome JavaScript 控制台中，我得到

```
0 
```

因此。但是，当我输入

```
Function("return {} + []")() 
```

我明白了

```
"[object Object]" 
```

因此。我认为这两个操作都应该返回相同的结果，因为一个只是另一个的包装器。为什么他们返回不同的结果？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T21:26:51.943

核心原因是，这`{}`在语句上下文中`{ statement0; statement1 }`与在表达式上下文中的含义不同`({ "property": value, ... })`。

```
 {} + [] 
```

是一个块和一元比较运算符，因此与

```
{}  // An empty block of statements.
(+ [])  // Use of prefix operator +. 
```

另一种是加号运算符的使用，当与两个对象一起使用时，将它们连接起来，如

```
return String({}) + String([]) 
```

由于`Array.prototype.toString`以逗号连接数组，因此类似于

```
return String({}) + [].join(",") 
```

这减少到

```
return "[Object object]" + ""; 
```

最后到

```
return "[Object object]" 
```

# haskell - `interact` 使用文本而不是字符串

> ID：11942542
> 
> 赞同：1
> 
> 时间：2012-08-13T21:24:56.077
> 
> 标签：haskell, text, lazy-io

我想重写`interact`函数，但使用`Text`而不是`String`. 是否可以使用`Data.Text`和/或`Data.Text.Lazy`完成与 相同的行为`interact`？

例如，当我使用以下命令运行此程序时`String`：

```
main = interact (unlines . map f . lines)
  where f "hello" = "wassup"
        f _ = "wat?" 
```

它等待一行输入，然后打印出一行作为响应，并等待下一行输入。我想编写相同的代码并使其适用于`Text`.

```
{-# LANGUAGE OverloadedStrings #-}
import Data.Text.Lazy (Text)
import qualified Data.Text.Lazy as T

textInteract :: (Text -> Text) -> IO ()
textInteract = undefined

main = textInteract (T.unlines . map f . T.lines)
  where f "hello" = "wassup"
        f _ = "wat?" 
```

但不要只是`textInteract`这个用例的特殊情况。`interact`我希望它在所有情况下的行为都相同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T21:30:15.747

[http://hackage.haskell.org/packages/archive/text/0.11.2.0/doc/html/Data-Text-Lazy-IO.html](http://hackage.haskell.org/packages/archive/text/0.11.2.0/doc/html/Data-Text-Lazy-IO.html)

已经`interact`为你准备好了:)

似乎也是如此[http://hackage.haskell.org/packages/archive/text/0.11.2.0/doc/html/Data-Text-IO.html](http://hackage.haskell.org/packages/archive/text/0.11.2.0/doc/html/Data-Text-IO.html)

# android - Android / iOS：在应用程序处于后台/关闭时安排任务

> ID：11942549
> 
> 赞同：2
> 
> 时间：2012-08-13T21:25:30.553
> 
> 标签：android, ios, background, task

当服务器想要联系客户端时，尽管相应的应用程序处于非活动状态或关闭状态，但他可以通过 Google Cloud Messaging 进行此操作。我的小应用程序与我不拥有且仅在其上运行 php 的网络服务器结合运行，因此无法主动联系客户。

现在有可能存在类似问题的应用程序，例如电子邮件应用程序。当收到新邮件时，邮件服务器从不手动联系他们的客户，因此他们每隔 30 分钟检查一次新邮件。

我的问题是：是否可以运行这样的后台任务？有没有办法在 iOS 中做到这一点呢？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:39:45.537

如果在用户不与小部件/应用程序交互时您希望 android 执行某些操作，您应该使用服务。

[安卓服务](http://developer.android.com/reference/android/app/Service.html)

它旨在用于不需要用户交互的任务，并且特别适合一遍又一遍地检查某些内容。不能保证操作系统最终仍不会杀死它，但它会尽可能长时间地保持活动状态。如果您真的想长期做某事，您还可以创建一个服务，以便在它死后随时重新启动。

# python - 验证文件中的 URL 是否存在

> ID：11942550
> 
> 赞同：0
> 
> 时间：2012-08-13T21:25:45.850
> 
> 标签：python

所以我有一些代码可以用来在邮箱中搜索特定的 URL。完成后，它会创建一个名为 links.txt 的文件

我想针对该文件运行一个脚本，以获取该列表中所有当前 URL 的输出。我的脚本只允许我一次检查 URL

```
import urllib2

for url in ["www.google.com"]:

    try:
        connection = urllib2.urlopen(url)
        print connection.getcode()
        connection.close()
    except urllib2.HTTPError, e:
        print e.getcode() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T21:29:50.300

使用请求：

```
import requests

with open(filename) as f:
    good_links = []
    for link in file:
        try:
            r = requests.get(link.strip())
        except Exception:
            continue
        good_links.append(r.url) #resolves redirects 
```

您还可以考虑将对 requests.get 的调用提取到辅助函数中：

```
def make_request(method, url, **kwargs):
    for i in range(10):
        try:
            r = requests.request(method, url, **kwargs)
            return r
        except requests.ConnectionError as e:
            print e.message
        except requests.HTTPError as e:
            print e.message
        except requests.RequestException as e:
            print e.message
    raise Exception("requests did not succeed") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T21:35:57.007

鉴于您已经在遍历 URL 列表，因此进行此更改是微不足道的：

```
import urllib2

for url in open("urllist.txt"):   # change 1

    try:
        connection = urllib2.urlopen(url.rstrip())   # change 2
        print connection.getcode()
        connection.close()
    except urllib2.HTTPError, e:
        print e.getcode() 
```

遍历文件会返回文件的行（包括行尾）。我们`rstrip()`在 URL 上使用来去除行尾。

您还可以进行其他改进。例如，有些人会建议您使用`with`它来确保您的文件已关闭。这是一种很好的做法，但在此脚本中可能不是必需的。

# mysql - 多个 INNER JOIN 返回 null

> ID：11942551
> 
> 赞同：0
> 
> 时间：2012-08-13T21:25:51.037
> 
> 标签：mysql, sql

我正在加入 3 张桌子。

```
table1.
grp_id | email_id
   1   |  3 
   1   |  58

table2.
sam_msg_id | sam_subject
   3       |  Funnel

table3.
id | subject
58 | testing check

Desired Output:

id |grp_id|email_id|sam_subject|subject      |
184|1     |3       |funnel     |             |
185|1     |58      |           |testing check| 
```

我试过的查询：

```
SELECT table1.*, table2.sam_subject, table3.* 
FROM table1
INNER JOIN table2 
    ON table2.sam_msg_id = table1.email_id 
INNER JOIN table3 
    ON table3.id = table1.email_id 
WHERE table1.grp_id = '1' 
```

我在这里要做的是从 table2 和 table3 中获取主题列表及其 id，其中 id 在 email_id 下的 table1 中找到。

当我尝试仅通过仅检查 table2 中的数据来使用一个内部连接时，它正在工作。

我不熟悉使用内部连接，因此我看不出我做错了什么。

我正在使用 MySQL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T21:29:53.903

Sounds like you need a `LEFT JOIN`

```
SELECT table1.*, table2.sam_subject, table3.* 
FROM table1
LEFT JOIN table2 
    ON table2.sam_msg_id = table1.email_id 
LEFT JOIN table3 
    ON table3.id = table1.email_id 
WHERE table1.grp_id = '1' 
```

Based on you edit, the following should give you the results you want:

```
SELECT t1.grp_id, 
  t1.email_id, 
  coalesce(t2.sam_subject, '') sam_subject, 
  coalesce(t3.subject, '') subject
FROM t1
left JOIN t2 
    ON t2.sam_msg_id = t1.email_id 
left JOIN t3 
    ON t1.email_id = t3.id
WHERE t1.grp_id = '1' 
```

See [SQL Fiddle with Demo](http://sqlfiddle.com/#!2/ab920/6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T21:29:58.513

I'm a bit confused about what you are asking. If you can provide an example of your current data and your desired output we can probably nail down a solution.

As it is, I suspect you need to read up on `LEFT JOIN`, which will return `NULL` if there is no matching record in your child table. `INNER JOIN` will not return a record if there is no match.

Take a look at this article for an explanation of the different types of joins:

[http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

UPDATE:

I'm not sure where the first column of your desired results is coming form but the query below should get you the desired results:

```
SELECT t1.*, t2.sam_subject, t3.subject
FROM Table1 as t1
LEFT JOIN table2 as t2
on t1.email_id = t2.sam_msg_id
LEFT JOIN table3 as t3
on t1.email_id = t3.id 
```

# haskell - 非布尔测试的快速检查

> ID：11942554
> 
> 赞同：6
> 
> 时间：2012-08-13T21:26:07.073
> 
> 标签：haskell, quickcheck

我正在使用 QuickCheck 来测试我的代码以进行一些数值计算。基本上我有一个精确的函数和几个更有效的近似值。

我目前正在实现我想要测试的属性，例如：

```
prop_blah input = (abs $ (exact input)-(approx input)) < threshold 
```

但是，如果能准确地知道每种近似算法的准确度并将它们相互比较，那就太好了。一种简单的方法是获取不等式左侧的均值和标准差的报告。这有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:46:04.563

如果您只需要打印出来，您应该检查在单次测试后执行的 QuickCheck Callbacks。它们的定义位于 Test.QuickCheck.P​​roperty

否则，您可以使用`collect :: (Show a, Testable prop) => a -> prop -> Property`位于 Test.QuickCheck.P​​roperty 中的函数。

```
let a = (abs $ (exact input)-(approx input))
in collect a (a < threshold) 
```

通过这种方式，您至少可以确定近似值的字符串表示形式，并且还可以了解有多少单个测试给出了相同的近似值。

您甚至可以摆脱近似质量，只需通过以下方式列出因素：

```
prop = collect (abs $ (exact input)-(approx input)) True 
```

# javascript - AJAX URL 追加与存储的 jQuery .data() 冲突

> ID：11942556
> 
> 赞同：1
> 
> 时间：2012-08-13T21:26:10.897
> 
> 标签：javascript, jquery, debugging, variables, reference

我有一个`document.ready`函数可以存储所有数据以准备在`:hover`.

```
domReady( function() {
  $('.foo').each( function() {
    var el = $(this);
    var el_content = el.find('[data-content]');
    el.data( 'content-attr', { content: el_content, classes: el_classes } );
  } );
} ); 
```

默认情况下一切正常，但是当为 AJAX 排序附加 URL 时，`window`我想我会丢失我的 ref，因为以下事件处理程序`undefined`在访问未附加 URL 时访问没有问题的数据时返回。我知道这一定是`window`事件处理程序中的引用问题，有人可以指出正确的引用方式，以便在为 AJAX 附加 URL 时`window`可以访问存储加载数据的 jQuery 对象吗？`.on( 'hover', function() { //do stuff });`

```
$( window ).on( 'hover', '[rel="popover"]', function() {
    var el = $(this);
    var this_content_data = el.data( 'content-attr' ).content;
    function() {
      // do stuff
    }
} ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T21:01:28.143

在这个特定问题的情况下，我意识到这样做的唯一方法是将数据存储在`.data`视图初始化时的 jQuery 属性中，以供`$(window).element.on( 'hover', ...){}`.

# c++ - c++、msxml 和智能指针

> ID：11942557
> 
> 赞同：0
> 
> 时间：2012-08-13T21:26:12.090
> 
> 标签：c++, visual-c++, smart-pointers, msxml

我需要解析一些 XML 并编写一些帮助程序。我不是 C++ 专家，实际上我在七年前用 c 编写过。所以，我想确定，我使用的方法是正确的还是不正确的:)

1）我实现了一些简单的助手，以处理异常。例如：

```
CComPtr<IXMLDOMElement> create_element(CComPtr<IXMLDOMDocument> xml_doc, string element_name) {
    CComPtr<IXMLDOMElement> element;

    HRESULT hr = xml_doc->createElement((BSTR)element_name.c_str(), &element);

    if (FAILED(hr))
        hr_raise("Failed to create XML element '" + element_name + "'", hr);

    return element;
} 
```

并像这样使用它：

```
void SomeClass::SomeMethod() {
    CComPtr<IXMLDOMElement> element = xmlh::create_element(xml_doc, "test");
    //..
    // save xml to file
} 
```

可以吗？我的意思是我可以将智能指针作为函数结果返回吗？这种方法没有泄漏吗？

2）我也使用一些智能指针作为类成员。像这样：

```
class XMLCommand {
    public:
        XMLCommand(std::string str_xml);
        ~XMLCommand(void);
    protected:
        CComPtr<IXMLDOMDocument> xml_doc;
}

XMLCommand::XMLCommand(string str_xml) {
    xml_doc = xmlh::create_xml_doc();
}

// some methods below uses xml_doc 
```

问题是一样的，它是否正确且没有泄漏？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:34:28.203

那会很好用。从函数返回智能指针时，结果会在临时对象被破坏之前存储，因此只要在`CComPtr<IXMLDOMElement>`调用 create_element 时将其存储在 a 中，您就会得到所需的结果（例如，`CComPtr<IXMLDOMElement> resElem = create_element(...);`优化的 C++ 很可能甚至不会打扰临时对象等等，`resElem`而不是`element`在你的`create_element()`方法中使用，加快进程（谷歌返回值优化细节）。

后一种情况几乎是教科书的智能指针用法。我想不出一个会失败的案例。但是，通常使用智能指针时的一个危险是要注意和/或避免循环依赖，这可能导致智能指针永远不会删除它们包含的对象。

# html - “更好”漂浮在 CSS 中

> ID：11942561
> 
> 赞同：15
> 
> 时间：2012-08-13T21:26:33.200
> 
> 标签：html, css, css-float

我正在试验 CSS 和 float 属性。我有这个“网站”，有很多 div 与 80px 网格对齐，并且`float: left`：

![简单的 CSS 浮动](../Images/80dab2d6ee52bfb67045501ee756ce7e.png)

CSS中有没有办法让它看起来像这样 - 所以元素可以使用它们上方的空白空间？

![更紧凑 - 使用元素上方的空白空间](../Images/fdd59cd8934cb7aaa8807810f9a65862.png)

没有 JavaScript，如果可能的话。

谢谢，马丁。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T21:29:09.373

不，这不能在 CSS 中完成。恐怕最好的方法是使用一个名为 masonry 的 javascript 项目。

[http://masonry.desandro.com/](http://masonry.desandro.com/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-13T21:50:26.847

对于水平和垂直平铺动态内容，CSS 选项是：

*   `float:left`，正如您已经看到的，仅提供有限的水平平铺。
*   `display:inline-block`给出与 不同的结果`float:left`，但没有平铺。
*   [CSS 多列布局](http://www.w3.org/TR/css3-multicol/)尚未完全定义。它支持垂直流到隐式列，但可能不是以符合平铺的方式。
*   [灵活的盒子布局](http://www.w3.org/TR/css3-flexbox/)还没有得到很好的支持。它支持一种可能不符合平铺条件的水平或垂直流，尽管它感觉像是朝着正确方向迈出的一步。

简而言之，即使尚未完全定义的 CSS 标准似乎也不支持这一点；所以可能还有很长的路要走。最简单的后备选项是使用 jQuery 插件。

除了[Masonry](http://masonry.desandro.com/)（正如@Billy Moat 建议的那样），另外两个 jQuery 插件是[Isotope](http://isotope.metafizzy.co/)和[Tiles Gallery](http://codecanyon.net/item/jquery-tiles-gallery/2281417)。砌体似乎最常被提及。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T21:33:17.413

假设`px`要填充 1 个块的空间的数量是`50px`。`margin-top: -50px;`

这不是魔术，只是为每个人做一点手动。如果您的内容是动态的，这将无法正常工作，或者需要 js 来计算我们是否需要在多行和所有内容上上升。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T21:47:02.923

这是可以做到的，但正如 CHE 所说，如果您的内容是动态的，那么这将以最糟糕的方式出错。

但是，如果它是一个静态站点，则可以肯定地做到这一点。

为了解决这个问题，在块和组中思考并对齐它们，在每个块内重新对齐所有块。

# c++ - 动态字符数组没有给出正确的字符串长度？

> ID：11942565
> 
> 赞同：1
> 
> 时间：2012-08-13T21:26:52.237
> 
> 标签：c++, memory-management, char

我想要一个长度等于循环迭代的动态字符数组。

```
char* output;
for (short i=0; i<2; i++){
    output = new char[i+1];
    printf("string length: %d\n",strlen(output));
    delete[] output;
} 
```

但是`strlen`返回 16，我希望它是 1 和 2。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T21:28:06.723

指向的新分配的内存`output`没有初始化：它可能有任何内容。

`strlen`要求它的参数是一个指向以 null 结尾的字符串的指针，这`output`不是，因为它还没有被初始化。该调用`strlen(output)`会导致您的程序表现出未定义的行为，因为它读取了这个未初始化的内存。任何结果都是可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:28:08.850

strlen 期望在字符串的末尾找到 NULL，它会计算所有字符，直到找到 0
您应该更改行以`output = new char[i+1]();`将字符初始化为 0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T21:40:10.940

在 C 中，字符串以空值结尾。`strlen()`返回计数的字节，直到找到该空终止。

`new`运算符不保证内存块的字节将被 _zero_ed。

您可以使用`calloc()`，它将它分配的块的所有字节归零，或者您需要`memset(output, 0, i+1)`在使用`new`运算符分配之后执行。

# amazon-ec2 - 如何更改 EC2 实例上的 SQL Server 排序规则

> ID：11942570
> 
> 赞同：2
> 
> 时间：2012-08-13T21:27:08.980
> 
> 标签：amazon-ec2, sql-server-2008-r2

我在 EC2 实例上运行 SQL Server 2008R2 Web 版。我需要更改服务器的排序规则。但是，由于安装文件不包含在映像中，因此我无法运行安装程序以使用更改的排序规则重新生成数据库。

这是必须的。无法使用默认排序规则。

有任何想法吗？提前致谢！

阿米特。

# sql - 索引对列数多但记录数少的表有帮助吗？

> ID：11942577
> 
> 赞同：3
> 
> 时间：2012-08-13T21:27:41.783
> 
> 标签：sql, sql-server, tsql, indexing

我假设索引可以帮助您根据 1 列或多列组合的散列找到特定记录。如果是这种情况，那么具有很多列但很少记录的大表将不会从索引中受益匪浅。它是否正确？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T21:30:07.857

这是正确的。在较小的表上（并且取决于查询），仅扫描整个表比根据对特定索引的查找组合结果然后查找以获取其余结果更有效。

不过，这里没有神奇的行数或其他公式。变量太多，无法一概而论。只是你应该知道的事情。

# ruby - Ruby Net::SSH 未定义方法 'shell'

> ID：11942579
> 
> 赞同：1
> 
> 时间：2012-08-13T21:27:43.983
> 
> 标签：ruby, ssh

我正在尝试在我的 Ruby 代码中使用 SSH 登录到远程机器，然后在 SSH 登录后尝试 cd 进入另一个目录。这是我的 Ruby 代码

```
require 'net/ssh'
require 'rubygems'
require 'needle'

Net::SSH.start('host', 'shui', :password => "password") do |ssh|
   output = ssh.exec!("hostname")
   shell = ssh.shell.open
   shell.pwd
   shell.cd "/svn"
   puts shell.pwd
end 
```

当我运行我的脚本时，它给了我这个错误：

```
testssh.rb:8:in `block in <main>': undefined method `shell' ... (NoMethodError) 
```

我很确定我已经安装了执行此操作所需的 gem。对于如何解决这个问题，有任何的建议吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T22:00:10.777

中没有`shell`方法`Net:SSH v2`，产生的对象是[Net::SSH::Connection::Session](http://net-ssh.github.com/ssh/v2/api/classes/Net/SSH/Connection/Session.html)。

此`net-ssh`扩展为您提供了您正在寻找的功能：[https ://github.com/mitchellh/net-ssh-shell](https://github.com/mitchellh/net-ssh-shell)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T22:17:12.227

你能检查你的版本吗？

```
gem list --local | grep ssh 
```

我有 2.5.2

我在网上找到了多个参考资料，但您应该使用：

[http://net-ssh.rubyforge.org/ssh/v2/api/classes/Net/SSH.html](http://net-ssh.rubyforge.org/ssh/v2/api/classes/Net/SSH.html)

这是对 v1 的参考

[http://net-ssh.github.com/ssh/v1/chapter-5.html](http://net-ssh.github.com/ssh/v1/chapter-5.html)

后者，使用shell方法。但我认为你没有安装那个 gem。

所以看看第一个（v2）。这对我来说很好。

# mysql - 如何在sql结果中将数据下推一行

> ID：11942590
> 
> 赞同：0
> 
> 时间：2012-08-13T21:28:42.550
> 
> 标签：mysql, sql, rows

我想要关于 sql 查询代码的帮助，以将特定列中的结果数据向下推送一行。例如在如下所示的随机表中，

```
x column                y column
6                       6
9                       4
89                      30
34                      15 
```

结果应该被“推”下一行，意思是

```
x column                y column
6                       null or 0 (preferably) 
9                       6
89                      4
34                      30 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:34:36.967

SQL 表没有固有的排序概念。因此，“下一行”的概念没有意义。

您的示例没有指定行顺序的列。没有下一步的定义。所以，你想做的事是做不到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:36:26.810

我不知道用您显示正在格式化的表格的方式来执行此操作的简单方法。如果您可能添加了两个连续编号的整数字段，它们提供行号和行号 + 1 值，您可以将表连接到自身并获取该信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-02T03:08:04.187

备份你的表后：创建一个 PHP 函数，它将： - 将 Y 的所有值加载到一个数组中 - 设置 Y = 0（MYSQL 更新） - 将值从 PHP 数组加载回 MYSQL

# crystal-reports - 比较字符串日期到日期格式字段 dd/MM/yyyy

> ID：11942601
> 
> 赞同：0
> 
> 时间：2012-08-13T21:29:49.263
> 
> 标签：crystal-reports, report, formula

我是新手，学习水晶报表很快。我需要一个能够将字符串字段日期 ex (4211990) 与日期字段格式 ex (4/21/1990) 进行比较的公式。任何帮助都非常感谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:25:50.390

`ToText({table.date},"Mdyyyy")`（根据瑞安的评论）

回答问题，不要评论回答问题:(

# php - Filter array with variable and keep results

> ID：11942614
> 
> 赞同：0
> 
> 时间：2012-08-13T21:30:10.230
> 
> 标签：php, arrays, variables

I have and array:

```
Array(
  [9533]=>44
  [6478]=>56
) 
```

I want to filter the array with a variable. I have tried this:

```
function filterArray($value){
    return ($value == $myVar);
}

$filteredArray = array_filter($myArray, 'filterArray');
print_r($filteredArray); 
```

it just prints:

```
array() 
```

if I change the variable to a hard number like 44, then it will give me what I want.

```
Array(
  [9533]=>44
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T21:47:01.933

不要使用全局变量，这是[个坏主意](https://stackoverflow.com/questions/5166087/php-global-in-functions)

```
$myVar = 44; 
$filteredArray = array_filter( $myArray, 
                               function($value) use ($myVar) {
                                   return $value == $myVar;
                               }
                             ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:43:25.690

如果`$myVar`是在`filterArray`回调函数之外定义的，则需要`global`在函数中声明它才能使用它。因此，如果您将`filterArray`回调更改为此，那么它应该可以工作：

```
function filterArray($value){
    global $myVar;
    return ($value == $myVar);
} 
```

[**演示**](http://sandbox.onlinephpfunctions.com/code/2268aee26dbde0d2d74b03d8cd658ef1aa0c44e2)

尽量避免在`global`不需要时使用关键字。对于大多数函数，您可以将变量作为参数传递。在您的情况下，这`global`是必要的，因为`array_filter`不允许带有参数的回调。

# html - 导航下拉菜单时保持悬停样式

> ID：11942619
> 
> 赞同：0
> 
> 时间：2012-08-13T21:30:31.183
> 
> 标签：html, css, drop-down-menu, hover, stylesheet

当用户使用下拉菜单时，我找不到使悬停样式保持不变的方法。一旦用户向下导航列表，悬停样式就会消失。为了更容易解释这个问题，去这个小提琴：http: [//jsfiddle.net/maFb3/](http://jsfiddle.net/maFb3/)

将光标悬停在“*更多*”按钮上，注意文本颜色的变化。现在，导航下拉菜单，一旦您离开*更多*框，样式就会恢复正常。问题是，当用户浏览该下拉菜单时，如何使悬停样式保持不变？我希望保留白色文本颜色。

这是我使用的悬停样式：

```
ul#mega a:hover { color: #FFFFFF; text-shadow: 1px 1px 0 #404747; } 
```

这是 HTML 代码的一部分：

```
<div class="clearfix" id="second-menu">
    <ul class="nav sf-js-enabled" id="secondary-menu">
        <li class="mfilm"><a style="border-bottom:9px solid #ea2e49" href="">Test menu 1</a></li>
       <li class="mfilm"><a style="border-bottom:9px solid #ea2e49" href="">Test menu 1</a></li>
        <li class="mtv"><a style="border-bottom:9px solid #2589cf" href="">Test menu 2</a></li>
    </ul>

<ul id="mega">
    <li style="background:none;" class="dif mmore"><a style="font-style:italic;border-bottom:9px solid #4b5571" href="#">More...</a>
      <div>

<ticman>

    <ul>
        <li class="mgames"><a style="border-bottom:9px solid #e34328" href="">Games</a></li>
        <li class="mliterature"><a style="border-bottom:9px solid #2c8f83" href="">Literature</a></li>
        <li class="marts"><a style="border-bottom:9px solid #cc226a" href="">Arts</a></li>
        <li style="background:none;" class="mcontact"><a style="border-bottom:9px solid #9395aa" href="">Contact</a></li>
    </ul>

</ticman>

        <h2>Classes</h2>
        <p><a href="#">Times</a><a href="#">Schedual</a><a href="#">Map</a></p>
        <p><a href="#">Names</a><a href="#">Study</a><a href="#">Directions</a></p>
        <p><a href="#">Health</a><a href="#">Dance</a><a href="#">Biology</a></p>
        <h2>Teachers</h2>
        <p><a href="#">Billy</a><a href="#">Madeleine</a><a href="#">Lauren</a><a href="#">Steve</a></p>
        <p><a href="#">Paddington</a><a href="#">Stefan</a><a href="#">Michael</a><a href="#">Madeline</a></p>
        <p><a href="#">Shannon</a><a href="#">Mary</a><a href="#">Raffaello</a><a href="#">Lorence R</a></p>
        <h2>Location</h2>
        <p><a href="#">Carlsbad</a><a href="#">Oceanside</a><a href="#">El Cajon</a></p>
        <p><a href="#">Vista</a><a href="#">La Costa</a><a href="#">Encinitas</a></p>
        <p><a href="#">San Diego</a><a href="#">Los Angles</a><a href="#">Cardiff</a></p>
      </div>
    </li>
  </ul>

</div> 
```

这是CSS的一部分：

```
/* ---------- Mega Drop Down --------- */
ul#mega li { padding-right: 0px; background: url(images/secondary-menu-bg.png) repeat-y top right; }

#mega {
list-style:none;
font-weight:bold;
height:2em;

}
#mega li {
padding: 23px 0px;
background:#999;
border:0px solid #000;
float:left;
text-align:center;
position:relative;
}
#mega li:hover {
background:#eee;
border-bottom:0; /* border-bottom:0; and padding-bottom:1px; keeps <li> and <div> connected */
z-index:1; /* shadow above adjacent li */

}
#mega a { font-size: 16px; color: #48423f; text-decoration: none; text-transform: uppercase; font-weight: bold; padding: 22px 16px;}

ul#mega a:hover { color: #FFFFFF; text-shadow: 1px 1px 0 #404747; }

/* ----------- Hide/Show Div ---------- */
#mega div {
    -moz-border-bottom-colors: none;
    -moz-border-image: none;
    -moz-border-left-colors: none;
    -moz-border-right-colors: none;
    -moz-border-top-colors: none;
    background: none repeat scroll 0 0 #FFFFFF;
    border-color: -moz-use-text-color #48423F #48423F;
    border-right: 1px solid #48423F;
    border-style: none solid solid;
    border-width: 0 1px 1px;
    font-weight: normal;
    left: -999em;
    margin-top: 1px;
    position: absolute;
    text-align: left;
    width: 496px;
}
/* --------- Within Div Styles --------- */
#mega li:hover div {
    left: -1px;
    top: auto;
}
#mega li.dif:hover div {
    left: -407px;
    top: 72px;
}
#mega div h2 {
    background: none repeat scroll 0 0 #999999;
    clear: both;
    float: left;
    font-size: 1em;
    margin: 10px 0 5px;
    padding: 0 10px;
    position: relative;
    width: 300px;
}
#mega div ticman {
    clear: both;
    float: left;
    position: relative;
margin-left:1px;
margin-right:1px;
    width: 495px;
    height: 74px;
    background-image: url(images/morebgwide.png);
    background-size:495px 74px;
    background-repeat:no-repeat;
}
#mega div p {
    float: left;
    padding-left: 10px;
    position: relative;
    width: 106px;
}
#mega div p a {
    clear: left;
    float: left;
    line-height: 1.4;
    text-decoration: underline;
    width: 100%;
}
#mega div a:hover, #mega div a:focus, #mega div a:active {
    text-decoration: none;
}

ul#secondary-menu li { background: url(images/secondary-menu-bg.png) repeat-y top right; }
    ul#secondary-menu a { font-size: 16px; color: #48423f; text-decoration: none; text-transform: uppercase; font-weight: bold; padding: 22px 16px; }
    ul#secondary-menu a:hover { color: #ffffff; text-shadow: 1px 1px 0 #404747; }
    #second-menu ul.nav li:hover a {color: #ffffff; text-shadow: 1px 1px 0 #404747; }

    ul#secondary-menu > li.current_page_item > a { color: #919e9e !important; }    

    ul#secondary-menu li ul, #category_mobile_menu { width: 360px !important; padding: 7px 0 10px; background: #fff url(images/content-bg.png); top: 55px !important; -moz-box-shadow:3px 3px 7px 1px rgba(0, 0, 0, 0.1); -webkit-box-shadow: 3px 3px 7px 1px rgba(0, 0, 0, 0.1); box-shadow: 3px 3px 7px 1px rgba(0, 0, 0, 0.1); -moz-border-radius: 10px; -webkit-border-radius: 10px; border-radius: 10px; border-top-left-radius: 0px;-moz-border-radius-topleft: 0px; border-top-right-radius: 0px; -webkit-border-top-left-radius: 0px; -moz-border-radius-topright: 0px; -webkit-border-top-right-radius: 0px; z-index: 9999px; display: none; }
        ul#secondary-menu ul li, #category_mobile_menu li a { margin: 0 !important; padding: 8px 0 8px 30px !important; width: 150px; float: left; }
            ul#secondary-menu ul li a, #category_mobile_menu a { padding: 0 !important; }

            ul#secondary-menu li:hover ul ul, ul#secondary-menu li.sfHover ul ul { top: -8px !important; left: 180px !important; -moz-border-radius: 8px; -webkit-border-radius: 8px; border-radius: 8px; }
            ul#secondary-menu ul li.even-item { background: none; }

.mfilm:hover{
    background:#ea2e49 !important;
}
.mtv:hover{
    background:#2589cf !important;
}
.mwebvideos:hover{
    background:#5c58ac !important;
}
.manimation:hover{
    background:#43cf61 !important;
}
.mmore:hover{
    background:#4b5571 !important;
}
.mliterature:hover{
    background:#2c8f83 !important;
}
.mgames:hover{
    background:#e34328 !important;
}
.marts:hover{
    background:#cc226a !important;
}
.mcontact:hover{
    background:#9395aa !important;
} 
```

虽然我建议访问小提琴以获得视觉效果，但我试图从中剥离我的大部分网站代码，因此它会显得凌乱：http: [//jsfiddle.net/maFb3/](http://jsfiddle.net/maFb3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T21:45:28.300

将此添加到您的 CSS 中：

```
#mega li.mmore:hover > a
{
    color:#fff;
    text-shadow:none;/* it added a text-shadow in FF*/
} 
```

**[演示](http://jsfiddle.net/maFb3/2/)**

# java - Play! framework fetch full page contents

> ID：11942624
> 
> 赞同：1
> 
> 时间：2012-08-13T21:30:51.603
> 
> 标签：java, playframework, web-scraping

I need to fetch the full contents of an URL withouth using the play! 1 WS library because of a SSL issue with that lib and the site I need to scrap.

Any ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T05:20:39.747

```
new URL("someurl").getContent(); 
```

[http://docs.oracle.com/javase/6/docs/api/java/net/URL.html#getContent](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html#getContent) ()

# java - struts2 动作映射配置

> ID：11942627
> 
> 赞同：0
> 
> 时间：2012-08-13T21:31:05.730
> 
> 标签：java, struts2, struts2-namespace

我正在 gae 上的 struts2 中尝试一个简单的应用程序，但在提交表单时遇到问题。

struts.xml 配置文件

```
<package name="auth" extends="struts-default" namespace="/auth">
    <default-interceptor-ref name="defaultStack"/>
    <action name="signup" class="signup" method="signup">
      <result name="success">/auth/signup.jsp</result>
    </action>
    <action name="postSignup" class="signup" method="create">
      <result name="input">/auth/signup.jsp</result>
    </action>
    <action name="signupConfirm" class="signup" method="signupConfirm"></action>

    <action name="resendCode" class="signup" method="resendCode"/>
</package> 
```

我正在使用弹簧来加载动作。

当我点击 url /auth/signup.html 时，我得到了正确的注册页面。现在提交表单后，如果表单验证失败（我正在通过我的操作中的 validate 方法执行此操作）。它让我回到同一个jsp。现在的主要问题是：即使我在验证方法中添加了 fielderror 并且我在表单中使用了 struts 标签，我也看不到错误。

```
 @Override
  public void validate() {

    if(!StringUtil.isValidUserName(userForm.getUserName())){
      addFieldError("userForm.userName", "Invalid username format");
    }else {
      TutorUser user = this.userBc.getUserByUserName(userForm.getUserName());
      if(user!=null){
        addFieldError("userForm.userName", "Username already exist. Please choose a different one.");
      }
    }
    if(!StringUtil.isEmail(userForm.getEmail())){
      addFieldError("userForm.email", "Invalid email provided");
    }
    if(StringUtil.isBlank(userForm.getPassword1()) || StringUtil.isBlank(userForm.getPassword2()) ||
        !userForm.getPassword1().equals(userForm.getPassword2())) {
      addFieldError("userForm.password2", "Passwords do not match");
    }
  } 
```

如果我再次点击 /auth/signup.html ，也从这个页面开始，它会给出这个错误 -

```
Problem accessing /auth/signup.html. Reason:

    No result defined for action com.tutorial.action.auth.SignUpAction and result input 
```

对于“注册”操作，我不需要在我的 conf 中进行“输入”，因为我只会显示注册表单。此外，除了“postSignup”方法之外，我`@SkipValidation`还在每个方法上添加了注释。我是struts2的新手。从 struts1 迁移。需要帮助。另外，我如何更好地组织我的 struts 配置？谢谢

这是jsp

```
 <s:form action="postSignup" cssClass="well" namespace="/auth" method="POST">
    <fieldset>
      <div class="control-group">
        <label class="control-label" for="userName">UserName</label>
        <div class="controls">
          <s:textfield cssClass="input-large" id="userName" name="userForm.userName"/>
          <span class="help-inline">Choose a username</span>
        </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="password1">Password</label>
        <div class="controls">
          <s:password cssClass="input-large" id="password1" name="userForm.password1"/>
          <span class="help-inline">Enter your Password</span>
        </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="password2">Confirm Password</label>
        <div class="controls">
          <s:password cssClass="input-large" name="userForm.password2" id="password2"/>
          <span class="help-inline">Confirm above password</span>
        </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="email">Email Address</label>
        <div class="controls">
          <s:textfield cssClass="input-large" id="email" name="userForm.email"/>
          <span class="help-inline">Enter your Email Address</span>
        </div>
      </div>
      <div class="form-actions">
        <s:submit name="action" id="action" value="SignUp" cssClass="btn btn-primary"/>
      </div>

    </fieldset>
  </s:form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T21:38:43.850

如果您再次点击 auth 页面并且仍然看到表单错误，这意味着您正在使用 Spring bean 的默认“singleton”范围。动作应该是“原型”范围，即按请求创建。

字段错误的问题无法解决，因为除了添加字段错误之外，我看不到任何与之相关的内容。您必须同时包含操作和 JSP 信息。

关于配置文件的“更好的组织”，如果没有进一步的信息，就不可能知道你的意思。怎么组织？你所拥有的有什么问题？你更喜欢什么？

# ios - Datasource organization for UITableView with multiple types of UITableviewCells (complex)

> ID：11942630
> 
> 赞同：0
> 
> 时间：2012-08-13T21:31:25.660
> 
> 标签：ios, uitableview, datasource

I'm looking to improve my way of working, as I seem to be using a pattern that might be "best in class", or there is a much better way of doing it. Looking for advice.

Context: I need to show many types of rows: headers, totals, customers, projects, etc, but the counts and sequences change.

Calculating which row was what became to complex.

So I created a dataObject that represents possible cell content, with an enum type, indicating what cell content this specific dataObject represents.

(pseudocode)

```
dataobject:NSObject{
    @property cellType 
    @property... storage for other info relevant to the eventual CustomCell
} 
```

I than generate an array with many dataObjects in the relevant sequence:

```
 - dataObject {cellType = header}
   - dataObject {celltype = customer}
   - dataOb..... 
```

number of rows this way is equal to the object count.

I generate the UITableviewCell by retrieving the dataObject at the specific index, check what type it is, and return a CustomCell of that type.

I even use the dataObject as a multifunctional container, to contain information needed to be displayed in the cells. As all Cells have a common parent, they know how to read a dataObject,and display the information for their specific CustomCell type.

I hope it's clear...

anyone know a better solution ?

# wpf - Issues with EventToCommand for the Loaded event

> ID：11942635
> 
> 赞同：1
> 
> 时间：2012-08-13T21:31:38.747
> 
> 标签：wpf, mvvm, mvvm-light

So I am using GalaSoft's EventToCommand for binding my View's Loaded event to my command in my ViewModel. The binding is working great but my Command is never being executed. The only way I have been able to get this to work is to handle the Loaded event in my View's code behind and then cast my DataContent to my VM and tell it to run my code (which the command is trying to do). Obviously this isnt very nice when trying to do it all MVVM like. FYI I did try the MouseEnter event and that worked great so that makes me think its a timing issue. Also, my View is a user control.

View:

```
<i:Interaction.Triggers>
    <i:EventTrigger EventName="Loaded">
         <cmd:EventToCommand PassEventArgsToCommand="False" Command="{Binding Path=DownloadDataCommand}" />
    </i:EventTrigger>
</i:Interaction.Triggers> 
```

ViewModel:

```
public RelayCommand DownloadDataCommand
{
    get { return new RelayCommand(() => DownloadDataAsync()); }
} 
```

Ive tried calling simple methods that do pretty much nothing and my relay command is still not invoked. So I doubt its the action within the RelayCommand. Does anyone see what I am doing wrong?

# clang - xcode 4.4 link error

> ID：11942641
> 
> 赞同：2
> 
> 时间：2012-08-13T21:32:09.480
> 
> 标签：clang, linker-errors

I just updated xcode to 4.4.1, and I now get an link error when I build for a device. (Simulator builds are no problem). The error I get on link is

```
ld: in section __TEXT,__text reloc 10: sectionForAddress(0x2208) address not in any section for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

Does anyone know what this error is, or how I can get more information out of the linker?

# android - 如何在 Java/Android 中处理慢速网络连接

> ID：11942643
> 
> 赞同：5
> 
> 时间：2012-08-13T21:32:13.320
> 
> 标签：android, web-services, android-asynctask, try-catch

我有一个应用程序对 MySQL 数据库进行了多次调用；它在`AsyncTask`. 下面是一个可能看起来像的示例。

我的主要问题是这个；有时，主机（Godaddy，呃）决定停止连接和我的`progressDialog`加载，加载，加载更多，直到强制关闭并且应用程序崩溃。特别是如果用户试图打断它（但是我已经设置为不可取消）。

有没有比我下面更好的方法来处理这个问题？我在`try`/中这样做`catch`，但不知道如何利用它来发挥我的优势。

```
class Task extends AsyncTask<String, String, Void> {
        private ProgressDialog progressDialog = new ProgressDialog(
                MasterCat.this);
        InputStream is = null;
        String result = "";

        protected void onPreExecute() {
            progressDialog.setMessage("Loading...");
            progressDialog.show();
            progressDialog.setCancelable(false);
        }

        @Override
        protected Void doInBackground(String... params) {
            String url_select = "http://www.---.com/---/master.php";

            HttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url_select);
            ArrayList<NameValuePair> param = new ArrayList<NameValuePair>();

            try {
                httpPost.setEntity(new UrlEncodedFormEntity(param));
                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();

                // read content
                is = httpEntity.getContent();

            } catch (Exception e) {

                Log.e("log_tag", "Error in http connection " + e.toString());
            }
            try {
                BufferedReader br = new BufferedReader(
                        new InputStreamReader(is));
                StringBuilder sb = new StringBuilder();
                String line = "";
                while ((line = br.readLine()) != null) {
                    sb.append(line + "\n");
                }
                is.close();
                result = sb.toString();

            } catch (Exception e) {
                // TODO: handle exception
                Log.e("log_tag", "Error converting result " + e.toString());
            }

            return null;

        }

        protected void onPostExecute(Void v) {

            String cat;
            try {
                jArray = new JSONArray(result);
                JSONObject json_data = null;
                for (int i = 0; i < jArray.length(); i++) {
                    json_data = jArray.getJSONObject(i);
                    cat = json_data.getString("category");

                    cats.add(cat);

                }
            } catch (JSONException e1) {
                Toast.makeText(getBaseContext(), "No Categories Found",
                        Toast.LENGTH_LONG).show();
            } catch (ParseException e1) {
                e1.printStackTrace();
            }

            ListView listView = getListView();
            listView.setTextFilterEnabled(true);

            listView.setOnItemClickListener(new OnItemClickListener() {

                public void onItemClick(AdapterView<?> arg0, View arg1,
                        int arg2, long id) {

                    Intent i = new Intent(getApplicationContext(), Items.class);
                    i.putExtra("category", cats.get(arg2));
                    startActivity(i);

                }
            });

            progressDialog.dismiss();

            MasterCatAdapter adapter = new MasterCatAdapter(MasterCat.this,
                    cats);
            setListAdapter(adapter);

        }
    } 
```

编辑：现在我假设强制关闭是因为连接不良；但是当我可以重新创建它时，我会尝试启动它。

Edit2：这里是 LogCat：

```
08-13 14:57:00.580: E/WindowManager(2262): Activity com.---.---.MyFragmentActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@42b02cd0 that was originally added here
08-13 14:57:00.580: E/WindowManager(2262): android.view.WindowLeaked: Activity com.---.---.MyFragmentActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@42b02cd0 that was originally added here
08-13 14:57:00.580: E/WindowManager(2262):  at android.view.ViewRootImpl.<init>(ViewRootImpl.java:374)
08-13 14:57:00.580: E/WindowManager(2262):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:292)
08-13 14:57:00.580: E/WindowManager(2262):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:224)
08-13 14:57:00.580: E/WindowManager(2262):  at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:149)
08-13 14:57:00.580: E/WindowManager(2262):  at android.view.Window$LocalWindowManager.addView(Window.java:547)
08-13 14:57:00.580: E/WindowManager(2262):  at android.app.Dialog.show(Dialog.java:277)
08-13 14:57:00.580: E/WindowManager(2262):  at com.---.---.MyFragmentActivity$RateFragment$RatingTask.onPreExecute(MyFragmentActivity.java:374)
08-13 14:57:00.580: E/WindowManager(2262):  at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:586)
08-13 14:57:00.580: E/WindowManager(2262):  at android.os.AsyncTask.execute(AsyncTask.java:534)
08-13 14:57:00.580: E/WindowManager(2262):  at com.---.---.MyFragmentActivity$RateFragment$insertTask.onPostExecute(MyFragmentActivity.java:520)
08-13 14:57:00.580: E/WindowManager(2262):  at com.---.---.MyFragmentActivity$RateFragment$insertTask.onPostExecute(MyFragmentActivity.java:1)
08-13 14:57:00.580: E/WindowManager(2262):  at android.os.AsyncTask.finish(AsyncTask.java:631)
08-13 14:57:00.580: E/WindowManager(2262):  at android.os.AsyncTask.access$600(AsyncTask.java:177)
08-13 14:57:00.580: E/WindowManager(2262):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
08-13 14:57:00.580: E/WindowManager(2262):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-13 14:57:00.580: E/WindowManager(2262):  at android.os.Looper.loop(Looper.java:137)
08-13 14:57:00.580: E/WindowManager(2262):  at android.app.ActivityThread.main(ActivityThread.java:4745)
08-13 14:57:00.580: E/WindowManager(2262):  at java.lang.reflect.Method.invokeNative(Native Method)
08-13 14:57:00.580: E/WindowManager(2262):  at java.lang.reflect.Method.invoke(Method.java:511)
08-13 14:57:00.580: E/WindowManager(2262):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-13 14:57:00.580: E/WindowManager(2262):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-13 14:57:00.580: E/WindowManager(2262):  at dalvik.system.NativeStart.main(Native Method)
08-13 14:57:00.588: D/AndroidRuntime(2262): Shutting down VM
08-13 14:57:00.588: W/dalvikvm(2262): threadid=1: thread exiting with uncaught exception (group=0x4200b300)
08-13 14:57:00.596: E/AndroidRuntime(2262): FATAL EXCEPTION: main
08-13 14:57:00.596: E/AndroidRuntime(2262): java.lang.NullPointerException
08-13 14:57:00.596: E/AndroidRuntime(2262):     at com.---.---.MyFragmentActivity$RateFragment$RatingTask.onPostExecute(MyFragmentActivity.java:461)
08-13 14:57:00.596: E/AndroidRuntime(2262):     at com.---.---.MyFragmentActivity$RateFragment$RatingTask.onPostExecute(MyFragmentActivity.java:1)
08-13 14:57:00.596: E/AndroidRuntime(2262):     at android.os.AsyncTask.finish(AsyncTask.java:631)
08-13 14:57:00.596: E/AndroidRuntime(2262):     at android.os.AsyncTask.access$600(AsyncTask.java:177)
08-13 14:57:00.596: E/AndroidRuntime(2262):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
08-13 14:57:00.596: E/AndroidRuntime(2262):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-13 14:57:00.596: E/AndroidRuntime(2262):     at android.os.Looper.loop(Looper.java:137)
08-13 14:57:00.596: E/AndroidRuntime(2262):     at android.app.ActivityThread.main(ActivityThread.java:4745)
08-13 14:57:00.596: E/AndroidRuntime(2262):     at java.lang.reflect.Method.invokeNative(Native Method)
08-13 14:57:00.596: E/AndroidRuntime(2262):     at java.lang.reflect.Method.invoke(Method.java:511)
08-13 14:57:00.596: E/AndroidRuntime(2262):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-13 14:57:00.596: E/AndroidRuntime(2262):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-13 14:57:00.596: E/AndroidRuntime(2262):     at dalvik.system.NativeStart.main(Native Method) 
```

编辑：这是在不同活动中但在 LogCat 中引用的任务：

```
class RatingTask extends AsyncTask<String, String, Void> {

            private ProgressDialog progressDialog = new ProgressDialog(
                    getActivity());

            InputStream is = null;
            String result = "";

            protected void onPreExecute() {
                progressDialog.setMessage("Loading...");
                progressDialog.show();
                progressDialog.setOnCancelListener(new OnCancelListener() {

                    public void onCancel(DialogInterface dialog) {
                        RatingTask.this.cancel(true);
                    }
                });
            }

            @Override
            protected Void doInBackground(String... params) {
                String url_select = "http://www.---.com/---/get_ratings.php";

                ArrayList<NameValuePair> param = new ArrayList<NameValuePair>();
                param.add(new BasicNameValuePair("item", Item));
                param.add(new BasicNameValuePair("category", Category));

                HttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url_select);

                try {
                    httpPost.setEntity(new UrlEncodedFormEntity(param));
                    HttpResponse httpResponse = httpClient.execute(httpPost);
                    HttpEntity httpEntity = httpResponse.getEntity();

                    // read content
                    is = httpEntity.getContent();

                } catch (Exception e) {

                    Log.e("log_tag", "Error in http connection " + e.toString());
                }
                try {
                    BufferedReader br = new BufferedReader(
                            new InputStreamReader(is));
                    StringBuilder sb = new StringBuilder();
                    String line = "";
                    while ((line = br.readLine()) != null) {
                        sb.append(line + "\n");
                    }
                    is.close();
                    result = sb.toString();

                } catch (Exception e) {
                    Log.e("log_tag", "Error converting result " + e.toString());
                }

                return null;

            }

            protected void onPostExecute(Void v) {

                String starTotal = null, starAvg = null;
                try {
                    JSONArray jArray = new JSONArray(result);
                    JSONObject json_data = null;
                    for (int i = 0; i < jArray.length(); i++) {
                        json_data = jArray.getJSONObject(i);

                        starTotal = json_data.getString("TotalRating");
                        starAvg = json_data.getString("AverageRating");

                    }
                } catch (JSONException e1) {
                    Log.e("log_tag",
                            "Error in http connection " + e1.toString());
                    Toast.makeText(getActivity(), "JSONexception",
                            Toast.LENGTH_LONG).show();
                } catch (ParseException e1) {
                    e1.printStackTrace();
                }

                int total = 0;

                if (starTotal != null) {
                    total = Integer.parseInt(starTotal);
                } else {
                    starTotal = "0";
                }

                if (total > 0) {
                    total = Integer.parseInt(starTotal);
                } else {
                    total = 0;
                }

                StarTotal = (TextView) getActivity().findViewById(
                        R.id.tvStarTotal);
                StarTotal.setText("(" + String.valueOf(total) + (")"));

                float avg = 0.f;
                try {
                    avg = Float.parseFloat(starAvg);
                } catch (NumberFormatException e) {
                    avg = 0;
                }

                DecimalFormat myFormat = new DecimalFormat("0.00");
                StarNumbers = (TextView) getActivity().findViewById(
                        R.id.tvStarNumber);
                StarNumbers.setText(myFormat.format(avg));

                ratingsBarTwo.setRating(Float.valueOf(avg));
                progressDialog.dismiss();
            }
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T22:00:22.080

首先检查是否有可用的连接，如果没有则通知用户。

> 特别是如果用户试图打断它（但是我已经设置为不可取消）。

我会重新考虑这个决定。就个人而言，我不喜欢不可中断的进程。我的建议是，您可以按照@CommonsWare 在[此处](https://stackoverflow.com/a/2737600/426429)评论中的建议继续。很快，有一个布尔变量来检查数据是否无效，或者您自己检查您的数据是否为空。如果是，请不要执行基于此数据的任何命令，您将不会有任何与此相关的强制关闭。

> 有没有比我下面更好的方法来处理这个问题？

除了上述内容之外，我建议向您的 http 客户端添加一些 HTTP 参数。例如：

```
final int CONN_WAIT_TIME = 3000;
final int CONN_DATA_WAIT_TIME = 2000;

HttpParams httpParams = new BasicHttpParams();      
HttpConnectionParams.setConnectionTimeout(httpParams, CONN_WAIT_TIME);
HttpConnectionParams.setSoTimeout(httpParams, CONN_DATA_WAIT_TIME);

DefaultHttpClient postClient = new DefaultHttpClient(httpParams);

// Go on... 
```

如果您的 http 客户端超过了您在各自字段中输入的时间，它只会给您一个[`ConnectTimeoutException`](http://developer.android.com/reference/org/apache/http/conn/ConnectTimeoutException.html). 现在您已经足够了解数据是否有效`onPostExecute()`以及您是否应该继续使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T22:07:13.200

您的异常是因为您在输入不同的活动时仍然显示对话框。在你说之前

```
Intent i = new Intent(getApplicationContext(), Items.class);
i.putExtra("category", cats.get(arg2));
startActivity(i); 
```

调用这个：

```
progressDialog.dismiss() 
```

而且您的活动将不再泄漏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T22:05:04.160

1.  您的 doInBackground 返回 NULL。 `return null;`你通常会`return result;` 在那里

2.  你的 onPostExecute(这里有 NuLL) :)) 结果。在这里`onPostExecute(String result)`并以这种方式处理它。检查再次发布的示例。

3.  您必须处理这些空值（`and`也许在 中关闭此进度对话框
    `onPostExecute()`）

> ```
> 8-13 14:57:00.596: E/AndroidRuntime(2262):     at com.---.--  -.MyFragmentActivity$RateFragment$RatingTask.onPostExecute(MyFragmentActivity.java:461)
>    08-13 14:57:00.596: E/AndroidRuntime(2262):     at com.---.---.MyFragmentActivity$RateFragment$RatingTask.onPostExecute(MyFragmentActivity.java:1) 
> ```

# mvvm - 如何重构视图模型

> ID：11942646
> 
> 赞同：0
> 
> 时间：2012-08-13T21:32:30.893
> 
> 标签：mvvm, prism

目前我正在使用 prism 开展一个项目，其中我们的一个模块有一个带有 3000 行代码的视图模型！！！。真的我会把这个类分成小块（有时很难阅读这个视图模型中的代码）实际上视图模型的代码有更多的与命令相关的 30 个属性，我认为这是一个很好的起点..（一些想法我怎样才能将这些命令移动到其他类？）有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:52:29.583

您可以做一些事情，首先应该有多少代码在视图模型中，有多少代码应该在模型本身中？

其次，任何代码都可以成为视图模型作为依赖项的服务的一部分吗？

第三，您可能需要考虑基于约定的 MVVM 框架，例如[Caliburn.Micro](http://caliburnmicro.codeplex.com/)，这将允许您使用操作而不是 WPF 命令，这意味着将视图模型上的动词与视图上的事件绑定的样板代码要少得多，以及作为其他优点。

# sql - grails/SQL 是否自动知道要使用哪些索引？

> ID：11942647
> 
> 赞同：0
> 
> 时间：2012-08-13T21:32:35.503
> 
> 标签：sql, grails, indexing, grails-orm

我有一个具有两个属性的简单域类。例如：

```
class Person {
  String firstName
  String lastName
} 
```

现在我想使用动态查找器找到一个名为“Some Guy”的人：

```
def thisGuy = Person.findByFirstNameAndLastName("Some","Guy") 
```

我应该在我的 person 类中添加什么来在数据库中创建正确的索引以使搜索快速进行？这是我目前的猜测：

```
static mapping = {

    firstName index: 'Name_Idx'
    lastName  index: 'Name_Idx'
} 
```

这是正确的，还是我应该为每个索引？

```
static mapping = {
    firstName index: 'Fname_Idx'
    lastName index: 'Lname_Idx'
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T21:55:38.807

如果您使用：

```
static mapping = {
        firstName index: 'name_idx'
        lastName index: 'name_idx'
        description index: 'name_idx'
} 
```

**这将在索引name_idx**中创建 3 列。

请记住，列将按字母顺序列出。

如果您的意思是“什么是最好的：多索引还是多列索引？” 好吧，这取决于很多。但是，总而言之，[这篇文章](http://www.mysqlperformanceblog.com/2008/08/22/multiple-column-index-vs-multiple-indexes/)会让你走上正确的道路。您正在寻找的答案是它取决于您最常用的查询和分组的 where 子句。

# jquery - 每个产品数量jquery旁边的重力形式小计

> ID：11942648
> 
> 赞同：1
> 
> 时间：2012-08-13T21:32:40.587
> 
> 标签：jquery, wordpress, gravity, subtotal

我正在使用 Gravity Forms 产品字段来创建订单表单类型系统。

我正在尝试计算每个产品的小计（成本 * 数量）并通过 jQuery 在数量旁边显示它。

这是我的 jQuery：

```
<script type="text/javascript">
    $(document).ready(function() {
        $('.gfield_price .ginput_container').append('<div class="product_subtotal">SUBTOTAL</div>');
        $('.ginput_quantity').keypress( function( ) {
            $x = $('.ginput_quantity');
            $x.next('div.product_subtotal').html( this.value );
        });
    });
</script> 
```

这是我的html的片段：

```
<li id='field_5_12' class='gfield gfield_price gfield_price_5_12 gfield_product_5_12' >
    <label class='gfield_label' for='input_5_12'>500 GPH Bilge Pump 24V</label>
    <div class='ginput_container'>
        <input type='hidden' name='input_12.1' value='500 GPH Bilge Pump 24V' class='gform_hidden' />
        <span class='ginput_product_price_label'>Price:</span>
        <span class='ginput_product_price' id='input_5_12'>$2.99</span>
        <input type='hidden' name='input_12.2' id='ginput_base_price_5_12' class='gform_hidden' value='$2.99'/>
        <span class='ginput_quantity_label'>Quantity:</span>
        <input type='text' name='input_12.3' value='' id='ginput_quantity_5_12' class='ginput_quantity' size='10' tabindex='6'/>
    </div>
</li> 
```

正如您所看到的，目前我只是尝试使用输入到数量字段中的值来更新 product_subtotal div。稍后我会担心实际的计算。我的问题是我不确定如何只选择下一个 div.product_subtotal，因为 $x.next() 会选择每个 product_subtotal。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:38:00.520

您的`next()`方法选择所有带有 class of 的 div 标签，`.product_subtotal`因为您`.ginput_quantit`在调用`next()`选择所有带有 class of 的 div 标签的方法之前选择了页面上的所有输入`.product_subtotal`，试试这个：

```
$('.ginput_quantity').keypress( function( ) {
    $x = $(this); // just this input element
    $x.next('div.product_subtotal').html( this.value ); 
}); 
```

# php - 仅在需要时显示数字

> ID：11942650
> 
> 赞同：0
> 
> 时间：2012-08-13T21:32:49.993
> 
> 标签：php, joomla, numbers, digits

我有一个查看项目评级的代码。但是..它显示，例如。'5.0/5' 当我希望它查看 5/5 时。但是当它是前。'4.5/5' 然后我希望它显示数字。

我该怎么做？

代码：

```
 $rating_sum = intval($votes->rating_sum);
 $rating_count = intval($votes->rating_count);
 $evaluate = ($rating_count==0) ? "0" : number_format($rating_sum/$rating_count,1);

 $output=" Rating: ". $evaluate."/5";
 echo $output; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T21:45:20.157

在 $evaluate 中使用时，将 '.0' 替换为 '' 怎么样？

```
$rating_sum = intval($votes->rating_sum);
$rating_count = intval($votes->rating_count);
$evaluate = ($rating_count==0) ? "0" : number_format($rating_sum/$rating_count,1);

$evaluate = str_replace('.0', '', $evaluate);

$output=" Rating: ". $evaluate."/5";
echo $output; 
```

# dreamweaver - Amazon EC2 上的 Dreamweaver CS6 SSH 私有密钥 SFTP

> ID：11942653
> 
> 赞同：6
> 
> 时间：2012-08-13T21:32:59.957
> 
> 标签：dreamweaver

有没有办法通过 SFTP 仅使用 SSH 私钥身份验证连接到 Amazon EC2 服务器？我一直在研究这个问题，但找不到正确的答案。

基本上，我需要在 Dreamweaver 中编辑文件并在保存时启用自动上传。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-11-26T10:15:03.537

我有一些详细的设置说明：

1.  下载 Bitvise SSH 客户端 (Tunnelier) [http://www.bitvise.com/download-area](http://www.bitvise.com/download-area)
2.  在登录选项卡中，按“使用密钥对管理器”并导入您的亚马逊 .pem 密钥。你最终应该得到这样的结果： ![在此处输入图像描述](../Images/71865b0b7c29abb123496871bf78aa9b.png)

3.  在登录选项卡中设置您的亚马逊实例信息

> 主机：ec2实例IP端口：22用户名：ec2-user初始方法：publickey-slot 1

![在此处输入图像描述](../Images/e5547d5b6f6c7b230c4420f9f61160b3.png)

4.  在服务选项卡中为 FTP 连接设置 localhost 侦听器，如下所示： ![在此处输入图像描述](../Images/938deaf2f3f81445516d9ecf5d1f6c74.png)

5.  按登录以连接到 Amazon EC2。如果成功，它将打开 ssh 和 SFT 终端。您现在可以关闭这两个窗口。

6.  在 Dreamweaver 中，设置一个新服务器以连接到按位 127.0.0.1 侦听器。您可以设置 FTP 的根目录。 ![在此处输入图像描述](../Images/e38900d6d9f2825a27a49a43a70537ca.png)

7.  现在，当您将文件放入“Amazon Test”时，它们将被定向到您的亚马逊 EC2 实例，位于上面选定的根目录中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T07:26:30.870

Adobe 不提供将 SFTP 与 Dreamweaver 的私钥身份验证一起使用的选项。

根据 Adob​​e 的网站，您可以使用 FTPS，其中有一个证书用于验证您连接到正确的服务器并显然是加密，但没有关于使用带有私钥身份验证的 SFTP。

您可以在此处阅读有关 Dreamweaver 远程服务器连接功能的所有信息：http: [//helpx.adobe.com/dreamweaver/using/connect-remote-server.html](http://helpx.adobe.com/dreamweaver/using/connect-remote-server.html)

您可以使用 Putty 的 Pageant 和 FileZilla，考虑到 Adob​​e Dreamweaver 的成本（我有），我知道这很糟糕，但似乎是唯一的其他安全选项。您可以在此处阅读有关如何使用 2 的信息：[http ://wiki.filezilla-project.org/Howto](http://wiki.filezilla-project.org/Howto)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-22T03:20:53.023

我看到这是一个旧帖子，但我刚刚遇到了这个问题。多年来我一直在使用具有相同问题的应用程序，我的解决方案是使用 Bitvise Tunnelier ( [http://www.bitvise.com/tunnelier](http://www.bitvise.com/tunnelier) )，它允许您使用密钥对连接到 ssh，它会代理 FTP到您设置的任何端口上的本地主机。因此，在 Dreamweaver 中，您使用常规 FTP 连接到该端口的 localhost。在大多数情况下它足够安全，因为 Tunnelier 不会接受来自本地以外的任何连接。

他们网站上的下载页面可能很难找到，它在这里： http: [//www.bitvise.com/download-area](http://www.bitvise.com/download-area)。您将需要“下载 Bitvise SSH 客户端（隧道）”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-11T07:38:30.677

您可以通过查看以下说明在您的 EC2 实例上简单地允许密码身份验证（默认情况下禁用）

[http://bensnotepad.com/enable-password-access-to-your-amazon-ec2-linux-instance](http://bensnotepad.com/enable-password-access-to-your-amazon-ec2-linux-instance)

# python - 为什么孩子们死不瞑目？

> ID：11942654
> 
> 赞同：11
> 
> 时间：2012-08-13T21:33:02.507
> 
> 标签：python, linux, multiprocessing

我希望该`terminate()`方法可以杀死两个进程：

```
import multiprocessing
import time

def foo():
    while True:
        time.sleep(1)

def bar():
    while True:
        time.sleep(1)

if __name__ == '__main__':
    while True:
        p_foo = multiprocessing.Process(target=foo, name='foo')
        p_bar = multiprocessing.Process(target=bar, name='bar')
        p_foo.start()
        p_bar.start()
        time.sleep(1)
        p_foo.terminate()
        p_bar.terminate()
        print p_foo
        print p_bar 
```

运行代码给出：

```
<Process(foo, started)>
<Process(bar, started)>
<Process(foo, started)>
<Process(bar, started)>
... 
```

我期待：

```
<Process(foo, stopped)>
<Process(bar, stopped)>
<Process(foo, stopped)>
<Process(bar, stopped)>
... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T21:36:54.680

因为[终止](http://docs.python.org/library/multiprocessing.html#multiprocessing.Process.terminate)函数只是向进程发送 SIGTERM 信号，但[信号是异步的](http://www.enderunix.org/docs/signals.pdf)，所以你可以休眠一段时间，或者[等待](https://docs.python.org/2/library/multiprocessing.html#multiprocessing.Process.join)进程终止（信号接收）。

例如，如果您`time.sleep(.1)`在终止后添加字符串，它可能会被终止。

# fullcalendar - Yii - FullCalendar - 如何设置时区？

> ID：11942661
> 
> 赞同：4
> 
> 时间：2012-08-13T21:33:56.030
> 
> 标签：fullcalendar

我正在使用 FullCalendar：

[http://arshaw.com/fullcalendar/](http://arshaw.com/fullcalendar/)

可以设置时区吗？我想让我的用户选择他们想要查看日历的时区。现在，仅当我更改笔记本电脑上的系统时间时，事件时间才会更改。我使用的是 1.5.3 版本，并在文档中看到了这一点：

```
<script type='text/javascript'>
  $(document).ready(function() {
  $('#calendar').fullCalendar({
    events: {
        url: 'http://www.google.com/your_feed_url/',
        className: 'gcal-event',           // an option!
        currentTimezone: 'America/Chicago' // an option!
    }
  });
});
</script> 
```

我试过设置 currentTimezone 并且时间没有改变。我还搜索了包含的 javascript 文件，并且找不到任何“currentTimezone”的引用。这在 1.5+ 版本中怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T21:41:06.720

尝试设置`ignoreTimezone`为**`false`**.

```
<script type='text/javascript'>
  $(document).ready(function() {
  $('#calendar').fullCalendar({
    events: {
        url: 'http://www.google.com/your_feed_url/',
        className: 'gcal-event',           // an option!
        currentTimezone: 'America/Chicago' // an option!
    },
    ignoreTimezone: false 
  });
});
</script> 
```

让我知道这是否有帮助。

# java - JSF：如何将参数传播到 web.xml 中的登录页面

> ID：11942663
> 
> 赞同：0
> 
> 时间：2012-08-13T21:34:01.407
> 
> 标签：java, jsf, web.xml

我有一个页面：

```
/myApp/internalPage.xhtml?orderId=1234 
```

当用户未登录时，我的 web.xml 配置重定向到

```
/myApp/login.xhtml 
```

在这一步中，我丢失了我的参数信息 (orderId=1234)。

*如何配置 web.xml 以将所有参数传播到登录页面？*

我想被重定向到：

```
/myApp/login.xhtml?orderId=1234 
```

Tks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:04:08.003

如果我没有误会您的意思，重定向是由您的安全约束触发的。在这种情况下，用户登录后，他/她将被重定向到原始 url，即 /myApp/internalPage.xhtml?orderId=1234（带参数）

# xcode - Xcode：找不到控件的 rgb 颜色选择器

> ID：11942664
> 
> 赞同：5
> 
> 时间：2012-08-13T21:34:01.860
> 
> 标签：xcode, color-picker, developer-tools

使用 Xcode 4.3.2 我无法通过 rgb 添加颜色值。标准选择器看起来像这样![在此处输入图像描述](../Images/46f46cfb49467021be8449450af93185.png)

它没有为 rgb 提供任何输入，也没有任何滑块允许我设置其他任何内容。

此位置的自定义选择器[http://www.panic.com/~wade/picker/](http://www.panic.com/~wade/picker/)指示我安装在

> /home/Library/ColorPickers.

但是 home 是不可编辑的。所以我把它放入

> /用户/用户名/库/ColorPickers

什么都不做。（这是正确的吗？）谁能解释如何正确安装它？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T21:50:17.203

我使用这个工具，它工作正常，/home 指的是 /Users/Username，所以你确实把它放在了正确的文件夹中。

如果该工具仍然无法正常工作，那么您将需要重新启动 Xcode，甚至可能需要重新启动计算机。

之后，您只需在 Xcode 中打开标准选择器，它不会被替换，而是会添加一个新选项卡。

![在此处输入图像描述](../Images/875d5640140375307a67a80a60b4560e.png)

此外，您始终可以在代码中手动指定 RGB 值，例如：

```
[myLabel setTextColor:[UIColor colorWithRed:235.2/255 green:150.7/255 blue:35.1/255 alpha:1.0]]; 
```

这些值是 x/255，因为 UIColor 需要一个介于 0 和 1 之间的浮点值，这是将标准 RGB 255 值转换为 0-1 的简单方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-01T16:10:43.167

我有同样的问题，只是你的工具栏没有显示。转到查看-> 显示工具栏，您现在应该会看到一个颜色选择器选项的选项卡栏。有关安装自定义颜色选择器的更多信息，请访问[https://developer.apple.com/library/mac/documentation/cocoa/conceptual/DrawColor/Tasks/AddingColorPickers.html](https://developer.apple.com/library/mac/documentation/cocoa/conceptual/DrawColor/Tasks/AddingColorPickers.html)

# php - 验证电话号码和邮政编码 PHP

> ID：11942665
> 
> 赞同：1
> 
> 时间：2012-08-13T21:34:04.903
> 
> 标签：php, html, css, post

我正在尝试验证电话号码并要求它只有 10 位数字，不允许使用空格或特殊字符（例如：0123456789），邮政编码也是如此，但只有 5 位数字（例如：01234）。

到目前为止，这就是我的电话号码字段。

```
$phone = stripslashes($_POST['phone']);

if(!$phone || $phone == "Phone Number*")
{
$error .= "Please enter your phone number.<br />";
} 
```

下一个 if 语句应检索类似于“请输入有效的电话号码。例如：“0123456789”的错误。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T21:39:17.703

如果您不想使用[正则表达式](http://us2.php.net/preg_match)，请查看[ctype_digit](http://us2.php.net/manual/en/function.ctype-digit.php)

例如：

```
if(strlen($phone)==10 && ctype_digit($phone)) {
    //valid
} else {
    //invalid
} 
```

我无法证明这是否会比正则表达式更快或更慢，但我认为它可能没有实际意义。这或多或少对你来说最有意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T21:37:49.267

您可以在这里尝试正则表达式：

```
if(preg_match('/^[0-9]{10}$/', $phone)){
    // valid
}else{
    // Not valid
} 
```

有点像这样的东西将确保只有数字字符和其中的 10 个字符。只需将邮政编码的 10 更改为 5 即可。

`$_POST['phone']`如果在您访问它时未设置另一件事，您将`E_NOTICE`在这里得到一个提示：

```
$phone = isset($_POST['phone']) ? stripslashes($_POST['phone']) : null;

if(!$phone) // ERROR 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T21:40:41.183

```
$phone = stripslashes($_POST['phone']);

if(!$phone || $phone == "Phone Number*")
{
$error .= "Please enter your phone number.<br />";
}

if(!preg_match('/^\d{10}$/', $phone)) $error .= "Please enter phone number as ##########.<br />"; 
```

对于邮政编码

```
if(!preg_match('/^\d{5}$/', $zip)) $error .= "Please enter your zip code as #####.<br />"; 
```

请记住，这将不允许外国邮政编码（可能具有不同的长度或包含字母）

* * *

还有其他一些建议（以防止不必要的错误消息）

您可能希望通过执行以下操作来处理您的用户输入，以便 123-456-7890 变为 1234567890

`preg_replace('/[^\d]/','',$input)`

也许做一个`trim($input)`去除前导/尾随空格

* * *

最后，您在$_POST['phone'] 上使用stripslashes 有什么特别的原因吗？如果它们都是您期望的数字，那么这不是必需的。如果它们不是所有数字，那么无论如何你都会抛出错误

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T21:46:06.987

怎么样：

```
function check($number,$length)
{
  if(ctype_digit ($number) && strlen($number)==$length)
    return true;
  else
    return false;
}

if(check("1234",4))
  echo "ok";
else
  echo "Please enter a valid phone number. Example: "0123456789"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-29T13:45:37.917

好吧，这是一篇旧帖子，但无论如何我都会在这里发表一些评论。

1）您真的不应该强迫用户输入正确的数字，当然您在前端的验证将涵盖这一点，但永远不要假设它是进入“后端”的情况。

考虑以下内容，而不是将其放在用户身上：

```
// remove chars
$number = preg_replace('/[\D]/', '', $number);

//unit test sanitizer
filter_var($number, FILTER_SANITIZE_NUMBER_INT)

// check number
preg_match('/^[0-9]{10}$/', $zip) 
```

示例：如果在查找最接近的匹配邮政编码等中输入了足够多的数字，则读取用户输入。（我实际上曾在网站上使用过一次）当然，将前端设置为检查是有用的，但以防万一失败。

```
$number = 'z 02012s';

// remove chars
$number = preg_replace('/[\D]/', '', $number);

//unit test sanitizer
$number = filter_var($number, FILTER_SANITIZE_NUMBER_INT);

// check number
if (preg_match('#^[0-9]{5}$#', $number) === 1) {
    //(optional) lookup closest zip using your DB.
    $look_zip = $db->getClosestZipMatch($number);
} else {
    echo $number . " isn't 5 digits only, do something.";
} 
```

# python - 使用 sqlalchemy 从金字塔框架中插入一个空日期到 sqlite3

> ID：11942666
> 
> 赞同：0
> 
> 时间：2012-08-13T21:34:11.670
> 
> 标签：python, sqlite, date, sqlalchemy, pyramid

```
python 2.7
pyramid 1.3a4
sqlalchemy 7.3
sqlite3.7.9 
```

从 sqlite 提示 > 我可以做到：

```
insert into risk(travel_dt) values ('')
also
insert into risk(travel_dt) values(Null) 
```

两者都会导致新行的值为空，`risk.travel_dt`但是当我`travel_dt`从金字塔中尝试这些值时，Sqlalchemy 给了我一个错误。

在第一种情况下，我得到`sqlalchemy.exc.StatementError`：

> SQLite Date 类型只接受 python 日期对象作为输入

在第二种情况下，我得到`Null is not defined`. 当我使用“Null”时，我得到第一个案例错误

对于另一个关于 null 的问题，我深表歉意：我已经阅读了很多材料，但一定错过了一些简单的东西。感谢您的帮助克莱门斯赫歇尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:22:43.757

虽然您没有提供对您正在使用的表定义或任何示例代码的任何见解，但我猜这个问题是由于混淆`NULL`（数据库保留字）和`None`（Python 保留字）造成的。

错误消息告诉您，您需要使用有效的 python`date`对象调用 SQLA 方法，而不是诸如“Null”或“”之类的字符串。

假设您有一个名为的表，`risk`其中包含一个名为 的列`travel_dt`，您应该能够在该表中创建一个类似于以下内容的行：

```
risk.insert().values(travel_dt=None) 
```

请注意，这只是一个片段，您需要在[SA Docs SQL 表达式语言教程](http://docs.sqlalchemy.org/en/rel_0_7/core/tutorial.html#executing)`engine`中定义的上下文中执行这样的调用。

# javascript - 在 chrome 中使用 document.removeChild() 删除脚本

> ID：11942667
> 
> 赞同：1
> 
> 时间：2012-08-13T21:34:13.807
> 
> 标签：javascript, dom

我有一个 html 页面，其中包含许多从远程位置加载脚本的 html/head/script 标签。我想在页面加载后以编程方式从页面中删除脚本。

要删除脚本，我使用的`removeChild`是`DOMElement`.

```
element.removeChild(child); 
```

此调用成功执行，但从脚本加载的函数仍在内存中。对加载的函数没有影响。

我也试过：

```
element.replaceChild( new, old ); 
```

两者都没有效果。这是错误还是功能？如何以编程方式删除以前加载的脚本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T21:46:26.753

在加载后删除脚本元素不会删除脚本本身。我不知道如何“卸载”已经加载的脚本。如果有你想要替换的目标函数，你可以重新定义那些只会用不同的代码替换旧代码的全局符号，但 javascript 不提供卸载的能力。

例如，如果脚本有一个名为 的全局函数`callMe()`，您可以在全局范围内将该函数重新定义为其他内容：

```
function callMe() { /* replacement function that does nothing */} 
```

最后出现的定义将生效。

# css - 在“标题”div 中嵌套两个 div 会破坏设计

> ID：11942668
> 
> 赞同：2
> 
> 时间：2012-08-13T21:34:16.570
> 
> 标签：css, html

我有一个标题，应该始终显示在页面顶部，距顶部约 20 像素。现在它是用两个 div 定义的，并且按照它应该的方式工作。

[http://jsfiddle.net/nBgj4/](http://jsfiddle.net/nBgj4/)

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
body {
    height: 100%;
    margin-left: 20px;
    margin-top:0px;
    margin-bottom: 0px;

}
.subheader-left {
    position: absolute;
    top: 20px;
    font-family: serif;
    font-size: 20px;
    text-align: left;
}
.subheader-right{
position: absolute;
font-family: sans-serif;
font-size: 12px;
top: 20px;
right: 20px;}
</style>

<title>XYZ</title>

</head>
<body>
    <div class="subheader-left">XYZ<br /></div>
    <div class="subheader-right">LOREM</div>
</body>
</html> 
```

一旦我尝试用“标题”DIV 标记封装两个 DIV 标记，并为其分配两个封装的 div 共有的元素（顶部：20px），它就会破坏设计。

我一直认为嵌套的 div 是从它们的父 div 继承的，并且想了解为什么在这种情况下这不起作用。我认为这是因为“位置：绝对”标签，但“位置：相对”破坏了设计。

谢谢

[http://jsbin.com/emulel/1/edit](http://jsbin.com/emulel/1/edit)

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
body {
    height: 100%;
    margin-left: 20px;
    margin-top:0px;
    margin-bottom: 0px;

}
.header {top:20px;}
.subheader-left {
    position: relative;
    font-family: serif;
    font-size: 20px;
    text-align: left;
}
.subheader-right{
position: relative;
font-family: sans-serif;
font-size: 12px;
right: 20px;}
</style>

<title>XYZ</title>

</head>
<body>
<div class="header">
    <div class="subheader-left">XYZ<br /></div>
    <div class="subheader-right">LOREM</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T21:42:54.893

你混合了一些东西：

header 没有分配位置，所以 top: 20px; 没用。如果您定位元素，absolute 将始终针对相对定位的元素定位。

你应该去浮动：

保持你的 html 原样并添加这个 CSS：

```
.header {
  overflow: hidden;/* to contain the floated elements */
}
.subheader-left {
  float: left;
}.subheader-right {
  float: left;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:42:49.197

这样的事情应该会让你走上正确的道路：

[http://fiddle.jshell.net/3gZNM/3/](http://fiddle.jshell.net/3gZNM/3/)

无需绝对定位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T21:43:16.940

你需要

```
.subheader-left {
float:left;
}
.subheader-right{
float:right;
} 
```

这是因为在第一个示例中，div 有`position:absolute`，所以它们的宽度是最小的。

但是在第二个他们有`position:relative`并且它`display`是`block`，所以他们扩大并且他们的宽度是最大的。然后第二个 div 转到第二行。

但是如果你添加浮动，它们的宽度将最小并且它们将保持在同一条线上。此外，第二个 div 将向右移动。

但是请记住将标题更改`overflow`为`hidden`,`auto`或`scroll`, 或添加`<div style="clear:both"></div>`到标题的末尾。

# symfony - 如何使用 symfony2 博客中的 DQL 查询检索类别？

> ID：11942674
> 
> 赞同：1
> 
> 时间：2012-08-13T21:34:50.237
> 
> 标签：symfony, doctrine-orm, dql

我在 symfony2 中创建了一个应用程序。到目前为止，我有一个对用户进行身份验证的实体**用户**、一个实体**来宾**和一个**类别**。

**用户与****来宾**具有 OneToMany 关系，保持来宾（对于事件），将 users.id 映射到 guest.user_id 变量。

**出于同样的原因，**用户也与****类别**具有 OneToMany 关系。**

 ****客人与****类别**具有多对多关系，因为许多类别中有许多客人，许多客人有许多类别。

我已经创建了所有内容，并且 CRUD 操作成功地向我显示了用户添加的所有客人。我想添加每个客人属于查看操作的类别。

我很困惑。我做了一个自定义查询来检索登录用户的所有客人：

```
public function indexAction()
    {
       $user = $this->get('security.context')->getToken()->getUser();
       $userId = $user->getId();

       $em = $this->getDoctrine()->getEntityManager();
       $query = $em->createQuery("SELECT g
                                  FROM Acme\SomethingBundle\Entity\Guest g
                                  INNER JOIN g.user u
                                  WHERE u.id = :userId
                                  ORDER BY g.surname ASC");
        $query->setParameter('userId', $userId); 
        $entities = $query->getResult();

        return $this->render('AcmeSomethingBundle:Guest:index.html.twig', array(
            'entities' => $entities
        ));
    } 
```

如果我尝试将**类别**实体添加到查询中，则会出现异常：

```
public function indexAction()
        {
           $user = $this->get('security.context')->getToken()->getUser();
           $userId = $user->getId();

           $em = $this->getDoctrine()->getEntityManager();
           $query = $em->createQuery("SELECT g , c
                                      FROM Acme\SomethingBundle\Entity\Guest g,
                                           Acme\SomethingBundle\Entity\Category c
                                      INNER JOIN g.user u
                                      WHERE u.id = :userId
                                      ORDER BY g.surname ASC");
            $query->setParameter('userId', $userId); 
            $entities = $query->getResult();

            return $this->render('AcmeSomethingBundle:Guest:index.html.twig', array(
                'entities' => $entities
            ));
        } 
```

请帮忙。我一直在努力让它工作 6 个小时（在一个系列中:)）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:55:35.003

```
SELECT g
FROM Acme\MarriBundle\Entity\Guest g
LEFT JOIN g.user u
WHERE u.id = :userId
ORDER BY g.surname ASC 
```

查询是对的，错误的是树枝编码。我必须创建一个循环，因为类别是一个数组

```
{% for category in entity.categories %}
{{ category.name }}
{% endfor %} 
```**

# caching - nginx：将条件过期标头添加到 fastcgi_cache 响应

> ID：11942677
> 
> 赞同：3
> 
> 时间：2012-08-13T21:35:04.123
> 
> 标签：caching, nginx, fastcgi

使用 nginx fastcgi_cache 时，我缓存 HTTP 200 响应的时间比任何其他 HTTP 代码都要长。我希望能够根据此代码有条件地设置 expires 标头。

例如：

```
fastcgi_cache_valid   200 302  5m;
fastcgi_cache_valid   any      1m;

if( $HTTP_CODE = 200 ) {
  expires 5m;
}
else {
  expires 1m;
} 
```

是否可能出现上述情况（在位置容器内）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T21:00:08.287

当然，来自[http://wiki.nginx.org/HttpCoreModule#Variables](http://wiki.nginx.org/HttpCoreModule#Variables)

```
$sent_http_HEADER

The value of the HTTP response header HEADER when converted to lowercase and 
with 'dashes' converted to 'underscores', e.g. $sent_http_cache_control, 
$sent_http_content_type...; 
```

所以你可以在 if 语句中匹配 $sent_http_response

有一个陷阱，因为[http://nginx.org/en/docs/http/ngx_http_headers_module.html#expires](http://nginx.org/en/docs/http/ngx_http_headers_module.html#expires)没有列出 if's 作为 expires 指令的允许上下文

您可以解决在 if 块中设置变量的问题，然后像这样稍后引用它：

```
set $expires_time 1m;
if ($send_http_response ~* "200") {
  set $expires_time 5m; 
}
expires $expires_time; 
```

# mysql - DBIx::Class 只更新一行

> ID：11942679
> 
> 赞同：1
> 
> 时间：2012-08-13T21:35:22.633
> 
> 标签：mysql, catalyst, dbix-class

我正在使用[DBIx::Class](https://metacpan.org/module/DBIx::Class)，我只想更新表中的一行。目前我是这样做的：

```
my $session = my_app->model("DB::Session")->find(1);    
$session->update({done_yn=>'y',end_time=>\'NOW()'}); 
```

它可以工作，但问题是当它确实找到找到行时，它会执行整个查询：

```
SELECT me.id, me.project_id, me.user_id, me.start_time, me.end_time, me.notes, me.done_yn FROM sessions me WHERE ( me.id = ? ): '8' 
```

当我只想更新一行时，这似乎有点多。无论如何都可以更新一行而不必先将整行从数据库中拉出？我正在寻找这样的东西：

```
my_app->model("DB::Session")->update({done_yn=>'y',end_time=>\'NOW()'},{id=>$id}); 
```

`$id`查询的`WHERE id=?`部分在哪里。有谁知道如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T23:11:00.437

您可以在仅匹配此单行的受限结果集上运行更新：

`my_app->model("DB::Session")->search_rs({ id=> 1 })->update({done_yn=>'y',end_time=>\'NOW()'});`

我建议您使用 DateTime->now 对象而不是文字 SQL 来更新 end_time 列，因为它使用应用程序服务器日期和时间而不是数据库服务器，并使您的架构与不同的 RDBMS 更兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T07:45:45.647

您是否检查是否找到了该行以防止出现错误，以防万一？

您可能想改用[update_or_create](https://metacpan.org/module/DBIx%3a%3aClass%3a%3aResultSet#update_or_create)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T04:01:46.063

您可以使用“列”属性：

```
my $session = my_app->model("DB::Session")->find(1, {columns => "id"}); 
```

# java - 使用 MessageListener 接口获取 JMS 请求的响应时间

> ID：11942682
> 
> 赞同：1
> 
> 时间：2012-08-13T21:35:42.640
> 
> 标签：java, jms, response

我正在使用以下代码块将 JMS 消息发布到队列，并在响应队列中获取响应消息。（以下代码运行 100 条消息，每线程 20 条，同时运行 5 个线程）

```
 for(int i=0;i<=20;i++)
            {
                msg=myMessages.get(i); // myMessages is an array of TextMessages 
                qsender = qsession.createSender((Queue)msg.getJMSDestination());
                qreceiver=qsession.createReceiver((Queue)msg.getJMSDestination());

                tempq = qsession.createTemporaryQueue();
                responseConsumer = qsession.createConsumer(tempq);
                msg.setJMSReplyTo(tempq);
                responseConsumer.setMessageListener(new Listener());

                msg.setJMSCorrelationID(msg.getJMSCorrelationID()+i);
                qsender.send(msg);   
            } 
```

监听器实现：

```
public class Listener 
implements MessageListener
{
    public void onMessage(Message msg)
    {
        TextMessage tm = (TextMessage) msg;
        // to calculate the response time

    }
} 
```

要求是获取每条消息的响应时间并将其存储。我该怎么做？考虑在消息的属性中设置时间/日期，然后使用 Correlation id 计算 Listener 中的时间。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T02:22:10.027

您可以`Map<String, Long>`将 CorrelationID 映射到发送的时间，然后从侦听器中查找它们。发送响应的进程必须将正确的 CorrelationID 放在响应消息上才能正常工作。

对于此示例，假设`timemap`是 a`Map<String, Long>`并且它在发送者和响应侦听器的范围内（您希望如何完成这取决于您）。

上面的循环体，已修改：

```
 msg=myMessages.get(i); // myMessages is an array of TextMessages 
            qsender = qsession.createSender((Queue)msg.getJMSDestination());
            qreceiver=qsession.createReceiver((Queue)msg.getJMSDestination());

            tempq = qsession.createTemporaryQueue();
            responseConsumer = qsession.createConsumer(tempq);
            msg.setJMSReplyTo(tempq);
            responseConsumer.setMessageListener(new Listener());

            msg.setJMSCorrelationID(msg.getJMSCorrelationID()+i);
            /* MODIFICATIONS */  
            synchronzied(timemap){
               timemap.put(msg.getJMSCorrelationID(), System.currentTimeMillis());
            } /* END MODIFICATIONS */
            qsender.send(msg); 
```

您的听众，已修改：

```
public void onMessage(Message msg)
{
    TextMessage tm = (TextMessage) msg;
    long now = System.currentTimeMillis();
    long responseTime = 0;
    synchronized(timemap){
         Long sent = timemap.get(msg.getJMSCorrelationID());
         if(sent != null){
             /* Store this value, this is the response time in milliseconds */
             responseTime = now - sent; 
         }else{
             /* Error condition. */
         }
    }

} 
```

# python - 使用 Python 从多个文本文件中提取列

> ID：11942683
> 
> 赞同：4
> 
> 时间：2012-08-13T21:35:42.670
> 
> 标签：python, text, csv, extract

我有一个包含 5 个文本文件的文件夹，这些文件与各个站点有关——

标题格式如下：

```
Rockspring_18_SW.417712.WRFc36.ET.2000-2050.txt

Rockspring_18_SW.417712.WRFc36.RAIN.2000-2050.txt

WICA.399347.WRFc36.ET.2000-2050.txt

WICA.399347.WRFc36.RAIN.2000-2050.txt 
```

所以，基本上文件名遵循以下格式-（站点名称）。（站点编号）。（WRFc36）。（一些变量）。（2000-2050.txt

这些文本文件中的每一个都具有与其相似的格式，没有标题行：年月日值（每个文本文件中包含约 18500 行）

我希望 Python 搜索相似的文件名（站点名称和站点编号匹配），并从其中一个文件中挑选出第一到第三列数据并将其粘贴到新的 txt 文件中。我还想复制并粘贴站点（雨等）的每个变量的第 4 列，并将它们以特定顺序粘贴到新文件中。

我知道如何使用 csv 模块（并为空格分隔符定义新方言）从所有文件中获取数据并打印到新的文本文件，但我不确定如何为每个站点自动创建新文件名称/编号并确保我的变量以正确的顺序绘制 -

我要使用的输出是每个站点的一个文本文件（不是 5 个），格式如下（年、月、日、变量 1、变量 2、变量 3、变量 4、变量 5）约 18500 行...

我确定我在这里查看的是非常简单的东西……这似乎很简陋……但是 - 任何帮助将不胜感激！

# 更新

========

我已经更新了代码以反映下面的评论。
[http://codepad.org/3mQEM75e](http://codepad.org/3mQEM75e)

从集合导入 defaultdict 导入 glob 导入 csv

```
#Create dictionary of lists--   [A] = [Afilename1, Afilename2, Afilename3...]
#                               [B] = [Bfilename1, Bfilename2, Bfilename3...] 
def get_site_files():
    sites = defaultdict(list)
    #to start, I have a bunch of files in this format ---
    #"site name(unique)"."site num(unique)"."WRFc36"."Variable(5 for each site name)"."2000-2050"
    for fname in glob.glob("*.txt"):
        #split name at every instance of "."
        parts = fname.split(".")
        #check to make sure i only use the proper files-- having 6 parts to name and having WRFc36 as 3rd part
        if len(parts)==6 and parts[2]=='WRFc36':
            #Make sure site name is the full unique identifier, the first and second "parts"
            sites[parts[0]+"."+parts[1]].append(fname)
    return sites

#hardcode the variables for method 2, below
Var=["TAVE","RAIN","SMOIS_INST","ET","SFROFF"]

def main():
    for site_name, files in get_site_files().iteritems():
        print "Working on *****"+site_name+"*****"
####Method 1- I'd like to not hardcode in my variables (as in method 2), so I can use this script in other applications.
        for filename in files:
            reader = csv.reader(open(filename, "rb"))
            WriteFile = csv.writer(open("XX_"+site_name+"_combined.txt","wb"))
            for row in reader:
                row = reader.next()
####Method 2 works (mostly), but skips a LOT of random lines of first file, and doesn't utilize the functionality built into my dictionary of lists...            
##        reader0 = csv.reader(open(site_name+".WRFc36."+Var[0]+".2000-2050.txt", "rb"))    #I'd like to copy ALL columns from the first file
##        reader1 = csv.reader(open(site_name+".WRFc36."+Var[1]+".2000-2050.txt", "rb"))    #    and just the fourth column from all the rest of the files
##        reader2 = csv.reader(open(site_name+".WRFc36."+Var[2]+".2000-2050.txt", "rb"))    #    (the columns 1-3 are the same for all files)
##        reader3 = csv.reader(open(site_name+".WRFc36."+Var[3]+".2000-2050.txt", "rb"))
##        reader4 = csv.reader(open(site_name+".WRFc36."+Var[4]+".2000-2050.txt", "rb"))
##        WriteFile = csv.writer(open("XX_"+site_name+"_COMBINED.txt", "wb"))               #creates new command to write a text file
##
##        for row in reader0:
##            row  = reader0.next()
##            row1 = reader1.next()
##            row2 = reader2.next()
##            row3 = reader3.next()
##            row4 = reader4.next()
##            WriteFile.writerow(row + row1 + row2 + row3 + row4)
##        print "***finished with site***"

if __name__=="__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T23:57:00.683

这是一种更简单的遍历文件的方法，按站点分组。

```
from collections import defaultdict
import glob

def get_site_files():
    sites = defaultdict(list)
    for fname in glob.glob('*.txt'):
        parts = fname.split('.')
        if len(parts)==6 and parts[2]=='WRFc36':
            sites[parts[0]].append(fname)
    return sites

def main():
    for site,files in get_site_files().iteritems():
        # you need to better explain what you are trying to do here!
        print site, files

if __name__=="__main__":
    main() 
```

我仍然不明白您的剪切和粘贴列-您需要更清楚地解释您要完成的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T21:41:06.677

就获取文件名而言，我将使用以下内容：

```
import os

# Gets a list of all file names that end in .txt
# ON *nix
file_names = os.popen('ls *.txt').read().split('\n')

# ON Windows
file_names = os.popen('dir /b *.txt').read().split('\n') 
```

然后要获取通常由句点分隔的元素，请使用：

```
# For some file_name in file_names
file_name.split('.') 
```

然后您可以进行比较并提取所需的列（通过使用 open(file_name, 'r') 或您的 CSV 解析器）

迈克尔·G。

# html - WebSockets 和它的异步/同步部分

> ID：11942694
> 
> 赞同：2
> 
> 时间：2012-08-13T21:36:58.977
> 
> 标签：html, websocket

WebSockets 究竟是如何工作的？实施它们似乎很奇怪。

*首先，您使用*地址构造对象，然后定义回调，例如`onopen`打开连接时调用的回调。现在，如果我在构建 websocket 时告诉它进行连接，会发生什么？如果构造函数以异步方式连接，是否保证`onopen`会调用 my 。

把它们加起来：

1）当我声明所有回调时，websocket何时决定连接？

2）`send()`方法是异步的吗？如果是这样，有没有办法称之为同步？

**编辑：**我发现`send()`是异步的，有一个`bufferedAmount`属性返回缓冲要发送的数据量。但是，第二个问题的第二部分仍然有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T21:59:01.220

我找到了一个很好的方法来解释事件循环的这一部分是如何工作的：

> 在事件循环中，除了您的代码之外，一切都是异步运行的。

连续语句将始终在下一次事件循环迭代发生之前执行。这意味着您可以安全地将事件侦听器分配给`ws`对象，因为您知道在当前迭代完成之前它无法调用它们。

至于发送，正如您正确注意到的那样，这些值通常是缓冲的。但是，在触发事件之前发送任何消息可能不是一个好主意`onopen`，因为您正在缓冲尚未打开的连接上的消息。

我希望这回答了你的问题。

# openxml - 打开 Xml：Word 创建一个新文档并从另一个文档添加一个段落

> ID：11942696
> 
> 赞同：2
> 
> 时间：2012-08-13T21:37:07.900
> 
> 标签：openxml, openxml-sdk

我有一个文档，我正在通过获取段落进行迭代。对于这些段落中的每一个，我都需要创建一个新文档并保存它。我不知道如何将源文档中的段落添加到新文档中。

```
 foreach (var p in paragraphsFromSourceDocument)
        {
            using (var memoryStream = new MemoryStream())
            {
                var doc = WordprocessingDocument.Create(memoryStream, WordprocessingDocumentType.Document);
                doc.AddMainDocumentPart();

                // Create the Document DOM. 
                doc.MainDocumentPart.Document = new Document();
                doc.MainDocumentPart.Document.Body = new Body();

                //Add the paragraph 'p' to the Body here:
                // HOW ?????????

                doc.MainDocumentPart.Document.Save();
            }
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T01:12:05.297

```
 // Open the file read-only since we don't need to change it.
        using (var wordprocessingDocument =  WordprocessingDocument.Open(documentFileName, true))
        {
            paragraphs = wordprocessingDocument.MainDocumentPart.Document.Body
                .OfType<Paragraph>().ToList();
            styles = wordprocessingDocument.MainDocumentPart.StyleDefinitionsPart;

            foreach (var p in paragraphs)
            {
                using (var memoryStream = new MemoryStream())
                {
                    var doc = WordprocessingDocument.Create(memoryStream, WordprocessingDocumentType.Document);
                    doc.AddMainDocumentPart().AddPart(styles);
                    doc.MainDocumentPart.Document = new Document();
                    doc.MainDocumentPart.Document.Body = new Body();
                    doc.MainDocumentPart.Document.Body.Append(p.CloneNode(true));
                    doc.MainDocumentPart.Document.Save();
                    Console.WriteLine(GetHTMLOfDoc(doc));

                }
            }
        } 
```

# jquery - jQuery slideToggle（）不起作用

> ID：11942699
> 
> 赞同：0
> 
> 时间：2012-08-13T21:37:37.150
> 
> 标签：jquery, asp.net-mvc-3, razor

我有从视图动态生成的下表。我需要添加点击事件`class=heading`来显示或隐藏`class=content`。

```
<table>
<thead>
    <tr>
        <th class="thead">Function</th>
        <th  class="thead"">Type</th>
        @foreach (var item in Model.PackageNames)
        {
            <th class="thead">
                @item
            </th>
        }
    </tr>
</thead>
<tbody>
    @foreach (var item in Model.PrivilegeGroups)
    {
        <tr>
            <td colspan="50">
                <div class="heading">
                    @item.Name
                </div>
            </td>
        </tr>
        <text>
            <p class="content">
                @foreach (var privilege in item.Privileges.Values)
                {
                    <tr>
                        <td>
                            @privilege.Name
                        </td>
                        <td>
                            @privilege.Type.ToString()
                        </td>
                        @foreach (var package in privilege.Packages)
                        {
                           <td>
                                @package.AccessLevel.ToString()
                           </td>
                        }
                    </tr>
                }
            </p>
        </text>
    }
</tbody>
</table> 
```

这是我正在使用的 jQuery，但它不起作用。

```
<script type="text/javascript">
    $(document).ready(function () {
        $(".heading").click(function () {
            $(this).next(".content").slideToggle(500);
        });
    });   // -- End Ready
</script> 
```

但是，`$('.content').slideToggle();`确实有效并使用 切换所有元素`class=content`。我只想隐藏下一个元素。我如何使它工作？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:19:55.520

首先，由于在`<tbody>`only`<th>`中，`<tr>`并且`<td>`被允许，我认为你`<tbody>`应该看起来像这样：

```
<tbody>
    @foreach (var item in Model.PrivilegeGroups)
    {
        <tr>
            <td colspan="50" class="heading">
                @item.Name
            </td>
        </tr>
        <tr class="content">          
            @foreach (var privilege in item.Privileges.Values)
            {
                <td>
                    @privilege.Name
                </td>
                <td>
                    @privilege.Type.ToString()
                </td>
                @foreach (var package in privilege.Packages)
                {
                    <td>
                        @package.AccessLevel.ToString()
                    </td>
                }
            }
         </tr>
    }
</tbody> 
```

我对 javascript 不是很好，但是我认为你可以尝试用`$(this).next(".content").slideToggle(500);`or`$(this).closest(".content").slideToggle(500);`替换`$(this).next("p").slideToggle(500);`

如果这些不起作用，您可以尝试使用 unique`id`而不是`class`这样的：

```
<tbody>
    @{ int i = 0; }
    @foreach (var item in Model.PrivilegeGroups)
    {
        <tr>
            <td colspan="50" class="heading">
                @item.Name
            </td>
        </tr>
        <tr id="content@i">          
            @foreach (var privilege in item.Privileges.Values)
            {
                <td>
                    @privilege.Name
                </td>
                <td>
                    @privilege.Type.ToString()
                </td>
                @foreach (var package in privilege.Packages)
                {
                    <td>
                        @package.AccessLevel.ToString()
                    </td>
                }
            }
         </tr>
    @{ i++ } 
    }
</tbody> 
```

然后相应地更新您的javascript。

就像我说的，我不擅长 javascript/jquery，希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T22:39:36.740

您确定您的 jquery 代码是在页面上加载/呈现数据“之后”运行的吗？

您可以尝试“直播”而不是“点击”吗？所以这会将您的 jquery 代码更改为

```
<script type="text/javascript">
    $(document).ready(function () {
        $(".heading").live('click', function () {
            $(this).next(".content").slideToggle(500);
        });
    });   // -- End Ready
</script> 
```

一种检查方法是在页面加载后在 firebug 中运行 jquery 代码（如果在 FF 中），看看什么对您有用，然后相应地更新脚本标签中的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T19:33:01.540

非常感谢@Garrett Fogerlie 和@saganbyte，我终于通过从`class=heading`内部迁移`<td>`到现在解决了它！`<tr>``$(this).next(".content").slideToggle(500);`

```
@foreach (var item in Model.PrivilegeGroups ) {
        <tr class="heading">
            <td colspan="50">
                    @item.Name
            </td>
        </tr>
        <p class="content">
            @foreach (var privilege in item.Privileges.Values)
            {
                <tr>
                    <td class="thead">
                        @privilege.Name
---Rest of the code here 
```

# visual-studio-2010 - 关于下拉菜单和数据集的 ssrs 问题

> ID：11942703
> 
> 赞同：0
> 
> 时间：2012-08-13T21:37:51.997
> 
> 标签：visual-studio-2010, reporting-services

我通过 VS 2010 使用 SSRS 并且有以下问题：

1.  我可以在不定义数据集的情况下定义下拉菜单吗？

2.  我定义了一个数据集，是否可以向该数据集添加“手动”值？这样做的背景要求是报表查询是基于这个数据集的。但是，我希望在数据集中有一个选项，其中显示“全部”，以便允许用户查看所有内容，而不是根据数据集缩小结果范围。

谢谢，布鲁斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:19:20.460

我是 SQL Server 报告的新手，并找到了我的答案：

对于第一个，可以简单地创建一个表并在创建的表上使用具有自定义值的数据集。

第二个也是如此，手动数据可以添加到表本身。

# java - 使用 RegEx 验证数字输入

> ID：11942708
> 
> 赞同：0
> 
> 时间：2012-08-13T21:38:08.233
> 
> 标签：java, regex

我正在尝试在 Java 中创建一个正则表达式来验证具有以下约束的数字：

1.  数字可以是任意长度，但只能包含数字
2.  第一个数字可以是 0 - 9
3.  后续数字可以是 0 - 9，但其中一位数字必须为非零。

例如：`042004359`有效，但`0000000000`无效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T21:46:43.857

`\\d+[1-9]\\d*`应该工作，我想。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T22:22:28.653

This should do what you need:

```
/^(?=.*[1-9])([0-9]+)$/ 
```

Whilst it matches all of digits **[0-9]** it contains a [lookahead](http://www.regular-expressions.info/lookaround.html) that makes sure there is at least one of **[1-9]**.

I am fairly certain that Java allows can use lookaheads.

**EDIT**: This [regular expression test page](http://www.regexplanet.com/advanced/java/index.html) seems to imply that it can.

**EDIT**: If *0* is valid, then you can use this:

```
^((?=.*[1-9])([0-9]+)|0)$ 
```

This will make an exception for **0** on its own (notice the OR operator).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T22:17:55.550

```
^(\d{1})(\d*?[1-9]{1}\d*)*$ 
```

^(\d{1}) - 行必须以 1 位数字开头
(\d*?[1-9]{1}\d*)*$ - 行必须以零个或多个 0-9 位数字结尾(? 保守)，然后是 1 个 1-9 位，然后是零个或多个数字。这种模式可以重复零次或多次。

适用于：

100000
100100
1010200
1
2

也许这太复杂了，大声笑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T22:33:52.480

这是使用环视的一种解决方案：`(?<=\D|^)\d+(?=[1-9])\d*`

```
(?<=\D|^)   # lookbehind for non-digit or beginning of line
\d+         # match any number of digits 0-9
(?=[1-9])   # but lookahead to make sure there is 1-9
\d*         # then match all subsequent digits, once the lookahead is satisfied 
```

# c# - 为什么我的实体框架没有删除我的记录？

> ID：11942709
> 
> 赞同：0
> 
> 时间：2012-08-13T21:38:12.440
> 
> 标签：c#, data-binding, entity-framework-4, entity-framework-4.1

实体框架的新手，但我认为这应该很简单。

我的表单加载从我的实体创建了一个上下文。我创建了一个客户端列表，并有一个绑定源，我将客户端分配给它。绑定源被分配给一个绑定导航器——clientBindingNavigator。

```
private void ClientExtForm_Load (object sender, EventArgs e)
        {

        _context = new IDVisitorEntities ();

        List<IDVM.Client> clients = _context.Clients.ToList ();

        clientBindingSource.DataSource = clients;

        } 
```

摘自 ClientExtForm.Designer.cs

```
 //
        // clientBindingNavigator
        // 
        this.clientBindingNavigator.AddNewItem = this.bindingNavigatorAddNewItem;
        this.clientBindingNavigator.BindingSource = this.clientBindingSource;
        this.clientBindingNavigator.CountItem = this.bindingNavigatorCountItem;
        this.clientBindingNavigator.DeleteItem = this.bindingNavigatorDeleteItem;
        this.clientBindingNavigator.Items.AddRange(new System.Windows.Forms.ToolStripItem[] {
        this.bindingNavigatorMoveFirstItem,
        this.bindingNavigatorMovePreviousItem,
        this.bindingNavigatorSeparator,
        this.bindingNavigatorPositionItem,
        this.bindingNavigatorCountItem,
        this.bindingNavigatorSeparator1,
        this.bindingNavigatorMoveNextItem,
        this.bindingNavigatorMoveLastItem,
        this.bindingNavigatorSeparator2,
        this.bindingNavigatorAddNewItem,
        this.bindingNavigatorDeleteItem,
        this.clientBindingNavigatorSaveItem}); 
```

当我单击导航器工具栏上的 Delete Button 时， ClientBindingSource.Count 已减少 1 。

```
private void clientBindingNavigatorSaveItem_Click (object sender, EventArgs e)
        {
        this.OnSave ();
        }

public override void OnSave ()
        {

        foreach (ObjectStateEntry entry in _context.ObjectStateManager.GetObjectStateEntries (EntityState.Deleted))
            {
           // nothing shows up in this
            }            
        foreach (ObjectStateEntry entry in _context.ObjectStateManager.GetObjectStateEntries (EntityState.Modified))
            {
            // when modified 
            }

        foreach (ObjectStateEntry entry in _context.ObjectStateManager.GetObjectStateEntries (EntityState.Added))
            {
            // when adding this finds it                    
            }

        clientBindingSource.EndEdit ();

        visitorHostsBindingSource.EndEdit ();

        _context.SaveChanges ();

        base.OnSave (); 
        } 
```

看起来好像导航器正在从集合中删除该项目。

**添加信息：** 在导航器中，DeleteItem 按钮似乎对应于 RemoveCurrent 方法（点击事件调用它）。在 RemoveCurrent 做这件事之前不知道如何配合。

执行删除的选项有哪些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T21:49:31.993

从 clientBindingSource 中删除项目将不会影响数据库级别的项目。您必须显式调用`_context.Clients.DeleteObject(deletedClient);`您必须通过 ObjectContext 执行所有 CRUD 操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:55:08.713

环顾四周后发现一些博客建议不要使用默认的 DeleteItem。

this.clientBindingNavigator.DeleteItem = null;//= this.bindingNavigatorDeleteItem;

在我的例子中，为了明确 BindingNavigator，我在 Items 列表中用新按钮**this.toolStripButton1替换了 this.bindingNavigatorDeleteItem。**

```
this.clientBindingNavigator.Items.AddRange(new System.Windows.Forms.ToolStripItem[] {
        this.bindingNavigatorMoveFirstItem,
        this.bindingNavigatorMovePreviousItem,
        this.bindingNavigatorSeparator,
        this.bindingNavigatorPositionItem,
        this.bindingNavigatorCountItem,
        this.bindingNavigatorSeparator1,
        this.bindingNavigatorMoveNextItem,
        this.bindingNavigatorMoveLastItem,
        this.bindingNavigatorSeparator2,
        this.bindingNavigatorAddNewItem,
        this.toolStripButton1,
        this.clientBindingNavigatorSaveItem}); 
```

新按钮的创建如下所示：

```
 // 
        // toolStripButton1
        // 
        this.toolStripButton1.Image = ((System.Drawing.Image) (resources.GetObject ("bindingNavigatorDeleteItem.Image")));
        this.toolStripButton1.RightToLeftAutoMirrorImage = true;
        this.toolStripButton1.Name = "toolStripDeleteItem";
        this.toolStripButton1.Size = new System.Drawing.Size(23, 22);
        this.toolStripButton1.Text = "Delete";
        this.toolStripButton1.Click += new System.EventHandler(this.toolStripButton1_Click); 
```

Click 事件然后调用 RemoveCurrent （就像默认值一样），但我可以获取当前实体并将其存储在一个数组列表中以供保存时使用。

```
private void toolStripButton1_Click (object sender, EventArgs e)
        {
        var currentclient = (Client) clientBindingSource.Current;
        clientstodelete.Add (currentclient);
        clientBindingSource.RemoveCurrent ();
        } 
```

我不需要创建新按钮，我只需要将 this.clientBindingNavigator.DeleteItem 不绑定到按钮。因为 DeleteItem 在调用 BindingSource.RemoveCurrent() 的后台创建了一个单击事件。我可能会将按钮更改回创建的默认按钮，但为了说明，希望每个人都能看到发生了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-08T14:26:44.500

我同意如果我刚刚使用 RemoveCurrent() 删除了记录，那么必须直接从表中删除记录似乎很奇怪。但这就是它的本质……这在一次大扫除中处理了 datagridview 和数据源中的记录。

这是我解决问题的方法：

```
 t_StaffDaysOff sdo = (t_StaffDaysOff)t_StaffDaysOffbindingSource.Current;
        t_StaffDaysOffbindingSource.RemoveCurrent();
        t_StaffDaysOffbindingSource.EndEdit();
        db.t_StaffDaysOff.Remove(sdo);
        db.SaveChanges(); 
```

# javascript - Onmouseover OnMouseout javascript

> ID：11942710
> 
> 赞同：-1
> 
> 时间：2012-08-13T21:38:21.827
> 
> 标签：javascript, html, css

我编写了一个脚本，它在将鼠标悬停在图像上时更改图像的来源，起初它可以工作，但在添加使用相同代码的第二个图像后，两者都停止工作。

我遇到的问题是图像不会在鼠标悬停时发生应有的变化。看起来好像没有找到图像——但我确信图像的来源指向正确的路径。

我也征求了其他意见，但我看不出我做错了什么。我非常感谢您的帮助或对此的任何意见。

下面是我正在使用的代码。

```
<html>
  <head>
    <script type="text/javascript">
      var images= new Array();
      images[0] = "Benjamin/Untitled-3.png";
      images[1] = "Benjamin/Untitled-4.png";
      images[2] = "Benjamin/Update.png";
      images[3] = "Benjamin/Update2.png";

      function Change()
      {
        document.getElementById("image").src = images[1];
      }

      function GoBack()
      {
        document.getElementById("image").src = images[0];
      }

      function GobackAgain()
      { 
        document.GetElementById("Update").src = images[2];
      }

      function ChangeAgain()
      {
        document.getElementById("Update").src = images[3];
      }
    </script>

    <style type="text/css">
      body
      {
        background-color:#1c1a1a;
      }
    </style>

    <div align="center">
      <img src="Untitled-2.png" width="325" height="191">
    </div>

  </head>

  <body>
    <img onmouseover="Change()" 
         onmouseout="GoBack()" 
         id="image" 
         STYLE="position:absolute; TOP:35%; LEFT:10%; WIDTH:204px; HEIGHT:278px" 
         src="Untitled-3.png">

    <img onmouseover="ChangeAgain()" 
         onmouseout="GoBackAgain()" 
         id="Update" 
         STYLE="position:absolute; TOP:35%; LEFT:50%; WIDTH:204px; HEIGHT:278px" 
         src="Update.png">
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T21:45:53.773

重命名并替换`GobackAgain`为.`GoBackAgain``GetElementById``getElementById`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:42:07.380

这里有一个问题：

```
function GobackAgain()
{ 
    document.GetElementById("Update").src = images[2];
} 
```

你有`GetElementById`什么时候应该`getElementById`

# javascript - 为什么我的 viewModel 不工作

> ID：11942711
> 
> 赞同：0
> 
> 时间：2012-08-13T21:38:33.377
> 
> 标签：javascript, asp.net, html, knockout.js

我在这 3 天里苦苦挣扎，无法理解为什么第一个 viewModel 正在工作，但第二个却没有，它甚至不允许我使用 console.log() 任何东西。

我的视图模型和 ko 绑定：

```
// KO View Models
var indexViewModel = {
    item: ko.observableArray([]),
    cat: ko.observableArray([]),
    loadcontent: function () {
        alert("inside index function");
        $.ajax({
            url: '/api/item/all',
            dataType: 'json',
            success: function (data) {
                var getArray = [];
                $.each(data, function (index, item) {
                    getArray[index] = item;
                });
                indexViewModel.item(getArray);
            }
        });
        $.ajax({
            url: '/api/category/all',
            dataType: 'json',
            success: function (data) {
                var getArray = [];
                $.each(data, function (index, item) {
                    getArray[index] = item;
                });
                indexViewModel.cat(getArray);
            }
        });
    }
};
var dataReal = null;
var itemViewModel = {
    item: ko.observableArray([]),
    loadcontent: function (getID) {
        alert(getID);
        $.ajax({
            url: '/api/item/details/' + getID,
            dataType: 'json',
            success: function (data) {
                var getArray = [];
                $.each(data, function (index, item) {
                    getArray[index] = item;
                });
                itemViewModel.item(getArray);
                dataReal = data;
            },
            error: function (xhr, status) {
                switch (status) {
                    case 404:
                        alert('File not found');
                        break;
                    case 500:
                        alert('Server error');
                        break;
                    case 0:
                        alert('Request aborted');
                        break;
                    default:
                        alert('Unknown error ' + status);
                }
            }
        });
    }
};

var mainViewModel = {
    indexPage: indexViewModel,
    itemPage: itemViewModel
};

ko.applyBindings(mainViewModel); 
```

我的工作 HTML：

```
<div id="index-content" data-bind="init: mainViewModel.indexPage.loadcontent(), with: mainViewModel.indexPage">
    <div class="item-list" data-bind="foreach: item">
        <div class="item-container clearfix">
            <div class="item-content clearfix">
                <div class="title" data-bind="text: Title">
                </div>
                <div class="left-side clearfix">
                    <div class="item-image" data-bind="style: { backgroundImage: 'url(content/u/'+Image+')' }">
                    </div>
                    <div class="item-descr">
                        <div class="body" data-bind="text: Body">
                        </div>
                        <div class="item-more-details">
                            Vairāk...
                        </div>
                    </div>
                </div> 
```

HTML 女巫甚至忽略了我的 console.log() 调用：

```
@{
    ViewBag.Title = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
    int id = ViewBag.id;
}

<div id="item-details-content">
    <input type="hidden" id="item-id" value="@id" data-bind=""/>
    <div class="item-list" data-bind="init: itemPage.loadcontent(@id), with: itemPage.item">
        <div class="item-container clearfix" data-bind="init: console.log($root)">
            <div class="item-content clearfix">
                <div class="title" data-bind="text: Title">
                </div>
                <div class="left-side clearfix">
                    <div class="item-image" data-bind="style: { backgroundImage: 'url(content/u/'+Image+')' }">
                    </div>
                    <div class="item-descr">
                        <div class="body" data-bind="text: Body">
                        </div>
                        <div class="item-more-details">
                            Vairāk...
                        </div>
                    </div>
                </div> 
```

## 问题

1.  我究竟做错了什么？
2.  语法错误在哪里？
3.  我怎样才能让 console.log() 在那里工作？
4.  也许我的问题有替代方案，也许我误解了 KO.js 的概念？

## 结论

1.  我知道里面有数据，`mainViewModel.itemPage.loadcontent($.ajax(data))`因为 alert() 显示了它，但它没有将值传递给`item`！
2.  我是一个新手，完全是新手，如果我现在认为我是一个体面的程序员，我认为我完全是个笨蛋，我开始讨厌 KO.js，但我非常需要它！
3.  **注意：**您可以在调试部分看到索引页面工作正常。

## 调试地点

* * *

这是已发布的[Web 应用程序](http://dacesimane.lv:8080)

* * *

这是[单品页面](http://dacesimane.lv:8080/item/details/36)

## 谢谢你

**感谢大家帮助我，我很沮丧，以至于我什至没有看到任何明显的东西，再次感谢！干杯!**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:54:43.137

1) 乍一看，我注意到您的 HTML 绑定指的是 mainViewModel。例如：

```
data-bind="init: mainViewModel.itemPage.loadcontent(@id), with: mainViewModel.itemPage.item 
```

应该是

```
data-bind="init: itemPage.loadcontent(@id), with: itemPage.item 
```

您已经绑定到 mainViewModel

2）对于调试，使用它来查看您在视图中绑定的内容。

```
<pre data-bind="text:ko.toJSON(yourViewModelGoesHere, null, 2)"></pre> 
```

3) 返回的数据不是数组，尽管您将其视为数组。

```
$.ajax({
    url: '/api/item/details/' + getID,
    dataType: 'json',
    success: function (data) {
        var getArray = [];
        $.each(data, function (index, item) {
            getArray[index] = item;
        });
        itemViewModel.item(getArray);
        dataReal = data;
    }, 
```

[如果您在http://jsfiddle.net](http://jsfiddle.net)创建示例，我们可以为您提供更多帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T22:00:20.847

1.  在`data-bind`元素中，您指的是相对于您在`applyBindings()`函数中指定的对象的模型。在您的情况下，您调用`applyBindings(mainViewModel)`了 ，因此在绑定本身中，您引用了它的属性，而不是`mainViewModel`它本身。

2.  在您的非工作 HTML 中，`<div class="item-container clearfix" data-bind="console.log($root)">`似乎很可疑。这是什么绑定？它没有指定要绑定的任何特定属性。

3.  使用浏览器的开发者工具（Firefox 中的 Firebug，Chrome/IE 中的开发者工具...）查看语法错误。如果绑定有问题，您会在那里看到它们。

# javascript - jquery if 语句问题

> ID：11942720
> 
> 赞同：0
> 
> 时间：2012-08-13T21:39:36.477
> 
> 标签：javascript, jquery

我正在尝试检查文件名变量是否为空。我用

```
$.each(rows, function(rowIndex, row){

        var fileName = $.trim(fields[0]).toLowerCase();

                //will output fileName 
        console.log(fileName );             

        //out -1,5,3,15,15,5,5,6,7,-1,3,5,5
                console.log(fileName.indexOf('.html'));     

        if(fileName.indexOf('.html') < 0 || window.location.href.toLowerCase().indexOf(fileName) < 0) //invalid or different file, skip this row
        {
            //if the filename is empty skip this loop and check next loop filename variable

            return true;
        }

        //the above script is to check to see if the filename is empty.         

                var $element = $('#' + fileName );

                //doesn't show anything at all.
                console.log(fileName );    

}) 
```

我的“if”语句之前的所有内容都会显示，但不会在它之后显示。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T21:45:17.440

您的 if 语句中包含“return true”。这将返回/完成您的主要功能。

改变：

如果添加之前：

```
var is_valid = false; 
```

如果：

```
is_valid = true; 
```

这样它就不会过早退出。'var' 是为了让这个变量在你的函数范围内是局部的，它不会泄漏内存。

# asp.net - Asp.net 身份验证检查

> ID：11942721
> 
> 赞同：1
> 
> 时间：2012-08-13T21:39:40.343
> 
> 标签：asp.net, security

我有一个 asp.net 网络表单项目。在需要保护的所有区域的整个应用程序中添加业务逻辑身份验证检查的标准方法是什么？

例如，页面 X 只能由标记为“管理员”的人查看。

一个更复杂的例子：只有属于管理用户 A、B 和 C 的一组人的用户才能修改用户 A、B 或 C 的个人资料信息。

我可以继续大约需要数百个位置和类型的身份验证检查，但基本上我知道的唯一方法是在每个按钮单击处理程序、page_load、GridView rowChange、等将首先检查一些业务逻辑，然后允许它或返回。

更一般地说，是否有必要对基本上每个回发进行这些业务逻辑身份验证检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:50:01.103

如果检查是基于角色的并且是粗略的，例如“管理员”角色可以执行此页面上的所有代码，但没有其他人可以 - 然后使用缓存在您的 FormsAuthentication cookie 中的角色和 PrinciplePermission 属性，例如[http://msdn.microsoft .com/en-us/library/ms731200.aspx](http://msdn.microsoft.com/en-us/library/ms731200.aspx) 您也可以将这些属性放在方法上。但是，它们不允许进行复杂的授权检查，并且在不重新编译代码的情况下不容易更改。

如果检查只是部分基于角色和细粒度的，例如秘书可以点击这个，管理员可以查看这个，Joe 可以在周末查看这个等等。那么你需要在你的代码中进行授权检查。除非您可以将结果缓存在安全的地方，否则您必须重新执行授权检查。如果 ViewState 已加密，您可以将结果缓存在 ViewState 中。

如果您在回发时不检查授权，那么您很容易受到自定义制作的帖子的攻击，这些帖子会在禁用按钮、不可见按钮等上调用事件。通过加密视图状态并保持事件验证，您也可以减轻这种事情的影响。

将您的代码分解为实用程序类和基类，以尽量减少重复。

# php - 如何通过指定 .php 文件名在重写规则中传递参数？

> ID：11942724
> 
> 赞同：5
> 
> 时间：2012-08-13T21:39:53.573
> 
> 标签：php, .htaccess, rewrite, query-string

我有一个网站，它成功地将第一个斜杠后的内容传递给指定的 .php 文件。（优雅地：删除“.php”）

`site.com/azamat to site.com/azamat.php`

```
RewriteCond %{REQUEST_FILENAME} !-d    
RewriteCond %{REQUEST_FILENAME}\.php -f   
RewriteRule ^(.*)$ $1.php [NC] 
```

如何向这些规则添加其他参数，以便传递“页面”参数，例如：

`site.com/azamat/bagatov to site.com/azamat.php?page=bagatov`

或者

`site.com/thisisthefile/andparams to site.com/thisisthefile.php?page=andparams`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T21:47:00.927

尝试添加这些规则（保留您已有的规则）：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^/([^/]+)/.+$
RewriteCond %{DOCUMENT_ROOT}/%1.php -f
RewriteRule ^([^/]+)/(.+)$ /$1.php?page=$2 [L] 
```

`%1`除了使用反向引用来检查*URI 的第一部分*是否作为 php 文件存在之外，这或多或少类似于您所得到的。这是第一部分的比赛：

```
RewriteCond %{REQUEST_URI} ^/([^/]+)/.+$ 
```

这是查看`([^/]+)`分组是否作为 php 文件存在的方法：

```
RewriteCond %{DOCUMENT_ROOT}/%1.php -f 
```

其他一切都是为了匹配第一个之后的内容`/`并使其成为`page`查询字符串参数。

# google-chrome-extension - Chrome 扩展 - 在创建 Context.Menu 之前验证选定的文本

> ID：11942728
> 
> 赞同：0
> 
> 时间：2012-08-13T21:40:13.280
> 
> 标签：google-chrome-extension

我的 context.menu 工作正常。我只是不希望它在我选择 IP 地址以外的其他内容时显示。我有验证 IP 地址的代码，只是不知道如何实现。

我知道当您选择主机名和 IP 地址并添加“go 98.223.234.2xx”或“go cnn.com”时，chrome 会添加 context.menus。铬是如何做到这一点的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:35:14.630

您可以尝试的一件事是

1.  分别使用鼠标`mouseup`和`keypress`键盘选择的事件监听器。

2.  用于`window.getSelection()`获取选择，并将其与所需的 IP 地址进行比较。

3.  如果选择与 IP 地址匹配，您可以通过以下方式创建菜单

    ```
    chrome.contextMenus.create({
      "title" : "menuTitle",
      "contexts" : ["selection"]
    }); 
    ```

# ios - 漂亮的自定义 iOS UI

> ID：11942729
> 
> 赞同：-5
> 
> 时间：2012-08-13T21:40:15.667
> 
> 标签：ios, ipad, user-interface

有大量书籍、教程、示例解释了如何创建或多或少标准的 iPhone 或 iPad UI。但我找不到任何处理创建非常自定义和图形用户界面的资源。谁能给我一些参考/链接，以帮助我了解创建[http://webis.net/wp/wp-content/uploads/2012/06/Image.jpg](http://webis.net/wp/wp-content/uploads/2012/06/Image.jpg)之类的内容所涉及的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T21:44:10.123

[http://cocoacontrols.com](http://cocoacontrols.com)是一个很好的起点。

# jquery - jquery li onclick 添加类

> ID：11942731
> 
> 赞同：0
> 
> 时间：2012-08-13T21:40:23.437
> 
> 标签：jquery, css

我的母版页中有一个菜单。

```
 <ul>
    <li><a href="."><span>Home</span></a></li>
    <li><a href="contactus.aspx"><span>contact us</span></a></li>
 </ul> 
```

当我单击菜单项时，我想使用 jquery 设置 css 类

```
 $(function () {

            $("li:first-child").addClass("test");
            $('li').click(function () {
                $(this).addClass('test');

            });
        }); 
```

css

```
 .test {background-color:Red;} 
```

单击菜单时，它显示背景颜色，但随后消失。在单击不同的菜单之前，如何使其保持活动状态？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T21:46:34.460

UPDATE2：这不是javascript问题

```
<li><a href="#"><span <%=ServerSizeLogic.SelectedMenu("Home")%>>Home</span></a></li> 
```

根据您的服务器端技术，这是对服务器端如何处理它的令人讨厌的猜测。`ServerSizeLogic.SelectedMenu("Home")`或者您使用的任何内容都将返回一个空字符串或“class='test'”。只需确保只有一个 li 元素获得样式并删除客户端代码

```
// don't do it like this but hopefully you get the gist
ServerSizeLogic::SelectedMenu(string item){
    if (item == CurrentPage)
      return "class='test'";
    return "";
} 
```

更新：显然，一旦您离开页面，您要选择的元素将必须来自服务器（除非您使用 ajax），其中强制转换只是摆脱`li:first-child`并直接在您的视图代码中设置类当前`li`元素

原文：这个小小提琴怎么样[http://jsfiddle.net/LmUrP/](http://jsfiddle.net/LmUrP/)

```
 $(function () {

        $("li:first-child").addClass("test");
        $('li').click(function () {
            $('#menu li').removeClass('test');
            $(this).addClass('test');
        });
    });​ 
```

html

```
<ul id='menu'>
  <li><a href="#"><span>Home</span></a></li>
  <li><a href="#"><span>contact us</span></a></li>
  <li><a href="#"><span>apples</span></a></li>
  <li><a href="#"><span>bananas</span></a></li>
</ul>​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T21:51:34.003

这将使您能够根据当前页面 url 突出显示“当前列表项”
您必须在加载时测试 url：

```
$(function () {
    $('ul#menu>li>a[href="'+location.pathname+'"]').addClass('test');      
});​ 
```

让你的 html 像这样：

```
<ul id="menu">
    <li><a href="/"><span>Home</span></a></li>
    <li><a href="/contactus.aspx"><span>contact us</span></a></li>
</ul> 
```

注意`/`href 属性值的开头！那是因为`location.pathname`总是返回一个绝对路径。

这是我写的一个小提琴[http://jsfiddle.net/unloco/29E23/](http://jsfiddle.net/unloco/29E23/)因为那是 jsfiddle 显示 iframe 的 url ！
`href="/_display/"`

**但是**，如果您的页面在您的页面中，`http://domain.com/folder/page.php`您将不得不写信`href='/folder/page.php'`以获得正确的行为！

# php - 何时以及如何使用 PHP 创建类变量？

> ID：11942734
> 
> 赞同：1
> 
> 时间：2012-08-13T21:40:53.327
> 
> 标签：php, oop

新手问题，我的类方法中有变量，我是否必须将它们设为类变量，以便我可以使用 $this 访问它们？如果不是，请解释我何时使用或制作类变量？

```
private function is_valid_cookie()
{
    $securedtoken = $this->input->cookie('securedtoken');
    // Checks if the cookie is set
    if (!empty($securedtoken)) {
        // Checks if the cookie is in the database
        $s = $this->db->escape($securedtoken);
        $query = $this->db->query("SELECT cookie_variable FROM jb_login_cookies WHERE cookie_variable=$s");
        if ($query->num_rows() != 0) {
            // Now let us decrypt the cookie variables
            $decoded = unserialize($this->encrypt->decode($securedtoken));
            $this->login($decoded['username'], $decoded['password']);
            return true;
        } else {
            return false;
        }
    } else {
        return false;
    }
} 
```

正如你们所看到的，我有变量 $securedtoken 和 $decoded = array()，我无法决定是否必须将它们设为类变量并使用 $this 访问它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:43:37.937

你有，是的。您可以像这样声明类变量：

```
class Dog
{
    protected $name = 'Spot';

    public function getName()
    {
        return $this->name;
    }
} 
```

[您可以在文档](http://www.php.net/manual/en/language.oop5.properties.php)中阅读有关属性（成员变量）的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T21:44:15.367

实际上，我尝试将类级变量的使用减少到它们将在多个方法中通用的情况，或者它们将从类外部的代码中引用（直接或通过 getter/setter）。如果变量只是在方法的局部范围内需要，不要用它污染类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T21:44:26.473

当您尝试在类中的不同函数中共享这些变量时，您将需要创建类变量。然后，您需要为这些属性使用不同的访问修饰符（公共、私有、受保护），具体取决于外部代码是否可以查看它们、子类是否可以查看它们，或者什么都没有。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T21:48:14.510

您不必使它们成为实例变量。您也可以将它们设为静态变量或常量变量！您使用类变量来描述类的属性。即类有什么。

使您的术语正确也很重要。您正在询问有关制作变量和实例变量的问题。类变量 (http://en.wikipedia.org/wiki/Class_variable) 指的是静态变量

对于您的具体示例，如果您的两个变量仅用于该函数，则不应将它们设为实例变量。没有理由在全班共享它们另一方面，如果您需要在其他方法或其他地方再次使用它们，则不是。你应该。

决定你想要什么样的变量和什么样的访问是一个设计决定。

好的起点是面向对象的 php 概述。[http://php.net/manual/en/language.oop5.php](http://php.net/manual/en/language.oop5.php)

和基本的初学者教程 [http://www.killerphp.com/tutorials/object-oriented-php/](http://www.killerphp.com/tutorials/object-oriented-php/)

# python - 插入 sqlite3 值时出现 Python TypeError？

> ID：11942735
> 
> 赞同：4
> 
> 时间：2012-08-13T21:40:56.163
> 
> 标签：python, sqlite, typeerror

我一直在学习将 sqlite3 与 python 一起使用。现在，我有一个函数可以获取一个单词并在互联网上查找该单词的定义。然后我尝试将单词存储在一个表中，并将定义存储到另一个通过外键链接在一起的表中。

像这样：

```
#! /usr/bin/env python
import mechanize
from BeautifulSoup import BeautifulSoup
import sys
import sqlite3

def dictionary(word):
    br = mechanize.Browser()
    response = br.open('http://www.dictionary.reference.com')
    br.select_form(nr=0)
    br.form['q'] = word 
    br.submit()
    definition = BeautifulSoup(br.response().read())
    trans = definition.findAll('td',{'class':'td3n2'})
    fin = [i.text for i in trans]
    query = {}
    word_count = 1
    def_count = 1
    for i in fin: 
        query[fin.index(i)] = i
    con = sqlite3.connect('vocab.db')
    with con:
        spot = con.cursor()
        spot.execute("SELECT * FROM Words")
        rows = spot.fetchall()
        for row in rows:
            word_count += 1
        spot.execute("INSERT INTO Words VALUES(?,?)", word_count,word)
        spot.execute("SELECT * FROM Definitions")
        rows = spot.fetchall()
        for row in rows:
            def_count += 1
        for q in query:
            spot.execute("INSERT INTO Definitions VALUES(?,?,?)", def_count,q,word_count)
    return query

print dictionary(sys.argv[1]) 
```

当我运行它时：

```
./database_trial.py 'pass' 
```

这是错误消息：

```
Traceback (most recent call last):
  File "./database_trial.py", line 37, in <module>
    print dictionary(sys.argv[1])  
  File "./database_trial.py", line 28, in dictionary
    spot.execute("INSERT INTO Words VALUES(?,?)", word_count,word)
TypeError: function takes at most 2 arguments (3 given) 
```

在函数内部，我只有两个参数传递给“Words”表，但是消息说有三个？

```
spot.execute("INSERT INTO Words VALUES(?,?)", word_count,word) 
```

我想我可能把 sys.argv 搞砸了。所以我通过并将该行更改为：

```
spot.execute("INSERT INTO Words VALUES(?,?)", word_count, sys.argv[1]) 
```

我仍然得到与错误消息相同的结果？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T21:46:47.570

```
spot.execute("INSERT INTO Words VALUES(?,?)", word_count,word) 
```

*将*三个参数传递给方法`spot.execute`：SQL 字符串、变量和`word_count`变量`word`。我怀疑要输入数据库的值需要包含在一个元组中以形成单个参数：

```
spot.execute("INSERT INTO Words VALUES(?,?)", (word_count,word)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T21:47:25.263

[`execute`](http://docs.python.org/library/sqlite3.html#sqlite3.Cursor.execute)只接受两个参数；第二个是您要在准备好的 SQL 语句中使用的所有值的[*元组。*](http://docs.python.org/tutorial/datastructures.html#tuples-and-sequences)所以，而不是

```
spot.execute("INSERT INTO Words VALUES(?,?)", word_count,word) 
```

将所有值包装在一个元组中：

```
spot.execute("INSERT INTO Words VALUES(?,?)", (word_count, word) )
#                                             ^                ^ 
```

# android - android中的gcm注册失败

> ID：11942736
> 
> 赞同：6
> 
> 时间：2012-08-13T21:40:57.393
> 
> 标签：android, push-notification, google-cloud-messaging

我正在尝试使用推送通知部署应用程序。问题是我无法让它从设备上工作。使用模拟器时，一切正常，但使用手机时，我收到一条日志`"AUTHENTICATION_FAILED"`。

我已经检查过并且 Gmail 帐户已同步，但总是试图检查我是否出现此错误。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T06:14:38.967

这是由于 Google 帐户密码错误造成的。在手机上检查您的帐户。

> 错误的 Google 帐户密码。Android 应用程序应要求用户输入他/她的 Google 帐户密码，并让用户稍后手动重试。固定在设备端。

[在此处](http://developer.android.com/guide/google/gcm/gcm.html#handling_reg)检查错误代码和解释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T21:04:07.843

问题是我在手机上有多个帐户，对于那些有同样问题的人来说，只需与设置手机的初始帐户同步即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-07T16:41:59.923

就我而言，由于网络上的防火墙阻止了 GCM 的 URL 和端口，我遇到了这个问题。我通过使用 VPN 服务（即热点）暂时解决它。

为了永久解决，我允许在防火墙上使用以下端口和 URL。

5228 5229 5230

[Google 的ASN 15169](http://www.peeringdb.com/view.php?asn=15169)中列出的所有 IP

# mongodb - 在 MongoDB 中将 Guid 存储为字符串有什么缺点？

> ID：11942740
> 
> 赞同：15
> 
> 时间：2012-08-13T21:41:15.777
> 
> 标签：mongodb, mongodb-.net-driver

一个应用程序在 Mongo 中保留 Guid 字段，它最终被存储为 BinData：

```
"_id" : new BinData(3, "WBAc3FDBDU+Zh/cBQFPc3Q==") 
```

这种情况的优点是紧凑，当需要对应用程序进行故障排除时，缺点就会出现。Guid 是通过 URL 传递的，并且在进入 Mongo 控制台时不断将它们转换为 BinData 有点痛苦。

除了增加大小之外，将 Guid 存储为字符串还有什么缺点？一个优点是易于故障排除：

```
"_id" : "3c901cac-5b90-4a09-896c-00e4779a9199" 
```

这是 C# 中持久实体的原型：

```
class Thing
{
    [BsonIgnore]
    public Guid Id { get; set; }

    [BsonId]
    public string DontUseInAppMongoId
    {
        get { return Id.ToString(); }
        set { Id = Guid.Parse(value); }
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-14T12:13:49.190

除了 gregor 的回答，使用 Guids 目前将阻止使用新的聚合框架，因为它表示为二进制类型。无论如何，你可以用更简单的方式做你想做的事。这将让 mongodb bson 库为您处理转换。

```
public class MyClass
{
  [BsonRepresentation(BsonType.String)]
  public Guid Id { get; set;}
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T11:34:57.753

缺点是 mongodb 已针对使用 BSON ObjectID 进行了优化，因此使用字符串作为 ObjectID 的效率会稍低一些。此外，如果您想对字符串 ObjectID 使用基于范围的查询，则将使用字典比较，这可能会产生与您预期不同的结果。除此之外，您可以使用字符串作为 ObjectID。请参阅优化 ObjectIDs [http://www.mongodb.org/display/DOCS/Optimizing+Object+IDs](http://www.mongodb.org/display/DOCS/Optimizing+Object+IDs)

# javascript - 在提示页面上提交之前的验证

> ID：11942741
> 
> 赞同：0
> 
> 时间：2012-08-13T21:41:19.283
> 
> 标签：javascript, cognos

我正在尝试使用 HTML 项在提示页面上使用某种脚本，我想要完成的是在单击完成按钮脚本后检查是否没有任何东西留下黑色。没有任何东西意味着任何提示/过滤器（文本、提示、日期/时间），如果是，则不会通过。

希望我把事情说清楚了。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:49:48.950

就我个人而言，如果您还没有 js 框架，我认为最快和最简单的方法是 jQuery 验证...查看此页面，查看示例并尝试一下。我认为您提供的描述将包含在此插件的基本使用示例中。

[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T22:15:51.430

如果您不想像 Ben 的回答那样使用 jQuery，可以使用表单的 onSubmit 事件：

```
<form id="datform" action="http://path.to/action.script" onsubmit="return isValidated()">
...
...
'</form> 
```

然后，您将使用 javascript 函数，ala

```
<script type="text/javascript">
  function isValidated(){
    var so=false;
    return so;  
  }
</script> 
```

就个人而言，我更喜欢 jQuery，但这允许一些即时验证

# javascript - ExtJS - 表单提交

> ID：11942742
> 
> 赞同：6
> 
> 时间：2012-08-13T21:41:33.790
> 
> 标签：javascript, forms, extjs, submit

我有代码：

```
win = desktop.createWindow({
    id: 'admin-win',
    title: 'Add administration users',
    width: 740,
    height: 480,
    iconCls: 'icon-grid',
    animCollapse: false,
    constrainHeader: true,
    xtype: 'form',
    bodyPadding: 15,
    url: 'save-form.php',
    items: [{
        xtype: 'textfield',
        fieldLabel: 'Field',
        name: 'theField'
    }],

    buttons: [{
        text: 'Submit',
        handler: function () {
            var form = this.up('form').getForm();
            if (form.isValid()) {
                form.submit({
                    success: function (form, action) {
                        Ext.Msg.alert('Success', action.result.message);
                    },
                    failure: function (form, action) {
                        Ext.Msg.alert('Failed', action.result ? action.result.message : 'No response');
                    }
                });
            }
        }
    }]
}); 
```

而且按钮不起作用。它会产生错误 - this.up('form') 未定义。我怎样才能在这样的代码中调用 getForm() ？

更新：感谢您的快速回复！我根据需要修改了您的代码，就是这样，它适用于桌面示例：

```
win = desktop.createWindow({
    id: 'admin-win',
    title: 'Add administration users',
    width: 740,
    iconCls: 'icon-grid',
    animCollapse: false,
    constrainHeader: true,
    items: [{
        xtype: 'form',
        bodyPadding: 15,
        url: 'save-form.php',
        items: [{
            xtype: 'textfield',
            fieldLabel: 'Field',
            name: 'theField'
        }],

        buttons: [{
            text: 'Submit',
            handler: function () {
                var form = this.up('form').getForm();
                if (form.isValid()) {
                    this.up().up().submit({
                        success: function (form, action) {
                            Ext.Msg.alert('Success', action.result.message);
                        },
                        failure: function (form, action) {
                            Ext.Msg.alert('Failed', action.result ? action.result.message : 'No response');
                        }
                    });
                }
            }
        }]
    }]
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T21:51:36.127

正如我已经说过的，您的代码似乎有问题。您正在将 Ext.form.Panel 选项传递给 Ext.window.Window （我假设这是因为您正在调用的方法的名称）。我正在为您编写一个带有窗口的示例。一会儿。

它准备好了。看一看：

```
Ext.create('Ext.window.Window', {
    title: 'This is a Window with a Form',
    height: 200,
    width: 400,
    layout: 'fit',
    items: [{  // the form is an item of the window
        id: 'admin-win',
        title: 'Add administration users',
        width: 740,
        height: 480,
        iconCls: 'icon-grid',
        animCollapse: false,
        constrainHeader: true,
        xtype: 'form',
        bodyPadding: 15,
        url: 'save-form.php',
        items: [{
            xtype: 'textfield',
            fieldLabel: 'Field',
            name: 'theField',
            allowBlank: false
        }],
        buttons: [{
            text: 'Submit',
            handler: function() {
                var form = this.up('form').getForm();
                if (form.isValid()) {
                    form.submit({
                        success: function(form, action) {
                           Ext.Msg.alert('Success', action.result.message);
                        },
                        failure: function(form, action) {
                            Ext.Msg.alert('Failed', action.result ? action.result.message : 'No response');
                        }
                    });
                } else {
                    Ext.Msg.alert( "Error!", "Your form is invalid!" );
                }
            }
        }]
    }]
}).show(); 
```

jsFiddle：http: [//jsfiddle.net/davidbuzatto/vWmmD/](http://jsfiddle.net/davidbuzatto/vWmmD/)

# javascript - 可以在 Android 和 iOS 设备上通过 Javascript 调用 TCP 或 WebSockets 吗？

> ID：11942743
> 
> 赞同：4
> 
> 时间：2012-08-13T21:41:36.147
> 
> 标签：javascript, android, sockets, cordova, tcp

我想做的是创建一个完全没有任何装饰的嵌入式 wifi 设备（很像 arduino 板）并与之通信。它基本上接受一个套接字并侦听信息并做出响应。

完整的范围是我正在使用 PhoneGap 以使应用程序跨设备兼容。

我曾计划尝试使用某种 javascript 插件来制作 TCP 套接字，但是我遇到的所有插件都需要服务器端脚本（在这种情况下是不可能的）。我总是可以在 android 和 iOS 设备之间放置一台网关计算机，但如果我只能创建一个浏览器套接字，那似乎效率低下。

所以我的问题是有没有人知道可以在没有服务器端脚本的情况下创建 TCP 套接字的 javascript 插件？

如果没有，您认为我可以为 PhoneGap 创建一个插件来调用本机 SocketHandler 代码吗？

实际上，他们是否已经有一个插件可以让您通过 javascript 使用 Native TCP Sockets？

我希望我的问题是有意义的。基本上是在寻找一种通过移动设备上的网络浏览器通过 TCP/IP 发送小型串行通信的方法。

有人知道这件事吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T16:47:34.277

有一些可用于 PhoneGap 网络的插件。其中三个是：

*   iOS、Android、WP8：[https ://github.com/blocshop/sockets-for-cordova](https://github.com/blocshop/sockets-for-cordova)
*   安卓：[https ://github.com/Habel/TCPSockets](https://github.com/Habel/TCPSockets)
*   iOS：[https ://github.com/purplecabbage/phonegap-plugins/tree/master/iPhone/GapSocket](https://github.com/purplecabbage/phonegap-plugins/tree/master/iPhone/GapSocket)

这些应该为您提供可以发送 TCP 请求的网络层套接字。

**至于 WebSockets：** WebSockets（以下简称“WS”）是一种应用层协议，如 HTTP 或 XMPP。您可以自己使用 TCP 实现 WS，因为 WS 位于 TCP 之上。

如果 Android 的 WebView 可以原生发送 WS 请求，则应该使用它。WS 只不过是一个位于 TCP 上的协议，看起来有点像 HTTP。只需使用 WebSocket 服务器库，例如用于 Python的[ws2py](https://github.com/Lawouach/WebSocket-for-Python)或用于 Node.js的[ws 。](http://einaros.github.com/ws/)仅当您需要连接到不理解或不接受 WebSockets 的现有服务时才使用 TCP。

# java - 活动正在接收数据但未显示

> ID：11942744
> 
> 赞同：0
> 
> 时间：2012-08-13T21:41:37.473
> 
> 标签：java, android, eclipse, android-intent

我将字符串从活动 A 传递到 B，然后我将从 A 中的活动 B 取回数据。因此，我使用了 startActivityForResult()。我总是得到“IS not Null”。我正在接收数据，但无法在 Acitivity B 的文本视图中查看该数据。我正在发布代码，请告诉我出了什么问题。

活动 A（发送数据）：

```
Intent data= new Intent(SendData.this, RecieveData.class);
Bundle check = new Bundle();

check.putString("UmerData", cheese);
medt.setText(cheese);
data.putExtras(check);
startActivityForResult(data, 5); 
```

活动 B（接收数据）：

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.recievedata);
    InitializeFoo();
    if(getIntent()!=null)
    {
        rt1.setText("Is not Null");
                    //Bundle got = getIntent().getExtras();

        //rt1.setText(got.getString("UmerData"));
    }
} 
```

PS：我在活动 B 中进行了更改，以查看是否收到字符串。它仍然显示“不是空的”，这意味着我没有得到字符串。但我不知道为什么这没有显示。这是代码：

```
Bundle got = getIntent().getExtras();
String ss= got.getString("UmerData");
if(getIntent()!=null && ss==null )
{
    //Bundle got = getIntent().getExtras();
    //rt1.setText(got.getString("UmerData"));
    rt1.setText("Is not Null");
} 
```

这是在活动 B 中：

```
private void InitializeFoo() {
    // TODO Auto-generated method stub
    Rg = (RadioGroup) findViewById(R.id.RG);
    rt1 = (TextView) findViewById(R.id.Rt1);
    rt2 = (TextView) findViewById(R.id.Rt2);
    rec = (Button) findViewById(R.id.Return);
    Rg.setOnCheckedChangeListener(this);
    rec.setOnClickListener(this);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T23:18:55.263

所以有两个主要错误。第一个是在 SendData 中，就在调用 RecieveData 之前，您为意图设置的 cheese 值为 null，这是您在第二个活动中收到 null 的主要原因。以下代码必须适用于这些情况，因此在“if”括号之外：

```
cheese = Dt.getText().toString(); 
```

另一件事（在您放在那里的代码中实际上是可以的）是您将捆绑“检查”设置为额外的本身（通过调用 putExtra(....)）而不是作为由键值对（通过调用 putExtras(...)）。

它在两个地方都经过测试并获得了正确的价值。为了澄清，我附上了有问题的活动。

```
package com.umer.practice2;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class SendData extends Activity implements View.OnClickListener {

    EditText Dt;
    Button Dbut, result;
    TextView medt;
    String cheese;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    setContentView(R.layout.data);

    InitializeShit();
    }

    private void InitializeShit() {
    // TODO Auto-generated method stub

    Dt = (EditText) findViewById(R.id.Det);
    Dbut = (Button) findViewById(R.id.Sna);
    result = (Button) findViewById(R.id.Sfr);
    medt = (TextView) findViewById(R.id.Med);

    Dbut.setOnClickListener(this);
    result.setOnClickListener(this);

    }

    @Override
    public void onClick(View arg0) {
    // TODO Auto-generated method stub
    cheese = Dt.getText().toString();
    switch (arg0.getId()) {
        case R.id.Sna:

        Bundle send = new Bundle();

        send.putString("UmerData", cheese);
        Intent foo = new Intent(SendData.this, RecieveData.class);

        foo.putExtras(send);

        startActivity(foo);
        break;

        case R.id.Sfr:
        Intent data = new Intent(SendData.this, RecieveData.class);
        Bundle check = new Bundle(); // NOT IN TRAVIS CODE

        check.putString("UmerData", cheese);// NOT IN TRAVIS CODE
        medt.setText(cheese);// NOT IN TRAVIS CODE
        data.putExtras(check);// NOT IN TRAVIS CODE
        startActivityForResult(data, 5);
        break;
    }

    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub

    super.onActivityResult(requestCode, resultCode, data);

    if (resultCode == RESULT_OK) {
        Bundle roti = new Bundle();
        roti = data.getExtras();
        String ch = roti.getString("String");
        medt.setText(ch);
    }
    }
} 
```

希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T22:47:44.773

如果您使用 putExtras(Bundle) 添加额外内容，则需要在值对的键中包含包名称。参考文档：

“向意图添加一组扩展数据。键必须包含包前缀，例如应用程序 com.android.contacts 将使用类似“com.android.contacts.ShowAll”的名称。

您可以随时使用

```
data.putExtra("UmerData", cheese); 
```

# spring - 从视图访问 Spring 控制器名称

> ID：11942745
> 
> 赞同：1
> 
> 时间：2012-08-13T21:41:37.397
> 
> 标签：spring, spring-mvc

使用 Spring，我如何在视图中检索以下控制器属性？

*   控制器名称
*   控制器的@RequestMapping URI
*   动作方法名称
*   Action 方法的 @RequestMapping URI

我尝试过的一种方法是创建 HandlerInterceptorAdapter 的子类并覆盖 postHandle。我将我的子类注册为给定路径列表的 mvc:interceptor - 这很笨重，但这是避免我的拦截器被 ResourceHandler 请求调用的唯一方法（我不想要）。在我的 postHandle 中，我可以轻松添加 2 个名称属性，但不能添加 URI...

1.  从 HttpRequest 对象解析需要对所有 Controller RequestMappings 进行约束。即我必须始终映射 /Controller/Action 或等效方案。相当有限。
2.  创建一个 ApplicationContext 并使用 requestURI 查询它太冗长了。

我正在考虑删除 HandlerInterceptorAdapter，而是为我的所有控制器定义一个 BaseController 来扩展。

在我这样做之前我想问一下，有没有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T00:41:15.480

你没有说明你为什么需要这样做（它有时有助于包括你的动机，因为其他人可以建议替代方法）。

但我猜测 Spring 3.1 的特性被松散地称为“端点文档”可能会满足您的要求......请参阅`RequestMappingHandlerMapping`Spring[文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-requestmapping-31-vs-30)，它没有提供很多细节，所以这个示例项目是最好的地方看看它的实际效果：

*   [Spring MVC 3.1 演示应用](https://github.com/rstoyanchev/spring-mvc-31-demo)
*   [示例控制器](https://github.com/rstoyanchev/spring-mvc-31-demo/blob/master/src/main/java/org/springframework/samples/mvc31/endpointdoc/EndpointDocumentationController.java)
*   [示例 JSP 页面](https://github.com/rstoyanchev/spring-mvc-31-demo/blob/master/src/main/webapp/WEB-INF/views/endpointdoc.jsp)

# python - Numpy多维数组索引交换轴顺序

> ID：11942747
> 
> 赞同：11
> 
> 时间：2012-08-13T21:41:39.673
> 
> 标签：python, numpy

我正在使用多维 Numpy 数组。在使用其他索引数组访问这些数组时，我注意到一些不一致的行为。例如：

```
import numpy as np
start = np.zeros((7,5,3))
a     = start[:,:,np.arange(2)]
b     = start[0,:,np.arange(2)]
c     = start[0,:,:2]
print 'a:', a.shape
print 'b:', b.shape
print 'c:', c.shape 
```

在这个例子中，我得到了结果：

```
a: (7, 5, 2)
b: (2, 5)
c: (5, 2) 
```

这让我很困惑。为什么“b”和“c”的尺寸不同？为什么“b”交换轴顺序，而不是“a”？

由于大量的单元测试，我已经能够围绕这些不一致来设计我的代码，但是了解正在发生的事情将不胜感激。

作为参考，我通过 MacPorts 使用 Python 2.7.3 和 Numpy 1.6.2。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-13T23:07:33.000

从句法上看，这看起来是不一致的，但从语义上看，你在这里做了两件非常不同的事情。在 and 的定义中`a`，`b`您正在执行[高级索引](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#advanced-indexing)，有时称为[花式索引](https://www.numpy.org/devdocs/user/quickstart.html#fancy-indexing-and-index-tricks)，它返回数据的副本。在您的定义中`c`，您正在执行[基本切片](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#basic-slicing)，它返回数据视图。

为了区分，它有助于理解如何将索引传递给 python 对象。这里有些例子：

```
>>> class ShowIndex(object):
...     def __getitem__(self, index):
...         print index
... 
>>> ShowIndex()[:,:]
(slice(None, None, None), slice(None, None, None))
>>> ShowIndex()[...,:]
(Ellipsis, slice(None, None, None))
>>> ShowIndex()[0:5:2,::-1]
(slice(0, 5, 2), slice(None, None, -1))
>>> ShowIndex()[0:5:2,np.arange(3)]
(slice(0, 5, 2), array([0, 1, 2]))
>>> ShowIndex()[0:5:2]
slice(0, 5, 2)
>>> ShowIndex()[5, 5]
(5, 5)
>>> ShowIndex()[5]
5
>>> ShowIndex()[np.arange(3)]
[0 1 2] 
```

如您所见，有*许多*不同的可能配置。首先，可以传递单个项目，或者可以传递项目的元组。其次，元组可能包含`slice`对象、`Ellipsis`对象、纯整数或`numpy`数组。

*当您仅*`int`传递、`slice`或`Ellipsis`对象或`None`（与 相同）等对象时，将激活基本切片`numpy.newaxis`。这些可以单独传递，也可以在一个元组中传递。以下是文档关于如何激活基本切片的内容：

> 当 obj 是切片对象（由括号内的 start:stop:step 表示法构造）、整数或切片对象和整数的元组时，就会发生基本切片。Ellipsis 和 newaxis 对象也可以穿插其中。为了保持向后兼容 Numeric 中的常见用法，如果选择对象是包含切片对象、Ellipsis 对象或 newaxis 对象的任何序列（例如列表），但没有整数数组或其他嵌入序列。

`numpy`当您传递数组、仅包含整数或包含任何类型的子序列的非元组序列或包含数组或子序列的元组时，将激活高级索引。

有关高级索引和基本切片有何不同的详细信息，请参阅文档（链接到上面）。但在这种特殊情况下，我很清楚发生了什么。使用部分索引时，它与以下行为有关：

> 部分索引的规则是结果的形状（或要在设置中使用的对象的解释形状）是 x 的形状，索引子空间替换为广播索引子空间。如果索引子空间彼此相邻，则广播索引空间直接替换 x 中的所有索引子空间。如果索引子空间是分开的（通过切片对象），那么广播的索引空间是第一个，然后是 x 的切片子空间。

在`a`使用高级索引的定义中，您有效地将序列`[0, 1]`作为元组的第三项传递，并且由于没有广播发生（因为没有其他序列），所以一切都按预期发生。

在您的定义中`b`，也使用高级索引，您有效地传递*了两个*序列，`[0]`第一项（转换为`intp`数组）和`[0, 1]`第三项。这两项一起广播，结果与第三项具有相同的形状。然而，由于广播已经发生，我们面临一个问题：我们在新的形状元组中的什么地方插入广播的形状？正如文档所说，

> 索引子空间中没有明确的位置，因此它被附加到开头。

因此`2`，广播产生的结果被移动到形状元组的开头，产生明显的转置。

# c - 假设我只有 .h 文件和 .o 文件，如何调用函数？

> ID：11942748
> 
> 赞同：1
> 
> 时间：2012-08-13T21:41:45.880
> 
> 标签：c, pointers, header

**假设我在 C 中只有 .h 文件和 .o 文件，我可以调用函数吗？**

我的意思是如果我只有`example.h`文件和`example.o`文件，但我没有`example.c`文件，我想从主文件中读取函数。

我知道我可以用指针做到这一点，但我真的不知道该怎么做。关于如何实现这一目标的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T21:43:24.100

用于`#include<object.h>`在编译时包含头文件并提供目标文件的路径。

```
gcc main.c object.o -o main 
```

现在您应该可以使用该功能了。

# android - Android中的子菜单

> ID：11942749
> 
> 赞同：2
> 
> 时间：2012-08-13T21:41:50.687
> 
> 标签：android, android-layout, android-menu

我想在单击打开子菜单时附加一个菜单项。

我能够得到输出，但我的菜单项总是出现在溢出菜单中。通过一些研究，我发现 setShowAsAction 可用于使其在操作栏上可见，但我无法为 subMenu 项设置它们。

```
 @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        //(this is valid) menu.add("File").setShowAsAction(2);
        SubMenu sm = menu.addSubMenu("File");
        //(can't do this) sm.setShowAsAction(2);
        sm.add("Open");
        sm.add("Close");        
        return true;       
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T21:13:29.780

用于`sm.getItem()`获取子菜单的实际`MenuItem`值。然后，您可以调用`setShowAsAction()`它。

# sql - 在 SQL 或 Access 中对表进行排序

> ID：11942754
> 
> 赞同：3
> 
> 时间：2012-08-13T21:42:26.973
> 
> 标签：sql, oracle, odbc, ms-access-2007

```
Code  | FName | Freq
---------------------
L1    | Ted   | 4
L1    | Frank | 
L1    | Ted   | 5
L2    | Ted   | 7
L1    | Jim   | 4
L1    | Ted   | 7
L4    | Ed    | 1
L2    | Ted   | 2
L1    | Frank | 2 
```

假设我的数据库中有一张这样的表。是否可以在 SQL 中抓取记录（或在 SQL 中抓取然后在另一个 Access 查询中重新组织），以便我可以获得如下所示的记录集：

```
Code | FName | Freq
-------------------------
L1    | Ted   | 4, 5, 7
L1    | Frank | 2
L2    | Ted   | 2, 7
L4    | Ed    | 1
L1    | Jim   | 4 
```

在基于“代码”和“Fname”的列表中将不同的“频率”数字附加在一起？只要所有不同的频率数字都在列表中，顺序就无关紧要。我可以假设对于 Code 和 Fname 的每个组合，都会有不同的、不重复的频率数（因此，'L1' 和 'Ted' 的组合永远不会有超过一次的频率值 4）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:55:41.037

那么你很幸运！

```
select code, fname, listagg(cast(freq as varchar(32), ',') within group (order by freq)
from t
group by code, fname 
```

但是，我不确定这对空白有什么作用。

# security - 可以采取哪些措施来防止受到破坏的密码数据库的暴力破解？

> ID：11942756
> 
> 赞同：2
> 
> 时间：2012-08-13T21:42:39.780
> 
> 标签：security, hash, password-protection, brute-force

鉴于暴雪最近发生的数据泄露事件，我想询问一下暴力破解和加盐哈希密码存储的问题。

[Ars Technica 有一篇很好的文章](http://arstechnica.com/security/2012/08/hacked-blizzard-passwords-not-hard-to-crack/)，解释了为什么即使是暴雪存储的加盐哈希密码也可以在短时间内被破解。

由于使用了加盐和散列，我们知道暴力攻击是破解“复杂”密码的唯一可行方法（字典/纯字密码很简单）......但是 Ars Technica 提出了一个很好的观点，即巨大的计算能力的提高（本地和云端）使暴力破解更加可行。

对于一个网站，[Jeff Atwood 指出](http://www.codinghorror.com/blog/2009/01/dictionary-attacks-101.html)，强制延迟身份验证尝试实际上可以阻止暴力破解尝试……但在暴雪破坏的情况下，黑客对数据库具有物理控制权，因此不能施加这样的可访问性限制。

因此，[Jeff 还建议使用密码短语](http://www.codinghorror.com/blog/2005/07/passwords-vs-pass-phrases.html)，因为暴力攻击者面临的熵增加......但是随着计算能力变得更大和更容易获得，这最终也会有效地消失。

**所以问题是：由于计算能力的增加，可以实施哪些不受攻击的蛮力保护方案？**

通常会考虑两阶段身份验证，但我听说其中一些算法也被破坏了，而物理身份验证器可能具有静态算法，因此一旦被破解，所有用户都会受到攻击。

适用于整个身份验证数据库的预定滚动盐怎么样？这会增加很多开销，但即使在物理数据库泄露的情况下，它似乎也能保证安全。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:19:05.613

Security is a combination of a few things (there is much more than this list, but rather than turning this post into a book, I'll keep it at these for now):

*   **Encryption** - complexity; making it difficult to know what the original content is
*   **Obfuscation** - unclear/protected; making it difficult for other scripts/users to know or guess how your security scheme works.
*   **Intrusion Prevention/Response** - determining when a security breach (or attempted breach) has occurred, and responding to the incident

Encryption will be things like hashing, salts, SSL, keys, etc. Obfuscation will be things like [steganography](http://en.wikipedia.org/wiki/Steganography), using rotating salts, separating the passwords off into another server that no script can access, etc. Intrusion Prevention/Response will be things like rate limiting, delays, shutting down servers once the breach is made known, etc.

Now looking at your question: **What brute-force protection schemes can be implemented that aren't vulnerable due to increasing computation power?**

My answer: **none**. Unless someone builds a quantum computer or a mathematician writes an expansion to group theory in a way that would blow all of our minds out of our heads, then **any and all** "brute-force protection schemes" will be vulnerable to increasing computational power (especially distributed processing, such as cloud servers or bot-nets).

It seems like your fear is the case of Blizzard, where the database had been accessed, and the hashed passwords were seen by the hackers. If someone has the hash, and knows your salts/hashing procedure, then it's only a matter of time before they can get the password. At this point, we are talking only about encryption, because everything else is known and/or moot.

It's a matter of math: the longer and more complicated the password, that's increasing orders of magnitude, and the problem becomes an exponential with each added character. But if you exponentially increase the computational power of the brute-force algorithm, you're back to square one.

If a hacker gets a hold of the hashes that are stored in your database, then immediately lock the database, figure out how they got in, fix that security hole, and add a step to your authentication procedure, update the database with the new authentication procedure and turn everything back on.

In other words, make sure your authentication server/database is secure on every level so that hackers can't get access to it.

If you just want to "buy more time", then add complexity. But keep in mind that this doesn't make your database more secure. It would be better to analyze how to lock the database down to prevent someone from getting the hashes in the first place.

# sublimetext2 - 如何配置 Sublime Text 2 编辑器以便更轻松地使用 ATK4 框架？

> ID：11942757
> 
> 赞同：1
> 
> 时间：2012-08-13T21:42:42.497
> 
> 标签：sublimetext2, atk4

如何配置 Sublime Text 2 编辑器以便更轻松地使用 ATK4 框架？

我对页面、视图、模型文件的一些标准宏（片段）感兴趣，也许还有一些对在 ATK4 中开发有用的 Sublime Text 2 编辑器配置细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:30:09.217

我有两个，我已经将它们贡献到 atk4/tools 文件夹中。你可以在这里找到它们：

[https://github.com/atk4/atk4/tree/master/tools](https://github.com/atk4/atk4/tree/master/tools)

随意贡献更多！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T04:33:10.043

我找不到 ATK4 的任何插件。[您可以在ST2 UserEcho](http://sublimetext.userecho.com/)上提出插件请求，看看是否有任何问题。

# sql - sql server 案例 - 日期

> ID：11942761
> 
> 赞同：-1
> 
> 时间：2012-08-13T21:43:03.637
> 
> 标签：sql, sql-server-2008-r2

我有下表：

```
ID   ActualDt   DueDt     Flag
--   -------    -------   ----    
1    01/03/12   09/13/12   Y
2    NULL       07/12/12   Y 
3    NULL       09/12/12   N
4    02/03/12   01/13/12   N 
```

对于以下情况，我需要将 Flag 标记为 Y：

1) 如果 ActualDt 不为 null 且 DueDt 不为 null 且 DueDt > ActualDt

2) 如果 ActualDt 为空且 DueDt 根据当前日期过期

否则，标志 = N

注意 ActualDt 是一个字符串

我将如何在 t-sql 中对此进行编程

我知道我需要一个案例陈述。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T21:47:28.067

如果我正确理解您的逻辑，它应该是：

```
SELECT
ID,
ActualDt,
DueDt,
CASE 
     WHEN ActualDt IS NOT NULL AND DueDt IS NOT NULL AND DueDt > ActualDt THEN 'Y'
     WHEN ActualDt IS NULL AND DueDt < getdate() THEN 'Y'
     ELSE 'N'
END as Flag
FROM YourTable 
```

编辑：正如 Aaron（像往常一样！）指出的那样，我错过了您使用字符串作为日期。由于您将 ActualDt 存储为字符串，因此不会为您提供正确的结果

您可以将所有日期值转换为日期时间...

```
SELECT
ID,
ActualDt,
DueDt,
CASE 
     WHEN cast(ActualDt as datetime) IS NOT NULL AND cast(DueDt as datetime) IS NOT NULL AND cast(DueDt as datetime) > cast(ActualDt as datetime) THEN 'Y'
     WHEN cast(ActualDt as datetime) IS NULL AND cast(DueDt as datetime) < getdate() THEN 'Y'
     ELSE 'N'
END as Flag
FROM YourTable 
```

但请注意，根据日期格式和您的语言环境设置（和日期格式设置），您可能会遇到 SQL 错误或意外日期。

将日期存储为日期时间总是更好 - 你能解释为什么你的日期是字符串吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:52:30.140

您需要一个更新声明：

```
update t
    set flag = (case when ActualDt is not null and DueDt is not null and
                          DueDt > cast(ActualDt as date)
                     then 'Y'
                     when ActualDt is null and DueDt is not null and
                          DueDt > cast(CURRENT_TIMESTAMP as date)
                     then 'Y'
                     else 'N'
                end) 
```

此查询假定日期格式与数据库的默认格式相匹配。我的数据库设置为美国标准，因此 '01/03/12' 被解释为 2012 年 1 月 3 日。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T12:19:39.077

为了让您的生活更轻松，真正的解决方案是[停止将日期存储为字符串](https://sqlblog.org/2009/10/16/bad-habits-to-kick-mis-handling-date-range-queries)。假设您最初是从这张表开始的：

```
CREATE TABLE dbo.Nathan
(
 ID INT,   
 ActualDt VARCHAR(32),  
 DueDt VARCHAR(32),     
 Flag CHAR(1)
);
GO

INSERT dbo.Nathan VALUES
(1,'01/03/12','09/13/12','Y'),
(2, NULL     ,'07/12/12','Y'), 
(3, NULL     ,'09/12/12','N'),
(4,'02/03/12','01/13/12','N'); 
```

让我们首先让你的字符串完全明确：

```
UPDATE dbo.Nathan
  SET ActualDt = CONVERT(CHAR(10), CONVERT(DATETIME, ActualDt, 1), 120),
      DueDt    = CONVERT(CHAR(10), CONVERT(DATETIME, DueDt   , 1), 120); 
```

现在让我们更正数据类型：

```
ALTER TABLE dbo.Nathan ALTER COLUMN ActualDt DATE;
ALTER TABLE dbo.Nathan ALTER COLUMN DueDt DATE;
-- you should also update any parameters or code where
-- explicit types are used to populate these columns 
```

现在您的数据使用正确的数据类型存储，并且可以在没有所有这些混乱的字符串解释和数据类型转换的情况下进行比较。您的要求是：

> 对于以下情况，我需要将 Flag 标记为 Y：
> 1) 如果 ActualDt 不为 null 且 DueDt 不为 null 且 DueDt > ActualDt
> 2) 如果 ActualDt 为 null 且 DueDt 基于当前日期过期
> 否则，Flag = N

对我来说是这样写的：

```
UPDATE dbo.Nathan
  SET Flag = CASE WHEN DueDt > ActualDt
    OR (ActualDt IS NULL AND DueDt < CURRENT_TIMESTAMP)
  THEN 'Y' ELSE 'N' END; 
```

结果：

```
ID  ActualDt    DueDt       Flag
--  ----------  ----------  ----
1   2012-01-03  2012-09-13  Y  -- DueDt > ActualDt
2   NULL        2012-07-12  Y  -- past due
3   NULL        2012-09-12  N  -- not past due
4   2012-02-03  2012-01-13  N  -- DueDt NOT > ActualDt 
```

我认为，这比继续将日期存储为字符串要好得多。

# android - 使用 adb 获取应用程序版本名称

> ID：11942762
> 
> 赞同：108
> 
> 时间：2012-08-13T21:43:11.840
> 
> 标签：android, adb

有没有一种简单的方法可以使用 adb shell 在 Android 设备上获取应用程序的版本名称？

我在 /data/system/packages.xml 中找到了应用程序版本号（不是版本名称）。

如果有一个包含应用程序信息的文件会很好。

* * *

## 回答 #1

> 赞同：227
> 
> 时间：2012-08-13T22:11:55.223

```
adb shell dumpsys package my.package | grep versionName 
```

as mentioned by [@david](https://stackoverflow.com/users/230825/david) and [@Jeremy Fishman](https://stackoverflow.com/users/350436/jeremy-fishman). This will be much quicker than:

```
adb shell dumpsys | grep -A18 "Package \[my.package\]" 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-02-23T08:17:17.687

Dumpsys 包是你的朋友

```
~/# adb shell
shell@mo:/ dumpsys package tld.comp.app_name | grep version 
```

将返回

```
versionCode=X targetSdk=YY
versionName=Z.Z 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-11-22T18:12:04.360

如果有人需要所有应用程序版本进行比较，那么这里是我的 oneliner：

```
for p in `adb shell pm list package | awk -F"package:" '{print $2}'`; do echo -n "$p: "; adb shell dumpsys package $p | grep -i versionName | awk -F"=" '{print $2}'; done 
```

也许它会对某人有所帮助，但请注意我使用 versionName 并忽略 versionCode，因此请谨慎使用。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-05-26T12:32:13.813

如果你想获得所有的包版本，试试这个 awk 脚本：

```
adb shell dumpsys package | awk '/^[ ]*Package \[.*\] (.*)/ { i = index($0, "[") + 1; pkg = substr($0, i, index($0, "]") - i); } /[ ]*versionName=/ { { print pkg "\t" substr($0, index($0, "=") + 1); pkg = ""; } }' 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-03-05T07:47:34.523

如果您不想在设备上安装 *.apk 但您需要获取应用程序的版本，您可以按照以下方式进行操作

```
$ANDROID_HOME/build-tools/28.0.3/aapt dump badging app/build/outputs/apk/app.app 
```

# php - 用户登录时将访客用户购物车项目与购物车中的项目合并是否合适

> ID：11942764
> 
> 赞同：0
> 
> 时间：2012-08-13T21:43:18.093
> 
> 标签：php, e-commerce

我正在用核心 PHP 实现一个电子商务网站。目前，如果来宾用户将一些产品添加到购物车并稍后登录，那么他现有购物车中的所有项目都将替换为新项目。我想问这是最好的方法还是我应该将 cookie 中的来宾用户购物车项目与存储在数据库中的用户购物车项目合并。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T21:52:09.213

我会这样做：当用户添加一些购物车项目然后登录时，会出现提示（如果登录的用户旧购物车不为空）：

> 此帐户的购物车中有 X 件旧商品，您也想加载这些商品吗？
> 
> （产品 X，产品 Y）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T21:48:00.090

这完全取决于您的要求。例如，如果您希望用户能够购物，然后在支付屏幕上登录，那么允许这样做似乎是有意义的。

我不会说这里有任何硬性规定。

现在当然允许将访客购物车项目添加到已登录用户的购物车中可能会带来一些您需要解决的更多安全问题，但如果您认为这对整个站点操作有用，或者您已被指示以这种方式实施，这样做没有问题。

# javascript - javascript和css firefox问题

> ID：11942770
> 
> 赞同：0
> 
> 时间：2012-08-13T21:43:46.033
> 
> 标签：javascript, css, css-float

弹出窗口在 chrome 中完美运行，但在 Firefox 中无法运行，我给了 css：`float:left;`但它没有得到修复

小提琴：http: [//jsfiddle.net/rajkumart08/s6hBG/21/](http://jsfiddle.net/rajkumart08/s6hBG/21/)

CSS：

```
a{
    text-decoration: none;
    color: inherit;
}

.openme {
    display: inline-block;
    color: #fff;
    background-color: #333;
    padding: 10px;
}

#menu{
    position: absolute;
    padding: 20px 0px 0px;
    background: -webkit-canvas(menu_background) no-repeat;
    -webkit-transition: opacity 300ms ease-out;
    -moz-transition: opacity 300ms ease-out;
}

#menu a{
    float:left;
    margin: 7px;
    padding: 10px 20px;
    font-weight: bold;
    font-size: 20px;
    text-align: center;
    border-radius: 5px;
    background-image: -webkit-gradient(linear, 0% 50%, 0% 51%, from(#fff), to(#edeff3));
    background-image: -moz-linear-gradient(top, #fff, #edeff3);
}

.hide { 
    opacity: 0; 
}

.show {
    opacity: 1;  
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:20:27.380

将此添加到您的 CSS 中：

```
#moz_background
{
    display:none;
} 
```

并改变这个：

```
#menu{
    position: absolute;
    padding: 20px 0px 0px;
    background: -webkit-canvas(menu_background) ;
    -webkit-transition: opacity 300ms ease-out;
    -moz-transition: opacity 300ms ease-out;
} 
```

到：

```
#menu
{
    position:absolute;
    padding:20px 0px 0px;
    background:-webkit-canvas(menu_background) no-repeat;
    background:-moz-element(#moz_background) no-repeat;
    -webkit-transition:opacity 300ms ease-out;
    -moz-transition:opacity 300ms ease-out;
    transition:opacity 300ms ease-out;
} 
```

**[演示](http://jsfiddle.net/s6hBG/22/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:54:30.107

这是因为 Chrome 将画布显示为`div#menu`. 在 Firefox 中，`canvas`实际上创建了一个元素。因为 canvas 元素显示为`block`，所以它出现在`a`它之前的元素下方。

# android - 如何在我的应用程序中接受错误报告和其他用户反馈？

> ID：11942771
> 
> 赞同：0
> 
> 时间：2012-08-13T21:43:46.850
> 
> 标签：android, forum, bug-tracking

如何接受来自应用内用户的反馈，例如错误报告、建议和评论？

据我所知，Android 平台和 Play 没有提供问题跟踪或论坛的解决方案。

澄清一下，我不是在寻找一种专门提交崩溃报告的方法，也不是在寻找跟踪用户行为的方法。我正在寻找一种让用户报告意外行为、改进想法等的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-06-26T13:16:39.567

您可以使用[Instabug 的](http://instabug.com)SDK。它包括几个与您的问题相关的功能：

*   错误报告 - 允许用户通过摇晃手势报告错误。
*   崩溃报告 - 发生时自动发送。
*   应用内聊天 - 在应用内与您的用户进行实时对话以获得更多反馈。
*   功能请求 - 允许用户建议新功能并支持现有想法。
*   应用内调查 - 在应用内使用文本多项选择或星级问题对用户进行调查。

* * *

为了全面披露，我在 Instabug 工作。让我知道我是否可以提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T22:41:30.017

对于错误报告，您可以使用[Airbrake](https://airbrake.io/pages/home)。这个的好处是您可以添加自定义信息。此外，您可以随时在您的应用程序中发送报告（假设您发现了需要通知的奇怪情况）。

对于分析，[Flurry](http://www.flurry.com/)对我来说效果很好。这很简单，但很重要。

最终，您可以将两者都用于主要平台，以便将所有内容集中在一个地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T21:13:15.117

我将使用他们的[REST API试用](http://developer.uservoice.com/)[UserVoice](http://www.uservoice.com)。

# grails - 如何在 Groovy/Grails InvokeHelper.invokeMethod() 上设置参数

> ID：11942774
> 
> 赞同：0
> 
> 时间：2012-08-13T21:44:00.590
> 
> 标签：grails, groovy, spring-integration

我有一个运行 Spring Integration inbound-channel-adapter 的 Grails webapp，它被配置为接收电子邮件，并且有一个服务激活器来处理消息。该服务激活器根据业务规则提取电子邮件的各个部分，然后需要更新 Grails 域对象并将这些更改保存到数据库中。

Spring Integration 服务激活器代码片段：

```
HashMap<String, Serializable> params = new HashMap<String, Serializable>();
params.put("notification", notification );
params.put("notificationType", notificationType );
params.put("sender", notificationSender );
InvokerHelper.invokeMethod(NotificationCreationService.class, "createNotification", params); 
```

Grails NotificationCreationService 操作片段：

```
def static createNotification() {
    if (params.notification != null && params.notificationType != null && params.sender != null) {
        String notification = params.get("notification") as String
        NotificationType notificationType = params.get("notificationType") as NotificationType
        String sender = params.get("sender") as String

        def NotificationMessage notificationMessage = null
        notificationMessage = new NotificationMessage()
        notificationMessage.notification = notification
        notificationMessage.save(flush: true)
        ...
    }
} 
```

`NotificationMessage`是一个标准的 Grails 域类

产生的错误：

```
org.springframework.integration.MessageHandlingException: 
    groovy.lang.MissingMethodException: No signature of method: mycompany.pyproject.mypackage.NotificationMessage.save() is applicable for argument types: () values: []
    Possible solutions: save(), save(boolean), save(java.util.Map), wait(), any(), wait(long) 
```

如果我改成`createNotification()`不是，`static`那么我会得到以下信息：

```
org.springframework.integration.MessageHandlingException: 
    groovy.lang.MissingMethodException: No signature of method: static mycompany.pyproject.mypackage.NotificationCreationService.createNotification() is applicable for argument types: (java.util.HashMap) values: [...]       
    Possible solutions: createNotification(java.util.HashMap), createNotification(java.lang.String, napa.changedetection.alert.NotificationType, java.lang.String) 
```

我尝试`InvokeHelper.invokeMethod()`了 Grails 动作的其他组合和定义，结果相似。`InvokeHelper`还有其他几种调用方法以及设置不同属性的方法，但是我还没有找到使这项工作的神奇组合，并且就 InvokeHelper 的示例代码而言，任何互联网搜索都很少出现。

理想情况下，Grails 操作不是静态的，而是使用标准`params`机制。这将允许我直接从 Grails 代码以及通过`InvokeMethod`功能从 Spring Integration 服务激活器调用相同的操作。

有没有人想过如何把它联系在一起？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T22:39:09.423

您现在不应该使用 InvokeHelper，Grails 2 在编译时为 Java 目的注入签名（动态查找器除外，但您可以猜到原因）。

在您的 Java bean 中，我将使用以下方法注入 notificationCreationService：

*   资源.groovy/xml + setter

    或者

*   构造函数+applicationContext（实现ApplicationContextAware）

使用服务参考应该可以工作，如果没有，那里有要分析的错误。

你在哪里声明你的服务激活器？

# java - 在设备上启动时调试 android 应用程序

> ID：11942777
> 
> 赞同：0
> 
> 时间：2012-08-13T21:44:11.277
> 
> 标签：java, android, eclipse

我有一个通过我网站上的 URL 打开的 android 应用程序。我要做的是，在应用程序启动时以调试模式附加 Eclipse。我可以从 Eclipse 以调试模式启动应用程序，但是当用户/另一个应用程序在设备上启动应用程序时，我不知道如何让 Eclipse 启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:56:23.887

`android.os.Debug.waitforDebugger()`在`onCreate`您的启动活动中添加调用。这将使您的应用程序在启动时等待调试附加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T22:38:37.883

如果您仔细观察，有一段时间 Eclipse 会尝试将运行时会话与调试器耦合，因此它会开始监听它，直到耦合完成。我想你每次打开应用程序时都需要触发它。

我的问题是，你为什么需要它？当您从 Web 启动应用程序时，有哪些不同的条件需要从那里进行调试？如果有的话，是否有可能用任何常量或数据库数据来伪造它们？

# javascript - Chrome for bookmarlet 中的“不安全内容”

> ID：11942780
> 
> 赞同：4
> 
> 时间：2012-08-13T21:44:21.823
> 
> 标签：javascript, jquery, twitter, bookmarklet

我开发了一个小[书签](http://www.silviolorusso.com/scrolltv/)，它工作正常，直到 chrome 上次更新。

现在，当它在 facebook 上被点击时，它会运行“不安全的内容”，它甚至不会在 twitter 上启动。

我想知道如何避免“不安全的内容”和被 chrome 屏蔽。

这是代码：

**小书签**

```
if (typeof jQuery === "undefined") {
    var script_tag = document.createElement('script');
    script_tag.setAttribute("type","text/javascript");
    script_tag.setAttribute("src","http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js");
    script_tag.onload = function() { $.getScript('http://www.silviolorusso.com/scrolltv/scrolltv.js',function(){main();}); };
    script_tag.onreadystatechange = function () {
        if (this.readyState == 'complete' || this.readyState == 'loaded')  $.getScript('http://www.silviolorusso.com/scrolltv/scrolltv.js',function(){main();});
    };
    document.getElementsByTagName("head")[0].appendChild(script_tag);
} else {
    $.getScript('http://www.silviolorusso.com/scrolltv/scrolltv.js',function(){
        main();
    });
} 
```

**注入js**

```
var status = 0;
$bottom = 100;
$position = 0;
function scrollTV() {
    if ( ($(document).scrollTop() + $(window).height() - 500 ) >= $position ) {
        $position = $position + 50;
        $('html, body').animate({scrollTop:$bottom}, 2500, 'linear', function() { 
           $bottom = $bottom + 100;
           scrollTV();
        });
    } else {
        $('html, body').stop(true);
        $('#style-scroll, #soundtrack, #atransp').remove();
        $(document).fullScreen(false);
        $('#soundtrack')[0].pause();
        status = 0;
    }
};
function start() {
    if (status == 0) {
        status = 1;
        function start2() {
            setTimeout(function() {
                $('#soundtrack')[0].play();
                $('#loading-scroll, #blackscreen').remove();
                $('html, body').animate({scrollTop:1}, 0);
                scrollTV();
            }, 1000);        
        }
        $('#title-scroll').remove();
        if (!($.browser.mozilla)) {
            $('<div id="loading-scroll" class="text-small-scroll" >Loading</div>').appendTo('#blackscreen');
        } else {
            $('<div id="loading-scroll" class="text-small-scroll" ><img src="http://www.silviolorusso.com/scrolltv/loading.png" /></div>').appendTo('#blackscreen');
        }
        if (!($.browser.mozilla)) { $(document).fullScreen(true); };
        $('#soundtrack')[0].addEventListener('oncanplay', start2(), false); 
    } else {
        status = 0;
        $('#soundtrack')[0].pause();
        $('#soundtrack, #style-scroll, #atransp').remove();
        $('html, body').stop(true);
        $(document).fullScreen(false);   
    }
}
function main() {
    if (!$('#style-scroll').length) {
        $('<script src="http://www.silviolorusso.com/scrolltv/jquery.fullscreen-min.js"> </script>').appendTo('head');
        style = "<style id=\"style-scroll\"> @font-face { font-family: 'AmericanPurpose'; src: url('http://www.silviolorusso.com/scrolltv/font/american_purpose_casual_02-webfont.eot'); src: url('http://www.silviolorusso.com/scrolltv/font/american_purpose_casual_02-webfont.eot?#iefix') format('embedded-opentype'), url('http://www.silviolorusso.com/scrolltv/font/american_purpose_casual_02-webfont.woff') format('woff'), url('http://www.silviolorusso.com/scrolltv/font/american_purpose_casual_02-webfont.ttf') format('truetype'), url('http://www.silviolorusso.com/scrolltv/font/american_purpose_casual_02-webfont.svg#AmericanPurposeCasual02Rg') format('svg'); font-weight: normal; font-style: normal; } body { overflow:hidden !important; } div#transpscreen, div#blackscreen  { position:fixed; top: 0; bottom:0; left:0; right:0; z-index:9999;} div#blackscreen {background-color: black; z-index:9990} div#title-scroll, div#loading-scroll { width:100%; text-align:center; margin-top:200px; color: white; } div#loading-scroll { margin-top: 300px; } .title-scroll { font-family: 'AmericanPurpose'; font-size: 80px; line-height:50px; color: white; font-weight: bold; text-decoration: none; } .text-small-scroll { font-family: 'AmericanPurpose'; font-weight:normal; font-size: 19px; line-height: 20px; margin-top:10px; }</style>";
        $(style).appendTo('head');
        $('<a href="#" onclick="start()" id="atransp"><div id="transpscreen"></div></a>').appendTo('body');
        if (!($.browser.mozilla)) { 
            $('<div id="blackscreen"><div id="title-scroll" class="title-scroll">ScrollTV<br/><span class="text-small-scroll">Click to play</span></div></div>').appendTo('body');
        } else {
            $('<div id="blackscreen"><div id="title-scroll" class="title-scroll"><img src="http://www.silviolorusso.com/scrolltv/title-firefox.png" /></div></div>').appendTo('body');
        }
        $('<audio id="soundtrack" loop preload="auto" autobuffer><source src="http://www.silviolorusso.com/scrolltv/soundtrack.mp3" /><source src="http://www.silviolorusso.com/scrolltv/soundtrack.ogg" /></audio>').appendTo('body');
    }
}; 
```

建议？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T21:47:12.243

您需要将所有 URL 更改为 HTTPS URL。

# java - 在java maven项目中获取当前工作资源目录

> ID：11942784
> 
> 赞同：0
> 
> 时间：2012-08-13T21:44:40.937
> 
> 标签：java, maven, junit

我目前正在做一个 JUnit 测试，该测试检查负责从/向某个文件加载/保存进程配置的功能。鉴于资源中存在特定的配置文件，该功能会从文件中加载参数。否则，该功能会尝试创建新的配置文件并保留类中编码的默认配置。现在我正在使用 .class.getResource() 方法来检查配置文件是否存在，并检索必要的信息。这种方法被证明在 maven 的“test-class”和“class”目录中都可以正常工作。但是，当文件不存在时，我在尝试保存默认配置时遇到问题，即 .class.getResource() 方法返回 null，因为资源尚不存在。

有没有办法对我的功能进行编码以评估特定对象是作为测试执行还是在生产中执行？更准确地说，我如何构建资源文件的相对路径以指向生产资源（../classes/...）或测试资源（../test-classes/..），具体取决于执行模式目前是哪个项目？

我的问题有点类似于以下[如何在 Maven 管理的 Java 项目中发现测试资源文件？](https://stackoverflow.com/questions/5477280/how-should-i-discover-test-resource-files-in-a-maven-managed-java-project)但我认为这足以保证新线程的不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:00:11.987

听起来您想要执行以下操作：

当您的代码运行时，它会尝试加载配置文件。当找不到配置文件时，您要创建配置文件。扭曲的是

*   如果您在“生产模式”下执行代码（我假设使用类似 exec-maven-plugin 或 jetty-maven-plugin 之类的东西，具体取决于代码的性质），您希望将配置文件放在 ${project.构建.输出目录}

*   如果您在“测试模式”下执行代码（例如通过surefire或故障安全），您希望将配置文件放在 ${project.build.testOutputDirectory}

我要做的是使用 ServiceLoader 模式。

您创建一个负责存储配置的 ConfigFileStore 接口。

ConfigFileStoreFactory 枚举所有实现该接口的服务（使用[ServiceLoader](http://docs.oracle.com/javase/6/docs/api/java/util/ServiceLoader.html) API 通过获取所有 /META-INF/services/com.yourpackage.ConfigFileStore 资源并从中提取类名。如果没有注册实现，那么它将实例化一个将文件存储在基于 getClass() 的路径中的默认实现（即向后工作以到达 ${project.build.outputDirectory} 请注意，它应该处理将类捆绑到 JAR 中的情况，我会假设在这种情况下配置文件可能存储在 JAR 附近）

注意：默认实现*不会*注册在 /META-INF/services

然后在 src/test/java 中扩展默认实现并在 src/test/resources/META-INF/services/com.yourpackage.ConfigFileStore 中注册该扩展实现

现在，当运行在类路径上有测试代码的代码时，将找到测试版本，这将从 ${project.build.testOutputDirectory} 中获取类的 getClass()，因为它来自测试类路径的 /META-信息/服务。

当运行在类路径上没有测试代码的代码时，默认实现将从 ${project.build.outputDirectory} 中获取一个类的 getClass()

应该做你想做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T23:07:46.963

如果我理解正确，基本上你的问题是你有一个 Maven 项目，它读取一个特定的文件（通常在单元测试期间），它决定了应用程序的行为。如果该文件不存在，您的应用程序将创建它。

, 的问题`ClassLoader.getSystemResource(...)`在于它实际上并没有扫描单个目录。相反，它正在查看 Java 的类路径以确定该特定资源的位置。如果类路径上有多个目录，它将有许多文件可能位于的区域。

从某种意义上说，`.getSystemResource(...)`是一种方式。您可以查找文件的位置，但无法获得适当的位置来放置它。

**那么当你需要把文件放在正确的位置时呢？**

您基本上有两个选择：

1.  硬编码文件的位置：没有人喜欢这样做。
2.  在类路径上扫描的位置被传递到类加载器中。例如，您可以使用第一个并在那里创建文件。

第二种选择实际上并不坏。看看这个示例代码。

```
 final Enumeration<URL> urls = ClassLoader.getSystemClassLoader().getResources("");
    if(! urls.hasMoreElements()) {
        LOG.error("No entries exist on the class path!");
        System.exit(1);
    }
    final File configFile = new File(urls.nextElement().getFile(), "config.xml");
    configFile.createNewFile();
    LOG.info("Create a new configuration file: " + configFile.getPath());
    System.exit(0); 
```

这将配置文件解析为我的目标文件夹中：`..\target\classes\config.xml`

由你决定你做什么；如果您觉得需要更多，很乐意提供更多提示和建议。

# facebook - 在将 URL 提交到 Facebook 调试工具之前，内容上的“点赞”按钮将不起作用

> ID：11942785
> 
> 赞同：0
> 
> 时间：2012-08-13T21:44:50.453
> 
> 标签：facebook, drupal, drupal-7, facebook-like, pantheon

[我正在解决一个问题，即除非将 URL 提交到Facebook 调试工具](https://developers.facebook.com/tools/debug)，否则 Like 按钮在我的网站上不起作用。

当我像看到两个请求触发comment_widget_shell.php 一样时。一次成功（找到 302），而另一个失败，显示状态“（已取消）”并输入“待定”：

请求成功：

```
Request URL:http://www.facebook.com/plugins/comment_widget_shell.php?locale=en_US&master_frame_name=f236db264&offsetX=0&sdk=joey
Request Method:GET
Status Code:302 Found 
```

失败的请求：

```
Request URL:https://www.facebook.com/plugins/comment_widget_shell.php?locale=en_US&master_frame_name=f236db264&offsetX=0&sdk=joey 
```

在撰写此问题时，这是一个示例 URL，其中 like 失败：

[http://www.zujava.com/geisha-makeup](http://www.zujava.com/geisha-makeup)

我最初认为这是[Stack Overflow 问题](https://stackoverflow.com/questions/7975498/submitting-object-to-facebook-via-open-graph-doesnt-work-but-then-works-after)，因为该站点运行在与 Heroku 有点相似的平台上，但对于 Drupal（Pantheon），我无法在本地重现该问题。但是，我联系了 Pantheon 支持，他们报告说 Pantheon 上不存在 Heroku 限制。

我不确定我可以使用哪些其他工具来调试它。我的文章页面从 Facebook Debugger 获得了干净的报告。关于我可以深入研究的任何想法或提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:54:12.273

我在万神殿上运气不错。如果您只是想在 drupal 上获得一个赞按钮，为什么不使用[http://drupal.org/project/fb_social/](http://drupal.org/project/fb_social/)我在 d7 和 d6 中使用过它，我从来没有遇到过问题。

万神殿应该能够肯定地处理对 facebook 的请求

谢谢

缺口

# xml - 在同一个文件中多次使用相同的 XSLT 代码

> ID：11942787
> 
> 赞同：1
> 
> 时间：2012-08-13T21:44:59.623
> 
> 标签：xml, xslt

我有一些 XSLT 代码，如下所示

```
 <xsl:choose>
      <xsl:when test="v:Values = 'true'">
        <xsl:text>A</xsl:text>
      </xsl:when>
      <xsl:otherwise>
        <xsl:text>B</xsl:text>
      </xsl:otherwise>
...
    </xsl:choose> 
```

我想在同一个文件中多次使用这段代码。我可以将它放在模板中并在需要时调用它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T00:30:44.053

是的 - 它叫做 xsl:call-template 。

任何模板都可以命名。该名称可以由命名空间限定。例如...

```
<xsl:template match="some match condition" name="call-me">
  bla bla bla (template content)
</xsl:template> 
```

如果模板有名字，你甚至可以像这样省略匹配条件......

```
<xsl:template name="call-me">
 <xsl:param name="phone-number" />
  bla bla bla (template content)
</xsl:template> 
```

命名模板具有任意数量的参数。上述片段是声明一个名为 phone-number 的参数的示例。在模板的序列构造函数中，您将以与变量相同的方式引用此参数，就像这样...

```
$phone-number 
```

要调用命名模板，请在序列构造函数中使用 xsl:call-template。例如 ...

```
<xsl:call-template name="call-me">
 <xsl:with-param name="phone-number" select="'55512345678'" />
</xsl:template> 
```

请注意，`xsl:with-param`用于传递实际参数值。

请注意，在 XSLT 2.0 中，您还可以定义可从 XPATH 表达式中调用的函数。在某些情况下，函数可能是命名模板的更好替代方案。

参考：

1.  [XSLT 2.0 规范：命名模板](http://www.w3.org/TR/xslt20/#element-call-template)。
2.  [XSLT 1.0 规范：命名模板](http://www.w3.org/TR/xslt/#named-templates)。

# c# - 如何根据 xpath 中的日期范围选择节点？

> ID：11942793
> 
> 赞同：1
> 
> 时间：2012-08-13T21:45:23.823
> 
> 标签：c#, .net, xpath

我的 XML： [http ://www.lakelandcollege.ca/rustlers/all-news.xml](http://www.lakelandcollege.ca/rustlers/all-news.xml)

我正在使用以下代码选择一年的项目节点：

```
 XmlDocument xmlDoc = new XmlDocument();
xmlDoc.Load(Server.MapPath("/rustlers/all-news.xml"));
DataListArchive.DataSource = xmlDoc.SelectNodes("/items/item[contains(date,'2011')]");
DataListArchive.DataBind(); 
```

但现在我需要选择日期为 2011 年 4 月 1 日和 2012 年 3 月 31 日的项目节点。如何将 XML 中的日期转换为实际日期值并将其与范围进行比较？

我会喜欢这样的东西：

```
 XmlDocument xmlDoc = new XmlDocument();
xmlDoc.Load(Server.MapPath("/rustlers/all-news.xml"));
DataListArchive.DataSource = xmlDoc.SelectNodes("/items/item[date between '01-APR-2011' and '31-MAR-2012']");
DataListArchive.DataBind(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:26:58.047

在 XPath 1.0 中没有将字符串转换为日期或操作日期的通用方法 - 对于您的特定情况（检查日期是在特定年份的 3 月还是 4 月）：

```
/items/item[(contains(date,'April') or contains(date,'March')) and contains(date,'2010')] 
```

*** 更新 ***

看过代码后，我想说最简单的方法是使用 XPath 获取所有`item`元素，然后使用 C# 进行过滤 - 即获取`date`子元素的值，使用将其转换为日期时间`DateTime.Parse`，然后执行C# 代码中的比较。

可以将扩展函数添加到 .NET XPath 以执行您需要的操作（请参阅[此](http://msdn.microsoft.com/en-us/library/ms950806.aspx)内容），但它非常复杂，在这种情况下可能不值得付出努力。

# wordpress - 在 Wordpress 动态菜单中丢失导航活动状态

> ID：11942798
> 
> 赞同：0
> 
> 时间：2012-08-13T21:45:41.980
> 
> 标签：wordpress, wordpress-theming

在以下部分中：

[http://www.zimmernutrition.com.php53-23.ord1-1.websitetestlink.com/learning-center/](http://www.zimmernutrition.com.php53-23.ord1-1.websitetestlink.com/learning-center/)

在侧边栏中，如果单击“健康文章”并单击其中一个类别，则“学习中心”的活动“橙色”状态将丢失。文章是自定义帖子类型，类别是相关的自定义分类。

不确定菜单是否编码错误、CPT、自定义分类法或某种组合。

谢谢你的帮助。

布雷特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:50:48.320

只是为了记录我的作品。我正在使用 Chrome，但其他浏览器很可能会出现问题。

我认为你的 CSS 在`current-menu-item`' 等。只需要更多的伪类型。

**你的：**

```
#main-navigation .current-menu-item > a:link,
#main-navigation .current-menu-ancestor > a:link,
#main-navigation .current_page_item > a:link,
#main-navigation .current_page_parent > a:link,
#main-navigation .current_page_ancestor > a:link {
  background: #e69433 url(images/template/nav-link-bg-over.jpg) left top repeat-x;
}

#main-navigation .current-menu-item > a,
#main-navigation .current-menu-ancestor > a,
#main-navigation .current_page_item > a,
#main-navigation .current_page_parent > a,
#main-navigation .current_page_ancestor > a {
  color: #000;
} 
```

**我会像这样组合它们：（** *减去额外的课程）*

```
#main-navigation .current-menu-item a,
#main-navigation .current-menu-item a:link,
#main-navigation .current-menu-item a:visited,
#main-navigation .current-page-parent a,
#main-navigation .current-page-parent a:link,
#main-navigation .current-page-parent a:visited {
  background: #e69433 url(images/template/nav-link-bg-over.jpg) left top repeat-x;
  color: #000;
}

#main-navigation .current-menu-item a:hover,
#main-navigation .current-menu-item a:active,
#main-navigation .current-page-parent a:hover,
#main-navigation .current-page-parent a:active {
  background: orange url(images/template/nav-link-bg-over.jpg) left top repeat-x;
  color: pink;
} 
```

这`>`也是非现代浏览器无法理解的东西。完全删除它可能更安全。

**- 更新 -**

仔细查看父页面和子页面上的列表项，这就是您所拥有的：

*父项* `<li id="menu-item-142" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-15 current_page_item menu-item-142">`

*子页面* `<li id="menu-item-142" class="menu-item menu-item-type-post_type menu-item-object-page current-page-ancestor current-menu-ancestor current-menu-parent current-page-parent current_page_parent current_page_ancestor menu-item-142">`

**我已经调整**了上面的样式以匹配必要的类。

# ios5 - 将 SDWebImage 与 YouTube Api 集成

> ID：11942799
> 
> 赞同：0
> 
> 时间：2012-08-13T21:45:43.617
> 
> 标签：ios5, youtube-api, sdwebimage

我正在尝试将 SdWebImage 与 Youtube Api 集成，以获取缩略图图像以缓存它们，从而摆脱 UITableView 中的滚动问题。问题是 Youtube API 提供一个用于 Thumbnail NSDATA 的 URL，它可以转换回 UIImage 对象但是SDWebImage 是获取图像的 URL，以最有效的方法管理图像。

Youtube API 方法：

```
NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:[[thumbnails objectAtIndex:0] URLString]]];
UIImage * image = [UIImage imageWithData:data]; 
```

SDWebImage 方法

```
[cell.imageView setImageWithURL:[NSURL URLWithString:[_objects objectAtIndex:indexPath.row]]
               placeholderImage:[UIImage imageNamed:@"placeholder"]]; 
```

请告诉我们如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:21:22.850

I think you are overthinking this problem. You should be able to just do this:

```
NSURL *thumbnailURL = [NSURL URLWithString:[[thumbnails objectAtIndex:indexPath.row] URLString]]];

[cell.imageView setImageWithURL:thumbnailURL
               placeholderImage:[UIImage imageNamed:@"placeholder"]]; 
```

# jquery - 使用 jQuery 移动到无序列表中的下一个元素

> ID：11942804
> 
> 赞同：0
> 
> 时间：2012-08-13T21:46:19.567
> 
> 标签：jquery, list

我有一个图像列表，我想使用下一个/上一个按钮循环浏览。但我真的很难做到这一点。到目前为止，无论我在单击下一个链接时使用的是什么图像，我都设法继续恢复到第一张图像。

列表的 html 是 ..

```
<div class="wrapper">

<div class="slider-container">
    <ul class="wineslider">
        <li>
            <img src="assets/img/shop/redwine/bottle.png" alt="1">
            <div class="info">
                <p>I am wine information 1 </p>
            </div>
        </li>
        <li>
            <img src="assets/img/shop/redwine/bottle.png" alt="2">
            <div class="info">
                <p>I am wine information 2</p>
            </div>
        </li>
        <li>
            <img src="assets/img/shop/redwine/bottle.png" alt="3">
            <div class="info">
                <p>I am wine information 3</p>
            </div> 
        </li>
.....

<a href="#" class="previous">Previous</a>
    <a href="#" class="next">Next</a>

</div>

</div> 
```

我一直在摆弄的jquery是

如果单击它们，这会滑动图像 - 这一点似乎工作正常。

```
$(document).ready(function() {
$('.wineslider li').bind({
    click: function() {
      $('.wineslider li').stop().animate({'width':'60px'},600);
      $(this).stop().animate({'width':'420px'},600); // Width of slideout box
      $('.info').css('display','block');
    },
});

// Find number of slides
var count   = $('li').length;
//alert(count);

// Set current slide number
var curr    = 1;
ert(curr);

}); 
```

下一个按钮

```
var active = 0; // starts at zero
var list = $('ul.wineslider');
$("a.next").click(function(event){

event.preventDefault();         // cancel click through
var currentElement = $('.wineslider li');
var i = $(currentElement).index();

currentElement = currentElement.next();
scrollTo(currentElement);  
$('.wineslider li').stop().animate({'width':'60px'},600);
$(currentElement).stop().animate({'width':'420px'},600); // Width of slideout box
$('.info').css('display','block');

}); 
```

先谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T21:52:06.157

var currentElement 正在选择一个 li，但未指定哪个 li。做一些事情，比如为活动的 li 添加一个“选择”的类。然后你可以做 current elem = $('.selected')

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:53:29.383

这里的问题是 currentElement 是一个包含所有 li 集合的 jQuery 对象。这不是当前选择的特定 li。

在这种情况下，您可能希望向当前的 li 元素添加一个类或其他东西，这样您就可以像这样更好地处理它。

```
currentElement = $('.wineslider li.current');
nextElement = currentElement.next(); 
```

# language-agnostic - Is throwing and catching exceptions only an improvement of readability instead of using if statments on the return value?

> ID：11942821
> 
> 赞同：0
> 
> 时间：2012-08-13T21:47:07.547
> 
> 标签：language-agnostic, if-statement, error-handling, try-catch

Is there any reason why it's better to use a try/catch statement when one can check to see if a value that is designated to indicate a problem is returned?

For example a function prime factors a number. If a negative integer is passed to it would it be "better" for an exception to be thrown or a particular value returned (that would never be a legitimate value, say -1).

If a function doesn't need to return something would it be less efficient to return true on success and false on failure, as opposed to throwing something?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:15:41.267

Exceptions can propagate up across multiple call frames at a time without any extra code in the intervening call frames to check for error conditions/returns. This means they have the potential to yield better performance (at least in the non-error case) than code that's based on return value checks at every call level. That's probably the main concrete benefit.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T20:23:45.783

The use of a Try/Catch versus returning a boolean value has been discussed for a while. I found this [StackOverflow article](https://stackoverflow.com/questions/7944129/true-coding-convention-about-usings-try-catches) that might add some insight. For myself I tend to use both the Try/Catch and the boolean return. It depends when a method is being called. As well, sometimes it is best to let an error bubble up the stack so it can be caught and dealth with effieciently.

Finally, if your find you are not getting any answers here you can also try [https://softwareengineering.stackexchange.com/](https://softwareengineering.stackexchange.com/)

# hadoop - 在文件中存储有关 Hadoop 作业的信息

> ID：11942825
> 
> 赞同：0
> 
> 时间：2012-08-13T21:47:38.030
> 
> 标签：hadoop

我是 Hadoop 新手，想知道如何写入通用输出文件以存储有关最近执行的作业的元数据。

目前，如果我正在处理文件 a、b、c 和 d ；我有一个自定义计数器，它添加了有关已处理文件数量的信息，但我想知道所有已处理的文件名。

对最好的方法有什么意见吗？分布式缓存可以提供帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:42:00.330

[Context.setStatus](http://hadoop.apache.org/mapreduce/docs/current/api/org/apache/hadoop/mapreduce/TaskAttemptContext.html#setStatus%28java.lang.String%29)

会有帮助吗？

像这样使用：

```
Context.setStatus("Processed "+file); 
```

# multithreading - 为什么即使在抢占式多任务操作系统（Windows 7）上线程也会饿死

> ID：11942827
> 
> 赞同：10
> 
> 时间：2012-08-13T21:47:55.607
> 
> 标签：multithreading, delphi, winapi, delphi-7, multitasking

我编写了一个 Win32 应用程序（在 Delphi-7 中，它是 32 位使用 TThread 类）来创建 100 个线程。每个线程在恢复时将连续（在循环中）增加与线程对象关联的 64 位计数器（因此不会锁定或共享数据）。

如果您让系统运行 10 到 15 秒然后停止，您应该会看到每个线程中的计数大致相同。但我观察到，81 个线程运行了 4 亿次以下的循环，其余的循环超过了 9.5 亿次。与最快的 21.11 亿相比，最慢的线程只有 2.3 亿。

根据 MSDN，抢占式多任务处理处于线程级别（而不是进程级别），因此我的每个线程都应该以循环方式获得其时间片。我在这里缺少什么，为什么会出现这种差异？

Edit1：机器配置：Intel i7 Quad Core 3.4GHz，超线程开启（一次 8 个活动线程）。运行 Windows-7 64 位专业版（并且测试应用程序是 32 位）

Edit2（线程代码）：测试应用程序是在启用优化且没有任何调试信息的情况下构建的。在 IDE 之外运行测试应用程序。

```
type

  TMyThread = class(TThread)
  protected
    FCount: Int64;
  public
    constructor Create;
    procedure Execute; override;
    property Count: Int64 read FCount;
  end;

{ TMyThread }

constructor TMyThread.Create;
begin
  inherited Create(True);
  FCount := 0;
end;  

procedure TMyThread.Execute;
begin
  inherited;
  while not Terminated do
  begin
    Inc(FCount);
  end;
end; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T22:14:09.030

对于内核来说，循环调度是一种显而易见的策略。然而，这不是 Windows 调度程序的工作方式。在 Windows 9x 时代，它曾经是一个非常有能力为各种虚拟机提供同等时间的调度程序。但不是在由 Dave Cutler 小组启动的 NT 分支中，调度纯粹基于*优先级*。

无论哪个线程具有最高优先级，都会获得 CPU。Windows 中有另一段代码修改线程的优先级，从创建线程时获得的默认优先级修改它。该代码知道诸如拥有前台窗口的线程之类的东西。或者一个线程正在等待收到信号的同步对象。或者尝试解决优先级反转问题的更奇怪的调度问题。随机给一个线程一个运行的机会，即使它不是轮到它。

首先专注于编写健全的代码。启动一百个线程并不是一件很明智的事情。您正在尝试消耗机器实际上没有可用的资源，没有人拥有具有一百个核心的机器。然而。2 的幂，首先获得一台 128 核的机器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T14:02:18.090

我已经复制并确认了您的结果。此外，禁用线程优先级提升不会改变分布。[GetThreadTimes](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683237%28v=vs.85%29.aspx)报告具有较高 Values 的线程占用了更多 UserTime，反之亦然，而 KernelTime 似乎与 Values 没有相关性。

```
Thread 97: 1081,5928 Ke:0 Us:25116161
Thread 98: 1153,8029 Ke:0 Us:26988173
Thread 99: 704,6996  Ke:0 Us:16848108 
```

显然，有些线程确实比其他线程运行得更频繁。

我没有绘制结果图，但我想我们看到的是[正态分布](http://en.wikipedia.org/wiki/Normal_distribution)，这意味着结果取决于许多因素，其中一些是随机的。

我尝试禁用超线程（这有点平滑结果），然后为每个线程分配一个物理处理器（通过使用[SetThreadAffinityMask](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686247%28v=vs.85%29.aspx)）。在第二种情况下，价值观彼此更接近。

```
SetThreadAffinityMask(Self.Handle, 1 shl (FIndex mod 4)); 
```

我可以理解在超线程系统上运行如何使某些线程“不走运”：它们被安排与同一物理处理器上的其他线程竞争，并且由于对这个虚拟内核的[“软亲和力”](http://www.windowsitpro.com/content1/topic/inside-the-windows-nt-scheduler-part-2/catpath/internals-and-architecture/page/2)它们可以运行一次又一次，因此得分低于其他人。

但至于为什么将每个线程绑定到一个固定内核有助于非超线程系统，我不知道。

可能还涉及其他随机事物，例如其他进程在内核上的活动。如果与同一核心关联的其他进程的线程突然唤醒并开始做一些（相对）繁重的工作，线程可能会“不走运”。

不过，这一切都是猜测。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T11:36:42.473

Windows 7 专为*用户*领域而设计。当你的第一个线程想要工作时，操作系统会给它一个时间片。毕竟，您，用户，才刚刚开始。当连续第 50 个线程（来自同一个进程！）想要工作时，更高优先级的线程（由 Windows 7 本身控制的后台进程）介入。这种情况发生的方式使得**一些**线程更*幸运*。

你和我真的不想要一个根据用户登陆进程的突发奇想来分配 CPU 时间的个人操作系统。我很想知道 2008 R2 服务器是如何处理这个问题的。您还可以使用“高级”选项卡设置：“选择如何分配处理器资源”。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-27T15:22:29.333

这里有一些很好的推理..但是有一些功能需要考虑。Windows 正在尝试使用软件进行多任务处理。你的硬件不是多任务处理，它使用能力来做并行处理系统会做的事情。在windows下，它优先。在很多方面......而且它令人困惑。

让我这样解释。我有一个小程序可以监视我的核心以供使用。当 Windows 加载时，您会认为所有内核都会被使用。不。随着 Windows 的加载，其他内核开始使用。然后你会想，当 Windows 加载时，它会加速加载，因为它可以访问内核。它不会加速。它不使用核心是全速加载更快。即使 Windows 在加载和运行时将程序推向 1 个核心，它也会等待它们完成。如果它使用所有内核来处理每个程序，它使用软件（大约比硬件慢 100 倍）来组装另一端的部件。很久以前，英特尔想将硬件更改为并行处理，MS 说“不”，因为他们的软件不是为它设计的。现在他们正试图将基于串行的硬件设计推向 N 点。甚至在 MS 买了 NT 软件之后。最近，他们忘记了使用它的大部分设计。需要进行一些硬件更改。需要编程语言更改（MS创建了编程语言）并且需要重新设计windows的核心。没有改变。它需要返回并从头开始。祝你好运。告诉你这个想法有多古老...... VIVA La' Amiga。

# javascript - 将项目添加到表单库时自动刷新 SharePoint 网站

> ID：11942828
> 
> 赞同：0
> 
> 时间：2012-08-13T21:47:57.830
> 
> 标签：javascript, sharepoint, refresh, web-parts, form-library

我有一个关于在向其中添加项目时自动刷新 SharePoint 表单库的问题。我们公司内部有一个业务团队，团队中的任何人都可以填写特定的 InfoPath 表单。填写并提交该表单后，它会保存到上述 SharePoint 表单库中。

当任何用户提交这样的表单时，其他用户希望知道它已经发生并且他们几乎总是打开浏览器并指向这个特定的 SharePoint 表单库。这些表单提交及其包含的数据在一定程度上是时间紧迫的，因此这是团队中每个人了解提交信息的最新信息的重要方式。

有谁知道在 InfoPath 中是否可以使用这样的工作流？我已经用谷歌搜索了这个问题，我发现了很多关于使用 SPUtility 类的功能重定向到同一页面的有用建议（这似乎确实有效），但我想刷新/重定向整个页面，而不仅仅是SPUtility 类显然负责的弹出窗口。我还看到一些结果建议使用包含一些 JavaScript 的内容编辑器 Web 部件来刷新页面，然后通过工作流或事件接收器访问该内容编辑器。有没有人有解决此类问题的经验或有一些想法？我不是在寻找任何人为我编写解决方案 - 我只需要从对 SharePoint 更有经验的人那里推动正确的方向。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:40:43.683

我建议使用一些 JavaScript 定期将页面重定向到自身。如果您想变得华而不实，您可以使用[客户端对象模型](http://msdn.microsoft.com/en-us/library/ee857094.aspx)来查询列表以获取最后修改项的最后修改日期。如果情况发生变化，请刷新，或者您可以使用[通知 API](http://community.zevenseas.com/Blogs/Robin/Lists/Posts/Post.aspx?ID=119)来显示一个不错的“通知”，也许使用刷新按钮来重新加载页面？

# java - 在 JSP 中上传和保存文件

> ID：11942830
> 
> 赞同：1
> 
> 时间：2012-08-13T21:48:06.377
> 
> 标签：java, spring, hibernate, jsp, file-upload

我正在尝试使用带有 Spring/hibernate 的[Apache Common FileUpload在 JSP 中上传图像。](http://commons.apache.org/fileupload/download_fileupload.cgi)图片上传效果很好。我的项目文件夹位于以下路径。

```
E:\Project\SpringHibernet\wagafashionNew\wagafashion 
```

解析请求后，我正在尝试将上传的图像保存到以下文件夹中。

```
E:\Project\SpringHibernet\wagafashionNew\wagafashion\web\images 
```

我已经尝试过各种方式来获得这条道路，但我无法成功。

指定类似如下的相对路径

```
File f=new File("wagafashion/web/images/image_file.xxx"); 
```

行不通。

有没有办法检索以下路径？

```
E:\Project\SpringHibernet\wagafashionNew\wagafashion\web\images 
```

或者用构造函数指定一个相对路径`new File("relative_file_path")`？

我是否将文件保存到错误的目录中？在那种情况下，要保存哪些项目文件夹文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T21:59:40.930

也许。

一种方法是让 ServletContext 获取 getRealPath("/web/images")，并查看它是否返回了某些东西——它不是必须的，但它可能会。如果是这样，那么您可以将图像放在那里。

然而。

如果您像大多数人一样使用 WAR 进行部署，那么所有这些映像将在您重新部署后立即消失，因为大多数容器都会使用 WAR 进行部署并将其分解到文件系统中。执行此操作之前目录中的任何内容（即上次部署时的代码和工件）都将再见，因此您将“丢失”您的图像。

您可以通过执行目录部署来缓解这种情况，即部署已展开的目录。然后你知道应用程序的位置（因为你把它放在那里）。然后，您可以在进行更改时将该目录与新代码同步（尤其是您可以删除不再需要的旧内容）。

除此之外，不同的容器有不同的机制将外部目录映射到应用程序空间。Glassfish 具有您可以使用的“备用文档根”的概念。这允许您在部署之外有一个位置，静态内容可以存在并且仍然由容器提供服务，但在重新部署时不会被清除。

最后，您始终可以自己做，流式传输自己的图像等，而完全不依赖容器。通过这种方式，您可以将图像放在文件系统、数据库、内存中等等。

# reporting-services - 如何在 SSRS 的文本框中显示选择多值参数的子集

> ID：11942835
> 
> 赞同：3
> 
> 时间：2012-08-13T21:48:15.880
> 
> 标签：reporting-services, vb6, bids

`Faculty`我有一个在报告上调用的多值参数。我想在报告顶部的文本框中显示选择。显而易见的解决方案是：

```
JOIN(Parameters!Faculty.Label,", ") 
```

我遇到的问题是列表中的第一个选项（默认）是“所有教师”。这与 SSRS 提供的“全选”复选框不同。我们创建了这个硬编码的“All”选项，因为它在参数屏幕上看起来更清晰（用户看到“All Faculty”而不是“Adam, Arbor, Altman...”等）。如果用户保留此选项并进行任何其他选择，我们假设他们仅选择其他项目并且存储过程忽略“全部”选择​​。

所以我想显示这样的东西：

```
IIF(Parameters!Faculty.Value(0) = "0000000", [*display all selections except value 0*], (JOIN(Parameters!Faculty.Label,", ")) 
```

方括号中的部分是我遇到的问题。该`0000000`值表示“所有教员”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T20:42:43.047

OP在对原始问题的评论中回答：

> 我最终使用了子字符串。如果其他阅读本文的人需要最终代码，这里是：

```
IIF(Parameters!Faculty.Count < 6,
IIF(Parameters!Faculty.Value(0) = "0000000",
IIF(Parameters!Faculty.Count = 1, (JOIN(Parameters!Faculty.Label,";
")), (JOIN(Parameters!Faculty.Label,"; ").Substring(13))),
(JOIN(Parameters!Faculty.Label,"; "))), "Multiple") 
```

> 我添加了一个检查，这样它一次最多只能显示 5 个，否则它会显示“多个”。我做了 Substring(13) 因为“All Faculty;”是 13 个字符，包括空格。
> 
> 上面的解决方案最初有效，但当字符串少于 14 个字符时失败（由于 IIF）。你让我走上了正确的道路，我想出了一个相当优雅的解决方案：

```
Switch(Parameters!Faculty.Count > 5, "Multiple Selected",
Parameters!Faculty.Count <= 5,
Replace((JOIN(Parameters!Faculty.Label,"; ")),"All Faculty; ",
""))'code' 
```

# php - symfony2 registerNamespaces中的'\'和'\\'有什么区别？

> ID：11942840
> 
> 赞同：3
> 
> 时间：2012-08-13T21:48:55.130
> 
> 标签：php, symfony

这两个代码片段有什么区别。第一个带有`\` ，第二个带有`\\`。

第一：

```
<?php
// File: app/autoload.php
$loader->registerNamespaces(array(
    'Knp\\Component'      => __DIR__.'/../vendor/knp-components/src',
    'Knp\\Bundle'         => __DIR__.'/../vendor/bundles',
    // ...
)); 
```

第二个：

```
<?php
// File: app/autoload.php
$loader->registerNamespaces(array(
    'Knp\Component'      => __DIR__.'/../vendor/knp-components/src',
    'Knp\Bundle'         => __DIR__.'/../vendor/bundles',
    // ...
)); 
```

它们是不同的还是它们的工作方式相同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T00:11:41.970

反斜杠在双引号字符串中具有特殊含义：它用于转义[各种字符](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.double)（例如`\n`and `\r`）。

在单引号字符串中，反斜杠用于转义文字引号（例如`echo 'I\'m';`）和反斜杠本身。

更好的做法是在命名空间字符串中使用双反斜杠，以防止由于字符转义而可能出现的任何错误。除此之外，它们是相同的：

```
// outputs: Foo\Bar\Baz
echo 'Foo\Bar\Baz';

// outputs: Foo\Bar\Baz
echo 'Foo\\Bar\\Baz';

// The autoloader would not be able to find the correct file
// outputs: Foo
//          ot    hat
echo "Foo\not\that"; 
```

# c - ANSI C 中的树数据结构

> ID：11942841
> 
> 赞同：0
> 
> 时间：2012-08-13T21:49:07.310
> 
> 标签：c, data-structures

如何在 ANSI C (*) 中实现树？

```
struct Element
{
    ...
    struct Element *pChildElements; // Use dynamic array?
}; 
```

(*) 我的意思是树的最一般定义（不是二叉树）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T22:09:28.870

最好的实现方法（有很多）可能取决于特定的应用程序。例如，在某些应用程序中，将子节点或子指针存储在数组中可能更可取，而在其他应用程序中则完全没有必要。你真的需要对孩子进行基于索引的随机访问吗？如果是这样，请使用数组。

实现任意树的经典非数组方法是在每个节点中存储两个指针：一个指向*第一*个子节点的指针和一个指向*下一个*兄弟节点的指针。

```
struct Element
{
  ...
  struct Element *p_first_child;
  struct Element *p_next_sibling;
}; 
```

即每个节点本质上都包含一个指向其子节点*列表*的指针。

例如，具有 3 个子节点的节点由以下链接结构表示

```
 Node
     |
  (first child)
     |
     V
   Child1 --(next sibling)--> Child2 --(next sibling)--> Child3 
```

此实现可以通过在每个节点中仅使用两个指针来存储任何树。不需要额外的数组。由于子节点存储在列表中，因此只能按顺序访问它们。

从这种方法得出的有趣观察结果是，可以将生成的数据结构视为*二叉树*，即任意树可以用*等效*的二叉树表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:59:25.487

您在实现元素结构方面做得很好，但尝试使用二叉树或 B-Tree 来避免动态分配/释放。

您还将提供一组函数来插入/删除/初始化/搜索/排序/枚举树。

你可以想出一个名字，比如 AddToMyBTree（指向树头的指针，新元素）

如果您愿意，您可以提供比通常操作更多的功能。

我想我误解了你的问题：如果你想枚举你肯定会使用递归的树元素，你还需要用空对象终止子元素列表或添加额外的元素和子元素。

```
ProcessNode(element* pElement)
{
    element* pChild = pElement.pChildElements;

    // process the element here

    // then begin to process the child elements.
    while (pChild)
    {
        ProcessNode(pChild);
        pChild++;
    }
} 
```

请记住，您可以将指针传递给处理元素的函数，以便该枚举器可以通用您的树。

# php - 谁应该处理复杂查询中的条件，数据映射器还是服务层？

> ID：11942842
> 
> 赞同：18
> 
> 时间：2012-08-13T21:49:13.740
> 
> 标签：php, domain-driven-design, datamapper

[这个问题](https://stackoverflow.com/questions/6624704/data-mapper-pattern-complexe-query-from-service-layer)很好地消除了我对此事的困惑，但我很难找到关于服务层的确切限制应该是什么的可靠来源。

对于此示例，假设我们正在处理书籍，并且我们希望按作者获取书籍。`BookDataMapper`可以有一个接受条件的通用方法`get()`，例如书籍的唯一标识符、作者姓名等。这个实现是相当简单的（逻辑上），但是如果我们想要有多个条件需要更复杂的查询呢？

假设我们想要获取某个作者在特定出版商下撰写的所有书籍。我们可以扩展该`BookDataMapper->get()`方法以解析出多个条件，或者我们可以编写一个新方法，例如`BookDataMapper->getByAuthorAndPublisher()`.

是让服务层直接调用这些[更具体的]方法，还是在调用`BookDataMapper->get()`具有多个条件的更通用的方法之前解析条件？在后一种情况下，服务层将完成更多的逻辑“繁重工作”，从而使数据映射器相当简单。前一个选项会将服务层几乎完全减少为一个中间人，将条件逻辑留给数据映射器，如`BookDataMapper->getByAuthorAndPublisher()`.

让服务层解析条件的明显问题是某些域逻辑会从数据映射器中泄漏出来。[（这在此处](https://stackoverflow.com/questions/6624704/data-mapper-pattern-complexe-query-from-service-layer#comment7833999_6626011)的链接问题中进行了解释。但是，如果服务层要处理这些条件，则逻辑不会使其脱离模型层；`$book_service->getByAuthorAndPublisher()`无论如何，控制器都会调用。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-13T22:15:31.050

> [*数据映射器*模式只告诉你它应该做什么，而不是它应该如何实现。
> 因此，本主题中的所有答案都应被视为主观的，因为它们反映了每个作者的个人偏好。]

我*通常*尽量保持映射器的界面尽可能简单：

*   `fetch()`，检索域对象或集合中的数据，
*   `save()`, 保存（更新现有的或插入新的）域对象或集合
*   `remove()`，从存储介质中删除域对象或集合

我将条件保留在域对象本身中：

```
$user = new User;
$user->setName( 'Jedediah' );

$mapper = new UserMapper;
$mapper->fetch( $user );

if ( $user->getFlags() > 5  )
{
    $user->setStatus( User::STATUS_LOCKED );
}

$mapper->save( $user ); 
```

这样，您可以有多个检索条件，同时保持界面清洁。

这样做的缺点是您需要一个从域对象中检索信息的公共方法才能拥有这样的`fetch()`方法，但无论如何您都需要它来执行`save()`.

没有真正的方法来实现映射器和域对象交互的*“告诉不要问”*经验法则。

至于*“如何确保您确实需要保存域对象？”* [，您可能会想到，这里](https://stackoverflow.com/a/10988966/727208)已经介绍了它，并在注释中提供了大量的代码示例和一些有用的部分。

## 更新

如果您希望处理对象组，则应该处理不同的结构，而不是简单的*Domain Objects*。

```
$category = new Category;
$category->setTitle( 'privacy' );

$list = new ArticleCollection;

$list->setCondition( $category );
$list->setDateRange( mktime( 0, 0, 0, 12, 9, 2001) );
// it would make sense, if unset second value for range of dates 
// would default to NOW() in mapper

$mapper = new ArticleCollectionMapper;
$mapper->fetch( $list );

foreach ( $list as $article )
{
    $article->setFlag( Article::STATUS_REMOVED );
}

$mapper->store( $list ); 
```

在这种情况下，集合是美化数组，能够接受不同的参数，然后将其用作映射器的条件。当映射器试图存储集合时，它还应该让映射器从这个集合中获取列表*更改的域对象。*

在这种情况下，映射器应该能够在所有*可能的*条件下构建（或使用预设的）查询（作为开发人员，您将了解所有这些条件，因此您不需要使其在无限的条件下工作）和为该集合包含的所有未保存的域对象更新或创建新条目。

[**注意：**在某些方面，您可以说映射器与构建器/工厂模式有关。目标不同，但解决问题的方法非常相似。]

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T21:58:12.020

我通常更喜欢这个更具体，比如：

```
BookDataMapper->getByAuthorAndPublisher($author, $publisher) 
```

那是因为我不需要重新发明 SQL。数据库对此更好，并且数据映射器在这里负责应用程序的其余部分也不需要知道任何关于事物如何存储或查询的具体内容。

如果你让它更有活力，你很容易倾向于通过界面提供太多的功能。不好。

并查看您的应用程序。您会看到，不会有太多不同的查询。对于数据的主要部分，如果有的话，通常是大约 5-10 个例程。它的编写速度甚至比考虑一些实际上属于它自己层的动态系统要快得多。

# jquery - 修复了 jQuery Mobile 的标题导航栏问题

> ID：11942845
> 
> 赞同：0
> 
> 时间：2012-08-13T21:49:38.513
> 
> 标签：jquery, jquery-mobile

我正在尝试在我的应用程序中实现一个固定的导航栏，但我遇到了导航栏不显示的问题。它似乎出现折叠，请参阅下图以供参考：

![在此处输入图像描述](../Images/a1ea10f2c8b20140df613e340df0cd1b.png)

它应该看起来像这样：

![在此处输入图像描述](../Images/7f3ec9ea5d37462eceb6c957b1f80a89.png)

这是我正在使用的相关代码：

```
<div data-role="header" data-id="header" data-position="fixed">
            <div data-role="navbar">
                <ul>
                    <li><a href="index.html" data-role="button" data-icon="b" data-inline="true" data-iconpos="notext" class="ui-btn-right"></a></li>
                    <li><a href="index.html" data-role="button" data-icon="star" data-inline="true" data-iconpos="notext" class="ui-btn-right"></a></li>
                    <li><a href="index.html" data-role="button" data-icon="grid" data-inline="true" data-iconpos="notext" class="ui-btn-right"></a></li>
                    <li><a href="index.html" data-role="button" data-icon="search" data-inline="true" data-iconpos="notext" class="ui-btn-right"></a></li>
                </ul>
            </div><!-- /navbar -->
</div><!-- /header --> 
```

通过在标题块之外实现导航栏，我能够成功实现第二张图像，但是我无法将其设置为固定位置。我确定我的 CSS 没有任何问题，因为我使用的是默认主题减去一些颜色调整。有什么建议么？

- 更新 -

[按照这里的要求，在jsfiddle](http://jsfiddle.net/K6GMG/2/)上实现了一个快速而肮脏的实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T01:03:34.427

我删除了它`data-role="button"`，`class="ui-btn-right"`它制作了一个适当的导航栏。导航栏中的链接会自动设置为按钮样式并均匀分布。不确定是否`data-inline="true"`有必要，但我把它留在了。在我使用的导航栏中，我不使用它。

```
<div data-role="header" data-id="header" data-position="fixed">
            <div data-role="navbar">
                <ul>
                    <li><a href="index.html"  data-icon="b" data-inline="true" data-iconpos="notext"></a></li>
                    <li><a href="index.html"  data-icon="star" data-inline="true" data-iconpos="notext"></a></li>
                    <li><a href="index.html" data-icon="grid" data-inline="true" data-iconpos="notext"></a></li>
                    <li><a href="index.html" data-icon="search" data-inline="true" data-iconpos="notext"></a></li>
                </ul>
            </div><!-- /navbar -->
</div><!-- /header -->​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T00:39:41.050

```
<div data-role="header">        
    <div data-role="navbar" data-iconpos="bottom">
        <ul>
            <li ><a  data-icon="search" href="#" href="a.html" >One</a></li>
            <li><a  data-icon="search" href="#" href="a.html" >Two</a></li>
            <li><a  data-icon="search" href="#" href="a.html" >Three</a></li>
        </ul>
    </div><!-- /navbar -->
</div><!-- /footer -->​ 
```

这段代码工作得很好。[http://jsfiddle.net/K6GMG/4/](http://jsfiddle.net/K6GMG/4/) 我没有看到使用按钮作为标签的任何用途，因为它们已经是按钮。

但是当我添加它时，有些方法`class="ui-btn-right"`会破坏代码。

# java - JAX WS 类转换错误

> ID：11942849
> 
> 赞同：0
> 
> 时间：2012-08-13T21:50:07.903
> 
> 标签：java, web-services, jax-ws

这是我们的 ServiceRequest.java

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "ServiceRequest",
         namespace = "http://ejb.service.blue2.bcbsa.com",
         propOrder = {"any"})
public class ServiceRequest implements Serializable {
  @XmlAnyElement(lax = true)
  protected Object any;

  public Object getAny() {
    return any;
  }

  public void setAny(Object value) {
    this.any = value;
  }
} 
```

在我的实现文件中我这样提到

```
IBMSOAPElement requestElement = (IBMSOAPElement)serviceRequest.getAny(); 
```

在这一行中它的显示

```
java.lang.ClassCastException: org.apache.xerces.dom.ElementNSImpl incompatible with com.ibm.websphere.webservices.soap.IBMSOAPElement 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:47:16.197

如果不查看代码（依赖项）、WebSphere 和您安装的功能包，将很难回答这个问题。我会查看您在 JaxB (Jax-WS) 上的编译时依赖项，并确保它们是由您正在使用的 WebSphere 版本提供的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T19:15:49.810

```
Element eobj = (Element)serviceRequest.getAny();

IBMSOAPElement requestElement = (IBMSOAPElement)new SODHealper().convertDataObjectToSOAPElement(eobj); 
```

现在它工作正常！！！！

# unix - Unix中的dumpbin等价物

> ID：11942850
> 
> 赞同：0
> 
> 时间：2012-08-13T21:50:09.527
> 
> 标签：unix, scons, dumpbin

我正在使用 SCons 编译几个程序，然后我想检查它是什么类型的二进制文件。它是 64 位还是 32 位，在 Windows 中我使用了**dumpbin**。我尝试使用**nm** for unix 并返回以下内容

```
~/Documents/scons_unix/SCons_test$ nm VisualStudio08-32bit
0000000000600e50 d _DYNAMIC
0000000000600fe8 d _GLOBAL_OFFSET_TABLE_
00000000004005f8 R _IO_stdin_used
                 w _Jv_RegisterClasses
0000000000600e30 d __CTOR_END__
0000000000600e28 d __CTOR_LIST__
0000000000600e40 D __DTOR_END__
0000000000600e38 d __DTOR_LIST__
00000000004006f0 r __FRAME_END__
0000000000600e48 d __JCR_END__
0000000000600e48 d __JCR_LIST__
0000000000601020 A __bss_start
0000000000601010 D __data_start
00000000004005b0 t __do_global_ctors_aux
0000000000400460 t __do_global_dtors_aux
0000000000601018 D __dso_handle
                 w __gmon_start__
0000000000600e24 d __init_array_end
0000000000600e24 d __init_array_start
00000000004005a0 T __libc_csu_fini
0000000000400510 T __libc_csu_init
                 U __libc_start_main@@GLIBC_2.2.5
0000000000601020 A _edata
0000000000601030 A _end
00000000004005e8 T _fini
00000000004003c8 T _init
0000000000400410 T _start
000000000040043c t call_gmon_start
0000000000601020 b completed.6531
0000000000601010 W data_start
0000000000601028 b dtor_idx.6533
00000000004004d0 t frame_dummy
00000000004004f4 T main
                 U puts@@GLIBC_2.2.5 
```

然后我尝试使用**objdump -f**，这给了我以下结果

```
VisualStudio08-64bit:     file format elf64-x86-64
architecture: i386:x86-64, flags 0x00000112:
EXEC_P, HAS_SYMS, D_PAGED
start address 0x0000000000400410 
```

但这是问题，以下结果来自 32 位文件，64 位和 32 位对我来说看起来相同，

```
VisualStudio08-32bit:     file format elf64-x86-64
architecture: i386:x86-64, flags 0x00000112:
EXEC_P, HAS_SYMS, D_PAGED
start address 0x0000000000400410 
```

我不知道这有什么问题，不确定 SCons 是否搞砸了构建。这就是我在 SConstruct 中所拥有的

```
#Builds a 32bit binary using the default compiler
env = Environment(TARGET_ARCH='x86')
env.Program('DefaultCompiler32-bit','helloworld-32bit.cpp') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T22:24:28.687

`file`是在 unix 上判断二进制文件（或任何其他文件）是什么的最简单方法：

```
$ file program64
program64: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.15, not stripped
$ file program32
program32: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.15, not stripped 
```

# c++ - C ++中的Matlab希尔伯特变换

> ID：11942855
> 
> 赞同：4
> 
> 时间：2012-08-13T21:50:31.867
> 
> 标签：c++, matlab, signal-processing

首先，请原谅我在这个领域的无知，我是一名程序员，但一直陷入超出我专业知识（数学和信号处理）的境地。

我有一个需要移植到 C++ 程序的 Matlab 脚本（无需将 matlab 代码编译成 DLL）。它使用`hilbert()`带有一个参数的函数。我试图找到一种在 C++ 中实现相同功能的方法（即有一个函数也只接受一个参数，并返回相同的值）。

我已经阅读了使用 FFT 和 IFFT 构建它的方法，但似乎无法获得像 Matlab 版本那样简单的东西。主要的是我需要它在 128*2000 矩阵上工作，而我在搜索中发现的任何内容都没有告诉我如何做到这一点。

我可以返回一个复杂的值，或者只是绝对值。集成到代码中越简单越好。

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T19:53:00.067

MatLab 函数 hilbert() 实际上并不直接计算希尔伯特变换，而是计算分析信号，这是大多数情况下需要的东西。它通过采用 FFT、删除负频率（将阵列的上半部分设置为零）并应用逆 FFT 来实现。如果您有一个不错的 FFT 实现，那么在 C/C++（三行代码）中将是直截了当的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T21:57:54.463

[这](http://www.physionet.org/physiotools/apdet/apdet-1.0/ht.c)看起来很不错，只要你能处理 GPL 许可证。[更大的数值计算资源](http://www.physionet.org/)的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T06:37:12.767

下面的简单代码。（注意：这是一个更大项目的一部分）。L 的值基于您对订单 N 的确定。其中 N = 2L-1。将 N 舍入为奇数。下面的 xbar 基于您定义为设计系统输入的信号。这是在 MATLAB 中实现的。

```
L = 40;
n = -L:L; % index n from [-40,-39,....,-1,0,1,...,39,40];
h = (1 - (-1).^n)./(pi*n); %impulse response of Hilbert Transform
h(41) = 0; %Corresponds to the 0/0 term (for 41st term, 0, in n vector above)

xhat = conv(h,xbar); %resultant from Hilbert Transform H(w);

plot(abs(xhat)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-04T20:59:20.127

这不是您问题的真正答案，但也许是一种让您睡得更好的方法。我相信在矩阵上基本上是 ffts 的特殊情况下，您将无法比 Matlab 快得多。这就是 Matlab 擅长的地方！

Matlab FFT 是使用 FFTW 计算的，FFTW 是用 C 编写的事实上最快的 FFT 算法，似乎也由 Matlab 并行化。最重要的是，引用[http://www.mathworks.com/help/matlab/ref/fftw.html](http://www.mathworks.com/help/matlab/ref/fftw.html)：

> 对于 2 次方的 FFT 维度，介于 214 和 222 之间，MATLAB 软件使用其内部数据库中的特殊预加载信息来优化 FFT 计算。

因此，如果您的代码稍慢一点，请不要感到难过...

# windows - Windows 7 不允许在 8 核系统中创建超过 2 个组

> ID：11942856
> 
> 赞同：0
> 
> 时间：2012-08-13T21:50:33.740
> 
> 标签：windows, winapi, multiprocessing

我有一个 intel r xeon r cpu w3565 系统。我在它上面运行一个 64 位的 windows 7。

在没有组意识的情况下，任务管理器根据需要显示 8 个逻辑核心（4 个核心和 8 个线程）。

现在，如果我需要 4 个组，每个组有 2 个处理器，我会这样做：

bcdedit/set groupize 2 并重新启动我的机器。我可以看到 2 个组，每个组有 2 个逻辑处理器。我还运行了一个小测试程序：

```
#include <windows.h>
#include <stdio.h>

int main(int argc, char *argv[]) {   
    WORD numProcs = 0,i;    
    int sum=0;
    numProcs = GetActiveProcessorGroupCount();   

    for(i=0;i<numProcs;i++)
    {
         int procs;
         procs =GetActiveProcessorCount(i);         
         printf("\ngroup %d count :%d\n",i,procs);       
         sum += procs;   
    }   
    printf("numProcs: %d\n", sum);    char abc;    scanf("\n%c",&abc);   
    return 0; 
} 
```

这也将核心数设为 4。早些时候，这将其设为 8（没有群体意识）

现在，如果我将组大小设置为 4，我会得到 2 个组，每个组有 4 个核心。这次我的测试程序输出是8。

然后我将 groupsize 设置为 1，这一次我再次得到了 2 个组，每个核心中都有一个逻辑核心。

我无法理解为什么 Windows 不能将组数扩展到 4，而实际上文档说它可以达到 4。

知道我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:41:46.373

[我认为您错过了文档](http://msdn.microsoft.com/en-us/library/ff564483%28v=VS.85%29.aspx)的这一部分：

> 默认情况下，具有 64 个或更少活动逻辑处理器的系统具有一个处理器组。必须设置处理器组大小以强制将这样的系统配置为具有多个处理器组。
> 
> 如果系统配置的处理器组大小小于系统中逻辑处理器总数的四分之一，则不使用某些逻辑处理器。

这是为什么当您将 groupsize 设置为 1 时每组只看到 2 个逻辑处理器的一个促成因素。这不到可用逻辑处理器总数的 1/4。我本来希望创建 4 个组，甚至[文档](http://msdn.microsoft.com/en-us/library/ff564483%28v=VS.85%29.aspx)中的示例也说明了这一点。

我不知道为什么在将 groupsize 设置为 2 时只看到 4 个逻辑处理器。

[文档](http://msdn.microsoft.com/en-us/library/ff564483%28v=VS.85%29.aspx)确实指出处理器组会影响系统的非统一内存访问 (NUMA) 节点，所以这可能是每个组分配多少处理器的一个因素？您的系统上必须有其他因素在限制每组处理器的数量。

# php - POST 请求是否跨服务器携带 PHP 会话值？

> ID：11942857
> 
> 赞同：1
> 
> 时间：2012-08-13T21:50:51.410
> 
> 标签：php, session, post, curl

如果我使用 PHP 对运行包含 的代码的远程服务器执行 cURL POST `session_start()`，是否可以访问远程本地计算机上设置的会话变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T21:54:25.563

除非您打开了 PHP trans_sid 选项（坏主意），否则 POST 与会话值无关。这是通过标准 cookie 进行调解的。

Cookie 受同域安全设置的约束——它们可以在同一域中的主机之间共享（例如 foo.example.com 和 bar.example.com），但亚马逊 cookie 不能与 Yahoo 共享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:52:51.610

不，他们没有。即使发送会话 cookie，您可以使用 cURL POST 执行此操作，也会引用仅存在于请求服务器上的会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T21:53:01.080

不。

会话变量是特定于服务器的。只有在正确设置会话 ID 并且使用共享会话数据存储（例如 memcached）时，它们才会跨到另一台服务器。

# asp.net - 如何使用 Firebase 将图片从我的桌面应用程序同步到我的网络服务器？

> ID：11942858
> 
> 赞同：0
> 
> 时间：2012-08-13T21:50:58.450
> 
> 标签：asp.net, sql, web, firebase

我会喜欢以下内容：
1\. 有这方面的 API 吗？
2\. 如果我的应用添加了图片，如果这个 firebase 类似于 dropbox（或更好），我可以从虚拟文件夹中读取以在网络上显示图片吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:53:26.477

Firebase 没有同步文件系统的内置方法。不过，您可能会使用 Firebase REST API 或 Node.js 客户端将图像推送到 Firebase。

一旦您的数据在 Firebase 中，就很容易使用 javascript 库将其拉入网页。我建议将图像存储为 base64 编码的字符串，并在图像上设置 dataURL 以显示它。

# macos - NSButton 中的 NSProgressIndicator

> ID：11942860
> 
> 赞同：3
> 
> 时间：2012-08-13T21:51:27.710
> 
> 标签：macos, cocoa, nsbutton, nsprogressindicator

我在 NSToolbarItem 中有一个刷新按钮，并且希望在加载数据时用 NSProgressIndicator 替换刷新图标。这可能吗？值得注意的是，它应该仍然是一个按钮（或至少看起来像一个），但有进度指示器而不是按钮。

![在此处输入图像描述](../Images/65ff4ae5e4dc2628972f369e82a226f3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:38:18.903

我建议您将 progressIndicator 与您的按钮放在同一个位置，但带有隐藏标志。按下按钮后，将其隐藏并显示进度指示器。

为了获得更好的效果，您可以使用`[[button animator] setHidden:YES]`但不要忘记让您的视图层支持，以使动画师工作。

# java - 是否可以组合 PHP/Java 架构

> ID：11942862
> 
> 赞同：4
> 
> 时间：2012-08-13T21:51:34.380
> 
> 标签：java, php, compatibility

我们当前的系统基于 Spring/Hibernate/Java/MySQL 堆栈。我们与一家公司建立了关系，我们最终将为其完成部分 IT 工作。他们目前正在使用基于 PHP/MySQL 的外部供应商构建系统。我想提出一个论点，即他们应该重新考虑并切换到以 Java 为中心的平台。我的主要论点是我们可以利用我们当前的（基于 Java 的）技能来进行系统维护和增强，而不是拥有一个需要 PHP 和 Java 知识的系统。但是，他们询问是否有任何*技术*原因导致这种情况无法发生。

如果我能提出一些技术论据来表明这两个平台不兼容，那就太好了。但是，我已经用谷歌搜索了这些差异，据我所知，不会有任何特定的技术问题。例如，我们可以使用 Web 服务让系统进行通信。

所以，问题是，关于 PHP 有什么可以说的，它要么与 Java 不兼容，要么不如 Java“好”？例如安全性、可扩展性和其他企业考虑因素？我知道这是一个模糊的问题，但获得一些意见会非常有帮助。

# php - 如何使用foreach获取PHP中数组的索引号？

> ID：11942864
> 
> 赞同：0
> 
> 时间：2012-08-13T21:51:51.307
> 
> 标签：php, arrays, foreach

我正在尝试解析来自 TV Shows API 的数据，但我无法弄清楚如何获取索引号。

例子：

```
{
"data": {
    "0": {
        "1": {
            "param1": "value1", 
            "param2": "warning", 
        }
    }, 
    "1": {
        "1": {
            "param1": "value1", 
            "param2": "value2", 
        }, 
        "2": {
            "param1": "value1", 
            "param2": "warning", 
        }, 
        "3": {
            "param1": "value1", 
            "param2": "warning", 
        }, 
    }
}
} 
```

我可以得到“参数”和“值”，但我不能“回显”索引号。

这就是我尝试这样做的方式：

```
$string = file_get_contents(api);
$json_a = json_decode($string, true);
foreach ($json_a['data'] as $seasons) {
    foreach ($seasons as $episodes) {
            if ($episodes['param2']=="warning") {
            // echo index number of season
            // echo index number of episode

            }
    }
} 
```

我相信我已经读过使用 foreach 我无法获得索引号？如果是这样，解决方案是什么？

我尝试“手动”增加季号和剧集的变量，但索引号可能会有所不同。它们可能不是连续的，有些以索引“1”而不是“0”开头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:55:35.793

使用`foreach (array_expression as $key => $value)`而不仅仅是`foreach (array_expression as $value)`. 这`$key`就是你所缺少的。

[PHP：foreach](http://php.net/manual/en/control-structures.foreach.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T21:55:44.343

您不需要计数器，只需在 foreach 的定义中添加键

例如。

```
$test = array('foo' => 'bar');

foreach($test as $key => $value) {
    echo $key . "\n";
    echo $value;
} 
```

输出

```
foo
bar 
```

[http://php.net/manual/en/control-structures.foreach.php](http://php.net/manual/en/control-structures.foreach.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T22:43:03.200

我无法编码你的 json 但是，

使用了一个数组，如：

```
array
  0 => 
    array
      1 => 
        array
          'param1' => string 'value1' (length=6)
          'param2' => string 'warning' (length=7)
  1 => 
    array
      1 => 
        array
          'param1' => string 'value1' (length=6)
          'param2' => string 'warning' (length=7)
      2 => 
        array
          'param1' => string 'value1' (length=6)
          'param2' => string 'value2' (length=6) 
```

这是代码：

```
$a[0][1] = array("param1"=>"value1","param2"=>"warning");
$a[1][1] = array("param1"=>"value1","param2"=>"warning");
$a[1][2] = array("param1"=>"value1","param2"=>"value2");

foreach($a as $key=>$val)
{
    foreach($val as $skey => $sval)
    {
        if($sval['param2']=="warning")
            echo $key."-".$skey."<br>";
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T21:56:28.927

尝试这个：

```
foreach ($json_a['data'] as $index1 => $seasons) {} 
```

同样：

```
foreach ($seasons as $index2 => $episodes) {} 
```

# php - IE9中的海森堡

> ID：11942871
> 
> 赞同：2
> 
> 时间：2012-08-13T21:52:18.963
> 
> 标签：php, jquery, html, internet-explorer-9

好的 StackOverflow - 这是一个奇怪的。

**问题**

所以我有一个“按钮”（实际上只是一个带有 javascript onclick 侦听器的 div），它在页面加载时通过 json 从数据库中获取其文本。（考虑到应用程序，这是有道理的）。我们不支持 IE < 9。

问题是 div 内的文本没有显示在 IE9 的新实例中。然而，当我打开开发者控制台（试图找出问题所在）并刷新页面时，IE 表现得好像没有任何问题，并正确填充按钮文本。它适用于所有其他浏览器。

什么。

**编码**

所以这就是我在 PHP 中所拥有的：

```
<div class="dark-button notification-button" data-notification="NOTIF_A">
    <span class="float-right">&#9654;</span>
</div> 
```

Javascript（使用 Jquery 1.8.0）：

```
$('document').ready(refreshNotificationButtons('.notification-button'));
function refreshNotificationButtons(buttons){
    var buttons = typeof buttons != 'object' ? $('.notification-button') : buttons;
    var allNotifications = {};
    var buttonsCount = 0;
    buttons.each(function(){
        var button = $(this);
        if(typeof button.attr('id') == 'undefined') button.attr('id', 'notif-button-' + buttonsCount);
        buttonsCount ++;
        if(typeof allNotifications[button.attr('data-notification')] == 'undefined'){
            allNotifications[button.attr('data-notification')] = [button.attr('id')];
        } else {
            allNotifications[button.attr('data-notification')].push(button.attr('id'))
        }
    });
    $.get(
        '/notifications/get_notifications/' + $.map(allNotifications, function(x, abbr){return abbr}).join(','),
        '',
        function(data){
            $(data).each(function(){
                if (typeof allNotifications[this.Notification.NotificationAbbr] != 'undefined'){
                    console.log(this); //debug
                    buttonEl = $('#' + allNotifications[this.Notification.NotificationAbbr]);
                    if(this.Notifications_User.UserID != null) buttonEl.addClass('notification-button-remove');
                    buttonEl.attr('data-notification-id', this.Notification.Notifications_TableID);
                    buttonEl.append($('<span class="notification-button-signup-span">' + this.Notification.EnableText + '</span><span class="notification-button-remove-span">' + this.Notification.DisableText + '</span>'));
                }
            });
        },
        'json'
    ); 
```

}

**图片**

打开开发控制台之前的按钮：

![打开开发控制台之前的按钮](../Images/fe7baaa65bb8d8af9ffff8dc8be2424c.png)

打开开发控制台并刷新后的按钮：

![打开开发控制台后的按钮](../Images/054bbdc29dfbc5745551e101facd8060.png)

**结论**

有任何想法吗？如果您想查看，我很乐意发布更多代码！提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T21:57:38.197

如上所述，`console.log()`当没有控制台可以写入时，在 IE 中效果不佳。

您可以删除对 的调用`console`，或添加此插件（由 Paul Irish 开发）

[http://paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/](http://paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T22:09:49.120

IE 只有`console`在调试器处于活动状态时才有对象。

因此，当您尝试执行`console.log()`并且没有`console`对象时，它会引发 javascript 异常，因为它尝试引用的`.log`属性`undefined`并且您的代码停止执行。

你可以通过在你的初始化代码中插入这个来解决这个问题——在你使用之前的某个地方`console.log()`。

```
var console = console || {};
if (!console.log) {
    console.log = function(data) {
        // do nothing
    }
} 
```

`console.log()`即使在调试器未运行时在 IE 中，这也使得始终使用它是安全的。我不建议`console.log()`在完成的生产代码中保留语句，但它可能会在开发过程中对您有所帮助。

# google-app-engine - 对外部服务器的 RPC 调用

> ID：11942872
> 
> 赞同：1
> 
> 时间：2012-08-13T21:52:23.613
> 
> 标签：google-app-engine, gwt

我是GWT的新手，`abc.com`我在哪些 RPC 调用用于从其服务器获取数据。任何帮助将不胜感激。`xyz.com``xyz.com?id=1``json``json``abc.com``RPC`

**编辑**

我正在尝试在此[StockWatcher 教程中实现](https://developers.google.com/web-toolkit/doc/2.1/tutorial/Xsite)[这一点](https://developers.google.com/web-toolkit/doc/2.0/FAQ_Server#How_can_I_dynamically_fetch_JSON_feeds_from_other_web_domains?)

我把我的代码稍微改了一下

```
private static final String JSON_URL = "http://localhost/stockPrices.php?q="; 
```

和

```
 private void refreshWatchList() {
            if (stocks.size() == 0) {
                return;
            }

            String url = JSON_URL;

            // Append watch list stock symbols to query URL.
            Iterator iter = stocks.iterator();
            while (iter.hasNext()) {
                url += iter.next();
                if (iter.hasNext()) {
                    url += "+";
                }
            }

            url = URL.encode(url);

            MyJSONUtility.makeJSONRequest(url, new JSONHandler() {

                @Override
                public void handleJSON(JavaScriptObject obj) {
                    if (obj == null) {
                        displayError("Couldn't retrieve JSON");
                        return;
                    }
                    updateTable(asArrayOfStockData(obj));
                }
            });

        } 
```

之前当我通过`RequestBuilder`它请求我的 url 时给了我一个异常`Couldn't retrieve JSON`，但现在`JSON`已获取并且状态代码为 200，正如我在其中看到的那样，`firebug`但它没有在表上更新。请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T22:09:21.157

First, you need to understand the [Same Origin Policy](https://developers.google.com/web-toolkit/doc/2.0/FAQ_Server#What_is_the_Same_Origin_Policy,_and_how_does_it_affect_GWT?) which explains how browsers implement a security model where JavaScript code running on a web page may not interact with any resource not originating from the same web site.

**While GWT's HTTP client and RPC call can only fetch data from the same site where your application was loaded**, you can get data from another server if it returns json in the right format. You must be interacting with a JSON service that can invoke user defined callback functions with the JSON data as argument.

Second, see [How to Fetch JSON DATA](https://developers.google.com/web-toolkit/doc/2.0/FAQ_Server#How_can_I_dynamically_fetch_JSON_feeds_from_other_web_domains?)

# php - 在 MAMP 上使用 Pear Mail

> ID：11942881
> 
> 赞同：0
> 
> 时间：2012-08-13T21:53:07.640
> 
> 标签：php, pear, mamp

我在 Mac OS X 上使用 MAMP 2.1.1（不是 MAMP Pro）。我想编写一些 php 代码来发送 html 电子邮件。

我已经安装了mail、mail_mime 和net_smtp。当我尝试在[http://pear.php.net/manual/en/package.mail.mail.send.php](http://pear.php.net/manual/en/package.mail.mail.send.php)上找到的示例时，我总是得到“500 Internal Server Error”。我检查了 php_error.log，它显示“PHP 致命错误：找不到类‘邮件’”。我试过了

```
<?php
require_once('Mail.php');
var_dump(class_exists('Mail', false));
?> 
```

它返回 bool(false) bool(false)

我检查了所有文件和路径，一切似乎都很好。我在 ubuntu 服务器上尝试了相同的代码，一切都很好。

谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:10:28.733

我今年清理了安装的 Mountain Lion，我现在使用的是内置的 apache、php 和 mysql 而不是 MAMP。但是我发现这个问题在我当前的环境中仍然存在。

但是我有一个不完善的解决方案可以使代码正常工作。我在调用 require/require_once 之前放置了这一行：

`ini_set('include_path', ini_get('include_path') . ':/usr/lib/php/pear');`

那么邮件功能就可以工作了。

没有这一行，我机器上的包含路径是`.:/usr/local/php5/lib/php`. 您可以看到问题是由不正确的路径引起的。由于某种原因，PEAR 安装在不同的路径中，并且 php.ini 设置不正确。

您可以在您的机器上尝试此解决方案。首先找出您的梨安装路径，然后相应地更改该行并将其放入您的代码中。

希望这个解决方案能给你一点提示。如果您能分享更好的解决方案，我将不胜感激！

# r - R - 如何在其他包中的函数上使用rollapply，如tseries中的maxdrawdown？

> ID：11942884
> 
> 赞同：1
> 
> 时间：2012-08-13T21:53:28.480
> 
> 标签：r, zoo

我正在尝试`rollapply`从 zoo 包中使用`maxdrawdown`tseries 包中的功能：

```
library(zoo)
library(tseries)
x <- c(1,2,4,6,7,10,8,6,5,4,6,7,8)
y <- zoo(x)
z <- rollapply(y,3,maxdrawdown,fill=NA,align="right") 
```

但是我收到此错误消息：

```
Error in zoo(rval, index(x)[i]) : 
 “x” : attempt to define invalid zoo object 
```

这是否意味着我不能`rollapply`在函数上使用`maxdrawdown`？有没有替代解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T22:00:06.900

`maxdrawdown`返回一个列表，但我们只想要该`maxdrawdown`列表的组件，所以试试这个：

```
rollapplyr(y, 3, function(x) maxdrawdown(x)$maxdrawdown, fill = NA) 
```

# c# - 取字符串的最后 n 行 c#

> ID：11942885
> 
> 赞同：11
> 
> 时间：2012-08-13T21:53:30.523
> 
> 标签：c#, string, string-parsing

我有一串未知长度的字符串

它的格式是

```
\nline
\nline
\nline 
```

不知道它有多长我怎么能把字符串的最后 10 行用“\n”隔开

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-14T03:32:20.010

随着字符串变大，避免处理无关紧要的字符变得更加重要。使用任何方法`string.Split`都是低效的，因为必须处理整个字符串。一个有效的解决方案必须从后面穿过字符串。这是一种正则表达式方法。

*请注意，它返回 a `List<string>`，因为在返回结果之前需要反转结果（因此使用该`Insert`方法）*

```
private static List<string> TakeLastLines(string text, int count)
{
    List<string> lines = new List<string>();
    Match match = Regex.Match(text, "^.*$", RegexOptions.Multiline | RegexOptions.RightToLeft);

    while (match.Success && lines.Count < count)
    {
        lines.Insert(0, match.Value);
        match = match.NextMatch();
    }

    return lines;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-13T22:00:51.703

```
var result = text.Split('\n').Reverse().Take(10).ToArray(); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-13T21:55:51.053

`Split()`上的字符串`\n`，并取结果数组的最后 10 个元素。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-13T22:07:53.110

如果这是在一个文件中并且文件特别大，您可能希望有效地执行此操作。一种方法是向后读取文件，然后只读取前 10 行。[您可以在此处](https://stackoverflow.com/questions/10409977/how-to-efficiently-read-only-last-line-of-the-text-file)查看使用 Jon Skeet 的[MiscUtil](http://www.yoda.arachsys.com/csharp/miscutil/)库执行此操作的示例。

```
var lines = new ReverseLineReader(filename);
var last = lines.Take(10); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T22:18:30.887

这是执行此操作的一种方法，其优点是它不会创建整个源字符串的副本，因此相当有效。大多数代码将与其他通用扩展方法一起放在一个类中，因此最终结果是您可以使用 1 行代码来完成

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            string x = "a\r\nb\r\nc\r\nd\r\ne\r\nf\r\ng\r\nh\r\ni\r\nj\r\nk\r\nl\r\nm\r\nn\r\no\r\np";
            foreach(var line in x.SplitAsEnumerable("\r\n").TakeLast(10))
                Console.WriteLine(line);
            Console.ReadKey();
        }
    }

    static class LinqExtensions
    {
        public static IEnumerable<string> SplitAsEnumerable(this string source)
        {
            return SplitAsEnumerable(source, ",");
        }

        public static IEnumerable<string> SplitAsEnumerable(this string source, string seperator)
        {
            return SplitAsEnumerable(source, seperator, false);
        }

        public static IEnumerable<string> SplitAsEnumerable(this string source, string seperator, bool returnSeperator)
        {
            if (!string.IsNullOrEmpty(source))
            {
                int pos = 0;
                do
                {
                    int newPos = source.IndexOf(seperator, pos, StringComparison.InvariantCultureIgnoreCase);
                    if (newPos == -1)
                    {
                        yield return source.Substring(pos);
                        break;
                    }
                    yield return source.Substring(pos, newPos - pos);
                    if (returnSeperator) yield return source.Substring(newPos, seperator.Length);
                    pos = newPos + seperator.Length;
                } while (true);
            }
        }

        public static IEnumerable<T> TakeLast<T>(this IEnumerable<T> source, int count)
        {
            List<T> items = new List<T>();
            foreach (var item in source)
            {
                items.Add(item);
                if (items.Count > count) items.RemoveAt(0);
            }
            return items;
        }
    }
} 
```

编辑：有人指出，这可能更有效，因为它迭代整个字符串。我还认为带有列表的 RemoveAt(0) 也可能效率低下。为了解决这个问题，可以修改代码以向后搜索字符串。这将消除对 TakeLast 函数的需要，因为我们可以只使用 Take。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-07T10:25:41.997

节省空间的方法

```
 private static void PrintLastNLines(string str, int n)
    {
        int idx = str.Length - 1;
        int newLineCount = 0;

        while (newLineCount < n)
        {
            if (str[idx] == 'n' && str[idx - 1] == '\\')
            {
                newLineCount++;
                idx--;
            }

            idx--;
        }

        PrintFromIndex(str, idx + 3);
    }

    private static void PrintFromIndex(string str, int idx)
    {
        for (int i = idx; i < str.Length; i++)
        {
            if (i < str.Length - 1 && str[i] == '\\' && str[i + 1] == 'n')
            {
                Console.WriteLine();
                i++;
            }
            else
            {
                Console.Write(str[i]);
            }
        }

        Console.WriteLine();
    } 
```

# android - 加载多个高质量位图并缩放它们

> ID：11942887
> 
> 赞同：0
> 
> 时间：2012-08-13T21:53:55.267
> 
> 标签：android, bitmap

我的应用程序存在严重的性能问题，在加载位图时，它似乎占用了大量内存。

我有一个可绘制文件夹，其中包含所有 android 设备的位图大小，这些位图质量很高。基本上，它会遍历每个位图并根据大小为设备制作一个新的位图。（决定这样做是因为它支持正确的方向和任何设备）。它可以工作，但它占用了大量内存并且需要时间来加载。任何人都可以对以下代码提出任何建议。

```
public Bitmap getBitmapSized(String name, int percentage, int screen_dimention, int frames, int rows, Object params)
{
    if(name != "null")
    {
        _tempInt = _context.getResources().getIdentifier(name, "drawable", _context.getPackageName());
        _tempBitmap = (BitmapFactory.decodeResource(_context.getResources(), _tempInt, _BM_options_temp));
    }
    else
    {
        _tempBitmap = (Bitmap) params;
    }

    _bmWidth = _tempBitmap.getWidth() / frames;
    _bmHeight = _tempBitmap.getHeight() / rows;

    _newWidth = (screen_dimention / 100.0f) * percentage;
    _newHeight = (_newWidth / _bmWidth) * _bmHeight;

    //Round up to closet factor of total frames (Stops juddering within animation)
    _newWidth = _newWidth * frames;

    //Output the created item
    /*
    Log.w(name, "Item");
    Log.w(Integer.toString((int)_newWidth), "new width");
    Log.w(Integer.toString((int)_newHeight), "new height");
    */

    //Create new item and recycle bitmap
    Bitmap newBitmap = Bitmap.createScaledBitmap(_tempBitmap, (int)_newWidth, (int)_newHeight, false);

    _tempBitmap.recycle();

    return newBitmap;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:16:28.937

Android培训网站上有一个很好的指南：

[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

这是关于有效加载位图图像 - 强烈推荐！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T22:11:24.010

这将节省空间。如果不使用 Alpha 颜色，最好不要使用带有 A 通道的颜色。

```
 Options options = new BitmapFactory.Options();
        options.inScaled = false;
        options.inPreferredConfig = Bitmap.Config.ARGB_8888;
    // or   Bitmap.Config.RGB_565 ;
    // or   Bitmap.Config.ARGB_4444 ;

        Bitmap newBitmap = Bitmap.createScaledBitmap(_tempBitmap, (int)_newWidth, (int)_newHeight, options); 
```

# .net - Elmah 错误：创建模型时无法使用上下文

> ID：11942888
> 
> 赞同：0
> 
> 时间：2012-08-13T21:54:01.707
> 
> 标签：.net, asp.net-mvc-3, elmah

我在我的项目中偶尔会遇到这样的 ELMAH 错误。但是，该应用程序似乎运行良好。有没有办法将 ELMAH 设置为忽略此特定错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:57:52.003

我不建议忽略此错误，因为它指向您的项目中对实体框架 DbContext 对象的错误使用。有关可能导致此问题的原因的详细信息，请参阅之前的一些问题：

*   [如何防止 EF “创建模型时无法使用上下文”错误？](https://stackoverflow.com/questions/6099781/how-can-i-prevent-ef-the-context-cannot-be-used-while-the-model-is-being-create)
*   [创建模型时无法使用上下文](https://stackoverflow.com/questions/9750115/the-context-cannot-be-used-while-the-model-is-being-created)

# upload - Liferay上传后的文件保存在哪个位置？

> ID：11942894
> 
> 赞同：5
> 
> 时间：2012-08-13T21:54:37.767
> 
> 标签：upload, liferay, portlet

我制作了一个从表单上传文档的 portlet。

我尝试通过制作一个简单的动态 java 项目并`form`上传文件，该文件保存在`LiferayWorkspace/.metadata/plugins/.../project/document.docx`.

现在我`form`在 portlet 中使用了它并保存了文档，效果很好，但我想知道它在哪里保存了我上传的文档？

我已经搜索了 tomcat 目录和可能的区域。

此外，如果有人能告诉我在 liferay 6.1 中使用“动态数据列表”portlet 的位置，文件会在上传后放置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T16:08:04.700

Liferay 的配置设置存储在portal-ext.properties 中，该属性位于liferay-portal-tomcat-6.1/liferay-portal-6.1/ 目录中。

你也可以从那里改变

```
#
# FileStore
#
dl.store.file.system.root.dir=${liferay.home}/data/document_library 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T08:52:36.253

默认存储文件夹是`portal-folder/data/document_library`，但您可以通过 liferay 配置更改它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T10:19:44.947

这些是`ROOT/WEB-INF/lib/portal-impl.jar/portal.properties`定义 liferay 存储文档的位置的属性，您可以通过创建`portal-ext.properties`并包含您的自定义值来覆盖这些属性：

```
#
# FileSystemStore
#
dl.store.file.system.root.dir=${liferay.home}/data/document_library 
```

此外，
您还可以为`temp`上传的文件设置（临时）目录，即当您使用`UploadRequest`从请求中获取文件时 liferay 将它们临时存储在服务器上：

```
#
# Set the temp directory for uploaded files.
#
#com.liferay.portal.upload.UploadServletRequestImpl.temp.dir=C:/Temp 
```

# php - 在 Linux 上使用带有 SMTP 服务器的默认 PHP 邮件功能

> ID：11942896
> 
> 赞同：8
> 
> 时间：2012-08-13T21:54:44.040
> 
> 标签：php, email, smtp, sendmail

我正在开发一个 php/c# 项目，该项目是一个带有 Web 界面的电子邮件服务器，用于管理电子邮件服务器应用程序。

该程序应该可以在 windows 和 linux 上运行，但我主要是在 windows 上进行开发。

我还没有在 Linux 中进行测试，但发现了一个可怕的问题。

从我在 Windows PHP 上搜索的内容中，您可以选择要使用的 SMTP 服务器，但在 Linux 上您似乎没有此选项，因此当 PHP 发送电子邮件时，它完全绕过了我的程序。

有没有办法让 PHP 使用您选择的 SMTP 服务器，我知道您可以使用 PEAR 覆盖 SMTP 设置，但我更希望标准的 PHP 邮件功能可以工作，以便 PHPBB 论坛等其他软件可以通过我的发送电子邮件SMTP 服务器而不是默认的 php 邮件。

这是可能的还是我使用梨的唯一选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T22:02:30.157

您的标准 php 邮件功能只会发送到 php.ini 中定义为 sendmail _path 的任何内容

这通常是`sendmail -t -i`

您需要配置 sendmail 以使用 smtp。

FWIW，大多数从 PHP 应用程序发送大量邮件的开发人员都对 mail() 嗤之以鼻，而是使用提供更好的可配置性/可靠性的许多邮件库（或服务）之一。

例如，您可以将 mail 函数通过管道传输到您自己的 PHP 脚本，并在该脚本中使用您想要的任何库来发送邮件（从而保留跨应用程序使用 mail() 函数）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T22:11:27.427

`mail()`在非 Windows 系统上，该函数无法使用 SMTP 服务器。

请参阅有关`php.ini`设置[smtp](http://www.php.net/manual/en/mail.configuration.php#ini.smtp)的文档。

[phpmailer](http://code.google.com/a/apache-extras.org/p/phpmailer/)已成为广泛使用的用于发送电子邮件的 PHP 库。它支持各种选项，包括 SMTP 和各种身份验证类型以及 SSL/TLS。如果您需要使用 SMTP 发送消息，我建议您使用它（或类似的东西^(参见[Zend_Mail ）。](http://framework.zend.com/manual/en/zend.mail.introduction.html))

因此，您将无法使用邮件功能，但您唯一的选择不是 Pear。

# wpf - 如何从 VB6 dll 中打开 WPF exe？

> ID：11942899
> 
> 赞同：0
> 
> 时间：2012-08-13T21:54:56.810
> 
> 标签：wpf, wcf, .net-4.0, com, vb6-migration

这是一个关于设计方法的问题。我有有限的 COM 经验和一点 WCF 经验。我的约束是由应用程序环境给出的，但我有一些设计灵活性。

在 VB6 dll 中，我需要启动 WPF 应用程序并与之通信。WPF 应用程序当前是一个 exe，但如果有帮助，我可以将其设为库。我想在 VB6 dll 和 WPF 应用程序之间提供两种方式的通信。我有一些灵活性来调整 VB6 dll 的设计。

我正在使用 VS2010 和 .NET 4 开发 C#。

我应该使用多少个组件？我可以使用 VB6 dll 在进程内启动 WPF 应用程序吗？它们之间是否应该存在第三个组件？COM+ 能起到帮助的作用吗？我是否必须使整个 WPF 应用程序 COM 可见？这样做有缺点吗？

我正在寻找一种可以制作原型的设计方法。我愿意研究细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:07:14.900

在可用的选项中，我更喜欢 COM 选项而不是“启动另一个进程”选项，因为“应用程序”间的通信将通过方法调用而不是 WCF 或类似的方式进行。

我假设您的 VB DLL 存在于窗口进程中，而不是服务或 Web 应用程序中。您只需要将任何公开的类型标记为 COM 可见，即类、它们的参数和返回类型。

您可能必须将您的 WPF UI 包装在 Windows 表单 ElementHost [1] 中，但我不确定，试试看。

我不确定您是否在搜索中看到了此 [2]，这听起来可行但不受支持，只要您没有太多事情要做就行。

[1] [http://msdn.microsoft.com/en-us/library/system.windows.forms.integration.elementhost.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.integration.elementhost.aspx)

[2] [http://social.msdn.microsoft.com/forums/en-US/wpf/thread/7555ba6a-1359-4dfe-aa23-c31a8f121142/](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/7555ba6a-1359-4dfe-aa23-c31a8f121142/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T22:29:40.557

我会

1.  使用 WCF 从 WPF 应用程序创建 Web 服务。我将抽象出应该远程访问的 WPF 应用程序的那些方面。这将明确*不*包括任何用户界面代码。
2.  我将创建一个简单的类库项目，并使用“添加服务引用”来添加对 WCF 服务的引用。
3.  我会让类库 COM 的方法可见
4.  我会从 VB6 调用这些方法

这有利于从等式中消除对用户界面的任何考虑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T22:58:10.843

我在一个主要用 VB6 编写的应用程序上工作，但最近的大部分代码都是用 .net 编写的，其中 UI 组件内置在 WPF 和一些 WinForms 中。此应用程序的数据源是 WCF、MSSQL 服务器和专有的基于 unix 的服务器。所有 WCF 调用都是由 .net UI 组件引用的数据访问组件进行的。

您可以在 VB6 窗口或其他容器控件中托管 WPF。首先获取[Interop Forms Toolkit](http://msdn.microsoft.com/en-us/vstudio/bb419144.aspx)并构建 shell 用户控件来托管您的 WPF 控件。

为了能够在这些控件中托管 WPF，您需要构建一个包含 ElementHost 的 WinForms 用户控件，您可以将内容设置为 WPF 用户控件。

> VB6 用户控件或窗口内的 WinForms 用户控件内
> 的
> 元素主机
> 内的WPF用户控件

互操作工具包将要构建 VB.Net 代码，但您可以在 C# 中完成，虽然我没有尝试过。由互操作工具包创建的用户控件将作为 COM 组件公开，您可以通过 Project > Components 将它们添加为组件来引用 VB6，然后您将在工具箱中找到它们。

在数据源（WCF、数据库）等方面，您应该在直接从 UI 组件引用的 .net 组件中构建所有数据访问，不要尝试回调 VB6 库，您可能只会造成混乱。

在我的应用程序中，我还有一个配置部分，我从 VB6 应用程序启动中调用它，它为所有 .net 组件设置了一个 IoC 容器。

从最佳实践方法来看，我实际上建议将您的 VB6 代码重写为 .net 并将 VB6 排除在外。如果这不是一个选项，那么您有很多选项，我的解释只是其中之一。

# google-chrome-extension - 如何处理 Chrome 插件中的扩展 ID 更改？

> ID：11942900
> 
> 赞同：1
> 
> 时间：2012-08-13T21:54:57.637
> 
> 标签：google-chrome-extension, chrome-web-store

场景： 1\. 使用 CRX Manifest Format 1 构建的旧插件并内联安装 2\. 使用 CRX Manifest Format 2 构建的新插件并从 Chrome Webstore 安装

问题：扩展 ID 已更改，因此安装不被视为升级。相反，两个插件都是在安装第二个之后安装的。

详细信息：由于 Chrome 21 中更严格的插件管理和扩展清单格式 2 的迁移，我正在将一个曾经内嵌安装的插件转换为从 Chrome 网上商店中提取的插件。但是我遇到了一个问题 - 插件的 ID 以前由清单 JSON 文件中的一个字段确定，现在它是由商店自动生成的，并且不同了。因此，我的新版本插件不被视为更新，我最终安装了两个版本的插件。有什么方法可以防止这种行为吗？

这种情况让我想起了 RPM 安装中的类似情况，当您更改 RPM 的名称但仍想保留其升级行为时会发生这种情况。在这种情况下，您可以使用“Provides”或“Obsoletes”字段。CRX 构建过程是否提供类似的功能？基本上我想指出插件 ID B 正在替换插件 ID A。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T20:38:40.343

上面提供的上传链接 Rob 有效。另一种方法是使用[http://developer.chrome.com/extensions/management.html](http://developer.chrome.com/extensions/management.html)中描述的卸载功能。它允许您根据 ID 删除。

# hibernate - hibernate 会加载所有数据库记录吗？反正要控制吗？

> ID：11942902
> 
> 赞同：0
> 
> 时间：2012-08-13T21:55:00.277
> 
> 标签：hibernate, persistence, persist

我想知道休眠是如何工作的……假设我有三个实体类：A、B 和 C。

我知道已经知道以下事实：

*   我不会对 B 对象做任何选择语句。
*   我将在 B 中插入（通过调用 persist()）数十万行新行。
*   我将选择和更新 A 对象数百次。
*   我不会对 C 对象做任何操作。
*   数据库中以前保存了数十万个 C 对象。
*   在另一个会话中，我将重复完全相同的操作。

结果，数据库将变得越来越大，我注意到在 B 对象上调用 persist() 变得更慢。

我的问题是：

1.  hibernate 会加载数据库中的所有对象吗？所有 A、B 和 C 对象？
2.  如何查看 hibernate 为从数据库加载对象所做的操作？
3.  我可以控制装载操作吗？事实上，我不想加载 C 对象，也不想加载 B 对象。
4.  如何查看和控制数据库中实际加载为实体对象的记录是什么？
5.  如果对 B 对象的 id 的唯一性进行验证操作，我可以在日志文件中看到此验证吗？
6.  是否可以停用验证操作以加速 B 对象的 persist() 操作？事实上，我可以在我的代码中管理 id 的唯一性，我不想让 hibernate 验证它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T22:01:55.370

1) 不，只有必需的

2）您可以配置休眠日志以显示执行的SQL和DML语句

3）您只加载选定的对象。另外，您可以为关联指定 EAGER 或 LAZY

4) 你为什么要这样做？这是休眠任务。

5) 如果一个 ID 不是唯一的，它就不是一个 ID。时期。

6）休眠只是发送到数据库，数据库执行大部分检查。如果您想“调整” Hibernate 以提高性能，请不要将 Hibernate 用于该操作。

# cocoa-touch - 可以在所有其他类中使用的全局类

> ID：11942905
> 
> 赞同：0
> 
> 时间：2012-08-13T21:55:19.213
> 
> 标签：cocoa-touch, design-patterns

我已经在一个特定的视图控制器中成功地将 iAd 实现到我的应用程序中，并且我想将它们放入我的许多其他视图控制器中。为每个视图控制器一遍又一遍地编写相同的 iAd 代码似乎是多余的。我希望能够将 iAd 的所有这些代码放在一个类中，并在需要时调用它。所以我听说过一些叫做帮助类和类方法（+）的东西，但我不确定这是否是我需要的。谁能带领我朝着正确的方向前进？一个例子会很有帮助。

**编辑**

我创建了一个没有视图控制器的单例类，我认为这是正确的。无论如何，在 iAd 实现中，有许多代码行包括添加子视图，例如

```
[self.view addSubview:adView]; 
```

单身人士告诉我它不识别“视图”。因此，当我从其他视图控制器调用单例时，是否需要将视图传递给单例？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:57:40.023

你想分享什么？从描述中，您听起来对重用实现最感兴趣（而不是各种全局数据/状态）。为此，您可以使用一个类的多个实例。

当然，您可能希望关注此类的接口，以便它与您必须使用它的视图和控制器进行良好的交互（以通用方式 - 特殊情况应保留在适当的控制器中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T23:00:40.247

您的新类 iAd 单例确实没有视图；因此您无法从那里访问一个。

我建议不要将视图控制器的视图传递给 iAd 类，而是让您的 VC 请求广告。像这样的东西：

```
// SomeViewController
// Maybe this is viewDidLoad? It's wherever you are ready to 
// incorporate the ad into your view.
- (void) arrangeViewIncludingAds
{
    // Do other setup

    UIView * adView [[iAdSingleton sharedIAd] adWithParameters:infoToSelectAnAppropriateAdForThisVC];
    [self.view addSubview:adView];

    // Continue setup
} 
```

我不确定您是否要更改每个 VC 的广告；我只是将其添加为一个想法。

# node.js - Socket.io 跨域问题 - Access-Control-Allow-Origin 不允许 Origin

> ID：11942906
> 
> 赞同：5
> 
> 时间：2012-08-13T21:55:26.403
> 
> 标签：node.js, cross-domain, socket.io

我在 url (example.com) 上有一个网站，并且正在使用 node.js/socket.io 将 JSON 传递到我的网页中。我目前收到一条错误消息：“XMLHttpRequest cannot load [http://example.com:12003/socket.io/1//897026922693503087/?disconnect=1](http://example.com:12003/socket.io/1//897026922693503087/?disconnect=1) . Origin [http://example.com](http://example.com)不允许 Access-控制-允许-来源。”

我的节点代码如下所示：

```
 var http = require('http');
   var mysqlClient = require('mysql').createClient({'user':'root','password':'XXXXXXXX'});

   mysqlClient.query('USE myDBName');

   var mysqlData;

   setInterval(function(){
       mysqlClient.query(
                      'SELECT number, page_id FROM dbTableName',
                      function selectCb(err, results, fields) {
                        if (err) {
                          throw err;
                  }

                mysqlData = [];
           for(var i = 0; i < results.length; i++){
               mysqlData[i] = results[i];
           }
       });  
   }, 1000);

   var io = require('socket.io').listen(12003);
   io.sockets.on('connection', function(client) {

       console.log("New Connection: ", client.id); //log new connection

             client.emit('connection', client.id);//custom emit to let site know its connected
            client.on("requestNewData", function(data){
                client.emit('init', JSON.stringify(mysqlData));
       });

       client.on('disconnect', function() {
        console.log("Disconnected: ", client.id);
       });
   }); 
```

我试过这行代码来解决这个问题，但没有成功：

```
 var io = require('socket.io').listen(12003, {origins: '*:*'}); 
```

我在带有 Ubuntu Ocelot 的 Amazon EC2 上运行。我的客户端代码是：

```
 <script src="http://example.com:12003/socket.io/socket.io.js"></script>
          <script type="text/javascript">
              var socket = io.connect('http://example.com:12003');
              socket.emit("requestNewData", {"nothing":"here"});
              ... 
```

由于我只是使用套接字，我认为我不能在节点代码中使用 'Access-Control-Allow-Origin' : '*' 。任何帮助将不胜感激。我收到的错误仅在 Chrome 上 - 据我了解，Chrome 对跨域连接的限制更大......

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:51:29.143

尝试仅在客户端上包含您的 socket.io 的相对路径：

```
<script src="/socket.io/socket.io.js"></script>
var socket = io.connect('http://example.com'); 
```

# objective-c - NSURLConnection connectionDidFinishLoading 在网页加载之前被调用

> ID：11942917
> 
> 赞同：1
> 
> 时间：2012-08-13T21:55:57.140
> 
> 标签：objective-c, ios, cocoa-touch, connection, nsurlconnection

我刚刚开始 iOS 编程，但无法理解这一点。我正在尝试连接到一个有登录名的网站。我正在使用`NSURLConnection`和 POST，并发送我的登录凭据。

凭据是正确的并且`connectionDidFinishLoading:`被调用但它没有完全登录到站点..登录部分完成..我在查看响应时发现了这一点..根据我的理解，“connectionDidFinishLoading”仅在之后调用连接完成..我肯定在这里遗漏了一些东西..我的代码在下面..请指教..

```
- (IBAction)connect:(id)sender {
    // Login to the website
    urlRequest=[NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://www.mywebsite.com/login"]
                                       cachePolicy:NSURLRequestUseProtocolCachePolicy
                                   timeoutInterval:60.0];

    NSString *post = @"username=myname&password=mypassword";
    NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

    [urlRequest setHTTPMethod:@"POST"];
    [urlRequest setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [urlRequest setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [urlRequest setHTTPBody:postData];

    // Start the connection request
    urlConnection = [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self];
} 
```

在这里，当我记录响应时，它是不完整的..它登陆在最终成功页面之间的页面..所以身份验证部分完成..我需要包括任何延迟吗？请帮忙..

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    NSLog(@"Connection success.");
    NSURLResponse *responseTest;
    NSError *error;

    NSData *responseDataTest = [NSURLConnection sendSynchronousRequest:urlRequest       returningResponse:&responseTest error:&error];

    NSString *responsestring = [[NSString alloc] initWithData:responseDataTest encoding:NSASCIIStringEncoding];
    NSLog(@"Recieved response.. %@",responsestring);
} 
```

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T00:29:34.963

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response 
```

请尝试改用此方法。根据文档，它是“当连接接收到足够的数据来构造其请求的 URL 响应时发送。（必需）”

# python - 按名称和排名排序

> ID：11942919
> 
> 赞同：2
> 
> 时间：2012-08-13T21:56:03.057
> 
> 标签：python, sorting

所以前段时间我在这里问了这个问题：[Sorting lists in python](https://stackoverflow.com/questions/11732133/sorting-lists-in-python)

我在这里有这段代码：

```
def sort(names, rank):
    lst=[]
    for x in range(0, len(names)):
        lst.append((int(rank[x]), names[x]))
    lst.sort(key=lambda x: (-x[0],len(x[1])) )
    newArr = []
    for z in range(0, len(lst)):
        row = lst[z]
        newArr.append(row[1] + " " + str(row[0]))
    return newArr 
```

但我还需要对名称进行更多排序，如果名称的长度相同，我需要以大写字母排在第一位。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:58:35.857

在第三个条件的元组中添加另一个条目。

```
def sort(names, rank):
    lst=[]
    for x in range(0, len(names)):
        lst.append((int(rank[x]), names[x]))
    lst.sort(key=lambda x: (-x[0],len(x[1]), ord(x[1][0])) )
    newArr = []
    for z in range(0, len(lst)):
        row = lst[z]
        newArr.append(row[1] + " " + str(row[0]))
    return newArr 
```

我重写了您的代码，进行了一些样式更改：

```
def sort(names, rank):
    lst=[]
    for index, name in enumerate(names):
        lst.append((int(rank[index]), name))
    lst.sort(key=lambda x: (-x[0],len(x[1]),  ord(x[1][0])))
    output = []
    for row in lst:
        output.append(row[1] + " " + str(row[0]))
    return output 
```

我个人认为第二种方法更具可读性。

# javascript - 动态加载jquery

> ID：11942932
> 
> 赞同：0
> 
> 时间：2012-08-13T21:57:05.640
> 
> 标签：javascript, jquery

如果尚未加载，我正在使用以下脚本在头部加载 jquery。

```
<script type="text/javascript">
if(!window.jQuery)
{
   var script = document.createElement('script');
   script.type = "text/javascript";
   script.src = "http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js";
   document.getElementsByTagName('head')[0].appendChild(script);
}
</script>
<script type="text/javascript">

$(document).ready(function() {
        $("#nav li:has(ul)").hover(function(){
            $(this).find("ul").slideDown();
        }, function(){
            $(this).find("ul").hide();
        });
    });
</script>

<style>
#nav {position: fixed; white-space:nowrap;}
#nav ul{ list-style-type:none; margin:0; padding:0; }
#nav li { float:left; padding:0; margin:0;list-style: none;}
#nav li a { width:220px; display:block; text-align:center; color:#000; margin-right:5px; height:35px; line-height:35px; text-decoration:none; font-size:90%; border:1px solid #ccc;text-transform: uppercase;font-weight: bold; }
#nav li a:hover { color:#f00; }
#nav ul ul { display:none; position:absolute; z-index:999; }
#nav li li { float:none; }
#nav li li a { background:#EBE7E6!important; text-align:left; height:auto; line-height:1; width:auto; padding:8px 20px 8px 22px; border:1px solid #D0D0D0; border-top:none; margin-right:0;width: 178px; }
* html li li { display:inline; } /* IE6 Bugfix... */
</style> 
```

但它不会出现在头部。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T22:06:56.213

根据您的评论“$ 未定义”，这表明您的 jQuery 后备在此过程中加载得太晚。正如 SLaks 指出的那样，您的回退是异步运行的。

尝试使用 document.write() 在头部插入脚本块。这将强制浏览器在继续执行之前评估脚本。

```
<script type="text/javascript">
    if (typeof (jQuery) === 'undefined') {
        document.write(unescape("%3Cscript src='//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js' type='text/javascript'%3E%3C/script%3E"));
    }
</script> 
```

# android - 奇怪的 CONNECTIVITY_ACTION 行为

> ID：11942933
> 
> 赞同：2
> 
> 时间：2012-08-13T21:57:07.743
> 
> 标签：android, broadcastreceiver, intentfilter

这篇文章可能看起来很长.. 但它很简单。所以请帮忙。谢谢。

**简而言之，每当从 Wifi 到移动连接发生变化时，我都会在广播接收器中收到 2 次消息（第一次没有找到网络）。当我从手机移到 Wifi 时，我收到了 3 次。谁能解释一下这种奇怪的行为。**

我已经使用 IntentFilterConnectivityManager.CONNECTIVITY_ACTION) 实现了一个代码并将其注册到我的接收器。

IntentFilter mNetworkStateFilter = new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION);

```
registerReceiver(mNetworkStateReceiver , mNetworkStateFilter);

private final BroadcastReceiver mNetworkStateReceiver = new BroadcastReceiver() 
          {

            @Override
            public void onReceive(Context context, Intent intent) 
            {
                  //The Network State has Been Changed
                  Log.d(TAG, "CHANGE HAPPENED" );

                 if (networkInfo != null)
        {
            Log.d(TAG, "Connected To: " + networkInfo.getTypeName());
            Log.d(TAG, "NUMBER: " + networkInfo.getType());
            Log.d(TAG, "isConnectedOrConnecting: " + networkInfo.isConnectedOrConnecting());
            Log.d(TAG, "isConnected: " + networkInfo.isConnected());
            Log.d(TAG, "isFailover: " + networkInfo.isFailover());
            Log.d(TAG, "Reason :" + networkInfo.getReason());
            Log.d(TAG, "Details " + networkInfo.getDetailedState() );

            boolean noConnectivity = intent.getBooleanExtra(ConnectivityManager.EXTRA_NO_CONNECTIVITY, false);
            String reason = intent.getStringExtra(ConnectivityManager.EXTRA_REASON);
            boolean isFailover = intent.getBooleanExtra(ConnectivityManager.EXTRA_IS_FAILOVER, false);

            Log.d(TAG, "noConnectivity: " + noConnectivity);
            Log.d(TAG, "reason: " + reason);

            Log.d(TAG,"DONE");

        }       

            }
      }; 
```

我观察到以下行为。谁能解释一下发生这种情况的原因。

最初，我的设备连接到 Wifi。

APK 现在已部署在设备上。

我的 Logcat 条目是 D/MainActivity(32005): CHANGE HAPPENED D/MainActivity(32005): Connected to WIFI

这是可以理解的。

现在路由器已关闭。所以现在设备尝试连接到 4G。现在，Logcat 条目如下。

D/MainActivity(32005)：发生变化 D/MainActivity(32005)：发生变化 D/MainActivity(32005)：连接到移动设备

可能这可以归因于第一个连接断开的事实，这导致打印发生了变化，但没有显示“已连接到”消息。然后与 Mobile 建立连接，导致 Connected to Mobile 发生另一个变化。

现在路由器再次打开。

但这次 logcat 报告 D/MainActivity(32005): CHANGE HAPPENED

D/MainActivity(32005)：连接到WIFI

D/MainActivity(32005)：发生变化

D/MainActivity(32005)：连接到WIFI

D/MainActivity(32005)：发生变化

D/MainActivity(32005)：连接到WIFI

我无法理解为什么 Logcat 会报告此消息 3 次。谁能帮我理解这种行为。

这是我的清单文件。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.wififourghandoff"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.INTERNET"/>
     <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

这是我的观察。

序列是否如下所示：

Wifi 到手机： 1\. Network Info 为 NULL 2\. Netowrk Info 对象存在并且“reason(networkInfo.getReason()”是 dataEnabled。

从手机到 Wifi： 1\. 收到广播消息。2\. Netowrk Info 对象存在且“reason(networkInfo.getReason()”为 dataDisabled。3\. NetworkInfo 存在且“reason(networkInfo.getReason()”为空

**我的设备最初是在 WIFI 上预占我的 Logcat**

D/MainActivity（880）：发生变化

D/MainActivity（880）：连接到：WIFI

D/MainActivity（880）：编号：1

D/MainActivity（880）：isConnectedOrConnecting：真

D/MainActivity（880）：isConnected：真

D/MainActivity（880）：isFailover：假

D/MainActivity（880）：原因：空

D/MainActivity（880）：详细信息已连接

D/MainActivity（880）：无连接性：假

D/MainActivity（880）：原因：空

D/MainActivity（880）：完成

**现在 WIFI 已关闭。所以现在我的设备移动到移动设备。以下是Logcat。**

D/MainActivity（880）：发生变化

D/MainActivity（880）：发生变化

D/MainActivity（880）：连接到：移动

D/MainActivity（880）：编号：0

D/MainActivity（880）：isConnectedOrConnecting：真

D/MainActivity（880）：isConnected：真

D/MainActivity（880）：isFailover：真

D/MainActivity（880）：原因：dataEnabled

D/MainActivity（880）：详细信息已连接

D/MainActivity（880）：无连接性：假

D/MainActivity（880）：原因：dataEnabled

D/MainActivity（880）：完成

**现在我的 WIFI 已打开。我的设备又回到了 Wifi。**

D/MainActivity（880）：发生变化

D/MainActivity（880）：连接到：WIFI

D/MainActivity（880）：编号：1

D/MainActivity（880）：isConnectedOrConnecting：真

D/MainActivity（880）：isConnected：真

D/MainActivity（880）：isFailover：假

D/MainActivity（880）：原因：空

D/MainActivity（880）：详细信息已连接

D/MainActivity（880）：无连接性：假

D/MainActivity（880）：原因：空

D/MainActivity（880）：完成

D/MainActivity（880）：发生变化

D/MainActivity（880）：连接到：WIFI

D/MainActivity（880）：编号：1

D/MainActivity（880）：isConnectedOrConnecting：真

D/MainActivity（880）：isConnected：真

D/MainActivity（880）：isFailover：假

D/MainActivity（880）：原因：空

D/MainActivity（880）：详细信息已连接

D/MainActivity（880）：无连接性：假

D/MainActivity（880）：原因：dataDisabled

D/MainActivity（880）：完成

D/MainActivity（880）：发生变化

D/MainActivity（880）：连接到：WIFI

D/MainActivity（880）：编号：1

D/MainActivity（880）：isConnectedOrConnecting：真

D/MainActivity（880）：isConnected：真

D/MainActivity（880）：isFailover：假

D/MainActivity（880）：原因：空

D/MainActivity（880）：详细信息已连接

D/MainActivity（880）：无连接性：假

D/MainActivity（880）：原因：空

D/MainActivity（880）：完成

谢谢和问候， 尤维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:07:34.990

好吧，您可以检查`NetworkInfo`哪些是作为额外发送的。

可能是它正在接收故障转移消息，如[文档](http://developer.android.com/reference/android/net/ConnectivityManager.html#CONNECTIVITY_ACTION)中所述- 当它第一次失败时，接收到消息然后再次成功连接。

> 对于连接丢失，如果连接管理器正在尝试连接（或已经连接）到另一个网络，则新网络的 NetworkInfo 也作为额外的传递。这让广播的任何接收者都知道他们不应该告诉用户没有数据流量是可能的。相反，接收者应该期待很快另一个广播，表明故障转移尝试成功（因此仍然存在整体数据连接），或者故障转移尝试失败，这意味着所有连接都已丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T22:08:10.057

我认为如果您记录`Extra`内容，则行为可能更有意义：

[http://developer.android.com/reference/android/net/ConnectivityManager.html#CONNECTIVITY_ACTION](http://developer.android.com/reference/android/net/ConnectivityManager.html#CONNECTIVITY_ACTION)

> 网络连接发生了变化。连接已建立或丢失。受影响网络的 NetworkInfo 作为额外发送；应该咨询它以查看发生了什么样的连接事件。
> 
> 如果这是从断开的网络故障转移的结果，则 FAILOVER_CONNECTION 布尔额外设置为 true。
> 
> 对于连接丢失，如果连接管理器正在尝试连接（或已经连接）到另一个网络，则新网络的 NetworkInfo 也作为额外的传递。这让广播的任何接收者都知道他们不应该告诉用户没有数据流量是可能的。相反，接收者应该期待很快另一个广播，表明故障转移尝试成功（因此仍然存在整体数据连接），或者故障转移尝试失败，这意味着所有连接都已丢失。
> 
> 对于断开连接事件，如果根本没有连接的网络，则布尔额外的 EXTRA_NO_CONNECTIVITY 设置为 true。

我对启用 WiFi 时的三个事件的解释：

1.  第一个事件只是通知您 WiFi 已启用。
2.  第二个事件是通知您蜂窝网络连接已禁用并且有另一个可用网络 (WiFi)。这是具有 NetworkInfo 的事件。
3.  这本质上是事件 1 的副本。每当 NetworkInfo 发生断开连接事件时，Android 承诺它将跟进 NetworkInfo 中网络的连接成功/失败事件

所以，这对你来说有点多余，但这是 Android 的正常行为。以下是我实验的一些日志：

```
 08-14 10:58:04.498: DEBUG/WiFiBroadcastReceiver(9161): Bundle[{networkInfo=NetworkInfo: type: WIFI[], state: CONNECTED/CONNECTED, reason: (unspecified), extra: (none), roaming: false, failover: false, isAvailable: true, inetCondition=0}]
    08-14 10:58:04.779: DEBUG/WiFiBroadcastReceiver(9161): Bundle[{extraInfo=VZWINTERNET, otherNetwork=NetworkInfo: type: WIFI[], state: CONNECTED/CONNECTED, reason: (unspecified), extra: (none), roaming: false, failover: false, isAvailable: true, reason=dataDisabled, networkInfo=NetworkInfo: type: mobile[LTE], state: DISCONNECTED/DISCONNECTED, reason: dataDisabled, extra: VZWINTERNET, roaming: false, failover: false, isAvailable: true, inetCondition=0}]
    08-14 10:58:04.779: DEBUG/WiFiBroadcastReceiver(9161): ***********Network Info ******
    08-14 10:58:04.779: DEBUG/WiFiBroadcastReceiver(9161): Connected To: WIFI
    08-14 10:58:04.779: DEBUG/WiFiBroadcastReceiver(9161): Network Type: 1
    08-14 10:58:04.779: DEBUG/WiFiBroadcastReceiver(9161): isConnectedOrConnecting: true
    08-14 10:58:04.779: DEBUG/WiFiBroadcastReceiver(9161): isConnected: true
    08-14 10:58:04.779: DEBUG/WiFiBroadcastReceiver(9161): isFailover: false
    08-14 10:58:04.779: DEBUG/WiFiBroadcastReceiver(9161): Reason :null
    08-14 10:58:04.779: DEBUG/WiFiBroadcastReceiver(9161): Details: CONNECTED
    08-14 10:58:04.779: DEBUG/WiFiBroadcastReceiver(9161): noConnectivity: false
    08-14 10:58:04.779: DEBUG/WiFiBroadcastReceiver(9161): reason: dataDisabled
    08-14 10:58:04.779: DEBUG/WiFiBroadcastReceiver(9161): ******************************
    08-14 10:58:04.779: DEBUG/WiFiBroadcastReceiver(9161): Bundle[{networkInfo=NetworkInfo: type: WIFI[], state: CONNECTED/CONNECTED, reason: (unspecified), extra: (none), roaming: false, failover: false, isAvailable: true, inetCondition=0}] 
```

# python - Matplotlib 图表中的进度线

> ID：11942936
> 
> 赞同：6
> 
> 时间：2012-08-13T21:57:24.453
> 
> 标签：python, matplotlib

目标：绘制图形（x，y）并将垂直线移动到图形wrt到计时器。

我开始使用 matplotlib 实现这个。可以使用 matplotlib 的 draw() 功能来实现这一点，但它会消耗 cpu，因为它每次都会重绘并且不允许我与图形交互。所以我决定使用 matplotlib 的动画功能。在未来，我还想暂停移动线。所以我不能使用 matplotlib.animation.FuncAnimatin

问题：我使用 canvas.copy_from_bbox(ax.bbox)、ax.draw_artist(line)、canvas.blit(ax.bbox)。但是，我无法将图形存储在背景中并在其上移动一条线。当我尝试存储时，它会以一种非常奇怪的方式覆盖。

这是我构建的代码。任何人都可以帮助我吗？提前致谢。

```
import sys
import matplotlib.pyplot as p
import time
fig=p.figure();
ax = fig.add_subplot(1,1,1)

y=[];x=[];y1=[0,1000];x1=[0,0]
y=numpy.random.randn(1000,1)*100
x=numpy.arange(0,1000)
line1, = ax.plot(x,y,color='black');
ax.set_ylim(0, 1000);
line, = ax.plot(x1,y1,color='r',alpha=1,animated=True); # this is the line which i wanted to move over the graph w.r.t to time. ( i can also use axvline , but i guess its the same).
canvas = ax.figure.canvas
canvas.draw()
background = canvas.copy_from_bbox(ax.bbox); #my problem is here
starttime=time.time();
mytimer=0;
mytimer_ref=0;
def update(canvas,line,ax):
    canvas.restore_region(background) #my problem is here 
    t=time.time()-starttime;
    mytimer=t+mytimer_ref;
    x1=[mytimer,mytimer];
    line.set_xdata(x1);
    ax.draw_artist(line)
    canvas.blit(ax.bbox) #my problem is here

def onclick(event):
    global starttime
    starttime=time.time();
    global mytimer_ref;
    mytimer_ref=event.xdata;
    print "starttime",starttime;

cid=line1.figure.canvas.mpl_connect('button_press_event',onclick); # when i click the mouse over a point, line goes to that point and start moving from there. 
timer=fig.canvas.new_timer(interval=100);
args=[canvas,line,ax];
timer.add_callback(update,*args); # every 100ms it calls update function
timer.start();
p.show(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T07:41:11.630

所以看起来你所指的“非常奇怪的方式”本质上是错误的 bbox 已经被你的`background = canvas.copy_from_bbox(ax.bbox)`. 我相信这是大多数后端的已知问题，其中添加工具栏等会影响 bbox 的位置以进行 blitting。

本质上，如果您可以在窗口弹出**后捕获背景，那么一切都应该为您工作。**这可以通过多种方式完成，在您的情况下，最简单的方法是将您的`canvas.draw()`命令替换为 a `plt.show(block=False)`，这将打开窗口，而不会使其成为阻塞命令。

作为一个小小的补充，我相信你知道在 python 代码中分号不是必需的，但是在我调试的时候，我整理了你的代码（没有走到最后）：

```
import sys
import matplotlib.pyplot as plt
import time
import numpy

fig = plt.figure()
ax = fig.add_subplot(111)

max_height = 100
n_pts = 100
y1 = [0, max_height]
x1 = [0, 0]
y = numpy.random.randn(n_pts) * max_height
x = numpy.arange(0, n_pts)

# draw the data
line1, = ax.plot(x, y, color='black')

# fix the limits of the plot
ax.set_ylim(0, max_height)
ax.set_xlim(0, n_pts)

# draw the plot so that we can capture the background and then use blitting
plt.show(block=False)

# get the canvas object
canvas = ax.figure.canvas
background = canvas.copy_from_bbox(ax.bbox)

# add the progress line.
# XXX consider using axvline
line, = ax.plot(x1, y1, color='r', animated=True) 

starttime=time.time()
mytimer=0
mytimer_ref=0

def update(canvas, line, ax):
    # revert the canvas to the state before any progress line was drawn
    canvas.restore_region(background)

    # compute the distance that the progress line has made (based on running time) 
    t = time.time() - starttime
    mytimer = t + mytimer_ref
    x1 = [mytimer,mytimer]
    # update the progress line with its new position
    line.set_xdata(x1)
    # draw the line, and blit the axes
    ax.draw_artist(line)
    canvas.blit(ax.bbox)

def onclick(event):
    global starttime
    starttime=time.time()
    global mytimer_ref
    mytimer_ref=event.xdata
    print "starttime",starttime

cid=line1.figure.canvas.mpl_connect('button_press_event',onclick) # when i click the mouse over a point, line goes to that point and start moving from there. 
timer=fig.canvas.new_timer(interval=100)
args=[canvas,line,ax]
timer.add_callback(update,*args) # every 100ms it calls update function
timer.start()
plt.show() 
```

高温高压

# jquery - 仅在另一个元素的动画期间防止单击委托锚点

> ID：11942937
> 
> 赞同：0
> 
> 时间：2012-08-13T21:57:24.280
> 
> 标签：jquery, jquery-animate, anchor

所以我一直在寻找这个，但我仍然没有找到一个解决方案而不一起杀死锚功能。

我正在使用锚标记为某些内容 DIV 的淡入和淡出设置动画。当用户单击另一个锚标记时出现该错误，而前一个的动画仍在发生，我最终将两个 DIV 堆叠在一起。我发现的其他解决方案，杀死链接功能并在之后使它们无用。我需要在那个 DIV 的动画进行时说一些东西，这个锚是没用的。但是一旦动画完成，这个锚就可以正常工作了。

我试过了

```
if ($("#" + visibleCtn).is(':animated')) {
     $("#modRightCol a").click('onclick', null);
    } 
```

和

```
if ($("#" + visibleCtn).is(':animated')) {
     $("#modRightCol a").click(function(){
     return false
         });
     } 
```

这完全删除了按钮：

```
if ($("#" + visibleCtn).is(':animated')) {
     $("#modRightCol").undelegate("a", "click");
     return false;
    } 
```

这是显示和隐藏的代码：

```
$("#modRightCol").delegate("a", "click", function(e) {
            e.preventDefault();
            var locInfo = $(this).attr("rel") + "Ctn";
            var locBtn = $(this).attr("rel") + "Btn";
            newCtn = $('#' + locInfo);

            //Change Map Location Button State
            cityLink.css('backgroundPosition','bottom');
            $(this).css('backgroundPosition','top');

            //Hide currently visible information
            allInfoCtn.each(function() {
                if($(this).hasClass('modActive')) {
                    visibleCtn = $(this).attr('id');
                } 
            }); 

            $("#" + visibleCtn).animate({
                        opacity: 0
                    }, 500, function(){
                         $("#" + visibleCtn).hide().removeClass("modActive").removeAttr("style");

                         //Show information related to location clicked
                        newCtn.show().animate({
                                opacity: 1
                            }, 500, function(){
                                newCtn.addClass('modActive');
                            });
                    }); //end animation function

           //Block clicks during animation              
           if ($("#" + visibleCtn).is(':animated')) {
                $("#modRightCol").undelegate("a", "click");
                return false;
            }

        }); 
```

# jira - JIRA 问题已读/未读状态支持

> ID：11942942
> 
> 赞同：2
> 
> 时间：2012-08-13T21:57:58.433
> 
> 标签：jira

JIRA 中是否有任何方法可以像电子邮件客户端那样跟踪问题的已读/未读状态？我希望能够过滤已修改但未查看的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T10:50:26.540

AFAIK，没有任何内置机制。

不过有个插件叫`behaviours`，听说可以用这个插件来完成。

# mysql - 在 MySQL 模式中，“AUTO_INCREMENT=3”的含义是什么

> ID：11942945
> 
> 赞同：6
> 
> 时间：2012-08-13T21:58:38.587
> 
> 标签：mysql, sql

这是 MySQL 表创建的模式。`AUTO_INCREMENT=3`最后一行是什么意思？

```
CREATE TABLE IF NOT EXISTS `test_b` (
  `ID_b` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `stuff` varchar(1000) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`ID_b`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=3 ; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T22:03:27.507

这会将初始`AUTO_INCREMENT`值设置为 3。因此，对于第一个插入的记录，默认情况下不是从 1 开始，而是从 3 开始。

来自[CREATE TABLE Syntax](http://dev.mysql.com/doc/refman/5.5/en/create-table.html)的手册：

> > 表的初始 AUTO_INCREMENT 值。
> > 对于在 CREATE TABLE 语句中支持 AUTO_INCREMENT 表选项的引擎，您还可以使用 ALTER TABLE tbl_name AUTO_INCREMENT = N 来重置 AUTO_INCREMENT 值。该值不能设置为低于列中当前的最大值。

我听说过人们从一开始就将此值设置为较大的值，以使他们看起来比一开始的内容更多。例如，用户 ID 15,000 与用户 ID 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T22:02:11.433

显然它用于设置起始自动递增数：

[http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)

# java - 当您的方法签名不允许抛出异常时如何抛出异常？

> ID：11942946
> 
> 赞同：22
> 
> 时间：2012-08-13T21:58:57.463
> 
> 标签：java, exception, checked-exceptions

我有这样的方法：

```
public void getSomething(){
...
} 
```

我想扔一个`Exception`里面`getSomething()`。编译器不允许我这样做，因为我的方法不允许`Exception`被扔在那里。但是我需要`Exception`为我的测试抛出一个子类**（我不能抛出 Unchecked `Exception`）**。这显然是一个 hack，但我需要它来进行测试。我尝试了 EasyMock，但它也不允许我这样做。任何想法如何做到这一点？

谢谢，肖恩阮

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-13T22:20:01.447

**方法一：**

[Alexey Ragozin 的这篇文章](http://blog.ragozin.info/2011/10/java-how-to-throw-undeclared-checked.html)描述了如何使用泛型技巧来引发未声明的检查异常。从那个帖子：

```
public class AnyThrow {

    public static void throwUnchecked(Throwable e) {
        AnyThrow.<RuntimeException>throwAny(e);
    }

    @SuppressWarnings("unchecked")
    private static <E extends Throwable> void throwAny(Throwable e) throws E {
        throw (E)e;
    }
} 
```

该技巧依赖于`throwUnchecked`对编译器的“谎言”，即类型`E`是`RuntimeException`调用`throwAny`. 由于`throwAny`被声明为`throws E`，编译器认为特定的调用可以只是 throw `RuntimeException`。当然，这个技巧是通过`throwAny`任意声明`E`和盲目地转换为它来实现的，允许调用者决定它的参数被转换成什么 - 理智编码时的糟糕设计。在运行时，`E`被[擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)并且没有任何意义。

正如你所指出的，做这样的事情是一个巨大的 hack，你应该很好地记录它的使用。

* * *

**方法二：**

您也可以`sun.misc.Unsafe`为此使用。首先，您必须实现一个使用反射返回该类实例的方法：

```
private static Unsafe getUnsafe() {
    try {
        Field theUnsafeField = Unsafe.class.getDeclaredField("theUnsafe");
        theUnsafeField.setAccessible(true);
        return (Unsafe)theUnsafeField.get(null);
    }
    catch (NoSuchFieldException e) {
        throw new RuntimeException(e);
    }
    catch (IllegalAccessException e) {
        throw new RuntimeException(e);
    }
} 
```

这是必要的，因为调用`Unsafe.getUnsafe()`通常会抛出`SecurityException`. 一旦你有了实例，`Unsafe`你就可以使用它的可怕功能：

```
Unsafe unsafe = getUnsafe();
unsafe.throwException(new Exception()); 
```

归功于帖子[https://stackoverflow.com/questions/5574241/interesting-uses-of-sun-misc-unsafe上的](https://stackoverflow.com/questions/5574241/interesting-uses-of-sun-misc-unsafe)[这个答案](https://stackoverflow.com/a/5648334/697449)。我想我会为了完整性而提到这一点，但最好只使用上面的技巧而不是允许进入你的代码。`Unsafe`

* * *

**方法三：**

在有关 using 的链接答案的评论中`Unsafe`，[@bestsss 指出了](https://stackoverflow.com/questions/5574241/interesting-uses-of-sun-misc-unsafe/5648334#comment9695261_5648334)一个使用已弃用方法的更简单的技巧[`Thread.stop(Throwable)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#stop%28java.lang.Throwable%29)：

```
Thread.currentThread().stop(new Exception()); 
```

在这种情况下，您将使用`@SuppressWarnings("deprecation")`并再次非常激烈地记录。同样，我更喜欢第一个技巧，因为它的（相对）清洁度。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T22:03:01.700

Java有两种异常，checked和unchecked。您必须声明已检查的异常，但不必声明未检查的异常。

`RuntimeException`是基本的未经检查的异常，因此您可以在不声明的情况下抛出它。

```
public void getSomething(){
   throw new RuntimeException("I don't have to be declared in the method header!");
} 
```

附带说明一下，您可能不想抛出原始 RuntimeException，而是将其子类化为更符合您需求的东西。RuntimeException 的任何子类也将被取消选中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-15T21:28:04.307

我不知道你想做什么。您可以在方法中抛出未经检查的异常，然后使用 JUnit 进行测试，如下面的示例所示。

```
public void getSomething() {
    throw new RuntimeException();
} 
```

JUnit 4 测试示例：

```
@Test
public void testGetSomething() {
    try {
        getSomething();
        fail("Expecting RuntimeException!");
    } catch (Exception e) {
        Logger.getLogger("test").info("Exception was caught: " + e.getClass());
    }
} 
```

# c# - 如何将文件从服务器文件系统上传到 SQL Server

> ID：11942949
> 
> 赞同：0
> 
> 时间：2012-08-13T21:59:18.510
> 
> 标签：c#, asp.net-mvc-3, file-upload

我有这个 MVC3 应用程序，我在`~/Content/Resource`目录中生成一个文件，所以如果用户选择该选项，我需要将它上传到数据库。我已经准备好所有其余的逻辑。只是不确定如何解决这个问题。

我的模型中有`byte[]`字段准备好，并且有一个生成的文件准备好上传只是不知道如何将文件从服务器传递到 SQL 服务器......有点困惑，因为这不会是一个`PostedFIle`那么不知道如何对待它。 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:06:21.517

好的，这里的文章详细解释了如何做你正在寻找的东西。你可能会完全采用他们的方法，或者如果你有自己的东西，就拿你正在寻找的那些部分

[使用 MVC 和 Linq to SQL 上传和下载数据库中的文件](http://www.bluelemoncode.com/post/2011/11/16/Upload-and-Download-files-in-database-using-MVC-Linq-to-SQL.aspx)

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T22:28:14.377

我设法想出了一个简单的解决方案。刚刚将生成的文件转换为`byte[]`并且可以正常工作。这是代码

```
//Method for generating XML file
GenerateXML();

FileStream stream = new FileStream(createPath, FileMode.Open, FileAccess.Read);
BinaryReader reader = new BinaryReader(stream);

//Reading binary data into byte[]
byte[] file = reader.ReadBytes((int)stream.Length);
reader.Close();
stream.Close();

// Saving byte[] to models byte[] field
release.XMLFile = file; 
```

它奏效了。

# iphone - 快速查询代表并将其设置为零

> ID：11942951
> 
> 赞同：0
> 
> 时间：2012-08-13T21:59:31.393
> 
> 标签：iphone, objective-c, delegates

> **可能重复：**
> [在 dealloc 方法中，需要或不需要任何委托到 nil](https://stackoverflow.com/questions/7632278/in-dealloc-method-set-any-delegate-to-nil-is-needed-or-not-needed)

在 ARC 中，如果类`Foo`拥有一个 ivar 并且 ivar 的代表设置为，将 ivar 的代表设置为in`Foo`总是一个很好的安全预防措施，还是仅在某些情况下使用这种预防措施？`nil``dealloc`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:06:09.080

这取决于伊瓦尔。如果`Foo`“独占”拥有它并且 ivar 对其他类不可用，则无需`_ivar.delegate = nil;`在`dealloc`. 但如果该对象也打算在其他类中使用，则最好将委托设置为 nil。然而，这在 Cocoa 开发中是非常罕见的情况。

答案中提到的另一种方法是始终安全并将其设置`delegate`为`nil`. 但我不会推荐这个。有时，通过保留委托引用，您可能会发现一个泄漏的对象，该对象试图联系拥有它的“死”委托。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T22:07:32.123

是的。即使您没有保留大多数委托（除了一些长期存在的类，例如 CAAnimation 和 NSURLConnection），我也遇到过对象试图访问死委托的情况（最具体地说，使用 NSFetchedResultsController）。委托应该是 unsafe_unretained，所以当你的对象被释放时它们应该是 nil，因此在 dealloc 方法上消除委托是多余的，但是看看 NSFetchedResultsController 的情况，安全总比后悔好。

# c - 为什么我需要这条线，据我所知它是多余的

> ID：11942952
> 
> 赞同：0
> 
> 时间：2012-08-13T21:59:35.900
> 
> 标签：c, gcc, microchip, mplab

下面是我用于解析令牌的一段代码。

底部附近有一条`>>>>`不再需要的行，但是如果我将其注释掉，则该`cmd_parse_value_lookup()`功能将失败。如果我把它留在里面，代码运行正常。谁能告诉我为什么，并解释发生了什么？

```
void cmd_parse(void)
  {
    cmd_parse_value=0;  
    int cmd_parse_counter = 1;
    char *cmd_parse_pointer;
    cmd_parse_pointer = strtok(cmd_buffer_in, " ");
    if (cmd_parse_pointer!=NULL)
    {
      cmd_parse_value_lookup(cmd_parse_pointer);
    }
    while (cmd_parse_pointer != NULL)
    {
      cmd_parse_counter++;
      cmd_parse_pointer = strtok(NULL, " ");
      if (cmd_parse_pointer!=NULL)
      {
   >>>>cmd_buffer_sprintf_return = sprintf(cmd_buffer_sprintf,"%i: %s\r\n", cmd_parse_counter, cmd_parse_pointer);  //WHY DO I NEED THIS LINE
        cmd_parse_value_lookup(cmd_parse_pointer);
      }
    }
  }

void cmd_parse_value_lookup(char *cmd_command)
{
  if (strcmp(cmd_command,"show")==0)
  {
    cmd_parse_value |= 1;
  }
  else if (strcmp(cmd_command,"get")==0)
  {
    cmd_parse_value |= 1;
  } 
  else if (strcmp(cmd_command,"set")==0)
  {
    cmd_parse_value |= 2;
  }
  else if (strcmp(cmd_command,"system")==0)
  {
    cmd_parse_value |= 4;
  }
} 
```

编辑：这是完整的代码：

```
/** C O M M A N D ************************************************************/

#include "generic.h"
#include <stdio.h>
#include <string.h>

void btm_out_character (char character);
void btm_out_string(char *string);
void cmd_parse(void);

char cmd_buffer_in[81]="\0                                                                         ";
int cmd_buffer_in_position=0;
unsigned long long cmd_parse_value=0;

char cmd_buffer_sprintf[81];
int cmd_buffer_sprintf_return;

void cmd_parse_value_lookup(char *cmd_command);
void cmd_buffer_in_add(int character);

void cmd_init(void)
{

}

void cmd_cls(void)
{
    if (dbg_mode==1){btm_out_string("\033[2J\033[1;33;40m\033[H\r\n");}
    if (dbg_mode==1){btm_out_string("================================================================================");}
    if (dbg_mode==1){btm_out_string("\033[24;0H================================================================================");}
    if (dbg_mode==1){btm_out_string("\033[1;36;40m\033[8;66H DEBUG MODE ");}
    if (dbg_mode==1){btm_out_string("\033[24;7H ***** ******** ********** Engineering Limited, All Rights Reserved ");}
    if (dbg_mode==1){btm_out_string("\033[10;0H");}
}   

void cmd_prompt(void)
{
    cmd_buffer_in_position = 0; // Clear buffer position
    cmd_buffer_in[0]=0;  // Clear buffer
    if (dbg_mode==1){btm_out_string("\r\n\033[1;37;40m***:> ");}    
}

void cmd_buffer_in_add(int character)
{
    switch (character)
    {
        case 8:
            if (cmd_buffer_in_position>0)
            {
                if (dbg_mode==1){btm_out_string("\b \b");}
                cmd_buffer_in[(int)cmd_buffer_in_position-1] = (char)character;
                cmd_buffer_in[(int)cmd_buffer_in_position] = 0;
                cmd_buffer_in_position--;
            }
                else
            {
                if (dbg_mode==1){btm_out_character(7);}     //BELL alert (too long a string)
                cmd_buffer_in[0] = 0;
                cmd_buffer_in_position = 0;
            }
            break;
        case 13:
            cmd_parse();
            cmd_buffer_sprintf_return = sprintf(cmd_buffer_sprintf,"\r\nparse value=%llu\r\n", cmd_parse_value);
            if (dbg_mode==1){btm_out_string(cmd_buffer_sprintf);}
            cmd_prompt();
            break;
        default:
            if (cmd_buffer_in_position<73)
            {
                if (dbg_mode==1){btm_out_character((char)character);}       //Echo character to host
                cmd_buffer_in[(int)cmd_buffer_in_position] = (char)character;
                cmd_buffer_in[(int)cmd_buffer_in_position+1] = 0;
                cmd_buffer_in_position++;
            }
            else
            {
                if (dbg_mode==1){btm_out_character(7);}     //BELL alert (too long a string)
            }
    }//switch
}//cmd_buffer_in_add

void cmd_parse(void)
{
    cmd_parse_value=0;

    /* this was code for testing */
    //cmd_buffer_sprintf_return = sprintf(cmd_buffer_sprintf,"\r\nClone %s",cmd_buffer_in);
    //cmd_buffer_sprintf_return = sprintf(cmd_buffer_sprintf,"Returnval='%i''%i''%i'",cmd_buffer_in[(int)0],cmd_buffer_in[(int)1],cmd_buffer_in[(int)2]);
    //if (dbg_mode==1){btm_out_string(cmd_buffer_sprintf);}

    int cmd_parse_counter = 1;
  char *cmd_parse_pointer;

  cmd_parse_pointer = strtok(cmd_buffer_in, " ");
  if (cmd_parse_pointer!=NULL)
    {
    cmd_parse_value_lookup(cmd_parse_pointer);
  }
  while (cmd_parse_pointer != NULL)
  {
      cmd_parse_counter++;
    cmd_parse_pointer = strtok(NULL, " ");
    if (cmd_parse_pointer!=NULL)
    {
        cmd_buffer_sprintf_return = sprintf(cmd_buffer_sprintf,"%i: %s\r\n", cmd_parse_counter, cmd_parse_pointer);  //WHY DO I NEED THIS LINE
            //if (dbg_mode==1){btm_out_string(cmd_buffer_sprintf);}
            cmd_parse_value_lookup(cmd_parse_pointer);
    }
  }
}

void cmd_parse_value_lookup(char *cmd_command)
{
    if (strcmp(cmd_command,"show")==0)
    {
        cmd_parse_value |= 1;
    }
    else if (strcmp(cmd_command,"get")==0)
    {
        cmd_parse_value |= 1;
    } 
    else if (strcmp(cmd_command,"set")==0)
    {
        cmd_parse_value |= 2;
    }
    else if (strcmp(cmd_command,"system")==0)
    {
        cmd_parse_value |= 4;
    }
    else if (strcmp(cmd_command,"sys")==0)
    {
        cmd_parse_value |= 4;
    }
    else if (strcmp(cmd_command,"adc")==0)
    {
        cmd_parse_value |= 8;
    }
    else if (strcmp(cmd_command,"a2d")==0)
    {
        cmd_parse_value |= 8;
    }
    else if (strcmp(cmd_command,"channel1")==0)//
    {
        cmd_parse_value |= 16;
    }
    else if (strcmp(cmd_command,"ch1")==0)
    {
        cmd_parse_value |= 16;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:13:03.587

由于您不使用`cmd_buffer_sprintf`其他任何地方，那行代码似乎没用。可能是 `cmd_buffer_sprintf`您在其他地方使用的全局变量，但在您提供的代码段中，该行不会改变任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T22:23:44.380

It's possible that `cmd_buffer_sprintf` isn't initialized if you take that line out.

Try adding a `*cmd_buffer_sprintf = '\0'` somewhere in `main()` and see if that corrects the problem.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-03T14:28:49.843

我们可以看到，一旦您注释掉该行，您尝试注释的行上使用的 var cmd_parse_counter 就变得无用了。

然后编译器的逻辑行为是将其从汇编代码中删除。

这可能会修复代码中其他地方发生的缓冲区溢出或堆栈错误。

为了测试这个理论，将 cmd_parse_counter 声明为 volatile int cmd_parse_counter 并注释掉该行并检查代码是否运行。如果它确实运行，那么您可以进一步查找问题。这可能与您发现的时间有关。

要检查的另一件事是您正在用空格填充缓冲区，然后使用空格令牌进行拆分。每次拆分你都会做一个 strcmp。如果您的缓冲区没有以 0 结尾，那么您肯定会通过使用不带 0 字符的 strcmp 来崩溃。您可以尝试使用 for 循环使用全 0 来初始化缓冲区。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T23:55:40.930

好吧，感谢您的反对，我相信无论谁给我它都会立即猜到有一个编译器错误导致了这个问题，即使他们只是在学习 C。

无论如何，问题的答案是编译器（充其量）粗略地支持无符号长整数。出于某种原因，那条线让它工作。我重写了避免使用 unsigned long long 的部分，现在所有内容都已排序。感谢您尝试解决此问题的支持。

# java - 在 jsplitpane 中的 jscrollpane 中调整画布的大小问题

> ID：11942961
> 
> 赞同：7
> 
> 时间：2012-08-13T22:00:15.857
> 
> 标签：java, swing, jscrollpane, jsplitpane

我正在使用 NetBeans GUI 编辑器创建一个应用程序，我希望在其中拥有一个`JSplitPane`，其顶部组件将是 a`Canvas`内的 a `JScrollPane`，底部组件将是 a `JTextArea`，或类似的东西。

当我将分隔线向下拉，从而增加顶部组件的大小时，一切似乎都可以调整大小。

当我试图向上推动分隔线时出现问题：分隔线似乎在下方`Canvas`（也可能在下方`JScrollPane`）。

我尝试了各种首选/最小/最大尺寸的组合`JScrollPane`，`Canvas`但似乎没有任何效果。

这是 Netbeans 生成的代码的一部分，可能与手头的问题有关：

```
jSplitPane1 = new javax.swing.JSplitPane();
jScrollPane1 = new javax.swing.JScrollPane();
canvas1 = new java.awt.Canvas();
jTextField1 = new javax.swing.JTextField();

jSplitPane1.setDividerLocation(300);
jSplitPane1.setOrientation(javax.swing.JSplitPane.VERTICAL_SPLIT);

jScrollPane1.setViewportView(canvas1);

jSplitPane1.setTopComponent(jScrollPane1);

jTextField1.setText("jTextField1");
jSplitPane1.setRightComponent(jTextField1); 
```

由于这是我的第一个问题，我不允许在问题中嵌入图像，所以我将发布链接：

![](../Images/3d050886168e7c99280d5276a6875e2d.png)

红色箭头表示分隔线的位置。

在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T00:39:18.213

而不是[`setPreferredSize()`](https://stackoverflow.com/q/7229226/230513)，让您的组件计算自己的首选大小和要容纳`pack()`的封装。`Window`下面的示例[`draw.GraphPanel`](https://sites.google.com/site/drjohnbmatthews/graphpanel)在顶部添加了一个实例，在底部添加了一个相应的控制面板。

![图片](../Images/8ff0aa2210f68fb48bd57b1a5304741e.png)

```
import draw.GraphPanel;
import java.awt.EventQueue;
import java.awt.GridLayout;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JSplitPane;

/**
 * @see https://stackoverflow.com/q/11942961/230513
 */
public class SplitGraph extends JPanel {

    public SplitGraph() {
        super(new GridLayout());
        JSplitPane split = new JSplitPane(JSplitPane.VERTICAL_SPLIT);
        GraphPanel graphPanel = new GraphPanel();
        split.setTopComponent(new JScrollPane(graphPanel));
        split.setBottomComponent(graphPanel.getControlPanel());
        this.add(split);
    }

    private void display() {
        JFrame f = new JFrame("SplitGraph");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new SplitGraph().display();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T22:21:53.753

正如我在评论中所说，您不应该混合使用 AWT 和 Swing 组件。我认为您没有以正确的方式使用组件。看一下，这是一个简单的例子，说明如何使用 JSplitPane。

```
import java.awt.*; // it is necessary to use the Dimension and BorderLayout classes
import javax.swing.*;

public class Foo extends JFrame {

    public Foo() {

        setTitle( "Splits" );
        setDefaultCloseOperation( EXIT_ON_CLOSE );
        setSize( 400, 400 );

        JSplitPane split = new JSplitPane( JSplitPane.VERTICAL_SPLIT );
        split.setDividerLocation( 200 );
        add( split );

        JPanel panel1 = new JPanel();
        panel1.setLayout( new BorderLayout() );
        panel1.add( new JLabel( "top panel" ), BorderLayout.NORTH );

        JPanel myDrawPanel = new JPanel();
        myDrawPanel.setPreferredSize( new Dimension( 100, 100 ) );
        myDrawPanel.add( new JLabel( "draw panel here!" ) );
        panel1.add( new JScrollPane( myDrawPanel ), BorderLayout.CENTER );

        split.setTopComponent( panel1 );

        JPanel panel2 = new JPanel();
        panel2.add( new JLabel( "bottom panel" ) );
        split.setBottomComponent( panel2 );

        setVisible( true );

    }

    public static void main( String[] args ) {
        new Foo();
    }

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-14T08:47:07.023

在阅读了 davidbuzatto 的评论后，我在 Google 上搜索了有关混合 AWT 和 Swing 组件的信息，我有点惊讶地发现这是一种糟糕的做法。

[我在这里](http://www.devx.com/tips/Tip/14718)找到了对我的问题最准确的答案

> 重量级组件有自己的 Z 顺序。这就是为什么 Swing 和 AWT 不能组合在一个容器中的原因。如果是，则 AWT 组件将绘制在 Swing 组件的 TOP 上。
> 
> 例如：当 AWT 组件与 JtabbedPane 一起使用时，它们不会在切换选项卡时消失。

感谢 davidbuzatto 给我指路 :-)

# sql - 将所有列加入查找表

> ID：11942963
> 
> 赞同：0
> 
> 时间：2012-08-13T22:00:20.480
> 
> 标签：sql, foreign-keys, relational-database, foreign-key-relationship

主表`products`有超过 10 列，所有列中的值都应参考`Lookup`表。

我添加了如下关系，但我觉得这有点奇怪！不是吗？ ![在此处输入图像描述](../Images/3b3a0b0a893897aae12b87a242206388.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:03:45.647

这会降低查询性能。我希望您的查找表在内存中......如果是，这可能是可行的，具体取决于您的系统负载。对于很少的行，循环连接的延迟非常低。

因此，如果这是正确规范化的数据模型，并且您没有发现任何特殊问题，我认为没问题。

# autofac - Autofac 仅按名称解析？

> ID：11942966
> 
> 赞同：2
> 
> 时间：2012-08-13T22:00:23.040
> 
> 标签：autofac, caliburn.micro

Autofac 是否支持仅通过名称解析服务？还是我必须始终指定服务类型？

我想要做：

```
container.ResolveNamed("Plugin"); // or container.TryResolvedNamed("Plugin", out instance); 
```

不是

```
container.ResolvedNamed<ISomeInterface>("Plugin"); // etc 
```

其中“插件”将是注册名称/密钥，而不是类型。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:58:06.443

您必须`Type`通过通用参数或`Type`参数指定 a 来解析 Autofac 中的服务。两种选择：

1.  注册您的所有相关服务和附加`.Named<object>("service name")`。
2.  维护自己的`Dictionary<string, Type>`，以便在通过 Autofac 解析之前自己查找类型。

假设您可以控制所有注册码，我可能会选择选项 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T03:00:13.090

这就是我解决问题的方法：

```
 private Type GetTypeForName(string key)
    {
        return (
            from reg in Container.ComponentRegistry.Registrations 
            from service in reg.Target.Services.OfType<KeyedService>()
            .Where(service => service.ServiceKey.ToString() == key) 
            select service.ServiceType).FirstOrDefault();
    } 
```

显然，这不是一个完美的解决方案，因为可以想象可能有多个注册具有相同的密钥。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-28T13:16:03.527

如果您保持服务之间键的唯一性，此扩展方法将有助于：

```
 private static object ResolveSingleOrDefaultByName(this IComponentContext cc, string name)
    {
        var reg = cc.ComponentRegistry.Registrations.SingleOrDefault(r =>
            r.Services.OfType<KeyedService>().Any(s => name.Equals(s.ServiceKey)));
        return reg == null ? null : cc.ResolveComponent(reg, Enumerable.Empty<Parameter>());
    } 
```

如果未找到密钥，它将返回 null。

# c - k&r 中的 getint 模糊定义，其中 ungetch 的奇怪行为

> ID：11942968
> 
> 赞同：0
> 
> 时间：2012-08-13T22:00:41.753
> 
> 标签：c, kernighan-and-ritchie

我在理解以下代码中的几行时遇到了一个大问题（注释中标记的数字）：

首先 - 用输入数据填充数组的循环代码：

```
int n, array[SIZE], getint(int *);
for (n = 0; n < SIZE && getint(&array[n]) != EOF; n++)
      ; 
```

现在函数定义：

```
/* getint:  get next integer from input into *pn */

int getint(int *pn)

{

int c, sign;

while (isspace(c = getch()))   /* skip white space */
        ;

if (!isdigit(c) && c != EOF && c != '+' && c != '-') {
        ungetch(c); /* [1] */ /* it is not a number */
        return 0;  /* [2] */
}
sign = (c == '-') ? -1 : 1;
if (c == '+' || c == '-')
        c = getch();
for (*pn = 0; isdigit(c); c = getch())
        *pn = 10 * *pn + (c - '0'); [3]
*pn *= sign;
if (c != EOF) /* [4a] */
        ungetch(c); /* [4b] */
return c; 
}

#define BUFSIZE 100

char buf[BUFSIZE];      /* buffer for ungetch */
int bufp = 0;           /* next free position in buf */

int getch(void) /* get a (possibly pushed-back) character */
{
   return (bufp > 0) ? buf[--bufp] : getchar();
}

void ungetch(int c)     /* push character back on input */
{
   if(bufp >= BUFSIZE)
      printf(" ungetch too many characters\n");

   else
      buf[bufp++] = c;
} 
```

所以：

[1] 我在这里读过类似的帖子，取回这样一个不需要的字符会以某种方式阻塞缓冲区，因此我们需要使用另一个函数来清除它。对我来说，奇怪的是没有包含在 K&R 中，作者甚至没有提到使用它的必要性？

[2] 为什么我们返回 0？这会停止整个 main() 程序吗？还是只是将 0 放入数组中？( getint(&array[n]) ？

[3] 为什么我们需要实现这样一个公式来计算“大数”？由于该函数只是一个接一个地获取数字（getchar 不是 getword），然后通过几个单个整数创建“大数字”。

[4a][4b] 如果 c != EOF，为什么它会取消提取？这个条件大部分时间都满足了，所以我们最终会拒绝每个输入的数字吗？

提前感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:10:04.897

1.  它没有，即使它与其他一些库一起使用，也不是这两个函数
2.  没有。它只是简单地返回零并使整数未初始化（这种情况不在循环中处理）
3.  你什么意思？这就是您如何根据数字计算整数的方式。
4.  It will simply `ungetch` the character that was trailing the integer the function just read and processed - unless there was no character but an end of stream marked by `EOF`. That marker isn't returned to the buffer.

# ruby-on-rails - 使用 before_save 在数据库中存储一个值

> ID：11942972
> 
> 赞同：0
> 
> 时间：2012-08-13T22:00:58.847
> 
> 标签：ruby-on-rails, database

我的应用程序有一个类型，它在流程中始终如一地进行，类型编号为 1、2、3 或 4。

在我的`application_controller.rb`，我有以下代码：

`before_filter :record_type`

然后在下面，在`protected`：

```
def record_type
 field should go here = @type
end 
```

我对如何记下`User`表格中的字段感到困惑。只是`User.type = @type`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:52:33.630

您必须先获取要编辑的特定记录。如果它发生在用户身上，如果你有一个像 current_user 这样的辅助方法（它的设计和类似的身份验证系统提供），你可以使用它。

你只想做 current_user.type = @type

但这并不是你现在所拥有的 before_save 。如果您在保存用户记录时尝试存储它，请将过滤器移动到用户模型。做类似的事情

```
before_save :add_type_to_user

def add_type_to_user
   self.type = your_type_value_here
end 
```

如何将类型值添加到模型将取决于您从何处获取它。您可以在 application_controller 中使用 before_filter 来设置 @@ 变量。当我在模型中时，我有时会使用这个技巧来获取当前用户。您只需要为 @@ 变量创建一个 getter 和 setter。那么你只需执行以下操作：

```
self.type = User.get_current_type 
```

或类似的东西。

我知道这很粗糙，但我希望这能为您指明正确的方向。

# c# - 更改链接按钮颜色

> ID：11942978
> 
> 赞同：2
> 
> 时间：2012-08-13T22:01:56.840
> 
> 标签：c#, asp.net, linkbutton, calendar-control

我有一个日历控件，我正在填充不同的事件。当一个事件只跨越一天时，我希望它将链接按钮颜色更改为红色。

```
 public partial class RequestCalander : System.Web.UI.Page
{
    private DataSet GetData()
    {
        ConnectionStringSettingsCollection cssc = ConfigurationManager.ConnectionStrings;

        var sql = "select (substring(status, 1,1)) AS stat1, lastname, firstname, lstdate, lenddate, requestid from [table] E inner join [tableEvent] T on E.EMPID = T.emppid where E.depdivid = '" + @UsrDepartment + "'";

        using (iDB2Connection conn = new iDB2Connection(GetConnectionString()))
        {
            conn.Open();

            using (iDB2Command cmd = new iDB2Command(sql, conn))
            {
                cmd.DeriveParameters();

                using (iDB2DataAdapter da = new iDB2DataAdapter(cmd))
                {
                    DataSet ds = new DataSet();
                    da.Fill(ds);

                    return ds;
                }
            }
        }
    }

    private String GetConnectionString()
    {
        ConnectionStringSettingsCollection cssc = ConfigurationManager.ConnectionStrings;

        return cssc["connStringEvent"].ToString();
    }

    protected void Calendar1_DayRender(object sender, DayRenderEventArgs e)
    {
        e.Cell.Width = 150;
        e.Cell.Height = 100;
        DataSet ds = GetData();

        string link = "<a class='turnred' href='viewRequestForm.aspx?bwrequestid=";

        string s = e.Day.Date.ToShortDateString();

        e.Cell.Text = e.Day.Date.Day.ToString() + "<BR>";

        LiteralControl l = new LiteralControl();
        l.Text = e.Day.Date.Day.ToString() + "<BR>";
        e.Cell.Controls.Add(l);

        foreach (DataRow row in ds.Tables[0].Rows)
        {
            string scheduledDate = Convert.ToDateTime(row["lstdate"]).ToShortDateString();
            string endDate = Convert.ToDateTime(row["lenddate"]).ToShortDateString();

            e.Cell.Width = 120;
            e.Cell.Height = 100;

            Int32 start = 0;
            Int32 end = 0;

            start = string.CompareOrdinal(scheduledDate, s);
            end = string.CompareOrdinal(endDate, s);

            if ((start > 0) || (end < 0) || (e.Day.IsWeekend == true))
            {
                return;
            }

            HyperLink hl = new HyperLink();
            hl.Text = "yes";

            if (scheduledDate.CompareTo(endDate) == 0){
                    hl.ForeColor = System.Drawing.Color.Red;

                e.Cell.Controls.Add(hl);
               }
                if ((start <= 0) & (end >= 0) & (!e.Day.IsWeekend))
                {
                    HyperLink lb = new HyperLink();
                    lb.Text = link + (Int64)row["bwrequestid"] + "' >" + row["lastname"] + "</a>" as String + "(" + row["stat1"] + ")" as String + "<br />";
                    lb.ForeColor = System.Drawing.Color.Red;
                    e.Cell.Controls.Add(lb);
                    lb.NavigateUrl = "~/Form.aspx?requestid={0}";
    }
} 
```

}

aspx 代码

```
 <%@ Page Title="Leave Request" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeBehind="Calander.aspx.cs" Inherits="RequestCalander" %>
<%@ Register assembly="AjaxControlToolkit" namespace="AjaxControlToolkit" tagprefix="asp" %>
<%@ Register TagPrefix="ec" Namespace="ControlSample" Assembly="EventCalendar" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
    <link type="text/css" rel="Stylesheet" href="../../Styles/Calendar.css" /> 
    <style type="text/css">
        .style1{width: 782px;}
        .style2{width: 883px;}

    .changecolor { color: Red; }

    </style>
    </asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
                <table class="style1">
                        <tr>
                             <td class="style2">
                                 <table class="style4">
                                     <tr>
                                         <td>
                                           <asp:Button ID="backButton" runat="server" Text="Back"  Width="100" />
                                           <asp:Button ID="requestButton" runat="server" OnClick="goToPageRequest" Text="Make Request"  Width="100" />
                                          </td>
                                     </tr>
                                </table>
                            </td>
                        </tr>
                       <tr>
                           <td class="style2">
                            <asp:Calendar ID="Calendar1" runat="server" ondayrender="Calendar1_DayRender" Font-Size="Large" Width="901px" style="font-family: 'Times New Roman', Times, serif" >
                                <TitleStyle Font-Bold="true" Font-Size="X-large" BorderStyle="Solid" />
                                <DayHeaderStyle CssClass="caldays" Height="30px" BorderStyle="Solid" />
                                <DayStyle CssClass="calcurrentmonth" Font-Size="X-small" Height="100px" />
                                <TodayDayStyle CssClass="calcurrentday" Width="120px" Height="100px"/>
                                <WeekendDayStyle CssClass="calweekend" Width="120px" Height="100px"/>
                                <OtherMonthDayStyle CssClass="calothermonth" Width="120px" Height="100px"/>
                            </asp:Calendar>
                           </td>
                        </tr>
                </table>
</asp:Content> 
```

Css

```
/************************************************************************
* 
* Calendar specific formatting 
*
************************************************************************/

/* Surrounds the calendar */
.eventmonth
{
    padding-left: 1px;
    padding-right: 1px;
    padding-top: 1px;
    text-align: center;
}

.changecolor
{ 
    color:red;
}

/* used as the cssclass of the actual calendar */
.eventmonthtable
{
    margin-right: 0px;
    margin-left: 8px;
    position: relative;
    margin-bottom: 9px;
    border: 1px solid #666666;
    border-collapse:collapse;
    top: 1px;
    left: -228px;
    height: 38px;
    width: 722px;
}

.dayNumber
{
    color :Background;
    float: right;
    border-bottom: 1px solid #666666;
    border-left: 1px solid #666666;
    clear: none;
    padding: 2px;
}

.linkbutton
{
    color:red;
}
.calcurrentmonth
{

}
.calothermonth
{
    background-color: #6B9EB9;

}
.calcurrentday
{
    background-color: #B0C9FF;

}
.calweekend
{
    background-color: #6B9EB9;
}

.calcurrentmonth , .calcurrentmonth , .calothermonth , .calcurrentday , .calweekend
{

    text-align: left;
    border: 2px solid #000000;
    vertical-align: top;
    /* needed for positioning the dayNumber part */
    position:relative;
    border-collapse:separate;
    border-spacing: 2px;

}

.nextlink
{
    position:absolute;
    right:0;
    padding-right:15px;    
} 
```

链接包含在日历控件中。

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Site.master.cs" Inherits="SiteMaster" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head runat="server">
    <title>Attendance</title>
    <link href="~/Styles/Site.css" rel="stylesheet" type="text/css" />
    <asp:ContentPlaceHolder ID="HeadContent" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
    <form runat="server">
    <div class="page">
        <div class="header">
            <div class="title">
                <h1>

                </h1>
                <asp:Table ID="Table1" runat="server">
                   <asp:TableRow>
                      <asp:TableCell>
                            <h2>ATTENDANCE&nbsp;
                            <img src="/images/LogoDrop.jpg" alt="" height="20" width="15" />
                            &nbsp;
                            EXCEPTION LEAVE TIME</h2>
                      </asp:TableCell>
                  </asp:TableRow>
                </asp:Table>
            </div>
            <div class="loginDisplay">
                <asp:LoginView ID="HeadLoginView" runat="server" EnableViewState="false">
                    <AnonymousTemplate>
                        [ <a href="/Login.aspx" ID="HeadLoginStatus" runat="server">Log In</a> ]
                    </AnonymousTemplate>
                    <LoggedInTemplate>
                        Welcome <span class="bold"><asp:LoginName ID="HeadLoginName" runat="server" /></span>!
                        [ <asp:LoginStatus ID="HeadLoginStatus" runat="server" LogoutAction="Redirect" LogoutText="Log Out" LogoutPageUrl="/Login.aspx"/> ]
                    </LoggedInTemplate>
                </asp:LoginView>
            </div>
            <div class="clear hideSkiplink">
                <asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" 
                    EnableViewState="false" IncludeStyleBlock="false" Orientation="Horizontal" StaticDisplayLevels="1">
                    <Items>
                        <asp:MenuItem NavigateUrl="~/Default.aspx" Text="PayPeriodProcessing" Selected="True"  ToolTip="Exception Leave Entry; Approval; Payroll " />
                        <asp:MenuItem NavigateUrl="~/Request/Time.aspx" Text="Leave Request" Selected="True"  ToolTip="Leave Request " />
                        <asp:MenuItem NavigateUrl="~/About.aspx" Text="About"/>
                     </Items>
                </asp:Menu>
            </div>
        </div>
        <div class="main">
            <asp:ContentPlaceHolder ID="MainContent" runat="server"/>
        </div>
        <div class="clear">
        </div>
    </div>
    <div class="footer">
        <asp:Label ID="lblCopyright" runat="server"> </asp:Label>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:38:54.860

您可能需要进一步描述您的代码，但这是我最初的想法。

**代码前端**

```
<style type="text/css">
    .disabledbtn { color: Red; }
</style>

<asp:Calendar ID="Calendar1" runat="server" ondayrender="Calendar1_DayRender" Font-Size="Large" Width="901px" style="font-family: 'Times New Roman', Times, serif" >
    <TitleStyle Font-Bold="true" Font-Size="X-large" BorderStyle="Solid" />
    <DayHeaderStyle CssClass="caldays" Height="30px" BorderStyle="Solid" />
    <DayStyle CssClass="calcurrentmonth" Font-Size="X-small" Height="100px" />
    <TodayDayStyle CssClass="calcurrentday" Width="120px" Height="100px"/>
    <WeekendDayStyle CssClass="calweekend" Width="120px" Height="100px"/>
    <OtherMonthDayStyle CssClass="calothermonth" Width="120px" Height="100px"/>
</asp:Calendar> 
```

**背后的代码**

问题是您正在创建两个链接。一个没有任何链接文本，设置为*红色*，第二个具有名称和状态。

您永远不会看到红色文本，因为它没有要显示的文本。我已经稍微简化了您的代码，现在它可以在我的末端运行。

这是我为测试而创建的假货`DataSet`，但您的应该代替它。

```
private DataSet GetData()
{
    // create a test data set
    DataTable dt = new DataTable();
    dt.Columns.Add("stat1");
    dt.Columns.Add("lastname");
    dt.Columns.Add("firstname");
    dt.Columns.Add("lstdate");
    dt.Columns.Add("lenddate");
    dt.Columns.Add("bwrequestid");

    dt.Rows.Add("P", "Doe", "John", "08/16/2012", "08/16/2012", 1);
    dt.Rows.Add("P", "Doe", "Jane", "08/14/2012", "08/17/2012", 2);
    dt.Rows.Add("C", "Black", "Jack", "08/12/2012", "08/12/2012", 3);
    dt.Rows.Add("C", "Morgan", "Dexter", "08/01/2012", "08/07/2012", 4);
    dt.Rows.Add("S", "Swearengen", "Al", "08/15/2012", "08/20/2012", 5);
    dt.Rows.Add("S", "Kirk", "James T", "08/04/2012", "08/04/2012", 6);
    dt.Rows.Add("P", "Bundy", "Al", "08/07/2012", "08/07/2012", 7);

    DataSet ds = new DataSet();
    ds.Tables.Add(dt);

    return ds;
} 
```

我相信这应该正确呈现您的日历。我不确定的一件事，你想让周末约会*总是*红色吗？

```
protected void Calendar1_DayRender(object sender, DayRenderEventArgs e)
{
    e.Cell.Width = 150;
    e.Cell.Height = 100;
    DataSet ds = GetData();

    foreach (DataRow row in ds.Tables[0].Rows)
    {
        DateTime scheduledDate = Convert.ToDateTime(row["lstdate"]);
        DateTime endDate = Convert.ToDateTime(row["lenddate"]);

        // make sure it meets your criteria
        if ((e.Day.Date >= scheduledDate && e.Day.Date <= endDate))
        {
            // create the hyperlink
            HyperLink hl = new HyperLink();
            hl.Text = "<br />" + row["lastname"].ToString() + "(" + row["stat1"].ToString() + ")";
            hl.NavigateUrl = "~/Form.aspx?requestid=" + row["bwrequestid"].ToString();

            // if the start and end dates are the same day, make it red
            if (scheduledDate.CompareTo(endDate) == 0)
                hl.CssClass = "changecolor";

            // add control to cell
            e.Cell.Controls.Add(hl);
        }
    }
} 
```

**更新**这是带有新代码的输出。

![在此处输入图像描述](../Images/7f79d2537f52668ad20373cfe2f4bd1f.png)

# c# - 带有日期过滤器的 C# GetFiles

> ID：11942979
> 
> 赞同：10
> 
> 时间：2012-08-13T19:34:02.827
> 
> 标签：c#, performance

有没有更有效的方法来使用日期过滤器从目录中填充文件名列表？

目前，我正在这样做：

```
foreach (FileInfo flInfo in directory.GetFiles())
{
    DateTime yesterday = DateTime.Today.AddDays(-1);
    String name = flInfo.Name.Substring(3,4);
    DateTime creationTime = flInfo.CreationTime;
    if (creationTime.Date == yesterday.Date)
       yesterdaysList.Add(name);
} 
```

这会遍历文件夹中的每个文件，我觉得应该有一种更有效的方法。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-13T19:57:42.087

**第一个解决方案：**

您可以使用 LINQ：

```
List<string> yesterdaysList = directory.GetFiles().Where(x => x.CreationTime.Date == DateTime.Today.AddDays(-1))
                                                  .Select(x => x.Name)
                                                  .ToList(); 
```

然后你可以直接使用这个名字列表。

**第二种解决方案：**

另一种使其更快的解决方案可能是：

```
DateTime yesterday = DateTime.Today.AddDays(-1); //initialize this variable only one time

foreach (FileInfo flInfo in directory.GetFiles()){
    if (flInfo.CreationTime.Date == yesterday.Date) //use directly flInfo.CreationTime and flInfo.Name without create another variable 
       yesterdaysList.Add(flInfo.Name.Substring(3,4));
} 
```

**基准：**

我使用以下代码进行了基准测试：

```
class Program {
    static void Main( string[ ] args ) {
        DirectoryInfo directory = new DirectoryInfo( @"D:\Films" );
        Stopwatch timer = new Stopwatch( );
        timer.Start( );

        for ( int i = 0; i < 100000; i++ ) {
            List<string> yesterdaysList = directory.GetFiles( ).Where( x => x.CreationTime.Date == DateTime.Today.AddDays( -1 ) )
                                              .Select( x => x.Name )
                                              .ToList( );
        }

        timer.Stop( );
        TimeSpan elapsedtime = timer.Elapsed;
        Console.WriteLine( string.Format( "{0:00}:{1:00}:{2:00}", elapsedtime.Minutes, elapsedtime.Seconds, elapsedtime.Milliseconds / 10 ) );
        timer.Restart( );

        DateTime yesterday = DateTime.Today.AddDays( -1 ); //initialize this variable only one time
        for ( int i = 0; i < 100000; i++ ) {
            List<string> yesterdaysList = new List<string>( );

            foreach ( FileInfo flInfo in directory.GetFiles( ) ) {
                if ( flInfo.CreationTime.Date == yesterday.Date ) //use directly flInfo.CreationTime and flInfo.Name without create another variable 
                    yesterdaysList.Add( flInfo.Name.Substring( 3, 4 ) );
            }
        }

        timer.Stop( );
        elapsedtime = timer.Elapsed;
        Console.WriteLine( string.Format("{0:00}:{1:00}:{2:00}", elapsedtime.Minutes, elapsedtime.Seconds, elapsedtime.Milliseconds / 10));
        timer.Restart( );

        for ( int i = 0; i < 100000; i++ ) {
            List<string> list = new List<string>( );

            foreach ( FileInfo flInfo in directory.GetFiles( ) ) {
                DateTime _yesterday = DateTime.Today.AddDays( -1 );
                String name = flInfo.Name.Substring( 3, 4 );
                DateTime creationTime = flInfo.CreationTime;
                if ( creationTime.Date == _yesterday.Date )
                    list.Add( name );
            }
        }

        elapsedtime = timer.Elapsed;
        Console.WriteLine( string.Format( "{0:00}:{1:00}:{2:00}", elapsedtime.Minutes, elapsedtime.Seconds, elapsedtime.Milliseconds / 10 ) );
    }
} 
```

**结果：**

```
First solution: 00:19:84
Second solution: 00:17:64
Third solution: 00:19:91 //Your solution 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-13T22:30:28.387

我认为您是在文件系统级别而不是 C# 级别获得更高的效率。如果是这样，答案是**否定**的：没有办法告诉文件系统按日期过滤。它将不必要地返回所有内容。

如果您追求 CPU 效率：这是没有意义的，因为将项目添加到列表框比按日期过滤要昂贵得多。优化代码不会产生任何结果。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-14T00:38:43.470

我不想用正确的创建日期创建足够多的文件来做一个像样的基准测试，所以我做了一个更通用的版本，它需要一个开始和结束时间，并给出匹配的文件名称。让它给出昨天创建的文件的特定子字符串自然会随之而来。

我想出的最快的单线程纯 .NET 答案是：

```
private static IEnumerable<string> FilesWithinDates(string directory, DateTime minCreated, DateTime maxCreated)
{
    foreach(FileInfo fi in new DirectoryInfo(directory).GetFiles())
        if(fi.CreationTime >= minCreated && fi.CreationTime <= maxCreated)
            yield return fi.Name;
} 
```

我本来预计`EnumerateFiles()`会稍微快一点，但结果会稍微慢一些（如果你通过网络可能会更好，但我没有测试过）。

有一点收获：

```
private static ParallelQuery<string> FilesWithinDates(string directory, DateTime minCreated, DateTime maxCreated)
{
    return new DirectoryInfo(directory).GetFiles().AsParallel()
        .Where(fi => fi.CreationTime >= minCreated && fi.CreationTime <= maxCreated)
        .Select(fi => fi.Name);
} 
```

但不多，因为它无助于实际调用`GetFiles()`. 如果您没有要使用的内核，或者没有足够大的结果，`GetFiles()`那只会让事情变得更糟（开销`AsParallel()`大于并行过滤的好处）。另一方面，如果您也可以并行执行后续处理步骤，那么整体应用程序速度可能会提高。

这样做似乎没有意义，`EnumerateFiles()`因为它似乎不能很好地并行化，因为它基于我将要讨论的相同方法，而且这本质上是串行的 - 需要先前的结果来产生下一个结果。

我得到的最快的是：

```
public const int MAX_PATH = 260;
public const int MAX_ALTERNATE = 14;

[StructLayoutAttribute(LayoutKind.Sequential)]
public struct FILETIME
{
    public uint dwLowDateTime;
    public uint dwHighDateTime;
    public static implicit operator long(FILETIME ft)
    {
        return (((long)ft.dwHighDateTime) << 32) | ft.dwLowDateTime;
    }
};

[StructLayout(LayoutKind.Sequential, CharSet=CharSet.Unicode)]
public struct WIN32_FIND_DATA
{
    public FileAttributes dwFileAttributes;
    public FILETIME ftCreationTime;
    public FILETIME ftLastAccessTime;
    public FILETIME ftLastWriteTime;
    public uint nFileSizeHigh;
    public uint nFileSizeLow;
    public uint dwReserved0;
    public uint dwReserved1;
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst=MAX_PATH)]
    public string cFileName;
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst=MAX_ALTERNATE)]
    public string cAlternate;
}

[DllImport("kernel32", CharSet=CharSet.Unicode)]
public static extern IntPtr FindFirstFile(string lpFileName, out WIN32_FIND_DATA lpFindFileData);

[DllImport("kernel32", CharSet=CharSet.Unicode)]
public static extern bool FindNextFile(IntPtr hFindFile, out WIN32_FIND_DATA lpFindFileData);

[DllImport("kernel32.dll")]
public static extern bool FindClose(IntPtr hFindFile);

private static IEnumerable<string> FilesWithinDates(string directory, DateTime minCreated, DateTime maxCreated)
{
    long startFrom = minCreated.ToFileTimeUtc();
    long endAt = maxCreated.ToFileTimeUtc();
    WIN32_FIND_DATA findData;
    IntPtr findHandle = FindFirstFile(@"\\?\" + directory + @"\*", out findData);
    if(findHandle != new IntPtr(-1))
    {
        do
        {
            if(
                (findData.dwFileAttributes & FileAttributes.Directory) == 0
                &&
                findData.ftCreationTime >= startFrom
                &&
                findData.ftCreationTime <= endAt
            )
            {
                yield return findData.cFileName;
            }
        }
        while(FindNextFile(findHandle, out findData));
        FindClose(findHandle);
    }
} 
```

没有a`FindClose()`承诺的事情是很冒险的`IDisposable`，并且手动实现`IEnumerator<string>`不仅应该使这更容易做到（这样做的严重原因），而且还希望像 3 纳秒或其他东西一样减少（不是这样做的严重理由） ，但上面显示了基本思想。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-06-01T13:47:49.860

我用 ：

```
DirectoryInfo dI = new DirectoryInfo(fileLocation); 
var files = dI.GetFiles().Where(i=>i.CreationTime>=dateFrom && i.CreationTime<=dateTo); 
```

# wordpress - 此代码如何用作简码

> ID：11942984
> 
> 赞同：0
> 
> 时间：2012-08-13T22:02:11.033
> 
> 标签：wordpress, shortcode

我想在 Wordpress 短代码中使用以下代码，以便可以像 [推荐书] 一样使用它，我已经尝试了很多次，但都失败了，非常感谢您的想法：

```
<div class="row cols3 testimonials">
<?php $postnum=1; query_posts('post_type=testimonial&showposts=3'); if (have_posts()) $post = $posts[0]; $c=0; while ( have_posts() ) : the_post();?>
<article class="col<?php if($postnum ==1){echo" first";}elseif($postnum==3){echo" last";}?>">
<p><?php echo get_the_content(); ?></p>
<div class="arrow"><div class="tri"></div></div>
<div class="name"><strong><?php global $post;$text = get_post_meta( $post->ID, '_cmb_testominal_author', true );echo $text;?></strong> - <?php global $post;$text = get_post_meta( $post->ID, '_cmb_testominal_company', true );echo $text;?></div>
</article>
<?php $postnum++; endwhile; wp_reset_postdata(); ?>
</div><!-- /Testimonials --> 
```

****更新****

下面的代码有效，但我真的不知道如何，我不太有信心使用它，因为我不明白它是如何工作的。任何帮助都会很棒：

```
<?php
function testimonials_shortcode($atts, $content = null) {
$the_query = new WP_Query();
$the_query->query($atts);
if ($the_query->have_posts()) : while ($the_query->have_posts()) :  
$the_query->the_post(); ob_start(); ?>

<div class="row cols3 testimonials">
<?php $postnum=1; query_posts('post_type=testimonial&showposts=3'); if (have_posts()) $post = $posts[0]; $c=0; while ( have_posts() ) : the_post();?>
<article class="col<?php if($postnum ==1){echo" first";}elseif($postnum==3){echo" last";}?>">
<p><?php echo get_the_content(); ?></p>
<div class="arrow"><div class="tri"></div></div>
<div class="name"><strong><?php global $post;$text = get_post_meta( $post->ID, '_cmb_testominal_author', true );echo $text;?></strong> - <?php global $post;$text = get_post_meta( $post->ID, '_cmb_testominal_company', true );echo $text;?></div>
</article>
<?php $postnum++; endwhile; wp_reset_postdata(); ?>
</div><!-- /Testimonials -->

<?php endwhile; endif; wp_reset_query(); 
$content = ob_get_contents(); ob_end_clean();
return $content;
}

add_shortcode('testimonials', 'testimonials_shortcode');
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:39:00.030

这是您要查找的内容（减去帖子计数）。将其粘贴到您`functions.php`并`[testimonials]`在帖子编辑器中使用，或直接在模板中使用`<?php echo do_shortcode("[testimonials]");`

```
function testimonials_function(){ 

  ob_start();
  ?>
  <div class="row cols3 testimonials">
  <?php 

  $custom_query = new WP_Query( 'post_type=testimonial&posts_per_page=3' );

  if($custom_query->have_posts()) :

     while ( $custom_query->have_posts() ) : $custom_query->the_post();
     ?>
            <article>
              <p><?php the_content(); ?></p>
              <div class="arrow"><div class="tri"></div></div>
              <div class="name"><strong><?php echo get_post_meta( get_the_id(),'_cmb_testominal_author', true ); ?></strong> - <?php echo get_post_meta( get_the_id(),'_cmb_testominal_company', true ); ?></div>
           </article>   
    <?php       
    endwhile;

  endif;

  // Reset Post Data
  wp_reset_postdata();

  $content =  ob_get_contents();
  ob_clean();

  return $content;

}

add_shortcode('testimonials','testimonials_function'); 
```

让我知道事情的后续。

# ruby - 降级 gem 时，bundler 可以自动降级 gem 的依赖项吗？

> ID：11942985
> 
> 赞同：4
> 
> 时间：2012-08-13T22:02:14.153
> 
> 标签：ruby, gem, dependencies, bundler, downgrade

早些时候，我在我的 Rails 项目的 Gemfile 中更改了 gem 版本。我运行了 bundler update gemname，这安装了多个依赖项的最新版本，这让我很惊讶。

现在，我需要降级到旧版本的 gem。我已经在我的 Gemfile 中改回了版本，并再次运行 bundler upgrade gemname （和 bundler install 来衡量），但现在之前升级的 gem（依赖项）仍然是较新的版本（我猜 gem没有指定版本，所以它只是使用最新的？）。

有没有办法将这些依赖项降级到升级 gem 之前的位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T13:51:45.483

您始终可以在 Gemfile.xml 中使用所需的版本号指定依赖的 gem。这将强制 bundler 重新评估依赖项并根据需要降级它们。这并不理想，但是一旦版本自行排序，您将来就可以删除指定的 gem。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T22:04:34.087

如果依赖 gem 没有指定，Bundler 无法知道依赖 gem 的最大版本。除非降级 gem 确实改变了它的依赖关系，否则您唯一真正的选择是从版本控制中检出 gemfile.lock 的先前版本。否则不，你不能做你想做的事；Bundler 将尊重您当前的 gemfile.lock，除非您的 gem 的依赖项在降级时发生变化，否则它不会改变。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-27T06:51:53.267

我会将此添加为评论，但由于我的声誉，我不能，所以我希望有人觉得这很有用。

我也[按照 nmott 的](https://stackoverflow.com/users/864651/nmott)建议做了。只需在您的 Gemfile 中添加依赖项，例如： `gem 'gem-name', '~> 1.5.0'`

并运行`bundle update gem-name`

然后，当您的依赖项被降级时，从 Gemfile 中删除该行并保持原样。

# android - Android 权限依赖

> ID：11942989
> 
> 赞同：1
> 
> 时间：2012-08-13T22:02:39.683
> 
> 标签：android, permissions

我有一个 APK，它公开了一个`Service`受自定义权限保护的 AIDL 接口。当我的 APK 在客户端应用程序之前安装时，一切正常。但是，当相反的情况成立时，即`<use-permission>`在我的 APK 之前安装客户端应用程序（在 中具有我的自定义权限）时，会引发 SecurityExceptions。

有没有解决的办法？我遇到过[这个旧的谷歌群组帖子](https://groups.google.com/forum/?fromgroups#!topic/android-developers/kCJN1rj5pMo)，但该解决方案不适用于我的情况。也就是说，客户端应用程序无法在其清单中声明权限。

这不是典型的用例吗？

# php - 修复 Joomla 中由先前修改引起的错误？

> ID：11942990
> 
> 赞同：0
> 
> 时间：2012-08-13T22:02:40.223
> 
> 标签：php, debugging, joomla, content-management-system

我正在使用 Joomla 1.5.26 管理某人的网站，并且发现各种问题。在各个地方，单击链接或提交表单时会出现多个重定向，我不知道为什么。该网站是由我之前的人开发的，绝对是他们所做的更改导致了它，但我在 Joomla 方面的经验很少，不知道从哪里开始。

我目前正试图弄清楚为什么链接会以这种方式重定向。它是其中一个侧面导航上的菜单选项，并导致页面由于某种原因缺少开始的 html、body、head 等标签。这个页面的底部是 html 和 head 标签，head 标签包含一个用于 http“刷新”的 meta 标签。这链接到具有相同 url 但添加了`"?fid=367"`. 我发现他们所做的更改导致了重定向，所以我试图回溯以找出如何避免重定向的需要。我首先试图了解为什么没有显示开头的 html 标签，但是，正如我所说，我不确定从哪里开始使用 Joomla。

除了重新开始之外，是否有任何调试工具/方法可以帮助我？像 Joomla 一样有条理，仍然很难导航到处发生的各种包含和函数调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:26:35.283

在 joomla 上进行调试的一个有用工具是 JDump-JED[链接](http://extensions.joomla.org/extensions/miscellaneous/development/1509)。但是，如果没有太多详细信息，很难说它在您的具体情况下会有多大用处！

我要说的是 HTML 标签应该来自模板 - 但如果某些页面正在工作而其他页面不工作 - 它可能会建议模板覆盖某个不起作用的地方（尽管我应该补充一点，这只不过是关于我的部分无法看到该网站）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T00:33:00.417

调试 Joomla 的最佳方式！是使用您最喜欢的与 Zend Debug 或 XDebug 配合使用的 PHP IDE 安装在本地开发服务器上。然后使用[Eclipse](http://www.eclipse.org)之类的工具，您可以单步执行代码并找出发生了什么。

如果您正在处理该站点的远程副本，那么我将打开调试模式并使用[JDump](http://extensions.joomla.org/extensions/miscellaneous/development/1509)和许多其他工具`print_r()`来帮助您追踪问题。不幸的是，1.5.x 行中的调试模式不如 2.5 行好，但它可能会有所帮助。

请记住，如果您使用 JDump！到：

1.  完成后卸载它
2.  永远不要在实时网站上使用它

# python - 在 cython 中定义和使用数学函数

> ID：11942993
> 
> 赞同：2
> 
> 时间：2012-08-13T22:03:01.023
> 
> 标签：python, performance, numeric, cython, symbolic-computation

我是 python 新手，正在努力让 cython 加速我的一些计算。我已经尝试了我能想到的所有可能的方法，但似乎我还没有理解某些东西，所以我惨遭失败。我有这些文件：第一个名为`Myfunc.pyx`：

```
import math
from sympy import Symbol
x = Symbol('x')

wi=10

cdef float MyList(float a,float b):
  return [(xa,ya,wi+a.subs(x,xa)*math.sin(xa)*b.subs(x,xa)*math.exp(1/ya**2)) for xa in range(1,5001,10) for ya in range(-2501,2501,10)] 
```

`setup.py`: _

```
from distutils.core import setup
from distutils.extension import Extension
from Cython.Distutils import build_ext

ext_modules=[
    Extension("Myfunc",
              ["Myfunc.pyx"],
              libraries=["m"]) # Unix-like specific
]

setup(
  name = "Demos",
  cmdclass = {"build_ext": build_ext},
  ext_modules = ext_modules
) 
```

最后是`calc.py`我运行的python脚本来获取我想要的列表，称为“MyList1”：

```
import Myfunc
from sympy import Symbol
import math

x = Symbol('x')

a1=(10*x)**(0.5)
b1=(20*x)**(0.5)
wi=10

MyList1=Myfunc.MyList(a1,b1)
print MyList1 
```

现在进行一些澄清：1) x,y 在以前的脚本中纯粹用作推导公式的符号。我使用`a.subs(x,xa)`and `b.subs(x,xa)`（参见第一个文件 Myfunc.pyx）去掉 x 并用 xa 替换它，最终得到数字而非符号解决方案。2）我认为在第三个文件（calc.py）的顶部我不应该使用`import Myfunc`但我没有得到的其他东西。**我想我应该做什么：**运行 setup.py 然后因为有 2 个新文件创建了 Myfunc.c 和 Myfunc.所以我只运行 calc.py 文件，据说我会在纯 python 中更快地获得我的数字. **必须做什么：**我终于不知道...... **如果可能**的话我想要什么： `exp()`and `a.subs(x,xa)`and`b.subs(x,xa)`我认为正在减慢我的计算速度。我尝试将这段代码从纯 python 转换为“cython”（我认为转换不是描述这个的好词）。官方网站上的教程对我来说有点难以理解，所以我总是无法做到这一点。请原谅我的英语，因为我的气垫船里装满了鳗鱼

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T22:38:54.170

无法将 sympy 与 cython 结合使用。Cython 通过将 cdef 类和声明的变量转换为 C 并编译它来加速 python。sympy.Symbol 或任何其他 sympy 函数没有 C++ 等效函数，因此不能编译成 C，因此没有加速。

更具体地说。当您声明`a`with 时`float a`，它是 C double 而不是 sympy 类型。因此它没有`.subs`办法。（它不能有）

如果我了解您正在研究的内容，numpy 是比 cython 更好的解决方案。本质上 numpy.arrays 是 C 数据类型。当您使用它们执行计算时，它会以 C++ 速度发生。它记录了如何将 numpy 与 sympy 一起使用。如果由于任何原因您无法使用 numpy（不太可能）实现您的意图，那么 numpy 仍然可以很好地与 cython 一起使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T01:19:18.500

有多种方法可以从 SymPy 中的符号表达式开始，并以快速数字代码结束。

*   您可以查看 SymPy 的代码生成

*   您可以查看 lamdify 功能

# c++ - 为什么我不能返回模板中数组的第一个元素？

> ID：11942997
> 
> 赞同：11
> 
> 时间：2012-08-13T22:03:20.090
> 
> 标签：c++, arrays, templates

考虑：

```
#include <iostream>

template <typename T> T getArray( T &arr ) {
    return *arr;
}

int main() {

    int a[] = {5, 3, 6};

    std::cout << getArray(a);

} 
```

假设打印数组中的第一个元素，但它不起作用。这是为什么？

它给了我错误：

```
error: no matching function for call to 'getArray(int [3])' 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-13T22:12:08.697

的类型`a`是`int[3]`，所以的类型`T`是`int[3]`。**数组不能从函数返回。**

在 C++11 中，您可以这样做：

```
template <typename T>
auto getArray(T &arr) -> decltype(*arr)
{ 
    return *arr; 
} 
```

或这个：

```
// requires <type_traits>

template <typename T>
typename std::remove_extent<T>::type& getArray(T &arr)
{ 
    return *arr; 
} 
```

在 C++03 中，您可以这样做，但并不完全相同：

```
template <typename T>
T getArray(T* arr /* not really an array */)
{ 
    return *arr; 
} 
```

或者：

```
template <typename T, std::size_t N>
T getArray(T (&arr)[N])
{ 
    return *arr; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T22:12:18.793

尝试

```
template <typename T, size_t N>
T getArray( T (&arr)[N] ) {
    return *arr;
} 
```

所以这`T`是元素的类型，而不是数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T22:12:20.590

It does not even compile on MSVC++ 2010 Express. As I expected, this is because you are using a reference as a parameter, a scalar as a return value and a pointer is passed to the function call. I do not know the exact rules regarding templates (i.e. how exactly the type is determined) but that code has to be confusing the hell out of the compiler. The following code returns what you expected it to return.

```
#include <iostream>

template <typename T> T getArray( T* arr ) {
    return *arr;
}

int main() {

    int a[] = {5, 3, 6};

    std::cout << getArray(a);

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T22:14:26.953

Could you try :

```
#include <iostream>

template <typename T> T getArray( T arr[] ) {
    return *arr;
}

int main() {

    int a[] = {5, 3, 6};

    std::cout << getArray(a);

} 
```

# php - 错误：SQLSTATE[HY093]：无效的参数号：绑定变量的数量与标记的数量不匹配

> ID：11942999
> 
> 赞同：3
> 
> 时间：2012-08-13T22:03:26.213
> 
> 标签：php, mysql, database, pdo

看到这是错误绑定（搜索stackoverflow）的错误，但看起来我已经绑定了所有变量并且没有拼写错误......我在这里错过了明显的东西吗？

```
function connect () {
global $pdo;
try {
    $pdo = new PDO("mysql:host=localhost;dbname=test", "root", "root");
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} catch(PDOException $e) {
    echo 'ERROR: ' . $e->getMessage();
  }
}

function getPhotos ($status = 0, $type = null, $session = null, $name = null) {
global $pdo;
try {
    $sql = 'SELECT * FROM images WHERE 1=1';

    //Status Filter Query
    $sql .=' AND status = :status';

    //Type Filter Query
    if (!is_null($type)) {
        $sql .=' AND type = :type';
    }

    // Session Filter Query
    if (!is_null($session)) {
        $sql .=' AND session = :session';
    }

    // Twitter Handle Filter Query
    if (!is_null($name)) {
        $sql .=' AND handle = :name';
    }

    //Prepare The Query
    $stmt = $pdo->prepare($sql);

    //Fire The Lasers
    $stmt->execute(array(':status' => $status, ':type' => $type, ':session' => $session, ':name' => $name));

    //Grab 
    return $stmt->fetchAll(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T22:08:34.350

仅在将变量实际添加到查询时才绑定它们：

```
//Status Filter Query
$sql .=' AND status = :status';

$vars = array(':status' => $status);

//Type Filter Query
if (!is_null($type)) {
    $sql .=' AND type = :type';
    $vars[':type'] = $type;
}

// Session Filter Query
if (!is_null($session)) {
    $sql .=' AND session = :session';
    $vars[':session'] = $session;
}

// etc.

$stmt->execute($vars); 
```