# StackOverflow 问答 11343000-11343999

# c++ - VS 中的不稳定行为

> ID：11343001
> 
> 赞同：0
> 
> 时间：2012-07-05T11:03:03.303
> 
> 标签：c++, visual-studio-2005, disassembly

```
if(!base_initialized())return;  

    if(strcmp(fname,name) != 0)
    {
        -->std::string strentry;

        std::stringstream ss; 
```

当我在 --> 的行上放置一个断点时，有一个不稳定的行为，当我按 F10 时它不会进入下一行，它只是走出了块..

拆卸对我来说也很奇怪..是这样的。

```
if(!base_initialized())return;  

    if(strcmp(fname,name) != 0)
    {
        -->>std::string strentry;
004013F0  mov         dword ptr [esp+0Ch],ebx 
004013F4  call        dword ptr [__imp_base_initialized (4071BCh)] 
004013FA  test        eax,eax 
004013FC  je          writetohashset+2C1h (401671h) 
00401402  mov         ecx,ebx 
00401404  mov         eax,esi 
00401406  mov         dl,byte ptr [eax] 
00401408  cmp         dl,byte ptr [ecx] 
0040140A  jne         writetohashset+76h (401426h) 
    if(!base_initialized())return;  

    if(strcmp(fname,name) != 0)
0040140C  test        dl,dl 
0040140E  je          writetohashset+72h (401422h) 
00401410  mov         dl,byte ptr [eax+1] 
00401413  cmp         dl,byte ptr [ecx+1] 
00401416  jne         writetohashset+76h (401426h) 
00401418  add         eax,2 
0040141B  add         ecx,2 
0040141E  test        dl,dl 
00401420  jne         writetohashset+56h (401406h) 
00401422  xor         eax,eax 
00401424  jmp         writetohashset+7Bh (40142Bh) 
00401426  sbb         eax,eax 
00401428  sbb         eax,0FFFFFFFFh 
0040142B  test        eax,eax 
0040142D  je          writetohashset+2C1h (401671h) 
    {
        -->>std::string strentry;
00401433  lea         ecx,[esp+0B4h] 
0040143A  call        dword ptr [__imp_std::basic_string<char,std::char_traits<char>,std::allocator<char> >::basic_string<char,std::char_traits<char>,std::allocator<char> > (407084h)] 

        std::stringstream ss; 
```

注意带箭头的两条线。同一事物有多个定义。

# c# - 使用 Kinect for Windsows SDK、XNA 和坐姿模式的奇怪结果

> ID：11343002
> 
> 赞同：1
> 
> 时间：2012-07-05T11:03:05.270
> 
> 标签：c#, xna, kinect

在 Kinect for Windows Developer Toolkit 1.5.1 的 Xna 示例中使用坐姿模式时，我遇到了一个奇怪的问题。

我添加到代码中的唯一内容是流畅的线条。

```
 this.Sensor.SkeletonStream.TrackingMode = SkeletonTrackingMode.Seated; 
```

![在此处输入图像描述](../Images/a40d372751943c4a6ac57eb4b7176a9b.png)

有没有人尝试过使用 XNA 和坐姿模式而没有遇到这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:26:58.790

这看起来像 XNA 样本试图绘制所有关节。由于在坐姿模式下只有有限的一组关节可用，其余关节在默认位置绘制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T02:20:00.493

我已经用你添加的那行测试了这个，我很确定这只是一个小故障。我的 kinect (xbox) 只有在我离它一英尺的时候才会出现问题，这是正常的，所以这只是一个小故障。希望这可以帮助！

# javascript - 如何使用 javascript 动态单击“a href 链接”

> ID：11343004
> 
> 赞同：0
> 
> 时间：2012-07-05T11:03:21.417
> 
> 标签：javascript, javascript-events

> **可能重复：**
> [是否可以通过 JavaScript 触发链接（或任何元素）的点击事件？](https://stackoverflow.com/questions/143747/is-it-possible-to-trigger-a-links-or-any-elements-click-event-through-javasc)

如何使用 javascript 动态单击“a href 链接”

我正在使用此代码来调用 javascript 代码

```
<a href="javascript:void(0)" onclick="javascript:execute();"> 
```

我想自动点击这个链接

可以用javascript吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:06:30.910

给你的href链接一些id然后使用它：document.getElementById('id').click();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:15:22.797

A 元素旨在用作链接或锚点，如果您不想要其中任何一个，则应使用其他元素。在这种情况下，按钮似乎是更好的选择。然后用户有一个视觉线索，该元素会做某事但不会在任何地方导航。

您可以在元素上调度一个事件（请参阅 xdazz 的评论），或者如果您不希望单击冒泡，您可以调用处理程序并将元素设置为`this`：

```
element.onclick.call(element); 
```

# linux - 如何使用 awk 将电子邮件发送到文本文件中的电子邮件地址列表？

> ID：11343012
> 
> 赞同：1
> 
> 时间：2012-07-05T11:03:46.080
> 
> 标签：linux, email, shell, variables, awk

如果我有一个包含电子邮件地址列表的文本文件，我该如何浏览该列表并向这些电子邮件地址中的每一个发送一封电子邮件，并将文本文件作为消息。即，我想将电子邮件作为变量接收，以便执行以下命令：

```
mail -s "Welcome" email@address.com < welcome.txt 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T11:15:53.767

例如，您有一个`mails_addresses.txt`文件，每行一个地址，如下所示：

```
email1@mail.com
email2@mail.com
email3@mail.com 
```

如果您有另一个需要解析的复杂结构，例如`awk`，您应该向我们展示。

所以你只需要编写一个循环来读取它并将其发送到`mail`命令：

```
while read MAIL
do
    mail -s "Welcome" "$MAIL" < welcome.txt
done < mails_addresses.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T11:13:37.860

即使没有，您也可以这样做`awk`：

```
cat users-list | while read addr
do
mail -s "Welcome" "$addr" < welcome.txt
done 
```

# java - glassfish servlet：如何知道引用 url？如果可能的话

> ID：11343014
> 
> 赞同：0
> 
> 时间：2012-07-05T11:03:56.873
> 
> 标签：java, servlets, glassfish, httprequest, http-referer

使用 HttpServletRequest 对象，我们可以使用 getRequestURL，它显示请求的资源，但在我的情况下，我想知道请求来自哪里：

我还尝试了打印我的本地 IP 的 getRemoteAddr() 和 getLocalAddr() （因为我正在运行 glassfish 和在本地与 glassfish 对话的小型网络服务器。

但是IP没有显示完整的引用者，这应该是我的情况

```
http://my.domain.com/wiki/aPage 
```

从我的 IP 我可以解析到[http://my.domain.com](http://my.domain.com)，但不是完整的 url

这是否意味着我还需要在请求中发送“wiki/aPage”，或者我希望有更好的可能性？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T11:08:15.830

您可以阅读`Referer header`请求并通过使用获取值`request.getHeader("Referer");`

# c++ - 类中的成员变量在哪里分配？

> ID：11343015
> 
> 赞同：1
> 
> 时间：2012-07-05T11:03:58.697
> 
> 标签：c++

我有一堂课

```
class Sample
{
   string strName;
}; 
```

`Sample *obj = new Sample()`如果我使用创建字符串的位置为示例创建一个对象`strName`？它是在堆栈中还是在堆中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T11:05:13.477

无处，因为`Sample obj = new Sample()`不会编译。

如果您的意思是`Sample* obj = new Sample()`，那么它在动态存储（堆）中。

当您调用`delete obj`时，字符串将被自动删除，即使它在堆上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T11:06:27.523

整个 og`obj`都在“堆”上，它的数据成员也是如此。但是，您不必担心管理分配给数据成员的内存。删除`obj`也会处理字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T11:11:15.237

`strName`将放置在您`Sample`放置对象的位置。但是，类`string`可能在后台寻址它喜欢的任何存储，是否使用普通变量（然后再次将它们放置在`string`放置的位置，指向某物的指针，内存映射，始终只是从另一端查询 XML 接口地球。

但是，`string`必须以某种方式存储地址，例如，将其指针或引用或 url 或使用的任何寻址方案放置在`string`放置的位置。

* * *

*相关经验法则*：指针本身就是值（这就是为什么在对象复制情况下很难正确处理）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T11:10:26.703

结构体、数组、指针和基本数值类型将在分配类的任何位置与类一起创建。

字符串更复杂。它们是一种容器。定义容器的字符串成员将作为示例类中的成员存储在类的内存块中。字符串的文本可能会分配到堆上的其他地方（取决于字符串类的实现）。

现在，如果你这样做，`Sample* blah = new Sample();`那么 operator new 将在堆中分配内存（指针将在堆栈上，或者如果它最初是堆上某个类的成员，则在堆上）。
如果只是将其用作变量，它将存储在堆栈中：`Sample blah;`

# java - 如何点击一个 WebDriver 的元素？

> ID：11343017
> 
> 赞同：8
> 
> 时间：2012-07-05T11:04:00.323
> 
> 标签：java, selenium, webdriver, ui-automation

这是一段 UI 代码

```
<select id="order_unit_line_rate_806782_is_addenda_enabled" class="selects_for_487886" onchange="select_addendum(806782, this);dateShowMemory(this.options[this.selectedIndex].value, '806782');" uniqueattr="Dynamic Site Accelerator / Dynamic Site Accelerator / Additional Usage Commitment / drop down" name="order_unit_line_rate[806782][is_addenda_enabled]">
     <option value="0" uniqueattr="Dynamic Site Accelerator / Dynamic Site Accelerator / Additional Usage Commitment / Fee">                     Fee                   </option>
     <option value="1" uniqueattr="Dynamic Site Accelerator / Dynamic Site Accelerator / Additional Usage Commitment / See Attached Addendum">                     See Attached Addendum                   </option>
</select> 
```

`<option>`标签嵌套在标签内的位置`<select>`。我需要`click()`在第二个`<option>`元素上，它是下拉列表中的一个项目。当我尝试使用 id / uniqueattr`click()`在标签上时，下拉菜单是可点击的。`<select>`

如何遍历`<option>`嵌套在下面的标签`<select>`并单击正确的项目？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T12:20:07.347

除了正确的 Qwerky 的答案，你还可以做简单的

```
driver.findElement(By.xpath("//select/option[@value='1']")).click(); 
```

这会找到`option`元素`value='1'`并单击它，实际上是在下拉列表中选择它。

我的解决方案和 Qwerky 的解决方案都[在文档中进行了描述和解释](http://seleniumhq.org/docs/03_webdriver.html#user-input-filling-in-forms)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-05T11:15:17.223

这将在 ID 为“order_unit_line_rate_806782_is_addenda_enabled”的选择中选择值为“1”的选项。

```
Select select = (Select)webdriver.findElement(By.id("your id here"));
select.selectByValue("1"); 
```

您也可以按索引或文本选择；[请参阅文档](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/Select.html)。

# iphone - Facebook ios sdk：将其集成到我的应用程序后找不到页面消息

> ID：11343023
> 
> 赞同：4
> 
> 时间：2012-07-05T11:04:13.063
> 
> 标签：iphone, objective-c, xcode, facebook-graph-api, ios4

`The page you requested was not found.`
当我在示例应用程序中执行此操作时，我已经搜索了很多关于此的问题，然后它运行良好，并且连接到 facebook 并成功发布工作。但是当我将它集成到我的应用程序中时，当我点击 Facebook 分享按钮然后登录后它给出`The page you requested was not found`
了这是什么问题，请在我使用最新版本时提供帮助`facebook ios sdk`

请帮忙！！！

这是我的代码

```
facebook = [[Facebook alloc] initWithAppId:@"App_id" andDelegate:self];

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if ([defaults objectForKey:@"FBAccessTokenKey"] 
    && [defaults objectForKey:@"FBExpirationDateKey"]) {
    facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
    facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
}

if (![facebook isSessionValid]) {
    [facebook authorize:nil];
}
else {
    [self showShareDialog];
} 
```

///// 显示 ShareDialog 方法

`NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys: @"App_id", @"app_id",nil];`

```
[facebook dialog:@"feed" andParams:params andDelegate:self]; 
```

哦，我不知道如何处理这个问题。我尝试了所有解决方案，但没有人为我工作。问题是当我创建一个新应用程序然后使用 facebook ios sdk 然后它工作得很好但是当我在我自己的应用程序中做同样的事情时它就会出现问题。1) 未找到请求的页面 2) 不显示对话屏幕，无论它发布它返回到主 facebook 页面。

这是什么问题，求大神帮忙！！！我已经在 .plist 文件中设置了 url，但没有用。自上周以来我一直在忙这个，请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:25:32.027

问题出在 URL 中。您可能已经编辑了 FBConnect SDK 的 URL。再次检查。或者重新整合它。

编辑代码添加此代码

```
-(void)BtnClick{
    NSArray *permissions =[[NSArray arrayWithObjects:
                       @"email", @"read_stream", @"user_birthday", 
                       @"user_about_me", @"publish_stream", @"offline_access", nil] retain];
    Facebook *fb=[[Facebook alloc] initWithAppId:kappId];
    [fb authorize:permissions andDelegate:self];

}
- (void)fbDidLogin {

    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:msg, @"message",nil];
    [fb requestWithGraphPath:@"me/feed"
                                                andParams:params
                                            andHttpMethod:@"POST"
                                              andDelegate:self];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:27:07.433

请确认在 APP 设置中正确验证了回调 URL，这可能是与 URL 相关的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T11:28:15.657

你应该在你的 .plist 文件中设置它。

```
<key>CFBundleURLTypes</key>
<array>
    <dict>
        <key>CFBundleURLName</key>
        <string>000000000000000</string>
        <key>CFBundleURLSchemes</key>
        <array>
            <string>fb164798790305117</string>
        </array>
    </dict>
</array> 
```

其中**164798790305117**是您的 Facebook AppID，并将其替换为您的 AppID。

# objective-c - 取数组时如何一张一张显示图像？

> ID：11343025
> 
> 赞同：0
> 
> 时间：2012-07-05T11:04:18.870
> 
> 标签：objective-c

我是 iphone 的初学者，我有数组中的所有图像，但是当我在循环中执行数组时如何一张一张地显示..

```
NSArray *images = [[NSArray arrayWithObjects:   
                        [UIImage imageNamed:@"1.png"],
                        [UIImage imageNamed:@"2.png"],
                        [UIImage imageNamed:@"3.png"],
                        [UIImage imageNamed:@"4.png"],
                        nil] retain];  

 int i=0;
    int width = 0;
    int height = 0;
    for ( NSString *imageName in images )
    {
        //NSTimer *timer=[[NSTimer alloc]init];
        UIImage *image = [images objectAtIndex:i];
        //UIImage *image = [UIImage imageNamed:imageName];
        animalphoto = [[UIImageView alloc] initWithImage:image];
        animalphoto.contentMode = UIViewContentModeScaleAspectFit;
        animalphoto.clipsToBounds = YES;

        animalphoto.animationDuration=5.0;
        animalphoto.animationRepeatCount=0;

        animalphoto.frame = CGRectMake( animalphoto.frame.size.width * i++, 0, animalphoto.frame.size.width, animalphoto.frame.size.height);

       width = animalphoto.frame.size.width;
        height = animalphoto.frame.size.height;
        NSLog(@"print:%@",image);
        [animalphoto release];
    }

} 
```

给出适用于我们代码的任何建议和示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:15:18.510

而不是放置一个图像，只需将整个图像数组放入 imgview.animationImages = images 而不是 for 循环

如需进一步参考，请访问[本](http://appsamuck.com/day2.html)网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:15:17.837

您需要使用`UIImageView's`object`animationImages`设置`UIImage`数组
set `animationRepeatCount`
set`animationDuration`
然后调用`[imageView startAnimating];`以启动动画

# javascript - 加载后更改字体颜色

> ID：11343032
> 
> 赞同：0
> 
> 时间：2012-07-05T11:04:45.293
> 
> 标签：javascript, jquery, css

是否可以更改下面“查看结果”文本的颜色？

```
 <script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/6352993.js"></script>
    <noscript><a href="http://polldaddy.com/poll/6352993/">This is very long test question to test how polldaddy handles questions that exceed that normal length............ yes a very long question indeed..............</a></noscript>​ 
```

我试过覆盖css'pds-view-results'，这是“查看结果”的样式，但没有效果：

```
.pds-view-results {
    color: red;
} 
```

这是一个小提琴：

[http://jsfiddle.net/25LjE/36/](http://jsfiddle.net/25LjE/36/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T11:10:59.050

由于链接颜色已经由规则指定，您应该通过`!important`关键字覆盖它

```
.pds-view-results {
    color: red !important;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T11:12:44.407

你可以从 javascript 做到这一点：

```
$('.pds-view-results').css('color', 'red'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T11:27:25.017

你也可以设置你的`style` **迟到**

这样你就可以避免`!important`and `javascript`。但是，我建议你只放置最后一个这样的 CSS 规则，因为它可能会导致闪烁。试试看，它可能对你有用。

```
<script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/6352993.js"></script>
<noscript><a href="http://polldaddy.com/poll/6352993/">This is very long test question to test how polldaddy handles questions that exceed that normal length............ yes a very long question indeed..............</a></noscript>

<style type='text/css'>
    .pds-pd-link {
display: none !important;
}
.pds-box {
    width: 220px !important;
}
.pds-input-label{
    width: auto! important;
}
.PDS_Poll{
    margin-bottom:15px;
}
.pds-view-results {
    color: red;
}
#PDI_container6352993 .pds-links a{
  color:blue;
}
</style>​ 
```

[http://jsfiddle.net/nXS4J/](http://jsfiddle.net/nXS4J/)

# sql - 在保留 2 的情况下从 2 中创建 1 列

> ID：11343038
> 
> 赞同：2
> 
> 时间：2012-07-05T11:05:11.753
> 
> 标签：sql, r, merge

我有一个包含 8 个变量的表，我想合并 2 个名为 Sample 和 NorTum 的列，并且 Sample 和 NorTum 列都应该保留在表中。有人知道如何用 R 或 SQL 做到这一点？数据如下所示：

```
 Sample  Sample_Code Sample_Group    NorTum  Sentrix_ID  Sentrix_Position    Pool_ID Folderdate
 1  00_11242    00_11242T1  MUTYH   T1  1403371 R007_C006   GS0005703-OPA   Exp051118
 2  00_11242    00_11242T1  MUTYH   T1  1403371 R007_C012   GS0005704-OPA   Exp051118
 3  00_11242    00_11242T1  MUTYH   T1  1416198 R007_C006   GS0005701-OPA   Exp051118
 4  00_11242    00_11242T1  MUTYH   T1  1416198 R007_C012   GS0005702-OPA   Exp051118
 5  00_11242    00_11242T1  MUTYH   T1  1280307 R007_C006   GS0005703-OPA   Exp051116
 6  00_11242    00_11242T1  MUTYH   T1  1280307 R007_C012   GS0005704-OPA   Exp051116
 7  00_11242    00_24200N2  MUTYH   N   1403371 R007_C005   GS0005703-OPA   Exp051118
 8  00_11242    00_24200N2  MUTYH   N   1403371 R007_C011   GS0005704-OPA   Exp051118 
```

我很抱歉表格的格式不好。但是例如的想法是： Sample: 00_11242 和 Nortum: T1 合并到 Sample_ID 以便输出看起来像： Sample_ID:00_11242_T1

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T11:10:22.970

假设您的数据框称为 dat

```
dat$Sample_ID <- paste(dat$Sample, dat$NorTum, sep = "_") 
```

# python - django 本地和生产的几个设置

> ID：11343039
> 
> 赞同：-1
> 
> 时间：2012-07-05T11:05:12.647
> 
> 标签：python, django, django-settings

我有一个项目可以在本地机器上使用 uwsgi 启动，也可以`./manage.py runserver`在远程服务器上使用 uwsgi 启动。我有两个设置文件：设置（用于本地机器）和 prod_settings。因此，当我使用 uwsgi 启动项目时，我只需使用此选项

`env = DJANGO_SETTINGS_MODULE=prod_settings`

但有时我必须知道当前处于活动状态的模块。我可以检查`DJANGO_SETTINGS_MODULE`密钥，但认为这不是真正的方式。试图谷歌一些东西，但还没有找到任何东西。

感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:40:12.303

in your settings files:

```
import os
SETTINGS_MODULE = os.path.abspath(__file__) 
```

(or whatever you want)

but if it's just for debugging, that's not that much of an improvement wrt/ reading env["DJANGO_SETTINGS_MODULE"].

# c# - 在开发计算机上成功运行。但是当我在其他计算机上运行打包的 winform 应用程序时无法加载 z3.dll

> ID：11343045
> 
> 赞同：1
> 
> 时间：2012-07-05T11:05:28.450
> 
> 标签：c#, dll, z3

我使用 C# 的 Z3 api 开发了一个 win-form 应用程序。该应用程序可以在我以前开发的计算机上成功运行。但是在我用VISUAL STUDIO 2010中的“SETUP AND DEPLOYMENT”功能构建了一个安装项目后，打包的应用程序无法在开发计算机以外的计算机上成功运行。错误信息：运行时加载 z3.dll 失败。我该怎么做才能解决这个问题？</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T11:26:16.330

`z3.dll`是非托管 dll，由`Microsoft.Z3.dll`. 遗憾的是，您无法通过`Reference`Visual Studio 中的对话框引用它。

我猜在存在`z3.dll`的安装文件夹中丢失了`Microsoft.Z3.dll`。

我建议您在新机器上运行应用程序（包括`z3.dll`并`Microsoft.Z3.dll`在同一文件夹中），并在它们运行良好时尝试将所有必要的位打包到安装包中。

# c# - 如何从我的 wp7 应用程序在线读取文本文件？

> ID：11343050
> 
> 赞同：-3
> 
> 时间：2012-07-05T11:06:13.700
> 
> 标签：c#, windows-phone-7

我正在开发新的应用程序，请注意。我希望我的 Windows Phone 应用程序从我的 Dropbox 访问文本文件，并通过绑定将信息显示在文本块中。有谁知道我该怎么做？

或者如果有人知道我可以上传我的文本文件而不是 Dropbox 的另一个网站，请分享。我只是不想将所有信息硬核到应用程序中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:16:23.073

尝试找到`API`满足您要求的现有产品。那将是：

*   .NET Dropbox 客户端库
*   与 WP 的兼容性

[此处](https://stackoverflow.com/questions/2576923/dropbox-com-api-for-net)推荐一些 Dropbox 客户端库。

看起来[sharpbox](http://sharpbox.codeplex.com/)和[dropnet](https://github.com/dkarzon/DropNet)都兼容WP7。

使用它们来获取有关文件的信息 / 来获取文件。

此外，如果您是 WP7 编程新手，您可能需要查看以下一些资源：

*   [WP7 中的 MVVM](http://msdn.microsoft.com/en-us/library/gg521153%28v=vs.92%29.aspx)
*   [代码示例](http://msdn.microsoft.com/en-us/library/ff431744%28v=vs.92%29.aspx#BKMK_QuickStarts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:35:31.453

[http://pastebin.com/](http://pastebin.com/)是转储文本文件或公共 FTP 服务器的好地方，也许某人的网站对于目的而言并不重要，只要您可以调用文件的单个 URL 而无需进行身份验证或执行某些 API 以访问商店。

就我个人而言，我只是将文本文件上传到这里的任何地方，这是我粘贴的一个例子

[http://pastebin.com/raw.php?i=a0TLDiaM](http://pastebin.com/raw.php?i=a0TLDiaM)

确保您收集到文件的 RAW 链接，而不是标准网页

然后使用 Webclient 下载StringAsync，有关此示例，请参见

[http://weblogs.asp.net/scottgu/pages/silverlight-tutorial-part-3-using-networking-to-retrieve-data-and-populate-a-datagrid.aspx](http://weblogs.asp.net/scottgu/pages/silverlight-tutorial-part-3-using-networking-to-retrieve-data-and-populate-a-datagrid.aspx)

# c# - 类设计困境 - 使用基类来“通用”派生类中的重复代码

> ID：11343055
> 
> 赞同：0
> 
> 时间：2012-07-05T11:06:36.513
> 
> 标签：c#, inheritance, webdriver, class-design, composition

我有很多 Page 类可以用于我的测试自动化。它们中的每一个都具有以下三个基本要素：

1.  网络驱动程序
2.  乌里
3.  该页面的基本元素。

我决定为所有页面类创建一个基类，如下所示：

```
internal class Page
{
    protected IWebDriver _webDriver;
    protected string _uri;
    protected By _essentialElementCriteria;

    internal Page(IWebDriver driver, WebDriverPageType pageType, string uri, By criteria)
    {
        try
        {
            PageLoader.LoadPage(driver, _uri, new SearchAndWaitCriteria(_essentialElementCriteria));
            this._webDriver = driver;
        }
        catch (Exception exc) { throw new PageLoadFailedException(pageType, exc); }
    }
} 
```

派生类如下所示：

```
internal class LoginPage : Page
{
    internal LoginPage(IWebDriver driver)
       : base (driver, WebDriverPageType.LoginPage, "loginpage_url", By.Id("xyz")) { }        

    // Other LoginPage specific methods like Login().
} 
```

PageLoader 类如下：

```
internal class PageLoader
{
    internal static void LoadPage(IWebDriver driver, string uri, SearchAndWaitCriteria criteria)
    {
         if (driver == null) throw new ArgumentNullException("WebDriver is null.");

         driver.Navigate().GoToUrl(uri);
         var waitElement = driver.WaitForElement(criteria.SearchCriteria, criteria.MaximumWaitSeconds, criteria.SleepMilliSecondsBetweenTwoSearches);
         if (waitElement == null) throw new NotFoundException(String.Format("Failed to find the waitElement. Element details: {0}", criteria.SearchCriteria.ToString()));
    }

    internal static bool IsPageLoaded(IWebDriver driver, SearchAndWaitCriteria criteria)
    {
         IWebElement essentialElement = driver.GetElement(criteria.SearchCriteria);
         return essentialElement != null;
    }
} 
```

我的基本想法是避免编写构建页面的相同代码，因为我将创建很多页面类。因此，在 PageLoader 类的帮助下，我将该代码“共享”到了基类中。我仍然认为有些地方不太对劲。我已经负责向基类抛出异常，这很好。但是，我需要将派生类的 PageType 作为参数提供给基类​​来做到这一点，这对我来说似乎并不好。

您可以在此设计中提出哪些改进建议？我应该消除基类，并改用组合吗？我想我也许可以合并 PageLoader 和 Page 类来实现这一点。不确定这个想法，只是一个想法。

# html - mediaelement.js 在点击控件上播放/暂停不起作用

> ID：11343056
> 
> 赞同：1
> 
> 时间：2012-07-05T11:06:43.893
> 
> 标签：html, video, mediaelement.js, mediaelement

如果单击视频的任何部分，我需要播放和暂停视频播放器，因此我实现了以下功能：

$("#promoPlayer").click(function() {

```
$("#promoPlayer").click(function() {

    if(this.paused){

        this.play();

    } else {

        this.pause();

    }

}); 
```

...但现在视频的控件不会暂停/播放。

你可以在这里看到它的实际效果（http://175.107.134.113:8080/）。该视频是顶部主轮播的第二张幻灯片。

我怀疑我现在收到了 2 个 onclick 事件，一个来自我上面的代码，另一个来自实际的暂停/播放按钮。

我不明白实际的视频控件是如何工作的，因为当我检查元素时，我只看到一个标签。如果我可以区分控件，那么也许我现在可能已经找到了解决方案。

任何人都知道我应该如何做到这一点，或者我的解决方案可以。如果我的解决方案没问题，我如何拦截对控件的点击，以便我只有一个点击事件来暂停/播放？

如果您查看媒体元素主页，他们有一个很大的播放按钮，并带有 mouseOver，但我看不出他们是如何做到的？其他人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:37:18.447

浏览器原生播放器的控件不是单独的 DOM 元素，所以我不相信有办法识别它们。

我的建议是创建一个不可见的 div 覆盖播放器但不覆盖控件，并将您的逻辑绑定到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T09:14:08.353

好吧，我是个白痴。我没有初始化 MediaElement 播放器：

```
$(document).ready(function(){
    $("#promoPlayer").mediaelementplayer({
        features: ['playpause','progress','current','duration','tracks','volume','fullscreen'],
        // Hide controls when playing and mouse is not over the video
        alwaysShowControls: false

    });
}); 
```

这并不意味着我认为是 MediaElement，实际上只是我的浏览器对标签的原生支持......

正如预期的那样，MediaElement 当然可以为您提供诸如能够单击整个视频帧并免费开始视频的功能...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T20:17:59.623

播放器应该已经在点击时播放/暂停，但如果你想附加事件，最好在成功处理程序中这样做：

```
$(document).ready(function(){
    $("#promoPlayer").mediaelementplayer({
        success: function(media, domElement, player) {
            $('#somebutton').on('click', function() {
                  media.play();
            });
        }
    });
 }); 
```

# javascript - 消息：未知路径组件：/touchcontrol:watch

> ID：11343059
> 
> 赞同：2
> 
> 时间：2012-07-05T11:07:04.957
> 
> 标签：javascript, jquery, facebook, facebook-opengraph

我试图将动作“观看”发布到对象“视频”

收到此错误：

```
Error occured

Type: OAuthException

Message: Unknown path components: /touchcontrol:watch 
```

我很绝望！！请帮忙！，这可能与我的应用程序中的 OG 设置有关吗？

我已经看到了一个关于这个的先前问题，但是解决方案没有修复我的代码..仍然得到同样的错误

这是我的代码：

```
function postAction() {
                FB.api('/me/namespace:watch' + '?video="video url"', 'post', function (response) {
                    var msg = 'Error occured';
                    if (!response || response.error) {
                        if (response.error) {
                            msg += "\n\nType: " + response.error.type + "\n\nMessage: " + response.error.message;
                        }
                        alert(msg);
                    } else {
                        alert('Post was successful! Action ID: ' + response.id);
                    }
                });
            }
        </script> 
```

元标签：

```
xmlns:fb="https://www.facebook.com/2008/fbml"> 
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# video: http://ogp.me/ns/video#">
<meta property="fb:app_id" content="[idnumber]" />
<meta property="og:title" content="titlesomething" />
<meta property="og:image" content="imageurl.jpg" />
<meta property="og:description" content="MyDescription" />
<meta property="og:url" content="http://url.com">
<meta property="og:site_name" content="contentname" />
<meta property="og:type" content="video.watches" /> 
```

提前致谢！

# visual-studio-2010 - 在 Visual Studio 项目中存储文件的位置

> ID：11343062
> 
> 赞同：2
> 
> 时间：2012-07-05T11:07:12.097
> 
> 标签：visual-studio-2010, visual-studio

在项目文件夹内有一个“项目名称”文件夹、Release 和 Debug 文件夹。我现在正在调试模式下工作，每次运行它时我的文件都会不断更新，我每次都将它复制到其他 2 个文件夹中以避免混淆。这是正确的方法还是如果文件在主文件夹中就足够了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:44:36.293

如果项目中有文件需要在构建时复制到当前输出文件夹，则在文件属性中选择适当的选项：在解决方案资源管理器中选择文件，然后设置该文件的属性：

*   构建操作：无
*   复制到输出目录：总是复制，或者如果更新就复制。

因此 VS 会在构建时将文件放在正确的位置。您不需要维护多个副本。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-05T11:12:51.910

如果您的程序需要访问与程序代码分离的文本文件、图像等，您可以将它们都放入调试或发布文件夹中。请注意，如果您将这些文件修改到调试文件夹中，则必须将这些文件更新到发行版中，反之亦然。如果您使用在调试模式和发布模式之间切换，这将有效。如果你像我在开发时只使用调试模式，你可以将所有文件只放在调试文件夹中，只有在你结束开发时才将这些文件复制到发布文件夹中。

# php - val() 在 jquery mobile 中不起作用

> ID：11343069
> 
> 赞同：-1
> 
> 时间：2012-07-05T11:07:22.947
> 
> 标签：php, javascript, jquery, mobile

我正在尝试通过 val() 方法从下拉菜单中获取所选项目的值。当我在没有 jquerymobile div 的纯 html 中使用它时，它非常有效。但是当我放入我的内容 div 时，它不起作用。这是代码（仅实现了内容 div）：

头文件.php

```
<!DOCTYPE html> 
<html> 
   <head> 
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

   <title>RSS Reader</title> 

   <link rel="stylesheet" href="main/jquery.mobile-1.1.0.min.css" />
   <script src="main/jquery-1.6.4.min.js"></script>
   <script src="main/jquery.mobile-1.1.0.min.js"></script>

</head> 
<body> 
```

设置.php：

```
<?php
include('../main/header.php');
$siteNumber = empty($_GET['siteNumber']) ? 'Živé' : $_GET['siteNumber'];
?>
<div data-role="page">
    <div data-role="header">
        Nastavenia
    </div>
    <div data-role="content">
        <select id="training" name="training" data-native-menu="false">
         <option value="1">Živé</option>
         <option value="2">MobilMania</option>
         <option value="3">Automoto</option>
        </select>
        <script>
            function displayVals() {
            var defaultSiteNumber = $($("#training")[0]).val();
            $("p").html("<b>defaultSiteNumber:</b> " + 
                  defaultSiteNumber);
             }

             $("select").change(displayVals);
             displayVals();
        </script>
    </div>
    <div data-role="footer">
      <div data-role="navbar">
        <ul>
           <li><a href = "../index.php?siteNumber=<?php echo $siteNumber;?>" data-icon="home">Späť</a></li>
           <li><a href = "settings.php?save=true" data-icon="gear">Hotovo</a></li>
        </ul>
      </div>   
    </div>
</div> 
```

将这些值输入 javascript 后，我​​需要它们在 PHP 变量中也可用，以便我可以使用它们来创建配置文件。还是您认为使用 javascript 创建配置文件会更简单？它应该是具有 parse_ini_file 可接受结构的基本 .ini

**编辑：**我添加了包括 headerp.php 在内的整个代码，以确保没有其他错误导致此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:19:05.900

使用此代码可能有效

```
$("select").bind("change", function(event, ui) {
    var defaultSiteNumber = $(this).val();
    $("p").html("<b>defaultSiteNumber:</b> " + defaultSiteNumber);
}); 
```

# python - 从在所述函数中定义的另一个函数中更改函数的局部变量.. Python

> ID：11343070
> 
> 赞同：2
> 
> 时间：2012-07-05T11:07:26.040
> 
> 标签：python, function, variables, global, local

有没有办法从所述函数中定义的函数访问函数的局部变量？Y 是一个带有字符串的元组，我希望满足条件时的任何大写字母在下一次调用时与 y 中的下一个项目保持相同。我尝试使用内置函数 global，但我想这仅适用于全局。

```
def cap_sentence(y):  
    caps = "on"  
    def func(x):  
        if caps == "on"
            caps = "off"
            return x.capitalize()
        elif "." in x:
            caps = "on"
    return tuple(map(func, y)) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T11:08:51.713

[`nonlocal`](http://docs.python.org/py3k/reference/simple_stmts.html?highlight=nonlocal#the-nonlocal-statement)在 Python 3.x 中使用：

```
def cap_sentence(y):  
    caps = "on"  

    def func(x):  
        nonlocal caps 
        if caps == "on":
            caps = "off"
            return x.capitalize()
        elif "." in x:
            caps = "on"

    return tuple(map(func, y)) 
```

在 python 2.7 中：

```
def cap_sentence(y):  
    cap_sentence.caps = "on"  

    def func(x):  
        if cap_sentence.caps == "on":
            cap_sentence.caps = "off"
            return x.capitalize()
        elif "." in x:
            cap_sentence.caps = "on"

    return tuple(map(func, y)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:02:28.767

虽然 using`nonlocal`是您问题的直接答案，但我鼓励您考虑在此处使用可调用类。这避免了每次`cap_sentence`调用时都重新定义一个函数，并且它以一种更明显的方式处理状态（无论如何对我来说）。我冒昧地在最后添加了一个 return 语句，这样你就不会得到一串值`None`。

```
class _CapSentence(object):
    def __init__(self):
        self.caps = 'on'
    def capitalize(self, x):
        if self.caps == 'on':
            self.caps = 'off'
            return x.capitalize()
        elif '.' in x:
            self.caps = 'on'
        return x
    def __call__(self, y):
        return tuple(map(self.capitalize, y))

cap_sentence = _CapSentence()

print cap_sentence("my feet are cold. my toes are sandwiches.".split())

# output: ('My', 'feet', 'are', 'cold.', 'My', 'toes', 'are', 'sandwiches.') 
```

# haskell - 将 Haskell (monadic) 翻译成 F#

> ID：11343071
> 
> 赞同：3
> 
> 时间：2012-07-05T11:07:34.580
> 
> 标签：haskell, f#, fsharp-typeclasses

帮我翻译下面的 Haskell 代码块。*run*函数生成对应于抽象为 Pattern 的给定正则表达式的文本字符串。您可以在下面的 F# 代码块中看到 Pattern 类型的声明。您可以测试*运行*功能，例如

```
genex $ POr [PConcat [PEscape( DoPa 1) 'd'], PConcat [PEscape (DoPa 2) 'd']] 
```

* * *

```
{-# LANGUAGE RecordWildCards, NamedFieldPuns #-}
import qualified Data.Text as T
import qualified Control.Monad.Stream as Stream
import Text.Regex.TDFA.Pattern
import Control.Monad.State
import Control.Applicative

genex = Stream.toList . run

maxRepeat :: Int
maxRepeat = 3

each = foldl1 (<|>) . map return

run :: Pattern -> Stream.Stream T.Text
run p = case p of
    PBound low high p -> do
        n <- each [low..maybe (low+maxRepeat) id high]
        fmap T.concat . sequence $ replicate n (run p) 
    PConcat ps -> fmap T.concat . Stream.suspended . sequence $ map run ps
    POr xs -> foldl1 mplus $ map run xs
    PEscape {..} -> case getPatternChar of
        'd' -> chars $ ['0'..'9']
        'w' -> chars $ ['0'..'9'] ++ '_' : ['a'..'z'] ++ ['A'..'Z']
        ch  -> isChar ch
    _      -> error $ show p
    where
    isChar = return . T.singleton
    chars = each . map T.singleton 
```

下面我给出我糟糕的尝试。它工作但不正确。问题在以下。假设*parse*产生这样的*Pattern*

> 解析“\\d\\d”；；验证它：Pattern = POr [PConcat [PEscape (DoPa 1,'d'); PEscape (DoPa 2,'d')]]

和

> 解析“\\d{2}”；；验证它：Pattern = POr [PConcat [PBound (2,Some 2,PEscape (DoPa 1,'d'))]]

所以喂两种模式*运行*我希望收到*seq [['2'; '2']; ['2'; '3']; ['2'; '1']; ['2'; '4']; ...]*对应于*seq ["22"; “23”；“21”；“24”；...]*（每个字符串 2 个符号）

这在第一种情况下是有效的，

> POr [PConcat [PEscape (DoPa 1,'d'); PEscape (DoPa 2,'d')]] |> 运行;; 验证它：seq = seq [['2'; '2']; ['2'; '3']; ['2'; '1']; ['2'; '4']; ...]

*序列 ["22"; “23”；“21”；“24”；...]*

但不是在第二个

> POr [PConcat [PBound (2,Some 2,PEscape (DoPa 1,'d'))]] |> 运行;; 验证它：seq = seq [['2']; ['2']; ['2']; ['3']; ...]

*序列 ["2"; “2”，“2”；“3”、“2”；“1”、“2”；"4";...]*（每个字符串 1 个符号）

我使用以下子句测试了不同的变体：

```
| POr ps                -> Seq.concat (List.map run ps)
| PConcat ps            -> (sequence (List.map (run >> Seq.concat) ps))
| PBound (low,high,p)   -> 
```

但一切都是徒劳的。我无法弄清楚有效的翻译。

- 也许我应该使用字符串或数组而不是字符列表。

-而且我认为 Seq 非常类似于 Control.Monad.Stream。这样对吗？

提前感谢您的帮助

```
open System

/// Used to track elements of the pattern that accept characters or are anchors
type DoPa = DoPa of int

/// Pattern is the type returned by the regular expression parser.
/// This is consumed by the CorePattern module and the tender leaves
/// are nibbled by the TNFA module.
type Pattern = PEmpty
             | POr     of Pattern list                  // flattened by starTrans
             | PConcat of Pattern list                  // flattened by starTrans
             | PBound  of int * (int option) * Pattern  // eliminated by starTrans
             | PEscape of DoPa * char                   // Backslashed Character

let maxRepeat = 3

let maybe deflt f opt = 
    match opt with
    | None -> deflt
    | Some v -> f v

/// Cartesian production
/// try in F# interactive: sequence [[1;2];[3;4]];;
let rec sequence = function 
  | []      -> Seq.singleton [] 
  | (l::ls) -> seq { for x in l do for xs in sequence ls do yield (x::xs) } 

let from'space'to'tilda     =  [' '..'~'] |> List.ofSeq
let numbers                 =  ['0'..'9'] |> List.ofSeq
let numbers'and'alphas      =  (['0'..'9'] @ '_' :: ['a'..'z'] @ ['A'..'Z']) |> List.ofSeq
let whites                  =  ['\009'; '\010'; '\012'; '\013'; '\032' ] |> List.ofSeq

let rec run (p:Pattern) : seq<char list> =
    let chars chs = seq { yield [for s in chs -> s] }
    match p with
    | POr ps                -> Seq.concat (List.map run ps)
    | PConcat ps            -> (sequence (List.map (run >> Seq.concat) ps))
    | PBound (low,high,p)   -> 
        let ns = seq {low .. maybe (low + maxRepeat) id high}
        Seq.concat (seq { for n in ns do yield  sequence (List.replicate n (((run >> Seq.concat)  p))) })
        // Seq.concat (seq { for n in ns do yield     ((List.replicate n (run p)) |> Seq.concat |> List.ofSeq |> sequence)})
        //((List.replicate low (run p)) |> Seq.concat |> List.ofSeq |> sequence)
        // PConcat [ for n in ns -> p] |> run
    | PEscape(_, ch)  -> 
        match ch with
        | 'd' -> chars numbers
        | 'w' -> chars numbers'and'alphas
        | ch  -> chars [ch]
    | _                     -> Seq.empty 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T22:50:09.603

我不知道你为什么不`Data.Text`从 Haskell 翻译到`string`F#，你只需要模仿两个函数。除此之外，我只做了一些更改以使其正常工作，这样您就可以轻松地将其与原始代码进行比较，请参阅 (* *) 之间的替换代码

```
open System

// Mimic Data.Text as T
module T =
    let concat (x:seq<_>) = System.String.Concat x
    let singleton (x:char) = string x

/// Used to track elements of the pattern that accept characters or are anchors
type DoPa = DoPa of int

/// Pattern is the type returned by the regular expression parser.
/// This is consumed by the CorePattern module and the tender leaves
/// are nibbled by the TNFA module.
type Pattern = PEmpty
             | POr     of Pattern list                  // flattened by starTrans
             | PConcat of Pattern list                  // flattened by starTrans
             | PBound  of int * (int option) * Pattern  // eliminated by starTrans
             | PEscape of DoPa * char                   // Backslashed Character

let maxRepeat = 3

let maybe deflt f opt = 
    match opt with
    | None -> deflt
    | Some v -> f v

/// Cartesian production
/// try in F# interactive: sequence [[1;2];[3;4]];;
let rec sequence = function 
  | []      -> Seq.singleton [] 
  | (l::ls) -> seq { for x in l do for xs in sequence ls do yield (x::xs) } 

let from'space'to'tilda     =  [' '..'~'] |> List.ofSeq
let numbers                 =  ['0'..'9'] |> List.ofSeq
let numbers'and'alphas      =  (['0'..'9'] @ '_' :: ['a'..'z'] @ ['A'..'Z']) |> List.ofSeq
let whites                  =  ['\009'; '\010'; '\012'; '\013'; '\032' ] |> List.ofSeq

let rec run (p:Pattern) (*: seq<char list> *) =
    (* let chars chs = seq { yield [for s in chs -> s] } *)
    let chars (chs:seq<char>)  = Seq.map string chs

    match p with
    | POr ps                -> Seq.concat (List.map run ps)
    | PConcat ps            -> Seq.map T.concat << sequence <| List.map run ps (* (sequence (List.map (run >> Seq.concat) ps)) *) 
    | PBound (low,high,p)   -> 
        seq {
        for n in [low..maybe (low+maxRepeat) id high] do
            yield! (  (Seq.map T.concat << sequence) (List.replicate n (run p)) )}
        (*let ns = seq {low .. maybe (low + maxRepeat) id high}
        Seq.concat (seq { for n in ns do yield  sequence (List.replicate n (((run >> Seq.concat)  p)))  *)

        // Seq.concat (seq { for n in ns do yield     ((List.replicate n (run p)) |> Seq.concat |> List.ofSeq |> sequence)})
        //((List.replicate low (run p)) |> Seq.concat |> List.ofSeq |> sequence)
        // PConcat [ for n in ns -> p] |> run
    | PEscape(_, ch)  -> 
        match ch with
        | 'd' -> chars numbers
        | 'w' -> chars numbers'and'alphas
        | ch  -> chars [ch]
    | _                     -> Seq.empty 
```

**更新**

如果您要将 Haskell 代码转换为 F#，您可以尝试使用[此代码](http://code.google.com/p/fsharp-typeclasses/)来模仿许多 Haskell 函数，包括使用类型类的函数。我做了一个尽可能接近原始 Haskell 代码的测试，但使用 F# List（不是懒惰的），看起来像这样：

```
#load "Prelude.fs"
#load "Monad.fs"
#load "Applicative.fs"
#load "Monoid.fs"

open Prelude
open Control.Monad.Base
open Control.Applicative

module T =
    let concat (x:list<_>) = System.String.Concat x
    let singleton (x:char) = string x

type DoPa = DoPa of int

type Pattern = PEmpty
             | POr     of Pattern list
             | PConcat of Pattern list
             | PBound  of int * (int option) * Pattern
             | PEscape of DoPa * char

let maxRepeat = 3

let inline each   x = foldl1 (<|>) << map return'  <| x

let rec run p:list<_> = 
    let inline isChar x = return' << T.singleton   <| x
    let inline chars  x = each << map T.singleton  <| x
    match p with
    | PBound (low,high,p) -> do' {
        let! n = each [low..maybe (low+maxRepeat) id high]
        return! (fmap T.concat << sequence <| replicate n (run p))}
    | PConcat ps -> fmap T.concat << sequence <| map run ps
    | POr xs -> foldl1 mplus <| map run xs
    | PEscape (_, ch) -> 
        match ch with
        | 'd' -> chars <| ['0'..'9']
        | 'w' -> chars <| ['0'..'9'] @ '_' :: ['a'..'z'] @ ['A'..'Z']
        | ch  -> isChar ch
    | _  -> failwith <| string p

let genex = run 
```

# perl - 从另一个模板调用模板

> ID：11343073
> 
> 赞同：1
> 
> 时间：2012-07-05T11:07:42.537
> 
> 标签：perl, catalyst, template-toolkit

我正在使用 Catalyst MVC 框架为数据库创建网页。我不是这样的全职程序员。但我知道 perl 和 java 的基础知识。我是生物学家。我已经编写了一个包含表格的模板文件（view.tt）。我需要将此表的内容链接到另一个写在另一个模板文件中的表。我无法链接这两个模板（因为我无法正确生成 url）。任何人都可以帮助或指导我解决这个问题。

以下代码用于第二个模板文件：

```
<h4>Analyses Table</h4>

<table id="analysis_table" width="90%">

<thead>

<tr>
  <th align="center" valign="center">Dataset</th>
  <th align="center" valign="center">Tissue</th>
  <th align="center" valign="center">Expression</th>
  <th align="center" valign="center">Analysis</th>
</tr>

</thead>
<tbody>
[% FOREACH result IN plets -%]
  [% IF result.analysistypename == 'Cancer' -%]

    [% matches = result.datasetname.match('(\w+) (\w+)') %]
    <tr>
    <td align="left" valign="top">[% result.datasetname %]</td>
    <td align="left" valign="top">[% result.expression %]</td>
    <td align="left" valign="top">[% result.datatype %]</td>
    <td align="left" valign="top">[% result.generankpercentile %]</td>
    </tr>
  [% END -%]
[% END -%]

</tbody>

<tfoot>

<tr>
  <th align="center" valign="center">Dataset</th>
  <th align="center" valign="center">Tissue</th>
  <th align="center" valign="center">Expression</th>
  <th align="center" valign="center">Analysis</th>
</tr>

</tfoot>

</table> 
```

以下代码在我的第一个模板中，其中包含要超链接的表（view.tt）

```
<h4>Analyses Summary table</h4>

<table id="score_table" width="50%">

<thead>

<tr>
<th align="centre" valign="centre"> Analysis Type</th>
<th align="centre" valign="centre">Score</th>
</tr>

</thead>

<tbody>

[% FOREACH score IN gene.whs -%]

[% plots = [ ['Cancer', score.cancer_vs_normal_over, score.cancer_vs_normal_under],
['Bladder cancer', score.bladder_cancer_over, score.bladder_cancer_under],
['Brain and CNS cancer', score.brain_and_cns_cancer_over, score.brain_and_cns_cancer_under],
['Breast Cancer', score.breast_cancer_over, score.breast_cancer_under],
['Cervical Cancer', score.cervical_cancer_over, score.cervical_cancer_under],
['Colorectal cancer', score.colorectal_cancer_over, score.colorectal_cancer_under],
]
%]

[% FOREACH plot IN plots %]
<tr>
<td> [% pl0t.0 %]</td>
<td> [% pl0t.1 %] </td>
<td> [% pl0t.2 %] </td>
<td> [% (pl0t.1 + 5 ) / (plot.2 + 5) | format('%5.2f') %] </td>
</tr>
[% END %]

[% END %]

</tbody>

<tfoot>
<tr>
<th align="centre" valign="centre"> Analysis Type</th>
<th align="centre" valign="centre">Score</th>
</tr>
</tfoot>

</table> 
```

嗨，Ret，非常感谢，很抱歉回复晚了。正如您所理解的那样，我的目标是在汇总表和加载结果的第二个表之间建立一个“实时”链接。我以某种方式通过另一种方式链接了模板。我必须将第一个模板中的超链接链接到第二个模板。我的超链接在 foreach 循环中，看起来像这样。

```
[% FOREACH plot IN plots %]
    <tr>
    <td><a href="[% c.uri_for(c.controller('gene').action_for('sample'))%]/[% plot.0 %]>[% plot.0 %]</a></td>
    <td> [% pl0t.1 %] </td>
    <td> [% pl0t.2 %] </td>
    <td> [% (pl0t.1 + 5 ) / (plot.2 + 5) | format('%5.2f') %] </td>
    </tr>
    [% END %] 
```

此行正确链接到第二个模板（sample.tt）。第二个模板包含一系列表格。在第一个表上单击超链接时，应显示与该链接对应的表。我已成功链接模板。我在我的控制器（gene.pm）中创建了一个子例程，也是为了链接模板。我在实现目标方面遇到了问题。第二个模板（sample.tt）中的 html 部分运行正常，但模板工具包无法运行。我可以看到 url 中的更改，但在页面中没有反映。

下面是第二个模板的子程序：

```
sub sample :Path('sample'):Args(1) {
         my($self,$c,$plot)=@_;
         my @plets = $c->model('GeneDB::genewhs')->search({
         Analysistypename => @plet,
 });
         $c->stash->{plets}=\@plets;
         $c->stash->{template}='gene/sample.tt';

 } 
```

如果问题不清楚，请告诉我...我有义务清除它..

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:27:28.640

可以在当前正在处理的模板中简单地`PROCESS`或`INCLUDE`另一个模板，但这不允许用户交互。我认为您的目标是在汇总表和第二个表之间建立一个“实时”链接，第二个表在从第一个表中进行一些选择后加载结果？从你的问题中并不完全清楚。

但是，如果我理解正确，您将需要做（至少）两件事之一：

1.  将所有结果加载到一系列表中，并为每个表添加一个 ID 和 CSS 类以指示其类型。使用 jQuery（或类似的）隐藏所有并基于单击汇总表显示相关表。如果结果量不是很大，这将起作用，这意味着您不需要掌握 AJAX。（您也可以将所有结果放在一个表中，并使用 CSS 类来识别类型。）
2.  编写一个 Catalyst Action，它接收识别要返回的结果所需的任何参数，并将它们作为 JSON 数组返回。调用函数负责表格的布局。除非您对 jQuery、AJAX 和 Javascript 非常熟悉，否则我不会推荐这个，或者所有结果的数量都令人望而却步。

说了#2，看起来你已经把所有的结果都藏起来了。它们是如何联系起来的还不太清楚。（我不禁认为这些数据应该在 Catalyst 端标准化，而不是在模板端用 plots 数组解码。）所以假设你使用选项#1，你需要类似的东西：

```
[%- 
    #add a 'key' field with no spaces suitable for jQuery as the last element
    plots = [
        ['Cancer', score.cancer_vs_normal_over, score.cancer_vs_normal_under, 'cancer'],
        ['Bladder cancer', score.bladder_cancer_over, score.bladder_cancer_under, 'bladder-cancer' ],
-%]

[% FOREACH plot IN plots %]
<tr>
<td class="linktoresults" rel="#[%plot.3%]"> [% plot.0 %]</td>
...
[% END %]

[%- FOREACH ... # It's just not clear how plots relate to gene.whs
    SET rel = ... # how this result links back to the plot array from earlier.
    PROCESS "secondarytable.tt";
    END;
-%]

<script src="jquery.js"></script>
<script>
    $(document).ready(function({
        $(".linktoresults").click(function({
             id = $(this).attr('rel');
             $(".analysis_table").hide(); // hide all tables
             $(id).show(); // show the relevant one for this item
        });
    });
</script> 
```

并且您的 secondarytable.tt 模板需要：

```
<table class="analysis_table" id="[%rel%]" width="90%"> 
```

...所以点击功能可以链接到从属表。

希望这些代码片段能够帮助您朝着正确的方向前进。`plots`和之间的关系`gene.whs`还不够清楚，恐怕我给你更多。

# jquery - jQuery Mobile、AJAX 和模式对话框：howto？

> ID：11343077
> 
> 赞同：0
> 
> 时间：2012-07-05T11:07:57.217
> 
> 标签：jquery, ajax, jquery-mobile

这就是我想要做的：一个**独特的**HTML 页面，其中包含：

*   很多`<ul><li></li></ul>`显示菜单然后子菜单然后子子菜单，选择一个产品
*   询问固定数量产品（1、2 和 5）的对话框
*   处理 AJAX 的 JavaScript

下面是它的工作原理：客户“浏览”所有类别和产品，如果他想要一个，我会显示一个*带有产品描述*的对话框，询问他想要多少产品（`1`或`2`）`5`。

(1) 当客户点击`1`时，`2`或者`5`我向服务器发出 AJAX 请求“将此产品添加到购物篮”（= 全部保存在服务器端）。注意：**都是 JSON**。

(2) 当客户点击购物篮时，我会转到一个新页面，该页面显示购物篮中的内容以及验证它的选项。

两个问题：

*   没有使用 jQuery mobile 的“动态更改”模式对话框的示例。是不是和 jQuery 的原理一样（即我只需要稍微修改一下我的脚本就可以让它在手机上运行）？
*   没有*JSON*格式的 AJAX 交换示例（都是关于加载完整的 HTML 网页，而不仅仅是纯粹的数据交换）。同样的问题：jQuery 的原理是一样的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:29:50.857

> 没有使用 jQuery mobile 的“动态更改”模式对话框的示例。是不是和jQuery的原理一样（即我只需要稍微修改一下我的脚本就可以在手机上运行）

我也不相信 jQuery 本身有一个对话框，相反我认为你指的是[jQuery UI 对话框](http://jqueryui.com/demos/dialog/)。也就是说原理本质上是一样的，你可以重复使用相同的对话框来显示不同的内容，只需在两次使用之间更改内容即可。您可能需要注意的主要事项是，对于由 jquery mobile 增强的内容，您可能需要调用适当的小部件 refresh 或 create 方法。此外，虽然我不确定它是否有正式记录，但您经常需要在[`pageshow`](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)（或至少在显示页面之前）这样做`event`。

例如，假设您正在更改[JQM listeview](http://jquerymobile.com/demos/1.1.0/docs/lists/docs-lists.html)中的项目，您可能需要执行以下操作来增强新内容

```
$(document).delegate('#yourDialog','pageshow', function(page,ui) {
   $('#yourListView').listview('refresh');
}) 
```

> 没有 JSON 格式的 AJAX 交换示例（都是关于加载完整的 HTML 网页，而不仅仅是纯粹的数据交换）。同样的问题：jQuery 的原理是一样的吗？

没有示例，因为它的工作原理完全相同，JQM 需要一个版本的 jQuery 库，因此这些函数都仍然存在（当然您实际上并不需要 jQuery 来执行 ajax 调用）。您可以执行常规的 ajax 请求并按照您的意愿进行响应。

# jquery - jquery 'show' 似乎在内容加载时恢复了

> ID：11343084
> 
> 赞同：-1
> 
> 时间：2012-07-05T11:08:13.613
> 
> 标签：jquery, html

我有一个 jquery 'show' 方法，我在网页上使用该方法在单击按钮时在 div 中显示大量隐藏数据，例如

```
$(document).ready(function(){
    $("button#show").click(function(){
    $("div.show").show();    
    });
 }); 
```

我以前用过这个没有问题。在这种情况下似乎发生的是，当我单击按钮时，文本显示，但页面进入加载状态。然后，一旦完成，文本就会再次消失。无论我使用“显示”还是“切换”，这似乎都会发生。有没有人遇到过这种行为？我不确定这是否是我的代码中其他地方的问题（我正在使用 php 为 div 生成内容）或 jquery 的一些问题。

[编辑] 这是按钮的 html

```
<br/><button id='toggle'>Show all</button>
<div>All the content goes here</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:31:03.477

我在这里发现了问题，只是将其作为答案，以防它对其他人有所帮助。我的其他一些代码阻止显示结束`</form>`标记，这意味着页面被解释为好像`<button>`属于表单。我认为浏览器将它视为 TJ 建议的新提交按钮，即使它没有这样编码，并因此重新提交表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:09:36.893

听起来按钮是一个`submit`按钮（注意这[`submit`是a的**默认类型**`button`](http://www.w3.org/TR/html5/the-button-element.html#attr-button-type)，所以如果你没有`type=`，它是一个提交按钮）。您需要阻止默认操作（即提交表单）。但是请注意，阻止按钮本身的默认设置可能不足以跨浏览器，您可能需要`submit`在表单上使用处理程序并在那里取消操作。

同样，如果“按钮”实际上是一个样式看起来像按钮的链接，则需要阻止默认设置（即跟随链接）。

在 jQuery 事件处理程序中，您可以通过接受`event`传递给您的参数并调用其`preventDefault`方法来防止默认设置：

```
$(document).ready(function(){
    $("button#show").click(function(event){
        event.preventDefault();
        $("div.show").show();    
    });
}); 
```

...或通过`return false`处理程序执行，这将防止默认*并*停止传播（冒泡）。

# sharepoint - 以编程方式将基于表单的用户添加到 SharePoint 网站

> ID：11343087
> 
> 赞同：2
> 
> 时间：2012-07-05T11:08:32.893
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-2007, c#-3.0, forms-authentication

我在 SharePoint 2010 中有一个 Web 应用程序，其身份验证模式为 Windows。我扩展了使用基于表单的身份验证的 Web 应用程序 (Zone:Intranet)。我创建了一个示例**C# 控制台应用程序**来将基于表单的用户添加到站点，并且它成功地添加了用户。

方法：

```
 private void AddFormsBasedUserToSite(){
        try
        {
            string url = "https://appserver:36732";                
            SPSecurity.RunWithElevatedPrivileges(delegate
            {
                using (SPSite site = new SPSite(url))
                {
                    using (SPWeb web = site.OpenWeb())
                    {
                        string userName = "i:0#.f|aspnetsqlmembershipprovider|forms_user";
                        web.SiteUsers.Add(userName, null, null, null);
                        web.Update();                            
                    }

                }
            });                
        }
        catch (Exception e)
        {
            // Log the exception
        }          
    } 
```

但是当同样的方法暴露在 WCF 服务（托管为 windows 服务）中时，当客户端调用该方法时，它无法添加用户。它抛出以下异常：

*用户不存在或不是唯一的。*

SharePoint 日志是：

**解析[http://schemas.microsoft.com/sharepoint/2009/08/claims/userlogonname](http://schemas.microsoft.com/sharepoint/2009/08/claims/userlogonname)时出错：来自成员资格提供程序 AspNetSqlMembershipProvider 的 forms_user：System.Web.HttpException：无法连接到 SQL Server 数据库。**---> System.Data.SqlClient.SqlException：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）
在 System.Data.SqlClient.SqlInternalConnection.OnError（SqlException 异常，布尔 breakConnection）
在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj)
在 System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean IntegratedSecurity, SqlConnection owningObject)
在System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin（ServerInfo serverInfo，字符串 newPassword，布尔 ignoreSniOpenTimeout，Int64 timerExpire，SqlConnection owningObject）
在 System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover（字符串主机，字符串 newPassword，布尔重定向用户实例，SqlConnection owningObject，SqlConnectionString connectionOptions , Int64 timerStart)
在 System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance)
在 System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance）
在 System.Data.SqlClient.SqlConnectionFactory.CreateConnection（DbConnectionOptions 选项，对象 poolGroupProviderInfo，DbConnectionPool 池，DbConnection owningConnection）
在 System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection（DbConnection owningConnection，DbConnectionPoolGroup poolGroup）
在 System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
在 System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
在 System.Data.SqlClient.SqlConnection.Open()
在 System.Web.Management。 SqlServices.GetSqlConnection(String server, String user, String password, Boolean trust, String connectionString) - -- 内部异常堆栈跟踪结束 ---
在 System.Web.Management.SqlServices.GetSqlConnection(String server, String user, String password , Boolean trust, String connectionString)
在 System.Web.Management.SqlServices.SetupApplicationServices（字符串服务器，字符串用户，字符串密码，布尔可信，字符串连接字符串，字符串数据库，字符串 dbFileName，SqlFeatures 功能，布尔安装）
在 System.Web.DataAccess.SqlConnectionHelper.CreateMdfFile（字符串 在 System.Web.DataAccess.SqlConnectionHelper.GetConnection(String connectionString, Boolean revertImpersonation)在System.Web.DataAccess.SqlConnectionHelper.EnsureSqlExpressDBFile(String
connectionString ) 在 System.Web.Security.SqlMembershipProvider.GetUser(字符串用户名，布尔值 userIsOnline)

在 Microsoft.SharePoint.Administration.Claims.SPFormsClaimProvider.Resolve 的 Microsoft.SharePoint.Utilities.SPMembershipProviderPrincipalResolver.ResolvePrincipal（字符串输入，布尔 inputIsEmailOnly，SPPrincipalType 范围，SPPrincipalSource 源，SPUserCollection usersContainer）
（SPPrincipalResolver 解析器，布尔 inputIsEmailOnly，SPPrincipalSource pricipalSource，SPPrincipalType pricipalType , 字符串解析输入，列表1 已解析）`1 resolved)
at Microsoft.SharePoint.Administration.Claims.SPFormsClaimProvider.FillResolve(Uri context, Boolean allZones, String[] entityTypes, SPClaim resolveInput, List`

请帮我弄清楚？

谢谢普拉卡什

# asp.net - 用户单击后退按钮时显示错误信息

> ID：11343091
> 
> 赞同：3
> 
> 时间：2012-07-05T11:08:42.867
> 
> 标签：asp.net, vb.net

我创建了一个简单的示例来展示我遇到的问题。在页面上放置一个 asp.net 复选框，在同一页面上放置一个 asp.net 文本框。在后面的代码中（使用vb.net），放置在选中复选框时在文本框中显示内容的代码，并在未选中复选框时显示空文本框。很简单，对吧？现在来回切换几次，选中/取消选中复选框，文本框有内容/没有内容。一切正常 - 对吧？

现在点击浏览器上的后退按钮几次。每次单击后退按钮时显示的结果是相反的 - 复选框已选中，但文本框中没有任何内容。复选框未选中，并且文本框中有文本。将 vb 代码（页面加载，checkedchanged）放在哪里并不重要 - 结果相同。

我认为这与保存在缓存中的页面的时间有关。当复选标记触发“单击”事件时，页面之类的内容正在保存在缓存中，但填充文本框的代码尚未触发。再说一次，我可能完全不合时宜，这很简单，我做错了。

任何想法/想法/帮助将不胜感激。

示例代码：

ASPX：

```
<asp:CheckBox id="ChkBox1" runat="server" AutoPostBack="True" text="Sample" /><br />
<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox> 
```

VB：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        If ChkBox1.Checked = True Then
            TextBox1.Text = "Checked"
        Else
            TextBox1.Text = ""
        End If
    End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T11:19:52.403

这是应该的方式。

浏览器会记住您每次回发到服务器的时间。每当复选框状态更改时，您的页面就会发回。

当复选框状态被选中时，文本框确实是空的。这是回发发生的时间。您的服务器端代码设置文本值，您可以在浏览器中看到它。

但是你的背会记住你发送的内容，那是一个选中的复选框和空文本。

取消选中时会发生保留情况。

如果您使用 F5 刷新这些后台页面之一，您的浏览器应该要求发回帖子数据。你会回到预期的状态。

告诉浏览器不要缓存内容（如果你想让浏览器忘记它）：不是 VB 代码，但我相信你也会在 VB.net 上找到类似的功能。

```
context.Response.Cache.SetExpires(DateTime.UtcNow.AddMinutes(-1));
context.Response.Cache.SetCacheability(HttpCacheability.NoCache);
context.Response.Cache.SetNoStore(); 
```

# c# - nvelocity 中是否有 URLResourceLoader 类的模拟

> ID：11343096
> 
> 赞同：0
> 
> 时间：2012-07-05T11:09:19.683
> 
> 标签：c#, .net, nvelocity

我想通过使用 url 路径向位于外部服务器上的 VelocityEnngine 提供外部资源，在 Apache 速度中有 URLResourceLoader 类，但我看到在 NVelocity 中只有 FileRecourceLoader ...

有没有办法在 NVelocity 中提供外部（url）资源 ExtendedProperty

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:39:58.203

我自己实现了接口：

```
public class UrlResourceLoader : ResourceLoader
{
    protected ArrayList paths;
    protected Hashtable templatePaths;

    public UrlResourceLoader()
    {
        templatePaths = new Hashtable();
    }

    public override void Init(ExtendedProperties configuration)
    {
        paths = configuration.GetVector("path");
    }

    public override Stream GetResourceStream(string templateName)
    {
        lock (this)
        {
            int size = paths.Count;
            if (string.IsNullOrEmpty(templateName))
            {
                throw;
            }

            for (int i = 0; i < size; i++)
            {
                var path = (string) paths[i];
                var uri = new Uri(path + templateName);
                Stream inputStream = FindTemplate(uri);
                if (inputStream != null)
                {
                    SupportClass.PutElement(templatePaths, templateName, path);
                    return inputStream;
                }
            }
            throw;
        }
    }

    private Stream FindTemplate(Uri requestUri)
    {
        try
        {
            var request = (HttpWebRequest)WebRequest.Create(requestUri);
            request.Method = "GET";

            var response = (HttpWebResponse) request.GetResponse();
            if (HttpStatusCode.OK != response.StatusCode)
            {
                throw;
            }

            return response.GetResponseStream();
        }
        catch (Exception ex)
        {
            throw;
        }
    }

    public override bool IsSourceModified(Resource resource)
    {
        var path = (string)templatePaths[resource.Name];
        var uri = new Uri(path + resource.Name);

        var request = (HttpWebRequest)WebRequest.Create(uri);
        request.Method = "GET";

        using (var response = (HttpWebResponse)request.GetResponse())
        {
            return response.LastModified.Ticks != resource.LastModified;
        }
    }

    public override long GetLastModified(Resource resource)
    {
        var path = (string)templatePaths[resource.Name];
        var uri = new Uri(path + resource.Name);

        var request = (HttpWebRequest)WebRequest.Create(uri);
        request.Method = "GET";

        using (var response = (HttpWebResponse)request.GetResponse())
        {
            return response.LastModified.Ticks;
        }
    }
} 
```

# lua - Corona SDK：如何让物体向前移动？

> ID：11343097
> 
> 赞同：1
> 
> 时间：2012-07-05T11:09:24.873
> 
> 标签：lua, coronasdk

我有一个物理体，我希望它朝着它所面对的方向前进。我只有 13 岁，我希望这能解释为什么我在三角学上如此糟糕。谁能告诉我如何在 Corona 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T03:52:36.200

我会假设你想用力推动你的物体。无论哪种方式，我们都需要获取您身体所面对方向的 x 和 y 分量。以下是如何从旋转角度获取 x 和 y：

```
-- body is your physics body
local angle = math.rad(body.rotation)  -- we need angle in radians
local xComp = math.cos(angle)  -- the x component
local yComp = -math.sin(angle)  -- the y component is negative because 
                                --  "up" the screen is negative 
```

（注意：如果这没有给出朝向的方向，您可能需要在角度上添加 90、180 或 270 度，例如：math.rad(body.rotation+90)）

[上面的代码将为您提供单位向量](http://mathworld.wolfram.com/UnitVector.html)在旋转方向上的x 和 y 分量。你可能还需要一些乘数来获得你想要的力的大小。

```
local forceMag = 0.5 -- change this value to apply more or less force
-- now apply the force
body:applyLinearImpulse(forceMag*xComp, forceMag*yComp, body.x, body.y) 
```

这是我得到数学的地方：http: [//www.mathopenref.com/trigprobslantangle.html](http://www.mathopenref.com/trigprobslantangle.html)。使用单位向量可以简化数学，因为斜边总是 1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-01T04:32:42.103

在使用令人困惑的物理学之前让你自己的角色向一个角度移动怎么样？

```
angle = math.rad(Insert the angle you want here)
character.x = character.x - math.sin(angle)
character.y = character.y + math.cos(angle) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-05T12:36:24.127

呃。您不需要三角函数来移动对象。

添加

```
object:translate(distanceToMoveInXAxis,distanceToMoveInYAxis) 
```

或者，如果您想执行过渡，

```
transition.to(object,{x=object.x + distanceToMoveInXAxis,y=object.y + distanceToMoveInYAxis}) 
```

# c# - 减去日期

> ID：11343100
> 
> 赞同：0
> 
> 时间：2012-07-05T11:09:32.847
> 
> 标签：c#

如何减去两个日期并显示剩余天数？

`expire`（到期日）变量来自数据库。

```
expire = row.expire.ToString("dd. MMMM. yyyy");
dayleft = DateTime.Now.Subtract(expire).ToString(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T11:15:38.530

该`Subtract`方法返回一个 TimeSpan，因此您可以执行以下操作：

```
DateTime expire = DateTime.Parse(row.expire);
TimeSpan difference = expire.Subtract(DateTime.Now);

double totalDaysLeft = difference.TotalDays; //eg. 3.69

int daysLeft = difference.Days; //eg. 3 
```

# objective-c - 如何将 NSMutableArray 放入实体（NSManagedObject）属性中？

> ID：11343104
> 
> 赞同：1
> 
> 时间：2012-07-05T11:09:39.817
> 
> 标签：objective-c, core-data

我定义了一个名为“地图”的实体。它具有三个属性：

scale ：带有 NSFormatter 的 NSNumber（如果你想要一个 NSNumber 而不是一个 NSString，它是必需的，它 >bangs<）。

单位：NSString

mapData：二进制数据？转化价值 ?

此 mapData 属性会导致问题。我有一个自定义 NSView（“矩阵”属性），它将一些引用存储到 NSMutableArray 中。这是我要放入 mapData 属性的数组。但这不起作用：

```
[[[mapController arrangedObjects]lastObject] setValue:[matrix colorReference]forKey:@"mapData"]; 
```

忽略除此之外的所有内容：“lastObject”：是（单个）地图实体。[matrix colorReference] 是（属性）NSMutableArray。

现在，为了简化：我希望 NSMutableArray 成为 Map 实体的“mapData”属性，在保存文档时存储，然后检索并传输到自定义视图。设计很清晰，做起来的方法要少得多……</p>

请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:19:11.557

*您可以通过将属性Binary Data*类型设置为基本上是类型来序列化和排列并将其存储在 Core Data中`NSData *`。

然后通过使用将您的数组序列化为 NSData `NSKeyedArchiver`。

```
NSData *myData = [NSKeyedArchiver archivedDataWithRootObject:myArray]; 
```

并返回 NSArray 使用`NSKeyedUnarchiver`：

```
NSArray *myArray = [NSKeyedUnarchiver unarchiveObjectWithData:myData]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T12:44:57.137

好吧，实际上它更简单。

Core Data 确实将 NSMutableArray 序列化为类型为“Transformable”的属性。转换当然是可逆的，所以我可以直接使用它来设置我的自定义视图的属性，只需使用：

```
[matrix setColorReference:[[mapController content]valueForKey:@"mapData"]]; 
```

其中“matrix”是 NSView，“colorReference”是它的 NSMutableArray 属性，“map controller”是存储带有键“mapData”的 NSData 的实体。

对于反向操作（保存在文件中的编辑地图），我这样做：

```
[[mapController content] setValue:colorReference forKey:@"mapData"]; 
```

由于 Core Data 的属性是 KVO 兼容的，文件被标记为已编辑，当然也可以撤消！

为了保持对象之间的引用（控制器 --> 视图和反向），我只需在子类中使用 IBOutlet 属性，在 IB 中进行绑定，然后让框架完成其余的工作（比我做得更好）。

谢谢！

# c# - 如何在 ListView 中包含“所有项目”项目？

> ID：11343111
> 
> 赞同：1
> 
> 时间：2012-07-05T11:10:15.447
> 
> 标签：c#, .net, wpf, xaml, listview

我有一个窗口显示餐厅/商店特定时间之间的销售情况。当用户选择要查询的时间段时，它会显示该时间段之间的销售数据。我还在以编程方式创建一个用户列表，然后可以选择该列表来过滤查询。例如，我选择“Michael”用户，然后使用该用户显示归因于他的所有销售（在先前选择的时间范围内）。

创建`ListView`用户相当容易，但我正在尝试在此列表中附加一个内容为“所有用户”的项目。然后将其传递回查询，然后查询将通过某些属性（UserId = 999 或其他。不重要）识别此用户，以再次使用所有用户的数据填充页面。

现在我必须退出页面并返回执行此操作。不是很优雅！

我打算将一个`User`对象附加`ViewModel`到从数据库 EF 生成的列表中，但它创建了一个列表，`IUsers`因此我无法实例化它的实际实例（也许我在这里非常愚蠢并且缺少一些基本的东西？ ）。

对实现这一目标的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:37:17.320

您可以尝试使用[CompositeCollection](http://msdn.microsoft.com/en-us/library/system.windows.data.compositecollection.aspx)设置`ItemSource`您的`ListBox`-

```
<ListBox> 
    <ListBox.ItemsSource> 
        <CompositeCollection> 
            <CollectionContainer Collection="{Binding YourCollection}" /> 
            <ListBoxItem Foreground="Magenta">Select All</ListBoxItem> 
        </CompositeCollection> 
    </ListBox.ItemsSource> 
</ListBox> 
```

但是您必须应用一些解决方法（例如使用[BindingProxy](http://www.thomaslevesque.com/2011/03/21/wpf-how-to-bind-to-data-when-the-datacontext-is-not-inherited/)）才能使`Binding`工作，因为 CollectionContainer 不支持绑定，请参阅这些链接 -

[http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/637b563f-8f2f-4af3-a7aa-5d96b719d5fd/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/637b563f-8f2f-4af3-a7aa-5d96b719d5fd/)

[如何将 CollectionContainer 绑定到视图模型中的集合？](https://stackoverflow.com/questions/6446699/how-do-you-bind-a-collectioncontainer-to-a-collection-in-a-view-model)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:24:23.507

您的 UI 通常会创建一个包装底层用户信息的视图模型。然后，您将拥有这些视图模型的集合，视图绑定到这些视图模型。假设你有这个，向这个集合添加一个哨兵实例是一件简单的事情。它可能看起来像这样：

```
// this is your DAL class
public class User
{
}

// a view model to wrap the DAL class    
public class UserViewModel
{
    // a special instance of the view model to represent all users
    public static readonly UserViewModel AllUsers = new UserViewModel(null);
    private readonly User user;

    public UserViewModel(User user)
    {
        ...
    }

    // view binds to this to display user
    public string Name
    {
        get { return this.user == null ? "<<All>>" : this.user.Name; }
    }
}

public class MainViewModel()
{
    private readonly ICollection<UserViewModel> users;

    public MainViewModel()
    {
        this.users = ...;
        this.users.Add(UserViewModel.AllUsers);
    }

    public ICollection<UserViewModel> Users
    {
        ...
    }
} 
```

在构建查询的代码中，您需要做的就是检查用户视图模型中的用户是否存在。如果不是，则无需将任何用户选择附加到查询中。

# javascript - 悬停快速幻灯片错误

> ID：11343112
> 
> 赞同：0
> 
> 时间：2012-07-05T11:10:16.653
> 
> 标签：javascript, jquery, hover

我有一个幻灯片，我有幻灯片上图像的链接。

当鼠标进入链接时，幻灯片会在鼠标离开时暂停并播放。

我的问题是，当您在链接上快速移动鼠标时，幻灯片似乎变得越来越快。

```
function begin_slideshow() {
     some code
} 
```

和鼠标进入/离开功能

```
element.on('mouseenter', function () {
                var url = $(this).data('loc').replace('_t', '');//grabs the image
                fig.attr("src", url);//changes the source
                $('.shown').removeClass('shown');//the link that can be seen has a class of shown
                $(this).addClass('shown');//adds class of shown to the now showing link 
                clearTimeout(timer);
            }).on('mouseleave', function () {
                timer = setTimeout(begin_slideshow, 5000);
            }); 
```

我认为问题在于悬停在某个地方，希望您能提供帮助:)因为我真的被卡住了。

编辑

[http://jsfiddle.net/uYMkr/8/](http://jsfiddle.net/uYMkr/8/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:21:47.970

我认为您的问题在于超时。然而，这似乎是正确的。因此，我认为问题存在于您对幻灯片代码的使用或幻灯片代码本身中。你能把那个贴出来吗？

# c++ - 旋转向量（数组）

> ID：11343116
> 
> 赞同：7
> 
> 时间：2012-07-05T11:10:41.063
> 
> 标签：c++, vector

我正在尝试在 C++ 中旋转元素向量。我的意思是我有一个`vector<point>`我希望最后一个元素成为第一个元素。

例子：

> [1,2,3] 变成 [3,1,2] 然后 [2,3,1]

为此，我尝试执行以下操作：

```
//Add the last element at index 0
ObjectToRotate.insert(0, ObjectToRotate.at(ObjectToRotate.size()-1));
//Remove Last element
ObjectToRotate.erase(ObjectToRotate.size()-1); 
```

但我收到此错误：

> 错误 6 错误 C2664: 'std::_Vector_iterator<_Myvec> std::vector< *Ty>::insert<cv::Point* <_Tp>&>(std::_Vector_const_iterator<_Myvec>,_Valty)' : 无法转换参数 1从“int”到“std::_Vector_const_iterator<_Myvec>”

我该如何解决？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-05T11:12:34.383

标准库中有一个[`std::rotate`算法：](http://en.cppreference.com/w/cpp/algorithm/rotate)

```
std::rotate(ObjectToRotate.begin(),
            ObjectToRotate.end()-1, // this will be the new first element
            ObjectToRotate.end()); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-05T11:27:34.987

`std::rotate`当然，使用的建议是完全正确的；如果可用，使用现有功能始终是首选解决方案。无论如何，值得指出为什么您的解决方案不起作用。标准库中的容器，如`std::vector`，以迭代器的形式获取位置信息，而不是索引。编写操作的惯用方式是：

```
v.insert( v.begin(), v.back() );
v.erase( std::prev( v.end() ) ); 
```

（如果你没有 C++11，写你自己的版本很简单`prev`。或者在 的情况下`vector`，你可以写`v.end() - 1`。）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-05T11:15:27.203

`insert`和的参数`erase`是迭代器，而不是索引：

```
ObjectToRotate.insert(ObjectToRotate.begin(), ObjectToRotate.back());
ObjectToRotate.pop_back();  // or erase(ObjectToRotate.end()-1), if you prefer 
```

但是首先删除最后一个元素（在获取副本之后）可能更有效，以避免重新分配的可能性：

```
auto back = ObjectToRotate.back();
ObjectToRotate.pop_back();
ObjectToRotate.insert(ObjectToRotate.begin(), back); 
```

或使用`std::rotate`：

```
std::rotate(ObjectToRotate.begin(), ObjectToRotate.end()-1, ObjectToRotate.end()); 
```

如果您经常这样做，那么`deque`可能是更好的容器选择，因为这可以在两端进行有效的插入和移除。但是，如果速度很重要，请确保您测量并验证这确实是一种改进；如果序列不是很大，那么更复杂的内存布局的开销可能会`deque`变慢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T11:12:10.200

使用`std::rotate`：[http ://en.cppreference.com/w/cpp/algorithm/rotate](http://en.cppreference.com/w/cpp/algorithm/rotate)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-09-03T05:37:46.903

[James Kanze](https://stackoverflow.com/users/649665/james-kanze)提出了一个绝妙的答案，即使用以下代码片段来旋转单个元素。要旋转*x*数量的项目，只需将以下代码放入循环中。

```
vec.insert( vec.begin(), vec.back() );
vec.erase( std::prev( vec.end() ) ); 
```

但是，如果您可以使用标准旋转功能，那将是您的最佳选择。下面的代码再次旋转*x*数量的项目。

```
std::rotate(vec.rbegin(), vec.rbegin() + x, vec.rend()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-18T17:36:13.417

用于制作 [1,2,3] 到 [2,3,1] 这是代码

```
vector<int> Solution::rotateArray(vector<int> &A, int B) {
  vector<int> ret; 
  for (int i = 0; i < A.size(); i++) {
    ret.push_back(A[(i + B) % A.size()]);
  }
  return ret; 
} 
```

这里 A 是 [1,2,3] 并且 B 是 1 移动 1 个位置

# google-app-engine - GAE 中的 Objectify 并发

> ID：11343117
> 
> 赞同：1
> 
> 时间：2012-07-05T11:10:49.090
> 
> 标签：google-app-engine, concurrency, objectify

我创建了一个测试Web应用程序来测试persist-read-delete `Entities`，我创建了一个简单的循环来持久化`Entity`、检索和修改它，然后将其删除100次。

在循环的某个时间间隔没有问题，但是有一些时间间隔存在`Entity`已经存在的错误，因此无法持久化（*我添加了一个自定义异常处理*）。

同样在循环的某个间隔，`Entity`因为它不存在而无法修改，最后在某个间隔，`Entity`因为它不存在而无法删除。

我知道循环可能非常快，以至于对`Appengine`数据存储的操作尚未完成。从而导致错误`Entity does not exist`，如尝试访问它或删除操作尚未完成，因此无法创建具有相同内容的实体`ID`等等。

但是，我想了解如何处理使用`Entity`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:50:54.827

据我了解，您正在执行以下操作：

```
for i in range(0,100):
    ent = My_Entity()    # create and save entity
    db.put(ent)
    ent = db.get(ent.key())   # get, modify and save the entity
    ent.property = 'foo'
    db.put(ent)
    ent.get(ent.key())  # get and delete the entity
    db.delete(my_ent) 
```

进行一些错误检查以确保您有要删除、修改的实体，并且您在查找要删除或修改的实体时遇到了一堆错误。正如您所说，这是因为不能保证调用按顺序执行。

> 但是，我想了解如何处理这种使用实体进行并发操作的情况。

最好的办法是批量处理您为持久化实体所做的任何修改。例如，如果您要创建/保存/修改/保存或修改/保存/删除，请尽可能尝试组合这些步骤（即创建/修改/保存或修改/删除）。这不仅可以避免您看到的错误，还可以减少您的 RPC。遵循此策略，上述循环将减少为...

```
prop = None
for i in range(0,100):
    prop = 'foo' 
```

换句话说，对于任何需要快速设置/删除的东西，只需使用局部变量。这就是 GAE 为您提供的答案。在您弄清楚所有快速的东西之后，您无法将该信息保留在实体中。

Other than that there isn't much you can do. [Transactions](https://developers.google.com/appengine/docs/python/datastore/transactions) can help you if you need to make sure a bunch of entities are updated together but won't help if you're trying to multiple things to one entity at once.

EDIT: You could also look at the [pipelines API](http://code.google.com/p/appengine-pipeline/).

# java - Playframework 建议导入语句不起作用？

> ID：11343123
> 
> 赞同：0
> 
> 时间：2012-07-05T11:11:07.760
> 
> 标签：java, eclipse, playframework, playframework-2.0

您好我正在使用 eclipse，我一直在尝试学习 play framework 2.0，但有一件事让我慢了下来。

Eclipse 无法为所有与播放框架相关的方法提供任何建议的导入语句。因此，我必须手动复制粘贴教程中的导入语句（然后构建良好，并删除红线）。

我已经尝试了自动刷新`eclipsify`和的所有组合。`eclipsify with source=true;`（我也尝试过安装和卸载 Scala IDE，但不认为这与这个问题有任何关系）

所以我开始认为播放框架不支持这个功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:44:09.523

您是否尝试过对缺少的类型进行[快速修复？](http://scala-ide.org/docs/user/features/typingviewing.html#quick-fix-imports)（OSX 上的 CMD+1）

另外，您知道[Scala IDE 2.0](http://scala-ide.org/docs/tutorials/play20scalaide20/index.html)教程中的设置和使用 Play framework 2.0 吗？

如果你不能让它工作，只需访问[scala-ide-user ML](https://groups.google.com/group/scala-ide-user)，我相信我们可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:28:56.960

确实如此，我最近用 Scala 开始了一个项目，并玩了 2.0 来探索它。我想制作 eclipsify 的项目目录有问题。在 eclipsify 之前，我认为你必须进行一场比赛。需要编译添加eclipse conf文件。

希望能帮助到你。

# jquery - jQuery animate() 在完成之前再次触发时“闪烁”

> ID：11343128
> 
> 赞同：0
> 
> 时间：2012-07-05T11:11:14.707
> 
> 标签：jquery, jquery-animate, jquery-slider

这是一个演示问题的 JSFiddle... [http://jsfiddle.net/L2NBP/5/](http://jsfiddle.net/L2NBP/5/) 出于显而易见的原因，此代码是我的实际代码的简化版本，如下所示。

**CSS**

```
#frame { left:0; position:absolute; width:190px; }
.layer { background:#FFF; position:absolute; right:0; top:0; width:190px; }
#process { z-index:1; }
#contact { z-index:2; }
#message { z-index:3; } 
```

**HTML**

```
<div id="frame ">
    <div id="process" class="layer">Processing...</div>
    <div id="contact" class="layer"># Results Found</div>
    <div id="message" class="layer">Results Updated</div>
</div>
<button onclick="javascript:ajaxMessage();">Click Here</button> 
```

**​JS**

 **```
function ajaxMessage(){
    // if( $('#message').is(":animated") ) return;
    $('#contact').fadeOut('slow',function(){
         $('#message').fadeIn('slow')
                      .animate({opacity:1.0},1000)
                      .fadeOut('slow',function(){
                          $('#contact').fadeIn('slow');
                      });
    });
}​ 
```

**细节**

我有一个提交给 AJAX 的表单[`.load()`](http://api.jquery.com/load/)。我使用 UI Slider [http://jqueryui.com/demos/slider/](http://jqueryui.com/demos/slider/)作为输入。我正在使用范围选项并在表单中有几个输入“滑块”，因此 AJAX 可能每秒被调用多次。完成后我显示成功消息`.load()`。该消息使用`.animate()` [http://api.jquery.com/animate/](http://api.jquery.com/animate/)进行动画处理，如您在上面的 JS Fiddle 链接中所见。

问题是显示消息的函数在完成第一个动画之前将被多次调用。当这种情况发生时，动画会在用户停止修改表单值很久之后叠加并“闪烁”。我试过这个............`if( $('#message').is(":animated") ) return;`但它仍然不能很顺利地工作。基本上我需要弄清楚如何动态地延长动画的持续时间，或者至少让它看起来以这种方式工作。或者将成功消息延迟到用户对表单进行最后一次修改之后......例如：消息没有显示 utill 2 秒后用户进行了更改。

有任何想法吗？

* * *

**接受的答案**

接受的答案在行动...... [http://jsfiddle.net/L2NBP/7/](http://jsfiddle.net/L2NBP/7/)

[将其与http://jsfiddle.net/L2NBP/5/](http://jsfiddle.net/L2NBP/5/)上的原始版本进行比较。 要查看差异，请在 1-2 秒内多次单击按钮，然后查看按钮右侧的响应文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T11:31:12.037

如果我的问题是正确的，

你应该使用[stop()](http://api.jquery.com/stop/)

像这样，

```
$('#message').stop().fadeIn('slow').animate({opacity:1.0},1000).fadeOut('slow',function(){
        $('#contact').fadeIn('slow');
}); 
```

另外，做第二个动画，当一个完成时，

```
var msg = $('#message');
msg.stop().fadeIn('slow',function(){
    msg.animate({opacity:1},1000,function(){
        msg.fadeOut('slow',function(){
            $('#contact').fadeIn('slow');
        })
    })
}); 
```**

# jfreechart - 如何使用 grails 将 JFreeChart 渲染为 gsp

> ID：11343130
> 
> 赞同：0
> 
> 时间：2012-07-05T11:11:20.983
> 
> 标签：jfreechart, grails-2.0

我是 grails 的新手。我无法将 JFree Chart 条形图呈现给我的 gsp。相反，它被渲染为单独的图像。我希望我的 gsp 表单和图表都呈现在同一个 gsp 上。请帮忙！！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:35:02.780

```
def chart = ...

def buffer = chart.createBufferesImage( 700, 200 )
def bytes = EncoderUtil.encode( buffer, 'png' )

response.contentType = 'image/png'
response.contentLength = bytes.length
def out = response.outputStream
out.write( bytes )
out.flush()
out.close() 
```

来自哥伦比亚卡塔赫纳！

# java - RMI 响应非常慢

> ID：11343132
> 
> 赞同：1
> 
> 时间：2012-07-05T11:11:29.043
> 
> 标签：java, macos, rmi, tomcat7

我正在使用 Java 远程方法调用 (RMI) 测试 Web 应用程序。当我通过加密狗、宽带连接到互联网时；RMI 需要很长时间才能响应请求。完成方法调用大约需要 10 秒。我还可以在进行方法调用后立即看到 Internet 连接中的数据传输率上升。所以肯定它似乎是通过外部网络在两个内部进程之间建立 RMI 连接。

虽然与互联网断开连接，但它的响应速度很快，比如几毫秒。我的 /etc/hosts 文件有 127.0.0.1 localhost 的条目。我总是在方法调用 url 中使用 127.0.0.1 来命名.lookup。但是当我连接到互联网时，无法弄清楚如何让机器快速响应 RMI 调用。有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T11:48:39.067

您的问题不是您用于对 RMI 注册表的查找调用的地址，而是 URL 中的地址是调用查找的结果。这默认为系统上第一个接口的 IP 地址，所以我的猜测是，当您连接到 Internet 时，它就是您的外部连接。

我认为正在发生的事情是您在 127.0.0.1 上调用 RMI 注册表，这会返回您的 Internet 地址以及您想要的服务的位置，因此您的 RMI 调用通过加密狗接口路由出去。

您需要设置[该`java.rmi.server.hostname`属性](http://docs.oracle.com/javase/1.4.2/docs/guide/rmi/javarmiproperties.html)以告诉 RMI 注册表在其 RMI URL 中返回哪个主机名或 IP 地址。

所以你需要类似的东西：

```
String ipAddress = "10.1.2.3"; //Local IP address 
System.setProperty("java.rmi.server.hostname",ipAddress); 
```

或者

```
String hostname = "myserver"; //hostname that resolves for a local address
System.setProperty("java.rmi.server.hostname",hostname); 
```

# primary-key - 在 RavenDb 中为几个不同的对象定义主键

> ID：11343135
> 
> 赞同：1
> 
> 时间：2012-07-05T11:11:54.517
> 
> 标签：primary-key, ravendb

可以说我有一个对象，例如：

```
class First
{
    int key;
}

class Second
{
    KeyValuePair<int,int> keyName;
} 
```

在 RavenDb 中是否可以使用与“Id”不同的名称来定义主键？请注意，我需要为不同的对象分配不同的键名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:22:08.420

Gwynnbleid1，是的，你可以。您可以使用 Conventiosn.FindIdentityProperty 来定义它，您可以根据每种类型对其进行自定义。

# c# - 我可以将常量绑定到实体框架插入/更新函数映射吗？

> ID：11343139
> 
> 赞同：0
> 
> 时间：2012-07-05T11:12:09.650
> 
> 标签：c#, sql-server, stored-procedures, entity-framework-4

我们正在升级具有自定义 ORM 以使用 EF 4.3 的旧系统。

遗留系统使用混合“保存”存储过程，过程本身根据主键的存在来确定是插入还是更新实体，大致如下：

```
-- Hybrid Insert if not exist / Update if does exist
CREATE PROC dbo.SaveEntity
        @EntityId INT = NULL, -- This field is specified on an update, 
                              -- and left to its default on inserts
        @Field1 NVARCHAR(50)
        -- @Field2 etc etc
AS
    BEGIN
        -- IF Exists (Entity with PK @EntityId) then insert ...
        --   BEGIN
        --     INSERT INTO Entity(Field1, ...) VALUES (@Field1, ...)
        --     SELECT @EntityId = SCOPE_IDENTITY()    
        --   END
        -- ELSE
        --   BEGIN
        --     UPDATE Entity SET Field1 = @Field1, ... WHERE EntityId = @EntityId
        --   END

        -- Return the PK Here
        SELECT @EntityId AS EntityId
    END 
```

在 EF 中，我已将“保存”存储过程添加到模型中，并将插入和更新函数映射到各个实体的映射详细信息中的“保存”过程。

更新函数工作正常 - 因为返回结果没有改变，它不需要映射回实体。

但是，我遇到了使用 Insert 映射的 catch-22 情况。对于插入函数，我需要将 SProc 返回的分配的 PK 标识值映射回实体 PK。但是，由于 Proc 的性质（具有可选的 @EntityId 参数），EF 还要求映射所有参数，即使 @EntityId 是可选的并且是默认的。

如果我未能将 EntityId 映射到 PROC 字段，则会出现编译错误：

```
A mapping function bindings specifies a function Model.Store.SaveEntity 
but does not map the following function parameters: EntityId 
```

如果我将 EntityId 绑定到 proc 字段并作为结果列绑定，我会收到运行时错误（因为字段只能是输入或输出映射之一，但[不能同时是两者](https://stackoverflow.com/questions/6655434/entity-framework-stored-procedures-exception)）：

```
Unable to determine a valid ordering for dependent operations. 
Dependencies may exist due to foreign key constraints, model requirements, 
or store-generated values. 
```

所以我的问题是，*我该如何解决这种情况？*. 例如，有什么方法可以将常量（即零或NULL）绑定到我的Insert Proc 字段映射？

**请注意**：其中一些 procs 中有额外的逻辑（内务管理、审计等），所以我不愿意完全放弃它们，或者将 PROCS 重写为单独的 INSERT / UPDATE procs，因为它们已经过充分证明并改变了底层的 DB DDL不是我们升级任务的一部分。

# git - 将上游新分支推送到原点

> ID：11343146
> 
> 赞同：3
> 
> 时间：2012-07-05T11:12:34.810
> 
> 标签：git

几周前我分叉了一个项目。主存储库位于私有服务器上。

```
$ # on gitserver.com
$ git clone --bare main.com:myproject 
```

现在我添加了上游仓库并获取了新数据。

```
$ # on desktop.com
$ git clone gitserver.com:myproject
$ git remote add upstream main.com:myproject
$ git fetch upstream 
```

当我尝试将上游分支推送到我自己的远程仓库时，对于存在于上游但不在源中的分支出现错误。

```
$ git push origin refs/remotes/upstream/BRANCH_A:BRANCH_A
Everything up-to-date
$ git push origin refs/remotes/upstream/BRANCH_B:BRANCH_B
error: unable to push to unqualified destination: BRANCH_B
The destination refspec neither matches an existing ref on the remote nor
begins with refs/, and we are unable to guess a prefix based on the source ref.
error: failed to push some refs to '...' 
```

如何在 origin 上创建这个远程分支并推送到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:42:36.033

尝试：

```
$ git push origin refs/remotes/upstream/BRANCH_A:refs/heads/BRANCH_A 
```

如果这不起作用，请尝试：

```
$ git checkout BRANCH_A; git push origin BRANCH_A 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-01T15:22:57.653

这是我用来将所有分支从上游复制到原点（bash）的方法：

```
 for i in .git/refs/remotes/upstream/*; 
 do 
   z=${i#.git/refs/remotes/upstream/}; 
   git push origin refs/remotes/upstream/$z:refs/heads/$z;  
 done 
```

复制所有标签更容易，因为“git fetch upstream”会给我本地的所有标签：

```
git push --tags origin 
```

添加了这个，因为它也是我想做的一部分。

# java - Reflect 是否能够将外部类/jar 作为插件加载

> ID：11343150
> 
> 赞同：0
> 
> 时间：2012-07-05T11:13:04.453
> 
> 标签：java

我是 Java 新手，我正在为以下问题寻找合适的解决方案。我开发了一个以通用方式执行某些操作的应用程序。现在我想让这个应用程序能够根据使用通用接口的外部类或 jar 文件（可能实际安装或未安装）将标准行为修改为更具体的东西。假设这些外部文件将比主应用程序更频繁地升级，这就是我希望它们保持分离的主要原因。这项任务的正确方法是什么？反射有能力做到这一点吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:13:42.500

如果您将 jar 添加到您的 classPath 中，您就可以加载它，从而产生插件的效果。

但是一旦你将它加载到 classLoader 中，你就不能简单地刷新类定义（以防你需要即时更新它）。

如果您需要即时更新，可以使用一些解决方案，例如 OSGi。如果您可以在每次更新插件时重新启动它，您可以使用一些简单的 IoC 容器，例如 Spring、Guice 或 Tapestry IoC。

[这里](http://jfpoilpret.blogspot.de/2008/07/dynamically-loading-guice-modules-as.html)有一篇你可能感兴趣的有趣帖子，在这种情况下，要加载的模块是在启动时发现并加载加载类路径上的插件（每个都可以是一个 jar）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:19:51.017

斯派思说的。但是，如果您需要在不重新启动应用程序的情况下替换类，您可以使用 Commons JCI 的[ReloadingClassloader](http://commons.apache.org/jci/apidocs/org/apache/commons/jci/ReloadingClassLoader.html)。

# sql - 生成用于 SQL Server hierarchyId 的唯一节点 ID

> ID：11343160
> 
> 赞同：1
> 
> 时间：2012-07-05T11:14:08.030
> 
> 标签：sql, common-table-expression, hierarchyid

**设置 ：**

```
MyTable (
    NodeId varchar(10),
    ParentNodeId varchar(10),
    NodeName varchar(50)
) 
```

NodeId 不是数字，可以采用任何形式。大多数是 Z123456 的形式，但有些是 12345。

我想使用 SqlServer HierarchyId 数据类型来满足我的分层需求。

**问题：**

我可以使用 CTE 生成具有节点和父级的层次结构，但我需要传递给 hierarchyid::Parse() 的路径 - 不幸的是，Z123456 形式的 nodeid 无法解析。如果 NodeId 和 ParentNodeId 是行 id 整数，我会收拾行李赶火车回家看我可爱的妻子，但相反，我在这里盯着 3360 x 1050 分辨率。

我正在使用 CTE 来生成我的层次结构（我也可以在 CTE 中创建一个路径），然后我附加行号给我唯一的整数 id，但我必须重新运行分层 CTE 到使用生成的 ID 生成我的路径。

```
;with o as (
    select n.ParentNodeID, n.nodeid, n.NodeName, 1 as [level]
    from Mytable n where n.ParentNodeID is null
        union all
    select n.ParentNodeID, n.nodeid, n.NodeName, o.[level] + 1 as [Level]
    from MyTable n inner join o on n.ParentNodeID = o.NodeID
) 
select NodeID, ParentNodeID, NodeDescription
     , ROW_NUMBER() over (order by [level]) as hNodeId 
from o 
```

**问题 ：**

无论如何我可以在一个 CTE 接受的表单中实现一个路径 hierarchyId::Parse() 吗？例如 /1/2/3/

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T14:20:03.753

```
with C as
(
  select T.NodeId,
         T.ParentNodeId,
         cast('/'+cast(row_number() over(order by T.NodeId) as varchar(10)) as varchar(max)) as HID
  from MyTable as T
  where T.ParentNodeId is null
  union all
  select T.NodeId,
         T.ParentNodeId,
         C.HID+'/'+cast(row_number() over(order by T.NodeId) as varchar(10))
  from MyTable as T
    inner join C 
      on T.ParentNodeId = C.NodeId
)
select NodeId,
       ParentNodeId,
       HID,
       hierarchyId::Parse(HID+'/') 
from C
order by HID 
```

[SQL小提琴](http://sqlfiddle.com/#!3/b6daa3/2)

**更新：**
一些研究表明，不允许在递归 CTE 中使用分析函数。它在我的测试中有效，但如果我能想到替代解决方案，我会更新这个答案。

[CTE 中关于分析和聚合函数的遗漏](https://connect.microsoft.com/SQLServer/feedback/details/318084/omission-about-analytic-and-aggregate-functions-in-ctes)

**更新 2：**
显然这个解决方案可以安全使用，因为它记录在 MSDN 上。
[WITH common_table_expression (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms175972%28v=sql.105%29.aspx)

> CTE 递归部分中的分析和聚合函数应用于当前递归级别的集合，而不是应用于 CTE 的集合。像 ROW_NUMBER 这样的函数只对当前递归级别传递给它们的数据子集进行操作，而不是传递给 CTE 递归部分的整个数据集

# jquery - jquery取消/重置

> ID：11343162
> 
> 赞同：0
> 
> 时间：2012-07-05T11:14:17.103
> 
> 标签：jquery, timer, setinterval

我有一个带有 5 个按钮的滑块，用于浏览我的画廊。我也有一个 settimeout 功能

```
setInterval (simulateClick, 10000); 
```

我试图重置超时，以便如果单击按钮，用户必须等待整整 10 秒才能启动模拟单击。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:17:30.363

```
var intervalID = setInterval(simulateClick, 10000);

// reset
clearInterval(intervalID); 
```

[文档](https://developer.mozilla.org/en/DOM/window.clearInterval)。_

# ruby-on-rails - 找不到 gem 的兼容版本

> ID：11343172
> 
> 赞同：0
> 
> 时间：2012-07-05T11:15:00.280
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, rubygems, spree

Bundler 找不到 gem "spree_auth" 的兼容版本：在 Gemfile 中：spree_social (>= 0) ruby​​ 取决于 spree_auth (~> 1.1.0) ruby

```
spree (= 0.50.2) ruby depends on
  spree_auth (0.50.2) 
```

我试图将狂欢社交与我的 0.50.x 狂欢整合在一起，但出现以下错误。请帮我解决这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:18:59.393

尝试

```
gem install spree_social 
```

并添加到`Gemfile`

```
gem spree_social 
```

和

```
bundle 
```

# c++ - 这个程序会不会导致内存泄漏

> ID：11343174
> 
> 赞同：0
> 
> 时间：2012-07-05T11:15:01.030
> 
> 标签：c++, memory-leaks

我问我的朋友，他是否可以在不使用循环或附加语句的情况下从 1 打印到 1000，因为他对这个线程很感兴趣：

[打印 1 到 1000 不带循环或条件](https://stackoverflow.com/questions/4568645/printing-1-to-1000-without-loop-or-conditionals)

他回答了这个程序。

```
#include <iostream>
using namespace std;

static int n = 1;

class f {
public:

    f() {
        cout << n++ << endl;
    }
};

int main(int argc, char *argv[]) {
    f n [1000];
} 
```

运行程序输出正常。但是当我关闭 netbeans 上的程序时，它似乎仍在运行并消耗内存。程序是否导致内存泄漏？有人能解释一下这个小程序是如何工作的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T11:17:32.117

> 但是当我关闭 netbeans 上的程序时，它似乎仍在运行并消耗内存

当你关闭一个程序或者它终止时，不管它是否有内存泄漏，内存都会被释放。我很确定您没有正确终止它。

> 程序是否导致内存泄漏？

不，如果不使用`new`or `malloc`（直接或间接） ，就不会发生内存泄漏

> 有人能解释一下这个小程序是如何工作的吗？

`f n [1000];`尝试创建一个包含 1000 个`f`对象的向量。当它们被初始化时，构造函数被调用，打印`n`并递增它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T11:17:31.153

不，没有内存泄漏。

阵列使用自动存储，当它们超出范围时会自动释放。

但是，使用动态存储`new` *会*导致内存泄漏：

```
int main(int argc, char *argv[]) {
    new f[1000]; // this leaks
} 
```

> 有人能解释一下这个小程序是如何工作的吗？

构造数组会调用数组中每个元素的默认构造函数。所以`f()`只是被调用了 1000 次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T11:19:00.623

您甚至不必关闭程序，它会自动终止。必须是您的 IDE 所做的事情，或者您使用的任何东西。

这个怎么运作？类“f”有一个构造函数，它增加一个全局变量并输出它。他创建了一个包含 1000 个“f”实例的数组，这会导致上述情况发生 1000 次，数组中的每个“f”都会发生一次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T11:18:51.650

每当这样做

```
f n[i] 
```

构造函数是 f() 被调用的。因为每次调用全局变量都会增加。因此，对于从 1 到 1000 的每个 f 对象，都会打印 n 的值。

关于内存泄漏，没有。该数组是一个局部变量，在程序结束时被销毁。为了启用动态分配，请使用`new`关键字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T11:20:33.063

程序中没有明显的内存泄漏。您不会动态分配任何对象，也不会忘记释放任何东西。

实际发生的是您调用数组 n 的数组构造函数。这本身就将每个数组元素称为构造函数 f::f()。因此你得到了输出。那么你有一个循环，但不是在语言级别。

# unit-testing - 测试行为和模拟

> ID：11343175
> 
> 赞同：1
> 
> 时间：2012-07-05T11:15:01.173
> 
> 标签：unit-testing, mocking

在为更复杂的方法/类编写单元测试时，我仍然没有那么自信。我对 tdd 和单元测试的总体理解是，您应该能够重构类/方法的实现，并确信您没有改变它的行为

让我举个例子让事情更清楚。

```
public class OrderService implements IOrderService
{
    private IItemService itemService;

    public Order create(OrderCreationDto dto)
    {
        Order order = new Order();
        order.addItems(createOrderLines(dto.products));
        return order;
    }

    private Set<OrderLine> createOrderItems(List<ProductDto> products)
    {
        Set<OrderLine> orderLines = new HashSet<>();
        for (ProductDto product : products) {
            Item item = itemService.create(product.id, product.price);
            OrderLine orderLine = new OrderLine();
            orderLine.setItemId(item.id);
            orderLines.add(orderLine);
        }
        return orderLines;
    }
} 
```

基本上我只是从 OrderCreationDto 创建一个新订单。对于每个订单行，我必须先使用商品服务来创建新商品。我的一项测试将确保`itemService.create(...)`使用某些参数对每个订单行进行调用。

由于每次调用`itemService.create(...)`都非常昂贵，我想重构该类以在一个请求中创建所有项目..让我们进行更改

```
public class OrderService implements IOrderService
{
    private Set<OrderLine> createOrderItems(List<ProductDto> products)
    {
        Set<OrderLine> orderLines = new HashSet<>();
        BatchItemCreationResponse response = itemService.createAll(products);
        for (ProductDto product : products) {
            Item item = response.get(product.id, product.price);
            ...
        }
        return orderLines;
    }
} 
```

现在我已经进行了更改，并且我之前编写的测试失败了，即使该类的行为根本没有改变。

我错过了什么吗？我必须接受它的方式并简单地调整笔试吗？

任何想法表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:27:18.363

> 我错过了什么吗？我必须接受它的方式并简单地调整笔试吗？

不，是的。

单元测试*确实*发生了变化。您已经根据某个类设置了测试以利用某些合同 ( `ItemService`)。更改此合同要求您更改测试，就这么简单。

换个角度想一想：从测试类客户的角度来看，没有任何改变，行为是相同的（这很好）。但是，从`ItemService`客户的角度来看，您已经引入**了重大变更**（合同变更）。客户是谁`ItemService`？在这种情况下，`OrderService`及其测试。

此外，您应该考虑*状态验证*（断言`OrderService`产品状态）是否比*行为验证*（调用验证模拟）更合适。前者通常会使您的测试对此类更改不那么脆弱，但两者都不会使引入更改的需要消失。

# c# - asp.net c 使用按钮在 Listview 中隐藏/显示面板（预览插入）

> ID：11343177
> 
> 赞同：2
> 
> 时间：2012-07-05T11:15:02.733
> 
> 标签：c#, asp.net, listview

我试图向用户展示他们将要在 ListView 中插入的信息的预览。我有两个面板，我希望能够使用 ListView 的 InsertItemTemplate 中的按钮来显示和隐藏它们。

我下面的 ListView 代码用于说明目的。该函数是我正在使用的实际代码：

```
<asp:ListView ID="ListView1" runat="server">
    <InsertItemTemplate>

        <asp:Panel ID="pnlInsert" runat="server" Visible="true">
            <asp:Button ID="btnPreview" runat="server" OnClick="showPreview" Text="Preview" />
        </asp:Panel>

        <asp:Panel ID="pnlPreview" runat="server"  Visible="false">
            <p>This is the preview</p>
        </asp:Panel>

    </InsertItemTemplate>
</asp:ListView>

protected void showPreview(object sender, EventArgs e) 
{
    Panel pnlInsert = (Panel)ListView1.FindControl("pnlInsert");
    pnlInsert.Visible = false;
    Panel pnlPreview = (Panel)ListView1.FindControl("pnlPreview");
    pnlPreview.Visible = true;
} 
```

我得到的错误是：

```
Exception Details: System.NullReferenceException: Object reference not set to an instance of an object. 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:24:35.383

没有“pnlInsert”，有一个“面板 1”。

代替将控件投射到 Panels 我们使用`as`关键字。IE

```
Panel pnlInsert = e.FindControl("pnlInsert") as Panel;
if (pnlInsert != null)
{
    //do something with pnlInsert
} 
```

`ListView1.Parent.FindControl("pnlInsert")`正在寻找 ListView 控件的父级，然后是 ListView 内部的控件。您的 pnlInsert 是 ListView 的子项。

根据您的其余代码，您可能只需要这样做：

```
protected void showPreview(object sender, EventArgs e) 
{
    pnlInsert.Visible = false;
    pnlPreview.Visible = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:18:07.460

w 查看您的代码 面板位于名为 ListView1 的 ListView 内 w但您正在搜索 ListView1 的 Parent.Controls 内的面板

你需要的是 ListView1.FindControl("pnlInsert) & ListView1.FindControl("pnlPreview")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T11:36:21.897

空引用异常是因为 pnlInsert 或 plnPreview 被赋值为空；可能是因为 FindControl 方法在 ListView1 中找不到“pnlInsert”或“pnlPreview”控件。

我还看到在 ListView1 中，第一个面板的 ID 是“Panel1”，所以你应该更改代码行

`Panel pnlInsert = (Panel)ListView1.FindControl("pnlInsert");`至

```
Panel pnlInsert = (Panel)ListView1.FindControl("Panel1"); or 
```

将标记中的面板 ID 更改为“pnlInsert”。

此外，建议在处理 FindControl 时使用防御性代码。将您的代码更改为以下

```
 Panel pnlInsert = ListView1.FindControl("pnlInsert") as Panel;

 if(pnlInsert != null)
 {
    pnlInsert.Visible = false;
 }
 else
 {
   // control not found - do something;
 }

 Panel pnlPreview = ListView1.FindControl("pnlPreview") as Panel;

 if(pnlPreview != null)
 {
   pnlPreview.Visible = true;
 }
 else
 {
   // control not found - do something;
 } 
```

# html - 如何在融合图中设置调色板的颜色？

> ID：11343179
> 
> 赞同：0
> 
> 时间：2012-07-05T11:15:07.293
> 
> 标签：html, fusioncharts

```
<chart palette='1' ...> 
```

如何在融合图中设置调色板的颜色？我希望我自己的颜色（“调色板”：“eef5fb”）设置在融合图中。

```
 var trendjson='{ "caption" : "","slantlabels": "1", "xaxisname": "Dates","yaxisname": "Count","palette":"eef5fb","set":['; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:03:55.637

您可以通过提供十六进制颜色列表来为数据项指定自己的调色板：

`paletteColors='FF5904,0372AB,FF0000'`

更多详细信息，请参考[FusionCharts 文档中的“图表调色板”](http://docs.fusioncharts.com/charts/contents/?AttDesc/ChartPalettes.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-05T12:58:52.763

您甚至可以尝试在“paletteColors”属性中设置您想要的颜色的十六进制代码。

颜色列表必须用逗号分隔，例如：

`'paletteColors' :'FF0000,0372AB,FF5904"`

图表将在指定颜色列表中循环，然后相应地渲染数据图。

更多详情请参考：**[http ://docs.fusioncharts.com/charts/contents/?ChartSS/Column2D.html#Anchor1](http://docs.fusioncharts.com/charts/contents/?ChartSS/Column2D.html#Anchor1)**

# python - 从 python 脚本访问受密码保护的 url

> ID：11343188
> 
> 赞同：6
> 
> 时间：2012-07-05T11:15:23.823
> 
> 标签：python

在 python 中，我想向一个 url 发送一个请求，该请求将返回一些信息给我。问题是如果我尝试从浏览器访问 url，会出现一个弹出框并要求输入用户名和密码。我有这个 url 的用户名和密码，但是，我不知道如何让 python 自动完成这些字段以访问 URL。

这是我返回 401 错误的代码：

```
bing = "https://api.datamarket.azure.com/Data.ashx/Bing/SearchWeb/Web?Query=%
(term)s&$top=50&$format=json" %__function()
results = urllib2.urlopen(bing).read() 
```

编辑：为了澄清起见，该函数`function`返回一个名为的变量，该变量`term`是在 URL 中查询的术语

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T11:42:37.603

您很可能面临 HTTP 基本身份验证。这可以在 urllib2 中完成，但有点烦人。有关如何执行此操作的说明如下：

[http://www.voidspace.org.uk/python/articles/urllib2.shtml#id5](http://www.voidspace.org.uk/python/articles/urllib2.shtml#id5)

但是，如果您还没有对 urllib2 做太多工作，那么现在是切换到 requests 库的好时机。它对用户更加友好 - 并且按照您的要求进行操作 - 与 urllib2 中的凌乱方式不同。

```
requests.get('https://api.github.com/user', auth=('user', 'pass')) 
```

有关如何请求库的更多详细信息，请访问：[http ://docs.python-requests.org/en/latest/user/quickstart/#basic-authentication](http://docs.python-requests.org/en/latest/user/quickstart/#basic-authentication)

要安装 requests 库，您只需执行以下操作：

```
sudo pip install requests 
```

如果你在窗户上，你应该放下`sudo`零件。

# windows-7 - 如何通过批处理脚本检查可用内存（RAM）？

> ID：11343190
> 
> 赞同：4
> 
> 时间：2012-07-05T11:15:32.813
> 
> 标签：windows-7, batch-file, windows-xp

我想知道我们如何检查批处理脚本中的可用内存？有没有已经可用的方法？如果在批处理脚本中不可能，那么还有其他方法可以让我们获得可用的内存吗？

操作系统：Windows XP / Windows 7

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-05T11:49:00.177

选择：

```
C:\>wmic os get freephysicalmemory
FreePhysicalMemory
4946576 
```

解析出一个变量（wmic 输出最后有一个标题 + 额外的行）

```
for /f "skip=1" %%p in ('wmic os get freephysicalmemory') do ( 
  set m=%%p
  goto :done
)
:done
echo free: %m% 
```

* * *

```
free: 4948108 
```

（`freevirtualmemory`也可用）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-05T11:42:49.417

该站点有一个示例 VBScript，用于检索内存*总量：*

> [http://www.computerperformance.co.uk/vbscript/wmi_memory.htm](http://www.computerperformance.co.uk/vbscript/wmi_memory.htm)

它可以适应报告可用的内存量：

```
' Memory.vbs
' Sample VBScript to discover how much RAM in computer
' Author Guy Thomas http://computerperformance.co.uk/
' Version 1.3 - August 2010
' -------------------------------------------------------' 

Option Explicit
Dim objWMIService, perfData, entry 
Dim strLogonUser, strComputer 

strComputer = "." 

Set objWMIService = GetObject("winmgmts:" _
& "{impersonationLevel=impersonate}!\\" _ 
& strComputer & "\root\cimv2") 
Set perfData = objWMIService.ExecQuery _
("Select * from Win32_PerfFormattedData_PerfOS_Memory") 

For Each entry in perfData 
Wscript.Echo "Available memory bytes: " & entry.AvailableBytes
Next

WScript.Quit 
```

您可以通过将其保存到具有扩展名`.vbs`（例如`memory.vbs`）的文件并使用 cscript.exe 运行它来运行它，例如：

```
cscript.exe //nologo memory.vbs 
```

...获得如下输出：

```
Available memory bytes: 4481511424 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-05T11:40:34.480

不确定 Windows XP，但在 Windows 7 中，您可以使用`systeminfo`（外部）命令，根据[这个 ServerFault question](https://serverfault.com/questions/94660/determining-free-memory-from-command-line-on-windows "在 Windows 上从命令行确定可用内存")。除了在我的计算机上，该命令显示的信息太多，因此您可以将其限制在相关部分：

```
systeminfo | find "Physical Memory" 
```

上面显示了以下信息：

```
总物理内存：      *n,nnn* MB
可用物理内存：*n,nnn* MB

```

如果您只想要这`Available`条线，请让您的搜索更具体：

```
systeminfo | find "Available Physical Memory" 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-01-28T13:03:55.200

`WMIC`不适用于 Windows 的 Home/Basic/Starter 版本。`SYSTEMINFO`太慢了。替代方案`MSHTA`应该适用于每个 Windows 系统：

```
for  /f "usebackq" %%a in (`mshta ^"javascript^:close^(new ActiveXObject^(^'Scripting.FileSystemObject^'^).GetStandardStream^(1^).Write^(GetObject^(^'winmgmts:^'^).ExecQuery^(^'Select * from Win32_PerfFormattedData_PerfOS_Memory^'^).ItemIndex^(0^).AvailableBytes^)^);^"^|more`) do set free_mem=%%a
echo %free_mem% 
```

使用 dxdiag 的另一种方法是：

```
@echo off
taskkill /im dxdiag* /f
dxdiag /whql:off /t %cd%\dxdiag.txt
:ckeck_dx
tasklist | find "dxdiag" && ( w32tm /stripchart /computer:localhost /period:1 /dataonly /samples:5  >nul 2>&1 & goto :ckeck_dx )

find "Available OS Memory:" "dxdiag.txt"
del /q /f "%~dp0dxdiag.txt" 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-05T20:20:59.140

*这显示了*批处理脚本和程序的可用内存：

```
>mem | find "total"
    655360 bytes total conventional memory
   1048576 bytes total contiguous extended memory 
```

键入MEM /？了解更多详情

**编辑**：回答新评论

```
>mem | find "avail"
    655360 bytes available to MS-DOS
         0 bytes available contiguous extended memory
    941056 bytes available XMS memory

>mem

    655360 bytes total conventional memory
    655360 bytes available to MS-DOS
    599312 largest executable program size

   1048576 bytes total contiguous extended memory
         0 bytes available contiguous extended memory
    941056 bytes available XMS memory
           MS-DOS resident in High Memory Area 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-05T11:19:20.877

这应该有效：

```
free_mem=`free | sed -n 2p | awk '{print $4}'` 
```

这将为您提供空闲内存。如果您想要总数，请获取第一列 ($1)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-24T02:20:00.523

我意识到这是一篇旧帖子，尽管当我使用“WMIC OS get FreePhysicalMemory”命令时，最后一个值是一个空行。所以，因为我知道第二行的值是我想要的，所以我只是使用 find 命令添加行号标志来获取第二行的值：

```
for /f "tokens=1,2 delims=]" %%p in ('WMIC OS get FreePhysicalMemory^|find /N /V ""') do (IF %%p equ [2 (set MEM=%%q))
echo.WMIC FreePhysicalMemory = %MEM% 
```

# python - 带有内置函数的 Python inspect.getargspec

> ID：11343191
> 
> 赞同：8
> 
> 时间：2012-07-05T11:15:37.643
> 
> 标签：python, function, methods, arguments, inspect

我试图找出从模块中检索到的方法的参数。我发现了一个`inspect`具有方便功能的模块，`getargspec`. 它适用于我定义的函数，但不适用于导入模块中的函数。

```
import math, inspect
def foobar(a,b=11): pass
inspect.getargspec(foobar)  # this works
inspect.getargspec(math.sin) # this doesn't 
```

我会收到这样的错误：

```
 File "C:\...\Python 2.5\Lib\inspect.py", line 743, in getargspec
     raise TypeError('arg is not a Python function')
 TypeError: arg is not a Python function 
```

`inspect.getargspec`仅针对本地功能设计还是我做错了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-05T11:18:13.727

对于用 C 而不是 Python 实现的函数，不可能获得这种信息。

这样做的原因是，除了解析（自由格式）文档字符串之外，没有办法找出该方法接受哪些参数，因为参数是以（有点）类似 getarg 的方式传递的——即不可能找出哪些参数它接受而不实际执行该功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-18T18:36:43.033

您可以获得此类函数/方法的文档字符串，它几乎总是包含与 getargspec 相同类型的信息。（即参数名称、参数数量、可选参数、默认值）。

在你的例子中

```
import math
math.sin.__doc__ 
```

给

```
"sin(x)

Return the sine of x (measured in radians)" 
```

不幸的是，有几种不同的标准在运作。请参阅[什么是标准 Python 文档字符串格式？](https://stackoverflow.com/questions/3898572/what-is-the-standard-python-docstring-format)

您可以检测正在使用的标准，然后以这种方式获取信息。从上面的链接看起来[pyment](https://github.com/dadadel/pyment)可能有助于做到这一点。

# javascript - 多次触发 javascript 事件

> ID：11343194
> 
> 赞同：0
> 
> 时间：2012-07-05T11:15:47.427
> 
> 标签：javascript, html, javascript-events

我的问题是，每当我设置一个事件时，它只会触发一次。在我当前的代码中，我要做的就是将查看者单击的 div 设置为一个类，并将其他 div 设置为不同的类。这是我的javascript：

```
<script type="text/javascript">
var d = document;
function acc(id){
    var opn = d.getElementsByClass('opn')[0];
    var elem = d.getElementById(id);

    if(opn.id != id){
        opn.className = 'clo';
        elem.className = 'opn';
    }
}
</script> 
```

我的 HTML 是：

```
<div id="a" class="opn" onclick="acc('a');">a</div>
<div id="b" class="clo" onclick="acc('b');">a</div>
<div id="c" class="clo" onclick="acc('c');">a</div> 
```

我希望代码在随后单击 div 元素时再次触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:17:46.120

我认为您需要一个 else 语句来将该类置于其原始状态，以便再次单击它时可以将其设置为新类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:30:53.437

您的代码看起来几乎是正确的，除了（如注释中的@lanzz 所标识）您调用了错误的方法来获取当前`opn`元素，这意味着您以后的测试将失败。

如果您查看过，这将在您的浏览器的 JS 控制台中报告错误...

无论如何，我建议进行适度的改进 - 无需传递`id`当前元素的 。

只需像这样编写您的处理程序：

```
onclick="acc(this)" 
```

并像这样更新您的功能：

```
function acc(elem) {
    var opn = d.getElementsByClassName('opn')[0];

    if (opn !== elem) {
        opn.className = 'clo';
        elem.className = 'opn';
    }
} 
```

我还注意到，*理论上*每次触发事件时都不需要更新`opn`- 它应该是每次更新 DOM 时自动更新的节点的“实时”列表。

# php - 如何在php中限制每个用户的并发登录数

> ID：11343199
> 
> 赞同：3
> 
> 时间：2012-07-05T11:15:57.380
> 
> 标签：php, login

我想根据管理员设置防止用户同时登录。

如果管理员将并发登录设置为 3，则用户可以同时从 3 个不同的地方登录。

如果用户尝试从第 4 位登录，则应用程序不应允许用户登录。

任何想法如何通过数据库维护它。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T11:20:34.037

您可以维护一个包含活动用户会话的数据库表，如果最后一个用户活动发生在 X 分钟之前（可配置值），则认为会话处于活动状态。

每次用户尝试通过登录表单进行身份验证时，您都应该检查该用户目前有多少会话处于活动状态，并根据该检查决定是对他进行身份验证还是使用某种形式的响应消息拒绝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-20T12:28:04.340

[完整的工作示例（下载）](https://easyiicms.blogspot.in/2018/03/how-do-i-limit-user-on-concurrent-using.html)

您所做的是向您的**用户表**添加一个额外的列，将其命名为登录名。每当用户登录时，将列增加 1，在您的登录脚本中，您可以检查登录次数是否等于限制，当用户注销时，您将登录次数减少 1。

使用此方法可能出现的一个问题是，如果用户没有注销并且服务器无法再次识别会话，则登录不会减少。为了避免这种情况，下面是一种更好的方法。

1.  创建一个它登录的列名，并给它一个数据类型 varchar(500) 或者最好是文本，因为它可能很难预测我们期望的数据大小。

2.  当用户登录时，检查 logins 列是否为空，如果为空，则使用 time() 函数创建一个包含 session_id、登录时间的 json。

    ```
    if($column_login == '' or count(json_decode($column_login)) == 0){
        $login_json = json_encode([
                        ['session_key'=>'session_key_generated', 'time' => time()]
                    ]);
    //then update the logins table with the above
    } 
    ```

3.  如果 logins 列不为空或解码时列的计数大于零，则检查计数是否大于 login limit ，如果登录数尚未大于 login limit，则附加新的与数据库表中登录列的会话

    ```
    if(count(json_decode($column_login)) > 0 and count(json_decode($column_login)) < $login_limit){
        $login_json = json_decode($column_login);
        $login_json[] = ['session_key'=>'session_key_generated', 'time' => time()];
        $login_json = json_encode($column_login);
        //update the logins column with the new $login_json and log the user in
    } 
    ```

4.  如果达到登录限制，则检查登录并检查是否有过期时间，例如，假设一个 300 秒的非活动用户已注销，然后从表中删除已过期的会话

    ```
    if(count(json_decode($column_login)) >= $limit){
        $logins = json_decode($column_login);
        foreach($logins as $key =>  $login){
            if($login['time'] < time()-300){
                //this checks if the iterated login is greater than the current time -300seconds and if found to be true then the user is inactive
                //then set this current login to null by using the below statement
                $logins[$key] = null; // or unset($logins[$key]) either should work;

            }

        }

        //after iteration we check if the count of logins is still greater than the limit
        if(count($logins) >= login_limit){
            //then return a login error that maximum logins reached
        }else{
            //then login is successsfull
        } 
        //update the logins column to equal to json_encode($logins);
    } 
    ```

5.  在登录用户发出的任何请求中，您检查会话密钥是否仍然存在于数据库的登录列 ($logins['session_key'])，如果未找到，则立即注销用户以避免权利升级，否则将 $login['time'] 更新为新的 time()。

这种方法效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-14T12:48:19.030

我已经基于@MaheshKathiriya 实现了一些东西

我有一个名为`user`“id”（PK，AI），“用户名”，“密码”，“登录”列的表
`serialize()`将数组转换为字符串，`unserialize()`并将序列化字符串转换回大批

在登录列中，我插入了一个包含子数组的数组（我们称之为 main_array）。
main_array 中的子数组数表示 DB 中注册的会话数。
子数组有两个值，session_id 和 time_of_login。

每当用户登录时，我们都会检查 main_array 中子数组的数量。

如果 main_array 为空，我们插入一个带有相应 session_id 和 time 的新子数组并允许用户登录。

否则，如果主数组不为空，我们检查其中有多少子数组。如果子数组的数量大于 0 且小于 login_limit，则我们插入一个新的子数组并允许用户登录。

否则，如果 main_array 中的子数组数量等于或大于 login_limit，则我们检查过期会话`(sub_array['time']>time()-60, means this session was active more than 60 seconds ago)`
如果会话在过去 60 秒内未处于活动状态，我们会从主数组中删除它的子数组。
现在我们再次检查 main_array 中子数组的数量是否等于或大于 login_limit，如果小于登录限制，我们允许登录并将新会话 sub_array 插入主数组。否则登录失败（因为没有活动会话可以替换当前尝试登录的用户）向 main_array 插入一个新的子数组，其中包含相应的 session_id 和登录时间。

```
<?php
if($_SERVER['REQUEST_METHOD']=='POST'){
  require('db_config.php');
  $session_id = session_id();
  $type = $_POST['type'];
  if($type=='login'){ //if user is trying to login
    $login_limit=3; //this is going to be the limit simultaneous logins
    $username=$_POST['username'];
    $password=$_POST['password'];
    $authenticated = false;

    $sql="select * from `user` where `username` = '$username' and `password` = '$password'";
    $result = $conn->query($sql);
    $count = mysqli_num_rows($result);
    if($count>0){
      $authenticated=true;
      $row = mysqli_fetch_assoc($result);
      $user_id = $row['id'];
    }
    else{
      $authenticated=false;
    }
    if($authenticated){ //doing it this way isn't necessary

      $get_login = "SELECT `login` FROM `user` WHERE  `username` = '$username' and `password` = '$password'";
      $result = $conn->query($get_login);
      $row = mysqli_fetch_assoc($result);
      $login_column = $row['login']; //this contains serialized array of login details;
      if($login_column=='' || count(unserialize($login_column))==0){ //if the column is empty i.e  it's first time login, or there are no users logged in
        echo "login column is empty <br>";
        $sub_array = array('s_key'=>$session_id,'time'=>time());
        $main_array=array($sub_array);

        //update login column
        $main_login = serialize($main_array);
        $update_login = "UPDATE `user` SET `login` = '$main_login' WHERE  `username` = '$username' and `password` = '$password'";
        $isUpdated = ($conn->query($update_login) && ($conn->affected_rows>0));
        if($isUpdated){
          echo "main 1 updated<br>";
          echo "login succesful<br>";
          $_SESSION['isLoggedIn']=true;
          $_SESSION['username']=$username;
          $_SESSION['password']=$password;
        }
        else{
          echo "main 1 not updated <br>";
        }
      }
      else if(count(unserialize($login_column))>0 && count(unserialize($login_column))<$login_limit){ //else if coulmn is not empty but doesn't have max simultaneous logins
        echo "Login column is not empty and has ".count(unserialize($login_column))." logins atm <br> Will insert this login now<br>";
        $main_array = unserialize($login_column);
        $sub_array = array('s_key'=>$session_id,'time'=>time());
        array_push($main_array,$sub_array);

        //update login column
        $main_login = serialize($main_array);
        $update_login = "UPDATE `user` SET `login` = '$main_login' WHERE  `username` = '$username' and `password` = '$password'";
        $isUpdated = ($conn->query($update_login) && ($conn->affected_rows>0));
        if($isUpdated){
          echo "main 2 updated<br>";
          echo "login succesful<br>";
          $_SESSION['isLoggedIn']=true;
          $_SESSION['username']=$username;
          $_SESSION['password']=$password;
        }
        else{
          echo "main 2 not updated <br>";
        }

      }
      else if(count(unserialize($login_column))>=$login_limit){ //else if max login has been reached,
        echo "limit reached in login column, now inactive sessions will be removed and this one will be logged in <br>";
        $logins = unserialize($login_column);
        foreach ($logins as $key => $value) {
          if($value['time']<time()-60){ //change 60 to whatever timelimit you want
            unset($logins[$key]);
          }
          // code...
        }
        //after iteration we check if the count of logins is still greater than the limit
        if(count($logins) >= $login_limit){
            //then return a login error that maximum logins reached
            echo "max logins reached, login FAILED!<br>";
        }else{
            //then login is successsfull
            echo "SUCCESS!<br>";
            $_SESSION['isLoggedIn']=true;
            $_SESSION['username']=$username;
            $_SESSION['password']=$password;

        //update login column
        $main_array = ($logins);
        $sub_array = array('s_key'=>$session_id,'time'=>time());
        array_push($main_array,$sub_array);
        $main_login = serialize($main_array);
        $update_login = "UPDATE `user` SET `login` = '$main_login' WHERE  `username` = '$username' and `password` = '$password'";
        $isUpdated = ($conn->query($update_login) && ($conn->affected_rows>0));
        if($isUpdated){
          echo "main 3 updated<br>";
        }
        else{
          echo "main 3 not updated <br>";
        }
      }

      }
      else{
        echo "something went wrong";
      }
    }
  }
  else if($type == 'logout'){
    // $_SESSION['isLoggedIn']=true;
    $username=$_SESSION['username'];
    $password=$_SESSION['password'];

    $get_login = "SELECT `login` FROM `user` WHERE  `username` = '$username' and `password` = '$password'";
    $result = $conn->query($get_login);
    $row = mysqli_fetch_assoc($result);
    $login_column = $row['login'];

    $searchLogin = unserialize($login_column);
    foreach ($searchLogin as $key => $login) {
      // code...
      if($login['s_key']==$session_id){
        echo "<br> session found: ".$login['s_key']."==".$session_id."<br>";
        unset($searchLogin[$key]);
      }
    }
    //update login column
    $main_array = ($searchLogin);
    // $sub_array = array('s_key'=>$session_id,'time'=>time());
    // array_push($main_array,$sub_array);
    $main_login = serialize($main_array);
    $update_login = "UPDATE `user` SET `login` = '$main_login' WHERE  `username` = '$username' and `password` = '$password'";
    $isUpdated = ($conn->query($update_login) && ($conn->affected_rows>0));
    if($isUpdated){
      echo "logged out<br>";
    }
    else{
      echo "FAILED Logout <br>";
    }

  }
}
?>
<form class="" action="index.php" method="post">
  <input type="text" name="username" value="">
  <input type="password" name="password" value="">
  <input type="hidden" name="type" value="login">
  <button type="submit" name="button">login</button>
</form>
<form class="" action="index.php" method="post">
  <input type="hidden" name="type" value="logout">
  <button type="submit" name="button">logout</button>

</form> 
```

# c# - 如何在其他表单的中心打开一个表单

> ID：11343202
> 
> 赞同：0
> 
> 时间：2012-07-05T11:16:10.847
> 
> 标签：c#, wpf

标题中的问题，如何在父级中心打开表单

```
Window win = new MyWPFWindow();

win.... ??? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:18:00.293

```
Window win = new MyWPFWindow();
win.WindowStartupLocation = WindowStartupLocation.CenterOwner;
// the "parent" needs to be another window; most likely, you can just use "this"
win.Owner = parent;
win.Show(); 
```

# ruby-on-rails - 在 rails 3.1+ 中提供资产的未编译版本

> ID：11343203
> 
> 赞同：8
> 
> 时间：2012-07-05T11:16:18.407
> 
> 标签：ruby-on-rails, asset-pipeline, dart

我目前正在将 Dart 集成到 Rails 资产管道中。

编译已经开始了；`.dart`文件`.js`由资产管道编译成。但是，也应该有一个`.dart`可以被 Dartium 解释的未编译版本。

通常的方法是将`.dart`文件包含在 html 源代码中，其类型为`"application/dart"`. 然后是[dart.js](https://code.google.com/p/dart/source/browse/trunk/dart/client/dart.js) ，如果浏览器不理解 Dart，它会将这些`.dart`文件替换为相应的版本，替换为.`.js``foo.dart``foo.dart.js`

我的问题是，资产管道正在为编译后的 JavaScript 版本提供服务，即使客户端请求`foo.dart`. `foo.dart`应该提供原始的未编译版本，只`foo.dart.js`应该编译。

[ruby-dart](https://github.com/amiuhle/ruby-dart)和 [dart-rails](https://github.com/amiuhle/dart-rails)的来源

**编辑**：我考虑将原始`.dart`文件复制到公用文件夹，但这不是一种选择，因为资产管道看到的源文件可能包含其他`.dart`文件，然后将其编译成一个`.js`文件。因此，并非所有`.dart`文件都会被复制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T08:32:25.537

你可以把你的 .dart 文件直接放在 public/assets/

您应该只将要预处理的资产放入 app/assets/ （或 vendor/assets/... 等）。不需要预处理的资产，可以直接放到 public/assets/ 文件夹

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-24T01:23:59.983

我想知道当你对你的代码感到满意时，完全跳过资产管道并依靠 Dart 编辑器来编译你的 JavaScript 是否会更容易。抱歉，我知道这有点贫民窟。

# java - OnClickListener 和 ProgressDialog

> ID：11343206
> 
> 赞同：-3
> 
> 时间：2012-07-05T11:16:28.007
> 
> 标签：java, android, progressdialog, onclicklistener

在我的“OnClickListener”中，“ProgressDialog”没有出现（下面的代码）：

```
 Button suchenbutton = (Button) findViewById(R.id.suchen);
    suchenbutton.setOnClickListener(new View.OnClickListener() {
        //TODO
       public void onClick(View v) {

           ProgressDialog dialog= ProgressDialog.show(TankFinderActivity.this, "", 
                "Loading. Please wait...", true);
           InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
           imm.hideSoftInputFromWindow(filterTextSSD.getWindowToken(), 0);
           loadsuchen();

           dialog.dismiss();

       }

    }); 
```

我做错什么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T11:18:06.397

这似乎`loadsuchen()`是一种在主线程上运行的繁重方法。用于[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)在单独的线程中运行该方法并`dialog.dismiss()`在最后调用：

```
@Override
public void onClick(View arg0)
{
    final ProgressDialog dialog = ProgressDialog.show(TankFinderActivity.this, "", "Loading. Please wait...", true);
    InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.hideSoftInputFromWindow(filterTextSSD.getWindowToken(), 0);

    new AsyncTask<Void, Void, Void>()
    {
        @Override
        protected Void doInBackground(Void... params)
        {
            loadsuchen();
            return null;
        }

        @Override
        protected void onPostExecute(Void result)
        {
            dialog.dismiss();
        }
    }.execute();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T11:24:08.683

这是因为您在按钮的同一个单击事件上显示和关闭对话框。它会在对话框出现时立即关闭对话框。更改代码并尝试将 dialog.dismiss() 保留在其他地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T11:37:46.600

按钮点击

```
Button click = (Button) findViewById(R.id.button1);
        click.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                openprogresdialog();
            }
        }); 
```

创建一个这个方法。

```
private void openprogresdialog() {
        // TODO Auto-generated method stub
        final ProgressDialog progDailog = ProgressDialog.show(
                HidekeybordActivity.this, "Testing", "Please wait...", true);

        new Thread() {
            public void run() {
                try {
                    // Some code........
                } catch (Exception e) {
                }
                progDailog.dismiss();
            }
        }.start();
    } 
```

# ruby-on-rails - RSpec 显示操作视图错误，但页面在本地主机上完美呈现

> ID：11343210
> 
> 赞同：0
> 
> 时间：2012-07-05T11:16:57.047
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec

我正在编写的测试是检查我是否可以删除作业。我想我会先检查链接本身是否存在：

```
describe "Deleting an assignment" do
        before{ visit assignments_path }
        it{ should have_selector('th', text: "Band Member") }
    end 
```

现在，当我加载页面本身时，它完美呈现，没有任何错误（尚未尝试推送到 Heroku），但测试环境返回：

```
Failures:

  1) Assignment pages Deleting an assignment 
     Failure/Error: before{ visit assignments_path }
     ActionView::Template::Error:
       undefined method `name' for nil:NilClass 
```

导致错误的代码在我的作业存根中

```
<td><%= assignment.user.name + " " + assignment.user.surname%></td> 
```

我的分配控制器的索引操作很简单：

```
 def index
  @assignments = Assignment.all
  end 
```

我看不到任何明显的东西，因此将不胜感激。先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:31:45.157

事实证明，在测试环境中创建的用户的第一个实例是 31 而不是 1。这是因为我在另一个测试套件中创建了一组 30 个用户，但之后删除了用户（因此用户 1 不存在） . 我通过使用调用而不是硬编码我认为是 ID 来分配角色来解决这个问题。

```
@assignment = Assignment.create(user_id: @user.id, role_id: @roleSecond.id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:47:46.033

您是否使用不同的数据库进行测试和开发？如果是，请检查您的测试数据库中的所有作业是否都有用户。

# asp.net-mvc-3 - IIS 7.5 上的 Razor mv3 网站

> ID：11343211
> 
> 赞同：0
> 
> 时间：2012-07-05T11:17:10.033
> 
> 标签：asp.net-mvc-3, iis-7

我一直在尝试在 iis 7.5 默认网站上设置一个剃须刀网站。但是当我尝试导航时，我总是收到 HTTP 错误 404.0 - 未找到。

我通过发布部署了站点，我设置了 runAllManagedModulesForAllRequests=true。我有 .net 4 集成模式的应用程序池。

我是否需要在服务器上安装特定的东西才能在 IIS 上运行剃须刀站点？

服务器告诉我这个更新是不可接受的[http://support.microsoft.com/kb/980368](http://support.microsoft.com/kb/980368) ->“有一个更新可以让某些 IIS 7.0 或 IIS 7.5 处理程序处理 URL 不以期间”我正在运行 win server 2008 R2 64 位。

我不是 IIS 专家，该站点在开发服务器中运行完美，因此将不胜感激。

谢谢
寿司。

附言。这是 Global.asax 中的 RegisterRoutes

```
public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

        routes.MapRoute("Suppliers", "Areas/Suppliers{controller}/{action}/{id}", new { area = "Areas", controller = "Dashboard", action = "Index" });
        routes.MapRoute("Administrator", "Areas/Administrator{controller}/{action}/{id}", new { area = "Areas", controller = "Dashboard", action = "Index" }); 

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:24:02.117

我在我们的部署服务器上遇到了类似的问题。经过一番搜索，我刚刚在服务器上安装了[MVC 3 工具](http://go.microsoft.com/fwlink/?LinkID=215693)，网站运行良好。

**编辑** 旁边的小注释，将不同的maproutes放在默认的maproutes之上。否则每条路线都将采用默认路线。它从上到下工作，每个 url 都适合默认路由。

请参阅：[ASP.Net MVC 路由映射](https://stackoverflow.com/questions/11926/asp-net-mvc-route-mapping)

# xml - 根据属性比较 2 个节点集

> ID：11343212
> 
> 赞同：1
> 
> 时间：2012-07-05T11:17:11.317
> 
> 标签：xml, xslt, xpath

这与我之前的问题有关，但我无法为此获得解决方案。在这里，我还需要根据属性值比较两个节点，但这对我来说很难。请提供 xsl 来执行此操作。提前致谢。

输入.xml：

```
<comp>
 <alink>
    <link id="#c1-0003"/>
    <link id="#c1-0001"/>
    <link id="#c1-0002"/>
 </alink>
 <bibsection>
    <bib id="c1-0001">
     <citation>
      <Name>Boud</Name> (<year>2007</year>)
      <vol>32</vol> (<issue>3</issue>
     </citation>
    </bib>
    <bib id="c1-0002">
     <citation>
      <Name>john</Name>(<year>2008</year>)
      <vol>32</vol> (<issue>3</issue>)
     </citation>
    </bib>
    <bib id="c1-0003">
     <citation>
      <name>nnc</name>(<year>2009</year>)
      <vol>32</vol> (<issue>3</issue>)
     </citation>
    </bib>
</bibsection>
 </comp> 
```

输出.xml：

```
<comp>
<alink>
  <link id="#c1-0003"/>
  <year>2009</year>
  <link id="#c1-0001"/>
  <year>2007</year>
  <link id="#c1-0002"/>
  <year>2008</year>
</alink>
<bibsection>
    <bib id="c1-0001">
     <citation>
      <Name>Boud</Name> (<year>2007</year>)
      <vol>32</vol> (<issue>3</issue>
     </citation>
    </bib>
    <bib id="c1-0002">
     <citation>
      <Name>john</Name>(<year>2008</year>)
      <vol>32</vol> (<issue>3</issue>)
     </citation>
    </bib>
    <bib id="c1-0003">
     <citation>
      <name>nnc</name>(<year>2009</year>)
      <vol>32</vol> (<issue>3</issue>)
     </citation>
    </bib>
</bibsection> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:15:31.817

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>
 <xsl:key name="kBibById" match="bib" use="@id"/>

 <xsl:template match="node()|@*" name="identity">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="link">
  <xsl:call-template name="identity"/>
  <xsl:apply-templates select="key('kBibById', substring(@id, 2))/*/year"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于提供的 XML 文档时**（更正以包含不同的年份）：

```
<comp>
    <alink>
        <link id="#c1-0003"/>
        <link id="#c1-0001"/>
        <link id="#c1-0002"/>
    </alink>
    <bibsection>
        <bib id="c1-0001">
            <citation>
                <Name>Boud</Name> (
                <year>2007</year>)       
                <vol>32</vol> (
                <issue>3</issue>
            </citation>
        </bib>
        <bib id="c1-0002">
            <citation>
                <Name>john</Name>(
                <year>2008</year>)
                <vol>32</vol> (
                <issue>3</issue>)      
            </citation>
        </bib>
        <bib id="c1-0003">
            <citation>
                <name>nnc</name>(
                <year>2009</year>)
                <vol>32</vol> (
                <issue>3</issue>)      
            </citation>
        </bib>
    </bibsection>
</comp> 
```

**产生想要的正确结果：**

```
<comp>
   <alink>
      <link id="#c1-0003"/>
      <year>2009</year>
      <link id="#c1-0001"/>
      <year>2007</year>
      <link id="#c1-0002"/>
      <year>2008</year>
   </alink>
   <bibsection>
      <bib id="c1-0001">
         <citation>
            <Name>Boud</Name> (
                <year>2007</year>)       
                <vol>32</vol> (
                <issue>3</issue>
         </citation>
      </bib>
      <bib id="c1-0002">
         <citation>
            <Name>john</Name>(
                <year>2008</year>)
                <vol>32</vol> (
                <issue>3</issue>)      
            </citation>
      </bib>
      <bib id="c1-0003">
         <citation>
            <name>nnc</name>(
                <year>2009</year>)
                <vol>32</vol> (
                <issue>3</issue>)      
            </citation>
      </bib>
   </bibsection>
</comp> 
```

**说明**：

这是解决问题的最短、最简单、最易读和最有效的解决方案之一。

与上一个问题的解决方案唯一不同的是，现在元素的`id`属性值与元素的属性值`link`并不完全相同。`id``bib`

我们需要提取前一种类型的任何值的子字符串，从第 2 个字符开始（即跳过第一个字符）。**[`substring()`](http://www.w3.org/TR/1999/REC-xpath-19991116/#function-substring)**使用标准 XPath函数可以很自然地做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T11:38:48.163

这是一个 XSLT 转换，但我猜您示例中的年份是错误的（在输入中它们都是 2007 年）

```
<?xml-stylesheet type="text/xsl"?>

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<!-- Generally copy all elements and attributes -->
<xsl:template match="*">  
    <xsl:copy>
        <xsl:copy-of select="@*" />
        <xsl:apply-templates />
    </xsl:copy>
</xsl:template>
<!-- For a link element, add the year -->
<xsl:template match="link">  
    <!-- Store the link id without the # -->
    <xsl:variable name='i'><xsl:value-of select='substring(@id,2)' /></xsl:variable>
    <!-- Copy the link element -->
    <xsl:copy>
        <xsl:copy-of select="@*" />
        <xsl:apply-templates />
    </xsl:copy>
    <!-- Add the year as a lookup in the input XML -->
    <year><xsl:value-of select='/comp/bibsection/bib[@id=$i]/citation/year/text()' /></year>
</xsl:template>
</xsl:stylesheet> 
```

# php - PHP选择框从列表中删除父级

> ID：11343219
> 
> 赞同：1
> 
> 时间：2012-07-05T11:17:33.827
> 
> 标签：php, file-upload, upload, uploadify

我有一个表格可以将图像上传到我的网站。

它包含在一个盒子上，其中包含我网站上目录的文件夹。

所有功能都在工作，但我希望它只显示子目录而不是父/子

这是我当前的代码：

它在表单中显示为父/子。

```
 {
    <select size="1" name="fileLocation"><?php
    $imFolder = "gallery";
    $dirs = glob($imFolder . "/*", GLOB_ONLYDIR);
    foreach($dirs as $val){
    echo '<option value="'.$val.'">' .$val. "</option>";
    ?></select>
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:32:52.027

如果您只需要摆脱父/子中的**父****级**，则可以将其炸开

```
{
    <select size="1" name="fileLocation"><?php
        $imFolder = "gallery";
        $dirs = glob( $imFolder . "/*", GLOB_ONLYDIR );
        foreach( $dirs as $val ) {

            # explode the value on "/" and get array of variables
            $val = explode( '/', $val );

            # get last value of the given array
            $last_value = sizeof( $val ) - 1;
            $val = $val[ $last_value ];

            echo '<option value="' . $val . '">' . $val . "</option>";
        }
        ?></select>
 } 
```

可能有一个更清洁的解决方案，但这应该有效

# mysql - WHERE 子句和 ON 子句中的条件

> ID：11343221
> 
> 赞同：5
> 
> 时间：2012-07-05T11:17:49.723
> 
> 标签：mysql, sql

假设我有两张桌子，

```
 Student                           Test

Id    Name                   TestId   Type  StudentId
--    ----                   ------   ----  --------- 
1     Mark                     774    Hard     1  
2     Sam                      774    Hard     2 
3     John                     775    Easy     3 
```

现在我必须找到那些在 MySql 中参加过“硬”类型测试的学生（学生 id、姓名和 testid）。

哪个更好（在性能方面）？

```
1.Select student.id,student.name,test.testid 
  from student 
  join test 
  on test.studentid=student.id and test.type='hard'

2.Select student.id,student.name,test.testid 
  from student 
  join test 
  on test.studentid=student.id 
  where test.type='hard' 
```

我可以知道原因吗？**（假设有数百万学生和数百万种测试）**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T11:20:52.650

两者相同，但*性能不同*。`EXPLAIN PLAN`如果您想选择*性能更好*的查询，我建议您使用查询。

看看[了解查询执行计划](http://dev.mysql.com/doc/refman/5.5/en/execution-plan-information.html)。

`INDEXES`您还可以使用最常用的 in子句来改进查询`WHERE`，也可以查看关系代数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:26:58.887

从性能上讲，这两者大致相同。您可以使用 EXPLAIN 命令验证这一点。

因此，问题变成了数据模型表达的清晰性之一。它可能看起来像天使在针头上跳舞。但是，如果您使用 JOIN 命令提取所有测试结果，然后请求一个子集，请使用`WHERE type='hard'`.

但是，如果从概念上讲，你只拉硬的，那么就使用这个`ON`公式。

请注意，如果您使用`LEFT JOIN`. 如果您将`ON`公式`LEFT JOIN`用于

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T11:19:56.803

这些查询完全相同，并且应该具有完全相同的查询计划。执行时间不太可能有任何可测量的差异。

但是，如果您更改`JOIN`为`LEFT JOIN`. 在这种情况下，您需要使用第一个版本。第二个版本不会给出相同的结果。

# asp.net - jquery-ui模态确认内的asp.net按钮控件

> ID：11343230
> 
> 赞同：1
> 
> 时间：2012-07-05T11:18:19.027
> 
> 标签：asp.net, jquery-ui

我正在删除一个项目，并希望在执行所有与 LINQ 相关的删除之前弹出一个确认窗口。

我想要的是加载到模式确认窗口中，然后执行服务器端功能。

页面按钮：

```
<input type="button" onclick="deleteConfirmation();" value="Eyða korti" id="btnDelete"/> 
```

javascript 基本上来自 jquery-ui 示例页面。我不想要按钮

```
function deleteConfirmation() {

    $(".confirmation").dialog({
            resizable: false,
            height: 350,
            modal: true,
    });
} 
```

标记加载到模态窗口：

```
<div class="confirmation" style="display:none;">
Do you really want to delete...
<asp:Button ID="btnDelete" runat="server" Text="Delete" OnClick="btnDelete_Click" />
<input type="button" value="Cancel" class="button" /> 
```

不用说 OnClick 事件不会触发。我如何获得所需的功能。

编辑：我也试过antoher的东西

我将按钮放在对话框中，然后返回 true/false 然后在 asp 按钮上设置 onclientclick="return deleteConfirmation()" ，因为服务器端代码运行但弹出窗口不等待用户输入.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T11:25:06.630

默认情况下，jQuery 对话框会克隆 dom 元素并将它们放在 body 的末尾。

这在表单标签之外。

由于它在表单标签之外，asp.net 不会收到这些事件。

您需要将 dom 放回表单中。像这样的东西：

```
function deleteConfirmation() {

    $(".confirmation").dialog({
            resizable: false,
            height: 350,
            modal: true,
    });

    //dialog put the asp elements outside form, bring it back

    $(".confirmation").each(function() { 
      var popup = $(this); 
      popup.parent().appendTo($("form:first")); 
    });

    //asp.net has its precious elements back into the form tag.

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T03:52:39.937

我发现这篇文章： [http ://www.aspsnippets.com/Articles/How-to-make-ASPNet-Button-do-PostBack-in-jQuery-Modal-Dialog-Popup.aspx](http://www.aspsnippets.com/Articles/How-to-make-ASPNet-Button-do-PostBack-in-jQuery-Modal-Dialog-Popup.aspx)

我希望它可以使您从点击事件中获得回发的方式更容易一些。

# java - Java - 使用相同的方法和不同的返回类型实现多个接口

> ID：11343238
> 
> 赞同：5
> 
> 时间：2012-07-05T11:18:51.313
> 
> 标签：java, interface, overriding, jls

考虑以下代码：

```
public interface A {
  public A another();
}

public interface B {
  public B another();
}

public interface AB extends A,B {
  public AB another();
} 
```

这会导致编译错误`AB`：

> B 型和 A 型不兼容；都定义了另一个（），但返回类型不相关

我已经看到了这个[SO question](https://stackoverflow.com/questions/2801878/implemeting-2-interfaces-in-a-class-with-same-method-which-interface-method-is-o)，并按照接受的答案中的不兼容示例进行操作 - 即

```
public interface C { 
  public void doSomething();
}

public interface D {
  public boolean doSomething();
}

public interface CD extends C,D { 
} 
```

但是，在那种情况下，返回类型是真正不兼容的——返回类型不能既是 void 又是布尔值。然而，在我上面的例子中，`another()`返回类型`AB`是 an`A`和 a `B`，所以可以实现这两个扩展接口。

此外，看过 JLS（8.4.8、8.4.8.3、8.4.8.4）后，我不太明白为什么我上面的例子是非法的。谁能给我解释一下？

`A`其次，除了重复或`B`中的合同要求之外，是否有任何解决方案/解决方法`AB`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-05T11:21:42.547

对于 1.5 之前的 Java 版本会出现此错误消息（至少我可以在 Eclipse 中将合规级别设置为 1.4 时重现该错误）。换句话说，请确保您正在查看足够旧的规格。

在 Java >= 1.5 上，以下编译良好。

```
interface A {
    public A another();
}

interface B {
    public B another();
}

interface AB extends A,B {
    public AB another();
} 
```

正如您所说，因为`AB`is`A`和 a `B`，它都满足两个接口。

* * *

这是Java语言规范（第二版，即Java 1.4）的引述：

> **9.2 接口成员**
> 
> 接口的成员是：
> 
> *   在接口中声明的那些成员。
> *   那些**从直接超级接口继承的成员**。
> *   如果接口没有直接的超级接口，则 [...]
> 
> 因此，如果接口**声明了具有相同签名和不同返回类型的方法**或不兼容的 throws 子句，则它是编译时错误。

此外，*当前*的规范说明了以下内容：

> **9.4.2 重载**
> 
> 如果一个接口的两个方法（无论是在同一个接口中声明，还是都由接口继承，或者一个声明一个继承）具有相同的名称但不同的签名不是覆盖等效的（第 8.4.2 节），那么方法名称被称为重载。这个事实不会造成任何困难，而且它本身也不会导致编译时错误。返回类型之间或两个具有相同名称但签名不同但不是覆盖等效的方法的 throws 子句之间没有必需的关系。

# xcode - 如何将 NSMutableArray 对象与不同的标签对齐？

> ID：11343240
> 
> 赞同：0
> 
> 时间：2012-07-05T11:18:58.690
> 
> 标签：xcode, random, nsmutablearray

我想在不同的 10 个标签中同时显示数组对象。它们每次都应该随机排列。我怎样才能做到这一点？

我已经完成了随机部分：

```
srandom(time(NULL));
NSUInteger arr = [myarray count];
for (NSUInteger i = 0; i < arr; ++i) {
    int nElements = arr - i;
    int n = (random() % nElements) + i;
    [myarray exchangeObjectAtIndex: i withObjectAtIndex:n];
} 
```

但是当我想用下面的代码对 10 个不同的标签，数组对象重复，并且 2 或 3 个不同的标签可以有相同的值。我怎样才能让它们与众不同？

```
myLabel.text = [NSString stringWithFormat:@"%@", [[arr objectAtIndex:(random()%9)+1]intValue]; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:35:14.693

当您使用 random() 方法将对象随机化为数组时，无需使用 random() 来显示标签中的数据，因为在 randome 方法中，一些返回的数据可以重复返回，因此只需使用 random() 即可随机化数据并使用简单的 for 循环在标签中连续显示它们。

# android - Android：检查 3G 或 Wifi 网络是否在 android 设备上打开或可用

> ID：11343249
> 
> 赞同：17
> 
> 时间：2012-07-05T11:19:28.750
> 
> 标签：android, networking, wifi, 3g

如何以编程方式检查 android 设备上的网络是否可用，当我们尝试连接 Wifi 和 3G 等网络时会抛出消息或 toast 消息。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-07-05T11:19:29.437

要检查网络（即 3G 或 WiFi）是否可用，我们可以在开始活动之前使用以下方法进行验证。

```
ConnectivityManager manager = (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);

//For 3G check
boolean is3g = manager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE)
            .isConnectedOrConnecting();
//For WiFi Check
boolean isWifi = manager.getNetworkInfo(ConnectivityManager.TYPE_WIFI)
            .isConnectedOrConnecting();

System.out.println(is3g + " net " + isWifi);

if (!is3g && !isWifi) 
{ 
Toast.makeText(getApplicationContext(),"Please make sure your Network Connection is ON ",Toast.LENGTH_LONG).show();
} 
 else 
{ 
        " Your method what you want to do "
} 
```

希望这会对某人有所帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-07T18:20:32.297

```
final ConnectivityManager connMgr = (ConnectivityManager)
    this.getSystemService(Context.CONNECTIVITY_SERVICE);

    final android.net.NetworkInfo wifi =
    connMgr.getNetworkInfo(ConnectivityManager.TYPE_WIFI);

    final android.net.NetworkInfo mobile =
    connMgr.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);

    if( wifi.isAvailable() && wifi.getDetailedState() == DetailedState.CONNECTED){
        Toast.makeText(this, "Wifi" , Toast.LENGTH_LONG).show();
    }
    else if( mobile.isAvailable() && mobile.getDetailedState() == DetailedState.CONNECTED ){
        Toast.makeText(this, "Mobile 3G " , Toast.LENGTH_LONG).show();
    }
    else
    {   
        Toast.makeText(this, "No Network " , Toast.LENGTH_LONG).show();
    } 
```

此代码检查您是否使用 wifi 或 3g 或什么都没有，如果 wifi 打开但未连接到网络或 3g 有信号问题，它会检测此详细信息，并使用详细状态

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-12-15T11:25:17.673

您可以使用此方法检查您的互联网连接是**2G、3G 还是 4G**：

```
public String getNetworkClass(Context context) {
    TelephonyManager mTelephonyManager = (TelephonyManager)
            context.getSystemService(Context.TELEPHONY_SERVICE);
    int networkType = mTelephonyManager.getNetworkType();
    switch (networkType) {
        case TelephonyManager.NETWORK_TYPE_GPRS:
        case TelephonyManager.NETWORK_TYPE_EDGE:
        case TelephonyManager.NETWORK_TYPE_CDMA:
        case TelephonyManager.NETWORK_TYPE_1xRTT:
        case TelephonyManager.NETWORK_TYPE_IDEN:
            return "2G";
        case TelephonyManager.NETWORK_TYPE_UMTS:
        case TelephonyManager.NETWORK_TYPE_EVDO_0:
        case TelephonyManager.NETWORK_TYPE_EVDO_A:
        case TelephonyManager.NETWORK_TYPE_HSDPA:
        case TelephonyManager.NETWORK_TYPE_HSUPA:
        case TelephonyManager.NETWORK_TYPE_HSPA:
        case TelephonyManager.NETWORK_TYPE_EVDO_B:
        case TelephonyManager.NETWORK_TYPE_EHRPD:
        case TelephonyManager.NETWORK_TYPE_HSPAP:
            return "3G";
        case TelephonyManager.NETWORK_TYPE_LTE:
            return "4G";
        default:
            return "Unknown";
    }
} 
```

使用以下方法，您可以检查**互联网是否可用**，并了解您是通过**移动网络还是 WiFi**访问互联网：

```
public String getNetworkType(Context context){
    String networkType = null;
    ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo activeNetwork = connectivityManager.getActiveNetworkInfo();
    if (activeNetwork != null) { // connected to the internet
        if (activeNetwork.getType() == ConnectivityManager.TYPE_WIFI) {
                networkType = "WiFi";
        } else if (activeNetwork.getType() == ConnectivityManager.TYPE_MOBILE) {
            networkType = "Mobile";
        }
    } else {
        // not connected to the internet
    }
    return networkType;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-22T21:58:27.827

这对我有用

```
NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();   
String name networkInfo.getTypeName(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-04-22T21:10:41.903

Rahul Baradia 的回答包括`manager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE)`并且已弃用。

以下是针对最新 Android SDK 的改进解决方案。

```
ConnectivityManager connManager = (ConnectivityManager) context.getSystemService(CONNECTIVITY_SERVICE);
        boolean is3gEnabled = false;
        if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
            Network[] networks = connManager.getAllNetworks();
            for(Network network: networks)
            {
                NetworkInfo info = connManager.getNetworkInfo(network);
                if(info!=null) {
                    if (info.getType() == ConnectivityManager.TYPE_MOBILE) {
                        is3gEnabled = true;
                        break;
                    }
                }
            }
        }
        else
        {
            NetworkInfo mMobile = connManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
            if(mMobile!=null)
                is3gEnabled = true;
        } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-05T11:25:27.310

使用以下代码作为**NetworkChecker.java**并**在您的代码中重用它**：

```
package das.soumyadip.util;

import android.net.ConnectivityManager;
import android.util.Log;

public class NetworkChecker {
    private final static String TAG = "NwtworkChecker";

    public static boolean isNetworkConnected(
            final ConnectivityManager connectivityManager) {
        boolean val = false;

        Log.d(TAG, "Checking for Mobile Internet Network");
        final android.net.NetworkInfo mobile = connectivityManager
                .getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
        if (mobile.isAvailable() && mobile.isConnected()) {
            Log.i(TAG, "Found Mobile Internet Network");
            val = true;
        } else {
            Log.e(TAG, "Mobile Internet Network not Found");
        }

        Log.d(TAG, "Checking for WI-FI Network");
        final android.net.NetworkInfo wifi = connectivityManager
                .getNetworkInfo(ConnectivityManager.TYPE_WIFI);
        if (wifi.isAvailable() && wifi.isConnected()) {
            Log.i(TAG, "Found WI-FI Network");
            val = true;
        } else {
            Log.e(TAG, "WI-FI Network not Found");
        }

        return val;
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-06T06:46:36.807

```
 // TODO Auto-generated method stub
        ConnectivityManager connMgr =
                (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();

        final android.net.NetworkInfo mobile = connectivityManager
                .getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
        if (mobile.isAvailable() && mobile.isConnected()) {
            Log.i(TAG, "Found Mobile Internet Network");
            val = true;
        }
        // Checks the user prefs and the network connection. Based on the result, decides
        // whether
        // to refresh the display or keep the current display.
        // If the userpref is Wi-Fi only, checks to see if the device has a Wi-Fi connection.
        if (WIFI.equals(sPref) && networkInfo != null
                && networkInfo.getType() == ConnectivityManager.TYPE_WIFI) {
            // If device has its Wi-Fi connection, sets refreshDisplay
            // to true. This causes the display to be refreshed when the user
            // returns to the app.
            refreshDisplay = true;
            Toast.makeText(context, R.string.wifi_connected, Toast.LENGTH_SHORT).show();

            // If the setting is ANY network and there is a network connection
            // (which by process of elimination would be mobile), sets refreshDisplay to true.
        }

}
        else if (ANY.equals(sPref) && networkInfo != null) {
            refreshDisplay = true;

            // Otherwise, the app can't download content--either because there is no network
            // connection (mobile or Wi-Fi), or because the pref setting is WIFI, and there
            // is no Wi-Fi connection.
            // Sets refreshDisplay to false.
        } else {
            refreshDisplay = false;
            Toast.makeText(context, R.string.lost_connection, Toast.LENGTH_SHORT).show();
        } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-09-04T10:00:54.043

我们可以使用**ConnectivityManager 类**获取与网络相关的任何信息。

**它还会在网络连接发生变化**时通知应用程序。通过调用获取此类的实例

**这个类的主要职责是：**

1.  监控网络连接（Wi-Fi、GPRS、UMTS 等）
2.  当网络连接发生变化时发送广播意图
3.  当与网络的连接丢失时，尝试“故障转移”到另一个网络
4.  提供 API 允许应用程序查询可用网络的粗粒度或细粒度状态
5.  提供允许应用程序为其数据流量请求和选择网络的 API

**GetNetworkInfo 函数**返回有关特定网络类型的状态信息。

此方法需要调用者持有权限

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

     /**
     * Checks the type of data connection that is currently available on the device.
     *
     * @return <code>ConnectivityManager.TYPE_*</code> as a type of internet connection on the
     *This method does not support multiple connected networks
     *             of the same type.
     * device. Returns -1 in case of error or none of
     * <code>ConnectivityManager.TYPE_*</code> is found.
     **/ 
```

--

```
public static int getDataConnectionType(Context ctx) {

        ConnectivityManager connectivityManager = (ConnectivityManager) ctx.getSystemService(Context.CONNECTIVITY_SERVICE);

        if (connectivityManager != null && connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE) != null) {
            if (connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).isConnected()) {
                return ConnectivityManager.TYPE_MOBILE;
            } else if (connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI).isConnected()) {
                return ConnectivityManager.TYPE_WIFI;
            } else
                return -1;
        } else
            return -1;
    } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-12-20T06:47:29.067

```
public boolean isInternetAvailable(Context context) {
    ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo activeNetwork = cm.getActiveNetworkInfo();
    if (activeNetwork != null) { // connected to the internet
        if (activeNetwork.getType() == ConnectivityManager.TYPE_WIFI) {
            // connected to wifi
            return true;

        } else if (activeNetwork.getType() == ConnectivityManager.TYPE_MOBILE) {
            // connected to the mobile provider's data plan
            return true;
        }
    } else {
        // not connected to the internet
        return false;
    }
    return false;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-04-06T19:42:51.030

在上面的任何代码中，我都没有看到 getNetworkInfo() 是否返回 null 的检查，根据文档，当不支持请求的网络类型时会发生这种情况。这表明在没有 3g 的设备上，应用程序将因空指针异常而崩溃。

# c# - 根据 Item 属性的 ListBox 分隔符

> ID：11343251
> 
> 赞同：0
> 
> 时间：2012-07-05T11:19:32.680
> 
> 标签：c#, .net, wpf, xaml, wpf-controls

我有一个`ViewLookupItem`具有以下属性的类型项目列表：

![显示没有组的 LookupItems 的属性](../Images/4248f2603cf100fe7625f026ee740f14.png)

例如，这个项目示例没有组，但是一个项目可以属于一个组，如下所示：

![显示带有组的 LookupItems 的属性](../Images/1dababe3ab3b5abf3bb47f7a86544238.png)

我想要做的是，当一个项目属于一个组时，我想在分隔符下显示它，如果该项目不属于一个组，则正常显示它，这是我当前`ListBox`的下面（左边的那个）：

![列表框](../Images/51aa77b476f04783caaa4f7e2d619f59.png)

当项目属于一个组时，我希望它看起来像这样：

![分组列表框](../Images/ea68ccb39ea09f069985b596be16eda4.png)

我想我需要使用某种触发器，但我不知道如何使用它们，任何帮助将不胜感激:) 这是我当前的 XAML `ListBox`：

```
<ListBox BorderBrush="Black" 
         Height="303" 
         HorizontalAlignment="Left" 
         Margin="15,59,0,0" 
         Name="lstResults" 
         VerticalAlignment="Top" 
         Width="295" 
         SelectionMode="Multiple" 
         AllowDrop="True" 
         local:ListBoxSelector.Enabled="True"     
         PreviewMouseLeftButtonDown="lstResults_PreviewMouseLeftButtonDown" 
         PreviewMouseMove="lstResults_PreviewMouseMove" TabIndex="1" 
         PreviewMouseDoubleClick="lstResults_PreviewMouseDoubleClick">
    <ListBox.ItemTemplate>
        <DataTemplate>                
            <TextBlock Text="{Binding TextValue}" 
                       TextWrapping="Wrap" 
                       FontSize="14"/>                    
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:03:18.777

您可以在您的收藏上创建一个收藏视图，并告诉它按您的`Group`属性分组。然后，您可以`GroupStyle`在 your`ListBox`上定义一个来定义分组的可视化方式。

这是一个简单的示例（不遵循最佳实践或 MVVM 或任何东西，但用于说明您的场景的集合视图）：

**MainWindow.xaml.cs**：

```
using System.Collections;
using System.Collections.Generic;
using System.ComponentModel;
using System.Windows;
using System.Windows.Data;

namespace SO11343251
{
    public partial class MainWindow : Window
    {
        private readonly ICollection<ViewLookupItem> items;
        private readonly ICollectionView itemsView;

        public MainWindow()
        {
            InitializeComponent();

            this.items = new List<ViewLookupItem>();

            this.items.Add(new ViewLookupItem("Amenities", "No Group"));
            this.items.Add(new ViewLookupItem("Indoor", "Area"));
            this.items.Add(new ViewLookupItem("Outdoor", "Area"));

            this.itemsView = new ListCollectionView((IList)this.items);
            this.itemsView.GroupDescriptions.Add(new PropertyGroupDescription("Group"));

            this.DataContext = this;
        }

        public ICollection<ViewLookupItem> Items
        {
            get { return this.items; }
        }

        public ICollectionView ItemsView
        {
            get { return this.itemsView; }
        }
    }

    public class ViewLookupItem
    {
        private readonly string name;
        private readonly string group;

        public ViewLookupItem(string name, string group)
        {
            this.name = name;
            this.group = group;
        }

        public string Name
        {
            get { return this.name; }
        }

        public string Group
        {
            get { return this.group; }
        }
    }
} 
```

**MainWindow.xaml**：

```
<Window x:Class="SO11343251.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <ListBox ItemsSource="{Binding ItemsView}">
        <ListBox.GroupStyle>
            <GroupStyle>
                <GroupStyle.HeaderTemplate>
                    <DataTemplate>
                        <TextBlock x:Name="textBlock" FontWeight="Bold" Text="{Binding Name}"/>

                        <DataTemplate.Triggers>
                            <DataTrigger Binding="{Binding Name}" Value="No Group">
                                <Setter TargetName="textBlock" Property="Visibility" Value="Collapsed"/>
                            </DataTrigger>
                        </DataTemplate.Triggers>
                    </DataTemplate>
                </GroupStyle.HeaderTemplate>
            </GroupStyle>
        </ListBox.GroupStyle>
        <ListBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Name}"/>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Window> 
```

**结果**：

![在此处输入图像描述](../Images/c942375c59f44b7814aa65901751fca8.png)

# css - 如何在输入框之后放置div？

> ID：11343257
> 
> 赞同：2
> 
> 时间：2012-07-05T11:19:47.337
> 
> 标签：css

如何在“子域”输入框之后立即获得“.domain.com”？

```
<div style="display:block; ">
<input type="text" placeholder="subdomain" style="width: 245px;">
<div style="float: right;">.domain.com</div>
</div> 
```

[​http://jsfiddle.net/Tmusf/](http://jsfiddle.net/Tmusf/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T11:20:38.660

```
<input type="text" placeholder="subdomain" style="width: 245px;float: left;">
<div style="float: left;">.domain.com</div> 
```

示例[http://jsfiddle.net/Tmusf/1/](http://jsfiddle.net/Tmusf/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T11:22:29.690

现在习惯了

```
 <div style="display:block; ">
<input type="text" placeholder="subdomain" style="width: 245px;vertical-align:top;">
<div style="vertical-align:top; display:inline-block;">.domain.com</div>
</div> 
```

现场演示[http://tinkerbin.com/NqJ4mAwm](http://tinkerbin.com/NqJ4mAwm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T11:22:00.387

将 CSS 更改为`<div style="display: inline">.domain.com</div>`

更新小提琴 - [http://jsfiddle.net/Tmusf/2/](http://jsfiddle.net/Tmusf/2/)

```
<div style="display:block; ">
  <input type="text" placeholder="subdomain" style="width: 245px;">
  <div style="display: inline">.domain.com</div>
</div> 
```

或者你可以使用一些`inline element`like`span`而不是`div`你不必设置它的样式

```
<div style="display:block; ">
      <input type="text" placeholder="subdomain" style="width: 245px;">
      <span>.domain.com</span>
    </div> 
```

或者您可以直接添加`.domain.com`文本而无需任何容器

```
<div style="display:block; ">
          <input type="text" placeholder="subdomain" style="width: 245px;">
          .domain.com
        </div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T13:00:07.713

```
<div style="display: block;">
        <input type="text" placeholder="subdomain" style="width: 245px;" />.domain.com
    </div> 
```

作为 Dipaks 代码，Above 是解决您的问题的最简单和最简单的解决方案。如果您想给出一些样式，请在标签中给出。

例子：

```
<div style="display: block;">
        <input type="text" placeholder="subdomain" style="width: 245px;" /><span         style="color:Blue;">.domain.com</span>
    </div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-10T09:05:46.080

这是给你的最佳答案

```
<div class="field">
     <input type="text" value="" class="field_site" id="site_address" name="site_address">
     <span class="text_inner">.example.com</span> 
      </div>

      <style>
       .field {
        border: 1px solid #C7C7C7;
        height: 30px;
        width: 300px;
    }
    .field_site {
        background: none repeat scroll 0 0 rgba(0, 0, 0, 0);
        border: medium none;
        height: 30px;
        width: 200px;
    }
    .text_inner {
        color: #999999;
    }
      </style> 
```

# android - 在 Android 上使用 MediaPlayer 的音量问题

> ID：11343266
> 
> 赞同：0
> 
> 时间：2012-07-05T11:20:25.183
> 
> 标签：android, audio, media-player

我在使用 MediaPlayer 播放声音时遇到问题。如果设备音量为 0 时开始播放声音，则不会播放。我来解释一下：如果在开始播放声音的那一刻，设备的音量= 0，然后我提高音量，它仍然不发声。但是，如果声音开始时它的音量！= 0，我可以将其降低到静音，然后再次增加它仍然在播放。

这是代码：

```
mpMusic = MediaPlayer.create(context, R.raw.musicmenu_overcast);
float streamVolume = manager.getStreamVolume(AudioManager.STREAM_MUSIC);
streamVolume = streamVolume / manager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
mpMusic.setVolume(streamVolume, streamVolume);
mpMusic.start();
mpMusic.setLooping(true); 
```

我究竟做错了什么？谢谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:42:56.710

请注意，这里有两种声级：

*   STREAM 卷
*   播放器音量

如果您将 PLAYER 音量设置为“0”，无论 STREAM 音量的值是多少，您都听不到任何声音……例如，如果您将 PLAYER 音量设置为“10”，您将听到您的音乐，其音量为是 STREAM 体积的 10%。

在您的情况下，当 STREAM 音量为 0 时，您将音量播放器设置为“0”......这就是您听不到任何声音的原因。

您确定需要调整 PLAYER 的音量吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:25:45.047

```
mpMusic.setLooping(true); 
```

你正在循环播放你的声音，这就是它一直播放的原因。

# jquery - IE 没有来自 /me/friends 的 response.data

> ID：11343271
> 
> 赞同：0
> 
> 时间：2012-07-05T11:20:35.930
> 
> 标签：jquery, facebook, each

我不确定我是否必须询问 jQuery 或 Facebook，但是：我当前的网站[Social Promo](http://www.social-promo.fr "社交宣传")允许用户邀请他们的朋友加入以进行赞助。所以我使用下面的代码，它工作正常......除了在 IE 上。

```
function load_friends() {
    if($('#fb_friendbox').is(':empty')) {
        FB.api('/me/friends', function(response) {
            $.each(response.data, function(index,friend) {
                var nextFriend = '<div class="fb_friend" onclick="resend_invite('+friend.id+');return false;"><div class="fb_picture"><img src="https://graph.facebook.com/'+ friend.id +'/picture" /></div><div class="fb_name"><span>'+ friend.name +'</span></div></div>';
                $('#fb_friendbox').append(nextFriend);
            });
            $('.ajax-load').css('display','none');
        });
    }
} 
```

IE 的 js 控制台告诉我（来自法语）`Can't get value of 'length', object is null or undefined`。因此，由于我不经常使用 IE（据我所知，我不能使用 console.log 或调试），我只是尝试了一些 alert() 并查看：

*   `response`是一个对象
*   `response.data`未定义（其他浏览器，如 Chrome，返回对象列表）
*   代码流很好，直到该`$.each`行

所以最后IE不加载当前用户的好友列表，也不知道是什么。我是否错过了 IE 需要的此功能中的某些内容，但其他浏览器却没有？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T15:22:59.620

我*敢打赌*response.error 已设置，并告诉您您没有使用有效的访问令牌。

而且，我也很确定，这又源于古老的*第三方 cookie*问题……</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:27:36.303

安德……关门了。我的问题解决了，事实上它从来不存在。我正在使用 Linux，所以对于 IE 版本，我借了一位同事的 Windows 电脑，最后发现（通过尝试另一位同事的电脑，一切正常）第一个以我不理解的方式阻止了每个 Facebook 请求，也不这是什么行为。那是存在的`data`并且`error`不存在的。

# c# - '不能使用合并将类型'void'隐式转换为'System.Data.DataTable'

> ID：11343274
> 
> 赞同：1
> 
> 时间：2012-07-05T11:20:44.603
> 
> 标签：c#, merge, datatable

每次我使用 Merge() 时，我都有以下内容：'不能将类型'void'隐式转换为'System.Data.DataTable'。

你能告诉我我的代码有什么问题吗？

```
DataRow[] befdvd = toverify.Select("Date < '# " + dvddate + "#'");
DataRow[] aftdvd = toverify.Select("Date => '# " + dvddate + "#'");
foreach (DataRow dr in befdvd ) 
 dr[gl.EX_PRICE] = (double)dr[gl.EX_PRICE] * dvdfact;
 DataTable beff = befdvd.CopyToDataTable();
 DataTable Aftt = aftdvd.CopyToDataTable();
 toverify = beff.Merge(Aftt); 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T11:22:10.697

阅读错误信息。

`Merge()`返回`void`。
您不能将其分配给`DataTable`变量。

`Merge()`将第二个表合并到第一个表中；它不会创建新表。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T11:23:58.550

根据[MSDN](http://msdn.microsoft.com/en-us/library/fk68ew7b.aspx) DataTable.Merge() 返回 void：

```
public void Merge(
    DataTable table
) 
```

所以你不能做那种任务。试试这个：

```
beff.Merge(Aftt);
toverify = beff; 
```

# javascript - 在表格中添加或删除单个列

> ID：11343276
> 
> 赞同：0
> 
> 时间：2012-07-05T11:20:55.630
> 
> 标签：javascript, jquery, html

我目前正在编写一个脚本，用户需要将数据添加到表中，但他可以使用添加按钮添加另一列，这需要在每一行上完成。此外，当您将鼠标悬停在每一位信息上时，我需要一个删除按钮，该按钮会出现在每个信息旁边。

此刻我有一个静态表，其中每行有两列，如下所示......

```
<table>
    <tr>
        <td>Row1 Column1</td>
        <td><input type="text" name="val2">Row2 Column1</input>//Remove btn on mouseover</td>
    </tr>//Add btn
    <tr>
        <td>Row1 Column2</td>
        <td><input type="text" name="val2">Row2 Column2</input>//Remove btn on mouseover</td>//Add btn
    </tr>
</table> 
```

我需要什么来动态添加和/或删除每个项目，Javascript 或 jQuery？

你知道任何可以帮助解决这个问题的教程吗？

我的 Javascript 和 jQuery 知识几乎是无效的，因为我已经一年多没有看过它了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:34:18.993

[http://www.mredkj.com/tutorials/tableaddcolumn.html](http://www.mredkj.com/tutorials/tableaddcolumn.html)

然后使用 jquery 将信息发布到您的服务器并使用 php 处理程序来处理信息并保存它。

# r - 元素数量不同的多线图不起作用。如何为所有线赋予不同的颜色

> ID：11343279
> 
> 赞同：0
> 
> 时间：2012-07-05T11:21:11.360
> 
> 标签：r

![我得到的图表](../Images/a7da66a0be32adead8fc3b0fd77c763d.png)我有如下数据。我需要根据区域绘制图表。如果我们基于区域进行提取，则每个列表的元素数量都不相同。

```
 avg_data

    date    region  AveElapsedTime
    5/1/2012        Beta    22
    5/2/2012        Beta    34
    5/3/2012        Beta    22
    5/4/2012        Beta    44
    5/5/2012        Beta    21
    5/6/2012        Beta    65
    5/7/2012        Beta    23
    5/8/2012        Beta    26
    5/9/2012        Beta    75
    5/10/2012       Beta    32
    5/3/2012        preprod 23
    5/4/2012        preprod 32
    5/5/2012        preprod 54
    5/6/2012        preprod 45
    5/7/2012        preprod 67
    5/8/2012        preprod 33
    5/10/2012       preprod 56
    5/5/2012        prod    44
    5/6/2012        prod    50
    5/7/2012        prod    30
    5/8/2012        prod    40
    5/9/2012        prod    76 
```

为了方便阅读，以表格形式粘贴

```
 Date    Beta    preprod prod
    5/1/2012        22
    5/2/2012        34
    5/3/2012        22      23
    5/4/2012        44      32
    5/5/2012        21      54      44
    5/6/2012        65      45      50
    5/7/2012        23      67      30
    5/8/2012        26      33      40
    5/9/2012        75              76
    5/10/2012       32      56 
```

这是我的 R 脚本

```
 avg_data <- read.table("qes.tbl", header=T, sep=",")
    avg_data
            dl <- avg_data[avg_data$region == "prod", "AveElapsedTime"]
    dl
            datel <- avg_data[avg_data$region == "prod", "date"]
    datel
    #Creating the graph pdf in the below path to give as a link in the mail
    FL <- 20120631
    file <- paste("graph", FL, "pdf", sep=".")
    plot_colors <- c("blue","red","forestgreen","black")
    pdf(file, height=4.5, width=9.5, onefile=TRUE)
    graphplot <- function(l, REG, tl, num) {
            dl <- REG[REG$region == l, tl]
            datel <- REG[REG$region == l, "date"]
            lines(datel, dl, type="l", pch=2, col=plot_colors[num])
    }
    drawGraph <- function(ab, y, z, s) {
            #Creating X axis
            x <- ab[ab$region == "Beta", z]
            y <- ab[ab$region == "Beta", "date"]
            a <- x
            g_range <- range(0,x[!is.na(x)])
            x[x==0] <- NA
            plot(which(!is.na(x)),x[!is.na(x)], type="l", col="orange", ylim=g_range,axes=FALSE, ann=FALSE)
            num=0
            sapply(unique(ab$region[ab$region != "Beta"]), FUN=graphplot, REG=ab, tl=z, num=num+1)
            x <- a
            box()
            axis(1, at=1:length(x), lab=FALSE)
            text(1:length(x), par("usr")[3] - 2, srt=45, adj=1.2, labels=y, xpd=T, cex=0.3)
            scale <- s
            axis(2, las=1, at=scale*0:g_range[2], cex.axis=0.3)
            main_title<-as.expression(z)
            #Caculationg Mean, Upper limit and lower limit using the below commands
            MEANLIMIT <- seq(length=length(x), from=mean(x), by=0)
            ULIMIT <- seq(length=length(x), from=mean(x) + 2.66*sum(abs(diff(x)))/length(x), by=0)
            LLIMIT <- seq(length=length(x), from=mean(x) - 2.66*sum(abs(diff(x)))/length(x), by=0)
            lines(MEANLIMIT, type="l", col="black")
            lines(ULIMIT, type="l", pch=2, lty=2, col="grey")
            lines(LLIMIT, type="l", pch=2, lty=2, col="black")
            title(main=main_title, col.main="red", font.main=4)
            title(xlab="Test Execution Date", col.lab=rgb(0,0.5,0))
            title(ylab="Millisecond", col.lab=rgb(0,0.5,0))
            legend("topright", g_range[2], main_title, cex=0.4, col=c("blue"), lty=1);
    }
    lab<-as.character(avg_data$date)

    AET <- avg_data$AveElapsedTime
    MTitle <- "AveElapsedTime"
    #Creating graph for Average Elapsed time
            drawGraph(avg_data, lab, MTitle, 5) 
```

当我尝试在 sapply 中使用“线条”绘制图表时，我的图表没有正确显示。没有 sapply 它也不起作用。它是从下一个 x 轴点绘制的。例如：生产日期从 2012 年 5 月 5 日开始。但在图表中，对于 prod，这条线从 2012 年 5 月 6 日开始。对于 preprod 也是如此。

另外请告知当我通过 sapply 调用时如何为额外的线条提供多种颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:27:37.000

使用`ggplot`并为自己省去很多麻烦：

```
library(ggplot2)
avg_data$date <- as.Date(avg_data$date, format="%m/%d/%Y")

ggplot(avg_data, aes(date, AveElapsedTime)) + geom_line(aes(col=region)) 
```

![在此处输入图像描述](../Images/d175bcaff479668793142ee244671121.png)

# c# - 将 mySQL DB 存储在应用程序文件夹中

> ID：11343280
> 
> 赞同：2
> 
> 时间：2012-07-05T11:21:12.877
> 
> 标签：c#, mysql, database

我想用 C# 开发一个使用 mySQL dbms 的应用程序。我将不得不在不同的电脑上安装这个软件，而且它们的数据库中都有不同的记录。是否可以将此数据库存储在单个文件中以提供更好的移动性，或者我是否必须在所有这些机器上安装 mySQL dbms 并将数据库存储在本地服务器中？如果无法完成，是否有任何高性能 dbms 允许将数据库存储在单个文件中？谢谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:27:42.553

你可以将整个 Innodb 数据库存储在一个文件中——但你仍然需要在目标机器上安装 MySQL。对于单用户 DBMS，这没有多大意义。由于您使用 C# 编写应用程序，因此该应用程序只能在 MSWindows 机器上运行，这将指向基于 JET 的方法 - 但 MDAC 遗留问题有些混乱。SQLite 看起来不那么痛苦。

# hibernate - NHibernate 生成的选择查询有太多的投影

> ID：11343281
> 
> 赞同：0
> 
> 时间：2012-07-05T11:21:12.990
> 
> 标签：hibernate, nhibernate, criteria-api

我有一个 NHibernate 分离标准查询，它有几个内部连接，当我得到它生成的 SQL 语句时，它似乎在投影中有很多我实际上不需要的列。最烦人的是这会对性能产生重大影响。

例如，生成的查询可能看起来像

```
 select a.a, a.b, a.c .... a.z,
    b.a, b.b, b.c .... b.z
    from ...
    where... 
```

但我真正想要的是

```
 select a.*
    from ...
    where... 
```

我试图通过使用结果转换器或其他方法找到任何可能帮助我解决此问题的资源，因为我对标准 api 的了解还很不成熟。

这可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:18:32.570

在数据库上选择 * 不是最佳实践。你会发现无休止的评论引用它。所以宁愿避免选择 *. 您可以使用 QueryOver 或 Linq 语法在 NHibernate 中使用投影，并且只为您需要的列生成 SQL 选择。

```
 var trades = _session.QueryOver<Trade>()
              .SelectList(list => list
                                        .Select(x => x.Name))
              .List<object>(); 
```

或者

```
 var trades = _session.Query<Trade>()
                  .Select(x => new
                                     {
                                           x.Name
                                     })
                  .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:25:17.923

```
 query.SetProjection(ResultProjectionList);
  query.SetResultTransformer(NHibernate.Transform.Transformers.AliasToBean(typeof(Result))); 
```

像魅力一样工作:-)

这篇文章也有很大帮助

[http://www.skimedic.com/blog/post/2009/02/03/Using-Projections-and-Transformers-in-NHibernate.aspx](http://www.skimedic.com/blog/post/2009/02/03/Using-Projections-and-Transformers-in-NHibernate.aspx)

# xml - 关于印地语单词的系统编码

> ID：11343282
> 
> 赞同：2
> 
> 时间：2012-07-05T11:21:14.713
> 
> 标签：xml, encoding, character-encoding, google-docs

我正面临编码问题。我确实在 GMail 中输入了一些印地语单词，然后我将这些单词复制到了 google doc。现在，当我通过不同系统上的不同用户帐户访问该文档时，该词看起来不同（参考下图 #1 #2）。当我使用 UTF-8 编码输入 xml 时，我得到了与 Google doc 相同的响应。

我的xml如下。

```
<?xml version="1.0" encoding="utf-8" ?> 
<Details>
<Hindi>">प्रश्न - विद्यार्थी प्रतिक्रिया सही है या गलत ?</Hindi> 
</Details> 
```

**我想要的是 ？** 结果在不同系统上显示如下#1和#2

![在此处输入图像描述](../Images/f00143537834da6a2b9d17a9c9baa113.png)

我想要那个 1\. 我在 xml 或 doc 中添加的词，它应该在任何系统上看起来都一样。2\. 我希望 Result 为 #3，这是两个不同系统的结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:06:38.207

我很确定这是字体问题，而不是编码问题。显示不同的客户端只是出于某种原因选择另一种字体来显示文本。

不同字体的相同文本示例：

![字体](../Images/2346fd784cbe4a4b5720f8453a0dee94.png)

# c++ - 模板参数 1 无效 (Code::Blocks Win Vista) - 我不使用模板

> ID：11343288
> 
> 赞同：3
> 
> 时间：2012-07-05T11:21:54.427
> 
> 标签：c++, codeblocks

我的学校项目遇到了一些麻烦。

我有一堂课：

```
#include "Group.h"
#include <vector>
#include <string>
using namespace std;

class User{
    private :
        string username;
        vector<Group*> groups;
        void show() {
            for(int i=0; i<groups.size(); i++)
                cout << groups[i]->getName() << "\n";
        }
        string getUsername(){return username;}

}; 
```

和

```
#include "User.h"
#include <vector>
#include <string>
using namespace std;

class Group{
    private :
        string name;
        string getName(){return name;};
        User *f;
        vector<User*> m;
        void show(){
            for(int i=0; i<m.size(); i++)
                cout << m[i]->getUsername() << "\n";
        }
}; 
```

当我尝试编译它时，它给了我错误：

```
E:\Group.h|31|error: ISO C++ forbids declaration of 'User' with no type| E:\Group.h|31|error: expected ';' before '*' token|
E:\Group.h|33|error: 'User' was not declared in this scope|
E:\Group.h|33|error: template argument 1 is invalid|
E:\Group.h|33|error: template argument 2 is invalid|
E:\Group.h|36|error: 'User' was not declared in this scope|
E:\Group.h|36|error: template argument 1 is invalid|
E:\Group.h|36|error: template argument 2 is invalid|
E:\Group.h|47|error: 'User' has not been declared|
E:\Group.h|47|error: 'User' was not declared in this scope|
E:\Group.h|47|error: template argument 1 is invalid|
E:\Group.h|47|error: template argument 2 is invalid|
E:\Group.h|58|error: ISO C++ forbids declaration of 'User' with no type| E:\Group.h|58|error: expected ';' before '*' token|
E:\Group.h|59|error: 'User' has not been declared|
E:\Group.h|60|error: 'User' was not declared in this scope|
E:\Group.h|60|error: template argument 1 is invalid|
E:\Group.h|60|error: template argument 2 is invalid|
E:\Group.h|61|error: 'User' was not declared in this scope|
E:\Group.h|61|error: template argument 1 is invalid|
E:\Group.h|61|error: template argument 2 is invalid| ||=== Build finished: 21 errors, 4 warnings ===| 
```

怎么了？

只有当我添加`class User;`到 Group.h 文件和`class Group;`User.h 文件时它才会编译，但这不是我寻找正确解决方案的重点，而不仅仅是临时解决方案。

**我的整个项目：** [http ://www.speedyshare.com/jXYuM/proj.tar](http://www.speedyshare.com/jXYuM/proj.tar)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-05T11:26:54.503

你有一个周期性的依赖。这两个文件需要相互编译。

尝试在组中前向声明用户：

```
#include <vector>
#include <string>

class User;

class Group{
    private :
        std::string name;
        std::string getName(){return name;};
        User *f;
        std::vector<User*> m;
        void show(); 
}; 
```

**组.cpp**

```
#include "Group.h"
#include "User.h"

using namespace std;

class Group
{
    .....

    void show() {
        for(int i=0; i<m.size(); i++)
        cout << m[i]->getUsername() << "\n";
    }

    .....
 } 
```

然后在 Group.cpp 文件中，包括用户。

您可以随时在标头中转发声明对象大小不取决于您转发声明的对象的实际大小。在这种情况下，（在组中）您使用用户作为指针，因此组的大小不依赖于用户的大小，它只存储一个与用户大小无关的指针。

另一个应该有所帮助的花絮是在头文件中包含名称空间（在您的情况下为 std）是一种不好的做法。您应该删除“使用”语句并改为使用 std::vector 。在 cpp 文件中使用“使用”很好，因为其他代码不会“包含”您的源代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T11:24:18.747

您在标头中有循环依赖。您可以通过将实现移动到`.cpp`文件并转发声明您使用的类来修复它：

```
#include <vector>
#include <string>

class Group; // forward declaration

class User{
    private :
        std::string username;
        std::vector<Group*> groups;
        void show();
}; 
```

和

```
#include <vector>
#include <string>

class User; // forward declaration

class Group{
    private :
        std::string name;
        std::string getName(){return name;};
        User *f;
        std::vector<User*> m;
        void show();
}; 
```

然后，在您的实现文件中，您可以包含标头。

另请注意，您应避免`using namespace std`在标头和大范围中使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T11:26:05.280

您*正在*使用模板。您正在使用`vector`，这是一个模板。

您收到错误是因为当您到达代码的以下部分时未定义 User 类：

```
User *f;
vector<User*> m; 
```

为什么它没有被定义——毕竟你包括了 User.h 标头？是的，但是 User.h 标头还包括 Group.h 标头，因此必须先读取两者之一。

要解决此问题，您需要更改标题，以便其中只有一个包含另一个（或者它们都不包含另一个）。为此，您首先需要将您的方法定义移动到一个 c++ 文件中，这样对其他类的方法的方法调用就不会出现在标题中。然后您可以前向声明另一个类并删除#include。

# python - 来自模板的表单验证不起作用

> ID：11343292
> 
> 赞同：0
> 
> 时间：2012-07-05T11:22:14.630
> 
> 标签：python, django, forms, validation, django-templates

我的看法是——

```
def create_account(request):

    if request.method == 'POST':
        form = CreateAccountForm(request.POST)
        if form.is_valid():

            acc_act_date = form.cleaned_data['Account_Activation_Date']
            present_date = date.today()
            if acc_act_date <= present_date:
                stat = 'Active'
            else:
                stat = 'Inactive'

            a = Account_status.objects.get(status = stat)

            sto = Create_account_tab(account_number=form.cleaned_data['Account_Number'],
                account_name=form.cleaned_data['Account_Name'],
                account_description=form.cleaned_data['Account_Description'],
                account_status_key=a,
                account_manager=form.cleaned_data['Account_Manager'],
                parent_account_number=form.cleaned_data['Parent_Account_Number'],
                account_activation_date=form.cleaned_data['Account_Activation_Date'],
                )
            sto.save()

            return HttpResponseRedirect('/create_account/thanks/')
    else:
        form = CreateAccountForm()
        return render_to_response('CreateAccountForm.html', {'form': form}, context_instance=RequestContext(request)) 
```

我的表格是——

```
class CreateAccountForm(forms.Form):
    Account_Number = forms.CharField()
    Account_Name = forms.CharField()
    Account_Description = forms.CharField()
    Account_Manager = forms.CharField()
    Parent_Account_Number = forms.CharField(required = False)
    Account_Activation_Date = forms.DateField() 
```

我的模板是——

```
<html>
<head>
    <title>Your Information</title>
</head>
<body>
    <h1>Fill in your details</h1>

{% if form.errors %}
    <p style="color: red;">
        Please correct the error{{ form.errors|pluralize }} below.
    </p>
{% endif %}

<form action="." method="post">{% csrf_token %}
    <div class="field">
        {{ form.Account_Number.errors }}
        <label for="id_Account_Number">Account Number:</label>
        {{ form.Account_Number }}
    </div>
    <div class="field">
        {{ form.Account_Name.errors }}
        <label for="id_Account_Name">Account Name:</label>
        {{ form.Account_Name }}
    </div>
    <div class="field">
        {{ form.Account_Description.errors }}
        <label for="id_Account_Description">Account Description:</label>
        {{ form.Account_Description }}
    </div>
    <div class="field">
        {{ form.Account_Manager.errors }}
        <label for="id_Account_Manager">Account Manager:</label>
        {{ form.Account_Manager }}
    </div>
    <div class="field">
        {{ form.Parent_Account_Number.errors }}
        <label for="id_Parent_Account_Number">Parent Account Number:</label>
        {{ form.Parent_Account_Number }}
    </div>
    <div class="field">
        {{ form.Account_Activation_Date.errors }}
        <label for="id_Account_Activation_Date">Account Activation Date:</label>
        {{ form.Account_Activation_Date }}
    </div>
    <input type="submit" value="Submit">
</form> 
```

现在的问题是我在模板中完成的验证不再起作用，当我生成错误时，它显示**视图 account.views.create_account 没有返回 HttpResponse 对象的 django 错误。**而不是我想从模板中显示的错误。：（ 谁能帮我这个？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:26:32.980

`request.method == 'POST'`如果并且`form.is_valid()`为 False ，您的视图将返回 None 。

取消缩进视图的最后一行以将逻辑恢复到应有的状态

# android - Android aChartEngine 条形图

> ID：11343293
> 
> 赞同：1
> 
> 时间：2012-07-05T11:22:24.630
> 
> 标签：android, gps, achartengine

我正在尝试使用 aChartEngine 将 GPS 数据（视图中或使用中的卫星）显示为条形图，但我没有在此视图中显示任何数据。这是我的代码，你能说出我犯了什么错误吗？

```
public class SmartHikingActivity extends Activity implements LocationListener{
LocationManager Lm;
LocationProvider Lp;
static List<String> PL;
GpsSatellite Sat;
static Iterable<GpsSatellite> Sats;
static ArrayList<SatelliteData> LSats;
TextView txtTime;
TextView txtDate;
TextView txtLat;
TextView txtLon;
TextView txtAccuracy;
TextView txtAltitude;
TextView txtSpeed;
TextView txtBearing;
TextView txtGpsPower;
TextView txtInView;
TextView txtInUse;
Calculations C;

LinearLayout layout;

static XYMultipleSeriesDataset dataset;
static XYMultipleSeriesRenderer renderer;
static XYSeriesRenderer rendererSeries;
static CategorySeries series;
static GraphicalView mChartView;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.lyt_gps);

    layout = (LinearLayout) findViewById(R.id.chart);
    txtTime=(TextView)findViewById(R.id.txtTime);
    txtDate=(TextView)findViewById(R.id.txtDate);
    txtLat=(TextView)findViewById(R.id.txtLat);
    txtLon=(TextView)findViewById(R.id.txtLon);
    txtAccuracy=(TextView)findViewById(R.id.txtAccuracy);
    txtAltitude=(TextView)findViewById(R.id.txtAltitude);
    txtSpeed=(TextView)findViewById(R.id.txtSpeed);
    txtBearing=(TextView)findViewById(R.id.txtBearing);
    txtGpsPower=(TextView)findViewById(R.id.txtGpsPower);
    txtInUse=(TextView)findViewById(R.id.txtInUse);
    txtInView=(TextView)findViewById(R.id.txtInView);
    C=new Calculations();

    Lm=(LocationManager) getSystemService(Context.LOCATION_SERVICE);
    PL=Lm.getAllProviders();
    LSats = new ArrayList<SatelliteData>();

    Lm.addGpsStatusListener(gpsListener);
    if(Lm.isProviderEnabled(LocationManager.GPS_PROVIDER)){
        Lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000 * 30, 500.0f, this);
    }

    dataset = new XYMultipleSeriesDataset();
    renderer = new XYMultipleSeriesRenderer();

    renderer.setChartTitle("Satellites Status");
    renderer.setXTitle("SATS");
    renderer.setYTitle("SNR");
    renderer.setXAxisMin(0);
    renderer.setXAxisMax(24);
    renderer.setYAxisMin(0);
    renderer.setYAxisMax(120);
    renderer.setClickEnabled(false);
    renderer.setExternalZoomEnabled(false);
    renderer.setPanEnabled(false, false);
    renderer.setZoomEnabled(false, false);
    renderer.setBarSpacing(0.5);
    renderer.setAxisTitleTextSize(16);
    renderer.setChartTitleTextSize(20);
    renderer.setLabelsTextSize(15);
    renderer.setLegendTextSize(15);
    renderer.setMargins(new int[] {20, 30, 15, 0});
    rendererSeries = new XYSeriesRenderer();
    rendererSeries.setColor(Color.GRAY);
    rendererSeries.setDisplayChartValues(true);
    renderer.addSeriesRenderer(rendererSeries);

    //renderer = getBarDemoRenderer();
    //Intent intent = ChartFactory.getBarChartIntent(this, getBarDemoDataset(), renderer, Type.DEFAULT);
    //startActivity(intent);
    //mChartView = ChartFactory.getBarChartView(this, dataset, renderer, Type.DEFAULT);
    //layout.addView(mChartView);

}

@Override
public void onPause(){
    super.onPause();
    Lm.removeUpdates(this);
}

@Override
public void onResume(){
    super.onResume();
    Lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000 * 30, 500.0f, this);
}

public void onLocationChanged(Location loc) {
    txtLat.setText(C.convertToDMS(loc.getLatitude(),"Lat"));
    txtLon.setText(C.convertToDMS(loc.getLongitude(),"Lon"));
    txtAccuracy.setText(String.valueOf(loc.getAccuracy()));
    txtAltitude.setText(String.valueOf(loc.getAltitude()));
    txtSpeed.setText(String.valueOf(loc.getSpeed()));
    txtBearing.setText(String.valueOf(loc.getBearing()));
}

public void onProviderDisabled(String provider) {

}

public void onProviderEnabled(String provider) {

}

public void onStatusChanged(String provider, int status, Bundle extras) {

}

private  GpsStatus.Listener gpsListener = new GpsStatus.Listener() {
    public void onGpsStatusChanged(int event) {
        GpsStatus gpsStatus = Lm.getGpsStatus(null);
        switch (event) {
            case GpsStatus.GPS_EVENT_STARTED: 
                //tvDemo.setText( "onGpsStatusChanged(): GPS started");
                break;
            case GpsStatus.GPS_EVENT_FIRST_FIX: 
                //tvDemo.setText("onGpsStatusChanged(): time to first fix in ms = " + gpsStatus.getTimeToFirstFix());
                break;
            case GpsStatus.GPS_EVENT_SATELLITE_STATUS: 
                Iterable<GpsSatellite>satellites = gpsStatus.getSatellites();
                Iterator<GpsSatellite>satI = satellites.iterator();
                while (satI.hasNext()) {
                    GpsSatellite sat = satI.next();
                    SatelliteData SD = new SatelliteData();
                    SD.setPRN(sat.getPrn());
                    SD.setSNR(sat.getSnr());
                    SD.setUIF(sat.usedInFix());
                    if(!SatExist(LSats,sat.getPrn())){
                        LSats.add(SD);
                    }else{
                        UpdateSat(LSats,sat.getPrn(),SD);
                    }
                }
                String line="";
                int Total=0;
                int inUse=0;
                try{
                for(int i=0;i<LSats.size();i++){
                    line= line + "PRN: " + LSats.get(i).getPRN() + " SNR: " + LSats.get(i).getSNR() + " UIF: "  + LSats.get(i).isUIF() + "\n";
                    Total=Total+1;
                    if(LSats.get(i).isUIF()) inUse=inUse+1;
                }
                }catch(NullPointerException Npe){

                }
                txtInView.setText(String.valueOf(Total));
                txtInUse.setText(String.valueOf(inUse));
                Log.v("", "Triggering refresh chart");/////////////////////////
                series = new CategorySeries("Satellites");
                try{
                  Log.v("", "Filling Dataset");
                  for (int k = 0; k < LSats.size(); k++) {
                    series.add(LSats.get(k).getSNR());
                  }
                }catch(Exception e){
                  Log.v("", "Error Filling Dataset");
                }
                ///////////////////////////////////////////
                dataset.addSeries(series.toXYSeries());
                if (mChartView==null){
                    mChartView = ChartFactory.getBarChartView(SmartHikingActivity.this, dataset, renderer, Type.DEFAULT);
                    layout.addView(mChartView);
                    mChartView.refreshDrawableState();
                    mChartView.repaint();
                }
                break;
            case GpsStatus.GPS_EVENT_STOPPED: 
                break;
        }       
    }
};

private boolean SatExist(List<SatelliteData> lSD, int PRN){
    boolean Exist=false;
    try{
        for(int i=0; i < lSD.size();i++){
            if (lSD.get(i).getPRN()==PRN){
                Exist= true;
                break;
            }
        }
    }catch(NullPointerException Npe){
        Exist=false;
    }
    return Exist;
}

private void UpdateSat(List<SatelliteData> lSD, int PRN, SatelliteData sD){
    for(int i=0; i < lSD.size();i++){
        if (lSD.get(i).getPRN()==PRN){
            lSD.get(i).setSNR(sD.getSNR());
            lSD.get(i).setUIF(sD.isUIF());
            break;
        }
    }
} 
```

}

图表必须在 onGpsStatusChanged 事件中更新。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T07:11:32.513

这段代码似乎不对：

```
if (mChartView==null){
  mChartView = ChartFactory.getBarChartView(SmartHikingActivity.this, dataset, renderer, Type.DEFAULT);
  layout.addView(mChartView);
  mChartView.refreshDrawableState();
  mChartView.repaint();
} 
```

它应该是这样的：

```
if (mChartView==null){
  mChartView = ChartFactory.getBarChartView(SmartHikingActivity.this, dataset, renderer, Type.DEFAULT);
  layout.addView(mChartView);
}
mChartView.refreshDrawableState();
mChartView.repaint(); 
```

[在这里](http://code.google.com/p/achartengine/source/browse/trunk/achartengine/demo/org/achartengine/chartdemo/demo/chart/XYChartBuilder.java)查看一个有效的示例。

# c# - 无法将类型 ArrayList[] 隐式转换为 ArrayList[][]

> ID：11343294
> 
> 赞同：0
> 
> 时间：2012-07-05T11:22:27.040
> 
> 标签：c#, multidimensional-array, arraylist

这段代码在这一行给了我这个错误：“无法将类型 ArrayList[] 隐式转换为 ArrayList[][]”：`m_grid[gridIndexX] = new ArrayList[Height];`但是我该如何以另一种方式做到这一点？当 m_grid 数组是二维数组时，它可以工作，但作为 3 维数组，它不起作用。谢谢您的帮助。

```
private ArrayList[][][] m_grid;
private void initialize() {
    Width           = 5;
    Height          = 5;
    Depth           = 5;
    m_grid = new ArrayList[Width][][];
}
public void Refresh(ref ArrayList particles) {

        m_grid = null;
        m_grid = new ArrayList[Width][][];

        if (particles != null) {
            for (int i = 0; i < particles.Count; i++) {
                FluidParticle p = (FluidParticle) particles[i];
                int gridIndexX = GetGridIndexX(ref p);
                int gridIndexY = GetGridIndexY(ref p);
                int gridIndexZ = GetGridIndexZ(ref p);

                // Add particle to list
                if (m_grid[gridIndexX] == null) {
                    m_grid[gridIndexX] = new ArrayList[Height];
                }
                if (m_grid[gridIndexX][gridIndexY][gridIndexZ] == null) {
                    m_grid[gridIndexX][gridIndexY][gridIndexZ] = new ArrayList();
                }
                m_grid[gridIndexX][gridIndexY][gridIndexZ].Add(i);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:26:59.453

您需要添加另一个索引器。您已初始化`m_grid`为 3 维数组。因此，其中的任何第一级元素`m_grid`都是二维数组。您正在尝试将其中一个元素设置为一维数组：

```
m_grid[gridIndexX] = new ArrayList[Height]; 
```

在上面的代码中，`m_grid[gridIndexX]`是 type `ArrayList[][]`，所以你有一个类型不匹配。

您需要将其设置为正确的类型：

```
m_grid[gridIndexX] = new ArrayList[Height][]; 
```

我不知道仅此一项是否能*解决*您的问题，因为很难辨别这段代码实际上应该做什么。（事实上​​，如果你不确定你的代码的哪些部分是数组的什么维度，我不确定*你是否*知道这段代码应该做什么......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:26:38.427

您缺少一个`[]`. 线

```
m_grid[gridIndexX] = new ArrayList[Height]; 
```

应该

```
m_grid[gridIndexX] = new ArrayList[Height][]; 
```

反而。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T11:27:26.380

您需要使用以下大小对其进行初始化：

```
ArrayList[][][] m_grid;

m_grid = new ArrayList[100][][];

m_grid[0] = new ArrayList[100][];

m_grid[0][0] = new ArrayList[100]; 
```

这意味着您的代码示例将如下所示：

```
public void Refresh(ref ArrayList particles)
{

    m_grid = null;
    m_grid = new ArrayList[Width][][];

    if (particles != null)
    {
        for (int i = 0; i < particles.Count; i++)
        {
            FluidParticle p = (FluidParticle)particles[i];
            int gridIndexX = GetGridIndexX(ref p);
            int gridIndexY = GetGridIndexY(ref p);
            int gridIndexZ = GetGridIndexZ(ref p);

            // Add particle to list
            if (m_grid[gridIndexX] == null)
            {
                m_grid[gridIndexX] = new ArrayList[Height][];
            }
            if (m_grid[gridIndexX][gridIndexY][gridIndexZ] == null)
            {
                m_grid[gridIndexX][gridIndexY][gridIndexZ] = new ArrayList();
            }
            m_grid[gridIndexX][gridIndexY][gridIndexZ].Add(i);
        }
    }
} 
```

尽管我强烈建议你离开`ArrayList`，如果可以的话。正如其他评论者所说，使用通用的强类型集合代替，例如`List<T>`.

# java - BlockingQueue java 的问题，Storm 的实现（分布式计算）？

> ID：11343299
> 
> 赞同：1
> 
> 时间：2012-07-05T11:22:47.613
> 
> 标签：java, apache-storm, blockingqueue

这是我的输入 spout 的代码片段，用于将元组发送到一个处理节点，以便在集群上进行流处理。问题是 BlockingQueue 正在抛出 InterruptedException 。

```
private SpoutOutputCollector collector;
public BlockingQueue<String> blockingQueue = new LinkedBlockingQueue<String>();

public boolean isDistributed() {
    return true;
    }

public void open(@SuppressWarnings("rawtypes") final Map conf, final TopologyContext context,
final SpoutOutputCollector collector) {

    this.collector=collector;

}

@Override
public void nextTuple() {

    try {
        //Utils.sleep(100);
        collector.emit(new Values("Single Temperature Reading", blockingQueue.take()));
    } catch (InterruptedException e) {
        e.printStackTrace();
    }

}

public void readInputfile() throws IOException, InterruptedException{
    FileInputStream file = new FileInputStream("/home/529076/Desktop/Temperature");
    DataInputStream readDate=new DataInputStream(file);
    BufferedReader readText=new BufferedReader(new InputStreamReader(readDate));

    String line;
    String singleReading = null;
    while((line=readText.readLine())!=null){
         singleReading=line;
         blockingQueue.add(singleReading);

    }

}
@Override
public void declareOutputFields(OutputFieldsDeclarer declarer) {
    declarer.declare(new Fields("Single Temperature Reading"));
} 
```

异常描述如下：---

java.lang.InterruptedException10930 [Thread-20] INFO backtype.storm.util - 异步循环中断！

```
at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.reportInterruptAfterWait(AbstractQueuedSynchronizer.java:1961)
at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1996)
at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:399)
at com.tcs.storm.test.InputStreamSpout.nextTuple(InputStreamSpout.java:65)
at backtype.storm.daemon.task$fn__3349$fn__3404.invoke(task.clj:413) 
```

而 nextTuple(InputStreamSpout.java:65 是 ------>

```
 collector.emit(new Values("Single Temperature Reading", blockingQueue.take())); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:30:40.090

错误是由于以下事实 - BlockingQueue 未在输出收集器中初始化；

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T18:47:05.937

在 Storm 中，建议在 prepare()/open() 方法中初始化 Bolts/Spouts 的字段。

原因是 Bolts/Spouts 是在您上传拓扑的节点上创建的：您的 BlockingQueue 将在那里构建。Bolts/Spout 然后被序列化并分发到工作节点，在那里它们被反序列化。这个序列化/反序列化过程可能无法保留在构造 Bolt/Spout 时设置的字段的所有属性。在 prepare() 或 open() 中初始化的字段没有这个问题。

# javascript - Javascript window.open() 不止一次将商品添加到购物车

> ID：11343300
> 
> 赞同：0
> 
> 时间：2012-07-05T11:22:50.087
> 
> 标签：javascript, jquery, cart, window.open

```
 $.each(sizeSkuID,function(key,val){
        var sizeSkuSplit= val.split("-");
        var url="http://www.hostname.com/cart/add/?p="+sizeSkuSplit[0]+"&sku="+val;

        window.open(url,"cart");

    }); 
```

我以为我可以通过执行多个 window.open 将多个项目添加到购物车中，但是上面的代码循环了 2 个项目，但它只添加了购物车中的第 2 个项目。

如果我使用上面的代码一次一个地单击（选择 1 个项目）进行模拟，那么购物车最终将有两个项目。

那么为什么如果它循环两次，window.open 显然运行一次并且它需要第二个 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:25:02.193

这是因为您标记了同一个窗口 ( `cart`)。

说：

```
window.open(url,"cart" + key); 
```

# performance - 在express中使用nodejs可以采取哪些措施来提高jade模板渲染性能

> ID：11343302
> 
> 赞同：15
> 
> 时间：2012-07-05T11:23:12.653
> 
> 标签：performance, node.js, express, pug

背景

玉语法很棒，但我想看看它是如何影响性能的。

所以我创建了一个单页应用程序并使用 apache bench 来比较它的吞吐量，使用玉来呈现页面与使用内存中的字符串。没有变量，所以这纯粹是学术比较。

内存中的字符串使整个应用程序在本地速度提高了一倍以上，考虑到生产模式下的翡翠应该从内存缓存中渲染，这似乎很重要。

我在生产模式下使用节点 0.8 和 express 的 2.5.11 版本，视图缓存选项显式设置为`true`.

apache bench 结果： [https ://dl.dropbox.com/u/3737990/jade/jade.png](https://dl.dropbox.com/u/3737990/jade/jade.png) [https://dl.dropbox.com/u/3737990/jade/memory.png](https://dl.dropbox.com/u/3737990/jade/memory.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-15T22:47:40.533

正如 Harry 所提到的，将模板引擎的性能与发送字符串的性能进行比较是没有意义的，因为它们解决了两种不同的需求。这有点像比较两辆汽车的 MPG，除了一辆车你刚刚进入空档并让它滚下山坡。

[相反，比较模板引擎](http://jsperf.com/dom-vs-innerhtml-based-templating/511)更有帮助，因为它们都是达到相同目的的手段（动态呈现的 HTML）。

在这里，我们看到 Jade 是**最慢的**模板语言。造成这种情况的原因可能有很多因素，但核心问题是 Jade[不是为速度而设计的](https://stackoverflow.com/a/6197897/201952)。如果您需要极高的性能，[doT](http://olado.github.com/doT/)专为速度而设计。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-13T23:09:21.667

内存中的字符串绝对是您可以做的最快的事情，因此与它进行比较并不是很有意义。模板永远不会像字符串 concat 一样快。设置为生产模式是您可以在性能方面做的最重要的事情。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-07-19T14:52:35.417

（添加这个额外的信息，因为这似乎是在寻找“快递玉性能”时的第一个搜索引擎点击之一）

我在 nodejs 生产应用程序中遇到了同样的问题。问题是，jade 默认在**开发模式下**运行，这不是您想要的生产模式，因为这会一次又一次地重新编译所有模板，浪费 cpu 和内存。

解决方案是使用: 运行您的应用程序`NODE_ENV=production node app.js`，这将防止jade 重新编译周期，并可能触发其他一些快速性能改进。

请注意，这并不能让翡翠**更快**，它只是防止它做不必要的工作并杀死你的 CPU。

# java - 使用 JSONObject Java 类的静态 getNames 方法时 Eclipse 中的语法错误

> ID：11343303
> 
> 赞同：2
> 
> 时间：2012-07-05T11:23:15.447
> 
> 标签：java, eclipse, json, static-methods

我正在尝试返回已提供给 JSONObject 类的所有名称（例如，它们自己的数组中的所有键，没有它们的关联值）。我的代码目前如下：

```
String names[] = new String[10];
names = JSONObject.getNames(jsonObj); 
```

我试图从中获取数组的方法是：

```
public static String[] getNames(JSONObject jo) {
    int length = jo.length();
    if (length == 0) {
        return null;
    }
    Iterator iterator = jo.keys();
    String[] names = new String[length];
    int i = 0;
    while (iterator.hasNext()) {
        names[i] = (String)iterator.next();
        i += 1;
    }
    return names;
} 
```

这是我得到的错误：

```
The method getNames(JSONObject) is undefined for the type JSONObject 
```

但是，如果我将代码设置为故意返回并将其分配给错误类型的变量：

```
int inames = JSONObject.getNames(jsonObj); 
```

突出显示上述行的 JSONObject 部分或 jsonObj 参数会导致 Eclipse 显示以下错误：

```
Type mismatch: cannot convert from String[] to int 
```

而突出显示 getNames 方法仍然提供与以前相同的错误。

我能从中得到什么？Eclipse 似乎知道该方法存在，因为它知道其正确的返回类型，但它声称该方法在类中未定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:27:17.387

似乎该方法`getNames`不是*JSONObject*的静态方法。我对吗？

它在哪个类中声明？

如果是上课`X`，您应该这样做：

```
X.getNames(jsonObj); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T11:27:19.993

您确定您的类路径中没有 2 个包含名为 JSONObject 的类的 jar 文件吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T19:43:56.027

当我遇到问题时，我正在使用的类位于一个单独的包中。将所有 JSON 类移动到与我编写的类相同的包中并删除包导入

```
import org.json.*; 
```

解决了它。

# powershell - 从计算的脚本块返回与默认值不同的属性

> ID：11343306
> 
> 赞同：2
> 
> 时间：2012-07-05T11:23:23.153
> 
> 标签：powershell, active-directory

我正在尝试合并 Active Directory 中的一些信息 - 计算机名称、描述和用户 samAccountName，因为我们的用户具有非标准登录名。

我们有正在使用它的用户的计算机描述“FirstName LastName”，我能够输出计算机名称和描述。

但是当我尝试使用以下脚本提取登录时：

```
Get-ADComputer -Filter 'name -like "wks-*"' -properties description|
sort name|
%{"$($_.name),$($_.description),$(get-aduser -Filter {name -eq $_.description})"} 
```

我只是得到给定用户的可分辨名称。

有没有办法默认返回不同的属性？如果不是这样的事情怎么可能完成？

我尝试在末尾添加 .samaccountname，如下所示：

```
%{"$($_.name),$($_.description),$(get-aduser -Filter {name -eq $_.description}).samaacountname"} 
```

但这只是将其连接到可分辨名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T14:38:45.593

如果我理解这个问题，那么我认为这会做你想要的：

```
Get-ADComputer -Filter 'name -like "wks-*"' -properties description |
Select-Object Name, Description, @{name='User'; expression = {(Get-ADUser -Filter {name -eq $_.description}).SamAccountName}} 
```

# java - 在小程序中看不到 logback 配置

> ID：11343311
> 
> 赞同：1
> 
> 时间：2012-07-05T11:23:48.767
> 
> 标签：java, applet, log4j, slf4j, logback

我在 Java 小程序中使用`logback`(via `slf4j`)，配置存储在`logback.xml`小程序根目录的文件中。在 Eclipse 中运行它可以找到并加载放置在类路径中某处的配置。但它不会从 applet jar 加载配置。我怀疑这个问题与小程序本身无关，`logback`而是与小程序本身有关。我根本没有小程序的经验。

[编辑]

`logback.xml`（日志记录配置文件）在 jar 的根目录中，其余的 jar 内容似乎不相关。这是 jar 文件中日志记录配置文件的典型位置，因此问题与文件位置无关。我检查了jar文件。实际上我有 2 个 jar 文件：服务器端和小程序（客户端）。日志配置在服务器端工作正常，所以我怀疑它与小程序细节有关。

[编辑2]

我没有显式加载日志配置，它是由`logback`库完成的，它在类路径中查找特定的文件名。

[编辑3]

小程序设置：

```
<applet name="name" id="game" width="100%" height="100%" alt="Please visit our site"
    archive="my.jar" code="path/to/main.class" mayscript="" title="Java">
    <param name="boxborder" value="false">
    <param name="separate_jvm" value="true">
    <param name="image" value="http://www.oursite.com/img/splash.gif">
    <param name="centerimage" value="true">
    <param name="boxbgcolor" value="black">
    <param name="java_arguments" value="-Xmx384m -Dsun.java2d.noddraw=true -XX:CompileThreshold=1500 -Xincgc -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -Dcom.sun.management.jmxremote -Xss6m">
    <div class="nojava">
        <h1>
            Please Update Java</h1>
        <p>
            It appears that you do not have Java installed, or your version of Java is out of
            date. To play this game for free please <a target="_blank" href="http://www.java.com/en/download/index.jsp">
                click here</a> to download the latest version of Java. </p>
    </div>
</applet> 
```

[编辑4]

打印 logback 的内部诊断信息，它说找不到`logback.xml`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:29:50.493

在我看来，您没有将日志配置文件打包在 jar 中？确保它在罐子里。此外，您最好`System.out.println(...)`在弄清楚之前使用它，否则您将看不到任何输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:40:00.863

你怎么知道 Logback 没有加载配置？也许您只是看不到任何东西，因为没有附加程序或其他输出工具。

从[文档](http://docs.oracle.com/javase/1.5.0/docs/guide/deployment/deployment-guide/tracing_logging.html#logging)中我假设您必须使用 Java Logging API。因此，我不会使用 logback，而是切换到[slf4j-jdk14.jar](http://www.slf4j.org/legacy.html)。

如果你看到 logback 加载了配置：你用过

```
<configuration debug="true" > 
```

查看更多信息？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T16:33:25.750

解决

该问题与 logback 或 applet 无关。我在签名后将配置文件放入 jar 中。谢谢大家的帮助。

# qt - 更新 QTableView 显示的视图

> ID：11343312
> 
> 赞同：1
> 
> 时间：2012-07-05T11:23:51.343
> 
> 标签：qt, qtableview

我有一个`QTableView`小部件，它在`QStandardItemModel`. 在每两秒钟内，包含这两个类的函数被调用 using`QTimer`并给出接下来的 50 个条目。

该函数每两秒后正常运行，但显示的窗口中的值没有刷新。
提前感谢您的帮助。

代码 ：

```
void Box::create_frame()
{
        k=0;
        tablegroup = new QGroupBox(tr("Table"));
        QVBoxLayout *layout = new QVBoxLayout;

        table = new QTableView(this);
        table->setUpdatesEnabled(false);

        cout << "recent check" <<endl;
        QStandardItemModel *mode = new QStandardItemModel(1,2,this);
        mode->setHorizontalHeaderItem(0, new QStandardItem(QString("ID")));
        mode->setHorizontalHeaderItem(1, new QStandardItem(QString("DATA")));

        map<int,QString>::iterator it;

        for(it=dataa.begin();it!=dataa.end();it++)
        {
                for(int i=0;i<=1;i++)
                {
                        QStandardItem *item;
                        item = new QStandardItem();
                        item->setEditable(true);
                        if(i==0)
                        {
                                item->setData(((*it).first), Qt::DisplayRole);
                                mode->setItem(k,i,item);
                        }
                        else
                        {
                                item->setData(((*it).second), Qt::DisplayRole);
                                mode->setItem(k,i,item);
                        }
                }
        k++;
        }
        //setUpdatesEnabled(false);
        table->setUpdatesEnabled(true);
        cout << "create frame check" << endl;
        table->setModel(mode);
        layout->addWidget(table);
        tablegroup->setLayout(layout);
}

QTimer *timer = new QTimer(this);
        connect(timer, SIGNAL(timeout()), this, SLOT(refresh()));
        timer->start(2000);
}

void dataThread::run()
{
        boost::posix_time::seconds delay(2);

        int g=0;
        int h=50;

        while(1)
        {
                while(g<h)
                {
                        dataa.insert(pair<int,QString>(g+1,"HELLO"));
                        g++;
                }
                boost::this_thread::sleep(delay);
                h=h+50;
        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T21:20:24.643

首先，这里已经很晚了，所以也许我忽略了一些东西，但是从你的运行循环来看，看起来你实际上并没有将任何数据添加到表的模型中，而只是将条目添加到你的`dataa`向量/列表中。

也许你应该把它添加到你的运行循环中

```
while( g < h )
{
    dataa.insert(pair<int,QString>(g+1,"HELLO"));

    QStandardItem *item;
    item = new QStandardItem();
    item->setEditable(true);
    item->setData( g+1, Qt::DisplayRole );

    // You need the model here
    table->model()->setItem( h + g, 0, item );

    item = new QStandardItem();
    item->setData( "Hello", Qt::DisplayRole );

    // You need the model again here
    table->model->setItem( h + g, 1, item );

    ++g;
} 
```

再晚了，但我想你明白了。您当前没有更改您的表格设置的模型，而只是更改您的`dataa`向量/列表。

# android - 子Activity完成时如何处理父Activity

> ID：11343315
> 
> 赞同：0
> 
> 时间：2012-07-05T11:24:05.113
> 
> 标签：android, android-intent

我有两个活动，比如说`LoginActivity`其中包含登录 UI 和`HomeActivity`. 在 上`HomeActivity`，我放置了一个调用以下方法的按钮：

```
public void goToLoginPage(View view) {
    finish();
    super.finish();     
    Intent i = new Intent(HomePageActivity.this, LoginActivity.class);
    startActivity(i);
} 
```

但是当我单击此按钮时，带有最后输入凭据的登录页面会再次出现。相反，我想要一个新的登录页面，或者至少没有最后输入的凭据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:29:43.987

在您想要打开下一个活动时成功登录，然后完成（）登录活动。通过这样做，下次如果您开始使用意图登录，它将打开一个新的登录页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:30:40.683

在启动 HomeActivity 时调用 LoginActivity 中的 finish() 方法，这将使 LoginActivity 被销毁。当您调用 startActivity 启动 LoginActivity 时，LoginActivity 将实例化一个新的。

我是android开发的新手，希望对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T11:30:58.837

试试下面的代码。

```
Intent i = new Intent(HomePageActivity.this, LoginActivity.class);
i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(i);
finish(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T11:32:11.230

在 LoginActivity 的 OnPause() 中编写以下代码

```
protected void onPause()
{
super.onPause();
username.settext("");
password.settext("");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T12:21:47.683

根据您的信息，LoginActivty 是启动活动，该活动在成功登录后启动 HomePageActivity。要返回 LoginActivity，您可以执行以下操作：

```
Intent i = new Intent(HomePageActivity.this, LoginActivity.class);
i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(i);
finish(); 
```

这只有在 LoginActivity 启动 HomePageActivity 时没有调用自身的 finish() 时才有效（即：LoginActivity 的实例必须仍然存在于活动堆栈中）。此外，LoginActivity 的启动模式必须是默认的（即：根本没有指定）或“标准”。

这将导致 LoginActivity 的当前实例完成，并创建一个新的 LoginActivity 实例并调用 onCreate() 方法。

# python - Shift + Return 在python中插入换行符

> ID：11343317
> 
> 赞同：8
> 
> 时间：2012-07-05T11:24:11.230
> 
> 标签：python, input, readline

我试图了解`Return`用于发送文本和`Shift + Return`插入换行符的典型 IM 客户端的行为。有没有办法在 Python 中以最小的努力实现这一点，例如使用[readline](http://docs.python.org/library/readline.html)和`raw_input`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:19:08.180

好的，我听说它也可以通过`readline`, 以某种方式完成。

您可以`import readline`在配置中将所需的键 (Shift+Enter) 设置为一个宏，该宏将一些特殊字符置于行尾和换行符。然后你可以`raw_input`循环调用。

像这样：

```
import readline    
# I am using Ctrl+K to insert line break 
# (dont know what symbol is for shift+enter)
readline.parse_and_bind('C-k: "#\n"')
text = []
line = "#"
while line and line[-1]=='#':
  line = raw_input("> ")
  if line.endswith("#"):
    text.append(line[:-1])
  else:
    text.append(line)

# all lines are in "text" list variable
print "\n".join(text) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T11:30:25.583

我怀疑您是否能够仅使用该`readline`模块来做到这一点，因为它不会捕获按下的各个键，而只会处理来自输入驱动程序的字符响应。

不过，您可以使用[PyHook](http://sourceforge.net/apps/mediawiki/pyhook/index.php?title=Main_Page)来做到这一点，并且如果该`Shift`键与该`Enter`键一起按下以将换行符注入您的`readline`流中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T11:30:35.443

我认为你可以用*最小的努力使用 Python 的*[urwid](http://excess.org/urwid/)库。不幸的是，这不能满足您使用 readline/raw_input 的要求。

*更新：*有关其他解决方案，另请参阅[此答案](https://stackoverflow.com/questions/6284468/change-newline-character-readline-seeks?rq=1)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-02T07:53:08.383

```
import readline
# I am using Ctrl+x to insert line break 
# (dont know the symbols and bindings for meta-key or shift-key,  
# let alone 4 shift+enter)

def startup_hook():
    readline.insert_text('» ') # \033[32m»\033[0m

def prmpt():
try:
    readline.parse_and_bind('tab: complete')
    readline.parse_and_bind('set editing-mode vi')
    readline.parse_and_bind('C-x: "\x16\n"') # \x16 is C-v which writes
    readline.set_startup_hook(startup_hook) # the \n without returning
except Exception as e:                      # thus no need 4 appending
    print (e)                              # '#' 2 write multilines
    return                # simply use ctrl-x or other some other bind
while True:             # instead of shift + enter
    try:
        line = raw_input()
        print '%s' % line
    except EOFError:
        print 'EOF signaled, exiting...'
        break

# It can probably be improved more to use meta+key or maybe even shift enter 
# Anyways sry 4 any errors I probably may have made.. first time answering 
```

# javascript - Bootstrap tabbable 和 popover 之间的冲突

> ID：11343327
> 
> 赞同：3
> 
> 时间：2012-07-05T11:25:11.120
> 
> 标签：javascript, jquery, twitter-bootstrap, popover

我正在尝试在同一页面中使用 Twitter Bootstrap 选项卡和 Bootstrap 弹出框。我很难解决无法超出选项卡限制出现的弹出框的问题（问题是当弹出框出现在边框旁边时，它是半隐藏的）。

我不是 JQuery 方面的专家，但据我了解，问题来自在“iframe”中创建的选项卡，并且弹出框无法从其“iframe”中显示出来。

有什么办法可以解决这个问题吗？（=即使靠近标签的边框也能正确显示弹出框？）

非常感谢！

下面是显示我的问题的示例代码（准备复制/粘贴到 .html [http://jsfiddle.net/7PU2D/](http://jsfiddle.net/7PU2D/)中）：

```
<!DOCTYPE html>
<head>
    <link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" rel="stylesheet">
    <link href="http://twitter.github.com/bootstrap/assets/css/bootstrap-responsive.css" rel="stylesheet"> 
</head>
<body>
<div class="span2">
    Left column
</div>
<div class="span6">
    <div class="tabbable">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#tab1" data-toggle="tab">tab1</a></li>
            <li><a href="#tab2" data-toggle="tab">tab2</a></li>
            <li><a href="#tab3" data-toggle="tab">tab3</a></li>
        </ul>

        <div class="tab-content">
            <div id="tab1" class="tab-pane active">tab1 text
                <div class="well">
                    <a href="#" class="btn btn-danger" rel="popover" style="position: relative;" data-content="And here's some amazing content. It's very engaging. right? " data-original-title="A Title">hover for popover</a>
                </div>
            </div>
            <div id="tab2" class="tab-pane">tab2 text</div>
            <div id="tab3" class="tab-pane">tab3 taxt</div>
        </div>
    </div>
</div>

<script src="http://twitter.github.com/bootstrap/assets/js/jquery.js"></script>
<script src="http://twitter.github.com/bootstrap/assets/js/bootstrap.js"></script>
<script>
$(function(){
  $('a[rel=popover]').popover({
      trigger: 'hover',
      placement: 'in bottom',
      animate: true,
      delay: 500,
});
});  
</script>
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-20T19:08:10.710

使用“容器”选项。这样，您可以将弹出框/提示附加到正文元素，它不会被选项卡窗格溢出截断：隐藏...示例：

```
<script>
$(function(){
   $('a[rel=popover]').popover({
   trigger: 'hover',
   placement: 'in bottom',
   animate: true,
   delay: 500,
   container: 'body'
   });
});  
</script> 
```

或者：

```
 <a rel="popover" data-container="body">Pop Me Open</a> 
```

您的工具提示仍将正确放置在您的链接旁边，但由于它现在附加到正文标签，它不会被选项卡窗格“半隐藏”。

请参阅引导站点上工具提示/弹出窗口的文档...

2.3.2：

[http://getbootstrap.com/2.3.2/javascript.html#popovers](http://getbootstrap.com/2.3.2/javascript.html#popovers)

或 3.0

[http://getbootstrap.com/javascript/#popovers](http://getbootstrap.com/javascript/#popovers)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T11:41:05.707

选项卡内容 div 的 css 属性`overflow`设置为`auto`（通过 Bootstrap）。这意味着当内容的大小超过 div 的大小时，浏览器会添加滚动条并剪切内容。您可以在您自己的一个 css 文件中将属性覆盖为其默认值 ( `visible`)，或者仅使用如下内联样式：

```
<div class="tab-content" style="overflow: visible;"> 
```

示例：http: [//jsfiddle.net/grc4/BXmC3/](http://jsfiddle.net/grc4/BXmC3/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-05T11:30:49.920

而不是 $ 使用 jQuery 它可以解决你的冲突。我认为你必须像这样增加标签内容的高度

```
.tab-content
{
    height:400px;
} 
```

# php - sha1 + salt加密在php中失败

> ID：11343331
> 
> 赞同：0
> 
> 时间：2012-07-05T11:25:46.867
> 
> 标签：php, encryption, sha1, salt

我正在尝试使用 sha1 散列到 saltMe() 函数来保护密码，但是无论我在密码字段中输入什么，被加密的密码最终都是相同的。我认为这可能会导致安全漏洞。

这是我的盐函数

```
**************************************************
* sha1 salt string to make a more secure hash 
***************************************************/
function SaltMe() {
   //Secret keyword encrypted with sha1
   return "4cefe49883b6dd1a00565e2a80fb035f348da3aa";
} 
```

这是我的登录检查

```
$select_user_sql = $this->db->selectSQL("*", "tdic_users", "email = '". $email ."' AND password = '". sha1($this->main->SaltMe($password)) ."'"); 
```

无论我在密码字段中输入什么，我都会得到：

```
1c2c2961d35148e8dfc83c7b31cf144f0987de9d 
```

这也是我的加密密码。但是我可以输入任何我想匹配密码的东西是不好的。

登录表单的操作是 validatelogin.php，其中包含：

```
$user = new UserHandling();
$user->UserLogMeIn($_POST["login_email"], $_POST["login_password"]); 
```

以及登录功能：

```
 /**********************************************************
     * User login function
     * 
     * @param string    | User's email
     * @param string    | User's password
     **********************************************************/
    function UserLogMeIn($email, $password) {

        $select_user_sql = $this->db->selectSQL("*", "tdic_users", "email = '". $email ."' AND password = '". sha1($this->main->SaltMe($password)) ."'");
        $select_user_result = $this->db->SQLquery($select_user_sql);

        if(mysql_num_rows($select_user_result) < 1) {
            $this->main->txtOutput("Wrong email or password", "TXT_ERR"); //The user typed something wrong.
        } else { 
            while($row = $this->db->SQLfetch($select_user_result)) {
                /*** We will check if user have activated the profile ***/
                if($row["activated"] == 0) {
                    $this->main->txtOutput("Your profile haven't been activated! You need to click on the activation link in the email you recieved upon registration.", "TXT_ERR"); //The user haven't activated the new profile. This is necessary for security / spamming reasons
                    $this->main->JSredirector("http://localhost/test/login.php", 5); //Redirect the user back from where he/she came from
                } else {
                    /*** Everything is in order and we will let the user in ***/

                    $_SESSION["usr_logged_in"] = 1;
                    $_SESSION["user_email"] = $row["email"];
                    $_SESSION["user_id"] = $row["user_id"];
                    $_SESSION["user_name"] = $row["name"];

                    /*** This will just update the last login field in the user table ***/
                    $fields = array("user_last_logged_in" => time());
                    $update_user_sql = $this->db->updateSQL('tdic_users',  'email = "'. $email .'"', $fields);
                    $this->db->SQLquery($update_user_sql);
                }
            }
        }
    } 
```

我无法弄清楚字符串的设置位置，所以它总是匹配！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T11:29:55.630

您的`SaltMe`函数没有参数，它总是返回相同的字符串。所以

```
SaltMe($password) 
```

不会做你想要的。

不过，严肃地说：**停止尝试实现自己的密码散列方案。您在这里询问您的实施中的错误这一事实应该足以证明您没有足够的了解这样做。使用一个库，例如 bcrypt（[便携式 PHP 密码散列框架](http://www.openwall.com/phpass/)有一个实现）并[远离自己实现任何加密代码](https://softwareengineering.stackexchange.com/a/51528/14100)。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T11:29:53.040

U 在加盐时返回一个常量字符串。尝试

```
function SaltMe($pass) {
   // Pass salted with Secret keyword encrypted with sha1 
   return "4cefe49883b6dd1a00565e2a80fb035f348da3aa" . $pass;
} 
```

正如 SLaks 所说，你有 SQLinj。并且最好使用 PDO 或 mysqli 数据库函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T11:31:03.070

您只是对盐字符串进行哈希处理，您没有将其添加到您的密码中。

```
"4cefe49883b6dd1a00565e2a80fb035f348da3aa" -> [SHA-1] -> "1c2c2961d35148e8dfc83c7b31cf144f0987de9d" 
```

在散列密码之前，您需要在密码前加上盐。

# windows-installer - 快捷方式中的计算机名

> ID：11343332
> 
> 赞同：0
> 
> 时间：2012-07-05T11:25:56.020
> 
> 标签：windows-installer, installshield, installshield-2008

我正在使用 InstallShield 2008 构建一个安装包（它又包含一个 .NET Web 应用程序设置）。

在 InstallShield 项目中，我们指定了要创建的 Internet 快捷方式。快捷方式是本地机器，到目前为止，我们已经有了这样的 Target 规范：

```
http://localhost//TheApplication//Start.aspx 
```

由于超出我控制/知识的技术原因，需要将“localhost”替换为机器的实际名称。

Flexera 和 Microsoft 的文档都讨论了 Windows Installer 属性**ComputerName**，但我没有找到有关如何/在何处使用它的信息。

一些非常零散的发现表明该属性应该被 [括号] 包围，所以我天真地尝试将目标的规范更改为

```
http://[ComputerName]//TheApplication//Start.aspx 
```

但这不起作用。然后实际的快捷方式包含该确切的文本，该属性未“扩展”。

我正在寻找有关的任何信息或提示

*   如何使用该属性，或
*   如何将实际计算机名称放入 Internet 快捷方式的 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:29:28.200

尝试改用`ComputerName`环境变量？

```
http://%COMPUTERNAME%/TheApplication/Start.aspx 
```

此外，您不应该需要所有那些双斜杠（即在第一组之后）。

# javascript - javascript将画布裁剪为内容

> ID：11343333
> 
> 赞同：0
> 
> 时间：2012-07-05T11:25:58.903
> 
> 标签：javascript, canvas, crop

如何仅围绕其内容裁剪 HTML 画布？

我`strokeText`用来填充画布，所以很难计算内容的大小。我可以遍历画布的每个像素，还是有更好的方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:31:06.763

提前使用*measureText*检查文本占用了多少空间。我希望这能回答你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T12:54:47.117

帕特里克，你可以遍历画布中的像素，请参阅这个很棒的[备忘单](http://www.nihilogic.dk/labs/canvas_sheet/HTML5_Canvas_Cheat_Sheet.png)中的“像素操作”部分。

当然，这不是一种选择——坦率地说，这太疯狂了——执行逐像素分析只是为了对文本做一些事情。所以`measureText`@RobotRock 提到了这里。不过，值得一提的是，根据我的经验，measureText 在某些情况下并不是 100% 可靠的。

还值得一提的是来自 API:`textAlign`和`textBaseline`. 因为如果您询问`measureText`，您实际上想要以某种方式对齐文本的可能性超过 50% )))

# web-services - while Loop PHP / MySQL NuSOAP 发生错误

> ID：11343336
> 
> 赞同：0
> 
> 时间：2012-07-05T11:26:00.620
> 
> 标签：web-services, nusoap, mysql5

我创建了一个基于 PHP/MySQL 的 Web 服务。[我写了这里](https://stackoverflow.com/questions/11309981/not-getting-response-from-php-mysql-nusoap)提到的client.php

和 server.php 如下：

```
 <?php
require_once("lib/nusoap.php");
$host = $_SERVER['HTTP_HOST'];
$miURL = 'http://'.$host.'/WS-Demo';

 $server = new nusoap_server();
    $server->configureWSDL('L3M_WebService', $miURL);
    $server->wsdl->schemaTargetNamespace=$miURL;

    $server->register('getDemoData',
   array('fldpara' => 'xsd:Array', 'tblpara' => 'xsd:Array', 'cndpara' => 'xsd:Array'),
                      array('return' => 'xsd:string'),
                      $miURL);

    function decryptRJ256($string_to_decrypt)
    {
    $key    = 'salt_key - I';
    $iv     = 'salt_key - II';
    $string_to_decrypt = base64_decode($string_to_decrypt); 
    $rtn = mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $key, $string_to_decrypt, MCRYPT_MODE_CBC, $iv);
    $rtn = rtrim($rtn, "\4");
    return($rtn);
}

function encryptRJ256($string_to_encrypt)
{
    $key    = 'salt_key - I';
    $iv     = 'salt_key - II';
    $rtn = mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $key, $string_to_encrypt, MCRYPT_MODE_CBC, $iv);
    $rtn = base64_encode($rtn);
    return($rtn);
}

function getDemoData($flds, $tbls, $cnds){
    $mysqli = new mysqli("localhost", "root", "", "test");
    for($i=0;$i< count($flds); $i++) {
        $flds[$i] = decryptRJ256($flds[$i]);
    }    
    for($i=0;$i< count($tbls); $i++) {
        $tbls[$i] = decryptRJ256($tbls[$i]);
    }
    for($i=0;$i< count($cnds); $i++) {
        $cnds[$i] = decryptRJ256($cnds[$i]);
    }

    if(! empty($flds)) {
        $what = implode(", ", $flds);
    } else {
        $what = "*";
    }

    if(! empty($tbls)) {
        $from = implode(", ", $tbls);
    }else {
        $err = 1;
    }

    if(! empty($cnds)) {
        $cond = " WHERE ";
        $cond .= $cnds[0] . " = '" . $cnds[1] . "'";
    } else {
        $cond = "";
    }

    $sql = "SELECT ".$what." FROM ".$from . $cond;
    $rsGetData = $mysqli->query($sql);
    $responseData = '<?xml version="1.0" encoding="UTF-8"?>
    <L3MDataSets>';
    while($rowGetData = $rsGetData->fetch_assoc()) {
        $responseData .= '<L3DataSet>';
        foreach($rowGetData as $k => $v) {
            $responseData .= '<' . $k . '>' . $v . '</' . $k . '>';
        }
        $responseData .= '</L3DataSet>';
    }
    $responseData .= '</L3MDataSets>';
    $responseData = encryptRJ256($responseData);
    $responseString = new soapval('return', 'xsd:string', $responseData );
    return $responseData;
}

$HTTP_RAW_POST_DATA = isset($HTTP_RAW_POST_DATA) ? $HTTP_RAW_POST_DATA : '';
$server->service($HTTP_RAW_POST_DATA);
?> 
```

从 getDemoData 函数中的上述代码中，如果我删除 while 循环，它会给出正确的输出。但是，当我放回 while 循环时，即使 SQL 查询是正确的，它也会显示输出为“-Error: Response not of type text/xml: text/html”。我已经复制并粘贴了在 phpMyAdmin 中工作的生成的 SQL 查询。

# ajax - MVC 在 ajax.beginform 之外提交表单

> ID：11343338
> 
> 赞同：1
> 
> 时间：2012-07-05T11:26:05.110
> 
> 标签：ajax, asp.net-mvc-3, razor

我有一个特定的 ajax 表单，提交时我想在该 ajax 表单之外包含另一个表单。让我给你看一个例子：

```
 @using (Ajax.BeginForm("PayWithBankTransfer", "Payment", new { salesLineId = salesLine.SalesLineID }, new AjaxOptions
                                                                                                                    {
                                                                                                                        HttpMethod = "POST",
                                                                                                                        UpdateTargetId = "bankForm",
                                                                                                                        LoadingElementId = "spinnerBank"
                                                                                                                    }, new { id = "feedback-form" }))
{
    //some stuff
    <button type="submit">Reserve</button>
} 
```

我在要包含在 ajax 表单提交中的表单之外还有另一个标签

```
<div id="theOtherStuff">
    //otherStuff
</div> 
```

**我怎样才能将其他东西与 ajax 表单一起提交？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:41:41.660

我不认为 MS 不显眼的 AJAX 支持这一点。所以让我们摆脱它并使用普通的jQuery。该[`.serialize()`](http://api.jquery.com/serialize/)方法是您正在寻找的。

因此，我们首先将`Ajax.BeginForm`表单替换为常规`Html.BeginForm`

```
@using (Html.BeginForm(
    "PayWithBankTransfer", 
    "Payment", 
    new { salesLineId = salesLine.SalesLineID }, 
    FormMethod.Post,
    new { id = "feedback-form" })
)
{
    //some stuff
    <button type="submit" class="t-button t-state-default" style="width: 100px; height: 50px;">Reserver</button>
} 
```

然后我们为另一个表单提供一个 id，以便我们可以在脚本中引用它：

```
<div id="theOtherStuff">
    @using (Html.BeginForm(null, null, FormMethod.Post, new { id = "theOtherStuffForm" }))
    {
        //otherStuff
    }
</div> 
```

剩下的就是在一个单独的 javascript 文件中编写我们的脚本，以不显眼地 AJAXify 这个表单：

```
$(function() {
    $('#feedback-form').submit(function () {
        $('#spinnerBank').show();
        $.ajax({
            url: this.action,
            type: this.method,
            data: $(this).add('#theOtherStuffForm').serialize(),
            success: function (result) {
                $('#bankForm').html(result);
            },
            complete: function () {
                $('#spinnerBank').hide();
            }
        });

        return false;
    });
}); 
```

以下行应该特别感兴趣：

```
data: $(this).add('#theOtherStuffForm').serialize(), 
```

如您所见， .serialize 方法允许将多种形式转换为合适的序列化形式。

很明显，您不应该与 2 个表单的输入元素有冲突的名称（例如，有 2 个具有相同名称的元素），否则默认模型绑定器可能会发疯。如果有任何冲突，由你来解决。

# sql-server - ReadingProgress 正在上传的备份

> ID：11343350
> 
> 赞同：0
> 
> 时间：2012-07-05T11:26:41.103
> 
> 标签：sql-server, .net-3.5

您好，我正在使用以下代码在我的程序中恢复数据库。

sqlcmd = New SqlCommand("Restore Database db1 From Disk = '" & txtFileName.Text & "' with replace") sqlcmd.Connection = con sqlcmd.ExecuteNonQuery()

此代码运行良好，但我想根据恢复过程的进度显示进度条。我怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:00:47.177

如果您针对 SQL 2005 或更高版本运行此操作，则可以使用以下查询来监控还原操作的状态。

```
SELECT
    command, start_time, percent_complete,
    CAST(((DATEDIFF(s,start_time,GetDate()))/3600) as varchar) + ' hour(s), '
        + CAST((DATEDIFF(s,start_time,GetDate())%3600)/60 as varchar) + 'min, '
        + CAST((DATEDIFF(s,start_time,GetDate())%60) as varchar) + ' sec' as running_time,
    CAST((estimated_completion_time/3600000) as varchar) + ' hour(s), '
        + CAST((estimated_completion_time %3600000)/60000 as varchar) + 'min, '
        + CAST((estimated_completion_time %60000)/1000 as varchar) + ' sec' as est_time_to_go,
    dateadd(second,estimated_completion_time/1000, getdate()) as est_completion_time, s.text
FROM 
    sys.dm_exec_requests r
    CROSS APPLY sys.dm_exec_sql_text(r.sql_handle) s
WHERE 
    r.command in ('RESTORE DATABASE', 'BACKUP DATABASE', 'RESTORE LOG', 'BACKUP LOG', 'DBCC TABLE CHECK') 
```

您可以调整 WHERE 子句中的值来控制将返回其状态的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:22:23.243

无法准确知道备份文件的大小。你可以做的是在运行备份命令之前，找出数据库的大小，你可以大致猜测1GB可能需要1秒的备份，并相应地显示进度条

# php - PHP - 我的代码有什么问题？

> ID：11343351
> 
> 赞同：0
> 
> 时间：2012-07-05T11:26:41.453
> 
> 标签：php, validation, formula

我从一本医学研究书中得到了这个原始公式：

> 对数(e) (EFW) = (-4.564+(0.282*AC)-(0.00331*AC^2))*1000

EFW（克），AC（厘米）

这就是我所做的：

```
$ac = 291; // (mm)
$w = log(-4.564+(0.282*($ac/10))-(0.00331*pow(($ac/10),2)))*1000);
echo "result: " . $w;

result: 6.7 
```

结果应该在 1900-2500 克之间，而不是 6.7 克。我不知道这里有什么问题？你能帮我看看吗，谢谢！

编辑：我希望得到 gramm 的结果，而我的 AC 是 mm

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T11:37:28.090

*   如果日志（结果）== expr
*   然后结果 == exp(expr)

[http://codepad.org/yVmzaToZ](http://codepad.org/yVmzaToZ)

代码：

```
$ac = 291; // (mm)
$w = exp(
  -4.564
  +(0.282*($ac/10))
  -(0.00331*pow(($ac/10),2))
)*1000;
echo "result: " . $w; 
```

结果：

```
result: 2314.6509531657 
```

介于 1900-2500 之间 :)

# php - Simple_html_dom：无法接收来自大型网站的图片？

> ID：11343353
> 
> 赞同：0
> 
> 时间：2012-07-05T11:26:49.167
> 
> 标签：php, simple-html-dom

我正在使用 simple_html_dom.php 从 url 获取所有图像（就像 pinterest 一样）

```
if($_POST['submit']) {

$url = $_POST['form_url'];
$html = file_get_html($url);
$count = 0;
$goodfiles = array();

    if($html && is_object($html) && isset($html->nodes)){
        foreach($html->find('img') as $img){
            $count++;
        }
    }else{
        echo "failed";
    }

echo $count;

} 
```

}

对于很多网站，我会统计网站上有多少图片。但例如对于网站 pinterest.com，我收到以下错误：

```
 Warning: file_get_contents(http://www.pinterest.com) [function.file-get-contents]: failed to open stream: Connection timed out in /home/vyrxkian/domains/bblablabla/include/simple_html_dom.php on line 70
 failed 0 
```

当我进一步指定错误时，我得到了这个：

```
Warning: file_get_contents(http://www.pinterest.com) [function.file-get-contents]: failed to open stream: Connection timed out in /home/vyrxkian/domains/bblablabla/include/simple_html_dom.php on line 70 
```

```
 Fatal error: Call to a member function find() on a non-object in /home/vyrxkian/domains/bblablabla.php on line 30 
```

我怎样才能预防这个错误并阅读例如 pinterest.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:43:58.573

您可以使用 CURL 库：

```
$url =  $_POST['form_url'];

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$url); // set url to post to
curl_setopt($ch, CURLOPT_FAILONERROR, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);// allow redirects
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1); // return into a variable
curl_setopt($ch, CURLOPT_TIMEOUT, 7); 
$resultHtml = curl_exec($ch); // run the whole process
curl_close($ch);

$html = new simple_html_dom();
$html->load($resultHtml); 
```

# asp.net - asp.net 中的会话和身份验证

> ID：11343354
> 
> 赞同：2
> 
> 时间：2012-07-05T11:26:52.090
> 
> 标签：asp.net, forms-authentication, session-state

在开发站点（使用 Forms 身份验证和 InProc sessionstate）时，经常会遇到我丢失存储在 Session 中的变量（例如 Session["myVar"]）的情况，但我的 auth-session 仍然有效。

这会导致我的网站出现一些奇怪的行为。

为什么会发生这种情况，我可以做些什么来防止我的身份验证和会话变量的不同生命周期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:59:39.707

在 Asp.Net 中，会话和“正在登录”不是一回事。

两者（通常）都由 cookie 控制，但 cookie 是分开的。

要控制 Session 保持活动的时间，请参阅答案`Jonas T`。

要控制用户保持登录状态的时间，您可以在`<forms ... />`元素上使用 timeOut：

```
<system.web>
    <authentication mode="Forms">
        <forms loginUrl="~/Account/Login.aspx" timeout="120" slidingExpiration="true"/>
    </authentication>
    ...
</system.web> 
```

要解决您的问题，您应该确保会话超时至少与表单身份验证超时一样长。

如果您允许在表单身份验证中保留 cookie（“记住我”），则没有保证。在这种情况下，您只需根据某些标准/规范将会话超时设置为“足够长”。

**编辑**：还要检查部署站点的应用程序池（在 IIS 下）的设置。并具体检查“ `Idle Time-out`”是什么。如果设置得较低（我认为默认值是 20 分钟），那么如果在此期间没有请求进入，IIS 将关闭应用程序池。这（当然）终止了任何存在的进程内会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T11:37:09.647

表单身份验证将其票证存储在客户端或 URL 的 Cookie 中（如果禁用 cookie）。

会话变量存储在服务器端并过期。如果您希望您的变量更持久，请使用 cookie。

您可以在 Web 配置中延长会话超时。这是20分钟。

```
<configuration>
  <system.web>
     <sessionState timeout="20"></sessionState>
  </system.web>
</configuration> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T11:33:40.190

您说您正在使用 ASP.NET 表单身份验证/授权，那么我建议您使用[Profile](http://msdn.microsoft.com/en-us/library/2y3fs9xs.aspx)而不是`Session`state。

# asp-classic - 在经典asp中将二维数组转换为一维数组

> ID：11343359
> 
> 赞同：0
> 
> 时间：2012-07-05T11:27:00.010
> 
> 标签：asp-classic

我想在 asp 中将二维数组转换为一维数组。这可能吗？如果那么请给我一个例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:57:25.703

这是一个可以为您完成的功能：

```
Function TransformToSingleArray(TwoDimArray)

 TotalValues = (uBound(TwoDimArray,1) +1) * (uBound(TwoDimArray,2) +1)
 ReDim OneDimArray(TotalValues)
 ArrCnt = 0

 For x = lBound(TwoDimArray,1) to uBound(TwoDimArray,1)
   For y = lBound(TwoDimArray,2) to uBound(TwoDimArray,2)
      EachValue = TwoDimArray(x,y)
      OneDimArray(ArrCnt) = EachValue
      ArrCnt = ArrCnt + 1
   Next     
 Next

 TransformToSingleArray = OneDimArray

End Function 
```

# authentication - 在 JBOSS AS 7.1.1 上将 JAAS 页面实现到 WAR 文件

> ID：11343362
> 
> 赞同：1
> 
> 时间：2012-07-05T11:27:02.917
> 
> 标签：authentication, jakarta-ee, jboss7.x, jaas

我对网络应用程序很陌生。有人告诉我，JBOSS 7.1.1 有一个内置的 JAAS 系统，可以非常简单地在我的 JBOSS 配置上启用它。但是我在尝试运行它时遇到了麻烦，即我经历的大多数互联网搜索都刚刚结束了旧版本的 JBoss。

有没有人有关于如何在 JBoss 7.1.1 中的 WAR 文件上实现简单 JAAS 身份验证屏幕的分步指南？Prefarbly 使用它的 h2 数据库。谢谢 ：）

另外——我的机器与 Eclipse 有问题，所以我不能使用任何 Eclipse EE 的漂亮服务器运行机制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:35:32.763

终于明白了。对于未来的你们：

您需要在 jsp/html/whatever 中拥有自己的标准登录/注销页面。你把它放在你的 web.xml 约束中。然后添加一个名为“Jboss-web”的 xml 文件并输入您的安全域（默认的 AS 7 称为“其他”）。然后最后使用 config 文件夹中的 adduser.bat 添加用户和角色。

# ruby-on-rails - Rails 3: How to display many-to-many join in view?

> ID：11343365
> 
> 赞同：2
> 
> 时间：2012-07-05T11:27:10.650
> 
> 标签：ruby-on-rails, ruby-on-rails-3, join, model, views

I'm trying to display all the 'legs' for each of my 'trips' in my view.

Ideally they would look like this:

```
-Trip1.name
  - Leg1.name
  - Leg2.name
  - Leg3.name
-Trip2.name
  - Leg4.name
  - Leg5.name
  - Leg6.name 
```

The models are many-to-many. I have three tables Legs, Trips and Legs_trips. The models look like this:

Trip.rb

```
class Trip < ActiveRecord::Base
 has_and_belongs_to_many :legs
 accepts_nested_attributes_for :legs, :reject_if => :all_blank
end 
```

Leg.rb

```
class Leg < ActiveRecord::Base
 has_and_belongs_to_many :trips
 validates_uniqueness_of :name
 accepts_nested_attributes_for :trips
end 
```

There is nothing but this in the controller at the moment:

```
def index
@trips = Trip.all
@legs = Leg.all

 respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @trips }
 end
end 
```

Any suggestions for how to structure my view would be great! I've tinkered around for ages but can't seem to get anywhere near or find anything online.

Thanks in advance!

James

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T11:38:48.213

try

```
 <% @trips.each do |trip| %>
   <ul>
     <li>
       <%= trip.name %>
         <% trip.legs.each do |leg| %>
            <li>
              <%= leg.name %>
            </li>
         <% end %>
     </li>
   </ul>
 <% end %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T11:34:01.073

In you view apply them like this:

```
<ul>
<% @trips.each do |trip| %>
  <li>
  <%= tri.name %>

  <ul>
  <% @trips.legs.each do |leg_in_trip| %>
    <li>
    <%= leg_in_trip.name %>
    </li>
  <% end %>
  </ul>
  </li>
<% end %>
</ul> 
```

# c# - 将新颜色（带渐变）应用到 Win Forms 按钮 onClick

> ID：11343366
> 
> 赞同：1
> 
> 时间：2012-07-05T11:27:14.207
> 
> 标签：c#, .net, winforms

我遇到了几种将渐变样式应用于 Windows 窗体应用程序中的对象的方法。所有方法都涉及重写 OnPaint 方法。但是，我正在根据验证在运行时更改样式。

如何将新的渐变样式应用于已经渲染的按钮（就像我可以使用 BackColor 一样）？

R，C.

**更新：这是我目前使用的代码。好像没有效果**

```
private void Button_Paint(object sender, System.Windows.Forms.PaintEventArgs e)
    {
        Graphics g = e.Graphics;
        g.DrawString("This is a diagonal line drawn on the control",
            new Font("Arial", 10), System.Drawing.Brushes.Blue, new Point(30, 30));
        g.DrawLine(System.Drawing.Pens.Red, btn.Left, btn.Top,
            btn.Right, btn.Bottom);

        this.btn.Invalidate();
    } 
```

被召唤

```
btn.Paint += new PaintEventHandler(this.Button_Paint); 
```

**当前代码的进一步更新**

```
private void Button_Paint(object sender, PaintEventArgs e)
{
Graphics g = e.Graphics;
g.DrawString("This is a diagonal line drawn on the control",
        new Font("Arial", 10), System.Drawing.Brushes.Blue, new Point(30, 30));
g.DrawLine(System.Drawing.Pens.Red, btn.Left, btn.Top,
        btn.Right, btn.Bottom);
}

private void btn_Click(object sender, EventArgs e)
{
btn.Paint += new PaintEventHandler(this.Button_Paint);();
btn.Invalidate();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T13:52:16.947

这有两个部分。一，正如 SLaks 所说，您需要在`Paint`事件处理程序中绘制渐变。这看起来像这样（为了简洁起见，我的示例有点混乱）：

```
private void Button_Paint(object sender, PaintEventArgs e)
{
    Graphics g = e.Graphics;
    if (MyFormIsValid()) {
        g.DrawString("This is a diagonal line drawn on the control",
            new Font("Arial", 10), System.Drawing.Brushes.Blue, new Point(30, 30));
        g.DrawLine(System.Drawing.Pens.Red, btn.Left, btn.Top,
            btn.Right, btn.Bottom);
    }
    else {
        g.FillRectangle(
            new LinearGradientBrush(PointF.Empty, new PointF(0, btn.Height), Color.White, Color.Red),
            new RectangleF(PointF.Empty, btn.Size));
    }
} 
```

此外，您需要进行验证并在单击按钮时重绘按钮：

```
btn.Click += Button_Click; 
```

...

```
private void Button_Click(object sender, EventArgs e)
{
    DoValidations();
    btn.Invalidate();
} 
```

当然，您必须实现`DoValidations()`and`MyFormIsValid()`方法。

这是一个可运行的示例程序的全部内容：http: [//pastebin.com/cfXvtVwT](http://pastebin.com/cfXvtVwT)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T11:28:35.097

如您所见，您需要处理该`Paint`事件。

你可以在你的类中设置一个布尔值来指示是否绘制渐变。

# java - 使用关系数据库映射 Lucene 搜索结果

> ID：11343377
> 
> 赞同：0
> 
> 时间：2012-07-05T11:27:37.917
> 
> 标签：java, search, lucene

我有一个包含文件列表的应用程序。这些文档使用 Lucene 进行索引。我可以搜索文档的关键字。我循环 TopDocs 并获取与我的关系数据库中的 ID 列相关的 ID 字段（每个 Lucene 文档的）。从所有这些 ID 中，我创建了一个列表。在构建 ID 列表之后，我进行了一个数据库查询，该查询正在执行以下 SELECT 语句 (JPA)：

```
SELECT d From Document WHERE id IN (##list of ID's retrieved from Lucene##) 
```

此文档列表被发送到视图 (GUI)。

但是，有些文档是私有的，不应该在列表中。因此，我们在 SELECT 查询中有一些额外的语句来做一些安全检查：

```
SELECT d From Document WHERE id IN (##list of ID's retrieved from Lucene##)
AND rule1 = foo
AND rule2 = bar 
```

但是现在我在想：我是用 Lucene 的速度来快速搜索文档，但我还是要做 SELECT 查询。所以我在这个方面失去了性能:-( ... Lucene 是否有一些组件可以为你做这个映射？或者有没有关于这个问题的最佳实践？大型项目如何将 Lucene 结果映射到关系数据库？因为视图应该呈现结果？

非常感谢！

约臣

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:22:00.533

Some suggestions:

*   In Lucene, you can use a [Filter](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/search/Filter.html) to narrow down the search result according to your rules.
*   Store the primary key or a unique key (an ID, a serial number, etc.) in Lucene. Then, your relational database can make unique key lookups and make things very fast.
*   Lucene can act as storage of your documents too. If applicable in your case, you just retrieve the individual documents' content from Lucene and don't need to go to your relational database.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:34:10.517

为什么不用lucene来索引数据库中的表呢？这样您就可以在 1 个 lucene 查询中完成所有操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T19:59:20.750

如果这是一个大问题，也许值得看看支持文档级别安全性的[ManifoldCF](http://wiki.apache.org/solr/SolrSecurity/#Manifold_CF_.28Connector_Framework.29)可能满足您的需求。

# php - 如何在 cakephp-2.0 中设置 facebook-php-sdk3？

> ID：11343379
> 
> 赞同：-1
> 
> 时间：2012-07-05T11:27:50.247
> 
> 标签：php, cakephp, cakephp-2.0, facebook-php-sdk

我需要有关如何在 cakephp-2.0 中设置 facebook-php-sdk3 的任何完整教程的信息。如果你有任何请帮我解决这个问题。我搜索并找到了一些插件，但教程不完整。所以我需要一个完整的教程。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:19:15.457

这可能会帮助您入门。检查[cakePHP 2.0 Facebook 插件](http://www.webtechnick.com/blogs/view/243/CakePHP_2_0_Facebook_Plugin_BETA)。

# jsp - 如何在单击提交按钮时调用 MVCPortlet 类中的操作方法

> ID：11343387
> 
> 赞同：0
> 
> 时间：2012-07-05T11:28:23.337
> 
> 标签：jsp, liferay, liferay-6, method-call

我正在使用 Liferay 6 进行开发。

我已经在文件`liferay-portlet.xml`文件中以这种方式向 Liferay 添加了 JQuery 支持

```
<header-portlet-javascript>https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js</header-portlet-javascript>
         <header-portlet-javascript>https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.15/jquery-ui.min.js</header-portlet-javascript> 
```

现在我有一个带有用户名和密码的表单，如下所示：

```
 <form>
    <div>
        <input class="default-value" type="text" name="Name" value="Name" />
        <input class="default-value" type="text" name="Password" value="Password" />
    </div>
    </form>

<div class="fieldgroup">
 <input type="submit" value="Register" class="submit">
</div>

<liferay-portlet:actionURL name="registerUser" var="registerUserURL"></liferay-portlet:actionURL> 
```

我有一个如下所示的 CustomPortlet，并将其添加到 portlet.xml 文件中，如下所示

```
 <portlet>
    <portlet-name>Second</portlet-name>
    <display-name>Second</display-name>
    <portlet-class>com.SecondPort</portlet-class>

public class SecondPort extends MVCPortlet {

public void registerUser(ActionRequest request, ActionResponse response) 
{
// Some code here with respect to the registerUser .
}
} 
```

现在请告诉我点击JSP页面上的提交按钮，我该如何调用这个`registerUser`方法？

```
 <input type="submit" value="Register" class="submit"> 
```

请让我知道，提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:00:43.260

对于您的 jsp，您已经很接近了。需要重新排序，使用 actionURL 和 portlet 的名称空间。警告 - 在 stackoverflow 答案窗口中输入，实际上并没有编译/运行：

```
<liferay-portlet:actionURL name="registerUser" var="registerUserURL"></liferay-portlet:actionURL>
<form action="<%=registerUserURL%>">
    <div>
        <input class="default-value" type="text" name="<portlet:namespace/>Name" value="Name" />
        <input class="default-value" type="text" name="<portlet:namespace/>Password" value="Password" />
    </div>
</form>

<div class="fieldgroup">
 <input type="submit" value="Register" class="submit">
</div> 
```

当您扩展 Liferay 的 MVC portlet 时，portlet 端看起来不错 - 只需`request.getParameter("Name");`在此处使用即可。

这根本与 jQuery 无关，对吧？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:53:32.297

不要忘记在 jsp 的顶部添加以下内容：

```
<%@ taglib uri="http://liferay.com/tld/portlet" prefix="liferay-portlet" %> 
```

# java - 有没有办法从 .dex 文件中获取所有类的列表？

> ID：11343388
> 
> 赞同：49
> 
> 时间：2012-07-05T11:28:26.373
> 
> 标签：java, android, class, dex, dx

我有一个`.dex`文件，调用它`classes.dex`。

有没有办法“读取”其中的内容`classes.dex`并获取其中所有类的列表作为完整的类名，包括它们的包，`com.mypackage.mysubpackage.MyClass`例如？

我在考虑[`com.android.dx.dex.file.DexFile`](http://www.jarvana.com/jarvana/view/com/google/android/tools/dx/1.7/dx-1.7-javadoc.jar!/com/android/dx/dex/file/DexFile.html)，但我似乎找不到检索整组类的方法。

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2013-08-25T11:32:55.583

使用 Android-SDK 中的命令行工具`dexdump`。它在`$ANDROID_HOME/build-tools/<some_version>/dexdump`。它打印的信息比您可能想要的要多得多。我没有找到`dexdump`减少冗长的方法，但是

```
dexdump classes.dex | grep 'Class descriptor' 
```

应该管用。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-05T18:54:51.490

您可以将[dexlib2 库](https://code.google.com/p/smali/source/browse/#git/dexlib/src/main/java/org/jf/dexlib)用作独立库（[在 maven 中可用](http://search.maven.org/#artifactdetails%7Corg.smali%7Cdexlib2%7C2.0.3%7Cjar)），以读取 dex 文件并获取类列表。

```
DexFile dexFile = DexFileFactory.loadDexFile("classes.dex", 19 /*api level*/);
for (ClassDef classDef: dexFile.getClasses()) {
    System.out.println(classDef.getType());
} 
```

请注意，类名的格式为“Ljava/lang/String;”，这是它们在 dex 文件（和 java 类文件）中的存储方式。要转换，只需删除第一个和最后一个字母，并将 / 替换为 .

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-07-05T11:37:03.993

您可以使用`dex2jar`将转换`.dex`为的实用程序`.jar.`

[http://code.google.com/p/dex2jar/](http://code.google.com/p/dex2jar/)

然后您可以提取该`.jar`文件。

另外，你可以使用这个框架

[德克斯](http://dedexer.sourceforge.net/)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-09-11T18:22:29.323

从 baksmali v2.2 开始，baksmali 具有执行此操作的功能。

`baksmali list classes my.dex`将打印给定 dex 文件中所有类的列表。

参考：可从此处下载： [https](https://github.com/JesusFreke/smali) ://github.com/JesusFreke/smali 。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-04-20T22:26:48.117

dxshow mydexfile.dex

dxshow:

字符串-a $1 | grep "^L.*/" | grep -v "Ljava" | grep -v "Landroid" | sed "s/^L\(.*\);/\1/" | sed "s:/:.:g"

ezpz hack...不想花一生的时间进行Java编码

# objective-c - 删除核心数据实体

> ID：11343391
> 
> 赞同：0
> 
> 时间：2012-07-05T11:28:36.793
> 
> 标签：objective-c, ios, core-data

我正在做一个涉及充分利用核心数据的项目。几个月以来我一直在使用它。我有一个小问题。我有两个不同的实体，一个名为 Student 的实体和另一个名为 Courses 的实体。学生和课程之间的关系是一对多的。我经常从远程 json 更新实体。因此，有时 Courses 实体中存在与 Student 实体没有关系的悬空指针。需要删除此类实体。删除此类对象如何更好？

```
 Courses(points to student) <------------- Student ----------------> Course (Points to student) 
                                                           |
                                                           |
                                                           |
                                                           |
                                                Course (Points to student)

                       Course(has no pointer to student, no foreign key to relate with student) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:55:17.267

您确定要在没有学生的情况下删除课程吗？当然可能是有效的。我认为你应该取消关系，所以当你删除一个学生时，所有指向它的课程都会停止引用那个学生。

您可能需要检查您的[关系删除规则](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdRelationships.html)，以便在我看来它们应该被取消。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:45:02.717

执行此操作的简单方法是创建一个获取请求并针对`Courses`. 显然，您需要使用 a`NSPredicate`来删除`Courses`没有学生的。

如果你`Courses`有一个反向 rel to `Student`, called `coursesToStudent`，你可以设置以下谓词。

```
[NSPredicate predicateWithFormat:@"coursesToStudent == nil"]; 
```

在这里，我认为它`Courses`与`Student`.

这样，获取请求的结果将`Courses`没有学生。有了结果，打电话`deleteObject`就完成了。

有关使用谓词设置获取请求的信息，请参阅[Filter NSFetchedResultsController for nil value?](https://stackoverflow.com/questions/1070921/filter-nsfetchedresultscontroller-for-nil-value) .

关于你的模型，我会设置另一个。例如使用三个实体：

```
Student
Course
Enroll 
```

在哪里

```
Student
- attributes you want
- toEnroll [one-to-many rel to Enroll with cascade rule]

Course
- attributes you want
- toEnroll [one-to-many rel to Enroll with cascade rule]

Enroll
- attributes you want
- toStudent [one-to-one rel to Student with nullify rule]
- toCourse [one-to-one rel to Course with nullify rule] 
```

希望有帮助。

# php - 如何更改已上传的照片。PHP

> ID：11343392
> 
> 赞同：0
> 
> 时间：2012-07-05T11:28:37.153
> 
> 标签：php

如果之前已经回答过这个问题，我感到非常抱歉，但我已经在谷歌上搜索了一段时间，但没有找到答案。

我的问题

我已经使用 PHP 为我的网站上传了一个文件。我想成为啤酒，让用户可以选择更改他们上传的图像。当他们只能上传 1 张图片但现在我尝试添加更多图片时，我设法做到了。他们可以添加不止一张照片，但是在更改它们时我遇到了问题。

这是我的 1 张图片的代码（有效）

```
$newname = "$pid.jpg";
move_uploaded_file( $_FILES['fileField']['tmp_name'], "../inventory_images/$newname");
header("location: inventory_list.php"); 
exit(); 
```

这是我用来更改它的代码。

```
 if ($_FILES['fileField']['tmp_name'] != "") {
    // Place image in the folder 
    $newname = "$pid.jpg";
    move_uploaded_file($_FILES['fileField']['tmp_name'], "../inventory_images/$newname");
}
header("location: inventory_list.php"); 
```

这就是我现在将代码更改为多个图像的内容。

```
$image1 = "$pid Image1.jpg";
$image2 = "$pid Image2.jpg";
$image3 = "$pid Image3.jpg";
$image4 = "$pid Image4.jpg";
$image5 = "$pid Image5.jpg";
move_uploaded_file( $_FILES['fileField']['tmp_name'], "../inventory_images/$image1");
move_uploaded_file( $_FILES['fileField']['tmp_name'], "../inventory_images/$image2");
move_uploaded_file( $_FILES['fileField']['tmp_name'], "../inventory_images/$image3");
move_uploaded_file( $_FILES['fileField']['tmp_name'], "../inventory_images/$image4");
move_uploaded_file( $_FILES['fileField']['tmp_name'], "../inventory_images/$image5");
header("location: inventory_list.php"); 
```

这是我尝试过的，但我知道 if 存在逻辑错误

```
 if ($_FILES['fileField']['tmp_name'] != "") {
    // Place image in the folder 
$image1 = "$pid Image1.jpg";
$image2 = "$pid Image2.jpg";
$image3 = "$pid Image3.jpg";
$image4 = "$pid Image4.jpg";
$image5 = "$pid Image5.jpg";
move_uploaded_file( $_FILES['fileField']['tmp_name'], "../inventory_images/$image1");
move_uploaded_file( $_FILES['fileField']['tmp_name'], "../inventory_images/$image2");
move_uploaded_file( $_FILES['fileField']['tmp_name'], "../inventory_images/$image3");
move_uploaded_file( $_FILES['fileField']['tmp_name'], "../inventory_images/$image4");
move_uploaded_file( $_FILES['fileField']['tmp_name'], "../inventory_images/$image5");
} 
```

这是我表格的一部分

```
 <tr>
  <td align="right">Product Image: 1</td>
  <td><div class="single">
    <a href="../inventory_images/<?php echo $id; ?> Image1.jpg" rel="lightbox" title="<?php echo $product_name; ?>"><img src="../inventory_images/<?php echo $id; ?> Image1.jpg" width="142" height="188" alt="<?php echo $product_name; ?>" /></a>
</div></td> 
  </tr>
        <tr>
    <td align="right"></td>
    <td><label>
      <input type="file" name="Image1" id="Image1" />
    </label></td>
  </tr> 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:38:27.940

对于多个文件上传，输入文件字段必须是这样的（示例）：

```
<input type="file" name="Images[]" id="Image1" /> 
```

在多个文件上传中，$_FILE 数组具有以下格式：

```
$_FILES['Images']['name'][0] // first file name
$_FILES['Images']['tmp_name'][0] // first file tmp_name 
```

另请参阅 max_file_uploads 配置指令

这将对您有所帮助：[http ://www.php.net/manual/en/features.file-upload.multiple.php](http://www.php.net/manual/en/features.file-upload.multiple.php)

ps：在上面的链接中，请参见**Donatas Olseviius**的第一条评论：他修复了 $_FILE 数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T11:43:15.880

`$_FILES['fileField']`不会包含您的图像，因为您输入的名称是`Image1`. 你必须使用`$_FILES['Image1']`. 但正如 Mouloud 所建议的，使用 insted 数组然后循环遍历它更容易。但是，如果您想给每个图像输入一个唯一的名称，也可以使用。

这是我的做法：

HTML：

```
<input type="file" name="image[1]" id="Image1" />
<input type="file" name="image[2]" id="Image2" />
<input type="file" name="image[3]" id="Image3" />
... 
```

PHP：

```
foreach($_FILES['image']['tmp_name'] as $i => $tmpName) {
    if ($tmpName){
        move_uploaded_file( $tmpName, "../inventory_images/{$pid}Image{$i}.jpg");
    }
} 
```

# php - 处理多层的php pdf生成器（图像上的文本等）

> ID：11343393
> 
> 赞同：0
> 
> 时间：2012-07-05T11:28:38.013
> 
> 标签：php, image, pdf-generation

大约 3 年前，我一直致力于生成 PDF，并为此使用了 FPDF lib。我记得它不是很好，因为它非常有限。从那以后，我没有机会从事任何其他与 PDF 相关的编程。

我认为在过去的几年中，许多图书馆都出现了。您现在可以推荐的最好的 php pdf 生成库是什么？我需要能够包含图像甚至 2 层（上面的图像 + 文本），所以库应该允许轻松地做到这一点

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:39:59.390

为什么不尝试准备您选择的 html 并使用 htmltopdf 生成器将其转换为 pdf。wkhtmltopdf 是最好的之一。尝试创建一个 html 模板，您可以在其中传递数据和图像空间。将数据传递给该 html 模板并将该 html 转换为 pdf。

# oracle - 如何对 Oracle Data Integrator 10.1.3 项目进行导入/导出操作？

> ID：11343397
> 
> 赞同：1
> 
> 时间：2012-07-05T11:29:09.773
> 
> 标签：oracle

我们正在研究 Oracle Data Integrator，我们希望将我们的 ODI 项目从一台 PC 移动到另一台 PC。两台电脑都是一样的。我们设法通过 OdiExportWork 从 Designer 以 .rar 文件格式导出项目。但是我们无法导入它。我们怎么能做到这一点？

欢迎任何形式的帮助。问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T08:12:31.717

最新版本的 ODI studio 可以一次性导出/导入项目、模型、相关知识模块等。

此功能称为智能导出/导入。它来自版本 11.1.6.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T16:48:04.360

实际上，您可以导出为 XML 文件。您可以逐个文件夹或逐个界面执行此操作，也可以导出/导入整个项目。

只需右键单击要导出的对象，然后选择导出位置，将 XML 文件带到新计算机，然后将其导入您的工作区。

# javascript - 如何将 jQuery live 绑定到整个窗口？

> ID：11343399
> 
> 赞同：0
> 
> 时间：2012-07-05T11:29:24.423
> 
> 标签：javascript, jquery, html

每当鼠标移动到浏览器窗口上的任何位置时，我都会尝试调用一些函数。目前，我正在使用：

```
$('html').live('mousemove', function(e) { ... } 
```

一旦页面向下滚动，这似乎不起作用。

有没有办法将`mousemove`事件绑定到整个窗口？

```
$(window).live('mousemove', function(e) { ... } 
```

结果一无所获。

--

编辑：

我的鼠标功能代码如下：

```
function mouseEvents() {

       // set up mouse movement
        $(window).on('mousemove', function(e) {
            if (window.imgLoaded) {
                var x = e.pageX/$(window).width()*504;
                var y = e.pageY/$(window).height()*504;
                console.log(y);
                drawKaleidoscope(window.ctx, window.img, x / 2, y / 2);
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:30:51.117

`$(document).bind("mousemove", function(e) { ... } )`

~~也触发滚动（移动鼠标滚轮不会触发 mousemove）~~

~~`$(document).bind("mousemove mousewheel DOMMouseScroll", function(e) { ... } )`~~

~~`DOMMouseScroll`鼠标滚轮的 Firefox 特定事件在哪里。~~

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:31:34.000

请注意：

.live 已弃用：请参见此处：[http](http://api.jquery.com/live/) ://api.jquery.com/live/ （已弃用类别）

你可以试试这个：

```
$(document).on('mousemove', function(e) { ... }

**or**

$(document).live('mousemove', function(e) { ... } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T11:31:45.013

你为什么使用.live？Live 适用于尚未创建的元素（或动态添加和删除的元素）。

`window`并且`document`从一开始就在那里，所以只需使用`$(document).bind`.

如果您使用的是 jQuery 1.7+，请使用`$(document).on`.

# asynchronous - 在请求之间保留 Future 对象？

> ID：11343401
> 
> 赞同：1
> 
> 时间：2012-07-05T11:29:30.523
> 
> 标签：asynchronous, jboss, ejb, wicket, ejb-3.1

我想使用[https://docs.jboss.org/ejb3/docs/reference/build/reference/en/html/jboss_extensions.html](https://docs.jboss.org/ejb3/docs/reference/build/reference/en/html/jboss_extensions.html)中描述的 JBoss 5.1 异步功能- 但是，我有点不清楚如何`Future`在请求之间保持返回。由于它不可序列化，因此我无法将其正确存储在我的 Wicket 页面或 http 会话中。`Future`如果您需要等待比请求更长的时间，您如何正确处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:33:11.703

该线程包含有关如何`Future`在 Wicket 中处理实例的讨论：

[http://apache-wicket.1842946.n4.nabble.com/Handling-futures-td3688341.html](http://apache-wicket.1842946.n4.nabble.com/Handling-futures-td3688341.html)

# php - DateTime 对象上的 PHP 异常处理

> ID：11343403
> 
> 赞同：3
> 
> 时间：2012-07-05T11:29:40.217
> 
> 标签：php, exception, datetime, exception-handling, error-handling

有谁知道为什么这个函数，当传递一个无效的日期（例如时间戳）给它时，尽管有`try-catch`？

```
function getAge($date){
    try {
        $dobObject = new DateTime($date);
        $nowObject = new DateTime();

        $diff = $dobObject->diff($nowObject);
    }

    catch (Exception $e) {
        echo 'Error: ',  $e->getMessage();
    }

    return $diff->y;
} 
```

**错误：**

> 致命错误：未捕获的异常 'Exception' 带有消息 'DateTime::_ *construct() [datetime.--construct]：无法在位置 7 (6) 解析时间字符串 (422926860)：... .php 中的意外字符:4 堆栈跟踪：#0 ... .php(4): DateTime->* _construct('422926860') #1 ... .php(424): getAge('422926860') #2 {main} 抛出/ ... .php 在第 4 行

非常感谢您！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T11:34:02.350

克里斯，你不能捕捉到致命错误，至少你不应该。

引用[keparo](https://stackoverflow.com/users/19468/keparo)：

*PHP 不会为您提供任何常规方法来捕获致命错误，因为它们确实不应该被捕获。也就是说，您不应该尝试从致命错误中恢复。与输出缓冲区匹配的字符串绝对是不明智的。*

如果您根本没有其他办法，请查看这篇文章以获取更多信息和可能[的操作方法](https://stackoverflow.com/questions/277224/how-do-i-catch-a-php-fatal-error)。

尝试这个：

```
function isDateValid($str) {

  if (!is_string($str)) {
     return false;
  }

  $stamp = strtotime($str); 

  if (!is_numeric($stamp)) {
     return false; 
  }

  if ( checkdate(date('m', $stamp), date('d', $stamp), date('Y', $stamp)) ) { 
     return true; 
  } 
  return false; 
} 
```

接着 ：

```
 if isDateValid( $yourString ) {
    $date = new DateTime($yourString);
 } 
```

# javascript - jquery选择带有名称的子标签

> ID：11343411
> 
> 赞同：0
> 
> 时间：2012-07-05T11:29:59.513
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-selectors

在下面显示的html中，我有这个主div，`cxfeeditem feeditem`并且`there are many divs`具有相同的类名和结构。我的问题是所有以类名开头的div `cxfeeditem feeditem`，如何获取孩子的值，

1.类名 cxfeeditem feeditem

2.class=feeditemtimestamp

3.cxcomments feeditemcomments

4.cxfeeditem feeditem

```
 <div class="cxfeeditem feeditem">
   <span class="feeditemtext cxfeeditemtext">
      This is my blog
   </span>
   <a class="feeditemtimestamp">Yesterday 2:13PM</a>
   <div class="cxcomments feeditemcomments"> 
     These are my comments
   </div>
   <div class="cxfeeditem1 feeditem1">
     My comments for the comment
   </div>  

</div> 
```

**编辑**：输出我想提醒以下值：

```
 This is my blog
    Yesterday 2:13PM
    These are my comments
    My comments for the comment 
```

我尝试了以下但它返回null：

```
$("div.cxfeeditem.feeditem").each(function() {
   alert($(this).children('span.feeditemtext.cxfeeditemtext').html());
   alert($(this).children('a.feeditemtimestamp').html());
   alert($(this).children('div.cxcomments.feeditemcomments').html());
   alert($(this).children('div.cxfeeditem.feeditem').html());
   break;
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:53:39.210

我能看到的最简单的方法是：

```
​$('.cxfeeditem.feeditem').filter(
    function(){
        return !$(this)
            .parents('.cxfeeditem.feeditem')
            .length​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​;
    }).children().each(
        function(){
            console.log($(this).text().trim());
        });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/aGQ9h/)。

`filter()`用于确保我们不访问相同的元素`.cxfeeditem`以及`.feeditem`这些类的最外层元素的子类的元素。这感觉有点混乱，但考虑到您想要的输出，这似乎是最好的方法。

之后，我们只需记录每个未被过滤掉的（直接）子元素的 white- `trim()`space 。`text()`

* * *

**针对 OP 在评论中提出的问题进行了**编辑，如下：****

 **> 如果我想添加一个子类名并且不想考虑所有标签怎么办？例如，如果我想要 only`a.feeditemtimestamp`和`span.feeditemtext.cxfeeditemtext`

在这种情况下，您可以使用第二次调用`filter()`：

```
$('.cxfeeditem.feeditem').filter(
    function() {
        return !$(this).parents('.cxfeeditem.feeditem').length;
    }).children().filter(
        function() {
            var that = $(this);
            return that.is('span.feeditemtext.cxfeeditemtext, a.feeditemtimestamp');
        }).each(        
            function() {
                console.log($(this).text().trim());
            });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/aGQ9h/3/)。

或者您可以使用`find()`（并省略`children()`）：

```
$('.cxfeeditem.feeditem').filter(
    function() {
        return !$(this).parents('.cxfeeditem.feeditem').length;
    }).find('> span.feeditemtext.cxfeeditemtext, > a.feeditemtimestamp').each( 
        function() {
            console.log($(this).text().trim());
        });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/aGQ9h/2/)。

参考：

*   jQuery：
    *   [`children()`](http://api.jquery.com/children/).
    *   [`each()`](http://api.jquery.com/each/).
    *   [`filter()`](http://api.jquery.com/filter/).
    *   [`find()`](http://api.jquery.com/find/).
    *   [`parents()`](http://api.jquery.com/parents/).
    *   [`text()`](http://api.jquery.com/text/).
*   '普通' JavaScript：
    *   [`length`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/length).
    *   [`trim()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/Trim).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:35:26.797

根据你的功能

```
alert($(this).children('span.feeditemtext.cxfeeditemtext').html()); 
```

这是在类为 cxfeeditem feeditem 的第一个 div 中给出 span 的文本值

对于第二个 div，跨度不存在，所以为空。**

# ruby-on-rails - Backbone.js 和 rails 代码组织

> ID：11343413
> 
> 赞同：2
> 
> 时间：2012-07-05T11:30:07.620
> 
> 标签：ruby-on-rails, ruby-on-rails-3, backbone.js, backbone-views, backbone-routing

我正在开发一个具有多种类型用户的应用程序，每个用户在登录时都有一个单独的视图。例如，业务类型用户将创建他的个人资料上传照片等，创建一些其他的东西。然后企业创建的内容在网络应用程序的登录页面上公开可见。

我在客户端使用骨干网，但整个 Web 应用程序并不都是骨干网，业务管理区域是一个单独的部分，骨干网应用程序在客户端运行，现在我希望从公共登录页面开始，我对如何使这项工作感到困惑，我应该为此页面创建一个新的主干应用程序，还是将更多视图模型和集合填充到同一个应用程序中？

两个页面的 url 不同，一个是whatever.com/business，着陆页是whatever.com

来自业务方面的许多视图和模型与公共登录页面上所需的相同。但我想不出一个关于如何组织这个的好解决方案。

有没有人以前做过这样的事情。有什么见解吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T14:04:38.083

Backbone.js 是一个很棒的 MVC 框架，但围绕组织大型应用程序并没有很多约定。您需要熟悉一些好的设计模式才能充分利用它，否则它很快就会变得混乱。

我之前在看AMD。看起来不错：
[http ://backbonetutorials.com/organizing-backbone-using-modules/](http://backbonetutorials.com/organizing-backbone-using-modules/)

这也可能有帮助：
[http ://ricostacruz.com/backbone-patterns/](http://ricostacruz.com/backbone-patterns/)

我也很喜欢这本关于设计好的 API 的规则书。我的 Kindle 只需 8 美元！
[http://www.amazon.com/REST-API-Design-Rulebook-ebook/dp/B005XE5A7Q](https://rads.stackoverflow.com/amzn/click/com/B005XE5A7Q)

编辑：我最近重构了一个大型的backbone.js 应用程序。如果我利用 Javascript 事件驱动架构，我发现它更容易构建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T12:22:06.987

有两个关于这个主题的优秀（专业）Railscasts，[#323 Backbone on Rails Part 1](http://railscasts.com/episodes/323-backbone-on-rails-part-1)和[#325 Backbone on Rails Part 2](http://railscasts.com/episodes/325-backbone-on-rails-part-2)，不幸的是它们在付费墙后面，但这笔钱是值得的。Ryan 使用[backbone-on-rails](https://github.com/meleyal/backbone-on-rails) gem 来促进 Backbone 与 Rails 的集成。

**建议在 Rails（主要在后端，有一点 Ajax，没有任何 Backbone）或**Backbone（主要在前端，仅使用 Rails 作为存储引擎）中进行整个 MVC 处理。如果您的应用程序主要由 Javascript 或 JQuery 调用组成，或者您想要进行实时 Web 应用程序和实时页面更新，则选择 Backbone 或类似的 MVC JS 框架（如[ember.js ）很有用。](http://emberjs.com/)由于不确定 MVC Javascript 框架在技术上是否真的成熟，如果您不相信 Backbone 可以处理您的所有需求，我建议您坚持使用纯 Rails。

通用架构的一个有趣想法是使用 JSON API 作为 Rails 后端和 JS MVC 前端之间的连接，这意味着后端可以将相同的 JSON 推送到网页，就像它推送到 iOS 和 Android 应用程序一样。

# c++ - 如何正确转换我的派生类？

> ID：11343415
> 
> 赞同：1
> 
> 时间：2012-07-05T11:30:13.423
> 
> 标签：c++, casting

我有一个基类 ( `car`) 和一个继承基类 ( `honda`) 的类：

```
class car
{
    virtual void polymorphic_class()
    {   }
};

class honda : public car
{   }; 
```

当我使用以下代码并将我的类转换为空指针时：

```
list<car> cars;
honda h;
cars.push_back(h);
honda* h_ptr = dynamic_cast<honda*>(&cars.back());
// h_ptr is NULL 
```

为什么？我必须如何正确地投射我的对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T11:31:54.767

这不起作用的原因是**对象切片**。里面的对象`cars`不再`honda`是 s，而只是汽车。

您需要一个指针或智能指针向量：

```
list<car*> cars;
honda h;
cars.push_back(&h);
honda* h_ptr = dynamic_cast<honda*>(cars.back()); 
```

我实际上会改变设计并使`car`抽象（纯虚拟析构函数或其他东西）。这样你也会得到一个编译错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T11:53:26.577

多态适用于指针和引用，而不适用于对象实例。

在这种情况下，您的列表包含 type 的对象`car`，而不是任何派生类型的对象。当您插入 a`honda`时，它将复制该`car`部分并忽略其余部分；这有时被称为*切片*。

对于多态性，您可以使用指针列表：

```
list<car*> cars {new honda};
honda * h_ptr = dynamic_cast<honda*>(cars.back()); // should be a valid pointer 
```

注意：如果您确实`new`像我的示例中那样使用分配，请记住`delete`它们，或者存储智能指针（如`std::unique_ptr<car>`）而不是原始指针。您还需要一个虚拟析构函数来使用基类指针删除对象。

您可以通过使基类*抽象*来避免切片问题；如果它包含纯虚函数，则不能实例化该类型的对象，只能实例化覆盖这些函数的派生类型：

```
class car
{
    virtual ~car() {}
    virtual void do_something() = 0;
};

class honda : public car
{
    void do_something() {}
}; 
```

如果您实际上并不想要一个抽象接口（例如，如果您只使用`dynamic_cast`而不是通过虚拟函数访问派生类功能），那么您可以将析构函数设为纯虚拟；那么派生类将不必显式覆盖任何内容。基类析构函数仍然必须实现，并且由于语言的一个怪癖，该实现必须在类定义之外：

```
class car
{
    virtual ~car() = 0;
};
inline car::~car() {}

class honda : public car {}; 
```

这是一种有点不寻常的方法，因为通过虚函数实现多态性通常更高效、更方便。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T11:33:22.413

尝试这个

```
list<car*> cars;
honda *h = new honda();
cars.push_back(h);
honda* h_ptr = dynamic_cast<honda*>(cars.back()); 
```

这行得通。

# node.js - node js elementtree required get 找不到模块'sax'

> ID：11343419
> 
> 赞同：1
> 
> 时间：2012-07-05T11:30:35.193
> 
> 标签：node.js, module

我正在尝试在我的节点 js 服务器中使用 elementtree，但是在服务器启动时会生成以下消息

`Cannot find module 'sax'`

我必须从 zip 安装 elementree，我做错了什么？

这些是我的要求陈述

`var cache = require('./node_modules/node-cache');`

`var elementTree = require('./node_modules/node-elementtree');`

这是我的文件夹结构

`module\node_modules\node-cache`

`module\node_modules\node-elementtree`

我的服务器 js 脚本位于`\module`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:58:00.993

问题是因为您没有使用 npm 来安装 node-elementtree 模块

[这](https://github.com/racker/node-elementtree/blob/master/package.json)是`package.json`节点元素树的。并且明确提到了对 sax 0.3.5 的依赖

```
"dependencies" : {
    "sax": "0.3.5"
  } 
```

如果你这样做了`npm install`，它将解决你的依赖约束。

在您的 node-elementtree 模块中，它[在这里](https://github.com/racker/node-elementtree/blob/master/lib/parsers/sax.js)使用 sax并且您的 require 没有解析为正确的模块。因此错误。如果您不能使用 npm，则尽可能使用 zip 安装 sax，但它可能会像上面一样再次增加您的依赖项列表。所以，尝试解决 npm 问题

你也不需要使用

```
var cache = require('./node_modules/node-cache');
var elementTree = require('./node_modules/node-elementtree'); 
```

在你的代码中

```
var cache = require('node-cache');
var elementTree = require('node-elementtree'); 
```

以上就可以了。Node 自动从 ./node_modules 目录甚至[更多](http://itsallabtamil.blogspot.in/2012/01/nodejs-modules-and-export-explained.html)地方定位模块

# spring - 延迟加载在 @Service 类中不起作用

> ID：11343427
> 
> 赞同：0
> 
> 时间：2012-07-05T11:30:55.687
> 
> 标签：spring, hibernate, jakarta-ee, lazy-loading, lazy-initialization

我正在使用**hibernate 3.5.1-Final**和**spring 3.0.5.RELEASE** 并且我正在为**OpenSessionInViewFilter**使用以下配置：

```
<filter>
    <filter-name>hibernateFilter</filter-name>
    <filter-class>org.springframework.orm.hibernate3.support.OpenSessionInViewFilter</filter-class>
    <init-param>
      <param-name>sessionFactoryBeanName</param-name>
      <param-value>sessionFactory</param-value>
    </init-param>
  </filter>
  <filter-mapping>
    <filter-name>hibernateFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>ERROR</dispatcher>
  </filter-mapping> 
```

假设我有以下**实体**：

```
@SuppressWarnings("serial")
@Entity
@Table(name = "adpage", catalog = "mydb")
public class Adpage implements java.io.Serializable {

    @Id
    @Column(name = "pkid", nullable = false, length = 50)
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(fetch = FetchType.EAGER)
    private long pageId;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "audio_file_id", unique = true, nullable = true)
    private AudioFile audioFile ;

} 
```

我的**支持bean**如下：

```
@Component("myBean")
@Scope("view")
public class MyBean {

    @Autowired
    private AdPageDao adPageDao;

    @Autowired
    private AdPageService adPageService;

     public void preRender() {
                adPageObj = adPageDao.getAdPageByID(adPageId);
    }

    public void deleteAdPage(Adpage adPage) {
        adPageService.deleteAdPage(adPage);
    }

} 
```

我的**服务**如下：

```
@Service
public class AdPageService {

    @Autowired
    private AudioFileDao audioFileDao;

    public void deleteAdPage(Adpage adPage) {

        if (adPage.getAudioFile() != null) {
            log.debug("deleting audio file: "
                    + adPage.getAudioFile().getName() + " for adpage: " // exception here
                    + adPage.getName());
            audioFileDao.deleteAudioFile(adPage.getAudiofileref());
            GeneralUtils.deleteFilePhysically(adPage.getAudioFile()
                    .getName();
        }

    }

} 
```

我的**xhtml**页面如下：

```
<f:event type="preRenderView" listener="#{myBean.preRender}" />
<ice:panelGrid columns="2">

                 <ice:outputLabel id="fileName">File Name:</ice:outputLabel>
                 <ice:outputText value="#{myBean.adPageObj.audioFile.originalName}"></ice:outputText>

                 <ice:outputLabel id="fileLength">File Length:</ice:outputLabel>
                 <ice:outputText value="#{myBean.adPageObj.audioFile.length}"></ice:outputText>

                 <ice:outputLabel id="fileDesc">Description:</ice:outputLabel>
                 <ice:outputText value="#{myBean.adPageObj.audioFile.description}"></ice:outputText>

               </ice:panelGrid> 
```

在 xhtml 页面中，延迟加载没有问题，并且文件数据显示正确，但是在删除文件时，我在删除服务方法中收到以下错误：`AdPageService.deleteAdPage`

```
Could not initialize proxy - no Session 
```

请告知如何解决此错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T15:08:17.467

If the `AdPage` object was loaded in your view (a previous Hibernate session due to the `OpenSessionInViewFilter`), then lazy-loading does not work because the entity is "detached" now.

To solve the lazy-loading problem you could do:

1.  [reattach the entity](https://stackoverflow.com/questions/912659/what-is-the-proper-way-to-re-attach-detached-objects-in-hibernate) to the current Hibernate session
2.  do an eager fetch before to ensure all attributes are loaded
3.  reload the entity by it's id (`pageId` here)

I'd go for option 3 (reload by it's id) to get a fresh entity (which could have changed while displaying / submitting the form).

# google-apps-script - 遇到的错误：TypeError：在对象通用中找不到函数 getValue

> ID：11343438
> 
> 赞同：3
> 
> 时间：2012-07-05T11:31:20.900
> 
> 标签：google-apps-script

我对 google-apps-script 很陌生。我遇到了这个错误“TypeError：在对象通用中找不到函数 getValue”，我不知道为什么。

这是代码：

```
function doGet(e) {

  var app = UiApp.createApplication();
  app.setTitle("My first application");

  var vPanel = app.createVerticalPanel();

  var hPanel3 = app.createHorizontalPanel();
  hPanel3.add(app.createLabel("Text"));
  var textArea = app.createTextArea().setId('theText').setName('theText');
  //textArea.setName("textArea");

  hPanel3.add(textArea);
  vPanel.add(hPanel3);

  var hPanel4 = app.createHorizontalPanel();
  var button = app.createButton("Save");
  var handler = app.createServerHandler('onClick');
  handler.addCallbackElement(textArea);
  button.addClickHandler(handler);
  hPanel4.add(button);
  vPanel.add(hPanel4);

  var label = app.createLabel().setId('label').setText('tata');
  //label.setName("label");

  var hPanel5 = app.createHorizontalPanel();
  hPanel5.add(label);
  vPanel.add(hPanel5);

  app.add(vPanel);

  return app;

}

function onClick(e) {
  var app = UiApp.getActiveApplication();
  // ERROR occurs here when the button is clicked
  var text = app.getElementById('theText').getValue();

  Logger.log(text);

  app.getElementById('label').setValue(e.parameter.textArea + ' toto');
  //label.setText(textArea.getValue());

  return app;
} 
```

我已经更改了 textArea 的名称和 ID，但没有任何效果。

谢谢你的帮助！

中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T11:57:39.767

[TextArea](https://developers.google.com/apps-script/class_textarea)类没有`getValue`方法。它的值作为参数传递给处理程序。这是一个演示它如何工作的示例。

```
function doGet(e) {
   var app = UiApp.createApplication();
   var panel = app.createFlexTable();
   panel.setWidth('100%');
   var btn = app.createButton().setId('btn').setText('Click Me');
   var textArea = app.createTextArea().setName('textArea').setValue('Text');
   var handler = app.createServerHandler('onBtnClick');
   handler.addCallbackElement(panel);
   btn.addClickHandler(handler);   
   panel.setWidget(0, 0, btn);
   panel.setWidget(1, 0, textArea);
   app.add(panel);
   return app;
}

function onBtnClick(e) {
  var app = UiApp.getActiveApplication();
  var btn = app.getElementById('btn');
  var textAreaValue = e.parameter.textArea;
  btn.setText(textAreaValue);
  return app;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T11:46:29.440

改变

```
var text = app.getElementById('theText').getValue(); 
```

经过

```
var text = e.parameter.theText; 
```

e 是您的表单值
，您使用 setName 固定的名称来选择要在变量中获取的 e 参数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T11:57:33.813

如果您参考[textArea 的文档](https://developers.google.com/apps-script/class_textarea)，则没有`getValue()`textArea 这样的方法。正如卡特曼回答的那样，您可以通过使用textArea**名称**作为参数的 callbackElement 获取值（ID 不是必需的，除非您想`setValue()`使用其他东西）

# iphone - 如何检查 NSLog 输出？

> ID：11343447
> 
> 赞同：3
> 
> 时间：2012-07-05T11:31:49.360
> 
> 标签：iphone, objective-c, ios, nslog

我想检查`NSLog()`一些字符串是否真的打印了一些东西。

有没有办法可以检查`NSLog`语句输出的长度或从中创建字符串？这是一个概念证明，而不是一个实际的解决方案，因此可以将最佳实践问题放在一边。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:41:10.387

Try checking the length:

```
NSLog(@"%i",[string length]);

int len = [myString length];
if(len == 0){
   NSLog(@"String is empty");
}
else{
  NSLog(@"String is : %@", myString);
} 
```

* * *

If you want to check whether the string is null or not then try:

```
if ((NSNull *)string != [NSNull null]){

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:57:20.080

您可能希望将`NSLog()`输出重定向到文件。看看“[将 NSLog 重定向到标准输出？](http://lists.apple.com/archives/cocoa-dev/2010/Jun/msg01161.html) ”。

这只会影响`NSLog()`来自您的应用程序的调用。

```
int fd = creat ("/Users/parag/Desktop/my_log", S_IRUSR | S_IWUSR | S_IRGRP |
S_IROTH);
close (STDERR_FILENO);
dup (fd);
close (fd);
NSLog(@"this will be written to my_log"); 
// Now you can retrieve it back from the my_log as a proof of concept 
```

# c# - JSON到c# webmethod使用jQuery，传递数据表

> ID：11343449
> 
> 赞同：0
> 
> 时间：2012-07-05T11:31:53.053
> 
> 标签：c#, ajax, json, webmethod

我已经有一些接收 1 或 2 个参数的 webmethod 成功运行。我想要做的是发送一个 json 字符串，该字符串可以反序列化为具有多行的数据表。

该字符串类似于： [{"sectionID":12,"order":0},{"sectionID":21,"order":10},{"sectionID":20,"order":20}, {"sectionID":22,"order":30},{"sectionID":23,"order":40},{"sectionID":24,"order":50},{"sectionID":25,"订单":60}]

我试图将它作为值传递，但这没有用。数据：{'jsonString:','[{"sectionID":12,"order":0},{"sectionID":21,"order":10},{"sectionID":20,"order":20 },{"sectionID":22,"order":30},{"sectionID":23,"order":40},{"sectionID":24,"order":50},{"sectionID":25 "订单":60}]'}

我收到关于传入的无效对象的错误。然后我尝试了这种类型的方法声明，正如我在某处看到的那样：public static void updateSectionPositions(List sectionList) 其中 SectionPosition 是一个具有 sectionID 和 order 的 2 个属性的类。这给了我同样的错误。

有任何想法吗？最终目标是让这个 json 字符串成为我可以在 c# 端遍历的数据表。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:36:08.247

将其作为字符串传递给 webmethod。

使用[服务器端 Json 库](http://json.codeplex.com/)将该字符串反序列化为对象。

您应该能够从那里填充数据表。

# java - 遍历嵌套标记名 - 使用 webDriver 的 selenium 自动化

> ID：11343454
> 
> 赞同：0
> 
> 时间：2012-07-05T11:32:02.350
> 
> 标签：java, selenium, selenium-ide, ui-automation, selenium-firefoxdriver

朋友们，

我有一种情况，我需要单击下拉列表并选择显示的任何值。下拉列表由以下代码段标识

```
<select id="order_unit_line_rate_806782_is_addenda_enabled" class="selects_for_487886" onchange="select_addendum(806782, this);dateShowMemory(this.options[this.selectedIndex].value, '806782');" uniqueattr="Dynamic Site Accelerator / Dynamic Site Accelerator / Additional Usage Commitment / drop down" name="order_unit_line_rate[806782][is_addenda_enabled]">
    <option value="0" uniqueattr="Dynamic Site Accelerator / Dynamic Site Accelerator / Additional Usage Commitment / Fee"> Fee </option>
    <option value="1" uniqueattr="Dynamic Site Accelerator / Dynamic Site Accelerator / Additional Usage Commitment / See Attached Addendum"> See Attached Addendum </option> 
```

其中**“选择”和“选项”标签位于嵌套层次结构**中。我可以单击下拉列表并通过这样做来显示项目

```
List<WebElement> dropDownLists = driver.findElements(By.tagName("select"));
for (WebElement l : dropDownLists) { 
    if (l.getAttribute("uniqueattr").equalsIgnoreCase("Dynamic Site Accelerator / Dynamic Site Accelerator / Additional Usage Commitment / drop down")) {
              l.click();
    } // end if
} // end for 
```

但是我无法进一步遍历以单击下拉列表中的选项:(。

这是我尝试过的，但不起作用

```
List<WebElement> newList = driver.findElements(By.tagName("option"));
for (WebElement ll : newList) {
    if (ll.getAttribute("uniqueattr").equalsIgnoreCase("Dynamic Site Accelerator / Dynamic Site Accelerator / Additional Usage Commitment / Straight Line Commitment")) {
        ll.click();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:12:23.183

Thats what the [Select](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/Select.html) is for..

do something like:

```
 Select dropDown = new Select(dropDownElement);
    for (WebElement option : dropDown .getOptions()){
        if(!option.isSelected()){
            option.click();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:44:22.170

检索您要点击的选项的标签、索引或值，如下所示

```
List<WebElement> dropDownLists = driver.findElements(By.tagName("select"));
for (WebElement l : dropDownLists) 
{ 
    List<WebElement> newList = l.findElements(By.tagName("option"));
    for (WebElement ll : newList) 
    {
            if (ll.getAttribute("uniqueattr").equalsIgnoreCase("Dynamic Site Accelerator / Dynamic Site Accelerator / Additional Usage Commitment / Straight Line Commitment")) 
            {
                SelectElement select = new SelectElement(l);
                select.SelectByValue(ll.getAttribute("value"));
            }
    }
} 
```

# android - android- 将两个以编程方式创建的 imageView 在 RelativeLayout 中彼此相邻放置

> ID：11343455
> 
> 赞同：0
> 
> 时间：2012-07-05T11:32:03.017
> 
> 标签：android, android-relativelayout, layoutparams

我已经创建了两个图像视图，如下所示：

```
 public void createImageViews(Integer count){

    ImageView[] imageViewArray = new ImageView[count];

    for (int i = 0; i < count; i++ ) {
        imageViewArray[i] = new ImageView(getBaseContext());
        imageViewArray[i].setId(i); // unique property for every imageView

        if(i==0){
            RelativeLayout.LayoutParams params =  new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,RelativeLayout.LayoutParams.WRAP_CONTENT);

            params.addRule(RelativeLayout.ALIGN_PARENT_TOP);
            params.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
            imageViewArray[i].setLayoutParams(params);
            imageViewArray[i].setBackgroundResource(imagesForIv[i]);
            _UIRLParent.addView(imageViewArray[i]);
            Log.v("first", "first"+i);
        }
        else if(i < 3){

            RelativeLayout.LayoutParams params =  new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
            params.addRule(RelativeLayout.RIGHT_OF,imageViewArray[i].getId());
            imageViewArray[i].setBackgroundResource(imagesForIv[i]);
            _UIRLParent.addView(imageViewArray[i],params);
            Log.v("second", "second"+i);
        }

    } 
```

我只需要将第二个 imageView 放在第一个 imageView 的 RightOf 上。有人能帮我吗。这占用了我很多时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:34:45.530

试试[https://stackoverflow.com/a/5191159/1436931](https://stackoverflow.com/a/5191159/1436931)

您使用了错误的索引值。

在线

`params.addRule(RelativeLayout.RIGHT_OF,imageViewArray[i].getId());`

您将当前图像右对齐当前图像。:)

您需要跟踪最后一个 imageView id 的索引，即左图像视图

你需要这样的东西

`params.addRule(RelativeLayout.RIGHT_OF,imageViewArray[i-1].getId());`

# c - 如何在C中加密头文件

> ID：11343460
> 
> 赞同：-5
> 
> 时间：2012-07-05T11:32:18.293
> 
> 标签：c

我们需要一种加密 C 源代码的好方法。我们需要另一个头文件（Codevision 或 Winavr 编译器）不可读。

例如，我驱动了一个用于发送和接收短信的 GSM 模块……但我不需要任何人访问我的源，只能使用它们……有没有解决这个问题的方法？

如何制作编译后的头文件？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:45:09.073

当然，您可以使用任何好的加密工具来加密您的源代码。
**但显然你不能再编译它了......**

但也许图书馆可以帮助你。
您可以构建一个包含您的 GSM 内容的库。

然后您和其他人可以从库中调用函数，您必须分发的唯一文件是声明所在的 *.h 文件。

# python - App Engine，Python：发送邮件功能

> ID：11343462
> 
> 赞同：3
> 
> 时间：2012-07-05T11:32:20.560
> 
> 标签：python, google-app-engine, sendmail

我正在使用`mail.send_mail()`从一个地址向另一个地址发送电子邮件。

当我在本地主机上运行我的应用程序时，我在我的日志中查看，它说：

> 您目前没有发送真正的电子邮件。如果您安装了 sendmail，您可以通过使用带有 --enable_sendmail 的服务器来使用它

那么，这是否意味着我必须为我的服务器启用发送邮件功能。如果是真的，如何启用？

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T14:41:33.243

Windows 通常没有安装 sendmail。您最好使用 --smtp_host 和 --smtp_port 选项来配置您的开发服务器。请注意，这些选项仅在开发中需要 - 一旦上传，发送邮件就会自动工作。

更多信息请访问： [https ://developers.google.com/appengine/docs/python/tools/devserver#Using_Mail](https://developers.google.com/appengine/docs/python/tools/devserver#Using_Mail)

如果您的 ISP 或您的雇主没有提供给您的 SMTP 服务器，您可以使用 gmail。设置列在： http: [//support.google.com/mail/bin/answer.py ?hl=en&answer=13287](http://support.google.com/mail/bin/answer.py?hl=en&answer=13287)

要将标志添加到 App Engine 启动器，只需双击您的实例并使用该`Extra Flags`字段。 ![在此处输入图像描述](../Images/2222b4def02ef5b774ea8a0dd1da8339.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:06:47.683

是的，您必须启用它，否则您只会看到已注销的邮件。

请参阅[https://developers.google.com/appengine/docs/python/tools/devserver#Using_Mail](https://developers.google.com/appengine/docs/python/tools/devserver#Using_Mail)

# c++ - 确定指向抽象类的指针设置为哪个派生类

> ID：11343464
> 
> 赞同：0
> 
> 时间：2012-07-05T11:32:29.403
> 
> 标签：c++, class, abstract-class, derived-class

我不确定我是否像我喜欢的那样表达了我的问题，但我会举一个例子来澄清问题。

这是代码：

```
class Shape;
class Circle;
class Triangle;

class Shape
{
    Shape(void);
    ~Shape(void);

    virtual void DrawShape(void) = 0;
}

class Circle : public Shape
{
    /* .... constructor/destructor defined normally .... */
    bool TestIntersection(Triangle* _triangle);
    bool TestIntersection(Circle* _circle);
    void DrawShape(void);
}

/* main.cpp */

...
Shape* shape;
Shape* circle = new Circle;

if(a == 0)
{
    shape = new Circle;
}
else
{
    shape = new Triangle;
}

circle->TestIntersection(shape); 
```

我得到的错误是没有可接受的从 Shape* 到 Circle* 或 Triangle* 的转换。

为什么会这样？或者我是否需要一种方法来确定已将哪个派生类设置为抽象类指针？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T11:33:59.107

你需要的基本上是这样的：

*   [访客模式](http://en.wikipedia.org/wiki/Visitor_pattern)

我注意到您*没有*从`Shape`. 也解决这个问题。也就是说，`Triangle`并且`Circle`应该派生自`Shape`。之后，阅读访问者模式、它的各种实现和用法。这将帮助您解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:35:00.177

您的`Circle`班级似乎没有继承自`Shape`：

尝试这个：

```
class Circle : Shape
{

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T11:35:17.290

发生这种情况是因为您实际上并未从 Shape 派生。

```
class Circle: public Shape {
...
}; 
```

# php - 在 PHP 中使用 pathinfo 的未定义路径扩展

> ID：11343465
> 
> 赞同：3
> 
> 时间：2012-07-05T11:32:29.957
> 
> 标签：php, undefined

如果我想使用 pathinfo 函数获取 URL 的扩展名，我这样做：

```
<?php
 $path_parts = pathinfo($url);
 echo $path_parts["extension"];
?> 
```

令我惊讶的是 Apache 显示以下通知：

```
Notice: Undefined index: extension in ... 
```

我该如何处理？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T11:46:33.303

如果您只想获得扩展名，请使用：

```
$extension = pathinfo($url, PATHINFO_EXTENSION);
echo $extension; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T11:43:37.620

```
function getExtension($url)
{
  $url = explode('.',$url);
  return $url[count($url)-1];
} 
```

您可以使用此手动功能来检索它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-04T11:05:22.693

I'm a bit late to the party but you'd get an undefined index while doing an `echo $path_parts["extension"]` if the target is a directory.

# iphone - 方法参考

> ID：11343468
> 
> 赞同：1
> 
> 时间：2012-07-05T11:32:44.547
> 
> 标签：iphone, ios, ipad, ios5, methods

我正在为 IOS 开发一个库，它在某些时候需要`NSArray`从各种类创建一个方法引用。到某个会在某个时候调用它们的单个类。

任何想法如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T11:39:44.843

You have some options. You can use `NSStrings` to actually have the name of your methods and then just do:

```
NSString *myMethodName = @"hellWorld";
SEL selector = selectorFromString(myMethodName); 
```

You can then add your selector to your `NSArray`.

You can also use `NSInvocations` and store the methods and define the target later:

> An NSInvocation object contains all the elements of an Objective-C message: a target, a selector, arguments, and the return value. Each of these elements can be set directly, and the return value is set automatically when the NSInvocation object is dispatched.

From [Apple Documentation](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsinvocation_Class/Reference/Reference.html).

**Edit 1 (for the fun of it):**

```
- (Method *)getMethodsPointer{
    unsigned int number = 0;

    Method *myMethods = class_copyMethodList([self class], &number);

    //for(int i=0;i<number;i++)
    // {
    //    printf("%s",sel_getName(method_getName(myMethods[i])));
    //}
    return myMethods;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T11:35:33.303

您可以将选择器添加到您的`array`. 您可以像这样创建一个选择器：

`-(void)myMethod:(int)something`

`SEL selectorToMyMethod = @selector(myMethod:);`

希望有帮助，加油！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-05T11:40:50.757

You could create some NSInvocations, store the Selectors and the target classes in it, and add the NSInvocation to the Array.

Storing the selectors only is possible, but only if the methods are in one class only - because Selectors are independant from their class.

# javascript - EXT JS中是否有全局变量

> ID：11343469
> 
> 赞同：8
> 
> 时间：2012-07-05T11:32:46.403
> 
> 标签：javascript, extjs, extjs4, extjs4.1

在 java 和 C++ 中，我们可以全局存储一个变量并从项目中的任何位置访问它的值。说，我在一个名为的类`Residence`中，我将`residenceNumber`它保存`INT`到一个名为的全局变量`houseNumberGlobalVariable`中。

现在，我可以 `houseNumberGlobalVariable`从项目中的任何类访问。以类似的方式，是否有一个`EXTJS`我可以使用的全局变量。

我需要从一个类设置一个值并从另一个类访问它。EXT JS 中的等价物是什么。我认为 EXTJS 中没有全局变量的概念，但它的等价物是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-05T11:43:00.287

创建一个特殊的类并将所有`global`变量放在那里。

```
Ext.define('MyApp.global.Vars', {
    singleton: true,
    ....   
    houseNumberGlobalVariable: undefined

}); 
```

这样，如果您需要在代码中的任何位置访问它，只需使用`MyApp.global.Vars.houseNumberGlobalVariable`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T15:26:50.163

只需在`app.js`其中声明一个变量即可充当全局变量。

```
var globalVar; 
```

你可以添加任何东西

```
globalVar.myStore = yourStore; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-12T07:44:16.513

根据您的应用程序，您可以声明您的全局变量。

**场景1：在配置中声明**

如果您要使用 getter/setter 方法（即经常更改变量，然后选择基于配置）

*声明 Appconstants*

```
Ext.define('Practice.utilities.AppConstants', {
    alias: 'widget.AppConstants',
    config: {
        mainVarTest: 'mainVarTest',
    },
    testvar: 'Testing value',
    foo: 'bar',
    meh: 42,
    constructor: function(options) {
        this.initConfig(options);
    }
}); 
```

*调用变量*

```
var AppConstants = Ext.widget("AppConstants"); 
console.log(AppConstants.getMainVarTest()); 
```

* * *

**场景 2：在 Singleton 类中声明**

如果您的应用程序需要全局变量，但在应用程序内部不会再更改。此类有助于仅加载一次常量变量。（即你不会改变变量）。此类型适合您的应用

*声明*

```
Ext.define('Practice.utilities.AppConstants', {
    alias: 'widget.AppConstants',
    singleton: true,
    testvar: 'Testing value',
    foo: 'bar',
    meh: 42,
}); 
```

*打电话*

```
var AppConstant=Practice.utilities.AppConstants;
console.log(AppConstant.foo); 
```

* * *

**场景 3：声明为静态**

Statics 是静态变量（与 java 完全相同）。使用静态变量的优点是变量的生命周期是无限长的，直到明确清除。

```
Ext.define("Practice.utilities.AppConstants", {
     statics: {
         mainVarTest: 'mainVarTest'
     },
 }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-21T18:02:08.020

我注意到这里缺少的一件事是 Sencha Architect 程序中关于如何创建全局变量的解决方案。

转到项目检查器上的“应用程序”节点。接下来单击配置搜索/过滤框，这不仅用于搜索，还用于创建配置条目。当你第一次看到这个框时，它会有一个 Smokey 预填充的文本`Filter Configs...`。

输入您的全局变量名称，您会注意到在下面的列表中没有找到任何内容**（如果在配置列表中找到该值，那么您已经有了这个变量或您使用了关键字）**。文本框和锁定图标的右侧是一个“添加”按钮。单击“添加”按钮将全局变量添加到应用程序中。

所以假设我们`Foo`此时已经创建了变量。您现在将在配置列表中看到一个条目。该条目的左侧是一个省略号按钮，这当前指定我们创建的新变量是一个字符串。单击按钮并将其更改为不同的内容，例如“数字”字段。为这个新变量输入一个值，你现在完成了，你有一个全局变量。

那么如何访问这个新创建的变量呢？这是将全局变量填充到要使用的局部变量中的示例代码。

```
var bar= MyApp.app.Foo; 
```

“MyApp”引用是`name`您正在创建的应用程序的应用程序配置设置。您可以通过过滤在 Application 节点的配置设置中找到相同的值`name`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-27T19:43:46.947

var globalVar = {}; 添加你的 app.js 文件，它工作正常

# iphone - 为了在 ios 中显示地图，我们应该使用 ArcGIS API 还是 Google Map API？

> ID：11343475
> 
> 赞同：2
> 
> 时间：2012-07-05T11:33:35.373
> 
> 标签：iphone, ios, ipad, google-maps, arcgis

ArcGIS/Google Map APIS 的优缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:35:01.167

我会使用 Google Maps APIS，因为这是执行此操作的标准方式。您将获得更多文档和更多示例来帮助您。但是随着 iOS 6 的发布，如果我是你，我会等待查看新的“好东西”。:)

# css - 不使用 JavaScript 删除 CSS 属性

> ID：11343478
> 
> 赞同：1
> 
> 时间：2012-07-05T11:33:38.430
> 
> 标签：css, twitter-bootstrap

我正在使用具有以下功能的 Bootstrap CSS 框架：

```
.dropdown-menu {
  left: 0;
} 
```

但我想要这个：

```
.dropdown-menu {
  right: 0;
} 
```

即我想删除一个属性并将其替换为另一个属性 - 我无法使用级联使其工作。即这不起作用：

```
.dropdown-menu {
    left: 0;
    left: none;
    right: 0;
} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:35:00.037

要摆脱以前的`left`值，请将其设置为`auto`. 为确保它真正覆盖您可能还需要的旧版本`!important`（取决于使用的选择器的特殊性，以及定义的顺序 - 但添加它不会造成伤害）

```
.dropdown-menu {
    left: auto !important;
    right: 0;
} 
```

# in-memory-database - 实时或内存数据库

> ID：11343483
> 
> 赞同：3
> 
> 时间：2012-07-05T11:33:53.857
> 
> 标签：in-memory-database, kdb, real-time-data

实时数据库和内存数据库之间有什么区别，还是一样？

此外，kdb+ 提供对实时/历史数据的快速时间序列分析；但是 kdb+ 是真正的时间序列数据库（如 Opentsdb）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:58:18.850

是的，实时数据库是一个内存数据库，所以它是一样的。Kdb 特别适用于时间序列，因为数据是按时间顺序排列的，并且可以处理高频数据。

您可以在 kdb 之上运行强大的分析。我现在实际上正在使用 kdb 来实现与 Opentsdb 完全相同的目的；从外汇交易中的不同系统收集不相交的物理测量值，用于创建时间序列和统计分析。

# c# - 使用与带有集合的 LINQ 的等效 SQL IN 函数

> ID：11343488
> 
> 赞同：2
> 
> 时间：2012-07-05T11:34:03.130
> 
> 标签：c#, .net, linq, linq-to-sql

如何在 LINQ 中翻译以下内容？

```
SELECT DISTINCT w.Worker_ID, w.Surname, w.FirstName, ps.JobNumber
FROM Worker w, ProjectSignatory ps
where w.Worker_ID = ps.Worker_ID
and ps.JobNumber 
IN 
    (SELECT DISTINCT pa.JobNumber
    FROM Worker w, PAAFRegister pa
    where w.Worker_ID = pa.Worker_ID
    and w.Worker_ID = @UserX) 
```

我看过一些帖子表明 .Contains 函数是一个好主意，但是，由于我正在查看一组结果，然后根据我在其他响应中看到的结果，当人们调用 .Contains 时，LINQ 不喜欢它收藏。

我试图从整体上了解 LINQ 的工作原理。我比较缺乏经验。任何建议将不胜感激。

编辑：我已经看到了一些方法，我想知道以下是否是一个好的开始，或者使用连接的 linge 查询是否最好？

```
var sig = from w in db.Workers
          join ps in db.ProjectSignatories
              on w.Worker_ID equals ps.Worker_ID
          select ps;

var paaf = from w in db.Workers
           join pa in db.PAAFRegisters
               on w.Worker_ID equals pa.Worker_ID
           where w.Worker_ID == workerID
           select w; 
```

我知道这是不完整的，对我试图实现的目标没有任何意义或毫无意义。这只是基于我以前看过的帖子的一个例子，我想知道这种方法是否合适。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T11:39:21.217

You're looking for the `.Contains()` function.

1.  First build up the inner filter set section of the query.

    E.G.: The part that goes in the `.Contains()` (in SQL terms the "`ps.JobNumber IN (...)`" )

2.  Filter your query by the new data subset by using the `.Contains` function.

**Example:**

C# SQL-like syntax:

```
var subSet = select JobNumber 
               from Workers 
              where Worker_ID == "UserX";

var result = select JobNumber 
               from Workers 
              where subSet.Contains(jobnumber); 
```

LINQ chaining:

```
var subSet = Workers.Where(o => o.Worker_ID == "UserX")
                    .Select(o => o.JobNumber)
                    .Distinct();

var result = Workers.Where(o => subSet.Contains(o.JobNumber)).ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T11:41:13.980

You can create subselect's in LINQ.

```
var jobNumbers = select JobNumber from Workers where <your criteria, joins>
var myResult = select JobNumber from Workers where <your criteria, joins> and jobNumbers.Contains(JobNumber) 
```

# javascript - 如何在填充有 Json 数据的淘汰视图模型中定义函数

> ID：11343494
> 
> 赞同：2
> 
> 时间：2012-07-05T11:34:39.623
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin

我在视图模型中定义函数时遇到问题。

我通过 jquery getJSON 获取 json 数据并将这些数据映射到我的视图模型。

```
$.getJSON('/Company/GetCompanies', function(data) { 
    var viewModel = new CompanyViewModel()
    viewModel.model = ko.mapping.fromJS(data)
    ko.applyBindings(viewModel)
}); 
```

下面是我的视图模型。如您所见，我想要做的是，通过调用的函数返回 viewmodel 的属性之一`companyName`

```
var CompanyViewModel = function() {
    var self = this;

    self.companyName = function()
         return model.CompanyName; 
    };
} 
```

然后我想使用这个函数，`<span data-bind="text: companyName" />`但是，JavaScript 函数不会被评估并作为文本返回。

我浏览了网络上的 Knockout 示例，但它们都使用了计算的 observables。

有没有办法做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T18:54:54.707

尝试这个：

```
var CompanyViewModel = function(data) {
    ko.mapping.fromJS(data, {}, this); 
};

CompanyViewModel.prototype.fileTaxes = function() {
    console.log("Company is filing taxes.");
};

$.getJSON('/Company/GetCompanies', function(data) { 

    // data would look something like this: 
    // data: { companyName : "MicroStrategy",
    //         founderName : "etc" }
    var viewModel = new CompanyViewModel(data);
    ko.applyBindings(viewModel)
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T15:16:18.690

我做了一些测试，这对我有用：

`return self.model()[0].CompanyName;`

并调用它：`data-bind="text: companyName()"`

**编辑：**

```
 var CompanyViewModel = function() {
            var self = this;

            self.companyName = function(){

                 return self.model()[0].CompanyName; 
            };
        }

        $.getJSON('/Company/GetCompanies', function(data) { 
            var viewModel = new CompanyViewModel();
            viewModel.model = ko.mapping.fromJS(data);
            ko.applyBindings(viewModel);
        }); 
```

假设您的 JSON 数据以如下格式返回，则此方法有效：

```
[{"CompanyName":"Stack","SomeOtherField":"SomeOtherValue"},...]; 
```

而且你里面只有一家公司。

# .net - selectedindexchanged 事件未在单选按钮列表上触发

> ID：11343496
> 
> 赞同：0
> 
> 时间：2012-07-05T11:34:43.600
> 
> 标签：.net, selectedindexchanged

我在单选按钮列表上应用 onselectedindexchangedevent 但是当我单击单选按钮时
，单选按钮没有选择移动，它选择，然后
取消选择。我还设置了 postback=true。但它没有触发..

```
**.aspx** 

      <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false">
                    <Columns>
                    <asp:TemplateField>
                    <ItemTemplate>
                        <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
                        <asp:RadioButtonList ID="RadioButtonList1" runat="server"   
    AutoPostBack="true"RepeatDirection="Horizontal"OnSelectedIndexChanged="clicked"> 

                    <asp:ListItem Value="agree" Selected="True" ></asp:ListItem>
                       <asp:ListItem Value="agree"></asp:ListItem>
                        </asp:RadioButtonList>

                    </ItemTemplate>

                    </asp:TemplateField>

                    </Columns>
                    </asp:GridView>

    **.aspx.cs**

     public void clicked(object sender, EventArgs arg)
        {

            test t = new test();
            questiondal d = new questiondal();

            GridViewRow row= (( RadioButtonList  )sender).NamingContainer as GridViewRow;
      RadioButtonList list= (RadioButtonList )row.FindControl("Radio");
    list.SelectedIndexChanged();
     Label4.Text= list.SelectedValue;

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:33:57.253

确保在回发发生时您的 gridview 没有重新加载。确保您的代码是这样的：

```
protected void Page_Load(object sender, EventArgs e)
{
    If(!IsPostBack)
    {
       GridView1.DataSource = dataTable;
       GridView1.DataBind();
    }
} 
```

当触发单选按钮事件时，再次触发 Page_Load 事件，但网格不会刷新并且 Clicked 方法将触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:11:47.137

Try change your code:

```
RadioButtonList list= (RadioButtonList )row.FindControl("Radio"); 
```

To:

```
RadioButtonList list= (RadioButtonList )row.FindControl("RadioButtonList1"); 
```

As there is no control in your gridview named 'Radio'. Hope this will solve your problem.

# android - 在尺寸不变的子视图中强制 onLayout

> ID：11343500
> 
> 赞同：6
> 
> 时间：2012-07-05T11:34:53.610
> 
> 标签：android, android-layout, viewgroup

我有一个自定义`ViewGroup`，里面有一些视图。

为了响应一个事件，一个 requestLayout 被调用并且在`OnLayout`一些视图中将获得一个新的布局位置。

其中一个保持其位置，但需要在内部重新排列。但是，不会调用此视图的 onlayout 方法，因为它的布局位置不会改变。尝试调用`requestLayout`，`forceLayout`或`invalidate`在此视图中不起作用。

我发现的唯一肮脏的技巧是更改其一些值位置以强制更改布局，但我认为应该有更好的方法。所以，现在我做了一些（可怕的）事情，比如：

```
 int patch = 0;
    @Override protected void onLayout(boolean changed, int l, int t, int r, int b) {
        ...
        _myView.patchedLayout(patch);
        _myview.layout(l1, t1 , r1, t1+patch);
        patch = (patch+1) % 2;
        ...
    } 
```

有什么方法可以以更好的方式获得相同的结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T16:37:11.167

我终于得到了解决方案：我需要覆盖`onMeasure`并确保`mesure`在我的视图中调用：

```
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    ...
    _myview.measure(widthMeasureSpec, heightMeasureSpec);
    ... 
```

它将在视图的私有字段 mPrivateFlags 中设置 LAYOUT_REQUIRED 标志，因此它将强制调用`onLayout`

# php - 将 mysql 值显示为类别和项目

> ID：11343510
> 
> 赞同：-1
> 
> 时间：2012-07-05T11:35:18.570
> 
> 标签：php, mysql, codeigniter

我的 mysql 数据库中有以下两个表。

表名：组

```
 id    group_name
 1     Garments
 2     Computer Accessories 
 3     Food 
```

表名：账户

```
 id     group_id    account_name
 1         1        T-shirt
 2         1        Jeans
 3         2        Motherboard
 4         2        Mouse 
```

我要显示的内容如下：

```
Garments 
      T-Shirt
       Jeans
Computer Accessories
       Motherboard
       Mouse
Food 
```

我尝试了以下查询，但无法像上面那样输出

```
 SELECT group_name,accounts.account_name,accounts.id FROM `groups`
 LEFT JOIN accounts ON accounts.group_id=groups.id 
```

如果我运行查询，它会显示如下：

```
 Garments                T-Shirt
  Garments                Jeans
  Computer Accessories    Motherboard
  Computer Accessories    Mouse
  Food                    NULL 
```

你能告诉我如何像我上面提到的那样显示输出吗？仅供参考，我正在使用 Codeigniter。

提前非常感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:41:16.887

这是用于此目的的查询

```
select
  group_name as Group_name,
  group_concat(account_name) as Accounts
from garments
  left join account
    on account.group_id = garments.id
group by garments.group_name 
```

使用组连接。这将显示此结果，然后您可以在 php 端展开帐户

```
Group_name              Accounts
Computer Accessories    Motherboard,Mouse
Food                    (NULL)
Garments                T-shirt,Jeans 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:41:34.453

```
$categories = mysql_query('select * from groups');
while($category = mysql_fetch_array($categories))
{
   $ID = $category['id'];
   $category_name = $category['group_name'];
   echo $category_name;

   $accounts = mysql_query("select * from account where group_id = $ID");
   while($account = mysql_fetch_array($accounts))
   {
      $account_name = $account['account_name'];
      echo 'TAB TAB TAB '.$account_name;
   }
} 
```

您可以将 Cateogory_name 和 account_name 放入他们的容器中，并使输出更好。

# android - 如何减少列表视图中两个文本之间的距离？

> ID：11343515
> 
> 赞同：0
> 
> 时间：2012-07-05T11:36:04.057
> 
> 标签：android, listview, textview, distance

嗨，我是新加入这个项目的。请问如何减少listview文本查看距离...

xml代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/thumb"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="3dip"
        android:layout_alignParentLeft="true"
        android:layout_marginRight="5dip">

        <ImageView
            android:id="@+id/img"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>
    </LinearLayout>

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/thumb"
        android:layout_toRightOf="@+id/thumb"
        android:layout_centerVertical="true"
        android:layout_marginTop="1000dip"
        android:textColor="#ffffff"/>

    <TextView
        android:id="@+id/detail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@+id/thumb"     
        android:layout_alignParentBottom="true"
         android:textColor="#ffffff" />

    <ImageView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/imgArrow"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"/>  

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:42:32.900

您已将 android:layout_alignParentBottom="true" 赋予以下文本。因此它将自己设置为布局的底部。要么将其删除并将marginTop 赋予此文本，要么将marginTop 赋予上述文本。这是唯一的问题，看它。

将此 XML 用作列表视图的 list_item 并在需要时进行更改

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <LinearLayout 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical">

        <ImageView 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/ic_launcher"/>
    </LinearLayout>

    <LinearLayout 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:layout_marginTop="5dp">

        <TextView 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="aaaaaaaaaaaaaaaaa"/>
        <TextView 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="bbbbbbbbbbbbbbb"/>
    </LinearLayout>

</LinearLayout> 
```

我不知道这是否是你唯一的要求，尽管我试图缩短他们之间的距离。试试吧，希望这会对你有所帮助。

# javascript - 如何在 java 脚本中使用正则表达式验证文本？

> ID：11343517
> 
> 赞同：0
> 
> 时间：2012-07-05T11:36:05.017
> 
> 标签：javascript, regex

我有一个正则表达式来验证日期，它工作正常，就是这样

```
^(0[1-9]|[1-9]|1[012])[- /.](0[1-9]|[1-9]|[12][0-9]|3[01])[- /.](19|20)\d\d$ 
```

但我想使用 javascript 验证它。我试过这个

```
var  ck_effectivedate= /^(0[1-9]|[1-9]|1[012])[- /.](0[1-9]|[1-9]|[12][0-9]|3[01])[- /.](19|20)\d\d$/;

function radtxtbxNewEffectiveDateOnBlur(sender, eventArgs) {

  if (!ck_effectivedate.test(sender.get_value())) {
    alert('matches');
   }
   else
   {
     alert('does not match');
   }

} 
```

但是，正则表达式不起作用，因为`/`我的正则表达式中存在字符，该字符也用于将正则表达式封装在 java 脚本中。

如果我删除该`/`字符，那么它可以工作，但我想在我的字符串中使用它。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T11:38:02.610

您只需要使用反斜杠转义特殊字符`\`：

```
^(0[1-9]|[1-9]|1[012])[- \/.](0[1-9]|[1-9]|[12][0-9]|3[01])[- \/.](19|20)\d\d$ 
```

参考：

*   [JavaScript 正则表达式](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)。

# iphone - 缩放从相机捕获的横向图像以将其用于纵向

> ID：11343520
> 
> 赞同：5
> 
> 时间：2012-07-05T11:36:15.097
> 
> 标签：iphone, objective-c, ios, ios5, camera

在我的应用程序中，我`image`使用相机捕捉`UIImagePicker`而不是裁剪它。但问题是，当我在横向模式下从相机拍摄图像时，在纵向模式下裁剪时，黑匣子会显示在图像中。

**图像以横向模式拍摄 -**

![在此处输入图像描述](../Images/2b7d54ea80eda310c56bea5916cf8228.png)

**并且在使用该图像时，黑框显示在图像的上部和底部，如下图所示 -**

![在此处输入图像描述](../Images/70bc2e38703136ad71b5068290638da8.png)

但我想移除黑色部分，以便`image`覆盖整个区域。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T18:26:14.680

您是否正在裁剪图像， `CGImageCreateWithImageInRect([image CGImage], rect);` 或者您能否分享一下您是如何进行裁剪的？

当从`UIImagePickerController`横向模式下拍摄图像时，您需要检查 UIImage 的方向属性。IE`[image orientation];`

如果方向值为`UIInterfaceOrientationLandscapeLeft|UIInterfaceOrientationLandscapeRight`，则在矩形宽度和高度之间互换。然后裁剪它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T06:22:18.367

```
-(UIImage *)crop:(CGRect)rect Image:(UIImage *)originalImage ImageOrientation:(UIImageOrientation)imageOrientation
{

    CGImageRef imageRef = CGImageCreateWithImageInRect(originalImage.CGImage, rect);

    UIImage *result = [UIImage imageWithCGImage:imageRef scale:1.0f orientation:imageOrientation];

    CGImageRelease(imageRef);

    return result;
} 
```

# jquery - 带有 CSS 精灵的 jQuery 菜单

> ID：11343521
> 
> 赞同：-1
> 
> 时间：2012-07-05T11:36:18.013
> 
> 标签：jquery

我有一个工作正常的 jQuery 菜单，我想添加一个 CSS 精灵，这样当“li”关闭时它有一个加号，当它展开时它有一个减号。

请根据以下代码提出任何建议？

谢谢

```
$(document).ready(function() {

$('#sidenav > li > ul, #sidenav > li > ul > li > ul').hide();

$('#sidenav > li').click(function(){
$ul = $(this).children('ul').slideDown('slow');
$('#sidenav > li > ul').not($ul).slideUp('slow');
});

$('#sidenav > li > ul > li').click(function(){
$ul = $(this).children('ul').slideDown('slow');
$('#sidenav > li > ul > li ul').not($ul).slideUp('slow');
}); 
}); 
```

HTML

```
<ul id="sidenav">
<li class=""><a href="#">Menu 1</a>
    <ul>
        <li class=""><a href="#">Submenu 1</a>     
            <ul>            
                <li>Submenu-1A</li>
                <li>Submenu-2A</li>                    
            </ul>        
        </li>
        <li class=""><a href="#">Submenu 2</a>      
            <ul>
                <li>Submenu-1A</li>
                <li>Submenu-2A</li>                    
            </ul>            
        </li>
        <li>Submenu 3</li>
    </ul>
</li>

<li class=""><a href="#">Menu 2</a>
    <ul>
        <li>Submenu 1</li>
        <li>Submenu 2</li>
        <li>Submenu 3</li>
    </ul>
</li>

<li class=""><a href="#">Menu 3</a>
    <ul>
        <li>Submenu 1</li>
        <li>Submenu 2</li>
        <li>Submenu 3</li>
    </ul>
</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:39:20.587

Just add a class if the li is active and define styles accordingly:

Something like this:

```
li{
   background: url(...) no-repeat 0 0;
}

li.active{
   background-position:20px 0; <- adjust accordingly
} 
```

also add the clickhandler to toggle classes:

```
$('#sidenav > li').click(function(){
   ...
   $(this).toggleClass("active");
}); 
```

You could rewrite your clickhandler to take the whole fuzz out of your code:

(untested)

```
$('#sidenav li').click(function(){
   $(this).toggleClass("active")
          .children("ul").toggleSlide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:41:29.613

您可以添加一些类，例如`active`当您的 li wan 单击时将其删除，例如使用

```
$('li').click(function(){
    $(this).toggleClass('active');
}); 
```

并且在css中正常时显示正图像，正常时显示负图像`active`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T11:47:37.463

在 html() 的帮助下检查它是否有 + 或 - 在那个范围内我首先有 '+' 符号

```
jQuery("id").toggle();
    var cur_symbol = jQuery('id span').html();
     if(cur_symbol == ' + '){jQuery('id span').html(' - ');}
     else{jQuery('#more_opt span').html(' + ');}
        }); 
```

# video-streaming - vlcj 中的视频流

> ID：11343523
> 
> 赞同：-2
> 
> 时间：2012-07-05T11:36:21.477
> 
> 标签：video-streaming, vlcj

我想将视频从服务器流式传输到客户端。我找到了将视频从服务器流式传输到客户端的代码，但在运行时出现错误：

```
Streaming 'vlcj-speed-run.flv' to  ':sout=#duplicate{dst=std{access=http,mux=ts,dst=127.0.0.1:5000}}'

[018ec020] access_output_http access out: Consider passing --http-host=IP on the command line instead.

[018b4978] main mux error: cannot add this stream

[05493078] main decoder error: cannot create packetizer output (FLV1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T15:24:47.347

我认为您正在使用旧示例，实际上我认为您正在使用旧测试用例。vlcj 项目已从 googlecode移至[github 。](http://caprica.github.com/vlcj/)因此，您很可能使用的是旧版本的库。

其次，如果您查看编写库的人的[第 2 部分，我认为它会为您解决一些问题。](http://www.capricasoftware.co.uk/vlcj/tutorial2.php)本质上，您应该`EmbeddedMediaPlayerComponent`在大多数情况下使用，在这种情况下，您可以将 url 传递给流或将文件路径传递给要播放的本地文件。

我包括下面的第 2 部分源代码：

```
import uk.co.caprica.vlcj.binding.LibVlc;
import uk.co.caprica.vlcj.component.EmbeddedMediaPlayerComponent;
import uk.co.caprica.vlcj.runtime.RuntimeUtil;

import com.sun.jna.NativeLibrary;
public class Tutorial2B {

  private final EmbeddedMediaPlayerComponent mediaPlayerComponent;

  public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
      @Override
      public void run() {
        new Tutorial2B(args);
      }
    });
  }

  private Tutorial2B(String[] args) {
    JFrame frame = new JFrame("vlcj Tutorial");

    mediaPlayerComponent = new EmbeddedMediaPlayerComponent();

    frame.setContentPane(mediaPlayerComponent);

    frame.setLocation(100, 100);
    frame.setSize(1050, 600);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);

    mediaPlayerComponent.getMediaPlayer().playMedia(args[0]);
  }
} 
```

* * *

**StreamHttp.java的解释**

```
import uk.co.caprica.vlcj.player.MediaPlayerFactory;
import uk.co.caprica.vlcj.player.headless.HeadlessMediaPlayer;
import uk.co.caprica.vlcj.test.VlcjTest;

/**
* An example of how to stream a media file over HTTP.
* <p>
* The client specifies an MRL of <code>http://127.0.0.1:5555</code>
*/
public class StreamHttp extends VlcjTest {

    //when running this it requires an MRL (Media Resource Locator)
    //fancy term for saying the file you want to stream. This could be a url to another
    //location that streams media or a filepath to a media file you want to stream
    //on the system you are running this code on.
    public static void main(String[] args) throws Exception {
        if(args.length != 1) {
            System.out.println("Specify a single MRL to stream");
            System.exit(1);
        }

        //the media you are wanting to stream
        String media = args[0];
        //this is the IP address and port you are wanting to stream at
        //this means clients will connect to http://127.0.0.1:5555
        //to watch the stream
        String options = formatHttpStream("127.0.0.1", 5555);

        System.out.println("Streaming '" + media + "' to '" + options + "'");

        //this creates a the actual media player that will make calls into the native
        //vlc libraries to actually play the media you supplied. It does it in
        //a headless fashion, as you are going to stream it over http to be watched
        //instead of playing it locally to be watched.    
        MediaPlayerFactory mediaPlayerFactory = new MediaPlayerFactory(args);
        HeadlessMediaPlayer mediaPlayer = mediaPlayerFactory.newHeadlessMediaPlayer();

        //this simply starts the player playing the media you gave it
        mediaPlayer.playMedia(media, options);

        // Don't exit
        //basically you don't want the thread to end and kill the player, 
        //so it just hangs around and waits for it to end.
        Thread.currentThread().join();
    }

    private static String formatHttpStream(String serverAddress, int serverPort) {
        StringBuilder sb = new StringBuilder(60);
        sb.append(":sout=#duplicate{dst=std{access=http,mux=ts,");
        sb.append("dst=");
        sb.append(serverAddress);
        sb.append(':');
        sb.append(serverPort);
        sb.append("}}");
        return sb.toString();
    }
} 
```

# playn - 如何将缓冲图像转换为 PlayN 图像？

> ID：11343530
> 
> 赞同：1
> 
> 时间：2012-07-05T11:37:10.377
> 
> 标签：playn

我遇到了一个将java缓冲图像转换为playN图像的接口

[http://code.google.com/p/playn/source/browse/java/src/playn/java/JavaBitmapTransformer.java?spec=svn16f0f5b72f732f47b05c2857e1b64bc6bbe5c14f&r=16f0f5b72f732f47b05c2857e1b64bc6bbe5c14f](http://code.google.com/p/playn/source/browse/java/src/playn/java/JavaBitmapTransformer.java?spec=svn16f0f5b72f732f47b05c2857e1b64bc6bbe5c14f&r=16f0f5b72f732f47b05c2857e1b64bc6bbe5c14f)。

但我无法弄清楚。有谁知道具体怎么用吗？......

提前致谢...........

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T16:22:27.230

您不能直接以跨平台的方式使用它。

此接口不会将 a 转换`BufferedImage`为 PlayN 图像。它把一个`BufferedImage`变成另一个`BufferedImage`。这个新的`BufferedImage`将随后用于在 PlayN 的 Java 平台特定代码中创建一个 PlayN 图像。

该接口在[后台](http://docs.playn.googlecode.com/git/javadoc/playn/core/Image.html#transform%28playn.core.Image.BitmapTransformer%29)用于支持`Image`.

# android - SQLiteCursor 更改查询

> ID：11343533
> 
> 赞同：1
> 
> 时间：2012-07-05T11:37:20.710
> 
> 标签：android, sqlite, memory, memory-leaks

是否可以更改已实例化的 SQL 查询语句`SQLiteCursor`？我希望能够通过 setWindow 将给定的固定指定给`CursorWindow`，`SQLiteCursor`以便将来的查询放置在同一个容器中而不是打开新的容器，但是每个查询都会有所不同。所以这个想法是做类似的事情：

```
SQLiteDatabase db = openOrCreateDatabase(...);
CursorWindow cursorWindow = new CursorWindow("MyCursorWindow");
SQLiteQuery sqliteQueryObject;

//first query
String query = "SELECT * FROM Table";
sqliteQueryObject = SomeFunctionThatCreatesASQLiteQueryFromAStatement(query)
SQLiteCursor cursor = new SQLiteCursor(db, ...., sqliteQueryObject)

SQLiteCursor.setWindow(cursorWindow);

//subsequent queries
String query = "SELECT * FROM AnotherTable";
sqliteQueryObject = SomeFunctionThatCreatesASQLiteQueryFromAStatement(query)
SQLiteCursor.SomeFunctionToSetANewQuery(sqliteQueryObject);
SQLiteCursor.requery(); 
```

在内部，`SQLiteCursor`必须在执行之前设置`private SQLiteQuery mQuery`为新查询`requery()`。

# cygwin - 在cygwin中配置gearman php扩展时找不到./configure命令

> ID：11343538
> 
> 赞同：0
> 
> 时间：2012-07-05T11:37:38.497
> 
> 标签：cygwin, gearman

我已经从 gearmean 网站下载了最新版本的 gearman php 扩展，但是当我尝试配置 gearman phpextension 时，我得到了找不到配置命令的错误。当我浏览 gearman 文件夹时，我也没有在其中找到配置文件。在该行中运行 ./configure 命令时出现以下错误。

在此之前，我已经成功安装了 gearman 服务器并运行了 gearman 服务器。

任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T07:22:32.823

当我们在命令提示符下运行 phpize 时，将自动创建配置文件。然后我们可以运行命令 ./configure 和 make 命令来安装 gearman php 扩展。最后我找到了解决方案

# php - jQuery 在 HTTPS Internet Explorer 上无法正常工作

> ID：11343540
> 
> 赞同：0
> 
> 时间：2012-07-05T11:37:46.333
> 
> 标签：php, ajax, jquery

当我尝试在除 Internet Explorer 之外的任何其他网络浏览器上运行我的代码时，它工作正常。但是，当我尝试在 Internet Explorer 上运行代码时，我确实收到了一个警告框，上面写着 HERE 以及一个 Ok 按钮。但问题是当我点击那个确定按钮时，我什么也没有得到。理想情况下，我应该得到另一个警报框。

```
<!DOCTYPE html>
<html>
<head>
    <script src="js/jquery-1.4.2.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){       
        $("#submit").click(function(event) {        
        alert("here");              
        $.post('process.php', {name:'test1',email:'test.com'}, function(data)
        {
            $('#results').html(data);
            alert(data);
        });
      });
    });
    </script>

</head>
<body>
<form name="myform" id="myform" action="" method="POST">
    <label for="name" id="name_label">Name</label>
    <input type="text" name="name" id="name" size="30" value=""/>
    <br>
    <label for="email" id="email_label">Email</label>
    <input type="text" name="email" id="email" size="30" value=""/>
    <br>
    <input type="button" name="submit" id="submit" value="Submit">
</form>
<div id="results"><div>
</body>
</html> 
```

非常感谢您对此的任何帮助。

**编辑：**我发现具有 HTTP 的 Internet Explorer 工作得非常好，但在使用 HTTPS 的 Internet Explorer 上却不行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:40:13.777

将您的代码更改为

```
<form name="myform" id="myform" action="" method="POST" onsubmit="return validate(this);">
    <label for="name" id="name_label">Name</label>
    <input type="text" name="name" id="name" size="30" value=""/>
    <br>
    <label for="email" id="email_label">Email</label>
    <input type="text" name="email" id="email" size="30" value=""/>
    <br>
    <input type="button" name="submit" id="submit" value="Submit">
</form>
<script>
function validate(elem){
    $.post('process.php', {name:'test1',email:'test.com'}, function(data)
            {
                $('#results').html(data);
                return true;
            });
    return false;

}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:17:07.460

尝试使用 jquery`$.ajax()`使用`$(fomname).serialize()`方法发布表单数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T09:28:31.210

```
function submitYourForm()
{
                $.ajax({
                type: 'POST',
                cache: false,
                async:true,
                url: 'your url',
                data: $('#myform').serialize(), 
                success: function(data) {
                    alert(data);
                }
               });      
} 
```

将您的按钮类型从“提交”更改为“按钮”并调用您的函数 onclick the button like

```
<input type="button" name="submit" onclick="submitYourForm();" value="Submit" /> 
```

删除函数调用 onsubmit。

试试这个

# android - Android 滑动按钮

> ID：11343541
> 
> 赞同：0
> 
> 时间：2012-07-05T11:37:46.417
> 
> 标签：android, android-layout

我正在开发一个从右向左滑入的菜单。滑动菜单完成，也是一个触发Slidein/out的Button。

现在我也想为按钮设置动画。目前我通过设置边距让它移动，但这很难看，因为它像地狱一样跳跃......有没有简单的方法将按钮附加到菜单？或者任何简单的动画方法？

菜单是相对视图中的线性视图。RelativeView 包含按钮。 ![左上角的触发按钮](../Images/87d767d72d01e0a74e16d4487f65553d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:09:30.270

最好的方法是使用 Nineoldandroids 库。[这](http://nineoldandroids.com/)是链接，您可以在使用部分查看如何操作。

# android - 如何在table view_android中自定义header，（如图）

> ID：11343544
> 
> 赞同：0
> 
> 时间：2012-07-05T11:37:47.257
> 
> 标签：android, tableview

我在我的 xml 中使用表视图。目前所有的行看起来都一样（显示为第一个表），所以我希望标题与以下行不同，例如图片中的第一个表![在此处输入图像描述](../Images/1bfd80f038051e7de72f34dd855a2170.png) 我试图将第一行设置为按钮但它们看起来很奇怪，有人知道吗？非常感谢你的帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:46:32.023

这篇文章[Android TableLayout Header row](https://stackoverflow.com/questions/1698978/android-tablelayout-header-row)可能对你有帮助

他们在表格中使用表格

或者

在这篇文章中查看我的答案。[android 以编程方式在 tableRows 中创建 textViews](https://stackoverflow.com/questions/11342975/android-create-textviews-in-tablerows-programmitcally/11343618#11343618)

*   这个问题作者使用固定的文本视图作为 xml 中的标题。在这里您可以控制 textview 属性以使其看起来像标题
*   然后他正在尝试通过程序添加表格内容

# c# - asp.net动态设置onclick输入按钮

> ID：11343545
> 
> 赞同：2
> 
> 时间：2012-07-05T11:37:50.160
> 
> 标签：c#, asp.net, button, input

我有一些看起来像这样的动态按钮：

```
<input type="button" name="button" id="button" value="Click me"
    onclick="window.open('somelink');" /> 
```

我需要能够从后面的代码中更改“somelink”。

这是怎么做的？我知道`Request.Form["button"]`获取按钮但如何设置 onlick 属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T11:39:33.957

添加 runat="server" ，您可以从后面的代码访问该链接

```
<input runat="server" type="button" name="button" id="button" value="Click me"
    onclick="window.open('somelink');" /> 
```

如果您想更改 onclick 属性，那么您可以在后面的代码中执行此操作

```
button.Attributes.Add("onclick", "window.open('someOtherLink');") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T11:42:01.430

更改按钮的单击处理程序应在页面加载时完成，而不是在提交表单时完成。在您可以从 C# 访问您的按钮之前，您需要添加`runat="server"`. 之后，您可以访问其属性：

HTML

```
<input runat="server" type="button" name="button" id="button" value="Click me"
    onclick="window.open('somelink');" /> 
```

C＃

```
button.Attributes.Add("onclick", "window.open('[DynamicValueHere]');"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T11:41:07.043

你可以这样做：

```
<asp:Button id="button" Text="Click me"  OnClick="window.open('somelink');" /> 
```

**并**
从后面的代码

```
button.Attributes.Add("onclick", "window.open('somelink');"); 
```

你可以添加任何你想要的东西来代替`somelink`.
就是这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T11:41:19.883

你为什么不这样`<%=SomeUrl%>`进去`window.open``window.open(<%=SomeUrl%>)`

# java - BlockCopy C# to java - 有没有办法做到这一点

> ID：11343554
> 
> 赞同：0
> 
> 时间：2012-07-05T11:39:09.753
> 
> 标签：java

可以在 C# 的 System 命名空间下找到的 BlockCopy 具有以下参数：

```
public static void BlockCopy(
 Array src,
 int srcOffset,
 Array dst,
 int dstOffset,
 int count
) 
```

java中是否有任何实现？

我有一个包含文件的字节数组，我需要这个函数 i java。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T11:39:55.123

看看[`System.arraycopy`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)。（它采用完全相同的论点。）

# c# - 如何通过 Linq 区分所有子子属性？

> ID：11343555
> 
> 赞同：2
> 
> 时间：2012-07-05T11:39:11.483
> 
> 标签：c#, .net, linq, .net-4.0

我正在尝试显示子属性的所有可能值。下面我试图将所有产品的所有可能颜色放入一个变量中。如何在下面获得 allDistinctColors？

```
IEnumerable<Product> products = GetAllProducts();
IEnumerable allDistinctColors = ???

public class Product
{
  public List<Option> Options { get; set; }
}

public class Option
{
  public string Color { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T11:42:12.567

用于`SelectMany`为每个输入项（产品）选择多个输出项（选项），并将它们连接成一个枚举以供进一步查询：

```
var allDistinctColors = products
    .SelectMany(p => p.Options)
    .Select(o => o.Color)
    .Distinct(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T11:44:11.563

```
var allDistinctColors = products
     .SelectMany(p => p.Options.Select(o => o.Color))
     .Distinct() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T23:25:53.060

查询语法也适用于此：

```
var allDistinctColors = (from p in products
                         from o in p.Options
                         select o.Color).Distinct(); 
```

# php - 使用 php 在单个 DOS 终端上运行多个顺序命令

> ID：11343557
> 
> 赞同：-1
> 
> 时间：2012-07-05T11:39:18.127
> 
> 标签：php

我有一个场景，我必须使用 PHP 在单个 DOS 窗口中一个接一个地运行多个命令。谁能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:40:53.050

Make a batch (.bat or .cmd) file and then execute it

# html - @font-face not working at all

> ID：11343558
> 
> 赞同：3
> 
> 时间：2012-07-05T11:39:19.753
> 
> 标签：html, css, fonts, font-face

I dont understand whats going on here because when I had this code on its own it was working (in FireFox):

```
@font-face {
    font-family: 'mmfont';
    src: url('/scripts/mmfont.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
} 
```

Then I added a second font in exactly the same manner, but only the first one was working:

```
@font-face {
    font-family: 'mmfont2';
    src: url('/scripts/mmfont2.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
} 
```

Then I used a font-generator to get an EOT file for IE9 and generate the @font-face code for me, but now neither font is working in any browser (I tried IE9, FF12, Chrome & Safari5).

I then put the @font-face CSS in its own '/scripts/fonts.css' file so that the fonts and CSS were in the same folder, and I tried to use the URLs both directly ('mmfont.ttf') and by the webroot folder ('/scripts/mmfont.ttf') but still neither way is working at all.

What am I doing wrong?

# Correction:

I had a typo when calling the first font 'mmfont' I did this: `font-family: mm_font` but now that I fixed the typo, once again only the 1st font is working with the code below, and the second font `mmfont2` is not working. I tried to re-arrange the order (define the 2nd font first) but it still wont work. So now I believe there is a problem with my font file, so I will try to get another copy and see how that goes.

# Update:

There seems to be nothing wrong with the code. I used FireBug to do a Source Edit of the fonts.css file, and when I renamed the url for 'mmfont2' to 'mmfont.ttf' (the URL for the 1st font) it updated the page and the font loaded, however when I renamed it back to 'mmfont2.ttf' it went back to the default font of the browser. So I am now sure it is a problem with the font file rather than the code.

It looks like this 2nd font I'm using isn't a web-compatible font. Funnily, it turns out that all along the same font has another alias "Century Gothic" which is a web-safe font and works in all the browsers without even having to link any files!!

(I don't know if I should have this question closed or deleted)

* * *

# /scripts/fonts.css

```
@CHARSET "ISO-8859-1";
@font-face {
    font-family: 'mmfont';
    src: url('/scripts/mmfont.eot');
    src: url('/scripts/mmfont.eot?#iefix') format('embedded-opentype'),
         url('/scripts/mmfont.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
}
@font-face {
    font-family: 'mmfont2';
    src: url('/scripts/mmfont2.eot');
    src: url('/scripts/mmfont2.eot?#iefix') format('embedded-opentype'),
         url('/scripts/mmfont2.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
} 
```

# /index.html

```
<link rel="StyleSheet" href="/scripts/fonts.css" type="text/css"> 
```

* * *

# directory

```
/  
/index.html  
/scripts/  
/scripts/mmfont.ttf  
/scripts/mmfont.eot  
/scripts/mmfont2.ttf  
/scripts/mmfont2.eot
/scripts/fonts.css 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:42:08.480

嘿现在更正你在css中的字体url，就像这样

```
url('mmfont.eot'); 
```

我认为您的字体和 css 文件在一个**脚本文件夹中**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T23:34:30.140

我们想不出另一种方法，因为我们在亚马逊上的所有设置似乎都很好。相反，我们只是将字体定义本身嵌入到 data-uri 调用中，如下所示。StackOverflow 中的大部分字体定义已被省略以限制答案的大小，但这应该让您对我们的方法有一个很好的了解。

```
@font-face {
    font-family: "PFDinTextPro-Light";
    src: url("233cd7_2_0-webfont.eot");
}
@font-face {
    font-family: "PFDinTextPro-Light";
    font-style: normal;
    font-weight: normal;
    src: url("233cd7_2_0-webfont.eot?#iefix") format("embedded-opentype"), url("data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAFq4ABEAAAAAmrQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAABgAAAABwAAAAcYqvy...dRcDMyMXA5M2mM+m4LqJvRPKYQVy2CKhHBYgh9USyuGAaJOCaeMESnLMgHAYN3BBDecFinIdZ9LeyOxWBuTyALm8+XAuN5DLEwjn8oGM5Kr/zwAX4Qcq4HsC5woAufy1MG7kBhFtANGLRQMAAVB7j+oAAA==") format("woff"), url("233cd7_2_0-webfont.ttf") format("truetype");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-25T17:58:16.210

知道已经过了一年多，但万一有人来看，我敢打赌提问者将他们的网站托管在 AWS 上——你必须创建一个 CORS 规则才能让 AWS 阅读 @font-face 工具包。按照此处所述尝试此修复：http: [//blog.blenderbox.com/2012/10/12/serving-font-face-fonts-to-firefox-from-an-s3-bucket/](http://blog.blenderbox.com/2012/10/12/serving-font-face-fonts-to-firefox-from-an-s3-bucket/)

# c# - WCF Service returning "requested service '...' could not be activated" the first time it's accessed from an MVC site

> ID：11343563
> 
> 赞同：34
> 
> 时间：2012-07-05T11:39:32.450
> 
> 标签：c#, .net, asp.net-mvc-3, wcf, exception-handling

We have a WCF service (with no security) that is being accessed by an MVC3 website.

On the developer machines we have no problems with it but when our TeamCity setup builds the central version and deploys it under IIS7 the first time we load the MVC3 site and it accesses the WCF service - the service call returns the message:

> System.ServiceModel.ServiceActivationException: The requested service, 'http://localhost:83/ABCStaticData/StaticDataService.svc' could not be activated. See the server's diagnostic trace logs for more information.**

If we immediately hit the same site again, everything works fine.

The server stack track when it throws the error is:

Server stack trace:

```
at System.ServiceModel.Channels.HttpChannelUtilities.ValidateRequestReplyResponse(HttpWebRequest request, HttpWebResponse response, HttpChannelFactory1 factory, WebException responseException, ChannelBinding channelBinding)
at System.ServiceModel.Channels.HttpChannelFactory1.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)
at System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout)
at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout
at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message) Exception rethrown at [0]: at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) 
at ABC.StaticData.Editor.StaticDataServiceProxy.IStaticDataService.GetAllMarkets()
at ABC.StaticData.Editor.StaticDataServiceProxy.StaticDataServiceClient.GetAllMarkets() in c:\BuildAgent\work\55a3bcc468adcccb\StaticData\ABC.StaticData.Editor\Service References\StaticDataServiceProxy\Reference.cs:line 3195
at ABC.StaticData.Editor.Controllers.MarketsController.<>c__DisplayClass22.<.ctor>b__13() in c:\BuildAgent\work\55a3bcc468adcccb\StaticData\ABC.StaticData.Editor\Controllers\MarketsController.cs:line 263
at ABC.StaticData.Editor.Controllers.MarketsController.Index() in c:\BuildAgent\work\55a3bcc468adcccb\StaticData\ABC.StaticData.Editor\Controllers\MarketsController.cs:line 306 
```

Does anyone have any ideas on what could be causing the problem or where to start looking?

UPDATE: I forgot to mention the first that if we then don't access the site for a while and then go back, it gives the same error - then works again the second time.

UPDATE2: This is the event log entry text:

```
WebHost failed to process a request.
 Sender Information: System.ServiceModel.ServiceHostingEnvironment+HostingManager/3043589
 Exception: System.ServiceModel.ServiceActivationException: The service '/ABCStaticData/StaticDataService.svc' cannot be activated due to an exception during compilation.  The exception message is: Could not load type 'System.Runtime.CompilerServices.AsyncStateMachineAttribute' from assembly 'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.. ---> System.TypeLoadException: Could not load type 'System.Runtime.CompilerServices.AsyncStateMachineAttribute' from assembly 'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.
   at System.ModuleHandle.ResolveType(RuntimeModule module, Int32 typeToken, IntPtr* typeInstArgs, Int32 typeInstCount, IntPtr* methodInstArgs, Int32 methodInstCount, ObjectHandleOnStack type)
   at System.ModuleHandle.ResolveTypeHandleInternal(RuntimeModule module, Int32 typeToken, RuntimeTypeHandle[] typeInstantiationContext, RuntimeTypeHandle[] methodInstantiationContext)
   at System.Reflection.RuntimeModule.ResolveType(Int32 metadataToken, Type[] genericTypeArguments, Type[] genericMethodArguments)
   at System.Reflection.CustomAttribute.FilterCustomAttributeRecord(CustomAttributeRecord caRecord, MetadataImport scope, Assembly& lastAptcaOkAssembly, RuntimeModule decoratedModule, MetadataToken decoratedToken, RuntimeType attributeFilterType, Boolean mustBeInheritable, Object[] attributes, IList derivedAttributes, RuntimeType& attributeType, IRuntimeMethodInfo& ctor, Boolean& ctorHasParameters, Boolean& isVarArg)
   at System.Reflection.CustomAttribute.IsCustomAttributeDefined(RuntimeModule decoratedModule, Int32 decoratedMetadataToken, RuntimeType attributeFilterType, Boolean mustBeInheritable)
   at System.Reflection.CustomAttribute.IsDefined(RuntimeMethodInfo method, RuntimeType caType, Boolean inherit)
   at System.Reflection.RuntimeMethodInfo.IsDefined(Type attributeType, Boolean inherit)
   at Ninject.Infrastructure.Language.ExtensionsForMemberInfo.HasAttribute(MemberInfo member, Type type)
   at Ninject.Selection.Heuristics.StandardInjectionHeuristic.ShouldInject(MemberInfo member)
   at Ninject.Selection.Selector.<>c__DisplayClassa.<SelectMethodsForInjection>b__9(IInjectionHeuristic h)
   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source, Func`2 predicate)
   at Ninject.Selection.Selector.<SelectMethodsForInjection>b__8(MethodInfo m)
   at System.Linq.Enumerable.WhereArrayIterator`1.MoveNext()
   at Ninject.Planning.Strategies.MethodReflectionStrategy.Execute(IPlan plan)
   at Ninject.Planning.Planner.<>c__DisplayClass1.<CreateNewPlan>b__0(IPlanningStrategy s)
   at Ninject.Infrastructure.Language.ExtensionsForIEnumerableOfT.Map[T](IEnumerable`1 series, Action`1 action)
   at Ninject.Planning.Planner.CreateNewPlan(Type type)
   at Ninject.Planning.Planner.GetPlan(Type type)
   at Ninject.Activation.Providers.StandardProvider.Create(IContext context)
   at Ninject.Activation.Context.Resolve()
   at Ninject.KernelBase.<>c__DisplayClass10.<Resolve>b__c(IBinding binding)
   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.SingleOrDefault[TSource](IEnumerable`1 source)
   at Ninject.Planning.Targets.Target`1.GetValue(Type service, IContext parent)
   at Ninject.Planning.Targets.Target`1.ResolveWithin(IContext parent)
   at Ninject.Activation.Providers.StandardProvider.GetValue(IContext context, ITarget target)
   at Ninject.Activation.Providers.StandardProvider.<>c__DisplayClass4.<Create>b__2(ITarget target)
   at System.Linq.Enumerable.WhereSelectArrayIterator`2.MoveNext()
   at System.Linq.Buffer`1..ctor(IEnumerable`1 source)
   at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)
   at Ninject.Activation.Providers.StandardProvider.Create(IContext context)
   at Ninject.Activation.Context.Resolve()
   at Ninject.KernelBase.<>c__DisplayClass10.<Resolve>b__c(IBinding binding)
   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.SingleOrDefault[TSource](IEnumerable`1 source)
   at Ninject.Planning.Targets.Target`1.GetValue(Type service, IContext parent)
   at Ninject.Planning.Targets.Target`1.ResolveWithin(IContext parent)
   at Ninject.Activation.Providers.StandardProvider.GetValue(IContext context, ITarget target)
   at Ninject.Activation.Providers.StandardProvider.<>c__DisplayClass4.<Create>b__2(ITarget target)
   at System.Linq.Enumerable.WhereSelectArrayIterator`2.MoveNext()
   at System.Linq.Buffer`1..ctor(IEnumerable`1 source)
   at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)
   at Ninject.Activation.Providers.StandardProvider.Create(IContext context)
   at Ninject.Activation.Context.Resolve()
   at Ninject.KernelBase.<>c__DisplayClass10.<Resolve>b__c(IBinding binding)
   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.Single[TSource](IEnumerable`1 source)
   at Ninject.Extensions.Wcf.BaseNinjectServiceHostFactory.CreateServiceHost(Type serviceType, Uri[] baseAddresses)
   at System.ServiceModel.Activation.ServiceHostFactory.CreateServiceHost(String constructorString, Uri[] baseAddresses)
   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.CreateService(String normalizedVirtualPath, EventTraceActivity eventTraceActivity)
   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.ActivateService(ServiceActivationInfo serviceActivationInfo, EventTraceActivity eventTraceActivity)
   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath, EventTraceActivity eventTraceActivity)
   --- End of inner exception stack trace ---
   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath, EventTraceActivity eventTraceActivity)
   at System.ServiceModel.ServiceHostingEnvironment.EnsureServiceAvailableFast(String relativeVirtualPath, EventTraceActivity eventTraceActivity)
 Process Name: w3wp
 Process ID: 3248 
```

Just another point that we're developing using .NET 4.5 and Visual Studio 2012 RC.

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-07-30T12:10:17.230

我刚刚设法解决了随机“System.ServiceModel.ServiceActivationException”的类似问题（抛出异常，然后在第二次命中时运行。）。在我的情况下，异常的原因是服务器上的内存不足。要确认内存问题，您可以执行以下操作：

应用程序调用 Web 服务：

```
System.ServiceModel.ServiceActivationException: The requested service, 'XXX' could not be activated. See the server's diagnostic trace logs for more information.

Server stack trace: 
   at System.ServiceModel.Channels.HttpChannelUtilities.ValidateRequestReplyResponse(HttpWebRequest request, HttpWebResponse response, HttpChannelFactory`1 factory, WebException responseException, ChannelBinding channelBinding)
   at System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
   at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message) 
```

WCF 跟踪日志：没有记录。

在事件日志中托管 wcf 服务（与调用应用程序 btw 相同）的服务器上，除了我发现的大量废话信息：

自定义活动详情：

```
WebHost failed to process a request.
 Sender Information: System.ServiceModel.ServiceHostingEnvironment+HostingManager/58366981
 Exception: System.ServiceModel.ServiceActivationException: The service 'xxx' cannot be activated due to an exception during compilation.  The exception message is: Memory gates checking failed because the free memory (xxx bytes) is less than 5% of total memory.  As a result, the service will not be available for incoming requests.  To resolve this, either reduce the load on the machine or adjust the value of minFreeMemoryPercentageToActivateService on the serviceHostingEnvironment config element.. ---> System.InsufficientMemoryException: Memory gates checking failed because the free memory (xxx bytes) is less than 5% of total memory.  As a result, the service will not be available for incoming requests.  To resolve this, either reduce the load on the machine or adjust the value of minFreeMemoryPercentageToActivateService on the serviceHostingEnvironment config element. 
```

所以我的解决方案是： 1\. 添加更多内存 2\. 释放一些内存（临时解决方案） 3\. 更新 Web 服务的 Web 配置：

```
<configuration>
  <system.serviceModel>
    <serviceHostingEnvironment ... minFreeMemoryPercentageToActivateService="0" />
  </system.serviceModel>
</configuration> 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-05-07T03:02:20.453

我也有这个问题，只是简单地说

```
<serviceHostingEnvironment  minFreeMemoryPercentageToActivateService="1"> 
```

在下面

`<system.serviceModel>`

一切正常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-26T17:04:40.757

我也有这个问题，我做的是：

*   转到服务所在的文件系统中的目录
*   您将有 2 个服务文件
    *   你的服务.svc
    *   yourService.svc.cs
*   打开文件 yourService.svc 并确保您的服务已配置，后面的代码如下所示：

    ```
    <%@ ServiceHost Language="C#" Debug="true" Service="YourNamespace.yourService.svc" CodeBehind="yourService.svc.cs" %> 
    ```

我以这种方式解决了我的问题。我希望它有帮助！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-22T16:30:58.013

我遇到了同样的“无法加载类型'System.Runtime.CompilerServices.AsyncStateMachineAttribute'”，我发现这是因为我使用 VS 2012 RTM 构建了我的应用程序，但随后尝试将它部署在只有4.5 测试版。AsyncStateMachineAttribute 是 Beta 之后添加的新类型。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-06T15:36:34.370

如果在安装 Windows Communication Foundation (WCF) 后安装 IIS，则会出现此错误。要修复它，只需运行以下命令：

```
"%WINDIR%\Microsoft.Net\Framework\v3.0\Windows Communication Foundation\ServiceModelReg.exe" -r 
```

来源：[IIS 托管服务失败](https://msdn.microsoft.com/en-us/library/ms752252.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-05T11:43:25.870

.svc 扩展名是否在 IIS 下注册？

有关详细信息，请参阅[MSDN 。](http://msdn.microsoft.com/en-us/library/ms752252.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-05T14:34:20.603

对我来说，原来是 IIS 中的身份验证设置配置不正确。因此，身份验证失败阻止了初始请求，从而阻止了服务激活。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-10-30T16:52:23.917

我今天遇到了同样的问题，而不是 RAM 是磁盘空间的问题。释放空间后，我不得不重新启动应用程序池，问题就解决了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-08-11T11:52:43.160

检查您托管服务的服务器的内存是否未满。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-08-10T05:07:21.853

每次我遇到同样的问题，我都会重新启动我的电脑，它运行良好。它释放内存

# asp.net-mvc-3 - Date Fails Client and Server Side Validation Using ASP.NET MVC 3 Data Annotations

> ID：11343565
> 
> 赞同：0
> 
> 时间：2012-07-05T11:39:34.923
> 
> 标签：asp.net-mvc-3, data-annotations, unobtrusive-validation

In all my projects, I have jQuery date pickers that format the date `dd-MMM-yyyy` which both users worldwide and the `DateTime.parse` method understand perfectly - sadly this does not appear to be the case for data annotation validation! I have my data annotation as below:

```
 [Display(Name = "Date of Birth")]
    [DataType(DataType.Date)]
    [DisplayFormat(DataFormatString = "{0:d-MMM-yyyy}", ApplyFormatInEditMode = true)]
    [Required(ErrorMessage = "You must enter a date of birth.")]
    public DateTime dob { get; set; } 
```

And my form refuses to submit with the error as below:

![Date field](../Images/30e3a6f1b26ddf978edf1b18441beb3e.png)

Does anyone know how I can make it validate, accept and modelbind a date value in this format?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:52:53.153

`DateTime`您可以像我一样为该类型编写一个自定义模型绑定器，当从请求中解析一个 DateTime 字段时[`shown here`](https://stackoverflow.com/a/7836093/29407)，它将使用属性中定义的格式。`[DisplayFormat]`默认情况下，模型绑定器使用当前线程的 CultureInfo 设置或您在`<globalization>`web.config 的元素中配置的值。如果将其设置为`auto`，则 ASP.NET 将使用客户端`Accept-Language`请求标头来调整文化信息。

# android - Default RGB color code for activity backgrounds

> ID：11343566
> 
> 赞同：0
> 
> 时间：2012-07-05T11:39:35.033
> 
> 标签：android, background-color, rgb

I am adding pictures to my Android project and the background color of those pictures are the darkest of the darkest color (RGB: 0, 0, 0) but I can see the background color of the images is different from the background color of the android activities.

What is the default RGB color code for the activity backgrounds or is there a method to get it?

(Yes, I know that I could change the background color of the activities to the desired color instead, but that would require that I change all my activities' background color)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:30:26.070

正如 Warpzit 建议的那样，我研究了样式，以下解决了我的问题：

在“values”文件夹中创建一个 XML 文件，其中包含以下代码：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="BackgroundStyle" parent="@android:style/Animation.Activity">
        <item name="android:background">#000000</item>
    </style>
</resources> 
```

在每个布局 XML 文件中，在 LinearLayout 标记内添加以下内容：

```
style="@style/BackgroundStyle" 
```

# ios - Parsing JSON response .

> ID：11343567
> 
> 赞同：0
> 
> 时间：2012-07-05T11:39:37.467
> 
> 标签：ios, json, nsurlconnection, nsdata

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
   response=[[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding];} 
```

Here, I get the response in the "response value" --> `[{"response":true,"danger":false}]`

The thing is: How can I rescue the "danger"(true/false) into a new variable to use it in other methods? I need to know if "danger" is true or false becouse if its true, i have to show an alert.

I would really appreciate someone help, as I am stuck in here.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:44:43.530

使用 NSJSONSerialization：http: [//developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)

```
NSArray *jsonArray=[NSJSONSerialization JSONObjectWithData:data options:0 error:nil];
BOOL danger=[(NSNumber*)[(NSDictionary*)[jsonArray objectAtIndex:0] objectForKey:@"danger"] boolValue]; 
```

# xml - Magento - How can I change the sidebar order?

> ID：11343568
> 
> 赞同：0
> 
> 时间：2012-07-05T11:39:39.720
> 
> 标签：xml, magento, layout

I installed the Modern Theme on Magento 1.7.0.1 and the extension "Sidebar Navigation Menu Professional" from CODNITIVE, so I have three boxes ("Shop By", "Categories", "Compare Products" and "My Cart") at the left sidebar. Now I want to change the order in this way:

1.  My Cart
2.  Categories
3.  Compare Products.

I tried to change the order via editing the catalog.xml with the lines

```
<block type="catalog/product_compare_sidebar" before="cart_sidebar" name="catalog.compare.sidebar" template="catalog/product/compare/sidebar.phtml"/> 
```

and changed it in this way:

```
<block type="catalog/product_compare_sidebar" after="cart_sidebar" name="catalog.compare.sidebar" template="catalog/product/compare/sidebar.phtml"/> 
```

so that "My Cart" is over the Compare box - and that´s all what I know cause it's hard to find a clear solution for that it the forum on magentocommerce.com. And I don't know the .xml-file for the Categories-box.

Another advice from CODNITIVE was to creat an own locale.xml file from where you can edit the complete page layout. But that doesn't really help me, because I am not a programmer.

Could anybody help my to edit the Sidebar layout? (Excuse my English.)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-05T14:52:40.377

对于类别 U 可以检查**sidenav.xml** 并在那里更改导航块的位置。

查看[此帖子](http://www.magentocommerce.com/boards/v/viewthread/269953/#t393311)了解详情。

# android - Android使用具有隐藏值的项目创建一个微调器并显示一些文本？

> ID：11343570
> 
> 赞同：22
> 
> 时间：2012-07-05T11:39:47.880
> 
> 标签：android

我敢肯定这被问了很多，我在这里发现了一些类似的问题，但没有一个真正让我失望。我希望有人可以帮助我。

我想要做的是向用户展示一个下拉列表（微调器），其中包含香草、巧克力、草莓口味的列表。

当用户选择他们选择的风味时，我希望返回草莓的值为 10。

```
Strawberry = 10
Chocolate = 20
Vanilla = 30 
```

我来自 vb.net 背景，所以发现这非常难以处理，因为我需要阵列适配器和其他东西才能做到这一点？

任何人都可以为我简化事情并分享一些代码吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-05T11:50:33.807

你可以试试这个

```
ArrayAdapter<String> SpinerAdapter;
         String[] arrayItems = {"Strawberry","Chocolate","Vanilla"};
         final int[] actualValues={10,20,30}; 

        SpinerAdapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_dropdown_item, arrayItems);
        spinner.setAdapter(SpinerAdapter);

        spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                int thePrice=actualValues[ arg2];

            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
        }); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-05T11:54:32.980

我认为这篇文章会对您有所帮助[Android：如何将微调器绑定到自定义对象列表？](https://stackoverflow.com/questions/1625249/android-how-to-bind-spinner-to-custom-object-list)

这个问题作者和你有同样的要求

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-09-24T12:18:27.560

您可以实例化使用您的数据对象类型键入的 ArrayAdapter。然后 Spinner 将保存您的完整数据对象而不是字符串。显示的值将由数据对象的 toString() 方法确定。

例子：

```
List<Project> allProjects = ...;

    ArrayAdapter<Project> spinnerAdapter = new ArrayAdapter<Project>(this, android.R.layout.simple_spinner_item,allProjects.toArray(new Project[allProjects.size()]));
    spinnerAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(spinnerAdapter);
    spinner.setOnItemSelectedListener(this); 
```

...

```
@Override
public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
    Log.i(AppConst.TAG, "ItemSelected:" + position + " id: " + id);
    Project selectedProject = (Project)getSpinner().getSelectedItem();
    currentTask = selectedProject.toString();
    Log.i(AppConst.TAG, "Selected Project:" + selectedProject.getId());
    ...
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-05T11:50:41.147

这是代码：

```
 TextView textView=(TextView) findViewById(R.id.textView1);
        Spinner spinner=(Spinner) findViewById(R.id.spinner1);
        spinner.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_spinner_dropdown_item,quantity));
        spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                if(arg2==0){
                textView.setText("Strawberry = 10");
            }else if(arg2==1){
                textView.setText("Chocolate = 20");
            }else if(arg2==2){
                textView.setText("Vanilla = 30");
            }

            }

            public void onNothingSelected(AdapterView<?> arg0) {

            }
        });

String[] quantity={"Strawberry","Chocolate","Vanilla"}; 
```

和 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Spinner
        android:id="@+id/spinner1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
         />

</LinearLayout> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-05-17T03:54:19.673

## 使用 Enums 将所有内容整齐地包装起来。

使用 Enums 可以保持整洁，并为您提供面向对象的接口，而无需保留数据。从外观上看，您为每种“口味”（例如`Strawberry = 10`）使用了常量值。

因此，首先创建一个名为`enums`. 我们会把你`Enums`的一切都留在那里。

然后在那里创建一个新文件，名为`Flavour`：

**枚举/Flavour.java**

```
public enum Flavour {

    STRAWBERRY("Strawberry", 10),
    CHOCOLATE("Chocolate", 20),
    VANILLA("Vanilla", 30);

    private String displayString;
    private int value;

    private Flavour ( String displayString, int value) {
        this.displayString = displayString;
        this.value   = value;
    }

    @Override
    public String toString() {
        return displayString;
    }

    public String displayString() { return displayString; }

    public String value() { return value; }

    public static Flavour fromDisplayString( String displayString) {

        if ( displayString != null ) {
            for ( Flavour flavour : Flavour.values() ) {
                if ( displayString.equalsIgnoreCase( flavour.displayString ) ) {
                    return flavour;
                }
            }
        }

        throw new IllegalArgumentException("No Flavour with display string " + displayString + " found");

    }

    public static Flavour fromValue( int value) {
        if (value != null) {
            for (Flavour flavour : Flavour.values()) {
                if (value.equals(flavour.value)) {
                    return flavour;
                }
            }
        }

        throw new IllegalArgumentException("No Flavour with value " + value + " found");
    }

} 
```

我将剩下的适配器工作留给你做，但关键是：

*   用于`Flavour.values()`获取 Spinner Adapter 的 Flavors 数组。

*   将`toString()`在 Spinner 填充时自动调用，因此您的显示字符串（或您在该方法中返回的任何内容）将是显示的内容。

*   保存值时，您可以使用：

    ```
    ( (Flavour) spinner.getSelectedItem() ).value(); 
    ```

# list - 这两种在 TCL 中声明列表的方式有什么区别？

> ID：11343572
> 
> 赞同：2
> 
> 时间：2012-07-05T11:39:51.210
> 
> 标签：list, tcl

我对以下几行有疑问：

```
set list1 "1 2 3 4 5 6" ##line 1
set list2 {1 2 3 4 5 6} ##line 2 
```

这两行都声明了一个列表吗？它们之间有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T12:33:47.860

在您的具体示例中，没有区别。

两者都没有真正声明一个列表，因为您不能真正在 Tcl 中声明一个列表。但是两者都将您的变量设置为有效的列表表示形式。

仅当您的项目以任何方式对解析器而言是特殊的，当“”允许替换，而 {} 保持内容不被替换时，差异才可见。

第三种选择是：

```
 set list3 [list 1 2 3 4 5 6] 
```

# xamarin.android - Drawable , Layouts, etc... in a DLL?

> ID：11343576
> 
> 赞同：0
> 
> 时间：2012-07-05T11:39:59.650
> 
> 标签：xamarin.android

Is it possible in monodroid to have Drawables, Layouts, etc... (I mean resources) in a DLL? The problem is that I have created a project that generates a DLL but it doesn't build the project structure a regular android application project builds. Is there any possibility to accomplish this? Where should I move drawables, etc... in a dll?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:50:00.150

当前版本的 Mono for Android 不支持此功能。[邮件列表上的这篇文章](http://lists.ximian.com/pipermail/monodroid/2012-May/010402.html)提供了有关它的更多详细信息。在未来版本中添加它的路线图，但我认为他们没有给出时间表。

# android - Android GCM Registration with more information

> ID：11343582
> 
> 赞同：1
> 
> 时间：2012-07-05T11:40:18.320
> 
> 标签：android, google-cloud-messaging

I implemented GCM to my app as described Getting Started page and used gcm.jar and gcm-server.jar helper libraries for easier implementation.

But I think I misunderstood something with GCM; beucase I couldn't achieve what i want.

I want that register devices with another key information not only registerId. For example this is a weather application and user may want to get notifications about one city or more cities. To achieve this, server needs the city name or postal code to fetch weather information from other sources and push back to the registered devices if there is any change at releated cities.

I register device when user stated to get notifications about something particular (for example city).

However `GCMRegistrar.register` method only takes 2 arguments, one for context and one for senderID.

How can I send additional parameters to application server?

edit: I implemented GCMIntentService and onRegistered method. I can send additional information from here with directly calling server; but i lose additional information when onRegistered method called.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:53:31.083

没有什么可以阻止您实现自己的代码以将信息发送到您的应用服务器。我已经用我的应用程序做到了。在 GCMIntentService 类中，您创建了插入代码以在您的内部执行此操作

```
protected void onRegistered(Context context,String regId) 
```

方法。您会注意到 google 的 GCM 库实际上并没有像 C2DM 那样进行任何 3rd 方应用服务器注册。如果你愿意，你可以选择使用谷歌应用引擎。

# c# - 小数计算

> ID：11343583
> 
> 赞同：1
> 
> 时间：2012-07-05T11:40:30.150
> 
> 标签：c#, .net, razor

我有一个输入信息的表格，以及一个用于男性或女性的部分的下拉框。（根据 1.23 或 1.04 给出一个值）感谢这里的精彩头脑，我现在可以工作了！但这些数字的计算仍然存在问题。

```
@{
  var total = 0m;
  var totalMessage = "";

    if (IsPost)
    {
        var age = Request["frmage"].AsInt(0);
        var weight = Request["frmweight"].AsDecimal();
        var SerCre = Request["frmSerCre"].AsDecimal();
        var sexfactor = Request["frmGender"];
        var sexValue = sexfactor == "M" ? 1.23 : 1.04;

        total = Convert.ToDecimal ((((140 - age)*weight)* sexValue )/SerCre) ;

        totalMessage = "Calculated creatinine clearance (ml/min)= " + total.ToString("0.00")+ sexValue ;
    }
} 
```

* * *

```
<form method="post">
<p>
    <label for="text1">Age:</label>
    <input type="text" name="frmAge" size="3" />Years
</p>
<p>
    <label for="text2">Weight:</label>
    <input type="text" name="frmWeight" />in Kg (1st = 6.35kg)
</p>
<p>
    <label for="text3">Serum Creatinine:</label>
    <input type="text" name="frmSerCre" />
    μmol/L
</p>
<p>
    <label for="text4">Gender:</label>
    <select name="frmGender" id="select">
        <option value="M">Male</option>
        <option value="F">Female</option>
    </select>
</p>
<p>
    <input type="submit" value="Calculate" /></p>
</form>
<p>@totalMessage</p> 
```

我是否需要转换十进制答案以便代码可以将其视为十进制？即使他们已经是！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:48:59.277

最好的方法是使用十进制显式声明您的“sexValue”变量。示例：十进制 sexValue = sexfactor == "M" ？1.23M：1.04M；并指定 M(million)，这样它就可以确定它是一个十进制值。我只在需要时使用 var，因为显式声明变量会使代码至少更具人类可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:53:20.730

```
var sexValue = sexfactor == "M" ? 1.23 : 1.04; 
```

应该：

```
var sexValue = sexfactor == "M" ? 1.23m : 1.04m; 
```

这两个值后面的“m”表明您正在处理小数。

============================================

这是我的版本：

```
@{
    ViewBag.Title = "TestButton";

    var totalMessage = "";
    if (IsPost)
    {
        var age = Request["frmage"].AsInt();
        var weight = Request["frmweight"].AsDecimal();
        var SerCre = Request["frmSerCre"].AsDecimal();
        var sexfactor = Request["frmGender"];

        var sexValue = sexfactor == "M" ? 1.23m : 1.04m;

        var total = Convert.ToDecimal((((140 - age) * weight) * sexValue) / SerCre);
        totalMessage = "Calculated creatinine clearance (ml/min)= " + (total + sexValue);
    }
}

<form method="post">
<p>
    <label for="text1">Age:</label>
    <input type="text" name="frmAge" size="3" />Years
</p>
<p>
    <label for="text2">Weight:</label>
    <input type="text" name="frmWeight" />in Kg (1st = 6.35kg)
</p>
<p>
    <label for="text3">Serum Creatinine:</label>
    <input type="text" name="frmSerCre" />
    μmol/L
</p>
<p>
    <label for="text4">Gender:</label>
    <select name="frmGender" id="select">
        <option value="M">Male</option>
        <option value="F">Female</option>
    </select>
</p>
<p>
    <input type="submit" value="Calculate" /></p>
</form>
<p>@totalMessage</p> 
```

# javascript - jQuery 从类中获取参数并在函数上使用它们

> ID：11343587
> 
> 赞同：0
> 
> 时间：2012-07-05T11:40:50.277
> 
> 标签：javascript, jquery, string, function, jquery-plugins

我有两段代码：一个表单和一个 jQuery 函数。

我的问题是我想获取类属性并在表单验证功能上使用它们。我正在使用 Validity JS 进行验证。

这就是我所拥有的：

```
<input type="text" name="name" value="" id="field_01" class=".require().minLength(5)" /> 
```

在 JS 函数中：

```
var checks_to_apply = $("#field_01").attr("class").split(" "), 
i, l;

var checks = "";

for (i = 0, l = checks_to_apply.length; i < l; i++) {

        checks += checks_to_apply[i];
    }
$("#field_01")+checks;
...
... 
```

这里的正确行为没有得到尊重。

这是我从“检查”警报中得到的：

```
.require().minLength(5) 
```

但是以这种方式执行它与直接在 jQuery 函数中执行它不同，例如：

```
$("#field_01").require().minLength(5); 
```

我在哪里错了，我认为方法中的问题可能是因为它被`.require().minLength(5)`视为字符串而不是要执行的 jQuery 代码。

请问有什么办法解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:47:56.350

当您在特定对象上执行这些函数时，您需要将整个参数创建为字符串并通过 eval() 执行它：

```
var checks_to_apply = $("#field_01").attr("class").split(" "), 
i, 
l;

var checks = "$('#field_01')";

for (i = 0, l = checks_to_apply.length; i < l; i++) {
   checks += checks_to_apply[i];
}
eval(checks); 
```

但我建议您使用不同的验证插件，因为您误用了类属性：查看[http://jquery.bassistance.de/validate/demo/](http://jquery.bassistance.de/validate/demo/)以获得更好、更清晰的注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:51:27.293

很可能你想要这样的东西

首先在这里改变`class="require minLength" minlengthdata="5"`

```
 var classes = $('#field_01').attr('class').split(" ");
    var data = $('#field_01').attr('minlengthdata');

   for (i = 0, i < classes ;  i++) {
      if(classes[i] == 'require'){
   alert('its a requred field');
        }
    if(classes[i] == 'minLength' && data > 0){
   alert('minimum value required');
        }

  } 
```

# java - 如何拆分字符串以删除某些部分

> ID：11343594
> 
> 赞同：0
> 
> 时间：2012-07-05T11:41:13.280
> 
> 标签：java, split

我有一个包含这种格式的字符串的文件：

```
ACHMU)][2:s,161,(ACH Payment Sys Menus - Online Services)][3:c,1,(M)][4:c,1,(N)]
ACLSICZ)][2:s,161,(Report for Auto Closure)][3:c,1,(U)][4:c,1,(N)]
ACMPS)][2:s,161,(Account Maintenance-Pre-shipment Account)][3:c,1,(U)][4:c,1,(N)]
ACNPAINT)][2:s,161,(Interest Run For NPA Accounts)][3:c,1,(U)][4:c,1,(N)] 
```

我需要拆分字符串，以便我拥有这种格式的数据：

```
ACHMU (ACH Payment Sys Menus - Online Services)
ACLSICZ (Report for Auto Closure)...... 
```

基本上，我想删除最后的 ")[2:s,161" 部分和 "][3:c,1,(M)][4:c,1,(N)]" 。拆分字符串对我有帮助吗？以下方法已经失败：

```
FileInputStream fs = new FileInputStream(C:/Test.txt);
BufferedReader br  = new BufferedReader(new InputStreamReader(fs));
String str;
while((str = br.readLine()) != null){
    String[] split = str.Split(")[2:s,161,")
} 
```

请帮我把垃圾放在中间和最后。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T11:47:04.033

直接的方式，使用`substring()`and `indexOf()`：

```
String oldString = "ACHMU)][2:s,161,(ACH Payment Sys Menus - Online Services)][3:c,1,(M)][4:c,1,(N)]";
String firstPart = oldString.substring(0, oldString.indexOf(")")); // ACHMU
String secondPart = oldString.substring(oldString.indexOf("(")); // (ACH Payment Sys Menus - Online Services)][3:c,1,(M)]
String newString = firstPart + " " + secondPart.substring(0, secondPart.indexOf(")") + 1); // ACHMU (ACH Payment Sys Menus - Online Services)
System.out.print(newString); 
```

**输出：**

> ACHMU（ACH 支付系统菜单 - 在线服务）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T11:45:34.517

您可以使用

```
str.replaceFirst("(.*?)\\)\\].*?(\\(.*?\\))\\].*", "$1 $2"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T11:52:00.083

```
FileInputStream fs = new FileInputStream(C:/Test.txt);
BufferedReader br  = new BufferedReader(new InputStreamReader(fs));
String str;
String newStr;
String completeNewStr="";
while((str = br.readLine()) != null)
{
    newStr = str.replace(")][2:s,161,"," ");
    newStr = str.replace("][3:c,1,(M)][4:c,1,(N)]","");
    completeNewStr+=newStr;
}

// completeNewStr is your final string 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T11:51:21.887

如果您要替换的字符串始终为 "[2:s,161," ，请在可接受的情况下将其替换为空字符串或空格。同样，对于其他字符串也是如此。

```
str.replace("[2:s,161,", ''); 
```

# java - Working with java media framework in Android

> ID：11343603
> 
> 赞同：1
> 
> 时间：2012-07-05T11:41:38.800
> 
> 标签：java, android, jmf

Is it possible to use JMF in Android? JMF has good functionality?
I'm basically trying to create a video in my android app. So any other ideas for creating the video are welcome. Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:48:20.740

`JMF` will not work in `Android.`use `MediaPlayer API` instead.

[Media and Camera](http://developer.android.com/guide/topics/media/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:59:56.907

Xuggler doesn't work on android... You should compile and use FFMEP, like in this tutorial : [FFMEP tutorial](http://www.roman10.net/how-to-build-android-applications-based-on-ffmpeg-by-an-example/)

# sql-server-2008 - 自动启用命名管道和 TCP/IP 协议 SQL Server 2008 R2

> ID：11343606
> 
> 赞同：3
> 
> 时间：2012-07-05T11:41:44.663
> 
> 标签：sql-server-2008, automation, named-pipes, tcp-ip, silent-installer

我们有一个名为“Installer”的 C# win Form 应用程序，它在客户端系统上**静默**安装各种 3rd 方软件，如 IIS、SQL Server、AVG-Free；连同我们自己的产品。我需要自动启用命名管道和 TCP/IP 协议，这还需要使用批处理文件重新启动 SQL Server (SQLEXPRESS) 服务；或 C# win 表单应用程序；或者在通过命令行安装 SQL Server 时提供适当的开关。
我已经搜索过，但这是非常独特的要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:45:10.230

我找到了解决办法，试了一下。注册表中 SQL Server 的协议信息存储在这里：

> HKLM\Software\Microsoft\Microsoft SQL Server\MSSQL10_50。**MSSQLSERVER** \MSSQLServer\SuperSocketNetLib

这适用于 MSSQLSERVER 实例，在不同实例的情况下，粗体的注册表路径将替换为该实例的名称。

它需要重新启动该实例的“SQLServer 服务”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-13T13:34:57.803

如果您想避免摆弄注册表，以下应该可以工作。

从`sqlps`提示：

```
$smo = 'Microsoft.SqlServer.Management.Smo.'
$wmi = new-object ($smo + 'Wmi.ManagedComputer').
# Enable the TCP protocol on the default instance.
$uri = "ManagedComputer[@Name='" + (get-item env:\computername).Value + "']/ServerInstance[@Name='MSSQLSERVER']/ServerProtocol[@Name='Tcp']"
$Tcp = $wmi.GetSmoObject($uri)
$Tcp.IsEnabled = $true
$Tcp.Alter()
# Enable the named pipes protocol for the default instance.
$uri = "ManagedComputer[@Name='" + (get-item env:\computername).Value + "']/ServerInstance[@Name='MSSQLSERVER']/ServerProtocol[@Name='Np']"
$Np = $wmi.GetSmoObject($uri)
$Np.IsEnabled = $true
$Np.Alter() 
```

然后从旧的重新启动 SQL Server `cmd`：

```
net stop MSSQLSERVER
net start MSSQLSERVER 
```

参考：[https ://docs.microsoft.com/en-us/sql/database-engine/configure-windows/enable-or-disable-a-server-network-protocol?redirectedfrom=MSDN&view=sql-server-ver15](https://docs.microsoft.com/en-us/sql/database-engine/configure-windows/enable-or-disable-a-server-network-protocol?redirectedfrom=MSDN&view=sql-server-ver15)

# java - JAXB 可映射 XML 元素

> ID：11343610
> 
> 赞同：1
> 
> 时间：2012-07-05T11:42:04.090
> 
> 标签：java, xml, jaxb, marshalling, xmladapter

在我的 xi-schema 的 root.class 中，元素 item 和 ohter 对象是 itemList 的一部分：

```
@XmlElementRef(name = "item", namespace = "xi", type = JAXBElement.class, required = false) 
//...
protected List<Object> itemList; 
```

我在`ObjectFactory.class`主模式中有一些项目作为 JAXBElements，如下所示：

```
@XmlElementDecl(namespace = "de-schema", name = "detailedInformation", substitutionHeadNamespace = "xi", substitutionHeadName = "item")
public JAXBElement<numItemType> createDetailedInformation(numItemType num) {
    return new JAXBElement<numItemType>(_detailedInformation_QNAME, numItemType.class, null, num);
} 
```

所以 numItemType 有一些属性和 value(num) `JAXBElement`。

**NumItemType.class：**

```
@XmlJavaTypeAdapter(numItemTypeAdapter.class)
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "numItemType", namespace = "xi", propOrder = {
    "num"
})

public class NumItemType {

    @XmlValue
    protected BigDecimal num;
    @XmlAttribute(name = "precision")
    protected String precision;
    @XmlAttribute(name = "decimals")
    protected String decimals;
    //... more Attributes

} 
```

但是当`JAXB`解组`XML`文档时，它将只有元素，例如：

```
<detailedInformation>
    <element1>1234</element1>
    <element2>5678</element2>
    <element3>bla</element3>
</detailedInformation> 
```

当我编组它时，它应该变成（就像 JAXB java 代码一样）：

```
<detailedInformation element2="5678" element3="bla">1234</detailedInformation> 
```

因此，我用 NumItemTypeAdapter extends XmlAdapter 编写了一个 numItemTypeAdapter.class

**AdaptedNum.class：**

```
public class AdaptedNum {
    @XmlElement 
    private  double element1;
    @XmlElement
    private String element2;
    @XmlElement
    private String element3;

   /** Some getter/setter methods */
} 
```

我想，这对我有帮助[http://blog.bdoughan.com/2012/02/xmlanyelement-and-xmladapter.html](http://blog.bdoughan.com/2012/02/xmlanyelement-and-xmladapter.html)，但这有点棘手：-/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:17:48.180

感谢您的评论。

这才是重点：

**演示**

```
NumItemType numItemType = new NumItemType();
numItemType.num = BigDecimal.TEN;
numItemType.decimals = "1";
numItemType.precision = "2";
root.getItemList().add(objectFactory.createDetailedInformation(numItemType)); 
```

它应该自动解组和映射 XML。

**XML 输入**

```
<detailedInformation>
     <element1>1234</element1>
     <element2>5678</element2>
     <element3>bla</element3>
</detailedInformation> 
```

使用代码：

**演示**

```
JAXBContext jc = JAXBContext.newInstance(Root.class, ObjectFactory.class);
Unmarshaller u = jc.createUnmarshaller();
File xml = new File("D:/", "test.xml");
Root root = (Root) u.unmarshal(xml); 
```

**输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<root xmlns:ns2="de-schema" xmlns:ns3="xi">
    <ns2:detailedInformation precision="2" decimals="1">10</ns2:detailedInformation>
</root> 
```

我可以将带有 DOM 的 XML 文档解析为一棵树并使用 JAXB 进行编组......

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:58:51.670

换句话说：

我想为 NumItemType.class 设置新元素以进行解组，而无需更改架构 java 代码。

**NumItemType.class**

```
package forum11343610;

import java.math.BigDecimal;
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "numItemType", namespace = "xi", propOrder = {
    "num"
})

    @XmlJavaTypeAdapter(NumItemTypeAdapter.class)
    public class NumItemType {

        @XmlValue
        protected BigDecimal num;
        @XmlAttribute(name = "precision")
        protected String precision;
        @XmlAttribute(name = "decimals")
        protected String decimals;
        //... more Attributes

    } 
```

**NumItemTypeAdapter.class**

```
public  class NumItemTypeAdapter extends XmlAdapter<AdaptedNum, NumItemType> {

    @Override
    public NumItemType unmarshal(AdaptedNum an) throws Exception {
        NumItemType nit = new NumItemType();
        nit.setNum(an.getNum);
        nit.setPrecision(an.getPrecision);
        nit.setDecimals(an.getDecimals)
        return nit;
    }

} 
```

**AdaptedNum.class**

```
 @XmlAccessorType(XmlAccessType.FIELD)
    @XmlType(name = "adaptedNum", namespace = "", propOrder = {
        "element1",
        "element2",
        "element3"
    })

    public class AdaptedNum {

        @XmlElement(name ="element1")
        protected  BigDecimal num;
        @XmlElement(name ="element2")
            private String decimals;
        @XmlElement(name ="element3")
            private String precison;
            // set/get method
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T14:23:25.290

准确找出问题可能发生的位置有点棘手。我假设您的原始模型是从 XML 模式生成的，这应该可以按原样工作，无需任何修改。我在下面尝试提供您的示例的缩小版本，这可能会有所帮助。

**根**

```
package forum11343610;

import java.util.*;
import javax.xml.bind.JAXBElement;
import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Root {

    @XmlElementRef(name = "item", namespace = "xi", type = JAXBElement.class, required = false) 
    protected List<Object> itemList = new ArrayList<Object>();

    public List<Object> getItemList() {
        return itemList;
    }

    public void setItemList(List<Object> itemList) {
        this.itemList = itemList;
    }

} 
```

**项目类型**

```
package forum11343610;

import java.math.BigDecimal;
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "numItemType", namespace = "xi", propOrder = {
    "num"
})

public class NumItemType {

    @XmlValue
    protected BigDecimal num;
    @XmlAttribute(name = "precision")
    protected String precision;
    @XmlAttribute(name = "decimals")
    protected String decimals;
    //... more Attributes

} 
```

**对象工厂**

```
package forum11343610;

import javax.xml.bind.JAXBElement;
import javax.xml.bind.annotation.*;
import javax.xml.namespace.QName;

@XmlRegistry
public class ObjectFactory {

    private static final QName _detailedInformation_QNAME = new QName("de-schema", "detailedInformation");

    @XmlElementDecl(namespace = "xi", name = "item")
    public JAXBElement<NumItemType> createItem(NumItemType num) {
        return new JAXBElement<NumItemType>(_detailedInformation_QNAME, NumItemType.class, null, num);
    }

    @XmlElementDecl(namespace = "de-schema", name = "detailedInformation", substitutionHeadNamespace = "xi", substitutionHeadName = "item")
    public JAXBElement<NumItemType> createDetailedInformation(NumItemType num) {
        return new JAXBElement<NumItemType>(_detailedInformation_QNAME, NumItemType.class, null, num);
    }

} 
```

**演示**

```
package forum11343610;

import java.math.BigDecimal;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class, ObjectFactory.class);

        ObjectFactory objectFactory = new ObjectFactory();
        Root root = new Root();

        NumItemType numItemType = new NumItemType();
        numItemType.num = BigDecimal.TEN;
        numItemType.decimals = "1";
        numItemType.precision = "2";
        root.getItemList().add(objectFactory.createDetailedInformation(numItemType));

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(root, System.out);
    }

} 
```

**输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<root xmlns:ns2="de-schema" xmlns:ns3="xi">
    <ns2:detailedInformation precision="2" decimals="1">10</ns2:detailedInformation>
</root> 
```

# powershell - 如何使用 Powershell 创建文件夹结构骨架？

> ID：11343613
> 
> 赞同：4
> 
> 时间：2012-07-05T11:42:10.643
> 
> 标签：powershell, powershell-2.0

我们的应用程序有文件夹/子文件夹结构。

每当我们添加新模块时，我们必须完全复制文件夹结构而不复制文件。

如何复制层次结构中的文件夹和子文件夹但不保留文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T12:30:45.117

这有点“hacky”，因为 Powershell 不能很好地处理这个问题……公认的智慧说使用 xCopy 或 Robocopy 但如果你真的需要使用 Powershell，这似乎可以正常工作：

```
$src = 'c:\temp\test\'
$dest = 'c:\temp\test2\'

$dirs = Get-ChildItem $src -recurse | where {$_.PSIsContainer}

foreach ($dir in $dirs)
{
    $target = ($dir.Fullname -replace [regex]::Escape($src), $dest)

    if (!(test-path $target))
    {
         New-Item -itemtype "Directory" $target -force
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T13:41:19.383

```
$source = "<yoursourcepath>"
$destination = "<yourdestinationpath>"

Get-ChildItem -Path $source -Recurse -Force |
    Where-Object { $_.psIsContainer } |
    ForEach-Object { $_.FullName -replace [regex]::Escape($source), $destination } |
    ForEach-Object { $null = New-Item -ItemType Container -Path $_ } 
```

# liferay - 扩展 Liferay MVCPortet 时自定义方法的语法

> ID：11343614
> 
> 赞同：0
> 
> 时间：2012-07-05T11:42:11.007
> 
> 标签：liferay, portlet, liferay-6

我正在使用 Liferay 6 进行开发。

我有一个关于扩展`MVCPortlet`类和提供方法的查询。

在某些示例中，在扩展`MVCPortlet`和提供自定义方法时，是否必须为方法提供参数，`ActionRequest`如下`ActionResponse`所示：

```
public void addBook(ActionRequest request, ActionResponse response) {

} 
```

所以我的问题是，这种语法是强制性的吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:04:07.093

是的，这是强制性的，因为它实现了一个动作处理程序。您还可以使用相同的参数覆盖 GenericPortlet 的 processAction 或使用 @ProcessAction 注释，但在所有情况下，您都必须有办法将实际请求传递到 portlet。这就是参数的用途。

如果不提供参数，MVCPortlet 对实际操作名称的基于反射的解析将找不到该方法。

# macos - 使用自制软件安装旧版本的 imagemagick

> ID：11343617
> 
> 赞同：6
> 
> 时间：2012-07-05T11:42:26.727
> 
> 标签：macos, imagemagick, homebrew

我需要安装旧版本的 imagemagick (6.5.9-3)，我可以在可用版本列表中看到它

```
> brew versions
6.6.1-5  git checkout 1c9f04e Library/Formula/imagemagick.rb
6.5.9-8  git checkout 685dbff Library/Formula/imagemagick.rb
6.5.9-3  git checkout 258720c Library/Formula/imagemagick.rb
6.5.6-5  git checkout 7c90d02 Library/Formula/imagemagick.rb
6.5.5-10 git checkout b01c13d Library/Formula/imagemagick.rb 
```

但是当我用

```
> git checkout 258720c Library/Formula/imagemagick.rb 
```

然后运行

```
> brew install imagemagick 
```

我收到一条错误消息

```
Error: imagemagick is a head-only formula
Install with `brew install --HEAD imagemagick 
```

如果 brew 无法安装它们，为什么要列出这些版本？所以问题仍然存在，如何使用 brew 安装旧版本的 imagemagick？

（此解决方案不再起作用：[无法通过 Homebrew 安装旧版本的 ImageMagick](https://stackoverflow.com/questions/6767968/cannot-install-older-version-of-imagemagick-via-homebrew#7473445)）

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-18T11:08:22.333

[您可以在GitHub Gist](https://gist.github.com/)中定义自己的[Homebrew](http://brew.sh/)公式并使用

```
brew install path/to/your/GistToYourPersonalImageMagickFormula 
```

例如[这里](https://gist.github.com/rochoa/10017167)或[这里](https://gist.github.com/JagdeepSingh/4b03cbeab16cc0bc729bbc6d275402d3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T04:13:18.680

`imagemagick-ruby186`如果它是为了 Ruby 1.8.6 兼容性，或者任何 6.5.9-x 版本都可以，那么在 homebrew-versions 水龙头中提供了一个 ImageMagick 6.5.9.x 公式。这将是最简单的，并且将在未来的更新中得到支持。

```
brew tap homebrew/versions
brew install imagemagick-ruby186 
```

那些 6.5.9.x 版本的原始`imagemagick`公式太旧了，以至于它们可能与当前的`brew`ruby​​ 脚本存在兼容性问题。（他们目前给出“公式至少需要一个 URL”错误；您的错误可能是一个类似的问题。）要安装这些，您可能必须在构建之前将*所有*Homebrew 回滚到那个时间点，在`git checkout`整个 repo 上，而不仅仅是一个文件。

您链接的其他答案将因同样的原因而失败 - 这是做同样事情的另一种机制，只是`imagemagick.rb`通过网络而不是通过获取旧版本的公式`git`，所以它会有同样的兼容性问题。

# asp.net-mvc-3 - MVC3 Razor 视图引擎中的局部视图

> ID：11343624
> 
> 赞同：1
> 
> 时间：2012-07-05T11:42:48.007
> 
> 标签：asp.net-mvc-3

我在 MVC3 Razor 视图引擎中有一个视图，如下图所示。现在我想确认此链接文本下显示的连接操作输出不是新页面。我怎样才能完成这项工作？

请用示例代码解释。

![在此处输入图像描述](../Images/3b2eba055308a6c520d47bd6ce5c9d48.png)

我的观点是这样的：

```
@model ESimSol.BusinessObjects.COA_ChartsOfAccount
@{
    ViewBag.Title = "Dynamic Account Head Configure";
}

<h2>Dynamic Account Head Configure</h2>

<table border="0">
    <tr>
        <td> Select an Server Connection </td>
        <td style="width:5px">:</td>
        <td>@Html.DropDownListFor(m => m.DBConnections, Model.DBConnections.Select(x => new SelectListItem() { Text = x.ConnectionName, Value =  x.DBConnectionID.ToString()}))</td>        
    </tr>
    <tr>
        <td> </td>
        <td style="width:5px"></td>
        <td>@Html.ActionLink("Confirm Connection", "ConformConnection")</td>        
    </tr>
</table> 
```

和我的控制器动作如下：

```
public ActionResult ConfirmConnection()
        {           
            return PartialView();

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:48:05.760

首先将您的标记移动到局部视图。之后定义一个呈现局部视图的操作方法。

```
[ChildActionOnly]
public ActionResult ConfirmConnection(COA_ChartsOfAccount model)
{           
    return PartialView("MyPartialView", model);
} 
```

ChildActionOnly 属性确保 HTTP 请求不能调用此操作方法。

然后，您可以随时使用 Html.Action 方法显示它。

```
@Html.Action("ConfirmConnection", "MyController", new { model = Model }) 
```

如果模型没有被您显示的页面更改，则忽略将模型作为参数传递。您可以在您的操作方法中检索它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:54:10.777

我非常喜欢在这种事情上使用 jquery 和 ajax ... [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

如果您遵循典型的 MVC 模型，那么您可以使用类似 ...

```
@Html.ActionLink("controller", "action", args); 
```

但我会选择ajax驱动的方法......

```
<script type="text/javascript">
        var ajaxBaseUrl = '@Url.Action("yourController", "ConformConnection", new { args })';
        $(link).click(function () {
            var currentElement = $(this);
            $.ajax({
                url: ajaxBaseUrl,
                data: { any other queryString stuff u want to pass },
                type: 'POST',
                success: function (data) {
                        // action to take when the ajax call comes back
                    }
                });
            });
        });
    </script> 
```

# wordpress - WordPress update_option - 在不包含 WP 文件的文件中使用

> ID：11343625
> 
> 赞同：0
> 
> 时间：2012-07-05T11:42:49.230
> 
> 标签：wordpress

我正在写一个 WP 插件并且有一个问题。

在 pludin 的设置区域，有一个表单，其中的内容通过 AJAX 发送到文件（save.php）。因此，save.php 文件无法访问 WP 的 update_option 函数。

如何使用 save.php 文件中的选项函数？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:46:11.670

```
/** Load WordPress Bootstrap */
    require_once( dirname( dirname( __FILE__ ) ) . '/wp-load.php' ); 
```

# postgresql - 使用 ODBC 驱动程序与 postgresql 连接的连接字符串是什么？

> ID：11343628
> 
> 赞同：2
> 
> 时间：2012-07-05T11:42:58.173
> 
> 标签：postgresql

我目前正在处理与 PostgreSQL 连接并将数据从该数据库检索到我的 .net 应用程序的任务，我正在使用类似的代码

```
OdbcConnection con = new OdbcConnection("Driver={PostgreSQL };Server=localhost;Port=2012;Database=DataCenter;Uid=postgres;Pwd=post@123;"); 
```

但它正在抛出一个`ODBException`. 请给我一个代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T09:49:34.970

你可以试试：

> Driver={PostgreSQL};Server=IP 地址;Port=5432;Database=myDataBase;Uid=myUsername;Pwd=myPassword;

您绝对可以在此网站上找到更多信息：http: [//www.connectionstrings.com/](http://www.connectionstrings.com/) 在您的情况下，特别是在此页面上：http: [//www.connectionstrings.com/postgre-sql#p51](http://www.connectionstrings.com/postgre-sql#p51)

如果它不能解决您的问题，那么问题不是来自连接字符串，而是来自您的 PostgreSQL 配置。您可能想检查您是否能够使用“psql”（例如）**从您的客户端计算机**连接到服务器。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-08T10:45:52.087

*例如：*

```
 string connstring = String.Format("Server={0};Port={1};User Id={2};Password={3};Database={4};",
                           "localhost", "5432", "postgres", "metin", "ATALAY"); 
```

# css - 使用 CSS 显示 XML：如何处理？

> ID：11343633
> 
> 赞同：1
> 
> 时间：2012-07-05T11:43:12.013
> 
> 标签：css, xml, dtd

我正在处理很多 .xml 文件。（百万 - 维基百科的 .xml 格式转储），它们比我想象的更难以阅读。

目前，我编写了一个 .css 文件以在浏览器中以可读的方式显示它们，并编写了一个脚本来将此 .css 的引用插入到所有文件中。

（我知道还有其他解决方案，比如 XSLT - 但我发现的所有信息使它看起来不适合文档级别 - 如果可能的话，我真的尽量不扩大这些文件的大小）

.css 适用于*某些*文件，但许多文件包含之类的实体，我收到如下错误：

“XML Parsing Error: undefined entity” 带有一个漂亮的小插图，指向或者它在引用中的亲属。

有一个articles.dtd 文件，它似乎应该连接浏览器的点（关键字-> Unicode）。它在每个文件中都被引用，例如：

```
 <!DOCTYPE article SYSTEM "../article.dtd"> 
```

并包含很多条目，例如：

```
<!ENTITY nbsp   "&#160;"> <!-- no-break space = non-breaking space,
                              U+00A0 ISOnum --> 
```

但要么我完全误解了这个文件的用途，要么它不能正常工作。

任何状况之下; 我怎样才能让这些文件显示出来；或者通过：

*   显示实体（如“&nbSp”作为纯文本）
*   完全删除实体（通过在实际文件中线性搜索/删除它们以外的任何方式）
*   按照预期将实体解释为 unicode

当然，后者更可取；绝对理想的是，通过引用某种将身份映射到Unicode的外部文件（如果这不是articles.dtd文件的用途......）

编辑：我在这里没有使用功能强大的机器.. 提取 .rars 需要几天时间。对每个文件进行任何形式的编辑都需要很长时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:57:28.207

这不是很好的方法，只是解决方法：尝试替换`&nbsp;`为`&#160;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:35:44.843

所以我已经解决了我的问题：如果它将来对任何人有帮助：

事实证明，我的问题的核心是外部 .dtd 文件已完全弃用。

.dtd 的功能实际上是像我想的那样声明我遇到问题的实体（等）；但是因为浏览器不再支持外部 .dtd 文件（浏览器根本不获取/解析它们 - 强制它们依赖于客户端计算机上安装浏览器的文件的唯一方法）实体去未申报。

我采购了一个 .XML 集合，它太旧而无法达到标准；没有意识到。

最适合我的情况的解决方案是在请求时对每个文件进行延迟处理。用一个简单的标志来区分已处理和未处理。

# r - 将数据框转换为“dist”类的对象，而无需实际计算 R 中的距离

> ID：11343637
> 
> 赞同：11
> 
> 时间：2012-07-05T11:43:20.947
> 
> 标签：r, distance

我有一个距离的数据框

```
df<-data.frame(site.x=c("A","A","A","B","B","C"),   
site.y=c("B","C","D","C","D","D"),Distance=c(67,57,64,60,67,60)) 
```

我需要将其转换为“dist”类的对象，但我不需要计算距离，因此我可以使用 dist() 函数。有什么建议吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-05T12:29:06.747

没有什么能阻止您自己创建 dist 对象。它只是一个距离向量，具有设置标签、大小等的属性。

使用你的`df`，这是如何

```
dij2 <- with(df, Distance)
nams <- with(df, unique(c(as.character(site.x), as.character(site.y))))
attributes(dij2) <- with(df, list(Size = length(nams),
                                  Labels = nams,
                                  Diag = FALSE,
                                  Upper = FALSE,
                                  method = "user"))
class(dij2) <- "dist" 
```

或者您可以`structure()`直接通过以下方式执行此操作：

```
dij3 <- with(df, structure(Distance,
                           Size = length(nams),
                           Labels = nams,
                           Diag = FALSE,
                           Upper = FALSE,
                           method = "user",
                           class = "dist")) 
```

这些给出：

```
> df
  site.x site.y Distance
1      A      B       67
2      A      C       57
3      A      D       64
4      B      C       60
5      B      D       67
6      C      D       60
> dij2
   A  B  C
B 67      
C 57 60   
D 64 67 60
> dij3
   A  B  C
B 67      
C 57 60   
D 64 67 60 
```

**注意**：上面没有检查数据是否按正确的顺序。确保`df`按照示例中的正确顺序输入数据；即在你运行我展示的代码之前进行`site.x`排序。`site.y`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T12:07:12.800

不久前我遇到了类似的问题并像这样解决了它：

```
n <- max(table(df$site.x)) + 1  # +1,  so we have diagonal of 
res <- lapply(with(df, split(Distance, df$site.x)), function(x) c(rep(NA, n - length(x)), x))
res <- do.call("rbind", res)
res <- rbind(res, rep(NA, n))
res <- as.dist(t(res)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T11:49:48.507

`?as.dist()`应该对您有所帮助，尽管它需要一个矩阵作为输入。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-01T03:54:17.243

对于从谷歌进来的人...... reshape2 库中的 acast 函数对于这类东西来说更容易。

```
library(reshape2)
acast(df, site.x ~ site.y, value.var='Distance', fun.aggregate = sum, margins=FALSE) 
```

# git - Git/SVN 如何用于从网站获取代码？

> ID：11343639
> 
> 赞同：0
> 
> 时间：2012-07-05T11:43:27.117
> 
> 标签：git, version-control, github

我对版本控制并不陌生，但对通过互联网进行版本控制很陌生。我相信会有很多其他的新手和我一样在苦苦挣扎。我不熟悉这里许多人提到的命令行方法。我敢肯定还有更多的程序员不知道该怎么做，因为他们不知道为什么它是相关的/有用的。请通过回答这个问题帮助我们理解。

首先，我想知道为什么人们可以从互联网上签出开源文件，而人们可以简单地在本地下载和构建源代码。

我想使用 Git 从 VirtualPlanetBuilder 网站获取最新代码（我知道如何下载 zip 源，这不是我要问的）。

[这里](http://code.google.com/p/msysgit/downloads/list)有很多 Git 下载，但我想知道其中是否有任何一个专门用于从 Internet 上检出文件。

[当我尝试单击此处](https://github.com/openscenegraph/VirtualPlanetBuilder)的 Git 只读链接时，我收到一条警报，提示“Firefox 不知道如何打开此地址，因为协议 (git) 未与任何程序关联”。我已经安装了 Git-1.7.11-preview20120620.exe，那么这个警报/错误是什么意思，我应该怎么做才能在我的磁盘上获取 VirtualPlanetBuilder 的源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:49:09.210

没有针对特定用例的特定版本的 Git。你只需要[克隆](http://www.kernel.org/pub/software/scm/git/docs/git-clone.html)存储库——它可以在你的网络、你的机器或互联网上。

签出代码而不是下载代码会给您带来修改代码的优势，并在需要时跟踪您的更改。它还可以更简单地更新您的副本 - `git fetch`, `git pull`.

从命令提示符：

`git clone https://github.com/openscenegraph/VirtualPlanetBuilder.git`

不过，您可能想看看获得适用于 Windows 的 Git GUI：[https ://stackoverflow.com/questions/157476/what-guis-exist-for-git-on-windows](https://stackoverflow.com/questions/157476/what-guis-exist-for-git-on-windows)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T11:50:54.440

如果您正确安装了 msysgit，您只需打开命令提示符并执行以下命令：

```
git clone git://github.com/msysgit/git.git 
```

然后进入源文件夹：

```
cd git 
```

其他 git 存储库应该没有什么不同。

# android - WebView 不会在 m.facebook.com 上加载图像

> ID：11343645
> 
> 赞同：0
> 
> 时间：2012-07-05T11:43:40.430
> 
> 标签：android, facebook, android-webview

在我的应用程序中有一个带有广告 html 页面的 webview。一些文字和一些图片，所有的图片都很好地展示了。

如果用户单击此页面，webView 将重定向到 m.facebook.com，但由于某种原因，该页面出现时没有任何图像，所有图像都丢失了。

我尝试了这些片段，但没有一个能解决我的问题：

```
 mWebview.getSettings().setJavaScriptEnabled(true); // enable javascript
   mWebview.getSettings().setAppCacheEnabled(true); 
   mWebview.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
   mWebview.requestFocus(View.FOCUS_DOWN);
   mWebview.getSettings().setPluginsEnabled(true);mWebview.getSettings().setSupportMultipleWindows (true);
   mWebview.getSettings().supportZoom();
   mWebview.canGoBack();
   mWebview.getSettings().setBlockNetworkImage(false);
   mWebview.getSettings().setBlockNetworkLoads(false);
   mWebview.getSettings().setLayoutAlgorithm(LayoutAlgorithm.SINGLE_COLUMN); 
```

因为这个应用程序是针对 iOS 开发的，所以我不能这样做，我必须在这个 webview 中显示内容。

如果可以的话请帮忙！任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:46:15.227

试试这个...

```
webview.getSettings().setUserAgentString("Mozilla/5.0 (Linux; U; Android 2.0; en-us; Droid Build/ESD20) AppleWebKit/530.17 (KHTML, like Gecko) Version/4.0 Mobile Safari/530.17"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T10:44:05.650

我发现它不适用于每晚运行 Cyanogenmod 10.1 的 Nexus S ......但由于 Mac 上的 chrome 正确运行 m.facebook.com，我将用户代理字符串应用于 Android WebView，它工作得很好！！！

这是字符串： **“Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_3) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.172 Safari/537.22”**

是不是因为facebook改变了m.facebook.com的检查逻辑？？？

顺便说一句，在更改用户代理之前和之后附上屏幕截图：![在此处输入图像描述](../Images/9ebed3081caebfbe628c5a270855ba13.png)

![在此处输入图像描述](../Images/5c56b7024644ee96c75375f69de48586.png)

# java - 在卡片布局中更改当前卡片，并在摇摆中具有滑动效果

> ID：11343649
> 
> 赞同：1
> 
> 时间：2012-07-05T11:43:47.213
> 
> 标签：java, swing, cardlayout

我正在尝试使用幻灯片效果更改卡片布局中当前可见的内容。但是我在幻灯片的开头看到了一个我无法调试/解决的轻弹。我怎样才能避免那种轻弹？

这是重现错误的示例代码：

```
import java.awt.CardLayout;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class Main {
    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel panel = new JPanel(new CardLayout());
        JLabel label1 = new JLabel("Harry Joy");
        panel.add(label1, "1");
        JLabel label2 = new JLabel("Harsh Raval");
        panel.add(label2, "2");
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
        for (int i = 0; i < 10; i++) {
            try {
                Thread.sleep(500L);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            label2.setLocation(label1.getX() + 10 - label1.getWidth(), label1.getY());
            label1.setLocation(label1.getX() + 10, label1.getY());
            label2.setVisible(true);
        }
        label2.setVisible(false);
        CardLayout cl = (CardLayout)panel.getLayout(); 
        cl.next(panel);
    }
} 
```

这里首先`label1`显示（“Harry Joy”）。然后我使`label2`（“Harsh Raval”）可见并尝试更改两者的位置以提供幻灯片效果。但是这里发生的是第一次两个标签都显示在彼此的顶部，然后它开始滑动。我怎么能阻止这种情况，我的意思是把两个标签放在一起显示？如果您运行一次，您可以更好地理解我的意思。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:35:35.973

主要问题是你踩到了 CardLayout 的脚趾。CardLayout 都管理组件的边界（位置和大小）和可见性，所以你的循环在这里：

```
 for (int i = 0; i < 10; i++) {
        try {
            Thread.sleep(500L);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        label2.setLocation(label1.getX() + 10 - label1.getWidth(), label1.getY());
        label1.setLocation(label1.getX() + 10, label1.getY());
        label2.setVisible(true);
    } 
```

与 CardLayout 的作用相冲突。默认情况下，CardLayout 会自动显示您添加的第一个组件并隐藏所有其他组件。它还将所有组件的边界设置为相同的边界。

在第一次迭代结束时， label2 的可见性发生变化（从`false`到`true`），最终触发您的 CardLayout 重新执行组件的布局，将所有组件的边界设置为相同的边界，这就是您看到重叠的原因。CardLayout 并不是要让多个组件同时可见。

请注意，您是在 EDT（事件调度线程）上运行所有这些，这确实是一个坏主意。它可能导致死锁和不可预知的行为（例如您在此处看到的行为）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T12:09:26.010

可能是这个[http://java-sl.com/tip_slider.html](http://java-sl.com/tip_slider.html)？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T13:45:39.320

一些评论，可能只是评论

*   想法`Thread.sleep`是正确的，但只是从`Runnable.Thread`

*   Swing GUI 在那里`Swing Timer`，

*   `Swing Timer`保证按`JComponents`标准移动任何可见的（不闪烁）`LayoutManager`

但在这个（我的代码示例）案例中，我再次使用 Swing Timer，也不是所有事件都将在 EDT 上完成，方法是从 Runnable 调用自己的生活而不影响其余的 Swing 事件 GUI ei，

请注意，此问题基于 AWT 嵌套/继承，例如对于 JComboBoxes 弹出窗口（调整大小并使用 doLayout()）不起作用

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class ShakingButtonDemo implements Runnable {

    private JButton button;
    private JRadioButton radioWholeButton;
    private JRadioButton radioTextOnly;

    public static void main(String[] args) throws Exception {
        SwingUtilities.invokeLater(new ShakingButtonDemo());
    }

    @Override
    public void run() {
        radioWholeButton = new JRadioButton("The whole button");
        radioTextOnly = new JRadioButton("Button text only");
        radioWholeButton.setSelected(true);
        ButtonGroup bg = new ButtonGroup();
        bg.add(radioWholeButton);
        bg.add(radioTextOnly);
        button = new JButton("  Shake with this Button  ");
        button.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                shakeButton(radioWholeButton.isSelected());
            }
        });
        JPanel p1 = new JPanel();
        p1.setBorder(BorderFactory.createTitledBorder("Shake Options"));
        p1.setLayout(new GridLayout(0, 1));
        p1.add(radioWholeButton);
        p1.add(radioTextOnly);
        JPanel p2 = new JPanel();
        p2.setLayout(new GridLayout(0, 1));
        p2.add(button);
        JFrame frame = new JFrame();
        frame.setTitle("Shaking Button Demo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(p1, BorderLayout.NORTH);
        frame.add(p2, BorderLayout.SOUTH);
        frame.setSize(240, 160);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    private void shakeButton(final boolean shakeWholeButton) {
        final Point point = button.getLocation();
        final Insets margin = button.getMargin();
        final int delay = 75;
        Runnable r = new Runnable() {

            @Override
            public void run() {
                for (int i = 0; i < 30; i++) {
                    try {
                        if (shakeWholeButton) {
                            moveButton(new Point(point.x + 5, point.y));
                            Thread.sleep(delay);
                            moveButton(point);
                            Thread.sleep(delay);
                            moveButton(new Point(point.x - 5, point.y));
                            Thread.sleep(delay);
                            moveButton(point);
                            Thread.sleep(delay);
                        } else {// text only
                            setButtonMargin(new Insets(margin.top, margin.left + 3, margin.bottom, margin.right - 2));
                            Thread.sleep(delay);
                            setButtonMargin(margin);
                            Thread.sleep(delay);
                            setButtonMargin(new Insets(margin.top, margin.left - 2, margin.bottom, margin.right + 3));
                            Thread.sleep(delay);
                            setButtonMargin(margin);
                            Thread.sleep(delay);
                        }
                    } catch (InterruptedException ex) {
                        ex.printStackTrace();
                    }
                }
            }
        };
        Thread t = new Thread(r);
        t.start();
    }

    private void moveButton(final Point p) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                button.setLocation(p);
            }
        });
    }

    private void setButtonMargin(final Insets margin) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                button.setMargin(margin);
            }
        });
    }
} 
```

# android - 安卓中的手势

> ID：11343656
> 
> 赞同：1
> 
> 时间：2012-07-05T11:44:12.287
> 
> 标签：android

> **可能重复：**
> [使用 Ontouch 侦听器检测多点触控 Android](https://stackoverflow.com/questions/8002003/detect-multitouch-with-ontouch-listener-android)

我有一个关于检测触摸的问题。这是android中的任何方法来检测用户是否同时触摸一个或两个手指？我有图像视图，我想知道我用一根或两根手指触摸那张照片

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:03:38.017

用于触摸检测的相同[View.onTouch(View, MotionEvent) 。](http://developer.android.com/reference/android/view/View.OnTouchListener.html#onTouch%28android.view.View,%20android.view.MotionEvent%29)MotionEvent 对象具有[getPointerCount()](http://developer.android.com/reference/android/view/MotionEvent.html#getPointerCount%28%29)，它将返回此事件中包含的数据指针的数量。如果它返回 a `value > 1`，则您有一个多点触控。它至少需要`Android 5`

# javascript - 如何使用 jQuery 自动完成插件组织backbone.js 应用程序？

> ID：11343657
> 
> 赞同：1
> 
> 时间：2012-07-05T11:44:15.757
> 
> 标签：javascript, architecture, backbone.js

我对 Backbone.JS 还很陌生，不知道应该为我的应用程序创建多少视图、集合、模型。

我的申请由两部分组成。在左侧我有一个输入标签，它应该支持自动完成。自动完成下拉菜单将结果显示为按钮。当用户单击任何按钮时，我需要更新数据库并将该按钮添加到 dom 中的单独视图中，其中包含已保存的实体。我做了一个小线框。

![应用程序的线框](../Images/1171407c82c639ef1b2787fe2482f76c.png)

我不需要代码，只需帮助我了解一般架构即可。我应该为左侧、每个按钮和右侧创建单独的视图吗？收藏呢？其中有多少？我阅读了很多backbone.js 文档，但是当我开始自己做时 - 有点困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T15:11:51.203

你的模型可以用不同的方式来解释（这就是骨干的美......）。

一种方法可能是一个主视图，它将保存和处理其他 2 个子视图的事件：

1.  自动完成视图
2.  选定的按钮视图

主视图将处理第一个视图的数据库连接，并在成功保存操作时对其调用渲染，并在第二个视图的删除触发器上删除按钮，然后渲染第二个视图。

当然，它可以通过各种其他方式实现：

[这个](http://www.youtube.com/watch?v=vJwgIth1I_w)简单的视频可以帮助您入门。

[这篇](https://stackoverflow.com/questions/9663428/how-to-correctly-add-a-jquery-ui-autocomplete-widget-using-backbone-js/9663694#9663694)文章可以提供帮助。

看看@miguelr 的答案。

# actionscript-3 - flv视频结束后如何转到帧标签？

> ID：11343660
> 
> 赞同：1
> 
> 时间：2012-07-05T11:44:22.333
> 
> 标签：actionscript-3

我在 layer(flv1) 中导入了视频 FLV 播放器（没有皮肤）flv 播放器实例名称是“myflvplayer1”

动作：第 1 帧

```
myflvplayer1.stop();
myflvplayer1.visible=false;
myflvplayer1.fullScreenTakeOver=false;

try{
stage.displayState = StageDisplayState.FULL_SCREEN;
}catch(e)
{
    //do nothing
} 
```

直到第 142 帧播放动画，之后：

```
stop();
myflvplayer1.visible=true;
myflvplayer1.play(); 
```

（所以这里的视频开始全屏播放）现在，当这个视频结束时，我希望它跳转到帧标签“主”我放了许多导航按钮的地方（我的主菜单页面）

所以任何帮助都会非常棒！这是基于 DVD 的演示文稿，因此所有内容都在本地加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T23:21:12.317

你好阿布舍克试试这个

as2

```
myflvplayback.addEventListener("complete",completefunc);
function completefunc(e)
{
    trace("completed");
    //do any thing you want at complete like gotoAndPlay /gotoAndStop ("Framelabel");
} 
```

as3

```
myflvplayback.addEventListener(Event.COMPLETE,completefunc);
function completefunc(e)
{
    trace("completed");
    //do any thing you want at complete like gotoAndPlay /gotoAndStop ("Framelabel");
} 
```

如果喜欢我的回答，请给我一个加号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:59:54.363

`gotoAndPlay("main");` 如果这不起作用，请使用 ' 而不是 "（不确定是哪一个）。

顺便说一句，并不难找到。如果你谷歌这个，你会很容易找到它。

# ajax - 使用 Perl 从 UTF-8 网页上传带有 application/octet-stream 的图像

> ID：11343663
> 
> 赞同：2
> 
> 时间：2012-07-05T11:44:33.210
> 
> 标签：ajax, perl, file-upload, utf-8

我有一个 Javascript/Ajax 文件上传器（[https://github.com/Valums-File-Uploader/file-uploader](https://github.com/Valums-File-Uploader/file-uploader)），它可以在 latin-1 编码的网页上正常工作。现在我尝试在 UTF-8 环境中使用它，但它失败了。
这是我的代码（我只需要变量中的图像，保存在其他地方完成）：

```
sub parseMultiPart{
  use CGI;
  use IO::Handle;
  use Encode;

  $CGITempFile::TMPDIRECTORY = $ENV{ADFRAME_TMP_FILES};
  $CGI::POST_MAX=1024 * 1024 * 5;
  #$CGI::PARAM_UTF8=1;
  my $cgi = new CGI;
  foreach $key ($cgi ->param) {
    my $upload = $cgi->upload($key);
    if(defined $upload) {

       # THIS DOES NOTHING SINCE UPLOAD IS NOT DEFINED

        my $file=$cgi->param($key);
        binmode $upload;
        my $data;
        while (read($upload_file, $upload, 1024)) {
            $main::in{$key} .=  $data;
        }

        $main::inct{$key} = $cgi->uploadInfo($file)->{'Content-Type'};
    }
    else {
        my @val = $cgi->param($key);

        # THIS DOES THE WORK
        if (scalar @val == 1) {
            $main::in{$key} = $val[0];
        }
        # /

        else {
            $main::in{$key} = \@val;  # save value as an array ref
        }
    }

}
}
1; 
```

然后在下一步中：

```
if (open (HI, ">$storePath/$filename")) {
        binmode HI;
        print HI $data;
        close(HI);
} 
```

这里有几个问题：

*   `CGI->upload()`不认为这是上传。我现在才注意到，因为它从来没有引起任何问题。
*   使用`multipart/formdata`会导致服务器中止并且不发送任何内容。
*   像这样使用它，我收到一条`Wide character in print`消息。
*   如果我`encode $val[0]`不会收到消息，则生成的文件仍然已损坏。
*   如果`binmode $val[0]`我得到`wide characters in print`

有人可以帮忙吗？？

谢谢，
托马斯

编辑：这是“关注 TCP 流”：

* * *

```
 POST /cgi-bin/adframe/upload/image_upload.html?ITEM_ID=1&CATEGORY=1_1&qqfile=button_logout.gif HTTP/1.1
 Host: productspecial
 Connection: keep-alive
 Content-Length: 583
 Origin: http://productspecial
 X-Mime-Type: image/gif
 X-Requested-With: XMLHttpRequest
 X-File-Name: button_logout.gif
 User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.47 Safari/536.11
 Content-Type: application/octet-stream
 Accept: */*
 Referer: http://productspecial/cgi-bin/adframe/online_produktdatenbank/1_komplettbikes/1_1_fullsuspension/1_1_fullsuspension.html?ITEM_ID=1&id=134149338812700131663
 Accept-Encoding: gzip,deflate,sdch
 Accept-Language: de-DE,de;q=0.8,en-US;q=0.6,en;q=0.4
 Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3

 GIF89aD......................................................................................................!.......,....D........ud...Y.*y....qJ....8.....6..[..rh,....ez..lI.q.D....&........n.....B.....>..L..u.............$...........}..............................}..}........................}....}...}.........}...................}...4h.............A...H.(P.....q..qB....<.8.CI..I..4y..H..^Z..kB...=t.S...>......(J.D{*U*R.@z..R...@0.
.>.. k@
...@.....g..m%....p.V.K.n].t..........I.,A0a....^l......
n...a..+..........V....p.T.FMa5j..N..M.....s......
.y.........+_..A....K.N.....;HTTP/1.1 200 OK
Date: Thu, 05 Jul 2012 13:32:09 GMT
Server: Apache/2.2.20 (Ubuntu)
Cache-Control: no-cache
Vary: Accept-Encoding
Content-Encoding: gzip
Content-Length: 104
Keep-Alive: timeout=5, max=100
Connection: Keep-Alive
Content-Type: text/html; charset=utf-8

.............MNN-..*)*M.I..I.R.O.-...MLO-./J,.wqus....+.KW.)-..R..utw.7.C..4SKsSK...4u...*..5...~.
.Y... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T20:44:16.703

您的 Content-Type 不是用于 CGI->upload 的一种，来自 CGI 文档

> 如果 POST 数据的类型不是 application/x-www-form-urlencoded 或 multipart/form-data，则不会处理 POST 数据，而是在名为 POSTDATA 的参数中按原样返回。要检索它，请使用如下代码：
> 
> ```
>  my $data = $query->param('POSTDATA'); 
> ```

**更新：**这是针对 CGI.pm-3.59 的补丁，以避免 PUTDATA/POSTDATA 损坏

它还提供了 PUTDATA/POSTDATA 方便的方法来代替 param

```
diff -ruN CGI.pm-3.59-orig/lib/CGI.pm CGI.pm-3.59/lib/CGI.pm
--- CGI.pm-3.59-orig/lib/CGI.pm 2011-12-30 05:31:41.000000000 -0800
+++ CGI.pm-3.59/lib/CGI.pm  2012-07-25 05:08:19.656250000 -0700
@@ -20,7 +20,7 @@

 # The revision is no longer being updated since moving to git. 
 $CGI::revision = '$Id: CGI.pm,v 1.266 2009/07/30 16:32:34 lstein Exp $';
-$CGI::VERSION='3.59';
+$CGI::VERSION='3.5901';

 # HARD-CODED LOCATION FOR FILE UPLOAD TEMPORARY FILES.
 # UNCOMMENT THIS ONLY IF YOU KNOW WHAT YOU'RE DOING.
@@ -457,8 +457,12 @@
     my @result = @{$self->{param}{$name}};

     if ($PARAM_UTF8) {
-      eval "require Encode; 1;" unless Encode->can('decode'); # bring in these functions
-      @result = map {ref $_ ? $_ : $self->_decode_utf8($_) } @result;
+      if( $name eq 'PUTDATA' or $name eq 'POSTDATA' ){
+        warn "skip decoding utf8 for special param $name\n" if DEBUG;
+      } else {
+        eval "require Encode; 1;" unless Encode->can('decode'); # bring in these functions
+        @result = map {ref $_ ? $_ : $self->_decode_utf8($_) } @result;
+      }
     }

     return wantarray ?  @result : $result[0];
@@ -692,7 +696,7 @@
         && defined($ENV{'CONTENT_TYPE'})
         && $ENV{'CONTENT_TYPE'} !~ m|^application/x-www-form-urlencoded|
    && $ENV{'CONTENT_TYPE'} !~ m|^multipart/form-data| ) {
-       my($param) = $meth . 'DATA' ;
+       my($param) = $meth . 'DATA' ; # POSTDATA/PUTDATA
        $self->add_parameter($param) ;
        push (@{$self->{param}{$param}},$query_string);
        undef $query_string ;
@@ -985,6 +989,14 @@

 %SUBS = (

+'PUTDATA'=> <<'END_OF_FUNC',
+sub PUTDATA   { local $CGI::PARAM_UTF8=0; shift()->param('PUTDATA', @_)  }
+END_OF_FUNC
+
+'POSTDATA'=> <<'END_OF_FUNC',
+sub POSTDATA  { local $CGI::PARAM_UTF8=0; shift()->param('POSTDATA', @_) }
+END_OF_FUNC
+
 'URL_ENCODED'=> <<'END_OF_FUNC',
 sub URL_ENCODED { 'application/x-www-form-urlencoded'; }
 END_OF_FUNC 
```

# perl - 用于屏蔽日志文件中敏感数据的 Unix 脚本？

> ID：11343665
> 
> 赞同：0
> 
> 时间：2012-07-05T11:44:46.953
> 
> 标签：perl, unix, sed, awk

我必须编写一个脚本来屏蔽日志文件中的敏感数据。我很困惑如何实现这个？哪个选项最适合做同样的事情：

*   使用 AWK
*   使用 SED
*   使用 SED、AWK
*   使用 PERL
*   使用简单的文件读取和搜索逻辑。

如果您有任何建议，请分享。

```
Input File:
Name  Jack
Add   New York
Phone 333-333-3434

Output File:
Name   Jack
Add    New York
Phone  XXX-XXX-XXXX 
```

我用awk试过这个：

```
cat $HOME_DIR/testdata.dat | awk 'BEGIN{ 
    i=1; 
    FS=" "; 
} 
{ 
    for (i = 1; i < NF; i++) { 
        fld = $(i); 
        if( fld == "PHONE") { 
            printf ("%s$%s", $(i),$(i+1)); 
        } 
        else if( fld == "PIN") { 
            printf ("%s$%s", $(i),$(i+1)); 
        } 
        else if( fld == "DOB") { 
            printf ("%s$%s", $(i),$(i+1)); 
        } else { 
            printf ("%s", $(i)); 
        } 
    } 
    printf ("\n"); 
} 
END{ 
    i=1 
}' > $HOME_DIR/testdataupd.dat 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:02:30.970

一种使用方式`awk`。当找到 words`phone`或在行首（忽略大小写）时，在第二个字段中替换除 . 之外的`dob`所有字符。该命令对每一行执行。`pin``-``X``print`

```
awk '
    BEGIN { 
        IGNORECASE = 1
    }
    $1 ~ /^(phone|dob|pin)$/ {
        gsub( /[^-]/, "X", $2 )
    }
    { print }
' $HOME_DIR/testdata.dat >$HOME_DIR/testdataupd.dat 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:58:56.957

这是一个 90% 的答案，但没有按照您的要求格式化 X。

```
sed -re 's/(Phone )(([0-9]+)-?)*/\1xxxxx/g' 
```

更多领域

```
sed -r -e 's/(Phone )(([0-9]+)-?)*/\1xxxxx/g' -e 's/regexp-to-search-for/replacement-pattern/g' … 
```

注意：您可以将 / 替换为您喜欢的字符，只要 3 次都相同，例如`s~regexp~rep~g`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T13:12:59.090

这可能对您有用（GNU sed）：

```
sed '/^Phone\|^DOB\|^Pin/!b;h;s/\S*\s*//;s/[^-]/X/g;H;x;s/\(\S*\)\n\(\S*\)/\2/' file 
```

解释：

*   `/^Phone\|^DOB\|^Pin/!b`仅处理行开头`Phone`，`DOB`或`Pin`（在此处添加更多内容）
*   `h`复制模式空间 (PS) 以保留空间 (HS)，即复制当前行。
*   `s/\S*\s*//`删除第一个字段和后面的空格。
*   `s/[^-]/X/g`用's 在剩余字段中替换所有出现的`-`'s 。`X`
*   `H`附加一个换行符，然后将 PS 附加到 HS。
*   `x`用 PS 交换 HS
*   `s/\(\S*\)\n\(\S*\)/\2/`用修改后的字段替换原来的第二个字段。

# javascript - 在数组jQuery中查找值

> ID：11343672
> 
> 赞同：1
> 
> 时间：2012-07-05T11:45:22.957
> 
> 标签：javascript, jquery

所以我需要获取数组中包含特定 id 的部分，以便我可以使用其中的其他变量。

这是我当前创建数组的代码：

```
<?php foreach ($list_subjects as $subject): ?>
    subjects.push({
        id: parseInt(<?php echo $subject['subject_id']; ?>),
        subject_name: "<?php echo $subject['subject_name']; ?>",
        course_type: "<?php echo $subject['course_type']; ?>",
        num_videos: parseInt(<?php echo $subject['num_videos']; ?>),
        subject_tag: "<?php echo $subject['subject_tags']; ?>"
    });
<?php endforeach; ?> 
```

（我知道以这种方式混合 PHP 不是一个好习惯，但请耐心等待这个问题）

这是我用来至少尝试检查值是否在数组中的代码，但它每次都返回-1，并且 course_id 的值在数组中。

> 警报（$.inArray（course_id，subjects.id））；

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:57:39.893

该`$.inArray(course_id, subjects.id)`部分将不起作用，就像数组`id`内对象的键一样`subjects`（因此不是 的属性`subjects`）。试试这样：

```
function inArrayById(array, value)
    $.each(array, function(i, element) {
        if(element.id === value){
            return true;
        }
    });
    return false;
}

alert( inArrayById(subjects, course_id) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:00:20.103

这是 Secators 函数的一个变体，除了它可以在没有 jQuery 的情况下工作。

```
function inArrayById(array, value) {
    for(var i = 0; i < array.length; i++) {
        if(array[i]["id"] === value) return true;
    }

    return false;
} 
```

# android - 在 SQl lite 中进行内部连接

> ID：11343674
> 
> 赞同：0
> 
> 时间：2012-07-05T11:45:36.763
> 
> 标签：android

我在一个 android 应用程序中工作，我想在我的应用程序本地数据库中获取详细信息。我正在使用的查询具有内连接，因此它不返回值。但是，如果我使用没有内连接的查询，则以相同的方法返回值。请帮我

```
public boolean isAvailableTransitionFile(String MenuName) {

    String query = "select * from Transition_File_Table inner join item_sync on Transition_File_Table.Menuitem_id=item_sync.id where item_sync.itemName=?";
    Cursor cursor = this.db.rawQuery(query,
            new String[] { String.valueOf(MenuName) });
    Log.e("Count", cursor.getCount() + "");
    if (cursor.moveToFirst()) {
        return true;
    } else {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:54:57.383

将您的选择查询更改为：

```
String query = "SELECT * FROM Transition_File_Table 
a INNER JOIN Transition_File_Table b 
ON a.Menuitem_id=b.id WHERE b.itemName=?"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:53:38.837

我建议你，不要使用**rawQuery**。你会找到有用的替代方法来完成你的工作。检查android的记事本示例以获得一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T11:54:07.567

看着查询

```
select *
from Transition_File_Table 
inner join item_sync 
    on Transition_File_Table.Menuitem_id=item_sync.id 
where item_sync.itemName=? 
```

这会将 Transition_File_Table 的行连接到 item_sync 的行，其中 Transition_File_Table 的 Menuitem_id 列与 item_sync 表中的 id 列匹配。

如果连接没有返回结果，这意味着可以连接 n 行，这意味着没有 item_sync id 的值与 Transition_File_Table 的 Menuitem_id 列中的值匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T11:59:50.153

SQL 问题通常是由于 SQL 中的语法使用错误造成的，请务必在程序中使用它们之前对其进行测试。我在这里找到了一个类似的帖子：

[如何在我的 Android 应用程序中加入两个 SQLite 表？](https://stackoverflow.com/questions/4957009/how-do-i-join-two-sqlite-tables-in-my-android-application)

你应该试试这段代码：

```
String query = "select * from Transition_File_Table TF inner join item_sync IS on
TF.Menuitem_id=IS.id where IS.itemName=?";

Cursor cursor = this.db.rawQuery(query,new String[]{String.valueOf(MenuName)}); 
```

# ravendb - 浏览嵌入在 Windows 窗体中的 RavenDb 数据库

> ID：11343676
> 
> 赞同：3
> 
> 时间：2012-07-05T11:45:59.060
> 
> 标签：ravendb

我在 Windows 窗体应用程序中有一个嵌入式数据库。是否可以使用 ravendb management studio 浏览它？我发现的所有示例都使用了 Web 应用程序方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:26:52.213

Fitzchak Yitzchaki 提供的答案几乎 100% 正确（没有提及 Windows 窗体）。许多学分也归功于这个数据库的设计者，他帮助我解决了一些问题。

所以总结一下访问 RavenDb Management Studio 需要做的事情：

1.  设置`UseEmbeddedHttpServer`为 Fitzchak Yitzchaki 提供的答案。
2.  Raven.Studio.xap 必须与应用程序主可执行文件位于同一目录中。
3.  应用程序必须以管理员权限运行（“以管理员身份运行”）。

我希望这篇文章能对某人有所帮助。

# c# - 使用 Int64 进行位移

> ID：11343686
> 
> 赞同：7
> 
> 时间：2012-07-05T11:46:36.497
> 
> 标签：c#, .net, bit-shift, int64

需要移动 Int64 变量。我正在从数据库文件中解析伪数学函数。变量是 uint32 或 int32，所以我确实将它们放入 Int64 以平等地处理它们而不会丢失任何东西。在我的一个树节点中，我需要对 Int64 进行位移。

不幸的是，移位运算符不适用于 Int64。是否有一种我不知道的标准位移 Int64 方法？

```
//Int32 Example works
int a32 = 1;
int b32 = 2;
int c32 = a32 >> b32;

//Int64 Example does not compile
Int64 a64 = 1;
Int64 b64 = 2;
Int64 c64 = a64 >> b64; //invalid operator 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-05T11:48:36.047

我相信右移运算符（在 C# 中）`int`的右手操作数始终采用 ，即使左操作数不是`int`。

[MSDN 上](http://msdn.microsoft.com/en-us/library/aa691377%28v=VS.71%29.aspx)的 C# 规范中的官方详细信息。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-05T11:49:41.413

要移位的位数必须是`int`.

例如：

```
int shift = 3;
long foo = 123456789012345;
long bar = foo >> shift; 
```

# javascript - Facebook弹出记住用户喜欢什么时候

> ID：11343687
> 
> 赞同：0
> 
> 时间：2012-07-05T11:46:48.457
> 
> 标签：javascript, jquery, html, setcookie

我已经在我的页面上实现了一个代码，它显示了一个类似于弹出窗口的 facebook。我已将此代码插入我的网站

```
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js'></script>
<script src="https://gj37765.googlecode.com/svn/trunk/html/[www.gj37765.blogspot.com]jquery.colorbox-min.js"></script>
<link rel="stylesheet" href="https://gj37765.googlecode.com/svn/trunk/html/%5Bwww.gj37765.blogspot.com%5Dfbpopup.css" type="text/css" />
<script type="text/javascript">
</script>
<script type="text/javascript">
jQuery(document).ready(function(){
if (document.cookie.indexOf('visited==false') == -1) {
var fifteenDays = 1000*60*60*24*30;
var expires = new Date((new Date()).valueOf() + fifteenDays);
document.cookie = "visited=true;expires=" + expires.toUTCString();
$.colorbox({width:"400px", inline:true, href:"#mdfb"});
}
});
</script>
<div id="mdfb" style='padding:10px; background:#fff;'>
<h3 class="mdbox-title">Кликни LIKE и стани наш фан да бидеш известен на твојот профил за сите попусти!<center><p style="line-height:3px;" >?</p></center></h3>
<center>
<iframe id="fb-like" src="//www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2Fshoppingkatalog&amp;width=300&amp;colorscheme=light&amp;show_faces=true&amp;border_color=%23ffffff&amp;stream=false&amp;header=false&amp;height=258" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:300px; height:258px;" allowtransparency="true"></iframe>
</center><p style=" float:right; margin-right:35px; font-size:9px;" >Powered By <a style=" font-size:9px; color:#3B78CD; text-decoration:none;" href="http://www.shoppingkatalog.com">Шопинг Каталог</a></p>
</div> 
```

现在我需要记住当用户点击喜欢时，我需要创建 cookie 或类似的东西来记住哪个用户喜欢我的页面，谁不喜欢。如果用户不喜欢我在 facebook 上的页面，则再次显示弹出窗口，如果用户按下喜欢，则不再显示此弹出窗口。谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:53:39.303

如果您想在客户端执行此操作，请查看`localStorage`：

要设置值：

```
localStorage.setItem('liked', 'true'); 
```

要获取值：

```
value = localStorage.getItem('liked'); 
```

如果您必须支持旧版浏览器，这里有一篇我觉得有用的关于[cookie的文章。](http://www.quirksmode.org/js/cookies.html)

# iphone - 我需要帮助按字母顺序排列我的表格视图

> ID：11343688
> 
> 赞同：0
> 
> 时间：2012-07-05T11:46:53.873
> 
> 标签：iphone, objective-c, xcode, ios5

我正在尝试使用此代码：

```
sortedArray = [anArray sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)]; 
```

我应该把它放在我的 viewDidLoad 中吗？我正在使用 NSMutableArray 来填充表格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:49:35.117

我认为您是从对服务器的 api 调用中获取这些值的。如果在 api 调用之后调用 reload 函数之前那样对数组进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:48:19.943

您应该将其用作 tableview 的数据源。并返回委托方法中索引处的对象。

排序后，重新加载表格视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T12:11:09.927

您基本上需要在第一次请求从您的数据获取数据之前`UITableViewDataSource`或将数据加载到`NSMutableArray`. 如果您的数据已加载到您的 中`viewDidLoad:`，则只需在加载数据后立即进行排序，您将能够`NSTableViewDataSource`使用数组中的项目响应请求，它们将被排序。

如果项目到达缓慢，您可能希望延迟排序，这样您就不会执行太多排序操作，但基本上是在您告诉 NSTableView 新数据到达时执行它。因此，例如，如果您从服务器接收数据（您声明不是），您可以在收到另一批条目后执行此操作。

你实现了你的 UITableViewDataSource 方法了吗？

# django - 如何解决django：UnboundLocalError

> ID：11343690
> 
> 赞同：-2
> 
> 时间：2012-07-05T11:47:12.253
> 
> 标签：django, view, django-views, formset

我有给定的视图和模板代码，当我尝试运行此代码时，我得到以下错误。当我搜索这种类型的错误时，我发现它发生在变量和函数具有相同名称时，但可以在我的代码中更正它。

```
 Environment:

 Request Method: GET
 Request URL: http://127.0.0.1:8000/budget/show/
 Django Version: 1.2.5
 Python Version: 2.7.1
 Installed Applications:
 ['django.contrib.admin',
  'django.contrib.auth',
  'django.contrib.contenttypes',
  'django.contrib.sessions',
  'django.contrib.sites',
  'django.contrib.messages',
  'mysite.bug']
  Installed Middleware:
  ('django.middleware.common.CommonMiddleware',
  'django.contrib.sessions.middleware.SessionMiddleware',
  'django.middleware.csrf.CsrfViewMiddleware',
  'django.contrib.auth.middleware.AuthenticationMiddleware',
   'django.contrib.messages.middleware.MessageMiddleware')

 Traceback:
    File "/usr/lib/pymodules/python2.7/django/core/handlers/base.py" in get_response 100\.                     response = callback(request, *callback_args,   **callback_kwargs)
    File "/home/nimesh/budman/mysite/../mysite/bug/views.py" in shown 252\.             
    return render_to_response('budgetfinalform3.html', {'account_number': c,'period':d,'month':e,'year':f,'formsetlist': formset,'child':child},context_instance=RequestContext(request))

     Exception Type: UnboundLocalError at /budget/show/
     Exception Value: local variable 'formset' referenced before assignment 
```

请帮我消除这个错误。

```
def show (request):
b = request.session["s1"]
c = request.session["s2"]
d = request.session["s3"]
a = account_period.objects.filter(year=d).values('id')
e = account_period.objects.filter(year=d).values('month')
f = account_period.objects.filter(id = a).values('year')

try:
        child = account_tab.objects.filter(parent_account_number=c).values('account_number')
        noofchild = account_tab.objects.filter(parent_account_number=c).count()
except account_tab.DoesNotExist:
        noofchild = 0
if noofchild != 0 :   
       formsetlist = []

       for i in range(0, noofchild):
        formsetlist.append(formset_factory(bu, extra=b))
    if request.method == 'POST':

     formsetlist2.append(formsetlist[i](request.POST))

     if formsetlist2[i].is_valid():
       j=0
       for form in formsetlist2[i].forms:
         z = account_tab.objects.get(account_number = child[i:(i+1)])
         x = form.cleaned_data['value']
         y = account_period.objects.get(id=a[j:(j+1)])
         try:
                uip = budget.objects.get(account_no = child[i:(i+1)],account_period = a[j:(j+1)])
                if uip.budget_amount != x:

                  uip.budget_amount = x
                  uip.save()

         except budget.DoesNotExist:

                w = budget(account_no = z, account_period = y, budget_amount = x, created_by_login = 'me')
                w.save()
         j=j+1
       pass
       return HttpResponse('thanks')

    else:
             return render_to_response('budgetfinalform3.html', {'account_number': c,'period':d,'month':e,'year':f,'formsetlist': formset,'child':child},context_instance=RequestContext(request))
     #return HttpResponse(mes) 
```

模板代码是

```
 <html>
    <head>
    <title>BUDGET</title>
    </head>
    <body>
    <h1>BUDGET MANAGEMENTS</h1>
    <h2>Your Account Number is : {{ account_number }}.</h2> <h2>You Chose {{ period }} {{month}} as period</h2>   

    {% if form.errors %}
    <p style="color: red;">
        Please correct the error{{ form.errors|pluralize }} below.
    </p>
    {% endif %}

    <form action="." method="post">{% csrf_token %}
    {% for formset in formsetlist %}
    {{ formset.management_form }}
    {{child}}

    <table>
    {% for form in formset.forms %}

    {% if forloop.counter == 0  %}
     {{child.1}}
    {% endif%}
    {{ form }}
    {% endfor %}
    </table>   
    {% endfor %}
    <input type="submit" value="Submit">
    </form>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:04:45.673

```
return render_to_response('budgetfinalform3.html', {'account_number': c,'period':d,'month':e,'year':f,'formsetlist': formset,'child':child},context_instance=RequestContext(request)) 
```

使用`formset`但它看起来/听起来像你的意思`formsetlist`：

```
return render_to_response('budgetfinalform3.html', {'account_number': c,'period':d,'month':e,'year':f,'formsetlist': formsetlist,'child':child},context_instance=RequestContext(request)) 
```

# c++ - 依赖于尚未构造的对象的构造函数

> ID：11343702
> 
> 赞同：2
> 
> 时间：2012-07-05T11:48:19.323
> 
> 标签：c++, oop, constructor

在 C++ 中，我有一个对象`A`，它有一个构造函数，该构造函数接受一个`istream`（从文件中加载自身）。我有另一个`A`作为成员的班级。我无法`A`从初始化列表中调用 's 构造函数，因为我还没有打开`istream`。一旦我在我的类的构造函数中打开它，再调用`A`. 有没有办法`istream`在初始化列表中打开一个临时对象，以便我可以将它发送到`A`的构造函数？
如果有，在调用初始化列表的顺序上是否有任何类型的保证，以便`istream`在`A`?

一个例子可能会有所帮助：

```
class A {
public:
  A(std::istream const&);
}

class B {
public:
  B(std::istream const&);
}

class MyClass {
  A a;
  B b;
public:
  MyClass() : a(is), b(is) {  // <-- How to do this?
    std::istream is("path");
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:02:59.650

改为使用指向对象的指针：

```
class MyClass {
   A *a;
   B *b;
public:
   MyClass()
   {
       std::istream is("path");
       a = new A(is);
       b = new B(is);
   }
} 
```

不要忘记释放析构函数中的内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T12:29:56.937

由于两个成员都应该依赖同一个 istream，为什么不：

```
class A {
public:
  A(std::istream const&);
}

class B {
public:
  B(std::istream const&);
}

class MyClass {
  A a;
  B b;
public:
  MyClass(std::istream const& is) : a(is), b(is) {
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T12:30:56.163

这是另一个想法......如果您想避免动态分配并使用单个临时的`istream`，您可以将加载阶段移`A`离`B`它们的构造函数：

```
class A {
public:
  Load(std::istream const&);
}

class B {
public:
  Load(std::istream const&);
}

class MyClass {
  A a;
  B b;
public:
  MyClass() {
    std::istream is("path");
    a.Load(is);
    b.Load(is);
  }
} 
```

顺便说一句，这需要`A`并`B`从某个共享父级继承负载能力，但这显然超出了这个问题的范围。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T12:03:12.593

也许我错过了一些东西，但有什么问题：

```
class MyClass {
    A* a;
    B* b;
public:
    MyClass() {
      std::istream is("path");
      a = new A(is);
      b = new B(is);
    }

    ~MyClass() {
        delete a;
        delete b;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-05T12:21:39.760

类的成员变量的初始化将按照您在类声明中指定的顺序进行。

请注意，当初始化列表中的顺序与成员变量的声明顺序不对应时，gcc 将发出警告（给定 -Wall）。类中的声明顺序是权威的。

```
A类{
上市：
    A(std::istream const&);
}

B类{
上市：
  B(std::istream const&);
}

我的班级{
  std::istream 是；
  一个;
  乙乙;
上市：
  MyClass() : is("路径"), a(is), b(is) {
  }
}

```

# mono - 在手动泵送 gtk# 事件循环时调度空闲事件

> ID：11343706
> 
> 赞同：2
> 
> 时间：2012-07-05T11:48:21.433
> 
> 标签：mono, gtk, wxwidgets, gtk#

我开发了一个使用 C++/wxWidgets 编写的应用程序，它具有用于脚本和插件的嵌入式 .NET 运行时。

我想将 gtk# 用于插件 GUI，但是由于尚未启动 gtk 事件循环，GUI 没有响应（这是 Windows 上的 wxWidgets，因此它不使用 gtk 作为后端）。

这可以通过在 wxWidgets 空闲处理期间泵送事件循环来解决：

```
public void OnWxWidgetsIdle()
{
    while(Gtk.Application.EventsPending())
        Gtk.Application.RunIteration();
} 
```

但是，这似乎不会触发 gtk# 空闲事件，因此依赖于空闲事件的 GUI 小部件（例如文本框中的闪烁光标）不会正确更新。

有谁知道我如何强制发送 gtk# 空闲事件，或任何其他解决此问题的替代方案？

亲切的问候，

安德鲁·沃德。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T18:13:48.223

在 Mono 端使用空闲处理程序：

```
void Start ()
    {
    GLib.Idle.Add (new IdleHandler (OnIdleCreateThumbnail));
    }

bool OnIdleCreateThumbnail ()
    {
    Image img = GetNextImage ();

    // If no more images remain, stop the idle handler.
    if (img == null)
       return false; 

    CreateThumbnail (img, img.ToString () + ".thumbnail");

    // There are more images, invoke this routine again on the next Idle moment.
    return true;           
    } 
```

**参考**

*   [空闲处理程序](http://www.mono-project.com/docs/gui/gtksharp/responsive-applications/#idle-handlers)
*   [g_idle_add](http://www.gtk.org/api/2.6/glib/glib-The-Main-Event-Loop.html#g-idle-add)

# php - 使用HttpGet登录有困难吗？

> ID：11343711
> 
> 赞同：1
> 
> 时间：2012-07-05T11:48:48.227
> 
> 标签：php, android, http

此活动用于登录。它通过“GET”将用户名和密码发布到 PHP 验证文件，这将得到响应（成功或失败）。但它只能显示“错误发生”（既不成功也不失败）这里是代码：

```
public class Login extends Activity {
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);
    findViewsById();
    setListeners();
}
private Button btn_login;
private EditText edt_username;
private EditText edt_password;

private void findViewsById() {
    edt_username = (EditText) findViewById(R.id.edt_username);
    edt_password = (EditText) findViewById(R.id.edt_password);
    btn_login = (Button) findViewById(R.id.btn_login);              
}

private void setListeners(){
    btn_login.setOnClickListener(login);
}
private Button.OnClickListener login = new Button. OnClickListener() {

public void onClick(View v) {
   new startLogin().execute();      
}

};

private class startLogin extends AsyncTask <Void, Void, Void> {

    String result;
    String url = "http://www.abc.com/verify.php";
    String fail = "FAILED";
    String error = "error";
    final ProgressDialog progDlg = new ProgressDialog(Login.this);

    String username = edt_username.getText().toString();
    String password = edt_password.getText().toString();

    protected void onPreExecute() {
        super.onPreExecute();

        progDlg.setTitle("Please wait");
        progDlg.setMessage("Loading...");
        progDlg.setIcon(android.R.drawable.ic_dialog_info);
        progDlg.setCancelable(false);
        progDlg.show();

        //add username and password to the site

        url += "?username=" + username;
        url += "&password="  + password;    

    }

    @Override
    protected Void doInBackground(Void... arg0) {
        // TODO Auto-generated method stub
        HttpResponse httpResponse = null;
        try {

            HttpGet httpGet = new HttpGet (url) ;
            httpResponse = new DefaultHttpClient().execute (httpGet);

            if(httpResponse.getStatusLine().getStatusCode() == 200){      
                    result = EntityUtils.toString(httpResponse.getEntity());     
                }    
                else{                           
                    //connection error    
                    result = error;
                }    

        } catch  (ClientProtocolException e) {
               e.printStackTrace();

           } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }catch (Exception e){
                        e.printStackTrace();
                        }

        return null;
    }

    protected void onPostExecute(Void unused){

        if (result == fail) {
            progDlg.cancel();
            Toast.makeText(Login.this, R.string.fail, Toast.LENGTH_SHORT).show();  //R.string.fail = "username or password is wrong"
        } else if (result == error) {
            progDlg.cancel();
            Toast.makeText(Login.this, R.string.error, Toast.LENGTH_SHORT).show(); //R.string.error = "there is a connection error"
        }
        else if (result == "SUCCESS"){
            progDlg.cancel();
            Intent it = new Intent ();
            it.setClass (Login.this, Main.class);
            startActivity (it);

        } else{
            progDlg.cancel();
            Toast.makeText(Login.this, "error occure", Toast.LENGTH_SHORT).show();
        }

    }

}} 
```

这是验证文件：

```
<?php
$username = $_GET["username"];
$password = $_GET["password"];
$ourFileName = "users/" . $username . ".txt";
    if (file_exists($ourFileName))
     {
    $fh = fopen($ourFileName, 'r');
$theData = fread($fh, 1024);
fclose($fh);

if ($password == $theData)
{
    echo SUCCESS;
}  else
{
    echo FAILED;
}
    }else  {
            echo FAILED;}
     ?> 
```

日志猫

```
07-05 13:10:57.065: W/ActivityThread(274): Application com.android.safe is waiting for the debugger on port 8100...
07-05 13:10:57.085: I/System.out(274): Sending WAIT chunk
07-05 13:10:57.155: I/dalvikvm(274): Debugger is active
07-05 13:10:57.285: I/System.out(274): Debugger has connected
07-05 13:10:57.285: I/System.out(274): waiting for debugger to settle...
07-05 13:10:57.486: I/System.out(274): waiting for debugger to settle...
07-05 13:10:57.685: I/System.out(274): waiting for debugger to settle...
07-05 13:10:57.885: I/System.out(274): waiting for debugger to settle...
07-05 13:10:58.095: I/System.out(274): waiting for debugger to settle...
07-05 13:10:58.295: I/System.out(274): waiting for debugger to settle...
07-05 13:10:58.495: I/System.out(274): waiting for debugger to settle...
07-05 13:10:58.695: I/System.out(274): debugger has settled (1326)
07-05 13:10:58.985: D/dalvikvm(274): GC_EXTERNAL_ALLOC freed 805 objects / 58072 bytes in 43ms
07-05 13:10:59.255: D/dalvikvm(274): GC_EXTERNAL_ALLOC freed 222 objects / 10616 bytes in 42ms
07-05 13:11:45.615: W/KeyCharacterMap(274): No keyboard for id 0
07-05 13:11:45.615: W/KeyCharacterMap(274): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
07-05 13:12:05.345: D/dalvikvm(274): GC_FOR_MALLOC freed 6458 objects / 265088 bytes in 138ms
07-05 13:12:08.036: W/System.err(274): java.lang.IllegalArgumentException: Illegal character in query at index 52: http://panel.o-safe.net/vb_verify.php?username=guest &password=guest
07-05 13:12:08.046: W/System.err(274):  at java.net.URI.create(URI.java:970)
07-05 13:12:08.046: W/System.err(274):  at org.apache.http.client.methods.HttpGet.<init>(HttpGet.java:75)
07-05 13:12:08.046: W/System.err(274):  at com.android.safe.Login$startLogin.doInBackground(Login.java:100)
07-05 13:12:08.056: W/System.err(274):  at com.android.safe.Login$startLogin.doInBackground(Login.java:1)
07-05 13:12:08.056: W/System.err(274):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
07-05 13:12:08.056: W/System.err(274):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
07-05 13:12:08.066: W/System.err(274):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
07-05 13:12:08.066: W/System.err(274):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
07-05 13:12:08.066: W/System.err(274):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
07-05 13:12:08.066: W/System.err(274):  at java.lang.Thread.run(Thread.java:1096)
07-05 13:12:08.076: D/AndroidRuntime(274): Shutting down VM
07-05 13:12:08.076: W/dalvikvm(274): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
07-05 13:12:08.116: E/AndroidRuntime(274): FATAL EXCEPTION: main
07-05 13:12:08.116: E/AndroidRuntime(274): java.lang.NullPointerException
07-05 13:12:08.116: E/AndroidRuntime(274):  at com.android.safe.Login$startLogin.onPostExecute(Login.java:127)
07-05 13:12:08.116: E/AndroidRuntime(274):  at com.android.safe.Login$startLogin.onPostExecute(Login.java:1)
07-05 13:12:08.116: E/AndroidRuntime(274):  at android.os.AsyncTask.finish(AsyncTask.java:417)
07-05 13:12:08.116: E/AndroidRuntime(274):  at android.os.AsyncTask.access$300(AsyncTask.java:127)
07-05 13:12:08.116: E/AndroidRuntime(274):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
07-05 13:12:08.116: E/AndroidRuntime(274):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-05 13:12:08.116: E/AndroidRuntime(274):  at android.os.Looper.loop(Looper.java:123)
07-05 13:12:08.116: E/AndroidRuntime(274):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-05 13:12:08.116: E/AndroidRuntime(274):  at java.lang.reflect.Method.invokeNative(Native Method)
07-05 13:12:08.116: E/AndroidRuntime(274):  at java.lang.reflect.Method.invoke(Method.java:521)
07-05 13:12:08.116: E/AndroidRuntime(274):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-05 13:12:08.116: E/AndroidRuntime(274):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-05 13:12:08.116: E/AndroidRuntime(274):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:08:40.427

请通过在浏览器上检查 PHP 脚本来确保它工作正常

我注意到您的代码中有以下错误

*   `==`您使用而不是`equals`“字符串”类中的方法比较两个字符串。因此，将所有`==` `result`比较更改为`equals`in`onPostExecute`方法。

更新代码

```
protected void onPostExecute(Void unused){

    if (result.equals(fail)) {
        progDlg.cancel();
        Toast.makeText(Login.this, R.string.fail, Toast.LENGTH_SHORT).show();  //R.string.fail = "username or password is wrong"
    } else if (result.equals(error)) {
        progDlg.cancel();
        Toast.makeText(Login.this, R.string.error, Toast.LENGTH_SHORT).show(); //R.string.error = "there is a connection error"
    }
    else if (result.equals("SUCCESS")){
        progDlg.cancel();
        Intent it = new Intent ();
        it.setClass (Login.this, Main.class);
        startActivity (it);

    } else{
        progDlg.cancel();
        Toast.makeText(Login.this, "error occure", Toast.LENGTH_SHORT).show();
    }

} 
```

*   另一件事。您可以将值从“doInBackGround”方法返回到`onPostExecute`方法。我的意思是，您不必总是对全局变量进行更改。这里变量`result`。为此，您需要`AsyncTask`在扩展签名时更改签名。

所以改变

```
private class startLogin extends AsyncTask <Void, Void, Void> 
```

到

```
private class startLogin extends AsyncTask <Void, Void, String> 
```

第三个参数是`Result`类型。现在您必须更改以下方法以适应上述更改

```
protected Void doInBackground(Void... arg0) { 
```

到

```
protected String doInBackground(Void... arg0) { 
```

和

```
protected void onPostExecute(Void unused){ 
```

到

```
protected void onPostExecute(String result){ 
```

这将帮助您直接从`doInBackGround`方法返回状态字符串`onPostExecute`

# jquery - 缩小代码后无法使用 jQuery(document).ready 初始化插件？

> ID：11343712
> 
> 赞同：0
> 
> 时间：2012-07-05T11:48:51.397
> 
> 标签：jquery, minify, superfish

试图整合我的 JS，所以我在一个 JS 文件中缩小了许多 jQuery 插件，例如 Superfish，就在下面，在同一个文件中，我初始化了 jQuery(document).ready 中的各种插件，但控制台显示未定义错误，例如：

> 未捕获的类型错误：对象 [object Object] 没有方法“superfish”

但是，当我在 jQuery(document).ready 之外进行初始化时，一切都很好！

任何线索这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:49:58.243

先用 JSLint 检查你的代码，也许你忘了分号什么的。

# php - 处理来自服务器的 json 数据的问题

> ID：11343714
> 
> 赞同：0
> 
> 时间：2012-07-05T11:48:57.653
> 
> 标签：php, javascript, jquery

我在处理来自服务器的数据时遇到问题，请参阅下面的代码：

php

```
echo json_encode(array("toshow"=>"<span class='text'><img src='greencheck.png'/>")); 
```

javascript

```
$('#data').ajaxForm({
                dataType: 'json',
                success: function(data){
                    if(data.error == 1){
                        $('#preview').html("<span class='text'><img src='close.png'/>"+data.filename+" File exsist ..</span>");
                    }else{

                         $('.first').after(data.toshow);
                    }
                }
                }).submit(); 
```

问题是当我以 {'data'=>someData} 的形式从服务器发送数据时，我没有问题.. 当我发送任何 html 标签时，例如`{'data'=>"<span>some data</span>"}`javascript 中的成功函数没有处理任何内容，所以成功 = 失败..

案例 1：从服务器示例发送 json 数据，{'error'=>1,'msg'=>file exists}，在这种情况下一切正常。 ![在此处输入图像描述](../Images/c6f967158ac98bab892f935d5e9468af.png)

案例 2：从服务器示例发送 json 数据，{'toshow'=>linkdatta...etc}，因此如果在 json 问题中添加任何 html 标记，则启动成功功能根本不起作用

![在此处输入图像描述](../Images/e84757e89e538da6663b2abb1d1a9764.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:56:53.860

在您的 php 文件中，将 content-type 设置为 json：

```
header('Content-type: application/json');
echo json_encode(.........); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:52:27.913

```
success: function(data){
   var temp = jQuery.parseJSON(data);
    if(temp.error == 1){

   }
} 
```

[http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

# javascript - JavaScript 获取父元素并为兄弟姐妹编写持有者 div

> ID：11343717
> 
> 赞同：19
> 
> 时间：2012-07-05T11:49:05.267
> 
> 标签：javascript, dom, element, parent

我有以下结构：

```
<div class="parent">
  <div id="child1">Content here</div>
  <div class="child2">Content here</div>
</div> 
```

在 onload 时，我想包含一个“持有人” div，它包含所有父母的孩子，如下所示：

```
<div class="parent">
  <div id="holder">
    <div id="child1">Content here</div>
    <div class="child2">Content here</div>
  </div>
</div> 
```

只知道“child1”id，我如何在自己和兄弟姐妹周围添加一个持有人 div？

**注意事项**

*   “child1” id 是唯一已知的标识符。
*   “parent”和“child2”类是动态名称，会发生变化，因此不能用作标识符。
*   需要是普通的 JavaScript。

想法？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-05T12:00:32.923

看到这必须是 JavaScript（而不是 jQuery），你只能通过 id 来识别 child1，你可以做一些像这样粗略的事情：

```
var child1 = document.getElementById("child1"),
    parent = child1.parentNode,
    contents = parent.innerHTML ;
    parent.innerHTML = '<div id="holder">' + contents + '</div>'; 
```

希望这可以帮助...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T12:05:58.727

他说没有 jQuery，这听起来像是一个家庭作业，但是：

```
var el = document.getElementById('child1');
var parent = el.parentNode;
parent.innerHTML = '<div id="holder">' + parent.innerHTML + '</div>'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-17T10:35:55.583

我写了一个小片段来遍历 DOM 以找到第一个匹配的 parentNode。

希望这对某人有所帮助。

(/¯◡ ‿ ◡)⊃━☆ﾟ。* ･ ｡ﾟ,

```
function getFirstParentMatch(element, selector) {
  if (!element) {return element};
  element.matches(selector) || (element = (element.nodeName.toLowerCase() === 'html' ? false : getFirstParentMatch(element.parentNode, selector)));
  return element;    
} 
```

# android - 找不到不使用 GL11Ext 进行绘图的 android 2d opengl sprite 类的合适示例

> ID：11343721
> 
> 赞同：10
> 
> 时间：2012-07-05T11:49:13.977
> 
> 标签：android, opengl-es, 2d, sprite

正如 SpriteMethodTest 所说，有很多方法可以绘制精灵。首先，我尝试了画布，但遇到了一些性能问题。接下来，我决定学习opengl。我使用 GL11Ext 扩展取得了我的第一个成就。但是，您知道默认情况下，当您绘制纹理时，它们会翻转，并且 x 和 y 轴在设备屏幕的左下角为零（在横向模式下），与画布不同，但您不能旋转精灵。

然后，我尝试使用 GLU 查看影响此轴视图，但没有效果。接下来，我想旋转我的精灵，但正如他们所说，由于 GL11Ext，我没有效果。

所以我现在有主要的stackoverflow条件，基本问题是：

1.  使用哪种方法来实现精灵的缩放、旋转和弹跳效果以及在旧的甜蜜方式中查看 X 和 Y 轴 [(0,0) 在风景模式的左上角]？**

2.  并且在宇宙中是否有一些只使用一种好的精灵渲染方式的精灵类示例？（SpriteMethodTest 让我很困惑）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T14:45:46.297

埃弗里卡！！！

我几乎是在自杀！离开 Canvas 并学习 OpenGL 方法实现游戏引擎 3 天后。

网络上充斥着充满垃圾的 OpenGL 教程，其中许多未完成，其中许多导致 2D OpenGL 游戏引擎实现方法的错误方式。最大的错误在于使用 G11Ext 制作游戏。因为他们不旋转：D

然后我从 youtube 游戏示例视频链接中找到的其他教程中找到了本教程，哈哈：

不要在这里混淆观众是

第 1 章：http: [//obviam.net/index.php/opengl-es-with-android-switching-from-canvas-to-opengl/](http://obviam.net/index.php/opengl-es-with-android-switching-from-canvas-to-opengl/)

第 2 章：http: [//obviam.net/index.php/opengl-es-android-displaying-graphical-elements-primitives/](http://obviam.net/index.php/opengl-es-android-displaying-graphical-elements-primitives/)

第 3 章：http: [//obviam.net/index.php/texture-mapping-opengl-android-displaying-images-using-opengl-and-squares/](http://obviam.net/index.php/texture-mapping-opengl-android-displaying-images-using-opengl-and-squares/)

就在 15 分钟前，我发现了我可以使用精灵旋转、移动和调整形状的方式！！！哈哈

因此，许多读者在阅读了这篇很棒的教程后都在询问如何移动、调整大小和旋转精灵。因此，我从这些乱七八糟的示例和教程中编写了一些代码：

这个类用于一些顶点操作

```
public class Vertex
{
    public FloatBuffer buffer; // buffer holding the vertices
    public float vertex[];
    public Vertex (float[] vertex)
    {
        this.vertex = vertex;
        this.prepare ();
    }
    private void prepare ()
    {
        // a float has 4 bytes so we allocate for each coordinate 4 bytes
        ByteBuffer factory = ByteBuffer.allocateDirect (vertex.length * 4);
        factory.order (ByteOrder.nativeOrder ());
        // allocates the memory from the byte buffer
        buffer = factory.asFloatBuffer ();
        // fill the vertexBuffer with the vertices
        buffer.put (vertex);
        // set the cursor position to the beginning of the buffer
        buffer.position (0);        
    }
} 
```

并且这个类用于绘制具有能够移动旋转和定位的纹理的形状

```
public class Square
{
    Vertex shape,texture;
    int corner=0;
    float x=0;

    public Square()
    {
        shape = new Vertex (new float[]
                {
                1f,1f,0f,
                0f,1f,0f,
                1f,0f,0f,
                0f,0f,0f,
                });

        texture = new Vertex (new float[]
                {
                1.0f, 0.0f,
                0.0f, 0.0f,
                1.0f, 1.0f,
                0.0f, 1.0f,
                });     
    }

    /** The draw method for the square with the GL context */
    public void draw (GL10 gl, int image, float x, float y, float width, float height, float corner)
    {
        if (corner>=0)
        {
            corner += 1;    
        }
        if (corner>360)
        {
            corner = -1;
        }
        gl.glPushMatrix();

        x += 1f;
        if (x>800)
        {
            x = 0;
        }

        position (gl, 0, 0, width, height, corner);

        // bind the previously generated texture
        gl.glBindTexture(GL10.GL_TEXTURE_2D, image);

        // Point to our buffers
        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

        // set the colour for the square
        gl.glColor4f (0.0f, 1.0f, 0.0f, 0.5f);

        // Set the face rotation
        gl.glFrontFace(GL10.GL_CW);     

        // Point to our vertex buffer
        gl.glVertexPointer (3, GL10.GL_FLOAT, 0, shape.buffer);
        gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, texture.buffer);

        // Draw the vertices as triangle strip
        gl.glDrawArrays (GL10.GL_TRIANGLE_STRIP, 0, shape.vertex.length / 3);

        // Disable the client state before leaving
        gl.glDisableClientState (GL10.GL_VERTEX_ARRAY);
        gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

        gl.glPopMatrix();       
    }

    public void position (GL10 gl, float x, float y, float width, float height, float corner)
    {
        gl.glTranslatef (x, y, 0f); //MOVE !!! 1f is size of figure if called after scaling, 1f is pixel if called before scaling

        if (corner>0)
        {
            gl.glTranslatef (width/2, height/2, 0f);
            gl.glRotatef (corner, 0f, 0f, 1f); // ROTATE !!!
            gl.glTranslatef (-width/2, -height/2, 0f);          

        }

        gl.glScalef (width, height, 0f); // ADJUST SIZE !!!

    }
} 
```

主要是如何设置相机以便 1 个 opengl 单元 == 1 像素以及如何加载纹理

```
public class Scene implements Renderer
{
    public Context context;
    public Resources resources;
    public SparseIntArray images = new SparseIntArray ();
    public float width;
    public float height;

    public Scene (Context context)
    {
        this.context = context;
        this.resources = context.getResources ();
    }

    @Override
    public void onDrawFrame (GL10 gl)
    {
//      // clear Screen and Depth Buffer
        gl.glClear (GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
        gl.glMatrixMode(GL10.GL_MODELVIEW);
//      // Reset the Modelview Matrix
        gl.glLoadIdentity ();
        draw (gl);

    }

    @Override
    public void onSurfaceChanged (GL10 gl, int width, int height)
    {
        this.width = width;
        this.height = height;

        gl.glViewport (0, 0, width, height); // Reset The Current Viewport
        gl.glMatrixMode (GL10.GL_PROJECTION); // Select The Projection Matrix
        gl.glLoadIdentity (); // Reset The Projection Matrix

        gl.glOrthof (0, width, 0, height, -1f, 1f);
        //gl.glTranslatef (0f, -height/2, 0.0f); // move the camera !!

        gl.glMatrixMode (GL10.GL_MODELVIEW); // Select The Modelview Matrix
        gl.glLoadIdentity (); // Reset The Modelview Matrix

        load (gl);
    }

    public void onSurfaceCreated(GL10 gl, EGLConfig config) 
    {
        gl.glEnable(GL10.GL_TEXTURE_2D);            //Enable Texture Mapping ( NEW )
        gl.glShadeModel(GL10.GL_SMOOTH);            //Enable Smooth Shading
        gl.glClearColor(0.0f, 0.0f, 0.0f, 0.5f);    //Black Background
        gl.glClearDepthf(1.0f);                     //Depth Buffer Setup
        gl.glEnable(GL10.GL_DEPTH_TEST);            //Enables Depth Testing
        gl.glDepthFunc(GL10.GL_LEQUAL);             //The Type Of Depth Testing To Do

        gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
        gl.glEnable(GL10.GL_BLEND);

        //Really Nice Perspective Calculations
        gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST);

        init (gl);
    }

    public void init (GL10 gl)
    {

    }

    public void load (GL10 gl)
    {

    }

    public void draw (GL10 gl)
    {

    }

    private static int next (GL10 gl)
    {
        int[] temp = new int[1];
        gl.glGenTextures (1, temp, 0);
        return temp[0];
    }   

    public int image (GL10 gl, int resource)
    {
        int id = next (gl);
        images.put (resource, id);

        gl.glBindTexture (GL10.GL_TEXTURE_2D, id);

        gl.glTexParameterf (GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_LINEAR);
        gl.glTexParameterf (GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);

        gl.glTexParameterf (GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_S, GL10.GL_CLAMP_TO_EDGE);
        gl.glTexParameterf (GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_T, GL10.GL_CLAMP_TO_EDGE);

        gl.glTexEnvf (GL10.GL_TEXTURE_ENV, GL10.GL_TEXTURE_ENV_MODE, GL10.GL_REPLACE);

        BitmapFactory.Options options = new BitmapFactory.Options ();
        options.inScaled = false;

        InputStream input = resources.openRawResource (resource);
        Bitmap bitmap;
        try
        {
            bitmap = BitmapFactory.decodeStream (input, null, options);
        }
        finally
        {
            try
            {
                input.close ();
            }
            catch (IOException e)
            {
                // Ignore.
            }
        }

//       Matrix flip = new Matrix ();
//       flip.postScale (1f, -1f);
//       bitmap = Bitmap.createBitmap (bitmap, 0, 0, bitmap.getWidth (), bitmap.getHeight (), flip, true);

        GLUtils.texImage2D (GL10.GL_TEXTURE_2D, 0, bitmap, 0);      
        return id;
    }

} 
```

和一些用法

```
public class Scene2 extends Scene
{
    Square square1, square2;

    public Scene2(Context context)
    {
        super (context);
        // TODO Auto-generated constructor stub
    }

    public void init (GL10 gl)
    {
        square1 = new Square ();
        square2 = new Square ();
    }

    public void load (GL10 gl)
    {
        image (gl, R.drawable.s1_clouds);
        image (gl, R.drawable.s1_ground);
    }

    public void draw (GL10 gl)
    {
        square1.draw (gl, images.get(R.drawable.s1_clouds), 0, 0, width, height, 0);
        square1.draw (gl, images.get(R.drawable.s1_ground), 0, 0, width, height, 0);
    }

} 
```

我想要实现和实现的主要内容是 X 和 Y 轴就像在画布中一样：

```
(0,0)
 --------------------------------- X axis
|
|
|
|
|
|
|
|
Y axis 
```

在此之后我将写一些完整的教程，我想宣布我实现了我想要实现的所有目标，即：顶部的 X 轴，左侧的 Y 轴，opengl 单位 = 像素，以像素为单位设置对象大小，旋转对象，移动对象一切以像素为单位。现在我将处理动画精灵并将它们制作成更精细的类，这就是新的 2d opengl 游戏框架基础......

发现这个功能帮助我教程[http://www.morrowland.com/apron/tutorials/gl/gl_matrix.php](http://www.morrowland.com/apron/tutorials/gl/gl_matrix.php)

非常感谢这个博客为我指出了唯一真正的方法......

+1 android 最简单的 2d opengl 游戏引擎在 1 周内...

快乐的心灵吹...

:P

编辑：一年后我有一个很好的框架**[https://github.com/hazardland/game.android](https://github.com/hazardland/game.android)**使用这里描述的概念和示例游戏以及任何可能的框架使用示例在这里**[https://github.com/hazardland/ferry.android](https://github.com/hazardland/ferry.android)**（查看市场上的屏幕[https://play.google.com/store/apps/details?id=hazardland.borani](https://play.google.com/store/apps/details?id=hazardland.borani) )

# java - Java中的往返时间字符串长吗？

> ID：11343722
> 
> 赞同：2
> 
> 时间：2012-07-05T11:49:19.397
> 
> 标签：java, datetime

我在往返数据模式中有一个时间日期字符串，如下所示：`2012-07-05T11:30:44.1533815Z`. 这来自一些 .NET 服务。

如何将其转换为`long`Java 中的 a？

我试过`SimpleDateTimeFormat`似乎无法找出正确的格式说明符..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T12:00:04.753

试试这个：

```
public long getTime(String time) throws ParseException {
  SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSSSSS'Z'");
  Date date = df.parse(time);

  return date.getTime();
} 
```

干杯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T11:50:56.827

您需要使用[SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)将其解析为 Date 。

从日期开始，您可以使用 getTime() 获取以毫秒为单位的 unix 纪元，这是一个很长的时间。

这将像这样开始：

```
SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSSS'Z'", Locale.ENGLISH);
long myTime = format.parse("2012-07-05T11:30:44.1533815Z").getTime(); 
```

但是您必须检查日期的最后一个字符的含义是什么？那是时区定义吗？如果您没有确定它并只是逃避它，您将冒着用错误的时区解释日期的风险。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T11:56:14.560

试试这个：

```
try {
    SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-M-dd'T'HH:mm:ss.SSSSSSS'Z'");
    long time = dateFormat.parse("2012-07-05T11:30:44.1533815Z").getTime();
} catch (ParseException e) {
              .....
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-05T12:09:31.727

由于这是 iso 格式的日期时间，您可以使用出色的 Joda 日期时间库轻松解析它，如下所示：

```
DateTimeFormatter fmt = ISODateTimeFormat.dateTime();
DateTime dt = fmt.parseDateTime("2012-07-05T11:30:44.1533815Z");
long dtl = dt.getMillis(); 
```

请参阅“输入和输出”一章下的[Joda 用户指南和](http://joda-time.sourceforge.net/userguide.html)[http://joda-time.sourceforge.net/apidocs/org/joda/time/format/ISODateTimeFormat.html](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/ISODateTimeFormat.html)。它将负责以正确的方式解析 ISO8601 格式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-13T06:07:24.937

请注意这一点，如果我给出 dateTime UTC `"2017-07-13T05:43:24.6966215Z"`，它会返回 IST`Thu Jul 13 07:39:30 IST 2017`而不是`Thu Jul 13 11:13:25 IST 2017`

```
String rawDate = "2017-07-13T05:43:24.6966215Z";
SimpleDateFormat simpleDateFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSSSSS'Z'");
simpleDateFormat.setTimeZone(TimeZone.getTimeZone("IST"));
Date date = simpleDateFormat.parse(rawDate);
System.out.println(date); 
```

所以在经历了[这个答案](https://stackoverflow.com/a/44000968/4436435)之后，我才知道这个给定的字符串不是日期格式而不是 ISO 即时格式。

> 毫秒 (SSS) 只能是三位数字。不仅如此，日期还会滚动 - 例如 10:38:14.1000 变为 10:38:15.000。

将 Instant 转换为 Date 对象

```
String rawDate = "2017-07-13T05:43:24.6966215Z";
DateTimeFormatter instantFormater = DateTimeFormatter.ISO_INSTANT.withZone(ZoneId.of("Asia/Kolkata"));
Instant instant = Instant.from(instantFormater.parse(rawDate));
System.out.println(Date.from(instant)); 
```

它给出了预期的`Thu Jul 13 11:13:24 IST 2017` 检查[这个答案](https://stackoverflow.com/a/19726814/4436435)

# email - Cucumber > watir-webdriver > email spec：如何测试？

> ID：11343727
> 
> 赞同：0
> 
> 时间：2012-07-05T11:49:36.407
> 
> 标签：email, cucumber, watir-webdriver, specifications

所以，你能不能给我写一个例子，我如何在黄瓜中使用电子邮件规范和 watir-webdriver。

我找不到他：[https ://github.com/bmabey/email-spec](https://github.com/bmabey/email-spec)

和hier：[https ://github.com/bmabey/email-spec/wiki/Use-Cucumber-to-Test-Email](https://github.com/bmabey/email-spec/wiki/Use-Cucumber-to-Test-Email)

它对我不起作用...... :(

```
Then /^I should receive an email with a link to a confirmation page$/ do
  unread_emails_for(current_email_address).size.should == 1  
  open_last_email_for(last_email_address)
  current_email.should have_subject(/ALPHAJUMP: Bitte bestätigen Sie Ihre Registrierung./)
  current_email.should have_body_text('Herzlich willkommen')
  click_email_link_matching /Jetzt freischalten/
  page.should have_content("Wir begrüßen Sie auf ALPHAJUMP!")
end 
```

错误消息：预期：1 得到：0（使用 ==）（RSpec::Expectations::ExpectationNotMetError）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:09:07.597

我认为错误消息说您不需要[delayed_job](https://rubygems.org/gems/delayed_job) gem。这可以解决问题：

```
require 'delayed_job' 
```

由于这不是问题的标题，我想你仍然不知道如何用 Cucumber 测试电子邮件，但我想这应该是另一个问题。

# deployment - JBoss AS 7 部署顺序和时间

> ID：11343732
> 
> 赞同：3
> 
> 时间：2012-07-05T11:49:57.860
> 
> 标签：deployment, jboss, jboss7.x

我在这里有一个关于部署顺序的问题，特别是时间问题。

我有一个耳朵 1，它通过一个 bean 和一些队列提供一些功能。队列在standalone.xml 中配置。另一只耳朵 2 使用来自 ear1 的此服务。

所以依赖看起来像：ear1 <-- ear2

所以我将ear 2的部署结构配置为依赖ear 1，现在部署顺序本身是正确的。

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss-deployment-structure>
    <deployment>
        <dependencies>
            <module name="deployment.ear1.ear" />
        </dependencies>
    </deployment>
</jboss-deployment-structure> 
```

部署顺序现在是正确的，但是我现在拥有的是一个竞争条件，因为（我猜）没有从第 1 耳初始化 bean。

当我延迟ear2 的部署时，一切正常。

有谁知道如何控制部署的时间。是否不仅可以通过 jboss-deployment-structure.xml 指定部署顺序，还可以指定开始下一次部署所需的生命周期？

**更新**

我试图指定包含要使用的服务的实际 bean jar。这也行不通。看起来像：

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss-deployment-structure>
    <deployment>
        <dependencies>
            <module name="deployment.ear1.ear.bean.jar" />
        </dependencies>
    </deployment>
</jboss-deployment-structure> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-10T06:36:58.580

正如您现在可能知道的，耳间依赖性将在 JBoss 7.2 中引入。
我在一个 EAR 定义其他 EAR 使用的服务时遇到了同样的问题。我已经通过在standalone.xml 中完全关闭自动部署来解决这个问题：

```
 <subsystem xmlns="urn:jboss:domain:deployment-scanner:1.1">
        <deployment-scanner path="deployments" relative-to="jboss.server.base.dir" scan-interval="5000" auto-deploy-zipped="false" auto-deploy-exploded="false"/>
    </subsystem> 
```

并在启动 JBoss 之前在单独的线程中运行以下脚本。该脚本创建一个部署列表，并使用 JBoss 7 部署扫描器标记文件按指定顺序部署它们。即它为第一次部署创建 .dodeploy 标记，然后等到它被部署，然后为第二次部署创建 .dodeploy 标记等。

```
#!/bin/bash
function contains() {
    local n=$#
    local value=${!n}
    for ((i=1;i < $#;i++)) {
        if [ "${!i}" == "${value}" ]; then
            echo "y"
            return 0
        fi
    }
    echo "n"
    return 1
}

DD="/home/martinv/jboss-as-7.1.1.Final/standalone/deployments"
ORDER_FILE="/home/martinv/order.txt"

echo "[MDC] Manual deployment control"
echo "[MDC] -------------------------"
echo "[MDC] Removing markers"
rm -f $DD/*.dodeploy $DD/*.isdeploying $DD/*.deployed $DD/*.failed $DD/*.undeployed $DD/*.pending $DD/*.isundeploying

APPS_ALL=( $( ls -1 $DD | grep '.ear$\|.jar$\|.war$\|.sar$' ) )

APPS_ORDER=( $( cat $ORDER_FILE ) )

echo "[MDC] ${#APPS_ALL[@]} apps in $DD: ${APPS_ALL[@]}"
echo "[MDC] Order defined for ${#APPS_ORDER[@]} apps: ${APPS_ORDER[@]}"

for APP in "${APPS_ALL[@]}"
do
    if [ $(contains "${APPS_ORDER[@]}" $APP) == "n" ]; then
        APPS_ORDER=("${APPS_ORDER[@]}" "$APP")
    fi
done

echo "[MDC] Final order of ${#APPS_ORDER[@]} apps: ${APPS_ORDER[@]}"

for APP in "${APPS_ORDER[@]}"
do
    echo "[MDC] Scheduled for deploy: $APP"
    touch "$DD/$APP.dodeploy"
    while [ ! -f "$DD/$APP.deployed" -a ! -f "$DD/$APP.failed" ]; do
        sleep 1
    done
    RESULT=`ls -1 $DD | egrep "$APP.failed|$APP.deployed"`
    echo "[MDC] Finished deploying $APP, result: $RESULT"
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:31:41.077

我过去这样做的方法是修改耳朵文件的名称。部署似乎按字母顺序执行。如果要先部署ear1，请将其重命名为a_ear1.ear，将ear2 重命名为z_ear2.ear。

# javascript - 路线拖动后的谷歌地图路线边界

> ID：11343734
> 
> 赞同：0
> 
> 时间：2012-07-05T11:50:31.543
> 
> 标签：javascript, google-maps

我`directionsService.route`用来计算点数之间的路线。在回电时，我使用：

```
response.routes[0].bounds 
```

这样我就可以向我的服务器调用第二个请求并根据相关边界显示标记。

这工作正常。

我最近添加了将其设置`DirectionsRenderer`为可拖动的选项。

这很好用，但是，在我尝试模拟基于边界获取标记的完全相同的行为时，我需要能够捕获“route dragend”事件的回调。我似乎在这方面找不到任何东西。我得到的最接近的是`directions_changed`事件，但是这个回调的参数是无关紧要的。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:45:14.263

在 direction_changed 的​​事件处理程序中读取 response.routes[0].bounds 的新值。它应该在修改路由时更新。

# c# - 手动检测或禁用（如果可能）控制台应用程序退出

> ID：11343736
> 
> 赞同：0
> 
> 时间：2012-07-05T11:50:38.010
> 
> 标签：c#, .net, console-application

我正在开发一个控制台应用程序，该应用程序尝试通过登录然后将文件复制到共享文件夹来从网站下载一些文件。

由于用户很可能手动单击关闭按钮或尝试以某种方式手动结束进程，有没有办法可以检测到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:53:33.430

而是创建一个空项目。因此，您将拥有一个“隐藏进程”，没有用户会尝试关闭的 UI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T11:54:25.340

而是建议您将其设置为 Windows 服务应用程序，以便它将作为服务运行，这意味着用户与应用程序完全没有交互。

# java - Java - 确定 xml 文档的大小

> ID：11343742
> 
> 赞同：0
> 
> 时间：2012-07-05T11:51:01.627
> 
> 标签：java, xml

我有一个从给定 URL 获取 xml 文件的简单代码：

```
DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(link); 
```

该代码返回 xml 文档 (org.w3c.dom.Document)。我只需要获取生成的 xml 文档的大小。有什么优雅的方法可以做到，而不涉及第三方罐子？

PS 大小以 KB 或 MB 为单位，而不是节点数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T22:19:07.680

**第一个天真的版本：**将文件加载到本地缓冲区中。然后你知道你的输入有多长。然后将 XML 解析出缓冲区：

```
URL url = new URL("...");
InputStream in = new BufferedInputStream(url.openStream());
ByteArrayOutputStream buffer1 = new ByteArrayOutputStream();
int c = 0;
while((c = in.read()) >= 0) {
  buffer1.write(c);
}

System.out.println(String.format("Length in Bytes: %d", 
    buffer1.toByteArray().length));

ByteArrayInputStream buffer2 = new ByteArrayInputStream(buffer1.toByteArray());

Document doc = DocumentBuilderFactory.newInstance()
    .newDocumentBuilder().parse(buffer2); 
```

缺点是 RAM 中的额外缓冲区。

**第二个更优雅的版本：**`java.io.FilterInputStream`使用自定义计算通过它的字节流来包装输入流：

```
URL url = new URL("...");
CountInputStream in = new CountInputStream(url.openStream());
Document doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(in);
System.out.println(String.format("Bytes: %d", in.getCount())); 
```

这里是`CountInputStream`. 所有`read()`方法都被覆盖以委托给超类并计算结果字节数：

```
public class CountInputStream extends FilterInputStream {

  private long count = 0L;

  public CountInputStream(InputStream in) {
    super(in);
  }

  public int read() throws IOException {
    final int c = super.read();
    if(c >= 0) {
      count++;
    }
    return c;
  }

  public int read(byte[] b, int off, int len) throws IOException {
    final int bytesRead = super.read(b, off, len);
    if(bytesRead > 0) {
      count += bytesRead;
    }
    return bytesRead;
  }

  public int read(byte[] b) throws IOException {
    final int bytesRead = super.read(b);
    if(bytesRead > 0) {
      count += bytesRead;
    }
    return bytesRead;
  }

  public long getCount() {
    return count;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:56:56.423

也许这个：

```
document.getTextContent().getBytes().length; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T12:52:32.780

你可以这样做：

```
long start = Runtime.getRuntime().freeMemory(); 
```

构造您的 XML 文档对象。然后再次调用上述方法。

```
Document ocument = parser.getDocument();

long now = Runtime.getRuntime().freeMemory();

System.out.println(" size of Document "+(now - start) ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T15:59:03.293

一旦您将 XML 文件解析为 DOM 树，源文档（作为字符串）就不再存在了。您只有从该文档构建的节点树 - 因此不再可能从 DOM 文档中准确确定源文档的大小。

您可以[使用身份转换将 DOM 文档转换回 XML 文件](http://docs.oracle.com/javase/tutorial/jaxp/xslt/writingDom.html)；但这是获取大小的一种非常迂回的方法，它仍然不能与源文档大小完全匹配。

对于您要执行的操作，最好的方法是自己下载文档，记下大小，然后`DocumentBuilder.parse`使用`InputStream`.

# error-handling - Quartz.net Job 未处理的异常行为

> ID：11343743
> 
> 赞同：0
> 
> 时间：2012-07-05T11:51:03.427
> 
> 标签：error-handling, thread-safety, quartz.net, jobs, unhandled-exception

我正在为我的项目实施quartz.net 调度程序，并且对这个库的工作有一些疑问：

1.  如果一项作业引发了没有 catch 块的异常（未处理的异常），会发生什么？这会导致进程终止和 AppDomain 卸载吗？其他工作会受到影响吗？
2.  Quartz.net lib 是否会尝试重新启动引发未处理异常的作业？或者我应该在我的项目中手动实现它？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:05:37.750

据我所知，我自己是 Quartz.net 的用户。

1.  如果您的工作（或石英本身）像所有 .net2 或更高版本的程序一样引发未处理的异常，它将占用我们的应用程序域。您可以尝试使用 AppDomain.UnhandledException 处理程序。
2.  我认为默认情况下 RequestRecovery 为 true，但您可以在安排作业时将其设置为 false。

# apache - 无法为 glassfish 管理控制台配置 proxyPass

> ID：11343745
> 
> 赞同：2
> 
> 时间：2012-07-05T11:51:17.983
> 
> 标签：apache, glassfish, admin, mod-proxy

我有以下情况。

有一个 apache 2.2 服务器和 glassfish 3.1.2 在它后面运行。所有对 80 端口的请求都通过 mod_proxy 重定向到 glassfish 服务器。

这是我在 httpd.conf 中写的：

```
ProxyPass / http://some_server:8080
ProxyPassReverse / http://some_server:8080 
```

其中 some_server 是我的服务器的域名。

它工作正常，我可以看到对端口 80 的请求被重定向到 glassfish 实例。

问题是我需要设置类似的东西来访问 glassfish 的管理控制台。原因是端口 4848 对外部访问关闭，据我了解，我可以使用 mod_proxy 解决这个问题。这就是我试图做的：

```
ProxyPass /admin http://some_server:4848
ProxyPassReverse /admin http://some_server:4848 
```

但它不起作用。它重定向到管理控制台的登录页面，但没有显示任何内容。

有什么想法可以解决我的问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:28:30.833

管理控制台在安全连接下工作。

您可能需要将其添加到您的 apache 虚拟服务器配置中：

```
 SSLEngine on
    SSLProxyEngine on
    SSLCertificateFile your_cert_file
    SSLCertificateKeyFile your_cert_key_file
    SSLCertificateChainFile your_authority_cert_file 
```

希望能帮助到你！

# blackberry - 尝试拆分黑莓应用程序的服务器响应

> ID：11343749
> 
> 赞同：0
> 
> 时间：2012-07-05T11:51:28.017
> 
> 标签：blackberry

我收到来自 Web 服务的响应，如下所示：

```
response = (SoapPrimitive) envelope.getResponse();
String result =  response.toString(); 
```

“结果”是一个长字符串，由“CredentialAccepted</>FirstName</>LastName</>Picture”组成。我需要在标签</ >处拆分这个结果。我尝试了以下但黑莓不支持。有什么帮助吗？

```
List<String> list_result = Arrays.asList(result.split("</>")); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:15:37.507

像这样的东西：

```
 public static String[] split(String original, String separator) {
        Vector nodes = new Vector();

        String trimmed = original.trim();

        int start = 0;
        int end;
        while ((end = trimmed.indexOf(separator, start)) != -1) {
            nodes.addElement(trimmed.substring(start, end));
            start = end + separator.length();
        }

        if (start < trimmed.length()) {
            nodes.addElement(trimmed.substring(start));
        }

        String[] result = new String[nodes.size()];
        nodes.copyInto(result);

        return result;
    } 
```

# jquery - 如何使用跨域 ajax 请求发布数据？

> ID：11343750
> 
> 赞同：0
> 
> 时间：2012-07-05T11:51:33.100
> 
> 标签：jquery, ajax, web-services

我正在使用登录网络服务来验证用户。

这些是 spring 3.0 REST Web 服务，其设计方式是只接受带有 POST 方法的数据。

我能够使用 GET 将数据发送到 Web 服务。

但是由于网络服务的实现，我必须使用 POST 方法提交数据。

如果我使用带有 POST 的 jquery ajax 请求，我会收到 403 Access disabled 错误。

下面是 GET 请求的工作示例。

我正在为 tomcat 使用 CORS 过滤器来启用 CORS 支持。

```
 function callservice() 
    {
    jQuery.support.cors = true;
        var mobNo = document.getElementById('mobileNo').value;
        var acctNo = document.getElementById('accountNo').value;
        var custNo = document.getElementById('customerId').value;

        url = url+mobNo+"/"+acctNo+"/"+custNo;

        $.getJSON(url,
        function(data) 
        {
            if (data.authenticated==true)
            {
                alert("data "+data);
            } 
        });

} 
```

但是，如果我使用以下代码，我会收到 403 错误。

```
 function callservice() 
    {
        jQuery.support.cors = true;
        var mobNo = "123123123";
        var acctNo = "123123123";
        var custNo = "123123123";

        var url = "http://localhost/mobile-services/rest/user/";        
        var dataVal = {};
        dataVal["mobileNo"] = mobNo;
        dataVal["accountNo"] = acctNo;
        dataVal["customerId"] = custNo;

        var forminput = JSON.stringify(dataVal);

    $.ajax({
        url: url,
        type: "POST",
        data:forminput,
        datatype:"jsonp",
        crossDomain: true,
        contentType: "application/json",
        beforeSend: function () { },
        headers : 
        {
            "Content-Type"  : "application/json",
            "Accept" : "application/json",
            "Origin" : "http://localhost/",
            "Access-Control-Allow-Origin" : "*"
        },
        success: function (data) 
        {          
            if (data.authenticated==true)
            {
                window.location.replace("http://localhost:8080/mobile-services/selected_services.jsp?userId="+data.id);
            }
        },
        error: function (XMLHttpRequest, textStatus, errorThrown) 
        {
            try 
            {
                alert(JSON.stringify(XMLHttpRequest) + "\n" + textStatus + "\n" + errorThrown);
            }
            catch (ex) { alert("Exception occured.. "); }
            finally { }
        }
    });
} 
```

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:56:12.643

您可以尝试使用 YQL 进行跨域请求。

[http://james.padolsey.com/javascript/cross-domain-requests-with-jquery/](http://james.padolsey.com/javascript/cross-domain-requests-with-jquery/)

[http://christianheilmann.com/2010/01/10/loading-external-content-with-ajax-using-jquery-and-yql/](http://christianheilmann.com/2010/01/10/loading-external-content-with-ajax-using-jquery-and-yql/)

# ios - 在 iOS 上进行 segue 时将元素保留在导航控制器中

> ID：11343751
> 
> 赞同：2
> 
> 时间：2012-07-05T11:51:34.713
> 
> 标签：ios, storyboard, segue, navigationcontroller

我正在开发一个显示地点列表的应用程序。有一个 NavigationController，在导航栏中我有一些 UIBarButtonItem（左右），中间部分是一个带有标签和两个 UIButton 的自定义视图。

![工具栏](../Images/064b3ad4dbbe47836ad80274b21be72e.png)

地图按钮执行对在地图上显示点的 MapViewController 的转场。我想要实现的是地图ViewController的导航栏也显示相同的自定义UIView（显示箭头按钮和Day Label），但我不知道如何实现这一点。我试图复制 prepareForSegue 上的视图：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if ([segue.identifier isEqualToString:@"FlipFromListToMap"]) {
        if ([segue.destinationViewController isKindOfClass:[DisplayTourMapViewController class]]){
            DisplayTourMapViewController *cityListController = segue.destinationViewController;
cityListController.navigationItem.titleView = self.navigationItem.titleView;
        }
    }
} 
```

但这不起作用。此外，当从原始表格视图返回时，导航视图消失了：

![走了](../Images/6a1af5632196afb0a034991f59c8604c.png)

我想知道我的方法是否错误。我可以在 segues 之间保留 navigationcontroller 视图吗？我可以使用navigationcontroller 和segue 的吗？或者我应该在控制器内部只有两个视图并以编程方式交换它们？这两个视图的模型是相同的，它只是改变了我呈现信息的方式（地图或列表）。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:35:02.170

当您回到第一个导航控制器时，标题视图没有出现在它的原因是您已经更改了它的超级视图。每个视图只能有一个超级视图，并且您将其移动到下一个视图控制器的视图。

但我不知道为什么它根本没有出现在第二个视图控制器上。我刚刚制作了一个与您的代码完全相同的示例应用程序，下一个视图控制器确实显示了第一个的标题视图。然而，当它回来时，第一个没有标题视图。我试图通过将标题视图存储在第一个控制器上的属性中并在 viewWill/DidAppear 中再次设置它来解决此问题：如果它不是 nil，但它会在动画期间显示标题视图，然后将其删除。

所有这些听起来都不像预期的行为，所以我会做更多的测试并报告一个错误（或者回来提供一个更好的答案）。我建议你这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-29T17:12:55.360

我遇到了同样的问题：推送与 titleView 项目正常工作，但在导航动画完成后弹出让它消失。我尝试了几乎所有的组合，但这是最终奏效的：

1）在导航控制器的委托（我设置为它自己）中，我插入了：

```
- (void)navigationController:(UINavigationController *)navigationController didShowViewController:(UIViewController *)viewController animated:(BOOL)animated
{
    viewController.navigationItem.titleView = self.myCustomView;
} 
```

2）然后在每个单独的视图控制器（我有 3 个）中，我插入：

```
- (void)viewWillDisappear:(BOOL)animated
{
    self.navigationItem.titleView = nil;
} 
```

使用这些特定的回调方法非常重要。`willShowViewController:`当我在第一个和/或`viewDidDisappear:`第二个中使用时，它根本不起作用。

尝试在 a 中执行此操作的问题`prepareForSegue:`在于它仅在推送方向上有效。但是，您确实可以访问两个控制器，在其本身的`destinationViewController`和`sourceViewController`字段中`segue`。但是为了让它在另一个方向上工作，你必须把相同的代码放在`unwind segue`. 我认为我的解决方案可能是最简单的（特别是因为您想为导航控制器管理的所有视图控制器执行此操作）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-06T06:58:42.400

好的，我终于想通了。我认为实现这种行为的最佳方法是不在视图控制器之间使用 segue。由于两个视图是呈现相同数据的不同方式，我实现了一个具有两个视图（列表和地图）的控制器，然后使用一个按钮来执行交换视图的操作，如苹果开发人员库中所述：

```
- (IBAction)toggleMainViews:(id)sender {
    [UIView transitionFromView:(displayingPrimary ? primaryView : secondaryView)
        toView:(displayingPrimary ? secondaryView : primaryView)
        duration:1.0
        options:(displayingPrimary ? UIViewAnimationOptionTransitionFlipFromRight :
                    UIViewAnimationOptionTransitionFlipFromLeft)
        completion:^(BOOL finished) {
            if (finished) {
                displayingPrimary = !displayingPrimary;
            }
    }];
} 
```

[动画 Apple 开发者库](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/AnimatingViews/AnimatingViews.html#//apple_ref/doc/uid/TP40009503-CH6-SW26 "动画 Apple 开发者库")

使用这种方法我不会更改视图控制器，因此导航栏保持不变，我可以根据需要保留按钮。

# javascript - 将 WebSQL 纪元格式转换为 Javascript 日期

> ID：11343758
> 
> 赞同：1
> 
> 时间：2012-07-05T11:52:21.927
> 
> 标签：javascript, web-sql

我在 WebSQL 数据库中有一个 Timestamp 字段，存储如下：

/日期(1340420400000)/

当我从数据库中提取该值时，会向我返回一个文字字符串，我必须使用正则表达式提取纪元值，将其解析为 int，然后将其传递给 Javascript 日期。有没有更简单的方法可以做到这一点，看起来相当笨拙。

我知道我可以使用 SQLLite strftime 函数，但我更喜欢使用“SELECT *”，因为我有很多大表，并且我想避免识别所有查询中的每个字段。

谢谢！

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:57:28.737

如果你这么懒，那么你可以写

```
SELECT t.*, strftime('%whatever',t.Timestamp) AS formatted_timestamp
FROM t
... 
```

或将该`Timestamp`列重命名为`_Timestamp`：

```
SELECT t.*, strftime('%whatever',t._Timestamp) AS _Timestamp
FROM t
... 
```

或者/另外，您可以为每个表创建一个视图以供选择。

# c# - 为什么在 MVC3 中使用 ajax 动态加载表只能在兼容模式下工作？

> ID：11343760
> 
> 赞同：1
> 
> 时间：2012-07-05T11:52:30.007
> 
> 标签：c#, jquery, asp.net, asp.net-mvc-3

我正在尝试在 MVC3 中使用 AJAX 动态加载表。为什么这只能在 IE9 的兼容模式下工作？有办法解决吗？

看法：

```
<script src="../../Scripts/jquery-1.5.1.js" type="text/javascript"></script>
<script src="../../Scripts/jquery-ui-1.8.11.js" type="text/javascript"></script>
<script type="text/javascript">

    $.ajax({
        type: 'POST',        
        url: "/Index/GetApplicationsForUserJSON",       
        success: function (data) {
            for (var i = 0; i < data.length; i++) {
                $("#ApplicationsForUser tbody").append("<tr>" +
                            "<td>" + data[i].Application + "</td>" +
                            "<td>" + data[i].Roles + "</td>" +
                        "</tr>");
            }

            $("tr:odd").css({ 'backgroundColor': '#ebf0f5' });            
        }
    });

</script>

        <table id="ApplicationsForUser" class="ui-widget ui-widget-content" style="width: 99%;
            margin: 3px 0px 0px 3px">
            <thead>
                <tr class="ui-widget-header ">
                    <th style="width: 45%">
                        Application
                    </th>
                    <th style="width: 45%">
                        Roles
                    </th>                    
                </tr>
            </thead>
        </table> 
```

控制器：

```
 public JsonResult GetApplicationsForUserJSON()
        {

            Dictionary<string, string> tableData = new Dictionary<string, string>();
            tableData.Add("row1", "row1data");

            var jsonData = tableData
                          .Select(c => new
                          {
                              Application = c.Key,
                              Roles = c.Value
                          });

            return Json(jsonData, JsonRequestBehavior.AllowGet);

        } 
```

编辑：图片！

![兼容模式关闭](../Images/0dfe91e927e80f80edf0b16cb7f1d693.png)

![兼容模式开启](../Images/c0f46f025a5de31a0f457f1f6f311ed5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:27:25.933

我在您的示例中没有看到 tbody 元素。不过，您的 .append() 调用选择器包括一个。也许在兼容模式下，IE9 “假设” tbody 的存在作为表的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:02:05.723

因为有些浏览器即使在不打算这样做的情况下也可以存储数据，所以某些浏览器元素不会根据用户请求刷新。因此您必须通过在控制器级别指定这一点来强制执行此操作：

```
[OutputCache(NoStore = true, Duration = 0)] 
```

这将告诉浏览器不要存储来自先前请求的请求相关数据。

# css - iPhone上chrome的CSS标签/媒体查询

> ID：11343762
> 
> 赞同：2
> 
> 时间：2012-07-05T11:52:06.050
> 
> 标签：css, google-chrome, safari, ios

所以 Chrome 在这里适用于 iOS .. 万岁！

然而现在由于不同的屏幕布局（没有页脚工具栏），它与为 iphone 网页制作完美布局的能力相混淆。

我的公司有一个网站，它完美地位于 iphone 屏幕内，不需要滚动，它看起来像一个应用程序。然而，现在 chrome 以其不同的屏幕布局在这里（并且广受欢迎），为 iphone safari 调整大小的网站现在看起来很奇怪。

是否存在或将存在将 chrome 从 safari 中分离出来并为它们提供不同 CSS 的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T11:59:53.550

您可以检查用户代理，因为移动版 chrome 包含“CriOS”字样。根据这一点，您可以加载不同/附加的样式表。

```
Mozilla/5.0 (iPhone; U; CPU iPhone OS 5_1_1 like Mac OS X; en) AppleWebKit/534.46.0   
(KHTML, like Gecko) CriOS/19.0.1084.60 Mobile/9B206 Safari/7534.48.3 
```

请参阅：[https ://developers.google.com/chrome/mobile/docs/user-agent](https://developers.google.com/chrome/mobile/docs/user-agent)

你可以用 JS 只用两行检查它：

```
var userAgent = navigator.userAgent.toString().toLowerCase();
if(userAgent.indexOf('crios') != -1) { alert('you are using chrome for ios') } 
```

对于 PHP 看看：

[http://be2.php.net/manual/en/function.get-browser.php](http://be2.php.net/manual/en/function.get-browser.php)

# java - 如何限制子类修改抽象类中方法的范围？

> ID：11343763
> 
> 赞同：5
> 
> 时间：2012-07-05T11:52:37.627
> 
> 标签：java, oop, inheritance, scope

如何限制我的抽象类的实现类将方法的范围从受保护的修改为公共的？

例如：假设我有一个抽象类

```
package com.rao.test;

public abstract  class AbstractTEClass {

    protected abstract void function1();

    protected abstract void function2();

    protected void doWork() //I want to call the abstract methods from this method.
    {
        function1(); //implementation classes will give implementation of these methods
        function2();

    }

} 
```

现在，我有一个扩展上述抽象类的实现类

```
package com.rao.test;

public class AbstractTEClassImpl extends AbstractTEClass {

    @Override
    public void function1() {
        // TODO Auto-generated method stub
        System.out.println("FUnction1");
    }

    @Override
    public void function2() {
        // TODO Auto-generated method stub
        System.out.println("Function2");
    }

    public static void main(String[] args)
    {
        AbstractTEClassImpl objTEClass = new AbstractTEClassImpl();

        objTEClass.doWork();

    }

} 
```

**请注意，我正在将实现类中的 2 个抽象方法的范围从受保护更改为公共，如何限制我的实现类修改范围。
欢迎任何设计更改或建议或模式。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T11:58:50.050

你不能。

覆盖类总是可以比它覆盖的方法更多地访问方法。

在此处阅读有关修饰符的部分[http://docs.oracle.com/javase/tutorial/java/IandI/override.html](http://docs.oracle.com/javase/tutorial/java/IandI/override.html)

> 覆盖方法的访问说明符可以允许比覆盖方法更多但不能更少的访问。例如，超类中的受保护实例方法可以在子类中公开，但不能私有。
> 
> 如果您尝试将超类中的实例方法更改为子类中的类方法，则会收到编译时错误，反之亦然。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-05T11:59:30.427

没有办法做到这一点。而且我也不明白这一点：如果子类想让这个方法可以访问，为什么不呢？无论如何，它不会影响父抽象类的用户。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-05T20:07:36.030

你不能。我怀疑你想要做的是摆弄，`doWork()`这样它就可以在 function1 和 2 覆盖内可能发生的任何滥用扩展类中幸存下来。您可能想要添加方法和/或更改这些方法的作用。

覆盖是一件很方便的事情。我经常对在 C# 中工作感到非常恼火，因为微软“密封”了一切以防止覆盖。（我夸大了；他们只密封*我*想要覆盖的方法。）不要走那条路。找出你真正的问题是什么，并在你的基础 AbstractTEClass 类中处理它。

# asp.net-mvc - MVC 4 Web API - 复合键的路由

> ID：11343764
> 
> 赞同：9
> 
> 时间：2012-07-05T11:52:38.247
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在努力制定支持以下简单场景所需的路由配置：

```
http..service/api/objects/key1/key2 
```

我觉得我什么都试过了。

最大的问题是，每当它看起来像我已经破解它时，我发现

```
http..service/api/objects/key1 
```

被路由到无参数的 IQueryable Get。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T13:01:04.883

我想我已经搞定了。

```
routes.MapHttpRoute(
    name: IQueryableObjectsApiRouteName,
    routeTemplate: "api/objects",
    defaults: new { controller = "objects" }
);

routes.MapHttpRoute(
    name: ObjectsApiRouteName,
    routeTemplate: "api/objects/{siteId}/{assetId}",
    defaults: new { controller = "objects", siteId = "", assetId = "" }
); 
```

我需要使用复合键为每个控制器设置两个显式路由。键的默认值为“”，我在控制器中检测到它并抛出我自己的 404。

这个对我有用。我现在可以去吃午饭了。

# java - 用于运行 Java 程序的 Microsoft Excel 宏

> ID：11343769
> 
> 赞同：12
> 
> 时间：2012-07-05T11:52:50.693
> 
> 标签：java, excel, excel-formula, excel-2003, jxl

在 Jxl 和 POI API 的帮助下，我学会了使用 Java 程序读写 Excel 文件。是否可以在宏的帮助下运行 Java 程序？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-05T21:59:27.960

对的，这是可能的。

实际上有很多方法，我希望你喜欢我的例子。

为了证明这一点，我创建了一个程序，其中一些文本作为参数发送，程序以修改后的版本进行响应。我做了一个可运行的罐子。第一个示例从 args 读取参数，从标准输入读取其他参数。

文件**Hello.java**和**H1.jar**：

```
public class Hello {
    public static void main(String[] args) {
        StringBuilder sb = new StringBuilder("Hello");

        if (args.length > 0) 
            sb.append(' ').append(args[0]);
        System.out.println(sb.append('.').toString());
    }
} 
```

文件**Hello2.java**和**H2.jar**：

```
import java.util.Scanner;

public class Hello2 {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        StringBuilder sb = new StringBuilder("Hello");

        sb.append(' ').append(sc.nextLine());
        System.out.println(sb.append('.').toString());
    }
} 
```

您可以将它们保存在一个 jar 中，但随后您需要创建和[使用清单](https://stackoverflow.com/questions/2591516/why-has-it-failed-to-load-main-class-manifest-attribute-from-a-jar-file)（这有点矫枉过正）。

现在在 Excel 中，我添加了一个模块和对 Windows 脚本宿主对象的引用。如果您不喜欢`sleep`，则可以将其替换为`DoEvents`：

```
'add a reference to Windows Script Host Object Model
'for example : Tools-References
Option Explicit
Private Declare Sub Sleep Lib "kernel32" (ByVal dwMilliseconds As Long)

Private Sub RunSleep( _
    exec As WshExec, _
    Optional timeSegment As Long = 20 _
)
    Do While exec.Status = WshRunning
        Sleep timeSegment
    Loop
End Sub

Private Function RunProgram( _
    program As String, _
    Optional command As String = "" _
) As WshExec
    Dim wsh As New WshShell
    Dim exec As WshExec

    Set exec = wsh.exec(program)
    Call exec.StdIn.WriteLine(command)
    Call RunSleep(exec)
    Set RunProgram = exec
End Function 
```

为了测试它，我将文件保存到`c:\`驱动器并使用了代码：

```
Public Sub Run()
    Dim program As WshExec
    Set program = RunProgram("java -jar ""C:\\H1.jar"" Margus")
    Debug.Print "STDOUT: " & program.StdOut.ReadAll

    Set program = RunProgram("java -jar ""C:\\H2.jar", "Margus")
    Debug.Print "STDOUT: " & program.StdOut.ReadAll
End Sub 
```

就我而言，我得到了以下答复：

> 标准输出：你好马格斯。
> 
> 标准输出：你好马格斯。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T13:13:06.120

Your VBA can write the output to a file and Java can poll for file modifications periodically and read from the file. And write the data back to VBA through another file. VBA - Java integration is next to impossible unless you just want to fire a Java program from the shell through System.execute(...).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-07-06T13:09:35.513

我已经使用了..注意，使用 javaw 否则会弹出一个黑色窗口

```
Dim result As String
Dim commandstr As String

commandstr = "javaw -jar somejar someparameter"

' try with or without cast to string
result = CStr( shellRun(commandstr) )

'somewhere from SO but forget.. sorry for missing credits

Public Function ShellRun(sCmd As String) As String

    'Run a shell command, returning the output as a string'

    Dim oShell As Object
    Set oShell = CreateObject("WScript.Shell")

    'run command'
    Dim oExec As Object
    Dim oOutput As Object
    Set oExec = oShell.exec(sCmd)
    Set oOutput = oExec.StdOut

    'handle the results as they are written to and read from the StdOut object'
    Dim s As String
    Dim sLine As String
    While Not oOutput.AtEndOfStream
        sLine = oOutput.ReadLine
        If sLine <> "" Then s = s & sLine & vbCrLf
    Wend

    ShellRun = s

End Function 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-10T13:19:53.680

比其他建议的解决方案更好的是使用 Jinx ( [https://exceljava.com](https://exceljava.com) ) 在 Java 中创建 Excel 插件。

有关如何用 Java 编写 Excel 宏的详细信息，请参阅[https://exceljava.com/docs/macros.html 。](https://exceljava.com/docs/macros.html)

除了宏，还可以编写用户定义的功能和菜单。

事实上，您可以使用 Java 作为 VBA 的完全替代品！请参阅[https://github.com/exceljava/jinx-com4j](https://github.com/exceljava/jinx-com4j)了解如何调用 Excel 对象模型以允许您在 Java 中使用 VBA 执行所有操作。

# c# - 在 C# 中查找较大图像中的子图像

> ID：11343772
> 
> 赞同：5
> 
> 时间：2012-07-05T11:53:02.093
> 
> 标签：c#, image, function, location

我想编写一个获取 2 个位图（小图像和大图像）的函数。它应该搜索小图像在大图像中的位置。然后它应该返回子图像所在的 (X/Y) 点。

我已经找到了一堆解决方案，但都是用 Java 编写的，例如这个：[Find known sub image in large image](https://stackoverflow.com/questions/297762/find-known-sub-image-in-larger-image) 所以我尝试用 C# 重新编程它们，但总是失败，因为代码不是真正的 Java。Image.getPixel(x, y) 方法在那里不存在，我真的不知道阈值应该是多少。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T13:55:46.227

你去吧。此函数返回在大图像中找到的所有位置，因为小图像也可以多次包含在大图像中。如果你愿意，你可以重写函数 unsafe 以获得更高的性能。

```
public static List<Point> GetSubPositions(Bitmap main, Bitmap sub) {
    List<Point> possiblepos = new List<Point>();

    int mainwidth = main.Width;
    int mainheight = main.Height;

    int subwidth = sub.Width;
    int subheight = sub.Height;

    int movewidth = mainwidth - subwidth;
    int moveheight = mainheight - subheight;

    BitmapData bmMainData = main.LockBits(new Rectangle(0, 0, mainwidth, mainheight), ImageLockMode.ReadWrite, PixelFormat.Format32bppArgb);
    BitmapData bmSubData = sub.LockBits(new Rectangle(0, 0, subwidth, subheight), ImageLockMode.ReadWrite, PixelFormat.Format32bppArgb);

    int bytesMain = Math.Abs(bmMainData.Stride) * mainheight;
    int strideMain = bmMainData.Stride;
    System.IntPtr Scan0Main = bmMainData.Scan0;
    byte[] dataMain = new byte[bytesMain];
    System.Runtime.InteropServices.Marshal.Copy(Scan0Main, dataMain, 0, bytesMain);

    int bytesSub = Math.Abs(bmSubData.Stride) * subheight;
    int strideSub = bmSubData.Stride;
    System.IntPtr Scan0Sub = bmSubData.Scan0;
    byte[] dataSub = new byte[bytesSub];
    System.Runtime.InteropServices.Marshal.Copy(Scan0Sub, dataSub, 0, bytesSub);

    for (int y = 0; y < moveheight; ++y) {
        for (int x = 0; x < movewidth; ++x) {
            MyColor curcolor = GetColor(x, y, strideMain, dataMain);

            foreach (var item in possiblepos.ToArray()) {
                int xsub = x - item.X;
                int ysub = y - item.Y;
                if (xsub >= subwidth || ysub >= subheight || xsub < 0)
                    continue;

                MyColor subcolor = GetColor(xsub, ysub, strideSub, dataSub);

                if (!curcolor.Equals(subcolor)) {
                    possiblepos.Remove(item);
                }
            }

            if (curcolor.Equals(GetColor(0, 0, strideSub, dataSub)))
                possiblepos.Add(new Point(x, y));
        }
    }

    System.Runtime.InteropServices.Marshal.Copy(dataSub, 0, Scan0Sub, bytesSub);
    sub.UnlockBits(bmSubData);

    System.Runtime.InteropServices.Marshal.Copy(dataMain, 0, Scan0Main, bytesMain);
    main.UnlockBits(bmMainData);

    return possiblepos;
}

private static MyColor GetColor(Point point, int stride, byte[] data) {
    return GetColor(point.X, point.Y, stride, data);
}

private static MyColor GetColor(int x, int y, int stride, byte[] data) {
    int pos = y * stride + x * 4;
    byte a = data[pos + 3];
    byte r = data[pos + 2];
    byte g = data[pos + 1];
    byte b = data[pos + 0];
    return MyColor.FromARGB(a, r, g, b);
}

struct MyColor {
    byte A;
    byte R;
    byte G;
    byte B;

    public static MyColor FromARGB(byte a, byte r, byte g, byte b) {
        MyColor mc = new MyColor();
        mc.A = a;
        mc.R = r;
        mc.G = g;
        mc.B = b;
        return mc;
    }

    public override bool Equals(object obj) {
        if (!(obj is MyColor))
            return false;
        MyColor color = (MyColor)obj;
        if(color.A == this.A && color.R == this.R && color.G == this.G && color.B == this.B)
            return true;
        return false;
    }
} 
```

# android - 滚动自定义 ListView 时，复选框值发生变化

> ID：11343773
> 
> 赞同：25
> 
> 时间：2012-07-05T11:53:08.837
> 
> 标签：android, listview, checkbox

**我所拥有的：**带有 Textviews 和复选框的自定义列表视图。

* * *

**问题：**假设我的屏幕一次只能显示 6 项列表，而其他项是不可见的。所以我检查了列表中的第一个元素（位置 0 的项目）。我向下滚动以查看我的所有列表，当我向上滚动第一个元素（位置 0 的项目）时，复选框被正确选中。伟大的！但是现在也检查了新项目，例如位置 8 的项目（因为当我滚动列表（对于 theRycicking）它成为位置 0 的新项目..记住我的屏幕一次只显示 7 个元素）。它被检查了，但我从未检查过它！

* * *

**问题**：我怎样才能避免这个问题？我不希望我不单击的复选框更改其状态。

* * *

在我实现 setOnCheckedChangeListener 的带有 getView 函数的 listView 适配器下方：

```
public class NewQAAdapterSelectFriends extends BaseAdapter {
private LayoutInflater mInflater;
private Person[] data;

public NewQAAdapterSelectFriends(Context context) { 
    mInflater = LayoutInflater.from(context);
}

public void setData(Person[] data) {
    this.data = data;
}

@Override
public int getCount() {
    return data.length;
}

@Override
public Object getItem(int item) {
    return data[item];
}

@Override
public long getItemId(int position) {
    return position;
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.item_select_friends, null);
        final ViewHolder viewHolder = new ViewHolder();
        viewHolder.nameText=(TextView) convertView.findViewById(R.id.personName);
        viewHolder.surnameText=(TextView) convertView.findViewById(R.id.personSurname);
        viewHolder.contactImage=(ImageView) convertView.findViewById(R.id.personImage);
        viewHolder.checkBox=(CheckBox)convertView.findViewById(R.id.checkBox);
        convertView.setTag(viewHolder);
        viewHolder.nameText.setTag(viewHolder.nameText);
        viewHolder.nameText.setTag(viewHolder.surnameText);
        viewHolder.contactImage.setTag(data[position]);
        viewHolder.checkBox.setOnCheckedChangeListener(
                new CompoundButton.OnCheckedChangeListener() {
                    @Override
                    public void onCheckedChanged(CompoundButton buttonView,boolean isChecked) {
                        Person element = (Person) viewHolder.checkBox.getTag();

                        if(isChecked){
                            element.setCheck(buttonView.isChecked());
                            //data[position].setCheck(true); //this is equivalent to previous line

                        }
                        else{
                            //to-do

                        }

                    }
                });
        viewHolder.checkBox.setTag(data[position]);

    } else {

    }

     ViewHolder holder = (ViewHolder) convertView.getTag();
     holder.nameText.setText(data[position].getName());
     holder.surnameText.setText(data[position].getSurname());
     holder.contactImage.setImageResource(data[position].getPhotoRes());
     holder.contactImage.setScaleType(ScaleType.FIT_XY);
     holder.checkBox.setChecked(data[position].isCheck());
    return convertView;
}

static class ViewHolder {
    TextView nameText;
    TextView surnameText;
    ImageView contactImage;
    CheckBox checkBox;
}
} 
```

* * *

感谢您的回答:)

**编辑：根据我的建议，我改变了我的 getView，如下所示：**

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    final ViewHolder viewHolder;
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.item_select_friends, null);
        viewHolder=new ViewHolder();
        viewHolder.nameText=(TextView) convertView.findViewById(R.id.personName);
        viewHolder.surnameText=(TextView) convertView.findViewById(R.id.personSurname);
        viewHolder.contactImage=(ImageView) convertView.findViewById(R.id.personImage);
        viewHolder.checkBox=(CheckBox)convertView.findViewById(R.id.checkBox);

        convertView.setTag(viewHolder);

        viewHolder.nameText.setTag(viewHolder.nameText);
        viewHolder.nameText.setTag(viewHolder.surnameText);
        viewHolder.contactImage.setTag(data[position]);
        viewHolder.checkBox.setChecked(data[position].isCheck());  
        viewHolder.checkBox.setOnClickListener(new OnClickListener() {  

            public void onClick(View arg0) {  

                if(viewHolder.checkBox.isChecked()==true)   
                    data[position].setCheck(true);  
                else  
                    data[position].setCheck(false);  
            }  
        }); 

    }
    else{
        viewHolder = (ViewHolder) convertView.getTag();
    }

    viewHolder.nameText.setText(data[position].getName());
    viewHolder.surnameText.setText(data[position].getSurname());
    viewHolder.contactImage.setImageResource(data[position].getPhotoRes());
    viewHolder.contactImage.setScaleType(ScaleType.FIT_XY);
    viewHolder.checkBox.setChecked(data[position].isCheck());
    return convertView;
} 
```

**编辑后的情况：现在，如果我检查屏幕上显示的初始项目，然后滚动列表，则它们的值已正确保存。但是，当我滚动列表时，例如，我想检查列表的最后一个树复选框，然后在滚动后它们变得未选中....但是为什么？？？？？？**

**已解决**：我用以下代码解决了我的 getView 问题：

```
 public class NewQAAdapterSelectFriends extends BaseAdapter {
private LayoutInflater mInflater;
private Person[] data;
boolean[] checkBoxState;
ViewHolder viewHolder;

public NewQAAdapterSelectFriends(Context context) { 
    mInflater = LayoutInflater.from(context);
}

public void setData(Person[] data) {
    this.data = data;
    checkBoxState=new boolean[data.length];
}

@Override
public int getCount() {
    return data.length;
}

@Override
public Object getItem(int item) {
    return data[item];
}

@Override
public long getItemId(int position) {
    return position;
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.item_select_friends, null);
        viewHolder=new ViewHolder();

        viewHolder.nameText=(TextView) convertView.findViewById(R.id.personName);
        viewHolder.surnameText=(TextView) convertView.findViewById(R.id.personSurname);
        viewHolder.contactImage=(ImageView) convertView.findViewById(R.id.personImage);
        viewHolder.checkBox=(CheckBox)convertView.findViewById(R.id.checkBox);

        convertView.setTag(viewHolder);

    }
    else{
        viewHolder = (ViewHolder) convertView.getTag();
    }

    viewHolder.nameText.setText(data[position].getName());
    viewHolder.surnameText.setText(data[position].getSurname());
    viewHolder.contactImage.setImageResource(data[position].getPhotoRes());
    viewHolder.contactImage.setScaleType(ScaleType.FIT_XY);
    viewHolder.checkBox.setChecked(checkBoxState[position]);
    viewHolder.checkBox.setOnClickListener(new View.OnClickListener() {

           public void onClick(View v) {
               if(((CheckBox)v).isChecked()){
                   checkBoxState[position]=true;
                   data[position].setCheck(true);
               }else{
                   checkBoxState[position]=false;
                   data[position].setCheck(false);
               }
            }
        });
    return convertView;
}

static class ViewHolder {
    TextView nameText;
    TextView surnameText;
    ImageView contactImage;
    CheckBox checkBox;
} 
```

}

我已经看过这个教程来做我的getView：[http ://androidcocktail.blogspot.it/2012/04/adding-checkboxes-to-custom-listview-in.html](http://androidcocktail.blogspot.it/2012/04/adding-checkboxes-to-custom-listview-in.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-30T13:35:38.013

我解决了我的问题，只需将“setOnCheckedChangeListener”更改为“setOnClickListener”

```
public View getView(final int position, View convertView, ViewGroup parent) {

    ViewHolder holder;

    if (convertView == null) {

        CheckBox cbItemChecklist = new CheckBox(context);

        holder = new ViewHolder();
        holder.cbItemChecklist = cbItemChecklist;

        convertView = cbItemChecklist;
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    final ItemChecklist itemChecklist = itensChecklist.get(position);

    holder.cbItemChecklist.setText(itemChecklist
            .getDescricaoItemChecklist());
    holder.cbItemChecklist.setChecked(itemChecklist.isChecked());
    holder.cbItemChecklist
            .setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    if(itemChecklist.isChecked()){
                        itemChecklist.setChecked(false);
                    } else {
                        itemChecklist.setChecked(true);                         
                    }

                }
            });
    return convertView;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-20T09:38:11.040

检查下面的代码 -

```
public View getView(int position, View convertView, ViewGroup parent){
            View view = convertView;
            ViewHolder holder = new ViewHolder();

            if(view == null){

                view = inflater.inflate(R.layout.list_callcycle_blue, null);                
                holder.llContainer = (LinearLayout) view.findViewById(R.id.ll_container);
                holder.lblLabel = (TextView) view.findViewById(R.id.txt_desc);
                holder.cb = (CheckBox) view.findViewById(R.id.cb_store);

                view.setTag(holder);
            } else {
                holder = (ViewHolder) view.getTag();
            }

            final Object data = getItem(position);
            holder.lblLabel.setText(data.getDescription());

            holder.cb.setTag(position);
            holder.cb.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                @Override
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

                    int position = (Integer) buttonView.getTag();
                    objects.get(position).setChecked(buttonView.isChecked());
                }
            });
            holder.cb.setChecked(isChecked(position));

            return view;
        } 
```

始终记住，在设置数据之前使用更改，`holder.cb.setOnCheckedChangeListener()` *即任何侦听器，在我们的例子中是*`holder.cb.setChecked()`

**原因：**当我们滚动时，listview 会回收视图，所以如果 setchecked 在侦听器之前使用，那么它将在旧侦听器的基础上选择值。如果我们在监听器之后设置它，那么它将采用最新的值

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T12:05:57.810

仅当 convertview 为空时，您才设置复选框的标记。这只发生在记录的第一个屏幕上。当用户向下滚动时，之前的转换视图被回收。因此，您的复选框将较旧的数据项作为其标签。

您检查的更改侦听器应如下所示：

```
new CompoundButton.OnCheckedChangeListener()
{
    @Override
    public void onCheckedChanged(CompoundButton buttonView,boolean isChecked)
    {
        Person element = (Person) viewHolder.checkBox.getTag();

        data[position].setCheck(isChecked);

        if(isChecked)
        {
            // do your stuff
        }
        else
        {
            //to-do
        }

    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T11:59:27.827

您没有涵盖convertView != null 的情况，这是上下滚动时发生的情况。您应该实现一种方法来回收 convertView （更好）或者只是忽略它并在这种情况下也提供一个新的 View （更糟）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T12:08:48.787

检查此代码

```
public class NewQAAdapterSelectFriends extends BaseAdapter {
private LayoutInflater mInflater;
private Person[] data;
ArrayList<String> checkedItem=new ArrayList<String>();

public NewQAAdapterSelectFriends(Context context) { 
    mInflater = LayoutInflater.from(context);
}

public void setData(Person[] data) {
    this.data = data;
}

@Override
public int getCount() {
    return data.length;
}

@Override
public Object getItem(int item) {
    return data[item];
}

@Override
public long getItemId(int position) {
    return position;
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.item_select_friends, null);
        final ViewHolder viewHolder = new ViewHolder();
        viewHolder.nameText=(TextView) convertView.findViewById(R.id.personName);
        viewHolder.surnameText=(TextView) convertView.findViewById(R.id.personSurname);
        viewHolder.contactImage=(ImageView) convertView.findViewById(R.id.personImage);
        viewHolder.checkBox=(CheckBox)convertView.findViewById(R.id.checkBox);
        convertView.setTag(viewHolder);
        viewHolder.nameText.setTag(viewHolder.nameText);
        viewHolder.nameText.setTag(viewHolder.surnameText);
        viewHolder.contactImage.setTag(data[position]);
        viewHolder.checkBox.setOnCheckedChangeListener(
                new CompoundButton.OnCheckedChangeListener() {
                    @Override
                    public void onCheckedChanged(CompoundButton buttonView,boolean isChecked) {
                        Person element = (Person) viewHolder.checkBox.getTag();

                        if(isChecked){
                            getCheckList(data[position],isChecked);
                        }
                        else{
                            getCheckList(data[position],isChecked);    
                        }

                    }
                });
        viewHolder.checkBox.setTag(data[position]);
    } 
     ViewHolder holder = (ViewHolder) convertView.getTag();
     holder.nameText.setText(data[position].getName());
     holder.surnameText.setText(data[position].getSurname());
     holder.contactImage.setImageResource(data[position].getPhotoRes());
     holder.contactImage.setScaleType(ScaleType.FIT_XY);
     if(checkedItem != null && checkedItem.contains(data[position])){
        viewHolder.checkBox.setChecked(true);
     }else
     {
        viewHolder.checkBox.setChecked(false);
     } 
    return convertView;
}

static class ViewHolder {
    TextView nameText;
    TextView surnameText;
    ImageView contactImage;
    CheckBox checkBox;
}
public void getCheckList(String value,boolean status){
        if(!checkedItem.contains(value)  && status)
        {
            checkedItem.add(value);
        }
        if(checkedItem.contains(value)  && !status)
        {
            checkedItem.remove(value);
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-31T10:33:23.410

对于 CheckBox，我有一个很好的选择。您可以使用`android:state_activated="true"`您的 ListView 行。它不会丢失状态，也不需要大量代码。

这是如何工作的

*   `active_row.xml`在您的可绘制文件夹中创建

`<selector xmlns:android="http://schemas.android.com/apk/res/android">`

```
<item android:state_activated="true"        
          android:drawable="@android:color/darker_gray"/>
 </selector> 
```

*   将行布局的背景设置为`android:background="@drawable/active_row.xml"`
*   最后将其添加到您的 ListView `android:choiceMode="multipleChoice"`

您可以像这样检查每一行的状态

```
View v;

LinearLayout yourRowLayout;
for (int i = 0; i < yourListView.getChildCount(); i++) {
v = yourListView.getChildAt(i);
yourRowLayout = (LinearLayout) v.findViewById(R.id. yourRowLayout);
if(yourRowLayout.isActivated()){....  }  } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-25T05:44:55.117

您需要更新适配器以保留复选框的值

```
holder.chk.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                CheckBox c = (CheckBox)v.findViewById(R.id.chkID);
                Boolean chk = c.isChecked();
                Integer pos = (Integer)v.getTag();
                itemList.get(pos).setChk(chk);

            }
        }); 
```

如需更多帮助，您可以参考[保留复选框值中的此帖子](http://www.ikcure.com/checkbox-check-lost-on-listview-scroll-in-android/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-14T10:10:51.697

在适配器中使用*setTag() 。*您可以在此处查看[示例 带有复选框滚动问题的示例列表视图](http://lalit3686.blogspot.in/2012/06/today-i-am-going-to-show-how-to-deal.html)

# ruby - Ruby：以“Ruby 方式”分发应用程序

> ID：11343775
> 
> 赞同：0
> 
> 时间：2012-07-05T11:53:17.183
> 
> 标签：ruby, deployment

我无法将我的大脑包裹在以下事情上......我希望有一种简单的“rubyist”方法来解决这个问题。

我有几个 linux 服务器，它们都通过一堆带有自己配置的 ruby​​ 脚本进行管理。所有这些脚本都依赖于一个 utils gem，它可以通过“gem install”轻松安装在所有主机上。然而，应用程序本身是主机依赖的。

例如处理夜间数据库备份的 ruby​​ 脚本只在数据库主机上有意义。解析应用服务器日志文件的脚本在数据库主机上也没有任何关系。

使用 utils gem 很容易。我只是把它放到我们的 gem 服务器上，每个主机都会获取它。但是应用程序本身及其配置目前是手动复制的。但这有点愚蠢。

我真的很想将 app + config 打包到它自己的 ruby​​ gem 中。这部分很容易。但是我希望将应用脚本安装到 /usr/local/bin 并将配置文件安装到 /usr/local/etc。但是我不知道如何告诉 gemspec 如何处理每个文件的安装路径，包括所有者更改和可能的强制手动差异/自动合并，以防配置发生更改。

我偷偷尝试启动一个厨师系统，它可以解决所有问题。但是目前这里发生的事情太多，无法建立这样的基础设施......我什至不能使用洒......遗憾的是。所以现在一切都很糟糕。

那么有没有办法告诉我的 gemspec 如何处理某些文件，或者至少有一种方法可以告诉 gemspec 在安装时运行某个文件，以便我可以编写解决这些问题的方法？

或者也许你有类似的情况并且有一个适合你的好解决方案，你不介意与我分享你的智慧？

提前谢谢，斯特凡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:57:58.093

我会将该应用程序打包为一个包。也就是说，在 Debian/Ubuntu 上制作 .deb 文件，在 RedHat 上制作 .rpm 等等。

这解决了将可执行文件和配置放置到正确文件夹的问题。

# javascript - 使用 jQuery 拖动将链接拖动到浏览器

> ID：11343776
> 
> 赞同：0
> 
> 时间：2012-07-05T11:53:17.667
> 
> 标签：javascript, jquery, css, jquery-ui, google-chrome

我有一个小脚本，您可以在其中拖动链接，但我也希望它可以放在浏览器栏上，以便您可以轻松地为页面添加书签或共享它等。我怎样才能做到这一点？

这是我现在使用的拖动功能之一的示例：http:
[//jsfiddle.net/NzbPW/2/](http://jsfiddle.net/NzbPW/2/)

提前致谢。

[编辑：]
我找到了一个我想要的示例，尝试拖动“+bitmark”按钮：
[http ://bitly.com/a/tools](http://bitly.com/a/tools)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:00:59.357

这只能通过本机浏览器功能（例如参见[http://jsfiddle.net/NzbPW/3/](http://jsfiddle.net/NzbPW/3/)）而不是自定义拖放脚本来实现。不过，有一种方法可以做到这一点，那就是使用 HTML5 中定义的拖放原生功能（例如，参见：http: [//www.w3schools.com/html5/html5_draganddrop.asp](http://www.w3schools.com/html5/html5_draganddrop.asp)）。

# macos - Mac 商店屏幕尺寸

> ID：11343787
> 
> 赞同：0
> 
> 时间：2012-07-05T11:53:42.727
> 
> 标签：macos

我有一个用于 mac 的图书应用程序，每页的图像大小为 1024x768。我的问题是试图弄清楚每一页的显示。

*   我应该把它变成一个全屏应用程序吗？但在大型显示器上可能会出现一些可怕的缩放。
*   我可以将其固定在 1024*768 - 这在真正的大/小显示器上也可能令人沮丧

我以前从未这样做过，所以不知道从哪里开始。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:14:31.737

这取决于与您的应用程序兼容的书籍格式：

*   如果它将使用基于图像的书籍，则全屏模式是个坏主意（因为缩放问题）
*   如果它是结构化的数据书籍（epub、xml、...），那么缩放就不成问题了！

# testing - 在 fakeApplication() 中为 Play 设置语言！2.0.2

> ID：11343790
> 
> 赞同：0
> 
> 时间：2012-07-05T11:53:51.400
> 
> 标签：testing, playframework, playframework-2.0

```
 running(fakeApplication(), new Runnable() {
        public void run() {
            Content html = views.html.index.render(loginForm);
            assertThat(contentType(html)).isEqualTo("text/html");
            assertThat(contentAsString(html)).contains("log in");
        }
    }); 
```

我们使用这段代码来测试视图是否正确呈现，但问题是视图中的文本没有使用我们为实际应用程序指定的 Messages.en 文件（因此它呈现 login.login 而不是“登录”例如）。

有没有办法将 fakeapplication 配置为使用特定的语言（然后让它查找适当的消息文件）？

我们试过这个无济于事：

```
 Map<String, String> config = new HashMap<String, String>();
    config.put("application.langs", "en");
    FakeApplication fakeApp = new FakeApplication(additionalConfiguration = config); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:34:21.760

试试这个：

```
Map<String, String> config = new HashMap<String, String>();
config.put("application.langs", "en");
FakeApplication fakeApp = new FakeApplication(new java.io.File("conf/"), Helpers.class.getClassLoader(), config, , new ArrayList<String>())`; 
```

# php - 查看论坛主题时如何减少mysql更新

> ID：11343792
> 
> 赞同：0
> 
> 时间：2012-07-05T11:53:58.273
> 
> 标签：php, mysql, delay, forum, accumulate

每次成员查看论坛上的主题/线程时，都会在主题表上进行更新以将总查看次数增加一。

我正在寻找不更新每个视图的可能方法的答案，而是为每个主题积累视图并 - （如何？）添加视图，然后通过 cron 定期更新汇总视图 - （如何？ ）排队更新 - 其他选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:59:35.403

我建议使用`Static variable`或`temp table`维护计数，然后在一段时间内更新表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:57:15.350

您可以尝试缓存主题视图的数量并通过 cron 每 X 分钟运行一次更新查询，或者检查每 N 个主题视图以运行查询。为了让用户看到正确数量的主题/论坛视图，返回缓存值。
使用 APC

```
/*a small example using Topic ID and inc number*/
$TopicID=123;
if(apc_exists($TopicID)){
  echo "TotalViews : ".apc_inc($TopicID,1)."<br/>";
}else{
  // query database for numbers of views and cache that number, say its 10
 apc_store($TopicID,10);

 echo "TotalViews : ".apc_inc($TopicID,1)."<br/>";
}
/**********/
/*a larger example using a ForumIndex to hold all IDs, usefull for running a cron job and update Database*/
$ForumIndex = array(
        ("threads")=>array(
                (456) => 1000
        ),
        ("topics")=>array(
                (123)=>10
        )
);
if(apc_exists("forum_index")){ // if it exists
    $currentIndex = apc_fetch("forum_index");  // get current Index
    $currentIndex["topics"][] = array( // add a new topic 
        (1234)=>124
    );
    $currentIndex["threads"][456] += 1; // Increase threads with ID 456 by 1 view
    apc_store("forum_index",$currentIndex); // recache
    var_dump(apc_fetch("forum_index")); // view cached data
}else{ // it doesn't exists
    /*Fetch from database the value of the views */
        // Build $ForumIndex array and cache it
    apc_store("forum_index",$ForumIndex);
    var_dump(apc_fetch("forum_index"));
}
/*a cron job to run every 10 min to update stuff at database*/
if(apc_exists("forum_index")){
    $Index = apc_fetch("forum_index");
    foreach($Index as $ID => $totalViews){
        // execute update query
    }
    // delete cached data or do nothing and continue using cache
}else{
    echo "Ended cron job .. nothing to do";
} 
```

# java - 从 Spring MVC 调用远程地址

> ID：11343799
> 
> 赞同：0
> 
> 时间：2012-07-05T11:54:14.030
> 
> 标签：java, spring, spring-mvc, call

我必须调用一个远程服务，它希望我将一些参数与 URL 一起发送，即：`HTTP://HOST:PORT/APPNAME/privado/loginAction.do?idioma=ES&CssSize=1&urlRespuesta=SOMEOTHERURL`

我应该如何从 Spring MVC 中的控制器进行调用？

显然主机与部署我的应用程序的主机不同......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:12:51.997

如果您需要*控制器*进行调用，而不是发送重定向，那么您可以使用[Apache Commons HttpClient](http://hc.apache.org/httpcomponents-client-ga/)，或者如果其他服务是 RESTful 的，您可以使用 Spring 的[RESTTemplate](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/client/RestTemplate.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:57:17.757

在您的控制器中，您可以使用

```
response.sendRedirect("remote_server_url"); 
```

如果主机与部署的应用程序不同，则很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T14:09:16.850

好吧，最后我按照你的建议做了，但是这样：

```
return "redirect:/http://blablabla.com/loginAction.do" 
```

# mysql - 将新数据插入表后清理旧数据

> ID：11343801
> 
> 赞同：-1
> 
> 时间：2012-07-05T11:54:19.437
> 
> 标签：mysql, sql

首先我们从空表开始

**行 = 0**

其次，我们插入随机行，比如说 3400

**行 = 3400**

第三次我计算表中有多少行，然后插入新行，然后从计数中删除行<=​​。

这个逻辑只适用于第一次。如果重复，计数将始终为 3400，但 id 会增加，因此不会删除行

我不能使用最后插入的 ID，因为行是随机的，而且我不知道它会加载多少。

// 更新

```
"SELECT count(*) from table" - the total count so far
"INSERT INTO tab_videos_watched (id , name) values (id , name)" - this is random can     be 3400 or 5060 or 1200
"DELETE FROM table  WHERE idtable  <= $table_count" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:05:38.383

如果`id`是自动递增，那么你应该使用如下：

```
select max(id) from my_table; 
```

将其读`maxId`入一个变量，然后在发出`delete`如下查询时使用：

```
delete from my_table where id <= ?; 
```

将查询参数替换为最后找到的`maxId`值。

或者，您可以将列定义`last_inserted`为`datetime`类型。
在下次插入之前，将其选择到局部变量中。

```
select max(last_inserted) as 'last_inserted' from my_table; 
```

插入完成后，使用`last_inserted`删除记录。

```
delete from my_table where last_inserted <= ?; 
```

将查询参数替换为最后找到的`last_inserted`值。

# ruby-on-rails-3 - Activerecord 中“包含”中的条件

> ID：11343804
> 
> 赞同：0
> 
> 时间：2012-07-05T11:54:30.477
> 
> 标签：ruby-on-rails-3

如果我有一个名为“文章”的模型和另一个名为“评论”的模型，每篇文章都有零个或多个评论，并且每个评论都有一个关联的用户，我该如何执行以下操作：

查找网站上的所有文章以及给定用户所做的任何评论

在 SQL 中：

```
SELECT * FROM articles LEFT OUTER JOIN comments ON articles.id = comments.article_id AND comments.user_id = 2 
```

我试过这样做：

```
Article.joins('LEFT OUTER JOIN comments ON articles.id = comments.article_id AND comments.user_id = 2) 
```

这里的结果是`result.first.comments`给我这篇文章的所有评论。我可以通过在最后一部分添加条件来解决这个问题，但它不会急于求成

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T22:58:23.050

如果您想要特定用户和相应文章的所有评论，这应该有效：

```
Comment.joins(:articles).where("comments.user_id" => 2).select("comments.*, articles.*") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:02:59.583

你可以试试`Article.joins(:comments).where("comments.user_id" => 2)`吗？

[在这里](http://guides.rubyonrails.org/active_record_querying.html#specifying-conditions-on-the-joined-tables)查看更多信息。

# c# - 你如何通过 xaml 引用一个类？

> ID：11343808
> 
> 赞同：3
> 
> 时间：2012-07-05T11:54:41.050
> 
> 标签：c#, wpf, xaml, reference

我有一个没有任何代码的 Xaml 文件。我想让它在同一个项目中引用另一个类作为布尔值。如何引用另一个类对象（注意这些对象是静态的）。

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T11:57:27.923

使用[标记扩展](http://msdn.microsoft.com/en-us/library/ms742135.aspx)[，`x:Static`](http://msdn.microsoft.com/en-us/library/ms742135.aspx)例如（取自 MSDN）：

```
<object property="{x:Static prefix:typeName.staticMemberName}" .../> 
```

您需要对此进行调整以适合您的示例（或在问题中包含更多信息）。另请注意来自同一[MSDN 页面](http://msdn.microsoft.com/en-us/library/ms742135.aspx)的以下警告：

> 您用于 WPF 编程的默认 XAML 命名空间不包含许多有用的静态属性，并且大多数有用的静态属性都具有支持，例如无需 {x:Static} 即可方便使用的类型转换器。对于静态属性，如果满足以下条件之一，则必须为 XAML 命名空间映射前缀：
> 
> *   您正在引用 WPF 中存在但不属于 WPF 默认 XAML 命名空间的类型。这是使用`x:Static`. 例如，您可以使用`x:Static`带有 XAML 命名空间映射到 System CLR 命名空间和 mscorlib 程序集的引用，以便引用`Environment`该类的静态属性。
> *   您正在引用自定义程序集中的类型。
> *   您正在引用 WPF 程序集中存在的类型，但该类型位于未映射为 WPF 默认 XAML 命名空间的一部分的 CLR 命名空间内。CLR 命名空间到 WPF 的默认 XAML 命名空间的映射由各种 WPF 程序集中的定义执行。如果 CLR 命名空间主要由通常不用于 XAML 的类定义（例如`System.Windows.Threading`.

因此，您可能需要[定义一个命名空间](https://msdn.microsoft.com/en-us/library/ms747086(v=vs.100).aspx)，例如

```
xmlns:prefix="clr-namespace:YOURNAMESPACE;assembly=YOURLIB" 
```

# c# - MVC3 - 构建错误（不一致的可访问性）

> ID：11343810
> 
> 赞同：0
> 
> 时间：2012-07-05T11:54:48.040
> 
> 标签：c#, asp.net-mvc-3

我在下面的第 14 行收到错误：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using TimeDb.Models;

namespace TimeDb.Areas.Stock.Models
{
public class ProductAddViewModel
{
    private readonly DatabaseDataContext _db = new DatabaseDataContext();
    public SelectList ProductTypes;
    public Product Product { get; set; }

    public ProductAddViewModel()
    {
        Product = new Product();
        PopulateLists();
    }

    public ProductAddViewModel(int id)
    {
        Product = _db.Products.Single(p => p.Id == id);
        PopulateLists();
    }

    private void PopulateLists()
    {
        ProductTypes = new SelectList(_db.ProductTypes.OrderBy(pt => pt.Name), "Id", "Name");
    }
} 
```

}

现在，这只是在我尝试向 Database.cs 添加一个新字段后才出现。

我试图做的是添加一个新字段，我已在数据库表中添加。但是上面出现了错误。

我尝试更改的部分数据库代码是：

```
 #region Product
[MetadataType(typeof(ProductMetaData))]
partial class Product
{

}

public class ProductMetaData
{
    [Required]
    [DisplayName("Name")]
    public string Name { get; set; }

    [Required]
    [DisplayName("Description")]
    public string Description { get; set; }

    [Required]
    [DisplayName("Retail Price")]
    public double RetailPrice { get; set; }

    [Required]
    [DisplayName("Threshold")]
    public int Threshold { get; set; }

    [Required]
    [DisplayName("Number To Keep In Stock")]
    public int NumberToKeepInStock { get; set; }

    [Required]
    [DisplayName("Shelf")]
    public string Shelf { get; set; }

} 
```

我补充说：

```
[DisplayName("disabled")]
public int disabled { get; set;} 
```

很可能我不知道调整表后调整数据库代码的最佳方法。但是当我删除上述修改时，它仍然显示相同的错误。

最好的前进方式是什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T11:58:07.560

您的`Product`课程不是`public`，这意味着它将被视为`internal`。当您将类型的属性公开`Product`为`public`本身就是类的类时，`public`该属性将在当前程序集之外可见。但是，`Product`该类是可见的`internal`并且不可见。这就是矛盾之处。

要么让你的`Product`班级`public`或你的`Product`财产`internal`。

由于这是一个 MVC 视图模型，您可能希望使用该`public`选项使属性对视图可见（视图在单独的程序集中编译，并且无法访问`internal`视图模型的属性）。

# php - 如何发送这个肥皂请求？

> ID：11343811
> 
> 赞同：0
> 
> 时间：2012-07-05T11:54:53.490
> 
> 标签：php, soap

我有肥皂请求参数：

```
<soap:Body>
<GetProductList xmlns="http://schemas.acme.eu/">
<GetProductListRequest>
<Filters>
<Filter>
<Name>Language</Name>
<Value>lt-lt</Value>
</Filter>
<Filter>
<Name>Currency</Name>
<Value>LTL</Value>
</Filter>
</Filters>
</GetProductListRequest>
</GetProductList>
</soap:Body> 
```

我尝试发送这样的请求：

```
 $result = $client->GetProductList(array('Filters' => array(
                    'Filter'=> array('Name' => 'Language', 'Value' => 'lt-lt'), 
                    'Filter'=> array('Name' => 'Currency', 'Value' => 'LTL')))); 
```

但我在这里得到错误：

```
( ! ) Fatal error: Uncaught SoapFault exception: [soap:Server] Server was unable to process request. ---> Object reference not set to an instance of an object. in C:\wamp\www\tarpine_xml\class\acme_xml.php:25 Stack trace: #0 C:\wamp\www\tarpine_xml\class\acme_xml.php(25): SoapClient->__call('GetProductList', Array) #1 C:\wamp\www\tarpine_xml\class\acme_xml.php(25): SoapClient->GetProductList(Array) #2 C:\wamp\www\tarpine_xml\index.php(18): ACME_XML->parseACME() #3 {main} thrown in C:\wamp\www\tarpine_xml\class\acme_xml.php on line 25 
```

其他没有参数的请求可以正常工作。那么我的请求中的错误在哪里？

**解决了**

我已经创建了这个代码：

```
 $parrams['GetProductListRequest']['Filters']['Filter']  = array();
    $parrams['GetProductListRequest']['Filters']['Filter'][] = array('Name' => 'Language', 'Value' => 'lt-lt');
    $parrams['GetProductListRequest']['Filters']['Filter'][] = array('Name' => 'Currency', 'Value' => 'LTL');
    $result = $client->GetProductList($parrams); 
```

它完美地工作:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:59:02.150

不熟悉此固件，但我认为您还需要添加`GetProductListRequest`到请求中（这是根 xml 标记）。

所以你应该有类似的东西：

```
$result = $client->GetProductList(array('GetProductListRequest'=>array('Filters' => array(
                    'Filter'=> array('Name' => 'Language', 'Value' => 'lt-lt'), 
                    'Filter'=> array('Name' => 'Currency', 'Value' => 'LTL'))))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:54:42.310

小修复

```
$params['GetProductList']['GetProductListRequest']['Filters']['Filter']  = array();
$params['GetProductList']['GetProductListRequest']['Filters']['Filter'][] = array('Name' => 'Language', 'Value' => 'lt-lt');
$params['GetProductList']['GetProductListRequest']['Filters']['Filter'][] = array('Name' => 'Currency', 'Value' => 'LTL'); 
```

# ios - 创建具有立方体形状的 3d UIIMageView

> ID：11343812
> 
> 赞同：0
> 
> 时间：2012-07-05T11:54:56.583
> 
> 标签：ios, uiimageview, cube, uiswipegesturerecognizer

我想创建一个具有 4 个面和 4 个不同图像的 UIImageView，如果用户在 UIImageView 的可见界面上滑动，它应该显示具有不同图像的立方体的下一个面。
它应该允许向左滑动和向右滑动。
**最终图像应该是这样的。任何人都可以建议我创建这样的代码或任何教程链接。我应该在哪里加注..？t**

![在此处输入图像描述](../Images/23c522a38ce399f1527641cbd7a28422.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:23:41.737

我认为你可以修改它来工作：

[https://github.com/augustjoki/CubeTabBarController](https://github.com/augustjoki/CubeTabBarController)

它至少有动画代码。您可以首先更改它以使用手势触发动画。

# opengl-es - WebGL 半透明出现白色

> ID：11343820
> 
> 赞同：0
> 
> 时间：2012-07-05T11:55:43.200
> 
> 标签：opengl-es, webgl, alpha, alphablending

我在使用 WebGL 时遇到问题。半透明纹理看起来是半透明的，但它们也会变白，渲染时不考虑纹理中的颜色......

这就是我设置的：

```
gl.blendFunc(BlendingFactorSrc.SRC_ALPHA, BlendingFactorDest.ONE_MINUS_SRC_ALPHA); 
```

有哪些可能的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:32:36.533

通常，如果白色在 WebGL 场景中意外出现，它是从网页本身的 CSS 背景中混合的（除非您更改它，否则默认为白色）。

换句话说，使用默认的 WebGL 设置，任何将小于 1.0 的 alpha 值写入颜色缓冲区的着色器都会使其`<canvas>`自身变为半透明并显示网页的背景。我相信您可以更改[WebGLContextAttributes](http://www.khronos.org/registry/webgl/specs/latest/#WEBGLCONTEXTATTRIBUTES)设置以禁用此行为，或者只是确保您的着色器始终输出 1.0 的 alpha 值。

# c++ - 如何更换 在标准多图中

> ID：11343822
> 
> 赞同：1
> 
> 时间：2012-07-05T11:55:59.830
> 
> 标签：c++, multimap

重新表述问题 - 重新表述问题 - 我有一个要求，我需要用新的键和值替换一对。考虑一下 -

```
#include <map>
#include <string>
#include <iostream>

using namespace std;

int main()
{
    std::multimap<unsigned int, std::string> mymap;

    mymap.insert(std::multimap<unsigned int, std::string>::value_type(0, "A1"));
    mymap.insert(std::multimap<unsigned int, std::string>::value_type(0, "A2"));
    mymap.insert(std::multimap<unsigned int, std::string>::value_type(2, "C1"));
    mymap.insert(std::multimap<unsigned int, std::string>::value_type(2, "C2"));
    mymap.insert(std::multimap<unsigned int, std::string>::value_type(1, "B1"));
    mymap.insert(std::multimap<unsigned int, std::string>::value_type(1, "B2"));
    mymap.insert(std::multimap<unsigned int, std::string>::value_type(1, "B3"));

    std::pair<std::multimap<unsigned int, std::string>::iterator, std::multimap<unsigned int, std::string>::iterator> pr = mymap.equal_range(1);

    std::multimap<unsigned int, std::string>::iterator it;
    for (it=pr.first; it!=pr.second; ++it)
    {
        unsigned int key = it->first;
    key = key+10;

        std::string val = it->second;
        val = "X" + val;
        mymap.erase(it);
        mymap.insert(std::multimap<unsigned int, std::string>::value_type(key, val));

    }

    for ( it=mymap.begin() ; it != mymap.end(); it++ )
    {
        cout << (*it).first << " => " << (*it).second << endl;
    }

    return 0;

} 
```

由于迭代器无效，该程序在 Visual Studio 2008 上崩溃。

我希望它是：

```
0 => A1
0 => A2
2 => C1
2 => C2
11 => XB1
11 => XB2
11 => XB3 
```

这个想法是我想用新条目替换地图中的现有条目。

我究竟做错了什么？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T20:33:45.617

诀窍是先推进迭代器，然后擦除迭代器的副本。

```
std::multimap<unsigned int, std::string>::iterator it = pr.first;
while (it != pr.second)
{
    unsigned int key = it->first;
    key = key+10;

    std::string val = it->second;
    val = "X" + val;

    std::multimap<unsigned int, std::string>::iterator itCopy = it;
    ++it;
    mymap.erase(itCopy);
    mymap.insert(std::multimap<unsigned int, std::string>::value_type(key, val));
} 
```

在 C++11 中，您可以这样做：

```
std::multimap<unsigned int, std::string>::iterator it = pr.first;
while (it != pr.second)
{
    unsigned int key = it->first;
    key = key+10;

    std::string val = it->second;
    val = "X" + val;

    it = mymap.erase(it);
    mymap.insert(std::multimap<unsigned int, std::string>::value_type(key, val));
} 
```

顺便说一句，因为这段代码每次都在增加密钥，所以它会一遍又一遍地处理每个元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T12:00:16.730

如果删除迭代器所在的条目，则到多图其余部分的所有链接都可能丢失。

（新）解决方案：

插入新条目后只需执行“擦除”：

```
std::multimap<unsigned int, std::string>::iterator it;
for (it=pr.first; it!=pr.second; ++it)
{
    unsigned int key = it->first;
    key = key+10;

    std::string val = it->second;
    val = "X" + val;
    mymap.insert(std::multimap<unsigned int, std::string>::value_type(key, val));
}
mymap.erase(pr.first, pr.second); 
```

# linux - 使用 Qt Creator 在 Linux 上使用调试器在终端中运行应用程序

> ID：11343826
> 
> 赞同：0
> 
> 时间：2012-07-05T11:56:14.857
> 
> 标签：linux, qt, debugging, terminal, qt-creator

我在 Kubuntu 12.04 上用 Qt Creator 2.4.1 编写了简单的 C++ 控制台应用程序。我的应用程序有简单的菜单，您可以在其中选择要执行的操作（使用`std::cin`和`getline()`）。

问题是我无法在 Qt Creator 的控制台中输入数据。所以我使用选项“在终端中运行”（xterm）。但是当我想运行调试器时，我得到“不允许 ptrace 操作”。

所以：

1.  在 QtCreator 控制台中我无法输入数据（调试器工作）
2.  在终端中我不能使用调试器（不允许 ptrace 操作）

我需要两者：输入数据和调试器。

任何解决方案如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T13:34:43.553

我在快速谷歌搜索后找到[了这个解决方案：](http://blog.mellenthin.de/archives/2010/10/18/gdb-attach-fails-with-ptrace-operation-not-permitted/#comment-141535)

```
$ sudo su -
$ echo 0 > /proc/sys/kernel/yama/ptrace_scope 
```

完成此操作后，我能够以调试方式运行应用程序，但调试器并没有在我的断点处停止。也许它适用于您的应用程序。

# java - file.encoding 没有效果，LC_ALL 环境变量可以

> ID：11343828
> 
> 赞同：6
> 
> 时间：2012-07-05T11:56:16.510
> 
> 标签：java, linux, file, encoding, internationalization

在以下使用 OpenJDK 1.6.0_22 在 Linux 中运行的 Java 程序中，我简单地列出了在命令行中作为参数获取的目录的内容。该目录包含具有 UTF-8 文件名的文件（例如印地语、普通话、德语等）。

```
import java.io.*;

class ListDir {

    public static void main(String[] args) throws Exception {
    //System.setProperty("file.encoding", "en_US.UTF-8");
        System.out.println(System.getProperty("file.encoding"));
    File f = new File(args[0]);
    for(String c : f.list()) {
        String absPath = args[0] + "" + c;
        File cf = new File(args[0] + "/" + c);
        System.out.println(cf.getAbsolutePath() + " --> " + cf.exists());
    }
    }
} 
```

如果我将 LC_ALL 变量设置为 en_US.UTF-8，则结果打印得很好。但是，如果我将 LC_ALL 变量设置为 POSIX 并从命令行以 UTF-8 格式提供 file.encoding 和 sun.jnu.encoding 属性，我会得到垃圾输出并且 cf.exists() 返回 false。

你能解释一下这种行为吗？正如我在许多网站上阅读的那样，据说 file.encoding 足以读取文件名并将它们用于操作。在这里，该属性看起来根本没有效果。

**更新 1：**如果我将 file.encoding 设置为 GBK（中文）并将 LC_ALL 变量设置为 en_US.UTF-8，则 cf.exists() 返回 true。只有 '？' 出现而不是文件名。惊喜o_O。

**更新 2：**更多调查，看起来它不是 Java 问题。看起来 Linux 上的 libc 使用语言环境设置来转换文件名编码，这些设置将导致找不到文件错误/异常。“file.encoding”用于 Java 解释文件名的方式。

**更新 3**现在看起来问题是 Java 如何解释文件名。无论文件编码和 LC_ALL 环境变量的值如何，以下简单的 C 代码都可以在 Linux 上运行（我很高兴这证明了这里给出的答案：[https ://unix.stackexchange.com/questions/39175/understanding-unix-file-名称编码](https://unix.stackexchange.com/questions/39175/understanding-unix-file-name-encoding)）。但我仍然不清楚 Java 如何解释 LC_ALL 变量。现在研究 OpenJDK 代码。

示例 C 代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <dirent.h>

int main(int argc, char *argv[])
{
    char *argdir = argv[1];
    DIR *dp = opendir(argdir);
    struct dirent *de;
    while(de = readdir(dp)) {
        char *abspath = (char *) malloc(strlen(argdir)  + 1 + strlen(de->d_name) + 1);
        strcpy(abspath, argdir);
        abspath[strlen(argdir)] = '/';
        strcpy(abspath + strlen(argdir) + 1, de->d_name);
        printf("%d %s ", de->d_type, abspath);
        FILE *fp = fopen(abspath, "r");
        if (fp) {
            printf("Success");
        }
        fclose(fp);
        putchar('\n');
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-09T14:11:47.820

*注意：所以最后我认为我已经确定了。我不确认它是正确的。但是通过一些代码阅读和测试，这是我发现的，我没有额外的时间来研究它。如果有人有兴趣，他们可以检查一下并判断这个答案是对还是错 - 我会很高兴:)*

我使用的参考来自 OpenJDK 网站上的这个 tarball： **openjdk-6-src-b25-01_may_2012.tar.gz**

1.  Java 在此方法中本机将所有字符串转换为平台的本地编码：`jdk/src/share/native/common/jni_util.c - JNU_GetStringPlatformChars()`. 系统属性`sun.jnu.encoding`用于确定平台的编码。

2.  的值`sun.jnu.encoding`设置为`jdk/src/solaris/native/java/lang/java_props_md.c - GetJavaProperties()`使用`setlocale()`libc 的方法。环境变量`LC_ALL`用于设置 的值`sun.jnu.encoding`。`-Dsun.jnu.encoding`使用Java 选项在命令提示符处给出的值将被忽略。

3.  调用`File.exists()`已编码在文件中`jdk/src/share/classes/java/io/File.java`，它返回为

    `return ((fs.getBooleanAttributes(this) & FileSystem.BA_EXISTS) != 0);`

4.  `getBooleanAttributes()``jdk/src/share/native/java/io/UnixFileSystem_md.c`在函数 中是本机编码的（并且我跳过了浏览许多文件的代码步骤）`Java_java_io_UnixFileSystem_getBooleanAttributes0()`：. 这里宏 `WITH_FIELD_PLATFORM_STRING(env, file, ids.path, path)`将路径字符串转换为平台的编码。

5.  所以转换为错误的编码实际上会发送一个错误的 C 字符串（char 数组）到随后的`stat()`方法调用。它将返回找不到文件的结果。

**教训：** `LC_ALL`很重要

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-05T12:47:36.117

我不确定你在哪里读到的`file.encoding`。我没有看到它与其他[标准属性`System.getProperties`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#getProperties%28%29)一起提到，如. 但是从我的实验来看，这个值似乎影响了文件*内容*的编码，而不是文件*名*。如果is `System.out`，特别是不会打印非 ASCII 字符。`file.encoding``POSIX`

另一方面，Linux 决定哪种编码适用于文件名的方式是`LC_CTYPE`当前语言环境设置的一个方面。我认为 Java 没有理由重写它。由于许多其他平台（尤其是 Windows）总是使用 Unicode 来表示文件名，而不是字节，因此将文件系统的字节级细节暴露给 Java 应用程序几乎没有意义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-08T10:38:47.890

请参阅java.com 上的[错误 4163515](http://bugs.java.com/view_bug.do?bug_id=4163515)。它解释说：

1.  file.encoding 特定于 Sun（现在是 Oracle）的 JVM 实现 - 其他人可能不支持它
2.  应被视为只读
3.  要更改它，您应该修改 JVM 运行的环境（这就是您对 LC_ALL 所做的）

另请注意，即使更改 file.encoding 对您的平台“有效”，您也不应这样做 - 因为它通常不会更改 Oracle JVM 使用的默认编码，而只会在某些子系统中更改。由于该错误显示采用字节数组的 String 构造函数使用的默认编码不受此设置的影响。

# text - 在这种情况下使用包含的 XPath？

> ID：11343831
> 
> 赞同：-2
> 
> 时间：2012-07-05T11:56:29.597
> 
> 标签：text, xpath, contains, html

HTML中的情况：

```
<div class="someDivision">
   <span class="firstSpan">...</span>
   <span class="firstSpan">...</span>
   <span class="firstSpan">
      <span class="secondSpan">...</span>
      <span class="secondSpan">
         "Unique text"
         <a>"Text which I need"</a> 
```

我需要访问`<a>`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:43:16.913

我不完全确定你在问什么，但如果它是“我如何在一个`a`元素中获取文本，该元素前面有一个文本节点，该文本节点包含`"Unique text"`并且位于属性等于的`span`元素内，该元素本身位于一个元素内一个等于的属性，它本身在一个属性等于?的元素内 那么这个 XPath 应该可以解决问题：`class``secondSpan``span``class``firstSpan``div``class``someDivision`

```
div[@class='someDivision']/span[@class='firstSpan']/span[@class='secondSpan']/a[contains(preceding-sibling::text(), '&quot;Unique text&quot;')]/text() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T12:53:47.473

**使用**：

```
//div[@class='someDivision']
  /span[class='firstSpan']
    /span[class='secondSpan' and contains(text()[1], 'Unique text')]
      /a[1]
         /text()[1] 
```

# spring - @configurable Vaadin 应用程序控制器在tomcat重启后没有重新注入

> ID：11343832
> 
> 赞同：0
> 
> 时间：2012-07-05T11:56:29.887
> 
> 标签：spring, vaadin

我正在使用带有 @configurable 注释的 Vaadin 控制器和我的 Spring 上下文，它工作正常 - 除非我需要重新启动 Tomcat，并且会话被反序列化。然后我为我的 Vaadin 应用程序获取了这个：

org.springframework.beans.factory.wiring.BeanConfigurerSupport BeanFactory 尚未在 BeanConfigurerSupport 上设置：确保此配置器在 Spring 容器中运行。无法配置 [web.vaadin.ui.BackOfficeApplication] 类型的 bean。继续不注射。

我在想这可能是因为 vaadin 应用程序在 spring bean 工厂有机会之前重新序列化？

（我正在使用 CTW - aspectj 和 Spring 3.1.1.RELEASE）

笔记：

在日志中似乎这些错误出现在“Root WebApplicationContext：初始化开始”之前。在上下文初始化开始之前，bean 怎么会被自动装配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T21:33:21.617

我不是使用 Spring 和 Tomcat 进行（反）序列化的专家，这不是答案，但可能是一种解决方法。

如果`BackOfficeApplication`是您的 Vaadin 应用程序，则可以`@Configurable`在该类上使用另一种方法。相反，创建每个 Vaadin 应用程序 Spring 应用程序上下文 XML 文件并将其添加到其中以使您的`BackOfficeApplication`实例自动装配等：

```
<bean id="backOfficeApplication"
  class="org.dellroad.stuff.vaadin.ContextApplication"
  factory-method="get"/> 
```

一般来说，`@Configurable`这可能比普通的 bean 布线更麻烦，因为它们需要在对象构造时进行配置，而不是让 bean 工厂稍后进行布线，这样它可能能够更好地检测循环、强制排序等。

理想情况下，正常的 bean 连接应该用于在应用程序开始时初始化一次的单例，并且`@Configurable`应该用于在正常操作期间随机创建的“动态”bean。

# html - 使用 kineticJs 的 transitionTo 在鼠标点击时按特定角度旋转圆圈

> ID：11343837
> 
> 赞同：0
> 
> 时间：2012-07-05T11:57:08.193
> 
> 标签：html, kineticjs, html5-animation

我有一个有 4 个扇区的圆圈。单击扇区 1 和 3 时，圆圈应旋转特定角度，例如顺时针方向旋转 45 度；单击扇区 2 和 4 时，圆圈应逆时针方向旋转相同角度。如何使用 kineticJS 的 transitionTo 方法做到这一点？

我在用

```
 sector1.on("click", function() {
    circle.transitionTo({
                rotation: Math.PI/4,
                duration: 1

            });
     });

    sector2.on("click", function() {
    circle.transitionTo({
                rotation: -Math.PI/4,
                duration: 1

            });
     }); 
```

但第一次点击后过渡似乎不起作用。谁能说出旋转不一致的原因...我需要在每次旋转后保存动力学层的上下文吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T17:02:08.237

它似乎只适用于第一次点击的原因是你告诉圆圈旋转**到**一个特定的角度。您需要通过将 Math.PI/4 添加到当前角度来告诉它每次旋转到一个新角度：

```
circle.transitionTo({
            rotation: circle.getRotation() + Math.PI/4,
            duration: 1
        });
 }); 
```

这是一个带有小演示的 jsfiddle：http: [//jsfiddle.net/johnwiseman/WuZNg/](http://jsfiddle.net/johnwiseman/WuZNg/)

# java - 优先组合而不是继承

> ID：11343840
> 
> 赞同：59
> 
> 时间：2012-07-05T11:57:21.263
> 
> 标签：java, design-patterns, inheritance

> 优先组合而不是继承

是很流行的一句话。我读了几篇文章，最后每篇文章都说

> 当类之间存在纯 IS-A 关系时使用继承。

[这篇文章](http://www.artima.com/designtechniques/compoinhP.html)的一个例子：

这里**Apple**和**Fruit**之间有明确的 IS-A 关系，即 Apple IS-A Fruit，但作者也将其显示为 Apple HAS-A Fruit（组合）以显示使用继承实现时的陷阱。

我在这里变得有些困惑，声明的含义是什么

> 当类之间存在纯 IS-A 关系时使用继承。

使用组合而不是继承是否意味着**即使**存在纯 IS-A 关系也始终**尝试**应用组合 ，并且**仅在组合没有意义的情况下**保留继承？

 ***** * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-07-05T12:25:21.197

当您使用继承来重用来自超类的代码，而不是重写方法并定义另一个多态行为时，这通常表明您应该使用组合而不是继承。

该类`java.util.Properties`是继承使用不当的一个很好的例子。它不是*使用*Hashtable 来存储其属性，而是*扩展*Hashtable，以便重用其方法并避免使用委托重新实现其中的一些方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-05T12:26:21.097

我认为这是面向对象设计中讨论最多的一点之一。正如文章中所建议的，组合总是优于继承。这并不意味着你永远不应该使用继承。你应该在更有意义的地方（这值得商榷）。

使用组合有很多优点，其中几个是：

*   您将完全控制您的实施。即，您只能公开您打算公开的方法。
*   超类中的任何更改都可以通过仅在您的类中进行修改来屏蔽。任何使用您的类的客户端类都不需要进行修改。
*   允许您控制何时加载超类（延迟加载）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-06T13:57:00.420

我想一个好的指导方针是：

> 当存在 IS-A 关系时，使用继承。否则，使用组合。

其原因与面向对象设计中的另一个概念——多态性有关。多态性是许多 OOP 语言的一个特性，其中一个对象可以用来代替另一个对象，前提是第一个对象的类是第二个对象的子类。

为了说明，想象一下如果你有一个函数可以接收一种动物。当你使用继承时，你只有一个功能：

```
void feed( Animal a ); 
```

多态性向我们保证，我们放入的任何动物子类都会被接受。否则，我们将被迫为每种类型编写一个函数。我认为这样做的好处超过了它的缺点（例如减少封装）。

如果没有 IS-A 关系，我认为多态不会很有效。因此，最好使用组合并增强类之间的封装/隔离。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-05T12:31:38.217

在文章中，没有这样的短语：

`use inheritance when there is pure IS-A relationship between classes`

此外，除了您的帖子之外，谷歌没有在其他地方找到它。

相反，文章写道：

`Make sure inheritance models the is-a relationship. My main guiding philosophy is that inheritance should be used only when a subclass is-a superclass. In the example above, an Apple likely is-a Fruit, so I would be inclined to use inheritance.`

这意味着，如果存在 IS_A 关系，请尝试先使用继承，而不是组合。并且没有偏好`using composition over inheritance`- 每个都适合自己的角色。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-05T13:20:45.797

另外，我想补充一点，[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)是一个示例，您可以在其中使用组合而不是继承，并动态地向对象添加职责。装饰器模式的示例在 Effective Java 中的“Favor Composition over Inheritance”项中提到。以 Java API 为例；BufferedReader 装饰了一个 Reader（而不是扩展 FileReader、PipedReader、FilterReader 等），因此可以装饰任何类型的 Reader。缓冲功能在运行时附加到这些阅读器，这是装饰器模式。

这里通过子类化扩展是不切实际的。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-05T12:29:48.953

当关系是永久的时使用继承。不要仅仅为了获得自由行为而使用扩展。这就是他们在 IS-A 示例中所指的内容。仅当扩展类确实是父类的扩展时才扩展。有时它不会被切割和干燥，但一般来说。如果您需要从“正确的”类扩展，组合在未来也提供了灵活性。

这是一篇关于扩展的古老但很棒的文章：

[http://www.javaworld.com/javaworld/jw-08-2003/jw-0801-toolbox.html](http://www.javaworld.com/javaworld/jw-08-2003/jw-0801-toolbox.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-05T12:19:29.843

我会说不。在水果/苹果场景中，使用继承是很有意义的。这篇文章的作者也证实了这一点：“在上面的例子中，苹果很可能是水果，所以我倾向于使用继承”。

如果您的子类显然是超类，那么继承就可以了。但在实践中，您会发现更多使用组合可以更好地解决的情况。****

# sql-server - SQL Server：复制一行并插入具有不同 ID 的新行

> ID：11343844
> 
> 赞同：1
> 
> 时间：2012-07-05T11:57:29.843
> 
> 标签：sql-server

我想从给定的表中复制一行并插入到同一个表中的一个新行中，该行具有不同的列 ID。

**询问：**

```
INSERT INTO ESurvey_Question(QuestionTypeID, Question, HoriVertID, IsMandatory, FillIn, QuestionRank, Choice_Limit,SurveyID )
   SELECT 
       QuestionTypeID, Question, HoriVertID, IsMandatory, FillIn, QuestionRank, 
       Choice_Limit, @NewSUID as SurveyID 
   FROM ESurvey_Question 
   WHERE SurveyID = @ExistingSUID

@ExistingSUID= 64
@@NewSUID = 115 
```

这`SurveyID`是外键，我想用新的ID来改变它。

`QuestionID`是主键 ( `IDENTTITY`)。

我收到此错误：

> 子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:21:33.780

我在本地机器上测试了类似的语句，没有收到任何错误。但是，您的错误消息告诉我们您正在使用子查询，但您实际上并没有在此处执行此操作。

是否缺少某些代码？也许`SurveyID = @ExistingSUID`是通过子查询设置的？如果是这样，如错误消息所示，结果不能超过一个。（如果你需要这个，使用`SurveyID IN ...`

# sql - SQL查询处理三个表

> ID：11343846
> 
> 赞同：1
> 
> 时间：2012-07-05T11:57:34.357
> 
> 标签：sql, postgresql

我想为报告目的编译数据，使用 php 与 postgres 通信，我有三个表

**产品状态**：

```
status_code | value
------------|------
    1       |  a
    2       |  b 
```

**product_child**：

```
code| ID | status_code
----|----|------------
 X  |  1 |   1
 X  |  2 |   1
 X  |  3 |   2
 Y  |  1 |   2
 Y  |  2 |   2
 Z  |  1 |   1 
```

**产品大师**：

```
code|description(and some other columns not relevent)
 X  |    la
 Y  |    alb
 Z  |    lab 
```

最后，我基本上想要一张这样的表格，我会展示

```
 | total child | status a | status b
bla |    3        |  2       |   1
alb |    2        |  0       |   2
lab |    1        |  1       |   0 
```

我试过了

```
SELECT s.value, count(s.value) 
FROM product_child p, product_status s 
WHERE
    p.product_status = s.status_code 
    and p.product_code = get_product_code('Sofa (1-seater) J805') 
group by 
    s.value 
```

它为我们提供了特定代码的分组，但我希望将其翻转并附加到不同的 product_codes 前面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:04:14.153

你的意思是这样吗？

```
select  pm.description,
        count(pc.code) total,
        count(case when ps.value = 'A' then ps.value else null end) statusA,
        count(case when ps.value = 'B' then ps.value else null end) statusB
from    product_master pm join product_child pc on pm.code = pc.code
        join product_status ps on pm.status_code = ps.status_code
group by pm.description 
```

# ios - 如何在可编辑和不可编辑之间切换 UILabel

> ID：11343847
> 
> 赞同：17
> 
> 时间：2012-07-05T11:57:35.350
> 
> 标签：ios, uilabel, uigesturerecognizer

如何使`UILabel`文本可编辑`UILongPressGestureRecognizer`。因此，在长按时它会转换为可编辑，并在从 uilabel 移除焦点后变为只读。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-06T08:08:50.947

你不能那样做。您必须在`UILabel`和`UITextField`或创建一个子类之间交换控件`UIControl`才能为您执行此操作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-06T08:12:10.687

uilabels 用户不可编辑，请改用文本字段。您可以调整文本字段的属性，使其看起来像一个标签。

然后只需将交互设置为禁用以模拟标签并在该区域添加“某些东西”，例如不可见的视图或按钮或检测此部分中的长按手势的东西。然后当它以编程方式设置焦点时。当用户按下返回时，焦点将丢失，它不会回到“标签”

# java - Java - ArrayList 元素的排列（整数） - 无法使其正常工作

> ID：11343848
> 
> 赞同：3
> 
> 时间：2012-07-05T11:57:35.617
> 
> 标签：java, arraylist, permutation

我一直在环顾四周以解决我的问题。我解决了很多问题，但这个问题仍然困扰着我：S 我已经很长时间没有接触 Java 编程（一般编程），所以要理解那里！;)

我的目标是从整数数组中获得所有可能的组合。当我使用以下代码应用于整数 {1, 2, 3, 4} 的测试数组时，我希望有：
1 2 3 4
1 2 4 3
1 3 2 4
1 3 4 2
2 1 3 4
2 1 4 3
(...)
但这是我得到的
1 2 3 4
1 2 3 4 4 3
1 2 3 4 4 3 3 2 4

有没有人有线索，建议甚至解决方案？提前致谢！

```
public class Calculation{
(...)
  public void Permute(ArrayList<Integer> soFar,ArrayList<Integer> rest){
    if(rest.isEmpty())    this.fillMatrice(convertIntegers(soFar)); // there it goes in a previously created arrow of int
    else{
        for(int k=0;k<rest.size();k++){
            ArrayList<Integer> next=new ArrayList<Integer>();
            next=soFar;
            next.add(rest.get(k));
            ArrayList<Integer> remaining=new ArrayList<Integer>();
            List<Integer> sublist = rest.subList(0, k);
            for(int a=0;a<sublist.size();a++)   remaining.add(sublist.get(a));
            sublist = rest.subList(k+1,rest.size());
            for(int a=0;a<sublist.size();a++)   remaining.add(sublist.get(a));
            Permute(next,remaining);
        }
    }
}
public static ArrayList<Integer> convertArray(int[] integers){
    ArrayList<Integer> convArray=new ArrayList<Integer>();
    for(int i=0;i<integers.length;i++)  convArray.add(integers[i]);
    return convArray;
}
public static int[] convertIntegers(List<Integer> integers){
    int[] ret = new int[integers.size()];
    for(int i=0;i<ret.length;i++)   ret[i]=integers.get(i).intValue();
    return ret;
}
public Calculation() {
    (...)
    ArrayList<Integer> soFar=new ArrayList<Integer>();
    int[] test={1,2,3,4};
    Permute(soFar,convertArray(test));
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T12:19:58.060

试试这个，它似乎工作，它使用递归。

```
public class Permute {

    public static List<List<Integer>> permute(Integer...myInts){

        if(myInts.length==1){
            List<Integer> arrayList = new ArrayList<Integer>();
            arrayList.add(myInts[0]);
            List<List<Integer> > listOfList = new ArrayList<List<Integer>>();
            listOfList.add(arrayList);
            return listOfList;
        }

        Set<Integer> setOf = new HashSet<Integer>(Arrays.asList(myInts));   

        List<List<Integer>> listOfLists = new ArrayList<List<Integer>>();

        for(Integer i: myInts){
            ArrayList<Integer> arrayList = new ArrayList<Integer>();
            arrayList.add(i);

            Set<Integer> setOfCopied = new HashSet<Integer>();
            setOfCopied.addAll(setOf);
            setOfCopied.remove(i);

            Integer[] isttt = new Integer[setOfCopied.size()];
            setOfCopied.toArray(isttt);

            List<List<Integer>> permute = permute(isttt);
            Iterator<List<Integer>> iterator = permute.iterator();
            while (iterator.hasNext()) {
                List<java.lang.Integer> list = iterator.next();
                list.add(i);
                listOfLists.add(list);
            }
        }   

        return listOfLists;
    }

    public static void main(String[] args) {
        List<List<Integer>> permute = permute(1,2,3,4);
        System.out.println(permute);
    }

} 
```

如果您不喜欢 List>，您可以使用 list 中的方法和 java.util.Collections 和 java.util.Arrays 中的静态方法轻松地从数组更改为列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T12:04:03.520

您可以尝试`Recursion`解决此问题：

```
public static void printPermutations(int[] n, int[] Nr, int idx) {
    if (idx == n.length) {  //stop condition for the recursion [base clause]
        System.out.println(Arrays.toString(n));
        return;
    }
    for (int i = 0; i <= Nr[idx]; i++) { 
        n[idx] = i;
        printPermutations(n, Nr, idx+1); //recursive invokation, for next elements
    }
} 
```

可以从此链接获得更多信息： [组合学：生成所有“状态” - 数组组合](https://stackoverflow.com/questions/9632677/combinatorics-generate-all-states-array-combinations)

您也可以在此处复制相同的逻辑。

# python - python中的二进制搜索程序中的错误

> ID：11343850
> 
> 赞同：-2
> 
> 时间：2012-07-05T11:57:39.027
> 
> 标签：python, binary-search

嗨，我正在编写一个非常简单的 Python 程序来实现二进制搜索。

```
tup=input("enter tup:")
start=0
length=len[tup]
end=tup[length-1]
mid=(int(start)+int(end))/2
key=input("enter value to search")
def search(start,end,key):
  if key==tup[mid]
    print mid
  else if key<tup[mid]
    search(start,mid,key)
  else if key>tup[mid]
    search(mid,end,key)
  else
    return(-1) 
```

我收到一个错误

```
File "binsearch.py", line 8
if key==tup[mid]
               ^ 
```

SyntaxError：无效的语法

我相信我错过了一些微不足道但无法弄清楚的事情。！如果你觉得还有其他错误，请告诉我。谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T11:58:36.077

```
 if key==tup[mid]
                 ^ 
```

`:`最后需要一个

```
 |
                 v
 if key==tup[mid]: 
```

声明的其余部分存在同样的问题：

```
 else if key<tup[mid]
                      ^
    search(start,mid,key)
  else if key>tup[mid]
                      ^ 
```

*旁白*：

而不是`else if`考虑使用 Python 的简洁`elif`结构，例如，

```
 elif key<tup[mid]: 
```

等等

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T11:59:42.163

*   您需要结束所有以新块开头的`:`语句（即在下一行增加缩进级别的语句）
*   您需要替换`else if X`为`elif X:`
*   无论用户输入什么，您都应该使用`raw_input`而不是`input`后者。`eval`
*   `return` is a statement, not a function, so you do not need `()` around the return value.

# javascript - jquery 1页上的多个选项卡导航

> ID：11343855
> 
> 赞同：0
> 
> 时间：2012-07-05T11:58:01.310
> 
> 标签：javascript, jquery

目前我在 1 个 html 页面上有多个选项卡导航，当我单击一个导航时，它会影响其他选项卡导航。

我似乎无法弄清楚如何在不隐藏其他选项卡导航内容的情况下仅影响我单击的选项卡导航。

这是我的jQuery代码

```
// thumbs click
                $('.tabsNav li a').click(function(){
                    $('.tab').hide();
                    $($(this).attr('href')).show();
                    return false;
                }); 
```

这是我想在页面上多次使用的 html

```
<div class="rightContent">
                    <ul class="tabsNav clearfix">
                        <li>
                            <a href="#vlogs">vlogs</a>
                        </li>
                        <li>
                            <a href="#miniDocs">mini-docs</a>
                        </li>
                        <li>
                            <a href="#trailers">trailers</a>
                        </li>
                    </ul>
                    <div id="vlogs" class="tab">

                    </div>
                    <div id="miniDocs" class="tab">

                    </div>
                    <div id="trailers" class="tab">

                    </div>
                </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:29:07.163

只要您有一个像 rightContent 围绕它的 div（或其他任何东西），这应该可以工作：

```
$('.tabsNav li a').click(function(){
   $(this).parents('tabsNav').parent().find('.tab').hide();
   $($(this).attr('href')).show();
   return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:47:14.567

```
$('.tabsNav li a').click(function(){
                   $(this).parents('.tabsNav').parents('.rightContent').children('.tab').hide();
                   $($(this).attr('href')).show();
                   return false;
                }); 
```

# java - 在同一个项目上使用飞碟和 docx4j

> ID：11343856
> 
> 赞同：1
> 
> 时间：2012-07-05T11:58:06.797
> 
> 标签：java, itext, flying-saucer, xhtmlrenderer, docx4j

我有一个项目，我希望能够将 xhtml 文档格式化为 PDF 格式和 Docx 格式。

一段时间以来，我一直在使用 flysaucer 格式化 PDF 文档，出于兼容性原因，我总是不得不使用旧版本的 iText。现在我正在使用 docx4j，我需要将 iText 更新到更新的版本，否则它将无法工作。

FlyingSaucer (xhtmlrenderer R8pre2) 使用 iText 2.0.8
docx4j 2.8.0 使用 iText 2.1.7

我只能使用一个 iText 库，但无论我使用哪个库，最终都会遇到飞碟或 docx4j 的兼容性问题。

目前，问题似乎归结为一种特定的方法 ( `com.lowagie.text.pdf.BaseFont.getCharBBox`)，该方法在一个版本中采用`char`参数，而在另一个版本中采用`int`参数。

我想我可能必须下载 flysaucer 或 iText 的源代码（我认为它们都是开源的）并自己解决这个问题（我以前没有做过，但我认为我可以做到）但我可以想象我不是第一个遇到这个问题的人，也许还有另一种解决方法，或者其他人已经分叉了一个项目来解决这类问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:40:10.003

**披露：我从事 docx4j 项目**

docx4j 2.8.0 仅使用 iText，因为[我们的 Flying Saucer 分支](https://github.com/plutext/flyingsaucer)需要它，它执行 XHTML 导入。

在那个分支中，我添加了 docx 相关的东西，并删除了一些我们不需要的东西。有可能在未来，我们会将这个还给飞碟——这只是时间问题。

同时，为了完整起见，我提到你可以在你的类路径上同时拥有真正的飞碟和我们的 fork，因为我们的 fork 是重新打包的。

回到您的问题，FlyingSaucer 现在具有[相同的 2.1.7 依赖](https://github.com/flyingsaucerproject/flyingsaucer/blob/master/flying-saucer-pdf/pom.xml)项，因此，如果您能够使用当前资源，那应该可以解决您提出的问题。

# ruby-on-rails - 在合并哈希时或之后排序，在红宝石中

> ID：11343865
> 
> 赞同：0
> 
> 时间：2012-07-05T11:58:48.223
> 
> 标签：ruby-on-rails, ruby

我有一个看起来像的哈希

```
myhash =   [{"project 1"=>{"09 Apr 12, Mon"=>"2.75"}}, {"project 1"=>{"11 Apr 12,
Wed"=>"3.200000047683716"}}, {"project 1"=>{"25 Apr 12, Wed"=>"0.5099999904632568"}},   
{"project 1"=>{"31 May 12, Thu"=>"1"}}, {"project 1"=>{"01 Jun 12, Fri"=>"1"}}, {"project  
2"=>  {"01 Jun 12, Fri"=>"0"}}, {"project 1"=>{"04 Jun 12, Mon"=>"0.25"}}] 
```

我想根据它们的键合并内部散列。这样键不会重复

我试过，

```
myhash.inject{|memo, el| memo.merge( el ){|k, old_v, new_v| old_v.merge(new_v)}} 
```

这是给出正确的结果

```
=>{"project 2"=>{"01 Jun 12, Fri"=>"0"}, "project 1"=>{"01 Jun 12, Fri"=>"1", "09 Apr 
12, Mon"=>"2.75", "11 Apr 12, Wed"=>"3.200000047683716", "31 May 12, Thu"=>"1", "25 Apr  
12, Wed"=>"0.5099999904632568", "04 Jun 12, Mon"=>"0.25"}} 
```

但是订单丢失了。如何根据作为哈希内键的日期对哈希进行排序。

或在合并自身时维持秩序。

我正在使用红宝石 1.8.7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:30:49.630

这应该这样做。请注意，我已经解析了日期以便对它们进行排序。将它们恢复为原始格式应该是微不足道的。`merged`是您提供的合并无序哈希。

```
merged.map{|k,v| { k => v.sort_by{|d,f| Date.strptime(d.split(',')[0],"%d %b %y").to_s   } } } 
```

您可能想考虑使用 Date 对象和数组而不是散列，它（至少在 1.8.7 中）是无序的。

# c# - C# 模块应包含程序集清单

> ID：11343867
> 
> 赞同：3
> 
> 时间：2012-07-05T11:58:50.130
> 
> 标签：c#, dll

嗨，我是 C# 世界的新手。我不得不使用它，因为它依赖于来自多播源的 xceedzip.dll 压缩数据。在编写了一些用于接收提要的代码之后，我在调用这个 dll 时遇到了障碍。据我了解，我需要使用“System.Reflection”并调用 dll。

目前我的源代码和 dll 位于同一目录中。代码编译成功。

```
Assembly ass = Assembly.Load("XceedZip"); 
```

我在运行时收到 System.BadImageFormatException：无法加载文件或程序集“XceedZip”或其依赖项之一。该模块应包含程序集清单。

请帮忙，谢谢

#

好的，感谢您的所有回复，在将 tlbimp 命令加载到我的环境中之后，我有一个工作版本的 dll。我遇到了 Uncompress 方法签名的问题。我需要提供一个“ref 对象”和一个“out 对象”作为源（压缩）和目标（未压缩）对象。我尝试将字节数组加载到这些位置，但它抛出了一个无效的参数错误。对“ref object”和“out object”的帮助表示赞赏......

问题已解决，谢谢大家

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T12:01:27.580

我怀疑这个 DLL 不是托管程序集，而是包含本机代码。`Assembly.Load`应该只与托管程序集一起使用。如果您需要从非托管代码调用函数，您可以使用[P/Invoke](http://msdn.microsoft.com/en-us/magazine/cc164123.aspx)。该过程涉及为要调用的非托管函数定义托管包装器。

例如，如果您想调用[MessageBox](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645505%28v=vs.85%29.aspx)本机函数（实际上您永远不需要这样做，因为已经有一个托管等效项，但对于本演示而言应该没问题），您可以编写一个包装器：

```
[DllImport("user32.dll", CharSet = CharSet.Auto)]
public static extern MessageBoxResult MessageBox(IntPtr hWnd, String text, String caption, int options); 
```

然后调用它：

```
MessageBox(IntPtr.Zero, "Text", "Caption", 0); 
```

您必须对包含在 DLL 中的非托管函数执行相同的操作。您将必须检查文档以查看确切的非托管签名，这将帮助您定义托管包装器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-06T04:32:11.980

尝试清理解决方案，然后再次构建。这项工作对我来说非常好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T12:07:37.180

> 据我了解，我需要使用“System.Reflection”并调用 dll。

不，你没有。您可以在项目中添加对 DLL 的引用（因为它[是托管程序集](http://xceed.com/Zip_Net_Pricing.html)），然后使用 DLL 中的类及其方法。

您将收到有关使用哪些类和方法以及它们期望哪些参数的文档。

[对于一个单纯的 ZIP 库，我不会在第一年支付 640 欧元，然后每年支付 320 欧元，但这可能有点离题。]

# java - java bpm 用于大数据和子工作流的多实例化

> ID：11343875
> 
> 赞同：1
> 
> 时间：2012-07-05T11:59:17.230
> 
> 标签：java, database, business-process-management

任何人都可以向我推荐一个用于操作数据库中大量记录的开源 java bpm/工作流解决方案。这些记录可能以百万计。每条记录都会为它们的字符串操作创建一个子工作流。

我们为此使用了 bonita 开放式解决方案。但无济于事，因为执行/启动时间太长。我们需要一个重量轻且速度快的 bpm。

任何建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:59:24.557

jBPM - [http://www.jboss.org/jbpm/](http://www.jboss.org/jbpm/)

> jBPM 是一个灵活的业务流程管理 (BPM) 套件。它在业务分析师和开发人员之间架起了一座桥梁。传统 BPM 引擎的关注点仅限于非技术人员。jBPM 有两个重点：它以业务用户和开发人员都喜欢的方式提供流程管理功能。

Activiti BPM 平台 - [http://activiti.org/](http://activiti.org/)

> Activiti 是一个针对商务人员、开发人员和系统管理员的轻量级工作流和业务流程管理 (BPM) 平台。它的核心是用于 Java 的超快速且坚如磐石的 BPMN 2 流程引擎。它是开源的，并在 Apache 许可下分发。Activiti 可以在任何 Java 应用程序、服务器、集群或云中运行。它与 Spring 完美集成，非常轻量级并且基于简单的概念。

# cakephp - cakephp 2.0 唯一的多字段验证

> ID：11343876
> 
> 赞同：1
> 
> 时间：2012-07-05T11:59:20.763
> 
> 标签：cakephp, cakephp-2.0

我的数据库我有一个折扣表，用户为特定的“范围”、“类别”、“供应商”和产品类型打折。我如何让 cakephp 不允许多个“折扣”？

例如折扣是

```
user_id 100
category_id 1 
range_id 2 
producttype "doors"
discount 10% 
```

如何确保不能为该供应商、范围、类别和产品类型创建另一个折扣？

我的折扣模型中只有一个关系（不确定这是否会有所不同）

```
<?php
App::uses('AppModel', 'Model');
/**
 * Discount Model
 *
 * @property User $User
 */
class Discount extends AppModel {
/**
 * Validation rules
 *
 * @var array
 */
 //public $displayField = 'discount';

    public $validate = array(
        /*'title' => array(
            'notempty' => array(
                'rule' => array('notempty'),
                //'message' => 'Your custom message here',
                //'allowEmpty' => false,
                //'required' => false,
                //'last' => false, // Stop validation after this rule
                //'on' => 'create', // Limit validation to 'create' or 'update' operations
            ),
        ),*/
        'user_id' => array(
            'numeric' => array(
                'rule' => array('numeric'),
                //'message' => 'Your custom message here',
                //'allowEmpty' => false,
                //'required' => false,
                //'last' => false, // Stop validation after this rule
                //'on' => 'create', // Limit validation to 'create' or 'update' operations
            ),
        ),
        'discount' => array(
            'numeric' => array(
                'rule' => array('numeric'),
                //'message' => 'Your custom message here',
                //'allowEmpty' => false,
                //'required' => false,
                //'last' => false, // Stop validation after this rule
                //'on' => 'create', // Limit validation to 'create' or 'update' operations
            ),
        ),
    );

    //The Associations below have been created with all possible keys, those that are not needed can be removed

/**
 * belongsTo associations
 *
 * @var array
 */
    public $belongsTo = array(
        'User' => array(
            'className' => 'User',
            'foreignKey' => 'user_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
        )
    );

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-31T09:36:36.957

`cakephp`处理具有多个字段的唯一性非常简单

在模型中，对于折扣验证规则，例如：

```
public $validate = array(
        'discount' => array(
            'numeric' => array(
                'rule' => array('numeric'),

            ),
            'isUnique' => array(
                'rule' => array('isUnique',array('user_id','category_id','range_id','producttype'),false),
                'message' => 'discount already Exist.'
            )
        ),
    ); 
```

# ios - 获取服务器数据的方法的内存分配增长

> ID：11343881
> 
> 赞同：-1
> 
> 时间：2012-07-05T11:59:36.303
> 
> 标签：ios, memory-management, memory-leaks, instruments

我有一个从服务器获取数据的方法。我在循环中多次调用该方法。问题是当我使用仪器检查内存分配时，每个方法调用中的实时内存都增加了。顺便说一句，我正在使用 ARC。 ![内存分配](../Images/d90507cea1c890e0b310022da4023493.png)

```
-(NSArray*)callService
{
    NSMutableURLRequest* request = [[NSMutableURLRequest alloc] initWithURL: serviceURL];
    [request setHTTPMethod:@"POST"];
    [request setValue:@"application/json; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:requestData];
    [request setTimeoutInterval:30.0];
    NSURLResponse *response = NULL; 
    NSError *requestError = NULL;
    NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&requestError];

    NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
    NSArray *array = [(NSArray*) [responseString JSONValue] autorelease];
    responseString=nil;
    return array;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:03:42.197

> 我有一个从服务器获取数据的方法。我在循环中多次调用该方法。

**不要**。呼叫一个，等待响应并呼叫下一个。

**编辑1：**

> 同步加载建立在类提供的异步加载代码之上。当异步加载系统在专门为此加载请求生成的线程上执行 URL 加载时，调用线程被阻塞。为了执行同步加载，调用线程中不需要特殊的线程或运行循环配置。
> 
> 因为这个调用可能需要几分钟才能失败（特别是在 iOS 中使用蜂窝网络时），所以你永远不应该从 GUI 应用程序的主线程调用这个函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:12:40.157

如果您有僵尸（方案设置），请确保在 Instruments 中测试内存使用情况时将其关闭。NSDeallocateZombies 的默认设置是 NO，所以僵尸根本不会被删除。所以要么将 NSZombiesEnabled 设置为 NO（或等效的方案复选框），要么保持打开但将 NSDeallocateZombies 设置为 YES。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T10:55:25.510

问题出在 SBJSON 解析器上。因为我使用的是 iOS 5，所以我使用了 NSJSONSerialization，它就像一个魅力。

```
NSError *e = nil;
NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData: responseData options: NSJSONReadingMutableContainers error: &e]; 
```

而不是 JSONValue

# android - 如何让我的 editText 在第一次点击时被选中？

> ID：11343883
> 
> 赞同：0
> 
> 时间：2012-07-05T11:59:40.640
> 
> 标签：android, android-listview, android-edittext

我有一个带有 EditTexts 的 ListView。当我第一次单击文本框时，它被选中，键盘弹出，然后文本框被取消选中。但是，一旦加载键盘，就会选​​择文本框。这是我的xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical"
>

 <ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
     />
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical" >
<TextView
    android:id="@+id/borrowerName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@+id/label"
    android:textSize="14sp"
     >
</TextView>

<TextView
    android:id="@+id/loanAmount"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@+id/label"
    android:textSize="14sp"
     >
</TextView>

<TextView
    android:id="@+id/installmentNumber"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@+id/label"
    android:textSize="12sp"
    >
</TextView>

<TextView
    android:id="@+id/estimatedTotal"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@+id/label"
    android:textSize="12sp"
    >
</TextView>  

</LinearLayout>

 <EditText
    android:id="@+id/repaymentAmount"
    android:layout_width="75sp"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:inputType="numberDecimal"
    android:textSize="12sp"
     >
</EditText>
</RelativeLayout> 
```

我尝试了以下事情：

将以下标签添加到我的 RelativeLayout 和 EditText

```
android:focusable="true"
android:focusableInTouchMode="true" 
```

设置 listAdapter 后在我的代码中添加：`getListView.requestFocus()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:31:30.450

您需要使用调整盘。请查看以下链接以获取更多信息

[http://comments.gmane.org/gmane.comp.handhelds.android.devel/134260](http://comments.gmane.org/gmane.comp.handhelds.android.devel/134260)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:15:57.770

在您的布局中，您可以使用[requestfocus](http://developer.android.com/guide/topics/resources/layout-resource.html)标签：

在您的示例中：

```
<!-- [...] -->
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <!-- [...] -->

    <EditText
        android:id="@+id/repaymentAmount"
        android:layout_width="75sp"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:inputType="numberDecimal"
        android:textSize="12sp">

        <requestfocus/>

    </EditText>

    <!-- [...] -->
</LinearLayout> 
```

同样在您的代码中，您应该在 editText 对象而不是列表视图上调用 requestFocust()。

# c - 函数和指针

> ID：11343885
> 
> 赞同：0
> 
> 时间：2012-07-05T11:59:43.190
> 
> 标签：c, function-pointers

我正在尝试编写一个程序，将摄氏度转换为华氏度，反之亦然。我的程序正在编译，但它给了我错误的结果。我一直在尝试通过更改指针来更改它，但它不起作用。谁能指出我的问题是什么？在我看来，它在声明和指针中，但我不确定。谢谢！

```
#include<stdio.h>

float f2c(float f);
float c2f(float c);

int main(void)
{
 float cel;
 float celcius;
 float fahren;
 float fah;
 char ch;
 float number;

scanf("%c %f", &ch, &number);

if(&ch == "-f"){
  f2c(number);
  celcius=f2c(number);
  printf("%f", celcius);
  }

 else{
  c2f(number);
  fahren = c2f(number);
  printf("%f", fahren);
  }

return 0;
}

float f2c(float f)
{
 float cel = (f - 32) * 5/9;
 return cel;
} 

float c2f(float c)
{
 float fah = (9 * c/5 + 32);
 return fah;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:01:38.370

`if(&ch == "-f")`这就是问题。它应该是 ：

`if(ch == 'f')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T12:01:26.847

您正在将 char 与 C-string 进行比较`"-f"`。用于`strcmp`比较 C 字符串。

您可能还`ch`需要在此处将多个字符声明为 char 数组。因为，您不能像现在那样将“-f”存储在单个字符中。

随着变化：

```
#include<stdio.h>

float f2c(float f);
float c2f(float c);

int main(void)
{
 float cel;
 float celcius;
 float fahren;
 float fah;
 char ch[25];
 float number;

scanf("%s %f", ch, &number);

if(strcmp(ch,"-f")==0){
  f2c(number);
  celcius=f2c(number);
  printf("%f", celcius);
  }

 else{
  c2f(number);
  fahren = c2f(number);
  printf("%f", fahren);
  }

return 0;
}

float f2c(float f)
{
 float cel = (f - 32) * 5/9.0;
 return cel;
} 

float c2f(float c)
{
 float fah = (9 * c/5.0 + 32);
 return fah;
} 
```

这本质上是您的代码，但将其修改为将输入读取为 C 字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T12:04:55.747

除了其他答案：

您正在对转换函数进行不必要的调用并丢弃结果，就在再次执行相同的调用但正确处理返回值之前：

```
if(&ch == "-f"){
  f2c(number);  /* This line does absolutely nothing! */
  celcius=f2c(number);
  printf("%f", celcius);
  } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-05T12:03:02.617

使用浮点算术，而不是整数算术，因为在整数算术中，5/9 为 0。所以您可以对代码进行此更改（尽管`float`参数不常见）：

```
float f2c(float f)
{
 return  (f - 32.0) * 5.0/9.0;
} 

float c2f(float c)
{
 return 9.0 * c/5.0 + 32.0;
} 
```

同样作为其他答案之一，条件`(&ch == "-f")`永远不会成立。

这是一个完整的工作示例，带有错误检查。

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <errno.h>
#include <assert.h>

static double f2c(double f)
{
 return (f - 32.0) * 5.0/9.0;
} 

static double c2f(double c)
{
 return 9.0 * c/5.0 + 32.0;
}

int main (int argc, char *argv[])
{
 int i;
 const char *label_f = "Fahrenheit";
 const char *label_c = "Celcius";
 const char *from, *to;
 double (*conversion)(double);

 from = label_c;
 to = label_f;
 conversion = c2f;

 for (i=1; i<argc; ++i)
   {
     if (0 == strcmp(argv[i], "-f"))
       {
         from = label_f;
         to = label_c;
         conversion = f2c;
       }
     else if (0 == strcmp(argv[i], "-c"))
       {
         from = label_c;
         to = label_f;
         conversion = c2f;
       }
     else
       {
         char *suffix = NULL;
         double temp_in;

         errno = 0;
         temp_in = strtod(argv[i], &suffix);

         if (ERANGE == errno)
           {
             if (HUGE_VAL == temp_in) 
               {
                 fprintf(stderr, "%s is too big", argv[i]);
                 return 1;
               }
             else
               {
                 assert(-HUGE_VAL == temp_in);
                 fprintf(stderr, "%s is too small", argv[i]);
                 return 1;
               }
           }
         else if (errno != 0 && (suffix == argv[i]))
           {
             /* no conversion was performed. */
             fprintf(stderr, "%s is not a number", argv[i]);
             return 1;
           }
         else if (*suffix) 
           {
             fprintf(stderr, "Expected a number but saw '%s'\n", argv[i]);
             return 1;
           }
         else
           {
             const double temp_out = (*conversion)(temp_in);
             printf("%f %s is %f %s.\n", temp_in, from, temp_out, to);
           }
       }
   }
 return 0;
} 
```

# javascript - 使用javascript替换文本框值

> ID：11343893
> 
> 赞同：1
> 
> 时间：2012-07-05T12:00:08.070
> 
> 标签：javascript

我有两个文本框

```
<input id='random_value' name='random_name' value='First'
<input id='random_value' name='random_name' value='' 
```

我需要用“第二”替换具有“第一”值的文本框的值，而不是使用文本框 ID 或文本框名称。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:07:47.233

如果所有输入元素的值为“First”，则此函数将用“Second”替换所有输入元素中的值：

```
function replaceTextboxValue() {
    var els = document.getElementsByTagName("INPUT");
    for(var i = 0, ceiling = els.length; i < ceiling; i++) {
        if(els[i].value == "First")
            els[i].value = "Second";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:03:13.330

您可以进行如下选择：

```
var input = document.getElementsByTagName("INPUT");
var j = 0;

for (var i = 0; i < input.length; i++) {
  if (input[i].type == "text") {
      if (input[i].value == "First") {
         input[i].value == "Second"
      }
  }
} 
```

或者，如果您知道 dom 中该元素的索引，则可以直接执行以下操作：

```
<HTML>    
<FORM>

   <input id='random_value' name='random_name' value='First'/>
   <input id='random_value' name='random_name' value=''/>
    </FORM>
</HTML> 
```

您可以设置值如下：

```
document.forms[0].elements[0].value=document.forms[0].elements[1].value; 
```

如果表单是第一个并且文本框是表单的第一个元素，否则您可以指定它的索引。

如果您不知道索引，那么您可以遍历所有元素的循环并检查值“First”并完成它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T12:03:38.187

你必须做一个循环

```
 var x= document.getElementsByTagName('input');
 var i =0;
 for(i = 0; i < x.length;i++){
     if(x[i].value == "First"){
        x[i].value = "Second";
     }
 } 
```

# ios - 更改标签栏文字颜色，iPhone

> ID：11343894
> 
> 赞同：4
> 
> 时间：2012-07-05T12:00:09.010
> 
> 标签：ios, uitabbar

我以编程方式创建了一个标签栏。

我们可以更改标签栏项目标题的颜色吗？默认为白色，我试图将其设为黑色。

就像是

```
 tabbaritem.text.textcolor=[UIcolor Blackcolor]; 
```

谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-05T12:10:38.667

在 iOS5 中，您使用外观代理来更改标题颜色：

对于特定的标签栏项目：

```
[[UITabBarItem appearance] setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                         [UIFont fontWithName:@"AmericanTypewriter" size:20.0f], UITextAttributeFont,
                                         [UIColor yellowColor], UITextAttributeTextColor,
                                         [UIColor redColor], UITextAttributeTextShadowColor,
                                         [NSValue valueWithUIOffset:UIOffsetMake(0.0f, 1.0f)], UITextAttributeTextShadowOffset,
                                         nil] forState:UIControlStateNormal]; 
```

或替换`self.tabBarItem`为`[UITabBarItem appearance]`更改所有标签栏项目。如果您想全部更改，我建议您将代码放在 appdelegate 上`didFinishLaunchingWithOptions:`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T12:15:44.593

只是别的...

要在 iOS 5 中设置标准外观：

在您的 AppDelegate.m 中执行以下操作：

```
[[UITabBar appearance] setTintColor:myColor]; //or whatever you want to change 
```

为您节省大量工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-02T06:20:43.947

也许这个更新的代码可以帮助某人：

```
[UITabBarItem.appearance setTitleTextAttributes:@{
                                                  NSForegroundColorAttributeName : [UIColor lightGrayColor] } forState:UIControlStateNormal];

[UITabBarItem.appearance setTitleTextAttributes:@{
                                                  NSForegroundColorAttributeName : [UIColor whiteColor] }     forState:UIControlStateSelected]; 
```

# java - 如果生成代码的分支，二进制搜索比硬编码慢？

> ID：11343895
> 
> 赞同：3
> 
> 时间：2012-07-05T12:00:09.637
> 
> 标签：java, c, clojure, jvm

[这个人](http://www.learningclojure.com/2010/09/clojure-faster-than-machine-code.html)特别声称二进制搜索（在 C 编译器中）比从生成的代码中硬编码的 if 分支慢。（请原谅 Clojure 代码和古怪的标题 - 这声称这个人所做的通常与编译器有关）。

他写

> 我偶尔会在黑暗的角落看到这种代码。当一个人知道他的处理器是如何工作的，知道他的 C 编译器是如何工作的，知道他的数据结构，并且真的，真的需要他的循环快时，他偶尔会写这种东西。
> 
> 这是真正的程序员编写的代码。

这是二进制搜索示例（请原谅 Clojure）

```
Start: (1 2 3 4 6 8 9 10 11 12)
Finish: ((((1) (2)) ((3) ((4) (6)))) (((8) (9)) ((10) ((11) (12))))) 
```

然后，如果基于硬编码值，他会用生成的代码分支替换二进制搜索：

```
(defn lookup-fn-handwritten [x]
  (if (< x 6) 
    (if (< x 3)                         ; x is < 6
      (if (< x 2)                       ; x is < 3
        (if ( < x 1)                    ; x is < 2
          0                             ; < 1
          1)                            ; 1 <= x < 2
        3)                              ; 2 <= x < 3
      (if (< x 4)                       ; 3 <= x < 6
        4                               ; 3 <= x < 4
        2))                             ; 4 <= x < 6
    (if (< x 10)                        ; 6 <= x < 10
      (if (< x 9)                       ; 6 <= x < 9
        (if (< x 8) 
          2                             ; 6 <= x < 8
          3)                            ; 8 <= x < 9
        3)                              ; 9 <= x < 10
      (if (< x 11)                      ; 10 < x
        (if (< x 12)                    ; 11 <= x
          1                             ; 11 <= x < 12
          0)
        0))))                           ; 12 <= x 
```

[http://www.learningclojure.com/2010/09/clojure-faster-than-machine-code.html](http://www.learningclojure.com/2010/09/clojure-faster-than-machine-code.html)

我的问题是 - 如果从生成的代码和硬编码值中进行分支硬编码是否比二进制搜索更有效？（在任何语言中 - 但作者声称这在 C 中有效 - 然后似乎只在 JVM 上演示它）。

（请再次原谅链接帖子的古怪标题 - 这只是疯狂。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T12:12:44.170

Well, the if-cascade probably does the same thing as the binary search, which means that it does the same comparisons, but without the associated "binary search management". It's an unrolled loop, and there is indeed a reason why compilers unroll loops. So yes, it will be faster.

But will it REALLY be faster? Now there's a problem called "cache". Whether you unroll a loop or anything else, your code gets larger, so the benefit might be offset by more memory accesses to run the code.

In addition, you never quite know what kind of instructions the compiler might be using to optimize the code, which it might not be using when you manually unroll the loop. Or the other way 'round, who knows. Even more so in languages that have a binary search "built in" so the compiler knows what it is dealing with.

Thus, just counting operations like "I have all the compares and none of the other stuff" may not be enough; there are other factors that affect execution time. And if you profile on one CPU to find out "my unrolled version is faster", another CPU might still disagree.

Optimizing is a b-word, not sure whether I'm allowed to spell it out here :-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T19:12:34.007

这种比较在现代 JVM 上可能非常困难。
**因为 HotSpot 编译器在运行时会进行许多动态优化，**如果它检测到一个类运行了很多次，它将开始广泛**内联函数调用**，这会产生嵌套的 if 表达式树。

在进行这种比较时，重要的是要在该类上“预热”JVM 几百万次以完成这种内联。我不认为差异会非常明显。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T13:04:59.827

“硬编码”版本也是二进制搜索，只是比大多数二进制搜索实现更有效。我根本不认为这种说法是非同寻常的。但是，如果您避免了大多数典型的实现效率低下，您可能能够以相当快的速度进行一般的二分搜索。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T12:11:33.300

The cascading if is effectively a specific binary search so you save by not having the code to implement a generic binary search, effectively it's an [unwound loop](http://en.wikipedia.org/wiki/Loop_unwinding) so it's always going to be faster.

In a generic situation (i.e. where you're not targeting a specific configuration) you may well find that the CPU cache compromises unrolled loop performance once the loop is too big for the cache.

First rule of optimisation is to measure, find the problems and optimise accordingly and the original link is an excellent example of this that fits a specific configuration.

So yes, a good algorithm will always beat a bad algorithm pretty much regardless of the compiler, interpreter or CPU. That's the point being made in the original link.

![Algorithm efficiency](../Images/cb2cc75429ddd32fa291019706f19ec1.png)

# jquery - 如何使用jquery在间隔内显示/隐藏一些链接图像

> ID：11343900
> 
> 赞同：2
> 
> 时间：2012-07-05T12:00:22.230
> 
> 标签：jquery

我试图以 3 秒的时间间隔显示一些链接图像，但在第一张图像消失后没有任何显示，任何帮助将不胜感激。

```
<div class="fadein">
  <a href=""><img src="/media/home-content.jpg" alt="" /></a>
  <a href=""><img src="/media/Banners/images/denim.jpg" alt="" /></a>
</div> 
```

jQuery

```
jQuery.noConflict();

jQuery(document).ready(function(){

jQuery(function(){
    jQuery('.fadein a img:gt(0)').hide();
        setInterval(function(){
          jQuery('.fadein a:first-child img').fadeOut(3000)
             .parent().next('a img').fadeIn()
             .end().appendTo('.fadein');}, 
          3000);
    });

}); 
```

更新

只需将代码更改为

```
jQuery(function(){
    jQuery('.fadein a:gt(0) img').hide();
        setInterval(function(){
          jQuery('.fadein a:first-child img').fadeOut(3000)
             .parent().next('a').children('img').fadeIn()
             .end().appendTo('.fadein');}, 
          10000);
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:15:26.943

嘿男人试试这个：http: [//jsfiddle.net/gRHPA/2/](http://jsfiddle.net/gRHPA/2/)

希望这可以帮助！

**代码**

```
jQuery.noConflict();
jQuery('.fadein a:gt(0)').hide();

setInterval(function(){
    jQuery('.fadein a:first-child')
        .fadeOut()
        .next('a')
        .fadeIn()
        .end()
        .appendTo('.fadein');
}, 3000);
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T12:40:09.023

```
jQuery(function() {
    var intervalId;
    var $previousAnchor;
    var $anchor;
    var $firstAnchor = $(".fadein a").first();

    $anchor = $firstAnchor;
    intervalId = setInterval(function() {
        $anchor.fadeIn();

        if (typeof($previousAnchor) != "undefined") {
            $previousAnchor.hide();
        }

        $previousAnchor = $anchor;

        if (typeof($anchor) == "undefined" || $anchor.next()[0] == undefined) {
            $anchor = $firstAnchor;
        }
        else {
            $anchor = $anchor.next();
        };
    }, 1000);
}); 
```

请注意使用缓存来提高性能。我还添加了一个性能测试来比较我可以开始工作的提供的解决方案。

见[**DEMO**](http://jsfiddle.net/e7MFb/)
见[**性能测试**](http://jsperf.com/varitions-of-setinterval)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T12:33:30.700

用这个更容易，更快

CSS：

```
.fadein a{
    display:none;
}​ 
```

js：

```
var current = null;
$(function(){
    $('.fadein').each(function(){
        var context = this;
        current = $('a',this).first().show();
        setInterval(function(){
            $(current).hide();
            var next = $(current).next('a');
            if(next.length == 0)
                next = $('a',context).first();
            current = $(next).show();          
        }, 1000);
    });
});​ 
```

工作小提琴：http: [//jsfiddle.net/techunter/C4uER/](http://jsfiddle.net/techunter/C4uER/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T12:10:05.157

也许您可以为此使用[JQuery 轮播插件](http://thomaslanciaux.pro/jquery/jquery_carousel.htm)。

# orm - 使用 hasMany() 从 findAll() 中选择特定的连接记录包括

> ID：11343903
> 
> 赞同：0
> 
> 时间：2012-07-05T12:00:29.890
> 
> 标签：orm, coldfusion, cfc, cfwheels

（我尝试将其发布到 CFWheels Google 群组（两次），但由于某种原因，我的消息从未出现。该列表是否经过审核？）

这是我的问题：我正在 CF on Wheels 中开发一款社交网络应用程序，与我们在 Chris Peters 的精彩教程中所熟悉的应用程序并无太大区别。不过，在我的情况下，我需要在用户目录中显示最新的状态消息。我有一个带有 hasMany("statuses") 的 User 模型和一个带有 belongsTo("user") 的 Status 模型。所以这是我开始的代码：

```
users = model("user").findAll(include="userprofile, statuses"); 
```

这当然会为状态表中的每个状态消息返回一条记录。大量的矫枉过正。所以接下来我尝试：

```
users = model("user").findAll(include="userprofile, statuses", group="users.id"); 
```

越来越近了，但现在我们正在获取每个用户的第一个状态记录（最低的 status.id），当我想选择最近的状态时。我认为在直接 SQL 中，我会先使用子查询对状态进行重新排序，但这在 Wheels ORM 中对我不可用。那么是否有另一种干净的方法来实现这一点，或者我是否必须将一个巨大的查询结果或状态对象拖入我的 CFML，然后在循环时将它们过滤掉？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:33:05.423

[您可以使用计算属性](http://cfwheels.org/docs/chapter/calculated-properties)获取最新状态：

```
// models/User.cfc
function init() {
    property(
        name="mostRecentStatusMessage",
        sql="SELECT message FROM statuses WHERE userid = users.id ORDER BY createdat DESC LIMIT 1,1"
    );
} 
```

当然，`SELECT`语句的语法将取决于您的 RDBMS，但这应该可以帮助您入门。

缺点是您需要为查询中需要的每一列创建一个计算属性。

`<cfquery>`另一种选择是在模型中创建一个方法并在标签中编写自定义 SQL 。这种方式也是完全有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T00:41:52.467

我不知道您确切的数据库架构，但您的 findAll() 不应该看起来更像这样的东西：

```
statuses = model("status").findAll(include="userprofile(user)", where="userid = users.id"); 
```

这应该从特定用户那里获得所有状态......或者是所有用户都需要它？我发现你的问题有点难以解决。你到底想要得到什么？

# php - 使用 ajax 从多个模型中获取下拉依赖值

> ID：11343904
> 
> 赞同：2
> 
> 时间：2012-07-05T12:00:31.740
> 
> 标签：php, mysql, yii

我搜索了所有文档`Yii`但没有得到答案。所以我终于来到了这里。我有以下架构

```
Table Schools
+------------------+--------------+------+-----+---------------------+----------------+
| Field            | Type         | Null | Key | Default             | Extra          |
+------------------+--------------+------+-----+---------------------+----------------+
| id               | int(10)      | NO   | PRI | NULL                | auto_increment |
| school_name      | varchar(100) | NO   |     |                     |                |
+------------------+--------------+------+-----+---------------------+----------------+

Table Students

+------------------+--------------+------+-----+---------------------+----------------+
| Field            | Type         | Null | Key | Default             | Extra          |
+------------------+--------------+------+-----+---------------------+----------------+
| id               | int(10)      | NO   | PRI | NULL                | auto_increment |
| school_id        | int(10)      | NO   | FK  |                     |                |
| student_name     | varchar(100) | NO   |     |                     |                |
| roll_no          | varchar(80)  | NO   |     |                     |                |
| class            | varchar(20)  | NO   |     |    |                |                |
| subjects         | varchar(100) | NO   |     |                     |                |
+------------------+--------------+------+-----+---------------------+----------------+ 
```

我`models and CRUD`为这两个模型做了。在模型中我的关系是这样的

在`Students.php`关系就像

```
 public function relations()
  {
    // NOTE: you may need to adjust the relation name and the related
    // class name for the relations automatically generated below.
    return array(
      'School' => array(self::BELONGS_TO,'Schools','school_id'),
    );
  } 
```

在`Schools.php`关系就像

```
public function relations()
  {
    // NOTE: you may need to adjust the relation name and the related
    // class name for the relations automatically generated below.
    return array(
      'student' => array(self::HAS_MANY, 'Students', 'school_id'),
    );
  } 
```

现在我做了，`two models rendered in a single page`以便我可以在一个表单中输入所有相应的字段。

```
 In the _form.php file of Students I have made some change in student_name like this
         <div class="row">
        <?php echo $form->labelEx($model,'student_name'); ?>
        <?php echo $form->dropdownList($model,'student_name', CHtml::listData(Students::model()->findAll(), 'id', 'student_name'), array('empty'=>array('Select'=>'--Select One---'))); ?>
        <?php echo $form->error($model,'student_name'); ?> 
```

现在对于我得到的这段代码`all the student name from the Student model`。所以我的问题是当我从中获取学生姓名`dropdown list`并选择一个学生时，它还将获取学生的所有相应值以在`_form.php`不点击保存按钮的情况下呈现。这样用户就不必输入再次手动。我认为`ajax and json encode`会在这里工作，但不知道如何让他们在这里工作。

**[更新]**

这是`StudentsController`代码

```
 public function actionDisCoor() {
    $model = School::model()->findByPk($_POST['Students']['student_id']);
    $data=CHtml::listData($data,'id','name');
    foreach($data as $value=>$name)
    {
      echo CHtml::tag('option',array('value'=>$value),CHtml::encode($name),true);
    }
  } 
```

这是`_form.php`代码`Students`

```
 <div class="row">
    <?php echo $form->labelEx($model,'student_name'); ?>
    <?php  $List = CHtml::listData(Students::model()->findAll(), 'id', 'student_name');
?>
    <?php echo $form->dropdownList($model,'student_name',$List,
                                array('onChange'=>CHtml::ajax(array(
                                'url' => CController::createUrl('DisCoor'),
                                'type' => 'POST',                     
                               'update'=>'#school_id',
                                )),'style'=>'width:180px;'
                                    )
                                )?>
    <?php echo $form->error($model,'student_name'); ?>
  </div> 
```

这是代码`accessRules()`

```
 public function accessRules()
  {
    return array(
      array('allow',  // allow all users to perform 'index' and 'view' actions
        'actions'=>array('index','view'),
        'users'=>array('*'),
      ),
      array('allow', // allow authenticated user to perform 'create' and 'update' actions
        'actions'=>array('create','update'),
        'users'=>array('@'),
      ),
      array('allow', // allow authenticated user to perform 'create' and 'update' actions
        'actions'=>array('create','update','DisCoor'),
        'users'=>array('@'),
      ),
      array('allow', // allow admin user to perform 'admin' and 'delete' actions
        'actions'=>array('admin','delete'),
        'users'=>array('admin'),
      ),
      array('deny',  // deny all users
        'users'=>array('*'),
      ),
    );
  } 
```

毕竟，当我在萤火虫中看到时，我得到了错误。这是屏幕截图 ![在此处输入图像描述](../Images/42c116fcf1572dc3fb99c1e1ef4ad450.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:05:45.437

这很简单。请阅读[创建依赖下拉列表](http://www.yiiframework.com/wiki/24/)。希望它能回答你所有的疑问。

您也可以执行以下示例中的`onChange`操作

```
 <?php echo
 $List = CHtml::listData(Students::model()->findAll(), 'id', 'student_name');
 $form->dropdownList($model,'student_name',$List,
                                array('onChange'=>
                                CHtml::ajax(array(
                                'url' => CController::createUrl('DisCoor'),
                                'type' => 'POST',                     
                               'update'=>'#school_id',
                                )),'style'=>'width:180px;'        
                                    )
                                )?> 
```

在我的控制器中我做了类似的事情

```
$model = School::model()->findByPk($_POST['Jobs']['student_id']);
                 $data=CHtml::listData($data,'id','name');
foreach($data as $value=>$name)
{
    echo CHtml::tag('option',
               array('value'=>$value),CHtml::encode($name),true);
} 
```

现在#school_id 是需要更新的下拉菜单。

我已经给了你几乎所有你需要的东西 祝你好运

# android - Android Convert Raw data to Png 图片颜色不好？

> ID：11343909
> 
> 赞同：1
> 
> 时间：2012-07-05T12:00:43.540
> 
> 标签：android, png

我试图将纯原始数据转换为 png 图像。我无法获得正确颜色的正确输出图像。

作为参考，我附上了原始文件和图像。请建议我获得正确颜色的图像。我已经添加了图像和原始文件。

**代码**

```
File screensPath = new File(SCREENSHOT_FOLDER);
            screensPath.mkdirs();

            // construct screenshot file name
            StringBuilder sb = new StringBuilder();
            sb.append(SCREENSHOT_FOLDER);
            sb.append(Math.abs(UUID.randomUUID().hashCode()));  // hash code of UUID should be quite random yet short
            sb.append(".png");
            String file = sb.toString();

            // fetch the screen and save it
            Screenshot ss = null;
            try {
                ss = retreiveRawScreenshot();
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            if(ss!=null)
            {
            writeImageFile(ss, file);
            }

            incre++;

 private Screenshot retreiveRawScreenshot() throws Exception {
        try {

             InputStream    is = new FileInputStream("/mnt/sdcard/screenshots/ss"+incre+".raw");
            // retrieve response -- first the size and BPP of the screenshot

            StringBuilder sb = new StringBuilder();
            int c;
            while ((c = is.read()) != -1) {
                if (c == 0) break;
                sb.append((char)c);
            }

        //========================================= not used =====================================
            // parse it
            String[] screenData = sb.toString().split(" ");
            if (screenData.length >= 3) {
                System.out.println("$$$$$$$$$$$$$$$$$$$$$$$$$$$ ");
                Screenshot ss = new Screenshot();
                ss.width = Integer.parseInt(screenData[0]);
                ss.height = Integer.parseInt(screenData[1]);
                ss.bpp = Integer.parseInt(screenData[2]);
                System.out.println("$$$$$$$$$$$$$$$$$$$$$$$$$$$ ");
                // retreive the screenshot
                // (this method - via ByteBuffer - seems to be the fastest)
                ByteBuffer bytes = ByteBuffer.allocate (ss.width * ss.height * ss.bpp / 8);
                is = new BufferedInputStream(is);   // buffering is very important apparently

                byte[] rgbsnew = null;
                toRGB565(bytes.array(), ss.width, ss.height, rgbsnew);

            //  is.read(bytes.array());             // reading all at once for speed
                is.read(rgbsnew);               // reading all at once for speed

                bytes.position(0);                  // reset position to the beginning of ByteBuffer

                ss.pixels =ByteBuffer.wrap(rgbsnew);

                // convert byte-buffer to integer

                return ss;
            }
     //========================================= not used ==========================================        
            Screenshot ss = new Screenshot();
            ss.width = 320;
            ss.height = 480;
            ss.bpp = 16;
            ByteBuffer bytes = ByteBuffer.allocate (ss.width * ss.height * ss.bpp / 8);
            is = new BufferedInputStream(is);   // buffering is very important apparently
            is.read(bytes.array());             // reading all at once for speed
            bytes.position(0);                  // reset position to the beginning of ByteBuffer
            ss.pixels = bytes;

            //============================= newly tried to set raw to image view ==============================
            /*mRawImage = new RawImage();
            mRawImage.readHeader(1, bytes);

         // Receive framebuffer data.
            byte[] data = new byte[mRawImage.size];
            bytes = ByteBuffer.wrap(data);         
            mRawImage.data = data;

            Bitmap bmp=BitmapFactory.decodeByteArray(mRawImage.data,0,mRawImage.data.length);

            imageView1.setImageBitmap(bmp);*/

          //============================newly tried to set raw to image view  ===============================
            return ss;
        }
        catch (Exception e) {

        //  throw new Exception(e);
            return null;
        }
        finally {}

        //return null;
    }

    class Screenshot {
        public Buffer pixels;
        public int width;
        public int height;
        public int bpp;

        public boolean isValid() {
            if (pixels == null || pixels.capacity() == 0 || pixels.limit() == 0) return false;
            if (width <= 0 || height <= 0)  return false;
            return true;
        }
    }

    private void writeImageFile(Screenshot ss, String file) {
        //if (ss == null || !ss.isValid())      throw new IllegalArgumentException();
        //if (file == null || file.length() == 0)   throw new IllegalArgumentException();

        // resolve screenshot's BPP to actual bitmap pixel format
        Bitmap.Config pf;
        switch (ss.bpp) {
            //case 16:  pf = Config.RGB_565; break;

            case 16:    pf = Config.RGB_565; break;
            case 32:    pf = Config.ARGB_8888; break;
            default:    pf = Config.ARGB_8888; break;
        }
//=====================================================================
        /*int[] rgb24 = new int[ss.pixels.capacity()];
        int i = 0;
        for (;i<320*480;i++)
        {
            //uint16_t pixel16 = ((uint16_t *)gr_framebuffer[0].data)[i];
            //int pixel16=(IntBuffer)
                    int pixel16=Integer.parseInt(ss.pixels.position(i).toString());

            // RRRRRGGGGGGBBBBBB -> RRRRRRRRGGGGGGGGBBBBBBBB
            // in rgb24 color max is 2^8 per channel (*255/32 *255/64 *255/32)
            rgb24[3*i+2]   = (255*(pixel16 & 0x001F))/ 32;      //Blue
            rgb24[3*i+1]   = (255*((pixel16 & 0x07E0) >> 5))/64;    //Green
            rgb24[3*i]     = (255*((pixel16 & 0xF800) >> 11))/32;   //Red
        }
        //ss.pixels=rgb24;
*///=====================================================================       

        // create appropriate bitmap and fill it wit data
        Bitmap bmp = Bitmap.createBitmap(ss.width, ss.height, pf);
        bmp.copyPixelsFromBuffer(ss.pixels);

        // handle the screen rotation
        int rot = getScreenRotation();
        if (rot != 0) {
            Matrix matrix = new Matrix();
            matrix.postRotate(-rot);
            bmp = Bitmap.createBitmap(bmp, 0, 0, bmp.getWidth(), bmp.getHeight(), matrix, true);
        }

        // save it in PNG format
        FileOutputStream fos;
        try {
            fos = new FileOutputStream(file);
        } catch (FileNotFoundException e) {
            throw new InvalidParameterException();
        }
        bmp.compress(CompressFormat.PNG, 100, fos);
    }

    private int getScreenRotation()  {
        WindowManager wm = (WindowManager)getSystemService(WINDOW_SERVICE);
        Display disp = wm.getDefaultDisplay();

        // check whether we operate under Android 2.2 or later
        try {
            Class<?> displayClass = disp.getClass();
            Method getRotation = displayClass.getMethod("getRotation");
            int rot = ((Integer)getRotation.invoke(disp)).intValue();

                switch (rot) {
                    case Surface.ROTATION_0:    return 0;
                    case Surface.ROTATION_90:   return 90;
                    case Surface.ROTATION_180:  return 180;
                    case Surface.ROTATION_270:  return 270;
                    default:                    return 0;
                }
        } catch (NoSuchMethodException e) {
            // no getRotation() method -- fall back to dispation()
            int orientation = disp.getOrientation();

            // Sometimes you may get undefined orientation Value is 0
            // simple logic solves the problem compare the screen
            // X,Y Co-ordinates and determine the Orientation in such cases
            if(orientation==Configuration.ORIENTATION_UNDEFINED){

                Configuration config = getResources().getConfiguration();
                orientation = config.orientation;

                if(orientation==Configuration.ORIENTATION_UNDEFINED){
                    //if height and widht of screen are equal then
                    // it is square orientation
                    if(disp.getWidth()==disp.getHeight()){
                        orientation = Configuration.ORIENTATION_SQUARE;
                    }else{ //if widht is less than height than it is portrait
                        if(disp.getWidth() < disp.getHeight()){
                            orientation = Configuration.ORIENTATION_PORTRAIT;
                        }else{ // if it is not any of the above it will defineitly be landscape
                            orientation = Configuration.ORIENTATION_LANDSCAPE;
                        }
                    }
                }
            }

            return orientation == 1 ? 0 : 90; // 1 for portrait, 2 for landscape
        } catch (Exception e) {
            return 0; // bad, I know ;P
        }
    }

    //===========================================================================
    /**
     * Converts semi-planar YUV420 as generated for camera preview into RGB565
     * format for use as an OpenGL ES texture. It assumes that both the input
     * and output data are contiguous and start at zero.
     * 
     * @param yuvs the array of YUV420 semi-planar data
     * @param rgbs an array into which the RGB565 data will be written
     * @param width the number of pixels horizontally
     * @param height the number of pixels vertically
     */

    //we tackle the conversion two pixels at a time for greater speed
    private void toRGB565(byte[] yuvs, int width, int height, byte[] rgbs) {
        //the end of the luminance data
        final int lumEnd = width * height;
        //points to the next luminance value pair
        int lumPtr = 0;
        //points to the next chromiance value pair
        int chrPtr = lumEnd;
        //points to the next byte output pair of RGB565 value
        int outPtr = 0;
        //the end of the current luminance scanline
        int lineEnd = width;

        while (true) {

            //skip back to the start of the chromiance values when necessary
            if (lumPtr == lineEnd) {
                if (lumPtr == lumEnd) break; //we've reached the end
                //division here is a bit expensive, but's only done once per scanline
                chrPtr = lumEnd + ((lumPtr  >> 1) / width) * width;
                lineEnd += width;
            }

            //read the luminance and chromiance values
            final int Y1 = yuvs[lumPtr++] & 0xff; 
            final int Y2 = yuvs[lumPtr++] & 0xff; 
            final int Cr = (yuvs[chrPtr++] & 0xff) - 128; 
            final int Cb = (yuvs[chrPtr++] & 0xff) - 128;
            int R, G, B;

            //generate first RGB components
            B = Y1 + ((454 * Cb) >> 8);
            if(B < 0) B = 0; else if(B > 255) B = 255; 
            G = Y1 - ((88 * Cb + 183 * Cr) >> 8); 
            if(G < 0) G = 0; else if(G > 255) G = 255; 
            R = Y1 + ((359 * Cr) >> 8); 
            if(R < 0) R = 0; else if(R > 255) R = 255; 
            //NOTE: this assume little-endian encoding
            rgbs[outPtr++]  = (byte) (((G & 0x3c) << 3) | (B >> 3));
            rgbs[outPtr++]  = (byte) ((R & 0xf8) | (G >> 5));

            //generate second RGB components
            B = Y2 + ((454 * Cb) >> 8);
            if(B < 0) B = 0; else if(B > 255) B = 255; 
            G = Y2 - ((88 * Cb + 183 * Cr) >> 8); 
            if(G < 0) G = 0; else if(G > 255) G = 255; 
            R = Y2 + ((359 * Cr) >> 8); 
            if(R < 0) R = 0; else if(R > 255) R = 255; 
            //NOTE: this assume little-endian encoding
            rgbs[outPtr++]  = (byte) (((G & 0x3c) << 3) | (B >> 3));
            rgbs[outPtr++]  = (byte) ((R & 0xf8) | (G >> 5));
        }
    } 
```

谢谢 。 ![图片](../Images/5a7a9f1ad54902bc1dea18e1270878e6.png)[原始文件](http://www.netsdi.com/Autoracing/ss10.zip)

# entity-framework - 自动迁移或基于代码的迁移？哪个是更好的选择？

> ID：11343915
> 
> 赞同：0
> 
> 时间：2012-07-05T12:01:11.113
> 
> 标签：entity-framework, entity-framework-4.3, entity-framework-migrations

我正在尝试确定代码优先迁移策略，但不确定哪个更好。

我实际上很喜欢自动迁移，但不确定它是否会让人头疼。

我读过[这篇文章](http://elegantcode.com/2012/04/12/entity-framework-migrations-tips/)，他提倡基于代码的迁移。但是我不需要在迁移中切换到不同的状态，所以我将始终使用最新的状态，并且我作为单个开发人员在项目中工作。

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:08:04.057

自动迁移最初也被称为“with-magic 迁移”，而基于代码的迁移被称为“no-magic 迁移”。这两个名字准确地反映了正在发生的事情。自动迁移是隐式的——你根本不在乎，让它们按需要运行。基于代码的迁移是明确的 - 您在预定义的步骤中定义迁移，EF 会在此指导您（例如，不允许多个待处理的迁移）。

如果您只想让您的数据库始终保持最新，并且您不希望支持多个版本或降级，那么您应该可以使用自动迁移。

# haskell - 为什么 Haskell 找不到已安装的模块？

> ID：11343916
> 
> 赞同：3
> 
> 时间：2012-07-05T12:01:11.830
> 
> 标签：haskell, yesod

我写了以下程序：

```
import Yesod

main = putStrLn "test" 
```

但是当我运行程序时出现以下错误

C:\myprograms>runhaskell test0

test0.hs:1:8: 找不到模块 `Yesod' 使用 -v 查看搜索的文件列表。

但是我已经安装了Yesod！有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T15:11:51.363

正如评论所描述的，第一步是列出您的包裹。二是检查版本是否对应。第三是看你期望提供一个模块的包是否实际上是暴露的而不是隐藏的。

# javascript - 如何将用户在FORM中选择的数据保存到.txt文件或csv文件

> ID：11343917
> 
> 赞同：0
> 
> 时间：2012-07-05T12:01:22.067
> 
> 标签：javascript, html

我有一个要求，我需要将用户选择的数据存储到 txt 文件中。我怎样才能做到这一点？我的表单是 html 和 javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:25:47.707

我知道的唯一方法是使用 php。任何其他服务器端语言都可以。

以下教程包含您需要了解的有关使用 php 处理文件的所有信息。

[http://www.tizag.com/phpT/files.php](http://www.tizag.com/phpT/files.php)

1.  创建文件：[http ://www.tizag.com/phpT/filecreate.php](http://www.tizag.com/phpT/filecreate.php)
2.  写入文件：[http](http://www.tizag.com/phpT/filewrite.php) : //www.tizag.com/phpT/filewrite.php 在这里要小心。您需要根据要添加到文件中已有内容或覆盖它的天气来选择正确的写入文件的方法。要附加看到这个：[http ://www.tizag.com/phpT/fileappend.php](http://www.tizag.com/phpT/fileappend.php)

# c++ - 全局new和delete操作符的定义

> ID：11343921
> 
> 赞同：0
> 
> 时间：2012-07-05T12:01:32.287
> 
> 标签：c++, new-operator, definition, delete-operator

哪个库有全局 new 和 delete 运算符的定义？具体来说，库中的哪个文件包含这些运算符的定义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:04:05.370

没有指定这些定义的位置，但指定它们在 header 中声明`<new>`。`<new>`（如果您只是使用非放置表达式使用的标准版本，则不必包括在内`new`，这些在所有翻译单元中自动可用。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T12:07:47.823

`operator new`and的非放置形式`operator delete`（及其数组形式）在每个翻译单元的全局范围内隐式声明。

标准安置表格在 中声明`<new>`。

库函数的定义通常不可用。您的供应商可能会提供源，在这种情况下，他们将在某处。

虽然，根据您的评论，您可能在谈论*new-expression*`new`中的使用，而不是分配内存的函数。*new-expression*由编译器处理，生成对对象构造函数的必要调用。任何地方都可能没有具体的实现；您需要查看编译器代码生成器的相关部分。*`operator new`*`operator new`**

# javascript - 淘汰赛问题，无法使用“in”运算符搜索“length”

> ID：11343922
> 
> 赞同：5
> 
> 时间：2012-07-05T12:01:32.383
> 
> 标签：javascript, asp.net, knockout.js

我在使用 Knockout.js 的 Web 应用程序上收到以下错误

```
Cannot use 'in' operator to search for 'length' 
```

我的代码：

```
$(document).ready(function () {
        AjaxRequest();
    });

    function AjaxRequest() {
        $.post("../../Api/DisabilitiesHandler.ashx?method=get", function (data) {
            var viewModel = {
                disabilities: ko.observableArray(data)
            };

            ko.applyBindings( viewModel, document.body);
        });
    }

<table>
    <tbody data-bind="template: { name: 'disabilitiesRowTemplate', foreach: disabilities }"></tbody>
</table>

<script type="text/html" id="disabilitiesRowTemplate">
    <tr>
        <td>Name:
            <input data-bind="value: Name" /></td>
        <td>
           Active <input type="checkbox" data-bind="checked: Active" /></td>
    </tr>
</script> 
```

这是我的模型

```
public class Disabilities
{
    public int Id { get; set; }
    public string Name { get; set; }
    public bool Active { get; set; }
} 
```

这是网络服务的代码

```
context.Response.ContentType = "application/JSON";
DbsaDal.Entities.DBSAEntities db = new DbsaDal.Entities.DBSAEntities();
List<DbsaDal.Model.Disabilities> disabilities = DbsaDal.Entities.Disabilities.Get(db);
context.Response.Write(new JavaScriptSerializer().Serialize(disabilities)); 
```

关于做什么的任何建议？我在网上到处搜索，找不到任何有用的东西

更新1：

```
Uncaught TypeError: Cannot use 'in' operator to search for 'length' in [{"Id":1,"Name":"Blind","Active":false},{"Id":2,"Name":"Mute","Active":true}] Knockout.js:92 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T12:28:44.820

我发现了我的问题：

```
disabilities: ko.observableArray(data) 
```

这段代码应该是

```
disabilities: ko.observableArray(ko.utils.parseJson(data)) 
```

# javascript - 带有 2 个参数的 ExternalInterface.addCallback

> ID：11343923
> 
> 赞同：0
> 
> 时间：2012-07-05T12:01:34.280
> 
> 标签：javascript, actionscript-3, flash

我正在尝试将 2 个变量从 javascript 传递到 flash。我想我可以做这样的事情来尝试接收它们。

```
ExternalInterface.addCallback("callAs", muscle, tension); 
```

可悲的是，这会引发错误

1137：参数数量不正确。预计不超过2。

有没有办法发送 2 个变量而不必每次调用 2 个？

提前致谢！树脂

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T12:35:28.893

有可能的。

```
ExternalInterface.addCallback("theFunctionNameInJavascript", theFunctionNameInActionscript);

function theFunctionNameInActionscript(param1:String, param2:String):void {
//do something with param1;
//do something with param2;

} 
```

然后在 Javascript 中你会有类似...

```
<!-- work out if we are on Mac or PC -->
function getFlashMovie(movieName) {
    var isIE = navigator.appName.indexOf("Microsoft") != -1;
    return (isIE) ? window[movieName] : document[movieName];
}

function theFunctionNameInJavascript(swf, param1, param2) {
    getFlashMovie(swf).theFunctionNameInActionscript(param1, param2);
} 
```

你会用类似的东西来触发它......

```
<form action="javascript:theFunctionNameInJavascript('idNameOfYourSWF', 'thisisparam1', 'thisIsParam2')" id="form">
<input type="submit" value="Click Me" />
</form> 
```

# mysql - mysql查询的json_encode返回一些行的一些空列，但这些列不为空

> ID：11343925
> 
> 赞同：2
> 
> 时间：2012-07-05T12:01:50.133
> 
> 标签：mysql, json, null

我正在创建一个小 php 文件来为我的 android 应用程序获取 mysql 行。检索我使用的每一行：

```
 $q=mysql_query($sql, $this->conn) or die (mysql_error());
while($e=mysql_fetch_assoc($q)) {
      $output[]=$e;
    }
print(json_encode($output)); 
```

但有时它会返回不一致的输出。

这是一个示例： 行：

id=1（正确）-name="name1"（正确）-price=200（正确）-price2=null（正确）-area= **null（不正确）**因为 area 的值为“Centro Città”.. 和很快..

我该如何解决这个问题？

编辑：价值是

\r\nPosto nel pieno centro e vicinissimo al lungomare Regina Margherita.</p>\r\n Ottimo condominio。Libero e disponibile da subito。/p>","vani":"2","prezzo":"87000","prezzo1":"0","prezzo2":"0","prezzo3":"0","prezzo4":" 0","prezzo5":"0","metriquadri":"58","stato":"In buono stato","riscaldamento":"Autonomo","classeenergetica":"Non dotato","piano": "Primo/secondo/terzo","indicazioni":"","mutuo":"No","banca":"","importo":"","finalita":"","tipologia":"" “ammortamento”：“

area 字段不为空，而是“Centro Città”。其余的都是正确的。我试图只显示带有 mysql_fetch_assoc($query) 的“区域”字段，它返回了正确的结果：“Centro Città”。这个问题只存在于 json_encode。

SQL 变量是：

```
$sql = sprintf("SELECT i.*, f.nomefile FROM immobili i LEFT JOIN foto f on(i.id=f.idimmobile AND f.copertina=1) WHERE i.id=%s", $_GET['id']); 
```

这只是一个示例，如果我询问其他行，则区域字段也会正确返回 json_encode 并且其他字段返回 null。可能是与字符串和文本格式有关的问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T15:08:30.980

**Problem solved**

```
$result = $mysql->query($sql);
while($row = mysql_fetch_assoc($result)) {
   $r[] = array_map('utf8_encode', $row);
}
echo json_encode($r); 
```

Thank you

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T13:46:31.190

这是一个编码问题。[`json_encode()`](http://php.net/json_encode)只接受 UTF-8 字符串，`null`如果字符串不是有效的 UTF-8 则返回。

您可以通过在将数据传递给 json_encode 之前转换数据的编码来解决此问题。看看[`iconv()`](http://php.net/manual/en/function.iconv.php)或[`mb_convert_encoding()`](http://php.net/mb_convert_encoding)。

例如，假设您的数据以 latin1 编码：

```
$e = array_map(function($string) {
    return iconv("iso-8859-1", "utf-8", $string);
}, $e);

$output[] = $e; 
```

或者如果你有 php < 5.3：

```
function cb($string) {
    return iconv("iso-8859-1", "utf-8", $string);
}

$e = array_map('cb', $e);

$output[] = $e; 
```

# java - 从字节数组 java 创建 BufferedImage

> ID：11343929
> 
> 赞同：0
> 
> 时间：2012-07-05T12:02:07.227
> 
> 标签：java, android, swing

我有一个字节数组，我需要将其转换为图像。我读过这个教程：

[http://www.mkyong.com/java/how-to-convert-byte-to-bufferedimage-in-java/](http://www.mkyong.com/java/how-to-convert-byte-to-bufferedimage-in-java/)

本教程使用此导入语句中的`BufferedImage`and`ImageIO`

```
import javax.imageio.ImageIO;
import java.awt.image.BufferedImage; 
```

但是我在任何地方都找不到这些课程。我有安装了 javax 的 JDK x64 版本。有人吗？

我的整个源代码：

```
public class ReadImageFromFileActivity extends Activity implements OnClickListener {

Context c;
Button read;
ImageView image;
byte[] fileBytes;
byte[] image1;
byte[] image2; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    c = getApplicationContext(); 

    read = (Button)findViewById(R.id.file); 
    read.setOnClickListener(this);

    image = (ImageView)findViewById(R.id.image);

    image1 = new byte[ 500 * 500]; 
    image2 = new byte[ 500 * 500]; 

}

public static byte[] getBytesFromFile(Context c) throws IOException {

    File file = new File("/mnt/sdcard/LeftIndex.FIR");
    Uri URIpath = Uri.fromFile(file);

    InputStream is = c.getContentResolver().openInputStream(URIpath);

    long length = file.length();

    if (length > Integer.MAX_VALUE) {
        // File is too large
    }

    // Create the byte array to hold the data
    byte[] bytes = new byte[(int)length];

    // Read in the bytes
    int offset = 0;
    int numRead = 0;
    while (offset < bytes.length
           && (numRead=is.read(bytes, offset, bytes.length-offset)) >= 0) {
        offset += numRead;
    }

    // Ensure all the bytes have been read in
    if (offset < bytes.length) {
        throw new IOException("Could not completely read file "+file.getName());
    }

    // Close the input stream and return bytes
    is.close();
    return bytes;
}

public void onClick(View v) {

    try {
        fileBytes = getBytesFromFile(c);
        convertByteArray(fileBytes); 

    } catch (IOException e) {
        Log.e("++++getBytesFromFile SAYS: ", "Couldn't read file!!!");

        e.printStackTrace();
    }

}

public void convertByteArray(byte[] buffer) {

     System.arraycopy(buffer, 64, image1, 0, 500 * 500);  
     System.arraycopy(buffer, 60, image2, 0, 500 * 500); 

     Bitmap bmp = BitmapFactory.decodeByteArray(image1, 0, image1.length); 
     ImageView image=new ImageView(this);
     image.setImageBitmap(bmp);

} 
```

}

**代码说明**

在函数中`getBytesFromFile`，我从 SD 卡上的 .FIR 文件构建了一个新文件。该文件将被转换为字节数组并返回构造的字节数组。这个字节数组将被传递到一个调用的函数中，该函数`convertByteArray`将被分成两个单独的字节数组。我想从这两个字节数组中的每一个构造一个位图。但是logcat只说bitmapFactory返回null。

有人对此有任何解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T12:04:42.537

Android 既没有`ImageIO`也没有`BufferedImage`. 这是一个替代方案：[将图像（与 Swing 兼容）从 Java 序列化到 Android 的最佳方法是什么？](https://stackoverflow.com/questions/9994129/what-is-the-best-way-to-serialize-an-image-compatible-with-swing-from-java-to)

# java - 将 Excel 转换为 JSON

> ID：11343931
> 
> 赞同：2
> 
> 时间：2012-07-05T12:02:12.443
> 
> 标签：java, json, arrays

我已经阅读了使用 apache-poi 的 excel 文档。具有以下记录的excel文档：

```
A1 A2 A3 A4

A1 A2 B3 B4 
```

我想将它们转换为 JSON 数组，如

```
{ A1 : {A2 : {A3 : {A4 : some_value } } , {B3 : {B4 : some_value } } } } 
```

实际上它很容易转换为 XML。请告诉我如何解决这个问题。只有提示就足够了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:36:24.007

您可以参考以下代码：

```
FileInputStream inp = new FileInputStream( file );
Workbook workbook = WorkbookFactory.create( inp );

// Get the first Sheet.
Sheet sheet = workbook.getSheetAt( 0 );

    // Start constructing JSON.
    JSONObject json = new JSONObject();

    // Iterate through the rows.
    JSONArray rows = new JSONArray();
    for ( Iterator<Row> rowsIT = sheet.rowIterator(); rowsIT.hasNext(); )
    {
        Row row = rowsIT.next();
        JSONObject jRow = new JSONObject();

        // Iterate through the cells.
        JSONArray cells = new JSONArray();
        for ( Iterator<Cell> cellsIT = row.cellIterator(); cellsIT.hasNext(); )
        {
            Cell cell = cellsIT.next();
            cells.put( cell.getStringCellValue() );
        }
        jRow.put( "cell", cells );
        rows.put( jRow );
    }

    // Create the JSON.
    json.put( "rows", rows );

// Get the JSON text.
return json.toString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T12:06:38.247

获取 Java 对象中的数据后，您可以使用这个简单的 JSON 库创建 JSON

[http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

但是你必须在 java 对象中创建那种结构。

# javascript - 使用 AJAX 和 JS 动态删除 MySQL 数据

> ID：11343934
> 
> 赞同：0
> 
> 时间：2012-07-05T12:02:20.040
> 
> 标签：javascript, mysql, ajax

您好我正在尝试使用 JS 和 AJAX 动态删除数据库条目而不刷新整个页面。这是我的 data.php 文件：

```
<?php
require_once('db.php');

if (isset($_GET['list'])) {
   $query = "SELECT * FROM message";
   mysql_query("SET NAMES 'UTF8'");
   $qq=mysql_query($query);
   $i = 1;
   echo '<div id="rezult">';

while($ff = mysql_fetch_array($qq)){
echo '<div id="id'.$ff['id'].'">'.$i++.'. Name: '.$ff['name'].' Message:'.$ff['message'].'</div>';
}
echo '</div>';
}
?> 
```

使用此代码，我正在从 mysql 表中检索数据：

索引.php

```
 function list() { 
$.get('data.php?list=1', function(o) {
            $('#list').html(o);
            });
} 
```

如何在不刷新页面的情况下动态删除所需条目？试图在下面添加此代码作为条目的链接，但它被`javascript:$.post(`这样剪掉了。 `<a href="javascript:$.post('delete_post.php', { id: '$ff[id]' } );" class='delete_post' title='delete post'>delete post</a>`

感谢您的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:24:15.933

小心！如果有人调用您的 php 文件 data.php?list=ANYNUMBER 他将能够删除任何行，请确保您使用安全工具来避免这种情况。如果您使用[ajax 和 Jquery，](http://api.jquery.com/jQuery.ajax/)我认为它会更容易。

尝试这样的事情：

```
$.ajax({
  type: "POST",
  url: "list.php",
  data: { list: "1", session_id: session_ID }
}).done(function( msg ) {
  alert( "Data deleted: " + msg );
}); 
```

其中 session_id 是字段的值（在您的示例中为 1）， session_id 是当有人访问您的页面时，您为他分配了一个 SESSION_ID，在他单击删除按钮后，您比较您分配的会话 ID 是否等于来自服务器的 session_id（避免其他站点的人调用您的 list.php）。如果 ajax 中的 session_id 等于服务器上的 session session_id 允许删除，请查看： [PHP Session Security](https://stackoverflow.com/questions/328/php-session-security)

# jquery - Highcharts中不同地区的人口金字塔

> ID：11343935
> 
> 赞同：6
> 
> 时间：2012-07-05T12:02:25.833
> 
> 标签：jquery, highcharts

使用 Highcharts，我想创建一个类似于这个的人口金字塔：

[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/bar-negative-stack/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/bar-negative-stack/)

但这会比较不同的地区。因此，不是每个年龄组和性别都有一个条形图，而是有 3 个条形图，每个代表一个不同的区域。

到目前为止我所拥有的是这个，但我不确定我是否朝着正确的方向前进。

[http://jsfiddle.net/YCxgr/](http://jsfiddle.net/YCxgr/)

如您所见，给定年龄类别和区域的条形图彼此不对齐：我想要的是使区域的条形图针对两种性别正确对齐，以便它们显示为 3 个条形图（每个区域一个) 而不是 6\. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T13:03:34.767

为你准备一个 jsFiddle 现在回答你的问题

```
 series: [{
    name: 'Region 1',
    zIndex: 1000,
    data: [[0, -3 ],[0,3],[1, -5] ,[1,5],[2, -4],[2,4],[3, -3],[3,3]]
},{
    name: 'Region 2',
    data: [[0, -4] ,[0,4],[1, -2],[1,2],[2, -6],[2,6],[3, -4],[3,4]]
},{
    name: 'Region 3',
    data:  [[0, -3],[0,3],[1, -5],[1,5],[2, -4],[2,4],[3, -3],[3,3]]
}] 
```

[工作的jsFiddle](http://jsfiddle.net/minagabriel/YCxgr/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-12T13:36:19.257

当我今天查看示例时，只有原始的普通金字塔示例有效。另一个在结果窗格中没有显示任何内容。

我注意到缺少 highcharts 库引用，并且 jquery 版本在 1.4.2 上。

我通过添加引用修复了这两个问题：

```
<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script> 
```

并选择 jquery 1.7.2 版。现在他们（再次）显示金字塔。看：

1.  [原创海报的多柱金字塔尝试](http://jsfiddle.net/RSchreurs/3R2aL/)
2.  [修复了答案中的多列金字塔](http://jsfiddle.net/RSchreurs/YCxgr/13/)

我希望这可以帮助其他对示例感兴趣的人。

# javascript - 如何使用 javascript 添加日期？

> ID：11343939
> 
> 赞同：54
> 
> 时间：2012-07-05T12:02:41.507
> 
> 标签：javascript, date-format

Javascript 绝对不是我的强项。我已经尝试了几个小时，并且似乎在某处遇到了日期格式问题。

我有一个表单，其中用户选择了一个日期（dd/mm/yyyy），然后将采用该日期并添加 2 周，然后将日期复制到另一个表单字段。

我在下面的最新尝试甚至没有添加日期，只是将一个表单字段中的选定日期复制到另一个，如果我选择'03/02/2012'，它会输出'Fri Mar 02 2012 00:00:00 GMT+0000 （格林威治标准时间）'，因此它以美国格式以及完整日期输出。如何让它以相同的格式输出并增加 2 周？

```
function LicenceToOccupy(acceptCompletionDate)
{
    var date1 = new Date(acceptCompletionDate);
    document.frmAccept.acceptLicence.value = date1;

} 
```

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-07-05T12:14:38.800

你可以这样做 ：

```
let numWeeks = 2;
let now = new Date();
now.setDate(now.getDate() + numWeeks * 7);
alert(now); 
```

[你可以在这里](http://jsfiddle.net/d30med19/)看到小提琴。

根据[MDN 中的文档](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/setDate)

> setDate() 方法设置 Date 对象相对于当前设置月份的开始的日期。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-11-10T06:29:46.810

这本身可能无法回答问题，但可以使用这些公式找到解决方案。

`6.048e+8`= 1 周（以毫秒为单位）

`Date.now()`= 现在以毫秒为单位

`Date.now() + 6.048e+8`= 从今天起 1 周

`Date.now() + (6.048e+8 * 2)`= 从今天起 2 周

`new Date( Date.now() + (6.048e+8 * 2) )`= 从今天开始 2 周的日期对象

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-05T12:10:09.617

您正在分配`date1`一个 Date 对象，它*代表*您传递给它的字符串。您在`acceptLicense`值中看到的是`toString()`日期对象的表示（尝试`alert(date1.toString())`查看此内容）。

要根据需要输出，您必须使用字符串连接和[各种`Date`方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/#Methods)。

```
var formattedDate = date1.getDate() + '/' + (date1.getMonth() + 1) + '/' + date1.getFullYear(); 
```

增加 2 周时，应在当前日期上增加 14 天；

```
date1.setDate(date.getDate() + 14); 
```

...这将自动处理月份增加等。

最后，你会得到;

```
var date1 = new Date(acceptCompletionDate);
date1.setDate(date1.getDate() + 14);
document.frmAccept.acceptLicence.value = date1.getDate() + '/' + (date1.getMonth() + 1) + '/' + date1.getFullYear(); 
```

**NB** JavaScript 中的月份是 0 索引的（1 月 = 0，12 月 = 11），因此 `+1`是月份。

**编辑**：为了解决您的评论，您应该`date`按如下方式构造，因为`Date`参数应该是“表示 RFC2822 或 ISO 8601 日期的字符串”。（[见这里](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/parse)）。

```
var segments = acceptCompletionDate.split("/");
var date1 = new Date(segments[2], segments[1], segments[0]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-02T12:05:17.530

```
var d = new Date("2019-08-01");
d.setDate(d.getDate()+parseInt(7)); 
```

这里 7 是您要在日期中添加的天数

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T12:30:31.940

要使用 14 解析特定`dd/mm/yyyy`格式并增加天数，您可以执行拆分部分的操作，并使用指定的 y/m/d 创建日期对象。（立即增加天数）提供分隔符始终为`-`，以下应该有效：

```
function LicenceToOccupy(acceptCompletionDate)
{
    var parts = acceptCompletionDate.split("/");
    var date1 = new Date(parts[2], (parts[1] - 1), parseInt(parts[0]) + 14); //month 0 based, day: parse to int and increment 14 (2 weeks)
    document.frmAccept.acceptLicence.value = date1.toLocaleDateString(); //if the d/m/y format is the local string, otherwise some cusom formatting needs to be done

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-05T12:10:30.147

这应该可以满足您的需求。

```
function LicenceToOccupy(acceptCompletionDate)
{
    var date1 = new Date(acceptCompletionDate);
    date1.setDate(date1.getDate() + 14);
    document.frmAccept.acceptLicence.value = date1.getDate() + '/' + (date1.getMonth() + 1) + '/' + date1.getFullYear();
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-05T19:26:07.553

只需对 Toast 的答案进行一些最低限度的修改，您就会得到您正在寻找的确切格式**dd/mm/yyyy**：

```
function LicenceToOccupy(acceptCompletionDate)
{
    var date1 = new Date(acceptCompletionDate);
    date1.setDate(date1.getDate() + 14); //This adds the two weeks

    var day = date1.getDate() 9 10 ? date1.getDate() : '0' + date1.getDate();
    var month = date1.getMonth() >= 9 ? date1.getMonth() + 1: '0' + date1.getMonth();

    document.frmAccept.acceptLicence.value = day + '/' + month + '/' + date1.getFullYear();
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-07-05T12:14:47.620

一切都在[那里](http://www.w3schools.com/jsref/jsref_obj_date.asp)！

```
 date1.toLocaleDateString() 
```

这将在客户端约定中将 date1 作为字符串返回

要创建一个多 2 周的新日期 date2（2 周 = 2*7*24*60*60 秒）：

```
 var date2 = new Date(date1 + 60*60*24*7*2); 
```

# android - Android LVL 库 - 市场许可

> ID：11343941
> 
> 赞同：0
> 
> 时间：2012-07-05T12:02:43.820
> 
> 标签：android, google-play, android-lvl

我正在尝试使用 Google LVL 许可库。我已经从 Android SDK Manager 下载了这个库，但是当我尝试将它导入到我的项目中时，我得到了它不存在的错误。

我的导入如下：

```
import com.android.vending.licensing.AESObfuscator;
import com.android.vending.licensing.LicenseChecker;
import com.android.vending.licensing.LicenseCheckerCallback;
import com.android.vending.licensing.ServerManagedPolicy; 
```

我会很感激你的帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T15:03:44.333

看看这个[教程](http://developer.android.com/guide/google/play/licensing/setting-up.html#download-lvl)。设置许可验证库的部分：

> 将 LVL 下载到您的计算机后，您需要在开发环境中将其设置为 Android 库项目或将库源直接复制（或导入）到现有应用程序包中。通常，建议使用 LVL 作为库项目，因为它可以让您在多个应用程序中重用您的许可代码，并且随着时间的推移更容易维护它。请注意，LVL 并非设计为单独编译并作为静态 .jar 文件添加到应用程序中。

# c - 函数地址一致？

> ID：11343945
> 
> 赞同：1
> 
> 时间：2012-07-05T12:02:55.340
> 
> 标签：c, function, pointers, function-address

这是在 Windows 7 64 位上使用 C 语言和 VC++ 2010。

有没有办法可靠且一致地访问函数的地址（c 链接），以便在每次运行程序时它都是相同的地址？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T12:09:44.373

如果您在运行时获得了地址，那么它应该在该运行中保持稳定。下次*可能*会有所不同。

操作系统中的某些功能可能会导致您的可执行代码被加载到不可预测的地址（部分是为了安全，部分是因为两个 DLL 可能需要相同的基地址）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-12T18:14:02.317

不，因为对于大多数现代操作系统，不能保证每次都将函数加载到相同的地址。在某些嵌入式设备上，如果您的链接器文件为该函数定义了一个固定地址，您也许可以避免这种情况。

但是为什么要打扰呢？您可以像获取变量一样获取函数的地址：

```
void func(int a)
{
    a=5;
}

void main()
{
    // In case you don't know or don't care about the signature of the function.
    void* p = func;

    // In case you do care and might want to call the function
    // at some point through the pointer.
    void (*f)(int) = func;

    printf("%p %p",p, f);
} 
```

# android - 有没有办法在我的应用程序中保留将安装在 SD 卡上的视频文件？

> ID：11343959
> 
> 赞同：0
> 
> 时间：2012-07-05T12:03:28.210
> 
> 标签：android, file, sd-card, android-sdcard

我是 Android 开发的新手。我有很多大小约为 500MB 的视频。我一直在测试我的应用程序，但我总是通过 USB 电缆而不是直接通过我的应用程序传输视频。有没有办法将这些视频嵌入到我的应用程序中，以便它们自动传输到 SD 卡？我只需要知道这是否可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:29:01.767

实践是，那个开发者（特别是在游戏部分），让用户下载一个小的基本应用程序，它通过网络下载其余的（如果 WiFi 可用），这样用户就不必下载 sh*tload如果他想安装您的应用程序，比如说他在外面、使用 GPRS/UTMS 或漫游时...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:34:43.663

我认为根本不可能将所有视频存储在您的应用程序中并从中制作最终的 APK。

因为，Android 市场有**50MB**的大小限制。见这里[http://android-developers.blogspot.in/2010/12/android-market-client-update.html](http://android-developers.blogspot.in/2010/12/android-market-client-update.html)

# android - 为什么 Context 类没有 startActivityWIthResult 方法？

> ID：11343963
> 
> 赞同：0
> 
> 时间：2012-07-05T12:03:49.770
> 
> 标签：android, android-intent

我有一个应用程序，其中包括一个通过公共类公开一组方法的库。在内部，这个库使用应用程序传递给它的上下文。

**问题**：由于库中的公共类没有扩展 Activity，因此方法使用应用程序传递给它的 Context 对象。在这种情况下，如何将结果/数据传回应用程序？上下文对象没有 startActivityWithResult() 方法。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:06:47.747

没有像`startActivityWithResult()`Activity 这样的方法，方法是`startActivityForResult()`.

如果您的**上下文是 Activity**引用，那么您可以使用`startActivityForResult()`该类中的方法。就像使用一样，

`((Activity)context).startActivityForResult();`

# java - 使用 cql 从 cassandar 中选择数据

> ID：11343972
> 
> 赞同：0
> 
> 时间：2012-07-05T12:04:19.133
> 
> 标签：java, jdbc, cassandra, cql

我正在使用 cassandra-jdbc 对 cassandra 中的数据执行操作，但是当我运行这个简单的程序时出现异常。

这是我的代码：

```
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.*;
import javax.sql.*;
public class Operations 
{
        public static void main(String[] args){ 
        try
        {
            Class.forName("org.apache.cassandra.cql.jdbc.CassandraDriver");
            Connection con =     DriverManager.getConnection("jdbc:cassandra://localhost:9160/temp");

            String qry = "select name FROM cql";

            Statement smt = con.createStatement();
            ResultSet resultSet = smt.executeQuery(qry);
            System.out.println(resultSet);
            while(resultSet.next())
            {
                System.out.println(resultSet);
            }

        }
        catch(Exception e)
        {
            System.out.println(" : "+e.getMessage());
        }
            }
} 
```

我得到：无法将“名称”解析为十六进制字节

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T22:55:14.967

尝试：

```
import static org.apache.cassandra.utils.Hex.bytesToHex;
...

String name = bytesToHex("name".getBytes());
String qry = "select '" + name + "' FROM cql"; 
```

# python - 如何在scrapy python中使用蜘蛛名称动态创建csv文件

> ID：11343973
> 
> 赞同：2
> 
> 时间：2012-07-05T12:04:29.617
> 
> 标签：python, csv, scrapy, pipeline, web-crawler

我正在研究scrapy并抓取了一个网站并获取了所有信息

实际上我有 3 个具有不同数据的蜘蛛，我在同一个文件夹中创建了这 3 个蜘蛛，结构如下

```
scrapy.cfg
myproject/
    __init__.py
    items.py
    pipelines.py
    settings.py
    spiders/
         __init__.py
           spider1.py
           spider2.py
           spider3.py 
```

现在，当我们运行该特定蜘蛛时，我需要通过管道创建一个具有该蜘蛛名称的 csv 文件，例如

`spider1.csv,spider2.csv,spider3.csv and so on`（蜘蛛不限可能更多）>根据蜘蛛的数量和蜘蛛的名字我要创建csv文件

这里我们是否可以在 pipeline.py 中创建多个管道？如果存在多个蜘蛛，如何动态创建带有蜘蛛名称的 csv 文件

在这里，我有 3 个蜘蛛，我想一次运行所有 3 个蜘蛛（通过使用 scrapyd），当我运行所有 3 个蜘蛛时，应该创建 3 个带有蜘蛛名称的 csv 文件。我想安排这个蜘蛛每 6 小时运行一次。如果我的解释有问题，请纠正我并让我知道如何实现这一点。

提前致谢

**编辑后的代码：** 例如，我只粘贴了 spider1.py 的代码

**spider1.py 中的代码**：

```
class firstspider(BaseSpider):
    name = "spider1"
    domain_name = "www.example.com"
    start_urls = [
                   "www.example.com/headers/page-value"
                 ]
def parse(self, response):
    hxs = HtmlXPathSelector(response)
            ........
            .......
            item = Spider1Item()
            item['field1'] = some_result
            item['field2'] = some_result
            .....
            .....
            return item 
```

**Pipeline.py 代码：**

```
import csv
from csv import DictWriter

class firstspider_pipeline(object):

def __init__(self):
    self.brandCategoryCsv = csv.writer(open('../%s.csv' % (spider.name), 'wb'),
    delimiter=',', quoting=csv.QUOTE_MINIMAL)
    self.brandCategoryCsv.writerow(['field1', 'field2','field3','field4'])

def process_item(self, item, spider):
    self.brandCategoryCsv.writerow([item['field1'],
                                item['field2'],
                                item['field3'],
                                item['field4'])
    return item 
```

正如我之前所说，当我使用蜘蛛名称运行上述蜘蛛时，将动态创建一个带有蜘蛛名称的 csv 文件.....但是现在，如果我运行其余的蜘蛛，例如`spider2,spider3,spider3`，具有相应蜘蛛名称的 csv 文件应该产生。

1.  上述代码是否足以满足上述功能？

2.  我们是否需要创建另一个管道类来创建另一个 csv 文件？（是否可以在单个 pipeline.py 文件中创建多个管道类？）

3.  如果我们在单个 pipeline.py 文件中创建多个管道类，如何将特定蜘蛛与其相关的管道类匹配

我想在保存到数据库时实现相同的功能，我的意思是当我运行 spider1 时，spider1 的所有数据都应该保存到数据库中，并保存到具有相关蜘蛛名称的表中。这里对于每个蜘蛛我都有不同的 sql 查询（所以需要编写不同的管道类）

1.  这里的含义是当我们一次运行多个蜘蛛时（使用scrapyd），应该生成多个csv文件及其蜘蛛名称，并且应该使用蜘蛛名称创建多个表（保存到数据库时）

抱歉，如果在任何地方错了，我希望它得到很好的解释，如果没有，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T09:40:56.137

你通常是在正确的轨道上。

但有几点我可以立即指出：

1.  您可能不需要（=不应该使用）课程！Python 不是 Java。如果您的类仅包含 2 个方法，而第一个是`__init__`-method，那么您几乎可以肯定不需要类，但函数就可以了。更少的混乱 = 更好的代码！

2.  SO 不适合进行一般的代码审查。改用[codereview](https://codereview.stackexchange.com/)。SO 用户是一群友好（大部分）且乐于助人的人，但他们不喜欢编写您的代码。他们喜欢解释、建议和纠正。因此，尝试实现您的应用程序，如果遇到麻烦您自己无法解决，请再次回来寻求建议。如上所述，您在概念上处于正确的轨道上，只需尝试实现它。

3.  您似乎对班级概念有误解。至少只要它是 python 类：

    1.  据我所知，您不需要 BaseSpider 类。基类和子类之间有什么区别？派生类不会使您的程序面向对象，或者更好，或者其他什么。搜索[Liskovs 原则](https://stackoverflow.com/questions/56860/what-is-the-liskov-substitution-principle)以大致了解子类何时适用于 python。（这有点相反的逻辑，但它是查看是否应该继承或更改方法的最快方法之一。）

    2.  在类声明之后立即声明的 python 类变量和在`__init__`方法中初始化的实例变量之间存在明显差异。类变量在类的所有实例之间**共享**，其中实例变量对各个实例是私有的。你几乎从不想使用类变量，这是一个*Singleton-Pattern*，在大多数情况下你想避免这种情况，因为它会在调试中引起头痛和不满。

因此我会修改你的`Spider`-class 像：

```
class Spider(object):
    def __init__(self, name, url=None):
        self.name = name
        self.domain_name = url
        self.start_urls = [url]
        ...

crawlers = [Spider('spider %s' %i) for i in xrange(4)] #creates a list of 4 spiders 
```

但也许您正在使用声明性元类方法，但我无法从您发布的代码中看到这一点。

如果你想并行运行你的爬虫，你应该考虑`threading`-module。它用于连续的 I/O 操作，而不是`multiprocessing`用于并行计算的 -module。

你在概念上走在正确的轨道上。将您的项目分解成小块，并在每次遇到错误时返回。

只是不要指望在这样的问题上得到完整的答案：“我不想重新创建谷歌，我怎样才能以最好的方式和最短的时间做到这一点！” ;-)

# php - php动态页面分页

> ID：11343980
> 
> 赞同：0
> 
> 时间：2012-07-05T12:05:01.417
> 
> 标签：php

所以我有这个页面，其中列出了网站上的“.txt”文件内容。我试图对其进行分页，但它不起作用。我希望每页只有一个故事（一个故事是 data[0] . data[1]） 该页面通过 ajax 被调用到浏览器。这是我的代码：

```
<?php
$dataArray = array();
//Number of chars for the string
$num = 500;
$dir = '../php/biralas_tortenetek/';
$willcount = readdir(opendir($dir));
$totfiles = count(readdir(opendir($dir)));
//Check if </div>DIR e</div>xists
if ($handle = opendir($dir)) {
    //Loop over the directory
    while (false !== ($file = readdir($handle))) {
        //Strip out the . and .. files
        if ($file != "." && $entry != "..") {
            //Store file contents
            $filecontent = file_get_contents($dir . $file);
            //Split the content and store in array
            $length = strlen($filecontent);
            $dataArray[] = array(substr($filecontent, 0, $num), substr($filecontent, $num, $length ));

        }
    }
    //close the dir
    closedir($handle);
}

?><?php 
$page = isset($_GET['page']) ? $_GET['page']-1 : 0;
echo "<br/>";
for($x=$page*1; $x < $totfiles && $x < ($page+1)*12; $x++)
{
    foreach($dataArray as $data) { ?>
        <div class="visible">
            <?php echo $data[0] . $data[1]; ?>
        </div><?php } ?>
</div>
<?php }
for($page=1; ($page-1)*12 < $totfiles; $page++)
{
    echo "<div class='lapozo'><a onclick='story_changepage($page);' href='../html/blog.php#tortenetek?page=$page'>$page</a></div>"; 
}
?> 
```

同样，目标是每页只有一个故事。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:20:22.017

第一种解决方案：

```
$willcount = readdir(opendir($dir));
$i = 0;
//Check if </div>DIR e</div>xists
if ($handle = opendir($dir)) {
    //Loop over the directory
    while (false !== ($file = readdir($handle))) {
        //Strip out the . and .. files
        if ($file != "." && $entry != "..") {
            //Store file contents
            $filecontent = file_get_contents($dir . $file);
            //Split the content and store in array
            $length = strlen($filecontent);
            // store file as indexed item of array
            $dataArray[$i++] = array(substr($filecontent, 0, $num), substr($filecontent, $num, $length ));
        }
    }
    //close the dir
    closedir($handle);
}
// store total files in dir
$totfiles = $i;

$page = isset($_GET['page']) ? $_GET['page']-1 : 0;
echo "<br/>";

for($x=$page*12; $x < $totfiles && $x < ($page+1)*12; $x++) {
    $data = $dataArray[$x];
    ?>
        <div class="visible">
            <?php echo $data[0] . $data[1]; ?>
        </div>
<?php 
} 
```

CUT 2nd Solution: // 首选它比第一个解决方案使用更少的内存

```
$willcount = readdir(opendir($dir));
$i = 0;
// get page 
$page = isset($_GET['page']) ? $_GET['page']-1 : 0;

//Check if </div>DIR e</div>xists

if ($handle = opendir($dir)) {
    //Loop over the directory
    while (false !== ($file = readdir($handle))) {
        //Strip out the . and .. files
        if ($file != "." && $entry != "..") {
            $i ++; 
            // if our page not first, skip add
            if ($i <= $page * 12) continue;
            // if we reach end of the page, break
            if ($i > ($page + 1)* 12) break;
            //Store file contents
            $filecontent = file_get_contents($dir . $file);
            //Split the content and store in array
            $length = strlen($filecontent);
            $dataArray[] = array(substr($filecontent, 0, $num), substr($filecontent, $num, $length ));
        }
    }
    //close the dir
    closedir($handle);
}
// store total files in dir
$totfiles = $i;

echo "<br/>";

foreach($dataArray as $data) {
    ?>
        <div class="visible">
            <?php echo $data[0] . $data[1]; ?>
        </div>
<?php 
} 
```

# visual-studio-debugging - 在 Visual Studio C++ 调试中，如何在即时窗口和本地窗口中转换有香味的浮点值

> ID：11343981
> 
> 赞同：1
> 
> 时间：2012-07-05T12:05:08.947
> 
> 标签：visual-studio-debugging

在 Visual Studio C++ 中，如何在即时窗口和本地窗口中转换有香味的浮点值，例如 2.6784184492221229e+271（包括去规范化的数字）。

例如，在 Locals 窗口中，VS c++ 将显示类型 double 为 2.6784184492221229e+271，如果我立即输入 ?vara，它将显示为 2.6784184492221229e+271

我们如何将其转换为直接可读的值？1.8（对不起，我不知道它叫什么）。

# java - 如何在网页中显示java类的代码（jsp）

> ID：11343984
> 
> 赞同：0
> 
> 时间：2012-07-05T12:05:27.297
> 
> 标签：java, jsp

我正在开发一个包含现有 java 类名列表的网页：

因此，当用户单击 java 类名称的链接时，会打开一个包含该 java 类代码的新网页。所以要做到这一点，我将使用流来读取文件（java 类）并将其写在网页上。你有另一个优化的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T12:09:45.200

使用`<c:import />`JSTL 并将内容嵌入`<pre></pre>`标签中。

```
<c:import var="content" url="File.java"/>
<pre>
 <c:out value="${content}"/>
</pre> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T12:07:36.133

只需像阅读任何其他文本文件一样阅读 .java 文件。请注意确保您使用 .java 文件而不是编译的 .class 文件来执行此操作。

然后，您可以选择格式化它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T12:12:14.157

There is a new project called back2Code, which will decompile class files back to source code.

[http://code.google.com/p/back2code/](http://code.google.com/p/back2code/)

1.  Store the class files a location in server
2.  Read the appropriate file.
3.  Use the API to decompile it to the source code.
4.  Display the source code , appropriately.

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-05T12:08:29.557

为每个 java 类生成一个静态 html 页面，然后单击简单地打开该页面。

# python - 在python中使用openstreetmap

> ID：11343987
> 
> 赞同：12
> 
> 时间：2012-07-05T12:05:37.403
> 
> 标签：python, matplotlib, openstreetmap

我想要做的是使用 python 生成静态图像（例如 png）并使用 openstreetmap 瓷砖作为背景。

Mathplotlib 和 Basemap 几乎就是我想要的。问题是能够使用 OSM 瓷砖作为背景。我对[http://stevendkay.wordpress.com/2010/02/24/plotting-points-on-an-openstreetmap-export/中建议的方法不满意](http://stevendkay.wordpress.com/2010/02/24/plotting-points-on-an-openstreetmap-export/)

我发现的最接近的是在这个答案中，但使用 R，而不是 python [Plotting points from a data.frame using OpenStreetMap](https://stackoverflow.com/questions/11056738/plotting-points-from-a-data-frame-using-openstreetmap/11059340#11059340)

我错过了任何明显且简单的解决方案吗？

谢谢你的帮助

编辑：这个问题提出了许多工具，但似乎没有一个符合我的需要[如何使用 Python 显示 OSM 磁贴？](https://stackoverflow.com/questions/11321718/how-can-i-display-osm-tiles-using-python/11325174#11325174)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:41:59.323

您忽略了 OSM 网站上的“导出”选项卡，该选项卡能够生成具有所需尺寸和地图范围的静态图像。看看[http://wiki.openstreetmap.org/wiki/Export](http://wiki.openstreetmap.org/wiki/Export)

请注意，生成静态图像是一个资源密集型过程，如果您执行大量请求或滥用此功能，OSM 系统管理员将不屑一顾。不幸的是，这意味着如果您尝试制作大量图像，则必须找到另一种解决方案。

顺便说一句，您在顶部绘制的数据被正确投影到 EPSG:3857 而不仅仅是原始纬度/经度坐标，对吧？原始纬度/经度数据在较大的缩放级别上看起来会失真。

# java - 在android中创建视频

> ID：11343989
> 
> 赞同：1
> 
> 时间：2012-07-05T12:05:39.210
> 
> 标签：java, android, video

使用 JAVA 在 android 平台上创建视频的理想方法是什么？

我尝试使用 ffmpeg，但在编译它时遇到了麻烦。我知道在 iOS 中有一个类支持所有这些东西，它叫做：AVFoundation。android 是否有用于编码/解码、缓冲区的类似 API？

我的目标是在 Android 中创建一个视频，在 Android 上做这样的事情似乎太难了.....对于这些我不知道的事情还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:12:02.623

你可以试试`libav`框架。你可以参考这个链接。

[从图像创建视频](https://stackoverflow.com/questions/8170523/create-video-from-images)

但这是用 C 开发的。所以你必须通过 JNI 访问它

# ruby - 处理 .php 路由时出现 Sinatra 错误

> ID：11343991
> 
> 赞同：0
> 
> 时间：2012-07-05T12:05:51.113
> 
> 标签：ruby, sinatra

我正在创建一个 Sinatra 应用程序来替换旧的基于 PHP 的应用程序。

```
get '/page.php' do
  # ... do something
end 
```

我正在尝试定义这样的路线，但我得到“Sinatra 不知道这个小曲”。错误页面。

在页面顶部，我有这个

```
configure do
  mime_type :php, 'text/html'
end 
```

知道如何告诉 Sinatra 使用包括文件扩展名在内的整个路径作为其中的一部分？

# web-services - 使用 cxf 在 jax-rs webservice 中处理身份验证和授权

> ID：11343996
> 
> 赞同：2
> 
> 时间：2012-07-05T12:06:14.627
> 
> 标签：web-services, cxf, jax-rs

我有一个带有 jsps 的 webapp。我没有使用任何 struts 或 mvc 框架。我们使用 Apache CXF 构建了 JAX-RS 服务。

现在我想做以下

1.  允许用户使用用户名和密码登录。
2.  对于所有后续对 web 服务的调用，应使用相同的身份验证信息。
3.  登录用户有一些详细信息（个人资料照片、全名），我想在整个会话中保持不变。
4.  此外，还定义了它的角色。根据角色，仅允许某些 jax-rs 调用。
5.  JSP 中还使用角色来限制对功能的访问。
6.  可以在外部访问 Web 服务，因此应该使用身份验证和授权信息。

据我了解，我们不应该在 jax-rs 服务中使用会话。处理上述情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T02:09:06.477

最好的方法取决于你如何估计它。我这样做的方法是

1.  在同一个实例上运行 Rest 服务和 JSP
2.  使用 web.xml 和 CXF 设置安全策略，允许用户/pw 身份验证和授权，ROLES 绑定到 jax-rs url 和 JSP url。
3.  基于2，可以在外面直接调用jax-rs服务，但需要用户/密码，如你指定。

希望这可以帮助你一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:33:54.247

将 cxf 安全验证视为任何其他 http 或 https 验证。您必须拦截请求并将其传递给其余服务。您可以使用任何工具，例如 siteminder，也可以编写 CXF 拦截器来进行自己的安全验证。在拦截器中，您可以调用 SSO 类型的令牌生成器服务器以防您拥有基础设施，或者如果您的架构是以这种方式构建的，则调用数据库。您可以使用缓存来减少资源命中，并可以查看自定义或休眠缓存。启用 Https 必须在服务器配置中完成。如果您有证书，则可以使用相同的证书，否则您可以使用 openssl 生成自己的证书。

# android - android:parentActivityName vs onBackPressed startActivity

> ID：11343997
> 
> 赞同：0
> 
> 时间：2012-07-05T12:06:18.540
> 
> 标签：android, android-activity, start-activity

在Android应用程序中，有人知道
**有什么区别：**

*   在 Activity 和 startActivity 中覆盖**onBackPressed**
**对比**

*   将“ **android:parentActivityName** ”放在活动标签的清单中

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:27:48.947

[机器人：父活动名称](http://developer.android.com/guide/topics/manifest/activity-element.html)：

> 当用户按下操作栏中的向上按钮时，系统读取该属性以确定应该启动哪个活动。系统还可以使用此信息将活动的回栈与 TaskStackBuilder 合成。

***此属性是在 API 级别 16 中引入的。***

表示如果您的 Appliction 中有三个活动 A、B 和 C。当您从活动 A 启动活动 B 和从活动 B 启动 C 时，您已在 Manifast 中为活动 C 设置了 android:parentActivityName=".A"。然后用户按下后退按钮从活动 C.user 自动转到活动 A 而不是活动 B。

* * *

[onBackPressed](http://developer.android.com/reference/android/app/Activity.html)：

> 当活动检测到用户按下返回键时调用。默认实现只是完成当前活动，但您可以覆盖它来做任何您想做的事情。

当用户从任何活动中按下返回键时调用。onBackPressed 完成当前活动并恢复上一个活动。例如，如果您从活动 A 启动活动 B，从活动 B 启动活动 C。如果用户从活动 C 按下返回按钮，则系统完成当前活动 C 并恢复 B。