# StackOverflow 问答 11854000-11854999

# iphone - iOS：增加选项卡项目的对比度

> ID：11854000
> 
> 赞同：0
> 
> 时间：2012-08-07T20:55:33.883
> 
> 标签：iphone, ios, ipad, tabitem, contrast

正如您在此图像中看到的那样，很难看到我使用的深蓝色背景的标签项图像和文本。有没有办法让它们在不被选中时更亮？

![在此处输入图像描述](../Images/d4092b7600b0f9f478aff3dc6f9cc98a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:02:00.973

我假设您的目标是 iOS 5，这意味着您可以利用`UIAppearance`API。在这种情况下，您需要做的不仅仅是设置标签栏的背景图片；您需要为每个标签栏项目设置选定和未选定的“完成”图像。“完成”是指在显示您的图像之前不会应用默认的“闪耀”效果；它们将按原样显示。

[这是一个很棒的教程](http://felipecypriano.com/2012/02/27/how-to-customize-uitabbar-on-ios-5/)，展示了您可以应用的所有自定义项。

# xslt - xsl:param 和 xsl:variable 之间的区别

> ID：11854011
> 
> 赞同：36
> 
> 时间：2012-08-07T20:56:10.340
> 
> 标签：xslt

我正在考虑在定义将在另一个 xsl 文件中调用的 xsl:template name = myTemplate 时使用其中一个。

旧代码在 xsl:template match="legacyTemplate" 中使用时似乎使用 'xsl:variable'

那么在 xsl:template name=myTemplate 中使用 xsl:param 和 xsl:variable 有什么区别？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-08-07T21:06:15.283

不同之处在于 an 的值`xsl:param`可以在声明它的上下文之外设置。例如，请参阅：

```
<xsl:template ...>
   <xsl:param name="p" select="'x'" />
   <xsl:variable name="v" select="'y'" />
... 
```

那么你知道那`$v`将永远给你字符串`'y'`。但是对于`$p`字符串`'x'`只是一个默认值：如果模板被调用，或者包含如下指令，您将看到不同的 `xsl:apply-templates`值`xsl:call-template`：
`<xsl:with-param name="p" select="'not x'" />`

`<xsl:param>`也可以`xsl:template`在样式表的顶层外部使用。可以在调用 XSLT 处理器时设置此类参数的值。这是如何完成的取决于处理器以及您是从命令行还是通过程序调用它。

# javascript - Javascript启用/禁用按钮不起作用

> ID：11854012
> 
> 赞同：0
> 
> 时间：2012-08-07T20:56:11.127
> 
> 标签：javascript

在我们开始之前，我在这里阅读了很多与该主题相关的其他帖子，例如； [如何使用 javascript 禁用和重新启用按钮？](https://stackoverflow.com/questions/8394562/javascript-disable-and-re-enable-a-button) 尽管这些帖子似乎都没有解决我的问题。

我正在使用 html、css 和 javascript 在 Dreamweaver cs6 中创建一个移动应用程序。该应用程序很简单，包括一个控制运行计时器的开始和停止按钮（即使手机关闭，此计时器也会计数，因为它计算存储在数据库中的日期时间值的时间差。）

我想要的是，当计时器正在运行以禁用启动按钮并启用停止按钮时，以及当计时器未运行以使其反转时。我尝试了几种不同程度的方法。

```
function runningTimer()
{
var timerStarted = localStorage.getItem("timerStarted");    
if (timerStarted == "true")
{   
    document.getElementById("runningTime").style.color="#00CC00";
    document.getElementById("stopButton").removeAttribute('disabled');
    document.getElementById("startButton").setAttribute("disabled", "disabled");

db.transaction(function(tx) {
    tx.executeSql("SELECT * FROM temp WHERE tempID=?", [1], function(tx, result) {
        for (var i = 0; i < result.rows.length; ++i) {
            var row = result.rows.item(i);
            var sqlStartTime = row['startTime'];
            }
        if (!result.rows.length)
        {
            alert("Error Code 420: Start Time not found.");
        }
    var currentTime = new Date();
    var jsStartTime = convertSQLtoJS(sqlStartTime);
    var shiftTimeMS = currentTime - jsStartTime;
    var shiftTime = new Date(null, null, null, null, null, null, shiftTimeMS);
    var shiftHours = shiftTime.getHours();
    if (shiftHours < 10)
        {
            shiftHours = "0" + shiftHours;
        }
    var shiftMinutes = shiftTime.getMinutes();
    if (shiftMinutes < 10)
        {
            shiftMinutes = "0" + shiftMinutes;
        }
    var shiftSeconds = shiftTime.getSeconds();
    if (shiftSeconds < 10)
        {
            shiftSeconds = "0" + shiftSeconds;
        }
        document.getElementById("runningTime").innerHTML = (shiftHours + ":" + shiftMinutes + ":" + shiftSeconds);
      });
});
}
else if (timerStarted == "false")
{
    document.getElementById("runningTime").style.color="#FF0000";
    document.getElementById("stopButton").setAttribute("disabled", "disabled");
    document.getElementById("startButton").removeAttribute('disabled'); 
}
else
{
    document.getElementById("stopButton").setAttribute("disabled", "disabled");
    document.getElementById("startButton").removeAttribute('disabled');
} 
```

}

上面的代码在你第一次使用时不起作用。停止或开始按钮在开始时被正确禁用（取决于天气或加载页面/应用程序时计时器是否已经运行。）但是一旦你点击停止或开始它不会重新启用按钮，直到你刷新浏览器中的页面或关闭并重新打开智能手机上的应用程序。所以，我在开始和停止按钮上添加了一个 onClick 页面加载，它在 Google Chrome 中完美运行，但它在智能手机上不起作用。

我也尝试了以下也无法正常工作的方法；

```
document.getElementById("stopButton").disabled=true;
document.getElementById("startButton").disabled=false; 
```

我有几个朋友帮我查看了代码，每个人似乎都认为它应该可以工作，所以我们都在摸索可能是什么问题，因为一旦你重新加载页面，一旦一切正常。

任何帮助都会很棒，我确信我刚刚做了一些愚蠢的事情，但请告诉我！

亲切的问候，米切尔勒索姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T07:22:09.873

好吧，自从我问这个问题以来已经有一段时间了，我仍然没有接近弄清楚。我决定完全删除该功能。不是真正的答案，但由于似乎没有解决方案，因此它是能够继续进行项目其余部分的唯一答案。

# java - JSF 问题与 selectInputText 中的默认值

> ID：11854016
> 
> 赞同：0
> 
> 时间：2012-08-07T20:56:19.810
> 
> 标签：java, jsf, request

我在搜索页面中遇到默认值问题。我将 JSF 与 IceFaces 一起使用。

首先，让我从我所拥有的开始。

我有一个搜索页面，它使用两个输入框员工姓名和员工编号进行搜索。

我有一个列表页面，其中列出了我搜索过的任何内容。它有编辑和重做按钮。

我有一个编辑页面，可以让我编辑并保存。它有保存和重做按钮。

**搜索页面**

员工姓名： ........

员工编号： ........

||搜索按钮||

**列表页面**

员工姓名

员工编号

员工位置

||编辑按钮|| ||重做​​||

**编辑页面**

员工姓名

员工编号

员工位置

||保存按钮|| ||重做​​||

**情景#1**

假设我在搜索页面中并输入有效的员工姓名和员工编号。在我点击搜索按钮后，它会转到列表页面。在我进入列表页面后，如果我按重做，它会将我定向到搜索页面，但这次搜索页面将自动具有我最近执行的搜索的默认值。（而不仅仅是空的输入框）

**情景#2**

假设我再次进入搜索页面并输入有效的员工姓名和员工编号。在我点击搜索按钮后，它会转到列表页面。在我进入列表页面并按编辑后，它会将我定向到编辑页面。一旦我进入编辑页面，假设我更改了员工的员工编号并点击保存（保存后我仍在列表页面上）。假设我点击了重做按钮，它再次将我重定向回搜索页面，但没有我最近执行的搜索的默认值（搜索页面将有空的输入框）

问题：

1）首先，我无法弄清楚一旦我重做（在初始搜索/场景＃1之后），JSF如何能够为搜索页面提供默认值。是否有内置的会话变量/请求变量。

2）现在对于第二种情况，它没有默认值，我不确定为什么它没有默认值。所以，基本上我想弄清楚他们用来填充输入文本框的 JSF 中的这个请求变量在哪里。

感谢您的帮助和支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:03:45.603

我认为您是在使用 FacesContext.getCurrentInstance().redirect() 在页面之间导航（而不是 history.back() 或 history.go(-1) ）。

如果您正在这样做，如果您移动或按下导航器中的刷新按钮，任何请求或视图变量都应该消失。

例如，如果您使用会话变量（这意味着您希望在页面之间保留它），则需要在重定向之前或在类的构造函数方法中对其进行清理。

**XHTML / JSP**

> < h:inputText value="#{class.search}" />

**爪哇**

> 公共类类{
> 
> ```
>  //this variable need to have the getter and setter
>     private String search;
>     public Class (){
>            //build a method that clean all your variables;
>            SessionBean.clean();
>     } 
> ```
> 
> }

我希望它有用。如果没有，请给我更多实施细节以帮助您。

# html - 边界半径在 ie 中表现异常

> ID：11854017
> 
> 赞同：4
> 
> 时间：2012-08-07T20:56:20.080
> 
> 标签：html, css, internet-explorer-9

我刚刚注意到我的工具栏的边框半径在 ie9 中不起作用。奇怪的是，有一个盒子阴影会弯曲，所以我不知道它发生了什么。在 IE 中，实际的工具栏 div 不是弯曲的，但它的盒子阴影是弯曲的。在所有其他浏览器中一切都很好，我知道 ie9 支持边框半径。

无论如何，CSS在下面。我已经去掉了所有的前缀和不需要的样式，所以只有盒子阴影和边框半径。这是一个包含所有样式的[jsfiddle](http://jsfiddle.net/haZXt/)。

更新

弄清楚出了什么问题。渐变已经停止在 IE 中工作的边界半径形式，所以我现在将在 IE 中禁用它。如果有人有办法保留它们和边界半径，那就太好了。我添加了渐变样式。

```
.membersbar {
             width:98%; background-color:#313131; 
             height:30px; padding-top:5px;
             border-bottom-right-radius:2em;
             position:fixed;
             top:0;  
             box-shadow:0 0 5px 5px #999; 

             filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr='#313131', endColorstr='#202020');
             background: -webkit-gradient(linear, left top, left bottom, from(#313131), to(#202020));
             background: -moz-linear-gradient(top,  #313131,  #202020);
            } 
```

这是head里的相关信息；

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />

      <!--[if IE]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
      <![endif]-->

</head> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:00:56.283

请验证您的主要 HTML 文档是否以

```
<!DOCTYPE HTML> 
```

IE 假设任何没有 DOCTYPE 标签的页面都是“旧的”非 HTML5 文档，并使用了一些奇怪的“兼容”模式，忽略了许多 CSS3 特性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T21:03:47.440

让您的 IE 使用最新的 IE 功能。将以下元标记（必须是第一个）添加到您的 HEAD 元素：

```
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
</head> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T23:06:17.333

我已经弄清楚发生了什么。我拥有的渐变（现在已编辑）阻止了边界半径在 IE 中的工作。我已将渐变添加到 css。如果有人有任何方法来保持渐变和边界半径会很好，否则我将不得不在 IE 中禁用渐变。

# javascript - 第一次请求时缺少 Javascript 制作的 cookie

> ID：11854019
> 
> 赞同：0
> 
> 时间：2012-08-07T20:56:21.577
> 
> 标签：javascript, jquery, asp.net, cookies

我制作了一个购物车，它可以创建一个购物车、添加产品并将其保存在一个名为“购物车”的 cookie 中。

当我单击将我发送到结帐页面的超链接时，我的 ASP.NET 应用程序无法访问 cookie。但是当我刷新页面时，cookie 会随请求一起发送。

有什么办法可以让我在第一次请求时随请求一起发送 cookie 吗？

谢谢！

编辑：

我的生命周期是：

使用 javascript 将带有产品的购物车添加到 cookie -> 用户点击购物篮 -> 我们显示购物篮

当用户最初单击购物篮时，对服务器的请求不包含 cookie。只有当用户刷新时，我才能在服务器上看到更新的购物车。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:03:11.537

我不相信这是可能的。HTTP 生命周期是，客户端请求 -> HTML / javascript -> 客户端 Post。由于 javascript 在第一次请求之后才会运行，所以我看不出如何在第一轮中获得 javascript 创建的 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T21:23:16.907

在您的 .Net 控制器中，您应该能够调用任何 cookie。

在这里使用 MVC 3 是我完成它的方式：

```
using System.Web;

HttpCookie cookieObjName = Request.Cookies.Get("yourCookieNameHere");

//Then you can get the value with:
cookieObjName.Value; 
```

您应该对数据进行某种形式的验证，以确保 cookie 未被篡改。

# windows-8 - 一些代码如何将输入焦点带入 Metro 应用程序？

> ID：11854023
> 
> 赞同：0
> 
> 时间：2012-08-07T20:56:39.363
> 
> 标签：windows-8, microsoft-metro

因此，我想从 Metro 应用程序外部编写另一个应用程序（或者实际上是一个脚本，在 powershell 中通过热键触发），它将输入焦点放在 Metro APP 上。对于常规应用程序，我可以找到进程然后获取 MainWindowHandle 并从那里开始，但对于 Metro 应用程序，我不能主窗口句柄始终为零。

我想做的是非常基本的。我在我的第二台显示器上将 onenoteMX “固定”或“捕捉”到一边，我正在处理我的业务，​​不时查看它，看看我接下来应该做什么，但是当我想编辑它时，我必须通过我所有的应用程序点击它，因为我不能让它集中注意力

但这个概念比我的用例更深入，比如 Metro 应用程序的自动化 UI 测试等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T23:01:56.420

你不能这样做。Metro 应用程序或 Win RT 应用程序不具备这些功能，并且彼此完全沙盒化。但是，有几种方法可以找到您打开的其他应用程序。

1) 使用触控界面，从屏幕左侧向内扫入，然后快速向后扫出。它将显示您当前拥有的所有应用程序的垂直列表。

2) 使用鼠标，将鼠标移动到左上角或左下角，然后向上（或向下）移动到屏幕中间。将出现相同的应用程序列表。

3) 最后，如果您从屏幕左侧拖入，它应该总是带回您运行的最后一个应用程序。很像 Alt-Tab。

# php - 启用 Gmagick PHP 模块会导致 ImageMagick (Imagick) 模块报告 0 支持的格式

> ID：11854027
> 
> 赞同：7
> 
> 时间：2012-08-07T20:56:50.450
> 
> 标签：php, ubuntu, imagemagick, graphicsmagick

我正在尝试在同一台机器上同时启用 imagick 和 gmagick 扩展（ubuntu 12.04 - 尽管在旧版本中存在同样的问题）。

我有一个有效的 ImageMagick/Imagick 安装 - 支持 206 种格式......直到我启用 gmagick 模块 - 然后它报告支持 0。由于此响应，我能够隔离问题：[https](https://stackoverflow.com/a/11350707/543871) ://stackoverflow.com/a/11350707/543871 。启用 gmagick 后，graphicsmagick 工作得非常好，只是以 imagemagick 为代价。有任何想法吗？这是启用 gmagick 前后 phpinfo 的输出：

**之前**（刚刚安装了imagick）：

```
imagick module  enabled
imagick module version  3.0.1
imagick classes Imagick, ImagickDraw, ImagickPixel, ImagickPixelIterator
ImageMagick version ImageMagick 6.6.9-7 2012-04-30 Q16 http://www.imagemagick.org
ImageMagick copyright   Copyright (C) 1999-2011 ImageMagick Studio LLC
ImageMagick release date    2012-04-30
ImageMagick number of supported formats:    206
ImageMagick supported formats   3FR, A, AAI, AI, ART, ARW, AVI, AVS, B, BGR, BGRA, BMP, BMP2, BMP3, BRF, C, CAL, CALS, CANVAS, CAPTION, CIN, CIP, CLIP, CMYK, CMYKA, CR2, CRW, CUR, CUT, DCM, DCR, DCX, DDS, DFONT, DJVU, DNG, DOT, DPX, EPDF, EPI, EPS, EPS2, EPS3, EPSF, EPSI, EPT, EPT2, EPT3, ERF, EXR, FAX, FITS, FRACTAL, FTS, G, G3, GIF, GIF87, GRADIENT, GRAY, GROUP4, HALD, HDR, HISTOGRAM, HRZ, HTM, HTML, ICB, ICO, ICON, INFO, INLINE, IPL, ISOBRL, J2C, JNG, JP2, JPC, JPEG, JPG, JPX, K, K25, KDC, LABEL, M, M2V, M4V, MAC, MAP, MAT, MATTE, MIFF, MNG, MONO, MOV, MP4, MPC, MPEG, MPG, MRW, MSL, MSVG, MTV, MVG, NEF, NULL, O, ORF, OTB, OTF, PAL, PALM, PAM, PATTERN, PBM, PCD, PCDS, PCL, PCT, PCX, PDB, PDF, PDFA, PEF, PES, PFA, PFB, PFM, PGM, PGX, PICON, PICT, PIX, PJPEG, PLASMA, PNG, PNG24, PNG32, PNG8, PNM, PPM, PREVIEW, PS, PS2, PS3, PSB, PSD, PTIF, PWP, R, RADIAL-GRADIENT, RAF, RAS, RGB, RGBA, RGBO, RLA, RLE, SCR, SCT, SFW, SGI, SHTML, SR2, SRF, STEGANO, SUN, SVG, SVGZ, TEXT, TGA, THUMBNAIL, TIFF, TIFF64, TILE, TIM, TTC, TTF, TXT, UBRL, UIL, UYVY, VDA, VICAR, VID, VIFF, VST, WBMP, WMF, WMV, WMZ, WPG, X, X3F, XBM, XC, XCF, XPM, XPS, XV, XWD, Y, YCbCr, YCbCrA, YUV 
```

**之后**（imagick + gmagick 都启用）：

```
imagick module  enabled
imagick module version  3.0.1
imagick classes Imagick, ImagickDraw, ImagickPixel, ImagickPixelIterator
ImageMagick version ImageMagick 6.6.9-7 2012-04-30 Q16 http://www.imagemagick.org
ImageMagick copyright   Copyright (C) 1999-2011 ImageMagick Studio LLC
ImageMagick release date    2012-04-30
ImageMagick number of supported formats:    0
ImageMagick supported formats   no value 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T18:24:40.247

According to a PHP maintainer, "Imagick and Gmagick cannot really co-exist together on the same environment as some of the symbols are similar." (See [https://bugs.php.net/bug.php?id=59285](https://bugs.php.net/bug.php?id=59285).)

# php - PHP 语法错误 (htaccess) 上的 Apache 内部错误 500

> ID：11854030
> 
> 赞同：3
> 
> 时间：2012-08-07T20:56:56.923
> 
> 标签：php, apache, .htaccess, internal-server-error

最近在我的服务器上发生了一些变化，这导致`internal error 500`每次 PHP 中出现语法或逻辑错误时都会抛出一个。这些错误正在处理中`exception class`，我不希望他们抛出`500`错误。

*忘了提：当页面不存在=> 404错误工作得很好*

我目前有严格的错误报告。我想这可能是我的`apache config file`

```
 <Directory /var/www/public/>
    <IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteCond %{QUERY_STRING} (.*)(http|https|ftp):\/\/(.*)
    #RewriteRule ^(.+)$ - [env=rfi:true]
    #RewriteEngine On RewriteBase / RewriteCond %{HTTP_HOST} ^domain\.com$ RewriteRule ^(.*)$ http://www.domain.com/$1 [R=301,L]
    </IfModule>
    #CustomLog /path/to/logs/rfi.log combined env=rfi
    Options Indexes FollowSymLinks MultiViews
    AllowOverride None
    Order allow,deny
    allow from all
    ErrorDocument 404 http://www.domain.com/404.php
    #ErrorDocument 403 http://www.domain.com/403.php
    ErrorDocument 500 http://www.domain.com/500.php
 </Directory>
 <Directory "/usr/lib/cgi-bin">
    AllowOverride None
    Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
    Order allow,deny
    Allow from all
 </Directory>
 ErrorLog ${APACHE_LOG_DIR}/error.log 
```

**有没有人看到任何可能导致 500 错误的东西？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:04:33.990

PHP 无法捕获语法错误。如果无法解析文件，您将收到不可避免的 500 错误。您可以将 php.ini 设置为不在客户端显示错误，但它仍会记录错误。

要禁止将所有错误发送到客户端，请在 php.ini 文件集中

display_errors = 关闭

当遇到 500 错误时，他们只会看到一个白色的空白屏幕。

当这种情况发生在外面时，除了让一些脚本监视您的 apache 和 php 错误日志之外，没有办法给您发送电子邮件。您可以通过在 htaccess 文件中配置它来设置 error.php 文件以显示 500 错误，但我不知道。如果可以的话，您可以将一些基本的 php 电子邮件代码放入其中，但这将是通用的——它无法说出实际的错误。

# mongodb - 在 Turbogears 中使用 GridFS 和 Ming ODM

> ID：11854034
> 
> 赞同：0
> 
> 时间：2012-08-07T20:57:05.350
> 
> 标签：mongodb, python-2.7, odm, turbogears2, ming

Ming 从 0.3 版本开始支持 GridFS，到目前为止，我已经在几个 Turbogears 应用程序中使用过它，但是找不到任何关于如何将 GridFS 与 Ming 一起使用的文档，

这是我到目前为止所做的，在我的模型`store.py`模块中：

```
#import statements

BookFile = fs.filesystem('books',DBSession.impl,)

class Book(MappedClass):
    """
    Book definition.
    """
    class __mongometa__:
        session = DBSession
        name = 'books'
        unique_indexes = [('title',),('author',),]

    _id = FieldProperty(s.ObjectId)
    title = FieldProperty(s.String)
    author = FieldProperty(s.String)
    isbn = FieldProperty(s.String)
    vendor = FieldProperty(s.String)
    _file = FieldProperty(s.ObjectId)

    def _get_file(self):
        return BookFile.m.find(dict(_id=self._file)).one()
    def _set_file(self, name, data):
        f = BookFile.m.put(name,data)
        self._file = f

    bookf = SynonymProperty(_get_file, _set_file) 
```

正如你所看到的，`fs.filesystem`不能参加`ODMSession`（`ThreadLocalODMSession`在这种情况下），所以我必须通过做下降到基础`ming.Session`课程`DBSession.impl`。

我担心的是，Turbogears 一直在使用 ThreadLocalODMSession 来适应多线程环境，但我上面所做的是给 GridFS Connection 非线程安全会话。

可以吗？
我应该如何正确/安全地做到这一点？
任何帮助将不胜感激，谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:11:35.320

`DBSession.impl`应该没问题，因为不`ming.Session`存储任何数据。

# php - 如果页面请求太快，Zend Session 会被破坏

> ID：11854035
> 
> 赞同：5
> 
> 时间：2012-08-07T20:57:14.213
> 
> 标签：php, session, zend-framework

我的应用程序不是基于 MVC 模式构建的，而是部分使用 Zend Framework 组件，如 Config、Loader、Session、Auth、Service 和 XmlRpc。

最近我发现，在某些情况下，如果用户浏览页面太快或按下`F5`太快，他的会话会被破坏，他会被注销系统。有一个[类似的问题](https://stackoverflow.com/questions/3753481/zend-session-expires-when-refreshed-many-times)，但他的解决方案并没有帮助我解决这个问题。

### 应用程序如何工作

会话配置：

```
cookie_domain = ".mydomain.com"
name = "myApplicationName"
remember_me_seconds = 864000
save_path = "/path/to/my/session/storage/"
save_handler = "files"
strict = true
use_only_cookies = true 
```

页面初始化：

```
$config = new Zend_Config_Ini(CONFIG_DIR . 'session.ini');

Zend_Session::setOptions($config->toArray());

Zend_Session::start(); 
```

账户控制人：

```
function __construct(...)
{
    /**
     * @var $session Zend_Session_Namespace
     */
    $session = Zend_Registry::get('Zend_Auth');

    if(isset($session->identity))
    {
        Zend_Session::rememberMe();
    }
} 
```

注销流程：

```
if(isset($_GET['logout']))
{
    Zend_Session::destroy(TRUE);
} 
```

有没有其他人遇到过这个问题并且有一些线索可能是错误的以及如何解决它？

### 更新

我已经禁用`Zend_Session::rememberMe()`，现在一切似乎都很好。据我了解，在每次请求时，此方法都会刷新`session_id`并重命名会话文件，并且由于读/写性能问题，它无法找到新创建的会话，并且由于该会话处理程序丢失。
只是想知道，将会话存储更改为数据库可以解决此问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-17T21:05:28.553

我之前在使用原始 PHP 时遇到过这个问题。问题是`session_regenerate_id()`调用过于频繁（每个 HTTP 请求）。

检查是否有某些东西（无论是 Zend 框架还是其他代码）正在重新生成您的会话 ID。您可能遇到了一种 HTTP 竞争条件，它获得的 ID 并不像 PHP 所期望的那样新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T22:36:37.063

我使用它并没有遇到过这个问题。我建议 a) 跟踪您的保存路径并查看是否有任何脚本修改此路径的权限 b) 仔细查看会话处理程序是否可以同时打开文件。

简单地说：Zend_Session 本身并没有什么魔力，它是一个非常简单的包装器。

# java - 为什么睡眠首先执行，然后在 android 中执行它上面的代码？

> ID：11854039
> 
> 赞同：2
> 
> 时间：2012-08-07T20:57:33.087
> 
> 标签：java, android

为什么首先执行 try 块，我希望先改变颜色，然后它应该休眠 5000 毫秒。我的意思是系统在颜色改变之前休眠。私人 OnClickListener CheckAnswer =新 OnClickListener() {

```
 public void onClick(View arg0) {
        // TODO Auto-generated method stub

        disableButtons();
        Button incoming=(Button) arg0;
        if(incoming.getText().toString().equals(Q.getAnswer()))
        {
            incoming.setBackgroundColor(Color.GREEN);
            correct++;
            score+=15;
        }
        else 
        {
            incoming.setBackgroundColor(Color.RED);
            wrong++;
            if(C1.getText().toString().equals(Q.getAnswer()))
                C1.setBackgroundColor(Color.GREEN);
            else if(C2.getText().toString().equals(Q.getAnswer()))
                C2.setBackgroundColor(Color.GREEN);
            else if(C3.getText().toString().equals(Q.getAnswer()))
                C3.setBackgroundColor(Color.GREEN);
            modifyScore();

        }
        try {
            Thread.sleep(5000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        questionGenerator();
    }
};` 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T21:07:17.130

我猜是因为视图的属性已更新，但屏幕重绘被困在你的睡眠后面。不要睡在主线程上。

而是在 Activity 的 onCreate 中创建一个 Handler 并将延迟的 Runnable 发布到它。

```
private Handler mHandler;
protected void onCreate(Bundle savedInstanceState) {
    mHandler = new Handler();
}
...
private OnClickListener CheckAnswer = new OnClickListener() {
     public void onClick(View view) {
       // fix up view
       mHandler.postDelayed(new Runnable() {
           @Override
           public void run() {
               questionGenerator();
           }
       }, 10000);
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T21:04:06.247

您正在处理 GUI 的主线程（在 Swing 中称为[EDT](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)），它与执行更新的线程相同。所以顺序是：

1.  设置新的背景颜色
2.  睡眠 10 秒
3.  `onClick`返回
4.  主线程有机会更新组件

我想你会发现不仅背景颜色没有改变，而且在完成之前你的整个 UI 似乎都被冻结`Thread.sleep`了。

您需要在另一个线程上完成主要工作（我不了解 Android，但在 Swing 中您可以使用[SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)），以便线程可以自由地执行其任务，包括更新组件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T21:06:13.117

首先，不要睡在你的 UI 线程中，你会得到一个强制关闭。其次，在 OnClickListener 结束之前，控件的实际（重新）绘制不会发生。

# code-coverage - Emma Coverage 忽略私有构造函数

> ID：11854041
> 
> 赞同：3
> 
> 时间：2012-08-07T20:57:37.067
> 
> 标签：code-coverage, emma

是否可以忽略 EMMA 覆盖范围内的私有构造函数？

也可以忽略 EMMA 覆盖范围中的枚举吗？

# mongodb - 删除 mongodb 中的旧记录

> ID：11854045
> 
> 赞同：5
> 
> 时间：2012-08-07T20:57:57.597
> 
> 标签：mongodb, database

我在 Mongo DB 中有以下类型的记录。

```
{
    "_id" : ObjectId("50217d8874ebb0e4e52cc07d"),   
    "timestamp" : "8/7/12 1:41:36 PM Pacific Daylight Time",
    "_ts" : ISODate("2012-08-07T20:41:44.119Z")
} 
```

如何删除旧记录？我尝试过类似的东西`db.offlineLogs.remove({timestamp: {$lt:new Date("2012, 8, 3")}});`，但它不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T21:05:22.913

用这个解决了它：`db.offlineLogs.remove({"_ts":{"$lt":ISODate("2012-08-01T19:30:07.805Z")}});`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-24T23:50:04.333

您也可以检查[使用 TimeToLive](https://docs.mongodb.com/manual/tutorial/expire-data/)。

MongoDB 有一个功能`TimeToLive`，您可以指定希望文档在集合中存在多长时间后自动删除。

例如，假设您有一个名为 billing 的集合，其中包含以下字段：

```
{ 
    "_id" : ObjectId("59a05ef17055161ef66e9b21"), 
    "receiptId" : NumberInt(31124124), 
    "salesperson" : "jack", 
    "salesTime" : ISODate("2017-08-25T17:32:23.157+0000")
} 
```

您可以在此集合上创建索引，例如：

```
db.billing.createIndex( { "salesTime": 1 }, { expireAfterSeconds: 3600 }); 
```

这将使集合中的任何文档在一小时（3600 秒）后根据 salesTime 字段被删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T22:05:41.177

在您的原始查询中，`timestamp`它只是一个字符串字段，`Date()`在 Mongo shell 中将被视为字符串。比较这些操作数将像任何其他字符串比较一样工作：

```
$ mongo
MongoDB shell version: 2.2.0-rc1-pre-
connecting to: test
> db.foo.drop()
true
> db.foo.insert({ x: Date() });
> db.foo.find()
{ "_id" : ObjectId("50218e808930273947a21cf3"), "x" : "Tue Aug 07 2012 17:54:09 GMT-0400 (EDT)" }
> sleep(1000)
null
> db.foo.find({ x: { $lt: Date() }});
{ "_id" : ObjectId("50218e808930273947a21cf3"), "x" : "Tue Aug 07 2012 17:54:09 GMT-0400 (EDT)" }
> db.foo.find({ x: { $gt: Date() }});
> 
```

`ISODate()`是[Mongo date fields](http://www.mongodb.org/display/DOCS/Dates)`$gt`的 JS 等价物，在使用or运算符时无法与字符串值进行比较`$lt`：

```
> db.foo.find({ x: { $gt: ISODate() }});
> db.foo.find({ x: { $lt: ISODate() }});
> db.foo.find({ x: { $ne: ISODate() }});
{ "_id" : ObjectId("50218e808930273947a21cf3"), "x" : "Tue Aug 07 2012 17:54:09 GMT-0400 (EDT)" }
> db.foo.insert({x: ISODate() });
> db.foo.find({ x: {$gt: Date() }});
> db.foo.find({ x: {$lt: Date() }});
{ "_id" : ObjectId("50218e808930273947a21cf3"), "x" : "Tue Aug 07 2012 17:54:09 GMT-0400 (EDT)" }
> db.foo.find({ x: {$ne: Date() }});
{ "_id" : ObjectId("50218e808930273947a21cf3"), "x" : "Tue Aug 07 2012 17:54:09 GMT-0400 (EDT)" }
{ "_id" : ObjectId("50218fa18930273947a21cf4"), "x" : ISODate("2012-08-07T21:58:57.350Z") }
> 
```

Mongo 确实定义[了 types 之间的比较顺序](http://www.mongodb.org/display/DOCS/What+is+the+Compare+Order+for+BSON+Types)，其中字符串出现在日期之前，但是当同一字段在集合中可能具有不同的类型时，这与排序顺序有关。

请注意，如果您设想自己经常做某事（例如在批处理中）删除旧记录，您可能会对[TTL 集合](http://docs.mongodb.org/manual/tutorial/expire-data/)感兴趣，这是即将发布的 2.2 版本中的新功能。Kristina Chodorow 还在[这篇博](http://blog.mongodb.org/post/25933713094/good-night-westley-time-to-live-collections)文中就该主题写了一篇有趣的介绍。

# php - Cookie 无法跨不同浏览器运行

> ID：11854049
> 
> 赞同：3
> 
> 时间：2012-08-07T20:58:11.443
> 
> 标签：php, session, setcookie

我终于让我的代码为密码保护脚本工作了。它仍处于起步阶段，所以我知道它不安全。我的问题是我似乎在许多不同的计算机和浏览器上都有问题。据我所见，Firefox 对设置的 cookie 没有任何问题。我在某些没有设置 cookie 的机器上遇到了麻烦。

我所看到的是，在一台机器上，我有一个带有 ie、chrome 和 firefox 的系统。cookie 不适用于 chrome，但适用于 ie 和 firefox。在我的 linux 机器上，firefox 可以顺利运行。我没有安装chrome，所以无法测试。然后在另一台机器上，即不想使用该网站。我认为这是隐私设置的问题，但似乎它们都是一样的。

chrome 问题的奇怪之处在于，我可以看到会话的 cookie，但看不到我设置的 cookie。所以，显然这是一个问题，但我不知道为什么。我的 IE 也有同样的问题。我已将 IE 机器设置为接受所有 cookie，但没有运气。chrome浏览器设置为“允许设置本地数据”。

提前致谢

```
 if (isset($_COOKIE["Cookie"])){
        FormatScreen();
      }
      else if ($_POST['access_password']){
        $PasswordEntered = crypt($_POST['access_password'],$salt);
        if ($PasswordEntered == $RealPassword){
            setcookie("Cookie", $PasswordEntered, time()+600, '/');
            FormatScreen();
        }
        else{
            echo LoginScreen();
        }
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:11:44.353

我想没有解决方案，所以我建议另一种解决方案来解决您的问题：

*   您还可以在服务器端使用会话。因此，如果用户不接受 cookie，他将无权拒绝会话，因为它位于服务器端。
*   为 session 腾出时间。

我希望你在我的评论中找到帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T23:38:23.040

您应该使用会话 cookie - 看看[`http://www.w3schools.com/php/php_sessions.asp`](http://www.w3schools.com/php/php_sessions.asp)

这将有助于提高安全性，因为会话存储在服务器上并且不能被篡改。然后 PHP 在客户端处理会话 cookie。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T17:49:46.567

这是我更正的代码。

```
 if (isset($_SESSION['loggedin'])){
        echo "You are already logged in.";
      }
      else if ($_POST['access_password']){
        $PasswordEntered = crypt($_POST['access_password'],$salt);
        if ($PasswordEntered == $RealPassword){
            $_SESSION['loggedin']=1;
            //echo "Logged In=". $_SESSION['loggedin'];

            echo "You are now logged in!";
        }
        else{
            echo LoginScreen();
        }
      } 
```

# c++ - 为 CMFCToolBar 中的顶级 CMFCToolBarButton 设置图像

> ID：11854058
> 
> 赞同：0
> 
> 时间：2012-08-07T20:58:36.610
> 
> 标签：c++, visual-c++, mfc, mfc-feature-pack

我想知道是否可以`CMFCToolbar`在顶级`CMFCToolBarButton`项目（如`File`、`Edit`、`Help`等）中设置图像（并仅显示该图像，不显示文本）：

![在此处输入图像描述](../Images/24eb1057fe861fa24c338ae745a42d64.png)

我试过了，但没有效果：

```
CMFCToolBarMenuButton* button = DYNAMIC_DOWNCAST(CMFCToolBarMenuButton, m_wndMenuBar.GetMenuItem(0));
button->m_bUserButton = TRUE;
button->m_bImage = TRUE;
button->m_bText = FALSE;
button->SetImage(1);
m_wndMenuBar.UpdateButton(0); 
```

在此之前，我正在设置一些像这样的自定义图像（它实际上是生成的 MFC 项目，来自 VS2010）：

```
if (CMFCToolBar::GetUserImages() == NULL)
{
    // load user-defined toolbar images
    if (m_UserImages.Load(_T(".\\UserImages.bmp")))
    {
        CMFCToolBar::SetUserImages(&m_UserImages);
    }
} 
```

那么，这可能吗？我认为它是，因为`CMFCMenuBar`它来自`CMFCToolBar`，它支持它。

**更多信息：** 实际上，我想要实现的是这个（红色矩形）：

![在此处输入图像描述](../Images/daa7acb6ad5ee32946baed0d0e826437.png)

所以我想在一个经典的菜单栏中（不是图像中的功能区），创建一个图像按钮并右对齐它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:14:15.573

如果您尝试使用下拉组合框显示“帮助”菜单项，那么可能是内置的

```
CMFCMenuBar::EnableHelpComboBox 
```

应该为你工作。[在此处](http://msdn.microsoft.com/en-us/library/bb983838.aspx)查看帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T14:08:11.247

我这样做了，它似乎工作正常：

```
VERIFY(CMFCToolBar::GetImages()->Load(IDB_MY_NEW_FILE,nullptr,TRUE));
int imageIndex = CMFCToolBar::GetImages()->GetCount();
m_wndToolBar.InsertButton( CMFCToolBarButton(ID_FILE_MYNEWICON,imageIndex) ); 
```

# mysql - 如何根据另一个查询的值运行 UPDATE 查询？

> ID：11854060
> 
> 赞同：0
> 
> 时间：2012-08-07T20:58:39.553
> 
> 标签：mysql

我正在尝试在我的 MySQL 数据库上运行`UPDATE`using 。`REPLACE`

我有一个 WordPress 数据库表 ( `wp_postmeta`)，其中包含四个字段：`post_id`, `meta_id`, `meta_key`, `meta_value`.

我想要所有带有*异足纲的**齿状*`REPLACE`体的实例，但前提**是**那个帖子（即那一行）也有一行是属和是*Corydoras*。****`post_id``meta_key``meta_value`****

 *****例如，

```
post_id     meta_id     meta_key    meta_value
4           14          breeding    Some stuff here about breeding denticulata
2           15          breeding    Some stuff here about breeding denticulata
4           16          genus       Corydoras
2           17          genus       Apistogramma 
```

只有带有`meta_id`of的行`14`实际上应该在那里改变，因为带有`post_id`of的行`2`不是来自*Corydoras*属。

这可能吗？我不知道从哪里开始。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:07:41.063

```
UPDATE 
    wp_postmeta AS upd
  JOIN
    wp_postmeta AS chk
      ON  chk.post_id = upd.post_id
SET
    upd.meta_value = REPLACE(upd.meta_value, 'denticulata', 'heteropoda')
WHERE
      chk.meta_key = 'genus'
  AND chk.meta_value = 'Corydoras'
  AND upd.meta_key = 'breeding' ;           -- not sure if you need this line 
```

请注意，这也将更新`'denticulatas'`为`'heteropodas'`（以及包含字符串的任何其他单词`denticulata`）并且`REPLACE()`区分大小写，因此`Denticulata`不会被替换。*****

# oop - 仅仅为了识别类型而派生一个类是个好主意吗？

> ID：11854064
> 
> 赞同：4
> 
> 时间：2012-08-07T20:59:02.303
> 
> 标签：oop, inheritance, refactoring

*问题比正常时间长，但我试图详细说明。请耐心等待并阅读整个问题，这可能是一个有趣的问题*

我目前有一个方法 A，它接受一个具有两个属性`List<X>`但代表两个不同实体的对象，因此该属性被恰当地命名为 R 和 S。类结构是

```
class A
{
   List<X> R;
   List<X> S;
} 
```

现在我有一个方法可以接受 A 类型的输入，并且可以同时使用（集合，方法签名如下）

```
public void updateMe(A objA)
{

} 
```

现在我有一个需要重用此方法的情况，但现在的情况是我不需要区分实体，因此有一个列表`List<X>`T。

现在我的问题是如何重构该方法以使用单个列表，但仍然提供在早期情况下区分两个列表的能力。

我的方法将更新这些集合，因此要么添加到列表中，要么从中删除。

我目前的解决方案是创建新类来表示从 X 派生的两个不同实体，然后将这个基类列表传递给我的方法并让方法更新这个基类，然后在阅读它时我将能够识别哪个对象是什么类型。

因此我的新课程将是

```
public class X1:X
{
}

public class X2:X
{
}

class A
{
   List<X> R;
} 
```

这是最好的解决方案还是我可以在这里采取任何其他方法.. 我似乎不喜欢扩展一个类只是为了识别类型而不添加任何属性的想法..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-25T10:10:35.257

似乎目标是在类的内容上实现一种形式的多态性。从这个意义上说，您应该为内部内容隔离一个类，因此我的回答侧重于导致您提出问题的目标，而不是问题本身。

一般来说，对于您的问题的先验，我会说两个集合之间的区别，每个集合代表一个不同的实体，不是代表类型的问题，假设它是正确的，而是调用者的责任。
我的回答遵循这条路径，但是以强类型的方式实现变量内部表示和更新逻辑，具有静态多态性（由于时间原因，省略了向您解释这个选择）。

作为决定是否使用 的子类的规则`X`，您应该问自己：操作和`updateMe`更新的逻辑，它是根据对象的细节来做的吗？`List<X> R``List<X> S``X`

我从你的问题中假设这并不总是两个列表，我的解决方案也概括了集合的类型。
我希望能给你一个起点。如果我猜到你的要求，我会说明更多。

```
template <class staticPolimorphicAInnerT>
class A 
{
    public:
        void updatMe (const A& ref) {
            // <do something pre if necessary>
            updateInnerMe (A.innerObj);
            // <do some other post if necessary>
        }

        void updateInnerMe (const staticPolimorphicAInnerT& innerRef) {
            innerObj.updateMe (innerRef);
            // or better: 
            // inner_update_method (innerRef)
        }

    private:
        // is used to request the static polymorphism
        typedef void (staticPolimorphicAInnerT::* inner_update_method) (const staticPolimorphicAInnerT&)
        staticPolimorphicAInnerT innerObj; 
        //<something more i hope> 

}

template <class T>
class AInnerFirst
{
    public:
        void updatMe (const AInnerFirst& ref) {
            // <do something with R>
            // <do something with S>
        }

    private:
        List<T> R;
        List<T> S;
}

template <class T>
class AInnerSecond 
{
    public:
        void updatMe (const AInnerSecond& ref) {
            // <do something with W>
        }

    private:
         Vector<T> W;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:36:13.310

我会说，要么： 1\. 使用 ENUM :) 2\. 使用抽象方法 getList() 使类 Y&Z 扩展抽象 X。但这对于简单的情况来说肯定是矫枉过正。所以，回到 1 - 只需使用枚举 :)

# glsl - GLSL 正交投影

> ID：11854065
> 
> 赞同：0
> 
> 时间：2012-08-07T20:59:04.397
> 
> 标签：glsl

我已经使用眼睛方向（Phong，Blinn）实现了一些照明着色器，我相信我在 opengl 中使用透视投影，我想知道我应该怎么做才能使相同的着色器使用正交投影工作。我还没有时间完全了解正射投影的工作原理，但我相信没有相机，所以我不明白我是否还需要使用眼睛以及如何计算它，或者我完全错了。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:21:27.337

除非您在投影后空间中进行照明（这不太可能），否则无论投影如何，照明的工作方式都是相同的。

# c# - 如何在 mvc3 razor 下拉列表中显示日期的短/自定义版本？

> ID：11854067
> 
> 赞同：0
> 
> 时间：2012-08-07T20:59:09.367
> 
> 标签：c#, asp.net-mvc-3, razor

我有一个下拉菜单，只需要显示月/日/年，没有时间。它绑定到模型提供的 IEnumerable<DateTime>。使用默认方法会显示一个长日期：

```
@Html.DropDownList("SelectedDate", new SelectList(Model.Dates, Model.SelectedDate)); 
```

为下拉列表中每个列表项的文本字段生成“6/24/2013 12:00:00 AM”。

如何显示文本字段的短日期，如下所示：

'2013 年 6 月 24 日'

我想为模型数据坚持 DateTime 结构，但我想，我可以生成具有自定义属性的自定义对象列表并运行以下命令：

```
@Html.DropDownList("SelectedDate", new SelectList(Model.DisplayDates, "Value", "ShortDate", Model.SelectedDate)); 
```

但也许有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:20:44.477

制作副本，遍历它，将日期更改为更合适

```
@{
 List<string> shortDates = new List<string>();
 for (var i = 0; i < Model.Dates.Count; i++)
 {
  shortDates.Add(Model.Dates.ElementAt(i).ToShortDateString());
  }
} 
```

使用副本

```
@Html.DropDownList("SelectedDate", new SelectList(shortDates, Model.SelectedDate)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:51:42.740

基本上，这是我发现的唯一丑陋的解决方案，它适用于自定义 DateTime 对象的下拉列表，而不会失去在下拉列表中设置选定日期的能力。

在 DateTime 对象周围使用简单的包装类：

```
public class DisplayDateTime
{
    private DateTime dt;
    private string shortDate;

    public DisplayDateTime(DateTime d)
    {
        dt = d;
        shortDate = dt.ToString("d");
    }

    public DateTime Date
    {
        get
        {
            return dt;
        }
    }

    public string ShortDate
    {
        get
        {
            return shortDate;
        } 

    }
} 
```

然后由模型使用：

```
 public List<DisplayDateTime> GetDisplayDates()
    {
        var displayDates = new List<DisplayDateTime>();
        foreach (var d in Dates)
        {
            displayDates.Add(new DisplayDateTime(d));
        }

        return displayDates;
    } 
```

然后像这样喂给剃须刀：

```
@Html.DropDownList("SelectedDate", new SelectList(Model.GetDisplayDates(), "Date", "ShortDate", Model.SelectedDate)); 
```

# python - 从 Python 访问 Visual C++ DLL（__thiscall 调用约定）

> ID：11854068
> 
> 赞同：3
> 
> 时间：2012-08-07T20:59:17.147
> 
> 标签：python, ctypes

我想从 Python 访问闭源 DLL 中的一个类，用 Visual C++ 编译。我没有头文件，只有目标代码，没有接口描述。

我可以使用 加载 DLL `ctypes.CDLL`，但任何调用函数的尝试都会导致访问冲突。显然 ctypes 不知道`__thiscall`调用约定（它不是为 C++ 设计的）。通常，我会简单地编写一个扩展模块，但没有源代码我在这里不走运。

这是 MSDN 所说的：

> __thiscall 调用约定用于成员函数，是不使用变量参数的 C++ 成员函数使用的默认调用约定。在 __thiscall 下，被调用者清理堆栈，这对于 vararg 函数是不可能的。在 x86 架构上，参数从右到左压入堆栈，this 指针通过寄存器 ECX 传递，而不是在堆栈上。

例如，这是导出的函数签名的外观（未损坏）：

`public: __thiscall CFoo::CFoo(void)`

我尝试从 Python 访问构造函数：

```
getattr(dll, "??0CFoo@@QAE@XZ")(c_voidp()) 
```

这不起作用，因为 ctypes 没有传递实例指针，而我得到的只是访问冲突。

我想我不能轻易做到这一点，因为 ctypes 没有 C++ 支持，而且每个编译器都有自己的名称修改约定，因此很难以通用方式实现它。`__thiscall`调用约定不是由 ctypes 实现的。

显而易见的解决方法是使用 Visual C++ 编写的包装器，它将函数导出为`__stdcall`，但我不想依赖它。

正确的？还是我错过了什么技巧？

# ruby-on-rails-3 - 敏捷 Web 开发 line_item 创建

> ID：11854071
> 
> 赞同：0
> 
> 时间：2012-08-07T21:00:03.353
> 
> 标签：ruby-on-rails-3

我正在阅读使用 Rails 进行敏捷 Web 开发教程。有产品、订单项和购物车。

**产品**

```
class Product < ActiveRecord::Base
  attr_accessible :description, :image_url, :price, :title
  has_many :line_items
end 
```

**订单项**

```
class LineItem < ActiveRecord::Base
  attr_accessible :cart_id, :product_id, :product
  belongs_to :product
  belongs_to :cart
end 
```

**大车**

```
class Cart < ActiveRecord::Base
  has_many :line_items, dependent: :destroy
end 
```

**LineItems 控制器**

```
class LineItemsController < ApplicationController

  def create
    @cart = current_cart
    product = Product.find(params[:product_id])
    @line_item = @cart.line_items.build(product: product)
    ....
  end 
```

我的问题是关于上面创建操作中的第三行。我了解将 product_id 传递到 line_items.build() 但我不明白传递整个产品的作用是什么？

谢谢，迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:04:26.313

这将设置与产品的关系（如belongs_to产品）

您也可以手动设置 product_id，但您为什么要这样做。这种方式要简单得多。

Active Record 理解关系的概念——所以它会自动为你设置 id。

# c# - 如何从应用程序内部启动一个新的应用程序实例？

> ID：11854072
> 
> 赞同：2
> 
> 时间：2012-08-07T21:00:02.777
> 
> 标签：c#, wpf

当用户单击按钮时，我想启动我的应用程序的新实例。

当我使用此代码时，它会引发错误：

```
new Application().Run(); 
```

> 不能在同一个 AppDomain 中创建多个 System.Windows.Application 实例。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T21:27:24.073

我找到了解决方案

```
Process p = new Process();
p.StartInfo.FileName = 
    System.Reflection.Assembly.GetExecutingAssembly().Location;
p.Start(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T21:07:03.950

使用另一个过程：

*   获取程序路径（例如 via [`Environment.CommandLine`](http://msdn.microsoft.com/en-us/library/system.environment.commandline.aspx)）
*   使用所述路径[启动进程](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.start.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T21:21:16.773

```
Process p = new Process();
p.StartInfo.FileName = Application.ExecutablePath;
p.Start(); 
```

这在 winforms 中，但在 WPF 中可能类似。

# asp.net-mvc-3 - 需要对用户隐藏 URL，我可以将 HTTP 请求的结果作为 ActionResult 返回吗？

> ID：11854075
> 
> 赞同：0
> 
> 时间：2012-08-07T21:00:17.783
> 
> 标签：asp.net-mvc-3, http, actionresult

为了访问供应商资源（外部托管），我有一个 URL，该 URL 发出包含身份验证凭据的请求。URL 是动态构建的，但我不希望它出现在用户的浏览器中。相反，我想构建 URL，使用 HttpWebRequest 发送请求，获取结果，然后通过 AJAX 调用将控制器操作中的这些结果返回给浏览器中的用户。

我觉得我以前做过这个，并且我已经知道如何从服务器内发出 HTTP 请求，但是我无法确定要使用哪种类型的 ActionResult。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:21:26.153

看来您可以只使用普通的 ActionResult 来处理这个问题。如果我理解你的问题，工作流程将是这样的......

**查看模型**

```
public ResponseModel(){
     public string response {get;set;}
} 
```

**控制器**

```
public ActionResult GetOutsideResults(){
    //make HttpWebRequest
    var model = new ResponseModel();
    model.response = ResultsFromWebRequest();
    return View(model);
} 
```

**看法**

```
@Html.Raw(model.response); 
```

您也可以对 Ajax 请求和局部视图执行相同的操作。这会将凭据保留在服务器上，并提供一种返回 HTML 结果的方法。我认为您也可以使用 JSON 结果并使用 JQuery 进行解析。

**控制器**

```
public JsonResult GetOutsideResults(){
    //make HttpWebRequest
    return Json(ResultsFromWebRequest());
} 
```

**看法**

```
$ajax({...
     success:  function(data){
        $("#targetDiv").html(data);
     }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T21:08:53.683

您可以使用隐藏的 iframe 发布帖子并检索响应并将其显示给用户。

# java - Java：垃圾收集器收集什么？

> ID：11854077
> 
> 赞同：0
> 
> 时间：2012-08-07T21:00:26.237
> 
> 标签：java, garbage-collection, jvm

我是 GC 新手，想知道除了不再被任何变量引用的引用之外，垃圾收集器还会收集什么？以下是我要检查的列表

*   原始类型（int、double、float、char ....）是否得到 GC-ed ？
*   静态变量会被 GC 处理吗？
*   最终变量是否被 GC-ed（我认为因为它被标记为不可变，所以没有什么可收集的）？
*   是否所有方法（静态和非静态）都经过 GC 处理？
*   线程是否得到 GC-ed ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T21:04:42.493

GC 不收集任何引用，它只是释放不再可访问的对象（堆上的内存）。

静态是特殊的内存位置，与类/类加载器相关联。如果类/类加载器未部署，则静态内容将从内存中删除。

如果原始类型与对象（类变量）相关联，那么当对象不可访问时它们将被 GC。

如果是局部变量/参数变量，它们将在堆栈上，因此一旦方法执行完成，它们就会被回收。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T21:07:24.563

GC 只收集程序中没有任何引用的内存空间，因此根据定义，GC 收集原语不会发生。可以收集任何可以引用对象并可以更改其需求的变量，因此可以在某些情况下收集静态变量，但最终不行！我无法想象方法 GC-ed 是什么意思。在一般的答案中，我应该说方法不是要 GC-ed 的对象状态的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T21:08:52.773

垃圾收集是一个巨大的话题，对于堆栈溢出答案来说可能太大了。有一本关于这个主题的[好书](http://gchandbook.org/)叫做[垃圾收集手册](http://gchandbook.org/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T21:06:14.580

垃圾收集确实对分配在堆上的对象起作用，这些对象都是通过`new`.

*   不确定原始对象，如果在内部使用对象管理它们可能会被 GC（例如`new Integer(..)`，但我不确定这里的装箱和拆箱，所以我会说不，因为 JVM 有管理它们的特定指令
*   静态变量可以被 GC-ed，因为静态唯一的东西是引用而不是被引用的对象
*   final 变量可以是 GC-ed，它们是 final 的事实并不意味着您的程序将永远需要对它们的引用
*   方法和线程本身不会被 GC，但从这个意义上说，线程始终包含在具有`run()`方法的对象中，因此它们可以被 GC

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T21:04:43.977

垃圾收集仅适用于对象。

• 原始类型（int、double、float、char....）是否经过 GC 处理？- 原始类型是对象吗？不。

• 静态变量是否经过 GC 处理？- 是变量对象，是的。

• final 变量是否被 GC-ed（我认为因为它被标记为不可变，所以没有什么可收集的）？- 不，他们会得到 GC-ed

•所有方法（静态和非静态）都经过GC吗？- 方法和类 defs 占用内存，但不占用 GC 管理的内存，它取决于 JVM 的类型，它们最终被随意创建和销毁。

• 线程会被 GC 处理吗？- 是的，线程是对象，所以它们会被 GC-ed。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-07T21:05:11.797

垃圾收集器只在堆上工作。鉴于此，您可以排除静态变量。

*   原始类型（int、double、float、char ....）是否得到 GC-ed ？如果他们所属的对象被 GC-ed，他们就会被 GC-ed

*   静态变量会被 GC 处理吗？不

*   最终变量是否被 GC-ed（我认为因为它被标记为不可变，所以没有什么可收集的）？如果他们所属的对象被 GC-ed，他们就会被 GC-ed

*   是否所有方法（静态和非静态）都经过 GC 处理？这没有多大意义

*   线程是否得到 GC-ed ？如果它们是不再被引用的对象，是的

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-07T21:02:46.113

只有对象（实例）可以被垃圾收集，没有别的。

*   变量不是对象 - 所以它们不会被 gc'd
*   方法不是对象——没有 gc。
*   原语 - 不是对象，没有 gc
*   Threads - Thread 类实例：是的。

该关键字`static`与垃圾收集无关。

# .net - 通过不可编辑的符号在文本框中构建用户条目

> ID：11854078
> 
> 赞同：0
> 
> 时间：2012-08-07T21:00:27.173
> 
> 标签：.net, vb.net, winforms, user-interface

我正在创建一个 Windows 窗体，它要求（除其他外）用户提供纬度和经度值，精度低至千分之一秒。

出于美学原因，我想将这一切都放在一个文本框中。我想最好的方法是在文本框中添加某些常量符号（即度数、分钟和秒数），以向用户发出度数、分钟和秒数的正确位置信号。这些符号不应由用户编辑，理想情况下不会改变它们的方向。也就是说，我想像以下内容：

```
00°00′000″ 
```

其中每个零是一个可编辑字段。

有没有一种简单的方法可以通过利用现有的 .NET 控件（例如，MaskedTextbox）来做到这一点？或者这需要一些老式的肘部润滑脂吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:28:51.640

MaskedTextbox 是最简单的方法。

要获取您要查找的内容，请设置以下属性：

```
mtxtText.Mask = "00" & Chr(176) & "00" & Chr(146) & "000" & Chr(148)
mtxtText.PromptChar = "0"
mtxtText.TextMaskFormat = MaskFormat.IncludePromptAndLiterals
mtxtText.CutCopyMaskFormat = MaskFormat.IncludePromptAndLiterals 
```

您当然可以根据自己的需要进行调味。顺便说一句，Chr(176) 是度数符号，Chr(146) 是结束单引号，Chr(148) 是结束双引号。您必须解析结果才能获得度数、分钟数和秒数。

# algorithm - 计算长度为 4 可被 9 整除的子序列

> ID：11854089
> 
> 赞同：7
> 
> 时间：2012-08-07T21:01:01.370
> 
> 标签：algorithm, division

计算长度为 n 的字符串中长度为 4 且可被 9 整除的子序列。

例如如果输入字符串是 9999 那么 cnt=1

我的方法类似于蛮力并采用 O(n^3)。还有比这更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T21:05:33.060

如果你想检查一个数字是否能被 9 整除，你最好看看[这里](http://www.mathwarehouse.com/arithmetic/numbers/divisibility-rules-and-tests.php#divisibilityBy9)。

我将简要描述该方法：

```
checkDividedByNine(String pNum) :
If pNum.length < 1
   return false
If pNum.length == 1
   return toInt(pNum) == 9;
Sum = 0
For c in pNum:
    Sum += toInt(pNum)
return checkDividedByNine(toString(Sum)) 
```

因此，您可以将运行时间减少到小于 O(n^3)。

**编辑：** 如果您需要非常快速的算法，您可以使用预处理来保存每个可能的 4 位数字，如果它可以被 9 整除。（这将花费您 10000 的内存）

**编辑2：** 更好的方法：您可以使用动态编程：

对于长度为 N 的字符串 S：

D[i,j,k] = 字符串 S[i..N] 中长度为 j 的子序列的数量，其值为模 9 == k。

其中 0 <= k <= 8, 1 <= j <= 4, 1 <= i <= N。

```
D[i,1,k] = simply count the number of elements in S[i..N] that = k(mod 9).
D[N,j,k] = if j==1 and (S[N] modulo 9) == k, return 1\. Otherwise, 0.
D[i,j,k] = max{ D[i+1,j,k], D[i+1,j-1, (k-S[i]+9) modulo 9]}. 
```

你返回 D[1,4,0​​]。

您会得到一张大小为 N x 9 x 4 的桌子。

因此，假设计算模数为 O(1)，总运行时间为 O(n)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T21:08:09.947

~~假设子序列必须由连续的数字组成，您可以从左到右扫描，跟踪读取的最后 4 位数字的顺序。这样，您可以进行线性扫描并应用除法规则。~~

如果数字不一定是连续的，那么您可以使用查找表进行一些调整。这个想法是，您可以创建一个名为的 3D 数组`table`，它`table[i][j][k]`是`i`直到索引的数字总和的数量，`j`使得总和`k`在除以 9 时留下余数。表本身的大小为 45n（`i`从 0 到 4，`j`去从 0 到`n-1`，`k`从 0 到 8)。

对于递归，每个`table[i][j][k]`条目都依赖于从 0 到 8`table[i-1][j-1][x]`的`table[i][j-1][x]`所有`x`条目。由于每个条目更新都需要恒定的时间（至少相对于 n 而言），这应该会为您提供 O(n) 运行时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T21:33:57.480

这个怎么样：

```
/*NOTE: The following holds true, if the subsequences consist of digits in contagious locations */ 

public int countOccurrences (String s) {
    int count=0;
    int len = s.length();
    String subs = null;
    int sum;

    if (len < 4)
        return 0;
    else {
        for (int i=0 ; i<len-3 ; i++) {
            subs = s.substring(i, i+4);
            sum = 0;

            for (int j=0; j<=3; j++) {
                sum += Integer.parseInt(String.valueOf(subs.charAt(j)));
            }

            if (sum%9 == 0)
                count++;
        }           
        return count;
    }   
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T14:01:00.450

这是基于上述使用查找表的方法的上述问题的完整工作代码

```
int fun(int h)
{
return (h/10 + h%10);
}

int main()
{
int t;
scanf("%d",&t);
int i,T;
for(T=0;T<t;T++)
{
    char str[10001];
    scanf("%s",str);        
    int len=strlen(str);
    int arr[len][5][10];
    memset(arr,0,sizeof(int)*(10*5*len));

    int j,k,l;
        for(j=0;j<len;j++)
            {
              int y;
                y=(str[j]-48)%10;
                arr[j][1][y]++;
            }

        //printarr(arr,len);    

        for(i=len-2;i>=0;i--)   //represents the starting index of the string
            {

                    int temp[5][10];
                    //COPYING ARRAY
                    int a,b,c,d;
                    for(a=0;a<=4;a++)
                    for(b=0;b<=9;b++)
                    temp[a][b]=arr[i][a][b]+arr[i+1][a][b];

            for(j=1;j<=4;j++)   //represents the length of the string
                {
                for(k=0;k<=9;k++)   //represents the no. of ways to make it
                    {

                        if(arr[i+1][j][k]!=0)
                          {
                          for(c=1;c<=4;c++)
                            {
                              for(d=0;d<=9;d++)
                                 {
                            if(arr[i][c][d]!=0)
                                 {
                                int h,r;
                                r=j+c;
                                if(r>4)
                                continue;
                                h=k+d;                      
                                h=fun(h);
                                if(r<=4)
                                  temp[r][h]=( temp[r][h]+(arr[i][c][d]*arr[i+1][j][k]))%1000000007;
                              }}}
                        }

                    //copy back from temp array

                    }
                }
                for(a=0;a<=4;a++)
                    for(b=0;b<=9;b++)
                    arr[i][a][b]=temp[a][b];
            }

printf("%d\n",(arr[0][1][9])%1000000007);

}

    return 0;
} 
```

# java - 为什么我的超类的字段在这里被初始化？

> ID：11854092
> 
> 赞同：0
> 
> 时间：2012-08-07T21:01:08.243
> 
> 标签：java

我希望有人验证我的理解是否正确。我有一些这样的代码：

```
public class A {
int a;
int b;
public A(int a)
{
    this.a=a;
} 
```

现在 A() 是我定义的构造函数，这意味着它不是默认构造函数。所以，如果我有一个扩展这个类的子类。

```
public class B extends A{
public B()
{ 
   super(15);
}

} 
```

如果我在子类中同时打印 a 和 b 的值，我会看到 a 的值为 15，b 的值为 0。当我在 A 中明确定义了一个构造函数时，这意味着它不是默认构造函数，那么如何A 类中 b 的未初始化字段的值是否为 0 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T21:03:22.853

`int`是原始类型，不能是`null`. 默认值为`0`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T21:07:05.517

在这种情况下，未初始化的字段 b 在 java 中为 int 获取默认值 0。

[http://docs.oracle.com/javase/specs/](http://docs.oracle.com/javase/specs/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T21:06:05.323

JLS的[相关部分](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.5)说，如果未指定类字段，则会使用其默认值*自动初始化。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T21:34:41.540

原始类型的默认值由`Object`类的构造函数设置。当您初始化 的对象时`B`，它在此处被调用..

in `public A(int a)`,`super();`首先自动执行，因此`b`由于`0`'`Object`的`public Object()`构造函数在这里被调用。

来源：完整参考 JAVA \m/

# php - 如何从 youtube 提要中提取 RTSP 链接

> ID：11854094
> 
> 赞同：1
> 
> 时间：2012-08-07T21:01:16.137
> 
> 标签：php, json, parsing, youtube

假设我们有 youtube 视频 ID

```
$vid = "g6Sji2R1kkQ"; 
```

然后使用像

```
$vfeed="http://gdata.youtube.com/feeds/api/videos/$vid"; 
```

或者也可以使用

```
$vfeed="http://gdata.youtube.com/feeds/api/videos?q=$vid&format=1&alt=json"; 
```

两个链接都显示了很多数据，例如标题、关键字、描述...等

在该数据中有`RTSP`链接（智能手机的视频链接）。

如何解析任何此`gdata`链接以提取`rtsp`链接

我想为上面的 id 示例获取它，rtsp 链接应该是

```
rtsp://v1.cache2.c.youtube.com/CiILENy73wIaGQlEknVki6OkgxMYDSANFEgGUgZ2aWRlb3MM/0/0/0/video.3gp 
```

任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:10:43.277

试试`Zend` `GData`图书馆

```
$youtube = new Zend_Gdata_YouTube();

//Grab Video data
$videoEntry = $youtube->getVideoEntry('video_code');

foreach ($videoEntry->mediaGroup->content as $content)
  if ($content->type === "video/3gpp")
    echo 'Mobile RTSP link: ' . $content->url . "<br>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T21:34:19.490

我不知道更多，`json`所以我使用了第一个提要链接，我找到了很好的功能，可以帮助我将结果作为数组

```
function getvinfo($url){
$string = @file_get_contents($url);
if(!$string){
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.5) Gecko/20041107 Firefox/1.0');
$string = curl_exec($ch);
curl_close($ch);
}
return $string;
} 
```

然后我将解析结果`array`以`media:content`获取`rtsp`链接

# mercurial - mercurial：如何归档到最新的变更集？

> ID：11854095
> 
> 赞同：0
> 
> 时间：2012-08-07T21:01:24.327
> 
> 标签：mercurial

我这里有一个奇怪的情况：

当我在我的 hg 服务器上做一个

```
sudo hg archive /project/export 
```

`.hg_archival.txt`它存档它，但在我看到的隐藏文件中

```
branch: default
latesttag: null
latesttagdistance: 31 
```

但最近的签到是 33。这似乎被忽略了。

以前我必须删除变更集 32

```
hg clone <old repo> <new repo> -r 31 
```

后来添加了两个新的签到...

这可能是打嗝的原因吗？我能做些什么？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T23:28:39.517

您可能没有更新到提示。运行`hg parent`。 `hg archive`将存档当前父级，因此您可能使用的是本地修订版 31，而不是 33。在您克隆到 31 并提取新签入后，是`hg update`吗？

# svn - 将 Diffmerge 与 TortoiseSVN 结合使用 - 如何处理标记为冲突的单个代码块（1000 多行）

> ID：11854102
> 
> 赞同：0
> 
> 时间：2012-08-07T21:01:51.667
> 
> 标签：svn, merge, tortoisesvn, diffmerge

我正在使用 TortoiseSVN 将一些更改从主干合并回一个分支。我做了一些空白修改（只是整理一下），DiffMerge 显示一个非常大的代码块（可能大约 2000 行）有冲突。其中一些只是空白，但其中一些也是两个文件的实际更改。

由于 DiffMerge 已将此标记为一个大冲突，而不是一系列较小的冲突，有没有办法可以从每个文件中挑选单独的行合并到中心？我试过只选择几行，但我只能选择复制或全选。

谢谢！

编辑：澄清一点，由于空格的变化，一个 10000 行的文件基本上被分成大约三个 3300 行的“冲突”。很少有行实际上是冲突的。我需要做的是找到冲突的线并单独解决它们，而不是被迫选择一个或另一个大块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T19:23:38.037

它很糟糕，但我最终基本上逐行查看差异，然后将我想要的行复制/粘贴到合并文件中。

# dll - SQL Server 2012 的 VSTAScriptingLib

> ID：11854103
> 
> 赞同：2
> 
> 时间：2012-08-07T21:01:54.780
> 
> 标签：dll, ssis, sql-server-2012, ezapi

我正在尝试为 SSIS 构建2012[版](http://blogs.msdn.com/b/mattm/archive/2012/02/15/ezapi-updated-for-sql-server-2012.aspx)[EzAPI](http://blogs.msdn.com/b/mattm/archive/2008/12/30/ezapi-alternative-package-creation-api.aspx)。我在构建过程中遇到程序集依赖错误：

> 错误 1 ​​程序集 'Microsoft.SqlServer.TxScript, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91' 使用 'Microsoft.SqlServer.VSTAScriptingLib, Version=11.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91'版本比引用的程序集 'Microsoft.SqlServer.VSTAScriptingLib, Version=10.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91' c:\Program Files\Microsoft SQL Server\110\DTS\PipelineComponents\Microsoft.SqlServer.TxScript.dll EzAPI

基本上，我需要 11.0.0.0 版本的 VSTAScriptingLib，但它不包含在 SQL Server 2012 发行版中（据我所知）。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T22:30:07.373

在 EzAPI 项目中，删除现有的对`Microsoft.SqlServer.VSTAScriptingLib`

然后将其重新添加，但您必须导航到 GAC 中的实际位置才能找到它。`C:\Windows\Microsoft.Net\assembly\GAC_MSIL\Microsoft.SqlServer.VSTAScriptingLib\v4.0_11.0.0.0__89845dcd8080cc91\Microsoft.SqlServer.VSTAScriptingLib.dll`

我会看看在 SQL Server 安装期间是否应该把它放在“其他地方”。

# mysql - mysql查询跟踪

> ID：11854105
> 
> 赞同：1
> 
> 时间：2012-08-07T21:01:56.323
> 
> 标签：mysql

我在 my.cnf 中看到 general_log=1 但我无法找到 mysql 记录所有查询的确切位置。我读到它通常会登录到文件或表中。

如果它是一个文件，那么文件名是在 my.cnf 中指定的，我没有看到。如果是表，它记录到哪个表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:10:43.593

默认情况下，通用日志将位于 MySQL 数据目录（大多数情况下是 /var/lib/mysql）中，并将命名为 host_name.log，其中 host_name 是您的主机名。您可以通过将日志指令添加到 my.cnf 来更改日志文件位置/名称，如下所示：

```
log=/var/lib/mysql/your_log_name 
```

请注意，您必须重新启动服务器或运行`flush logs`才能使更改生效。

您也可以使用该`-l [file name]`选项重新启动 mysqld。

# c# - 重写方法中的默认参数值

> ID：11854107
> 
> 赞同：15
> 
> 时间：2012-08-07T21:02:02.853
> 
> 标签：c#, .net, overriding, virtual, optional-parameters

在下面的代码中，对 Method2 的调用将 Value 参数接收为 False，即使基类根本没有为参数声明默认值，而派生类将 True 声明为默认值。
可以争论（正如在类似示例中所做的那样：[C# optional parameters on overridden methods](https://stackoverflow.com/questions/8909811/c-sharp-optional-parameters-on-overridden-methods)）编译器首先使用基类的方法声明（这是真的，因为可以通过在对 Method1 的调用前`this.`加上在这种情况下，base 根本没有声明默认值。
对此有合理的解释吗？

```
using System;

class Base
{
    public virtual bool Method1(bool Value) { return true; }
    public virtual bool Method2(bool Value) { return true; }
}

class Derived : Base
{
    public override bool Method1(bool Value = true)
    {
        return Value;
    }

    public override bool Method2(bool Value = true)
    {
        return Method1();
    }
}

class Program
{
    static void Main(string[] args)
    {
        Derived a = new Derived();
        Console.WriteLine("Call to Method1, expected: True, got: {0}", a.Method1());
        Console.WriteLine("Call to Method2, expected: True, got: {0}", a.Method2());
    }
} 
```

输出：

```
调用 Method1，预期：True，得到：True
调用 Method2，预期：True，得到：False

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:54:33.377

我刚刚安装了 Visual Studio 2012 RTM，即使在为 Framework 3.5 或 2.0 编译时，相同的代码也能按预期工作。因此，显然这是一个编译器问题，而不是 .Net Framework 问题，并且已在新版本的 C# 编译器中得到修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T22:00:26.717

看起来这是一种错误。

这是你们正在谈论的链接，我认为是今年早些时候的链接：

[覆盖方法上的 C# 可选参数](https://stackoverflow.com/questions/8909811/c-sharp-optional-parameters-on-overridden-methods)

# ruby-on-rails - 将游戏数据库链接到 Rails 应用程序

> ID：11854108
> 
> 赞同：0
> 
> 时间：2012-08-07T21:02:04.320
> 
> 标签：ruby-on-rails, database

我的朋友已经为 Ragnarok Online 服务器设置了一个数据库，他希望我编写相关网站的代码，该网站将使用其中的一些数据（显然，我必须为新闻系统、网站帐户添加表格， ETC）。因为我正在学习 RoR，所以我打算这样做。我有一些与此相关的“最佳实践”问题：我是否应该为网站创建一个不同的数据库，因为它将与游戏数据一起拥有其特定数据？（我已经有一些线索可以将多个数据库与 Rails 链接起来，但这似乎太麻烦了）。如果不是，我是否必须为组成数据库的每个表创建模型/控制器，尽管我不会使用其中的 90%？或者只是我需要的那些？

这个问题的一个例子：游戏数据库有它自己的“用户”表，但我必须有另一个网站的“用户”表，并在这两者之间做一些连接。那么，这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:07:26.317

嗯，最佳实践不是制作自己的用户表。这会给你带来很大的痛苦。最佳实践？使用 API。以某种方式向您的网站公开游戏的数据库，并在您的 Web 应用程序中通过外部请求获取该信息。

制作第二个用户表的原因很麻烦：

> 1) 您必须不断更新它，从原始数据中提取数据以使其保持最新。

而且我的意思是，您将不得不创建一个 CRON 作业或从原始表中提取数据以使其保持最新状态。呸。另外，如果 CRON 工作出错了怎么办？（它会）

> 2）如果维护两个单独的表，几乎不可避免地会出现不一致。您确定您的 Web 应用程序真的是防故障的吗？

**更新：**

您需要的本质上是第二个 Rails 应用程序，它充当该数据库的 REST API。为了更好地了解 REST 是什么，我会通读这篇文章以帮助您入门：[http ://tomayko.com/writings/rest-to-my-wife](http://tomayko.com/writings/rest-to-my-wife)

一旦您对此有了很好的理解，就可以开始制作您的应用程序，并使用 cURL 等工具向您的 API 发送请求来测试它是否正常工作。

完成后，我将研究一下像 Nobita 提到的 Ruby *rest* - [client gem 。](https://rubygems.org/gems/rest-client)这就是您要从您的 Web 应用程序中使用的内容，以从您的 API 应用程序请求信息。

请注意，我认为这将是一个糟糕的第一个 Rails 项目，除非你已经非常精通其他 Web 开发工具，最好是 MVC 框架。

# jquery - 键入 jquery 时的验证

> ID：11854116
> 
> 赞同：1
> 
> 时间：2012-08-07T21:03:10.850
> 
> 标签：jquery, validation, function

我有这个 jQuery 代码，用于在用户键入时验证电子邮件输入：

```
$('#email').keyup(function() {
    if (!isValidEmailAddress(email)) {
        $('#validate').removeClass();
    } else {
        $('#validate').removeClass();
        $('#validate').addClass('validate');
    }
});​ 
```

但是，如果用户在键入例如“Da”时，浏览器会识别电子邮件并在“daniel@gmail.com”之类的下拉列表中显示一个完成它的选项，那么我可以在我的 jQuery 代码中使用什么事件来甚至当用户单击该下拉选项或单击输入以选择它时验证它...

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:30:34.967

如果您使用 jquery 1.7+ 绑定 keyup 并使用相同的方法更改事件：

```
$("#email").on("change keyup", function() {
    $('#validate').toggleClass('validate', isValidEmailAddress(this.value));
}); 
```

你可以缩短你的代码，如果电子邮件有效，你只想添加css类“验证”（我认为#email是一个输入表单，你想验证它的值）。

请记住，jQuery 对象会返回您查找的集合，因此请保存`$('validate')`到一个变量并使用该变量，而不是让 jquery 一遍又一遍地查找元素（在您的代码中最多几次）。

如果您使用的是旧版本的 jQuery，只需更改为[绑定](http://api.jquery.com/bind/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T22:35:55.810

也许这个插件可以帮助您满足您的需求，然后将其与您已有的代码集成。

**看看这个演示：**

[http://www.zurb.com/playground/jquery-text-change-custom-event](http://www.zurb.com/playground/jquery-text-change-custom-event)

希望这可以帮助 ：-）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T21:25:32.820

使用 Keyup 和 Change：

```
$("#email").change(validate).keyup(validate);;

function validate()
{
if (!isValidEmailAddress(email)) {
        $('#validate').removeClass();
    } else {
        $('#validate').removeClass();
        $('#validate').addClass('validate');
    } 
} 
```

小提琴示例：http: [//jsfiddle.net/johnkoer/Z8Z7b/7/](http://jsfiddle.net/johnkoer/Z8Z7b/7/) ​</p>

# colors - 谷歌电子表格中的每一天都有不同的颜色

> ID：11854119
> 
> 赞同：1
> 
> 时间：2012-08-07T21:03:16.487
> 
> 标签：colors, google-apps-script, google-sheets

我想做的就是每隔一天用不同的颜色格式化一次。例如;

```
01.01.2012 is Grey
01.01.2012 is Grey
01.01.2012 is Grey
02.01.2012 is White
02.01.2012 is White
03.01.2012 is Grey
03.01.2012 is Grey
04.01.2012 is White and so on... 
```

我的目的是使日期列易于阅读。

感谢帮助。谢谢。

# backbone.js - 使用 Rivets.js 迭代 Backbone.js 模型的集合？

> ID：11854126
> 
> 赞同：3
> 
> 时间：2012-08-07T21:03:54.747
> 
> 标签：backbone.js, rivets.js

我在 Backbone 项目中使用[Rivets.js](http://rivetsjs.com/)进行两个双向数据绑定，并希望实现迭代绑定。文档建议迭代绑定是可能的，但没有可用的示例。我正在使用一个简单的 Rails API 将 JSON 发送到客户端并希望遍历内容。有没有人成功地让这个功能在 Rivets.js 中工作？

参考资料：[使用 Backbone.js 和 Rivets.js 的简单示例](https://stackoverflow.com/questions/11719914/simple-example-using-backbone-js-and-rivets-js)

jsFiddle在这里：http: [//jsfiddle.net/rhodee/3qcYQ/1/](http://jsfiddle.net/rhodee/3qcYQ/1/)

来自 Rivets.js 网站

> ### 迭代绑定
> 
> 即使每个项目的绑定例程可能包含在 Rivets.js 中，您也可以在中间使用 data-html 绑定以及一组格式化程序来对集合进行排序和迭代渲染（以及其他很酷的事情）。
> 
> ```
> <ul data-html="model.tags | sort | tagList"></ul> 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T19:30:34.480

扩展这个答案：

> 从 0.3.2 开始，现在有一个 data-each-[item] 绑定正是为了这个目的。

请注意，您需要专门修改您的 Rivets**适配器**以使用 Backbone 集合，因为 Rivets.js 站点上的开箱即用示例不适用于此用例。

你需要这样的东西在你的`rivets.configure({ adapter: ... })`：

```
...
read: function( obj, keypath ) {
    return obj instanceof Backbone.Collection 
       ? obj["models"] 
       : obj.get(keypath)
} 
```

还有 JS 小提琴：http: [//jsfiddle.net/tigertim719/fwhuf/70/](http://jsfiddle.net/tigertim719/fwhuf/70/)

对于奖励积分，模型中嵌入的集合将需要在您的适配器中进行额外处理。

有关更多信息，请查看 Rivets.js Github 问题上的这篇文章：
[Binding to Backbone.Collection with the data-each-binding](https://github.com/mikeric/rivets/issues/57)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T02:07:57.810

从**0.3.2**开始，现在有一个[data-each-[item] 绑定](https://github.com/mikeric/rivets#iteration-binding)正是为了这个目的。

```
<ul>
  <li data-each-todo="list.todos">
    <input type="checkbox" data-checked="todo.done">
    <span data-text="todo.summary"></span>
  </li>
<ul> 
```

对于以前版本的 Rivets.js，您提到的解决方法是使用格式化程序实现迭代渲染 - 例如，您将`data-html`绑定`model.items | itemList`itemList 格式化程序只是在数组上循环并返回一些呈现的 HTML .

```
rivets.formatters.itemList = (array) ->
  ("<li>#{item.name}</li>" for item in array).join '' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T23:12:56.167

[UnderscoreJS](http://underscorejs.org/)集成在 Backbone 中，因此您可以使用其原生方法，如[_.each()](http://underscorejs.org/#each)或使用[集成的 Backbone Collection 下划线方法](http://backbonejs.org/#Collection-Underscore-Methods)。

这就是你要找的吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-08T00:32:20.910

cayuu 的回答是正确的。但是小提琴中的 rivets.js 引用不起作用，因此没有显示结果。

查看下面的版本以查看操作。

[http://jsfiddle.net/tigertim719/fwhuf/70/](http://jsfiddle.net/tigertim719/fwhuf/70/)

```
rivets.configure({
  adapter: {
    subscribe: function(obj, keypath, callback) {
      obj.on('change:' + keypath, callback);
    },
    unsubscribe: function(obj, keypath, callback) {
      obj.off('change:' + keypath, callback);
    },
    read: function(obj, keypath) {
        return obj instanceof Backbone.Collection ? obj["models"] : obj.get(keypath);
    },
    publish: function(obj, keypath, value) {
      obj.set(keypath, value);
    }
  }
}); 
```

最重要的部分是

```
read: function(obj, keypath) {
            return obj instanceof Backbone.Collection ? obj["models"] : obj.get(keypath);
        }, 
```

这告诉铆钉如何从 Backbone 读取您的收藏和模型。

# wcf - WCF over Named Pipes 在 .NET4 中引发异常，适用于 3.5

> ID：11854128
> 
> 赞同：1
> 
> 时间：2012-08-07T21:03:56.550
> 
> 标签：wcf, .net-4.0, .net-3.5, named-pipes

我正在尝试运行这个源自 [WCF 教程 - 基本进程间通信的博客条目的示例](http://www.switchonthecode.com/tutorials/wcf-tutorial-basic-interprocess-communication)

如果我在 .NET4 中运行服务器代码，则会引发以下异常：

```
First-chance exception at 0x754cd36f (KernelBase.dll) in TestConsole.exe: 0xE0564552: 0xe0564552. 
```

如果我在 .NET3.5 中运行服务器代码，它工作得很好。在两个测试中，客户端代码都是针对 .NET4 编译的。我的服务器代码如下：

```
[ServiceContract]
public interface IStringReverser
{
    [OperationContract]
    string ReverseString(string value);
}

public class StringReverser : IStringReverser
{
    public string ReverseString(string value)
    {
        char[] retVal = value.ToCharArray();
        int idx = 0;
        for (int i = value.Length - 1; i >= 0; i--)
            retVal[idx++] = value[i];

        return new string(retVal);
    }
}

class Program
{
    static void Main(string[] args)
    {
        using (ServiceHost host = new ServiceHost(typeof(StringReverser), new Uri[] { new Uri("net.pipe://localhost") }))
        {
            host.AddServiceEndpoint(typeof(IStringReverser), new NetNamedPipeBinding(), "PipeReverse");
            host.Open();

            Console.WriteLine("Service is available. Press <ENTER> to exit.");
            Console.ReadLine();

            host.Close();
        }
    }
} 
```

我的客户端代码如下：

```
[ServiceContract]
public interface IStringReverser
{
    [OperationContract]
    string ReverseString(string value);
}

class Program
{
    static void Main(string[] args)
    {
        ChannelFactory<IStringReverser> pipeFactory =
          new ChannelFactory<IStringReverser>(
            new NetNamedPipeBinding(),
            new EndpointAddress(
              "net.pipe://localhost/PipeReverse"));

        IStringReverser pipeProxy = pipeFactory.CreateChannel();

        while (true)
        {
            string str = Console.ReadLine();
            Console.WriteLine("pipe: " +
              pipeProxy.ReverseString(str));
        }
    }
} 
```

为什么这在 .NET4 上会失败？似乎是一个非常基本的例子。我确实在每次运行之间进行了清理/构建。这是实际堆栈跟踪的快照：

![在此处输入图像描述](../Images/a34d71208e5061207eaeac16439032fd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T16:42:30.933

事实证明，在 Visual Studio 中，我在 Debug -> Exceptions -> C++ Exceptions 中检查了“抛出”。如果我不抛出异常，而是让它被处理，一切正常。

# python - 如何更改 NDB 记录的祖先？

> ID：11854137
> 
> 赞同：5
> 
> 时间：2012-08-07T21:04:54.543
> 
> 标签：python, google-app-engine, google-cloud-datastore

在高复制数据存储（我使用 NDB）中，一致性是最终的。为了获得有保证的完整集，可以使用祖先查询。祖先查询还提供了一种很好的方法，可以通过 kindless 查询获取特定祖先的所有“孩子”。简而言之，能够利用祖先模型在 GAE 中非常有用。

我似乎遇到的问题相当简单。假设我有一个联系人记录和一个消息记录。给定的联系人记录被视为每条消息的祖先。但是，可能会为同一个人创建两个联系人（用户错误、不同的数据点等）。这种情况会产生两个联系人记录，其中包含与之相关的消息。

我需要能够“合并”两条记录，并将所有消息放入一大堆。理想情况下，我可以为记录的一个孩子修改祖先。

我能想到的唯一方法是创建一个映射并让我的应用程序检查记录是否已合并。如果有，请查看映射以找到一个或多个相关记录，并对这些记录执行查询。这似乎非常低效。是否有更多“按书本”的方式来处理这个用例？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T22:47:07.237

更改实体祖先的唯一方法是删除旧实体并使用新密钥创建新实体。必须对祖先路径中的所有子（和孙子等）实体执行此操作。如果这是不可能的，那么您列出的解决方案有效。

这是必需的，因为实体的祖先路径是其唯一键的一部分。实体的父级（即，祖先路径中的实体）不需要存在，因此更改父级的键将使子级在数据存储中没有父级。

# python - 分组窗口在窗口列表中显示脚本名称而不是标题

> ID：11854142
> 
> 赞同：0
> 
> 时间：2012-08-07T21:05:15.507
> 
> 标签：python, gtk, pygtk, gnome

我有一个使用 PyGTK 的 Python 应用程序。如果主窗口的标题是“Foo”，“Foo”将显示在 GNOME 的窗口列表中。由于当前配置了窗口列表，它将始终对来自同一应用程序的窗口进行分组。当我在主窗口顶部打开一个模态窗口时，窗口列表中的标题将更改为“foo.py”或任何 Python 脚本的名称。当窗口未分组时，两个窗口在列表中显示为“Foo”和“Bar”。

窗口分组时如何控制窗口列表中显示的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:03:45.730

分组窗口使用应用程序名称作为标签，AFAIK 默认为 argv[0]。这应该可以使用[`g_set_application_name`](http://developer.gnome.org/glib/unstable/glib-Miscellaneous-Utility-Functions.html#g-set-application-name)(`glib.set_application_name`在 PyGTK 中) 进行修改。如果这不起作用，请尝试`g_set_prgname`.

**更新：**旧版本的 PyGTK 在`gobject`模块中有它们，所以试试看。不要忘记检查这两个函数，因为 set_application_name 是相当新的。

如果这仍然不起作用，最后的手段是使用 ctypes，例如

```
import ctypes
libglib = ctypes.CDLL('libglib-2.0.so')
libglib.g_set_application_name("Hello World") 
```

如果这不起作用，那么您的 glib 可能太旧了；我不知道更多的解决方法。

# wordpress - Wordpress 循环 - 按标签显示来自不同帖子类型的帖子

> ID：11854143
> 
> 赞同：2
> 
> 时间：2012-08-07T21:05:18.507
> 
> 标签：wordpress

我正在尝试在 WP 循环中显示帖子，并且能够成功地使用`<?php query_posts('tag_id=10'); ?>`Here 循环将显示标签 ID 为 10 的所有帖子，但我也希望循环显示来自自定义帖子类型的帖子由同一个标签。

我能够使用 tag_id=10 成功显示源自自定义帖子类型的帖子`<?php query_posts('tag_id=10&post_type=videos'); ?>`

但是我怎样才能将两者合并？

我试了一下：`<?php query_posts('tag_id=10, tag_id=10&post_type=videos'); ?>` 但这没有效果。

关于这个有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T22:11:44.520

你可以用这个

```
query_posts( 
    array(
        'post_type' => array('post', 'videos'),
        'tag_id' => 10
));
while (have_posts()) : the_post();
    // loop code
endwhile;
wp_reset_query(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T12:46:03.780

这会在实际查询帖子**之前**运行一个操作，从而**将原始输出更改**为您的特定需求。

```
function tag_archive_mod( $query ) {

   if ( is_tag() && $query->is_main_query() ){

        $query->set('post_type',array('post','video'));

   }
}
add_action('pre_get_posts', 'tag_archive_mod'); 
```

**非常**非常好用。 [http://codex.wordpress.org/Plugin_API/Action_Reference/pre_get_posts](http://codex.wordpress.org/Plugin_API/Action_Reference/pre_get_posts)

# google-drive-api - 安装程序变了？

> ID：11854151
> 
> 赞同：1
> 
> 时间：2012-08-07T21:06:06.190
> 
> 标签：google-drive-api

由于应用程序范围已从 drive.app 移动到 drive.apps.readonly，因此安装过程似乎也发生了变化（？）。

它过去可以完美地授予对驱动器的访问权限，*而无需*将应用程序安装到驱动器。

现在，当用户授予访问权限时，该应用程序已安装一半 - 这意味着即使他没有从网上商店安装它，它也会出现在用户应用程序列表中。

这很糟糕，因为现在无法判断应用程序是否已安装。当应用程序安装一半时，自定义文件图标不会出现在驱动器中。

我的应用程序安装在更改之前运行良好 - 现在它似乎以某种方式损坏。现在是否有推荐的方法来更新驱动器集成以获得与以前相同的无缝体验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:19:31.643

作为解释，我们认为让用户能够看到所有被授权使用其云端硬盘的应用程序并以一种便捷的方式撤消访问权限非常重要。您的应用程序没有安装一半，它已安装，一旦安装，您可以要求用户根据需要授权文件。

很抱歉，您现在觉得这不是无缝的，我们正在为您改善这种体验，敬请期待。发生这种情况时，我会更新此答案。

# machine-learning - 对时间数据进行无监督学习的最新技术是什么？

> ID：11854154
> 
> 赞同：16
> 
> 时间：2012-08-07T21:06:12.047
> 
> 标签：machine-learning, cluster-analysis, time-series, pattern-recognition, unsupervised-learning

我正在寻找最先进的方法的概述，

*   **在时间**数据中查找**时间**模式（任意长度）

***   并且是**无监督**的（没有标签）。** 

 **换句话说，给定一个（可能是高维的）数据流/序列，你如何找到那些最能捕捉数据结构的**常见子序列。**

1.  欢迎任何指向最近的发展或论文（希望超越 HMM）的指针！

2.  这个问题是否在更具体的应用领域中得到了很好的理解，比如

    *   动作捕捉
    *   语音处理
    *   自然语言处理
    *   游戏动作序列
    *   股市预测？
3.  此外，这些方法中的一些是否足够通用以应对
    *   高噪声数据
    *   层次结构
    *   时间轴上的不规则间距

（我对检测已知模式*不*感兴趣，也不对序列的分类或分割感兴趣。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T13:23:31.337

最近有很多强调非参数 HMM、无限状态空间的扩展以及阶乘模型，使用一组因子而不是单个混合分量来解释观察。

以下是一些有趣的论文开始（只需谷歌论文名称）：

*   “无限隐马尔可夫模型的光束采样”
*   “无限因子隐马尔可夫模型”
*   “切换动态线性模型的贝叶斯非参数推理”
*   “在具有 beta 过程的动态系统之间共享特征”

这些论文的实验部分讨论了在文本建模、说话者分类和动作捕捉等方面的应用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:42:02.677

我不知道您正在分析的数据类型，但我建议（从动态系统分析的角度来看）看看：

*   **递归图**（很容易找到它）
*   **时间延迟嵌入**（可能展现数据不同维度之间的潜在关系）+**距离矩阵**（可能研究邻域模式？）

请注意，这只是表示数据的另一种方式，并基于这种新的表示进行分析。只是一个建议！**

# php - 增量 $_COOKIE[array] 不起作用？

> ID：11854159
> 
> 赞同：0
> 
> 时间：2012-08-07T21:06:22.387
> 
> 标签：php

我正在使用 a`$_COOKIE[array]`来保存单个输入的数据。仅当用户两次输入相同的值时，才会提交此输入。例如，如果他们提交了苹果，然后是橙子，然后是香蕉，然后是苹果，那么表单将在“苹果”的第二次出现时提交。

我阅读了[本教程]（ [http://phpprogramming.wordpress.com/2007/03/06/php-cookies-tutorial-and-examples/](http://phpprogramming.wordpress.com/2007/03/06/php-cookies-tutorial-and-examples/)）。

```
for ($i = 1; $i < 10; $i++) {
    if (!isset($_COOKIE[$i])) {
        setcookie("query" . [$i],$query,time()+604800,"/");
        break1;
    }
}
foreach ($_COOKIE["query"] as $key => $value) {
    echo "$key:$value";
} 
```

我相信这可能是一个语法错误，因为我得到：

```
Warning: Invalid argument supplied for foreach() 
```

如果您知道更好的方法（不能是 mySQL），请告诉我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:07:54.807

`$_COOKIE["query"]`不是数组，这就是产生错误的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T21:14:52.913

$_COOKIE['query'] 不能存储数组。这也是为什么在 foreach 中尝试使用它时会出错的原因。不过，您可以在保存数组之前对其进行序列化。像这样的东西

```
$array = array();
for ($i = 1; $i < 10; $i++) {
    $array[] = $i;
}
setcookie("query",urlencode(serialize($array)),time()+604800,"/");

$query = unserialize(urldecode($_COOKIE['query']));
foreach ($query as $key => $value) {
    echo "$key:$value";
} 
```

还可以查看这篇文章[update cookie value in php](https://stackoverflow.com/questions/7425774/update-cookie-value-in-php)以解释为什么使用 urlencode / urldecode

# selenium - 如何从存储的 HTML 生成屏幕截图作为字符串？

> ID：11854160
> 
> 赞同：2
> 
> 时间：2012-08-07T21:06:38.590
> 
> 标签：selenium, webkit, webdriver, screenshot

是否可以从保存的 HTML 字符串生成屏幕截图？

（更具体地说，我的意思是非常简单的页面）

我知道有很多基于 webkit 的库可以生成屏幕截图，但它们似乎都需要一个 URL。如果 HTML 内容被存储或存储在变量中怎么办？

我更喜欢 Python，但我愿意接受任何其他解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:12:26.397

是的，在java中有一个awt控件可以做到这一点。您可以传递 html 字符串的内容，它可以生成屏幕截图。

这是一种类似的类型：

[http://code.google.com/p/java-html2image/](http://code.google.com/p/java-html2image/)

# sharepoint-2010 - Sharepoint 2010 中断权限继承

> ID：11854162
> 
> 赞同：0
> 
> 时间：2012-08-07T21:06:42.903
> 
> 标签：sharepoint-2010, permissions, sharepoint-workflow, sequential-workflow

我需要创建一个会破坏共享点子站点中的权限继承的工作流。

我正在构建一个高度模块化的 Sharepoint 2010 站点，并且可以根据客户需求进行扩展。项目要求是客户必须能够以尽可能少的交互来扩展网站并从模板中添加子网站。为此，我创建了一个列表并将一个工作流附加到该列表，该工作流根据列表字段中提供的信息创建一个新网站。我使用的工作流程是我在网上找到的解决方案[http://www.ilovesharepoint.com/2011/02/create-site-action-sharepoint-designer.html](http://www.ilovesharepoint.com/2011/02/create-site-action-sharepoint-designer.html)

创建网站后，我需要创建安全组（我在网上找到的另一个工作流程对此有所帮助）。

问题是子站点必须从父站点继承安全组，然后我需要添加新的。为了做到这一点，我需要中断从父站点的继承，然后我可以创建新组。目前我的客户必须手动执行此操作 - 非常糟糕。所以我需要创建一个可以做到这一点的工作流程。

问题是我完全不知道如何去做。

理想情况下，我想创建某种工作流操作，将站点 url 作为输入，然后破坏权限。据我所知，我需要使用 BreakRoleInheritance 函数来做到这一点。但是如何创建一个接受输入的工作流以及如何将字符串输入转换为实际站点？

就像我说的，我对共享点编码一无所知，所以请尽可能具体。

非常感谢。

PS也许我错了，我不需要打破继承来创建仅适用于给定子站点的其他安全组。如果是这样，请告诉我如何在不破坏继承的情况下做到这一点。

# gwt - 无法将自定义小部件添加到 GWT Designer 调色板

> ID：11854168
> 
> 赞同：3
> 
> 时间：2012-08-07T21:07:01.797
> 
> 标签：gwt, gwt-designer

我为一个项目编写了一些自定义复合小部件，并将它们编译成一个单独的 jar 文件。我将此 jar 文件添加到 GWT 项目的构建路径中。当我尝试将小部件添加到调色板时（通过按“选择组件”按钮），我可以在列表中选择复合小部件的类，但出现以下错误：

> WindowBuilder 无法加载 com.test.common.ui.LocationBox。这可能是由 ClassLoader 问题引起的。是否要刷新编辑器并重试？

我在这里做错了什么？有什么我需要添加到 jar 中以使其正确加载吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-30T08:49:33.723

有时 GWT 设计器不会拾取更改的类或无法找到它们。我建议使用菜单“Project->Clean”进行完全重建，然后关闭并重新打开设计器。如果这没有帮助，请在重新打开设计器之前尝试重新启动 eclipse。

# css - 仅在我的网站上出现奇怪的字体大小问题

> ID：11854171
> 
> 赞同：1
> 
> 时间：2012-08-07T21:07:09.497
> 
> 标签：css, font-size

我目前正在为我的大学图书馆开发一个网站，但出现了一个非常奇怪的问题。网站上的字体，无论是实时版本还是我机器（不是服务器）上的字体，总是比它应该的小。这只是在两台计算机上的情况——我自己的和我的主管。它发生在所有浏览器中。我很确定我们俩都发生了这种情况，因为我们已经处理了代码，但我想不出任何 CSS 规则会影响它。更糟糕的是，它影响了两个不同的 CSS——旧站点（我没有接触过）和打算明天推出的新站点。我尝试修复计算机显示字体的方式、浏览器显示字体的方式、更改分辨率并尝试放大。这些方法都不起作用。还，其他具有相同分辨率和显示器的计算机看起来就好了。我访问的其他网站都没有这个问题。我难住了。有任何想法吗？

该网站在这里： http: [//library.uis.edu](http://library.uis.edu)

文字对比可以看这里：http: [//imgur.com/a/Tb7Mv](http://imgur.com/a/Tb7Mv)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:27:04.783

我认为这可能是字体问题，而不是字体大小问题。Myriad pro 不被视为 websave 字体。由于您的机器和您的主管可能已经安装了 Adob​​e，这是 Myriad 附带的，您在 Myriad 中看到该站点，而其他机器在 Verdana 中看到该站点。（虽然不完全确定）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T21:23:42.273

看起来您将 Myriad Pro 称为第一个字体。我的系统上安装了该字体，但您称字体大小为 75%，这在 Myriad Pro 之类的字体上会大大缩小。如果我将 font-size 和 font-family 清除为 Verdana，它会呈现正常，但是您的一些元素（例如选项卡式导航）将需要解决。

除非您使用@font-face 和网络生成的字体包，否则我会远离这样的字体。通过选择 Myriad Pro 作为您的字体，您将只在也具有该字体的计算机上呈现该字体。考虑使用类似谷歌网络字体的东西：[http ://www.google.com/webfonts/](http://www.google.com/webfonts/)

在正文级别使用字体很好，对于这些元素（而不是正文），应该在全局级别处理交叉字体（标题与段落）。假设正文将占据正文中的大部分文本。您可以定义标准字体大小，例如 1.0em；如果您愿意，可以在正文级别定义 em 大小，然后如果您不想使用正文中的 1.0em，则为其他元素（例如 h1、h2 标签和 p 标签）定义 em 大小。

# php - 将文件从尼康 D60 数码相机复制到 WAMP 服务器的脚本？

> ID：11854178
> 
> 赞同：2
> 
> 时间：2012-08-07T21:07:45.723
> 
> 标签：php, windows, wamp

我几乎完成了我的 photobooth 应用程序，但我需要能够从带有 WAMP 的 Nikon D60 访问文件。至少我需要一个程序，它可以从相机中复制新照片，并每隔一段时间将它们放在一个目录中。以前有人用过这样的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:45:23.040

我最终使用[http://www.diyphotobits.com/](http://www.diyphotobits.com/)中的一个小程序将文件复制到我的 WAMP 服务器上的目录中。然后我使用带有 GLOB 的脚本来收集目录中的所有文件，处理它们，然后制作一个前端系统可以访问的 XML 清单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T21:18:35.537

在不知道将为您的尼康分配哪个驱动器号的情况下，您应该对相机驱动器的层次结构有所了解。我知道当我插入数码相机时，我会有一个 DCIM 文件夹，里面有我的照片。您可以浏览所有驱动器以查找与尼康匹配的层次结构，也可以对相机“通常”分配的驱动器进行编码。

在复制内容方面，可以尝试使用[复制](http://php.net/manual/en/function.copy.php)命令；大多数文件结构命令的大问题都处理权限问题，请确保运行 php 命令的用户有权访问您将访问的任何文件夹。

# javascript - 如何创建阻止对话框

> ID：11854181
> 
> 赞同：0
> 
> 时间：2012-08-07T21:07:54.527
> 
> 标签：javascript, jquery, ajax

有没有办法使用 Javascript/JQuery/Ajax 创建阻塞对话框...

我使用了 JQuery UI 对话框。由于这是一个异步函数，我使用了回调函数。然而，它使 if/else 的简单 JS 代码变得非常复杂。

例如

```
ans1 = confirmBox("something"); 
 if(ans1){
    ans2 = dialogBox(); 
    if(ans2)
        alertBox();
    else {
        ans3 = dialogBox(); 
        ....
    }   
 }  
 else {
 } 
```

...其余代码

回调使这变得非常复杂。有没有替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:14:58.713

没有办法让 JavaScript 阻塞并等待条件。您需要使用回调方法。

也许如果您需要所有这些步骤，最好以不同的方式进行。

# mysql - Mysql比较和排序

> ID：11854186
> 
> 赞同：0
> 
> 时间：2012-08-07T21:08:14.220
> 
> 标签：mysql

我有一个这样的sql查询

```
SELECT * FROM $tbl_name WHERE $maxID<=id ORDER BY id DESC LIMIT 8 
```

在这里，我想检索 id 与 $maxID 最接近的行，但是它检索具有最大 id 的前 8 行，当我删除“ORDER BY id DESC”时，它会在其他情况下工作，它会检索最接近的行。但是我不明白“ORDER BY id DESC”在这里的效果。它应该只对结果进行排序，不应该影响检索到的结果。另一个问题，这个查询是否检索到所有大于 $maxID 的行？如果是这样就不利于效率。我不希望检索所有行。我只想检索 8 个元素。性能对我的系统很重要。在此站点中：[http](http://www.xarg.org/2011/10/optimized-pagination-using-mysql/) ://www.xarg.org/2011/10/optimized-pagination-using-mysql/ 使用“其中 x

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:43:02.367

根据您的意见，您应该使用

```
WHERE id > $minID ORDER BY ID ASC LIMIT 8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T21:17:58.453

这很高兴，因为考虑一下 <= 的含义，您要求的或多或少。当您的意思是最接近时，您真正要的是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T21:13:44.527

您可能需要重新排序 where 子句以使其更易于阅读。根据查询中的逻辑，您需要 ID >= $maxID 的所有行。你确定这就是你要找的吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T21:34:31.223

为您提供与过滤器匹配的`WHERE`所有行；`LIMIT`停止过滤并在 8 行后返回。由于该集合是按过滤条件降序排列的，因此它只会为您提供最大的 8 个 id，因为它们显然都大于`$maxID`.

您可能希望使用[子查询](http://dev.mysql.com/doc/refman/5.1/en/subqueries.html)来实现您的目标，例如像这样（未经测试）：

```
SELECT * FROM $tbl_name ORDER BY id DESC LIMIT 8 
WHERE id IN (SELECT id FROM $tbl_name WHERE $maxID<=id); 
```

此查询从所有元组包含小于或等于 id 的行的结果集中选择 8 个最大 id 行`$maxID`。这 8 行应该具有您想要的属性：最接近或等于`$maxID`.

# javascript - 如何调整d3.js中箭头的方向？

> ID：11854189
> 
> 赞同：2
> 
> 时间：2012-08-07T21:08:47.107
> 
> 标签：javascript, firefox, svg, d3.js

我从 Mike Bostock 的幻灯片中复制代码（使用最新版本的 d3.js）

该图可以在以下位置查看： [http ://cistrome.org/~hanfei/d3/bad_arrow/c.html](http://cistrome.org/~hanfei/d3/bad_arrow/c.html)

但是，我发现标记（箭头）有一些奇怪的行为，`Safari`在`Firefox`. （见下面的截图）

在 Safari 中： ![在 Safari 中](../Images/5ce56f8fb70b4abf89e16483448722d9.png)

在 Firefox（14.0.1 最新）中： ![在火狐中](../Images/8259ad55d233ce0a736e06336f9fb064.png)

任何人都知道如何解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T14:07:58.720

此错误出现在 Firefox 13 中。它在 Firefox 15 中由[错误 769115 修复。](https://bugzilla.mozilla.org/show_bug.cgi?id=769115)您可以下载 Firefox 15 的测试版或等到发布。

# android - 动态添加元素到 ViewPager

> ID：11854192
> 
> 赞同：2
> 
> 时间：2012-08-07T21:09:00.803
> 
> 标签：android, android-viewpager

我已经开始使用 ViewPager 并且无法理解如何通过按下主布局上的按钮来添加新元素，如 TextView。我尝试了不同的方法，但没有一个成功。

任何想法都会对我有好处...

这是我的代码：

```
public class SimpleViewPagerActivity extends Activity {

    private ViewPager myPager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        MyPagerAdapter adapter = new MyPagerAdapter();
        myPager = (ViewPager) findViewById(R.id.mypager);
        myPager.setAdapter(adapter);
        myPager.setCurrentItem(1);

        Button btn_add = (Button) findViewById(R.id.button1);

        btn_add.setOnClickListener(new OnClickListener() {      

            @Override
            public void onClick(View v) {

            }
        });
    }

    private class MyPagerAdapter extends PagerAdapter {

        @Override
        public View instantiateItem(View collection, int position) {

            LayoutInflater inflater = (LayoutInflater) collection.getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            int resId = 0;
            switch (position) {
            case 0:
                resId = R.layout.left;
                break;
            case 1:
                resId = R.layout.middle;
                break;
            case 2:
                resId = R.layout.right;
                break;
            }

            View view = inflater.inflate(resId, null);

            ((ViewPager) collection).addView(view, 0);

            return view;
        }

        @Override
        public void destroyItem(View arg0, int arg1, Object arg2) {
            ((ViewPager) arg0).removeView((View) arg2);

        }

        @Override
        public void finishUpdate(View arg0) {
            // TODO Auto-generated method stub

        }

        @Override
        public boolean isViewFromObject(View arg0, Object arg1) {
            return arg0 == ((View) arg1);

        }

        @Override
        public void restoreState(Parcelable arg0, ClassLoader arg1) {
            // TODO Auto-generated method stub

        }

        @Override
        public Parcelable saveState() {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public void startUpdate(View arg0) {
            // TODO Auto-generated method stub

        }

    }

} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/lt_lin"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Button" />

    <android.support.v4.view.ViewPager
        android:id="@+id/mypager"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"/>

</LinearLayout> 
```

中间.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/text" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T22:41:27.883

我没有看到任何获取 ViewPager 上当前视图的方法，这很奇怪。但是您可以通过其他方式实现适配器并将视图存储在任何集合或地图中。我不知道它是否会工作，从我的脑海中编写代码。

例如

```
private class MyPagerAdapter extends PagerAdapter {

 private Map<Integer, View> views = new HashMap<Integer, View>();
 ...

    @Override
    public View instantiateItem(View collection, int position) {

            LayoutInflater inflater = (LayoutInflater) collection.getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            int resId = 0;
            switch (position) {
            case 0:
                resId = R.layout.left;
                break;
            case 1:
                resId = R.layout.middle;
                break;
            case 2:
                resId = R.layout.right;
                break;
            }

            View view = inflater.inflate(resId, null);

            ((ViewPager) collection).addView(view, 0);
            views.put(position, view);
            return view;

    }   

    public View getView(int pos){
        return views.get(pos);
    }   

}

btn_add.setOnClickListener(new OnClickListener() {      

            @Override
            public void onClick(View v) {
                View view = adapter.getView(pager.getCurrentItem());
                if (view instance ViewGroup){
                    view.add(your_new_view);
                }
            }
        }); 
```

# c# - 如何在 WP7 上播放在线广播？

> ID：11854194
> 
> 赞同：2
> 
> 时间：2012-08-07T21:09:09.520
> 
> 标签：c#, windows-phone-7, streaming, audio-streaming, audio-playback-agent

我正在尝试创建一个广播应用程序，其中包含 MP3 流 url 的集合。但是，我在流式传输（或播放）音频时遇到了一些麻烦。

我正在尝试连接到原始数据流，例如插入 VLC 的原始数据流。一个示例 url 是[http://mp3.ht-stream.net/;80](http://mp3.ht-stream.net/;80)（只需将这个和其他几个插入 VLC，它就可以完美地工作）。基本上是您的标准互联网广播供稿。

我创建了`AudioPlaybackAgent`, 填写了我认为启动和运行它所需的内容，当我通过 Internet 流式传输常规 .mp3 文件时一切正常。但是当我尝试连接到这些流时，它不会做（或播放）任何事情。

我认为这可能是因为我没有使用`AudioStreamingAgent`（带有`MediaStreamSource`实现），但是这些东西对我来说有点太高级了，而且在搜索互联网几个小时后我了解到，mp3 流可以使用它`AudioPlaybackAgent`。

关于如何完成这项工作的任何建议？我必须改用一个`AudioStreamingAgent`吗？有没有关于我如何实现这个神秘类的开源示例`MediaStreamSource`？我应该放弃我的好主意吗？任何答案将不胜感激。

如果您想了解一下，我的 AudioPlayer.cs 代码[可以在这里找到——但它主要是标准的东西。](http://www.kristoferselbekk.com/test/AudioPlayer.cs.txt)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T04:02:50.460

查看[Background Audio Streamer](http://go.microsoft.com/fwlink/?LinkId=226292)示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T01:12:06.280

您无法轻松地从提供的链接播放音频，因为这不是常规的音频文件。这是[SHOUTcast](http://en.wikipedia.org/wiki/SHOUTcast)流。

您可以检查一些开源实现并弄清楚如何使用此音频流。例如：[Shoutcast MediaStreamSource](http://shoutcastmss.codeplex.com/)。

所以我可以说你需要在你的应用中实现很多东西来播放这个流。没有快速简便的方法。

# scripting - Adobe Premiere 脚本

> ID：11854196
> 
> 赞同：3
> 
> 时间：2012-08-07T21:09:13.887
> 
> 标签：scripting, automation, adobe-premiere

我想在 Adob​​e Premiere Pro CS6 上自动执行一系列任务，这都是重复的任务，而手动执行会消耗大量时间，:) 来自：导入视频文件、图像文件、doc 文件-> 制作序列->以预定义的高度、宽度按顺序添加文件-> 插入脚本-> 分析它们-> 在元数据上的特定单词上添加标记-> 最后导出它..

我想使用 adobe Premier pro 或其他任何脚本上的一些脚本自动完成所有这些任务......

欣赏

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-03-05T18:53:51.803

Premiere 和其他 Adob​​e Creative Suite 应用程序一样，可以使用其 Extendscript API 编写脚本。Extendscript 使用 javascript。它有一个名为 Extendscript Toolkit 的官方 Adob​​e IDE，它有一个脚本编辑器、调试器和一个对象模型查看器。

有一个问题，对于首映，文档非常稀缺。很遗憾，因为对于像 After Effects 这样的其他程序，有一个蓬勃发展的开发人员社区，他们用extendscript 做着惊人的事情。

Adobe Javascript 指南在[这里](http://wwwimages.adobe.com/content/dam/Adobe/en/devnet/scripting/pdfs/javascript_tools_guide.pdf)，一些专门针对 Premiere 的课程信息可以在[这里](http://cssdk.s3-website-us-east-1.amazonaws.com/sdk/2.1/docs/WebHelp/references/csawlib/com/adobe/premiere/package-detail.html)找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T15:15:16.220

如果您在 PC 平台上，请尝试查看免费的 Windows 自动化软件包，例如 AutoIT 或 AutoHotKey。我已经使用 AutoHotKey 好几年了，这个工具可以用来自动化几乎任何你能想到的东西。它是一种脚本语言，有一个学习曲线，但如果你遵循那里的许多 tuts 和示例，它就很容易使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-06T15:43:13.197

它似乎没有得到官方的支持、提及或使用（可能是因为大多数用户认为编程是“书呆子”的东西并且不去碰它？） - 无论如何：

*   [http://forums.adobe.com/message/5310306](http://forums.adobe.com/message/5310306)

不幸的是，文档很吓人，我不知道哪个版本可能支持脚本（以及哪个操作系统）。

# facebook - 事件列表的 FQL 多查询优化

> ID：11854198
> 
> 赞同：1
> 
> 时间：2012-08-07T21:09:16.267
> 
> 标签：facebook, fql.multiquery

我正在开发 Facebook 中的自定义事件应用程序，并遇到了响应似乎很慢的问题。缓慢主要与尝试搜索与事件地理位置相关联的页面有关。即“城市，国家”。一旦这样的 URL 将是：

[http://www.facebook.com/pages/Buenos-Aires-Argentina/106423786059675](http://www.facebook.com/pages/Buenos-Aires-Argentina/106423786059675)

我已经确定可以使用以下 FQL 查询获取此类页面的页面 URL：

SELECT page_id, page_url FROM page WHERE name = "Buenos Aires, Argentina" AND type = "CITY"

type 列等于 CITY 很重要，否则可能会返回其他不相关的页面 URL。

无论如何，为了获取用户的所有事件并显示他们的 rsvp 状态，显示有关场地的信息并获取地理位置页面 URL，我正在运行以下多查询 FQL：

```
[events_query] => SELECT eid, name, pic_square, start_time, end_time, location, description, all_members_count, venue   FROM event WHERE eid IN (SELECT eid FROM event_member WHERE uid = 6747251459 AND start_time > 0)  AND start_time > 0 AND end_time < now() ORDER BY start_time desc LIMIT 5

[rsvp_query] => SELECT eid, rsvp_status FROM event_member WHERE eid IN (SELECT eid FROM #events_query) AND uid = YOUR_EVENTS_UID

[venue_page_id_query] => SELECT page_id FROM place WHERE page_id IN (SELECT venue.id FROM #events_query)

[venue_info_query] => SELECT page_id, name, page_url, location FROM page WHERE page_id IN (SELECT page_id FROM #venue_page_id_query)

[geo_city_country_query] => SELECT name, page_url FROM page WHERE name IN (SELECT concat(location.city, ', ', location.country) FROM #venue_info_query) AND type = "CITY" 
```

我的问题是，在执行“geo_city_country_query”时，响应速度变慢了很多。大约+5秒。如果没有“geo_city_country_query”查询，响应时间约为 1.5sec-2sec。

有什么办法可以让我更快地完成这项工作吗？

提前致谢！

# html - 删除了 a 上方和下方的边距 元素？

> ID：11854202
> 
> 赞同：3
> 
> 时间：2012-08-07T21:09:32.647
> 
> 标签：html, css

我遇到了与`<div>`元素边距相关的奇怪行为。[我已经向 jsFiddle 添加了一个非常简单的测试用例来向您展示我的意思](http://jsfiddle.net/PptDn/)。

有趣的是，边距在使用边框时使用正确。这是默认行为吗？这与折叠边距有关吗？是否有可能在没有任何黑客攻击的情况下以某种方式强制利润率？

**到目前为止我想到的最丑陋的解决方案：**

```
.cssContainer {
    margin:10px;
    padding:0.1px;

    background-color:#FF0000;
} 
```

但我不知道这是否适用于每个浏览器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T21:17:59.030

这又是一个`overflow:auto`救命的案例！

**[jsFiddle 示例](http://jsfiddle.net/j08691/PptDn/4/)**

只需添加`overflow:auto`到您的容器 div 中，瞧，和谐就恢复了。

```
.cssContainer {
    margin:10px;
    padding:0px;
    overflow:auto;
    background-color:#FF0000;
} 
```

从[规范](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)来看，这样做的原因是因为一个新的*块格式化上下文*是通过应用`overflow`other来建立的`visible`，强制 margin`.cssContainer`不与其流入的子项一起折叠`.cssElement`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T21:14:10.997

从[这个网站](http://reference.sitepoint.com/css/collapsingmargins)

> 阻止边距折叠发生的最简单方法是为每个元素添加填充或边框。如果我们希望每个元素有 10px 的边距，我们可以简单地使用 9px 的边距和 1px 的填充来获得我们想要的结果

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T21:32:48.133

这是由于[CSS 盒子模型](http://www.w3.org/TR/CSS2/box.html)。具有红色背景的元素的高度不会增加以适应其子元素的顶部和底部填充，但由于在第二个示例中指定了边框并包含填充，因此将显示填充。

该`overflow: auto;`属性有效，因为填充溢出其父元素。为了说明这一点，在 Google Chrome 开发人员工具中，找到并单击底部填充不会显示的绿色元素的 HTML 行。Chrome 将突出显示页面上的元素。注意填充是如何包含在突出显示的元素中的。填充实际上溢出了父元素。父元素不会显示它，因为在填充中或之后没有内容（没有“边界”）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T22:57:17.290

从[关于盒子模型的css规范](http://www.w3.org/TR/CSS2/box.html)：

> 相邻的垂直边距折叠，除了：
> 
> ...
> 
> 水平边距永远不会塌陷。
> 
> 两个边距相邻当且仅当：
> 
> ...
> 
> ```
> both belong to vertically-adjacent box edges, i.e. form one of the following pairs:
>     top margin of a box and top margin of its first in-flow child
>     bottom margin of box and top margin of its next in-flow following sibling
>     bottom margin of a last in-flow child and bottom margin of its parent if the parent has 'auto' computed height 
> ```
> 
> ...
> 
> ***请注意**，上述规则意味着：*
> 
> ...
> 
> 建立新块格式化上下文的元素的边距（例如浮动和具有“[溢出](http://www.w3.org/TR/CSS2/visufx.html#propdef-overflow)”而不是“可见”的元素）不会与它们的流入子代一起折叠。

不幸的是，`text-overflow: auto`这有点冒险[，因为规范说](http://www.w3.org/TR/CSS2/visufx.html#propdef-overflow)：

> ### 汽车
> 
> 'auto' 值的行为取决于用户代理，但应该为溢出的框提供滚动机制

但是，我查看过的所有浏览器似乎都以以下方式实现它：

该框扩展为以下之间的较小数量：

1.  在其容纳盒允许的范围内
2.  尽可能多地显示内容而不进行剪辑

然后，如果必须进行剪辑，则添加滚动条。

# vba - PivotCaches.add 错误 5 - 2003 到 2010 宏

> ID：11854203
> 
> 赞同：3
> 
> 时间：2012-08-07T21:09:41.187
> 
> 标签：vba, excel, excel-2010, excel-2003

我有一个 Excel 2003 .xls 文件，我正在尝试在 Excel 2010 中运行。我首先将文件保存为 .xlsm 并将目录添加为信任中心中的受信任目录。我收到一个错误代码（如下箭头所示）。注意：如果我将 PivotTableVersion 更改为 12，它仍然会给我同样的错误。代码如下。

```
 Sub Create_pivot()
        Wbname = ActiveWorkbook.Name
    '   Insert columns to make room for pivot table
        Columns("A:I").Select
        Selection.Insert Shift:=xlToRight
        myData = Sheets(ActiveSheet.Name).[J1].CurrentRegion.Address
        mySheet = ActiveSheet.Name & "!"
        tableDest = "[" & Wbname & "]" & mySheet & "R1C1"
>>>>    ActiveWorkbook.PivotCaches.Add(SourceType:=xlDatabase, SourceData:= _
            mySheet & myData).CreatePivotTable TableDestination:=tableDest, TableName _
            :="RTP_alerts", DefaultVersion:=xlPivotTableVersion10
        With ActiveSheet.PivotTables("RTP_alerts").PivotFields("Application")
            .Orientation = xlRowField
            .Position = 1
        End With
        With ActiveSheet.PivotTables("RTP_alerts").PivotFields("Object")
            .Orientation = xlRowField
            .Position = 2
        End With
        ActiveSheet.PivotTables("RTP_alerts").AddDataField ActiveSheet.PivotTables( _
            "RTP_alerts").PivotFields("Alerts"), "Count of Alerts", xlCount
        ActiveWorkbook.ShowPivotTableFieldList = False
        Application.CommandBars("PivotTable").Visible = False

        Columns("G:I").Select
        Selection.Delete Shift:=xlToLeft
        Range("D2").Select
        ActiveCell.FormulaR1C1 = "Owner"
        Range("E2").Select
        ActiveCell.FormulaR1C1 = "Problem Ticket"
        Columns("E:E").ColumnWidth = 13
        Range("F2").Select
        ActiveCell.FormulaR1C1 = "Comments"
        Columns("F:F").ColumnWidth = 48
    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T15:42:54.637

他们将对象模型更改为`PivotCaches`. 您在 2007-2010 年需要的方法（使用 VBA 版本 7 而不是版本 6）是

```
PivotCaches.Create 
```

您可以使用条件编译来创建适用于两者的代码，如下所示：

```
Dim pc As PivotCache
Dim pt As PivotTable
Dim lVBAVer As Long

lVBAVer = CLng(Application.VBE.Version)

#If lVBAVer <= 6 Then
    Set pc = ActiveWorkbook.PivotCaches.Add(xlDatabase, Sheet1.UsedRange)
#Else
    Set pc = ActiveWorkbook.PivotCaches.create(xldtatabase, Sheet1.UsedRange)
#End If

Set pt = pc.CreatePivotTable(Sheet2.Range("A3")) 
```

关键字前面的哈希`If/EndIf`意味着在使用该版本中不存在的方法时不会出现编译错误，但它仍会执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T12:02:55.240

我最近从 Excel 2003 升级到 Excel 2010。我在许多包含宏的 .xls 文件中遇到了类似的问题：一般错误 [-2147417848 (80010108)] 如下所示：

```
ActiveWorkbook.PivotCaches.Add(SourceType:=xlDatabase, SourceData:= _
    NomeFoglioDett & "!R1C1:R" & UltimaRiga & "C18").CreatePivotTable TableDestination:="", _
    TableName:="Tabella_pivot1", DefaultVersion:=xlPivotTableVersion10 
```

我尝试了各种操作：保存为 .xlsm 或 .xls (97-2003)，从 PivotCaches.Add 修改为 PivotCaches.Create，将 DefaultVersion 从 xlPivotTablesVersion10 更改为 xlPivotTablesVersion12 或 14。没有任何效果。最后我意识到这可能只是在创建数据透视表之上。这里没有工作的说明：

```
Dim Anno As String
Dim Percorso As String
Dim NomeFileOut As String
Dim NomeFoglioDett As String
Dim UltimaRiga As String

Anno = "2013"
Percorso = ActiveWorkbook.Path & "\"
NomeFileOut = "MyName1." & Anno & ".0m.1.BIn.xls"
NomeFoglioDett = " MyName2." & Anno & ".0m.1.Tp2"
'.
'.
'.
'================= Creazione Tabella Pivot
'Riapro il Batch Input in formato Excel - foglio dei tipi 2
Workbooks.Open Filename:=Percorso & NomeFileOut
'Cerco l'ultima riga piena
UltimaRiga = Range("A60000").End(xlUp).Row
'Creo la tabella Pivot
'totali Importi segnati per Descrizioni ridotte
ActiveWorkbook.PivotCaches.Add(SourceType:=xlDatabase, SourceData:= _
    NomeFoglioDett & "!R1C1:R" & UltimaRiga & "C18").CreatePivotTable TableDestination:="", _
    TableName:="Tabella_pivot1", DefaultVersion:=xlPivotTableVersion10
ActiveSheet.PivotTableWizard TableDestination:=ActiveSheet.Cells(3, 1)
ActiveSheet.Cells(3, 1).Select
With ActiveSheet.PivotTables("Tabella_pivot1").PivotFields("Mese")
    .Orientation = xlRowField
    .Position = 1
End With
With . . . 
```

这里是相同的说明，但进行了更改 - Sheets(2).select - 解决了保存在 .xls 和 .xlsm 中的文件的问题：

```
'================= Creazione Tabella Pivot
'Riapro il Batch Input in formato Excel - foglio dei tipi 2
Workbooks.Open Filename:=Percorso & NomeFileOut
    Sheets(2).Select
'Cerco l'ultima riga piena
UltimaRiga = Range("A60000").End(xlUp).Row
'Creo la tabella Pivot
'totali Importi segnati per Descrizioni ridotte
ActiveWorkbook.PivotCaches.Add(SourceType:=xlDatabase, SourceData:= _
    NomeFoglioDett & "!R1C1:R" & UltimaRiga & "C18").CreatePivotTable TableDestination:="", _
    TableName:="Tabella_pivot1", DefaultVersion:=xlPivotTableVersion10
ActiveSheet.PivotTableWizard . . . 
```

Excel 2010 似乎以旧方式接受数据透视表的创建，但希望在打开 .xls 文件时更精确：它想知道必须读取哪个工作表。

# ios - 如何在 iOS 中停止我的表格视图单元格多次加载其子视图？

> ID：11854204
> 
> 赞同：0
> 
> 时间：2012-08-07T21:09:45.217
> 
> 标签：ios, uitableview

我在表格的视图单元格中使用 FontLabel。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    FontLabel *author_name = [[FontLabel alloc] initWithFrame:CGRectMake(58, 10, 217, 16) fontName:@"MyriadPro-Bold" pointSize:12.0f];
    author_name.numberOfLines = 1;
    author_name.text = [dummyArray objectAtIndex:indexPath.row];
    author_name.textColor = [UIColor colorWithRed:0.580 green:0.776 blue:0.329 alpha:1.000];
    author_name.backgroundColor = [UIColor clearColor];

    [cell addSubview:author_name];
    return cell;

} 
```

但是标签被加载了多次。我可以看到它越来越大胆。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:16:47.740

当您调用时`addSubview`，它不会删除旧视图。请记住，单元格被重复使用，因此您在上次迭代中添加的视图仍然存在。

您应该改为子类`UITableViewCell`，以便您可以添加 a`UILabel`到它。

**编辑：**

或者你可以做

```
author_name.tag = 10; 
```

接着

```
FontLabel *author_name = (FontLabel *)[cell.contentView viewWithTag:10]; 
```

当你想找回它。

# iphone - iOS 使用相同语言测试多个区域/域

> ID：11854210
> 
> 赞同：0
> 
> 时间：2012-08-07T21:10:19.597
> 
> 标签：iphone, ios, multilingual

有没有办法在同一个应用程序中支持“拉丁”西班牙语和“卡斯蒂利亚”西班牙语？如果有，你如何测试它？

我目前支持多种语言，并且我在应用程序中拥有所有语言文件，但我似乎无法通过更改区域在模拟器或设备上切换语言。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T04:44:00.897

以防万一有人看到这篇文章，我发现 iOS 只支持一个版本的西班牙语。该列表位于每台设备的国际语言设置中，并且该区域控制时间和日期的显示。

# java - 带有 Logback 日志记录到系统输出的 Websphere - 格式问题

> ID：11854221
> 
> 赞同：5
> 
> 时间：2012-08-07T21:11:40.707
> 
> 标签：java, jakarta-ee, logging, websphere, logback

我在托管在 Websphere App Server 上的应用程序中使用 Logback。Logback 被配置为登录到 System Out（而其他人则不愿更改为不同的文件）。问题是 Websphere 使用自己的格式登录到 System Out。`logger.debug("test")`在我的应用程序中执行会产生：

```
[8/7/12 12:27:55:629 CDT] 0000003a SystemOut     O DEBUG com.myapp... test 
```

Websphere 添加了直到“O”的所有内容。其余的来自 Logback

我已将 Logback 设置为使用以下模式：`%-5level %logger{36} - %msg%n`这样我就不会重复 Websphere 自己执行的时间戳和线程信息，但我仍然很恼火，因为我无法从 Logback 中完全自定义到 System Out 的日志记录。

我对记录最佳实践知之甚少。以前，我已经通过 Web 应用程序登录到单独的文件，但是对于这个项目，我被告知 System Out 文件由第三方监控，我不应该改变使用 System Out。鉴于这些要求，有什么办法可以解决我的问题并告诉 Websphere 不要弄乱我的 System Out 日志记录，或者是开始记录到不同文件的唯一解决方案？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T19:11:26.657

您的 logback 配置为将消息写入`System.out`. 但是，写入的所有内容`System.out`都由 WebSphere 重定向，并以与 WebSphere 生成的日志消息相同的格式写入`SystemOut.log`文件，但带有严重性指示符“O”。这是不可能改变的。

请注意，告诉您使用的人很可能`SystemOut.log`实际上意味着您应该确保使用 WebSphere 的日志系统完成日志记录，以便以正确的类别和严重性写入消息，并且可以在运行时更改日志级别。由于 WebSphere 的日志系统是建立在`java.util.logging`您的基础上的，因此您可能应该将 logback 替换为 slf4j-jdk14 以满足他们的要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T20:16:40.787

我认为您将无法更改格式。如果可以的话，它可能会破坏当前的监控。

我想知道是否有人会介意您同时登录两个记录器，SystemOut 用于现有监控，而您自己的用于更易读的格式。

# c# - mvc如何更改默认路由

> ID：11854224
> 
> 赞同：1
> 
> 时间：2012-08-07T21:11:54.900
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing

我正在阅读 Pro Asp.net mvc3 框架书。我想更改默认路由，以便拥有不同的主页。我添加了一个名为 Pages 的新控制器和一个名为 Home 的视图。这就是我想要的主页。

我已经尝试将此添加到我的 global.asax.cs

```
routes.MapRoute("MyRoute", "{controller}/{action}/{id}",
                new { controller = "Pages", action = "Home", id = "DefautId" }); 
```

这会更改默认页面，但会破坏类别

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(null,
                        "", // Only matches the empty URL (i.e. /)
                        new
                            {
                                controller = "Product",
                                action = "List",
                                category = (string) null,
                                page = 1
                            }
            );

        routes.MapRoute(null,
                        "Page{page}", // Matches /Page2, /Page123, but not /PageXYZ
                        new {controller = "Product", action = "List", category = (string) null},
                        new {page = @"\d+"} // Constraints: page must be numerical
            );

        routes.MapRoute(null,
                        "{category}", // Matches /Football or /AnythingWithNoSlash
                        new {controller = "Product", action = "List", page = 1}
            );

        routes.MapRoute(null,
                        "{category}/Page{page}", // Matches /Football/Page567
                        new {controller = "Product", action = "List"}, // Defaults
                        new {page = @"\d+"} // Constraints: page must be numerical
            );

        routes.MapRoute(null, "{controller}/{action}");
    } 
```

我应该怎么做才能完成这项工作？

**更新：**

URLS： *主页转到项目列表*

```
http://localhost/SportsStore/ 
```

*点击的类别*

```
http://localhost/SportsStore/Chess?contoller=Product 
```

**为主页点击的控制器**

```
 public class ProductController : Controller
    {
        private readonly IProductRepository repository;
        public int PageSize = 4;

        public ProductController(IProductRepository repoParam)
        {
            repository = repoParam;
        }

        public ViewResult List(string category, int page = 1)
        {
            var viewModel = new ProductsListViewModel
                                {
                                    Products = repository.Products
                                        .Where(p => category == null || p.Category == category)
                                        .OrderBy(p => p.ProductID)
                                        .Skip((page - 1)*PageSize)
                                        .Take(PageSize),
                                    PagingInfo = new PagingInfo
                                                     {
                                                         CurrentPage = page,
                                                         ItemsPerPage = PageSize,
                                                         TotalItems = category == null
                                                                          ? repository.Products.Count()
                                                                          : repository.Products.Where(
                                                                              e => e.Category == category).Count()
                                                     },
                                    CurrentCategory = category
                                };

            return View(viewModel);
        } 
```

**我希望在主页上被点击的控制器**

```
public class PagesController : Controller
{
    public ViewResult Home()
    {
        return View();
    }

} 
```

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T18:34:17.560

我能够让它像这样工作：

```
 routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(null, "", new {controller = "Pages", action = "Home"});

    //routes.MapRoute(null,
    //                "", // Only matches the empty URL (i.e. /)
    //                new
    //                    {
    //                        controller = "Product",
    //                        action = "List",
    //                        category = (string)null,
    //                        page = 1
    //                    }
    //    );

    routes.MapRoute(null,
                    "Page{page}", // Matches /Page2, /Page123, but not /PageXYZ
                    new {controller = "Product", action = "List", category = (string) null},
                    new {page = @"\d+"} // Constraints: page must be numerical
        );

    routes.MapRoute(null,
                    "{category}", // Matches /Football or /AnythingWithNoSlash
                    new {controller = "Product", action = "List", page = 1}
        );

    routes.MapRoute(null,
                    "{category}/Page{page}", // Matches /Football/Page567
                    new {controller = "Product", action = "List"}, // Defaults
                    new {page = @"\d+"} // Constraints: page must be numerical
        );

    //routes.MapRoute(null, "{controller}/{action}");

    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new {controller = "Pages", action = "Home", id = UrlParameter.Optional} // Parameter defaults
        );

    //routes.MapRoute("MyRoute", "{controller}/{action}",
    //    new { controller = "Pages", action = "Home" }); 
```

有没有更好的办法？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T21:28:35.803

第一种选择是使用这种页面路由方式：

```
routes.MapRoute("Give route a name btw","Page/{page}", // Matches /Page/2
   new {controller = "Product", action = "List", category = urlParameter.Optional},
   new {page = @"\d+"} 
); 
```

这样，您的路线将更加 REST 方式。

其他方式 - 使用正则表达式路由[使用正则表达式定义路由](http://www.iridescence.no/post/Defining-Routes-using-Regular-Expressions-in-ASPNET-MVC.aspx)

PS：无法查看此链接现在是否在线。前几天还好。
PS2：浮士德关于路线顺序是正确的。贪婪的路线排在最后。
PS3：你能写出你想实现的URL scheme吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T21:26:18.137

确保将默认路由放在路由映射的最后。如果它是最后一个，它就不可能搞砸类别路线。

**更新** 如果这条路线：

```
routes.MapRoute(null, "{controller}/{action}"); 
```

出现在默认值之前，它将捕获您希望默认路由捕获的任何内容，但具有第三个 URL 参数 (id) 的项目除外。

例如：

```
/somepage/home 
```

会被上面的这条路线抓住，而不是你的默认路线。

所以你可能想删除这条路线。

# ruby-on-rails - jruby activerecord 试图在 ms sql 中保存二进制数据导致错误

> ID：11854225
> 
> 赞同：1
> 
> 时间：2012-08-07T21:12:18.830
> 
> 标签：ruby-on-rails, sql-server, activerecord, jruby

我在 rails 3.2.7 jruby 1.6.7.2 (ruby-1.9.2-p312) 上使用 sql server 2008 jruby

下表

```
create_table "Users", :primary_key => "id" do |t|
  t.integer "id", :limit => 19, :default => 1, :null => false
  t.string "login", :limit => 80, :null => false
  t.binary "password"
end 
```

当我用数据填充表时，我可以毫无问题地拉回记录。当我尝试保存时，出现以下错误：

```
Failure/Error: @user.save!
 ActiveRecord::StatementInvalid:
   ActiveRecord::JDBCError: Implicit conversion from data type varchar to varbinary is not allowed. Use the CONVERT function to run this query.: INSERT INTO [Users] ( [login], [password]) VALUES ( N'user', '') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T23:19:42.327

鉴于这种

```
t.binary "password" 
```

和这个

```
INSERT INTO [Users] ( [login], [password]) VALUES ( N'user', '') 
```

当字段定义为二进制时，该`INSERT`语句有一个密码字符串。

在 SQL Server 中，这两种类型不兼容。二进制值指定为`0x<bytes>`，即`0xAABBCCDD`。

您需要将传递给`INSERT`语句的密码值转换为那种格式（可能是散列函数的字节数组输出），或者将表列类型更改为字符串。

# macos - 没有可用的调试信息

> ID：11854230
> 
> 赞同：2
> 
> 时间：2012-08-07T21:13:14.520
> 
> 标签：macos, gcc, gdb

我正在使用 Mac OS 10.7.4。我已经安装了 Xcode 并使用 port 命令将 gcc 更新到了 4.6.3。

现在在我的工作目录（~/Work/[project]/work/build）中，我使用 dbg 并获得数百行，例如：

警告：找不到目标文件“/Volumes/work/macports/var/macports/build/_Volumes_work_mports_dports_lang_gcc46/gcc46/work/build/x86_64-apple-darwin11/libstdc++-v3/src/.libs/bitmap_allocator.o” - 否可用于“../../../../gcc-4.6.3/libstdc++-v3/src/bitmap_allocator.cc”的调试信息。

什么可能是一个问题并且很难解决？

# mysql - MySql 数据库被黑，不是注入

> ID：11854231
> 
> 赞同：5
> 
> 时间：2012-08-07T21:13:18.457
> 
> 标签：mysql, database, security

三周前，我在 Paste Bin 上找到了我网站的用户列表和信息，泄露了所有隐私。我运行更新并防止 SQL 注入。如果我的保护不够，我还添加了一个预先请求，以便在需要用户输入以分析任何注入时将 SQL 以文本格式保存在 LOG 表中。

然后今天同样的帖子再次出现在 Paste Bin 上，其中包含最近的条目，所以我检查了 LOG 表，只找到干净的条目。除了注射还有什么我应该担心的吗？网络似乎只提供有关注射的信息！

他们是否可以访问服务器上的 php 文件中的 dbpassword，是否可以从外部服务器连接？

我应该经常更改 dbpassword 吗？

是否有任何非脚本明智的解决方案，例如托管安全计划或类似的应该足够有效的解决方案？

我收到了来自被黑用户的人身威胁，我真的很想尽快关闭它......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T21:16:50.173

如果您正在实施自己的针对用户输入的保护措施，那么您可能做错了。大多数标准数据库库将为您提供一种将参数传递给查询的方法，在该查询中将对其进行正确清理，并且这些代码的编码考虑了您可能不知道的更多内容。在任何与安全相关的事情中重新发明轮子都是一个坏主意！

其他需要担心的事情：

*   密码策略（强密码）
*   访问您的数据库服务器（是否有防火墙？）
*   SSH 访问您的服务器（再次，防火墙？）
*   使您的所有软件保持最新

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T21:35:29.720

只是添加到您迄今为止的其他答案。如果有人在网上发布您的数据库内容，那么您需要假设运行应用程序和数据库的服务器已被入侵，因为一旦他们获得了初始访问权限，他们很可能已经放置了 root-kits或类似的工具到服务器上以保持对它的访问。

至于他们是如何进入的，有许多潜在的选择，具体取决于您的解决方案的架构，如果没有更多细节，就不可能说是哪种情况。一些更有可能的选择是

*   SSH 密码
*   具有常见密码或漏洞的管理 Web 应用程序（例如 PHPMyAdmin）
*   通过托管服务访问（例如管理登录面板上的弱密码）
*   如果该站点是基于 PHP 的远程文件包含问题是一个明显的可能性

如果可以的话，我建议您聘请取证或事件响应公司来帮助您恢复数据并重建，但如果失败了，我建议您从妥协之前获取备份并使用它来重建服务器，然后确保所有软件已更新和修补，密码与受感染的系统不同，然后才使其上线。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T21:17:00.637

对此最好的保护是只允许从运行应用程序的机器连接到 mysql 数据库。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-07T21:19:32.293

首先，确保对 MySQL 数据库的网络访问是“需要知道的”——在大多数情况下，这很简单`bind-address 127.0.0.1`。

接下来更改DB密码，正因为是，可以（C）

现在想一想：如果有人从您的 PHP 文件中获得了您的数据库密码，那么您已经陷入了困境：没有什么能阻止他或她只是重复那个特技！您需要审核您的应用程序是否存在后门（在事实问题之后）以及这些人如何进入那里（在事实问题之前）。检查您的 apache 日志以查找具有异常参数的请求`GET`- 那里的文件名大多是一个死的赠品。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T14:13:02.627

如果这是共享虚拟主机，并且另一个用户使用 shell 访问权限登录并且能够猜测到您的 Web 根目录的路径，并且密码配置（PHP 或其他脚本）文件是世界可读的，那么该用户可以读取它。

这是最常见的漏洞之一，很容易被利用。

如果是这种情况：

要更正此问题，您需要将配置文件移出您的 Web 根文件夹和/或更改其权限，使其不可读，然后更改您的数据库密码。

最有可能的是，用户将无法向您的应用程序注入任何内容。

更改数据库服务器使其只能在本地访问或在您的 Web 服务器上访问不会有任何好处，因为恶意用户将在同一 Web 服务器上并且仍然能够访问它。

如果您没有看到任何恶意查询，那么他们可能是通过 MySQL 命令行（或 PHPMyAdmin 或其他工具）访问您的数据库，而不是通过您的应用程序。

启用[通用查询日志](http://dev.mysql.com/doc/refman/5.1/en/query-log.html)将允许您在日志中以纯文本形式查看所有查询，但如果这是共享 Web（和 MySQL 服务器）托管，您可能无法启用此功能。

这是您可能希望向您的网络主机报告的事情。他们也许能够找到攻击者并暂停他们的帐户或为您提供证据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-07T21:20:08.663

我同意拉兹万的观点。此外，如果您正在运行任何 CMS 或预打包的网页，请确保它们是最新版本。他们很可能以 localhost 身份从 Web 服务器访问。黑客跟踪这些更改日志，每次发布安全补丁时，他们都会攻击运行旧版本的服务器上已发布的漏洞。它通常由爬虫批量执行。奇怪的是他们有一个数据库，你的服务器被列为运行旧版本的东西。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-07T21:28:28.457

首先，您需要确保包含 DB 密码的“php 文件”不在 Web 根目录中，否则他们可以简单地访问它，例如： http: [//mydomain.com/dbpassword.php](http://mydomain.com/dbpassword.php)。

其次，立即更改用于访问数据库的密码。

第三，确保mysql只接受来自'localhost'的连接，而不是允许来自任何地方的连接；'%'。如果它是专用服务器，那么您应该“加固”该框并向 IPTables 添加一条 IP 规则，其中 mysql 仅允许从服务器的 IP 访问。这些更改将确保如果他们确实获得了您的数据库用户名/密码凭据，他们将无法从远程计算机访问数据库，而是必须利用您的应用程序，或通过 ssh 进入您的服务器以访问您的数据库。

接下来，您应该禁用您网站的所有用户帐户，并强制他们使用闭环验证过程更新密码。这将确保您的用户或其帐户不会发生持续的恶意活动。

这些只是需要采取的几个步骤，还有其他一些步骤，例如跟踪本地用户的登录活动。您的系统的一个用户帐户可能已被盗用（root）。关键是，您需要考虑对系统和服务的所有访问点，如果您无法做到这一点，则可能是时候聘请或签约经验丰富的系统管理员来帮助您了。

# vb.net - 在 Windows 服务应用程序中自承载 ASP.NET Web API 的问题

> ID：11854232
> 
> 赞同：4
> 
> 时间：2012-08-07T21:13:19.540
> 
> 标签：vb.net, asp.net-web-api

我在网络上看到了一些文章，描述了如何在 Windows 服务应用程序中自托管 ASP.NET Web API（请参阅[此处](http://www.piotrwalat.net/hosting-web-api-in-windows-service/)和[此处](http://lunaverse.wordpress.com/2012/03/30/self-hosting-webapi-as-a-windows-service-with-topshelf/)）。我在 VB.NET 中编写了一些简单的代码，以便在服务启动时启动自主机并在服务停止时停止它，如下所示：

```
Protected Overrides Sub OnStart(ByVal args() As String)
    Try
        ' init a new self host configuration using the base address
        _config = New HttpSelfHostConfiguration(New Uri("http://localhost:8080"))

        ' map the URLs into the config
        MapRoutes(_config)

        _server = New HttpSelfHostServer(_config)
        ' start the server and wait for requests
        _server.OpenAsync()

    Catch ex As Exception
        Throw
    End Try
End Sub

Protected Overrides Sub OnStop()
    Try
        _server.CloseAsync().Wait()
        _server.Dispose()
    Catch ex As Exception
        Throw
    End Try
End Sub
#End Region

Private Sub MapRoutes(ByVal config As HttpSelfHostConfiguration)

    ' add route mappings
    With config.Routes
        .MapHttpRoute("API Default", "api/{controller}/{id}", New With {.id = RouteParameter.Optional})
    End With
End Sub 
```

我的简单控制器如下所示：

```
Public Class ClassesController
    Inherits ApiController

    Private _classes As List(Of [Class]) = New List(Of [Class])()

    Public Sub New()

        With _classes
            .Add(New [Class]() With {.ID = 1, .Name = "Geometry"})
            .Add(New [Class]() With {.ID = 2, .Name = "English 101"})
            .Add(New [Class]() With {.ID = 3, .Name = "Psychology 101"})
            .Add(New [Class]() With {.ID = 4, .Name = "Chemistry 101"})
            .Add(New [Class]() With {.ID = 5, .Name = "Physical Education"})
            .Add(New [Class]() With {.ID = 6, .Name = "Study Hall"})
            .Add(New [Class]() With {.ID = 7, .Name = "Wood Shop"})

        End With
    End Sub

    <HttpGet()>
    Public Function GetAll() As HttpResponseMessage

        Dim resp As HttpResponseMessage = Request.CreateResponse(Of List(Of [Class]))(HttpStatusCode.OK, _classes)

        Return resp

    End Function

    <HttpGet()>
    Public Function GetOne(ByVal id As Integer) As HttpResponseMessage

        Dim theClass As [Class] = (From c As [Class] In _classes
                                  Where c.ID = id
                                  Select c).FirstOrDefault()

        If theClass Is Nothing Then
            Return Request.CreateResponse(Of String)(HttpStatusCode.NotFound, "The requested class could not be found.")
        End If

        Return Request.CreateResponse(Of [Class])(HttpStatusCode.OK, theClass)

    End Function
End Class 
```

该服务编译没有问题，使用 installutil 安装，显然启动得很好。但是，当我点击 URL 时，服务崩溃并在我的事件日志中留下以下内容：

> 应用程序：WebAPISelfHostPOC.exe 框架版本：v4.0.30319 描述：进程因未处理的异常而终止。异常信息：System.Runtime.CallbackException 堆栈：在 System.Net.LazyAsyncResult.Complete(IntPtr) 的 System.Runtime.Fx+AsyncThunk.UnhandledExceptionFrame(System.IAsyncResult) 在 System.Net.LazyAsyncResult.ProtectedInvokeCallback(System.Object, IntPtr ) 在 System.Net.ListenerAsyncResult.WaitCallback(UInt32, UInt32, System.Threading.NativeOverlapped*) 在 System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32, UInt32, System.Threading.NativeOverlapped*)

和

> 错误应用程序名称：WebAPISelfHostPOC.exe，版本：1.0.0.0，时间戳：0x50217b41 错误模块名称：KERNELBASE.dll，版本：6.1.7601.17651，时间戳：0x4e211319 异常代码：0xe0434352 错误偏移：0x0000b9bc 错误进程 id：0x2b58应用程序启动时间：0x01cd74dbf3f6b8a5 错误应用程序路径：C:\Gravic\Development\WebAPISelfHostPOC\WebAPISelfHostPOC\bin\Debug\WebAPISelfHostPOC.exe 错误模块路径：C:\Windows\syswow64\KERNELBASE.dll 报告 ID：3e81d995-e0cf-11e1- b8b3-f80f41109bb9

谁能指出我在 Windows 服务中运行 Web API 的一些示例代码，或者指出我在代码中可能做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T18:06:56.243

问题原来是安装在 GAC 中的一组旧程序集，这些程序集是从 Web API 的 beta 安装中遗留下来的。我能够让我的项目引用新的程序集，并且问题得到了解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T23:36:14.573

您在本地管理员中运行服务的帐户是否是？或者您是否分配了允许访问该 url 的权限？

# wso2 - wso2 身份服务器 - 调用 Web 服务的自定义 UserStoreManager

> ID：11854234
> 
> 赞同：0
> 
> 时间：2012-08-07T21:13:28.567
> 
> 标签：wso2, saml, wso2is

我实际上正在尝试开发 SAML SSO+ Wso2 身份服务器身份验证实现。一切都很好，直到我意识到只有特定的 UserStoreManager，比如 LDAP/JDBC。我需要使用外部 Web 服务作为 UserStore 并基于 Web 服务执行身份验证。

我实际上意识到我需要创建一个新的 UserStoreManager Implementation() 。如果你有任何参考，你能建议吗？

谢谢，阿尼尔·塔拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T04:41:55.173

您可以参考已经实现的用户存储管理器并编写您自己的自定义用户存储管理器。查看由基于 JDBC 和 LDAP 的用户管理器扩展的[AbstractUserStoreManager](https://svn.wso2.org/repos/wso2/carbon/kernel/branches/4.0.0/core/org.wso2.carbon.user.core/4.0.0/src/main/java/org/wso2/carbon/user/core/common/AbstractUserStoreManager.java)类。扩展此类并根据需要覆盖方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-25T01:42:50.023

以下博客可能对您有所帮助，[1]。由于您尝试将外部 Web 服务用作用户存储，因此查看远程用户存储管理器也会有所帮助，该管理器随产品一起提供并显示在 IS 的 mgt 控制台的用户存储管理菜单中.

[1] - [http://pushpalnkajaya.blogspot.com/2013/09/how-to-write-custom-user-store-manager.html](http://pushpalankajaya.blogspot.com/2013/09/how-to-write-custom-user-store-manager.html)

# java - ASP.NET MVC 区域的 Java 等效项

> ID：11854235
> 
> 赞同：7
> 
> 时间：2012-08-07T21:13:43.383
> 
> 标签：java, model-view-controller, asp.net-mvc-areas

ASP.NET MVC 中的区域可以方便地将站点分解为比控制器更高级别的更小、更易于管理的组件。它们就像 Web 应用程序中的 mini-MVC 片段。

在任何 Java MVC 框架中是否有与 ASP.NET 区域等效的概念？

如果没有，在 Java MVC 框架中模拟它们的功能时，是否有关于最佳实践的建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T06:59:25.637

尝试[Spring MVC](http://static.springsource.org/docs/Spring-MVC-step-by-step/)。这可能会满足你的愿望。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T21:17:54.870

查看 JSP Tiles 和 Velocity 模板。瓷砖应该看起来类似于区域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T18:56:48.023

因此，Java EE 不提供基于 MVC 的开箱即用解决方案，但有许多开源项目创建了实现 MVC 框架的解决方案 - 尝试最新的 Spring 和 Struts 版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T07:33:44.013

看看这个 Java 的 Web 框架：[playframework](http://www.playframework.com/)

# python - 推特接口错误

> ID：11854237
> 
> 赞同：-1
> 
> 时间：2012-08-07T21:13:49.720
> 
> 标签：python, twitter

当我尝试输入用户名和密码时出现此错误：

```
client = twitter.Api(username="hinakhan@yahoo.com", password="random") 
```

-

```
Traceback (most recent call last):
  File "<pyshell#44>", line 1, in <module>
    client = twitter.Api(username="hinakhan@yahoo.com", password="random")
TypeError: __init__() got an unexpected keyword argument 'username' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:20:12.257

根据[文档](http://code.google.com/p/python-twitter/)，`twitter.Api`该类不接受`username`参数。您可能正在关注一些过时的信息。请记住，Twitter 不再允许密码验证，并且[需要使用 OAuth](https://dev.twitter.com/docs/auth/oauth/faq)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T23:01:46.050

您正在处理现已过期的旧文档。您需要阅读并查阅新文档并使用它。此错误也可能由于库中的混淆而发生，您需要检查您是否阅读了正确的文档或混淆了其他文档

# asp.net - ASP.NET 预热/初始化

> ID：11854243
> 
> 赞同：6
> 
> 时间：2012-08-07T21:14:22.523
> 
> 标签：asp.net, entity-framework, precompiled, warm-up

我正在尝试消除（或至少最小化）我的 .NET 应用程序的启动/预热时间。即使这是一个普遍的问题，我也不确定如何做到这一点。

有很多关于 .NET 应用程序启动缓慢的问题。这些很容易通过池回收、工作进程启动、.aspx 文件的动态编译、JIT 等来解释。此外，在应用程序中可能需要初始化更多的东西，例如 EntityFramework 和应用程序缓存。

我发现了很多不同的解决方案，例如：

*   [ASP.NET 预编译](http://msdn.microsoft.com/en-us/library/bb398860.aspx)
*   [IIS 8 应用程序初始化](http://learn.iis.net/page.aspx/1089/iis-80-application-initialization/)（以及[IIS 7.5](http://www.iis.net/download/ApplicationInitialization)）
*   [自动启动 ASP.NET 应用程序](http://weblogs.asp.net/scottgu/archive/2009/09/15/auto-start-asp-net-applications-vs-2010-and-net-4-0-series.aspx)

但是，我对上述任何解决方案都不完全满意。此外，我将我的应用程序部署到 Azure 网站（在大多数情况下），因此我对 IIS 的访问权限有限。

我知道有一些自定义的“预热脚本”使用各种方法向应用程序发送请求（例如 wget/curl）。我的想法是在我的每个 ASP.NET 应用程序中创建一个“Warmup.aspx”页面。然后我有一个预热服务，它每 5 分钟向每个站点的 Warmup.aspx 发送一个 HTTP GET。此服务可以是 Azure 中的 WorkerRole 或本地安装中的 Windows 服务。Warmup.aspx 将执行以下操作：

*   向应用程序中的每个 .aspx 文件发送 HTTP GET（以动态编译页面）
    *   这可以通过使用 aspnet_compiler.exe 预编译 .aspx 页面来避免
*   向数据库发送查询以初始化 EntityFramework
*   初始化应用程序缓存等

所以，我的最后一个问题是是否有比我的“Warmup.aspx”脚本更好的替代方案？这是一个好方法还是您推荐其他方法？我真的很想要一些可以处理上述标准的官方方法。

欢迎任何和所有的建议，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T18:14:55.137

您是否尝试过此处描述的 IIS 自动启动功能？

[https://www.simple-talk.com/blogs/2013/03/05/speeding-up-your-application-with-the-iis-auto-start-feature/](https://www.simple-talk.com/blogs/2013/03/05/speeding-up-your-application-with-the-iis-auto-start-feature/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T22:15:37.767

您可以有该站点的两个实例。当您需要部署新版本并因此遭受启动周期时，请从负载均衡器轮换中删除一个实例，部署并启动它，将其设置并为实例 2 执行相同操作。滚动部署。

# iphone - 从 iOS 设备上的 Web 服务器请求数据

> ID：11854246
> 
> 赞同：1
> 
> 时间：2012-08-07T21:14:40.577
> 
> 标签：iphone, ios

目前，我们的应用程序的工作方式是下载一个描述我们想要的信息的文本文件。然后我们使用 NSURLConnection 并请求文本文件描述的一个数据包。然后我们请求下一个数据包，等待它进来，检查它，然后再请求下一个数据包。

没有文本文件有没有更好的方法来做到这一点？我觉得我应该能够让应用程序说“InformationForJohnDoe”，然后服务器将开始为 JohnDoe 发送所有数据包，但在这种情况下，我不知道我怎么知道哪些数据在哪个我的 connectionDidFinishLoading 委托方法。

Web 服务实现如下所示：

```
[WebGet(UriTemplate = "GetTestData/{file}")]
        public Stream GetTestData(string file)
        {

            string fileName =
               "\\testdirectory" + file;
            if (File.Exists(fileName))
            {
                FileStream stream = File.OpenRead(fileName);
                if (WebOperationContext.Current != null)
                {
                    WebOperationContext.Current.OutgoingResponse.ContentType = "text/.txt";
                }
                return stream;
            }
            return null;
        } 
```

我不是一个 C# 的人。我才刚刚开始使用 C# 和 Web 服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:35:08.043

这个想法是你附加到你在类中定义的 NSData 你从

`-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data`

方法。

那么，在

`- (void)connectionDidFinishLoading:(NSURLConnection *)connection`

方法，您知道所有数据都已完全加载并可以使用。

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data 
{
    NSLog(@"Connection didReceiveData of length: %u", data.length);
    [self.dataData appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
{
   // do seomething with self.dataData

} 
```

# xcode - Xcode 4 到 Xcode 3.2 的兼容性

> ID：11854247
> 
> 赞同：0
> 
> 时间：2012-08-07T21:14:52.250
> 
> 标签：xcode, uinavigationcontroller

我编写了一个可以在 Xcode 4.2 中编译并运行良好的应用程序。我想将它移植到 Xcode 3.2 中（我标记了兼容性选项检查），但 Xcode 3.2 出于某种原因给了我一个错误。有谁知道这可能是什么问题？

附加信息：

基础 SDK：iOS 4.3

有问题的代码：

```
[[self navigationController] pushViewController:adminViewController animated:YES]; 
```

Xcode 4：

![在此处输入图像描述](../Images/fbc375ac9193df959c066caccf37c01f.png)

Xcode 3.2：

![在此处输入图像描述](../Images/56cebc980e50789f7a4ac5c281963194.png)

错误：

```
! Expected expression before "adminViewController" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:19:16.160

Xcode 4 中的 Xcode 项目兼容性标志是相当多余的。该标志设置底层项目格式，并且不处理对您正在编程的 iOS SDK 版本以及 Objective C 语言和运行时版本的支持。

如果您可以在 Xcode 3 中打开项目（看起来可以），那么就 Xcode 而言，它是“兼容的”。如果您看到编译器错误，那么您的问题与运行代码较旧/不同版本的 iOS SDK / LLVM / GCC 有关。

# encryption - Coldfusion加密/解密问题

> ID：11854251
> 
> 赞同：1
> 
> 时间：2012-08-07T21:15:04.167
> 
> 标签：encryption, coldfusion, coldfusion-9

我最近使用 ColdFusion 9 为我的公司做了一个网站。我遇到的问题是 ColdFusion 加密/解密功能。在我解密的某些字符串上，我得到了这些奇怪的特殊字符。

例子：

`MK/_0`<---加密字符串输出

`�#5&z`<---输出解密字符串

我不确定为什么会发生这种情况（并且仅在某些被解密的字符串上）。

这是代码：

```
<cfset ccNum = decrypt(getCCInfo.CUST_CARDNUMBER,myKey)> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T21:15:27.833

好的，首先，我必须指出，通过不指定加密算法，您使用的加密非常差。所以你需要解决这个问题。其次，您可能应该使用一些编码来使您的加密存储更可靠。

所以试试这段代码。

```
<cfset key = generateSecretKey("AES") />

<!--- Set the ciphertext to a variable. This is the string you will store for later deciphering --->
<cfset cipherText = encrypt(plaintext, key, "AES/CBC/PKCS5Padding", "HEX") />

<cfoutput>#cipherText#</cfoutput> 

<!--- Then when you decrypt --->

<cfset decipherText = decrypt(cipherText, key, "AES/CBC/PKCS5Padding", "HEX") />

<cfoutput>#decipherText#</cfoutput> 
```

上面的代码将使用强大的加密算法，并将密文转换为比您在上面示例中显示的乱码更容易存储的格式。这样当你存储它时，当你再次检索它时它会更可靠。

这是字符串的外观示例：

```
A51BBB284D6DCCDC17D26FB481584236087C3AB272918E17963BAF749438C06A484922820EDCCD25150732CC5CF8A096 
```

# php - Codeigniter 显示单个自定义错误

> ID：11854252
> 
> 赞同：4
> 
> 时间：2012-08-07T21:15:24.677
> 
> 标签：php, codeigniter

我正在尝试验证我的登录表单，并且我的用户名和密码字段有规则。

```
$this->form_validation->set_rules('username', 'Username', 'trim|required|xss_clean');
$this->form_validation->set_rules('password', 'Password', 'trim|required|xss_clean|callback_check_database'); 
```

所以我的**callback_check_database**函数位于 Password 字段中。

所以在我的 check_database 函数中，我有：

```
$this->form_validation->set_message('check_database', 'Invalid username or password');
return false; 
```

所以我正在设置我想要显示的自定义消息。

在我看来，我想单独显示该 check_database 错误。我不想显示任何其他错误。

这是我尝试过的：

```
// does not work
<?php echo form_error('check_database'); ?>

// this works
<?php echo form_error('password'); ?> 
```

所以因为它是用于密码字段的，它只会在我回显密码错误时显示。但这意味着，由于密码是必填字段，如果我不输入任何内容，它将显示一个错误，指出密码字段是必填的。

有没有办法只显示我设置的自定义错误消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T00:52:55.853

您可以通过两种不同的方式解决此问题。两者都有优点和缺点。

**选项1：**

```
$this->form_validation->set_rules('password', 'Password', 'callback_check_database'); 
```

然后在 callback_check_database 中只包含一个检查以确保 $value != "" （它复制了“必需”字段）。

注意：无论如何，您都不应该在密码字段上使用 xss_clean （因为它会改变密码 - 谷歌它，您会看到示例），并且假设您对密码进行哈希处理，获得的收益为零。

**选项 2：**

在您的视图文件中，只需键入

```
<?php if (form_error('password'))
   {
        echo "Invalid username or password";
   } 
?> 
```

这意味着您实际上并没有回显错误，您只是检查密码字段是否存在错误，无论它是什么，您只显示上面的文本。

# mysql - 如何从这些重复项中清理我的数据库

> ID：11854261
> 
> 赞同：0
> 
> 时间：2012-08-07T21:16:11.400
> 
> 标签：mysql

我有一个包含以下字段的表：id | 域名 | domain_certificate_no | 核心价值

select 语句的输出示例如下：

```
'57092', '02a1fae.netsolstores.com', '02a1fae.netsolstores.com_1', '55525772666'
'57093', '02a1fae.netsolstores.com', '02a1fae.netsolstores.com_2', '22225554186'
'57094', '02a1fae.netsolstores.com', '02a1fae.netsolstores.com_3', '22444356259'
'97168', '02aa6aa.netsolstores.com', '02aa6aa.netsolstores.com_1', '55525772666'
'97169', '02aa6aa.netsolstores.com', '02aa6aa.netsolstores.com_2', '22225554186'
'97170', '02aa6aa.netsolstores.com', '02aa6aa.netsolstores.com_3', '22444356259’ 
```

`keyvalue`我需要清理我的数据库，这样：我想删除第一个重复的域名`domain_certificate_no`（即，在本例中，我查找字段`domain_certificate_no`: `02aa6aa.netsolstores.com_1`，因为它是数字 1，并且键具有重复值，然后我想通过删除该链所属的域名来删除整个链 is `02aa6aa.netsolstores.com_2`and this 通过删除 is .`02aa6aa.netsolstores.com_3``02aa6aa.netsolstores.com`

如何自动化整个数据库的检查过程。所以，我有一个查询，检查模式中的任何域名`('%.%.%)` **EDIT:** AND 他们有共享域名（在这个 ex: 中`netsolstores.com`），如果它找到证书号。属于这个域名的1有一个重复的key值，然后删除。否则没有。请注意，`domain_certificate_no`如果不是数字 1，则可以有重复值。

**编辑：**我只比较相同二级域名的重复值。例如：在这个问题中，我比较了共享域名的值： `.netsolstores.com`. 如果我有另一个域名，带有子域，我也会这样做。但关键是我不需要比较整个数据库。只有具有共享域名的值（但不同的子域）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:13:17.793

我不确定您的示例中的 '02aa6aa.netsolstores.com_1' 会发生什么。

以下仅保留任何重复键的最小 id：

```
with t as (
     select t.*,
            substr(domain_certificate_no,
                   instr(domain_certificate_no, '_') + 1, 1000) as version,
            left(domain_certificate_no, instr(domain_certificate_no, '_') - 1) as dcn
     from t
    )
select t.*
from t join
     (select keyvalue, min(dcn) as mindcn
      from t
      group by keyvalue
     ) tsum
     on t.keyvalue = tsum.keyvalue and
        t.dcn = tsum.mindcn 
```

对于您提供的数据，这似乎可以解决问题。这不会返回重复的“_1”版本。如果这很重要，那么可以很容易地修改查询。

虽然我更喜欢更积极（考虑要保留而不是删除的行），但以下内容应该删除您想要的内容：

```
with t as (
     select t.*,
            substr(domain_certificate_no,
                   instr(domain_certificate_no, '_') + 1, 1000) as version,
            left(domain_certificate_no, instr(domain_certificate_no, '_') - 1) as dcn
     from t
    ),
    tokeep as (
     select t.*
     from t join
          (select keyvalue, min(dcn) as mindcn
           from t
           group by keyvalue
          ) tsum
          on t.keyvalue = tsum.keyvalue and
             t.dcn = tsum.mindcn
    )
delete from t
where t.id not in (select id from tokeep) 
```

还有其他可能更有效的表达方式（取决于数据库）。但是，这保留了原始查询的结构。

顺便说一句，在尝试新的 DELETE 代码时，请确保存储表的副本。使用 DELETE（和 UPDATE）很容易出错。例如，如果您省略 WHERE 子句，那么在记录所有行的漫长痛苦过程之后，所有行都将消失。您可能会发现只需将所需结果选择到新表中，验证它们，然后截断旧表并重新插入它们会更快。

# cruisecontrol.net - CruiseControl.Net 修改阅读器示例？

> ID：11854262
> 
> 赞同：-1
> 
> 时间：2012-08-07T21:16:13.670
> 
> 标签：cruisecontrol.net

有没有人有任何关于如何使用修改阅读器任务的例子？

好的，我在 XML 上使用它：

```
 <modificationReader>
        <filename>mods.xml</filename>
        <path>path/to/my/file/</path>
    </modificationReader> 
```

那么，什么？如何获取“mods.xml”中的信息并使用它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:52:57.120

这似乎与将修改写入文件的 modifyWriter 任务一起使用（默认情况下在工件目录中）。

[http://build.sharpdevelop.net/ccnet/doc/CCNET/Modification%20Writer%20Task.html](http://build.sharpdevelop.net/ccnet/doc/CCNET/Modification%20Writer%20Task.html)

如果您只是想读入对不同项目的 buildLog 的修改，那么上面的内容（带有第一个项目的路径）就足够了。

您是否尝试做一些不同的事情？
[CruiseControl.NET：SVN获取的构建子项目](https://stackoverflow.com/questions/11833947/cruisecontrol-net-build-subproject-obtained-by-svn/11849796)

# windows-8 - 有人知道 Windows 8 Metro 应用程序的 QR 码阅读器库吗？

> ID：11854270
> 
> 赞同：0
> 
> 时间：2012-08-07T21:16:57.853
> 
> 标签：windows-8, microsoft-metro, qr-code

我们希望在 Windows 8 Metro 应用程序中读取一些 QR 码。我们过去使用的 .NET 库无法在 WinRT/Metro 中引用，并且移植它们并不容易，因为它们依赖于 System.Drawing，而 System.Drawing 不在 Metro 风格应用程序的 .NET 中。我们通过 Benjamin Soulier 研究了[这个](http://www.soulier.ch/?p=1275&lang=en)，但它似乎没有用。还有其他建议或我们缺少的简单内容吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T21:29:55.813

您可以使用 ZXing.Net：http://zxingnet.codeplex.com/ 对于基于 HTML5/Javascript 的 Metro 应用程序，我目前正在开发用于 Windows 运行时组件 WinMD 的 zxing.net 端口[。](http://zxingnet.codeplex.com/)您可以从这里获取源代码 [https://zxingnet.svn.codeplex.com/svn/branches/WINMD](https://zxingnet.svn.codeplex.com/svn/branches/WINMD) （顺便说一句。我是 ZXing.Net（基于 Java 的 ZXing 的一个端口）的创建者）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:13:09.570

根据来自 MS 资源的反馈，没有任何内置内容，也没有他们知道的框架。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-04T08:52:06.427

快速尝试的方法是使用 Esponce 网络服务。[向http://www.esponce.com/api/v3/decode?format=png](http://www.esponce.com/api/v3/decode?format=png)发出一个简单的 HTTP POST 请求，并在正文中发送图像数据。响应应该包含类似的内容：

```
{"content":"here goes content decoded from QR Code"} 
```

Web 服务独立于平台（易于移植）并且在客户端是轻量级的。

[Esponce API 文档](http://www.esponce.com/help/api-v3/decode)中的更多详细信息

# silverlight - DataGrid Silverlight 列数据绑定

> ID：11854274
> 
> 赞同：0
> 
> 时间：2012-08-07T21:17:05.917
> 
> 标签：silverlight, mvvm

假设我有一个 Person 类

```
Public class Person
{

public string firstName {set;get;}
public string lastName {set;get;}
} 
```

在我的 ViewMode 类中，我有一个 ObservableCollection 的 Person

```
 private ObservableCollection<Person> _people;
 public ObservableCollection<Person> People
    {
        get { return _people; }
        set
        {
            _people= value;
            FirePropertyChanged("People");
        }
    } 
```

在我看来，我有一个 ItemsSource 绑定到 People 的数据网格。我的视图中有一个组合框，它的 SelectedValue 绑定到 SelectedFieldValue，我想在我的 gridview 中添加一行，其中包含在此组合框中选择的值

```
 private string _selectedFieldValue;
    public string SelectedFieldValue
    {
        get { return _selectedFieldValue; }
        set
        {
            _selectedFieldValue = value;

            FirePropertyChanged("SelectedFieldValue");
            People.Add(New Person{firstName = value});

         }
    } 
```

该行已添加到网格中，但我没有看到添加的 FirstName 的值。我尝试了几种方法来绑定 FirstName 列，但无法使其正常工作。将网格中的 DataGridTextColumn 绑定到 person 类的 firstName、lastName 属性的正确方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:15:10.440

看看这个..

```
 <sdk:DataGrid x:Name="dataGrid4"  
        Height="160" ItemsSource="{Binding People}" AutoGenerateColumns="False" >
        <sdk:DataGrid.Columns>
            <sdk:DataGridTextColumn 
                Header="First Name" 
                Width="SizeToHeader"
                Binding="{Binding firstName}" 
                FontSize="20" />
            <sdk:DataGridTextColumn 
                Header="Last Name" 
                Width="SizeToCells"
                Binding="{Binding lastName}" 
                FontSize="20" />
        </sdk:DataGrid.Columns>
    </sdk:DataGrid> 
```

# php - F3 框架模板服务不调用 PHP 函数

> ID：11854280
> 
> 赞同：1
> 
> 时间：2012-08-07T21:17:49.350
> 
> 标签：php, html, fat-free-framework

似乎 F3 框架不处理页面内的 php 函数调用？我有一个 php 导航栏，它在站点范围内是统一的。我在我的控制器类中调用我的布局页面：`Template::serve('layout.php')`. 在布局页面中，我包含导航栏：`<F3:include href="navbar.php" />`. 在 navbar（导航）文件中，我调用了一个实用函数 siteUrl，它获取资源的绝对 url，例如 css 或 .js 文件。这个函数在一个包含文件中定义，我包含如下：`require_once "lib/globals.php`. 在 navbar.php 中，我使用 siteUrl，例如：

```
<img id="logo" alt="logo" src="<?php echo siteUrl('small-logo.png') ?>" /> 
```

这似乎不起作用。当我查看页面的生成源时，img标签的src部分是一个空字符串：“”。但是，当我从其他未使用 F3 框架的页面（即未通过 F3::route 路由的页面。并非网站的所有页面都使用 F3 路由）调用导航栏时，它工作正常。

可能是什么问题呢？如何从使用 Template::serve 呈现的 php 页面中调用 php 函数？当 F3 提供页面时，标签之间的全部内容似乎`<?php ?>`没有被执行。没有显示回声语句。感谢您的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T19:21:57.153

`Template::serve()`不允许 PHP。它是一个模板引擎。有些事情你可以做。您可以使用 定义一个函数`F3::set('sum',function($a,$b){return 1+2;});`，然后在模板中使用`{{@sum(1,2)}}`. 我会重新阅读 fatfree 网站上的模板文档：http: [//bcosca.github.com/fatfree/#views-templates](http://bcosca.github.com/fatfree/#views-templates)

同样，PHP 不工作的原因是因为您正在使用`Template::serve()`并且因此正在使用 Fatfree 的模板功能。如果你想使用 PHP，我相信你可以改用`F3::render()`它，它会渲染页面，允许 PHP，但是你会失去所有的模板功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T10:10:28.900

您可以在由花括号包裹的模板标记中使用原始 php，如下所示：

```
<img id="logo" alt="logo" src="{{ siteUrl('small-logo.png') }}" /> 
```

它会自动回显。

但是使用 F3::set('image.smallLogo',siteUrl('small-logo.png')) 来定义图像路径并用简单的 {{@image.smallLogo}} 抓住它们感觉好多了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-07T04:34:22.430

页面移动： [Fat-Free Framework 3 模板指令](http://fatfreeframework.com/quick-reference#template-directives)

# javascript - 为什么 cloneNode 排除自定义属性？

> ID：11854283
> 
> 赞同：6
> 
> 时间：2012-08-07T21:17:53.777
> 
> 标签：javascript, properties, clonenode

这与问题[javascript cloneNode 和 properties](https://stackoverflow.com/questions/4094811/javascript-clonenode-and-properties)有关。

我看到了同样的行为。Node.cloneNode 不会复制我自己添加的任何属性（来自原始帖子的代码）：

```
 var theSource = document.getElementById("someDiv")
    theSource.dictator = "stalin";

    var theClone = theSource.cloneNode(true);
    alert(theClone.dictator); 
```

`theClone`不包含任何属性“独裁者”。

我无法找到任何解释为什么会这样。[MDN 上](https://developer.mozilla.org/en-US/docs/DOM/Node.cloneNode)的文档声明`cloneNode`“复制其所有属性及其值”，这一行直接取自[DOM 规范](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-3A0ED0A4)本身。

这对我来说似乎很糟糕，因为它几乎不可能对包含自定义属性的 DOM 树进行深层复制。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T21:27:24.073

属性不等于属性。

请改用 setAttribute() 和 getAttribute()。

```
var theSource = document.getElementById("someDiv")
theSource.setAttribute('dictator','stalin');

var theClone = theSource.cloneNode(true);
alert(theClone.getAttribute('dictator')); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T22:16:19.220

不是每个属性都对应一个属性。向元素添加自定义属性不会添加属性，所以当你这样做时会发生什么不在 DOM 规范中。

In fact, what happens when you add a property to a host object (such as a DOM node) is completely unspecified and is by no means guaranteed to work, so I'd strongly recommend against doing it. Instead, I'd suggest using wrappers if you want to extend the functionality of host objects (as jQuery and many other libraries do).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T21:27:51.577

测试了这个。`cloneNode` *确实*在克隆中包含自定义属性，但无法直接检索该属性。尝试：

```
 var theSource = document.getElementById("someDiv")
 theSource.dictator = "stalin";
 //or better / more cross browser compatible
 theSource.setAttribute('dictator','stalin');

 var theClone = theSource.cloneNode(true);
 alert(theClone.getAttribute('dictator')); //so, use getAttribute 
```

克隆可能是浏览器问题`expando properties`。我从这个相当老的[bugzilla 报告中运行了一个](https://bugzilla.mozilla.org/show_bug.cgi?id=340429)[测试用例](https://bug340429.bugzilla.mozilla.org/attachment.cgi?id=224461)（见下文）。它在 Chrome 和 Firefox（都是最新版本）中不起作用。

```
//code from testcase @ bugzilla
var a = document.createElement("div");      
a.order = 50;      
alert(a.order);      
b = a.cloneNode(true);      
alert(b.order); 
```

# java - 简单的 web 服务示例 tomEE 不起作用

> ID：11854286
> 
> 赞同：3
> 
> 时间：2012-08-07T21:17:55.027
> 
> 标签：java, android, sockets, soap, proxy

我正在尝试从tomEE部署简单的WS示例：http: [//openejb.apache.org/examples-trunk/simple-webservice/](http://openejb.apache.org/examples-trunk/simple-webservice/)

由于没有什么特别之处，我将详细发布我所做的。也许有人看到我做错了什么：

机器：Win7，Eclipse，服务器：tomEE+

- 使用运行时目标创建新的动态 Web 项目 = tomcat tomEE 服务器

- 在 /src 中创建新包，并在其中添加 3 个类：`Calculator`、`CalculatorWS`、`CalculatorTest`.

-右键单击项目>运行方式>在服务器上运行>选择tomEE。

服务器启动，启动`http://127.0.0.1:8080/testproject`

这导致 404，因为我没有设置任何 jsf 页面。无论如何，去 `http://localhost:8080/testproject/Calculator?wsdl`或 `http://localhost:8080/testproject/webservices/Calculator?wsdl`如示例所示，我也找不到 404。显然没有部署 Web 服务？

这个基本而简单的例子有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-15T20:38:27.133

我正在使用 eclipse indigo 和 tomee 1.5.2。我有一堂课 xyzMyWS。它使用@WebService 和@Stateless 进行注释。

启动期间的 apache tomee 日志说

```
INFO: Webservice(wsdl=http://localhost:8080/MyWebApp/webservices/MyWS, qname={http://z.y.x/}MyWSService) --> Ejb(id=MyWS) 
```

所以 WSDL 是

```
http://localhost:8080/MyWebApp/webservices/MyWS?wsdl 
```

请检查您的日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-17T02:56:50.577

前几天我运行了这个例子，遇到了类似的问题。解决方案实际上是在 Apache Logs 文件夹中查找 catalina 日志的日期，以及今天日期的 stderr 文件。他们会告诉您部署是否成功。

就我而言，我使用的是 JDEV，所以我删除了 @Stateless 注释，并尝试将 .jar 放入 webapps 文件夹。那*没有用*。但是，将其放回原处并删除 .jar 效果很好。

作为一个 Web 应用程序 (.war)，.class 文件被移动到 .war 文件中的 WEB-INF\classes 中，我将它放到了 webapps 中。我查看了 Catalina 日志，它说端点在哪里（对于 wsdl）。我输入： [http://localhost:8080/SimpleWebService/Calculator?wsdl](http://localhost:8080/SimpleWebService/Calculator?wsdl)，然后出现了 WSDL 文件。

之后，我使用soap ui 运行了一些简单的Soap 请求。它工作得很好。这是 1.7.1 版。

# guava - 为什么 Guava 发出错误“缺少 > 注释方法的事件处理程序”？

> ID：11854290
> 
> 赞同：10
> 
> 时间：2012-08-07T21:18:03.653
> 
> 标签：guava, event-bus

尝试注销时，我在我的一个课程中遇到以下错误。

> java.lang.IllegalArgumentException：缺少注释方法的事件处理程序。[DerivedClass] 是否已注册？”在 com.google.common.eventbus.EventBus.unregister(EventBus.java:227)

类调用`unregister(this)`具有公共`@Subscribe`注释方法。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-08T03:54:42.490

问题是错误消息误导我认为注释有问题。事实上，由于某些意外的控制流，该类正在注销自己两次。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-27T09:59:01.470

源码说明：

```
/**
   * Unregisters all handler methods on a registered {@code object}.
   *
   * @param object  object whose handler methods should be unregistered.
   * @throws IllegalArgumentException if the object was not previously registered.
   */
  public void unregister(Object object) {
    Multimap<Class<?>, EventHandler> methodsInListener = finder.findAllHandlers(object);
    for (Entry<Class<?>, Collection<EventHandler>> entry : methodsInListener.asMap().entrySet()) {
      Class<?> eventType = entry.getKey();
      Collection<EventHandler> eventMethodsInListener = entry.getValue();

      handlersByTypeLock.writeLock().lock();
      try {
        Set<EventHandler> currentHandlers = handlersByType.get(eventType);
        if (!currentHandlers.containsAll(eventMethodsInListener)) {
          throw new IllegalArgumentException(
              "missing event handler for an annotated method. Is " + object + " registered?");
        }
        currentHandlers.removeAll(eventMethodsInListener);
      } finally {
        handlersByTypeLock.writeLock().unlock();
      }
    }
  } 
```

# ruby-on-rails - Ruby on Rails PaperClip - 如何将文件存储在 S3 或公用文件夹之外的其他位置

> ID：11854295
> 
> 赞同：3
> 
> 时间：2012-08-07T21:18:17.390
> 
> 标签：ruby-on-rails, ruby, file, paperclip, storage

我正在试验 PaperClip 并喜欢它，它看起来是我们项目的一个很好的解决方案。但是，我们希望将上传的文件存储在服务器 (ubuntu) 上除公用文件夹之外的另一个位置，而 S3 不是一个选项。所以2个问题：

1）如何设置路径和url以将上传存储到ubunto中除应用程序根目录之外的另一个目录，或者，2）如何将上传的文件也存储在另一个LAN服务器上。

提前感谢所有回复的人。经过详尽的搜索后，我惊讶地发现 Google 的结果只针对仅使用 rails_root 或 S3 存储在 PaperClip 中的开发人员。此外，如果有人推荐一个更好的文件上传解决方案来满足我们的需求，请务必提供建议。再次感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T21:31:03.453

您可以简单地将`:path`选项传递`has_attached_file`给您想要的任何路径。文档在这里谈论这个：[http ://rdoc.info/gems/paperclip#Storage](http://rdoc.info/gems/paperclip#Storage)

如果您`mount`在 Web 服务器上有一些共享的 LAN 存储，那么您可以将它们存储在那里。您确实需要一个可用于所有应用服务器的共享文件系统位置，因此 S3 是一种通用且易于设置的解决方案。

# java - Java - 内存不足时以编程方式减少应用程序负载

> ID：11854302
> 
> 赞同：4
> 
> 时间：2012-08-07T21:19:20.893
> 
> 标签：java, memory-management, out-of-memory

不，真的，这就是我想要做的。服务器拥有 1600 个用户——后端长时间运行的进程，而不是 Web 服务器——但有时用户产生的活动比平时多，所以它需要减少负载，特别是当它耗尽“资源”时表示堆内存。这是一个很大的设计问题——如何设计这个？

这可能涉及防止 OOM 而不是从中恢复。理想情况下

```
 if(nearlyOutOfMemory()) throw new MyRecoverableOOMException(); 
```

可能发生。

但是那个`nearlyOutOfMemory()`功能我真的不知道可能是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T21:25:42.863

将服务器拆分为分片，每个分片拥有较少的用户，但驻留在不同的物理机器中。

如果您有很多缓存，请尝试使用软引用，当虚拟机用完堆时，这些引用会被清除。

在任何情况下，首先配置文件、配置文件、配置文件，以查看 CPU 时间在哪里消耗以及内存在哪里分配和保留。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T22:13:21.930

您可以使用[`Runtime.getRuntime()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#getRuntime%28%29)以下方法：

*   [空闲内存（）](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#freeMemory%28%29)
*   [总内存（）](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#totalMemory%28%29)
*   [最大内存（）](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#maxMemory%28%29)

但我同意其他发帖者的观点，使用`SoftReference`或`WeakReference`a`WeakHashMap`可能会让您免于手动从这种情况中恢复的麻烦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T21:33:26.133

我实际上已经[问过一个](https://stackoverflow.com/questions/11508310/detecting-out-of-memory-errors)关于处理 OOM 的类似问题，结果证明没有太多选择可以从中恢复。基本上你可以：

1) 调用外部 shell 脚本 ( `-XX:OnOutOfMemoryError="cmd args;cmd args"`)，它会触发一些动作。问题是，如果 OOM 发生在某个没有像样的恢复策略的线程中，那么你注定要失败。

2）为老一代定义一个阈值，技术上不是OOM，而是提前几步，比如80%，如果达到阈值就采取行动。更多细节[在这里](http://www.javaspecialists.eu/archive/Issue092.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T21:31:00.897

一个节流的、资源调节的 servlet 过滤器也可能有用。我确实遇到了码头/日食的[DoSFilter](http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/servlets/DoSFilter.html)。

# jquery - 复选框禁用启用

> ID：11854306
> 
> 赞同：1
> 
> 时间：2012-08-07T21:19:37.063
> 
> 标签：jquery, checkbox

我目前有一个 jQuery 函数，如果未选中父复选框，则禁用 Checkboxlist 并在选中它时启用。但是，父复选框默认为取消选中，这是我想要的。

这会导致代码出现问题，因为它在页面加载时启用，并且只有在您选中和取消选中父复选框时才会禁用。

有人知道修复吗？

```
$(document).ready(function() {
    $('#cbsys').bind('click', function() {
        var doEnable = ($('#cbsys:checked').length > 0);
        $('#syscbl').each(function() {
            if (doEnable) {
                $(this).attr('disabled', null);
                $(this).parents('label').removeClass('cssDisabled');
            } else {
                $(this).attr('disabled', 'disabled');
                $(this).parents('label').addClass('cssDisabled');
            }
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T21:24:59.183

只需将其缓存为一个函数，然后在准备好的文档以及单击时运行它。我还稍微优化了您的代码：

```
function disableCk() {
  var doEnable = $('#cbsys:checked').length; // <-- use a class
  $('#syscbl').each(function() { // <-- use a class
    var $this = $(this);
    if (doEnable) {
      $this.prop('disabled', false)
        .parents('label')
        .removeClass('cssDisabled');
    }
    else {
      $this.prop('disabled', true)
        .parents('label')
        .addClass('cssDisabled');
    }
  });
}

$(document).ready(function() {
  disableCk();
  $('#cbsys').on('click', disableCk);
}); 
```

**编辑**

刚刚注意到您似乎使用了多个具有相同名称的 ID，这是无效的 HTML，请确保改用类。我在代码中添加了注释，请看上面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T21:22:43.997

只需在绑定后立即触发您的点击处理程序：

```
$('#cbsys').bind('click', function() {
    var doEnable = ($('#cbsys:checked').length > 0);
    $('#syscbl').each(function() {
    if (doEnable) {
        $(this).attr('disabled', null);
        $(this).parents('label').removeClass('cssDisabled');
    }
    else {
        $(this).attr('disabled', 'disabled');
        $(this).parents('label').addClass('cssDisabled');
    }
}).trigger('click').trigger('click'); 
```

# c# - 为什么我收到错误 CS0246：找不到类型或命名空间名称？

> ID：11854308
> 
> 赞同：45
> 
> 时间：2012-08-07T21:19:41.913
> 
> 标签：c#, namespaces

我正在使用[Snarl C# API](https://github.com/TlhanGhun/Snarl-Network-Protocol-Csharp/blob/master/SnarlNetwork.cs)向 snarl 发送通知。

现在我已将上述 url 的内容保存在一个名为`SnarlNetwork.cs`的文件中，我的`test.cs`文件内容为：

```
using SnarlNetworkProtocol;
using System;
class test
{
    public static void Main(String[] args)
    {
        SNP snarl_object = new SNP();
        string hostname = "localhost";
        string hostport = "9887";
        string appName = "Spotify";

        bool val = snarl_object.register(hostname, hostport, appName);

        if (val == true)
        {
            string title = "hello";
            string message = "world";
            string timeout = "5";
            bool newval = snarl_object.notify(hostname, hostport, appName, null, title, message, timeout);

            if (newval == true)
            {
                Console.WriteLine("sucessfull");

            }
        }
    }

} 
```

现在，当我尝试使用编译我的 test.cs 文件时`csc test.cs`，出现以下错误：

```
C:\Users\Noob\csharp>csc test.cs
Microsoft (R) Visual C# 2008 Compiler version 3.5.30729.4926
for Microsoft (R) .NET Framework version 3.5
Copyright (C) Microsoft Corporation. All rights reserved.

test.cs(1,7): error CS0246: The type or namespace name 'SnarlNetworkProtocol' could not be found (are you missing a using directive or an assembly reference?) 
```

那么，我在这里做错了什么，因为据我所知，我没有遗漏任何`using directive`.

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2016-12-22T21:36:39.950

我使用的是**.NET Framework 4.5**，但我的新库有**.NET Framework 4.5.2**，当我尝试构建时遇到了同样的问题。我通过将我的项目从**4.5**更新到**4.5.2**（与我的库相同）来解决它。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-11-28T07:16:20.907

1.  在***解决方案资源管理器***选项卡上右键单击并选择***属性***

2.  通过更新项目应用程序设置中的***目标框架来解决此问题。***

例如，在我的情况下，该项目是使用 .net 框架版本 4.5.1 编译的，但引用的 dll 是使用版本 4.6.1 编译的。所以更新了我的项目版本。我希望这个对你有用。

[![在此处输入图像描述](../Images/d5cb2825bdfdda207b424a1e9177394e.png)](https://i.stack.imgur.com/R7Asw.png)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-08-07T21:22:35.550

这就是问题：

```
C:\Users\Noob\csharp>csc test.cs 
```

您尚未添加对 DLL 的引用。你需要类似的东西：

```
C:\Users\Noob\csharp>csc test.cs /r:SnarlNetwork.dll 
```

（或任何程序集的名称）。

或者，如果您没有将它作为单独的库，只需编译这两个文件：

```
C:\Users\Noob\csharp>csc test.cs SnarlNetwork.cs 
```

如果您尚未编译程序集但*想要*编译，您可以使用：

```
csc /target:library /out:SnarlNetwork.dll SnarlNetwork.cs

csc Test.cs /r:SnarlNetwork.dll 
```

（实际上，在这种特殊情况下不需要指定输出文件，但它仍然更清晰......）

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-08-07T21:21:16.910

编辑：哦，忽略我，你没有使用 Visual Studio。

您是否添加了对项目的引用？

就像这样的事情：

![在此处输入图像描述](../Images/df243b0551d17c768b9662df7cedad1f.png)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-01T06:30:26.847

这可能是由于 .NET Framework 的“客户端配置文件”。尝试使用 .NET 的“完整版”。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-07T21:21:39.637

当我有一个 using 语句但忘记引用定义命名空间的程序集时，这通常会发生在我身上。

但是在您的情况下，由于命名空间是在项目的文件中定义的，因此您忘记告诉编译器有关 snarlnetwork.cs 文件的信息。

请参阅[csc 编译器示例](http://msdn.microsoft.com/en-us/library/78f4aasd.aspx)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-04-26T06:41:15.680

大多数问题是由 .NET Framework 引起的。因此，只需转到项目属性并更改与您的参考 dll 相同的 .Net 版本。

完毕！！！

希望它有帮助:)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-07-14T16:37:29.713

我在 MVC 项目中遇到了这个错误。经过长时间的研究，我发现包含我在主项目中引用的一些类的 .cs 文件的 Build Actions 设置为“Content”......

将其更改为“内容”->“编译”后，错误消失了。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-05-15T10:41:47.387

我通过确保我的项目与它所依赖的项目/库共享相同的 .Net Framework 版本来解决这个问题。

结果发现库（解决方案中的项目）使用.Net 4.6.1，而我的项目使用的是 4.5.2

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-10-03T12:49:41.073

检查您的 Web.Config 并找到 namespace = 。您可以删除，或者如果需要，您必须创建新的

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-11-06T12:42:43.300

我也面临同样的问题，

**原因**：我遇到此错误的原因是，我创建了类，然后将其扩展名从“.cs”重命名为“.cshtml”，而不是创建新的局部视图。

**解决方案**：只需删除该重命名视图并重新创建正确的部分/完整视图。之后它会正常工作。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-02-09T15:14:51.647

当使用的 cs 文件位于项目文件夹中时，我遇到了同样的错误，但没有从父项目的 .csproj 中引用。Intellisence 在项目文件夹中看到此文件，但由于 .csproj 中缺少引用，编译器看不到它

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-09-19T20:52:53.820

理论上，如果客户端框架高于库框架客户端项目构建成功。所以我建议你检查 Platform Target 以确保没有冲突。

*鼠标右键项目 > 属性 > 构建*并取消选中仅适用于控制台项目**的首选 32 位。**并检查两个项目都针对同一平台。[![取消选中首选 32 位 1](../Images/b32b46457a577e200a3bdfc31597282d.png)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-05-28T13:25:47.780

在第一次拉动并开始一个新的解决方案后，我遇到了类似的问题。它是通过首先清理项目在视觉工作室中修复的。然后恢复包。当我再次构建时，不再有类型或命名空间错误。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-04-29T07:53:42.117

当我从 Git 克隆我的项目并第一次直接构建解决方案时，我遇到了同样的问题。而不是转到文件资源管理器中的本地存储库并双击解决方案文件（.sln）解决了我的问题。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-01-19T13:54:17.823

由于缺少参考，我也收到此错误。我没有注意到的原因是因为 Resharper 提供了添加使用和引用。添加 using 成功（但它突出显示为灰色），缺少类的语法突出显示（有时）有效，但添加引用会静默失败。

手动添加引用时会弹出错误，解释添加引用失败的原因（循环引用）。Resharper 没有将此错误传递给 GUI。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-03-16T06:22:07.480

我通过添加对 System.Web 的引用解决了这个问题。

# php - 为什么我不能使用 get_cfg_var() 将自定义设置值分配给实例变量

> ID：11854309
> 
> 赞同：-1
> 
> 时间：2012-08-07T21:19:50.430
> 
> 标签：php

> **可能重复：**
> [解析错误：语法错误，意外的 '('，期待 ',' 或 ';' in](https://stackoverflow.com/questions/11313051/parse-error-syntax-error-unexpected-expecting-or-in)

我正在执行以下操作：

```
<?php
class JConfig {
    public $var = get_cfg_var('mySetting');
}
?> 
```

如果我这样做，我会收到一个编译错误，上面写着：

> 语法错误，意外 '('，期待 ',' 或 ';'

如果我`echo get_cfg_var('mySetting')`在课外做，它工作得很好。
如果我分配`get_cfg_var('mySetting')`给局部变量，它工作得很好。

任何人都知道为什么我不能将它分配给实例变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:22:11.240

从[文档](http://php.net/manual/en/language.oop5.properties.php)中：

> [Property] 声明可能包括一个初始化，但这个初始化**必须是一个常量值**——也就是说，它必须能够在编译时被评估，并且不能依赖运行时信息才能被评估。

您将需要从类构造函数或代码中的其他位置初始化该值。

# objective-c - Objective-C：同步代码

> ID：11854321
> 
> 赞同：0
> 
> 时间：2012-08-07T21:21:10.280
> 
> 标签：objective-c, synchronization, nsmutablearray, grand-central-dispatch

我有一个简单的类，有两个 ivars， a`NSMutableArray`和 a `BOOL`。此类的对象在发送`startShuffling`消息时能够对数组中的元素进行洗牌。他们这样做直到收到`stopShuffling`消息。

为了使其工作，该`startShuffling`方法将布尔值设置为`YES`，然后`while(self.isShuffling) { //... }`在并发队列上分派混洗 ( ) 的代码块。将`stopShuffling`布尔值设置为`NO`，以便混洗过程将在下一个循环回合终止。

这是界面：

```
@interface MyClass : NSObject <NSCoding> {
@private
    NSMutableArray *elements_;
    __block BOOL isShuffling_;
}

@property(readonly) BOOL isShuffling;

-(void)startShuffling;
-(void)stopShuffling;

@end 
```

和实施：

```
@implementation MyClass

@synthesize isShuffling = isShuffling_;

-(void)startShuffling {
    if(self.isShuffling) {
        return;
    }

    isShuffling_ = YES;

    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    dispatch_async(queue, ^{
        while(isShuffling_) {
            // code that shuffles, one element by turn
            NSUInteger elementIndex = arc4random() % [elements_ count];
            id c = [[elements_ objectAtIndex:elementIndex] retain];
            [elements_ removeObjectAtIndex:elementIndex];
            [elements_ insertObject:c atIndex:[elements_ count]];
            [c release];
        }
    });
}

-(void)stopShuffling {
    isShuffling_ = NO;
}

@end 
```

我的类符合`NSCoding`协议，即使对象正在洗牌，我也不想中止编码。相反，我希望我的对象停止洗牌，然后对自己进行编码。所以我写了这个编码方法：

```
-(void)encodeWithCoder:(NSCoder *)aCoder {
    if(self.isShuffling) {
        [self stopShuffling];
    }
    [aCoder encodeObject:elements_ forKey:kIVPCodingKeyMyClassElements];
} 
```

最后，这是我的问题。
我认为`encodeObject:forKey:`在改组循环终止其最后一回合时调用该方法是可能的（也许我错了？）。

有什么方法可以`encodeObject:forKey:`在等待最后一轮洗牌循环终止~~*后*~~~~调用方法？~~

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:33:16.973

是的，调用该`encodeObject:forKey:`方法时，shuffle 代码可能仍在运行。

通常，您不希望将一些随机块分派到执行很长时间（可能是永远）的队列中。你想把工作分解成工作块。你的答案就在其中。

就像是：

```
 - (void)shuffleAndCheck
 {
    if (stillShuffling) {
         dispatch_async(globalConcurrentQueue, ^{
              dispatch_apply(shuffleQueue, ^{... shuffle one card code ...});
         });
         dispatch_async(shuffleQueue, ^{ [self shuffleAndCheck]; });
    }
 }

 - (void) startShuffling
 {
    if (stillShuffling) return;
    stillShuffling = YES;
    [self shuffleAndCheck];
 }

 - (void) stopShuffling
 {
    stillShuffling = NO;
    dispatch_async(shuffleQueue, ^{ ... encode stuff here ... });
 } 
```

或者其他的东西。*

# git - 在 Git 中嵌套分支

> ID：11854324
> 
> 赞同：1
> 
> 时间：2012-08-07T21:21:24.483
> 
> 标签：git, github, sync

我在 GitHub 上有一个存储库，它有两个分支，即`master`和`gh-pages`. 该`master`分支基本上是一个静态网站，但我使用 GitHub pages 有一个带有“演示”按钮的项目页面，让用户可以看到界面是什么样的。该项目是一个[LightDM 迎宾主题](http://blender3d.github.com/Bevel/)，可以在浏览器中运行，也可以由 LightDM 的 Webkit 迎宾器运行。

只能`gh-pages`正常向浏览器提供 HTML，但我将所有工作都保留在`master`分支上。

我的文件结构是这样的：

```
.
├── theme (master)
|   ├── index.html
|   └── ...
└── website (gh-pages)
    ├── demo -> contents of ../theme/
    ├── index.html
    └── ... 
```

我尝试符号链接`demo`到`theme`，因为两者必须包含完全相同的内容，但 Git 会响应此错误：

```
Project/website [ git commit -a "Made some changes"
fatal: 'demo/' is beyond a symbolic link 
```

接下来，我制作了同步内容的钩子，`theme`并且`demo`每当我在其中一个分支上提交时，这种方法似乎异常复杂。

我基本上是在努力保持`theme`并`demo`相互联系。有没有使用 Git 的干净方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:15:25.737

我认为符号链接是最干净的解决方案，除了：

*   它应该被忽略（如果没有，你总是会得到“ `beyond a symbolic link`”错误）
*   它应该在结帐时通过**[结帐后挂钩自动生成](http://git-scm.com/docs/githooks)**

钩子的问题是周围没有克隆，所以用户仍然必须激活那个特定的钩子。
另外，这可能与用户可能拥有的现有结帐后挂钩发生冲突。

另一个不会与任何现有钩子冲突的解决方案（但仍需要由所述用户克隆您的存储库来激活）是[内容过滤器驱动程序](https://stackoverflow.com/questions/2316677/can-git-automatically-switch-between-spaces-and-tabs/2316728#2316728)：

![内容过滤器驱动程序](../Images/c8a16f0318d9fad17ae9818d30139a0b.png)

查看 中特定文件的可识别内容时`website`，您可以决定创建该符号链接。
这个想法是内容过滤器驱动程序脚本（这里是“涂抹”脚本）是您可以在`.gitattributes`文件中注册的东西。
但是用户仍然需要在他/她的 git config 中声明该过滤器驱动程序。

# java - 如何在 JBoss 中拥有多个具有相同 JNDI 名称的数据源？

> ID：11854326
> 
> 赞同：3
> 
> 时间：2012-08-07T21:21:27.930
> 
> 标签：java, database, jboss, jndi

所以，我有一种情况，我将部署多个 ear 文件，每个文件都需要配置不同的数据库（可能）。

现在我有一个部署在 JBoss 中的 *-ds.xml 文件，它有一个 JNDI 名称，我的所有 portlet 和 servlet 都使用它来查找数据库连接。如果我使用指向不同数据库但具有相同 JNDI 名称的 *-ds.xml 文件部署多个 ear 文件，则部署 barfs。在部署不同的应用程序以隔离它们时，JNDI 不应该更加模块化以防止命名冲突。

更改我在代码中的查找需要相当长的时间，那么有没有一种部署方法可行？我唯一的另一个想法是将 JNDI 属性设置为要查找的数据源名称的值，然后首先查找该 JNDI 属性并根据检索到的“键”检索数据源。这对我来说似乎有点骇人听闻......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T21:36:39.230

您可以在具有不同名称的应用程序服务器上定义不同的数据源（在服务器名称空间上），然后通过部署 xml 将其映射到资源引用名称（这次是组件名称空间，因此每个应用程序都可以拥有自己的名称空间）文件。

对于 as7 之前的 JBoss：[https](https://community.jboss.org/message/629666) ://community.jboss.org/wiki/HowDoICreateAResourceRef对于 as7：[https ://community.jboss.org/message/629666](https://community.jboss.org/wiki/HowDoICreateAResourceRef)

# c# - 这个正则表达式中单引号的目的是什么？

> ID：11854327
> 
> 赞同：4
> 
> 时间：2012-08-07T21:21:31.027
> 
> 标签：c#, .net, regex, string-literals

我用以下正则表达式继承了一些 C# 代码

```
Regex(@"^[a-zA-Z''-'\s]{1,40}$") 
```

我理解这个字符串，除了单引号的作用。我已经搜索了所有内容，但似乎找不到解释。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T21:34:25.797

据我所知，这个表达是多余的。

它匹配`a-z`or `A-Z`，或者`'`字符，或者介于`'`and之间的任何东西`'`（当然这只是`'`字符，或者任何空格。

我已经使用[RegexPal](http://www.regexpal.com/)对此进行了测试，它似乎与这些字符不匹配。也许序列是由代码生成的，或者它用于匹配早期版本中更广泛的字符？

**更新：**根据您的评论（匹配名称），我会继续猜测作者认为他通过将连字符放在引号中来*逃避连字符，并且不是最出色的软件测试人员。*他们的意思可能是：

```
Regex(@"^[a-zA-Z'\-\s]{1,40}$") //Escaped the hyphen 
```

也可以写成：

```
Regex(@"^[a-zA-Z'\s-]{1,40}$") //Put the hyphen at the end where it's not ambiguous 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T21:52:55.327

因为它是三个单引号字符是多余的。它们代表单引号字符 (#1) 和以单引号开始和结束的字符范围（#2 和 #3 用连字符分隔）。

看起来这是一个错误，作者似乎打算通过将连字符“转义”在单引号中来在类中包含连字符。在不转义的情况下，连字符代表一个字符范围，就像在 az 和 AZ 中一样。

我猜原作者的意思是 [a-zA-Z'\-\s]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T21:53:24.677

多余的撇号是多余的，所以没有多大意义。一种可能性是作者试图避开破折号以将其包含在模式中，但正确的方法是使用反斜杠：

```
Regex(@"^[a-zA-Z'\-\s]{1,40}$") 
```

（例如，在文字周围使用撇号用于自定义格式字符串，作者可能在其中使用了它。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T21:45:42.253

使用撇号/单引号三次才有意义的唯一方法是，如果第二个和第三个实例实际上是花哨的单引号，例如 '、' 和 ‛。如果是这样，更好（更清晰）的表示方式是使用 unicode 转义：

```
Regex(@"^[a-zA-Z'\u2018-\u201B\s]{1,40}$") 
```

顺便说一句，某些语言（例如 PowerShell）明确允许使用这些单引号并将它们视为 ASCII ' (0x27) 字符。来自 PowerShell 2.0 语言规范：

*单引号字符：*

```
' (U+0027) 
Left single quotation mark (U+2018) 
Right single quotation mark (U+2019) 
Single low-9 quotation mark (U+201A) 
Single high-reversed-9 quotation mark (U+201B) 
```

# spring - 我可以在没有注释的情况下使用 Spring 的缓存功能吗？

> ID：11854328
> 
> 赞同：4
> 
> 时间：2012-08-07T21:21:35.573
> 
> 标签：spring, caching, configuration, annotations, ehcache

我正在开发一个模块，我计划使用[Spring 的声明式缓存](http://static.springsource.org/spring/docs/3.1.0.M1/spring-framework-reference/html/cache.html)来处理。我用缓存写了很多方法

```
@Override
@Cacheable("businessUnitCache")
public BusinessUnit getBusinessUnit(String businessUnitId){ 
```

我计划提供一个类路径 bean 文件和类路径[eh-cache 配置](http://ehcache.org/documentation/configuration/index)来提供功能，而无需使用项目来了解我的实现的内部结构以及需要缓存哪些方法（其中许多方法他们永远不会*直接*访问）。

但是，阅读[在多个模块中使用 Spring 缓存注释](https://stackoverflow.com/q/8658789/16487)的问题及其答案，这显然会导致一个问题，即任何消费项目也使用 Spring 缓存注释。如果没有声明的缓存与注释匹配，我希望 Sprint 会静默失败，但它会失败并出现错误：

> java.lang.IllegalArgumentException：找不到缓存名为 [businessUnitCache] 用于 CacheableOperation [public

让我得出结论，我不能使用缓存注释（这与我从问题[Is it possible to use multiple ehcache.xml (in different projects, same war)? 中](https://stackoverflow.com/q/8834993/16487)得出的原始结论相冲突？ 。我的测试支持了这一点。

那么：**是否可以将缓存与实现类分开声明，最好是在 xml 中？** 这将允许我使用缓存规则准备一个附加文件，并使用标准弹簧属性替换替换缓存管理器名称（我已经在对数据源进行类似的操作）？不幸的是，[参考文档](http://static.springsource.org/spring/docs/3.1.0.M1/spring-framework-reference/html/cache.html)仅描述了基于注释的配置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T09:46:40.707

您可以使用 xml 文件配置缓存，请参阅 spring 参考手册：

[http://static.springsource.org/spring/docs/current/spring-framework-reference/html/cache.html#cache-declarative-xml](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/cache.html#cache-declarative-xml)

```
<!-- the service we want to make cacheable -->
<bean id="bookService" class="x.y.service.DefaultBookService"/>

<!-- cache definitions -->
<cache:advice id="cacheAdvice" cache-manager="cacheManager">
<cache:caching cache="books">
    <cache:cacheable method="findBook" key="#isbn"/>
    <cache:cache-evict method="loadBooks" all-entries="true"/>
</cache:caching>
</cache:advice>  

<!-- apply the cacheable behaviour to all BookService interfaces -->
<aop:config>
<aop:advisor advice-ref="cacheAdvice" pointcut="execution(* x.y.BookService.*(..))"/>
</aop:config> 
```

# c++ - 如何禁用win32“界面”宏？

> ID：11854331
> 
> 赞同：3
> 
> 时间：2012-08-07T21:21:48.647
> 
> 标签：c++, windows, winapi

我要疯了。我正在 Windows 上进行一些 C++ 开发，并且我有一个名为“interface”的命名空间：

```
namespace gd {
namespace interface {

}} // end namespace 
```

但是，无论我包含“Windows.h”还是“Wtypes.h”，都会包含一个名为“objbase.h”的文件，其中包含一个名为“interface”的宏。此宏不允许我使用命名空间名称。Win32 API 中是否有禁用接口宏定义的功能？如果没有，有人能想出一个聪明的解决方法来禁用它，而不需要在我的代码库中进行太多的大规模更改吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T21:34:00.193

如果你真的想这样做，你可以`#undef`使用`interface`宏。

相反，我建议不要命名您的 namespace `interface`，因为`interface`它尽可能接近保留字，而实际上不是保留字。使用该命名空间会引起很大的混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T12:55:18.557

看来您还可以定义[`WIN32_LEAN_AND_MEAN`](https://stackoverflow.com/questions/11040133/what-does-defining-win32-lean-and-mean-exclude-exactly)以避免`objbase.h`在包含`windows.h`.

# c++ - JScript 和 Windows 服务之间的通信方式

> ID：11854333
> 
> 赞同：1
> 
> 时间：2012-08-07T21:22:06.027
> 
> 标签：c++, winapi, windows-services, wsh, jscript

我有一个 Windows 本地服务，它可能会产生一个通过 Windows 脚本主机执行 JScript 脚本（在 .js 文件中）的进程。问题是我需要将 .js 文件中脚本生成的结果通知我的服务。传输或简单的 32 位整数或字符串就足够了。这样做的方法是什么？

PS。代码必须在 Windows XP SP3 或更高版本的操作系统上运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T22:23:55.373

您最好的选择是创建一个在您的服务中执行的进程外 COM 对象。只需实现必要的脚本接口并提供一个成员函数来匹配通知并从您的脚本中调用它，如下所示：

```
newObj = new ActiveXObject("localserver.mynotify");
newObj.Notify("finished"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T09:30:14.120

进程的退出代码就足够了吗？

Windows 脚本宿主有一个[`.Quit(errorCode)`](http://msdn.microsoft.com/en-us/library/fw0fx1aw.aspx)方法可以让您设置退出代码。您应该能够直接从服务调用 WSH 并`GetProcessExitCode()`通过传递您在生成它后收到的进程句柄来获取返回代码。

请注意，您可以从 JScript 文件执行的几乎所有操作也可以使用本机代码完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T22:15:31.390

您是否必须将 .js 文件作为外部进程执行？Windows 脚本具有 COM 对象，应用程序可以使用这些对象在其自己的进程中运行脚本。我用它在我的服务进程中执行脚本文件，它工作正常。宿主进程甚至可以实现它自己`IDispatch`的基于类并将它们传递给脚本引擎以将脚本作为全局对象公开，这样脚本就可以与宿主进程通信，而无需使用`new ActiveXObject`或`CreateObject()`访问这些对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T23:06:52.587

我看到您的脚本是用 JScript 编写的，而您的应用程序是用 C++ 编写的。

也许完成您想要的最简单的方法是将文件写入您的服务应该有权访问的 programdata 文件夹。可能对特定请求使用 GUID，将其传递给 JScript，以保证它是唯一的文件。不理想。

获取 JScript 输出的另一种方法...您可以调用托管代码 (C#) 吗？如果是这样，您可以使用基于 .NET 或 .NET 可调用的 JavaScript 编译器/解释器。这将允许您避免 IActiveScript，并且还可以直接从脚本上下文或函数返回中获取值。我使用过[Jurassic](http://jurassic.codeplex.com "侏罗纪")和[JavaScriptDotNet](http://javascriptdotnet.codeplex.com/ "JavaScriptDotNet")，它们都非常易于使用和扩展。

如果您严重依赖 ActiveXObject 调用（即：FileSystemObject）并且不想编写组件，这可能会引发问题。[JuraScript](http://jurascript.codeplex.com)封装了侏罗纪引擎并为其添加了 ActiveXObject 支持以实现 COM 自动化。

我是一个 C++ 新手，所以我不知道这对你来说有多大的飞跃，尽管我知道托管/C++ 之间可以进行互操作。

只是想我会提到这些场景，因为我没有在答案中看到它们。

# c++ - PWCHAR 转字符串

> ID：11854336
> 
> 赞同：2
> 
> 时间：2012-08-07T21:22:14.520
> 
> 标签：c++, string, char

正如标题所述，我需要一种将 PWCHAR 转换为 std::string 的方法。我可以在网上找到的唯一解决方案是相反的转换，所以如果有人能对此有所了解，我真的很喜欢。谢谢！

这是在 C++ 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:28:52.100

你会更容易使用`std::wstring`，因为它也是一个宽字符串类。如果您真的想使用`std::string`, 并将 2 字节字符转换为单字节或多字节字符，则需要使用执行该转换的函数。[wcstombs()](http://msdn.microsoft.com/en-us/library/5d7tc9zw%28v=vs.80%29.aspx)是用于执行此操作的 ANSI C 函数。您的平台可能会提供替代方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T21:29:07.870

根据[this MSDN page](http://msdn.microsoft.com/en-us/library/dd304249.aspx)，`PWCHAR`声明如下：

```
typedef wchar_t WCHAR, *PWCHAR; 
```

你想要的是[`std::wstring`，在`string`](http://www.cplusplus.com/reference/string/).

```
const PWCHAR pwc;
std::wstring str(pwc); 
```

`std::wstring`与 非常相似`std::string`，因为两者都是`std::basic_string`;的专业化 不同之处在于`wstring`使用`wchar_t`(Windows `WCHAR`)，而`string`使用`char`.

* * *

如果你*真的*想要一个`string`（而**不是**一个`wstring`），建议的 C++ 方法是使用[`use_facet`](http://www.cplusplus.com/reference/std/locale/use_facet/)如下[所示](https://stackoverflow.com/a/1525642/591495)：

```
const std::locale locale("C");
const std::wstring src = ...;
const std::string dst = ...;
std::use_facet<std::ctype<wchar_t> >(loc)
    .narrow(src.c_str(), src.c_str() + src.size(), '?', &*dst.begin()); 
```

* * *

您也可以单独转换为多字节 C 字符串，然后使用它来构建您的`std::string`. 然而，这*不是*在 C++ 中执行此操作的首选方式。执行此操作的函数是[`wcstombs`](http://www.cplusplus.com/reference/clibrary/cstdlib/wcstombs/)，如下所述：

```
size_t wcstombs ( char * mbstr, const wchar_t * wcstr, size_t max ); 
```

由于您使用的是 Windows，因此您也可以使用[`WideCharToMultiByte`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374130(v=vs.85).aspx)此步骤。

```
int WideCharToMultiByte(
  __in       UINT CodePage,
  __in       DWORD dwFlags,
  __in       LPCWSTR lpWideCharStr,
  __in       int cchWideChar,
  __out_opt  LPSTR lpMultiByteStr,
  __in       int cbMultiByte,
  __in_opt   LPCSTR lpDefaultChar,
  __out_opt  LPBOOL lpUsedDefaultChar
); 
```

`LPSTR`[根据MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383751(v=vs.85).aspx#lpstr)定义如下：

```
typedef CHAR *LPSTR;
typedef char CHAR; 
```

# android - android setText不适用于自定义标题栏布局

> ID：11854338
> 
> 赞同：0
> 
> 时间：2012-08-07T21:22:18.710
> 
> 标签：android, android-layout, textview, android-titlebar

我为我的浮动活动制作了一个自定义标题栏。现在我想以编程方式更改自定义标题中 TextView 的文本，但无法这样做。我可以通过 xml 更改文本，但我希望它在代码中完成。

这是 label.java(floating activity) 的代码，它没有更新标题栏中的 textView

```
 protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

       requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);

       setContentView(R.layout.my_title);
        TextView label = (TextView)findViewById(R.id.myTitle);
        label.setText("Label here code");//not working
        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.my_title);

        setContentView(R.layout.label);// as i need this layout for rest of activity

    //rest of code 
```

我的标题.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TextView
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/myTitle"
android:text="Label here"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:textColor="@android:color/white"
 /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:50:14.210

你这样做是错的。你必须这样做：

```
public class CustomTitleActivity extends Activity {
    private TextView title;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);

        setContentView(R.layout.label);

        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.my_title);

        title = (TextView) findViewById(R.id.title);
        title.setText("My custom title");
    }
} 
```

您试图将自定义标题布局膨胀到 Activity 的内容区域中`setContentView(R.layout.my_title)`，这当然可以让您抓住 ，`TextView`因为您将其膨胀到容器中，但随后您告诉它将您的自定义标题膨胀到 Window 中，这膨胀了完全不同的 TextView 这实际上是你想要的。然后你用 覆盖了 Activity 的内容`setContentView(R.layout.label)`。

# javascript - JavaScript 查找行内元素的 X,Y 以在其旁边设置弹出框

> ID：11854352
> 
> 赞同：0
> 
> 时间：2012-08-07T21:23:25.527
> 
> 标签：javascript, location, inline

我的表格记录很少，当用户将鼠标悬停在某个记录上时，我需要显示一个弹出框。

我已经创建了弹出框并在那里设置了消息。唯一剩下的就是设置该框 ( `<div id="popup"></div>`) 的坐标，使其位于触发该框的元素旁边。

所以我得到了`this`鼠标悬停的标签。现在我怎样才能得到它在窗口上的位置？

我试过`this.offsetLeft`了，它与父母有关。该元素是内联的，所以我不知道如何找到它。

我使用纯 JavaScript，请不要推荐 jQuery，因为我不想在这个项目中使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T21:33:21.440

```
var box = this.getBoundingClientRect();

alert( "y:" + box.top + "x:"+ box.left );​ 
```

[http://jsfiddle.net/hNShL/](http://jsfiddle.net/hNShL/)

要考虑滚动：

```
var body = document.body,
    html = document.documentElement,
    scrollTop = window.pageYOffset || html.scrollTop || body.scrollTop || 0,
    scrollLeft = window.pageXOffset || html.scrollLeft || body.scrollLeft || 0,

    box = this.getBoundingClientRect(),

    top = box.top + scrollTop,
    left = box.left + scrollLeft;

alert( "y:" + top + "x:"+ left );​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T21:31:06.813

您可以尝试递归地遍历元素的[`offsetParent`s](https://developer.mozilla.org/en-US/docs/DOM/element.offsetParent)以获取它们的`offsetLeft`值并将它们添加到元素自己的 s 中`offsetLeft`。

这样的事情应该可以解决问题：

```
function offsetLeftRelativeToPage(element) {
    var offset = element.offsetLeft;
    var offsetParent = element.offsetParent;
    if (offsetParent != null) {
        offset += offsetLeftRelativeToPage(offsetParent);
    }
    return offset;
}

var trigger = document.getElementById('trigger');
var popup = document.getElementById('popup');

trigger.onmouseover = function() {
    var offsetLeft = offsetLeftRelativeToPage(this);
    popup.style.left = offsetLeft;
} 
```

JSFiddle 演示：[jsfiddle.net/e6vWV/](http://jsfiddle.net/e6vWV/)

# macros - 如何实现推送宏？

> ID：11854357
> 
> 赞同：2
> 
> 时间：2012-08-07T21:23:54.643
> 
> 标签：macros, common-lisp

有人可以帮我理解如何`push`实现为宏吗？下面的朴素版本对位置形式进行了两次评估，并且在评估元素形式之前这样做：

```
(defmacro my-push (element place)
  `(setf ,place (cons ,element ,place))) 
```

但是，如果我尝试按以下方式解决此问题，那么我`setf`就在错误的地方：

```
(defmacro my-push (element place)
   (let ((el-sym    (gensym))
         (place-sym (gensym)))
     `(let ((,el-sym    ,element)
            (,place-sym ,place))
        (setf ,place-sym (cons ,el-sym ,place-sym)))))

CL-USER> (defparameter *list* '(0 1 2 3))
*LIST*
CL-USER> (my-push 'hi *list*)
(HI 0 1 2 3)
CL-USER> *list*
(0 1 2 3) 
```

我怎样才能`setf`在不评估两次的情况下找到正确的地方？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T06:25:55.640

做到这一点似乎有点复杂。例如，`push`SBCL 1.0.58 中的代码是：

```
(defmacro-mundanely push (obj place &environment env)
  #!+sb-doc
  "Takes an object and a location holding a list. Conses the object onto
  the list, returning the modified list. OBJ is evaluated before PLACE."
  (multiple-value-bind (dummies vals newval setter getter)
      (sb!xc:get-setf-expansion place env)
    (let ((g (gensym)))
      `(let* ((,g ,obj)
              ,@(mapcar #'list dummies vals)
              (,(car newval) (cons ,g ,getter))
              ,@(cdr newval))
         ,setter)))) 
```

因此阅读有关[get-setf-expansion](http://clhs.lisp.se/Body/f_get_se.htm)的文档似乎很有用。

作为记录，生成的代码看起来相当不错：

推入一个符号：

```
(push 1 symbol) 
```

扩展到

```
(LET* ((#:G906 1) (#:NEW905 (CONS #:G906 SYMBOL)))
  (SETQ SYMBOL #:NEW905)) 
```

推入 SETF 功能（假设`symbol`指向列表列表）：

```
(push 1 (first symbol)) 
```

扩展到

```
(LET* ((#:G909 1)
       (#:SYMBOL908 SYMBOL)
       (#:NEW907 (CONS #:G909 (FIRST #:SYMBOL908))))
  (SB-KERNEL:%RPLACA #:SYMBOL908 #:NEW907)) 
```

因此，除非您花一些时间来学习`setf`，[setf 扩展](http://clhs.lisp.se/Body/05_aab.htm)和公司，否则这看起来相当神秘（即使在研究它们之后看起来仍然如此）。[OnLisp](http://www.paulgraham.com/onlisp.html)中的“广义变量”一章可能也很有用。

提示：如果您编译自己的 SBCL（不是那么难），请将`--fancy`参数传递给`make.sh`. 通过这种方式，您将能够快速查看 SBCL 中的函数/宏的定义（例如，`M-.`在 Emacs+SLIME 中）。显然，不要删除那些源（你可以在`clean.sh`之后运行`install.sh`，以节省 90% 的空间）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:17:12.597

看看现有的（至少在 SBCL 中）是如何做事的，我看到：

```
* (macroexpand-1 '(push 1 *foo*))

(LET* ((#:G823 1) (#:NEW822 (CONS #:G823 *FOO*)))
  (SETQ *FOO* #:NEW822))
T 
```

所以，我想，结合你的版本和它产生的东西，一个人可能会做：

```
(defmacro my-push (element place)
   (let ((el-sym  (gensym))
         (new-sym (gensym "NEW")))
     `(let* ((,el-sym  ,element)
             (,new-sym (cons ,el-sym ,place)))
        (setq ,place ,new-sym))))) 
```

几点观察：

1.  这似乎适用于`setq`or `setf`。根据您实际尝试解决的问题（我认为重写`push`不是实际的最终目标），您可能会偏爱其中一个。

2.  请注意，`place`它仍然会被评估两次......尽管它至少在评估之后才会这样做`element`。你真的需要避免双重评估吗？（鉴于内置`push`没有，我想知道您是否/如何能够......尽管我在花很多时间思考之前写了这篇文章。）鉴于它是需要评价为“[地方](http://clhs.lisp.se/Body/26_glo_p.htm#place)”，或许这很正常？

3.  使用`let*`而不是`let`允许我们`,el-sym`在设置中使用`,new-sym`。这将移动到`cons`发生的位置，以便在 的第一次评估`,place`和 的评估之后对其进行评估`,element`。关于评估排序，也许这可以满足您的需求？

4.  我认为您的第二个版本的最大问题是您`setf`确实需要对传入的符号进行操作，而不是对`gensym`符号进行操作。

希望这会有所帮助......（我自己对这一切还有些陌生，所以我在这里做一些猜测。）

# javascript - 调整维基百科上的动画大小

> ID：11854359
> 
> 赞同：5
> 
> 时间：2012-08-07T21:23:58.823
> 
> 标签：javascript, jquery

如果您在 Chrome 和 ctrl+scrollup 或 ctrl+scrolldown 中访问[Wikipedia 页面](http://en.wikipedia.org/wiki/Main_Page)，则调整大小是在动画中完成的。

这是如何实现的？

（在 FF 中只有

```
 Read
  View source
  View history 
```

右上角的链接动画）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T21:28:25.310

如果你用 Chrome 的 Inspector 检查 CSS，你会发现这条规则：

```
body.vector-animateLayout div#content, body.vector-animateLayout div#footer {
  transition: margin-left 250ms,padding 250ms;
  -moz-transition: margin-left 250ms,padding 250ms;
  -webkit-transition: margin-left 250ms,padding 250ms;
  -o-transition: margin-left 250ms,padding 250ms;
} 
```

`margin-left`这可以平滑地为和属性设置动画`padding`，Webkit 在放大和缩小时似乎会对其进行修改。Firefox 也应该动画，但它没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T21:35:40.260

Wikipedia 在大多数浏览器中没有动画，但有动画试图继续。第一个线索是`vector-animate`每一页正文上的类。他们的 load.js 文件（在每个页面的底部调用）试图在用户放大和缩小时创建一个动画开关，但这在大多数浏览器中是不支持的（只有少数浏览器）。它不适用于大多数 FF 和 IE 版本。加载 JS 文件在这里找到：`//bits.wikimedia.org/de.wikipedia.org/load.php?debug=false&amp;lang=de&amp;modules=site&amp;only=scripts&amp;skin=vector&amp;*`

此外，他们还使用一些 CSS 来尝试对此进行动画处理：

```
body.vector-animateLayout div#content, body.vector-animateLayout div#footer {
transition: margin-left 250ms,padding 250ms;
-moz-transition: margin-left 250ms,padding 250ms;
-webkit-transition: margin-left 250ms,padding 250ms;
-o-transition: margin-left 250ms,padding 250ms;
} 
```

对于 Webkit 浏览器，这将获得相同的效果。[可在此处](http://www.w3schools.com/css3/css3_transitions.asp)找到有关此的参考。正如您将注意到的，这个`transitions`CSS3 属性还没有得到很好的支持。

有关此属性支持的更多信息，请查看[此处](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_transitions?redirectlocale=en-US&redirectslug=CSS%2FCSS_transitions)。

# servicestack - 我可以在 ServiceStack ResponseFilter 中获取 HttpStatusCode 吗？

> ID：11854360
> 
> 赞同：1
> 
> 时间：2012-08-07T21:24:01.660
> 
> 标签：servicestack

在 ResponseFilters 中是否有获取返回给客户端的状态代码（和描述）？

长解释：我正在考虑在响应过滤器中添加响应标头。问题是在我们的 API 中，我们设置了一些 NotFound & BadRequest 在状态描述中为用户返回一条消息；

```
return HttpError.NotFound(string.Format("Not found with TicketCodeId {0}",
       request.TicketCodeId)) 
```

这适用于各种 android 和 .net 客户端。但是有些客户（我在看你的 iphone）没有得到状态描述。这个想法是在 responsefilter 中看到状态代码设置为 400 范围并且它有一个特殊的消息，然后添加一个标题并将状态消息描述复制到其中。

问题是 ResponseFilter 可以访问 IHttpResponse，并且该对象只有状态码的设置器（因此我无法确定是否需要添加标头）。

我想以这种通用方式解决它，以避免在任何设置 400 状态代码以向标题添加相同描述的地方记住（并返回所有服务实现）。如果这在一个地方完成，那就太好了，ResponseFilter。

[响应过滤器文档](https://github.com/ServiceStack/ServiceStack/wiki/Request-and-response-filters)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:24:01.660

由于我们使用 BadRequest 和 NotFound 返回所有响应，我们在状态描述中使用消息作为 HttpError 或 HttpResult（两者都是 IHttpResult 类型），我可以执行以下操作来创建所需的额外标头：

```
// Add Filter: If result is of type IHttpResult then check if the statuscode 
// is 400 or higher and the statusdescription is set.
this.ResponseFilters.Add((req, res, dto) =>
{
    if (dto == null) return;

    var httpResult = dto as IHttpResult;
    if (dto is IHttpResult)
    {
        // If statuscode is 400 then add a Header with the error message; 
        // this since not all clients can read the statusdescription
        if ((int)httpResult.StatusCode >= 400)
            AddPmErrorMessageHeader(res, httpResult.StatusDescription);
    }
}); 
```

AddPmErrorMessageHeader 方法将做一些额外的验证并使用 res 对象添加标题：

```
res.AddHeader("PmErrorMessage", statusDescription); 
```

我对 res.OriginalResponse 进行了一些测试，但不知何故总是将 StatusCode 设置为 200，即使在设置 4** 状态代码之前也是如此。

# android - Android - 手机处于空闲模式时网络访问速度慢

> ID：11854364
> 
> 赞同：0
> 
> 时间：2012-08-07T21:24:12.437
> 
> 标签：android, android-service

我有每 10 秒向服务器（http 客户端）发出一些请求的应用程序。我阅读了很多关于应用程序生命周期的内容。我的应用程序具有带有前台标志的服务，并且当 android 处于“活动状态”时它运行良好（应用程序一直工作）。我没有真正的安卓手机，所以我在模拟器上进行测试，但我的朋友在智能手机上测试它，他注意到当他离开手机时，请求会发布 10、30 分钟，甚至一小时。如果他打开屏幕，那么请求时间会回到 10 秒（他可以访问服务器，所以他可以看到日志）。这是已知的行为吗？因为他从 google 安装了 gmail 通知程序，并且同样的问题（大延迟）。有什么解决办法吗？我的服务有定时器任务（所以请求是在异步任务中发送的）

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:53:40.380

首先，如果您每 10 秒轮询一次，那将消耗大量电池和网络带宽。

我建议使用较低频率或服务器推送。

对于投票问题，您如何实施投票？你使用计时器吗？如果是这样，你传递什么选项？还是您使用休眠 10 秒的线程？

根据版本的不同，Android 可能会关闭所有进程，或延迟网络请求以每 30 分钟运行一次，以节省电池电量和带宽。（启动网络组件比保持它们运行会消耗大量电池。因此，如果您的应用打开网络，请进行轮询，然后简单地将其关闭，Android 可能会安排它与系统上的所有其他请求保持一致。）

您能否向我们提供有关您如何进行投票的更多信息？

**更新**

您可能需要安排一个“WakeLock”，以便 android 知道何时为您的服务唤醒。我认为，默认情况下，android 不会为非常频繁地安排的计时器请求唤醒，它会按照我的解释安排它们。另一方面，WakeLocks 可以强制 android 唤醒。

请参阅[此问题](https://stackoverflow.com/questions/6091270/how-can-i-keep-my-android-service-running-when-the-screen-is-turned-off)和[WakeLock 文档](http://developer.android.com/reference/android/os/PowerManager.WakeLock.html) 确保您传递正确的参数，这样您就不会打开屏幕。（会很烦人。）

**更新** 我仍然建议为此使用服务器推送，这将节省电池和带宽，同时保持实时更新。

# c++ - 搜索与“X”不同的第一个字符的字符串

> ID：11854369
> 
> 赞同：0
> 
> 时间：2012-08-07T21:24:53.583
> 
> 标签：c++, stdstring

与 str.find('X') 相反-在 std::string 中查找与特定字符不同的第一个字符的最有效方法是什么？如果我有一个主要由 X'es 组成的字符串，但在某些时候还有另一个字符 - 我如何快速找到它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T21:27:04.900

```
std::string str = "XXXXXXXXXXXXXXX.XXXXXXXXXXX";

size_t index = str.find_first_not_of('X'); 
```

但是一个普通的旧 for 循环也一样好。

或者，如果你想要一个迭代器而不是一个索引，也许像这样：

```
std::string::iterator = std::find_if(str.begin(), str.end(),
                        [](char c){ return c != 'X'; }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T21:26:36.620

我认为最有效的方法是遍历字符串并将每个字符与 进行比较`'X'`，返回第一个不同的字符。

在没有任何关于字符串的先验知识的情况下，我没有看到比 更好的方法`O(n)`，并且连续调用`find('X')`可能比仅遍历字符更糟糕。

# c++ - C++ 模板运算符重载

> ID：11854371
> 
> 赞同：3
> 
> 时间：2012-08-07T21:25:00.773
> 
> 标签：c++, templates, overloading, operator-keyword

我正在编写一个模板矩阵类，我对 * 运算符的重载如何工作感到有些困惑。

我想重载这样的东西（省略不相关的代码）：

```
template<typename T>class Matrix4t
{

friend vector3 operator*(const vector3 &inputV3, const matrix4t &inputM4t);

template <typename scalarT>
friend scalarT operator*(const scalarT &inputSclT, const matrix4t &inputM4t);

public:
const matrix4t operator*(const matrix4t)

vector3 operator*(const vector3 &inputV3);

template <typename scalarT>
const matrix4t operator*(const scalarT&);

} 
```

假设单个乘法的定义正确，我假设这应该允许我的矩阵对象与来自操作数两侧的 vector3 类型的对象相乘，每次都返回一个 vector3。它还应该允许将我的矩阵与标量模板值相乘，可以是浮点数、双精度等。这些方法的定义需要不同，以允许向量与标量乘法，因此不仅仅是对两者都使用模板

但是，在将这个运算符与 vector3 一起使用时，编译器会知道使用显式声明的 vector3 方法，还是会尝试创建该方法的模板化版本，因为定义被写入仅允许标量值，所以这不起作用，然后可能还会抱怨方法重新定义。

关于这是否可行，或者我还能怎么做的任何想法？

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T03:39:04.447

我有一种感觉，你的目标可能是一个比需要的更复杂的解决方案，所以我将从头开始构建，并留下一些细节供以后使用。首先，我将开始分析您提出的语法及其含义。

```
friend vector3 operator*(const vector3 &v, const matrix4t &m);
template <typename scalarT>
friend scalarT operator*(const scalarT &inputSclT, const matrix4t &inputM4t); 
```

这些是朋友声明。Friend 声明*声明*（告诉编译器存在）类外部的实体，并且应该授予这样的实体对此类（在本例中是模板）内部的完全访问权限。第二个朋友声明是一个自由函数模板`operator*`，它通过 const 引用获取一个`scalarT`类型和一个`matrix4T<T>`对象，并产生一个`scalarT`值。这个朋友声明似乎很奇怪，因为矩阵乘以标量值通常会产生另一个相同维度的矩阵，而不仅仅是一个标量值。

请注意，在类模板内部，模板的名称`matrix4t`不是指模板，而是特定的特化（即它代表`matrix4t<T>`，而不是模板的名称）。这种区别现在可能看起来并不重要，但迟早你会意识到它的重要性。

第二个声明是一个非模板化的自由函数`operator*`，它通过 const 引用接受 a`vector3`和 a`matrix4t`并产生另一个`vector3`。由于我们在 的定义中`matrix4t`，因此模板的名称指的是 specialization `matrix4t<T>`，但`vector3`仅指的是*template*，而不是任何特定的实例化。您应该将其设为接受`vector3<U>`任何给定类型的模板，或者将其设为接受单一类型（可以是我们模板`U`的参数）的非模板函数：与其他声明一样，返回值可能关闭或不关闭...取决于向量的维度（是行还是列？）`T``vector3<T>`

关于实际交友，我建议您阅读[此答案](https://stackoverflow.com/a/4661372/36565)以回答不同的类似问题。

对于实际的运算符，对于标量类型，我建议采用以下方法：

*   实现`operator*=`将与存储的类型相同的标量作为参数
*   `operator*`实现两个版本`operator*=`

.

```
template <typename T> class matrix4t {
public:
    matrix4t& operator*=( T scalar ); // and implement
    friend matrix4t operator*( matrix4t lhs, T scalar ) {
       return lhs*=scalar;
    }
    friend matrix4t operator*( T scalar, matrix4t rhs ) {
       return rhs*=scalar;
    }
}; 
```

注意：`operator*=`实现一次，将矩阵作为左侧（您也可以提供将矩阵作为右侧的重载，但它看起来有点奇怪：`5 *= matrix`产生一个矩阵......）。实现`operator*`为自由函数（友谊仅用于为每个实例化类型提供自由函数，阅读链接答案），通过转发到`operator*=`.

对于乘以向量的情况（并且因为它不是对称的），分派到单个实现的技巧将不起作用，但是您可以像上面那样将这两个实现作为非模板化的朋友提供。

如果您想提供混合类型的操作，那么以上所有内容都必须是模板。增加的复杂性不是模板，而是如果要提升类型，则确定结果类型应该是什么。使用 C++11，最简单的方法是使用`decltype`和尾随返回类型：

```
template <typename U>
friend auto operator*( matrixt4 lhs, U scalar ) -> matrix4t< decltype(scalar * element(0,0) ) > {
   // implement here
} 
```

同样对于`operator*(scalar,matrix)`. 请注意，如果您正在提升类型，`operator*=`可能根本没有意义（因为类型与 lhs 相同），或者如果这样做，它可能会或可能不会产生您想要的结果。如果您考虑这样做，则`operator+`必须`matrix4t<A>`通过引用获取参数（因为它可能不是适当的类型）并复制到`matrix4t<B>`返回类型（其中`A`和`B`分别是被相乘的矩阵的类型和结果）。

从这里开始，您应该决定您需要或想要实施什么，并且您可能想在遇到更具体的问题时提出这些问题。

# iphone - 如何在 iOS 的 ViewController 中的其他视图下方添加视图？

> ID：11854373
> 
> 赞同：4
> 
> 时间：2012-08-07T21:25:16.917
> 
> 标签：iphone, ios, ios5, uiscrollview

在我的应用程序中，我正在创建混合的视图控制器，`UILabel`并且`UITextview`它希望可以滚动，因为文本是动态的并且也超过了垂直屏幕大小。

我目前有 Scrollview，它的子视图如下。视图是在**Xcode 4.3 Storyboard**中创建的。

**UILabel1（说标题）**

**UITextView1（可以是任意大小的动态文本）**

**UILabel2（第二个标题）**

**UITextView2（可以是任意大小的动态文本）**

等等。

问题是

当`UITextView1`内容更多时，它会与`UILabel2`我不想要的内容重叠。

我想在`UILabel1`scrollView 之上和. 下面 等等。`UITextView1``UILabel1``UILabel2``UITextView1`

我必须做些什么来实现这一目标？

编辑

在故事板中

![在此处输入图像描述][1]

在模拟器中

![在此处输入图像描述][2]

谢谢你们的帮助。非常感激。

代码

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.

[scrollView setScrollEnabled:YES];     
[self.view addSubview:cockTailNameLabel];
[self.view insertSubview:txtIngredients belowSubview:cockTailNameLabel];
[self.view insertSubview:scrollView belowSubview:cockTailNameLabel];
//[scrollView]

[self.cockTailNameLabel setText:self.passcockTailName];  

[_txtUse setText:self.passUse]; 
[_txtUse setEditable:NO];
[_txtUse setUserInteractionEnabled:NO];

CGRect useFrame = _txtUse.frame;
useFrame.size.height = _txtUse.contentSize.height;
_txtUse.frame = useFrame; 

[txtIngredients setText:self.passIngredients];
[txtIngredients setEditable:NO];
[txtIngredients setUserInteractionEnabled:NO];
CGRect ingredientFrame = txtIngredients.frame;
ingredientFrame.size.height = txtIngredients.contentSize.height;
txtIngredients.frame = ingredientFrame;  

[txtRecipe setText:self.passReceipe];
[txtRecipe setEditable:NO];
[txtRecipe setUserInteractionEnabled:NO];
CGRect recipeFrame = txtIngredients.frame;
recipeFrame.size.height = txtRecipe.contentSize.height;
txtRecipe.frame = recipeFrame;

[scrollView insertSubview:_txtUse belowSubview:cockTailNameLabel];
[scrollView insertSubview:titleIngredients belowSubview:_txtUse];
[scrollView insertSubview:txtIngredients belowSubview:titleIngredients];
[scrollView insertSubview:btnReceipe belowSubview:txtIngredients];
[scrollView insertSubview:btnHome belowSubview:txtIngredients];
[scrollView insertSubview:txtRecipe belowSubview:btnHome];
[scrollView insertSubview:btnfacebookShare belowSubview:txtRecipe];
[scrollView insertSubview:btnTwitterShare belowSubview:txtRecipe];

/*[scrollView addSubview:_txtUse];
[scrollView addSubview:titleIngredients];
[scrollView addSubview:txtIngredients];
[scrollView addSubview:btnReceipe];
[scrollView addSubview:btnHome];
[scrollView addSubview:txtRecipe];
[scrollView addSubview:btnfacebookShare];
[scrollView addSubview:btnTwitterShare];*/

[scrollView setContentSize:CGSizeMake(320, 1000)];

NSLog(@"RecipeName :%@ ",passcockTailName); 
```

}

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T21:28:55.840

在 Storyboard 或 IB 中，您可以自由地重新排列它们。

在你做的代码中`- (void)insertSubview:(UIView *)view belowSubview:(UIView *)siblingSubview`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T21:39:23.460

在代码中（在 viewDidLoad 中）：

```
UIScrollView *scroll =[[UIScrollView alloc] initWithFrame:CGrectMake(0,0 320, 480)];
[self.view addSubview:scroll];
// code to init your UI object
UILabel *uilabel1 = [[UIlabel alloc] initWithFrame:CGrectMake(10,10, 100, 40)]; // example 
uilabel1.font = [UIFont systemFontOfSize:10];
uilabel1.text = @"UILabel1";
uilabel1.backgroundColor = [UIColor clearColor];
//
//
UILabel *uilabel2 = [[UIlabel alloc] initWithFrame:CGrectMake(10, 10 + 10 + uilabel1.frame.origin.y, 100, 40)]; // example
uilabel2.font = [UIFont systemFontOfSize:10];
uilabel2.text = @"UILabel2";
uilabel2.backgroundColor = [UIColor clearColor];
//
//
[scroll addSubview:uilabel1];
[uilabel1 releale];
[scroll addSubview:uilabel2];
[uilabel2 releale];
//
//
// in end 
float offset = 10.0 * 2; // offset between uiobjects, N - number of objects
scroll.contentSize = CGSizeMake (0, 0, uilabel1.frame.size.height + uilabel2.frame.size.height + offset, 320); 
```

请注意，您可以设置您的 uiobjects 的框架（和其他属性）并添加它以便下降。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T02:59:56.500

您可以告诉下一个视图从第一个视图的末尾开始，如下所示：

```
startYOfNextView = firstView.frame.origin.y position + firstView.frame.size.height; 
```

对其他视图的其余部分执行相同操作。如果您的视图具有可变文本长度，您可能需要根据特定字体预先计算字符串的高度，例如：

```
CGSize maxSize = CGSizeMake(widthOfView, 9999999);
CGSize expectedSize = CGSizeMake(stringVar sizeWithFont:[UIFont fontWithName:@"Arial"] withMaxSize:maxSize lineBreakMode:UILineBreakModeWordWrap); 
```

然后告诉您的动态视图使用 expectedSize 变量的高度，如下所示：

```
myDynamicView = [[UILabel alloc] initWithFrame:CGRectMake(..., expectedSize.height)]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T18:26:07.783

您的问题是标签出现在文本视图之上（重叠），对吗？

在这种情况下，您正在动态修改 textview 的高度。如果只是出于显示目的，您可以将文本设置为带有 numberOfLines = 0 的 UILabel 而不是 UITextview; 随着它添加到滚动视图中添加标签会很好。

您还需要修改剩余视图的 origin.y 以便正确对齐。即，secondView.origin.y = firstView.origin.y + firstView.size.height + offset。同样修改上面视图的剩余视图的原点。这样它的原点将位于前一个视图框架之外。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-20T09:49:59.677

就我而言，我必须将它投影到父视图上，所以请记住还有一些东西，

```
- (void)insertSubview:(UIView *)view aboveSubview:(UIView *)siblingSubview 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-24T21:45:15.620

我认为添加一个透明的 UI 按钮是最快的解决方案。您可以添加一次，然后在需要禁用当前视图下方的所有视图时显示/隐藏（假设“当前”视图，例如弹出窗口，最后添加到您的超级视图）。

在弹出视图中声明一个实例变量`UIButton* _parentDisablingOverlay;`，然后在它的`init`or`layoutSubviews`方法中添加它：

```
_parentDisablingOverlay = [[UIButton alloc] initWithFrame:CGRectMake(0,0, self.superview.frame.size.width, self.superview.frame.size.height)];
[self.superview insertSubview:_parentDisablingOverlay belowSubview:self];
_parentDisablingOverlay.hidden = true; 
```

稍后，当您想要显示弹出窗口并禁用以下所有内容时：

```
- (void) open {
   self.hidden = false;
   _parentDisablingOverlay.hidden = false;
} 
```

与关闭并重新启用所有内容类似：

```
- (void) close {
    self.hidden = true;
    _parentDisablingOverlay.hidden = true;
} 
```

# php - 将 php ajax jquery 组合为由 sql 填充的下拉菜单

> ID：11854376
> 
> 赞同：0
> 
> 时间：2012-08-07T21:25:35.543
> 
> 标签：php, jquery, ajax, wordpress

我试图让三个不同的 php 位按顺序工作，并以对用户来说容易的方式工作。这是我已经从数据库中获取数据的一些代码。我在下拉列表中有一个与此类似的语句，当它发生更改时，我需要使用第一段代码的答案来填充我还需要获取这两个的答案并将它们放入另一个将显示的 sql 语句中结果集。我知道我需要使用 jquery 或 ajax 之类的东西，但我不确定如何在 WordPress 中使用它来获得所需的效果。

```
<select name="raceTrack2" onchange="">
      <?php
            $postids = $wpdb->get_col("SELECT trackName FROM " . $trackTableName . ";");

            foreach ($postids as $value) 
            {
                echo '<option>' . $value . '</option>' ;

            }

      ?>
</select> 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T05:29:08.443

有几种方法可以给这只猫剥皮。既然您提到了 jQuery/Ajax，我将指导您完成使用这些技术的高级步骤：

1.  编写一个 javascript 函数，对 PHP 脚本进行[Ajax](http://api.jquery.com/jQuery.ajax/)调用，该脚本以 JSON 格式返回数据以填充您的第二个下拉列表。在您的 ajax() 方法中，成功完成调用后，解析 JSON 数据并为第二个下拉列表的值构造 HTML 代码。然后使用 jQuery[选择器](http://api.jquery.com/category/selectors/)，选择您的第二个下拉菜单并使用 html() 方法[设置它的 HTML 内容](http://api.jquery.com/html/)。
2.  修改第一个下拉列表的 onchange() 事件处理程序以调用在步骤 1 中创建的 JS 函数。
3.  编写另一个 javascript 函数，从第一个下拉列表和第二个下拉列表中获取所选值。然后对 PHP 脚本进行另一个 Ajax 调用，该脚本将这两个值作为输入，并对这些值执行它需要做的任何事情。
4.  最后，修改第二个下拉列表的 onchange() 事件处理程序，以调用在步骤 3 中创建的 JS 函数。

在高层次上，应该这样做。正如我所说，有很多方法可以给这只猫剥皮。这可能是最简单的方法，不需要回发/往返您的服务器。

# iphone - iPhone 编程：数据未进入仅在 AT&T 上运行 5.1.1 的 iPhone 4 上的应用程序

> ID：11854379
> 
> 赞同：0
> 
> 时间：2012-08-07T21:25:47.370
> 
> 标签：iphone, ios, cellular-network

立即需要帮助！

我们有一个已获得批准的应用程序，但我们收到报告称，在 AT&T 上运行 5.1.1 的 iPhone 4 用户没有在他们的应用程序中显示数据。

另一个奇怪的事情是，如果我使用 Verizon Mi-Fi 连接，它可以工作，但如果我使用 AT&T mi-fi 连接，它就不起作用。

我们已经测试了以下内容并验证了它适用于以下内容：

> iPhone 4S、AT&T 上的 5.1.1、Wi-Fi iPad 2、AT&T 3G 上的 5.1.1、Wi-Fi iPhone 4、Verizon 上的 5.1.1、Wi-Fi iPhone 4、Sprint 上的 5.1.1、Wi-Fi iPhone Verizon 上的 4S、5.1.1、Wi-Fi

这些设备没有越狱或解锁，直接来自 AT&T。此外，来自我们服务器的信息是 JSON 有效负载。

如果您需要更多信息或您之前听说过此问题，请告诉我。我们真的需要这方面的帮助。

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T00:11:36.637

我会看的东西：

*   你在请求一个特定的端口吗
*   您是否访问了列入黑名单的 URL/IP（您可以在浏览器中访问）
*   您是否正在发送或接收整形/阻塞数据包（例如 P2P 数据）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T00:24:28.400

您可能会检查一件事 - 有时服务器对 HTTP 标头（例如用户代理字符串）过于敏感，并且某些 ISP 可能会修改某些 HTTP 标头，并且服务器没有提供应有的服务。

我见过配置错误的服务器，它们被设置为向移动和桌面用户提供不同的文件 - 当通过 API 提供 JSON 时，由于 HTTP 用户代理字符串，服务器试图“重定向”到其他资源包括字符串“Mobile”。

假设您可以访问*不*工作的配置，您可以使用 HTTP 跟踪实用程序，如[HTTPScoop](http://tuffcode.com)（它将向您显示请求/响应标头）来尝试诊断出了什么问题。比较工作/非工作请求和响应标头可能会找到您的问题。如果您的 ISP 正在修改 HTTP 标头，您可能无法在 HTTPScoop 中看到它，但响应代码/标头可能仍然有用。

# java - 如何正确关闭 Java NIO 中的 SocketChannel？

> ID：11854382
> 
> 赞同：3
> 
> 时间：2012-08-07T21:26:00.223
> 
> 标签：java, nio, socketchannel

我有一个带有主循环的简单非阻塞服务器：

```
try {
    while (selector.select() > -1) {

        // Wait for an event one of the registered channels

        // Iterate over the set of keys for which events are available
        Iterator selectedKeys = selector.selectedKeys().iterator();
        while (selectedKeys.hasNext()) {
            SelectionKey key = (SelectionKey) selectedKeys.next();
            selectedKeys.remove();
            try {
                if (!key.isValid()) {
                    continue;
                }

                if (key.isConnectable()) {
                    connect(key);
                }

                // Check what event is available and deal with it
                if (key.isAcceptable()) {
                    accept(key);
                }

                if (key.isReadable()) {
                    read(key);
                }

                if (key.isWritable()) {
                    write(key);
                }
            } catch (Exception e) {
                e.printStackTrace();
                close(key);
            }
        }
    }
} catch (Exception e) {
    e.printStackTrace();
} 
```

在读/写部分，我检查是否有要读/写的东西，如果没有 - 然后我尝试关闭频道：

```
if (channel.read(attachment.buffer) < 1) 
    close(key); 
```

关闭方法：

```
private void close(SelectionKey key) throws IOException {
    key.cancel();
    key.channel().close();
} 
```

但是在处理此代码期间，我在主循环中遇到异常（它被捕获但我认为有问题）我得到了这个堆栈跟踪：

```
java.nio.channels.CancelledKeyException
    at sun.nio.ch.SelectionKeyImpl.ensureValid(Unknown Source)
    at sun.nio.ch.SelectionKeyImpl.readyOps(Unknown Source)
    at java.nio.channels.SelectionKey.isWritable(Unknown Source) 
```

因此，当进入写入部分时，它在主循环上失败，关闭通道并在“可写”部分返回主循环，并因此类异常而失败。有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T22:03:30.797

错误非常简单。

```
if (!key.isValid()) {
    continue;
}

if (key.isConnectable()) {
    connect(key);
}

// Check what event is available and deal with it
if (key.isAcceptable()) {
    accept(key);
}

if (key.isReadable()) {
    read(key);
}

if (key.isWritable()) {
    write(key);
} 
```

您的`read`方法是取消`SelectionKey`. 但是，在从 中返回后`read`，您再次测试该通道是否可写的密钥 - 可能只是在取消相同的密钥之后！您的初始检查在这里无济于事。

* * *

一种解决方案是检查密钥在刚刚被取消的地方是否有效：

```
...
if (key.isValid() && key.isWritable()) {
  write(key);
}
... 
```

* * *

或者，您也可以尝试在任何特定频道上一次只注册一个兴趣，因此所有就绪事件都是互斥的：

```
if (!key.isValid()) {
  continue;
}

if (key.isConnectable()) {
  connect(key);
} else if (key.isAcceptable()) {
  accept(key);
} else if (key.isReadable()) {
  read(key);
} else if (key.isWritable()) {
  write(key);
} 
```

这在某些情况下可能是有益的；一般来说，一个通道几乎总是可以写的，保持对写准备的兴趣和边读准备可能会保持`Selector`循环旋转，这很可能是*不可取*的。在大多数情况下，通常只有在底层套接字输出缓冲区已满时才对写就绪感兴趣。

* * *

附带说明一下，知道它[`SocketChannel.read`](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/SocketChannel.html#read(java.nio.ByteBuffer))可以返回一个值`< 1`而不会出错。

> 读取操作可能不会填满缓冲区，实际上它可能根本不会读取任何字节。是否这样做取决于通道的性质和状态。例如，处于非阻塞模式的套接字通道不能读取比从套接字输入缓冲区立即可用的字节数更多的字节；

此外，[`Selector.select`](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/Selector.html#select())没有说明任何有关返回`< -1`以表明它已关闭的信息。

> **返回：**键的数量，可能为零，其就绪操作集已更新

# magento - Magento 管理面板自定义

> ID：11854384
> 
> 赞同：0
> 
> 时间：2012-08-07T21:26:09.743
> 
> 标签：magento

在管理客户选项卡中，默认情况下，最后 20 名注册用户与他们的电子邮件一起列出。我只想隐藏或更改列表 1\. 这样做是为了确保呼叫中心代理不会轻易复制客户的电子邮件信息。

我对此很陌生，所以如果不是太麻烦，请提供文件的完整路径。

史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T22:03:11.333

您可能希望采取稍微不同的方向，为您的代理开发一组权限，这样如果您不希望他们看到该信息，他们可能一开始就无法访问电子邮件。

如果要修改页面大小，可以重写这个类

```
Mage_Adminhtml_Block_Customer_Grid 
```

你会想要覆盖这个方法：

```
protected function _preparePage()
{
    parent::_preparePage();
    $this->getCollection()->setPageSize(1);
} 
```

您可能还想摆脱分页下拉菜单

```
app/design/adminhtml/default/default/template/widget/grid.phtml 
```

因为他们看到它会感到困惑，但是当他们使用它时它不起作用。

# php - 使用 CakePHP 的 App::import() 函数导入 Constant.php 文件

> ID：11854386
> 
> 赞同：1
> 
> 时间：2012-08-07T21:26:24.660
> 
> 标签：php, cakephp

基本上，我有一个名为 的文件`Constants.php`，它位于 中`/app/Lib/Constants.php`，我想在我的一个模型类（可能还有我构建的其他类）中使用它。但是，我似乎无法弄清楚执行此操作的正确语法（而且[`App::import()`](http://api20.cakephp.org/file/Cake/Core/App.php#method-Appimport)我很难理解 CakePHP 的文档）。

我该如何正确地做到这一点？或者在 CakePHP 应用程序中定义用户定义的常量是否有另一个更好的约定（除了使用 Configure 类）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T22:36:20.380

如果该`Constants.php`文件是您为应用程序定义配置变量的文件，我建议使用`Configure`该类。

将`Constants.php`文件放入`Config/`应用程序的目录中。

在您的`Config/bootstrap.php`中，您使用以下行加载常量：

```
Configure::load('Constants'); 
```

现在，在您的应用程序中的任何位置，您都可以使用以下内容读取配置信息：

```
Configure::read('Constants.Something'); 
```

请注意，配置设置需要特定格式的配置变量。在您的文件中使用以下内容`Constants.php`：

```
$config = array('Constants' => array(
    'Something' => 1234,
    'Foo' => 'Bar',
)); 
```

这是处理配置信息的推荐方法，加载到整个应用程序中并可供整个应用程序使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T22:24:25.843

[手册](http://book.cakephp.org/2.0/en/core-utility-libraries/app.html#including-files-with-app-import)是一个更好的地方，因为它更好地解释了它:) 你所要做的就是：

```
App::import('Lib', 'Constants'); 
```

# c# - 如何检测网络共享何时被禁用

> ID：11854389
> 
> 赞同：0
> 
> 时间：2012-08-07T21:26:39.050
> 
> 标签：c#, .net, wmi

我正在构建存储有关网络资源（共享）信息的应用程序。我需要检测管理员在共享和存储管理面板中按停止共享时的情况。我怎样才能做到这一点 ？我阅读了有关 WMI 的信息，但找不到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:52:55.910

检查连接：

```
System.Net.NetworkInformation.NetworkInterface.GetIsNetworkAvailable() 
```

[Microsoft MSDN 文档：网络接口](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkinterface.getisnetworkavailable.aspx)

检查任何更改：

[Microsoft MSDN 文档：NetworkChange](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkchange.aspx)

```
System.Net.NetworkInformation.NetworkChange.NetworkAvailabilityChanged 
System.Net.NetworkInformation.NetworkChange.NetworkAddressChanged 
```

# drupal - 迁移 Drupal

> ID：11854391
> 
> 赞同：0
> 
> 时间：2012-08-07T21:26:57.293
> 
> 标签：drupal

目前，我在 Apache 2.2 上安装了一个 drupal 站点，在 RHEL 6 上安装了 php 5.3。我正在移动服务器并尝试迁移该站点。我已经导入了数据库和 htaccess，但我无法访问除站点根目录以外的任何页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:34:07.350

这发生在：

a) Apache mod_rewrite 未启用。如果您具有root访问权限，请执行`sudo a2enmod rewrite`

或者

b) 根文件夹中的 .htaccess 文件不存在，因此您需要再次复制它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T00:48:44.063

您可能需要在导出数据库之前禁用干净的 URL，尝试`?q=`在每个路径之前添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-01T03:30:17.143

这是问题的故障排除清单`mod_rewrite`：

*   确保启用 Apache 的重写模块： `sudo a2enmod rewrite`.

*   确保原始`.htaccess`文件位于 Drupal 安装的根目录中。

*   确保`.htaccess`Apache 正在读取现有文件。要对其进行测试，请在文件开头添加这一行，您应该会收到**500 Internal Server Error** : `ThisIsReallyABadSyntax`。

*   如果该`.htaccess`文件无效，请确保`AllowOverride`主 Apache 配置文件（通常`/etc/apache2/httpd.conf`在基于 debian 的发行版上）中的指令设置为`All`. 它可能`None`默认设置为。

*   最后，确保在 Drupal 设置中启用了干净的 URL 功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-15T10:06:23.903

正确迁移 Drupal 的步骤：

1.  转到配置
2.  找到干净的 URL
3.  禁用内部勾选！
4.  清理缓存！
5.  下载您的站点文件
6.  下载您的数据库
7.  在新站点中创建新数据库
8.  传输文件和数据库
9.  登录 10.执行此步骤以启用 Clean URL：

100% 保证工作！

步骤： 1\. 下载 - 开发版 (7.x-dev) 2\. 查找文件 .htaccess 3\. 只需将其复制到您的服务器 4\. 就是这样！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-21T21:36:41.087

使用***phpinfo();*** 比较所有服务器规格，以确保两台服务器完全相同或相似。

# clojure - Clojure 不是零检查

> ID：11854392
> 
> 赞同：63
> 
> 时间：2012-08-07T21:27:00.490
> 
> 标签：clojure

在 Clojure`nil?`中检查 nil。如何检查非零？

我想做与以下 Java 代码等效的 Clojure：

```
if (value1==null && value2!=null) {
} 
```

**跟进：**我希望有一个 not nil 检查，而不是用`not`. `if`有`if-not`对应的。有这样的对应`nil?`吗？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2014-06-04T17:05:45.760

在 Clojure 1.6 之后，您可以使用`some?`：

```
(some? :foo) => true
(some? nil) => false 
```

这很有用，例如，作为谓词：

```
(filter some? [1 nil 2]) => (1 2) 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-08-07T21:47:04.457

另一种定义`not-nil?`方法是使用`complement`函数，它只是反转布尔函数的真实性：

```
(def not-nil? (complement nil?)) 
```

如果您要检查多个值，请使用`not-any?`：

```
user> (not-any? nil? [true 1 '()])
true
user> (not-any? nil? [true 1 nil])
false 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-08-08T03:11:34.907

如果您对区分 不感兴趣`false`，`nil`则可以使用该值作为条件：

```
(if value1
   "value1 is neither nil nor false"
   "value1 is nil or false") 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-08-10T03:21:55.957

在 Clojure中，**出于条件表达式的目的， nil 被视为 false**。

因此，`(not x)`工作实际上与大多数情况下的工作方式完全相同`(nil? x)`（布尔值 false 除外）。例如

```
(not "foostring")
=> false

(not nil)
=> true

(not false)  ;; false is the only non-nil value that will return true
=> true 
```

所以要回答你原来的问题，你可以这样做：

```
(if (and value1 (not value2)) 
   ... 
   ...) 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-08-07T21:31:01.587

健康）状况：`(and (nil? value1) (not (nil? value2)))`

如果条件：`(if (and (nil? value1) (not (nil? value2))) 'something)`

编辑：Charles Duffy 提供了正确的自定义定义`not-nil?`：

> 你想要一个非零？轻松完成：`(def not-nil? (comp not nil?))`

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-03-13T14:51:51.810

`true`如果您希望您的测试在给出时返回`false`，那么您需要此处的其他答案之一。但是，如果您只是想测试它在传递除`nil`or以外的东西时返回一个真值`false`，您可以使用`identity`. 例如，从序列中剥离`nil`s（或s）：`false`

```
(filter identity [1 2 nil 3 nil 4 false 5 6])
=> (1 2 3 4 5 6) 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-11-29T12:48:18.110

您可以尝试[when-not](http://clojuredocs.org/clojure_core/clojure.core/when-not)：

```
user> (when-not nil (println "hello world"))
=>hello world
=>nil

user> (when-not false (println "hello world"))
=>hello world
=>nil

user> (when-not true (println "hello world"))
=>nil

user> (def value1 nil)
user> (def value2 "somevalue")
user> (when-not value1 (if value2 (println "hello world")))
=>hello world
=>nil

user> (when-not value2 (if value1 (println "hello world")))
=>nil 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-08-08T05:09:34.580

如果您想要一个`not-nil?`功能，那么我建议您将其定义如下：

```
(defn not-nil? 
  (^boolean [x]
    (not (nil? x))) 
```

话虽如此，值得将其用法与明显的替代方法进行比较：

```
(not (nil? x))
(not-nil? x) 
```

我不确定引入额外的非标准函数是否值得保存两个字符/一级嵌套。但是，如果您想在高阶函数等中使用它，那将是有意义的。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-01-29T06:46:58.467

另一种选择：

```
(def not-nil? #(not= nil %)) 
```

# caching - 使 HTTP 缓存工作的代码

> ID：11854395
> 
> 赞同：0
> 
> 时间：2012-08-07T21:27:10.290
> 
> 标签：caching, http-caching

我正在阅读有关 HHT 缓存的信息，在[这里](http://betterexplained.com/articles/how-to-optimize-your-site-with-http-caching/)找到了一篇解释一些事情的网站文章，但我仍然不明白，因为我是一个完全的新手，而且这是我第一次听说这个。

首先，使用萤火虫我注意到我有一些很少改变的元素，如： 1\. 网站标志；2.网站CSS；3.网站jquery；4\. 大约 4 张用于造型的图像。

我找到了这段代码：

```
ExpiresActive On
ExpiresDefault A0

# 1 YEAR - doesn't change often
<FilesMatch "\.(flv|ico|pdf|avi|mov|ppt|doc|mp3|wmv|wav)$">
ExpiresDefault A29030400
</FilesMatch>

# 1 WEEK - possible to be changed, unlikely
<FilesMatch "\.(jpg|jpeg|png|gif|swf)$">
ExpiresDefault A604800
</FilesMatch>

# 3 HOUR - core content, changes quickly
<FilesMatch "\.(txt|xml|js|css)$">
ExpiresDefault A10800
</FilesMatch> 
```

但：

1.  我不知道该放在哪里。我不确定我是否可以修改我的 htaccess，因为我有 wordpress 可以重写所有内容。这段代码去哪儿了？

2.  有没有我可以在网站标题中输入的代码，也许是 php？

3.  虽然我的 css、js、jpg 元素不会改变，但我有其他元素会改变，有时因为 cronjob 而每 5 分钟一次。上面的代码按性别规定了文件。**我需要一种方法来指定需要缓存的确切文件。**

请帮忙：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:37:39.110

您看到的是 apache conf 的配置代码。您可以在那里非常具体地设置缓存元信息。通过文件扩展设置此信息的方法是一个好的开始。

但是，您可能想看看这里： [如何设置 HTTP 标头（用于缓存控制）？](https://stackoverflow.com/questions/4480304/how-to-set-http-headers-for-cache-control)

# android - 缩放画布并保持居中

> ID：11854397
> 
> 赞同：12
> 
> 时间：2012-08-07T21:27:20.930
> 
> 标签：android, canvas

我想用绘制的位图来缩放画布。我可以缩放画布，但画在上面的位图分别移动到左上角和右下角。

```
@Override
protected void onDraw(Canvas canvas) {
    canvas.translate(mPosX, mPosY);
    canvas.scale(mScaleFactor, mScaleFactor);

    //draw bitmap
} 
```

在过去的几天里，我尝试了许多不同的方法，从操纵平移坐标到枢轴点进行缩放。但没有什么对我有用。我很确定我的问题必须有一个简单的解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-07T22:07:37.570

就像您提到的那样，枢轴点是执行此操作的正确方法：

```
canvas.scale(2,2, redCircle.x, redCircle.y); 
```

将工作。无需额外翻译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-30T12:12:55.280

```
var widthNew = ctx.canvas.width / 2;
var heightNew = ctx.canvas.height / 2;
ctx.setTransform(scale,0,0,scale,-(scale-1)*widthNew,-(scale-1)*heightNew); 
```

这将帮助您通过水平和垂直平移来水平和垂直缩放画布。

# oracle11g - 如何使用 Oracle 11g 和 SQL Developer 创建一个小而简单的数据库？

> ID：11854403
> 
> 赞同：17
> 
> 时间：2012-08-07T21:27:38.773
> 
> 标签：oracle11g, oracle-sqldeveloper

如何使用 Oracle 11g 和 SQL Developer 创建一个小而简单的数据库？我看到太多错误，我找不到任何方法来制作简单的数据库。例如

```
create database company; 
```

导致以下错误：

```
Error starting at line 1 in command:
create database company
Error at Command Line:1 Column:0
Error report:
SQL Error: ORA-01501: CREATE DATABASE failed
ORA-01100: database already mounted
01501\. 00000 -  "CREATE DATABASE failed"
*Cause:    An error occurred during create database
*Action:   See accompanying errors. 
```

编辑-这与我熟悉的 MySQL 和 MS-SQL 完全不同。不像我预期的那么直观。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-07T21:38:31.747

首先，Oracle 所称的“数据库”通常不同于大多数其他数据库产品所称的“数据库”。MySQL 或 SQL Server 中的“数据库”更接近于 Oracle 所谓的“模式”，即特定用户拥有的对象集。在 Oracle 中，每台服务器通常只有一个数据库（大型服务器上可能有几个数据库），其中每个数据库都有许多不同的模式。如果您使用的是 Oracle Express 版本，则每台服务器只能有 1 个数据库。如果您通过 SQL Developer 连接到 Oracle，则表明您已经创建了 Oracle 数据库。

假设您真的想创建一个模式，而不是数据库（使用 Oracle 术语），您将创建用户

```
CREATE USER company
  IDENTIFIED BY <<password>>
  DEFAULT TABLESPACE <<tablespace to use for objects by default>>
  TEMPORARY TABLESPACE <<temporary tablespace to use>> 
```

然后，您可以为用户分配您想要的任何权限

```
GRANT CREATE SESSION TO company;
GRANT CREATE TABLE TO company;
GRANT CREATE VIEW TO company;
... 
```

完成后，您可以连接到（现有）数据库并在模式`COMPANY`中创建对象。`COMPANY`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-11T21:41:02.513

根据您的问题描述，我认为您要创建数据库模式，而不是数据库实例。在 Oracle 术语中，数据库实例是文件系统中的一组文件。它更像是 MySQL 中的数据文件。而 MySQL 中的数据库在某种程度上相当于 Oracle 的模式。

在 Oracle 中创建模式：[https ://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_6014.htm](https://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_6014.htm)

在 Oracle 中创建数据库实例（我个人更喜欢 CDBA）： [https ://docs.oracle.com/cd/E11882_01/server.112/e25494/create.htm#ADMIN11068](https://docs.oracle.com/cd/E11882_01/server.112/e25494/create.htm#ADMIN11068)

请注意，Oracle Express 版本不支持一次挂载多个数据库实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-03T16:18:08.037

实际上，上面贾斯汀的回答再正确不过了。SQL Server 和 MySQL 适用于小型数据库。Oracle是针对大型企业数据库的，因此它的结构有所不同。如果服务器足够健壮以处理负载，通常在服务器上拥有多个 Oracle 数据库。如果您收到上面发布的错误，那么您显然是在尝试创建一个新的 Oracle 数据库，如果您正在这样做，那么您可能已经了解了 Oracle 数据库的结构。可能的情况是您尝试使用 dbca 创建数据库，它最初失败，但已创建二进制文件。然后您调整了初始参数并重新尝试使用 dbca 创建数据库。然而，该实用程序会看到您正在创建的数据库的二进制文件和文件夹结构，因此它认为该数据库已经存在但未安装。应首先删除数据库并删除二进制文件和文件夹以及对初始尝试的任何其他清理，然后再试一次。

# php - jquery 库不能完全工作

> ID：11854407
> 
> 赞同：0
> 
> 时间：2012-08-07T21:28:02.497
> 
> 标签：php, javascript, jquery, html

我的网站上有一个画廊（在我的电脑上，而不是在服务器上），但我遇到了问题。这是它的脚本（它是通过 php 从服务器加载的）：

```
$(document).ready(function() {
    $('.gallery').hide();
    $('.gallery:first').fadeIn();
    var galleryItems=$('.gallery').length;
    var index=0;
    setInterval(function() 
    {
        index++ ;
        var id="gallery-"+(index);
        $('.gallery').hide();
        if (index==galleryItems)
        {
            index=0;
        }
        $('#gallery-'+index).fadeIn(1000);
    },7000);
}); 
```

画廊工作，但一段时间后，我没有在画廊看它停止正常工作。

这是它应该看起来的样子：

[图片1](http://ufu.co.il/viewer.php?file=311wvzb26dvi9tfrvoui.bmp)

这是它的实际外观：

[图 2](http://ufu.co.il/viewer.php?file=kky6caraiacl1bjaiwzi.bmp)

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:47:56.617

我相信当`index==galleryItems`您淡入第 0 项而不是最后一项时。然后，当画廊继续时，它会淡入下一个项目，导致翻倍。

```
$(document).ready(function() {
    $('.gallery').hide();
    $('.gallery:first').fadeIn();
    var galleryItems=$('.gallery').length;
    var index=0;
    setInterval(function() 
    {
        index++ ;
        //var id="gallery-"+(index); this is unused so it should be removed.
        $('.gallery').hide();
        $('#gallery-'+index).fadeIn(1000); // MOVED TO BEFORE INDEX RESET
        if (index==galleryItems)
        {
            index=0;
        }

    },7000);
}); 
```

# ehcache - EhCache：使用注解的多个对象上的@CacheEvict

> ID：11854408
> 
> 赞同：1
> 
> 时间：2012-08-07T21:28:06.633
> 
> 标签：ehcache, spring-3, spring-el

我了解使用 EhCache 实现在 CacheManager 中构建的 Spring（3.1），根据这篇文章，在代理模式（默认）下存在某些限制：

[Spring 3.1 @Cacheable - 方法仍然执行](https://stackoverflow.com/questions/10343885/spring-3-1-cacheable-method-still-executed/10347208#10347208)

考虑我的场景：

```
@CacheEvict(value = "tacos", key = "#tacoId", beforeInvocation = true)
removeTaco(String tacoId) {
    // Code to remove taco
}

removeTacos(Set<String> tacoIds) {
    for (String tacoId : tacoIds) {
        removeTaco(tacoId); 
    }
} 
```

在此存储库方法中，由于上述限制，调用 removeTacos(tacoIds) 实际上不会从缓存中逐出任何内容。我的解决方法是，在上面的服务层上，如果我想删除多个 taco，我将遍历每个 taco Id 并将其传递给 removeTaco()，并且从不使用 removeTacos()

但是，我想知道是否有另一种方法可以做到这一点。

1) 是否有一个 SpEL 表达式可以传递给密钥，告诉 EhCache 使 Set 中的每个 id 都过期？

```
e.g.  @CacheEvict(value = "tacos", key = "#ids.?[*]") // I know this isn't valid, just can't find the expression. 
```

或者有没有办法让 removeTacos() 调用 removeTaco 并实际使缓存对象过期？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-11T13:34:54.307

@Caching 注解可用于组合多个相同类型的注解，例如 @CacheEvict 或 @CachePut，这是 Spring 文档中的示例

```
@Caching(evict = { @CacheEvict("primary"), @CacheEvict(value="secondary", key="#p0") })
public Book importBooks(String deposit, Date date) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-28T03:10:56.290

你可以做两件事之一

```
@CacheEvict(value = "tacos", allEntries = true)
removeTacos(Set<String> tacoIds) 
```

如果炸玉米饼的阅读量比删除量多得多，那还不错

或者

```
removeTacos(Set<String> tacoIds) {
    for (String tacoId : tacoIds) {
        getTacoService().removeTaco(tacoId); 
    }
} 
```

通过调用服务（代理），您可以调用缓存逐出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T06:07:44.513

AFAIK @CacheEvict 仅支持删除单个条目（按键）或给定缓存中的所有条目，无法一次删除多个条目。如果您想从缓存中放置、更新或删除多个对象（使用注释）并且您可以切换到 memcached，请查看我的项目[Simple Spring Memcached (SSM)](http://code.google.com/p/simple-spring-memcached/)。

自调用不通过代理，因此解决方案之一是切换到代理以外的其他模式。花药解决方案（我不推荐它）可能会保留对服务中的服务的引用（作为自动装配字段）并使用它来调用 removeTaco。

几个月前，我在我的一个项目中遇到了类似的问题。它没有使用 Spring Cache，但 SSM 也需要代理。为了让它工作，我将缓存（注释）从服务移动到 DAO（存储库）层。它解决了自我调用的问题。

# r - 在 r 中应用一个函数

> ID：11854422
> 
> 赞同：1
> 
> 时间：2012-08-07T21:28:46.390
> 
> 标签：r, loops, dataframe, apply

我必须通过采样过程生成数据并应用一个函数。

```
 p = 10; f = 8
   set.seed (123)
    pars <- data.frame (id = 1:p, 
     value = sample (c("AA", "AB", "AB", "BB"),p, replace = TRUE))
    pars
     id value
1   1    AB
2   2    BB
3   3    AB
4   4    BB
5   5    BB
6   6    AA
7   7    AB
8   8    BB
9   9    AB
10 10    AB

fdat <- data.frame (t(combn(pars$id,2)))
set.seed (1234)
sdf <- fdat[sample(1:nrow(fdat), f),]
names (sdf) <- c("P1", "P2")
sdf
   P1 P2
6   1  7
28  4  8
27  4  7
43  8  9
36  6  7
26  4  6
1   1  2
9   1 10 
```

要应用的每个组合的值都在表 pars 中。例如，对于第一个 P1 和 P2 组合 1 = "AB"，7 = "AB"。其次，4 =“BB”，8 =“BB”。

现在我想将以下函数应用于 sdf（考虑 pars 表中的值）。P2.v 是 P1 的值，P2.v 是 P2 的值。

```
genofun <- function (P1.v, P2.v, n) {
if (P1.v == "AA" & P2.v == "BB" ) {
    CLD <- rep ("AB", n)
    } 
if (P1.v == "BB" & P2.v == "AA" ) {
    CLD <- rep ("AB", n)
    }
if (P1.v == "AA" & P2.v == "AB") {
   CLD <- sample (c("AA", "AB"), n, replace = TRUE)
   }
 if (P1.v == "AB" & P2.v == "AA") {
   CLD <- sample (c("AA", "AB"), n, replace = TRUE)
   }
if (P1.v == "BB" & P2.v == "AB") {
   CLD <- sample (c("BB", "AB"), n, replace = TRUE)
   }
if ( P1.v == "AB" & P2.v == "BB") {
   CLD <- sample (c("BB", "AB"), n, replace = TRUE)
   }   
if (P1.v == "BB" & P2.v == "BB") {
   CLD <- rep("BB", n, replace = TRUE)
   }
if (P1.v == "AA" & P2.v == "AA") {
   CLD <- rep("AA", n)
   }
if (P1.v == "AB" & P2.v == "AB") {
   CLD <- sample(c("AA", "AB","AB", "BB"), n, replace = TRUE)
   }
 out <- c(P1.v, P2.v, CLD)
return (out)
}
n = 5
genofun (P1, P2, n) 
```

因此预期的输出将是：

```
 P1 P2  P1.v  P2.v  CLD1  CLD2   CLD3   CLD4  CLD5 <- (essentially number columns = n)
6   1  7
28  4  8
27  4  7
43  8  9
36  6  7
26  4  6
1   1  2
9   1 10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T22:03:59.690

目前，定义中似乎存在错误，`genofun`但一旦修复，以下应该可以工作：

```
P1v<-as.character(pars$value[sdf$P1])
P2v<-as.character(pars$value[sdf$P2])
dum<-cbind(sdf,t(mapply(genofun,P1.v=P1v,P2.v=P2v,n=5)))
names(dum)<-c('P1','P2','P1.v','P2.v','CLD1','CLD2','CLD3','CLD4','CLD5')
 > dum
   P1 P2 P1.v P2.v CLD1 CLD2 CLD3 CLD4 CLD5
6   1  7   AB   AB   AA   AB   AB   AB   AA
28  4  8   BB   BB   BB   BB   BB   BB   BB
27  4  7   BB   AB   AB   BB   AB   BB   AB
43  8  9   BB   AB   AB   BB   BB   BB   AB
36  6  7   AA   AB   AB   AA   AA   AB   AA
26  4  6   BB   AA   AB   AB   AB   AB   AB
1   1  2   AB   BB   AB   AB   AB   AB   AB
9   1 10   AB   AB   AB   BB   AA   AB   AB
> 
```

# scala - 过滤映射无值

> ID：11854433
> 
> 赞同：35
> 
> 时间：2012-08-07T21:30:10.327
> 
> 标签：scala, functional-programming, hashmap, filtering

我已经搜索了一下，但还没有找到一个很好的答案，关于如何过滤掉映射中值为 None 的任何条目。假设我有一张这样的地图：

```
val map = Map[String, Option[Int]]("one" -> Some(1), 
                                   "two" -> Some(2), 
                                   "three" -> None) 
```

我想最终返回一张只有`("one", Some(1))`and`("two", Some(2))`对的地图。我知道当你有一个列表时，这是通过 flatten 完成的，但我不确定如何在不将其拆分为键和值，然后尝试重新加入它们的情况下在地图上实现效果。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-08-07T23:01:34.527

如果您要过滤掉`None`值，您不妨同时提取这些`Some`值以得到`Map[String,Int]`：

```
scala> map.collect { case (key, Some(value)) => (key, value) }
res0: scala.collection.immutable.Map[String,Int] = Map(one -> 1, two -> 2) 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-08-07T21:34:55.070

就像 scala.collection 命名空间中的每个集合类型一样，a定义`Map`了方法并具有方法，即for和for 。您可以通过组合这两个来过滤掉这些值：`filter``Option``isDefined``true``Some``false``None``None`

```
scala> map.filter(_._2.isDefined)
res4: scala.collection.immutable.Map[String,Option[Int]] = Map(one -> Some(1), two -> Some(2)) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-19T20:05:56.833

还 `map.filterKeys( map(_) != None)`

或者

`for( (k,v) <- map if( v!= None)) yield (k,v)`

这种方法提供了地图上不存在的通用 filterValues 方法。
我想念这样的方法，因为没有一个选择是完美的。

[稍后更新] 这是一个更好的版本，它不会对每个条目进行查找，并且仍然可以合理清晰地阅读。

`map.filter( {case (x,y)=> y!=None})`

# jquery - jQuery：如何分层通知 div 浮动而不是在 div 内插入？

> ID：11854436
> 
> 赞同：1
> 
> 时间：2012-08-07T21:30:26.037
> 
> 标签：jquery

这是我的`ajax`电话

```
// send the data to the server using .ajax() or .post()
        $.ajax({
            type: 'POST',
            url: 'addVideo',
            data: {
                video_title: title,
                playlist_name: playlist,
                url: id
                // csrfmiddlewaretoken: '{{ csrf_token }}',
            },
            success: function(response, textStatus, jqXHR){
                 bootstrap_alert.success('video saved successfully');
            },

            // callback handler that will be called on error
            error: function(jqXHR, textStatus, errorThrown){
                bootstrap_alert.error('There were some errors while saving the video. Please try in a while');
            },
        }); 
```

和`notification`功能

```
// setting up alerts on action
bootstrap_alert = function() {}
bootstrap_alert.success = function(message) {
  $('#feature').prepend('<div id="alert" class="alert alert-success"><!--a class="close" data-dismiss="alert">×</a--><span>'+message+'</span></div>');
  $('#alert').fadeOut(3000);
}
bootstrap_alert.error = function(message) {
  $('#feature').prepend('<div id="alert" class="alert alert-error"><!--a class="close" data-dismiss="alert">×</a--><span>'+message+'</span></div>');
  $('#alert').fadeOut(3000);
} 
```

*   当我`ajax`调用返回时，我看到一个 div 持续了 3 秒，然后它就消失了，**但是**我的页面很快向上移动，我**想让**这个过渡平滑

*   是否可以将通知 div 放在`feature`3 秒后消失的 div 之上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T21:44:35.907

您可以使用滑动效果使它变得更好。您可以插入内容，向下滑动，等待 3 秒，然后向上滑动。

```
var x =$("<div class='alert'>Alert</div>");
$("#c1").prepend(x);
x.slideDown(250).delay(3000).slideUp(250);​ 
```

小提琴示例：http: [//jsfiddle.net/johnkoer/gxbTJ/15/](http://jsfiddle.net/johnkoer/gxbTJ/15/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T22:03:05.337

你可以把它叠在上面。使用 CSS 属性[z-index](http://www.w3.org/wiki/CSS/Properties/z-index)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T22:03:49.180

您将无法使用 fadeOut() 来实现您所描述的效果，但您需要编写自定义[animate()](http://api.jquery.com/animate/)。fadeOut() 只会做fadeOut，然后你会看到浏览器试图填充空白空间。如果你想要两者，你需要编写一个淡入淡出和幻灯片的动画。或者，您可以只使用带有[slideToggle()](http://api.jquery.com/slideToggle/)或[slideUp()](http://api.jquery.com/slideUp/)和[slideDown()的幻灯片](http://api.jquery.com/slideDown/)

要覆盖您的 div，请使用一些 CSS，例如：

```
#overlay {
z-indez:6000;
position:fixed; 
width: 100%;
height: 100%;   
top:0; 
left:0; 
} 
```

# c++ - 更快的位读取？

> ID：11854438
> 
> 赞同：5
> 
> 时间：2012-08-07T21:30:51.067
> 
> 标签：c++, 64-bit, bit-manipulation

在我的应用程序中，20% 的 CPU 时间用于`skip`通过我的位阅读器读取位 ()。有谁知道如何使以下代码更快？在任何给定时间，我不需要超过 20 个有效位（这就是为什么我在某些情况下可以使用`fast_skip`）。

位以大端顺序读取，这就是需要字节交换的原因。

```
class bit_reader
{   
    std::uint32_t* m_data;
    std::size_t    m_pos;
    std::uint64_t  m_block;

public:
    bit_reader(void* data)
        : m_data(reinterpret_cast<std::uint32_t*>(data))
        , m_pos(0)
        , m_block(_byteswap_uint64(*reinterpret_cast<std::uint64_t*>(data)))
    {
    }

    std::uint64_t value(std::size_t n_bits = 64)
    {               
        assert(m_pos + n_bits < 64);

        return (m_block << m_pos) >> (64 - n_bits);
    }

    void skip(std::size_t n_bits) // 20% cpu time
    {
        assert(m_pos + n_bits < 42);

        m_pos  += n_bits;

        if(m_pos > 31)
        {
            m_block = _byteswap_uint64(reinterpret_cast<std::uint64_t*>(++m_data)[0]);
            m_pos  -= 32;
        }
    }   

    void fast_skip(std::size_t n_bits)
    {
        assert(m_pos + n_bits < 42);
        m_pos  += n_bits;
    }   
}; 
```

目标硬件是 x64。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T22:18:24.867

我从之前的评论中看到您正在解压缩 JPEG 中的霍夫曼/算术编码流。

*   `skip()`并且`value()`非常简单，可以内联。编译器有可能将移位寄存器和缓冲区指针一直保留在寄存器中。在此处和在调用者中使用`restrict`修饰符创建所有指针可能有助于告诉编译器您不会将霍夫曼解码的结果写入位缓冲区，从而允许进一步优化。
*   每个 Huffman/artimetic 符号的平均长度都很短 - 因此，在 8 次中有约 7 次，您不需要填充 64 位移位寄存器。调查给编译器一个分支预测提示。
*   JPEG 比特流中的任何符号都长于 32 位是不寻常的。这是否允许进一步优化？
*   *一条繁重的道路的一个非常*合乎逻辑的原因`skip()`是您经常调用它。您一次消耗整个符号，而不是这里的每一位，不是吗？您可以通过计算符号和表格查找中的前导 0 或 1 来实现一些巧妙的技巧。
**   您可能会考虑安排您的移位寄存器，以便流中的下一位是 LSB。这将避免在`value()`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T21:38:12.630

移位 64 位绝对不是一个好主意。在许多 CPU 中，移位是一种缓慢的操作。我建议您将代码更改为字节寻址。这将限制最多 8 位的移位。

在许多情况下，您实际上并不需要它本身，而是检查它是否存在。这可以通过如下代码来完成：

```
 if (data[bit_inx/64] & mask[bit_inx % 64])
    {
        ....
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T21:42:20.043

尝试将此行替换为`skip`：

```
m_block  = (m_block << 32) | _byteswap_uint32(*++m_data); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T13:41:16.397

这是我尝试过的另一个版本，它没有提供任何性能改进。

```
class bit_reader
{   
public:     
    const std::uint64_t* m_data64;
    std::size_t          m_pos64;
    std::uint64_t        m_block0;
    std::uint64_t        m_block1;

    bit_reader(const void* data)
        : m_pos64(0)
        , m_data64(reinterpret_cast<const std::uint64_t*>(data))
        , m_block0(byte_swap(*m_data64++))
        , m_block1(byte_swap(*m_data64++))
    {
    }

    std::uint64_t value(std::size_t n_bits = 64)
    {               
        return __shiftleft128(m_block1, m_block0, m_pos64)  >> (64 - n_bits);
    }

    void skip(std::size_t n_bits)
    {
        m_pos64 += n_bits;

        if(m_pos64 > 63)
        {
            m_block0 = m_block1;
            m_block1 = byte_swap(*m_data64++);
            m_pos64  -= 64;
        }
    }   

    void fast_skip(std::size_t n_bits)
    {
        skip(n_bits);
    }   
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T21:40:31.947

我不知道这是否是原因以及 _byteswap_uint64 的底层实现是什么样的，但您应该阅读[Rob Pike 关于 byteorder 的文章](http://commandcenter.blogspot.de/2012/04/byte-order-fallacy.html)。也许这就是你的答案。

摘要：字节序比它通常被弥补的问题要少。字节顺序交换的实现经常会出现问题。但是有一个简单的选择。

**[编辑]**我有一个更好的理论。从我下面的评论中粘贴：也许是混叠。64 位架构喜欢将数据按 64 位对齐，当您跨对齐边界读取时，它会变得非常慢。所以它可能是`(++m_data)[0]`一部分，因为 x64 是 64 位对齐的，当你`reinterpret_cast`a `uint32_t*`to时`uint64_t*`，你大约有一半的时间跨越对齐边界。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-07T22:04:03.267

`bit_reader`如果您的源缓冲区不是很大，那么您应该对它们进行预处理，在使用!访问它们之前对缓冲区进行字节交换。

从你那里阅读`bit_reader`会快得多，因为：

1.  你会保存一些有条件的指令
2.  CPU 缓存可以更有效地使用：它可以直接从内存中读取，这很可能已经加载到 cpu 缓存中，而不是从读取每个 64 位块后将被修改的内存中读取，因此破坏了拥有的好处它在缓存中

**编辑**

哦等等，你不要修改源缓冲区。但是，将字节交换放入预处理阶段至少应该值得一试。

另一点：确保这些`assert()`调用仅在调试版本中。

**编辑 2**

（已删除）

**编辑 3**

您的代码肯定有缺陷，请检查以下使用场景：

```
uint32_t source[] = { 0x00112233, 0x44556677, 0x8899AABB, 0xCCDDEEFF };
bit_reader br(source); // -> m_block = 0x7766554433221100
// reading...
br.value(16); // -> 0x77665544
br.skip(16);
br.value(16); // -> 0x33221100
br.skip(16);  // -> triggers reading more bits
              // -> m_block = 0xBBAA998877665544, m_pos = 0
br.value(16); // -> 0xBBAA9988
br.skip(16);
br.value(16); // -> 0x77665544
// that's not what you expect, right ??? 
```

**编辑 4**

好吧，不，EDIT 3 错了，但我忍不住，代码有缺陷。不是吗？

```
uint32_t source[] = { 0x00112233, 0x44556677, 0x8899AABB, 0xCCDDEEFF };
bit_reader br(source); // -> m_block = 0x7766554433221100
// reading...
br.value(16); // -> 0x7766
br.skip(16);
br.value(16); // -> 0x5544
br.skip(16);  // -> triggers reading more bits (because m_pos=32, which is: m_pos>31)
              // -> m_block = 0xBBAA998877665544, m_pos = 0
br.value(16); // -> 0xBBAA --> not what you expect, right? 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-08-07T22:21:08.520

如果可能的话，最好分多次执行此操作。可以优化多次运行并减少违规。

一般来说，最好这样做

```
const uint64_t * arr = data;

for(uint64_t * i = arr; i != &arr[len/sizeof(uint64_t)] ;i++)
{
     *i = _byteswap_uint64(*i); 
     //no more operations here
}
// another similar for loop 
```

这样的代码可以大大减少运行时间

在最坏的情况下，您可以像运行 100k 块一样执行此操作，以将缓存未命中率保持在最低限度并从 RAM 中单次加载数据。

在您的情况下，您以流式传输方式执行此操作仅适用于保持低内存和来自慢速数据源的更快响应，但不适用于速度。*

# javascript - 面积图条件填写d3.js

> ID：11854445
> 
> 赞同：11
> 
> 时间：2012-08-07T21:31:58.937
> 
> 标签：javascript, d3.js

我有一个面积图（应该代表一个时间序列）。我想根据 y 值对图形进行着色，这样对于 y > c 的区域，它是一种颜色，而对于 y<=c 的区域，它是另一种颜色。这在D3中可能吗？

这是我拥有的生成单色图的代码：

```
var width = 700,
    height = 400;

var vis = d3.select("#chart")
    .append("svg")
    .attr("width",width)
    .attr("height",height); 

var mpts = [{"x":0,"val":15}];
var n = 200;
for(var i=0;i<n;i++)
{
    if(Math.random()>.5)
    {
        mpts = mpts.concat({"x":i+1,"val":mpts[i].val*(1.01)});
    }
    else
    {
        mpts = mpts.concat({"x":i+1,"val":mpts[i].val*(.99)});
    }
}

var x = d3.scale.linear().domain([0,n]).range([10,10+width]);
var y = d3.scale.linear().domain([10,20]).range([height-10,0]);

var area = d3.svg.area()
        .interpolate("linear")
        .x(function(d) { return x(d.x); })
        .y1(function(d) { return y(d.val); })
        .y0(function(d) { return y(0); });

vis.append("svg:path")
            .attr("class", "area")
            .attr("d",area(mpts))
        .attr("fill","orange");

</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T21:36:55.407

更改添加区域的方式，例如

```
 vis.selectAll("path").data(mpts).enter().append("svg:path")
        .attr("class", "area")
        .attr("d", area)
        .attr("fill", function(d) { return (d.val > c ? "orange" : "yellow"); }); 
```

# c# - 如何使用 HTMLAgility 包在另一个网页上发布数据？

> ID：11854446
> 
> 赞同：2
> 
> 时间：2012-08-07T21:32:03.437
> 
> 标签：c#, asp.net, post, html-agility-pack, dopostback

我需要使用 HTMLAgility 包在另一个网页上发布数据。

例如， 这个网站上的[http://www.riversoft.mk/Products.aspx](http://www.riversoft.mk/Products.aspx) 我需要使用 HTMLAgility 包遍历列表视图的页面。但是当我单击某个页码时，*就会调用 _ dopostback 方法。出于这个原因，我需要找到一种方法来模拟将调用此方法的客户端单击（* _dopostback(....)）。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T05:33:06.020

因此，__doPostBack 所做的只是设置几个隐藏的表单字段并提交。您可以通过检查源来验证这一点：

```
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
} 
```

因此，基本上，您*需要*做的就是设置这两个表单字段，然后发布生成的正文。

# c++ - 需要滑动条数学帮助 看里面

> ID：11854448
> 
> 赞同：-1
> 
> 时间：2012-08-07T21:32:34.203
> 
> 标签：c++, math, qml

嘿，我对数学很讨厌，这就是我想在 QML 中做的事情：

我有一个滑块，我希望最小左边缘为 30，最大右边缘为 100

什么数学将 30 放在左端，但给出 30-100 之间的所有百分比以反映屏幕上的 0-100%？

谢谢，克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:35:29.957

给定一个介于`30`和之间的值`100`：

```
percent = 100 * (value - 30) / 70 
```

或更一般地说：

```
percent = 100 * (value - min) / (max - min) 
```

# html - 禁用 Chrome 的 HTML5 日历控件

> ID：11854449
> 
> 赞同：0
> 
> 时间：2012-08-07T21:32:45.017
> 
> 标签：html, google-chrome

Chrome 会自动为任何字段添加日历小部件，`<input type="date">`并且还会向该字段添加一些临时日期格式。由于原始 html 规范要求任何不是复选框、收音机、文本、密码、文件等的输入类型被呈现为普通文本字段，这就是我们触发日历小部件的方式。我们可以设置元标记或其他选项来防止 chrome 这样做吗？

截图（请注意这不是我们的代码，chrome会自动添加这个）： ![在此处输入图像描述](../Images/446bd31ed770b29d82068ba7739a58eb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:49:00.953

*防止*原生日期选择器的唯一方法是不给输入一个`type="date"`属性；只需使用直接`type="text"`输入。`type="date"`为移动设备使用最显着优化的输入功能有一些主要优势。但是为了避免选择器显示你必须放弃这些。

`<input type="date">`我在我的博客上讨论了使用的优缺点- [http://tjvantoll.com/2012/06/30/creating-a-native-html5-datepicker-with-a-fallback-to-jquery-ui/](http://tjvantoll.com/2012/06/30/creating-a-native-html5-datepicker-with-a-fallback-to-jquery-ui/)。

# php - Wamp服务器不显示css

> ID：11854451
> 
> 赞同：0
> 
> 时间：2012-08-07T21:32:50.933
> 
> 标签：php, html, css, codeigniter

我在 .css 文件中创建了两个 div，然后将 .css 文件链接到这样的 php 头文件中

```
<!DOCTYPE html>

<html>
<head>

<link rel="stylesheet" href="css/headercss.css" type="text/css" media="screen" title="default">

</head>

<body bgcolor="#F0F0F0">

<div class="div_menu">
<h1> asdasd </h1>
</div>

<div class="div_main"> 
```

这是css文件

```
@charset "utf-8";
/* CSS Document */

.div_menu{
background-image:url('table_header_options.jpg');
width:70%;
margin:auto;
height:50px;
}

.div_main{
background-color:#FFF;
margin:auto;
width:69.75%;
height:800px;
margin-top:15px;

border-width:1px;
border-style:solid;
border-bottom-color:#ddd;
border-right-color:#ddd;
border-top-color:#aaa;
border-left-color:#aaa;
border-radius:10px;
-moz-border-radius:10px;
-webkit-border-radius:10px;
-moz-box-shadow: 10px 10px 5px #888;
-webkit-box-shadow: 10px 10px 5px #888;
box-shadow: 10px 10px 5px #888;
} 
```

我确信目录没有任何问题，因为当我仅使用 google chrome 运行 php 文件时一切正常，但是当我尝试通过 wamp 服务器从 localhost 打开它时，除了 h1 标记之外，所有内容都消失了。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:39:11.947

您需要确保从正确的相对位置调用 css。

由于这是一个 PHP 头文件，我假设您是从不同的地方（如`/`、`/about`、`/otherfolder`等）调用它。

问题是您当前的代码将在*当前*文件夹中查找 css 文件夹，而不是它实际所在的顶级文件夹。

因此：

`<link rel="stylesheet" href="/css/headercss.css" type="text/css" media="screen" title="default">`

注意绝对定位`/css/headercss.css`-`/`在前面的意思是“从顶部”。

编辑：原来 OP 正在使用 CodeIgniter 并且应该重新提交这样标记的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-29T02:30:06.127

实际上，在您将所有内容传输到您的 wampserver 之后，您的图像会更改它的位置，因此您需要更改您设计的所有 div 的背景图像：url（''）。然后VIOLA会出现

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-21T17:41:22.307

在 wamp 中为 apache 服务器使用端口 80

# macos - 我可以以编程方式将 Mac 从睡眠中唤醒吗？

> ID：11854452
> 
> 赞同：0
> 
> 时间：2012-08-07T21:33:00.833
> 
> 标签：macos

> **可能重复：**
> [如何以编程方式从睡眠中唤醒？](https://stackoverflow.com/questions/3315685/how-to-wake-from-sleep-programmatically)

我正在尝试查看 OS X 是否支持在预定时间将 Mac 从睡眠中唤醒的功能？

PS。我显然是从开发人员的角度要求提供 API。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-07T21:48:14.833

看到这个问题：[如何以编程方式从睡眠中唤醒？](https://stackoverflow.com/questions/3315685/how-to-wake-from-sleep-programmatically)

另请参阅 OS X 的“按需唤醒”功能。它适用于机场或 Time Capsule 上的 Bonjour Sleep Proxy：http: [//support.apple.com/kb/HT3774](http://support.apple.com/kb/HT3774)

# php - 从表格中的文档内容中获取摘要

> ID：11854466
> 
> 赞同：2
> 
> 时间：2012-08-07T21:34:33.543
> 
> 标签：php

我的表格由一些列组成，其中之一是`document_content`文本类型的列（期刊内容）。我想解析内容以获取摘要。我假设 abstract 是单词`abstract`本身和`introduction`.

这是我的代码：

```
$id = array('1','2','3','4','5','6','7','8','9');
$sql = mysql_query('SELECT document_id, document_content FROM tbdocument WHERE document_id IN (' . implode(",", $id) . ')') or die(mysql_error());
while ($row = mysql_fetch_array($sql)) {
    $files[$row['document_id']] = $row['document_content'];
}
foreach ($files as $doc_id => $file){
   if (strpos($file, 'ABSTRACT')){
        if (strpos ($file, 'INTRODUCTION')){
            $between  = substr($file, (strpos($file, 'ABSTRACT')+8), (strpos($file, 'INTRODUCTION')-13) - strpos($file, 'ABSTRACT'));
   if (strpos($file, 'Introduction')){
            $between  = substr($file, (strpos($file, 'ABSTRACT')+8), (strpos($file, 'Introduction')-13) - strpos($file, 'ABSTRACT'));
   }
   }
   else {
        if (strpos($file, 'Abstract')){
            if (strpos ($file, 'Introduction')){
                $between  = substr($file, (strpos($file, 'Abstract')+8), (strpos($file, 'Introduction')-13) - strpos($file, 'Abstract'));
            }
            if (strpos($file, 'INTRODUCTION')){
                $between  = substr($file, (strpos($file, 'Abstract')+8), (strpos($file, 'INTRODUCTION')-13) - strpos($file, 'Abstract'));
            }
        }
    }   
    $q = mysql_query("INSERT INTO tb_metadata SET document_id = {$doc_id}, metadata_abstract = '{$between}'") or die(mysql_error());

} 
```

但它给了我空白的结果。我的代码有什么问题？非常感谢您 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T21:44:45.920

除了对逻辑进行一些简化之外，您的`foreach`循环中还缺少一个括号（它应该看起来像这样）：

```
foreach ($files as $doc_id => $file){
   if (strpos($file, 'ABSTRACT')){
        if (strpos ($file, 'INTRODUCTION')){
            $between  = substr($file, (strpos($file, 'ABSTRACT')+8), (strpos($file, 'INTRODUCTION')-13) - strpos($file, 'ABSTRACT'));
        }
        if (strpos($file, 'Introduction')){
            $between  = substr($file, (strpos($file, 'ABSTRACT')+8), (strpos($file, 'Introduction')-13) - strpos($file, 'ABSTRACT'));
        }
   }
   else {
        if (strpos($file, 'Abstract')){
            if (strpos ($file, 'Introduction')){
                $between  = substr($file, (strpos($file, 'Abstract')+8), (strpos($file, 'Introduction')-13) - strpos($file, 'Abstract'));
            }
            if (strpos($file, 'INTRODUCTION')){
                $between  = substr($file, (strpos($file, 'Abstract')+8), (strpos($file, 'INTRODUCTION')-13) - strpos($file, 'Abstract'));
            }
        }
    }   
    $q = mysql_query("INSERT INTO tb_metadata SET document_id = {$doc_id}, metadata_abstract = '{$between}'") or die(mysql_error());

} 
```

编辑：另一个问题可能是在某些情况下 $between 从未定义？如果`(strpos($file, 'Introduction')-13) - strpos($file, 'Abstract')`返回非正值怎么办？然后文本将被截断或根本不返回。

# html - 带有 background-img 的 css 不会加载到 div 中

> ID：11854467
> 
> 赞同：0
> 
> 时间：2012-08-07T21:34:35.043
> 
> 标签：html, css, stylesheet

我有带有图像的 CSS

```
.backgroundImg {
    background: url('./path/file.gif');
    background-repeat: no repeat;
    width: 24px;
    height: 24px;
}

.ui-highlight {
    border: 2px solid green;
    color: #363636;
    padding: 0.7em;
} 
```

我有导入此类的 div 标签

```
<div class="ui-highlight ui-corner-all">
    <div class="backgroundImg" style="float:left;">
        some text.........
    </div>
</div> 
```

**编辑**

我正在尝试实现一个边框框，左侧是图像，右侧是文本。我检查了元素，当我将鼠标悬停在我知道 css 的 ui-highlight 类上时，图像就会显示出来，老实说，我不是这方面的专家。谁能帮我为什么图片不显示

**更新**

向 backgroundImg 类添加宽度和高度后，图像可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:42:38.217

我要做的第一件事是使用**Firebug** for Firefox 或 Webkit 浏览器中的**开发人员工具**来检查您的情况。

1.  右键单击“some text....”并选择**Inspect Element**。
2.  在 HTML 检查器中，单击“backgroundImg”类的 div
3.  在右侧，您应该会看到该元素的 CSS 检查器。将鼠标悬停在上方`('./path/file.gif')`，查看图像缩略图是否加载。如果不是，则您的路径设置可能不正确。
4.  将鼠标悬停在 HTML 检查器中的 div 上，看看它是如何在页面上突出显示的。可能是您的 div 没有占用足够的空间来显示图像。如果是这种情况，您需要设置**宽度/高度**或在 div 中放置更多内容以填充它。
5.  父 div ( ) 上的 jQuery UI 类`ui-highlight ui-corner-all`可能会设置一些样式，这些样式会遮挡子 div 中的图像。确保也使用 HTML/CSS 检查器进行检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T22:03:06.810

您尝试从代码中执行的操作是为文本提供图像背景。它有效，但不是您想要的方式。将 backgroundImg div 替换为 HTML 中的标记，并带有“align='top'”元素。我得到的代码是：

```
<html>
<head>
<style type="text/css">

.ui-highlight {
    border: 2px solid green;
    color: #363636;
    padding: 0.7em;
}
</style>
</head>
<body>
<div class="ui-highlight">
    <img src="path/img.gif" style="padding:0px;" align="top">
       some text.........
    </br>
</div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T21:40:32.477

尝试使用绝对路径：

```
background: url('/path/from/root/file.gif') 
```

或者：

```
background: url('http://example.com/path/from/root/file.gif') 
```

这确保了图像的来源没有歧义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T21:40:48.853

首先，我建议您应用某种 clearfix。简单的方法是添加`overflow:hidden;`到您的`.ui-highlight`. 这是给包装器一些高度所必需的。DDo 搜索 clearfix 的方式和原因。

第二个 a 会检查图像是否真的被加载了，你的路径可能是错误的。在 Chrome 的代码检查器中检查它对我来说是一种方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T21:46:29.493

您的 CSS 在语法上没有任何内容，这让我相信图像不在您在 CSS 中指定的位置。尝试使用绝对 URL 或相对于 CSS 文件本身的路径。

**但是：不过**，我不确定您是否会使用此 CSS 获得所需的结果。如果你尝试改变

```
background: url('./path/file.gif'); 
```

到

```
background: #f00; 
```

当你得到图像 url 时，你可以预览你会得到什么。

既然您说您正在尝试获取“左侧图像和图像右侧文本的边框框”，您可能会尝试这样的事情：

CSS：

```
.ui-highlight {
    background: url('http://www.site.com/file.gif') top left no-repeat;
    border: 2px solid green;
    color: #363636;
    padding: 0.7em;
    padding-left: 90px; /* This should be the width of the background image */
} 
```

HTML：

```
<div class="ui-highlight">
    some text.........
</div> 
```

这将在 周围画一个边框`div`，在 div 的左上角添加一个背景图像，然后在该图像的右侧写入文本。

# c++ - “意外的预编译头错误”是什么意思？

> ID：11854470
> 
> 赞同：37
> 
> 时间：2012-08-07T21:34:43.440
> 
> 标签：c++, visual-studio-2008, compiler-errors

我试图构建一个涉及 Windows 和控制台应用程序的简单解决方案。使用向导为项目生成代码骨架后，我没有添加任何代码，只是构建了生成的代码。在这两种情况下，我都遇到了同样的错误：

`1>c:\c\winpr\winpr\winpr.cpp(4) : fatal error C1859: 'Debug\winpr.pch' unexpected precompiled header error, simply rerunning the compiler might fix this problem`

怎么了，有什么想法吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-08-07T21:45:32.193

修复了 Visual C++ 2008 SP1 编译器错误 C1859。你可以[在这里](http://connect.microsoft.com/VisualStudio/Downloads/DownloadDetails.aspx?DownloadID=25785)下载。

有关详细信息，请参阅[此](http://blogs.msdn.com/b/vcblog/archive/2009/11/12/visual-c-precompiled-header-errors-on-windows-7.aspx)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-07T21:39:38.250

有一天，我们突然在工作中遇到了类似的事情。我们的问题归结[于此](http://blogs.msdn.com/b/vcblog/archive/2009/11/12/visual-c-precompiled-header-errors-on-windows-7.aspx)

无论如何，一个简单的PC重启为我完成了它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-29T20:46:38.953

[上面答案](https://stackoverflow.com/a/11854569/1998471)中提供的链接**不再可用**。

我遇到了同样的错误，在我的情况下，问题是由于需要重新启动的“ **Windows Update** ”（我**避免**了**重新启动**并一直遇到这个问题）。但是重新启动后，错误得到了修复。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-12T12:00:12.197

安装 Visual C++ 2008 SP1 解决了我的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-18T23:34:52.020

安装此补丁（KB976656 - 使用 Visual C++ 2008 编译器时出现错误消息：“致命错误 C1859”）以修复此问题：

[http://thehotfixshare.net/board/index.php?autocom=downloads&showfile=11640](http://thehotfixshare.net/board/index.php?autocom=downloads&showfile=11640)

* * *

## 回答 #6

> 赞同：-6
> 
> 时间：2012-08-07T21:45:27.327

如果您有`#include<stdfafx.h>`，请尝试将其注释掉，`//#include<stdfafx.h>`因为它可能是您错误的罪魁祸首。

# r - R data.table setkey与数字列

> ID：11854476
> 
> 赞同：1
> 
> 时间：2012-08-07T21:35:13.507
> 
> 标签：r, data.table

我在 R 中使用 data.table 包。尝试在数字列上使用 setkey 时，我收到以下错误消息：

```
setkey(candidate.SNPs.MAF, p)

Error in setkeyv(x, cols, verbose = verbose) :
Column 'p' cannot be coerced to integer without losing fractional data. 
```

我看到最近的[回答](https://stackoverflow.com/questions/11157172/subset-and-recombine-dataframes-using-data-table-package-or-other-solutions-r)表明我需要至少 v1.8.1 并确认使用最新版本 (1.8.2) 时会出现此问题

```
help(package="data.table")
               Information on package 'data.table'

Description:
Package:            data.table
Version:            1.8.2 
```

有什么建议么？我宁愿不必恢复到 data.frames。

我的数据结构如下所示：

```
str(can_SNPs_context)
Classes 'data.table' and 'data.frame':  1031 obs. of  23 variables:
$ Trait            : chr  "GH2_SLA" "GH2_SLA" "GH2_SLA" "GH2_SLA" ...
$ Locus            : chr  "1" "1" "1" "1" ...
$ Marker           : int  1825530 1844004 2251065 2444826 2832616 3557976 4299 650 4606939 4610965 6057450 ...
$ p                : num  8.68e-08 7.21e-08 1.11e-07 1.20e-08 8.17e-08 ... 
```

p 列是我试图设置为键的列 - 非常小的值会导致问题吗？

R 版本 2.15.1 Linux x86_64

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:53:36.627

作为 Andrie 和 mnel，我也无法复制。

要测试您的安装`data.table`类型：

```
test.data.table() 
```

在我的上网本上返回：

```
[.. snip ..]
All 717 tests in test.data.table() completed ok in 50.040sec 
```

如果它准确地返回**717**那么你很好。[NEWS](https://r-forge.r-project.org/scm/viewvc.php/pkg/NEWS?view=markup&root=datatable) for 1.8.2的 NOTES 部分是您发现 1.8.2 有 717 个测试的地方。

您是否有可能升级到 1.8.2 但没有重新加载软件包，或者当您升级一个但没有重新加载其他会话时运行了多个 R 会话？ `help`等`packageVersion`报告磁盘上包的版本，而不是加载到内存中的版本，afaik。它是 data.table 加载时的启动横幅，它告诉您正在运行的版本。

我不知道 R 是否存储加载到内存中的包的版本。如果没有，最好建议 r-devel，更改`packageVersion`并`hep(package=)`检查内存中的版本（如果已加载）与磁盘上的版本是否匹配。

# c++ - std::tr1::array 的大小是多少 >

> ID：11854477
> 
> 赞同：1
> 
> 时间：2012-08-07T21:35:17.490
> 
> 标签：c++, sizeof

我想知道如何获得大小`std::tr1::array<int, 16> >`？

只是`16*sizeof(int)`，16字节是怎么回事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T21:37:55.453

尝试`sizeof(std::tr1::array<int, 16> >)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T21:50:32.483

是的，`std::tr1::array`保证是包装底层原始数组的聚合类型，实际上您可以使用`data()`成员函数访问它。原始数组的大小是元素数量乘以一个元素的大小。

# android - 进度对话框不动

> ID：11854485
> 
> 赞同：0
> 
> 时间：2012-08-07T21:35:41.840
> 
> 标签：android

嗨，当 mymethod 使用下面的代码运行时，我尝试显示进度对话框。当线程启动进度对话框时，我会在线程中调用的方法结束时将其关闭。我该如何解决这个问题？

```
>mDialog = new ProgressDialog(DealActivity.this);

    mDialog.setMessage("Loading...");
        mDialog.setCancelable(false);
        mDialog.show();
        mDialog.setProgress(0);

        new Thread() {

            public void run() {
                mymethod();
            }

        }.start(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T21:47:49.773

使用`AsyncTask`而不是线程。显示您的`ProgressDialog`in`onPreExecute()`方法调用您的`mymethod()`in`doInBackGround()`并关闭您的 progressDialog in `onPostExecute()`。

遵循本教程以获得更好的解释。

[Android 线程、处理程序和 AsyncTask](http://www.vogella.com/articles/AndroidPerformance/article.html)

您还将找到与您的需求相关的本教程。

[管理 AsyncTask、进度对话框和屏幕方向](http://twigstechtips.blogspot.com/2011/11/for-my-app-moustachify-everything-i-was.html)

# php - MySQL和PHP foreach中的行总和

> ID：11854496
> 
> 赞同：2
> 
> 时间：2012-08-07T21:36:47.757
> 
> 标签：php, mysql

我试图连续获得锻炼的总和，然后按总和对所有行进行排序，以获得团队所在的位置，因此以正确的顺序列出。我现在试图弄清楚这一点，我对自己的逻辑有点迷失了。我了解 MYSQL sum 函数，但似乎看不到在这种情况下如何使用它来帮助我。

所以是这样的： ![例子](../Images/ce2a2e16f50064f384764cc2a4ac3e93.png)

这是我当前的表架构：

```
CREATE TABLE workouts
(
team_id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
username VarChar(255) NOT NULL,
team_name VarChar(50) NOT NULL,
week1 INT NOT NULL,
week2 INT NOT NULL,
week3 INT NOT NULL,
week4 INT NOT NULL,
week5 INT NOT NULL,
week6 INT NOT NULL,
week7 INT NOT NULL,
week8 INT NOT NULL,
week9 INT NOT NULL,
week10 INT NOT NULL,
week11 INT NOT NULL,
week12 INT NOT NULL
) engine=innodb; 
```

到目前为止，这是我的展示：

```
<?php 
$count = 0;
$statement = $db->query('SELECT * FROM workouts');
foreach($statement as $row):
?>
<tr>
<td><?php $count++; ?></td>
<td><?php $row['team_name']; ?></td>
<td><?php $row['week1']; ?></td>
<td><?php $row['week2']; ?></td>
<td><?php $row['week3']; ?></td>
<td><?php $row['week4']; ?></td>
<td><?php $row['week5']; ?></td>
<td><?php $row['week6']; ?></td>
<td><?php $row['week7']; ?></td>
<td><?php $row['week8']; ?></td>
<td><?php $row['week9']; ?></td>
<td><?php $row['week10']; ?></td>
<td><?php $row['week11']; ?></td>
<td><?php $row['week12']; ?></td>
<td><?php  ?></td>
</tr>
<?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:48:22.320

好吧，根据您已经总结的行，最简单的答案是：

```
<?php 
$count = 0;
$statement = $db->query('SELECT * FROM workouts');
foreach($statement as $row):
?>
<tr>
<td><?php echo $count++; ?></td>
<td><?php echo $row['team_name']; ?></td>
<td><?php echo $row['week1']; ?></td>
<td><?php echo $row['week2']; ?></td>
<td><?php echo $row['week3']; ?></td>
<td><?php echo $row['week4']; ?></td>
<td><?php echo $row['week5']; ?></td>
<td><?php echo $row['week6']; ?></td>
<td><?php echo $row['week7']; ?></td>
<td><?php echo $row['week8']; ?></td>
<td><?php echo $row['week9']; ?></td>
<td><?php echo $row['week10']; ?></td>
<td><?php echo $row['week11']; ?></td>
<td><?php echo $row['week12']; ?></td>
<td><?php echo $row['week1'] + $row['week2'] + $row['week3'] + $row['week4'] + $row['week5'] + $row['week6'] + $row['week7'] + $row['week8'] + $row['week9'] + $row['week10'] + $row['week11'] + $row['week12']; ?></td>
</tr>
<?php endforeach; ?> 
```

但是为了使用这个值来控制行的显示顺序，您需要让 MySQL 为您完成这项工作。

你会想要做的是这样的：

```
<?php 

  $count = 0;
  $statement = $db->query('
    SELECT *, week1 + week2 + week3 + week4 + week5 + week6 + week7 + week8 + week9 + week10 + week11 + week12 AS Total
    FROM workouts
    ORDER BY Total
  ');
  foreach ($statement as $row):
?>
<tr>
<td><?php echo $count++; ?></td>
<td><?php echo $row['team_name']; ?></td>
<td><?php echo $row['week1']; ?></td>
<td><?php echo $row['week2']; ?></td>
<td><?php echo $row['week3']; ?></td>
<td><?php echo $row['week4']; ?></td>
<td><?php echo $row['week5']; ?></td>
<td><?php echo $row['week6']; ?></td>
<td><?php echo $row['week7']; ?></td>
<td><?php echo $row['week8']; ?></td>
<td><?php echo $row['week9']; ?></td>
<td><?php echo $row['week10']; ?></td>
<td><?php echo $row['week11']; ?></td>
<td><?php echo $row['week12']; ?></td>
<td><?php echo $row['Total']; ?></td>
</tr>
<?php endforeach; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T21:47:21.540

我会将此作为 SQL 的一部分，而不是在 PHP 中。而不是使用`Sum()`旨在将一列添加到整个分组序列中的使用，只需添加列并为其分配别名“Total”，如下所示：

```
SELECT week1 + week2 + week3 + weekN Total FROM workouts ORDER BY Total 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T21:50:07.103

这是我的解决方案。

我不只是将数据库值作为您的处理来回显它们，而是将它们转储到一个关联数组中，其中锻炼的总数作为键。然后你可以使用 ksort 对它们进行排序。完成后，您可以使用 foreach 循环打印出数组。

我没有输入完整的数组函数，但它应该给你一个想法。

```
<?php
$count = 0;

$statement = $db->query('SELECT * FROM workouts');

$workouts = array();

while ($row = mysql_fetch_array($statement)) {

    $total = 0;

    for($i = 0;$i < 13; $i++)
        $total = $total + $row['week'.$i];

    //Build the array containing each teams workouts
    $workouts[$total] = array('team_name' => $row['team_name'],'week1' => $row['week1']);
}

ksort($workouts);

$rowcount = 0;

foreach ($workouts as $total => $team): ?>
    <tr>
    <td><?php echo $rowcount++; ?></td>
    <td><?php echo $team['team_name']; ?></td>
    <td><?php echo $team['week1']; ?></td>
    <td><?php echo $team['week2']; ?></td>
    <td><?php echo $team['week3']; ?></td>
    <td><?php echo $team['week4']; ?></td>
    <td><?php echo $team['week5']; ?></td>
    <td><?php echo $team['week6']; ?></td>
    <td><?php echo $team['week7']; ?></td>
    <td><?php echo $team['week8']; ?></td>
    <td><?php echo $team['week9']; ?></td>
    <td><?php echo $team['week10']; ?></td>
    <td><?php echo $team['week11']; ?></td>
    <td><?php echo $team['week12']; ?></td>
    <td><?php echo $total  ?></td>
    </tr>
<?php endforeach ?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T21:54:53.410

如果我理解正确，您希望*团队*按顺序排列，每个团队中的用户（可能按他们自己的顺序）。

要获得团队订单，您需要加入。

```
with wo as (select wo.*,
                   (week1 + week2 + . . . weekn) as weektotal
            from workouts
           )
select wo.*
from wo join
     (select team_id, sum(weektotal) as weektotal
      from wo
      group by team_id
     ) wot
     on wo.team_id = wot.team_id
order by wot.weektotal desc, wot.team_id, wo.weektotal desc 
```

# c# - 使用 ObjectAnimationUsingKeyFrames 切换可见性

> ID：11854499
> 
> 赞同：2
> 
> 时间：2012-08-07T21:36:59.957
> 
> 标签：c#, wpf, silverlight, xaml

我不确定为什么以下不起作用。当绑定模型属性更改时，我尝试每 0.2 秒隐藏和显示一个文本框，持续 1.2 秒。任何人都可以看到这种风格的问题或我是如何尝试这样做的吗？

```
<Style x:Key="FlashStyle" TargetType="TextBlock">
        <Style.Triggers>
            <EventTrigger RoutedEvent="Binding.TargetUpdated" >
                <EventTrigger.Actions>
                    <BeginStoryboard>
                        <Storyboard>
                            <ObjectAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetProperty="(UIElement.Visibility)">
                                <DiscreteObjectKeyFrame KeyTime="00:00:00.2" Value="{x:Static Visibility.Visible}"/>
                                <DiscreteObjectKeyFrame KeyTime="00:00:00.4" Value="{x:Static Visibility.Collapsed}"/>
                                <DiscreteObjectKeyFrame KeyTime="00:00:00.6" Value="{x:Static Visibility.Visible}"/>
                                <DiscreteObjectKeyFrame KeyTime="00:00:00.8" Value="{x:Static Visibility.Collapsed}"/>
                                <DiscreteObjectKeyFrame KeyTime="00:00:01" Value="{x:Static Visibility.Visible}"/>
                            </ObjectAnimationUsingKeyFrames>
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger.Actions>
            </EventTrigger>
        </Style.Triggers>
    </Style>

    <TextBlock Text="{Binding Data.QuotePrice, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource FlashStyle}" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T21:42:40.470

事件不发生[`Binding.TargetUpdated`：](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.targetupdated.aspx)

> 当值从绑定源传输到绑定目标时发生，但仅适用于[`NotifyOnTargetUpdated`](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.notifyontargetupdated.aspx)值设置为 的绑定**`true`**。

[除了优先级](https://msdn.microsoft.com/en-us/library/ms743230%28v=vs.100%29.aspx)（如果这是您的实际代码，这应该没问题）之外，我唯一能想到的事情。

# python - django 动态生成模型选择

> ID：11854500
> 
> 赞同：1
> 
> 时间：2012-08-07T21:37:00.837
> 
> 标签：python, django, django-models, django-admin

# 模型.py

```
class Make(models.Model):
    name = models.CharField(max_length = 50)
    #category = models.ManyToManyField(Category)
    def __unicode__(self):
        return self.name

class Category(models.Model):
    make = models.ManyToManyField(Make)
    name = models.CharField(max_length = 40)
    def __unicode__(self):
        return self.name

class Subcategory(models.Model):
    name = models.CharField(max_length = 40)
    category = models.ForeignKey(Category)
    def __unicode__(self):
        return self.name

makes = Make.objects.all()
MAKE_CHOICES = [(str(cat.name),str(cat.name)) for cat in makes]
categories = Category.objects.all()
CAT_CHOICES = [(str(cat.name),str(cat.name)) for cat in categories]
subcategories = Subcategory.objects.all()
SUB_CHOICES = [(str(cat.name),str(cat.name)) for cat in subcategories]
class Subscription(models.Model):
    make = models.CharField(max_length = 40,choices = MAKE_CHOICES)
    #category = models.ManyToManyField(Category)

    category = models.CharField(max_length = 40,choices = CAT_CHOICES)
    subcategory = models.CharField(max_length = 40,choices = SUB_CHOICES)
    #subcategory = models.ManyToManyField(Subcategory)
    fixer = models.ForeignKey(Fixer)
    subscribed_on = models.DateTimeField()
    expires_on = models.DateTimeField()
    user = models.ForeignKey(User) 
```

# 怀疑

当显示或提示订阅字段时，我需要它们动态生成，如果选择了一个类别，那么子类别字段应该只显示与该特定字段相关的所有子类别。

# php - PHP - 视图中来自控制器的函数

> ID：11854501
> 
> 赞同：1
> 
> 时间：2012-08-07T21:37:06.353
> 
> 标签：php, oop, model-view-controller

我正在尝试学习 MVC 模式，（但没有模型，因为当我拥有控制器时，我看不到我可以使用它们）。

所以我想在我的视图中显示一些内容。我怎么做？

这是我处理索引的控制器：

```
<?php

class Index extends Controller {

    function __construct() {
        parent::__construct();
        $this->view->render('mainpage/index');
    }

    public function wynik($arg) {
        echo $arg;
    }
}

$klasa = new Index();

?> 
```

我想在我看来调用函数 wynik($arg) 。我怎样才能做到这一点？我的控制器库如下所示：

```
<?php

class Controller {

    function __construct() {
        $this->view = new View();
    }

}
?> 
```

在 views/mainpage/index.php 我正在尝试这样的事情：

```
<?php
echo $klasa->wynik('abc');
// tried this too:
$this->wynik('abc');
?> 
```

但它不起作用：

**注意：未定义变量：第 2 行 C:\wamp\www\lvc\views\mainpage\index.php 中的 klasa**

和

**致命错误：在第 2 行的 C:\wamp\www\lvc\views\mainpage\index.php 中的非对象上调用成员函数 wynik()**

这是视图库：

```
<?php

class View {

    function __construct() {

    }

    public function render($name, $noInclude = false) {
        if ($noInclude == true) {
            require 'views/' . $name . '.php';
        } else {

            require 'views/header.php';
            require 'views/' . $name . '.php';
            require 'views/footer.php';
        }
    }

}

?> 
```

我在想 - 是的，它在 View() 类中搜索 wynik() 函数，这就是它出错的原因。我希望视图在我的控制器中搜索功能。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T21:57:20.867

MVC 是一种结合了两层的设计模式：

*   *模型层*
*   *表示层*

**如果您的应用程序没有模型层（包含所有领域业务逻辑），那么就没有 MVC。**

* * *

表示层主要由两组结构组成：视图和控制器。

*   控制器：负责对用户的输入做出反应，并在此基础上改变模型层和视图的状态。

*   视图：负责显示（或表示）逻辑，基于信息，该视图已从模型层接收。基于此信息视图选择适当的响应 - 它可以只是一个 HTTP 标头或 HTML 文件，从多个模板呈现或格式化的 JSON/XML 数据。

但你也没有真正的意见。您所说的“视图”实际上是简单的 PHP[模板](http://codeangel.org/articles/simple-php-template-engine.html)。

至于视图访问控制器的方法，它违反了 MVC 和 MVC 启发模式中的所有原则。View 是一个独立的实体，它从模型层获取数据并由控制器更改状态。

在经典 MVC 和 Model2 MVC 模式中，视图是活动的。它直接从模型层请求信息。而在 MVP 和 MVVM 模式中，视图是被动的，来自模型层的信息由控制器提供（尽管在这些模式中它们分别称为“演示者”和“视图模型”）。

视图不使用控制器。

**拜托，在你开始抛出术语之前做一些研究，只是因为你认为这是*最新的东西*。**

阅读以下材料：

*   [图形用户界面架构](http://martinfowler.com/eaaDev/uiArchs.html)
*   [PHP 中的 MVC 第 1 部分：Hello World](http://r.je/mvc-in-php.html)
*   [Model-View-Confusion 第 1 部分：为什么 MVC 中的视图可以访问模型](http://r.je/views-are-not-templates.html)
*   [Smalltalk-80系统中模型-视图-控制器用户界面范式的描述](http://www.itu.dk/courses/VOP/E2005/VOP2005E/8_mvc_krasner_and_pope.pdf)
*   [在 MVC 中应该如何构建模型？](https://stackoverflow.com/a/5864000/727208)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T22:12:38.363

此代码示例不起作用，因为当您尝试引用它时变量 $klasa 不存在。通过调用“new Index()”完成的对象初始化必须首先完成，然后将该值分配给$klasa。因此，您的代码试图在 $klasa 存在之前访问它。

也就是说，我不会继续调试这个问题。您完全忽略了 MVC 的要点，并且在您理解它之前，您将无法编写一个控制器和视图，它们可以很好地协同工作。花时间理解 MVC，不是通过自己实现它，而是通过使用另一个系统作为示例。

如果你喜欢 PHP，试试 Yii、CodeIgniter 或 Symphony 框架。如果你喜欢 Python，试试 Django。如果你喜欢 Ruby，试试 Rails。如果你喜欢 C，学习 Objective-C 并尝试 iOS。

MVC 模型非常简单：

1.  **模型**- 这是您的数据存储位置。
2.  **查看**- 这是您的数据向用户呈现的方式。
3.  **控制器**- 这是您的视图与之对话的对象，以便它可以作用于模型。

让我们以一个简单的冰淇淋自动售货机为例。假设自动售货机是其中一台机器，就像这样，您看不到商品：

![在此处输入图像描述](../Images/9656492f6271feef823c5bf30a6962b3.png)

1.  **型号**- 存放在后面的实际冰淇淋。比方说，4 巧克力，1 草莓，3 香草。视图和控制器并不关心每个冰淇淋有多少。例如，模型的工作是跟踪这一点，并确保我们在插槽中没有负面冰淇淋，或者其他没有意义的东西。
2.  **查看**- 这些小按钮显示存在哪些冰淇淋可供选择。视图不知道也不关心后面有多少冰淇淋，或者甚至存在什么冰淇淋。它只是向用户展示与模型相关的东西，它并不关心模型中的内容或模型的结构。
3.  **控制器**- 当用户与视图交互时（即，他们按下按钮），控制器将接受该输入并由模型运行它。控制器不关心模型的结构，它不知道后面有什么。它只知道“当用户按下按钮时，我需要使用模型中的数据根据​​该输入做出决定”。例如，当用户按下库存中的有效商品时，控制器接受该输入，由模型运行它，看到它没问题并分配冰淇淋。当用户按下一个无库存的无效项目时，控制器接受该输入，由模型运行它，看到它是无库存的，并告诉视图显示错误。

如果你理解了这个基本概念，整个 MVC 将变得更有意义，并显着加快开发时间。了解 MVC 可能是目前新兴 Web/移动开发人员最重要的事情之一，因为大多数流行的 Web 框架（Django、Rails、Yii/CodeIgniter/Symphony）以及 iOS 都是基于它的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T21:48:26.653

代替 MVC 并且不知道为什么等等，我建议您使用另一个称为*Transaction Script*的概念，它也可以很好地与*Frontend Controller*或*Application Controller*一起使用。

使用*事务脚本*可以让您更熟悉 OOP，同时您还可以从某些应用程序结构中受益，而不会产生被误解的 MVC 所带来的开销和问题。

例如，在事务脚本对象中，一切都可以访问该事务的功能。您的库、您的视图和其他所有内容（模型）。

然后你会看到事情在增长。但是忘记 Codeigniter 和类似的东西，从头开始编写（不要模仿），你会学到更多，你会拥有更高效的代码。

而且您会按照自己的方式进行操作，这对学习很有帮助。

对于库，只需从 Packagist 和 Pear 存储库中获取内容，您将不会有太多的愿望。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T22:04:54.493

我不打算在这里添加代码示例，但我希望我所说的能帮助你找到正确的方向。LVC（库、视图、控制器）只是您将一个名称（模型）更改为另一个（库）根本不重要，您仍在使用 MVC，您只是碰巧将您的模型称为库。这是一个很大的话题，但我只是想让您了解使用模型并将代码卸载到其中而不是在控制器中。

看待它的方式是这样的：

*   通常，控制器应该只执行以下操作 - 检查请求，调用模型（在您的情况下为库）方法，这些方法处理这些请求，并将这些结果传递给视图进行渲染。将控制器中的每个函数视为用户可以在地址栏中键入并访问的端点 URL。

认为您在名为 user 的控制器中有一个类似于 profile($user_id) 的功能，用于显示用户配置文件，并且用户使用 URL www.mydomain/user/profile/1234 访问它。这一切都很好。但是如果你开始在这个控制器中加入各种实用函数，比如strip_all_zeroes()，会发生什么。如果用户可以使用 mydomain.com/user/strip_all_zeroes 访问它，那会变得很糟糕，对吧？它可能会开始抛出各种警告、错误，甚至暴露敏感数据。这就是模型的用武之地。它们可以用来创建各种辅助函数，根据需要创建整个数据类。

当然，这非常广泛，过于简单且不完全准确，但我希望您能明白这一点..

# sharepoint - 如何通过事件接收器更新当前项目中的字段值？

> ID：11854503
> 
> 赞同：3
> 
> 时间：2012-08-07T21:37:07.430
> 
> 标签：sharepoint, event-receiver

编辑：我意识到我在第二个代码块中的方法是不必要的。我可以通过在 ItemUpdated 中执行以下操作来完成同样的事情：

```
SPListItem thisItem = properties.ListItem;

thisItem.File.CheckOut();

thisItem["Facility Number"] = "12345";
thisItem.Update();

thisItem.File.CheckIn("force check in"); 
```

不幸的是，当“thisItem.Update();”时我仍然收到相同的错误消息 已执行：沙盒代码执行请求被拒绝，因为沙盒代码主机服务太忙，无法处理请求

实际上，在最初部署我的沙盒解决方案并使用此链接时，我收到了上述错误（http://blogs.msdn.com/b/sharepointdev/archive/2011/02/08/error-the-sandboxed-code-execution- request-was-refused-because-the-sandboxed-code-host-service-was-too-busy-to-handle-the-request.aspx) 来修复它。

* * *

我正在尝试编写一个 C# 事件接收器，当在库中添加/更改文档时，它会更改字段的值。我尝试使用以下代码：

```
public override void ItemUpdating(SPItemEventProperties properties)
{
    base.ItemUpdating(properties);
    string fieldInternalName = properties.List.Fields["Facility Number"].InternalName;
    properties.AfterProperties[fieldInternalName] = "12345";
} 
```

不幸的是，这仅适用于某些领域。例如，如果我将“Facility Number”替换为“Source”，代码将正确执行。这可能是因为我们正在使用第三方软件（称为 KnowledgeLake）将 SharePoint 中的默认编辑表单替换为 Silverlight 表单。无论如何，因为我在上面的代码中遇到了挑战（同样，因为我认为在 ItemUpdating 事件触发后 Silverlight 表单可能会覆盖该字段），所以我尝试了以下代码：

```
 public override void ItemUpdated(SPItemEventProperties properties)
 {

       base.ItemUpdated(properties);

       //get the current item
       SPListItem thisItem = properties.ListItem;

       string fieldName = "Facility Number";
       string fieldInternalName = properties.List.Fields[fieldName].InternalName;
       string fieldValue = (string)thisItem["Facility Number"];

       if (!String.IsNullOrEmpty(fieldValue))
       {
           //properties.AfterProperties[fieldInternalName] = "123456789";

           SPWeb oWebsite = properties.Web as SPWeb;
           SPListItemCollection oList = oWebsite.Lists[properties.ListTitle].Items;

           SPListItem newItem = oList.GetItemById(thisItem.ID);

           newItem.File.CheckOut();

           thisItem[fieldInternalName] = "12345";
           thisItem.Update();

           newItem.File.CheckIn("force");
       }
   } 
```

首先，上面对我来说似乎有点笨拙，因为我很想只使用 AfterProperties 方法。此外，执行“newItem.Update()”时出现以下错误：沙盒代码执行请求被拒绝，因为沙盒代码主机服务太忙而无法处理请求

我在这里错过了什么吗？我很想利用第一个代码块。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-06T15:07:24.523

乔希能够回答他自己的问题，这也帮助我解决了我的问题。这是一个工作代码片段。

```
public override void ItemUpdated(SPItemEventProperties properties)
{
 string internalName = properties.ListItem.Fields[columnToUpdate].InternalName;

 //Turn off event firing during item update
 base.EventFiringEnabled = false;

 SPListItem item = properties.ListItem;
 item[internalName] = newVal;
 item.Update();

 //Turn back on event firing
 base.EventFiringEnabled = true;

 base.ItemUpdated(properties);
} 
```

# javascript - 变换导致 div 消失

> ID：11854506
> 
> 赞同：0
> 
> 时间：2012-08-07T21:37:29.153
> 
> 标签：javascript, jquery, html, css

我正在用 CSS3 和 jQuery 创建一个 3d 轮播。[这](http://jsfiddle.net/upEC6/45/)是我的代码。

目前，我的问题是，如果我将这行 css 代码设置为`main`class，则所有内容的位置和缩放都会改变：

```
-webkit-transform: rotateY(20deg) ; 
```

我的问题是，如何在`main`不进行任何其他更改的情况下轮换班级？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T21:56:45.893

这是一个非常有趣的问题。我正在使用谷歌浏览器并且尚未在 Safari 中进行测试，但似乎至少 Chrome 似乎在使用 -webkit-transform 时创建了一个新的绘画堆栈。如果你注意到，`<div class="main">`不再有高度。就好像元素的内容已经从它们的父元素中抽象出来了。

在任何情况下，我注意到如果你给它一个静态高度而不是一个百分比（比如 500px）并且如果你删除负边距（这似乎没有做任何事情），它会再次可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T22:00:19.570

问题是您在 .main 上的 -1000px 边距。如果你摆脱它，你可以开始对那个 DOM 元素应用旋转。

[http://jsfiddle.net/upEC6/53/](http://jsfiddle.net/upEC6/53/)

尝试使用负度旋转。

# python - 杀死一个特定的线程 Python

> ID：11854509
> 
> 赞同：1
> 
> 时间：2012-08-07T21:37:57.217
> 
> 标签：python, multithreading, class, function

有没有办法用 Python 杀死一个特定的线程？我有一个线程运行一个循环函数，它干扰了程序的其他部分。当某个功能启动时我需要杀死它，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:43:17.373

最好的方法是使用线程定期检查的退出标志，如果设置则退出。当您需要终止线程时，您将设置此标志并等待线程自行退出。

[这个答案](https://stackoverflow.com/a/325528/505154)有关于为什么强行杀死线程是一个坏主意的附加信息，以及上述方法的 Python 实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-12T02:59:06.230

我发现如果你用一个`self.flag`变量定义一个 Threading 类，并使你正在调用该类的函数的函数，那么你可以在一个线程特定的实例上设置标志并使用 if 语句退出特定的线程。

不难想象这更加动态并允许产生和关闭线程的能力。

```
class AutoPilotThreader(threading.Thread):
    def __init__(self, threadID, name):
      threading.Thread.__init__(self)
      self.threadID = threadID
      self.name = name
      self.flag = 0
    def run(self):
      print "Starting " + self.name
      self.SelTestRun()
      print "Exiting " + self.name

    def SelTestRun(self):
        # do code
        while 1:
            if self.flag:
                return
            else:
                time.sleep(1)

my_threads = []
t1 = AutoPilotThreader(1, "t1")
t2 = AutoPilotThreader(2, "t2")
t1.start()
t2.start()
my_threads.append(t1)
my_threads.append(t2)

while 1:
    print("What would you like to do: 1\. Quit 2\. Start New 3\. Check")
    choice = input("Enter : ")
    if choice == 1:
        choice = input(" 1 or 2 or 3 ")
        if choice == 1:
            t1.flag = 1
        elif choice ==2:
            t2.flag = 1
        elif choice ==3:
            t3.flag = 1  ......... 
```

# angularjs - 是否可以使用 Angular 创建树视图？

> ID：11854514
> 
> 赞同：178
> 
> 时间：2012-08-07T21:38:35.730
> 
> 标签：angularjs

我正在寻找在网络应用程序中以树结构显示数据。我希望使用 Angular 来完成这项任务。

看起来 ng-repeat 将允许我遍历节点列表，但是当给定节点的深度增加时，我该如何进行嵌套呢？

我尝试了[以下代码](http://jsbin.com/ihuvuf/1/)，但 HTML 的自动转义阻止了它的工作。另外，最后的 ul 标记在错误的位置。

我很确定我正在以完全错误的方式解决这个问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：236
> 
> 时间：2012-08-08T08:56:15.910

看看这个小提琴

原文：http: [//jsfiddle.net/brendanowen/uXbn6/8/](http://jsfiddle.net/brendanowen/uXbn6/8/)

更新：http: [//jsfiddle.net/animaxf/uXbn6/4779/](http://jsfiddle.net/animaxf/uXbn6/4779/)

这应该让您很好地了解如何`tree like structure`使用角度显示。这是一种在 html 中使用递归！

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2013-08-18T16:54:00.227

如果您使用的是 Bootstrap CSS...

我基于引导程序“导航”列表为 AngularJS 创建了一个简单的可重用树控件（指令）。我添加了额外的缩进、图标和动画。HTML 属性用于配置。

它不使用递归。

我称它为**angular-bootstrap-nav-tree**（朗朗上口的名字，你不觉得吗？）

[这里](http://nickperkinslondon.github.io/angular-bootstrap-nav-tree/test/bs2_ng115_test_page.html)有一个例子，来源在[这里](https://github.com/nickperkinslondon/angular-bootstrap-nav-tree)。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2013-09-28T10:29:19.150

当做这样的事情时，最好的解决方案是递归指令。然而，当你做出这样的指令时，你会发现 AngularJS 陷入了无限循环。

对此的解决方案是让指令在编译事件期间删​​除元素，并在链接事件中手动编译并添加它们。

[我在这个线程](https://groups.google.com/forum/#!topic/angular/vswXTes_FtM)中发现了这一点，并将这个功能抽象[为一个服务](https://github.com/marklagendijk/angular-recursion)。

```
module.factory('RecursionHelper', ['$compile', function($compile){
    return {
        /**
         * Manually compiles the element, fixing the recursion loop.
         * @param element
         * @param [link] A post-link function, or an object with function(s) registered via pre and post properties.
         * @returns An object containing the linking functions.
         */
        compile: function(element, link){
            // Normalize the link parameter
            if(angular.isFunction(link)){
                link = { post: link };
            }

            // Break the recursion loop by removing the contents
            var contents = element.contents().remove();
            var compiledContents;
            return {
                pre: (link && link.pre) ? link.pre : null,
                /**
                 * Compiles and re-adds the contents
                 */
                post: function(scope, element){
                    // Compile the contents
                    if(!compiledContents){
                        compiledContents = $compile(contents);
                    }
                    // Re-add the compiled contents to the element
                    compiledContents(scope, function(clone){
                        element.append(clone);
                    });

                    // Call the post-linking function, if any
                    if(link && link.post){
                        link.post.apply(null, arguments);
                    }
                }
            };
        }
    };
}]); 
```

使用此服务，您可以轻松创建树指令（或其他递归指令）。这是一个树指令的示例：

```
module.directive("tree", function(RecursionHelper) {
    return {
        restrict: "E",
        scope: {family: '='},
        template: 
            '<p>{{ family.name }}</p>'+
            '<ul>' + 
                '<li ng-repeat="child in family.children">' + 
                    '<tree family="child"></tree>' +
                '</li>' +
            '</ul>',
        compile: function(element) {
            return RecursionHelper.compile(element);
        }
    };
}); 
```

请参阅此[Plunker](http://plnkr.co/edit/JAIyolmqPqO9KsynSiZp?p=preview)进行演示。我最喜欢这个解决方案，因为：

1.  您不需要使您的 html 不那么干净的特殊指令。
2.  递归逻辑被抽象到 RecursionHelper 服务中，因此您可以保持指令干净。

更新：添加了对自定义链接功能的支持。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2014-05-06T15:46:30.390

[angular-ui-tree](http://angular-ui-tree.github.io/angular-ui-tree/#/basic-example "角ui树")似乎对我来说做得很好

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2013-05-27T21:28:43.533

这是使用递归指令的示例：http: [//jsfiddle.net/n8dPm/](http://jsfiddle.net/n8dPm/) 取自[https://groups.google.com/forum/#!topic/angular/vswXTes_FtM](https://groups.google.com/forum/#!topic/angular/vswXTes_FtM)

```
module.directive("tree", function($compile) {
return {
    restrict: "E",
    scope: {family: '='},
    template: 
        '<p>{{ family.name }}</p>'+
        '<ul>' + 
            '<li ng-repeat="child in family.children">' + 
                '<tree family="child"></tree>' +
            '</li>' +
        '</ul>',
    compile: function(tElement, tAttr) {
        var contents = tElement.contents().remove();
        var compiledContents;
        return function(scope, iElement, iAttr) {
            if(!compiledContents) {
                compiledContents = $compile(contents);
            }
            compiledContents(scope, function(clone, scope) {
                     iElement.append(clone); 
            });
        };
    }
};
}); 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2013-03-04T16:53:47.927

这个似乎更完整一点：[https ://github.com/dump247/angular.tree](https://github.com/dump247/angular.tree)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-03-23T23:32:41.040

另一个基于[原始源代码](https://groups.google.com/forum/#!msg/angular/TbpjE-5XEM0/yUi8wqc7sWoJ "原始来源")的示例，已经有一个示例树结构（更容易看到它是如何工作的 IMO）和一个用于搜索树的过滤器：

[JSFiddle](http://goo.gl/zpWgW "JSFiddle 示例")

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-06-09T16:20:45.120

这么多很棒的解决方案，但我觉得它们都以一种或另一种方式使事情变得有点过于复杂。

我想创建一些东西来重新创建@Mark Lagendijk 的 awnser 的简单性，但没有它在指令中定义模板，而是让“用户”在 HTML 中创建模板......

从[https://github.com/stackfull/angular-tree-repeat](https://github.com/stackfull/angular-tree-repeat)等获得的想法......我最终创建了项目：[https ://github.com/dotJEM/angular-tree](https://github.com/dotJEM/angular-tree)

这使您可以像这样构建树：

```
<ul dx-start-with="rootNode">
  <li ng-repeat="node in $dxPrior.nodes">
    {{ node.name }}
    <ul dx-connect="node"/>
  </li>
</ul> 
```

对我来说，这比必须为不同结构的树创建多个指令更干净......本质上调用上面的树有点错误，它从@ganaraj 的“递归模板”的 awnser 中挑选出更多，但允许我们在我们需要树的地方定义模板。

（您可以使用基于脚本标签的模板来做到这一点，但它仍然必须位于实际的树节点之外，而且它仍然感觉有点糟糕......）

离开这里只是另一种选择......

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-05-29T16:31:37.607

您可以尝试使用带有 Angular-Ui-Tree[的 Angular-Tree-DnD](https://github.com/thienhung1989/angular-tree-dnd)示例，但我已编辑，与表格、网格、列表兼容。

*   能够拖放
*   列表的扩展函数指令*（下一个，上一个，getChildren，...）*
*   过滤数据。
*   OrderBy (版本)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-11-30T06:41:52.203

根据@ganaraj 的[回答](https://stackoverflow.com/a/11861030/1309218)和@dnc253 的[回答](https://stackoverflow.com/a/14657310/1309218)，我刚刚为具有选择、添加、删除和编辑功能的树结构做了一个简单的“指令”。

jsfiddle：http: [//jsfiddle.net/yoshiokatsuneo/9dzsms7y/](http://jsfiddle.net/yoshiokatsuneo/9dzsms7y/)

HTML：

```
<script type="text/ng-template" id="tree_item_renderer.html">
    <div class="node"  ng-class="{selected: data.selected}" ng-click="select(data)">
        <span ng-click="data.hide=!data.hide" style="display:inline-block; width:10px;">
            <span ng-show="data.hide && data.nodes.length > 0" class="fa fa-caret-right">+</span>
            <span ng-show="!data.hide && data.nodes.length > 0" class="fa fa-caret-down">-</span>
        </span>
        <span ng-show="!data.editting" ng-dblclick="edit($event)" >{{data.name}}</span>
        <span ng-show="data.editting"><input ng-model="data.name" ng-blur="unedit()" ng-focus="f()"></input></span>
        <button ng-click="add(data)">Add node</button>
        <button ng-click="delete(data)" ng-show="data.parent">Delete node</button>
    </div>
    <ul ng-show="!data.hide" style="list-style-type: none; padding-left: 15px">
        <li ng-repeat="data in data.nodes">
            <recursive><sub-tree data="data"></sub-tree></recursive>
        </li>
    </ul>
</script>
<ul ng-app="Application" style="list-style-type: none; padding-left: 0">
    <tree data='{name: "Node", nodes: [],show:true}'></tree>
</ul> 
```

JavaScript：

```
angular.module("myApp",[]);

/* https://stackoverflow.com/a/14657310/1309218 */
angular.module("myApp").
directive("recursive", function($compile) {
    return {
        restrict: "EACM",
        require: '^tree',
        priority: 100000,

        compile: function(tElement, tAttr) {
            var contents = tElement.contents().remove();
            var compiledContents;
            return function(scope, iElement, iAttr) {
                if(!compiledContents) {
                    compiledContents = $compile(contents);
                }
                compiledContents(scope, 
                                     function(clone) {
                         iElement.append(clone);
                                         });
            };
        }
    };
});

angular.module("myApp").
directive("subTree", function($timeout) {
    return {
        restrict: 'EA',
        require: '^tree',
        templateUrl: 'tree_item_renderer.html',
        scope: {
            data: '=',
        },
        link: function(scope, element, attrs, treeCtrl) {
            scope.select = function(){
                treeCtrl.select(scope.data);
            };
            scope.delete = function() {
                scope.data.parent.nodes.splice(scope.data.parent.nodes.indexOf(scope.data), 1);
            };
            scope.add = function() {
                var post = scope.data.nodes.length + 1;
                var newName = scope.data.name + '-' + post;
                scope.data.nodes.push({name: newName,nodes: [],show:true, parent: scope.data});
            };
            scope.edit = function(event){
                scope.data.editting = true;
                $timeout(function(){event.target.parentNode.querySelector('input').focus();});
            };
            scope.unedit = function(){
                scope.data.editting = false;
            };

        }
    };
});

angular.module("myApp").
directive("tree", function(){
    return {
        restrict: 'EA',
        template: '<sub-tree data="data" root="data"></sub-tree>',
        controller: function($scope){
            this.select = function(data){
                if($scope.selected){
                    $scope.selected.selected = false;
                }
                data.selected = true;
                $scope.selected = data;
            };
        },
        scope: {
            data: '=',
        }
    }
}); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-05-30T20:55:10.423

是的，这绝对是可能的。这里的问题可能假设 Angular 1.x，但为了将来参考，我包括一个 Angular 2 示例：

从概念上讲，您所要做的就是创建一个递归模板：

```
<ul>
    <li *for="#dir of directories">

        <span><input type="checkbox" [checked]="dir.checked" (click)="dir.check()"    /></span> 
        <span (click)="dir.toggle()">{{ dir.name }}</span>

        <div *if="dir.expanded">
            <ul *for="#file of dir.files">
                {{file}}
            </ul>
            <tree-view [directories]="dir.directories"></tree-view>
        </div>
    </li>
</ul> 
```

然后将一个树对象绑定到模板，让 Angular 发挥它的魔力。这个概念显然也适用于 Angular 1.x。

这是一个完整的例子：[http ://www.syntaxsuccess.com/viewarticle/recursive-treeview-in-angular-2.0](http://www.syntaxsuccess.com/viewarticle/recursive-treeview-in-angular-2.0)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-06-12T10:22:49.307

您可以为此使用 angular-recursion-injector：[https ://github.com/knyga/angular-recursion-injector](https://github.com/knyga/angular-recursion-injector)

允许您使用条件进行无限深度嵌套。仅在需要时重新编译并仅编译正确的元素。代码中没有魔法。

```
<div class="node">
  <span>{{name}}</span>

  <node--recursion recursion-if="subNode" ng-model="subNode"></node--recursion>
</div> 
```

使其工作得比其他解决方案更快、更简单的一件事是“--recursion”后缀。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-09-16T21:44:15.673

当树结构很大时，Angular（最高 1.4.x）在渲染递归模板时会变得非常慢。在尝试了这些建议之后，我最终创建了一个简单的 HTML 字符串并使用`ng-bind-html`它来显示它。当然，这不是使用 Angular 特性的方式

此处显示了一个简单的递归函数（使用最少的 HTML）：

```
function menu_tree(menu, prefix) {
    var html = '<div>' + prefix + menu.menu_name + ' - ' + menu.menu_desc + '</div>\n';
    if (!menu.items) return html;
    prefix += menu.menu_name + '/';
    for (var i=0; i<menu.items.length; ++i) {
        var item = menu.items[i];
        html += menu_tree(item, prefix);
    }
    return html;
}
// Generate the tree view and tell Angular to trust this HTML
$scope.html_menu = $sce.trustAsHtml(menu_tree(menu, '')); 
```

在模板中，它只需要这一行：

```
<div ng-bind-html="html_menu"></div> 
```

这绕过了 Angular 的所有数据绑定，只需在递归模板方法的一小部分时间内显示 HTML。

使用这样的菜单结构（Linux 文件系统的部分文件树）：

```
menu = {menu_name: '', menu_desc: 'root', items: [
            {menu_name: 'bin', menu_desc: 'Essential command binaries', items: [
                {menu_name: 'arch', menu_desc: 'print machine architecture'},
                {menu_name: 'bash', menu_desc: 'GNU Bourne-Again SHell'},
                {menu_name: 'cat', menu_desc: 'concatenate and print files'},
                {menu_name: 'date', menu_desc: 'display or set date and time'},
                {menu_name: '...', menu_desc: 'other files'}
            ]},
            {menu_name: 'boot', menu_desc: 'Static files of the boot loader'},
            {menu_name: 'dev', menu_desc: 'Device files'},
            {menu_name: 'etc', menu_desc: 'Host-specific system configuration'},
            {menu_name: 'lib', menu_desc: 'Essential shared libraries and kernel modules'},
            {menu_name: 'media', menu_desc: 'Mount point for removable media'},
            {menu_name: 'mnt', menu_desc: 'Mount point for mounting a filesystem temporarily'},
            {menu_name: 'opt', menu_desc: 'Add-on application software packages'},
            {menu_name: 'sbin', menu_desc: 'Essential system binaries'},
            {menu_name: 'srv', menu_desc: 'Data for services provided by this system'},
            {menu_name: 'tmp', menu_desc: 'Temporary files'},
            {menu_name: 'usr', menu_desc: 'Secondary hierarchy', items: [
                {menu_name: 'bin', menu_desc: 'user utilities and applications'},
                {menu_name: 'include', menu_desc: ''},
                {menu_name: 'local', menu_desc: '', items: [
                    {menu_name: 'bin', menu_desc: 'local user binaries'},
                    {menu_name: 'games', menu_desc: 'local user games'}
                ]},
                {menu_name: 'sbin', menu_desc: ''},
                {menu_name: 'share', menu_desc: ''},
                {menu_name: '...', menu_desc: 'other files'}
            ]},
            {menu_name: 'var', menu_desc: 'Variable data'}
        ]
       } 
```

输出变为：

```
- root
/bin - Essential command binaries
/bin/arch - print machine architecture
/bin/bash - GNU Bourne-Again SHell
/bin/cat - concatenate and print files
/bin/date - display or set date and time
/bin/... - other files
/boot - Static files of the boot loader
/dev - Device files
/etc - Host-specific system configuration
/lib - Essential shared libraries and kernel modules
/media - Mount point for removable media
/mnt - Mount point for mounting a filesystem temporarily
/opt - Add-on application software packages
/sbin - Essential system binaries
/srv - Data for services provided by this system
/tmp - Temporary files
/usr - Secondary hierarchy
/usr/bin - user utilities and applications
/usr/include -
/usr/local -
/usr/local/bin - local user binaries
/usr/local/games - local user games
/usr/sbin -
/usr/share -
/usr/... - other files
/var - Variable data 
```

* * *

## 回答 #14

> 赞同：-3
> 
> 时间：2015-10-20T04:12:24.517

不复杂。

```
<div ng-app="Application" ng-controller="TreeController">
    <table>
        <thead>
            <tr>
                <th>col 1</th>
                <th>col 2</th>
                <th>col 3</th>
            </tr>
        </thead>
        <tbody ng-repeat="item in tree">
            <tr>
                <td>{{item.id}}</td>
                <td>{{item.fname}}</td>
                <td>{{item.lname}}</td>
            </tr>
            <tr ng-repeat="children in item.child">
                <td style="padding-left:15px;">{{children.id}}</td>
                <td>{{children.fname}}</td>
            </tr>
        </tbody>
     </table>
</div> 
```

控制器代码：

```
angular.module("myApp", []).
controller("TreeController", ['$scope', function ($scope) {
    $scope.tree = [{
        id: 1,
        fname: "tree",
        child: [{
            id: 1,
            fname: "example"
        }],
        lname: "grid"
    }];

}]); 
```

# python - python多处理：某些函数完成后不返回（队列材料太大）

> ID：11854519
> 
> 赞同：25
> 
> 时间：2012-08-07T21:39:30.387
> 
> 标签：python, queue, multiprocessing

我正在使用多处理的进程和队列。我并行启动了几个函数，并且大多数函数都表现良好：它们完成，它们的输出进入它们的队列，它们显示为 .is_alive() == False。但是由于某种原因，一些函数没有运行。它们总是显示 .is_alive() == True，即使在函数的最后一行（打印语句说“完成”）完成之后也是如此。无论我启动了哪些功能，都会发生这种情况，即使它只有一个。如果不并行运行，则函数运行良好并正常返回。什么*样*的事情可能是问题？

这是我用来管理作业的通用函数。我没有展示的只是我传递给它的函数。它们很长，经常使用 matplotlib，有时会启动一些 shell 命令，但我无法弄清楚失败的命令有什么共同点。

```
def  runFunctionsInParallel(listOf_FuncAndArgLists):
    """
    Take a list of lists like [function, arg1, arg2, ...]. Run those functions in parallel, wait for them all to finish, and return the list of their return values, in order.   
    """
    from multiprocessing import Process, Queue

    def storeOutputFFF(fff,theArgs,que): #add a argument to function for assigning a queue
        print 'MULTIPROCESSING: Launching %s in parallel '%fff.func_name
        que.put(fff(*theArgs)) #we're putting return value into queue
        print 'MULTIPROCESSING: Finished %s in parallel! '%fff.func_name
        # We get this far even for "bad" functions
        return

    queues=[Queue() for fff in listOf_FuncAndArgLists] #create a queue object for each function
    jobs = [Process(target=storeOutputFFF,args=[funcArgs[0],funcArgs[1:],queues[iii]]) for iii,funcArgs in enumerate(listOf_FuncAndArgLists)]
    for job in jobs: job.start() # Launch them all
    import time
    from math import sqrt
    n=1
    while any([jj.is_alive() for jj in jobs]): # debugging section shows progress updates
        n+=1
        time.sleep(5+sqrt(n)) # Wait a while before next update. Slow down updates for really long runs.
        print('\n---------------------------------------------------\n'+ '\t'.join(['alive?','Job','exitcode','Func',])+ '\n---------------------------------------------------')
        print('\n'.join(['%s:\t%s:\t%s:\t%s'%(job.is_alive()*'Yes',job.name,job.exitcode,listOf_FuncAndArgLists[ii][0].func_name) for ii,job in enumerate(jobs)]))
        print('---------------------------------------------------\n')
    # I never get to the following line when one of the "bad" functions is running.
    for job in jobs: job.join() # Wait for them all to finish... Hm, Is this needed to get at the Queues?
    # And now, collect all the outputs:
    return([queue.get() for queue in queues]) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-07T22:46:56.343

好吧，当函数的输出太大时，用于填充队列的管道似乎被堵塞了（我粗略的理解？这是一个未解决/关闭的错误？[http://bugs.python.org/issue8237](http://bugs.python.org/issue8237)）。我已经修改了我的问题中的代码，以便有一些缓冲（在进程运行时定期清空队列），这解决了我所有的问题。所以现在这需要一组任务（函数及其参数），启动它们，并收集输出。我希望它看起来更简单/更干净。

编辑（2014 年 9 月；2017 年 11 月更新：为了可读性而重写）：我正在使用我此后所做的增强来更新代码。新代码（功能相同，但功能更好）在这里： [https ://gitlab.com/cpbl/cpblUtilities/blob/master/parallel.py](https://gitlab.com/cpbl/cpblUtilities/blob/master/parallel.py)

调用描述也在下面。

```
def runFunctionsInParallel(*args, **kwargs):
    """ This is the main/only interface to class cRunFunctionsInParallel. See its documentation for arguments.
    """
    return cRunFunctionsInParallel(*args, **kwargs).launch_jobs()

###########################################################################################
###
class cRunFunctionsInParallel():
    ###
    #######################################################################################
    """Run any list of functions, each with any arguments and keyword-arguments, in parallel.
The functions/jobs should return (if anything) pickleable results. In order to avoid processes getting stuck due to the output queues overflowing, the queues are regularly collected and emptied.
You can now pass os.system or etc to this as the function, in order to parallelize at the OS level, with no need for a wrapper: I made use of hasattr(builtinfunction,'func_name') to check for a name.
Parameters
----------
listOf_FuncAndArgLists : a list of lists 
    List of up-to-three-element-lists, like [function, args, kwargs],
    specifying the set of functions to be launched in parallel.  If an
    element is just a function, rather than a list, then it is assumed
    to have no arguments or keyword arguments. Thus, possible formats
    for elements of the outer list are:
      function
      [function, list]
      [function, list, dict]
kwargs: dict
    One can also supply the kwargs once, for all jobs (or for those
    without their own non-empty kwargs specified in the list)
names: an optional list of names to identify the processes.
    If omitted, the function name is used, so if all the functions are
    the same (ie merely with different arguments), then they would be
    named indistinguishably
offsetsSeconds: int or list of ints
    delay some functions' start times
expectNonzeroExit: True/False
    Normal behaviour is to not proceed if any function exits with a
    failed exit code. This can be used to override this behaviour.
parallel: True/False
    Whenever the list of functions is longer than one, functions will
    be run in parallel unless this parameter is passed as False
maxAtOnce: int
    If nonzero, this limits how many jobs will be allowed to run at
    once.  By default, this is set according to how many processors
    the hardware has available.
showFinished : int
    Specifies the maximum number of successfully finished jobs to show
    in the text interface (before the last report, which should always
    show them all).
Returns
-------
Returns a tuple of (return codes, return values), each a list in order of the jobs provided.
Issues
-------
Only tested on POSIX OSes.
Examples
--------
See the testParallel() method in this module
    """ 
```

# python - numpy中带有数组索引的嵌套循环

> ID：11854522
> 
> 赞同：1
> 
> 时间：2012-08-07T21:39:59.167
> 
> 标签：python, numpy

我想知道如何执行以下操作：

```
def GetFlux(self, time):
    bx = self.GetField("bx", time) * self.wpewce
    by = self.GetField("by", time) * self.wpewce
    bz = self.GetField("bz", time) * self.wpewce              

    flux  = np.zeros((self.ncells[0]+1,self.ncells[1]+1),"float32", order='FORTRAN')
    flux2  = np.zeros((self.ncells[0]+1,self.ncells[1]+1),"float32", order='FORTRAN')

    dx = self.dl[0]
    dz = self.dl[1]

    nx = self.ncells[0]
    nz = self.ncells[1]

    j = 0

    for i in np.arange(1, nx):
        flux2[i,0] = flux2[i-1,0] + bz[i-1,0]*dx
    flux[1:,0] = flux[0,0] + np.cumsum(bz[:-1,0]*dx)

    for j in np.arange(1,nz):
        flux2[0,j] = flux2[0,j-1] - bx[0,j-1]*dz
    flux[0,1:] = flux[0,0] - np.cumsum(bx[0,:-1]*dz)

    for i in np.arange(1,nx):
        for j in np.arange(1,nz):
            flux2[i,j] = 0.5*(flux2[i-1,j] + bz[i-1,j]*dx) + 0.5*(flux2[i,j-1] - bx[i,j-1]*dz)

    return flux2 
```

但是没有两个嵌套循环，这需要很长时间。`Bx`,`Bz`和`flux`是相同大小的数组。

我已经设法用数组索引和 cumsum 替换了前两个单循环，但我不知道如何替换嵌套循环。

任何的想法 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:17:41.980

内循环矢量化相当简单。你有一个看起来像这样的基本方程：

```
X[n] = a * X[n-1] + b[n] 
```

这个方程可以扩展和重写，而不依赖于 X[n-1]：

```
X[n] = a^n * X[0] + a^(n-1) * b[0] + a^(n-2) * b[1] + ... + a^0 * b[n] 
```

因此，如果原始代码如下所示：

```
for i in np.arange(1,nx+1):
    for j in np.arange(1,nz+1):
        flux2[i,j] = 0.5*(flux2[i-1,j] + bz[i-1,j]*dx) \
                   + 0.5*(flux2[i,j-1] - bx[i,j-1]*dz) 
```

你可以像这样摆脱内部循环：

```
a = 0.5
aexp = np.arange(nz).reshape(nz, 1) - np.arange(nz).reshape(1, nz)
abcoeff = a**aexp
abcoeff[aexp<0] = 0
for i in np.arange(1,nx+1):
    b = 0.5*flux2[i-1, 1:] + 0.5*bz[i-1, 1:]*dx - 0.5*bx[i,:-1]*dz
    bvals = (abcoeff * b.reshape(1, nz)).sum(axis=1)
    n = np.arange(1, nz+1)
    x0 = flux2[i, 0]
    flux2[i, 1:] = a**n * x0 + bvals 
```

由于浮点错误，这些值不会*完全相同，但足够接近。*我想理论上你可以应用相同的过程来摆脱两个循环，但它会变得非常复杂，并且根据你的数组的形状，可能不会提供太多的性能优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T19:26:53.777

有可能（ab）使用 scipy.ndimage.convolve 来解决这类问题。也许在 scipy 中使用一些过滤器方法也可以工作并且更好，因为它不依赖 scipy.ndimage.convolve 就地工作（我可以想象在遥远的将来会发生这种变化）。（编辑：首先写 scipy.signal.convolve 就像 numpy.convolve 一样，不能这样做）

诀窍是这个 convolve 函数可以就地使用，所以双 for 循环：

```
for i in xrange(1, flux.shape[0]):
    for j in xrange(1, flux.shape[1]):
        flux[i,j] = 0.5*(flux[i-1,j] + bz[i-1,j]*dx) + 0.5*(flux[i,j-1] - bx[i,j-1]*dz) 
```

可以替换为（对不起，需要这么多临时数组...）：

```
from scipy.ndimage import convolve
_flux = np.zeros((flux.shape[0]+1, flux.shape[1]+1), dtype=flux.dtype)
temp_bx = np.zeros((bx.shape[0]+1, bx.shape[1]+1), dtype=bx.dtype)
temp_bz = np.zeros((bz.shape[0]+1, bz.shape[1]+1), dtype=bz.dtype)

_flux[:-1,:-1] = flux
convolve(_flux[:-1,:-1], [[0, 0.5], [0.5, 0]], _flux[1:,1:])

temp_bz[1:,1:-1] = bz[:,1:]*dx
temp_bx[1:-1,1:] = bx[1:,:]*dz

conv_b = np.array([[0.0, 0.5], [0.5, 0.5]])
convolve(temp_bz[:-1,:-1], [[0.5, 0.5], [0.5, 0.]], temp_bz[1:,1:])
convolve(temp_bx[:-1,:-1], [[-0.5, 0.5], [0.5, 0.]], temp_bx[1:,1:])

flux = _flux[:-1,:-1] + temp_by[:-1,:-1] + temp_bx[:-1,:-1] 
```

不幸的是，这意味着我们需要弄清楚 bx, bz 如何进入最终结果，但是这种方法避免了产生大的 2 次幂，并且应该比之前的答案明显更快。

（请注意，numpy convolve 函数不允许这种就地使用。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-20T16:26:17.430

使用convolve的方法很好，但是stencil做的方式不明显……如果这条线

```
flux[i,j] = 0.5*(flux[i-1,j] + bz[i-1,j]*dx) + 0.5*(flux[i,j-1] - bx[i,j-1]*dz) 
```

被替换为

```
flux[i,j] = a*flux[i-1,j] + b*bz[i-1,j] + c*flux[i,j-1] - d*bx[i,j-1] 
```

我认为第一个卷积（在_flux上）将使用模板[[0，a]，[b，0]]。但是，假设 a、b、c 和 d 是标量，那么 bz 和 bx 的另外 2 个模板是什么？

# python - 使用 python 检查传入视频的质量

> ID：11854528
> 
> 赞同：0
> 
> 时间：2012-08-07T21:41:06.547
> 
> 标签：python, opencv

我是 python 和一般编程的新手。我想知道是否有一种方法可以验证您正在获取视频源，而不仅仅是来自来电的黑屏。我已经用 Python 自动化了一个脚本，它可以拨打电话并接听电话，但我们正在测试的一些问题是我们多久出现一次黑屏而不是视频通话。我一直在阅读 OpenCV 并对其进行了一些尝试，但与我正在寻找的结果相去甚远。python中还有另一种检测视频的方法吗？如果是这样，我将不胜感激被指出正确的方向。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-04T18:24:30.600

我在 OpenCV 中用 C++ 做类似的事情。有几种方法可以解决这个问题。我使用 TCP/IP 协议 - 确保没有丢包。接下来，为了测试质量，我发送和接收一个视频文件（我从相机录制的），而不是从相机流式传输“新”视频。现在，我可以通过检查每帧接收到的字节来检查质量。

这可能不是最佳的，但它是一个起点。

# c++ - 函数参数中的新运算符

> ID：11854529
> 
> 赞同：2
> 
> 时间：2012-08-07T21:41:15.223
> 
> 标签：c++, class, operator-keyword, base

我有一个函数，该函数接受一个类指针。问题是我这样调用类指针。

```
Function (new ChildClass); 
```

该函数看起来像这样

```
void Function (BaseClass *instance)
{
    childClassInstance = instance;
} 
```

我用 new 关键字调用它的原因是因为我需要它在我的函数之外。我想知道的是。当我准备好删除实例时。我该怎么办？既然它在函数参数中，我将如何调用它以删除它？或者我如何能够访问它在内存中的位置以便能够删除它？

如果这是不可能的，那么更好的解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T21:45:27.063

这是可能的，但也有更好的解决方案。**使用 RAII。**或者通过引用传递参数：

```
void Function (BaseClass& instance);
//...
ChildClass c;
Function(c); 
```

即使您确实保留了一个指针，也不必创建一个新实例`new`来将指针作为参数传递：

```
ChildClass c;
Function(&c); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T21:44:19.137

您可以在调用函数之前声明一个变量来存储指针。然后，您可以在函数返回后将其删除。

```
ChildClass *c = new ChildClass;
Function(c);
delete c; 
```

但是，如果这是您的习惯用法，那么只需使用自动实例。然后，当它超出范围时，您的对象将被自动删除。

```
ChildClass c;
Function(&c); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T21:48:17.290

如果您使用 new 创建一个对象，那么您必须将该指针保存在某处，以便以后删除它。没有其他选择。但这是使指针变得棘手的原因之一，因此您应该尽可能避免使用它们。您可以像其他人所说的那样避免使用 new ，或者您可以使用*智能指针*来自动为您删除对象。

# javascript - Javascript - e（事件）在Firefox中未定义

> ID：11854532
> 
> 赞同：0
> 
> 时间：2012-08-07T21:41:54.357
> 
> 标签：javascript, slider

我收到一个错误：`e is undefined`在 Firefox 上运行我的 javascript 滑块代码时。在 Chrome 上，它就像一个魅力。

我一直在寻找答案并找到了一些帖子和答案（即使是这个：[Windows.event is undefined -Javascript error in firefox](https://stackoverflow.com/questions/2116177/windows-event-is-undefined-javascript-error-in-firefox)）

但是，我没有成功在我的代码中实现该解决方案，并且总是遇到更多`e is undefined`错误。想得到如何解决它的建议。

我的js代码：（专注于`this.sliderMove function`）

```
(function(){
    function reallyNiceSlider(obj){
        /* From how far the mouse starts affecting the item? in pixels */
        this.range = {min: 2, max: 200};
        /* how smooth would the transition be? Every step is another call of the interval function before getting to the final goal */
        this.steps=5;
        /* A variable to hold the index of our interval function */
        this.t=-1;
        /* 2 dimensional array: targets[i][0] = goal width of object; targets[i][1] = step size; targets[i][2] = the object; targets[i][3] = saving the width of the object; targets[i][4] = Width when mouse is out of range */
        this.targets = new Array();
        /* The object of the slider */
        this.slider = obj;
        /* max and min sizes */
        this.values = {min: 80, max: 130}
        /* safe range */
        this.safe = 0;

        this.sideMargin = 3;

        this.init = function(){
            var children = this.slider.getElementsByTagName('a');
            var selectedObj = null;

            for(var i = 0; i < children.length; i++){
                if(children[i].className == 'selected')
                        selectedObj = children[i];
                children[i].getElementsByTagName('img')[0].style.width = this.values.min + 'px';
                this.targets[i] = Array(-1, 0, children[i], this.values.min, -1);
            }

            if(selectedObj)
                this.sliderPick();
        }

        this.truePosition = function(obj){
            var x=obj.offsetWidth/2, y=obj.offsetHeight/2;
            do{
                x += obj.offsetLeft;
                y += obj.offsetTop;

            }while(obj = obj.offsetParent);

            return {x:x,y:y};
        }

        this.sliderMove = function(obj){
            var e = window.event;
            var range = obj.range;
            var offset, cursor={x:0,y:0}, diff={x:0,y:0,total:0,ratio:0}, opacity, max = range.max+obj.safe, child;
            var selectedObj = null;

            if(e.pageX || e.pageY){
                cursor.x = e.pageX;
                cursor.y = e.pageY;
            }
            else{
                cursor.x = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;
                cursor.y = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;
            }

            for(var i=0; i < obj.targets.length; i++){
                child = obj.targets[i];
                offset = obj.truePosition(child[2].getElementsByTagName('img')[0]);
                diff.x = cursor.x > offset.x ? cursor.x - offset.x : offset.x - cursor.x;
                diff.y = cursor.y > offset.y ? cursor.y - offset.y : offset.y - cursor.y;
                diff.total = Math.sqrt(diff.y*diff.y + diff.x*diff.x);
                if(diff.total < max){
                    max = diff.total;
                    diff.ratio = diff.x / diff.total;
                }

                if(child[2].className == 'selected')
                    selectedObj = child[2];
            }

            if(max <= range.max){

                for(var i=0; i < obj.targets.length; i++){
                    child = obj.targets[i];
                    offset = obj.truePosition(child[2].getElementsByTagName('img')[0]);
                    diff.x = cursor.x > offset.x ? cursor.x - offset.x : offset.x - cursor.x;
                    diff.y = cursor.y > offset.y ? cursor.y - offset.y : offset.y - cursor.y;
                    diff.total = Math.sqrt(diff.y*diff.y + diff.x*diff.x);
                    if(diff.total > range.max) diff.total = range.max;

                    if(diff.total < range.min) diff.total = 0;
                    child[0] = parseInt( obj.values.max - ((diff.total/range.max) * (obj.values.max - obj.values.min) ));
                    if(child[0] > obj.values.max) child[0] = obj.values.max;
                    child[1] = (child[0] - child[3])/this.steps

                    obj.targets[i] = child;
                }

                if(this.t < 0)
                    obj.makeInterval(obj);
            }
            else if(selectedObj && max >= range.max+(obj.safe * diff.ratio))
                obj.sliderPick();

        }

            this.findSize = function(range_obj){
            var range = this.range, values = this.values;
            if(range_obj > range.max) return values.min;

            var range_edge = range.max - range_obj;

            var size_at_point = (values.max - values.min) * ( range_edge / range.max);

            return (range_edge / ((range_edge / size_at_point) + 1)) + values.min;
        }

        this.sliderPick = function(){
            var e = window.event;
            var range = this.range;
            var offset, cursor={x:0,y:0}, diff={x:0,y:0,total:0}, opacity, child;
            var selectedObj;
            var difference = {init: 0, cumulative: 0}, j;

            if(this.safe == 0){
                for(j=0; j < this.targets.length; j++){
                    child = this.targets[j];
                    if(child[2].className == 'selected'){
                        child[0] = this.values.max;
                        child[4] = child[0];
                        child[1] = (child[0] - child[3])/ this.steps;
                        difference.init = (child[0] / 2) + this.sideMargin;
                        this.safe = (child[0] - child[3]) / 2;

                        cursor = this.truePosition(child[2].getElementsByTagName('img')[0]);
                        break;
                    }
                }

                difference.cumulative = difference.init;
                for(var i=j+1; i < this.targets.length; i++){
                    child = this.targets[i];

                    child[0] = parseInt( this.findSize(difference.cumulative) );
                    child[4] = child[0];
                    difference.cumulative += child[0] + this.sideMargin;

                    child[1] = (child[0] - child[3])/this.steps;
                    this.safe += (child[0] - child[3]) / 2;
                }

                difference.cumulative = difference.init;
                for(var i=j-1; i >= 0; i--){
                    child = this.targets[i];

                    child[0] = parseInt( this.findSize(difference.cumulative) );
                    child[4] = child[0];
                    difference.cumulative += child[0] + this.sideMargin;

                    child[1] = (child[0] - child[3])/this.steps;
                    this.safe += (child[0] - child[3]) / 2;
                }

            }
            else{
                for(var i=0; i < this.targets.length; i++){
                    child = this.targets[i];

                    child[0] = child[4];
                    child[1] = (child[0] - child[3])/this.steps

                    this.targets[i] = child;
                }
            }

            if(this.t < 0)
                this.makeInterval(this);
        }

        this.makeStep = function(obj){
            var target, diff, sliderOffset = this.slider.offsetHeight, done=0;

            for(var i = 0; i < obj.targets.length; i++){
                target = obj.targets[i];

                if(target[0] < 0) continue;
                done = 1;
                if(target[1]*target[1] >= (target[0] - target[3])*(target[0] - target[3])){
                    target[3] = target[0];
                    target[0] = -1;
                }
                else
                    target[3] = target[3] + target[1];

                target[2].getElementsByTagName('img')[0].style.width = Math.round(target[3]) + 'px';
                target[2].getElementsByTagName('img')[0].style.marginTop = Math.round( ( sliderOffset - target[2].getElementsByTagName('img')[0].offsetHeight ) / 2 ) + 'px';
                opacity = parseInt(100* (target[3] / this.values.max) );

                target[2].style.opacity=opacity/100;
                target[2].style.filter='alpha(opacity=' + opacity + ')';
            }

            if(done == 0){
                clearInterval(obj.t);
                obj.t = -1;
            }
        }

        this.makeInterval = function(obj){
            obj.t = setInterval(function(){obj.makeStep(obj)}, 40);
        }

        this.init();
    }

    function reallyNice_slider_init(){

        jQuery('.reallyNice_slider').each(function(){
                                    var slider = new reallyNiceSlider(this);

                                    if(document.addEventListener)
                                        document.addEventListener('mousemove', function(){slider.sliderMove(slider)}, false);
                                    else
                                        document.attachEvent('onmousemove', function(){slider.sliderMove(slider)});

                                    this.style.visibility = 'visible';
                                     });
    }

    if(window.addEventListener)
        window.addEventListener('load', reallyNice_slider_init, false);
    else
        window.attachEvent('onload', reallyNice_slider_init);
})(); 
```

**更新 1：**当使用 Firefox 错误的界面时，它会说`e is undefined`并指向下一行： `if(e.pageX || e.pageY){`

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T21:47:13.750

将您的处理程序更改为此...

```
jQuery('.reallyNice_slider').each(function(){
    var slider = new reallyNiceSlider(this);

    if(document.addEventListener)
        document.addEventListener('mousemove', 
                                  function(e){
                                    slider.sliderMove(e, slider)
                                  }, false);
    else
        document.attachEvent('onmousemove', 
                             function(){
                               slider.sliderMove(window.event, slider)
                             });

    this.style.visibility = 'visible';
 }); 
```

然后更改您的函数以接收事件对象作为第一个参数。

```
this.sliderMove = function(e, obj){
  //var e = window.event;  // remove this
    var range = obj.range;
    var offset, cursor={x:0,y:0}, diff={x:0,y:0,total:0,ratio:0}, opacity, max = range.max+obj.safe, child;
    var selectedObj = null; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T21:47:16.100

试试这个：

```
this.sliderMove = function (obj) {
    var e = obj.event || window.event;
    ... 
```

# wix - Wix ProgId 可以设置工作目录吗？

> ID：11854536
> 
> 赞同：1
> 
> 时间：2012-08-07T21:42:22.647
> 
> 标签：wix, wix3.6

我的 wix 文件中有以下代码段。我需要设置工作目录，但 ProgId 似乎不支持这一点。Shortcut 元素具有 WorkingDirectory 属性，但 ProgId 似乎不支持它。还有另一种设置工作目录的方法吗？

```
 <Component>
    <File Source="program.exe" KeyPath="yes" />
    <ProgId Id="Program" Description="Program" Icon="icon.ico" IconIndex="0" Advertise="yes">
      <Extension Id="myfile" Advertise="yes">
        <Verb Id="open" Command="&amp;Open" Argument="&quot;%1&quot;" Sequence="1" />
      </Extension>
    </ProgId>
  </Component> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T22:39:49.203

不，因为 Windows Installer 不支持它。Windows 也不 - 处理程序必须支持从任何目录运行。

# php - Postgresql 搜索超过阈值的项目

> ID：11854547
> 
> 赞同：1
> 
> 时间：2012-08-07T21:43:39.213
> 
> 标签：php, sql, postgresql

似乎这应该是一件简单的事情，但是 postgresql 中的日期/时间操作让我很生气。我要做的就是搜索超过 10 分钟的项目。编码语言是PHP。

字段`event_time`为：timestamp without time zone NOT NULL

```
$sql = "SELECT * FROM incidents WHERE 
        event_time < ( now() - interval '-{$threshold} minutes' )
        AND submitted=0 "; 
```

此查询返回所有结果，而不是超过 10 分钟的项目。我是否需要以某种方式输入该 event_time 字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T21:48:39.147

通过使用负阈值，您将获得双重否定，因此您正在搜索未来不到十分钟的所有内容（这自然会返回所有内容）。只需使用`interval '{$threshold} minutes}'`

# ruby-on-rails - 验证 Rails 中与角色的关联

> ID：11854554
> 
> 赞同：0
> 
> 时间：2012-08-07T21:44:30.890
> 
> 标签：ruby-on-rails, validation, roles

所以我有两个 ActiveRecord 类

```
class User < ActiveRecord::Base
  has_many :buyer_deals, :class_name => "Deal", :foreign_key => :buyer_id
  has_many :seller_deals, :class_name => "Deal", :foreign_key => :seller_id

  validates_presence_of :name # THIS SHOULD ONLY BE RUN IF USER IS A SELLER
                              # IN THE DEAL
  validates_presence_of :phone # THIS SHOULD ONLY BE RUN IF USER IS A BUYER
                              # IN THE DEAL
end

class Deal < ActiveRecord::Base
  belongs_to :seller, :class_name => 'User'
  belongs_to :buyer, :class_name => 'User'

  validates_associated :seller
  validates_associated :buyer
end 
```

我想做的是创造一个新的交易。

```
Deal.create(A NICE STRUCT WITH SELLER AND BUYER) 
```

但是，如果交易的关系是卖家，我只想运行名称验证，如果交易的关系是卖家，我只想运行名称验证，这在 Rails 中是否可行，似乎在文档中找不到任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:00:19.523

您应该能够通过[向您添加条件验证](http://guides.rubyonrails.org/active_record_validations_callbacks.html#using-a-symbol-with-if-and-unless)来做到这一点。

所以，你的`User`班级最终会看起来像......

```
class User < ActiveRecord::Base
  has_many :buyer_deals, :class_name => "Deal", :foreign_key => :buyer_id
  has_many :seller_deals, :class_name => "Deal", :foreign_key => :seller_id

  validates_presence_of :name, :if => :has_an_active_seller_deal?
  validates_presence_of :phone, :if => :has_an_active_buyer_deal?

  def has_active_seller_deals?
    seller_deals.count > 0
  end

  def has_active_buyer_deals?
    buyer_deals.count > 0
  end
end 
```

一种替代方法是简单地要求所有用户在任何时候都有一个姓名和电话号码存档（无条件验证），并且只向他们有活跃交易的其他用户透露，而不是作为用户的一部分公开个人资料，从而尽可能保护用户的隐私。这可能会更简单。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T22:17:02.190

您可以将验证放在回调中：

```
before_save :check_user_type

private
def check_user_type
  user_type = self.responds_to?(seller_id) ? :seller : :buyer
  if user_type == :seller
    validates_presence_of :name 
  else 
    validates_presence_of :phone
  end 
```

# iphone - iPhone - self.view 在 initWithNibName 子类中为零，并且未调用 viewDidLoad

> ID：11854556
> 
> 赞同：0
> 
> 时间：2012-08-07T21:44:40.047
> 
> 标签：iphone, ios, uiview, uiviewcontroller, viewdidload

我有这个级联：

**应用程序中的某处**

```
- (void) go
{
    MyCustomViewController* controller = [[MyCustomViewController alloc] init];
    controller.delegate = self;
    [controller run];
} 
```

**在 MyCustomViewController**

```
- (id) init
{
    // there is an if statement here in real to choose another XIB if needed
    // but I only display here the code that is called in my tests
    self = [super initWithNibName:@"MyXIB" bundle:nil];
    if (!self) return nil;

    self.delegate = nil;

    return self;
}

- (void) run
{
    // do things with self.view
} 
```

MyCustomViewController 继承 GenericWindowController

**在 GenericWindowController**

```
/*- (id) initWithNibName:(NSString*)nibNameOrNil bundle:(NSBundle*)nibBundleOrNil
{
    if (!(self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil])) return nil;

    self.view.userInteractionEnabled = NO;  // THE APP CRASHES HERE ! self.view is nil

    ...

    return self;
}*/

// METHOD created following first answers : NOT CALLED
- (void) viewDidLoad
{
    self.view.userInteractionEnabled = NO;
    // and many other things done with self.view
} 
```

MyXIB 将其文件的所有者设置为 MyCustomViewController，并且视图已连接。
所有文件都包含并签入到项目中。

GenericWindowController 旨在制作一些标准的东西。
MyCustomViewController 扩展了这些东西以使用 MyXIB 中设计的自定义视图。

为什么 self.view 在 GenericWindowController 中为零？
为什么`viewDidLoad`不叫？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:46:14.773

`self.view`仅在之后有效`viewDidLoad`- 在`init...`它仍然是`nil`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T21:46:16.930

视图控制器不应尝试在`initWithNibName:bundle:`. 应该等到`viewDidLoad`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T22:49:45.570

极好的 ！！！问题是因为 XIB 缺少本地化。添加了本地化，没有问题了。

# c# - 计算数组中的交替数

> ID：11854559
> 
> 赞同：7
> 
> 时间：2012-08-07T21:44:48.980
> 
> 标签：c#, algorithm

给定一个整数数组...

```
var numbers = new int[] { 1,2,1,2,1,2,1,2,1,2,1,2,1,2,2,2,1,2,1 }; 
```

我需要确定一个上下交替或上下交替的最大数字序列。

不确定解决这个问题的最佳方法，这个过程 psuedo 明智地让我觉得很简单，但它的具体化代码正在逃避我。

关键是我们正在寻找最大序列这一事实，因此虽然上述数字可以用多种方式解释，例如七个上下上下和七个上下上下的序列，但重要的事实是从第一个数字开始有一个 14 长的 down-up-down 序列。

另外我不应该计算第一项，121 是一个长度为 3 的序列，有人可能会争辩说该序列直到第二个数字才开始，但不要分裂头发。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T22:06:32.923

这似乎可行，它假设数字的长度大于 4（无论如何，这种情况应该是微不足道的）：

```
var numbers = new int[] { 1,2,1,2,1,2,1,2,1,2,1,2,1,2,2,2,1,2,1 };
int count = 2, max = 0;
for (int i = 1; i < numbers.Length - 1; i++)
{

    if ((numbers[i - 1] < numbers[i] && numbers[i + 1] < numbers[i]) ||
                    (numbers[i - 1] > numbers[i] && numbers[i + 1] > numbers[i]))
    {
        count++;
        max = Math.Max(count, max);
    }
    else if ((numbers[i - 1] < numbers[i]) || (numbers[i - 1] > numbers[i])
                || ((numbers[i] < numbers[i + 1]) || (numbers[i] > numbers[i + 1])))
    {
        max = Math.Max(max, 2);
        count = 2;
    }
}
Console.WriteLine(max); // 14 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T22:02:16.850

我现在不是来自带有编译器的电脑，所以我只是尝试一下：

```
int max = 0;
int aux =0;
for(int i = 2 ; i < length; ++i)
{
    if (!((numbers[i - 2] > numbers[i - 1] && numbers[i - 1] < numbers[i]) ||
           numbers[i - 2] < numbers[i - 1] && numbers[i - 1] > numbers[i]))
    {
        aux = i - 2;
    }
    max = Math.Max(i - aux,max);
}
if (max > 0 && aux >0)
    ++max; 
```

注意：应该适用于至少 3 个元素的序列。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T23:49:59.480

这就是我的想法

*   首先，你需要知道你是从高开始还是从低开始。例如：`1-2-1`或`2-1-2`。你甚至可能没有交替对。
*   然后，您随后考虑每个数字，看看它是否属于序列，同时考虑当前方向。
*   每次序列中断时，您都需要通过检查方向重新开始。

我不确定是否有可能在您已经看到的数字中，选择不同的起始数字可能会生成更长的序列。也许有一个定理表明这是不可能的；也许这很明显，我想多了。但我认为这是不可能的，因为一个序列被打破的原因是因为你有两个高点或两个低点，而且没有办法解决这个问题。

我假设以下情况

*   `{}`- 没有元素，返回 0
*   `{1}`- 单个元素，返回 0
*   `{1, 1, 1}`- 没有交替序列，返回 0

对超出 C# 预期的输入没有限制。大概可以浓缩吧。不确定是否有一种方法可以在不明确跟踪方向的情况下捕获方向变化逻辑。

```
static int max_alternate(int[] numbers)
{
  int maxCount = 0;
  int count = 0;
  int dir = 0; // whether we're going up or down

  for (int j = 1; j < numbers.Length; j++)
  {
      // don't know direction yet
      if (dir == 0)
      {
          if (numbers[j] > numbers[j-1])
          {
              count += 2; // include first number
              dir = 1; // start low, up to high
          }
          else if (numbers[j] < numbers[j-1])
          {
              count += 2;
              dir = -1; // start high, down to low
          }
      }
      else
      {
          if (dir == -1 && numbers[j] > numbers[j-1])
          {
              count += 1;
              dir = 1; // up to high
          }
          else if (dir == 1 && numbers[j] < numbers[j-1])
          {
              count += 1;
              dir = -1; // down to low
          }
          else 
          {
              // sequence broken
              if (count > maxCount)
              {
                  maxCount = count;
              }
              count = 0;
              dir = 0;
          }
      }
  }
  // final check after loop is done
  if (count > maxCount)
  {
      maxCount = count;
  }
  return maxCount;
} 
```

以及一些基于我对问题的理解和一些假设的结果的测试用例。

```
static void Main(string[] args)
{

    int[] nums = { 1};            // base case == 0
    int[] nums2 = { 2, 1 };       // even case == 2
    int[] nums3 = { 1, 2, 1 };    // odd case == 3
    int[] nums4 = { 2, 1, 2 };    // flipped starting == 3
    int[] nums5 = { 2, 1, 2, 2, 1, 2, 1 }; // broken seqeuence == 4
    int[] nums6 = { 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 2, 2, 1, 2, 1 }; // long sequence == 14
    Console.WriteLine(max_alternate(nums));
    Console.WriteLine(max_alternate(nums2));
    Console.WriteLine(max_alternate(nums3));
    Console.WriteLine(max_alternate(nums4));
    Console.WriteLine(max_alternate(nums5));
    Console.WriteLine(max_alternate(nums6));
    Console.ReadLine();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T21:51:04.023

可能有很多方法可以解决这个问题，但这里有一个选择：

```
var numbers = new int[] { 7,1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 2, 2, 1, 2, 1 };
int maxCount = 0;
for (int j = 0; j+1 < numbers.Length; j++)
{
    int count = 0;
    if (numbers[j] < numbers[j+1])
    {
        count += 2;
        for (int i = j+2; i+1 < numbers.Length; i += 2)
        {
            if (numbers[i] < numbers[i + 1] )
            {
                count += 2;
            }
            else
            {
                break;
            }
        }
    }
    if (maxCount < count)
    {
        maxCount = count;
    }
}
Console.WriteLine(maxCount);
Console.ReadLine(); 
```

此解决方案假定您需要相同的两个交替数字的序列。如果这不是要求，您可以更改第二个`if`.

现在它已经写出来了，它看起来比我想象的要复杂......也许其他人可以提出更好的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T00:39:15.780

假设至少有 2 个元素。

```
int max = 1;
bool expectGreaterThanNext = (numbers[0] > numbers[1]);
int count = 1;

for (var i = 0; i < numbers.Length - 1; i++)
{
    if (numbers[i] == numbers[i + 1] || expectGreaterThanNext && numbers[i] < numbers[i + 1])
    {
        count = 1;
        expectGreaterThanNext = (i != numbers.Length - 1) && !(numbers[i] > numbers[i+1]);
        continue;
    }
    count++;
    expectGreaterThanNext = !expectGreaterThanNext;

    max = Math.Max(count, max);
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-08-07T22:08:26.230

这适用于任何整数，它跟踪低-高-低和高-低-就像你问的那样。

```
int numbers[] = new int[] { 1,2,1,2,1,2,1,2,1,2,1,2,1,2,2,2,1,2,1 };

   int count = 0;
   int updownup = 0;
   int downupdown = 0;
   for(int x = 0;x<=numbers.Length;x++)
   {
      if(x<numbers.Length - 2)
      {
         if(numbers[x]<numbers[x+1])
         {
          if(numbers[x+1]>numbers[x+2])
           {
           downupdown++; 
            }
         }

    }
}
count = 0;
for(x=0;x<=numbers.Length;x++)
{
  if(x<numbers.Length - 2)
  {
    if(numbers[x]>numbers[x+1]
    {
     if(numbers[x+1]<numbers[x+2])
     {
        updownup++;
        }
    }
    }

} 
```

# asp.net - 在模态表单中编辑时发送到控制器操作时，下拉选择值是“未定义” - jqgrid ASP.NET MVC3

> ID：11854563
> 
> 赞同：0
> 
> 时间：2012-08-07T21:45:09.333
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, jqgrid, jqgrid-asp.net

我在 jqgrid 中有一个下拉选择列，我正在从控制器操作动态填充下拉列表。当我编辑一行并从下拉列表中选择一个值并单击提交时，它会调用 editurl 中指定的控制器操作，但下拉选择列值是“未定义”。我被这个问题困扰了一段时间，请任何建议真的很有帮助。下面是我的javascript代码

```
jQuery("#list").jqGrid({
url: '/Home/Update/',
datatype: 'json',
mtype: 'POST',
colNames: [‘Name’, ‘Position’],
colModel: [
{name: ' Name', index: ' Name', width: 50, align: 'center', editable: true,   
searchoptions: { sopt: ['eq', 'ne', 'cn']} },           
{name: ' Position ', index: ' Position ', width: 75, align: 'center', editable: true, 
 edittype: 'select', formatter:'select',
 editoptions: {
 dataUrl: '/Home/GetNames/',                        
 style: "width: 120px",

 buildSelect: function (data) {
   var response = $.parseJSON(data); 
   var s = '<select>';
   for (var i = 0; i < response.rows.length; i++) {
    var r = response.rows[i];
    s += '<option value="' + r.Id + '">' + r.cell[0] + '</option>';
   }
   return s + "</select>";
  }
},
searchoptions: { sopt: ['eq', 'ne', 'cn']} }],
  ondblClickRow: function (row_id) {
                    jQuery(this).jqGrid('editGridRow', row_id);
                },
                pager: jQuery('#list'),
                height: '100%',
                rowNum: 200,
                sortname: ‘Name’,
                sortorder: "asc",
                editurl: '/Home/Create'
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:30:48.683

我解决了 dataEvents 属性的问题，如下所示：

```
dataEvents: [{
            type: 'change',
            fn: function (e) {
            var i = $(e.target.value);
             }
       }] 
```

希望这可以帮助某人。

# r - 将模型上传到突触

> ID：11854564
> 
> 赞同：0
> 
> 时间：2012-08-07T21:45:13.347
> 
> 标签：r, open-source, machine-learning

我尝试将数据模型上传到 Synapse，但收到以下错误消息（来自远程控制台）：

```
Error in if (grepl("/$", filePath)) { : argument is of length zero In
addition: Warning messages: 1: In file.copy(object$getCacheDir(),
path, recursive = TRUE) : problem creating directory
/home/creighto@bcm.edu/scratch/tmp/RtmpHjLEQh/cacheRoot5e4dbe7c02d/archive.zip_unpacked/.R_OBJECTS:
No space left on device 2: In unzip(filename, exdir = destdir) : error
1 in extracting from zip file. 
```

我的目录也被冻结了，我似乎无法访问文件。我在这里超出了空间限制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:30:53.007

很抱歉，很明显，但看起来你的空间已经用完了：由于空间问题，你无法解压缩文件，所以你无法创建目录。可以减小文件大小吗？

# linux - 如何从运行在 Linux 上的 Free Pascal 应用程序播放 wav 文件？

> ID：11854571
> 
> 赞同：5
> 
> 时间：2012-08-07T21:45:39.790
> 
> 标签：linux, freepascal

我有一个用 Free Pascal 编写的多平台应用程序。此应用程序在某些事件上播放简短的声音。在 Windows 上，我可以通过 MMSystem 和 sndPlaySound('sound.wav') 来做到这一点。但是，我不知道如何在没有外部库的 Linux 上执行此操作。

我有一个使用 SDL 和 OpenAL 播放它的解决方案，但我不希望对这些库有任何依赖来播放一个简短的声音。默认情况下，大多数发行版上是否存在 Linux 命令行播放器？文件格式无关紧要；我会转换它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T21:48:52.340

`mplayer`是命令行和图形。您可以在 tty 和 pty 上启动它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T21:47:46.020

您可以尝试 aplay，但这依赖于 ALSA。也许是索克斯？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T21:51:51.603

该程序`mplayer - "the movie player"`使您可以选择使用图形用户界面或使用控制台。所以我想它可以解决您的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-28T23:52:18.427

您是否正在寻找 BEEP、BLEEP 和 BOOP 和 BOP（以及低频放屁）？使用袜子。如果您要播放文件：使用 sox 或 SDL。

你需要一个 for 循环数组来获得一种钢琴效果，就像一首歌一样。它丑陋，凌乱，不能像 ole PC 扬声器那样调整，但它还过得去。

哔声可能是你想要的。安装软件包，在你的主板上放一个（是的......没有连接？使用 sox），然后启用 pcspkr 模块。（在 ubuntu 上，它默认被列入黑名单。）如果 BEEP 没有产生任何结果，请尝试 sox。

至少你会有所收获。是的，您可以检查已加载的模块和已安装的软件包。我相信我两者都做过。

# google-apps-script - GAS 性能比其他服务器端 JavaScript 慢

> ID：11854575
> 
> 赞同：10
> 
> 时间：2012-08-07T21:46:13.030
> 
> 标签：google-apps-script

在一个从电子表格中获取数据并动态构建多个图表的网站上工作时`Google Sites`，我提到 Google Apps 脚本的运行速度非常慢。我分析了代码并在可能的情况下使用[缓存](https://developers.google.com/apps-script/service_cache)服务对其进行了优化。优化后的图表代码大约需要。3 秒（2759 毫秒是我见过的最快的时间之一）绘制 11 个 127 行的图表。而这一次是针对所有数据都放入缓存的情况。第一次执行时间，即从电子表格中获取数据并将其放入缓存，大约为 10 秒。分析代码在简单的地方需要足够的时间（几十毫秒）。为了测量 GAS 性能，我编写了一个非常简单的程序并在 GAS 环境中执行它，作为部署的 Web 应用程序，并在[卡哈游乐场](http://caja.appspot.com/)。我还向GAS 问题跟踪器提交了一个[问题。](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1678)

[Eric Koleda](https://stackoverflow.com/users/702875/eric-koleda)合理地[提到](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1678#c1)，将服务器代码与客户端上运行的代码进行比较是不正确的。我重写了基准代码，结果如下。详细内容和说明如下。

```
引擎|列表到地图|调整|快速排序|排序|完成|
气体 | 138| 196| 155| 38| 570|
犀牛-1.6.5 | 67| 44| 31| 9| 346|
蜘蛛猴-1.7| 40| 36| 11| 5| 104|

```

*   `GAS`- 一行包含在 GAS 引擎上运行的不同函数的执行时间。所有时间都以毫秒为单位。GAS 执行时间在相当宽的范围内漂移。表中是我执行 5-10 次的最快时间。`Complete`我见过的最糟糕的时间是 1194 毫秒。源代码在[这里](https://script.google.com/a/bastra.com/d/1j9K0wFh_nnqNGb03do0o_MVKXhh0wFPTG-4hSWMcW9ZRgsstTT-Ft4_m/edit)。结果在[这里](https://script.google.com/macros/s/AKfycbzbQ9NRRX8W-E5B9Jb2K4OAeNdm4v0FSzifSXsXdpxXru_U3fE/exec)。
*   `rhino-1.6.5`和- 行包含与使用[ideone.com](http://ideone.com/)在对应的 Javascript 引擎上执行`spidermonkey-1.7`的相同函数的执行时间。这些引擎的代码和时间在[此处](http://ideone.com/dbXpa)和[此处](http://ideone.com/RnFDU)。`GAS`

基准代码包含一些功能。

*   `List To Map [listToMap]`- 将对象列表转换为具有复合键的映射的函数。它取自站点脚本，大约需要。图表代码的 9.2%（256 of 2759 ms）。
*   `Adjust [adjustData_]`- 将矩阵中的所有日期列转换为预定义格式的文本、转置并将行从`[[[a], [1]], [[b], [2]]]`表单转换为单行的函数`[[a, 1], [b, 2]]`。它也取自脚本并消耗大约。30.7%（2759 毫秒中的 857 毫秒）。
*   `Sort`- 一个标准`Array.sort`功能，它包含在测试中，以查看标准功能的工作速度。
*   `Quick Sort [quick_sort]`[-这里](http://en.literateprograms.org/Quicksort_%28JavaScript%29)采用的快速排序功能。它被添加到基准测试中以与`Array.sort`函数执行时间进行比较。
*   `Complete [test]`- 包括函数调用、准备测试数据和上述函数的函数。这一次不是原始时间的总结。

**结论：** GAS 函数执行时间漂移。GAS`Complete`功能的运行速度比最慢的竞争对手慢**1.6倍。**GAS 标准`Array.sort`功能比其他两个引擎中最慢的引擎慢**4倍。**总而言之，`List To Map`该服务比最慢的竞争对手慢**3倍（334 毫秒对 111 毫秒）。**这些函数占用了图表函数的 39.2%（2759 毫秒的 1113 个）。没想到这些功能运行的这么慢。可以优化它们，例如，使用缓存。假设优化后，这些函数的执行时间为0 ms。在这种情况下，图表函数的执行时间为 1646 毫秒。`Adjust`

 ****愿望：**如果 GAS 团队可以将他们的引擎优化到最慢的竞争对手的速度，则可以预期执行时间减少到 1 秒或更短。此外，优化从电子表格中获取数据的时间也会很棒。我了解电子表格并非旨在处理大量数据，但无论如何，它都会提高整体性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:12:46.567

我已经能够复制这种性能，并且我会在收到它们时发布有关该问题的更新。**

# jquery - 使用 Selemium Webdriver 自动化使用 jQuery 拖放的页面

> ID：11854586
> 
> 赞同：0
> 
> 时间：2012-08-07T21:47:11.370
> 
> 标签：jquery, ruby, selenium, automated-tests

当我使用 Selenium 拖放某些东西时，似乎 css 没有更新。

```
 $driver.action.click_and_hold(item).move_by(0 , distanceToDrop).release.perform 
```

拖放工作正常。就像您将其拖到不受支持的位置并弹回一样。据我所知，该页面正在使用 jQuery “sortables”。下面是我试图自动化的页面部分的 HTML。

```
 <p class="hint">Drop and drag the categories to the order they should appear on the screen.</p>

    <div class="sortables " id="yw0">
    <div class="sorted_items" id="4">Sample Inputs</div>
    <div class="sorted_items" id="3">Social Media Information</div>
    <div class="sorted_items" id="2">Numbers of Computers</div>
    <div class="sorted_items" id="1">Category 1</div>
    </div><form id="organize-categories-form" action="/listCustomFieldCategories/index" method="post">  <input type="hidden" id="new_order" name="new_order" value=""/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T07:50:14.100

这似乎是 Selenium-WebDriver 中的一个错误： [http ://code.google.com/p/selenium/issues/detail?id=5149](http://code.google.com/p/selenium/issues/detail?id=5149)

# ruby-on-rails-3 - 在 Rails 3 中，= 和 assign_attributes 有区别吗？

> ID：11854593
> 
> 赞同：5
> 
> 时间：2012-08-07T21:47:40.617
> 
> 标签：ruby-on-rails-3

假设您在您的用户控制器中，并且您想根据您可用的一些参数更改名称 @user。

我想知道以下之间是否有任何区别：

```
@user.name = params[:user][:name] 
```

或者

```
@user.assign_attributes({:name=> params[:user][:name]}) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T22:11:37.593

找出此类问题的一个好方法是深入研究[源代码](https://github.com/rails/rails)。我在`activerecord/lib/active_record/attribute_assignment.rb`[Check it out here 中找到了方法。](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/attribute_assignment.rb)

该`assign_attributes`方法实际上将遍历给定的参数并将`:name=`消息发送到您的模型。但是，因为您可能分配了许多属性，所以它考虑了批量分配的预防措施。（即确保属性列为`attr_accessible`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T22:11:57.397

( `=`eg `@user.name = params[:user][:name]`) 直接调用属性设置器而不进行安全检查。`assign_attributes`检查传入值的安全性。

来自分配属性的 Rails API：

> 允许您通过使用 :as 选项传入具有与属性名称（再次与列名称匹配）和角色名称匹配的键的属性哈希来设置特定批量分配安全角色的所有属性。

[assign_attributes 的来源](https://github.com/rails/rails/blob/32709ea41ed1ec2a89590e9bc6656c1ecd462d30/activerecord/lib/active_record/attribute_assignment.rb#L66)

# objective-c - 导入 .h 文件和继承类之间的区别

> ID：11854599
> 
> 赞同：1
> 
> 时间：2012-08-07T21:47:59.883
> 
> 标签：objective-c, xcode

导入类的头文件和继承类有什么区别？

人.h：

```
#import <Foundation/Foundation.h>

@interface Person:NSObject
{float fromPerson;}
-(void)inPerson;
@end 
```

案例 1 - 在 Employee.h 中导入 Person.h

```
#import "Person.h"

@interface Employee:NSObject
{float fromEmployee;}
-(void)inEmployee;
@end 
```

案例 2 - 将 Person.h 继承到 Employee.h

```
#import <Foundation/Foundation.h>
#import "Person.h"

@interface Employee:Person
{float fromInheritedEmployee;}
-(void)inInheritedEmployee;
@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T21:54:28.573

显然，使用预处理器指令导入是预处理器的工作，它在实际编译之前运行。该指令被解释为“获取 *Person.h*的内容并将它们放在此处”，因此就像您将*Person.h*的内容复制并粘贴到*Enployee.h*中一样。

实际上，这使编译器知道*Employee.h*中包含的定义。因此，如果您使用`Employee` 类的对象（在*Employee.h*中声明），它将知道如何处理它。

这与继承无关，这是一个完全不同的过程，您应该仔细查看您最喜欢的 OOP 书籍或文档。

文件名是完全独立的，不要让它欺骗你。*Person.h* 可以称为*Being.h*并包含更高等生物的类定义，所有这些都在同一个文件中，然后导入它会将其定义放在文件 *Employee.h*中，这绝不会影响从哪个类 `Employee`继承。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T21:50:23.363

导入头文件只是将其内容复制到当前文件，例如声明、宏、枚举等。

继承一个类意味着你现在声明的类是继承类的子类，例如Employee是一个Person。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T22:41:59.800

## #include 与 #import 的入门

导入（或包含）文件类似于在#import 语句的位置注入该文件的内容。

### 有趣的细节：

在 Objective-C 中，#import 比普通的 C #include 更智能，因为如果一个文件之前已经被注入到嵌入的#import 链中，那么它将不会再次被注入。普通的 C（预处理器）#include 不够聪明，无法弄清楚这就是为什么你总是看到像这样的结构

```
 #ifndef __FOO_H
   #define __FOO_H

   .... header content here ...

   #endif /*__FOO_H */ 
```

在 C 标头中确保单一包含，而您在目标 C 中看不到这样的构造。

这就是全部内容`#import`：内容注入机制。

所以，以你自己的例子为例，假设我想创建 Person 类的一个实例，我必须先#import 它的定义才能做到这一点。：

```
 /* main.m */

  #import "Person.h"

  int main(int argc, char *argv[]) {

            Person *person = [[Person alloc] init];  
            //^^^^^^^^ this won't work without the #import statement
            [person release];
            return 0;
  } 
```

请注意，没有任何东西被继承，#import 只是`Person`在我们的 main.m 中注入使用该类所需的所有部分

# 继承入门

正如您可能已经知道的那样，继承是一种将新类定义为另一个类的扩展的机制。通常，新类是父类的子类（想想动物王国），但并非总是如此。

在您自己的示例中，您将 Employee 定义为 Person 的子类。

## 那么继承与#import 有什么关系呢？

好吧，为了将类用于您需要#import 其定义的*任何内容*，以便编译器知道您在说什么时说什么`Person`，这包括（双关语）创建派生类。

# java - 将新添加的项目动画到我的列表视图？

> ID：11854604
> 
> 赞同：3
> 
> 时间：2012-08-07T21:48:22.067
> 
> 标签：java, android

我有一个适配器，可以在手机上显示 SMS / MMS 消息。我正在尝试为发送或接收的新消息制作动画。而不是只出现在列表中的消息项，我想将一条新消息动画到列表视图中。这是一个类似于我想要完成的视频

[Listview 动画视频](https://www.youtube.com/watch?v=LFDdgRncLQQ)

我知道我可以将动画应用到适配器的 getView() 方法中，但我只想为新消息设置动画。有人知道我这样做的可能方法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T23:39:35.547

您可以使用[Layout Transitions](http://developer.android.com/reference/android/animation/LayoutTransition.html)来做到这一点。[这个链接](http://android-developers.blogspot.com.br/2011/11/android-40-graphics-and-animations.html)也可以帮助你。但是这个类只在 API Level 11+ 上可用，所以如果你想提供对早期 android API Levels 的兼容性，你必须尝试一些不同的东西。

# iphone - Facebook SSOw 登录和发布图片不起作用。

> ID：11854606
> 
> 赞同：0
> 
> 时间：2012-08-07T21:48:29.250
> 
> 标签：iphone, ios, facebook, login, sdk

我会尽量深入。我按照 Facebook 开发网站上的指南进行操作，最终得到以下代码：

在我的 AppDelegate.h 中：

```
@interface AppDelegate : UIResponder <UIApplicationDelegate, FBSessionDelegate> {
...    
Facebook *facebook;
}
@property (nonatomic, retain) Facebook *facebook; 
```

在 AppDelegate 实现中，我指定了 facebook appid 等。

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    return [facebook handleOpenURL:url]; 
}

- (void)fbDidLogin {
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:[facebook accessToken] forKey:@"FBAccessTokenKey"];
    [defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];
    [defaults synchronize];

}
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.menuViewController = [[MenuViewController alloc] init];
    UIView *menuView = self.menuViewController.view;

    facebook = [[Facebook alloc] initWithAppId:@"172938549507285" andDelegate:self];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if ([defaults objectForKey:@"FBAccessTokenKey"] 
        && [defaults objectForKey:@"FBExpirationDateKey"]) {
        facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
        facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
    }

    if (![facebook isSessionValid]) {
        [facebook authorize:nil];
    }
    ... 
} 
```

并且以防我的应用程序从未关闭，我在以下位置实现了相同的方法：

```
- (void)applicationWillEnterForeground:(UIApplication *)application
{   

    facebook = [[Facebook alloc] initWithAppId:@"172938549507285" andDelegate:self];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if ([defaults objectForKey:@"FBAccessTokenKey"] 
        && [defaults objectForKey:@"FBExpirationDateKey"]) {
        facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
        facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
    }

    if (![facebook isSessionValid]) {
        [facebook authorize:nil];
            NSLog(@"Facebook session is not valid");
    }
    NSLog(@"Application Entering Foreground.. setting segue to login flag");
    [defaults setObject:@"yes" forKey:@"shouldgotologin"];
    [defaults synchronize];

} 
```

然而，即使在实现了这一切之后，我也从来没有打开过 facebook 登录窗口......它从来没有出现过......它以前出现过一次......但我现在在控制台日志中从来没有看到任何东西......我真的没有知道为什么……我很迷茫。有人能帮我吗？请不要将我引导到 Facebook 开发网站……那是我刚从那里来的，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T03:48:01.523

调试代码。

正如克里斯所说，您现在已登录。

if (![facebook isSessionValid]) {

}

在此处放置一个 else 块以确认您已经登录或者可能转到下一个视图控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T00:07:05.793

这听起来像是一个愚蠢的问题，但你说你只看过一次......你确定你现在没有登录吗？

如果您卸载并重新安装该应用程序，您会再次看到它吗？

# node.js - Node.js SQL Server 驱动程序问题 - 如何进行故障排除

> ID：11854607
> 
> 赞同：1
> 
> 时间：2012-08-07T21:48:34.600
> 
> 标签：node.js, node-sqlserver

使用 SQL Server 驱动程序在 Windows 上使用 Node.js 解决此错误的正确方法是什么。

events.js:2549：未捕获错误：42000：[Microsoft][SQL Server Native Client 11.0]语法错误、权限冲突或其他非特定错误

*   它不是 SQL 语句 - 它适用于其他工具 - 例如 .NET
*   似乎不是 SQL 连接信息 - 它适用于其他工具 - 例如 .NET

有什么想法吗？完全卸载 node.js 并重新开始的正确方法是什么。我不认为我上次安装删除了我所有的全局模块。

```
var sql = require('node-sqlserver');
var _ = require('underscore')._;

var connstr = "Driver={SQL Server Native Client 11.0};Server=localhost;" +
            "Initial Catalog=CDDB;Trusted_Connection={Yes}";

sql.open(connstr, function (err, conn) {
    if (err) {
        console.log("Error opening the connection");
        return;
    } else {
        var stmt = "select top 10 * from Client";
        conn.query(connstr, stmt, function (err, results) {
            if (err) {
                console.log("Error running query!");
                return;
            }
            _.each(results, function (row) {
                console.log(row[0]);
            });
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T01:05:03.090

第一个想法：运行您的 node.exe 进程的用户和在您的应用程序池中定义的用户是否相同？或者如果您使用 VS.NET 检查您的代码，您当前的用户帐户是否相同？

排除故障：我会使用 node-inspector - 它允许在你的 node.js 代码上设置断点

安装它： npm install -g node-inspector

运行它： node --debug your-nodeapp-file.js

启动另一个命令行并运行以下程序：node-inspector

抱歉，我没有 SQL Server 来尝试您的代码，无论如何希望这对您有所帮助。

# oauth-2.0 - 我可以将 OAuth 2.0 结果包装在自定义对象中吗？

> ID：11854611
> 
> 赞同：0
> 
> 时间：2012-08-07T21:48:46.700
> 
> 标签：oauth-2.0

我看到 OAuth 以 json 形式返回的示例：

```
 {
          "access_token" : "ya29.AHES6ZSHB-aaa",
          "token_type" : "Bearer",
          "expires_in" : 3600,
          "refresh_token" : "1/LkGHrqtU"
          "scope" : "ALL"
        } 
```

我的问题是，将其包装在自定义对象中是否有任何危害？

即：差异是包含在返回 json 中的强对象名称/包装器。我只想知道这是否仍会被视为“标准”OAuth 提供者。

```
{"OAuthResult":{"access_token":"abc","refresh_token":"123","token_type":"Bearer","expires_in":"3900"}} 
```

我已经阅读了规范，看到你必须包含一个 GET 来获取令牌，但我不记得返回对象是专门指定的？

多谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T07:48:47.067

从当前 (v2-31) OAuth2 草案，第 5.1 节：

> 参数包含在 HTTP 响应的实体主体中，使用 [RFC4627] 定义的“application/json”媒体类型。**通过在最高结构级别添加每个参数，将参数序列化为 JSON 结构**。参数名称和字符串值作为 JSON 字符串包含在内。数值作为 JSON 数字包含在内。参数的顺序无关紧要，可以变化。

所以你不会对这样的回应“标准”。

# menu - Orchard CMS 1.5 导航子菜单

> ID：11854624
> 
> 赞同：3
> 
> 时间：2012-08-07T21:50:50.950
> 
> 标签：menu, orchardcms

果园新手。我一直在寻找有关菜单实际工作方式的一些文档。看来您可以有分层菜单，但我找不到任何关于此的好信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T03:12:17.010

我也花了一段时间才弄清楚这一点。[您可以在此视频](http://channel9.msdn.com/Shows/Web+Camps+TV/Sebastien-Ros-Introduces-Orchard-15)中看到如何创建导航菜单（大约 8:45，但我建议观看整个视频）。

基本上，您需要将一个项目拖放到另一个内容项的下方*和右侧*，以制作嵌套菜单项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T22:16:06.510

是的你可以。从 1.5 开始，您可以从`Navigation`管理屏幕创建分层菜单。可以通过拖放轻松创建项目的层次结构（和重新排序）。

导航屏幕用于定义您的菜单。为了显示定义的菜单，您需要放入`Menu Widget`您选择的区域。创建该小部件时，您需要选择要显示的菜单。除了菜单的选择外，如果您需要更多地自定义显示（例如只显示某个级别），您还可以选择其他一些可选参数。

# windows - 使用 cmd 通过目录中的计数查找文件名

> ID：11854625
> 
> 赞同：0
> 
> 时间：2012-08-07T21:50:59.447
> 
> 标签：windows, cmd

我有一个包含数千个文件的目录，我需要按文件数查找特定的文件名（文件按名称或日期排序）。

有没有一种简单的方法可以使用 cmd 命令来实现它？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T02:54:22.760

如果你想要第 11 个文件，那么你想跳过前 10 个。这是一个简单的批处理文件。更改 FOR IN() 子句中的 DIR 命令以获得所需的结果。

```
@echo off
for /f "skip=10 eol=: delims=" %%F in ('dir /b /a-d') do set "chosenFile=%%F" & goto break
:break
echo The 11th file is %chosenFile%
exit /b 
```

如果您只想在屏幕上列出第 11 个文件，那么您可以在命令行上执行此操作：

```
cmd /c "for /f "skip=10 eol=: delims=" %F in ('dir /b /a-d') do echo %F&exit" 
```

# html - CSS 浏览器兼容性问题 -

> ID：11854627
> 
> 赞同：0
> 
> 时间：2012-08-07T21:51:06.190
> 
> 标签：html, css, cross-browser

在我的 HTML 中，我有这个表格设置，它由每个表格单元格的单独图像组成。我在 div 的底部有一个 < hr /> 中断，将表格与其余内容分开。当我在 Chrome 上测试时，它显示正确，但是在 Firefox 中，换行符没有正确对齐，它被推高了几个像素。

第二个问题是图像。在第二个和第三个表格单元格之间，有一个大约 2px 宽的空白间隙，用于分隔图像。

我不确定这是否是浏览器兼容性问题，但我该如何解决？

[http://jsfiddle.net/Fe7DC/](http://jsfiddle.net/Fe7DC/) - 带有代码的 JSfiddle

```
<div class="fade" id="Latest-Stories">
               <h3 class="section-header"> Son Xəbərlər </h3>
                     <table id="stories-preview" width="330" height="598" border="0" cellpadding="0" cellspacing="0">
                            <tr>
                                   <td id="tablecell1"><a id="link_1"> <img id="img1" src="NewsBarAZ/Article-Nav-Bar2_01.gif"  alt="" /></a></td>
                            </tr>
                            <tr>
                                   <td id="tablecell2"><a id="link_2" ><img id="img2"  src="NewsBarAZ/Article-Nav-Bar1_02.gif" alt="" /> </a></td>
                            </tr>
                            <tr>
                                   <td id="tablecell3"><a id="link_3" ><img id="img3" src="NewsBarAZ/Article-Nav-Bar1_03.gif"  alt="" /></a></td>
                            </tr>
                            <tr>
                                   <td id="tablecell4"><a id="link_4" ><img id="img4" src="NewsBarAZ/Article-Nav-Bar1_04.gif" alt="" /></a></td>
                            </tr>
                            <tr>
                                   <td id="tablecell5"><a id="link_5" ><img id="img5" src="NewsBarAZ/Article-Nav-Bar1_05.gif" alt="" /></a></td>
                            </tr>
                     </table>
   </div>
   <hr />
#Latest-Stories {
    width:1000px;
    height:598px;
    padding-bottom:36px;
    background-color:#FFF;
    padding-left:20px;
}
#stories-preview {
    float:right;
    border-left:2px groove;
    border-right:2px groove;
    border-top:2px groove;
    border-bottom:1px solid #9A9A9A;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:10:45.997

我必须说我不喜欢将表格用于非表格数据，这里可能更适合使用列表。然而，这不是问题。

hr 的实现非常依赖于浏览器，因此我几乎从不使用它（等到你开始在 IE 中测试......）。我的建议是将其替换为具有 .hr 类的 div 并在 css 中根据您的意愿对其进行样式设置。

一个例子：

```
<div class='.hr'></div>

.hr {
  padding-top: 5px;
  border-bottom: 1px solid #000;
  margin-bottom: 5px;
} 
```

如果您对默认边框不满意，您甚至可以使用小图像并沿 x 轴重复它。在这种情况下不要忘记给你的 div 一些高度。

至于图像之间的差距，我对此没有直接的解释。也许它与实际图像有关，可能在顶部或底部有一些透明像素。没有实际的图像很难说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:49:01.553

通常我会在我的 hr 元素中添加 css 样式：

```
line-height: 0.01;  
height: 1pt;  
border: 1pt solid black;  
border-width: 0 0 1pt 0;  
background: transparent; 
```

并且为了避免单元格和行之间的错误间距问题，我通常会在源代码中的标签之间省略所有空格。是的，读起来很困难，但有些浏览器只是拒绝表现。

# extjs - Extjs 4 解释拖放如何实现跨两个网格或树形面板

> ID：11854633
> 
> 赞同：4
> 
> 时间：2012-08-07T21:51:30.283
> 
> 标签：extjs, datagrid, drag-and-drop, extjs4, treepanel

使用 Extjs 4.07

假设我有两个 treePanel，或者更有可能是两个网格。我希望能够在两者之间来回拖动项目。做到这一点需要哪些基本机制？我想看看一些示例代码来演示它是如何完成的。我无法找到适用于 v4 而不是 v3 的有关如何执行此操作的良好文档。我知道有一种简单的方法，并且我发现许多文档解释了这样做的臃肿方法。我不明白 dd 一般是如何实现的。因此，高级概述也很有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T22:21:52.877

网格具有[DragDrop](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.plugin.DragDrop)插件，而树具有[TreeViewDragDrop](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.tree.plugin.TreeViewDragDrop)插件。

如果你想从你的网格或树中拖拽，或者拖拽到你的网格或树中，你包括插件。在网格的情况下，它看起来像这样：

```
Ext.create('Ext.grid.Panel', {

    ...

    viewConfig: {
        plugins: {
            ptype: 'gridviewdragdrop',
            dragText: 'Drag and drop to reorganize'
        }
    },

    ...

}); 
```

包含插件后，您会从组件中获取拖放事件，您可以收听这些事件。完成上面的例子。

```
Ext.create('Ext.grid.Panel', {

    …

    viewConfig: {
        plugins: {
            ptype: 'gridviewdragdrop',
            dragText: 'Drag and drop to reorganize'
        },

        listeners: {
            drop: function(node, data, dropRec, dropPosition) {
                // Do something here.
            }
        }        
    },

    …

}); 
```

[您可以在本示例](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/dd/dnd_grid_to_grid.html)及其相应的[代码](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/dd/dnd_grid_to_grid.js)中看到这完全有效。

据我所知，在 4.07 和 4.1 之间这方面没有任何变化；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:02:47.840

[拖放](http://docs.sencha.com/ext-js/4-1/#!/guide/drag_and_drop)的一般概述

还要检查自定义拖放到网格[http://docs.sencha.com/ext-js/4-1/#!/example/dd/dragdropzones.html](http://docs.sencha.com/ext-js/4-1/#!/example/dd/dragdropzones.html)

一般的想法是，您必须创建 1\. 可拖动元素 在收到 mousedown 事件时。如果是，则返回拖动数据对象。数据对象可以包含任意应用程序数据，但它还应该在 ddel 属性中包含一个 DOM 元素，以提供拖动的代理。2\. drop zone ，你决定在 'onNodeDrop' 事件上做什么

# iphone - 解析 json - 达到最大深度

> ID：11854635
> 
> 赞同：1
> 
> 时间：2012-08-07T21:51:44.693
> 
> 标签：iphone, json, nsarray, sbjson

我想解析超过 500 条评论的 reddit 帖子的评论。比如这个：[http](http://www.reddit.com/comments/xu11o) ://www.reddit.com/comments/xu11o json url是：[http ://www.reddit.com/comments/xu11o.json](http://www.reddit.com/comments/xu11o.json)

我正在使用 SBJson 来实现这一点。当我尝试使用此代码获取 NSArray 时： `NSString* response = [request responseString]; NSArray* responseArray = [response JSONValue];`

我收到此错误消息：`-JSONValue failed. Error is: Input depth exceeds max depth of 32` 将深度更改为更高的数字（例如 100）会使我的应用程序崩溃。

如果 reddit 帖子只有 20 条评论，我会得到 NSArray 并可以成功显示它们。

我必须改变什么才能获得 NSArray？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T00:03:08.953

你试过苹果的[NSJSONSerialization](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html) JSON 解析库吗？有用。

```
 NSString *urlString = @"http://www.reddit.com/comments/xu11o.json";

  NSURL *url = [NSURL URLWithString:urlString];
  NSURLResponse *response = nil;
  NSError *error = nil;
  NSData *data = [NSURLConnection sendSynchronousRequest:
                       [NSURLRequest requestWithURL:url] 
                       returningResponse:&response 
                       error:&error];

  id jsonObj = [NSJSONSerialization JSONObjectWithData:data options:0 error:&error];
  // Do something with jsonObj which is an array. 
```

只需确保在发货前将下载代码切换为异步即可。

最好的祝福。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T21:53:28.390

试试我的 JSON 解析器库，它没有这样的限制：

[http://github.com/H2CO3/CarbonateJSON](http://github.com/H2CO3/CarbonateJSON)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T00:29:09.173

SBJsonParser 的这种“限制”是一项安全功能，可以保护您免受假定的恶意 JSON 的侵害。该限制可通过[maxDepth](http://stig.github.com/json-framework/api/3.1/interfaceSBJsonParser.html#properties)属性进行配置。如您所见，默认值为 32。您可以将其更改为您想要的任何整数值，或者通过将其设置为 0 来关闭最大深度检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-11T22:22:05.617

我对 sbjson 有同样的问题。将 maxDepth (SBJsonParser.m) 更改为 128 解决了这个问题。

# xamarin.ios - 在设备上启动应用程序时启动 MonoTouch / MonoDevelop 调试器？

> ID：11854636
> 
> 赞同：0
> 
> 时间：2012-08-07T21:51:51.083
> 
> 标签：xamarin.ios

在 MonoTouch 中，当我通过设备触摸在设备上启动我的应用程序时，有没有办法自动连接到调试器（而不是让调试器为我启动它）？我想通过应用程序完全退出的推送通知警报触摸调试启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:45:14.917

目前这是不可能的，未来也没有计划。

如果您愿意，请随时提交增强请求，解释您的用例：[http](http://bugzilla.xamarin.com) ://bugzilla.xamarin.com ，我们可能有一天会做出其他决定。

# jquery - 如何根据其具有的类更改隐藏值

> ID：11854639
> 
> 赞同：0
> 
> 时间：2012-08-07T21:51:58.267
> 
> 标签：jquery, html

我有一些标记：

```
 <table>
    <tbody>
        <tr>
            <td>
                <input type="hidden" class="deleted" value="False" />
                <input type="button" class="rtButton" value="RT" />
            </td>                               
        </tr>
        <tr>
            <td>
                <input type="hidden" class="deleted" value="False" />
                <input type="button" class="rtButton" value="RT" />
            </td>                               
        </tr>
        <tr>
            <td>
                <input type="hidden" class="deleted" value="False" />
                <input type="button" class="rtButton" value="RT" />
            </td>                               
        </tr>
    </tbody>
</table> 
```

我想要发生的是，当单击 rtButton 时，同一 td 中的隐藏输入的值更改为 true。

我试图通过以下方式实现这一目标：

```
$(function(){

    $('.rtButton').click(function () {
        $(this).closest('input.deleted').val("True");
        alert( $(this).closest('input.deleted').val())
            });

}); 
```

但是它似乎无法设置该值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T21:54:15.127

您可以使用`siblings()`方法：

无论如何添加演示：http: [//jsfiddle.net/qZBkt/3/](http://jsfiddle.net/qZBkt/3/)

```
$(function(){
    $('.rtButton').click(function () {
        $(this).siblings('input.deleted').val("True");
    });
}); 
```

[`closest()`](http://api.jquery.com/closest/)获取与选择器匹配的第一个元素，从当前元素开始，向上遍历 DOM 树。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T21:57:24.610

或像这样：**工作演示** [http://jsfiddle.net/qZBkt/](http://jsfiddle.net/qZBkt/)

希望这能满足你的事业！`:)`

**代码**

```
$(function() {

    $('.rtButton').click(function() {
        $(this).parent().find('.deleted').val("True");
        alert($(this).parent().find('.deleted').val());
    });

});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T22:03:18.880

[`.closest()`](http://api.jquery.com/closest/)在祖先元素中搜索匹配，使用[`.prev()`](http://api.jquery.com/prev/)或[`.siblings()`](http://api.jquery.com/siblings/)选择输入

```
$(function(){

    $('.rtButton').click(function () {
        $(this).prev('input.deleted').val("True");
        alert( $(this).siblings('input.deleted').val())
            });

}); 
```

[http://jsfiddle.net/naaeM/1/](http://jsfiddle.net/naaeM/1/)

# python - 使用 python 进行 CGI 的问题

> ID：11854640
> 
> 赞同：1
> 
> 时间：2012-08-07T21:52:08.103
> 
> 标签：python, apache, cgi, syntax-error

出于某种原因，我必须在我的 python cgi 脚本中使用分号。此外，它不识别 if 语句的常用语法。

例如，这有效：

```
#! /usr/bin/python

print "Content-type: text/html\n\n";
print "<html>Hello World!</html>"; 
```

但这不起作用：

```
#! /usr/bin/python

print "Content-type: text/html\n\n"
print "<html>Hello World!</html>" 
```

这不起作用：

```
#! /usr/bin/python

print "Content-type: text/html\n\n";
if True:
    print "<html>Hello World!</html>"; 
```

我从最后两个示例中得到 500 个内部服务器错误。我的 apache 错误日志说文件中存在语法问题。我在 OSX 上在 Apache2 上运行它。任何帮助是极大的赞赏！

编辑：所以显然这不是作为 python 脚本处理的。我想我可能已经找到了问题，但我不确定如何解决它。在我的 httpd.conf 中，我在末尾附加了以下几行，我认为它们是问题所在：

```
<Location /cgi-bin>
    SetHandler perl-script
    PerlResponseHandler ModPerl::Registry
    Options ExecCGI
    PerlSendHeader On
    Order allow,deny
    Allow from all
</Location> 
```

我有这些行是为了让我的 cgi-bin 中的一些其他 cgi 脚本与 mod_perl 一起运行。如果这需要更改，它应该是什么样子以便 perl cgi 文件仍将在 mod_perl 下运行，但 python cgi 文件将作为 python 运行？为了清楚起见或以防万一，我的 cgi-bin 中的 perl 文件具有 .cgi 文件扩展名，但我尝试使用的 python cgi 文件具有 .py 文件扩展名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T02:43:48.943

您的 apache 配置被明确设置为在 cgi-bin 目录中运行`Perl`- 这是因为您的语法是“奇怪的” - 它仅在它是 perl 程序时才有效。

`;`以appen结尾的独立打印语句对Python 2.x 和perl 都有效。

从[http://httpd.apache.org/docs/2.2/howto/cgi.html](http://httpd.apache.org/docs/2.2/howto/cgi.html)，这就是使 CGI 正常工作所需的全部内容，而无需强制 perl 来处理它们：

```
<Directory /cgi-bin>
Options ExecCGI
SetHandler cgi-script
</Directory> 
```

# c# - 如何在 .NET MVC3 中截获当前 actionresult 的输出流？

> ID：11854642
> 
> 赞同：5
> 
> 时间：2012-08-07T21:52:09.437
> 
> 标签：c#, asp.net-mvc, pdf-generation, rotativa

您好，感谢您的关注！

## 背景

我正在使用[Rotativa](https://github.com/webgio/Rotativa) pdf 工具将视图 (html) 读入 PDF。它工作得很好，但它本身并不提供将 PDF 保存到文件系统的方法。相反，它只是将文件作为操作的结果返回给用户的浏览器。

这是该代码的样子：

```
public ActionResult PrintQuote(FormCollection fc)
        {
            int revisionId = Int32.Parse(Request.QueryString["RevisionId"]);

            var pdf = new ActionAsPdf(
                 "Quote",
                 new { revisionId = revisionId })
                       {
                           FileName = "Quote--" + revisionId.ToString() + ".pdf",
                           PageSize = Rotativa.Options.Size.Letter
                       };

            return pdf;

        } 
```

此代码正在调用另一个操作结果（“报价”），将其视图转换为 PDF，然后将 PDF 作为文件下载返回给用户。

## 问题

如何截取文件流并将 PDF 保存到我的文件系统。将PDF发送给用户是完美的，但我的客户也希望同时将PDF保存到文件系统中。

有任何想法吗？

谢谢！

马特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T01:39:17.300

我有同样的问题，这是我的解决方案：

您基本上需要向您自己的 URL 发出 HTTP 请求，并将输出保存为二进制文件。简单、没有重载、辅助类和臃肿的代码。

你需要这个方法：

```
 // Returns the results of fetching the requested HTML page.
    public static void SaveHttpResponseAsFile(string RequestUrl, string FilePath)
    {
        try
        {
            HttpWebRequest httpRequest = (HttpWebRequest)WebRequest.Create(RequestUrl);
            httpRequest.UserAgent = "Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)";
            httpRequest.Headers.Add(HttpRequestHeader.AcceptEncoding, "gzip,deflate");
            HttpWebResponse response = null;
            try
            {
                response = (HttpWebResponse)httpRequest.GetResponse();
            }
            catch (System.Net.WebException ex)
            {
                if (ex.Status == WebExceptionStatus.ProtocolError)
                    response = (HttpWebResponse)ex.Response;
            }

            using (Stream responseStream = response.GetResponseStream())
            {
                Stream FinalStream = responseStream;
                if (response.ContentEncoding.ToLower().Contains("gzip"))
                    FinalStream = new GZipStream(FinalStream, CompressionMode.Decompress);
                else if (response.ContentEncoding.ToLower().Contains("deflate"))
                    FinalStream = new DeflateStream(FinalStream, CompressionMode.Decompress);

                using (var fileStream = System.IO.File.Create(FilePath))
                {
                    FinalStream.CopyTo(fileStream);
                }

                response.Close();
                FinalStream.Close();
            }
        }
        catch
        { }
    } 
```

然后在您的控制器内部，您可以这样称呼它：

```
SaveHttpResponseAsFile("http://localhost:52515/Management/ViewPDFInvoice/" + ID.ToString(), "C:\\temp\\test.pdf"); 
```

瞧！该文件在您的文件系统中，您可以双击并打开 PDF，或通过电子邮件将其发送给您的用户，或者您需要的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-18T07:29:11.277

```
 return new Rotativa.ActionAsPdf("ConvertIntoPdf") 
 { 
     FileName = "Test.pdf", PageSize = Rotativa.Options.Size.Letter
 }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T22:22:38.380

看看这里的 MVC 流水线图： [http ://www.simple-talk.com/content/file.ashx?file=6068](http://www.simple-talk.com/content/file.ashx?file=6068)

在呈现 ActionResult 之后调用方法[OnResultExecuted() 。](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.onresultexecuted.aspx)

您可以覆盖此方法或使用[ActionFilter](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionfilterattribute.aspx)来应用和使用属性的 OnResultExecuted 拦截器。

**编辑：** 在[此论坛主题](http://forums.asp.net/t/1664573.aspx/1)的末尾，您将找到一个回复​​，其中给出了一个 ActionFilter 的示例，该示例读取（并更改）一个动作的响应流。然后，您可以将流复制到文件中，并将其返回给您的客户端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-30T14:23:15.587

我成功地使用了 Aaron 的“SaveHttpResponseAsFile”方法，但我不得不改变它，因为当前登录的用户的凭据没有被应用（所以它被转发到 MVC4 的登录 url）。

```
public static void SaveHttpResponseAsFile(System.Web.HttpRequestBase requestBase, string requestUrl, string saveFilePath)
{
    try
    {
        *snip*
        httpRequest.Headers.Add(HttpRequestHeader.AcceptEncoding, "gzip,deflate");
        httpRequest.Headers.Add(HttpRequestHeader.Cookie, requestBase.Headers["Cookie"]);
        *snip*</pre></code> 
```

然后在调用 Controller 方法中，只需将“请求”添加到 SaveHttpResponseAsFile 调用中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-15T15:33:29.683

您也可以使用 Rotativa 来完成，这实际上非常简单。

```
Using Rotativa;

...

byte[] pdfByteArray = Rotativa.WkhtmltopdfDriver.ConvertHtml( "Rotativa", "-q", stringHtmlResult );

File.WriteAllBytes( outputPath, pdfByteArray ); 
```

我在 winforms 应用程序中使用它，从我们也在 Web 应用程序中使用的 Razor Views 生成和保存 PDF。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-02T15:02:08.490

我能够让**Eric Brown-Cal**的解决方案正常工作，但我需要进行一些小调整以防止出现关于**找不到目录**的错误。

（另外，查看 Rotativa 代码，似乎 -q 开关已默认传递，因此可能没有必要，但我没有更改它。）

```
var bytes = Rotativa.WkhtmltopdfDriver.ConvertHtml(Server.MapPath(@"/Rotativa"), "-q", html); 
```

# random - 随机性的公共来源

> ID：11854644
> 
> 赞同：6
> 
> 时间：2012-08-07T21:52:45.817
> 
> 标签：random

我想设置“公共彩票”，每个人都可以看到选择是随机和公平的。如果我只需要一点，我会使用例如当天收盘道琼斯指数的 LSB。问题是，我需要 32 位。我需要一个来源：

*   每日可用
*   对全世界的公众可见
*   不可操纵（由我或其他任何人）
*   不偏不倚
*   简单的

我想我可以选择 32 只股票或股票指数并使用每个股票的 LSB，这至少*难以*操纵，然后通过一些哈希运算来消除任何偏向 0 的偏差，但这并不真正符合“简单的”。其他想法：一些气象或地震数据的提要。这将更难操纵（购买股票比引发地震容易得多），但更难验证（因为没有大量的审计师观察天气数据）。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:10:06.757

查看[http://www.random.org/](http://www.random.org/)他们有一个[第三方抽奖服务部分](http://www.random.org/draws/)

> 第三方抽奖服务对专业经营抽奖、抽奖、促销赠品和其他彩票类型服务的人很有用。与经过认证的官员类似，RANDOM.ORG 充当公正的第三方，以保证公平和真正随机的方式进行绘图。这些图纸是使用来自大气噪声的真正随机性制作的，这在许多方面优于计算机程序中通常使用的伪随机数算法。
> 
> 查看公共记录以获取有关该服务最近保存的图纸的详细信息。

这听起来像您正在寻找的东西，但您最终将不得不依赖 random.org 来获取数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T22:14:07.620

查看 XKCD GeoHashing 算法。MD5（日期，道琼斯开盘）

取决于您想要的“简单”程度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T13:14:02.327

我会采用大量不相关的输入。您可以包括其中的部分或全部：

*   股票价格（最好来自多个位置，例如道琼斯的最后一位数字 + FTSE 的最后一位数字）
*   公开可见的数字温度计读数的最后一位数字（在大城市很容易找到）
*   日期
*   当前 google.com 徽标图像的 MD5 和
*   *<在此处插入电视脱口秀节目名称>*今日剧集收视率最高的嘉宾姓名
**   其他公共彩票*

 *将所有这些连接成一个大字符串并对其应用加密哈希函数。

哈希不会增加总熵，但它会使输出更难操纵（因为攻击者需要同时操纵许多输入。）

现在只取散列的前 32 位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-07T22:50:20.433

将非确定性与随机分开使用第三方服务，该服务流式传输随机数集，并为每个集分配一个 sn。

您在 sn 中设置位数和位数。

现在它以随机集的形式流式传输，并在一个循环中分配了 sn 大小，该循环的大小与您的 sn 一样。保存它，你会得到一组你公开记录的数字

现在您可以选择一个不需要随机的较小数字，只是不确定性来选择一组数字

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T22:05:28.237

在我看来，“全世界公众都可以看到”的部分是最棘手的部分。

真正随机数的一个很好的来源是网络摄像头（或任何其他 CCD 摄像头）上的噪声。这种噪声是由 CCD 板上电子温度的量子涨落引起的，因此它是真正随机的。

您可以使用来自公开可用网络摄像头的照片，但很难找到关闭快门的照片...您可以设置一个并自己提供它，或者您可以使用一个监控某些气象事件并减去时间的照片-每天平均图像。

我希望这很简单！*

# python - Pyramid 应用程序的版权符号

> ID：11854658
> 
> 赞同：2
> 
> 时间：2012-08-07T21:54:19.963
> 
> 标签：python, character-encoding, pyramid

我试图在 Pyramid 应用程序的视图方法的输出中包含版权符号。这是字面上的方法：

```
def get_cpyright(self):
    cpyright = ["My Super App &copy; 2012"]
    if (datetime.datetime.now().year > 2012):
        cpyright.append(" - %d " % datetime.datetime.now().year)
    return " ".join(cpyright) 
```

但是，当它呈现给应用程序时，网页显示：

> 我的超级应用 © 2012

在直接的 web-dev 中，我可以使用`&copy;`或者`&#169;`我会得到 © 字符。在元组中呈现字符串时情况并非如此。

如何让版权符号显示？我在 Pyramid 自己的文档上看到它，所以我知道这是可能的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T22:08:29.263

原因是您的模板变量正在为 HTML 上下文和 © 进行转义。被转义为 &copy;。

如果您使用变色龙模板，您可以使用 ${structure:variable} 来避免在显示时对其进行转义（因为您已经在方法中对其进行了转义）。您还可以将其包装在具有 __html__ 方法的对象中，该方法返回内容。请参阅[在 Pyramid 中，如何从视图返回原始 HTML？](https://stackoverflow.com/questions/7931492/in-pyramid-how-do-i-return-raw-html-from-a-view)了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T21:56:37.147

为什么不[直接制作 Python 文件 unicode](http://docs.python.org/howto/unicode.html#unicode-literals-in-python-source-code)，确保输出的 html 是适当的编码并像这样写版权符号？

```
def get_cpyright(self):
    cpyright = [u"My Super App © 2012"]
    if (datetime.datetime.now().year > 2012):
        cpyright.append(" - %d " % datetime.datetime.now().year)
    return " ".join(cpyright) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T22:01:03.987

弄乱源代码文件中的编码比您想象的要容易。随着时间的推移，尝试在一堆不同的编辑器中打开它，你可能迟早会破坏编码。

我会这样做：

```
print unichr(169) 
```

编辑你的函数我会用这个替换你的第一行：

```
cpyright = ''.join(["My Super App ", unichr(169), " 2012"]) 
```

# ruby - 如何使用 Ruby 的 Faraday 指定网络接口？

> ID：11854660
> 
> 赞同：1
> 
> 时间：2012-08-07T21:54:26.640
> 
> 标签：ruby, networking, curb, faraday

我正在使用封装了各种适配器的[Faraday](https://github.com/technoweenie/faraday)，包括 Net::HTTP、Excon、Typhoeus、Patron 和 EventMachine。我想指定网络接口（例如`en0`或`en1`），但我不确定如何或是否可能。我愿意接受 Ruby 级别或 Linux 级别的答案。

注意：根据[使用 Ruby 和 Curb 从不同网络接口发出 HTTP 请求，使用](http://blog.sosedoff.com/2010/06/09/making-http-requests-from-different-network-interfaces-with-ruby-and-curb/)[Curb](https://github.com/taf2/curb/)可以做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-08T19:54:11.320

我认为使用 Faraday 和 Typhoeus 甚至可以做到这一点：[https](https://github.com/typhoeus/typhoeus/blob/92d19df7af06034ae28996e097676b01301042f5/lib/typhoeus/adapters/faraday.rb#L139) ://github.com/typhoeus/typhoeus/blob/92d19df7af06034ae28996e097676b01301042f5/lib/typhoeus/adapters/faraday.rb#L139 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-13T11:15:34.430

不确定是否可以绑定到特定的网络接口，但使用 Faraday，您可以将请求选项设置`:bind`为`{:host => "<your_ip>", :port => "<your_port>" }`至少指定 IP 地址和端口。

据我所知，em-http、em-synchrony、httpclient 和 typhoeus 适配器尊重这些设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-03T12:38:18.027

我在 Typhoeus（不使用法拉第）和绑定到特定的本地接口时遇到了这个问题。以下对我有用：

```
options = {
  interface: '<ip address>'
}
req = Typhoeus::Request.new("https://example.com/3", options) 
```

# ruby-on-rails - 弹性搜索控制台

> ID：11854662
> 
> 赞同：3
> 
> 时间：2012-08-07T21:54:28.123
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, elasticsearch

是否有任何可用于 ElasticSearch 的控制台界面，类似于 Ruby IRB 或 Rails 控制台？是否有任何 GUI 工具来查询 ElasticSearch？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T22:12:35.470

就在这里。看看这个：[https ://github.com/mobz/elasticsearch-head](https://github.com/mobz/elasticsearch-head)

它不是控制台，而是探索索引数据、查询索引等的界面。

[![](../Images/f735ffef078875db5dc7cd8c451d8fd2.png)](https://i.stack.imgur.com/gOQl3.png)
[（来源：[akamai.net](https://a248.e.akamai.net/camo.github.com/5f01aae07364c95b6c8ddfe39423d6d19932158d/687474703a2f2f6d6f627a2e6769746875622e636f6d2f656c61737469637365617263682d686561642f73637265656e73686f74732f636c75737465724f766572766965772e706e67)）]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T06:29:08.943

即使是 Mozilla Firefox 的 Rest 插件也会对您有所帮助 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T19:39:54.610

Bigdesk 是弹性搜索的另一个控制台选项：

[https://github.com/lukas-vlcek/bigdesk](https://github.com/lukas-vlcek/bigdesk)

![在此处输入图像描述](../Images/8c2b7295be0c959094a76f9485598d56.png)

# log4net - Log4Net - 来自 Apache 的示例在启动时创建 10 个滚动文件（但我的没有）

> ID：11854665
> 
> 赞同：0
> 
> 时间：2012-08-07T21:54:55.133
> 
> 标签：log4net

我在 C# 2.0、consoleapp 下尝试了来自 Apache 的 log4net 示例。它似乎在需要滚动之前创建了 10 个滚动文件。我创建了基本完全相同的应用程序，但我使用 XmlConfigurator.Configure(fileName) 而不是像示例中那样将配置放在 app.config 中。在我的应用程序中，不会提前创建额外的滚动文件。在 Apache 示例中，立即出现了 10 个文件。

有没有其他人注意到这一点？

我可以发布我的应用程序详细信息，但我最感兴趣的是 Apache 示例 C# 控制台应用程序。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:56:47.327

嗬！

这很愚蠢。该示例指定了一个超小的翻转大小。

问题消失了：

```
 <maximumFileSize value="10MB" />
  <maxSizeRollBackups value="10" /> 
```

# javascript - 使用带有同步和 startAt 的 flexslider 的问题

> ID：11854666
> 
> 赞同：0
> 
> 时间：2012-08-07T21:55:04.663
> 
> 标签：javascript, jquery, flexslider

我在同步时使用了 2 个 FlexSlider，一切正常，然后我设置了一个“startAt”参数，并且滑块在第一次更改后停止工作，FF 调试器上没有警报，导航滑块只是停止，另一个仍然工作正常。

JS代码是：

```
$(window).load(function() {
// The slider being synced must be initialized first
  $('.carousel').flexslider({
  animation: "slide",
  controlNav: false,
  animationLoop: true,
  slideshow: false,
  itemWidth: 112,
  itemMargin: 5,
  maxItems: 4,
  startAt: 2,
  asNavFor: '.flexslider'
  });

$('.flexslider').flexslider({
  animation: "slide",
  controlNav: false,
  animationLoop: true,
  slideshow: false,
  startAt: 2,
  maxItems: 4,
  sync: ".carousel"
  });
}); 
```

这是“几乎”[工作页面]。[1](http://pepperbox.com.br/NewPepper/caixas.php?caixa=soft) 非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T18:52:55.363

找到解决方案:)

我遇到了同样的问题，flexslider 在 Firefox 上运行良好，没有错误，但在第一个动画后卡住了。

我终于通过更改滑块中的 animationDuration 属性解决了这个问题。如果它设置为 0-> 设置为 1 或任何其他值不起作用-> 它将再次起作用。

不知道为什么，但它终于奏效了！希望对周围的人有所帮助。

丽莎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T08:06:24.337

对于那些有这个问题的人 - 只需更新 flexslider（下载最新版本）:)

# jquery - 在菜单中放置奇数/偶数列表项

> ID：11854672
> 
> 赞同：0
> 
> 时间：2012-08-07T21:55:49.577
> 
> 标签：jquery, css, menu

我有一个包含 n 个项目的无序列表，应该将其转换为如下[图所示](https://i.stack.imgur.com/3StP9.png)的水平菜单。我能够选择所有奇怪的项目并将它们移动到列表的末尾，创建两个菜单行，但我发现居中相当困难。

![](../Images/91abe0d7d9bfbc92562d33f3a31f7089.png)

我使用过但无法居中的代码：

```
jQuery('#ja-mainnav ul li').css({'float':'left', 'display': 'block', 'margin-left': 'auto', 'margin-right': 'auto' });
jQuery('#ja-mainnav ul li:odd:first').css({'clear':'both', 'margin-left':'40px'});
jQuery('#ja-mainnav ul li:odd').insertAfter('#ja-mainnav ul li:last'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:22:04.807

```
<style type="text/css">
li {
    background:red;
    border:1px solid black;
}
div#ja-mainnav {
    width:150px;
    overflow:hidden;
    text-align:center;
}
</style>
<div id="ja-mainnav">
    <ul>
        <li>Item 1</li>
        <li>Item 2</li>
        <li>Item 3</li>
        <li>Item 4</li>
        <li>Item 5</li>
    </ul>
</div> 
```

和JS

```
jQuery('#ja-mainnav ul li').css({
    'display': 'inline-block'
});
jQuery('#ja-mainnav ul li:odd').insertAfter('#ja-mainnav ul li:last');
} 
```

演示地址：http: [//jsfiddle.net/Tkgjf/](http://jsfiddle.net/Tkgjf/)

# sql-server - 用于显示数据更改历史的 SQL 查询

> ID：11854673
> 
> 赞同：3
> 
> 时间：2012-08-07T21:55:53.753
> 
> 标签：sql-server, sql-server-2008-r2

我在 SQL Server 数据库中有一个表，它每天存储历史数据。结构如下图：

```
UploadDate    TypeID    Value1   Value2
-------------------------------------------
2012-01-08    1         NEG      1998-02-05
2012-01-08    2         NEG      1999-02-09
2012-01-08    3         STABLE   1997-02-06
2012-02-08    1         NEG      1998-02-05
2012-02-08    2         NEG      1999-02-09
2012-03-08    1         POS      2012-03-08
2012-03-08    2         STABLE   2012-01-08 
```

正如您在上面看到的`TypeID`1 和 2，`Value1`并在 2012 年 3 月 8 日`Value2`发生了变化

我的要求是我必须只显示那些从以前的值改变的行。

在这种情况下，因为`TypeID`1 和 2 已经改变，所以它应该显示当前和最接近的先前值。而对于`TypeID`3 因为它没有改变，它只会显示最新的值。结果集如下所示：

```
UploadDate    TypeID    Value1   Value2
-------------------------------------------
2012-01-08    3         STABLE   1997-02-06
2012-02-08    1         NEG      1998-02-05
2012-02-08    2         NEG      1999-02-09
2012-03-08    1         POS      2012-03-08
2012-03-08    2         STABLE   2012-01-08 
```

知道如何使用 SQL 解决这个问题吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-07T23:16:37.527

Uninspired 版本使用有序集合上的自连接来检查相同 typeid 的按时间顺序排列的前一行的值。如果没有前一行或值不同，则输出该行。

```
; with numbered as (
  select *,
         row_number() over (order by typeid, uploaddate) rn
    from table1
)
select n1.*
  from numbered n1
  left join numbered n2
    on n1.TypeID = n2.TypeID
   and n1.rn + 1 = n2.rn
 where (n2.rn is null 
    or n1.value1 <> n2.value1
    or n1.value2 <> n2.value2)
 order by typeid, uploaddate 
```

[这是带有示例的 Sql Fiddle](http://sqlfiddle.com/#!3/5de57/6)。

**更新**：另一个不需要自加入但确实需要 group by 的变体。每个具有相同 typeid、value1 和 value2 的时间线都被赋予唯一的 group_number，稍后用于提取该组的 max(uploaddate)。

```
; with numbered as (
  select *,
         row_number() over (order by typeid, uploaddate)
       - row_number() over (partition by typeid, value1, value2 
                            order by uploaddate) group_number
    from table1
)
select max(uploaddate) uploaddate, typeid, value1, value2
  from numbered
group by typeid, value1, value2, group_number
order by typeid, uploaddate 
```

[另一个 Sql Fiddle](http://sqlfiddle.com/#!3/5de57/16)。

# ruby-on-rails - Rails Rspec 模型规范用户：电子邮件 ActiveRecord::RecordInvalid

> ID：11854674
> 
> 赞同：3
> 
> 时间：2012-08-07T21:55:54.480
> 
> 标签：ruby-on-rails, ruby, rspec

试图找出我的 rspec 测试失败的原因。最值得注意的是看似矛盾的失败消息。说我有一个 ActiveRecord::RecordInvalid 错误，这正是我断言应该发生的。

这是我的 user.rb

```
...
validates_presence_of :email
... 
```

这是我的 users_spec.rb

```
...
it "is invalid without email" do 
  Factory(:user, email: nil).should raise_error(ActiveRecord::RecordInvalid)
end
... 
```

这是输出：

```
Failures:

  1) User a user (in general) is invalid without email
     Failure/Error: Factory(:user, email: nil).should raise_error(ActiveRecord::RecordInvalid)
     ActiveRecord::RecordInvalid:
       Validation failed: Email is invalid, Email can't be blank
     # ./spec/models/user_spec.rb:34:in `block (3 levels) in <top (required)>' 
```

最初我是这样测试的，但它一直失败，所以我决定指定我期望的错误。

```
it "is invalid without email" do 
  Factory(:user, email: nil).should_not be_valid
end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T22:19:41.423

您的代码不起作用的原因是您在实际测试其有效性之前试图创建一个无效模型。您要做的是创建一个有效的模型，更改某些内容并检查它是否无效，如下所示：

```
it "is invalid without email" do 
  user = Factory(:user)
  user.email = nil
  user.should_not be_valid
end 
```

我个人喜欢在一个`before`块中定义我的模型，设置为`subject`然后更改每个规范中的属性并检查有效性，如下所示：

```
before do
  @user = FactoryGirl.create(:user)
end

subject { @user }

it "is invalid without email" do
  subject.email = nil
  should_not be_valid
end 
```

作为记录，如果您想测试记录创建是否引发了错误（这绝对*不是*这样做的可取方法），您可以通过将`Factory`调用包装在 a 中来做到这一点`lambda`，如下所示：

```
lambda {
    Factory(:user, :email => nil)
}.should raise_error(ActiveRecord::RecordInvalid) 
```

# jquery - 单击时淡化背景颜色

> ID：11854676
> 
> 赞同：0
> 
> 时间：2012-08-07T21:56:31.427
> 
> 标签：jquery, jquery-animate, background-color, fade

我正在尝试做一些非常标准的事情：在单击单独的 div 时淡化背景颜色。www.jamesjano.com

单击白色圆圈应该将黑色背景淡化为白色。我试过使用动画，但它不起作用（尽管它正在处理内容框的不透明度）......我已经尝试了一切，但无法弄清楚。奇怪的是，它在本地工作，但不是在现场工作时。任何和所有的帮助将不胜感激。这是我正在使用的代码：

```
 <script type="text/javascript"> 
 $(document).ready(function(){ 
 $("#logo, #sec_log").click(function() { 
    $(".animate").stop().animate({"backgroundColor":"#ffffff"}, 800); },function() { 
    $(".animate").stop().animate({"backgroundColor":"#ffffff"}, 800); 

    }); 
});   

 </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T22:03:18.473

默认的 jQuery 包没有`background-color`动画功能。您必须使用jQuery UI 中的[颜色动画](http://jqueryui.com/demos/animate/)。[这](http://jsfiddle.net/zHv2e/)是一个工作示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T22:05:20.687

阅读 Emre 的答案以了解如何为`background-color`属性设置动画。CSS`opacity`直到 CSS3 才支持 background-colors 的属性。

# .net - 在 API 中使用自定义接口还是众所周知的标准接口更好？

> ID：11854681
> 
> 赞同：0
> 
> 时间：2012-08-07T21:56:54.580
> 
> 标签：.net, api, standards

我有一个简单的界面：

```
public interface IReadOnlyList<T> : IEnumerable<T>
{
    T this[int index] { get; }
    int Count { get; }
} 
```

我的 API 的用户将被迫使用这个接口，而不是他们通常知道的`IList`或`IEnumerable`. 我更喜欢这个，`IList`因为它只公开可以使用的成员。我不希望所有`IsReadOnly` `Add()` `Remove()` `Insert()`未使用的垃圾污染我的 API。我更喜欢这个，`IEnumerable`因为我的用户需要访问索引和计数。这是合理的推理，还是我应该使用更熟悉的`IList`？为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:07:04.530

如果您的类型实际上不会实现 IList 的所有成员，那将是比实现 IList 更好的解决方案。你可以实现 IList 并抛出 NotImplementedException 但是你会违反 Liskov。

# actionscript-3 - 在 AS3 中进行补间以使对象相互环绕

> ID：11854682
> 
> 赞同：0
> 
> 时间：2012-08-07T21:56:59.763
> 
> 标签：actionscript-3, tween, flash-cs6

我试图弄清楚如何在 AS3 中使 2 个对象相互环绕。例如，假设 2 个对象是杯子。我希望它们围绕彼此旋转一圈。另一种看待它的方式是，他们每个人都在同一个圆圈中旅行，但彼此相对，所以看起来他们正在旋转。我需要圆的直径是一个变量。

我已经尝试了很多事情，但似乎无法做到正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:39:54.353

这是一个将围绕另一个精灵的类的快速示例。

```
public class C extends Sprite {
    public var target:Sprite;
    private var curTan:Number = 0;

    public var distance:Number = 200;
    public var speed:Number = .05;
    public var decay:Number = .05;

    public function C(size:Number = 10, color:uint = 0xFF0000, seed:Number = 0) {
        curTan = seed;

        graphics.beginFill(color);
        graphics.drawCircle(0, 0, size);
    }

    public function go(target_:Sprite):void {
        target = target_;
        addEventListener(Event.ENTER_FRAME, tick, false, 0, true);
    }

    protected function tick(e:Event):void {
        x += ((target.x + Math.sin(curTan) * distance) - x) * decay;
        y += ((target.y + Math.cos(curTan) * distance) - y) * decay;

            //if you don't want a decay (only useful if the target is moving) then use this instead:
            //x = target.x + Math.sin(curTan) * distance;
            //y = target.y + Math.cos(curTan) * distance;
        curTan += speed;
    }
} 
```

# string - 不可变字符串的优缺点

> ID：11854683
> 
> 赞同：6
> 
> 时间：2012-08-07T21:57:09.640
> 
> 标签：string, language-agnostic, language-design

一些语言（C# 或 Java）有不可变的字符串，而其他语言（例如 Ruby）有可变的字符串。这些设计选择背后的原因是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T19:28:53.280

不可变字符串之所以好的原因之一是它使 Unicode 支持更容易。现代 Unicode 不再能有效地适应固定大小的数据单元，这会破坏字符串索引和内存地址之间的一一对应关系，这为可变字符串提供了优势。

* * *

过去，大多数西方应用程序使用单字节字符（各种基于 ASCII 的编码，或 EBCDIC...），因此您通常可以通过将字符串视为字节缓冲区来有效地处理它们（就像在传统的 C 应用程序中一样）。

当 Unicode 相当新时，对前 16 位之外的任何内容都没有太多要求，因此 Java 使用双字节字符作为其`String`s（和`StringBuffer`s）。这使用了两倍的内存，并且忽略了超过 16 位的 Unicode 扩展可能出现的任何问题，但在当时很方便。

现在 Unicode 已经不是那么新了，虽然最常用的字符仍然适合 16 位，但你不能假装基本多语言平面就是所有存在的东西。如果您想诚实地声明 Unicode 支持，您需要可变长度字符或更大（32 位？）字符​​单元。

使用可变长度字符，您不能再在 O(1) 时间内索引到任意长度的字符串——除非附加信息，否则您需要从头开始数以找出第 N 个字符是什么。这也扼杀了可变字符串缓冲区的主要优势：无缝修改子字符串的能力。

幸运的是，大多数字符串操作实际上并不需要这种就地修改功能。词法分析、解析和搜索都在顺序、迭代的基础上从头到尾进行。一般的搜索和替换从一开始就没有到位，因为替换字符串不必与原始字符串的长度相同。

* * *

连接大量子字符串实际上也不需要就地修改来提高效率。但是，您确实需要更加小心，因为（正如其他人指出的那样）通过为 N 个部分子字符串中的每一个分配一个新字符串，一个简单的连接循环很容易成为 O(N^2) ......

避免幼稚连接的一种方法是提供一个可变对象`StringBuffer`或`ConcatBuffer`旨在有效进行连接的对象。另一种方法是包含一个不可变的字符串构造函数，它将迭代器带入要（有效）连接的字符串序列。

但是，更一般地说，可以编写一个通过引用有效连接的不可变字符串库。这种字符串通常被称为“[绳索](http://en.wikipedia.org/wiki/Rope_%28computer_science%29)”或“绳索”，表明它至少比组成它的基本字符串重一点，但出于连接目的，它*更*有效，因为它不需要完全重新复制数据！

上面的维基百科链接说“绳索”数据结构是 O(log N) 连接，但 Okasaki 的开创性论文“ [Purely Functional Data Structures](http://www.cs.cmu.edu/~rwh/theses/okasaki.pdf) ”显示了如何在 O(1) 时间内进行连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T22:05:47.543

至少在 Java 的情况下，使字符串不可变的部分原因是为了安全和线程安全。Java 非常重视运行时安全性（它最初的设计目的是允许机顶盒和 Web 浏览器下载和执行远程内容，而不会损害主机系统）。为了帮助提高安全性，字符串是不可变的并且不能被子类化。这意味着 Java 运行时可以传递和接收来自用户的字符串，同时保证字符串的值保持不变（也就是说，攻击者不能子类化字符串，将看似有效的字符串传递给函数，但是然后稍后更改该值以访问错误的数据，或者使用多个线程以使字符串在某一点看起来正确，但稍后会发生突变）。

此外，不变性在多线程系统中具有效率优势，因为不必对字符串进行锁定。它还可以轻松实现子字符串操作，因为许多字符串可以共享相同的底层字符数组，尽管起点和终点不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T22:23:02.003

至于缺点，不可变字符串需要互补的可变数据结构（即字符串缓冲区）以实现经济的附加、重新排序和其他类似操作。

在不可变结构上执行的此类操作将需要不合理数量的资源。

[Lua 编程](http://www.lua.org/pil/)对这个问题有[很好的解释](http://www.lua.org/pil/11.6.html)。

* * *

为了进一步反映，一些语言（如 Common Lisp）同时具有非破坏性和破坏性功能，而另一些语言则同时具有不可变和可变列表（Python）。

引用[一本关于 Common Lisp 的书](http://psg.com/~dlamkins/sl/chapter11.html)：

> 如果作业充满危险，为什么不在语言中省略它呢？有两个原因：表现力和效率。分配是更改共享数据的最清晰方法。并且赋值比绑定更有效。绑定创建一个新的存储位置，该位置分配存储，这会消耗额外的内存（如果绑定永远不会超出范围）或对垃圾收集器征税（如果绑定最终确实超出范围）。

* * *

然而，作为一个反例，许多 JavaScript（具有不可变字符串）解释器在实现级别将字符串视为可变数组。

同样，[Clojure 也有瞬态](http://clojure.org/transients)，它看起来像不可变数据结构上的优雅纯函数，但内部使用可变状态来提高效率。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T22:07:05.573

如果您考虑一下，所有基本数据类型都是不可变的。您不会将整数 10 更改为 11，而是将 10 替换为 11。使字符串基本且不可变，从而允许池化和其他无法进行的优化。

# ruby-on-rails - Rails 未定义的方法 `*' for nil:NilClass in view

> ID：11854688
> 
> 赞同：0
> 
> 时间：2012-08-07T21:57:35.920
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nomethoderror

我在构建新的 Rails 应用程序时遇到问题。

尝试`@invoice.total`在视图中运行时，出现此错误：

```
undefined method `*' for nil:NilClass 
```

但是，`@invoice.total`在控制台中运行。我曾尝试使用 HAML 和/或 ERB 来解决同样的问题。

运行的代码`@invoice.total`在模型中，如下所示：

```
def items_total
  items_total = 0
  self.invoice_items.each do |i|
    items_total += i.price * i.quantity
  end
  items_total
end

# instead of copying this code all of the time
def vat_calc
  (1 + self.vat_rate / 100)
end

def discount_calc
  (1 - self.discount / 100)
end

# total times to add vat on top and remove discount
def total
  items_total * discount_calc * vat_calc
end 
```

发票的增值税率和折扣设置为 0，每个项目（有 3 个）的 inc_vat 为 1。

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:11:32.707

原来我`@invoice_item = @invoice.invoice_items.new`在发票控制器的显示区域而不是`@invoice_item = InvoiceItem.new`在发票项目创建表单中。

它*一直*在工作：/

**谢谢**！

# iphone - 分配给“只读”返回结果...全局 NSString

> ID：11854691
> 
> 赞同：0
> 
> 时间：2012-08-07T21:57:48.450
> 
> 标签：iphone, ios, ipad, readonly, read-write

所以我拥有的是一个我希望能够在另一个类中访问的 NSString。在我的 RootViewController.h 我有：

```
@interface RootViewController : UITableViewController

+(NSMutableString*)MY_STR;

@property (nonatomic, readwrite, retain) NSString *MY_STR;

@end 
```

在我的 RootViewController.m 中：

```
static NSString* MY_STR;

@synthesize MY_STR;

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    //The NSDictionary and NSArray items (listOfItems, etc.) are called at top so don't worry about them

    NSDictionary *dictionary = [listOfItems objectAtIndex:indexPath.section];
    NSArray *array = [dictionary objectForKey:@"MovieTitles"];
    MY_STR = [array objectAtIndex:indexPath.row];

}

+(NSString*)MY_STR{
    return MY_STR;
}

- (void)dealloc {
    [MY_STR release];
    [super dealloc];
} 
```

现在在我的 NewViewController 类中，我想写入 NSString MY_STR 所以在我的 .m 中我有：

```
#import "RootViewController.h"

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    NSDictionary *dictionary = [listOfItems objectAtIndex:indexPath.section];
    NSArray *array = [dictionary objectForKey:@"MovieTitles"];
    [RootViewController MY_STR] = [array objectAtIndex:indexPath.row];
} 
```

但在这一行：

```
[RootViewController MY_STR] = [array objectAtIndex:indexPath.row]; 
```

我收到此错误：“分配给 'readonly' 不允许返回 Objective-c 消息的结果”

任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:02:21.093

属性名称需要以小写字符开头。按照惯例，所有大写名称都是“#defines”。改用“myStr”。

所以这条线是你的问题：

[RootViewController MY_STR] = [数组 objectAtIndex:indexPath.row];

左侧只是返回一个值而不是左值。你需要做的是添加

```
+(void) setMyStr:(NSString*)str
{
   myStr = str; // assumes ARC
} 
```

然后

```
[RootViewController setMyStr:[array objectAtIndex:indexPath.row]]; 
```

您可能还没有接触到键值编码或属性，但是为了方便 ObjectiveC 使用命名约定来完成这些。所有 ivars 都应该以小写字母开头，原因是 setter 使用的变量名的第一个字母大写，并以“set”为前缀。因此，使用“myStr”作为变量名（很好的 CamelCase 示例，同样是 Apple 方式），您有一个“setMyStr:”的设置器。现在在你的情况下，你只在类中使用这两种方法，你真的可以使用你想要的任何方法名称——但它很好地投入实践。当你使用属性，并让编译器为你合成 getter 和 setter 时，它看起来就像上图一样。

# php - 如何从 textarea POST 数据中保留选项卡

> ID：11854692
> 
> 赞同：5
> 
> 时间：2012-08-07T21:57:54.210
> 
> 标签：php, html, whitespace

这是一个简单的问题；我会让它变得简单。

所以我有一个`<textarea name="textarea"> in a <form method="POST">`

```
<?php
$textarea = $_POST['textarea'];

echo nl2br($textarea); 
```

解决维护新线，

但是如何维护 TABS？

tab2tab() 还是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T22:02:44.383

虽然不是为这种特定用途而设计的，但您可以执行以下操作：

```
$textarea = str_replace("\t", "     ", $_POST['textarea']); 
```

或者，如果您想要与空格等效的 HTML：

```
$textarea = str_replace("\t", "&nbsp;&nbsp;&nbsp;&nbsp;", $_POST['textarea']); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T22:08:49.420

您根本不需要`nl2br`，如何告诉浏览器如何处理所有这些空白更成问题：

```
echo "<pre>", htmlspecialchars($textarea), "</pre>"; 
```

就是这样。如果您有兴趣，请参阅[`<pre>`HTML 标签^(*文档*)](https://developer.mozilla.org/en-US/docs/HTML/Element/pre)，它还会告诉您[`white-space`CSS^(*文档。*)](https://developer.mozilla.org/en-US/docs/CSS/white-space)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T22:01:55.823

您应该用 4 s 替换选项卡`&nbsp;`或将选项卡包装在`<pre></pre>`标签中。

# spring - 是否可以在运行时在 Spring 中重新初始化 bean？

> ID：11854693
> 
> 赞同：1
> 
> 时间：2012-08-07T21:57:56.053
> 
> 标签：spring, jms

我们有一个几乎 24x7 在线的 Spring Web 应用程序。此应用程序使用 JMS 发送和接收来自其他系统的消息。在大多数情况下，一切都按预期工作。但是，有时我们会遇到网络故障或后端 JMS 提供程序 (JBOSS 5.1.0.GA) 挂起且必须重新启动的问题。因此，由于各种原因，Web 应用程序失去了与 JMS 提供者的连接。我们能够重新建立连接的唯一方法是重新启动 servlet 容器 (tomcat)。

有没有办法在运行时重新初始化 ConnectionFactory bean？我们在 applicationContext.xml 中定义了以下 bean：

```
 <bean id="jmsConnectionFactory" class="org.springframework.jndi.JndiObjectFactoryBean">
            <property name="lookupOnStartup" value="false" />
        <property name="cache" value="false" />
        <property name="proxyInterface" value="javax.jms.ConnectionFactory" />
            <property name="jndiTemplate">
                    <ref bean="jndiTemplate" />
            </property>
            <property name="jndiName">
                    <value>ConnectionFactory</value>
            </property>
    </bean> 
```

有没有办法重新初始化 bean，以便 bean 重新建立与提供者的连接？我们希望在应用程序运行时执行此操作，并避免重新启动应用程序或 servlet。

这在春天甚至可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T23:13:25.387

您可以将此 connectionFactory 包装在 Spring 提供的 ConnectionFactory - [CachingConnectionFactory 周围](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/jms/connection/CachingConnectionFactory.html)，它支持自动恢复连接。

```
<bean id="connectionFactory" class="org.springframework.jms.connection.CachingConnectionFactory">
    <property name="targetConnectionFactory" ref="jmsConnectionFactory"/>
    <property name="sessionCacheSize" value="5"/>
</bean> 
```

# javascript - 可调整大小的 div 不在包含参数内

> ID：11854700
> 
> 赞同：1
> 
> 时间：2012-08-07T21:58:38.403
> 
> 标签：javascript, jquery

调整中间 div 的大小时，不会停留在`containment`网格右边界的参数内，也不会向左调整大小。

[http://jsfiddle.net/dKuER/8/](http://jsfiddle.net/dKuER/8/)（清晰示例，已更新）

**HTML**

```
<div id='grid'>

    <div class='outline first top'>
        <div class='container'></div>
    </div>
    <div class='outline top'>
        <div class='container resizable'></div>
    </div>
    <div class='outline last top'>
        <div class='container'></div>
    </div>
    <div class='outline first bottom'>
        <div class='container'></div>
    </div>
    <div class='outline bottom'>
        <div class='container'></div>
    </div>
    <div class='outline last bottom'>
        <div class='container'></div>
    </div>

</div> 
```

**JS**

```
$(document).ready(function() {
    $('.resizable').resizable({
        containment: "#grid", // Updated to reflect answer, but wasn't the issue.
        handles: "ne,se,nw,sw"
    });
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T22:02:56.100

尝试：

```
containment: "#grid", 
```

不是禁闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T06:30:13.787

看起来调整大小没有在您为大纲类设置的边距中计算。如果您删除这些，调整大小仍然包含在 #grid 元素中。我不确定您希望如何处理其他所有事情，但我建议绝对定位可调整大小的元素并相对定位 $grid 容器。

# eclipse - 第一次使用 Lua 设置 Eclipse

> ID：11854703
> 
> 赞同：2
> 
> 时间：2012-08-07T21:58:59.883
> 
> 标签：eclipse, lua

我第一次尝试设置[Lua 开发工具/Koneki](http://www.eclipse.org/koneki/ldt/)。我是 Eclipse 的新手，但我之前从命令行制作了一堆 Lua 程序。

希望我的问题是一个通用的 Eclipse 问题，有人可能会提供帮助。

**我做了什么：**

下载 LDT 后，我按照简短的[设置指南](http://wiki.eclipse.org/Koneki/LDT/User_Guide#Execution_Environment)进行操作。我下载了建议的[Lua 5.1 zip](http://sierrawireless.github.com/lua-execution-environments/)。我按照设置指南添加了 5.1 作为执行环境。

**问题：**

我无法运行任何 Lua 项目。当我点击绿色的运行或调试按钮时，Koneki 说“无法启动此选择，并且最近没有启动。” 这似乎是一个通用的 Eclipse 错误。

当我单击“运行”按钮上的下拉箭头时，只有“运行配置”可用，并且在该“运行配置”窗格中我无法添加运行配置，“新建”按钮显示为灰色。

* * *

请有人可以提供有关如何在 Eclipse 中调试或修复此类错误的更多信息吗？我感觉我错过了一些对于了解 Eclipse 的人来说可能很明显的步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:09:20.793

我不将其用作 lua 编译器 - 我使用它来运行嵌入式 lua，因此当我尝试启动控制台脚本时，我得到了与您相同的结果。

这就是我所做的 - 不确定这是否是最好的方法，但它有效

点击运行/外部工具/外部工具配置...弹出对话框放入

```
Name: lua
Location: /usr/local/bin/lua
Working Directory: ${container_loc}
Arguments: ${resource_name} 
```

然后单击绿色的运行下拉菜单并选择运行配置，然后在对话框中单击右侧的添加按钮添加新配置，然后在程序列表下选择 lua。单击应用。

现在，当您选择 main.lua 并单击 play 时，它会运行您选择的 lua 脚本。然后在这样做之后，我想如果我阅读手册并确定会发生什么:-)。单击帮助和帮助内容，然后在帮助中查看“LDT 用户指南”，它会告诉您在那里做什么，比上面的要优雅得多。

希望这会让你开始。干杯。

[更新：我尝试了以下手册，它对我有用。我放了一个打印，选择 main.lua 并单击绿色按钮，它在下面的控制台输出中打印 hello

```
local function main()
 print "hello"
end
main() 
```

[更新2：即使遵循手册，您也不需要外部配置]

# c++ - C++ 使用 getArea() 并访问一个数组来计算圆的面积

> ID：11854706
> 
> 赞同：-1
> 
> 时间：2012-08-07T21:59:12.233
> 
> 标签：c++, arrays, visual-studio-2010, geometry, member-functions

我需要一些帮助来解决以下问题，即使用 getArea() 方法计算出数组中每个圆的区域。如何访问一个数组，然后使用 Circle::getArea() 成员函数计算出圆的面积。

Main.cpp 文件

```
#include <iostream>
#include <cstdlib>
#include <ctime>
using namespace std;

#include "Circle.h"
#include "Random.h"

int main()
{
    // Array 1, below section is to populate the array with random 
    // radius number within lower and upper range
    int CircleArrayOne [5];
    const int NUM = 5;

    srand(time(NULL));

    for(int x = 0; x < NUM; ++x)
    {
        CircleArrayOne[x] = Random::random(1, 40); // assumed 0 and 40 as the bounds
    }

    // output the radius of each circle
    cout << "Below is the radius each of the five circles in the second array. " << endl;

    // below is to output the radius in the array
    for(int i = 0; i < NUM; ++i) 
    {
        cout << CircleArrayOne[i] << endl;
    }

    // Here I want to access the array to work out the area using 
    // float Circl::getArea()

    system("PAUSE");
    return 0;
}

float Circle::getArea()
{
    double PI = 3.14;
    return (PI * (Radius*Radius));
}

float Circle::getRadius()
{
    return Radius;
}

int Random::random(int lower, int upper)
{
    int range = upper - lower + 1;
    return (rand() % range + lower);
} 
```

Circle.h 文件

```
#pragma once
#include <string>

class Circle 
{
private:
    float Radius;

public:
    Circle(); // initialised radius to 0
    Circle(float r); // accepts an argument and assign its value to the radius attribute
    void setRadius(float r); // sets radius to a value provided by its radius parameter (r)
    float getRadius(); // returns the radius of a circle
    float getArea(); // calculates and returns the areas of its circle
}; 
```

谢谢。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:05:42.437

到目前为止，您只有圆的随机半径，但没有`Circle`对象。所以，首先创建圆形对象。

```
Circle obj[5];   // Create 5 objects default constructed. 
```

`setRadius`现在使用和调用每个对象上的区域来设置每个对象的半径。

# ruby-on-rails - 渲染对象，将它们用作搜索链接

> ID：11854709
> 
> 赞同：2
> 
> 时间：2012-08-07T21:59:29.727
> 
> 标签：ruby-on-rails, search

我对 Rails 还是很陌生。我开始掌握它的窍门，但目前我想做的事情超出了我的范围。我做了很多研究，制作搜索框有很多，但我想简化这个过程。所以，我有一个视图助手可以做到这一点：

```
<% if @events.any? %>
  <ol class="events">
    <%= render @events %>
  </ol>
<% end %> 
```

效果很好，这显示了用户自己的事件。我得到一个事件对象列表，每个对象由 3 行组成`:city`，`:event_name`、 和`:event_date`。我想要做的是能够单击对象，一个`:city`或两个`:city`/`:event_date`行，并显示搜索结果，该搜索查找具有相同`:city`AND的所有事件`:event_date`。FWIW 我正在使用下拉列表来获取事件对象的城市和日期，因此不会有用户输入差异。我想我需要继续自己渲染视图，比如

```
<% @events.each do |e| %>
    <%= link_to e.city, searchlinkthingie %>
<% end %> 
```

连同一个相关的搜索控制器来获取结果并抛出一个新页面，以及一个新的路由。我还没有尝试构建控制器和路由，因为我不太清楚它需要是什么样子。我一直在阅读，`link_to`我想我需要继续直接建立链接，但同样，不确定它应该是什么样子。我正准备通过我的显示器把我的头。想法？

编辑：受以下答案启发的解决方案是`link_to`为城市和事件日期创建两个连接字符串，并`search_url(params[:search1 event.city, :search2 event.date])`在事件控制器中创建一个关联的搜索方法，该方法在事件模型中调用一个`self.search`方法，并在路线中创建一个“匹配” .rb。该模型使用 AND 执行 SQL 查询，返回我想要的结果，并使用简单的帮助程序显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:06:02.253

因此，您构建了搜索，以便您可以输入任意城市并取回您想要的结果。这是第一步。搜索控制器操作将接受一个参数，即搜索字符串。假设该参数被调用`query`。

因此，您有类似 a的操作，`search_controller`该操作称为`search`，并且该操作采用 的值`params[:query]`来返回结果。

一旦你有了它，你就可以建立链接到预定义的搜索，如下所示：

```
<%= link_to e.city, search_search_path(:query => e.city) %> 
```

此链接触发对（因此为 path ）上的`search`操作的请求，将参数设置为。`search_controller``search_search_path``query``e.city`

最后，由于此操作不适用于特定记录，因此它将是一个`:collection`而不是`:member`路由。因此，根据您的命名约定，`routes.rb`文件中的条目将类似于：

```
config.resource :search do
  get :search, :on => :collection
end 
```

这应该会产生一个看起来像这样的 url：

```
http://example.com/search/search?query=chicago 
```

where`/search/search/`映射到控制器`search`上的操作，包括参数。`search``query`

您还可以输入一个匹配规则（此处显示的 Rails 3 样式），这将进一步缩短该 URL：

```
match "/search" => "search#search" 
```

这将允许您拥有如下网址：

```
http://example.com/search?query=chicago 
```

...这将与前面的示例相同。

# machine-learning - C4.5 决策树：分类概率分布？

> ID：11854710
> 
> 赞同：3
> 
> 时间：2012-08-07T22:00:07.123
> 
> 标签：machine-learning, data-mining, weka, decision-tree

我正在使用 Weka 的 J48 (C4.5) 决策树分类器。一般来说，对于决策树，一旦碰到叶子就可以确定分类概率分布吗？我知道朴素贝叶斯，每次分类尝试都会产生一个分类分布。

如果可以使用决策树，那么 Weka J48 树是否提供此功能？我也可以尝试实现自己的树。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T07:18:44.570

由于每个叶子都有一个实际上是离散分布的分类决策，它所指示的类别为 100%，所有其他类别为 0。如果需要，您也可以使用训练集为所有内部节点生成分布。

如果您在学习树后进行修剪，您可以通过树重新运行训练集，并使用每个实际类落在该叶子中的频率标记每个叶子，这将是您的分布。

**编辑：**例如，一旦你得到你的树。您可以为每个节点关联一个直方图，其中每个类都有一个 bin。然后对训练集进行分类，如果遍历树中的一个节点，则在该类的相应 bin 中添加一个。在完成完整的训练集之后，只需对每个直方图进行归一化以添加 1。然后，如果您觉得叶子太接近 100%，您可以通过使用每个直方图的熵来确定要进一步修剪的内容。

# ios - UINavigationBar:appearance 有效但 UINavigationBar:appearanceWhenContained in

> ID：11854714
> 
> 赞同：5
> 
> 时间：2012-08-07T22:00:19.907
> 
> 标签：ios

我需要将导航栏设置为自定义颜色，以下代码将执行此操作：

```
[[UINavigationBar appearance]
            setBackgroundImage:navigationBarTileImage forBarMetrics:UIBarMetricsDefault]; 
```

但是我的应用程序调用系统 MFMailComposeViewController 和 MFMessageComposeViewController 并且我希望导航栏成为这些视图的默认颜色，所以我这样做了：

```
[[UINavigationBar appearanceWhenContainedIn: [MyViewControllerBase class], [MyViewController1 class], [MyViewController2 class], nil]
    setBackgroundImage:navigationBarTileImage forBarMetrics:UIBarMetricsDefault]; 
```

但是现在导航栏不再有我的默认颜色。为什么appearanceWhenContainedIn 不起作用？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-08T01:53:13.827

的参数`appearanceWhenContainedIn:`表示视图（和/或视图控制器）包含层次结构，而不是可能的容器列表。（诚​​然，[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAppearance_Protocol/Reference/Reference.html)对此并不清楚。请参阅[WWDC 2011 的视频](https://developer.apple.com/videos/wwdc/2011/?id=114)。）因此，

```
[UINavigationBar appearanceWhenContainedIn:[NSArray arrayWithObjects:[MyViewControllerBase class], [MyViewController1 class], [MyViewController2 class], nil]] 
```

为您提供`UINavigationBar`包含在 a 中的a 的外观代理`MyViewControllerBase`，而后者又在 a`MyViewController1`内部 a`MyViewController2`中。我猜这不是你所拥有的收容等级。

相反，请查看包含导航栏的视图控制器。它可能是通用的`UINavigationController`......但你不能只是这样做

```
[UINavigationBar apperanceWhenContainedIn:[NSArray arrayWithObject:[UINavigationController class]]] 
```

因为那样你也会得到邮件/消息控制器。可悲的是，虽然您*可以*在邮件/消息视图控制器中获得外观代理`UINavigationBar`，但没有办法告诉它撤消在更通用级别上所做的外观更改。

对于这种情况，通常的解决方案似乎是让自己成为一个`UINavigationController`子类，并将其用于您想要皮肤的 UI 部分。子类可以是空的——它的存在只是为了识别你的 UI 的一部分`appearanceWhenContainedIn:`。（同时，诸如`MFMailComposeViewController`继续使用默认外观之类的东西，因为它们仍然使用通用的`UINavigationController`.）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T20:26:13.747

事实上，就像@rickster 所说，appearanceWhenContainedIn: 方法自定义了包含在容器类实例中的类实例或层次结构中的实例的外观。

并非在每种情况下，您都有一组要自定义的包含类，而是不同的容器。能够自定义多个组件的解决方案是简单地创建一个您需要自定义和迭代的类数组！像这样：

```
NSArray *navigationClass = [NSArray arrayWithObjects:[BSNavigationController class], [DZFormNavigationController class], nil];

for (Class class in navigationClass)
{
    //// Customize all the UINavigationBar background image tilling
    [[UINavigationBar appearanceWhenContainedIn:class, nil] setBackgroundImage:[UIImage imageNamed:@"yourImage"] forBarMetrics:UIBarMetricsDefault];
    [[UINavigationBar appearanceWhenContainedIn:class, nil] setTintColor:[UIColor blackColor]];

    // Title Text Attributes
    NSDictionary *titleAttributes = [NSDictionary dictionaryWithObjectsAndKeys:
                                     [UIColor whiteColor], UITextAttributeTextColor,
                                     [UIColor darkGrayColor], UITextAttributeTextShadowColor,
                                     [UIFont boldSystemFontOfSize:20.0], UITextAttributeFont,
                                     [NSValue valueWithUIOffset:UIOffsetMake(0, 1)], UITextAttributeTextShadowOffset,nil];

    //// Customize all the UINavigationBar title attributes
    [[UINavigationBar appearanceWhenContainedIn:class, nil] setTitleTextAttributes:titleAttributes];
} 
```

# c - 释放双指针的正确方法

> ID：11854718
> 
> 赞同：0
> 
> 时间：2012-08-07T22:00:28.140
> 
> 标签：c, memory-management, malloc, free

释放浮动**的正确方法是什么，如下所示。

例如`float ** someArray`

```
for(int i = 0; i < numberOfDimensions; i++)
    {
        somearray[i] = (float *) malloc(numberOfDimensions * sizeof(float));
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T22:05:16.927

如果您已经 malloc 了另一轮内存并将其分配给原始数组中的每个浮点指针，那么您也应该事先释放它们：

```
int i;
for (i = 0; i < numberOfDimensions; i++)
    free(someArray[i]);

// and free the container array only now

free(someArray); 
```

P.s.：[不要强制转换 malloc 的返回值。](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T22:10:33.997

倒退：

```
for(int i = 0; i < numberOfDimensions; i++)
{
    free(somearray[i]);
}

free(somearray); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T22:08:42.370

我相信您应该释放元素，然后释放数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T22:04:15.837

好吧，在这种情况下，您只需释放（someArray）。现在，如果您 malloc'd 更多内存并将其添加到 someArray，那么您需要遍历该数组并释放每个对象。

换句话说，如果您：

```
for(int i=0; i< whatever; ++i) {
  someArray[i] = malloc(...
} 
```

然后你需要在释放 someArray 之前再走一遍并释放它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T22:04:21.240

只是一个简单的 1-`free()`调用：

```
free(someArray); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-11-07T13:31:08.317

```
for(int i = 0; i < numberOfDimensions; i++)
{
    free(somearray[i]);
    somearray[i] = NULL;
}

free(somearray);
somearray=NULL; 
```

(somearray[i] = NULL) 此行将断开每个数组元素的链接，最后 (somearray=NULL) 将断开与数组的链接。这两行将释放动态内存数组，操作系统将释放的内存分配给其他进程

# java - 不能在 Restful Web 服务中使用 EJB

> ID：11854720
> 
> 赞同：1
> 
> 时间：2012-08-07T22:00:41.450
> 
> 标签：java, rest, jakarta-ee, ejb, ejb-3.1

我有一个非常简单的类，它是一个 Restful Web 服务。我想在 Web 服务中使用 EJB。我使用@EJB 注释来注入我的EJB。唯一的问题是，EJB 始终为空。然后，我使我的 Web 服务本身成为无状态 EJB。这解决了空问题。但是，当我尝试调用 EJB 上的任何函数时，我收到以下错误：

```
EVERE：EJB5070：创建无状态会话 bean 的异常：[CasperLoggingDao]
警告：EJB5184：在调用 EJB CasperLoggingDao 时发生系统异常，方法：public boolean com.dv.model.dao.CasperLoggingDao.log(com.dv.model.entity.CasperLogMessage)
警告：javax.ejb.EJBException：javax.ejb.EJBException：javax.ejb.CreateException：无法创建无状态 EJB
    在 com.sun.ejb.containers.StatelessSessionContainer._getContext(StatelessSessionContainer.java:454)
    在 com.sun.ejb.containers.BaseContainer.getContext(BaseContainer.java:2547)
    在 com.sun.ejb.containers.BaseContainer.preInvoke(BaseContainer.java:1899)
    在 com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:212)
    在 com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:88)
    在 $Proxy319.log（未知来源）
    在 com.dv.model.dao.__EJB31_Generated__CasperLoggingDao__Intf____Bean__.log（未知来源）
    在 com.dv.ws.casper.logging.CasperLoggingResource.putXml(CasperLoggingResource.java:64)
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    在 java.lang.reflect.Method.invoke(Method.java:601)
    在 org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
    在 org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
    在 com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
    在 com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
    在 com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    在 com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
    在 org.jboss.weld.ejb.SessionBeanInterceptor.aroundInvoke(SessionBeanInterceptor.java:42)
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    在 java.lang.reflect.Method.invoke(Method.java:601)
    在 com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(Int
...

```

这是我的课。请注意，我所做的只是调用 log()：

```
@Stateless
@Path("casper/logging")
public class CasperLoggingResource {

private static final Logger logger = Logger.getLogger(CasperLoggingResource.class.getName());

@Context
private UriInfo context;

@EJB
private CasperLoggingDao casperLogger;

/**
 * Creates a new instance of GenericResource
 */
public CasperLoggingResource() {
}

/**
 * PUT method for updating or creating an instance of GenericResource
 * @param content representation for the resource
 * @return an HTTP response with content of the updated or created resource.
 */
@PUT
@Consumes("application/xml")
public void putXml(String content) {
    try
    {
        CasperLogMessage message = CasperLogMessageConverter.convertXMLToEntity(content);
        casperLogger.log(message);
    }
    catch(Exception e)
    {
        logger.log(Level.SEVERE, "Could not execute", e);
    }
}

} 
```

我以前有这个工作。为了从 Restful Web 服务访问 EJB，我需要做一些特别的事情吗？还有其他想法吗？

编辑：这是 CasperLoggingDao 的代码

```
@Stateless
@LocalBean
public class CasperLoggingDao extends BaseDao<CasperLogMessage> {

private static final Logger logger = Logger.getLogger(CasperLoggingDao.class.getName());

public CasperLoggingDao()
{
    super(CasperLogMessage.class);
}

public CasperLoggingDao(EntityManager em)
{
    super(CasperLogMessage.class, em);
}

public boolean log(CasperLogMessage casperLogMessage)
{
    return create(casperLogMessage) != null;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:34:22.440

假设您`BaseDao`有这样的要求是否安全`EntityManager`：

```
@PersistenceContext(unitName = "somePU") 
protected EntityManager entityManager; 
```

你也不需要`@LocalBean`on `CasperLoggingDao`。而且你还`@Stateless`需要`BaseDao`

# ruby-on-rails - irb/控制台重新加载！不重新加载 Rails 观察者

> ID：11854721
> 
> 赞同：1
> 
> 时间：2012-08-07T22:00:53.233
> 
> 标签：ruby-on-rails, console, reload, observers

我有一个观察者，它引发了一个错误：

```
def before_create(user)
  raise "boom!"
end 
```

现在，这将在控制台中正常显示：

```
>  u = User.create!(:email => "test@test.com", :password => "test")
RuntimeError: boom!
    /app/observers/user_observer.rb:3:in `before_create' 
```

如果我点击重新加载，错误仍然存​​在：

```
>  u = User.create!(:email => "test@test.com", :password => "test")
RuntimeError: boom!
    /app/observers/user_observer.rb:3:in `before_create' 
```

但是，如果我退出并重新启动 rails 控制台，它就会消失。为什么？不应该重新加载接受这些观察者的变化吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T23:47:58.063

Rails 控制台不会“重新加载”实例化对象。您需要更改正在引发`boom!`的任何对象的实例，以便在调用`reload!`.

**更新 (2)**

这是第二次更新。希望这一点更清楚。

尝试这个：

```
# app/models/User.rb
class User < ActiveRecord::Base
  # before_validation :boom

  def boom
    raise 'boom!'
  end
end 
```

然后，在控制台中：

```
u = User.new
u.valid?
=> true 
```

然后，像这样修改您的控制器以取消注释 before_validation 钩子：

```
# app/models/User.rb
class User < ActiveRecord::Base
  before_validation :boom

  def boom
    raise 'boom!'
  end
end 
```

然后，在控制台中：

```
u.valid? # no crash!
=> true

u = User.new
u.valid? # no crash still!
=> true

reload!

u = User.new
u.valid? # crash!
RuntimeError: bang! 
```

关键是您`reload!`然后重新实例化您引用的任何用户模型。您还可以使用 ActiveRecord 查找器等从数据库中重新实例化模型。在这种情况下，您需要使用`User.reset_column_information`.

**参考**

*   [http://apidock.com/rails/ActiveRecord/ModelSchema/ClassMethods/reset_column_information](http://apidock.com/rails/ActiveRecord/ModelSchema/ClassMethods/reset_column_information)

# netbeans - netbeans cppunit 链接错误

> ID：11854724
> 
> 赞同：1
> 
> 时间：2012-08-07T22:01:08.597
> 
> 标签：netbeans, cppunit, build-error

我正在尝试在 Mac - Lion OS10x 上的 NETBEANS 上使用 cppUnit 测试运行一些测试，但在尝试编译后出现此错误：

```
/usr/bin/make" -f nbproject/Makefile-Debug.mk QMAKE= SUBPROJECTS= .build-conf
"/usr/bin/make"  -f nbproject/Makefile-Debug.mk dist/Debug/GNU-MacOSX/xxx
make[2]: `dist/Debug/GNU-MacOSX/xxx' is up to date.
"/usr/bin/make" -f nbproject/Makefile-Debug.mk SUBPROJECTS= .build-tests-conf
"/usr/bin/make"  -f nbproject/Makefile-Debug.mk dist/Debug/GNU-MacOSX/xxx
make[2]: `dist/Debug/GNU-MacOSX/xxx' is up to date.
mkdir -p build/Debug/GNU-MacOSX/tests/TestFiles
g++       -o build/Debug/GNU-MacOSX/tests/TestFiles/f1 build/Debug/GNU-MacOSX/newmain_nomain.o   
-lcppunit -lcppunit -lcppunit 
Undefined symbols for architecture x86_64:
  "_main", referenced from:
   start in crt1.10.6.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
make[1]: *** [build/Debug/GNU-MacOSX/tests/TestFiles/f1] Error 1
make: *** [.build-tests-impl] Error 2

BUILD TESTS FAILED (exit value 2, total time: 11s) 
```

谁能告诉我如何解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:07:22.233

该链接器错误表示没有 main() 函数。您需要创建一个包含 main() 函数的单独可执行文件来调用单元测试。

CppUnit 是一个框架，但它不包括运行测试的实际可执行文件，您必须自己提供。这是一个非常简单的例子：[https ://stackoverflow.com/a/9302288/99027](https://stackoverflow.com/a/9302288/99027)

# itextsharp - 添加绝对定位文本

> ID：11854726
> 
> 赞同：19
> 
> 时间：2012-08-07T22:01:50.337
> 
> 标签：itextsharp

我正在尝试生成一封信，留下一个空白点，然后将地址粘贴在其顶部，具体取决于信封窗口的位置。

所以我开始这样做：

```
Document doc = new Document(PageSize.LETTER, 72, 72, 72, 72);
var w = PdfWriter.GetInstance(doc, output);
Font font = FontFactory.GetFont("arial", 10);
doc.Open();
doc.Add(new Paragraph("date", font) { SpacingAfter = 5 });
doc.Add(new Paragraph("\n\n\n\n\n\n", font));//empty spot
doc.Add(new Paragraph("long\n paragraph\ns panning\ multiple\n lines\n", font) { SpacingAfter = 5 });
doc.Add(new Paragraph("long\n paragraph\ns panning\ multiple\n lines\n", font) { SpacingAfter = 5 });
doc.Add(new Paragraph("long\n paragraph\ns panning\ multiple\n lines\n", font) { SpacingAfter = 5 });
doc.Add(new Paragraph("long\n paragraph\ns panning\ multiple\n lines\n", font) { SpacingAfter = 5 });
doc.Add(new Paragraph("long\n paragraph\ns panning\ multiple\n lines\n", font) { SpacingAfter = 5 });

float llx = 63f, lly = 450f, urx = 387f, ury = 531f;
?? Somehow add "name\n address line 1\n address line2\n city state zip"

doc.Close(); 
```

我希望能够在这些坐标处添加一些文本，但我不知道如何......有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-08T14:07:10.793

找到答案“[这里](https://stackoverflow.com/questions/1678298/itext-multiline-text-in-bounding-box)”。（以下引述[Yannick Smits](https://stackoverflow.com/users/134305/yannick-smits)的回答）

================

尝试这个：

```
ColumnText ct = new ColumnText(cb);
Phrase myText = new Phrase("TEST paragraph\nNewline");
ct.SetSimpleColumn(myText, 34, 750, 580, 317, 15, Element.ALIGN_LEFT);
ct.Go(); 
```

SetSimpleColumn 的参数是：

1.  词组
2.  左下-x
3.  左下y
4.  右上角-x（llx + 宽度）
5.  右上-y (lly + height)
6.  前导（打印行之间的空白量）
7.  结盟。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-08T14:29:15.330

您还可以使用带有文本矩阵的 ContentByte 在您想要的任何位置绘制文本。

```
PdfContentByte cb = writer.DirectContent;
cb.BeginText();
BaseFont f_cn = BaseFont.CreateFont("c:\\windows\\fonts\\calibri.ttf", BaseFont.CP1252, BaseFont.NOT_EMBEDDED);
cb.SetFontAndSize(f_cn, 6);
cb.SetTextMatrix(475, 15);  //(xPos, yPos)
cb.ShowText("Some text here and the Date: " + DateTime.Now.ToShortDateString());
cb.EndText(); 
```

好处是，如果您不必绘制文本将进入的框的全尺寸。使用简单列，您可以在文档上绘制一个矩形，并将文本定位在其中。使用 ContentByte，您可以避开矩形，并自行定位文本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-02T12:58:58.783

非常感谢您的数据，我喜欢它，但我的英语很差，对不起。

这是我的`iTextSharp`礼仪代码：

```
public void impriItex()
{
    iTextSharp.text.Font fontH1 = new iTextSharp.text.Font(FUENTE_BASE, 14, iTextSharp.text.Font.ITALIC);
    iTextSharp.text.Font fuente = new iTextSharp.text.Font(FUENTE_BASE, 12, iTextSharp.text.Font.NORMAL);
    iTextSharp.text.Font FUENTE_CABECERA_TABLA = new iTextSharp.text.Font(FUENTE_BASE, 10, iTextSharp.text.Font.BOLD);
    dataGridViewOculta.DataSource = fun.CargaDato(cargaVelores);
    dataGridViewTotales.DataSource = fun.CargaDato(cargaVelores);
    dataGridViewVentas.DataSource = fun.CargaDato(cargaVelores);
    //Letras
    //Tabla
    PdfPTable pdfTable = new PdfPTable(6);
    pdfTable.DefaultCell.Padding = 2;
    pdfTable.WidthPercentage = 40;
    pdfTable.HorizontalAlignment = Element.ALIGN_CENTER;
    pdfTable.DefaultCell.BorderWidth = 1;
    //cabeceras
    foreach (DataGridViewColumn column in dataGridViewOculta.Columns)
    {

        PdfPCell cell = new PdfPCell(new Phrase(column.HeaderText, FUENTE_CABECERA_TABLA));
        cell.HorizontalAlignment = Element.ALIGN_CENTER;
        cell.BackgroundColor = new iTextSharp.text.BaseColor(210, 240, 240);
        pdfTable.AddCell(cell);
    }

    //datos
    foreach (DataGridViewRow row in dataGridViewOculta.Rows)
    {
        try
        {
            foreach (DataGridViewCell cell in row.Cells)
            {
                String texto = cell.Value.ToString();
                String textovacio = texto.Replace("00:00:00", " ");
                PdfPCell cosa = new PdfPCell(new Phrase(textovacio, fuente));
                cosa.HorizontalAlignment = Element.ALIGN_CENTER;
                pdfTable.AddCell(cosa);
                pdfTable.HorizontalAlignment = Element.ALIGN_CENTER;
            }
        }
        catch { return; }
    }

    //Exporting to PDF
    string folderPath = "C:\\PDFs\\";
    if (!Directory.Exists(folderPath))
    {
        Directory.CreateDirectory(folderPath);
    }
    using (FileStream stream = new FileStream(folderPath + "Etiquetas.pdf", FileMode.Create))
    {
        Document pdfDoc = new Document(PageSize.A4, 0f, 0f, 0f, 0f);
        PdfWriter writer = PdfWriter.GetInstance(pdfDoc, stream);
        PdfPTable tabla = new PdfPTable(1);
        pdfDoc.Open();
        PdfContentByte cb = writer.DirectContent;
        PdfContentByte lineas = writer.DirectContent;

        for (int fila = 0; fila < dataGridViewVentas.Rows.Count - 1; fila++)
        {
            for (int col = 0; col < dataGridViewVentas.Rows[fila].Cells.Count; col++)
                labelTitulo.Text = "Etiquetas";
            Cantidad = dataGridViewVentas.Rows[fila].Cells[0].Value.ToString();
            IdColor = dataGridViewVentas.Rows[fila].Cells[1].Value.ToString();
            IdCategoria = dataGridViewVentas.Rows[fila].Cells[2].Value.ToString();
            NomCategoria = dataGridViewVentas.Rows[fila].Cells[3].Value.ToString();
            Colores = dataGridViewVentas.Rows[fila].Cells[4].Value.ToString();
            CodigoDeGrupo = dataGridViewVentas.Rows[fila].Cells[5].Value.ToString();
            lblNombreSocio.Text = IdColor + ":" + Cantidad;
            String espacio = "          ";
            Paragraph linea = new Paragraph("________________________________________________________", fuente);
            Paragraph lineaDoble = new Paragraph(Cantidad, fuente);
            Paragraph SocioPar = new Paragraph("Color:" + lblNombreSocio.Text, fuente);
            Paragraph SociedadPar = new Paragraph("Categoria: " + NomCategoria, fuente);
            Paragraph Titulo = new Paragraph(labelTitulo.Text, fontH1);
            Paragraph parrafoEspacio = new Paragraph(" ", fuente);
            linea.Alignment = Element.ALIGN_CENTER;
            lineaDoble.Alignment = Element.ALIGN_CENTER;
            Titulo.Alignment = Element.ALIGN_CENTER;

            SocioPar.Alignment = Element.ALIGN_CENTER;
            SociedadPar.Alignment = Element.ALIGN_CENTER;
            pdfTable.HorizontalAlignment = Element.ALIGN_CENTER;
            pdfDoc.Add(linea);
            pdfDoc.Add(Titulo);
            pdfDoc.Add(lineaDoble);
            pdfDoc.Add(parrafoEspacio);
            pdfDoc.Add(SocioPar);
            pdfDoc.Add(SociedadPar);

            // pdfDoc.Add(pdfTable);}
            for (int x = 0; x < Convert.ToInt32(Cantidad); x++)
            {
               cb.Rectangle(posx, posy, 40f, 25f);
                lineas.SetLineWidth(1);
                lineas.MoveTo(posx+20, posy+15);
                lineas.LineTo(posx+20,posy);
                lineas.Stroke();
             //   lineas.
                lineas.MoveTo(posx + 20, posy+10 );
                lineas.LineTo(posx, posy + 10);
                lineas.MoveTo(posx + 40, posy + 10);
                lineas.LineTo(posx, posy + 10);
                lineas.Stroke();
                //texto !!!!!!!!!!!
                lineas.BeginText();
                lineas.SetFontAndSize(FUENTE_BASE, 6);
                lineas.SetTextMatrix(posx, posy);
                lineas.ShowText(IdColor);
                lineas.EndText();
                //tabla.AddCell("prueba");
                // pdfDoc.Add(tabla);
                Chunk c = new Chunk(x.ToString());
               // iTextSharp.text.Rectangle rect = new iTextSharp.text.Rectangle(posx, 650f, 25f, 10f);
               // cb.Rectangle(rect);
                cb.Stroke();
                float nuevo = posx + 42f; 
                posx = nuevo;
                if (posx > 500f) 
                    { posx = 20; posy = posy-35f; }
            }
            pdfDoc.NewPage();               
            posx = 10f;
            posy = 700;
        }
        pdfDoc.Close();
        stream.Close();
    }
} 
```

# cassandra - 如何在 Cassandra 中创建表

> ID：11854728
> 
> 赞同：2
> 
> 时间：2012-08-07T22:01:52.110
> 
> 标签：cassandra

我正在检查 WTF 超级列，并尝试制作类似示例的表格。什么都没有出现。如果格式看起来像这样，我很好奇如何创建表格。

```
 AddressBook = { // this is a ColumnFamily of type Super
                     phatduckk: {    // this is the key to this row inside the Super CF
                     // the key here is the name of the owner of the address book

                     // now we have an infinite # of super columns in this row
                     // the keys inside the row are the names for the SuperColumns
                     // each of these SuperColumns is an address book entry
                    friend1: {street: "8th street", zip: "90210", city: "Beverley Hills", state: "CA"},

    // this is the address book entry for John in phatduckk's address book
                    John: {street: "Howard street", zip: "94404", city: "FC", state: "CA"},
                     Kim: {street: "X street", zip: "87876", city: "Balls", state: "VA"},
                     Tod: {street: "Jerry street", zip: "54556", city: "Cartoon", state: "CO"},
                     Bob: {street: "Q Blvd", zip: "24252", city: "Nowhere", state: "MN"},
    ...
    // we can have an infinite # of ScuperColumns (aka address book entries)
                  }, // end row
    // all the address book entries for ieure
                      ieure: {     // this is the key to another row in the Super CF
                              joey: {street: "A ave", zip: "55485", city: "Hell", state: "NV"},
                       William: {street: "Armpit Dr", zip: "93301", city: "Bakersfield", state: "CA"},
}, 
```

}

我相信我必须创建列族和超级列族。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:27:42.937

不要使用超列，因为它们已被弃用。而是使用复合列，如下所示：

```
AddressBook {
    User1 {
        Friend1:street : "some st"
        Friend1:zip : 30000
        Friend1:city : "mayberry"
        Friend1:state : "ST"
        Friend2:street : "some other st"
        Friend2:zip : 30001
        Friend2:city : "springfield"
        Friend2:state : "ST"
    },
    User2 {
        ...
    }
} 
```

# asp.net - Routing not working on IIS 7.5

> ID：11854734
> 
> 赞同：0
> 
> 时间：2012-08-07T22:02:31.223
> 
> 标签：asp.net, .net-4.0, routing, webforms, iis-7.5

I know that are innumerous posts out there with this problem and solutions, but I think I have tried all of them and I can't get rid of the 404 error.

I contacted my host provider to get some info.

They told me and I quote:

> This site is hosted in IIS 7.
> 
> The application pool used by the application ‘xxxx’ is already set to ‘DefaultAppPoolPT_DOTNET40’ which is in .Net framework 4.0, Classic pipeline mode.
> 
> For wildcard application mapping in IIS 7, it’s done in the web.config file.

Although they said that is IIS7, when I go to the website I get this headers:

Server:Microsoft-IIS/7.5

But I don't know if is relevant or not for this case.

As so many others I followed this guide [http://msdn.microsoft.com/en-us/library/cc668202.aspx](http://msdn.microsoft.com/en-us/library/cc668202.aspx) without success. I tried the famous

```
 <modules runAllManagedModulesForAllRequests="true"> 
```

without luck.

.html files and images works fine. .aspx files doesn't.
I'm just wondering if is a web.config problem or if is IIS that is not configured properly.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:28:46.093

After talked once again with the hosting provider they told me that

> the application pool user of the application ‘xxxx’ doesn’t have access to the folder.

After they solved this problem the website was up and running fine.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T02:32:36.587

You can try Intergrated managed pipeline.

And under system.webServer node ,you should add the following config.

```
<modules runAllManagedModulesForAllRequests="true">
<validation validateIntegratedModeConfiguration="false"/> 
```

# c# - C# 存储过程调用、参数嗅探/优化问题大幅放缓？

> ID：11854735
> 
> 赞同：3
> 
> 时间：2012-08-07T22:02:36.950
> 
> 标签：c#, sql, stored-procedures, parameter-sniffing

我有以下代码重复运行存储过程。当我从字面上运行 SQL 语句时，它工作得很好，所以我创建了一个存储过程来封装我正在做的事情。

```
foreach (string worker in workers)
{
    _gzClasses.ExecuteCommand("EXEC dbo.Session_Aggregate @workerId = {0}, @timeThresh = {1}", worker, SecondThreshold);
    Console.WriteLine("Inserted sessions for {0}", worker);
} 
```

然后，我想知道每个调用生成了多少行，所以我稍微更改了 SP 以`@@rowcount`作为输出参数返回。我[不能使用 DataContext 来执行带有输出参数的命令](https://stackoverflow.com/questions/11654610/how-to-use-datacontext-executecommand-and-get-the-executed-stored-proc-return-va)，所以我不得不将 for 循环中的上述代码更改为以下内容：

```
using (var cn = new SqlConnection(CnStr))
{
    cn.Open();
    using (var cmd = new SqlCommand("Session_Aggregate", 
        cn) {CommandTimeout = 300})
    {                        
        cmd.CommandType = CommandType.StoredProcedure;                        

        cmd.Parameters.AddWithValue("@workerId", worker);                        
        cmd.Parameters.AddWithValue("@timeThresh", SecondThreshold);                        

        SqlParameter sessions = cmd.Parameters.Add("@sessions", SqlDbType.Int);
        sessions.Direction = ParameterDirection.Output;

        cmd.ExecuteNonQuery();

        Console.WriteLine("Inserted {1} sessions for {0}", worker, sessions.Value);
    }
} 
```

这可行，但它的运行速度比其他查询慢得多。我认为这可能是参数嗅探的情况，所以我将其更改为`CommandType.Text`并使用了 string `EXEC Session_Aggregate ... WITH RECOMPILE`。但在这种情况下，我不断收到`@session`未定义 out 参数的错误。无论如何，查询现在几乎没有运行，即使 SQL 命令在 SSMS 中运行时间 < 1 秒。

这是存储过程，以防万一任何人都可以帮助弄清楚发生了什么，或者可以找出加快速度的方法。我还将就如何正确描述这里发生的事情提出建议。我`CommandType.StoredProcedure`什至看不到 VS 发送到 SQL 的实际命令。

```
PROCEDURE [dbo].[Session_Aggregate] 
    -- Add the parameters for the stored procedure here
    @workerId varchar(64) = 0, 
    @timeThresh dateTime = '13 July 2007 11:27:46'
    @sessions INT OUTPUT
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Insert statements for procedure here
    INSERT INTO e_activeSessions
    SELECT *
    FROM (
        SELECT workerId, startTime, COUNT(*) as totalTasks, MAX(timeInSession) as totalTime, 
        MIN(dwellTime) as minDwell, MAX(dwellTime) as maxDwell, AVG(dwellTime) as avgDwell, STDEV(dwellTime) as stdevDwell, 
        SUM(CAST(wrong80 as INT)) + SUM(CAST(correct80 as INT)) as total80, SUM(CAST(correct80 as INT)) as correct80, 
        SUM(CAST(correct80 as FLOAT)) / NULLIF(SUM(CAST(wrong80 as INT)) + SUM(CAST(correct80 as INT)), 0 ) as percent80 
        FROM (
            SELECT *, (SELECT MAX(timeStamp)
                FROM workerLog w where dwellTime is null AND timeInSession = 0 AND workerId = @workerId AND w.timeStamp <= workerLog.timeStamp
                    AND w.timeStamp >= @timeThresh) as startTime
            FROM workerLog where workerId = @workerId) t 
    GROUP BY startTime, workerId) f 
    WHERE startTime is NOT NULL AND f.totalTasks > 1 AND totalTime > 0;

    SET @sessions = @@ROWCOUNT;
END 
```

**编辑：无论原始查询的执行计划如何，通过创建一个临时表都大大加快了它的速度。**我以为 SQL 会通过分析查询来做到这一点，但我可能错了。**此外，我发现了`OPTIMIZE FOR UNKNOWN`在新版本的 SQL Server 中，当执行计划针对大量不同大小的数据时，可以减轻参数嗅探的影响。**

```
PROCEDURE [dbo].[Session_Aggregate] 
    -- Add the parameters for the stored procedure here
    @workerId varchar(64) = 0, 
    @timeThresh dateTime = '13 July 2007 11:27:46',
    @sessions INT OUTPUT
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Insert statements for procedure here

    CREATE TABLE #startTimes
    (
        startTime DATETIME
    );

    CREATE INDEX Idx_startTime ON #startTimes(startTime);

    INSERT INTO #startTimes
    SELECT timeStamp FROM workerLog 
    WHERE dwellTime is null AND timeInSession = 0 
    AND workerId = @workerId AND timeStamp >= @timeThresh;

    INSERT INTO e_activeSessions
    SELECT *
    FROM (
        SELECT workerId, startTime, COUNT(*) as totalTasks, MAX(timeInSession) as totalTime, 
        MIN(dwellTime) as minDwell, MAX(dwellTime) as maxDwell, AVG(dwellTime) as avgDwell, STDEV(dwellTime) as stdevDwell, 
        SUM(CAST(wrong80 as INT)) + SUM(CAST(correct80 as INT)) as total80, SUM(CAST(correct80 as INT)) as correct80, 
        SUM(CAST(correct80 as FLOAT)) / NULLIF(SUM(CAST(wrong80 as INT)) + SUM(CAST(correct80 as INT)), 0 ) as percent80 
        FROM (
            SELECT *, (SELECT MAX(startTime) FROM #startTimes where startTime <= workerLog.timeStamp) as startTime
            FROM workerLog where workerId = @workerId) t 
    GROUP BY startTime, workerId) f 
    WHERE startTime is NOT NULL AND f.totalTasks > 1 AND totalTime > 0
    OPTION (OPTIMIZE FOR UNKNOWN);

    SET @sessions = @@ROWCOUNT;     
END; 
```

**额外的简化**：将 SP 拖到您的 DBML 文件中，您可以执行以下操作：

```
foreach (string worker in workers)
{
    int? rows = 0;
    _gzClasses.Session_Aggregate(worker, SecondThreshold, ref rows);

    Console.WriteLine("Inserted {1} sessions for {0}", worker, rows);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:15:34.380

启动 SQLServerProfiler，它可以让您在单个查询和您现在运行它的方式之间有所不同。

[http://www.techrepublic.com/article/step-by-step-an-introduction-to-sql-server-profiler/5054787](http://www.techrepublic.com/article/step-by-step-an-introduction-to-sql-server-profiler/5054787)

但更重要的是，您可能应该查看可以通过查询磁贴在 SSMS 中打开的查询执行计划，然后选择显示执行计划。

[http://www.mssqltips.com/sqlservertip/1856/sql-server-query-execution-plans-in-sql-server-management-studio/](http://www.mssqltips.com/sqlservertip/1856/sql-server-query-execution-plans-in-sql-server-management-studio/)

如果您真的是 SSMS 新手，我可能会在我提供的内容之上阅读几篇文章，但查询执行计划将真正向您显示查询滞后的地方。（基本的经验法则是您不希望发生全表扫描，您希望它进行搜索，这意味着您希望它在索引和/或主键上搜索）我不是 dba，但那是调试查询时可能要采用的路线。

我不太确定这是您在查看后的查询，因为它看起来很简单。不过，这可能与您调用它的次数有关。您可能想找到一种将所有工作人员数据传递到查询中的方法，以便您只运行一次查询本身而不是运行它 workers.count 次......HTH

# google-app-engine - Google Appengine 如何向我们推荐自定义域上 SSL 的证书签名请求 (CSR)？

> ID：11854741
> 
> 赞同：1
> 
> 时间：2012-08-07T22:03:00.553
> 
> 标签：google-app-engine

我正在尝试购买证书，而提供商 (rapidSSL) 要求我创建证书签名请求 (CSR)。但是，我在 appengine 文档中找不到有关如何创建它的任何内容？

有人有他们使用的明确解决方案吗？或者谷歌可以权衡我们如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T22:21:58.540

每个证书颁发机构都提供了有关如何以他们喜欢使用的形式生成证书签名请求的详细信息。您应该遵循 CA 提供的指南，了解如何获取与 Apache 一起使用的证书，因为这将生成正确的证书，并且还将提供生成 CSR 的步骤。

还需要注意的是，一些 CA 指令以加密形式生成密钥。如果发生这种情况，您可以通过运行以下命令使用 openssl 解密密钥： openssl rsa -in encrypted.key -out unencrypted.key

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-29T23:12:28.567

存在各种程序来创建证书签名请求 (CSR)。我在 linux 机器上使用“openssl”来生成密钥和 CSR。

[1）我为自定义域（ https://cloud.google.com/appengine/docs/ssl](https://cloud.google.com/appengine/docs/ssl)）生成了一个未加密的 PEM 编码的 RSA 私钥，由 Google 的 SSL 指定

```
cd $HOME
openssl genrsa -out rsa_private_key.key 2048 
```

2) 使用“rsa_private_key.key”生成所需的证书签名请求 (CSR) 文件。

```
openssl req -new -key rsa_private_key.key -out request.csr 
```

您将被问到以下问题：

```
 Country Name (2 letter code) [AU]: US
   State or Province Name (full name) [Some-State]: Illinois
   Locality Name (eg, city) []: Chicago
   Organization Name (eg, company) [Internet Widgits Pty Ltd]: Chicago Company, Ltd.
   Organizational Unit Name (eg, section) []: IT
   Common Name (eg, YOUR name) []: checkout.customedomain.com
   Email Address []: 
```

我忽略了另外两个问题，一切正常。位于您的主目录 ($HOME) 上的“request.csr”是证书颁发机构提供者生成您的证书所需的 CSR 文件。同样，它不一定是 openssl：供应商支持各种平台的许多工具。请记住 Google 的要求。

**关于自定义域的旁注：**

确保您的自定义域包含子域或“完全限定域名”。“万维网”。被认为是一个子域，并且它始终是 Google Appengine（10/2014）中的 ssl 所必需的。所以在我的示例中，如果我想要在 customedomain.com 使用 SSL，我会添加“www.customedomain.com”您可以将您的裸域重定向到您的完整合格域名。

Google Appengine 不为裸域提供 SSL 支持，例如：[https ://customedomain.com](https://customedomain.com)

# python - 如何判断一个字符串是否包含有效的 Python 代码

> ID：11854745
> 
> 赞同：19
> 
> 时间：2012-08-07T22:03:08.817
> 
> 标签：python, syntax, python-3.x

如果我有一串 Python 代码，我如何判断它是否有效，即，如果在 Python 提示符下输入，它会引发 SyntaxError 与否？我认为 using`compiler.parse`会起作用，但显然该模块已在 Python 3 中删除。有没有办法在 Python 3 中也适用。显然，我不想执行代码，只需检查它的语法。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-07T22:06:08.367

使用[`ast.parse`](http://docs.python.org/library/ast.html#ast.parse)：

```
import ast
def is_valid_python(code):
   try:
       ast.parse(code)
   except SyntaxError:
       return False
   return True 
```

```
>>> is_valid_python('1 // 2')
True
>>> is_valid_python('1 /// 2')
False 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T22:06:55.573

编译器模块现在是一个[内置的](http://docs.python.org/release/3.0.1/library/functions.html#compile).

> ```
> compile(source, filename, mode[, flags[, dont_inherit]]) 
> ```
> 
> 将源代码编译为代码或 AST 对象。代码对象可以由 exec 语句执行或通过调用 eval() 进行评估。source 可以是字符串或 AST 对象。有关如何使用 AST 对象的信息，请参阅 ast 模块文档。

AST 解析器现在是一个[单独的模块](http://docs.python.org/release/3.0.1/library/ast.html)。

> ```
> ast.parse(expr, filename='<unknown>', mode='exec') 
> ```
> 
> 将表达式解析为 AST 节点。相当于`compile(expr, filename, mode, ast.PyCF_ONLY_AST)`。

# iphone - Xcode：从核心数据中的图像数据延迟加载图像

> ID：11854754
> 
> 赞同：1
> 
> 时间：2012-08-07T22:03:31.600
> 
> 标签：iphone, ios, image, core-data, uitableview

注意：我正在使用 ARC

我有一种惰性图像加载技术，在从 web url 加载图像时效果很好。但是，我在从核心数据加载图像时遇到问题。这是我正在使用的方法：

我首先分配初始化我的可变数组，从核心数据加载我的数据，然后将其存储在一个数组中。然后我有这个代码：

```
NSOperationQueue *queue = [NSOperationQueue new];
NSInvocationOperation *operation = [[NSInvocationOperation alloc]
                                    initWithTarget:self
                                    selector:@selector(loadImage)
                                    object:nil];
[queue addOperation:operation]; 
```

进而...

```
- (void)loadImage {
    for (int i = 0; i < [myArrayFromCoreData count]; i++) {
        AnObject *myObject = [myArrayFromCoreData objectAtIndex:i];
        UIImage* image;
        if ([myObject.image length] == 0) {
            image = [UIImage imageNamed:@"default.png"];
        }
        else {
            image = [[UIImage alloc] initWithData:myObject.image];
        }
        [self performSelectorOnMainThread:@selector(displayImage:) withObject:[NSArray arrayWithObjects:image,myObject.myObjectId, nil] waitUntilDone:NO];
    }
}

- (void)displayImage:(NSArray*)array {
    [loadedImages setObject:[array objectAtIndex:0] forKey:[array objectAtIndex:1]];
    [self.myTable reloadData];
} 
```

到这里为止没有延迟，并且 NSLog 显示我的所有图像都添加到 myObjectLoadedImages 数组中。

我遇到的问题是滚动表格视图时存在延迟，有时会导致崩溃。这是我用来显示加载图像的代码：

```
UIImage* image = [loadedImages objectForKey:myObject.myObjectId];
if (image != NULL) {
    myImageView.image = image;
}
else {
    myImageView.image = [UIImage imageNamed:@"default.png"];
} 
```

这是在`cellForRowAtIndexPath`方法中，因此每次显示单元格时都会调用它。我在这里做错了什么，因为我的代码改编自一个可以正常工作的类，可以从 web url 加载图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:37:44.837

首先想到 - 你没有缓存你的 UIImages，所以它们不是从内存中加载的。

您是否尝试过[https://github.com/nicklockwood/AsyncImageView/](https://github.com/nicklockwood/AsyncImageView/)？在我看来，它是将异步图像加载到任何视图的最佳库，无论是从文档还是网络。它支持缓存、进度视图和许多简化控制器中代码的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T22:33:25.620

据我了解，您在核心数据中有图像路径，并希望在 UITableView 中显示图像，对吗？

延迟加载部分可能应该发生在`cellForRowAtIndexPath`方法中。看看这里：使用可以帮助[的块从后台线程加载图像](https://stackoverflow.com/questions/7502073/loading-images-from-a-background-thread-using-blocks/7502281#7502281)

基本上，您应该使用 a`NSFetchedResultsController`来获取核心数据的路径。他为你做所有的缓存等。获得路径后，按照上面链接中的说明延迟加载图像

# c# - .NET 自定义控件和向导

> ID：11854763
> 
> 赞同：1
> 
> 时间：2012-08-07T22:04:14.797
> 
> 标签：c#, .net, visual-studio-2010, custom-controls, asp.net-customcontrol

我正在开发一个 .NET 控件，需要添加一个向导来配置其选项。示例：Visual Studio 中 SQL 控件的 SQL 配置向导，又名数据源配置向导。我怎样才能做出这样的？从哪儿开始？

**编辑：**解决方案应该完全基于代码，我可以随意操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:06:29.367

你可以试试 DevExpress 的 XtraWizard。看看[这里](http://www.devexpress.com/Products/NET/Controls/WinForms/Wizard/)。我使用它并推荐它。

# vba - Outlook 2007 - 拦截邮件删除命令

> ID：11854770
> 
> 赞同：1
> 
> 时间：2012-08-07T22:04:35.637
> 
> 标签：vba, outlook, vsto, outlook-addin, outlook-2007

我想将删除邮件发送到用户创建的文件夹而不是已删除的项目文件夹。

有没有办法拦截我从邮件中删除或从文件夹/收件箱中删除的邮件并将其发送到该用户定义的文件夹？

我以为我可以编写一个脚本来查看已删除邮件文件夹中的邮件，然后将其移至用户定义的文件夹，但是我实际上将永远无法正确删除任何内容，因为它会不断将其移回。而如果我可以在单击删除按钮后拦截它，如果我真的想删除它，我总是可以选择将消息“移动”到已删除的项目文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T02:10:55.990

我想我会看到 VBA 会是什么样子。它不漂亮，但它有效。

```
Private WithEvents olDeletedItems As items
Private WithEvents olToBeDeletedItems As items

Private Sub Application_Startup ()

Dim objNS As NameSpace
Dim Cancel As Boolean

Set objNS = Application.GetNamespace("MAPI")

Set olDeletedItems = objNS.GetDefaultFolder(olFolderDeletedItems).items
Debug.Print "Adding items to the - Deleted Items - folder will trigger olDeletedItems_ItemAdd"

Set olToBeDeletedItems = objNS.GetDefaultFolder(olFolderInbox).Folders("To be deleted").items
Debug.Print "Adding items to the - To be deleted - folder will trigger    olToBeDeletedItems_ItemAdd"

End Sub

Private Sub olDeletedItems_ItemAdd(ByVal item As Object)

Dim myNameSpace As NameSpace
Dim targetFolder As MAPIFolder

On Error GoTo notYes ' There is an error when there is nothing in SoftDelete

Debug.Print item.Subject & " - " & item.UserProperties("SoftDelete").Value
If item.UserProperties("SoftDelete").Value <> "Yes" Then

    GoTo notYes
Else

    'The item has already been soft deleted
    ' Okay to remain in the real deleted folder

End If

On Error GoTo 0

Exit Sub

notYes:
Debug.Print item.Subject & " - Either not a Yes or there is nothing in SoftDelete"

Set myNameSpace = Application.GetNamespace("MAPI")
Set targetFolder = myNameSpace.GetDefaultFolder(olFolderInbox).Folders("@To be deleted")

item.Move targetFolder

Set myNameSpace = Nothing
Set targetFolder = Nothing

End Sub

Private Sub olToBeDeletedItems_ItemAdd(ByVal item As Object)

item.UserProperties.Add("SoftDelete", olText).Value = "Yes"
item.Save

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:47:30.163

[`UserProperty`](http://msdn.microsoft.com/en-us/library/office/ff862196.aspx)您可以在您的`Item` *（邮件、任务、日历等*）上分配一个自定义，以便一旦将其放置在用户定义的`DeletedItems`文件夹中，它就可以被永久删除。

然后将其移动到用户定义的逻辑`DeletedItems`可以检查用户属性是否存在......

```
 if (mailItem.UserProperties["SoftDelete"] != null)
   // keep in REAL deleted items
 else
 {
   // move to user-defined deleted items
   mailItem.UserProperties.Add("SoftDelete", Outlook.OlUserPropertyType.olYesNo, false, false).Value = true;
   mailItem.Save(); // persist user props
 } 
```

# spring - 如何在 Spring Security 中获取 GET 参数？

> ID：11854771
> 
> 赞同：2
> 
> 时间：2012-08-07T22:04:43.937
> 
> 标签：spring, login, parameters, get, spring-security

我正在使用 Spring Security 3.1，我想在用户登录之前获取来自 URL 的参数。所以我希望访问我的登录页面的用户向我发送一个 redir 参数（包含他想要的 URL在他认证后去）。当我请求页面时，而不是当我尝试提交表单以登录时。

例如：localhost/myApp?redir=my.app.com/custom

如何从 URL 获取 redir 参数？

我尝试了几件事，包括覆盖 SimpleUrlAuthenticationSuccessHandler 和调用 request.getParameter("redir") 但它返回 null。我还尝试实现自己的过滤器 UsernamePasswordAuthenticationFilter 并在尝试身份验证时调用 getParameter()，但返回 null。

更新附加信息：我的登录页面非常简单，基本上：通过 POST 方法调用 /j_spring_security_check 的表单（使用 j_username 和 j_password 参数）。

我的身份验证提供程序实现了 AuthenticationManager，因此在用户通过身份验证后，将返回 Authentication 对象以及授权列表、用户、密码。

我还实现了 SimpleUrlAuthenticationSuccessHandler 并且 onAuthenticationSuccess() 方法将检查他的权限，如果经过身份验证和许可，用户将被重定向到他在 URL 上通知的页面（现在，当我尝试在此调用 request.getParemeter("redir")方法，我得到空值。

```
public class GetURLFilter extends UsernamePasswordAuthenticationFilter{
@Override
public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response)
        throws AuthenticationException {

    String paginaRedirecionar = request.getParameter("redir");
    request.getSession().setAttribute("redirecionamento", paginaRedirecionar);

    return super.attemptAuthentication(request, response);
}
}

<bean id="authenticationFilter"
    class="com.uolinc.adm.security.GetURLFilter"
    p:authenticationManager-ref="radiusAuthenticationManager"
    p:authenticationFailureHandler-ref="radiusAuthenticationFailureHandler"
    p:authenticationSuccessHandler-ref="radiusAuthenticationSuccessHandler" />

<security:http auto-config="false"
    use-expressions="true"
    access-denied-page="/auth/denied" entry-point-ref="authenticationEntryPoint"
    disable-url-rewriting="true"
    access-decision-manager-ref="accessDecisionManager">

    <security:logout logout-url="/auth/logout" logout-success-url="/auth/login" />

    <security:custom-filter position="FORM_LOGIN_FILTER" ref="authenticationFilter" />
</security:http> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T14:56:00.383

`UsernamePasswordAuthenticationFilter`并`SimpleUrlAuthenticationSuccessHandler`在*提交*登录表单期间调用，这是与呈现表单的请求不同的请求。因此，在您提交表单时，不会出现在请求表单期间出现的参数。您需要在会话中缓存参数或将其作为隐藏参数添加到登录表单中，以便使用普通登录参数重新提交（以便您可以使用它`AuthenticationSuccessHandler`）。

请注意，以这种方式使用客户端提供的数据进行重定向是有风险的，除非您进行了某种验证（例如，检查 URL 是否在您的应用程序中）。否则，攻击者可以提供链接到恶意站点的 URL，并且可能能够在用户不知情的情况下劫持经过身份验证的会话或在安全站点上执行操作。

# amazon-web-services - 如何快速有效地调试 CloudFormation 模板？

> ID：11854772
> 
> 赞同：92
> 
> 时间：2012-08-07T22:04:46.523
> 
> 标签：amazon-web-services, amazon-cloudformation

CloudFormation 是一种强大的 AWS 产品，允许通过单个 API 调用以编程方式创建 AWS 资源堆栈，例如应用程序的Web[层、](https://s3.amazonaws.com/cloudformation-templates-us-east-1/vpc_multiple_subnets.template)[高性能计算集群](https://s3.amazonaws.com/cloudformation-templates-us-east-1/cc2-spot-cluster.template)或[整个应用程序堆栈。](https://s3.amazonaws.com/cloudformation-templates-us-east-1/Rails_Multi_AZ.template)它非常强大。使用它肯定被认为是一种良好的 AWS 实践，尤其是当它与[Chef、](http://www.opscode.com/chef/) [Puppet](http://puppetlabs.com/)或[cloud-init 结合使用时。](https://help.ubuntu.com/community/CloudInit)调试它使我陷入困境。

举一个生产示例：库存的[mongodb 集群模板](https://mongodb-documentation.readthedocs.io/en/latest/ecosystem/tutorial/automate-deployment-with-cloudformation.html)对我不起作用。我特别不知道为什么。我确信这很简单，因为它几乎总是如此。我的问题不在于我无法弄清楚出了什么问题。假设堆栈完全正确地删除了资源，堆栈需要 20 到 30 分钟才能失败，然后再删除 3 到 4 分钟。

我错过了什么？我知道`--disable-rollback`国旗，并像氧气一样使用它。我很久以前就学会了用包裹退出消息`cfn-signal`并将它们像压舱物一样扔下沉船。我怎样才能使模板调试过程更快，或者在我犯错半小时后我会永远卡住我的错误？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-01T21:56:06.617

使用[`aws cloudformation validate-template`](http://docs.aws.amazon.com/cli/latest/reference/cloudformation/validate-template.html)AWS CLI 工具中的命令。它仅验证您的模板是有效的 JSON 还是 YAML，而不是您的键和值是否正确（例如，不检查键中的拼写错误）

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-07-11T21:54:54.457

一年后，另一种选择是将这些模板抽象到第三方库，例如[对流层](https://github.com/cloudtools/troposphere)。该库为您构建 JSON 有效负载，并在此过程中进行大量验证。这也解决了*“哇，管理一个 1000 行的 JSON 文件真是令人难过”的*问题。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-01-02T03:58:35.140

> 我怎样才能使模板调试过程更快，或者在我犯错半小时后我会永远卡住我的错误？

以下是一些最佳实践建议，专门针对提高复杂 CloudFormation 模板开发的迭代速度：

### 使用 CloudFormation 工具验证模板和堆栈更新

AWS 已经在其自己的[最佳实践](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/best-practices.html)文档中概述了这些内容，因此我不会重复它们：

*   [在使用模板之前验证模板](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/best-practices.html#validate)
*   [在更新堆栈之前创建更改集](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/best-practices.html#cfn-best-practices-changesets)

此步骤的重点是在实际执行堆栈创建/更新之前捕获明显的语法或逻辑错误。

### 隔离测试资源

在复杂堆栈中使用任何单个 CloudFormation 资源之前，通过在较小的独立堆栈中测试它们的行为，确保您彻底了解该资源的创建/更新/删除行为的全部范围，包括使用限制和典型的启动/拆卸时间第一的。

*   如果您正在开发或使用任何第三方自定义资源，请使用适合语言平台的库编写单元测试，以确保应用程序逻辑在所有用例中都按预期运行。
*   请注意，单个资源创建/更新/删除的时间量在资源类型之间可能会有很大差异，具体取决于底层 API 调用的行为。例如，一个复杂的[`AWS::CloudFront::Distribution`](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-cloudfront-distribution.html)资源有时可能需要**30-60 分钟**来创建/更新/删除，而[`AWS::EC2::SecurityGroup`](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-security-group.html)更新则需要几秒钟。
*   单个资源在其实现中可能存在错误/问题/限制，这些在单独测试时更容易调试和开发解决方法，而不是在更大的堆栈中进行测试。请记住一些限制，例如[AWS 服务限制](http://docs.aws.amazon.com/general/latest/gr/aws_service_limits.html)取决于您的个人 AWS 账户设置，或[服务的区域可用性](https://aws.amazon.com/about-aws/global-infrastructure/regional-product-services/)取决于您创建堆栈的区域。

### 以小增量构建复杂的堆栈

在执行 Stack 创建/更新时，任何单个 Resource 中的失败都会导致 Stack 回滚整个 Resource 更改集，这可能会不必要地破坏其他成功创建的 Resources，并且在构建具有长的复杂堆栈时会花费很长时间相关资源的依赖关系图。

解决方案是在较小的更新批次中逐步构建您的堆栈，一次添加一个（或几个）资源。这样，如果/当资源创建/更新发生故障时，回滚不会导致整个堆栈的资源被破坏，只是在最新更新中更改的资源集。

### 监控堆栈更新的进度

确保在创建/更新执行时通过查看堆栈事件来[监控堆栈更新的进度。](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-monitor-stack.html)这将是调试单个资源的进一步问题的起点。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-07-11T15:59:45.130

您是否查看过 [AWS Toolkit for Eclipse](https://aws.amazon.com/eclipse)中包含的 AWS CloudFormation 模板编辑器？它具有语法突出显示、语句完成和部署到 AWS CloudFormation。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-06-11T03:36:15.950

[AWS CloudFormation linter](https://github.com/aws-cloudformation/cfn-python-lint)提供额外的静态分析`aws cloudformation validate-template`

它将通知您哪些资源类型和实例类型在某些区域不可用，根据允许值验证属性值，捕获循环资源依赖关系、语法错误、模板限制等等

除了 CLI，记住运行 linter 的最流行的机制之一是安装一个编辑器插件，如[Visual Studio Code 扩展](https://marketplace.visualstudio.com/items?itemName=kddejong.vscode-cfn-lint)，它在每个文件保存时运行

此处描述了其他机制，例如[预提交 Git 挂钩](https://aws.amazon.com/blogs/mt/git-pre-commit-validation-of-aws-cloudformation-templates-with-cfn-lint/)

[![Visual Studio Code 扩展示例截图](../Images/f092bfcd536f53dfa5137166456c045f.png)](https://i.stack.imgur.com/Vf1Ju.png)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-07-11T14:02:39.097

聚会迟到了，但我可能还要补充一点，花一点时间配置和学习你的编辑器是值得的。我知道这听起来很简单，但请尝试一下。

就我而言，使用 vim，一旦我花了一些时间安装 json 语法插件，并且（最终）理解了折叠技术以轻松导航大型 CF 文件，我的表现要好得多。我现在建议拼写错误（不应该出现的逗号等），颜色突出显示可以节省大量时间，提供清晰的视觉线索。

这可能有助于减轻语法错误，但其他工具可以更好地修复模板内的逻辑错误。希望有一天在 CF 上会有一种“预览”模式。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-06-28T23:24:39.230

对于 JetBrains IDE（IntelliJ IDEA PhpStorm WebStorm PyCharm RubyMine AppCode CLion Gogland DataGrip Rider Android Studio），[AWS CloudFormation](https://plugins.jetbrains.com/plugin/7371-aws-cloudformation)插件支持深度检查 JSON 和 YAML CFN 模板

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-11-18T00:55:19.783

如果您正在处理 EC2 机器，那么我建议您登录到 EC2 机器并跟踪 boot.log 文件（RHEL6/Centos 中的 /var/log/boot.log）。该文件会随您的所有 shell 活动（如：安装、下载文件、复制文件等活动）进行更新。

此外，使用[http://www.jsoneditoronline.org/](http://www.jsoneditoronline.org/)之类的编辑器来获取 JSON 的树表示。这有助于您检查 JSON 元素的顺序。

当您更新文件时，请始终使用[http://www.git-tower.com/blog/diff-tools-mac/](http://www.git-tower.com/blog/diff-tools-mac/)之类的工具或实际的版本控制系统，以确保您不会意外更改可能会破坏脚本的内容。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-06-28T23:21:32.543

除了 AWS CLI[`aws cloudformation validate-template`](http://docs.aws.amazon.com/cli/latest/reference/cloudformation/validate-template.html)命令之外，还有一个基于节点的[cfn-check](https://github.com/Versent/cfn-check)工具可以进行更深入的验证。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-03-21T05:40:47.053

去年 12 月添加到 Cloudformation 的最近一项新功能是添加了[额外的参数类型](https://blogs.aws.amazon.com/application-management/post/Tx3DV2UYG9SC38G/Using-the-New-CloudFormation-Parameter-Types)。这些新类型允许您的模板执行更强大的数据检查，并且在创建资源和嵌套 Cloudformation 堆栈时也可以“快速失败”。[当使用新的ConstraintDescription 属性](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/parameters-section-structure.html)传入无效值时，您还可以提供更好的人类可读的自定义错误消息。

新类型在处理各种 VPC 资源时特别有用。您可以确保模板的参数是正确的类型，并且明确表示期望单个值与列表。

例如：

```
"Parameters" : {
  "SingleGroup": { "Type": "AWS::EC2::SecurityGroup::Id", ...},
  "GroupList": {"Type": "List<AWS::EC2::SecurityGroup::Id>", ...}
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-08-09T03:29:42.930

[请在https://pypi.org/project/cloudformation-validator/](https://pypi.org/project/cloudformation-validator/)查看我的 cloudformation 验证器

这将验证架构，然后再次验证规则列表，并允许自定义规则。我还允许与部署工具轻松集成。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-11-18T19:41:43.793

您还可以在此处使用亚马逊提供的 CloudFormation Designer：[https ://console.aws.amazon.com/cloudformation/designer/home?region=us-east-1](https://console.aws.amazon.com/cloudformation/designer/home?region=us-east-1)

只需将您的模板 (JSON) 粘贴到“模板”窗格中，然后单击勾号来验证您的模板。任何错误都将显示在“错误”窗格中。

希望这可以帮助。

# c# - Web 配置转换问题

> ID：11854773
> 
> 赞同：3
> 
> 时间：2012-08-07T22:04:51.787
> 
> 标签：c#, .net, asp.net-mvc, .net-4.0, web-config

我有一个 web.config 文件和一个 web.release.config 文件。在 Web 配置中，我定义了一个邮件队列文件夹：

```
 <appSettings>
    <add key="MailQueue" value="\MailQueue\"/>
  </appSettings> 
```

只要我以“调试”模式发布到 IIS，它就可以正常工作。

我想使用不同的文件夹进行生产，所以在 web.release.config 我尝试替换`MailQueue`为：

```
 <appSettings xdt:Transform="Replace">
        <add key="MailQueue" value="\MailQueueProd\"/>
    </appSettings> 
```

但是，当我尝试以“发布”模式发布时，该`MailQueue`值无法正常工作。即使我将 web.release.config 设置为相同的路径，例如：

```
 <appSettings>
        <add key="MailQueue" value="\MailQueue\"/>
      </appSettings> 
```

邮件队列停止工作。我用错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:10:51.673

将 web.release.config 中的内容替换为：

```
<appSettings>
    <add
      key="MailQueue"
      value="\MailQueueProd\"
      xdt:Transform="SetAttributes(value)"
      xdt:Locator="Match(key)" />
</appSettings> 
```

在文档层次结构上方或此代码的某处，您还需要以下 XML 命名空间声明：

```
xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform" 
```

这是文档页面：http: [//msdn.microsoft.com/en-us/library/dd465318.aspx](http://msdn.microsoft.com/en-us/library/dd465318.aspx)

# sql-server-2008-r2 - sql server 将日期转换为字符串 MM/DD/YYYY

> ID：11854775
> 
> 赞同：48
> 
> 时间：2012-08-07T22:05:08.570
> 
> 标签：sql-server-2008-r2

我正在使用 SQL Server 2008。

我有以下内容：

```
 select convert(varchar(20),fmdate) from Sery 
```

如何将日期转换为字符串，使其显示为 MM/DD/YYYY

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-08-07T22:13:33.720

该任务应该由软件堆栈中的下一层完成。SQL 是数据存储库，而不是表示系统

你可以这样做

```
CONVERT(VARCHAR(10), fmdate(), 101) 
```

但你不应该

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-08-07T22:13:07.257

```
select convert(varchar(10), fmdate, 101) from sery 
```

101 是一种风格论证。

其余的可以在这里找到。

[T-SQL 转换/将日期转换为字符串](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-03T12:43:37.637

```
select convert(varchar(10), cast(fmdate as date), 101) from sery 
```

没有演员表我没有得到 fmdate 转换，所以 fmdate 是一个字符串。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-11-19T00:42:39.700

*从 SQL Server 2012+ 开始*，您可以使用[`FORMAT(*value, format [, culture ]*)`](https://docs.microsoft.com/en-us/sql/t-sql/functions/format-transact-sql)

参数`format`采用任何有效的[标准格式字符串](https://docs.microsoft.com/en-us/dotnet/standard/base-types/standard-date-and-time-format-strings)或[自定义格式字符串的位置](https://docs.microsoft.com/en-us/dotnet/standard/base-types/custom-date-and-time-format-strings)

**示例**：

```
SELECT FORMAT(GETDATE(), 'MM/dd/yyyy') 
```

**延伸阅读**：

*   [如何将 DateTime 转换为 VarChar](https://stackoverflow.com/q/74385/1366033)
*   [如何将日期转换为格式`mm/dd/yyyy`](https://stackoverflow.com/q/18568410/1366033)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-01-19T15:34:27.313

请参阅有关[SQL Server Helper - SQL Server 2008 日期格式的这篇文章](http://sql-server-helper.com/sql-server-2008/sql-server-2008-date-format.aspx)

# java - 在同步块中启动一个新线程

> ID：11854778
> 
> 赞同：2
> 
> 时间：2012-08-07T22:05:17.137
> 
> 标签：java, multithreading, synchronized

可能这是一个基本问题，但想从这个论坛得到确认。

我有以下代码逻辑：

```
public Object method1() {
 synchronized(this) {
  method2();
  method3();
  method4();
} 
```

`method4()`是一项耗时的操作，我不必等待其完成。所以我写了一个spring方法拦截器，它将拦截`method4`调用并在单独的线程中执行它。现在我的问题是方法 4 执行开始后方法 1 会立即返回吗？

下面是拦截器代码：

```
public Object invoke(MethodInvocation methodInvocation) throws Throwable {
    Future<Object> future = executorService.submit(new AsyncCallable(
            methodInvocation));
    Object retVal = null;
    try {
        retVal = future.get(10, TimeUnit.SECONDS);
    } catch (Exception e) {
        logger.error("Exception while running the method Async", e);
        throw e;
    }
    return retVal;
} //AsyncCallable implements Callable interface 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T22:20:42.640

声明：`method4()`是一项耗时的操作，我不必等待其完成。

好的，线程是一个很好的解决方案。但是，通过该声明，您已经建议您想要立即返回，这将立即退出同步块。

所以，第一个问题：这是你真正想要发生的事情吗？也许不是……也许。如果`method4`在同步块之外处理是安全的，则将其移出所述块。如果它不安全，那么也许您想要做的是拦截（和线程）`method1`？

* * *

同时，回到`method4`：按照编码，您的拦截介入，创建未来，然后等待长达 10 秒以等待未来完成。之后拦截返回（完成或超时）。控制传递回方法 1，退出块/同步循环。

# node.js - 从 MongoJS 运行 MapReduce

> ID：11854789
> 
> 赞同：2
> 
> 时间：2012-08-07T22:05:56.700
> 
> 标签：node.js, mongodb, mongojs

是否可以在节点应用程序中使用[mongojs](https://github.com/gett/mongojs)运行 mapreduce 作业。我意识到在 Web 服务器代码中使用 mapreduce 并不是最有效的方法，但它是出于测试目的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T00:08:07.587

是的，看看 node_modules/mongojs/mongodb/lib/collection.js 中的以下函数定义：

Collection.prototype.mapReduce = function mapReduce (map, reduce, options, callback)

# java - 将 InputStream 的 Latin-1 内容转换为 UTF-8 字符串

> ID：11854794
> 
> 赞同：8
> 
> 时间：2012-08-07T22:06:19.877
> 
> 标签：java, string, character-encoding, inputstream

我需要将 InputStream 的内容转换为字符串。这里的难点在于输入编码，即Latin-1。我尝试了几种使用 String、getBytes、char[] 等的方法和代码片段，以便直接进行编码，但似乎没有任何效果。

最后，我想出了下面的工作解决方案。但是，这段代码对我来说似乎有点冗长，即使对于 Java 也是如此。所以这里的问题是：

*是否有更简单、更优雅的方法来实现这里所做的事情？*

```
private String convertStreamToStringLatin1(java.io.InputStream is)
        throws IOException {

    String text = "";

    // setup readers with Latin-1 (ISO 8859-1) encoding
    BufferedReader i = new BufferedReader(new InputStreamReader(is, "8859_1"));

    int numBytes;
    CharBuffer buf = CharBuffer.allocate(512);
    while ((numBytes = i.read(buf)) != -1) {
        text += String.copyValueOf(buf.array(), 0, numBytes);
        buf.clear();
    }

    return text;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T22:29:32.317

首先，对您已经采取的方法提出了一些批评。当您只`CharBuffer`想要一个`char[512]`. 您也不需要`clear`每次迭代都缓冲。

```
int numBytes;
final char[] buf = new char[512];
while ((numBytes = i.read(buf)) != -1) {
    text += String.copyValueOf(buf, 0, numBytes);
} 
```

您还应该知道，仅使用这些参数[构造 a`String`](http://goo.gl/6VnzF)将具有相同的效果，因为构造函数也会复制数据。

> 子数组的内容被复制；随后对字符数组的修改不会影响新创建的字符串。

* * *

您可以使用动态[`ByteArrayOutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/ByteArrayOutputStream.html)增长内部缓冲区来容纳所有数据。然后，您可以使用整个`byte[]`from`toByteArray`解码为`String`.

这样做的好处是，将解码延迟到最后可以避免单独解码片段；虽然这可能适用于 ASCII 或 ISO-8859-1 等简单字符集，但*不适*用于 UTF-8 和 UTF-16 等多字节方案。这意味着将来更改字符编码*更容易*，因为代码不需要修改。

```
private static final String DEFAULT_ENCODING = "ISO-8859-1";

public static final String convert(final InputStream in) throws IOException {
  return convert(in, DEFAULT_ENCODING);
}

public static final String convert(final InputStream in, final String encoding) throws IOException {
  final ByteArrayOutputStream out = new ByteArrayOutputStream();
  final byte[] buf = new byte[2048];
  int rd;
  while ((rd = in.read(buf, 0, 2048) >= 0) {
    out.write(buf, 0, rd);
  }
  return new String(out.toByteArray(), 0, encoding);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T22:20:38.727

我不明白它怎么可能更简单。我做了一次有点不同..如果你已经有一个字符串，你可以这样做：

```
new String(originalString.getBytes(), "ISO-8859-1"); 
```

所以这样的事情也可以工作：

```
BufferedReader reader = new BufferedReader(new InputStreamReader(is));
StringBuilder sb = new StringBuilder();
String line = null;
while ((line = reader.readLine()) != null) {
  sb.append(line + "\n");
}
is.close();
return new String(sb.toString().getBytes(), "ISO-8859-1"); 
```

编辑：我应该补充一点，这实际上只是您已经工作的解决方案的替代方案。当谈到在 Java 中转换 Streams 时，它不会简单得多，所以去吧。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T22:32:10.827

如果您不想自己动手，您可以查看 apache commons io 项目[IOUtils.toString(InputStream input, String encoding)](http://commons.apache.org/io/apidocs/org/apache/commons/io/IOUtils.html#toString%28java.io.InputStream,%20java.lang.String%29)，它似乎可以满足您的需求。我自己没有尝试过这种方法，但是 java 文档指出“*使用指定的字符编码将 InputStream 的内容作为字符串获取”。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T22:41:32.697

[Guava](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/io/Files.html)的 IO 包以这种方式非常好。

```
Files.toString(yourFile, CharSets.ISO_8859_1) 
```

或来自流

```
new String(ByteStreams.toByteArray(stream), CharSets.ISO_8859_1) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T22:44:06.837

我刚刚发现[这个问题](https://stackoverflow.com/a/5445161/1388240)的答案[Read/convert an InputStream to a String](https://stackoverflow.com/questions/309424/read-convert-an-inputstream-to-a-string)可以应用于我的问题，请参阅下面的代码。无论如何，我非常感谢您迄今为止给出的答案。

```
private String convertStreamToString(InputStream is, String charsetName) {
    try {
        return new java.util.Scanner(is, charsetName).useDelimiter("\\A").next();
    } catch (java.util.NoSuchElementException e) {
        return "";
    }
} 
```

所以为了从 Latin-1 编码，这样称呼它：

```
String message = convertStreamToString(is, "8859_1"); 
```

# c - C 编程逻辑 - 尝试完成线程（分叉）并且不留下失效的进程

> ID：11854798
> 
> 赞同：2
> 
> 时间：2012-08-07T22:06:35.333
> 
> 标签：c, linux, multithreading, unix, parallel-processing

我在尝试使此代码正常工作时遇到了麻烦。我想做的是让我的程序并行计算一些特定的算法。有时有效，有时无效。当我用大数字运行它时，经常会发生这种情况，但是我可以在顶部（linux 命令）中看到很多已失效的进程，我认为这是因为我的分叉正在结束异步并且一些孩子被抛在后面。但一开始我认为我的逻辑至少可以完成所有计算，因为我设置了 2 个控制变量、标志和 alldone，它们都是共享内存空间，用于完成 while 循环。我一直在寻找一些光，现在我来这里寻求帮助，因为我找不到可以帮助我的东西。谁能以某种方式帮助我解决以下代码中的逻辑问题，使我的进程可以按正确的顺序完成，避免留下失效的进程？提前致谢！

```
 for(i=0;i<numforks*sizeof(int);i++)
        flags[i] = 0;

    *alldone = numforks;
    pid = fork();

    if(pid==0) {
        pid1 = fork();
        pid2 = fork();
        pid3 = fork();

        #ifdef DEBUG_F
            printf("worker process\n");
        #endif

        do {
            thisfork = thisfork -1;
            if( flags[thisfork] == 0){
                flags[thisfork] = 1;
                #ifdef DEBUG_THREADS
                    printf("flags[%d] was zero now is %d\n", thisfork, flags[thisfork]);
                #endif
                if(thisfork == 7) {
                    heme(0,riall,chunk_size,r,pp,qq);
                    (*alldone)--;
                }
                if(thisfork == 6) {
                    heme(chunk_size,riall,chunk_size*2,r,pp,qq);
                    (*alldone)--;
                }
                if(thisfork == 5) {
                    heme(chunk_size*2,riall,chunk_size*3,r,pp,qq);
                    (*alldone)--;
                }
                if(thisfork == 4) {
                    heme(chunk_size*3,riall,chunk_size*4,r,pp,qq);
                    (*alldone)--;
                }
                if(thisfork == 3) {
                    heme(chunk_size*4,riall,chunk_size*5,r,pp,qq);
                    (*alldone)--;
                }
                if(thisfork == 2) {
                    heme(chunk_size*5,riall,chunk_size*6,r,pp,qq);
                    (*alldone)--;
                }
                if(thisfork == 1) {
                    heme(chunk_size*6,riall,chunk_size*7,r,pp,qq);
                    (*alldone)--;
                }
                if(thisfork == 0) {
                    heme(chunk_size*7,riall,chunk_size*8,r,pp,qq);
                    (*alldone)--;
                }
            }
        } while( thisfork > 0 && alldone > 0 );

        exit(0);

    } else {
        wait(&stat);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:11:28.807

如果`alldone`在共享内存中，则需要应用原子减量。否则，您的`alldone`计数器可能会处于不一致的状态。如果您使用的是 GCC，则可以使用内置函数进行减量。

```
__sync_sub_and_fetch(alldone, 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T22:12:03.360

您在上面的代码中启动了多个孩子，但您只调用`wait()`了一次。您需要等待所有孩子终止，而不仅仅是其中一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T22:16:08.337

这与您的问题无关，但您应该真正改变它：

```
if(thisfork == 7) {
    heme(0,riall,chunk_size,r,pp,qq);
    (*alldone)--;
}
if(thisfork == 6) {
    heme(chunk_size,riall,chunk_size*2,r,pp,qq);
    (*alldone)--;
}
if(thisfork == 5) {
    heme(chunk_size*2,riall,chunk_size*3,r,pp,qq);
    (*alldone)--;
}
if(thisfork == 4) {
    heme(chunk_size*3,riall,chunk_size*4,r,pp,qq);
    (*alldone)--;
}
if(thisfork == 3) {
    heme(chunk_size*4,riall,chunk_size*5,r,pp,qq);
    (*alldone)--;
}
if(thisfork == 2) {
    heme(chunk_size*5,riall,chunk_size*6,r,pp,qq);
    (*alldone)--;
}
if(thisfork == 1) {
    heme(chunk_size*6,riall,chunk_size*7,r,pp,qq);
    (*alldone)--;
}
if(thisfork == 0) {
    heme(chunk_size*7,riall,chunk_size*8,r,pp,qq);
    (*alldone)--;
} 
```

对此：

```
if(thisfork >= 0 && thisfork <=7){
    heme((7 - thisfork),riall,chunk_size*(8 - thisfork),r,pp,qq);
    (*alldone)--;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T18:51:35.383

您可以使用`wait()`停止父进程的功能，直到您的孩子终止或完成。

# android - EditText 上的 Android onKeyListener 仅在按下两次时响应“Enter”键

> ID：11854800
> 
> 赞同：6
> 
> 时间：2012-08-07T22:06:50.517
> 
> 标签：android, android-edittext, keylistener

我有一个 EditText，我想响应用户按下“Enter”键。以下是相关代码：

```
EditText edittext = (EditText) findViewById(R.id.user_query);
edittext.setOnKeyListener(new OnKeyListener() {
    public boolean onKey(View v, int keyCode, KeyEvent event) {
        if ((event.getAction() == KeyEvent.ACTION_DOWN) && (keyCode == KeyEvent.KEYCODE_ENTER || keyCode == KeyEvent.KEYCODE_DPAD_CENTER)) {
            sendMessage(v);
            return true;
        }
        return false;
        }
    }); 
```

当我在我的平板电脑（Toshiba Thrive）上运行它时，它运行良好。但是，在我的手机（HTC Desire HD）上，按下“Enter”键时 OnKeyListener 根本不会触发......但在第二次按下“Enter”时会起作用。为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T14:36:58.470

使用手机上的自动更正功能，按“Enter”一次选择建议的单词拼写。第二次按“Enter”会将按键发送到应用程序。这是一个功能，而不是一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T22:33:45.867

您是否尝试过为您的设备（Desire HD）创建一个 AVD 并查看问题是否也出现在那里？你的代码似乎找到了我

# html - 影响布局的未知表格/单元格填充/边距

> ID：11854805
> 
> 赞同：2
> 
> 时间：2012-08-07T22:07:10.283
> 
> 标签：html, css, html-table

我不知道如何消除“报告”选项卡上表格中的垂直间隙。

[http://chicagopcfix.com/skelly](http://chicagopcfix.com/skelly)

任何帮助都将非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:09:49.550

这很容易。不要将表格用于非表格数据。

* * *

我可能应该对此进行解释...您正在使用表格来呈现图像和演示内容。您可以更改单元格间距和单元格填充，直到您得到它恰到好处，但这是一个可能非常容易的事情的乏味方法。用 div 元素（或者更好的实际描述内容的语义元素）围绕您的内容，并让它们按照它们的意图流动。必要时调整边距和定位。

# css - 自定义 Twitter 引导网格不起作用

> ID：11854808
> 
> 赞同：0
> 
> 时间：2012-08-07T22:07:36.773
> 
> 标签：css, twitter-bootstrap, responsive-design

我正在尝试制作 24 列网格。我计算了这个：

网站宽度：997px

列数：24

列宽：31px

装订线宽度：11px

液柱宽度：3.1093279839519%

流体槽宽度：1.1033099297894%

哪个应该可以，但是当我将它输入到自定义表单（http://twitter.github.com/bootstrap/download.html）并下载 span8 是 778px 而它应该是 248px 时，奇怪的是它仍然上升到span24，所以它正在改变......它只是弄错了。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T23:55:32.433

它对我有用

```
.span8 {
  width: 325px;
}

.span24 {
  width: 997px;
} 
```

只需检查您是否确实更改了正确的字段，清空浏览器缓存，检查您是否打开了正确的文件并使用[此 url](http://twitter.github.com/bootstrap/customize.html)。小心不要被占位符误导。

如果它仍然不起作用，您可以下载较少的文件，更改其中的几个变量`variables.less`并自己编译（[在此处](http://lesscss.org)或使用[此 pastebin](http://pastebin.com/vXXFdvnk)获得帮助）。

# android - Android 中的动画 .gif

> ID：11854812
> 
> 赞同：0
> 
> 时间：2012-08-07T22:08:05.187
> 
> 标签：android, animated-gif

我一直在关注本教程：

[http://droid-blog.net/2011/10/15/tutorial-how-to-play-animated-gifs-in-android-%E2%80%93-part-2/](http://droid-blog.net/2011/10/15/tutorial-how-to-play-animated-gifs-in-android-%E2%80%93-part-2/)

它解释了如何将动画 .gif 添加到`Activity`. 但它没有解释如何将 .gif 添加到 .gif 中的现有文件`ImageView`中`Activity`。有没有简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T22:25:24.950

在 android Native API 中，ImageView 不支持动画图像或 .GIF 文件。显示动画图像的另一种方法如下：

1.  使用视频视图
2.  使用 ImageView 并将 gif 文件拆分为几个部分，然后对其应用动画

# php - PHP JSON_DECODE 健康数据

> ID：11854815
> 
> 赞同：-1
> 
> 时间：2012-08-07T22:08:07.143
> 
> 标签：php, json, decode

我已经阅读了所有 JSON_DECODE 帖子，但不知道如何解析这个混搭代码。

这是来源：

```
[{
    "packageInfo": [
        {
            "ndc3Segment": "58406-435-04",
            "packageDescription": "4 SYRINGE in 1 CARTON (58406-435-04)  > 1 mL in 1 SYRINGE (58406-435-01) "
        }
    ],
    "unit": "mg/mL",
    "strength": "50",
    "nda": "BLA103795",
    "proprietaryName": "ENBREL",
    "nonProprietaryName": "etanercept",
    "dosageFormname": "SOLUTION",
    "routeName": "SUBCUTANEOUS",
    "startMarketing_date": "Thu Oct 06 00:00:00 EDT 2005",
    "endMarketing_date": "",
    "labelerName": "Immunex Corporation",
    "substanceName": "ETANERCEPT",
    "ndc2Segment": "58406-435"
},
{
    "packageInfo": [
        {
            "ndc3Segment": "58406-445-04",
            "packageDescription": "4 SYRINGE in 1 CARTON (58406-445-04)  > 1 mL in 1 SYRINGE (58406-445-01) "
        }
    ],
    "unit": "mg/mL",
    "strength": "50",
    "nda": "BLA103795",
    "proprietaryName": "ENBREL",
    "nonProprietaryName": "etanercept",
    "dosageFormname": "SOLUTION",
    "routeName": "SUBCUTANEOUS",
    "startMarketing_date": "Thu Nov 10 00:00:00 EST 2005",
    "endMarketing_date": "",
    "labelerName": "Immunex Corporation",
    "substanceName": "ETANERCEPT",
    "ndc2Segment": "58406-445"
},
{
    "packageInfo": [
        {
            "ndc3Segment": "58406-425-34",
            "packageDescription": "4 KIT in 1 CARTON (58406-425-34)  > 1 KIT in 1 KIT (58406-425-41)  *  1 mL in 1 VIAL *  1 mL in 1 SYRINGE (58406-910-01) "
        }
    ],
    "unit": "",
    "strength": "",
    "nda": "BLA103795",
    "proprietaryName": "ENBREL",
    "nonProprietaryName": "etanercept",
    "dosageFormname": "KIT",
    "routeName": "",
    "startMarketing_date": "Thu Jan 02 00:00:00 EST 2003",
    "endMarketing_date": "",
    "labelerName": "Immunex Corporation",
    "substanceName": "",
    "ndc2Segment": "58406-425"
},
{
    "packageInfo": [
        {
            "ndc3Segment": "54868-4782-0",
            "packageDescription": "4 KIT in 1 CARTON (54868-4782-0)  > 1 KIT in 1 KIT *  1 mL in 1 VIAL *  1 mL in 1 SYRINGE"
        }
    ],
    "unit": "",
    "strength": "",
    "nda": "BLA103795",
    "proprietaryName": "ENBREL",
    "nonProprietaryName": "etanercept",
    "dosageFormname": "KIT",
    "routeName": "",
    "startMarketing_date": "Wed Apr 30 00:00:00 EDT 2003",
    "endMarketing_date": "",
    "labelerName": "Physicians Total Care, Inc.",
    "substanceName": "",
    "ndc2Segment": "54868-4782"
},
{
    "packageInfo": [
        {
            "ndc3Segment": "54868-5444-0",
            "packageDescription": "4 SYRINGE in 1 CARTON (54868-5444-0)  > 1 mL in 1 SYRINGE"
        }
    ],
    "unit": "mg/mL",
    "strength": "50",
    "nda": "BLA103795",
    "proprietaryName": "ENBREL",
    "nonProprietaryName": "etanercept",
    "dosageFormname": "SOLUTION",
    "routeName": "SUBCUTANEOUS",
    "startMarketing_date": "Thu Oct 06 00:00:00 EDT 2005",
    "endMarketing_date": "",
    "labelerName": "Physicians Total Care, Inc.",
    "substanceName": "ETANERCEPT",
    "ndc2Segment": "54868-5444"
},
{
    "packageInfo": [
        {
            "ndc3Segment": "58406-455-04",
            "packageDescription": "4 SYRINGE in 1 CARTON (58406-455-04)  > .5 mL in 1 SYRINGE (58406-455-01) "
        }
    ],
    "unit": "mg/.5mL",
    "strength": "25",
    "nda": "BLA103795",
    "proprietaryName": "ENBREL",
    "nonProprietaryName": "etanercept",
    "dosageFormname": "SOLUTION",
    "routeName": "SUBCUTANEOUS",
    "startMarketing_date": "Thu Nov 10 00:00:00 EST 2005",
    "endMarketing_date": "",
    "labelerName": "Immunex Corporation",
    "substanceName": "ETANERCEPT",
    "ndc2Segment": "58406-455"
}] 
```

我看到的所有嵌套 JSON 都有一个顶级通用数据名称，这似乎将“packageInfo”作为记录顶部，但我认为需要一个优于“packageInfo”的对象来保存它们。我一定是错的。

我将如何打印每个“专有名称”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:13:40.430

尝试

```
$json = json_decode($jsonstring);
foreach ($json as $package){
    echo $package->proprietaryName;
} 
```

# php - 网站搜索引擎非mysql

> ID：11854818
> 
> 赞同：2
> 
> 时间：2012-08-07T22:08:33.670
> 
> 标签：php, search, search-engine

我想知道什么是做搜索引擎的好方法。要求我创建它的人不使用 MySQL，但希望他们的页面可搜索。可悲的是，是的，他们仍在创建静态页面，那么创建搜索引擎的最佳方法是什么？

有没有办法列出网站并在 php 中使用 get_meta_tags 来查找他们为页面添加的关键字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:13:50.890

[Lucene 搜索](http://en.wikipedia.org/wiki/Lucene)是实现站点搜索的理想选择。您可以将网页、PDF 文件、Word/Excel 文档等添加到您的索引中，并且可以通过搜索相关性对结果进行排序，从而快速高效地搜索所有内容。

[Zend_Search_Lucene](http://framework.zend.com/manual/en/zend.search.lucene.overview.html)中有一个纯 PHP 的 Lucene 实现。您可以将 Zend Lucene 类作为独立的类使用，而不需要整个 Zend 框架。您可以编写代码以定期将文件和文档添加到索引中（由于更新搜索索引可能很耗时，因此应按计划或由站点所有者按需完成）。然后，您可以使用代码打开搜索索引并输入搜索查询以获取结果。上面引用的文档包含所有这些示例。

[Apache Solr](http://lucene.apache.org/solr/)也是一种可能并且被广泛使用。这是一个 Java 服务器，具有用于索引和搜索的 API，该 API 以包括 PHP 在内的多种语言实现。

# arm - 尝试将 SSE2 Fast Corner 得分代码转换为 ARM Neon

> ID：11854819
> 
> 赞同：8
> 
> 时间：2012-08-07T22:08:33.923
> 
> 标签：arm, sse, neon, computer-vision

我试图使用 ARM Neon 指令移植一些 SSE2 代码（快速角检测器分数计算）。代码乍一看很简单，但由于某种原因结果不同。问题是，有时差异可能非常显着，有时相差 2 或 3 个值。如果有人能解释为什么会发生，那就太好了。

这是代码

**原始 SSE2：**

```
__m128i q0 = _mm_set1_epi16(-1000), q1 = _mm_set1_epi16(1000);
for( k = 0; k < 16; k += 8 )
{
    __m128i v0 = _mm_loadu_si128((__m128i*)(d+k+1));
    __m128i v1 = _mm_loadu_si128((__m128i*)(d+k+2));
    __m128i a = _mm_min_epi16(v0, v1);
    __m128i b = _mm_max_epi16(v0, v1);
    v0 = _mm_loadu_si128((__m128i*)(d+k+3));
    a = _mm_min_epi16(a, v0);
    b = _mm_max_epi16(b, v0);
    v0 = _mm_loadu_si128((__m128i*)(d+k+4));
    a = _mm_min_epi16(a, v0);
    b = _mm_max_epi16(b, v0);
    v0 = _mm_loadu_si128((__m128i*)(d+k+5));
    a = _mm_min_epi16(a, v0);
    b = _mm_max_epi16(b, v0);
    v0 = _mm_loadu_si128((__m128i*)(d+k+6));
    a = _mm_min_epi16(a, v0);
    b = _mm_max_epi16(b, v0);
    v0 = _mm_loadu_si128((__m128i*)(d+k+7));
    a = _mm_min_epi16(a, v0);
    b = _mm_max_epi16(b, v0);
    v0 = _mm_loadu_si128((__m128i*)(d+k+8));
    a = _mm_min_epi16(a, v0);
    b = _mm_max_epi16(b, v0);
    v0 = _mm_loadu_si128((__m128i*)(d+k));
    q0 = _mm_max_epi16(q0, _mm_min_epi16(a, v0));
    q1 = _mm_min_epi16(q1, _mm_max_epi16(b, v0));
    v0 = _mm_loadu_si128((__m128i*)(d+k+9));
    q0 = _mm_max_epi16(q0, _mm_min_epi16(a, v0));
    q1 = _mm_min_epi16(q1, _mm_max_epi16(b, v0));
}
q0 = _mm_max_epi16(q0, _mm_sub_epi16(_mm_setzero_si128(), q1));
q0 = _mm_max_epi16(q0, _mm_unpackhi_epi64(q0, q0));
q0 = _mm_max_epi16(q0, _mm_srli_si128(q0, 4));
q0 = _mm_max_epi16(q0, _mm_srli_si128(q0, 2));
threshold = (short)_mm_cvtsi128_si32(q0) - 1; 
```

**这是工作臂霓虹灯代码：**

```
int16x8_t q0 = vdupq_n_s16(-1000), q1 = vdupq_n_s16(1000);
int16x8_t zero = vdupq_n_s16(0);
for( k = 0; k < 16; k += 8 )
{
    int16x8_t v0 = vld1q_s16((const int16_t*)(d+k+1));
    int16x8_t v1 = vld1q_s16((const int16_t*)(d+k+2));
    int16x8_t a = vminq_s16(v0, v1);
    int16x8_t b = vmaxq_s16(v0, v1);
    v0 = vld1q_s16((const int16_t*)(d+k+3));
    a = vminq_s16(a, v0);
    b = vmaxq_s16(b, v0);
    v0 = vld1q_s16((const int16_t*)(d+k+4));
    a = vminq_s16(a, v0);
    b = vmaxq_s16(b, v0);
    v0 = vld1q_s16((const int16_t*)(d+k+5));
    a = vminq_s16(a, v0);
    b = vmaxq_s16(b, v0);
    v0 = vld1q_s16((const int16_t*)(d+k+6));
    a = vminq_s16(a, v0);
    b = vmaxq_s16(b, v0);
    v0 = vld1q_s16((const int16_t*)(d+k+7));
    a = vminq_s16(a, v0);
    b = vmaxq_s16(b, v0);
    v0 = vld1q_s16((const int16_t*)(d+k+8));
    a = vminq_s16(a, v0);
    b = vmaxq_s16(b, v0);
    v0 = vld1q_s16((const int16_t*)(d+k));
    q0 = vmaxq_s16(q0, vminq_s16(a, v0));
    q1 = vminq_s16(q1, vmaxq_s16(b, v0));
    v0 = vld1q_s16((const int16_t*)(d+k+9));
    q0 = vmaxq_s16(q0, vminq_s16(a, v0));
    q1 = vminq_s16(q1, vmaxq_s16(b, v0));
}
q0 = vmaxq_s16(q0, vsubq_s16(zero, q1));
// first mistake it produce wrong result
//q0 = vmaxq_s16(q0, vzipq_s16(q0, q0).val[1]);
// may be someone knows faster/better way?
int16x4_t a_hi = vget_high_s16(q0);
q1 = vcombine_s16(a_hi, a_hi);
q0 = vmaxq_s16(q0, q1);

// this is _mm_srli_si128(q0, 4)
q1 = vextq_s16(q0, zero, 2);

q0 = vmaxq_s16(q0, q1);

// this is _mm_srli_si128(q0, 2)
q1 = vextq_s16(q0, zero, 1);
q0 = vmaxq_s16(q0, q1);

// read the result
int16_t __attribute__ ((aligned (16))) x[8];
vst1q_s16(x, q0);

threshold = x[0] - 1; 
```

这段代码似乎是正确的，所以如果有人觉得它有用的话……快速角检测器是目前最快的。通过如此小的优化，它可能在手机上运行得更快。

# php - 在 SQL 数据库中存储字符串

> ID：11854823
> 
> 赞同：0
> 
> 时间：2012-08-07T22:09:01.453
> 
> 标签：php, sql

我只是在玩弄 .php 和 SQL，并试图测试一些东西。我知道将变量存储在表中是一件非常容易的事情，但由于某种原因，它现在对我不起作用。

这是我的表：

```
+-------+--------------+------+-----+---------+-------+
| Field | Type         | Null | Key | Default | Extra |
+-------+--------------+------+-----+---------+-------+
| v1    | varchar(255) | YES  |     | NULL    |       | 
| v2    | varchar(255) | YES  |     | NULL    |       | 
| v3    | varchar(255) | YES  |     | NULL    |       | 
| v4    | varchar(255) | YES  |     | NULL    |       | 
| v5    | varchar(255) | YES  |     | NULL    |       | 
| v6    | varchar(255) | YES  |     | NULL    |       | 
| v7    | varchar(255) | YES  |     | NULL    |       | 
| v8    | varchar(255) | YES  |     | NULL    |       | 
| v9    | varchar(255) | YES  |     | NULL    |       | 
| v10   | varchar(255) | YES  |     | NULL    |       | 
+-------+--------------+------+-----+---------+-------+ 
```

我像这样访问表格：

```
$result = mysql_query("INSERT INTO form2 (v1, v2, v3, v4, v5, v6, v7, v8, v9, v10) VALUES ($field0, $field1, $field2, $field3, $field4, $field5, $field6, $field7, $field8, $field9)"); 
```

我通过这样做从 url 获取变量：

```
$field0 = $_GET['field0'];
$field1 = $_GET['field1'];
$field2 = $_GET['field2']; 
$field3 = $_GET['field3'];
$field4 = $_GET['field4'];
$field5 = $_GET['field5'];
$field6 = $_GET['field6'];
$field7 = $_GET['field7']; 
$field8 = $_GET['field8'];
$field9 = $_GET['field9']; 
```

最后，我的网址是：

```
http://mywebsite.ca/anapplication?field0=YES&field1=GOOD&field2=GOOD&field3=GOOD&field4=YES&field5=GOOD&field6=GOOD&field7=GOOD&field8=A&field9=& 
```

我收到一条错误消息，指出存在未知列“YES”（第一个参数）。我用数字而不是字符串传递了相同的 URL，令我惊讶的是，当时一切正常。

我对 .php 或 SQL 没有太多经验，所以我正在寻找一种新的眼光来快速浏览一下我在这里发布的内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T22:12:16.053

I believe you need to wrap your values in single quotes, that way mysql treats them as strings instead of integers. This would be why passing only numbers through works while strings do not.

So,

```
$result = mysql_query("INSERT INTO form2 (v1, v2, v3, v4, v5, v6, v7, v8, v9, v10) VALUES ('$field0', '$field1', '$field2', '$field3', '$field4', '$field5', '$field6', '$field7', '$field8', '$field9')"); 
```

should clear it up.

Also, if this is coming from a web form or other outside source, make sure to sanitize it using something like mysql_real_escape_string().

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T22:16:28.573

You should probably have a look at [mysqli](http://no.php.net/manual/en/mysqli.quickstart.php) or [PDO](http://no.php.net/manual/en/book.pdo.php) instead of the old mysql_ library, but other than that, the issue is that you're not generating valid SQL.

```
INSERT INTO form2 (v1, v2 ...) VALUES(GOOD0, GOOD1 ...) 
```

is not valid SQL: you'll have to add single or double quotes around the values for them to be treated as strings:

```
INSERT INTO form2 (v1, v2 ...) VALUES('GOOD0', 'GOOD1' ...) 
```

Since the strings submitted can also contain quotes (and therefore make your generated SQL invalid or perform tasks you don't want it to perform), you should always [use prepared statements](http://no.php.net/manual/en/mysqli.quickstart.prepared-statements.php) or if not available, escape the string properly by using the library's escape function (such as [mysql_real_escape_string](http://no.php.net/mysql_real_escape_string)).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T22:25:41.620

As I already commented:

> Please, don't use `mysql_*` functions for new code. They are no longer maintained and the community has begun the [deprecation process](http://goo.gl/KJveJ). See the [**red box**](http://goo.gl/GPmFd)? Instead you should learn about [prepared statements](http://goo.gl/vn8zQ) and use either [PDO](http://php.net/pdo) or [MySQLi](http://php.net/mysqli). If you can't decide, [this article](http://goo.gl/3gqF9) will help to choose. If you care to learn, [here is a good PDO tutorial](http://goo.gl/vFWnC).

When using prepared statements you also get rid of [that nasty SQL Injection](http://en.wikipedia.org/wiki/SQL_injection) vulnerability you have there.

To use PDO you would do something like:

```
$pdo= new PDO('mysql:dbname=dbtest;host=127.0.0.1;charset=utf8', 'user', 'pass');

$pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

$stmt = $pdo->prepare('INSERT INTO form2 (v1, v2, v3, v4, v5, v6, v7, v8, v9, v10) VALUES (:v1, :v2, :v3, :v4, :v5, :v6, :v7, :v8, :v9, v10');
$stmt->execute(array(
    ':v1'  => $_GET['field0'],
    ':v2'  => $_GET['field1'],
    ':v3'  => $_GET['field2'],
    ':v4'  => $_GET['field3'],
    ':v5'  => $_GET['field4'],
    ':v6'  => $_GET['field5'],
    ':v7'  => $_GET['field6'],
    ':v8'  => $_GET['field7'],
    ':v9'  => $_GET['field8'],
    ':v10' => $_GET['field9'],
)); 
```

As for your original question: you just forgot the quotes around the values :-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T22:17:45.047

It looks like you are actually trying to input the values that those variables represent as opposed to actually inserting $field0 into the v1 field. So you would need to concatenate the string with the single quotes. It's been a while since I used PHP, but that should be using the "." if I remember correctly so it might be something like:

```
$result = mysql_query("INSERT INTO form2 (v1, v2, v3, v4, v5, v6, v7, v8, v9, v10) VALUES ('" . $field0 . "', '" . $field1 . "', '" . $field2 . "', '" . $field3 . "', '" . $field4 . "', '" . $field5 . "', '" . $field6 . "', '" . $field7 . "', '" . $field8 . "', '" . $field9 .  "')"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T22:20:01.990

ok, in PHP we do not have debugger mode to watch variables and steps that are executing program so whenever you find such types of strange errors or bugs in PHP, do not insert directly values in database in beginner's level, first you should get all the values from query string as you mention in your question, then create a query and assign into a variable like

```
$query ="INSERT INTO form2 (v1, v2, v3, v4, v5, v6, v7, v8, v9, v10) VALUES ($field0, $field1, $field2, $field3, $field4, $field5, $field6, $field7, $field8, $field9)"; 
```

and then you need to echo that query **`echo $query;`** on the browser, execute first it on **SQLYog or PHPMyAdmin**, if it works fine then do the remaining work in PHP coding. I think it is a very nice practice for starters.

Thank you.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-07T22:22:07.603

My guess is that somehow PHP is assuming the "YES" is a boolean (like TRUE or FALSE or 0 and 1 where 0 equals NO and 1 equals YES).

First method would be to not use the full word "YES" but rather "y" or "n". I notice many databases use a CHAR(1) column for yes or no type data... which stores a simply "y" or "n" in the field.

If that's not an option, the best way to guarantee that your inserting a string is to have PHP convert it to a string before the SQL INSERT.

Unfortunately PHP does not make converting BOOLEANS into STRINGS as simple as strval(). But what you CAN do is check whether the value is TRUE or FALSE and set the value accordingly.

```
<?php
$field0 = ($_GET['field0'] == "YES") : "YES" : "NO"; // if equals to YES set to (string) YES; else set to (string) NO. 
```

[http://php.net/manual/en/language.types.boolean.php](http://php.net/manual/en/language.types.boolean.php)

# mysql - 如何检查用户是否存在于mysql数据库vb.net中

> ID：11854824
> 
> 赞同：1
> 
> 时间：2012-08-07T22:09:01.813
> 
> 标签：mysql, vb.net

我有一些代码要从 mysql 数据库中读取，但我只是想知道如何修改它以查看表中是否存在用户？

谢谢

```
 Private Sub GetDBData()
    Try
        'prepare connection query 
        strQuery = "SELECT users.Username, users.Password " & _
        "FROM users " & _
        "WHERE Username='User'"
        SQLCmd = New MySqlCommand(strQuery, dbCon)
        'open db and start query
        dbCon.Open()
        DR = SQLCmd.ExecuteReader
        While DR.Read
            MysqlData.Text = MysqlData.Text & DR.Item("Username") & Space(10) & DR.Item("Password") & vbCrLf
        End While
        'done so closing db
        DR.Close()
        dbCon.Close()

    Catch ex As Exception
        MessageBox.Show(ex.Message)
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T22:43:34.200

使用`command`with`parameters`来避免 SQL 注入。*如果您只是通过进行一些比较来检查用户名是否存在*，那么一种策略是创建一个返回布尔值的函数。以下是根据您的需要的示例代码。

```
Private Function IsUserExist(userName as string) AS Boolean

        Dim returnValue as boolean = false

        strQuery = "SELECT COUNT(*)"
        strQuery &= "FROM users "
        strQuery &= "WHERE Username = @xUserName "

        Using xConn as new MySQLCnnection("connectionStringHere")
            Using xComm as New MySQLCommand()
                With xComm
                    .Connection = xConn
                    .CommandText = strQuery
                    .CommandType = CommandType.Text
                    .Parameters.AddWithValue("@xUserName", userName)
                End With
                Try
                    xConn.Open()
                    If CInt(xComm.ExecuteScalar()) > 0 Then
                        returnValue = true
                    End If
                Catch ex as MySQlException
                    MsgBox(ex.Message)
                    returnValue = false
                Finally
                    xConn.Close
                End Try
            End Using
        End Using

        return returnValue
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T22:43:50.077

修改它？这样做太不对劲了。没有 using 块、异常吞咽和潜在的 sql 注入攻击。

类似的东西（我不做VB，但基本想法是合理的）

```
Private Function UserExists(argUser As string) As Bool
  strQuery = "SELECT Username FROM users WHERE Username=?User"
  Using SQLcmd = New MySqlCommand(strQuery, dbCon)
    SQLCmd.Parameters.Add("?User",argUser)  
    dbCon.Open()
    Using reader = SQLCmd.ExecuteReader()
      return reader.Read()
    End Using
  End Using
End Function 
```

如果是我，我也会实例化一个连接，而不是从你当前所在的任何地方（在 using 块中）获取它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T22:16:23.237

一种简单的方法是进行如下查询：

```
SELECT COUNT(*) FROM users WHERE Username='user123'; 
```

你运行它，取回它返回的值，如果它是 0 则用户不存在。如果为 1，则他存在，如果大于 1，则有问题（您有多个用户具有相同的用户名）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-07T22:27:29.027

我的 VB 很生锈，但这是它的要点；

```
Private Sub GetDBData()
Try
    'prepare connection query 
    strQuery = "SELECT users.Username, users.Password " & _
    "FROM users " & _
    "WHERE Username='User'"
    SQLCmd = New MySqlCommand(strQuery, dbCon)
    'open db and start query
    dbCon.Open()
    DR = SQLCmd.ExecuteReader

    If DR.HasRows Then

        While DR.Read
            MysqlData.Text = MysqlData.Text & DR.Item("Username") & Space(10) & DR.Item("Password") & vbCrLf
        End While
    Else
        'COMMENT: Your user didn't exist
    End If

    'done so closing db

    'COMMENT: move to a finally() section and check objects are not null before closing
    DR.Close()
    dbCon.Close()

Catch ex As Exception
    MessageBox.Show(ex.Message)
End Try 
```

结束子

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T23:21:13.040

```
Protected Sub btnlogin_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnlogin.Click
    Dim myAdapter As New MySqlDataAdapter
    Dim myCommand As New MySqlCommand
    Dim myData As MySqlDataReader
    Dim conn As MySqlConnection = New MySqlConnection("Data Source=localhost;Database=name;User ID=root;Password=pwd;")

    Dim loginstring As String = "SELECT uname,password,type FROM logindetails WHERE uname = '" + txtuname.Text + "' AND password = '" + txtpwd.Text + "' "
    Try
        conn.Open()
    Catch myerror As MySqlException 'If it fails do this... (i.e. no internet connection, etc.)
        MsgBox("Error connecting to database. Check your internet connection.", MsgBoxStyle.Critical)
    End Try

    myCommand.Connection = conn
    myCommand.CommandText = loginstring
    myAdapter.SelectCommand = myCommand
    myData = myCommand.ExecuteReader

    If myData.HasRows = 0 Then
        MsgBox("Invalid Credentials", MsgBoxStyle.Critical)
    Else
        Response.Redirect("Adminhome.aspx")
        MsgBox("Logged in as " & txtuname.Text & ".", MsgBoxStyle.Information)
    End If
    conn.Close()
End Sub 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-04T15:46:59.190

它很简单...

在进入 while 循环之前，声明一个整数并将其设置为零。在开始获取数据之前的 while 循环中，将该整数设置为 1。在 while 之外但在 catch 之前，放置一个 if 语句来通知您整数何时仍为零，这意味着数据库中没有数据。像这样的东西...

```
Private Sub GetDBData()
    Try
        'prepare connection query 
        strQuery = "SELECT users.Username, users.Password " & _
        "FROM users " & _
        "WHERE Username='User'"
        SQLCmd = New MySqlCommand(strQuery, dbCon)
    'open db and start query
    dbCon.Open()
        DR = SQLCmd.ExecuteReader
        Dim x As Integer = 0
        While DR.Read
        x = 1
        MysqlData.Text = MysqlData.Text & DR.Item("Username") & Space(10) & DR.Item("Password") & vbCrLf
    End While
    'done so closing db

    DR.Close()
    dbCon.Close()

   if x = 0
        Messagebox.Show("Record not found")
   End If
Catch ex As Exception
    MessageBox.Show(ex.Message)
End Try 
```

结束子

# caching - 如何使用 RESTlet 缓存响应？

> ID：11854825
> 
> 赞同：0
> 
> 时间：2012-08-07T22:09:09.240
> 
> 标签：caching, restlet

我已经阅读了 RESTlets 中用于缓存响应的 CacheDirective 类，但是我还没有看到任何关于如何实现它的示例。

有没有人有我如何在我的 ServerResource 类中完成此操作的示例？

# eclipse - 在 Eclipse 中使用东芝 AT300 作为设备

> ID：11854829
> 
> 赞同：0
> 
> 时间：2012-08-07T22:09:30.470
> 
> 标签：eclipse, device

我使用的是带有 android 4 的东芝 at320 平板电脑。我找不到任何 USB OEM 驱动程序来从 Eclipse 运行应用程序。有可用的驱动程序吗？

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T19:14:51.303

好的，那东西现在可以工作了……在更好的连接上。所有这些关于下载的漂亮闪亮的东西都没有提到文件损坏的东西......虽然文件大小不同:-(

在 3G 连接上，它的大小为 9 MB，并且可以正常工作。Eclipse 现在显示我的平板电脑 (AT300) 并在平板电脑本身上运行我的应用程序，而不是在模拟器上运行。所以我认为这是一个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T17:14:43.247

我在此站点上找到了驱动程序下载...我无法保证来源，但它对我有用（向下滚动广告到实际的消息帖子）

[http://www.thriveforums.org/forum/toshiba-excite-10-development/11311-adb-drivers-excite-usb-adb-driver-installation-package.html](http://www.thriveforums.org/forum/toshiba-excite-10-development/11311-adb-drivers-excite-usb-adb-driver-installation-package.html)

# sql-server-2008 - SSIS-Trigger 不会停止包执行

> ID：11854830
> 
> 赞同：0
> 
> 时间：2012-08-07T22:09:33.170
> 
> 标签：sql-server-2008, ssis

我正在执行一个 SSIS 包。该包将一个 excel 文件导入 SQL Server 数据库 2008。我在 excel 导入期间设置了 FIRE_TRIGGERS 选项。如果在 INSERT 之后有某个条件，我想停止包的执行。但是我尝试了很多东西，但我没有成功。我剥离了触发器，只在每次插入时引发错误。但是，SSIS 包并没有停止。它稍后会停止，因为如果发现重复记录，sproc 将无法执行。我希望它在触发器被触发后停止。谢谢你的帮助

我的触发器代码：

```
ALTER TRIGGER [dbo].[TrigInsertBill]
ON [Invoice].[dbo].[Bill]
AFTER INSERT 
AS
BEGIN
RAISERROR('This month/year combo exist in the BILL TABLE',16,1)

 END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T22:27:52.190

我个人建议将 Excel 文件加载到临时表中。然后添加一个执行 SQL 任务来检查您想要检查的条件并在触发器中引发错误。这就是当文件无法包含特定条件时停止我的包的方式。

如果您想简单地跳过不良记录，那是一个不同的过程。您可以使用条件拆分来识别您不想要的记录并将它们发送到异常表。

# android - 活动关闭后发生回调时会发生什么

> ID：11854834
> 
> 赞同：0
> 
> 时间：2012-08-07T22:10:01.297
> 
> 标签：android, callback

让我说我在某些活动中，并调用一些后台操作

```
SomeOperation someOperation = new SomeOperation();
someOperation.setOnOperationFinishListener(new OnOperationFinishListener(
{
   public void onOperationFinish()
   {
     // do some stuff
   }

});
someOperation.start(); 
```

如果我在操作完成之前退出活动会不会有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:20:53.143

您的伪代码似乎有点混乱。但我的猜测是，这将取决于您正在执行的后台操作。如果您从服务器或类似的东西上抓取文件，那么您在操作有机会完全完成它的任务之前退出活动......这应该不是什么大问题。但同样，这取决于你到底想在这里做什么。

# sql - 创建过程所需的简单初学者 Oracle PL/SQL 帮助/修复

> ID：11854835
> 
> 赞同：2
> 
> 时间：2012-08-07T22:10:03.653
> 
> 标签：sql, oracle, plsql, oracle11g, plsqldeveloper

我是 PL/SQL 的新手，所以如果这看起来太像初学者的问题，请不要标记我。我已经花了几个小时来解决这个问题，现在正在寻求帮助。此外，请记住此代码不完整。我正在寻求帮助来完成它。所以我正在尝试为我的测试表创建一个名为 KEYBOARD_LEARNING 的简单过程。我以前必须手动使用此代码：

```
INSERT INTO keyboard_learning (emplid, wpm, date_completed,exercise,attempt,score_lvl) 
VALUES ('000000000','37.66','04-JUL-2012','Keyhero.com','28','95.87% accuracy') 
```

..每次我想在 KEYBOARD_LEARNING 中记录一个新分数。我想我可以创建一个程序来为我处理这个问题，但我需要它不是静态的，因为我在调用这个程序时输入的值总是在变化。关于如何使我拥有的代码具有这种最佳功能的任何想法？顺便说一句，下面的代码没有执行，我相信有经验的 Oracle 用户将能够立即找出原因。

谢谢

```
CREATE OR REPLACE PROCEDURE INSERT_WPM_SCORE
(
          P_EMPLID VARCHAR2
         ,P_WPM NUMBER
         ,P_DATE_COMPLETED SYSDATE
         ,P_EXERCISE VARCHAR2
         ,P_ATTEMPT VARCHAR2
         ,P_SCORE_LVL VARCHAR2
) AS

          /*
          Original Author: 
          Created Date: 2-Aug-2012
          Purpose: For inputting latest WPM score from typing practice
          */

          /*variables*/

          L_EMPLID VARCHAR2(4000);
          L_WPM NUMBER;
          L_DATE_COMPLETED SYSDATE;
          L_EXERCISE VARCHAR2(4000);
          L_ATTEMPT VARCHAR2(4000);
          L_SCORE_LVL VARCHAR2(4000);
          L_PREVENT_NULL_INPUT EXCEPTION;
          PRAGMA EXCEPTION_INIT(L_PREVENT_NULL_INPUT, -44002); --GET CORRECT ERROR # BY TESTING WITHOUT EXCEPTION
          VALUES VARCHAR2(4000);  [b]<-- getting an error here[/b]

          /*Procedure 'W' is a wrapper for DBMS output*/
          PROCEDURE W(STR VARCHAR2) IS
                        L_STRING VARCHAR2(4000);
          BEGIN
                        /*Outputting string parameter passed into 'W' procedure*/
                        L_STRING := STR;
                        DBMS_OUTPUT.PUT_LINE(STR);
          END;

BEGIN

         VALUES := (L_EMPLID, L_WPM,  L_DATE_COMPLETED, L_EXERCISE,  L_ATTEMPT,L_SCORE_LVL);

          SELECT INTO (SELECT *
                       FROM KEYBOARD_LEARNING A
                       ORDER BY A.EXERCISE
                               ,TO_NUMBER(ATTEMPT))

                     -- DBMS_OUTPUT.PUT_LINE(RESULTS);

EXCEPTION
          /* */            
          WHEN L_PREVENT_NULL_INPUT THEN
                        NULL;

          /*this exception catches all other exceptions*/
          WHEN OTHERS THEN
                        W('ERROR: ' || SQLERRM);

END; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T22:20:37.200

首先，让我们实现最简单的可行的方法

```
CREATE OR REPLACE PROCEDURE INSERT_WPM_SCORE
(
          P_EMPLID VARCHAR2
         ,P_WPM NUMBER
         ,P_DATE_COMPLETED DATE DEFAULT SYSDATE
         ,P_EXERCISE VARCHAR2
         ,P_ATTEMPT VARCHAR2
         ,P_SCORE_LVL VARCHAR2
) AS
BEGIN
  INSERT INTO keyboard_learning (emplid, wpm, date_completed,exercise,attempt,score_lvl) 
    VALUES( p_emplid, p_wpm, p_date_completed, p_exercise, p_attempt, p_score_lvl );
END; 
```

假设这可行，那么您可以向该过程添加额外的功能。不幸的是，对我来说，您想要实现哪些附加功能并不明显。

*   例如，您有一个似乎想要根据`NULL`输入抛出和/或捕获的异常，但我不确定它试图完成什么。您是否尝试验证程序的输入？您是否试图捕获在执行`INSERT`并违反`NOT NULL`约束时引发的异常？还有什么？
*   我不确定`SELECT`您原始帖子中的声明是什么意思。也许您正试图覆盖`p_attempt`传递给过程的那个？

此外，作为一般规则，捕获您无法处理的异常是一个错误，`WHEN OTHERS`而后面没有 a 的 a`RAISE`几乎总是一个错误。如果您捕获异常并将其写入`SQLERRM`，`DBMS_OUTPUT`您将丢失异常提供的所有有用的堆栈跟踪信息，您将丢失生成错误的代码的行号，您依赖于客户端应用程序来实际启用`DBMS_OUTPUT`缓冲区并从中读取（大多数客户端应用程序没有），并且您正在阻止过程的调用者确定调用失败。完全消除异常处理程序会更好地为您服务。

# python - Python IO：在 open() 期间向文件名添加字符

> ID：11854837
> 
> 赞同：0
> 
> 时间：2012-08-07T22:10:19.930
> 
> 标签：python, file-io, ftp, io

我正在为来自 CDC 的 NHANES 数据集编写数据抓取工具。我在使用文件 IO 时遇到问题。

给定年份、组和标题（例如 2000、“exam”、“Audiometry”），我创建文件名字符串：

```
filename = "nhanes."+str(year)+"-"+str(year+1)+"."+group+"."+titles[i]+".xpt" 
```

这成功打印为

```
"nhanes.2000-2001.exam.Audiometry.xpt" 
```

然后，我使用以下代码通过 ftp 服务器下载 .xpt 文件：

```
req = urllib2.Request(ftp_loc)
response = urllib2.urlopen(req)
xpt_data = response.read()
f = open(filename, 'w')
f.write(xpt_data)
f.close() 
```

**ftp_loc**类似于“ftp://ftp.cdc.gov/pub/Health_Statistics/NCHS/nhanes/2001-2002/OHXPRL_B.xpt”

然后，问题：我收到错误消息

```
Traceback (most recent call last):
  (... method stack here ...)
IOError:[Errno 22] invalid mode ('w') or filename: 'nhanes.2000-2001.exam.Audiometry\r.xpt' 
```

正如你所看到的，文件名现在有一个“\r”:(关于它是如何到达那里的任何想法？谢谢！！~Emily

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T22:32:19.110

文件名中的`\r`可能到达那里，因为它已经存在于您从中创建文件名的数据中。特别是`titles[i]`。如果您向我们展示填充该数组的代码，我们也许能够提供更好的解决方案。

在此期间的解决方法如下：

```
filename = "nhanes.%d-%d.%s.%s.xpt" % (year, year+1, group titles[i].strip()) 
```

您的问题的实际解决方案是调用`strip`将摆脱回车符的字符串方法（这`\r`就是所谓的）。请注意，该`strip`方法还将摆脱其他字符（[主要是空格](http://docs.python.org/library/stdtypes.html#str.strip)）。

对代码的其他更改只是 - 在我看来 - 编写与您编写的相同内容的更好方法。您实际上不是连接子字符串，而是使用内置[字符串格式](http://docs.python.org/library/stdtypes.html#string-formatting-operations)来创建文件名。最终结果应该是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T22:40:26.893

年、组、题名的内容从何而来？\r 是一个回车符，所以我建议你清理它们以确保删除所有这些字符，无论是在填充列表时，还是在使用它们时。

```
filename = "nhanes."+str(year)+"-"+str(year+1)+"."+group+"."+titles[i].strip("\r")+".xpt" 
```

# ruby - 如何标记黄瓜场景大纲示例以与 VCR 磁带一起使用？

> ID：11854839
> 
> 赞同：2
> 
> 时间：2012-08-07T22:10:22.970
> 
> 标签：ruby, ruby-on-rails-3, cucumber, vcr

我想根据示例中的标签应用不同的 VCR 磁带。据我所知，标记黄瓜场景大纲示例是可能的，但我无法让 VCR 识别任何标签。这可能吗？

```
VCR.cucumber_tags do |t|
  t.tag '@premium-successful-payment'
  t.tag '@premium-card-declined'
end

Feature:

  Background:
    Given I am signed in 
    And I am on the premium payment page

  @javascript
  Scenario Outline: Submitting payment information
    When I fill in "Credit Card Number" with "<card_number>"
    And I fill in "Security Code" with "<security_code>"
    And I select "<expires_month>" from "credit_card_expires_month"
    And I select "<expires_year>" from "credit_card_expires_year"
    And I press "Activate Premium"
    Then I should see a payment success message

    @premium-successful-payment
    Examples:
      | card_number      | security_code | expires_month | expires_year |
      | 4242424242424242 | 123           | 6             | 2020         |

    @premium-card-declined
    Examples:
      | card_number      | security_code | expires_month | expires_year |
      | 4000000000000002 | 123           | 6             | 2020         | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T00:44:19.960

在 github 上有一个关于此的[公开请求请求。](https://github.com/myronmarston/vcr/pull/186)我想在某个时候合并它，但我对实现有些担心，PR 的作者还没有回复我的评论。

`VCR.insert_cassette`同时，您可以考虑使用可用的黄瓜挂钩和 VCR / `VCR.eject_cassette`API编写自己的 VCR/黄瓜集成。Cucumber 集成并不意味着人们将 VCR 与 Cucumber 一起使用的主要或唯一方式。这只是满足最常见需求的一种便捷方式。

# c# - 在 C# .net 4.0 中运行时加载 TLB

> ID：11854840
> 
> 赞同：1
> 
> 时间：2012-08-07T22:10:28.150
> 
> 标签：c#, dllimport, typelib, tlbimp

我有一个来自第三方库的 tlb 文件。这个库有很多版本，但是我在 tlb 中使用的函数是不变的，即不会从一个版本更改为下一个版本。

我已将 tlb 文件作为 COM 参考添加到项目中。我可以成功构建和调用第三方库中的函数。

当我部署我的应用程序时，我不能保证用户将在他们的 PC 上安装与我相同的第三方版本。当出现这种情况时，一旦调用第三方库中的函数，他们就会收到访问冲突错误 (0xc0000005)。

如何在运行时加载位于用户 PC 上的 tlb 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T22:24:49.817

您应该能够使用 C# 4 的动态以及[Type.GetTypeFromProgID](http://msdn.microsoft.com/en-us/library/hss5hw09.aspx)来加载 COM 对象并通过动态绑定使用它。

```
 dynamic obj = Activator.CreateInstance(Type.GetTypeFromProgID(comTypeName));

 // Use object via dynamic binding directly
 obj.Foo(); 
```

这避免了将有关 COM 对象版本的任何内容编译到您的程序集中的需要。只要您使用正确的 API，并且您使用的方法/等存在，它将适用于任何版本。

# c - 如何在 8051 uC 上以纯 C 存储 32 位整数变量

> ID：11854842
> 
> 赞同：0
> 
> 时间：2012-08-07T22:10:35.627
> 
> 标签：c, integer, bit, 8051

我正在尝试用 C 语言在 8051 uC 上编写一些软件。问题是最长整数等于 16 位。是否可以创建自己的 32 位无符号整数变量？当然它应该支持所有操作，如 +、-、<< 等。

如果不可能，还有什么选择？对我来说，我想到的唯一方法是拥有两个 16 位整数。但在那个解决方案中，我认为我不能使用标准运算符。在所有操作中，我必须记住修改两个整数。

有没有更好的办法？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:15:25.077

如果您的编译器/libc 实现符合 C99，您可以使用

```
uint32_t 
```

类型来表示 32 位无符号整数。如果没有，你仍然可以给

```
unsigned long 
```

试一试（打印它的 sizeof 以查看它有多大）。

# asp.net - 没有 SecurityGuard.MVC4 的文档

> ID：11854846
> 
> 赞同：0
> 
> 时间：2012-08-07T22:10:55.590
> 
> 标签：asp.net, asp.net-mvc-4, visual-studio-2012

我正在尝试向 MVC4 应用程序添加一个好的授权包。我通过 Visual Studio 2012 的包管理控制台继续 Install-Package SecurityGuard.mvc4。安装后，我不知道如何实现它。是否有我可以使用的用户指南、示例应用程序或教程？谢谢，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T23:23:53.317

我也安装了这个包，但这使用了旧的会员计划，意味着 11 个表。如果 SecurityGuard 是在新的 MVC4 规范中构建的，那么它只需要使用 5 个表。无论如何，我试图找到官方文档，但我认为唯一的就是源代码本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:56:21.457

在 github 页面上，开发者继续积极支持它。它提到有一个维基，在这里：[https ://github.com/kahanu/Security-Guard/wiki](https://github.com/kahanu/Security-Guard/wiki)

# python - 如何在 Jupyter Notebook 中显示文件中的图像？

> ID：11854847
> 
> 赞同：261
> 
> 时间：2012-08-07T22:11:04.000
> 
> 标签：python, jupyter-notebook, ipython

我想使用[IPython 笔记本](http://ipython.org/notebook.html)作为交互式分析我使用 Biopython[`GenomeDiagram`](http://biopython.org/DIST/docs/tutorial/Tutorial.html#sec329)模块制作的一些基因组图表的一种方式。虽然有大量关于如何`matplotlib`在 IPython 笔记本中使用内联图形的文档，但 GenomeDiagram 使用 ReportLab 工具包，我认为 IPython 中的内联图形不支持该工具包。

然而，我在想，解决这个问题的一种方法是将绘图/基因组图写到一个文件中，然后打开内联图像，这将具有相同的结果，如下所示：

```
gd_diagram.write("test.png", "PNG")
display(file="test.png") 
```

但是，我无法弄清楚如何做到这一点 - 或者知道它是否可能。那么有谁知道图像是否可以在 IPython 中打开/显示？

* * *

## 回答 #1

> 赞同：440
> 
> 时间：2012-08-07T22:37:17.960

感谢[这篇文章](http://python.6.n6.nabble.com/IPython-User-ipython-notebook-how-to-display-image-not-from-pylab-td4497427.html)，您可以执行以下操作：

```
from IPython.display import Image
Image(filename='test.png') 
```

（[官方文档](http://ipython.readthedocs.io/en/stable/api/generated/IPython.display.html?highlight=display#IPython.display.Image)）

* * *

## 回答 #2

> 赞同：270
> 
> 时间：2016-01-28T12:20:52.350

如果您尝试在循环中以这种方式显示 Image，则需要将 Image 构造函数包装在 display 方法中。

```
from IPython.display import Image, display

listOfImageNames = ['/path/to/images/1.png',
                    '/path/to/images/2.png']

for imageName in listOfImageNames:
    display(Image(filename=imageName)) 
```

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2016-02-10T10:55:18.183

请注意，到目前为止发布的解决方案仅适用于 png 和 jpg！

如果您希望在不导入更多库的情况下更轻松，或者您想在 Ipython Notebook 中显示动画或非动画 GIF 文件。将要显示它的行转换为降价并使用这个漂亮的简短技巧！

```
![alt text](test.gif "Title") 
```

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2018-01-10T23:32:28.383

`.jpg`这将在 Jupyter 中导入并显示图像（在 Anaconda 环境中使用 Python 2.7 测试）

```
from IPython.display import display
from PIL import Image

path="/path/to/image.jpg"
display(Image.open(path)) 
```

## 您可能需要安装 PIL

在 Anaconda 中，这是通过键入来完成的

```
conda install pillow 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2020-04-11T11:52:01.647

您可以在降价部分的 html 代码中使用：示例：

```
 <img src="https://www.tensorflow.org/images/colab_logo_32px.png" /> 
```

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2020-05-04T13:08:02.603

如果您想有效地显示大量图像，我建议使用[IPyPlot 包](https://github.com/karolzak/ipyplot)

```
import ipyplot

ipyplot.plot_images(images_array, max_images=20, img_width=150) 
```

[![在此处输入图像描述](../Images/ea6a55a69f96ab0fe343dcd8410cf6f3.png)](https://i.stack.imgur.com/WNYfx.png)

该包中还有一些其他有用的功能，您可以在交互式选项卡（每个标签/类的单独选项卡）中显示图像，这对所有 ML 分类任务非常有帮助。

[![在此处输入图像描述](../Images/606f081f3c276245b04a47a388de658e.png)](https://raw.githubusercontent.com/karolzak/ipyplot/master/docs/example1-tabs.gif)

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2016-05-05T22:06:32.083

感谢[这个](https://gist.github.com/kylemcdonald/2f1b9a255993bf9b2629)页面，当上面的建议没有时，我发现这很有效：

```
import PIL.Image
from cStringIO import StringIO
import IPython.display
import numpy as np
def showarray(a, fmt='png'):
    a = np.uint8(a)
    f = StringIO()
    PIL.Image.fromarray(a).save(f, fmt)
    IPython.display.display(IPython.display.Image(data=f.getvalue())) 
```

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2019-02-18T10:18:56.727

使用标准 numpy、matplotlib 和 PIL 的更简洁的 Python3 版本。合并从 URL 打开的答案。

```
import matplotlib.pyplot as plt
from PIL import Image
import numpy as np

pil_im = Image.open('image.png') #Take jpg + png
## Uncomment to open from URL
#import requests
#r = requests.get('https://www.vegvesen.no/public/webkamera/kamera?id=131206')
#pil_im = Image.open(BytesIO(r.content))
im_array = np.asarray(pil_im)
plt.imshow(im_array)
plt.show() 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2020-07-19T21:02:52.530

```
from IPython.display import Image

Image(filename =r'C:\user\path') 
```

我已经看到了一些解决方案，有些由于原始目录而无法工作，在添加上述代码时，请记住在目录前添加“r”。这应该避免这种错误：(unicode error) 'unicodeescape' codec can't decode bytes in position 2-3: truncated \UXXXXXXXXXX escape

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2021-08-14T19:31:15.227

如果您希望将图像从本地主机嵌入到 ipython 笔记本中，您可以执行以下操作：

**第一**：找到当前本地路径：

```
# show current directory
import os
cwd = os.getcwd()
cwd 
```

例如，结果将是：

```
'C:\\Users\\lenovo\\Tutorials' 
```

**接下来**，按如下方式嵌入您的图像：

```
from IPython.display import display
from PIL import Image

path="C:\\Users\\lenovo\\Tutorials\\Data_Science\\DS images\\your_image.jpeg"
display(Image.open(path)) 
```

确保在 jpg、jpeg 或 png 中选择正确的图像类型。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-08-01T14:03:34.830

从图像数组内联绘制的另一个选项可能是：

```
import IPython
def showimg(a):
    IPython.display.display(PIL.Image.fromarray(a)) 
```

其中 a 是一个数组

```
a.shape
(720, 1280, 3) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-06-29T13:37:37.677

与 Jupyter (iPython) 一起使用`GenomeDiagram`时，显示图像的最简单方法是将 GenomeDiagram 转换为 PNG 图像。这可以使用 IPython.display.Image 对象进行包装，使其显示在笔记本中。

```
from Bio.Graphics import GenomeDiagram
from Bio.SeqFeature import SeqFeature, FeatureLocation
from IPython.display import display, Image
gd_diagram = GenomeDiagram.Diagram("Test diagram")
gd_track_for_features = gd_diagram.new_track(1, name="Annotated Features")
gd_feature_set = gd_track_for_features.new_set()
gd_feature_set.add_feature(SeqFeature(FeatureLocation(25, 75), strand=+1))
gd_diagram.draw(format="linear", orientation="landscape", pagesize='A4',
                fragments=1, start=0, end=100)
Image(gd_diagram.write_to_string("PNG")) 
```

[[见笔记本]](https://gist.github.com/sbliven/bfa88fd1f4d3365f6d6170611945fa39)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-06-01T02:54:50.997

另一个选择是：

```
from matplotlib import pyplot as plt 
from io import BytesIO
from PIL import Image
import Ipython

f = BytesIO()
plt.savefig(f, format='png')
Ipython.display.display(Ipython.display.Image(data=f.getvalue()))
f.close() 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-12-01T06:06:47.723

这是解决方案，但它会打开正在等待的新窗口

```
cv2.imshow('test',image)
cv2.waitKey()
cv2.destroyAllWindows() 
```

# php - 在php中将双反斜杠添加到单个

> ID：11854848
> 
> 赞同：1
> 
> 时间：2012-08-07T22:11:12.703
> 
> 标签：php, javascript, regex

我进行了很多搜索并尝试了 javascript replace() 函数和 str_replace,addslashes ，以及带斜杠，但我没有得到正确的输出。

这就是我正在做的事情：

```
str_replace("\\","\\\\", "C:wamp\www\desi\uploads\artist\bg\9.jpg"; 
```

我得到的输出是：

```
C:wampwwwÞsiuploads\A rtist\B g .jpg 
```

然后我尝试了另一种方法：

```
var clean=  "<?php echo str_replace("\\","@",LINKCONSTANT); ?>".replace("@","\\"); 
```

仍然没有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:21:29.133

该问题无法通过使用 str_replace 来解决，因为双引号中的字符串将由 PHP 处理斜杠作为转义序列。像这样使用 str_replace 并不能解决 PHP（或 javascript）处理字符串转义的问题——一旦你在字符串中加入了反斜杠，它就会非常忠实地保留在那里。

然而，字符串常量将在单引号中工作，如下所示：

```
'C:wamp\www\desi\uploads\artist\bg\9.jpg' 
```

但正如在别处指出的那样，Windows 中的目录分隔符在内部被处理为“/”或“\”，所以只需使用“/”（用于 api 调用）就可以了。

如果您希望输出一个可以被 javascript 安全解析的字符串，请执行以下操作：

```
echo "var str = ".json_encode('C:wamp\www\desi\uploads\artist\bg\9.jpg').";"; 
```

它将以 javascript 兼容的方式输出：

```
var str = "C:wamp\\www\\desi\\uploads\\artist\\bg\\9.jpg"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T22:21:44.237

你要达到什么目标？将单曲替换`\`为`\\`?

请注意，那

```
 "\\" 
```

表示单个的字符串`\`。这是因为，在使用的内部添加[`\`了转义序列的前缀](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.double)`"..."`：

```
 \r  ->  Return
  \t  ->  Tabular
  \n  ->  Newline 
```

由于 \ 具有此特殊含义，因此您需要编写`\\`以表示单个`\`内部`"...."`。

因此，这将设置`$resultString`为`C:wamp\\www\\desi\\uploads\\artist\\bg\\9.jpg`：

```
$sourceString = "C:wamp\www\desi\uploads\artist\bg\9.jpg";
$resultString = str_replace( "\\", "\\\\", $sourceString ); 
```

# javascript - jQuery - 选择具有相同 ID 的组的最后一个元素

> ID：11854856
> 
> 赞同：-1
> 
> 时间：2012-08-07T22:11:59.473
> 
> 标签：javascript, jquery, html, forms, selector

我有一个通过 JS 通过添加/删除行（表单输入）来动态更改的表单/表格。我想创建一个计算行数的列，所以我尝试使用，

```
$("#rowcount:last").replaceWith( "<td>" + newNum + "</td>" ); 
```

将计数器列的最后一个元素更改为新数字，但 ':last' 选择器在这种情况下似乎不起作用。这是我的代码供参考（对不起我的表格丑陋。我试图让它看起来尽可能漂亮，但由于我的经验有限，它看起来仍然像是在出生时被打错了）：

```
<html>

<head>
<title></title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
<script src="jquery.maskedinput.js" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function() {
        $('#btnAdd').click(function() {
            var num     = $('.ccinput').length; // how many "duplicatable" input fields we currently have
            var newNum  = new Number(num + 1);      // the numeric ID of the new input field being added

            // create the new element via clone(), and manipulate it's ID using newNum value
            var newElem = $('#input' + num).clone().attr('id', 'input' + newNum);

            // insert the new element after the last "duplicatable" input field
            $('#input' + num).after(newElem);
            $("#rowcount").replaceWith( "<td>" + newNum + "</td>" );

            // enable the "remove" button
            $('#btnDel').attr('disabled','');

            $("*#date").mask("99/99/9999");

            // business rule: you can only add 20 names
            if (newNum == 20)
                $('#btnAdd').attr('disabled','disabled');
        });

        $('#btnDel').click(function() {
            var num = $('.ccinput').length; // how many "duplicatable" input fields we currently have
            $('#input' + num).remove();     // remove the last element

            // enable the "add" button
            $('#btnAdd').attr('disabled','');

            // if only one element remains, disable the "remove" button
            if (num-1 == 1)
                $('#btnDel').attr('disabled','disabled');
        });

        $("*#date").mask("99/99/9999");
    });
</script>
</head>

<body>

<form method="post" action="<?php echo htmlentities($PHP_SELF); ?>">
<table border="1" cellspacing="0">
<tr>
<th></th>
<th># (last four digits)</th>
<th>Amount</th>
<th>Approval</th>
<th>Date Received</th>
</tr>
<tbody>
    <tr id="input1" class="ccinput">
    <td id="rowcount"> 1 </td>
    <td> <input id="cnum" type="text" name="cc_num[]" maxlength="4" /> </td> 
    <td> <input id="camnt" type="int" name="cc_amnt[]" /> </td>
    <td> <input id="appr" type="text" name="cc_app[]" maxlength="10" /> </td> 
    <td> <input id="date" type="text" name="cc_date[]" /> </td>
    </tr>
</tbody>
</table>
<div>
    <input type="button" id="btnAdd" value="Add" />
    <input type="button" id="btnDel" value="Remove" />
</div>
<input type="submit" value="Submit" name="submit" />
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T22:25:07.783

您可以使用`:last`选择器：

```
 var newElem = $('.ccinput:last').clone().attr('id', 'input' + newNum);
 $('.ccinput:last').after(newElem);
 $(".ccinput:last td:first").replaceWith( "<td>" + newNum + "</td>" ); 
```

或者`replaceWith()`您可以尝试：

```
 $(".ccinput:last td:first").html(newNum).removeAttr('id'); 
```

[演示](http://jsfiddle.net/JaMnY/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T22:51:59.437

没有足够的代表发表评论，但这真的应该是对您评论线程的回复......

您的 HTML“似乎运行良好”，除了您只能获取具有给定 ID 的第一个元素，因为它运行不正常并且是无效的 HTML。换句话说，您的 HTML 在重复 ID 的情况下无法正常运行（因为它是无效的 HTML）。

与其给一行一个 ID 并复制它，不如给它一个类。这样，您的 HTML 将实际运行良好（等待对 JavaScript 的更改以按类而不是 ID 进行选择）。

# php - PHP date() 显示明天的日期

> ID：11854861
> 
> 赞同：4
> 
> 时间：2012-08-07T22:12:24.763
> 
> 标签：php

我有一个奇怪的错误。如果我打电话：

```
 date("js M") 
```

它显示明天的日期，我不知道发生了什么变化，因为昨天该功能运行良好。据我所知，我没有在生产中测试过任何东西，它只发生在本地主机中。

我已经检查了我的时钟，它是正确的，还有其他地方可以让 PHP 获取日期吗？有什么可以改变的？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T22:13:54.807

默认情况下，该`date()`函数使用 unix 时间戳，始终设置为 +0:00。

```
date_default_timezone_set('America/New_York'); 
```

如果您设置默认时区，则使用的 unix 时间戳会将正确的偏移量应用于您的位置，并且无论您身在何处，都应该为您获得正确的日期。

# mod-rewrite - 素面 在使用 apache httpd mod-rewrite 时给出 404

> ID：11854862
> 
> 赞同：1
> 
> 时间：2012-08-07T22:12:28.233
> 
> 标签：mod-rewrite, primefaces, apache

我用一个 jsp 文件创建了一个简单的应用程序并使用了 primefaces，这是代码

**index.jsp：**

```
 <%@ page session="false" contentType="text/html;charset=utf-8" %>
 <%@ taglib uri="http://primefaces.prime.com.tr/ui" prefix="p" %>
 <p:graphicImage value="/image/Kitty.gif"/> 
```

httpd.conf：

```
 <VirtualHost localhost:80>
   ProxyPass /sayHello http://localhost:8080/sayHello
   ProxyPassReverse /sayHello http://localhost:8080/sayHello
 </VirtualHost> 
```

如果我直接运行应用程序（http://localhost:8080/sayHello），则图像正在显示，但如果我使用 apache（http://localhost/sayHello）运行它，则会失败。我还尝试手动点击生成的 URL，我相信 Apache 没有重定向它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:37:33.217

尝试将代理传递更改为根 URI：

```
ProxyPass / http://localhost:8080/
ProxyPassReverse / http://localhost:8080/ 
```

或者也代理图像目录：

```
ProxyPass /sayHello http://localhost:8080/sayHello
ProxyPassReverse /sayHello http://localhost:8080/sayHello

ProxyPass /image http://localhost:8080/image
ProxyPassReverse /image http://localhost:8080/image 
```

# eclipse - 将动态 Web 项目转换为 Maven = 部署为空

> ID：11854865
> 
> 赞同：0
> 
> 时间：2012-08-07T22:12:40.520
> 
> 标签：eclipse, jakarta-ee, tomcat, maven

我有一个动态 Web 项目，它通过 Run As > on Server 部署到 Tomcat 服务器。该项目有 WebServices WSDL，以这种方式工作得很好。

但我想转换为 maven/pom。所以我使用eclipse并选择“将项目转换为maven”。之后，当我再次选择 > 在服务器上运行时，tomcat 部署目录为空！转换为 maven 项目时到底发生了什么变化，如何再次修复部署过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:17:45.660

My advice would be to use the Maven Tomcat plugin:

[http://tomcat.apache.org/maven-plugin.html](http://tomcat.apache.org/maven-plugin.html)

This way, you can create a Maven Run Configuration in Eclipse that compiles and deploys your app to Tomcat with one button click. There is also a Jetty server plugin.

# jquery - 使用 JQuery 和 Rails 生成链接预览

> ID：11854866
> 
> 赞同：1
> 
> 时间：2012-08-07T22:12:50.567
> 
> 标签：jquery, ruby-on-rails, json, respond-with

我感兴趣的是在 JQuery 和 RoR 中实现一个基本版本的链接预览工具（类似于 Facebook 的）。用户在输入字段中键入 url。一个 jquery 函数监视输入的内容（使用 keyup），当输入一个有效的 url（没有用户提交任何内容）时，jquery 函数调用一个 rails 函数，该函数使用 Nokogiri gem 搜索并返回预览内容（例如标题，任何图像等）。然后将该内容返回给 jquery 函数并显示在输入框下方。

在这一切中我不清楚的是数据如何从 jquery 函数传递到 rails one 并返回。

为了使事情具体化，假设我只想检索正在输入的 url 的标题。

在我的 JQuery 函数中，我使用 keyup 来监视空格、返回等。此时我没有验证输入的 url（我可以稍后再做）

```
var text; 

$("#text").keyup(function(e) {

    if(e.which == 13 || e.which == 32 || e.which == 17 || ) {

        text = $("text").val();
        $.get('/linkPreview', {text: text}, function(answer) {

            $("previewTitle").html(answer);
        }           
            )
    } 
```

这是我不确定如何进行的地方。我正在使用 .get Jquery 方法（这是正确的方法吗？）来调用 rails 函数，并将文本作为键入的 url 传递。

然后，我将“/linkPreview”与我的页面控制器中的 linkPreview 操作相匹配，在我的路由文件中：

```
match '/linkPreview', :to => 'pages#linkPreview' 
```

我也不确定在 rails 函数中读取和传递 JSON 数据。我正在尝试使用 respond_to 和 respond_with 函数，但不确定这是否正确（我使用 Nokogiri gem 从 url 的 html 中提取标题）：

```
def linkPreview
    respond_to :json
@url = params[:text]
doc = Nokogiri::HTML(open(@url))
@title = doc.css(title)
respond_with(@title)
end 
```

由于我是 RoR 和 JQuery 的新手，我将非常感谢有关从 JQuery 调用 rails 函数的正确方法、将 JSON 数据从一个到另一个传递以及我解决这些主题的任何其他资源的任何帮助！我还想知道是否有任何推荐的方法来调试有缺陷的脚本（我的代码显然不起作用，但我不确定从哪里开始寻找错误）。

万分感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-28T09:01:47.067

我知道这是一个老问题，但是我设法使以下代码起作用：

控制器.rb

```
def linkpreview
    url = params[:url]
    preview = LinkPreviewParser.parse(url) # returns a Hash
    respond_to do |format|
        format.json { render :json => preview }
    end
end 
```

应用程序/模型/link_preview_parser.rb

```
class LinkPreviewParser
  def self.parse(url)
    doc = Nokogiri::HTML(open(url))
    page_info = {}
    page_info[:title] = doc.css('title').text
    return page_info
  end
end 
```

路线.rb

```
match '/linkpreview', to: 'items#linkpreview' 
```

链接预览.js

```
$(document).ready(function() {
  $("#url-submit").on('click', function() {
    var link = $("#url");
    setTimeout(function() {
      var text = $(link).val();
      // send url to service for parsing
      $.ajax('/linkpreview', {
        type: 'POST',
        dataType:'json',
        data: { url: text },
        success: function(data, textStatus, jqXHR) {
          $("#item_title").val(data['title']);
        },
        error: function() { alert("error"); }
      }); 
    }, 100);
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-21T18:25:02.493

可能想查看我们在 Socialcast 开发的 link_preview gem： [https](https://github.com/socialcast/link_preview) ://github.com/socialcast/link_preview 它为您处理了很多后端处理

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T23:29:06.957

我认为你在正确的轨道上。假设您想从请求的页面返回标题和图像（就像 Facebook 一样），我可能会做这样的事情。

```
def link_preview
  url = params[:url]
  preview = LinkPreviewParser.parse(url) # returns a Hash
  respond_with(preview) #respond_with converts a hash to JSON
end 
```

然后，为了更干净地组织和测试代码，将解析代码移到一个单独的类中

应用程序/模型/link_preview_parser.rb

```
class LinkPreviewParser
  def self.parse(url)
    doc = Nokogiri::HTML(open(@url))
    page_info = {}
    page_info[:title] = doc.css(title) # assuming this is right - I didn't check
    # ... more parsing logic if needed ...
    return page_info
  end
end 
```

这将返回一个看起来像这样的 json 对象：`{'title': 'Some Webpage'}`，它应该很容易在您的 javascript 中处理。您可以根据需要添加其他属性。

我没有对此进行测试，但我相信它应该可以工作。这是最简单的方法，但如果您预计会有大量流量，那么这样做有一个严重的缺点。由于来自浏览器的请求必须等待从服务器到外部网站的另一个请求，因此您将有很多请求只是在无所事事地等待。因此，理想情况下，您希望以异步方式执行此操作。这需要更多的工作，因此请选择目前最适合您的方法。

# vb.net - 有Office 2010，需要编译VB.Net for 2007

> ID：11854873
> 
> 赞同：0
> 
> 时间：2012-08-07T22:13:11.983
> 
> 标签：vb.net, interop, ms-office

在Win7 64位下运行VS 2010，并安装Office 2010。我正在处理的应用程序打开并搜索 Excel 电子表格，并且需要在 Vista 32 位和 Office 2007 下运行。

我已经尝试过这里的建议 - 删除 Microsoft.Office.Interop.Excel v14 并添加 v12 - 但运行 o2007pia.msi 只是告诉我必须安装 Office 2007。我没有可用的 Office 2007，我无法在运行 Office 2007 的机器上安装任何东西。

有没有解决的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:16:12.350

`o2007pia.msi`与 Office 2010 不向前兼容。使用 Office 2010 PIA，它应该与 Office 2007 向后兼容，只要您不使用任何 Office 2010 特定功能。

# ios - 抑制“不兼容的指针类型将'subclassA'发送到'subclassB'类型的参数”

> ID：11854883
> 
> 赞同：2
> 
> 时间：2012-08-07T22:14:04.067
> 
> 标签：ios, xcode, clang

Xcode 引发“不兼容的指针类型将 'subclassA' 发送到 'subclassB' 类型的参数”警告。用clang编译。

在发出警告的情况下，我使用

```
[subclassA isKindOfClass: [subclassB class]] ... 
```

以确保兼容的指针使用。我想要类似的东西：

```
 #pragma clang diagnostic push
    #pragma clang diagnostic ignored "-Warc-performSelector-leaks"
    // warning-raising code
    #pragma clang diagnostic pop 
```

但是对于提出的适当警告。即忽略指定诊断的clang标志是什么？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:24:35.230

如果我没听错，你会说类似

```
if ([subclassA isKindOfClass:[subclassB class]]) {
    [foo someMethodThatWantsSubclassB:subclassA];
} 
```

这里的修复是`subclassA`在成功的类型断言之后进行强制转换。你的情况有点奇怪，因为你是动态确定类型`subclassB`而不是测试静态类型，但是在方法中`-someMethodThatWantsSubclassB:`你肯定知道所涉及的类型，所以你会写类似

```
if ([subclassA isKindOfClass:[subclassB class]]) {
    [foo someMethodThatWantsSubclassB:(BClass)subclassA];
} 
```

如果您有一些非常奇怪的设置，您实际上并不知道静态类型`subclassB`（尽管我无法想象这里的情况），您可以简单地转换为`(id)`来摆脱警告：

```
if ([subclassA isKindOfClass:[subclassB class]]) {
    [foo someMethodThatWantsSubclassB:(id)subclassA];
} 
```

# php - 将json数据插入列表中的html页面

> ID：11854887
> 
> 赞同：1
> 
> 时间：2012-08-07T22:15:02.090
> 
> 标签：php, mysql, json, html

我正在尝试从 mysql 获取信息并将信息发布到 html 页面中。这是我到目前为止所得到的：这是我的`tenantlistmob.php`

```
 <?php 
  include('connection.php');
  $result = mysql_query("SELECT * FROM tenanttemp");

  while ($row = mysql_fetch_assoc($result)) 
 {
   $array[] = array($row['TenantFirstName']);
  }
echo json_encode($array);
 ?> 
```

当我`tenantlistmob`直接从浏览器调用时，它会显示`[["Humayun"],["Sahjahan"],["Bayezid"],["Bayezid"],["Asaduzzaman"],["Mouri"]]`名字的来源。我喜欢在 html 页面中使用这个名称。我的html页面是

```
<!DOCTYPE HTML>
<html>
<link rel="stylesheet" href="styles/main.css" />
<script type="text/javascript" src="jquery.js"></script> 
<body>
 <div id="output">this element will be accessed by jquery and this text replaced</div>
<script id="source" type="text/javascript">
 $(function () 
 {
$.ajax({                                      
  url: 'tenantlistmob.php',                
  data: "",                        
  dataType: 'json',                 
  success: function(data)          
  {
    var id = data;              
   //var vname = data[1];           //get name
    $.each(id, function (val)
   {        
     $('#output').html(""+id);
    });
  } 
});
}); 

</script>
<form id="formset">
<fieldset id="fieldset">
<h3 align="center">Tenant List</h3><hr/>
<a href="#">name1</a><br /><hr/>
<a href="#">name2 </a> <br /><hr/>
</fieldset>
</form>
<a id="box-link1" class="myButtonLink"  href="category1.php"></a> 
</div>    
 </body>
</html> 
```

我的输出（`main.css`）是这样的

```
#output
{
color:#ffffff;
font-size : 20px;
margin : 0;
letter-spacing:1px;
width:480px;
} 
```

我得到了`Humayun,Sahjahan,Bayezid,Bayezid,Asaduzzaman,Mouri`左上角的名字。但我喜欢将名称命名为带有链接的列表（ `name1`， ）。`name2`当我单击名称（`name1`，`name2`）时，它将显示名称的详细信息。我怎样才能做到这一点？

预先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:31:45.740

看起来您希望使用 JavaScript 迭代 JSON。由于您使用的是 jQuery，因此您只需要“迭代” JSON 结果。从技术上讲，在 JavaScript 中 0 在 1 之前。

```
var _result = $data[0];
$.each(_result, function (val)
{
    console.log(val);
}); 
```

[http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T22:23:33.163

尝试这个：

```
<?php 
  include('connection.php');
  $result = mysql_query("SELECT * FROM tenanttemp");

  $array = array();
  while ($row = mysql_fetch_assoc($result)) 
   {
     $array[] = $row['TenantFirstName'];
   }
  echo json_encode($array);
?> 
```

# scala - 如何启动对象

> ID：11854890
> 
> 赞同：-3
> 
> 时间：2012-08-07T22:15:16.227
> 
> 标签：scala, parameter-passing

我需要有关此代码的帮助。

```
object test {
  var list : Vector[MyType] = null
}

object foo extends MyType { // Mytype is a trait
    println("TEST ")
    test.list.:+(foo)
    def myfunc() { //need to define this as this is there in the trait
       // i do some operations
     } 
  }

object Bar extends MyType { // Mytype is a trait
    println("TEST ")
    test.list.:+(Bar)
    def myfunc(){
      // i do some operations
    } 
  } 
```

现在我想浏览列表并为所有扩展 MyType 的对象调用 myfunc()。

```
test.list foreach( t2 => t2.myfunc() ) 
```

该值没有被添加到列表中。有人可以让我知道我做错了什么。它不工作。有没有办法让打印语句工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T22:28:13.587

您需要使用空 Vector 而不是`null`. 在 Scala 中做到这一点的方法是使用`Vector`对象的工厂方法，并让类型推断完成其工作。例如：

```
var list = Vector.empty[MyType] 
```

当您练习这样做时，您会发现自己更专注于*创建数据*而不是声明其类型，在这种情况下，这将在此错误发生之前解决此错误。

接下来操作

```
test.list.:+(foo) 
```

不会更新`test.list`，因为`Vector`它是不可变的，所以这个方法只返回一个新的更新副本，不会影响`list`.

试试吧

```
test.list = test.list.:+(foo)
// or (with more idiomatic operator notation)
test.list = test.list :+ foo
// or (using syntactic sugar)
test.list :+= foo 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T06:22:29.743

您的问题是，该对象不是作为类构造的，因此会自动调用代码。你可以做两件事。要么扩展`App`并调用`main`，要么编写一个函数。

```
trait X

object test {
  var list = Vector.empty[X]
}

object Foo extends App with X {
  test.list :+= Foo
  override def toString() = "Foo"
}

object Bar extends X {
  def add() {
    test.list :+= Bar
  }
  override def toString() = "Bar"
}

Foo.main(null)
Bar.add()
test.list foreach println 
```

此代码打印：

```
Foo
Bar 
```

扩展 App 只是给一个对象增加一个 main 方法，包含对象中的所有代码。

# size-t - size_t 符号丢失（返回）（int 到 unsigned int））

> ID：11854897
> 
> 赞同：0
> 
> 时间：2012-08-07T22:15:32.380
> 
> 标签：size-t

该程序通过 subtraca 警告消息计算字符串的长度

-\

我的 stringLength 函数返回一个 size_t 是我在格式说明符中的错误还是我如何返回我的值？

```
#include <stdio.h>
#include <stdlib.h>

size_t stringLength(const char *str);

int main(void) 
{

    return 0;
}

size_t stringLength(const char *str)
{
    const char *strCopy = str;

    while (*str)              
    {
        str++;                
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:22:07.113

您遇到的问题是`operator-()`返回有符号值，而不是无符号值。因为在您的例程中您知道该值将始终为正，所以您可以添加强制转换 `size_t`而不必担心符号错误。

```
return static_cast<size_t>(str - strCopy); //C++ 
```

或者

```
return (size_t)(str - strCopy); //C 
```

# c# - 在保存我通过 zip 文件中的流读取的 XML 文档时获取“流不可写”

> ID：11854900
> 
> 赞同：0
> 
> 时间：2012-08-07T22:15:46.997
> 
> 标签：c#, xml, stream, dotnetzip

我有一个包含 xml 文件的 zip 文件，我正在将此 xml 文件加载到 xml 文档中，而无需提取文件。这是通过流完成的。这样做之后，我正在修改一些节点的内部文本。问题是我在尝试保存流后遇到了前面提到的异常，这是代码：

（我在这里使用**DotNetZip**）

```
ZipFile zipFile = ZipFile.Read(zipPath); // the path is my desktop
foreach (ZipEntry entry in zipFile)
{
  if (entry.FileName == "myXML.xml")
  { 
    //creating the stream and loading the xml doc from the zip file:
    Stream stream = zipFile[entry.FileName].OpenReader();    
    XmlReader xReader = XmlReader.Create(stream);
    XmlDocument xDoc = new XmlDocument();
    xDoc.Load(xReader);

    //changing the inner text of the doc nodes:
    xDoc.DocumentElement.SelectSingleNode("Account/Name").InnerText = "VeXe";
    xDoc.DocumentElement.SelectSingleNode("Account/Money").InnerText = "Million$";

    xDoc.Save(stream); // here's where I got the exception.
    break;
  }
} 
```

我不是专业编码人员，但`xDoc.Save(stream);`我没有注意到它也可以将 a`XmlWriter`作为参数，所以我尝试在实例化 XmlReader 后立即创建 XmlWriter 的实例。
我尝试这样做：`xDoc.Save(XmlWriter)` 我得到了一个异常说比如：“读后不能写”

如何成功保存 xDoc？

**添加：** 我有一个想法将xml文件保存在其他地方，比如临时文件夹或其他东西，然后在zip中添加保存的文件覆盖旧文件，然后删除临时文件中的xml文件..但这不是我的想，我想直接处理zip文件，进出，没有第三方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:41:58.160

快速[浏览一下文档](http://cheeso.members.winisp.net/DNZHelp/html/fefc7f88-eed1-4901-1061-1909c23f83aa.htm)让我相信你应该这样做：

```
using(ZipFile zipFile = ZipFile.Read(zipPath))
foreach (ZipEntry entry in zipFile)
{
  if (entry.FileName == "myXML.xml")
  { 
    XmlDocument xDoc = new XmlDocument();
    //creating the stream and loading the xml doc from the zip file:
    using(Stream stream = zipFile[entry.FileName].OpenReader())
    using(XmlReader xReader = XmlReader.Create(stream))
    {    
        xDoc.Load(xReader);
    }
    //changing the inner text of the doc nodes:
    xDoc.DocumentElement.SelectSingleNode("Account/Name").InnerText = "VeXe";
    xDoc.DocumentElement.SelectSingleNode("Account/Money").InnerText = "Million$";

    using(var ms=new MemoryStream())
    using(var sw=new StreamWriter(ms))
    {
        xDoc.Save(sw);
        sw.Flush();
        ms.Position=0;
        zipFile.UpdateEntry(entry.FileName,ms);
    }
    break;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T22:22:11.980

您正在尝试写入您打开它的同一个 Stream。你不能这样做。

也许尝试这样的事情：

```
ZipFile zipFile = ZipFile.Read(zipPath); // the path is my desktop
foreach (ZipEntry entry in zipFile)
{
    if (entry.FileName == "myXML.xml")
    { 
        //creating the stream and loading the xml doc from the zip file:
        using (Stream stream = zipFile[entry.FileName].OpenReader()) {
            XmlReader xReader = XmlReader.Create(stream);
            XmlDocument xDoc = new XmlDocument();
            xDoc.Load(xReader);
        }

        //changing the inner text of the doc nodes:
        xDoc.DocumentElement.SelectSingleNode("Account/Name").InnerText = "VeXe";
        xDoc.DocumentElement.SelectSingleNode("Account/Money").InnerText = "Million$";

        using (StreamWriter streamWriter = new StreamWriter(pathToSaveTo)) {
            xDoc.Save(streamWriter); 
            break;
        }
    }
} 
```

# ios - 如何在标签中输出正确的数字？

> ID：11854902
> 
> 赞同：0
> 
> 时间：2012-08-07T22:15:58.883
> 
> 标签：ios, xcode, math, uilabel, uipickerview

我有一个在文本字段中显示输出的选择器视图。供用户选择时间量，它有 3 行的小时、分钟和秒。对于这一部分，我只关注秒数。我希望能够将小时转换为分钟并将输出显示为整数和小数。我能够将小时转换为分钟，但我无法将秒转换为小数。它应该就像将行数除以 60 一样简单。但是，我无法正确显示。无论我选择哪一行，标签的输出都只有 0.00。这是我的代码。

```
 float sec;
sec = ([timePickerView selectedRowInComponent:2]/60);

Label.text = [NSString stringWithFormat:@"%.2f",sec]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T22:21:06.777

与数字“60”相关的“/”符号被编译器视为整数除法。将“60”更改为“60.0”，您将得到您期望的结果。您还应该确保`[timePickerView selectedRowInComponent:2]`通过强制转换它返回一个浮点数：

```
(float)[timePickerView selectedRowInComponent:2] 
```

# magento - Magento：向信用卡表单添加新字段

> ID：11854903
> 
> 赞同：3
> 
> 时间：2012-08-07T22:16:03.000
> 
> 标签：magento, credit-card

我正在尝试修改信用卡表单以添加一些名为“银行名称”和“银行电话号码”的新自定义字段，这似乎无法通过后端完成。

我已经在网上和这里搜索过，但我找不到任何关于如何将新的自定义字段添加到信用卡表单的参考资料。我认为这与在客户注册表单中添加一个新字段几乎相同，但我不知道该怎么做数据库明智的。

如果有人有任何我可以用来解决这个问题的东西，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:28:22.267

您应该首先告知您正在使用哪个版本的 Magento 以及您已经尝试过哪些方法。

在不知道这很难为您提供帮助的情况下，您可能想尝试这种[可能的解决方案](http://www.excellencemagentoblog.com/magento-add-custom-fields-checkout-page)，[这个](http://www.collaboration133.com/adding-custom-fields-to-magento-checkout/451/)，甚至是以下模块之一：[结帐字段管理器](http://www.aitoc.com/en/magentomods_checkoutfieldsmanager.html)或[附加结帐属性](http://www.fmeextensions.com/magento-additional-checkout-attributes-fields.html)。如果以上都不起作用，请尝试[此搜索](https://www.google.com/search?hl=en&safe=off&pws=0&q=%20site%3amagentocommerce.com%20custom%20field%20magento%20checkout&sa=X&ei=zpYhUNX8LZG10AHoqYHYCw&ved=0CHQQrQIwAA&biw=1280&bih=675)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T22:30:29.020

不，Magento 管理面板不会为您添加自定义列。你需要自己做。

首先，您需要编辑 .phtml 文件以包含这两个字段以显示在前端。

其次，您需要在相关数据库表（我猜是 sales_flat_order_payment）中添加两个新列（与您的字段同名，稍后解释）。但这将影响所有支付方式，因此将其定义为 VARCHAR(255) NULL。

第三，当 Magento 保存 CC 信息时，您需要检查它是否保存整个数据数组，然后您发布的字段名称将与您的表字段匹配并自动插入。否则你需要编辑它。

另外，下次请发布一些代码，至少是您尝试过的一些代码。

# math - 计算二次贝塞尔曲线段的长度

> ID：11854907
> 
> 赞同：6
> 
> 时间：2012-08-07T22:16:13.330
> 
> 标签：math, bezier

我使用这个算法来计算二次贝塞尔曲线的长度：http: [//www.malczak.linuxpl.com/blog/quadratic-bezier-curve-length/](http://www.malczak.linuxpl.com/blog/quadratic-bezier-curve-length/)

但是，我想做的是计算从 0 到 t 的贝塞尔曲线的长度，其中 0 < t < 1

有没有办法修改上面链接中使用的公式来获得贝塞尔曲线第一段的长度？

澄清一下，我不是在寻找 q(0) 和 q(t) 之间的距离，而是在这些点之间的弧的长度。

（我不希望使用自适应细分来近似长度）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T04:46:40.857

由于我确信对于该可变情况会存在类似的表单解决方案`t`- 我扩展了链接中给出的解决方案。

从链接中的方程式开始：

![L(t)](../Images/4b3b41be8e9ca8fee4623b5054c7aa99.png)

我们可以写成

![L(t)](../Images/9e181ff88651dcea6b9aa0a35b8677f6.png)

哪里`b = B/(2A)`和`c = C/A`。

然后转换`u = t + b`我们得到

![L(t)](../Images/9be77b9567021c700081a01351c6397d.png)

在哪里`k = c - b^2`

现在我们可以使用链接中的积分标识来获得：

![L(t)](../Images/6f28edd54e4e54046ae0a6c448bed9df.png)

因此，总而言之，所需的步骤是：

1.  按照原方程计算 A,B,C。
2.  计算`b = B/(2A)`和`c = C/A`
3.  计算`u = t + b`和`k = c -b^2`
4.  将这些值代入上述等式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T04:06:46.383

虽然可能有一个封闭的形式表达，这就是我要做的：

使用[De-Casteljau 算法](http://en.wikipedia.org/wiki/De_Casteljau%27s_algorithm)将贝塞尔曲线拆分为 0 到 t 部分，并使用链接中的算法计算其长度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-17T15:13:53.473

您只需要评估积分，而不是在 0 和 1 之间，而是在 0 和 t 之间。如果你不喜欢数学，你可以使用你选择的符号工具箱来做到这一点。例如：

[`http://integrals.wolfram.com/index.jsp?expr=Sqrt\[a*x*x%2Bb*x%2Bc\]&random=false`](http://integrals.wolfram.com/index.jsp?expr=Sqrt[a*x*x%2Bb*x%2Bc]&random=false)

计算 x = t 和 x = 0 的结果并减去它们。

# windows-services - 将 Growl 作为 Windows 服务运行

> ID：11854912
> 
> 赞同：1
> 
> 时间：2012-08-07T22:16:41.280
> 
> 标签：windows-services, growl, growl-for-windows

有没有办法将 Growl 作为 Windows 服务运行？我搜索了 SO，但没有找到解决方案，请告诉我是否已经有一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:26:45.030

mservidio 提供的 AlwaysUp 链接清楚地表明视觉通知可能是一个问题：

> 注意：当您将 Growl 作为 Windows 服务运行时，它可能在您的桌面上不可见。这
> 可能会使视觉通知无用，但非视觉通知（电子邮件、转发等）应该正常运行。

我猜这是因为咆哮会尝试向启动咆哮的用户发送通知......这是您的Windows服务中配置的任何内容，例如SYSTEM。这意味着您不会看到它们，因为咆哮不会为您的用户会话运行。

我也一直想知道如何将通知定向到特定用户/会话。似乎没有任何文档，所以我必须假设它目前不受支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:20:15.627

你试过[微软的 Srvany](http://www.coretechnologies.com/WindowsServices/FAQ.html#WhatIsSrvany)吗？它非常基本，但如果您的需求相同，应该可以完成工作。

本[教程展示了如何使用 AlwaysUp 配置 Growl，](http://www.coretechnologies.com/products/AlwaysUp/Apps/RunGrowlAsAService.html)应该让您了解将 Growl 作为 Windows 服务运行时会发生什么。

# php - 获取字符串后面的整数？

> ID：11854916
> 
> 赞同：0
> 
> 时间：2012-08-07T22:17:36.443
> 
> 标签：php

我有一堆字符串，可能有也可能没有类似于以下的子字符串：

```
<a class="tag" href="http://www.yahoo.com/5"> blah blah ...</a> 
```

我试图检索链接末尾的“5”（不一定是一位数字，它可能很大）。但是，这个字符串会有所不同。链接之前和之后的文本总是不同的。唯一相同的是 the`<a class="tag" href="http://www.yahoo.com/`和 close `</a>`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:19:09.337

试试parse_url [() 。](http://php.net/manual/en/function.parse-url.php)从那里应该很容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T22:21:28.260

您可以使用`preg_match_all`和`<a class="tag" href="http:\/\/(.*)\/(\d+)">`正则表达式来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T22:24:29.070

我会得到“ [basename](http://php.net/manual/de/function.basename.php) ”：

```
// prints passwd
print basename("/etc/passwd") 
```

要获取您可以使用的链接：

```
$xml  = simplexml_load_string( '<a class="tag" href="http://www.yahoo.com/5"> blah blah ...</a>' );
$attr = $xml->attributes();
print $attr['href']; 
```

最后：如果您不知道字符串的整个结构，请使用：

```
$dom = new DOMDocument;
$dom->loadHTML( '<a class="tag" href="http://www.yahoo.com/5"> blah blah ...</a>asasasa<a class="tag" href="http://www.yahoo.com/6"> blah blah ...</a>' );
$nodes = $dom->getElementsByTagName('a');
foreach ($nodes as $node) {
    print $node->getAttribute('href');
    print basename( $node->getAttribute('href') );
} 
```

因为这也将修复无效的 HTML 代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T22:25:14.483

由于您只需要检索 5，因此非常简单：

```
$r = pret_match_all('~\/(\d+)"~', $subject, $matches); 
```

然后它在第一个匹配组中。

如果您需要链接文本等更多信息，我建议您为此使用 HTML 解析器：

```
require('Net/URL2.php');

$doc = new DOMDocument();
$doc->loadHTML('<a class="tag" href="http://www.yahoo.com/5"> blah blah ...</a>');
foreach ($doc->getElementsByTagName('a') as $link)
{
    $url = new Net_URL2($link->getAttribute('href'));
    if ($url->getHost() === 'www.yahoo.com') {
        $path = $url->getPath();
        printf("%s (from %s)\n", basename($path), $url);
    }
} 
```

示例输出：

```
5 (from http://www.yahoo.com/5) 
```

# javascript - 如何确保 .animate 在再次执行之前完成

> ID：11854921
> 
> 赞同：1
> 
> 时间：2012-08-07T22:18:09.537
> 
> 标签：javascript, jquery, image, jquery-animate

我有一些滑动图像，我正在使用 .animate 移动。当我单击箭头再次前进时，幻灯片都搞砸了。

这是正在发生的事情的链接。[http://leadgenixhosting.com/~intmed/](http://leadgenixhosting.com/~intmed/)

这是我到目前为止的js：

```
$(document).ready(
function(){

    $('#mast').hover(
        function(){
            $('#out-right').hide().attr('src','');
            $('#in-right').show().attr('src','http://leadgenixhosting.com/~intmed/wp-content/themes/imi/images/on_03.gif');
            $('#out-left').hide().attr('src','');
            $('#in-left').show().attr('src','http://leadgenixhosting.com/~intmed/wp-content/themes/imi/images/on_07.gif');
        },
        function(){
            $('#in-right').hide().attr('src','');
            $('#out-right').show().attr('src','http://leadgenixhosting.com/~intmed/wp-content/themes/imi/images/off_03.gif');
            $('#in-left').hide().attr('src','');
            $('#out-left').show().attr('src','http://leadgenixhosting.com/~intmed/wp-content/themes/imi/images/off_07.gif');
        }
    );

    /*Picture Setup
    -------------------------------------------------*/

    var gallery_images = [];
    var divs = ['one','two','three','four'];

    $('#image_container img').each(
        function(){
            gallery_images[gallery_images.length] = $(this).attr('src');
            $(this).hide();
        }
    );

    $('#'+divs[0]+'').css('background-image','url('+gallery_images[0]+')');

    var total_images = gallery_images.length;

    //Images

    var current = 0;

    //Divs

    var current_image = 0;
    var previous_image = divs.length - 1;
    var two_prev = divs.length - 2;
    var next = current_image + 1;

    /*Image Switch
    -------------------------------------------------*/

    function imageSwitch(){

        current++;
        current_image++;
        previous_image++;
        next++;
        two_prev++

        if(two_prev >= divs.length){
            two_prev = 0;   
        }

        if(current >= gallery_images.length){
            current = 0;    
        }

        if(previous_image >= divs.length){
            previous_image = 0; 
        }

        if(current_image >= divs.length){
            current_image = 0;
        }

        if(next >= divs.length){
            next = 0;
        }   

        $('#'+divs[current_image]+'').animate({left:'-=1020px'},{queue:false,duration:1000})
        $('#'+divs[current_image]+'').css('background-image','url('+gallery_images[current]+')');

        $('#'+divs[previous_image]+'').animate({left:'-=1020px'},{queue:false,duration:1000});

        $('#'+divs[next]+'').animate({left: '+=1020px', top: '-=10000px'}, 1000);

        $('#'+divs[two_prev]+'').animate({left: '+=1020px', top: '+=10000px'}, 1000);
    }

    function imageBack(){

        current--;
        current_image--;
        previous_image--;
        next--;
        two_prev--;

        if(two_prev < 0){
            two_prev = divs.length - 1; 
        }

        if(current < 0){
            current = divs.length - 1;  
        }

        if(previous_image < 0){
            previous_image = divs.length - 1;   
        }

        if(current_image < 0){
            current_image = divs.length - 1;
        }

        if(next < 0){
            next = divs.length - 1;
        }   

        $('#'+divs[current_image]+'').animate({left:'+=1020px'},{queue:false,duration:1000});
        $('#'+divs[current_image]+'').css('background-image','url('+gallery_images[current]+')');

        $('#'+divs[previous_image]+'').animate({left:'-=1020px'},{queue:false,duration:1000});

        $('#'+divs[next]+'').animate({left: '-=1020px', top: '+=10000px'}, 1000);

        $('#'+divs[two_prev]+'').animate({left:'-=1020px'},{queue:false,duration:1000});
    }

    /*Image Buttons
    ----------------------------------------*/

    $('#in-right').click(
        function(){
            imageSwitch();
        }
    );

    $('#in-left').click(
        function(){
            imageBack();
        }
    );
}
); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T22:20:21.517

接口：`.stop` [http ://api.jquery.com/stop/](http://api.jquery.com/stop/)

> 停止匹配元素上当前正在运行的动画。

就像@ahren 提到的那样，`is(":animated")`如果您热衷于阅读这些内容，可以使用简单的条件检查：

[http://api.jquery.com/animated-selector/](http://api.jquery.com/animated-selector/)

你会在这里找到实现：[jquery is(":visible") and is(":animated") bug during animation？](https://stackoverflow.com/questions/3719722/jquery-isvisible-and-isanimated-bug-during-animation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T22:21:21.113

```
$('#element').animate({..properties..}, time_interval, function() {
    // When here, you know that animate has finished
}); 
```

# css - CSS - 如何制作“Firefox、Safari、Opera 和 IE”？

> ID：11854923
> 
> 赞同：0
> 
> 时间：2012-08-07T22:18:22.987
> 
> 标签：css

我喜欢使用边框和框阴影插入的效果，但只有“Chrome”支持插入负值`0px, 0px, -1px`。

但是，当我检查 FF、Safari 和 IE 时（我没有它，但我打赌它也不支持它）...根本没有 box-shadow。

当我用萤火虫检查元素并尝试输入 box-shadow: 0px 0px 1px rgba(255,255,255,0.7) inset; 它确实出现但没有出现`-1px`。那么该值无效。

有人知道吗？如果不是，我怎样才能使“IF”浏览器不是 chrome，然后添加正值呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T22:30:40.520

您可以使用用户代理检测来检测 chrome 浏览器：

```
var is_chrome = navigator.userAgent.toLowerCase().indexOf('chrome') > -1; 
```

（取自[本页](http://davidwalsh.name/detecting-google-chrome-javascript)）

接着：

```
// include this in the <head> of your doc
if (is_chrome) {
   <link href="chrome_style.css" rel="stylesheet" />
} else {
    // do stuff for other browsers (or ignore)
} 
```

似乎“chrome”这个词出现在大多数（如果不是全部）chrome 的用户代理中。我发现[userAgentString.com](http://www.useragentstring.com/pages/Chrome/)也提供了旧版本的用户代理字符串列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T22:23:55.340

我确信对于这种特定情况有更好的方法，但我只想分享这个。

[CSS Browser Selector](http://rafael.adm.br/css_browser_selector/)是一个非常酷的小 JS 文件，它允许您为特定浏览器指定 CSS 类。

例如，`example`如果浏览器是 IE7，则以下内容仅适用于具有该类的元素。

```
.ie7 .example {
  background-color: orange
} 
```

该页面列出了所有支持的浏览器，您可以创建适用于除 Chrome 之外的所有浏览器的样式。

```
.ie, .ie7, .ie8, .opera, ... { style } 
```

# jsf - UIComponent Mojarra 中的方法 handleAttribute(String name, Object value) 是做什么的？

> ID：11854925
> 
> 赞同：2
> 
> 时间：2012-08-07T22:18:26.153
> 
> 标签：jsf, jsf-2, mojarra

所以让我们选择一个 UIComponent 像`HtmlSelectOneRadio`（请在此处查看源代码：http: [//grepcode.com/file/repo1.maven.org/maven2/com.sun.faces/jsf-api/2.1.7/javax/faces/component/ html/HtmlSelectOneRadio.java#HtmlSelectOneRadio](http://grepcode.com/file/repo1.maven.org/maven2/com.sun.faces/jsf-api/2.1.7/javax/faces/component/html/HtmlSelectOneRadio.java#HtmlSelectOneRadio) )

所以有些 setter 会调用 method `handleAttribute(...)`，而有些则不会，例如

```
public void setDir(java.lang.String dir) {
    getStateHelper().put(PropertyKeys.dir, dir);
    handleAttribute("dir", dir);
}

public void setDisabled(boolean disabled) {
    getStateHelper().put(PropertyKeys.disabled, disabled);
} 
```

我很不清楚在`handleAttribute`做什么，JSF 大师可以向我解释这个方法尝试完成什么以及为什么某些属性调用此方法而其他属性没有？太感谢了

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T23:55:31.340

它与 Mojarra 内部渲染优化有关，其中**只有**由内部`handleAttribute()`方法设置的属性才会被渲染为所谓的“pass-thru”属性，而不是检查组件的每个属性是否已经设置与否，如果属性相对较多，最终可能会更昂贵。“pass-thru”属性是一个组件属性，无需任何特定的预处理/后处理即可直接渲染。

查看 Mojarra 的[`RenderKitUtils`](http://grepcode.com/file/repository.jboss.org/maven2/javax.faces/jsf-impl/2.0.0-RC/com/sun/faces/renderkit/RenderKitUtils.java)课程，从[`renderPassThruAttributes()`](http://grepcode.com/file/repository.jboss.org/maven2/javax.faces/jsf-impl/2.0.0-RC/com/sun/faces/renderkit/RenderKitUtils.java#302)方法开始：

```
316         if (canBeOptimized(component, behaviors)) {
317             //noinspection unchecked
318             List<String> setAttributes = (List<String>)
319               component.getAttributes().get(ATTRIBUTES_THAT_ARE_SET_KEY);
320             if (setAttributes != null) {
321                 renderPassThruAttributesOptimized(context,
322                                                   writer,
323                                                   component,
324                                                   attributes,
325                                                   setAttributes,
326                                                   behaviors);
327             }
328         } else {
329 
330             // this block should only be hit by custom components leveraging
331             // the RI's rendering code, or in cases where we have behaviors
332             // attached to multiple events.  We make no assumptions and loop
333             // through
334             renderPassThruAttributesUnoptimized(context,
335                                                 writer,
336                                                 component,
337                                                 attributes,
338                                                 behaviors);
339         } 
```

如果是标准 JSF 组件之一（实际上，如果组件的包名称以 开头）并且数组中的行为不超过 1 个，则`canBeOptimized()`返回。`true``component``javax.faces.component.``behaviors`

`renderPassThruAttributesOptimized()`只会渲染参数中指定的属性`setAttributes`。

将`renderPassThruAttributesUnoptimized()`循环遍历`attributes`地图中的每个属性，并检查关联值是否为空/空的每个属性，然后渲染它。

* * *

至于为什么某些属性没有被设置`handleAttribute()`，那是因为它们需要一些更具体的预处理/后处理，并且已经由特定于组件的渲染器显式渲染，所以它们不需要渲染为“pass-thru” “ 属性。

* * *

编写自定义组件时无需担心这一点。您始终可以引入与此类似的自己的优化，但不建议依赖 Mojarra 特定的内部优化，因为例如，当您使用 MyFaces 时，它们可能根本不起作用。

# facebook - Adobe AIR 中用于 oAuth 身份验证的自定义内置屏幕键盘

> ID：11854926
> 
> 赞同：0
> 
> 时间：2012-08-07T22:18:48.513
> 
> 标签：facebook, actionscript-3, air, oauth, on-screen-keyboard

我正在构建一个触摸屏照相亭，用户可以在其中拍照、添加图形等在 Adob​​e AIR 中。在该过程结束时，他们将通过电子邮件将图片发送给自己，在 Facebook 上分享图片，并在 Twitter 上分享。

我正在使用本教程：[http](http://tv.adobe.com/watch/adc-presents/oauth-in-adobe-air-applications-built-with-flash-or-flex/) : //tv.adobe.com/watch/adc-presents/oauth-in-adobe-air-applications-built-with-flash-or-flex/ 来弄清楚如何获得 oAuth在 AIR 工作。但这似乎很简单。只需将授权请求 URL 加载到 AIR 的 iFrame 等效项中。

棘手的部分是现场没有物理键盘。对于所有文本输入，我们设计了一个屏幕键盘。在 AS3 中对屏幕键盘进行编程非常简单。但是我们无法访问 AIR HTML/Browser 包装器中的文本字段，因此我们无法手动将字符添加到输入字符串中......

我们可以为此实施任何解决方法吗？不幸的是，添加物理键盘是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T05:34:30.150

我意识到这已经 5 个月大了，但是我今晚正在为一个客户做类似的事情，遇到了你的问题。我还想省略对系统级屏幕键盘或物理现实世界键盘的需求，只是想通过附加的触摸屏在应用程序的控制下使用基于 Flash/AIR 的键盘。

我想出了一个在 Flash/AIR 中完成这一切的 hacky 方法，它适用于任何 oAuth 对话框（有一些警告）。就在今天晚上，我将它作为对 Facebook 和 Twitter oAuth 权限页面的测试。它要求您使用 StageWebView 来显示 oAuth 对话框并通过 StageWebView 的 loadUrl 方法进行一些 JavaScript 注入。使用 stageWebView，第一步是在 StageWebView 中加载 oauth 权限页面时为 Complete 事件设置侦听器。

下一步，一旦加载并触发完整事件，在您的完整处理程序中，您可以通过 StageWebView 引用直接将 javascript 注入页面，然后通过该函数设置通信以从屏幕上的 AS3 动态填充字段键盘或其他功能。例如，要填充 Twitters oAuth 权限页面中的用户名字段，您可以这样做：

```
webView.loadURL("javascript: form = document.forms[0]; form['username_or_email'].value='your_username';"); 
```

这将填充 Twitters oAuth 权限页面中的用户名字段。

因此，您可以在页面中注入一个函数，然后您可以从 ActionScript 调用该函数，以传递来自虚拟屏幕键盘的按键或完整的字符串，以填充正确的字段。这是唯一棘手的部分，提前识别 oAuth 页面源中的表单和字段名称。到目前为止，Twitter 和 Facebook 看起来很容易识别，但当然可能随时中断，一点正则表达式可以帮助确保它们是正确的。除此之外，我在这里看到的唯一问题是字段名称是否出于安全目的而动态更改，但快速浏览一下 twitter 和 facebook，至少它们似乎没有这样做。其他 oAuth 页面可能会也可能不会，YMMV。

有一个使用 StageWebView 的有用库，它可能有助于进行一些此类通信 - 看看这里：[http ://code.google.com/p/stagewebviewbridge/wiki/Communication](http://code.google.com/p/stagewebviewbridge/wiki/Communication)

在任何情况下，这都是总体方法，利用 StageWebView，然后动态注入您自己的 JavaScript 函数来处理从屏幕键盘向字段传递值，或者直接使用与上述类似的代码填充字段。希望这可以帮助任何尝试类似事情的人。

想补充一点，我提出了这种方法，因为它是允许用户直接在我正在处理的展览上执行此操作的要求，但我个人的偏好是简单地收集用户的电子邮件地址或电话号码，并让交互式向他们发送电子邮件或 SMS 消息到他们自己的设备，然后他们可以更安全地轻松共享。另一种解决方案是显示 QR 码，用户可以快速捕捉并快速解决以更安全地共享 - 我更喜欢这些方法，但上述方法对于愿意在公共场所输入其凭据的用户来说是有用的。确保您在会话中有超时并正确注销后续用户的用户凭据，否则肯定会发生坏事。

# php - uri_to_assoc(n) 路由后不起作用

> ID：11854928
> 
> 赞同：1
> 
> 时间：2012-08-07T22:19:22.427
> 
> 标签：php, .htaccess, codeigniter

所以这目前为我加载页面。

/controllername/view/id/27/title/shoes

但是，我希望用户能够输入：

/控制器名称/27/鞋子

查看文件。所以在路由文件中，我做了这样的规则，

$route['controllername/(:num)/(:any)'] = "controllername/view/id/$1/title/$2";

原始地址适用于 uri_to_assoc(n) 因为我将其作为

```
 $array = $this->uri->uri_to_assoc(3);
    $id = $array['id'];
    $title = $array['title']; 
```

但是一旦我路由它并使用新地址访问文件，我就会收到错误消息：未定义索引：id 消息：未定义索引：标题

我使用原始 url 访问它的方式没有收到这些错误。我猜 uri_to_assoc(3) 的值会在 url 更改后发生变化，但我认为路由功能会解决这个问题。谁能帮我摆脱这些变量错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:21:57.417

在这种情况下，您需要`ruri_to_assoc`：

> [http://codeigniter.com/user_guide/libraries/uri.html](http://codeigniter.com/user_guide/libraries/uri.html)
> 
> `$this->uri->ruri_to_assoc(n)`
> 
> 此函数与 [uri_to_assoc] 相同，只是它在您使用 CodeIgniter 的 URI 路由功能时使用重新路由的 URI 创建一个关联数组。

无论如何，您仍然应该验证您的数组索引，以防 URL 本身无效。

# objective-c - 在单独的线程中分离递归方法 - Objective-C

> ID：11854939
> 
> 赞同：0
> 
> 时间：2012-08-07T22:20:26.683
> 
> 标签：objective-c, ios, multithreading, cocoa

这里有点问题...我正在编写一个 ios 应用程序（游戏），我需要它能够自行暂停。所以我认为最好的方法是将游戏执行分离到一个单独的线程中，以便主线程可以根据需要简单地停止它。唯一的问题是：当你运行游戏时，会调用一个递归函数（递归完成：）

```
[self performSelector: withObject: afterDelay:] 
```

而且我不知道如何将递归方法隔离到新线程中。我试过了：

```
[NSThread detachNewThreadSelector:@selector(myThreadMainMethod:) toTarget:self withObject:nil]; 
```

但它在没有递归的情况下执行（只是一次）......而且我认为，如果我在方法结束时再次分离一个新线程，我只会被一堆单独的线程卡住。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:33:41.830

这是一种使用 GCD 定期停止/开始工作的方法：

```
typedef void (^loop_work_t)(void);

@interface Loop : NSObject
@property (nonatomic,assign) loop_work_t block;
@property (nonatomic,assign) NSTimeInterval interval;
@property (nonatomic,assign) dispatch_source_t timerSource;
-(id) initWithInterval:(NSTimeInterval)seconds block:(loop_work_t)block;
-(void) start;
-(void) stop;
@end

#import "Loop.h"

@implementation Loop

@synthesize interval=_interval;
@synthesize block=_block;
@synthesize timerSource=_timerSource;

-(id) initWithInterval:(NSTimeInterval)seconds block:(loop_work_t)block 
{
    if (self = [super init]){
        self.interval = seconds;
        self.block = block;
        dispatch_queue_t backgroundQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
        dispatch_source_t timerSource = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0, backgroundQueue);
        dispatch_source_set_timer(timerSource, dispatch_time(DISPATCH_TIME_NOW, 0), seconds*NSEC_PER_SEC, 0*NSEC_PER_SEC);
        dispatch_source_set_event_handler(timerSource, ^{
            block();
        });
        self.timerSource = timerSource;
    }
    return self;
}

-(void) start {
    dispatch_resume(self.timerSource);
}

-(void) stop {
    dispatch_suspend(self.timerSource);
}

@end 
```

用法：

```
id __weak weakSelf = self;
Loop *loop = [[Loop alloc]initWithInterval:5 block:^{
    // this will run every 5 seconds
    [weakSelf someMethodOfYourClassDoingUsefulWork];
}]; 
```

将最后一个块复制粘贴到任何地方，如果需要，可以嵌套几个循环。只要您保留对循环的引用，就可以启动/停止：

```
[loop start]; // start the loop
[loop stop]; // stop the loop 
```

# javascript - 在 Django 支持的网站上添加“在 Twitter 上分享”功能

> ID：11854943
> 
> 赞同：0
> 
> 时间：2012-08-07T22:20:40.087
> 
> 标签：javascript, jquery, django, twitter, share

我正在尝试在我的 Django 支持网站的页面之一上添加“在 Twitter 上共享”功能。这是 link_page.html 的相关部分：

```
<a class="tweet_link metaSpacing" data-link_id={{ link.id }}>Share on Twitter</a> 
```

下面是负责监听事件的 JavaScript 部分：

```
// tweet_link
$('.tweet_link').click(function(e){
    link_id = $(this).attr('data-link_id');
    var target = $(this);
    tweetLink(target);
});

function tweetLink(t){
    link_id = t.attr('data-link_id');
    $.ajax({
        type: "POST",
        data: { "link_id": link_id, "csrfmiddlewaretoken": csrfmiddlewaretoken},
        url: "/tweet_link",
    });     
}; 
```

在 Django 中，我在 urls.py 的末尾添加了以下行：

```
url(r'^tweet_link/?$', 'portnoy.views.tweet_link'), 
```

这是 Django 视图本身：

```
# tweet the link
def tweet_link(request):
    c = RequestContext(request)
    twitter = Twython(
        twitter_token = TWITTER_KEY,
        twitter_secret = TWITTER_SECRET,
        oauth_token = request.session['request_token']['oauth_token'],
        oauth_token_secret = request.session['request_token']['oauth_token_secret']
    )
    twitter.updateStatus(status="See how easy this was?")
    return HttpResponse('') 
```

但是，当我单击“在 Twitter 上共享”链接时会发生什么，我在 Chrome 控制台上收到此错误：

```
POST http://127.0.0.1:8000/tweet_link 404 (NOT FOUND) 
```

知道如何解决这个问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:42:31.790

您的网址不应包含`?`：

```
url(r'^tweet_link/$', 'portnoy.views.tweet_link'), 
```

你知道你可以简单地用这个 URL 启动一个链接来发推文：

```
https://twitter.com/intent/tweet?source=webclient&text=d+twitter+msg+goes+here 
```

# jquery - CSS + jQuery Transform 插件：如何修复模糊文本

> ID：11854946
> 
> 赞同：3
> 
> 时间：2012-08-07T22:20:57.153
> 
> 标签：jquery, css, transform, antialiasing

所以我遇到了一个奇怪的情况。

我不得不使用 scale 插件来扩展一大堆内容，我想它使用 css 3 转换。

当我单击为文本下方的图层设置动画的按钮时，我会看到清晰的抗锯齿文本“闪烁”（实际上，此时我也隐藏/显示文本）。然后大约 500 毫秒后，所有的文字都变得模糊。我可以一遍又一遍地重复这个。真正奇怪的部分是它在底层完成动画之前又回到了模糊状态。现在，我希望如果这是“添加转换的延迟”，那么新文本一开始不会是“正确”的大小，但一开始是正确的。

![休息时左侧，右侧前 500 毫秒](../Images/72c74e9f3cf1c69ea386f023158e5ec2.png)

```
 /* I've added this, too:*/
        -webkit-font-smoothing: subpixel-antialiased;

    /* also tried */
        -webkit-transform-style: preserve-3d;

    // the basic implementation of the transform using jQuery 2D transform plugin
    $("#container").transform({
        origin: ['50%', '0px'], 
        scaleX: _scaleY,
        scaleY: _scaleY
    });

   // tried this too, but doesn't seem to do anything at all
   $('#container').animate({
       transform: 'scale(' + _scaleY + ')',
       time:.5
   }); 
```

*编辑*似乎只像 chrome。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-22T15:17:46.590

我在 Chrome/Safari 中在背景层的 css 转换中遇到了类似的问题，并添加了在 Chrome 37 中工作的字体平滑属性。

```
-webkit-font-smoothing: antialiased; 
```

# javascript - 如何在javascript中从子类调用父方法？

> ID：11854958
> 
> 赞同：204
> 
> 时间：2012-08-07T22:21:49.770
> 
> 标签：javascript, oop, methods, parent

在过去的几个小时里，我一直在试图找到解决问题的方法，但这似乎是无望的。

基本上我需要知道如何从子类调用父方法。到目前为止，我尝试过的所有东西都以无法正常工作或覆盖父方法而告终。

我正在使用以下代码在 javascript 中设置 OOP：

```
// SET UP OOP
// surrogate constructor (empty function)
function surrogateCtor() {}

function extend(base, sub) {
    // copy the prototype from the base to setup inheritance
    surrogateCtor.prototype = base.prototype;
    sub.prototype = new surrogateCtor();
    sub.prototype.constructor = sub;
}

// parent class
function ParentObject(name) {
    this.name = name;
}
// parent's methods
ParentObject.prototype = {
    myMethod: function(arg) {
        this.name = arg;
    }
}

// child
function ChildObject(name) {
    // call the parent's constructor
    ParentObject.call(this, name);
    this.myMethod = function(arg) {
        // HOW DO I CALL THE PARENT METHOD HERE?
        // do stuff
    }
}

// setup the prototype chain
extend(ParentObject, ChildObject); 
```

我需要先调用父类的方法，然后在子类中添加一些东西。

在大多数 OOP 语言中，这就像调用一样简单，`parent.myMethod()` 但我真的无法理解它是如何在 javascript 中完成的。

非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：231
> 
> 时间：2012-08-07T22:29:19.310

这是它的完成方式：`ParentClass.prototype.myMethod();`

或者如果你想在当前实例的上下文中调用它，你可以这样做： `ParentClass.prototype.myMethod.call(this)`

从带有参数的子类调用父方法也是如此： `ParentClass.prototype.myMethod.call(this, arg1, arg2, ..)`**提示：使用`apply()`而不是`call()`将参数作为数组传递。*

* * *

## 回答 #2

> 赞同：230
> 
> 时间：2016-12-27T13:55:13.540

ES6 风格允许你使用新的特性，比如`super`关键字。`super`当您使用 ES6 类语法时，关键字都是关于父类上下文的。作为一个非常简单的例子，结帐：

> **请记住：**我们不能通过[`super`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/super#super-calling_static_methods)实例方法中的关键字调用父静态方法。调用方法也应该是静态的。

**通过实例方法调用静态方法 - TypeError ！**

```
class Foo {
  static classMethod() {
    return 'hello';
  }
}

class Bar extends Foo {
  classMethod() {
    return super.classMethod() + ', too';
  }
}
console.log(Bar.classMethod()); // 'hello' - Invokes inherited static method
console.log((new Bar()).classMethod()); // 'Uncaught TypeError' - Invokes on instance method
```

**通过调用静态方法`super`- 这有效！**

```
class Foo {
  static classMethod() {
    return 'hello';
  }
}

class Bar extends Foo {
  static classMethod() {
    return super.classMethod() + ', too';
  }
}

console.log(Bar.classMethod()); // 'hello, too'
```

**现在`super`上下文基于调用而改变 - 瞧！**

```
class Foo {
  static classMethod() {
    return 'hello i am static only';
  }

  classMethod() {
    return 'hello there i am an instance ';
  }
}

class Bar extends Foo {
  classMethod() {
    return super.classMethod() + ', too';
  }
}

console.log((new Bar()).classMethod()); // "hello there i am an instance , too"
console.log(Bar.classMethod()); // "hello i am static only"
```

**此外，您可以使用`super`调用父构造函数：**

```
class Foo {}

class Bar extends Foo {
    constructor(num) {
        let tmp = num * 2; // OK
        this.num = num; // ReferenceError
        super();
        this.num = num; // OK
    }
} 
```

当然，您可以使用它来访问父类属性`super.prop`。所以，使用 ES6 并快乐。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-06-09T16:45:32.733

好吧，为了做到这一点，您不受`Class`ES6 抽象的限制。可以通过属性访问父构造函数的原型方法`__proto__`（我很确定会有其他 JS 编码人员抱怨它已折旧），该属性已折旧但同时发现它实际上是子类化需求的重要工具（尤其是对于 Array 子类化需求）。因此，虽然该`__proto__`属性在我所知道的所有主要 JS 引擎中仍然可用，但 ES6[`Object.getPrototypeOf()`](https://developer.mozilla.org/tr/docs/Web/JavaScript/Reference/Global_Objects/Object/getPrototypeOf)在其之上引入了该功能。抽象中的`super()`工具`Class`是它的语法糖。

因此，如果您无权访问父构造函数的名称并且不想使用`Class`抽象，您仍然可以执行以下操作；

```
function ChildObject(name) {
    // call the parent's constructor
    ParentObject.call(this, name);
    this.myMethod = function(arg) {
    //this.__proto__.__proto__.myMethod.call(this,arg);
    Object.getPrototypeOf(Object.getPrototypeOf(this)).myMethod.call(this,arg);
    }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-02-07T21:14:27.043

这是子对象使用 JavaScript 的原型链访问父属性和方法的好方法，它与 Internet Explorer 兼容。JavaScript 在原型链中搜索方法，我们希望孩子的原型链看起来像这样：

子实例 -> 子原型（带有子方法）-> 父原型（带有父方法）-> 对象原型 -> null

子方法也可以调用隐藏的父方法，如下面的三个星号 *** 所示。

就是这样：

```
//Parent constructor
function ParentConstructor(firstName){
    //add parent properties:
    this.parentProperty = firstName;
}

//add 2 Parent methods:
ParentConstructor.prototype.parentMethod = function(argument){
    console.log(
            "Parent says: argument=" + argument +
            ", parentProperty=" + this.parentProperty +
            ", childProperty=" + this.childProperty
    );
};

ParentConstructor.prototype.commonMethod = function(argument){
    console.log("Hello from Parent! argument=" + argument);
};

//Child constructor    
function ChildConstructor(firstName, lastName){
    //first add parent's properties
    ParentConstructor.call(this, firstName);

    //now add child's properties:
    this.childProperty = lastName;
}

//insert Parent's methods into Child's prototype chain
var rCopyParentProto = Object.create(ParentConstructor.prototype);
rCopyParentProto.constructor = ChildConstructor;
ChildConstructor.prototype = rCopyParentProto;

//add 2 Child methods:
ChildConstructor.prototype.childMethod = function(argument){
    console.log(
            "Child says: argument=" + argument +
            ", parentProperty=" + this.parentProperty +
            ", childProperty=" + this.childProperty
    );
};

ChildConstructor.prototype.commonMethod = function(argument){
    console.log("Hello from Child! argument=" + argument);

    // *** call Parent's version of common method
    ParentConstructor.prototype.commonMethod(argument);
};

//create an instance of Child
var child_1 = new ChildConstructor('Albert', 'Einstein');

//call Child method
child_1.childMethod('do child method');

//call Parent method
child_1.parentMethod('do parent method');

//call common method
child_1.commonMethod('do common method');
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-06-16T12:11:11.930

在多继承级别的情况下，该函数可以用作其他语言中的 super() 方法。[这是一个演示小提琴](http://jsfiddle.net/Z2LCn/3/)，有一些测试，你可以像这样使用它，在你的方法中使用：`call_base(this, 'method_name', arguments);`

它使用了最新的 ES 函数，不能保证与旧浏览器的兼容性。在 IE11、FF29、CH35 中测试。

```
/**
 * Call super method of the given object and method.
 * This function create a temporary variable called "_call_base_reference",
 * to inspect whole inheritance linage. It will be deleted at the end of inspection.
 *
 * Usage : Inside your method use call_base(this, 'method_name', arguments);
 *
 * @param {object} object The owner object of the method and inheritance linage
 * @param {string} method The name of the super method to find.
 * @param {array} args The calls arguments, basically use the "arguments" special variable.
 * @returns {*} The data returned from the super method.
 */
function call_base(object, method, args) {
    // We get base object, first time it will be passed object,
    // but in case of multiple inheritance, it will be instance of parent objects.
    var base = object.hasOwnProperty('_call_base_reference') ? object._call_base_reference : object,
    // We get matching method, from current object,
    // this is a reference to define super method.
            object_current_method = base[method],
    // Temp object wo receive method definition.
            descriptor = null,
    // We define super function after founding current position.
            is_super = false,
    // Contain output data.
            output = null;
    while (base !== undefined) {
        // Get method info
        descriptor = Object.getOwnPropertyDescriptor(base, method);
        if (descriptor !== undefined) {
            // We search for current object method to define inherited part of chain.
            if (descriptor.value === object_current_method) {
                // Further loops will be considered as inherited function.
                is_super = true;
            }
            // We already have found current object method.
            else if (is_super === true) {
                // We need to pass original object to apply() as first argument,
                // this allow to keep original instance definition along all method
                // inheritance. But we also need to save reference to "base" who
                // contain parent class, it will be used into this function startup
                // to begin at the right chain position.
                object._call_base_reference = base;
                // Apply super method.
                output = descriptor.value.apply(object, args);
                // Property have been used into super function if another
                // call_base() is launched. Reference is not useful anymore.
                delete object._call_base_reference;
                // Job is done.
                return output;
            }
        }
        // Iterate to the next parent inherited.
        base = Object.getPrototypeOf(base);
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-04-14T17:16:32.423

基于 Douglas Crockford 想法的东西怎么样：

```
 function Shape(){}

    Shape.prototype.name = 'Shape';

    Shape.prototype.toString = function(){
        return this.constructor.parent
            ? this.constructor.parent.toString() + ',' + this.name
            : this.name;
    };

    function TwoDShape(){}

    var F = function(){};

    F.prototype = Shape.prototype;

    TwoDShape.prototype = new F();

    TwoDShape.prototype.constructor = TwoDShape;

    TwoDShape.parent = Shape.prototype;

    TwoDShape.prototype.name = '2D Shape';

    var my = new TwoDShape();

    console.log(my.toString()); ===> Shape,2D Shape 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-12-16T13:10:29.227

对于多级原型查找有一个更简单、更紧凑的解决方案，但它需要`Proxy`支持。用法：`SUPER(<instance>).<method>(<args>)`例如，假设有两个类`A`和`B extends A`方法`m`：`SUPER(new B).m()`。

```
function SUPER(instance) {
    return new Proxy(instance, {
        get(target, prop) {
            return Object.getPrototypeOf(Object.getPrototypeOf(target))[prop].bind(target);
        }
    });
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-05-17T14:04:06.360

使用经典 js 更灵活的答案。

你定义“_parent = A.prototype;” 在子类中，您可以使用 apply 调用父类的方法：

```
class A{
    _msg='A';
    _msgOnlyA=' great from A';
    constructor(){
    }
    hello(){
        console.log('hello '+this._msg+', '+this._msgOnlyA);
    }
};
class B extends A{
    _parent = A.prototype;
    _msg='B';
    constructor(){
        super();
    }
    hello(){
        this._parent.hello.apply(this, arguments);
        console.log('hello '+this._msg);
    }
};
var b = new B();
b.hello();
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-08T13:18:50.640

虽然您可以通过父的原型调用父方法，但您需要传递当前的子实例以使用`call`、`apply`或`bind`方法。该`bind`方法将创建一个新函数，因此如果您关心性能，我不建议您这样做，除非它只调用一次。

作为替代方案，您可以替换子方法并将父方法放在实例上，同时调用原始子方法。

```
function proxy(context, parent){
  var proto = parent.prototype;
  var list = Object.getOwnPropertyNames(proto);

  for(var i=0; i < list.length; i++){
    var key = list[i];

    // Create only when child have similar method name
    if(context[key] !== proto[key]){
      let currentMethod = context[key];
      let parentMethod = proto[key];

      context[key] = function(){
        context.super = parentMethod;
        return currentMethod.apply(context, arguments);
      }
    }
  }
}

// ========= The usage would be like this ==========

class Parent {
  first = "Home";

  constructor(){
    console.log('Parent created');
  }

  add(arg){
    return this.first + ", Parent "+arg;
  }
}

class Child extends Parent{
  constructor(b){
    super();
    proxy(this, Parent);
    console.log('Child created');
  }

  // Comment this to call method from parent only
  add(arg){
    return super.add(arg) + ", Child "+arg;
  }
}

var family = new Child();
console.log(family.add('B'));
```

# django - POST 对象的表单数据时在哪里包含对象 ID

> ID：11854959
> 
> 赞同：0
> 
> 时间：2012-08-07T22:21:52.097
> 
> 标签：django, forms, http, post, http-post

要将对象的数据 POST 到服务器，必须提供对象的 ID 以进行查找。在哪里包含 ID 并将其发送到服务器一直困扰着我。我想到了三个选项：

1.  将 ID 作为 URL 的一部分包含在内
2.  将 ID 作为 POST 数据的一部分包含在内
3.  将 ID 放入查询字符串中（我不确定执行 POST 时是否允许查询字符串）

我使用 python/django 作为我的服务器端。

有人请评论我应该选择哪一个以及为什么。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:34:25.747

在大多数情况下，我会通过 URL 来完成，特别是如果您正在创建一个视图来显示一个对象。此外，我会使用 slug（如果有的话）而不是 ID，因为它在 Google SERP 中看起来更好，它在语义上更有意义，并且对用户来说更具可读性。

请记住，您可以使用`get_absolute_url()`、`{% url ... %}`标签和`reverse()`函数轻松地反转对象的 url。如果您使用查询字符串或帖子来显示您的对象，您将无法利用这些。

关于查询字符串/参数；我通常遵循使用我的 URL 构造查询集的规则，但使用参数对其进行过滤。即，如果我想查看所有带有某些标签的帖子，我会通过 URL 获取主查询集`/posts/tagged/some_tag`，然后在必要时使用参数向下钻取；`/posts/tagged/some_tag?rating=2`

关于 POST 数据；这应该仅在您呈现表单以编辑对象时才真正适用。我仍然会使用 URL 来查找和显示表单（即`/posts/my-post-slug/edit/`），我会使用参数来控制任何选项或功能（即`/posts/my-post/slug/edit/?highlight_required_fields=true`），但表单的所有字段都将通过 POST 提交

# c# - 如何以编程方式创建 Windows 窗体？

> ID：11854971
> 
> 赞同：13
> 
> 时间：2012-08-07T22:22:31.870
> 
> 标签：c#, .net, csharpcodeprovider

我有一个名为的唯一 c# 源文件`source.cs`，我使用来自构建器的 CSharpCodeProvider 进行编译以获取可执行文件。

我会在构建器上设置一个选项，是否在应用程序启动时显示“关于”表单。

如何创建标题为 About Us 的表单，然后在（标签、RichTextEdit 等）中添加控件

就像是

```
if (display_about_dialog) {
// code to display the form } 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-07T22:27:25.363

尝试这样的事情：

```
using (Form form = new Form())
{
    form.Text = "About Us";

    // form.Controls.Add(...);

    form.ShowDialog();
} 
```

[这是该课程的文档页面`System.Windows.Forms.Form`。](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T22:28:26.330

如果你有一个类`MyForm : System.Windows.Forms.Form`（你使用 Windows 窗体生成器创建的）

你可以做

```
MyForm form = new MyForm();
form.Show(); 
```

启动 MyForm 的一个实例。

* * *

虽然如果您想创建一个简单的确认或消息对话框，请查看`MessageBox`

```
MessageBox.Show("text");
MessageBox.Show("text", "title", MessageBoxButtons.OKCancel); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-07T22:27:38.410

```
Form aForm = new Form();

aForm.Text = @"About Us";
aForm.Controls.Add(new Label() {Text = "Version 5.0"});
aForm.ShowDialog();  // Or just use Show(); if you don't want it to be modal. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T22:28:12.767

`Form`是一个类，您可以像任何其他类一样实例化它，设置它的属性，调用它的方法。

# lua - 寻求“弱 Lua 注册表”

> ID：11854976
> 
> 赞同：3
> 
> 时间：2012-08-07T22:22:54.763
> 
> 标签：lua, lua-api

C 有没有办法以与使用[引用系统](http://www.lua.org/pil/27.3.2.html)相同的方式引用 Lua 5.2 中的对象，只是这些引用很弱并且可能随时被垃圾收集？换句话说，是否存在一个不影响对象引用计数的所有当前 Lua 对象的注册表？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T08:01:48.730

您可以通过引入一级间接来做到这一点 - 而不是将值直接存储在注册表中并强制它变弱，这样做：

1.  创建表
2.  通过设置元表使其变弱`{__mode = "v"}`
3.  使用一些已知但唯一的键将此表存储在注册表中
4.  将您要跟踪的所有对象保留在此表中
5.  使用存储在注册表中的此表而不是注册表本身来查找所有对象

请注意，没有“跟踪所有 Lua 对象”（如Ruby 中的[ObjectSpace](http://www.ruby-doc.org/core-1.9.3/ObjectSpace.html)），除非您使用像[Pluto](http://lua-users.org/wiki/PlutoLibrary)这样的重持久性。您只能访问您自己存储/跟踪的对象。

# php - Jquery .ajax 不返回有用的数据

> ID：11854985
> 
> 赞同：1
> 
> 时间：2012-08-07T22:24:03.690
> 
> 标签：php, jquery, json

我的文件中有一个 jquery 脚本，上面写着：

```
<script type="text/javascript">
$(document).ready(function(e){
    $('#myButton').click(function(e){
        var formdata = {name: 'Alan', hobby: 'boxing'};
        var submiturl = 'http://localhost/cake/gronsters/testJSON/';
        $.ajax({
            type: "POST", 
            url: submiturl,
            data: formdata,
            success: function(message){
                console.log(message);
            }
        });
        e.preventDefault();
    })
}); 
```

然后我在 testJSON 有一个 php 脚本，上面写着：

```
public function testJSON(){
    $name = $this->request->data['name'] . '-Sue';
    $hobby = $this->request->data['hobby'] . ' for donuts';
    $data = array(  'name' => $name, 'hobby' => $hobby);
    echo json_encode($data);
} 
```

console.log 查找消息的地方给了我 {"name":"Alan-Sue","hobby":"boxing for donuts"}，这似乎是正确的，只是后面紧跟的是我网页的完整 html . 如果我尝试 console.log(message.name) 它会显示“未定义”。

这里发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T22:31:42.193

听起来你的 /testJSON/ 页面输出的不仅仅是你的公共函数中写的内容。如果您使用的是 mvc 或任何类型的框架，则必须在 echo json_encode 之后立即退出或死亡，否则页面的其他部分可能仍会呈现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T23:15:41.010

您走在正确的道路上，尽管正如其他人所提到的，您似乎正在为您的网站使用 MVC 框架，并且在显示 JSON 字符串后它包含了您网页的内容。如果响应中有其他随机文本或字符，jQuery/JavaScript 无法解析 JSON。您将需要使用`exit;`或`die();`在 JSON 回显后使用，如以下示例所示...

```
public function testJSON(){
    $name = $this->request->data['name'] . '-Sue';
    $hobby = $this->request->data['hobby'] . ' for donuts';
    $data = array(  'name' => $name, 'hobby' => $hobby);
    // Will halt the script and echo the json-encoded data.
    die(json_encode($data));
} 
```

此外，您需要确保 jQuery 将响应解析为 JSON。默认情况下，它会尝试对返回的数据类型进行智能猜测，但您不能总是依赖它。您应该将`dataType`选项添加到 AJAX 调用，如下例所示...

```
<script type="text/javascript">
$(document).ready(function(e){
    $('#myButton').click(function(e){
        // It is best practice to "preventDefault" before any code is executed.
        // It will not cause the ajax call to halt.
        e.preventDefault();
        var formdata = {name: 'Alan', hobby: 'boxing'};
        var submiturl = 'http://localhost/cake/gronsters/testJSON/';
        $.ajax({
            type: "POST", 
            url: submiturl,
            data: formdata,
            // This is the proper data type for JSON strings.
            dataType: 'json',
            success: function(message){
                // JSON is parsed into an object, so you cannot just output
                // "message" as it will just show "[object Object]".
                console.log(message.name);
            }
        });
    });
});
</script> 
```

我在代码中包含了一些注释以帮助更好地解释。希望这会对您有所帮助。您也不需要使用完整的`$.ajax`功能，除非您计划使用错误处理程序或该功能中的任何其他更高级的选项。`$.post`或者，您可以通过使用和完成与原始示例相同的代码来缩短代码。

```
<script type="text/javascript">
$(document).ready(function() {
    $('#myButton').click(function(e){
        e.preventDefault();
        var formdata = {name: 'Alan', hobby: 'boxing'};
        var submiturl = 'http://localhost/cake/gronsters/testJSON/';

        $.post(submiturl, formdata, function(message) {
            console.log(message.name);
        });

    });
});
</script> 
```

`$.ajax` [更多关于jQuery.ajax()](http://api.jquery.com/jQuery.ajax/ "jQuery.ajax();")的选项和使用信息；
更多关于`$.post` [jQuery.post() 的信息；](http://api.jquery.com/jQuery.post/ "jQuery.post();")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T22:32:15.813

在尝试记录 message.name 之前将消息变量解析为 json。

```
data = $.parseJSON(message);
console.log(data.name); 
```

在 echo 语句之后，还要在 php 脚本中退出并检查..

# objective-c - 覆盖 UIView 的 setTransform 会破坏 UIView 上的绘图

> ID：11854992
> 
> 赞同：1
> 
> 时间：2012-08-07T22:24:39.333
> 
> 标签：objective-c, ios, uiview, uiscrollview

我有一个视图（它是在滚动视图中放大的视图），当用户捏合或双击以进行缩放时，我试图仅在 x 方向上拉伸。该视图不断被绘制：每秒最多 10 次，使用 Core Graphics 绘制图形。

所以我像这样覆盖 setTransform ：

```
- (void)setTransform:(CGAffineTransform)newValue;
{
    CGAffineTransform constrainedTransform = CGAffineTransformIdentity;
    constrainedTransform.a = newValue.a;
    [super setTransform:constrainedTransform];
} 
```

这通常会给我我想要的行为，除了一个大问题。当视图经常被绘制并且用户双击放大时，整个视图通常会变黑。如果我不覆盖上述方法，这种情况很少发生（尽管它仍然偶尔会发生一次）。同样有趣的是，当用户使用捏合手势进行缩放时，这不会发生。这是双击触发的功能：

```
- (void)handleDoubleTap:(UIGestureRecognizer *)gestureRecognizer 
{
    CGRect frame = [[self tiledScrollView] frame];
    float newScale = [[self tiledScrollView] zoomScale] * kZoomStep;
    CGRect zoomRect = [self zoomRectForFrame:frame withScale:newScale withCenter:[gestureRecognizer locationInView:[[self tiledScrollView] tileContainerView]]];
    [[self tiledScrollView] zoomToRect:zoomRect animated:YES];
} 
```

并且捏合手势仅由 UIScrollView 的库存捏合识别器处理。关于上述函数的一件令我困扰的事情是 zoomRect 在 x 和 y 方向上都缩放，即使我的视图只在一个方向上缩放。我曾尝试仅在 x 方向上缩放 zoomRect，然后调用 zoomToRect，但随后图形不会缩放。

因此，似乎 UIScrollView 的捏合识别器和我的双击识别器以两种不同的方式缩放视图，并且只有捏合识别器的方式适用于我的代码......此外，当绘制速度变慢时，这个问题变得非常罕见，而当没有绘图正在进行。我尝试过使用队列来进行连续的绘图和缩放，但我没有太多运气。我怀疑 zoomToRect 和其他缩放方法可能会将任务分派给其他线程或其他任何东西，所以我认为它们不能以这种方式顺序化。但这是我应该研究更多的事情吗？

任何帮助将不胜感激。我已经浪费了几天时间试图解决这个问题 -_- 谢谢

# iphone - 您如何使用 Objective-C 使声音文件自动播放到 iOS 应用程序和循环中？

> ID：11854997
> 
> 赞同：-1
> 
> 时间：2012-08-07T22:24:59.413
> 
> 标签：iphone, objective-c, ios, audio

我正在使用objective-c为iPhone制作游戏。我有我想在项目的文件中播放的音乐。我需要知道如何让它在应用程序启动时开始播放，并在最后循环播放。有谁知道如何做到这一点？代码示例会很棒！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T23:18:00.503

您可以在 App Delegate 中使用 AVAudioPlayer。

首先在您的 App Delegate .h 文件中添加以下行：

```
#import <AVFoundation/AVFoundation.h> 
```

还有这些：

```
AVAudioPlayer *musicPlayer; 
```

在您的 .m 文件中添加此方法：

```
- (void)playMusic {

    NSString *musicPath = [[NSBundle mainBundle] pathForResource:@"phone_loop" ofType:@"wav"];
    NSURL *musicURL = [NSURL fileURLWithPath:musicPath];

    musicPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:musicURL error:nil];
    [musicPlayer setNumberOfLoops:-1];   // Negative number means loop forever

    [musicPlayer prepareToPlay];
    [musicPlayer play];
} 
```

最后在`didFinishLaunchingWithOptions`方法中调用它：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
  ...
  [self playMusic];
  ...
} 
```

如果您只想停止音乐：

```
[musicPlayer stop]; 
```

此外，您可以查看用于处理音频中断的 AVAudioPlayer 代表的 Apple 文档[http://developer.apple.com/library/ios/#DOCUMENTATION/AVFoundation/Reference/AVAudioPlayerDelegateProtocolReference/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/AVFoundation/Reference/AVAudioPlayerDelegateProtocolReference/Reference/Reference.html)

PS：记得将 AVFoundation 框架导入到你的项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T22:58:09.303

首先将 AVFoundation 框架导入您的项目。然后将音乐文件插入到您的项目中。

宣布

```
#import <AVFoundation/AVFoundation.h> 
```

接着

```
AVAudioPlayer *audioPlayer;
NSURL *file = [NSURL URLWithString:[[NSBundle mainBundle] pathForResource:@"soundName" ofType:@"mp3"]];
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:file error:nil];
    audioPlayer.numberOfLoops = -1; // Infinite loops
    [audioPlayer setVolume:1.0];
    [audioPlayer prepareToPlay];
    [audioPlayer start] 
```

您可以通过使用在应用程序进入背景之前停止声音

```
 [audioPlayer stop]; 
```

# database - 具有快速灵活（PostgreSQL）数据库访问的语言？

> ID：11854998
> 
> 赞同：2
> 
> 时间：2012-08-07T22:25:01.270
> 
> 标签：database, postgresql, programming-languages

希望这个问题不是太多开放式的……简而言之：我正在寻找一种脚本或编程语言，它可以快速但轻松地访问数据库（`PostgreSQL`）。

我想使用对数据库中某些表的查询结果`PostgreSQL`作为某些`R`分析的输入。查询是简单的`SELECT`请求（请求中可能有改进的空间，但现在我不是这样看的——我前一段时间已经这样做了），而是在第一个查询结果的循环中。表包括数字和字符串，并且有数千行甚至数十万行，因此查询的总数可能非常大。

显然，我首先`R`使用`RPostgreSQL`. 但是，使用起来需要太多时间（我希望能够随时修改和重新运行它）。我已经非常有效地优化了这个脚本，''system.time'' 告诉我大部分时间都花在了循环中的数据库查询上。

然后，当我发现如果我使用文本文件作为 的输入会更快`R`，我决定将此`R`脚本翻译成`python`，使用`psycopg2`. 不幸的是，`python`脚本并不比`R`脚本快多少。

最后我开始使用 编写一个`C++`程序`libpq-fe`，但我发现它不够灵活而停止了（我的意思是，我必须将我的代码行数至少乘以 3 或 4 才能处理查询） .

因此，我想知道哪种语言（或者其他语言`R`或`python`库？）将为数据库访问（即）提供速度和灵活性之间的最佳折衷（就查询结果而言：列表、数组、字符串操作…… `PostgreSQL`）。也就是说，它需要比`R`+`RPostgreSQL`和`python`+快得多`psycopg2`，并且几乎要“灵活”。

感谢您的建议（语言必须是 linux 友好的）。

* * *

更新：这是旧代码与新代码的典型时序，仅使用前 500 个检索到的元素，在`N+1`按照 Ryan 的建议更正了问题的代码之后：

```
> system.time(source("oldcode.R"));
   user      system      elapsed  
  3.825       0.052      49.363 

> system.time(source("newcode.R"));
   user      system      elapsed 
  1.920       0.140       3.551 
```

1000 个第一个检索到的元素也是如此：

```
> system.time(source("oldcode.R"));
   user      system      elapsed  
  9.816       0.092     100.340 

> system.time(source("newcode.R"));
   user      system      elapsed 
  5.040       0.072       6.695 
```

可能确实值得改变。;-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T22:33:24.867

使数据库的任何接口快速运行；优化您的数据库查询。正如您所发现的那样，即使使用优化的代码`R`，大部分时间都花在了 db. 所以你应该选择你最熟悉和最熟悉的编程语言；因为就前端而言，这将是最快的。

但是，无论您使用哪种编程语言，总体结果（就感知性能而言）都是相同的。没有库可以提高查询速度，因为这纯粹是数据库的功能。所有库/语言将允许您将多个查询组合到一个事务中，但查询的结果仍然取决于您的数据库布局和优化。

简单的事情，例如列上缺少索引可能会产生很大的影响。

首先运行[`EXPLAIN ANALYZE`](http://www.postgresql.org/docs/9.1/static/sql-explain.html)您的查询，然后将结果粘贴[到此工具](http://explain.depesz.com/)中以可视化数据库正在执行的操作，以便您知道从哪里开始优化。