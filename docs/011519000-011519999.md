# StackOverflow 问答 11519000-11519999

# templates - 对象的 Ember.js 视图

> ID：11519003
> 
> 赞同：2
> 
> 时间：2012-07-17T08:47:23.967
> 
> 标签：templates, view, ember.js, handlebars.js

我在 Ember.js 应用程序中有简单的视图，就像这样。每个“内容”元素由两个对象组成，第一个和第二个：

```
{{#each App.myController.content}}
    {{view for content.first}}
    {{view for content.second}}
{{/each}} 
```

我想在另一个把手模板脚本中分别为每个内容定义视图（以免不必写两次）。如何将第一个和第二个变量传递给视图？

* * *

这是一个代码示例，请参阅[http://jsfiddle.net/Zm4Xg/5/](http://jsfiddle.net/Zm4Xg/5/)：

**车把**：

```
<script type="text/x-handlebars" data-template-name="contact-view">
     <div>{{name}}</div>
     <img {{bindAttr src="avatar"}} {{bindAttr alt="name"}}>
</script>

<script type="text/x-handlebars">
  {{#each App.contactsController.pair}}
    <div class="menu_vertical_group">
      {{#with this.first}}
         {{view App.contactView}}
      {{/with}}

      {{#with this.second}}
         {{view App.contactView}}
      {{/with}}

    </div>
  {{/each}}
</script> 
```

**​JavaScript** :

```
App = Ember.Application.create();

App.Contact = Em.Object.extend({
    name: null,
    avatar: null
});

App.contactView = Ember.View.extend({
    templateName: 'contact-view'
});

App.contactsController = Em.ArrayController.create({
    content: [],
    initData: function(data) {
        var contacts = data.map(function(contact) {
            return App.Contact.create({
                "name": contact.name,
                "avatar": contact.avatar
            });
        });
        this.pushObjects(contacts);
    },

    pair: (function() {
        content = this.get('content');
        var result = [];
        for (ii = 0; ii < content.length; ii += 2) {
            result.pushObject({
                "first": content[ii],
                "second": content[ii + 1] ? content[ii + 1] : null
            });
        }
        return result;
    }).property('content')
});

App.contactsController.initData([{
    "name": "John Doe",
    "avatar": "/john.jpg"},
{
    "name": "Someone Else",
    "avatar": "/else.jpg"}]);​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T10:34:13.777

像这样的东西？

```
{{#each App.myController.content}}
    {{view MyView contentBinding="content.first"}}
    {{view MyView contentBinding="content.second"}}
{{/each}} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T09:31:50.357

***您可以使用templateName***函数扩展 View 类，该函数根据模型的属性评估为不同的视图，如下所示：

```
App.customView = Ember.View.extend({
    templateName:function(){     
          if(this.get('content').get('index') === 1){
            return 'view1';
          }
          else{
            return 'view2';                               
          }
    }.property('content.index') // custom template function based on 'index' property
}); 
```

看看这个小提琴：http: [//jsfiddle.net/lifeinafolder/7hnc9/](http://jsfiddle.net/lifeinafolder/7hnc9/)

# oracle - 使用 PL/SQL 格式化 Excel

> ID：11519004
> 
> 赞同：-1
> 
> 时间：2012-07-17T08:47:26.200
> 
> 标签：oracle, excel, plsql

> **可能重复：**[使用 Oracle 中的 UTL_FILE 包在 ExcelSheet 中](https://stackoverflow.com/questions/8414050/writing-in-excelsheet-using-utl-file-package-in-oracle)
> [从 Oracle 数据库创建 Excel 电子表格](https://stackoverflow.com/questions/6017863/create-an-excel-spreadsheet-from-a-oracle-database)

我正在使用`UTIL_File`包生成 CSV 文件。

现在我想在 MS Excel 中打开标题时将其格式化为粗体。

有没有办法使用 PL/SQL 和 Oracle 9i 做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T08:51:19.320

csv 文件是纯文本文档，没有任何格式。因此，根据定义，不可能在 excel 中打开 csv 文件并将标题以粗体显示。

您可以在 Excel 中编写一个 vba 宏来打开 csv 文件，将内容复制到 Excel 工作表并应用您需要的任何格式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T14:00:20.587

CSV 是一种纯文本格式，它不允许任何格式信息。如果必须格式化，您可以尝试创建一个 XML Excel 文件：http: [//blogs.msdn.com/b/brian_jones/archive/2005/06/27/433152.aspx](http://blogs.msdn.com/b/brian_jones/archive/2005/06/27/433152.aspx)

请注意，这比创建 CSV 文件要复杂得多，但它*允许*您创建包含格式信息的文件。

# android - Android：R.id.class.getFields() 的“类”是什么？

> ID：11519006
> 
> 赞同：4
> 
> 时间：2012-07-17T08:47:52.880
> 
> 标签：android, class, field

我决定不只是盲目地复制和粘贴，而是决定了解我复制和粘贴的内容，但我被困住了`R.id.class.getFields()`！我最初的猜测是它会是一个静态`Class`变量，但是 id 类有这样的吗？

R = R 类`R.java`

id = 的内部 id 类`R.java`

类=??

获取字段（） =`Class.getFields()`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T08:53:02.653

`R.java`是一类。从`Resources`. `R.id`正在访问内部类。`public static final class id`。_ `R.id.class`将为您提供 R.id 的 Class 对象，`getFields`方法将返回`public`该类中的所有字段`R.id`。看看`reflection`机制。

编辑：[反射](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T08:55:56.373

```
Class Overview
The in-memory representation of a Java class. This representation serves as the starting point for querying class-related information, a process usually called "reflection". There are basically three types of Class instances: those representing real classes and interfaces, those representing primitive types, and those representing array classes.

Class instances representing object types (classes or interfaces)

These represent an ordinary class or interface as found in the class hierarchy. The name associated with these Class instances is simply the fully qualified class name of the class or interface that it represents. In addition to this human-readable name, each class is also associated by a so-called signature, which is the letter "L", followed by the class name and a semicolon (";"). The signature is what the runtime system uses internally for identifying the class (for example in a DEX file).

Classes representing primitive types

These represent the standard Java primitive types and hence share their names (for example "int" for the int primitive type). Although it is not possible to create new instances based on these Class instances, they are still useful for providing reflection information, and as the component type of array classes. There is one Class instance for each primitive type, and their signatures are:

B representing the byte primitive type
S representing the short primitive type
I representing the int primitive type
J representing the long primitive type
F representing the float primitive type
D representing the double primitive type
C representing the char primitive type
Z representing the boolean primitive type
V representing void function return values
Classes representing array classes

These represent the classes of Java arrays. There is one such Class instance per combination of array leaf component type and arity (number of dimensions). In this case, the name associated with the Class consists of one or more left square brackets (one per dimension in the array) followed by the signature of the class representing the leaf component type, which can be either an object type or a primitive type. The signature of a Class representing an array type is the same as its name. Examples of array class signatures are:

[I representing the int[] type
[Ljava/lang/String; representing the String[] type
[[[C representing the char[][][] type (three dimensions!) 
```

# c++ - error LNK2019 for unknown reason

> ID：11519011
> 
> 赞同：0
> 
> 时间：2012-07-17T08:48:02.570
> 
> 标签：c++, class

My code is like this:

Basic.h

```
#define Type double 
```

Model.h

```
#include "Basic.h"

class Model{
 protected:
  int _N;
 public:
  Model(int _N, Type* config){ config=new Type[N]; _N=N}
  virtual Type compute();
}
class Model1: public Model{
 protected:
  int _Nr,_Nc;
 public:
  Model1(int Nr, int Nc, Type* config):Model(Nr*Nc,config){_Nr=Nr;_Nc=Nc;}
  virtual Type compute();
}
class Model2: Public Model{
 public:
  Model2(int N,Type* config):Model(N,config){/*other unrelated codes*/}
  virtual Type compute();
} 
```

Model1.cpp

```
#include "Model.h"

Type Model1::compute(){
/*definition*/
} 
```

Model2.cpp

```
#include "Model.h"

Type Model2::compute(){
/*definition*/
} 
```

Method.h

```
#include "Model.h"

void Method(Model* sys); 
```

Method.cpp

```
#include "Method.h"

void Method(Model* sys){ 
Type a=sys->compute();
/*code*/} 
```

Main.cpp

```
#include "Method.h"

int main(int argc, char** argv){
  Model* sys=new Model2();
  Method(sys);
  /*code*/
} 
```

I can't find any problems but the compiler keeps complaining "error LNK2019: unresolved external symbol void __cdecl Method(class Model *) referenced in function _main".

I am so frustrated because I am a beginner of this and fail to find out the key. I don't know what can cause this: is it anything wrong in my #define? Or it is because different subclass have functions with the same name(seems it should be OK)? Or there is other bugs? I don't even know to add what tags to this question...

Can anyone help me to figure this out? Thanks a lot!

* * *

Thanks for suggestions and I have updated the questions to make sure all the constructors are contained.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:51:47.980

似乎 Method.cpp 不是项目的一部分，所以它没有被编译并且链接器找不到`Method`.

您应该将所有 CPP 文件添加到您的项目中 - Main、Method、Model1 和 Model2。当您使用它时，请确保 H 文件也都在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:21:51.577

我认为在 Model.h 中缺少一些分号。您需要用分号结束类定义。

例如：

```
class Model{
 protected:
  int _N;
 public:
  Model(int _N, Type* config){ config=new Type[N]; _N=N}
  virtual Type compute();
}; 
```

但是，不确定这是否可以解决您的问题。但是缺少分号会带来各种各样的问题。

# php - Download Image Progress Bar, PHP, Javascript, HTML

> ID：11519012
> 
> 赞同：0
> 
> 时间：2012-07-17T08:48:04.933
> 
> 标签：php, javascript, progress

I am creating a speed test application which measures a users upload and download speed by timing how long it takes to upload and download various files. At the moment I am using Javascript to download an image from an external server using the following code:

```
var start_time,end_time;
var download = new Image();
download.onload = function () {
    end_time = (new Date()).getTime();
    download_duration = (end_time - start_time) / 1000;
    finish_download_test();
}
start_time = (new Date()).getTime();
download.src = 'www.fakeimage.com/image.jpg'; 
```

This works, however, I would like to display a progress bar whilst the image downloads. I have seen html5 and c# solutions, however, I would like something that is compatible for more browsers (so no html5) and I am using a combo of php and javascript so the c# solution doesnt help either.

Any help would be greatly appreciated, even if it was just a nudge in the right direction.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:02:54.907

您可以使用 flash 作为进度条。通过 flash 下载文件并通过 js 将百分比传递给 HTML 或仅使用 flash 显示。

# php - 如何在多维数组上应用函数？

> ID：11519015
> 
> 赞同：0
> 
> 时间：2012-07-17T08:48:20.160
> 
> 标签：php, arrays, multidimensional-array

我正在使用一些 php 函数来保证安全。

```
function whileToArray($qr)
    {
        while($rs = mysql_fetch_assoc($qr))
        {
            $data[] = $rs;
        }
        $data = array_map('htmlspecialchars_decode',$data);
        $data = array_map('htmlentities',$data);
        return $data;
    } 
```

当我运行这段代码时，我得到了；

```
Warning: htmlspecialchars_decode() expects parameter 1 to be string, array given in C:\AppServ\www\bigbeng\classes\get.class.php on line 22
Warning: htmlspecialchars_decode() expects parameter 1 to be string, array given in C:\AppServ\www\bigbeng\classes\get.class.php on line 22 
```

### 打印_r（$数据）：

```
Array ( [0] => Array ( [kategori_id] => 1 [kategori_adi] => Spor )
        [1] => Array ( [kategori_id] => 2 [kategori_adi] => Siyaset ) ) 
```

我如何将这些函数与数组一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:06:55.517

您应该将解码逻辑移到内部`while`循环中：

```
function whileToArray($qr)
{
    while($rs = mysql_fetch_assoc($qr))
    {
        $rs = array_map('htmlspecialchars_decode',$rs);
        $rs = array_map('htmlentities',$rs);
        $data[] = $rs;
    }
    return $data;
} 
```

这是一个*非常*不正确的方法。您的逻辑假定绝对存储在数据库中的所有数据都是 HTML 编码的；ID，数值，时间戳，一切。您不应该对数据库中的*任何数据进行 HTML 编码，**只有*在您真正想要在 HTML 中嵌入值时才应该执行 HTML 编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T09:13:26.813

[`array_map`](http://in.php.net/manual/en/function.array-map.php)适用于一维数组而不是多维数组。所以试试下面的功能

```
function array_map_recursive($fn, $arr) {
    $rarr = array();
    foreach ($arr as $k => $v) {
        $rarr[$k] = is_array($v)
            ? array_map_recursive($fn, $v)
            : $fn($v); // or call_user_func($fn, $v)
    }
    return $rarr;
} 
```

然后打电话

```
 $data = array_map_recursive('htmlspecialchars_decode',$data); 
```

# php - File Helper: Write an array to file?

> ID：11519023
> 
> 赞同：1
> 
> 时间：2012-07-17T08:49:10.353
> 
> 标签：php, codeigniter

It seems I can't write an array with file helper.

```
write_file('./save/' . $fileName . '.php', $array, 'w+') 
```

> Severity: Warning
> 
> Message: fwrite() expects parameter 2 to be string, array given
> 
> Filename: helpers/file_helper.php
> 
> Line Number: 96

Is there anyway around this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T08:52:23.040

不同的方法来做到这一点。正如错误消息告诉您的那样，您需要一个字符串来存储数据。您可以使用[serialize()](http://php.net/manual/en/function.serialize.php)来存储值。当您想再次将其用作数组时，可以使用[unserialize()](http://www.php.net/manual/en/function.unserialize.php)。

```
write_file('./save/' . $fileName . '.php', serialize($array), 'w+') 
```

**编辑：**

由于它在 CI 中显然不能很好地工作，根据@flux，代码需要划分：

```
$serialized = serialize($array);
write_file('./save/' . $fileName . '.php', $serialized, 'w+') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T11:22:49.287

而不是内爆，你可以做这样的事情

```
write_file('./save/' . $fileName . '.php', print_r($array,true), 'w+'); 
```

其中 print_r 带有第二个参数 -> true 将打印的数组作为字符串返回并将其保存在您的文件中。但是，使用此函数，与序列化不同，您将无法再次重用数组。

# jquery-ui - jQuery.after 的意外结果

> ID：11519024
> 
> 赞同：0
> 
> 时间：2012-07-17T08:49:13.753
> 
> 标签：jquery-ui

我有一个应用程序，其中包含近 70 个项目`<select>`，允许多项选择。

我试图用两个列表替换它的行为，用户可以在源列表和目标列表之间拖放。初始选择应反映移动。

我试图使其通用，因为我必须在多个页面中重复使用该行为，有时在同一页面中重复使用多次。

我现在所拥有的（为了便于阅读，我减少了实际项目数量）：

```
<div style="border: solid 1px red; overflow:auto">
    <select name="lst1" multiple="multiple" id="lst1" class="go">
        <option value="1">Element N°1</option>
        <option value="2">Element N°2</option>
        <option selected="selected" value="3">Element N°3</option>
        <option value="4">Element N°4</option>
        <option value="5">Element N°5</option>
    </select>
</div>

<script type="text/javascript">
    $(function () {
        $(".go").each(function (index, el) {
            var source = document.createElement("ul");
            var target = document.createElement("ul");
            $(el).after(source);
            $(el).after(target);
            $(source).addClass("sourceItems");
            $(target).addClass("targetItems");
            $(el + "option:selected").each(function (index2, sub) {
                var item = document.createElement("li");
                item.textContent = $(sub).text();
                $(target).append(item);
            });
            $(el + "option:not(:selected)").each(function (index2, sub) {
                var item = document.createElement("li");
                item.textContent = $(sub).text();
                $(source).append(item);
            });

            $(source).sortable({ connectWith : target});
            $(target).sortable({ connectWith : source });
        });
    });

</script>

<style type="text/css">    
.sourceItems, .targetItems { list-style-type: none; float:left; margin: 0; padding: 0; margin-right: 10px; background: #eee; padding: 5px; width: 200px; border: solid 1px black; } 
.sourceItems li, .targetItems li { margin: 5px; padding: 5px; width: 180px; height: 12px; cursor: move; }
</style> 
```

这段代码产生了意想不到的结果：

![在此处输入图像描述](../Images/a4aaeb9d8f80846bb4ee4ae7b4dbafb1.png)

“目标”列表生成的 DOM 看起来不错：

```
<ul class="targetItems ui-sortable">
<li>Element N°3</li>
<li>Element N°7</li>
<li>Element N°8</li>
<li>Element N°14</li>
<li>Element N°20</li>
<li>Element N°15</li>
<li>Element N°21</li>
</ul> 
```

但是“源”列表生成的 DOM 是一团糟（它包含每个元素中的页面 DOM））：

```
<li>
    .sourceItems, .targetItems { list-style-type: none; float:left; margin: 0; padding: 0; margin-right: 10px; background: #eee; padding: 5px; width: 200px; border: solid 1px black; } 
    .sourceItems li, .targetItems li { margin: 5px; padding: 5px; width: 180px; height: 12px; cursor: move; }
</li><li>

</li><li></li><li>
    .sourceItems, .targetItems { list-style-type: none; float:left; margin: 0; padding: 0; margin-right: 10px; background: #eee; padding: 5px; width: 200px; border: solid 1px black; } 
    .sourceItems li, .targetItems li { margin: 5px; padding: 5px; width: 180px; height: 12px; cursor: move; }

    Element N°1
    Element N°2
    Element N°3
    Element N°4
    Element N°5
    Element N°6
    Element N°7
    Element N°8
    Element N°9

...

Element N°3Element N°7Element N°8Element N°14Element N°15Element N°20Element N°21Element N°23Element N°27Element N°29Element. 
```

我看不出有什么问题。我很感激有人指出问题的根源。

这是一个显示问题的 jsfiddle：http: [//jsfiddle.net/gsYHb/](http://jsfiddle.net/gsYHb/)

**[编辑]**如果我颠倒创建源元素和目标元素的顺序，问题会出现在另一个列表中：

```
 var source = document.createElement("ul");
        var target = document.createElement("ul");
        $(el).after(target);
        $(el).after(source); 
```

在这种情况下，这是混乱的目标列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:10:44.410

正如您将在[http://jsfiddle.net/stevebeauge/gsYHb/6/](http://jsfiddle.net/stevebeauge/gsYHb/6/)中看到的，我已经能够解决我的问题。

这是由于`$(this + "option:not(:selected)")`选择器返回了整个页面。

`$(this).children("option:not(:selected)")`用使脚本工作替换此代码（+ 一些其他小修复）

# kinect - What frameworks for depth cameras are out there?

> ID：11519026
> 
> 赞同：3
> 
> 时间：2012-07-17T08:49:23.563
> 
> 标签：kinect, openni

I want to evaluate the performance of several SDKs / frameworks for depth cameras. These cameras can either be using Time-of-Flight or structured light. The framework should be capable (at least) of person tracking / blob detection and gesture recognition. So far I found the following frameworks:

*   [OpenNI](http://openni.org/) (structured light only)
*   [Microsoft Kinect SDK](http://www.microsoft.com/en-us/kinectforwindows/develop/overview.aspx) (Kinect only)
*   [Beckon SDK](http://www.omekinteractive.com/) by Omek Interactive (ToF and structured light)
*   [iisu](http://www.iisu.com/) by SoftKinetic (ToF and structured light)

Are there any other frameworks I should be aware of?

EDIT: I found [this article](http://www.techradar.com/news/world-of-tech/beyond-kinect-5-next-gen-gesture-systems-1062885) by Techradar that seems to indicate that these are indeed the only options currently available.

Any feedback would be very much appreciated!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T03:21:15.013

我发现了一些有趣的链接。您可以使用 MIT 的方法使用[CodAC](http://www.rle.mit.edu/stir/codac/)。他们在这篇文章中列出了很多事实，我将在这里发布最重要的事实。

```
9\. What are limitations of this technique?

The main limitation of our framework is inapplicability to scenes with curvilinear
objects, which would require extensions of the current mathematical model.
Another limitation is that a periodic light source creates a wrap-around error 
as it does in other TOF devices. For scenes in which surfaces have high reflectance
or texture variations, availability of a traditional 2D image prior to our data   
acquisition allows for improved depth map reconstruction as discussed in our paper.

10\. What are advantages of this technique/device and how does it 
compare with existing TOF-based range sensing techniques?

In laser scanning, spatial resolution is limited by the scanning time. 
TOF cameras do not provide high spatial resolution because they rely on a 
low-resolution 2D pixel array of range-sensing pixels. CoDAC is a single-sensor,
high spatial resolution depth camera which works by exploiting the sparsity of natural 
scene structure.

11\. What is the range resolution and spatial resolution of the CoDAC system?

We have demonstrated sub-centimeter range resolution in our experiments.
This is significantly better than fundamental limit of about 10 cm that would 
arise from using a detector with 0.7 nanosecond rise time if we were not using 
parametric signal modeling.  The improvement in range resolution comes from the 
parametric modeling and deconvolution in our framework. We refer the reader to 
our publications for complete details and analysis.

We have demonstrated 64-by-64 pixel spatial resolution,
as this is the spatial resolution of our spatial light modulator.  
Spatially patterning with a digital micromirror device (DMD) will enable 
much higher spatial resolution.  Our experiments use only 205 projection patterns,
which correspond to just 5% of number of pixels in the reconstructed depth map. 
This is a significant improvement over raster scanning in LIDAR, and it is 
obtained without the 2D sensor array used in TOF cameras. 
```

我在[Youtube 上](http://www.youtube.com/watch?v=ZeDtWWuxSXA)发现的另一个有趣的项目使用[`libfreenect`](https://github.com/OpenKinect/libfreenect)和[`libusb`](http://www.libusb.org/)

还有[`dSensingNI`](http://dl.acm.org/citation.cfm?id=2148179&dl=ACM&coll=DL&CFID=102784528&CFTOKEN=17576651)一个被描述为

```
This work presents an approach to overcome the disadvantages of existing interaction 
frameworks and technologies for touch detection and object interaction. The robust and
easy to use framework dSensingNI (Depth Sensing Natural Interaction) is described, 
which supports multitouch and tangible interaction with arbitrary objects. It uses 
images from a depth-sensing camera and provides tracking of users fingers of palm of
hands and combines this with object interaction, such as grasping, grouping and 
stacking, which can be used for advanced interaction techniques. 
```

所以你已经找到了其中的大多数，尤其是那些使用 Kinect 的，但还有其他一些选择！希望这可以帮助！

# android - 如何避免软键盘显示自动更正建议？

> ID：11519030
> 
> 赞同：3
> 
> 时间：2012-07-17T08:49:29.450
> 
> 标签：android, android-edittext, android-softkeyboard

我不希望我的软键盘显示这些建议和任何符号，如！、“、、、:、”。

![在此处输入图像描述](../Images/e8d8951d2a67c0807f3408eeed50f840.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T08:51:13.137

要停止提供建议，请将以下属性添加到 XML 中的 EditText：

```
android:inputType="textNoSuggestions" 
```

`|`和/或使用如下添加多种类型：

```
android:inputType="textNoSuggestions | text" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T08:51:21.680

您可以将此行添加到您的 EditText

> android:inputType="textFilter"

[在这里查看](https://stackoverflow.com/a/4488987/444324)为什么它有时比 textNoSuggestions 更好

# ruby-on-rails - 在resque和delayedjob的上下文中，什么是worker？

> ID：11519034
> 
> 赞同：1
> 
> 时间：2012-07-17T08:49:37.177
> 
> 标签：ruby-on-rails, delayed-job, resque

问题 - 什么是工人？

这似乎是一个模糊而广泛的问题，但坦率地说，这就是我对这类东西的了解程度。

我有一个网站，它依赖于工作人员对数据库项目进行大量后台处理，我有点想知道要提供多少工作人员，而且真的可以在背后投入更多的科学知识。

我看到一个截图的人有 120 个工人，我们的 32GB RAM 盒子开始锁定大约 20 个工人。我确实读过，如果我使用上帝，我的工作人员会作为进程而不是线程启动？

您可以提供的任何信息将不胜感激，我还没有在网上找到可以用外行术语向我解释它的资源。

编辑：一些细节——我们目前是一个运行 Resque 的 rails 3.1 应用程序。

非常感谢您的阅读。

谢谢，

杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T16:26:31.767

Resque worker 可以被认为是一个[永远运行的 rake 任务](https://github.com/defunkt/resque/#workers)。每个工作人员都会加载您的 rails 环境。在平衡工作人员数量和每个工作人员将使用的资源量时，您需要考虑到这一点。

# html - 在链接之间放置空格

> ID：11519037
> 
> 赞同：6
> 
> 时间：2012-07-17T08:49:49.710
> 
> 标签：html

我有两个问题：

1.  当我运行下面的代码时，它以大格式显示链接的名称，重新加载后，它很好，那么有什么问题？

2.  我想在这样的名称之间放置空格：

მთავარიბაკურიანიგუდაურიზღვაკახეთისვანეთიქართლიძველი_ _თბილისი</ p>

我怎么能这样做？

```
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  </head>
  <style>

    #links { 
      margin: 0 auto; 
      width: 3000px; 
      font-size:70px;
      clear: both; 
      display: block;
    }

    #test a {
      float: right;
    }
  </style>
  <body bgcolor="blue" >
    <a href="indexE.html"><img src ='english.gif' style="float:right"  width="88" height="88"> </a>
    <a href="indexR.html"><img src ='russian.gif' alt="Russian flag" style="float:right"  width="88" height="88"/>
    <a href="index.html"> <img src="georgian.jpg"  style="float:right" width="88" height="88"/>
    <div id="links">
      <a href=" index.html " >მთავარი </a>
      <a href=" ბაკურიანი.html ">ბაკურიანი </a>
      <a href=" გუდაური.html ">გუდაური </a>
      <a href=" ზღვა.html ">ზღვა </a>
      <a href=" კახეთი.html ">კახეთი </a>
      <a href=" სვანეთი.html ">სვანეთი </a>
      <a href=" ვარძია.html ">ვარძია </a>
      <a href=" ქართლი.html ">ქართლი </a>
      <a href=" ძველი_თბილისი.html ">ძველი_თბილისი </a>
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T08:52:52.787

对于问题 2.)：您可以简单地在两者之间放置一个非中断空格：

```
<a href=" კახეთი.html ">კახეთი </a>
&nbsp;
<a href=" სვანეთი.html ">სვანეთი </a>
&nbsp;
<a href=" ვარძია.html ">ვარძია </a> 
```

结果是：

კახეთი სვანეთი ვარძია

或者，您可以在样式定义中添加填充/边距，以便锚点（“a 标签”）在左侧和/或右侧保留一些空间。拿铁咖啡当然是首选的方式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-17T08:52:44.227

您可以使用`&nbsp;`空格，它是空格的有效 HTML 字符串，因此 W3C 也会对其进行验证。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T08:53:05.860

在链接之间使用`&nbsp;`来获取空格

```
<a href=" index.html " >მთავარი </a>&nbsp;
<a href=" ბაკურიანი.html ">ბაკურიანი </a>&nbsp;
<a href=" გუდაური.html ">გუდაური </a> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T08:53:03.283

indexR 和 index 需要结束`</a>`标签。也可用于空格`&nbsp;`或 css 边距或填充。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T09:46:59.877

要在 html 应用程序中使用空间，请使用 1) 实体名称

; 或 2) 实体编号

;

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-21T19:31:32.070

您可以`%20`对空格字符使用 HTML-ASCII 语法。我发现有时**与 links**`&nbsp;`不能很好地配合。

 *** * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-12T18:33:33.893

在锚标记 CSS 文件中添加填充。

直接适用于所有锚标签：

`ul li a{ padding: 10px; }`

或者如果使用任何课程，

`.classname ul li a{ padding: 10px; }`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-12T18:41:45.657

虽然`&nbsp`是完全有效的，但一定要试试这个，因为这是一种优雅的方式

```
 <style>
       .links
       {
       display:flex;
       align-items:center;
      justify-content:space-around;
       }
      .links a
      {
      flex:1;
      text-align:center;
      }
       </style>

      <div class="links“&gt;
        <a href=" კახეთი.html ">კახეთი </a>

       <a href=" სვანეთი.html ">სვანეთი </a>

       <a href=" ვარძია.html ">ვარძია </a>
      </div> 
```**

# arrays - Oracle：使用 DBMS_SQL 定义的数组进行批量收集

> ID：11519040
> 
> 赞同：0
> 
> 时间：2012-07-17T08:50:04.400
> 
> 标签：arrays, oracle, plsql, forall

它不编译。怎么了？

```
TYPE recEniFlussiHub IS RECORD
      (
         FLVO_ID                 dbms_sql.varchar2_table,
         flh_id_messaggio        dbms_sql.varchar2_table,
         flh_integrazione_id     dbms_sql.varchar2_table
      );

      TYPE taof_RowCurEniFlussiHub IS TABLE OF recEniFlussiHub;

      curEniFlussiHub        taof_RowCurEniFlussiHub;

      SELECT null FLVO_ID, 
             c.flh_id_messaggio,
             c.flh_integrazione_id,        
        BULK COLLECT INTO curEniFlussiHub
        FROM ENI_FLUSSI_HUB c
       WHERE     c.flh_fornitura = P_FLH_FORNITURA 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:12:53.463

您错误地声明了您的记录类型（我假设您的列`flh_id_messaggio`并且`flh_integrazione_id`它们本身不是嵌套表）。

如果您正在创建一个关联数组来保存选定的值，则每个字段本身不必是一个集合（并且您在 select 语句之后有一个额外的逗号`c.flh_integrazione_id`）：

（我假设你`flvo_id`是 a `VARCHAR2`，因为你试图将它声明为 a `VARCHAR2_TABLE`，如果它是 a`NUMBER`然后在你的记录声明中声明它）。

```
TYPE receniflussihub IS RECORD(
     flvo_id                 VARCHAR2,
     flh_id_messaggio        eni_flussi_hub.flh_id_messaggio%TYPE,
     flh_integrazione_id     eni_flussi_hub.flh_integrazione_id%TYPE
);

TYPE taof_rowcureniflussihub IS TABLE OF receniflussihub;

cureniflussihub  taof_rowcureniflussihub;

SELECT NULL flvo_id,
       c.flh_id_messaggio,
       c.flh_integrazione_id
  BULK COLLECT INTO cureniflussihub
  FROM eni_flussi_hub C
 WHERE c.flh_fornitura = p_flh_fornitura; 
```

看[这里](http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/collections.htm#CIHIEBJC)

希望能帮助到你...

**编辑：**

根据您的评论，如果您需要选择一个集合记录（而不是一个记录集合），那么您不需要声明表 TYPE，只需声明您的 decald 记录类型的记录并选择该记录（不要忘记在您的代码`c.flh_integrazione_id`中，您的 select 语句之后仍然有额外的逗号）：

试试这个：

```
TYPE receniflussihub IS RECORD(
     flvo_id                 dbms_sql.varchar2_table,
     flh_id_messaggio        dbms_sql.varchar2_table,
     flh_integrazione_id     dbms_sql.varchar2_table
);

receniflussihub_rec receniflussihub;

SELECT NULL flvo_id,
       c.flh_id_messaggio,
       c.flh_integrazione_id
  BULK COLLECT INTO receniflussihub_rec.flvo_id,
                    receniflussihub_rec.flh_id_messaggio,
                    receniflussihub_rec.flh_integrazione_id
  FROM eni_flussi_hub C
 WHERE c.flh_fornitura = p_flh_fornitura; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T09:24:36.303

如果要在记录中使用嵌套表，则需要在 BULK COLLECT 子句中引用它们的元素。像这样的东西：

```
 SELECT null FLVO_ID,   
         c.flh_id_messaggio,  
         c.flh_integrazione_id        
    BULK COLLECT INTO curEniFlussiHub.FLVO_ID
              ,   curEniFlussiHub.flh_id_messaggio        
              ,   curEniFlussiHub.flh_integrazione_id
    FROM ENI_FLUSSI_HUB c  
   WHERE     c.flh_fornitura = P_FLH_FORNITURA 
```

此外，您只需要将变量定义为记录的实例：您不需要额外的表类型，即

```
declare
    recEniFlussiHub IS RECORD 
      ( 
         FLVO_ID                 dbms_sql.varchar2_table, 
         flh_id_messaggio        dbms_sql.varchar2_table, 
         flh_integrazione_id     dbms_sql.varchar2_table 
     ); 

  curEniFlussiHub        recEniFlussiHub; 
```

# java - 如何在 java 应用程序中使用我自己的 sikuli 文件

> ID：11519042
> 
> 赞同：0
> 
> 时间：2012-07-17T08:50:10.927
> 
> 标签：java, sikuli

我有 sikuli 文件，其中定义了一些类。我想做的是在我自己的java程序中使用这些类。

关于如何实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:41:12.210

查看工作 Sikuli 目录中的文件，即 HelloWorld.sikuli。Sikuli 脚本是用 jython 编写的，而不是 java。技术性，但重要的是要了解您的 Sikuli 文件是 .py 而不是 .java。该目录还将包含一个 .class 文件，该文件是已编译的 Jython 机器代码。[这里](http://www.jython.org/jythonbook/en/1.0/JythonAndJavaIntegration.html)的参考资料展示了如何在 java 中使用 jython。

# node.js - Mongoose DBRef remove original schema 移除移除 DBRefs 并从 DBRef Array 中拉出

> ID：11519059
> 
> 赞同：1
> 
> 时间：2012-07-17T08:51:17.940
> 
> 标签：node.js, mongodb, model, mongoose, dbref

在**猫鼬**中，

我可以声明**模式**，也可以使用

[数据库参考](http://mongoosejs.com/docs/populate.html)

这只是将**ObjectId 或 ObjectId 数组**

并**填充（获取）**这些项目。

**我认为当需要删除 DBRef**时会出现问题。

有什么方法可以**同步删除 DBref**吗？

## 例如

1.  **从数组中删除 DBRef 应该**删除****其他**集合中的 DBRef 并且还从不同集合中的 DBRef 数组中**拉出该 DBRef****
***   **删除**文档（从该文档的 Schema 中删除 DBRef）也会**删除**其他集合中的 DBRef，并且还会从不同集合中的 DBRef 数组中**拉出该 DBRef****

 **这些**可能**吗？如果是这样，**我怎样才能实现这些**？或任何其他**模型设计建议**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:07:06.633

您可以使用`schema.pre('remove', ...` [中间件](http://mongoosejs.com/docs/middleware.html)来实现您自己的级联删除其他集合中的 ObjectId 引用。 `this._id`标识要在中间件函数中删除的文档。**

# backbone.js - 如何使用 Backbone.Marionette 处理分页

> ID：11519061
> 
> 赞同：8
> 
> 时间：2012-07-17T08:51:19.323
> 
> 标签：backbone.js, marionette

我有一个使用外部 API 填充的集合，API 返回许多对象 + 更多对象的分页详细信息，然后我想在我的视图中可能只显示这些对象的一个​​子集，但允许进一步的分页视图也

为了更好地解释我的情况：

1.  从服务器获取 20 个结果，获取更多页面的分页数据
2.  显示 10 个结果 + 更多按钮
3.  点击更多，显示 10 个结果 + 更多按钮
4.  点击更多，从服务器获取 20 个结果，显示 10 个结果 + 更多按钮...

你的解决方案是什么？我找到了[Backbone.Paginator](https://github.com/addyosmani/backbone.paginator)，但我不知道它与 Marionette 的集成情况如何，或者是否已经存在*Backbone.Marionette.Paginator*扩展:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T13:54:27.247

Backbone.Paginator 在 Backbone 集合之上提供了扩展和额外的方法和特性，这意味着它们应该可以从任何类型的 Backbone 视图中使用，包括 Marionette。

那么，您不需要做任何特别的事情来集成 Marionette 和 Paginator。您将构建一个利用附加方法和特性的视图，但是您将基于 Marionette 的视图而不是标准的 Backbone 视图来构建该视图。在这种情况下，我建议使用 Marionette 的集合视图或复合视图，分别呈现分页集合中的每个项目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-07T10:15:23.283

下面是我如何解决集成 Marionette 和backbone.paginator 的问题。从某种意义上说，这是“直截了当”的，但作为一个新来的骨干。牵线木偶它让我烦恼了一段时间！我希望这对某人有用。

使用复合视图上的 serializeData 方法从分页器的 paginator_ui 对象呈现信息。

```
/* a view for presenting a backbone.paginator collection,
 * and for presenting and handling its pagination UI element */
App.module('Views', function(Views, App, Backbone, Marionette, $, _) {
    Views.PaginatedCollectionView = Backbone.Marionette.CompositeView.extend({
        template: 'backbone/templates/paginated_collection_view',
        itemView: App.Views.StructureView,

        /* I'm not using a model, but you could if you
         * wanted? You might even merge the two */
        serializeData: function(){
          if (this.model){
            data = this.model.toJSON();
          } else {
            // we want to render the paginator_ui in our templates
            data = this.collection.paginator_ui;
          }

          return data;
        }
    });
}); 
```

# javascript - selectObjId的含义

> ID：11519065
> 
> 赞同：0
> 
> 时间：2012-07-17T08:51:27.270
> 
> 标签：javascript, jquery, ajax, jquery-mobile

我试图了解 selectObjId 是什么。我在网上看到了一些例子，但它实际上是做什么的，我不是很清楚。谁能解释一下它的作用，它属于 AJAX 的哪种语言？如果可能的话，我可以举一个例子来打印出 selectObjId 引用的值。任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:52:58.510

`selectObjId`如果你定义命名一个函数、对象、值，是你想要的任何东西......

例如在 Javascript (ECMAScript) 中：

```
var selectObjId = document.getElementById('funnydiv'); 
```

* * *

PS `ObjID`= JAVA

> JDK文档(JAVA)
> - class java.rmi.server..ObjID public final class ObjID extends Object implements Serializable Tree:java.lang.Object - java.rmi.server.ObjID ObjID 用于随着时间的推移在 VM 中唯一标识远程对象。每个标识符都包含一个对象编号和一个地址空间标识符，该标识符对于特定主机是唯一的。对象标识符在导出时分配给远程对象。如果属性 java.rmi.server.randomIDs 为真，则使用无参数构造函数创建的 ObjID 的对象编号组件（64 位）将包含加密强随机数。- 类 java.rmi.server.ObjID 的构造函数 public ObjID () 生成唯一的对象标识符。如果属性 java.rmi.server.randomIDs 为真，那么使用无参数构造函数创建的 ObjID 的对象编号组件（64 位）将包含一个加密的强随机数。因为：JDK1.1 - 类 java.rmi.server.ObjID 的构造函数 public ObjID (int num) 生成一个“众所周知的”对象 ID。通过此构造函数生成的对象 ID 不会与通过默认构造函数生成的任何对象 ID 冲突。参数：num - 唯一的知名对象编号Since：JDK1.1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:37:11.670

我认为`selectObjId`那里的任何图书馆都没有什么特别之处。从未在您使用的代码中声明它可能只是一个错误。

Javascript非常宽容。很有可能`selectObjId`尚未声明，但您的代码仍然有效。根据您的使用方式，它也可以是函数的名称。

您可以通过使用`console.log(selectObjId)`来测试它打印出来的内容。您可能需要安装 Firebug。查看[Firebug 帮助以](http://getfirebug.com/wiki/index.php/Console_Panel#Message_types)获取有关错误和警告的更多信息。

请记住在开发网页时使用浏览器的错误日志。

# java - 用户'root'@'localhost'的访问被拒绝（使用密码：YES）：PhpMyAdmin

> ID：11519070
> 
> 赞同：3
> 
> 时间：2012-07-17T08:51:37.670
> 
> 标签：java, mysql, jdbc, privileges

鉴于此代码：

```
package db;

import java.sql.*;

public class Main
{
    public static void main (String[] args) throws ClassNotFoundException, SQLException
    {

        Class.forName("com.mysql.jdbc.Driver");

        String string = "jdbc:mysql://localhost:3306/testdb";

        Connection con = DriverManager.getConnection(string , "root" , "root");
        PreparedStatement statement = con.prepareStatement("select * from name");
        ResultSet result = statement.executeQuery();
        while (result.next())
        {
            System.out.println(result.getString(1) + " " + result.getString(2));
        }

    }
} 
```

我正在尝试连接 mysql 服务器，但我得到了这个：

```
Exception in thread "main" java.sql.SQLException: Access denied for user 'root'@'localhost' (using password: YES)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1074)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4074)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4006)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:919)
    at com.mysql.jdbc.MysqlIO.proceedHandshakeWithPluggableAuthentication(MysqlIO.java:1694)
    at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1244)
    at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2397)
    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2430)
    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2215)
    at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:813)
    at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:399)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:334)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at db.Main.main(Main.java:14) 
```

行`14`是：`Connection con = DriverManager.getConnection(string , "root" , "root");`

我确定我在安装时`MySql`输入了密码`root`。只是为了确保，我进入了这里: ![对此](../Images/624ac50aaf4c328f265af4216143879f.png),

并将密码更改为`root`: ![在此处输入图像描述](../Images/1568085282025090299e539a07a9c99b.png)，但我仍然无法获得任何正确的输出。

知道有什么问题吗？

谢谢

**备注：** 为了清楚起见，我正在使用：

1.  面向 Web 开发人员的 Eclipse Java EE IDE。

2.  雄猫 7

3.  Xampp

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:14:30.607

> 线程“主”java.sql.SQLException 中的异常：用户 'root'@'localhost' 的访问被拒绝（使用密码：是）

当用户无权访问本地主机时，您会收到此错误。

您需要从 localhost 授予对 root 的访问权限。

正如您所添加的那样。我怀疑问题出在`password='NO'`带有`mySQL`设置的行上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-04T11:30:21.597

使用您的用户名和密码执行以下命令：

```
grant usage on *`.`* to `devuser@localhost` identified by '`devpassword`';
grant all privileges on `dev.` to `devuser@localhost`; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-17T09:10:48.800

您的问题与 phpMyAdmin 无关。它只是一个界面。

除此之外，我认为你应该删除密码 =“NO”的行

# linux - 使用适用于 linux 的 Azure 命令行工具创建虚拟机

> ID：11519071
> 
> 赞同：1
> 
> 时间：2012-07-17T08:51:40.983
> 
> 标签：linux, command-line, azure, passwords, virtual-machine

尝试使用适用于 linux 的 Azure 命令行工具，

下面是我尝试创建虚拟机时的屏幕输出。

path.existsSync 现在称为`fs.existsSync`. info：执行命令 vm create + 查找图像
+ 查找云服务
+ 创建云服务
+ 检索存储帐户
tty.setRawMode：`process.stdin.setRawMode()`改为使用。输入 VM 'cliusername' 密码：

在这个阶段，我输入了密码并回车，但没有任何反应。还有什么是消息“tty.setRawMode：`process.stdin.setRawMode()`改用。” 显示在屏幕上。请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T02:47:56.023

在与各自团队讨论后，我们发现这个问题与 node.js v0.8 兼容性问题有关。

您似乎正在运行最新的节点版本，并且您使用以下命令安装的 azure 工具与最新的节点 v0.8 不兼容：

```
npm install azure --global 
```

修复在 DEV 分支[https://github.com/WindowsAzure/azure-sdk-for-node/](https://github.com/WindowsAzure/azure-sdk-for-node/)不在 MASTER 中。从 npm 存储库提供的包没有更新。

目前您可以从 dev 分支创建包，为此：

1.  [从https://github.com/WindowsAzure/azure-sdk-for-node/tree/dev](https://github.com/WindowsAzure/azure-sdk-for-node/tree/dev)下载 zip 文件
2.  解压并从命令提示符切换到解压目录
3.  通过运行命令创建包（注意：这将生成文件 azure-0.6.1.tgz）：

    **npm 包**

4.  通过运行以下命令安装此软件包：

    **npm install azure-0.6.1.tgz --global**

这应该可以解决您的问题。

# php - 如何在 PHP 中为数字添加前导零和逗号

> ID：11519072
> 
> 赞同：3
> 
> 时间：2012-07-17T08:51:44.573
> 
> 标签：php, integer, format, number-formatting

我有一个`$counter`返回以下整数的变量：

```
4 
```

我想使用数字格式或类似格式使我的整数以这种格式出现：

```
000,000,004 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T08:57:29.247

您可以像这样一起使用[`sprintf()`](http://php.net/manual/en/function.sprintf.php)和[`str_split()`](http://php.net/manual/en/function.str-split.php)：

```
$number = 4;
$formattedNumber = sprintf("%09d", $number);
$formattedNumber = str_split($formattedNumber, 3);
$formattedNumber = implode(",", $formattedNumber);
echo $formattedNumber; 
```

# 编辑：

这是上述代码的杀手级变体，它使用[`str_pad()`](http://php.net/manual/en/function.str-pad.php)：

```
function formatNumber($number, $desiredLength, $separatorLength) {
    $formattedNumber = str_pad($number, $desiredLength, "0", STR_PAD_LEFT);
    while(strlen($formattedNumber) % $separatorLength){
        $formattedNumber = " " . $formattedNumber;
    }
    $formattedNumber = str_split($formattedNumber, $separatorLength);
    $formattedNumber = implode(",", $formattedNumber);
    return trim($formattedNumber);
}
echo formatNumber(         4, 9, 3); // 000,000,004   -- fixed width
echo formatNumber(4000000000, 9, 3); // 4,000,000,000 -- fixed width; overflow handled automatically
echo formatNumber(         4, 0, 3); // 4             -- no width specified
echo formatNumber(      4000, 0, 3); // 4,000         -- no width specified; comma added automatically 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T09:00:35.563

您可以做的一种方法是[sprintf](http://php.net/sprintf)。

```
sprintf('%03d', $counter); 
```

另一个正在使用[str_pad](http://php.net/manual/en/function.str-pad.php)

```
str_pad($counter, 3, "0", STR_PAD_LEFT); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T09:00:29.537

您可以使用[str_pad](http://php.net/manual/en/function.str-pad.php)功能：

```
str_pad((4,2,"0",STR_PAD_LEFT); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T09:19:02.257

```
$string = "4";
echo str_pad($string, 9, "0", STR_PAD_LEFT); // prints "000000004" (9-digit number)

/* 
   9 = How long the returned value should be. Must be bigger than length of $string
   0 = String to add
   STR_PAD_LEFT = On which side to add zeros? Left, in the case
 */ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-07T18:18:08.270

使用 [number_format](http://php.net/number_format)

```
$number = 1;
echo number_format($number / 1000, 3, ",", "."); // 2 decimals, "," and "." as seperators
// gives 0,001 
```

# java - 复选框在 JTable 中不起作用/不可编辑

> ID：11519077
> 
> 赞同：1
> 
> 时间：2012-07-17T08:52:01.640
> 
> 标签：java, swing, jtable, apache-poi, jcheckbox

此类是创建 6 列的 jtable，最后一列包含布尔复选框。我在 getColumnClass 中指定了它。我无法取消选中/选中这些框，它们是不可编辑的。我怀疑 MyTableModel 类中的方法 setValueAt 和 getValueAt 不正确，但我无法理解它。请帮忙。下面是我向您展示的 3 个类：带有 main 方法的 gui 类、扩展 AbstractTableModel 的 MyTableModel 和单元格渲染器类 ColorRenderer。

```
import java.awt.Color;
import java.awt.Component;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.Vector;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableColumnModel;
import org.apache.poi.openxml4j.exceptions.InvalidFormatException;

public class table extends JFrame {

    JTable table = new JTable();
    MyTableModel model = new MyTableModel(getDummyData());
    JScrollPane scroll;
    List<Integer> highlightedCell;

    public table() throws FileNotFoundException, IOException, InvalidFormatException {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        pack();
        setVisible(true);
    }

    public Vector getDummyData() throws IOException, InvalidFormatException {
        highlightedCell = new ArrayList<Integer>();
        String nnnname;
        Vector vector;
        Vector vectorOfVector = new Vector();
        excelToList e = new excelToList("input.xls");
        List<Person> names = e.createWorkbook();
        int rowNum = 0;
        for (Person p : names) {
            nnnname = p.getName();
            vector = new Vector();
            vector.add(nnnname);
            vector.add(p.getDone());
            vector.add(p.getWaiting());
            vector.add(p.getORDERED());
            vector.add(p.getKPR1());
            vector.add(new Boolean(false));
            vectorOfVector.add(vector);
            rowNum++;
            if ((nnnname.matches("\\A\\p{ASCII}*\\z"))) {
                highlightedCell.add(rowNum - 1);
            }
        }
        return vectorOfVector;

    }

    public void createTable() throws FileNotFoundException, IOException, InvalidFormatException {

        table.setModel(model);
        table.setFillsViewportHeight(true);
        TableCellRenderer original = table.getDefaultRenderer(Object.class);
        table.setDefaultRenderer(Object.class,
                new ColorRenderer(highlightedCell, original));
        scroll = new JScrollPane(table);
        add(scroll);
        setSize(1000, 1000);
    }
    public static void main(String args[]) throws FileNotFoundException, IOException,     InvalidFormatException {
        table t = new table();
        t.createTable();
    }
}

class MyTableModel extends AbstractTableModel {

    private String[] columnName = {"NAME", "DONE", "WAITING",
        "OVERALL", "PERCENTAGE 1", "PERCENTAGE 2"};
    private Vector dataVector;

    public MyTableModel(Vector vectorOfVector) throws IOException, InvalidFormatException {
        dataVector = vectorOfVector;

    }

    public int getRowCount() {
        return dataVector.size();
    }

    public int getColumnCount() {
        return columnName.length;
    }
    Vector v;

    public Object getValueAt(int i, int i1) {
        v = (Vector) dataVector.elementAt(i);
        return v.elementAt(i1);
    }

    @Override
    public Class getColumnClass(int c) {
        switch (c) {
            case 5:
                return Boolean.class;
            default:
                return String.class;
        }
    }

    @Override
    public boolean isCellEditable(int row, int col) {
        if (col < 1) {
            return true;
        } else {
            return false;
        }
    }

    @Override
    public void setValueAt(Object value, int row, int col) {
        Vector rowVector = (Vector) dataVector.get(row);
        rowVector.set(col, value);

        fireTableCellUpdated(row, col);
    }
}

class ColorRenderer implements TableCellRenderer {

    List<Integer> highlightedCoordinates;
    private TableCellRenderer cellRenderer;

    public ColorRenderer(List<Integer> list, TableCellRenderer cellRenderer) {
        if (cellRenderer == this || cellRenderer == null) {
            throw new IllegalArgumentException();
        }
        this.cellRenderer = cellRenderer;

        highlightedCoordinates = list;

    }

    public Component getTableCellRendererComponent(JTable jtable, Object color,
            boolean isSelected, boolean hasFocus, int row, int column) {
        Component c;
        c = cellRenderer.getTableCellRendererComponent(jtable, color, hasFocus, hasFocus, row, row);

        if (column == 0 && highlightedCoordinates.contains(row)) {
            c.setBackground(Color.GREEN);
        } else {
            c.setBackground(Color.yellow);
        }

        return c;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T09:12:17.720

```
public boolean isCellEditable(int row, int col) {
    if (col < 1) {
        return true;
    } else {
        return false;
    }
} 
```

如果我的理解是正确的，您正在尝试仅将第 0 列设置为可编辑。添加复选框的 col 索引以返回 true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T09:18:57.110

将您的`isCellEditable(int row, int col)`as anthoon 更改为以下内容：

```
public boolean isCellEditable(int row, int col) {   
  if (col < 1) {    
      return true;  
  } else if( col == 5){//column with your checkboxes.
      return true;
  } else {
      return false;   
  }
} 
```

# php - 如何在 PHP 中获取字符串的像素长度？

> ID：11519082
> 
> 赞同：2
> 
> 时间：2012-07-17T08:52:25.237
> 
> 标签：php

有一个字符串，比如`$x = "Poste : ";` How to get $x's pixel length ？那就是 $x 占用了多少像素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:55:57.860

它不存在。事实上，每个字符的宽度取决于字体、字体大小、样式（粗体、斜体、正常等）。

游行就是使用像Courier这样的等宽字体的新样式，比如每个字符要等宽；）

# java - Android 在简单的文本编辑器中写入文件并查看文件的内容

> ID：11519083
> 
> 赞同：0
> 
> 时间：2012-07-17T08:52:27.777
> 
> 标签：java, android, file

我能够成功写入文件。这些文件通过 DDMS 存在于文件管理器中。但是出于调试目的，我们如何打开这些文件呢？假设一个文件是一个简单的 .txt 文件，我如何在记事本中查看其内容（我在 Windows 上）？如何在 Windows 资源管理器中访问此文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T09:00:36.687

转到**DDMS -> 文件管理器 -> 单击从设备**中提取文件，然后将此文件保存在您的计算机中

![在此处输入图像描述](../Images/e2c6b4e808797c24e0015758a4554b8a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T09:03:46.810

使用命令

```
adb pull /sdcard/foo.txt D:/foo.txt 
```

“sdcard/foo.txt”是你的文件路径，“D:/foo.txt”是把“foo.txt”拉到你的Windows“D:/foo.txt”，然后你可以用记事本查看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T08:59:09.633

为什么不直接使用“adb shell cat /path/to/your/file”？如果你真的想要这个文件，你也可以使用“adb pull”将它复制到你的本地文件系统中。

# c# - Fluent NHibernate 多对多映射与 3 个类

> ID：11519084
> 
> 赞同：0
> 
> 时间：2012-07-17T08:52:36.903
> 
> 标签：c#, nhibernate, fluent-nhibernate, fluent-nhibernate-mapping, .net

首先，我使用的是 NHibernate 3.2 和 FluentNHibernate 1.3。我有 3 节课：

```
public class ClassA
{
    public virtual Int32 Id{ get; }
    ....
    public ICollection<ClassB> ClassesB { get; }
    public ICollection<ClassC> ClassesC { get; }
}

public class ClassB
{
    public virtual Int32 Id{ get; }
    ....
    public ICollection<ClassA> ClassesA { get; }
    public ICollection<ClassC> ClassesC { get; }
}

public class ClassC
{
    public virtual Int32 Id{ get; }
    ....
    public ICollection<ClassA> ClassesA { get; }
    public ICollection<ClassB> ClassesB { get; }
} 
```

我用这段代码映射它们：

```
public class ClassAMap : ClassMap<ClassA>
{
    public ClassAMap()
        : base()
    {
        Id(m => m.Id);
        ....

        HasManyToMany<ClassB>(m => m.ClassesB).Cascade.SaveUpdate().AsSet().ReadOnlyAccess();
        HasManyToMany<ClassC>(m => m.ClassesC).Cascade.SaveUpdate().AsSet().ReadOnlyAccess();
    }
}

public class ClassBMap : ClassMap<ClassB>
{
    public ClassBMap()
        : base()
    {
        Id(m => m.Id);
        ....

        HasManyToMany<ClassA>(m => m.ClassesA).Cascade.SaveUpdate().AsSet().ReadOnlyAccess();
        HasManyToMany<ClassC>(m => m.ClassesC).Cascade.SaveUpdate().AsSet().ReadOnlyAccess();
    }
}

public class ClassCMap : ClassMap<ClassC>
{
    public ClassCMap()
        : base()
    {
        Id(m => m.Id);
        ....

        HasManyToMany<ClassA>(m => m.ClassesA).Cascade.SaveUpdate().AsSet().ReadOnlyAccess();
        HasManyToMany<ClassB>(m => m.ClassesB).Cascade.SaveUpdate().AsSet().ReadOnlyAccess();
    }
} 
```

每个类都有其他 2 个类的集合，不要问为什么，但我需要将它映射到数据库。Nhibernate 生成 3 个表，其中 2 个具有 2 个字段，第三个具有来自所有类的 3 个 id 字段，o 这第三个表只有 2 个字段是主键的一部分。我还尝试为 3 个关系分配表名，NHibernate 只生成一个包含 3 个字段的表，但同样，其中只有 2 个是 Primery Key 的一部分。我假设 3 字段必须是给定这种类型的映射的主键的一部分。

问题是我无法将项目添加到任一集合（我也尝试将项目添加到另一侧类，例如：当我将 ClassB 添加到 ClassA 时，也将 ClassA 添加到 ClassB 以维护关系），当我尝试保存时到数据库，它会抛出一个 FOREING KEY 异常，并且所有字段都设置正确。

我的问题是，映射这三个类的最佳方法是什么？我还需要做其他事情吗？我是不是忘记了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:15:40.453

我相信您需要向 NH 提供有关关系的更多详细信息。
尝试在 A 的映射和 B 的映射中编写完整的定义：

```
HasManyToMany(a => a.ClassesB)
     .AsSet()
     .WithTableName("TBL_A_TO_B")
     .WithParentKeyColumn("A_ID")
     .WithChildKeyColumn("B_ID")
     .Cascade.All(); 
```

# php - 指定表格数据宽度

> ID：11519087
> 
> 赞同：0
> 
> 时间：2012-07-17T08:52:46.687
> 
> 标签：php, html, css

此代码无法识别我输入的 td witdh 值，但我无法区分样式标签中的表格和单元格宽度/高度（因此表格高度仅为 25px），这意味着我知道我做错了什么但似乎无法修复它，任何建议将不胜感激，谢谢

```
<head>
<style type='text/css'>
table, td; 
table
{
width:800px;height:25px;
}
table
{
position: absolute; right: 100px; top: 80px;
}
table
{
 border-collapse:collapse; 
}
td
{
border-spacing:0px;
}

td
{
border-bottom-style:solid;
border-bottom-width:1px;
border-color:black;
}
td
{
background-color:grey;
color:red;
}
td
{
text-align:center;
}

</style>
</head>";

while($info = mysql_fetch_assoc($sql))
{
echo"
<body>
<table>
<tr>
<td width='20'></td>
<td width='400'>First Name:</td>
<td width='340'>{$info['firstname']}</td>
<td width='40'><a href='changefirstname.php'>edit</a></td>
</tr>
<tr>
<td width='20'><td>Last Name:</td>
<td>{$info['lastname']}</td>
<td><a href='changelastname.php'>edit</td>
</tr>
<tr>
<td width='20'></td>
<td>email:</td>
<td>{$info['email']}</td>
<td><a href='changeemail.php'>edit</td>
</tr>
<tr>
<td width='20><td>password:</td>
<td>********</td>
<td><a href='changepassword.php'>edit</td>
</tr>
</table>
</body>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:07:36.587

您错过了 width='20 附近行中的报价：

```
<td width='20><td>password:</td> 
```

做了

```
<td width='20'><td>password:</td> 
```

它可能会解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:13:50.563

您可以尝试将 CSS 样式放在其他文件中。

和你的代码

通常我为我的 php 代码做这个

```
 <table>
<?php
   $no=1;
   while ($data = mysql_fetch_array)
   {
     echo "<tr>";
     echo "<td>".$data[your_table_column]."</td>";
     echo "</tr>";
   }  
   $no++;

 ?>
 </table> 
```

我认为这个问题是不准确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T09:32:15.760

首先，你应该删除这条`table, td;`没有用的行。

然后，您应该像这样组合您的样式：

```
table {
     /* Table */
}

tr {
     /* Row */
}

td {
     /* Cell */
} 
```

对于您的主要问题，您需要：

`td`以固定宽度将类应用于您的 s

```
<table>
    <tr>
        <td class="first">First</td>
        <td class="second">Second</td>
        <td class="third">Third</td>
        <td class="fourth">Fourth</td>
    </tr>
</table>

.first { width: 20px; }
.second { width: 400px; }
.third { width: 340px; }
.fourth { width: 40px; } 
```

不要使用类，而是使用 CSS 选择器

```
td:nth-child(1) { width: 20px; }
td:nth-child(2) { width: 400px; }
td:nth-child(3) { width: 340px; }
td:nth-child(4) { width: 40px; } 
```

在任何情况下，您都不需要您`width='...'`的 HTML 标记。

这是一个简化的例子：http: [//jsfiddle.net/morgi/csqAb/1/](http://jsfiddle.net/morgi/csqAb/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T09:15:25.737

您的样式应该都在一个选择器中，每个元素都像这样

```
table
{

    width:800px;height:25px;
    position: absolute; right: 100px; top: 80px;

    border-collapse:collapse; 

}

td
{

    border-spacing:0px;
    border-bottom-style:solid;
    border-bottom-width:1px;
    border-color:black;
    background-color:grey;
    color:red;
    text-align:center;

}

td.col1 {width:20px}
td.col2 {width:400px}
td.col3 {width:340px}
td.col4 {width:40px} 
```

在您的 html 代码中，添加类

```
<td class='col1'></td>
<td class='col2'>First Name:</td>
<td class='col3'>{$info['firstname']}</td>
<td class='col4'><a href='' /></td> 
```

而且，你的桌子的高度是 25px

# hibernate - Hibernate - 不区分大小写的 LIKE 表达式

> ID：11519099
> 
> 赞同：0
> 
> 时间：2012-07-17T08:53:31.380
> 
> 标签：hibernate, filtering, sql-like

如何在休眠中使用 LIKE 表达式进行不区分大小写的过滤？

我的休眠文件中的相应条目是：

```
<filter name="applicantNameFilter" condition="first_name LIKE :nameFilter"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T09:24:12.027

试试这个

```
<filter name="applicantNameFilter" condition="first_name ILIKE :nameFilter"/> 
```

或者

```
<filter name="applicantNameFilter" condition="UPPER(first_name) LIKE UPPER(:nameFilter)"/> 
```

以供参考

1.  使用 ILIKE：

    ```
    SELECT * FROM sometable WHERE 文本字段 ILIKE 'value%';    
    ```

2.  使用正则表达式运算符（请参阅文档中的函数和运算符）：

    ```
    SELECT * FROM sometable WHERE textfield ~* 'value';
    ```

3.  在比较之前使用 UPPER() 或 LOWER() 更改字段的大小写；这种方法可能比 1) 或 2) 更好，因为这些函数可能会被索引，因此如果您正在执行“开始于”或“完全匹配”搜索，您的查询可能会被索引：

    ```
    SELECT * FROM sometable WHERE UPPER(textfield) LIKE (UPPER('value') || '%');
    ```

4.  如果您的大多数搜索是对大型文本字段的“字段中的任何位置”搜索，我建议您查看 PostgreSQL 中可用的两个“全文搜索”工具，一个在您的源代码的 /contrib 中，第二个来自 openFTS。组织。

这是java代码

用户标准为

```
Criteria criteria = getSession().createCriteria(Person.class);
criteria.add(Restrictions.ilike("first_name", first_name, MatchMode.ANYWHERE));
criteria.list(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T08:56:02.753

您可以尝试使用`~*`而不是`LIKE`. 前者进行不区分大小写的模式匹配（并且是 PostgreSQL 特定的）。

有关更多信息，请参阅手册：[http ://www.postgresql.org/docs/9.1/static/functions-matching.html#FUNCTIONS-POSIX-TABLE](http://www.postgresql.org/docs/9.1/static/functions-matching.html#FUNCTIONS-POSIX-TABLE)

# mysql - 为什么这个更新/选择子查询是错误的？

> ID：11519101
> 
> 赞同：0
> 
> 时间：2012-07-17T08:53:43.440
> 
> 标签：mysql, sql, select, subquery

好的，所以我运行此查询以获取计数，这是正确的：

```
mysql> select count(medias.fileRef) from medias where fileRef=20193621;
+-----------------------+
| count(medias.fileRef) |
+-----------------------+
| 135869 |
+-----------------------+ 
```

所以然后我运行它以将该计数放入另一个表中：

```
mysql> update files set refCount=(select count(medias.fileRef) 
       from medias where fileRef=20193621) where id=20193621;

Query OK, 1 row affected, 1 warning (0.05 sec)
Rows matched: 1 Changed: 1 Warnings: 1 
```

（注意 medias.fileRef 是一个包含 files.id 的 INT），并且 files.refCount 应该包含指向该 files.id 的所有媒体行的总数：

然后我去检查它，它是错误的。

```
mysql> select refcount from files where id=20193621;
+----------+
| refcount |
+----------+
| 127 |
+----------+ 
```

这怎么可能？我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T09:01:21.537

这是因为您的`files.refcount`列数据类型是[TINYINT](http://dev.mysql.com/doc/refman/5.1/en/integer-types.html)。将其更改为 INT 或任何其他合理的[数字类型](http://dev.mysql.com/doc/refman/5.1/en/integer-types.html)。

# jquery - jQuery 仅在 IE7 / IE8 中滑动第一个 div

> ID：11519102
> 
> 赞同：0
> 
> 时间：2012-07-17T08:53:52.567
> 
> 标签：jquery, html, internet-explorer-8, internet-explorer-7, slide

我想用 jQuery 构建一个简单的 div 滑块（例如[http://jsfiddle.net/cM5fX/](http://jsfiddle.net/cM5fX/)）。在非 ie 浏览器和 ie9 中一切正常。在 IE7 和 IE8 中，只有第一个 div 会滑动，第二个会卡住。这里有什么问题？

问候托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:12:58.053

当您为 id 为“第一个”的 div 设置动画时，它仅适用于它，而其他则不根据第一个重新定位（即 IE 7）。

所以你可以在 $('#slideWrapper') 而不是 $('#first') 上应用动画

# html - Divs 彼此相邻，有大小，没有换行符

> ID：11519103
> 
> 赞同：2
> 
> 时间：2012-07-17T08:54:00.117
> 
> 标签：html, css

我想要很多小 div-s 彼此相邻，没有换行符：

```
<div style="overflow: scroll;">

<div style="float: left; width: 40px;"></div>
<div style="float: left; width: 40px;"></div>
<div style="float: left; width: 40px;"></div>

</div> 
```

问题是，宽度有效，但如果溢出它会转到新行，所以没有水平滚动。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T09:01:49.730

`white-space`您可以使用&实现此目的`display:inline-block;`。像这样写：

```
.parent{
 white-space:nowrap;
overflow:scroll;
}
.parent > div{
 display:inline-block;
 white-space:normal;
} 
```

检查这个[http://jsfiddle.net/EUtLh/](http://jsfiddle.net/EUtLh/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T08:56:54.007

放置这些 div 的一般容器的宽度需要设置为“宽度：100%”，以便我可以适应不断增长的大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T08:58:41.083

这是给你的脚本。

不确定这是否正是您想要的。

[http://jsbin.com/anoran/edit#javascript,html](http://jsbin.com/anoran/edit#javascript,html)

更新：

[http://jsbin.com/anoran/2/edit](http://jsbin.com/anoran/2/edit)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T09:10:48.987

```
<div style="overflow-x: scroll; width:100%|400px">
    <div style="width:10000px">

<div style="float: left; width: 40px;"></div>
<div style="float: left; width: 40px;"></div>
<div style="float: left; width: 40px;"></div>

    </div>
</div> 
```

在铬中工作！

# facebook - 如何使用 FQL 获取标记用户以及他们在当前用户旁边的照片中出现多少次？

> ID：11519105
> 
> 赞同：2
> 
> 时间：2012-07-17T08:54:05.920
> 
> 标签：facebook, facebook-fql

我正在尝试创建一个 FQL 查询，该查询返回与当前用户一起出现在所有公共照片中的所有用户。这是我到目前为止所拥有的：

```
select uid from user where uid in (
    select subject from photo_tag where pid in (
        select pid from photo where pid in (
            select pid from photo_tag where subject=me()
        )
    )
) and uid in (
    select uid2 from friend where uid1=me()
) 
```

这可行，但我还想获得这些用户与当前用户一起出现在照片中的次数。理论上，以下查询应该有效：

```
select subject from photo_tag where pid in (
    select pid from photo where pid in (
         select pid from photo_tag where subject=me()
    )
) and subject in (
    select uid2 from friend where uid1=me()
) 
```

但它总是返回一个空数据集。我能得到一些关于我哪里出错的建议，以便我可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:29:27.703

您可能尚未请求“friends_photos”权限。这是[文档](http://developers.facebook.com/docs/reference/fql/photo_tag/)，这里是向您展示如何请求这些权限的[参考。](http://developers.facebook.com/docs/authentication/permissions/)我在您的 FQL 上没有看到任何错误，只是不是非常理想。

# facebook - Facebook GraphAPI 在删除时返回“false”

> ID：11519107
> 
> 赞同：0
> 
> 时间：2012-07-17T08:54:17.040
> 
> 标签：facebook, facebook-graph-api, zend-http-client

当我想删除我的应用程序发布的帖子时，尽管我的应用程序具有 publish_stream 权限，但 Facebooks GraphAPI 会返回“false”。

我尝试使用 HTTP DELETE 和 HTTP POST（参数方法=删除）。仍然返回假。当我尝试删除帖子时，Graph API 资源管理器也会返回 false。

我尝试使用应用程序令牌和页面访问令牌进行删除......没有任何效果。有任何想法吗？（旁注：我的帖子 ID 看起来与某些示例不同。我有一个普通 ID，无法通过 /pageId_postId 访问帖子。我猜他们为较新的帖子更改了它？）

```
public function deletePost($fbPageName, $postId) {

    //$pageAccessToken = file_get_contents("https://graph.facebook.com/$fbPageName?fields=access_token&access_token=".$this->_accessToken);
    //$pageAccessToken = json_decode($pageAccessToken)->access_token;

    //create a DELETE request to the graph API
    $graph_url = "https://graph.facebook.com/$postId?access_token=".$this->_accessToken;
    $client = new Zend_Http_Client($graph_url);
    $client->setMethod(Zend_Http_Client::DELETE);

    $response = $client->request();
    ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:32:07.307

这个问题似乎在午餐时间自行解决了。虽然我早上无法访问 /pageId_postId（尽管 /postId 给出了正确的结果），但现在可以通过使用应用程序访问令牌发出 DELETE 请求 do /pageId_postId 来删除帖子。

# php - 来自 db 的随机结果

> ID：11519109
> 
> 赞同：1
> 
> 时间：2012-07-17T08:54:19.680
> 
> 标签：php, mysqli

我在外部文件中有这个 php 脚本，试图从数据库中获取随机问题：

```
<?php
//connect to db
require_once('db.php');

$id=rand(0,13); //2nd number = highest ID

if ($resQ = $mysqli->query("SELECT Quest FROM qa WHERE ID='$id'")){

   echo "" . $resQ['Quest'] . ""; //This is Line 9

   $resQ->close();
}
$mysqli->close();
?> 
```

我在我的页面中这样称呼它

```
<body>
code...

<?php require_once('script/m_q.php'); ?>

...code
</body> 
```

但我得到错误：

**致命错误：无法在第 9 行的 .../m_q.php 中使用类型为 mysqli_result 的对象作为数组**

有什么帮助吗？谢谢

**谢谢大家......不幸的是我只能接受一个答案，我选择第一个回答的那个。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T08:59:46.277

您必须调用对象的`fetch_assoc()`方法`mysqli_result`才能访问数据：

```
<?php
//connect to db
require_once('db.php');

$id=rand(0,13); //2nd number = highest ID

if ($resQ = $mysqli->query("SELECT Quest FROM qa WHERE ID='$id'")){

   $data = $resQ->fetch_assoc();
   echo "" . $data['Quest'] . ""; //This is Line 9

   $resQ->close();
}
$mysqli->close();

?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T08:57:40.673

mysqli::query 确实返回结果集，您必须获取行才能访问列。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T09:00:55.837

您需要先获取数据。

```
$rs = $resQ->fetch_assoc();
echo $rs['Quest']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T09:41:43.823

$resQ 无法进入 if 语句...首先使用 mysql_fetch_assoc 或 mysql_fetch_array 为其分配数据。

# javascript - 将伪代码变成代码

> ID：11519110
> 
> 赞同：-3
> 
> 时间：2012-07-17T08:54:23.667
> 
> 标签：javascript, jquery, jquery-ui

我目前正在构建一个拼写游戏，您可以将字母拖到单词上。单词是**“mat”**和**“drag13”** = **“m”，“drag1”=“a”和“drag19”=“t”。**我需要一些代码，当它们落在单词上时能够识别这些字母。取决于它是否被识别将决定 CSS 赋予它的样式。有人可以帮忙吗？

```
if ("mat" == drag13 + drag1 + drag19) {

            return true; (add a css style1)
        }

        else {

            return false; (add a css style2)
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:05:50.510

```
word = drag13+drag1+drag19;
myDiv = document.getElementById("adiv");
if(word == "mat"){
//do stuff

myDiv.className += " correct";
}else{
//do other stuff

 myDiv.className += " incorrect";
} 
```

这是您正在寻找的那种代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:47:13.290

这里有一些东西：

```
if("mat" == (letters[13]+letters[1]+letters[19]))
{
  $(".worddisplay").css('property", 'value');
  return true;
}
else
{
  $(".worddisplay").css('otherproperty", 'othervalue');
  return false;
} 
```

然后只要确保显示单词的东西有`class="worddisplay"`，或者将`.`s改为`#`s并给出单词display `id="worddisplay"`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T09:11:40.070

如果您需要添加或删除 CSS 类，您可以使用 jQuery[`addClass`](http://api.jquery.com/addClass/)和[`removeClass`](http://api.jquery.com/removeClass/).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T09:22:01.903

简单的想法。自己转换成解决方案。

每个字母都是一个div。并且有一个属性（可能是 ID），它的值是它在屏幕中的位置（位置）。

使用 jQuery draggable 来拖动它。当被拖动组件的位置与DIV匹配时，返回它。

# openssl - 使用 openssl 在 X509 证书中添加 DN 主题备用名称扩展

> ID：11519111
> 
> 赞同：3
> 
> 时间：2012-07-17T08:54:39.437
> 
> 标签：openssl, ssl-certificate, x509, distinguishedname

我一直在使用 openssl API 创建自己的证书实用程序。在主题备用名称扩展中添加专有名称时，我目前面临一个问题。虽然成功创建了扩展，但在查看证书时，扩展的值被错误编码，例如使用 windows 证书实用程序：

```
 Basic Constraints                  Subject Type=CA, Path... 

    Subject Alternative Name

    74 53 19 00 00 00 38 27   tS....8'
    ac 0b 88 ae ac 0b 00 00   ........
    00 00 00 00 00 00 6f 72   ......or
    20 53 21 00 00 00 02 00    S!.....
    00 00 13 00 00 00 d0 d7   ........
    ac 0b 00 00 00 00 0a 00   ........
    00 00 00 00 00 00 20 00   ...... .
    00 00 19 00 00 00 b8 5d   .......]
    a4 0b 

    Thumbprint algorithm                 sha1 
```

以下是关注点的相关源代码片段（可能存在一些语法错误）：

```
 GENERAL_NAME * genn = NULL;
    STACK_OF(GENERAL_NAME) * sk_genn;
    ASN1_OCTET_STRING *asn1OctetStr=NULL;

    X509_EXTENSION* tmpEXT;
    X509_NAME*  tmpDIRNAME;

    char* extSAN_str=(char *) "C=CR, O=OU, D=DR";

    /*..*/
    case DISTINGUISHED_NAME:
        // Initialization of ASN.1 structures
        genn = GENERAL_NAME_new();
        asn1OctetStr = M_ASN1_OCTET_STRING_new();
        sk_genn = GENERAL_NAMES_new();

        // Create the X509 extension
        tmpDIRNAME=CharToX509_NAME(extSAN_str);

        // This GeneralName is an directoryName

        genn->type=GEN_DIRNAME;
        genn->d.directoryName=tmpDIRNAME;
        // Using the stack to create a sequence
        sk_GENERAL_NAME_push(sk_genn,genn);
        ext_len = i2d_GENERAL_NAMES(sk_genn, NULL);

        ext_der = OPENSSL_malloc(ext_len);   /* allocate that much memory */
        i2d_GENERAL_NAMES(sk_genn, &ext_der); 

        asn1OctetStr->data = ext_der;
        /* fill in the value of the SubjectAltName extension */
        asn1OctetStr->length = ext_len;
        sanNID = OBJ_txt2nid("subjAltName");

        if (!(tmpEXT = X509_EXTENSION_create_by_NID(NULL, sanNID, 0, asn1OctetStr)))
        {   
                ERR_error_string(ERR_get_error(), NULL), ERR_get_error());  
        }
    // Adding the certificate to the X509 structure
    if(!X509_add_ext(tmpCert, tmpEXT, -1))
    {
            ERR_error_string(ERR_get_error(), NULL), ERR_get_error());
    }
/*..*/

X509_NAME* CharToX509_NAME(char* SubjectName)
{
    X509_NAME *tempSubjectName=NULL;
    char name[128];
    char value[128];
    char* equal;
    char* comma;
    char* field;

    memset(name, 0, 128);
    memset(value, 0, 128);

    if(!(tempSubjectName = X509_NAME_new()))
    {

        return 0;
    }

    if (NULL != SubjectName)
    {
    field = SubjectName;
        do
        {
            equal=strchr(field, '=');
            comma=strchr(field, ',');
            if(comma == 0)
                comma = field + strlen(field);
            strncpy(name, field, (unsigned)(equal-field));
            name[equal-field]=0;
            strncpy(value, equal+1, (unsigned)(comma-equal-1));
            value[comma-equal-1]=0;
            field=comma+1;
            if(!X509_NAME_add_entry_by_txt(tempSubjectName,name, MBSTRING_ASC, value, -1, -1, 0))
                return 0;

        }while(*comma != 0);
    }
    return tempSubjectName;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T11:36:18.607

我做的几乎和我看到的一样（见下文）。我看到的唯一增量是使用 V_ASN1_IA5STRING 或 V_ASN1_UTF8STRING（如果需要）。

德。

```
+(X509_NAME_ENTRY *) x509nameEntryFromDict:(NSDictionary *)entry {
    X509_NAME_ENTRY * nameEntry = NULL;
    int nid = [self nidFromDict:entry];

    if (nid == NID_undef) {
        NSLog(@"x509nameFromDictArray: Unknown entry - ignored: %@", entry);
        return NULL;
    }

    NSString * val = [entry objectForKey:kOpenSSLNameValueKey];
    const char * buff;
    int valType;

    if ([val dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:NO]) {
        valType = V_ASN1_IA5STRING;
        buff = [val cStringUsingEncoding:NSASCIIStringEncoding];                    
    } else {
        valType = V_ASN1_UTF8STRING;
        buff = [val cStringUsingEncoding:NSUTF8StringEncoding];
    }        
    int len = strlen(buff);

    return X509_NAME_ENTRY_create_by_NID(&nameEntry, nid, valType, (unsigned char*)buff, len);
} 
```

# c - DLL 的配置文件引导优化（英特尔编译器）

> ID：11519112
> 
> 赞同：3
> 
> 时间：2012-07-17T08:54:43.337
> 
> 标签：c, dll, icc

我有一个从 C# 运行的 C .dll 文件。我最近使用 Intel C Compiler 对其进行了编译，我已经看到它比 Visual Studio 编译器提高了 25%（比 MinGW 提高了近 50%）。
现在我想尝试配置文件引导优化。我了解使用 /prof-gen 编译然后运行可执行文件会生成一个包含动态配置文件信息的文件。
问题是我的 C 程序中没有准备好测试（而且编写起来很麻烦）。
**我的问题是：**
是否有可能通过编译为 .dll 来创建 .dyn 文件，然后从 c# 级别运行它，然后通过 /prof-use 将其用于 PGO？

欢迎提供有关将 PGO 与 dll 一起使用的任何其他信息 :)

# asp.net-mvc - MVC 4 Bundles Scripts.Render 每个文件的脚本标签

> ID：11519113
> 
> 赞同：3
> 
> 时间：2012-07-17T08:54:50.297
> 
> 标签：asp.net-mvc, asp.net-mvc-4, bundle

有没有办法强制 MVC 4 中的包为每个捆绑文件呈现一个脚本标签以用于开发目的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T16:05:21.197

在开发/调试环境中（Web.config 文件中的编译元素设置为`debug="true"`），JavaScript 文件不会被捆绑或缩小。
您不会在 JavaScript 文件中使用标签，它用于嵌入在 HTML 中的突兀的 JavaScript。你想做什么？请参阅我的[捆绑和缩小教程](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)

# python - 美味派自定义字段

> ID：11519115
> 
> 赞同：0
> 
> 时间：2012-07-17T08:54:54.777
> 
> 标签：python, django, tastypie

有没有办法可以快速公开腌制数据对象？我需要 /api/food/ID_NUM/shops 之类的东西

其中“商店”是自定义类的一部分

```
from SerializedDataField import SerializedDataField  #custom class obj

class Food(models.Model):

title = models.TextField()
description = models.TextField()
creator = models.ForeignKey(User)
created = models.DateTimeField(default = datetime.datetime.now())
"""Pickled fresh food object."""
foodObj = SerializedDataField() 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:45:41.850

我想我问这个问题是因为我不知道它是如何`tastypie`工作的。第一次尝试。我也有点陌生`django`。我纠正了自己，一切似乎都运行良好。

不管怎么说，多谢拉！

# asp.net-mvc-3 - asp.net mvc 3 moq n 层测试 - 对象未设置为对象的实例

> ID：11519119
> 
> 赞同：0
> 
> 时间：2012-07-17T08:55:06.420
> 
> 标签：asp.net-mvc-3, unit-testing, moq, structuremap

我有以下测试不断失败，我不知道为什么:(

```
[TestClass]
public class UserTest
{
    private Mock<IRolodexDA> _rmock = new Mock<IRolodexDA>();
    private Mock<ICompanyDA> _cmock = new Mock<ICompanyDA>();
    private Mock<IUserSettingsDA> _umock = new Mock<IUserSettingsDA>();
    private Mock<ICLObjectContext> _clmock = new Mock<ICLObjectContext>();

    [TestInitialize]
    public void Setup()
    {
        ObjectFactory.Inject(typeof(IRolodexDA), _rmock.Object);
        ObjectFactory.Inject(typeof(ICompanyDA), _cmock.Object);
        ObjectFactory.Inject(typeof(IUserSettingsDA), _umock.Object);
        ObjectFactory.Inject(typeof(ICLObjectContext), _clmock.Object);
    }

[TestMethod]
public void Get_does_not_return_valid_user_when_not_enabled()
{

        string email_add = "theguy@totest.com";
        List<RolodexDomain> items = new List<RolodexDomain>();
        items.Add(new RolodexDomain() {rdx_contact_name = "joe blogs", rdx_auto_key = 1, email_address = email_add, cv_udf_030 = null , sdf_rdx_001 = null });

        _rmock.Setup(s => s.Get()).Returns(items.AsQueryable());

        var result2 = _rmock.Object.Get();

        var user = new CLAPortal.Service.UserService();
        var result = user.Get(email_add);

        Assert.IsNull(result);

} 
```

在我的服务层中，我有以下代码：

```
public class UserService : IUserService
{
    private readonly IRolodexDA _rolodexDA = Resolver.GetConcreteInstanceOf<IRolodexDA>();
    private readonly IUserSettingsDA _userSettingsDA = Resolver.GetConcreteInstanceOf<IUserSettingsDA>();
    private readonly ICompanyDA _companyDA = Resolver.GetConcreteInstanceOf<ICompanyDA>();
    private ICLObjectContext _context = Resolver.GetConcreteInstanceOf<ICLObjectContext>();

    public UserDomain Get(string email_address)
    {
        UserDomain user = null;
        var rdx = GetRolodexForUser(email_address);

        if (rdx != null)
        {
            user = new UserDomain()
            {
                email_address = rdx.email_address,
                name = rdx.rdx_contact_name,
                password = rdx.sdf_rdx_001,
                rdx_auto_key = rdx.rdx_auto_key,
                settings = _userSettingsDA.Get().Where(x => x.rdx_auto_key == rdx.rdx_auto_key).SingleOrDefault() ?? null
            };
        }
        return user;
    }

    private RolodexDomain GetRolodexForUser(string email_address)
    {
        var result = (_rolodexDA.Get().Where(u => u.email_address.ToUpper() == email_address.ToUpper() && u.cv_udf_030.ToUpper() == "T"));

        return result.SingleOrDefault() ?? null;
    } 
```

问题在于调用导致服务层上的 GetRolodexForUser。当我尝试检查该值时，它会获取未设置为对象实例的对象。

现在理论上应该返回一个空集合？

这是我对这个类的测试中唯一一个在重构后失败的测试，但我不知道为什么:(

有任何想法吗？谢谢！

PS这是我第一次尝试拆开我的应用程序并尝试使其可测试。所以我可能对模拟或依赖注入有一些我不理解的基本问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:39:47.340

修复是在创建我的模拟获取列表时为 cv udf 030 传递一个空字符串，而不是 null 。我很确定实体框架会将空值转换为空字符串

# sql - SQL 更新替换字符串中的部分文本

> ID：11519120
> 
> 赞同：6
> 
> 时间：2012-07-17T08:55:05.653
> 
> 标签：sql, ms-access, sql-update

我正在使用 MS Access，我有一个名为的表`Backup`和一个名为`ImageURL`. 该`ImageURL`列包含以下数据：`http://domain.com/s/1234.jpg`。

我想通过使用 MS Access SQL 更新和替换`/s/`将 URL更改为。`/l/`

当我现在尝试它时，它将*整个字段*替换为`/l/`.

谢谢你的帮助！

抢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T09:00:02.787

```
Update Backup
set ImageURL =replace(ImageURL,'/s/','/I/') 
```

# java - Solr 搜索查询区分大小写

> ID：11519122
> 
> 赞同：9
> 
> 时间：2012-07-17T08:55:31.113
> 
> 标签：java, apache, solr

我正在尝试使用 Solr 搜索一些 FirstName 为的记录；

```
abcd
Abcd
abcD
ABcd
abCd
abCD 
```

现在我正在尝试使用通配符支持进行搜索。我需要了解搜索在区分大小写方面究竟是如何工作的。

例如，如果我将 FirstName 参数作为 ab* Vs Ab* 传递，将返回哪些记录？

有什么方法可以使/强制搜索区分大小写或不区分大小写？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T09:06:21.707

这取决于您如何在 schema.xml 中定义字段。如果在索引和查询时使用[LowerCaseFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters/#solr.LowerCaseFilterFactory)，那么所有查询都将不区分大小写。否则它将区分大小写。

```
<filter class="solr.LowerCaseTokenizerFactory"/> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-17T09:08:09.597

您可以在架构中配置它。例如：

```
<fieldType name="text" class="solr.TextField" positionIncrementGap="100">
<analyzer type="query">
<filter class="solr.LowerCaseFilterFactory"/>
</analyzer>
</fieldType> 
```

表示该字段被认为是小写的查询，这给人的印象是不区分大小写的搜索。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-05-27T12:25:02.983

solr 模式中的默认定义字段的工作方式非常不同。

数据类型`'string'`将单词存储为不完整的确切字符串。

虽然`'text_general'`通常执行标记化和二次处理（例如不区分大小写和整个字符串匹配）。当我们想要匹配句子的一部分时，它对于所有场景都非常有用。

如果以下示例“Search into the sentence”被索引到两个字段，我们必须准确搜索 Search into the sentence 才能从字符串字段中获得命中，而在 text_general 的情况下它将返回不同的结果。

这里卖家名称将在搜索字符串中完全匹配，而产品名称将搜索到上面的整个句子中。

例子：

```
<field name="seller_name" type="string" indexed="true" stored="true"/>
<field name="product_name" type="text_general" indexed="true" stored="true"/> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-17T09:10:27.730

默认情况下，一个值与存储的值完全匹配。如果您希望字段不区分大小写，通常的方法是使用小写过滤器的字段类型，使所有索引内容的大小写相同，实际上使搜索不区分大小写（因为查询值也将小写）。

示例内容对 'text' 和 'text_en' 字段类型执行此操作：

```
<filter class="solr.LowerCaseFilterFactory"/> 
```

然而，在某些特定领域，自动处理通配符查询的小写可能会导致麻烦，并且[在 Solr 3.6 和 4.0 中引入了 MultitermQueryAnalysis 来处理这些情况](http://wiki.apache.org/solr/MultitermQueryAnalysis)。如果字段已经小写，3.6 和 4.0 应该以正确的方式自动进行通配符搜索。

如果您在 3.6 之前没有获得正确的行为，我建议在使用通配符时将查询中的名称小写（只要您在索引时也应用了 LowerCaseFilterFactory）。

# asana - 在 Asana 中创建任务

> ID：11519123
> 
> 赞同：1
> 
> 时间：2012-07-17T08:55:32.393
> 
> 标签：asana

嗨，伙计们，我正在尝试使用 Asana Api 创建任务，但不知何故出现错误。我用来创建任务的 json 是

```
{
           "data":{
         "assignee":{
         "id":1259201588185,
         "name":"Test User"
          },
          "assignee_status":"upcoming",
          "completed":false,
          "due_on":null,
          "name":"testing",
          "notes":"testing",
          "projects":[

          ],
          "workspace":{
         "id":1259201588293,
         "name":"TestSpace"
          }
       }
    } 
```

但是每当我尝试发布相同的内容时，我都会收到错误“消息”：“无效字段”，上面的 json

```

            回答 #1

赞同：1

时间：2012-07-17T15:43:16.837

（我在 Asana 工作）

确保您`Content-Type: application/json`在请求中设置标头，以便服务器知道以该格式查找您的数据。

```

# java - 密集的 GC 活动暂时关闭服务

> ID：11519127
> 
> 赞同：2
> 
> 时间：2012-07-17T08:55:47.923
> 
> 标签：java, tomcat, garbage-collection

我收到报告说我的服务有时没有响应。

我发现一个java进程完全占用一个核心（4个核心中只有一个），

所以我通过网络搜索，发现：[Hung JVM sumption 100% CPU](https://stackoverflow.com/questions/4884630/hung-jvm-consuming-100-cpu)

我开始记录每个 GC 活动，并发现了奇怪的日志。

```
26149.891: [GC [PSYoungGen: 138048K->37757K(184512K)] 360110K->295763K(1495232K), 0.0749820 secs] [Times: user=0.53 sys=0.02, real=0.07 secs] 
26150.173: [GC [PSYoungGen: 143741K->37312K(183616K)] 401747K->333115K(1494336K), 0.0706090 secs] [Times: user=0.50 sys=0.02, real=0.07 secs] 
26150.450: [GC [PSYoungGen: 143296K->37280K(187328K)] 439099K->370363K(1498048K), 0.1557100 secs] [Times: user=1.07 sys=0.02, real=0.15 secs] 
26150.818: [GC [PSYoungGen: 148320K->42028K(185856K)] 481403K->412407K(1496576K), 0.0835340 secs] [Times: user=0.60 sys=0.03, real=0.08 secs] 
26151.121: [GC [PSYoungGen: 153068K->39040K(188416K)] 523447K->451423K(1499136K), 0.0831170 secs] [Times: user=0.58 sys=0.02, real=0.08 secs] 
26151.436: [GC [PSYoungGen: 152448K->39872K(187136K)] 564831K->491311K(1497856K), 0.1627710 secs] [Times: user=1.22 sys=0.03, real=0.17 secs] 
26151.832: [GC [PSYoungGen: 153280K->39744K(190720K)] 604719K->531063K(1501440K), 0.1741030 secs] [Times: user=1.30 sys=0.03, real=0.17 secs] 
26152.230: [GC [PSYoungGen: 157760K->46130K(189440K)] 649079K->577265K(1500160K), 0.0940570 secs] [Times: user=0.66 sys=0.03, real=0.09 secs] 
26152.554: [GC [PSYoungGen: 164146K->41504K(190784K)] 695281K->618785K(1501504K), 0.0948330 secs] [Times: user=0.68 sys=0.02, real=0.10 secs] 
26152.879: [GC [PSYoungGen: 159840K->41440K(189696K)] 737121K->660233K(1500416K), 0.1807870 secs] [Times: user=1.37 sys=0.02, real=0.18 secs] 
26153.296: [GC [PSYoungGen: 159776K->41568K(193280K)] 778569K->701849K(1504000K), 0.1802040 secs] [Times: user=1.22 sys=0.03, real=0.18 secs] 
26153.721: [GC [PSYoungGen: 164768K->43168K(192064K)] 825049K->745065K(1502784K), 0.1874250 secs] [Times: user=1.42 sys=0.02, real=0.19 secs] 
26154.134: [GC [PSYoungGen: 159404K->40352K(195840K)] 861301K->785481K(1506560K), 0.1758760 secs] [Times: user=1.30 sys=0.02, real=0.18 secs] 
26154.546: [GC [PSYoungGen: 168032K->51803K(179520K)] 913161K->837348K(1490240K), 0.1128670 secs] [Times: user=0.76 sys=0.02, real=0.12 secs] 
26154.910: [GC [PSYoungGen: 179483K->44768K(194112K)] 965028K->882164K(1504832K), 0.1198690 secs] [Times: user=0.88 sys=0.03, real=0.12 secs] 
26155.275: [GC [PSYoungGen: 170080K->44064K(193344K)] 1007476K->926252K(1504064K), 0.2003860 secs] [Times: user=1.51 sys=0.02, real=0.20 secs] 
26155.722: [GC [PSYoungGen: 169376K->43968K(196352K)] 1051564K->970212K(1507072K), 0.2186830 secs] [Times: user=1.67 sys=0.03, real=0.22 secs] 
26156.194: [GC [PSYoungGen: 173376K->45472K(195200K)] 1099620K->1015700K(1505920K), 0.1993740 secs] [Times: user=1.40 sys=0.04, real=0.20 secs] 
26156.647: [GC [PSYoungGen: 174880K->45440K(197696K)] 1145108K->1061172K(1508416K), 0.2208800 secs] [Times: user=1.64 sys=0.03, real=0.23 secs] 
26157.125: [GC [PSYoungGen: 177984K->45984K(196992K)] 1193716K->1107220K(1507712K), 0.2207530 secs] [Times: user=1.62 sys=0.02, real=0.22 secs] 
26157.580: [GC [PSYoungGen: 178528K->56664K(191680K)] 1239764K->1163988K(1502400K), 0.1383820 secs] [Times: user=0.98 sys=0.04, real=0.14 secs] 
26157.966: [GC [PSYoungGen: 184408K->44768K(194944K)] 1291732K->1208844K(1505664K), 0.1331440 secs] [Times: user=0.94 sys=0.03, real=0.14 secs] 
26158.457: [GC [PSYoungGen: 172512K->44928K(198336K)] 1336588K->1253828K(1509056K), 0.2231800 secs] [Times: user=1.68 sys=0.03, real=0.23 secs] 
26158.963: [GC [PSYoungGen: 177856K->46624K(196736K)] 1386756K->1300436K(1507456K), 0.2182210 secs] [Times: user=1.65 sys=0.03, real=0.22 secs] 
26159.181: [Full GC [PSYoungGen: 46624K->0K(196736K)] [PSOldGen: 1253812K->1300242K(1310720K)] 1300436K->1300242K(1507456K) [PSPermGen: 55231K->55231K(262144K)], 3.4748620 secs] [Times: user=3.43 sys=0.03, real=3.47 secs] 
26163.002: [Full GC [PSYoungGen: 132928K->35639K(196736K)] [PSOldGen: 1300242K->1310720K(1310720K)] 1433170K->1346359K(1507456K) [PSPermGen: 55231K->55231K(262144K)], 3.5303910 secs] [Times: user=3.51 sys=0.02, real=3.53 secs] 
26166.802: [Full GC [PSYoungGen: 132928K->76010K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1386730K(1507456K) [PSPermGen: 55231K->55231K(262144K)], 3.4764380 secs] [Times: user=3.48 sys=0.00, real=3.47 secs] 
26170.464: [Full GC [PSYoungGen: 132928K->41991K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1352711K(1507456K) [PSPermGen: 55231K->55211K(262144K)], 4.6156250 secs] [Times: user=4.57 sys=0.04, real=4.61 secs] 
26175.372: [Full GC [PSYoungGen: 132928K->80309K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1391029K(1507456K) [PSPermGen: 55211K->55211K(262144K)], 3.5159220 secs] [Times: user=3.51 sys=0.00, real=3.51 secs] 
26179.074: [Full GC [PSYoungGen: 132928K->98592K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1409312K(1507456K) [PSPermGen: 55211K->55211K(262144K)], 3.5558960 secs] [Times: user=3.55 sys=0.00, real=3.55 secs] 
26182.700: [Full GC [PSYoungGen: 132928K->110146K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1420866K(1507456K) [PSPermGen: 55211K->55211K(262144K)], 3.8777130 secs] [Times: user=3.87 sys=0.00, real=3.88 secs] 
26186.663: [Full GC [PSYoungGen: 132928K->111368K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1422088K(1507456K) [PSPermGen: 55211K->55211K(262144K)], 4.5746670 secs] [Times: user=4.57 sys=0.00, real=4.57 secs] 
26191.321: [Full GC [PSYoungGen: 132928K->125449K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1436169K(1507456K) [PSPermGen: 55211K->55211K(262144K)], 3.6080590 secs] [Times: user=3.56 sys=0.04, real=3.61 secs] 
26194.954: [Full GC [PSYoungGen: 132928K->127668K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1438388K(1507456K) [PSPermGen: 55211K->55211K(262144K)], 3.5435640 secs] [Times: user=3.54 sys=0.00, real=3.54 secs] 
26198.517: [Full GC [PSYoungGen: 132928K->129407K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1440127K(1507456K) [PSPermGen: 55211K->55211K(262144K)], 3.5862840 secs] [Times: user=3.57 sys=0.02, real=3.58 secs] 
26202.117: [Full GC [PSYoungGen: 132928K->123893K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1434613K(1507456K) [PSPermGen: 55211K->55211K(262144K)], 4.7643840 secs] [Times: user=4.73 sys=0.03, real=4.76 secs] 
26206.912: [Full GC [PSYoungGen: 132928K->132928K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1443648K(1507456K) [PSPermGen: 55214K->55214K(262144K)], 3.6269220 secs] [Times: user=3.62 sys=0.00, real=3.63 secs] 
26210.539: [Full GC [PSYoungGen: 132928K->126271K(196736K)] [PSOldGen: 1310720K->1310719K(1310720K)] 1443648K->1436991K(1507456K) [PSPermGen: 55214K->55151K(262144K)], 4.6103030 secs] [Times: user=4.61 sys=0.00, real=4.61 secs] 
26215.191: [Full GC [PSYoungGen: 132928K->132928K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1443647K(1507456K) [PSPermGen: 55202K->55202K(262144K)], 3.5856180 secs] [Times: user=3.59 sys=0.00, real=3.59 secs] 
26218.777: [Full GC [PSYoungGen: 132928K->128287K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1439007K(1507456K) [PSPermGen: 55202K->55151K(262144K)], 4.6097420 secs] [Times: user=4.60 sys=0.00, real=4.60 secs] 
26223.406: [Full GC [PSYoungGen: 132926K->132926K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443646K->1443646K(1507456K) [PSPermGen: 55202K->55202K(262144K)], 3.6066240 secs] [Times: user=3.60 sys=0.00, real=3.61 secs] 
26227.012: [Full GC [PSYoungGen: 132926K->129377K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443646K->1440097K(1507456K) [PSPermGen: 55202K->55184K(262144K)], 4.6120400 secs] [Times: user=4.61 sys=0.00, real=4.61 secs] 
26231.653: [Full GC [PSYoungGen: 132928K->132928K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1443647K(1507456K) [PSPermGen: 55199K->55199K(262144K)], 3.5711710 secs] [Times: user=3.59 sys=0.00, real=3.57 secs] 
26235.225: [Full GC [PSYoungGen: 132928K->130479K(196736K)] [PSOldGen: 1310719K->1310720K(1310720K)] 1443647K->1441199K(1507456K) [PSPermGen: 55199K->55199K(262144K)], 4.4967450 secs] [Times: user=4.49 sys=0.00, real=4.50 secs] 
26239.732: [Full GC [PSYoungGen: 132928K->132928K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1443648K(1507456K) [PSPermGen: 55202K->55202K(262144K)], 3.5474400 secs] [Times: user=3.54 sys=0.00, real=3.54 secs] 
26243.279: [Full GC [PSYoungGen: 132928K->131113K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1441833K(1507456K) [PSPermGen: 55202K->55184K(262144K)], 3.5526010 secs] [Times: user=3.55 sys=0.00, real=3.56 secs] 
26246.838: [Full GC [PSYoungGen: 132928K->132928K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1443648K(1507456K) [PSPermGen: 55202K->55202K(262144K)], 3.5478440 secs] [Times: user=3.54 sys=0.01, real=3.55 secs] 
26250.386: [Full GC [PSYoungGen: 132928K->131392K(196736K)] [PSOldGen: 1310720K->1310719K(1310720K)] 1443648K->1442112K(1507456K) [PSPermGen: 55202K->55157K(262144K)], 3.6749040 secs] [Times: user=3.67 sys=0.00, real=3.67 secs] 
26254.067: [Full GC [PSYoungGen: 132928K->132928K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1443647K(1507456K) [PSPermGen: 55178K->55178K(262144K)], 3.5833210 secs] [Times: user=3.59 sys=0.00, real=3.58 secs] 
26257.650: [Full GC [PSYoungGen: 132928K->131782K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1442502K(1507456K) [PSPermGen: 55178K->55166K(262144K)], 3.5557440 secs] [Times: user=3.55 sys=0.00, real=3.56 secs] 
26261.211: [Full GC [PSYoungGen: 132928K->132928K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1443647K(1507456K) [PSPermGen: 55175K->55175K(262144K)], 3.5458550 secs] [Times: user=3.55 sys=0.00, real=3.55 secs] 
26264.757: [Full GC [PSYoungGen: 132928K->132082K(196736K)] [PSOldGen: 1310719K->1310720K(1310720K)] 1443647K->1442802K(1507456K) [PSPermGen: 55175K->55154K(262144K)], 4.5970920 secs] [Times: user=4.60 sys=0.00, real=4.59 secs] 
26269.357: [Full GC [PSYoungGen: 132928K->132928K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1443648K(1507456K) [PSPermGen: 55157K->55157K(262144K)], 3.5443640 secs] [Times: user=3.55 sys=0.00, real=3.54 secs] 
26272.901: [Full GC [PSYoungGen: 132928K->132206K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1442926K(1507456K) [PSPermGen: 55157K->55157K(262144K)], 4.6007130 secs] [Times: user=4.60 sys=0.00, real=4.60 secs] 
26277.504: [Full GC [PSYoungGen: 132928K->132928K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1443648K(1507456K) [PSPermGen: 55169K->55169K(262144K)], 3.5481120 secs] [Times: user=3.55 sys=0.00, real=3.55 secs] 
26281.052: [Full GC [PSYoungGen: 132928K->132330K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1443050K(1507456K) [PSPermGen: 55169K->55160K(262144K)], 3.5732500 secs] [Times: user=3.57 sys=0.00, real=3.57 secs] 
26284.628: [Full GC [PSYoungGen: 132928K->132928K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1443648K(1507456K) [PSPermGen: 55163K->55163K(262144K)], 3.5440330 secs] [Times: user=3.55 sys=0.00, real=3.54 secs] 
26288.173: [Full GC [PSYoungGen: 132928K->132396K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1443116K(1507456K) [PSPermGen: 55163K->55154K(262144K)], 3.5533020 secs] [Times: user=3.55 sys=0.00, real=3.55 secs] 
26291.728: [Full GC [PSYoungGen: 132928K->132928K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1443648K(1507456K) [PSPermGen: 55156K->55156K(262144K)], 3.5478580 secs] [Times: user=3.55 sys=0.00, real=3.55 secs] 
26295.276: [Full GC [PSYoungGen: 132928K->132554K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1443274K(1507456K) [PSPermGen: 55156K->55153K(262144K)], 3.5612690 secs] [Times: user=3.56 sys=0.00, real=3.56 secs] 
26298.840: [Full GC [PSYoungGen: 132928K->132928K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1443648K(1507456K) [PSPermGen: 55163K->55163K(262144K)], 3.5476290 secs] [Times: user=3.54 sys=0.00, real=3.54 secs] 
26302.387: [Full GC [PSYoungGen: 132928K->132630K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1443350K(1507456K) [PSPermGen: 55163K->55163K(262144K)], 3.5523880 secs] [Times: user=3.56 sys=0.00, real=3.55 secs] 
26305.941: [Full GC [PSYoungGen: 132928K->132928K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1443648K(1507456K) [PSPermGen: 55166K->55166K(262144K)], 3.5477250 secs] [Times: user=3.55 sys=0.00, real=3.54 secs] 
26309.489: [Full GC [PSYoungGen: 132928K->132694K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1443414K(1507456K) [PSPermGen: 55166K->55160K(262144K)], 3.5517750 secs] [Times: user=3.55 sys=0.00, real=3.55 secs] 
26313.042: [Full GC [PSYoungGen: 132928K->132928K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1443648K(1507456K) [PSPermGen: 55164K->55164K(262144K)], 3.6786080 secs] [Times: user=3.66 sys=0.01, real=3.67 secs] 
26316.721: [Full GC [PSYoungGen: 132928K->132761K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1443481K(1507456K) [PSPermGen: 55164K->55164K(262144K)], 3.5701210 secs] [Times: user=3.57 sys=0.00, real=3.57 secs] 
26320.293: [Full GC [PSYoungGen: 132928K->132928K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1443648K(1507456K) [PSPermGen: 55169K->55169K(262144K)], 3.5485590 secs] [Times: user=3.55 sys=0.00, real=3.54 secs] 
26323.842: [Full GC [PSYoungGen: 132928K->132815K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1443535K(1507456K) [PSPermGen: 55169K->55169K(262144K)], 3.5526530 secs] [Times: user=3.55 sys=0.00, real=3.56 secs] 
26327.396: [Full GC [PSYoungGen: 132928K->132928K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1443648K(1507456K) [PSPermGen: 55169K->55169K(262144K)], 3.5483590 secs] [Times: user=3.55 sys=0.00, real=3.54 secs] 
26330.944: [Full GC [PSYoungGen: 132928K->132833K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1443553K(1507456K) [PSPermGen: 55169K->55166K(262144K)], 3.5551080 secs] [Times: user=3.55 sys=0.00, real=3.56 secs] 
26334.501: [Full GC [PSYoungGen: 132928K->132928K(196736K)] [PSOldGen: 1310720K->1310720K(1310720K)] 1443648K->1443648K(1507456K) [PSPermGen: 55172K->55172K(262144K)], 3.6050900 secs] [Times: user=3.59 sys=0.01, real=3.61 secs] 
26338.106: [Full GC [PSYoungGen: 132928K->132833K(196736K)] [PSOldGen: 1310720K->1310719K(1310720K)] 1443648K->1443553K(1507456K) [PSPermGen: 55172K->55172K(262144K)], 4.6456700 secs] [Times: user=4.63 sys=0.01, real=4.64 secs] 
26342.754: [Full GC [PSYoungGen: 132928K->132928K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1443647K(1507456K) [PSPermGen: 55178K->55178K(262144K)], 3.6874260 secs] [Times: user=3.69 sys=0.00, real=3.69 secs] 
26346.442: [Full GC [PSYoungGen: 132928K->132859K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1443579K(1507456K) [PSPermGen: 55178K->55178K(262144K)], 4.6572880 secs] [Times: user=4.65 sys=0.00, real=4.66 secs] 
26351.100: [Full GC [PSYoungGen: 132928K->132928K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1443647K(1507456K) [PSPermGen: 55178K->55178K(262144K)], 3.5457670 secs] [Times: user=3.54 sys=0.00, real=3.54 secs] 
26354.646: [Full GC [PSYoungGen: 132928K->132854K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1443574K(1507456K) [PSPermGen: 55178K->55178K(262144K)], 3.8780600 secs] [Times: user=3.88 sys=0.00, real=3.88 secs] 
26358.525: [Full GC [PSYoungGen: 132928K->132928K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1443647K(1507456K) [PSPermGen: 55178K->55178K(262144K)], 3.6869670 secs] [Times: user=3.68 sys=0.00, real=3.69 secs] 
26362.212: [Full GC [PSYoungGen: 132928K->132870K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1443590K(1507456K) [PSPermGen: 55178K->55178K(262144K)], 3.6601190 secs] [Times: user=3.65 sys=0.00, real=3.66 secs] 
26365.874: [Full GC [PSYoungGen: 132928K->132928K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1443647K(1507456K) [PSPermGen: 55178K->55178K(262144K)], 3.5784780 secs] [Times: user=3.57 sys=0.01, real=3.58 secs] 
26369.452: [Full GC [PSYoungGen: 132928K->132893K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1443613K(1507456K) [PSPermGen: 55178K->55178K(262144K)], 3.5865440 secs] [Times: user=3.56 sys=0.02, real=3.58 secs] 
26373.040: [Full GC [PSYoungGen: 132928K->132928K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1443647K(1507456K) [PSPermGen: 55178K->55178K(262144K)], 3.5989820 secs] [Times: user=3.57 sys=0.03, real=3.60 secs] 
26376.639: [Full GC [PSYoungGen: 132928K->132897K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1443617K(1507456K) [PSPermGen: 55178K->55178K(262144K)], 3.5529890 secs] [Times: user=3.55 sys=0.00, real=3.56 secs] 
26380.193: [Full GC [PSYoungGen: 132928K->132928K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1443647K(1507456K) [PSPermGen: 55178K->55178K(262144K)], 3.5474210 secs] [Times: user=3.55 sys=0.00, real=3.54 secs] 
26383.740: [Full GC [PSYoungGen: 132928K->132915K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1443635K(1507456K) [PSPermGen: 55178K->55178K(262144K)], 3.5972640 secs] [Times: user=3.58 sys=0.01, real=3.60 secs] 
26387.339: [Full GC [PSYoungGen: 132928K->132928K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1443647K(1507456K) [PSPermGen: 55178K->55178K(262144K)], 3.6116590 secs] [Times: user=3.59 sys=0.02, real=3.61 secs] 
26390.950: [Full GC [PSYoungGen: 132928K->132912K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1443632K(1507456K) [PSPermGen: 55178K->55178K(262144K)], 3.6188690 secs] [Times: user=3.58 sys=0.04, real=3.62 secs] 
26394.570: [Full GC [PSYoungGen: 132928K->132928K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1443647K(1507456K) [PSPermGen: 55178K->55178K(262144K)], 3.6132870 secs] [Times: user=3.59 sys=0.01, real=3.61 secs] 
26398.184: [Full GC [PSYoungGen: 132928K->132916K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1443636K(1507456K) [PSPermGen: 55178K->55178K(262144K)], 3.5736670 secs] [Times: user=3.57 sys=0.01, real=3.58 secs] 
26401.759: [Full GC [PSYoungGen: 132928K->132928K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1443647K(1507456K) [PSPermGen: 55178K->55178K(262144K)], 3.5491540 secs] [Times: user=3.54 sys=0.00, real=3.55 secs] 
26405.308: [Full GC [PSYoungGen: 132928K->132919K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1443639K(1507456K) [PSPermGen: 55178K->55178K(262144K)], 3.5484790 secs] [Times: user=3.55 sys=0.00, real=3.55 secs] 
26408.857: [Full GC [PSYoungGen: 132928K->132928K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1443647K(1507456K) [PSPermGen: 55178K->55178K(262144K)], 3.5489760 secs] [Times: user=3.55 sys=0.00, real=3.54 secs] 
26412.406: [Full GC [PSYoungGen: 132928K->132922K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1443642K(1507456K) [PSPermGen: 55178K->55178K(262144K)], 3.5474050 secs] [Times: user=3.55 sys=0.00, real=3.55 secs] 
26415.955: [Full GC [PSYoungGen: 132928K->132928K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1443647K(1507456K) [PSPermGen: 55178K->55178K(262144K)], 3.5476430 secs] [Times: user=3.54 sys=0.00, real=3.55 secs] 
26419.502: [Full GC [PSYoungGen: 132928K->132922K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1443642K(1507456K) [PSPermGen: 55178K->55178K(262144K)], 3.5518040 secs] [Times: user=3.56 sys=0.00, real=3.55 secs] 
26423.055: [Full GC [PSYoungGen: 132928K->132928K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1443647K(1507456K) [PSPermGen: 55178K->55178K(262144K)], 3.5467870 secs] [Times: user=3.54 sys=0.00, real=3.55 secs] 
26426.602: [Full GC [PSYoungGen: 132928K->132924K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1443644K(1507456K) [PSPermGen: 55178K->55178K(262144K)], 3.5525280 secs] [Times: user=3.55 sys=0.00, real=3.55 secs] 
26430.156: [Full GC [PSYoungGen: 132928K->132928K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1443647K(1507456K) [PSPermGen: 55178K->55178K(262144K)], 3.6035060 secs] [Times: user=3.60 sys=0.00, real=3.61 secs] 
26433.760: [Full GC [PSYoungGen: 132928K->132920K(196736K)] [PSOldGen: 1310719K->1310719K(1310720K)] 1443647K->1443640K(1507456K) [PSPermGen: 55178K->55172K(262144K)], 3.5433380 secs] [Times: user=3.54 sys=0.00, real=3.54 secs] 
26437.304: [Full GC [PSYoungGen: 132928K->0K(196736K)] [PSOldGen: 1310719K->53875K(1310720K)] 1443647K->53875K(1507456K) [PSPermGen: 55172K->55172K(262144K)], 0.6250820 secs] [Times: user=0.63 sys=0.00, real=0.62 secs] 
26723.816: [GC [PSYoungGen: 132928K->4016K(189504K)] 186803K->57891K(1500224K), 0.0123520 secs] [Times: user=0.06 sys=0.00, real=0.01 secs] 
27069.299: [GC [PSYoungGen: 130608K->8368K(134976K)] 184483K->62243K(1445696K), 0.0219260 secs] [Times: user=0.14 sys=0.00, real=0.02 secs] 
myScheduler-2> [2012-07-17 17:35:00] [AlarmService] [110] [INFO] issue alarm mail sent, contract_id = 10, tweet_id = 225111165720735745 
27436.179: [GC [PSYoungGen: 134960K->12816K(190400K)] 188835K->66692K(1501120K), 0.0323320 secs] [Times: user=0.23 sys=0.00, real=0.03 secs] 
27782.840: [GC [PSYoungGen: 132880K->16976K(191104K)] 186756K->70852K(1501824K), 0.0416410 secs] [Times: user=0.31 sys=0.00, real=0.04 secs] 
```

可以看到，有一段时间，Full GC 活动被执行，tomcat 挂起。

它最终会恢复，但同时也会使我的服务瘫痪。

有人知道我的机器发生了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T09:18:39.643

在大约 5 分钟内，您的应用程序除了运行主要 GC 之外几乎没有做任何事情。每次 GC 大约需要 3-4 秒（此时 JVM 没有响应），紧接着是另一个。GC 也消耗 100% 的 CPU（一个核心？）

需要注意的是，每个主要 GC 并没有真正收集任何垃圾，无论是在年轻时：

```
PSYoungGen: 132928K->132922K(196736K) 
```

在老一代：

```
PSOldGen: 1310719K->1310719K(1310720K) 
```

并且由于 JVM 无法找到任何空闲内存，它一次又一次地运行 GC，然后......

但是，您的应用程序不仅仅是崩溃。相反，它在这几分钟后突然以某种方式恢复（为了清楚起见，拆分线）：

```
26437.304: [Full GC 
    [PSYoungGen: 132928K->0K(196736K)] 
    [PSOldGen: 1310719K->53875K(1310720K)] 1443647K->53875K(1507456K) 
    [PSPermGen: 55172K->55172K(262144K)], 0.6250820 secs] 
    [Times: user=0.63 sys=0.00, real=0.62 secs] 
```

不仅整个young generation被释放，old generation的数量也从1280MB下降到52MB。请仔细观看此图表（[放大](https://i.stack.imgur.com/wdBRR.png)）。蓝线显示您的堆使用量在几分钟后突然飙升和下降。绿线还显示平均 GC 时间 - 从可容忍的毫秒到灾难性的秒。最后，黑色竖线代表主要 GC。它们不应该比每隔一分钟（小时？）更频繁地出现，而不是每隔一秒出现一次。

![GC查看器](../Images/38968d3b5a0a90684846f98a00528c86.png)

这告诉我，在这么短的时间内，您在内存中保留**了大量数据。**可能是一些巨大的对象集合。不知何故，JVM 并没有崩溃，而是设法继续处理。当你的工作完成后，整个集合就被简单地 GCed 了。

没有看到代码就很难判断（我看到`AlarmService`日志中有悬空......），但在你使用内存转储和分析等大炮之前，请检查你的代码，特别是你从数据库加载或从外部获取的无界集合（我看到了吗？推特？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T09:09:13.020

内存中的对象大致分为两个堆（从 GC 角度来看）：年轻代和老年代。

大多数时候 GC 会在 Young gen 对象上运行短迭代，并且这些迭代通常与应用程序流并行运行（应用程序不会停止）。

不时地年轻代堆被填满，GC 执行所谓的“停止世界”清理，这意味着应用程序完全停止并且 GC 清理两个堆中所有不必要的对象。显然，与通常的短迭代相比，此迭代需要更多时间。

您需要检查几件事：

1.  尝试分析您的应用程序并确保您没有导致堆快速增长并因此经常执行完整 GC 的内存泄漏。
2.  GC 有几种算法会导致其行为不同（并行运行、串行运行等），您可能需要对其进行调查，看看哪一种更适合您的需求。

你可以[在这里](http://java.dzone.com/articles/java-garbage-collection)寻找指针，也可以使用谷歌。

# android - Android：缩放后在ImageView上查找绝对点击位置（使用捏缩放使用矩阵布局）

> ID：11519132
> 
> 赞同：3
> 
> 时间：2012-07-17T08:55:57.213
> 
> 标签：android, coordinates, css-position, pinchzoom

我正在使用 Hello Android 第 3 版中的代码来实现捏到缩放功能。使用此捏缩放工作正常，但缩放后我想获得图像视图上的绝对点击位置。

这是我的代码

```
package org.example.touch;
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.Matrix;
import android.graphics.PointF;
import android.os.Bundle;
import android.util.FloatMath;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.GridView;
import android.widget.ImageView;

public class Touch extends Activity implements OnTouchListener {
private static final String TAG = "Touch";

private static final float MIN_ZOOM = 1.0f;
private static final float MAX_ZOOM = 5.0f;

// These matrices will be used to move and zoom image
Matrix matrix = new Matrix();
Matrix savedMatrix = new Matrix();

// We can be in one of these 3 states
static final int NONE = 0;
static final int DRAG = 1;
static final int ZOOM = 2;
int mode = NONE;

// Remember some things for zooming
PointF start = new PointF();
PointF mid = new PointF();
float oldDist = 1f;

ImageView image2;
image2 = (ImageView)this.findViewById(R.id.imageView2);
image2.setOnTouchListener(new OnTouchListener() {

                public boolean onTouch(View v, MotionEvent event) {

                     ImageView view = (ImageView) image2;
                      // Handle touch events here...
                        switch (event.getAction() & MotionEvent.ACTION_MASK) {
                        case MotionEvent.ACTION_DOWN:
                            savedMatrix.set(matrix);
                            start.set(event.getX(), event.getY());
                            mode = DRAG;
                            break;
                        case MotionEvent.ACTION_POINTER_DOWN:
                            oldDist = spacing(event);
                            if (oldDist > 10f) {
                                savedMatrix.set(matrix);
                                midPoint(mid, event);
                                mode = ZOOM;
                            }
                            break;
                        case MotionEvent.ACTION_UP:
                        case MotionEvent.ACTION_POINTER_UP:
                            mode = NONE;
                            break;
                        case MotionEvent.ACTION_MOVE:
                            if (mode == DRAG) {
                                matrix.set(savedMatrix);
                                matrix.postTranslate(event.getX() - start.x, event.getY() - start.y);
                            }
                            else if (mode == ZOOM) {
                                float newDist = spacing(event);
                                if (newDist > 10f) {
                                    matrix.set(savedMatrix);
                                    float scale = newDist / oldDist;
                                    matrix.postScale(scale, scale, mid.x, mid.y);
                                }
                            }
                            break;
                        }
                        view.setImageMatrix(matrix);
}

        /** Determine the space between the first two fingers */
        private float spacing(MotionEvent event) {
            float x = event.getX(0) - event.getX(1);
            float y = event.getY(0) - event.getY(1);
            return FloatMath.sqrt(x * x + y * y);
        }

        /** Calculate the mid point of the first two fingers */
        private void midPoint(PointF point, MotionEvent event) {
            float x = event.getX(0) + event.getX(1);
            float y = event.getY(0) + event.getY(1);
            point.set(x / 2, y / 2);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-11T15:35:31.660

您可以使用当前应用于图像视图的矩阵将点映射到原始默认点/从原始默认点映射点。

```
//points from a touch/click event on the zoomed/translated imageview
float X;
float Y;

float initialPoints = new float[]{X, Y};

//invert the matrix and map points back
    if(transformMatrix.invert(inverseTransformMatrix))
            inverseTransformMatrix.mapPoints(initialFocalPoints); 
```

`initialPoints`现在包含原始点，即如果没有矩阵应用于图像视图，点击点将在哪里

**编辑**：应该在某处添加它，这样你就知道它们是什么了。

```
Matrix inverseTransformMatrix = new Matrix();
Matrix transformMatrix = new Matrix(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:41:53.980

应用以下逻辑

```
float[] values = new float[9];
matrix.getValues(values); 
```

在捏缩放之前计算比例因子；

```
scaleX=values[0];
scaleY=vales[4]; 
```

现在在捏缩放后根据iamge计算相对触摸坐标

```
float relativeX = ((event.getX() - values[2])*sacleX) / values[0];
float relativeY = ((event.getY() - values[5])*scaleY) / values[4]; 
```

# internet-explorer - iframe 内部服务器错误 500 - 仅在 Internet Explorer 中

> ID：11519136
> 
> 赞同：0
> 
> 时间：2012-07-17T08:56:25.793
> 
> 标签：internet-explorer

我有一个带有 iframe 的网站，它适用于 FF 和 Chrome，但在 IE 中我得到：HTTP Status 500 (Tomcat)。我无权访问日志文件。

为什么会这样？

编辑：

这是网站： http: [//archiv.difmoe.eu/kalender/ubrtest.php](http://archiv.difmoe.eu/kalender/ubrtest.php)

我使用 fiddler2 来获取此报告：

```
<html><head><title>Apache Tomcat/5.0.26 - Error report</title><style><!--H1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;} H2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;} H3 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:14px;} BODY {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;} B {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} P {font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;}A {color : black;}A.name {color : black;}HR {color : #525D76;}--></style> </head><body><h1>HTTP Status 500 - </h1><HR size="1" noshade="noshade"><p><b>type</b> Exception report</p><p><b>message</b> <u></u></p><p><b>description</b> <u>The server encountered an internal error () that prevented it from fulfilling this request.</u></p><p><b>exception</b> <pre>org.apache.jasper.JasperException
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:372)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:292)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:236)
javax.servlet.http.HttpServlet.service(HttpServlet.java:810)
com.exlibris.digitool.common.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:50) 
```

**根本原因**

```
java.lang.NullPointerException
    org.apache.jsp.mets.toc_jsp._jspService(toc_jsp.java:74)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:94)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:810)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:324)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:292)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:236)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:810)
    com.exlibris.digitool.common.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:50)

```

**note** Apache Tomcat/5.0.26 日志中提供了根本原因的完整堆栈跟踪。

### Apache Tomcat/5.0.26

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:04:50.567

这是因为没有传递**带有会话 ID 的 cookie 。**您需要在每个设置**cookie****的页面上发送标题**。

 ****PHP：**

```
header('P3P:CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"'); 
```

**ASP.NET：**

```
HttpContext.Current.Response.AddHeader("p3p","CP=\"IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT\""); 
```

**姜戈：**

```
response = render_to_response('mytemplate.html')
response["P3P"] = 'CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"' 
```

**JSP：**

```
response.addHeader("P3P","CP=\"IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT\"") 
```

参考： [http ://adamyoung.net/IE-Blocking-iFrame-Cookies](http://adamyoung.net/IE-Blocking-iFrame-Cookies)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-20T15:28:39.490

Old question but it has a lot of Google juice so maybe this will help someone in the future:

I had this same issue with an ASP.NET MVC website. I had to remove `[ValidateAntiForgeryToken]` from the `POST` method in my Controller as well as removing it from the view. Then everything worked fine (in all versions of IE). My guess is it is still related to headers in some form or fashion.**

# datatables - 清理 bStateSave cookie

> ID：11519141
> 
> 赞同：5
> 
> 时间：2012-07-17T08:56:50.750
> 
> 标签：datatables

bStateSave 选项可用于将 DataTable 的状态保存在 cookie 中。

我想在注销时清除此 cookie。

目前，我从浏览器中检查了 cookie 的名称，并在注销时使用 PHP setcookie() 更改了它的到期日期，并用硬编码名称。它可以工作，但有点难看，因为我不知道如何从 API 中检索 cookie 名称。

有没有合适的方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T23:58:25.960

我不知道你是否已经得到答案，但这是我使用的。

有一个用于初始化 DataTables 的属性，称为：iCookieDuration。您应该做的是设置以秒为单位的“cookie持续时间”

那么你有：

```
 $('.datatable').dataTable({           
        "iCookieDuration": 60*60*24,// 1 day (in seconds)
     }); 
```

然后您设置一个您认为最佳的时间。希望能帮到你！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-13T06:43:26.540

DataTables 中的状态保存是通过将 JSON 字符串保存到 cookie 来完成的，允许它尽可能保持浏览器兼容性，同时将状态存储在客户端。有时，能够修改由表保存的参数会很有用。

**如果您想在注销时清除数据表状态，那么我建议您简单地清除存储。**

Storage 接口的`removeItem()`方法，当传递一个键名时，将从存储中删除该键。

```
function populateStorage() {
  localStorage.setItem('bgcolor', 'red');
  localStorage.setItem('font', 'Helvetica');
  localStorage.setItem('image', 'myCat.png');

  localStorage.removeItem('image');
} 
```

或者

只需在退出操作时用 javascript 编写即可。

```
echo '<script type="text/javascript">localStorage.clear();</script>'; 
```

IE

```
<script type="text/javascript">localStorage.clear();</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:00:13.750

我唯一能想到的是：

`fnCookieCallback`来自[http://datatables.net/ref](http://datatables.net/ref)

您可以将 cookie 设置为现在的过期时间并保存。我不知道这是否有帮助，但希望你能找到答案:)

# java - 将 JTable 值与其他 JTable 值集进行比较

> ID：11519145
> 
> 赞同：1
> 
> 时间：2012-07-17T08:56:59.773
> 
> 标签：java, swing, netbeans, jtable, tablemodel

任何人都可以帮助如何将 JTable 的值与另一组 JTable 值进行比较？

我的程序是 1）从 telnet 服务器更新表 2）当我重新更新时，如果我发现表与前一个相比有任何更改，它应该触发行，以便我可以单独将其更新到后端数据库。3）现在我正在删除所有行并重新填充。----> 不好的方法，因为我也存储它的日志

请提供您的建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:10:37.863

每个`JTable`都有一个`TableModel`提供对`JTable`. 您可以遍历数据并将旧值与新值进行比较。这将允许您`TableModel`仅在必要时更新。不要忘记从您的`TableModel`或`JTable`将损坏的事件中触发正确的事件

# javascript - 点击透明图片

> ID：11519146
> 
> 赞同：1
> 
> 时间：2012-07-17T08:57:05.677
> 
> 标签：javascript, image, click, png, transparency

我有一个正方形图像，在透明背景上描绘了一辆汽车。我希望能够点击汽车，但是当我点击它的透明背景时，我希望点击通过图像并触发底层 DOM 元素（或者，特别是其他图像）。

能以某种方式实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:50:10.373

这相当复杂，但可以通过组合**Pointer 事件**来实现，以允许`click`DOM 冒泡（到达`img`父容器），并在顶部使用人造**Canvas**来检测透明像素（将用作激活事件委托）。

指针事件源自 SVG 模型，以允许跨层的事件委托。[请注意， IE 和 Opera 目前不支持](http://caniuse.com/#search=pointer-events)它们。

**相关文章：**

*   [一种用于像素颜色检测的技术](https://stackoverflow.com/questions/1936021/javascript-eyedropper-tell-color-of-pixel-under-mouse-cursor)
*   [从 HTML5 Canvas 获取像素](https://stackoverflow.com/questions/667045/getpixel-from-html-canvas)

**演示：**

*   [`pointer-events`在 jsFiddle 上](http://jsfiddle.net/eliranmal/JwUqw/)

**参考：**

*   [`pointer-events`在 Mozilla 开发者网络上](https://developer.mozilla.org/en/CSS/pointer-events/)
*   [Dev.Opera 上基于像素的操作](http://dev.opera.com/articles/view/html-5-canvas-the-basics/#pixelbasedmanipulation)

**进一步阅读：**

*   [罗伯特·尼曼（Robert Nyman）关于该主题的文章](http://robertnyman.com/2010/03/22/css-pointer-events-to-allow-clicks-on-underlying-elements/)
*   [John Resig 关于转换图像数据](http://ejohn.org/blog/ocr-and-neural-nets-in-javascript/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:10:41.183

不，图像上的点击事件不受图像透明度的控制。单击将始终在图像上触发，如果没有停止，则会冒泡到父级。

图像可以有半透明像素，如果一个像素有 61% 的不透明度，那么 37% 的点击会转到父元素，这当然是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T09:45:05.280

您可以在汽车周围绘制 nan SVG 形状并将图片放入其中，然后侦听形状上的点击事件。

# asp.net - 插入、删除、更新gridview错误

> ID：11519147
> 
> 赞同：0
> 
> 时间：2012-07-17T08:57:06.887
> 
> 标签：asp.net, gridview

我正在尝试在 gridview 中插入、删除、更新数据。但我有这样的错误：

```
<ItemTemplate> 
    <asp:LinkButton ID="btnedit" runat="server" CommandName="Edit" Text="Edit"/>  
</ItemTemplate> 
```

**错误信息**是：

```
 Parser Error Message: The 'Text' property of 'asp:TextBox' does not allow child objects. 
```

我不知道为什么我会收到有关这些行的此错误。有人可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:25:27.983

好像您有一个未关闭的 asp:TextBox 标记。返回并单击所有 asp:TextBox 和 VS 应该突出显示匹配的标签，找到没有匹配的标签。

# coldfusion - Coldfusion VARIABLES 范围在评估工作时失败

> ID：11519148
> 
> 赞同：0
> 
> 时间：2012-07-17T08:57:14.333
> 
> 标签：coldfusion, scope, eval

将 VARIABLES 范围与动态变量名一起使用时出现以下错误：

```
Element wlc_period is undefined in a Java object of type class coldfusion.runtime.VariableScope. 
```

当我尝试运行此代码时：

```
<cfparam name="wlc_period#y#" default="36">

<cfscript>
wlc_period      = VARIABLES['wlc_period#y#'];
</cfscript> 
```

但如果我使用`evaluate()`，它可以工作：

```
<cfscript>
wlc_period      = evaluate('wlc_period#y#');
</cfscript> 
```

在执行时，**y**变量是一个空字符串，但代码会在循环中的其他地方使用，因此有时可以用整数 1 - 5 填充。

代码应该尝试访问**wlc_period**，如果我只是做一个简单的转储，它就可以工作：

```
<cfparam name="wlc_period#y#" default="36">

<cfscript>
writedump(wlc_period);
</cfscript> 
```

我宁愿使用 VARIABLES 范围而不是 evaulate()，我在这里遗漏了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:32:17.663

以下代码按预期工作。

```
<cfset y = "">
<cfparam name="wlc_period#y#" default="36">

<cfscript>
   wlc_period      = VARIABLES['wlc_period#y#'];
</cfscript>

<cfdump var="#wlc_period#"> 
```

如果您只有 .cfm 文件中的那个，那对您有用吗？

我怀疑您遇到的问题与您发布的代码无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:26:07.183

我认为你误解了`VARIABLES`范围是什么。或者可能真正的范围变量是什么。

范围变量是存储在特定集合中的值。例如，`FORM`范围存储从 FORM 帖子传递的所有值。`URL`范围存储在 URL 的查询字符串中传递的所有值。

VARIABLES 范围用于 ColdFusion 组件 (CFC)。它用于保持某些 CFC 属性可重用但私有。VARIABLES 范围不仅仅是一个存储所有变量的对象。

查看您的代码，`wlc_period#y`这只是您正在设置的局部变量。我建议将值存储在本地范围内。我喜欢对局部变量使用“LOCAL”：

```
<cfparam name="LOCAL.wlc_period#y#" default="36">

<cfscript>
wlc_period      = LOCAL['wlc_period#y#'];
</cfscript> 
```

您可能也应该范围`y`。

当您像这样正确地确定变量的范围时，您可以避免遇到多个范围具有相同变量的问题。

# ios - 视网膜显示器上的 UIImage 并列中出现奇怪的 arctefact

> ID：11519152
> 
> 赞同：1
> 
> 时间：2012-07-17T08:57:40.847
> 
> 标签：ios, png, openstreetmap, retina-display

我的应用程序中有一个非常奇怪的问题，它只发生在**Retina 显示器**上而**不是模拟器**上。

我开发了一组带有嵌入式openstreetmaps 瓦片（地图）的应用程序。

在每个应用程序中，我都有很多显示在 UIScrollView 中的地图 (256px/256px)。**它在非视网膜**设备和**视网膜模拟器**上完美运行。

问题：每个图块都以随机颜色的最后一行像素出现（大多数时候是黑色）

为了说明，我用设备和模拟器对同一个地方进行了截图。它们组合在一张图片中：

![在此处输入图像描述](../Images/d964e8a06a985135983538d04825ba19.png)

可以看到黑色的像素线不是在图块外，而是在图块的*最后一个像素线*（导致两个屏幕之间没有移位）

甚至更奇怪的是：有时，当瓷砖中的颜色变化很小时，像素线会采用随机元素的颜色，有时根本不会出现！

![在此处输入图像描述](../Images/4c3047de343ed5f3473c34faaad35b11.png)

这里，蓝线、灰线、黑线……

**编辑 ：**

我简化了很多代码，故障只存在于这 2-tiles 加载中：

```
int W = 256;
int H = 256;
NSString * map1 = [[NSBundle mainBundle] pathForResource:@"test1.png" ofType:nil];
NSString * map2 = [[NSBundle mainBundle] pathForResource:@"test2.png" ofType:nil];
UIImageView * pieceOfMap1 = [[UIImageView alloc] initWithFrame:CGRectMake(0, H*0, W, H)];
UIImageView * pieceOfMap2 = [[UIImageView alloc] initWithFrame:CGRectMake(0, H*1, W, H)];
[pieceOfMap1 setImage:[UIImage imageWithContentsOfFile:map1]];
[pieceOfMap2 setImage:[UIImage imageWithContentsOfFile:map2]];
[self.view addSubview:pieceOfMap1];
[self.view addSubview:pieceOfMap2]; 
```

我尝试使用 128x128 @2x 瓷砖，但问题仍然存在！
它可能来自 OpenStreetMaps 图像吗？

我的两个图块可以在这里下载：http: [//dl.free.fr/n08C6JIqW](http://dl.free.fr/n08C6JIqW)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:10:00.653

好的。

我只是在 Photoshop 中打开了两个测试图块，**没有做任何更改**，然后再次保存在 png 中。

黑线不再出现。

所以它来自开放的街道地图PNG图像（要获取其中一张，请访问[http://www.openstreetmap.org/](http://www.openstreetmap.org/)，在地图上右键单击，然后保存图像）

问题得到了*部分解释*，但现在我有 2067 个文件到 Photoshop...

我用谷歌搜索了它，但我没有找到任何可以解释的东西......

如果没有其他解释，我会接受我自己的答案，但如果有人给我一些东西来理解*为什么*，我会很高兴。

# android - 使用共享首选项进行持久登录，这是漏洞吗？

> ID：11519154
> 
> 赞同：4
> 
> 时间：2012-07-17T08:57:44.267
> 
> 标签：android, security

最近我发现许多Android应用程序使用共享首选项进行持久登录，此类应用程序需要用户提供用户名和密码才能首次登录，但此后不需要用户进行任何其他操作。

在极少数情况下，该应用程序会将密码存储在 shared_prefs 文件夹的 login_account.xml 等文件中，一旦用户 root 了他的 Android 手机，其他恶意应用程序可能会读取此文件以获取用户的密码。

在大多数情况下，我发现应用程序会在 shared_prefs 文件夹的 login_account.xml 中存储登录密钥（不是密码），这似乎是安全的，因为恶意应用程序无法窃取密码。但是它仍然可以获取受害者的登录状态，因为他可以用受害者的登录密钥替换他的登录密钥。

我想知道是否有某种方法既可以***保护我们的用户免受登录密钥被盗***，又***不需要我们的用户每次都输入他的密码来加载我们的应用程序***？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T09:12:19.450

设备本质上是不安全的，所以无论你做什么，“邪恶的家伙”总是有可能做某事。绝对没有解决办法。但是，您可以按照 Chirag Raval 的建议在一定程度上降低风险：仅存储登录名和登录成功的事实。我会在有限的时间内添加到仅“自动”登录，然后再次显示登录对话框以重新确认密码。

您可以通过生成手机的签名，在第一次登录时发送它并让服务器发送一个响应字符串来使其更安全一些，您可以使用该字符串随后登录。它会有点安全，因为它很难猜到，它不能在另一部手机上工作，而且它仍然需要密码。为了生成这样的签名，我将连接来自 Build 类的大量字段值、电话的 id 以及可能在 TelephonyManager（家庭网络）中获得的值，然后从中生成摘要。最安全的方法是使用 SHA-1 HMAC（查看 Bouncy castle 库）。

当然，这一切都与一个专门的对手无关：他可以将调试器附加到您的应用程序，跟踪其所有调用并找出签名算法。那是因为正如我在顶部所写的那样，该设备是不安全的。（PS：当客户测试应用程序的安全性时，这实际上发生在我身上）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T09:13:00.333

所以 SharedPreferences，如果在私有模式下正确配置

例子：

```
 SharedPreferences userDetails = getSharedPreferences("userdetails", MODE_PRIVATE); 
```

应该足以保护您的数据，因为只有您的应用程序才能访问该信息。

Android 没有我所知道的更高级的安全措施（我想我在某处读到 Android 4.0 有新的安全措施，但如果你想让你的应用程序被大多数人使用，你现在不能使用它）和加密没用，因为您需要密钥，如果该密钥存储在您的移动设备中，那么它也可能被盗。

您可以做的是：告诉人们不要 Root 他们的 Android 手机，如果手机被盗，那么只需从其他地方更改密码。扎根手机会增加安全威胁，并使 Android 设置的任何“安全性”失效，因此，如果您这样做，就会使自己面临数据盗窃的风险，因此，只有在您愿意冒险并且真正了解自己的情况时才应该这样做是做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T09:02:11.413

> 有一种简单的方法。第一次只需询问用户的用户名和密码，如果登录正确，则仅将 true 标志存储在共享首选项中。因此，下次您只需检查标志，您就会知道用户已经登录或未登录的天气。
> 
> 所以这种方式没有人可以窃取用户密码。

# javascript - jQuery - “触发点击”与“函数调用”？

> ID：11519159
> 
> 赞同：2
> 
> 时间：2012-07-17T08:58:11.097
> 
> 标签：javascript, jquery

假设我有一些绑定到链接的操作（使用 .click 或 .live），我想稍后做同样的事情，但我不想要重复的代码。哪个是正确的方法，为什么？

这个：

```
$('#link').click(function(){
 //do stuff
});

//called later
$('#link').trigger('click'); 
```

或者：

```
$('#link').click(function(){
  do_stuff();
});

//called later
do_stuff();

//defined here
function do_stuff(){
   //do stuff
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:01:46.560

实际上，您只需要区分您是否`event object`在事件处理程序中访问 。另一个区别是被调用的处理程序的*上下文*可能会改变，因此在直接`this`调用时不会指向被调用的处理程序`node`。

如果您正在访问`this`或`event object`，您确实应该使用`.trigger`来执行处理程序。您也可以通过手动调用该方法自己传递所有必需的数据，但为什么要发明轮子。

否则，您可以从可以访问它的任何地方直接调用该函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T09:01:54.487

请注意，根据这两个操作，您的代码中的上下文会有所不同。

在您的匿名回调函数中，`this`将引用被单击的链接。在`do_stuff`它不会。

除此之外，我认为调用一个执行您想做的事情的函数通常在语义上更有吸引力，而不是模拟具有触发听众的副作用的点击。不过，这是我个人的偏好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T09:03:09.240

第一种方法的一个问题是，您还会触发绑定到该控件的任何其他点击事件；你可以用命名空间解决这个问题

```
$('#link').bind('click.mynamespace', function(){ ... });

$('#link').trigger('click.mynamespace'); 
```

或通过使用第二个事件

```
$('#link').bind('do_stuff', function(){ ... });
$('#link').click(function() { $(this).trigger('do_stuff'); }); 
```

但是，我会选择第二个，因为它更简单，前提是您可以对需要调用它的函数进行闭包访问。您不需要额外的函数包装器，顺便说一句：

```
function do_stuff(event) { ... }
$('#link').click(do_stuff);
do_stuff(); 
```

如果在您不再有权访问的闭包中定义函数很有用，请选择第一种方式。

# java - 从上下文映射资源

> ID：11519160
> 
> 赞同：0
> 
> 时间：2012-07-17T08:58:18.663
> 
> 标签：java, spring, servlets, contextpath

我想将我的文件夹从上下文映射到资源文件夹中，例如在 context.xml 中（我想从 src/main/resources 映射文件）

```
<bean class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="alwaysUseFullPath" value="true"/>
    <property name="mappings">
        <props>
            <prop key="/resources/**">staticResources</prop>
        </props>
    </property>
</bean>

<bean id="staticResources" class="org.springframework.web.servlet.resource.ResourceHttpRequestHandler">
    <property name="locations">
        <list>
            <value>classpath:/resources/myFolder/</value>
            <value>/resources/</value>
        </list>
    </property>
</bean> 
```

有`myFolder`许多带有文件的子文件夹和更多子文件夹，但萤火虫说错误 404 并且找不到此类资源

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:28:07.133

最好通过`mvc`命名空间来做到这一点 -

```
<mvc:resources location="/resources/,classpath:/resources/myFolder" mapping="/resources/**" /> 
```

那么你的静态资源应该可以从`http://serverurl/contextpath/resources/*`

# java - JSTL 未在嵌入式 Jetty 实例上运行的 JSP 页面中解析

> ID：11519161
> 
> 赞同：1
> 
> 时间：2012-07-17T08:58:27.360
> 
> 标签：java, servlets, maven, jetty, jstl

如果我将它部署到 Tomcat 或 Jboss 的部署文件夹中，我有一个可以正常工作的 Web 应用程序。我现在要做的是将此应用程序嵌入到 Jetty 容器中。我似乎无法让它工作，因为它吐出与 JSTL 标记库相关的错误。这是显示的错误：

```
Problem accessing /Web/app/localTimestamp. Reason:

    /WEB-INF/views/localTimestamp.jsp(1,62) PWC6188: The absolute uri: http://java.sun.com/jsp/jstl/core cannot be resolved in either web.xml or the jar files deployed with this application

Caused by:

org.apache.jasper.JasperException: /WEB-INF/views/localTimestamp.jsp(1,62) PWC6188: The absolute uri: http://java.sun.com/jsp/jstl/core cannot be resolved in either web.xml or the jar files deployed with this application
    at org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:92)
    at org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:378)
    at org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:172)
    at org.apache.jasper.compiler.TagLibraryInfoImpl.generateTLDLocation(TagLibraryInfoImpl.java:431)
    at org.apache.jasper.compiler.TagLibraryInfoImpl.<init>(TagLibraryInfoImpl.java:240)
    at org.apache.jasper.compiler.Parser.parseTaglibDirective(Parser.java:502)
    at org.apache.jasper.compiler.Parser.parseDirective(Parser.java:582)
    at org.apache.jasper.compiler.Parser.parseElements(Parser.java:1652)
    at org.apache.jasper.compiler.Parser.parse(Parser.java:185)
    at org.apache.jasper.compiler.ParserController.doParse(ParserController.java:244)
    at org.apache.jasper.compiler.ParserController.parse(ParserController.java:145)
    at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:212)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:451)
    at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:625)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:374)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:473)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:377)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:575)
    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:485)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)
    at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:537)
    at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:233)
    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1065)
    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:412)
    at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:192)
    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:999)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
    at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:271)
    at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:98)
    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1157)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:927)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:734)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:575)
    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:485)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)
    at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:519)
    at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:233)
    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1065)
    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:412)
    at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:192)
    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:999)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:111)
    at org.eclipse.jetty.server.Server.handle(Server.java:351)
    at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:451)
    at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:916)
    at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:634)
    at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:230)
    at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:76)
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:611)
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:45)
    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:599)
    at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:534)
    at java.lang.Thread.run(Thread.java:619) 
```

我不明白为什么它无法获取 jstl jar 文件。这是Web应用程序的WEB-INF/lib文件夹中的jar文件

```
 19/06/2012  14:54            62,983 activation-1.1.jar
   19/06/2012  14:53             4,467 aopalliance-1.0.jar
   19/06/2012  14:57            59,590 commons-fileupload-1.2.2.jar
   19/06/2012  14:57           163,151 commons-io-2.1.jar
   19/06/2012  14:54           207,723 commons-lang-2.1.jar
   19/06/2012  14:53            60,686 commons-logging-1.1.1.jar
   19/06/2012  14:54           104,172 jaxb-api-2.2.jar
   19/06/2012  14:54           872,831 jaxb-impl-2.2.jar
   19/06/2012  14:57           414,240 jstl-1.2.jar
   19/06/2012  14:53           367,444 log4j-1.2.14.jar
   19/06/2012  14:53            17,384 slf4j-api-1.5.2.jar
   19/06/2012  14:53             9,501 slf4j-log4j12-1.5.2.jar
   19/06/2012  14:53           331,474 spring-aop-3.1.0.RELEASE.jar
   19/06/2012  14:53            53,079 spring-asm-3.1.0.RELEASE.jar
   19/06/2012  14:53           589,253 spring-beans-3.1.0.RELEASE.jar
   19/06/2012  14:53           829,601 spring-context-3.1.0.RELEASE.jar
   19/06/2012  14:53           106,819 spring-context-support-3.1.0.RELEASE.jar
   19/06/2012  14:53           442,400 spring-core-3.1.0.RELEASE.jar
   19/06/2012  14:53           176,283 spring-expression-3.1.0.RELEASE.jar
   19/06/2012  15:04            61,379 spring-oxm-3.0.6.RELEASE.jar
   19/06/2012  14:53           246,036 spring-tx-3.1.0.RELEASE.jar
   19/06/2012  14:53           540,819 spring-web-3.1.0.RELEASE.jar
   19/06/2012  14:53           572,266 spring-webmvc-3.1.0.RELEASE.jar
   19/06/2012  14:56           493,742 spring-ws-core-2.0.3.RELEASE.jar
   19/06/2012  14:56            92,942 spring-xml-2.0.3.RELEASE.jar
   19/06/2012  14:54            23,346 stax-api-1.0-2.jar
   19/06/2012  14:56           148,522 wsdl4j-1.6.1.jar
   19/06/2012  14:54         1,229,125 xercesImpl-2.9.1.jar
   19/06/2012  14:55           109,318 xml-apis-1.0.b2.jar 
```

这些是 Jetty 入门应用程序中包含的库：

```
16/07/2012  17:35           117,444 javax.el-2.2.3.jar
16/07/2012  17:35            38,863 javax.el-api-2.2.4.jar
16/07/2012  17:35           545,240 javax.servlet.jsp-2.2.3.jar
16/07/2012  17:35            53,124 javax.servlet.jsp-api-2.2.1.jar
16/07/2012  14:03            21,212 jetty-continuation-8.1.0.RC5.jar
16/07/2012  14:03            93,383 jetty-http-8.1.0.RC5.jar
16/07/2012  14:03           101,433 jetty-io-8.1.0.RC5.jar
16/07/2012  14:03            86,238 jetty-security-8.1.0.RC5.jar
16/07/2012  14:03           330,266 jetty-server-8.1.0.RC5.jar
16/07/2012  14:03            95,359 jetty-servlet-8.1.0.RC5.jar
16/07/2012  14:03           268,069 jetty-util-8.1.0.RC5.jar
16/07/2012  14:03           106,926 jetty-webapp-8.1.0.RC5.jar
16/07/2012  14:03            37,919 jetty-xml-8.1.0.RC5.jar
19/06/2012  14:57           414,240 jstl-1.2.jar
19/06/2012  14:53           367,444 log4j-1.2.14.jar
17/07/2012  09:42             6,300 WebJettyServices-0.0.1-SNAPSHOT.jar
16/07/2012  14:03           210,354 servlet-api-3.0.20100224.jar
              17 File(s)      2,893,814 bytes 
```

我认为该错误可能是由于 jar 文件中的冲突。我尝试了以下但没有成功

*   重建没有jstl依赖的war文件
*   在没有 jstl 依赖项的情况下重建了 Jetty Starter 应用程序。
*   在没有 jstl 依赖项的情况下重建两者

我现在卡住了，因为我不知道如何测试。以下是相关的代码片段。这是 Jetty 启动应用程序的 Maven pom 文件。我发现的一个大问题是很难真正知道需要哪些依赖项才能使其工作。search.maven.com 似乎没有 org.eclipse.* 依赖项所需的所有 jar 文件。

```
<?xml version="1.0"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <modelVersion>4.0.0</modelVersion>
  <parent>
    <artifactId>WebClient</artifactId>
    <groupId>com.mypackage</groupId>
    <version>0.0.1-SNAPSHOT</version>
  </parent>

  <groupId>com.mypackage</groupId>
  <artifactId>WebJettyServices</artifactId>
  <version>0.0.1-SNAPSHOT</version>

  <name>WebJettyServices</name>
  <packaging>jar</packaging>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <jetty.version>8.1.0.RC5</jetty.version>
    <log4j.version>1.2.14</log4j.version>
    <glassfish.javax.version>2.2.3</glassfish.javax.version>
    <glassfish.javax-impl.version>2.2</glassfish.javax-impl.version>
    <glassfish.javax-jstl.version>1.2.1</glassfish.javax-jstl.version>
    <glassfish.jstl.version>1.2</glassfish.jstl.version>

  </properties>

  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>

   <!--
        <dependency>
            <groupId>org.eclipse.jetty.aggregate</groupId>
            <artifactId>jetty-all-server</artifactId>
            <version>8.1.0.RC5</version>
        </dependency>

         Jetty Webapp -->

    <dependency>
        <groupId>org.eclipse.jetty</groupId>
        <artifactId>jetty-webapp</artifactId>
        <version>${jetty.version}</version>
    </dependency>

    <!-- JSP Support -->
    <dependency>
        <groupId>org.glassfish.web</groupId>
        <artifactId>javax.servlet.jsp</artifactId>
        <version>${glassfish.javax.version}</version>
    </dependency>

    <!-- EL Support -->
    <dependency>
        <groupId>org.glassfish.web</groupId>
        <artifactId>javax.el</artifactId>
        <version>${glassfish.javax.version}</version>
    </dependency>

    <!-- JSTL Support -->
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>${glassfish.jstl.version}</version>
    </dependency>    

        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>${log4j.version}</version>
        </dependency>    
  </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-jar-plugin</artifactId>
                <configuration>
                    <archive>
                        <manifest>
                            <mainClass>com.mypackage.jetty.WebStarter</mainClass>
                            <addClasspath>true</addClasspath>
                        </manifest>                     
                    </archive>
                </configuration>
            </plugin>
        </plugins>  
    </build>
</project> 
```

## 编辑

这是有问题的 JSP 页面

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="stylesheet" href="<c:url value="/styles/btmsm.css"/>"
    type="text/css" />
<title>Local Timestamp</title>
</head>

<body>

    <div id="container" style="width: 800px">

        <div id="header" style="background-color: #EEEEBB;">
            <h1 style="margin-bottom: 0;">Local timestamp</h1>
        </div>  

        <div id="content"
            style="background-color: #EEEEEE; height: 200px; width: 650px; float: left;">
            The local time is ${localTime}          
        </div>  
    </div>

</body>

</html> 
```

以及 web.xml 文件中显示的 Web 应用程序版本

```
<web-app xmlns="http://java.sun.com/xml/ns/j2ee"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="
            http://java.sun.com/xml/ns/j2ee
            http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
        version="2.4"> 
```

如果我将 war 文件直接部署到 Tomcat 或 Jboss 部署文件夹中，则该应用程序确实可以工作。仅在嵌入 Jetty 时才会出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:34:04.890

问题应该是你在你的web.xml中声明了你的应用程序为2.4的web-app，请用2.5或更高版本替换它，这个问题应该可以解决。

替换这个：

```
<web-app xmlns="http://java.sun.com/xml/ns/j2ee"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="
            http://java.sun.com/xml/ns/j2ee
            http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
        version="2.4"> 
```

和：

```
<web-app 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns="http://java.sun.com/xml/ns/javaee"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="YourWebAppID"
    version="2.5"> 
```

请反馈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:06:41.493

也许你的jsp有问题？您能否在导入 JSTL 的地方发布 JSP 部分。这应该与您正在使用的网络版本兼容（请参阅 web.xml） - 所以也请在此处发布相关部分。

也许这只是路径问题或其他什么？

希望这可以帮助

# c# - ms access 数据库运行没有错误，但数据库没有被修改

> ID：11519162
> 
> 赞同：-1
> 
> 时间：2012-07-17T08:58:28.760
> 
> 标签：c#, ms-access

我正在尝试将数据添加到 ms access 数据库，它运行没有错误，但数据库没有被修改。我错了还是我忘记了什么？

```
//using System.Data.OleDb;

private void button2_Click(object sender, EventArgs e)
{
     string conStr = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Projects\Cinema.accdb;Persist Security Info=False;";

     OleDbConnection con = new OleDbConnection(conStr);  
     con.Open(); 
     OleDbCommand cmd = new OleDbCommand("insert into seats(number)" + "Values(1)", con);
     con.Close();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T09:00:16.013

你必须执行你的命令。

```
cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T09:00:46.517

调用[cmd.ExecuteNonQuery()](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbcommand.executenonquery.aspx)怎么样？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T09:01:20.137

您可能应该执行该命令。

在你的情况下：

```
cmd.ExecuteNonQuery(); 
```

# android - Android：LayoutInflater - 添加视图

> ID：11519166
> 
> 赞同：0
> 
> 时间：2012-07-17T08:58:52.930
> 
> 标签：android, listview, android-layout, view, layout-inflater

我有以下代码，见下文。我想以编程方式将视图添加到膨胀的布局中 - 因为视图的大小，我想添加到布局中，取决于我在 ViewTree Observer 中收到的另一个 View 的大小（ViewTree Observer 的预绘制侦听器为您提供使用“fill_parent”时获得布局项大小的机会，因此必须预先绘制才能获得大小）。

我怎样才能做到这一点？LayoutInflater 不提供添加视图的方法。也许我只需要一个提示，我知道如何以编程方式创建视图 - 但在这种情况下如何添加它们？

PS：getView 方法用于ListView。

```
 @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            int type = getItemViewType(position);
            if (convertView == null) {
                switch (type) {
                    case TYPE_ITEM0:
                        convertView = mInflater.inflate(R.layout.event_details_headline, null);
                        TextView toptext = (TextView) convertView.findViewById(R.id.toptext);
                        toptext.setText(mData.get(0).getTitle());

                        final ImageView imageView = (ImageView) convertView.findViewById(R.id.flyer);
                        AwesomeActivity.imageLoader.DisplayRoundedImage(mData.get(0).getFlyerURL(), imageView);

                        final int[] flyerheight = {0};
                        final int[] flyerwidth = {0};
                        final ImageView border = (ImageView) convertView.findViewById(R.id.border);
                        ViewTreeObserver vto = imageView.getViewTreeObserver();
                        vto.addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {
                            public boolean onPreDraw() {

                                flyerheight[0] = imageView.getMeasuredHeight();
                                flyerwidth[0] = imageView.getMeasuredWidth();

                                // Here I want to add an ImageView based on flyerWidth and flyerHeight

                                return true;
                            }
                        });

                        break;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:07:12.180

您需要找到“event_details_headline.xml”文件中使用的最外层类或视图组并将其类型转换为变量。视图只能添加到 ViewGroups 或其子类中。假设线性布局是你的xml中最外层的视图组，你的膨胀代码应该是这样的

```
LinearLayout layout = (LinearLayout)mInflater.inflate(
        R.layout.event_details_headline, null);
layout.addView(YOUR VIEW);
convertView = layout; 
```

这应该有效。

# android - Android - ListView 中的 ImageView 源不正确

> ID：11519167
> 
> 赞同：0
> 
> 时间：2012-07-17T08:59:04.333
> 
> 标签：android, listview

我有一个 ListView，它通过 CursorAdapter 显示来自数据库的一些结果...标题、文本和一个标志，以指示用户是否已经查看过该项目（通过将它们带到另一个屏幕）...基本上如果数据库“已访问”值为 0 它需要在项目旁边显示一个小的“新”图标...如果不是它不应该显示任何图标...

问题是，当它加载列表时，它似乎随机分配标志......访问过的没有标志，但一些未访问过的也错过了标志......

我尝试在 BindView 和 NewView 之间移动“已访问”检查，但得到相同的结果......

我的适配器：

```
public class newsAdapter extends CursorAdapter{

public newsAdapter(Context context, Cursor cursor){

    super(context, cursor);

}

@Override
public void bindView(View view, Context context, Cursor cursor) {

    TextView title = (TextView) view.findViewById(R.id.newsItemTitle);
    TextView text = (TextView) view.findViewById(R.id.newsItemText);

    ImageView newflag = (ImageView) view.findViewById(R.id.newsNewFlag);
    if(cursor.getInt(cursor.getColumnIndex("visited")) == 0){
        Log.i("extra","Not visited yet");
        newflag.setImageResource(R.drawable.icon_new);
    }

    title.setText(cursor.getString(cursor.getColumnIndex("title")));
    text.setText(cursor.getString(cursor.getColumnIndex("text"))); iv);
}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    LayoutInflater inflater = LayoutInflater.from(parent.getContext());
    View view = inflater.inflate(R.layout.news_item, parent, false);

    return view;
}

} 
```

我确定数据库中的数据是正确的......提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:19:30.280

试试这个，

在您的以下代码中添加一个 else 块，并在其中将 imageview 设置为不可见/消失。您也可以将 imageresource 设置为 null，但何必呢？

```
if(cursor.getInt(cursor.getColumnIndex("visited")) == 0){
        Log.i("extra","Not visited yet");
        newflag.setImageResource(R.drawable.icon_new);
    } 
```

但是，将其设置为消失可能会影响您的布局。因此，如果您打算使用 GONE，请处理好。

您可以尝试的另一件事是实现 getView() 而不是 newView() 并实现 ViewHolder 模式。它使它更有效率，据我所知，更不容易出错。

# android - 如何从 Play 商店中删除应用程序？

> ID：11519169
> 
> 赞同：21
> 
> 时间：2012-07-17T08:59:06.367
> 
> 标签：android, google-play, publish

我有一些测试应用程序，我从未打算通过[这个网站](https://play.google.com/apps/publish/)发布到官方 Play 商店（又名 Android 市场） 。我需要删除它们并改用新的，因为我也忘记了将测试应用程序的签名密钥放在哪里。

那么，如何从帐户中删除旧的测试应用程序？

我只是不明白为什么他们有这种严格的行为。他们说，如果找不到密钥，应用程序就会成为孤儿。如果应用程序被删除，他们为什么不能只检查服务器并通知用户该应用程序不会获得任何更新，并通过同一发布者为他提供该应用程序的替代方案。

例如：“尊敬的 App1 用户，此应用已被发布者从市场上移除，这是发布者可能替换 App1 的其他应用（或：“这是发布者打算替换 App1 的 App2”）”。

说到测试应用程序，有没有办法将应用程序进行小型发布，以便只有特定帐户才能从市场上下载应用程序？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T22:01:56.340

没有这样的功能可以从开发者控制台中删除应用程序。您可以通过按取消发布按钮将其从 Google Play 商店中删除。

不过，您可以在新的开发者控制台中留下反馈，而 Google 开发者正在对这些反馈做出反应。

我留下了反馈，您也可以这样做：有些人（包括我）添加了他们想要从所有应用程序列表中删除的应用程序。您能否添加一个按钮以从所有应用程序中隐藏（或删除）该应用程序？谢谢。

转到[https://play.google.com/apps/publish/v2](https://play.google.com/apps/publish/v2)并点击右上角的“给我们反馈”橙色按钮。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-17T09:04:27.623

正如 gtumca-MAC 所说，取消发布您的应用程序，它将被删除。

对于仅为测试人员发布您的应用程序，请尝试[hockeyapp](http://hockeyapp.net)。它是一个发布测试版的完整平台，并且还具有许多其他功能。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-17T16:54:16.597

仅当您满足应用程序表单中的所有要求时，才能取消发布应用程序。

所以需要：

*   检查并删除所有翻译语言

*   添加应用程序首次发布时不需要的不同分辨率的图形

*   满足表格的所有其他要求

此过程对客户不友好，但它有效;-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T09:01:38.310

**从 Play 商店取消发布**您的应用，它将被删除

您会在开发人员控制台上找到一个名为**Unpublish的****按钮**，只需单击此处

 **您在 Play 商店中的应用程序

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-24T08:29:56.773

只有您的应用程序之前没有发布过，才能将其删除。在 Google Play 开发者环境中打开您的应用程序信息。位于屏幕右上角的下拉按钮应显示“草稿”。单击它，您将能够删除“尚未发布”的应用程序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-22T16:11:48.757

如果您的应用尚未发布并且您需要将其删除，只需通过电子邮件或 google + 联系 Google Play 开发人员帮助，并为他们提供您要删除的应用程序包名称，他们会很乐意将其删除**

# javascript - 每当单击某些内容时，使用 jquery 删除 iframe

> ID：11519177
> 
> 赞同：2
> 
> 时间：2012-07-17T08:59:41.083
> 
> 标签：javascript, html

每当单击任何内容时，我都想删除 iframe。我把这段代码：

```
 $('*').on('click',function(){
                $('iframe').remove();

     }); 
```

但是，我遇到的问题是 iframe 追逐鼠标。所以基本上，我每次都点击 iframe，.. 由于 iframe 没有点击事件，该脚本将无法工作。

我一直在寻找可以捕获点击事件的任何替代解决方案。并且将使 iframe 消失。Web 应用程序能否识别鼠标左键单击，即使它不必在某物上。

那可以解决我的问题..但是无论我看了多少，我都没有在网上找到解决方案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T15:56:16.693

如果您尝试在**任何**点击时关闭 iframe，那么用不可见的 div 覆盖 iframe 应该可以实现您所追求的。

看看这个 jsfiddle：http: [//jsfiddle.net/6g4KQ/](http://jsfiddle.net/6g4KQ/)

除了这样做之外，没有办法访问 iframe 内的点击 - 除非您可以访问 iframe 的内容，我猜您没有。

# asp.net - ASP.NET 菜单强制单行且不换行

> ID：11519182
> 
> 赞同：0
> 
> 时间：2012-07-17T09:00:13.817
> 
> 标签：asp.net, html, css

我扫描了互联网，奇怪的是，到目前为止没有任何解决方案有效。

我有以下菜单：

Site.Master ASP.NET：

```
<div class="menuBackground">
    <div id="MenuDiv" style="visibility: hidden">
        <asp:Menu ID="SiteMenu" CssClass="menu" IncludeStyleBlock="false" runat="server"
            DataSourceID="NedTreasurySiteMapDataSource" Orientation="Horizontal" OnMenuItemDataBound="SiteMenu_MenuItemDataBound"
            ClientIDMode="Static">
            <StaticItemTemplate>
                <div>
                    <%# Eval("Text") %>
                </div>
            </StaticItemTemplate>
            <DynamicItemTemplate>
                <div>
                    <%# Eval("Text") %></div>
            </DynamicItemTemplate>
        </asp:Menu>
    </div>
</div> 
```

使用这个 CSS：

```
div.menu
{

}

div.menu ul
{
    list-style: none;
    margin: 0px;
    padding: 0px;
    width: auto;
    z-index: 1000;
}

div.menu ul li a, div.menu ul li a:visited
{
    display: block;
    line-height: 1.35em;
    padding: 4px 20px;
    text-decoration: none;
    white-space: nowrap;
    z-index: 1000;
}

div.menu ul li a:hover
{
    text-decoration: none;
    z-index: 1000;
}

div.menu ul li a:active
{
    text-decoration: none;
    z-index: 1000;
} 
```

问题：当浏览器调整为更小的尺寸时，菜单会换行，而我不希望它这样做。我希望它的行为就像内容被裁剪一样，就像一个`overflow: hidden;`，保持在一行中，就像`display: inline`并充当一个块，保持当前的外观。

好的： ![全尺寸，看起来还可以](../Images/7ffc2e8bf181dc1e877f7b2f8cd4c855.png)

坏的： ![小浏览器，看起来很糟糕](../Images/2b974708caf1020d806f18ed8dc6d9b6.png)

我很确定更改`display: block;`to`display: inline-block;`会起作用，但没有。使用`display: inline;`将它们放在一行中，但会弄乱它们的大小，因为它不再表现为一个块。

另外，我尝试添加

```
div.menu ul li
{
    display: inline-block !important;
    white-space: nowrap !important;
} 
```

这也没有成功。

男生女生有什么想法吗？TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:08:01.633

如果您在 menudiv 上放置固定宽度，它应该可以解决您的问题。

谢谢

尼古拉斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:17:03.663

固定宽度`menudiv`，试试看。

# java - Hadoop - 伪分布式模式：输入路径不存在

> ID：11519193
> 
> 赞同：4
> 
> 时间：2012-07-17T09:00:48.870
> 
> 标签：java, hadoop, mapreduce

我是 Hadoop 的新手。我只是以独立模式运行我的 hadoop 应用程序。它工作得很好。我现在决定将其移至伪分布式模式。我如前所述进行了配置更改。显示了我的 xml 文件的片段：

我的 core-site.xml 如下所示：

```
<name>fs.default.name</name>
<value>hdfs://localhost/</value>
</property>
<property>
    <name>hadoop.tmp.dir</name>
    <value>/tmp/hadoop-onur</value>
    <description>A base for other temporary directories.</description>
   </property> 
```

我的 hdfs-site.xml 是

```
<property>
<name>dfs.replication</name>
<value>1</value>
</property> 
```

我的 mapred.xml 是

```
<property>
<name>mapred.job.tracker</name>
<value>localhost:8021</value>
</property> 
```

我运行了 start-dfs.sh 和 start-mapred.sh 的脚本，它开始正常

```
root@vissu-desktop:/home/vissu/Raveesh/Hadoop# start-dfs.sh 
starting namenode, logging to /home/vissu/Raveesh/Hadoop/hadoop-0.20.2/bin/../logs/hadoop-root-namenode-vissu-desktop.out
localhost: starting datanode, logging to /home/vissu/Raveesh/Hadoop/hadoop-0.20.2/bin/../logs/hadoop-root-datanode-vissu-desktop.out
localhost: starting secondarynamenode, logging to /home/vissu/Raveesh/Hadoop/hadoop-0.20.2/bin/../logs/hadoop-root-secondarynamenode-vissu-desktop.out
root@vissu-desktop:/home/vissu/Raveesh/Hadoop# start-mapred.sh 
starting jobtracker, logging to /home/vissu/Raveesh/Hadoop/hadoop-0.20.2/bin/../logs/hadoop-root-jobtracker-vissu-desktop.out
localhost: starting tasktracker, logging to /home/vissu/Raveesh/Hadoop/hadoop-0.20.2/bin/../logs/hadoop-root-tasktracker-vissu-desktop.out
root@vissu-desktop:/home/vissu/Raveesh/Hadoop# 
```

现在我尝试运行我的应用程序：但出现以下错误。

```
root@vissu-desktop:/home/vissu/Raveesh/Hadoop/hadoop-0.20.2# hadoop jar ResultAgg_plainjar.jar ProcessInputFile /home/vissu/Raveesh/VotingConfiguration/sample.txt 
ARG 0 obtained = ProcessInputFile
12/07/17 17:43:33 INFO preprocessing.ProcessInputFile: Modified File Name is /home/vissu/Raveesh/Hadoop/hadoop-0.20.2/sample.txt_modf
Going to process map reduce jobs
12/07/17 17:43:33 WARN mapred.JobClient: Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.
12/07/17 17:43:34 ERROR preprocessing.ProcessInputFile: Input path does not exist: hdfs://localhost/home/vissu/Raveesh/Hadoop/hadoop-0.20.2/sample.txt_modf
root@vissu-desktop:/home/vissu/Raveesh/Hadoop/hadoop-0.20.2# 
```

应用程序最初从路径中获取一个文件，然后对其进行修改并创建一个 sample.txt_modf，该文件必须由 map reduce 框架使用。在独立模式下运行时，我给出了绝对路径，因此很好。但我无法弄清楚应该在路径 api 中为 hadoop 指定的路径是什么。如果我提供文件，它会添加 hdfs://localhost/ ..所以我不确定如何在伪分布式模式..我应该简单地确保在该位置创建修改后的文件..

我的查询是关于如何提及路径..

包含路径的片段是

```
 KeyValueTextInputFormat.addInputPath(conf,
                new Path(System.getProperty("user.dir")+File.separator+inputFileofhits.getName()));
        FileOutputFormat.setOutputPath(
                conf,
                new Path(ProcessInputFile.resultAggProps
                        .getProperty("OUTPUT_DIRECTORY"))); 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T10:51:25.517

这个文件是否存在于 HDFS 中？看起来您已经提供了文件的本地路径（HDFS 中的用户目录通常植根于 /user 而不是 /home。

您可以通过键入以下内容检查文件是否存在于 HDFS 中：

```
#> hadoop fs -ls hdfs://localhost/home/vissu/Raveesh/Hadoop/hadoop-0.20.2/sample.txt_modf 
```

如果这不返回任何内容，即文件不在 HDFS 中，那么您可以使用 hadoop fs 命令再次复制到 HDFS：

```
#> hadoop fs -put /home/vissu/Raveesh/Hadoop/hadoop-0.20.2/sample.txt_modf hdfs://localhost/user/vissu/Raveesh/Hadoop/hadoop-0.20.2/sample.txt_modf 
```

请注意，HDFS 中的路径植根于 /user，而不是 /home。

# vb.net - 如何使用 vb.net 形式删除 MS 访问数据库的记录以及如何使用 vb.net 形式进入受密码保护的数据库

> ID：11519195
> 
> 赞同：2
> 
> 时间：2012-07-17T09:00:57.950
> 
> 标签：vb.net, ms-access-2007

我是 vb.net 的新手，我还是个学生。我创建了一个表格来在 vb.net 中输入学生注册详细信息，只是为了满足教育需要。我使用 MS Access 2010 创建了一个数据库并将其链接到我的 vb 表单。它工作正常，我可以通过 vb.net 应用程序将详细信息输入到我的访问数据库，但我无法处理以下任务。

1）使用主键删除数据库记录（我的数据库“学生号”的主键这是我的代码；请纠正我执行此任务：

```
Imports System.Data.OleDb
Public Class Form1

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Dim con As OleDbConnection
        Dim com As OleDbCommand
        con = New OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source= C:\Users\Pasindu\Documents\database9.accdb")
        com = New OleDbCommand("delete from Table1 where Student number =@sno", con)
        con.Open()
        com.Parameters.AddWithValue("@sno", TextBox1.Text)
        com.ExecuteNonQuery()
        MsgBox("Record Deleted")
        con.Close()
    End Sub
End Class 
```

2) 我想使用密码保护我的数据库，并使用密码加密我的 MS Access 数据库。所以我只需要在保护我的数据库时知道对我的代码的修改，因为我无法使用我以前的代码更新我的数据库..这是我以前的代码来将数据输入到访问数据库..如果有代码可以正常工作不是受密码保护的数据库。

```
Imports System.Data.OleDb
Public Class Form1

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Dim con As OleDbConnection
        Dim com As OleDbCommand
        con = New OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source= C:\Users\Pasindu\Documents\database9.accdb;")
        com = New OleDbCommand("insert into table1 values(@sno,@sname,@nic)", con)
        con.Open()
        com.Parameters.AddWithValue("@sno", TextBox1.Text)
        com.Parameters.AddWithValue("@sname", TextBox2.Text)
        com.Parameters.AddWithValue("@nic", TextBox3.Text)
        com.ExecuteNonQuery()
        MsgBox("record added")
        con.Close()
    End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T09:09:43.143

要使用密码打开 MS Access 数据库保护，您需要更改连接字符串

```
"Provider=Microsoft.ACE.OLEDB.12.0;" + 
"Data Source=C:\Users\Pasindu\Documents\database9.accdb;" + 
"Jet OLEDB:Database Password=MyDbPassword;" 
```

其中 MyDbPassword 应替换为正确的字符串

对于您问题的删除部分，我将尝试更改命令

```
delete * from Table1 where [Student number]=@sno 
```

如果您的字段名称包含空格，则用方括号将名称封装起来

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-30T20:19:10.637

双击表单并添加以下代码

```
Dim con As New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Users\Administrator\Documents\Project.mdb")
Dim sql = "select ShopperID from Shopper"
Dim command As New OleDbCommand(sql, con)
Dim da As New OleDbDataAdapter(command)
Dim dt As New DataTable
Try
  con.Open()
  da.Fill(dt)
  Dim x As Integer
  For x = 0 To dt.Rows().Count
    ComboBox1.Items.Add(dt.Rows(x).Item("ShopperID").ToString)
  Next
Catch ex As Exception
End Try 
```

双击按钮并添加下面的代码

```
Dim con As New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Users\Administrator\Documents\Project.mdb")
Dim sql = "delete from Shopper where ShopperID='" & ComboBox1.SelectedValue & "'"
Dim command As New OleDbCommand(sql, con)
Dim da As New OleDbDataAdapter(command)
Dim dt As New DataTable
Try
  con.Open()
  da.Fill(dt)
  command.ExecuteNonQuery()
  con.Close()
  MessageBox.Show("Reocrd Deleted")
Catch ex As Exception
End Try 
```

# asp.net-mvc-3 - 保存按钮单击功能在 mvc3 中不起作用？

> ID：11519198
> 
> 赞同：1
> 
> 时间：2012-07-17T09:01:17.293
> 
> 标签：asp.net-mvc-3, c#-4.0

大家好，我有一个表格，我有一个编辑项目链接......当我点击它时，它会将我带到一个编辑页面，我有用于编辑记录的文本框和一个保存按钮..但我点击保存按钮不工作任何人都可以帮助我我在哪里做错了这是我的代码

这是我的`Edit.aspx`页面：

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<Gridview_BugTracker.Models.BugTracker_DataHelper>" %>
<!DOCTYPE html>

<html>
<head runat="server">
 <title></title>
        <%: ViewBag.Title="Edit" %>
</head>
<body>
        <div>
             <% using (Html.BeginForm())
                 { %>
        <form action="Edit.aspx" method="post"></form>

        <%:Html.ValidationSummary(true)%>
        <fieldset>
                <legend>Projects</legend>

             <%:Html.HiddenFor(model => model.ProjectId)%>

                <div class="editor-label">
                     <%:Html.LabelFor(model => model.projectName)%>
                </div>
                <div class="editor-field">
                        <%:Html.EditorFor(model => model.projectName)%>
                        <%:Html.ValidationMessageFor(model => model.projectName)%>
                </div>

                <div class="editor-label">
                        <%:Html.LabelFor(model => model.Description)%>
                </div>
                <div class="editor-field">
                        <%:Html.EditorFor(model => model.Description)%>
                        <%:Html.ValidationMessageFor(model => model.Description)%>
                </div>

                <div class="editor-label">
                        <%:Html.LabelFor(model => model.status)%>
                </div>
                <div class="editor-field">
                        <%:Html.EditorFor(model => model.status)%>
                        <%:Html.ValidationMessageFor(model => model.status)%>
                </div>
                <p>
                        <input type="submit" value="Save" />
                </p>
        </fieldset>
<%} %>
                <%: Html.ActionLink("Back to List", "Index")%>
        </div>      
</body>
</html> 
```

* * *

这是我的控制器功能：

```
[AcceptVerbs(HttpVerbs.Get)]
public ActionResult Edit(int id, BugTracker_DataHelper updatemodel)
{
    SqlConnection editconn = new SqlConnection(@"Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=BugTracker;Data Source=SSDEV6\SQLEXPRESS");
    {
            editconn.Open();
            SqlCommand ecmd = new SqlCommand("Select ProjectId,projectName,Description,status From Projects Where ProjectId=" + id, editconn);                 
            SqlDataReader dr = ecmd.ExecuteReader();
            if (dr.Read())
            {
                    updatemodel.ProjectId = Convert.ToInt16(dr["ProjectId"]);
                    updatemodel.projectName = dr["projectName"].ToString();
                    updatemodel.Description = dr["Description"].ToString();
                    updatemodel.status = dr["status"].ToString();
            }
            else
            {
                    dr.Close();
            }
            dr.Close();
            editconn.Close();
            return View(updatemodel);
    }
}

[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Edit(BugTracker_DataHelper updatemodel, FormCollection collection, int id)
{
    SqlConnection editconn = new SqlConnection(@"Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=BugTracker;Data Source=SSDEV6\SQLEXPRESS");
    {

            SqlCommand ecmd = new SqlCommand("EditGetList", editconn);
            ecmd.CommandType = CommandType.StoredProcedure;
            editconn.Open();
            ecmd.Parameters.Add("projectID", SqlDbType.Int).Value = updatemodel.ProjectId;
            ecmd.Parameters.Add("projectName", SqlDbType.VarChar).Value = updatemodel.projectName;
            ecmd.Parameters.Add("Description", SqlDbType.VarChar).Value = updatemodel.Description;
            ecmd.Parameters.Add("Status", SqlDbType.VarChar).Value = updatemodel.status;
            editconn.Close();   

            return View(updatemodel);
    }
} 
```

* * *

当我单击 aspx 页面中的保存按钮时，它应该转到我的控制器中的编辑方法.....我在这里做错了什么............

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:44:04.413

你应该有两种形式吗？

```
<% using (Html.BeginForm())
{ %>
     <form action="Edit.aspx" method="post"></form> 
```

或者您是否尝试设置 BeginForm 的操作？

您按下的按钮实际上是第一种形式的一部分，而不是第二种形式。

所以这

```
 <form action="Edit.aspx" method="post"></form> 
```

目前做的不是很多。

如果您希望保存按钮在第二种表单中执行某些操作，那么您需要将按钮放在表单标签内，如下所示：

```
 <form action="Edit.aspx" method="post">
    <input type="submit" value="Save" />
 </form> 
```

# sql - SQl 查询：每个公司的最后一个日期？

> ID：11519204
> 
> 赞同：0
> 
> 时间：2012-07-17T09:01:21.843
> 
> 标签：sql, database

我有一个包含 3 列的表`Company`，`DateTime`并且`Price`.

我想按每个公司的日期排序最后一行，例如

```
Google, 2012/7/17 5:24:32, 23
Google, 2012/7/17 5:46:23, 72
Google, 2012/7/17 5:43:46, 15
Apple, 2012/7/17 5:24:45, 36
Apple, 2012/7/17 5:26:42, 57
Apple, 2012/7/17 5:15:12, 25 
```

期望的结果是：

```
Google, 2012/7/17 5:46:23, 72
Apple, 2012/7/17 5:26:42, 57 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:05:38.387

如果您的 DBMS 是`SQL-Server`（至少 2005 年），您可以使用`CTE`with[`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)函数：

```
WITH CTE AS(
    SELECT Company, DateTime, Price
    , RN = ROW_NUMBER()OVER(PARTITION BY Company ORDER BY DateTime DESC)
    FROM Table
)
SELECT Company, DateTime, Price
FROM CTE
WHERE RN = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:03:53.633

这是一个与 DBMS 无关的解决方案，无论您使用什么 DBMS（因为您没有指定）都应该工作：

```
SELECT a.*
FROM tbl a
INNER JOIN
(
    SELECT company, MAX(datetime) AS maxdate
    FROM tbl
    GROUP BY company
) b ON a.company = b.company AND a.datetime = b.maxdate
ORDER BY a.datetime DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T09:04:28.247

```
select 
    Company, DateTime,Price 
from
    (
    select *,row_number() over (Partition by Company order by Date desc) as sno 
      from table
    ) as t
where sno=1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T09:21:29.860

一个简单的：

```
select company, MAX(datetime), price 
from table_name
group by company; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T09:09:54.987

尝试这个

```
select t.* from <table> t join
(select Company,max(DateTime) max_DateTime
from <table>
group by Company)a
on t.Company=a.Company
and t.DateTime=a.max_DateTime 
```

# asp.net-mvc-3 - 缓慢加载第一页 - ASP.NET MVC

> ID：11519205
> 
> 赞同：3
> 
> 时间：2012-07-17T09:01:34.520
> 
> 标签：asp.net-mvc-3, entity-framework, ninject, mvc-mini-profiler

我为我的页面使用了 miniprofiler，因为我认为我的第一页和其他一些页面的加载时间很长。我从 miniprofiler 开始，但我认为它是非常好的工具。我有这个结果：

*   `http://localhost:50783/` 192.2 +0.0

    *   从数据库中获取文章 2.2 +186.9
    *   查找：索引 866.4 +190.9
    *   渲染：索引 1839.0 +1058.1

        *   查找：_Article 530.0 +2809.0
        *   部分渲染：_Article 64.3 +3339.2
        *   部分渲染：_Article 8.2 +3404.2
        *   部分渲染：_Article 12.5 +3413.0
        *   部分渲染：_Article 8.7 +3426.2
        *   部分渲染：_Article 7.9 +3435.4
        *   部分渲染：_LeftMenu 64.8 +3520.4
        *   部分渲染：_LogOnPartial 3.3 +3556.3
        *   部分渲染：_RightMenuTest 2530.1 +3591.2
        *   部分渲染：_NextMatch 3.5 +4088.7
        *   部分渲染：_Standings 4.7 +4226.5
        *   部分渲染：_Footer 21.2 +6137.4

任何人都可以帮助我减少查找的时间吗？这是什么意思？我知道 RightMenuTest 的时间最长，我也在努力减少它。我在那里有很多我自己的助手，我认为这是部分视图_RightMenuTest 的问题。所以我需要帮助减少其他时间。

谢谢

编辑：

_文章：

```
@model SkMoravanSvitavka.Models.Article
<h3>@Html.ActionLink(Model.Title, "Zobrazit", "Clanek", new { id = Model.ArticleID }, null)</h3>

    <p>@Html.Raw(Html.ArticleImageToSmall(Html.Article(Model.Text))) </p>

@Html.ActionLink("Počet komentářů:" + Model.Comments.Count, "Zobrazit", "Clanek", new { id = Model.ArticleID }, null) 
```

文章索引视图：

```
@model IEnumerable<SkMoravanSvitavka.Models.Article>
@{
    ViewBag.Title = "Sk Moravan Svitávka - oficiální stránky fotbalového klubu";
}
@if (Model != null)
{
    foreach (var item in Model)
    {
        @Html.Partial("_Article", item);
    }
} 
```

文章控制器中的索引：

```
public ActionResult Index()
        {
            var profiler = MiniProfiler.Current;
            using (profiler.Step("Getting articles from database"))
            {
                var model = repo.GetLatestArticles(5);
                return View(model);
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:30:34.347

尝试使用 RenderPartial 而不是 Partial：

```
foreach (var item in Model)
{
    Html.RenderPartial("_Article", item);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T19:13:29.610

确保在项目以发布模式编译时也进行测试。众所周知，ASP MVC 会执行额外的反射以在调试模式下查找视图以获得更全面的调试功能。

# iphone - 如何在iphone的NSString中删除（“”）双引号字符？

> ID：11519206
> 
> 赞同：2
> 
> 时间：2012-07-17T09:01:36.330
> 
> 标签：iphone, ios, replace

> **可能重复：**
> [如何从 NSString 中删除引号？](https://stackoverflow.com/questions/4121478/how-can-i-remove-quotes-from-an-nsstring)

目前我正在使用 iphone 应用程序，这里我使用 NSXmlparser 解析 xml 文件，值来自 NSString 中的城市名称是“Melbourne”，我想删除左右双引号，请任何人帮助这些

谢谢

在这里我试过：

```
myString = @"Melbourne";
NSString *Replace =[myString stringByReplacingOccurrencesOfString:@""" withString:@""]; 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-17T09:04:47.070

这应该这样做：

```
[str stringByReplacingOccurrencesOfString:@"\"" withString:@""]; 
```

# python - Django 视图的 GET 和 POST 部分中的验证令牌

> ID：11519207
> 
> 赞同：0
> 
> 时间：2012-07-17T09:01:36.850
> 
> 标签：python, django

要重置密码，用户应该转到包含令牌的链接：

> example.com/password-change/?token=8125b6da86694a19b5d76f30a04c9db8

鉴于我有以下代码：

```
def _get_and_check_password_recovery_token(request, token_hex):
    try:
        token = tokens.get_token(token_hex)
    except Token.DoesNotExist:
        raise Http404
    if token.is_expired():
        token.delete()
        messages.warning(request,
        'Link you use for password recovery became obsolete. Please, request another one.')
        return redirect(reverse('password_recovery') + '?email=%s' % token.user.email)
    return token

def password_change(request):
    if request.method == 'POST':
        form = forms.PasswordChangeForm(request.POST)
        if form.is_valid():
            token_hex = form.cleaned_data.get('token')
            new_password = form.cleaned_data['new_password']
            if token_hex:
                token_or_response = _get_and_check_password_recovery_token(request, token_hex)
                if isinstance(token_or_response, Token):
                    user = token_or_response.user
                else:
                    return token_or_response
            else:
                ...
            ...
    else:
        token_hex = request.GET.get('token')
        if token_hex:
            token_or_response = _get_and_check_password_recovery_token(request, token_hex)
            if isinstance(token_or_response, Token):
                token_hex = token_or_response.hex
            else:
                return token_or_response
            form = forms.PasswordChangeForm(initial={'token': token_hex})
        else:
            form = forms.PasswordChangeForm() # TODO Authenticated user changes his password.
    return render_template(request, 'accounts/password_change.html', {'password_change_form': form}) 
```

如您所见，必须在密码更改表单呈现之前和用户提交之后检查令牌。所以我调用了`_get_and_check_password_recovery_token(request, token_hex)`2 次方法。它返回响应对象（未找到令牌或不正确）或令牌。而且我对此感到不舒服——这是完全不同的对象。

你们有没有更好的方法来编写这段代码？返回逻辑上不同的对象是否适用于 Python？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:20:09.307

由于这是一种常见的使用模式，django 将其作为其身份验证应用程序的一部分并在 1.4 中对其进行了增强。请参阅[`password_reset`](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.views.password_reset).

还包括所有常用模板（密码重置电子邮件等）和令牌检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:06:32.387

如果我不能返回令牌，我会提出异常。我会将此令牌验证移至 Token 类方法。

# java - 在Android中以编程方式仅使用“,0123456789”设置edittext？

> ID：11519214
> 
> 赞同：14
> 
> 时间：2012-07-17T09:02:09.893
> 
> 标签：java, android, digits

我的问题是这个。

我可以用xml说

```
android:digits="0123456789," 
```

但这一次我必须通过 java 代码添加它。

```
customEditText.setKeyListener(DigitsKeyListener.getInstance("0123456789,")); 
```

不工作。应用程序给了我与 android:InputType="number" 相同的结果

那么有没有其他方法可以用java说android：digits？

**已编辑**

所以我的问题不是如何`android:InputType="number"`使用 java。

我的问题是我如何才能`android:digits="0123456789,"`使用 java。

在这一点上，我不在乎用户是否可以看到字符。我只希望我的 edittext 字段只接受 0 到 9 的数字和十进制逗号 (,)。

由于 customEdittext 真的是一个自定义的编辑文本，我不能使用 xml atm。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-17T09:16:42.383

尝试`customEditText.setRawInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_DECIMAL);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T09:19:07.603

```
EditText ed;
ed.setInputType(InputType.TYPE_CLASS_NUMBER); 
```

[文档](http://developer.android.com/reference/android/text/InputType.html)也可能有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-23T20:33:42.400

根据 Android 文档`TYPE_NUMBER_FLAG_DECIMAL`应该可以工作[http://developer.android.com/reference/android/text/InputType.html](http://developer.android.com/reference/android/text/InputType.html)

但是它不会，如果您只`TYPE_NUMBER_FLAG_DECIMAL`使用用户也可以输入字母。

但幸运的是，Haresh Chaudhary 提供了正确的答案，两者都必须使用，`TYPE_CLASS_NUMBER`而且`TYPE_NUMBER_FLAG_DECIMAL`. 我尝试了他的解决方案，它奏效了。

尽管我使用了 setInputType 而不是 setRawInput：

```
yourEditText.setInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_DECIMAL); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T09:20:59.160

你试过了`customEditText.setRawInputType(InputType.TYPE_CLASS_NUMBER)`吗？

参考：[输入类型](http://developer.android.com/reference/android/text/InputType.html)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-17T09:25:57.863

尝试将`android:inputType="number"`xml 布局添加到您的`EditText`([链接](http://developer.android.com/reference/android/widget/TextView.html#attr_android:inputType))

# android - 如何在 Android 4.0 和 3.0 中以编程方式启用网络共享

> ID：11519217
> 
> 赞同：1
> 
> 时间：2012-07-17T09:02:10.970
> 
> 标签：android, usb, tethering

我正在开发一个需要使用 USB 网络共享的 android 应用程序（适用于 4.0 版）。但我无法以编程方式打开网络共享。如果有人对此有解决方案，请分享您的想法。谢谢。

# git - 将 svn 补丁应用到 git 存储库

> ID：11519230
> 
> 赞同：44
> 
> 时间：2012-07-17T09:03:14.720
> 
> 标签：git, svn, patch

好的，我已经尝试了所有可以在 stackoverflow 上找到的答案，但显然没有一个能够解决我的问题。我想将 SVN 制作的补丁应用到 git 存储库。显然，最简单的方法是使用“git apply”，但这似乎不起作用。

```
$ git apply --ignore-space-change --ignore-whitespace < xxx_parser.patch

<stdin>:10: trailing whitespace.
        FORCE_LA_CHECK = false; stdin:23: trailing whitespace.

<stdin>:79: trailing whitespace
. 
. 
. 
. 
error: pmd/grammar/JspParser.jjt: No such file or directory 
error: patch failed: pmd/pom.xml:251 
error: pmd/pom.xml: patch does not apply 
```

这是 xxx_parser.patch 的内容：

```
 $ head xxx_parser.patch Index: etc/grammar/JspParser.jjt
 --- etc/grammar/JspParser.jjt   (revision 7704)
 +++ etc/grammar/JspParser.jjt   (working copy) 
```

现在为什么它抱怨它找不到文件 pmd/grammar/JspParser.jjt？

补丁中的路径指向正确的目录。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-07-25T14:51:03.970

我在使用 git 应用 SVN 生成的补丁时遇到了一些问题。我建议直接使用`patch`命令应用任何颠覆补丁，并使用 git 来验证该补丁是否已成功应用。

```
$ patch -p0 < xxx_parser.patch
$ git diff 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-01-07T10:25:28.990

`patch`如果您在命令行中有一个可执行命令，@emcconville 答案就有效。

为他人：

1.  转到 svn 存储库

    `svn diff --git >> gitFormat.patch`

2.  从您的（将此文件复制到）git repo

    `git apply gitFormat.patch`

# php - 发票中的双重征税规则

> ID：11519231
> 
> 赞同：2
> 
> 时间：2012-07-17T09:03:16.313
> 
> 标签：php, magento

不知何故，我们在命令中得到了双重征税规则。

例如这个截图。

![在此处输入图像描述](../Images/4ba5eb5d8275113c15a485fda5e10581.png)

我有点担心第二行。我不明白它是从哪里来的。

我们有 5 个不同税率的 storeview，设置如下： ![在此处输入图像描述](../Images/232ee5c525e55d09c794a45fa230ad2e.png)

对于每个商店视图，我们只更改了“默认税收目的地计算”。例如这个商店视图我们只改变了默认国家： ![在此处输入图像描述](../Images/098bf8aff1965b44d8cc94e1e82a44c4.png)

这是 Magento 中的错误还是我的设置错误？

谢谢你。克，莱克斯

# ios - 单例如何观察核心数据模型的变化？

> ID：11519244
> 
> 赞同：0
> 
> 时间：2012-07-17T09:04:13.760
> 
> 标签：ios

如何使用单例对象观察 CoreData 的变化？

在我的应用程序中，每当用户添加一个新的 CoreData FoodEntry 时，我想通知我的 Singleton 它将总结当天的卡路里总量，然后我的 ViewController 将被通知当天的卡路里总量已经改变并且它可以更新 UI . 所以 Singleton 正在观察 CoreData 上下文，而 viewController 正在观察 Singleton number cruncher 类。

到目前为止，我的计划是实现单例并让它订阅，`NSManagedObjectContextObjectsDidChangeNotification`然后在回调方法中处理数字`handleDataModelChange`......我遇到两个错误

CoreData：错误：严重的应用程序错误。在核心数据更改处理期间捕获到异常。这通常是`NSManagedObjectContextObjectsDidChangeNotification`.

`+[FitWrench handleDataModelChange:]:`无法识别的选择器发送到类 0x27a58

我设置了一个异常断点，当我保存 managedObjectContext 但我无法让它打印出 userInfo...=(

```
@implementation Singleton

+ (Singleton *) sharedInstance
{
    static Singleton *sharedInstance = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sharedInstance = [[Singleton alloc] init];

        // Do any other initialisation stuff here
        AppDelegate *appDelegate = (AppDelegate *) [[UIApplication sharedApplication] delegate];
        NSManagedObjectContext *myManagedObjectContext = appDelegate.managedObjectContext;

        [[NSNotificationCenter defaultCenter] addObserver:self 
                                             selector:@selector(handleDataModelChange:) 
                                    name:NSManagedObjectContextObjectsDidChangeNotification 
                                                   object:myManagedObjectContext];

    });
    return sharedInstance;
}

- (void)handleDataModelChange:(NSNotification *)note;
{
    NSSet *updatedObjects = [[note userInfo] objectForKey:NSUpdatedObjectsKey];
    NSSet *deletedObjects = [[note userInfo] objectForKey:NSDeletedObjectsKey];
    NSSet *insertedObjects = [[note userInfo] objectForKey:NSInsertedObjectsKey];

    // Do something in response to this
    NSLog(@"%@ Objects Updated, %@ Objects Deleted, %@ Objects Inserted",[updatedObjects count],[deletedObjects count],[insertedObjects count]);
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:17:09.970

这行末尾的分号是流氓分号吗...？

```
- (void)handleDataModelChange:(NSNotification *)note; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:29:41.367

很惊讶你在这里没有收到编译错误。NSLog(@"%@ Objects Updated, %@ Objects

```
Deleted, %@ Objects Inserted",[updatedObjects count],[deletedObjects count],[insertedObjects count]); 
```

第一个占位符用于对象，但 [deletedObjects count] 返回 NSUInteger。%i 可能会更好。

# ruby-on-rails - 独角兽说“打开文件读取时出错：权限被拒绝”

> ID：11519245
> 
> 赞同：0
> 
> 时间：2012-07-17T09:04:18.243
> 
> 标签：ruby-on-rails, ruby, permissions, unicorn

我正在运行一个在独角兽上运行的 rails 3 应用程序，时不时地收到以下消息：

> 打开文件进行读取时出错：权限被拒绝

就是这样。我不知道什么文件或什么组件试图打开它。它不会发生在每个请求或我能弄清楚的任何其他外部事件上。

任何想法可能会发生什么或如何尝试解决？

我尝试在我正在使用的所有 gem 上搜索“打开文件时出错”，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:38:10.060

升级到 ubuntu 12.04 后，我开始不时在乘客日志中看到这一点。我把它缩小到一些图像处理，它显然来自 Ubuntu 的`libjpeg-turbo`库补丁。

它正在尝试访问`/proc/self/auxv`以确定某些系统功能，但该 proc 文件似乎并不总是可读的，大概是在删除特权时将进程 setuid() 传递给另一个用户之后。

据我所知，即使失败，图书馆也能工作，所以它不应该引起任何重大问题。

[在https://bugs.launchpad.net/ubuntu/+source/virtualbox/+bug/1014487](https://bugs.launchpad.net/ubuntu/+source/virtualbox/+bug/1014487)似乎有一个相关的错误报告

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-08-08T10:32:02.253

我开始在 Ubuntu 12.04 中运行以下命令

```
sudo apt-get update 
```

运行上述命令后，“打开文件读取时出错：权限被拒绝”已解决。

# .net - 读取 WebBrowser 控件的内容

> ID：11519246
> 
> 赞同：0
> 
> 时间：2012-07-17T09:04:23.287
> 
> 标签：.net, vb.net, browser

我已经对页面进行了 HttpWebRequest 以获取包含要解析的表的页面，但问题是在能够访问表之前需要运行一些 JavaScript。所以现在我想要一个 WebBrowser 控件，让页面加载到 webbrowser 中，然后读取它的 html 内容进行解析！任何抬头我怎么能做到这一点？

此外，当我在 WebBrowser 控件中加载页面时，它会给我一些 javascript 错误，一旦我传递了所有这些错误，它将加载整个页面。反正有没有绕过这些错误？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:35:37.777

你可以设置`ScriptErrorsSuppressed`为真。这会抑制 WebBrowser 控件显示的所有对话框。如果您想选择性地忽略错误，则必须订阅`Window.Error`文档上的事件。有关更多详细信息，请查看[MSDN 页面](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.scripterrorssuppressed.aspx)

或者，您可以使用[Html Agility Pack](http://htmlagilitypack.codeplex.com)。在这种情况下，您根本不必使用 WebBrowser 控件。

例子：

```
 HtmlDocument htmlDocument = null;
    HtmlWeb htmlWeb = new HtmlWeb();
    htmlWeb.PreHandleDocument = new HtmlWeb.PreHandleDocumentHandler((document) => htmlDocument = document );
    htmlWeb.Load(url, "GET");

    foreach (HtmlNode item in htmlDocument.DocumentNode)
    {
        // find your table node
    } 
```

# html - rails 页面预览 haml 和 html

> ID：11519252
> 
> 赞同：1
> 
> 时间：2012-07-17T09:04:40.993
> 
> 标签：html, ruby-on-rails, haml

我有一个这样的页面，有一个`select_tag`用来选择引擎是`nil`或`haml`，如果选择`nil`，body_preview 值是`$('#mail_body').val()`，直接显示html代码。如果选中'haml'， `haml`在mail_body中写代码，body_preview值转换`$(#mail_body.val())`为html，转换haml代码只使用静态方法，不使用ruby动态值。

```
<%= select_tag "engine", "<option></option><option>haml</option>",
                   :onchange => "$('#body_preview').trigger('load');"%>

<%= text_area_tag 'mail_body', nil,
                   :onchange => "$('#body_preview').trigger('load');" %>

<iframe id="body_preview"  
      onload="$('#engine').val() == 'haml' ? "???????" : $('#mail_body').val()">
</iframe> 
```

当引擎为零时

邮件正文

```
#content
  .left.column
    %h2 Welcome to our site!
    %p 2 
```

body_preview

```
#content .left.column %h2 Welcome to our site! %p 2 
```

当引擎是haml mail_body

```
#content
  .left.column
    %h2 Welcome to our site!
    %p 2 
```

我希望 body_preview 是

```
<div id="content">
  <div class="left column">
    <h2>Welcome to our site!</h2>
    <p>2</p>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:08:51.220

您可以使用[haml引擎](http://haml.info/docs/yardoc/Haml/Engine.html)来处理haml。

```
template = File.read('templates/really_cool_template.haml')
haml_engine = Haml::Engine.new(template)
output = haml_engine.render
puts output 
```

# java - 如何删除调试器中 toString() 输出的上限？

> ID：11519261
> 
> 赞同：3
> 
> 时间：2012-07-17T09:04:52.427
> 
> 标签：java, eclipse, debugging

在调试期间，watch/display/inspect 和 variables 视图使用 toString() 来显示对象状态。不幸的是，很长的消息是有上限的。如何删除或更改该限制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T09:12:54.747

在变量选项卡的底部窗口中，右键单击，您将看到一个设置限制的菜单项。将限制设置为 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T09:12:36.723

有人对 Python 提出了类似的问题，答案如下：

[Eclipse 调试上的变量查看器截断字符串值](https://stackoverflow.com/questions/3199611/variables-viewer-on-eclipse-debugging-truncates-the-string-values)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T09:24:26.337

我不知道增加超过 1000 个字符的限制的方法，但是如果您右键单击“变量”窗口中的变量并选择“复制变量”，您可以获得完整的字符串。然后粘贴到您最喜欢的文本编辑器中。

# php - PHP - mysql_query() 出现格式错误的 WHERE 子句问题

> ID：11519262
> 
> 赞同：0
> 
> 时间：2012-07-17T09:04:56.967
> 
> 标签：php, mysql, foreach

我有这个带有水果名称的字符串以及可用的颜色，由`,`. 多个水果细节使用`|`.

```
$string = 'apple,red,green|banana,yellow,green'; 
```

在下面的代码中，我只提取水果名称使用`explode()`. 并使用水果名称从 MySQL DB 中查询记录。

```
foreach ( explode( '|', $string ) as $fruitas ) {
  $data = explode( ',', $fruitas );

  $sql = mysql_query( "SELECT * FROM user WHERE fruits = '$data[0]' ") or die ( mysql_error() );
  while ( $row = mysql_fetch_array( $sql ) ){
    $fruits = $row['fruits'];
    echo $fruits . '<br />';
  }
} 
```

`$data[0]`有果实的名字。

我预计以下输出：

```
APPLE    20
BANANA   20 
```

因为苹果和香蕉在`$string`. 查询应该只提取苹果和香蕉的记录。

我知道我的代码是正确的，但是当我`echo()`提取记录时，什么也没有打印出来！

请帮我找出问题所在。

***** 更新** **找到答案*****

 **** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:10:30.083

改变：

```
$fruits = $row[fruits]; 
```

至

```
$fruits = $row['fruits']; 
```

和

```
echo $fruits . <br /> 
```

至

```
echo $fruits . '<br />'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T09:17:47.843

这不是有效的 PHP，我认为您的代码根本没有运行：

```
echo $fruits . <br /> 
```

调试这样的事情的正确方法是首先使您的代码可解析。然后找出您的查询是否符合您的预期：将 mysql_query() 更改为 print() 并查看您的查询是否正确。您可能正在查询您不希望查询的值，如果可用，您可以在 MySQL 控制台（或通过 phpMyAdmin）中运行查询，以查看它是否返回正确的值。

然后添加调试语句，例如 var_dump($row); 在循环中，看看你是否真的从查询中得到任何东西，然后看看 $fruits 的值是否是你所期望的。

额外：您应该在以后的项目中放弃 mysql 并改用 mysqli 或 PDO。它们都是更现代的数据库，支持占位符等急需的功能。

为了给出更好的答案，您下次还必须包含您的数据库结构。***

# android - Android 电池性能 NmeaListner 与 LocationListner

> ID：11519263
> 
> 赞同：0
> 
> 时间：2012-07-17T09:04:58.433
> 
> 标签：android, gps, nmea

我想使用 NmeaListner 在我的 android 应用程序中获取原始 gps 数据。由于各种原因，我无法将标准位置侦听器用于特定用例。

这会消耗与使用标准位置侦听器相同数量的电池吗？会不会消耗更少？更多的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T22:08:24.733

运行 NMEA 与位置时，它应该消耗相同数量的电池。

电池使用首先来自运行 GPS 接收器、打开接收器无线电和处理修复。NMEA 可能是由您的 gps 接收器在您打开它时生成的，所有 nmea 侦听器所做的就是将该流引导到您可以在您的应用程序中使用它的地方。

# linq-to-sql - 当使用带有变量而不是硬编码字符串的 string.contains 时，EF 4.0 Linq 会生成奇怪的查询

> ID：11519264
> 
> 赞同：1
> 
> 时间：2012-07-17T09:04:59.147
> 
> 标签：linq-to-sql, c#-4.0, entity-framework-4

当我使用以下代码块（C#）时：

```
var query = context.Set.Where(o => o.Email.Contains("Mail@gmail.com"));
var stringQuery = ((System.Data.Objects.ObjectQuery)query).ToTraceString(); 
```

linq 生成以下查询：

```
SELECT *
FROM [SET] AS [Extent1]
WHERE [Extent1].[Email] LIKE '%Mail@gmail.com%' 
```

当我使用以下代码块时：

```
string email = "Mail@gmail.com";
var query = context.Set.Where(o => o.Email.Contains(email));
var stringQuery = ((System.Data.Objects.ObjectQuery)query).ToTraceString(); 
```

linq 生成以下查询：

```
SELECT *
FROM [Set] AS [Extent1]
WHERE [Extent1].[Email] LIKE @p__linq__0 ESCAPE N'~' 
```

如何让 linq 在第一种情况下生成查询而不对字符串进行硬编码，而是作为字符串参数传递？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:25:57.090

你看到的结果应该是这样的。原因是，Linq 正确地将字符串文字识别为硬编码，并假定它不受 SQL 注入和捕获的影响（即它是恒定的，并且在运行延迟查询时不会是不同的值）。

类似地，它正确地识别出变量可以变化，并且它可以是用户输入。它使用参数化查询，这是针对此类情况的建议/最佳实践。

但是，如果您确定要覆盖此最佳实践（因为您知道得更好？）=），那么您可以遍历表达式树以查找变量访问并用 ConstantExpression 替换节点。我相信这会导致 linq 对查询进行硬编码，正如您所观察到的那样。

[MSDN - 表达式树访问者](http://msdn.microsoft.com/en-us/library/bb882521%28v=vs.90%29.aspx)

注意`VisitMemberAccess`方法，看看[ConstantExpression](http://msdn.microsoft.com/en-us/library/system.linq.expressions.constantexpression.aspx) [MemberExpression](http://msdn.microsoft.com/en-us/library/system.linq.expressions.memberexpression.aspx)。

# mysql - MySQL函数选择与查询中的单词顺序相同的记录？

> ID：11519268
> 
> 赞同：0
> 
> 时间：2012-07-17T09:05:07.023
> 
> 标签：mysql

我想获取包含某个子字符串（一组单词）的记录。

我的问题是 MATCH() 返回包含分散在字段中的所有子字符串单词的记录。我不想要这样的记录。

例如：如果子字符串是**“我喜欢苹果”**，MATCH() 会返回如下记录：

*   像苹果
*   我喜欢的苹果
*   我喜欢红苹果

我希望 MySQL 将包含子字符串中所有单词的记录一起返回：Like fields with

*   我喜欢苹果和橘子
*   我喜欢苹果，其实我现在要吃一个

如何在 MySQL 中完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T09:16:26.650

在 MySQL 中，使用“LIKE”运算符。

1> 想要搜索字符串 'I like apples' 作为开头

使用查询 -`column_string LIKE 'I like apples%'`

2> 想要搜索字符串 'I like apples' 作为结尾

使用查询 -`column_string LIKE '%I like apples'`

3> 想在列中的任何位置搜索字符串“我喜欢苹果”

使用查询 -`column_string LIKE '%I like apples%'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T09:07:28.300

您必须使用布尔模式进行全文搜索。

[在手册](http://dev.mysql.com/doc/refman/5.1/en/fulltext-boolean.html)中阅读有关它的更多信息。

然后你可以简单地用引号将你的搜索字符串括起来`"`，你会没事的。

# javascript - Javascript 和灯箱

> ID：11519269
> 
> 赞同：1
> 
> 时间：2012-07-17T09:05:11.067
> 
> 标签：javascript, jquery

我想将 Lightbox 添加到由 Javascript 输出的图像中。图像链接是动态建立的，所以这就是我这样做的原因！

我已经看过了，但对已经存在的东西没有运气......

目前的代码是；

```
$("#imgMain img").attr("src","/_images/multi/"+productCode+"/"+imgCodeAlt+"_l.jpg"); 
```

而且我需要以某种方式附加它 rel="lightbox"

提前致谢 ：）

肖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:10:22.447

尝试 ：

**jQuery**

```
$("#imgMain img").attr("rel","lightbox"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T09:13:46.277

尝试使用 -

```
$("#imgMain img").attr({
  src: '/_images/multi/"+productCode+"/"+imgCodeAlt+"_l.jpg',
  rel: 'lightbox'
}); 
```

# jquery - 时钟指针在时钟的每个时间间隔都恢复

> ID：11519271
> 
> 赞同：-1
> 
> 时间：2012-07-17T09:05:16.457
> 
> 标签：jquery, html5-canvas

这是模拟时钟的代码。请检查我的代码并帮助我解决问题....

[http://jsfiddle.net/3rSQE/](http://jsfiddle.net/3rSQE/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:12:18.477

*...每次*绘制时都需要清除画布。

在这种情况下，如果没有像老式游戏那样的 blitting 系统，您甚至无法真正执行脏矩形解决方案。

因此，您需要在每次调用clock() 时调用ctx.clearRect()。...不仅仅是对模拟（）的调用；

另一种解决方案是有两个画布，用 CSS 将它们放在彼此的顶部，让一个保持时钟图像，另一个不断地绘制、清除和重新绘制手臂。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-17T09:46:24.063

基于[这个](http://doc-snapshot.qt-project.org/4.8/script-context2d-scripts-clock-js.html)例子，我做[这个](http://jsfiddle.net/DgRTu/)似乎工作，检查你的代码的差异。

# php - 从对象数组变量调用静态方法

> ID：11519272
> 
> 赞同：15
> 
> 时间：2012-07-17T09:05:16.827
> 
> 标签：php, arrays, object, static

在 PHP 中，您可以从对象实例（包含在数组中）调用类的静态方法，如下所示：

```
$myArray['instanceOfMyClass']::staticMethod(); // works 
```

但是由于某种原因，当我使用该`$this`变量时，会出现解析错误。例如：

```
$this->myArray['instanceOfMyClass']::staticMethod(); // PARSING ERROR 
```

只是为了说明我的意思：

```
class MyClass{
    public static function staticMethod(){ echo "staticMethod called\n"; }
}

$myArray = array();
$myArray['instanceOfMyClass'] = new MyClass;
$myArray['instanceOfMyClass']::staticMethod(); // works

class RunCode
{
    private $myArray;

    public function __construct(){
        $this->myArray = array();
        $this->myArray['instanceOfMyClass'] = new MyClass;
        $this->myArray['instanceOfMyClass']::staticMethod(); // PARSING ERROR
    }
}

new RunCode; 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-17T10:44:53.860

您实际上可以使用“->”来调用静态方法：

```
$this->myArray['instanceOfMyClass']->staticMethod(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-17T10:05:53.680

这是一个非常有趣的问题，它甚至可能是 PHP 本身的一个错误。

要解决此问题，请使用 KISS 原则。

```
class RunCode
{
    private $myArray;

    public function __construct(){
        $this->myArray = array();
        $this->myArray['instanceOfMyClass'] = new MyClass;

        $instance = $this->myArray['instanceOfMyClass']
        $instance::staticMethod();
    }
} 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-17T10:07:56.030

您将不得不使用临时变量分解一个衬里，例如

```
$inst = $this->myArray['instanceOfMyClass'];
$inst::staticMethod() 
```

这是 PHP 的编译器不够聪明，无法理解嵌套表达式的众多情况之一。PHP 开发人员最近一直在改进这一点，但仍有工作要做。

# c# - 延迟主线程并让新线程在加载之前工作

> ID：11519275
> 
> 赞同：0
> 
> 时间：2012-07-17T09:05:36.460
> 
> 标签：c#, .net, multithreading, gridview

我有`win form`加载一些数据并填充`gridview`使用线程的应用程序。在这里填充网格的任务需要一点时间，因此，目前它正在使用单独的线程来完成数据填充任务。因此，目前发生的情况是 Windows 表单最初使用网格加载了一些信息，然后它将数据填充到网格中，同时用户可以使用响应式 UI。

在表单加载中

```
DataBind();
var newThread = new Thread(new ThreadStart(FillGrid));
newThread.Start(); 
```

此`FillGrid()`方法将对每一行和所有列进行处理，并根据值更改单元格颜色并添加一些数据。我想要实现的不是用空数据加载表单，我想填充一半的网格并在加载表单后继续填充网格的其余部分。`Thread.Sleep()`我在调用后尝试使用，`newThread.Start()`但没有达到我的预期。

任何帮助实现这一目标！！！

为了安全地访问，`gridview`我参考了这篇关于[从另一个线程更新表单而不为每种更新类型创建委托的文章](http://www.codeproject.com/Articles/52752/Updating-Your-Form-from-Another-Thread-without-Cre)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:59:46.010

如前所述，使用 BackgroundWorker.ReportProgress。但是您不需要继续更新中途发回的对象（请参阅第二个链接）。

话虽如此，看看是什么导致网格缓慢填充。发回 1/2 的数据只会有一点帮助。仅加载 1/2 的数据，您真正要节省多少时间？现在您有两次 UI 刷新，因此总时间更长。

[在此处输入链接描述](http://msdn.microsoft.com/en-us/library/a3zbdb1t.aspx)

[在此处输入链接描述](https://stackoverflow.com/questions/5459205/background-worker-report-progress-with-string-array)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:05:02.810

在后台线程中，不要触摸网格。相反，仅在某个地方使用它来填充您的数据，某些集合不绑定到网格。

创建 Timer 并在它的事件中将后台线程中填充的集合中的数据拉到 GUI 中。

这样，您就不必担心 Invoke 以及从非 gui 线程与 GUI 对话时遇到的各种问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:06:44.467

这是一个使用后台工作者的非常简单的示例。我希望它为您指明正确的方向。

请注意我如何使用*Me.Invoke()*方法来更新 UI。这是必需的，因为所有 UI 元素都必须从创建它们的线程更新。

```
Public Class Form1
    Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
        BackgroundWorker1.RunWorkerAsync()
    End Sub

    Private Sub BackgroundWorker1_DoWork(sender As System.Object, e As System.ComponentModel.DoWorkEventArgs) Handles BackgroundWorker1.DoWork
        Dim r As New Random()
        For index As Integer = 0 To 100
            Me.Invoke(Sub()
                          ListBox1.Items.Add(Guid.NewGuid().ToString())
                      End Sub)
            Threading.Thread.Sleep(r.Next(50, 300))
        Next
    End Sub

    Private Sub BackgroundWorker1_RunWorkerCompleted(sender As System.Object, e As System.ComponentModel.RunWorkerCompletedEventArgs) Handles BackgroundWorker1.RunWorkerCompleted
        Me.Invoke(Sub()
                      MsgBox("Task Complete", MsgBoxStyle.OkOnly, "Task Complete")
                  End Sub)
    End Sub
End Class 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T09:09:57.340

使用 AutoResetEvent - 让主线程等待，当你有一半填满网格时；向主线程发出信号以继续..

[http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx](http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T09:10:02.977

您应该在读取数据时填充网格。读取辅助线程中的数据，然后在网格中准备好填充数据块时通知 UI 线程。您需要做一些线程杂耍，因为 UI 需要从主线程更新，但这不应该太难。

您也可以尝试使用`BackgroundWorker`, 并在其`ProgressChanged`事件中更新网格。

# forms - Symfony 1.4 后端两种形式合二为一

> ID：11519282
> 
> 赞同：0
> 
> 时间：2012-07-17T09:05:50.213
> 
> 标签：forms, symfony-1.4, yaml, backend

在我的后端，我有一个用于创建客户的表单，但我需要为这些客户分配很少的描述。

现在我有两种形式，一种用于创建和修改有关客户的信息，另一种用于添加或修改分配给该客户的描述行。如果可能的话，我希望创建和修改客户数据和客户描述数据。

我知道如何创建表单和修改默认值，但我不知道如何将模型的两种形式与一对多的关系集成。

我的架构：

```
InfoClient:
  tableName: info_client
  columns:
    id:
      type: integer(4)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: true 
    info_client_type_id:
      type: integer(4)
      notnull: true
    name_info_client: 
      type: string(255)
      notnull: true
      unique: true

  relations:
    InfoClientLine:
      type: many
      local: id
      foreign: info_client_id

InfoClientLine:
  tableName: info_client_line
  columns:
    id:
      type: integer(4)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: true 
    info_client_id:
      type: integer(4)
    texto:
      type: string()
    info_client_line_type_id:
      type: integer(4)
      notnull: true 
```

我使用为 symfony 创建的默认配置文件。以及为 symfony 创建的默认模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T11:23:03.343

您在有关案例[的官方文档中有一个很好的示例](http://www.symfony-project.org/more-with-symfony/1_4/en/06-Advanced-Forms)：具有这种形式的产品的许多照片：

![在此处输入图像描述](../Images/b00df20c5a3f1d661817f0896d5177ab.png)

为你：

*   `Product`->`InfoClient`
*   `Photo`->`InfoClientLine`

# c++ - Qt - 即使 QMainWindow 太小也允许停靠

> ID：11519283
> 
> 赞同：0
> 
> 时间：2012-07-17T09:05:51.077
> 
> 标签：c++, qt, qmainwindow, qdockwidget

我之前的问题没有回答，所以让我改写一下：

无论小部件和窗口的大小如何，都可以`QMainWindow`接受对接吗？`QDockWidget`

目前，如果窗口太小而无法容纳 a 的最小尺寸`QDockWidget`，它将不会停靠。如果主窗口可以增长以适应小部件，那将是理想的。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:47:48.283

上次我对你的问题有一些想法，但我认为我的解决方案并不理想。所以如果你还在苦苦挣扎，我会试着回答。

实际上，让鼠标输入事件和调整主窗口大小没有任何问题。问题是，当您`QDockWidget`从主窗口外部拖动时，后者会失去焦点并且无法处理该事件。

我的想法是在您的`QDockWidget`. 在其实现中，您应该跟踪`QDockWidget`移动和全局光标位置 ( `QCursor::pos()`)。如果光标当前在您的主窗口内并且`QDockWidget`正在移动，则意味着您已将 拖到`QDockWidget`主窗口上，如果其大小小于某个最小大小，则应调整其大小。

# xcode - 为什么我在 Xcode 4.3.3 中找不到 -lz.1.2.3 错误的库？

> ID：11519285
> 
> 赞同：0
> 
> 时间：2012-07-17T09:06:18.810
> 
> 标签：xcode, xcode4, xcode4.3, xcodebuild, ios5

我安装了 Xcode 4.3.3。在我使用 Xcode 3.2.6 之前。现在，当我尝试将我在 Xcode 3.2.6 中制作的应用程序安装到我的 iPhone 4S 时，我收到以下错误：

```
 Ld /Users/me/Library/Developer/Xcode/DerivedData/MyApplication-ezwzjyiebhnsmsgehafwnegjidhu/Build/Products/Debug-iphoneos/MyApplication.app/MyApplication normal armv7
cd "/Users/me/Desktop/Old Data/desktop/UpdatedApp/MyApplication"
setenv IPHONEOS_DEPLOYMENT_TARGET 5.1
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch armv7 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk -L/Users/me/Library/Developer/Xcode/DerivedData/MyApplication-ezwzjyiebhnsmsgehafwnegjidhu/Build/Products/Debug-iphoneos -F/Users/me/Library/Developer/Xcode/DerivedData/MyApplication-ezwzjyiebhnsmsgehafwnegjidhu/Build/Products/Debug-iphoneos -filelist /Users/me/Library/Developer/Xcode/DerivedData/MyApplication-ezwzjyiebhnsmsgehafwnegjidhu/Build/Intermediates/MyApplication.build/Debug-iphoneos/MyApplication.build/Objects-normal/armv7/MyApplication.LinkFileList -dead_strip -miphoneos-version-min=5.1 -framework Foundation -framework UIKit -framework CoreGraphics -framework CFNetwork -framework CoreLocation -framework MediaPlayer -framework MapKit -framework MobileCoreServices -lxml2 -lz.1.2.3 -framework SystemConfiguration -framework MessageUI -o /Users/me/Library/Developer/Xcode/DerivedData/MyApplication-ezwzjyiebhnsmsgehafwnegjidhu/Build/Products/Debug-iphoneos/MyApplication.app/MyApplication

 ld: library not found for -lz.1.2.3
 clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

知道为什么我会收到此错误以及如何解决它。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:27:42.757

尝试从库中删除 libz-1.2.x.dylib 并添加 libz.dylib。

# ssh - gentoo 中的 DBUS_SESSION_BUS_ADDRESS 在哪里？

> ID：11519288
> 
> 赞同：1
> 
> 时间：2012-07-17T09:06:26.983
> 
> 标签：ssh, dbus, gentoo

我有一个通过 ssh 连接到 dbus 并在 ubuntu 中工作的代码，但我必须迁移到 gentoo。在 ubuntu 中，我编写了一个脚本，该脚本找到在其环境中具有 DBUS_SESSION_BUS_ADDRESS 的 dbus 的 pid，并将其源导出，因此我可以 ssh 并且还可以访问目标的 dbus。我在 gentoo 中使用了完全相同的脚本，但它没有找到 dbus 会话。这里有熟悉gentoo和dbus的人可以帮助我吗？我想 ssh 然后在 gentoo 中访问 dbus。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:54:00.893

看起来 dbus 会话通常只与 Gentoo 上的 X 会话一起启动。我只能在这些文件中找到该变量的实例......

*   /etc/X11/xinit/xinitrc.d/80-dbus
*   /etc/xdg/xfce4/xinitrc

话虽如此，我 ssh'd 到一个 Ubuntu 服务器框，变量也没有在那里设置。也许它通常只在桌面版本中设置，或者它可能需要安装一些软件包。

如果您不尝试连接到现有的 dbus 会话，我想您需要做的是启动一个新会话，作为您使用 .bash_profile 或其他方式进行 ssh 登录的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T05:41:58.410

如果您已经启动了 X 会话并想要获取该会话的 DBUS 地址，则它位于`_DBUS_SESSION_BUS_ADDRESS`窗口拥有`_DBUS_SESSION_BUS_SELECTION_[hostname]_[machineid]`选择的属性中。不确定是否有一种简单的方法可以使用 shell one-liner/xlsatoms/xprop 组合来提取它。我有 node.js[脚本](https://github.com/sidorares/node-dbus/blob/master/lib/address-x11.js)，它使用[node-x11](https://github.com/sidorares/node-x11)库为您提供地址

# symfony - 如何在 Mink 中配置 curl 参数？

> ID：11519290
> 
> 赞同：4
> 
> 时间：2012-07-17T09:06:28.947
> 
> 标签：symfony, behat, mink

我正在尝试将 Behat 带入 https 安全项目，并且 mink 在发起 curl 请求时失败。

```
Scenario: Loggin in                              # features/debt.feature:6
    Given I am on "/"                              # FeatureContext::visit()
      [curl] 51: SSL: certificate subject name 'ubuntu' does not match target host name 'wizard' [url] https://wizard/admin/dev.php/ [info] array (
        'url' => 'https://wizard/admin/dev.php/',
        'content_type' => NULL,
        'http_code' => 0,
        'header_size' => 0,
        'request_size' => 0,
        'filetime' => -1,
        'ssl_verify_result' => 1,
        'redirect_count' => 0,
        'total_time' => 0.061943,
        'namelookup_time' => 0.000234,
        'connect_time' => 0.000344,
        'pretransfer_time' => 0,
        'size_upload' => 0,
        'size_download' => 0,
        'speed_download' => 0,
        'speed_upload' => 0,
        'download_content_length' => -1,
        'upload_content_length' => -1,
        'starttransfer_time' => 0,
        'redirect_time' => 0,
        'certinfo' => 
        array (
        ),
      ) [debug] * About to connect() to wizard port 443 (#0)
      *   Trying 127.0.0.1... * connected
      * Connected to wizard (127.0.0.1) port 443 (#0)
      * successfully set certificate verify locations:
      *   CAfile: none
        CApath: /etc/ssl/certs
      * SSL connection using DHE-RSA-AES256-SHA
      * Server certificate:
      *      subject: CN=ubuntu
      *      start date: 2011-05-23 08:26:04 GMT
      *      expire date: 2021-05-20 08:26:04 GMT
      * SSL: certificate subject name 'ubuntu' does not match target host name 'wizard'
      * Closing connection #0 
```

这个问题可以通过设置这两个 curl 参数来解决：

```
CURLOPT_SSL_VERIFYPEER = false
CURLOPT_CERTINFO = false 
```

我知道 Mink 在内部使用 guzzle，它启动 curl 请求。如何使用 curl 选项正确实例化 guzzle 客户端？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T14:08:20.087

是的，这是已知问题，目前唯一的解决方案是您的 behat.yml 中的类似内容：

```
default:
    paths:
        features: .
        bootstrap: %behat.paths.features%/bootstrap    
    extensions:
        Behat\MinkExtension\Extension:
            base_url: http://yourhost/
            goutte:
                guzzle_parameters:
                    ssl.certificate_authority: system
                    curl.options:
                        64: false   # CURLOPT_SSL_VERIFYPEER
                        172: false  # CURLOPT_CERTINFO 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-13T18:50:28.497

现在你需要在 behat.yml 中设置的是：

```
default:
  extensions:
    Behat\MinkExtension\Extension:
      goutte:
        guzzle_parameters:
          curl.options:
             CURLOPT_SSL_VERIFYPEER: 0
             CURLOPT_CERTINFO: 0
             CURLOPT_SSL_VERIFYHOST: 0
          ssl.certificate_authority: system 
```

合并此拉取请求[https://github.com/guzzle/guzzle/pull/498](https://github.com/guzzle/guzzle/pull/498)后，您将能够执行以下操作：

```
default:
  extensions:
    Behat\MinkExtension\Extension:
      goutte:
        guzzle_parameters:
          ssl.certificate_authority: false 
```

请注意，我使用的是字符串常量而不是整数常量，因为它们更具可读性。您不必在这里使用整数，因为正确的常量/整数转换是在 Guzzle 中完成的。

另外，我添加了 CURLOPT_SSL_VERIFYHOST 可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T09:27:29.960

Mink 使用 Goutte，它在内部初始化 Guzzle（参见：[https](https://github.com/fabpot/Goutte/blob/master/Goutte/Client.php#L45) ://github.com/fabpot/Goutte/blob/master/Goutte/Client.php#L45 ）。

以下是初始化 Guzzle 以解决问题的方法：[https ://github.com/fabpot/Goutte/issues/63#issuecomment-6371727](https://github.com/fabpot/Goutte/issues/63#issuecomment-6371727)

虽然有多种方法可以解决这个问题，但我现在能看到的最简单的解决方案是

*   要么实现你自己的类并覆盖behat.mink.goutte.class（见 [https://github.com/Behat/MinkExtension/blob/master/src/Behat/MinkExtension/services/sessions/goutte.xml#L8](https://github.com/Behat/MinkExtension/blob/master/src/Behat/MinkExtension/services/sessions/goutte.xml#L8)）
*   或在某处调用 setClient() 来覆盖客户端（就像[我在上面写的问题](https://github.com/fabpot/Goutte/issues/63#issuecomment-6371727)中一样）。

其他（可能更干净）的方法是使用编译器传递更改服务定义并使其调用 setClient()。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-16T10:03:41.583

我的解决方案：

```
/**
 *
 * @BeforeScenario
 * @return void
 */
public function doNotCheckSsl()
{
    $strUrl = $this->getMinkParameter( 'base_url' );
    $objGuzzleClient = new GuzzleClient( $strUrl );
    $objGuzzleClient->setSslVerification( false, false, 0 );
    $objClient = new GoutteClient();
    $objDriver = new GoutteDriver( $objClient );
    $objClient->setClient( $objGuzzleClient );

    $objSession = new Session( $objDriver );
    $objSession->start();
    $this->getMink()->registerSession( 'sess', $objSession );
    $this->getMink()->setDefaultSessionName( 'sess' );
} 
```

# php - 使用 php 加密 postgres 中的数据

> ID：11519294
> 
> 赞同：1
> 
> 时间：2012-07-17T09:06:41.023
> 
> 标签：php, postgresql

我需要在我的 postgres 数据库中存储一个加密的数字。我想将 mcrypt 与 3DES 功能一起使用，加密和解密工作正常，但我无法将其存储在数据库中。我的数据库字段是`char(50)`.

```
$key = "this is a secret key";
$input = "123456789";

$test = mcrypt_ecb(MCRYPT_3DES, $key, $input, MCRYPT_ENCRYPT);
$db = pg_connect("host=localhost dbname=testdb user=haxo");
$sql = "insert into test (pin) values('".$test."')";
$result = pg_query($sql); 
if (!$result) {
    $errormessage = pg_last_error();
    echo "Error with query: " . $errormessage;
    exit();
} 
pg_close(); 
```

我得到的错误是：`ERROR: unterminated quoted string at or near "'Ÿlä"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:21:33.743

将字段类型设为 BYTEA（用于存储二进制字符串），然后使用诸如 PDO prepare、bindValue、execute 之类的东西来插入值。

另外，你知道[sql注入](http://pl.wikipedia.org/wiki/SQL_injection)吗？您正在使用的编码模式是一个简单的解决方案。

# position - jQuery position() 在每秒刷新一次时始终返回 0

> ID：11519297
> 
> 赞同：0
> 
> 时间：2012-07-17T09:07:00.167
> 
> 标签：position, jquery

我对 jQuery 有一个奇怪的问题，这是我以前从未见过的。

我有一些脚本来计算`position().top`始终在页面上的元素的值。这是一个`li`里面一个`ul`里面一个`div`。

每次我发布新请求时的作品，通常都会返回`300`. 但是，如果我随后点击`ctrl-r`并重做请求，则同一页面的相同代码返回`0`. `position().top`再次刷新可以看到它的工作。

这种情况始终如一地发生，每次`2nd`页面刷新。但是，每个新页面请求（更改参数或只是重新提交表单）似乎都可以正常工作。我还没有目睹这个奇怪的失败循环失序。

## 警告

现在需要注意的是（和一些代码）：我正在使用[easing](http://plugins.jquery.com/project/Easing)和[zebra_datepicker](http://stefangabos.ro/jquery/zebra-datepicker/)插件，并编写了我自己的垂直滑块插件，其中包含始终无法获得我的元素正确位置的代码。

所以我不认为这是一个常见的情况，我也不能发布完整的源代码，所以我发布了一个带有奇怪代码的片段，而不是其他任何东西：

```
// inside each loop for slider parent elements
// $(this) references the slider container, i.e <div>
var slideTo = $(this).find('.slideTo').position().top; //300 or 0 
```

此代码在插件本身中，然后在`$(window).load()`事件中调用。

这种行为方式让我认为这是某种竞争条件，但我在我的代码中找不到任何以错误顺序执行操作或多次运行的东西，相信我已经用调试将它填满了。

## tl;博士

所以我的问题是：如果目标元素存在并且在调用时已加载，是否有任何情况`jQuery.position().top`会返回？`0`

为了实现这一点，我可能会犯什么愚蠢的错误吗？可能是由于无效标记还是与元素是一个事实有关`li`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:15:55.520

这是在 Webkit 浏览器中吗？元素是图像吗？这里需要更多信息，但在基于 Webkit 的浏览器中，您将无法访问 $(window).ready() 上图像的位置值，因为它尚未计算它们的尺寸，您必须等到 $(window)。加载（）

我假设它在第二次加载时起作用的原因是因为图像被缓存了，但是我再次假设你正在使用 Webkit 并且元素是图像......

编辑：抱歉，刚刚意识到你说它在 $(window).load() 中，你可以使用 setTimeOut 继续轮询该值并查看它是否在一段时间后填充？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:11:17.027

您可以使用[parseInt()获取](http://www.w3schools.com/jsref/jsref_parseint.asp)[css()](http://api.jquery.com/css/)值，因此只剩下数字值；

尝试这个：

```
var slideTo = parseInt($(this).find('.slideTo').css('top')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T10:25:22.987

事实证明，这并不*总是*像我想象的那样返回零。

发生的事情是，当我修改`scrollTop`父元素的 ，然后刷新页面时，Firefox*记住*了刷新时的`scrollTop`值 - 所以我的计算返回为零，因为记住的`scrollTop`值，该元素的位置*为零*。

所以这种行为根本不是错误的，并且`position()`正在做它应该做的事情。

我通过在运行这些计算之前将元素的 scrollTop 设置为零来解决这个问题，这阻止了 Firefox 的记忆值对我的破坏。

# javascript - 对我的 JSON 响应进行排序

> ID：11519300
> 
> 赞同：0
> 
> 时间：2012-07-17T09:07:17.633
> 
> 标签：javascript

```
{
    "JsonResult": {
        "List": [{
            "Subject": "Something",
            "Type": 0,
            "TypeDescription": "Referral"
        }],
     }
} 
```

这是我在点击服务时得到的示例 json 响应，之后我有一个带有选项的按钮，例如`Subject, Type and TypeDescription`.

如何根据我发送的参数对 Json 响应进行排序。

```
function sortItems(jsonResponse,paramater){
          var sorted =  jsonResponse.List.sort( function(a, b) {
          var nameA = a.paramater.toLowerCase(),
          nameB = b.paramater.toLowerCase();
          return nameA.localeCompare(nameB);
} 
```

这是我正在使用的排序功能，但它不起作用。我已经有了 JSON 响应，我需要在运行时根据我发送的参数进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:11:26.403

```
function sortItems(jsonResponse, paramater) {
      var sorted =  jsonResponse.JsonResult.List.sort(function(a, b) {
          var nameA = a[paramater].toLowerCase(), //take note, []
          nameB = b[paramater].toLowerCase(); //same here
          return nameA.localeCompare(nameB);
      });
} 
```

第二个参数“参数”是一个字符串，表示要查找的键，而不是直接的字段访问器语句。因此无法使用点运算符从 json 访问它。

另外，请注意：它应该是：

```
jsonResponse.JsonResult.List.sort 
```

不久前，我也想做同样的事情：请参阅此处了解一些技巧：
Stackoverflow: [Sorting array of custom objects in JavaScript](https://stackoverflow.com/questions/10723798/sorting-array-of-custom-objects-in-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:50:03.687

这是给你的一个 Js Fiddle，它会给你一个更深入的洞察力。

[http://jsfiddle.net/spechackers/EdAWL/](http://jsfiddle.net/spechackers/EdAWL/)

```
<script type="text/javascript">
        onerror = function (a, b, c) {
            alert([a, b, c]);
        };
    </script>
<script type="text/javascript">
    var x = {
        "JsonResult": {
            "List": [{
                "Subject": "My book report on J. K. Rowling's <u>Harry Potter</u> series.",
                "Date": "Jan 25th 2009",
                "Type": "Book Report",
                "Class": "English"
            }, {
                "Subject": "My book report on Charles Dickens' <u>Oliver Twist</u> novel.",
                "Date": "May 1st 2003",
                "Type": "Book Report",
                "Class": "English"
            }, {
                "Subject": "My book report on J. R. R. Tolkien's <u>The Lord of the Rings</u> series.",
                "Date": "Aug 7th 2007",
                "Type": "Book Report",
                "Class": "English"
            }, {
                "Subject": "The civil war in a nutshell.",
                "Date": "Feb 26th 2009",
                "Type": "Essay",
                "Class": "History"
            }, {
                "Subject": "How does the republican party manage if we life in a democracy?",
                "Date": "Apr 5th 2010",
                "Type": "Essay",
                "Class": "Government"
            }, {
                "Subject": "A bogus entry",
                "Date": "Jan 1st 2000",
                "Type": "Bogus",
                "Class": "None"
            }, {
                "Subject": "Zombie followers don't prove anything.",
                "Date": "Nov 2nd 2004",
                "Type": "Essay",
                "Class": "Religion"
            }]
        }
    };
</script>
<script type="text/javascript">
    if (typeof Object.prototype.toSource == 'undefined') {
        Object.prototype.toSource = function () {
            return (typeof JSON != 'undefined' && typeof JSON.stringify == 'function') ? JSON.stringify(this) : this.toString();
        };
    }

    function sortItems(jsonResponse, paramater) {
        var sorted = jsonResponse.List.sort(

        function (a, b) {
            var nameA = a[paramater].toLowerCase();
            var nameB = b[paramater].toLowerCase();
            return nameA.localeCompare(nameB);
        });
        return sorted;
    }

    function makeRow(ar) {
        return "<tr><td>" + ar[0] + "</td><td>" + ar[1] + "</td><td>" + ar[2] + "</td><td>" + ar[3] + "</td></tr>";

    }
</script>
<script type="text/javascript">
    var mySortedList = sortItems(x.JsonResult, "Subject");
    //alert(mySortedList.toSource());
    var outTable = "<table>";
    outTable += "<tr><th>Subject</th><th>Date</th><th>Type</th><th>Class</th></tr>";
    for (var i = 0; i < mySortedList.length; i++) {
        outTable += makeRow([mySortedList[i].Subject, mySortedList[i].Date, mySortedList[i].Type, mySortedList[i].Class]);
    }
    outTable += "</table>";
    document.write(outTable);
</script> 
```

# android - 滚动视图不环绕其内容

> ID：11519306
> 
> 赞同：1
> 
> 时间：2012-07-17T09:07:32.570
> 
> 标签：android, listview, scrollview

我遇到了这样的问题：我在它下面有一个 MapView 和一个 ListView。地图大小是固定的。但我需要一起滚动我的视图。我以某种方式处理了非滚动地图和单项列表的问题，但出现了另一个问题 - 在 ScrollView 中，ListView 下方有很多可用空间，我无法摆脱它。我认为将列表设置为“wrap_content”会有所帮助，但事实并非如此。该怎么办？这是我的布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
        android:id="@+id/scrollView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:fillViewport="true">

        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <com.package.MyMapView
                     android:layout_width="match_parent"
                     android:layout_height="100dp"
                     android:clickable="true"
                     android:apiKey="key"
                     android:id="@+id/map"
                     android:layout_gravity="top"/>
        <ListView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:id="@+id/channelsList" >

        </ListView>

    </LinearLayout>

    </ScrollView>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:12:15.677

**将ListView**包装在**ScrollView**中始终不是一个好主意，因为两者都是可滚动的视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T09:11:02.940

您可以尝试替换这些行：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" > 
```

这些行：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="fill_parent" > 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T09:36:13.470

**不要在 ScrollView 中插入任何 ListView，**这在任何情况下都无法满足您的要求。尝试将 MapView 作为标题添加到您的 ListView 以使其与您的列表一起滚动。

要将 mapView 实现为标头，在您的 java 代码中，只需将其包含`addHeaderView(<your_map_view>)`到您的 listView 组件中。这必须在调用之前`setAdapter()`调用。

# android - 启动默认拨号应用程序时返回数据 - Android

> ID：11519307
> 
> 赞同：1
> 
> 时间：2012-07-17T09:07:34.613
> 
> 标签：android, android-intent

有谁知道 Android 中的默认拨号器应用程序是否返回任何可以在 onActivityResult() 函数中读取的数据？像这样的东西

```
//Button click:
startActivityforResult(new Intent(Intent.ACTION_CALL, Uri.parse("tel:" + number)), 0);

//OnActivityResult
if(resultCode == CALL_NOT_ANSWERED)
   //do sth like try again
if(resultCode == VOICEMAIL_STARTED)
   //bad luck
if(resultCode == CALL_ANSWERED)
   //nice one 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:26:49.267

不确定返回的数据，但如果足以查看是否拨打了电话，您可以使用您拥有的电话号码查询[CallLog.Calls ，并检查上次通话的持续时间。](http://developer.android.com/reference/android/provider/CallLog.Calls.html)

# iphone - EKEvent在iOS5中坏了？

> ID：11519309
> 
> 赞同：2
> 
> 时间：2012-07-17T09:07:37.733
> 
> 标签：iphone, objective-c, cocoa-touch, ekevent

我让我的 EKEvent 工作正常，并在 iOS4 中完美地发布到 Calendar.app。现在突然它在 iOS5 或 6 中不起作用..？

我已经在网上搜索了几个小时，但似乎找不到解决方案？

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"yyyyMMddHHmm"];

NSLog(@"eventDateTime: %@", eventDateTime);

NSDate *date = [dateFormat dateFromString:@"201207202030"];

eventStore = [[EKEventStore alloc] init];
//defaultCalendar = [eventStore defaultCalendarForNewEvents];
venueEvent  = [EKEvent eventWithEventStore:eventStore];
//venueEvent.calendar = Calendar;
venueEvent.title     = event.name;
venueEvent.location = @"The Blvd Tavern";
venueEvent.startDate = date;
venueEvent.endDate   = [[NSDate alloc] initWithTimeInterval:14400  sinceDate:venueEvent.startDate];
EKAlarm *eventAlarm1 = [EKAlarm alarmWithRelativeOffset:-28800];
NSArray *alarmArray = [[NSArray alloc] initWithObjects:eventAlarm1, nil];
venueEvent.alarms = alarmArray;
[venueEvent setCalendar:[eventStore defaultCalendarForNewEvents]];
//[venueEvent setCalendar:defaultCalendar];
NSError *err = [[NSError alloc] init];
[eventStore saveEvent:venueEvent span:EKSpanThisEvent error:&err]; 

NSLog(@"%@", err); 
```

当我运行这段代码时，我一直在输入这个错误日志

> 错误域=EKErrorDomain 代码=1“未设置日历。” UserInfo=0x1cd2a350 {NSLocalizedDescription=没有设置日历。}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T21:52:31.043

您需要先询问用户使用日历的权限，然后才能对其进行修改。试试这个：

`if([eventStore respondsToSelector:@selector(requestAccessToEntityType:completion:)]) { [eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) { // do stuff here } }`

资料来源：[https ://jeboyer.wordpress.com/2012/09/26/handling-access-to-calendars-in-ios-6-2/](https://jeboyer.wordpress.com/2012/09/26/handling-access-to-calendars-in-ios-6-2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T08:02:05.233

```
float version = [[UIDevice currentDevice].systemVersion floatValue];
if(version >= 6.0){        
    EKAuthorizationStatus status = [EKEventStore authorizationStatusForEntityType:EKEntityTypeEvent];
    if(status == EKAuthorizationStatusNotDetermined){
        [store requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error){
            if(!granted){
                Alert!
            }
        }];
    }else if(status == EKAuthorizationStatusDenied){
        Alert!

    }
} 
```

# asp.net - .net 将商品和价格存储在数组中

> ID：11519316
> 
> 赞同：0
> 
> 时间：2012-07-17T09:08:20.293
> 
> 标签：asp.net, vb.net, multidimensional-array

我需要将一个项目及其相应的价格存储到一个数组中，然后显示这些。

例如预订 10.00 的巧克力棒 0.85

我会将商品和价格填充到下拉列表中。在按钮单击事件中，我想将这些选择添加到数组中。

我将如何在 vb.net 中执行此操作？

```
<asp:DropDownList ID="ddlItem" runat="server">
            <asp:ListItem Value="12.49">book</asp:ListItem>
            <asp:ListItem Value="14.99">music</asp:ListItem>
            <asp:ListItem Value="0.85">chocolate bar</asp:ListItem>
            <asp:ListItem Value="10.00">box of chocolates 1</asp:ListItem>
            <asp:ListItem Value="47.50">bottle of perfume 1</asp:ListItem>
            <asp:ListItem Value="27.99">bottle of perfume 2</asp:ListItem>
            <asp:ListItem Value="18.99">bottle of perfume</asp:ListItem>
            <asp:ListItem Value="9.75">headache pills</asp:ListItem>
            <asp:ListItem Value="11.25">box of chocolates 2</asp:ListItem>
</asp:DropDownList> 
```

按钮单击事件中的代码似乎总是覆盖我最初添加的内容。

```
 Protected Sub btnAdd_Click(sender As Object, e As System.EventArgs) Handles btnAdd.Click

        'Add items into an array list
        Dim Item As String = ddlItem.SelectedItem.Text
        Dim Price As Decimal = ddlItem.SelectedValue

        Dim ListItemCollection As ListItemCollection = New ListItemCollection

        ListItemCollection.Add(Item)

        Response.Write(ListItemCollection.Count)

    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:36:58.680

在服务器端/后面的代码上，您应该能够通过名称访问您的 DropDownList；`ddlItem`.

该`ddlItem.Items` [成员](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.items.aspx)公开了一个[ListItemCollection](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listitemcollection.aspx)，而后者又实现了[IEnumerable](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)。

IEnumerable 有一个[ToArray](http://msdn.microsoft.com/en-us/library/bb298736.aspx) [扩展方法](http://msdn.microsoft.com/en-us/library/bb384936.aspx)。因此，它应该像`ddlItem.Items.ToArray()`.

希望有帮助。

**编辑**

阅读您的评论后，我知道我可能误读了您的问题。答案还是很简单的，代码如下：

```
Protected Sub btnAdd_Click(sender As Object, e As System.EventArgs) Handles btnAdd.Click
    Dim selectedItems = ddlItem.Items.Where(Function(n) n.Selected).ToArray()
    Response.Write(selectedItems.Count)
End Sub 
```

# c# - 将行动态添加到 HTML 表

> ID：11519318
> 
> 赞同：2
> 
> 时间：2012-07-17T09:08:31.583
> 
> 标签：c#, asp.net, html-table

我有一个包含一些表格的 asp.net 网站。然而，这些不是 asp:Table 即它们是以这种方式构建的简单 HTML 表：

```
 <table><tr><td></td></tr></table> 
```

现在我想知道是否可以从后面的代码（即 C#）动态地将行添加到该表中，如果可以，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T10:29:01.080

你可以给它一个 Id 并设置 runat="server" 属性，并使用你给它的 Id 从后面的代码中使用它

```
System.Web.UI.HtmlControls.HtmlTableRow r=new System.Web.UI.HtmlControls.HtmlTableRow();
            System.Web.UI.HtmlControls.HtmlTableCell c = new System.Web.UI.HtmlControls.HtmlTableCell();
            c.InnerText = "New Cell";
            r.Cells.Add(c);
            T.Rows.Add(r); 
```

其中 T 是您的表的 ID

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T09:13:25.393

已经有一段时间了，但是 ASP.NET Webforms 中有针对此类东西的转发器控件。

这是一篇介绍这个概念的好文章：[ASP.NET 中的数据重复器控件](http://msdn.microsoft.com/en-us/magazine/cc163780.aspx)

我认为这对你来说比用 AJAX/JScript 破解它更容易

除此之外：Daniel Casserly 是对的 - 如果您在 MVC 中执行此操作非常容易（如果您使用 Razor-Syntax 则更容易），因为它会翻译为：

```
<table>
    @foreach (var item in Model)
    {
        <tr>
            <td>@item.Name</td>
            ... whatever you need here ...
        </tr>
    }
</table> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T09:10:57.120

您可以使用 JQuery 执行此操作，但为此您需要提供 Id 或类，或者只搜索表数组，然后向其中注入行

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T09:14:41.143

是的，您可以：点击此链接：[动态向 HTML 表添加新行](http://forums.asp.net/t/1087746.aspx)

还有这个：[如何使用 C# 将行动态添加到 ASP.NET 表中](http://www.dotnetfunda.com/codes/code1978-how-dynamically-add-rows-into-aspnet-table-using-csharp.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-03T07:50:31.583

`HTML`我认为最好从后面的代码创建整个表。为此，我们可以添加一个文字并在后面的代码中使用它来从后面的代码中添加一个表结构。

例如，让我们制作一张`HTML`鸟类详细信息表。只是为了简短说明，我没有包括填充鸟类详细信息的数据表部分。

```
if (dtBirdsDetail.Rows.Count > 0)
    {
      litBirdsTable.Text = "<center><table id='tbldata' cellspacing='0' cellpadding='1' border='1' style='border-collapse: collapse;'>" + System.Environment.NewLine;
      litBirdsTable.Text += "<tr>";

      //add datatable columns to html table as heading
for (int liColumnIndex = 0; liColumnIndex < dtBirdsDetail.Columns.Count;liColumnIndex++)
       {
         litBirdsTable.Text += "<th>" + dtBirdsDetail.Columns[liColumnIndex].ColumnName 
                             + "</th>" +   System.Environment.NewLine;
       }
       litBirdsTable.Text += System.Environment.NewLine + "</tr>";

       //add datatable rows to html table
       for (int liRowIndex = 0; liRowIndex < dtBirdsDetail.Rows.Count; liRowIndex++)
       {
         litBirdsTable.Text += "<tr>";
         litBirdsTable.Text += "<td>" + dtBirdsDetail.Rows[liRowIndex]["ID"] + "</td>" +              
                                System.Environment.NewLine;
         litBirdsTable.Text += "<td>" + dtBirdsDetail.Rows[liRowIndex]["BirdName"] + " 
                               </td>" + System.Environment.NewLine;
         litBirdsTable.Text += "<td>" + dtBirdsDetail.Rows[liRowIndex]["TypeOfBird"] + " 
                               </td>" + System.Environment.NewLine;
         litBirdsTable.Text += "<td>" + dtBirdsDetail.Rows[liRowIndex]["ScientificName"] 
                             + "</td>" + System.Environment.NewLine;
         litBirdsTable.Text += "</tr>";
       }
        litBirdsTable.Text += "</table></center>";
    } 
```

详细解释请访问此链接：

[http://codevariation.blogspot.com/2018/03/html-table-design-with-dynamic-data.html](http://codevariation.blogspot.com/2018/03/html-table-design-with-dynamic-data.html)

# asp.net-mvc - 实体框架和 AutoMapper - 查询返回视图模型的所有列并且太慢

> ID：11519319
> 
> 赞同：1
> 
> 时间：2012-07-17T09:08:39.537
> 
> 标签：asp.net-mvc, entity-framework, repository-pattern, automapper

我的存储库层用于直接返回 ViewModel，例如

```
public IEnumerable<CommentViewModel> GetComments()
{
   return from c in context.Comments
                 select new CommentViewModel
                 {
                    FirstName = c.FirstName,
                    Comment = c.Comment
                 };
} 
```

然后我读到存储库不应返回视图模型，因此我将其更改为：

```
public IEnumerable<Comment> GetComments()
{
   return from c in context.Comments;
} 
```

然后在服务层中我更改了：

```
public IEnumerable<CommentViewModel> GetComments(int postId)
{
   return _repository.GetComments();
} 
```

至：

```
public IEnumerable<CommentViewModel> GetComments()
{
   var comments = _repository.GetComments();

   return Mapper.Map<IEnumerable<Comment>, IEnumerable<CommentViewModel>>(comments);
} 
```

问题是查询过去需要 7 毫秒，现在需要 85 毫秒！

我哪里错了？

生成的查询曾经是（前 5 个和 order by 在控制器中完成）：

```
SELECT TOP (5) [t0].[FirstName], [t0].[Comment]
FROM [dbo].[Comment] AS [t0]
ORDER BY [t0].[CreateDate] DESC 
```

它现在返回所有列：

```
SELECT 
[Extent1].[Id] AS [Id], 
[Extent1].[FirstName] AS [FirstName], 
[Extent1].[LastName] AS [LastName], 
[Extent1].[DatePosted] AS [DatePosted], 
[Extent1].[Comment] AS [Comment],
[Extent1].[IPAddress] AS [IPAddress]
FROM [dbo].[Comment] AS [Extent1] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T09:23:07.020

您需要在存储库层中调整查询结果，否则 AutoMapper 将从数据库中提取所有记录以映射到视图模型。

```
public IEnumerable<Comment> GetComments(int skip, int count)
{
   return context.Comments.OrderByDescending(c => c.CreateDate).Skip(skip).Take(count);
} 
```

# python - 如何让多个客户端监听服务器发送的事件？

> ID：11519329
> 
> 赞同：1
> 
> 时间：2012-07-17T09:09:18.067
> 
> 标签：python, cherrypy, server-sent-events

我试图了解服务器发送的事件。我网站的其余部分使用cherrypy 提供服务，所以我也想让他们在这个平台上工作。

我用来公开 SSE 的方法：

```
@cherrypy.expose
def interlocked(self, _=None):
    cherrypy.response.headers["Content-Type"] = "text/event-stream;charset=utf-8"
    if _:
        data = 'retry: 400\n'
        while not self.interlockUpdateQueue.empty():
            update = self.interlockUpdateQueue.get(False)
            data += 'data: ' + str(update) + '\n\n'
        return data
    else:
        def content():
            while not self.interlockUpdateQueue.empty():
                update = self.interlockUpdateQueue.get(True, 400)
                data = 'retry: 400\ndata: ' + str(update) + '\n\n'
                yield data
        return content()
interlocked._cp_config = {'response.stream': True, 'tools.encode.encoding':'utf-8'} 
```

在 chrome (win 7) 和 chromium (ubuntu 12.04) 上进行测试，这将为流提供服务，并且使用它的页面工作正常。但是，它一次只能运行一个系统。如果我同时让 chrome 和 chromium 读取流，则只有第一个获取流，另一个获取任何内容。如何让两个系统同时访问流？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:30:15.053

显然我不应该使用`Queue`. 所以我只需要减少我的代码：

```
@cherrypy.expose
def interlocked(self, _=None):
    cherrypy.response.headers["Content-Type"] = "text/event-stream;charset=utf-8"
    if _:
        data = 'retry: 400\ndata: ' + str(self.isInterlocked) + '\n\n'
        return data
    else:
        def content():
            data = 'retry: 400\ndata: ' + str(self.isInterlocked) + '\n\n'
            return data
        return content()
interlocked._cp_config = {'response.stream': True, 'tools.encode.encoding':'utf-8'} 
```

# jquery - 如何在 JS 中访问嵌套的 JSON？

> ID：11519331
> 
> 赞同：1
> 
> 时间：2012-07-17T09:09:19.823
> 
> 标签：jquery, json, getjson

所以我有这个已成功传递给 JS 的 JSON 结构：

```
{
"StepOne": [
    {
        "id": "2",
        "type": "1",
        "description": "How are you feeling?",
        "options": [
            {
                "opt_id": "1",
                "opt_desc": "Good"
            },
            {
                "opt_id": "2",
                "opt_desc": "Perfect"
            },
            .... etc 
```

它一直持续到 PageFive，每个步骤的问题数量从 1 到 4 个不等，每个问题的选项从 null 到大约 10 个不等。我想使用这些信息在 Javascript 中生成多步骤表单，但我不知道如何访问内部数据。我只能找到“PageOne”、“PageTwo”等。我正在使用以下代码来做到这一点：

```
$(document).ready(function()
    {       
        $('#show-results').click(function() 
        {
            $.post('json.php', function(data) 
            {
                var pushedData = jQuery.parseJSON(data);

                $.each(pushedData, function(i, serverData)
                {
                    alert(i);
                })
            })
        })
    }); 
```

现在我尝试了这些函数来获取内部值：

```
var desc = pushedData.PageOne.description;

var desc = pushedData['PageOne']['Description']; 
```

在每个循环中，我尝试过类似的东西

```
var desc = PageOne.description;

var desc = PageOne['description']; 
```

这一切都是*未定义的。*有没有办法像我遍历页面一样遍历每个页面中的每个问题？然后从那里冲洗并重复以迭代每个问题的选项？如果我可以访问每个级别，我应该准备好动态生成民意调查，这是这里的最终目标。

我认为这段代码有什么用（在我发布后立即发现）。虽然不太好用。

```
$(document).ready(function()
    {       
        $('#show-results').click(function() 
        {
            $.post('JSAAN.php', function(data) 
            {
                var pushedData = jQuery.parseJSON(data);

                $.each(pushedData, function(i, stepData)
                {
                    $.each(stepData, function(j, questionData)
                    {
                      // Print question here
                           $.each(questionData, function(k, optionData)
                           {
                                // Print option here
                           })

                    })
                })
            })
        })
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:20:35.050

它需要是

```
jsonData.StepOne[0].description 
```

因为你有一个额外的`[]`数组包装器。

根据您的结构，只需省略附加`[]`，然后您可以直接访问所有对象属性，它应该如下所示：

```
{
"StepOne":
    {
        properties
    },
"StepTwo":
    {
        properties
    }
} 
```

但是，有这样的结构是可以的——现在你必须写`StepOne[x].prop`

```
"StepOne":[
    {
        properties
    },
    {
        other props
    }],
 "StepTwo":[{... 
```

根据您发布的代码，这可能是您想要的，因为您每个步骤都有几个问题（？）。

简单的循环如下所示：

```
for (var key in o) {
  if (o.hasOwnProperty(key)) {
    console.log(key + " -> " + o[key]);
  }
} 
```

嵌套循环更复杂：

```
function loop(obj) {
    $.each(obj, function(key, val) {
        if($.isPlainObject(val) || $.isArray(val)) {

            console.log(key + " is an Object");
            // object or array -> call recursively
            loop(val);

        } else {
           // plain value
           console.log(key + "->" + val);
        }
    });
} 
```

看看**[这个例子](http://jsfiddle.net/poikl/BYWna/)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T09:18:25.650

除了 StepOne !== PageOne 问题：

StepOne 是一个数组，其中包含一个对象。

这对我来说毫无意义，因为在 StepOne 中可能应该只有一步......但这只是我。

所以你必须去：

```
jsonData.StepOne[0].description;
jsonData.StepOne[0].options[0].opt_desc;
jsonData.StepOne[0].options[1].opt_desc; 
```

等等...

# spring - Spring 上下文配置

> ID：11519337
> 
> 赞同：0
> 
> 时间：2012-07-17T09:09:53.147
> 
> 标签：spring, spring-mvc, applicationcontext, configurationsection

我创建了一个 Spring MVC 应用程序。我正在研究弹簧安全概念。因此，我创建了一个上下文配置文件名 webbsite-security.xml，并在上下文配置路径中给出了相同的文件位置。由于异常声明 FILENOTFOUNDEXCEPTION(applicationContext.xml not found)，应用程序失败。即使我们使用其他一些配置文件，是否有必要退出名为 applicationContext.xml 的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:12:31.043

你为什么要称它为其他任何东西，它会违背默认的标准弹簧做事方式。只需将相关配置文件导入默认应用上下文 xml。

但是如果你想改变它，你必须在你的 web.xml 中指定以下内容：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/whatevever.xml</param-value>
</context-param> 

<listener>
<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

# php - 使用 jqPlot ajax 获取具有两个结果的 JSON 数据

> ID：11519339
> 
> 赞同：0
> 
> 时间：2012-07-17T09:09:54.420
> 
> 标签：php, ajax, json, jqplot

我正在从我的数据库中获取一些数据。结果是`[["2011-05-10","1000"],["2011-05-16","5000"]]`，但无法渲染。我得到一个未捕获的异常。`[object Object]`是 FireBug 的输出。这是我的代码：

```
$(document).ready(function(){
  var ajaxDataRenderer = function(url, plot, options) {
    var ret = null;
    $.ajax({
      async: false,
      url: url,
      dataType:"json",
      success: function(data) {
        ret = data;
      }
    });
    return ret;
  };

  var jsonurl = "jsondata.php";

  var plot2 = $.jqplot('chart2', jsonurl,{
    title: "AJAX JSON Data Renderer",
    dataRenderer: ajaxDataRenderer,
    dataRendererOptions: {
      unusedOptionalUrl: jsonurl
    },axes: {
          xaxis: {
              renderer: $.jqplot.DateAxisRenderer,
              min:'January 1, 2011',
              max: 'December 30, 2011',
              tickOptions:{formatString:'%B'}
          },
          yaxis: {
          min: 0,
          tickInterval: 1
          }
      },
  });
}); 
```

提前致谢。

# c# - 我可以在 using() 之外声明一个上下文并仍然调用 Dispose() 吗？

> ID：11519341
> 
> 赞同：2
> 
> 时间：2012-07-17T09:09:57.633
> 
> 标签：c#, garbage-collection, datacontext, using

我有一个类`FooDataContext`，它实现了 Linq 的 DataContext，它有`Dispose()`..

```
public partial class FooDataContext : System.Data.Linq.DataContext {...} 
```

我知道我应该在 a 中声明 fooDataContext `using(<here>){}`，所以会为我调用 Dispose() ，就像这样

```
public void Bar()
{
    using (var fooDataContext = new FooDataContext(ConnStr))
    { // some code
    }
} 
```

但我不知道这是否一样好。是吗？幕后发生了什么？

```
public void Baz()
{
    var fooDataContext = new FooDataContext(ConnStr);
    using (fooDataContext)
    { // some code
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T09:12:37.363

后者的行为方式基本相同，但有一个缺点：您仍然可以在语句`fooDataContext` *之外*`using`引用，尽管它随后被处置。这很少是一个好主意。

所以是的，使用第二个片段是完全合法的——但在几乎所有情况下你都应该更喜欢第一个版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T09:20:52.833

实例化和实例化之间可能会发生异常，`using`特别是如果您添加自定义代码。在 using 中调用构造函数更安全。此外，使用第一个解决方案，您可以防止使用已处置的上下文。

```
public void Baz() 
{ 
    var fooDataContext = new FooDataContext(ConnStr); 
    //Exception here -> fooDataContext not disposed
    using (fooDataContext) 
    { // some code 
    }
    //You can see fooDataContext here
} 
```

如果你真的想在`fooDataContext`之后看到变量`using`，你可以试试这个：

```
public void Baz() 
{ 
    var fooDataContext; 
    using (fooDataContext = new FooDataContext(ConnStr))
    { // some code 
    } 
    //You can see fooDataContext here
} 
```

# ios - 通过 iOS 应用程序访问 mac os 服务器上的文件

> ID：11519344
> 
> 赞同：0
> 
> 时间：2012-07-17T09:10:08.497
> 
> 标签：ios, osx-lion

我正在编写一个需要安全存储的应用程序。我有一个 mac OS lion 服务器，想知道将数据写入服务器上的文件夹是多么容易。为了从我的笔记本电脑访问服务器上的文件/文件夹，我点击了 CMD + k 等，然后出现一个弹出窗口，要求输入用户名和密码。问题是，是否可以在应用程序中嵌入用户名和密码，以便它可以访问此文件，如果可以，如何访问？

# vba - 使用 vba 在模块中以编程方式创建表单

> ID：11519345
> 
> 赞同：16
> 
> 时间：2012-07-17T09:10:08.747
> 
> 标签：vba, excel

我想以编程方式使用 VBA 在模块中创建一个用户表单。我是一个新手，没有经验，所以我尝试了几个例子，但它们没有满足我的要求。

我只想要那个宏

*   使用 VBA 在模块中创建用户表单
*   有一个带有一些数据的 ListBox
*   有一个带有监听器的 CommandButton

这是我使用的代码

```
Option Explicit

Sub MakeuserForm()
'Dim CommandButton1 As MsForms.CommandBarButton
'Dim ListBox1 As MsForms.ListBox
Dim UserForm1 As VBComponent

Set UserForm1 = ActiveWorkbook.VBProject.VBComponents.Add(vbext_ct_MSForm)
With UserForm1
.Properties("Height") = 100
.Properties("Width") = 200
On Error Resume Next
.Name = "My Form"
.Properties("Caption") = "This is your user form"
End With
ShowForm
End Sub

Sub ShowForm() 
NewForm.Show 
End Sub 
```

现在我不知道如何使用侦听器将 ListBox 和按钮添加到表单中。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-18T12:55:54.240

经过努力，我找到了一个非常简单的问题答案。也可以帮助你。

```
Sub CreateUserForm()
Dim myForm As Object
Dim NewFrame As MSForms.Frame
Dim NewButton As MSForms.CommandButton
'Dim NewComboBox As MSForms.ComboBox
Dim NewListBox As MSForms.ListBox
'Dim NewTextBox As MSForms.TextBox
'Dim NewLabel As MSForms.Label
'Dim NewOptionButton As MSForms.OptionButton
'Dim NewCheckBox As MSForms.CheckBox
Dim X As Integer
Dim Line As Integer

'This is to stop screen flashing while creating form
Application.VBE.MainWindow.Visible = False

Set myForm = ThisWorkbook.VBProject.VBComponents.Add(3)

'Create the User Form
With myForm
    .Properties("Caption") = "New Form"
    .Properties("Width") = 300
    .Properties("Height") = 270
End With

'Create ListBox
Set NewListBox = myForm.designer.Controls.Add("Forms.listbox.1")
With NewListBox
    .Name = "lst_1"
    .Top = 10
    .Left = 10
    .Width = 150
    .Height = 230
    .Font.Size = 8
    .Font.Name = "Tahoma"
    .BorderStyle = fmBorderStyleOpaque
    .SpecialEffect = fmSpecialEffectSunken
End With

'Create CommandButton Create
Set NewButton = myForm.designer.Controls.Add("Forms.commandbutton.1")
With NewButton
    .Name = "cmd_1"
    .Caption = "clickMe"
    .Accelerator = "M"
    .Top = 10
    .Left = 200
    .Width = 66
    .Height = 20
    .Font.Size = 8
    .Font.Name = "Tahoma"
    .BackStyle = fmBackStyleOpaque
End With

'add code for listBox
lstBoxData = "Data 1,Data 2,Data 3,Data 4"
myForm.codemodule.insertlines 1, "Private Sub UserForm_Initialize()"
myForm.codemodule.insertlines 2, "   me.lst_1.addItem ""Data 1"" "
myForm.codemodule.insertlines 3, "   me.lst_1.addItem ""Data 2"" "
myForm.codemodule.insertlines 4, "   me.lst_1.addItem ""Data 3"" "
myForm.codemodule.insertlines 5, "End Sub"

'add code for Comand Button
myForm.codemodule.insertlines 6, "Private Sub cmd_1_Click()"
myForm.codemodule.insertlines 7, "   If me.lst_1.text <>"""" Then"
myForm.codemodule.insertlines 8, "      msgbox (""You selected item: "" & me.lst_1.text )"
myForm.codemodule.insertlines 9, "   End If"
myForm.codemodule.insertlines 10, "End Sub"
'Show the form
VBA.UserForms.Add(myForm.Name).Show

'Delete the form (Optional)
'ThisWorkbook.VBProject.VBComponents.Remove myForm
End Sub 
```

# emacs - 自定义 emacs jabber 通知

> ID：11519349
> 
> 赞同：1
> 
> 时间：2012-07-17T09:10:24.150
> 
> 标签：emacs

我使用 jabber 连接到 gmail talk，当我收到一条新消息并且我不在 jabber 窗口中时，我会在模式行中收到通知。

不幸的是，我找不到自定义此消息的方法。默认值对我来说太突兀（理想情况下，模式行中的简单星号以不突兀的颜色就足够了）。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:21:03.347

此代码段将在模式行中为您提供一个简单的通知计数（例如`[42]`）：

```
(eval-after-load "jabber-activity"    
  '(progn
     (setq global-mode-string (delete '(t jabber-activity-mode-string) global-mode-string))
     (add-to-list 'global-mode-string jabber-activity-count-in-title-format))) 
```

# git - 使用git时突然发现bug

> ID：11519353
> 
> 赞同：-4
> 
> 时间：2012-07-17T09:10:31.433
> 
> 标签：git

当我将我的 git 切换到一个分支进行更改时，我突然发现了一个需要修复的错误。我该怎么办？
我是否需要在 Excel 或纸上记录错误，然后在另一个分支中修复它？
如果是这样的话，我认为 git 是愚蠢的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T09:12:24.450

如果我的问题正确，您需要`git stash`，例如

```
# I have some uncommited changes!
git stash
# now I have a clean working directory, without the uncommited changes. 
# fix Your bug, commit push, etc.
git stash pop
# now my uncommited changes are back! Keep working on the feature 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:14:53.033

如果您只需要在另一个分支中修复它，那么创建一个新的克隆并在那里修复它。

# php - 如何在 Zend 中使用来自另一个模型的模型？

> ID：11519356
> 
> 赞同：0
> 
> 时间：2012-07-17T09:10:39.043
> 
> 标签：php, zend-framework, zend-framework-mvc

我有这个结构：

```
application
      controllers
            ...
      models
            acl
                api.php
                ...
            user.php
            ...
      ... 
```

在 user.php 我有 Application_Model_User 类，在 api.php 我有 Application_Model_Acl_Api 类。在 bootstrap.php 我有这个代码：

```
 $resourceLoader = new Zend_Loader_Autoloader_Resource(array(
        'basePath'  => APPLICATION_PATH,
        'namespace' => 'Application',
    ));
    $resourceLoader->addResourceTypes(
        array(
            'model' => array
            ( 'path'      => 'models/acl',
            'namespace' => 'Model_Acl' ),
        )    
    ); 
```

如果在 user.php 中使用`new Application_Model_Acl_Api`它会给我一个错误：“找不到类。” 我该如何解决这个错误？？？

顺便说一句，请不要告诉我放在`include_once('acl/api.php');`文件的开头。这是一个很大的应用程序，如果我这样做，那么我将不得不为每个模型都这样做。

# b-tree - B+树高评估

> ID：11519363
> 
> 赞同：1
> 
> 时间：2012-07-17T09:10:55.700
> 
> 标签：b-tree

假设我有一个分支因子 b=10 的 B+ 树。我想放入 n=9000 个项目。我计算高度为 4-6，假设根是满的。

如果我只将根宽度设为 1 个项目，我可以假设我有 2 个 B+ 树，每个树包含 4500 个项目，以获得 5-7 的高度吗？

# vb.net - 使用 vb.net 将内容写入带有分隔符的记事本

> ID：11519368
> 
> 赞同：-1
> 
> 时间：2012-07-17T09:11:04.080
> 
> 标签：vb.net

我想创建这样的记事本

```
100001|10001|1001|91|9942321400|MR|Hari|Q|PUBLIC|249 MUNDON ROAD|MALDON|FL|44|TN|NO_PROVINCE|600004|IN|M|27304|9942321400|test@test.com|nothing|COMMENTS|1|Southeast
100001|10001|1001|91|9942321400|MR|Hari|Q|PUBLIC|249 MUNDON ROAD|MALDON|FL|44|TN|NO_PROVINCE|600004|IN|M|27304|9942321400|test@test.com|nothing|COMMENTS|1|Southeast
100001|10001|1001|91|9942321400|MR|Hari|Q|PUBLIC|249 MUNDON ROAD|MALDON|FL|44|TN|NO_PROVINCE|600004|IN|M|27304|9942321400|test@test.com|nothing|COMMENTS|1|Southeast
100001|10001|1001|91|9942321400|MR|Hari|Q|PUBLIC|249 MUNDON ROAD|MALDON|FL|44|TN|NO_PROVINCE|600004|IN|M|27304|9942321400|test@test.com|nothing|COMMENTS|1|Southeast
100001|10001|1001|91|9942321400|MR|Hari|Q|PUBLIC|249 MUNDON ROAD|MALDON|FL|44|TN|NO_PROVINCE|600004|IN|M|27304|9942321400|test@test.com|nothing|COMMENTS|1|Southeast 
```

我将每个值都存储在 string 中。

```
dim a string="100001"
dim b as string ="10001"
Dim c As String = "1001"
Dim d As String = "91"
Dim e As String = "MR"
Dim f As String = "Hari"
Dim g As String = "Q"
Dim h As String = "PUBLIC"
Dim i1 As String = "249 MUNDON ROAD" 
```

使用以下代码将内容写入记事本：

```
sw.WriteLine(a & "|" & b & "|" & c & "|" & d & "|" & dumphone & "|" & e & "|" & f & "|" & g & "|" & h 
& "|" & i1) 
```

但我收到错误。请帮我做这个？

> 未为类型“String”和“System.EventArgs”定义运算符“+”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:19:47.357

您确定使用该变量`e`引用的是字符串而不是`System.EventArgs`对象吗？

也许您正在由事件触发的方法中定义过程并且变量被覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T09:20:23.710

您提供的代码不足以重现您的问题，但我强烈假设您在充当事件处理程序的方法中使用此代码，因此具有名为`e`type的参数`EventArgs`。

* * *

解决方案是使用不会被覆盖的其他（也许更有意义的）变量名称。

我还假设您的`a`,`b`等`c`是班级成员。
尽管名称不好，但您可以使用 eg`Me.c`而不是仅`c`在这种情况下访问它们。

* * *

顺便说一句，我还建议使用[String.Join](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx)来连接你的字符串。

```
String.Join("|", a, b, c, d, dumphone, e, f, g, h, i1) 
```

这比阅读更容易

```
a & "|" & b & "|" & c & "|" & d & "|" & dumphone & "|" & e & "|" & f & "|" & g & "|" & & "|" & i1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T09:21:26.960

您已经声明了一个名为“e”的变量。我猜您的代码是在处理事件的方法中运行的（例如 button1.click），而您实际得到的是添加到每个处理程序的变量“e as System.EventArgs”。为您的变量提供与现有变量不冲突的正确名称。我敢肯定你会得到一个错误，比如“e 已经被声明为此方法的参数”。这当然是我在 VS2003 以上看到的。

# javascript - jQuery mCustomScrollbar“scrollTo”不起作用

> ID：11519372
> 
> 赞同：7
> 
> 时间：2012-07-17T09:11:23.227
> 
> 标签：javascript, jquery, mcustomscrollbar

我正在使用一个很好的基本设置，`mCustomScrollbar`除非我调用以下命令：

```
jQuery("#mcs_container").mCustomScrollbar("scrollTo","top"); 
```

什么都没发生。firebug 中没有显示错误，它什么也不做。以前有没有人经历过这种情况，或者有没有人知道为什么会发生这种情况？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T15:47:09.950

MCustomScrollbar 不提供滚动到页面顶部的功能。但是，它确实支持滚动到 HTML 中的特定元素。

例如，如果我在页面顶部有一个 id 为“logout”的元素，我需要在顶部滚动，然后写

```
$("#mcs_container").mCustomScrollbar("scrollTo", "#logout"); 
```

希望您觉得这个有帮助。

干杯!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T18:23:15.090

我遇到了同样的问题，只需计算第一个元素的位置并滚动到该数字即可解决

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-18T03:07:02.707

After searching for a day. Here's what I got:

Tested and working (2019): `$('.demo-yx').mCustomScrollbar('scrollTo',['top',null]);`

From this [link](http://manos.malihu.gr/repository/custom-scrollbar/demo/examples/scrollTo_demo.html). Cheers!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-01T13:00:03.163

```
setTimeout( function () {
   $("#mcs_container").mCustomScrollbar('scrollTo','last');
 }, 100); 
```

超时使用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-27T06:18:11.163

我这样使用，它的工作！

```
// set scrollbar
$('.scroll-y').mCustomScrollbar({
  theme: 'minimal-dark'
});

// then set scrollTo
$('.scroll-y').mCustomScrollbar('scrollTo', 'bottom'); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-04-22T10:06:07.317

你只需要一个 mCustomScrollbar 类.....这是你的答案......

$(".scroller-back").mCustomScrollbar("scrollTo",jQuery("#mcs_container"));

# youtube - 仅为网站用户显示 YouTube 私人视频

> ID：11519374
> 
> 赞同：11
> 
> 时间：2012-07-17T09:11:32.090
> 
> 标签：youtube, youtube-api, gdata, gdata-api

我有使用 YouTube API 的经验。但我总是将它用于公共视频。现在。我想要实现的是，让我的 YouTube 频道上的视频完全不可见（换句话说，私有），并且只向网站用户展示这个视频。

这可能吗？怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T09:16:37.337

这是来自[Google 的产品论坛](http://productforums.google.com/d/msg/youtube/Tm6Vceo_tc4/zo50aawqnLwJ)

> 为了澄清。是的，您可以嵌入私人视频。但是，这样做确实不可行，因为 YouTube 的私人视频要求观看者拥有 YouTube 帐户、登录该帐户并将该帐户添加到视频的访问列表中。他们仅限于 50 人。您可以嵌入未列出的视频，它们没有与私人视频相同的身份验证限制。但是，查看未列出的视频以了解 URL 所需的一切。如果您的网站被搜索引擎抓取，那么未列出的视频也可能是公开的。

您可能需要考虑自行托管自己的视频，以便更好地控制并确保您没有违反 YouTube 的服务条款（该条款禁止使用嵌入式播放器）。

Vimeo.com 还具有更强大的访问控制，并且只能允许将视频嵌入特定域。但是，它们不允许商业用途......所以如果这适用于您，这可能是一个问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-17T09:30:03.417

不要将视频设置为`private`，而是将其设置为`unlisted`。它不会出现在 youtube 上的任何列表中，即您的频道、搜索结果和相关视频，但您可以链接到它并像普通视频一样嵌入它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-12T10:24:56.707

Youtube 提供 3 种视频权限。

1.  公开 ---- 对所有人开放
2.  未列出 --- 只能通过嵌入/共享链接观看视频，但不能在 youtube 搜索/取消删除频道中观看。

3.  私人——拥有和选定的人。

# javascript - KnockoutJS：将 if 绑定包装在自定义绑定中

> ID：11519375
> 
> 赞同：2
> 
> 时间：2012-07-17T09:11:32.550
> 
> 标签：javascript, knockout.js

我目前正在查看使用 Knockout 创建自定义绑定的文档，我可以掌握这个概念，但在实践中应用它时遇到了麻烦。

具体来说，我想为 if 绑定提供一个 slideUp/slideDown jQuery 动画。但是，我无法让 KO “看到”我的自定义绑定。如果绑定将不胜感激，请指出关于扩展的正确方向。

补充笔记：

我从[这里](https://github.com/ifandelse/Knockout.js-External-Template-Engine)使用 KO 外部模板引擎，如下所示：

```
<!-- ko template: { name: 'SummaryBox', if: expanded } --><!-- /ko --> 
```

我创建了一个非常基本的自定义绑定来包裹默认的“if”：

```
ko.bindingHandlers['slidingIf'] = {
    init: function(element, valueAccessor, allBindingsAccessor, context) {
        return ko.bindingHandlers['if']['init'](element, valueAccessor, allBindingsAccessor, context);
    },
    update: function(element, valueAccessor, allBindingsAccessor, context) {
        return ko.bindingHandlers['if']['update'](element, valueAccessor, allBindingsAccessor, context);
    }
};
ko.virtualElements.allowedBindings['slidingIf'] = true; 
```

但是当我用这个替换之前的绑定时，

```
<!-- ko template: { name: 'SummaryBox', slidingIf: expanded } --><!-- /ko --> 
```

该模板基本上忽略了“slidingIf”绑定，只是按原样显示我的模板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:08:50.530

传递给绑定的值是该`template`绑定的选项，而不是它们自己的单独绑定。因此，`template`绑定本身不知道您的`slidingIf`绑定。

您要么需要自己使用绑定，要么为执行动画`slidingIf`的绑定编写一个包装器。`template`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-19T18:18:20.170

我试过这个，但发现我的“内部”绑定失败了，所以我做了这个改变：

`return ko.bindingHandlers['if']['update'].apply(this, Array.prototype.slice.call(arguments));`

# iphone - 无法在 UIButton 中使用自定义字体

> ID：11519376
> 
> 赞同：3
> 
> 时间：2012-07-17T09:11:33.813
> 
> 标签：iphone, ios, uibutton, uifont

我正在尝试在我的应用程序中使用自定义字体，它是 ttf 格式。在项目设置中，我添加了如下字体名称。

![在此处输入图像描述](../Images/4de27e088ba87ce1e567081e1cd9b5a3.png)

我已经在我的资源文件夹中添加了该字体，如下所示

![在此处输入图像描述](../Images/e6abf82739ef53a3954d4a726e6dd598.png)

我尝试使用的字体就是这个![在此处输入图像描述](../Images/8e6162ee7a409f20ed98a166fedefbe9.png)

```
_enterButton.titleLabel.font =  [UIFont fontWithName:@"Venus Rising" size:45.0]; 
```

如果我使用 Arial 或其他字体，它可以正常工作。但是当我尝试使用这种字体时，它根本不起作用。谁能告诉我为什么？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T09:27:26.150

我下载了字体，因为我认为它的名称与文件名不同。看看这张图片。

![在此处输入图像描述](../Images/ce12fce6e67b60c2eb442b384246e397.png)

也不要忘记将名称添加到应用程序的 Info.plist 中，在“应用程序提供的字体”键下。希望能帮助到你！:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T09:18:23.087

您错过了 info.plist 中的字体扩展，我的意思是在 Info.plist 中，“应用程序提供的字体”您需要设置“Venus Rising.ttf”然后您的问题将得到解决

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T09:18:23.650

几天前我遇到了同样的问题。对我来说，字体名称与 ttf 文件名不同。

试试这个循环来检查你的应用程序中所有可用的字体：

```
for (id familyName in [UIFont familyNames]) {
    NSLog(@"family name : %@",familyName);
    for (id font in [UIFont fontNamesForFamilyName:familyName]) {
        NSLog(@"    %@",font);
    }
} 
```

在您的情况下，Venus Rising 应该显示为姓氏，但您应该在代码中使用的字体的确切名称可能是 VenusRisingRegular 或类似的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T09:17:58.953

```
UILabel *label1 = [[UILabel alloc] initWithFrame:CGRectMake(10, 30, 240, 40)];
[label1 setFont: [UIFont fontWithName: @"Grinched" size:24]];
[label1 setText:@"Grinched Font"];
[[self view] addSubview:label1];

UILabel *label2 = [[UILabel alloc] initWithFrame:CGRectMake(10, 80, 240, 40)];
[label2 setFont: [UIFont fontWithName: @"Energon" size:18]];
[label2 setText:@"Energon Font"];
[[self view] addSubview:label2]; 
```

请试试这个。

它可能对你有帮助

# c# - 来自代码的带有 Style 和 DateTriggers 的 DataTemplate

> ID：11519377
> 
> 赞同：3
> 
> 时间：2012-07-17T09:11:35.093
> 
> 标签：c#, .net, wpf, styles, datatemplate

我创建了这个`DataTemplate`，但我不知道如何将 a`style`与 a添加`DataTrigger`到*img*变量中。

我希望*img*根据*`Suppliers[i].Stock`*(int)的值显示不同的图像

资源图标

```
Properties.Resources.InStock     => Suppliers[i].Stock > 0
Properties.Resources.OutOfStock  => Suppliers[i].Stock = 0
Properties.Resources.Unknown     => Suppliers[i].Stock = null 
```

到目前为止我的代码。

```
private DataTemplate GetStockTemplate(int i)
{
    var template = new DataTemplate();

    var wp = new FrameworkElementFactory(typeof (WrapPanel));
    wp.SetValue(FrameworkElement.HorizontalAlignmentProperty, HorizontalAlignment.Right);
    wp.SetValue(WrapPanel.OrientationProperty, Orientation.Horizontal);

    var tx = new FrameworkElementFactory(typeof (TextBox));
    tx.SetBinding(TextBox.TextProperty, new Binding("Suppliers[" + i + "].Stock") {StringFormat = "{0:n0}"});
    tx.SetValue(TextBoxBase.IsReadOnlyProperty, true);
    tx.SetValue(Control.BorderThicknessProperty, new Thickness(0));
    tx.SetValue(Control.BackgroundProperty, Brushes.Transparent);
    tx.SetValue(TextBox.TextAlignmentProperty, TextAlignment.Right);

    wp.AppendChild(tx);

    var img = new FrameworkElementFactory(typeof (Image));
    wp.AppendChild(img);

    template.VisualTree = wp;
    template.Seal();
    return template;
} 
```

我认为触发器可以工作的方式是，创建一个显示 InStock 图标的默认样式，然后在 for`Stock = null`和另一个 for上设置两个触发器`Stock = 0`

由于我是动态执行此操作的，因此我无法使用 xaml，并且其他所有内容都可以使用`DataTemplate`.

**解决方案**

在@akjoshi 的帮助下，这就是我最终使用的。

```
var img = new FrameworkElementFactory(typeof(Image));
            var binding = new Binding("Suppliers[" + i + "].Stock") {Converter = new StockIconConverter()};
img.SetBinding(Image.SourceProperty, binding);
wp.AppendChild(img); 

class StockIconConverter :IValueConverter 
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value == null || (int)value < 0)
            return ConvertIconToBitmapImage(Properties.Resources.Unknown);

        return ConvertIconToBitmapImage((int)value == 0 ? Properties.Resources.OutOfStock : Properties.Resources.InStock);
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    #region Helper
    private static BitmapImage ConvertIconToBitmapImage(Icon icon)
    {
        var bitmap = icon.ToBitmap();
        var ms = new MemoryStream();
        bitmap.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
        var bImg = new BitmapImage();

        bImg.BeginInit();
        bImg.StreamSource = new MemoryStream(ms.ToArray());
        bImg.CreateOptions = BitmapCreateOptions.None;
        bImg.CacheOption = BitmapCacheOption.Default;
        bImg.EndInit();
        bImg.Freeze();

        ms.Close();

        return bImg;
    }
    #endregion
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T09:47:23.883

我认为您的想法是正确的，代码应该是这样的-

```
var img = new FrameworkElementFactory(typeof(Image)); 
img.SetValue(Image.SourceProperty, "InStockImagePath");

Style style = new Style();
style.TargetType = typeof(Image);

DataTrigger zeroDataTrigger = new DataTrigger();
zeroDataTrigger.Binding = new Binding("Suppliers[" + i + "].Stock");
zeroDataTrigger.Value = 0;
zeroDataTrigger.Setters.Add(new Setter(Image.SourceProperty, "OutOfStockImagePath"));

DataTrigger nullDataTrigger = new DataTrigger();
nullDataTrigger.Binding = new Binding("Suppliers[" + i + "].Stock");
nullDataTrigger.Value = null;
nullDataTrigger.Setters.Add(new Setter(Image.SourceProperty, "unknownImagePath"));

style.Triggers.Add(zeroDataTrigger);
style.Triggers.Add(nullDataTrigger);

img.SetValue(Image.StyleProperty, style);
wp.AppendChild(img); 
```

我建议您看一下 Sacha 的以下与此相关的精彩文章 -

[WPF：如何在代码/和神奇的内容中创建样式](http://www.codeproject.com/Articles/29699/WPF-How-to-create-Styles-in-code-and-magical-Conte)

作为旁注，就像`FrameworkElementFactory`deprecated[一样](https://stackoverflow.com/questions/9091853/purpose-of-using-frameworkelementfactory)，最好在其中定义此样式`Resources/xaml`并用于[`FindResource()`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.findresource.aspx)设置它。如果一些重新设计可以使您实现这一目标，那么我建议您这样做。

# android - 安卓。sdcard空间不够

> ID：11519380
> 
> 赞同：3
> 
> 时间：2012-07-17T09:11:52.120
> 
> 标签：android

我没有 Android 设备来测试这个（是的，我知道。没有 Android 设备的 Android 开发人员）但我想知道如果设备中没有 sdcard，或者 sdcard 已满，当我需要在我的应用程序执行期间存储一些数据，它会返回 IOException 吗？还是会自动将其存储在手机的内存中？或者在这种情况下会发生什么，最好的步骤是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T09:16:35.867

你可以检查是否安装了sd卡

[有没有办法判断 sdcard 是否已安装与根本没有安装？](https://stackoverflow.com/questions/4878903/is-there-a-way-to-tell-if-the-sdcard-is-mounted-vs-not-installed-at-all)

编辑：您可以检查手机中的可用空间（SD卡/内部）

[如何检查 android 设备上的可用空间？在 SD 卡上？](https://stackoverflow.com/questions/3394765/how-to-check-available-space-on-android-device-on-mini-sd-card)

您可能会发现这也很有用。如果超出存储限制，则会引发 IOException。

[SDCard 满时抛出 IOException](https://stackoverflow.com/questions/4540589/ioexception-is-thrown-when-sdcard-is-full)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T09:15:14.117

您可以设置模拟器，使其使用 SD 卡，然后用例如“dd”填充它。这应该为您提供一个环境，您可以在 SD 卡上没有空间的情况下测试您的应用程序。

# android - 如何捕捉地图平移 | 使用 Android SDK 缩放完成事件？

> ID：11519381
> 
> 赞同：1
> 
> 时间：2012-07-17T09:11:52.540
> 
> 标签：android, google-maps, zooming, drag, mapactivity

我正在寻找一种在地图**完成**平移或缩放或平移和缩放时接收事件的方法。`MapActivity`这些事件不会从我使用的 SDK for Android 2.3.3 中触发，afaik 。我尝试了[MapChange](https://github.com/bricolsoftconsulting/MapChange)库，但是，它强制您`Handler`在您的程序中使用`MapActivity`以确保在 UI 线程上处理 UI 更新；[更多信息](https://stackoverflow.com/a/11508922/356895)。

**问题：您是否知道**[Android 支持库](http://developer.android.com/tools/extras/support-library.html)对此类事件的任何支持，例如使用`FragmentActivity`代替`MapActivity`- 我现在找不到替代解决方案。

类似的问题可以在这里找到：

*   [Android MapActivity 上的地图移动](https://stackoverflow.com/questions/4620154/android-mapactivity-on-map-movement)
*   [如何捕捉地图平移和缩放真的完成了？](https://stackoverflow.com/questions/3567420/how-to-catch-that-map-panning-and-zoom-are-really-finished)

* * *

**编辑：** MapChange 库是[几个小时前更新](https://github.com/bricolsoftconsulting/MapChange/tree/75cf1b2f7f94410939db70b2e6e80b9042f0a608/src/com/bricolsoftconsulting/mapchange)的。我会看看有什么改进。

* * *

**编辑：** MapChange 库已得到改进，现在工作更加可靠，是一个不错的选择！请查看 GitHub 项目以获取更多信息。但是，我没有回答这个问题，因为我仍然对是否可以对现有组件做同样的事情感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-11T20:08:31.163

您可以使用[GoogleMap.OnCameraChangeListener](https://developers.google.com/android/reference/com/google/android/gms/maps/GoogleMap.OnCameraChangeListener)将侦听器分配给不断变化的相机事件。[Google Maps Android API 文档](https://developers.google.com/maps/documentation/android-api/events#camera_change_events)中讨论了处理该事件和其他事件 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:18:12.873

为什么使用 Handler 有问题？您可以随时将您的 UI 更改发布到主线程，为什么不这样做呢？

SO上的某人通过更改支持库代码找到了一种方法来获取包含MapView的Fragment活动，但它对我来说太麻烦了，我无法使用，我恢复到一个成熟的地图活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-26T10:02:14.697

对于仍在寻找答案的任何人

```
googleMap.setOnCameraIdleListener {
                //Do your thing
            } 
```

当相机移动结束时调用

# android - Windows - Android SDK 管理器未列出要安装的任何平台或软件包

> ID：11519383
> 
> 赞同：8
> 
> 时间：2012-07-17T09:11:57.627
> 
> 标签：android, sdk, package-managers

在我使用可用的 exe 文件安装了 Android SDK 并打开了 Android SDK 管理器后，我看不到任何需要安装的附加包。列出的所有内容都是 Tools 文件夹下的 Android SDK 工具。Extras 文件夹下也不显示任何内容。所以没有这个，我一开始就被困住了。我收到的日志消息也没有准确地指向任何地方。以下是我收到的日志消息：

**获取[http://dl-ssl.google.com/android/repository/addons_list-2.xml](http://dl-ssl.google.com/android/repository/addons_list-2.xml) 获取加载项列表成功获取 URL：[http ://dl-ssl.google.com/android/repository/repository-7 .xml](http://dl-ssl.google.com/android/repository/repository-7.xml) 完成加载包。** 任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T04:53:17.403

如果您的问题尚未解决，请尝试从 SDK 管理器的“工具”->“选项”菜单下设置代理服务器。这是我犯的错误。也许这也可能对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T02:35:31.307

尝试禁用防火墙，它对我有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T22:31:17.520

我遇到了类似的问题，因为我正在从 Eclipse 运行 SDK Manager。该菜单甚至没有工具 -> 选项选项。如果是这种情况，只需从您的程序中运行已安装的 SDK 管理器

# c# - 创建 xml 文件时转义 xml 字符串

> ID：11519384
> 
> 赞同：0
> 
> 时间：2012-07-17T09:12:00.677
> 
> 标签：c#, xml, xslt, xls

我需要创建一个要转换为 excel 文件（.xls）的 xml 文件，这意味着 xml 中有很多元信息。将所有内容作为文本文件写入 xml 文件很容易。

```
var sw = new FileInfo(tempReportFilePath).CreateText();
sw.WriteLine("meta info and other tags") 
```

但是，此方法不会转义字符，并且当数据包含“<”或“>”或“&”等时，xml 将被渲染为无效并且 .xls 文件无法打开。我可以轻松地进行替换（'<' 与 '<' 等等），但出于性能原因，这种方法不适合。

另一种选择是使用 xml 文本编写器，但有大量元信息，这意味着在代码中编写大量标签。使用 sw.WriteLine('stuff')，我可以简单地将部分元信息放在一个标签中（作为字符串）并将它们写入文件。使用 xslt，我面临的问题是标签需要空格。例如，对于表格数据，顶行字段可以有空格。如何创建一个包含大量元信息的格式良好的 xml 文件，以及字符（'<'、'>' 等）在哪里被排除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:29:28.107

为什么不首先创建 xls，有一个不错的库可以这样做：

[http://npoi.codeplex.com/](http://npoi.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:45:38.900

我使用 WriteRaw 方法来编写元信息标签。对于需要转义的其他数据，我使用了 WriteString 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T09:18:44.087

1.  [`Uri.EscapeDataString(string stringToEscape)`](http://msdn.microsoft.com/en-us/library/system.uri.escapedatastring.aspx);
2.  XDocument[教程](http://www.java2s.com/Code/CSharp/XML-LINQ/XDocument.htm)。

# node.js - 为什么数组占用的内存比 node.js 中的缓冲区少？

> ID：11519385
> 
> 赞同：2
> 
> 时间：2012-07-17T09:12:05.133
> 
> 标签：node.js

我正在决定将大量时间序列数据存储在内存中的最佳方法，并且我做了一个简单的基准测试来比较缓冲区与简单数组：

```
var buffers = {};

var started = Date.now();
var before = process.memoryUsage().heapUsed;

for (var i = 0; i < 100000; i++) {
    buffers[i] = new Buffer(4);
    buffers[i].writeFloatLE(i+1.2, 0);
//  buffers[i] = [i+1.2];
}

console.log(Date.now() - started, 'ms');
console.log((process.memoryUsage().heapUsed - before) / 1024 / 1024); 
```

结果如下：

```
Arrays: 22 'ms'
8.391242980957031

Buffers:
123 'ms'
9.9490966796875 
```

因此，根据这个基准，阵列的速度提高了 5 倍以上，并且减少了 18% 的内存。这个对吗？我当然希望缓冲区占用更少的内存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T04:16:32.707

您创建的每个 Buffer 都有开销（时间和空间）。

如果您进行比较，我希望您会获得更好的空间（也许还有时间）性能

```
buffers[i] = new Buffer(4*1000);
for(k=0;j<1000;++j)
{
  buffers[i].writeFloatLE(i+k+1.2, 4*j);
} 
```

和

```
buffers[i] = [];
for(k=0;j<1000;++j)
{
  buffers[i].push(i+k+1.2);
} 
```

# javascript - 使用 google map js api v3 为路线制作动画

> ID：11519386
> 
> 赞同：13
> 
> 时间：2012-07-17T09:12:07.120
> 
> 标签：javascript, google-maps, animation, google-maps-api-3

给定两个地理定位点（路线的起点和终点），我想为它们之间的路线绘制动画。

您知道 Google map js v3 api 是否可以实现吗？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-09-17T09:37:05.313

我为你找到了一些东西。

[http://www.geocodezip.com/v3_animate_marker_directions.html](http://www.geocodezip.com/v3_animate_marker_directions.html) 访问此网站，在 chrome 上按 F12 转到源选项卡并选择 v3-animate-marker-direction.html 您将获得有关如何使用它的完整代码。我需要帮助，请评论

这里也是一个很好的例子，但我想它是在 v2 [http://www.kmcgraphics.com/google/上实现的](http://www.kmcgraphics.com/google/)

问候， 苏亚什

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-18T11:33:53.943

使用此[示例](http://www.geocodezip.com/v3_SO_multipleMarkerAnimation.html)，您可以为路线中的多个标记设置动画。animate 和 startAnimation 函数处理多个标记。您可以根据需要修改代码。希望能帮助到你。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-12-19T09:55:24.587

在这个[例子](https://developers.google.com/maps/documentation/javascript/examples/overlay-symbol-custom)中：

```
var symbolTwo = {
  path: 'M -1,0 A 1,1 0 0 0 -3,0 1,1 0 0 0 -1,0M 1,0 A 1,1 0 0 0 3,0 1,1 0 0 0 1,0M -3,3 Q 0,5 3,3',
  strokeColor: '#00F',
  **rotation**: 45
}; 
```

# android - 广播接收器检查互联网连接

> ID：11519387
> 
> 赞同：-1
> 
> 时间：2012-07-17T09:12:11.170
> 
> 标签：android, networking, broadcastreceiver

我正在尝试使用广播接收器检查是否有互联网，我没有收到错误但我的应用程序无法正常工作，它没有告知互联网的存在..有人可以帮忙吗？这是我的代码...在此先感谢

```
package com.example.internetconnection;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.Bundle;
import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.Toast;
import android.support.v4.app.NavUtils;

public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    BroadcastReceiver networkStateReceiver = new BroadcastReceiver() { 

        @Override
        public void onReceive(Context context, Intent intent) {
            // TODO Auto-generated method stub

                ConnectivityManager connectivityManager =     (ConnectivityManager) context.getSystemService( Context.CONNECTIVITY_SERVICE ); 
            NetworkInfo activeNetInfo = connectivityManager.getActiveNetworkInfo(); 
            NetworkInfo mobNetInfo = connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE ); 
            if ( activeNetInfo != null ) 
            { 
              Toast.makeText( context, "Active Network Type : "+ activeNetInfo.getTypeName(), Toast.LENGTH_SHORT ).show(); 
            } 
            if( mobNetInfo != null ) 
            { 
              Toast.makeText( context, "Mobile Network Type : "+ mobNetInfo.getTypeName(), Toast.LENGTH_SHORT ).show(); 
            } 
        }               

    }; 
    IntentFilter filter = new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION);         
    registerReceiver(networkStateReceiver, filter);  

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
 }

}

Androidmanifest.xml
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.internetconnection"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
      <receiver android:name="com.example.internetconnection" 
      android:label="NetworkConnection"> 
    <intent-filter> 
    <action android:name="android.net.conn.CONNECTIVITY_CHANGE"/> 
    </intent-filter> 
    </receiver> 
</application> 
```

```
activity_main.xml
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.internetconnection"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
      <receiver android:name="com.example.internetconnection" 
      android:label="NetworkConnection"> 
    <intent-filter> 
    <action android:name="android.net.conn.CONNECTIVITY_CHANGE"/> 
    </intent-filter> 
    </receiver> 
</application> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T06:34:38.090

您已经动态注册了它，那么为什么要在清单中使用接收器标签。我认为你搞砸了代码。

# css - 使用 Twitter Bootstrap，如何更改 CSS 样式以尊重换行符？

> ID：11519390
> 
> 赞同：2
> 
> 时间：2012-07-17T09:12:14.157
> 
> 标签：css, twitter-bootstrap

我正在使用 Twitter Bootstrap 设置`<pre>`标签的 CSS 样式，以便不保留换行符。我需要更改哪些属性才能重置默认行为？

```
<pre>
line 1
line 2
line 3
</pre> 
```

生产

```
line 1 line 2 line 3 
```

而不是

```
line 1
line 2
line 3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T18:01:47.017

很可能您的`display:block;`财产正在被覆盖。您需要`pre{display:block;}`在外部样式表中进行设置。twitter bootstrap 版本 2 默认`pre`定义为标签`display:block;`，因此很明显您正在覆盖它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T20:19:23.203

我建议使用不同的元素标签并使用 javascript 代码语法高亮 API。浏览器不允许您更改 pre 标签的工作方式。您不能更改 pre 标记的影子 DOM。如果您正在寻找代码片段的更多灵活性，我会走这条路。

[http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_pre](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_pre)

# wcf - WCF-project 将不会返回 64 位 Win Vista 和 VS2010 的数据

> ID：11519399
> 
> 赞同：0
> 
> 时间：2012-07-17T09:12:33.100
> 
> 标签：wcf, linq, 64-bit, windows-vista

[当我发现这个](http://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/22a7474c-b54d-4be0-928b-acc8b0a5a091/)时，我以为我找到了解决问题的方法，但它对我不起作用。

当我在调试模式下运行时，我`WcfTestClient`没有检索任何数据并且我收到错误：

```
A first chance exception of type 'System.NotSupportedException' occurred in System.Data.Entity.dll
The thread '<No Name>' (0x1b50) has exited with code 0 (0x0).
The program '[7040] WCFTestClient.exe: Managed (v4.0.30319)' has exited with code 0 (0x0)..................................... 
```

将检索数据的是以下方法：

```
public List<WShortDeal> Test()
    {
        try
        {
            return entities.ProductInstance_Deal
                .Select(d => new WShortDeal()
                {
                    Id = d.Deal.Id
                   // ,
                   // Name = d.Deal.Deal_Language.SingleOrDefault(l => l.Language.Id == 1).Name**
                    ,
                    NewPrice = (double)d.ProductInstance.Price * (1 - d.Deal.SalesPercentage / 100)
                    ,
                    OldPrice = (double)d.ProductInstance.Price
                    ,
                    Valuta = d.ProductInstance.Valuta.ValutaCode
                    ,
                    Type = d.Deal.Type
                    ,
                    IdCompanyAccount = d.ProductInstance.IdCompanyAccount
                })
                    .ToList();
        }
        catch (Exception)
        {
            return null;
        }
    } 
```

但是，如果我取消注释现在已注释掉的两行，我将停止接收数据并在我的输出窗口中收到上述错误消息。

另外，如果我添加此行

```
 ,ProductCategory = d.ProductInstance.ProductType.ProductCategory.ProductCategory_Language.Where(pcl => pcl.IdLanguage == idLanguage).Single().Name 
```

而不是线

```
 , Name = d.Deal.Deal_Language.SingleOrDefault(l => l.Language.Id == 1).Name 
```

对于我原来的 SELECT 语句，它也不会返回任何数据。所以我想这可能与代表与我的语言表（？？）的多对多关系的所有表有关。因为每当我忘记与“ProductCategory_Language”表的连接时，我都可以再次检索数据。

有人可以帮忙吗？我的问题还有其他解决方案吗？这几天我一直在努力解决这个问题:(提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:22:39.220

如果该行在选择名称之前返回 null 怎么办？尝试

```
 Name = d.Deal.Deal_Language.Where(l => l.Language.Id == 1)
         .Select(s=>s.Name).SingleOrDefault() 
```

# javascript - 指向html5画廊最后一张幻灯片后的html页面

> ID：11519408
> 
> 赞同：0
> 
> 时间：2012-07-17T09:13:02.563
> 
> 标签：javascript, jquery, html, jquery-plugins

我有一个 html5 画廊的问题。在最后一张幻灯片转换后，此图库必须指向一个 html 页面。我有 3 张幻灯片（一种由图像组成的飞溅），在第三张图像之后，我想在我的网站主页上重定向。

```
<div class="slider">
    <figure class="active">
        <img src="gallery/hp-1.jpg" onload="imageLoaded();" alt="image 1" />
    </figure>
    <figure>
        <img src="gallery/hp-2.jpg" alt="image 2" />
    </figure>
    <figure>
        <img src="gallery/hp-3.jpg" alt="image 3" />
    </figure>
</div>

<script>
(function($, window, document, undefined) {

    var Html5Gallery = {

        isTransitionInProgress : false,
        isMusicPlaying         : false,
        fMusicPlayer           : null,
        nextSwitch             : null,
        fMusicPlayerIsLoaded   : false,
        isWindowReady          : false,
        imageIsStillLoading    : true,

        init : function(element, options) 
        {
            var self = this;
            $(window).ready(function(){
                self.isWindowReady = true;
                if (!self.imageIsStillLoading) {
                    self.handleReadness();
                }
            });

            this.options = $.fn.extend({}, $.fn.Html5Gallery.options, options);
            this.imageIsStillLoading = true;

            $(window).bind("resize", this.handleResizing);

            window.flashIsLoaded = function() {
                self.flashPlayerLoaded();
            };

            window.imageLoaded = function() {

                if(!$("figure.active img").get(0).complete)
                {
                    self.isTransitionInProgress = true;
                    setTimeout(imageLoaded, 100);     
                    return;
                }

                self.imageIsStillLoading = false;

                if (self.isWindowReady) {
                    self.handleReadness();
                }
            };

        },

        nextImage: function(e)
        {
            if (this.isTransitionInProgress)
            {
                return;
            }

            this.cancelNextScheduledImage();

            var from = $("figure.active");
            var to = (from.next().is("figure") ? from.next() : from.parent().children(":first"));
            this.isTransitionInProgress = true;
            this.switchImages(from, to);
        },

        prevImage: function(e)
        {
            if (this.isTransitionInProgress)
                return;

            var from = $("figure.active");
            var to = (from.prev().is("figure") ? from.prev() : from.parent().children(":last"));
            this.isTransitionInProgress = true;
            this.switchImages(from, to);
        },

        switchImages: function(from, to)
        {
            var self              = this;
            var isNextImageLoaded = to.children("img").get(0).complete;
            if (isNextImageLoaded)
            {
                from.stop().fadeOut(self.options.transitionSpeed, function(){

                    from.removeClass("active").css("display", "none");
                    to.addClass("active");
                    self.handleResizing();
                    to.hide().fadeIn(self.options.transitionSpeed, function(){
                        self.isTransitionInProgress = false;
                        self.scheduleNextImage();
                    });
                });

                return;
            }

            $("#loading").hide().fadeIn(self.options.transitionSpeed, function(){
                from.removeClass("active").css("display", "none");
                to.addClass("active");
                if (isNextImageLoaded)
                {
                    self.handleResizing();
                    self.hideLoading();
                }   
                else
                {
                    imageLoaded();
                }
            });
        },

        hideLoading: function()
        {
            var self = this;

            $("#loading").fadeOut(this.options.transitionSpeed, function(){
                self.isTransitionInProgress = false;
                self.scheduleNextImage();
            });
        },

        cancelNextScheduledImage: function()
        {
            clearTimeout(this.nextSwitch);
            this.nextSwitch = null;
        },

        scheduleNextImage: function()
        {
            var self = this;
            this.cancelNextScheduledImage();
            if (!this.isTransitionInProgress && this.options.autoSwitch)
            {
                this.nextSwitch = setTimeout(function(){
                    self.nextImage();
                }, this.options.pauseOnPictureFor);
            }
        },

    };
})
</script> 
```

您可以[在此处](http://www.simbolproject.com/gallery.zip)下载包含所有代码的 html 文件。

感谢您的帮助。西蒙娜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:31:46.573

您可以挂钩返回到第一张幻灯片的逻辑。这通过检查下一个元素是否是一个`figure`元素来工作，如果不是，则抓住第一个`figure`元素并切换到它。您可以覆盖此逻辑以在最后一张幻灯片显示后重定向您的页面（未经测试）：

```
nextImage: function(e)
{
    if (this.isTransitionInProgress)
    {
        return;
    }

    this.cancelNextScheduledImage();

    var from = $("figure.active");
    // var to = (from.next().is("figure"); ? from.next() : from.parent().children(":first"));
    var to = from.next(); 

    if (to.is("figure")) {
        this.isTransitionInProgress = true;
        this.switchImages(from, to);
    } else {
        window.location.replace("http://stackoverflow.com");
    }
}, 
```

`options`为了速度和清晰度，我已经对 URL 进行了硬编码，但更好的方法是通过它作为方法参数接收的对象将 URL 传递给插件`init`。

# android - Android：如果用户放大，如何在 ViewPager 中缩小单个页面？

> ID：11519409
> 
> 赞同：0
> 
> 时间：2012-07-17T09:13:02.300
> 
> 标签：android, webview, android-viewpager

我在 ViewPager 中使用 WebView 来显示来自互联网的图像。使用 WebView 是因为它内置了缩放控件。我想让我的用户在寻呼机中缩放图像，但是当他们滑动到下一个图像时，可以恢复上一个图像的原始缩放。我尝试了一些东西，其中只有一个给了我想要的功能，但这不是一个足够好的解决方案，因为在浏览页面时会闪烁。

```
mPager.setOnPageChangeListener(new OnPageChangeListener(
            ) {

        @Override
        public void onPageSelected(int arg0) {
            currImg = arg0;
            //System.out.println("On page selected");
        }

        @Override
        public void onPageScrolled(int arg0, float arg1, int arg2) {
            // TODO Auto-generated method stub
            //System.out.println("On page scrolled");

        }

        @Override
        public void onPageScrollStateChanged(int arg0) {
            // TODO Auto-generated method stub
            if(arg0 == 2) {
                //mPager.getAdapter().
                mPager.getAdapter().notifyDataSetChanged();
                System.out.println("Notifying Data Set Changed " + mPager.getCurrentItem());
            }

        }
    }); 
```

在 ViewPager 适配器中，我重写了 getItemPosition，因此它会返回 POSITON_NONE。这不是一个好的解决方案，因为每次滑动都会刷新页面，并且页面之间没有平滑过渡。欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T11:02:37.350

这已被证明是将页面恢复到初始缩放状态的最佳方式：

```
 pager.setOnPageChangeListener(new OnPageChangeListener() {
        public void onPageScrollStateChanged(int arg0) {}
        public void onPageScrolled(int arg0, float arg1, int arg2) {}
        public void onPageSelected(int arg0) {
            System.out.println("onPageSelected -> arg0 = " + arg0);

            if (currPage != arg0) {
                mAdapter.notifyDataSetChanged();
                currPage = arg0;
            }
        }
    }); 
```

比，在您的适配器类中，您可以像这样覆盖 getItemPosition 方法：

```
@Override
public int getItemPosition(Object object) {
    if (((ExtendedWebView) object).getScale() != webScale) {
        return POSITION_NONE;
    }
    return POSITION_UNCHANGED;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:27:29.923

您可以将页面恢复到初始缩放状态吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T17:21:38.267

好吧，您看到的闪烁是因为再次加载数据并生成视图，对您来说看到可能只是一点点闪烁，但是如果您在其中添加更多内容，或者您​​为每个视图添加了一些下载或流式传输，则该闪烁将变为白页加载。您可以做的是在[页面更改的侦听](http://developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html)器上添加代码以在最后一个 webview 上设置当前缩放级别。

例子：

```
lastPos = pos - 1;
((WebView) mPager.getChildAt(lastPos)).getSettings().setDefaultZoom(zoomLevel); 
```

**注意：**这只是一个示例，也许您必须根据您的配置更改某些内容，然后才能使用您的代码。

此示例假定 WebView 是 viewpager 中每个页面的唯一子级，如果您有更多或 WebView 在相对或线性布局内，则必须添加代码以检索 WebView 并应用更改在变焦。

**更新：**

如果您希望图像占据 webview 内的所有屏幕，您可以这样做。在这种情况下，“web”是我的“WebView”类型的对象。祝你好运。

```
web.loadData("<html><head></head><body><img src='" + url //IMAGE URL
+ "' style='width:100%;height:98%;max-width:100%;max-height:98%;'></body></html>",
"text/html", "utf-8"); //THIS WILL FIT THE IMAGE TO TAKE ALL THE SCREEN 
```

# postgresql - PL/pgSQL 函数中的可选参数

> ID：11519410
> 
> 赞同：31
> 
> 时间：2012-07-17T09:13:04.233
> 
> 标签：postgresql, stored-procedures, parameters, parameter-passing, plpgsql

我正在尝试编写一个带有可选参数的 PL/pgSQL 函数。它基于过滤的记录集（如果指定）执行查询，否则对表中的整个数据集执行查询。

例如**（伪代码）**：

```
CREATE OR REPLACE FUNCTION foofunc(param1 integer, param2 date, param2 date, optional_list_of_ids=[]) RETURNS SETOF RECORD AS $$
    IF len(optional_list_of_ids) > 0 THEN
        RETURN QUERY (SELECT * from foobar where f1=param1 AND f2=param2 AND id in optional_list_of_ids);
    ELSE
        RETURN QUERY (SELECT * from foobar where f1=param1 AND f2=param2);
    ENDIF
$$ LANGUAGE SQL; 
```

实现此功能的正确方法是什么？

顺便说一句，我想知道如何在另一个外部函数中调用这样的函数。这就是我的做法——它是正确的，还是有更好的方法？

```
CREATE FUNCTION foofuncwrapper(param1 integer, param2 date, param2 date) RETURNS SETOF RECORD AS $$
BEGIN
   CREATE TABLE ids AS SELECT id from foobar where id < 100;
   RETURN QUERY (SELECT * FROM foofunc(param1, param2, ids));
END
$$ LANGUAGE SQL 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-22T21:41:13.237

自 PostgreSQL 8.4（您似乎正在运行）以来[**，函数参数有默认值**](https://www.postgresql.org/docs/current/sql-createfunction.html)。如果你把你的参数放在最后并提供一个默认值，你可以简单地从调用中省略它：

```
CREATE OR REPLACE FUNCTION foofunc(_param1 integer
                                 , _param2 date
                                 , _ids    int[] DEFAULT '{}')
  RETURNS SETOF foobar         -- declare return type!
  LANGUAGE plpgsql AS
$func$
BEGIN  -- required for plpgsql
   IF _ids <> '{}'::int[] THEN  -- exclude empty array and NULL
      RETURN QUERY
      SELECT *
      FROM   foobar
      WHERE  f1 = _param1
      AND    f2 = _param2
      AND    id = ANY(_ids);    -- "IN" is not proper syntax for arrays
   ELSE
      RETURN QUERY
      SELECT *
      FROM   foobar
      WHERE  f1 = _param1
      AND    f2 = _param2;
   END IF;
END  -- required for plpgsql
$func$; 
```

要点：

*   关键字**`DEFAULT`**用于声明参数默认值。简短的选择：**`=`**。

*   `param1`我从凌乱的例子中删除了多余的部分。

*   既然您 return `SELECT * FROM foobar`，请将返回类型声明为`RETURNS SETOF foobar`而不是`RETURNS SETOF record`。带有匿名记录的后一种形式非常笨拙，您必须在每次调用时提供列定义列表。

*   我使用整数 ( ) 数组`int[]`作为函数参数。相应地调整了`IF`表达式和`WHERE`子句。

*   `IF`语句在纯 SQL 中不可用。必须`LANGUAGE plpgsql`为此。

调用或不调用`_ids`：

```
SELECT * FROM foofunc(1, '2012-1-1'::date); 
```

实际上相同：

```
SELECT * FROM foofunc(1, '2012-1-1'::date, '{}'::int[]); 
```

您必须确保呼叫是明确的。如果你有另一个同名的函数和两个参数，Postgres 可能不知道选择哪个。显式转换（就像我演示的那样）缩小了范围。否则，无类型的字符串文字也可以工作，但显式永远不会受到伤害。

从另一个函数中调用：

```
CREATE FUNCTION foofuncwrapper(_param1 integer, _param2 date)
  RETURNS SETOF foobar
  LANGUAGE plgpsql AS
$func$
DECLARE
   _ids int[] := '{1,2,3}';
BEGIN
   -- whatever

   RETURN QUERY
   SELECT * FROM foofunc(_param1, _param2, _ids);
END
$func$; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T10:58:40.837

详细阐述[Frank](https://stackoverflow.com/users/271959/frank-heikens)在此线程上的回答：

agument`VARIADIC`不必是唯一的参数，只有最后一个参数。

您可以使用`VARIADIC`可能采用零可变参数的函数，它只是有点复杂，因为它需要零参数的不同调用样式。您可以提供一个包装函数来隐藏丑陋。给定一个初始的 varardic 函数定义，例如：

```
CREATE OR REPLACE FUNCTION foofunc(param1 integer, param2 date, param2 date, optional_list_of_ids VARIADIC integer[]) RETURNS SETOF RECORD AS $$
....
$$ language sql; 
```

对于零参数，使用如下包装器：

```
CREATE OR REPLACE FUNCTION foofunc(integer, date, date) RETURNS SETOF RECORD AS $body$
SELECT foofunc($1,$2,$3,VARIADIC ARRAY[]::integer[]);
$body$ LANGUAGE 'sql'; 
```

或者`VARIADIC '{}'::integer[]`直接用空数组调用主函数。包装器很丑，但它包含丑陋，所以我建议使用包装器。

可以以可变形式进行直接调用：

```
SELECT foofunc(1,'2011-01-01','2011-01-01', 1, 2, 3, 4); 
```

...或带有数组ctor的数组调用形式：

```
SELECT foofunc(1,'2011-01-01','2011-01-01', VARIADIC ARRAY[1,2,3,4]); 
```

...或数组文本文字形式：

```
SELECT foofunc(1,'2011-01-01','2011-01-01', VARIADIC '{1,2,3,4}'::int[]); 
```

后两种形式适用于空数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T10:27:38.440

您的意思是[具有可变数量参数的 SQL 函数](http://www.postgresql.org/docs/current/interactive/xfunc-sql.html#XFUNC-SQL-VARIADIC-FUNCTIONS)？如果是这样，请使用 VARIADIC。

# java - Jaxb 和无序集，每个元素都有单独的列表

> ID：11519412
> 
> 赞同：0
> 
> 时间：2012-07-17T09:13:20.107
> 
> 标签：java, xml, jaxb, xjc

我有一个带有序列的 xml 模式。

```
<xs:sequence>
    <xs:element maxOccurs="unbounded" ref="x"/>
    <xs:element maxOccurs="unbounded" ref="y"/>
</xs:sequence> 
```

在这种情况下 all`x`必须出现在 all 之前`y`。那不是我想要的。所以我尝试了选择，但是当使用它时，当我生成相应的类时，所有 x 和 y 都映射到列表中。

有没有办法在xml中没有特殊顺序的x和y单独列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T19:35:53.537

[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现在解组时对 XML 元素的顺序非常宽容。我将在下面用一个例子来演示。

**根**

下面是具有单独`List`属性的域对象。

```
package forum11519412;

import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Root {

    List<String> x;
    List<Integer> y;

} 
```

**输入.xml**

以下是`List`混合项目的示例 XML 文档：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <y>1</y>
    <x>A</x>
    <y>2</y>
    <x>B</x>
    <y>3</y>
    <x>C</x>
</root> 
```

**演示**

演示代码将解组`input.xml`并将其编组。

```
package forum11519412;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum11519412/input.xml");
        Root root = (Root) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(root, System.out);
    }

} 
```

**输出**

在生成的 XML 中，内容将按顺序排列。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<root>
    <x>A</x>
    <x>B</x>
    <x>C</x>
    <y>1</y>
    <y>2</y>
    <y>3</y>
</root> 
```

# ruby-on-rails-3 - 如何在关联中访问 self.id

> ID：11519414
> 
> 赞同：1
> 
> 时间：2012-07-17T09:13:23.967
> 
> 标签：ruby-on-rails-3, associations

我有这样的用户模型

```
class User < ActiveRecord::Base 

has_many :received_msgs, class_name:"Message", foreign_key: "recipient_id", :conditions =>['owner_id = ?', self.id]
has_many :sent_msgs, class_name: "Message", foreign_key: "sender_id", :conditions =>['owner_id = ?', self.id] 
```

我希望 owner_id 几乎充当辅助外键，因为每条消息都被复制以进行独立删除。

但是，我收到一条错误消息，说没有为对象定义 id。在这种情况下如何访问 self.id？或者有没有更好的方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:23:52.847

你确定你不只是想要那个`foreign_key`吗`owner_id`？这样，您根本不需要那个`conditions`数组。

无论如何，您无法`self.id`在关联定义中访问的原因是代码的评估范围。在加载类时评估关联，而不是在实例上实际调用`#received_msgs`方法时评估。`User`

我相信您可以`self.id`通过将条件数组包装在 lambda 中来访问实例。这样，在您调用它之前不会对其进行评估。

# java - Java 泛型类型的推断

> ID：11519415
> 
> 赞同：0
> 
> 时间：2012-07-17T09:13:25.223
> 
> 标签：java, generics

我有这样的类结构：

```
class A1,A2,..,An extends A;
class B1,B2,..,Bn extends B; 
```

和转换`Ai`成的类`Bi`：

```
 private B1 convert(A1 a1){}
...
    private Bn convert(An an){} 
```

如何定义带有签名的单个公共方法`<? extends B> convert(<? extends A> a)`？现在我只有这种方法：

```
 B convert(A a){
      if(A.getClass().equals(A1.class)){
         return convert((A1)a);
      }...
    } 
```

如果性能很重要并且该方法会被频繁调用，我可以使用 instanceof 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:41:32.270

一个更优雅的解决方案可能是在`A`: [preferably `abstract`, if `A`is `abstract`] 中声明一个方法：

```
public abstract B toB(); 
```

覆盖类（A1，A2，...）将不得不覆盖它并实例化它们自己的`B`对象。

代码快照[使用`static`修饰符是因为我将其实现为内部类，如果类是外部类，则不需要并且不能使用它]：

```
public abstract static class A { 
    public abstract B toB();
}
public static class A1 extends A {
    @Override
    public B1 toB() {
        return new B1();
    } 

}

public static class B {

}
public static class B1 extends B { 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:18:07.693

您可以执行以下操作：

```
public <AType extends A, BType extends B> BType convert(AType a) {... 
```

但你可以有转换器接口，如：

```
public interface Converter<AType extends A, BType extends B> {

    AType convert(BType b);

    BType convert(AType a);

} 
```

关于性能问题，你可以看看[这里](https://stackoverflow.com/a/103600/1001027)

# c# - 填充组合框

> ID：11519418
> 
> 赞同：0
> 
> 时间：2012-07-17T09:13:49.337
> 
> 标签：c#

我的场景是从数据库中填充组合框，显示客户姓名，并使用身份增量保存 id 的值。

运行此代码时，我收到一个错误`Procedure or function 'spSelectCustomerById' expects parameter '@id', which was not supplied`。

```
SqlConnection conn = new SqlConnection(connectionString);
conn.Open();

//SelectCustomerById(int x);
comboBoxEx1.Items.Clear();

SqlCommand comm = new SqlCommand("spSelectCustomerByID", conn);
//comm.Parameters.Add(new SqlParameter("cust_name", cust_name));
//comm.CommandText = "spSelectCustomerByID";
comm.Parameters.Add(new SqlParameter("cust_id", SqlDbType.Int));
comm.CommandType = CommandType.StoredProcedure;
comm.ExecuteNonQuery();

SqlDataAdapter sdap = new SqlDataAdapter(comm);
DataSet dset = new DataSet();
sdap.Fill(dset, "cust_registrations");

if (dset.Tables["cust_registrations"].Rows.Count > 0)
{
    comboBoxEx1.Items.Add("cust_registrations").ToString();
}
comboBoxEx1.DataSource = dset;
comboBoxEx1.DisplayMember = "cust_name"; 
```

如何从数据库中填充组合框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:24:11.840

```
 conn.Open();

        //SelectCustomerById(int x);
        comboBoxEx1.Items.Clear();
        SqlCommand comm = new SqlCommand("spSelectCustomerByID", conn);
        //comm.Parameters.Add(new SqlParameter("cust_name", cust_name));
        //comm.CommandText = "spSelectCustomerByID";
        comm.Parameters.Add(new SqlParameter("@id", SqlDbType.Int));
        comm.CommandType = CommandType.StoredProcedure;
        comm.ExecuteNonQuery();
        SqlDataAdapter sdap = new SqlDataAdapter(comm);
        DataSet dset = new DataSet();
        sdap.Fill(dset, "cust_registrations");        
        comboBoxEx1.DataSource = dset;
        comboBoxEx1.DisplayMember = "cust_name"; 
```

// 添加以下行 // 您不需要将项目添加到组合框中。

```
 comboBoxEx1.ValueMember = "cust_id";
        comboBoxEx1.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:18:13.153

对于网络组合框我们`comboBoxEx1.DataValueField = "cust_id";`

对于您使用的 WPF`comboBoxEx1.SelectedValuePath = "cust_id";`

在获胜形式中使用`comboBox1.ValueMember = "cust_id";`

# blackberry - BBM 与 App 集成

> ID：11519425
> 
> 赞同：2
> 
> 时间：2012-07-17T09:14:43.700
> 
> 标签：blackberry, bb-messenger

我正在开发一个需要在其中使用 BlackBerry Messenger (BBM) 的应用程序。由于我是黑莓开发的新手，我不知道该怎么做。实际上我已经浏览了很多站点并且我知道我需要安装 BBM SDK ...之后我得到问题找不到类错误..我通过验证 jar 解决了这个问题并使用了生成的，但我仍然有我收到错误并且无法构建项目的问题..所以我需要知道如何将 BBM 集成到我的应用程序中？由于我是这个开发的新手，任何小的帮助都将不胜感激。

提前致谢 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:41:35.107

这是官方页面：
[http ://us.blackberry.com/sites/developers/blackberry-messenger.html](http://us.blackberry.com/sites/developers/blackberry-messenger.html)

还可以查看 JDE 中的井字游戏示例项目。

# c - 使用 fgets() 终止循环

> ID：11519428
> 
> 赞同：0
> 
> 时间：2012-07-17T09:14:57.243
> 
> 标签：c, file-io, fgets

我`fgets()`用来扫描文件如下：

```
char buf[50];
if (fgets(buf, 50, fp) == NULL) {
  printf("Error in file parsing.\n");
  exit(1);
}
char *p;
p = buf; 
```

`p`指向缓冲区，我正在使用它来遍历扫描的字符串。`fgets()`大小为 50，但它确实在扫描字符串的末尾添加了一个空终止符。

我的 while 循环如下所示：

```
while (*p != '\0') 
```

当我的文本文件有：`1 + 23`. 当文本文件包含`1 + 23 - 5`时，它会陷入无限循环。为什么会这样？

我也尝试检查`\n`哪个也失败了。最后，我使用`strlen`并运行了一个 for 循环，`strlen`但这并不准确。

关于我的 while 循环应该是什么样子的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:26:00.463

为什么不迭代如下：

```
int i, buflen;
buflen = strlen(buf);
for(i=0; i<buflen; i++) {
   // your code on buf[i]
} 
```

# android - 我想将自定义数组适配器中的哈希图传递给活动？

> ID：11519429
> 
> 赞同：0
> 
> 时间：2012-07-17T09:15:11.500
> 
> 标签：android

我想将自定义 ArrayAdapter 中的 HashMap 或 ArrayList 对象传递给填充 ListView 的活动。我想发送检查的记录 recordId 字段。我是 Android 的新手。任何建议 Plz

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:21:55.060

向适配器传递对活动的引用。然后在activity中提供一个adapter可以调用的方法。

在适配器中：

```
private MyActivity activity;

public void setActivity(MyActivity activity) {
    this.activity = activity;
} 
```

在活动中：

```
// create adapter
adapter.setActvity(this); 
```

在适配器中（当您想将参数传递回活动时）：

```
activity.setHashMap(mymap); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:23:14.063

**我的 CustomAdapter 类::**
类 SearchResultAdapter 扩展 ArrayAdapter{

```
 Context context;
    int layoutResourceId;   
    private ArrayList<SearchResultModel> results;

    public SearchResultAdapter(Context context, int layoutResourceId, ArrayList<SearchResultModel> results) {
        super(context, layoutResourceId, results);
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.results = results;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) 
    {
        View row = convertView;
        SearchResultHolder holder=null;
        if(row == null)
        {
            LayoutInflater vi = ((Activity)context).getLayoutInflater();
            row = vi.inflate(R.layout.listitemrow, null);
            holder = new SearchResultHolder();
            holder.jobdetails = (TextView)row.findViewById(R.id.jobdetails);
            row.setTag(holder);
        }
        else
        {
            holder = (SearchResultHolder)row.getTag();
        }
        SearchResultModel model = results.get(position);

        if (model != null)
        {
          row.setId(Integer.parseInt(model.getjob_id()));   
          String result=
                  "<font color=#5D2E8C>"+model.getjob_title()+"</font><br>" +
                  "<font color=#737373>"+model.getpost_date()+"</font><br>"+model.getuser_name()+"<br>" +
                  "<font color=#3C5A98>"+model.getsalary()+" Rs (Per Annum)</font><br>"+
                  "<font color=#97AB40>"+model.getjob_location()+"," +
                  " "+model.getjob_exp_min()+"-"+model.getjob_exp_max()+" year";
          holder.jobdetails.setText(Html.fromHtml(result));

        }
        return row;
    }

    class SearchResultHolder
    {
        TextView jobdetails;
    }
} 
```

**我在 Main 方法中的 ListView 将使用上述 ArrayAdapter。**

```
SearchResultAdapter adapter;
ListView lv;  
adapter=new SearchResultAdapter(this, R.layout.listitemrow, model);  
//Here model is the ArrayList<SearchResultModel> 
lv=getListView();
lv.setAdapter(adapter);
lv.setOnItemClickListener(new OnItemClickListener() 
{
  public void onItemClick(AdapterView<?> arg0, View v,int arg2, long arg3) 
    {  
    }
} 
```

**我的 SearchResultModel 类**

```
package com.cws.model;

public class SearchResultModel {

    private String job_id,userdetail_id,user_name,subuser_id,
                        job_title,search_keyword,job_skill,
                        job_exp_min,job_exp_max,
                        job_description,salary,
                        job_location,education,
                        industry_id,role_id,functional_id,job_type,
                        desire_candiadate_profile,company_profile,
                        website,executive_name,address,email,
                        phone,post_date,is_active;
    private String count,counter;//----count=total no of row found
                                                //---counter=now displaying row nos.

    private String errorflag;

    public void seterrorflag(String errorflag)
    {
        this.errorflag=errorflag;
    }
    public String geterrorflag()
    {
        return this.errorflag;
    }

    public void setcount(String count)
    {
        this.count=count;
    }
    public String getcount()
    {
        return this.count;
    }
    public void setcounter(String counter)
    {
        this.counter=counter;
    }
    public String getcounter()
    {
        return this.counter;
    }
    public void setjob_id(String job_id)
    {
        this.job_id=job_id;
    }
    public String getjob_id()
    {
        return this.job_id;
    }
    public void setuserdetail_id(String userdetail_id){
        this.userdetail_id=userdetail_id;
    }
    public String getuserdetail_id()
    {
        return this.userdetail_id;
    }

    public void setuser_name(String user_name){
        this.user_name=user_name;
    }
    public String getuser_name()
    {
        return this.user_name;
    }

    public void setsubuser_id(String subuser_id){
        this.subuser_id=subuser_id;
    }
    public String getsubuser_id()
    {
        return this.subuser_id;
    }
    public void setjob_title(String job_title){
        this.job_title=job_title;
    }
    public String getjob_title()
    {
        return this.job_title;
    }
    public void setsearch_keyword(String search_keyword){
        this.search_keyword=search_keyword;
    }
    public String getsearch_keyword()
    {
        return this.search_keyword;
    }
    public void setjob_skill(String job_skill){
        this.job_skill=job_skill;
    }
    public String getjob_skill()
    {
        return this.job_skill;
    }
    public void setjob_exp_min(String job_exp_min){
        this.job_exp_min=job_exp_min;
    }
    public String getjob_exp_min()
    {
        return this.job_exp_min;
    }
    public void setjob_exp_max(String job_exp_max){
        this.job_exp_max=job_exp_max;
    }
    public String getjob_exp_max()
    {
        return this.job_exp_max;
    }
    public void setjob_description(String job_description){
        this.job_description=job_description;
    }
    public String getjob_description()
    {
        return this.job_description;
    }
    public void setsalary(String salary){
        this.salary=salary;
    }
    public String getsalary()
    {
        return this.salary;
    }
    public void setjob_location(String job_location){
        this.job_location=job_location;
    }
    public String getjob_location()
    {
        return this.job_location;
    }
    public void seteducation(String education){
        this.education=education;
    }
    public String geteducation()
    {
        return this.education;
    }
    public void setindustry_id(String industry_id){
        this.industry_id=industry_id;
    }
    public String getindustry_id()
    {
        return this.industry_id;
    }
    public void setrole_id(String role_id){
        this.role_id=role_id;
    }
    public String getrole_id()
    {
        return this.role_id;
    }
    public void setfunctional_id(String functional_id){
        this.functional_id=functional_id;
    }
    public String getfunctional_id()
    {
        return this.functional_id;
    }
    public void setjob_type(String job_type){
        this.job_type=job_type;
    }
    public String getjob_type()
    {
        return this.job_type;
    }
    public void setdesire_candiadate_profile(String desire_candiadate_profile){
        this.desire_candiadate_profile=desire_candiadate_profile;
    }
    public String getdesire_candiadate_profile()
    {
        return this.desire_candiadate_profile;
    }
    public void setcompany_profile(String company_profile){
        this.company_profile=company_profile;
    }
    public String getcompany_profile()
    {
        return this.company_profile;
    }
    public void setwebsite(String website){
        this.website=website;
    }
    public String getwebsite()
    {
        return this.website;
    }
    public void setexecutive_name(String executive_name){
        this.executive_name=executive_name;
    }
    public String getexecutive_name()
    {
        return this.executive_name;
    }
    public void setaddress(String address){
        this.address=address;
    }
    public String getaddress()
    {
        return this.address;
    }
    public void setemail(String email){
        this.email=email;
    }
    public String getemail()
    {
        return this.email;
    }
    public void setphone(String phone){
        this.phone=phone;
    }
    public String getphone()
    {
        return this.phone;
    }
    public void setpost_date(String post_date){
        this.post_date=post_date;
    }
    public String getpost_date()
    {
        return this.post_date;
    }
    public void setis_active(String is_active){
        this.is_active=is_active;
    }
    public String getis_active()
    {
        return this.is_active;
    }

} 
```

# ios - APNs 重复令牌

> ID：11519435
> 
> 赞同：2
> 
> 时间：2012-07-17T09:15:28.670
> 
> 标签：ios, apple-push-notifications, devicetoken

我们有一个推送通知服务器，它为几个不同的应用程序保存数据（设备令牌）。由于 Apple 想要阻止人们使用 UDID 作为标识符，我正在考虑更改此服务器，使其不再依赖 UDID 来识别设备。

我了解 APNs 返回的令牌不是全局唯一的，而是每个设备唯一的。但是，在浏览我们的数据库时，我注意到有几种情况（750k+ 注册有几百个）*相同的令牌*用于*不同的设备*。

所以我想弄清楚是什么原因造成的。在这一点上，我看到了两种可能性：

1.  我们的服务器注册处理中有一个模糊的错误
2.  Apple 会回收这些设备令牌（可能是在设备重置之后？）。我们总是存储某个设备的最后一次注册时间，我注意到使用相同令牌的不同设备的注册之间总是至少有几天的时间。据我所知，没有不同设备*同时*使用的令牌。

如果有人能对此有所了解，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T15:34:47.677

我们所知道的是，[Apple 告诉我们](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW2)使用设备令牌将通知推送到设备。所以，只要你是：

1.  每次应用程序启动并在数据库中注册时，查询 APNs 以获得新的设备令牌

2.  查询非活动设备的反馈服务并将它们从数据库中清除

...您正在做 Apple 期望您做的事情。

但是，我确实怀疑您的注册码中可能存在错误，因为 100/750k 是一个相当高的冲突率。考虑到这些设备令牌用于推送通知，很多人会抱怨收到不属于他们的通知......

# cordova - 如何在 sencha touch 或 phonegap 中使用评分栏？

> ID：11519438
> 
> 赞同：0
> 
> 时间：2012-07-17T09:16:03.733
> 
> 标签：cordova, sencha-touch, ratingbar

我想在 android 中为 Phonegap 和 sencha 使用评级栏。对于我通过以下链接提到的：

[sencha-touch-2-ux 触摸等级](http://podlipensky.com/2012/03/sencha-touch-2-ext-ux-touch-rating/)

所以我将**Ext.ux.touch.Rating.js**和**Ext.ux.touch.Rating.css保存在****assets**的**www**文件夹中。在**app.js**我添加了以下行：

 ****```
requires : ['Ext.ux.touch.Rating'], 
```

在 js 文件中，我添加了以下代码：

```
xtype : 'rating',
                label : 'Star Rating',
                itemsCount : 5,
                itemCls : 'x-rating-star',
                itemHoverCls : 'x-rating-star-hover',
                clearIcon : true 
```

但它在控制台下面给了我错误：

```
Failed to load resource: the server responded with a status of 404 (Not Found) 
```

我没有得到我必须保存这些文件并使用它们的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:06:03.507

尝试直接在 Sencha Touch 中使用。那应该工作****

# jquery - 如何使用 jquery 从 h1 标签的属性中获取值？

> ID：11519440
> 
> 赞同：2
> 
> 时间：2012-07-17T09:16:17.257
> 
> 标签：jquery

我有一个示例代码：

```
<h1 class="test" idtest="1">Test 1</h1>
<h1 class="test" idtest="2">Test 2</h1>

And jquery:
$(document).ready(function() { 
   $('.test').click(function (){
      var id = $('.test').attr('idtest') ; 
      alert(id);
   })
}); 
```

如何修复它以从 h1 中获取价值

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T09:17:27.267

使用`data`属性并使用`$(this)`而不是`$('.test')`在 click 函数内部。

## *[jsFiddle 演示](http://jsfiddle.net/roXon/xe7gC/)*

```
<h1 class="test" data-idtest="1">Test 1</h1>
<h1 class="test" data-idtest="2">Test 2</h1> 
```

和jQuery：

```
$(document).ready(function() { 
   $('.test').click(function (){
      var id = $(this).data('idtest') ;  
      alert(id);
   })
}); 
```

在这里阅读更多：http: [//api.jquery.com/jQuery.data/](http://api.jquery.com/jQuery.data/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:23:07.243

在 click() 处理程序中使用 $(this) ：

```
$(document).ready(function() { 
   $('.test').click(function (){
      var id = $(this).attr('idtest') ; 
      alert(id);
   })
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T09:18:51.813

你的意思是这样的：http: [//jsfiddle.net/rZcqD/2/](http://jsfiddle.net/rZcqD/2/) **或** [http://jsfiddle.net/rZcqD/4/](http://jsfiddle.net/rZcqD/4/)

**代码**

```
$(document).ready(function() { 
   $('.test').click(function (){
      var id = $(this).attr('idtest') ; 
      alert($(this).text());
   })
});​ 
```

# android - android在卸载后保留快捷方式

> ID：11519442
> 
> 赞同：0
> 
> 时间：2012-07-17T09:16:28.453
> 
> 标签：android, url, package, shortcut

据我了解，如果应用程序在主屏幕上创建快捷方式，则快捷方式的状态会根据快捷方式的类型而变化。

*   当创建它的应用程序消失时，将删除应用程序的快捷方式（按包名称）
*   删除创建应用程序后，包含要查看的 url 的快捷方式仍然存在。

我的问题是卸载创建应用程序后如何在主屏幕上保留应用程序的快捷方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:38:29.963

此堆栈显示如何创建所需的快捷方式。 [创建作为我们移动网站快捷方式的 Android 应用程序](https://stackoverflow.com/questions/5199791/create-android-app-that-acts-as-a-shortcut-to-our-mobile-site)

当手动卸载应用程序时，我认为没有办法让它同时安装其他东西。

# formatting - ReSharper 流畅的缩进

> ID：11519446
> 
> 赞同：1
> 
> 时间：2012-07-17T09:16:40.470
> 
> 标签：formatting, resharper

当我用 ReSharper 格式化这件作品时：

```
this.Tabs.Add(bb => bb
             .Horizontal(h => h
                  .Vertical(v => v
                      .Box("0", upperView, "")
                      .Box("1", mainView, "")))); 
```

我得到：

```
this.Tabs.Add(bb => bb
                     .Horizontal(h => h
                                           .Vertical(v => v
                                                             .Box("0", upperView, "")
                                                             .Box("1", mainView, "")))); 
```

但我希望它保持不变。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T17:38:10.543

也许取消选择

*   锐化 →</li>
*   选项 →</li>
*   语言 →</li>
*   C# →</li>
*   格式样式 →</li>
*   其他 →</li>
*   对齐多行结构 →</li>
*   表达

降低效果。

（假设您使用的是 C#。）

# php - 在浏览其他页面时上传多个文件 - 如何？

> ID：11519449
> 
> 赞同：1
> 
> 时间：2012-07-17T09:16:58.477
> 
> 标签：php, javascript, file-upload, asynchronous

我正在创建一个网站，我想允许用户**在浏览网站时**上传多个文件。

上传完成后，最好触发 Javascipt 事件，以允许用户指定与上传文件相关的其他信息（例如照片位置、标签等），所需的功能是：

1.  单个上传操作允许多个文件
2.  显示一个可选的进度指示器（至少以“x of y 个文件上传”的方式）
3.  无需将用户绑定到单个页面即可

如何实现这些功能？非常感谢任何建议！

* * *

**编辑**

如果使用弹出窗口处理上传，我该如何：

1.  通知用户（在“主”页面上）上传已完成，或者出现错误？
2.  （更重要的是）将 $_FILES 数组传递给弹出窗口？我希望用户能够单击主窗口上的“上传”，或者无论如何从主窗口开始上传（例如在主窗口上拖放文件）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T09:28:58.643

由于导航站点会切换页面，并且您的站点上不太可能有完整的 ajax 导航，因此在第二个弹出窗口中上传文件可能会有所帮助。不过，不确定如何（如果）实现它，但由于您需要一次上传多个文件，恐怕您一定会使用闪存。

**编辑**

所以解决方案可能如下所示：

当用户单击“选择文件”按钮时，您会弹出一个新窗口，他将能够在其中实际选择文件（如果需要多文件上传，则通过闪存）。并通知上传进度使用`postMessage`。虽然[postMessage 在这种情况下不会在 IE 中工作](http://caniuse.com/x-doc-messaging)，但您可能会以某种方式将消息发送到服务器并从服务器返回到页面。

另一个疯狂的想法是不使用弹出窗口，而是让用户首先选择页面上的文件，但是一旦用户选择了文件，就会使页面上的所有链接`target=_blank`发生在另一个选项卡中以使任何后续导航发生。我知道这是 hacky 并且不完全是用户友好的，但可能会有所帮助。

无论如何，我会事先通知用户，在这两种情况下都会出现一个新窗口。

**编辑2**

还有一个更疯狂的想法。当用户选择文件并单击链接时，创建一个 iframe，它将覆盖整个页面并隐藏其下方的原始页面并使链接在 iframe 中打开。但它看起来更加hackish，看起来你会遇到很多麻烦。

# recursion - 带有歧义的递归假设构建 - 它叫什么？

> ID：11519450
> 
> 赞同：1
> 
> 时间：2012-07-17T09:16:59.750
> 
> 标签：recursion, artificial-intelligence, reasoning

我经常遇到一个问题（在数据分析或人工智能的广泛领域）。但是我不能说出它的名字，可能是因为我没有正式的 CS 背景。请多多包涵，我举两个例子：

想象一下自然语言解析：

```
The flower eats the cow. 
```

你有一个程序，它接受每个单词，并确定它的类型和它们之间的关系。这句话有两种解读方式：

```
1) flower (substantive) -- eats (verb) --> cow (object) 
```

使用通常的 SVO 词序，或

```
2) cow (substantive) -- eats (verb) --> flower (object) 
```

使用更具诗意的世界秩序。该程序将排除其他可能性，例如“flower”作为动词，因为它跟在“the”之后。然后它会对剩余的可能性进行排名：1) 比 2) 具有更自然的词序，因此它得到更多的分数。但包括花不能吃牛的世界知识，2）还是赢了。所以它可能会返回两个假设，并给出 1）30 分和 2）70 分。

然后，它会记住这两个假设并继续解析文本，然后分支。一个分支假设 1)，一个分支 2)。如果一个分支达到矛盾，或者排名为~0，则将其丢弃。最后，它再次提出了排名假设，但针对整个文本。

* * *

举一个不同的例子，想象一下光学字符识别：

```
 **      **
   **      **  *****
   **   *******
 *******   **
*  **      **
   **      ** 
```

我可以看看笔画，然后说，确定这是一个“H”。在识别出 H 之后，我注意到它周围有污迹，并给它打了一个稍差的分数。

或者，我可以先运行我的污迹识别，并注意到水平线看起来像一个伪影。删除后，我认出这是`ll`or `Il`，并给它一些排名。

处理整幅图像后，可以是`Hlumination`，`lllumination`或`Illumination`。使用字典和总排名，我决定它是最后一个。

* * *

*   一般问题总是某种解析/理解。例子：
    *   自然语言或歧义语言
    *   光学字符识别
    *   寻找路径
    *   处理模棱两可或不完整的用户输入——哪些解释是有意义的，哪些是最合理的？
*   我是递归的。
*   它可以提前退出（当分支/解释没有意义时，或者肯定会以 0 分结束）。所以这可能是某种回溯。
*   *考虑到歧义，它会牢记所有选项。*
*   它基于底部的简单规则`can_eat(cow, flower) = true`。
*   它保持解释的合理性排名。
*   它在元级别上是递归的：它可以分叉/分支到不同的“世界”，在处理下一部分数据时假设不同的假设。
*   它将个人排名（可能使用贝叶斯概率）转发到相关假设。
*   在实践中，会有方法来训练这个东西，确定排名系数，如果树变得太大，就会有截断。

我不知道这叫什么。有人可能会猜测“决策树”或“递归下降”，但我知道这些术语的含义不同。

我知道 Prolog 可以解决这个简单的案例，比如家谱和找出谁是谁的叔叔。但是您必须在代码中提供所有数据，对于我的现实生活案例来说，这样做似乎不够方便或强大。

我想知道，这个问题叫什么，有解决这个问题的常用策略吗？有没有关于这个话题的好文献？是否有理想的 C(++)、Python 库，你是否可以定义一堆规则，并计算出所有的排名和假设？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:57:32.123

我认为没有一个答案适合您拥有的所有要点。但我希望我的链接能让你更接近答案，或者可能会给你一个不同的问题。

我认为最接近的答案是[贝叶斯网络](http://en.wikipedia.org/wiki/Bayesian_network)，因为据我所知，您有相互影响的概率，它也与[条件概率](http://en.wikipedia.org/wiki/Conditional_probability)和[模糊逻辑有关](http://en.wikipedia.org/wiki/Fuzzy_logic)

您还描述了一些遗传编程以及人工神经网络

我可以命名一些可能相关的主题：

[http://en.wikipedia.org/wiki/Rule-based_programming](http://en.wikipedia.org/wiki/Rule-based_programming)

[http://en.wikipedia.org/wiki/Expert_system](http://en.wikipedia.org/wiki/Expert_system)

[http://en.wikipedia.org/wiki/Knowledge_engineering](http://en.wikipedia.org/wiki/Knowledge_engineering)

[http://en.wikipedia.org/wiki/Fuzzy_system](http://en.wikipedia.org/wiki/Fuzzy_system)

[http://en.wikipedia.org/wiki/Bayesian_inference](http://en.wikipedia.org/wiki/Bayesian_inference)

# php - 只显示长度小于的评论，php mysql

> ID：11519453
> 
> 赞同：0
> 
> 时间：2012-07-17T09:17:06.940
> 
> 标签：php, mysql

我做了一个函数，从我的数据库中随机提取 3 条评论。唯一的问题是有时我有一个 150 个单词的评论，而它旁边的 2 个有一个句子或大约 50 个单词。

是否可以只显示最多 70 个字的评论？

```
 function getIndexComments(){
    $query  = "SELECT * FROM tbl_comments ORDER BY RAND() LIMIT 0,3";
                    $result = mysql_query($query);

    while($row = mysql_fetch_array($result)){
        echo "<li><span>".$row['company']."</span>".
        "\"".$row['comments']."\"" .
        "</li>";
    }   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T09:23:20.687

此解决方案将截断超过 70 个单词的评论，并`...`在截断后添加一个。

```
SELECT company, CONCAT(SUBSTRING_INDEX(comments, ' ', 70), '...') AS comments
FROM tbl_comments
ORDER BY RAND()
LIMIT 3 
```

但是，如果您真的想从结果集中***过滤掉***超过 70 个单词的评论，您可以使用：

```
SELECT *
FROM tbl_comments
WHERE ((LENGTH(comments) - LENGTH(REPLACE(comments, ' ', ''))) + 1) <= 70
ORDER BY RAND()
LIMIT 3 
```

^ 这本质上是计算`comments`字段中的空格数并将该计数加 1 => 给我们字数...然后我们检查该计数是否超过 70，如果是，则将其过滤掉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:20:46.123

一个解决方案可能是使用 REGEXP '.{0, 70}' 或类似的东西:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T09:21:42.310

如果您将单词定义为由空格分隔的字符串，则类似于以下内容会起作用：

`SELECT x FROM y WHERE SUM( LENGTH(x) - LENGTH(REPLACE(x, ' ', ''))+1) < 70`

您可以通过添加逗号、句点等来扩展它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T09:27:10.437

以下是将评论截断为 70 个字符的长度，而不会截断单词。

```
SELECT
  LEFT(str, cutpos) AS str1
FROM (
  SELECT
    comments AS str,
    70 - IFNULL(NULLIF(LOCATE(' ', REVERSE(LEFT(comments , 70))), 0) - 1, 0) AS cutpos
   FROM tbl_comments
) s 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T09:23:40.687

您可以让 CSS 使用

```
text-overflow:ellipsis; 
```

这将添加点和容器的固定宽度/高度，您可以根据需要渲染

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-17T09:23:43.870

为什么要因为评论太长而删除评论？我建议你做一个限制显示评论长度的输出。`...`意思是，如果太长，请添加到评论中。

将它们全部放在 div 中并将其添加到样式中：

```
overflow: hidden;
white-space: nowrap;
text-overflow: ellipsis;
width: 200px; 
```

希望有帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-17T09:31:00.593

或者，您可以使用 PHP 的[substr()](http://php.net/manual/en/function.substr.php)函数截断它。

我认为（未经测试）这样的事情应该这样做：

```
function getIndexComments(){
    $query  = "SELECT * FROM tbl_comments ORDER BY RAND() LIMIT 0,3";
    $result = mysql_query($query);

    while($row = mysql_fetch_array($result)) {
        $comments = preg_replace('/\s+?(\S+)?$/', '', substr($row['comments'], 0, 70) . '...';

        echo '<li><span>' . $row['company'] . '</span>"' . $comments . '"</li>';
    }   
} 
```

这会将 $row['comments'] 截断为 70 个单词并附加一个“...”。

# java - Java heapdump 分析查找实例化对象的源

> ID：11519456
> 
> 赞同：2
> 
> 时间：2012-07-17T09:17:15.720
> 
> 标签：java, out-of-memory, heap-memory, jvisualvm, jhat

我正在使用 jvisualvm 分析堆转储。从报告中我可以看到类、实例数和占用的大小。

我想知道的是 - 这些对象的来源（哪个类实例化）。对于给定的对象，如果我可以知道所有源类以及每个类创建的实例数，我想很容易识别出不好的候选对象。

这可能吗？如果是这样，是否有比其他工具更好的工具来提供此类信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T09:27:24.843

YourKit 按大小和数量提供分配跟踪。您可以搜索创建的特定类并找到热点。评估版是免费的。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:35:00.853

尝试：

[http://dr-brenschede.de/bheapsampler](http://dr-brenschede.de/bheapsampler)易于理解的总结或 [http://www.eclipse.org/mat](http://www.eclipse.org/mat)更详细的分析

这些工具完全符合您的要求

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T16:51:46.330

你试过了吗

```
jhat <yourdump> 
```

假设您的作品具有以下形式：

私人废话=新废话（）；

对于每个实例，您都可以看到谁拥有对它的引用。它还提供了强大的查询语言 [OQL]。参见示例： [jhat OQL AND in where 子句](https://stackoverflow.com/questions/8833353/jhat-oql-and-in-where-clause)

但是，如果您在其他地方创建它并简单地将其传递给另一个类字段，您将无法从内存转储中找到它[使用任何工具]，因为它只是一个快照。

# cordova - 带有 phonegap 的应用程序不起作用。它没有得到坐标

> ID：11519461
> 
> 赞同：0
> 
> 时间：2012-07-17T09:17:43.773
> 
> 标签：cordova, coordinates

我有一个带有 phonegap 的应用程序，当我使用 Chrome 的 Ripple Extension 测试它时它可以工作（获取坐标）。但是当我在移动设备上测试它时，它没有得到任何坐标……我用 HTC 和三星 Galaxy 测试过，它没有得到任何坐标……这是什么原因造成的？非常感谢，丹尼尔

**编辑：** 下面的评论中有一个小提琴。使用 cordova-1.9.0.js 、 jquery-1.7.1.min.js 、 jquery.mobile-1.1.0.min.css 和 jquery.mobile-1.1.0.min.js

这是失败的代码部分，因为在移动设备中进行测试时，它不会返回任何坐标（应用程序不会访问 onSuccess 或 onError 函数）：

document.addEventListener("deviceready", onDeviceReady, false);

```
var watchID = null;

    // PhoneGap ha cargado -> Llamada al objeto geolocation para localizar el dispositivo por GPS
    function onDeviceReady() {
    // Throw an error if no update is received every 1 seconds
    var options = { timeout: 1000 };
    watchID = navigator.geolocation.watchPosition(onSuccess, onError, options);
} 
```

我刚刚在 phonegap 的官方文档中读到：*Android 2.x 模拟器不会返回地理位置结果，除非 enableHighAccuracy 选项设置为 true。* 这可能是我的问题，但我在真正的移动 android 设备中进行测试，而不是在模拟器中......这是我阅读的链接：http: [//docs.phonegap.com/en/1.9.0/cordova_geolocation_geolocation.md。 html#Geolocation](http://docs.phonegap.com/en/1.9.0/cordova_geolocation_geolocation.md.html#Geolocation)最后是*Android 怪癖*

# gwt - GWT Header 复选框以选中/取消选中我表中的所有复选框

> ID：11519466
> 
> 赞同：2
> 
> 时间：2012-07-17T09:17:56.817
> 
> 标签：gwt, checkbox, header, celltable

我用 Google Web Toolkit 创建了一个 CellTable。我刚开始使用它，我对它的了解非常少......但是我正在寻找一个教程或只是一个如何在 CellTable 标题中创建复选框的代码示例，但我发现我不明白或它没有用。

到目前为止，我已经得到了这个代码来为复选框和一个普通表创建一个列，这与谷歌的 CellTable 教程基本相同：

```
Column<Contact, Boolean> checkColumn = new Column<Contact, Boolean>(
new CheckboxCell(true, false)) {

@Override
public Boolean getValue(Contact contact) {
    return null;
}

};

table.addColumn(checkColumn, SafeHtmlUtils.fromSafeConstant("<br/>"));
table.setColumnWidth(checkColumn, 40, Unit.PX); 
```

现在我正在搜索代码以将复选框添加到标题以及如何使其选中或取消选中所有复选框。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T19:43:17.900

从[我的博客](http://pgt.de/2012/05/09/checkbox-in-cell-table-data-grid-header/)文章：

这是一个简单的列标题，用于选择/取消选择表中的所有行。当所有行都被选中时，标题会自动被选中。单击标题中的复选框会导致选择或取消选择所有行。

[![选择](../Images/91372ffe6dff994d6e76eadc34d27054.png)](https://i.stack.imgur.com/1HKv4.png)

我正在使用选择模型和数据列表提供程序来执行选择魔术。它可能并不适合所有人。

这是我的自定义标题：

```
public final class CheckboxHeader extends Header {

    private final MultiSelectionModel selectionModel;
    private final ListDataProvider provider;

    public CheckboxHeader(MultiSelectionModel selectionModel,
            ListDataProvider provider) {
        super(new CheckboxCell());
        this.selectionModel = selectionModel;
        this.provider = provider;
    }

    @Override
    public Boolean getValue() {
        boolean allItemsSelected = selectionModel.getSelectedSet().size() == provider
                .getList().size();
        return allItemsSelected;
    }

    @Override
    public void onBrowserEvent(Context context, Element elem, NativeEvent event) {
        InputElement input = elem.getFirstChild().cast();
        Boolean isChecked = input.isChecked();
        for (TYPE element : provider.getList()) {
            selectionModel.setSelected(element, isChecked);
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T09:52:42.713

请参阅[http://code.google.com/p/google-web-toolkit/issues/detail?id=7014](http://code.google.com/p/google-web-toolkit/issues/detail?id=7014)

# javascript - Downloading files using html5 blobs in a chrome-extension

> ID：11519469
> 
> 赞同：1
> 
> 时间：2012-07-17T09:18:03.103
> 
> 标签：javascript, html, google-chrome-extension, blob

Im trying to achieve the same goal as OP there: [Downloading mp3 files using html5 blobs in a chrome-extension](https://stackoverflow.com/questions/6165266/downloading-mp3-files-using-html5-blobs-in-a-chrome-extension/11518906#11518906) but not the him's code, not the solution offered in discussion does not work for my google-chrome 19.0.1084.46. Im working in chrome-console on the local (file://) page, and errors for this code:

```
finalUrl = "http://cs1076.userapi.com/u3040678/audio/d7ff6874cfa4.mp3";
var xhr = new XMLHttpRequest();

xhr.open("GET", finalURL, true);

xhr.setRequestHeader('Content-Type', 'octet-stream');
xhr.setRequestHeader('Access-Control-Allow-Origin', '*');

xhr.onreadystatechange = function() 
{
    if(xhr.readyState == 4 && xhr.status == 200) 
    {   
        var bb = new (window.BlobBuilder || window.WebKitBlobBuilder)();
        bb.append(xhr.responseText);
        var blob = bb.getBlob("application/octet-stream");

        var saveas = document.createElement("iframe");
        saveas.style.display = "none";

        saveas.src = window.webkitURL.createObjectURL(blob); 

        document.body.appendChild(saveas);

        delete xhr;
        delete blob;
        delete bb;
    }
}
xhr.send(); 
```

looks like

> OPTIONS [http://cs1076.userapi.com/u3040678/audio/d7ff6874cfa4.mp3](http://cs1076.userapi.com/u3040678/audio/d7ff6874cfa4.mp3) 405 (Not Allowed) cs1076.userapi.com/u3040678/audio/d7ff6874cfa4.mp3:1 XMLHttpRequest cannot load [http://cs1076.userapi.com/u3040678/audio/d7ff6874cfa4.mp3](http://cs1076.userapi.com/u3040678/audio/d7ff6874cfa4.mp3). Origin null is not allowed by Access-Control-Allow-Origin.

And the second subquestion: in according to [How can i generate a file and offer it for download in plain javascript?](https://stackoverflow.com/questions/6175421/how-can-i-generate-a-file-and-offer-it-for-download-in-plain-javascript/11518859#11518859) - is the creation of iframe the best way to offer file to download?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:05:08.250

As Andrew stated your first problem is probably that your doing it from file://. Try doing it from an extension.
After that you'll probably like to know that from Chrome 19 you can ask for the response from an xhr to be a blob.
Then for saving the file your better off using something like [FileSaver.js](https://github.com/eligrey/FileSaver.js/ "FileSaver.js") to save the file. The iframe way works but you end up with an awful file name.
Here's an example to get you going....

**manifest.json**

```
{
  "name": "Download a file and click to save.",
  "version": "1.0",
  "permissions": [
    "tabs", "<all_urls>"
  ],
  "browser_action": {
      "default_title": "Download a file and click to save.",
      "default_icon": "icon.png",
      "default_popup": "popup.html"
  },
  "content_security_policy": "script-src 'self' https://raw.github.com/; object-src 'self'",
  "manifest_version" : 2
} 
```

**popup.html**

```
<!doctype html>
<html>
  <head>
    <!-- https://github.com/eligrey/FileSaver.js -->
    <script src="https://raw.github.com/eligrey/FileSaver.js/master/FileSaver.min.js"></script>
    <!-- https://github.com/allmarkedup/jQuery-URL-Parser/tree/no-jquery -->
    <script src="https://raw.github.com/allmarkedup/jQuery-URL-Parser/no-jquery/purl.js"></script>
    <script src="popup.js"></script>
  </head>
  <body>
    <div id="message">Getting File.....</div>
  </body>
</html> 
```

**popup.js**

```
window.URL = window.URL || window.webkitURL;

var xhr = new XMLHttpRequest();
xhr.open('GET', 'http://or.cdn.sstatic.net/chat/so.mp3', true);
xhr.filename = purl('http://or.cdn.sstatic.net/chat/so.mp3').attr('file');
xhr.responseType = 'blob';

xhr.onload = function(e) {
    var message = document.querySelector('#message');
    message.parentNode.removeChild(message);

    var link = document.createElement('A');
    link.innerText = 'Download File';
    link.href = '#';
    link.addEventListener('click', saveFile, false);
    document.body.appendChild(link);

};

xhr.onerror = function() {
    var message = document.querySelector('#message');
    message.innerText = 'Error getting file';
    this.filename = '';
}

xhr.send();

saveFile = function() {
    saveAs(xhr.response, xhr.filename); // saveAs function is from FileSaver.js
} 
```

# javascript - RequestAnimationFrame FPS 随窗口大小而变化

> ID：11519475
> 
> 赞同：1
> 
> 时间：2012-07-17T09:18:17.617
> 
> 标签：javascript, canvas, requestanimationframe

我有一个 Canvas 调整大小以在调整窗口大小时自动填充整个窗口。

在画布的一个角落，我正在绘制 5 个动画精灵。这里没问题。

它以完美的 60 fps 运行，但是当我最大化窗口以填充屏幕时，fps 下降到 30 fps 并在 30 fps 和 60 fps 之间波动。当我再次缩小窗口时，它会恢复到一致的 60 fps。

所有的动画都在画布的一个角落，画布的其余部分是空白的。我知道在每个刻度上重绘整个画布是非常低效的，并且应该只重绘正在变化的部分。

但我的问题是 - 这是正常的行为吗？是否应该重绘整个屏幕，即使屏幕除了角落里的几个精灵之外是空白的，也会导致 fps 在 30 到 60 fps 之间波动？

浏览器：Chrome 20 操作系统：OSX Lion 计算机：Macbook Air

我包括了一个小提琴：http: [//jsfiddle.net/XQpzU/3561/](http://jsfiddle.net/XQpzU/3561/)

尝试使渲染窗口更大，FPS 会下降。

# java - 在大流量中捕获数据包的最佳分类方法是什么

> ID：11519478
> 
> 赞同：-1
> 
> 时间：2012-07-17T09:18:23.717
> 
> 标签：java, classification, data-storage, packet-capture, jpcap

我想从拥挤的网络中捕获数据包并按用户请求对其进行分类。我使用*java*和*jpcap*来捕获数据包。现在我为每个请求数据包使用数组线程。它真的很慢，线程之间有很多冲突。**为此目的最好的数据结构是什么？**

之后，我将数据包（请求/响应）保存到一个文件中，这对于如此繁重的工作来说非常慢。**我应该怎么做才能保存我的数据？**

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T19:18:00.667

我需要一些示例代码来帮助您完成第一部分，因为您的问题有点含糊。`what's the best data structure for this purpose?`可以是任何东西，具体取决于您需要该结构的确切用途。

`JpcapWriter`速度相当快。我需要从 2 分钟的捕获中捕获大约 330mb 的原始数据包数据，并且在继续捕获的同时将其写入磁盘没有问题。

# azure - 远程桌面卡在“保护远程连接”上

> ID：11519483
> 
> 赞同：-1
> 
> 时间：2012-07-17T09:18:46.413
> 
> 标签：azure, remote-desktop, rdp

远程桌面卡在“保护远程连接”上。我正在从 Windows 7 连接到 Azure 上的 Windows 2008 VM。我已经成功连接了几天。我已经等了超过 15 分钟。我没有对服务器的本地访问权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T19:19:20.603

请先从 Portal 验证您的 Windows Azure VM 是否处于**运行状态**，然后再尝试 RDP。根据您的错误和经验，您的 VM 可能未运行或存在问题。尝试从管理预览门户或使用 PowerShell 重新启动 VM，然后尝试 RDP，它应该可以工作。

# python - BeautifulSoup：提取 HTML 标签属性

> ID：11519484
> 
> 赞同：1
> 
> 时间：2012-07-17T09:18:47.903
> 
> 标签：python, html, beautifulsoup

有没有办法只在`text=True`不指定标签的情况下获取 HTML 标签属性。

例子：

```
html=<p class="c4">SOMETEXT</p> 
```

我可以做：

```
[tag.attrs for tag in soup.findAll('p')]
>>> [[(u'class', u'c1')]] 
```

有没有办法：

```
[text.attrs for text in soup.findAll(text=True)] 
```

帮助很大！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T09:23:29.557

认为您想要这个，因为问题已得到澄清：

```
[tag.attrs for tag in soup.findAll(True) if tag.string] 
```

`.findAll(True)`返回文档中的**所有**标签，所以`.attr`即使它是空的，它们也会有一个，如果标签有`.string`内容，则过滤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T09:29:39.663

```
>>> from bs4 import BeautifulSoup as bs
>>> html = '<p class="c4">SOMETEXT</p><p class="c5"></p>'
>>> soup = bs(html)
>>> [tag.attrs for tag in soup.findAll('p') if tag.string]
[{'class': ['c4']}] 
```

# c - C中有指针快作为堆栈吗？（没有间接但仍然是堆）

> ID：11519486
> 
> 赞同：-1
> 
> 时间：2012-07-17T09:18:50.207
> 
> 标签：c, reference

我正在从 IL（编译的 C#\VB 代码）创建一个反编译器。有没有办法在 C 中创建引用？

**编辑：**
我想要比指针更快的东西，比如堆栈。有这样的事情吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T09:19:55.297

引用只是语法上糖衣的指针——指针就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T09:48:26.373

*栈*和*指针*是两个完全独立的概念。

引用就像一个指针，一种访问/传递变量而不复制它的方法。另一方面，栈和堆是变量存在的两个不同的地方。变量是否应该存在于堆栈或堆中的决定完全独立于您传递它的方式。

*   如果您需要一个局部变量，其生命周期会自动耦合到您的函数范围，请在堆栈上声明它。分配很快，但是当函数作用域结束时对象就消失了。考虑到这一点，您可以通过值或通过指针将变量传递给其他函数。
*   如果您需要一个在函数范围内存在的变量，则需要将其设为全局（或静态），或者将变量动态地放在堆上。分配有点慢，但一旦它在那里，你可以像其他一样使用它。您可以通过值或指针传递它。（请记住，您最终需要取消分配动态创建的对象。）

如果堆分配确实是性能瓶颈，则应确保尽可能使用自动变量（在堆栈上）。然后，对您的分配模式进行分析。最后[优化您的分配策略](https://stackoverflow.com/q/1995871/1025391)。

# mysql - Cakephp 1.3.14 未加载数据库模式

> ID：11519492
> 
> 赞同：2
> 
> 时间：2012-07-17T09:19:08.407
> 
> 标签：mysql, sql, cakephp, cakephp-1.3

我们最近对我们的网站进行了一些更改，以准备进行预生产：

*   迁移到负载平衡架构
*   现在使用 memcache/memcached 来维护会话数据
*   启用 APC

现在，一切正常，直到我们进行了一些我们无法回忆的更改，导致数据库无法正确加载模式。这是一些调试的输出：

```
 Warning (512): SQL Error: 1064: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1 [CORE/cake/libs/model/datasources/dbo_source.php, line 684]

    Query: SHOW FULL COLUMNS FROM

    Warning (2): Invalid argument supplied for foreach() [APP/models/datasources/dbo/dbo_mysql.php, line 127]

    Warning (2): array_keys() expects parameter 1 to be array, boolean given [CORE/cake/libs/model/datasources/dbo_source.php, line 1968]

    Notice (8): Trying to get property of non-object [CORE/cake/libs/model/datasources/dbo_source.php, line 812]

    Query: SHOW FULL COLUMNS FROM

    Query: SHOW FULL COLUMNS FROM

    Query: SHOW FULL COLUMNS FROM

    Query: SHOW FULL COLUMNS FROM

    Query: SHOW FULL COLUMNS FROM

    Query: SHOW FULL COLUMNS FROM 
```

如您所见，它没有加载表名。

我们注意到的另一个问题是，当查询生成时，它是这样生成的：

`SELECT Project.id FROM AS Project WHERE 1=1`

请注意，没有表名，它只是尝试在空白表名上创建别名。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T08:29:01.097

> 我们最近对我们的网站进行了一些更改，以准备进行预生产：

值得庆幸的是，您可以对代码更改进行版本控制，并且可以简单地回滚，直到找到工作版本并进行比较以找到重大更改。使用 git，这很容易使用[git bisect](https://www.kernel.org/pub/software/scm/git/docs/git-bisect.html)完成。

不？好..

## 调试并确定原因

与任何错误一样 - 第一步应该是查看错误的来源：

```
// cake/models/datasources/dbo/dbo_mysql.php
$cols = $this->query('SHOW FULL COLUMNS FROM ' . $this->fullTableName($model));

foreach ($cols as $column) { // #127 
```

这里应该清楚的是，Cake 无法确定模型的完整表名。

## 您正在尝试查询没有表的模型

查看源代码`fullTableName`：

```
// cake/libs/model/datasources/dbo_source.php
function fullTableName($model, $quote = true) {
        if (is_object($model)) {
                $table = $model->tablePrefix . $model->table;
        } elseif (isset($this->config['prefix'])) {
                $table = $this->config['prefix'] . strval($model);
        } else {
                $table = strval($model);
        }
        if ($quote) {
                return $this->name($table);
        }
        return $table;
} 
```

应该清楚，模型根据蛋糕没有表。

常见原因：

*   模型属性`useTable`设置为`false`
*   没有`describe`权限

鉴于问题中的信息 - 这很可能是第一个原因。

# types - 为什么 Smalltalk 有时被称为“动态类型”？

> ID：11519494
> 
> 赞同：2
> 
> 时间：2012-07-17T09:19:18.213
> 
> 标签：types, smalltalk, pharo

我试图理解为什么 Smalltalk 有时被称为“动态类型”而不是“无类型”，我也读了很多书，这似乎很有意义。

~~Smalltalk 中没有变量、参数和方法返回的类型注释 - 那么您会将对象的类型（如果您说对象的类型是它的类）与什么进行比较？~~

~~还有动态类型和动态类型检查不一样吗？因此，如果 Smalltalk 是动态类型的，这意味着 Smalltalk 内部确实会在运行时为变量、参数、方法返回提供类型？可以？~~

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T10:48:13.827

“动态类型”在某些编程语言社区中广泛用于表示“动态检查”。同样，在更多以理论为导向的圈子中，它被广泛认为在技术上具有误导性，因为所检查的不是任何形式意义上的类型。然而，这种用法现在太普遍了，没有机会纠正它。

另请参阅我[对反问题](https://stackoverflow.com/questions/9154388/does-untyped-also-mean-dynamically-typed-in-the-academic-cs-world/9166519#9166519)的回答以了解更多背景信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T14:34:10.590

一种惯例是从两个维度比较编程语言：

*   从动态类型到静态类型的连续体
*   从强类型到弱类型的连续体

动态类型通常意味着在编译时不检查类型，而它们用于静态类型。

强类型通常意味着运行时的类型是永远不会改变的独特类型，而弱类型意味着可以根据上下文更改底层类型。

据说 Smalltalk 有 Strong Dynamic Typing。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T15:46:15.247

有关静态/动态类型和隐式/显式类型的全面讨论，您可能需要查看：http: [//blogs.perl.org/users/ovid/2010/08/what-to-know-before-debating-type -systems.html](http://blogs.perl.org/users/ovid/2010/08/what-to-know-before-debating-type-systems.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-17T16:21:06.867

在 Smalltalk 中，每个对象都有它的类型 - 类，它定义了可以通过其实例（以及如何）进行的操作。因此，当您向某个对象发送消息时，它的类会检查该消息是否可以被处理以及如何处理。

另一方面，与静态类型语言相比，变量可以在程序的整个生命周期中包含不同类型的不同对象，因此没有基于变量（或参数）的类型检查。

正如 Damien 建议的一篇优秀文章所指出的那样 - 类型的概念在静态类型语言和动态类型语言中是完全不同的。如果尝试直接比较，这种差异可能会导致很多混乱。

# windows-phone-7 - 如何获得同步的 HTTP 响应

> ID：11519497
> 
> 赞同：0
> 
> 时间：2012-07-17T09:19:32.090
> 
> 标签：windows-phone-7

我想同步调用一个restful api。我想知道如何同步访问服务 api？是否可以同步调用api？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:45:31.083

您的方案不需要同步调用。您所需要的只是处理传入的响应，而异步模型可以完美地做到这一点。

假设您正在使用 WebClient（很容易适应任何场景）：

```
WebClient client = new WebClient();
client.DownloadStringCompleted += (s,e) =>
{
     if (e.Result == "Paid")
        LoadingScreen.Visibility = Visibility.Collapsed;
};
client.DownloadStringAsync(new Uri("http://somerestapi.out.there"));
LoadingScreen.Visibility = Visibility.Visible; 
```

# mysql - phpMyAdmin Magento 价格更新

> ID：11519498
> 
> 赞同：1
> 
> 时间：2012-07-17T09:19:34.977
> 
> 标签：mysql, magento, phpmyadmin

我有我的 Magento 数据库的备份，不知何故，我需要使用已导出的旧数据库备份中的价格更新实时站点上的数据库，`mg_catalog_product_index_price.sql`但不确定是否还有更多表。

我需要以某种方式将该表导入实时站点数据库，当我尝试仅使用 phpMyAdmin 中的导入选项卡时出现此错误。

`#1062 - Duplicate entry '108-0-1' for key 'PRIMARY'`

有人对此有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:24:31.070

请注意，“结构”未选中，“导出类型”设置为“更新”：

![在此处输入图像描述](../Images/ad56ba64734020a28da6ca22fe130ebb.png)

# .net - 列出 CalDAV 上可供用户使用的日历 (Bedework)

> ID：11519499
> 
> 赞同：1
> 
> 时间：2012-07-17T09:19:46.100
> 
> 标签：.net, caldav, ipworks

我使用 IP *Works .Net CalDAV 组件*在 Bedework 快速入门日历服务器上运行，该服务器设置在 localhost:8080 上。为了访问日历，我需要知道它们的资源 URI。

当使用 Baikal (SabreDAV) 作为服务器时，我只是使用 WebDAV ListDirectory 查看子目录，这将是各种日历 URI。

但是，我无法在 Bedework 上完成这项工作，它只返回基本 URL。

' [http://localhost:8080/ucaldav/principals/users/vbede/](http://localhost:8080/ucaldav/principals/users/vbede/) '

在 CalDAV 上为用户获取日历的适当方法是什么？更具体地说，关于 Bedework？

*   [http://www.nsoftware.com/ipworks/](http://www.nsoftware.com/ipworks/)
*   [https://wiki.jasig.org/display/BWK38/The+Bedework+Quickstart](https://wiki.jasig.org/display/BWK38/The+Bedework+Quickstart)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:08:05.667

Bedework 和 SabreDAV 使用不同的身份验证方案。将默认 BasicAuth 与 Bedework 一起使用，并将 Digest 与 SabreDAV 一起使用。

此外，将 WebDav.Depth 限制为直系子级，并使用：

```
http://localhost:8080/ucaldav/user/#{username}/ 
```

# javascript - 具有多种颜色的按钮文本

> ID：11519502
> 
> 赞同：4
> 
> 时间：2012-07-17T09:19:50.710
> 
> 标签：javascript, jquery, css, button, input

我有一个输入按钮元素，我想包含“带我去那里>”字样，但我想让尖括号的颜色与文本的其余部分不同。

这可能吗？如有必要，我很乐意使用 javascript 或 jquery 修复程序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T09:25:09.080

这个怎么样：http: [//jsfiddle.net/w3KHd/1/](http://jsfiddle.net/w3KHd/1/)

使用带有跨度的按钮，将字体颜色设置为您想要的任何颜色。例如：

```
<button>Take me there <span style="color: red"> &gt; </span></button> 
```

**更新：**

如果要将按钮用作提交按钮，请使用：

```
<button type="submit">Take me there <span style="color: red"> &gt; </span></button> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:00:07.500

如果你可以使用`<button>`而不是`<input type="button">`你可以使用“***首字母***”伪类，如下所示。
你的风格类：

```
<style>
button:first-letter {
color:red;
}</style> 
```

按钮：

```
<button type="submit">&lt;Take me there ></button> 
```

# android - Android：在 DownloadManager 中显示下载进度条

> ID：11519508
> 
> 赞同：1
> 
> 时间：2012-07-17T09:20:00.070
> 
> 标签：android, download, notifications, download-manager

我想从服务器下载文件并在通知进度栏中显示进度，就像使用 DownloadManager 类时一样。我不想使用 DownloadManager 类，因为它只能保存到外部存储器，而我希望我的文件保存在内部。该怎么办 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:24:11.467

我建议使用 AsyncTask 或 ProgressDialog。这些中的任何一个都可以吗？

[使用 Android 下载文件，并在 ProgressDialog 中显示进度](https://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog)

# java - 密码字段的正则表达式模式

> ID：11519514
> 
> 赞同：1
> 
> 时间：2012-07-17T09:20:15.713
> 
> 标签：java

我有一个密码字段，我希望至少有一个特殊字符、至少一个大写字符和至少一个数字。任何人都可以帮我解决正则表达式模式。

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T09:24:13.480

```
Pattern pwPattern = Pattern.compile("(?=.*[@#$!\"&])(?=.*[A-Z]).*\\d.*"); 
```

如果您想允许更多，请在第一个括号内添加更多特殊字符，我只是添加了一些。

像这样使用它：

```
if (pwPattern.matcher(passWordToTest).matches()) {
  ...
} 
```

# objective-c - 在 AVPlayer 中静音 HTTP 直播流

> ID：11519516
> 
> 赞同：5
> 
> 时间：2012-07-17T09:20:22.107
> 
> 标签：objective-c, ios, streaming, avplayer, http-live-streaming

我已经尝试解决这个问题了 48 小时，但没有提出任何建议。我有 2 个 AVPlayer 对象播放不同的 http 直播流。显然，我不希望他们同时播放音频，所以我需要一种方法来静音其中一个视频。

Apple[建议将此](https://discussions.apple.com/thread/4058884?start=0&tstart=0)用于静音 AVPlayer 中播放的音轨...

```
NSMutableArray *allAudioParams = [NSMutableArray array];
for (AVPlayerItemTrack *track in [_playerItem tracks]) {
    if ([track.assetTrack.mediaType isEqualToString:AVMediaTypeAudio]) {
        AVMutableAudioMixInputParameters *audioInputParams = [AVMutableAudioMixInputParameters audioMixInputParameters];
        [audioInputParams setVolume:0.0 atTime:CMTimeMakeWithSeconds(0,1)];
        [audioInputParams setTrackID:[track.assetTrack trackID]];
        [allAudioParams addObject:audioInputParams];
        // Added to what Apple Suggested
        [track setEnabled:NO];
    }
}

AVMutableAudioMix *audioZeroMix = [AVMutableAudioMix audioMix];
[audioZeroMix setInputParameters:allAudioParams];
[_playerItem setAudioMix:audioZeroMix]; 
```

当这不起作用时（经过多次迭代），我找到了[AVPlayerItemTrack](https://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVPlayerItemTrack_Class/Reference/Reference.html)的 enabled 属性并尝试将其设置为 NO。也没什么。这甚至没有注册为做任何事情，因为当我尝试 NSLog(@"%x",track.enabled) 时，它仍然显示为 1。

我很茫然，我想不出另一篇我可以阅读并重新阅读以获得好的答案的文档。如果那里有人可以提供帮助，那就太好了。

****更新***：我拿到了 Apple，根据 AVFoundation 团队的说法，不可能静音或禁用 HLS 视频的轨道。我个人觉得这是一个错误，所以我提交了一个[错误报告](https://bugreport.apple.com/)（你应该这样做告诉苹果这是一个问题）。您还可以尝试通过他们的反馈页面提交[功能增强请求。](http://www.apple.com/feedback/iphone.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T22:47:23.810

**新的 iOS 7 答案：** AVPlayer 现在有 2 个新属性“音量”和“静音”。使用那些！

* * *

这是 iOS 7 之前生活的原始答案：

我一直在处理同样的事情。我们创建了静音流和带音频的流。要静音或取消静音，请致电`[player replaceCurrentItemWithPlayerItem:muteStream]`。

我还提交了错误报告。看起来`AVPlayer`在 MacOS 10.7 上具有此功能，但尚未在 iOS 上实现。

[`AVAudioMix`记录在此处不适用于 URL 资产](http://developer.apple.com/library/ios/#qa/qa1716/_index.html)

当然我还是试过了，和你一样，我发现它真的不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:09:18.403

最好的解决方案是实际嵌入带有两个音轨的流 url 提要！一个是普通音频，另一个是静音音频。

这样做更有意义，而不是 ComPuff 建议的方式作为您实际创建两个单独的 URL 流的方式 - 这不是必需的。

这是您可以用来切换音轨的代码：

```
 float volume = 0.0f;

AVPlayerItem *currentItem = self.player.currentItem;
NSArray *audioTracks = self.player.currentItem.tracks;

DLog(@"%@",currentItem.tracks);

NSMutableArray *allAudioParams = [NSMutableArray array];

for (AVPlayerItemTrack *track in audioTracks)
{
    if ([track.assetTrack.mediaType isEqual:AVMediaTypeAudio])
    {
        AVMutableAudioMixInputParameters *audioInputParams = [AVMutableAudioMixInputParameters audioMixInputParameters];
        [audioInputParams setVolume:volume atTime:kCMTimeZero];
        [audioInputParams setTrackID:[track.assetTrack trackID]];
        [allAudioParams addObject:audioInputParams];
    }
}

if ([allAudioParams count] > 0) {
    AVMutableAudioMix *audioMix = [AVMutableAudioMix audioMix];
    [audioMix setInputParameters:allAudioParams];
    [currentItem setAudioMix:audioMix];
} 
```

唯一的问题是我的流 url 只显示两个轨道（一个用于视频，一个用于音频），而它实际上应该是三个轨道（2 个音轨）。我无法确定这是流 url 还是我的代码的问题！任何人都可以发现代码中的任何错误吗？

# android - 如何防止从我的应用程序启动其他应用程序

> ID：11519520
> 
> 赞同：1
> 
> 时间：2012-07-17T09:20:32.907
> 
> 标签：android

我想编写一个可以阻止某些应用程序启动的应用程序。我的要求是在一段时间内阻止某些应用程序。那么阻止或阻止其他应用程序通过我的应用程序启动或启动的方法是什么。

我的问题是——是否可以阻止从我的应用程序启动其他应用程序？如果是，那么方法是什么。

我尝试杀死正在运行的应用程序。但它只会在应用程序在后台时杀死。当应用程序处于打开状态（显示在屏幕上）时，应用程序的杀戮不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:40:52.753

> 那么阻止或阻止其他应用程序通过我的应用程序启动或启动的方法是什么。

编写您自己的主屏幕，这样您就是执行启动的人，并在那里实施您的启动规则。

这将涵盖基本场景。它不会帮助：

*   停止通过通知启动的应用程序（例如，响应传入的 SMS）
*   停止通过平板电脑系统栏中的其他内容启动的应用程序（例如，某些平板电脑允许您从那里进入设置应用程序）
*   阻止用户以安全模式重新启动他们的设备并摆脱您的主屏幕

处理这些情况的唯一方法是创建您自己的 ROM 模块并调整操作系统，然后分发该 ROM 模块（例如，在您自己的设备上）。

# ruby-on-rails - rake 测试：单位中止但为什么？

> ID：11519521
> 
> 赞同：1
> 
> 时间：2012-07-17T09:20:34.230
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我目前正在使用 Rails 第 4 版（Rails 3.2+）进行敏捷开发。我正在尝试对“产品”模型进行单元测试：

```
require 'test_helper'

class ProductTest < ActiveSupport::TestCase
   test "product attributes must not be empty" do
    product = Product.new
    assert product.invalid?
    assert product.errors[:title].any?
    assert product.errors[:description].any?
    assert product.errors[:price].any?
    assert product.errors[:image_url].any?
  end
end 
```

这是本书的逐字记录，没有勘误表另有说明。当我运行时：

```
rake test:units 
```

我得到以下信息：

```
Run options: 

# Running tests:

F

Finished tests in 0.079901s, 12.5155 tests/s, 25.0310 assertions/s.

  1) Failure:
test_product_attributes_must_not_be_empty(ProductTest) [/Users/robertquinn/rails_work/depot/test/unit/product_test.rb:7]:
Failed assertion, no message given.

1 tests, 2 assertions, 1 failures, 0 errors, 0 skips
rake aborted!
Command failed with status (1): [/Users/robertquinn/.rvm/rubies/ruby-1.9.3-...]

Tasks: TOP => test:units
(See full trace by running task with --trace)
Robert-Quinns-MacBook-Pro:depot robertquinn$ 
```

这是我的产品模型验证：

```
class Product < ActiveRecord::Base
  attr_accessible :description, :image_url, :price, :title

  validates :description, :image_url, :price, presence: true
  validates :price, numericality: {greater_than_or_equal_to: 0.01}
  validates :title, uniqueness: true
  validates :image_url, allow_blank: true, format: {
    with: %r{\.(gif|jpg|png)$}i,
    message: 'must be a URL for GIF, JPG or PNG image.'
    }
end 
```

我无法弄清楚为什么这个耙子被中止。该测试创建了一个空的“产品”对象，因此该对象无效，并且每个属性都应该有错误。然而，看起来 rake 在第一个针对 ":title" 属性的断言时中止。我在这里完全一无所知。任何和所有输入将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T08:35:57.447

通过仅验证标题的唯一性，您仍然允许为 nil 的标题，这会使您的测试失败。您需要将验证更改为

```
validates :title, presence: true, uniqueness: true 
```

我还建议您在断言中添加消息。这使得查看哪个断言失败更容易：

```
require 'test_helper'

class ProductTest < ActiveSupport::TestCase
   test "product attributes must not be empty" do
    product = Product.new
    assert product.invalid?, "Empty product passed validation"
    assert product.errors[:title].any?, "Missing title passed validation"
    assert product.errors[:description].any?, "Missing description passed validation"
    assert product.errors[:price].any?, "Missing price passed validation"
    assert product.errors[:image_url].any?, "Missing image URL passed validation"
  end
end 
```

# windows - 样式 0x00000010 的用途

> ID：11519524
> 
> 赞同：3
> 
> 时间：2012-07-17T09:20:37.640
> 
> 标签：windows, winapi, statusbar

在使用 Spy++ 监视 Windows XP Regedit 后，我​​发现状态栏使用了未知样式**0x00000010**。

我尝试使用或不使用此值制作自己的状态栏，但我看不出有什么不同。

我认为，此样式缺少[Common Control Styles值，因为](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775498%28v=vs.85%29.aspx)*commctrl.h*中缺少此值。

有人可以解释这个值的目的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T10:19:39.753

经过一番研究，看起来这个常数被命名为`CCS_NOHILITE`。奇怪的是，它不在 Win32 标头 ( `commctrl.h`) 中，但它在 (或曾经) 在 MFC标头 ( `winres.h`) 中。

可能它存在于公共控件的早期阶段，它没有被记录，但它通过 MFC 标题过滤掉了......

[你可以在这里](http://msdn.microsoft.com/en-us/library/aa314236%28v=vs.60%29.aspx)找到一些文档，但我认为这不再适用，所以现在它可能是无操作的。

# java - 在终端中运行我的 Junit 测试

> ID：11519531
> 
> 赞同：0
> 
> 时间：2012-07-17T09:20:59.190
> 
> 标签：java, junit

我刚开始使用 JUnit。我通过 Intelij IDEA 运行了我的测试，一切都很好，但是当我尝试使用以下代码在终端中运行我的测试时：

```
java -cp /junit4.10/junit-4.10.jar:. /Users/maidini/IdeaProjects/HelloWorld/test/CalculatePriceTest.java 
```

我收到此错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: /Users/maidini/IdeaProjects/HelloWorld/test/CalculatePriceTest/java
Caused by: java.lang.ClassNotFoundException: .Users.maidini.IdeaProjects.HelloWorld.test.CalculatePriceTest.java
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

您知道我应该怎么做才能在终端中成功运行我的测试吗？我也在使用 Mac Lion。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T09:28:41.607

您首先必须使用`javac`;编译您的代码。在您的类路径上加载`.java`源文件将不起作用。请记住添加您的单元测试类和您正在测试的实际类。以及他们可能拥有的任何依赖项。也许您也想将它们捆绑在一个`.jar`文件中，这样您的命令行就不会太长。此外，每次更改代码或测试时不要忘记重新编译。

这很快就会变得多毛。相反，我建议您使用构建工具，例如[Maven](http://maven.apache.org/)。通过正确的 Maven 构建，您只需键入`mvn test`，Maven 将为您处理依赖关系、编译和运行测试。

如果您不想使用 Maven，还可以查看[Ant](http://ant.apache.org/)（最好与[Ivy](http://ant.apache.org/ivy/)结合使用）、[Gradle](http://www.gradle.org/)或任何其他 Java 构建工具。

# android - 从android通过代码调用时获取通话状态

> ID：11519532
> 
> 赞同：0
> 
> 时间：2012-07-17T09:20:59.987
> 
> 标签：android

我知道如何通过来自 android 的代码拨打电话。我们做这样的事情。

```
Intent callIntent = new Intent(Intent.ACTION_CALL);
callIntent.setData(Uri.parse("tel:"+1234567890));
callIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(callIntent); 
```

但在执行此代码后，调用已启动，但我不知道调用是否成功，如果不是，错误或问题是什么。

在通过android代码发送短信时，我们会做这样的事情

```
SmsManager sms = SmsManager.getDefault();
sms.sendTextMessage(phoneNumber, null, message,sentPIntent, deliveredPIntent); 
```

我们通过发送待处理的意图来获取消息状态。我们可以在通话的情况下做类似的事情，以便我知道通话是否成功或者错误是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:50:00.680

AFAIK 您无法检测到呼叫是否成功 - 只是它开始（通过意图）和结束（通过侦听状态更改）。

# c++ - 如何将OpenGL函数封装到C++类中

> ID：11519533
> 
> 赞同：2
> 
> 时间：2012-07-17T09:21:02.113
> 
> 标签：c++, opengl, encapsulation

我想做一些场景渲染，我想将一些 OpenGL 封装到 C++ 类中，我认为这将使程序更加模块化、简洁和可读。例如，我想将帧缓冲区对象封装到 C++ FBO 类中，将像素缓冲区对象封装到 C++ PBO 类中，就像其他可能封装在类中以便于使用的对象一样。我要问的是：

1.  将 OpenGL 对象（FBO、PBO、VBO、VAO 等）封装到 C++ 类中是个好主意吗？
2.  如果是，我怎样才能优雅地做到这一点？任何建议将不胜感激。
3.  我认为封装固定管道和可编程管道可能存在一些差异。由于我想学习现代GPU编程，我是否可以找到学习如何将现代OpenGL函数封装到C++类中的材料？

# ios - 在 for 循环中显示 UIAlertView 后暂停执行

> ID：11519536
> 
> 赞同：0
> 
> 时间：2012-07-17T09:21:12.400
> 
> 标签：ios, uialertview

在我的应用程序中，我想在 for 循环中显示 UIAlertView，并基于“是”、“否”的选择

我想执行后续步骤。由于 UIAlertView 不会暂停执行，因此我无法处理这种情况。拥有 counter global and all 将使我的代码更加复杂。所以有些我想暂停执行，直到用户选择警报按钮。

请让我知道任何解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:29:58.463

首先为您的视图控制器添加`<UIAlertViewDelegate>`到您的文件中：`.h`

```
@interface ViewController : UIViewController <UIAlertViewDelegate> { 
```

然后创建警报并在需要时显示它：

```
- (void)showConfirmAlert
{
    UIAlertView *alert = [[UIAlertView alloc] init];
    [alert setTitle:@"Confirm"];
    [alert setMessage:@"Do you pick Yes or No?"];
    [alert setDelegate:self]; // Notice we declare the ViewController as the delegate
    [alert addButtonWithTitle:@"Yes"];
    [alert addButtonWithTitle:@"No"];
    [alert show];
    [alert release];
} 
```

并实现委托方法来捕捉按钮点击：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 0)
    {
        // Yes, do something
    }
    else if (buttonIndex == 1)
    {
        // No
    }
} 
```

瞧，你可以处理这两种情况。

**编辑：**如果您有许多警报，请将它们全部声明为全局对象，以便您可以在方法中区分每个警报`alertView:clickedButtonAtIndex:`：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{

    if (alertView == alertOne) { //alertOne is a globally declared UIAlertView
        if (buttonIndex == 0)
        {
            // Yes, do something
        }
        else if (buttonIndex == 1)
        {
            // No
        }
    } else if (alertView == alertTwo) { //alertTwo is a globally declared UIAlertView
        if (buttonIndex == 0)
        {
            // Yes, do something
        }
        else if (buttonIndex == 1)
        {
            // No
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:37:28.430

当您显示 AlertView 时打破您的循环，然后在用户选择时再次运行循环或进一步执行。顺便说一句，您实际上想实现什么？

# jquery - JqG rid - 在行单击时防止复选框检查事件并保持行突出显示

> ID：11519537
> 
> 赞同：6
> 
> 时间：2012-07-17T09:21:16.523
> 
> 标签：jquery, jqgrid

我有一个启用了多选的 jqgrid。但是当我单击该行时，我不想选中该复选框。

使用代码片段

```
$("#yourGrid").jqGrid("setGridParam", {
    beforeSelectRow: function(rowId, e) {
       return $(e.target).is("input:checkbox");
    }
}); 
```

从[这篇文章](https://stackoverflow.com/questions/7833301/prevent-click-event-on-row-in-jqgrid)中，我能够避免选择复选框，但现在我无法突出显示特定行。如何启用行的突出显示，同时禁用行单击时的多选。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T13:08:07.300

根据[API](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aoptions&s%5B%5D=multiselect) ，网格上有一个属性应该为您执行此操作。

```
multiboxonly 
```

> 此选项仅在多选选项设置为 true 时有效。当 multiselect 设置为 true 时，单击行上的任意位置会选择该行；当 multiboxonly 也设置为 true 时，只有在单击复选框时才会进行多选（雅虎风格）。单击任何其他行（假设未单击复选框）取消选择所有行并选择当前行。

有了这个，你不应该需要你的`beforeSelectRow`功能：

```
jQuery("#grid").jqGrid({
     . . .
     multiselect: true,
     multiboxonly: true
     . . .
}); 
```

# xml - 如何获取依赖于给定 xml 架构的 xmls 架构列表

> ID：11519540
> 
> 赞同：0
> 
> 时间：2012-07-17T09:21:29.063
> 
> 标签：xml, schema

我有一个包含大约 300 个相互依赖的 XML 模式的文件夹。我有一个高级架构，我想知道它依赖的所有子架构文件。

有什么简单的方法可以得到这个列表。

谢谢， 哈里什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:26:16.557

也许像 Altova 的 SchemaAgent 这样的工具会有所帮助。

或者在 XSLT 中编写您自己的依赖分析器。就像是：

```
<xsl:variable name="docs" select="collection('.?select=*.xsd')"/>

<xsl:function name="f:uses" as="document-node()*"/>
  <xsl:param name="schema" as="document-node()"/>
  <xsl:sequence select="for $h in $schema/*/(xs:include/xs:import/xs:redefine)
                        return doc(@href)"/>
</xsl:function> 
```

它给你直接使用的文件，然后这个函数的递归应用会给你间接使用的文件。

# c# - 如何在 C# 中将逗号分隔的字符串添加到数据表中？

> ID：11519543
> 
> 赞同：2
> 
> 时间：2012-07-17T09:21:39.770
> 
> 标签：c#

让我们考虑一下我有两个逗号分隔的字符串，如下所示。

```
string name = "A,B,C,D";
string value = "100,200,300,400"; 
```

所以我想拆分这两个字符串并想插入到 DataTable 中，如下所示。

名称 值

一个 100

B 200

C 300

D 400

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T09:29:12.947

尝试这样的事情：

```
DataTable table = new DataTable();
table.Columns.Add("name", typeof(string));
table.Columns.Add("value", typeof(string));

string name = "A,B,C,D";
string value = "100,200,300,400";

string[] names = name.Split(',');
string[] values = value.Split(',');

for(int i=0; i<names.Length; i++)
    table.Rows.Add(new object[]{ names[i], values[i] }); 
```

但是您应该实现一些验证代码以使其更合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:24:08.383

拆分源字符串并添加到数据表

```
 DataTable table = new DataTable();
    table.Columns.Add("name", typeof(string));
    table.Columns.Add("value", typeof(string));

    table.Rows.Add("nameStr", "valueStr"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T09:29:29.033

```
string[] names = name.split(',');
string[] values = value.split(',');

DataTable dt = new DataTable();
dt.Columns.Add("name");
dt.Columns.Add("value");

int cnt = names.length;
for(int i=0; i<cnt; i++)
{
  DataRow dr = dt.NewRow();
  dr["name"] = names[i];
  dr["value"] = values[i];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T09:33:41.253

试试这个：

```
 string[] name = "A,B,C,D".Split(',');
           string[] value = "100,200,300,400".Split(',');
             DataTable tbl = new DataTable();
             tbl.Columns.Add("name", typeof(string));
             tbl.Columns.Add("value", typeof(string));
            for( int i=0; i<name.Length;i++)
            {

                 tbl.Rows.Add(name[i],value[i]);
            } 
```

# android - 背景图像垂直滚动

> ID：11519549
> 
> 赞同：0
> 
> 时间：2012-07-17T09:22:02.807
> 
> 标签：android, android-emulator

我正在开发一个游戏。在这个我需要从上到下垂直滚动的背景图像。

实际上我的模拟器尺寸是 320*720（宽*高），但我的背景图像尺寸是 320*3840。所以现在我需要从高度：720 到 3840 的背景图像滚动。

我有背景图像滚动的代码，但背景图像不能正确滚动。请帮我。
这是我的代码，

```
 private Bitmap mBackgroundImageFar; //my image
        private int mBGFarMoveY = 0;

                 mBGFarMoveY = mBGFarMoveY + 2;

        int newFarY = mBackgroundImageFar.Height - (- mBGFarMoveY);

        if (newFarY <= 0) 
        {
            mBGFarMoveY =0;
            canvas.DrawBitmap (mBackgroundImageFar,0,mBGFarMoveY,null);
        } 
        else
        {
            canvas.DrawBitmap (mBackgroundImageFar,0,mBGFarMoveY,null);
            canvas.DrawBitmap (mBackgroundImageFar,0,newFarY, null);
        } 
```

如果我写了任何错误，请原谅我。

谢谢和问候，查克里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:30:28.087

你在使用任何游戏引擎吗？如果没有，解决问题的简单方法是使用游戏引擎。例如在[andengine](http://www.andengine.org/)中求解的是 CameraScene 或 ParallaxBackground

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:03:01.467

```
 private Bitmap mBackgroundImageFar; //my image
    private int mBGFarMoveY = 0;

             mBGFarMoveY = mBGFarMoveY + 2;

    int newFarY = mBackgroundImageFar.Height - (+ mBGFarMoveY);

    if (newFarY <= 0) 
    {
        mBGFarMoveY =0;
        canvas.DrawBitmap (mBackgroundImageFar,0,mBGFarMoveY,null);
    } 
    else
    {
        canvas.DrawBitmap (mBackgroundImageFar,0,mBGFarMoveY,null);
        canvas.DrawBitmap (mBackgroundImageFar,newFarY,0, null);
    } 
```

# php - php随机数在字符串中查找

> ID：11519551
> 
> 赞同：0
> 
> 时间：2012-07-17T09:22:06.467
> 
> 标签：php, strpos

我从分配了字符串 $randomID 的函数中随机选择一个数字。然后我建立一个字符串`$checkIDas = '|'.$randomID.'|';`然后如果之前已经使用过随机数然后忘记它并重试。问题是我没有收到错误，页面只是挂起。我知道我的随机数函数有效，并且我的查询有效。但是当我添加 if strpos 语句时，它就会挂起。有什么建议么？

```
function randomNumber($min, $max) {
  $rand = base_convert( md5( microtime() ), 16, 10);
  $rand = substr($rand, 10, 6);
  $diff = $max - $min + 1;
  return ($rand % $diff) + $min;
}

$sp = 1;
$usedUsers = "|0|";
while($sp < 7) {
    $randomID = randomNumber(1,55);
    $checkIDas = "|".$randomID."|";
    if (strpos($usedUsers,$checkIDas) !== false) {
        //Run my Query
        $sp ++;
        $usedUsers = $usedUsers . $randomID."|";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:29:49.387

您没有`$randomID`在`if`语句中重新生成 ，因此本质上，它是一遍又一遍地比较相同的 id，从而导致无限循环。

试试这个：

```
<?php
$sp = 1;
$usedUsers = "|0|";
while($sp < 7) {
       // generate randomID again
       $randomID = randomGeneratorFunction();
    $checkIDas = "|".$randomID."|";
    if (strpos($usedUsers,$checkIDas) !== false) {
        //Run my Query
        $sp ++;
        $usedUsers = $usedUsers . $randomID."|";
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T09:30:03.713

您的 while 循环取决于 sp，因此循环将永远持续下去。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T09:38:43.697

其他人已经指出了这些问题，我想补充一点，您可以通过使用适当的语言结构来使您的生活更轻松，例如将使用过的 id 放在一个数组中并在那里查找它们：

```
 ...
 $usedUsers = Array();  // this will hold the id list
 ...

 ...
 $sp = 1;
 while($sp < 7) {
     // get $randomID from somewhere 
     if( ! in_array($randomID, $usedUsers) ) {
         // Run my Query
         $sp++;                      // increment counter
         $usedUsers[] = $randomID;   // add new id to array
     }
 }
 ... 
```

（伪代码，根据你的要求修改。）

问候

rbo

# api - 用于澳大利亚郊区的 ajax 自动完成的 api

> ID：11519559
> 
> 赞同：-1
> 
> 时间：2012-07-17T09:23:03.870
> 
> 标签：api, jquery, google-maps-api-3

我在看

[www.property.com.au](http://www.property.com.au)

和

[www.suburbview.com](http://www.suburbview.com)

他们有一个搜索框，当您输入郊区的字母时，它会开始建议您正在寻找的郊区名称。

关于如何实施的任何想法？

我相信它正在使用 Google Maps API Ajax 调用，但具体是哪些，我想发现。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:50:29.303

它可能使用的是澳大利亚邮政 API。 [http://auspost.com.au/devcentre/resources.html](http://auspost.com.au/devcentre/resources.html)

实际上，我在搜索实现此类功能的其他信息时发现了您的问题。如果您想确定的话，我建议您查看 firebug 中的 AJAX 调用。

**编辑：**

经过一些快速检查后，看起来它正在将查询发布到位于其服务器上的某个文件中。如果您正在寻找澳大利亚郊区到邮政编码的查询，请务必查看我发布的链接。它拥有澳大利亚邮政的所有开发人员资源，还允许您轻松注册 API 密钥。

# iphone - 静音开关和无线电流（也有背景）

> ID：11519561
> 
> 赞同：2
> 
> 时间：2012-07-17T09:23:04.947
> 
> 标签：iphone, objective-c, ios

我创建了简单的应用程序来流式传输音频。它与音量按钮完美配合。在后台模式下播放。但是当我切换“静音开关”时，音乐仍然播放。为什么？

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.player = [AVPlayer playerWithURL:[NSURL URLWithString:@"http://87.98.235.103:9768/"]];
}

- (void)viewDidUnload
{
    [self setPlayBtn:nil];
    [self setStopBtn:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}
- (IBAction)pressedPlay:(id)sender {

    [self.player play];

}

- (IBAction)pressedStop:(id)sender {

    [self.player pause];
} 
```

在**应用程序 didFinishLaunching 中**：

```
NSError *sessionError = nil;
[[AVAudioSession sharedInstance] setDelegate:self];
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayAndRecord error:&sessionError];

UInt32 doChangeDefaultRoute = 1;
AudioSessionSetProperty(kAudioSessionProperty_OverrideCategoryDefaultToSpeaker, sizeof(doChangeDefaultRoute), &doChangeDefaultRoute); 
```

在 plist 我有：

```
Required background modes: App plays audio 
```

# javascript - 动态python脚本中的db函数的下拉选择参数

> ID：11519562
> 
> 赞同：0
> 
> 时间：2012-07-17T09:23:05.540
> 
> 标签：javascript, python, ajax, database, django

我有一个包含这些字段的 django modelForm：

```
nod_id1 = models.ForeignKey('Eonodes',..)
nod_id2 = models.ForeignKey('Eonodes',..) 
```

按预期呈现为下拉列表。

我想做以下事情：当用户从两个列表中选择一个选项时，需要执行一个 python 脚本，该脚本调用一个带有用户两个选项的参数的 db 函数。函数返回的内容我想保存到表单的其他字段（`directiondb = models.IntegerField()`）。脚本可能是这样的：

```
cursor = connection.cursor()
cursor.execute("SELECT GETDIRECTIONDB(262,265) from sys.dual")
result = cursor.fetchall() 
```

其中 262,265 是用户选择。

我怎样才能即时完成它，我的意思是在提交数据之前？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:29:45.570

在保存数据之前覆盖模型的保存方法以执行自定义操作。[https://docs.djangoproject.com/en/dev/topics/db/models/#overriding-model-methods](https://docs.djangoproject.com/en/dev/topics/db/models/#overriding-model-methods)

```
def get_direction_db(self.nod_id1, self.nod_id2):
    cursor = connection.cursor()
    cursor.execute("SELECT GETDIRECTIONDB(262,265) from sys.dual")
    result = cursor.fetchall()
    return result[0]  # or whatever

class MyModel(models.Model):
    nod_id1 = models.ForeignKey('Eonodes',..)
    nod_id2 = models.ForeignKey('Eonodes',..)
    directiondb = models.IntegerField()

    def save(self, *args, **kwargs):
        self.directiondb = get_direction_db(self.nod_id1, self.nod_id2)
        super(MyModel, self).save(*args, **kwargs) 
```

# iphone - 如何从 iPhone 发送的 http 请求中获取 UDID？

> ID：11519566
> 
> 赞同：-1
> 
> 时间：2012-07-17T09:23:14.247
> 
> 标签：iphone, http, http-headers

我需要跟踪每个移动设备的请求，为此我需要唯一标识符。

iPhone 是否在每个 HTTP 请求标头中发送 UDID？如果是，我怎么读？标题的名称是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:25:49.943

不，iPhone 不会发送 UDID 或任何其他唯一标识符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T09:25:57.947

不，它没有，但您可以将其添加到 HTTP GET/POST 请求中。

无论哪种方式，我都建议您反对，因为您应该生成自己的。

# android - android中位图的默认值是多少？

> ID：11519571
> 
> 赞同：0
> 
> 时间：2012-07-17T09:23:28.953
> 
> 标签：android, camera

如果我正在捕获图像并将其插入数据库中。这工作正常。但是如果没有捕获图像，那么它的默认值是多少？我`Bitmap`用于捕获并将`byte[]`其存储到数据库中。谁能告诉我位图的默认值是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:27:41.560

如果您没有为您的位图分配资源（即，如果您像这样声明它`Bitmap b;`或`Bitmap b=null;`）或者如果您尝试分配无效资源，则该值将为`null`.

# java - 我可以让 MOXy 在生成 json 时不输出属性吗？

> ID：11519572
> 
> 赞同：1
> 
> 时间：2012-07-17T09:23:30.420
> 
> 标签：java, json, jaxb, eclipselink, moxy

我的 JAXB 对象模型的一个实例包含一个属性，当我为该实例生成 Xml 而不是在生成 json 时我想要输出该属性

即我想要

```
<release-group type="Album">
<title>Fred</title>
</release-group> 
```

和

```
"release-group" : {
         "title" : "fred",
       }, 
```

但有

```
"release-group" : {
         "type" : "Album",
         "title" : "fred"
      }, 
```

我可以使用 oxml.xml 映射文件执行此操作吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:20:46.087

由于您的 JSON 绑定与您的 XML 绑定略有不同，因此我将使用[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)的外部映射文件。

**oxm.xml**

在外部映射文件中，我们将该`type`字段标记为瞬态。

```
<?xml version="1.0"?>
<xml-bindings
    xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    package-name="forum383861">
    <java-types>
        <java-type name="ReleaseGroup">
            <java-attributes>
                <xml-transient java-attribute="type"/>
            </java-attributes>
        </java-type>
    </java-types>
</xml-bindings> 
```

**发布组**

下面是我将用于此示例的域模型。注意`type`属性是如何用 注释的`@XmlAttribute`。

```
package forum383861;

import javax.xml.bind.annotation.*;

@XmlRootElement(name="release-group")
@XmlAccessorType(XmlAccessType.FIELD)
public class ReleaseGroup {

    @XmlAttribute
    String type;

    String title;

} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目（请参阅：[http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as -your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) )。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

由于 XML 和 JSON 表示不同，我们将为`JAXBContexts`它们单独创建。对于 JSON，我们将利用 MOXy 的外部映射文件。

```
package forum383861;

import java.util.*;
import javax.xml.bind.*;
import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        ReleaseGroup rg = new ReleaseGroup();
        rg.type = "Album";
        rg.title = "Fred";

        // XML
        JAXBContext xmlJC = JAXBContext.newInstance(ReleaseGroup.class);
        Marshaller xmlMarshaller = xmlJC.createMarshaller();
        xmlMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        xmlMarshaller.marshal(rg, System.out);

        // JSON
        Map<String, Object> properties = new HashMap<String, Object>(2);
        properties.put(JAXBContextProperties.OXM_METADATA_SOURCE, "forum383861/oxm.xml");
        properties.put(JAXBContextProperties.MEDIA_TYPE, "application/json");
        JAXBContext jsonJC = JAXBContext.newInstance(new Class[] {ReleaseGroup.class}, properties);
        Marshaller jsonMarshaller = jsonJC.createMarshaller();
        jsonMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        jsonMarshaller.marshal(rg, System.out);
    }

} 
```

**输出**

下面是运行演示代码的输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<release-group type="Album">
   <title>Fred</title>
</release-group>
{
   "release-group" : {
      "title" : "Fred"
   }
} 
```

# .net - 如何在 Web 服务中发送空标签

> ID：11519580
> 
> 赞同：0
> 
> 时间：2012-07-17T09:23:48.517
> 
> 标签：.net, xml, web-services

> **可能重复：**
> [Web 服务请求调用 SOAP 请求缺少空参数](https://stackoverflow.com/questions/4951322/web-service-request-call-soap-request-missing-empty-parameters)

我正在尝试调用由第三方托管的网络服务。他们为我提供的 XSD 定义了一个元素：

```
<xsd:element name="ElementName" type="String"/> 
```

他们向我指示不得填充此元素，但必须将其作为空标记包含在 XML 请求中

`<ElementName />`

我使用 wscf 从架构中生成一个对象，ElementName 如下所示：

```
/// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(ElementName="ElementName")]
    public string ElementName; 
```

我的问题是，当我生成 XML 请求时，生成的 XML 中排除了该标记，而不是一个空标记。

是否有一些属性我可以添加到元素中以确保它通过空发送？如何确保包含在内？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T09:37:46.237

尝试为 ElementName 分配一个空字符串：

```
ElementName = string.Empty; 
```

# google-app-engine - 如何让 GEP 在我的 Eclipse Juno 上工作？

> ID：11519588
> 
> 赞同：1
> 
> 时间：2012-07-17T09:24:14.090
> 
> 标签：google-app-engine, eclipse-plugin, eclipse-juno

我目前正在尝试在我的 Eclipse Juno 上安装 Google Eclipse 插件（在 Windows 7 上，使用 JRE 1.5.22u 和 Java EE IDE）。[我已阅读此处](https://developers.google.com/eclipse/docs/download)提供的 google 文档，并尝试在使用和不使用管理模式的情况下进行安装。安装似乎运行良好，但我仍然找不到任何谷歌功能（工具栏、谷歌网络应用程序......）。

难道我做错了什么 ？

干杯，

Ricola3D

# c# - 按顺序运行异步套接字操作

> ID：11519593
> 
> 赞同：0
> 
> 时间：2012-07-17T09:24:37.400
> 
> 标签：c#, sockets, asynchronous, task-parallel-library, asyncsocket

我需要的是一个按顺序执行异步操作的类。

```
class FooSocket
{
    private Socket _Socket;

    // Message is a class that wraps a byte array.
    public Task<Message> Receive() { /*Bla...*/ };
    public Task<int> Send(Message message) { /*Bla...*/ };
} 
```

如果我按顺序调用发送、接收和发送，我需要先发送，并将剩余的接收和发送操作排队，直到第一个接收完成。

我尝试在课堂上创建一个主要任务领域并遵循`MainTask = MainTask.ContinueWith(...)`一种方法。我什至写了一个名为 Sequencer 的类，它正是这样做的，但不知何故感觉不对，在延续和其他东西中创建嵌套任务（使用 Task.Factory.FromAsync 方法）。

我还尝试做一些事情，比如排队 TaskCompletionSource 对象并在我的 Receive/Send 方法中返回它们的任务，在一个单独的线程上以无限循环检查队列，但由于我将拥有大约 200k 的 FooSocket 实例，每个线程也感觉失策。如果我把它变成一个线程池，我会得出这个“线程池不应该用于长时间运行的操作”的规则。

我感觉很接近，但不确定订购这些工作的最有效方式是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:54:47.450

我会使用[TPL Dataflow](http://www.microsoft.com/en-us/download/details.aspx?id=14782)。您可以[通过 NuGet](https://nuget.org/packages/Microsoft.Tpl.Dataflow)或作为[Async CTP](http://www.microsoft.com/en-us/download/details.aspx?id=9983)的一部分安装它。TPL Dataflow 提供了一种`BufferBlock<T>`听起来正是您所需要的基本类型。

如果你只是建模一个套接字，那么`Send`当数据被缓冲出去时完成任务，不断地读入另一个缓冲区，`Receive`当你从那个缓冲区读取时完成任务。（注意：当数据缓冲到操作系统时，a 上的“发送”操作`Socket`完成，而不是当它通过线路输出或到达其目的地时）。

如果您正在建模更高级别的命令/响应，那么您应该有一个代表整个命令/响应的任务，正如 James 建议的那样。我会两者兼而有之；`async`使用/`await`支持很容易将一个层叠在另一个之上。（注意：a 上的“接收”操作`Socket`可能会以部分接收完成，因此您需要[消息框架](http://nitoprograms.blogspot.com/2009/04/message-framing.html)）。

您的架构可能还需要一些工作：

> 我将拥有大约 200k 的 FooSocket 实例

这肯定是个问题（我假设您使用的是 TCP/IP）。只有大约 65K TCP/IP 端口，默认情况下只有大约 16K 是短暂的，您必须为操作系统留出大量“喘息空间”，否则它会开始出现异常行为。我估计只有约 12K 的连接是现实的，除非您更改可以（理论上）使您达到约 59K 的短暂范围。大约 200K 是不可能的 - 除非您更改临时范围*并*使用负载均衡器拥有多个 IP 地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T12:06:35.790

如果它是请求/响应类型的行为，恕我直言，任务粒度应该是完整的往返，而不是分开发送和接收。

您不需要 CTP 来支持 .net 4，您可以使用异步目标包。

消费代码是什么样的？带有等待调用的循环？

# c# - 如何交换 c# 列表/数组/字典中的元素/列

> ID：11519596
> 
> 赞同：1
> 
> 时间：2012-07-17T09:24:56.770
> 
> 标签：c#, list, data-structures, swap

有没有办法在二维列表中使用内置快速方法“自动快速”交换元素，c#中的数组oder字典？

编辑：更具体地说：我不仅会交换 2 个元素，还会更改可能**n 个**元素/列的顺序

我有这样的东西：具有 10k 行的 2d 数据结构（具有 10k 个元素的列表），每个元素又是一个具有 5 个元素的列表。（例如，字符串列表列表>>）。

```
 0 1 2 3 4 
0 A B C D E
1 A A A A A
2 d d c k x
3 ...
.
.
10000 ... 
```

有没有办法交换索引为 0 和 2 的元素/列的所有 10k 行？

起初我会在第 0 行：ABCDE 和交换后：CBADE

或者我是否必须遍历所有行并自己交换索引为 0 和 2 的元素/列？

**编辑：在我的业务逻辑中，二维数据结构将逐行循环，元素逐行循环，并且值将插入某处。所以我的想法不是循环foreach元素，而是以特定顺序循环每一行和元素。因为我不想按 0、1、2、3、4 的顺序访问元素，而是按 2、1、0、3、4 的顺序访问元素。**是否担心以特定顺序而不是以 foreach 方式访问列表元素会变慢？性能较差？

编辑：有一个指向 java Collections.swap [http://www.java-examples.com/swap-elements-java-arraylist-example的链接](http://www.java-examples.com/swap-elements-java-arraylist-example)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:34:12.857

我认为没有内置任何内容，但您可以轻松创建自己的扩展：

```
public static class ListExtensions
{
    public static void Swap<T>(this IList<T> list, int index1, int index2)
    {
        T temp = list[index1];
        list[index1] = list[index2];
        list[index2] = temp;
    }
} 
```

（基于 Reeds Copseys 方法：[https](https://stackoverflow.com/a/1111039/284240) ://stackoverflow.com/a/1111039/284240 ）

以下是一些示例数据：

```
var rnd = new Random();
var hugeList = new List<List<int>>();
for (int i = 0; i < 10000; i++)
{
    var innerList = new List<int>();
    for (int ii = 0; ii < 5; ii++)
    {
        innerList.Add(rnd.Next(1,100000));
    }
    hugeList.Add(innerList);
} 
```

交换所有内部列表的索引 0 和 2：

```
foreach (var innerList in hugeList)
{ 
    innerList.Swap(0, 2);
} 
```

请注意，它适用于任何类型的列表和数组（因为两者都实现了`IList<T>`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:22:57.070

您需要一个能够执行此操作的数据结构。`List<T>`我已经使用和的混合物实现了它`Dictionary`。

这样，您可以在一个地方更改列的顺序，这会影响一切。

```
public class Order
{
    public Order(int number)
    {
        Number = number;
    }

    public int Number { get; set; }
}

public class Item
{
    // ... whatever your item is 
}

public class Program
{
    static void Main()
    {
        var list = new List<Dictionary<Order, Item>>();
        var orders = new List<Order>()
                        {
                            new Order(1),
                            new Order(2),
                            new Order(3),
                            new Order(4),
                            new Order(5)
                        };

        for (int i = 0; i < 10000; i++)
        {
            list.Add( new Dictionary<Order, Item>()
                        {
                            {orders[0], new Item()},
                            {orders[1], new Item()},
                            {orders[2], new Item()},
                            {orders[3], new Item()},
                            {orders[4], new Item()}
                        });
        }

        // Now access items in order 

        var item = list[100][orders[1]];

        // now you can swap the orders: replace 2 and 4
        var temp = orders[1];
        orders[1] = orders[3];
        orders[3] = temp;

        var item = list[100][orders[1]]; // now points to previously 4th item!!
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T10:58:05.630

您可能想对此进行基准测试以查看它是否更好，并且可以使用 10K 元素。

Sudocode，不在 PC 附近：

```
New temp array of size to copy
Array.Copy(from firstblock to temp)
Array.Copy(from secondblock to firstblock)
Array.Copy(from temp to secondblock) 
```

# html - 内部 div 的子级水平展开

> ID：11519597
> 
> 赞同：0
> 
> 时间：2012-07-17T09:25:00.413
> 
> 标签：html, css

检查[这个小提琴](http://jsfiddle.net/YFx65/1/)

我希望将内部的蓝色 div 水平放置，并排放置，而不是网格化。我试过使用`white-space:nowrap`但它不起作用，因为这些是块元素。

如果我为它工作的图层设置了固定宽度`#subcontainer`，但我不知道该图层的宽度，因为它是使用服务器数据动态呈现的。

我不能使用`display: inline-block`，因为这些层需要在一起，它们之间没有间隙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:30:35.867

您可以在#subcontainer 上添加较大的百分比宽度

[http://jsfiddle.net/YFx65/5/](http://jsfiddle.net/YFx65/5/)

# php - 从文件夹重定向 URL 的 RewriteRule

> ID：11519599
> 
> 赞同：0
> 
> 时间：2012-07-17T09:25:03.823
> 
> 标签：php, linux, apache

目前，我有这个简单的规则来消除 URL 中 php 扩展的需要。

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

我需要添加一个仅适用于一个 URL 的新规则`Http://www.example.com/my-folder/$myFile` 我需要将对 my-folder 的每个请求重写到此 url`Http://www.example.com/my-folder.php?file=$myFile`

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:37:16.833

紧随其后添加`RewriteEngine on`：

```
RewriteRule ^/?my-folder/(.*)$ /my-folder.php?file=$1 [L,QSA] 
```

# sql - 查询将行分组在一起，然后在这些组中排序

> ID：11519607
> 
> 赞同：0
> 
> 时间：2012-07-17T09:25:46.400
> 
> 标签：sql, sorting

这个问题可能听起来有点奇怪。我有一张`Pages`如下表：

```
Id    PageName    Parent    Predecessor  
1     Home        null      null  
2     About       null      1  
3     Contact me  2         null  
4     My Resume   2         3 
```

所以它基本上是这样的：

```
Home  
About  
|--Contact me  
|--My resume 
```

我想编写一个选择查询，首先根据它们“分组”页面，`Parent`然后根据它们的值在这些组中排序`Predecessor`。那就是保留那些页面的树结构。不用说，`Parent`和`Predecessor`都是指向`Id`同`Pages`一张表的外键。
非常感谢任何帮助 :-) 在此先感谢
**编辑 1**：我正在使用 SQL Server
**编辑 2**：这是一张实际图片：

![在此处输入图像描述](../Images/ab59cef46170420d6c95a6168cc92929.png)

它应该在 About 下方显示“Contact Me”（如`Parent`字段所示）
**注意：**在此示例中，`Order`它不是外键。它只是一个`int`用于排序的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:39:00.167

试试这个

```
select PageName from Pages 
order by isnull(Parent,0),ISNULL(Predecessor,0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T11:56:23.477

像下面这样的东西？

```
SELECT t1.*,t2.* FROM test t1 LEFT JOIN test t2 
ON t1.id=t2.parent
WHERE t1.parent IS NULL
ORDER BY t1.id,t2.id 
```

# ios - pageViewController 为每个页面使用不同的控制器？

> ID：11519608
> 
> 赞同：1
> 
> 时间：2012-07-17T09:25:46.273
> 
> 标签：ios, xcode, ipad, uipageviewcontroller

我想制作一个书本风格的应用程序，其中每个页面都是一个不同的控制器（不同的类）。我发现的所有代码都使用一个类和一个标签，这就是页面之间的所有变化。

您是否知道在模型中传递控制器列表并且 pageViewController 与它们一起使用的任何示例？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:47:12.007

也许我只是不明白你的问题，但 UIPageViewController 需要一个 UIViewController 子类的数组。每个对象（即每个子类）可以不同，只要它们是 UIViewController 子类。因此，您有机会为每个页面创建不同的子类。

# ipad - ipad键盘隐藏uitextView

> ID：11519609
> 
> 赞同：0
> 
> 时间：2012-07-17T09:25:48.183
> 
> 标签：ipad, uitextview, ios5.1

我在 ipad 中有很长的表格，有 uitextfields 和 uitextviews。当键盘使用键盘通知隐藏 uitextfield 时，我可以向上滚动。但是当 uitextview 变为活动状态并且它位于键盘下方时，它只会滑动到足以让我看到闪烁的光标。这是正常行为吗？如果不是，我如何向上滚动整个 uitextview 以便在编辑时整个 uitextview 可见？

**这是代码..**

```
-(void)viewWillAppear:(BOOL)animated
{
[super viewWillAppear:YES];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWasShown:) name: UIKeyboardDidShowNotification object:nil];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillBeHidden:) name:UIKeyboardWillHideNotification object:nil];
}

#pragma mark Keyboard Events

-(BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField resignFirstResponder];
    return NO;
}

#pragma GCC diagnostic ignored "-Wdeprecated-declarations"
-(void)keyboardWasShown:(NSNotification *)aNotification
{

if (displayKeyboard==YES) {
    return;
}
NSDictionary* info = [aNotification userInfo];
NSValue* aValue = [info objectForKey:UIKeyboardBoundsUserInfoKey];
//NSValue* aValue = [info objectForKey:UIKeyboardFrameBeginUserInfoKey];
CGSize keyboardSize = [aValue CGRectValue].size;

offset = _scrollView.contentOffset;

CGRect viewFrame = _scrollView.frame;

viewFrame.size.height -= keyboardSize.height-tabbarHt;
_scrollView.frame = viewFrame;

CGRect textFieldRect = [activeField frame];
textFieldRect.origin.y += 10;
[_scrollView scrollRectToVisible: textFieldRect animated:YES];
displayKeyboard = YES;

}

-(void)keyboardWillBeHidden:(NSNotification *)aNotification
{

if (!displayKeyboard) {
    return; 
}

_scrollView.frame = CGRectMake(0, 0, 1024, 655);
_scrollView.contentOffset =offset;
displayKeyboard = NO;
}

-(BOOL) textFieldShouldBeginEditing:(UITextField*)textField {
activeField = textField;
return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:51:10.187

给你的 UITextView 委托

```
CGRect activeField;

- (void)textViewDidBeginEditing:(UITextView *)textView
{
    activeField = textView.frame;
}

-(BOOL) textFieldShouldBeginEditing:(UITextField*)textField {
   activeField = textField.frame;
   return YES;
} 
```

尝试使用此代码。每次您只给出 textField 矩形大小。当您调用文本视图时，您必须传递 textview 框架大小

# ios - 如何在 webview 中旋转 pdf

> ID：11519616
> 
> 赞同：0
> 
> 时间：2012-07-17T09:26:04.760
> 
> 标签：ios, pdf, webview, rotation

我有一个显示 pdf 页面的 webview。如何将 pdf 旋转 90 度，以便正确显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:34:38.880

如果您只需要在 Web 视图上显示该 PDF 而没有其他内容，则可以旋转整个 Web 视图。

```
- (void)viewDidLoad {
    [super viewDidLoad];

    webView.layer.anchorPoint = CGPointMake(0.0, 0.0);
    webView.center = CGPointMake(CGRectGetWidth(self.view.bounds), 0.0);

    CGAffineTransform rotationTransform = CGAffineTransformIdentity;
    rotationTransform = CGAffineTransformRotate(rotationTransform, DegreesToRadians(90));
    webView.transform = rotationTransform;
} 
```

# java - 从 jdk6 升级到 7 时出现 UnsupportedClassVersionError

> ID：11519617
> 
> 赞同：-1
> 
> 时间：2012-07-17T09:26:12.233
> 
> 标签：java, spring, glassfish-3

> **可能重复：**
> [如何在 Netbeans 中设置 java 编译器](https://stackoverflow.com/questions/9290848/how-to-set-a-java-compiler-in-netbeans)

当我将netbeans中的jdk版本从jdk6更改为7时，我得到了以下堆栈跟踪......

```
java.lang.UnsupportedClassVersionError: WEB9032: Class
com.hcdc.coedp.safe.controller.GatewayController has unsupported major or 
minor version numbers, which are greater than those found 
in the Java Runtime Environment version 1.6.0_32 
```

我正在使用 glassfish 3.1.2 和 spring 框架。请帮帮我。

编辑：我已经将 glassfish asenv.bat 文件中的 jdk 版本编辑到 jdk 7，现在也得到了同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:28:29.823

看来您正在使用 JDK 1.7 进行编译，但您正在使用 JDK（或 JRE）1.6（参考[http://goo.gl/Qsmn9](http://goo.gl/Qsmn9)）运行。

我建议您检查哪个版本的 JDK 使用 GlassFish。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:05:43.213

通过将 netbeans 中的默认 jdk 更改为 JDK 7 解决了这个问题……这需要重新安装 netbeans 并使用指向 jdk7 安装的 env 变量。谢谢。

# ios - 如何在边框周围添加另一个边框？

> ID：11519618
> 
> 赞同：0
> 
> 时间：2012-07-17T09:26:11.903
> 
> 标签：ios

现在我的 iphone 项目有问题。我已经有一个带有白色边框的 UIView，我想知道如何在白色边框之外放置另一个灰色边框，这使得视图看起来像一个相框。请帮帮我，伙计们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:32:22.827

在 Photoshop 中创建边框，然后只显示适当大小的 UIImageView。或者您可以创建一个没有任何子视图的 UIView 并为其添加边框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T09:43:02.010

你可以试试这个替代选项。创建 4 个 uiview:Left,right,top bottom 并根据你的边框高度使高度为 2 像素。

```
Uiview*leftVw = [[Uiview alloc]initwithFrame:cgrectmake(x,y,w,2)];
leftview.backgroundcolor = [uicolor graycolor];
[self.view addsubview leftview];

Uiview*rightVw = [[Uiview alloc]initwithFrame:cgrectmake(x,y,w,2)];
[self.view addsubview rightview];

Uiview*topVw = [[Uiview alloc]initwithFrame:cgrectmake(x,y,w,2)];
[self.view addsubview topview];

Uiview*bottomVw = [[Uiview alloc]initwithFrame:cgrectmake(x,y,w,2)];
[self.view addsubview bottomview]; 
```

调整每个视图的框架。

# email - 如何在 SugarCRM 中获取 From 电子邮件地址的代码

> ID：11519620
> 
> 赞同：0
> 
> 时间：2012-07-17T09:26:30.313
> 
> 标签：email, phpmailer, sugarcrm

有没有办法通过 PHP 中的代码获取 From 电子邮件地址 - 我们用来从 SugarCRM 发送电子邮件的地址。

我试过了

```
$phpMailer = new SugarPHPMailer();
$phpMailer->setMailerForSystem();       
print_r($phpMailer->From); 
```

但它只显示默认值，即 root@localhost

如果我配置 From 如下所示

```
$phpMailer->From = "myemailaddress@server.com";
print_r($phpMailer->From); 
```

它显示 myemailaddress@server.com 但是当我在我的 Gmail 帐户中收到电子邮件时，它是从 Sugar 的默认配置电子邮件地址收到的，在我们的例子中是 something@gmail.com 我很抱歉出于隐私原因我无法在此处显示 ![在此处输入图像描述](../Images/5f1118fe54437f2af9187b270a9116b1.png)

如果我进一步详细说明收到的邮件，并从 Gmail 的菜单中选中 Show Original 选项（右侧的可用菜单位于回复的精美箭头旁边，其中发件人电子邮件地址显示在 Gmail 中），它会将 From 显示为默认电子邮件我们配置的 Sugar 的地址和 Return-Path：myemailaddress@server.com

知道如何获取默认配置的电子邮件地址，以便通过代码在 Sugar 中发送电子邮件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T14:48:34.560

尝试

```
$administration  = new Administration();
$administration->retrieveSettings();
print_r($administration->settings); 
```

# objective-c - 在动画中间禁用 UIButton

> ID：11519621
> 
> 赞同：0
> 
> 时间：2012-07-17T09:26:34.687
> 
> 标签：objective-c, xcode, cocoa-touch, uibutton

好吧，说我有一个圆形矩形按钮和一个与之连接的操作方法`-(IBAction)btnclicked:(id)sender`。当按钮被按下时，它会触发一个动画。我在上面提到的动作方法中使用了这个—— `imageview.animationImages = images;`。这`imageview`是一个指向 UIImageView 对象的指针，并且`images`是一个图像数组。现在我想要的是在动画进行时按钮应该保持禁用状态。为此，我尝试了这个：

```
if (imageview) {
    btn.enabled = NO;
} 
```

这当然会禁用按钮，但我应该如何在动画结束后重新启用它。我想过在`NSTimer`动画的同时使用和禁用按钮，但这不是一个好方法（很难将此计时器与动画同步）。此外，它还会在动画结束后禁用动画。所以请告诉我是否有什么好方法可以做我正在尝试的事情？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:35:06.137

解决这种情况的最好方法是`UIAnimation`使用完成块来实现。看看这个关于 SO[的帖子。](https://stackoverflow.com/questions/3126833/what-are-block-based-animation-methods-in-iphone-os-4-0)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:07:09.250

您可以使用

```
if ( !imageview.isAnimating) {
  btn.enabled = Yes;
} 
```

此属性`No`在动画完成时变为。所以这意味着在动画之后你`btn`变得启用。只有你需要`disable`在动画开始时使用它。

我希望这会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-20T06:54:59.923

我认为**动画完成块**是您正在寻找的，

```
[UIView animateWithDuration:0.5
                          delay:0.1
                        options: UIViewAnimationOptionCurveEaseOut
                     animations:^
     {
         // Your animation
     }
                     completion:^(BOOL finished)
     {
         //Here do whatever you like after animation ends
     }]; 
```

参考：- [https://stackoverflow.com/a/14900987/3411787](https://stackoverflow.com/a/14900987/3411787)

# mysql - 如何使用缺失行的默认值进行 mysql 连接

> ID：11519622
> 
> 赞同：3
> 
> 时间：2012-07-17T09:26:39.587
> 
> 标签：mysql

我有一个表格来跟踪用户的每日得分。它看起来大致是这样的：

```
CREATE TABLE `DailyScores` (
  `player_id` INTEGER NOT NULL,
  `day_id` INTEGER NOT NULL,
  `score` DOUBLE NOT NULL
); 
```

我还有一个看起来像这样的玩家表：

```
CREATE TABLE `Players` (
  `player_id` INTEGER NOT NULL,
  `weighted_score` DOUBLE NOT NULL
); 
```

现在，玩家 weighted_score 将每天从玩家历史数据中重新计算。我可以分几次执行此操作，如下所示：

```
-- Clear out the old values
UPDATE Players SET Players.weighted_score = 0;

-- Then several times with different @weight and @day values
UPDATE Players p JOIN DailyScores ds
  ON p.player_id = ds.id 
  WHERE ds.day_id = @day 
  SET p.weighted_score = p.weighted_score + @weight * ds.score; 
```

这处理了可能某天玩家没有得分条目的情况。

但是，我想将 UPDATE 重写为更像这样：

```
UPDATE Players p
  JOIN DailyScores ds1 ON p.player_id = ds1.id 
  JOIN DailyScores ds2 ON p.player_id = ds2.id 
  JOIN DailyScores ds3 ON p.player_id = ds3.id 
  WHERE 
    ds1.day_id = @day1 AND
    ds2.day_id = @day2 AND
    ds3.day_id = @day3 
  SET p.weighted_score = @w1 * ds1.score + @w2 * ds2.score + @w3 * ds3.score; 
```

但是我认为如果缺少分数，这将失败。有没有办法让缺失天数的值为 0？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T09:40:06.213

使用该`COALESCE()`功能。它返回它的第一个参数，它不是`NULL`。

```
UPDATE Players p
  LEFT JOIN DailyScores ds1 ON ( p.player_id = ds1.id AND ds1.day_id = @day1)
  LEFT JOIN DailyScores ds2 ON ( p.player_id = ds2.id AND ds2.day_id = @day2)
  LEFT JOIN DailyScores ds3 ON ( p.player_id = ds3.id AND ds3.day_id = @day3)
  SET p.weighted_score = 
     @w1 * COALESCE(ds1.score, 0) +
     @w2 * COALESCE(ds2.score, 0) +
     @w3 * COALESCE(ds3.score, 0); 
```

你也必须做一个`LEFT JOIN`，因为当玩家没有玩时，DailyScores 中可能没有记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T09:30:46.970

尝试使用而`LEFT JOIN`不是设置为 0`JOIN``DEFAULT`

**编辑**

`LEFT JOIN`是您的第一个问题的正确解决方案，第二个您需要`INSERT`- 解决此问题的最佳方法是使用`INSERT`... `ON DUPLICATE KEY UPDATE`，所以：

```
INSERT INTO table(cols) VALUES(values) ON DUPLICATE KEY UPDATE score=.... 
```

# sql - Specified cast is not valid - float

> ID：11519625
> 
> 赞同：1
> 
> 时间：2012-07-17T09:27:06.720
> 
> 标签：sql, viewmodel, datareader

Unsure why I am recieving this error as converting other columns has worked fine.

Basically I have a SELECT statement which plays back int/string/float. The following code only throws the above error on the float, however within the Database/ViewModel they are both of type Float.

VIEWMODEL

```
public float personalAmount { get; set; } 
```

REPOSITORY

```
 string selectQuery = "SELECT OC.[id], OC.[number_id], ONU.[mobile_number], OC.[personal_amount], OC.[start_date], OC.[end_date] " +
                                "FROM export OC " +
                                    "INNER JOIN numbers ONU ON OC.number_id = ONU.number_id " +
                                "WHERE OC.[person_id] = " + id;
        SqlCommand myCommand = new SqlCommand(selectQuery);
        myCommand.Connection = myConnection;
        myConnection.Open();

        SqlDataReader dataReader = myCommand.ExecuteReader();
        if (!dataReader.HasRows) return null;

        var newData = new List<List>();
        while (dataReader.Read())
        {
            List list = new List();
            list.id = (int)dataReader["id"];
            list.mobileNumber = dataReader["mobile_number"].ToString();
            list.personalAmount = (float) dataReader["personal_amount"];
            list.startDate = (DateTime)dataReader["start_date"];
            list.endDate = (DateTime)dataReader["end_date"];

            newData.Add(list);
        }
        dataReader.Close(); 
```

Thanks in advance for any help :-)

Clare

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T09:30:23.277

Have you tried doing a Float.Parse(dataReader["personal_amount"].ToString())?

It's not a cool way of solving, but it may work.

# android - 在android中制作交互式布局的最佳方法

> ID：11519628
> 
> 赞同：0
> 
> 时间：2012-07-17T09:27:12.347
> 
> 标签：android

在我的应用程序中，我有一个要填写的表格，其中包含 10-15 个字段。所以我认为让它交互更有意义，而不是一次显示所有 10-15 个字段。

我希望它像：

应用程序：作为文本的 question1

用户：editText 中的 answer1

App 和 User 将是它们各自的 ImageView。

根据答案，将显示第二个问题。

方法 1：将所有 imageViews、TextViews 和 EditText 字段的可见性设置为 false，并在回答上一个问题后使其可见（下一个问题文本将取决于答案）

实际上我这样做了，但有几个问题：

问题 1：我将布局设置为 ScrollView，因此用户可以滚动到布局的底部（视图不可见），这告诉他这是一个视图不可见的长表单。

问题 2：所有问题都是 TextViews，但所有答案字段都不是 EditText ，有些是微调器，有些是复选框。所以取决于前面的答案，如果我必须显示微调器或复选框将不起作用（如果我跳过任何不可见的视图并进入下一个视图，它会创建空白空间）

方法2：动态创建所有视图（我相信这需要一些时间，这又是一个用户体验问题）

有没有更好的方法来实现我想要的？如果有解决方案，请告诉我如何解决我的问题 1 和 2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:41:56.733

使用[ViewStub](http://developer.android.com/reference/android/view/ViewStub.html)而不是制作不可见的视图。这样它就不会占用布局上的任何空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T09:31:59.130

那么最简单的一个是你的向导/问卷的每个“部分”都可以是一个单独的活动。

但是，对于此类任务，我更喜欢在同一活动中添加和删除元素。

您可能要考虑的另一点是导航，即不仅要前进到下一个问题，还要回到前一个问题。跟踪单个活动中的状态并不算太糟糕，但是切换到前一个活动可能会更简单，因为每个活动只跟踪其下一个和以前的活动。

# sql - 如何在包含顺序 int 值的列中获取第一个间隙

> ID：11519630
> 
> 赞同：0
> 
> 时间：2012-07-17T09:27:18.057
> 
> 标签：sql, sql-server, sql-server-2008-r2

我在 SQL Server 数据库表中有一列，有一列包含整数值，我想获得最大值，除非系列中有间隙，然后我想获得第一个缺失值。

例如，从下表中，我希望得到值 4

```
1
2
null
3 
```

上面很简单，但是如果表包含如下数据，我怎样才能找到我缺少的 id，在这种情况下它将是 8

```
1
3
2
4
null
5
7
6
null
10
9 
```

/////////////////

编辑：

我最初实现了@podiluska 的答案并打算接受它但是当我用超过 10K 行的表进行测试时它很慢，所以我采用了@vmvadivel 的答案并稍微改变了它，如下所示，它工作得很快，但仍然不是我想要的 100%：

```
SELECT Number
FROM 
(
    SELECT ROW_NUMBER() OVER(ORDER BY iValue) AS Number
    FROM tblNumbers WHERE iValue IS NOT NULL
) temp
WHERE Number NOT IN 
(
    SELECT iValue FROM tblNumbers WHERE iValue IS NOT NULL
) 
```

这很好用，但是如果所有`iValue`字段都为空，那么我什么也得不到，但我希望它返回 1，因为它将是系列中的第一个值，显然我可以在 C# 代码中处理这个，但我确信如果上面的查询没有返回一行，必须有返回 1 的方法吗？

我已经更改了顶层`Select Number`，`SELECT Coalesce(Number, 1)`但它没有用，有什么想法可以解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T09:31:40.907

如果`#t`是你的桌子

```
select min(t1.number)+1 
from #t t1
left join #t t2 
           on t1.number = t2.number-1
where t2.number is null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:59:18.377

如果您有一个数字表，其中包含连续的 int 值，那么您可以执行以下操作：

```
SELECT * FROM 
(
    SELECT ROW_NUMBER() OVER(ORDER BY iValue) AS Number FROM tblNumbers
) temp
WHERE Number NOT IN 
(
    SELECT [ID] FROM tblFindGaps
)
GO 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T10:09:10.770

```
SELECT
    t1.number + 1 AS range_start,
    MIN(t2.number) - 1 AS range_end
FROM test t1
INNER JOIN test t2
    ON t2.number > t1.number
WHERE t1.number IS NOT NULL
GROUP BY t1.number
HAVING t1.number + 1 <= MIN(t2.number) - 1 
```

如果`15`向表中添加一个数字，输出将是：

```
range_start  range_end
          8          8
         11         14 
```

它找到每对连续的数字，至少有一个间隔。然后它在其中加或减一个，因此`start_range`and`end_range`是间隙的范围。

# eclipse - 我可以在不通过 eclipse xsd API 绑定任何模式文件的情况下创建 XSD 组件吗？

> ID：11519639
> 
> 赞同：1
> 
> 时间：2012-07-17T09:27:42.317
> 
> 标签：eclipse, xsd

使用[eclipse XSD](http://www.eclipse.org/modeling/mdt/?project=xsd#xsd) API，我可以加载一个模式文件，然后解析相关的 xsd 组件。

现在我的问题是，我可以在`XSDElementDeclaration`不绑定任何架构文件的情况下创建一个空白组件并设置它们的属性吗？

例如，我想创建一个名为“query”的简单类型元素：

`<element name = "query" type = "xsd:string"/>`

我的代码是这样的：

```
XSDSimpleTypeDefinition queryStr =XSDFactory.eINSTANCE.createXSDSimpleTypeDefinition();
queryStr.setName("string");
queryStr.setTargetNamespace("http://www.w3.org/2001/XMLSchema");

XSDElementDeclaration queryEle  = XSDFactory.eINSTANCE.createXSDElementDeclaration();
queryEle.setName("query");
queryEle.setTypeDefinition(queryStr); 
```

我认为创建的`queryEle`应该符合我的要求。但是当我将它返回给其他人使用时，似乎创建的元素不正确。

如何`XSDElementDeclaration`使用 API 直接创建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-04T06:00:07.087

仍然需要创建 XSDParticle 并将此元素设置为粒子：

```
XSDSchema schemaForSchema =  XSDUtil.getSchemaForSchema(XSDConstants.SCHEMA_FOR_SCHEMA_URI_2001);
XSDSimpleTypeDefinition queryType = schemaForSchema.resolveSimpleTypeDefinition(simpleTypeName);

XSDElementDeclaration queryEle  = XSDFactory.eINSTANCE.createXSDElementDeclaration();
queryEle.setName("query");
queryEle.setTypeDefinition(queryType);

XSDParticle elementParticle = XSDFactory.eINSTANCE.createXSDParticle();
elementParticle.setMinOccurs(minOccurs);
elementParticle.setMaxOccurs(maxOccurs);
elementParticle.setContent(element);
....

//add the element to XSDModelGroup
modelGroup.getContents().add(elementParticle); 
```

...

# .htaccess - Codeigniter 控制器 htaccess 重定向

> ID：11519641
> 
> 赞同：0
> 
> 时间：2012-07-17T09:27:48.783
> 
> 标签：.htaccess, codeigniter, routing, seo

问题：如何在 codeigniter 中从旧网址转移到对 seo 友好的网址？

示例：我有一个名为 library 的 codeigniter 控制器。URL 看起来像 www.domain.com/library

这对 seo 不友好，我希望它看起来像 www.domain.com/keyword-library 我该如何解决这个问题？.htaccess 和路由是不够的，因为我需要旧页面重定向到带有 301 的新 url，所以搜索引擎会选择这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:27:48.783

我使用 application/config/routes.php 将新的 url 查询重新路由到旧的控制器对象

```
$route['keyword-library/(:any)/(:any)/(:any)/(:any)/(:any)'] = "library/$1/$2/$3/$4/$5"; 
$route['keyword-library/(:any)/(:any)/(:any)/(:any)'] = "library/$1/$2/$3/$4"; 
$route['keyword-library/(:any)/(:any)/(:any)'] = "library/$1/$2/$3"; 
$route['keyword-library/(:any)/(:any)'] = "library/$1/$2"; 
$route['keyword-library/(:any)'] = "library/$1"; 
$route['keyword-library'] = "library"; 
```

然后在执行任何其他代码之前的 /index.php 文件中，我添加它以将旧页面重新路由到新页面。

```
$uri = $_SERVER['REQUEST_URI'];
if(strpos($uri,'/library') === 0)
    {
    $expl = explode('/library',$uri);   
    //array_shift($expl);
    $query = implode('',$expl);
    $redirect= "https://".$_SERVER['HTTP_HOST'].'/orthomoleculaire-bibliotheek'.$query;
    header( "Status: 301 Moved Permanently" );
    header("Location: $redirect");
    exit(0);
    } 
```

我曾尝试为此使用 .htaccess，但由于变量和可变长度的变化，我没有设法将旧网址重新路由到 301 的新网址。

如果有人知道更优雅的解决方案，请发布它，因为我一直找不到。

# html - 强制 IE9 进入浏览器兼容性视图

> ID：11519645
> 
> 赞同：8
> 
> 时间：2012-07-17T09:28:09.610
> 
> 标签：html, internet-explorer-9, compatibility, quirks-mode

我知道如何强制 IE 在**文档兼容性**中查看页面，但是**浏览器兼容性**视图呢？

我有一个项目仅在 IE9 出于各种原因处于**浏览器**兼容性视图时才有效，但我找不到任何有关如何强制 IE9 这样做的资源。

每个人都只谈论强制**文档**兼容性，例如使用

```
<meta http-equiv="X-UA-Compatible" content="IE=8" /> 
```

但这在我的情况下不起作用，因为它只设置**document view**。有没有办法设置**浏览器视图**？

PS：为了清楚起见，这是我需要强制执行的设置：

[![浏览器兼容性](../Images/7f8c632fa0dd931cc46c53ac41f179bd.png)](https://i.stack.imgur.com/5E3Lx.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T09:38:29.543

请参阅[MSDN 文档](http://msdn.microsoft.com/en-us/library/cc288325%28v=vs.85%29.aspx#SetMode)。
您应该使用 emulateIE7，因为兼容模式是IE7的*一种：*

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7"> 
```

**编辑**

如果上述方法不起作用，则其他[选项](http://hsivonen.iki.fi/doctype/#ie8)*确实*很差。
引用上面的链接：

*   微软并未将该站点的域名列入黑名单。（原文链接的黑名单很老，没有更新，你可以在电脑上找一个本地副本）
*   Intranet 管理员尚未将该站点列入黑名单。
*   用户没有按下兼容性视图按钮（duh）
*   该站点不在 Intranet 区域中
*   该页面不是由兼容模式页面构成的。

以上是，AFAIK，兼容模式的唯一原因。
除非您准备直接与 Microsoft 联系以将您的网站添加到全局黑名单中，否则您无能为力（除非您想将您的网站包装在源自黑名单域的框架中）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T19:42:34.477

我已经尝试了[http://msdn.microsoft.com/en-us/library/jj676915(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/jj676915%28v=vs.85%29.aspx)上的 MSDN 文章建议的各种方法，关于强制 IE9 使用 X 模拟以前的版本-UA-Compatible 标头以便正确显示。

在我的例子中，测试是在使用默认标准模式而不是兼容模式的 IE9 浏览器中播放 MP4 视频文件。其他网站说 Internet Explorer 仅配置为播放 MP4 文件（而不是 ogg 和 webm 视频文件），所以我认为这是最安全的文件格式进行测试。

我使用 IE9 模拟 IE8 标准和该页面的 IE7 标准视图测试了网页视图，在这两种情况下，旧标准视图都可以播放 MP4 视频文件。并且IE9兼容模式也播放了那个网页。但是我强迫 IE9 恢复到标准视图，以便测试一个代码，该代码可以为那些没有将自己的 IE9 浏览器配置为使用兼容模式的人播放视频。

前面提到的那个 MSDN 文章建议的方法似乎是针对这个问题的，但是在测试这些方法中的每一个时，它们都没有解决 IE9 浏览器播放 MP4 视频文件的问题。

我的问题的解决方案来自这张 Stack Overflow 票： [HTML5 Video not working only in IE9](https://stackoverflow.com/questions/9220537/html5-video-not-working-only-in-ie9)

我实际上必须在网站上的 .htaccess 文件中添加以下几行：

```
AddType video/ogg .ogv
AddType video/mp4 .mp4
AddType video/mp4 .mov
AddType video/webm .webm 
```

然后，我还需要确保第一行代码使用了这个：

```
<!DOCTYPE html> 
```

...而不是这样：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

我不需要使用任何“以前的版本”代码，例如：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8"> 
```

在我的测试页面上，我还使用了[video-js](http://videojs.com/)代码，我认为它可以解决 IE9 标准问题（就像其他 Web 浏览器一样）。它自己的代码似乎也输出了以下 X-UA-Compatible 代码：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta http-equiv="X-UA-Compatible" content="IE=9" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

但是，仅这些代码并不能解决问题。最终，我相信这是由于在 .htaccess 文件中添加了代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-03T11:53:38.270

我有一个适用于所有（7,8,9）的解决方案，即浏览器

```
<script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js" > </script> 
```

在 head 标签中使用这个 java 脚本。

# c++ - unordered_multimap::equal_range 慢

> ID：11519648
> 
> 赞同：1
> 
> 时间：2012-07-17T09:28:18.197
> 
> 标签：c++, g++, tr1, unordered-map

我希望 unordered_multimap::equal_range 具有平均常数复杂度，但是以下内容不会像预期的那样与 n 线性缩放：

```
#include <iostream>
#include <tr1/unordered_map>
#include <cstdlib>

using namespace std::tr1;
using namespace std;

int main(){
        int n;
        cin >> n;
        unordered_map<int, int> um;
        for(int i=0; i<n; ++i){
                um.insert(make_pair(i%100000, i));
                pair<unordered_map<int, int>::iterator,unordered_map<int,int>::iterator > t = um.equal_range(i);
        }
} 
```

```
$ g++ testbr.cpp
$ time echo 10000 | ./a.out 

real    0m0.065s
user    0m0.060s
sys     0m0.003s
$ time echo 100000 | ./a.out 

real    0m4.492s
user    0m4.490s
sys     0m0.003s 
```

有没有办法来解决这个问题？

**编辑：** 没有 equal_range 它可以按预期完美缩放。
此外，如果我插入具有相同键 0 的所有元素（并且总是调用 equal_range(0)），它会按预期缩放，即使 boost doc 声明相等范围平均为 O(count(k))...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-02T10:04:56.187

这似乎是 libstdc++ 中的一个错误，我在任何地方都找不到错误报告，但是使用`#include <unordered_map>`和编译`-std=c++11`我得到了预期的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:30:55.960

这不是按比例计算的`O(n)`，但是`O(n * n)`（您正在调用`std::equal_range` `n`时间）！

移出`std::equal_range`内循环。

# android - 线程和上下文问题

> ID：11519649
> 
> 赞同：1
> 
> 时间：2012-07-17T09:28:26.147
> 
> 标签：android, multithreading, android-context

我正在尝试在不同的线程上上传联系人，我正在获取应用程序上下文，但它似乎不起作用。为什么？

这是代码：

```
private void uploadall() {
    new Thread(new Runnable() {
        public void run() {

            Contacts contacts = new Contacts(getApplicationContext());
            contacts.phoneandname();

            // Apps
            ListApps mList = new ListApps();
            mList.loadInstalledApps(false, getApplicationContext());

        }
    });
} 
```

当我尝试在没有线程的情况下上传时，它可以完美运行......为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:35:29.523

尝试：

```
private void uploadall() {
private Context context=getApplicationContext();

    Thread thread = new Thread(new Runnable() {
    public void run() {

            Contacts contacts = new Contacts(context);
            contacts.phoneandname();

            // Apps
            ListApps mList = new ListApps();
            mList.loadInstalledApps(false,context);

        }
    });
    thread.start();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T09:31:57.397

您实际上并没有启动线程，请尝试以下操作：

```
private void uploadall() {
  Thread thread = new Thread(new Runnable() {
    public void run() {
      ...
    }
  });

  thread.start();
} 
```

Oracle 并发教程是在 Java 中开始使用多线程时非常好的资源，可以在[此处](http://docs.oracle.com/javase/tutorial/essential/concurrency/runthread.html)找到。

# android - 在带有 JNI 的 android 中使用 libxml2

> ID：11519656
> 
> 赞同：0
> 
> 时间：2012-07-17T09:28:45.733
> 
> 标签：android, c, java-native-interface, libxml2

我已经使用`JNI`（因为我的代码的主要部分是在 C 中）在 android 中创建了一个应用程序。现在我需要`xml`在我的应用程序中解析。因为我选择`libxml2`了我的应用程序，谁能告诉我如何`libxml2`使用我的安卓应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:23:24.057

由于没有用于 libxml2 解析器的预构建 libxml.so/.a 文件，因此我们需要创建库（.so/.a）并在应用程序中使用它，您必须下载所有 .c/.h/android .mk/Application.mk 并构建 libxml 库（.so/.a 之一）

# java - Android：日期到日期格式的字符串

> ID：11519657
> 
> 赞同：0
> 
> 时间：2012-07-17T09:28:46.280
> 
> 标签：java, android, date

我有一个字符串：“2012-08-10”，它代表：“yyyy-MM-dd”

我尝试使用以下方法将其转换为日期格式：

```
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd"); 
 Date convertedDate = dateFormat.parse(eventDates.get(i)); 
```

但是日志给出了以下类型的日期：

```
Fri Aug 10 00:00:00 GMT+01:00 2012 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:29:58.330

没错，您的日志使用自己的日期表示，如果您想要相同的格式，那么您需要使用

```
dateFormat.format(dateInstance); 
```

# sql-server - sql server 触发器语法

> ID：11519658
> 
> 赞同：1
> 
> 时间：2012-07-17T09:28:49.923
> 
> 标签：sql-server, tsql, triggers

我正在对表进行更新，需要获取更新前的字段值和更新后的字段值。我从已删除的表中获取更新前的值，从插入的表中获取更新后的值（见下文）。这是正确的方法吗？

```
insert into [log].[userPoints] 
(accountId,oldPoints,newPoints)
SELECT del.accountId, del.points, i.points
FROM [user].[Points] AS p
INNER JOIN deleted AS del ON del.accountId = p.accountId
inner join inserted as i on i.accountId = p.accountId 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:41:33.580

是的，完全正确。您可以在同一个 SQL 语句中访问这两个表，并且您的连接看起来不错。

# android - Android：adb.exe pull /mnt/sdcard/somefile.txt 不工作？

> ID：11519659
> 
> 赞同：12
> 
> 时间：2012-07-17T09:28:50.310
> 
> 标签：android, adb, pull

也许我做错了什么。我正在尝试使用 adb 命令从我的设备中获取文件：

```
adb pull /mnt/sdcard/deviceinfo.dat C:\ 
```

但我总是得到消息：

```
cannot create 'c:\\deviceinfo.dat': No such file or directory 
```

该文件存在于设备上：

```
adb shell ls /mnt/sdcard/deviceinfo.dat 
```

返回

```
/mnt/extsd/deviceinfo.dat 
```

我尝试了一些变体：

```
adb pull /mnt/sdcard/deviceinfo.dat
adb pull /mnt/sdcard/deviceinfo.dat C:\
adb pull /mnt/sdcard/deviceinfo.dat C:\deviceinfo.dat 
```

但我总是遇到同样的错误。拉的问题在哪里？我以管理员身份运行 cmd.exe。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-17T09:48:37.823

经过几个小时的痛苦，我会回答我自己的问题......

cmd.exe 是使用上下文菜单选项“以管理员身份运行”使用鼠标启动的，但不幸的是命令失败，因为由于某种原因，adb.exe 无法写入本地文件。所以错误：`cannot create 'c:\\deviceinfo.dat' ...`

现在正确的步骤：

```
1 - Windows key (focus on search textbox)
2 - Type cmd.exe (it find cmd.exe obviously)
3 - CTRL+SHIFT+ENTER (to run as Administrator)
4 - adb shell ls /mnt/sdcard/deviceinfo.dat (works fine now!) 
```

我不明白为什么在上下文菜单上使用“以管理员身份运行”（右键单击我的 Win7 栏上的命令提示符图标后）不能按预期工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-02-08T01:03:26.593

我通过在您的目标路径中创建一个文件夹来解决相同的问题。例如，`adb pull /sdcard/a.txt D:\`您将收到错误消息。在D:\创建一个临时文件夹，然后使用`adb pull /sdcard/a.txt D:\temp`，一切正常！这个问题是在 adb 1.0.36 版本中发现的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-25T15:02:55.663

确保文件/子文件夹不包含非法字符。就我而言，有文件和文件夹`:`的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-24T21:20:31.710

也可能是文件已经存在于您想要将其拉到的位置并且正在使用或写保护，因此无法被覆盖。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-17T09:37:35.907

您需要检查您传递的每个文件是否有效，例如：

```
--in your command cmd.

--cd c: press enter

--cd mnt press enter.

--cd sdcard press enter.

--deviceinfo.dat 
```

那么你将能够得到你想要的。

# twitter-bootstrap - Twitter 引导模式背景不会消失

> ID：11519660
> 
> 赞同：275
> 
> 时间：2012-07-17T09:28:53.403
> 
> 标签：twitter-bootstrap, modal-dialog

我正在使用 Twitter 引导模式对话框。当我单击引导模式对话框的提交按钮时，它会发送一个 AJAX 请求。我的问题是模态背景不会消失。模态对话框确实正确消失了，但是在屏幕上创建不透明度的“模态背景”仍然存在

我能做些什么？

* * *

## 回答 #1

> 赞同：585
> 
> 时间：2012-07-18T15:26:22.330

确保在执行 AJAX 请求时没有替换包含实际模式窗口的容器，因为当您尝试关闭它时，Bootstrap 将无法找到对它的引用。在您的 Ajax 完整处理程序中删除模式，然后替换数据。

如果这不起作用，您始终可以通过执行以下操作强制它消失：

```
$('#your-modal-id').modal('hide');
$('body').removeClass('modal-open');
$('.modal-backdrop').remove(); 
```

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2013-09-11T13:49:50.980

确保您`$.modal()`对应用模态行为的初始调用没有传入比您预期更多的元素。如果发生这种情况，它将最终为集合中的每个元素创建一个带有背景元素的模态实例。因此，当您实际上正在查看其中一个副本时，可能看起来背景已被遗忘。

就我而言，我试图使用如下代码即时创建模态内容：

```
myModal = $('<div class="modal">...lots of HTML content here...</div><!-- end modal -->');
$('body').append(myModal);
myModal.modal(); 
```

这里，结束`</div>`标记后的 HTML 注释意味着 myModal 实际上是两个元素的 jQuery 集合 - div 和注释。他们都尽职尽责地变成了模态，每个都有自己的背景元素。当然，由评论组成的模态框在背景之外是不可见的，所以当我关闭真正的模态框（div）时，它看起来就像背景被留下了。

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2013-11-20T23:41:26.253

我只是在这个问题上花了太长时间:)

虽然提供的其他答案很有帮助且有效，但从 Bootstrap 有效地重新创建模态隐藏功能对我来说似乎有点混乱，所以我找到了一个更干净的解决方案。

问题是当你打电话时会发生一系列事件

```
$("#myModal").modal('hide');
functionThatEndsUpDestroyingTheDOM() 
```

然后，当您将一堆 HTML 作为 AJAX 请求的结果替换时，模式隐藏事件不会完成。**但是，Bootstrap 会在一切都完成**时触发一个事件，您可以像这样挂钩：

```
$("#myModal").modal('hide').on('hidden.bs.modal', functionThatEndsUpDestroyingTheDOM); 
```

希望这有帮助！

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2015-05-21T12:09:06.520

在您的操作按钮中插入：

```
data-backdrop="false" 
```

和

```
data-dismiss="modal" 
```

例子：

```
<button type="button" class="btn btn-default" data-dismiss="modal">Done</button>

<button type="button" class="btn btn-danger danger" data-dismiss="modal" data-backdrop="false">Action</button> 
```

如果您输入此数据属性，则不会出现 .modal-backdrop。此链接上有关它的文档：http: [//getbootstrap.com/javascript/#modals-usage](http://getbootstrap.com/javascript/#modals-usage)

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2018-01-02T19:20:08.343

我知道这是一个非常古老的帖子，但这可能会有所帮助。这是我的一个非常小的解决方法

```
$('#myModal').trigger('click'); 
```

就是这样，这应该可以解决问题

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2015-06-15T17:42:36.023

如果您使用从 getboostrap 站点本身复制并粘贴到 html 生成的选择器中，请确保删除注释 '<!-- /.modal -->'。Bootstrap 感到困惑，并认为评论是第二个模态元素。它为这个“第二个”元素创建了另一个背景。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2013-03-19T10:09:21.320

我遇到了类似的问题：在我的模式窗口中，我有两个按钮，“取消”和“确定”。最初，两个按钮都会通过调用（使用“OK”之前执行一些代码）来关闭模态窗口，`$('#myModal').modal('hide')`场景如下：

1.  打开模态窗口
2.  做一些操作，然后点击“OK”做验证并关闭模态
3.  再次打开模式并单击“取消”关闭
4.  重新打开模式，再次点击“取消”==>背景不再可用！

好吧，我的隔壁同事拯救了我的一天：不是调用`$('#myModal').modal('hide')`，而是为您的按钮提供属性`data-dismiss="modal"`并将“单击”事件添加到您的“提交”按钮。在我的问题中，按钮的 HTML（嗯，TWIG）代码是：

```
<button id="modal-btn-ok" class="btn" data-dismiss="modal">OK</button>
<button id="modal-btn-cancel" class="btn" data-dismiss="modal">Cancel</button> 
```

在我的 JavaScript 代码中，我有：

```
$("#modal-btn-ok").one("click", null, null, function(){
    // My stuff to be done
}); 
```

而没有“点击”事件归因于“取消”按钮。模态现在正确关闭，让我再次使用“正常”页面播放。实际上，似乎`data-dismiss="modal"`应该是指示按钮（或任何 DOM 元素）应该关闭 Bootstrap 模式的唯一方法。该`.modal('hide')`方法似乎以一种不太可控的方式运行。

希望这可以帮助！

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2016-04-21T16:50:57.020

如果您太快地隐藏然后再次显示模式窗口，也会出现此问题。这在其他地方提到了问题，但我将在下面提供更多细节。

问题与时间和渐变过渡有关。如果您在前一个模态的淡出过渡完成之前显示一个模态，您将看到这个持续的背景问题（模态背景将以您的方式留在屏幕上）。Bootstrap 明确不支持多个同时模态，但这似乎是一个问题，即使您隐藏的模态和您显示的模态是相同的。

如果这是您的问题的正确原因，这里有一些缓解问题的选项。选项 #1 是一种快速简便的测试，用于确定淡入淡出过渡时间是否确实是您的问题的原因。

1.  禁用模式的淡入淡出动画（从对话框中删除“淡入淡出”类）
2.  更新模态文本而不是隐藏和重新显示它。
3.  修复时间，使其在完成隐藏前一个模态之前不会显示模态。使用模式的事件来做到这一点。[http://getbootstrap.com/javascript/#modals-events](http://getbootstrap.com/javascript/#modals-events)

以下是一些相关的引导问题跟踪器帖子。跟踪帖子的数量可能比我在下面列出的要多。

*   [https://github.com/twbs/bootstrap/issues/735](https://github.com/twbs/bootstrap/issues/735)
*   [https://github.com/twbs/bootstrap/issues/2839](https://github.com/twbs/bootstrap/issues/2839)
*   [https://github.com/twbs/bootstrap/issues/19385](https://github.com/twbs/bootstrap/issues/19385)

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2016-04-27T10:26:00.127

.modal('隐藏')

手动隐藏模态。在模态实际上被隐藏之前（即在 hidden.bs.modal 事件发生之前）**返回给调用者。**

所以而不是

```
$('#myModal').modal('hide');
$('#someOtherSelector').trigger('click'); 
```

做

```
$('#myModal').modal('hide');
$('#myModal').on('hidden.bs.modal', function() {
   $('#someOtherSelector').trigger('click');
}); 
```

所以你一定要等到“隐藏”事件完成。

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2015-10-04T09:46:50.183

另一个可能产生此问题的错误，

**确保您没有`bootstrap.js`在页面中多次包含脚本！**

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2013-08-31T07:35:28.160

即使我遇到了类似的问题，我也有以下两个按钮

```
<button id="confirm-delete-btn" >Yes, Delete this note.</button>
<button id="confirm-delete-cancel" data-dismiss="modal">No</button> 
```

我想执行一些 ajax 操作，并在该 ajax 操作成功时关闭模式。所以这就是我所做的。

```
$.ajax({
        url: '/ABC/Delete/' + self.model.get("Id")
            , type: 'DELETE'
            , success: function () {                    
                setTimeout(function () {
                    self.$("#confirm-delete-cancel").trigger("click");
                }, 1200);
            }
            , error: function () {}
        }); 
```

我触发了具有该`data-dismiss="modal"`属性的“否”按钮的单击事件。这有效:)

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2013-11-26T07:10:08.807

利用：

```
$('.modal.in').modal('hide') 
```

[资源](https://github.com/twbs/bootstrap/issues/489)

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2018-01-17T09:03:47.673

$('#myModal').trigger('click');

这对我有用。它不会关闭，因为当您打开弹出窗口时，它会触发 2 或 3 个模态背景。所以当你做 $('#myModal')).modal('hide'); 它只影响一个模态背景，其余部分仍然存在。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2014-05-21T04:21:36.993

此解决方案适用于 Ruby on Rails 3.x 和一个 js.erb 文件，该文件重建部分 DOM，包括模式。无论 ajax 调用来自模态还是来自页面的不同部分，它都有效。

```
if ($("#my-modal").attr("aria-hidden") === "false") {
  $("#my-modal").modal('hide').on('hidden.bs.modal', function (event) {
    functionThatEndsUpDestroyingTheDOM();
  });
} else {
  functionThatEndsUpDestroyingTheDOM();
} 
```

感谢@BillHuertas 的起点。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2017-05-24T21:47:38.070

在我的模式中添加`data-dismiss="modal"`任何按钮都对我有用。我希望我的按钮用 angular 调用一个函数来触发一个 ajax 调用并关闭模态，所以我`.toggle()`在函数中添加了一个，它运行良好。（在我的情况下，我使用了 a`bootstrap modal`并使用了 some `angular`，而不是实际的模态控制器）。

```
<button type="button" class="btn btn-primary" data-dismiss="modal"
ng-click="functionName()"> Do Something </button>

$scope.functionName = function () {
angular.element('#modalId').toggle();
  $.ajax({ ajax call })
} 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2018-05-02T12:42:16.907

应用最受好评的解决方案后，我遇到了一个问题，即它会破坏未来的模态正确打开。我发现我的解决方案效果很好

```
 element.on("shown.bs.modal", function () {
            if ($(".modal-backdrop").length > 1) {
                $(".modal-backdrop").not(':first').remove();
            }
            element.css('display', 'block');
        }); 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2014-02-04T15:38:12.467

更新面板问题。

我的问题是由于更新面板的位置。我在更新面板中有整个模式。如果您在更新面板之外声明模态并在更新面板中说模态体，那么 $('#myModalID').modal('hide'); 工作。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2016-07-28T15:34:03.317

仅供参考，以防有人遇到这种情况......我花了大约 3 个小时才发现最好的方法如下：

```
$("#my-modal").modal("hide");
$("#my-modal").hide();
$('.modal-backdrop').hide();
$("body").removeClass("modal-open"); 
```

关闭模态的功能非常不直观。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2016-01-14T17:08:39.487

这个问题的另一种观点。（我使用的是 bootstrap.js 版本 3.3.6）

我错误地在javascript中手动初始化模态：

```
$('#myModal').modal({
   keyboard: false
}) 
```

并通过使用

`data-toggle="modal"`

在此按钮中，如下例所示（在文档中显示）

```
<button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">Launch demo modal</button> 
```

所以结果它创建了两个实例

```
<div class="modal-backdrop fade in"></div> 
```

打开模式时附加到我的 html 正文。这可能是使用函数关闭模式时的原因：

```
$('#myModal').modal('hide'); 
```

它只删除一个背景实例（如上所示），因此背景不会消失。但是，如果您使用`data-dismiss="modal"`add on html 如引导文档中所示，它确实会消失。

所以我的问题的解决方案是只在javascript中手动初始化模态而不使用数据属性，这样我既可以手动关闭模态也可以使用`data-dismiss="modal"`特性。

如果您遇到与我相同的问题，希望这会有所帮助。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2014-02-19T08:38:46.710

我有同样的问题。我发现这是由于 Bootstrap 和 JQueryUI 之间的冲突。

两者都使用“关闭”类。改变一个或另一个类可以解决这个问题。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2013-12-13T02:18:51.750

在 .net MVC4 项目中，我在 Ajax.BeginForm( OnComplete = "addComplete" [extra code deleted]) 中弹出了模式（bootstrap 3.0）。在“addComplete” javascript 中，我有以下代码。这解决了我的问题。

> $('#moreLotDPModal').hide();
> 
> $("#moreLotDPModal").data('bs.modal').isShown = false;
> 
> $('body').removeClass('modal-open');
> 
> $('.modal-backdrop').remove();
> 
> $('#moreLotDPModal').removeClass("in");
> 
> $('#moreLotDPModal').attr('aria-hidden', "true");

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2018-09-26T18:11:30.503

我在尝试提交表单时遇到了同样的问题。解决方案是将按钮类型从更改`submit`为`button`，然后处理按钮单击事件，如下所示：

```
'click .js-save-modal' () {
    $('#myFormId').submit();
    $('#myModalId').modal('hide');
} 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2016-09-08T14:30:53.020

对于与模态组件无关的元素，请确保您没有在其他地方使用相同的元素 ID / 类。

也就是说.. 如果您使用类名“myModal”识别触发模式弹出窗口的按钮，请确保没有具有相同类名的不相关元素。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2018-03-13T23:20:11.390

对我来说，最好的答案是这个。

```
<body>
<!-- All other HTML -->
<div>
    ...
</div>

<!-- Modal -->
<div class="modal fade" id="myModal">
    ...
</div> 
```

> **模态标记放置** 始终尝试将模态的 HTML 代码放置在文档中的顶级位置，以避免其他组件影响模态的外观和/或功能。

从这个[答案](https://stackoverflow.com/a/20983718/1932159)

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2016-09-04T02:01:50.627

使用切换而不是隐藏，解决了我的问题

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2014-11-14T16:18:17.270

我遇到了同样的问题。

但是我使用的是 bootbox.js，所以它可能与此有关。

不管怎样，我意识到这个问题是由一个元素与它的父元素具有相同的类引起的。当这些元素之一用于绑定单击功能以显示模式时，就会出现问题。

即这是导致问题的原因：

```
<div class="myElement">
    <div class="myElement">
        Click here to show modal
    </div>
</div> 
```

更改它，以使被单击的元素与它的父元素、任何它的子元素或任何其他祖先都不具有相同的类。在绑定点击函数时，通常这样做可能是一个好习惯。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2016-02-09T22:55:10.827

```
//Create modal appending on body
myModalBackup = null;
$('#myModal').on('hidden.bs.modal', function(){
       $('body').append(myModalBackup.clone());
    myModalBackup = null;
});

//Destroy, clone and show modal
myModalBackup = $('#myModal').clone();
myModalBackup.find('.modal-backdrop').remove();
$('#myModal').modal('hide').remove();
myModalBackup.find('.info1').html('customize element <b>1</b>...');
myModalBackup.find('.info2').html('customize element <b>2</b>...');                             
myModalBackup.modal('show'); 
```

小提琴-> [https://jsfiddle.net/o6th7t1x/4/](https://jsfiddle.net/o6th7t1x/4/)

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2020-05-06T08:18:33.200

经过多次搜索后，这行代码解决了我的问题，我想在 ajax 成功时关闭模式：

```
$('#exampleModal').modal('hide');
$("[data-dismiss=modal]").trigger({ type: "click" }); 
```

非常感谢，曼努埃尔·费尔南多 [https://stackoverflow.com/a/27218322/5935763](https://stackoverflow.com/a/27218322/5935763)

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2016-10-14T11:51:29.633

在 ASP.NET 中，在 jquery 命令后面的代码上为 UpdatePanel 添加更新。例子：

```
 ScriptManager.RegisterStartupScript(Page, Page.GetType(), "myModal", "$('#myModal').modal('hide');", true);
    upModal.Update(); 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2015-10-21T18:35:55.813

我正在与 Meteor 合作，但我遇到了同样的问题。我的错误的原因是这样的：

```
{{#if tourmanager}}
    {{>contactInformation tourmanager}}
{{else}}
    <a href="#addArtistTourmanagerModal" data-toggle="modal"><i class="fa fa-plus"></i> Tourmanager toevoegen</a>
    {{>addArtistTourmanagerModal}}
{{/if}} 
```

如您所见，我在 else 中添加了模态，所以当我的模态更新联系人信息时，如果有另一个状态。这导致模态模板在关闭之前被排除在 DOM 之外。

解决方案：将模态移出 if-else：

```
{{#if tourmanager}}
    {{>contactInformation tourmanager}}
{{else}}
    <a href="#addArtistTourmanagerModal" data-toggle="modal"><i class="fa fa-plus"></i> Tourmanager toevoegen</a>
    {{>addArtistTourmanagerModal}}
{{/if}} 
```

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2021-10-11T20:12:59.287

在浏览了所有答案后，我想出了一个包罗万象的解决方案。最终，这是唯一对我有用的东西。（香草JavaScript）：

```
 var elem = document.querySelectorAll('[data-dismiss="modal"]')[0];
            var evt = new Event('click');
            elem.dispatchEvent(evt);

            var modalelem = document.getElementById('exampleModalCenter');

            var myModal = new bootstrap.Modal(modalelem, { keyboard: false })

            const fade = modalelem.classList.contains('fade');
            if (fade) {
                modalelem.classList.remove('fade');
            }

            myModal.hide();
            myModal.dispose();

            var backdrop = document.getElementsByClassName('modal-backdrop')[0];
            backdrop.style.display = 'none';

            var modalopen = document.getElementsByClassName('modal-open')[0];
            modalopen.classList.remove('modal-open');
            modalopen.style.removeProperty("overflow");\ 
```

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2016-09-14T23:37:58.473

我遇到了模态背景屏幕冻结问题，但情况略有不同：当显示 2 个背靠背模态时。例如，第一个会要求确认做某事，并且在单击“确认”按钮后，该操作会遇到错误，并且将显示第二个模式以弹出错误消息。第二个模态背景将冻结屏幕。元素的类名或 id 没有冲突。

解决问题的方法是给浏览器足够的时间来处理模态背景。与其在单击“确认”后立即采取行动，不如给浏览器说 500 毫秒来隐藏第一个模式并清理背景等 - 然后采取最终会显示错误模式的操作。

```
<button type="button" class="btn btn-red" data-dismiss="modal" on-tap="_dialogConfirmed">Confirm</button>
... 
```

_dialogConfirmed() 函数具有以下代码：

```
 var that = this;

    setTimeout(function () {
      if (that.confirmAction) {
        (that.confirmAction)();
        that.confirmAction = undefined;
      }
    }, 500); 
```

我猜其他解决方案之所以有效，是因为它们花费了足够的额外时间，为浏览器提供了所需的清理时间。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2021-08-28T05:13:40.737

在某些情况下，其他答案（有用且有效）无法轻松应用。然后一个可能的解决方法是实现一个事件，在模态对话框消失后不久触发对模态背景的点击。

这是一个基于以下模式对话框的示例：

```
<div class="modal fade ..." id="IdOfMyModal" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">
...
</div> 
```

要在单击模式时删除“modal-backdrop in”（在屏幕上创建背景不透明度），请添加以下代码：

```
$('#IdOfMyModal').on("click", function() {
    setTimeout(function() {
        if ($('#IdOfMyModal').css("opacity") != "1")
            $('.modal-backdrop').trigger('click');
    }, 100);
}); 
```

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2017-05-04T18:31:05.107

我有一个类似的问题。我将 Boostrap 与 Backbone 结合使用，我正在捕获“执行”按钮的点击，然后停止这些事件的传播。奇怪的是，这使模态消失了，但背景却没有。如果我调用 event.preventDefault() 但不调用 stopPropagation()，则一切正常。

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2017-02-27T15:53:51.343

尝试这个

```
$('#something_clickable').on('click', function () {
  $("#my_modal").modal("hide");
  $("body").removeClass("modal-open");
  $('.modal-backdrop').remove();
 }); 
```

这对我来说可以。

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2016-10-24T22:04:28.123

来自[https://github.com/twbs/bootstrap/issues/19385](https://github.com/twbs/bootstrap/issues/19385)

> Modal 的显示/隐藏方法是异步的。因此，代码如：
> 
> `foo.modal("hide"); bar.modal("show");`是无效的。在再次调用 show 或 hide 方法之前，您需要等待显示/隐藏实际完成（通过监听显示/隐藏事件；请参阅 [http://getbootstrap.com/javascript/#modals-events ）。](http://getbootstrap.com/javascript/#modals-events)

当我两次太快打开同一个模态时我遇到了这个问题，所以一个简单的解决方法是检查它是否已经显示，然后不再显示它：

```
$('#modalTitle').text(...);
$('#modalMessage').text(...);
if($('#messageModal').is(':hidden')){
    $('#messageModal').modal('show');
} 
```

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2016-07-24T19:09:30.343

the initial value of your **data-backdrop** attribute can be

"static","true", "false" .

**static** and **true** add the modal shadow, while **false** disable the shadow, so you just need to change this value with the first click to false . like this:

```
$(document).on('ready',function(){

	var count=0;

$('#id-which-triggers-modal').on('click',function(){

		if(count>0){

			$(this).attr('data-backdrop','false')
		}
		count++;
});

});
```

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2020-06-04T23:49:54.677

最近我遇到了这个问题，这里提供的解决方案都没有帮助我。或者它完全摧毁了它，因此它无法再次显示。在准备好文档时也没有工作，但有效的是我用立即调用的函数包装了我的所有听众，如下所示：

```
$(function () {
    $('#btn-show-modal').click(function () {
        $("#modal-lightbox").modal('show');
    });

    $('#btn-close-modal').click(function () {
        $("#modal-lightbox").modal('hide');
    });
}); 
```

# visual-studio-2010 - 如何在 Visual Studio 中删除每个项目的“调试”和“发布”文件夹

> ID：11519669
> 
> 赞同：2
> 
> 时间：2012-07-17T09:29:23.300
> 
> 标签：visual-studio-2010

有人可以告诉我如何删除解决方案中每个项目的 Debug 和 Release 文件夹吗？

[我在这篇文章](https://stackoverflow.com/questions/755382/i-want-to-delete-all-bin-and-obj-folders-to-force-all-projects-to-rebuild-everyt)中找到了这段代码，但我不知道我应该把它放在哪里！

```
FOR /F "tokens=*" %%G IN ('DIR /B /AD /S bin') DO RMDIR /S /Q "%%G"
FOR /F "tokens=*" %%G IN ('DIR /B /AD /S obj') DO RMDIR /S /Q "%%G" 
```

原因是，我必须手动关闭 Visual Studio，删除所有调试和发布文件夹，重新打开解决方案并重建......只有这样我的应用程序才能编译并正常工作！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T22:42:18.443

[您提到的“我想删除所有 bin 和 obj 文件夹以强制所有项目重新构建所有内容”](https://stackoverflow.com/questions/755382/i-want-to-delete-all-bin-and-obj-folders-to-force-all-projects-to-rebuild-everyt)线程中有许多很好的替代解决方案，但是如果您想使用此命令行，则需要针对发布和调试进行调整：

```
DIR /B /AD /S bin 
```

这表示输出名为 bin （或第二次调用中的 obj ）的当前目录 (/S) 中及其下的所有目录 (/AD)。您可能希望为 Debug 和 Release 而不是 bin 和 obj 执行此操作。

```
FOR /F "tokens=*" %%G IN ('DIR /B /AD /S Release') DO RMDIR /S /Q "%%G"
FOR /F "tokens=*" %%G IN ('DIR /B /AD /S Debug') DO RMDIR /S /Q "%%G" 
```

正如 Stuart 所说，包含这两个命令并从项目根目录运行的批处理文件（或命令行调用）将删除所有名为 Release 或 Debug 的目录及其内容。它不会很聪明并且知道这些是为项目配置的发布和调试目录。

使用了解项目配置文件并根据它们采取行动的工具会更安全。同样，在您链接的其他线程中也有一些想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T20:39:49.630

只是想添加到 jla 的答案（因为我不知道如何评论，或者我还不能评论）：

您甚至可以将调试和发布放在一个命令中（甚至 .svn 文件夹）。例如：

> FOR /F "tokens=*" %G IN ('DIR /B /AD /S Release Debug .svn') DO RMDIR /S /Q "%G"

在这里，我将双 %% 替换为单 %，因为它现在是一个命令，您可以从命令行运行它。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-01T07:14:23.480

我为此使用的批处理文件还清理了包和所有不必要的混乱，以便正确备份文件夹。我在批处理文件中使用此代码并从解决方案的根目录运行批处理文件（在我的情况下是所有解决方案所在的根目录）

```
for /d /r . %%d in (bin,obj,csx,rcf,_ReSharper.*) do @if exist "%%d" rd /s/q "%%d"
for /d /r . %%d in (packages) do @if exist "%%d" (
    cd %%d
    for /d /r . %%e in (*) do @if exist "%%e" rd /s/q "%%e"
) 
```

# c++ - 如何在 C++ 中使用 snmpwalk

> ID：11519676
> 
> 赞同：2
> 
> 时间：2012-07-17T09:29:36.497
> 
> 标签：c++, sockets, networking, snmp

我在我的代码中使用 net-snmp。对于 snmpget，我使用此代码，它是 100% 正确的。

```
 string oiids =  ".1.3.6.1.4.1.30429.1.3.2.1.0" ;  
 struct snmp_session session , *ss ;
 struct snmp_pdu *pdu;
 struct snmp_pdu *response;
 oid anOID[MAX_OID_LEN];
 size_t anOID_len = MAX_OID_LEN;
 int status;
 init_snmp("APC Check");
 snmp_sess_init( &session );
 ss = snmp_open(&session);
 session.peername = "192.168.17.74";
 session.community = (u_char *) "public";
 session.community_len = strlen("public");
 session.version = SNMP_VERSION_2c;
 ss = snmp_open(&session);
 pdu = snmp_pdu_create(SNMP_MSG_GET);
 read_objid(oiids.c_str(), anOID, &anOID_len);
 snmp_add_null_var(pdu, anOID, anOID_len);
 status = snmp_synch_response(ss, pdu, &response);
 for(variable_list * vars = response->variables; vars; vars = vars->next_variable)
         print_variable(vars->name, vars->name_length, vars); 
```

但是此代码不适用于具有多行答案的 OID。通过将这一行 pdu = snmp_pdu_create(SNMP_MSG_GET) 更改为此 pdu = snmp_pdu_create(SNMP_MSG_GETNEXT); 此代码仅返回第一行。

这就是问题所在，我怎么能得到所有行而不仅仅是第一行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:35:13.723

`GETNEXT`将在您指定的 oid 之后返回一个值。`GETNEXT`因此，您需要使用重复调用来遍历数据集。

[`GETBULK`](http://docstore.mik.ua/orelly/networking_2ndEd/snmp/ch02_06.htm)也许是你想要的。这将为您执行迭代并尽可能多地返回。您仍然需要自己收集完整的数据集。

> SNMPv2 定义了 get-bulk 操作，它允许管理应用程序一次检索表的大部分。标准的 get 操作可以尝试一次检索多个 MIB 对象，但消息大小受代理能力的限制。如果代理不能返回所有请求的响应，它会返回一条没有数据的错误消息。另一方面，get-bulk 操作告诉代理尽可能多地发回响应。这意味着不完整的响应是可能的。

# objective-c - GDataXMLDocument 解析错误

> ID：11519688
> 
> 赞同：0
> 
> 时间：2012-07-17T09:30:17.873
> 
> 标签：objective-c, xml, parsing, xml-parsing, gdataxml

我想访问这个 xml 页面：

[http://www.priorbank.by/CurratesExportXml.axd](http://www.priorbank.by/CurratesExportXml.axd)

我写：

```
NSArray *exchangeRateTableStringNodes = [document nodesForXPath:@"//LIST_R_DATE/R_DATE/LIST_E_CHANNEL/E_CHANNEL/LIST_RATE/RATE" error:nil]; 
```

但是我得到了 115 个错误的数组项，而不是三个正确的。错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:49:04.473

我发现的唯一解决方案是将此字符串拆分为字符串：

```
NSArray *exchangeRateTableStringNodes = [document nodesForXPath:@"//LIST_R_DATE/R_DATE/LIST_E_CHANNEL/E_CHANNEL/" error:nil];
NSMutableArray *exchangeRateTableStrings = [[NSMutableArray alloc] init];
NSArray *tempArr = [exchangeRateTableNode elementsForName:@"LIST_RATE"];
GDataXMLElement *tempElement = [tempArr objectAtIndex:0];
NSArray *exchangeRateTableStringNodes = [tempElement elementsForName:@"RATE"]; 
```

但我仍然不知道为什么会这样

# android - 从一个活动传递图像另一个活动

> ID：11519691
> 
> 赞同：7
> 
> 时间：2012-07-17T09:30:24.750
> 
> 标签：android, android-imageview, android-resources

SO上有类似的问题，但没有一个对我有用。

我想在 Activity1 中获取点击的图像并将其显示在 Activity2 中。
我正在获取点击图像的图像 ID，如下所示：

```
((ImageView) v).getId() 
```

并通过意图将其传递给另一个活动。

在第二个活动中，我使用如下图像 ID：

```
imageView.setImageResource(imgId); 
```

我在两个活动中都记录了值 og image id，它是相同的。

但我得到以下异常：

```
android.content.res.Resources$NotFoundException: Resource is not a Drawable 
(color or path): TypedValue{t=0x12/d=0x0 a=2 r=0x7f050000} 
```

我想这里的问题`getId()`是返回 Id of`ImageView`而**不是它的 source image**。
所有这些图像都存在于`drawable`.

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-17T09:39:55.283

有 3 个解决方案可以解决此问题。

1）首先将图像转换为字节数组，然后传递到意图，并在下一个活动中从捆绑中获取字节数组并转换为图像（位图）并设置为ImageView。

将位图转换为字节数组：-

```
Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
byte[] byteArray = stream.toByteArray(); 
```

将字节数组传递给意图：-

```
Intent intent = new Intent(this, NextActivity.class);
intent.putExtra("picture", byteArray);
startActivity(intent); 
```

从 Bundle 中获取字节数组并转换为位图图像：-

```
Bundle extras = getIntent().getExtras();
byte[] byteArray = extras.getByteArray("picture");

Bitmap bmp = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length);
ImageView image = (ImageView) findViewById(R.id.imageView1);

image.setImageBitmap(bmp); 
```

2）首先将图像保存到 SDCard 中，然后在下一个活动中将此图像设置为 ImageView。

3) 将位图传递给 Intent 并从捆绑包中获取下一个活动中的位图，但问题是如果您的位图/图像大小当时很大，则图像不会在下一个活动中加载。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-17T09:36:17.073

这行不通。你必须这样尝试。

将 ImageView 的 DrawingCache 设置为 true，然后将背景保存为位图并通过 putExtra 传递。

```
image.setDrawingCacheEnabled(true);
Bitmap b=image.getDrawingCache();
Intent i = new Intent(this, nextActivity.class);

i.putExtra("Bitmap", b);
startActivity(i); 
```

在您的下一个活动中，

```
Bitmap bitmap = (Bitmap) intent.getParcelableExtra("Bitmap");
imageView.setImageBitmap(bitmap); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-11T12:55:26.560

在你的类中定义一个`Drawable`静态变量`Application`，然后在第一个活动中设置图像可绘制数据，然后在你的下一个活动中从你在你的`Application`类中定义的静态变量中获取数据。

```
public class G extends Application {
   public static Drawable imageDrawable;

   ...
} 
```

第一项活动：

```
G.imageDrawable = imageView.getDrawable(); 
```

第二活动：

```
imgCamera.setImageDrawable(G.imageDrawable); 
```

在 onDestroy 中：

```
@Override
protected void onDestroy() {
    G.imageDrawable = null;
    super.onDestroy();
} 
```

注意：您必须`Application`在清单中定义您的类：

```
<application
        android:name=".G"
        ...>

</application> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-04T16:34:40.243

如果您要从 addapter 类之类的类迁移，请使用此代码。

```
Bitmap bitImg=listItem.getBitmapImage();
    ByteArrayOutputStream baoS = new ByteArrayOutputStream();
    bitImg.compress(Bitmap.CompressFormat.JPEG, 50, baoS);
    intent.putExtra("bitArray", baoS.toByteArray());
    context.getApplicationContext().startActivity(intent); 
```

然后将其传递到下一个活动

```
if(getIntent().hasExtra("bitArray")) {                
Bitmap bitM = BitmapFactory.decodeByteArray( getIntent().getByteArrayExtra("bitArray"),0,getIntent().getByteArrayExtra("bitArray").length);       
        imgIT = findViewById(R.id.img_detail);
        imgIT.setImageBitmap(bitM);
    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-01-26T21:38:29.657

简而言之，这是做到这一点的完美方式。这是发件人.class文件的代码

```
Bitmap bitmap = BitmapFactory.decodeResource(getResources(),R.drawable.ic_launcher;
Intent intent = new Intent();
Intent.setClass(<Sender_Activity>.this, <Receiver_Activity.class);
Intent.putExtra("Bitmap", bitmap);
startActivity(intent); 
```

这是接收器类文件代码。

```
Bitmap bitmap = (Bitmap)this.getIntent().getParcelableExtra("Bitmap");
ImageView viewBitmap = (ImageView)findViewById(R.id.bitmapview);
viewBitmap.setImageBitmap(bitmap); 
```

无需压缩。就是这样

# javascript - javascript警报和更新页面asp.net c#

> ID：11519695
> 
> 赞同：0
> 
> 时间：2012-07-17T09:30:40.133
> 
> 标签：javascript, asp.net, alert

我正在用 C# 编写 asp.net 项目。

我在页面 default.aspx 中有一个按钮，当我单击该按钮然后更新页面时我需要 javascript 警报。我通过以下方式做到这一点：

```
protected void Button1_Click(object sender, EventArgs e)  
{  
Response.Write("<script language='javascript'>alert('OK');</script>");
Response.Redirect("default.aspx");
} 
```

但不会发生 javascript 警报。那么，如何让 javascript 警报先出现然后更新页面呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T09:32:27.880

试试这个：

```
protected void Page_Load(....)
{
    this.myButton.Attributes.Add("onclick", "alert('OK'); return true;");
} 
```

或者在 ASPX

```
<asp:Button runat="server" ID="myButton" onClientClick="alert('OK'); return true;" ... /> 
```

**要在服务器上处理完某些内容后**执行代码，请尝试以下操作：

## ASPX

```
 <asp:ScriptManager runat="server" ID="scriptManager" />
    <asp:Button Text="text" runat="server" OnClick="dd_Click" /> 
```

## 背后的代码

```
 protected void dd_Click(object sender, EventArgs e)
    {
        // add your cool stuff
        ScriptManager.RegisterStartupScript(this, typeof(RelatedUpdatePanels), "myKey", "alert('OK');window.location='newurl.aspx';", true);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T09:56:27.673

它不起作用，因为您正在调用`Response.Redirect`. 在此之前在当前页面上发生的任何事情都将无效，因为新页面将在当前页面呈现之前立即重定向。

你有几个选择，但我认为你想要的是这个......

```
protected void Button1_Click(object sender, EventArgs e)
{
  Response.Write("<script type='text/javascript'>");
  Response.Write("alert('OK');");
  Response.Write("document.location.href='default.aspx';");
  Response.Write("</script>");
} 
```

另一种选择是将要显示的消息存储在会话变量之类的东西中，然后在重定向后将其显示在新页面上——但这更复杂，并且还需要更新新页面。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T09:40:37.753

尝试关注

```
 protected void Button1_Click(object sender, EventArgs e)  
    { 
      ClientScript.RegisterStartupScript(typeof(Page), "MessagePopUp", "<script   language='JavaScript'>alert('OK'); window.location.href = 'Default.aspx';</script>");  
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-24T19:54:44.830

ClientScript.RegisterStartupScript(Page.GetType(), "validation", "alert('无效的用户名或密码'); document.location.href='Default.aspx';");

或者

ClientScript.RegisterStartupScript(Page.GetType(), "validation", "alert('无效的用户名或密码'); window.location.href='Default.aspx';");

# spring - Spring 应用程序启动

> ID：11519697
> 
> 赞同：1
> 
> 时间：2012-07-17T09:30:45.220
> 
> 标签：spring

我正在构建一个基本的 MVC 应用程序，并且我已经正确使用了所有配置文件。但应用程序仍然没有统计。这些是以下配置文件，

网页.xml,

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app>
    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet
        </servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>/</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
            <welcome-file>jsp/index.jsp</welcome-file>
    </welcome-file-list>

</web-app> 
```

上下文配置

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.com/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
                           http://www.springframework.org/schema/context
                           http://www.springframework.org/schema/context/spring-context-3.2.xsd">

    <context:annotation-config />
    <context:component-scan base-package="controllers">
    </context:component-scan>

    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass"
            value="org.springframework.web.servlet.view.JstlView" />
        <property name="prefix" value="/jsp/" />
        <property name="suffix" value=".jsp" />
    </bean>

</beans> 
```

但我得到的错误是

```
org.apache.catalina.LifecycleException: org.apache.catalina.LifecycleException: org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'context:annotation-config'. 
```

我使用 glassfish 作为我的容器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:19:33.090

您从哪里获得这些架构版本。

改变

```
<beans xmlns="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.com/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
                           http://www.springframework.org/schema/context
                           http://www.springframework.org/schema/context/spring-context-3.2.xsd"> 
```

到

```
<beans xmlns="http://www.springframework.org/schema/beans" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.com/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans
                       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                       http://www.springframework.org/schema/context
                       http://www.springframework.org/schema/context/spring-context-3.1.xsd"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T09:54:40.390

我不相信它就是`xmlns:context="http://www.springframework.com/schema/context"`这样`xmlns:context="http://www.springframework.org/schema/context"`。

组织，而不是 COM。

我希望这有帮助！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T17:49:07.823

将您的架构更改为此

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:context="http://www.springframework.org/schema/context"
 xsi:schemaLocation="http://www.springframework.org/schema/beans
     http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
     http://www.springframework.org/schema/context
     http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<context:annotation-config />
<context:component-scan base-package="controllers">
</context:component-scan>

<bean id="viewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass"
        value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/jsp/" />
    <property name="suffix" value=".jsp" />
</bean>

</beans> 
```

# javascript - 电话号码格式javascript

> ID：11519699
> 
> 赞同：1
> 
> 时间：2012-07-17T09:30:47.113
> 
> 标签：javascript, regex, phone-number

我正在尝试使用正则表达式格式化一些电话号码。我存储的电话号码长度不同，所有电话号码都有国家代码。假设一个数字如下所示：00460708186681。我希望将其格式化为：+46 (0)708-18 66 81。前三组很简单：

```
/00([\d]{2})([\d]{1})([\d]{3})/ 
```

因为数字的开头总是相同的。这是我不知道剩余字符长度的最后一部分（我希望将它们分成两组）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:39:37.243

从以下正则表达式开始作为您的基础：

```
00(\d{2})(\d)(\d{3})(\d{2}) 
```

`(\d{2})?`现在为可能拥有的每一对添加另一对（注意“？”）。因此，如果最大对数为 3，则执行以下操作：

```
00(\d{2})(\d)(\d{3})(\d{2})(\d{2})?(\d{2})? 
```

这并不漂亮，但您需要这样做才能正确分组。或者你可以简单地做：

```
00(\d{2})(\d)(\d{3})((?:\d{2}){2,4}) // In this case it's 2 to 4 pairs of digits on the end. 
```

要匹配字符串，您可以在最后一组中手动添加空格，该组将包含初始格式化后的所有数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T09:53:45.630

正则表达式不是这里的最佳解决方案。用这个：

```
var num = new String("00460708186681"),
    i = 2,
    p,
    res = "+"+num.substr(i,2)+" ("+num.charAt(i+=2)+")"+num.substr(++i,3)+"-"+num.substr(i+=3,2);
while (p=num.substr(i+=2,2))
    res+= "\u00A0"+p;
return res; 
```

这将适用于无限长的数字。正则表达式无法做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T13:23:57.763

这是解决方案：

**Javascript：**

```
var num="00460708186681";
var res=num.replace(/([0+]{2})([1-9]{2})([\d]{1})([\d]{3})([\d]{2})([\d]{2})([\d]{2})/g,'+$2($3)-$4 $5 $6 $7');
alert(res); 
```

[在http://codebins.com/](http://codebins.com/)上尝试上面的脚本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-26T12:08:00.340

下面是一个用 TypeScript 编写的代码示例，但您肯定可以将其解析为 JavaScript：

```
const formatPhoneNumber = (phoneNumber: number, format?: string, code?: boolean): string => {
  let _format = format === undefined ? '---  ---  ---' : format
  let x = 1
  const newFormat = _format.replace(/-+/g, () => '$' + x++)
  let regex = '^'
  _format.match(/-+/g)?.forEach((c, k) => {
      regex += `(\\d{${c.length}})?`
  })
  return (code !== undefined && code === true ? '+' : '') + (phoneNumber.toString().concat(_format.split(' ').join(''))).slice(0, _format.split(' ').join('').length).toString().replace(new RegExp(regex, 'g'), newFormat)} 
```

要对其进行测试，您可以执行以下操作：

```
const formatedPhoneNumber = formatPhoneNumber(600000000) // => 600  000 000
const formatedPhoneNumberWithCountryCode = formatPhoneNumber(237600000000, 'xxx xxx xxx xxx', true) // => +237 600 000 000 
```

这个例子是完全模块化的，所以你可以指定你自己的格式（模板）来获得不同的输出！

*注意：我是喀麦隆人，所以我使用了那个奇怪的模板，请随意调整模板以适应所需的电话号码模板*

# c# - DBML 不捕获表中的唯一键信息

> ID：11519705
> 
> 赞同：0
> 
> 时间：2012-07-17T09:31:05.413
> 
> 标签：c#, sql-server, linq, sql-server-2008, linq-to-sql

我在 Management Studio 中构建了我的表格，并将所有内容都带入了 DBML 设计器中。出于部署目的，我使用 dbml 的数据上下文来创建数据库。新创建的数据库中缺少唯一键索引信息。有没有人面临同样的问题？

# java - 如何在 Maven 中排除赫克托的 slf4j

> ID：11519707
> 
> 赞同：4
> 
> 时间：2012-07-17T09:31:11.080
> 
> 标签：java, cassandra, hector

在 maven 依赖项中，我添加了 hector 来评估 Cassandra

```
<dependency>
   <groupId>org.hectorclient</groupId>
   <artifactId>hector-core</artifactId>
   <version>1.1-0</version>
</dependency> 
```

并获得以下 logback 消息

```
SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/C:/Users/yulia/.m2/repository/org/slf4j/slf4j-  log4j12/1.6.1/slf4j-log4j12-1.6.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/C:/Users/yulia/.m2/repository/ch/qos/logback/logback-classic/0.9.24/logback-classic-0.9.24.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation. 
```

如何从 hector 依赖项中排除 slf4j ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T09:37:20.770

你可以做这样的事情 -

```
<dependency>
   <groupId>org.hectorclient</groupId>
   <artifactId>hector-core</artifactId>
   <version>1.1-0</version>
            <exclusions>
                <exclusion>
                    <groupId>org.slf4j</groupId>
                    <artifactId>slf4j-log4j12</artifactId>
                </exclusion>
            </exclusions>
</dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T11:26:28.490

我找到了:-)！

这应该如下：

```
<dependency>
        <groupId>org.hectorclient</groupId>
        <artifactId>hector-core</artifactId>
        <version>1.1-0</version>
        <exclusions>
            <exclusion>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-log4j12</artifactId>
            </exclusion>
        </exclusions>
    </dependency> 
```

这种依赖来自 cassandra-all

# android - 是否可以在弹出窗口上显示微调器或自动完成文本视图？

> ID：11519708
> 
> 赞同：0
> 
> 时间：2012-07-17T09:31:19.447
> 
> 标签：android, popup, android-dialog

如何在弹出窗口上显示微调器或自动完成文本视图？在我的应用程序中，我需要显示一个包含微调器或自定义下拉列表的弹出窗口。如果无法通过弹出窗口实现，那么替代解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:39:30.240

如果你想在弹出窗口中显示微调器，你必须为微调器设置 android:spinnerMode="dialog" .. 是的，你必须为弹出窗口制作一个自定义布局并将其充气。

这是我的代码：

```
LayoutInflater layoutInflater  = (LayoutInflater)IOStatusActivity.this.getSystemService(LAYOUT_INFLATER_SERVICE)    
final View popupView = layoutInflater.inflate(R.layout.popupai, null);  

final PopupWindow popupWindowDi = new PopupWindow(popupView,  LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);  

final   TextView txtReadVal = (TextView)popupView.findViewById(R.id.lblPopUpAiReadFrmPLC);
final   EditText txtExpVal = (EditText)popupView.findViewById(R.id.txtPopUpAiExpVal);
Button btnDismiss = (Button)popupView.findViewById(R.id.btnPopUpAiCancle);                          
btnDismiss.setOnClickListener(new Button.OnClickListener(){
@Override
public void onClick(View v) {
popupWindowDi.dismiss();
}});` 
```

您可以在我添加按钮和编辑文本时添加您的微调器。希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T09:33:08.623

是的，有可能。您需要`custom layout`在弹出窗口中设计并调用该布局

假设这是我的`pop up`代码。

```
 private void showPopUp()
 {
    final AlertDialog.Builder helpBuilder = new AlertDialog.Builder(this);
    helpBuilder.setTitle("");

    LayoutInflater inflater = getLayoutInflater();
    final View PopupLayout = inflater.inflate(R.layout.jobselection, null);
    helpBuilder.setView(PopupLayout);

    final AlertDialog helpDialog = helpBuilder.create();
    helpDialog.show();

    spn =   (Spinner)PopupLayout.findViewById(R.id.spn);
    caneclbtn = (ImageButton)PopupLayout.findViewById(R.id.cancelBtn);
    selectallbtn    =   (ImageButton)PopupLayout.findViewById(R.id.selectBtn);
    clearallbtn     =   (ImageButton)PopupLayout.findViewById(R.id.clearallBtn);
    jobentries      =   (Button)PopupLayout.findViewById(R.id.entries);

    jobList         =   (ListView)PopupLayout.findViewById(R.id.list);

    //ur code here. You can add your spineer with items.
} 
```

在此块中，您可以编写所需的内容。祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-20T04:32:23.333

最好使用 dialog( `android.app.Dialog`) 来实现`AutoCompleteTextView`。`AutoCompleteTextView`在我看来，不可能添加 `PopupWindow`（你会得到一个例外）。您可以添加`Spinner`. `PopupWindow`如果您使用对话框而不是弹出窗口，则可以实现两者。

# iphone - 我应该怎么做才能忽略在xcode中滑动/挤压我的视图

> ID：11519711
> 
> 赞同：0
> 
> 时间：2012-07-17T09:31:25.540
> 
> 标签：iphone, ios5, xcode4.3

就这一点来说，当我在我的设备中运行我的应用程序并打开个人热点连接（出现在顶部状态栏）时，蓝条（个人热点连接）正在挤压我的视图/背景。我该如何忽略或解决这个问题？谢谢你。`i hope you understand what i mean.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:37:51.760

唯一的选择是永久隐藏状态栏或在发生这种情况时调整元素和背景的大小。

# pug - Cloud9 和翡翠

> ID：11519712
> 
> 赞同：3
> 
> 时间：2012-07-17T09:31:29.533
> 
> 标签：pug, cloud9-ide

环顾谷歌，我可以看到有几个人问过这个问题，但没有真正的回应。Cloud9 IDE 是否支持 Jade？如果是这样，我是否必须打开它或其他东西，如果不是，它是否在管道中？

我认为一些澄清将极大地帮助我自己和任何其他人。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T12:23:35.013

它[目前是一个功能请求](http://cloud9ide.zendesk.com/entries/21201847-support-for-jade-and-maybe-stylus-would-be-nice)，不在当前的 Cloud9 IDE 中。为了尝试更快地获得它，您可以随时[提出](http://cloud9ide.zendesk.com/entries/21201847-support-for-jade-and-maybe-stylus-would-be-nice)请求以获得更多关注（我刚刚这样做，因为让它识别 Jade 会很甜蜜）。

## 更新 - Cloud9 现在支持 Jade！

# java - 是不是必须在 Resource 标签中提及档案的名称？

> ID：11519715
> 
> 赞同：0
> 
> 时间：2012-07-17T09:31:40.850
> 
> 标签：java, database, jakarta-ee, tomcat, derby

为了在使用时连接`derby`数据库`Tomcat`，我下载[了核心 Apache Derby 数据库引擎的 jar（版本：10.9.1.0）](http://mvnrepository.com/artifact/org.apache.derby/derby)。我将这个 jar 文件保存`lib`在 Tomcat 的文件夹下。

![在此处输入图像描述](../Images/fa5b1144724e7ba05f26cd5104b79756.png)

现在有人告诉我**`context.xml`**在**`Tomcat`**.

```
<Resource name="jdbc/PollDatasource" auth="Container" type="javax.sql.DataSource"
    driverClassName="org.apache.derby.jdbc.EmbeddedDriver" 
    url="jdbc:derby://localhost:1527/polldatabase;create=true"
    username="suhail" password="suhail"
    maxActive="20" maxIdle="10" maxWait="-1" /> 
```

*   这个标签有什么作用？我的意思是它是什么意思？

*   虽然我下载的 Jar 文件包含`org.apache.derby.jdbc.EmbeddedDriver`我在这个标签中提到我下载的 jar 的模式？不需要在标签中添加存档名称吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T09:44:55.557

一旦你在 Tomcat lib 文件夹下放了一个 jar，Tomcat 会自动加载它并将它放在类路径中，这样所有在 Tomcat 上运行的应用程序都知道这个 jar。

XML 中的定义仅仅意味着您定义了一个数据源。应用程序服务器中使用数据源来管理数据库连接池，因此您不必这样做，它是首选的方式，而不是使用普通的 JDBC。

在您定义的 xml 中：`driverClassName="org.apache.derby.jdbc.EmbeddedDriver"`并且由于您将包含此类的驱动程序 jar 放在 lib 文件夹中，它会知道在哪里查找它，而无需告诉它 jar 在哪里。

请注意，将 jar 放在 Tomcat lib 下并不总是最好的解决方案，因为就像我说的那样，tomcat 下的所有应用程序都会知道这个 jar，如果有一个应用程序已经使用这个 jar 的不同版本，它可能会导致冲突。

更好的解决方案可能是将 jar 放在 WEB-INF/lib 下，这样只有这个应用程序知道 jar。

# iphone - 如何在 iPhone 应用程序中列出单个开发人员的所有 iPhone 应用程序？

> ID：11519716
> 
> 赞同：3
> 
> 时间：2012-07-17T09:31:44.727
> 
> 标签：iphone, objective-c, itunes, app-store-connect, itunes-sdk

在我的应用程序中，我想在表格视图中显示来自 iTunes 商店的所有 iPhone 应用程序。如果用户单击任何一个单元格，它会导致进入该应用程序的应用商店。我只是通过给出每个应用程序的链接来静态地知道。根据我的需要，我还需要在安装后获得新的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:04:19.813

您可以使用`search`Apple 提供的网络服务：http: [//www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html#searching](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html#searching)

我找不到按艺术家 ID 搜索软件的方法，但您仍然可以使用开发人员名称执行通用查询。

例如，这将返回 Gameloft 的应用程序：

[http://itunes.apple.com/search?term=Gameloft&media=software&lang=en_US&country=us](http://itunes.apple.com/search?term=Gameloft&media=software&lang=en_US&country=us)

请注意，这是按名称查询，因此您可能会有误报（出现*Gameloft*名称但不是真正的 Gameloft 应用程序的应用程序）。您必须检查`artistId`每个返回的应用程序的属性（在本例中，Gameloft 的艺术家 ID 为 282764297）。

如果您想打开 App Store 到特定的应用程序，请使用`trackId`您从之前的网络服务中获得的，然后

```
[[UIApplication sharedApplication] openURL:
 [NSURL URLWithString:
  [NSString stringWithFormat:
   @"itms-apps://ax.itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?type=Purple+Software&id=%d",
   trackId]]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-02T15:08:31.817

除了制作自己的表格视图，您还可以使用 StoreKit 来显示应用程序，并让用户在此处购买其他应用程序。只需将 383916386 替换为您的开发者帐户的正确 ID。

```
 SKStoreProductViewController *viewCtrl = [[SKStoreProductViewController alloc] init];
    [viewCtrl loadProductWithParameters:@{SKStoreProductParameterITunesItemIdentifier: @"383916386"} completionBlock:nil];
    [self presentViewController:viewCtrl animated:YES completion:nil]; 
```

# excel - 在excel中比较时间

> ID：11519719
> 
> 赞同：4
> 
> 时间：2012-07-17T09:31:57.460
> 
> 标签：excel, excel-formula

Excel 专家，需要您的帮助来计算检查列，详情如下。

```
Column A             | Column B                | Column C        | Column D           | Check
12/07/2012  23:59:06 | 2012/07/12              | Thursday        | 23:59:06           |  ?
            -        | =TEXT(A2, "yyyy/mm/dd") | =TEXT(A3,"dddd")|=TEXT(A3,"HH:mm:ss")| 
```

如您所见，我在 B 列中提取日期，在 C 列中提取日期，在 D 列中提取时间。

如果满足以下条件，列检查应为真，否则为假：

1.  如果一天是星期六或星期日，那么应该是真的
2.  如果一天是周一到周五，时间 > 6:30 pm 并且时间 < 07:30 am 应该为真。

这是我建立的公式，它似乎不起作用。

```
=IF(OR(C2="Saturday",C2="Sunday")+OR((D2>TIME(18,0,0)*AND(D2<TIME(7,0,0)))),TRUE,FALSE) 
```

我对几乎所有事情都是真实的。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T09:46:56.007

要编写类似`A OR B OR C`，在 excel 2010 中，您可以简单地编写：`OR(A, B, C)`。

在您的情况下，它将是：

```
=OR(C2="Saturday",C2="Sunday",D2>TIME(18,0,0), D2<TIME(7,0,0)) 
```

我认为您还需要在 D 列中使用适当的时间而不是文本：

```
=TIME(HOUR(A2),MINUTE(A2),SECOND(A2)) 
```

# django - 通过管理界面将数据从 CSV 导入 django

> ID：11519721
> 
> 赞同：0
> 
> 时间：2012-07-17T09:31:58.473
> 
> 标签：django, csv, django-admin

我正在开发一个 django 应用程序，该应用程序需要从许多 CSV 文件定期更新其数据库。这些将需要通过网络界面上传。是否有任何我应该查看的库/模块以使这更容易？

胜利者

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-16T06:48:52.810

您可以使用[Django import_export](https://django-import-export.readthedocs.org/en/latest/)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-17T09:37:06.423

让什么变得更容易？你的问题相当模糊，但据我了解，你需要一些东西来定期安排工作。这可以通过多种方式完成，但通常是通过 python 脚本和 cronjob 或 celery 任务。

# jboss - 让 JBoss 5.1 发送 Accept-Encoding: gzip with JAX-WS

> ID：11519722
> 
> 赞同：2
> 
> 时间：2012-07-17T09:31:59.440
> 
> 标签：jboss, jax-ws, gzip

我有一个 JBoss 5.1.1 服务器，它需要向外部方发送 SOAP 消息。该方提供了一些我用来生成 WebService 代码的 WSDL 文件。这一切都很好。

但是，现在我需要为 SOAP 消息启用 GZIP 支持。理论上，它就像在 SOAP 请求的 HTTP 消息中添加“Accept-Encoding: gzip, deflate”头一样简单。然后，外部方将使用 GZIP 编码发送响应。但是，我还没有找到让 JBoss 添加该标题的方法。我希望这里的人可以告诉我如何做到这一点。

# c# - 在 C# 中检测来自 GSM 调制解调器的来电

> ID：11519725
> 
> 赞同：2
> 
> 时间：2012-07-17T09:32:13.463
> 
> 标签：c#, modem

我正在开发一个 C# 应用程序来拨打和接听来自 GSM 调制解调器的呼叫。我正在使用一个`timer_tick`事件来定期读取端口`port.ReadExisting()`，并将其与`RING`. 如果匹配，则在标签中显示有来电。但是我无法让它工作。寻找建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:08:49.010

我解决了这个问题。干杯。这是我写的代码..可能会帮助一些人

```
private void timer1_Tick(object sender, EventArgs e)  
    {  
        if (port.IsOpen)  
        {
           string s = port.ReadExisting();

               if (s.Contains("\r\nRING\r\n"))
               {
                   incall_status.Text = "Incoming Call....";
                   incall_status.Visible = true;
               }
               else if (s.Contains("\r\nNO CARRIER\r\n"))
               {
                   incall_status.Text = "Call Disconnected";
                   bgwrkr_calldisconect.RunWorkerAsync();
               }

        }
    } 
```

# python - PNG图像精灵保留背景颜色

> ID：11519727
> 
> 赞同：1
> 
> 时间：2012-07-17T09:32:15.900
> 
> 标签：python, png, pygame

我正在使用[这个精灵](http://spriters-resource.com/ds/dgmnworldds/sheet/48629)进行一些实验。我用 GIMP 裁剪了工作表的一部分，并使蓝色背景透明，结果是[这个](https://github.com/skytreader/PyGame-Objects/raw/master/sample_sprites/meteormon_clueless.png). 但是，当我使用这个精灵运行代码时，我仍然会得到一个蓝色背景的精灵。其他精灵也会发生同样的事情（不同的精灵表，相同的源，相同的编辑过程）。

现在，我知道我可以使用 PyGame 本身设置透明颜色，但我想知道这是否是我能做到的唯一方法？我不能通过图像本身来做到这一点吗？为什么我用 GIMP 清除了 PyGame 仍然会读取蓝色背景？

PS SSCE 将是`pvz_shooter_test.py`和/或`image_test.py`链接的 GitHub 存储库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:24:07.880

试试 mySurface.convert_alpha() （查看[pygame 文档](http://www.pygame.org/docs/ref/surface.html#Surface.convert_alpha)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-02T08:40:14.387

即使在我用 GIMP 清除了 PyGame 之后，还有一些关于 PyGame 如何仍然读取蓝色背景的更多详细信息。

当图像文件格式支持它时，像素不仅仅表示为 RGB 位。每个像素都有附加信息，即*alpha*通道。GIMP 所做的是将 alpha 位设置为 0% 不透明度。RGB 值保持不变（在本例中为蓝色）。由于我的 PyGame 代码没有设置为读取额外的 alpha 位，它只读取描述蓝色的 RGB。该`convert_alpha`方法告诉 PyGame 也读取 alpha 通道。

# css - 图像框对齐问题是 IE

> ID：11519734
> 
> 赞同：0
> 
> 时间：2012-07-17T09:32:41.457
> 
> 标签：css, image

在此处输入图像描述请帮助我在 IE 中解决此问题。它在 Chrome、FF 中运行良好

请检查此 URL [http://scs-qa.com/panamera/trading.html](http://scs-qa.com/panamera/trading.html)

![在此处输入图像描述](../Images/6d0deca7b5d6f271a22bed37ad8fb0a6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:39:09.063

```
<div class="trading-img-box">
<a href = "javascript:void(0)" onclick = "document.getElementById('trading6').style.display='block';document.getElementById('body-below-otherpage-small-trading').style.display='none'">
<img class="trading-img" src="img/trading6.png">
**<a>**
<h1 class="trading-h1">Marble</h1>
<p class="trading-p">We set ourselves at the..</p>
</div> 
```

在这个框中你没有关闭你的锚标签。

还添加：

```
<p style="height:0; clear:both;"></p> 
```

为确保您的背景正确包裹，您可以添加溢出：自动。但是我在歌剧中遇到了有时会强制滚动的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T09:45:43.563

这是由于**trading-img-box**`<a>`中未关闭的锚标签具有有关信息而发生的**`<div>`**`Marble`

```
<div class="trading-img-box">
    <a href = "javascript:void(0)" onclick = "document.getElementById('trading6').style.display='block';document.getElementById('body-  below-otherpage-small-trading').style.display='none'">
        <img class="trading-img" src="img/trading6.png">
    <a> <<<<<< ------ Unclosed Anchor Tag
    <h1 class="trading-h1">Marble</h1>
    <p class="trading-p">We set ourselves at the..</p>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T09:36:58.817

将溢出：自动添加到元素#body-below-otherpage-small-trading

# android - Android 水平滚动视图。务实地添加视图

> ID：11519735
> 
> 赞同：4
> 
> 时间：2012-07-17T09:32:48.697
> 
> 标签：android, horizontalscrollview

我正在从 a 加载一些新闻站点，`webservice`我想将它们添加到`HorizontalScrollView`.

在 iOS 上，我可以通过循环我的新闻项目，然后将文本标签作为子视图添加到`ScrollView`. 我正在尝试在 android 中做类似的事情，但我似乎无法让它正常工作。无论我做什么，这些项目都列在彼此的下方。

这是我添加视图的代码：

```
public void setupViews(ArrayList<News> news)
{
    HorizontalScrollView scrollView = (HorizontalScrollView) getView().findViewById(R.id.horizontalScrollView);
    LinearLayout layout = (LinearLayout) getView().findViewById(R.id.linearLayout);

    for(int i = 0; i < news.size(); i ++)
    {
        News newsItem = news.get(i);
        TextView head = new TextView(this.getActivity());
        head.setText(newsItem.getHead());
        head.setId(100+i);
        layout.addView(head);
    }
} 
```

XML 如下所示：

```
<HorizontalScrollView
        android:layout_width="fill_parent"
        android:layout_height="150dp"
        android:id="@+id/horizontalScrollView" android:layout_gravity="center"
        >
    <LinearLayout
            android:orientation="vertical"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" android:id="@+id/linearLayout">
    </LinearLayout>
</HorizontalScrollView> 
```

可能值得注意的是，我在片段中执行此操作..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T09:37:54.307

您只能将单个子布局添加到`ScrollView`

在你的情况下：

*   添加一个`horizontal LinearLayout`（通过将其添加到您的 LinearLayout 将方向设置为水平`android:orientation="horizontal"`）
*   在里面添加东西`horizontal LinearLayout`

事情就会水平地就位:-)

# excel - 引用相对于 ActiveX 命令按钮 VBA 的单元格

> ID：11519736
> 
> 赞同：2
> 
> 时间：2012-07-17T09:32:55.357
> 
> 标签：excel, button, vba

我在 Excel 中的许多不同工作表上有很多 ActiveX 命令按钮。

单击任何按钮时，我想在按钮旁边的单元格中放置一个字符串。

到目前为止，这一直很麻烦，因为我不能`TopLeftCell`像使用按钮一样询问按钮的`Form control`，只有控件的`Top`和`Left`值。将这些转换为行和列并非易事，因为每张纸上都有很多不同的单元格高度/宽度。

我想防止对每个单元格位置进行硬编码，`button_Click()`这样我就可以毫无问题地移动按钮，修改工作表，......所以当突然出现文本时，我不必更改每个按钮的代码 2按钮旁边的单元格而不是 1 个单元格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:43:43.853

[您可以使用Andrew Poulson 在此处](http://www.mrexcel.com/forum/showthread.php?219122-Application-Caller-with-Command-Buttons-on-a-sheet)概述的此类模块方法来满足所有按钮的需求

我不明白您的评论`TopLeftCell`- 它可用于 ActiveX 按钮

**`Class Module`**

```
`named as Class1

Public WithEvents ButtonGroup As CommandButton

Private Sub ButtonGroup_Click()
    Sheets(ButtonGroup.Parent.Name).Cells(ButtonGroup.TopLeftCell.Row, ButtonGroup.TopLeftCell.Column) = "Done"
End Sub 
```

**`Normal Module`**

```
Dim Buttons() As New Class1

Sub Class_Init()
    Dim Sh As Worksheet
    Dim Obj As OLEObject
    Dim ButtonCount As Integer
    For Each Sh In ThisWorkbook.Worksheets
        For Each Obj In Sh.OLEObjects
            If TypeName(Obj.Object) = "CommandButton" Then
                ButtonCount = ButtonCount + 1
                ReDim Preserve Buttons(1 To ButtonCount)
                Set Buttons(ButtonCount).ButtonGroup = Obj.Object
            End If
        Next Obj
    Next Sh
End Sub 
```

# c# - 为什么声明浮点数时需要“f”？

> ID：11519743
> 
> 赞同：92
> 
> 时间：2012-07-17T09:33:29.693
> 
> 标签：c#, floating-point

例子：

```
float timeRemaining = 0.58f; 
```

为什么`f`在这个数字的末尾是必需的？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-07-21T07:29:50.457

Your declaration of a float contains two parts:

1.  It declares that the variable `timeRemaining` is of type `float`.
2.  It assigns the value `0.58` to this variable.

The problem occurs in part 2.

The right-hand side is evaluated on its own. According to the C# specification, a number containing a decimal point that doesn't have a suffix is interpreted as a `double`.

So we now have a `double` value that we want to assign to a variable of type `float`. In order to do this, there must be an implicit conversion from `double` to `float`. There is no such conversion, because you may (and in this case do) lose information in the conversion.

The reason is that the value used by the compiler isn't really 0.58, but the floating-point value closest to 0.58, which is 0.57999999999999978655962351581366... for `double` and exactly 0.579999946057796478271484375 for `float`.

Strictly speaking, the `f` is not required. You can avoid having to use the `f` suffix by casting the value to a `float`:

```
float timeRemaining = (float)0.58; 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-07-17T09:35:37.147

因为编译器可以使用几种数字类型来表示值`0.58`:[`float`](http://msdn.microsoft.com/en-us/library/b1e65aza.aspx)和. 除非您对编译器为您选择一个没问题，否则您必须消除歧义。[`double`](http://msdn.microsoft.com/en-us/library/678hzkk9.aspx)[`decimal`](http://msdn.microsoft.com/en-us/library/364x0z75.aspx)

的文档`double`指出，如果您自己不指定类型，编译器总是选择`double`任何实数值文字的类型：

> 默认情况下，赋值运算符右侧的实数文字被视为双精度值。但是，如果您希望将整数视为双精度数，请使用后缀 d 或 D。

附加后缀`f`会创建一个`float`; 后缀`d`创建一个`double`; 后缀`m`创建一个`decimal`. 所有这些也都以大写形式工作。

但是，这仍然不足以解释为什么它不能编译：

```
float timeRemaining = 0.58; 
```

答案中缺少的一半是从`double` `0.58`到的转换`float` `timeRemaining`可能会丢失信息，因此编译器拒绝隐式应用它。如果添加显式转换，则会执行转换；如果添加`f`后缀，则无需转换。在这两种情况下，代码都会编译。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-21T23:37:02.450

问题是.NET，为了允许执行某些类型的隐式操作，涉及`float`和`double`，需要明确指定在涉及混合操作数的所有场景中应该发生什么，或者允许在一个类型之间执行隐式转换只有方向；微软选择跟随 Java 的领导，允许偶尔偏爱精确但经常牺牲正确性并且通常会产生麻烦的方向。

在几乎所有情况下，取`double`最接近特定数字量的值并将其分配给 a`float`将产生`float`最接近该相同量的值。有一些极端情况，例如值 9,007,199,791,611,905；最佳`float`表示将是 9,007,200,328,482,816（相差 536,870,911），但将最佳`double`表示（即 9,007,199,791,611,904）转换为`float`9,007,199,254,740,992（相差 536,870,913）。但是，一般而言，将`double`某个数量的最佳表示转换为`float`将产生可能的最佳`float`表示，或者是本质上同样好的两种表示之一。

请注意，这种理想的行为即使在极端情况下也适用；例如，`float`数量 10^308的最佳表示与`float`通过转换该`double`数量的最佳表示所获得的表示相匹配。同样，`float`10^309 的最佳表示与`float`通过转换该`double`数量的最佳表示所获得的表示相匹配。

不幸的是，在不需要显式转换的方向上的转换很少能接近准确。`float`将一个值的最佳表示转换为`double`很少会产生特别接近`double`该值的最佳表示的任何东西，并且在某些情况下，结果可能会相差数百个数量级（例如，将`float`10^40 的最佳表示转换为`double`将产生比较大于`double`10^300 的最佳表示的值。

唉，转换规则就是这样，所以在“安全”方向转换值时，必须忍受使用愚蠢的类型转换和后缀，并小心在危险方向上的隐式类型转换，这会经常产生虚假结果。

# c# - iTextSharp 是否支持 Windows Metro 应用程序？

> ID：11519745
> 
> 赞同：2
> 
> 时间：2012-07-17T09:33:40.933
> 
> 标签：c#, xaml, pdf, itextsharp, microsoft-metro

iTextSharp 是否支持 Windows Metro 应用程序？

我正在尝试从 C# Metro 应用程序创建 PDF，但 PdfWriter.GetInstance 需要一些 WinRT 中不可用的参数。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:38:06.507

我认为您只是在程序开头缺少 using 或 dll 引用，请尝试使用完整的命名空间......我看不出 ITextSharp 不应该在 MetroApp 中工作的任何原因。

# ssh - wget 或 scp 哪个更好，可以将文件从一台服务器复制到另一台服务器？

> ID：11519746
> 
> 赞同：11
> 
> 时间：2012-07-17T09:33:46.917
> 
> 标签：ssh, copy, scp

我必须将我的所有项目从一台服务器复制到另一台服务器。

哪个是更好的选择：wget 还是 scp？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T09:37:08.397

使用`scp`. `wget`仅对使用 HTTP 或 FTP 检索文件有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-16T02:09:23.680

我更喜欢 wget，因为它比 scp 快得多。我总是体验 wget 比 scp 快 5 倍。

说，我有一个千兆字节的网络。如果我尝试通过 scp 复制一个大文件，最大速率可能是 10MB/s，而使用 wget 可以达到 50MB/s。

问题是 wget 只能通过 http 使用。但是，如果您尝试使用 python 中的 SimpleHTTPServer，这很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-07T16:33:07.960

如果我需要来自网络外部的文件，我将使用 wget。

如果我需要的文件在我的网络中，我将使用 scp。

# java - 编码 Javascript

> ID：11519747
> 
> 赞同：0
> 
> 时间：2012-07-17T09:33:52.813
> 
> 标签：java, javascript, encoding, apache-commons-lang

如何将使用 StringEscpeUtils.escapeJavascript 转义的文本转换回 java 中的原始文本？我已经用 escapeJavascript 转换了俄语文本，结果是：\u041F\u043E\u0440\u043E\u0434\u044B，但向后它不起作用。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:37:08.120

试试 unescapeJavascript 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:48:49.720

你可以试试java 的 bin 目录下的**命令行工具****native2ascii 。**您需要原始编码。

 **以下替代方法尝试使用默认编码（您的操作系统，`System.getProperty("file.encoding")`）、西里尔文和俄语。

```
native2ascii -reverse input.txt output.txt
native2ascii -reverse -encoding windows-1251 input.txt output.txt
native2ascii -reverse -encoding KOI8-R input.txt output.txt 
```

*自然地，在 java 中，您只需打印/写入字符串。Ä***

# php - 如何为 dokuwiki 中的登录用户添加默认组？

> ID：11519748
> 
> 赞同：0
> 
> 时间：2012-07-17T09:33:54.137
> 
> 标签：php, cas, dokuwiki

我有一个 CAS 数据库，并为我的 wiki 安装了带有 CAS 插件的 phpCAS。

我想通过 CAS（组：用户）为所有登录的用户添加一个默认组来管理 ACL。

有谁知道该怎么做？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:22:08.663

DokuWiki 有一个默认组。每个登录的用户都将被分配到该组。

该选项称为[defaultgroup](https://www.dokuwiki.org/config%3adefaultgroup)。默认值为*用户*。您也可以更改此设置。

似乎在某些情况下这些选项设置不正确在这种情况下，只需更改*/inc/auth/cas.auth.php*。在 74 之后添加以下行：

```
$USERINFO['grps'][] = $conf['defaultgroup']; 
```

[我在 DokuWiki.org](https://www.dokuwiki.org/auth%3acas?&#files_to_install)的 CAS 页面上添加了这一行。如果您对文件没有自定义更改，只需下载并替换您的版本。

# c++ - 如何在 linux 中读取低级鼠标点击位置。

> ID：11519759
> 
> 赞同：14
> 
> 时间：2012-07-17T09:34:42.903
> 
> 标签：c++, linux, mouse

我正在使用此代码从 linux 中的 dev/input/event* 读取鼠标事件。

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

#include <linux/input.h>
#include <fcntl.h>

#define MOUSEFILE "/dev/input/event4"

int main()
{
    int fd;
    struct input_event ie;

    if((fd = open(MOUSEFILE, O_RDONLY)) == -1) {
        perror("opening device");
        exit(EXIT_FAILURE);
    }

    while(read(fd, &ie, sizeof(struct input_event))) {
        printf("time %ld.%06ld\ttype %d\tcode %d\tvalue %d\n",
               ie.time.tv_sec, ie.time.tv_usec, ie.type, ie.code, ie.value);

}
    return 0;
} 
```

它给了我以下格式的结果：

> 时间 1342517261.840285 类型 2 代码 0 值 -1

'time' 是时间戳，它返回事件发生的时间。

'code' 是事件代码，例如 REL_X 或 KEY_BACKSPACE，完整列表在 include/linux/input.h 中。

“价值”是事件携带的价值。EV_REL 的相对变化，EV_ABS（操纵杆...）的绝对新值，或者 EV_KEY 的 0 用于释放，1 用于按键，2 用于自动重复。

**当我点击时，我得到了事件，但我没有得到鼠标在屏幕上的位置，什么是获得鼠标在屏幕上的位置的方法。**

* * *

编辑1：所以事实证明我必须使用相对坐标来获取鼠标坐标。我相信这是一个常见的要求，所以可能有库/预先存在的代码可以用来获取坐标。有关此主题的任何信息都将非常有用。

* * *

**编辑2：解决方案**

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

#include <linux/input.h>
#include <fcntl.h>
#include <X11/Xlib.h>

#define MOUSEFILE "/dev/input/event4"

int main()
{
  int fd;
  struct input_event ie;
  Display *dpy;
  Window root, child;
  int rootX, rootY, winX, winY;
  unsigned int mask;

  dpy = XOpenDisplay(NULL);
  XQueryPointer(dpy,DefaultRootWindow(dpy),&root,&child,
              &rootX,&rootY,&winX,&winY,&mask);

  if((fd = open(MOUSEFILE, O_RDONLY)) == -1) {
    perror("opening device");
    exit(EXIT_FAILURE);
  }

  while(read(fd, &ie, sizeof(struct input_event))) {
    if (ie.type == 2) {
      if (ie.code == 0) {
          XQueryPointer(dpy,DefaultRootWindow(dpy),&root,&child,
                        &rootX,&rootY,&winX,&winY,&mask);
          //rootX += ie.value;
          }
      else if (ie.code == 1) {
          XQueryPointer(dpy,DefaultRootWindow(dpy),&root,&child,
                        &rootX,&rootY,&winX,&winY,&mask);
         // rootY += ie.value;
          }
      printf("time%ld.%06ld\tx %d\ty %d\n",
         ie.time.tv_sec, ie.time.tv_usec, rootX, rootY);
    } else
      printf("time %ld.%06ld\ttype %d\tcode %d\tvalue %d\n",
          ie.time.tv_sec, ie.time.tv_usec, ie.type, ie.code, ie.value);
  }
  return 0;
} 
```

XQueryPointer 似乎更方便的解决方案。谢谢@perreal 的指导。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T10:09:25.037

您可以从 X11 获取初始位置，并使用相对坐标来跟踪指针：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

#include <linux/input.h>
#include <fcntl.h>
#include <X11/Xlib.h>

#define MOUSEFILE "/dev/input/event6"

int main()
{
  int fd;
  struct input_event ie;
  Display *dpy;
  Window root, child;
  int rootX, rootY, winX, winY;
  unsigned int mask;

  dpy = XOpenDisplay(NULL);
  XQueryPointer(dpy,DefaultRootWindow(dpy),&root,&child,
              &rootX,&rootY,&winX,&winY,&mask); 

  if((fd = open(MOUSEFILE, O_RDONLY)) == -1) {
    perror("opening device");
    exit(EXIT_FAILURE);
  }

  while(read(fd, &ie, sizeof(struct input_event))) {
    if (ie.type == 2) {
      if (ie.code == 0) { rootX += ie.value; }
      else if (ie.code == 1) { rootY += ie.value; }
      printf("time%ld.%06ld\tx %d\ty %d\n", 
         ie.time.tv_sec, ie.time.tv_usec, rootX, rootY);
    } else if (ie.type == 1) {
      if (ie.code == 272 ) { 
        printf("Mouse button ");
        if (ie.value == 0)  
          printf("released!!\n");
        if (ie.value == 1)  
          printf("pressed!!\n");
    } else {
        printf("time %ld.%06ld\ttype %d\tcode %d\tvalue %d\n",
            ie.time.tv_sec, ie.time.tv_usec, ie.type, ie.code, ie.value);
    }
  }
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:05:53.683

鼠标只发送相对移动，而不是绝对位置。您必须自己跟踪它，当您收到鼠标按钮事件时，您必须检查自己的坐标位置。

# java - 使用 Spring 上下文监听器创建和销毁线程

> ID：11519760
> 
> 赞同：0
> 
> 时间：2012-07-17T09:34:57.403
> 
> 标签：java, multithreading, spring, spring-mvc

> **可能重复：**
> [如何在 Web 应用程序中的所有其他 bean 被销毁之前关闭 Spring 任务执行程序/调度程序池？](https://stackoverflow.com/questions/6603051/how-can-i-shutdown-spring-task-executor-scheduler-pools-before-all-other-beans-i)

我正在创建一个涉及会话的网站，并且需要创建一个单独的线程来每天运行一次某些任务。我还需要它在 tomcat 关闭时关闭，并且听说我可以在 web.xml 中使用以下代码：

```
 <listener>
        <listener-class>Thread</listener-class>
    </listener> 
```

被引用的 Thread 类只是实现 Runnable 并在运行后执行各种睡眠。此代码是否适合此类线程的创建和销毁，或者是否有更好的方法来执行此类操作？

乔恩

# google-app-engine - 如何处理数据存储索引应用程序引擎？

> ID：11519761
> 
> 赞同：4
> 
> 时间：2012-07-17T09:35:02.480
> 
> 标签：google-app-engine, servlets, jdo, google-cloud-datastore, datanucleus

对于这个例子[LINK](https://stackoverflow.com/questions/11494240/one-to-many-relationship-in-java-google-ap-engine-caused-error) 我试着让它但是这个异常发生了？？

```
com.google.appengine.api.datastore.DatastoreNeedIndexException: no matching index found.
The suggested index for this query is:
<datastore-index kind="Contact" ancestor="true" source="manual">
    <property name="UserContacts_INTEGER_IDX" direction="asc"/>
</datastore-index> 
```

我怎样才能手动编写这些索引？我尝试在这个 XML 上制作 WEB-INF/datastore-indexes.xml 我写了以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<datastore-indexes  autoGenerate="true">

<datastore-index kind="Contact" ancestor="true" source="manual">
    <property name="UserContacts_INTEGER_IDX" direction="asc"/>
</datastore-index> 
```

但是当我要部署此错误时，请阻止我继续部署

*在“将商店部署到 Google”期间发生内部错误。XML 错误验证*

那么我怎样才能得到这些索引呢？

**另一个问题>>** 当我运行此代码并在 User 类中添加一些属性时

```
@Persistent (mappedBy = "userC")
 public List<Contact> UserContacts =new  ArrayList<Contact>(); 
```

并部署它，引擎为 UserContacts 创建索引但是由于新属性而出现异常 - 上面的相同错误无法为它们创建索引 -

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-24T19:12:10.563

您最好的办法是在本地运行您的应用程序并对这些实体执行一些测试查询。正如您`<datastore-indexes autoGenerate="true">`在索引配置中所拥有的那样，您应该得到一个名为

```
WEB-INF/appengine-generated/datastore-indexes-auto.xml 
```

在那里你应该得到你的应用程序工作所需的所有索引定义。

将这些索引定义复制到您`WEB-INF/datastore-indexes.xml`的应用程序并更新您的应用程序。

如果你去你的云控制台并检查你的存储/数据存储/索引视图，你应该是所有索引的构建或服务。一旦所有这些索引都在“服务”上，你应该很高兴。

# eclipse - eclipse 创建的预签名 Amazon S3 URL 不起作用

> ID：11519762
> 
> 赞同：0
> 
> 时间：2012-07-17T09:35:04.340
> 
> 标签：eclipse, amazon-web-services

我有一个非常奇怪的问题，将 Eclipse 与 Amazon 集成一起使用。

如果我右键单击存储桶中的项目并生成预签名 URL，然后在浏览器中使用此 URL，我将收到以下错误：

> 签名不匹配
> 
> 我们计算的请求签名与您提供的签名不匹配。检查您的密钥和签名方法。

我尝试在我的亚马逊配置中更改密钥，我也尝试让我的服务器为该项目生成密钥，但访问也被拒绝。

我使用的凭据是具有最高权限的凭据。

这是一个错误还是需要一些特殊配置？就像启用预签名 URL 或其他东西的生成一样。

如果有人对此有任何经验，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:39:54.203

这对于 Eclipse 来说是很正常的情况。我建议您为此使用 SDK。

# bash - 查找和替换文件夹 - 一个具有 $var 值的 $file_var

> ID：11519765
> 
> 赞同：0
> 
> 时间：2012-07-17T09:35:17.683
> 
> 标签：bash, shell, unix

我想扫描文件夹中的所有文件，并将文件中的所有 $file_X 实例替换为在我的 debian 6.0 安装中的 bash 脚本中定义的变量 $X。

例如，如果文件包含 $file_dep，我希望将其替换为我的 bash 脚本中定义的变量 $dep 的值。

这是我的配置文件的示例：

```
IP address = $file_dep 
```

这是我的 bash 脚本中的定义示例

```
$dep=192.168.0.1 
```

这是我可以使用谷歌找到的最佳起点。

```
# Replace Config Values
cd /home/config
find . -type f -print0 | xargs -0 sed -i "s/$szAnswer1/$szAnswer2/g" 
```

我的伪代码（我不擅长 bash）

```
Find $FILE_X
Replace $FILE_X with value $X 
```

谁能给我更多的帮助？

谢谢，

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:55:31.350

```
FILE_X=old
X=new
find . -name "*$FILE_X*" -exec bash -c 'echo mv $1 ${1//'"$FILE_X"'/'"$X"'}' -- {} \; 
```

如果输出正常，则删除回声

# ruby-on-rails - 扩展现有的 Rails 路径助手

> ID：11519766
> 
> 赞同：3
> 
> 时间：2012-07-17T09:35:20.757
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我想知道是否有办法扩展 Rails 为我的路线创建的现有路径助手。

我已经有了类似的东西`/videos/view/:id`，现在我需要将标签参数附加到该链接的任何位置（来自当前`params`集合）。

我现在看到的唯一解决方案是浏览所有视图并将对助手的调用更改为如下所示：

`view_videos_path(video, tag: params[:tag])`

现在显然这是一些工作，更简单的方法是用这样的东西覆盖现有的路径助手：

```
def view_videos_path(video, opts)
  view_videos_path(video, opts.merge(tag: params[:tag]))
end 
```

显然把它放在一个模块中会导致无穷无尽的递归，所以我想知道是否有任何关于如何做到这一点的最佳实践。

另外，你觉得这个方法怎么样？我不确定像这样扩展助手是否明智。但在我看来，这似乎是合理的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T10:55:46.380

将它们放入帮助模块并调用`super`，您也可以将其包含在其中，`ApplicationController`以便控制器中也可以使用路径：

```
# app/helpers/path_helpers.rb
module PathHelpers
  def view_videos_path(video, opts)
    super(video, opts.merge(tag: params[:tag]))
  end
end

class ApplicationController
  include PathHelpers # we could also use helper_method for each method
end 
```

# sql-server - SELECT 使用“WHERE A=1 OR A=2 子句”查询糟糕的执行计划

> ID：11519767
> 
> 赞同：1
> 
> 时间：2012-07-17T09:35:21.317
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, postgresql, sql-execution-plan

目前，我们有一个`LOGS`TABLE，其中包含多个日志编号（列`XLOG`），并在有限的时间范围内访问。

该表使用聚集的“自然”主键声明，其中`XLOG`是日志标识符，`XDATE`是时间戳，`XHW and XCELL`是确保日志事件唯一性的硬件标识符：

```
 CREATE TABLE [dbo].[LOGS](
    [XDATE] [datetime] NOT NULL,
    [XHW] [nvarchar](3) NOT NULL,
    [XCELL] [nvarchar](3) NOT NULL,
    [XALIAS] [nvarchar](255) NULL,
    [XMESSAGE] [nvarchar](255) NULL,
    [XLOG] [int] NOT NULL,
 CONSTRAINT [PK_LOG] PRIMARY KEY CLUSTERED ([XLOG] ASC,[XDATE] ASC,[XHW] ASC,[XCELL] ASC) 
```

问题是当使用相同的查询（例如在下面的示例查询中）访问多个日志时，会出现一个可怕的执行计划`XLOG = 1 OR XLOG = 1002`，请求 #1 ：

```
SELECT TOP 100 XDATE, XHW, XCELL, XMESSAGE, XLOG FROM LOGS
WHERE XDATE > '2012-06-12T00:00:00' AND XDATE < '2012-07-13T08:29:03.250'
AND (XLOG = 1 OR XLOG = 1002)
ORDER BY XDATE DESC, XLOG DESC 
```

**编辑：**需要的 100 行不仅来自日志 #1，而且来自两个日志，混合，日期排序。这就是两个查询返回的结果。

统计数据在测试前更新。

实际的执行计划基本上使用聚集索引搜索来获取数百万行数据，其中谓词为`XLOG`and `XDATE`（因为我们有 XLOG= 并且我们按 XDATE 排序，所以它可能只获取 100 首/最后一行）![实际计划](../Images/971e281d0e45d5f4d75eac995409e1c8.png)

聚集索引查找操作的详细信息：![工具提示](../Images/d1e881d1c1abf7bd617a4edaf9c0f6ef.png)

预期的执行计划是![预期计划](../Images/12182f61a151865c81c1db98f4f7698b.png)

我试图重写查询，但除了`UNION ALL`. 生成的查询返回相同的结果（具有正确的计划！），但感觉过于复杂（并且不能通过 XLOG 上的 JOIN 进行调整，但这不是问题）请求 #2：

```
WITH A AS (SELECT TOP 100 XDATE,  XHW, XCELL, XMESSAGE, XLOG FROM LOGS
WHERE XDATE > '2012-06-12T00:00:00' AND XDATE < '2012-07-13T08:29:03.250'
AND XLOG = 1
ORDER BY XDATE DESC),

B AS (SELECT TOP 100 XDATE,  XHW, XCELL, XMESSAGE, XLOG FROM LOGS
WHERE XDATE > '2012-06-12T00:00:00' AND XDATE < '2012-07-13T08:29:03.250'
AND XLOG = 1002
ORDER BY XDATE DESC)

SELECT TOP 100 * FROM (
    SELECT * FROM A
    UNION ALL 
    SELECT * FROM B 
) A
ORDER BY XDATE DESC, XLOG DESC 
```

**问题：**请求 #1 有什么问题？在尝试对数百万行进行排序之前，如何重写/修改它以考虑“TOP”？是否需要另一个索引、提示或一些额外的统计信息来解决问题？我有义务重写请求 #2 之类的查询吗？

**编辑：**从数量上看，这张表包含十几个日志，有些每月只有一个事件，而另一些每月有数百万个事件。

这种查询最常用于此表（还有其他带有额外过滤器的变体，但它们与此问题无关——使用请求 #2 时的复杂性除外）。

**编辑#2：**我尝试了将聚集索引更改为 (XDATE,XLOG,...) 而不是 (XLOG,XDATE,...) 的解决方案——nb：这种复合主键是这样设计的，因为XLOG 列的选择性。

我在生产数据库的副本上针对只有一千行的日志测试了这个查询：查询计划生成了很多 I/O（它只从`XLOG=12`广泛的`XDATE`s 中过滤掉几行）。所以这个特殊的解决方案是不行的。

```
SELECT TOP 100 XDATE, XHW, XCELL, XMESSAGE, XLOG FROM LOGS
WHERE XDATE > '2012-06-12T00:00:00' AND XDATE < '2012-07-13T08:29:03.250'
AND (XLOG = 12 AND XALIAS LIKE 'KEYWORD%' )
ORDER BY XDATE DESC, XLOG DESC, XHW DESC, XCELL DESC 
```

![具有大量 I/O 的漂亮查询计划](../Images/3878c0d70107822317b2f324ae37244f.png)

PS：顺便说一下，我们在**PostgreSQL 9.1**中也有同样的行为——所以它与数据库无关，更可能是错误的查询或错误的表设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:40:40.037

问题是数据库不知道您想要的前 100 行都是 XLOG=1，因此必须获取所有可能的 XLOG，然后排序以找到前 100。

在第二种情况下，您已经提供了更多信息或减少了所选行，以便优化器可以只使用索引进行排序。

另一种方法是在 XDATE DESC、XLOG DESC 上创建聚集索引，然后优化器将知道它不必排序并使主键成为哈希或其他索引。如果此查询是最常用的查询，则此查询是有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:17:24.447

按 XDate 排序导致问题。数据必须按 xdate 排序才能获得前 100 名，这就是为什么你有这种排序。最好的方法是在 xdate、xlog 上建立一个索引。但这会增加开销。当其他事情不起作用时，这应该是一个选项。试试下面的方法。

```
SELECT TOP 100 XDATE, XHW, XCELL, XMESSAGE, XLOG
into #mytop100
FROM LOGS 
WHERE XDATE > '2012-06-12T00:00:00' AND XDATE < '2012-07-13T08:29:03.250' 
AND (XLOG = 1) 
ORDER BY XDATE DESC
union all
SELECT TOP 100 XDATE, XHW, XCELL, XMESSAGE, XLOG FROM LOGS 
WHERE XDATE > '2012-06-12T00:00:00' AND XDATE < '2012-07-13T08:29:03.250' 
AND (XLOG = 1002) 
ORDER BY XDATE DESC

select TOP 100 XDATE, XHW, XCELL, XMESSAGE, XLOG from #mytop 100 ORDER BY XDATE DESC, XLOG DESC 
```

还可以尝试将主 sql withwout 放入#mytop100 中，看看它是否选择了一个好的计划。我敢打赌它会但仍然检查。

# c# - C#如何设置透明键并且不允许点击？

> ID：11519769
> 
> 赞同：1
> 
> 时间：2012-07-17T09:35:23.543
> 
> 标签：c#, transparency

嗯，我知道如何设置透明键，

但是如果我单击透明区域，它会单击表单。是否可以禁用点击？

嗯..我认为这个问题类似于 [C# Winforms Transparent Control allowed Clickthrough](https://stackoverflow.com/questions/2547425/c-sharp-winforms-transparent-control-allowing-clickthrough)

但我不明白答案，我应该将什么值更改为 1？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:40:01.723

`Opacity`. 它控制表单的一般透明度，它只是透明的，而不是点击的（除非`0`使用）。

但是，使用该方法，您的表单将（非常微弱）可见。

但是，以这种方式仅使表单的一个区域透明会有点复杂。

# c# - 如果用作选择语句，附加方法会返回一个“-”而不是空格

> ID：11519770
> 
> 赞同：0
> 
> 时间：2012-07-17T09:35:24.310
> 
> 标签：c#, append

我有几个字符串，我想附加它们以将其用作语句：

```
string tableToSelect = "COUNT(Table) as Table";

StringBuilder sqlQuery = new StringBuilder();

sqlQuery.Append("SELECT Month,");
sqlQuery.Append(tableToSelect);
sqlQuery.Append(" from ");
sqlQuery.Append("tbl_TEST"); 
```

如果我将结果复制粘贴到 SQL Server Management Studio 中，它会给我以下信息：

> SELECT Month, COUNT(Table)-as-Table from tbl_TEST

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:39:51.057

那应该没问题；想法：

*   您确定这些是本地副本中的常规空格，而不是其他空格 unicode 字符吗？
*   是否有任何其他代码在执行之前调整查询？

.NET 不会发明破折号。

> 如果我将结果复制粘贴到 SQL Server Management Studio

*你到底*是从哪里复制的？（因为你还没有打电话`sqlQuery.ToString()`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:41:30.147

不 - 不知道，但你为什么不这样做：

```
string.Format("SELECT Month, {0} FROM tbl_TEST", tableToSelect) 
```

调试器给你什么作为输出？尝试先将其复制/粘贴到 edit.exe 中，然后将其复制到那里并将其粘贴到 SQL Managment Studio 中。

# linux - g++：如何在 linux 上获得 keystate

> ID：11519776
> 
> 赞同：-1
> 
> 时间：2012-07-17T09:35:36.847
> 
> 标签：linux, g++

我想获得一些关键的关键状态，比如转变。如果我用 shift 按“a”来写“A”，那么通过 linux 上的 g++ 程序，我如何确保在按下“a”键时也按下 ​​shift。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:53:29.073

请参阅此问题的答案：[什么是 Linux 中的 getch() 和 getche() 等价物？](https://stackoverflow.com/questions/7469139/what-is-equivalent-to-getch-getche-in-linux)

它会给你正确的键码，即'a'如果你按下'a'并按下shift，'A'如果你按下它并按下shift等等。但单独获取shift键的状态是另一回事，我'不确定是否有一种简单的方法可以做到这一点。

# javascript - 如何保护 Socket.IO？

> ID：11519777
> 
> 赞同：32
> 
> 时间：2012-07-17T09:35:43.583
> 
> 标签：javascript, security, node.js, socket.io

我已经使用 Socket.IO 工作了几天，这既令人兴奋又令人沮丧。当前文档/教程的缺乏使得学习变得非常困难。我终于设法创建了一个基本的聊天系统，但有一个明显的问题。我该如何保护它？

是什么阻止了恶意用户复制（或编辑）我的代码并连接到我的服务器？我可以从我的 PHP 脚本中获取用户名并将其提交给 Socket.IO，这样我就可以将他们识别为该用户（当然 PHP 具有安全性），但是是什么阻止了某人仅提交未注册的用户名呢？

如何确保提交的事件是真实的并且没有被篡改？

我的基本 socket.io 聊天以供参考。

服务器：

```
var io = require('socket.io').listen(8080);
var connectCounter = 0;
io.sockets.on('connection', function (socket) {
connectCounter++;
 console.log('People online: ', connectCounter);

socket.on('set username', function(username) {
socket.set('username', username, function() {
console.log('Connect', username);

    });
});
socket.on('emit_msg', function (msg) {
    // Get the variable 'username'

socket.get('username', function (err, username) {
      console.log('Chat message by', username);
      io.sockets.volatile.emit( 'broadcast_msg' , username + ': ' + msg );
    });

  });

socket.on('disconnect', function() { connectCounter--; });
}); 
```

客户：

```
 <?php session_start() ?>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>untitled</title>
</head>
<body>
<input id='message' type='text'>
<div id="content"></div>
<script src="http://localhost:8080/socket.io/socket.io.js"></script>
<script src="http://code.jquery.com/jquery-latest.js"></script>

<script>
  var socket = io.connect('http://localhost:8080');
$.ajax({
type: 'GET',
  url: 'https://mysite.com/execs/login.php?login_check=true',
  dataType: 'json',
   success: function(data) {
var username = data.username;
socket.emit('set username', username, function (data){
});

}
});

  socket.on('broadcast_msg', function (data) {
        console.log('Get broadcasted msg:', data);
        var msg = '<li>' + data + '</li>';
        $('#content').append(msg);
      });

$('#message').keydown(function(e) {
if(e.keyCode == 13) {
e.stopPropagation();
          var txt = $(this).val();
          $(this).val('');
          socket.emit('emit_msg', txt, function (data){
            console.log('Emit Broadcast msg', data);
          });
}
});
</script>
</body>
</html> 
```

除了绝对没有安全性之外，这一切都很好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-22T12:01:48.450

[如果您可以在节点服务器上安装像Redis](http://redis.io/)这样的键值存储，则可以使用像[Predis](https://github.com/nrk/predis/)这样的 Redis 客户端从 php 服务器远程访问它。您所要做的就是在您的 php 服务器中发生新的登录/注销时更新节点服务器上的远程会话存储。

查看这篇文章了解详细信息：[为 socket.io/nodejs 验证用户](https://stackoverflow.com/questions/6502031/authenticate-user-for-socket-io-nodejs)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-28T12:07:59.637

出色的 express 护照框架使用安全 cookie 来验证身份。甚至还有一个[模块](https://github.com/jfromaniello/passport.socketio)可以从 socket.io 访问它。

# objective-c - 在 PopOverController 中添加 UIButton - Xcode

> ID：11519780
> 
> 赞同：0
> 
> 时间：2012-07-17T09:35:58.783
> 
> 标签：objective-c, popover, dismiss

我有一个应用程序，底部有一个工具栏，其中一个选项为`Upload`. 单击它时，`PopOverController`会出现一个显示可供选择的照片列表。

选择照片后，我想显示一个`PopOverController`包含照片的视图（在自身内部）以及名为`Upload`. 在选择我的照片时，目前我`PopOverController`并没有被解雇。我使用了以下代码行：

```
-(IBAction)photolibrarypressed:(id)sender{
    NSLog(@"hi");

    UIImagePickerController *picker= [[UIImagePickerController alloc] init];
    picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
    picker.delegate = self;

    UIPopoverController *popover = [[UIPopoverController alloc] initWithContentViewController:picker];
    self.popoverController = popover;          
    popoverController.delegate = self;
    [popoverController presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];

    imageView = [[UIImageView alloc] initWithFrame:[window bounds]];

    [window addSubview:imageView];
    imageView.hidden = YES;
    [window makeKeyAndVisible];     
}

- (void)imagePickerController:(UIImagePickerController *)picker 
    didFinishPickingImage:(UIImage *)image
              editingInfo:(NSDictionary *)editingInfo
{
    imageView.image = image;    
    NSLog(@"hellow");
    [self dismissModalViewControllerAnimated:YES];

    // need to show the upload image button now
    upload.hidden = NO;
}

- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
{
    [picker dismissModalViewControllerAnimated:YES];
    exit(0);
} 
```

有人可以帮我解决问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:50:20.210

而不是打电话

```
 [self dismissModalViewControllerAnimated:YES]; 
```

调用与 int eh 取消方法相同的取消方法来处理解除它的模态视图

```
 [picker dismissModalViewControllerAnimated:YES]; // Dismisses modalView 
```

# macos - Bash 脚本在给定文件夹中查找文件类型

> ID：11519781
> 
> 赞同：0
> 
> 时间：2012-07-17T09:36:01.377
> 
> 标签：macos, bash, unix

我有一点问题。我正在尝试编写一个脚本来查找给定目录中给定类型（php）的所有文件。如果没有找到，它会遍历父目录中的所有子目录。如果它找到它，它会执行给定的操作并中断。

这是我到目前为止所拥有的：

```
function findPHP(){
  declare -a FILES
  FILES=$(find ./ -type f -name \*.php)
  for f in $FILES
  do
    echo "Processing $f file..."
    # take action on each file.
  done
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-23T02:19:17.130

使用`$(...)`shell 时，不会将括号内的*任何*字符视为特殊字符（与类似的反引号语法不同），这表明`*`不需要转义。该`find`命令可能是从字面上看`\*`。尝试删除反斜杠。

# ruby-on-rails - Rails 路由 - 如何将范围参数添加到 url_for 助手？

> ID：11519782
> 
> 赞同：4
> 
> 时间：2012-07-17T09:36:02.387
> 
> 标签：ruby-on-rails, ruby, routing, rails-routing

我有资源生物，在视图和添加新生物的链接中是：

```
= link_to "Add new bio", [:new, :admin, :bio] 
```

如果我将资源 :bio 放到这样的范围内：

```
namespace :admin do    
  scope "/:bio_type", :defaults => {:bio_type => "company"} do
    resources :bios
  end
end 
```

这不起作用

```
= link_to "Add new bio", [:new, :admin, :bio, { bio_type: params[:bio_type] }] 
```

我的问题是如何将作用域参数添加到 url_for 助手？Rails 默认可以做到这一点吗？

ps new_admin_bio_path({bio_type: params[:bio_type]}) 工作正常，但这只是好奇

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T09:50:40.997

我相信你不能用数组参数来做到这一点`link_to`。您必须使用`polymorphic_path`或`new_admin_bio_path({bio_type: params[:bio_type]})`

原因是`link_to`调用`url_for`with `[:new, :admin, :bio, { bio_type: params[:bio_type] }]`，它调用`polymorphic_path`这些参数。

检查[url_for](https://github.com/rails/rails/blob/fc092a9cba5fceec38358072e50e09250cf58840/actionpack/lib/action_view/helpers/url_helper.rb#L111)和[polymorphic_url](https://github.com/rails/rails/blob/7f937914576c65a01f3a9528d1728720c6c400c5/actionpack/lib/action_dispatch/routing/polymorphic_routes.rb#L90)的源代码。请注意，这`polymorphic_url`需要 2 个参数 -`record_or_hash_or_array`和`options`，但`url_for`仅使用一个参数调用它。

```
 def url_for(options = {})
    options ||= {}
    case options
    when String
      options
    when Hash
      options = options.symbolize_keys.reverse_merge!(:only_path => options[:host].nil?)
      super
    when :back
      controller.request.env["HTTP_REFERER"] || 'javascript:history.back()'
    else
      polymorphic_path(options)
    end
  end

  def polymorphic_path(record_or_hash_or_array, options = {})
    polymorphic_url(record_or_hash_or_array, options.merge(:routing_type => :path))
  end

  def polymorphic_url(record_or_hash_or_array, options = {})
    if record_or_hash_or_array.kind_of?(Array)
      record_or_hash_or_array = record_or_hash_or_array.compact
      if record_or_hash_or_array.first.is_a?(ActionDispatch::Routing::RoutesProxy)
        proxy = record_or_hash_or_array.shift
      end
      record_or_hash_or_array = record_or_hash_or_array[0] if record_or_hash_or_array.size == 1
    end

    record = extract_record(record_or_hash_or_array)
    record = convert_to_model(record)

    args = Array === record_or_hash_or_array ?
      record_or_hash_or_array.dup :
      [ record_or_hash_or_array ]

    inflection = if options[:action] && options[:action].to_s == "new"
      args.pop
      :singular
    elsif (record.respond_to?(:persisted?) && !record.persisted?)
      args.pop
      :plural
    elsif record.is_a?(Class)
      args.pop
      :plural
    else
      :singular
    end

    args.delete_if {|arg| arg.is_a?(Symbol) || arg.is_a?(String)}
    named_route = build_named_route_call(record_or_hash_or_array, inflection, options)

    url_options = options.except(:action, :routing_type)
    unless url_options.empty?
      args.last.kind_of?(Hash) ? args.last.merge!(url_options) : args << url_options
    end

    args.collect! { |a| convert_to_model(a) }

    (proxy || self).send(named_route, *args)
  end 
```

因此，使用该选项的正确调用`scope`听起来应该像

```
polymorphic_path([:new, :admin, :bio], bio_type: params[:bio_type]) 
```

# asp.net - Windows Azure 缓存预览

> ID：11519783
> 
> 赞同：4
> 
> 时间：2012-07-17T09:36:03.083
> 
> 标签：asp.net, caching, azure, asp.net-session

我在使用 Windows Azure Cache Preview 时遇到了一些问题。

我在这里添加了 Nuget 包：http://nuget.org/packages/Microsoft.WindowsAzure.Caching[并](http://nuget.org/packages/Microsoft.WindowsAzure.Caching)根据 windowsazure.com 上的信息配置了存储 ASP.NET 会话状态的角色

问题是，我`No connection could be made because the target machine actively refused it 127.255.0.0:20004`在调试时得到了。Azure 使用的开发 IP 是 12.7.0.0.1:81

我不知道为什么，即使是样本`Windows Azure Caching (Preview) Session State and Output Caching Sample`也做同样的事情。

**更新：来自日志的错误：**

```
w3wp.exe Error: 0 : ERROR: <SimpleSendReceiveModule> b4551065-941b-4bdb-9487-57d9207af308:Request - 1, result - Status=ChannelOpenFailed[System.Net.Sockets.SocketException (0x80004005): No connection could be made because the target machine actively refused it 127.255.0.0:20004
   at Microsoft.ApplicationServer.Caching.AsyncResultNoResult.EndInvoke()
   at Microsoft.ApplicationServer.Caching.TcpClientChannel.ConnectionCallback(IAsyncResult result)] for end point [net.tcp://127.255.0.0:20004] 
```

此外，更多测试表明它不仅用于会话状态存储，还用于所有与缓存相关的任务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T20:50:40.867

找到答案，在 webrole 或 workerrole 属性中，将实例数设置为最小 2，这对我来说是个问题。调试8小时后解决

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T17:41:00.753

对于其他有同样问题的人，如果 Sundara Prabu 提出的解决方案不起作用，还有另外两种可能的解决方案：

1.  只需按照[MSDN 论坛上此线程](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredata/thread/fb4b3505-aca9-44f3-843b-dc98de83a9d9/)中的建议重新启动您的计算机；
2.  在 Windows 的区域设置中，将长时间格式更改为`HH:mm:ss`. 正如我通过阅读[这个 SO 答案](https://stackoverflow.com/a/15407741/753737)发现自己的那样，缓存模拟器调用[`logman.exe`](http://technet.microsoft.com/en-us/library/bb490956.aspx)用于记录目的，特别是它使用`cnf`参数，该参数需要格式的持续时间`HH:mm:ss`。缓存模拟器改为使用区域设置中的长时间格式格式化此持续时间 - 在我的情况下，使用 Windows 8 下的意大利语设置，使用的格式是`HH.mm.ss`，从而导致问题中描述的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T15:00:53.737

我个人没有看到这个错误，所以我在黑暗中尝试了几次......

您是否在角色属性选项卡中启用了缓存预览？该步骤设置了缓存解决方案的“服务器”端。

您还需要确保各种配置中的名称保持一致，否则缓存客户端将无法找到服务。您应该在 dataCacheClient 部分的 web.config 中找到其中之一。特别是标识符属性。

# android - 解析 url 时如何获取内容/字符串值？

> ID：11519785
> 
> 赞同：0
> 
> 时间：2012-07-17T09:36:14.480
> 
> 标签：android, xml-parsing

```
String url="http://graph.facebook.com/GHost"; 
URL objUrl = new URL(url);
InputStream is= objUrl.openStream();
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();   
DocumentBuilder db = dbf.newDocumentBuilder();
Document doc = db.parse(new InputSource(is));
String str=doc.getTextContent();<<<<<<<<<----------- getting null value
JSONObject object = new JSONObject(str);<<<<---------making exception error
String id = object.getString("id");
if do open the url the content is like below
{
    "id": "3965568744555",
    "name": "GHost",
    "picture": "http://profile.ak.fbcdn.net/hprofile-ak-snc4/373042_396504583708761_1625984_s.jpg",
    "link": "http://www.facebook.com/GHost",
    "likes": 70,
    "cover": {
    "cover_id": 493579484270,
    "source": "http://a3.sphotos.ak.fbcdn.net/hphotos-ak-snc7/s720x720/396014_493579484001270_177795_n.jpg",
    "offset_y": 0
}, 
```

我如何在 String str= 处编写代码？最后我想得到 id 值。请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:48:42.187

使用下面的代码

```
String line;
BufferedReader r = new BufferedReader(new InputStreamReader(inputStream));
StringBuilder total = new StringBuilder();
while ((line= r.readLine()) != null) {
    total.append(line);
}

String str = total.toString(); 
```

代替

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();   
DocumentBuilder db = dbf.newDocumentBuilder();
Document doc = db.parse(new InputSource(is));
String str=doc.getTextContent(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:37:16.337

你可以解析文件......使用字符串连接函数...... [解析json字符串](https://stackoverflow.com/questions/5071115/parse-json-string)

# python - 如何在元素总和最大的列表中找到列表？

> ID：11519787
> 
> 赞同：10
> 
> 时间：2012-07-17T09:36:19.257
> 
> 标签：python, list, sum, max

我有一个列表列表：

```
x = [[1,2,3], [4,5,6], [7,8,9], [2,2,0]] 
```

我想获得其元素总和在列表中最大的列表。在这种情况下`[7,8,9]`。

我宁愿有一个花哨的`map`或`lambda`或列表理解方法而不是`for/while/if`循环。

此致

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-17T09:37:50.857

[`max`接受一个关键参数](http://docs.python.org/library/functions.html#max)，通过它你可以告诉 max 如何计算迭代中每个项目的值。[`sum`](http://docs.python.org/library/functions.html#sum)在这里会做得很好：

```
max(x, key=sum) 
```

演示：

```
>>> x = [[1,2,3], [4,5,6], [7,8,9], [2,2,0]]
>>> max(x, key=sum)
[7, 8, 9] 
```

如果您需要使用不同的方法对项目求和，您也可以指定自己的函数；这不仅限于 python 内置函数：

```
>>> def mymaxfunction(item):
...     return sum(map(int, item))
...
>>> max([['1', '2', '3'], ['7', '8', '9']], key=mymaxfunction)
['7', '8', '9'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:47:18.747

为了完整起见，正如@Martijn 击败我给出了最优雅的答案——我将在`key=`参数在 Python 中可用之前输入选项（但如果你使用的是 < 2.5——你应该真正升级）以及它使用的*丑陋*程度是：

```
x = [[1,2,3], [4,5,6], [7,8,9], [2,2,0]]
with_idx = ( (sum(v), i) for i,v in enumerate(x))
print x[max(with_idx)[1]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-02T14:39:06.380

```
num = [[1, 2, 3], [4, 5, 6], [10, 11, 12], [7, 8, 9]]

index = 0
max_index = 0
sum_max = 0
for list in num:
>>>>sum_list = 0
>>>>for x in list:
>>>>>>>>sum_list += x
>>>>if sum_list > sum_max:
>>>>>>>>sum_max = sum_list
>>>>>>>>max_index = index
>>>>index += 1
print(num[max_index])`enter code here` 
```

# android - android如何为用户每周选择的那一天构建一个重复的AlarmManager？

> ID：11519790
> 
> 赞同：2
> 
> 时间：2012-07-17T09:36:37.023
> 
> 标签：android, alarmmanager

我想建立一个用户可以选择他们想要的日子的活动

例如周日、周一、周二、周三、...、周六

Activity 中的一个方法用于设置用户选择的时间

```
if(action) { //10分鐘該一次
    PendingIntent sender = PendingIntent.getBroadcast(MedicationAddRemineActivity.this ,
            0 , intent, 0 );
    alarm.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP 
                    , fireTime, 10*60*1000, sender);
} else { //關閉鬧鐘
    PendingIntent cancelSecder = PendingIntent.getBroadcast(MedicationAddRemineActivity.this ,
            0 , intent, 0);
    alarm.cancel(cancelSecder);
} 
```

但我想构建一个函数来处理用户每周选择的日子`radioButton`。

如果用户选择了星期一和星期五，设备应该向用户显示一个对话框

每个星期一和星期五，直到它被取消。

如何构建功能？

计算`AlarmManager`开始时间：

```
long totalTime = 0;
if(moon.equals("下午")) {
    totalTime = total + 12*3600;
} else {totalTime = total + 0;}

//取得系統當時時間
Time t = new Time();
int sysHour = t.hour;
int sysMin = t.minute;
int sysSecond = t.second;
long sysTotal = sysHour*3600 + sysMin*60 +sysSecond;

//處理用藥提醒時間
SimpleDateFormat format = new SimpleDateFormat("HH:mm:ss");
long transfer = Long.parseLong(format.format(totalTime));
String transferdTime = String.valueOf(sysTotal - transfer);
return transferdTime; 
```

# eclipse - Eclipse 格式化 Try/Catch 块并在单独的行上使用大括号

> ID：11519791
> 
> 赞同：2
> 
> 时间：2012-07-17T09:36:50.987
> 
> 标签：eclipse

我正在尝试设置 Eclipse，以便它格式化 try catch finally 块（按下时`CTRL+SHIFT+F`如下：

```
try
{
    // some code
}
catch (IOException exception)
{
    // some exception handling code
}
finally
{
   // some more code
} 
```

我在 Window >> Preferences >> Java >> Code Style >> Formatter 下找到了格式化选项，并添加了一个新的 Active 配置文件，但是我在大括号选项卡上看不到 try catch 块的选项。我已将该选项卡上的所有内容设置为“下一行”，但是代码现在格式为：

```
try
{
    // some code
} catch (IOException exception)
{
   // some exception handling code  
} finally
{
   // some more code
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T09:42:32.960

您必须在两个地方执行此操作：

1.  “块”下的大括号选项卡，设置为“下一行”。
2.  在 Control Statements 选项卡中，选中与 try/catch 相关的两个框。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-17T09:42:06.510

您需要的设置在`Control Statements`选项卡中：

*   在 'try' 语句中的 'catch' 之前插入新行
*   在 'try' 语句中的 'finally' 之前插入新行

# module - ZendDeveloperTools 模块在 ZF2 beta5 中不显示工具栏

> ID：11519800
> 
> 赞同：5
> 
> 时间：2012-07-17T09:37:13.533
> 
> 标签：module, zend-framework2

我正在尝试安装beta5的[`ZendDeveloperTools`](https://github.com/zendframework/ZendDeveloperTools)模块。`ZF2`以下是我到目前为止所遵循的步骤：

- 安装成功[`ZendSkeletonApplication`](https://github.com/zendframework/ZendSkeletonApplication)。
- 将模块下载到我的`./vendor`目录中。
-启用模块`./config/application.config.php`：

```
<?php
return array(
    'modules' => array(
        'Application',
        'ZendDeveloperTools',   // Added this line
    ),
    'module_listener_options' => array(
        'config_glob_paths'    => array(
            'config/autoload/{,*.}{global,local}.php',
        ),
        'module_paths' => array(
            './module',
            './vendor',
        ),
    ),
); 
```

- 复制`./vendor/ZendDeveloperTools/config/zenddevelopertools.local.php.dist`到`./config/autoload/zenddevelopertools.local.php`.

- 编辑`zenddevelopertools.local.php`如下：

```
<?php

return array(
    'zdt' => array(
        'profiler' => array(
            'enabled' => true,
            'strict' => true,
            'verbose' => true,
            'flush_early' => false,
            'cache_dir' => 'data/cache',
            'collectors' => array(),
            'verbose_listeners' => array('application' => array(
                    'ZDT_TimeCollectorListener' => true,
                    'ZDT_MemoryCollectorListener' => true,
            ))
        ),
        'toolbar' => array(
            'enabled' => true,
            'auto_hide' => false,
            'position' => 'bottom',
            'version_check' => false,
            'entries' => array(),
        ),
    ),
); 
```

-添加`define('REQUEST_MICROTIME', microtime(true));`在我的 - 用模块中提供的替换`./public/index.php`
我的。 - 删除了导致问题的第 29 行末尾的 （不应该存在）：`./composer.json``ZendDeveloperTools`
`,`

![在此处输入图像描述](../Images/77648b6f78d3d04e247ac8bd6ef21331.png)

-运行作曲家更新：

```
$ php composer.phar update
Updating dependencies
  - Updating zendframework/zendframework (dev-master)
    Checking out 9f4dd7f13c8e34362340072d0e2d13efe15e4b1f

Writing lock file
Generating autoload files 
```

-添加`error_reporting(E_ALL); ini_set('display_errors', '1');`以`./public/index.php`捕获潜在错误

当我访问我的应用程序时，我没有收到任何错误（我得到了框架应用程序主页），但没有显示 zend 开发人员工具栏

**我缺少什么来使用和显示 zend 开发人员工具栏？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-17T13:07:04.400

这是一个愚蠢的错误，我已经放入`zenddevelopertools.local.php`而`./config`不是`./config/autoload`。以上说明是正确的。对于那些好奇的人来说，工具栏是这样的：

![在此处输入图像描述](../Images/c051d0a2ad44a478230de242e692939b.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-10T20:57:34.037

为我工作，但我必须为我的应用程序进行的一项更改是将配置重命名为：

```
zenddevelopertools.local.php 
```

到：

```
zenddevelopertools.local.config.php 
```

另外，我安装了 BjyProfiler，它与我的 Doctrine2 设置“刚刚工作”（很好！）。唯一需要注意的是我必须添加默认的 SM 工厂配置，这样它才能停止抛出错误：

```
'service_manager' => array(
    'factories' => array(
        /**
         * This default Db factory is required so that ZDT 
         * doesn't throw exceptions, even though we don't use it
         */
        'Zend\Db\Adapter\Adapter' => function ($sm) use ($dbParams) {
            $adapter = new BjyProfiler\Db\Adapter\ProfilingAdapter(array(
                'driver'    => 'pdo',
                'dsn'       => 'mysql:dbname=skunk;host=hunk',
                'database'  => 'bunk',
                'username'  => 'junk',
                'password'  => 'punk',
                'hostname'  => 'lunk',
            ));

            $adapter->setProfiler(new BjyProfiler\Db\Profiler\Profiler);
            $adapter->injectProfilingStatementPrototype();
            return $adapter;
        },
    ),
), 
```

看截图：

![](../Images/a0a8df7769113220388867a434f962ec.png)

# css - @font-face 在 IE7 中不起作用

> ID：11519807
> 
> 赞同：0
> 
> 时间：2012-07-17T09:37:26.467
> 
> 标签：css, internet-explorer, font-face

我有一个 CSS 文件`/css`和`/images`. 我的 CSS 代码使用`@font-face`，它适用于 IE8、IE9 和所有不错的浏览器，但显然不适用于 IE7。

```
@font-face {
    font-family: 'ChunkFiveRegular';
    src: url('../image/chunkfive-webfont.eot');
    src: url('../image/chunkfive-webfont.eot?#iefix') format('embedded-opentype'), url(../images/chunkfive.woff) format('woff'), url(../images/chunkfive-webfont.ttf) format('truetype'), url(../images/chunkfive-webfont.svg) format('svg');
    font-weight: normal;
    font-style: normal;
}

h1, h2, h3 {
    font-family: ChunkFiveRegular, Georgia, serif;
    font-weight: normal;
    text-transform: uppercase;
} 
```

为什么文本仍然显示为格鲁吉亚？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:49:18.070

如果你的字体在`/images`，你需要使用`/images`，而不是`/image`。也就是说，您的字体属于`/css`; 字体不是图像。

此外，根据[Paul Irish 的文章](http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/)，`'eot'`应该比`'embedded-opentype'`（未经测试）更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:50:50.553

[http://www.thecssninja.com/demo/css_fontface/](http://www.thecssninja.com/demo/css_fontface/)

```
@font-face {
font-family:InYourFace;
src: url('Ubuntu-B.eot');
// this smile and ? fix your problem
// because IE don't wanl load local font without this hack
src: url('Ubuntu-B.eot?') format('☺'),  
    url('Ubuntu-B.woff') format('woff'),
    url('Ubuntu-B.ttf') format('truetype'),
    url('Ubuntu-B.svg#webfontssbCkuz5') format('svg');
} 
```

# java - 如何获取发出 HTTPRequest 的时间？

> ID：11519810
> 
> 赞同：0
> 
> 时间：2012-07-17T09:37:29.783
> 
> 标签：java, servlets

在 Servlet 中，我想获取发出请求时的日期时间。

我不想使用 Java 的 Date 类，因为它无法提供准确的时间。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:51:41.437

你有三个选择：

1.  使用客户的计算机时间。这将要求客户端在请求参数或自定义标头中显式发送他或她的系统时间。更不用说互联网上的任意计算机可能有更不准确的时间。

2.  使用外部时间服务器获取当前时间。

3.  ...或者只是信任您的服务器，如果它使用[ntp](/questions/tagged/ntp "显示标记为“ntp”的问题")，那么您是安全的。

# python - 相对导入引发 ValueError

> ID：11519813
> 
> 赞同：0
> 
> 时间：2012-07-17T09:37:36.297
> 
> 标签：python, import, python-3.x

我有以下目录结构：

```
src
   __init__.py
   foo1
       __init__.py
      foo1.py
   foo2
     __init__.py
     foo2.py 
```

现在我想从 foo2.py 导入模块 foo1.py。在 foo2.py 我已经导入`from ..foo1.foo1 import *`但我得到的是：

```
Traceback (most recent call last):
  File "foo2.py", line 3, in <module>
    from ..foo1.foo1 import *
ValueError: Attempted relative import in non-package 
```

我如何获得这个相对进口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T12:25:56.993

我在这里看到的是基础包，在你的情况下`src`没有被导入，这是使用相对导入的必要条件。

如果您编写一个脚本，该`src`文件夹位于 中`sys.path`，因此可导入，其中指出：

```
import src #this imports the base package
from src.foo2.foo2 import *

... 
```

它会起作用的。

# objective-c - 在目标c中将两个音频文件合二为一

> ID：11519814
> 
> 赞同：3
> 
> 时间：2012-07-17T09:37:38.137
> 
> 标签：objective-c, audio, cocos2d-iphone, ios

> **可能重复：**
> [在 iPhone 上合并音频文件](https://stackoverflow.com/questions/3359313/merge-audio-files-on-iphone)

我正在尝试将 2 个音频文件合并为一个文件。例如：file1.mp3 - 它说“我是”。file2.mp3 - 它说“乔治”。我想得到一个组合文件 file3.mp3，上面写着“我是乔治”。

我如何在 Objective-C 中做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-17T10:24:32.413

看看*AVFoundation*框架......有很多方法，但对你来说最简单的一种可以是......

*   为两个文件创建*AVAsset*（使用*AVURLAsset*子类），
*   alloc *AVMutableComposition* (*组合*),
*   将类型为 AVMediaTypeAudio 的*AVMutableCompositionTrack**添加*到*合成中*

`[composition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];`

*   从第一个*AVAsset*获取轨道并将其添加*AVMutableCompositionTrack*，
*   从第二个*AVAsset*获取轨道并将其附加到*AVMutableCompositionTrack*，
*   然后使用您的合成创建*AVAssetExportSession*并将其导出。

简化的描述，但你得到一个线索。取决于你有多少轨道，你想使用什么样的效果等等。

如果您确实想查看一些真实的代码，请打开*AVMovieExporter*示例，复制此代码并删除视频内容并仅将音频保留在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:24:32.397

您可以将 2 个 mp3 文件合并为：-

```
 NSMutableData *part1 = [NSMutableData dataWithContentsOfFile: [[NSBundle mainBundle] pathForResource:@"file1" ofType: @"mp3"]];

  NSMutableData *part2 = [NSMutableData dataWithContentsOfFile: [[NSBundle mainBundle] pathForResource:@"file2" ofType: @"mp3"]];

 [part1 appendData: part2];

 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
 NSString *documentsDir = [paths objectAtIndex:0];
    NSString *myMp3 = [documentsDir stringByAppendingPathComponent: @"final.mp3"];

    [part1 writeToFile:myMp3 atomically:YES]; 
```

这样您就可以立即将 mp3 文件附加到一个文件中。我已经在我的一个应用程序中使用了它。对于必须分别更新文件标题的其他格式，它变得有点复杂，但使用 mp3 相对简单。

**更新：**

好吧，您还必须注意您尝试连接的 mp3 文件的比特率是相同的。如果它们不同，它们将合并，但只会部分播放或根本不播放。因此，请确保比特率彼此同步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T17:05:52.567

一种替代方法是使用 AVAssetReader 将所有 mp3 文件转换为未压缩的音频文件，如果音频足够短，甚至可以转换为内存缓冲区。然后可以根据需要将未压缩的 PCM 数据连接、混合或交叉淡入淡出。然后根据需要使用 AVAssetWriter 将结果写入某种压缩文件格式（例如 aac）。

# php - 如何可视化多维php数组

> ID：11519817
> 
> 赞同：1
> 
> 时间：2012-07-17T09:37:46.110
> 
> 标签：php, emacs, multidimensional-array

我有一个非常大的 php 数组，我保存在一个文本文件中。我需要访问数组中元素的内容，但要做到这一点，我需要知道它的所有键，并且由于它的大小，它有点难以阅读。我想要某种方法/工具来例如折叠数组的不相关分支，以便更容易阅读通向相关项目的路径。

我通常使用 emacs 或更少来查看测试文件，但我怀疑这些程序没有连接到我想要的东西（？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T16:00:39.817

使用[http://krumo.sourceforge.net/](http://krumo.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:09:15.513

您必须存储`json_encode(array)`到 Json 文件而不是文本文件中。易于读取 json 文件，易于将 json 字符串转换为数组。

# c# - MVC QueryString 转化为动态对象

> ID：11519824
> 
> 赞同：6
> 
> 时间：2012-07-17T09:38:03.683
> 
> 标签：c#, asp.net-mvc

有没有办法用查询字符串参数填充动态对象？

这样一来，我在 QS 中的搜索参数可以变化，而无需将它们直接绑定到容器对象或更改搜索方法的签名。

例如

入站 URL：www.test.com/Home/Search?name=john&product=car&type=open&type=all

```
public ActionResult Search()
{
    dynamic searchParams = // **something magic here**

    var model = getResults(searchParams);
    return View(model);
} 
```

填充的 searchParams 对象应如下所示：

```
{
    name = "john",
    product = "car",
    type = { "open", "all" }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T09:48:01.770

一种解决方案是您从[Request.QueryString](http://msdn.microsoft.com/en-us/library/ms524784%28v=vs.90%29.aspx)构建一个[ExpandoObject](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx) ，它是一个[NameValueCollection](http://msdn.microsoft.com/en-us/library/system.collections.specialized.namevaluecollection.aspx)。

编写转换很容易，您可以将其放在扩展方法中：

```
public static class NameValueCollectionExtensions:
{
    public static dynamic ToExpando(this NameValueCollection valueCollection)
    {
        var result = new ExpandoObject() as IDictionary<string, object>;
        foreach (var key in valueCollection.AllKeys)
        {
            result.Add(key, valueCollection[key]);
        }
        return result;
    }
} 
```

在您的控制器中，您可以使用：

```
public ActionResult Search()
{
    dynamic searchParams = Request.QueryString.ToExpando();

    DoSomething(searchParams.name);  
    var model = getResults(searchParams);
    return View(model);
} 
```

注意：您需要做一些额外的转换来处理`type`默认情况下不会自动成为数组的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:48:20.017

像这样的东西可以解决问题

```
dynamic searchParams = new
            {
                name = "john",
                product = "car",
                type = new {aa =  "open", bb = "all"}
            }; 
```

为您的查询字符串值交换字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T09:50:26.320

我宁愿使用动态对象并执行以下操作：

```
public class QSValues : DynamicObject
    {
        readonly Dictionary<string, object> dynamicProperties = new Dictionary<string, object>();

        public string ErrorMessage { get; set; }

        public bool IsSuccessful { get; set; }

        public override bool TrySetMember(SetMemberBinder binder, object value)
        {
            dynamicProperties[binder.Name] = value;

            return true;
        }

        public override bool TryGetMember(GetMemberBinder binder, out object result)
        {
            return dynamicProperties.TryGetValue(binder.Name, out result);
        } 
```

然后解析 QueryString 参数

# php - 基于复选框的下拉列表

> ID：11519826
> 
> 赞同：-1
> 
> 时间：2012-07-17T09:38:07.587
> 
> 标签：php, html

我有几个名为 HR、visitor、gaurd 的复选框，现在我想根据属于该团队的员工的姓名选择哪个复选框，无论是 HR、Guard 还是访客，都将显示在下拉列表中

```
<select name=cmbname id="cmbname" width='50%'> 
```

全部

`

```
 $objDB->SetQuery($sql);

    $res = $objDB->GetQueryReference();

    if(!$res)
        exit("Error in SQL : $sql");

    if($objDB->GetNumRows($res) > 0)
    {
        while($row = mysql_fetch_row($res))
        {

                print("
            <option value='{$row[0]}'>{$row[0]}</option>");

        }
    }
    mysql_free_result($res); 
```

?>'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:52:18.970

希玛尼

[试试这个](https://stackoverflow.com/questions/786142/how-to-retrieve-checkboxes-values-in-jquery/786215#786215)。希望它对你有用。您可以使用下拉菜单代替文本区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:36:20.390

试试这个方法给你解决方案

```
 <script type="text/javascript">
 //javascript 
 function clicked_checkbox()
 {  
   document.form.submit();  
 }
 </script>
 <?php
 $hr = isset($_REQUEST['HR'])?$_REQUEST['HR']:false;
 $guest = isset($_REQUEST['guest'])?$_REQUEST['guest']:false;
 $visiter = isset($_REQUEST['visiter'])?$_REQUEST['visiter']:false;

//Prepare query with retrieved value and put value in Dropdown
$sql = 'select * from table ';
if($hr)      { $sql .= "where user = '$hr'" };
if($guest)   { $sql .= "where user = '$guest'" };
if($visiter) { $sql .= "where user = '$hr'" };

$objDB->SetQuery($sql);
$res = $objDB->GetQueryReference();

if(!$res)
    exit("Error in SQL : $sql");

if($objDB->GetNumRows($res) > 0)
{
    while($row = mysql_fetch_row($res))
    {
        print("<option value='{$row[0]}'>{$row[0]}</option>");
    }
}
mysql_free_result($res);
?>

//on change of checkbox we'll call above function and set data to dropdown
<form name='form' method='get' action='#'>
<input type="checkbox" id="checkbox_HR" name="HR" value="true" <?php if($hr) echo "checked='checked'"; ?> onchange="return clicked_checkbox();">
 <input type="checkbox" id="checkbox_guest" name="guest" value="true" <?php if($guest) echo "checked='checked'"; ?> onchange="return clicked_checkbox();">
  <input type="checkbox" id="checkbox_user" name="visiter" value="true" <?php  if($visiter) echo "checked='checked'"; ?> onchange="return clicked_checkbox();">
 </form> 
```

像这样你可以实现:)

# android - 如何通过无线 LAN 网络接收传入消息并启动 Web 浏览器？

> ID：11519830
> 
> 赞同：1
> 
> 时间：2012-07-17T09:38:21.910
> 
> 标签：android, ios, windows-mobile, wireless

我有点难过。我一直在尝试寻找一种方法让无线设备（即 Android/ios/Windows 移动设备）从中央服务器接收消息，然后启动设备 Web 浏览器。

**场景：** WLAN 网络上的服务器监控某个系统。当系统出现问题时，系统会停止它正在做的事情并向服务器发送错误消息，并等待用户在服务器上输入响应，然后再恢复它正在做的事情。

现在，我想从服务器（当它正在监控的系统崩溃时）向无线设备发送一条消息，这样用户就不必一直去服务器继续系统，而是可以通过无线设备（在网络浏览器中）。

澄清一下，我知道如何从服务器向连接到无线网络的每个人发送消息，我只是不知道如何处理设备上的消息......

任何想法或解决方案将**不胜**感激......提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:45:55.510

您可以通过几种不同的方式执行此操作：

1) 使用市售推送通知（例如 Google 和 Apple）。优点是您的应用程序可以在您的无线 LAN 之外运行，但缺点是您正在使用他们的平台，该平台的能力和功能受到限制（我自己设计和构建了几个这样的平台，我可以证明它们的局限性 -当他们设计和实施他们的时，他们正在寻找“最小公分母”）。

2）如果您的应用程序仅在 LAN 上运行（您控制网络），您可以将自己的系统放在一起。这里的优点是几乎没有什么是做不到的（除了在 iOS 上，它有几个与该主题相关的限制）。但是，缺点是工作量很大。

3) 利用现有平台，该平台可能为不同目的而设计，但只需对您自己的目的进行少量更改即可轻松使用，并在选项 #1 和 #2 之间提供了一个很好的折衷方案（这将需要一些额外的后端/中间件服务器添加到您的组合中）。以 XMPP 和 Jabber 为例。

一旦你的这部分架构就绪——接收推送的数据——唯一缺少的就是调用手机的浏览器（或你自己的本地应用程序中的浏览器类型组件）来响应接收到的有效负载。

** 作为可能的替代方案，值得注意的是，大多数移动平台允许您的本地应用程序直接与手机的 IM 或电子邮件交互。例如，您可以编写拦截特定格式的 IM 的代码，并使用较小的有效负载，并将其用作“穷人的推送引擎”。我已经为在 Windows Mobile、BlackBerry 和 Android（不确定 iOS 在这方面有什么可能）上使用这种技术的客户整理了一些 POC（概念证明），因为它既快速又简单。

The hard part is the pushed data (but several available options on how to handle this requirement), the easy part is invoking the browser.

# magento - Magento 向客户地址实体添加国家属性

> ID：11519844
> 
> 赞同：1
> 
> 时间：2012-07-17T09:39:13.993
> 
> 标签：magento

我需要在帐户注册页面中添加新字段，例如街道，国家/地区。如何添加另一个国家/地区字段而不与现有字段冲突。我尝试了以下操作，但所选国家/地区未显示在管理员中。

```
<div class="field">
<label for="country2" class="required"><em>*</em><?php echo $this->__('Country 2') ?></label>
<div class="input-box">
<?php
$_countries = Mage::getResourceModel('directory/country_collection')->loadData()->toOptionArray(false) ?>
<?php if (count($_countries) > 0): ?>
    <select name='trading2_country' id='trading2_country'>
        <option value=''>– Please Select –&lt;/option>
        <?php foreach($_countries as $_country): ?>
            <option value='<?php echo $_country['value'] ?>'><?php echo $_country['label'] ?></option>
        <?php endforeach; ?>
    </select>
<?php endif; ?>
</div>
</div> 
```

# c# - 使用 asp.net mvc3 中的复选框以及批量更新

> ID：11519845
> 
> 赞同：3
> 
> 时间：2012-07-17T09:39:20.733
> 
> 标签：c#, asp.net, asp.net-mvc-3, entity-framework

目前我正在尝试基于一系列复选框创建大规模更新。我似乎找不到使用实体框架的正确方法。

我正在使用带有 MVC3 和 Razor 的 ASP.Net 4。

这是我到目前为止的代码。

## 查看页面（正常工作）

```
@model List<LeagueCounters.Models.champion>
<form name="setFree id="setFree" method="POST" action="/Champion/SetFree">
    @foreach (var item in Model)
    {
        if (item.isFree == true)
        {
           <input type="checkbox" id="@item.id" checked="checked" /> @Html.DisplayFor(modelItem => item.displayName)  
        }
        else
        {
            <input type="checkbox" id="@item.id" /> @Html.DisplayFor(modelItem => item.displayName)
        }
    }
<p><input type="submit" value="Save" /></p> 
```

## 控制器（错误）

```
[HttpPost, Authorize(Roles = "Admin")]
public ActionResult SetFree(FormCollection fcMain)
{
     var sortedList = from c in _db.champions
                      orderby c.name
                      select c;
     int counter = 0;
     foreach (champion champ in sortedList)
     {
         if (fcMain[counter].Contains("true"))
            champ.isFree = true;
         else
            champ.isFree = false;

         _db.champions.Attach(champ);
         _db.ObjectStateManager.ChangeObjectState(champ, EntityState.Modified);

         counter++;
     }

     _db.SaveChanges();

     return View();
} 
```

## 错误

指数超出范围。必须是非负数且小于集合的大小。参数名称：索引

## 问题

如何正确循环浏览控制器中的复选框？一旦我达到那个点，我的大规模更新代码会起作用吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:46:27.717

这里的问题是只有选中的复选框才会发布到服务器。因此，您不能期望所有复选框键都出现在表单集合中。要解决此问题`Html.CheckBoxFor`，请创建一个带有复选框的附加隐藏字段，以便可以在服务器端读取结果。我不确定您将如何在这里使用强类型帮助程序，因为您正在循环呈现数据。我想你可以看看这个[谷歌搜索](https://www.google.com.pk/search?q=primary%20vs%20candidate%20key&rlz=1C1_____enPK456PK456&aq=f&oq=primary%20vs%20candidate%20key&sugexp=chrome,mod=7&sourceid=chrome&ie=UTF-8#hl=en&rlz=1C1_____enPK456PK456&sclient=psy-ab&q=editing%20a%20variable%20length%20list%20asp.net%20mvc%203&oq=editing%20variable%20len&gs_l=serp.11.1.0i30l4.19294803.19298745.0.19301011.20.14.0.6.6.2.662.4038.2-11j0j2j1.14.0...0.0...1c.u_XXBrc6ro0&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=e64b366eb07673f&biw=1366&bih=667&pf=p&pdl=300)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:20:27.227

我认为这条线

```
fcMain[counter].Contains("true") 
```

`Where`导致错误..您在向视图提供模型时是否使用某种约束选择（ ），

您还应该在每个复选框后添加一个隐藏字段，方法是

```
<input type="hidden" value="false" id="@item.id" name="@item.id"/> 
```

这样，所有复选框都将成功提交
，您必须*拆分值*并获取服务器端存在*的第一个值。*
或者您可以跳过两者并直接使用`@Html.Checkbox(item.Id,item.isFree)`这种方式，代码会更干净，无需手动添加， *Razor 引擎*`Hidden Input`会自动添加其他内容 ，您还可以进行一些其他改进来保留代码。 改变这个 *`DRY`* 

 *```
if (item.isFree == true)
{
   <input type="checkbox" id="@item.id"  checked="checked" /> @Html.DisplayFor(modelItem => item.displayName)  
}
else
{
   <input type="checkbox" id="@item.id" /> @Html.DisplayFor(modelItem => item.displayName)
} 
```

到

```
<input type="checkbox" id="@item.id" name="@item.id" @(!Item.isFree?"checked=\"checked\":\"\"") /> @Html.DisplayFor(modelItem => item.displayName) 
```

我不认为你需要这些

```
_db.champions.Attach(champ);
_db.ObjectStateManager.ChangeObjectState(champ, EntityState.Modified); 
```*

# java - RSA 跨平台黑白 JAVA 和 Symbian

> ID：11519847
> 
> 赞同：1
> 
> 时间：2012-07-17T09:39:21.550
> 
> 标签：java, encryption, rsa, symbian

1）我能够使用以下值在 symbian 中使用我的应用程序生成的值进行加密和解密

```
 RInteger iE = RInteger::NewL(0x10001);            
          RInteger iN = RInteger::NewL(_L8("\xa3\x92\xb7\x34\x82\xbe\x7f\x4f\x8f\xbd\xfb\xd4\xf9\x80\x76\xe0\xa3\xf7\x42\x60\x8e\xe2\xa8\x6b\x76\x22\x67\x0e\x94\xeb\x9b\x3f\xd0\x73\x58\xe0\x23\xbb\x25\x53\x82\x56\x7b\x3e\x05\x57\xc9\x50\x3c\x2d\x6a\x09\x66\x3f\x49\xee\x41\x4c\x4b\x95\x1e\x7d\xb8\xd1\xc5\x40\x0d\xd0\xca\x72\xc8\xf6\x0d\x21\x4f\x63\xc1\x4c\x3b\x93\x94\x1f\x67\x5b\x70\x33\x07\xfd\x4e\x71\x59\x7f\x79\x9b\xd8\xf6\x3b\x35\xe1\x9a\xd3\x27\x43\xdb\x32\xcd\x7b\x78\x40\xd1\x0d\x40\x12\x53\xb7\x19\x66\xca\x5b\xf6\x26\x2a\xea\x4e\xef\xe4\xc8\x41"));
          RInteger iD = RInteger::NewL(_L8("\x44\x21\x5a\xff\x9b\x29\x7f\x5b\x83\x32\x8d\x8f\x02\xb1\x18\x52\xae\xd8\xd1\x23\xe8\xbf\xcd\x88\x9c\xf6\xed\x57\xec\x7d\x49\xf7\xc5\x7a\x15\xdd\x9d\xe4\x58\x42\xb5\x3a\x12\x31\x1e\x06\x97\x8a\x3c\xd6\x69\xa1\x2a\x9e\x57\xcb\xce\x14\xda\x32\x6d\x35\xce\x61\x9e\xb2\xaf\x5c\x04\x13\xef\x68\x43\x7e\xe4\x98\xdc\x87\x2e\x7e\x38\x5f\xbd\xe9\x2e\xc1\xf1\x94\xf3\x95\x56\x56\xa4\x78\x26\x70\xa4\x1e\x10\x61\xe9\x45\x25\x1c\xed\xc6\xc0\x1e\xf6\x2c\xa0\x27\xee\x19\x0a\xed\x1c\x76\x33\xc8\x37\xde\x76\x25\x1c\x70\x77\xb1")); 
```

2）从服务器接收 N、E 和 D 值，然后生成公钥和私钥。(a) 在应用程序中使用公钥加密并在服务器端成功解密。但是（b）无法在我的应用程序中使用私钥解密得到 KErrInvalidPadding。(c) 即使服务器加密的消息无法在应用程序中解密，也会出现相同的错误 KErrInvalidPadding。

代码：

```
 RInteger iE = RInteger::NewL(0x10001);          
        RInteger iN = RInteger::NewL(_L8("\x89\x03\xfb\x6d\x15\xf3\x52\xed\x3b\x45\xad\xd3\x21\x6f\x63\x2f\x71\x39\x95\x4a\x56\x31\x33\x7a\xba\x7d\x64\x5e\xd3\x84\x82\xe3\xa8\x10\xb4\xdb\x26\xaa\xb4\xd1\xdf\x58\xc1\x47\x23\x0f\x0c\x75\x63\x1a\x3d\xd0\x55\x4b\x50\xde\x44\xe7\x9f\x4f\xcf\x20\x5c\x89\xfd\x3f\x80\xe0\xff\x8d\x16\xc2\xe9\xf5\x6e\xd3\xab\x17\x79\x53\xd5\x4c\x9c\x30\x35\x7d\x04\xe6\x77\xce\xdd\x99\x12\x90\x6e\xf8\xa0\x46\xd7\xb0\x18\x5b\x7f\x20\x22\xa8\xe4\x35\xb0\xc6\xec\xae\xf9\x3f\x08\x9f\xc3\xaa\x3f\x36\x77\x55\x0b\x5d\x84\x20\x46\xc7"));
        RInteger iD = RInteger::NewL(_L8("\x35\xb9\x42\xff\x9d\xe8\xbf\xae\x57\x5c\x55\xf1\x00\x1e\x2d\xd4\xef\x5f\x75\xc3\x25\x12\xbb\xad\xb6\xab\xee\x0c\x24\x81\xc3\xd4\xc2\x14\x72\xe5\xaf\x3e\xa6\x11\xd8\xb2\x73\x6e\x92\x37\x97\x59\xfb\xd6\xd1\x3f\xfc\x01\xc1\x1e\xb6\x03\xdf\xfa\xaa\x2b\x75\x3c\xed\xc6\x8a\x02\x58\xb6\x8d\x6d\xf8\x34\x65\x03\xe3\x8a\x15\x37\xdf\x12\xa8\x18\xff\xce\xfa\x20\x20\xd6\xb7\x1a\x05\x6f\x2c\x04\x13\x58\x62\x94\xe9\xbc\x63\xc8\xd3\xd6\x06\x61\x44\x3e\xac\xe4\x98\x14\x63\xb1\xf7\x06\xaf\x1c\x16\xb6\x5b\x87\x87\x8e\x26\x01"));          

        TBuf8 <1024>aaaa;
        TBuf8 <1024>aOut;

        CRSAPublicKey *iPubKey = CRSAPublicKey::NewL(iN,iE);  
        CRSAPrivateKey *iPriKey = CRSAPrivateKeyStandard::NewL(iN,iD);
        CRSAPKCS1v15Encryptor *iEncr = CRSAPKCS1v15Encryptor::NewL(*iPubKey);
        CRSAPKCS1v15Decryptor *iDecry = CRSAPKCS1v15Decryptor::NewL(*iPriKey);

        TRAPD(err3,iEncr->EncryptL(_L8("Hi"),aaaa)); 
        TRAPD(err2,iDecry->DecryptL(aaaa,aOut));   <-KErrInvalidPadding = -11003; 
```

如何解决这个问题有人建议我这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T10:38:34.087

我该怎么办

```
TInt len=iEncr->MaxOutputLength();
iEncr->EncryptL(_L8("Hi"),aaaa);
if (aaaa.Length()<len){
    TBuf8<1> t;
    t.SetLength(1);t[0]=0;
    aaaa.Insert(0,t);
} 
```

# common-lisp - 安装 AllegroServe

> ID：11519851
> 
> 赞同：2
> 
> 时间：2012-07-17T09:39:40.947
> 
> 标签：common-lisp

我目前正在阅读 Peter Seibel 的书“Practical Common Lisp”，并且正在阅读第 26 章：网络编程。在第 366 页上，它说“第一步是将 AllegroServe 代码加载到您的 Lisp 映像中。在 Allegro 中，您可以简单地键入 (require :aserve)。在其他 Lisps（或在 Allegro 中）中，您可以通过加载来加载 PortableAllegroServe位于portableaserve 目录树顶部的文件INSTALL.lisp。下面是我输入它们时的2 个响应：

1.  当我输入 (require :aserve) 时，响应为 "NIL" 。
2.  当我输入 INSTALL.LISP 时，响应是错误：尝试获取未绑定变量“INSTALL.LISP”的值。[条件类型：UNBOUND VARIABLE}

我已经在 LispForum 和 comp.lang.lisp 上发布了这个问题，但没有收到任何满意的回复，而且 Peter Seibel 也没有回复我的电子邮件。如果有人可以建议如何纠正此错误，将不胜感激。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T11:05:52.790

您需要从命令行运行`INSTALL.lisp`，而不是从 Lisp 提示符下运行。但最简单的方法是使用[quicklisp](http://www.quicklisp.org/beta/)获得它：`(ql:quickload "aserve")`

编辑：

另请注意，文件名是`INSTALL.lisp`（小写扩展名）。

要使用 SBCL 运行从命令行加载`sbcl --load INSTALL.lisp`（在目录中，保存文件）。

或者你可以从你的 Lisp 提示符中用完整路径加载它：`(load "<path-to-directory>/INSTALL.lisp")`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T11:19:08.380

如果您正确设置了当前目录，那么在 Lisp 提示符下：

```
(load "install.lisp") 
```

# android - 如何跟踪android应用程序中的内存泄漏

> ID：11519852
> 
> 赞同：1
> 
> 时间：2012-07-17T09:39:46.893
> 
> 标签：android, memory-leaks

实际上我已经开发了一个 android 应用程序，但是当执行一些内存不足的操作时，应用程序正在崩溃。如何识别内存泄漏？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T09:42:57.227

Eclipse 有一个集成分析器工具，称为`MAT`- Memory Analayzer Tool。您可以使用它来分析应用程序的堆。安装起来很简单。从 Eclipse 点击

```
Help -> Install new software 
```

然后从`DDMS`角度来看，在 Decices 部分，您可以选择应用程序的进程，单击`"Dump HPROF File"`该工具将打开当前`heap`.

[这](http://android-developers.blogspot.it/2011/03/memory-analysis-for-android.html)是 MAT 工具的使用示例，来自 android 开发者博客。

# sql - 不同组的最大值

> ID：11519858
> 
> 赞同：2
> 
> 时间：2012-07-17T09:39:57.660
> 
> 标签：sql, sql-server-2008

```
Column1 Column2 Column3
------- ------- -------
jim       1788    5F 
jim       2000    9F
jim       500     9F
ben       190     4H
matt      400     46
matt      20      3G 
```

我需要运行一个输出的查询：

```
Column1 MaxValue PL
------- ------- -------
jim       2000    9F
jim       2000    NULL
ben       190     4H
matt      400     46
matt      400     NULL 
```

对于 Column1 中的每个值（例如 jim、ben、matt）：我们按 Column1 对数据进行分组，并且对于每个组，我们在 column2 上显示具有最大值的行。然后，对于以这种方式找到的每一行，如果 Column1 分组返回多于 1 行并且 Column2 中的值小于上一步中找到的最大数量，它会再次显示它，但在 column3 中为 NULL。ben 190 NULL 不显示，因为我们只在 Column1 上使用过一次。

提前感谢您提供任何提示或建议。

这是我迄今为止尝试过的，但我收到一个错误提示我在 GROUP By 子句中包含 Column2 和 Column3，但如果我这样做，我不会达到所需的输出，如上所示。

```
CREATE VIEW VIEWB AS 
   SELECT DISTINCT t1.Column1, 
          /* MAX_Value */
            (MAX(t1.[Column2])) AS [MAX Value], 
          /* PL */
            (CASE 
            WHEN t1.[Column2] = MAX(t1.[Column2]) THEN t1.[Column3]
            ELSE NULL
            END) AS PL
      FROM TABLEA AS t1
      GROUP BY t1.Column1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:20:49.903

试试这个代码：

```
DECLARE @t TABLE (Column1 VARCHAR(50), Column2 INT, Column3 VARCHAR(50))
INSERT  @t
VALUES  
('jim'       ,1788    ,'5F'),
('jim'       ,2000    ,'9F'),
('jim'       ,500     ,'9F'),
('ben'       ,190     ,'4H'),
('matt'      ,400     ,'46'),
('matt'      ,20      ,'3G')

;WITH a AS (
SELECT  *,
        ROW_NUMBER() OVER (PARTITION BY Column1 ORDER BY Column2 DESC) RowNum,
        MAX(Column2) OVER (PARTITION BY Column1) Maximum
FROM    @t
)

SELECT  Column1,
        Maximum,
        CASE WHEN RowNum = 1 THEN Column3 END
FROM    a
WHERE   RowNum IN (1, 2)
ORDER   BY Column3 DESC 
```

如果需要，可以将其放在视图中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:06:25.237

试试这个

```
;with cte as (select *,ROW_NUMBER() over(partition by Column1 
order by Column2 desc) as row_num from table_A),
a as (
select Column1,MAX(Column2) [Column2],null [row_num]
from table_A
group by Column1
having COUNT(*)>1),
b as (select Column1,Column2,Column3 from cte where row_num=1
union all
select * from a)
select  Column1,Column2 [MaxValue],Column3 [PL] from b
order by Column2 desc,Column1,ISNULL(Column3,'') desc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T10:08:22.630

```
with data as (
  select * from
  (values
    ( 'jim'   ,    1788  ,  '5F' ),
    ( 'jim'   ,    2000  ,  '9F' ),
    ( 'jim'   ,    500   ,  '9F' ),
    ( 'ben'   ,    190   ,  '4H' ),
    ( 'matt'  ,    400   ,  '46' ),
    ( 'matt'  ,    20    ,  '3G' )
  ) foo (col1, col2, col3)
),
maxes as (
  select d.col1, d.col2, d.col3
  from
    data d
    inner join (select col1, max(col2) as col2 from data group by col1) m on d.col1 = m.col1 and d.col2 = m.col2 
)
select col1, col2, col3
from maxes
union all
select col1, col2, null
from maxes
where exists (select 0 from data where data.col1 = maxes.col1 and data.col2 < maxes.col2)
order by col1, col3 desc 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T10:09:06.980

```
declare @t table(column1 varchar(10),column2 int, column3 varchar(10))
insert into @t 
select 'jim',       1788,    '5F' union all  
select 'jim',       2000,    '9F' union all 
select 'jim',       500,     '9F' union all
select 'ben',       190,     '4H' union all
select 'matt',      400,     '46' union all
select 'matt',      20,      '3G'

select column1,column2,column3 from
(
select *, row_number() over (partition by column1 order by column2 desc) as sno from @t
) as t
where sno=1
union 
select t1.column1,t2.column2,NULL 
from @t  as t1 inner join
(
select Column1, max(Column2) as column2,count(*) as counting from @t 
group by column1 having count(*)>1
) as t2
on t1.column1=t2.column1 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-17T10:11:29.777

可能不是最有效的方法，所以如果你有一个非常大的表，这可能不是一个理想的解决方案，而是一个选项：

```
create table #temp (column1 varchar(10), column2 float, column3 varchar(10))

insert #temp select 'jim', 1788, '5F'
insert #temp select 'jim', 2000, '9F'
insert #temp select 'jim', 500, '9F'
insert #temp select 'ben', 190, '4H'
insert #temp select 'matt', 400, '46'
insert #temp select 'matt', 20, '3G'

SELECT column1, column2 as MaxValue, column3 as PL FROM #temp 
WHERE column2=(SELECT Max(column2) FROM #temp t2 WHERE t2.column1=#temp.column1)
union
SELECT column1, column2, NULL FROM #temp
WHERE column2=(SELECT Max(column2) FROM #temp t3 WHERE t3.column1=#temp.column1)
AND EXISTS(SELECT 1 FROM #temp t4 WHERE t4.column2<>#temp.column2 and t4.column1=#temp.column1)

DROP TABLE #temp 
```

# dll - 如何在 jboss 启动时加载库文件 /dll。我正在使用 Fedora

> ID：11519859
> 
> 赞同：0
> 
> 时间：2012-07-17T09:39:57.840
> 
> 标签：dll, jboss, webserver, startup, fedora

我希望在启动 jboss 时加载 dll/库文件，例如（abc.so），登录后加载 dll/库文件不是问题。我正在使用软呢帽。我是否需要在 JBoss 的 bootstrap run.bat 中写一些东西，或者将该 dll/lib 文件放在某个目录中？或者是什么 ？

# iphone - UIwebView shouldStartLoadWithRequest 委托调用后需要点击手势方法

> ID：11519863
> 
> 赞同：0
> 
> 时间：2012-07-17T09:40:09.680
> 
> 标签：iphone, uiview, uiwebview, gesture

我的问题是我在 UIView 中有一个 webView，而 UIView 有点击手势，并且 web 视图类具有 UIWebView 的委托。

我的问题是当我点击一个链接时，它首先调用点击然后`shouldStartLoadWithRequest`。所以我需要防止调用为点击视图而编写的代码。

任何有任何想法的人............

> **编辑**

Web 视图委托的代码

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {

    if(navigationType == UIWebViewNavigationTypeLinkClicked)
    {
        self.isAnyLinkTapped = YES;
        RELEASE(webURL);
        webURL = [[NSString stringWithFormat:@"%@",[request.URL absoluteString]] retain];
        NSArray *urlCoponents = [[request.URL absoluteString] componentsSeparatedByString:@"/"];
        if([urlCoponents count]>0)
        {
//Some code here

}
}

} 
```

我添加了这样的点击手势

```
_tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapped:)]; 
```

并点击下面的代码正在调用。

```
- (void) tapped:(UITapGestureRecognizer *) recognizer {

    touchPointLocationForTap  = [recognizer locationInView:recognizer.view];

    [(WebViewController*)delegate setIsScreenTouched:YES];

    BOOL isThereAnySelection = [self isThereAnyTextSelectionOnWebView];

    if (!isThereAnySelection)
        [self performSelector:@selector(sendTapEventToWebController) withObject:nil afterDelay:1.2];  

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:45:43.607

请发布一些代码，以便每个人都能理解..

顺便一提-

您可以使用此条件识别被触摸的视图

```
if([[touches view] isKindOfClass:[UIWebView class]]){
//Do whatever you want to do with webview
}else{
//Rest of the code
} 
```

# c++ - C ++中结构的按位异或

> ID：11519867
> 
> 赞同：0
> 
> 时间：2012-07-17T09:40:32.333
> 
> 标签：c++, struct, bitwise-xor

我想要做的是在 C++ 中对同一结构的两个变量进行按位异或，即

```
 D[i] ^= D[j]; 
```

其中 D 是一个包含字符串、int、...的数组。

但是，编译器抱怨（这里使用整数数组作为索引，意思是 D[dInd[u]]^=...）：

```
Description Resource    Path    Location    Type
no match for ‘operator^=’ in ‘*(D + ((long unsigned int)(((long unsigned int)
(*(dInd + ((long unsigned int)(((long unsigned int)u) * 4ul))))) * 2808ul))) 
^= *(D + ((long unsigned int)(((long unsigned int)(*(dInd + ((long unsigned 
int)(((long unsigned int)i) * 4ul))))) * 2808ul)))’ 
```

有谁知道我如何纠正这条线以实现按位异或？

任何提示都非常感谢。在此先感谢，干杯 - 亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T09:42:08.907

重载结构中的成员：

```
struct X
{
   X& operator ^= (const X& other)
   {
       //...
       return *this;
   }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:02:14.037

这有点棘手......您可以通过将结构重新解释为可异或类型的数据的连续区域进行异或，或者考虑如何依次对每个数据成员进行异或。这两种方法都有您需要考虑的问题，哪种方法最好取决于您这样做的原因。

例如：

```
struct X
{
    X& operator^=(const X& rhs)
    {
        // WARNING: this won't follow pointers to "owned" data
        unsigned char* p = (unsigned char*)this;
        unsigned char* q = (unsigned char*)&rhs;
        size_t size = sizeof *this;
        while (size--)
            *p++ ^= *q++;
    }
}; 
```

对比

```
 X& operator^=(const X& rhs)
    {
        my_int ^= rhs.my_int;

        for (size_t i = 0; i < sizeof my_int_array / sizeof my_int_array[0]; ++i)
             my_int_array[i] ^= rhs.my_int_array[i];

        // WARNING: this won't XOR the string object's embedded data members -
        //          typically a pointer to the text, a size & capacity etc..
        std::string::const_iterator j = rhs.my_string.begin();
        for (std::string::iterator i = my_string.begin(); i != my_string.end() && j != rhs.my_string.end(); ++i, ++j)
            *i ^= *j;

        // note: you'll have to decide what to do for different-length string data, doubles etc.
    } 
```

请注意，这种异或会使指针和双精度等成员无效 - 您甚至不应该从它们中读取这些类型，除非您再次异或以恢复原始值。

# c - C中的链表和二进制数据

> ID：11519870
> 
> 赞同：0
> 
> 时间：2012-07-17T09:40:39.190
> 
> 标签：c, list, linked-list, mask, binary-data

我正在尝试为以下函数编写一个简单的 C 代码：

给定字母广告的编码：

'a'->00，'b'->01，'c'->10，'d'->11，

链表中的一个节点定义为：

```
typedef struct listNode{
 unsigned char data;
 struct listNode* next;
}ListNode;

typedef struct list{
  ListNode* head;
  ListNode* tail;
}List; 
```

where`head`指向列表的第一个节点，而`tail`指向最后一个节点。

我需要编写一个函数`char* SumList(List arr[], int n)`，它返回一个字符串，其中包含行中 arr 中所有列表的所有节点中的所有编码字母。

这是我到目前为止写的：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int isBitISet(char, int);

typedef struct listNode {
    unsigned char data;
    struct listNode* next;
} ListNode;

typedef struct list {
    ListNode* head;
    ListNode* tail;
} List;

int isBitISet(char ch, int i) {

    char mask;
    mask=1<<i;
    return (mask & ch);
}

int totalNodes(List arr[], int n) {
    int i;
    int counter=0;

    for (i=0; i<n; ++i) {
        ListNode* head= arr[i].head;
        while (head!=NULL) {
            counter++;
            head=head->next;
        }
    }
    return counter;
}

char* whatToadd(char data) {
    int a, b;
    a=isBitISet(data, 0);
    b=isBitISet(data, 1);
    char* result;
    result=(char *) calloc(2, sizeof(char));
    if ((a!=0) && (b!=0))
        result="d";
    else if ((a!=0) && (b==0))
        result="b";
    else if ((a==0) && (b!=0))
        result="c";
    else
        result="a";
    return result;

}

char* SumLists(List arr[], int n) {

    char* final;
    int nodes=totalNodes(arr, n);
    final= (char*) calloc(nodes, sizeof(char)); //how would I know the final length?//
    int i;

    for (i=0; i<n; ++i) {
        ListNode* head= (arr[i].head);
        while (head!=NULL) { //Why do I need a tail?//
            char* result;
            result=whatToadd(((head->data)&(00000011)));
            strcat(final, result);
            free(result);
            result=whatToadd(((head->data)&(00001100))>>2);
            strcat(final, result);
            free(result);
            result =whatToadd(((head->data)&(00110000))>>4);
            strcat(final,result);
            free(result);
            result=whatToadd(((head->data)&(11000000))>>6);
            strcat(final,result);
            free(result);

            head=head->next;

        }
    }
    return final;
}

int main() {
    .....

    free(final);
    ...
} 
```

可能，Tail 出于某种原因给出了 - 但是**（1）** - 我不能像以前那样在列表中运行吗？不使用尾巴？如果没有，我应该如何使用它？

**(2)** - 我是否需要像每次获得新结果时那样释放结果`whatToAdd`？

我是 C 的新手，试图自己工作，我真的会应用提示和更正。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:44:58.437

> 每次从 whatToAdd 获得新结果时，我是否需要像我一样释放结果？

不，因为正在返回字符串文字的地址。不要`calloc()`记忆，`result`因为它是不必要的。`whatToadd()`更改to的返回值`const char*`，因为字符串文字是只读的。

只是为了澄清，以下内容不会复制`"d"`到`result`：

```
result="d"; 
```

而是`result`指向字符串文字的地址`"a"`：它是一个指针赋值。如果您想复制到`result`您可以执行以下任一操作：

*   `strcpy(result, "d");`
*   `*result = 'd'; *(result + 1) = 0;`

在这种情况下，您将`free()`返回指针。

`free()`如果它是先前调用的结果`calloc()`，`malloc()`或者`realloc()`还没有被`free()`d ，则只传递一个指针。

# c - C 中的 gotoxy() 不是 C++ 未定义的参考 conio.h

> ID：11519873
> 
> 赞同：0
> 
> 时间：2012-07-17T09:41:01.550
> 
> 标签：c, mingw

我不能使用 C++ 语法`cout`，所以我尝试使用`<conio.h>`，但它仍然说

> 未定义对“_gotoxy”的引用

有什么问题？每个人都说`conio.h`它不在 K&R 中，因为它不是标准库。有人有想法吗？

我正在使用 MinGW 和命令提示符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:59:40.740

链接时，您需要添加 ncurses 库：

```
$ gcc my-source.c -o my-program -lncurses 
```

上面 ( ) 命令行的最后一个标志`-lncurses`告诉编译器将 ( `-l`) 与 ncurses 库链接。

# regex - 使用正则表达式在第一场比赛中停止

> ID：11519874
> 
> 赞同：1
> 
> 时间：2012-07-17T09:41:09.627
> 
> 标签：regex

这是一个经常重复的问题，但不知何故，我没有找到与我的要求完全匹配的先前答案。有一个字符串

> 我叫帕万。我是个好孩子吗？

我只想匹配`a`上面字符串中第一次出现的字符（不管它是否在单词边界）。最简单的正则表达式

```
a 
```

`a`将匹配字符串中存在的所有四个s。我在 SO 上搜索的所有其他帖子都建议使用 non-greedy match `?`。但这`a+?`并不能解决这里的问题，因为即使是非贪婪匹配也会重复 4 次。

那么我该如何告诉正则表达式引擎在第一场比赛后立即停止呢？

我可能问了一个非常琐碎的问题，但请耐心等待，因为我刚刚开始使用正则表达式。

**PS：**我正在使用以下2个引擎来验证我的结果

[斯金纳](http://www.gskinner.com/RegExr/)

[正则表达式](http://regexpal.com/)

我没有使用任何特定语言，只是使用上述工具进行匹配

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T09:43:43.937

您将正则表达式语言中的量词与您的语言/框架为您提供的工具混淆了。通常有一种方法可以返回所有匹配项，另一种方法只返回第一个匹配项（还有一个只检查正则表达式是否匹配）。

在 .NET`Regex.Matches`中查找所有匹配项，`Regex.Match`仅查找第一个匹配项，您可以使用`Regex.IsMatch`它来确定正则表达式是否匹配。

在 Java 中，您可以使用`Matcher.find`查找第一个匹配项或迭代查找所有项。

在 Python 中有`re.search`和`re.findall`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:44:19.507

在这种特殊情况下：

```
^[^a]*(a) 
```

但是大多数正则表达式实现都有一个只返回第一个匹配项的函数。

# ios - 带有多个离线地图的 iOS 导航应用程序：使用哪个库？

> ID：11519877
> 
> 赞同：2
> 
> 时间：2012-07-17T09:41:28.943
> 
> 标签：ios, frameworks, maps, location, libraries

我遇到了为我的导航应用程序项目选择什么库的问题。

目前有：1）route-me 2）Alpstein route-me 3）mapbox-ios-sdk

它们之间有什么区别？选择什么作为导航应用程序的基础？

我的应用程序的要求：1）可用的多个地图 2）不同地图的多个选定区域以离线工作

十分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:16:06.090

基本上你有：

Route-me/Route-me Alpstein/Route-me（Route-me/Route-Me 的分支） Mapbox/Mapbox-ios-sdk（Alpstein/Route-Me 的分支）

虽然 Alpstein 是原始路线的一个分支-我，但它已经出轨了很多。就功能而言，它并没有那么不同，但有很多性能改进，而且 API 本身也不同（恕我直言更好）。

此外，Alpstein 在 Github 上的活动比原来的分支要多，我觉得这是一件好事。

mapbox 分支与 Alpstein 完全相同，但包含一些特定的 MapBox 功能，例如：

*   能够从 MapBox 云存储服务本地加载地图
*   与 UTFGrid 技术的交互。

因此，如果您不使用 MapBox 特定功能，我会选择 Alpstein fork，如果您使用，我会选择 MapBox-ios-sdk。

# java - 多线程黄瓜环境中的 Vert.x 和 Neo4j

> ID：11519883
> 
> 赞同：0
> 
> 时间：2012-07-17T09:41:48.587
> 
> 标签：java, cucumber, jruby, neo4j, vert.x

我尝试在 JRuby 环境中运行黄瓜测试。我将 cucumber rake 任务配置为在另一个线程中但在同一个 JVM 中启动嵌入式 Vert.x 应用程序服务器。在应用程序启动期间，会初始化 Neo4j 的嵌入式实例。所以最后，Cucumber、Vert.x 和 Neo4j 都在同一个 JVM 中运行（tada！）。

在一些测试场景结束时，我想检查某些数据是否已放入数据库库中。而且由于 Neo4j 文档说...

> EmbeddedGraphDatabase 实例可以在多个线程之间共享。但是请注意，您不能创建指向同一个数据库的多个实例。

...我尝试获取已经初始化的 Neo4j 实例并将其用于这些检查。为了实现这一点，我编写了以下工厂。

```
public class ConcurrentGraphDatabaseFactory {

  private static HashMap<String, GraphDatabaseService> databases = new HashMap<String, GraphDatabaseService>();

  public static synchronized GraphDatabaseService getOrCreateDatabase(String path, String autoIndexFields) {
    System.out.println("databases: " + databases.toString());
    if (databases.containsKey(path)) {
      return databases.get(path);
    } else {
      final GraphDatabaseService database = new GraphDatabaseFactory().newEmbeddedDatabaseBuilder(path).
        setConfig(GraphDatabaseSettings.node_keys_indexable, autoIndexFields).
        setConfig(GraphDatabaseSettings.node_auto_indexing, GraphDatabaseSetting.TRUE).
        newGraphDatabase();

      Runtime.getRuntime().addShutdownHook(new Thread() {
        public void run() {
          database.shutdown();
        }
      });

      databases.put(path, database);
      return database;
    }
  }

} 
```

该工厂应确保仅对实例 per`path`进行初始化。但是如果`getOrCreateDatabase`第二次访问该函数，内部数据库`HashMap`仍然是空的。这会导致代码在相同数据上初始化第二个 Neo4j 实例，但失败并显示

```
NativeException: java.lang.IllegalStateException: Unable to lock store 
```

它都在同一个 JVM 中运行，但似乎不同的线程具有分离的内存。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:47:33.133

你确定你只从所有线程运行一个 neo4j 实例吗？否则，几个 neo4j 实例将争夺锁定存储文件。Neo4j 是线程安全的，但不在同一个存储中执行多个嵌入式实例，为了扩展它，您使用高可用性设置，请参阅[http://docs.neo4j.org/chunked/snapshot/ha.html](http://docs.neo4j.org/chunked/snapshot/ha.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:25:09.820

我花了一些时间解决这个问题，终于找到了解决方案。

Vert.x 中的 Verticle 创建了严格隔离的环境。这会导致我的工厂的第二个版本（参见上面的代码）被初始化。第二个工厂尝试初始化第二个 Neo4j 实例。

解决方案是将 Neo4j 代码分离到一个专用存储 Verticle 中，并编写通过事件总线访问该 Verticle 的测试代码。

# jsf - P:CommandLink 不适用于 ui:repeat

> ID：11519884
> 
> 赞同：1
> 
> 时间：2012-07-17T09:41:48.773
> 
> 标签：jsf, jsf-2

`p:commandLink`当我将标签与标签一起使用时，我遇到了奇怪的问题`ui:repeat`！

commandLink 根本不起作用。

这是我的 xhtml 代码：

```
<h:form>
    <ui:repeat varStatus="miteraionno" value="#{bussinessOwnerViewerMB.bOwner.bOBranches}" var="branch" >

        <div class="details" >       

        <ul class="services">
            <li>
               <p:commandLink actionListener="#{bussinessOwnerViewerMB.testMethod}" styleClass="nav_services" oncomplete="">
                    <h:outputText value="#{branch.branchName}"/>
               </p:commandLink>
            </li>
        </ul>
        </div>
    </ui:repeat> 
```

ActionListener 只是测试方法：

```
public void testMethod(){
    System.out.println("BussinessOwnerViewerMB.changeMapListener()");
} 
```

我尝试`c:foreach`但它给了我同样的结果！

任何帮助将不胜感激 ..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:56:59.030

将方法签名更改为

```
public void testMethod(ActionEvent event){
    System.out.println("BussinessOwnerViewerMB.changeMapListener()");
} 
```

或者`actionListener=...`改成`action="...`

还可以看看**BalusC的以下回答**

[action 和 actionListener 的区别](https://stackoverflow.com/a/3909382/617373)

* * *

**编辑**

将 bean 的范围更改为 View Scope（现在是它的请求范围）

[并在h:commandLink / h:commandButton 未被](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)**BalusC**调用时阅读项目符号 N#4

# java - 列出 c2dm / GCM 注册的应用程序

> ID：11519886
> 
> 赞同：2
> 
> 时间：2012-07-17T09:41:54.227
> 
> 标签：java, android, broadcastreceiver, android-c2dm, google-cloud-messaging

有没有办法列出所有安装在 Android 手机上的应用程序，以了解它们是否注册到 GCM / C2DM 帐户并接收数据？

我实际上在手机上收到了一些广告，我想知道哪个应用程序在向我发送垃圾邮件。我自己做了一些 C2DM 应用程序，我知道我在清单中添加了这些行：

```
<receiver android:name=".NotificationsReceiver" android:permission="com.google.android.c2dm.permission.SEND">
                 <intent-filter>
                      <action android:name="com.google.android.c2dm.intent.RECEIVE"></action>
                      <action android:name="com.google.android.c2dm.intent.REGISTRATION"></action>
    ... 
```

如果我们可以检测应用程序的清单中是否有这些行，我们应该能够列出它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T10:27:54.137

```
 PackageManager pm = context.getPackageManager();
    List<PackageInfo> packages = pm.getInstalledPackages(PackageManager.GET_PERMISSIONS);
    for (PackageInfo pi : packages)
    {
        for (String usesPermission : pi.requestedPermissions){
            if (usesPermission.equalsIgnoreCase("com.google.android.c2dm.permission.RECEIVE")){
                Log.d(TAG, "app with permission to receive push: "+pi.applicationInfo.name);
            }
        }
    } 
```

# ios - 使用 Vim 代替（或与）Xcode 进行 iOS 开发

> ID：11519891
> 
> 赞同：71
> 
> 时间：2012-07-17T09:42:08.267
> 
> 标签：ios, xcode, vim

Xcode 附带了许多构建 iPhone 和/或 iPad 必不可少的东西。事实上，很多我什至不知道，因为它是如此“幕后”。

另一方面，我最近接触到了使用 Vim 作为编辑器的优势。在为 iOS 平台开发时，是否有任何设置可以使使用 Vim 成为一种有效的选择？或者将两者结合起来会不会让这个问题变得毫无意义？

换句话说，如果您在一起使用 Vim 和 Xcode 时有任何提示、建议或警告，我会全力以赴！

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-07-18T21:09:32.043

使用 Vim 为 iOS 或 Mac 进行开发可以非常强大和快速，特别是如果您使用 TDD 或想要快速反馈。

但是要让它工作起来需要一些麻烦。您需要知道的几件重要的事情是：

*   使用`xcodebuild`命令行工具从一些 vimscript 运行您的构建和单元。
*   使用该[`clang_complete`](http://www.vim.org/scripts/script.php?script_id=3302)插件可以在 vim 中为您提供完整的代码完成。
*   使用[`ios.vim`](https://github.com/eraserhd/vim-ios/)和[`cocoa.vim`](http://www.vim.org/scripts/script.php?script_id=2674)插件进行导航。

这是我首选的工作方法。事实上，我编写`ios.vim`插件是为了让更多人更容易做到这一点。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-17T12:27:44.867

我已经去过了...

我喜欢 vim 并经常在 *nix 平台上的日常 C++ 开发中使用它，但我也喜欢 Xcode 的所有功能，特别是最新的 Xcode >= 4.3 和 clang 后端，在自动方面提供了真正的优势-完成和符号引用。

我想我已经找到了很棒的（虽然不是苹果官方支持的）[XVim 插件](https://github.com/JugglerShu/XVim)的最佳解决方案。

希望未来的 Xcode 升级不会破坏它（它仍然可以在最新的开发人员的 4.5 预览版中正常工作），这确实可以让您在使用 Xcode 时像在 Vim 中学习的那样保持手指移动，正如我所说，对我来说是最佳解决方案。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-17T18:24:00.143

*如果您不尝试同时在 Vim 和 XCode 编辑器中*编辑相同的文件，Vim 和 XCode 将很好地共存。如果你这样做了，那么每个人都会给你一个关于文件被外部修改的警告。Vim 的终端版本在这方面更容易使用：它只会在您尝试保存文件时警告您，询问*您是否确定*，而 MacVim 和 XCode 编辑器会在您每次返回时警告您到文件。

XCode 允许您在打开文件时按文件类型选择外部应用程序。在 XCode Preferences 中，转到*File Types*选项卡，然后转到*file->text->sourcecode*。*首选编辑器*可以设置为 MacVim 等外部程序；note that *Emacs* should be already listed as a selection: when Emacs is selected XCode launches Terminal.app with Emacs in a terminal. 此*首选编辑器*设置的问题是，每个打开的文件都会出现一个新窗口，这可能与您的工作流程不匹配。

Vim 的`remote`特性在这里可能很有用，请参阅`:help remote`. 通过一些工作和上述*首选编辑器*首选项，应该能够将要编辑的文件发送到**任何**Vim 实例，包括在`xterm`. 我似乎记得 Emacs 提供了类似的东西。

但这并不妨碍您在**不**设置*Preferred Editor*的情况下使用 Vim ：只需像往常一样在 Vim 中打开和编辑您的项目文件。

您的工作流程可能是使用 Vim 来编辑代码，然后切换到 XCode 来构建项目，但 Vim 也可以运行 XCode 使用的相同构建工具，并且通过更多的工作，您甚至可以跳转到行有错误。XCode 依赖 gdb 进行调试，通过插件也可以很好地与 Vim 一起使用。

当然，不能指望 Vim 取代 Interface Builder 之类的东西，但 iOS 开发的几乎所有其他方面都可以通过仅使用 Vim 的解决方案来实现。

或者只是使用 Vim*更快地编辑您的代码*，其余的继续使用 XCode。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-10-20T13:39:49.367

尽管[MacVim 和 YouCompleteMe](https://stackoverflow.com/a/26466907/4160726)是我在 OSX 上开发的主要环境，但我更喜欢在 XCode 中完成一些任务，比如调试和分析。对于这些场景，我使用[XVim](https://github.com/XVimProject/XVim)，它为 XCode 添加了 VIM 编辑功能。

在 XCode 5.1[上，XVim](https://github.com/XVimProject/XVim)崩溃了很多。但它取得了进展，到目前为止它与 XCode 6 配合得很好。但是您只能通过这种方式获得 VIM 的一个子集，例如，您不能拆分编辑器来同时查看两个文件。您可以使用 Shift-Command-X 轻松启用/禁用它。

（很抱歉将其发布为答案而不是评论，但stackoverflow的声誉系统并没有让我成为可能）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-06-10T18:51:51.547

从 Xcode 13.0 Beta 开始，您可以在 Xcode 中使用 Vim 键绑定。它在设置中启用：

```
Preferences → Text Editing → Editing → Enable Vim key bindings 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-20T13:31:52.673

我不能推荐[YouCompleteMe](https://valloric.github.io/YouCompleteMe/)！除了代码完成之外，它还可以在受影响的行上即时显示语法错误，而无需手动触发编译器（即非常类似于 XCode 编辑器的功能）。YCM 创建者的描述信息量很大：

> YouCompleteMe 是一个快速的、随你输入的、用于 Vim 的模糊搜索代码完成引擎。它有几个完成引擎：一个基于标识符的引擎，适用于每种编程语言；一个基于语义的、基于 Clang 的引擎，为 C/C++/Objective-C/Objective-C++（从现在起称为“C 族语言”）...

要让它运行：

*   按照“Mac OS X 超级快速安装”部分进行操作
*   不要忘记将[.ycm_extra_conf.py](https://github.com/Valloric/ycmd/blob/master/cpp/ycm/.ycm_extra_conf.py)文件添加到项目文件夹的根目录

* * *

编辑：

如果没有像 YouCompleteMe 这样的插件，VIM 只能完成基本的单词补全（Ctrl-N），它既不知道您正在使用的编程语言，也不知道属于您的项目的所有其他文件。键入“。”后，您也不会得到对象成员的列表。或'->'。所以你错过了 XCode 在打字时给你的很多帮助（以及速度）。此外，当您在代码中出现拼写错误或其他错误时，VIM 不会像 XCode 一样警告您。YouCompleteMe 将那些缺失的功能准确地添加到了 VIM 中，并使 VIM 中的 iOS 开发变得愉快。

您可以使用它`xcodebuild`来构建和运行您的项目，但我个人更喜欢同时使用 VIM 和 XCode。双方在对方修改后自动重新加载文档。保留 XCode 用于调试、分析和部署。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-11-04T12:39:39.863

将 AppCode 与 Xcode 并行使用真是太棒了。代码更改立即同步！我对这个设置非常满意，因为在编写 iOS 应用程序时我终于可以使用 vim（作为 AppCode 插件）了。AppCode 有额外的优势，所以我真的建议你检查一下。重构工具也更好恕我直言。例如，它可以提取 Xcode 由于某种原因不能提取的方法，如果它不能提取方法，它至少会告诉你原因。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-17T10:04:06.083

使用外部编辑器肯定有一些优势（但是 emacs 比 vim 好一千万倍：}）。

大多数东西都坚持使用 Xcode，但是当您需要 emacs 或可能是 vim 的强大功能时（批量重复的编辑器宏是我的主要原因），只需使用 show in finder 编辑文件并打开，或者只是切换到您的编辑器导航从那里到文件。当您切换回来时，XCode 会意识到文件已更改。

对于纯代码，我会坚持使用 Xcode，它的代码完成是基于对代码的更多了解，所以 beat 的 emacs 或 vim 的双手放下。持续的代码检查是无价的，并且如前所述，直接访问文档非常棒（如果您还没有找到它，请单击选项）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-04-23T13:37:37.823

我喜欢[XVim](https://github.com/JugglerShu/XVim)的 XCode。不幸的是，它在 XCode 5.1 中中断（有些人让开发分支工作，但我做不到）。

试用后我最终切换到[AppCode](http://www.jetbrains.com/objc/)，我非常喜欢选项卡管理、重构和代码分析。代码会自动与 XCode 同步，因此我同时运行两者（XCode 用于构建设置、管理资产目录。AppCode 用于其他一切）。

我下载它的第一天，我安装了[IdeaVim](https://github.com/JetBrains/ideavim)，所以我仍然可以使用一些 Vim 键盘快捷键。

虽然您不会使用该插件获得完整的 Vi/Vim 功能。我发现与本机 IDE 命令混合使用足以弥补。

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2012-07-17T09:49:26.133

根据我的观点，Xcode 是更好的解决方案。它有很多你无法在 Vim 中找到/添加的功能。他们之中有一些是：

*   Interface Builder（在更短的时间内创建美观的界面）
*   ARC（自动引用计数——内存管理）
*   用于管理代码签名和应用商店提交的自动化流程

这个列表很长，Apple 总是鼓励你使用 Xcode，而不是任何其他 IDE。

# javascript - Javascript：拆分为多个变量

> ID：11519892
> 
> 赞同：4
> 
> 时间：2012-07-17T09:42:09.813
> 
> 标签：javascript, python, variables, split

> **可能重复：**
> [可以分配给数组中的多个变量吗？](https://stackoverflow.com/questions/907042/possible-to-assign-to-multiple-variables-from-an-array)

如果在python中我可以做到这一点

```
x = "Hi there and hello there"
v1, v2, v3, v4, v5 = x.split(" ") 
```

但我不知道如何在javascript中做到这一点..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T09:44:09.600

您可以使用 javascript 将其转换为数组`.split`

例如

```
x = "Hi there and hello there";
var array = x.split(" "); 
```

然后你所有的变量都将在数组中，如下所示

```
array[0]
array[1]
array[2] 
```

您可以使用 console.log 或类似的警报来显示这一点。

```
console.log(array[0]);
alert(array[0]); 
```

**参考**

[http://www.tizag.com/javascriptT/javascript-string-split.php](http://www.tizag.com/javascriptT/javascript-string-split.php)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-17T09:56:21.137

你问的是所谓的“解构赋值”，它是 Javascript 1.7 的一个特性。遗憾的是，并非所有浏览器都支持这些 JS 1.7 功能（例如，Chrome 执行标记为 JS 1.7 的代码但尚不支持此功能）。

您的代码可以在 Firefox 上运行（只要您将其标记为 JS 1.7 并稍作修改），但不能在 Chrome 上运行。

**要查看实际情况，请在Firefox**中使用以下命令：

```
<script type="application/javascript;version=1.7"/>
    x = "Hi there and hello there"
    var [v1, v2, v3, v4, v5] = x.split(" ")
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T09:44:26.403

`split`将字符串拆分为字符串数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T09:44:35.473

拆分返回一个数组。

```
var x = "Hi there and hello there"
var v = x.split(" ")
console.log(v[0]);
console.log(v[1]); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-17T10:46:57.917

如果您可以将变量附加到一个对象，那么您可以这样做：

```
var stringToWords = function (str) {
if (typeof str === "string") {
    var stringsArray = str.split(" "),
        stringsSet = {};

    for (var i = 0, wordsNumber = stringsArray.length; i < wordsNumber; i++) {
        stringsSet['str' + (i + 1)] = stringsArray[i];
    }

    return stringsSet;
} else { 
    return str + " is not a string!!!"} 
```

};

// 这将返回一个带有所需字符串的对象

```
var allStringWords = stringToWords("Hi there and hello there"); 
```

//那么你可以通过这种方式访问​​一个单词：

```
allStringWords.str1 
```

但我敢肯定有更短的方法来获得相同的

# c - C 代码的缓冲区溢出错误

> ID：11519897
> 
> 赞同：0
> 
> 时间：2012-07-17T09:42:33.343
> 
> 标签：c, pointers, buffer-overflow

我在网上找到了一些 C 代码：

```
int main() {
    int cookie;
    char buf[80];

    printf("buf: %08x cookie: %08x\n", &buf, &cookie);
    gets(buf);

    if (cookie == 0x41424344)
        printf("you win!\n");
} 
```

我试图运行这段代码，但它给出了运行时错误。我不确定为什么编译器会抛出任何运行时错误，因为它只是创建两个变量并检查 cookie 值相等的一个条件。

根据一些说明 cookie 变量未初始化的答案，这就是我收到此错误的原因，因此我将代码修改为：

```
int main() {
    int cookie;
    char buf[80];

    printf("buf: %08x cookie: %08x\n", &buf, &cookie);
    gets(buf);

    if (cookie == 1)
        printf("you win!\n");
} 
```

猜猜这一次它不会给我任何运行时错误。

来源：http: [//community.coresecurity.com/~gera/InsecureProgramming/stack1.html](http://community.coresecurity.com/~gera/InsecureProgramming/stack1.html)

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:47:13.643

代码很好。许多编译器通过抛出运行时错误来“保护”您免于使用未初始化的变量、缓冲区溢出等。您通常可以通过编译器标志将其关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:48:52.090

编译器将在此代码上生成许多警告，用于指定`x`in `printf`（需要整数类型）但给出了指针。

此代码不应给出任何运行时错误，除非您输入超过 79 个字符作为输入。关键是`gets`不应该使用它，因为缓冲区（在上面的代码中分配在堆栈上）可以通过提供大输入而溢出，这会溢出到堆栈并覆盖返回地址。利用这一点，攻击者可以提供恶意输入（将返回地址指向他的代码，该代码也在输入中）并在系统上执行任意代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T10:05:52.260

您的“运行时错误”只是因为您的代码没有`return`明确地在`main`. 坚持`return 0;`到底，ideone.com不会报错。至少没有明智的输入；当然，这件事的重点是看看你可以用不明智的输入做什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T09:46:19.980

`cookie`尚未初始化

# sql - 使用 Getdate() 和 patindex 计算日期

> ID：11519898
> 
> 赞同：1
> 
> 时间：2012-07-17T09:42:50.780
> 
> 标签：sql, sql-server, getdate, patindex

希望这是一个简单的

1.  我想用 getdate() 告诉我今天的日期 (Done) ，
2.  然后我想从列中获取数字部分（Don）
3.  然后我想添加 1 和 2 并生成一个名为 "Date Expires" 的列。例如，如果 aplhanumeric 列称为 CalendarHeaders.Description 我将使用 Patindex 来获取数字部分，但我的问题是如何将 patindex 结果添加到 getdate() 以便我可以获得实际的到期日期？

**样本数据**

```
CalendarHeaders.Description 
2 Days from today
5 Days from today
10 Days from today 
```

**到目前为止的示例查询**

```
SELECT      
  left(CalendarHeaders.Description, patindex('%[^0-9]%',  CalendarHeaders.Description+'.') - 1) as Expiration, 
  GETDATE()as DateSold 
```

**示例结果（缺少 DateExpires）**

```
Expiration          Datesold                    DateExpires
2                   2012-07-17 04:26:10.283      2012-07-19 04:26:10.283
5                   2012-07-17 04:26:10.283      2012-07-22 04:26:10.283
10                  2012-07-17 04:26:10.283      2012-07-27 04:26:10.283 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:49:42.903

您可以`DATEADD`将解析的天数改为今天的日期；

```
dateadd(DAY, cast(left(CalendarHeaders.Description, patindex('%[^0-9]%',  CalendarHeaders.Description+'.') - 1) as int), getdate()) AS DateExpires 
```

# tridion - 获取本地化项目列表

> ID：11519900
> 
> 赞同：2
> 
> 时间：2012-07-17T09:42:59.630
> 
> 标签：tridion, tridion-2011

我需要使用 tridion 中的 coreservice 以编程方式获取出版物的本地化项目列表。任何人都可以建议我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T10:15:38.913

我将使用 GetListXml 方法并指定一个 BluePrintChainFilterData 过滤器对象。

```
var subjectId = "[TCM Uri of your item]";
var filter = new BluePrintChainFilterData
                 {
                     Direction = BluePrintChainDirection.Down
                 };

var subjectBluePrintChainList = coreServiceClient.GetListXml(subjectId, filter); 
```

然后，您仍然需要从收到的列表中验证本地化项目。

这不在我的原始答案中，并且可能不完整，因为我没有考虑命名空间，但以下内容可以选择本地化（非共享）项目。

```
var localizedItems = subjectBluePrintChainList.Elements("Item")
    .Where(element => "false".Equals(element.Attribute("IsShared").Value, StringComparison.OrdinalIgnoreCase)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-17T10:06:10.603

我知道的唯一方法是使用搜索功能：

```
var searchQuery = new SearchQueryData();
searchQuery.BlueprintStatus = SearchBlueprintStatus.Localized;
searchQuery.FromRepository = new LinkToRepositoryData{IdRef = "tcm:0-5-1"};
var resultXml = ClientAdmin.GetSearchResultsXml(searchQuery);
var result = ClientAdmin.GetSearchResults(searchQuery); 
```

# android - 从Android中的给定字符串获取日期

> ID：11519910
> 
> 赞同：1
> 
> 时间：2012-07-17T09:43:48.563
> 
> 标签：android, datetime, date

您好，我是 Android 新手。任何人都可以帮我`2012-07-15`从`15 July`. 我知道这是通过使用完成的，`DateFormater`但我不知道它是如何工作的？请帮我找到这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:46:18.960

试试这个。

```
public static String convertStringToDate(String startDate) throws ParseException
    {
        String myFormatString = "dd-MMM-yyyy"; // Your startDate Format
        SimpleDateFormat df = new SimpleDateFormat(myFormatString);
        Date startingDate = df.parse(startDate);

        DateFormat dateFormat= new SimpleDateFormat("yyyy-MM-dd");  // Date format what you want
        return dateFormat.format(startingDate);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:48:30.800

ii 事情通过使用 subString() 方法来使用它

```
 String TimeZOne = "2012-07-08" 
    String Year = TimeZOne.substring(0,4); 
    String month = TimeZOne.substring(4,7); 
    String date = TimeZOne.substring(8,10);

    int Month_1 = Integer.parseInt(month);
    String month_String = find_Month(date_1);//call method

    String date_Fromate = date+" "+month_String ; 
```

//声明方法

```
public String Date_String(int i){

switch (i) 
                {
                    case (i==1): 
                    {
                        month = "JAN";
                        break;
                    }
                    case (i==2): 
                    {
                        month = "FEB";
                        break;
                    }
                    case (i==3): 
                    {
                        month = "MAR";
                        break;
                    }
                    case (i==4): 
                    {
                        month = "APR";
                        break;
                    }
                    case (i==5): 
                    {
                        month = "MAY";
                        break;
                    }
                    case (i==6): 
                    {
                        month = "JUN";
                        break;
                    }
                    case (i==7): 
                    {
                        month = "JUL";
                        break;
                    }
                    case (i==8): 
                    {
                        month = "AUG";
                        break;
                    }
                    case (i==9): 
                    {
                        month = "SEP";
                        break;
                    }
                    case (i==10): 
                    {
                        month = "OCT";
                        break;
                    }
                    case (i==11): 
                    {
                        month = "NOV";
                        break;
                    }
                    case (i==12): 
                    {
                        month = "DEC";
                        break;
                    }
                }
         return month;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T09:52:24.297

试试这个代码示例

```
 String date1 = "15 July 2012";
    SimpleDateFormat sdf = new SimpleDateFormat("dd MMM yyyy");
    Date testDate = null;
    try {
        testDate = sdf.parse(date1);
    }catch(Exception ex){
        ex.printStackTrace();
    }
    System.out.println(testDate);

    sdf = new SimpleDateFormat("yyyy-MM-dd");
    date1 = sdf.format(testDate); 
    System.out.println(date1); 
```

# maven-3 - 未能执行目标 net.sf.mavenjython:jython-compile-maven-plugin:1.0:jython

> ID：11519918
> 
> 赞同：2
> 
> 时间：2012-07-17T09:44:25.460
> 
> 标签：maven-3, robotium, jython-2.5

我正在尝试从我的 Junit 测试用例中运行 jython 脚本。我也包含了 maven-jython-plugin.jar 和 jython.jar。以及相应地更新了我的 pom.xml 文件。但是当我运行“mvn install”时，出现以下错误：

`Failed to execute goal net.sf.mavenjython:jython-compile-maven-plugin:1.0:jython (pydevLockUnlock) on project NTLauncherTest: extracting org/python/antlr/op/AugLoad.class from jython artifact jar failed: target/jython-plugins-tmp/org/python/antlr/op/AugLoad.class (Too many open files)`

有谁知道我可能做错了什么并对此有解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-05T17:14:33.307

问题是 maven 可以保持很多 jar 文件句柄处于打开状态。查看此链接以获取有关如何解决该问题的建议。

[http://www.thinkplexx.com/learn/howto/maven2/debug/fixing-too-many-open-files-maven-problem-solution-for-teamcity-hudson-local-and-ssh-shell-environments](http://www.thinkplexx.com/learn/howto/maven2/debug/fixing-too-many-open-files-maven-problem-solution-for-teamcity-hudson-local-and-ssh-shell-environments)

我发现只需重新运行`mvn install`即可成功构建。

# c - WINVER 0x501 是什么？没有它的 RegisterDeviceNotification 错误

> ID：11519926
> 
> 赞同：0
> 
> 时间：2012-07-17T09:45:06.790
> 
> 标签：c, windows, winapi, usb, device-driver

我在我的代码中使用`RegisterDeviceNotification`了 API。如果我不使用`#define WINVER 0x501`.

1）当我查看 window`Winuser.h`时，`RegisterDeviceNotificationA`在`#if(WINVER >= 0x0500)`. 这是什么原因？

2）为了`RegisterDeviceNotificationA`工作，我在自己的 .h 文件中声明了所有声明，没有`#if(WINVER >= 0x0500)`. 这是正确的方法吗？

3）我的另一个问题是在`RegisterDeviceNotificationA`没有winver的情况下声明有什么问题吗？Winver 有什么用？请详细解释我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:15:44.360

定义 like 的主要目的`WINVER`是用最近的编译器编译旧代码。

如果您正在编写新代码，则需要在您的 cpp 文件或项目文件中定义此变量以及其他几个变量。该值是您所针对的 Windows 版本。微软就是这样设计的。

将系统定义复制到代码中是**非常糟糕的做法。**

# javascript - 从操作脚本调用 javascript 方法后出现长时间运行错误

> ID：11519927
> 
> 赞同：1
> 
> 时间：2012-07-17T09:45:08.647
> 
> 标签：javascript, actionscript-3, apache-flex, flex3

我正在尝试使用 ExternalInterface 从动作脚本中调用 javascript 的方法。这是动作脚本中的代码

```
private function onKickEvent(e:LogoutEvent):void{
                ExternalInterface.call("LoginFound","message");
                return;
        } 
```

这是我的 javascript mwthod

```
function LoginFound(message){
        alert(message);
    anotherInstanceExists=true;

} 
```

一切工作正常，但唯一的事情是在大约 20 秒后对 javascript 中显示的警报框采取行动时，Flash 播放器会抛出异常，即脚本运行时间超过预期时间 15 秒。

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T11:21:47.260

解决此问题的最佳方法是在警报行的 javascript 中添加 setTimeout。它应该如下所示：

```
setTimeout(function(){ alert(message) }, 1); 
```

通过这样做，执行不会因为警报而停止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T10:17:06.943

当您从 调用`js`函数时`actionscript`，该函数*必须工作并且返回值*不超过 in `15 sec`。`Javascript`在*单线程*中工作，当您调用`LoginFound`函数时，会`alert`停止线程上的进一步执行。

```
function LoginFound(message){
    alert('something');
    //Nothing will be executed unless `alert` window will be closed        
} 
```

`Actionsript`但是，您可以使用以下方法处理这种情况（执行时间超过 15 秒）`try/catch`：

```
private function onKickEvent(e:LogoutEvent):void{
    try{
        ExternalInterface.call("LoginFound","message");
    }catch(e:Error){
        //Do something
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T10:17:19.300

我想你`onKickEvent`经常被叫

以便定期调用javascript。最后是浏览器超时事件

发生。它总是发生在递归函数中。

# javascript - 为什么 Backbone.js 路由器不能在 iOS 中工作？

> ID：11519929
> 
> 赞同：1
> 
> 时间：2012-07-17T09:45:11.107
> 
> 标签：javascript, ios, backbone.js, routes

在 iOS 上遇到问题：不带参数的路由 ( `"page1":"page1Controller"`) 运行良好，但带参数的路由不起作用 ( `"bizObject/:id":"bizObjectController"`) - 加载页面出错。

这个页面的链接有一个href：`"#bizObject/6"`例如。

在Android上一切正常......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:55:06.167

您遇到了 jQuery Mobile 和 Backbone 默认路由器不兼容的问题。这两个库都自行修改 URL 片段，您看到的行为是它们冲突的结果。不知道为什么它可以在 Android 上运行——也许你的应用正在使用`pushState`？

要解决这个问题，请查看适用于 jQuery Mobile 的 Backbone 路由器，如以下问题所述：[jquery-mobilebone.js routing](https://stackoverflow.com/questions/6466300/jquery-mobile-backbone-js-routing)

# css - LESS CSS - 从嵌套类中访问 dom 树更远的类

> ID：11519931
> 
> 赞同：5
> 
> 时间：2012-07-17T09:45:17.800
> 
> 标签：css, nested, less

我希望能够使用 LESS CSS 从嵌套类中进一步访问 dom 树上的类，请参见示例：

HTML：

```
<html class="svg">
 <body>
  <div class="content">
    <div class="container">
      <div class="logo"></div>
    </div>
 </body>
</html> 
```

较少的：

```
.container {
  .logo {
      background:url(/images/ws-logo.gif);
  }
} 
```

我想从 .logo 嵌套规则中定位 html 标记上的 .svg 类，以保持整洁，而不是像这样编写另一个规则：

```
.svg { 
  .container {
    .logo {
        background:url(/images/logo.svg);
    }
  }
} 
```

所以，理想情况下是这样的：

```
 .container {
    .logo {
        background:url(/images/logo.gif);

        (some-symbol).svg {
           background:url(/images/svg-logo.svg);
        }
    }
 } 
```

我正在使用modernizr 来检测svg 支持。

有谁知道这是否可能？或者有什么建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T12:32:16.290

# 是的！（更新）

当我[在这里](http://leafo.net/lessphp/#demo)测试时，它起作用了！

```
 .container { 
        .logo { 
            background:url(/images/logo.gif);
            .svg & {
                background:url(/images/svg-logo.svg);
            } 
        } 
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T12:51:54.097

这是不可能的，因为您不能在向父级添加另一个类的路径中“退后一步”。相反，只需编写另一条规则：

```
.svg .container .logo,
/* or perhaps even simpler, however be aware of rule specificity*/
.svg .logo{
        background:url(/images/logo.svg);
} 
```

这没什么大不了的，是吗？

为了完整起见：您可以通过`&`-symbol 引用实际元素。如果您想针对当前元素的伪类/元素或其他类，这是有意义的：

```
.container {
     .logo {
         /* styles for ".container .logo" */
     }
     &:hover .logo{
         /* styles for ".container .logo"
            The hover however is bound to the .container element
            equals the following selector: .container:hover .logo */
     }
} 
```

# android - 无法在真机上运行安卓应用

> ID：11519932
> 
> 赞同：0
> 
> 时间：2012-07-17T09:45:20.547
> 
> 标签：android, eclipse, debugging

我使用的是 Windows 7 设备（Archos 101 Internet 选项卡/Prestigio 7100c）。它通过 USB 电缆与 PC 连接。从设备设置启用 USB 调试。

```
Device manager -> PMP7100c -> right click -> Update Driver Software 
-> Search Automatically For Updated Driver Software
-> Driver Software For Your Device Is Up To Date. 
```

然后我打开 Eclipse

```
Run -> Run Configurations and select active devices as target -> apply
-> Run -> "No active compatible AVD's or devices found.
Relaunch this configuration after connecting a device or starting an AVD." 
```

“adb”驱动程序与 Device Menager 的“设备驱动程序软件”不同吗？我认为它不同，并从 Archos 网站下载了 adb 驱动程序，我得到了一些 .zip 文件。如何配置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:24:18.450

*   为您的设备寻找 USB 驱动程序
*   安装它
*   重新启动命令提示符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T17:50:26.610

如果您使用的是 Mac，并且非常确定您应该已经拥有该设备的驱动程序，那么请确保单击设置中“开发人员选项”中“USB 调试”旁边的复选标记。我无法告诉您当我通过按内部版本号七次解锁开发人员选项然后看到开发人员选项已解锁并假设会自动选择 USB 调试仅在 30 分钟后才发现我必须触摸时，我感到多么愚蠢小盒子。是的...不要做傻孩子！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-17T00:43:07.577

您可能需要更改活动的*USB 计算机连接*设置。我在运行基于 Android 4.3 的 Beanstalk 自定义 rom 时遇到了同样的问题。它是通过从默认*媒体设备 (MTP)*切换到*大容量存储*来解决的。然后该设备被 eclipse 自动识别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T07:03:09.407

首次在 Windows 7 上安装 Android USB 驱动程序：

将 Android 设备连接到计算机的 USB 端口。从桌面或 Windows 资源管理器中右键单击计算机，然后选择管理。在左侧窗格中选择设备。在右侧窗格中找到并展开其他设备。右键单击设备名称（例如 Nexus S）并选择更新驱动程序软件。这将启动硬件更新向导。选择浏览我的计算机以查找驱动程序软件，然后单击下一步。单击浏览并找到 USB 驱动程序文件夹。（Google USB 驱动程序位于 \extras\google\usb_driver。）单击下一步安装驱动程序。或者，要使用新驱动程序升级 Windows 7 上现有的 Android USB 驱动程序：

将 Android 设备连接到计算机的 USB 端口。从桌面或 Windows 资源管理器中右键单击计算机，然后选择管理。在“计算机管理”窗口的左窗格中选择设备管理器。在右侧窗格中找到并展开 Android Phone。右键单击 Android Composite ADB 接口并选择更新驱动程序。这将启动硬件更新向导。从列表或特定位置选择安装，然后单击下一步。选择在这些位置搜索最佳驱动程序；取消选中搜索可移动媒体；并选中在搜索中包含此位置。单击浏览并找到 USB 驱动程序文件夹。（Google USB 驱动程序位于 \extras\google\usb_driver。）单击“下一步”升级驱动程序。

# ms-access - 访问另一个查询返回的值中的查询 IIf 值

> ID：11519935
> 
> 赞同：1
> 
> 时间：2012-07-17T09:45:30.977
> 
> 标签：ms-access

我有一个从当前员工数据库中查找员工 ID、员工姓名和团队名称的查询。我有另一个查询，其中列出了团队名称中的所有唯一值。（Team Name是一个Integer，对应Employee ID，也是一个Integer。）

例如，这就是团队的结构。Emp ID 100 属于 Emp ID 10 的团队。10 属于 5。5 属于 1，等等。

EmpID = 100 团队名称 = 10

EmpID = 10 团队名称 = 5

EmpID = 5 团队名称 = 1

我要做的是返回第四个字段，当 Emp ID 也出现在 Team Name 查询中时，给出一个星号“*”（因此意味着他们有一个团队/是一个经理）。

我有一个可以工作的 DCount，但它比我想要的慢，并且只会随着数据库的增长而变慢，但它可能有助于解释我需要什么。

Expr1: IIf(DCount("TeamName","jdbo_MostRecentEmpDataRemain","TeamName = " & [EmpID])>0,"*","")

jdbo_MostRecentEmpDataRemain 是一个查询，它返回所有处于活动状态的员工的数据。

如果 EmpID 有分配给他们的团队成员，这将返回一个星号，如果没有，则不返回任何内容。

我想知道这是否可以通过查询应用以使其更快。如果您有任何建议，请告诉我。

我试过这个： Expr2: IIf([EmpID] In ([qryListOfTeams].[TeamName]),"a","z") 但这会返回很多 z，然后是 a，因为它似乎为每个返回一个值团队列表中的值。我希望它聚合这些，如果有 a，则显示 a，否则显示 z。（原来的“*”是a，“”是z）

亲切的问候，

杰米沃伯顿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:56:53.180

怎么样：

```
 SELECT * FROM TableOrQuery
 LEFT JOIN (SELECT DISTINCT EmpID FROM Teams 
            WHERE EmpID In (SELECT TeamName FROM Teams)) As a
 ON TableOrQuery.EmpID =  a.EmpID 
```

派生表通常比子查询快。

编辑重新评论

Asterisk 有一个特定的含义，所以虽然你可以这样做，但我不推荐它。

```
 SELECT TableOrQuery.*, a.IsTeam FROM TableOrQuery
 LEFT JOIN (SELECT DISTINCT EmpID, "*" As IsTeam FROM Teams 
            WHERE EmpID In (SELECT TeamName FROM Teams)) As a
 ON TableOrQuery.EmpID =  a.EmpID 
```

# java - 无法检索“this”的正确封闭实例

> ID：11519936
> 
> 赞同：0
> 
> 时间：2012-07-17T09:45:31.827
> 
> 标签：java, eclipse, debugging, jboss

不幸的是，我无法发布完整的代码，也无法用更小的样本重现它。我希望这个解释就足够了。

如果我尝试在断点处从“var”检索值，我总是会收到以下消息：

```
Evaluation failed. Reason(s):
Unable to retrieve the correct enclosing instance of 'this' 
```

变量视图的前 2 个级别如下所示：

```
this    MENU$1  (id=291)    
   this$0   MENU  (id=292)  
   this$0   MENU  (id=292) 
```

无论出于何种原因，有 2 个 this$0 条目具有相同的 id。

我可以在变量视图中查看 var 的值，但我无法在显示或表达式视图中或直接在代码中执行“var”、“this.var”或任何涉及 var 的内容。

```
public class MENU{

  private String var;
  ...
  private void menup() {
     this.main("menup",
         new MainProcess() {
             public void run() {
                 System.out.println(var); // breakpoint here
                 ...
             }
         }
     );
  }
  ...
} 
```

MainProcess.run() 的调用流程有点奇怪，我只能提供这个堆栈跟踪：

```
 MENU$1.run() line: 173 
 MENU(Application).mainRun(Application$Main) line: 2688 
 MENU(Application).main() line: 2529    
 MENU(MainApplication).runApplication() line: 54    
 ApplicationHandler.dxfr(MainApplication, Record) line: 256 
 ApplicationSession$ApplicationRunner.run() line: 138   
 Thread.run() line: 662 [local variables unavailable] 
```

编辑：

显示视图中的执行结果：

```
this 这实际上似乎成功返回 this.toString()
this.var 无法解析或不是字段
var 无法检索“this”的正确封闭实例
MENU.this.var 无法检索“this”的正确封闭实例

```

代码在 JBoss 4 应用服务器中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:24:38.693

通过这个声明：

```
 ...
    this.main("menup",
        new MainProcess() {
            public void run() {
                System.out.println(var); // breakpoint here
                ... 
```

您创建一个扩展/实现 MainProcess 的匿名类（取决于这是一个类还是接口）。`MENU.this.var`正如其他人所建议的那样，匿名类通常应该能够使用 访问父类的字段。由于这似乎不起作用，您可以尝试：

```
 MENU$1.this.var 
```

如果这有效，这意味着您`var`在匿名类中有另一个字段（很可能继承自`MainProcess`）。

总的来说，我强烈建议您使用显式定义的内部类而不是匿名类 - 这使事情更加清晰并有助于避免混淆：

```
public class MENU{

  private String var;
  ...
  private void menup() {
     this.main("menup", new MyMainProcess() );
  }
  ...
  private class MyMainProcess extends MainProcess {
     public void run() {
         System.out.println(var); // breakpoint here
         ...
     }
 }
} 
```

# django - 对象匹配查询不存在

> ID：11519938
> 
> 赞同：1
> 
> 时间：2012-07-17T09:45:35.420
> 
> 标签：django, django-views, django-urls

我有个问题：

```
DoesNotExist at /products//

Product matching query does not exist.

Request Method: GET

Django Version: 1.4
Exception Type: DoesNotExist
Exception Value:

Product matching query does not exist.

Exception Location: /Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/db/models/query.py in get, line 366
Python Executable: /usr/bin/python
Python Version: 2.7.1 
```

vews.py

```
def SpecificProduct(request, productslug):
    product = Product.objects.get(slug=productslug)
    context = {'product': product}
    return render_to_response('singleproduct.html',
                           context, context_instance=RequestContext(request)) 
```

单品.html

```
{% extends "base.html" %}

{% block content %}
<div id = "singleproduct">
        <p>Name: {{ product }}</p>
        <p>Description: {{ product.en_description }}</p>
        <p>Description: {{ product.sp_description }}</p>

</div>
{% endblock %} 
```

网址.py

```
(r'^products/(?P<productslug>.*)/$', 'zakai.views.SpecificProduct'), 
```

模型.py

```
class Product(models.Model):
    en_name = models.CharField(max_length=100)
    sp_name = models.CharField(max_length=100)
    slug = models.SlugField(max_length=80)
    en_description = models.TextField(blank=True, help_text="Describe product in english")
    sp_description = models.TextField(blank=True, help_text="Describe product in spanish")
    photo = ThumbnailerImageField(upload_to="product_pic", blank=True)

    def __unicode__(self):
        return self.en_name 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:49:52.037

您正在访问 URL `/products//`，因此 URL 中的参数没有值`productslug`。这意味着您的`Product`查询失败：

```
product = Product.objects.get(slug=productslug) 
```

因为它没有（正确的）值`productslug`。要修复它，请将您的 URL 模式更改为：

```
(r'^products/(?P<productslug>.+)/$', 'zakai.views.SpecificProduct'), 
```

参数至少需要一个字符`productslug`。为了进一步改进它，您可以使用以下仅接受`-`和字符的正则表达式（这是 slug 的组成部分）：

```
(r'^products/(?P<productslug>[-\w]+)/$', 'zakai.views.SpecificProduct'), 
```

# android-c2dm - “GCMRegsistrar.register”有什么作用？

> ID：11519942
> 
> 赞同：0
> 
> 时间：2012-07-17T09:46:02.093
> 
> 标签：android-c2dm, google-cloud-messaging

按照这个链接：[https ://developer.android.com/guide/google/gcm/demo.html](https://developer.android.com/guide/google/gcm/demo.html)

在家里我可以成功运行 gcm 演示。但是在公司，它运行失败并显示“身份验证失败”我认为我工作场所的网络有问题（阻止 ip 或协议）。

因为我找不到 gcm jar 的源代码。那么，有谁知道当客户端调用 'GCMRegsistrar.register' 时发生了什么？我想请我们的网络管理员帮我解决这个问题。

我得到了答案：https://groups.google.com/forum/#!topic/android-gcm/7qPUp0Ym3Ak

注意： *如果您的组织有防火墙限制进出 Internet 的流量，您需要将其配置为允许与 GCM 连接。要打开的端口是：5228、5229 和 5230。GCM 通常只使用 5228，但有时会使用 5229 和 5230。GCM 不提供特定 IP。它经常更改IP。我们建议不要使用 ACL，但如果必须使用它们，请采用广泛的方法，例如此支持链接中建议的方法。*

这对我很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T23:19:13.257

[您可以在此处](http://developer.android.com/guide/google/gcm/client-javadoc/index.html)的官方文档中找到此类答案。

考虑到这一点，`register()`方法是负责的

> 为当前应用程序启动消息注册。

您应该在[这里](http://developer.android.com/guide/google/gcm/client-javadoc/com/google/android/gcm/GCMRegistrar.html#register%28Context,%20java.lang.String...%29)查看方法描述。

# asp.net - NHibernate 尝试刷新已经失败的操作 - 如何避免它

> ID：11519943
> 
> 赞同：0
> 
> 时间：2012-07-17T09:46:03.013
> 
> 标签：asp.net, nhibernate, nhibernate-3

在我的 Web 应用程序中，在请求周期的某个地方，我在存储库上调用以下方法：

```
 repository.Delete(objectToDelete); 
```

这是 NHibernate 实现：

```
 public void Delete(T entity)
    {
        if (!session.Transaction.IsActive)
        {
            using (ITransaction transaction = session.BeginTransaction())
            {
                session.Delete(entity);
                transaction.Commit();
            }
        }
        else
        {
            session.Delete(entity);
        }
    } 
```

并且**session.Delete(entity)**（在 using 语句内）失败 - 这很好，因为我有一些数据库限制，这是我所期望的。但是，在**Global.asax.cs**中的请求结束时，我使用以下代码关闭会话：

```
 protected void Application_EndRequest(object sender, EventArgs e)
    {
        ISession session = ManagedWebSessionContext.Unbind(HttpContext.Current, sessionFactory);

        if (session != null)
        {
            if (session.Transaction != null && session.Transaction.IsActive)
            {
                session.Transaction.Rollback();
            }
            else
            {
                session.Flush();
            }
            session.Close();
        }
    } 
```

这是用于删除对象的同一会话。现在，当：

```
session.Flush(); 
```

被调用时，NHibernate 会尝试执行相同的 DELETE 操作——这会引发异常和应用程序崩溃。不完全是我想要的，因为我之前已经处理过异常（在存储库级别）并且我显示了 preety UI 消息框。

当调用 session.Flush 时，如何防止 NHibernate 再次尝试执行 DELETE（我猜在其他情况下是 UPDATE 操作）操作。基本上我还没有设计**Application_EndRequest**所以我不确定它是否是刷新所有内容的好方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:40:43.303

NHibernate 的刷新模式默认设置为“自动”，这意味着（除其他外）提交事务将导致 NHibernate 刷新并且删除失败。

在请求结束时，您再次手动刷新会话，告诉 NHibernate 再次执行删除（因为没有活动事务）。

这没有按预期工作的原因是因为您的期望是错误的。NHibernate 会话是一个工作单元，即您的应用程序在一个请求中执行的所有操作。交易完全不相关。第一次刷新会话失败的事实也是第二次失败的原因。

如果你想阻止 NHibernate 第二次执行删除，你不应该刷新两次，只刷新一次。通过提交事务或手动进行。

在一个有点不相关的注意事项上：您正在使用 NHibernate 并且事务错误。以后会给你带来很大的问题。网上有一些关于如何在 Web 应用程序中使用 NHibernate 的好资源。

# c# - C# XmlSerialisation 插件序列化

> ID：11519945
> 
> 赞同：0
> 
> 时间：2012-07-17T09:46:08.430
> 
> 标签：c#, xml-serialization

我写了一个接口来编写一个非常简单的插件。事实上，它只是一个在运行时从 dll 文件中加载出来的类，并作为 Property 存储在另一个类中。存储接口的那个类必须被序列化。例如，这是我的序列化对象：

```
<?xml version="1.0" encoding="utf-8"?><MD5HashMapper xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://www.namespace.net" /> 
```

但是现在如果我想加载那个对象，我会得到一个异常：例如：

```
{"<MD5HashMapper xmlns='http://www.vrz.net/Vrz.Map'> was not expected."} 
```

那么有人知道如何解决这个问题吗？

代码：我有一个名为 IMap 的接口，它在 dll 文件中共享，以基于该接口创建插件：

```
public interface IMap
{
    object Map(object input);
} 
```

我也有不同的映射器（您可以通过它们传递输入，它们会修改输出）。所有 Mapper 均来自：

```
[XmlInclude(typeof(ConstMapper))]
[XmlInclude(typeof(FuncMapper))]
[XmlInclude(typeof(IdentMapper))]
[XmlInclude(typeof(NullMapper))]
[XmlInclude(typeof(RefMapper))]
[XmlInclude(typeof(VarMapper))]
[XmlInclude(typeof(TableMapper))]
[XmlInclude(typeof(AddinMapper))]
public class MapperBase:ComponentBase,IMap
{        public virtual object Map(object input) {
        throw new NotImplementedException("Diese Methode muss überschrieben werden");
    }

    public override string ToString() {
        return ShortDisplayName;
    }
} 
```

忘记 ComponentBase。这不重要……

现在我也有一个 AddinMapper。该映射器的主要功能是从 IMap 对象中转换创建 MapperBase 对象：这正是我想要序列化的类，包括 Mapper 属性（IMap 类型）的属性。

```
 public class AddinMapper : MapperBase
{
    private static MapperBase[] _mappers;
    const string addinDirectory = @"Addin\Mappers\";

    //Mappers from *.dll files are loaded here:
    [XmlIgnore]
    public static MapperBase[] Mappers
    {
        get
        {
            if (_mappers == null)
            {
                List<MapperBase> maps = new List<MapperBase>();
                foreach (string dll in Directory.GetFiles(addinDirectory, "*.dll"))
                {
                    if (Path.GetFileName(dll) != "IMap.dll")
                    {
                        var absolutePath = Path.Combine(Environment.CurrentDirectory, dll);
                        Assembly asm = Assembly.LoadFile(absolutePath);
                        foreach (Type type in asm.GetTypes().ToList().Where(p => p.GetInterface("IMap") != null))
                        {
                            maps.Add(new AddinMapper((IMap)Activator.CreateInstance(type)));
                        }
                    }
                }

                Mappers = maps.ToArray();
            }
            return _mappers;
        }
        set
        {
            _mappers = value;
        }
    }

    IMap _base;

    public string MapperString { get; set; }

    [XmlIgnore()]
    public IMap Mapper
    {
        get
        {
            if (_base == null)
            {
                Type type = null;
                foreach (MapperBase mapperBase in Mappers)
                {
                    if (mapperBase is AddinMapper && ((AddinMapper)mapperBase).Mapper.GetType().FullName == _mapperName)
                    {
                        type = (mapperBase as AddinMapper).Mapper.GetType();
                        break;
                    }
                }
                if (type != null)
                {
                    XmlSerializer serializer = new XmlSerializer(type);
                    using (StringReader reader = new StringReader(MapperString))
                    {
                        Mapper = (IMap)serializer.Deserialize(reader);
                    }
                }
            }
            return _base;
        }
        private set
        {
            _base = value;
            StoreMapperString();
        }
    }

    string _mapperName;

    [System.ComponentModel.Browsable(false)]
    public string MapperName
    {
        get
        {
            return _mapperName;
        }
        set
        {
            _mapperName = value;
        }
    }

    public AddinMapper(IMap baseInterface) : this()
    {
        Mapper = baseInterface;
        _mapperName = baseInterface.GetType().FullName;
    }

    public AddinMapper() 
    {
    }

    public override object Map(object input)
    {
        return Mapper.Map(input);
    }

    public override string ToString()
    {
        return Mapper.ToString();
    }

    private void StoreMapperString()
    {
        MemoryStream memstream = new MemoryStream();
        XmlStore.SaveObject(memstream, Mapper);
        using (StreamReader reader = new StreamReader(memstream))
        {
            memstream.Position = 0;
            MapperString = reader.ReadToEnd();
        }
    }
} 
```

这种插件的一个例子是：

```
 public class ReplaceMapper : IMap
{
    public string StringToReplace { get; set; }
    public string StringToInsert { get; set; }
    public object Map(object input)
    {
        if (input is string)
        {
            input = (input as string).Replace(StringToReplace, StringToInsert);
        }
        return input;
    }
} 
```

问题是我想将 StringToReplace 之类的设置保存为 xml

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:47:44.640

我已经解决了我的问题：我真的不知道为什么，但看看这篇文章： http: [//www.calvinirwin.net/2011/02/10/xmlserialization-deserialize-causes-xmlns-was-not-expected/](http://www.calvinirwin.net/2011/02/10/xmlserialization-deserialize-causes-xmlns-was-not-expected/) （如果链接稍后失效）

```
XmlRootAttribute xRoot = new XmlRootAttribute();
xRoot.ElementName = elementName;
xRoot.IsNullable = true;

XmlSerializer ser = new XmlSerializer(typeof(MyObject), xRoot);
XmlReader xRdr = XmlReader.Create(new StringReader(xmlData));
MyObject tvd = (MyObject)ser.Deserialize(xRdr); 
```

现在重要的是：**如果您没有得到序列化的例外情况，这并不重要。您必须以两种方式添加 XmlRootAttribute：序列化和反序列化。**

# ruby-on-rails - 无法运行指标：全部

> ID：11519946
> 
> 赞同：0
> 
> 时间：2012-07-17T09:46:07.503
> 
> 标签：ruby-on-rails, metric-fu

运行时出现以下错误`bundle exec rake metrics:all`。我没有从中得到线索。谁能帮我吗。提前致谢。

saikuro --output_directory tmp/metirc_fu/saikuro --cyclo --filter_cyclo 0 --warn_cyclo 5 --error_cyclo 7 --formater text --input_directory app --input_directory lib /home/jophine/.rvm/gems/ruby-1.9。 2-p290/gems/Saikuro-1.1.0/lib/saikuro/usage.rb:4:in `require': no such file to load -- rdoc/usage (LoadError) from /home/jophine/.rvm/gems/ruby-1.9.2-p290/gems/Saikuro-1.1.0/lib/saikuro/usage.rb:4:in`'来自 /home/jophine/.rvm/gems/ruby-1.9.2-p290/gems/Saikuro-1.1.0 /lib/saikuro.rb:1077:in `require' from /home/jophine/.rvm/gems/ruby-1.9.2-p290/gems/Saikuro-1.1.0/lib/saikuro.rb:1077:in`'来自 /home/jophine/.rvm/gems/ruby-1.9.2-p290/gems/Saikuro-1.1.0/lib/saikuro.rb:1069:in`<top (required)>' from /home/jophine/.rvm/gems/ruby-1.9.2-p290/gems/Saikuro-1.1.0/bin/saikuro:91:in`要求'来自/home/jophine/.rvm/gems/ruby-1.9.2-p290/gems/Saikuro-1.1.0/bin/saikuro:91:in `<top (required)>' from /home/jophine/.rvm/gems/ruby-1.9.2-p290/bin/saikuro:19:in`load' 来自 /home/jophine/.rvm/gems/ruby-1.9。 2-p290/bin/saikuro:19:in `<main>' from /home/jophine/.rvm/gems/ruby-1.9.2-p290/bin/ruby_noexec_wrapper:14:in`eval' 来自 /home/jophine/.rvm/gems/ruby-1.9.2-p290/bin/ruby_noexec_wrapper:14:in `'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:41:36.893

您可以尝试在应用根目录中添加 .metrics 文件并删除 Saikuro 和其他文件，如下所示。也许尝试在顶部使用韵律宝石。

```
 MetricFu::Configuration.run do |config|
      config.metrics -= [:saikuro, :rcov, :roodie, :flog]
   end 
```

# html - 如何定位两个内容在中间的div

> ID：11519948
> 
> 赞同：0
> 
> 时间：2012-07-17T09:46:09.550
> 
> 标签：html, css, positioning, graphical-logo

我有一个期末项目需要采用响应式设计。我们还没有对这个主题进行太多介绍，也没有教给我们任何 javascript。我有点明白这个概念，但我在页面设计方面面临挑战。

徽标应位于主导航之后，但也应与搜索栏并排。但是无论是什么logo，多宽多高，搜索栏都应该始终在logo高度的中间，两者的宽度大约是63% logo和31% search bar + submitt btn。我不能使用表格，因为对于移动设备，搜索栏必须位于徽标下方。

如果问题是转储，我很抱歉，至少我确保之前没有被问过 B)

感谢您的时间！

![页面布局](../Images/e80594f6e2cab6abb3f381b06e5998fe.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:55:50.040

有几种方法可以做到这一点，但首先可以使用垂直对齐。这是我一直发现的 CSS 中的 PITA。

**垂直对齐：**

您可以将主容器设置为`display: table-cell;`然后`vertial-align: middle;`在搜索 div 上使用。这在旧版本的 IE 中不受支持，但是当您响应时，无论如何您都会有一些障碍可以跳过它们。

```
.menuBar {
    display: table;
}

.logo, .search {
    display: table-cell;
    vertial-align: middle;
}

<div class="menuBar">
    <div class="logo">LOGO</div>
    <div class="search">SEARCH</div>
</div> 
```

**线高：**

```
 #ex6     { height: 5em; line-height: 5em; }
  #ex6 *   { vertical-align: middle; }

  <div id='ex6'>
    <div class='lfloat'>lfloat</div>
    <div class='rfloat'>rfloat</div>
    <input type='checkbox'>
    <input type='text'>
    <span class='small'>small</span>
    <img src='avatar.gif'>
    normal
    <span class='large'>large</span>
  </div> 
```

可以在此处找到行高示例和其他示例 - [http://codeincomplete.com/posts/2011/3/20/css_vertical_align/](http://codeincomplete.com/posts/2011/3/20/css_vertical_align/)

# c++ - 任何人都可以在下面的 Thrift 程序中解决这个异常吗？

> ID：11519957
> 
> 赞同：1
> 
> 时间：2012-07-17T09:46:37.253
> 
> 标签：c++

我是 Thrift 的新手。我正在尝试在 ubuntu 10.10 上使用以下 Thrift 程序在 Hbase 中创建一个表（“样本”），任何人都可以告诉我这是否正确。

```
#include <stdio.h>
#include <unistd.h>
#include <sys/time.h>
#include <poll.h>

#include <iostream>

#include <boost/lexical_cast.hpp>
#include <protocol/TBinaryProtocol.h>
#include <transport/TSocket.h>
#include <transport/TTransportUtils.h>

#include "Hbase.h"

using namespace apache::thrift;
using namespace apache::thrift::protocol;
using namespace apache::thrift::transport;
using namespace apache::hadoop::hbase::thrift;
using namespace std;
int main()
{
    boost::shared_ptr<TTransport> socket(new TSocket("localhost", 60010));
    boost::shared_ptr<TTransport> transport(new TBufferedTransport(socket));
    boost::shared_ptr<TProtocol> protocol(new TBinaryProtocol(transport));
    HbaseClient client1(protocol);
    try
    {
        transport->open();
        string tableName("Sample");
        vector<ColumnDescriptor> columns;
        columns.push_back(ColumnDescriptor());
        columns.back().name = "cf:";
        columns.back().maxVersions = 10;
        columns.push_back(ColumnDescriptor());
        columns.back().name = "test";
        try {   
            client1.createTable(tableName, columns);
        } catch (const AlreadyExists &ae) {
            std::cerr << "WARN: " << ae.message << std::endl;
        }
    }
    catch (const TException &tx) {
        std::cerr << "ERROR: " << tx.what() << std::endl;
    }

    return 0;
} 
```

但是我在这个地方遇到了以下异常`client1.createTable(tableName, columns);`

```
ERROR: No more data to read. 
```

请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:49:00.663

知道了，需要在 hbase 上启动 thrift server`.<hbaseinstallationpath>/bin/hbase thrift -threadpool start`

# html - onclick 事件未调用方法

> ID：11519962
> 
> 赞同：0
> 
> 时间：2012-07-17T09:46:56.257
> 
> 标签：html, jsf-2, checkbox, onclick

我正在使用 JSF 2.0 创建页面：

```
<h:selectBooleanCheckbox id="checkbox1" title="Published" 
                         onclick="#{StageGate.setMyCheckboxValue()}" /> 
```

`setMyCheckboxValue()`每当单击复选框时，我都希望被调用。但是，`setMyCheckboxValue()`在加载页面时调用一次。

如果我写

```
<h:selectBooleanCheckbox id="checkbox1" title="Published" 
onclick="#{StageGate.setMyCheckboxValue()}; alert(document.getElementById('checkbox1').checked);" /> 
```

每次点击我都会收到警报。

我的问题是：当我收到警报时，为什么`setMyCheckboxValue()`没有在每个 onclick 事件上被调用？

**注意：**我也尝试过 AJAX，但复选框保持不变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:12:01.487

该`onclick`属性用于客户端（javascript）方法，不会更改服务器端的任何内容。

如果要更改服务器端值，则需要以下`value`属性：

```
<h:selectBooleanCheckbox value="#{StageGate.myCheckboxValue}" .../> 
```

请注意，我将您更改`setMyCheckboxValue()`为`myCheckboxValue`因为 jsf 自动检测到 setter 方法（如果您`foo`使用 getter`getFoo()`和 setter正确定义了变量`setFoo(...)`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:25:16.793

`onclick`用于客户端 javascript 调用。我认为您想在单击复选框时在服务器端调用一个函数。

这是代码：

```
<h:selectBooleanCheckbox id="checkbox1" title="Published"
                         value="#{StageGate.myCheckBox}" >
    <f:ajax event="change" execute="@this"
            action="#{StageGate.setMyCheckboxValue()}" />
</h:selectBooleanCheckbox> 
```

我希望这对你有用。

# php - PDO SQL 状态“00000”但仍然错误？

> ID：11519966
> 
> 赞同：29
> 
> 时间：2012-07-17T09:47:05.963
> 
> 标签：php, mysql, sql, database, pdo

任何人都可以解释为什么

```
$sql->execute($params); 
```

返回`FALSE`，而

```
print $pdo->errorCode();
print_r($pdo->errorInfo()); 
```

两者都返回`SQLSTATE` `00000`，这意味着根据文档成功？它是一个`INSERT`并且实际上没有任何东西被插入到数据库中......那么，为什么我会收到一条成功消息`SQLSTATE`？

* * *

如果有帮助，这是代码...

```
$sql = $pdo->prepare("
        INSERT INTO user (
            username, fname, pass, salt, email,
            loc_id_home, country_id_home, region_id_home,
            cont_id_home, timestamp_reg, timestamp_upd, timestamp_lastonline, 
            online_status, gender, birthdate
            )
        VALUES (
            :username,:fname,:pass,:random_salt,:email,
            :loc_id_home,:country_id_home,:region_id_home,
            :cont_id_home,'".time()."','".time()."','".time()."',
            1,:gender,:birthdate)
        ");

$params=array(
    ':username'=>$username,
    ':fname'=>$fname,
    ':pass'=>$pass,
    ':random_salt'=>$random_salt,
    ':email'=>$email,
    ':loc_id_home'=>$loc_id_home,
    ':country_id_home'=>$country,
    ':region_id_home'=>$region,
    ':cont_id_home'=>$continent,
    ':gender'=>$gender,
    ':birthdate'=>$birthdate
);  

$sql->execute($params);

print $pdo->errorCode();
print_r($pdo->errorInfo()); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-15T15:32:47.500

这是因为`$pdo->errorInfo()`指的是最后一条成功执行的语句。由于`$sql->execute()`返回 false，因此它不能引用该语句（无论是什么都没有或之前的查询）。

至于为什么`$sql->execute()`返回false，我不知道……您的`$params`数组或数据库连接有问题。

> PDO::errorCode — 获取与数据库句柄上的最后一个操作关联的 SQLSTATE

注意：PHP 手册 ( [http://php.net/manual/en/pdo.errorinfo.php](http://php.net/manual/en/pdo.errorinfo.php) ) 没有准确定义“数据库句柄上的最后一次操作”是什么意思，但是如果绑定参数有问题，那错误会发生在 PDO 内部并且没有与数据库进行任何交互。可以肯定地说，如果`$pdo->execute()`返回`true`，那`$pdo->errorInfo()`是有效的。如果`$pdo->execute()`返回`false`，`$pdo->errorInfo()`则文档中没有明确说明 的行为。如果我从我的经验中没记错的话，执行返回`true`，即使 MySQL 返回错误，`false`如果没有执行任何操作也会返回。由于文档不是特定的，它可能是特定于数据库驱动程序的。

该答案反映了截至 2012 年 9 月编写时的实际经验。正如用户所指出的，文档没有明确重申这种解释。`$pdo->execute()`它也可能只反映特定的数据库驱动程序实现，但如果返回，它应该总是正确的`true`，那`$pdo->errorInfo()`就是有效的。

您可能还想在连接序列中设置*PDO::ERRMODE_EXCEPTION*。异常处理使检查和查询错误变得不必要。

```
$dbh->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T23:45:01.957

从 php 手册：

PDO::ERR_NONE (string) 对应于 SQLSTATE '00000'，表示 SQL 语句已成功发出，没有错误或警告。在检查 PDO::errorCode() 或 PDOStatement::errorCode() 以确定是否发生错误时，此常量是为了方便您。您通常会通过检查引发错误条件的方法的返回代码来知道是否是这种情况。

所以听起来它确实插入了记录。检查表中的最后一条记录 id ......也许你只是错过了它？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T16:34:20.723

我遇到了类似的问题，

这主要是由于**查询错误**，尝试**在 php-myadmin** 或任何其他查询运行器中运行您的查询并**确认**您的**查询工作**正常。
即使我们的查询语法是正确的，其他简单的错误（例如保留 null 或不提及在表结构中设置为非 null 的列）也会导致此错误。（这是我犯的错误）

正如 user1122069 解释 $pdo->errorInfo() 的原因所说的没有错误可能是由于

> $pdo->errorInfo() 指的是最后一条成功执行的语句。
> 由于 $sql->execute() 返回 false，因此它不能引用该语句（无论是什么都没有或之前的查询）

希望这会有所帮助:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T04:01:39.950

我一次收到此错误。对于所有故障，我只在一台服务器上安装了它。对于相同的错误，不同的服务器会正​​确报告错误。这让我相信这是一个 MySQL 客户端配置错误。我从未解决过具体错误，但请检查您的配置。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-18T10:14:27.090

尝试通过 print_r() 检查 $sql 并复制您的查询，然后在 phpMyadmin 中尝试结果查询。希望能找到原因。会有不相关价值的机会。

# oracle - MongoDB容量规划

> ID：11519970
> 
> 赞同：1
> 
> 时间：2012-07-17T09:47:22.427
> 
> 标签：oracle, mongodb, capacity-planning

我有一个每天大约有 700 万条记录的 Oracle 数据库，我想切换到 MongoDB。(~300Gb)

要设置 POC，我想知道我需要多少个节点？我认为 2 个分片中的 3 个节点的 2 个副本就足够了，但我想知道你的想法 :)

我想要一个 HA 设置:)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:10:22.877

考虑一下您的分片键，您在哪些字段上共享您的数据集是有意义的？这将影响部署多少分片的决定，以及每个分片的容量。如果你的数据可以很容易地分成一半或三分之一，你可能会使用相对较少的分片，也许是两到三个大的深分片，或者如果你可以在更多样化的键上分片，则可以使用几个更轻更薄的分片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:42:36.930

从 MongoDB[副本集](http://www.mongodb.org/display/DOCS/Replica+Sets)配置升级到分片[集群](http://www.mongodb.org/display/DOCS/Configuring+Sharding)相对简单（每个分片实际上是一个副本集）。与其预先确定分片是正确的解决方案，不如考虑一下您进行分片的原因是什么（例如，您的应用程序需求是否会超出单台机器的资源；您的数据集有多少是活动的工作集？查询等）。

作为规划架构和 POC 的一部分，值得从副本集开始并对其进行基准测试。

一些帮助您入门的注意事项：

*   MongoDB 的[journaling](http://www.mongodb.org/display/DOCS/Journaling)在 1.9.2 中默认启用，在存储引擎中提供崩溃恢复和持久性。

*   [副本集](http://docs.mongodb.org/manual/faq/replica-sets/)是高可用性、自动故障转移和数据冗余的构建块。每个副本集至少需要三个节点（例如，三个数据节点或两个数据节点和一个仲裁器）才能[通过选举启用故障转移到新的主](http://docs.mongodb.org/manual/core/replication/#failover)节点。

*   [一旦](http://docs.mongodb.org/manual/faq/sharding/)您的数据或写入超出单个服务器的资源，分片对于水平扩展很有用。

其他注意事项包括根据您的应用程序使用情况规划您的文档。例如，如果您的文档将经常更新并随着时间的推移而增大，您可能需要考虑[手动填充](http://www.mongodb.org/display/DOCS/Padding+Factor)以防止过度的文档移动。

如果这是您的第一个 MongoDB 项目，您绝对应该阅读关于[MongoDB](http://docs.mongodb.org/manual/faq/sharding/)[副本集](http://docs.mongodb.org/manual/faq/replica-sets/)和分片以及[应用程序开发人员](http://docs.mongodb.org/manual/faq/developers/)的常见问题解答。

请注意，为您的用例[选择一个好的分片键](http://www.mongodb.org/display/DOCS/Choosing+a+Shard+Key)是一个重要的考虑因素。如果您计划删除大量数据，则选择不当的分片键可能会导致数据写入的“热点”或分片不平衡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T09:58:28.717

For MongoDB to work efficiently, you need to know your working set size..You need to know how much data does 7 million records/day amounts to. This is active data that will need to stay in RAM for high performance.

Also, be very sure WHY you are migrating to Mongo. I'm guessing..in your case, it is scalability.. but know your data well before doing so.
For your POC, keeping two shards means roughly 150GB on each.. If you have that much disk available, no problem.

# sharepoint - Sharepoint 2007 中的“隐藏”列

> ID：11519979
> 
> 赞同：1
> 
> 时间：2012-07-17T09:48:09.390
> 
> 标签：sharepoint, sharepoint-2007

我正在尝试制作一个自定义查询列表，用户将在其中填写一些信息，例如“姓名”，“原因”等。当他们完成信息填写并添加项目后，管理员将通过该项目，并填写一些用户无法填写的新列。

我希望你能理解我，否则非常欢迎你提问！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:26:50.607

您需要使用 SharePoint Designer。您将创建自定义的新表单和编辑表单。这样，当用户填写新表单时，只会出现某些字段。然后，当管理员使用编辑表单编辑项目时，他们将可以访问更多字段。

请参阅此[链接](http://dishasharepointworld.blogspot.co.uk/2009/06/how-to-customize-edit-forms-in_22.html)了解更多信息。

尝试通过复制并粘贴到同一文件夹来复制您要编辑的表单。然后单击表单的 Web 部件，上面的代码将突出显示。查找标签 IsVisible 并将其从“true”更改为“false”。这将隐藏默认表单。不要删除原始表格。

单击设计视图中的 Web 部件，然后按向右箭头。这会将光标移动到 Web 部件的右侧，但仍在 Web 部件区域内。转到插入菜单，选择 SharePoint 控件，然后选择自定义列表表单。将出现一个小对话框窗口，从第一个下拉列表中选择列表名称，然后从第二个下拉列表中选择内容类型。最后选择要插入的表单，新建、编辑或显示。单击确定。新表单将显示在默认表单下，然后您将按顺序查看所有字段，您可以根据需要添加或删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:40:18.637

使用 SharePoint Designer 2007，您可以使用 SPSecurityTrimmedControl，它使您能够显示/隐藏表单字段（或网站操作...）。

句法 ：

```
<SharePoint:SPSecurityTrimmedControl PermissionsString="ManageLists" runat="server"> 
    WHAT_YOU_WANT_TO_HIDE_HERE
</SharePoint:SPSecurityTrimmedControl> 
```

对于 PermissionsString，所有值[HERE](http://msdn.microsoft.com/fr-fr/library/microsoft.sharepoint.spbasepermissions%28v=office.12%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T11:22:55.970

如果不想编辑页面，难道不能使用 Jquery 来隐藏字段吗？我已经用 SPservices 做到了这一点。如果您愿意检查用户凭据，然后如果匹配显示隐藏字段...所有这些都是从 Web 部件完成的...只是一个想法...我今天实际上学到了一些很棒的东西...很棒的回复。

# c# - 我可以在 Windows azure 上部署 ASP.NET 网站而不是 ASP.NET Web 应用程序吗？

> ID：11519980
> 
> 赞同：1
> 
> 时间：2012-07-17T09:48:15.913
> 
> 标签：c#, azure

我试图用 Windows azure 部署一个 asp.net 网站而**不是**asp.net Web 应用程序，所以我需要知道我是否可以这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:07:58.567

创建新角色时，您需要选择所需的角色类型。比如 Web Role、WCF Web Role、Worker Role 等，会自动将 Role 添加到 Cloud 项目中。当您选择一个 ASP.NET Web 角色时，您将获得一个 Web 应用程序而不是网站。

但是一旦添加了角色，您就可以使用多个网站、Web 应用程序甚至虚拟目录来扩展该角色。

您可以快速浏览以下网址 - [http://www.dotnettwitter.com/2012/03/publishing-multiple-sites-sub-sites.html](http://www.dotnettwitter.com/2012/03/publishing-multiple-sites-sub-sites.html) http://www.dotnettwitter.com/2012/03/publishing -multiple-sites-sub-sites_29.html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:51:40.123

是的你可以。

我参加了 Azure 的首席开发人员之一 Scott Guthrie 的会议。

他正在演示标准的 ASP.Net 网站。

以下链接告诉您如何部署站点：

[如何将一个asp网站部署到windows azure](http://www.davidaiken.com/2010/07/14/how-to-deploy-an-asp-net-web-site-to-windows-azure/)

希望这可以帮助。

# mysql - mysql全文搜索没有返回记录

> ID：11519983
> 
> 赞同：5
> 
> 时间：2012-07-17T09:48:23.050
> 
> 标签：mysql, full-text-search

我没有收到以下返回的任何行，我不知道为什么。我是否正确定义了全文索引？

```
CREATE TABLE `client_contact` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `first_name` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL,
 `last_name` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL,
 `email` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL,
 `phone` varchar(45) COLLATE utf8_unicode_ci DEFAULT NULL,
 `company` int(11) DEFAULT NULL,
 `billing_address` text COLLATE utf8_unicode_ci,
 PRIMARY KEY (`id`),
 FULLTEXT KEY `client_search` (`first_name`,`last_name`,`email`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

INSERT INTO `client_contact` (`first_name`, `last_name`, `email`, `phone`, `company`, `billing_address`) VALUES
('John', 'Smith', 'john.smith@company.com', '123456', 1, '1 Any Street'),
('Mary', 'Smith', 'mary.smith@company.com', '123456', 1, '1 Any Street');

SELECT cl.*
FROM client_contact cl 
WHERE MATCH(cl.first_name, cl.last_name, cl.email) AGAINST ('Smith') 
```

[SQL小提琴在这里](http://sqlfiddle.com/#!2/7d54b/1)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T10:00:19.807

这是因为关键字`Smith`存在于所有行中。[MySQL 手册](http://dev.mysql.com/doc/refman/5.1/en/fulltext-search.html)说“出现在 50% 或更多行中的单词被认为是常见的并且不匹配”。

# javascript - Jquery 移动按钮问题

> ID：11519985
> 
> 赞同：0
> 
> 时间：2012-07-17T09:48:29.593
> 
> 标签：javascript, jquery, html, jquery-mobile, blackberry-webworks

我已经包含了 Jquery 和 Jquery 手机的最新版本。

我基本上是在尝试使用移动按钮来调用 JavaScript 函数但遇到问题。

这在 chrome 中可以正常工作，但在剧本上的 webworks 中不行（这是我得到错误的地方）

```
<script type="text/javascript" src="js/personSearch.js" ></script> 
```

包括我的自定义 JavaScript 代码

在该文件中，我有以下代码

```
 function testme()
{
    alert("tet");
} 
```

我尝试了以下所有方法：

```
<input type="button" onclick="testme();" value="Button" />
<a id="psClear" href="javascript:testme();" data-role="button" data-inline="true">Clear</a> 
```

对于他们来说，我得到了错误：mainMenu.html:1ReferenceError: Can't find variable: testme

我认为这与 J query Mobile 呈现按钮的方式有关，但不确定......

更新

如果我在页面加载到 javascript 之前将 rel="external" 添加到页面并且工作正常，但再次重新加载所有脚本，并且没有 rel="external" 将无法工作

```
 <link  rel="stylesheet" type="text/css" href="css/jqueryMobileCSS.css">
    <link  rel="stylesheet" type="text/css" href="css/customStyle.css">
    <script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="js/jqueryMobile.js"></script>
    <script src="js/eBar.js"></script>
    <script src="js/moment.min.js"></script>
    <script src="js/ain.js"></script>
    <script src="js/tleBar.js"></script>
    <script type="text/javascript" src="js/ps.js" ></script> 
```

所以没有 rel="external" js/ps.js 似乎没有加载...位于两个页面上的脚本完全相同，但新页面也加载了 js/ps,js .. 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:57:57.360

不要使用**内联**Javascript（[在此处阅读原因](http://css.dzone.com/news/why-inline-css-and-javascript-)）调用函数。看起来您遇到的错误与您的文件尚未加载的事实有关，`personSearch.js`因此该功能可能不存在。使用 Chrome/Firebug JS 控制台检查函数是否已明确**定义**，然后创建另一个脚本，其中包含类似于以下内容的内容：

```
$(document).bind('pageinit',function () {
    $("#psClear").on('click',function(){
      testme();
     });
}); 
```

这将确保在将单击事件绑定到您的按钮之前，DOM 已加载并准备就绪。确保在您的脚本**之后**加载此`personSearch.js`脚本。

# regex - 正则表达式匹配：Scala 中的长字符串

> ID：11519986
> 
> 赞同：0
> 
> 时间：2012-07-17T09:48:30.263
> 
> 标签：regex, string, scala

我有一个非常长的内存字符串存储在一个`val response: String`看起来像

> HTTP/1.1 200 OK
> 服务器：Apache
> 其他：标头
> 
> <response>
> <xml>
> ---更多 XML---
> </xml>
> </response>
> 0

我想提取

> <响应>
> ...
> </响应>

字符串的一部分。到目前为止，我有这个：

```
"<response>.*?</response>".r findFirstIn response 
```

...但由于某种原因，Scala 返回 None。我确实想出了一种使用索引和切片函数的方法，但必须有一个使用正则表达式的简洁方法。有谁知道怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T10:02:02.523

首先，在处理 XML 响应时使用 XML 解析器可能是一个更好的主意。一开始可能看起来有点矫枉过正，但随着项目的发展，您很可能最终不得不解析更复杂的 XML 文档，而使用正则表达式比使用成熟的 XML 解析器要困难得多。

无论如何，这个正则表达式有效：

```
"(?s)<response>.*?</response>".r findFirstIn response 
```

`(?s)`设置[`DOTALL`标志](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Pattern.html)。

# java - testng - 如何分离测试和支持方法？

> ID：11519989
> 
> 赞同：1
> 
> 时间：2012-07-17T09:48:36.777
> 
> 标签：java, testng

我正在试验testng。我的目标是在几个类中有测试方法，并在一个单独的类中准备和总结一堆测试的“支持”方法。

另一个要求是，在测试套件中，必须为多个测试部分调用支持方法。例如，第一部分包含 testA 和 testB，第二部分包含 testC 和 testD。这将导致以下步骤：

支持1，测试A，测试B，支持2，支持1，测试C，测试D，支持2

我（部分）工作的第一种方法是用 注释所有方法`@Test`，使用组并定义组之间的依赖关系，例如测试方法依赖于组“setUp”，它是上面示例中的一个支持方法“support1”的组.

这种方法的问题是支持方法算作测试，因此生成的报告显示错误数量的“真实”测试。

下一个想法是使用`@BeforeGroups`and `@AfterGroups`，将支持的方法放在一个组中，并使用组依赖项。支持的方法不应再被视为测试。但我一开始就被困住了。例如我试过

```
@BeforeGroups (groups = {"setUp"}) 
```

对于类中的设置方法`Support`，以及

```
@Test(groups = { "TestA" }, dependsOnGroups = { "setUp" }) 
```

在“真正的”测试课上。这会导致以下（简化的）错误：

```
[testng] DependencyMap::Method "TestClass.testSomething()[...]" depends on nonexistent group "setUp" 
```

为什么组“setUp”不存在？我忽略了什么吗？

还是有另一种可行的方法？

谢谢你的帮助！

**编辑：** 测试是从 Ant 开始的，我使用这样的 testng.xml：

```
<test name="TestA">
    <groups>
        <run>
            <include name="setUp" />
            <include name="TestA"/>
            <include name="tearDown"/>
        </run>
    </groups>
    <classes>
        <class name="seleniumtest.test.technical.Support"/>
        <class name="seleniumtest.test.business.TestClassA"/>
    </classes>
</test>
<test name="TestB">
    <groups>
        <run>
            <include name="setUp" />
            <include name="TestB"/>
            <include name="tearDown"/>
        </run>
    </groups>
    <classes>
        <class name="seleniumtest.test.technical.Support"/>
        <class name="seleniumtest.test.business.TestClassB"/>
    </classes>
</test> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T11:29:38.317

我发现故障了！！

问题出在注释上

```
@Test(groups = { "TestA" }, dependsOnGroups = { "setUp" }) 
```

基本上你的错误信息是试图说没有@Test 方法与组名作为`setUp`!! 针对您的问题，解决方案是修改测试方法的注释，如下所示

```
 @Test(groups = { "TestA" }) 
```

并在支持方法中修改注解

```
 @BeforeGroups (groups = {"TestA"}) 
```

我用这个设置运行了一个示例

```
public class TestSupport {

    @BeforeGroups(groups = { "sample","sample1" })
    public void beforeTest() {
        System.out.println("Before test");
    }

    @AfterGroups(groups = { "sample","sample1" })
    public void afterTest() {
        System.out.println("after test");
    }

} 
```

和我的测试课一样

```
public class TestClassA {

    @Test(groups = { "sample" })
    public void superTestA() {
        System.out.println("This is the actual test");
    }

    @Test(groups = { "sample" })
    public void superTestB() {
        System.out.println("This is the another test under sample group");
    }

    @Test(groups = { "sample1" })
    public void superTest() {
        System.out.println("This is another test");
    }
} 
```

和我的 testng.xml 如下所示

```
<test name="sampletest" >
     <groups>
        <run>
            <include name="sample" />
            <include name="sample1" />

        </run>
    </groups>
    <classes>
        <class name="test.global.testng.TestClassA"/>
        <class name="test.global.testng.TestSupport"/>
    </classes>

  </test> 
```

现在这是测试的运行方式：`beforeGroups-> superTestA/superTestB ->afterGroups`并且`beforeGroups-> superTest -> afterGroups`关闭

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T14:02:19.520

我想我已经想出了我想要的解决方案。

我需要在支持类中分别使用`@BeforeTest`and`@AfterTest`而不是`@BeforeGroups`and ：`@AfterGroups`

```
@BeforeTest(groups = {"setUp"})
public void beforeTest() {[...]}

@AfterTest( groups = {"tearDown"})
public void afterTest() {[...]} 
```

在测试类中：

```
@Test(groups = { "TestA" })
public void testSomething() {[...]} 
```

`dependsOnGroups`就像巴顿的方法一样，它已经消失了。

与我的问题相比，testng.xml 没有变化。即**可以在 testng.xml 文件中配置测试**，而无需更改 java 代码。

此外，该解决方案**还消除了 BeforeGroups 方法的另一个问题**，至少正如 Patton 所假设的那样（@Patton 我并不是要冒犯你）。对于后者，使用多个测试组的测试不会按预期运行，因为该`beforeTest()`方法将在任何组之前运行。例如，如果您有以下测试（testng.xml 的摘录）：

```
 <groups>
        <run>
            <include name="TestA"/>
            <include name="TestB"/>
        </run>
    </groups> 
```

...执行的结果步骤是：
beforeTest()、TestA、beforeTest()、TestB、afterTest()。

将解决方案与 BeforeTest 一起使用，您将进行以下测试：

```
 <groups>
        <run>
            <include name="setUp" />
            <include name="TestA"/>
            <include name="TestB"/>
            <include name="tearDown"/>
        </run>
    </groups> 
```

...执行的结果步骤是：
setUp = beforeTest()、TestA、TestB、tearDown = afterTest()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-15T14:21:01.873

```
package com.test.MySample;

import org.testng.annotations.*; 

public class TestNGTest1 {    

    @BeforeTest   
    public void BeforeTest() {         
        System.out.println("@BeforeTest");
    }

    @BeforeClass    
    public void BeforeClass() {         
        System.out.println("@BeforeClass");
    }      

    @BeforeGroups  (groups = {"My group"}) 
    public void BeforeGroups() {       
        System.out.println("@BeforeGroups");
    }

    @BeforeGroups  (groups = {"My group1"}) 
    public void BeforeGroups1() {       
        System.out.println("@BeforeGroups1");
    }

    @AfterGroups  (groups = {"My group1"}) 
    public void AfterGroups1() {       
        System.out.println("@AfterGroups1");
    }

    @BeforeMethod    
    public void BeforeMethod() {         
        System.out.println("@BeforeMethod");     
    } 

    @Test(groups = {"My group"})     
    public void test1() {         
        System.out.println("test1");     
    } 

    @Test (groups = {"My group", "My group1"})    
    public void test2() {         
        System.out.println("test2");     
    }

    @AfterMethod    
    public void AfterMethod() {         
        System.out.println("@AfterMethod");     
    } 

    @AfterGroups  (groups = {"My group"}) 
    public void AfterGroups() {       
        System.out.println("@AfterGroups");
    }

    @AfterClass    
    public void AfterClass() {         
        System.out.println("@AfterClass");
    }  

    @AfterTest   
    public void AfterTest() {         
        System.out.println("@AfterTest");
    }
} 
```

# c# - 将字典绑定到 wpf 工具包图表

> ID：11519990
> 
> 赞同：1
> 
> 时间：2012-07-17T09:48:40.343
> 
> 标签：c#, .net, wpf

我必须在我的视图模型类上遵循字典

```
public class SpendingCategoriesViewModel
{
  public Dictionary<string, decimal> SpendingCategories = new Dictionary<string,decimal>
  {

        {"Petrol", 120.5m},

        {"Rent", 400},

        {"Food", 200}
  };
} 
```

和以下 XAML 代码

```
<Grid>
    <chartingToolkit:Chart Name="chartExpenses" Title="Expenses by Category" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
        <chartingToolkit:Chart.Series>
            <chartingToolkit:PieSeries Title="Category" ItemsSource="{Binding SpendingCategories}" IndependentValuePath="Key" DependentValuePath="Value">
            </chartingToolkit:PieSeries>
        </chartingToolkit:Chart.Series>
    </chartingToolkit:Chart>
</Grid> 
```

不显示任何数据。如果我在视图类中手动设置该系列的 ItemsSource，它确实会显示数据，所以我假设**ItemsSource="{Binding SpendingCategories}"**有问题，但我似乎看不到它。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:53:00.200

因为 Binding`SpendingCategories`必须是公共属性。

```
public Dictionary<string, decimal> SpendingCategories { get; private set; }

public SpendingCategoriesViewModel()
{
    SpendingCategories = new Dictionary<string,decimal>
    {   
        {"Petrol", 120.5m},
        {"Rent", 400},
        {"Food", 200}
    };
} 
```

# asp.net-mvc-3 - 编码为 utf 8 的 MVC 3 Razor 页面显示编码字符

> ID：11519992
> 
> 赞同：5
> 
> 时间：2012-07-17T09:48:43.190
> 
> 标签：asp.net-mvc-3, encoding, razor, utf-8

我有一个 VirtualPathProvider，它从我的数据库中获取源代码作为纯字符串并将其编码为 UTF8。

例如：

```
public override Stream Open()
{
  MemoryStream result = new MemoryStream();

  result = new MemoryStream(Encoding.UTF8.GetBytes(_sourceCode));

  return result;
} 
```

然后我有一个布局母版页，其字符集为 UTF 8

```
<meta charset="utf-8"> 
```

然后母版页调用`@RenderBody()`获取我的 VirtualPathProvider 页面并将其输出到浏览器。

问题是它正在输出带有编码字符的页面：

> wünschte 变成 wünschte

我究竟做错了什么？

**TLDR：**

我希望显示 wünschte 而不是 wünschte。数据库中的纯字符串是 wünschte，但是一旦它从内存流中进入我的页面，它就会变成 wünschte。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-03T14:28:52.743

作为一个今天在自己的`VirtualPathProvider`实现中苦苦挣扎的人，事实证明 Razor*真的*想要字节顺序标记。您可以通过调用来强制执行此操作`GetPreamble()`。

```
using System.Linq; // for Concat() because I am lazy

public override Stream Open()
{
    var template = Encoding.UTF8
        .GetBytes(this.Template);
    var buffer = Encoding.UTF8
        .GetPreamble()
        .Concat(template)
        .ToArray();
    return new MemoryStream(buffer);
} 
```

如果 BOM 不存在，Razor 似乎默认为当前代码页而不是 UTF8。以上为我修复了它。

在上面的示例中，您将`this.Template`在我的实现中替换`_sourceCode`为原始问题中的。

# java - 全屏可以显示多少个字符串

> ID：11519996
> 
> 赞同：0
> 
> 时间：2012-07-17T09:48:56.840
> 
> 标签：java, android

我有大字符串，我想拆分它。我使用下面的代码获得了屏幕宽度和高度，

```
DisplayMetrics metrics = new DisplayMetrics();
activity.getWindowManager().getDefaultDisplay().getMetrics(metrics);

screenHeight = metrics.heightPixels;
screenWidth = metrics.widthPixels; 
```

我想知道屏幕上要显示多少个字符。

如何计算？并拆分字符串。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:54:38.490

在 Swing / AWT Java 平台上，您可以使用[`FontMetrics`](http://docs.oracle.com/javase/7/docs/api/java/awt/FontMetrics.html)对象来测量您尝试显示的特定字符的宽度。

参考：

*   [如何计算字体的宽度？](https://stackoverflow.com/questions/1524855/how-to-calculate-the-fonts-width)

但是使用可以为您处理字符渲染和包装的东西可能会更简单。

在 Android 平台上，[Paint](http://developer.android.com/reference/android/graphics/Paint.html)类有很多方法可以帮助你做这种事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:16:43.357

我想如果你将 width 属性设置为 wrapcontent 而不是字符串会自动拆分并显示在下一行。

使用这个属性

```
android:layout_width="wrap_content"
            android:layout_height="wrap_content" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T10:02:30.997

使用子字符串方法

`String substring(int startIndex, int endIndex)`

每行拆分字符串并将它们存储在字符串数组中

```
String originalString=" ....some long text " ;
String stringsByLine[]= new String(screenHeight);
int i,j=0;
for ( i = 0; j<originalString.length;i++,j++){
  stringsByLine[i]=originalString.substring(j,j+screenWidth);
  j+=screenWidth;
} 
```

自己没有尝试过，但这个逻辑应该有效。:-)

# c# - 线程和 UI C# 之间的共享变量

> ID：11519998
> 
> 赞同：4
> 
> 时间：2012-07-17T09:49:05.750
> 
> 标签：c#, windows, multithreading

我可以在两个线程之间安全地共享这个“状态”对象吗？

```
 private bool status = false;

    private void uiNewThread_bootloaderStartIdSetupAuto()
    {
        while (status)
            ;
    } 
```

上面是将从下面的 UI 启动的新线程：

```
 private void uiBtnBootloaderStartIdSetupAuto_Click(object sender, EventArgs e)
    {
        if (MessageBox.Show("ID will be setup starting from 1 to 16\. \n\nAfter pressing 'YES', press the orange button one-by-one on the nodes.\nThe first pressed node will have number 1, the next number 2, and so on... \n\nWhen done, hit DONE button.", "ID setup", MessageBoxButtons.YesNo) == DialogResult.Yes)
        {
            status = true;
            Thread transmitConfig = new Thread(new ThreadStart(uiNewThread_bootloaderStartIdSetupAuto)); //close port in new thread to avoid 
            transmitConfig.Start();
        }
        else
        {
            Log(LogMsgType.Normal, "User cancelled");
            status = false;            
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T09:51:00.730

编译器或 CPU 进行的缓存或重新排序等优化可能会破坏您的代码。您应该声明该字段`volatile`以防止这种情况：

```
private volatile bool status = false; 
```

可能出错的一个例子是，如果两个线程在不同的内核上运行，则 的值`status`可能会被运行轮询线程的内核缓存在 CPU 寄存器中，因此永远不会看到另一个线程更新的值。

尝试在发布模式下构建您的应用程序，您应该会看到这种效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:54:48.737

你最好简单地锁定变量，例如

```
private static readonly object _lock = new Object();

....

lock(_lock){
//access to boolean variable etc.
} 
```

另一种可能性是将 bool 包装在 Lazy 中，并且对内部值的访问是线程安全的。

如果您想使用无锁机制来读取和更新值，您可以考虑使用 Interlocked 类中的方法。

这里的信息：

[System.Threading.Interlocked](http://msdn.microsoft.com/en-us/library/system.threading.interlocked.aspx)