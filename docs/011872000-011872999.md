# StackOverflow 问答 11872000-11872999

# java - 如何跨安装在同一个 WebSphere Application Server 上的应用程序共享 EJB 本地接口？

> ID：11872001
> 
> 赞同：1
> 
> 时间：2012-08-08T19:43:57.453
> 
> 标签：java, ejb, websphere, local

我在使用 WebSphere Application Server 7 时遇到问题。我在 WAS A 和 B 上安装了 2 个应用程序。B 想要使用 A 的本地 EJB 接口。

包含本地 EJB 接口的模块是 A 的 EAR 的一部分。

我尝试做的是在我的 B 部署中包含对模块的引用。我发现的问题是，在查找界面时：

```
InitialContext ic = new InitialContext();
//succeeds
Object obj = ic.lookup("ejblocal:sample.MyEJBLocal");
//fails with ClassCastException
MyEJBLocal localBean = (MyEJBLocal) obj; 
```

程序崩溃是因为接口的类名前面有随机字母，例如

```
Cannot cast type SL07SMyEJBLocal to MyEJBLocal these types are incompatible. 
```

我尝试使用 WAS 并且通过将服务器的类加载器设置从多个更改为单个，我能够使演员成功。

问 - 我真的不喜欢为我的服务器上的所有应用程序使用一个类加载器的想法 - 是否有另一种方法可以让 EJB 本地接口在应用程序 A 和 B 之间共享？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:39:47.230

[请参阅 InfoCenter 的EJB 模块](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/topic/com.ibm.websphere.nd.multiplatform.doc/ae/cejb_emod.html)模块的“本地客户端视图”部分（我已链接到 8.5 InfoCenter，但建议适用于所有版本）。基本上，为了共享一个本地接口，您必须确保两个应用程序具有相同类的视图。最常见的方法是使用与服务器相关的共享库。请仔细注意跨应用程序共享本地 EJB 的其他注意事项。

# java - “突出显示” JTable 中的特定行

> ID：11872003
> 
> 赞同：0
> 
> 时间：2012-08-08T19:44:11.450
> 
> 标签：java, swing, jtable, highlight, jtabbedpane

每当单元格的内容与用户的输入匹配时，我想突出显示 JTable 中的特定行。以下代码是我迄今为止所拥有的：

```
JTable table = new JTable(model) {
    public Component prepareRenderer(
            TableCellRenderer renderer, int row,
            int column) {
        Component c = super.prepareRenderer(renderer,
                row, column);
        if (!isRowSelected(row) ) {
            c.setBackground((hashMapcontainer
                    .containsKey(row)) ? Color.GREEN
                    : getBackground());
        }
        return c;
    }
    @Override
    public boolean isCellEditable(int row, int column) {
        return false;
    }
}; 
```

注意：`hashMapcontainer`是一个`hashmap`在源文件中全局作用域的。

现在这在某种程度上有效，但是，我将其添加`JTable`到 a`JTabbedPane`中的 a 中`JFrame`。JTables 是在整个程序运行时动态创建的。但是，该`prepareRenderer`方法会突出显示所有创建的 JTable 中的所有特定单元格。

如何在所有 JTable 中保留单元格以保留自己特定的突出显示单元格，而不是让所有 JTable 中的每个单元格都具有完全相同的突出显示单元格？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T20:42:55.087

渲染器是“橡皮图章”。这基本上意味着他们将以前的设置带到下一个单元格。

您需要做的是提供“默认”行为

```
if (!isRowSelected(row) ) {
    c.setBackground((hashMapcontainer
        .containsKey(row)) ? Color.GREEN
        : getBackground());
} else {

    // Define the default background color
    // Don't forget to take into the selection state

} 
```

虽然我个人认为`prepareRenderer`在这种情况下可能是一个公平的解决方案，但您确实应该探索提供基线渲染器的可能性。要做到这一点需要做很多工作，但具有可移植性（如果您更改表实现）以及允许其他人有机会定义给定单元格的突出显示规则的优势，而您基本上只是走了并覆盖了这些规则， 恕我直言。

我还建议看一下[JXTable](http://swingx.java.net/)，因为它具有内置[突出显示功能](http://www.javalobby.org/java/forums/m91834162.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T11:20:28.093

通常，覆盖基本 Swing 类的方法是一个坏主意。推荐的方法是创建一个`Jcomponent`实现`TableCellRenderer`并将其应用于表的`setDefaultRenderer()`. 请注意，默认情况下，JTable 为 Object、Number 和 Boolean 类型提供其中的 3 个。通常，渲染器看起来像这样：

```
public class MyRenderer extends JLable, implements TableCellRenderer{
    @Override
    public Component getTableCellRendererComponent(JTable table, Object value, 
         boolean isSelected, boolean hasFocus, int row, int column) {
    // Set up default state here 
    c.setBackground(Color.white);
    c.setForeground(Color.black);
    // ...
    if (!isRowSelected(row) ) {
        c.setBackground((hashMapcontainer
                .containsKey(row)) ? Color.GREEN
                : getBackground());
    }
    return c;
} 
```

这为您提供了一个可重用的组件，而不是在您创建它的每个地方都需要扩展 JTable。至于在所有表中选择相同的单元格，这是由于访问全局状态`isRowSelected`而`hashMapContainer`不是每个实例状态。所有`JComponent`s 都有 `getClientProperty`和`putClientProperty`。这些允许您将自己的状态对象附加到`JTable`. 然后你的`isRowSelected`become `isRowSelected(table, row)`，它只是调用：

```
MyObject myObj = (MyObject)table.getClientProperty("MySelectionProperty");
myObj.isRowSelected(row); 
```

同样，`hashMapContainer`也可以从表中检索：

```
MyHashContainer myHash = (MyHash)table.getClientProperty("MyHashContainer"); 
```

**更新：**

这对于动态生成的表几乎相同。表创建将如下所示：

```
JTable t = new JTable();
// other typical table setup, t.setModel(...); etc
t.setDefaultRenderer(String.class, myRenderer);
t.putClientProperty("MySelectionProperty", new MyObject());
t.putClientProperty("MyHashContainer", new MyHashContainer()); 
```

值得注意的是，只要渲染器不携带状态，就不需要为每个表创建一个实例。我通常会创建一个并将其用于我的所有表格。

这是上面渲染器的更新，它不使用全局状态，而是查看表中的属性：

```
public class MyRenderer extends JLable, implements TableCellRenderer{
    @Override
    public Component getTableCellRendererComponent(JTable table, Object value, 
        boolean isSelected, boolean hasFocus, int row, int column) {

        // Pull hashMapContainer from the per-table client properties
        MyHashContainer hashMapcontainer = (MyHashContainer)table.getClientProperty("MyHashContainer");

        // Set defaults as above            

        if (!isRowSelected(table, row) ) {
            // Same as above
        }
        return c;
    }
    // Private method to check for row selection
    private boolean isRowSelected(JTable t, int row) {
        int[] selectedRows = table.getSelectedRows();
        for (int i = 0; i < selectedRows.length; i++) {
            if (selectedRows[i] == row) {
                return true;
            }
         }
         return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-18T12:53:18.383

我希望我的 JTable 使用突出显示颜色显示更新的行，以便轻松查看正在更新的行。我就是这样完成的。该解决方案被实现为传统 TableCellRenderer 的包装器。像这样使用它：

```
RowHighlighter highlighter = new RowHighlighter(table);
table.setDefaultRenderer(Date.class, highlighter.wrap(new DefaultTableCellRenderer())); 
```

STEPS 和 PERIOD 允许配置（我猜应该是一个参数）高光如何淡入背景。在此示例中，它将在 2 秒内经过 50 步淡化为单元格的背景颜色。这也保留了真实渲染器的背景颜色，包括当前是否选择了行。

```
import java.awt.Color;
import java.awt.Component;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;

import javax.swing.JTable;
import javax.swing.Timer;
import javax.swing.event.TableModelEvent;
import javax.swing.event.TableModelListener;
import javax.swing.table.TableCellRenderer;

class RowHighlighter implements TableModelListener, ActionListener {

    private static int STEPS = 50;
    private static int PERIOD = 2000;

    private Map<Integer, Integer> rowHighlights = new HashMap<>();
    private JTable table;

    public RowHighlighter(JTable table) {
        this.table = table;
        table.getModel().addTableModelListener(this);
        Timer timer = new Timer(PERIOD/STEPS, this);
        timer.start();
    }

    @Override
    public void tableChanged(TableModelEvent e) {
        int first = e.getFirstRow();
        int last = e.getLastRow();
        for (int i=first; i<=last; i++) {
            rowHighlights.put(i, STEPS);
        }
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        if (rowHighlights.size() == 0)
            return;
        Iterator<Map.Entry<Integer, Integer>> it = rowHighlights.entrySet().iterator();
        while (it.hasNext()) {
            Map.Entry<Integer, Integer> entry = it.next();
            int v = entry.getValue();
            if (v > 1) {
                entry.setValue(v - 1);
            } else {
                it.remove();
            }
        }
        table.repaint();
    }

    public TableCellRenderer wrap(TableCellRenderer delegate) {
        return new HighlightingTableCellRenderer(rowHighlights, delegate);
    }

    private static class HighlightingTableCellRenderer implements TableCellRenderer {

        private Map<Integer, Integer> rowMap;
        private TableCellRenderer delegate;

        public HighlightingTableCellRenderer(Map<Integer, Integer> rowMap, TableCellRenderer delegate) {
            this.rowMap = rowMap;
            this.delegate = delegate;
        }

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus,
                int row, int column) {
            Component c = delegate.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
            Integer v = rowMap.get(row);
            if (v != null) {
                Color background = c.getBackground();
                Color highlight = getColor(v, Color.PINK, background);
                c.setBackground(highlight);
            }
            return c;
        }

        private Color getColor(int n, Color from, Color to) {
            float p = ((float)n)/STEPS;

            return new Color((int)(from.getRed() * p + to.getRed() * (1-p)),
                    (int)(from.getGreen() * p + to.getGreen() * (1-p)),
                    (int)(from.getBlue() * p + to.getBlue() * (1-p)));
        }

    }

} 
```

# c++ - 我的 Release .exe 无法在其他 PC 上运行

> ID：11872005
> 
> 赞同：1
> 
> 时间：2012-08-08T19:44:27.523
> 
> 标签：c++

我有一个用 Visual Studio 2008 C++ 制作的小程序，它基本上创建和修改简单的文本文件。我不会在这里复制代码，但如果有人想看看：www.joggingbenefits.net/hcode.txt

我的问题是 - 我想用这个代码制作一个 .exe，它可以在其他不一定安装 Visual Studio 或 redist 包的 Windows PC 上运行。

到目前为止我已经尝试过：

*   将项目配置从“调试”更改为“发布”
*   在所有 4 个提供的运行时库之间切换（在代码生成下）
*   将每个生成的 .exe 保存在我的“发布目录”中
*   尝试在没有安装 Visual Studio 的 PC 上运行其中的每一个，但它们都不起作用……它只运行了大约半秒，然后就消失了。

我不确定我做错了什么，我必须在这里遗漏一些非常重要的东西......回顾一下：我确实将编译模式更改为发布，并且我确实尝试更改运行时库，静态/动态库，但没有生成的 exe 可以运行...

PS - 这些程序都以管理员身份运行，并且禁用了防病毒等，所以不是这样。**另外，我没有链接到任何 DLL，所有包含的库都是标准的。**

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:49:08.807

在非工作系统上使用 DependencyWalker 打开 .exe。它将显示缺少哪些 DLL（通常是一些 VS2008 运行时）。

此外，在错误下的 Windows 事件管理器中，当您尝试运行应用程序时，您还应该得到错误描述，关于它错过了什么。当你知道你丢失了哪个文件时，你可以用谷歌搜索它，然后检查它的 Redistributable 内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:12:43.590

尝试访问代码生成属性页面，并确保运行时库读取 /MT 或 /MTd 而没有其他内容（尤其是 /clr）。对项目进行干净的构建，并确保输出状态 /MTd 和 IDE 没有注入任何其他冲突标志。我对 VS2010 没有太多经验，但这就是我在 2008 年需要做的所有事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T19:51:13.393

您已经创建了一个命令行程序。当 Windows 打开这个程序时，它会为输入和输出创建一个命令窗口，当程序完成时它会立即关闭该窗口。

如果您打开自己的命令窗口并从那里运行它，程序完成时该窗口不会关闭。

如果您仍希望程序直接运行但查看输出，则可以在程序末尾添加暂停。

```
cout << "Please type any key to finish" << endl;
char ch;
cin >> ch; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T20:31:01.673

除了其他人提到的 DependencyWalker 提示（值得先做），我还建议在目标 PC 上临时安装[适用于 Windows 的调试工具](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)（这只是一个小安装）。运行`windbg`并选择`File -> Open Executable`然后按 F5 运行。当应用程序崩溃时，您会从错误消息和调用堆栈方面得到更有意义的解释，说明它哪里出错了。我的猜测是缺少 dll，或者可能与您自己系统上的不同版本的 dll 发生冲突。

您可以使用 DependencyWalker 做的另一件有用的事情是在目标 PC 上运行它并选择`Profile`选项，这将在搜索 dll 时为您提供大量信息。

请注意，这两种方法都需要您在目标 PC 上安装一些东西，但这只是暂时的，如果不这样做，您只会猜测它为什么会出错。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-05-16T10:39:34.783

尝试在可执行文件不起作用的机器上安装“Microsoft Visual C++ 2010 Redistributable Package”。

# java - 如何使用 Flyway 处理新的中间迁移

> ID：11872011
> 
> 赞同：1
> 
> 时间：2012-08-08T19:44:45.567
> 
> 标签：java, database, flyway

我最近才发现[Flyway](http://flywaydb.org)，在阅读和搜索它时，我遇到了以下博客文章：[数据库模式演变与模式版本控制](http://oschmi.blogspot.it/2012/02/database-schema-evolution-versus-schema.html)。

所以我想知道：

*   它所说的是否仍然正确（甚至在当时是正确的）
*   在使用flyway时应该如何处理这种情况。

编辑：

常见问题解答简要讨论了[这一点](http://flywaydb.org/documentation/faq.html#What_is_the_best_strategy_for_dealing_with_hot_fixes?)（没有为上述问题提供解决方案）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T21:03:47.887

关于 dbdeploy 我不能说太多，但关于 flyway 的陈述是正确的。Flyway 对处理 SQL 脚本非常严格：

*   每个脚本仅部署一次，并且版本号必须高于所有先前部署的脚本（因此无法追溯历史）
*   已部署的脚本无法再修改

这种严格性并不是一件坏事，但不支持开箱即用的场景，比如有几个引入数据库修改的代码分支。

我们在这种情况下使用flyway，但我们必须做一些变通方法。首先，我们将所有 SQL 脚本分为两组：已经投入生产的脚本和尚未投入生产的脚本。所有不在生产中的脚本（无论它们在哪个分支上）都可以随时修改。为了支持这一点，我们以一种可以根据需要经常执行的方式编写脚本。其次，我们干预 flyway 的簿记，该簿记在名为 的表中完成`SCHEMA_VERSION`。在每次飞行路线迁移之前，我们都会删除所有尚未投入​​生产的条目。在开发系统上启动迁移时，flyway 每次都会执行所有新脚本。但是，在生产系统上，新脚本在上线时只执行一次。

# c# - ASP.NET Web API：默认 ValuesController 的 Post 方法在 RC 版本中不起作用

> ID：11872012
> 
> 赞同：0
> 
> 时间：2012-08-08T19:44:46.137
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, asp.net-web-api

创建默认的 ASP.NET Web Api 项目时，默认的 ValuesController 具有如下的 post 方法：

```
// POST api/values
public void Post(string value)
{
} 
```

我试图通过 HTTP 请求从 Filder 测试这个 POST 方法：

```
POST /api/values

User-Agent: Fiddler
Host: localhost
Content-Type: application/x-www-form-urlencoded

value=abc 
```

这让我很惊讶，输入参数**值**是**null**，而不是**abc**。它肯定在 beta 版本中工作，但在 RC 版本中，我做错了什么或者它不再像这样工作了吗？

当然，我们还有另一种解决方法，方法是在下面创建强类型对象：

```
public Class TestDto
{
    public string Value { get; set; }
}

public void Post(TestDto testDto)
{  
} 
```

或者使用 Json。

但我想对此有更多的了解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:23:05.627

(1) 默认情况下，简单类型取自 URI。要从请求正文中读取简单类型，请将 [FromBody] 属性添加到参数中。（项目模板的已知问题。在 RTM 版本中，项目模板将在 ValuesController 中包含此问题。）

(2) 对于formurl-encoded，发送一个简单类型为“=abc”而不是“value=abc”；请参阅[http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-1#sending_simple_types](http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-1#sending_simple_types)。

# json - 如何将 JSON 持久保存到具有嵌套成员的 Grails 域对象中

> ID：11872013
> 
> 赞同：2
> 
> 时间：2012-08-08T19:44:47.853
> 
> 标签：json, grails

给定这些域类：

```
class Person {
    Long id
    String name

    static hasMany = [aliases: PersonAlias]
}

class PersonAlias {
    Person person
    Long id
    String name
} 
```

我尝试通过 JSON 土地进行直接的往返加载/保存：

```
Person p = Person.get(20005353);
def json = p as JSON
def str = json as String
def map = JSON.parse(str)
p.properties = map
p.save(flush:true) 
```

产生这个 JSON

```
{
  "id": 20005353,
  "name": "John Smith",
  "class": "Person",
  "aliases":
  [
    {
      "class": "PersonAlias",
      "id": 99,
      "name": "J. Smith"
    }
  ]
} 
```

并因此错误而失败：

> grails.validation.ValidationErrors：1 个错误字段“别名”上的对象“heavymeta.Person”中的字段错误：拒绝值 [[]]；代码 [typeMismatch.heavymeta.Person.aliases,typeMismatch.aliases,typeMismatch.java.util.Set,typeMismatch]; 参数 [org.springframework.context.support.DefaultMessageSourceResolvable: 代码 [heavymeta.Person.aliases,aliases]; 论据 []; 默认消息[别名]]；默认消息 [无法将类型“org.codehaus.groovy.grails.web.json.JSONArray”的属性值转换为属性“别名”所需的类型“java.util.Set”；嵌套异常是 java.lang.IllegalStateException：无法将类型 [java.util.LinkedHashMap] 的值转换为属性“别名 [0]”所需的类型 [heavymeta.PersonAlias]：找不到匹配的编辑器或转换策略]

为什么这会失败，有没有办法让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:51:28.650

我可以给你一个小建议（=。检查`params`调试模式`update`（如果你还没有为在控制台中运行的域类生成视图和控制器`generate-all Person`）。看看`params.aliases`你会发现它是 ids 列表。试试相同的。

# windows - 用户帐户控制是否停留在 Windows 中？

> ID：11872015
> 
> 赞同：0
> 
> 时间：2012-08-08T19:44:49.903
> 
> 标签：windows, manifest, uac

我正在试验一个名为“update.exe”的更新程序，在过去的 10 年里，它只是从映射的网络驱动器复制更改的文件。自从 Vista 发布以来已经有一段时间了，但最终尝试解决 UAC 似乎是谨慎的。

我想做的是在“正常”模式下运行 update.exe，如果检测到更改，则在“提升”模式下重新启动程序。我认为这会奏效，我的问题与此无关。第一步是在非提升模式下运行 update.exe（Windows 会自动提升它，因为它被称为“update.exe”）

所以我注入了一个自定义清单文件，它只是在最高可用级别上运行。在那个级别，update.exe 无法复制任何文件。因此，我试图对此尽可能小心，因此我回滚了对清单的更改并重建了程序。

现在，即使我还原了清单，update.exe 仍然不会尝试在提升模式下运行。

所以，我的问题是，Windows 中是否有一些东西可以缓存哪些文件正在请求 UAC，我如何刷新它以便程序可以像以前一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T03:42:23.890

Windows 缓存是*“需要的海拔高度”*。重新启动将清除它（或更改文件名）。

# python - Python 在 Tkinter GUI 画布中附加文本

> ID：11872016
> 
> 赞同：2
> 
> 时间：2012-08-08T19:45:04.303
> 
> 标签：python, user-interface, tkinter

我试图弄清楚将文本附加到 tkinter 对象。我总共有 64 个文本对象。我将文本分配给对象，如下所示：

```
self.canvas.itemconfig(self.TextKeys[3], text = "Image") 
```

但在我想做的情况下：

```
self.canvas.itemconfig(self.TextKeys[3], text = "Comm") 
```

如何添加文本而不是替换它？我遇到的另一个问题是画布对象上的空间量是有限的：![在此处输入图像描述](../Images/1bcfd1434a318f97ae2cad9d1fa8d4f5.png)

任何意见/建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T21:03:39.930

您可以使用[insert](http://effbot.org/tkinterbook/canvas.htm#Tkinter.Canvas.insert-method) canvas 方法将某些内容插入到字符串对象中。由于您要追加，请使用索引“end”，例如：

```
self.canvas.insert(self.TextKeys[3], "end", "this text will be appended") 
```

我不明白你关于空间有限的问题。项目占用的空间量可由您的代码配置。

# sql - 在文本编辑器中进行正则表达式搜索以查找条目

> ID：11872020
> 
> 赞同：2
> 
> 时间：2012-08-08T19:45:31.097
> 
> 标签：sql, regex, textwrangler

我正在寻找一个正则表达式来从 sql 中删除注释行。所有评论都以“COMMENT ON”开头（显然），但可能往往不止一行。我能够想出一个表达式来删除单行，但我正在为多行而苦苦挣扎。我要删除的典型条目如下所示：

```
COMMENT ON TABLE account_heading IS $$
This table holds the account headings in the system.  Each account must belong 
to a heading, and a heading can belong to another heading.  In this way it is 
possible to nest accounts for reporting purposes.$$; 
```

所以我需要的是一个正则表达式，它遵循多行直到它看到一个分号。

我想出了这个，它将搜索到第二行并停在双美元（$$）处。我昨天刚开始使用 RegEx，如果这绝对是完全错误的，请原谅我（我确信它是）：

```
^COMMENT ([^\n\r]+)[\n\r]([\$;\n\r]+) 
```

我在 Mac 上使用 Grep 选项在 TextWrangler 中执行此操作。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:04:03.957

也许类似`COMMENT\sON.*?\$\$;`- 如果您能够将编辑器设置为匹配多行（通常通过指定`s`标志），它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:07:24.837

好吧，我不太了解 SQL，但是如果你想要 '$$' 之间的内容，只需使用：

```
\${2}[^\${2}]*\${2}; 
```

如果您想要“IS”字之后的所有内容：

```
COMMENT .*? IS ([^;]*) 
```

匹配任何不是分号的内容（获取第一组，而不是匹配项）。

# c# - 如何在winform中刷新wpf elementhost

> ID：11872025
> 
> 赞同：1
> 
> 时间：2012-08-08T19:45:43.333
> 
> 标签：c#, wpf

当我的 usercontrol(WindowScreen) 首次加载时，我的 elementhost 显示正确。当我实例化用户控件并传入不同的 id 时，elementhost 不会更新。这是有原因的还是有办法解决这个问题？

这是我的代码。

WindowScreen.cs——winform：

```
public partial class WindowScreen : UserControl
{
    private WindowView _windowView;
    private WindowViewModel _windowViewModel = null;

    public WindowScreen(int id)
    {
        InitializeComponent();

        elementHost.Child = this.elementHost1;
        _windowViewModel = new WindowViewModel();
        _windowView = (WindowView) this.elementHost.Child;
        //_windowViewModel.LoadTypes(123); --- first load
                  _windowViewModel.LoadTypes(id); --- pass in parameter
        _windowView.DataContext = _windowViewModel;
    }
} 
```

TestScreen.cs——winform：

```
public partial class TestScreen : UserControl
{
    public TestScreen()
    {
        InitializeComponent();  
    }

    private void button1_Click(object sender, EventArgs e)
    {
        WindowScreen ws = new WindowScreen(298);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:56:47.683

当你调用这个时：

```
WindowScreen ws = new WindowScreen(298); 
```

您正在创建一个新的`WindowScreen`，但从未将其设置为在您的`TestScreen`控件中使用。你需要`WindowScreen`用这个覆盖当前 - 比如：

```
// This needs to be the appropriate/correct variable
this.windowScreen1 = new WindowScreen(298); 
```

# macos - 为什么 Core Data SQLite 存储不能从 OS X 10.8 向后兼容到 10.4？

> ID：11872027
> 
> 赞同：1
> 
> 时间：2012-08-08T19:45:52.533
> 
> 标签：macos, core-data, sqlite, osx-mountain-lion, osx-tiger

`NSPersistentStoreInvalidTypeError`如果我的应用程序在 Mountain Lion (SQLite 3.7.12) 上创建了一个新的核心数据存储，则同一应用程序在尝试在 Tiger (SQLite 3.1.3) 上打开文件时会收到错误消息。在 Tiger Mac 上运行`sqlite3`命令行工具在打开数据库时不会产生任何错误，但是 ".dump" 命令显示 SQLite 认为它是空的。

但是，如果数据库是在 Tiger 上创建的，则可以在 Mountain Lion 上进行编辑，然后在 Tiger 上再次进行编辑，没有任何问题。

Mountain Lion 中是否发生了一些变化，以至于新创建的持久性存储不再应该向后兼容？或者是否有我可以启用的设置以便它们启用？据我所知，我没有使用任何较新的 SQLite 功能，例如 3.1.3 中没有的预写日志记录。此外，这不是在 Lion 上创建的数据库的问题。

更新：[SQLite 更改历史](http://www.sqlite.org/changes.html)显示版本 3.7.10 中存在文件格式更改。您应该能够设置[PRAGMA legacy_file_format=ON](http://www.sqlite.org/pragma.html#pragma_legacy_file_format)：

> 当这个标志打开时，新的 SQLite 数据库将以一种文件格式创建，该文件格式可由所有 SQLite 版本（回到 3.0.0）读写。

这适用于我`sqlite3`直接使用。但是，当我通过`NSSQLitePragmasOption`选项设置它时，`NSPersistentStoreCoordinator`它似乎被忽略了：`sqlite3`在 Tiger 上再次将数据库视为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:53:51.787

首先，术语问题。根据[Wikipedia](http://en.wikipedia.org/wiki/Forward_compatibility)的说法，我相信您在这里谈论的问题是`forward compatibility`：“前向兼容性旨在让设计能够优雅地接受为其后续版本设计的输入。” 在这种情况下，与 OS X 10.4 一起发布的 sqlite3 (3.1.3) 版本是否能够处理 OS X 10.8 中更新版本的 sqlite3 (3.7.12) 创建的磁盘数据格式？

根据[sqlite3 文档](http://www.sqlite.org/formatchng.html)，sqlite3 不承诺磁盘格式将完全向前兼容，仅在限制范围内向后兼容，即新版本可以读取旧版本生成的数据库。仅使用 shell 就可以通过一个简单的数据库创建示例来简单地演示`sqlite`，虽然 10.4 版本创建的数据库可以被 10.8 版本读取，但反之则不然。碰巧我有一台 10.4 机器（ppc），它恰好有一个最新版本的 sqlite3 以及 Apple 提供的系统版本：

```
$ /macports/bin/sqlite3 -version
3.7.13 2012-06-11 02:05:22 f5b5a13f7394dc143aa136f1d4faba6839eaa6dc
$ /macports/bin/sqlite3 test.db <<EOF
>      BEGIN TRANSACTION;
>      CREATE TABLE t1 (t1key INTEGER
>                   PRIMARY KEY,data TEXT,num double,timeEnter DATE);
>      INSERT INTO "t1" VALUES(1, 'This is sample data', 3, NULL);
>      INSERT INTO "t1" VALUES(2, 'More sample data', 6, NULL);
>      INSERT INTO "t1" VALUES(3, 'And a little more', 9, NULL);
>      COMMIT;
> EOF
$ /macports/bin/sqlite3 test.db  "select * from t1 limit 2";
1|This is sample data|3.0|
2|More sample data|6.0|
$ /usr/bin/sqlite3 test.db  "select * from t1 limit 2";
SQL error: unsupported file format
$ /usr/bin/sqlite3 -version
3.1.3 
```

如果数据库是在 10.8 上创建然后移动到 10.4，也会发生同样的事情。当使用 10.7 版本的 sqlite3 (3.7.7) 运行相同的测试时，10.4 版本*能够*读取数据库文件。我认为这些格式一直保持前向兼容已经很幸运了。看来现在运气已经用完了。除非 Apple 在某处保证 CoreData SQL 数据库在这些 OS X 版本范围内向前兼容，否则您可能需要在应用程序中处理这种兼容性，例如，通过跨平台转储和重新创建数据库版本。

# python - Django/Python 错误：配置不当；中间件模块未定义

> ID：11872029
> 
> 赞同：1
> 
> 时间：2012-08-08T19:45:55.600
> 
> 标签：python, django

我是 Python/Django 的新手。在过去的几天里，我尝试安装一个 Web 应用程序。安装似乎很好，但是当我访问该网站时，它给出了一个错误：`"500 Internal Server Error"`文件`error.log`如下。

```
[Wed Aug 08 15:34:37 2012] [error] [client 192.168.0.10] mod_wsgi (pid=3554): Exception occurred processing WSGI script '/home/forum/forum.wsgi'.
    [Wed Aug 08 15:34:37 2012] [error] [client 192.168.0.10] Traceback (most recent call last):
    [Wed Aug 08 15:34:37 2012] [error] [client 192.168.0.10]   File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/core/handlers/wsgi.py", line 219, in __call__
    [Wed Aug 08 15:34:37 2012] [error] [client 192.168.0.10]     self.load_middleware()
    [Wed Aug 08 15:34:37 2012] [error] [client 192.168.0.10]   File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/core/handlers/base.py", line 51, in load_middleware
    [Wed Aug 08 15:34:37 2012] [error] [client 192.168.0.10]     raise exceptions.ImproperlyConfigured('Middleware module "%s" does not define a "%s" class' % (mw_module, mw_classname))
    [Wed Aug 08 15:34:37 2012] [error] [client 192.168.0.10] ImproperlyConfigured: Middleware module "django.middleware.csrf" does not define a "CsrfResponseMiddleware" class
    [Wed Aug 08 15:34:37 2012] [error] [client 192.168.0.10] mod_wsgi (pid=3554): Exception occurred processing WSGI script '/home/forum/forum.wsgi'.
    [Wed Aug 08 15:34:37 2012] [error] [client 192.168.0.10] Traceback (most recent call last):
    [Wed Aug 08 15:34:37 2012] [error] [client 192.168.0.10]   File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/core/handlers/wsgi.py", line 219, in __call__
    [Wed Aug 08 15:34:37 2012] [error] [client 192.168.0.10]     self.load_middleware()
    [Wed Aug 08 15:34:37 2012] [error] [client 192.168.0.10]   File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/core/handlers/base.py", line 51, in load_middleware
    [Wed Aug 08 15:34:37 2012] [error] [client 192.168.0.10]     raise exceptions.ImproperlyConfigured('Middleware module "%s" does not define a "%s" class' % (mw_module, mw_classname))
    [Wed Aug 08 15:34:37 2012] [error] [client 192.168.0.10] ImproperlyConfigured: Middleware module "django.middleware.csrf" does not define a "CsrfResponseMiddleware" class 
```

你有什么建议吗？谢谢

**更新：**

在删除有关`CsrfViewMiddlewares`Fedor Gogolev 提到的行之后。它给出了不同的错误日志：

```
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10] mod_wsgi (pid=3914): Exception occurred processing WSGI script '/home/forum/forum.wsgi'.
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10] Traceback (most recent call last):
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]   File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/core/handlers/wsgi.py", line 219, in __call__
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]     self.load_middleware()
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]   File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/core/handlers/base.py", line 45, in load_middleware
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]     mod = import_module(mw_module)
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]   File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/utils/importlib.py", line 35, in import_module
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]     __import__(name)
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]   File "/home/forum/forum/middleware/extended_user.py", line 4, in <module>
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]     from forum.views.auth import forward_suspended_user
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]   File "/home/forum/forum/views/__init__.py", line 1, in <module>
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]     import readers
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]   File "/home/forum/forum/views/readers.py", line 20, in <module>
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]     from forum.utils import pagination
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]   File "/home/forum/forum/utils/pagination.py", line 173, in <module>
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]     page_numbers_template = template.loader.get_template('paginator/page_numbers.html')
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]   File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/template/loader.py", line 145, in get_template
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]     template, origin = find_template(template_name)
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]   File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/template/loader.py", line 134, in find_template
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]     source, display_name = loader(name, dirs)
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]   File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/template/loader.py", line 42, in __call__
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]     return self.load_template(template_name, template_dirs)
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]   File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/template/loaders/cached.py", line 46, in load_template
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]     template, origin = self.find_template(template_name, template_dirs)
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]   File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/template/loaders/cached.py", line 31, in find_template
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]     for loader in self.loaders:
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]   File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/template/loaders/cached.py", line 26, in loaders
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]     cached_loaders.append(find_template_loader(loader))
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]   File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/template/loader.py", line 101, in find_template_loader
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]     raise ImproperlyConfigured('Error importing template source loader %s: "%s"' % (loader, e))
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10] ImproperlyConfigured: Error importing template source loader django.template.loaders.filesystem.load_template_source: "'module' object has no attribute 'load_template_source'"
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10] mod_wsgi (pid=3914): Exception occurred processing WSGI script '/home/forum/forum.wsgi'.
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10] Traceback (most recent call last):
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]   File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/core/handlers/wsgi.py", line 219, in __call__
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]     self.load_middleware()
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]   File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/core/handlers/base.py", line 45, in load_middleware
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]     mod = import_module(mw_module)
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]   File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/utils/importlib.py", line 35, in import_module
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]     __import__(name)
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]   File "/home/forum/forum/middleware/extended_user.py", line 4, in <module>
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]     from forum.views.auth import forward_suspended_user
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]   File "/home/forum/forum/views/__init__.py", line 1, in <module>
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]     import readers
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]   File "/home/forum/forum/views/readers.py", line 20, in <module>
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]     from forum.utils import pagination
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]   File "/home/forum/forum/utils/pagination.py", line 173, in <module>
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]     page_numbers_template = template.loader.get_template('paginator/page_numbers.html')
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]   File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/template/loader.py", line 145, in get_template
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]     template, origin = find_template(template_name)
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]   File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/template/loader.py", line 134, in find_template
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]     source, display_name = loader(name, dirs)
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]   File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/template/loader.py", line 42, in __call__
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]     return self.load_template(template_name, template_dirs)
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]   File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/template/loaders/cached.py", line 46, in load_template
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]     template, origin = self.find_template(template_name, template_dirs)
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]   File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/template/loaders/cached.py", line 31, in find_template
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]     for loader in self.loaders:
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]   File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/template/loaders/cached.py", line 26, in loaders
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]     cached_loaders.append(find_template_loader(loader))
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]   File "/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/template/loader.py", line 101, in find_template_loader
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10]     raise ImproperlyConfigured('Error importing template source loader %s: "%s"' % (loader, e))
[Wed Aug 08 16:18:44 2012] [error] [client 192.168.0.10] ImproperlyConfigured: Error importing template source loader django.template.loaders.filesystem.load_template_source: "'module' object has no attribute 'load_template_source'" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:50:18.540

尝试`django.middleware.csrf.CsrfViewMiddleware`在变量的设置文件中替换 to ，或者如果已经存在则`MIDDLEWARE_CLASSES`删除，因为已弃用。`CsrfViewMiddleware``CsrfResponseMiddleware`

# python - smtp Python sendmail内容，使url不可点击

> ID：11872032
> 
> 赞同：0
> 
> 时间：2012-08-08T19:46:01.977
> 
> 标签：python, html, email, url

我`smtplib`用来通过 Python 发送电子邮件，一切都很好并且工作正常，但是有没有办法将 HTML 格式的内容作为消息而不是字符串发送？更重要的是，我要做的是发送链接并使它们无法点击，这样人们就不会不小心点击并打开它们。

这就是我制定电子邮件的方式：

```
message = "From: %s\r\n" % fromaddr+ "To: %s\r\n" % toaddrs+ "CC: %s\r\n" % ",".join(cc)+ "Subject: %s\r\n" % message_subject+ "\r\n" + "Reanalyze this URL: " +msg+"\r\nLabelled as "+blueContent 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:55:56.780

Python 的标准库[电子邮件](http://docs.python.org/library/email)包就是针对此类任务的。要编写电子邮件，请使用 [email.message.Message](http://docs.python.org/library/email.message.html#email.message.Message)类。

# string - 使用 hive printf 格式化程序将“1234”转换为“1.2.34”

> ID：11872035
> 
> 赞同：1
> 
> 时间：2012-08-08T19:46:16.253
> 
> 标签：string, hive

我希望使用 hive “printf” 函数，该函数关闭 java[格式化程序类](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html)，将诸如“1234”之类的字符串转换为“1.2.34”。或者，将“4321”转换为“4.3.21”等。理想情况下，是这样的：

```
SELECT PRINTF("x.x.xx", "4321");
// -> 4.3.21 
```

这可能吗？如果是这样，格式字符串是什么？

我知道我可以对字符串 concat 做同样的事情，但我宁愿不这样做。我在 hive 工作，“1234”是一个昂贵的正则表达式的结果，我希望在不运行正则表达式三次或使用子查询的情况下一步完成。

编辑：澄清一下，这是在蜂巢中。很抱歉没有提前说清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:13:59.650

```
String[] stringArray = "1234".split("");
// This will have a leading array entry of empty string, so chop it off somehow
// EDIT: had the pattern wrong, fixed it
System.out.println(String.format("%s.%s.%s%s", Arrays.copyOfRange(stringArray, 1, stringArray.length))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T19:59:53.867

这可能有助于满足进一步的需求。

```
formatter = new DecimalFormat("#.#");
s = formatter.format(-1234.567);         // -1234.6 
```

**编辑。** 如果没有小数点，不确定是否可以使用 Formatter 完成此操作。似乎需要对字符串进行一些先前的工作。检查大卫的答案。

# java - Java - 保存 Internet Radio 流

> ID：11872044
> 
> 赞同：0
> 
> 时间：2012-08-08T19:46:37.793
> 
> 标签：java, audio, stream, audio-recording

我想录制一个在中午播放的网络广播节目，我不能在那里听。

电台的网址是： [http ://radio.orf.at/player/radioplayer.html?station=ooe](http://radio.orf.at/player/radioplayer.html?station=ooe)

我查看了 DOM 以了解玩家从哪里获取数据。我相信是这个服务器：“http://194.232.200.148:8000”

当我在浏览器中键入此内容时，会出现一个随时间增长的文档，因此我假设它是流的数据。

当我在 DOM 中读取数据时，数据是音频/mpeg 格式，所以我想我可以编写一个小程序来获取数据并将其保存为 *.mpeg 文件。

我的测试程序如下所示：

```
URL u = new URL("http://194.232.200.148:8000");
            InputStream openStream = u.openStream();
            long curTime = System.currentTimeMillis();
            BufferedWriter bw = null;

            FileWriter fw = new FileWriter(new File("C:\\Users\\Lukas\\Desktop\\test.mpeg"));
            bw = new BufferedWriter(fw);
            while (true) {
                int read = openStream.read();

                System.out.println(read);
                if (read == -1 || curTime + 60000 < System.currentTimeMillis()) {
                    break;
                }
                bw.write(read);
                bw.flush();

            }
            bw.close();
        } catch (Exception ex) {
            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
        } 
```

但正如我已经担心的那样，这似乎并不那么容易。

我将数据保存到文件中，但它不是有效的 .mpeg 文件。

所以我想问一下是否有人有这种问题的经验，可以帮助我解决问题，或者至少给我一个提示。

你的，卢卡斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:07:20.073

MPEG 文件有标题，如果没有这些标题，播放器将无法读取它们。此外，您必须确定实际格式是什么，它可能是一些受版权保护的格式，您不能简单地创建一个标题并在普通播放器中播放。也许查找 MPEG 文件格式结构作为开始。

# java - 我可以配置 Eclipse，但未显示前端 IDE

> ID：11872047
> 
> 赞同：0
> 
> 时间：2012-08-08T19:46:42.000
> 
> 标签：java, eclipse

Eclipse 启动退出并出现错误代码 -1。通过在 Eclipse 的配置文件中提供正确的 JVM 路径来解决此问题。现在，当我尝试启动 Eclipse 时，前端没有加载，但是 java.exe 被执行并被自己杀死。

有人可以帮我吗？

我正在使用 Eclipse 春分

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:55:38.917

尝试打开命令行并运行

```
eclipse.exe -consoleLog 
```

这应该为您将更多信息转储到命令行。

# java - 桌面应用层

> ID：11872048
> 
> 赞同：0
> 
> 时间：2012-08-08T19:46:42.317
> 
> 标签：java, architecture, layer

我正在开始一个桌面应用程序 (SWT/JFACE)，用于从数据库中创建、读取、更新和删除条目。

我想以正确的方式做到这一点，因此应用程序将易于扩展。

这就是为什么我正在寻找如何将桌面应用程序开发分层。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:57:45.557

我想说你应该看看如何将 MVC（模型-视图-控制器）模式应用于单独的表示、业务逻辑和数据层。即使它不是 Web 应用程序，Hibernate 也可以用于执行这些 CRUD 操作。

# entity-framework - 实体框架错误更新 iSeries 记录

> ID：11872049
> 
> 赞同：2
> 
> 时间：2012-08-08T19:46:47.320
> 
> 标签：entity-framework, db2, ibm-midrange

我是 iSeries AS/400 的新手。我已经从 IBM 下载了 DB2Connect，并且正在尝试让 Entity Framework 使用它。

我已经成功地从 iSeries 创建了我的 EDMX 文件，并且我可以读取记录。但是，每当我尝试保存更改时，都会收到错误消息

```
ERROR [55019] [IBM][AS] SQL7008N  REXX variable \"INVENTORY \" contains inconsistent data. 
```

根据我的阅读，这与表格没有被记录有关。我无法控制它是否存在。我假设连接字符串中有某种设置需要设置，但我不知道是什么。

我当前的 EF 连接字符串是（删除了用户和密码）

```
<add name="LATHAM1Entities" connectionString="metadata=res://*/Model1.csdl|res://*/Model1.ssdl|res://*/Model1.msl;provider=IBM.Data.DB2;provider connection string=&quot;Database=LATHAM1;User ID=xxxx;Password=xxxx;Server=LATHDEV1:446;Persist Security Info=True;&quot;" providerName="System.Data.EntityClient" /> 
```

如果我尝试仅使用 ADO.Net 进行更新，我可以很好地更新它。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:36:33.857

我*认为*您`CommitMode=0`根据[连接字符串关键字添加 - 服务器属性](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=%2Frzaik%2Frzaikconnstrkeywordsservprop.htm) 。

我通常只是添加日记。

# ios5 - 在所有子视图中使用相同的 UINavigationBar 对象

> ID：11872050
> 
> 赞同：1
> 
> 时间：2012-08-08T19:46:47.423
> 
> 标签：ios5, uinavigationcontroller, xcode4.2, storyboard, uinavigationbar

嗨，我正在开发一个 ios 应用程序，并且使用情节提要设计了 ui（第一次使用它），所以我有以下内容：

*   入口点：导航控制器
*   rootView 视图控制器（推送到许多其他视图，其中一些是 UITableView）
*   然后我以编程方式推送（在某些控制器中）从笔尖加载的视图（这没有问题）

每个控制器都有一个定义的标题。

我想要做的是在所有视图控制器的导航栏上放一个 rigth 按钮，这样我就可以（以编程方式）推送到另一个控制器（希望在笔尖中，但我可以将它移动到 SB 没有问题）

我试过了：

*   使用自定义类和 nib 文件，但我得到相同的未自定义导航栏
*   覆盖 initWithCoder 以便我可以将其重定向到 de nib 文件但得到一个无限循环（StakOverflow，耶！）
*   使用第二个类来避免无限循环但得到一个异常：

    > 由于未捕获的异常“NSGenericException”而终止应用程序，原因：“此编码器要求从 initWithCoder 返回替换的对象：

*   在导航栏类的init方法中手动添加按钮，没有效果

*   替换导航控制器initWithCoder中的导航栏，没有效果
*   相同，但在导航控制器的 viewDidLoad 方法中，没有效果
*   相同，但在 rootView 控制器中，没有效果

我使用的代码是这样的（以及一些变体）：

```
UIBarButtonItem *BTN = [[UIBarButtonItem alloc] 
      initWithImage:[[UIImage alloc] initWithContentsOfFile:@"img.png"] 
      style:UIBarButtonItemStyleBordered 
      target:self 
      action:@selector(pushView)];

[[self navigationItem] setRightBarButtonItem:BTN]; 
```

有什么办法可以存档，还是我应该手动查看每个视图？

- 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T18:43:53.227

是的，您需要在每个视图控制器中为其`navigationItem`属性执行操作。但是您可以通过创建一个`category`on`UIBarButtonItem`类来简化它，该类将有一个方法来配置和返回您需要的按钮。因此，您只需要调用该类别的方法，无需在任何地方编写相同的代码。

以下是一些类似的帖子：

[向 UINavigationController 中的所有视图控制器添加相同的按钮](https://stackoverflow.com/questions/6389094/adding-same-button-to-all-view-controllers-in-uinavigationcontroller)

[以编程方式将 UIBarButtonItem 添加到 UITabBarController 内的所有导航视图控制器](https://stackoverflow.com/questions/10158059/adding-uibarbuttonitem-to-all-navigation-view-controllers-inside-a-uitabbarcontr)

# php - AJAX 不在这里工作和一些问题？

> ID：11872052
> 
> 赞同：0
> 
> 时间：2012-08-08T19:47:04.347
> 
> 标签：php, ajax, laravel

经过大量研究，我发现 Laravel 非常好。我有一个带有动画的主页打开，然后菜单和页面内容分成每一侧。单击链接后，我只想更改内容。我尝试使用 jQuery/ajax。但我有一个问题，我希望内容和侧边栏菜单中的链接更改内容。你能告诉我这样做的方法吗？

这是我的 ajax.js：

```
 $(document).ready( function() {

    $("#content ul li a").click( function(e){
         e.preventDefault();
         $('#page').load(this.href);
         return false;
    });

}); 
```

这是我的文章控制器：

```
<?php
class Articles_Controller extends Base_Controller
{

    public $restful = true;
    public $layout = 'layouts.default';

    public function get_index(){
        $this->layout->title = "Anasayfa";
        $this->layout->content = View::make('articles.index')
             ->with('articles',Article::order_by('id')->get());
    }

    public function get_view($id){
        $this->layout->title = "Hizmetlerimiz";
        $this->layout->content = View::make('articles.view')
             ->with('article',Article::find($id));
    }
} 
```

我的`default.blade.php`：

```
<div id="wrapper">
    <div id="page">
        {{ $content }}
    </div>

    <div id="sidebar">
        <div id="sidebar-content">
        <!-- MENU -->
        <ul id="menu">
            <li class="current"><a href="#">ANASAYFA</a></li>
            <li><a href="#">HAKKIMIZDA</a></li>
// ... 
```

我的`index.blade.php`：

```
<div id="content">

    @foreach($articles as $article)
    <ul class="blog-medium">
        <li>    
            <div class="blog-medium-text">
                <h1><a href="./post.html">{{$article-> title }} </a></h1>
                <p class="blog-medium-excerpt"><p>Tek kişilik sınıflarda YGS - LYS hazırlık programımızda dersler özel&#8230;<br />
                {{ HTML::link_to_route('article','devamı', array($article->id)) }}</p>
            </div>
        </li>
    </ul>
    @endforeach
</div> 
```

我的`view.blade.php`：

```
<div id="content">
    <h1>{{$article->title}}</h1>
    <p>{{$article->content}}</p>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:53:03.083

我认为问题出在你的 Jquery 上

```
$(function() 
{
    $("#content ul li a").click( function()
    {
        var url = $(this).attr('href'); // Get href value from <a>

        $('#page').load(url);

        return false; // No need for e.preventDefault() if return false;
    });
}); 
```

假设 href 值是控制器方法的完整或相对路径，这应该可以工作。

当您使用 restful 控制器时，请考虑 AJAX 能够使用 GET 和 POST HTTP 方法。您可以将所有 POST 和 GET 数据分离到单独的函数中，还可以使用以下方法检查请求是否是 Laravel 中的 Ajax：

```
if (Request::ajax())
{
    ... // The request is AJAX, do ajax stuff

    return Response::json(array('action' => 'complete'));
} 
```

# java - 尽量不要混合 Swing 和 AWT

> ID：11872055
> 
> 赞同：0
> 
> 时间：2012-08-08T19:47:13.753
> 
> 标签：java, swing, jframe, awt, mixing

我正在用Java制作游戏。我找到了这个教程： [http ://www.gamedev.net/page/resources/_/technical/general-programming/java-games-active-rendering-r2418](http://www.gamedev.net/page/resources/_/technical/general-programming/java-games-active-rendering-r2418)

它展示了如何进行主动渲染。他们使用 Canvas 进行绘画。到目前为止，我一直在使用 JPanel；但是，我想切换到这种方法。现在，我有几个 JPanel 和一些 JButton 添加到 JPanel。我想知道我是否应该改用 java.awt.Button 和 java.awt.Panel，以免混合 Swing 和 AWT 组件。

另一方面，在本教程中，Canvas 位于 JFrame 中，那么这不是已经混合了 Swing 和 AWT 吗？可以吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T19:50:22.887

您应该只使用 Swing 组件。例如，你应该去 from `Button`to`JButton`和所有的替换控件。

```
AWT Component                         (Closest) Swing Replacement  
Button                                          JButton  
Canvas                                          JPanel  
Checkbox                                        JCheckBox  
Checkbox in CheckboxGroup                       JRadioButton in ButtonGroup  
Choice                                          JComboBox  
Component                                       JComponent  
Container                                       JPanel  
Label                                           JLabel  
List                                            JList    
Menu                                            JMenu  
MenuBar                                         JMenuBar  
MenuItem                                        JMenuItem  
Panel                                           JPanel  
PopupMenu                                       JPopupMenu   
Scrollbar                                       JScrollBar  
ScrollPane                                      JScrollPane  
TextArea                                        JTextArea  
TextField                                       JTextField 
```

但是有些方面是共同的`AWT`，`Swing`例如事件处理和布局管理在两者之间也是共同的

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T20:52:45.873

*   您可以使用`JComponent`（尚未实现`LayoutManager`）或`JPanel`（已实现`FlowLayout`）没有任何问题（与 相比`Canvas`）使用编译的代码进行绘画`Java6/7`

*   必须将方法更改`paint(AWT Component)`为`paintComponent(Swing JComponent)`，更多在跟踪[Graphics(2D)](http://docs.oracle.com/javase/tutorial/2d/index.html)

*   `Canvas`使用in是有原因的`21th century`，例如用于需要访问来自的资源的高性能或硬图形代码`Native OS`，例如用于 的`CAD / CAM`图形`3D`和基于 的图形`OpenGL/CL`，`multimedia players`

*   使用[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)而不是普通的`Thread`

*   使用[KeyBindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)而不是[KeyListener](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)

# java - 单击按钮时，内容不会改变。- 安卓

> ID：11872056
> 
> 赞同：0
> 
> 时间：2012-08-08T19:47:14.233
> 
> 标签：java, android

我想更改按钮更改的内容，但它永远不会起作用。

```
 button.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                setContentView(R.layout.blahdyblah);
            }
        }); 
```

这就是代码，但是每当我想更改 setContentView() 时，它都不会更改，它只是单击而不执行任何操作。如果有人可以帮助我完成这项任务......

我也尝试将 setContentView 放在另一个函数中......这仍然不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:51:25.760

您可以尝试 ActivityName.this.setContentView(R.layout.blahdyblah) ActivityName 是您的活动吗？可能是在您当前正在处理的上下文中调用 setContentView .. 在您的按钮内 onclick 是按钮

如果这不起作用，您能否编辑您的答案以显示您的整个代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T19:55:36.813

我会建议; 1) 如果您的当前视图在哪里，请确保按钮位于相同的上下文/类中 2) 确保您的“blahdyblah”是正确设置的 XML 文件

您可能还想开始一个新的活动，您可以在其中设置内容视图 - 可能在更改当前活动中的内容时出现问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T22:41:16.550

这样做：

```
{
    ...
    button.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            setBlahdyBlah();
        }
    });
}

...

private void setBlahdyBlah() {
    setContentView(R.layout.blahdyblah);
} 
```

这将保证您对 setContentView() 的调用是从正确的上下文中执行的。

我不确定为什么它没有按照您编写的方式工作，但我认为您的代码取决于您的 OnClickListener 已被创建为 Activity 的适当内部类，并且全局“R”可以正确访问那个范围。我不确定它在哪里失败，但我的方式消除了这个问题的未知数。另外，我就是这样做的，它对我有用。

嗯，经过进一步考虑，我敢打赌这也会起作用：

```
 final Activity foo = this;
    button.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            foo.setContentView(R.layout.blahdyblah);
        }
    }); 
```

我认为这都与您的 OnClickListener 不是您活动的适当内部类有关。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T01:04:27.723

我猜你希望你的屏幕在点击按钮时切换到另一个布局。试试下面的。首先，创建一个名为“blahdyblah”的活动，而不仅仅是一个 xml 文件（所以你应该有两个活动，你的主要活动有带有 onClickListener 的按钮，还有一个名为“blahdyblah”的单独活动）。完成后，试试这个：

```
button.setOnClickListener(new View.OnClickListener() 
{
        @Override
        public void onClick(View v) 
        {
            Intent intent = new Intent(MainActivity.this, blahdyblah.class);
            startActivity(intent);
        }
}); 
```

在代码中，将“MainActivity”替换为您在其中编写此 onClickListener 的类的名称。

将 blahdyblah.java 文件的内容视图设置为`R.layout.blahdyblah` I'm pretty sure that should do you're looking for。

blahdyblah.java

```
public class blahdyblah extends Activity
{
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.blahdyblah);
    }
} 
```

# c# - 如何存储列表 在来自网络场服务器的会话中？

> ID：11872059
> 
> 赞同：0
> 
> 时间：2012-08-08T19:47:20.013
> 
> 标签：c#, asp.net, asp.net-mvc, session, web-farm

我工作的地方是将几个 Web 应用程序（WebForm 和 MVC）迁移到 Web 农场。会话将由 SQL Server 管理。

问题永远是遗留问题！

对于那些更容易使用会话、存储字符串、返回等的情况，代码将保持不变。当在某些特定情况下，`List<typed>`会话中存储了不可序列化的对象等时，问题就开始了。

我正在考虑以一种 DRY 风格重构这一切。

大多数存储在会话中的列表都是由实体框架查询产生的集合。老实说，我不知道它周围是否有任何捷径。立即快速想到的唯一解决方案是在遗留系统的数据库中创建一个表并存储这些对象 - 然后创建一些机制来偶尔删除不活动的行。

所以在任何地方使用：`Session["mList"] = myList;`

我会交易：`CustomSession.AddsInDatabase("mList", myList);`

妥善照顾登录用户、插入时间等。

这是一个很好的选择，还是有其他的？

:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:00:53.720

您是否出于某种原因不想使用 Microsoft 实现的[SQL Server Session-State 提供程序](http://support.microsoft.com/kb/317604)？

如果是，那么我建议[实施自定义会话状态提供程序](http://msdn.microsoft.com/en-us/library/ms178587.aspx)。如果您采用自定义路线，我建议您始终将会话值作为二进制 blob 存储在数据库中，并在调用之间使用 a[`BinaryWriter`](http://msdn.microsoft.com/en-us/library/system.io.binarywriter.aspx)来[`SessionStateItemCollection.Serialize`](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionstateitemcollection.serialize.aspx)序列化和反序列化，这样您就不必对对象的类型做出任何假设你正在存储。

您可以检查MSDN 中[自定义提供程序的这个示例实现，](http://msdn.microsoft.com/en-us/library/ms178589)以了解在实现继承自[`SessionStateStoreProviderBase`](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionstatestoreproviderbase.aspx).

# dozer - 在推土机中映射常量值

> ID：11872060
> 
> 赞同：3
> 
> 时间：2012-08-08T19:47:32.003
> 
> 标签：dozer

当使用 Dozer 映射两个类时，我想从 Java 类映射常量，如下面的字段 2 所示的示例映射所示。除了 Factory Bean 实例之外，在 Dozer 中是否有更清洁的方法来执行此操作。

```
 <mapping>
    <class-a>com.mod.Class1</class-a>
    <class-b>com.mod.Class2</class-b>
    <field>
        <a>field1inClass1</a>
        <b>field1inClass2</b>
    </field>
    <field>       <!-- This is from constants. -->
        <a>constants.Field</a>
        <b>field2inClass2</b>
    </field>
   </mapping> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:14:34.193

我过去也需要这个，但没有成功，Dozer 不支持映射到与`class-a`or中定义的类不同的类中的常量值`class-b`。如果您要在`class-a`or的类中定义常量，则只需在常量字段中进行`class-b`单向映射和使用。**`is-accessible="true"`**

作为一个丑陋的解决方法，您可以创建另一个`mapping`元素来执行从常量类到目标对象的单向映射，但是您必须向 Dozer 传递常量类的实例（我知道，这很糟糕），这只有在您的 Constants 类是可实例化的（这是最糟糕的）。

```
<mapping>
    <class-a>ConstantsClass</class-a>
    <class-b>InstantiableClass</class-b>        
    <field type="one-way">           
        <a is-accessible="true">THE_CONSTANT</a>
        <b>value</b> 
    </field>        
</mapping> 
```

[推土机论坛上的相关主题](http://sourceforge.net/projects/dozer/forums/forum/452531/topic/1786190?message=4431890)

# php - 我想将单选按钮与 php 文件链接

> ID：11872062
> 
> 赞同：0
> 
> 时间：2012-08-08T19:47:46.460
> 
> 标签：php, html, button, radio-button, action

我想当用户选择下面的单选按钮之一链接到其中一个 php 文件时，我也放了一个按钮，但这个按钮没有出现我不知道为什么：

```
<html>
<body>
<form action="">
<h4><b>Please choose one of the following options below : </b> </h4>
<input type="radio" name="option" value="search" /> Search <br/>
<input type="radio" name="option" value="open database" /> Open Database<br/>
<input type="radio" name="option" value="administrative page "/> Administrative Page <br/>
</form>
// This button doesn't appear in the web page =( .. dunno why 
<form action="">
<input type="button" value="Choose ">
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:51:47.220

你应该让你的代码像这样

```
<html>
<body>
<form action="">
<h4><b>Please choose one of the following options below : </b> </h4>
<input type="radio" name="option" value="search" /> Search <br/>
<input type="radio" name="option" value="open database" /> Open Database<br/>
<input type="radio" name="option" value="administrative page "/> Administrative Page <br/>
<input type="submit" value="Choose ">
</form>
</body>
</html> 
```

请注意，该按钮`<form>`与单选选项位于同一标签中，并且它是`submit`输入类型而不是`button`

你可以在这里看到结果：http: [//jsfiddle.net/Sv6q2/](http://jsfiddle.net/Sv6q2/)

这是一个没有按钮的示例，但在收音机上有 onclick 事件（请注意，您不再需要`<form>`标签）：

```
<html>
<body>
<h4><b>Please choose one of the following options below : </b> </h4>
<input type="radio" name="option" value="search" onclick="document.location.href='search.php'"/> Search <br/>
<input type="radio" name="option" value="open database" onclick="document.location.href='database.php'" /> Open Database<br/>
    <input type="radio" name="option" value="administrative page " onclick="document.location.href='admin.php'"/> Administrative Page <br/>
</body>
</html>​ 
```

你可以在这里找到结果：http: [//jsfiddle.net/Sv6q2/2/](http://jsfiddle.net/Sv6q2/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:00:57.427

你应该使用jquery。没有它很难。

首先编写一个处理点击操作的小函数，而不是通过调用你的函数

```
onChance="myFunction(this);" 
```

Also add a custom attribute to your radio buttons that includes you php file names you want to go.

# android - 更改动画路径上的油漆（android）

> ID：11872063
> 
> 赞同：1
> 
> 时间：2012-08-08T19:47:57.333
> 
> 标签：android, path

我有一个路径和一个遵循已实现路径的对象。如何使移动对象在它经过的路径上绘制另一种颜色。

这里是图像的链接（也许它更好地解释了我的意思）：[移动物体在路径上](http://postimage.org/image/4anj8g3r1/)

谢谢你的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:50:17.877

这是一个如何完成的示例:)

```
public class MainActivity extends Activity  {

    @Override

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(new SampleView(this));
    }

    private static class SampleView extends View {
        private Paint mPaint,followingPaint;
        private Path mPath=new Path();
        private PathEffect mEffect;
        private float mPhase;
        private PathMeasure pm;
        private float pmLen; 

        public SampleView(Context context) {
            super(context);
            setFocusable(true);
            setFocusableInTouchMode(true);

            mPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
            mPaint.setStyle(Paint.Style.STROKE);
            mPaint.setStrokeWidth(10);
            followingPaint= new Paint(Paint.ANTI_ALIAS_FLAG);
            followingPaint.setStyle(Paint.Style.STROKE);
            followingPaint.setStrokeWidth(8);

            mPath.moveTo(50, 150);
            mPath.quadTo(100,200,150, 150);
            mPath.quadTo(200,100,300, 150);
            pm=new PathMeasure(mPath,false);
            pmLen = pm.getLength();

        }

        @Override protected void onDraw(Canvas canvas) {
            canvas.drawColor(Color.WHITE);

            mEffect = new DashPathEffect(new float[] {pmLen, pmLen}, mPhase+pmLen);
                mPhase -= 4;
            invalidate();     
            followingPaint.setPathEffect(mEffect);
            mPaint.setColor(Color.BLACK);
            followingPaint.setColor(Color.WHITE);
            canvas.drawPath(mPath, mPaint);
            canvas.drawPath(mPath, followingPaint);
        }
    }
} 
```

# html - 如何将 shell 脚本的输出打印到我的 html 页面？

> ID：11872065
> 
> 赞同：1
> 
> 时间：2012-08-08T19:48:11.230
> 
> 标签：html, printing, echo

我正在使用一个 tomcat 服务器、javascript 和一个 .java 和一个 .vm 文件。所有 html 都在 .vm 文件中，并且所有这些文件都已连接。陈述这些事实的原因是为了表明，如果有一个 Java 解决方案可以完成我的查询任务，那么也请帮助解决这个问题 =]

所以.. 我的网页已经从我的桌面执行 .sh 文件，目前只打印：

> 你好新世界！..

到我桌面上的 .txt 文件。我想要做的也是在我单击“执行”按钮后立即在我的网页上显示该输出。

我不想使用 php

任何指针？解决方案？请。=]

# visual-studio-2010 - 从 Visual Studio 负载测试中获取“到第一个字节的时间”指标

> ID：11872067
> 
> 赞同：3
> 
> 时间：2012-08-08T19:48:12.893
> 
> 标签：visual-studio-2010, performance, load-testing

我已经设置了一个 Visual Studio 2010 负载测试套件来测试我们的网站。我想要的一个关键指标是每个页面的“第一个字节的时间”（TTFB）。有谁知道我如何将它添加到项目中？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T07:40:36.713

在`Load Test Results`窗口中展开`Overall-->Request-->Avg. First Byte Time`并双击`_Total`以将其添加到图表中。

![在此处输入图像描述](../Images/24d5dfffd54e0f985b081f794f4a8705.png)

如果您想了解如何在测试中添加更多计数器（默认情况下未添加），请检查以下内容：

1.  [在负载测试中为计算机指定计数器集](http://msdn.microsoft.com/en-us/library/ms404695)
2.  [如何：使用负载测试编辑器将计数器添加到计数器集](http://msdn.microsoft.com/en-us/library/ms404704)

# c++ - 是内存泄漏吗？

> ID：11872068
> 
> 赞同：4
> 
> 时间：2012-08-08T19:48:13.580
> 
> 标签：c++

我是 C++ 新手，我刚刚了解了动态内存和内存泄漏。

据我了解，当创建一个指针（`int *ptr = new int`），然后更改他指向的地址时，旧地址仍然存在/分配。（如果我错了，请纠正我）。

所以我想到了这个：

```
int *ptr;
ptr = new int; 
```

第一个 ptr 用随机（或不？）地址填充，然后我更改它，所以旧的保留？如果我尝试这段代码：

```
int *ptr;
cout << ptr << endl ;
ptr = new int;
cout << ptr << endl ; 
```

我得到：

```
0x401a4e
0x6d2d20 
```

这是否意味着 0x401a4e 是内存泄漏的一部分？还是在ptr移动到动态内存时释放？它是如何工作的？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-08T19:54:28.333

您需要了解内存泄漏与指针无关（真的：*从来没有*——即使很多人会声称不同的东西）。有指针的整个业务只是误导。

它们是关于动态内存分配和释放的不匹配。

每个分配 via`new`必须与*一个*释放 via匹配`delete`。与`malloc`和`free`和（`new[]`以及`delete[]`其他可想象的动态资源分配函数）相同。

```
int* x; // Not a memory leak: no dynamic allocation
new int; // Memory leak: we acquired a value via `new` and lost it.

int* y = new int;
int* z = y;
delete y; // Not a memory leak any more: we freed the memory.

delete z; // Oooh, bad: we deleted a value twice. The horror. 
```

现代 C++ 代码很少使用（在大多数情况下：**没有**）手动动态内存分配。这样，您就不会发生泄漏。原则。这非常好，就这样做吧。您可以使用标准容器和智能指针来为您处理内存管理，而不是*手动动态分配内存。*

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-08T19:50:12.020

第一行 ( `int *ptr;`) 没有分配任何动态内存，因此没有内存泄漏。您看到的值未初始化。它不是一个有效的指针。在给它赋值之前，你不应该删除指针。这样做将是未定义的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T19:51:07.797

不，这不是内存泄漏。不同之处在于，当您说“ `new int`”时，您是在告诉 C++ 保留一块内存来保存`int`; 如果您随后丢失了指向该保留块的指针，那么它就无法恢复，也无法释放，因此它是一个泄漏，因为它永远不能被重用。

仅仅在指针变量中保存一些位不会产生任何魔力。它们只是一点点。使用它分配内存`new`会给你带来麻烦。一旦你保留了一个区块，你必须确保不会丢失它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T19:51:56.777

在 C/C++ 中，内存不会自动释放。所以，是的，如果你这样做：

```
 YourType* ptr = new YourType();
 ptr = new YourType(); 
```

你会有内存泄漏。

但是在您的情况下，您没有内存泄漏，因为第一个值不是有效的内存位置。它是一个未初始化的指针。

# java - Javadoc Ant 任务在 Ubuntu 机器上未按预期工作

> ID：11872069
> 
> 赞同：1
> 
> 时间：2012-08-08T19:48:13.617
> 
> 标签：java, ubuntu, ant, jenkins, javadoc

我有一个在远程 Ubuntu 机器上运行的 Jenkins 实例，我正在尝试在其上使用[Javadoc 插件](https://wiki.jenkins-ci.org/display/JENKINS/Javadoc+Plugin)。该项目使用 Ant，所以我决定使用[Javadoc Ant 任务](http://ant.apache.org/manual/Tasks/javadoc.html)来生成文档并使用 Jenkins 插件来发布它。

我设置了一个简单的目标，如下所示：

```
<target name="doc" description="generate javadoc">
    <javadoc 
        destdir="${basedir}/javadocs"
        sourcepath="${basedir}/src"
        packagenames="com.example.*"
        failonerror="false"
    />
</target> 
```

当我在我的 Windows 7 机器上从命令行运行它时，它可以正常工作并在指定的 ${basedir}/javadoc/ 目录中生成适当的 Javadoc。但是当我在 Ubuntu 机器上运行它时，它只会创建 ${baseir}/javadoc/ 目录，它不会生成实际的 Javadoc。

在比较两次不同运行的输出时，我注意到在 Ubuntu 机器上它永远不会进入以下步骤：

```
[javadoc] Constructing Javadoc information... 
```

相反，它停在：

```
[javadoc] [parsing completed 43ms] 
```

我尝试为 Ant 任务打开详细模式，但它没有给我任何有用的信息。有人见过这种情况吗？我能做些什么来解决这个问题，或者至少让 Ant 告诉我为什么它在“构造 Javadoc 信息”之前停止？任何想法，将不胜感激。谢谢！

# web-applications - 饼干写作贵吗？

> ID：11872074
> 
> 赞同：2
> 
> 时间：2012-08-08T19:48:35.047
> 
> 标签：web-applications, cookies

写入 cookie 是否会以任何可感知的方式减慢 Web 响应速度？例如，在 Web 应用程序的每个请求上写入一些 cookie 会影响性能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T19:52:15.660

它并没有那么昂贵，但它确实增加了一些开销，主要是因为额外的信息来回发送，并且 Web 浏览器将 cookie 与每个后续请求一起发送回来。除非你想要一个 REST 风格的界面，否则只要你没有用大量数据填充 cookie，我就不会太担心。

# python - 如何替换为正则表达式命名组？

> ID：11872084
> 
> 赞同：1
> 
> 时间：2012-08-08T19:49:08.790
> 
> 标签：python, regex, logparser

我试图在基于 regex 的日志文件中找到匹配的行，然后检查其中的组并报告预期的和实际的行。以下示例显示了我正在尝试做的事情。

```
regex_str = '^.*name is (?P<name>[^.]*).*lives? in (?P<place>[^.]*).*$'
statement = 'My name is bala. I live in mumbai.'
statement2 = 'His name is bala. He lives in mumbai.'
ret = find_line([statement,'Garbage'],regex_str,name='bala',place='chennai')

ret == { 
'Expected' : 'My name is bala. I live in chennai.'
'Actual'   : 'My name is bala. I live in mumbai.'
'isMatched': False
}

ret = find_line([statement2,'Garbage'],regex_str,name='bala',place='chennai')

ret == { 
'Expected' : 'His name is bala. He lives in chennai.'
'Actual'   : 'His name is bala. He lives in mumbai.'
'isMatched': False
}

ret = find_line(['Garbage1','Garbage2'],regex_str,name='bala',place='chennai')

ret == {
'Expected' : '^.*name is (?P<name>[^.]*).*lives? in (?P<place>[^.]*).*$'
'Actual'   : '<No matching line>'
'isMatched': False
}

ret = find_line(['Garbage1',statement,'Garbage2',statement2],regex_str,name='bala',place='mumbai')

ret == {
'Expected' : 'My name is bala. I live in mumbai.'
'Actual'   : 'My name is bala. I live in mumbai.'
'isMatched': True
} 
```

我真正的用例是第一个参数将是一个文件对象。find_line 函数将继续跟踪文件，直到找到匹配项（正确或错误）或固定超时。

我正在寻找一种`find_line`能够提供所需输出的实现。有什么建议/解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:41:49.253

我的直截了当的尝试

```
import re
def find_line(lines,regex_str,**params):
    regex = re.compile(regex_str)
    for line in lines:
        m = regex.match(line)
        if m:
            actual = m.string
            groups = sorted (
                [(0,0,'')] +
                [(m.start(gname),m.end(gname),gname) for gname in params] +
                [(len(actual),0,'')])
            expected = ''
            for i in range(len(groups)-1):
                expected += actual[groups[i][1]:groups[i+1][0]]
                gname = groups[i+1][2]
                if gname: expected += params[gname]
            return {'Expected': expected, 'Actual': actual, 'isMatched' : expected == actual}
    return {'Expected': None, 'Actual': None, 'isMatched' : False} 
```

在未找到匹配的情况下出现问题（示例 3）。正如我们从示例中看到的那样，“预期”是转换数学字符串的结果。因此，如果没有计算任何字符串，则无法形成预期值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:28:49.140

我建议您仔细查看[re 模块文档](http://docs.python.org/library/re.html)。特别是，有[re.MatchObject](http://docs.python.org/library/re.html#match-objects)（您可以通过 获得它`re.match(regex_str, statement)`），它具有用于处理匹配组内容和位置的各种方法。

# c# - 从 Web 浏览器页面 C# 中获取图像

> ID：11872085
> 
> 赞同：-1
> 
> 时间：2012-08-08T19:49:12.630
> 
> 标签：c#, winforms, image, webbrowser-control, webpage

我正在尝试从 C# 中的 Web 浏览器中获取图像。整个过程是这样的：我在网络浏览器中加载一个网页。然后我想从网页中获取一张图片，更准确地说是一个 html 标签（div 或 span）。我尝试了几种方法，但它们似乎都不起作用。

webBrowser1.DrawBitmap() 不适用于 webBrowser 控件。

而且该项目是一个Windows窗体，所以该网页不完全是我的（不是和ASP项目）

我一直在谷歌上寻找解决方案，其中大部分是 Javascript 或 php，但我需要它在 C# 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:59:30.120

使用 webbrowser 加载页面，然后解析 html 以找到图像标签。使用源获取图像。

# php - 在 Code128 条码中编码控制字符

> ID：11872089
> 
> 赞同：3
> 
> 时间：2012-08-08T19:49:32.473
> 
> 标签：php, barcode, code128

下面是我用来创建 Code128 条形码的内容。我试图弄清楚如何在 $code 中进行某种正则表达式搜索以找到类似“^009”的内容并将其替换为“10000110100”而不破坏其余的编码。我的目标是能够在条形码中使用 Code128 控制字符。

我将不再使用控制字符编码：[http ://en.wikipedia.org/wiki/Code_128](http://en.wikipedia.org/wiki/Code_128)

```
 class Barcode128 {
static private $encoding = array(
          '11011001100', '11001101100', '11001100110', '10010011000',
          '10010001100', '10001001100', '10011001000', '10011000100',
          '10001100100', '11001001000', '11001000100', '11000100100',
          '10110011100', '10011011100', '10011001110', '10111001100',
          '10011101100', '10011100110', '11001110010', '11001011100',
          '11001001110', '11011100100', '11001110100', '11101101110',
          '11101001100', '11100101100', '11100100110', '11101100100',
          '11100110100', '11100110010', '11011011000', '11011000110',
          '11000110110', '10100011000', '10001011000', '10001000110',
          '10110001000', '10001101000', '10001100010', '11010001000',
          '11000101000', '11000100010', '10110111000', '10110001110',
          '10001101110', '10111011000', '10111000110', '10001110110',
          '11101110110', '11010001110', '11000101110', '11011101000',
          '11011100010', '11011101110', '11101011000', '11101000110',
          '11100010110', '11101101000', '11101100010', '11100011010',
          '11101111010', '11001000010', '11110001010', '10100110000',
          '10100001100', '10010110000', '10010000110', '10000101100',
          '10000100110', '10110010000', '10110000100', '10011010000',
          '10011000010', '10000110100', '10000110010', '11000010010',
          '11001010000', '11110111010', '11000010100', '10001111010',
          '10100111100', '10010111100', '10010011110', '10111100100',
          '10011110100', '10011110010', '11110100100', '11110010100',
          '11110010010', '11011011110', '11011110110', '11110110110',
          '10101111000', '10100011110', '10001011110', '10111101000',
          '10111100010', '11110101000', '11110100010', '10111011110',
          '10111101110', '11101011110', '11110101110', '11010000100',
          '11010010000', '11010011100', '11000111010');
static public function getDigit($code){
  $tableB = " !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz{|}~";
  $result = "";
  $sum = 0;
  $isum = 0;
  $i = 0;
  $j = 0;
  $value = 0;

  // check each characters
  $len = strlen($code);
  for($i=0; $i<$len; $i++){
    if (strpos($tableB, $code[$i]) === false) return("");
  }

  // check firsts characters : start with C table only if enought numeric
  $tableCActivated = $len> 1;
  $c = '';
  for($i=0; $i<3 && $i<$len; $i++){
    $tableCActivated &= preg_match('`[0-9]`', $code[$i]);
  }

  $sum = $tableCActivated ? 105 : 104;

  // start : [105] : C table or [104] : B table 
  $result = self::$encoding[ $sum ];

  $i = 0;
  while( $i < $len ){
    if (! $tableCActivated){
      $j = 0;
      // check next character to activate C table if interresting
      while ( ($i + $j < $len) && preg_match('`[0-9]`', $code[$i+$j]) ) $j++;

      // 6 min everywhere or 4 mini at the end
      $tableCActivated = ($j > 5) || (($i + $j - 1 == $len) && ($j > 3));

      if ( $tableCActivated ){
        $result .= self::$encoding[ 99 ]; // C table
        $sum += ++$isum * 99;
      }
      // 2 min for table C so need table B
    } else if ( ($i == $len - 1) || (preg_match('`[^0-9]`', $code[$i])) || (preg_match('`[^0-9]`', $code[$i+1])) ) { //todo : verifier le JS : len - 1!!! XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
      $tableCActivated = false;
      $result .= self::$encoding[ 100 ]; // B table
      $sum += ++$isum * 100;
    }

    if ( $tableCActivated ) {
      $value = intval(substr($code, $i, 2)); // Add two characters (numeric)
      $i += 2;
    } else {
      $value = strpos($tableB, $code[$i]); // Add one character
      $i++;
    }
    $result  .= self::$encoding[ $value ];
    $sum += ++$isum * $value;
  }

  // Add CRC
  $result  .= self::$encoding[ $sum % 103 ];

  // Stop
  $result .= self::$encoding[ 106 ];

  // Termination bar
  $result .= '11';

  return($result);
}
} 
```

谁能帮我这个？我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T16:28:46.867

您可以尝试查看此处提供的代码：

[http://www.davidscotttufts.c​​om/code/barcode.phps](http://www.davidscotttufts.com/code/barcode.phps)

因为他似乎很好地解决了几种不同类型条码的生成，包括 CODE128。

# mingw - 为什么我在构建几次后得到这个 MinGW 错误，权限被拒绝

> ID：11872091
> 
> 赞同：0
> 
> 时间：2012-08-08T19:49:43.577
> 
> 标签：mingw

在每 5 次左右构建我的程序后，我得到这个错误，这不是致命的，因为简单地`make`再次运行通常会编译程序并且一切都很好，但我不知道为什么会显示这个错误，是什么原因造成的？

```
c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../../mingw32/bin/ld.exe: reopening
program.exe: Permission denied

c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../../mingw32/bin/ld.exe: final link failed: 
Permission denied
collect2: ld returned 1 exit status
make: *** [skbx2] Error 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T19:51:17.057

这意味着该进程`program.exe`仍在运行。您可以在重建之前检查任务管理器以找到并杀死它。它正在运行的事实要么是因为您连接了调试器，要么程序没有干净地退出并且 Windows 正在转储一些错误信息，或者程序只是继续运行。

# networking - 什么是“网关接口”？

> ID：11872094
> 
> 赞同：1
> 
> 时间：2012-08-08T19:49:52.533
> 
> 标签：networking, interface, tcp, gateway

在“The .NET Developer's Guide to Directory Services Programming”一书和标题为“LDAP 的定义”的部分中，编写了以下段落：

*轻量级目录访问协议 (LDAP) 规范于 1993 年 7 月在 RFC 1487 中获得批准。密歇根大学的发明者最初创建它是为了补充更重的 DAP X.500 协议。起初，LDAP 设计者只想要一个简单的 X.500**网关接口**，用于易于实现和编程的 TCP/IP 协议。这个想法是 LDAP 服务器组件将 LDAP 调用转换为它们相应的 DAP X.500 调用，并将 X.500 服务器响应转换回客户端的 LDAP。*

我对你们这些好心人的问题正是这样：他们说的时候是什么意思`gateway interface`？什么是网关接口？网关接口有哪些示例？网关接口有什么作用？

非常感谢那些回答的人。

-TP

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T19:53:27.380

它也称为通用网关接口 (CGI)，您可能会在这里和那里看到这个弹出窗口。

> 通用网关接口 (CGI) 是一种标准（参见 RFC 3875：CGI 版本 1.1）方法，用于 Web 服务器软件将 Web 内容的生成委托给可执行文件。此类文件称为 CGI 脚本；它们是程序，通常是独立的应用程序，通常用脚本语言编写。

[通用网关接口 Wiki](http://en.wikipedia.org/wiki/Common_Gateway_Interface "通用网关接口")

# c# - 中央配置系统

> ID：11872105
> 
> 赞同：2
> 
> 时间：2012-08-08T19:50:32.937
> 
> 标签：c#, java, configuration, cloud

如果您正在构建一个基于云的大型平台，那么您将在该平台内拥有许多不同的模块/组件。这范围从 Web 服务配置（地址、端口等）到您拥有的每个组件的特定于域的配置。可以通过给系统中的每个组件一个令牌化的配置文件来配置这样的系统，然后为整个平台提供一个大的令牌解析文件。这很快就会变得混乱！

我在想也许一种更好的方法可以将整个平台配置集中到一个 Web 服务中，作为平台的中央配置系统，然后系统中的每个组件都会来到这个 Web 服务，并通过提供它们的 id 或唯一的来请求它们的配置设置配置名称。

我什至认为这样的配置必须是类型安全的，以便所有系统组件都明确地引用他们想要的配置而不是键值方式方法。

这个中央配置系统的另一个重要特性应该是能够使配置值依赖于服务器端，这样我就可以说

component1Config.LogServiceAddress = someMasterConfig.Address;

在服务器端。因此，只有中央配置系统知道上述逻辑，而 component1 只是为其 LogServiceAddress 获取一个值，而不知道中央配置系统是如何解决的。

我的问题是，这样的中央配置系统是否已经存在？有没有提供这种中央配置系统功能的开源软件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:19:53.740

Chef/Puppet 是在各种机器上集中配置多个堆栈的标准方法。中央服务器可以启动远程节点，然后在该机器上推送所需的堆栈。虽然我已经看到使用相同的软件来配置软件，但我认为它可以很好地扩展以满足您的需求！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T19:56:17.097

[WCF 发现概述](http://msdn.microsoft.com/en-us/library/dd456791.aspx)

创建一个服务，当一个服务宣布时，它会添加到服务列表中。使用元数据来提供配置设置等。

公平地说，还有需要 bonjour(apple)的[Mono.Zeroconf 。](http://www.mono-project.com/Mono.Zeroconf)

# sql - 如何控制 SELECT INTO 中基于文字的列的可空性

> ID：11872106
> 
> 赞同：13
> 
> 时间：2012-08-08T19:50:37.473
> 
> 标签：sql, sql-server-2008, tsql

我注意到，当我使用此语句时，该`Action`列不可为空：

```
SELECT TOP 0 SerialNumber, 0 [Action] INTO #MyTable FROM FSE_SerialNumber 
```

但是当我使用这个语句时，该`Action`列可以为空：

```
SELECT TOP 0 SerialNumber, CAST(0 as int) [Action] INTO #MyTable FROM FSE_SerialNumber 
```

我以这种方式创建表的原因是因为我不希望临时表从服务器默认排序规则或其他地方继承 SerialNumber 排序规则。我希望它与 FSE_SerialNumber..SerialNumber 的排序规则相匹配。

我的问题是，我是否可以依靠 cast 函数给我一个可为空的列，或者这是否没有明确定义并且可能会改变。为什么演员表突然使列可以为空？有没有更好的方法（除了评论）来澄清我的意图是在那里获得一个可为空的列？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-08T20:33:59.690

看起来肯定的答案就[在这里](http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/7af9edf4-9b26-4a00-b14a-8a6263f22675)。复制到这里：

> 元数据是根据 SELECT 列表中使用的源列和表达式确定的。以下是规则：
> 
> 1.  例如，任何使用内置函数（如 SUBSTRING、LEFT、RIGHT 等（ISNULL 除外）的表达式）都被引擎视为 NULLable。所以如果你使用 CAST(somecol as char(8)) 那么表达式是 NULLable
>     
>     
> 2.  文字、常量、@@DBTS、@@ERROR 等全局变量被认为是不可为空的，因为它们总是返回一些值
>     
>     
> 3.  如果表达式是列，则可空性派生自源列元数据
>     
>     
>     
>     因此，要使 SELECT 列表中的表达式或列不为空，请在列或表达式周围使用 ISNULL。

所以，看起来你可以安全地使用你的 CAST 表达式。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-01-25T18:01:46.673

快速一般提示`SELECT ... INTO`：`ISNULL(`与列一起使用，它将在表中创建为 NOT NULL 列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T20:04:26.007

就个人而言，为了获得最佳控制，您应该首先创建表。例如：

```
Create Table #MyTable (
   SerialNumber int Not Null, -- or however this is correctly defined.
   Action int Null
) 
```

然后，做一个插入...选择从...

```
Insert Into #MyTable(SerialNumber, Action)
Select SerialNumber, 0
From FSE_SerialNumber 
```

然后，就不会有字段应该是什么的问题。

我知道这不是您所要求的，但可能需要考虑。

# node.js - 使用套接字发送数据时防止控制台日志记录

> ID：11872107
> 
> 赞同：0
> 
> 时间：2012-08-08T19:50:40.607
> 
> 标签：node.js

如何防止节点输出我使用 io.sockets.emit(...) 发出的数据？我没有手动记录数据。我希望有数百个用户连接到节点服务器，所以我不希望终端窗口发疯。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T20:00:57.483

您需要将日志级别选项设置为 0，如下所示：

```
var io = require('socket.io').listen(port, host);
io.set('log level', 0); 
```

# visual-studio-2010 - MSBuild 脚本获取“Win32Exception：系统找不到指定的文件”

> ID：11872111
> 
> 赞同：0
> 
> 时间：2012-08-08T19:50:52.253
> 
> 标签：visual-studio-2010, tfs, msbuild

我已经构建了一个 MSBuild 脚本，它可以自动将我们的编程团队签入的最新代码每天部署到 2 或 3 台服务器之一（取决于参数）以进行测试。我还编写了一个快速 BAT 文件来启动它，它只使用给定的参数调用“MSBuild.exe”。在 MSBuild 脚本中，它所做的第一件事是从 TFS 中“获取最新”。这是一个代码片段...

```
<Project DefaultTargets="BuildLatest" ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
<Import Project="C:\Program Files (x86)\MSBuild\MSBuildCommunityTasks\MSBuild.Community.Tasks.Targets"/>
<UsingTask AssemblyFile="C:\Program Files\MSBuild\ExtensionPack\4.0\MSBuild.ExtensionPack.dll" TaskName="TFSSource"/> 
```

...

```
<PropertyGroup>
   <TFSourceLoc>$/SourceCode</TFSourceLoc>
</PropertyGroup> 
```

...

```
<Target Name="BuildLatest" >
   <TFSSource TaskAction="Get" ItemCol="$(TFSourceLoc)" />
</Target> 
```

错误又回来了... ERROR ...\AutoDeploy.xml(163,5): Win32Exception: The system cannot find the file specified

... BAT 文件结束。

真正奇怪的是，我可以最小化 VS 2010 并从资源管理器中运行完全相同的 BAT 文件而没有问题。

那我没看到什么？为什么这不在 VS 2010 中运行？

提前感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T15:52:22.463

I did a lot more research, which should have happened before I asked the question, but anyways...

Instead of calling a batch file, I decided to try the suggestion of calling MSBuild.exe directly and putting my parms (which will change every couple weeks with a new Sprint) in generic Response files.

I believe it was an issue with the Start/Initial Directory that was resolved by specifying the right directories on the "External Tools" dialog box.

# forms - 在对集合进行 cfloop 之后进行排序

> ID：11872121
> 
> 赞同：3
> 
> 时间：2012-08-08T19:51:32.833
> 
> 标签：forms, sorting, loops, coldfusion

所以我有这个代码：

```
<!-- New Array for my loop -->
<cfset filesArray = ArrayNew(1)>
<!-- index for loop -->
<cfset arrayIndex = 1>

<!-- When a user attaches a file jQuery attaches a
hidden input element to the DOM with an id of 'attachedFile(index)'
and a value of the file name. This loops over the form fields looking for input with
id of 'attachedFile(something)' and sticks it into my array-->
<cfloop collection="#FORM#" item="field">
    <cfif FindNoCase('attachedFile',field) IS 1>
        <cfset filesArray[arrayIndex] = field>
        <cfoutput>#filesArray[arrayIndex]#<br></cfoutput>
        <cfset arrayIndex = arrayIndex + 1>
    </cfif>
</cfloop>

<!-- I use this to sort my array, it outputs YES
so I know it works right up until here -->
<cfoutput>#ArraySort(filesArray,'text','asc')#</cfoutput>

<!-- Simple loop over my array so I can output what I'm creating, but I get an error
"ATTACHEDFILE1 cannot be converted to a number' -->
<cfloop array=#filesArray# index="i">
    <cfoutput>#filesArray[i]#</cfoutput>
</cfloop> 
```

我不知道我在哪里尝试将索引 i 处的数组转换为数字，但这是我的全部代码。有人看到问题了吗？数组最后应该输出没问题，对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T19:55:29.243

与数组一起使用时， index in`<cfloop>`不是数字。它实际上是数组中的元素。

我知道，措辞没有意义，但请检查文档。

# jquery - jQuery 悬停不会破坏 $.each 循环

> ID：11872123
> 
> 赞同：0
> 
> 时间：2012-08-08T19:51:44.683
> 
> 标签：jquery, hover, jquery-animate

我目前正在为我的第一个网站制作动画，在这里可以找到：http: [//jsfiddle.net/thevenin/zRLFX/4/](http://jsfiddle.net/thevenin/zRLFX/4/)

摘要：我有五个递归动画的 div，带有一个 $.each() 函数来启动动画。如果您将鼠标悬停在五个 div 中的任何一个上，则动画应该会中断，并且所有 div 都应该停止移动。当您悬停 div 时，动画使用 $.each() 函数重新开始。

我的问题是，有时当 div 到达内部圆的对角轴时，hover() 函数不会触发。如果您在此位置将鼠标移动到 div 上，则鼠标将悬停在 div 上而不会被注册。Firefox 和 Chrome 都有这个问题。我怎样才能解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T19:58:11.053

悬停需要您将鼠标实际移动到悬停的对象上。因为您的对象是动画的，所以如果您只是将鼠标保持在对象的路径中，悬停将不会触发。

我怀疑如果您将鼠标移向一个圆圈也会发生这种情况，但在鼠标到达圆圈之前停止鼠标，然后圆圈在其下方动画，而不是触发悬停。

为了规避这种行为，您可以改为轮询鼠标坐标以查看它们是否在任何给定时间的圆圈范围内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T21:16:29.773

通过增加圆圈的 z-index 来解决它。我之前猜想，问题可能是由于 div 与其他所有内容的 z-index 相同，这意味着您将无法选择它们。不太确定实际推理，但至少它有效！

# cocos2d-iphone - Instructions.m（游戏说明）没有打印出说明？

> ID：11872127
> 
> 赞同：0
> 
> 时间：2012-08-08T19:51:51.323
> 
> 标签：cocos2d-iphone, init, nslog

我正在创建一个 iphone 应用程序，由于某种原因，当我运行代码时没有出现说明。这是我的指导课。当我运行程序时，什么也没有出现。

“这个游戏的对象是”不应该出现在屏幕上吗？

感谢您为我提供的任何帮助/知识:)

```
#import "Instructions.h"
#import "MainMenu.h"

@implementation Instructions

+ (CCScene *) scene
{
    CCScene * scene = [CCScene node]; // scene is an autorelease object
    Instructions * layer =  [Instructions node]; // later is an autorelease object
    [scene addChild: layer]; // add layer as a child to scene
    return scene; // return the scene
}

- (id) init
{
    if ( ( self = [super init] ) )
    {
        [ self how ];
    }
    return self;
}

- (void) how
{
    NSLog(@"The object of this game is ");
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:24:59.573

`NSLog`在屏幕上什么都不做。它只是在 Xcode 的控制台中打印您的文本。

要在屏幕上显示文本，请尝试制作标签。像这样：

```
- (void) how
{
    // Create the label
    CCLabelTTF *label = [CCLabelTTF labelWithString:@"The object of this game is..." fontName:@"Arial" fontSize:30];

    // Position it on the screen
    label.position = ccp(160,240);

    // Add it to the scene so it can be displayed
    [self addChild:label z:0];
} 
```

有关标签的更多信息：http: [//www.cocos2d-iphone.org/wiki/doku.php/prog_guide :labels](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:labels)

# magento - 如果客户登录/未登录 Magento，则显示/隐藏数据

> ID：11872129
> 
> 赞同：0
> 
> 时间：2012-08-08T19:51:55.223
> 
> 标签：magento, helper

我需要显示和隐藏一种形式是客户是否登录。

我有这个帮手：

```
 <?php
    if ($this->helper('customer')->isLoggedIn() ) {
        echo "Hide Form";
    } else {
        echo "<form id="form1" name="form1" method="post" action="post.php">
<input name="Type your name" type="text" value="name" />
<label>
  <input type="submit" name="send" id="send" value="Submit" />
</label>
</form>"; 
    }
    ?> 
```

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-08T21:09:37.447

```
<?php
    if ($this->helper('customer')->isLoggedIn() ) {
        $showHide = "style=display:none";
    } else { 
        $showHide = "style=display:block";
    }?>
    <form id="form1" name="form1" method="post" action="post.php" <?php echo $showHide;?> >
        <input name="Type your name" type="text" value="name" />
        <label>
            <input type="submit" name="send" id="send" value="Submit" />
        </label>
    </form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:32:29.180

我的猜测是您的问题来自您正在回显的 html 中的引号。Php 看到那个块`echo "<form id="`后面跟着一堆乱码，它不知道该怎么处理。

解决方案取决于该代码块的位置。如果它在模板（.phtml）文件中，那么 Kalpesh Mehta 的方法将起作用。

如果它位于块、助手或控制器之类的东西中，他们的解决方案将不起作用。在这种情况下，最简单的解决方案是将两个外部双引号（“）更改为单引号（'）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T06:33:53.840

我已经在审查文件 .phtml 中尝试过这个选项

```
<script type="text/javascript">
function hideshow(which){
if (!document.getElementById)
return
if (which.style.display=="block")
which.style.display="none"
else
which.style.display="block"
}
</script>
<?php
    if ($this->helper('customer')->isLoggedIn() ) {
        $showHide = "style=display:none";
    } else { 
        $showHide = "style=display:block";
    }?>
<?php if(Mage::helper('oscheckout')->isCouponActive()):?>
<div class="fivecol" id="coupon-container">
    <?php echo $this->getChildHtml('coupon') ?>
</div> 
```

# c++ - 一种脚本应用程序的有效数据结构？

> ID：11872131
> 
> 赞同：0
> 
> 时间：2012-08-08T19:52:04.630
> 
> 标签：c++, algorithm, class, optimization

在 C++ 中，我想编写一个类似于脚本语言的应用程序：
在“设置时间”期间的一些输入中，它将在一个大的全局数组上定义每个变量所在的位置，并在不同的数组上定义函数的顺序（ “LogicElement”）调用（包括它们的参数，如要使用的变量）。

一种实现可能如下所示：

```
class LogicElement_Generic
{
public:
  virtual void calc() const = 0;
};

class LogicElement_Mul : public LogicElement_Generic
{
  int &to;
  const int &from1;
  const int &from2;

public:
  LogicElement_Mul( int &_to, const int &_from1, const int &_from2 ) : to(_to), from1(_from1), from2(_from2)
  {}

  void calc() const
  {
    to = from1 * from2;
  }
};

char globalVariableBuffer[1000]; // a simple binary buffer
LogicElement_Generic *le[10];

int main( void )
{
  // just a demo, this would be setup from e.g. an input file:
  int *to    = (int*)globalVariableBuffer;
  int *from1 = (int*)(globalVariableBuffer + sizeof(int));
  int *from2 = (int*)(globalVariableBuffer + 2*sizeof(int));

  *from1 = 2;
  *from2 = 3;

  le[0] = new LogicElement_Mul( *to, *from1, *from2 );

  // doing all calculations:
  // finally it would be a loop iterating over all calculation functions,
  // over and over again - the area in the code where all the resources
  // would be burned...
  le[0]->calc();

  return *to;
} 
```

尽管按预期工作，但查看创建的程序集：

```
 78                    .section    .text._ZNK16LogicElement_Mul4calcEv,"axG",@progbits,_ZNK16LogicElement_Mul4calcEv,comdat
  79                    .align 2
  80                    .weak   _ZNK16LogicElement_Mul4calcEv
  82                _ZNK16LogicElement_Mul4calcEv:
  83                .LFB6:
  17:.../src/test.cpp ****   void calc() const
  84                    .loc 1 17 0
  85                    .cfi_startproc
  86 0000 55            pushq   %rbp
  87                .LCFI6:
  88                    .cfi_def_cfa_offset 16
  89                    .cfi_offset 6, -16
  90 0001 4889E5        movq    %rsp, %rbp
  91                .LCFI7:
  92                    .cfi_def_cfa_register 6
  93 0004 48897DF8      movq    %rdi, -8(%rbp)
  18:.../src/test.cpp ****   {
  19:.../src/test.cpp ****     to = from1 * from2;
  94                    .loc 1 19 0
  95 0008 488B45F8      movq    -8(%rbp), %rax
  96 000c 488B4008      movq    8(%rax), %rax
  97 0010 488B55F8      movq    -8(%rbp), %rdx
  98 0014 488B5210      movq    16(%rdx), %rdx
  99 0018 8B0A          movl    (%rdx), %ecx
 100 001a 488B55F8      movq    -8(%rbp), %rdx
 101 001e 488B5218      movq    24(%rdx), %rdx
 102 0022 8B12          movl    (%rdx), %edx
 103 0024 0FAFD1        imull   %ecx, %edx
 104 0027 8910          movl    %edx, (%rax)
  20:.../src/test.cpp ****   }
 105                    .loc 1 20 0
 106 0029 5D            popq    %rbp
 107                .LCFI8:
 108                    .cfi_def_cfa 7, 8
 109 002a C3            ret
 110                    .cfi_endproc 
```

查看装配线 95 .. 104，您可以看到对于每个变量，使用了三个间接方法。

由于这部分代码（calc() 方法）最终会被非常快速地调用，因此我希望尽可能少地使用 CPU 周期和内存带宽（通过通用 C/C++）。

我还希望实现（上面的代码中未显示）拥有两个具有完全相同布局的变量缓冲区，以便能够以多线程方法进行双缓冲以限制必要的锁（确切的实现细节对于这个问题）。

所以最大的问题是：

*   如何更改架构以减少 calc() 中的内存间接数量？
    （我希望只有两个：一个获取变量数组中的偏移地址，另一个获取变量本身 - 但我的实验将上面的代码更改为使用偏移使事情变得更糟！）
*   有没有更好的方法来设置类，从而设置 LogicElements 的数组，以便调用计算方法将使用最少的资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:01:23.440

感谢@Ed S 的提示。我改变了引用（我希望编译器可以更好地优化）。

但我做的一个更重要的步骤是比较激活优化后生成的程序集（只是一个简单的`-O2`操作）。
（我一开始并没有这样做，因为我想对生成的“纯”机器代码有一个更清晰的了解，而不是智能编译器修复愚蠢的程序员 - 但当时编译器似乎太“愚蠢”了。 ..)

因此，对于变量数组，当前结果现在非常好：

```
class LogicElement_Generic
{
public:
  virtual void calc(void * const base) const = 0;
};

class LogicElement_Mul : public LogicElement_Generic
{
  int const to;
  int const from1;
  int const from2;

public:
  LogicElement_Mul( int const _to, int const _from1, int const _from2 ) : to(_to), from1(_from1), from2(_from2)
  {}

  void calc(void * const base) const
  {
    *((int*)(base+to)) = *((int*)(base+from1)) * *((int*)(base+from2));
  }
};

char globalVariableBuffer[1000]; // a simple binary buffer
LogicElement_Generic *le[10];

int main( void )
{
  int to    = 0;
  int from1 = sizeof(int);
  int from2 = 2*sizeof(int);

  *((int*)(globalVariableBuffer+from1)) = 2;
  *((int*)(globalVariableBuffer+from2)) = 3;

  le[0] = new LogicElement_Mul( to, from1, from2 );
  le[0]->calc(globalVariableBuffer);

  return *((int*)(globalVariableBuffer+to));
} 
```

与组件的相关部分：

```
 17:.../src/test.cpp ****   void calc(void * const base) const
  12                    .loc 1 17 0
  13                    .cfi_startproc
  14                .LVL0:
  18:.../src/test.cpp ****   {
  19:.../src/test.cpp ****     *((int*)(base+to)) = *((int*)(base+from1)) * *((int*)(base+from2));
  15                    .loc 1 19 0
  16 0000 4863470C      movslq  12(%rdi), %rax
  17 0004 48634F10      movslq  16(%rdi), %rcx
  18 0008 48635708      movslq  8(%rdi), %rdx
  19 000c 8B0406        movl    (%rsi,%rax), %eax
  20 000f 0FAF040E      imull   (%rsi,%rcx), %eax
  21 0013 890416        movl    %eax, (%rsi,%rdx)
  20:.../src/test.cpp ****   }
  22                    .loc 1 20 0
  23 0016 C3            ret
  24                    .cfi_endproc 
```

因此，我将第一个问题作为已回答的问题进行调查！:)

第二个仍然开放。
（现在更是如此，因为指针算术可能是有效的 C++ - 但非常难看......）

# git - Git 共享存储库不能作为“共享”工作

> ID：11872132
> 
> 赞同：1
> 
> 时间：2012-08-08T19:52:05.977
> 
> 标签：git, push, shared

首先很抱歉，但我确实搜索并没有发现任何对我有帮助的东西。

我在工作中的测试服务器中创建了一个 git 存储库，如下所示：

```
cd home/REPO
git init 
```

然后我在本地机器上克隆（空）：

```
cd /home/workingFolder
git clone ssh://me@ip:port/home/REPO 
```

一切都很好。然后我复制了一些已经存在的文件（.doc），然后：

```
git add . 
```

并提交并推送到服务器 REPO

```
git commit
git push 
```

然后，我的朋友将 REPO 克隆到他的机器中并获取文件。

现在我包含了另一个文件，git 添加、提交和推送没有问题。

当我的朋友尝试拉或取时不会发生任何事情。

也许我不明白 Git 应该如何工作，但我如何在同事之间共享文件？这是 REPO 服务器中的配置文件

```
[core]
    repositoryformatversion = 0
    filemode = true
    bare = true
    logallrefupdates = true
    sharedRepository = true
 [push]
    default = current 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:22:37.973

就我个人而言，我会尝试使用 github。在那种情况下，我会这样做：

```
$ mkdir my_git_test
$ cd my_git_test/
$ do the github stuff

Create the repository in github on the github site (free).
Then use the 'copy' link/button

Then, in a terminal do:
$ git clone [paste], e.g. git clone https://github.com/durrantm/my_git_test.git

$ cd my_git_test

$ touch aaa # as a test
(or move your existing files into the `my_git_test` directory)

$ git status # Make sure there are changes showing

$ git add .  # Add your changes to your repository.

$ git commit -m  "One Change"

$ git push origin master

Your friend can then do:
(github) Use the 'copy' link/button
Then, in a terminal locally, do
$ git clone [paste], e.g. git clone https://github.com/durrantm/my_git_test.git 
```

展望未来，在进行（本地）更改后，您应该遵循以下程序：

*   在本地进行更改。
*   `git pull origin master`（看看有没有什么变化）
*   解决任何冲突（如果有任何冲突，您将看到相应的消息）。
*   `git push origin master`（推动你的改变）

如果你真的需要的话，你可以调整它以使其在没有 github 的情况下工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T21:35:24.787

也许我不明白 Git 应该如何工作......

这就是问题所在。

解决了将中央存储库创建为 --bare 的问题。裸露意味着此存储库不包含项目的任何实际文件，仅包含有关快照的信息。

# ruby - Ruby/Selenium 出错

> ID：11872138
> 
> 赞同：0
> 
> 时间：2012-08-08T19:52:26.107
> 
> 标签：ruby, selenium-webdriver

我正在尝试将 Selenium 与 Ruby 一起使用。我是 Ruby 新手，我使用这个博客 [http://testnerdy.blogspot.ca/2009/10/installing-ruby-and-selenium-on-windows.html](http://testnerdy.blogspot.ca/2009/10/installing-ruby-and-selenium-on-windows.html)进行设置，我使用 的 Ruby 脚本来自这里 - [http://testnerdy.blogspot.ca/2009/10/running-selenium-tests-written-in-ruby.html](http://testnerdy.blogspot.ca/2009/10/running-selenium-tests-written-in-ruby.html)

当我运行脚本时，我得到了这个错误

SeleniumRubyWindowsTest.rb:1:in `require': no such file to load -- selenium/client (LoadError) from SeleniumRubyWindowsTest.rb:1

关于我可能做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:00:07.430

你安装了硒宝石吗？如果是这样，根据您的 ruby​​ 版本，您可能需要执行

```
require 'rubygems' 
```

作为脚本的第一行来拉入所有 gem 依赖项，其中 selenium 可能是一个。

# mysql - 如何获取包含特定字符串的列名

> ID：11872140
> 
> 赞同：0
> 
> 时间：2012-08-08T19:52:34.297
> 
> 标签：mysql

我有一个带有以下列/值的 mysql 表

```
d1   d2   d3   d4   d5
10   12   9    2    6 
```

我无法弄清楚如何获取匹配值的列名......因为 `d1` 如果匹配值是 `10`. 我只是想为匹配的值返回列名

这是订单列表查询。这个查询的问题是它返回所有部门的所有待处理订单。但如果我添加 AND `stage`= 'd1' 我会工作我只是不知道如何从我演示的布局中获取 'd1' 或 'd2' 'd3'

```
SELECT `phoenix_so`.`id`, `stage`, `so_number`, `service` AS service_id, `cid`, `uid`, `pec`, `customer_name`, `phoenix_so_service`.`name` AS service, `location`, `phoenix_so_priority`.`name` AS pri, `phoenix_so_priority`.`css_class`, `phoenix_so_type`.`name` as type, `phoenix_so_type`.`css_class` AS type_css
FROM (`phoenix_so`)
LEFT JOIN `phoenix_so_service` ON `phoenix_so`.`service` = `phoenix_so_service`.`id`
LEFT JOIN `phoenix_so_priority` ON `phoenix_so`.`priority` = `phoenix_so_priority`.`id`
LEFT JOIN `phoenix_so_type` ON `phoenix_so`.`type` = `phoenix_so_type`.`id`
LEFT JOIN `phoenix_so_roadmap` ON `phoenix_so`.`service` = `phoenix_so_roadmap`.`service_id`
WHERE `inv_access_cdate` = "0000-00-00" 
```

# python - 将文件拖入 QtGui.QLineEdit() 以设置 url 文本

> ID：11872141
> 
> 赞同：5
> 
> 时间：2012-08-08T19:52:36.117
> 
> 标签：python, drag-and-drop, pyside

我`QtGui.LineEdit()`使用 pySide Qt 绑定在 python 脚本中制作了一个小部件，我希望能够将文件从桌面拖到 QLineEdit 中，以将 QLineEdit 中的文本设置为文件的路径。我已经完成`QLineEdit.setDragEnabled(True)`了启用拖放操作，但我是一个不知道如何从这里开始的机器人。有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T20:34:03.890

通常，对于事件，您可以使用 QObject.eventFilter 和 QObject.installEventFilter 来拦截事件并处理它们。但是，它似乎不适用于 QDrag/QDrop 事件（如果我在这方面错了 - 请其他人告诉我，因为我已经把所有的头发都拉了出来，试图找出让它工作的方法过滤）。

我知道如何做到这一点的最好方法是，您必须继承 QLineEdit 并重载 dragEnterEvent、dragMoveEvent 和 dropEvent 方法，以检查拖入类中的内容是否有效。就像是：

```
 from PySide.QtGui import QLineEdit

    class FileEdit(QLineEdit):
        def __init__( self, parent ):
            super(FileEdit, self).__init__(parent)

            self.setDragEnabled(True)

        def dragEnterEvent( self, event ):
            data = event.mimeData()
            urls = data.urls()
            if ( urls and urls[0].scheme() == 'file' ):
                event.acceptProposedAction()

        def dragMoveEvent( self, event ):
            data = event.mimeData()
            urls = data.urls()
            if ( urls and urls[0].scheme() == 'file' ):
                event.acceptProposedAction()

        def dropEvent( self, event ):
            data = event.mimeData()
            urls = data.urls()
            if ( urls and urls[0].scheme() == 'file' ):
                # for some reason, this doubles up the intro slash
                filepath = str(urls[0].path())[1:]
                self.setText(filepath) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-24T13:41:47.870

当像这样使用时，使用上面提到的 eventFilter 机制确实有效：

```
from PyQt4.QtCore import QObject, QEvent

class QLineEditDropHandler(QObject):    
    def eventFilter(self, watched, event):
        if event.type() == QEvent.DragEnter:
            # we need to accept this event explicitly to be able to receive QDropEvents!
            event.accept()
        if event.type() == QEvent.Drop:
            md = event.mimeData()
            if md.hasUrls():
                obj.setText(url.toLocalFile())
                return True
        return super().eventFilter(watched, event) 
```

现在，可以在任何行编辑上使用 drop 处理程序，而无需子类化：

```
lineEdit.installEventFilter(QLineEditDropHandler(self)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-24T21:56:15.470

Erics 答案的一个稍微改进的版本（我希望）将是一个注入器的简短实现，它可以将拖放功能添加到现有的对象。这在使用 QtDesigner 进行设计时帮助了我 -

```
from PyQt4.QtGui import QLineEdit

# reference taken from : http://stackoverflow.com/questions/11872141/drag-a-file-into-qtgui-qlineedit-to-set-url-text

class lineEdit_dragFile_injector():
    def __init__(self, lineEdit, auto_inject = True):
        self.lineEdit = lineEdit
        if auto_inject:
            self.inject_dragFile()

    def inject_dragFile( self ):
        self.lineEdit.setDragEnabled(True)
        self.lineEdit.dragEnterEvent = self._dragEnterEvent
        self.lineEdit.dragMoveEvent = self._dragMoveEvent
        self.lineEdit.dropEvent = self._dropEvent

    def _dragEnterEvent( self, event ):
        data = event.mimeData()
        urls = data.urls()
        if ( urls and urls[0].scheme() == 'file' ):
            event.acceptProposedAction()

    def _dragMoveEvent( self, event ):
        data = event.mimeData()
        urls = data.urls()
        if ( urls and urls[0].scheme() == 'file' ):
            event.acceptProposedAction()

    def _dropEvent( self, event ):
        data = event.mimeData()
        urls = data.urls()
        if ( urls and urls[0].scheme() == 'file' ):
            # for some reason, this doubles up the intro slash
            filepath = str(urls[0].path())[1:]
            self.lineEdit.setText(filepath) 
```

将以上内容保存在一个单独的文件中 - （例如 file_lineEdit.py），然后按以下方式使用它 - #usage 示例：

```
#in the main APP file, just add:

import file_lineEdit            

  ...

if __name__ == "__main__":
    app = QApplication(sys.argv)
    window = QDialog()
    ui = Ui_Dialog()
    ui.setupUi(window)
    file_lineEdit.lineEdit_dragFile_injector(ui.lineEdit)
    file_lineEdit.lineEdit_dragFile_injector(ui.lineEdit_2)
    file_lineEdit.lineEdit_dragFile_injector(ui.lineEdit_3)

    window.show()
    sys.exit(app.exec_()) 
```

# python - 我可以将函数作为参数发送到所有具有多处理的进程吗？

> ID：11872142
> 
> 赞同：2
> 
> 时间：2012-08-08T19:52:43.973
> 
> 标签：python, parallel-processing, multiprocessing

我有一个多处理用例，我想编写一个分派函数，它接收一个python函数和一个输入队列作为输入，然后通过多处理在该输入上分派该函数？

我不确定是否`args`适合传入，因为该函数不会严格共享。

```
import multiprocessing

def dispatch(queue, function):
    while True:
        if queue.empty():
            return
        current_project = queue.get()
        function(current_project)

def letter_rip(projects_filename, function):
    project_file = open(projects_filename, 'r')
    projects = project_file.readlines()
    project_file.close()

    q = multiprocessing.Queue()
    for project in projects:
        q.put(project)

    for i in xrange(0, 128):
        p = multiprocessing.Process(target=dispatch, args=(q, ???function??? ))
        p.start() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T21:59:53.553

函数是（当用作函数而不是对象时）不可变对象，因此它们的简单用法不会引起任何问题：

```
from multiprocessing import Process, Value

def callback(x):
    return x * 2

def handler(x, fn, a):
    a.value = fn(x.value)

if __name__ == '__main__':
    x = Value('d', 2)
    a = Value('d', 0)
    p1 = Process(target=handler, args=(x, callback, a))
    p2 = Process(target=handler, args=(x, callback, a))
    p1.start()
    p2.start()
    p1.join()
    p2.join()
    print a.value 
```

# ruby-on-rails-3 - 错误 325 未知错误

> ID：11872152
> 
> 赞同：1
> 
> 时间：2012-08-08T19:53:15.610
> 
> 标签：ruby-on-rails-3, google-chrome, localhost

在 OS X 10.8 上的 Chrome 21.0.1180.75 中，我的 Rails 应用程序无法加载：（[错误页面的图像](http://cl.ly/image/0x23082o3h24)）

如果您不想加载图像，则文本如下：

* * *

此网页无法使用

位于的网页`http://127.0.0.1:3000/`可能暂时关闭，或者它可能已永久移至新网址。

错误 325 (net::ERR_RESPONSE_HEADERS_TOO_BIG)：未知错误。

* * *

当我尝试使用`localhost:3000`、`127.0.0.1:3000`和访问它时它会失败`0.0.0.0:3000`，但如果我使用我的本地 IP 地址访问它，那很好。这只发生在 Chrome 中。Firefox、Safari 和 Opera 能够完美地加载 localhost。

我已经清除了缓存和cookie，但无济于事。关于可能发生的事情有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:02:40.497

来自[http://productforums.google.com/forum/#!topic/chrome/N0zL6FXq2SE%5B1-25%5D](http://productforums.google.com/forum/#!topic/chrome/N0zL6FXq2SE%5B1-25%5D)：

*   存储过大的数组
*   在逻辑流期间使用标头重定向
*   取消设置 cookie 数组

查看您的代码是否触发了这些情况。

# java - 锁定选择以进行更新，但不锁定常规选择

> ID：11872153
> 
> 赞同：0
> 
> 时间：2012-08-08T19:53:17.467
> 
> 标签：java, database, hibernate, locking

我正在实施一个系统，我在其中区分`SELECT ...`和`SELECT ... FOR UPDATE`。

正`SELECT ...`则用于读取允许处于“不正确”状态的实体（不正确 = 可能稍后更新）

`SELECT ... FOR UPDATE`总是用于读取目标以编辑它的对象，因此它应该返回对象的正确状态。

现在我正在尝试执行以下操作：每当语句读取对象时`SELECT ... FOR UPDATE`，将其他查询锁定`SELECT ... FOR UPDATE`在同一对象上。但是，常规`SELECT ...`应该仍然有效。

有没有办法只使用预定义的锁来做到这一点？我查看了数据库隔离级别，但我认为它们不是我的问题的一部分。

我正在使用 java、hibernate 和 sql 数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:04:56.000

选择更新不会在 MySQL 中锁定。它在 Oracle、Postgres、MS SQL 中工作。

# perl - 从 C 模块 .so 加载 perl .pm 模块

> ID：11872159
> 
> 赞同：2
> 
> 时间：2012-08-08T19:53:40.650
> 
> 标签：perl, perl-module

我正在用 C 语言开发一个 perl 扩展模块，我想重用我编写的 perl 模块（.pm）。我用谷歌搜索，发现有一种方法可以使用 pv_call 函数从 C 代码调用 perl 子例程，但我找不到如何在不重新加载 perl 解释器的情况下加载 .pm moudle。预先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:59:49.927

用于[`eval_pv`](http://perldoc.perl.org/perlapi.html)评估`use Module;`。

# php - 即使用户离开网站也执行 MySQL 查询的 PHP 服务器端计时器？

> ID：11872161
> 
> 赞同：0
> 
> 时间：2012-08-08T19:53:43.933
> 
> 标签：php, mysql, timer

我正在写一个用户可以订购产品的网站，但问题是即使用户注销/关闭浏览器等，产品也应该在 5 分钟后自动结帐（执行 PHP 脚本，包括 MySQL 查询）。有没有人有问题类似于此。我应该如何进行编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:59:15.213

将与要签出的产品相关的信息存储在数据库中。每分钟运行的 cron 作业将导致结帐 5 分钟前的产品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T19:59:54.733

这就是我要做的。据我所知，MySQL 不能有定时延迟。您可以有一个运行和执行语句的 cron 作业。我要做的是在购物车表中创建一个额外的字段并设置未来的结帐时间。创建一个每分钟在服务器上运行的 cron 作业。让那个 cron 工作对结帐时间少于当前时间的购物车进行快速轮询。如果找到，请在该购物车上运行结帐程序，然后将其删除或将其标记为已签出，以便它不会再次重新签出。

虽然我无法为您提供示例代码，因为您没有提供任何内容，但这至少会给您一个起点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T20:00:58.353

由于这是一个重复的自动化任务，您需要设置一个 cron 或其他任务调度程序。粗略地说，这就是它的工作方式：

1.  当用户将产品添加到购物车时，它会进入数据库，并带有一个指示其未签出的标志以及添加到数据库/购物车的时间戳。

2.  如果产品是由用户从浏览器显式结帐的，则更新此标志以反映相同。

3.  cron 每隔一两分钟唤醒一次，并检查此表中添加到购物车的商品的时间戳，而结账标志未更新并在 5 分钟之前添加。

4.  它检查此类产品并更新标志。

请注意，您仍然需要进一步调整此流程以处理诸如如果用户在您的 cron 执行相同操作时手动签出会发生什么等情况

但简而言之，我认为这就是我将如何着手解决这个问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T20:14:03.960

一个人肯定想要与逛商店类似的体验吗？

喜欢捡东西，四处游荡。

也许那个人已经决定把篮子留在柜台了？一定要在一段时间内提供产品并通知他们时间到了（或需要在 X 分钟内购买）

那么为什么自动结帐的东西呢？

有人假设您不希望一个人决定不买东西而您正在拿现金？也许那个人的互联网连接已经死/笔记本电脑没电了/...？

请让他们必须通过结帐，这将比自动出售他们可能不想要的东西支付更好的红利....

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T20:02:34.150

我真的认为 5 分钟对于这种验证来说持续时间很短，但是你应该有一个 cron 作业，它每 5-10 分钟运行一个 php 脚本来验证用户活动的最后日期和最后（未完成的）订单。如果日期最小，则实际日期`time()`减去 5 分钟，那么您应该从 db.xml 中删除该用户的条目。

验证应该从订单表中进行，而不是针对每个现有用户。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T20:56:34.863

如果用户要离开页面，我想他请求了该页面（它不是自动执行的，就像 cronjob 一样）。

php 的正常行为是完全执行脚本，即使在此期间 usr 离开也是如此。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-08T21:03:11.980

不过，这只是一种闲置——这种购物体验是针对一次性产品（如古董）还是普通商品（如杂货）？

如果是后者而不是前者，何必呢？当然，一家好的商店可以补货，因此无论如何都可以以给定的价格销售该特定产品。如果前者需要拍卖。

# java - Tomcat 7 无法与 MySQL 5.5 建立数据库连接

> ID：11872162
> 
> 赞同：0
> 
> 时间：2012-08-08T19:53:47.367
> 
> 标签：java, mysql, tomcat, ubuntu

当尝试访问从数据库读取的 servlet 时，出现以下错误：

```
HTTP Status 500 -
...
java.lang.NullPointerException
    com.pdq.sms.db.DatabaseAccess.getConnection(DatabaseAccess.java:39)
    com.pdq.sms.db.DataRow.Read(DataRow.java:79)
    com.kessel.controllers.Home.doPost(Home.java:50)
    com.kessel.controllers.Home.doGet(Home.java:39)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
note The full stack trace of the root cause is available in the Apache Tomcat/7.0.26 logs. 
```

查看 Tomcat 日志文件，我发现：“名称 testapp 未绑定在此上下文中”

这是**server.xml的相关部分**

```
<Host name="myserver.org" appBase="webapps/test" 
      unpackWARs="true" autoDeploy="true">
   <Context path="/" docBase="testapp" reloadable="false">
      <Resource name="jdbc/testapp" auth="Container"
          type="javax.sql.DataSource" maxActive="100" maxIdle="10" maxWait="10000"
          validationQuery="SELECT 1" driverClassName="com.mysql.jdbc.Driver"
          username="myuser" password="mypass"
          url="jdbc:mysql://localhost:3306/test_db?zeroDateTimeBehavior=convertToNull" />
    </Context>"
</Host>" 
```

我还修改了**04webapps.policy**以授予应用程序连接权限：

```
 permission java.net.SocketPermission "127.0.0.1:3306", "resolve, connect"; 
```

用户已在 MySQL 服务器上正确设置，我可以在相关数据库上手动连接和选择、插入等。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T04:12:47.100

更改您的资源名称；

```
 java:comp/env/jdbc/testapp 
```

至

```
 java://comp/env/jdbc/testapp 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-08T20:37:13.253

首先将 jdbc 代码编写为一个简单的 java 程序，不要忘记将 jdbc 驱动程序添加为外部 jar 文件。您也可以**尝试将 jdbc jar 文件放在 tomcat lib 文件夹或 jre/lib/ext 文件夹**中，这是因为当 servlet 编译时，它会借助 cse 中的 lib jar 文件将其放入第 3 方 jar 中。如果 jdbc 连接代码没有错误，它将在添加 jar 文件后运行文件

# html - 为什么谷歌地图不能在我的网页上导航？

> ID：11872163
> 
> 赞同：-1
> 
> 时间：2012-08-08T19:53:52.617
> 
> 标签：html, google-maps, navigation

我想使用 Geolocation 定位用户的位置，然后在用户位置和固定点之间导航，但 Google 地图无法导航，我使用的是 Google 官方文档中的代码！

怎么了？尝试了数千次后我要疯了，请帮助

```
 <script type="text/javascript">

    $( "#map-page" ).live( "pageinit", function() {

        var directionsDisplay;
        var directionsService = new google.maps.DirectionsService();
        var map;
        var salon = new google.maps.LatLng(22.981666,120.194301);
        var defaultLatLng = new google.maps.LatLng(22.983587,120.22599);  // Default to Hollywood, CA when no geolocation support

        if ( navigator.geolocation ) {
            function success(pos) {
                // Location found, show map with these coordinates
                drawMap(new google.maps.LatLng(pos.coords.latitude, pos.coords.longitude));
                calcRoute(new google.maps.LatLng(pos.coords.latitude, pos.coords.longitude));

            }

            function fail(error) {
                console.log(error);
                drawMap(defaultLatLng);  // Failed to find location, show default map
            }

            // Find the users current position.  Cache the location for 5 minutes, timeout after 6 seconds
            navigator.geolocation.getCurrentPosition(success, fail, {maximumAge: 500000, enableHighAccuracy:true, timeout: 6000});
        } else {
            drawMap(defaultLatLng);  // No geolocation support, show default map    
        }

        function drawMap(latlng) {
            var myOptions = {
                zoom: 10,
                center: latlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP

            };

            var map = new google.maps.Map(document.getElementById("map-canvas"), myOptions);

            // Add an overlay to the map of current lat/lng
            var marker = new google.maps.Marker({
                position: latlng,
                map: map,
                title: "Greetings!"
            });

            var marker = new google.maps.Marker({
                position:new google.maps.LatLng(22.981666,120.194301),
                map:map,
                title:"the salon"
            });
        }

        function calcRoute(latlng) {
        var start = latlng;
        var end = new google.maps.LatLng(22.981666,120.194301);
        var request = {
            origin:start,
            destination:end,
            travelMode: google.maps.TravelMode.DRIVING
        };
        directionsService.route(request, function(response, status) {
            if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(response);
        }
      });
    }

    });

        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T22:24:20.340

你忘了设置`directionsDisplay`。

# python - 在python中监听子进程失败

> ID：11872164
> 
> 赞同：2
> 
> 时间：2012-08-08T19:53:55.130
> 
> 标签：python, subprocess, popen

使用`subprocess.Popen()`，我正在启动一个应该需要很长时间的过程。但是，该过程有可能在启动后不久失败（产生返回码`1`）。如果发生这种情况，我想拦截失败并向用户显示解释性消息。有没有办法“倾听”该过程并在失败时做出响应？我不能只使用`Popen.wait()`，因为我的 python 程序必须继续运行。

我现在的 hack 是`time.sleep()`我的 python 程序 0.5 秒（如果它要这样做的话，这应该足够让子进程失败）。python程序恢复后，它会轮询子进程以确定它是否失败。

我想更好的解决方案可能会使用线程和`Popen.wait()`，但我是 python 的相对初学者。

编辑：子进程是我正在启动的 Java 守护进程。如果该守护进程的另一个实例已经在系统上运行，Java 子进程将以返回码 1 退出，我想截取杂乱的 Java 异常堆栈跟踪并向用户显示可以理解的错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T22:21:12.573

两种方法：

*   按照您自己的建议调用`Popen.wait()`线程，然后在退出代码非零时调用错误处理函数。确保错误处理程序是线程安全的，如果您的应用程序具有事件循环，最好将错误消息分派到主线程。
*   重写您的应用程序以使用已经支持监视子进程的事件循环，例如[pyev](http://packages.python.org/pyev/)。如果您只想监视一个子进程，这可能是矫枉过正。

# visual-studio-2010 - 如何在 64 位机器上调试 32 位 WCF 服务？

> ID：11872172
> 
> 赞同：1
> 
> 时间：2012-08-08T19:54:30.917
> 
> 标签：visual-studio-2010, wcf

我有一个依赖于 32 位 DLL 的 WCF 服务，因此它需要在 32 位模式下运行。但是，在 64 位 Windows 7 机器上，Visual Studio 2010 以 64 位启动 WcfServiceHost.exe，当它尝试加载我的服务时，它会抛出一个`BadImageFormatException`.

如何在 64 位机器上调试 32 位 WCF 服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:03:50.003

不幸的是，`WcfServiceHost.exe`将始终在 64 位系统上运行 64 位。您可以[显式修改它以在 32bit 中运行](http://controlflow.info/?p=9)，但这是一个相当苛刻的解决方法。

我通常会编写自己的托管应用程序，并使用它直接调试服务，而不是在`WcfServiceHost`需要控制运行时模式时使用。

# asp.net-mvc-3 - 在 ASP.NET MVC 3 中，如何在一个视图中有两个表单，分别工作且运行良好？

> ID：11872174
> 
> 赞同：2
> 
> 时间：2012-08-08T19:54:45.623
> 
> 标签：asp.net-mvc-3, forms, form-submit, asp.net-mvc-views

我有两种操作方法。其中一个提交“新产品”的插入数据，另一个表单必须上传该产品的照片。每个人都有自己的模型、视图，每个人都从完全独立的控制器中调用自己的动作。

但我需要在一个视图中同时拥有这两种形式。

我通过使用@html.action() 在“插入新产品”操作的视图中呈现“上传”操作的视图来完成此操作。

**问题是**，两个提交按钮都调用相同的“插入新产品”操作：|

看一看。这是第一个视图：

```
@using (Html.BeginForm("Insert_New_Product", "Admin", FormMethod.Post))
{
// Inputs, Validation Messages and all those stuff ...
   <input type="submit" name="Insert_New_Product" value="Add New Product" />

// Here, I render the "Upload" View :
   @Html.Action("Upload", "UploadImage")
 } 
```

“上传”视图如下所示：

```
@using (Html.BeginForm("Upload", "UploadImage", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
// Inputs and stuff ... 

  <input type="submit" value="Upload" name="Upload"/>
} 
```

那么这怎么可能有两个（或更多）表单，每个表单在提交时都调用它自己的 ActionResult 呢？我会很感激你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:12:54.180

我认为这`@Html.Action("Upload", "UploadImage")`是问题所在。您实际上是在第一个表单中呈现第二个*表单*。那是行不通的。尝试将其更改为：

```
@using (Html.BeginForm("Insert_New_Product", "Admin", FormMethod.Post)) 
{ 
    // Inputs, Validation Messages and all those stuff ... 
    <input type="submit" name="Insert_New_Product" value="Add New Product" />
} 

// Here, I render the "Upload" View : 
@Html.Action("Upload", "UploadImage") 
```

此外，您应该真正使用`Html.RenderAction`而不是`Html.Action`直接写入响应流。请参阅[此处](http://haacked.com/archive/2009/11/18/aspnetmvc2-render-action.aspx)了解更多信息。像这样：

```
@{ Html.RenderAction("Upload", "UploadImage"); } 
```

# iphone - NSMutableArray 和我的表的问题

> ID：11872175
> 
> 赞同：-1
> 
> 时间：2012-08-08T19:54:48.290
> 
> 标签：iphone, xcode, cocoa, uitableview, nsmutablearray

我试图能够将一个对象插入到我的表中，但是每当我点击添加按钮时，它就会因为未捕获的异常而崩溃。它说

```
Attempt to insert row 0 into section 0, but there are only 0 rows in section 0 after the update 
```

这是我的主视图控制器，它处理我所有的表格内容......

```
#import "MasterViewController.h"

#import "DetailViewController.h"

#define kFileName       @"steakNames.plist"

@interface MasterViewController () {
    NSMutableArray *_objects;
}
@end

@implementation MasterViewController

@synthesize steakName;

- (NSString *)dataFilePath {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    return [documentsDirectory stringByAppendingPathComponent:kFileName];
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"Master", @"Master");
    }
    return self;
}

- (void)viewDidLoad
{
    NSString *filePath = [self dataFilePath];
    if ([[NSFileManager defaultManager] fileExistsAtPath:filePath]) {
        _objects = [[NSMutableArray alloc] initWithContentsOfFile:filePath];
    }

    UIApplication *app = [UIApplication sharedApplication];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(applicationWillResignActive:) name:UIApplicationWillResignActiveNotification object:app];

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    self.navigationItem.leftBarButtonItem = self.editButtonItem;

    UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(insertNewObject:)];
    self.navigationItem.rightBarButtonItem = addButton;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (void)insertNewObject:(id)sender
{
    if (!steakName) {
        steakName = @"No name";
    }
    [_objects insertObject:[self steakName] atIndex:0];

    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];

    [self.tableView insertRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
}

#pragma mark - Table View

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return _objects.count;
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    NSDate *object = [_objects objectAtIndex:indexPath.row];
    cell.textLabel.text = [object description];
    return cell;
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:  (UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        [_objects removeObjectAtIndex:indexPath.row];
        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
    } else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view.
    }
}

/*
// Override to support rearranging the table view.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath    *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
}
*/

/*
// Override to support conditional rearranging of the table view.
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the item to be re-orderable.
    return YES;
}
*/

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (!self.detailViewController) {
        self.detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
    }
    NSDate *object = [_objects objectAtIndex:indexPath.row];
    self.detailViewController.detailItem = object;
    [self.navigationController pushViewController:self.detailViewController animated:YES];
}

- (void)applicationWillResignActive:(NSNotification *)notification {
    [_objects writeToFile:[self dataFilePath] atomically:YES];
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:05:42.687

错误的原因很可能是返回 0：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    return ...;
} 
```

我建议您首先获取一个完整的表格视图工作示例及其所有必需的方法，然后从那里开始。

通常你需要实现这些方法：

*   (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView

*   (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section

*   (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section

*   (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

*   (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath

到目前为止，任何 NSMutableArray 都没有问题，无论如何，如果数组还没有对象数量，则不能在索引处插入对象，例如在索引 4 处插入但数组只有 2 个对象。您始终可以将对象添加到 NSMutableArray 并增加此数组中的对象数量。

# java - OnListItemClick 无法正常工作

> ID：11872176
> 
> 赞同：0
> 
> 时间：2012-08-08T19:54:51.647
> 
> 标签：java, android, listview

在我的应用程序中，我有一个扩展 ListActivity 并使用 ListView 的类。我的 onListItemClick 方法就是不想工作。在方法内部，它必须确定被点击的项目是锻炼 A 还是锻炼 B。下面是代码：

```
@Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);

        Long rowId = id;

        Cursor cursor = mDbHelper.fetchNote(rowId);

        String activity = cursor.getString(cursor.getColumnIndexOrThrow(StrongDbAdapter.WORKOUT_STATE));

        if(activity == "Workout A"){
            workoutAA = true;
        }else if(activity == "Workout B"){
            workoutAA = false;
        }

        if(workoutAA == true){
            Intent i = new Intent(this, WorkoutEditA.class);
            i.putExtra(StrongDbAdapter.KEY_ROWID, id);
            startActivityForResult(i, ACTIVITY_EDIT);
        }else if(activity == "Workout B"){
            Intent i = new Intent(this, WorkoutEditB.class);
            i.putExtra(StrongDbAdapter.KEY_ROWID, id);
            startActivityForResult(i, ACTIVITY_EDIT);
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T19:55:38.387

`activity.equals( "Workout A")`. 当字符串比较使用`equals()`

避免 NullPointerException 的另一种方法是

```
"Workout A".equals(acitivty) 
```

# jquery - 点击后获取ID

> ID：11872182
> 
> 赞同：1
> 
> 时间：2012-08-08T19:55:19.933
> 
> 标签：jquery, url, get, onclick

我有一组链接：

```
<a href='#?idCountry=" + MX + "' class='SendData'>"Mexico"</a>
<a href='#?idCountry=" + EU + "' class='SendData'>"USA"</a>
<a href='#?idCountry=" + CO + "' class='SendData'>"Colombia"</a> 
```

然后我使用以下函数来获取从 URL 中单击的值：

```
$.urlParam = function(name){
var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);
if (results==null){
return null;
}else{
return results[1] || 0;
}   
} 
```

...我正在使用 click() 事件来获取点击值：

```
$(document).ready(function() {
$(".SendData").click( function(e) {

    var idCountry = $.urlParam('idCountry');  
    console.log(idCountry);
    ....other actions with idCountry
}
}); 
```

它有效，但仅在第二次 clic 之后，我想是因为它首先执行查询功能，然后更改 URL 值。

单击链接后，我必须获得哪些选项来获取**idCountry ？**

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:05:57.093

您可以尝试以下（untestet）：

```
$.urlParam = function(url, name){
var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(url);
if (results==null){
return null;
}else{
return results[1] || 0;
}   
}

$(document).ready(function() {
$(".SendData").click( function(e) {

    var idCountry = $.urlParam($(this).prop('href'),'idCountry');  
    console.log(idCountry);
    ....other actions with idCountry
}
}); 
```

# python - 使用 Python 添加数据时如何在 Excel 中保留宏按钮

> ID：11872185
> 
> 赞同：2
> 
> 时间：2012-08-08T19:55:30.590
> 
> 标签：python, excel, xlrd, xlwt

对于我正在维护的流程，我有一个创建 csv 文件的脚本，然后我将 csv 文件复制到带有激活宏的按钮的 Excel 工作簿中。这个过程工作得很好。

我试图通过编写直接构建工作簿的脚本来改进该过程，从而消除了一个步骤。我认为最好的方法是创建一个模板工作簿，其中第一个工作表有宏按钮。然后我只需复制模板工作簿，添加我的数据并以新的自定义名称保存新工作簿。我的测试代码如下：

```
import csv, os, sys, xlrd, xlwt, xlutils, shutil
from copy import deepcopy
from xlutils import save
from xlutils.copy import copy

templatefile = 'N:\Tools\Scripts-DEV\Testing_Template.xls'
Destfile = 'N:\Tools\Scripts-DEV\Testing_Dest.xls'

shutil.copy(templatefile,Destfile)

# Works fine up to here.  
# If you look at the new file, it has the button that is in the template file.

rb = xlrd.open_workbook(Destfile)

rs = rb.sheet_by_index(0)

wb = copy(rb)  

wb.get_sheet(0).write(3, 0, 'Due Date')
wb.get_sheet(0).write(3, 1, 'Name')
wb.get_sheet(0).write(3, 3, 'Category')
wb.get_sheet(0).write(3, 4, 'Number')

wb.save(Destfile) 
```

这就是问题出现的地方。保存后，宏按钮消失。我一直在寻找几天，但我还没有（还）找到一种方法来保存更新的 Excel 文件而不会丢失宏按钮。

我一直在研究[使用 python 的 xlrd、xlwt 和 xlutils.copy 保留样式，](https://stackoverflow.com/questions/3723793/preserving-styles-using-pythons-xlrd-xlwt-and-xlutils-copy)但这并不能完全满足我的需求，因为我试图保留一个按钮，而不是一个样式。

有谁知道这样做的方法？

我也将开始寻找替代品`xlutils, xlrd and xlwt`，但我想我会先在这里问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:54:17.080

从您的评论部分`C:\Python27\`，我推断您在 Windows 上。在这种情况下，使用[pywin32](http://sourceforge.net/projects/pywin32/)和模板`.xls`或`.xlsm`文件可能会更好。

使用打开文件，`os.startfile(filename)`然后使用连接`workbook = win32com.client.GetObject(filename)`。生成的工作簿可以填充数据并使用 `workbook.SaveAs(newfilename) 写入新文件。

您未明确触摸的任何内容都会被保留。当然，Excel 在这方面比`xlrd`,`xlwt`和`xlutils`.

# html - 粘性页脚不粘在页面底部

> ID：11872189
> 
> 赞同：3
> 
> 时间：2012-08-08T19:55:49.473
> 
> 标签：html, css, sticky-footer

我的网站页脚似乎有问题。基本上它不会粘在我的页面底部，而是粘在我的 div 底部，称为 main。谁能帮我这个？

如果您缩小网页，您将看到问题:)

[这个网站](http://www.thomasteilmann.dk/powerdisco)

我没有粘贴代码，因为它包含很多 php 等。希望没事。:)

页脚CSS：

```
#footer{
width: 100%;
float: left;
height: 70px;
bottom: 0;
clear: both;
background-image: url("../images/footer_pattern.png");
display: block; 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T20:13:12.607

```
#footer{
    width: 100%;
    height: 70px;
    clear: both;
    background-image: url("../images/footer_pattern.png");
    position: fixed;
    bottom: 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T20:17:25.607

对于您所指的网站，通过扩展包装器 div，它会将页脚向下推。下面是包装器的修改后的 css。

```
 #wrapper
  {
      height: 100%;
      margin: 0 auto;
      min-width: 1000px;
  } 
```

将高度设置为 100% 而不是自动。

通过将包装器高度设置为 100%，它将 div 扩展到窗口的底部，并将页脚也向下推。

我要改变的另一件事是不要让#footer 向左浮动。

# algorithm - 数组保持不变的概率是多少？

> ID：11872190
> 
> 赞同：74
> 
> 时间：2012-08-08T19:55:49.463
> 
> 标签：algorithm, math, probability

这个问题在微软面试中被问到过。非常想知道为什么这些人会问这么奇怪的概率问题？

给定一个 rand(N)，一个随机生成器，它生成从 0 到 N-1 的随机数。

```
int A[N]; // An array of size N
for(i = 0; i < N; i++)
{
    int m = rand(N);
    int n = rand(N);
    swap(A[m],A[n]);
} 
```

**编辑：**请注意，种子不是固定的。

数组 A 保持不变的概率是多少？
假设数组包含唯一元素。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-09T04:56:29.920

[*好吧，我对这个有一点乐趣。当我第一次阅读这个问题时，我首先想到的是群论（特别是对称群 S [n]）。for 循环通过在每次迭代中组合转置（即交换）来简单地在 S [n]中构建置换 σ 。我的数学并没有那么出色，而且我有点生疏，所以如果我的符号不合适，请忍耐。*]

* * *

## 概述

假设`A`我们的数组在排列后不变。我们最终被要求找到事件的概率`A`，`Pr(A)`。

我的解决方案尝试遵循以下过程：

1.  考虑所有可能的排列（即我们数组的重新排序）
2.  根据它们包含的所谓*身份转置*的数量，将这些排列划分为*不相交的集合。*这有助于将问题减少到仅*偶数*排列。
***   假设排列是偶数（并且具有特定长度），确定获得恒等排列的概率。*   对这些概率求和以获得数组不变的整体概率。**

 **## 1) 可能的结果

请注意，for 循环的每次迭代都会创建一个交换（或*转置*），它会导致以下两种情况之一（但绝不会同时出现两种情况）：

1.  交换了两个元素。
2.  元素与自身交换。出于我们的意图和目的，数组没有改变。

我们标记第二种情况。让我们定义一个*恒等转置*如下：

> 当一个数字与自身交换时，就会发生身份*转置。*也就是说，当 n == m 在上面的 for 循环中时。

对于列出的代码的任何给定运行，我们组合`N`转置。在这个“链”中可能会`0, 1, 2, ... , N`出现身份换位。

* * *

例如，考虑一个`N = 3`案例：

```
Given our input [0, 1, 2].
Swap (0 1) and get [1, 0, 2].
Swap (1 1) and get [1, 0, 2]. ** Here is an identity **
Swap (2 2) and get [1, 0, 2]. ** And another ** 
```

请注意，有奇数个非恒等转置 (1) 并且数组已更改。

* * *

## 2) 基于身份转置次数的分区

假设`K_i`身份`i`转置出现在给定的排列中。请注意，这形成了所有可能结果的详尽划分：

*   没有一个排列可以同时有两个不同数量的恒等换位，并且
*   所有可能的排列都必须具有 between`0`和`N`identity 换位。

因此我们可以应用[全概率定律](http://en.wikipedia.org/wiki/Law_of_total_probability)：

现在我们终于可以利用分区了。请注意，当*非恒*等转置的数量为奇数时，数组不可能保持不变*。因此：

*[根据群论，排列是偶数或奇数，但绝不是两者兼而有之。因此奇排列不能是恒等排列（因为恒等排列是偶排列）。]

## 3) 确定概率

所以我们现在必须确定两个`N-i`偶数概率：

1.  ![Pr(K_i)](../Images/944a48a5280c40df596a94b6d31a43b8.png)
2.  ![Pr(A|K_i)](../Images/b0220eed748c0505d564a3b074b5f116.png)

### 第一学期

第一项 ,![Pr(K_i)](../Images/944a48a5280c40df596a94b6d31a43b8.png)表示获得具有`i`恒等转置的排列的概率。事实证明这是二项式的，因为对于 for 循环的每次迭代：

*   结果独立于之前的结果，并且
*   创建恒等转置的概率是相同的，即`1/N`。

因此，对于`N`试验，获得`i`同一性转置的概率为：

### 第二学期

因此，如果您已经做到了这一点，我们已经将问题减少到寻找![Pr(A|K_i)](../Images/b0220eed748c0505d564a3b074b5f116.png)偶数`N - i`。`i`这表示在给定转置是身份的情况下获得身份置换的概率。我使用一种简单的计数方法来确定在可能的排列数量上实现恒等排列的方法的数量。

首先考虑排列`(n, m)`和`(m, n)`等价。然后，让`M`是可能的非恒等排列的数量。我们会经常使用这个数量。

这里的目标是确定可以组合转置集合以形成恒等排列的方式的数量。我将尝试构建一个通用的解决方案`N = 4`。

* * *

让我们考虑`N = 4`所有身份转置（*ie* `i = N = 4`）的情况。让我们`X`表示一个身份转置。对于每个`X`，都有`N`可能（它们是：`n = m = 0, 1, 2, ... , N - 1`）。因此存在`N^i = 4^4`实现身份置换的可能性。为了完整起见，我们添加了二项式系数 ，`C(N, i)`以考虑恒等转置的排序（这里它仅等于 1）。我试图用上面元素的物理布局和下面的可能性数量来描述这个：

```
I  =  _X_   _X_   _X_   _X_
       N  *  N  *  N  *  N  * C(4, 4) => N^N * C(N, N) possibilities 
```

现在没有明确地替换`N = 4`and `i = 4`，我们可以看一下一般情况。将上述内容与之前找到的分母相结合，我们发现：

这是直观的。事实上，除此之外的任何其他值`1`都可能会引起您的警觉。想一想：我们处于这样一种情况，在这种情况下，所有的`N`换位都被称为同一性。在这种情况下，数组可能没有变化？很明显，`1`.

* * *

现在，再次为`N = 4`，让我们考虑 2 个单位换位（*ie* `i = N - 2 = 2`）。作为约定，我们将把这两个身份放在最后（并考虑稍后的排序）。我们现在知道我们需要选择两个转置，当它们组合时，它们将成为恒等排列。让我们将任何元素放在第一个位置，称之为`t1`。如上所述，有`M`可能假设`t1`不是一个身份（它不可能是因为我们已经放置了两个）。

```
I  =  _t1_   ___   _X_   _X_
       M   *  ?  *  N  *  N 
```

剩下的唯一可能出现在第二个位置的元素是 的逆`t1`，实际上是`t1`（这是唯一的逆唯一性）。我们再次包括二项式系数：在这种情况下，我们有 4 个开放位置，我们正在寻找放置 2 个身份排列。我们有多少种方法可以做到这一点？4选2。

```
I  =  _t1_   _t1_   _X_   _X_ 
       M   *  1   *  N  *  N  * C(4, 2) => C(N, N-2) * M * N^(N-2) possibilities 
```

再看一般情况，这都对应于：

* * *

最后我们做`N = 4`没有身份转置的情况（*ie* `i = N - 4 = 0`）。由于有很多可能性，它开始变得棘手，我们必须小心不要重复计算。我们以类似的方式开始，在第一个位置放置一个元素并计算出可能的组合。先取最简单的：相同的换位4次。

```
I  =  _t1_   _t1_   _t1_   _t1_ 
       M   *  1   *  1   *  1   => M possibilities 
```

现在让我们考虑两个独特的元素`t1`和`t2`。(因为不能等于)有并且只有`M`可能。如果我们用尽所有安排，我们将得到以下模式：`t1``M-1``t2``t2``t1`

```
I  =  _t1_   _t1_   _t2_   _t2_ 
       M   *  1   *  M-1 *  1   => M * (M - 1) possibilities   (1)st

   =  _t1_   _t2_   _t1_   _t2_
       M   *  M-1 *  1   *  1   => M * (M - 1) possibilities   (2)nd

   =  _t1_   _t2_   _t2_   _t1_
       M   *  M-1 *  1   *  1   => M * (M - 1) possibilities   (3)rd 
```

现在让我们考虑三个独特的元素`t1`, `t2`, `t3`。让我们`t1`先放置然后再放置`t2`。像往常一样，我们有：

```
I  =  _t1_   _t2_   ___   ___ 
       M   *  ?   *  ?  *  ? 
```

我们还不能说有多少可能`t2`的 s，我们马上就会知道为什么。

我们现在排`t1`在第三位。注意，`t1`必须去那里，因为如果要在最后一个地方去，我们只会重新创建`(3)rd`上面的安排。重复计算是不好的！这将第三个唯一元素留`t3`到最终位置。

```
I  =  _t1_   _t2_   _t1_   _t3_ 
       M   *  ?   *  1  *   ? 
```

那么为什么我们要花一分钟时间来`t2`更仔细地考虑 s 的数量呢？转置`t1`和`t2` ***不能***是不相交的排列（*即*它们必须共享一个（并且只有一个，因为它们也不能相等）它们的`n`or `m`）。这样做的原因是因为如果它们不相交，我们可以交换排列的顺序。这意味着我们将重复计算`(1)st`安排。

说`t1 = (n, m)`。`t2`必须是形式`(n, x)`或`(y, m)`对某些人来说`x`，并且`y`为了不脱节。请注意，`x`可能不是`n`or`m`并且`y`很多不是`n`or `m`。因此，可能的排列数`t2`实际上是`2 * (N - 2)`。

所以，回到我们的布局：

```
I  =  _t1_    _t2_    _t1_   _t3_ 
       M   * 2(N-2) *  1   *  ? 
```

现在`t3`必须是 的组合的倒数`t1 t2 t1`。让我们手动完成：

```
(n, m)(n, x)(n, m) = (m, x) 
```

因此`t3`必须是`(m, x)`。请注意，这与任何一个***都不***相交`t1`也不等于，`t1`因此`t2`这种情况下没有重复计算。

```
I  =  _t1_    _t2_    _t1_   _t3_ 
       M   * 2(N-2) *  1  *   1    => M * 2(N - 2) possibilities 
```

最后，将所有这些放在一起：

* * *

## 4）把它们放在一起

就是这样了。向后工作，将我们发现的内容代入步骤 2 中给出的原始总和。我计算了`N = 4`以下案例的答案。它与另一个答案中的经验数字非常接近！

```
         N = 4
         M = 6 _________ _____________ _________
                  | Pr(K_i) | Pr(A | K_i) | 产品 |
         _________|_________|_____________|_________|
        | | | | |
        | 我 = 0 | 0.316 | 120 / 1296 | 0.029 |
        |_________|_________|_____________|_________|
        | | | | |
        | 我 = 2 | 0.211 | 6 / 36 | 0.035 |
        |_________|_________|_____________|_________|
        | | | | |
        | 我 = 4 | 0.004 | 1 / 1 | 0.004 |
        |_________|_________|_____________|_________|
                            | | |
                            | 总和：| 0.068 |
                            |_____________|_________|

```

## 正确性

如果能在这里应用群论的结果，那就太酷了——也许有！它肯定会帮助让所有这些繁琐的计数完全消失（并将问题简化为更优雅的东西）。我停止在`N = 4`. 对于`N > 5`，给出的只是一个近似值（有多好，我不确定）。如果您考虑一下，就会很清楚为什么会这样：例如，给定换位，显然有多种方法可以使用上面未说明的*四个*独特元素来`N = 8`创建身份。随着排列变长（据我所知......），方式的数量似乎变得越来越难以计数。

 *无论如何，我绝对不能在采访的范围内做这样的事情。如果我幸运的话，我会走到分母一步。除此之外，它似乎非常讨厌。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-08T22:02:34.547

> 非常想知道为什么这些人会问这么奇怪的概率问题？

提出这样的问题是因为它们可以让面试官深入了解受访者的

*   阅读代码的能力（非常简单的代码，但至少是一些东西）
*   分析算法以识别执行路径的能力
*   运用逻辑寻找可能的结果和极端案例的技能
*   解决问题时的推理和解决问题的能力
*   沟通和工作技能——他们是提出问题，还是根据手头的信息孤立地工作

... 等等。提出暴露受访者这些属性的问题的关键是要有一段看似简单的代码。这摆脱了非编码员被卡住的冒名顶替者；傲慢的人跳到错误的结论；懒惰或低于标准的计算机科学家找到了一个简单的解决方案并停止寻找。通常，正如他们所说，重要的不是你是否得到了正确的答案，而是你是否对自己的思维过程印象深刻。

* * *

我也会尝试回答这个问题。在一次采访中，我会解释自己而不是提供单行的书面答案——这是因为即使我的“答案”是错误的，我也能够展示出逻辑思维。

A 将保持不变 - 即相同位置的元素 - 当

*   `m == n`在每次迭代中（以便每个元素只与自身交换）；或者
*   任何被交换的元素都被交换回原来的位置

第一种情况是duedl0r 给出的“简单”情况，即数组未更改的情况。这可能是答案，因为

> 数组 A 保持不变的概率是多少？

如果数组在 处更改，`i = 1`然后在 处恢复`i = 2`，则它处于原始状态，但没有“保持不变” - 它已更改，然后又更改回。这可能是一个聪明的技术。

然后考虑元素被交换和交换回来的机会——我认为在采访中计算超出了我的头脑。显而易见的考虑是，这不需要进行更改 - 更改回交换，可以很容易地在三个元素之间进行交换，交换 1 和 2，然后交换 2 和 3，交换 1 和 3，最后交换 2 和 3。继续，可能会有 4、5 个或更多像这样的“圆形”项目之间的交换。

事实上，与其考虑数组不变的情况，考虑改变的情况可能更*简单*。考虑这个问题是否可以映射到像[帕斯卡三角形](http://en.wikipedia.org/wiki/Pascal's_triangle)这样的已知结构上。

* * *

这是一个难题。我同意在面试中很难解决，但这并不意味着在面试中提问太难。差的候选人不会有答案，一般的候选人会猜出明显的答案，而优秀的候选人会解释为什么这个问题太难回答了。

我认为这是一个“开放式”问题，可以让面试官深入了解候选人。出于这个原因，即使在面试中很难解决，但在面试中问这个问题是个*好*问题。提出问题不仅仅是检查答案是对还是错。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-09T01:01:08.647

下面是 C 代码，用于计算 rand 可以产生的 2N 个索引元组的值的数量并计算概率。从 N = 0 开始，它显示计数为 1、1、8、135、4480、189125 和 12450816，概率为 1、1、0.5、0.185185、0.0683594、0.0193664 和 0.00571983。计数没有出现在[Encyclopedia of Integer Sequences](http://oeis.org/)中，所以要么我的程序有错误，要么这是一个非常模糊的问题。如果是这样，这个问题并不是要由求职者解决，而是要暴露他们的一些思维过程以及他们如何处理挫折。我不会认为这是一个很好的面试问题。

```
#include <inttypes.h>
#include <math.h>
#include <stdint.h>
#include <stdio.h>
#include <stdlib.h>

#define swap(a, b)  do { int t = (a); (a) = (b); (b) = t; } while (0)

static uint64_t count(int n)
{
    // Initialize count of how many times the original order is the result.
    uint64_t c = 0;

    // Allocate space for selectors and initialize them to zero.
    int *r = calloc(2*n, sizeof *r);

    // Allocate space for array to be swapped.
    int *A = malloc(n * sizeof *A);

    if (!A || !r)
    {
        fprintf(stderr, "Out of memory.\n");
        exit(EXIT_FAILURE);
    }

    // Iterate through all values of selectors.
    while (1)
    {
        // Initialize A to show original order.
        for (int i = 0; i < n; ++i)
            A[i] = i;

        // Test current selector values by executing the swap sequence.
        for (int i = 0; i < 2*n; i += 2)
        {
            int m = r[i+0];
            int n = r[i+1];
            swap(A[m], A[n]);
        }

        // If array is in original order, increment counter.
        ++c;    // Assume all elements are in place.
        for (int i = 0; i < n; ++i)
            if (A[i] != i)
            {
                // If any element is out of place, cancel assumption and exit.
                --c;
                break;
            }

        // Increment the selectors, odometer style.
        int i;
        for (i = 0; i < 2*n; ++i)
            // Stop when a selector increases without wrapping.
            if (++r[i] < n)
                break;
            else
                // Wrap this selector to zero and continue.
                r[i] = 0;

        // Exit the routine when the last selector wraps.
        if (2*n <= i)
        {
            free(A);
            free(r);
            return c;
        }
    }
}

int main(void)
{
    for (int n = 0; n < 7; ++n)
    {
        uint64_t c = count(n);
        printf("N = %d:  %" PRId64 " times, %g probabilty.\n",
            n, c, c/pow(n, 2*n));
    }

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-08-18T17:49:54.000

该算法的行为可以建模为[对称群](http://en.wikipedia.org/wiki/Symmetric_group)*S* *[N]*上的[马尔可夫链](http://en.wikipedia.org/wiki/Markov_chain)。

# 基本

数组的*N*个元素`A`可以排列成*N* ! 不同的排列。*让我们从 1 到N* !对这些排列进行编号，例如按字典顺序。所以算法中任意时刻数组的状态`A`都可以完全用置换数来表征。

例如，对于*N* = 3，所有 3 中的一个可能编号！= 6 个排列可能是：

1.  美国广播公司
2.  ab
3.  背书
4.  bca
5.  出租车
6.  中央银行

# 状态转移概率

在算法的每一步中，状态`A`要么保持不变，要么从这些排列中的一个转换到另一个。我们现在对这些状态变化的概率感兴趣。让我们称**Pr( *i* → *j* )**在单次循环迭代中状态从排列*i*变为排列*j的概率。*

当我们从 [0, *N* -1]范围内统一且独立地选择*m*和*n*时，有*N* ² 种可能的结果，其中每一个的可能性都相同。

 **## 身份

对于这些结果中的*N个，* *m* = *n*成立，因此排列没有变化。所以，

> ![Pr(i→i)](../Images/17de75c05dae0247dc954a739cf2b475.png).

## 换位

剩下的*N* ² - *N*个情况是转置，即两个元素交换它们的位置，因此排列发生了变化。假设这些转置之一交换位置*x*和*y*的元素。算法如何生成这种转置有两种情况：*m = x* , *n = y*或*m = y* , *n = x*。因此，每个转置的概率为 2 / *N* ²。

这与我们的排列有什么关系？当且仅当存在将*i*转换为*j*的转置（反之亦然）时，我们称两个排列*i*和*j为* **邻居。**那么我们可以得出结论：

 **> ![Pr(i→j)](../Images/9c62e3b9a6cd4a69f397ff36d804d6b5.png)

# 转移矩阵

我们可以将概率 Pr( *i* → *j* ) 排列在转移矩阵**P** ∈ [0,1] ^(*N* !× *N*中！). 我们定义

> *p [ij]* = Pr( *i* → *j* ),

其中*p [ij]***是P的第***i*行第*j*列中的条目。注意

 **> Pr( *i* → *j* ) = Pr( *j* → *i* )，

这意味着**P**是对称的。

现在的关键点是观察当我们将**P**自身相乘时会发生什么。**取P** ²的任何元素*p* ^((2)) [*ij ：*]

 **> ![p(2)ij](../Images/7bc2b3150fe02466e3579afa80b0b4c6.png)

乘积 Pr( *i* → *k* ) · Pr( *k* → *j* ) 是从排列*i*开始我们一步转换到排列*k*并在另一个后续步骤后转换到排列*j的概率。*因此，对所有中间排列*k求和给出了***在 2 个步骤中****从*i*转换到*j***的总概率。

这个论点可以扩展到**P**的更高次幂。一个特殊的后果如下：

> ***p* ^(( *N* )) [*ii*]*是在N*步后返回到排列*i*的概率，假设我们从排列*i*开始。**

 **# 例子

让我们用*N* = 3 来解决这个问题。我们已经有了排列的编号。对应的转移矩阵如下：

> ![磷](../Images/5f743e6bb31f8ee150a840a2531c7b70.png)

**将P**与自身相乘得到：

> ![P²](../Images/f939128e5b9d2988f11c6c9b3d1f07ae.png)

另一个乘法产生：

> ![P³](../Images/6cef1136d1764741c5dd53c39fc1e1db.png)

主对角线的任何元素都会给我们想要的概率，即^(15) / [81]或⁵ / [27]。

# 讨论

虽然这种方法在数学上是合理的并且可以应用于*N*的任何值，但这种形式并不是很实用。转换矩阵**P**有*N* !² 个条目，它变得非常快。即使对于*N* = 10，矩阵的大小也已经超过 13 万亿个条目。因此，这种算法的简单实现似乎是不可行的。

然而，与其他提议相比，这种方法非常结构化，除了找出哪些排列是邻居之外，不需要复杂的推导。我希望可以利用这种结构化来找到更简单的计算。

例如，可以利用**P**的任何幂的所有对角元素都相等这一事实。假设我们可以很容易地计算出**P** ^(*N*)的轨迹，那么解决方案就是 tr( **P** ^(*N*) ) / *N* !。**P** ^(*N*)的迹等于其特征值的*N*次方之和。因此，如果我们有一个有效的算法来计算**P**的特征值，我们就会被设置。然而，除了计算*N* = 5 的特征值之外，我还没有进一步探索这一点。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-09T02:04:29.130

很容易观察到界限 1/n ^n <= p <= 1/n。

这是显示反指数上限的不完整想法。

您正在从 {1,2,..,n} 中抽取 2n 次数字。如果其中任何一个是唯一的（仅出现一次），则数组肯定会更改，因为元素已经消失并且无法返回其原始位置。

一个固定数唯一的概率是 2n * 1/n * (1-1/n)^(2n-1)=2 * (1-1/n)^(2n-1) 是渐近的 2/e ²，从 0 开始。 [2n 因为您选择在哪个尝试中获得它， 1/n 表示您在该尝试中获得它， (1-1/n)^(2n-1) 表示您没有获得它其他尝试]

如果事件是独立的，那么所有数字都不唯一的机会是 (2/e ² )^n，这意味着 p <= O((2/e ² )^n)。不幸的是，它们不是独立的。我觉得可以通过更复杂的分析来显示界限。关键字是“球和垃圾箱问题”。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-08T21:30:56.173

一个简单的解决方案是

> p >= 1 / N ^N

由于数组保持不变的一种可能方式是`m = n`每次迭代。并且`m`等于`n`可能性`1 / N`。

肯定比那个高。问题是多少..

第二个想法：人们也可以争辩说，如果你随机打乱一个数组，每个排列都有相等的概率。由于存在`n!`排列，因此只得到一个（我们一开始就有的）的概率是

> p = 1 / N！

这比之前的结果要好一些。

正如所讨论的，该算法是有偏见的。这意味着并非每个排列都具有相同的概率。所以`1 / N!`不是很准确。您必须找出排列的分布情况。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-08-08T21:47:52.040

仅供参考，不确定上述界限 (1/n^2) 是否成立：

```
N=5 -> 0.019648 < 1/25
N=6 -> 0.005716 < 1/36 
```

采样代码：

```
import random

def sample(times,n):
    count = 0;
    for i in range(times):
        count += p(n)
    return count*1.0/times;

def p(n):
    perm = range(n);
    for i in range(n):
        a = random.randrange(n)
        b = random.randrange(n)

        perm[a],perm[b]=perm[b],perm[a];

    return perm==range(n)

print sample(500000,5) 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-08-13T15:47:14.480

每个人都假设`A[i] == i`，这没有明确说明。我也会做这个假设，但请注意概率取决于内容。例如，如果`A[i]=0`，则所有 N 的概率 = 1。

这是如何做到的。令`P(n,i)`结果数组与原始数组正好相差 i 个转置的概率。

我们想知道`P(n,0)`。确实如此：

```
P(n,0) = 
1/n * P(n-1,0) + 1/n^2 * P(n-1,1) = 
1/n * P(n-1,0) + 1/n^2 * (1-1/(n-1)) * P(n-2,0) 
```

解释：我们可以通过两种方式获得原始数组，或者通过在已经好的数组中进行“中性”转置，或者通过恢复唯一的“坏”转置。为了得到一个只有一个“坏”转置的数组，我们可以取一个有 0 个坏转置的数组，并制作一个非中性的转置。

编辑： P(n-1,0) 中的 -2 而不是 -1

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-08-13T07:08:22.253

我会将问题建模为一个多重图，其中节点是数组的元素，而交换是在它们之间添加一个无向（！）连接。然后以某种方式寻找循环（所有节点都是循环的一部分=>原始）

真的需要回去工作了！:(

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-08-09T08:02:01.647

有趣的问题。

我认为答案是 1/N，但我没有任何证据。当我找到证据时，我将编辑我的答案。

到目前为止我得到了什么：

如果 m == n，则不会更改数组。得到 m == n 的概率是 1/N，因为有 N^2 个选项，并且只有 N 是合适的（(i,i) for each 0 <= i <= N-1）。

因此，我们得到 N/N^2 = 1/N。

Pk 表示在 k 次交换迭代之后，大小为 N 的数组将保持不变的概率。

P1 = 1/N。（正如我们在下面看到的）

P2 = (1/N) *P1 + (N-1/N)* (2/N^2) = 1/N^2 + 2(N-1) / N^3。

```
Explanation for P2:
We want to calculate the probability that after 2 iterations, the array with 
N elements won't change. We have 2 options : 
- in the 2 iteration we got m == n (Probability of 1/N)
- in the 2 iteration we got m != n (Probability of N-1/N)

If m == n, we need that the array will remain after the 1 iteration = P1.
If m != n, we need that in the 1 iteration to choose the same n and m 
(order is not important). So we get 2/N^2.
Because those events are independent we get - P2 = (1/N)*P1 + (N-1/N)*(2/N^2). 
```

Pk = (1/N)*Pk-1 + (N-1/N)*X。（第一个代表 m == n，第二个代表 m != n）

我必须更多地考虑 X 等于什么。（X 只是真实公式的替代品，不是常数或其他任何东西）

```
Example for N = 2.
All possible swaps:

(1 1 | 1 1),(1 1 | 1 2),(1 1 | 2 1),(1 1 | 2 2),(1 2 | 1 1),(1 2 | 1 2)
(1 2 | 2 1),(1 2 | 2 2),(2 1 | 1 1),(2 1 | 1 2),(2 1 | 2 1),(2 1 | 2 2)
(2 2 | 1 1),(2 2 | 1 2),(2 2 | 2 1),(2 1 | 1 1).

Total = 16\. Exactly 8 of them remain the array the same.
Thus, for N = 2, the answer is 1/2. 
```

**编辑：** 我想介绍另一种方法：

我们可以将互换分为三组：建设性互换、破坏性互换和无害互换。

建设性交换被定义为导致至少一个元素移动到正确位置的交换。

破坏性交换被定义为导致至少一个元素从其正确位置移动的交换。

无害交换被定义为不属于其他组的交换。

很容易看出这是所有可能交换的分区。（交集 = 空集）。

现在我要证明的主张：

```
 The array will remain the same if and only if 
the number of Destructive swap == Constructive swap in the iterations. 
```

如果有人有反例，请写下来作为评论。

如果这个说法是正确的，我们可以对所有组合求和——0 个无害掉期，1 个无害掉期，..，N 个无害掉期。

对于每一个可能的 k 无害交换，我们检查 Nk 是否是偶数，如果不是，我们跳过。如果是，我们将 (Nk)/2 视为破坏性，将 (Nk) 视为建设性。看看所有的可能性。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-08-08T23:33:23.850

这不是一个完整的解决方案，但至少它是一些东西。

采取一组没有效果的特定交换。我们知道，一定是它的交换最终形成了一堆不同大小的循环，总共使用了`n`交换。（为此，没有效果的交换可以被认为是大小为 1 的循环）

也许我们可以

1）根据循环的大小将它们分成组
2）计算获得每个组的方法数。

（主要问题是有很多*不同*的组，但如果不考虑不同的分组，我不确定你如何实际计算这个。）

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-08-21T16:06:39.117

C# 中的幼稚实现。这个想法是创建初始数组的所有可能排列并枚举它们。然后我们建立一个可能的状态变化矩阵。将矩阵与自身相乘 N 次，我们将得到矩阵，该矩阵显示在 N 步中从排列#i 到排列#j 存在多少种方式。Elemet [0,0] 将显示有多少种方式会导致相同的初始状态。第 0 行的元素总和将显示不同方式的总数。通过将前者除以后者，我们得到概率。

事实上，排列的总数是 N^(2N)。

```
Output:
For N=1 probability is 1 (1 / 1)
For N=2 probability is 0.5 (8 / 16)
For N=3 probability is 0.1851851851851851851851851852 (135 / 729)
For N=4 probability is 0.068359375 (4480 / 65536)
For N=5 probability is 0.0193664 (189125 / 9765625)
For N=6 probability is 0.0057198259072973293366526105 (12450816 / 2176782336)

class Program
{
    static void Main(string[] args)
    {
        for (int i = 1; i < 7; i++)
        {
            MainClass mc = new MainClass(i);
            mc.Run();
        }
    }
}

class MainClass
{
    int N;
    int M;

    List<int> comb;
    List<int> lastItemIdx;
    public List<List<int>> combinations;
    int[,] matrix;

    public MainClass(int n)
    {
        N = n;

        comb = new List<int>();
        lastItemIdx = new List<int>();
        for (int i = 0; i < n; i++)
        {
            comb.Add(-1);
            lastItemIdx.Add(-1);
        }

        combinations = new List<List<int>>();
    }

    public void Run()
    {
        GenerateAllCombinations();
        GenerateMatrix();
        int[,] m2 = matrix;
        for (int i = 0; i < N - 1; i++)
        {
            m2 = Multiply(m2, matrix);
        }

        decimal same = m2[0, 0];
        decimal total = 0;
        for (int i = 0; i < M; i++)
        {
            total += m2[0, i];
        }

        Console.WriteLine("For N={0} probability is {1} ({2} / {3})", N, same / total, same, total);
    }

    private int[,] Multiply(int[,] m2, int[,] m1)
    {
        int[,] ret = new int[M, M];
        for (int ii = 0; ii < M; ii++)
        {
            for (int jj = 0; jj < M; jj++)
            {
                int sum = 0;

                for (int k = 0; k < M; k++)
                {
                    sum += m2[ii, k] * m1[k, jj];
                }

                ret[ii, jj] = sum;
            }
        }

        return ret;
    }

    private void GenerateMatrix()
    {
        M = combinations.Count;
        matrix = new int[M, M];

        for (int i = 0; i < M; i++)
        {
            matrix[i, i] = N;
            for (int j = i + 1; j < M; j++)
            {
                if (2 == Difference(i, j))
                {
                    matrix[i, j] = 2;
                    matrix[j, i] = 2;
                }
                else
                {
                    matrix[i, j] = 0;
                }
            }
        }
    }

    private int Difference(int x, int y)
    {
        int ret = 0;
        for (int i = 0; i < N; i++)
        {
            if (combinations[x][i] != combinations[y][i])
            {
                ret++;
            }

            if (ret > 2)
            {
                return int.MaxValue;
            }
        }

        return ret;
    }

    private void GenerateAllCombinations()
    {
        int placeAt = 0;
        bool doRun = true;
        while (doRun)
        {
            doRun = false;
            bool created = false;

            for (int i = placeAt; i < N; i++)
            {
                for (int j = lastItemIdx[i] + 1; j < N; j++)
                {
                    lastItemIdx[i] = j; // remember the test

                    if (comb.Contains(j))
                    {
                        continue; // tail items should be nulled && their lastItemIdx set to -1
                    }

                    // success
                    placeAt = i;
                    comb[i] = j;
                    created = true;
                    break;
                }

                if (comb[i] == -1)
                {
                    created = false;
                    break;
                }
            }

            if (created)
            {
                combinations.Add(new List<int>(comb));
            }

            // rollback 
            bool canGenerate = false;
            for (int k = placeAt + 1; k < N; k++)
            {
                lastItemIdx[k] = -1;
            }

            for (int k = placeAt; k >= 0; k--)
            {
                placeAt = k;
                comb[k] = -1;

                if (lastItemIdx[k] == N - 1)
                {
                    lastItemIdx[k] = -1;
                    continue;
                }

                canGenerate = true;
                break;
            }

            doRun = canGenerate;
        }
    }
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-08-15T03:00:52.377

好吧，从数学的角度来看：

为了让数组元素每次都在同一个位置交换，那么 Rand(N) 函数必须为 int m 和 int n 生成两次相同的数字。所以 Rand(N) 函数两次生成相同数字的概率是 1/N。我们在 for 循环中调用了 N 次 Rand(N)，所以我们有 1/(N^2) 的概率

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-08-09T05:59:49.343

问题：数组 A 保持不变的概率是多少？条件：假设数组包含唯一元素。

尝试了 Java 中的解决方案。

随机交换发生在原始 int 数组上。在 java 方法中，参数总是按值传递，所以在 swap 方法中发生的事情并不重要，因为数组的 a[m] 和 a[n] 元素（来自下面的代码 swap(a[m], a[n]) ）是通过不完整的数组。

答案是数组将保持不变。尽管有上述情况。请参见下面的 java 代码示例：

```
import java.util.Random;

public class ArrayTrick {

    int a[] = new int[10];
    Random random = new Random();

    public void swap(int i, int j) {
        int temp = i;
        i = j;
        j = temp;
    }

    public void fillArray() {
        System.out.println("Filling array: ");
        for (int index = 0; index < a.length; index++) {
            a[index] = random.nextInt(a.length);
        }
    }

    public void swapArray() {
        System.out.println("Swapping array: ");
        for (int index = 0; index < a.length; index++) {
            int m = random.nextInt(a.length);
            int n = random.nextInt(a.length);
            swap(a[m], a[n]);
        }
    }

    public void printArray() {
        System.out.println("Printing array: ");
        for (int index = 0; index < a.length; index++) {
            System.out.print(" " + a[index]);
        }
        System.out.println();
    }

    public static void main(String[] args) {
        ArrayTrick at = new ArrayTrick();

        at.fillArray();
        at.printArray();
        at.swapArray();
        at.printArray();
    }
} 
```

样本输出：

填充数组：打印数组：3 1 1 4 9 7 9 5 9 5 交换数组：打印数组：3 1 1 4 9 7 9 5 9 5

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2012-08-08T21:41:58.920

每次迭代中 m==n 的概率，然后执行 N 次。P(m==n) = 1/N。所以我认为这种情况下 P=1/(n^2) 。但是随后您必须考虑将值交换回来。所以我认为答案是（文本编辑器让我）1/N^N。*************

# objective-c - 从 NSUserDefaults 中的数组中删除对象

> ID：11872191
> 
> 赞同：0
> 
> 时间：2012-08-08T19:55:54.643
> 
> 标签：objective-c, ios, nsuserdefaults

设置时`NSUserDefaults`，我最初使用此代码设置默认值...

```
 NSMutableArray *array = [NSMutableArray arrayWithObjects: @"string1", @"string2", @"string3", nil];
 [[NSUserDefaults standardUserDefaults] setObject:array forKey: @"preset1"];
 [[NSUserDefaults standardUserDefaults] synchronize]; 
```

我知道我应该改用这个：

```
NSMutableArray *array = [NSMutableArray arrayWithObjects: @"string1", @"string2", @"string3", nil];
NSDictionary *appDefaults = [NSDictionary dictionaryWithObject:array forKey:@"preset1"];
[[NSUserDefaults standardUserDefaults] registerDefaults:appDefaults]; 
```

现在我在稍后处理对象时遇到了问题`array`。这是我用来添加/删除字符串的代码`array`。当我最初在第一个示例中手动设置默认值时，它运行良好。现在，对象不会从数组中删除。在 LLDB 调试器中打印数组时，我确实注意到了，该数组`array`现在被存储为`NSCFArray`以前的数组`NSArray`。

```
NSMutableArray *array = [[NSMutableArray alloc] init];
[array addObjectsFromArray:[[NSUserDefaults standardUserDefaults] objectForKey:@"preset1"]];

NSArray *stringsToRemove = @[@"string1", @"string2" ]; 

for (NSUInteger i = 0; i < stringsToRemove.count; i++) {
    [array removeObjectIdenticalTo:[stringsToRemove objectAtIndex:i]];
}

[[NSUserDefaults standardUserDefaults] setObject:array forKey: @"preset1"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:17:38.407

在按照您描述的第二种方式初始化默认值后，此代码适用于您的设置：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

NSMutableArray *array = [[NSMutableArray alloc] initWithArray: [defaults objectForKey:@"preset1"]];

NSArray *stringsToRemove = [NSArray arrayWithObjects:@"string1", @"string2", nil];

for (NSString *aString in stringsToRemove) {
     [array removeObjectIdenticalTo:aString];
}

[defaults setObject:array forKey: @"preset1"];
[defaults synchronize]; 
```

# android - File.separatorChar 是基于操作系统、语言环境还是其他？

> ID：11872194
> 
> 赞同：2
> 
> 时间：2012-08-08T19:56:08.673
> 
> 标签：android, file, locale

我所做的 Java 工作 100% 是在 Android 上完成的。在构建文件路径时，我总是确保使用~~File.pathSeparator~~ File.separatorChar 而不是“/”。

什么决定了 File.pathSeparator 的值？是否有任何 Android 设备~~File.pathSeparator~~ File.separatorChar 不会是 "/" ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:12:21.417

根据[File.java 的源代码](http://www.java2s.com/Open-Source/Android/android-core/platform-libcore/java/io/File.java.htm)，`pathSeparator`是从 char 中提取的`System.getProperty("path.separator", ":").charAt(0)`。`separator`另一方面，来自`System.getProperty("file.separator", "/").charAt(0)`。

因为 Android 是基于 Linux 的，所以它应该始终是`/`. 但是，通过使用上面的默认值，我看到`:`了出现的故障（Motorola Droid；参见[错误报告）。](http://code.google.com/p/android/issues/detail?id=5929)

当我编码时，我总是使用`/`... 老实说，我认为没有必要引用`File`该类（这主要用于非 Android 工作）。`/`我认为最好坚持下去。

此外，根据[this answer](https://stackoverflow.com/questions/2417485/file-separator-vs-slash-in-paths)（与Java有关，而不仅仅是Android），`/`可以安全地在所有Java平台上使用，它会弄清楚它需要在内部使用什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:14:58.533

我认为你的意思是对`File.separator`的`File.separatorChar`？如果您查看[文档](http://developer.android.com/reference/java/io/File.html#separatorChar)，它会指出：

```
public static final char separatorChar 
```

> 用于分隔文件名中的组件的系统相关字符 ('/')。使用这个（而不是硬编码'/'）有助于移植到其他操作系统。
> 
> 该字段从系统属性“file.separator”初始化。以后对该属性的更改将不会影响此字段或此类。

它依赖于系统。从技术上讲，有人可以在非 Linux 平台上实现 Android（参见[BlueStacks](http://bluestacks.com)），其中路径分隔符不是“/”。在实践中，我想您可以毫无问题地使用“/”，但使用这些字段是一个好习惯。

# jquery - mediaelement.js 卸载

> ID：11872198
> 
> 赞同：1
> 
> 时间：2012-08-08T19:56:22.397
> 
> 标签：jquery, mediaelement.js

有没有办法在页面中卸载 mediaelement.js？我有一个带有图像的幻灯片自动播放的视频，需要找到一种在播放后卸载视频的方法。我有一个事件监听器，它在视频结束后重新启动幻灯片，但是当视频再次出现时，它无法识别最初加载时调用的“成功”函数。

# python - 执行python脚本-windows

> ID：11872204
> 
> 赞同：0
> 
> 时间：2012-08-08T19:56:49.140
> 
> 标签：python, windows, cmd

如何在 pyqt4 gui 启动之前执行 python 脚本？基本上，当用户启动应用程序时，CMD 控制台会启动并运行 python 脚本，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:09:27.610

默认情况下使用 python 打开 *.py 脚本。在 Linux 上，可以通过添加`#!/usr/bin/python`作为第一行然后添加`chmod u+x your-script.py`. 在 Windows 中，它可以在 Windows Registry 中`Right Click on file -> Open With -> Other -> [select Python.exe] -> [check Always open with selected] -> Ok`或通过[在 Windows Registry 中进行一些更改](http://www.techrepublic.com/article/tech-tip-modify-the-open-with-list-in-windows-xp/5288934)来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:52:47.673

编写批处理文件包装器：

```
Run_program.bat:

python script1.py
python script2.py
run_program.exe 
```

# java - 调试 DBCP Tomcat 连接池

> ID：11872206
> 
> 赞同：0
> 
> 时间：2012-08-08T19:57:01.963
> 
> 标签：java, database, tomcat

我在我的应用程序中使用 tomcat dbcp，
[这](http://rapidpaste.com/s/7ea9019df9)是 context.xml 中的资源定义

在[连接管理器](http://rapidpaste.com/s/bb442c6977)中，我正在从池中获取连接。

此配置适用于 localhost 但是当我尝试在托管服务器上使用它时，我无法从池中获取连接。

我已经仔细检查了数据库名称、用户名、密码等所有设置。

由于我无法控制 tomcat dbcp，我怎么知道问题的根源。他们有什么办法可以调试问题吗？

**编辑**

我可以使用相同的设置（url、uname、密码）直接从数据库获取连接（没有 dbcp）。

# c++ - 自定义 Qt 小部件

> ID：11872210
> 
> 赞同：1
> 
> 时间：2012-08-08T19:57:12.183
> 
> 标签：c++, qt

如何创建一个包含名字、中间名和姓氏字段的简单小部件并将其添加到主窗口类？

我问是因为我不知道为什么下面这个简单的小部件尝试不起作用，我错过了什么？

主要的

```
int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MainWindow w;
    w.show();

    return a.exec();
} 
```

主窗口类

```
MainWindow::MainWindow(QWidget *parent) : QMainWindow(parent){
    QMainWindow *mainView = new QMainWindow;
    setCentralWidget(mainView);

    CardUI *card = new CardUI;
    QHBoxLayout *hCard = new QHBoxLayout;

    hCard->addWidget(card);

    mainView->setLayout(hCard);
    mainView->show();
} 
```

卡迪班

```
CardUI::CardUI(QWidget *parent) :  QWidget(parent){
    QLineEdit *fnText = new QLineEdit;
    QLineEdit *miText = new QLineEdit;
    QLineEdit *lnText = new QLineEdit;

    QHBoxLayout *name = new QHBoxLayout;

    name->addWidget(fnText);
    name->addWidget(miText);
    name->addWidget(lnText);

    setLayout(name);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:16:08.703

```
QMainWindow *mainView = new QMainWindow;
//....
mainView->setLayout(hCard); 
```

您*不应该*更改`QMainWindow`. `setCentralWidget`改用给定的 API使用或添加工具栏/停靠栏。

在这种特殊情况下，您不应该创建`mainView`为（*一个*`QMainWindow`应用程序中不能有两个*主*窗口，对吧？）。您可以将type 更改为，但您甚至可以不创建任何代理小部件，只需*`mainView``QWidget`*

 *```
MainWindow::MainWindow(QWidget *parent); : QMainWindow(parent){   
    card = new CardUI;
    setCentralWidget(card);
} 
```*

# ruby-on-rails - 我如何插入像 twitter 这样的表单搜索

> ID：11872211
> 
> 赞同：0
> 
> 时间：2012-08-08T19:57:14.087
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我想知道我应该如何进行像 twitter 这样的 Rails 表单搜索来搜索多个模型。

我已经实现了一个搜索模型/控制器，它将基于文本框进行搜索并最终具有 ajax。但我只是想知道如何在我的头文件中实现它。渲染可能是工作，但不确定如何调用搜索控制器。

提前致谢。按照本教程[http://railscasts.com/episodes/111-advanced-search-form](http://railscasts.com/episodes/111-advanced-search-form)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:11:25.647

一种方法是创建一个 Search 类。创建一个具有查询输入的表单部分，该输入在提交时发送到 Search 类。然后搜索将提供一组搜索结果，然后您将其输出到单独的视图。拥有一个 Search 类可以让您为您的搜索保留额外的功能——额外的模型和对结果进行排名的方法。

这是一个骨架示例...

```
class Search
  attr_accessor :query

  def initialize(*args)
    self.query = args[0] && args[0][:query] ? args[0][:query] : nil
  end

  def elements
    query.nil? ? [] : query.downcase.split(/ /)
  end

  def class_a
    class_a_objects = []
    ...some code that finds the objects you are searching for...
    return class_a_objects.uniq
  end

  def class_b
    class_a_objects = []
    ...some code that finds the objects you are searching for...
    return issuers.uniq
  end

  def class_c
    ..
  end

  ....

  def results
    class_a_objects + class_b_objects + class_c_objects
  end

end 
```

在每个类的搜索代码中，使用“元素”方法搜索各个查询对象。

对于表格

```
= form_tag("/search", :method => :get) do
  = text_field 'search', :query
  = submit_tag 'search' 
```

路由.rb

```
match '/search' => "search#query", :as => 'search' 
```

然后是一个带有“查询”操作的搜索控制器。在此控制器中，只需执行

```
class SearchController
   def query
     @results = Search.new(:query => params[:search][:query] ).results
   end
end 
```

为此控制器操作添加一个视图“搜索”，您可以在其中呈现@results。您的结果将是来自不同类的单个对象的集合，因此您的视图可以根据对象类单独处理每个项目，这些项目可以使用其他部分进行处理。

# android - 无法从 Android AsyncTask 访问 Activity 的方法

> ID：11872212
> 
> 赞同：1
> 
> 时间：2012-08-08T19:57:20.227
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我有一个问题，我需要从 Android AsyncTask 的方法访问我的 Activity 中的`onPostExecute()`方法

我有 2 个活动都包含一个通用方法，如下所示：

(1) Activity1 --> refreshUI()
(2) Activity2 ----> refreshUI()

我接到一个`AsyncTask`电话`GetDataAsyncTask(Activity a )`，它把调用活动作为参数

现在从我的活动 1 我将调用 new `GetDataAsyncTask(Activity1.this).execute`。
与我的 activity2 相同，我将调用 new `GetDataAsyncTask(Activity2.this).execute`。

我的 AsyncTask 如下：

```
public class GetDataAsyncTask extends AsyncTask<String ,Void , String> {
    public Activity context;

    public PostAsyncTaskHelper(Activity c) { 
        context = c; 
    }

    protected String doInBackground(String... arg0) {
        // Webservice calls 
    }

    protected void onPostExecute(String result) {
        if(result.equals("qq")) {
            //Where I am not able to access refreshUI() 
            //method of any one of my activities
            context.refreshUI()  
        }
    }
} 
```

任何人都可以帮助我如何获取任何被调用活动的参考`AsyncTask`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T20:05:14.493

制作一个`interface`具有方法的`refreshUI()`，并使 Activity1 和 Activity2 都实现它。然后，您只需将类型转换`context`为接口的类型。

此外，您需要小心在 an`Activity`内部持有对 an 的引用`AsyncTask`，因为在配置更改（如屏幕旋转）的情况下，您将持有已销毁的 Activity 实例。[有关详细信息，请参见此处](http://commonsware.com/blog/2010/09/10/asynctask-screen-rotation.html)，以及相应的[示例解决方案](https://github.com/commonsguy/cw-android/tree/master/Rotation/RotationAsync/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T20:07:25.633

为您的活动定义一个接口

```
public interface MyActivityRefreshInterface
{
 public void refreshUI();
} 
```

您的活动必须定义为`implements MyActivityRefreshInterface`.

您的 onPostExecute 然后可以将上下文转换为 (MyActivityRefreshInterface)context

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T20:07:03.100

因为 refreshUI 不是 Activity 中的方法。它在您特定的 Activity1 和 Activity 2 类中，而不是来自 Android 的 Activity 类。您应该重构 Activity1 和 Activity2 以从具有 refreshUI 方法的 BaseActivity 继承，并将 AsyncTask 中的上下文标记为 BaseActivity

# objective-c - Apple Mach-O Linker (id) Error Linker 命令失败，退出代码为 1，重复符号错误的负载，在 xcode 之外工作正常

> ID：11872213
> 
> 赞同：1
> 
> 时间：2012-08-08T19:57:36.083
> 
> 标签：objective-c, duplicates, linker-errors, symbols, mach-o

我目前正在学习如何使用 Objective-C 我正在做一个涉及类的简单项目，我决定将它放入 Xcode 中进行一些简单的可视化调试，但是在消除所有错误和警告后，我遇到了**：**

```
duplicate symbol _OBJC_IVAR_$_Customer._fName in:
/Users/Slench/Library/Developer/Xcode/DerivedData/NameRankIntention-hlaqvlslfjimqdeysxqiyloirdus/Build/Intermediates/NameRankIntention.build/Debug/NameRankIntention.build/Objects-normal/x86_64/main.o
/Users/Slench/Library/Developer/Xcode/DerivedData/NameRankIntention-hlaqvlslfjimqdeysxqiyloirdus/Build/Intermediates/NameRankIntention.build/Debug/NameRankIntention.build/Objects-normal/x86_64/NRaI.o
duplicate symbol _OBJC_IVAR_$_Customer._lName in:
/Users/Slench/Library/Developer/Xcode/DerivedData/NameRankIntention-hlaqvlslfjimqdeysxqiyloirdus/Build/Intermediates/NameRankIntention.build/Debug/NameRankIntention.build/Objects-normal/x86_64/main.o
/Users/Slench/Library/Developer/Xcode/DerivedData/NameRankIntention-hlaqvlslfjimqdeysxqiyloirdus/Build/Intermediates/NameRankIntention.build/Debug/NameRankIntention.build/Objects-normal/x86_64/NRaI.o
duplicate symbol _OBJC_IVAR_$_Customer._age in:
/Users/Slench/Library/Developer/Xcode/DerivedData/NameRankIntention-hlaqvlslfjimqdeysxqiyloirdus/Build/Intermediates/NameRankIntention.build/Debug/NameRankIntention.build/Objects-normal/x86_64/main.o
/Users/Slench/Library/Developer/Xcode/DerivedData/NameRankIntention-hlaqvlslfjimqdeysxqiyloirdus/Build/Intermediates/NameRankIntention.build/Debug/NameRankIntention.build/Objects-normal/x86_64/NRaI.o
duplicate symbol _OBJC_IVAR_$_Customer._rank in:
/Users/Slench/Library/Developer/Xcode/DerivedData/NameRankIntention-hlaqvlslfjimqdeysxqiyloirdus/Build/Intermediates/NameRankIntention.build/Debug/NameRankIntention.build/Objects-normal/x86_64/main.o
/Users/Slench/Library/Developer/Xcode/DerivedData/NameRankIntention-hlaqvlslfjimqdeysxqiyloirdus/Build/Intermediates/NameRankIntention.build/Debug/NameRankIntention.build/Objects-normal/x86_64/NRaI.o
duplicate symbol _OBJC_IVAR_$_Customer._intention in:
/Users/Slench/Library/Developer/Xcode/DerivedData/NameRankIntention-hlaqvlslfjimqdeysxqiyloirdus/Build/Intermediates/NameRankIntention.build/Debug/NameRankIntention.build/Objects-normal/x86_64/main.o
/Users/Slench/Library/Developer/Xcode/DerivedData/NameRankIntention-hlaqvlslfjimqdeysxqiyloirdus/Build/Intermediates/NameRankIntention.build/Debug/NameRankIntention.build/Objects-normal/x86_64/NRaI.o
duplicate symbol _OBJC_METACLASS_$_Customer in:
/Users/Slench/Library/Developer/Xcode/DerivedData/NameRankIntention-hlaqvlslfjimqdeysxqiyloirdus/Build/Intermediates/NameRankIntention.build/Debug/NameRankIntention.build/Objects-normal/x86_64/main.o
/Users/Slench/Library/Developer/Xcode/DerivedData/NameRankIntention-hlaqvlslfjimqdeysxqiyloirdus/Build/Intermediates/NameRankIntention.build/Debug/NameRankIntention.build/Objects-normal/x86_64/NRaI.o
duplicate symbol _OBJC_CLASS_$_Customer in:
/Users/Slench/Library/Developer/Xcode/DerivedData/NameRankIntention-hlaqvlslfjimqdeysxqiyloirdus/Build/Intermediates/NameRankIntention.build/Debug/NameRankIntention.build/Objects-normal/x86_64/main.o
/Users/Slench/Library/Developer/Xcode/DerivedData/NameRankIntention-hlaqvlslfjimqdeysxqiyloirdus/Build/Intermediates/NameRankIntention.build/Debug/NameRankIntention.build/Objects-normal/x86_64/NRaI.o
ld: 7 duplicate symbols for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

现在奇怪的是，我将“固定代码”放回 Sublime Text 中，在那里我保存了它，然后通过终端编译它，**它工作得很好**没有错误没有警告什么都没有

我已经阅读了有关此的其他一些问题，解决方案要么始终是他们找到了重复声明，要么他们有一个同名的额外文件导致重复声明......我都没有。 ..

所以……有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:17:43.867

您是否可能无意中在 main.m 中导入了“NRaI.m”文件？

# facebook - 获得第一百万个用户喜欢的数据

> ID：11872214
> 
> 赞同：2
> 
> 时间：2012-08-08T19:57:38.880
> 
> 标签：facebook, graph, facebook-fql

我正在尝试查看是否能够从 facebook 接收用户喜欢的数据，以确定是否可以找到喜欢页面的用户作为第 100 万（或 5000 等）用户。

这可能吗？有没有人这样做过？如果是这样，你是怎么做的？

感谢您的帮助，虽然我对 facebook 文档有点失望....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T22:25:09.477

我不相信API可以做到这一点。

一个可能的解决方案是使用 API 检查点赞数，并在您接近目标时通知您。或者，当您接近时，请密切关注页面管理面板的“新点赞”部分。例如。当它达到 1001 个用户时，“新喜欢”部分顶部的第二个用户是您的第 1000 个用户。

# javascript - Javascript 数组和 JQuery .param

> ID：11872215
> 
> 赞同：1
> 
> 时间：2012-08-08T19:57:41.737
> 
> 标签：javascript, jquery, arrays, param

我注意到了一些奇怪的事情。我一直认为`new Array()`与 相同`{}`，但它似乎不同，因为它似乎`{}`只是一个对象类型，而`new Array()`在 Chrome 调试器中是一个数组。

所以我一直在使用`$.param(data)`，其中 data 是来自`$.ajax()`通话的数据。我注意到，当我在数据中有 a`params1 = new Array()`和 a时`params2 = {}`，它们的输出方式不同。

params1 变成

```
params1[]=1&params1[]=2 
```

和 params2 变成

```
params2[0]=1&params2[1]=2. 
```

问题是我一直在使用`.param(data, false)`，因为我注意到它`params1[]`被错误地序列化，但是`.param(data, false)`失败`params2`并给了我`params2=[object+Object]`.

我想我可以通过使用 .param(data) 并去掉“[]”来解决这个问题，这样无论使用`{}`or初始化`new Array`它，它仍然可以正常工作。但我想知道是否有更好的解决方案（不总是使用`{}`vs `new Array`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:08:33.150

基里奥德，

在 javascript 中，{} 是创建新对象的简写，[] 是“new Array()”的简写。

所以：

```
var myArray1 = [];
var myArray2 = new Array();
var myObject = {};
myObject.objVariable1 = 'some string or other variable data';
var myObject2 = { obj2Var1 : 'some string', obj2Var2 : 1234, obj2Var3 : true };

// do stuff

var thing1 = myArray1[1]; // get something out of myArray1
var thing2 = myArray2[2]; // get something out of myArray2
var thing3 = myObject.objVariable1; // get something out of myObject
if(myObject2.obj2Var3)
{
  // do other stuff
} 
```

希望这可以帮助您清除 jQuery / javascript Ajax 问题。

# javascript - 对此感到困惑 - 收到错误“this.myfuntion() 不是函数”

> ID：11872216
> 
> 赞同：0
> 
> 时间：2012-08-08T19:57:43.610
> 
> 标签：javascript, jquery

背景：我正在尝试编辑 zen 购物车水平弹出菜单，以使弹出菜单在菜单内内联打开。我遇到的问题是我很难理解它附带的 javascript/jquery。

在不发布整个内容的情况下，代码的结构是这样的：

```
(declare some vars)

//some functions like this:
function funcname(obj) {
//do something
}

//then one big master function like this:
function bigfunc(arg1, arg2, arg3, arg4, arg5) {

//declare some vars based on this
this.varname1=varname1;
this.varname2=varname2;

//declare some functions inside the big function
this.innerfunc1= function() {
//do stuff
}

this.innerfunc2= function() {
//do stuff
}

}//end of big function

//then goes on to declare init function

function initfunc(){
//this creates new bigfunc(arg1 arg2 arg3...) for each main menu item
}

//finally calls init function with
window.onload = initfunc(); 
```

现在开始我的困惑 -

1）首先为了澄清，我是否正确地基于所有 this 在 bigfunc() 中浮动以及它被 new bigfunc() 调用的事实是 this 正在创建一个对象？

2）我目前的问题是 bigfunc() 中的一个函数，如下所示：

```
this.slideChildMenu = function() {
        var divref = this.children[0].div;
        var ulref = this.children[0].ul;
        var maxwidth = this.children[0].width;
        var nextWidth;
        if (this.isMouseOnMe  || this.isMouseOnChild()) {
            nextWidth = divref.offsetWidth + slideSpeed_out;
            if (nextWidth >= maxwidth) {
                this.finishOpeningChild(divref, ulref, maxwidth);
            } else {
                ulref.style.left = nextWidth - maxwidth + "px";
                divref.style.width = nextWidth + "px";
                setTimeout("slideChildMenu('" + this.getId() + "')", slideTimeout_out);
            }
        } 
```

现在我的计划是改变它以使用 jquery show 打开元素所以我尝试了这个：

```
this.slideChildMenu = function() {
        var divref = this.children[0].div;
        var ulref = this.children[0].ul;
        if (this.isMouseOnMe  || this.isMouseOnChild()) {
            $(divref).show(function(){
                    this.finishOpeningChild(divref, ulref);
                });
            }
        } 
```

但我得到这个-> TypeError: this.finishOpeningChild is not a function

现在，这个 js 中还有很多其他的东西，所以我不会梦想在这里请人为我做我的工作，但我希望如果有人能向我解释为什么这个函数不是我可能的函数能够解决剩下的问题。

注意：我认为这与“this”的范围有关，但在两个版本的代码中 this 的值似乎完全相同。

我知道这很长，但非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:46:35.563

函数中的值`this`称为函数运行的“上下文”。通常，每当您将回调函数作为参数传递时（就像您对 所做的那样`$(divref).show(function() {...})`），该函数可以在它想要的任何上下文中运行回调。在这种情况下，jQuery`show`函数选择在动画元素的上下文中运行它的回调。

但是，您希望在*定义*`this`匿名回调函数时而不是在运行时访问 的值。这里的解决方案是将 的外部值存储在一个变量（传统上称为）中，该变量包含在新定义的函数的范围内：*`this``self`*

 *```
this.slideChildMenu = function() {
    //...
    var self = this;
    $(divref).show(function(){
        self.finishOpeningChild(divref, ulref);
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:07:23.477

我在想 jQuery 选择器已经改变了`this`.

在您的示例`$(this);`中，指的是根据 jQuery api 文档进行动画处理的对象：

> 如果提供，则在动画完成后触发回调。这对于将不同的动画按顺序串在一起很有用。回调没有发送任何参数，但**它被设置为动画的 DOM 元素**。如果为多个元素设置了动画，请务必注意，每个匹配的元素都会执行一次回调，而不是对整个动画执行一次。

如果有问题的对象被实例化，你可以用点表示法调用它而不使用`this`like`bigFunc.finishOpeningChild(divref, ulref);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T20:19:11.790

您可能对范围有点困惑，跟踪并不总是那么容易，但做一些更像这样的事情：

```
var site = {
    init: function(elm) {
        self=site;
        self.master.funcname2(self.varname1, elm); //call function in master
    },
    funcname: function(obj) {
        //do something
    },
    varname1: 'some string',
    varname2: 3+4,
    master: function() {
        this.varname3 = sin(30);
        this.funcname2 = function(stuff, element) {
            site.funcname(element); //call function in 'site'
            var sinus = site.master.varname3; //get variable
        }
    }
}

window.onload = function() {
    var elm = document.getElementById('elementID');
    site.init(elm); //call init function
} 
```

通常会使跟踪变得更容易一些。*

# java - 使用 Jaxb2Marshaller 编组 google appengine 密钥

> ID：11872218
> 
> 赞同：0
> 
> 时间：2012-08-08T19:57:49.637
> 
> 标签：java, google-app-engine, jaxb2

我尝试使用`Google App Engine`以下`Jaxb2Marshaller`代码：

```
@Entity
@XmlRootElement
public class Incident {
  @Id
  @GeneratedValue(strategy = GenerationType.IDENTITY)
  private Key incidentId; 
```

我尝试将`@XmlJavaTypeAdapter`注释与我的特定适配器一起使用，或者`@XMLTransiet`只是跳过此字段，但我仍然收到以下错误消息。我该如何解决这个问题？

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'appView' defined in ServletContext resource [/WEB-INF/spring/appServlet/servlet-context.xml]: Cannot resolve reference to bean 'jaxbMarshaller' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jaxbMarshaller' defined in ServletContext resource [/WEB-INF/spring/appServlet/servlet-context.xml]: Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: Lcom/google/appengine/api/datastore/Key;
at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:630)
at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:148)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1035)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:939)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
at javax.servlet.GenericServlet.init(GenericServlet.java:212)
at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:440)
at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:263)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
at org.mortbay.jetty.Server.doStart(Server.java:224)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:197)
at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:241)
at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:148)
at com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:259)
at com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:48)
at com.google.appengine.tools.development.DevAppServerMain.<init>(DevAppServerMain.java:162)
at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:138)

Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jaxbMarshaller' defined in ServletContext resource [/WEB-INF/spring/appServlet/servlet-context.xml]: Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: Lcom/google/appengine/api/datastore/Key;
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
... 42 more

Caused by: java.lang.NoClassDefFoundError: Lcom/google/appengine/api/datastore/Key;
at java.lang.Class.getDeclaredFields0(Native Method)
at java.lang.Class.privateGetDeclaredFields(Class.java:2291)
at java.lang.Class.getDeclaredFields(Class.java:1743)
at com.sun.xml.internal.bind.v2.model.nav.ReflectionNavigator.getDeclaredFields(ReflectionNavigator.java:238)
at com.sun.xml.internal.bind.v2.model.nav.ReflectionNavigator.getDeclaredFields(ReflectionNavigator.java:47)
at com.sun.xml.internal.bind.v2.model.impl.ClassInfoImpl.findFieldProperties(ClassInfoImpl.java:359)
at com.sun.xml.internal.bind.v2.model.impl.ClassInfoImpl.getProperties(ClassInfoImpl.java:290)
at com.sun.xml.internal.bind.v2.model.impl.RuntimeClassInfoImpl.getProperties(RuntimeClassInfoImpl.java:165)
at com.sun.xml.internal.bind.v2.model.impl.ModelBuilder.getClassInfo(ModelBuilder.java:232)
at com.sun.xml.internal.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:89)
at com.sun.xml.internal.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:70)
at com.sun.xml.internal.bind.v2.model.impl.ModelBuilder.getClassInfo(ModelBuilder.java:198)
at com.sun.xml.internal.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:84)
at com.sun.xml.internal.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:70)
at com.sun.xml.internal.bind.v2.model.impl.ModelBuilder.getTypeInfo(ModelBuilder.java:304)
at com.sun.xml.internal.bind.v2.model.impl.TypeRefImpl.calcRef(TypeRefImpl.java:81)
at com.sun.xml.internal.bind.v2.model.impl.TypeRefImpl.getTarget(TypeRefImpl.java:58)
at com.sun.xml.internal.bind.v2.model.impl.RuntimeTypeRefImpl.getTarget(RuntimeTypeRefImpl.java:47) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:09:54.233

我设法通过添加`appengine-api-1.0-sdk-1.7.3.jar`到 jaxb 类路径让我的工作。有趣的 *.jar 不起作用，所以我必须指定完整的 .jar

将以下内容添加到您的类路径 arg

```
;appengine-api-1.0-sdk-1.7.3.jar 
```

希望有帮助，我的 cmd arg 是：

```
wsgen -cp "./war/WEB-INF/classes;PATH_TO_YOUR_JAR/appengine-api-1.0-sdk-1.7.3.jar" -wsdl -keep -r "./war" -d "./war/WEB-INF/classes" -s "./src"  com.example 
```

确保指定正确的 jar 名称，在我的情况下是`appengine-api-1.0-sdk-1.7.3.jar`

干杯巴巴吉德

# c# - ValueInjector 没有映射属性

> ID：11872222
> 
> 赞同：2
> 
> 时间：2012-08-08T19:58:11.063
> 
> 标签：c#, mapping, valueinjecter

我无法让 ValueInjector 正确映射我的对象。这是我用于映射的代码：

```
public IEnumerable<CategoryDTO> FindCategories(IList<object[]> criteria)
{
    IEnumerable<Category> categories = _categoryRepo.Find(criteria);
    IEnumerable<CategoryDTO> categoriesDto = Mapper.Map<IEnumerable<Category>, IEnumerable<CategoryDTO>>(categories);
    return categoriesDto;
} 
```

变量类别包含一个属性：

```
IEnumerable<Standard> Standards 
```

在我调用的实例中，该属性包含两个标准对象。问题是当我从我的类别映射到我的 CategoryDTO 时。CategoryDTO 定义如下：

```
public class CategoryDTO : AuditableDTO
{
    public Guid CategoryId { get; set; }
    public string Name { get; set; }
    public string MachineName { get; set; }
    public string Description { get; set; }
    public IEnumerable<StandardDTO> Standards { get; set; }
} 
```

映射语句运行后，我调查了 categoriesDto.Standards 的内容，我可以看到它为空。我本来希望我的标准已经映射，但我确定我错过了 ValueInjector 的一些东西。可能类似于告诉它如何将 Standard 映射到 StandardDTO。有什么想法吗？

编辑：我需要澄清一下，我正在使用这个[http://valueinjecter.codeplex.com/wikipage?title=Automapper%20Simulation&referringTitle=Home](http://valueinjecter.codeplex.com/wikipage?title=Automapper%20Simulation&referringTitle=Home)

编辑 2：深入挖掘，我可以看到我的 Iesi.Collections.HashedSet 导致了这个问题。Categorys 的 Standards 属性类型为 Iesi.Collections.ISet，这变成了 HashedSet。所以我想我真正的问题是如何检查该类型的属性以及如何映射？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:01:12.820

我的猜测是 Mapper.Map 不知道映射比 IEnumerable 更深的一层。您是否尝试过遍历集合，将其映射到 Category、CategoryDTO 级别与 IEnumerable 级别？

# javascript - 单击太快时脚本滞后 [jQuery]

> ID：11872223
> 
> 赞同：1
> 
> 时间：2012-08-08T19:58:26.577
> 
> 标签：javascript, jquery, html

我写的画廊脚本有问题。基本上，有一组缩略图和一个带箭头的大图像。当您单击缩略图时，当前图像淡出，当新图像加载时，它淡入。我遇到的问题是，如果您在转换过程中多次单击缩略图或箭头（好像更改当前显示的图像），整个过程开始延迟。您点击的次数越多，您看到的延迟就越多。

所以说我在淡入淡出过渡的中间点击了五次。当前转换完成后，如果我单击另一个缩略图/箭头，脚本效果不会像预期的那样立即启动，它会延迟几秒钟然后启动。

这是我的脚本：

```
$(".jTscroller a").click(function(event) {
    event.preventDefault();
    var last = $("#photo").attr("src");                 
    var target = $(this).attr("href");
    if (last != target) {
        $("#photo").stop(false,false).fadeTo("fast", 0, function() {
            $("#photo").attr("src",target);
            $("#photo").load(function() {
                $("#photo").fadeTo("fast", 1);
            });
        });
    };
});
$("#photo-area .arrow.left").click(function(event) {
    event.preventDefault();
    var current = $("#photo-area #photo").attr("src");
    var prev = $(".jTscroller a[href=\""+current+"\"]").prev("a").attr("href");
    var next = $(".jTscroller a[href=\""+current+"\"]").next("a").attr("href");
    if (typeof prev != "undefined") {
        if (prev != current) {
            $("#photo").stop(false,false).fadeTo("fast", 0, function() {
                $("#photo").attr("src",prev);
                $("#photo").load(function() {
                    $("#photo").fadeTo("fast");
                });
            });
        };
    };
});
$("#photo-area .arrow.right").click(function(event) {
    event.preventDefault();
    var current = $("#photo-area #photo").attr("src");
    var prev = $(".jTscroller a[href=\""+current+"\"]").prev("a").attr("href");
    var next = $(".jTscroller a[href=\""+current+"\"]").next("a").attr("href");
    if (typeof next != "undefined") {
        if (next != current) {
            $("#photo").stop(false,false).fadeTo("fast", 0, function() {
                $("#photo").attr("src",next);
                $("#photo").load(function() {
                    $("#photo").fadeTo("fast", 1);
                });
            });
        };
    };
}); 
```

JS 小提琴：http: [//jsfiddle.net/G5VAf/7/](http://jsfiddle.net/G5VAf/7/)

我的修复理论是添加一个布尔变量，当动画完成时该变量会发生变化，但我尝试了 50 次都没有用。希望比我更熟练的人能弄清楚。

哦，我知道我应该把它缩小到一个更小的脚本，我只是想在走得更远之前让它工作......

更新：尝试实现下面提到的队列，现在它根本不会淡入。

```
$("#photo").animate({
    opacity: 0
}, {queue: false, duration: 500}, function() {
    $("#photo").attr("src",target);
    $("#photo").load(function() {
        $("#photo").animate({
            opacity: 1
        });
    });
}); 
```

更新2：想通了。最终脚本：

```
$(document).ready(function() {
    $(".jTscroller a").click(function(event) {
        event.preventDefault();
        var last = $("#photo").attr("src");                 
        var target = $(this).attr("href");
        if (last != target) {
            $("#photo").stop(false,true).animate({
                opacity: 0
            }, {queue: false, duration: 500, complete: function() {
                $("#photo").attr("src",target);
                $("#photo").load(function() {
                    $("#photo").stop(false,false).animate({
                        opacity: 1
                    }, {queue: false, duration: 500});
                });
            }});
        };
    });
    $("#photo-area .arrow.left").click(function(event) {
        event.preventDefault();
        var current = $("#photo-area #photo").attr("src");
        var prev = $(".jTscroller a[href=\""+current+"\"]").prev("a").attr("href");
        var next = $(".jTscroller a[href=\""+current+"\"]").next("a").attr("href");
        if (typeof prev != "undefined") {
            if (prev != current) {
                $("#photo").stop(false,true).animate({
                    opacity: 0
                }, {queue: false, duration: 500, complete: function() {
                    $("#photo").attr("src",prev);
                    $("#photo").load(function() {
                        $("#photo").stop(false,false).animate({
                            opacity: 1
                        }, {queue: false, duration: 500});
                    });
                }});
            };
        };
    });
    $("#photo-area .arrow.right").click(function(event) {
        event.preventDefault();
        var current = $("#photo-area #photo").attr("src");
        var prev = $(".jTscroller a[href=\""+current+"\"]").prev("a").attr("href");
        var next = $(".jTscroller a[href=\""+current+"\"]").next("a").attr("href");
        if (typeof next != "undefined") {
            if (next != current) {
                $("#photo").stop(false,true).animate({
                    opacity: 0
                    }, {queue: false, duration: 500, complete: function() {
                    $("#photo").attr("src",next);
                    $("#photo").load(function() {
                        $("#photo").stop(false,false).animate({
                            opacity: 1
                        }, {queue: false, duration: 500});
                    });
                }});
            };
        };
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:15:03.117

听起来您的动画队列有问题。您使用的 jQuery 函数只是该`.animate()`函数的简写。

```
.animate( properties, options )

  queue: A Boolean indicating whether to place the animation in the effects queue. If false, the animation will begin immediately. As of jQuery 1.7, the queue option can also accept a string, in which case the animation is added to the queue represented by that string. 
```

基本上每次点击都会被添加到动画队列中，因此会延迟。您可以尝试该`.animate()`功能并将队列设置为`false`，看看是否有帮助。

# python - 使用嗖嗖声进行文本搜索

> ID：11872238
> 
> 赞同：6
> 
> 时间：2012-08-08T19:59:31.067
> 
> 标签：python, whoosh

我很想测试 Whoosh 的文本搜索功能，现在一个简单的人为示例对我不起作用。我想我在这里遗漏了一些东西。在下面的代码中，我希望它给出一个搜索结果，但我得到 0 次点击。

```
import sys
import os

from whoosh.fields import Schema, TEXT, STORED
from whoosh.index import create_in, open_dir
from whoosh.query import *

#creating the schema
schema = Schema(tax_id=STORED,
                name=TEXT(stored=True))

#creating the index
if not os.path.exists("index"):
    os.mkdir("index")

ix = create_in("index",schema)
ix = open_dir("index")
writer = ix.writer()
writer.add_document(tax_id="17",name=u"Methyliphilus methylitrophus")
writer.add_document(tax_id="17",name=u"Methylophilus methylotrophus Jenkins et al. 1987")
writer.add_document(tax_id="45",name=u"Chondromyces lichenicolus") 
writer.commit()

myquery = And([Term("name",u"Chondromyces")])
with ix.searcher() as searcher:
    print searcher.search(myquery) 
```

输出：

```
<Top 0 Results for And([Term('name', u'Chondromyces lichenicolus')]) runtime=9.41753387451e-05> 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T00:23:07.057

能够使它工作

```
from whoosh.qparser import QueryParser
ix=open_dir("index")
with ix.searcher() as searcher:
    query = QueryParser("name", ix.schema).parse(u'Chondromyces')
    results = searcher.search(query)
    for result in results:
        print result 
```

# ruby - ruby 中的 dsl 之类的木偶

> ID：11872241
> 
> 赞同：0
> 
> 时间：2012-08-08T19:59:44.787
> 
> 标签：ruby, dsl

我正在使用 ruby​​ 实现一个内部 DSL。我提供了一个命令行工具来执行用文件编写的 DSL 脚本（很像[puppet](http://puppetlabs.com/)）。起初我打算使用 load() 来运行脚本，事情是，我希望能够在执行脚本之前传递一些上下文。我希望我可以阅读文本形式的脚本并将其视为一个块，然后在给定的上下文中执行该块。这样的事情可能吗？

或者这些事情通常是如何实现的？可以肯定地做到这一点，因为 puppet 做到了。但在我可以挖掘它的代码库之前，我在这里尝试。

另外，我可以看看内部 DSL 实现的任何不错的小例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:13:33.583

请检查以下链接，一系列 DSL 文章。

[http://www.ibm.com/developerworks/java/library/j-cb04046/index.html](http://www.ibm.com/developerworks/java/library/j-cb04046/index.html) [http://deadprogrammersociety.blogspot.de/2006/11/ruby-domain-specific-languages-basics.html](http://deadprogrammersociety.blogspot.de/2006/11/ruby-domain-specific-languages-basics.html) [http: //deadprogrammersociety.blogspot.de/2006/11/ruby-domain-specific-languages-basics_08.html](http://deadprogrammersociety.blogspot.de/2006/11/ruby-domain-specific-languages-basics_08.html) [http://deadprogrammersociety.blogspot.de/2006/11/ruby-domain-specific-languages-basics_19.html](http://deadprogrammersociety.blogspot.de/2006/11/ruby-domain-specific-languages-basics_19.html) [http: //deadprogrammersociety.blogspot.de/2006/11/ruby-domain-specific-languages-basics_27.html](http://deadprogrammersociety.blogspot.de/2006/11/ruby-domain-specific-languages-basics_27.html)

# c# - 图像和其他非 aspx 文件的自定义基于角色的身份验证

> ID：11872244
> 
> 赞同：0
> 
> 时间：2012-08-08T19:59:49.477
> 
> 标签：c#, asp.net, iis-7

[我正在尝试根据这篇文章http://www.codeproject.com/Articles/2905/Role-based-Security-with-Forms-Authentication](http://www.codeproject.com/Articles/2905/Role-based-Security-with-Forms-Authentication)拥有一个基于身份验证的自定义角色

Aspx 文件工作正常。

但是，当我尝试访问非 aspx 文件（例如图像）时，我被重定向回登录页面。

任何想法？

# wpf - 使用 MVVM 进行单元测试的好资源

> ID：11872250
> 
> 赞同：4
> 
> 时间：2012-08-08T20:00:10.507
> 
> 标签：wpf, unit-testing, mvvm

我对 WPF 和 MVVM 相当陌生，但我了解基础知识。我遇到的问题是试图找到一些好的资源来学习使用 MVVM 进行单元测试。我是单元测试的新手。

任何人都可以推荐一些好的资源，无论是博客、视频，甚至是书籍。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T21:29:26.557

这个话题在这里被广泛讨论：

[https://stackoverflow.com/questions/37359/what-c​​-sharp-mocking-framework-to-use](https://stackoverflow.com/questions/37359/what-c-sharp-mocking-framework-to-use)

[WPF 单元测试框架](https://stackoverflow.com/questions/915578/wpf-unit-testing-framework)

您可以在“相关问题”列表中找到大量类似的问题。

Arrange, Act Assert 有助于构建单元测试以提高可读性。 [http://www.arrangeactassert.com/why-and-what-is-arrange-act-assert/](http://www.arrangeactassert.com/why-and-what-is-arrange-act-assert/)

您提到您是单元测试的新手。我建议阅读一些讨论该主题的免费电子书，以更好地了解单元测试。毕竟，单元测试独立于项目中使用的框架，因为您应该测试单个类、方法而不是整个组件。

当然，读一本好书总是值得的：

[http://www.amazon.com/gp/search/ref=sr_kk_1?rh=i%3Astripbooks%2Ck%3Atest+driven+development&keywords=test+driven+development&ie=UTF8&qid=1344460674](http://www.amazon.com/gp/search/ref=sr_kk_1?rh=i%3Astripbooks%2Ck%3Atest+driven+development&keywords=test+driven+development&ie=UTF8&qid=1344460674)

MSDN 杂志有很多关于单元测试的文章：

[http://social.msdn.microsoft.com/Search/en-US?query=unit%20testing&Refinement=118&ac=8](http://social.msdn.microsoft.com/Search/en-US?query=unit%20testing&Refinement=118&ac=8)

请参阅：http: [//msdn.microsoft.com/en-us/magazine/dd419663.aspx](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)，以获取带有单元测试的示例 MVVM 应用程序。

这应该足够开始了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T21:31:42.893

[《单元测试的艺术](https://rads.stackoverflow.com/amzn/click/com/1933988274)》对你来说是一本好书。和[Moq](http://code.google.com/p/moq/)用于模拟框架

# objective-c - 如何将创建的视图控制器集成到情节提要中？

> ID：11872251
> 
> 赞同：0
> 
> 时间：2012-08-08T20:00:15.047
> 
> 标签：objective-c, ios, uiviewcontroller, uistoryboard

我有一个视图控制器以及创建的 .xib 以及一个故事板。现在我想让这个视图控制器的视图出现在导航栏和表格视图之间的故事板中。我想拖动一个新的视图控制器，并让该类指向我创建的视图控制器。这个解决方案正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:33:21.813

是的，这是正确的，从对象调色板中拖动一个视图控制器，将类名更改为您的视图控制器类名并参加派对。在故事板中连接您需要的任何 segues。

# scala - 是否可以记录 Scala REPL 的输出？

> ID：11872252
> 
> 赞同：5
> 
> 时间：2012-08-08T20:00:17.540
> 
> 标签：scala, logging, read-eval-print-loop

有没有办法在文件中记录 Scala REPL 的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:15:25.100

您可以导入 java.util.PrintWriter 并使用如下代码：

```
val out = new PrintWriter("out.txt")
out.println("output string")
out.flush();
out.close(); 
```

# php - 导航栏中的类别，交响乐 cms

> ID：11872253
> 
> 赞同：0
> 
> 时间：2012-08-08T20:00:18.993
> 
> 标签：php, symphony-cms

我用的是**[symphony cms](http://getsymphony.com/)**，真的很好，但我不能修改导航栏。

我喜欢我的**类别**列表，我可以列出页面但没有类别或文章。

帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:49:45.977

我假设您正在谈论使用默认 Symphony 工作区？通过将鼠标悬停在管理界面左上角的“内容”下拉菜单上并选择“类别”或“文章”部分，您可以获得一个表格视图，其中显示了“类别”或“文章”部分中的所有条目。

此视图将列出所选部分中的所有条目，并允许您创建、编辑或删除条目。

# javascript - 将“2012-04-10T15:57:51.013”转换为日期 javascript 对象

> ID：11872256
> 
> 赞同：0
> 
> 时间：2012-08-08T20:00:35.783
> 
> 标签：javascript, jquery, date

我如何使用 Jquery 或 Javascript 将此格式“2012-04-10T15:57:51.013”转换为 Date javascript 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:01:54.233

只是简单的 JavaScript 日期：

```
var x = '2012-04-10T15:57:51.013';
var dateObject = new Date(x); 
```

[**演示**](http://jsfiddle.net/Cunz7/)

可能不适用于所有浏览器。最好使用**[datejs](http://www.datejs.com/)**

# java - java随机化数组中的索引

> ID：11872258
> 
> 赞同：0
> 
> 时间：2012-08-08T20:00:55.690
> 
> 标签：java, arrays, indices

我看过 Randomize or shuffle an array [Randomize or shuffle an array](https://stackoverflow.com/questions/4742754/randomize-or-shuffle-an-array)

我不确定这是否是最好的方法。

我想用 3 个项目随机化数组的索引。

12 4 5

```
int numbers[] = new int[3]; 
```

我尝试使用 Maths.Random

int randomoption2 = opmin + (int)(Math.random() * ((opmax - opmin) + 1));

但是我遇到了重复索引值的问题。什么是随机化索引的最佳方法，所以没有重复。

例如

```
a[1] = 2; 
```

我不希望数组中的两个元素返回一个索引

[http://www.exampledepot.com/egs/java.util/coll_Shuffle.html](http://www.exampledepot.com/egs/java.util/coll_Shuffle.html)

```
public class randomorder {

        public static void main(String [] args)
        {
            randomorder();  
            System.out.println(randomorder());
        }

        public static ArrayList randomorder(){
            ArrayList nums = new ArrayList();
            nums.add(1);
            nums.add(2);
            nums.add(3);

            Collections.shuffle(nums);
            return nums;
        }
    } 
```

我现在需要将每个数字存储在变量中，以便可以输出它们

System.out.println(options[0]);

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T20:03:41.227

使用[`Collections.shuffle`](http://ideone.com/Zd365)：

```
Integer[] numbers = { 1, 2, 3, 4, 5 };
Collections.shuffle(Arrays.asList(numbers)); 
```

在线查看它：[ideone](http://ideone.com/Zd365)

它在内部使用[Fisher-Yates 洗牌](http://en.wikipedia.org/wiki/Fisher-Yates_shuffle)。这是一种高效的洗牌算法，不会给你重复。

**有关的**

*   [Java 的 Collections.shuffle 是做什么的？](https://stackoverflow.com/questions/2249520/javas-collections-shuffle-is-doing-what)
*   [如何在 Java 中将 int[] 转换为 Integer[]？](https://stackoverflow.com/questions/880581/how-to-convert-int-to-integer-in-java)
*   [Arrays.asList() 不能正常工作？](https://stackoverflow.com/questions/1467913/arrays-aslist-not-working-as-it-should)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:03:49.037

只需通过一组布尔值保留三个布尔值。一旦您点击 0、1 或 2 索引，请将它们设置为 true。

选择一个随机位置并执行 while(boolean[number selected] == true) 重做您的随机选择。

# javascript - up() 和 down() 与 Ext.getCmp()

> ID：11872261
> 
> 赞同：26
> 
> 时间：2012-08-08T20:00:58.000
> 
> 标签：javascript, extjs, extjs4, extjs4.1

我很困惑我需要在 up() down() 和 Ext.getCmp(ID) 之间为 grep 对象使用哪一个。

对我来说，定义 ID 到对象并通过 Ext.getCmp('ID') 检索对象更容易，代码看起来更干净。

例如：

```
console.log(this.up('panel').up('panel').down('grid'));
console.log(Ext.getCmp('myPanel')); 
```

哪一个对性能更好？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-08T23:28:39.383

使用 ID 和 getCmp 查找组件存在严重的问题。主要问题是您不能安全地重用组件，因为在大多数情况下，标记会创建具有重复 ID 的 HTML 元素，这是无效的 HTML。此外，当您有两个具有相同 ID 的组件时，您将遇到难以跟踪的意外行为，因为框架不会正确引用您的组件。

有几个关于此的博客和论坛帖子，以及 J. Garcia 的视频，涵盖了这个主题。使用 getCmp 的建议方法仅用于调试，切换到生产就绪代码的其他方法（up、down、refs、[itemId](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.AbstractComponent-cfg-itemId)和[ComponentQuery](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ComponentQuery)）。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-08T20:57:01.117

`Ext.getCmp()`在内部使用哈希映射，因此它的光照速度很快，几乎与基于键检索数组中的值一样快。

`.up()`并且`down()`是使用组件层次结构的遍历来实现的，这是一个较慢的过程。

但是`up()`并`down()`使用选择器，因此他们也可以选择类，而不仅仅是 id。

您只需要记住您可能想要使用`up()`or的各种情况`down()`，例如当有多个控件的通用处理程序时，或者当您所使用的组件由框架自动生成时，您不能给它一个标识自己。

# c++ - 使用 QDialog 作为弹出窗口时连接无法正常工作

> ID：11872266
> 
> 赞同：2
> 
> 时间：2012-08-08T20:01:13.293
> 
> 标签：c++, qt, user-interface, qt4

我在当前正在编写的程序中遇到连接问题。我首先创建了一个“主窗口”对话框，其中包含按钮、行编辑等（这些都与我的自定义插槽完美配合）。其中一个按钮（“添加类”按钮）应该创建一个新的弹出对话框，它是主窗口对话框的子对话框。我为这个新对话框（addClass.h 和 addClass.cpp）编写了一个新的 .h 和 .cpp。当我单击按钮时，对话框模式设置为 ApplicationModal 并且到目前为止，代码有效；当我单击“添加类”时，新对话框显示为一个弹出窗口，其中包含我想要的所有标签、行编辑和按钮。当我尝试使用这个新类使用连接时，问题就出现了。单击确定按钮后，不执行连接。程序正确编译（使用 qmake 然后 make）并且在运行时没有错误。我还从弹出对话框中获取了 .h 和 .cpp 文件，并用他们自己的 main.cpp 对其进行了测试，并且连接工作得很好。我对问题可能是什么感到困惑，所以任何帮助都会很棒！

以下是一些可能有用的代码片段：

在 mainWindow.cpp 中启动弹出对话框的自定义插槽（有效，我在 mainWindow.cpp 中包含“addClass.h”）：

```
void mainWindow::addClassCombo(){
    addClass aC(win);
} 
```

添加类.h：

```
#ifndef ADDCLASS_H
#define ADDCLASS_H

#include <QDialog>
#include <QHBoxLayout>
#include <QVBoxLayout>
#include <QLabel>
#include <QLineEdit>
#include <QPushButton>
#include <QString>

class addClass : public QDialog{

    Q_OBJECT

public:
    addClass(QWidget *parent = 0);

private slots:
    void addToTxt();

private:
    QDialog *addMathClass;
    QVBoxLayout *mainLayout;
    QHBoxLayout *layoutOkCanc;
    QLabel *nameL;          //label for name of math class to be added
    QLineEdit *name;        //line edit for name
    QPushButton *ok;        //ok button
    QPushButton *canc;      //cancel button
};

#endif 
```

addClass.cpp（与它自己的 main.cpp 一起使用，但不是与我的 mainWindow.cpp 一起使用）：

```
#include <QtGui>
#include <QTextStream>

#include "addClass.h"

#include <iostream>

addClass::addClass(QWidget *parent):QDialog(parent){

    addMathClass = new QDialog(parent);

    mainLayout = new QVBoxLayout(addMathClass);
    layoutOkCanc = new QHBoxLayout();

    nameL = new QLabel("Math Class Name:");
    name = new QLineEdit;
    nameL->setBuddy(name);

    ok = new QPushButton("Ok");
    canc = new QPushButton("Cancel");

    QObject::connect(canc, SIGNAL(clicked()), addMathClass, SLOT(close()) ); //<-works
    QObject::connect(ok, SIGNAL(clicked()), this, SLOT(addToTxt()) );     //<-doesn't work
    QObject::connect(ok, SIGNAL(clicked()), addMathClass, SLOT(close()) );  //<-works

    layoutOkCanc->addStretch();
    layoutOkCanc->addWidget(ok);
    layoutOkCanc->addWidget(canc);

    mainLayout->addWidget(nameL);
    mainLayout->addWidget(name);
    mainLayout->addLayout(layoutOkCanc);

    addMathClass->setWindowModality(Qt::ApplicationModal);
    addMathClass->setWindowTitle("Add Class");
    addMathClass->show();
}

void addClass::addToTxt(){
    std::cout<<"testing"<<std::endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:40:30.523

您`addClass aC(win);`的超出范围并正在被销毁。连接有效，但对象销毁后断开连接。这就是为什么你没有被调用插槽

# javascript - 卡在构建“购物车管理”系统

> ID：11872269
> 
> 赞同：3
> 
> 时间：2012-08-08T20:01:29.643
> 
> 标签：javascript, jquery, html

我正在尝试为视频点建立一个数据库。主页是一个点列表，您可以查看和修改它们。我想要做的是建立一个购物车系统，其中检查点的 ID 会自动添加到购物车并存储为 cookie。这样，用户可以浏览多个页面，同时仍然检查所有内容。

到目前为止，我在每个位置都有一个复选框，选中时会调用一个函数，该函数将复选框的 id 添加到数组并将其存储为 cookie。

我可以通过 jquery 检索 cookie。我需要做的是在遍历点并打印它们时，检查该点 id 是否在 cookie 中，因此我可以通过 php.ini 将其设置为已检查或不检查。这可能吗？有没有更好的方法来实现这一点？

这是我到目前为止所拥有的。

```
$(document).ready(function(){

    var checkedItems = [];

    $('.spotCheck').click(function(){
        var currentID = this.id;
        checkedItems.push(currentID);
        updateCookie();
    });

    function updateCookie(){
        $.cookie('itemList',checkedItems);
    }

    $('#mainContainer').click(function(){
        $('#textInCenter').html($.cookie('itemList') );
    });

}); 
```

单击复选框将 ID 添加到数组checkedItems，然后单击mainContainer 使其可见，以便我可以看到当前在数组中的项目。我可以浏览页面并且 cookie 保留在数组中（现在无法删除它们，但我现在并不担心）。

那么，当我打印点列表时，如何检查数组以查看其中是否有 id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:54:48.220

根据您要查找的内容，我认为这对您有用：

```
for (var i = 0; i < checkedItems.length; i++)
{
    var elm = $('#' + checkedItems[i]);
    if (elm.length > 0)
    {
        //element with the id exists.
        elm.attr('checked', true);
    }
 } 
```

# python - 改进 Twitter 查询的列表理解

> ID：11872270
> 
> 赞同：1
> 
> 时间：2012-08-08T20:01:39.817
> 
> 标签：python, json, twitter

我正在使用 twitter api，并且我有这个 python 代码设置：

```
call_twitter = urllib2.urlopen("http://search.twitter.com/search.json?q=hello")
tweets_json = json.loads(call_twitter.read()) 
```

api json输出的结构是

```
/completed_in
/stuff
/stuff
/results
.../tweet1
....../from_user
....../tweet_text
....../etc
.../tweet2
.../moretweets 
```

我正在尝试最小的列表理解来获取内部字典中的推文“from_user”和“text”属性。我能做的最好的就是，

```
call_twitter = urllib2.urlopen("http://search.twitter.com/search.jsonq=alhamdulillah")
tweets_json = json.loads(call_twitter.read())

    for tweet in tweets_json['results']:
        text = tweet['text']
        from_user = tweet['from_user'] 
```

我改进了这个，

```
text_list = [tweet['text'] for tweet in tweets_json['results']]
from_user_list = [tweet['from_user'] for tweet in tweets_json['results']] 
```

当我将它们保存在 2 个不同的列表中时，我不确定“from_user”和“text”是否总是相互对应（按顺序）。有没有一种方法可以在一次迭代中同时获取“文本”和“from_user”而不使用 for 循环？

我是python菜鸟，但提前感谢您的帮助:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T20:03:19.147

你可以做

```
text_list = [(tweet['text'], tweet['from_user']) for tweet in tweets_json['results']] 
```

这将为您提供一个元组列表，每个元组为`(text, user)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:04:38.343

尝试这个：

```
tweets = [(t['text'], t['from_user']) for t in tweets_json['results']] 
```

这将为您提供表单的元组列表`(tweet, user)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T20:08:32.697

就可读性而言，保留**原始**for 循环可能会更好。

```
tweets = [(tweet['text'], tweet['from_user']) for tweet in tweets_json['results']] 
```

正如 Gordon Bailey 所建议的那样，这是在 tuple 中获取所需信息的好方法`(text, user)`。

就速度而言：列表理解可能会更好。

通常，如果您要构建复合值，则可以接受列表推导。如果您使用循环是因为它的副作用（例如打印），那么显式循环会更好。

# winapi - 计算使用 GDI 渲染的文本（文本矩形）的大小

> ID：11872274
> 
> 赞同：2
> 
> 时间：2012-08-08T20:02:10.527
> 
> 标签：winapi, text, menu, gdi, font-size

我正在尝试创建一个菜单并使用 GDI 绘制它。

我有一个 MENU TITLE，不可更改。我有一系列项目。

如果我希望标题为“主菜单”，如何计算文本的宽度和高度？如果我在 TextOut() 之前将 SetBkColor() 设置为与 HDC 背景不同的颜色，我会看到它呈现为矩形 - 但是如何在屏幕上写出文本之前获取该矩形的大小？

此外，我预先设置了 CreateFont() 和 SelectObject(HDC, Font)，这样我就可以为菜单编写“更大”的文本。

有人有建议吗？

尚未找到使用本机 GDI 且未在 .NET 中使用较新的 Graphics 对象的可行解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T20:30:52.813

最简单的方法可能是`DrawText()`使用`DT_CALCRECT`.

您也可以使用 自己测量文本`GetTextExtentPoint32()`。

# c# - C# 实现通用 IEnumerable

> ID：11872275
> 
> 赞同：2
> 
> 时间：2012-08-08T20:02:14.980
> 
> 标签：c#, generics, interface, ienumerable

我一直在想是否有可能让说`State`类实施`IEnumerable<Person>`，`IEnumerable<City>`所以我可以通过 foreach 以及所有城市让所有居住在该州的人。它甚至不会编译这样说：（`Error 1 'ConsoleApplication1.City' does not implement interface member 'System.Collections.IEnumerable.GetEnumerator()'`奇怪）......这是代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using System.Collections;

namespace ConsoleApplication1
{
    class Person
    {
    }

    class City : IEnumerable<Person>
    {
        // City has citizens:
        Person[] citizens;

        IEnumerator<Person> IEnumerable<Person>.GetEnumerator()
        {
            foreach (Person p in citizens)
                yield return p;
        }
    }

    class State : IEnumerable<Person>, IEnumerable<City>
    {
        // State has cities:
        City[] cities;

        IEnumerator<Person> IEnumerable<Person>.GetEnumerator()
        {
            foreach (City c in cities)
                foreach (Person p in c)
                    yield return p;
        }

        IEnumerator<City> IEnumerable<City>.GetEnumerator()
        {
            foreach (City c in cities)
                yield return c;
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            State s = new State();
            foreach (Person p in s) ;
            foreach (City c in s) ;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T20:05:21.157

问题是这`IEnumerable<T>`还需要您实现`IEnumerable`（非通用版本）。您需要实现这两个`GetEnumerator()`调用。

话虽如此，这将变得非常棘手，因为您的`State`班级将需要确定要枚举的内容。我个人会避免`IEnumerable<T>`在一个类中实现两次，而是将可枚举作为方法返回：

```
class State : IEnumerable<City>
{
    public IEnumerable<Person> GetPeople()
    {
      // return people... 
```

总的来说，我认为试图使某物成为两种不同类型的枚举确实是一个设计缺陷。最好让 State 更像：

```
public class State
{
    public IEnumerable<City> Cities { get { // return cities...

    public IEnumerable<People> People { get { // return people... 
```

这将要求您（稍微）更改您的用法，更像是：

```
foreach(Person person in theState.People)
{
    // .... 
```

就个人而言，我认为这对`State`和都是更好的方法`City`。我会这样写：

```
using System.Collections.Generic;
using System.Linq;

namespace ConsoleApplication1
{

    class Person
    {
    }

    class City
    {
        // City has citizens:
        Person[] citizens;

        public IEnumerable<Person> People
        {
            get
            {
                return citizens;
            }
        }
    }

    class State : IEnumerable<Person>, IEnumerable<City>
    {
        // State has cities:
        City[] cities;

        public IEnumerable<City> Cities
        {
            get
            {
                return cities;
            }
        }

        public IEnumerable<Person> AllPeople
        {
            get
            {
                return Cities.SelectMany(c => c.People);
            }
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            State s = new State();
            foreach (Person p in s.AllPeople) { /* Do something */ }
            foreach (City c in s.Cities) { /* Do something */ } 
        }
    }
} 
```

我发现这一点要清楚得多——因为一个城市*有人*，但它本身不是人，等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T20:05:06.437

您还需要实现非泛型变体！System.Collections.IEnumerable 是没有泛型类型参数的那个！

为 System.Collections.Generic.IEnumerable.GetEnumerator 添加一个显式接口实现 - 并使其引发异常 - 您无法正确实现非泛型接口。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T20:11:01.760

这实际上是一个有趣的问题，因为 Reed 和 Sebastian 都指出，您还需要实现非泛型方法。但是，您只能实现一次，并且需要两个接口。我认为更好的设计可能根本没有状态实现 IEnumerable，但有两个属性 People 和 Cities 公开 IEnumerables。我认为这也是一个更方便（可发现）的 API。

# isapi-rewrite - 如何使用带有此规则的 Apache mod_rewrite 进行重定向？

> ID：11872284
> 
> 赞同：0
> 
> 时间：2012-08-08T20:02:57.140
> 
> 标签：isapi-rewrite

我无法让页面重定向到 product_detail.do，页面停留在 product_detail.asp

我需要来自旧 asp 站点的链接以正确重定向到新的 Java 站点。

如何修复以下规则？我需要做些什么不同的事情？谢谢。

```
RewriteCond %{QUERY_STRING} T1=([^/]+)
RewriteRule ^/product_detail.asp /product_detail.do?q=%1 [R=301,L,NE] 
```

更正，我正在使用 Apache mod_rewrite。再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:54:05.850

根据您使用的配置文件，您可能只需要去掉前面的“/”：

```
RewriteCond %{QUERY_STRING} T1=([^/]+)
RewriteRule ^product_detail.asp /product_detail.do?q=%1 [R=301,L,NE] 
```

# mercurial - Mercurial 上的多个并行版本

> ID：11872287
> 
> 赞同：0
> 
> 时间：2012-08-08T20:03:23.637
> 
> 标签：mercurial, branch

假设我正在为具有共同需求的不同客户开发软件。我用单线开发开发系统，没关系。每个客户端都在服务器上安装了软件，并通过从 bitbucket 存储库中提取来进行更新。

后来，其中一位客户要求定制模块仅用于他自己的需要。其他客户也可能有其他定制需求。

我的问题是：我如何管理定制，拉（更新）开发主线的新版本，以及只有在它们存在时的海关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:20:50.547

一种选择：使自定义成为代码库的一部分，而不是通过 Mercurial 进行管理。这样做有很多很好的理由，包括你不会分叉和维护单独的代码版本，或者确实维护存储库树的单独分支。这两个都是相当枯燥的任务，可能会导致问题，所以如果我是你，我会赞成。这取决于您的语言，但我的目标是在 MainCodeBase 中保留大量模块，并通过某种方式让用户配置使用的模块。

第二种选择：子存储库。为 Customer1 创建一个包含该客户模块并具有 MainCodeBase 子存储库的存储库。Customer1 只需要递归地拉取他们的存储库以获取最新的模块和最新的 MainCodeBase。这里的问题是，当您希望多个客户使用同一个模块时，它开始变得丑陋。

# android - 多个触摸事件

> ID：11872288
> 
> 赞同：0
> 
> 时间：2012-08-08T20:03:23.740
> 
> 标签：android, multi-touch

我想在屏幕上有四个不同的区域，并且能够确定每个区域是否被触摸。每个区域都应该有一个对应的布尔值，如果被触摸则为真。当一个区域为真时，画布的一部分将变为不同的颜色。

每个区域独立工作是非常重要的，所以如果区域 1 和区域 2 为真，并且用户放开区域 1，它会立即变为假而不影响区域 2。

谢谢！

编辑：我尝试了很多东西，但我刚刚重新开始。这来自一个具有带画布的 SurfaceView 的类。我不知道去哪里了。

```
public boolean onTouch(View v, MotionEvent ev) {
    // TODO Auto-generated method stub

    switch (ev.getAction()) {
    case MotionEvent.ACTION_DOWN:

        x = ev.getX();
        y = ev.getY();

        if (canvasHeight != 0 && canvasWidth != 0) {

            if (x < canvasWidth/2 && y < canvasWidth/2){
            x1 = x;
            y1 = y;

            }

            if (x < canvasWidth && y > canvasHeight){
                x2 = x;
                y2 = y;
            }
        }

        break;

    case MotionEvent.ACTION_POINTER_DOWN:

        break;

    case MotionEvent.ACTION_UP:

        break;
    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:16:56.147

以下是我处理您的问题的方法：

*   创建定义屏幕的四个可按下区域的矩形。
*   使用多点触控，检查坐标是否在任何定义的矩形中。如果是这种情况，则将屏幕该区域的布尔值设置为 true，以便将颜色渲染到该区域。如果坐标不在矩形中，则将布尔值设置为 false。

我希望这能让你开始！

**更新：**

我建议你从简单开始，不要使用多点触控。在您的触摸方法中，您可以获得触摸的`x`和`y`值。触摸屏幕后，您可以调用这样的方法，其中 x 和 y 是您的参数，例如。`checkRegion(x,y)`.

该方法可以返回一个 int 区域（因为在这种情况下，您一次只能触摸一个）：

```
public int checkRegion(int x, int y) {
int clickedRegion;

// Some code that will return the region number: 1 = top left, 2 = top right, 3 = bottom left, 4 = bottom right

return clickedRegion;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T21:02:16.613

首先，您需要检查所有四个区域；

```
switch (ev.getAction()) {
    case MotionEvent.ACTION_DOWN:

        x = ev.getX();
        y = ev.getY();

        if (canvasHeight != 0 && canvasWidth != 0) {
            //you need four sections, not the two?
            if (x < canvasWidth/2 && y < canvasWidth/2){
            //set your respective canvas color to what you want it for this quadrant
            }
            if (x < canvasWidth/2 && y > canvasWidth/2){
            //set your respective canvas color to what you want it for this quadrant
            }
            if (x < canvasWidth && y > canvasHeight){
                //set your respective canvas color to what you want it for this quadrant
            }
            if (x < canvasWidth && y < canvasHeight){
                //set your respective canvas color to what you want it for this quadrant
            }
        }

        break;

    case MotionEvent.ACTION_POINTER_DOWN:

        break;

    case MotionEvent.ACTION_UP:

        break;
    }

        return true;
    } 
```

现在，假设您可以让它工作，您需要做的就是在 action_pointer_down 中再次执行它，它将注册为“次要”点击。

如果动作是 Action_up，只需找出用户抬起手指的位置并做同样的事情。您应该考虑的一个问题是；如果用户在象限 1 中单击，但在象限 3 中将其抬起会怎样？这是一个稍微复杂一点的情况，但我认为你现在可以跳过它。

# vbscript - VBScript 列出 windows server 2008 R2 上安装的软件

> ID：11872290
> 
> 赞同：0
> 
> 时间：2012-08-08T20:03:26.110
> 
> 标签：vbscript, windows-server-2008-r2

我想用 VBscript 列出 windows server 2008 R2 上已安装的软件。我想验证必备软件（其中之一是 .NET Framework 3.5.1）。我实际上有两个解决方案，它们都没有显示所有的软件。

```
Const HKLM = &H80000002 'HKEY_LOCAL_MACHINE
installedSoftwaresPath = "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\"

Set objReg = GetObject("winmgmts://./root/default:StdRegProv")

objReg.EnumKey HKLM, installedSoftwaresPath, arrSubkeys
For Each strSubkey In arrSubkeys
    Ret = objReg.GetStringValue(HKLM, installedSoftwaresPath & strSubkey, "DisplayName", SoftwareName)
    If Ret <> 0 Then
    objReg.GetStringValue HKLM, strKey & strSubkey, "QuietDisplayName", SoftwareName       
    End If
    If SoftwareName<> "" Then
        WScript.Echo VbCrLf & "Display Name: " & SoftwareName
    End If
Next 
```

另一种解决方案是这个：

```
Set objWMIService = GetObject("winmgmts:" & "{impersonationLevel=impersonate}!\\.\root\cimv2")
Set colSoftware = objWMIService.ExecQuery("Select * from Win32_Product")

For Each objSoftware in colSoftware
    WScript.Echo objSoftware.Caption
Next 
```

是否可以获取所有已安装的软件？如果不是，我将为每个必备软件制定特定的解决方案。

编辑：我的脚本找到的一些软件：

Microsoft 应用程序错误报告、Microsoft Visual C++ 2008 Redistributable、Microsoft 安全客户端、Adobe Reader

我想找到的：.NET 框架 3.5.1

我想要一个通用的解决方案来找到安装的每个软件。

解决方案：似乎没有通用的方法来检查已安装的软件。我在此路径中找到了 .NET 框架注册表项：

```
"SOFTWARE\Microsoft\MSBuild\ToolsVersion\v3.5\" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:22:49.567

如果无法访问您的服务器以查看您正在寻找的软件是如何安装的，我只能猜测您可能会如何修改您的脚本。

但是，除此之外，您可能还应该寻找其他地方：HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\

例如，您可能想查看：

```
HKLM\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall
HKLM\SOFTWARE\Classes\Installer
HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Installer\UserData 
```

您可能会在其中一个位置找到您正在寻找的东西。

您可能还想使用 RegEdit 对“.NET Framework 3.5.1”进行“查找”，以查看它是否显示在您可以可靠地找到它的地方。

# sql - 复制 SQL Azure 数据库的完成延迟？

> ID：11872292
> 
> 赞同：0
> 
> 时间：2012-08-08T20:03:30.860
> 
> 标签：sql, performance, azure, azure-sql-database

我想知道在 SQL Azure上完成[数据库副本](http://msdn.microsoft.com/en-us/library/windowsazure/ff951624.aspx)需要多少时间。我正在考虑一个场景：

1.  首先填充单个数据库，然后保持只读状态。
2.  创建了一组副本。
3.  一个*令人尴尬*的任务在每个副本上并行处理（只读）。
4.  副本被删除以降低托管成本。

如果 SQL Azure 上的数据库副本相当快，那么这种情况是有意义的。

有没有人有一些关于完成 SQL Azure 数据库副本的延迟的信息，可能没有数据库的 GB 大小（假设较小的数据库比大数据库更快地复制）？

附属问题：如果同时触发10个DB副本，完成第10个副本会需要10倍的时间吗？或者 SQL Azure 是否支持这种操作的某种程度的并行化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T05:19:59.423

对于复制各种大小的数据库需要多长时间，我没有经验数据，但根据我的经验，时间通常是几分钟。对于我经常使用的小于 100MB 的数据库，我允许 5 分钟，但这可能非常慷慨。我偶尔会复制更大的数据库，它似乎并没有比这大得多，我怀疑很多时间实际上都花在了配置新数据库而不是复制数据上。

我猜测如果您启动多个副本会发生什么，但是由于 SQL Azure 基础架构，如果同时启动多个副本会出现很大的减速，我会感到惊讶。

我不知道你希望整个过程需要多长时间，但我认为这基本上是一个好主意。不过，我强烈建议您进行一些自己的基准测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T06:55:26.333

我发现它特别慢。我刚刚复制了一个 3.45MB 的小型数据库，耗时超过 5 分钟。6点42分开始，6点49分结束。

这只是使用 SQL 命令行 create with copy。例如：

```
CREATE DATABASE NewDB AS COPY OF OldDB; 
```

我不确定交易是什么——每当我去检查进度时，它什么也没显示，然后突然就完成了。

例如：

```
SELECT * FROM sys.dm_database_copies c
JOIN sys.databases d ON c.database_id = d.database_id
WHERE databases.name = 'NewDB'; 
```

每次我查看的时候，percent_complete 列都是空的。其实我很担心我做错了什么...

# magento - 如何覆盖magento 1.7默认的Mage_Page codePool

> ID：11872293
> 
> 赞同：1
> 
> 时间：2012-08-08T20:03:31.180
> 
> 标签：magento, themes

在开始之前，我使用的是 Magento 1.7。

我正在尝试在默认包之外创建一个自定义主题，并且到目前为止一切正常。但我必须更改**app/etc/modules/Mage_All.xml**文件，以便我可以使用模块配置访问本地文件夹。

这是原始代码块：

```
<Mage_Page>
    <active>true</active>
    <codePool>core</codePool>
    <depends>
        <Mage_Core/>
    </depends>
</Mage_Page> 
```

这是我改变的行：

```
<codePool>core</codePool> 
```

但是，作为编程的好习惯，我们永远不应该编辑核心文件，所以我担心如果升级我的 magento，那个文件会被替换，所以主题会停止工作。

所以问题是如何覆盖这个设置。

我在 app/code/local/Local 中创建了一个模块“Local”，其中包含适当的 config.xml 和 system.xml 文件。

并在 app/etc/modules/Local.xml 中为模块本身创建了一个 xml 文件

```
<?xml version="1.0"?>
<config>
    <modules>
        <Local>
            <active>true</active>
            <codePool>local</codePool>
            <depends>
                <Mage_Page/>
            </depends>
        </Local>
    </modules>
</config> 
```

正如我所说，如果我改变 Mage_All 文件，它就像一个魅力......但我想知道是否有另一种方法可以调用本地代码文件夹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:45:42.583

首先，在其中创建一个文件`app/etc/modules/`名`Mage_Page.xml`

将以下内容放入其中：

```
<?xml version="1.0"?>
<config>
    <modules>
        <Mage_Page>
            <active>true</active>
            <codePool>local</codePool>
        </Mage_Page>
    </modules>
</config> 
```

现在，如果您希望覆盖整个 Mage_Page 模块，请复制整个 app/code/core/Mage/Page/ 内容并将其放在本地。如果您在本地已经有自定义模块，并且您说它可以正常工作，只需将其命名空间更改为`Mage`并将模块名称更改为`Page`.

# asp.net-mvc-3 - 带有 MVC3 ASP.NET 的 PayPal PayFlow

> ID：11872298
> 
> 赞同：1
> 
> 时间：2012-08-08T20:04:02.033
> 
> 标签：asp.net-mvc-3, payment-gateway, paypal, payflowpro

嗨，我正在使用这篇文章

[http://www.codeproject.com/Articles/152280/Online-Credit-Card-Transaction-in-ASP-NET-Using-Pa?msg=3753796#xx3753796xx](http://www.codeproject.com/Articles/152280/Online-Credit-Card-Transaction-in-ASP-NET-Using-Pa?msg=3753796#xx3753796xx)

了解 PayFlow 交易流程以及如何开发它。

在对示例进行了一些成功的测试后，我对如何为发布版本开发它有些疑问。

1.- 我打算使用 SDK 方法和 NVP 调用，就像在发布版本的示例中一样。但是，我不知道我是否应该使用更像安全证书或服务调用的东西（我尝试从 .Net Wizard 调用 wsdl 服务，但我找不到任何与 PayFlow Transactions 相关的服务）。

2.- 另外，在 PDF 中：

[https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_PayflowPro_Guide.pdf](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_PayflowPro_Guide.pdf)

有一些示例，例如第 29 页中的示例，说明：

```
//Typical Sale Transaction Parameter String
//The following is a typical PARMLIST string passed in a Sale transaction.

"TRXTYPE=S&TENDER=C&USER=SuperUser&PWD=SuperUserPassword&VENDOR=SuperUser&PA
RTNER=PayPal&ACCT=5105105105105100&EXPDATE=1209&CVV2=123&AMT=99.00&FIRSTNAM
E=John&LASTNAME=Smith&STREET=123 Main St.&CITY=San
Jose&STATE=CA&ZIP=12345&COMMENT1=Reservation&INVNUM=1234567890&PONUM=C12345
&CVV2=567&VERBOSITY=MEDIUM"

//Note that, besides the required parameters that you pass in a Sale transaction, this string
//includes other typical parameters. The COMMENT1 (and COMMENT2) fields help to track
//transaction information. The customer’s street address (STREET) and zip should be passed to 
//use address verification service. CVV2 is needed for card security code validation. 
```

在那个例子中我不明白为什么要使用 CCV2 参数两次。另外，我不知道 INVNUM 和 PONUM 参数是什么意思。此外，我知道如果我不通过 CCV2（安全代码）参数和地址参数，测试将成功，但这些不是强制性的吗？这让我有点困惑，因为对于 DirectPayment 服务，它们是。

3.-在PDF中，第99页有一个名为“提交采购卡2级和3级交易”的部分。在第100页，它说：

```
//Level 2 and Level 3 data is generally considered non-financial data. Lack of adequate data
//may cause a transaction to be downgraded.PayPal generally requires up to Level 2 information in 
//an Authorization transaction followed by additional Level 3 data in the associated
//Delayed Capture transaction. A Sale transaction should include all Level 3 data 
//since it is authorized and later settled. 
```

这是否意味着我“需要”使用比销售交易所需的参数更多的参数？否则，交易可能会被降级？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T02:31:07.130

1) PayPal 提供涵盖所有这些的[PayFlow 文档。](https://www.x.com/developers/paypal/development-and-integration-guides#wpp)您基本上需要将在 manager.paypal.com 上使用的相同登录凭据与您的 API 请求一起发送。

2）我认为他们两次包含CVV2参数只是一个错误。您只想包含一次。我之前链接的文档将涵盖所有请求参数的含义，但您可以使用 INVNUM 在 PayFlow/Paypal 系统中跟踪您自己的发票。PONUM 类似，但将是 PO 编号而不是发票编号。如果您需要在 PayPal 系统中找到它们，您可以在以后搜索这些值。

对于 PayFlow 和 Direct Payment，CVV2 和匹配账单地址的要求取决于您账户的欺诈过滤器设置。如果您已将其设置为需要它们，那么没有它您会收到错误消息。如果它设置为接受失败/不匹配，那么它会相应地这样做。

3）不，你不需要担心这个。

# c++ - 输出文件的字符串数组

> ID：11872302
> 
> 赞同：0
> 
> 时间：2012-08-08T20:04:05.103
> 
> 标签：c++, arrays, string, outputstream

我正在编写一个 C++ 代码，其中我动态创建了一个字符串数组。我编写了函数来输出字符串数组中的项目数以及数组本身。我想做的下一件事是将数组的元素存储在一个文本文件中，但是当我打开我写入的文件时，只显示数组的最后一个元素。这是我正在做的一个示例：

```
int num_elem = ReadNumElem(); // my function that gets the number of elements in the array of strings

string *MyStringArray = ReadNames(num_elem); // my function that reads a file and outputs the necessary strings into the array

for(int i = 0; i < num_elem < ++i) {
    ofstream ofs("C:\\Test\\MyStrings.txt")
    ofs << MyStringArray[i] << endl; // I also tried replacing endl with a "\n"
} 
```

我是 C++ 新手，所以如果这太简单了，我深表歉意，但我已经搜索了一段时间，似乎找不到解决方案。前两个函数不相关，我只需要知道如何将数据输出到文本文件中，以便显示所有数据，而不仅仅是数组中的最后一个元素。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T20:09:00.310

您每次都在数组中打开文件并覆盖其内容。

尝试：

```
ofstream ofs("C:\\Test\\MyStrings.txt");    
for(int i = 0; i < num_elem ; ++i) {

    ofs << MyStringArray[i] << endl; // I also tried replacing endl with a "\n"
}
ofs.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:07:37.377

您需要在循环之外声明文件

编辑

* * *

对不起，我不是想在一行中回答，但无论如何现在已经完成了。

# c# - 统一框架：找不到扩展方法

> ID：11872303
> 
> 赞同：0
> 
> 时间：2012-08-08T20:04:21.120
> 
> 标签：c#, unity-container

我正在尝试使用 container.LoadConfiguration，但在智能感知中看不到它。我需要安装或下载一些东西吗？

配置

```
<unity>
    <containers>
      <container>
        <types>
          <type type="IMyInterface, someAssembly"
            mapTo="MyObject, someAssembly" />

    </types>
  </container>
</containers> 
```

代码

```
using Microsoft.Practices.Unity;
using Microsoft.Practices.Unity.Configuration; 
using Microsoft.Practices.Unity.InterceptionExtension.Configuration; 
```

...

```
IUnityContainer _container = new UnityContainer();

UnityConfigurationSection section = (UnityConfigurationSection)System.
                         Configuration.ConfigurationManager.GetSection("unity");

section.Containers.Default.Configure(_container);
IEnumerable<IMyInterface> serviceList = _container.ResolveAll<IMyInterface>();
foreach (IMyInterface item in serviceList)
{
    Console.Write("tet");
} 
```

它不会进入循环。好像配置没问题。没有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:41:51.030

如果我正确理解您的问题，则 LoadConfiguration 不会出现在 Intellisense 中。

我会尝试两件事：

1.  首先确保您已包含 Microsoft.Practices.Unity.Configuration 程序集
2.  为 Microsoft.Practices.Unity.Configuration 添加 using 语句

LoadConfiguration 是在那里定义的扩展方法。

# ios - 如何平滑绘制图像的边缘？

> ID：11872308
> 
> 赞同：2
> 
> 时间：2012-08-08T20:04:42.543
> 
> 标签：ios, uiimage, core-graphics, cgcontext, cgimage

我正在使用此代码为 UIButton 子类的一些图像着色：

```
UIImage *img = [self imageForState:controlState];

// begin a new image context, to draw our colored image onto
UIGraphicsBeginImageContextWithOptions(img.size, NO, 0.0f);
// get a reference to that context we created
CGContextRef context = UIGraphicsGetCurrentContext();

// set the fill color
[self.buttonColor setFill];

CGContextSetAllowsAntialiasing(context, true);
CGContextSetShouldAntialias(context, true);

// translate/flip the graphics context (for transforming from CG* coords to UI* coords
CGContextTranslateCTM(context, 0, img.size.height);
CGContextScaleCTM(context, 1.0, -1.0);

// set the blend mode to multiply, and the original image
CGContextSetBlendMode(context, kCGBlendModeScreen);
CGRect rect = CGRectMake(0, 0, img.size.width, img.size.height);
CGContextDrawImage(context, rect, img.CGImage);

// set a mask that matches the shape of the image, then draw the colored image
CGContextClipToMask(context, rect, img.CGImage);
CGContextAddRect(context, rect);
CGContextDrawPath(context,kCGPathFill);

// generate a new UIImage from the graphics context we drew onto
UIImage *coloredImg = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

//return the colored image
[self setImage:coloredImg forState:controlState]; 
```

但是图像的边缘很粗糙。我尝试过使用屏幕、变亮和 plusLighter 混合模式，因为有些图像有我想保持白色的白色部分。我想要着色的唯一部分是黑色区域。我附上了原始按钮图像，并在它们被着色后。我不能让边缘看起来很好。当我将它们作为使用多重混合模式着色的白色图像时，它看起来好多了。但我想使用黑色，所以我可以使用一种方法来为有和没有白色的图像着色。我尝试了抗锯齿，这也没有帮助。看起来它只是没有抗锯齿。我与 Core Graphics 的合作还不够多，无法知道它是怎么回事。

**编辑** 这是原始PNG的样子： ![原始图像](../Images/1ddbf7d889112368af258a30557a7a5f.png)

它应该是这样的： ![应该看起来像](../Images/b585f85924c33fe88044f23c3bf19bbc.png)

这就是它的样子： ![看起来确实像](../Images/45d0ab854ecf07ef2b8189db2394e416.png)

尺寸不同，但您可以看到边缘质量差。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:54:31.353

也许您的原始图标（PNG？）只是“太尖锐”？你能给我们看看吗？您只需按原始大小绘制图像而不调整大小，因此问题可能从一开始就存在。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-08T20:52:46.487

我不确定您要在这里完成什么。您是否要使图像的边缘变圆？如果是这样，您最好更改 UIButton 图层的圆角属性。由于 UIButton 是 UIView 的子类，因此您可以获取其 layer 属性并更改边缘颜色和圆角。

# c# - 为 LuaInterface 构建 Lua 模块

> ID：11872309
> 
> 赞同：1
> 
> 时间：2012-08-08T20:04:45.680
> 
> 标签：c#, c++, linker, lua, luainterface

我有一个需要加载到 LuaInterface的 Lua 模块 ( [lpack )。](https://github.com/LuaDist/lpack)我已经为该项目尝试了几种不同的配置，但我似乎无法弄清楚链接。

我得到错误`unresolved external symbol "void __stdcall lua_replace(struct lua_State *,int)" (?lua_replace@@YGXPAUlua_State@@H@Z) referenced in function "int __stdcall l_unpack(struct lua_State *)" (?l_unpack@@YGHPAUlua_State@@@Z)`

如果我`dumpbin /exports`在 lua51.lib 文件上运行，我可以找到`?lua_replace@@YAXPAUlua_State@@H@Z`与我在 lua51.dll 中找到的 Dependency Walker 匹配的内容`?lua_replace@@YAXPAUlua_State@@H@Z`，因此该函数存在但名称不匹配。

我对这种级别的链接器管理不是很熟悉，所以这可能是我的一个简单错误。为什么 lpack 构建中的值与 lua51.lib 输入文件的值不匹配？

**更新**

lua51.dll 和 lua51.lib 文件中的所有导出都是`__cdecl`，我的 lpack 项目已设置为`__stdcall`. 更改该属性（在 C/C++ -> 高级 -> 调用约定下）修复了编译问题，我现在有了一个 lpack.dll 文件。

但是，当我尝试从 lua 加载文件时，`require('lpack')`它失败了`The specified procedure could not be found.`

中断使用 LoadLibraryA 加载库的 lua C 代码返回 NULL 和 0x7F 的 GetLastError() 代码。

**更新 2**

由于输出目录错误，我尝试加载的 lpack.dll 文件已过期，因此修复了 LoadLibrary 故障。接下来 GetProcAddress 会失败，但如果我`extern "C"`按照 Mud 的建议在 lpack.c 文件中添加导出功能，问题就解决了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:41:19.103

> 但是，当我尝试从 lua require('lpack') 加载文件时，它会失败并显示找不到指定的过程。

可能是因为名字被[弄坏](http://en.wikipedia.org/wiki/Name_mangling)了。您是否查看了 DLL 以查看函数的实际（损坏的）名称？

你真的应该将 Lua 源代码（以及任何用 C 编写的 Lua 模块）构建为 C，并`extern "C"`在导入它们时使用。省去很多麻烦。

# c# - 将 BigIntegers 相除以返回双精度

> ID：11872311
> 
> 赞同：8
> 
> 时间：2012-08-08T20:04:51.687
> 
> 标签：c#, .net, biginteger, division

我想计算一条线的斜率。

```
public sealed class Point
{
    public System.Numerics.BigInteger x = 0;
    public System.Numerics.BigInteger y = 0;

    public double CalculateSlope (Point point)
    {
        return ((point.Y - this.Y) / (point.X - this.X));
    }
} 
```

我知道 BigInteger 有一个 DivRem 函数，它返回除法结果加上余数，但不知道如何应用它来获得双精度。我正在处理的数字**远远**超出 Int64.MaxValue 的范围，因此余数本身可能超出常规除法计算的范围。

**编辑**：不确定它是否有帮助，但我只处理正整数（> = 1）。

**重要提示**：我只需要几个小数点的精度（5 应该足以满足我的目的）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T21:00:18.047

从 Codeplex获取[BigRational 。](http://bcl.codeplex.com/wikipage?title=BigRational&referringTitle=Home)它是 Microsoft 的[Base Class Library](http://bcl.codeplex.com/)的一部分，因此它是 .Net 的一个进行中的工作。一旦你有了它，然后做类似的事情：

```
System.Numerics.BigInteger x = GetDividend() ;
System.Numerics.BigInteger y = GetDivisor() ;

BigRational r     = new BigRational( x , y ) ;
double      value = (double) r ; 
```

处理不可避免的上溢/下溢/精度损失当然是另一个问题。

由于您不能将 BigRational 库放入您的代码中，显然，另一种方法是拿出[正确的算法书](https://rads.stackoverflow.com/amzn/click/com/0201896842)并推出自己的...

当然，在这里“滚动自己”的简单方法是，因为有理数表示为两个整数的比率（除法），所以从 BigRational 类中获取到双运算符的显式转换并对其进行调整以适应。我花了大约15分钟。

关于我所做的唯一重大修改是当结果为正或负零/无穷大时如何设置结果的符号。当我使用它时，我将它转换`BigInteger`为您的扩展方法：

```
public static class BigIntExtensions
{

  public static double DivideAndReturnDouble( this BigInteger x , BigInteger y )
  {
    // The Double value type represents a double-precision 64-bit number with
    // values ranging from -1.79769313486232e308 to +1.79769313486232e308
    // values that do not fit into this range are returned as +/-Infinity
    if (SafeCastToDouble(x) && SafeCastToDouble(y))
    {
      return (Double) x / (Double)  y;
    }

    // kick it old-school and figure out the sign of the result
    bool isNegativeResult = ( ( x.Sign < 0 && y.Sign > 0 ) || ( x.Sign > 0 && y.Sign < 0 ) ) ;

    // scale the numerator to preseve the fraction part through the integer division
    BigInteger denormalized = (x * s_bnDoublePrecision) / y ;
    if ( denormalized.IsZero )
    {
      return isNegativeResult ? BitConverter.Int64BitsToDouble(unchecked((long)0x8000000000000000)) : 0d; // underflow to -+0
    }

    Double result   = 0              ;
    bool   isDouble = false          ;
    int    scale    = DoubleMaxScale ;

    while ( scale > 0 )
    {
      if (!isDouble)
      {
        if ( SafeCastToDouble(denormalized) )
        {
          result = (Double) denormalized;
          isDouble = true;
        }
        else
        {
          denormalized = denormalized / 10 ;
        }
      }
      result = result / 10 ;
      scale-- ;
    }

    if (!isDouble)
    {
      return isNegativeResult ? Double.NegativeInfinity : Double.PositiveInfinity;
    }
    else
    {
      return result;
    }

  }

  private const           int        DoubleMaxScale      = 308 ;
  private static readonly BigInteger s_bnDoublePrecision = BigInteger.Pow( 10 , DoubleMaxScale ) ;
  private static readonly BigInteger s_bnDoubleMaxValue  = (BigInteger) Double.MaxValue;
  private static readonly BigInteger s_bnDoubleMinValue  = (BigInteger) Double.MinValue;

  private static bool SafeCastToDouble(BigInteger value)
  {
    return s_bnDoubleMinValue <= value && value <= s_bnDoubleMaxValue;
  }

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T20:38:09.323

BigRational库有一个转换[运算](http://bcl.codeplex.com/wikipage?title=BigRational&referringTitle=Home)符来加倍。

另外，请记住返回无穷大作为垂直线的特殊情况，您将在当前代码中获得除以零的异常。可能最好先计算 X1 - X2，如果为零则返回无穷大，然后进行除法，以避免冗余操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T20:28:40.913

这不涉及负面，但希望能给你一个开始。

```
 double doubleMax = double.MaxValue;
        BigInteger numerator = 120;
        BigInteger denominator = 50;        
        if (denominator != 0)
        {
            Debug.WriteLine(numerator / denominator);
            Debug.WriteLine(numerator % denominator);
            BigInteger ansI = numerator / denominator;
            if (ansI < (int)doubleMax)
            {
                double slope = (double)ansI + ((double)(numerator % denominator) / (double)denominator); ;
                Debug.WriteLine(slope);
            }
        } 
```

# php - PHP json_decode 返回 null

> ID：11872312
> 
> 赞同：2
> 
> 时间：2012-08-08T20:04:52.127
> 
> 标签：php, json

我正在编写使用数据库的 PHP 代码。为此，我使用一个数组作为哈希映射。每次从我的数据库中添加或删除内容时，我都会将其保存到文件中。

我的数据库结构迫使我使用这种方法，不能使用 mysql 或任何其他标准数据库（学校项目，所以结构保持原样）。

我构建了两个功能：

```
function saveDB($db){
    $json_db = json_encode($db);
    file_put_contents("wordsDB.json", $json_db);
} // saveDB

function loadDB(){
    $json_db = file_get_contents("wordsDB.json");
    return json_decode($json_db, true);
} // loadDB 
```

当回显编码后或从文件加载后得到的字符串时，我得到一个有效的 json（在 json 查看器上测试）每当我尝试使用解码字符串`json_decode()`时，我得到 null（用 测试它`var_dump()`）。

json 字符串本身很长（约 200,000 个字符，仅用于测试）。

我尝试了以下方法：

*   手动和使用`str_replace()`.
*   在 json 字符串前后添加引号。
*   更改页面的编码。
*   解码而不保存到文件（编码后立即）。
*   检查斜杠和反斜杠。一个都找不到。
*   试过了`addslashes()`。
*   尝试使用各种“转义字符串”变体。

`json_last_error()`不起作用。我没有收到错误号（获取 null，而不是 0）。

这不是我的服务器，所以我不确定使用的是什么 PHP 版本，也无法升级/降级/安装任何东西。

我相信大小与它有关，因为小字符串似乎工作正常。

谢谢大家 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T20:10:14.927

检查您的文件是否是 UTF8 编码的。`json_decode`仅适用于 UTF8 编码的数据。

编辑：看到上传的 JSON 数据后，我进行了一些挖掘，发现有 'null' 键。搜索：

*“超出”：{“S01E01.html”：{“2217”：1}}，**空**：{“S01E01.html”：*

将该**null**更改为有效的属性名称，`json_decode`并将完成这项工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T16:30:29.910

在您的 JSON 文件中将 null 更改为“null”，它将解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T20:15:35.940

上周我遇到了类似的问题。根据 jsonlint.com，我的 json 是有效的。

我的 json 字符串包含一个 # 和一个 &，这两个使 json_decode 失败并返回 null。

通过使用 var_dump(json_decode($myvar)) 在失败的地方停止，我设法找出问题出在哪里。

我建议 var_dumping 并使用 find 函数来寻找这些字符之王。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-09T10:10:43.593

只是在偶然的机会.. 对于任何点击这个线程而不是 OP 问题的人来说更多......我错过了以下内容，有人在调用堆栈中的**htmlentities($json)**方式高于我。只要确保你没有被同样的咬伤并检查 html 源代码。

踢自己 #124

# svn - 詹金斯的 SVN“不受版本控制”失败

> ID：11872313
> 
> 赞同：8
> 
> 时间：2012-08-08T20:04:59.987
> 
> 标签：svn, hudson, jenkins

我在 Jenkins 有一个项目，其中有许多 SVN 存储库可供提取。每当我构建时，工作区清理后的第一次构建都会失败，并出现如下错误。无需更改任何内容，下一次构建将成功。

如果我将项目设置为始终在构建之前清理工作区，它总是会失败。每次使用不同的 SVN 存储库。

我尝试迁移到 SVN 1.6，尝试验证 HTTPS 证书是否正常，不知道还要寻找什么？

```
ERROR: Failed to parse svn info for     https://subversion.assembla.com/svn/<PROJECT NAME HIDDEN>/trunk
org.tmatesoft.svn.core.SVNException: svn:     '/tmp/data/hudson/jobs/Build_ISO/workspace/ch.ethz.ssh2' is not under version control
    at org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java:64)
    at org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java:51)
    at org.tmatesoft.svn.core.wc.SVNWCClient$13.handleError(SVNWCClient.java:3314)
    at org.tmatesoft.svn.core.internal.wc.admin.SVNWCAccess.walkEntries(SVNWCAccess.java:758)
    at org.tmatesoft.svn.core.internal.wc.admin.SVNWCAccess.walkEntries(SVNWCAccess.java:741)
at org.tmatesoft.svn.core.wc.SVNWCClient.crawlEntries(SVNWCClient.java:3294)
at org.tmatesoft.svn.core.wc.SVNWCClient.doInfo(SVNWCClient.java:2498)
at org.tmatesoft.svn.core.wc.SVNWCClient.doInfo(SVNWCClient.java:2865)
at hudson.scm.SubversionSCM$BuildRevisionMapTask.invoke(SubversionSCM.java:1023)
at hudson.scm.SubversionSCM$BuildRevisionMapTask.invoke(SubversionSCM.java:1001)
at hudson.FilePath.act(FilePath.java:832)
at hudson.FilePath.act(FilePath.java:814)
at hudson.scm.SubversionSCM.checkout(SubversionSCM.java:685)
at hudson.model.AbstractProject.checkout(AbstractProject.java:1212)
at hudson.model.AbstractBuild$AbstractRunner.checkout(AbstractBuild.java:579)
at hudson.model.AbstractBuild$AbstractRunner.run(AbstractBuild.java:468)
at hudson.model.Run.run(Run.java:1410)
at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
at hudson.model.ResourceController.execute(ResourceController.java:88)
at hudson.model.Executor.run(Executor.java:238)
Caused by: org.tmatesoft.svn.core.SVNErrorMessage: svn: '/tmp/data/hudson/jobs/Build_ISO/workspace/ch.ethz.ssh2' is not under version control
at org.tmatesoft.svn.core.SVNErrorMessage.create(SVNErrorMessage.java:163)
at org.tmatesoft.svn.core.SVNErrorMessage.create(SVNErrorMessage.java:118)
... 17 more 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-26T09:33:31.770

我知道该线程很旧并且几乎已过时，但这并没有阻止像我这样的人登陆这里寻找解决这个流行的詹金斯问题的方法。因此，既然现在我的问题已解决，我将发布答案以供将来使用：-

最初的搜索给出的问题是由于某些版本的 SVN 插件中的错误，所以明显的解决方案是更改该插件，@ChrisH 给出的链接中也指出了这一点。他的链接很有帮助。因此，您可以使用以下两种方式更新 svn 插件：-

1.  去管理插件并从那里安装更新。
2.  [从此链接](https://updates.jenkins-ci.org/download/plugins/subversion)下载 *.hpi 文件并将 *.hpi 文件放在 $JENKINS_HOME/plugins/ 文件夹中。如果您不知道 $JENKINS_HOME 文件夹在哪里，那么它很可能是您主目录中的隐藏文件夹（对于 linux）。

更新插件后，您需要**重新启动**jenkins 以使新插件生效。

但是，如果您最近下载了 jenkins，您可能不需要遵循上述过程。只需转到**管理 Jenkins-> 配置系统**并从组合框中更改 SVN 版本（到 1.6）。

玩得开心，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T06:42:57.987

如果您的存储库中有任何 svn:externals 链接，您可能会遇到以下问题之一：

*   [詹金斯-3673](https://issues.jenkins-ci.org/browse/JENKINS-3673)
*   [詹金斯-11806](https://issues.jenkins-ci.org/browse/JENKINS-11806)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-11T12:23:29.387

当我使用模块名称检查第一个存储库和使用“。”（无模块名称）检查第二个存储库时，我遇到了类似的问题。第二个结帐覆盖了第一个结帐。

对我有用的解决方案是：首先检查非模块名称存储库（只能是一个），然后检查非模块名称存储库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T20:39:54.533

如果我正确理解您的设置，您有多个 SVN URL，并且您希望将这些 URL 签出到您的 jenkins 项目工作区中的一组文件夹中。像我在这里的东西： ![在此处输入图像描述](../Images/3a520ca1255c86c1babb280aba36cb9f.png)

如果您不定义本地模块目录，那么工作区就是那样。而且我认为如果您的结帐包含重叠的目录，您可能会遇到问题。因此，始终使用模块目录设置在一个项目中单独签出。然后你需要调整你的构建以适应它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-20T23:46:23.503

这个问题在2020年再次出现！尝试了上述所有解决方案，但没有任何帮助。我不得不停止 Jenkins 服务并删除有问题的 svn 外部文件夹并重新启动。这成功了。原因是我已升级 Jenkins 以开始使用更新的数据格式。这导致许多作业因 ERROR: Failed to parse svn info for external .... at .. org.tmatesoft.svn.core.SVNException: svn: E200005: 'C:\Jenkins\jobs...'而失败不受版本控制

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-07T22:50:53.320

这是另一种可能性：*svn:externals*属性中的 URL 不一致。我刚刚在我当前的项目中发现了这一点：**.** （顶部）所有引用**的 testmachine-01**但目录**服务器**上的外部引用**testmachine-01.companydomain.com**并且这在我的开发机器上以一种方式解决，而在构建服务器上以另一种方式解决。

# algorithm - 我应该使用什么算法来解决停止邮递员的练习？

> ID：11872315
> 
> 赞同：-3
> 
> 时间：2012-08-08T20:05:07.403
> 
> 标签：algorithm

我正在尝试解决停止邮递员问题，但我找不到任何算法来解决它。问题是这样的：

> 有 n 个房子，编号从 1 到 n，还有 n 个邮递员，每个房子都有 n 封信要寄到每个房子里。邮递员决定了一个计划，即每个邮递员在不同的时间准确地访问每个房子一次，即任何房子在任何时候最多有一个邮递员。由于没有任何邮递员像其他任何邮递员一样，因此邮递员希望在将邮件投递到 n 个房子的过程中，没有邮递员会遇到任何其他邮递员。因此，他希望邮递员在特定房屋之后停止邮寄。也就是说，邮递员想要找到一个序列**站**，这样第**i 位**邮递员一旦访问了那个房子，就会在**第 stop[i] 个**房子之后停止发帖。由于他想确保每个房子最多有一个职位，他必须选择序列**停止**这样，如果邮递员 A 在时间 T 访问房子 H，并且他在房子之后停止投递，那么在时间 T 之后没有其他邮递员访问房子 H。帮助邮递员找到这样的序列**stop**。

输入如下：

首先**n**（1≤n≤100 **）**，表示邮递员和房屋的数量。然后是**n**行，每行包含**n 个**正整数。第**i行中****的第 j 个**整数表示第**i 个**邮递员访问第**j 个**房子的时间。

 ******示例：n = 3

顺序是：

> 1 2 3
> 
> 4 5 6
> 
> 7 8 9

输出的**停止**数组应该是：

`3 2 1`，即第 1 邮递员在第 3 宫、第 2 在第 2 宫和第 3 在第 1 宫停止投递。

我应该使用什么算法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:58:08.157

更新，我的最后一个答案是错误的。

新解决方案：在每一步中找到每行中的最小值，然后取其中的最大值，这将是第 i 个邮递员的停止点。在接下来的每一步中，不再考虑那个邮递员

对于您提供的样本：

```
1 2 3 
4 5 6 
7 8 9 
```

第一步，我们找到 1 4 7，其中最大为 7，所以第三个邮递员停在 1st house(stop[3] = 1) 之后我们不考虑第一列和第三行 第二步我们找到 2 和 5 , 最大值为 5 所以 - stop[2] = 2; 第三步停止[1] = 3;

那么，为什么这是真的，如果我们在某个步骤中选择了正确的数字，我们知道对于同一列中的任何数字，它要么小于我们的数字（这意味着它以后不会引起问题）要么大于我们的数字，但是该行的数字小于它稍后将被选中，这样我们列中的较大数字就不会被使用

对于@Wayne Rooney 提供的示例

```
1 4 2
8 6 9
5 7 3 
```

第一步 找到 1, 6, 3, 选择 6 第二步 找到 1, 3 选择 3 第三步 1 答案：1, 2, 3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T21:26:10.490

@Herokiller 你的算法不正确。例如：

1 4 2

8 6 9

5 7 3

您的输出将是：

Step1：取元组 (8,7,3) min 其中 7 然后取 (8,9) 所以 min 是 8 最后 (2) 所以输出是 3,1,2

但答案将是 1 2 3 即（1,6,3）

即使我不知道这个问题的答案，但我有一个矛盾的测试用例，我无法评论你的消息，因为它被标记为正确答案******

# java - Tomcat Guice/JDBC 内存泄漏

> ID：11872316
> 
> 赞同：50
> 
> 时间：2012-08-08T20:05:12.843
> 
> 标签：java, tomcat

由于 Tomcat 中的孤立线程，我遇到了内存泄漏。特别是，Guice 和 JDBC 驱动程序似乎没有关闭线程。

```
Aug 8, 2012 4:09:19 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: A web application appears to have started a thread named [com.google.inject.internal.util.$Finalizer] but has failed to stop it. This is very likely to create a memory leak.
Aug 8, 2012 4:09:19 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: A web application appears to have started a thread named [Abandoned connection cleanup thread] but has failed to stop it. This is very likely to create a memory leak. 
```

我知道这与其他问题（例如[this one](https://stackoverflow.com/questions/6025089/guice-tomcat-potential-memory-leak)）类似，但就我而言，“别担心”的答案是不够的，因为它给我带来了问题。我有定期更新此应用程序的 CI 服务器，并且在 6-10 次重新加载后，CI 服务器将挂起，因为 Tomcat 内存不足。

我需要能够清除这些孤立的线程，这样我才能更可靠地运行我的 CI 服务器。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-05-09T17:33:58.127

我只是自己处理了这个问题。与其他一些答案相反，我不建议发出`t.stop()`命令。此方法已被弃用，并且有充分的理由。参考[Oracle](http://docs.oracle.com/javase/1.4.2/docs/guide/misc/threadPrimitiveDeprecation.html)这样做的原因。

但是，有一种解决方案可以消除此错误，而无需求助于`t.stop()`...

您可以使用@Oso 提供的大部分代码，只需替换以下部分

```
Set<Thread> threadSet = Thread.getAllStackTraces().keySet();
Thread[] threadArray = threadSet.toArray(new Thread[threadSet.size()]);
for(Thread t:threadArray) {
    if(t.getName().contains("Abandoned connection cleanup thread")) {
        synchronized(t) {
            t.stop(); //don't complain, it works
        }
    }
} 
```

使用 MySQL 驱动程序提供的以下方法替换它：

```
try {
    AbandonedConnectionCleanupThread.shutdown();
} catch (InterruptedException e) {
    logger.warn("SEVERE problem cleaning up: " + e.getMessage());
    e.printStackTrace();
} 
```

这应该正确关闭线程，并且错误应该消失。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-16T05:16:35.080

我也遇到过同样的问题，正如 Jeff 所说，“不要担心它的方法”不是要走的路。

我做了一个 ServletContextListener，它在关闭上下文时停止挂起的线程，然后在 web.xml 文件上注册了这样的 ContextListener。

我已经知道停止线程并不是处理它们的优雅方式，否则服务器会在两次或三次部署后继续崩溃（并不总是可以重新启动应用程序服务器）。

我创建的课程是：

```
public class ContextFinalizer implements ServletContextListener {

    private static final Logger LOGGER = LoggerFactory.getLogger(ContextFinalizer.class);

    @Override
    public void contextInitialized(ServletContextEvent sce) {
    }

    @Override
    public void contextDestroyed(ServletContextEvent sce) {
        Enumeration<Driver> drivers = DriverManager.getDrivers();
        Driver d = null;
        while(drivers.hasMoreElements()) {
            try {
                d = drivers.nextElement();
                DriverManager.deregisterDriver(d);
                LOGGER.warn(String.format("Driver %s deregistered", d));
            } catch (SQLException ex) {
                LOGGER.warn(String.format("Error deregistering driver %s", d), ex);
            }
        }
        Set<Thread> threadSet = Thread.getAllStackTraces().keySet();
        Thread[] threadArray = threadSet.toArray(new Thread[threadSet.size()]);
        for(Thread t:threadArray) {
            if(t.getName().contains("Abandoned connection cleanup thread")) {
                synchronized(t) {
                    t.stop(); //don't complain, it works
                }
            }
        }
    }

} 
```

创建类后，然后在 web.xml 文件中注册它：

```
<web-app...
    <listener>
        <listener-class>path.to.ContextFinalizer</listener-class>
    </listener>
</web-app> 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-09-26T12:09:41.950

侵入性最小的解决方法是从 webapp 的类加载器之外的代码强制初始化 MySQL JDBC 驱动程序。

在 tomcat/conf/server.xml 中，修改（在 Server 元素内）：

```
<Listener className="org.apache.catalina.core.JreMemoryLeakPreventionListener" /> 
```

至

```
<Listener className="org.apache.catalina.core.JreMemoryLeakPreventionListener"
          classesToInitialize="com.mysql.jdbc.NonRegisteringDriver" /> 
```

*   *使用 mysql-connector-java-8.0.x`com.mysql.cj.jdbc.NonRegisteringDriver`代替*

这假设您将 MySQL JDBC 驱动程序放入 tomcat 的 lib 目录而不是 webapp.war 的 WEB-INF/lib 目录中，因为重点是在您的 webapp*之前*加载驱动程序并且独立于您的 webapp。

参考：

*   [http://bugs.mysql.com/bug.php?id=68556#c400606](http://bugs.mysql.com/bug.php?id=68556#c400606)

*   [http://tomcat.apache.org/tomcat-7.0-doc/config/listeners.html#JRE_Memory_Leak_Prevention_Listener_-_org.apache.catalina.core.JreMemoryLeakPreventionListener](http://tomcat.apache.org/tomcat-7.0-doc/config/listeners.html#JRE_Memory_Leak_Prevention_Listener_-_org.apache.catalina.core.JreMemoryLeakPreventionListener)

*   [http://markmail.org/message/dmvlkps7lbgpngil](http://markmail.org/message/dmvlkps7lbgpngil)

*   [com.mysql.jdbc.NonRegisteringDriver](https://github.com/mysql/mysql-connector-j/blob/release/5.1/src/com/mysql/jdbc/NonRegisteringDriver.java)源码 v5.1

*   [com.mysql.cj.jdbc.NonRegisteringDriver](https://github.com/mysql/mysql-connector-j/blob/release/8.0/src/main/user-impl/java/com/mysql/cj/jdbc/NonRegisteringDriver.java)源码v8.0
*   [连接器/J v8.0 的变化](https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-api-changes.html)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-07-27T00:06:08.123

从 MySQL 连接器 5.1.23 开始，提供了一种方法来关闭废弃的连接清理线程，`AbandonedConnectionCleanupThread.shutdown`.

但是，我们不希望我们的代码直接依赖于其他不透明的 JDBC 驱动程序代码，所以我的解决方案是使用反射来查找类和方法并在找到时调用它。以下完整的代码片段是所有需要的，在加载 JDBC 驱动程序的类加载器的上下文中执行：

```
try {
    Class<?> cls=Class.forName("com.mysql.jdbc.AbandonedConnectionCleanupThread");
    Method   mth=(cls==null ? null : cls.getMethod("shutdown"));
    if(mth!=null) { mth.invoke(null); }
    }
catch (Throwable thr) {
    thr.printStackTrace();
    } 
```

如果 JDBC 驱动程序是 MySQL 连接器的最新版本，这将干净地结束线程，否则什么也不做。

注意它必须在类加载器的上下文中执行，因为线程是静态引用；如果在运行此代码时未卸载或尚未卸载驱动程序类，则线程将不会运行以进行后续 JDBC 交互。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-01-06T22:27:48.547

我从上面的答案中提取了最好的部分，并将它们组合成一个易于扩展的类。这结合了 Oso 的原始建议与 Bill 的驱动程序改进和 Software Monkey 的反射改进。（我也喜欢 Stephan L 的简单回答，但有时修改 Tomcat 环境本身并不是一个好的选择，尤其是当您必须处理自动缩放或迁移到另一个 Web 容器时。）

我没有直接引用类名、线程名和停止方法，而是将它们封装到一个私有的内部 ThreadInfo 类中。使用这些 ThreadInfo 对象的列表，您可以使用相同的代码包含要关闭的其他麻烦线程。这比大多数人可能需要的解决方案要复杂一些，但在您需要时应该更普遍地工作。

```
import java.lang.reflect.Method;
import java.sql.Driver;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.util.Arrays;
import java.util.Enumeration;
import java.util.List;
import java.util.Set;

import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

/**
 * Context finalization to close threads (MySQL memory leak prevention).
 * This solution combines the best techniques described in the linked Stack
 * Overflow answer.
 * @see <a href="https://stackoverflow.com/questions/11872316/tomcat-guice-jdbc-memory-leak">Tomcat Guice/JDBC Memory Leak</a>
 */
public class ContextFinalizer
    implements ServletContextListener {

    private static final Logger LOGGER =
        LoggerFactory.getLogger(ContextFinalizer.class);

    /**
     * Information for cleaning up a thread.
     */
    private class ThreadInfo {

        /**
         * Name of the thread's initiating class.
         */
        private final String name;

        /**
         * Cue identifying the thread.
         */
        private final String cue;

        /**
         * Name of the method to stop the thread.
         */
        private final String stop;

        /**
         * Basic constructor.
         * @param n Name of the thread's initiating class.
         * @param c Cue identifying the thread.
         * @param s Name of the method to stop the thread.
         */
        ThreadInfo(final String n, final String c, final String s) {
            this.name = n;
            this.cue  = c;
            this.stop = s;
        }

        /**
         * @return the name
         */
        public String getName() {
            return this.name;
        }

        /**
         * @return the cue
         */
        public String getCue() {
            return this.cue;
        }

        /**
         * @return the stop
         */
        public String getStop() {
            return this.stop;
        }
    }

    /**
     * List of information on threads required to stop.  This list may be
     * expanded as necessary.
     */
    private List<ThreadInfo> threads = Arrays.asList(
        // Special cleanup for MySQL JDBC Connector.
        new ThreadInfo(
            "com.mysql.jdbc.AbandonedConnectionCleanupThread", //$NON-NLS-1$
            "Abandoned connection cleanup thread", //$NON-NLS-1$
            "shutdown" //$NON-NLS-1$
        )
    );

    @Override
    public void contextInitialized(final ServletContextEvent sce) {
        // No-op.
    }

    @Override
    public final void contextDestroyed(final ServletContextEvent sce) {

        // Deregister all drivers.
        Enumeration<Driver> drivers = DriverManager.getDrivers();
        while (drivers.hasMoreElements()) {
            Driver d = drivers.nextElement();
            try {
                DriverManager.deregisterDriver(d);
                LOGGER.info(
                    String.format(
                        "Driver %s deregistered", //$NON-NLS-1$
                        d
                    )
                );
            } catch (SQLException e) {
                LOGGER.warn(
                    String.format(
                        "Failed to deregister driver %s", //$NON-NLS-1$
                        d
                    ),
                    e
                );
            }
        }

        // Handle remaining threads.
        Set<Thread> threadSet = Thread.getAllStackTraces().keySet();
        Thread[] threadArray = threadSet.toArray(new Thread[threadSet.size()]);
        for (Thread t:threadArray) {
            for (ThreadInfo i:this.threads) {
                if (t.getName().contains(i.getCue())) {
                    synchronized (t) {
                        try {
                            Class<?> cls = Class.forName(i.getName());
                            if (cls != null) {
                                Method mth = cls.getMethod(i.getStop());
                                if (mth != null) {
                                    mth.invoke(null);
                                    LOGGER.info(
                                        String.format(
            "Connection cleanup thread %s shutdown successfully.", //$NON-NLS-1$
                                            i.getName()
                                        )
                                    );
                                }
                            }
                        } catch (Throwable thr) {
                            LOGGER.warn(
                                    String.format(
            "Failed to shutdown connection cleanup thread %s: ", //$NON-NLS-1$
                                        i.getName(),
                                        thr.getMessage()
                                    )
                                );
                            thr.printStackTrace();
                        }
                    }
                }
            }
        }
    }

} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-13T15:31:56.433

我从 Oso 更进一步，在两点改进了上面的代码：

1.  将 Finalizer 线程添加到需要杀死检查：

    ```
    for(Thread t:threadArray) {
            if(t.getName().contains("Abandoned connection cleanup thread") 
                ||  t.getName().matches("com\\.google.*Finalizer")
                ) {
            synchronized(t) {
                logger.warn("Forcibly stopping thread to avoid memory leak: " + t.getName());
                t.stop(); //don't complain, it works
            }
        }
    } 
    ```

2.  睡一会儿，让线程有时间停止。没有那个，tomcat一直在抱怨。

    ```
    try {
        Thread.sleep(1000);
    } catch (InterruptedException e) {
        logger.debug(e.getMessage(), e);
    } 
    ```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-06-28T22:34:51.120

Bill 的解决方案看起来不错，但是我直接在 MySQL 错误报告中找到了另一个解决方案：

> [2013 年 6 月 5 日 17:12] Christopher Schultz 在其他情况发生变化之前，这是一个更好的解决方法。
> 
> 启用 Tomcat 的 JreMemoryLeakPreventionListener（在 Tomcat 7 上默认启用），并将此属性添加到元素：
> 
> **classesToInitialize="com.mysql.jdbc.NonRegisteringDriver"**
> 
> 如果“classesToInitialize”已在您的 上设置，只需将 NonRegisteringDriver 添加到以逗号分隔的现有值。

和答案：

> [2013 年 6 月 8 日 21:33] Marko Asplund 我使用 JreMemoryLeakPreventionListener / classesToInitialize 解决方法（Tomcat 7.0.39 + MySQL Connector/J 5.1.25）做了一些测试。
> 
> 在应用解决方法之前，在多次重新部署 web 应用程序后，线程转储列出了多个 AbandonedConnectionCleanupThread 实例。应用解决方法后，只有一个 AbandonedConnectionCleanupThread 实例。
> 
> **不过，我不得不修改我的应用程序，并将 MySQL 驱动程序从 webapp 移动到 Tomcat lib。** 否则，类加载器无法在 Tomcat 启动时加载 com.mysql.jdbc.NonRegisteringDriver。

我希望它对所有仍在与这个问题作斗争的人有所帮助......

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-05-23T09:18:51.340

看来这已在**5.1.41**中修复。您可以将 Connector/J 升级到 5.1.41 或更高版本。 [https://dev.mysql.com/doc/relnotes/connector-j/5.1/en/news-5-1-41.html](https://dev.mysql.com/doc/relnotes/connector-j/5.1/en/news-5-1-41.html)

> AbandonedConnectionCleanupThread 的实现现在得到了改进，因此开发人员现在有四种方式来处理这种情况：
> 
> *   当使用默认的 Tomcat 配置并将 Connector/J jar 放入本地库目录时，Connector/J 中新的内置应用程序检测器现在可以在 5 秒内检测到 Web 应用程序的停止并杀死 AbandonedConnectionCleanupThread。也避免了关于线程不可停止的任何不必要的警告。如果将 Connector/J jar 放入全局库目录，则线程将一直运行，直到 JVM 被卸载。
>     
>     
> *   当 Tomcat 的上下文使用属性 clearReferencesStopThreads="true" 配置时，Tomcat 将在应用程序停止时停止所有派生的线程，除非 Connector/J 与其他 Web 应用程序共享，在这种情况下，Connector/J 现在可以防止不适当的停在Tomcat；关于不可停止线程的警告仍会在 Tomcat 的错误日志中发出。
>     
>     
> *   当在上下文销毁时调用 AbandonedConnectionCleanupThread.checkedShutdown() 的每个 Web 应用程序中实现 ServletContextListener 时，如果驱动程序可能与其他应用程序共享，Connector/J 现在再次跳过此操作。在这种情况下，不会向 Tomcat 的错误日志发出有关线程不可停止的警告。
>     
>     
> *   当调用 AbandonedConnectionCleanupThread.uncheckedShutdown() 时，即使 Connector/J 与其他应用程序共享，AbandonedConnectionCleanupThread 也会关闭。但是，之后可能无法重新启动线程。

如果您查看源代码，他们在线程上调用了 setDeamon(true)，因此它不会阻止关闭。

```
Thread t = new Thread(r, "Abandoned connection cleanup thread");
t.setDaemon(true); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-04-27T17:43:12.477

请参阅[为防止内存泄漏，已强制取消注册 JDBC 驱动程序](https://stackoverflow.com/questions/3320400/to-prevent-a-memory-leak-the-jdbc-driver-has-been-forcibly-unregistered/23912257#23912257)。Bill 的回答取消了所有 Driver 实例以及可能属于其他 Web 应用程序的实例的注册。我通过检查 Driver 实例是否属于 right 扩展了 Bill 的答案`ClassLoader`。

这是生成的代码（在一个单独的方法中，因为我`contextDestroyed`还有其他事情要做）：

```
// See https://stackoverflow.com/questions/25699985/the-web-application-appears-to-have-started-a-thread-named-abandoned-connect
// and
// https://stackoverflow.com/questions/3320400/to-prevent-a-memory-leak-the-jdbc-driver-has-been-forcibly-unregistered/23912257#23912257
private void avoidGarbageCollectionWarning()
{
    ClassLoader cl = Thread.currentThread().getContextClassLoader();
    Enumeration<Driver> drivers = DriverManager.getDrivers();
    Driver d = null;
    while (drivers.hasMoreElements()) {
        try {
            d = drivers.nextElement();
            if(d.getClass().getClassLoader() == cl) {
                DriverManager.deregisterDriver(d);
                logger.info(String.format("Driver %s deregistered", d));
            }
            else {
                logger.info(String.format("Driver %s not deregistered because it might be in use elsewhere", d.toString()));
            }
        }
        catch (SQLException ex) {
            logger.warning(String.format("Error deregistering driver %s, exception: %s", d.toString(), ex.toString()));
        }
    }
    try {
         AbandonedConnectionCleanupThread.shutdown();
    }
    catch (InterruptedException e) {
        logger.warning("SEVERE problem cleaning up: " + e.getMessage());
        e.printStackTrace();
    }
} 
```

我想知道这个电话`AbandonedConnectionCleanupThread.shutdown()`是否安全。它会干扰其他 Web 应用程序吗？我希望不是，因为`AbandonedConnectionCleanupThread.run()`方法不是静态的，但`AbandonedConnectionCleanupThread.shutdown()`方法是静态的。

# android - 安装后自动启动安卓应用

> ID：11872320
> 
> 赞同：3
> 
> 时间：2012-08-08T20:05:26.447
> 
> 标签：android

> **可能重复：**
> [第一次安装 .apk 时如何启动服务](https://stackoverflow.com/questions/8531926/how-to-start-a-service-when-apk-is-installed-for-the-first-time)

有没有办法在第一次安装后自动启动安卓应用程序？我在网上找到的所有内容都表明这是一个否决方案，但似乎有一个应用程序正在这样做，它被称为“Plan B”。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T20:11:05.127

看看这个，它解决了您希望解决的确切问题： [第一次安装 .apk 时如何启动服务](https://stackoverflow.com/a/8535062/1512836)

# xpages - XPages 中的共享列？

> ID：11872323
> 
> 赞同：4
> 
> 时间：2012-08-08T20:05:38.727
> 
> 标签：xpages

Notes 的最新改进之一是视图的共享列。我可以设置宽度。字体，各种设置并在视图中放置共享列。如果我需要说，改变列宽，我在一个地方改变了它，它在我所有的视图中都改变了。

无论如何在 xPage 视图中执行此操作？似乎没有视图列，因此似乎没有创建自定义控件的方法。

还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T05:25:33.437

您可以像我在客户应用程序中那样为每个共享列创建自定义控件。

```
<xp:viewColumn columnName="lastmodified" id="viewColumn4">
        <xp:this.converter>
            <xp:convertDateTime>
                <xp:this.pattern><![CDATA[${javascript:app.getResourceString("language","DATE_FORMAT")}]]></xp:this.pattern>
            </xp:convertDateTime>
        </xp:this.converter>
        <xp:viewColumnHeader id="viewColumnHeader4">
            <xp:this.value><![CDATA[#{javascript:app.getResourceString("language","COLUMNHEADER_LASTMODIFIED")}]]></xp:this.value>
        </xp:viewColumnHeader>
    </xp:viewColumn> 
```

# java - Drools hello world maven 依赖项

> ID：11872328
> 
> 赞同：0
> 
> 时间：2012-08-08T20:05:55.437
> 
> 标签：java, maven, dependencies, drools

我正在尝试使用 Drools 运行非常简单的应用程序，现在有几个小时无法使用所有依赖项设置 pom.xml。

这是它现在的样子：

```
 <dependencies>

    <!-- Drools engine -->
    <dependency>
        <groupId>org.drools</groupId>
        <artifactId>drools-core</artifactId>
        <version>5.4.0.Final</version>
    </dependency>

    <dependency>
        <groupId>org.drools</groupId>
        <artifactId>drools-compiler</artifactId>
        <version>5.4.0.Final</version>
    </dependency>       

    <!-- Test -->
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.7</version>
        <scope>test</scope>
    </dependency>
</dependencies> 
```

就像在 [https://community.jboss.org/wiki/DroolsMaven中一样](https://community.jboss.org/wiki/DroolsMaven)

但我得到的是：

```
org.drools.RuntimeDroolsException: Unable to load dialect 'org.drools.rule.builder.dialect.java.JavaDialectConfiguration:java:org.drools.rule.builder.dialect.java.JavaDialectConfiguration'
at org.drools.compiler.PackageBuilderConfiguration.addDialect(PackageBuilderConfiguration.java:313)
at org.drools.compiler.PackageBuilderConfiguration.buildDialectConfigurationMap(PackageBuilderConfiguration.java:298)
at org.drools.compiler.PackageBuilderConfiguration.init(PackageBuilderConfiguration.java:187)
at org.drools.compiler.PackageBuilderConfiguration.<init>(PackageBuilderConfiguration.java:160)
at org.drools.builder.impl.KnowledgeBuilderFactoryServiceImpl.newKnowledgeBuilderConfiguration(KnowledgeBuilderFactoryServiceImpl.java:26)
at org.drools.builder.KnowledgeBuilderFactory.newKnowledgeBuilderConfiguration(KnowledgeBuilderFactory.java:85)
yada-yada-yada

Caused by: java.lang.RuntimeException: The Janino jar is not in the classpath 
```

如果我尝试添加 Janino，我会得到另一个关于一些缺失类的异常（我认为我不应该在这里添加 Janino，因为它应该是其他东西的依赖项）。我错过了我的pom中的任何东西吗？

谢谢！

莱昂蒂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T07:20:28.027

默认情况下，drools-compiler`JavaDialectConfiguration.ECLIPSE`为 java 方言使用 eclipse 编译器 ()，这是一个传递依赖：

```
<dependency>
  <groupId>org.eclipse.jdt.core.compiler</groupId>
  <artifactId>ecj</artifactId>
</dependency> 
```

但是，如果您更喜欢 janino 编译器（`JavaDialectConfiguration.JANINO`），则需要自己添加 janino 依赖项，因为它是一个可选的传递依赖项：

```
<dependency>
  <groupId>org.codehaus.janino</groupId>
  <artifactId>janino</artifactId>
  <optional>true</optional>
</dependency> 
```

查看 droolsjbpm-parent pom 以找出要使用的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T22:37:50.843

**结果证明 Drools 5.4.0 Final: 2.5.16**需要正确的 Janino 版本 Drools 中使用的新版本幸运类。

```
<dependencies>

    <!-- Drools engine -->
    <dependency>
        <groupId>org.drools</groupId>
        <artifactId>drools-core</artifactId>
        <version>5.4.0.Final</version>
    </dependency>

    <dependency>
        <groupId>org.drools</groupId>
        <artifactId>drools-compiler</artifactId>
        <version>5.4.0.Final</version>
    </dependency>

    <dependency>
        <groupId>org.codehaus.janino</groupId>
        <artifactId>janino</artifactId>
        <version>2.5.16</version>
    </dependency>

    <!-- Test -->
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.7</version>
        <scope>test</scope>
    </dependency>

</dependencies> 
```

# inheritance - 将 Framework 2 Ebean 和 InheritanceType 播放为已加入

> ID：11872333
> 
> 赞同：10
> 
> 时间：2012-08-08T20:06:17.850
> 
> 标签：inheritance, playframework-2.0, ebean, joined-subclass

在对谷歌进行了一些研究之后，我没有找到任何有我的问题的人，这就是我在这里发布它的原因。在我的应用程序中，我有三个实体：用户（抽象）、客户、代理。客户和代理商扩展了用户。这是用户的代码：

```
@Entity
@Inheritance(strategy = InheritanceType.JOINED)
public abstract class User extends AbstractModel {

    @Column(unique = true)
    @NotNull
    @Email
    public String email;

    @NotNull
    public String password;

} 
```

问题是生成的模式只创建一个包含用户、客户和代理字段的表，这通常是 InheritanceType.SINGLE_TABLE（默认）的行为。

使用 Ebean 和 @Inheritance 注释有什么问题吗？我尝试了 InheritanceType.TABLE_PER_CLASS，它也不起作用。我在使用 JPA 时从未遇到过这个问题。任何人都可以帮忙吗？

非常感谢 ;）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T14:09:55.890

我更好地阅读了 EBean 的文档和限制：[http ://ebean-orm.github.io/docs/mapping/jpa/](http://ebean-orm.github.io/docs/mapping/jpa/)

> 仅单表继承
> 
> 目前只支持单表继承。其他两种继承策略被视为增强请求，将在功能版本中引入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T20:35:34.573

如果您只想在您的`Customer`和`Agency`表中输入电子邮件和密码，您还可以查看`@Embedded`/`@Embeddable`注释：

```
@Embeddable
public class User  {

    @Column(unique = true)
    @NotNull
    @Email
    public String email;

    @NotNull
    public String password;

} 
```

和客户类（类似于代理）：

```
@Entity
public class Customer  {

...

    @Embedded
    public User user;
...
} 
```

# html - 彼此相邻显示列表，没有浮动

> ID：11872337
> 
> 赞同：0
> 
> 时间：2012-08-08T20:06:47.947
> 
> 标签：html, css

我试图在彼此旁边显示无序列表，但即使我使用 css 规则来匹配它们的显示方式，也无法让它工作。

这是我的代码：

```
<ul class="outterList">
    <li>
       <span class="bigText">Main</span>
    </li>
    <li>
       <span class="medText">Included</span>
       <ul class="innerList">
            <li>TestMessage - text</li>
            <li>bla - text</li>
            <li>asffadgsd - text</li>
            <li>iuygouhlubrsf - text</li>
            <li>New Test - text</li>
            <li>TestFileName - photo</li>
            <li>TestFileName2 - photo</li>
            <li>jvv - photo</li>
            <li>ujjjjjjjjjjj - photo</li>
            <li>MR. Bean - text</li>
        </ul>
    </li>
</ul> 
```

还有我的 CSS：

```
.outterList{
    display: inline ;       
}

.innerList{
    display: block;
} 
```

我试图展示的是这样的：

```
 List1(empty list)           List2

                                    *item1

                                    *item2 
```

任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:16:51.137

```
.outterList{
    display: block;  
}

.outterList > li {
    display: inline-block;
    vertical-align: top;
} 
```

演示：http: [//jsfiddle.net/Q8qNj/4/](http://jsfiddle.net/Q8qNj/4/)

# php - 从数组中删除 [0] 元素而不删除整个数组

> ID：11872339
> 
> 赞同：0
> 
> 时间：2012-08-08T20:06:57.243
> 
> 标签：php, arrays, key

我正在尝试制作一个脚本来从我的数组中删除任何空元素。

但是，[0] 插槽中有一个空元素，因此当我取消设置该值时，它会删除我的整个数组。至少我认为这是正在发生的事情，为什么这不起作用？

```
<?php

$idfile = file_get_contents("datafile.dat");
$idArray = explode("\n", $idfile);
print_r($idArray);
foreach ($idArray as $key => &$value) {
    echo "Key is: ".$key." and value is: ".$value."<br />\n";
    if ($value == ""){
        echo "Killing value of ".$value."<br />";
        unset($value[$key]);
    }
    $value = str_replace("\n", "", $value);
    $value = str_replace("\r", "", $value);
    $value = $value.".dat";
}

print_r($idArray);
?> 
```

这是输出：

```
Array
(
    [0] => 
    [1] => test1
    [2] => test2
)
Key is: 0 and value is: <br>
Killing value of <br> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T20:10:30.887

如果您只是删除一个空值，请尝试使用`unset($idArray[$key])`。如果您只是想整体删除第一个元素，请使用`array_shift()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:14:59.220

另一个不错的解决方案是使用[array_filter()](http://php.net/manual/en/function.array-filter.php)方法，它将处理迭代并为您返回过滤后的数组：

```
<?php

function isNotEmpty($str)
{
    return strlen($str);
}

$idfile = file_get_contents("datafile.dat");
$idArray = explode("\n", $idfile);
$idArray = array_filter($idArray, "isNotEmpty");

?> 
```

# python - 在 Python 中将十六进制数组转换为十进制

> ID：11872344
> 
> 赞同：0
> 
> 时间：2012-08-08T20:07:20.543
> 
> 标签：python, binary, hex

我有一个看起来像的十六进制数组：

> 31 31 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00

将其转换为二进制时，如下所示：`0011000100110001`

每个位都是与数组中的数字相关的标志。在这种情况下，这个二进制数将等于 2,3,7,10,11,15。

我不确定这种表示法是否有名称，但是否有任何简单的方法可以将十六进制转换为十进制数字列表，如上所示。

所以，

每个`0x31`相当于一个字节或 8 位。

每个`0x31`转换为`00110001`.

然后应该解释这个二进制文件的方式是。

```
0 1 2 3 4 5 6 7 8 9 10
0 0 1 1 0 0 0 1 ...... 
```

在这里你可以看到我从`0x31`.

希望这是有道理的。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T20:50:36.577

将所有内容转换为一个大字符串，然后枚举它。大部分类似于 blaxpirit 的答案，但它不使用`[:2]`hack。

```
array = [0x31, 0x31, 0, 0, 0]
[i for i, x in enumerate("".join(format(a, "08b") for a in array)) if x == '1'] 
```

结果是

```
[2, 3, 7, 10, 11, 15] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T20:24:26.467

所以我们在一个空格分隔的字符串中有十六进制数字。

```
s = '31 31 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00' 
```

现在我们拆分字符串，将每个字节从十六进制字符串转换为 int ( `int('31', 16) == 49`)，然后将其转换为二进制字符串 ( `bin(49) == '0b110001'`)，然后去掉`'0b'`with `[2:]`，在开头添加零，因此序列正好是 8 长 ( `'110001'.zfill(8) == '00110001'`)。然后我们将所有位串连接到一个字符串中。

```
s = ''.join(bin(int(b, 16))[2:].zfill(8) for b in s.split())
# Now `s` is '0011000100110001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000' 
```

*   上述行的替代方案，适用于 Python 2.5：

    ```
    trans = {'0':'0000','1':'0001','2':'0010','3':'0011','4':'0100','5':'0101' ,'6':'0110','7':'0111','8':'1000','9':'1001','a':'1010','b':'1011',' c':'1100','d':'1101','e':'1110','f':'1111','':''}
    s = ''.join(trans[c] for c in s.lower())
    ```

然后我们[`enumerate`](http://docs.python.org/dev/library/functions.html#enumerate)是位，所以每个位（`b`）都会有一个对应的位置（`i`），就像你描述的那样。我们使用列表推导并仅包含符号为 的那些位置`'1'`。

```
r = [i for i, b in enumerate(s) if b=='1']
# Now `r` is [2, 3, 7, 10, 11, 15] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T20:23:35.597

好的，所以，首先，您需要将该十六进制数组转换为整数，然后再转换为二进制。这在 python 中非常简单：

```
myBin = bin(int("".join(hexArray),16))[2:].zfill(len(hexArray)*8) #We slice to get rid of the "0b" prepended by the bin function. zfill puts in leading zeros so we don't miss anything 
```

之后，我们可以做一些很酷的枚举和列表理解来获得我们需要的数字：

```
myInts = [off for x, off in enumerate(myBin) if x == "1"] 
```

因此，假设您已经将十六进制放在一个数组中，这将为您提供您正在寻找的答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T22:13:31.860

使用预先计算的位置列表：

```
arr = [0x31, 0x31, 0, 0, 0]
print [(8*byte_ind + i) for byte_ind, b in enumerate(arr) for i in positions[b]]
# -> [2, 3, 7, 10, 11, 15] 
```

其中`positions`将所有（256）字节映射到相应的位置：

```
>>> def num2pos(n):
...     return [i for i, b in enumerate(format(n, '08b')) if b == '1']
... 
>>> positions = map(num2pos, range(0x100))
>>> positions[0x31]
[2, 3, 7] 
```

如果您的数组实际上是一个十六进制字符串，那么您可以将其转换为字节数组：

```
>>> import binascii
>>> arr = bytearray(binascii.unhexlify(s.replace(' ', '')))
>>> arr
bytearray(b'11\x00\x00\x00\x00\x00...\x00') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T20:17:36.970

```
>>> print int('31', 16)
49 
```

从那里，您可以使用列表推导式或生成器表达式来执行多个值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T20:30:54.203

我认为以下内容可以满足您的需求：

```
def to_int_list(hex_array):
    hex_str = ''.join(hex_array)
    value = int(hex_str, 16)
    i = 4*len(hex_str) - 1
    result = []
    while value:
        if value & 1:
            result.append(i)
        value = value >> 1
        i -= 1
    return result[::-1]

>>> to_int_list(['31', '31', '00', '00', '00', '00'])
[2, 3, 7, 10, 11, 15] 
```

# ios - UISlider 不显示在视图中

> ID：11872345
> 
> 赞同：0
> 
> 时间：2012-08-08T20:07:22.980
> 
> 标签：ios, uiview, uislider

我正在尝试在代码中创建一个 UISlider，我正在做的事情相当简单：

```
self.slider = [[UISlider alloc] initWithFrame:CGRectMake(66.0, 15.0, 235.0, 23.0)];
self.slider.minimumValue = 0.0;
self.slider.maximumValue = 100.0;
self.slider.continuous = YES;

self.slider addTarget:self action:@selector(sliderValueChanged:) forControlEvents:UIControlEventValueChanged];

[self.view addSubview:self.slider]; 
```

该代码在我的`viewDidLoad`方法中，这几乎就是我所需要的，但是当我的视图显示时滑块不会出现。也尝试调用`setNeedsDisplay`视图，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:33:44.353

如果你在代码中创建你的滑块，那么你不应该有一个 IBOutlet ，并且声明应该是强的（它可能被释放，因为你只有一个弱引用）。

```
@property (strong, nonatomic)  UISlider *slider; 
```

# nginx - Nginx + FastCGI + SSI：包括虚拟本地 URL 不起作用

> ID：11872347
> 
> 赞同：3
> 
> 时间：2012-08-08T20:07:23.857
> 
> 标签：nginx, fastcgi, ssi

我正在使用 Nginx 和 FastCGI for Php 和本机模块 Nginx SSI。

在我的 home.php 文件中，如果我这样写：

```
<!--# include virtual="robots.txt" --> 
```

它有效，我的屏幕上有 STATIC 文件 /robots.txt 的内容。但是我尝试了一个“动态”URL（它调用了fastcgi，它不起作用（我在error.log中得到“处理时的子请求周期”）

```
<!--# include virtual="toto.php" --> 
```

toto.php 在哪里打印一些 HTML 内容....我知道 Nginx 在主查询和子请求之间共享内存，它是 FastCGI 的错误吗？

谢谢

# c++ - C++ Try Catch Block 不捕获异常

> ID：11872349
> 
> 赞同：2
> 
> 时间：2012-08-08T20:07:24.710
> 
> 标签：c++, exception, error-handling, try-catch

我是 C++ 的初学者，并试图创建一个简单的控制台程序来计算线性方程的“m”和“b”...解析用户提供的输入双精度，我正在使用 stringstream 并使用 try -catch 块以检查错误输入。即使 catch 块具有全局异常 [未处理的异常在 Equation Solver.exe 中的 0x74c8b9bc：Microsoft C++ 异常：[rethrow] 在内存位置 0x00000000..]

```
double XOne;`enter code here`
double YOne;
double XTwo;
double YTwo;
bool inputCheck = false;
while (inputCheck == false)
{
    Clear();
    WriteLine("**Linear Equation**");
    Write("X1: ");
    string xone = ReadLine();
    Write("Y1: ");
    string yone = ReadLine();
    Write("X2: ");
    string xtwo = ReadLine();
    Write("Y2: ");
    string ytwo = ReadLine();
    try
    {
        stringstream s1(xone);
        if (s1 >> XOne) { s1 >> XOne; } else { throw; }
        stringstream s2(yone); // consider I give an invalid input for this variable
        if (s2 >> YOne) { s2 >> YOne; } else { throw; } // this doesn't solve the problem
        stringstream s3(xtwo);
        if (s3 >> XTwo) { s3 >> XTwo; } else { throw; }
        stringstream s4(ytwo);
        if (s4 >> YTwo) { s4 >> YTwo; } else { throw; }
    }
    catch (...) { WriteLine("Invalid Input"); ReadLine(); }
}

LinearEquation equation;
equation.Initialize(XOne, YOne, XTwo, YTwo);
stringstream s5;
s5 << equation.m;
string m = s5.str();
stringstream s6;
s6 << equation.b;
string b = s6.str();
Write("Y = ");
Write(m);
Write("X + ");
WriteLine(b);
ReadLine(); 
```

**编辑** 第一个建议就像一个魅力......谢谢！这是我根据审稿人修改后的代码。

```
double XOne;
double YOne;
double XTwo;
double YTwo;
bool inputCheck = false;
while (inputCheck == false)
{
    Clear();
    WriteLine("**Linear Equation**");
    Write("X1: ");
    string xone = ReadLine();
    Write("Y1: ");
    string yone = ReadLine();
    Write("X2: ");
    string xtwo = ReadLine();
    Write("Y2: ");
    string ytwo = ReadLine();
    try
    {
        stringstream s1(xone);
        if (s1 >> XOne) { s1 >> XOne; } else { throw runtime_error("Invalid Input"); }
        stringstream s2(yone);
        if (s2 >> YOne) { s2 >> YOne; } else { throw runtime_error("Invalid Input"); }
        stringstream s3(xtwo);
        if (s3 >> XTwo) { s3 >> XTwo; } else { throw runtime_error("Invalid Input"); }
        stringstream s4(ytwo);
        if (s4 >> YTwo) { s4 >> YTwo; } else { throw runtime_error("Invalid Input"); }
    }
    catch (runtime_error e) { WriteLine(e.what()); ReadLine(); }
}

LinearEquation equation;
equation.Initialize(XOne, YOne, XTwo, YTwo);
stringstream s5;
s5 << equation.m;
string m = s5.str();
stringstream s6;
s6 << equation.b;
string b = s6.str();
Write("Y = ");
Write(m);
Write("X + ");
WriteLine(b);
ReadLine(); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-08T20:12:56.440

`throw`没有参数只能在处理异常时使用（即在catch块中或从catch块直接或间接调用的函数中），否则您必须使用带有参数的throw，该参数通常是某些异常对象种类。

如果`throw`在未处理异常时执行，`std::terminate`将调用以结束您的程序。

例如（之后`#include <stdexcept>`）

```
throw std::runtime_error("Bad input"); 
```

# c# - 将字符串保存到 XML 文件

> ID：11872353
> 
> 赞同：1
> 
> 时间：2012-08-08T20:07:45.607
> 
> 标签：c#, .net

我想将以下字符串保存在 XML 文件中：

```
<text><![CDATA[<p>what is my pet name</p>]]></text> 
```

当我保存它时，它看起来像：

```
<text>&lt;![CDATA[&lt;p&gt;what is my pet name&lt;/p&gt;]]&gt;</text> 
```

我已经尝试过`File.WriteAllText()`，`XmlDocument.Save()`方法，但没有得到正确的响应。

基本上除了 XML 中的开始和结束标记之外的所有地方，都`<`被替换为.`&lt;``>``&gt;`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:14:34.803

发生的事情是 XML 解析器正在对您的字符串进行编码。当您稍后尝试访问该字符串时，可以在那时再次对其进行解码。

我的建议是，您要么尝试使用 将文本加载到新的“XmlDocument”中`XmlDocument.LoadXml(string s)`，然后将其导入到当前文档中，要么对其进行编码。

您不应尝试同时使用 XML 解析器和手动添加文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:12:09.160

我猜您手动添加了 CDATA，并且 XML 写入机制正确地转义了您的 CDATA，因为它将其视为文本内容。而是显式添加仅包含内容的 CDATA 部分。

如果您使用的是旧的 XML API (System.XML)，请使用此方法创建 CDATA 部分：http: [//msdn.microsoft.com/en-us/library/system.xml.xmldocument.createcdatasection](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.createcdatasection) 然后附加节点到元素，就像链接中的示例一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T20:24:07.063

XML 正在正确写入。

XML 具有为命令保留的特殊字符，就像 C# 保留诸如“if”和“string”之类的单词一样。

XML 正在对您的字符串进行编码以进行存储。您需要做的是当您检索字符串时，通过类似的解码过程运行它。

用这个：`HttpServerUtility.HtmlDecode(encodedString)`

参考： [解码 Web 服务返回的 XML（< 和 > 替换为 < 和 >）？](https://stackoverflow.com/questions/5006020/decode-xml-returned-by-a-webservice-and-are-replaced-with-lt-and-gt)

# ios - ios - 如何使我在 iPhone 故事板上开发的应用程序也可以在 iPad 上运行？

> ID：11872355
> 
> 赞同：0
> 
> 时间：2012-08-08T20:07:58.007
> 
> 标签：ios, ios5, storyboard

我有一个即将完成的应用程序。到目前为止，我一直在使用 iPhone 故事板来绘制导航，但我也希望该应用程序可以在 iPad 上运行。有没有办法“让它工作”或者我必须手动重新完成 iPad 故事板上的整个应用程序流程？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:10:17.063

考虑到它们有不同的分辨率和纵横比，你真的只需要笑着忍受它，然后手动转换。您至少可以将storyboard文件复制到一个新的，并将视图一一调整为ipad大小

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:13:53.303

如果您将其作为通用应用程序，我建议您创建另一个针对 iPad 的故事板并从头开始工作。您仍然可以将其中的所有控制器和方法用于您的新视图（考虑到没有什么非常具体的），只需稍作修改即可针对 iPad 进行调整。

# python - tcpdump 时间戳中的时间单位

> ID：11872356
> 
> 赞同：3
> 
> 时间：2012-08-08T20:07:59.300
> 
> 标签：python, timestamp, tcpdump, scapy

在 Scapy（使用 tcpdump 捕获数据包）中，我从发送的数据包和从中获得的 ICMP 回复中提取时间戳。

```
>>> icmpPacket.time
1344448836.482289
>>> dataPacket.time
1344448832.707281
>>> RTT = icmpPacket.time - dataPacket.time
>>> RTT
3.775007963180542 
```

这里的时间单位是什么？我怎样才能在几秒钟内拥有它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:09:33.443

时间单位是[自 UNIX 纪元](https://en.wikipedia.org/wiki/Unix_epoch)（1970 年 1 月 1 日 00:00:00 UTC）以来的秒数。根据您的需要，使用[`time`](http://docs.python.org/library/time.html)or模块来解释这些。[`datetime`](http://docs.python.org/library/datetime.html)后者是更高级别的模块。

例子：

```
>>> import datetime
>>> icmpstamp = datetime.datetime.fromtimestamp(1344448836.482289)
>>> icmpstamp
datetime.datetime(2012, 8, 8, 20, 0, 36, 482289)
>>> print icmpstamp
2012-08-08 20:00:36.482289
>>> datastamp = datetime.datetime.fromtimestamp(1344448832.707281)
>>> datastamp
datetime.datetime(2012, 8, 8, 20, 0, 32, 707281)
>>> print datastamp
2012-08-08 20:00:32.707281
>>> difference = icmpstamp - datastamp
>>> difference
datetime.timedelta(0, 3, 775008)
>>> print difference
0:00:03.775008 
```

因此，您的`RTT`值已经是两个时间戳之间的差异（以秒为单位）。

# emacs - 如何在这样的emacs中替换一个单词而不是一个字符串？

> ID：11872357
> 
> 赞同：2
> 
> 时间：2012-08-08T20:08:01.237
> 
> 标签：emacs, elisp

例如，我有以下代码：

```
(defun toggle-light ()
    "Toggle setting tab widths between 4 and 8"
    (setq a
      (if (boundp 'a) a nil))
    (interactive)
    (if a
    (progn
      (load-theme 'solarized-dark t)
      (setq a nil))
      (progn
    (load-theme 'solarized-light t)
    (setq a t) ))) 
```

现在我想通过用 替换变量名来重构这些块`a`，`is-lighted`但不改变其他字符`a`（例如， in`interactive`或`tab`）。

emacs 中是否有可以完成这项工作的内置函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T20:27:17.903

`C-u``M-%` `a` `RET` `is-lighted` `RET`

标准查询替换函数的前缀参数（“定界”）用词边界标记包装模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-18T05:34:13.977

虽然[phils 的回答](https://stackoverflow.com/a/11872617/596361)是正确且惯用的，但您还应该了解`\b`单词边界正则表达式。因此，等效的正则表达式替换将是`M-%``\ba\b`. 请参阅正则[表达式中的反斜杠@Emacs 手册](https://www.gnu.org/software/emacs/manual/html_node/emacs/Regexp-Backslash.html)和[正则表达式@EmacsWiki](http://www.emacswiki.org/emacs/RegularExpression)。

# ios - 带有控件 iOS 的 Animate 发布

> ID：11872360
> 
> 赞同：0
> 
> 时间：2012-08-08T20:08:16.673
> 
> 标签：ios, animation, cocos2d-iphone

不知道我是不是想太多了……但我正在努力调整当我的角色向不同方向移动时显示的精灵。

例如，如果玩家的手指在角色上方，我希望它转到“moveUp”帧。如果玩家的手指在角色下方，我想进入“moveDown”框架，否则停留在“normalState”框架。

有人可以给我看一个例子吗？或者指导我阅读有关以这种方式实现 Sprite 表/Sprites 的一般教程。

我已经在演示项目中使用并使用了精灵表，但我希望发布它并希望以正确和最成功的方式来处理它。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:58:53.927

我假设您已经制作了精灵表和/或打包了它（我喜欢 TexturePacker）。代码将类似于：

```
...init...
    //Place all sprite frames from sprite sheet into cache
    [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"spriteSheet.png"];

    CCSpriteBatchNode *gameBatchNode = [CCSpriteBatchNode batchNodeWithFile:@"spriteSheet.png"];
    CCSprite *player = [CCSprite spriteWithSpriteFrameName:@"moveUp"];

    [gameBatchNode addChild: player];
....

- (void) ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *aTouch = [touches anyObject];

    CGPoint touchPosition = [player.parent convertTouchToNodeSpace:aTouch];
    CGPoint touchPositionRelativeToPlayer = ccpSub(touchPosition, player.position);

    if(touchPositionRelativeToPlayer.y > 0)
        [player setDisplayFrame:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"moveUp"]];
    else
        [player setDisplayFrame:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"moveDown"]];
} 
```

如果您想要其他方向（W、E、NW 等），我建议您将其转换`touchPositionRelativeToPlayer`为角度`atan2`并从中确定框架。

# php - php 中的下拉列表未从 MySQL 加载

> ID：11872361
> 
> 赞同：1
> 
> 时间：2012-08-08T20:08:24.753
> 
> 标签：php, mysql, html

我是 php 的新手，我正在尝试从数据库中加载下拉列表。从下面的代码中，只有`else`循环正在工作。和`if`不`elseif`工作。

我不知道循环中的错误是什么。

```
<html>
<head>
</head>
<body>
<form action='<?php echo $_SERVER['PHP_SELF']; ?>' method='post'>  
<select name="value">
    <option value="1">CLUB/FEDERATION/LIGUE</option>
    <option value="2">SPONSOR</option>
    <option value="7">AGENCE CONSEIL</option>
</select>
<br>
<?php

$db = JFactory::getDBO();

if($_POST['value'] == '1') { 

   $query = "SELECT name FROM `fs01_metier` WHERE id_cat=1"; 
   $result = mysql_query($query);
      $result = mysql_query($query);
   echo "<select name=category>";
   while($row=mysql_fetch_array($result)) {
   echo "<option value='".$row['name']."'>".$row['name']."</option>";
   echo "</select>"; 

}

elseif($_POST['value'] == '2') { 

    $query = "SELECT name FROM `fs01_metier` WHERE id_cat=2"; 
    $result = mysql_query($query);
   echo "<select name=category>";
   while($row=mysql_fetch_array($result)) {
   echo "<option value='".$row['name']."'>".$row['name']."</option>";
   echo "</select>"; 
}

else { 
   $query = "SELECT name FROM `fs01_metier` WHERE id_cat=7"; 
   $result = mysql_query($query);
   echo "<select name=category>";
   while($row=mysql_fetch_array($result)) {
   echo "<option value='".$row['name']."'>".$row['name']."</option>";
   echo "</select>"; 
}

}

?>

</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:15:07.827

您没有在第一个 if 语句和 else if 语句中关闭您的 while 循环。缺少结束 '}'

```
while($row=mysql_fetch_array($result)) {
   echo "<option value='".$row['name']."'>".$row['name']."</option>"; 
}
echo "</select>"; 
```

同样在“else”语句中，您希望将“}”括号移到行前

```
echo "</select>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:23:22.847

脚本存在一些问题。

首先，没有提交按钮（在 之前`</form>`）。这允许将内容返回到服务器。

其次，即使在第一次加载页面时没有选择，也会执行 ELSE。

在每个 if 中，似乎都缺少`}`循环中的关闭。最后还有一个额外的。

这是我要做的：

```
<html>
<head>
</head>
<body>
<form action='<?php echo $_SERVER['PHP_SELF']; ?>' method='post'>  
<select name="value">
    <option value="1">CLUB/FEDERATION/LIGUE</option>
    <option value="2">SPONSOR</option>
    <option value="7">AGENCE CONSEIL</option>
</select>
<br>
<?php

$db = JFactory::getDBO();

if (array_key_exists('value', $_POST) && $_POST['value']) { 
    if($_POST['value'] == '1') { 

       $query = "SELECT name FROM `fs01_metier` WHERE id_cat=1"; 
       $result = mysql_query($query);
       $result = mysql_query($query);
       echo "<select name=category>";
       while($row=mysql_fetch_array($result)) {
           echo "<option value='".$row['name']."'>".$row['name']."</option>";
       }
       echo "</select>"; 
    }

    elseif($_POST['value'] == '2') { 
        $query = "SELECT name FROM `fs01_metier` WHERE id_cat=2"; 
        $result = mysql_query($query);
        echo "<select name=category>";
        while($row=mysql_fetch_array($result)) {
           echo "<option value='".$row['name']."'>".$row['name']."</option>";
        }
        echo "</select>"; 
    }

    else { 
        $query = "SELECT name FROM `fs01_metier` WHERE id_cat=7"; 
        $result = mysql_query($query);
        echo "<select name=category>";
        while($row=mysql_fetch_array($result)) {
            echo "<option value='".$row['name']."'>".$row['name']."</option>";
        }
        echo "</select>"; 
    }
}

?>

<input type="submit" value="Submit" />
</form>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T20:16:45.647

试试这个

```
<html>
<head>
</head>
<body>
<form action='<?php echo $_SERVER['PHP_SELF']; ?>' method='post'>  
<select name="value">
    <option value="1">CLUB/FEDERATION/LIGUE</option>
    <option value="2">SPONSOR</option>
    <option value="7">AGENCE CONSEIL</option>
</select>
<br>
<?php

$db = JFactory::getDBO();

if($_POST['value'] == '1') { 

   $query = "SELECT name FROM `fs01_metier` WHERE id_cat=1"; 
   $result = mysql_query($query);
   //$result = mysql_query($query);
   echo "<select name=category>";
   while($row=mysql_fetch_array($result)) {
   echo "<option value='".$row['name']."'>".$row['name']."</option>";
   }
   echo "</select>"; 

}elseif($_POST['value'] == '2') { 

    $query = "SELECT name FROM `fs01_metier` WHERE id_cat=2"; 
    $result = mysql_query($query);
   echo "<select name=category>";
   while($row=mysql_fetch_array($result)) {
   echo "<option value='".$row['name']."'>".$row['name']."</option>";
   }
   echo "</select>";

}else { 
   $query = "SELECT name FROM `fs01_metier` WHERE id_cat=7"; 
   $result = mysql_query($query);
   echo "<select name=category>";
   while($row=mysql_fetch_array($result)) {
    echo "<option value='".$row['name']."'>".$row['name']."</option>";

    }
   echo "</select>"; 
}

?>

</form>
</body>
</html> 
```

# ruby-on-rails - Rails 3 / Active Record - 分配表中附加模型的关联问题

> ID：11872365
> 
> 赞同：0
> 
> 时间：2012-08-08T20:08:40.797
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, activerecord, model

我目前有一个将模型用户、经销商和角色链接在一起的设置。用户和经销商是多对多的，并且使用 Dealer_user 分配表按预期工作。

问题是我希望将角色分配给特定于经销商的用户（即，用户可以是一个经销商的销售经理和零件经理，而在另一个经销商中是销售经理和总监）。

为了做到这一点，我有一个角色模型（属于角色类型）。Role应该属于Dealer_user，而Dealer_user有很多Roles。

目的是我将能够做到

```
dealer.users.where(:id => user.id).first.roles
```

它只会返回特定于该经销商的角色。

我遇到的问题是，当我运行以下测试代码时：

```
dealer.users.where(:id => user.id).first.roles.create(:role_type_id => 1 + Random.rand(4))
```

我收到一个错误：

```
Cannot modify association 'User#roles' because the source reflection class 'Role' is associated to 'DealerUser' via :has_many.
```

谁能建议我对我的模型做错了什么（如下所示）？

注意： Role 与 Dealer_user 的 belongs_to 关系是多态的，因为它也可能属于 Sale_user 或其他需要与 Dealer 相同功能的关联表。

```
class Dealer < ActiveRecord::Base
  attr_accessible :name, :address_id
  has_many :dealer_users
  has_many :users, :through => :dealer_users
  has_many :roles, :through => :dealer_users
end

class User < ActiveRecord::Base
  attr_accessible :first_name, :last_name
  has_many :dealer_users
  has_many :dealers, :through => :dealer_users
  has_many :roles, :through => :dealer_users
end

class DealerUser < ActiveRecord::Base
  attr_accessible :dealer_id, :user_id
  belongs_to :dealer
  belongs_to :user
  has_many :roles, :as => :role_originator
end

class Role < ActiveRecord::Base
  attr_accessible :role_type_id
  belongs_to :role_type
  belongs_to :role_originator, :polymorphic => true
end 
```

编辑：到目前为止没有运气 - 任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:12:29.937

我会使用`has_many through`与角色表的关联。去掉dealer_user表，在roles表中添加列`dealer_id`，`user_id` 然后你的模型看起来像这样：

```
class Dealer < ActiveRecord::Base
    has_many :users, :through => :roles
    has_many :roles
end

class User < ActiveRecord::Base
    has_many :dealers, :through => :roles
    has_many :roles
end

class Role < ActiveRecord::Base
    belongs_to :dealer
    belongs_to :user
end 
```

这应该可以更轻松地执行您正在尝试的查询类型。导轨指南在[这里有一个非常好的概述](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)

# sql - 将 SQL 中表列的值相加

> ID：11872366
> 
> 赞同：0
> 
> 时间：2012-08-08T20:08:41.153
> 
> 标签：sql, postgresql, aggregate-functions

是否可以在 PostgreSQL 中从特定日期范围内的表中选择一列（有一个日期列）并且 - 这是问题所在！- 将表格加在一起。喜欢制作销售报告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:20:10.520

根据您的评论，我认为您指的是`SUM()`. 这是一个[聚合](http://www.postgresql.org/docs/currentinteractive/functions-aggregate.html)函数

```
SELECT SUM(amount)
FROM sales_orders 
WHERE date BETWEEN '2011-03-06' and '2011-04-06' -- not sure what your date is. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:19:06.567

如果我理解正确，您正在寻找这个：

```
SELECT sum(amount) 
FROM sales_orders 
WHERE date ... 
```

# svn - Hudson 全球 SVN 凭证存储？

> ID：11872374
> 
> 赞同：4
> 
> 时间：2012-08-08T20:09:27.720
> 
> 标签：svn, hudson

也许我错误地使用了 hudson，但我有一个 svn 用户可以访问 repo 中的所有项目。我已经建立了一个作业，它试图从下拉列表中传递 svn 位置 (https://svn.company.com/project/branches/$BRANCH_NAME) 中的参数。问题是哈德森似乎想要每个回购的凭据。凭据的“全局覆盖”有点粗略，我不确定，但它似乎并没有按照我认为的方式工作。

有没有办法为项目定义一个真正的全局用户？更具体地说，如果我在 svn 'hudson' 中有一个对所有内容具有结帐访问权限的用户，我是否可以将 hudson 配置为始终使用 hudson 的 svn 凭据，无论我在 Hudson 作业服务器中添加什么作业？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:41:30.697

我最终将一个全局用户添加到可以访问所有项目的 subversion 存储库中，而不是限制每个项目的访问权限。仍然必须每次添加每个作业的凭据，因为 Hudson 中的“全局”svn 设置被歪曲了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:04:57.160

哪个用户正在运行您的 Hudson 实例？

您需要做的是以该用户身份登录（进入 Hudson 根目录）并执行一些`svn ls --username ...`操作来设置这些存储库的用户名和密码。您提到的此用户`--username`不必与 Hudson 用户相同。这将为`$HOME/.subversion/auth`运行 Hudson 的用户创建该存储库的记录。这将成为 Hudson 将尝试用于该项目的通用结帐记录（除非该项目有自己的 Subversion 凭据）。

# php - java的PHP json解码返回了转义的json

> ID：11872376
> 
> 赞同：0
> 
> 时间：2012-08-08T20:09:33.117
> 
> 标签：php, json

我有以下从 java 类返回的 json。我可以让它与 JS 一起工作。但是，当在 php 中使用 json decode 时，它​​显然会中断，因为我确信我需要使用 regexp 来使其正确解析。有任何想法吗？

```
{"return":"{\"response\": {\n \"header\": {\"status\": \"SUCCESS\"},\n \"table\":   {\"rows\": {\"row\": {\"category\": [ {\n \"id\": 1,\n \"name\": \"myApp\",\n \"fa\": [\n {\n \"id\": \"370\",\n \"FieldsAllowed\": \"true\",\n \"systemType\": \"CRM GT\",\n \"cachable\": \"false\",\n \"description\": \"Display Activities\",\n \"faId\": \"100000044\",\n  }]}}}\n}}"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:38:49.447

应用[`json_decode()`](http://php.net/json_decode)两次以获取包含的数组（“响应”）。

```
 // This gets you the inner string
 $json = json_decode($input);

 // This unfolds the contained structure
 $data = json_decode($data->return); 
```

就像数据被编组两次时在所有情况下所做的一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-23T00:16:23.997

您可以将数据作为关联数组或对象获取，

```
$jsonString = '{"return":"{\"response\": {\n \"header\": {\"status\": \"SUCCESS\"},\n \"table\":   {\"rows\": {\"row\": {\"category\": [ {\n \"id\": 1,\n \"name\": \"myApp\",\n \"fa\": [\n {\n \"id\": \"370\",\n \"FieldsAllowed\": \"true\",\n \"systemType\": \"CRM GT\",\n \"cachable\": \"false\",\n \"description\": \"Display Activities\",\n \"faId\": \"100000044\",\n  }]}}}\n}}"}'; 
```

1) 以关联数组的形式获取响应，

```
$decodedResultsAsArray = json_decode($jsonString,true);
$data = $decodedResultsAsArray['return'];
print_r($data); 
```

2) 将响应作为对象获取，

```
$decodedResultsAsObject = json_decode($jsonString);
$data = $decodedResultsAsObject->return;
print_r($data); 
```

如果您想查看 json_decode 函数还有其他几个选项，http: [//php.net/json_decode](http://php.net/json_decode)

# javascript - 仅当先前输入具有有效值时，如何显示输入字段？

> ID：11872377
> 
> 赞同：0
> 
> 时间：2012-08-08T20:09:39.170
> 
> 标签：javascript, jquery, forms, loops

我有一个需要 3 到 10 个文本输入项的表单。当表单首次加载时，它将显示 3 个输入（最少）。

我想有效地显示输入行，因为前一行具有有效值（例如，假设大于 3 个字符）。因此，如果您填写前 3 个，您将自动看到第 4 个可选输入行。

你能帮我在 jQuery 中有效地循环浏览这个快速列表吗？

HTML：

```
<input type="text" class="item_1" name="item_1">
<input type="text" class="item_2" name="item_2">
<input type="text" class="item_3" name="item_3">
<input type="text" class="item_4" name="item_4">
<input type="text" class="item_5" name="item_5">
<input type="text" class="item_6" name="item_6">
<input type="text" class="item_7" name="item_7">
<input type="text" class="item_8" name="item_8">
<input type="text" class="item_9" name="item_9">
<input type="text" class="item_10" name="item_10"> 
```

CSS：

```
.item_4,.item_5,.item_6,.item_7,.item_8,.item_9,.item_10 { display:none } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:20:51.540

这很简单——如果你让 jQuery 的链接来完成工作，你甚至不需要循环。我会做类似的事情：

```
$("#myform input").change(function(){ //If an input in your form is changed,
    if ($(this).val() == 42){ //replace with your validation logic :)
         $(this).next('input').show(); //This shows the next sibling element to the triggering element
    } else { //but if it fails validation...
         $(this).nextAll('input').hide().val(""); //hide them and delete the contents to stop the form from uploading invalidated data!
    }
}); 
```

这可以满足您的要求，并且对于奖励积分，如果它们的前任后来更改为无效，它会隐藏并清空以后的框。

# jquery - jQuery比较问题

> ID：11872378
> 
> 赞同：0
> 
> 时间：2012-08-08T20:09:45.723
> 
> 标签：jquery, html

我有这个代码：

```
function loadPage(page, link) {
            if ($('div#content').attr('current') != page) {
                $('div#content').load(page, '', function (responseText, textStatus, XMLHttpRequest) {
                    if (textStatus == 'error') {
                        $('div#content').html("<?php include 'error/404.php' ?>");  
                    };
                });
                var html = $('div#content').html();
                if (html != "<?php include 'error/404.php' ?>") {
                    $('div#content').hide().fadeIn('slow').attr('current', page);
                };
                $('div#header div#bottom div#nav ul#main li a').removeClass('active');
                $(link).addClass('active');
            };
        }; 
```

我不明白为什么当它将 div 中的 html（刚刚放入 div#content 的来自 'error/404.php' 的 HTML）与源 html（error/404.php）进行比较时，它不是一样的，不遵循真正的道路。

有帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:18:16.777

这里一定有一些混淆，这一行：

```
$('div#content').html("<?php include 'error/404.php' ?>"); 
```

很可能不是你想做的。此时您在浏览器中，您无法访问后端，就像您在生成响应时返回时一样。这只会将文字 html 字符串插入到`div#content`元素中，它无法`error/404.php`从 javascript 领域运行您的脚本。

您可能想要做的是向将运行的服务器发出一个新请求`error/404.php`并将其输出返回给 javascript 调用，以便您可以将其插入到文档中。这个一般想法称为 AJAX，对于您的特殊情况，您可以使用 jQuery 的[.load()](http://api.jquery.com/load/)方法来执行此操作：

```
$('div#content').load('http://insert-full-url-here.com/error/4o4.php'); 
```

## 更新：

另一个问题是`.load()`您比较的异步性。Javascript 是一个单线程环境，所以当你请求某些东西被`.load()`编辑时，它不会等待它完成，只是运行低谷，当响应返回时启动回调。您的第一次加载看起来像这样：

```
$('div#content').load(page, '', .... 
```

当它下面的条件时，不会结束和修改 dom 树：

```
if (html != "<?php include 'error/404.php' ?>") 
```

运行。

当负载确实返回时，您将需要执行该部分代码。`.load()`您可以将 slideDown 条件直接移动到回调中，而无需比较奇怪的字符串：

```
$('div#content').load(page, '', function (responseText, textStatus, XMLHttpRequest) {
    if (textStatus != 'error') { // flipped the condition to NOT error
        $('div#content').hide().fadeIn('slow').attr('current', page); // do the part of the second test
    };
}); 
```

我不确定其余两行是否应该在加载之后或之前运行。如果它们需要在没有错误发生时运行，请将其放在 div 中，如果它们需要运行，无论错误但在加载后将它们放在`.load()`的回调中。

较新的 jQuery 从 ajax 相关调用返回基于 commonjs 承诺的 jqxhr 对象，因此语法可能如下所示：

```
$.get(page).done(function(resp){ // the .done() is called when there were no error
    $('div#content').html(resp);
    // anything you want to run on content get success
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:17:42.323

我不能仅通过查看您的代码来准确判断，但这是一条走出困境的道路：

```
 function loadPage(page, link) {
        if ($('div#content').attr('current') != page) {
            $('div#content').load(page, '', function (responseText, textStatus, XMLHttpRequest) {
                if (textStatus == 'error') {
                    $('div#content').html("<?php include 'error/404.php' ?>");  
                };
            });
            var html = $('div#content').html();

            console.log(html); //Check the Value of html right before it is 
                               //compared. You might be surprised to see something 
                               //like 'undefined' or 'null' as the value. This 
                               //means html is comparing correctly, but is not 
                               //being instantiated properly.

            if (html != "<?php include 'error/404.php' ?>") {
                $('div#content').hide().fadeIn('slow').attr('current', page);
            };
            $('div#header div#bottom div#nav ul#main li a').removeClass('active');
            $(link).addClass('active');
        };
    }; 
```

# javascript - 如何使用 jQuery 构建简单的粘性导航？

> ID：11872381
> 
> 赞同：4
> 
> 时间：2012-08-08T20:09:56.677
> 
> 标签：javascript, jquery, html, css, scroll

我试图在滚动时更改 div 的 css。这是我的代码，但不幸的是它不起作用。

```
$(document).ready(function() {
   $(window).scroll(function () {
        if ($(this).scrollTop() > 150) {
            $('#subnav').css({
                'position' : 'fixed',
                'top' : '0'
            });
        } else {
            $('#subnav').css({
                'position' : 'static',
                'top' : 'auto'
            });
        }
    });
 }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T20:19:16.500

尝试这个：

[**这是工作的jsFiddle**](http://jsfiddle.net/4TfTF/8/)

```
$(document).ready(function() {
   $(window).scroll(function() {
       var scrollVal = $(this).scrollTop();
        if ( scrollVal > 150) {
            $('#subnav').css({'position':'fixed','top' :'0px'});
        } else {
            $('#subnav').css({'position':'static','top':'auto'});
        }
    });
 }); 
```

注意：如果你只有一个值可以使用`else`，但如果你有多个值我建议不要使用`else`，因为它会产生冲突，使用`else if`intead。

# python - 使用 Tweepy 通过 Python 导入推文

> ID：11872384
> 
> 赞同：-8
> 
> 时间：2012-08-08T20:10:09.170
> 
> 标签：python, twitter, tweepy

我希望你会注意到其中的两件事。第一个是`TweepError`in tweepy，第二个是`TwitterError` in Twitter。这两个错误在我的应用程序中引入了错误。我安装了很多次，但仍然面临这两个错误。我在 Windows 7 上使用 Python 2.6。

```
>>> import tweepy
>>> dir(tweepy)
['API', 'BasicAuthHandler', 'Cache', 'Cursor', 'DirectMessage', 'FileCache', 'Friendship', 'MemoryCache', 'ModelFactory', 'OAuthHandler', 'SavedSearch', 'SearchResult', 'Status', 'Stream', 'StreamListener', '***TweepError***', 'User', '__author__', '__builtins__', '__doc__', '__file__', '__license__', '__name__', '__package__', '__path__', '__version__', 'api', 'auth', 'binder', 'cache', 'cursor', 'debug', 'error', 'models', 'oauth', 'parsers', 'streaming', 'utils']
>>> import twitter
>>> dir(twitter)
['ACCESS_TOKEN_URL', 'AUTHORIZATION_URL', 'Api', 'CHARACTER_LIMIT', 'DEFAULT_CACHE', 'DirectMessage', 'Hashtag', 'List', 'REQUEST_TOKEN_URL', 'SIGNIN_URL', 'Status', 'StringIO', 'Trend', ***'TwitterError'***, 'Url', 'User', '_FileCache', '_FileCacheError', '__author__', '__builtins__', '__doc__', '__file__', '__name__', '__package__', '__version__', 'base64', 'calendar', 'datetime', 'gzip', 'httplib', 'md5', 'oauth', 'os', 'parse_qs', 'parse_qsl', 'rfc822', 'simplejson', 'sys', 'tempfile', 'textwrap', 'time', 'urllib', 'urllib2', 'urlparse'] 
```

我收到这个错误

```
twitter = Twitter(format="xml")

Traceback (most recent call last):
  File "<pyshell#5>", line 1, in <module>
    twitter = Twitter(format="xml")
NameError: name 'Twitter' is not defined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:55:55.453

代替：

```
twitter = Twitter(format="xml") 
```

和

```
my_twitter = twitter.Twitter(format="xml") 
```

请注意，我还更改了本地创建的实例的名称，以便您可以继续`twitter`用作模块的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T21:03:13.643

如果您尝试从[官方 Python Twitter 工具页面](http://pypi.python.org/pypi/twitter/)执行操作，则应`from twitter import *`首先使用适当的导入指令。或者阅读更多关于[在 python 中导入模块的](http://docs.python.org/tutorial/modules.html)信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T22:53:31.383

您只是对库 twitter 和 python_twitter 和 tweepy 感到困惑。首先阅读您要使用的库的文档，然后专注于该库而不是查看其他一些文档。此错误是因为您安装了 twitter 并阅读了 python_twitter 的文档

# facebook - 广告定位和 Facebook 广告 API

> ID：11872394
> 
> 赞同：0
> 
> 时间：2012-08-08T20:10:59.937
> 
> 标签：facebook, api, facebook-graph-api

我提交以下目标标准：

```
{countries":["US"],
"cities":{"name":"Gilbert, AZ"},
"zips":[],
"regions":[],
"radius":0,
"locals":null,
"keywords":[],
"user_adclusters":[],
"interested_in":null,
"genders":null,
"age_min":25,
"age_max":0} 
```

我回来的错误是：

```
(Exception - #0) Invalid Cities. 
```

有人能帮我吗？

谢谢！埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:17:43.430

尝试也包括城市的 ID：

（您从搜索端点返回的“密钥”）

例如

`countries":["US"],"cities":[{"id": 2413131,"name":"Gilbert, AZ"},{//SOME OTHER CITY}],"zips":[],"regions":[],"radius":0,"locals":null,"keywords":[],"user_adclusters":[],"interested_in":null,"genders":null,"age_min":25,"age_max":0}`

有时只提供名称不起作用

# shell - 当作为参数传递给另一个 shell 脚本时调试 shell 脚本

> ID：11872397
> 
> 赞同：0
> 
> 时间：2012-08-08T20:11:15.553
> 
> 标签：shell, scripting

当作为参数传递给另一个 shell 脚本时，我想调试一个 shell 脚本

第一个.sh 第二个.sh 100

我在两个脚本中都设置了 -x
但无法调试第二个脚本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:02:13.713

由于这里没有太多事情要做，因此需要确保

1.  脚本的第一行应该说明您正在使用哪个 shell

> ```
> #!/bin/env bash 
> ```

1.  确保两个脚本都是可执行的。

> ```
> ls -l first.sh
> ls -l second.sh 
> ```

第一列至少应具有 -rwx----- 如果没有，则使用以下命令使它们可执行

```
chmod 700 first.sh 
chmod 700 second.sh 
```

1.  确保 first.sh 接受 $1 和 $2 参数。

错误消息等将帮助我们帮助您:)

# html - iframe 高度设置为 100% 没有任何结果 - 使用 Firefox v14

> ID：11872402
> 
> 赞同：0
> 
> 时间：2012-08-08T20:11:34.257
> 
> 标签：html, iframe, styles, height

我目前正在编写一个代码，我已将 iframe 的高度设置为 100%，但它似乎根本不起作用。我试图从中删除不必要的代码来演示问题，在此处查看代码（注意内联 css）：http: [//jsfiddle.net/VfKqR/](http://jsfiddle.net/VfKqR/)

这里是：

```
<!-- Start full page container -->
<div style="min-width: 830px; width: 100%; height: 100%; float: left;">

<!-- Start scoop menu -->
<div style="width: 188px; float: left;">

<table>
    <thead>
    <tr>
        <td>

<a href="http://rambler.ru" target="scoop" style="font-size:13px; letter-spacing: 0.7px; font-weight: bold;">Link tester</a>

        </td>
    </tr>
    </thead>
</table>

<!-- End scoop menu -->
</div>

<!-- spacer between divs -->
<div style="width: 20px; float: left;">&nbsp;</div>

<!-- Start iframe -->
<div style="min-width: 622px; width:74%; height: 100%; float: left;">

<iframe id="scoop" name="scoop" src="http://www.yahoo.com" style="border:0px #FFFFFF none;" name="myiframe" scrolling="yes" frameborder="0" marginheight="0px" marginwidth="0px" width="100%" height="100%">

<!-- End iframe -->
</div>

<!-- End full page container -->
</div> 
```

我无能为力似乎将高度固定为 100%。我在这里想念什么？

编辑：我刚刚在 Safari 中进行了测试，它运行良好，但是在最新版本的 Firefox（v14.0.1）中，它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:49:38.813

您可以使用我刚刚编写的这个小 jquery 脚本来实现它：

```
jQuery(document).ready(function(){var height = $(window).height();
            $('iframe').css('height', height)
        }); 
```

[http://jsfiddle.net/VurLy/](http://jsfiddle.net/VurLy/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:38:45.970

Checkout my solution [Setting iframe to take remaining space in page](https://stackoverflow.com/questions/13414427/setting-iframe-to-take-remaining-space-in-page/13484164#comment18457957_13484164) without any JS.

You will need to clear some `float`'s most likely (as those are the reason the iFrame will not scale) and most likely you will need to refactor your code a bit.

Hope that helps.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T20:19:53.567

更新为 JAVASCRIPT

javascript：

```
<script type="text/javascript">
var sheet = document.createElement('style')
sheet.innerHTML = "html, body{height: 100%;}";
document.head.appendChild(sheet);
</script> 
```

html:

```
<div style="min-width: 622px; width:74%; height: 100%; float: left;">​...... 
```

# css - 字体真棒无法在 Firefox 上正确显示/如何通过 CDN 销售？

> ID：11872404
> 
> 赞同：12
> 
> 时间：2012-08-08T20:11:46.270
> 
> 标签：css, firefox, cross-domain, font-awesome

即使在 localhost 中，我也无法在 firefox 中正确显示 font-awesome。我收到以下跨域错误：

```
Timestamp: 08/08/2012 02:49:37 PM
Error: downloadable font: download failed (font-family: "FontAwesome" style:normal weight:normal stretch:normal     `src index:2): bad URI or cross-site access not allowed
source: http://localhost:3000/djpsite/baseadmin/font/fontawesome-webfont.ttf
Source File: http://localhost:3000/djpsite/baseadmin/css/font-awesome.css
Line: 0
Source Code:
@font-face {   font-family: "FontAwesome";   font-style: normal;   font-weight: normal;   src: url("../font/fontawesome-webfont.eot?#iefix") format("embedded-opentype"), url("../font/fontawesome-webfont.woff") format("woff"), url("../font/fontawesome-webfont.ttf") format("truetype"), url("../font/fontawesome-webfont.svg#FontAwesome") format("svg"); } 
```

我按照这篇文章的建议使用了双引号：[firefox @font-face fail with fontawesome](https://stackoverflow.com/questions/11072655/firefox-font-face-fail-with-fontawesome)但这并没有解决问题。

在 Chrome 中一切正常；有什么建议么？

除了在 Chrome 中解决问题之外，鉴于此限制，我应该如何通过 CDN 出售 font-awesome：http: [//dev.w3.org/csswg/css3-fonts/#default-same-origin-restriction](http://dev.w3.org/csswg/css3-fonts/#default-same-origin-restriction)？

下面是我的 CSS 文件中的代码：

```
@font-face {
    font-family: 'FontAwesome';
    src: url("../font/fontawesome-webfont.eot");
    src: url("../font/fontawesome-webfont.eot?#iefix") format('embedded-opentype'),
    url("../font/fontawesome-webfont.woff") format('woff'),
    url("../font/fontawesome-webfont.ttf") format('truetype'),
    url("../font/fontawesome-webfont.svg#FontAwesome") format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-13T21:30:52.473

[这](http://www.red-team-design.com/firefox-doesnt-allow-cross-domain-fonts-by-default)为我解决了 Firefox 跨域字体问题（导致字体无法在 Firefox 中加载）。只需将以下内容添加到`.htaccess`或直接添加到 apache 配置：

```
<FilesMatch "\.(ttf|otf|eot|woff)$">
  <IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
  </IfModule>
</FilesMatch> 
```

有一个网页说明如何使用不同的服务器设置 CORS： [https ://enable-cors.org/server.html](https://enable-cors.org/server.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T10:53:14.833

我通常发现添加一个本地声明可以解决这个问题，根据[this](http://nicewebtype.com/notes/2009/10/30/how-to-use-css-font-face/)。例如：

```
@font-face {
  font-family: "Your typeface";
  src: url("type/filename.eot");
  src: local("☺"),
    url("type/filename.woff") format("woff"),
    url("type/filename.otf") format("opentype"),
    url("type/filename.svg#filename") format("svg");
} 
```

我确信 Apache 配置方法更正确，但是您可能没有使用 Apache，或者可能没有能力进行此类覆盖。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-12T20:30:23.330

如果您正在构建 Rails 应用程序（或其他基于机架的应用程序），请查看[https://github.com/cyu/rack-cors](https://github.com/cyu/rack-cors)超级容易启动和运行。您可以将其放入`application.rb`环境文件或其中一个环境文件中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-04T17:33:39.300

如果您像我一样使用 AWS Cloudfront，则需要[添加 CORS Policy](http://docs.aws.amazon.com/AmazonS3/latest/dev/cors.html)。S3 故意不允许您在上传期间设置标头，因为您需要改用该策略。

此策略配置应该为您解决问题：

```
<CORSConfiguration>
 <CORSRule>
   <AllowedOrigin>*</AllowedOrigin>
   <AllowedMethod>GET</AllowedMethod>
 </CORSRule>
</CORSConfiguration> 
```

这将使 Font-Awesome 从 Firefox 和 Internet Explorer (IE) 上的 CDS 工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-24T06:25:34.810

我在 magento 2.0 上遇到了同样的问题。它在 https 上运行良好，但在 http 上却不行。为了允许字体真棒图标加载到 http。我在位于 magento 安装根目录的 .htaccess 中添加了以下内容。

```
<FilesMatch ".(ttf|otf|woff)$">
    Header set Access-Control-Allow-Origin "*"
</FilesMatch> 
```

# android - TCP socket 将数据从 PC 传输到 android 设备 (Android NDK)

> ID：11872405
> 
> 赞同：2
> 
> 时间：2012-08-08T20:11:47.350
> 
> 标签：android, c++, sockets, android-ndk

我正在努力实现Android设备（客户端）和PC（服务器）之间的TCP套接字，代码由c ++（Android NDK）实现。

一切正常，当我运行到服务器端时，输出“**服务器启动**”它等待连接到客户端。另一边，当我为客户端运行时，它一直工作，直到连接到服务器，我发现这个错误“**套接字连接到服务器错误**”

谁能告诉我想要的是问题吗？

我想将矩阵 16*16 从服务器传输到客户端并形成客户端到服务器的想法......

**服务器端：**

```
MyServerThread::MyServerThread()
{
    startServer();
}
void MyServerThread::run()
{
    //std::cout<<"hi"<<std::endl;
    for(int i=0;i<16;i++)
        matrix[i]=(float)i;
    memcpy(buf,matrix,4*16);
    sendMSG();
}

//TCP socket
/* now create the server socket
   make it an IPV4 socket (PF_INET) and stream socket (TCP)
   and 0 to select default protocol type */
if ( (server_skt = socket(AF_INET, SOCK_STREAM, 0)) == -1 ){
    std::cerr<<"socket creation failed"<<std::endl;
    exit(1);
}

//Initail, bind to port
/* now fill in values of the server sockaddr_in struct
   s_addr and sin_port are in Network Byte Order (Big Endian)
   Since Intel CPUs use Host Byte Order (Little Endian), conversion
   is necessary (e.g. htons(), and htonl() */
server_addr.sin_family = AF_INET;//IPv4
server_addr.sin_port = htons(PORT);
server_addr.sin_addr.s_addr = htonl(INADDR_ANY);
memset(server_addr.sin_zero, 0, 8);

//binding

 /* now bind server port
       associate socket (server) with IP address:port (server_addr) */

if ( bind(server_skt, (struct sockaddr*)&server_addr, sizeof(struct sockaddr)) == -1 ){
    std::cerr<<"socket bind failed"<<std::endl;
    exit(1);
}

int queueSize=1;
//Start listening, wait for connection from client with a pending queue of size
if ( listen(server_skt, queueSize) == -1 ){
    std::cerr<<"socket listen failed"<<std::endl;
    exit(1);
}

//Wait for connect!
bool gotClient=false;
while(!gotClient){
    sin_size = sizeof(struct sockaddr_in);
    socklen_t temp=sin_size;
    std::cout<<"server starts"<<std::endl;
    if ( (client_skt = accept(server_skt, (struct sockaddr*)&clients_addr, &temp)) == -1 ){
        std::cerr<<"socket error"<<std::endl;}
    else
    {
        gotClient=true;
        std::cout<<"Got client"<<std::endl;
    }
}

    void MyServerThread::sendMSG()
{
    if ( (numbytes = send(client_skt, buf, strlen(buf),0)) == -1){
        std::cerr<<"server, normal send error"<<std::endl;
        exit(1);
    }
}

void MyServerThread::recvMSG()
{
    if ( (numbytes = recv(client_skt, buf, bufferSize,0)) == -1 ){
        std::cerr<<"server, normal recv error"<<std::endl;
        exit(1);
    }
} 
```

**客户端：**

```
Client::Client()
{

}
void Client::startClient()
{
    /* now fill in sockaddr_in for remote address */
    serv_addr.sin_family = AF_INET;
    /* save the server IP (input from Java */
    serv_addr.sin_addr.s_addr = inet_addr(serverIP);
    /* set port */
    serv_addr.sin_port = htons(PORT);
    memset(serv_addr.sin_zero, 0, 8);

    /* create local stream socket */
    client_skt = socket(PF_INET, SOCK_STREAM, 0);
    if (client_skt < 0) {
        __android_log_print(ANDROID_LOG_ERROR,"jni client","socket creation error");
        exit(-1);
    }

    /* bind local socket to any port number */
    local_addr.sin_family = AF_INET;
    local_addr.sin_addr.s_addr = htonl(INADDR_ANY);
    //local_addr.sin_addr.s_addr = inet_addr("127.0.0.1");
    local_addr.sin_port = htons(PORT);
    memset(local_addr.sin_zero, 0, 8);

    rc = bind(client_skt, (struct sockaddr *) &local_addr, sizeof(local_addr));

    if (rc < 0)
    {
        __android_log_print(ANDROID_LOG_ERROR,"jni client","socket bind error");
        exit(1);
    }
    __android_log_print(ANDROID_LOG_INFO,"jni client","client start finished");

}
void Client::connectServer()
{
    __android_log_print(ANDROID_LOG_INFO,"jni client","connect to server starts");
    /* connect to server */
    rc = connect(client_skt, (struct sockaddr *) &serv_addr, sizeof(serv_addr));
    if (rc < 0)
    {
        __android_log_print(ANDROID_LOG_ERROR,"jni client","socket connect to server error");
        exit(1);
    }
    __android_log_print(ANDROID_LOG_ERROR,"jni client","server connected");
}
void Client::sendMSG()
{
    if ( (numbytes = send(client_skt, "hello!", strlen("hello!"),0) )== -1 ){
        __android_log_print(ANDROID_LOG_ERROR,"jni client","send error");
        //exit(1);
    }

}
void Client::recvMSG()
{
    if ( (numbytes = recv(client_skt, buf, bufferSize,0) ) == -1 ){
        __android_log_print(ANDROID_LOG_ERROR,"jni client","recv error");
        //exit(1);
    }
    else
    {
        memcpy (matrix, buf, numbytes);
        for(int i=0;i<4;i++)
            __android_log_print(ANDROID_LOG_INFO,"matrix","%f, %f, %f, %f",matrix[i*4],matrix[i*4+1],matrix[i*4+2],matrix[i*4+3]);
    }
} 
```

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:55:27.807

如果客户端和服务器在同一台机器上，您`connect()`可能会因 EADDRINUSE 失败（本地地址已在使用中），因为您将客户端和服务器绑定到相同的端口号：

```
local_addr.sin_port = htons(PORT); 
```

编辑客户端代码，将客户端绑定到端口 0（这意味着内核将为您选择一个未使用的临时端口），然后重试。

即使这不是您遇到的确切问题，您也应该始终记录库函数返回的错误。失败后`connect()`，记录 的值`strerror(errno)`。

# c# - 掌上阅读器的边缘检测

> ID：11872411
> 
> 赞同：1
> 
> 时间：2012-08-08T20:12:28.283
> 
> 标签：c#, java, image-processing

我对如何检测手掌的线条（心线，命运线）非常陌生，以便我可以访问然后进行分析。我将构建一个分析手掌并做出相应预测的程序。
这完全是边缘检测，但我怎样才能找到单独的线？有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:14:35.143

查找 Canny 的边缘检测算法。它可以说是迄今为止最好的边缘检测器。

# reporting-services - SSRS 中的多值参数 - 仅选择一个值

> ID：11872412
> 
> 赞同：0
> 
> 时间：2012-08-08T20:12:28.187
> 
> 标签：reporting-services, ssrs-2008

我已经设置了一个带有多值参数的报告。数据集本质上是

```
select 'Abc' as field1
Union all
select 'lmnop'
union all
select 'xyz'
order by Field1 
```

可用值 - 标签和值都设置为 Field1 默认值 - 值设置为 Field1

我希望默认情况下仅选择“Abc”，其余未选择。但相反，我看到所有这些都被选中。这可以按预期使用单值参数。

SSRS 2008 R2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:48:13.277

明白了，从默认值数据集中返回的任何内容都将在报表运行时被选中。

所以如果我有作为可用选项的数据集

```
select 'a' as field1
union all
select 'b'
union all
select 'c' 
```

我有默认选项的 Dataset2

```
Select 'b' as selectedField 
```

然后，在运行报告时，默认情况下只会选择“B” *。*说得通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:58:10.643

基于这个答案和一些快速测试，似乎当一个参数被定义为多值*并且*数据集中没有 NULL 时，默认行为是选择所有参数。否则，它选择无。[选择全部作为多值参数的默认值](https://stackoverflow.com/questions/2508910/select-all-as-default-value-for-multiple-values-parameter-ssrs)

我想，从行为的角度来看，这是有道理的。你允许多选，那么为什么不假设有人会从所有选择的东西开始呢？似乎与期望选择第一件事一样随意。

# python - wxpython 和更新面板中的 matplotlib 图

> ID：11872413
> 
> 赞同：0
> 
> 时间：2012-08-08T20:12:34.647
> 
> 标签：python, matplotlib, wxpython, panel, matplotlib-basemap

我正在使用带有底图和 matplotlib 的 wx gui。我有两个面板（左/右）。我在右侧面板中绘制了一张美国地图。使用下面的代码没有问题：

```
# Setup the Map for Display
self.figure = Figure(None,dpi=75)
self.canvas = FigureCanvas(self.MapPage, -1, self.figure)
self.axes = self.figure.add_axes([0,0,1,1],frameon=False)
self.SetColor( (255,255,255) )  

#Sizer for Map Page Right Panel (Map Display)
sizer = wx.BoxSizer(wx.VERTICAL)
sizer.Add(self.canvas, 1, wx.EXPAND | wx.ALL)
self.MapPage.SetSizer(sizer)

# Plot the Map
self.map = Basemap(llcrnrlon=-119, llcrnrlat=22, urcrnrlon=-64,
                   urcrnrlat=49, projection='lcc', lat_1=33, lat_2=45,
                   lon_0=-95, resolution='i', area_thresh=10000,ax=self.axes)
self.map.drawcoastlines()
self.map.drawcountries()
self.map.drawstates() 
```

这就像一个魅力。但是，最终在代码的后面，我想将地图更改为可能只显示一个区域。这是我遇到问题的地方。目前，我正在这样做：

```
# Clear the previous figure
self.figure.clf()
self.figure.canvas.draw()

# Setup for the NEW Map to Display
self.figure = Figure(None,dpi=75)
self.canvas = FigureCanvas(self.MapPage, -1, self.figure)
self.axes = self.figure.add_axes([0,0,1,1],frameon=False)
self.SetColor( (255,255,255) )  

#Sizer for NEW Map Page Right Panel (Map Display)
sizer = wx.BoxSizer(wx.VERTICAL)
sizer.Add(self.canvas, 1, wx.EXPAND | wx.ALL)
self.MapPage.SetSizer(sizer)

# Plot the NEW Map
self.map = Basemap(llcrnrlon=newlong1, llcrnrlat=newlat1, urcrnrlon=newlong2,
                   urcrnrlat=newlat2, projection='lcc', lat_0=maplat,
                   lon_0=maplon, resolution='i', area_thresh=10000,ax=self.axes)
self.map.drawcoastlines()
self.map.drawcountries()
self.map.drawstates() 
```

此代码设法清除我的右侧面板并显示新地图；然而，这张新地图只在面板的左上角。它不再延伸到整个面板。关于为什么会这样的任何想法？还是有更好的方法让我清除底图图形以在同一面板中绘制新图形？

任何帮助，将不胜感激！谢谢！

# javascript - jQuery列表更新

> ID：11872417
> 
> 赞同：0
> 
> 时间：2012-08-08T20:13:08.503
> 
> 标签：javascript, jquery

我目前有一个拖放列表，我的问题是我试图检测何时使用 mouseup 通过 Jquery 删除 div。

问题是我需要这样做的原因是我可以更新我的列表（在 MYSQL 中） - 我计划使用 Jquery Ajax 帖子来执行此操作。

我的问题是我已经设置了代码，但我不知道哪里出错了——在我的代码中你会看到一个警报功能——我用它来显示 div 是否正在更新。

到目前为止，我没有收到任何警报..

这是目前的jquery：

```
$(document).ready(){
$(.mouseup).mouseup(function(){
var divparent = $(this).parent().attr("id");
alert(divparent);
});
} 
```

任何帮助，将不胜感激。

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:15:04.427

我在需要改变的地方放了一些箭头。

```
$(document).ready(function(){ // <-----------------
  $(".mouseup").mouseup(function(){ // <--------------
    var divparent = $(this).parent().attr("id");
    alert(divparent);
  });
}); // <--------------- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:14:48.827

我假设你有一个`.mouseup`在你的 html 中命名的类，所以你需要确保 jquery 知道这一点。

这一行：`$(.mouseup).mouseup(function(){`

应该：`$('.mouseup').mouseup(function(){`

你也不需要`.ready`支票。

如果您想保持`.ready`@Kyle 的正确性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T20:17:12.523

据我所知，`mouseup`当您将鼠标从您拖动的元素的原始位置释放时，该事件不会触发。

解决此问题的一种方法是`mouseup`在 body 上设置事件并检测您从哪个项目开始拖动。

# android - 如何在自定义列表视图中添加文本视图和编辑视图？

> ID：11872420
> 
> 赞同：0
> 
> 时间：2012-08-08T20:13:27.660
> 
> 标签：android, android-listview

我想创建以下格式的自定义列表视图。例如

```
 _______________________________________
|                                       |
| -----------           ------------    |
|  Principal              EditView      |
| -----------           ------------    |
|                                       |
| -----------           ------------    |
|  Years                  EditView      |
| -----------           ------------    |
|                                       |
| -----------           ------------    |
|  Rate of Int             EditView     |
| -----------           ------------    |
|_______________________________________|

 _______________________________________
|                                       |
| -----------           ------------    |
|  Interest               EditView      |
| -----------           ------------    |
|_______________________________________|

 _______________________________________
|                                       |
| -----------           ------------    |
|  Simple Int             EditView      |
| -----------           ------------    |
|_______________________________________|

 _______________________________________
|                                       |
| ------------          ------------    |
|  Compond Int            EditView      |
| ------------          ------------    |
|_______________________________________| 
```

简而言之，listview 中的 item1 应包含 3 个文本和编辑视图，而 item2 应包含 2 个文本和编辑视图。这两个项目应该得到不同的输入。

因为我是 android 新手，所以我能够创建简单的列表视图，但我不知道如何创建具有各种视图的列表视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:16:48.313

您需要创建一个自定义适配器，该适配器将能够为每个单元格膨胀自己的 xml 视图。

您的新 xml 视图应该简单地具有您的列表视图将使用的最复杂的布局，并且对于不使用子视图信息的每个单元格，只需将该子视图设置为不可见。

这至少应该引导您朝着正确的方向前进

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:24:36.343

你为什么打算使用`ListView`? A`TableLayout`与 a 组合`ScrollView`对您来说可能是一个更简单的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T20:38:15.810

制作自己的 ArrayAdapter 对我来说效果很好。那里你得到了方法

getView() 你可以覆盖它。

在那里你使用 LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE); 膨胀您在布局中定义为 XML 的视图。您可以直接在此方法中填充视图元素。

在我的代码中，我制作了一个图标布局、两个文本字段和一个进度条。看起来像这样：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 ... >

    <ImageView
        android:id="@+id/inventory_item_icon"
        .../>

    <TextView
        android:id="@+id/inventory_item_titel"
        .../>

    <TextView
        android:id="@+id/inventory_status_textfield"
        ... />

    <TextView
        android:id="@+id/inventory_item_info"
        ... />

    <ProgressBar
        android:id="@+id/inventory_item_status"
        ... />

</RelativeLayout> 
```

在 getView() 中直接填充它们很简单之后，我的代码如下所示：

```
public View getView(int position, View convertView, ViewGroup parent) {
LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View rowView = inflater.inflate(R.layout.inventory_icon_text_text, parent, false);
TextView textViewTitel = (TextView) rowView.findViewById(R.id.inventory_item_titel);
TextView textViewInfo = (TextView) rowView.findViewById(R.id.inventory_item_info);
ImageView imageView = (ImageView) rowView.findViewById(R.id.inventory_item_icon);

textViewTitel.setText(values[position]);
  String s = values[position];
    if (s.equals("A")) {
       imageView.setImageResource(R.drawable.a);
       textViewInfo.setText("This is case A!"); 
    } else if (s.equals("B")) {
    return rowView;
} 
```

因此，您可以直接处理各个 View 元素。如果您想拥有不同的视图布局，您可以在扩展布局之前尝试检查这一点。谢谢你可以选择你想使用哪一个。

希望这对你有帮助！托拜厄斯

# c# - C# 自定义脚本语言

> ID：11872421
> 
> 赞同：2
> 
> 时间：2012-08-08T20:13:30.657
> 
> 标签：c#

> **可能重复：**
> [在 C# 中实现脚本语言](https://stackoverflow.com/questions/1394180/implementing-a-scripting-language-in-c-sharp)

我有一个 C# 应用程序，现在我想允许用户从我的应用程序调用一些方法，例如：

```
:step2
$test2=Click("post")
Wait()
IF($test2==1){
    runjs("mceRemoveControl")
    Form("post")
    $test3=Input("post_title","$TITLE")
    IF($test3==0){
        GOTO(step2)
    }
} 
```

这是我想在我的应用程序中解析的自定义语言。方法 Click,runjjs,Input 是我的 C# 程序中的方法。我应该在哪里寻找此类任务的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T20:18:32.943

有很多方法..只是初学者：

如果您想坚持使用这种时髦的语法，请从[http://www.antlr.org/](http://www.antlr.org/)或类似的解析器生成器或框架开始。

如果您只是想拥有合理的脚本语言，不一定要像示例一样，请尝试 IronRuby、IronPython 甚至 JavaScript 或 C#（命名空间 CompilerServices 允许您即时编译代码，然后加载它（可能在单独的应用程序域中以便能够之后卸载它）并运行）..

编辑：另一个有很多指向解析器/编译器的链接的线程：[什么是好的 C# 编译器/解析器生成器？](https://stackoverflow.com/questions/1194584/what-is-a-good-c-sharp-compiler-compiler-parser-generator)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T20:24:33.567

我发现 Niklaus Wirth 的[Compiler Construction](https://people.inf.ethz.ch/wirth/CompilerConstruction/CompilerConstruction1.pdf)一书对这类任务很有帮助。因为我们在这里讨论的是创建一个编译器。这是一本小书，解释了形式语言的基本方面，解释了语法描述语言 EBNF，并系统地解释了如何编写编译器。即使您只考虑翻译。解释器可以被认为是一种特殊的编译器。

请注意，这不是一件容易的事。您也可以考虑使用[compiler-compiler](http://en.wikipedia.org/wiki/Compiler-compiler)。[Irony](https://github.com/IronyProject/Irony)提供了一种有趣的替代方法。Irony 允许您通过使用运算符重载直接在 C# 中指定语言语法。

# objective-c - Unicode 格式化编译器警告：格式指定类型“无符号短”，但参数的类型为“int”

> ID：11872428
> 
> 赞同：5
> 
> 时间：2012-08-08T20:13:57.550
> 
> 标签：objective-c, ios, xcode, unicode, nsstring

这有点强迫症，但我讨厌收到任何编译器警告。当我更新 XCode 时，我开始收到这个编译器警告：

> 格式指定类型“无符号短”，但参数的类型为“int”

当我尝试使用以下代码包含学位的 Unicode 字符时：

```
currentVal = [NSString stringWithFormat:@"%.2f%C", angleDeg, 0x00B0]; 
```

如何通过更改代码或关闭特定的编译器警告来消除编译器警告？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-08T20:17:53.723

将文字转换为`unichar`：

```
currentVal = [NSString stringWithFormat:@"%.2f%C", angleDeg, (unichar)0x00B0]; 
```

# google-chrome-extension - 后台页面是否可以访问共享 DOM？

> ID：11872430
> 
> 赞同：1
> 
> 时间：2012-08-08T20:14:00.700
> 
> 标签：google-chrome-extension

如果是，如何访问它们？

我说的是 Chrome 扩展程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:17:37.517

不可以。但是通过消息传递（postMessage），您的页面可以与后台页面进行通信。

# oracle-apex - 在进程成功消息中使用 javascript

> ID：11872441
> 
> 赞同：1
> 
> 时间：2012-08-08T20:14:53.553
> 
> 标签：oracle-apex

我正在使用 Apex 4.0.2。我的目标是在我成功填写表格后让我的成功消息在顶部闪烁。我有一个javascript函数：

```
 <script type="text/javascript">
 {var i = 1,timer;
window.onload=function() {
 timer = setInterval('flash()', 500);
 }
 function flash() {
  if (i<10000) {
         if (i%2 == 0) { 
          document.getElementById('flash').style.backgroundColor = '#ffffff';
     } else {
          document.getElementById('flash').style.backgroundColor = '#ffff00';
     }
  } else {
       document.getElementById('flash').style.backgroundColor = '#ffffff';
       clearInterval(timer);
   }
  i++;
 }
 </script> 
```

我最初将此代码放置在表单分支到的页面的 javascript 选项卡上。后来我把它连同对函数的调用一起移到了进程成功消息中

```
<center>
<table id="flash"  BORDER=0 >
<tr>
<td>Success!</td>
</tr>   
</table>
</center> 
```

我从 Firebug 的页面收到错误消息：

```
document.getElementById("flash") is null
document.getElementById('flash').style.backgroundColor = '#ffff00'; 
```

Internet Explorer 告诉我：消息：需要对象

我认为我的问题是成功消息区域对象并不总是存在。只有当我进行调用以显示成功消息时，是否有任何方法可以执行该函数？

提前，非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:31:39.407

javascript 区域有其用途，但我建议使用动态操作，因为它们可以更清晰地概述页面上发生的情况。

**编辑您的页面标题（页面，编辑），或添加到您的 css：**

```
<style>
.flash1{
background-color: blue;
}
.flash2{
background-color: yellow;
}
</style> 
```

**创建一个新的动态动作：**
事件：页面加载，条件：无
作为真正的动作，选择“执行 Javascript 代码”作为动作。
使用 jQuery 获取对象并在类之间切换。它更干净，因为您没有在 javascript 中混入 css/style。

```
var $smsg = $(".uMessageText"), flash;
$smsg.addClass('flash1');
if($smsg.length){
   flash = setInterval(function(){
      $smsg.toggleClass('flash1');
      $smsg.toggleClass('flash2');
      }, 1000);
   setTimeout(function(){
      clearInterval(flash);
      }, 10001);   
}; 
```

这将在 10 秒内每秒更改成功消息上的类。间隔在这 1​​0 秒后被清除。如果没有找到成功消息，则不会开始任何间隔，因为 jQuery 对象将为空（长度=0）。

```
var $smsg = $(".uMessageText") 
```

这是您的成功消息元素的选择器，此示例是主题 23 中该元素的选择器。请注意，成功消息 id 或类取决于您选择的主题和页面模板，您很可能需要更改它。当然，选择器可以是您喜欢的任何元素。

如果你不熟悉 jQuery，我建议你看看它。它默认包含在 apex 中（并且 apex 依赖于它），并且在 javascripting 时是一个非常强大的工具。[http://jquery.com/](http://jquery.com/)

简而言之：按 id: 选择元素`$("#id_attribute_here")`，按类选择`$(".class_name_here")`

# iphone - Xcode App 模拟启动黑屏

> ID：11872442
> 
> 赞同：2
> 
> 时间：2012-08-08T20:14:55.570
> 
> 标签：iphone, ios, ipad, ios-simulator

当我启动我的 iOS 应用程序时，我似乎在设备和模拟器上都只看到黑屏。我正在运行 Xcode 4.4.1，iOS sim 设置为 5.1。你有什么信息可以帮助我吗？我很确定它是 viewController，但我不确定。

没有背景图像 没有颜色变化 基本应用程序（文本框/广告栏/导航栏/表格单元格） - 所有对象都在 Xcode 中可用（还没有弄乱编码）

屏幕截图 img 链接：http: [//imgur.com/T4QUI](http://imgur.com/T4QUI)

代码来了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:34:22.543

我整个早上都在研究这个应用程序，我想我找到了我的问题。所以事实证明问题是我放在主视图上的“广告横幅视图”。删除它，它模拟得很好。

不知道是什么导致它这样做，如果有人知道，我非常感谢多一点学习。

如果你们在这里或在 Xcode 中对我有任何建议，我很乐意听到。

非常感谢您的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-21T12:58:43.667

我知道我迟到了，但我正在发布它，如果它可以帮助别人。

您可能删除了您的初始视图控制器，您可以通过以下方式设置它

1.  转到主故事板
2.  选择要首先显示的 viewController
3.  在属性检查器中，您将看到带有复选框的“Is Initial ViewController”
4.  标记被选中（勾号）并运行它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-08T20:37:55.997

您必须提供图像，iPhone 的图像大小应为 320,480 和 640、960，名称为 Default.png 、 Defauld@2x.png ，并且图像应位于项目的根目录上。或者您可以选择您的图像表单 XCode。 ![选择项目启动图像和图标](../Images/a81337278e9d58c74a5b716f139eddea.png)

# css - 锚定不到页面顶部，但向下 200px

> ID：11872451
> 
> 赞同：7
> 
> 时间：2012-08-08T20:15:07.877
> 
> 标签：css, anchor, padding

我在一个元素上有一个锚点，它使导航跳转到那个点。然而，锚点将其捕捉到视口的顶部。由于做了一个固定的导航，它现在隐藏在后面。

是否可以使锚点不捕捉到视口的顶部，而是在页面下方 200 像素？

网站：[http ://www.haselden.co.uk/james/docs](http://www.haselden.co.uk/james/docs)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T20:22:22.680

我能够通过将 CSS 实际应用于锚点来解决这个问题。所以对于主播我会有这个...

```
<a name="AnchorName" class="anchor"></a> 
```

然后在CSS中我会有这个......

```
.anchor {
   position: relative;
   top: -[number]px;
} 
```

请注意，我注意到锚在不同浏览器中移动的距离有些不准确。因此，可能无法使事物完美对齐。如果您希望它完美定位，您可能需要一些花哨的 jquery 或其他东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T20:39:28.153

肮脏的解决方案，但确实有效，感谢@SteveJenkins 提出这个问题，尽管我添加了一个调整。

```
<a name="AnchorName" class="anchor">anchor text [invisible]</a>

.anchor {
   position: relative;
   top: -[number]px;
   visibility:hidden;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-14T20:37:45.503

现在使用 CSS3 更容易了。详细的解释在这里：[https](https://css-tricks.com/hash-tag-links-padding/) ://css-tricks.com/hash-tag-links-padding/但简短的版本是

```
a::before {
    display: block;
    content: " ";
    margin-top: -70px;
    height: 70px;
    visibility: hidden;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-12-04T01:11:11.237

我有一个类似的问题，并遇到了这个问题。没有答案像我想要的那样工作。我不得不走得更远，想分享我的发现。

先来点上下文。我正在做某种错误解析，将有趣的区域突出显示到 HTML 呈现的源代码查看页面中。有一个允许快速导航的索引表，它位于一个固定的高度可变的标题中。这就解释了为什么我在这个问题页面上结束了。

我的问题是锚**占用了视觉空间**并**移动了源代码**，将文本移动了锚的长度并弄乱了代码格式。我尝试了多种方法使其不占用空间但仍然存在于页面中，以便锚点起作用。最后，我决定选择退格字符而不是`.`（根据@noregt 的评论） 。`&#008;`

每个锚点都是动态生成的`<a name="[some unique name]" class="anchor">&#008;</a>`，然后在固定标头中引用。

一点点 Javascript 有助于动态标题高度和锚点定位（抓取所有锚点并动态调整顶部填充）：

```
<script type="text/javascript"><!--
var height = document.getElementById("head").offsetHeight;
var a = document.getElementsByClassName('anchor');
// src: http://stackoverflow.com/questions/9329446/for-each-over-an-array-in-javascript
for(key in a) {
    if (a.hasOwnProperty(key) && /^0$|^[1-9]\d*$/.test(key) && key <= 4294967294) {
        a[key].style.paddingTop = height + 'px';
    }
}
--></script> 
```

该解决方案非常适用于动态生成的具有可变高度但固定标题的锚点。希望这可以帮助别人。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-08T20:22:21.603

添加一个低于 200px 的隐藏元素，并在其上制作一个锚点。

# eclipse - 多模块项目的sonar-eclipse插件分析

> ID：11872455
> 
> 赞同：3
> 
> 时间：2012-08-08T20:15:27.420
> 
> 标签：eclipse, maven, sonarqube

我有一个形式的 Maven 项目

```
<project>
      <groupId>com.example.project</groupid>
      <artifactId>project</artifactId>
      <module>module1</module>
      <module>module2</module>
      <module>module3</module>
</project> 
```

我能够使用 Maven 运行声纳分析。项目键是 com.example.project:project 我还为 Eclipse 安装了 Sonar 插件，并想使用 Eclipse 分析我的项目。

我的问题是 Eclipse 中的 Package Explorer 将模块显示为项目。这意味着当我单击特定项目/模块并执行“配置”-> 与声纳关联时，我没有选择顶级项目（此处标记为“项目”）而只有模块。

当我尝试输入 groupId 和 artifactId 时，它们与声纳项目密钥 (com.example.project:project) 不匹配。我认为如果我可以尝试将顶级项目（groupdId：“com.example.project”，artifactid：“project”）与模块相关联，那会起作用。

有没有办法做到这一点？

我正在使用 Sonar 3.1 和 Eclipse Indigo。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:01:15.017

您必须将 Eclipse 中的每个项目与 Sonar 中的相应模块相关联。例如，在您的示例中，“module1”Eclipse 项目应该与“con.example.project:module1”Sonar 项目相关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:43:46.897

是的，Fabrice 是绝对正确的。我不确定我第一次是否做错了什么，但即使按照他的指示，我最初也无法让它工作。我什至尝试将 Java Nature 添加到父级并将 Sonar 添加到它无济于事。

最后，我回到其中一个模块，选择配置 -> 与声纳关联。在这里，确保在下拉列表中选择了您的 Sonar 服务器（在 Windows -> Preferences -> Sonar -> Add... 中添加），选中模块旁边的框，然后单击 Find on server。这自动为我填充了 GroupIds 和 ArtifactIds。然后点击完成，你应该很高兴。

# jquery - 如何在没有参数的页面加载时从 jquery 调用页面方法？

> ID：11872457
> 
> 赞同：2
> 
> 时间：2012-08-08T20:15:26.983
> 
> 标签：jquery, asp.net, ajax, webmethod

我只需要在页面加载完成后运行一个方法。

这是我正在使用的js：

```
<script type="text/javascript">
    $(document).ready(function () {
        $.ajax({
            type: "GET",
            url: document.URL + "/LoadAssignees"
        });
    });
</script> 
```

这是我试图运行的方法：

```
[WebMethod()]
protected void LoadAssignees()
{
    //load assignees
    var sw = Stopwatch.StartNew();
    sw.Start();
    cboAssignees.DataSource = Uti.GetAssigneeList(_currentUser, 1, false);
    sw.Stop();
    cboAssignees.DataTextField = "Name";
    cboAssignees.DataValueField = "Guid";
    cboAssignees.DataBind();

    Response.Write(string.Format("Assignee load time: {0}", sw.ElapsedMilliseconds));
} 
```

我觉得我做对了。我没有收到任何错误，但什么也没发生。我在方法上设置了一个断点，它没有被命中，所以我猜我的 ajax 调用不正确。我错过了什么？

附带说明一下，我要做的是在页面完成渲染后立即异步运行一个方法。如果您能提出更好的方法来实现这一点，那也对我有用:) 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:22:41.720

感觉，

您需要在`$.ajax()`函数调用中处理响应。在您的情况下，我将使用您可以`jQuery.ajax()`在 jquery.com 上的描述中找到的“成功”参数。

这是因为后面代码中的 Response.Write 方法不会写回调用它的页面，而是写回 ajax 函数本身。如果没有处理该响应，您将一无所获。

因此，例如：

```
 $.ajax({
        type: "GET",
        url: document.URL + "/LoadAssignees",
        success: function(data) {
            alert(data);
        }
    }); 
```

***编辑***

您还应该尝试在 Ajax 调用中为您的 web 方法设置 URL 的不同方法：如果您的页面的 url 是`http://mydomain.com/dir1/pagex.aspx`，那么您的 ajax 将尝试联系`http://mydomain.com/dir1/pagex.aspx/LoadAssignees`

希望有帮助！

*   马特

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:23:29.667

是的，看起来你的访问修饰符太严格了：

> 具有此属性集的类中的方法称为 XML Web 服务方法。方法和类必须是公共的并且在 ASP.NET Web 应用程序中运行。

这来自此处的“备注”部分：http: [//msdn.microsoft.com/en-us/library/system.web.services.webmethodattribute.aspx](http://msdn.microsoft.com/en-us/library/system.web.services.webmethodattribute.aspx)

# macos - Perl 找不到在 @INC 中的模块

> ID：11872458
> 
> 赞同：2
> 
> 时间：2012-08-08T20:15:30.773
> 
> 标签：macos, perl

我正在我的 OS X 10.7 Mac 上编写 Perl 模块，当我尝试使用 DBI 模块时遇到了错误。我能够将问题与我的模块分开并通过以下方式重现它：

```
[sean@mac:~]$ perl -e 'use DBI;'
Can't locate DBI.pm in @INC (@INC contains:
    /System/Library/Perl/Extras/5.12/darwin-thread-multi-2level
    /opt/local/lib/perl5/site_perl/5.12.4
    /darwin-multi-2level
    /opt/local/lib/perl5/site_perl/5.12.4
    /opt/local/lib/perl5
    /vendor_perl/5.12.4/darwin-multi-2level
    /opt/local/lib/perl5/vendor_perl/5.12.4
    /opt/local/lib/perl5/5.12.4/darwin-multi-2level
    /opt/local/lib/perl5/5.12.4
    /opt/local/lib/perl5/site_perl
    /opt/local/lib/perl5/vendor_perl .) at -e line 1.
BEGIN failed--compilation aborted at -e line 1. 
```

这令人费解的原因是：

```
[sean@mac:~]$ find /System/Library/Perl/Extras/5.12/darwin-thread-multi-2level -iname '*dbi*' -maxdepth 2
  /System/Library/Perl/Extras/5.12/darwin-thread-multi-2level/auto/DBI
  /System/Library/Perl/Extras/5.12/darwin-thread-multi-2level/Bundle/DBI.pm
  /System/Library/Perl/Extras/5.12/darwin-thread-multi-2level/DBI
  /System/Library/Perl/Extras/5.12/darwin-thread-multi-2level/DBI.pm
  /System/Library/Perl/Extras/5.12/darwin-thread-multi-2level/dbixs_rev.pl 
```

Perl 应该在的地方有一个 DBI 文件夹和一个 DBI.pm 模块！`@INC`为什么Perl 找不到包含在路径中的文件？

通过扭动 Perl 的手臂，我找到了一种解决方法：当我在`use lib '/System/Library/Perl/Extras/5.12/darwin-thread-multi-2level';`我的模块中添加一行时，Perl 似乎正确地找到了 DBI。但是，在这种情况下，`perl -d foo.pm`会导致以下结果：

```
 dyld: lazy symbol binding failed: Symbol not found: _Perl_Gthr_key_ptr
    Referenced from: /System/Library/Perl/Extras/5.12/darwin-thread-multi-2level/auto/DBI/DBI.bundle
    Expected in: flat namespace

  dyld: Symbol not found: _Perl_Gthr_key_ptr
    Referenced from: /System/Library/Perl/Extras/5.12/darwin-thread-multi-2level/auto/DBI/DBI.bundle
    Expected in: flat namespace

  Trace/BPT trap: 5 
```

我也不知道如何解释它，所以我对我的解决方法不满意 - 它仍然有“如果你不明白的话，将来会有一个潜在的问题会成为一个令人讨厌的惊喜”的味道出去。”

为什么 DBI 没有正确导入，“惰性符号绑定”调试消息是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T03:22:08.717

这通常是我在使用多个版本的 perl 和为一个版本编译的模块时遇到的问题，然后对另一个版本不起作用但仍然坐在 @INC 中（我自己的错误是有时没有为每个 perl 设置 local::lib 路径- 由于我的健忘，前几天在 EV 上遇到了这个问题）。

最好的测试方法是（备份当前模块）从@INC 路径中删除模块，然后尝试重新编译它以查看是否可以解决问题。

我推荐[cpanm](https://github.com/miyagawa/cpanminus)来满足您的 cpan 和 perl 模块安装需求:)

# matlab - 如何将多个 .png 文件转换为 .mat 文件

> ID：11872464
> 
> 赞同：1
> 
> 时间：2012-08-08T20:16:01.090
> 
> 标签：matlab, file, png, format-conversion

空间数据 (.png)

```
001.png
002.png
003.png
.
.
.
00n.png 
```

至

```
001.mat
002.mat
003.mat
.
.
.
00n.mat 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T21:06:21.083

补充 EitanT 的答案，如果您的文件没有此类文件名限制，例如：

```
file01.png
file02.png
fls1.png
fls2.png
pics001.png
pics002.png 
```

您可以使用`dir`函数，这为您提供了更多的灵活性。例如：

```
filenames = dir('*.png'); %# get information of all .png files in work dir
n  = numel(filenames);    %# number of .png files

for i = 1:n
    A = imread( filenames(i).name );

    %# gets full path, filename radical and extension
    [fpath radical ext] = fileparts( filenames(i).name ); 

    save([radical '.mat'], 'A');                          
end 
```

`fileparts`是一个 MATLAB 函数，它分解文件路径中的文件名、部首和扩展名。*例如*，如果我有文件`/home/user/photo.png`，这个函数将返回：

```
fpath   = /home/user
radical = photo
ext     = .png 
```

**文件格式错误**

OP收到以下错误：

> ？？？在 387 处使用 ==> imread 时出错 无法确定文件格式。==> PNG2MATFiles 中的错误 5 A = imread( filenames(i).name );

我已经下载了他的原始 *.png 图像并使用`file`linux 命令对其进行了测试。我的输出：

> FY2E_2011_09_01_00_01_ir1_proj.png: Matlab v5 mat-file (little endian) version 0x0100 FY2E_2011_09_01_01_01_ir1_proj.png: Matlab v5 mat-file (little endian) version 0x0100 FY2E_2011_09_01_02_01_ir1_proj.png: Matlab v5 mat-file (little endian) version 0x0100 FY2E_2011_09_01_03_01_ir1_proj.png: Matlab v5 mat-file (little endian) version 0x0100 FY2E_2011_09_01_04_01_ir1_proj.png: Matlab v5 mat-file (little endian) version 0x0100 FY2E_2011_09_01_05_01_ir1_proj.png: Matlab v5 mat-file (little endian) version 0x0100 FY2E_2011_09_01_06_01_ir1_proj.png: Matlab v5 mat-file ( little endian) 版本 0x0100 FY2E_2011_09_01_07_01_ir1_proj.png: Matlab v5 mat-file (little endian) 版本 0x0100 FY2E_2011_09_01_08_01_ir1_proj.png: Matlab v5 mat-file (little endian) 版本 0x0100 FY2E_2011_ir1_proj0.png_2011_ir1_proj_09_Matlab v5 mat-file (little endian) 版本 0x0100 FY2E_2011_09_01_10_01_ir1_proj.png: Matlab v5 mat-file (little endian) 版本 0x0100

`imread`无法打开这些文件，`'png'`因为它们已经存储为`.mat`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T20:22:22.390

尝试这个：

```
for i = 1:n
    A = imread(['00', num2str(i), '.png'], 'png');  %# Read PNG file
    save(['00', num2str(i), '.mat'], 'A');          %# Store data to MAT file
end 
```

# java - java中的手写识别

> ID：11872469
> 
> 赞同：1
> 
> 时间：2012-08-08T20:16:17.067
> 
> 标签：java, package, ocr, handwriting

我希望在我制作的软件中使用手写识别和 OCR。我想知道是否有人知道任何（最新的）包进行 OCR 或手写识别。

我正在寻找更多免费套餐，但我也对商业套餐感兴趣。

我看过 09 年的其他一些文章，比如[这篇](https://stackoverflow.com/questions/768664/recommendations-for-handwriting-recognition-libraries-packages-in-java)文章，但我找不到任何看起来合理的文章。

用 C# 编写并使用内置的 Windows 7 手写分析器会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:20:59.817

试试 google 的[Tesseract OCR](http://code.google.com/p/tesseract-ocr/)引擎。这可能是可用的最准确的开源 OCR 引擎之一。

# c# - 多个线程写入同一个 dll 中的单个数据结构。（C＃）

> ID：11872475
> 
> 赞同：0
> 
> 时间：2012-08-08T20:16:48.903
> 
> 标签：c#, multithreading, dll, static, filestream

我需要设置一个从不同进程和线程接收数据（文本字符串）的 dll。将其放入线程中，将该数据提供给队列以进行排序（来自所有线程的字符串），然后将其存储在文件中。

我可以设置一个dll。我可以设置线程。我可以使我的线程线程安全。我可以将数据放入文件和文件流中。但问题仍然存在：

• 如何设置一组可能是静态的数据，以便多个线程和进程将文本添加到 dll 中的同一个共享数据集？我可以以同样的方式设置文件流吗？如何？

• 单独的进程能否以这种方式使用单个 dll？我认为一个单独的进程将无法看到在 dll 中找到的不同进程的静态数据。有可能吗，还是我必须考虑做一些更复杂的事情？

**编辑：** 非常感谢大家。虽然我可能没有确切的解决方案，但您的评论为我指明了一个有用的方向，并消除了我曾经遇到的一些困惑，而这正是我所需要的。我认为这个问题得到了回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:26:15.683

我可能误解了您的目标，但根据我所阅读的内容，我可能会建议对流程和线程的结构进行审查。DLL 是每进程的野兽，在每个相关应用程序的进程空间中都加载了一个库。***要创建一个从多个进程***收集数据的库，需要某种进程间通信机制。交叉**螺纹**边界是一回事，因为它们是在父进程中管理的，但跨越进程边界是另一回事。Windows 通常不希望进程随意管理其他进程的进程空间。也许，我在想象某种提供感兴趣对象的进程外服务器，因此能够跨多个进程管理它们，但这可能会走上一条不相关的道路。再次，也许我误解了目标，如果我是，我很抱歉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:56:05.423

一种可能的解决方案是运行单个进程，该进程通过多线程处理提交的 HttpListener 接受数据。线程可以将事件返回给主线程，主线程可以将提供的数据添加到列表或其他数据结构中。

在添加或操作数据时锁定（）数据结构可能是一个好主意，以确保您是线程安全的。

此设置将要求您运行单独的进程（可能是服务？），但根据您的要求，无论您使用何种途径，您似乎都必须这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T21:00:07.543

2）静态与过程：这绝对取决于“静态数据”的确切含义。

对于 DLL，“静态数据”是放置在模块内某处的一组字节，由只读标志保护。加载 DLL 的人会看到相同的字节，因为它们是 DLL 本身的一部分。当然，这些数据大多是不可变的，并且在编译/构建时确定。例如，这是如何在程序集中保存和使用“资源”的。

对于 C# 代码，“静态”数据——字段、属性和事件——只是一个**全局变量**，它们以命名空间和类的形式封装了一些方便的名称。它们不是完全全局的：.Net 有一个 AppDomain 的概念，类似于 JRE 的类加载器，它允许您在同一个进程中运行单独的 .Net 应用程序 - 并且这些应用程序不会覆盖彼此的内存，即使它们完全运行具有相同静态字段的相同代码。更重要的是，您可以使用 [ThreadLocal] 属性标记一个静态字段，以使该字段不是“全局全局”而只是“每个线程全局”，并且您的应用程序中的每个线程都将有其自己单独的“静态”版本字段。等等等等。

如果您说的是进程，则没有办法以我怀疑您想到的形式“通过 DLL 共享和通信”。DLL 共享就是共享公共代码。根据“进程”的定义，数据内存是分开的，数据当然驻留在进程的内存中。

在系统的较低级别上讲，实际上在虚拟内存子系统级别存在一些共享。如果一个代码模块是共享的，系统可能会注意到相同的 99 个进程使用相同的 DLL 文件，并且它可能决定只加载一次，并将该文件**的单个页面映射到****多个进程内存的相似页面**. 这样，它被加载一次并多次使用，并且发生了真正的共享。但是请注意，代码是加载和共享的，而不是动态分配的内存。较低级别的语言能够“利用”这种共享，它们实际上能够解除代码的只读保护并写入代码内存，因此它们的数据会自动传播到共享相同页面的所有进程，但这是目前被认为是邪恶的:)

抛开内存映射不谈，所有这一切都意味着拥有 DLL 对您的通信没有多大帮助。

1）对于线程 - 有可能并且你听起来知道如何，对于进程 - 你不能。时期。看上面。

现在，要解决您的问题：其核心在于您希望在进程之间进行通信。该主题简称为“IPC”或“进程间通信”。首先，处理它的经典方法是：

*   共享内存（将同一个内存页面映射到几个进程，在 C# 中很难看）
*   文件（9 个进程尝试以正确的方式读/写同一个文件）
*   网络/套接字（tcp、udp .. 我认为不需要解释）
*   管道（具有两侧的特殊文件：一侧用于写入数据，一侧用于读取数据；一侧用于一个进程，另一侧用于第二个进程，并且您有一个“通道”，就像单向套接字连接一样）
*   通用数据库（进程写入相同的表，从相同的表读取=它们可以相互通信）
*   (web)services (network/sockets/pipes - 用漂亮的 WSDL 接口和代理类封装)

等等。如果您很少考虑如何使用它 - 它变得非常简单：您准备一个特殊的进程来收集来自其他人的所有数据，例如通过管道或网络/套接字连接，然后该进程简单地完成工作一种典型的方式。这是您的“经纪人”或“服务”流程。很难避免这样的过程，因为您希望数据被收集并统一排序 - 必须安排一些东西来安排排序，并且必须有（大部分）手头的数据来执行它。记住这一点后，您可能会注意到服务流程不必分开。您的“工作”进程之一（生成数据）也可以处理排序工作。所需要的只是以某种方式对其进行编排，以便有一个数据接收器，并且每个人都会知道谁是水槽。我将在这里停止故事。

如果不知何故，您开始想知道为什么只有一个接收器以及为什么一个进程必须完全了解所有要排序的数据——实际上这不是必需的。在多核/多进程机器（甚至分布式平台）上使用了相当多的智能排序算法，它们能够对部分进行排序，然后将所有内容粘合在一起，因此几乎可以立即将其作为一个整体进行排序。它们比简单的“通用全局数据接收器服务”更难理解，但是一旦你理解了它们，在基于文件的存储上编写这样的算法可能会比在套接字或管道上编写 IPC 更快/更简单。

但是，利用 C# 库，我想通过**web 服务、.Net Remoting 或通用数据库**（sql express？mysql？）进行 IPC 对您来说将是一个好的开始。当您对编排许多进程感到满意时，将管道、套接字、memmap 和其他东西留到以后。

选择一种具体的沟通机制并询问它，它会更容易找到/解释。

# java - for-loop NullPointerException 中的 Java 迭代器

> ID：11872482
> 
> 赞同：1
> 
> 时间：2012-08-08T20:17:33.443
> 
> 标签：java, iterator, linked-list, nullpointerexception

我不明白为什么使用以下代码抛出**java.lang.NullPointerException （在这一行：** ***iterator = chapterKeywords[z].iterator();***）：

```
Iterator<String> iterator;

        for (int z = 0; z < chapterKeywords.length; z++) {

            try {

                iterator = chapterKeywords[z].iterator();
                //exception thrown here after first iteration (i.e., when z = 1) and subsequent ones

                while (iterator.hasNext()) {

                    System.out.println(iterator.next());

                }

            } catch (Exception e) {
               ;
            }

        } 
```

虽然我得到 NullPointerException，但代码完全执行。仅供参考，chapterKeywords 是一个 LinkedList 数组，其中每个数组元素都是一个 LinkedList（例如，singleChapterKeywords）。

```
LinkedList<String>[] chapterKeywords = new LinkedList[numFiles];
LinkedList<String> singleChapterKeywords = new LinkedList<String>(); 
```

尽管该程序似乎运行良好，但我想了解为什么会抛出 NullPointerException，因为我想完全消除它。基本上，在 for 循环中的每次迭代开始时都会引发异常。我修改了代码以在循环内创建一个新的迭代器，创建一个迭代器数组等，但它们都产生相同的结果：**NullPointerException** at ***iterator = chapterKeywords[z].iterator();*** .

非常感谢任何有关消除此异常的帮助或见解。

所以，这是我的问题：

***为什么将迭代器变量分配给新的迭代器时，每次后续迭代都会抛出 NullPointerException？***

***我怎样才能消除这个异常？***

再次，TIA！

**更新：** *我认为*LinkedList*被*正确填充并且工作正常，但是，唉，事实并非如此！感谢大家的无量帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T20:20:48.247

看起来您已经填充了列表，但错过了将（部分）添加到数组中。

这将揭示您的问题：

```
for (int z = 0; z < chapterKeywords.length; z++) {
   if (chapterKeywords[z] == null) {
      System.out.println("No list found at array index " + z);
      continue;
   }
   iterator = chapterKeywords[z].iterator();
   while (iterator.hasNext()) {
      System.out.println(iterator.next());
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:21:57.847

ChapterKeywords[z] 为空。它肯定存在，否则你会得到一个越界错误，但你实际上并没有调用过类似 chapterKeywords[z] = new String()..

# android - 获取用户所在国家/地区的可靠方法？

> ID：11872483
> 
> 赞同：19
> 
> 时间：2012-08-08T20:17:35.270
> 
> 标签：android, locale, setting

我通常从设备的语言中获取国家/地区。它有效，但现在我必须承认巴西。而且大多数设备只有葡萄牙语（pt_PT），没有葡萄牙语（巴西）选项。

我检查了这个线程：[我在哪里？- 获取国家](https://stackoverflow.com/questions/3659809/where-am-i-get-country)

方法

```
 String locale = context.getResources().getConfiguration().locale.getCountry();

 String locale = context.getResources().getConfiguration().locale.getDisplayCountry(); 
```

仍然只有语言，没有帮助。

还有关于 sim 卡的建议，但我不确定这是否会可靠地工作（所有 sim 卡都有这个唯一标识吗？），它也有点不完全是我需要的，因为用户无法更改它（如果它是一个设置就是这种情况），它将排除使用没有 sim 卡的设备的用户（也许他们只使用 WLAN）。

还有地理定位建议，但这可能不适用于已停用它的设备。还是我错了？

如果没有其他帮助，我会在我的应用程序中进行对话框或菜单设置，以便用户可以在那里选择它。但我首先想确认该设备是否有任何可靠的可能性。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-08T20:23:28.527

您可以[从电话网络](http://developer.android.com/reference/android/telephony/TelephonyManager.html#getNetworkCountryIso%28%29)中提取位置：

```
TelephonyManager.getNetworkCountryIso() 
```

或[从 SIM 卡](http://developer.android.com/reference/android/telephony/TelephonyManager.html#getSimCountryIso%28%29)：

```
TelephonyManager.getSimCountryIso() 
```

或者，如果你[有用户的电话号码](https://groups.google.com/forum/?fromgroups#!topic/android-developers/wqIx7ESpRRw%5B1-25%5D)，你也许可以通过[这个数据](http://en.wikipedia.org/wiki/List_of_country_calling_codes)将它与国家相匹配。

理想情况下，您可以使用所有这三个（按某种顺序，可能是 SIM、电话号码，然后是网络），如果都不起作用，则使用反向地理定位作为最后的手段。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-08T20:38:58.377

尝试这个：

```
 TelephonyManager teleMgr = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
 if (teleMgr != null){
     countryISOCode = teleMgr.getSimCountryIso();
 } 
```

现在，根据此 Wikipedia[条目](http://en.wikipedia.org/wiki/ISO_3166-1)`countryISOCode`，将包含以下类似于 ISO 3166 国家/地区代码之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T20:23:52.247

地理位置将是最有效和不引人注目的。您始终可以使用地理位置，如果用户禁用它，则显示您的对话框询问他们的国家。你对用户的信息越少越好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-18T20:09:50.660

```
TelephonyManager mTelephonyManager = (TelephonyManager) getSystemService(TELEPHONY_SERVICE);
mTelephonyManager.getNetworkCountryIso(); 
```

正如 Eric 所回答的，上面的代码是最好的方法。另外值得注意的是，

```
mTelephonyManager.getSimCountryIso() 
```

不应使用，因为这将指示 SIM 提供商的本国（例如，Vodaphone UK SIM 将返回“gb”，Vodaphone 德国 SIM 将返回“de”）而不是设备的当前位置（国家/地区）。当用户正在漫游时，这种差异是显着的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-12-12T22:32:30.057

它对我有用。

```
String countryISOCode;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    TelephonyManager teleMgr = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
    if (teleMgr != null){
        countryISOCode = teleMgr.getSimCountryIso();
    } 
```

......................

# java - 如何更改 Java 程序单个部分的外观

> ID：11872492
> 
> 赞同：7
> 
> 时间：2012-08-08T20:17:43.433
> 
> 标签：java, swing, user-interface, look-and-feel, jfilechooser

所以我正在制作一个程序选择工具，目前我喜欢一切看起来只有 java 外观和感觉的方式。我唯一要更改的是 Windows 的 JFileChooser 外观。当我调用文件选择器并告诉它改变外观和感觉时，它什么也没做。当我在程序启动时调用它时，它使按钮看起来很糟糕。所以谷歌没有任何东西，我不知道如何让它工作。请帮忙！让我知道哪些代码是相关且有用的。提前致谢！

编辑：所以这里有一些与 JFileChooser 相关的代码以及它是如何启动的：

```
public class Start(){
    public static JButton assignButton = new JButton(new AbstractAction(
        "Assign") {
    public void actionPerformed(ActionEvent e) {
        AssignWindow.run();
    }
});
}

public class AssignmentWindow(){
   public static void run() {
    Dialogs.assignmentInfo();

    bgImage = aw.getImage("files/background.png");

            //aw is the object of this class
    aw.makeFrame();     //makes the jframe for all the buttons to sit.
    aw.setGraphics();   //assigns a different graphics variable

    aw.fileChooser();
}

public void fileChooser() {
    JFileChooser jfc = new JFileChooser();
    jfc.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);

            // here is where i want to set the look and feel....

    if (jfc.showDialog(null, "Select") == JFileChooser.APPROVE_OPTION) {
        File file = jfc.getSelectedFile();
        fileDir = file.getPath();
    } else {
        Dialogs.msg("You cancled selecting a file. Returning to file frame...");
        AssignWindow.destroy();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-08T20:58:52.150

所需要的只是在创建 JFileChooser 对象时更改 UIManager，然后将其设置回原来的状态，或者您可以只捕获异常，但这是不好的做法。

```
public void stuff(){
    JFileChooser chooser = null;
    LookAndFeel previousLF = UIManager.getLookAndFeel();
    try {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        chooser = new JFileChooser();
        UIManager.setLookAndFeel(previousLF);
    } catch (IllegalAccessException | UnsupportedLookAndFeelException | InstantiationException | ClassNotFoundException e) {}
    //Add whatever other settings you want to the method
    chooser.showOpenDialog(frame);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-08T20:34:21.993

是的，这是可能的。您可以手动设置 UI：

```
JFileChooser jfc = new JFileChooser();
WindowsFileChooserUI wui = new WindowsFileChooserUI(jfc);
wui.installUI(jfc);
jfc.showOpenDialog(parentComponent); 
```

这将为文件选择器设置 Windows UI，但保留所有其他组件的外观。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-08T20:38:16.910

push `Cancel JButton`，从`Metal`to`System`和`Nimbus Look and Feel`

必须通过代码行调用对已经可见容器的所有更新

```
SwingUtilities.updateComponentTreeUI(Top-Level Container); 
```

代码

```
import java.io.File;
import javax.swing.*;
import javax.swing.filechooser.FileFilter;

class ChooserFilterTest {

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                String[] properties = {"os.name", "java.version", "java.vm.version", "java.vendor"};
                for (String property : properties) {
                    System.out.println(property + ": " + System.getProperty(property));
                }
                JFileChooser jfc = new JFileChooser();
                jfc.showOpenDialog(null);
                jfc.addChoosableFileFilter(new FileFilter() {

                    @Override
                    public boolean accept(File f) {
                        return f.isDirectory() || f.getName().toLowerCase().endsWith(".obj");
                    }

                    @Override
                    public String getDescription() {
                        return "Wavefront OBJ (*.obj)";
                    }

                    @Override
                    public String toString() {
                        return getDescription();
                    }
                });
                int result = JOptionPane.showConfirmDialog(null, "Description was 'All Files'?");
                System.out.println("Displayed description (Metal): " + (result == JOptionPane.YES_OPTION));
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                    SwingUtilities.updateComponentTreeUI(jfc);
                } catch (Exception e) {
                    e.printStackTrace();
                }
                jfc.showOpenDialog(null);
                result = JOptionPane.showConfirmDialog(null, "Description was 'All Files'?");
                System.out.println("Displayed description (System): " + (result == JOptionPane.YES_OPTION));
                result = JOptionPane.showConfirmDialog(null, "Description was 'All Files'?");
                System.out.println("Displayed description (Metal): " + (result == JOptionPane.YES_OPTION));
                try {
                    for (UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                        if ("Nimbus".equals(info.getName())) {
                            UIManager.setLookAndFeel(info.getClassName());
                            SwingUtilities.updateComponentTreeUI(jfc);
                            break;
                        }
                    }
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (javax.swing.UnsupportedLookAndFeelException ex) {
                }
                jfc.showOpenDialog(null);
                result = JOptionPane.showConfirmDialog(null, "Description was 'All Files'?");
                System.out.println("Displayed description (System): " + (result == JOptionPane.YES_OPTION));
            }
        };
        SwingUtilities.invokeLater(r);
    }

    private ChooserFilterTest() {
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-08T20:28:18.890

你应该阅读[Look and Feel](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)。
此外，我认为每个组件不能有不同的 L&F。至少我从未见过 L&F 不统一的应用程序

# python - 带 Z(X,Y) 的轮廓

> ID：11872496
> 
> 赞同：0
> 
> 时间：2012-08-08T20:18:10.100
> 
> 标签：python, numpy, matplotlib

我有

```
from pylab import *

###FUNCTIONS##
def LOSS(y0,y1):
    return sum(abs(y0-y1))

def genuchten(t,C,k):
    return 1/(1+(C/t)**k)**(1-1/k)

###MAIN#######
if __name__ == '__main__':
    t0 = linspace(0,10,100)
    f0 = genuchten(t0,3,3)

    x = linspace(1,10,10)
    y = linspace(1,10,10)
    X,Y = meshgrid(x,y)

    Z = zeros(shape(X))
    for i in range(len(x)):
        for j in range(len(y)):
            f = genuchten(t0,X[i][j],Y[i][j])
            Z[i][j] = LOSS(f0,f)

    contourf(X,Y,Z)
    show() 
```

这行得通，但我觉得必须有更直接的方法。似乎 MATLAB 有一个 ARRAYFUN 函数可以自动执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T00:56:37.210

您可以通过使用 ndarray 的广播来快速计算：

```
from pylab import *

def genuchten(t,C,k):
    return 1/(1+(C/t)**k)**(1-1/k)

###MAIN#######
t0, Y, X = ogrid[0:10:100j, 1:10:10j, 1:10:10j]
f0 = genuchten(t0, 3, 3)
f = genuchten(t0, X, Y)
Z = sum(abs(f0-f), axis=0)
contourf(X.ravel(), Y.ravel(), Z)
show() 
```

![在此处输入图像描述](../Images/f2b5bfc0faaa1d3b7074d3fc7769fc6e.png)

# r - 从 data.table 到 eval 的函数创建表达式

> ID：11872499
> 
> 赞同：23
> 
> 时间：2012-08-08T20:18:24.190
> 
> 标签：r, data.table

鉴于`data.table`数据：

```
dat <- data.table(x_one=1:10, x_two=1:10, y_one=1:10, y_two=1:10) 
```

我想要一个在给定“根”名称的情况下在两个相似行之间创建表达式的函数，例如`x_one - x_two`.

```
myfun <- function(name) {
  one <- paste0(name, '_one')
  two <- paste0(name, '_two')

  parse(text=paste(one, '-', two))
} 
```

现在，只使用一个根名称可以按预期工作，并产生一个向量。

```
dat[, eval(myfun('x')),]

[1] 0 0 0 0 0 0 0 0 0 0 
```

但是，尝试使用该`list`技术为该输出分配名称失败：

```
dat[, list(x_out = eval(myfun('x'))),]

Error in eval(expr, envir, enclos) : object 'x_one' not found 
```

我可以通过添加一个来“解决”这个问题，`with(dat, ...)`但这似乎几乎没有 data.table-ish

```
dat[, list(x_out = with(dat, eval(myfun('x'))),
           y_out = with(dat, eval(myfun('y')))),]

    x_out y_out
 1:     0     0
 2:     0     0
 3:     0     0
 4:     0     0
 5:     0     0
 6:     0     0
 7:     0     0
 8:     0     0
 9:     0     0
10:     0     0 
```

如果我想要像上面那样的输出，生成和评估这些表达式的正确方法是什么？

如果有帮助，`sessionInfo()`输出如下。我记得能够做到这一点，或者接近它的东西，但它已经有一段时间了，并且`data.table`已经更新了......

```
R version 2.15.1 (2012-06-22)

Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C               LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8    LC_PAPER=C                 LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C             LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] graphics  grDevices utils     datasets  stats     grid      methods   base     

other attached packages:
 [1] Cairo_1.5-1      zoo_1.7-7        stringr_0.6.1    doMC_1.2.5       multicore_0.1-7  iterators_1.0.6  foreach_1.4.0   
 [8] data.table_1.8.2 circular_0.4-3   boot_1.3-5       ggplot2_0.9.1    reshape2_1.2.1   plyr_1.7.1      

loaded via a namespace (and not attached):
 [1] codetools_0.2-8    colorspace_1.1-1   dichromat_1.2-4    digest_0.5.2       labeling_0.1       lattice_0.20-6    
 [7] MASS_7.3-20        memoise_0.1        munsell_0.3        proto_0.3-9.2      RColorBrewer_1.0-5 scales_0.2.1      
[13] tools_2.15.1 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-08T23:02:06.030

一种解决方案是将 放在`list(...)`函数输出中。

我倾向于使用`as.quoted`，从@hadley`.()`在`plyr`包中实现的方式中窃取。

```
library(data.table)
library(plyr)
dat <- data.table(x_one=1:10, x_two=1:10, y_one=1:10, y_two=1:10) 
myfun <- function(name) {
  one <- paste0(name, '_one')
  two <- paste0(name, '_two')
  out <- paste0(name,'_out')
 as.quoted(paste('list(',out, '=',one, '-', two,')'))[[1]]
}

dat[, eval(myfun('x')),]

#    x_out
# 1:     0
# 2:     0
# 3:     0
# 4:     0
# 5:     0
# 6:     0
# 7:     0
# 8:     0
# 9:     0
#10:     0 
```

一次做两列你可以调整你的电话

```
myfun <- function(name) {
  one <- paste0(name, '_one')
  two <- paste0(name, '_two')
  out <- paste0(name,'_out')
  calls <- paste(paste(out, '=', one, '-',two), collapse = ',')

 as.quoted(paste('list(', calls,')'))[[1]]
}

dat[, eval(myfun(c('x','y'))),]

#   x_out y_out
# 1:     0     0
# 2:     0     0
# 3:     0     0
# 4:     0     0
# 5:     0     0
# 6:     0     0
# 7:     0     0
# 8:     0     0
# 9:     0     0
# 0:     0     0 
```

至于原因……

在此解决方案中，对 ' 的整个调用`list(..)`在作为 data.table 的 parent.frame 中进行评估。

里面的相关代码`[.data.table`是

```
if (missing(j)) stop("logical error, j missing")
jsub = substitute(j)
if (is.null(jsub)) return(NULL)
jsubl = as.list.default(jsub)
if (identical(jsubl[[1L]],quote(eval))) {
    jsub = eval(jsubl[[2L]],parent.frame())
    if (is.expression(jsub)) jsub = jsub[[1L]]
} 
```

如果（在你的情况下）

```
j = list(xout = eval(myfun('x'))) 

##then

jsub <- substitute(j) 
```

是

```
 #  list(xout = eval(myfun("x"))) 
```

和

```
as.list.default(jsub)
## [[1]]
## list
## 
## $xout
## eval(myfun("x")) 
```

`jsubl[[1L]]`是这样`list`,`jsubl[[2L]]`是`eval(myfun("x"))`

所以`data.table`没有找到一个电话`eval`，也不会适当地处理它。

这将起作用，强制在正确的 data.table 中进行第二次评估

```
# using OP myfun
dat[,list(xout =eval(myfun('x'), dat))] 
```

一样的方法

```
eval(parse(text = 'x_one'),dat)
# [1]  1  2  3  4  5  6  7  8  9 10 
```

工作但

```
 eval(eval(parse(text = 'x_one')), dat) 
```

才不是

### 2013 年 10 月 4 日编辑

尽管将其`.SD`用作环境可能更安全（但速度较慢），因为它会变得健壮`i`，`by`例如

```
dat[,list(xout =eval(myfun('x'), .SD))] 
```

* * *

从马修编辑：

+10 以上。我自己无法更好地解释它。更进一步，我有时会构建*整个*data.table 查询，然后再构建`eval`。有时，这种方式可能会更健壮一些。我把它想象成 SQL；即，我们经常构造一条动态的SQL语句，发送给SQL服务器执行。当您也在调试时，有时也更容易查看构造的查询并在浏览器提示符下运行它。但是，有时这样的查询会很长，因此传入`eval`,`i`或者`j`通过`by`不重新计算其他组件来提高效率。像往常一样，有很多方法可以给猫剥皮。

考虑整个查询的微妙原因`eval`包括：

1.  分组速度快的一个原因是它首先检查`j`表达式。如果它是 a `list`，它会删除名称，但会记住它们。然后它是每个组`eval`的*未命名*列表，然后在最终结果的末尾恢复名称一次。其他方法可能很慢的一个原因是一遍又一遍地为每个组重新创建相同的列名向量。虽然定义的越复杂`j`（例如，如果表达式不精确地以 开头`list`），就越难在内部编写检查逻辑。这方面有很多测试；`eval`例如，如果名称删除不起作用，则结合, 和详细报告。但是，构建一个“简单”查询（完整查询）和`eval`由于这个原因，这可能会更快、更健壮。

2.  在 v1.8.2 中，现在对`j`:进行了优化`options(datatable.optimize=Inf)`。到目前为止，这检查`j`并修改了它以优化`mean`和成语。`lapply(.SD,...)`这产生了数量级的差异，意味着用户需要知道的东西更少（例如，一些 wiki 点现在已经消失了）。我们可以做更多这样的事情；例如，如果[2014 年 9 月更新 - 现在在 v1.9.3 中实施] ，`DT[a==10]`可以自动优化。但是同样，内部优化变得更难在内部编码，而不是它包含对 的调用，例如。所以整个查询可能会更好`DT[J(10)]``key(DT)[1]=="a"``DT[,mean(a),by=b]``DT[,list(x=eval(expr)),by=b]``expr``mean``eval``datatable.optimize`. 打开详细报告它正在做什么，如果需要可以关闭优化；例如，测试它产生的速度差异。

根据评论，已添加 FR#2183：“在 DT 范围内将 j=list(xout=eval(...)) 的 eval 更改为 eval”。感谢您的强调。`j`这就是我的意思`eval`是嵌套在表达式中的那种复杂性。但是，如果`j` *以 开头*，`eval`则要简单得多，并且已经编码（如上所示）并经过测试，并且应该进行优化。

如果有一个要点，那就是：`DT[...,verbose=TRUE]`当用于`options(datatable.verbose=TRUE)`涉及.`data.table``eval`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T22:32:51.773

这感觉不太理想，但这是我能想到的最好的。我会把它扔在那里，看看它是否有助于得出更好的反应......

```
vars <- c("x", "y")
res <- do.call(data.table, (lapply(vars, function(X) dat[,eval(myfun(X)),])))
setnames(res, names(res), paste0(vars, "_out"))

## Check the results
head(res, 3)
#    x_out y_out
# 1:     0     0
# 2:     0     0
# 3:     0     0 
```

我不喜欢的部分`lapply()`是以列表形式创建输出的一个副本，然后`data.table()`（据我所知）必须将这些数据复制到一个单独的位置，这比你使用的更糟糕内的`list()`构造`[.data.frame()`。

# php - 在主页 / Wordpress / 添加没有博客设置的主题

> ID：11872504
> 
> 赞同：0
> 
> 时间：2012-08-08T20:19:08.383
> 
> 标签：php, wordpress

我正在使用一个没有博客/最新帖子正常显示在主页上的 Wordpress 主题。

**如何将此功能重新添加到模板中？**我想显示可以在默认设置中选择的帖子数量。

*我基本上需要找到正确的 PHP 代码片段以插入我的主题的模板循环以激活博客以显示在主页上。我正在处理的主题必须隐藏或删除。*

**也许这个问题的更好措辞可能是：** 如何将默认博客、21 样式添加回 wordpress 循环以在我的自定义主题下显示。这是巴利塔（[http://www.smashingmagazine.com/2011/10/19/free-e-commerce-wordpress-theme-balita/](http://www.smashingmagazine.com/2011/10/19/free-e-commerce-wordpress-theme-balita/)）。我想知道我可以在哪里将此功能返回到将在主题下显示的循环中的语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:39:57.710

使用 Balita，将 home.php（编辑：当然在主题文件夹中）重命名为其他名称。至少这似乎适用于我的快速测试安装。尽管您可能想稍微弄乱一下 CSS，但我自己并不关心帖子的格式。

感谢提供主题。如果没有这些信息，这是一个非常难以回答的问题。

Edit2：哦，你想要和 21 一样的风格？这有点棘手。如果我能找到一个好的答案，我稍后会编辑，如果没有，我会删除它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-08T22:34:59.737

如果您在 WordPress 中的“设置”->“阅读”下设置了静态主页，则将其关闭。

如果你不这样做，并且你仍然看不到最新的帖子，那么你的主题很可能使用文件 home.php 来生成主页。尝试删除它 - 但请确保您拥有主题 b/c 的副本，您可能会得到意想不到的结果。

如果您不使用静态首页并且没有 home.php，则需要修改 index.php，因此您需要了解 PHP 和 Wordpress 循环，聘请开发人员或选择另一个主题。

# ios - 如何更改核心数据中的记录值

> ID：11872507
> 
> 赞同：0
> 
> 时间：2012-08-08T20:19:15.050
> 
> 标签：ios, ios5, core-data

1.  我有 UITableView
2.  所有单元格中都有一个 UISwitch。
3.  我的核心数据由值填充。
4.  名为 switchValue 的核心数据属性之一，具有 @"OFF" 值。

现在我需要：

1.  如果用户将 UISwitch 设置为 ON。
2.  该操作将该行的 switchValue 属性的值更改为 @"ON"。

我的简单代码是：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    NSManagedObject *object = [self.fetchedResultsController objectAtIndexPath:indexPath];
    cell.textLabel.text = [[object valueForKey:@"courseCode"] description];
    cell.detailTextLabel.text = [[object valueForKey:@"courseName"] description];
UISwitch *theSwitch = [[UISwitch alloc]init];

    cell.accessoryView = theSwitch;

    NSLog(@"%@",[[object valueForKey:@"switchValue"] description]);

    if ([[[object valueForKey:@"switchValue"] description]isEqualToString: @"ON"]) {

        theSwitch.on = YES;

    }else{

        theSwitch.on = NO;

    }

    [theSwitch addTarget:self action:@selector(switchChanged:) forControlEvents:UIControlEventValueChanged];

    return cell;

} 
```

动作是：

```
-(void) switchChanged: (UISwitch *) sender{

    NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
    NSEntityDescription *entity = [[self.fetchedResultsController fetchRequest] entity];

    if (sender.on) {

        How can I change the value?

    }else{

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:03:18.820

获得托管对象后，只需设置其值。

```
NSManagedObject *object = [self.fetchedResultsController objectAtIndexPath:indexPath];
[object setValue:@"ON" forKey:@"switchValue"]; 
```

如果您希望将这些更改保存到磁盘，您也必须在某个时候保存您的托管对象上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:03:34.827

您可能应该使用 Core Data 模型管理器的代码生成工具（您创建模型的图表）。

但是，您始终可以通过以下方式获取值：

```
[object valueForKey:@"foo"] 
```

并将它们设置为

```
 [object setValue:value forKey:@"foo"]; 
```

# java - JAVA：类什么时候应该是静态的或动态的

> ID：11872510
> 
> 赞同：1
> 
> 时间：2012-08-08T20:19:47.967
> 
> 标签：java, dynamic, static

我有一个基本上解析文件并将结果存储在 hashmap 中的类，这个类应该处理目录中的所有文件（通常 <10 个文件）。该过程是线性的，具有单个线程。

为了最佳实践，它应该是静态类还是动态类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T20:29:59.830

如果即使没有创建和初始化“对象”，调用解析方法也有意义，请使用`static`方法

即：不要使用

```
Parser p = new Parser();
HashMap result = parser.parse("directory"); 
```

当您可以轻松地执行以下操作时：

```
HashMap result = Parser.parse("directory"); 
```

[Java：何时使用静态方法](https://stackoverflow.com/questions/2671496/java-when-to-use-static-methods)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:24:07.323

`static`如果您没有任何理由实例化该类，我相信该修饰符是合适的。

此外，根据[这个问题](https://stackoverflow.com/questions/3584113/java-static-class)， 只有嵌套类可以称为静态，当它们是时，您可以使用嵌套类而不创建外部类的实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T20:25:34.097

当在编译时不知道类的名称时，会完成动态类加载。我看不出在您的特定情况下使用“动态”修饰符的理由。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T20:22:04.657

我不确定这个类，但你可以通过公共访问（直接或通过访问器）使这个哈希图成为静态的。

# asp.net - ASP.NET 解析器错误消息：无法加载类型“搜索”。从另一个项目复制文件后

> ID：11872514
> 
> 赞同：5
> 
> 时间：2012-08-08T20:19:59.777
> 
> 标签：asp.net

我在视觉工作室有一个工作网站项目。我可以毫无问题地查看所有页面。

现在我从另一个 Web 应用程序项目中复制了 2 个文件：search.aspx search.aspx.vb

**search.aspx 源代码片段**

```
<%@ Page EnableViewState="true" EnableEventValidation="false" MetaDescription="<%$Resources:metadescription%>" Title="<%$Resources:pagetitle %>" Language="VB" MasterPageFile="~/main.master" AutoEventWireup="false" Inherits="search" Codebehind="search.aspx.vb" %>
<%@ MasterType VirtualPath="~/main.master" %>
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="cc1" %> 
```

**search.aspx.vb 源代码片段**

```
Imports System
Imports System.Net
Imports System.IO
Imports GlobalFunctions
Imports System.Xml
Imports System.Collections.Generic
Imports System.Collections
Imports System.Linq
Imports System.Resources
Imports generalMethods
Imports System.Globalization

Partial Class search
    Inherits System.Web.UI.Page 
```

但是当我尝试请求页面时：www.test.com/search.aspx 我收到此错误：说明：在解析服务此请求所需的资源期间发生错误。请查看以下特定的解析错误详细信息并适当地修改您的源文件。

解析器错误消息：无法加载类型“搜索”。

源错误：

```
Line 1:  <%@ Page EnableViewState="true" EnableEventValidation="false" MetaDescription="<%$Resources:metadescription%>" Title="<%$Resources:pagetitle %>" Language="VB" MasterPageFile="~/main.master" AutoEventWireup="false" Inherits="search" Codebehind="search.aspx.vb" %>
Line 2:  
Line 3:  <%@ MasterType VirtualPath="~/main.master" %>

Source File: /search.aspx    Line: 1 
```

当我尝试构建项目时，我已经看到错误：无法加载类型“搜索”。
我不知道去哪里找这个了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-08T21:08:01.607

原来我不得不在 search.aspx 中将“CodeBehind”更改为“CodeFile”......现在一切都恢复正常了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T12:51:00.023

如果 Web 服务器上 bin 目录中的 WAP DLL 已过时并且因此不包含所请求页面的预编译代码，也会发生这种情况。

# iphone - 按下一个像键盘一样的按钮？可可触摸

> ID：11872517
> 
> 赞同：0
> 
> 时间：2012-08-08T20:20:16.990
> 
> 标签：iphone, cocoa-touch, uitextview

我有 10 个按钮，每个按钮都有一个字母。我想要它，所以一旦按下 1 个按钮，它就会显示在文本视图中。所以我可以按下 10 个按钮并在 uitextview 中输入所有“字母”？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:46:12.527

您可以将按钮放在自定义视图容器中，并更改文本视图的输入视图属性。当文本视图变为活动状态时，将显示您的视图而不是键盘（如果这是您要完成的操作）。

如果您不想这样做，而是让按钮始终可见，您可以使用 textview 禁用用户迭代，捕获按钮的操作，在 textview 中使用 outlet/ivar，然后附加新的文本内容基于单击按钮。

# java - 执行者完成服务？如果我们有invokeAll，为什么还需要一个？

> ID：11872520
> 
> 赞同：45
> 
> 时间：2012-08-08T20:20:20.910
> 
> 标签：java, multithreading, concurrency, executorservice, java.util.concurrent

如果我们使用[ExecutorCompletionService](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorCompletionService.html)，我们可以将一系列任务作为 s 提交，并获得与as`Callable`交互的结果。 `CompletionService``queue`

但也有`invokeAll`接受`ExecutorService`任务`Collection`的 ，我们得到一个列表`Future`来检索结果。

据我所知，使用其中一个或另一个没有任何好处（除了我们避免`for`使用 an 的循环`invokeAll`，我们必须`submit`将任务分配给`CompletionService`），并且它们本质上是相同的想法，但略有不同。

那么为什么有两种不同的方式来提交一系列任务呢？我是否纠正了它们在性能方面是等效的？有没有一种情况比另一种更合适？我想不出一个。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-08-08T20:26:26.600

使用 a `ExecutorCompletionService.poll/take`，您`Future`将按完成顺序（或多或少）收到 s 。使用`ExecutorService.invokeAll`，你没有这个权力；您要么阻止直到全部完成，要么指定一个超时，在此之后取消不完整的。

* * *

```
static class SleepingCallable implements Callable<String> {

  final String name;
  final long period;

  SleepingCallable(final String name, final long period) {
    this.name = name;
    this.period = period;
  }

  public String call() {
    try {
      Thread.sleep(period);
    } catch (InterruptedException ex) { }
    return name;
  }
} 
```

现在，下面我将演示如何`invokeAll`工作：

```
final ExecutorService pool = Executors.newFixedThreadPool(2);
final List<? extends Callable<String>> callables = Arrays.asList(
    new SleepingCallable("quick", 500),
    new SleepingCallable("slow", 5000));
try {
  for (final Future<String> future : pool.invokeAll(callables)) {
    System.out.println(future.get());
  }
} catch (ExecutionException | InterruptedException ex) { }
pool.shutdown(); 
```

这会产生以下输出：

```
C:\dev\scrap>java CompletionExample
... after 5 s ...
quick
slow 
```

* * *

使用`CompletionService`，我们看到不同的输出：

```
final ExecutorService pool = Executors.newFixedThreadPool(2);
final CompletionService<String> service = new ExecutorCompletionService<String>(pool);
final List<? extends Callable<String>> callables = Arrays.asList(
    new SleepingCallable("slow", 5000),
    new SleepingCallable("quick", 500));
for (final Callable<String> callable : callables) {
  service.submit(callable);
}
pool.shutdown();
try {
  while (!pool.isTerminated()) {
    final Future<String> future = service.take();
    System.out.println(future.get());
  }
} catch (ExecutionException | InterruptedException ex) { } 
```

这会产生以下输出：

```
C:\dev\scrap>java CompletionExample
... after 500 ms ...
quick
... after 5 s ...
slow 
```

请注意，时间是相对于程序开始的，而不是前一条消息。

* * *

[您可以在此处](http://pastie.org/private/wbivtgzrl5iofrjoccz2w)找到两者的完整代码。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-08-08T21:00:39.697

> 那么为什么有两种不同的方式来提交一系列任务呢？我是否纠正了它们在性能方面是等效的？有没有一种情况比另一种更合适？我想不出一个。

通过使用`ExecutorCompletionService`，您可以在*每个*作业完成时立即收到通知。相比之下，在返回 s 集合之前`ExecutorService.invokeAll(...)`等待*所有*`Future`作业完成。这意味着（例如），如果除了一项作业之外的所有作业都在 10 分钟内完成，而一项作业需要 30 分钟，那么您将在 30 分钟内没有任何结果。

```
// this waits until _all_ of the jobs complete
List<Future<Object>> futures = threadPool.invokeAll(...); 
```

相反，当您使用 a 时`ExecutorCompletionService`，您将能够在每个作业完成后立即获得作业，这允许您（例如）将它们发送到另一个线程池进行处理，立即记录结果等。

```
ExecutorService threadPool = Executors.newFixedThreadPool(2);
ExecutorCompletionService<Result> compService
      = new ExecutorCompletionService<Result>(threadPool);
for (MyJob job : jobs) {
    compService.submit(job);
}
// shutdown the pool but the jobs submitted continue to run
threadPool.shutdown();
while (true) {
    Future<Result> future;
    // if pool has terminated (all jobs finished after shutdown) then poll() else take()
    if (threadPool.isTerminated()) {
        future = compService.poll();
        if (future == null) {
            break;
        }
    } else {
        // the take() blocks until any of the jobs complete
        // this joins with the jobs in the order they _finish_
        future = compService.take();
    }
    // this get() won't block
    Result result = future.get();
    // you can then put the result in some other thread pool or something
    // to immediately start processing it
    someOtherThreadPool.submit(new SomeNewJob(result));
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T20:27:01.563

我实际上从未使用过 ExecutorCompletionService，但我认为这可能比“正常”ExecutorService 更有用的情况是，当您希望按完成顺序接收已完成任务的 Futures 时。使用 invokeAll，您只需获得一个列表，该列表可以在任何给定时间包含未完成和已完成的任务。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T19:49:10.057

仅考虑结果的顺序进行比较：

当我们使用`CompletionService`提交的作业完成时，结果将被推送到队列（完成顺序）。那么提交作业的顺序和返回的结果就不再一样了。因此，如果您担心执行任务的顺序，请使用`CompletionService`

其中 As`invokeAll`返回代表任务的 Futures 列表，其顺序与迭代器为给定任务列表生成的顺序相同，每个任务都已完成。

# javascript - Salesforce Javascript OnClick

> ID：11872522
> 
> 赞同：0
> 
> 时间：2012-08-08T20:20:23.087
> 
> 标签：javascript, salesforce

我正在尝试做一些在 SalseForce 中应该非常基本的事情。我只需要一个按钮来运行一小段 javascript。它在“无效的赋值左侧错误”时抛出以下错误。任何帮助将不胜感激。

```
if (  {!Contact.MailingPostalCode} =  'SC') {window.open('http://www.google.com','mywindow'); }

if (  {!Contact.MailingPostalCode}  =  'FL')  {window.open('http://www.yahoo.com','mywindow');  
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:22:09.677

你的`=`需要是`==`。你正在分配，你想做的是比较。

编辑：另外，你的 'not', `!`, 可能需要在外面。我不熟悉销售队伍方面。

编辑2：试试这种方式：

```
if ({!Contact.MailingPostalCode} == 'SC') {
    window.open('http://www.google.com','mywindow');
}
if ({!Contact.MailingPostalCode} == 'FL') {
    window.open('http://www.yahoo.com','mywindow');
} 
```

测试：

```
if ({!Contact.MailingPostalCode} == 'SC') {
    window.open('http://www.google.com','mywindow');
}
else if ({!Contact.MailingPostalCode} == 'FL') {
    window.open('http://www.yahoo.com','mywindow');
}
else {
    alert({!Contact.MailingPostalCode});
} 
```

编辑 3：为了完整起见，@Zach Colon 的代码是：

```
if ('{!Contact.MailingState}' == 'SC') {
    window.open('http://www.google.com','mywindow');
}
if ('{!Contact.MailingState}' == 'FL') {
    window.open('http://www.yahoo.com','mywindow');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:28:27.547

不要忘记 SF 变量的引号**'****{!Contact.MailingPostalCode}*****'** :***

 ***```
if ('{!Contact.MailingPostalCode}' == 'SC') {
    window.open('http://www.google.com','mywindow'); 
}

if ('{!Contact.MailingPostalCode}' == 'FL'){
    window.open('http://www.yahoo.com','mywindow'); 
} 
```***

# php - PHP文件上传到基于唯一用户ID的目录

> ID：11872527
> 
> 赞同：0
> 
> 时间：2012-08-08T20:20:40.213
> 
> 标签：php, file, variables, upload, directory

我似乎无法让目录在文件路径中获取用户**ID 变量 ($id) 。**直接上传到会员文件夹是没有问题的，但是一旦我尝试在注册期间根据用户 ID 创建的唯一文件夹，我就会遇到障碍。

到目前为止，这是我拼凑起来的：

```
<?php
$id = $_SESSION['id'];
$udir= "members/.$id./";
$ufile = $udir . basename($_FILES['file']['name']);
$allexts = array("jpg", "jpeg", "gif", "png");
$ext = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
    || ($_FILES["file"]["type"] == "image/jpeg")
    || ($_FILES["file"]["type"] == "image/pjpeg")
    || ($_FILES["file"]["type"] == "image/png"))
    && ($_FILES["file"]["size"] < 2000000)
    && in_array($ext, $allexts)){
    if (move_uploaded_file($_FILES['file']['tmp_name'], $ufile)) {
        echo "File upload was successful.";
    } else {
        echo "An error has occured. Please try again.";
    }
} else {
    echo "Invalid file type. Please try again.";
} ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:28:46.587

试试这个

```
if(!is_dir($udir)){

    mkdir("members/".$id, 0777);
} 
```

你的代码： -

```
<?php
$id = $_SESSION['id'];
$udir= "members/".$id."/";

if(!is_dir($udir)){

    mkdir("members/".$id, 0777);
}

$ufile = $udir . basename($_FILES['file']['name']);
$allexts = array("jpg", "jpeg", "gif", "png");
$ext = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
    || ($_FILES["file"]["type"] == "image/jpeg")
    || ($_FILES["file"]["type"] == "image/pjpeg")
    || ($_FILES["file"]["type"] == "image/png"))
    && ($_FILES["file"]["size"] < 2000000)
    && in_array($ext, $allexts)){
    if (move_uploaded_file($_FILES['file']['tmp_name'], $ufile)) {
        echo "File upload was successful.";
    } else {
        echo "An error has occured. Please try again.";
    }
} else {
    echo "Invalid file type. Please try again.";
} 
```

# ruby-on-rails-3.1 - 无法从 Linkedin 对您进行身份验证，因为“凭据无效”

> ID：11872529
> 
> 赞同：3
> 
> 时间：2012-08-08T20:20:45.580
> 
> 标签：ruby-on-rails-3.1, devise, omniauth, linkedin

我已经设置了 DEVISE 和 OMNIAUTH 登录。它正在与 Facebook 合作。现在我正在尝试为 LinkedIn 进行类似的设置。以下是我所做的。但是，我收到以下错误消息 - “无法从 Linkedin 对您进行身份验证，因为“凭据无效”。有人可以帮忙吗？

先感谢您。如果您需要更多详细信息，请告诉我。

宝石文件

```
gem 'omniauth'
gem 'omniauth-linkedin'
gem 'devise', :git => 'git://github.com/plataformatec/devise.git' 
```

Omniauth.rb

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :linkedin, LINKEDIN_APP, LINKEDIN_SECRET
end 
```

设计.rb

```
require "omniauth-linkedin"
config.omniauth :linkedin, LINKEDIN_APP, LINKEDIN_SECRET 
```

钥匙哪里来的？

1.  [在https://www.linkedin.com/secure/developer?newapp=](https://www.linkedin.com/secure/developer?newapp=)注册了一个新应用程序

2.  在应用程序显示页面上有两个密钥 API Key 和 Secret Key。将它们复制到 LINKEDIN_APP、LINKEDIN_SECRET

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T23:19:35.907

我对 'omniauth-github' 有几乎同样的问题。我希望Ryan Bigg 的[这篇](http://ryanbigg.com/2011/04/whodunit-devise-omniauth-oauth-or-github/) 文章对你有所帮助。另一个简单的检查是应用程序的 url 和 url-callback 是否存在（不允许 localhost:3000）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-02T08:23:39.957

`omniauth.rb``devise.rb`由于两者都在与 Omniauth 交互，因此存在冲突。删除中的代码`omniauth.rb`。

在设计文档中解释：

[请记住，config.omniauth 将omniauth 提供程序中间件添加到您的应用程序中。这意味着您不应在 config/initializers/omniauth.rb 中再次添加此提供程序中间件，因为它们会相互冲突并导致始终失败的身份验证。](https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview)

类似的问题：

[Rails：无法从 Facebook 对您进行身份验证，因为“凭据无效”](https://stackoverflow.com/questions/16176208/rails-could-not-authenticate-you-from-facebook-because-invalid-credentials)

[身份验证失败：设计 + OmniAuth + Twitter](https://stackoverflow.com/questions/11396233/authentication-failure-devise-omniauth-twitter)

# indexing - 在 RavenDB 中查询层次结构

> ID：11872537
> 
> 赞同：1
> 
> 时间：2012-08-08T20:21:19.603
> 
> 标签：indexing, ravendb

我在 RavenDB 的单个文档中保存了一个类别层次结构。

```
"CategoryList": [
{
  "$id": "1",
  "Id": "Admin",
  "Name": "Administration",
  "ParentCategory": null,
  "Subcategories": [
    {
      "$id": "2",
      "Id": "Admin1",
      "Name": "Administration 1",
      "ParentCategory": {
        "$ref": "1"
      },
      "Subcategories": []
    },... 
```

我可以使用这两个类在 C# 中成功加载它

```
public class Categories
{
    public string Id { get; set; }
    public IEnumerable<Category> CategoryList{ get; set; }
}

[JsonObject(IsReference = true)]
public class Category
{
    private readonly IList<Category> _subcategories;

    public string Id { get; set; }
    public string Name { get; set; }
    public Category ParentCategory { get; set; }

    public IEnumerable<Category> Subcategories
    {
        get { return _subcategories; }
    }

    public Category()
    {
        _subcategories = new List<Category>();
    }

    public void AddSubcategory(Category subcategory)
    {
        subcategory.ParentCategory = this;
        _subcategories.Add(subcategory);
    }
} 
```

但现在我想查询我的类别层次结构以通过其 Id 检索单个类别。我怎么能那样做？每个类别创建一个文档会更好吗？

谢谢

**更新：**

嗨，艾扬德，

谢谢回复。我相信`Hierarchy`您文章中使用的方法已经过时，但我能够找到新版本......

阅读[本文](http://daniellang.net/using-an-index-as-a-materialized-view-in-ravendb/)后，我创建了一个返回所有类别的索引：

```
public class CategoriesByIdIndex : AbstractIndexCreationTask<Categories, CategoriesByIdIndex.ReduceResult>
{
    public class ReduceResult
    {
        public string Id { get; set; }
        public Category Category { get; set; }
    }

    public CategoriesByIdIndex()
    {
        Map = categoriesCollection => from categories in categoriesCollection
                                      from category in categories.CategoryList
                                      from subcategory in category.Hierarchy(x => x.Subcategories)
                                      select new
                                                 {
                                                     subcategory.Id,
                                                     Category = subcategory
                                                 };

        Store(x => x.Id, FieldStorage.Yes);
        Store(x => x.Category, FieldStorage.Yes);
    }
} 
```

当我执行此查询时，将返回所有类别：

```
var allCategories = session.Query<Categories, CategoriesByIdIndex>()
            .AsProjection<CategoriesByIdIndex.ReduceResult>()
            .ToList(); 
```

但是当我尝试按类别 ID 过滤它时，我收到一个空列表：

```
var singleCategory = session.Query<Categories, CategoriesByIdIndex>()
            .AsProjection<CategoriesByIdIndex.ReduceResult>()
            .Where(x => x.Id == "Admin1")
            .ToList(); 
```

我究竟做错了什么？

谢谢

# regex - xslt 正则表达式

> ID：11872538
> 
> 赞同：0
> 
> 时间：2012-08-08T20:21:23.147
> 
> 标签：regex, xslt

处理 nessus xml 文件的更多问题。

我有一些来自 nessus 的 xml 数据，这些数据将主机名等信息存储在 xml 标记中，可以使用此 xsl 标记提取这些信息：

```
<xsl:value-of select="../ReportItem[(@pluginID=12053)]/description"/> 
```

那么唯一的问题是这个标签除了主机名之外还存储了一堆垃圾。例如，标签中通常包含以下信息：

> 概要：可以获取远程主机的网络名称。说明：远程主机侦听 UDP 端口 137 或 TCP 端口 445 并回复 NetBIOS nbtscan 或 SMB 请求。请注意，此插件收集要在其他插件中使用的信息，但它本身不会生成报告。解决方案：n/a 风险因素：无 插件输出：已收集以下 6 个 NetBIOS 名称：VOODOO1 = 计算机名称 VOODOO = 工作组/域名 VOODOO1 = 文件服务器服务 VOODOO = 浏览器服务选举 VOODOO = 主浏览器 **MSBROWSE** = 主浏览器远程主机在其适配器上具有以下 MAC 地址：10:50:56:ab:10:02

我感兴趣的唯一部分是“VOODOO1 = 计算机名称”部分。实际上，更准确地说，'=' 符号之前的内容。我想知道是否可以在标签的“选择”中使用正则表达式函数，例如：

```
<xsl:value-of select="regexp(../ReportItem[(@pluginID=12053)]/description,'\w =')"/> 
```

这将提取与正则表达式匹配的唯一标记内容并显示它。现在我有标签显示的全部内容，这很烦人。我尝试使用各种变体

```
<xsl:analyze-string select="$elValue" regex="\w = "> 
```

没有运气的标签。我不断收到错误消息说'不能是`<td>`我尝试过的任何其他 xslt 元素的子标签，即 for-each 等。

提前致谢。

根据目前的反馈，这里是 nessus 生成的一些 xml

```
<ReportItem port="137" svc_name="netbios-ns?" protocol="udp" severity="1"     pluginID="10150" pluginName="Windows NetBIOS / SMB Remote Host Information Disclosure" pluginFamily="Windows">
<description>Synopsis :

It is possible to obtain the network name of the remote host.

Description :

The remote host listens on UDP port 137 or TCP port 445 and replies to NetBIOS nbtscan or SMB requests. 

Note that this plugin gathers information to be used in other plugins but does not itself generate a report.

Solution :

n/a

Risk factor :

None

Plugin output :
The following 6 NetBIOS names have been gathered :

 VOODOO1       = Computer name  VOODOO              = Workgroup / Domain name     VOODOO1       = File Server Service  VOODOO              = Browser Service Elections     VOODOO              = Master Browser
 __MSBROWSE__     = Master Browser

The remote host has the following MAC address on its adapter :
   01:a0:52:bf:0a:02

</description>
</ReportItem>` 
```

`<xsl:value-of select="regexp(../ReportItem[(@pluginID=12053)]/description,'\w =')"/>` 这条线真的不行。我做了它，看看是否有人知道是否有类似的东西。它只会产生一个错误，因为我编造了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T05:56:22.593

为此，您需要 XSLT 2.0。我怀疑您使用 xsl:analyze-string 收到的错误消息是因为您使用的是 XSLT 1.0 处理器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-04T17:09:23.680

正如 Mike Kay 所指出的，这不适用于 XSLT 1.0。获取[Saxon](http://www.saxonica.com/products/products.xml)的 .NET 版本，以便您可以使用更现代的 XSLT 版本。您可以从命令行或 Powershell 调用它。这是一个让您入门的示例：

```
 <xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="2.0">  
    <xsl:template match="description">
        <xsl:analyze-string select="."
            regex="(\w+)\s+=\s*Computer name">
            <xsl:matching-substring>
                <xsl:value-of select="regex-group(1)" />
            </xsl:matching-substring>
            <xsl:non-matching-substring>
            </xsl:non-matching-substring>
        </xsl:analyze-string>
    </xsl:template>
</xsl:stylesheet> 
```

# windows-7 - Windbg故障转储分析

> ID：11872539
> 
> 赞同：5
> 
> 时间：2012-08-08T20:21:26.297
> 
> 标签：windows-7, vb6, windbg, crash-dumps, procdump

我很难从使用 ProcDump 创建的故障转储中获取任何有意义的信息，但我很确定这与我一直遇到的看似随机的崩溃有关。

我有一个在 Windows 7 64 位上运行的 VB6 应用程序。每隔一段时间，它就会崩溃，在错误日志中留下一个条目，该条目导致 ntdll.dll 出错，但没有提供更多信息。因此，我一直在运行 SysInternals 的 ProcDump 来自动为我创建故障转储。

我无法在内部重新创建崩溃，所以我很确定如果我有一个转储，它会告诉我问题是什么。但是，在运行了一天的大部分时间后，我看到 ProcDump 已经写了几个转储，尽管程序仍然运行良好。它似乎确实指出了 ntdll.dll 的问题，但我不知道从哪里开始对此进行修复。

在其中一个转储上运行`!analyze -v`给了我以下信息：

```
*******************************************************************************
*                                                                             *
*                        Exception Analysis                                   *
*                                                                             *
*******************************************************************************

FAULTING_IP: 
+0
00000000 ??              ???

EXCEPTION_RECORD:  ffffffff -- (.exr 0xffffffffffffffff)
ExceptionAddress: 00000000
   ExceptionCode: 80000003 (Break instruction exception)
  ExceptionFlags: 00000000
NumberParameters: 0

FAULTING_THREAD:  000007c8

PROCESS_NAME:  application.exe

ERROR_CODE: (NTSTATUS) 0x80000003 - {EXCEPTION}  Breakpoint  A breakpoint has been reached.

EXCEPTION_CODE: (HRESULT) 0x80000003 (2147483651) - One or more arguments are invalid

NTGLOBALFLAG:  0

APPLICATION_VERIFIER_FLAGS:  0

APP:  application.exe

BUGCHECK_STR:  APPLICATION_FAULT_STATUS_BREAKPOINT_AFTER_CALL

PRIMARY_PROBLEM_CLASS:  STATUS_BREAKPOINT_AFTER_CALL

DEFAULT_BUCKET_ID:  STATUS_BREAKPOINT_AFTER_CALL

LAST_CONTROL_TRANSFER:  from 7754431f to 7752014d

STACK_TEXT:  
0382fdf4 7754431f 00000005 035e62c8 00000001 ntdll!ZwWaitForMultipleObjects+0x15
0382ff88 74cd339a 00000000 0382ffd4 77539ed2 ntdll!TppWaiterpThread+0x33d
0382ff94 77539ed2 035e6298 74e2a30c 00000000 kernel32!BaseThreadInitThunk+0xe
0382ffd4 77539ea5 775441f3 035e6298 00000000 ntdll!__RtlUserThreadStart+0x70
0382ffec 00000000 775441f3 035e6298 00000000 ntdll!_RtlUserThreadStart+0x1b

STACK_COMMAND:  ~0s; .ecxr ; kb

FOLLOWUP_IP: 
ntdll!ZwWaitForMultipleObjects+15
7752014d 83c404          add     esp,4

SYMBOL_STACK_INDEX:  0

SYMBOL_NAME:  ntdll!ZwWaitForMultipleObjects+15

FOLLOWUP_NAME:  MachineOwner

MODULE_NAME: ntdll

IMAGE_NAME:  ntdll.dll

DEBUG_FLR_IMAGE_TIMESTAMP:  4ce7ba58

FAILURE_BUCKET_ID:  STATUS_BREAKPOINT_AFTER_CALL_80000003_ntdll.dll!ZwWaitForMultipleObjects

BUCKET_ID:  APPLICATION_FAULT_STATUS_BREAKPOINT_AFTER_CALL_ntdll!ZwWaitForMultipleObjects+15

WATSON_STAGEONE_URL:  http://watson.microsoft.com/StageOne/BlackJack_exe/1_5_0_0/50227d4e/unknown/0_0_0_0/bbbbbbb4/80000003/00000000.htm?Retriage=1

Followup: MachineOwner 
```

谁能指出我正确的方向，就理解这个条目而言，我能做些什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T12:23:50.287

只是为了确保，我已经进行了一些测试，附加到健康的进程并转储刚刚启动的进程。在所有情况下，*!analyze -v*的输出都与您的输出非常相似，除了我的输出更冗长之外，我认为这取决于调试器版本。

例如，这是我在附加到刚启动的 Paint 后得到的输出：

```
*******************************************************************************
*                                                                             *
*                        Exception Analysis                                   *
*                                                                             *
*******************************************************************************

GetPageUrlData failed, server returned HTTP status 404
URL requested:     http://watson.microsoft.com/StageOne/mspaint_exe/6_1_7600_16385/4a5bca29/ntdll_dll/6_1_7601_17725/4ec4aa8e/80000003/00050530.htm?Retriage=1

FAULTING_IP: 
ntdll!DbgBreakPoint+0
00000000`76d90530 cc              int     3

EXCEPTION_RECORD:  ffffffffffffffff -- (.exr 0xffffffffffffffff)
ExceptionAddress: 0000000076d90530 (ntdll!DbgBreakPoint)
ExceptionCode: 80000003 (Break instruction exception)
ExceptionFlags: 00000000
NumberParameters: 1
Parameter[0]: 0000000000000000

FAULTING_THREAD:  0000000000000cbc

DEFAULT_BUCKET_ID:  STATUS_BREAKPOINT

PROCESS_NAME:  mspaint.exe

ERROR_CODE: (NTSTATUS) 0x80000003 - {EXCEPTION}  Breakpoint  A breakpoint has been reached.

EXCEPTION_CODE: (HRESULT) 0x80000003 (2147483651) - One or more arguments are invalid

EXCEPTION_PARAMETER1:  0000000000000000

MOD_LIST: <ANALYSIS/>

NTGLOBALFLAG:  0

APPLICATION_VERIFIER_FLAGS:  0

PRIMARY_PROBLEM_CLASS:  STATUS_BREAKPOINT

BUGCHECK_STR:  APPLICATION_FAULT_STATUS_BREAKPOINT

LAST_CONTROL_TRANSFER:  from 0000000076e37ef8 to 0000000076d90530

STACK_TEXT:  

FOLLOWUP_IP: 
ntdll!DbgBreakPoint+0
00000000`76d90530 cc              int     3

SYMBOL_STACK_INDEX:  0

SYMBOL_NAME:  ntdll!DbgBreakPoint+0

FOLLOWUP_NAME:  MachineOwner

MODULE_NAME: ntdll

IMAGE_NAME:  ntdll.dll

DEBUG_FLR_IMAGE_TIMESTAMP:  4ec4aa8e

STACK_COMMAND:  ~8s ; kb

FAILURE_BUCKET_ID:  STATUS_BREAKPOINT_80000003_ntdll.dll!DbgBreakPoint

BUCKET_ID:  X64_APPLICATION_FAULT_STATUS_BREAKPOINT_ntdll!DbgBreakPoint+0

WATSON_STAGEONE_URL:      http://watson.microsoft.com/StageOne/mspaint_exe/6_1_7600_16385/4a5bca29/ntdll_dll/6_1_7601_17725/4ec4aa8e/80000003/00050530.htm?Retriage=1

Followup: MachineOwner
--------- 
```

我还在这里查看了 ProcDump 标志的解释：[http](http://technet.microsoft.com/en-us/sysinternals/dd996900.aspx) ://technet.microsoft.com/en-us/sysinternals/dd996900.aspx 。看起来像使用命令行一样

```
C:\apps\procdump.exe -accepteula -e -h -n 10 -t -w application.exe 
```

您在没有设置特定参数（如内存使用量或 CPU 使用率）的情况下，让 procdump 在出现挂起或异常的每个迹象时停止。

我建议使用 DebugDiag，它提供了不错的 UI，您可以在其中配置描述何时创建转储的规则。这是我的解释，当您有过多的内存使用问题或高 CPU 使用率时如何收集转储：

[http://kate-butenko.blogspot.com/2012/06/how-to-gather-dump-with-debugdiag.html](http://kate-butenko.blogspot.com/2012/06/how-to-gather-dump-with-debugdiag.html)

这是另一个很好的基于屏幕截图的解释，如何在 DebugDiag 中获取特定异常的转储：

[http://blogs.msdn.com/b/kaushal/archive/2012/05/09/using-debugdiag-to-capture-a-dump-on-first-chance-exception.aspx](http://blogs.msdn.com/b/kaushal/archive/2012/05/09/using-debugdiag-to-capture-a-dump-on-first-chance-exception.aspx)

从一组更轻量级的工具中，您还可以查看 AdPlus 工具（位于*C:\Program Files\Debugging Tools for Windows (x64)*文件夹中）。我更喜欢 DebugDiag，因为它允许捕获特定类型的异常。

# c# - 返回服务上的大数据

> ID：11872540
> 
> 赞同：3
> 
> 时间：2012-08-08T20:21:33.737
> 
> 标签：c#, wcf, named-pipes, large-data

我有一个返回大量对象列表的方法。当我返回一些对象（10）时，一切都很好。问题是当我尝试返回 100 个对象时。列表之所以这么大，是因为列表中的对象里面还有其他对象，所以我基本上是返回一棵树。

无论如何，我正在使用命名管道，这是我正在使用的 enpoint 的配置：

```
<netNamedPipeBinding>
      <binding name="NetNamedPipeBinding_ISymbolFileParser" 
                      closeTimeout="00:10:00"
                      openTimeout="00:10:00" 
                      receiveTimeout="00:10:00" 
                      sendTimeout="00:10:00"
                      transactionFlow="false" 
                      transferMode="Buffered" 
                      transactionProtocol="OleTransactions"
                      hostNameComparisonMode="StrongWildcard"
                      maxBufferPoolSize="2147483647"
                      maxBufferSize="2147483647" 
                      maxConnections="10" 
                      maxReceivedMessageSize="2147483647"
                     >
              <readerQuotas 
                   maxDepth="32" 
                   maxStringContentLength="2147483647" 
                   maxArrayLength="2147483647"
                   maxBytesPerRead="4096" 
                   maxNameTableCharCount="2147483647" />                    
      </binding>
</netNamedPipeBinding> 
```

当我通过做`results.Take(10).ToArray();`所有事情来限制对象的数量时，效果很好。当我返回 100 个对象时，我得到了异常：

![在此处输入图像描述](../Images/717b165955d9c81acc799d0973a37677.png)

* * *

我为尝试解决问题所做的事情：

1.  我将配置文件中的数字增加到 2147483647
2.  我没有返回对象列表，而是在服务上序列化了我自己的列表，然后创建了一个 Test 方法，该方法将返回 byte[] 而不是列表。然后在客户端上，我将 byte[] 反序列化为一个列表，这样就可以了！因此，到目前为止，我有一个解决方案，最坏的情况是我必须序列化我的 serlf 对象并反序列化它。

我还想借此机会询问我是否应该使用不同的绑定。我听说共享内存是最快的，但我不知道如何在 wcf 上使用它。因为我在使用命名管道的同一台机器之间进行通信。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T21:50:18.887

看起来像序列化问题，尝试增加`dataContractSerializer maxItemsInObjectGraph`端点行为和服务行为中的行为。

[这里](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/7fb2bfac-ef76-4f6a-b649-3729b54f7b8a/)同样的问题

# jquery - 是否可以使用回旋处插件获得此轮播？

> ID：11872542
> 
> 赞同：1
> 
> 时间：2012-08-08T20:21:39.927
> 
> 标签：jquery, css, jquery-plugins, positioning, carousel

我正在使用[环形交叉口插件](http://fredhq.com/projects/roundabout/)为旋转木马设置动画，一切正常，但我无法获得与[图像](http://www.hostingpics.net/viewer.php?id=316314cleansleekwebdesign.jpg)中相同的渲染，该渲染表示我想要的旋转木马外观，而[此链接](http://onsixam.cfun.fr/roundabout.html)目前代表我的代码结果。

*   [http://www.hostingpics.net/viewer.php?id=316314cleansleekwebdesign.jpg](http://www.hostingpics.net/viewer.php?id=316314cleansleekwebdesign.jpg)
*   [http://onsixam.cfun.fr/roundabout.html](http://onsixam.cfun.fr/roundabout.html)

我使用了可用选项的插件值，但不幸的是仍然无法获得图像中的项目定位，我也想知道如何设置`<li>`尺寸。

我真的感到沮丧和不知所措，我不知道这是因为我不够聪明还是什么。

```
$(document).ready(function() {
    $('#sample-roundabout').roundabout({
        tilt: 0.9,
        minScale: 1,
        maxsCale: 3,
        minOpacity: 1,
        duration: 400
    }, function() {
        $(this).fadeTo(500, 1);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:54:19.370

严格使用 CSS，您可以执行[以下](http://jsbin.com/ezukov/1/edit#html,live)操作：http : [//jsbin.com/ezukov/1/edit#html,live](http://jsbin.com/ezukov/1/edit#html,live)

```
ul {
    list-style: none;
    padding: 0;
    margin: 0 auto;
    width: 863px;
    height: 300px;
}
li {
    height: 220px;
    width: 621px;
    background-color: #ccc;
    text-align: center;
    cursor: pointer;
}
    li.roundabout-in-focus {
    margin-top:50px;
    background:red;
    cursor: default;
} 
```

更进一步，您可以创建回调函数以在中间幻灯片执行lazysusan 动画之前平滑地为中间幻灯片设置动画。或者，如果您想要不同的东西，您可以创建自己的[环形交叉路口形状动画。](http://fredhq.com/projects/roundabout-shapes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:28:36.697

您需要将 ul 的宽度设置为较小的值，对于您想要获得的内容，请在 CSS 样式表中尝试这样的操作：

```
#sample-roundabout{
  width: 400px;
} 
```

只是玩弄这个值和倾斜度，我认为你不会很难让它发挥作用。

# tlbimp - 防止 TlbImp 为引用的类型库生成互操作程序集

> ID：11872543
> 
> 赞同：1
> 
> 时间：2012-08-08T20:21:43.947
> 
> 标签：tlbimp

我正在使用`TlbImp`. 我的几个类型库引用了一个单一的核心类型库。

当我`TlbImp`对抗时，`First.dll`我得到`Interop.First.dll`and `Interop.Core.dll`。问题是当我再次运行它时，反对`Second.dll`，`TlbImp`尝试`Interop.Core.dll`再次生成，导致错误：

```
TlbImp : error TI0000 : System.ApplicationException - The assembly for referenced
type library, 'Core', will not be imported since it would overwrite existing file
'Core.dll'. 
```

如何告诉`TlbImp`不要为引用的程序集生成互操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:21:43.947

我需要使用该[`/reference`](http://msdn.microsoft.com/en-us/library/tt0cf3sx)参数来显式识别现有的互操作程序集。

最初我正在运行这些命令：

```
> tlbimp Core.dll /out:Interop.Core.dll
> tlbimp First.dll /out:Interop.First.dll
> tlbimp Second.dll /out:Interop.Second.dll 
```

`TlbImp`将尝试在第二个和第三个命令中导入引用`Core.dll`并创建互操作`Core.dll`，从而触发错误。

为了解决这个问题，我只需要明确指定`Core`互操作：

```
> tlbimp Core.dll /out:Interop.Core.dll
> tlbimp First.dll /reference:Interop.Core.dll /out:Interop.First.dll
> tlbimp Second.dll /reference:Interop.Core.dll /out:Interop.Second.dll 
```

# asp.net - 如何在asp.net中进行分页？

> ID：11872554
> 
> 赞同：-1
> 
> 时间：2012-08-08T20:22:27.647
> 
> 标签：asp.net

我只想问如何制作一个页面列表，例如[First][1][2][3][4][Last]。

当用户单击第 4 页时，他将被重定向到第 4 页。我的网站需要这个，因为向下滚动很长，我不希望我的访问者一直向下滚动只是为了知道我的网站。

[这是一个例子](http://i984.photobucket.com/albums/ae329/funnycatster/haha.png)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:34:20.053

您可以使用 GridView 控件。它具有分页功能。检查此链接

*   [http://msdn.microsoft.com/en-us/library/aa479347.aspx](http://msdn.microsoft.com/en-us/library/aa479347.aspx)
*   [http://msdn.microsoft.com/en-us/library/5aw1xfh3.aspx](http://msdn.microsoft.com/en-us/library/5aw1xfh3.aspx)
*   [这也很有趣](http://www.c-sharpcorner.com/uploadfile/rohatash/gridview-paging-sample-in-asp-net/)

标记

```
<asp:GridView ID="gvMyUsers" runat="server" AllowPaging="True" PageSize="20">

</asp:GridView> 
```

代码隐藏

```
protected void Page_Load(object sender, EventArgs e)
{
   gvMyUsers.DataSource = GetUsersFromDatabase(); //e.g. DataTable, DataReader, List<MyUser>, Any IEnumerable
   gvMyUsers.DataBind();
} 
```

这让你知道会发生什么。

您可以在 GridView、Paging 等上进行更多阅读和谷歌搜索

# javascript - 在这个 Mongoose 独特的预保存验证中我做错了什么？

> ID：11872556
> 
> 赞同：24
> 
> 时间：2012-08-08T20:22:40.397
> 
> 标签：javascript, node.js, mongoose

我正在尝试创建一个具有唯一用户名的用户模型。这是它的代码：

```
var mongoose = require("mongoose");

var Schema = mongoose.Schema;

var UserSchema = new Schema({
    username: String,
    password: String,
});

UserSchema.virtual("password_confirmation").get(function() {
    return this.pw_conf;
}).set(function(value) {
    this.pw_conf = value;
});

UserSchema.path("username").required(true);
UserSchema.path("password").required(true);

UserSchema.pre("save",function(next, done) {
    var self = this;
    mongoose.models["User"].findOne({username : self.username},function(err, user) {
        if(user) {
            self.invalidate("user","username must be unique");
        }
        done();
    });
    next();
});

UserSchema.pre("save",function(next) {
    if(this.pw_conf !== this.password) {
        next(new Error("Must specify the password confirmation"));
    }
    else {
        next();
    }
});

module.exports = mongoose.model("User",UserSchema); 
```

我也在测试唯一性是否有效：

```
var User = require("./users"),
  mongoose = require("mongoose");
var u = new User();

mongoose.connect('mongodb://localhost/my_database');

u.username = "me";
u.password = "password";
u.password_confirmation = "password";
u.save(function(err) {
    if(err) {
        console.log(err);
    }
    mongoose.disconnect();
}); 
```

问题是，它没有。每次运行代码时，都会创建一个新对象。我知道可能还有其他方法可以确保唯一性，但我想以这种方式进行。我不应该`done`在处理完方法的结果后打电话`findOne`吗？我打电话`next`错了吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-08T20:51:01.247

[http://mongoosejs.com/docs/api.html#schematype_SchemaType-unique](http://mongoosejs.com/docs/api.html#schematype_SchemaType-unique)是要走的路。它使用实际的 MongoDb 索引来确保您的字段是唯一的。不需要`.pre`中间件。

享受！

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-08-10T22:05:48.517

要使用[并行中间件](http://mongoosejs.com/docs/middleware.html#parallel)（带有`next`和`done`参数），您需要`true`作为第二个参数传递。

除此之外，还有两种可能：

您的`self.invalidate`调用应该是引用`"username"`而不是`"user"`. 如果这不能解决它，`done`如果你想中止保存操作，你可以通过传递一个 Error 对象来显式地失败：

```
UserSchema.pre("save", true, function(next, done) {
    var self = this;
    mongoose.models["User"].findOne({username: self.username}, function(err, user) {
        if(err) {
            done(err);
        } else if(user) {
            self.invalidate("username", "username must be unique");
            done(new Error("username must be unique"));
        } else {
            done();
        }
    });
    next();
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-10-02T10:32:56.453

有一个非常好的猫鼬插件，非常易于安装和使用。文档非常好，第一次对我有用。

但是重新保存有一个问题。

[https://npmjs.org/package/mongoose-unique-validator](https://npmjs.org/package/mongoose-unique-validator)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-21T23:49:34.733

您是否考虑过使用异步验证器来捕获错误？

```
UserSchema.path('username').validate(function (value, done) {
  User.count({ username: value }, function (error, count) {
    // Return false if an error is thrown or count > 0
    done(!(error || count));
  });
}, 'unique'); 
```

# c++ - 将 Boost 适配器与 C++11 lambda 配合使用

> ID：11872558
> 
> 赞同：21
> 
> 时间：2012-08-08T20:22:46.140
> 
> 标签：c++, boost, lambda, c++11, boost-range

我试图编译这段代码：

```
#include <boost/range/adaptors.hpp>
#include <boost/range/algorithm.hpp>
#include <vector>

int main() {
    std::vector<int> v{
        1,5,4,2,8,5,3,7,9
    };
    std::cout << *boost::min_element(v | boost::adaptors::transformed(
            [](int i) { return -i; })) << std::endl;
    return 0;
} 
```

编译失败并显示以下错误消息（在长模板实例化小说之后）：

```
/usr/local/include/boost/iterator/transform_iterator.hpp:84:26: error: use of deleted function ‘main()::<lambda(int)>::<lambda>()’
../main.cpp:12:5: error: a lambda closure type has a deleted default constructor 
```

我搜索了这个问题，并在 Boost Users 邮件列表存档中找到了[这个问题。](http://boost.2283326.n4.nabble.com/Compilation-errors-when-trying-to-use-range-adaptors-with-C-11-lambdas-td4631527.html)它建议使用`#define BOOST_RESULT_OF_USE_DECLTYPE`将解决问题。我把它放在我的代码的最开始，但它仍然没有编译。错误信息的长度似乎短了很多，但最后的错误信息是一样的。我目前正在使用 Boost 1.50。

这里有什么问题？有什么办法可以使这项工作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T20:38:24.427

[http://smellegantcode.wordpress.com/2011/10/31/linq-to-c-or-something-much-better/](http://smellegantcode.wordpress.com/2011/10/31/linq-to-c-or-something-much-better/)

但是你可以使用这个，效果很好。

```
#include <boost/range/adaptors.hpp>
#include <boost/range/algorithm.hpp>
#include <vector>
#include <functional>

int main() {
    std::vector<int> v{
        1,5,4,2,8,5,3,7,9
    };
    std::function<int(int)> func = [](int i) { return -i; };
    std::cout << *boost::min_element(v | boost::adaptors::transformed(
    func)) << std::endl;
    return 0;
} 
```

[http://liveworkspace.org/code/b78b3f7d05049515ac207e0c12054c70](http://liveworkspace.org/code/b78b3f7d05049515ac207e0c12054c70)

`#define BOOST_RESULT_OF_USE_DECLTYPE`例如，在 VS2012 中工作正常。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-05-08T21:33:53.637

您可以通过在其前面放置“+”来将非捕获 lambda 转换为函数指针。

```
std::vector<int> v{1,5,4,2,8,5,3,7,9};
std::cout << *boost::min_element(v | 
    boost::adaptors::transformed(+[](int i) 
    {
        return -i; 
    })) << std::endl; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-09T21:05:08.110

这在[http://boost.2283326.n4.nabble.com/range-cannot-use-lambda-predicate-in-adaptor-with-certain-algorithms-td3560157.html](http://boost.2283326.n4.nabble.com/range-cannot-use-lambda-predicate-in-adaptor-with-certain-algorithms-td3560157.html)和[https://svn.boost 中有介绍。 org/trac/boost/ticket/4189](https://svn.boost.org/trac/boost/ticket/4189) - 问题是某些算法期望能够复制构造（以及默认构造和复制分配）它们的谓词，而这不能用 lambda 完成。

解决方法是将 lambda 包装在 a 中`std::function`：

```
*boost::min_element(
    v | boost::adaptors::transformed(std::function<int(int)>(
        [](int i) { return -i; }))); 
```

我已经要求（在[推断 lambda 的调用签名或任意可调用的 "make_function"](https://stackoverflow.com/questions/11893141/inferring-the-call-signature-of-a-lambda-or-arbitrary-callable-for-make-functio)）寻找一种编写`make_function`这样一个可以写的方法：

```
*boost::min_element(
    v | boost::adaptors::transformed(make_function(
        [](int i) { return -i; }))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-30T16:16:00.117

使用 C++17 要素[类模板参数推导](https://en.cppreference.com/w/cpp/language/class_template_argument_deduction)，您可以更简单地使用 std::function 进行包装，如下所示：

```
*boost::min_element(
    v | boost::adaptors::transformed(std::function(
        [](int i) { return -i; }))); 
```

# crystal-reports - Crystal 报表查看器显示具有上边距的文本对象

> ID：11872559
> 
> 赞同：2
> 
> 时间：2012-08-08T20:22:50.000
> 
> 标签：crystal-reports, alignment, crystal-reports-2010

我的报告查看器显示我的文本对象，顶部有额外的空间，因此所有文本对象都不能很好地对齐，这仅在 Web 查看器中。但是如果我尝试打印或查看转换后的 pdf 文件，它会在正确的位置显示我的所有文本对象，并与我的数据水平对齐。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T13:49:43.127

我在另一个网站上找到了这个回复：

这实际上是影响 13.0.4 版本的 Crystal Reports 错误，当您使用 13.0.3（可能更早）版本运行相同的报告时，它可以正常工作。CR 团队知道此错误，但要到 10 月才能修复（3 个月来修复以前运行良好的问题...）：[http ://scn.sap.com/thread/3207181](http://scn.sap.com/thread/3207181)

# python - 如何在 user_passes_test 装饰器可调用函数中传递 Django 请求对象

> ID：11872560
> 
> 赞同：21
> 
> 时间：2012-08-08T20:22:49.737
> 
> 标签：python, django, django-views, django-authentication

我正在使用 Django user_passes_test 装饰器来检查用户权限。

```
@user_passes_test(lambda u: has_add_permission(u, "project"))
def create_project(request):
...... 
```

我正在调用一个回调函数 has_add_permission，它接受两个参数用户和一个字符串。我想将请求对象连同它一起传递，这可能吗？另外，谁能告诉我我们如何能够直接访问装饰器内的用户对象。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-08T20:48:37.817

不，您不能将请求传递给`user_passes_test`. 要了解它为什么以及如何工作，只需转到[源代码](https://github.com/django/django/blob/1.3.1/django/contrib/auth/decorators.py)：

```
def user_passes_test(test_func, login_url=None, redirect_field_name=REDIRECT_FIELD_NAME):
    """
    Decorator for views that checks that the user passes the given test,
    redirecting to the log-in page if necessary. The test should be a callable
    that takes the user object and returns True if the user passes.
    """

    def decorator(view_func):
        @wraps(view_func, assigned=available_attrs(view_func))
        def _wrapped_view(request, *args, **kwargs):
            if test_func(request.user):
                return view_func(request, *args, **kwargs)
            path = request.build_absolute_uri()
            # If the login url is the same scheme and net location then just
            # use the path as the "next" url.
            login_scheme, login_netloc = urlparse.urlparse(login_url or
                                                        settings.LOGIN_URL)[:2]
            current_scheme, current_netloc = urlparse.urlparse(path)[:2]
            if ((not login_scheme or login_scheme == current_scheme) and
                (not login_netloc or login_netloc == current_netloc)):
                path = request.get_full_path()
            from django.contrib.auth.views import redirect_to_login
            return redirect_to_login(path, login_url, redirect_field_name)
        return _wrapped_view
    return decorator 
```

`user_passes_test`这是装饰器背后的代码。如您所见，传递给装饰器的测试函数（在您的情况下为`lambda u: has_add_permission(u, "project")`）仅传递了一个参数`request.user`. 现在，当然可以编写自己的装饰器（甚至直接复制此代码并对其进行修改）也可以传递`request`自身，但您不能使用默认`user_passes_test`实现来做到这一点。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-02-27T20:14:01.680

请注意，Django 1.9 引入了[`UserPassesTestMixin`](https://docs.djangoproject.com/en/1.9/topics/auth/default/#django.contrib.auth.mixins.UserPassesTestMixin)，它使用方法`test_func`作为测试函数。这意味着该请求在`self.request`. 所以你可以做这样的事情：

```
class MyView(UserPassesTestMixin, View):
    def test_func(self):
        return has_add_permission(self.request.user, self.request) 
```

然而，这只适用于基于类的视图。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-06-26T06:35:21.650

我发现编辑`user_passes_test`让装饰功能运行`request`而不是`request.user`过于困难。我在[这篇博客文章](http://blog.jdotjdot.com/2014/06/decorator-decorator/)中有一个关于视图装饰器装饰器的简短版本，但为了后代，这是我完整编辑的代码：

```
def request_passes_test(test_func, login_url=None, redirect_field_name=REDIRECT_FIELD_NAME):
    """
    Decorator for views that checks that the request passes the given test,
    redirecting to the log-in page if necessary. The test should be a callable
    that takes the request object and returns True if the request passes.
    """

    def decorator(view_func):
        @wraps(view_func, assigned=available_attrs(view_func))
        def _wrapped_view(request, *args, **kwargs):
            if test_func(request):
                return view_func(request, *args, **kwargs)
            path = request.build_absolute_uri()
            # urlparse chokes on lazy objects in Python 3, force to str
            resolved_login_url = force_str(
                resolve_url(login_url or settings.LOGIN_URL))
            # If the login url is the same scheme and net location then just
            # use the path as the "next" url.
            login_scheme, login_netloc = urlparse(resolved_login_url)[:2]
            current_scheme, current_netloc = urlparse(path)[:2]
            if ((not login_scheme or login_scheme == current_scheme) and
                    (not login_netloc or login_netloc == current_netloc)):
                path = request.get_full_path()
            from django.contrib.auth.views import redirect_to_login
            return redirect_to_login(
                path, resolved_login_url, redirect_field_name)
        return _wrapped_view
    return decorator 
```

几乎我唯一做的就是更改`if test_func(request.user):`为`if test_func(request):`.

# javascript - 未知的 javascript 函数声明模式

> ID：11872566
> 
> 赞同：0
> 
> 时间：2012-08-08T20:23:09.313
> 
> 标签：javascript

我以前从未见过这种设计模式，它是做什么的？

```
(function(def){
    if(typeof module!='undefined'){
        module.exports=def;
    }
    else{
        this.nut=def;
    }
}( function(){
   ...
}() )); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:26:08.200

正如 Ben Alman 所说，这是一个“立即调用的函数表达式”。定义的第一个函数接受一个参数，`def`。将此函数包装在括号中并将第二个函数定义（也在括号中）传递给它会立即调用第一个函数，并将第二个函数的结果（它也立即调用）作为`def`参数传递给它。

更多信息：[http ://benalman.com/news/2010/11/immediately-invoked-function-expression/](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:42:19.010

让我们一步一步解码

```
function(def)
{
    if(typeof module!='undefined'){
        module.exports=def;
    }
    else{
        this.nut=def;
    }
}( function(){}()); 
```

//现在删除了外括号，因为您可以看到定义了一个函数，这是定义函数的一种正常方法，该函数 在定义后立即
接受一个参数， 因此如果我们进一步分解它`def`

```
function(def) //function 1
    {
        if(typeof module!='undefined'){
            module.exports=def;
        }
        else{
            this.nut=def;
        }
    }( function() /*function 2*/{}()); 
```

这只是意味着第二个函数作为参数传递给第一个函数
a`bracket ()`就在 JS 中的函数定义之后，表示该函数`function 1`将在定义后立即调用。括号内的内容将作为参数传递给函数，所以`def`基本上是`function2`

# objective-c - 在目标 C 中使用 free 时出错

> ID：11872568
> 
> 赞同：0
> 
> 时间：2012-08-08T20:23:22.107
> 
> 标签：objective-c, cocoa, free

我正在阅读 Stephen Kochan 写的名为“Objective-c 编程”的书。我一直在阅读它，并且我已经将一些代码直接从书中复制到我的程序中。我遇到的唯一问题是在对象上使用 free 。我的代码如下（很抱歉将整个程序放入其中，但我是菜鸟，所以很有可能我在程序的早期做错了什么）：

```
//
//  main.m
//  prog1
//
//  Created by Brent Blackwood on 8/7/12.
//  Copyright (c) 2012 Brent Blackwood. All rights reserved.
//

#import <stdio.h> 
#import <objc/Object.h> 

//------- @interface section -------

@interface Fraction: NSObject {
    int numerator;
    int denominator;
}

-(void) print;
-(void) setNumerator: (int) n;
-(void) setDenominator: (int) d;

@end

//------- @implementation section -------

@implementation Fraction;

-(void) print{
    printf (" %i/%i ", numerator, denominator);
}

-(void) setNumerator: (int) n {
    numerator = n;
}

-(void) setDenominator: (int) d {
    denominator = d;
}

@end

//------- program section -------

int main (int argc, char *argv[]) {

    // Create an instance of a Fraction

    Fraction *myFraction = [Fraction new];

    // Set fraction to 1/3

    [myFraction setNumerator: 1];
    [myFraction setDenominator: 3];

    // Display the fraction using the print method

    printf ("The value of myFraction is:");

    [myFraction print];
    printf ("\n");
    [myFraction free]; // ************---This is the line giving the error.---***********

    return 0;

} 
```

我得到的错误是“没有可见的@interface for 'Fraction' 在“[myFraction free]”行之后声明选择器“free”；。我翻遍了这本书，无法弄清楚问题出在哪里。它没有提到这个错误。这是什么意思，我该如何解决？

在我问之前，我也在堆栈上查看了一些类似的问题，但他们的问题似乎不是我遇到的错误。请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:30:05.353

在目标 C 中，您不使用 free 来释放对象的已分配实例。free 仅在您调用“malloc”时使用。

在目标 C [MyClass new] 中不等同于 malloc，它等同于

```
MyClass *anInstance = [[MyClass alloc] init]; 
```

使用以下方法“释放”该对象

```
[anInstance release]; 
```

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:37:35.007

由于分配和释放对象的不同约定，这看起来像是 Objective-C 的非 Cocoa、非 Apple 变体。Xcode 严格执行 Apple 自己的 (Cocoa) 约定，这就是您收到错误的原因。

如果你想学习 iOS（或 Mac）编程，而不是因为学习纯粹形式的 Objective-C 而偏离轨道，我会尝试另一本书。

# php - 登录后使用重定向是否安全

> ID：11872589
> 
> 赞同：1
> 
> 时间：2012-08-08T20:24:56.450
> 
> 标签：php, session, redirect, save, login-script

我正在用 PHP 创建一个登录脚本，我只是想知道重定向未登录的用户是否安全？我正在检查会话，如果用户未登录，我想使用类似的东西：

```
session_start();
//check session
if (user is not logged in)
    header ("Location: login.php"); 
//content of confidential file 
```

用户能否以某种方式阻止重定向并查看内容，或者无论用户做什么，脚本都会停止并重定向？我想在我拥有的每个机密页面上执行此检查。

谢谢大家，我将使用：

```
session_start();
//check if user is logged in
if(!check)
{
      header ("Location: login.php");
      die("Please <a href=\"login.php\">log in</a>");
}
//print all the html stuff only logged it users should see 
```

感谢所有的帮助！缺口

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:27:31.627

```
session_start();
//check session
if (user is not logged in) {
    header ("Location: login.php"); 
    die();
}
//content of confidential file 
```

将解决您的问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:29:26.243

在呈现任何数据之前，用户将被重定向。只是为了确定，请确保将该代码放在任何 HTML 之前或显示任何内容之前。

# ios - 使用文件 md5.c 编译 Xcode 时发出警告

> ID：11872590
> 
> 赞同：0
> 
> 时间：2012-08-08T20:24:57.973
> 
> 标签：ios, xcode, compiler-errors

我在 iOS 应用程序中使用 md5.c 文件。 [http://opensource.apple.com/source/cvs/cvs-33/cvs/lib/md5.c?txt](http://opensource.apple.com/source/cvs/cvs-33/cvs/lib/md5.c?txt)

当我编译时，我得到错误：' **builtin** _memset_chk'调用中'sizeof'的参数与目标的表达式相同；你的意思是取消引用它吗？

这在以下行中： memset(ctx, 0, sizeof(ctx)); /* 如果它是敏感的 */

需要改变什么？

琳达

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T20:39:02.583

我认为编译器会询问您是否要将那行代码更改为：

```
memset(ctx, 0, sizeof(*ctx)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:37:00.083

您可以通过以下方式摆脱警告：

```
size_t len = sizeof(ctx);
memset(ctx, 0, len); 
```

但这只会将结构的前 4 个字节归零。正如@dans3itz 所说，它可能是代码错误，而 sizeof(*ctx) 可能就是这个意思。由于正如评论所说，这是为了“保护”，因此该功能的运行并不是真正必要的。有趣的是，这段代码已经发布了这么多年，没有人发现它。

# jquery - 只需滚动插件跳转即可开始

> ID：11872593
> 
> 赞同：1
> 
> 时间：2012-08-08T20:25:04.493
> 
> 标签：jquery, jquery-plugins

嗨，我正在使用来自该站点[http://logicbox.net/jquery/simplyscroll/的简单滚动插件](http://logicbox.net/jquery/simplyscroll/)

但是我遇到的问题是，当滚动条走到尽头并尝试循环回到开头而不是平滑过渡时，它会跳回到开头，这对眼睛来说有点粗糙，客户不喜欢它非常。

如果您访问此站点[http://www.newwhey.com/](http://www.newwhey.com/)并查看底部显示我们的零售商的位置，您会看到问题，并且我的徽标在到达末尾时会向下滚动，它会跳回，我在使用这个简单的滚动任何建议的其他网站上遇到同样的问题？

这是我到目前为止的代码

```
<script type="text/javascript" src="<?php bloginfo('template_url'); ?>/js/jquery.simplyscroll.js"></script>

<link rel="stylesheet" href="<?php bloginfo('template_url'); ?>/js/jquery.simplyscroll.css" media="all" type="text/css">

<script type="text/javascript">

(function($) {
    $(function() {
        $("#scroller").simplyScroll({
        autoMode: 'loop',
        width: 3000,
        startOnLoad: true
        });
    });
})(jQuery);
</script> 
```

**这是我的css文件，用于顶部包含的简单滚动**

```
/* Container DIV - automatically generated */

.simply-scroll-container {
    position: relative;
}

/* Clip DIV - automatically generated */

.simply-scroll-clip {
    position: relative;
    overflow: hidden;
}

/* UL/OL/DIV - the element that simplyScroll is inited on    
Class name automatically added to element */

.simply-scroll-list {
    overflow: hidden;
    margin: 0;
    padding: 0;
    list-style: none;
}   

.simply-scroll-list li {
    padding: 0;
    margin: 0;
    list-style: none;
}   

.simply-scroll-list li img {
    border: none;
    display: block;
}

/* Custom class modifications - adds to / overrides above
    .simply-scroll is default base class */

/* Container DIV */

.simply-scroll {
    width: 1576px;
    height: 200px;
    margin-bottom: 1em; 
}

/* Clip DIV */

.simply-scroll .simply-scroll-clip {
    width: 1576px;
    height: 200px;
}   

/* Explicitly set height/width of each list item */ 
.simply-scroll .simply-scroll-list li {
    float: left; /* Horizontal scroll only */
    height: 200px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:35:18.870

为什么你在插件上设置了“宽度”值？

$("#scroller").simplyScroll({ autoMode: 'loop', **width: 3000,** startOnLoad: true });

还有：

```
$("#scroller .simply-scroll-list").css({"width":"auto"}) 
```

似乎您正在使用插件“知识”之外的元素宽度以及它的初始化。

我建议尝试删除它并简单地使用 CSS 中的容器宽度，这里不需要 JS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-02T18:16:57.633

通过夸大整体“.simply-scroll”宽度以适应滚动元素，它不应该跳过并重新启动。“.simply-scroll-clip”将隐藏溢出。

```
.simply-scroll {
  width: 6000px;
  height: 200px;
  margin-bottom: 1em; 
}

.simply-scroll .simply-scroll-clip {
  width: 1576px;
  height: 200px;
} 
```

# ipad - 将 gps 坐标推送到 http 帖子的应用程序

> ID：11872607
> 
> 赞同：0
> 
> 时间：2012-08-08T20:26:33.480
> 
> 标签：ipad, safari

有谁知道在 iPad 上运行并定期 http 发布您的 gps 坐标的应用程序？我们有一个具有 gps 功能的 Web 应用程序。它不是本机应用程序。所以目的是让 iPad App 将位置发布到某个服务器，然后我们的 Web 服务器从该服务器检索位置。

或者，有没有办法让 Safari 浏览器从设备获取 GPS 并将其发布（我认为这是不可能的，因此我的帖子）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:38:12.190

是的，有一个应用程序不能确定它也只是 iPhone 或 iPad。它被称为 GPS Tracker，开发者 Philip Harzig。它确实将位置发送到提供商服务器，并且可以（使用密码）查找网站上记录的位置。

此外，我目前正在开发一个类似的应用程序，并且没有看到将其发布到服务器的 http 问题（至少在技术上不是），也不认为这是 Apple 的问题，只要它是公开透明的给用户正在发生的事情。

# android - 计时器错误倒计时

> ID：11872612
> 
> 赞同：1
> 
> 时间：2012-08-08T20:26:54.383
> 
> 标签：android, timer, handler, countdown

我的计时器有问题。然后我按下处理程序中的开始按钮值显示 -22406914:0-51 而不是倒计时。下面是代码（我通过这个帮助帮助了自己：[http](http://android-developers.blogspot.com/2007/11/stitch-in-time.html) ://android-developers.blogspot.com/2007/11/stitch-in-time.html ）。我不知道我在哪里做错了......

```
public class biegi extends Activity {
TextView Todleglosc, Tpredkosc, Tczas;
ImageView Ibiegacz;
Button clear, startstop;
LocationManager locationManager;
Location lokacjaPoczatkowa;
String providerName;
boolean start;
private long startTime;
private Handler mHandler = new Handler();

protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.biegi);
inicjuj();
actionbuttonsc();
} // oncreate

private Runnable mUpdateTimeTask = new Runnable() {
        public void run() {
             final long start = startTime;
               long millis = SystemClock.uptimeMillis() - start;
               int seconds = (int) (millis / 1000);
               int minutes = seconds / 60;
               seconds     = seconds % 60;

               if (seconds < 10) {
                   Tczas.setText("" + minutes + ":0" + seconds);   
               } else {
                   Tczas.setText("" + minutes + ":" + seconds);            
               }     
               mHandler.postAtTime(this,start + (((minutes * 60) + seconds +     1) * 1000));               
        }           
    };

public void inicjuj (){
Todleglosc=(TextView) findViewById(R.id.odleglosc);
Tpredkosc=(TextView) findViewById(R.id.predkosc);
Tczas=(TextView) findViewById(R.id.czas);
Ibiegacz=(ImageView) findViewById(R.drawable.biegacz);
clear=(Button) findViewById(R.id.clear);
startstop=(Button) findViewById(R.id.button_bieg_start_stop);
start=false;
}

public void actionbuttonsc()
{
clear.setOnClickListener(new View.OnClickListener()
        {
    public void onClick(View v) {
    Tczas.setText("00:00:00");

    }
});

startstop.setOnClickListener(new View.OnClickListener() {
public void onClick(View v) {   
        if (start==false)
        {
            Tczas.setText("00:00:01");
            startTime = System.currentTimeMillis();
            mHandler.removeCallbacks(mUpdateTimeTask);
            mHandler.postDelayed(mUpdateTimeTask, 100);
            start=true;
        }

else if (start==true)
    {
        Tczas.setText("00:00:00");
        mHandler.removeCallbacks(mUpdateTimeTask);
        start=false;                        
    }}});
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:53:47.810

您`startTime`使用`currentTimeMillis`( ) 设置，然后使用( )`startTime = System.currentTimeMillis();`读取它。`uptimeMillis``long millis = SystemClock.uptimeMillis() - start;`

这是我要做的：

```
// Change this:
long millis = SystemClock.uptimeMillis() - start;
// .. to this:
long millis = System.currentTimeMillis() - start; 
```

# ios - 如何使用 pickerView 制作 if 语句

> ID：11872616
> 
> 赞同：1
> 
> 时间：2012-08-08T20:27:14.413
> 
> 标签：ios, xcode, if-statement, uipickerview, ibaction

我有一个pickerView，根据该pickerView 中的选择，我想要一个按钮（计算按钮）来执行两个数学运算之一。pickerView 有一个组件，2 行男性和女性。如果用户选择男性，然后点击计算按钮，我希望程序使用一个公式。如果用户选择女性，然后他的计算按钮我希望程序使用不同的公式。我厌倦了使用。

```
-(IBaction)caclulate{

if ([pickerView isEqual:sexPickerView] ) {
    if ([objectAtIndex:0]) {
         "do formula 0"
}
if ([objectAtIndex:1){
  "do formula 1"
}
} 
```

（“做公式 0 和 1”不是实际代码......我在那里有数学公式，但这些对这个问题并不重要，所以我简短地做了）

但是，这给了我两个错误。pickerView 未声明和 objectAtIndex 未声明。我是编程新手，所以我想要做的可能是远离基础......

任何人都知道如何做我需要的？

更新

```
-(IBAction)calculate{

    if ([sexPickerView selectedRowInComponent:0]) {
    "do formula 0"
}

//female
 if ([sexPickerView selectedRowInComponent:1]) {
    "do formula 1"
 }
} 
```

这就是我输入的内容，现在当我单击计算按钮时，我收到一条错误消息

[会话开始于 2012-08-08 16:04:33 -0500。] 2012-08-08 16:05:26.580 CalorieAppFinal[4289:207] *** 由于未捕获的异常 'NSRangeException' 而终止应用程序，原因：'*** - [NSMutableArray objectAtIndex:]：索引 1 超出范围 [0 .. 0]'

当我取出 if 语句并单独尝试每个公式时，应用程序运行没有问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:30:03.420

所有你需要的是：

```
[pickerView selectedRowInComponent:0]; 
```

这将返回您选择的行，在您的情况下为 0 或 1

至于`pickerView`未声明，我不确定`pickerView`您要使用什么，或者应该在哪里声明。如果您已经有参考`sexPickerView`，请忽略该检查并`sexPickerView`直接使用

**编辑**

针对您的错误，问题在于您尝试检查所选内容的方式。您只有 1 个组件，因此您只能调用

```
[sexPickerView selectedRowInComponent:0]; 
```

您将其更改`0`为 a`1`并且它不起作用。该函数返回的是您要检查的`0`or 。`1`所以你的计算函数应该是这样的：

```
-(IBAction)calculate{

    if ([sexPickerView selectedRowInComponent:0] == 0) {
    "do formula 0"
}

//female
 if ([sexPickerView selectedRowInComponent:0] == 1) {
    "do formula 1"
 }
} 
```

# c# - Lync 2010 应答事件？

> ID：11872624
> 
> 赞同：1
> 
> 时间：2012-08-08T20:28:12.177
> 
> 标签：c#, winforms, lync, lync-2010

我被要求将电话记录系统集成到我们新的基于 Lync 的系统中。当接听电话时，软件应弹出一个表格，允许对电话进行记录。

我找到了在接到电话但未接听时加载表单的方法。有谁知道如何实现这一目标？

当前使用 Lync 2010 SDK 和 C# Winforms。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:38:54.070

添加对话：

```
public event EventHandler<ConversationManagerEventArgs> ConversationAdded 
```

接听电话：

```
e.Conversation.Modalities[ModalityTypes.AudioVideo].Accept(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T21:34:50.380

订阅 AV 模态的 StateChanged 事件：

 _conversation.Modalities[ModalityTypes.AudioVideo].ModalityStateChanged += AVModality_StateChanged;

我不记得确切的状态对应于接受的呼叫（我在我的手机上），但应该很容易添加一些控制台输出并使用它......

希望有帮助。

# javascript - window.alert 关闭处理程序？

> ID：11872628
> 
> 赞同：0
> 
> 时间：2012-08-08T20:28:19.843
> 
> 标签：javascript, html, browser

关闭 window.alert 弹出窗口后，是否有一种简单的方法可以执行一些代码？我有一个很大的库要加载，我的计划是抛出一个欢迎信息，比如

```
window.alert("Welcome to my site!") 
```

只是给浏览器一两秒钟以确保一切加载。我现在正在使用 window.confirm，因为我可以在单击按钮后捕获确认事件，但我真的不需要有两个选项。关于如何在 window.alert() 的“Ok”消息中捕捉“confirm”的任何建议？此外，您的解决方案能否跨浏览器工作（或至少在 FF、IE 和 Safari 的更高版本上）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T20:30:31.560

`window.alert()`停止脚本的执行流程，因此您只需将代码放在调用`alert()`.

例子：

```
alert("I am waiting for you to click OK");
/* Your code here */ 
```

但是，如果您想检查是否已加载“所有内容”，则此方法可能不起作用。例如，考虑使用主体的 onload 事件处理程序。

```
<body onload="mycode();">
  ....
</body> 
```

对于高级方法，请考虑使用[jQuery](http://jquery.com/)库，它可以让您通过`$(document).ready()`处理程序来实现您的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:30:23.313

`alert`不是异步方法。`alert`在关闭之前没有 javascript 运行。

您真的应该使用 jQuery`$(documnet).ready()`或其他库中的等效项来等待页面在 javascript 执行之前加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T20:32:20.520

旁边的代码行

```
window.alert("Welcome to my site!") 
```

将在警报窗口关闭后立即执行。

# javascript - jquery ui 对话框和滚动块竞争鼠标

> ID：11872635
> 
> 赞同：0
> 
> 时间：2012-08-08T20:28:45.260
> 
> 标签：javascript, jquery, html, jquery-ui

我真的不确定如何正确命名这个问题

让我指出一个[示例小提琴](http://jsfiddle.net/a5zsg/)

问题是当对话框打开并且您单击目录并开始滚动时，对话框会卡住，并用鼠标移动。至少在铬和火狐中。关于在滚动目录时如何释放鼠标的任何想法？

# HTML

```
<button id="opener">Clicky</button>

<div id="dialog"><h1>Title</h1>
    <p>Bacon ipsum dolor sit amet pork chop deserunt ut esse leberkas, shankle strip steak veniam adipisicing salami ball tip.</p>
 <p>    Duis ut exercitation, velit biltong chicken sed enim pork pastrami shank ut adipisicing. Drumstick ham hock irure sunt filet mignon fatback est chicken mollit venison ad capicola fugiat consequat short loin. Shoulder ea labore, minim pork chop beef tongue pork belly ullamco ex. Bacon tempor officia, strip steak in irure venison magna. Corned beef eiusmod pork belly pork loin laboris.</p>

    </div>​ 
```

# JS/jQuery

```
$(function() {
    var menu = [];
        menu[0] = '<input type="checkbox" id="helpTOCButton" title="Table of Contents"/>';
        menu[1] = '<label for="helpTOCButton">Table of Contents</label>'
        menu[2] = '<div id="helpTOC">';
        menu[3] = '<a title="Bacon">Bacon</a>';
        menu[4] = '<a title="pork">Pork</a>';
        menu[5] = '<a title="Steak">Steak</a>';
        menu[6] = '<a title="Frequently Asked Questions">FAQ</a>';
        menu[7] = '<a title="chicken">Chicken</a>';
        menu[8] = '<a title="baby cows">veal</a>';
        menu[9] = '<a title="brisket">brisket</a>';
        menu[10]  = '<a title="what to do in case of heart attacks">change diet</a>';
        menu[10] = '</div>';            

    $( "#dialog" ).dialog({
        autoOpen: false,
        show: "blind",
        hide: "clip",
        height: '400',
        width: '500',
        title: menu.join(''),
        open: function() {
            $('#helpTOCButton')
                .button({icons: { secondary: 'ui-icon-triangle-1-s'}})
                .on('click',function() { 
                  $('#helpTOC').slideToggle()

                });   
        },
        close: function() { 
               $('#helpTOCButton').off('click');                    
        }

    });

    $( "#opener" ).click(function() {
        $( "#dialog" ).dialog( "open" );
        return false;
    });
});​ 
```

# CSS

```
h1 { font: bold 1.25em/1.7em Serif; } 
#helpTOC {background: #fcfcfc; box-shadow: 2px 2px 2px rgba(50,50,50,.2); display: none; position: absolute; margin-left: 5em; z-index:999; border: 1px solid #ccc; height: 5em;  width: 10em; overflow: auto; } 
#helpTOC a { font: .75em/1.25em sans-serif; display: block; cursor: pointer; padding: .25em; border-bottom: 1px solid #ccc; } 
#helpTOC a:hover { background-color: #ebebeb; box-shadow: 2px 2px 2px rgba(50,50,50,.1);} 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:55:14.987

好的，我想我可能已经解决了本质问题

问题是这样的。目录的内容被插入到对话框的标题中，默认情况下 jquery-ui 以要移动的区域为目标。我不完全确定这是如何导致问题的，但是将菜单添加`#helpTOC`到对话框中会导致问题消失。

更新小提琴-> [http://jsfiddle.net/Hax8K/](http://jsfiddle.net/Hax8K/)

我想花时间写一个问题可以让我的大脑稍微思考一下。我仍然欢迎对我的原始问题或我选择如何解决它的答案或解释。

# java - 接口和类中声明的常量之间的区别？

> ID：11872639
> 
> 赞同：0
> 
> 时间：2012-08-08T20:28:52.493
> 
> 标签：java, oop, interface

我遇到了一个我很好奇的特殊问题（并想找到解决方法）。

如果我在我的类中声明一个变量 NODES：

`private static final String NODES = "nodes";`

一切正常。

但是，如果我在接口中声明变量：

```
public interface MSMConstants {
    public static final String NODES = "nodes";
} 
```

并在使用变量 NODES 的类中实现该接口，我在第一次使用 NODES 时得到一个空指针异常。

关于这里发生了什么的任何想法？

崩溃的行：

```
lr_fontSize.setSelectedItem(((VisualItem)m_vis.getVisualGroup(NODES).tuples().next()).getFont().getSize());

SearchQueryBinding sq = new SearchQueryBinding((Table) m_vis.getGroup(NODES), "label",
        (SearchTupleSet) m_vis.getGroup(Visualization.SEARCH_ITEMS)); 
```

第二个是在构造函数内部；第一个也在构造函数中，但是对于从第二个实例化的对象。

请求堆栈跟踪：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at prefuse.data.query.SearchQueryBinding.<init>(SearchQueryBinding.java:53)
    at edu.stanford.folding.msmexplorer.MSMExplorer.<init>(MSMExplorer.java:703)
    at edu.stanford.folding.msmexplorer.MSMExplorer.graphView(MSMExplorer.java:1538)
    at edu.stanford.folding.msmexplorer.MSMExplorer.graphView(MSMExplorer.java:1526)
    at edu.stanford.folding.msmexplorer.MSMExplorer$1.actionPerformed(MSMExplorer.java:202)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2028)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2351)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
    at java.awt.AWTEventMulticaster.mouseReleased(AWTEventMulticaster.java:272)
    at java.awt.Component.processMouseEvent(Component.java:6375)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
    at java.awt.Component.processEvent(Component.java:6140)
    at java.awt.Container.processEvent(Container.java:2083)
    at java.awt.Component.dispatchEventImpl(Component.java:4737)
    at java.awt.Container.dispatchEventImpl(Container.java:2141)
    at java.awt.Component.dispatchEvent(Component.java:4565)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4619)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4280)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4210)
    at java.awt.Container.dispatchEventImpl(Container.java:2127)
    at java.awt.Window.dispatchEventImpl(Window.java:2482)
    at java.awt.Component.dispatchEvent(Component.java:4565)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:684)
    at java.awt.EventQueue.access$000(EventQueue.java:85)
    at java.awt.EventQueue$1.run(EventQueue.java:643)
    at java.awt.EventQueue$1.run(EventQueue.java:641)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)
    at java.awt.EventQueue$2.run(EventQueue.java:657)
    at java.awt.EventQueue$2.run(EventQueue.java:655)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:654)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:296)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:201)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:196)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:188)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:35:45.133

没有技术差异。我们可以`final static`在接口和类上声明常量并使用它们。您展示的两种方法都应该有效。

*但是常量声明与接口*的概念不太匹配。我知道，很多人将接口用作“常量存储库”，这绝对不是他们的目的。

这样做的一个原因是它提供了一种通过“实现”那些常量持有者接口来“继承”常量定义的简单方法。

但是现在我们有了静态导入，尽管不再需要“滥用”接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:44:54.913

好吧，我不确定它为什么会生成 NullPointerException，但是如果你有两个同名的静态变量，你应该在它们前面加上类名或接口名，以便 Java 知道哪个静态变量你的意思是。

您可以更改您的代码以使用`MSMConstants.NODES`或`MyClassName.NODES`（例如）并查看是否可以解决问题？

# web-services - 实时图像缩略图创建者网站

> ID：11872642
> 
> 赞同：1
> 
> 时间：2012-08-08T20:29:05.787
> 
> 标签：web-services, image-processing, thumbnails

周围有实时图像缩略图创建者网站吗？我的意思是一个 Web 服务（带有一个简单的 API），它可以提供 URL 提供的图像的缩略图。我不介意水印（尽管我更喜欢它不存在）而且我没有那么多图像要转换。谢谢。

# php - 用于阅读电子邮件的 PHP 库

> ID：11872643
> 
> 赞同：15
> 
> 时间：2012-08-08T20:29:13.920
> 
> 标签：php, email, imap, swiftmailer, email-client

我目前使用 SwiftMailer 库来**发送**电子邮件，但不幸的是它只用于发送，而不是接收。我想知道...是否有一个类似的库可以通过 IMAP 连接到电子邮件帐户并阅读电子邮件（IE 让我能够循环浏览电子邮件）。我知道这里有一组 PHP IMAP 函数：http: [//us3.php.net/manual/en/book.imap.php](http://us3.php.net/manual/en/book.imap.php)

但我的问题是，是否有人知道用于接收/查看所有电子邮件的替代库或 IMAP 包装类？

我真的找不到任何东西，提前谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-08T20:44:26.310

见下文你的：--

[http://www.php.net/mailparse](http://www.php.net/mailparse)

[http://garrettstjohn.com/entry/reading-emails-with-php/](http://garrettstjohn.com/entry/reading-emails-with-php/)

或尝试一下：-

**用 PHP 阅读电子邮件**

```
<?php

    class Email_reader {

        // imap server connection
        public $conn;

        // inbox storage and inbox message count
        private $inbox;
        private $msg_cnt;

        // email login credentials
        private $server = 'yourserver.com';
        private $user   = 'email@yourserver.com';
        private $pass   = 'yourpassword';
        private $port   = 143; // adjust according to server settings

        // connect to the server and get the inbox emails
        function __construct() {
            $this->connect();
            $this->inbox();
        }

        // close the server connection
        function close() {
            $this->inbox = array();
            $this->msg_cnt = 0;

            imap_close($this->conn);
        }

        // open the server connection
        // the imap_open function parameters will need to be changed for the particular server
        // these are laid out to connect to a Dreamhost IMAP server
        function connect() {
            $this->conn = imap_open('{'.$this->server.'/notls}', $this->user, $this->pass);
        }

        // move the message to a new folder
        function move($msg_index, $folder='INBOX.Processed') {
            // move on server
            imap_mail_move($this->conn, $msg_index, $folder);
            imap_expunge($this->conn);

            // re-read the inbox
            $this->inbox();
        }

        // get a specific message (1 = first email, 2 = second email, etc.)
        function get($msg_index=NULL) {
            if (count($this->inbox) <= 0) {
                return array();
            }
            elseif ( ! is_null($msg_index) && isset($this->inbox[$msg_index])) {
                return $this->inbox[$msg_index];
            }

            return $this->inbox[0];
        }

        // read the inbox
        function inbox() {
            $this->msg_cnt = imap_num_msg($this->conn);

            $in = array();
            for($i = 1; $i <= $this->msg_cnt; $i++) {
                $in[] = array(
                    'index'     => $i,
                    'header'    => imap_headerinfo($this->conn, $i),
                    'body'      => imap_body($this->conn, $i),
                    'structure' => imap_fetchstructure($this->conn, $i)
                );
            }

            $this->inbox = $in;
        }

    }

    ?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-14T08:03:04.427

最健壮的可能是使用 Zend 的 Email 类：

[当前版本](http://framework.zend.com/manual/current/en/modules/zend.mail.read.html)

[Zend 1.12（无命名空间，适用于遗留应用程序）](http://framework.zend.com/manual/1.12/en/zend.mail.read.html)

# c - 有范围的东西

> ID：11872644
> 
> 赞同：-1
> 
> 时间：2012-08-08T20:29:14.637
> 
> 标签：c, scope

我认为下面这段代码中的全局范围和局部范围存在一些问题。如果有人请帮助我，为什么这段代码不起作用！这是一个寻找第 25 个神奇数字的程序。神奇数字意味着它除了 2,3,5 之外没有素因数。我从 16 开始，这是第 12 个神奇的数字。然后检查这些数字是否可以与 7 中的任何素数整除。所以我在全局数组中列出素数。并检查数组中那些素数的数字。如果检查完成，程序会尝试使用 next_prime 函数找到下一个素数并将它们列出到全局数组中。但我得到了错误的结果。它总是给出不期望的结果 input+=4 。

```
/*a program to find out 25th magical number. magical number
means it has no prime factor except 2,3,5*/
#include<stdio.h>
#include<math.h>
double primes[10000]={2,3,5};
int serial=3;
double next_prime(double f)//function, when called, returns the next prime number
{
    int j=0,loop_breaker=0;
    int count;
    while(j==0){
        for(count=1;primes[count]<sqrt(f)+1 &&count<serial;count++){
            if(fmod(f,primes[count])==0){
                f+=2;
                loop_breaker=1;
                break;
            }
        }
        if(loop_breaker==0){
            primes[serial]=f;
            serial++;
            j=1;
        }
    }
    return f;
}
int main()
{
    double f=7,prime_divisor,magic_serial=12,magic_number=16;
    int c,loop_breaker,is_magic;
    prime_divisor=next_prime(f);
    f+=2;//this line always comes after the previous line so that everytime the value of f gets changed
    while(magic_serial!=25){
        is_magic=0;
        loop_breaker=0;
        for(c=3;c<serial;c++){
            if(fmod(magic_number,primes[c])==0){
                loop_breaker=1;
                break;
            }
        }
        if(loop_breaker==0){
            while(prime_divisor<sqrt(magic_number)+1){
                prime_divisor=next_prime(f);
                f+=2;
                if(fmod(magic_number,prime_divisor)==0){
                    is_magic=1;
                    break;
                }
            }
        }
        if(is_magic==0){
            magic_serial++;
        }
        magic_number++;
    }
    printf("%lf",magic_number);
    return 0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:06:03.843

我想问题出在 next_prime 函数上，也许这个效果更好：

```
double next_prime()
{
    double f = primes[serial-1] + 2;
    int count;
    for(count=1; primes[count]<=sqrt(f) && count<serial; ++count)
    {
        if(fmod(f, primes[count])==0)
        {
            f += 2;
            count = 1;
        }
    }
    return primes[serial++] = f;
} 
```

我还认为函数不需要取值，所以我也删除了它，似乎 main 函数没有按照你的预期做，所以我认为这个效果更好：

```
int main()
{
    double prime_divisor=next_prime(),magic_serial=12,magic_number=16;
    int c, loop_breaker;
    while(magic_serial!=25)
    {
        ++magic_number;
        loop_breaker = 1;
        while(prime_divisor<magic_number/2)
            prime_divisor = next_prime();
        for(c=3; c<serial; ++c)
        {
            if(fmod(magic_number, primes[c])==0)
            {
                loop_breaker = 0;
                break;
            }
        }
        if(loop_breaker)
            ++magic_serial;
    }
    printf("%lf\n",magic_number);
    return 0;
} 
```

我希望这有帮助。

# apache - POST var 没有在 PHP 中传递

> ID：11872649
> 
> 赞同：0
> 
> 时间：2012-08-08T20:29:42.623
> 
> 标签：apache, post, php

PHP 文件：

```
 <?

print_r($_REQUEST);
$thispage = 'login';
require('db.php');
if($_POST['admin_username'] && $_POST['admin_password']) {
    $query="SELECT * FROM login where name='".mysql_real_escape_string($_POST['admin_username'])."' AND pass = '".mysql_real_escape_string($_POST['admin_password'])."' AND level='admin'";
    echo $query;
    $result = mysql_query($query);
    while ($row = mysql_fetch_array($result)){

    if($row['name'] && $row['pass']) {
        $_SESSION['isAdmin'] = 1;
        $_SESSION['loggedin'] = 1;
        setcookie('isAdmin' , 1, time()+3600, '/', $settings['cookiedomain']);
        setcookie('loggedin' , 1, time()+3600, '/', $settings['cookiedomain']);
        header("Location: index.php");
        exit();}
    else {
        header("Location: login.php?msg=Invalid%20Login");
        exit();
    }
}
}
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Admin Area</title>
<link href="style.css" rel='stylesheet' />
<link rel="stylesheet" href="bubble-tooltip.css" media="screen">
<style>
.style1 {color: #171717}
</style>
</head>

<body>
<div id='content' style='width: 500px; border: 1px solid #171717; margin-top: 100px; background-color: #404040;'>
<h1 align="center"><img src="header.jpg" width="333" height="91" /></h1>
<p align="center">Welcome to the Admin Area</p>
<? if($_GET['msg']) { ?>
<center>
<p style='color: #FF9900; font-weight: bold;'><? echo $_GET['msg']; ?></p>
</center>
<? } ?>
<form id="form1" name="form1" method="post" enctype="multipart/form-data" action="">
  <table width="311" border="0" align="center">
    <tr>
      <td width="68"><strong>Username</strong></td>
      <td width="231"><input type="text" name="admin_username" style='background-color: #ffffff; border: 1px solid #1F1F1F; font-size: 11px; color: #1F1F1F; width: 200px;' /></td>
    </tr>
    <tr>
      <td><strong>Password</strong></td>
      <td><input type="password" name="admin_password" style='background-color: #ffffff; border: 1px solid #1F1F1F; font-size: 11px; color: #1F1F1F; width: 200px;'  /></td>
    </tr>
    <tr>
      <td colspan="2"><div align="center">
        <input type="submit" name="button" value="Login" />
      </div></td>
      </tr>
  </table>
</form>
<p align="center">&nbsp;</p>
</div>
<div id='footer'></div>
</body>
</html> 
```

在顶部`print_r($_REQUEST);`，我得到的只是 Array()。当我使用`print_r($_POST);`.

Firebug 毫无疑问地显示了 POST 变量正在被提交，并且键名完全匹配。

这是从 Firebug 复制粘贴的数据，在 POST 部分下：

```
Partsmultipart/form-data
admin_username  jeff
admin_password  51622384
button  Login 
```

`phpinfo();`post_max_size 根据命令设置为 8M 。

我可能错过了什么？这是在我们以前的服务器上工作的。迁移后，由于此问题，没有人可以登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:58:55.250

`action="<?=$_SERVER['PHP_SELF']; ?>"`如果您发布到同一页面，表单的操作应该是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:59:05.093

你的表格看起来不错，但我有几个建议：

1.  我不明白你为什么需要 enctype="multipart/form-data"。当您希望表单上传文件时使用它。

2.  既然您使用的是method=POST，为什么不查看$_POST 数组而不是$_REQUEST 数组呢？

3.  您可能需要考虑将 HTMLENTITIES 应用于 $_SERVER['PHP_SELF'] 以避免可能的漏洞利用。（动作=）

4.  您的新服务器是否识别 `<?`速记（而不是使用`<?php ?>`）？

好的，说了这么多，我没有看到您的表格有任何问题，但我建议您考虑我建议的一些更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T20:37:34.187

我已经测试了你的代码，它工作正常；-

```
<?php
if(isset($_POST['button']) && !empty($_POST['button']))
{
    echo "<pre>";
    print_r($_REQUEST);
    die;

}
?>
<form id="form1" name="form1" method="post" enctype="multipart/form-data" action="<? echo $_SERVER['PHP_SELF']; ?>">
  <table width="311" border="0" align="center">
    <tr>
      <td width="68"><strong>Username</strong></td>
      <td width="231"><input type="text" name="admin_username" style='background-color: #ffffff; border: 1px solid #1F1F1F; font-size: 11px; color: #1F1F1F; width: 200px;' /></td>
    </tr>
    <tr>
      <td><strong>Password</strong></td>
      <td><input type="password" name="admin_password" style='background-color: #ffffff; border: 1px solid #1F1F1F; font-size: 11px; color: #1F1F1F; width: 200px;'  /></td>
    </tr>
    <tr>
      <td colspan="2"><div align="center">
        <input type="submit" name="button" value="Login" />
      </div></td>
      </tr>
  </table>
</form> 
```

输出：-

```
Array
(
    [admin_username] => admin
    [admin_password] => Pass@word1
    [button] => Login
) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-08T21:27:24.960

原来这是一个重定向循环问题！

Firebug 有点误导，但经过检查，我意识到连续有两行：

POST login.php 获取 index.php

表示它在成功运行后尝试循环到 index.php。为什么它在 print_r() 命令应该吐出结果之后没有忽略 header() 命令，我不确定。通常，标题只能在输出之前传递。

无论如何，index.php 有一个 var 被检查，如果为 false，它将发送回 login.php：

```
$HTTP_COOKIE_VARS['isAdmin'] 
```

这是由以前的开发人员编写的，这不适用于较新版本的 PHP。

因此，我将其更改为

```
$_COOKIE['isAdmin'] 
```

希望这可以帮助。

PHP 版本更改可能会让人头疼，尤其是在您继承的代码不符合标准的情况下。

# c# - C#中的线程节流

> ID：11872650
> 
> 赞同：3
> 
> 时间：2012-08-08T20:29:44.543
> 
> 标签：c#, multithreading, visual-studio-2010, throttling

我在 C# 中使用 VB .NET 4 在 VS2010 中创建了一个游戏。游戏为每个玩家创建一个线程，并运行玩家创建的 LUA 代码。

每个 LUA 代码都为线程阻塞，并且只应在线程终止时终止（LUA 脚本应包含无限循环）

我想限制 CPU 使用率，因为计算机在以 100% CPU 运行几个小时后当前过热。

如何在不控制线程的情况下限制线程？我希望有一个线程管理器来强制挂起/恢复，但那些已经过时了，我不想抛出异常，因为这会中止我正在执行的 LUA 代码。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T21:06:08.930

您可以将这些线程的线程优先级设置为低 - 这将有助于您的系统保持响应......但您仍然会使用 100% CPU 并且仍然过热，所以我不会详细说明如何。

正如其他海报所提到的，你需要让你的线程插入小睡眠。如果您根本无法控制它们，那么您将无能为力。

我建议您需要更改游戏 API。

我建议您让 Lua 代码具有“运行一帧”功能，而不是让您的代码一次调用 Lua 代码，然后 Lua 代码无限循环。然后，您将无限循环移动到您自己的代码中，并重复调用“运行一帧”函数。

这样，您可以插入睡眠、添加日志记录以及执行各种其他有用的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:31:56.320

确保无限循环中的线程不会消耗太多 cpu 的典型方法是让它在每次迭代中休眠一点（通常 5 毫秒就可以了）。这将使系统有时间允许其他资源使用 cpu。另外，不要给线程最高优先级。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T20:41:19.493

控制执行线程调度的经典方法是使用 Fibers。

然而，Fibers 是 WIN32 API 的一个原生特性……你可以在 C# 中最接近的是使用迭代器……你在每个产量之间做一些工作……但你决定何时需要下一个通过调用迭代器来完成一些工作。

请参阅第二个链接...可能是一种使用非托管本机 Fiber API 来包装一些 .NET 协程的方法，或者如果您在此线程中运行的 LUA 代码是本机的并且您无权访问源代码。 .那么您也许可以使用 ConvertThreadToFibre 来控制它（并决定何时使用 Fiber API 调用的一些互操作来安排它）。

*   [http://paoloseverini.wordpress.com/2012/02/02/implementing-iterator-blocks-in-c-part-2-win32-fibers/](http://paoloseverini.wordpress.com/2012/02/02/implementing-iterator-blocks-in-c-part-2-win32-fibers/)

*   [http://www.altdevblogaday.com/2011/05/25/implementing-fibers-in-c/](http://www.altdevblogaday.com/2011/05/25/implementing-fibers-in-c/)

*   [http://msdn.microsoft.com/en-us/magazine/cc164086.aspx](http://msdn.microsoft.com/en-us/magazine/cc164086.aspx)

*   [http://www.altdevblogaday.com/2011/02/01/slim-and-light-multitasking-with-fibers/](http://www.altdevblogaday.com/2011/02/01/slim-and-light-multitasking-with-fibers/)

*   [C# 中的 Fibers：它们是否比迭代器更快，人们使用过它们吗？](https://stackoverflow.com/questions/1881473/fibers-in-c-are-they-faster-than-iterators-and-have-people-used-them)

或者你可以有一个调度线程，它使用事件向玩家线程发出信号，当他们可以继续并做一些工作时（如果你的一些代码是本机/C++，一些是 C#，那么每个都可以引用相同的事件句柄...... .just 在每一位代码中使用 WIN32API 或 .NET API）。

# vba - 基于范围 VBA 的过滤列

> ID：11872651
> 
> 赞同：1
> 
> 时间：2012-08-08T20:29:47.757
> 
> 标签：vba, excel

我目前正在处理来自大型机的数据，[与此处提供的数据不同](https://stackoverflow.com/questions/11620118/finding-numerical-value-pairs-with-conditionals-and-nested-if-then-statements)。在这种情况下，对于我的标准和目标数据集，我所拥有的只是类似于 100-AAA 的字符串。我已经搜索了类似的解决方案，但我没有找到针对 SO 上的 VBA 的范围问题的直接过滤器。

我正在尝试根据一系列标准过滤大型数据集。最初，我开始在单独的类/子例程中使用集合，但后来我压缩为在单个子例程中使用范围，如下所示：

```
Sub FilterTest1()

Dim RngOne As Range
Dim LastCell As Long

Sheets("Criteria").Activate
Sheets("Criteria").Select
Range("A1").Select

LastCell = Application.WorksheetFunction.CountA(ActiveSheet.Range("A:A"))

Set RngOne = ActiveSheet.Range("A2:A" & LastCell)

Sheets("Sheet 1").Activate
Sheets("Sheet 1").Select

With ActiveSheet
    If .FilterMode Then
    .ShowAllData
    End If
End With

Columns("A:A").Select
Selection.AutoFilter
ActiveSheet.Range("A:A").AutoFilter Field:=1, Criteria1:=RngOne, Operator:=xlOr

End Sub 
```

不幸的是，我的单元格范围不会过滤数据，即使使用标准，例如`Operator:=xlOr`- 它只显示用于标准的最后一个单元格值。VBA 代码不会失败 - 它只是没有根据范围正确过滤。

我确信存在一个简单的解决方案，但我不能完全看到它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T21:21:31.993

您当前的线路：

```
ActiveSheet.Range("A:A").AutoFilter Field:=1, Criteria1:=RngOne, Operator:=xlOr 
```

正在尝试按`Range`对象过滤您的第一个字段，而不是按范围中的每个值。

我在下面提供了一种方法来执行此操作，将您的值加载到数组中，然后将数组传递给过滤条件。

值得注意的几点可以帮助您（以及将来的其他任何人）：

*   我学习了使用宏记录器过滤所选对象的正确语法。
*   这个网站帮助我了解了数组技巧：将数组[传递给过滤条件](http://vbadud.blogspot.com/2010/07/excel-vba-autofilter-specify-multiple.html)
*   我还清理了您的代码，通过摆脱无用的选择语句等，使其更高效、更快。（这点代码没什么大不了的，但摆脱这种做法会帮助你完成更大的项目！）

下面的代码：

```
Sub FilterTest1()

Dim RngOne As Range, cell As Range
Dim LastCell As Long
Dim arrList() As String, lngCnt As Long

With Sheets("Criteria")
    LastCell = .Range("A" & Sheets("Criteria").Rows.Count).End(xlUp).Row
    Set RngOne = .Range("A2:A" & LastCell)
End With

'load values into an array
lngCnt = 0
For Each cell In RngOne
    ReDim Preserve arrList(lngCnt)
    arrList(lngCnt) = cell.Text
    lngCnt = lngCnt + 1
Next

With Sheets("Sheet 1")

    If .FilterMode Then .ShowAllData

    .Range("A:A").AutoFilter Field:=1, Criteria1:=arrList, Operator:=xlFilterValues

End With

End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T21:52:55.550

需要注意的是，`Criteria1`需要字符串变量作为参数。您可以将范围分配给数组，然后将`string`数组传递给条件。另一个注意事项是，要将数组传递给标准，据我所知，它必须是一行，而不是一列，例如。`StringArray(0,3)`而不是`StringArray(3,0)`. 因此，为什么您要获得范围内的最后一个值。只需用于`Application.Transpose(StringArray)`转换为一行。

这段代码对我有用，并且很容易扩展到更大的数组。

```
Sub test()
Dim StringArray(0, 1 To 3) As String 'This is a fixed dimension of an array, you can easily change to dynamic by using the ReDim statement.
ActiveSheet.AutoFilterMode = False 'To reset autofilter

Range("D3:D5").Select

For c = 1 To 3 'Step through the range that you wish to use as the criteria.
StringArray(0, c) = CStr(Selection(c, 1).Value)
Next

Range("A:A").AutoFilter Field:=1, Criteria1:=StringArray, Operator:=xlFilterValues

End Sub 
```

# javascript - 使用 javascript 播放音频（没有 HTML5 或可见播放器）

> ID：11872652
> 
> 赞同：2
> 
> 时间：2012-08-08T20:29:51.570
> 
> 标签：javascript, jquery, audio-player

我想在单击图像链接时播放曲目，并在再次单击时停止播放。我没有使用 HTML5，我没有使用音频标签，也不想在播放曲目时显示任何播放器。这应该尽可能跨浏览器......

我点击，我听到了曲目，我再次点击，它停止了。

足够简单，但我猜想太简单了，因为我发现的每个教程都涉及 HTML5 及其新标签或 Flash 或一些我不需要的彩色播放器。

请问我该如何实现？纯 javascript 或 Jquery 都可以。

我提前谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T18:06:47.240

您不使用 HTML5 音频标签是否有特殊原因？因为您可以设置为不显示控件并将其用于使用 javascript 播放/停止，并根据需要将图像从播放切换到停止。使用 jQuery：

你有这个图像：

```
<a href="#" id="audioPlayStop" title="stop">
    <img src="images/stop.png" />
</a> 
```

还有这个不可见的音频标签：

```
<audio id="audio">
<source src="somethingtoplay.mp3" type="audio/mpeg" />
</audio>

var audio = document.getElementById('audio'); // $('#audio') won't work for audio API!
    $('#audioPlayStop').toggle( 

        function () {

            $(this).attr('title', 'play');
            $(this).add('img').attr('src', 'images/play.png');

            audio.pause();

            console.log('Paused');
        }, 
        function () {
            $(this).attr('title', 'stop');
            $(this).add('img').attr('src', 'images/stop.png');

            audio.play();           

            console.log('Play started');
        } //function
    ); 
```

这个脚本实际上是暂停而不是停止。但是您可以知道如何阻止它，因为您可以使用 audio.src = ''; 来阻止它。音频.load(); // 什么都不加载，所以它停止（音频 API 中没有 stop()）

# database - GQL 中有 OR 运算符吗？

> ID：11872654
> 
> 赞同：4
> 
> 时间：2012-08-08T20:29:55.900
> 
> 标签：database, google-app-engine, gql, gqlquery

我不知道这里是否有人问过这个问题。我在“喜欢”运算符上看到了几个问题，但我不确定这是否是我正在寻找的。对不起，我在这方面是个菜鸟。但是我正在从 MySQL 迁移到 Google App Engine，并且想知道 GQL 中是否有类似于 MySQL 中的 OR 运算符。

基本上我想要实现的是通过他们的用户名或电子邮件地址登录名称。所以我的查询会是这样的。

```
query = db.GqlQuery("SELECT * FROM mytable 
                     where username = :name 
                     OR email = :email 
                     AND password = :password",
                     name = user,
                     email = email,
                     password = pass1) 
```

我意识到我可以执行两个查询并检查每个查询是否成功完成并能够实现这一点，但我只是想知道 GQL 中是否已经有一个可用的查询。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T20:41:48.167

你不能`OR`用`GQL`; 它仅支持`IN`您可以将其视为`OR`特定属性的有限形式。
就像您已经说过的那样，您唯一的选择是执行两个不同的查询并组合结果。

如果您选择的语言是 Java，请查看[Query.CompositeFilter](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/Query.CompositeFilter)，您可以使用它来使用运算符构造过滤器`OR`。

# html - 网站在 IE9 上针对不同计算机呈现不同

> ID：11872660
> 
> 赞同：1
> 
> 时间：2012-08-08T20:30:12.407
> 
> 标签：html, css, web, internet-explorer-9

我最近建立了我第一个发布的网站。www.adenschoolofmotoring.co.uk 问题是当我在 IE9 中查看它时出现渲染问题。

奇怪的是，我的家用笔记本电脑使用 IE9 并且渲染效果很好，但是当我使用我的工作笔记本电脑和相同的浏览器时，IE9 渲染到处都是。

有没有人知道为什么会这样？如果我为 IE 编写一个单独的 CSS 脚本，我会遇到同样的问题吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:44:48.990

在您的源代码中看到此代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<html>
    <link href="adencss.css" rel="stylesheet" type="text/css" />
    <div class="container">
        <div id="header">
            <head>
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
            <title> Home- Aden School of Motoring</title>

            <div id="logohead">
                <div id="imagelog">
                    <a href = "index.html"><img src="images/adentran.png" width="350" height="130"/></a>
                </div>

                <div id="slogan">
                    <img src="images/slogan.gif" width="200" height="70"/>
                </div>
            </div>

                <div id="navMenu">
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="Prices.html">Prices</a></li>
                        <li><a href="Coverage.html">Coverage</a></li>
                        <li><a href="Contacts.html">Contacts</a></li>
                        <li><a href="#">Resources</a></li>
                    </ul>
                </div>

            </head>

            <div class="push"></div>
        </div>

        <body>
                <div id="homeblurb"> 
```

您不仅定义了 2 个 html 标签，而且还呈现了标签的`<div>`外部`<body>`。在里面`<div class='container'>`你也有 head 标签。您可以尝试修复您的标记，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:39:29.103

其中一台计算机的浏览器设置可能已更改。某些浏览器允许用户为常见的 HTML 标记指定样式设置，例如 through 等... 要检查这一点，请打开浏览器并转到：工具 > Internet 选项 > 在常规选项卡的右下角，单击“辅助功能”按钮。如果这里有任何检查，或者“用户样式表”处于活动状态，它将覆盖站点中的 CSS。

# erlang - 当我用 MFA 生成一些东西时，如果我包含一个大列表、dict 等，它会被复制吗？

> ID：11872661
> 
> 赞同：3
> 
> 时间：2012-08-08T20:30:20.633
> 
> 标签：erlang

这很令人困惑，因为当我更新它时它无论如何都会“复制”，但据我所知，它只是在大多数时间复制指针，而不是进行某种深度复制。如果我生成，它会制作某种完整的副本吗？如果我从不修改它怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T08:53:36.310

是的，当您生成时，您需要将传递给生成函数的每个术语复制到新进程的堆中。

当您更新列表或字典时，不会复制任何未更改的元素，因为指向这些元素的指针位于同一个堆中并且可以用于新术语。考虑以下示例：

```
A = [1,2,3],
B = [0|A]. 
```

在这种情况下，对于`B`术语，您只需在堆中为一个 cons 单元分配内存，该单元的第一个元素是术语`0`，第二个元素是指向`A`列表的第一个 cons 单元的指针。该`A`列表在同一个堆中。

当你生成时，新进程有自己的堆，所以它使用的所有数据都必须复制到那里。

如果生成的进程不打算访问大型数据结构中的所有元素，那么在生成之前提取相关数据或使用 ETS 表（当您传递 ETS 表时仅传递表引用但您需要复制或复制您更改或访问的任何元素）。

# asp.net-mvc-3 - mvc3 noobie：我的样式表在 IE 中没有正确链接（但在 chrome 中有效）

> ID：11872665
> 
> 赞同：0
> 
> 时间：2012-08-08T20:30:38.180
> 
> 标签：asp.net-mvc-3

我正在通过音乐商店教程学习 ASP.net MVC 3——但将 C# 转换为 VB。[http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-3](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-3)

我已经下载了教程的样式表，并将 content/site.css 替换为音乐商店站点的样式表。如果我打开位于 content 文件夹中的 Site.css 文件，那么我在 site.css 中看到的代码与来自 mvcmusicstore.codeplex.com 的示例代码完全一样。

如果我运行应用程序并在 IE 中打开它，样式表不会“链接起来”。但如果我在 chrome 中运行它，它确实如此。

这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:37:11.673

通过 Internet 选项或使用 ctrl-f5 清除缓存。

另一种选择是在您的 html 中的 css 链接上放置一个随机查询字符串参数：

```
<link href=".......css?id=1" /> // 2, 3, etc.. 
```

# asp.net-mvc - 在 ASP MVC 3 上将 CDN 和 Telerik 用于 Web 资产

> ID：11872666
> 
> 赞同：0
> 
> 时间：2012-08-08T20:30:42.280
> 
> 标签：asp.net-mvc, scripting, telerik, cdn

所以让我先说我以前从未使用过 CDN。我理解它的工作方式是它基本上寻找一个文件并在它存在时抓取它，如果它不存在则使用服务器本地的文件。

所以我们使用 Telerik 并且有很多脚本组。例子：

```
@(Html.Telerik().ScriptRegistrar()
        .jQuery(false)
        .Scripts(scripts =>
            scripts.AddGroup("PublicLayoutScripts", group =>
                group
                    .Add("script1.js")
                    .Add("script2.js")
                    .Add("script3.js")
                    .Combined(true)
                    .Compress(true)
                    .CacheDurationInDays(0.0416f)//one hour
                    .ContentDeliveryNetworkUrl("url/to/precompiled/assets/file").
        ))
) 
```

所以我们有这个脚本组，Telerik 组合/压缩脚本并创建一个asset.axd 文件并返回 html 以引用该文件。

我现在的问题是，Telerik 是否有办法获取定义的文件组，并组合/压缩然后将 .axd 文件输出到硬盘驱动器，然后将它们上传到 CDN。

我用谷歌搜索了很多，但没有找到太多，也许我的关键词没有达到标准。此外，使用 Telerik 的 CDN 也不是替代解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:18:19.093

Amazon 的云服务支持目标源，如果文件在 CDN 上不存在，则基本上允许从您的站点检索文件。

# wcf - wcf服务证书

> ID：11872668
> 
> 赞同：1
> 
> 时间：2012-08-08T20:30:53.310
> 
> 标签：wcf, authentication, certificate

我对 WCF 中的证书凭据感到非常困惑。我有一项服务，并想与消息安全挂钩。

当我添加新行为时，serviceCredentials 标记有 2 个选项。1 - serviceCertificate 和 2 - clientCertificate。

我有兴趣知道这些标签的含义。servicecertificate 是告诉客户它正在寻找的证书还是正在寻找正确的证书并进行验证的 clientcertificate？

我想使用 basicHttpBinding。

非常感谢您回答问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T05:34:19.000

serviceCertificate 标记指定服务器用来标识自身和传输安全的证书。当客户端发送请求时，serverCertificate 标记中指定的服务器证书也会呈现给客户端，以便客户端可以信任服务器并对其进行验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:24:45.740

如果您正在编写需要双工通信模式的服务，则使用 clientCertificate，通常对于每个请求，客户端都会将其证书发送到服务，因此服务不需要副本。但是，这不是双工模式的情况，因为服务没有正常方式的请求......所以它需要提前。

serviceCertificate 如您所愿，用于您的消息加密的证书

MSDN 说明很好地涵盖了它们：

[http://msdn.microsoft.com/en-us/library/ms731340](http://msdn.microsoft.com/en-us/library/ms731340) -- serviceCertificate

[http://msdn.microsoft.com/en-us/library/ms731367](http://msdn.microsoft.com/en-us/library/ms731367) -- clientCertificate

希望有帮助

# java - java - 如何在Java中每次使用JTextField将值输入到数组中

> ID：11872669
> 
> 赞同：-1
> 
> 时间：2012-08-08T20:30:52.343
> 
> 标签：java, arrays, swing, actionlistener, jtextfield

我正在创建一个程序，用户将在其中将某人的姓名添加到文本字段中，但是我创建了数组，`String[] studentNames;`但是当用户按下提交时，它会将名称添加到数组中，但我想要它，以便每个新的文本条目都会单独添加到数组元素中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T20:33:18.543

您应该使用 ArrayList 而不是 Array，因为您没有固定大小的列表。

```
List<String> list = new ArrayList<String>();

// ...

button.addActionListener(new ActionListener()
{
    @Override
    public void actionPerformed(ActionEvent e)
    {
        String text = textField.getText();
        list.add(text);
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T20:35:01.157

您应该在一个类中创建一个静态字段 String[] studentNames，并在提交按钮的 ActionListener 中，每当用户插入名称时更新该数组，

如果您不知道用户在分配数组之前将插入的名称数量，则应使用 ArrayList

# javascript - 指定饼图 Highchart 的颜色

> ID：11872671
> 
> 赞同：0
> 
> 时间：2012-08-08T20:30:55.623
> 
> 标签：javascript, jquery, highcharts

我想为我的饼图指定颜色。

我写了一些这样的代码，但它似乎不起作用。有人知道如何解决这个问题吗？

```
{
                name: data[i].status, 
                color: function() {
                    if (data[i].status === "Working") {
                        return '#60a57c';
                    } else if (data[i].status === "Stopped \/ Idle") {
                        return '#e7494d';
                    } else if (data[i].status === "Transport") {
                        return '#fac101';
                    } else if (data[i].status === "Headland Turning") {
                        return '#66cc13';
                    }
                },
                y: data[i].val
            } 
```

基本上我想要的是如果`status`is `"Working"`，那么我们将颜色指定为`"#60a57c"`，等等。我不希望 HighChart 为我自动生成颜色。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:37:37.087

`color`必须是一个字符串。

所以尝试以下方法：

```
var colors = {
    'Working': '#60a57c',
    'Stopped \/ Idle': '#e7494d',
    'Transport': '#fac101',
    'Headland Turning': '#66cc13'
};

var serie = {
    name: data[i].status,
    color: colors[data[i].status],
    y: data[i].val
}; 
```

希望这对您有所帮助。

[*参考*](http://www.highcharts.com/stock/ref/#plotOptions-series--color)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:37:47.477

您正在将颜色设置为函数指针。相反，尝试在单独的位置定义函数并简单地调用它来获取数据中的颜色值。

# javascript - jQuery .js 文件的奇怪问题（UI 和普通 jQuery）

> ID：11872674
> 
> 赞同：0
> 
> 时间：2012-08-08T20:30:58.847
> 
> 标签：javascript, jquery, html, autocomplete

> **可能重复：**
> [我是否应该在我的 SCRIPT 标签中包含 type=“text/javascript”？](https://stackoverflow.com/questions/985408/should-i-include-type-text-javascript-in-my-script-tags)

正确的。我花了大约 4 个小时才发现这个 .autocomplete 的小错误。

由于我又傻又累，我重新提出了这个问题，我有不同的源文件。

这有效：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"</script> <!-- -->
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.12/jquery-ui.min.js"</script>  <!--   --> 
```

但不是这个：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"</script> <!-- -->
<!--<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.12/jquery-ui.min.js"</script>  <!--   --> 
```

也不是这个：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
<!--<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"</script> <!-- -->
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.12/jquery-ui.min.js"</script>  <!--   --> 
```

这是文件：

```
 function querypage_to(element, str)
    {
        var availableTags = [
            "ActionScript",
            "Scheme"
        ];
        $("input#to").autocomplete({
            source: availableTags
        });

    }
</script>

<div>
    <form>
        <input id="to" type="text" onkeyup="querypage_to(this, this.value);" placeholder="To" autocomplete="on" ><br />
        <input type="text" onkeyup="querypage_from(this, this.value);" placeholder="From" autocomplete="on" ><br />
        <!--<input onfocus="handleFocus(this);" onblur="handleBlur(this);" value="From" type="text" onclick="querypage_from(this.value);" placeholder="From" ><br />
        <!--<input type="text" id="someInputField" value="Suggestion..." onfocus="handleFocus(this);" onblur="handleBlur(this);">-->
    </form>
</div>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"</script> <!-- -->
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.12/jquery-ui.min.js"</script>  <!--   --> 
```

为什么是这样？

#

回答：我错过了“>”，该死的菜鸟错误！

# sql - Ruby/Rails：has_many 关联中的复杂条件

> ID：11872677
> 
> 赞同：1
> 
> 时间：2012-08-08T20:31:17.390
> 
> 标签：sql, ruby-on-rails, ruby, ruby-on-rails-3, associations

我有一个`Transaction`模型。一个事务有一个`seller_id`列和一个`buyer_id`. 两者都充满了`User`ID。

所以：

```
class Transaction
  belongs_to :seller, :class_name => 'User'
  belongs_to :buyer, :class_name => 'User'
end 
```

_

```
class User
  has_many :selling_transactions, :class_name => 'Transaction', :foreign_key => 'seller_id'
  has_many :buying_transactions, :class_name => 'Transaction', :foreign_key => 'buyer_id'
end 
```

我想要做的是添加一个`has_many`以`User`关联不完整的交易，无论`User`是卖方还是买方。

```
class User
  has_many :incomplete_transactions, :class_name => 'Transaction', :conditions => ???
end 
```

_

我用纯 SQL 写出来，得到了我想要的结果。我的 SQL 中的联接是：

```
left outer join transactions t on ((t.seller_id = users.id and t.buyer_id is NULL) or (t.buyer_id = users.id and t.seller_id is NULL)) 
```

我如何将其`join`转化为`has_many`关联？

编辑：
我希望将不完整事务保留为 ActiveRecord::Relation （而不是数组），因此我可以执行类似 user.incomplete_transactions.limit(15) 的操作

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:52:47.170

[pdevisser 的](https://stackoverflow.com/a/11872798/624590)类似答案：您可以使用与此问题上给出的答案类似的答案：[https ://stackoverflow.com/a/307724/624590](https://stackoverflow.com/a/307724/624590)

这基本上会导致：

```
class User
  has_many :selling_transactions, :class_name => 'Transaction', :foreign_key => 'seller_id'
  has_many :buying_transactions, :class_name => 'Transaction', :foreign_key => 'buyer_id'

  has_many :incomplete_sales, :class_name => 'Transaction', :foreign_key => 'seller_id', :conditions => { :buyer_id => nil }
  has_many :incomplete_purchases, :class_name => 'Transaction', :foreign_key => 'buyer_id', :conditions => { :seller_id => nil }

  def incomplete_transactions
    incomplete_sales + incomplete_purchases
  end
end 
```

**编辑**：好的，不完全确定如何按照您希望的方式进行设置（使用 has_many），但是这些方面的内容可能对您有用：

```
class User
  has_many :selling_transactions, :class_name => 'Transaction', :foreign_key => 'seller_id'
  has_many :buying_transactions, :class_name => 'Transaction', :foreign_key => 'buyer_id'

  def incomplete_transactions
    Transaction.where("(buyer_id = ? and seller_id = NULL) or (seller_id = ? and buyer_id = NULL)", id, id)
  end
end 
```

where 语句将返回一个`ActiveRecord::Association`，因此您可以在调用它时使用 limit （或其他 activerecord 函数）跟随它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:00:16.220

您可以使用如下选项

```
:conditions = ["(t.seller_id = #{self.id} and t.buyer_id is NULL) or (t.buyer_id = #{self.id} and t.seller_id is NULL)"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T16:44:23.160

解决它！

这与@DRobinson 的解决方案非常相似，但使用 proc 和 has_many 定义而不是定义本地方法。

根据 3.1 发行说明，您现在可以在条件下使用 proc！

在 proc 内部，self 是关联所有者的对象，除非您急于加载关联，在这种情况下，self 是关联所在的类。

```
class User < ActiveRecord::Base
  has_many :incomplete_transactions , :class_name => 'Transaction', 
    :conditions => proc { incomplete_sales + incomplete_purchases }

  has_many :incomplete_sales, :class_name => 'Transaction', :foreign_key => 'seller_id', :conditions => { :buyer_id => nil }
  has_many :incomplete_purchases, :class_name => 'Transaction', :foreign_key => 'buyer_id', :conditions => { :seller_id => nil }

  has_many :selling_transactions, :class_name => 'Transaction', :foreign_key => 'seller_id'
  has_many :buying_transactions, :class_name => 'Transaction', :foreign_key => 'buyer_id'
end

class Transaction < ActiveRecord::Base
  belongs_to :seller, :class_name => 'User'
  belongs_to :buyer, :class_name => 'User'

# scope :incomplete_sales , :conditions => {:buyer_id => nil}
# scope :incomplete_purchases , :conditions => {:seller_id => nil}
end 
```

看：

*   [http://guides.rubyonrails.org/3_1_release_notes.html](http://guides.rubyonrails.org/3_1_release_notes.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T20:39:08.710

假设您使用的是 rails 3.2，我建议您创建命名范围

```
class Transaction
  belongs_to :seller, :class_name => 'User'
  belongs_to :buyer, :class_name => 'User'

  scope :incomplete_sales, :conditions => { :buyer_id => nil }
  scope :incomplete_purchases, :conditions => { :seller_id => nil }
end 
```

然后你可以访问不完整的，

```
user.selling_transactions.incomplete_sales
user.buying_transactions.incomplete_purchases 
```

**编辑**- 也更正了上面的关联

如果你想限制，你总是可以用数组做以下

```
user.selling_transactions.incomplete_sales[0,15] 
```

# css - 我在哪里可以找到 CSS 及其语法的综合参考资料？

> ID：11872679
> 
> 赞同：2
> 
> 时间：2012-08-08T20:31:23.307
> 
> 标签：css, syntax, reference, menu, formatting

我正在尝试构建一个我知道可以完成的纯 CSS 导航菜单。我已经看到了它。我可以复制其他人的，但我宁愿自己了解正在发生的事情，而不是一直复制/粘贴。

为了理解 CSS，我遇到了一些问题，我无法在互联网上的任何地方找到，而 w3schools 对此一无所知。

我花了一段时间才弄清楚两者之间的区别是什么`#nav ul {...}`，`#nav ul ul{...}`因为 w3schools 假设除了绝对基础知识之外你永远不需要做任何事情。

我目前的问题：

是什么`.sf-sub-indicator`？听起来不言自明，但我想确切地知道它在做什么。

如中`sfHover`所见`#nav li.sfHover {...}`

最后，`>`在 CSS 类 ID 中使用的意义是什么？前任：

```
#nav li:hover>ul 
```

与

```
#nav li:hover ul {...} 
```

或者

```
#nav li:hover > a {...} 
```

我在 w3schools 上没有看到对这些问题的任何解释，我不知道还能去哪里看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:34:18.937

了解 CSS 选择器的最佳资源是万维网联盟的 CSS 选择器页面：[http](http://www.w3.org/TR/CSS2/selector.html) ://www.w3.org/TR/CSS2/selector.html （选择器级别 3 条目是更新版本，可在此处找到：[http ://www.w3.org/TR/css3-selectors/](http://www.w3.org/TR/css3-selectors/)）。

阅读此内容，然后通过 Google 更轻松地获取更多信息，因为您至少会了解您要搜索的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:37:00.090

你想要的关于 CSS、JavaScript 和 HTML 的一切......立即：[http ://dochub.io/#css/](http://dochub.io/#css/)

# objective-c - XCode Objective C 警告/如何永久删除属性

> ID：11872681
> 
> 赞同：0
> 
> 时间：2012-08-08T20:31:32.700
> 
> 标签：objective-c, xcode

我使用属性在 XYZ.h 中创建了一些变量，然后在 XYZ.m 中合成了它们。

但是，在我从 XYZ.h 和 XYZ.m 中删除属性后，Xcode 认为这些属性仍然存在，并在我的实现文件中对我删除的所有属性发出警告，说它们需要方法实现。

进一步研究，我发现符号导航器中的类的属性仍然列出，尽管代码中的任何地方都不存在。此外，当我“跳转”到应该声明这些变量的位置时，它会跳转到 XYZ.h 的最顶部，很明显那里没有任何类型的东西。

除了丢弃 XYZ.h 和 XYZ.m 并重新粘贴代码之外，我怎样才能永久删除这些属性和/或删除它们的正确方法是什么（我猜除了清除它们之外我还需要做其他事情从代码）？

我已经尝试过运行干净和干净的构建文件夹，以及临时重新创建变量并销毁它们，但到目前为止没有任何效果。

我可以提供任何需要的额外信息。

编辑：非常奇怪，一旦我重新启动计算机，它加载了 XYZ.h 文件，所有属性仍然存在。显然，我对头文件所做的所有保存都没有被保存，原因不明，尽管所有看起来都相反。现在一切都很好，我删除了属性，它按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:35:13.447

很奇怪。
属性是 IBOutlets 吗？如果是这样，请将它们从 xib 中删除。如果没有，您可以尝试删除 Xcode 的派生数据：
rm -rf ~/Library/Developer/Xcode/DerivedData

祝你好运

# sql - 根据值获取唯一行并按时间排序

> ID：11872684
> 
> 赞同：0
> 
> 时间：2012-08-08T20:31:43.590
> 
> 标签：sql, group-by, sql-order-by, unique

我有下表。我想按时间（asc）获得每个源订单的 1 个。来源不固定 - 它可以是任何东西

```
Time                    |Source
------------------------------------
2012-08-18 05:00:03.000 | A
2012-08-19 06:00:03.000 | B
2012-08-18 06:00:03.000 | B
2012-08-20 06:00:03.000 | C
2012-08-21 06:00:03.000 | A 
```

所以根据上表我会得到下面的结果

```
Time                    |Source
------------------------------------
2012-08-18 05:00:03.000 | A
2012-08-18 06:00:03.000 | B
2012-08-20 06:00:03.000 | C 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:36:19.277

您想使用`MIN()`聚合函数和`GROUP BY`源值。所以我相信这会做你想要的。（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/d4b5f/2)）

```
select min([time]) minTime, source
from yourTable
group by source
order by minTime 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:36:13.200

```
select id, source, min(time) t 
from table 
group by source, id
order by t 
```

# javascript - 绑定子模型以在骨干网/木偶中查看

> ID：11872687
> 
> 赞同：1
> 
> 时间：2012-08-08T20:31:48.680
> 
> 标签：javascript, backbone.js, backbone-events, marionette, backbone-relational

我有一个具有 BankAccount 模型的 User 模型，并且我查看了谁的模型属性设置为 User 模型，并且在该视图的模板中我引用了银行帐户的属性：

```
<%= bankAccount.get('description') || 'No linked account' %> 
```

如果我更新了 bankAccount，则视图不会接受更改：

```
user.get('bankAccount').set('description', 'foobar') 
```

我尝试在 User 模型的初始化中添加以下内容，但它也不起作用。

```
initialize: function() {
  var self = this;

  this.on('change:bankAccount', function() {
    self.get('bankAccount').bind('change', function() {
      self.trigger('change');
    });
  });
} 
```

有什么建议么？此外，如果有帮助，这两个模型都使用骨干关系。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T21:07:50.830

让您的视图订阅`description`BankAccount 模型上的更改事件并重新呈现自己

```
UserView = Backbone.View.extend({
  initialize: function() {
    this.model.get('bankAccount').on('change:description', this.render, this);
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T00:28:22.863

从[Backbone-relational Events](https://github.com/PaulUithol/Backbone-relational#events)你会看到你可以绑定到`update:<key>`下面有一个例子（我在下面复制/粘贴）关于如何监听变化/更新`HasMany`和`HasOne`关系

```
// Use the 'update' event to listen for changes on a HasOne relation 
// (like 'Person.livesIn').
paul.bind( 'update:livesIn', function( model, attr ) {
    console.debug( 'update to %o', attr );
}); 
```

# c# - XML 节点始终为空

> ID：11872688
> 
> 赞同：0
> 
> 时间：2012-08-08T20:31:50.237
> 
> 标签：c#, xml, xml-namespaces

以下函数不会返回我想要的节点的值，即“CompanyPolicyId”。我已经尝试了很多东西，但我仍然无法让它工作。有谁知道可能是什么问题？

```
 public void getpolicy(string rootURL, string policyNumber)
        {
            string basePolicyNumber = policyNumber.Remove(policyNumber.Length - 2);
            basePolicyNumber = basePolicyNumber + "00";

            using (WebClient client = new WebClient())
            {
                NetworkCredential credentials = new NetworkCredential();
                credentials.UserName = AppVars.Username;
                credentials.Password = AppVars.Password;
                client.Credentials = credentials;

                try
                {
                    XmlDocument doc = new XmlDocument();

                    doc.LoadXml(client.DownloadString(rootURL + basePolicyNumber));
                    XmlNamespaceManager mgr = new XmlNamespaceManager(doc.NameTable);
                    mgr.AddNamespace("zzzlocal", "http://com.zzz100.policy.data.local");

                    // Select the Identifier node with a 'name' attribute having an 'id' value
                    var node = doc.DocumentElement.SelectSingleNode("/InsurancePolicy/Indentifiers/Identifier[@name='CompanyPolicyId']", mgr);
                    if (node != null && node.Attributes["value"] != null)
                    {
                        // Pick out the 'value' attribute's value
                        var val = node.Attributes["value"].Value;

                    }
                }
                catch (Exception ex)
                {
                    MessageBox.Show(ex.Message);
                }
            } 
```

这是 XML 文档：

```
<InsurancePolicy xmlns:zzzlocal="com.zzz100.policy.data.local" schemaVersion="2.7" variant="multiterm">
<Identifiers>
<Identifier name="VendorPolicyId" value="AAAA"/>
<Identifier name="CompanyPolicyId" value="BBBB"/>
<Identifier name="QuoteNumber" value="CCCC"/>
<Identifier name="pxServerIndex" value="DDDD"/>
<Identifier name="PolicyID" value="EEEE"/>
</Identifiers>
</InsurancePolicy> 
```

在过去的 6 个小时里，我一直在尝试解决这个问题。老实说，这很糟糕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:44:24.543

尝试使用这个

```
//Identifier[@name='CompanyPolicyId']" 
```

或下面的不同方法

```
XElement rootElement = XElement.Load(<url here>);
string targetValue =
  (string)rootElement.Elements("Identifier")
  .Single(e => (string)e.Attribute("name") == "CompanyPolicyId")
  .Attribute("value"); 
```

这假设您希望能够按名称定位标识符节点之一，并且您确定会有一个具有该名称的元素。如果不是这样，则 .Single 调用将在未找到该节点时抛出异常。

如果您需要使用凭据并想使用 WebClient，那么您可以使用以下内容：（注意，我没有进行异常处理、检查流可用性或以其他方式处置/关闭流，这只是一个如何获取的示例它“工作”）

```
string uri = "> url here! <";
System.Net.WebClient wc = new System.Net.WebClient();
StreamReader sr = new StreamReader(wc.OpenRead(uri));
string xml = sr.ReadToEnd();
XElement rootElement = XElement.Parse(xml);
string targetValue =
  (string)rootElement.Elements("Identifier")
  .Single(e => (string)e.Attribute("name") == "CompanyPolicyId")
  .Attribute("value"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:46:07.943

这是更简单的版本

```
 [Test]
    public void Test()
    {
        XElement root = XElement.Load(@"C:\1.xml");
        XElement identifier = GetIdentifierByName(root, "CompanyPolicyId");
        if (identifier == null)
        {
            return;
        }
        Console.WriteLine(identifier.Attribute("value"));
    }

    private static XElement GetIdentifierByName(XContainer root, string name)
    {
        return root.Descendants()
            .Where(x => x.Name.LocalName == "Identifier")
            .FirstOrDefault(x => x.Attribute("name").Value == name);
    }
} 
```

控制台输出是`BBBB`

# python - 左连接上的 SQLAlchemy 错误

> ID：11872691
> 
> 赞同：1
> 
> 时间：2012-08-08T20:31:58.963
> 
> 标签：python, postgresql, sqlalchemy

我是 SQLAlchemy 的新手，我正在尝试实现这个 SQL：

```
SELECT 
    node.*,
    alarms.*
FROM
    node
        LEFT JOIN
            alarms ON alarms.nodeid = node.nodeid 
WHERE
    node.foreignid IN ('foreignid_1','foreignid_2','foreignid_3') 
ORDER BY node.nodeid; 
```

我想出了这个说法：

```
stmt = session.query(Node, Alarms).outerjoin(Alarms, Alarms.nodeid == Node.nodeid).filter(Node.foreignid.in_(['foreignid_1','foreignid_2','foreignid_3'])).order_by(asc(Node.nodeid))
results = stmt.all() 
```

生成的 SQL 如下所示：

```
SELECT 
    node.nodeid AS node_nodeid,
    node.dpname AS node_dpname,
    node.nodecreatetime AS node_nodecreatetime,
    node.nodeparentid AS node_nodeparentid,
    node.nodetype AS node_nodetype,
    node.nodesysoid AS node_nodesysoid,
    node.nodesysname AS node_nodesysname,
    node.nodesysdescription AS node_nodesysdescription,
    node.nodesyslocation AS node_nodesyslocation,
    node.nodesyscontact AS node_nodesyscontact,
    node.nodelabel AS node_nodelabel,
    node.nodelabelsource AS node_nodelabelsource,
    node.nodenetbiosname AS node_nodenetbiosname,
    node.nodedomainname AS node_nodedomainname,
    node.operatingsystem AS node_operatingsystem,
    node.lastcapsdpoll AS node_lastcapsdpoll,
    node.foreignsource AS node_foreignsource,
    node.foreignid AS node_foreignid,
    alarms.alarmid AS alarms_alarmid,
    alarms.eventuei AS alarms_eventuei,
    alarms.dpname AS alarms_dpname,
    alarms.nodeid AS alarms_nodeid,
    alarms.ipaddr AS alarms_ipaddr,
    alarms.serviceid AS alarms_serviceid,
    alarms.reductionkey AS alarms_reductionkey,
    alarms.alarmtype AS alarms_alarmtype,
    alarms.counter AS alarms_counter,
    alarms.severity AS alarms_severity,
    alarms.lasteventid AS alarms_lasteventid,
    alarms.firsteventtime AS alarms_firsteventtime,
    alarms.lasteventtime AS alarms_lasteventtime,
    alarms.firstautomationtime AS alarms_firstautomationtime,
    alarms.lastautomationtime AS alarms_lastautomationtime,
    alarms.description AS alarms_description,
    alarms.logmsg AS alarms_logmsg,
    alarms.operinstruct AS alarms_operinstruct,
    alarms.tticketid AS alarms_tticketid,
    alarms.tticketstate AS alarms_tticketstate,
    alarms.mouseovertext AS alarms_mouseovertext,
    alarms.suppresseduntil AS alarms_suppresseduntil,
    alarms.suppresseduser AS alarms_suppresseduser,
    alarms.suppressedtime AS alarms_suppressedtime,
    alarms.alarmackuser AS alarms_alarmackuser,
    alarms.alarmacktime AS alarms_alarmacktime,
    alarms.managedobjectinstance AS alarms_managedobjectinstance,
    alarms.managedobjecttype AS alarms_managedobjecttype,
    alarms.applicationdn AS alarms_applicationdn,
    alarms.ossprimarykey AS alarms_ossprimarykey,
    alarms.x733alarmtype AS alarms_x733alarmtype,
    alarms.x733probablecause AS alarms_x733probablecause,
    alarms.qosalarmstate AS alarms_qosalarmstate,
    alarms.clearkey AS alarms_clearkey,
    alarms.ifindex AS alarms_ifindex,
    alarms.eventparms AS alarms_eventparms
FROM
    node
        LEFT OUTER JOIN
            alarms ON alarms.nodeid = node.nodeid
WHERE
    node.foreignid IN ('foreignid_2' , 'foreignid_1', 'foreignid_3')
ORDER BY node.nodeid ASC 
```

但它也会抛出这个错误（来自 iPython）：

```
In [86]: stmt = session.query(Node, Alarms).outerjoin(Alarms, Alarms.nodeid == Node.nodeid).filter(Node.foreignid.in_(['foreignid_1','foreignid_3','foreignid_2'])).order_by(asc(Node.nodeid))

In [87]: results = stmt.all()
---------------------------------------------------------------------------
InternalError                             Traceback (most recent call last)
<ipython-input-87-1110c354b407> in <module>()
----> 1 results = stmt.all()

/usr/local/lib/python2.6/dist-packages/SQLAlchemy-0.7.8-py2.6-linux-x86_64.egg/sqlalchemy/orm/query.pyc in all(self)
   2113
   2114         """
-> 2115         return list(self)
   2116
   2117     @_generative(_no_clauseelement_condition)

/usr/local/lib/python2.6/dist-packages/SQLAlchemy-0.7.8-py2.6-linux-x86_64.egg/sqlalchemy/orm/query.pyc in __iter__(self)
   2225         if self._autoflush and not self._populate_existing:
   2226             self.session._autoflush()
-> 2227         return self._execute_and_instances(context)
   2228
   2229     def _connection_from_session(self, **kw):

/usr/local/lib/python2.6/dist-packages/SQLAlchemy-0.7.8-py2.6-linux-x86_64.egg/sqlalchemy/orm/query.pyc in _execute_and_instances(self, querycontext)
   2240                         close_with_result=True)
   2241
-> 2242         result = conn.execute(querycontext.statement, self._params)
   2243         return self.instances(result, querycontext)
   2244

/usr/local/lib/python2.6/dist-packages/SQLAlchemy-0.7.8-py2.6-linux-x86_64.egg/sqlalchemy/engine/base.pyc in execute(self, object, *multiparams, **params)
   1447                                                 object,
   1448                                                 multiparams,
-> 1449                                                 params)
   1450         else:
   1451             raise exc.InvalidRequestError(

/usr/local/lib/python2.6/dist-packages/SQLAlchemy-0.7.8-py2.6-linux-x86_64.egg/sqlalchemy/engine/base.pyc in _execute_clauseelement(self, elem, multiparams, params)
   1582             compiled_sql,
   1583             distilled_params,
-> 1584             compiled_sql, distilled_params
   1585         )
   1586         if self._has_events:

/usr/local/lib/python2.6/dist-packages/SQLAlchemy-0.7.8-py2.6-linux-x86_64.egg/sqlalchemy/engine/base.pyc in _execute_context(self, dialect, constructor, statement, parameters, *args)
   1696                                 parameters,
   1697                                 cursor,
-> 1698                                 context)
   1699             raise
   1700

/usr/local/lib/python2.6/dist-packages/SQLAlchemy-0.7.8-py2.6-linux-x86_64.egg/sqlalchemy/engine/base.pyc in _execute_context(self, dialect, constructor, statement, parameters, *args)
   1689                                     statement,
   1690                                     parameters,
-> 1691                                     context)
   1692         except Exception, e:
   1693             self._handle_dbapi_exception(

/usr/local/lib/python2.6/dist-packages/SQLAlchemy-0.7.8-py2.6-linux-x86_64.egg/sqlalchemy/engine/default.pyc in do_execute(self, cursor, statement, parameters, context)
    329
    330     def do_execute(self, cursor, statement, parameters, context=None):
--> 331         cursor.execute(statement, parameters)
    332
    333     def do_execute_no_params(self, cursor, statement, context=None):

InternalError: (InternalError) current transaction is aborted, commands ignored until end of transaction block
 'SELECT node.nodeid AS node_nodeid, node.dpname AS node_dpname, node.nodecreatetime AS node_nodecreatetime, node.nodeparentid AS node_nodeparentid, node.nodetype AS node_nodetype, node.nodesysoid AS node_nodesysoid, node.nodesysname AS node_nodesysname, node.nodesysdescription AS node_nodesysdescription, node.nodesyslocation AS node_nodesyslocation, node.nodesyscontact AS node_nodesyscontact, node.nodelabel AS node_nodelabel, node.nodelabelsource AS node_nodelabelsource, node.nodenetbiosname AS node_nodenetbiosname, node.nodedomainname AS node_nodedomainname, node.operatingsystem AS node_operatingsystem, node.lastcapsdpoll AS node_lastcapsdpoll, node.foreignsource AS node_foreignsource, node.foreignid AS node_foreignid, alarms.alarmid AS alarms_alarmid, alarms.eventuei AS alarms_eventuei, alarms.dpname AS alarms_dpname, alarms.nodeid AS alarms_nodeid, alarms.ipaddr AS alarms_ipaddr, alarms.serviceid AS alarms_serviceid, alarms.reductionkey AS alarms_reductionkey, alarms.alarmtype AS alarms_alarmtype, alarms.counter AS alarms_counter, alarms.severity AS alarms_severity, alarms.lasteventid AS alarms_lasteventid, alarms.firsteventtime AS alarms_firsteventtime, alarms.lasteventtime AS alarms_lasteventtime, alarms.firstautomationtime AS alarms_firstautomationtime, alarms.lastautomationtime AS alarms_lastautomationtime, alarms.description AS alarms_description, alarms.logmsg AS alarms_logmsg, alarms.operinstruct AS alarms_operinstruct, alarms.tticketid AS alarms_tticketid, alarms.tticketstate AS alarms_tticketstate, alarms.mouseovertext AS alarms_mouseovertext, alarms.suppresseduntil AS alarms_suppresseduntil, alarms.suppresseduser AS alarms_suppresseduser, alarms.suppressedtime AS alarms_suppressedtime, alarms.alarmackuser AS alarms_alarmackuser, alarms.alarmacktime AS alarms_alarmacktime, alarms.managedobjectinstance AS alarms_managedobjectinstance, alarms.managedobjecttype AS alarms_managedobjecttype, alarms.applicationdn AS alarms_applicationdn, alarms.ossprimarykey AS alarms_ossprimarykey, alarms.x733alarmtype AS alarms_x733alarmtype, alarms.x733probablecause AS alarms_x733probablecause, alarms.qosalarmstate AS alarms_qosalarmstate, alarms.clearkey AS alarms_clearkey, alarms.ifindex AS alarms_ifindex, alarms.eventparms AS alarms_eventparms \nFROM node LEFT OUTER JOIN alarms ON alarms.nodeid = node.nodeid \nWHERE node.foreignid IN (%(foreignid_1)s, %(foreignid_2)s, %(foreignid_3)s) ORDER BY node.nodeid ASC' {'foreignid_1': 'foreignid_1', 'foreignid_3': 'foreignid_3', 'foreignid_2': 'foreignid_2'} 
```

我只是不明白生成的 SQL 是好的错误是什么。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T20:35:16.203

您的异常与您生成的 SQL 无关，这正是您想要的。

您的数据库连接处于错误状态；事务被中止（可能是由于某处的完整性错误）并且没有启动新事务，并且您的数据库不喜欢那样。

在 iPython 提示符下试验 SQLAlchemy 时，最好打开自动提交，这样您就不必处理复杂的事务管理。

# android - 无法加载 libfoo：findLibrary 返回 null

> ID：11872692
> 
> 赞同：3
> 
> 时间：2012-08-08T20:32:04.660
> 
> 标签：android, android-ndk, java-native-interface

我做的一切都“正确”：

1.  `LOCAL_MODULE := libfoo`在 jni/Android.mk 中创建了我的 JNI 模块

2.  叫`System.loadlibrary("libfoo")`

3.  为该方法声明了正确的签名，甚至仔细检查了它`javah`

但仍然收到`UnsatisfiedLinkError`消息异常：

> 无法加载 libfoo：findLibrary 返回 null

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-08T20:33:27.437

显然*loadLibrary*方法会自动添加“lib”，因此加载文件名（例如“libfoo.so”）的正确方法是调用`System.loadLibrary("foo")`.

我很难学到这一点，所以你不必这样做。

# c# - 反序列化 XML 文件，并从 Schema 中提取不存在值的默认值

> ID：11872696
> 
> 赞同：0
> 
> 时间：2012-08-08T20:32:32.890
> 
> 标签：c#, xml, xsd, xml-deserialization

我正在使用 C#，并且正在尝试将 XML 文件反序列化到我的应用程序中。这是一个从多个目录中提取 XML 文件的线程过程，其中每个目录可能具有基于我们客户需求的特定模式。

我想要做的是使用特定目录的模式，以及我需要的反序列化器将 XML 文件中的数据加载到我的应用程序中的对象中。但是，如果 XML 文件中未指定元素，我需要反序列化程序从 Schema 中获取默认值。

我发现有一种方法可以使用 [XmlSchemaProviderAttribute("GetSchemaFile")] 属性和静态方法（参考[http://msdn.microsoft.com/en-us/magazine /cc300797.aspx](http://msdn.microsoft.com/en-us/magazine/cc300797.aspx)）。但是，这不适用于我目前的情况，因为我有多个特定于不同文件的模式。

有谁知道这样做的方法？还是我应该尝试寻找另一种方法来处理我对默认值的需求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:44:14.797

每个 XML 文件都应该指定它使用的模式。这通常在根元素中完成。

在下面的示例中，架构与 XML 文件位于同一目录中。显然，这会根据模式所在的位置（相对于 XML 文件）而改变。但是，关键是您使用 XML 文件来引用架构。然后，您的 XML 解析器将自动应用任何默认值。

```
<node name="/org/freedesktop/sample_object" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:noNamespaceSchemaLocation="introspect.xsd"> 
```

这是一个[链接](http://www.edankert.com/grammars/xsd.referencing.html)，其中简要概述了如何引用模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T22:41:11.163

所以我刚刚有机会测试你关于使用 noNamespaceSchemaLocation 的建议@David，并且 XmlSerializer 似乎没有从那里列出的架构中提取任何信息作为默认值。我整天都在寻找一种方法来完成这项工作，这就是我发布的原因。

*** 编辑 ***

在浏览了许多不同的站点之后，我发现如果 Schema 必须是动态的，那么使用 C# XML Serializer Deserialization 方法从模式中提取默认值是不可能的，这意味着被反序列化的对象可以在不同的模式中具有不同的默认值。

我有一个解决方案可以在我目前的情况下解决这个问题，以便我们的软件处理默认值。

感谢@David 的建议。他们非常感激。

# html - 自动将特殊字符转换为 html 实体。谁能认出这个角色？

> ID：11872697
> 
> 赞同：0
> 
> 时间：2012-08-08T20:32:34.263
> 
> 标签：html, character, html-entities

这个字符是什么 †<br> 有没有办法将这些字符自动转换为它们的 html 实体？我使用 DreamWeaver 和 Notepad++。我已经尝试过[这个网站](http://centricle.com/tools/html-entities/)，但它的功能还不够强大。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-09-10T21:14:32.817

我使用了记事本++的HTML插件。如果您转到插件 > 插件管理器并打开它并选择 HTML 插件。从那时起，您可以选择您感兴趣的文本，然后转到插件> html 标签> 解码或编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T18:16:10.957

如果您使用的是 Dreamweaver，您可以在代码视图中写入 &，它会打开一个漂亮的小窗口，让您可以滚动列表中的实体；同样在设计视图中，默认情况下它会自动将输入转换为代码中的实体。

这个角色是

```
&dagger; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T20:41:10.357

不要编写自己的转换表。

使用[encodeURIComponent](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T08:52:35.147

[这个站点](http://unicode-search.net/unicode-namesearch.pl?term=%E2%98%A3&.submit=Submit%20Query)只需要一个字符，并为您提供它的 unicode、utf-8 表示和 html 实体。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T20:40:56.403

这是一把“匕首”：

[http://www.fileformat.info/info/unicode/char/2020/index.htm](http://www.fileformat.info/info/unicode/char/2020/index.htm)

HTML 实体是`&#8224;`.

# java - 从节点选择中选择节点

> ID：11872700
> 
> 赞同：0
> 
> 时间：2012-08-08T20:32:46.407
> 
> 标签：java, xml, xpath, dom4j

我有一个正在解析的大型 XML 文件。

我的第一个 selectNodes 语句为我提供了一个我想要解析的所有元素的列表。

对于第一个 selectNodes 语句返回的每个元素，我想运行另一个 selectNodes。

XML 可能如下所示：

```
<A>
    <B></B>
    <C></C>
</A>
<A>
    <B></B>
    <C></C>
</A> 
```

我受到限制，因为我必须解析内部节点，即“A”的每个子集，一次一个。

最终目标是对每个 B、C 组合做一些事情，一次一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-21T13:14:46.803

在 xPath 中，您可以使用双斜杠 (//) 来查找父节点中具有特定名称的所有节点。如果您希望返回文档中的所有节点，您的表达式可以以“//”开头。

要在单独的列表中返回所有 B 节点和所有 C 节点，请尝试：

```
List<?> bNodes = document.selectNodes("//B");
List<?> cNodes = document.selectNodes("//C");

for (Object b : bNodes)
  for (Object c : cNodes)
    //do something with each b/c combination 
```

或者，要指定要搜索的根节点，请使用：

```
List<?> bNodes = document.selectNodes("A//B");
List<?> cNodes = document.selectNodes("A//C"); 
```

document 是您使用 SAXReader 读取的文件在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:43:45.060

您可以提供所需的任何节点作为 XPath 表达式的上下文。假设您有一个 XPath 表达式来选择 B 节点：

```
XPathExpression expr = xpath.compile("./B"); 
```

假设您在变量中有 A 节点`Node aNode`。您可以使用简单的选择 B 元素

```
Object result = expr.evaluate(aNode, XPathConstants.NODE); 
```

结果将是类型`Node`。

# javascript - iOS 模拟器抛出无法解析 JSON

> ID：11872702
> 
> 赞同：1
> 
> 时间：2012-08-08T20:32:47.570
> 
> 标签：javascript, json, appendchild

我收到下面显示的代码引发的错误。但是，这很奇怪，因为如果我在 Safari、Chrome 或 Firefox 等浏览器中本地运行此 .html 文件，我不会收到错误消息，并且程序运行正常。当我在我的 iOS 模拟器中加载 .html 文件时，我得到一个 JavaScript 错误：未定义的语法错误：无法解析 JSON 字符串。

我会假设我有一些未定义的东西，但为什么错误只会出现在 iOS 模拟器上？

```
function getData () {
    toggleControls("on");
    if(localStorage.length === 0){
        alert("There are no items saved in Local Storage.");
    }
    var makeDiv = document.createElement('div');
    makeDiv.setAttribute("id", "items");
    var makeList = document.createElement('ul');
    makeDiv.appendChild(makeList);
    document.body.appendChild(makeDiv);
    for(var i=0, len=localStorage.length; i<len; i++){
        var makeli = document.createElement('li');
        makeList.appendChild(makeli);
        var key = localStorage.key(i);
        var value = localStorage.getItem(key);
        var obj = JSON.parse(value);
        var makeSubList = document.createElement('ul');
        makeli.appendChild(makeSubList);
        for(var n in obj){
            var makeSubList = document.createElement('li');
            makeSubList.appendChild(makeSubli);
            var optSubText = obj[n][0]+" "+[n][1];
            makeSubli.innerHTML = optSubText;
        }
    }
} 
```

# java - java正则表达式获取字符串的某些部分

> ID：11872709
> 
> 赞同：0
> 
> 时间：2012-08-08T20:33:19.957
> 
> 标签：java, android, regex

我第一次尝试在 Java 中使用 Regex。我想得到一个字符串的某些部分。字符串有点复杂：

```
<description>
  &lt;a href='http://testlink.html' alt='some text'&gt;&lt;img border='0'
  src='http://s2.glbimg.com/zzag70iNYX-QK24sUp0YXQmmXhx7yb8j2Sq2YK7tvX3A6vCwEUOFnFTBONQFT-
  ni/s.glbimg.com/es/ge/f/original/2012/04/25/image.jpg' 
  alt='some' title='text' /&gt;&lt;/a&gt;&lt;br /&gt;some text; some text
</description> 
```

我的需要是获取位于**href**和**alt**中的字符串。为此，我正在执行此代码：

```
for(Element element : elements)
{
    //Elements children = element.children();
Pattern pattern = Pattern.compile("a\\bhref=*(.html|.htm)>");
String[] data = pattern.split(element.text()); ...
} 
```

等等。目前，我试图仅获得**href**而没有成功。返回值始终是整个字符串。不正确吗？我已经把 html 扩展名保证了，没有任何反应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:54:59.147

你的正则表达式不会找到对你有用的东西，甚至可能被破坏。

以下在正则表达式中是正确的：

```
* matches 0 or more of the preceding character

. is any character 
```

因此，您当前的正则表达式正在尝试查找与以下模式匹配的字符串特点。如果你想使用这些特殊字符，你需要转义它们

形成正则表达式的更好方法就像上面的 Alogomorph 示例。

请查看正则表达式的 Java 文档以获取有关允许的更多信息：http: [//docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)

网络上还有很多其他教程和示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:50:32.370

```
public static void main(String[] args){
  String sourcestring = "<description>&lt;a href='http://testlink.html' alt='some text'&gt;&lt;img border='0' src='http://s2.glbimg.com/zzag70iNYX-QK24sUp0YXQmmXhx7yb8j2Sq2YK7tvX3A6vCwEUOFnFTBONQFT-
ni/s.glbimg.com/es/ge/f/original/2012/04/25/image.jpg' 
alt='some' title='text' /&gt;&lt;/a&gt;&lt;br /&gt;some text; some text</description>";
  Pattern re = Pattern.compile("(?<=href='|alt=')[^']*|(?<=href=\"|alt=\")[^\"]*");
  Matcher m = re.matcher(sourcestring);
  int mIdx = 0;
    while (m.find()){
      for( int groupIdx = 0; groupIdx < m.groupCount()+1; groupIdx++ ){
        System.out.println( "[" + mIdx + "][" + groupIdx + "] = " + m.group(groupIdx));
      }
      mIdx++;
    }
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T21:03:14.857

请勿在此任务中使用正则表达式，除非您*绝对*知道文本格式不会改变。您似乎想使用正则表达式解析 (X|HT)ML，这是[一件坏事](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags#1732454)。我建议解析为 XML 并使用 XPath。

# .net - 将多个数据表（相同模式）添加到当前数据源

> ID：11872714
> 
> 赞同：1
> 
> 时间：2012-08-08T20:33:42.077
> 
> 标签：.net, vb.net

我想通过将当前数据源合并到新数据表来将多个数据表添加到数据源，而无需每次创建（循环）数据集。

这是我的代码：

```
' Those table are the same but have different data
' Tables() array, it's an example

For Each oTable As System.Data.DataTable In Tables
    DisplayResult(oTable, ColumnsAreCreated)
Next 
```

然后我想在网格中显示结果：

```
Private Function DisplayResults(ByVal oTable As System.Data.DataTable, ByRef ColumnsAreCreated As Boolean) As Boolean

    If oTable.Rows.Count > 0 Then
        Dim compt As Integer = 0

        If Not ColumnsAreCreated Then
            Dim NewColumn As DevExpress.XtraGrid.Columns.GridColumn
            For Each oColumn As DataColumn In oTable.Columns
                NewColumn = grdv.Columns.AddField(oColumn.ColumnName)
                NewColumn.OptionsColumn.ReadOnly = True
                NewColumn.Visible = True
                NewColumn.VisibleIndex = compt
                compt += 1
            Next
            ColumnsAreCreated = True
            ' I want to do something like : grdctrl.DataSource += oTable
            grdctrl.DataSource = oTable

            grdv.OptionsView.ColumnAutoWidth = False
            grdv.BestFitColumns()
        End If
    End If

    Return True
End Function 
```

我不想每次都擦除当前数据，我想将网格中的当前数据源与以下数据表一一连接。

我不想创建数据集，将数据表放入其中，最后提供数据集的 gridcontrol。

有没有办法在不创建数据集的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:19:29.143

如果我理解正确，您想“合并”所有结果，对吗？为什么不简单地在绑定到单个表中的网格之前这样做呢？如果要在绑定后合并 - 将 PGrid 绑定到数据源和成员“Table”，然后只需使用 Table.Merge(AddedTable)。这也应该自动更新您的网格。确保您没有为表设置键，否则您将获得常规合并（如果它们不同且未添加，则值将被更新）希望我理解这个问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-02T05:33:02.627

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!this.IsPostBack)
    {
        string constr = ConfigurationManager.ConnectionStrings["constr"].ConnectionString;
        string query = "SELECT TOP 10 ContactName, City, Country FROM Customers;";
        query += "SELECT TOP 10 (FirstName + ' ' + LastName) EmployeeName, City, Country FROM Employees";

        using (SqlConnection con = new SqlConnection(constr))
        {
            using (SqlCommand cmd = new SqlCommand(query))
            {
                using (SqlDataAdapter sda = new SqlDataAdapter())
                {
                    cmd.Connection = con;
                    sda.SelectCommand = cmd;
                    using (DataSet ds = new DataSet())
                    {
                        sda.Fill(ds);
                        gvCustomers.DataSource = ds.Tables[0];
                        gvCustomers.DataBind();
                        gvEmployees.DataSource = ds.Tables[1];
                        gvEmployees.DataBind();
                    }
                }
            }
        }
    }
} 
```

此代码是完全运行的代码，希望对您有所帮助。

# mysql - mysql中date_format后日期和时间的变化

> ID：11872715
> 
> 赞同：0
> 
> 时间：2012-08-08T20:33:42.167
> 
> 标签：mysql

我插入 `now()`了一个 mysql 表列。我试图在检索时转换`timestamp(now())`使用。`date_format`但它显示的价值与我插入的不同。

插入：`2012-08-09 01:45:11`

```
date_format(creation_date,'%d-%m-%Y %h:%m %p') : 09-08-2012 01:08 AM 
```

我设置`set time_zone:'+05:30'`

我可以知道它为什么会这样显示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:43:49.740

愚蠢的错误:(需要使用`date_format(creation_date,'%d-%m-%Y %h:%i %p')`

# node.js - node.js 中的wire.js 示例

> ID：11872716
> 
> 赞同：3
> 
> 时间：2012-08-08T20:33:42.890
> 
> 标签：node.js, wirejs

我是 Node 新手，来自 C# 背景，我希望通过 Node 解决的主要问题之一是依赖注入。我知道wire.js 有这个功能，我已经阅读了我能找到的所有内容，我什至下载了Html“Hello World”示例。但是，我仍然无法让它正常工作。

这是我为*使其*正常工作所做的工作：

1.  我将 hello-wired.js 和 hello-wired-spec.js 文件拉到我的 Node 项目中。
2.  我将示例应用程序中的 /js/wire 中的 wire 文件夹拉到我的 Node 应用程序中的 /node-modules/wire 中。
3.  我在构造函数中删除了 hello-world.js 中的代码行，因为我没有 Html 节点并且我使构造函数无参数。然后我将sayHello 中的行替换为使用console.log()，因为我没有InnerHtml。
4.  我创建了一个测试动作

```
app.get('/testwired', function (req, res) {
    require('wire!hello-wired-spec', function (spec) {
        console.log(spec);
        res.send(spec.sayHello("this is a test"));
    });
}); 
```

我得到的错误是它找不到模块wire！hello-wired-spec。我认为这意味着我没有配置wire.js 来知道从哪里获得我的规范，但我不知道如何。我也不知道我是否应该为此使用回调。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T21:14:22.047

语法“wire！hello-wired-spec”特定于 AMD 加载程序（它使用 wire 作为 AMD 插件），并且 Node 的要求不理解 AMD。因此，在节点中，您将以编程方式使用 Wire，像其他任何库一样需要（）它。不过，除此之外，它的工作方式基本相同：您将向它提供一个电线规格模块，它会返回一个承诺，一旦它现在连接它就会解决。

这是为节点编写的[最简单的“hello wire” 。](https://gist.github.com/3298791)main.js 需要（）的电线，然后将接线规范（在 spec.js 中）提供给它。wire() 返回一个使用完全连接的上下文解析的承诺。现在电线规格中没有太多有趣的东西，但这就是你进来的地方:)

希望这足以让您在 node 中使用wire 启动并运行，但如果您有其他问题，请随时在[cujojs google group跟进！](https://groups.google.com/forum/?fromgroups#!forum/cujojs)

# c++ - C++ 运算符重载和继承

> ID：11872724
> 
> 赞同：4
> 
> 时间：2012-08-08T20:34:22.910
> 
> 标签：c++, visual-c++, inheritance, operator-overloading

所以我有一个我创建的通用 Matrix 类，它具有以下运算符重载：

```
class Matrix
{
public:
    Matrix() {}
    Matrix(int i, int j, int k) {}
    Matrix operator*(const Matrix &right)
    {
    }
}; 
```

我还有一个继承自我的 Matrix 类的 Matrix2 类。

```
class Matrix2 : public Matrix
{
}; 
```

当我尝试将两个 Matrix2 对象相乘时，我得到一个编译器错误说明：

'没有找到采用 Matrix2 类型的左手操作数的运算符（或没有可访问的转换）'

为什么会这样，我如何才能通过继承正确实现运算符重载？

**编辑：**

正如所指出的，我的问题部分是因为“最令人烦恼的解析”。现在我的问题，我相信，严格与运算符重载和继承有关。

我可以很好地将两个 Matrix 对象相乘，但我不能将两个 Matrix2 对象相乘。

```
Matrix2 i;
Matrix2 m;
Matrix result = m * i; 
```

错误信息：

> `error C2678: binary '*' : no operator found which takes a left-hand operand of type 'Matrix2' (or there is no acceptable conversion).`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T20:50:40.510

你正在咬最令人烦恼的 Parse。这是导致声明函数而不是对象的语法错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T20:53:19.213

问题不在于重载的运算符，而在于您定义的变量，您可能认为`m1`and`m2`是类型`Matrix`，但它们实际上是返回的函数`Matrix`（没有参数）。尝试删除声明中的括号，看看情况是否更好。

这是@DeadMG 在他的回答中提到的最令人烦恼的[解析。](http://en.wikipedia.org/wiki/Most_vexing_parse)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T20:56:36.920

查看[这篇](http://courses.cms.caltech.edu/cs11/material/cpp/donnie/cpp-ops.html)关于运算符重载的文章，它很好地解释了事情。

正如@silvesthu 解释的那样，将乘法运算符实现为一个静态函数可能会更好，它接受两个参数并返回一个新`Matrix`对象。如果你需要以某种方式修改你的类，比如使用`*=`操作符，你可以用静态函数来实现。

**更新**

编译以下代码对我有用；

```
class Matrix
{
public:
    Matrix() {}
    Matrix(int i, int j, int k) {}
    Matrix operator*(const Matrix &right)
    {
        return Matrix();
    }
};

class Matrix2 : public Matrix
{
};

int _tmain(int argc, _TCHAR* argv[])
{
    Matrix2 a, b;
    Matrix c = a * b;
    return 0;
} 
```

表明两个 Matrix2 对象确实可以相乘。我不确定你为什么会遇到任何问题。

# cakephp - CakePHP 空传递的Args

> ID：11872727
> 
> 赞同：0
> 
> 时间：2012-08-08T20:34:40.633
> 
> 标签：cakephp, formhelper

我在视图中有一个表格：

```
echo $this->Form->create('Customers', array('action' => 'index'));
echo $this->Form->input('category_id');
echo $this->Form->end('Search'); 
```

以及Controller中的一个方法：

```
function index() {
    debug($this->passedArgs);
} 
```

但是调试消息打印出一个空数组。

当我手动输入网址时：

```
http://domainna.me/admin/customers/index/category_id:4 
```

调试消息打印出来： Array ( [season_id] => 16 )

一切都按照我的意愿行事。我错过了什么？

- - -编辑 - - -

debug($this->request->params) 打印：

```
Array
(
    [plugin] => 
    [controller] => customers
    [action] => index
    [named] => Array
        (
        )

    [pass] => Array
        (
        )

    [isAjax] => 
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:43:40.267

我认为您缺少 GET 部分： [http ://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#options-for-create](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#options-for-create)

然后它将使用 get-urls 而不是帖子。

但我仍然建议您使用像 cake dcs 这样复杂的搜索插件： [https ://github.com/CakeDC/search](https://github.com/CakeDC/search)

在那里，您将以正确的方式获得您想要的结果（使用 PRG 重定向）。包括所有强大的功能。

# c++ - 嵌套类的前向声明

> ID：11872728
> 
> 赞同：0
> 
> 时间：2012-08-08T20:34:41.037
> 
> 标签：c++, forward-declaration

我正在尝试转发 delcare 这个嵌套类，我已经尝试过了，但我没有工作。当我尝试转发声明时，我无法访问私有成员错误，所以我想我做错了什么。

```
#ifndef PLAYERHOLDER_H
#define PLAYERHOLDER_H

#include <QtCore>
#include <player.h>
#include <datasource.h>

class PLAYERHOLDER
{

private:
class CONTACTMODEL : public QAbstractTableModel
{
public:
    explicit CONTACTMODEL(PLAYERHOLDER* holder);

    int rowCount( const QModelIndex &parent ) const;
    int columnCount( const QModelIndex &parent ) const;
    QVariant data( const QModelIndex &index, int role ) const;
    QVariant headerData( int section, Qt::Orientation orientation, int role ) const;
    void update();

private:
    static PLAYERHOLDER* m_playerHolder;
};

public:
static PLAYERHOLDER* getInstance();
void createPlayer(PLAYER *player);
void updatePlayer(int id);
void deletePlayer(int id);
PLAYER* findPlayer(int id);
void loadPlayers(int teamid);

QAbstractItemModel* model() ;

private:
PLAYERHOLDER();
static PLAYERHOLDER *thePlayerholder;
QHash<int, PLAYER*> playerlist;
DATASOURCE *datasource;
mutable CONTACTMODEL *m_model;
};

#endif // PLAYERHOLDER_H 
```

但我不知道该怎么做，我四处搜索仍然不知道:(是否可以转发声明这个？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-08T20:42:56.303

嵌套类型是封闭类型的一部分。也就是不能自己前向声明，但是可以在封闭类型的定义中声明，然后在外面定义：

```
class enclosing {
   class inner;          // Forward declaration
};
// Somewhere else
class enclosing::inner { // Definition
   int x;
}; 
```

你不能做的是在封闭类型的定义之外向前声明内部类型：

```
class enclosing::outer;  // Error 
```

# iphone - NSXMlParserDelegate：在调用 didEndElement 之后调用 foundCharacters

> ID：11872730
> 
> 赞同：0
> 
> 时间：2012-08-08T20:34:44.887
> 
> 标签：iphone, ios, xml-parsing, nsxmlparser

我在下面有一个 xml 文件。

```
<?xml version="1.0" encoding="utf-8"?>
<Rows xmlns="">
    <Row>"
       <Column0 title="Count"></Column0>
       <Column1 title="Quantity"></Column1>
       <Column2 title="Amount"></Column2>
       <Column3 title="Sample Time 24 Hrs">12:25</Column3>
       <Column4 title="Sample Time AM/PM">12:25PM</Column4>
       <Column5 title="Sample Date"></Column5>
       <Column6 title="Sample Timestamp"></Column6>
       <Column7 title="Name"></Column7>
       <Column8 title="paidOrNot"></Column8>
    </Row>
    <Row>
       <Column0 title="Count">-2,147,483,648</Column0>
        <Column1 title="Quantity">3.5</Column1>
       <Column2 title="Amount">$43.5</Column2>
       <Column3 title="Sample Time 24 Hrs">12:25</Column3>
       <Column4 title="Sample Time AM/PM">11:59PM</Column4>
       <Column5 title="Sample Date">2012-07-20</Column5>
       <Column6 title="Sample Timestamp">2012-07-20 12:25</Column6>
       <Column7 title="Name">abcd</Column7>
       <Column8 title="paidOrNot">N</Column8>
    </Row>
    <Row>
       <Column0 title="Count">2,147,483,647</Column0>
       <Column1 title="Quantity">3.5</Column1>
       <Column2 title="Amount">$43.5</Column2>
       <Column3 title="Sample Time 24 Hrs">12:25</Column3>
       <Column4 title="Sample Time AM/PM">11:59PM</Column4>
       <Column5 title="Sample Date">2012-07-20</Column5>
       <Column6 title="Sample Timestamp">2012-07-20 12:25</Column6>
       <Column7 title="Name">abcd</Column7>
       <Column8 title="paidOrNot">N</Column8>
    </Row>
</Rows> 
```

当我解析它时，当元素具有开始和结束元素但没有任何值时，在调用 didEndElement 之后调用 foundCharacters 。我假设委托方法按 didStartElement、foundcharacters、didEndElement 的顺序执行。但我认为我错了。有任何想法吗？

谢谢，吉涅什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:40:13.777

我不知道 NSXMLParser 不会忽略空格，这对我来说是个问题。

# google-api - 谷歌翻译 API v2 - (403) 未配置访问

> ID：11872731
> 
> 赞同：6
> 
> 时间：2012-08-08T20:34:47.040
> 
> 标签：google-api, google-translate

我在通过谷歌翻译时遇到谷歌控制台 API 的问题。当我从本地机器运行测试时，它运行良好，但是当我尝试在远程测试虚拟服务器上运行它时，它返回上面的 403。

我在控制台 API 访问中通过服务器密钥使用简单 API 访问，并且我的密钥配置为本地和测试机器 IP 地址。

调试：

```
lynx --dump "checkip.dyndns.org"; 
```

- IP 与我在谷歌 API 控制台中的 API 密钥设置中的 IP 匹配

```
curl -v "https://www.googleapis.com/language/translate/v2?q=hello&target=de&source=en&key=MYAPIKEY"

{
 "error": {
  "errors": [
   {
    "domain": "usageLimits",
    "reason": "accessNotConfigured",
    "message": "Access Not Configured"
   }
  ],
  "code": 403,
  "message": "Access Not Configured"
 }
} 
```

就像我说的，在我的本地机器上也是如此。在 Google API 控制台中为两个 IP 配置了 API 密钥

更新：当我使用附加到 url 引用而不是 IP 的“浏览器密钥”时，它可以工作。所以问题需要以某种方式出现在 IP 中，但我不知道在哪里。任何“whatsmyip”服务都会确认我的 IP 匹配。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T15:37:49.390

我遇到了同样的问题，但是使用任务 api，结果我没有在[https://code.google.com/apis/console](https://code.google.com/apis/console)的服务选项卡下启用“任务 api” 。也许您遇到了同样的问题，但未启用“翻译 api”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T15:03:03.933

我试图找到解决方案，但这似乎是一个 Google API 错误。我发现的唯一相关支持服务是在 Google Groups 中，那里有更多人遇到同样的问题，但我没有找到任何解决方案，也没有努力从 Google 那里检查。

所以这是解决方法 - 浏览器密钥未绑定到 IP，而是 http 引用。

如果您正在使用[适用于 PHP 的 Google APIs 客户端库，](http://code.google.com/p/google-api-php-client/)[请查看此](https://github.com/palmic/google-api-php-client/commit/f550635e64445783add3c9148fe9f6fe47b0c68b)内容。

请注意，这只是临时破解，而不是解决方案。浏览器密钥未绑定到 IP，因此任何人只要知道您的令牌就可以访问您的 API 访问权限。连接仍然通过https。

# java - 在检查 ArrayList 时继续生成值

> ID：11872733
> 
> 赞同：1
> 
> 时间：2012-08-08T20:34:50.217
> 
> 标签：java, loops, arraylist

我想我一直盯着这段代码太久了，我没有看到它。我正在编写一个小游戏，其中一部分会生成许多对象（当前为形状）。创建形状后，它们将作为类定义的对象添加到 ArrayList 中。我注意到随着形状数量的增加，重叠形状的机会增加，我想解决这个问题。我试图通过检查 ArrayList 中每个现有对象的 Y 坐标来检查 Y 坐标。但是在我的一生中，我不记得在生成唯一的 Y 值之前如何继续迭代检查函数。

我最初的解决方案是一个 do...while 循环，但由于某种原因它一直返回 true。

我稍微简化了我的代码，只保留了对我的问题至关重要的部分。我错过了什么？提前感谢您的帮助。

编辑：还要记住，随着游戏的进行，对象会不断地添加到 ArrayList 中或从 ArrayList 中移除。每次在游戏过程中移除一个对象（形状）时，它都会重新生成。这意味着对于游戏期间创建的每个对象，都需要根据现有对象进行检查。

```
int x, y;
int numShapes = 10;
ArrayList<ShapeObject> soArray = new ArrayList<ShapeObject>();

private boolean checkY(int yy) {
  for(int i = 0; i < soArray.size(); i++) {
    if(soArray.get(i).oY == yy) {
      return true;
    }
  }
  return false;
}

public void makeShapes() {
  for(int i = 0; i < numShapes; i++) {
    if(soArray.size() < numShapes) {
      x = rand.nextInt(width - 45) + 45;

      do {
        y = rand.nextInt(height - 4) + 2;
      } while(checkY(y));

      soArray.add(new ShapeObject());
    }
  }
}

class ShapeObject {
  int oX = x;
  int oY = y;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:05:24.083

尝试将您的课程结构更改为

```
class ShapeObject {
   int oY = 0;
   int oX = 0;

   public ShapeObject(int x, int y)
   {
     oX = x;
     oY = y;
   }
} 
```

那么你有

```
soArray.add(new ShapeObject(x, y)); 
```

如果我能指出一些有用的东西，我仍在查看您的代码。

也试试

```
if(soArray.get(i).oY == yy) {
    println(soArray.get(i).oY +' = '+ yy); //to debug
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T16:27:39.530

由于我基本上是自己解决了这个问题，因此我将其发布为答案。

原来我忘记了我受到画布边界的限制。我的单元格大小是 600 像素网格上的 12 像素。我注意到它会在我的 ArrayList 中有 46 个对象后失败。所以基本上所有可用的 Y 坐标都被取走了。我正在测试 100 个对象，所以它一直在运行。

我还将 checkY() 修改为 checkXY() 以便我可以完全控制对象可用的行数和列数（x 和 y 坐标）。

# asp.net - 如何在使用 sql 数据库时将 asp.net 应用程序与 Crystalreport 链接

> ID：11872734
> 
> 赞同：0
> 
> 时间：2012-08-08T20:34:59.287
> 
> 标签：asp.net, sql, sql-server-2008, crystal-reports, crystal-reports-2010

我使用 SAP (http://www.crystalreports.com/) 的水晶报表软件创建了一个水晶报表文件。在这里，我创建了 3 个需要填写的参数，以便撤回有关特定值的其余信息，以便自动填写表格的其余部分。我正在使用的数据库在 SQL 中，我想知道是否有可能在我的 ASP.net C# 应用程序中从我的 gridview 中按下一个按钮，该按钮链接到 SQL 中的同一数据库并自动选择从 gridview 中获取参数并将它们导入到水晶报表中，这样用户就不必输入它们了。我想这只是一些额外的 C# 编程，但我对 ASP 相当陌生，所以我会很感激任何反馈或关于如何实现这一点的解决方案。

先感谢您。

更多细节：我有一个现有的 SQL 数据库和一个 ASP 应用程序。我的应用程序有两个现有的网格视图和登录功能。我还有一个现有的水晶报表，旨在自动从我的 SQL 数据库创建收据。这是通过用户填写3个特定参数来完成的，与这些参数并行的其余数据将自动填写水晶报告。

我想做什么：我想在我的gridview中创建一个打印按钮来自动填写水晶报表中的3个参数。这是使我的应用程序更加用户友好的尝试。简而言之，用户将在gridview的新列中按下打印按钮，这3个参数会自动拾取并填充到水晶报表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:49:04.580

此链接描述了如何在 ASP.net 上使用水晶报表，它应该回答您的问题：

[http://www.aspdotnet-suresh.com/2012/01/crystal-reports-sample-in-aspnet.html](http://www.aspdotnet-suresh.com/2012/01/crystal-reports-sample-in-aspnet.html)

下面是您的配置文件连接到 SQL 数据库的样子。

网页配置

```
<add name="ProjectASPConnectionString" connectionString="Data Source=PWOEM01;Initial Catalog=ProjectASP;Integrated Security=True"
      providerName="System.Data.SqlClient" /> 
```

PWOEM01= 服务器 ProjectASP = 数据库

如果您需要更多代码示例，请告诉我您在寻找什么。

# r - 使用直方图中断在第二列上应用函数

> ID：11872738
> 
> 赞同：1
> 
> 时间：2012-08-08T20:35:12.570
> 
> 标签：r, colors, histogram

我有多列数据，比如说 x 和时间。我想制作 x 列的直方图，并根据列时间中的值的聚合为每个条形图着色，其中聚合按用于直方图的中断分组。所以，

```
d = cbind(c(rep(1,3), rep(2,3)), c(10,20,10,20,10,20))
names(d) = c("x", "time")
hist(d[,"x"]) 
```

给我一个不错的条形图，假设我想要这样的颜色：

```
palette(rainbow(25))
hist(d[,"x"], col=d[,"time"], n=10) 
```

我想让 col 是一个长度为 10 的向量，它是时间列的聚合函数（例如平均值）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:58:15.050

我会用`plyr`and来做到这一点`ggplot2`：

```
require(plyr)
require(ggplot2)

d <- data.frame(x=c(rep(1:4, each=4)), time=sample(10:100, 16, replace=T))
d <- ddply(d, .(x), transform, mean.time=mean(time))

ggplot(d, aes(x=x, group=x, fill=mean.time)) +
  geom_histogram() 
```

![在此处输入图像描述](../Images/207c6b55a4f4d0016fd3cd5cbf06021d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T04:17:52.123

如果我理解正确，您希望对每个 x 的时间值进行平均并绘制直方图。但是您想使用哪种颜色？梯度或个人，基于平均时间值或 x 值？

将此示例视为起点

```
require(ggplot2)
d <- data.frame(x=c(rep(1:4, each=4)), time=sample(10:100, 16, replace=T)) # thanks to Andy :)
ggplot(d, aes(x=factor(x), y=time)) + 
stat_summary(fun.y="mean", geom="bar", aes(fill=factor(d$x))) 
```

或者

```
ggplot(d, aes(x=factor(x), y=time)) + 
stat_summary(fun.y="mean", geom="bar", aes(fill=d$x)) 
```

# git - 带有接收后脚本的远程 Git sparse-checkout

> ID：11872745
> 
> 赞同：5
> 
> 时间：2012-08-08T20:35:23.280
> 
> 标签：git, git-post-receive, sparse-checkout

我正在尝试弄清楚如何执行以下操作（并弄清楚它是否可能）。

我有一个本地 git 存储库，其中包含许多用于各种事物的文件夹，但我希望能够使用 git 将我的网站部署到我的开发服务器，并且实际上只有一个文件夹的内容应该进入远程 webroot（只是文件夹，而不是文件夹本身，这很困难）。我让开发服务器的 git push 进入 Web 可访问文件夹之外的裸仓库，然后我使用接收后脚本将所有工作文件放入 webroot。但是，这会复制所有文件夹，显然我只希望在操作完成后移动一个特定文件夹的内容。

做一些研究，看起来稀疏结账会很合适。更新：我现在让它工作，它只会复制一个特定的文件夹，但我仍然没有让它忽略文件夹本身并只是拉取内容。我认为这与我添加到 .git/info/sparse-checkout 的路径/通配符有关，但我不确定排除目录但不排除其内容的模式是什么。

有没有好的方法来做到这一点？我应该只使用 post-receive 脚本手动复制我想要的目录的内容，而不是尝试直接使用稀疏结帐来完成吗？

我感谢任何人愿意提供的任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T06:27:22.290

一种更简单的方法是：

*   在 a 中进行稀疏结帐`/tmp/YourRepo/Yourdirectory`（`YourDirectory`作为您试图忽略的那个，因为只有它的内容是感兴趣的）
*   *将*over的内容移动`/tmp/Yourdirectory`到正确的目标目录

# asp.net-mvc - MVC4 Razor WebGrid 错误

> ID：11872750
> 
> 赞同：0
> 
> 时间：2012-08-08T20:36:14.337
> 
> 标签：asp.net-mvc, razor, webgrid

我正在尝试在我的 Razor 视图上使用 WebGrid，但收到以下错误消息：

```
Compiler Error Message: CS1978: Cannot use an expression of type 
'lambda expression' as an argument to a dynamically dispatched operation 
```

这是控制器的代码：

```
 var query = GetAll().ToList();
  ViewBag.grid = new WebGrid(students, rowsPerPage: 20);
  return View(); 
```

风景 ：

```
@{
    var grid = ViewBag.grid;
}
@grid.GetHtml("tblMain",
    columns: grid.Columns(
            grid.Column("Name", format: @<Text>Test</Text>)
        )) 
```

我能够在我的控制器上使用 webgrid 并生成 HTML 并将其呈现在视图中，但是因为我需要模板，所以我尝试在视图而不是控制器中创建 webgrid。我在网上搜索过，同样的示例很少，但我仍然收到此错误。我将不胜感激任何帮助或想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:24:02.630

就像您将 WebGrid 放在 ViewBag 中一样，它变成了一个动态对象，并且不支持表示为 lambda 表达式的委托。如果您不想使用强类型视图，则在 ViewBag 中传递数据，而是在视图中构造网格，或者将网格转换为视图中的正确类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:52:59.407

从 ViewBag 转换结果会将网格变量从动态类型更改为正确的类型。然后，您应该能够像以前一样使用它。

```
@{
    var grid = (WebGrid)ViewBag.grid;
}
@grid.GetHtml("tblMain",
    columns: grid.Columns(
            grid.Column("Name", format: @<Text>Test</Text>)
        )) 
```

# c# - 获取查询字符串值

> ID：11872752
> 
> 赞同：0
> 
> 时间：2012-08-08T20:36:16.733
> 
> 标签：c#, query-string, httpcontext

我想在我的工具库中创建一个从 url 请求查询字符串的方法。我创建了以下代码，但我不能在类库中使用 HttpContext。

```
 public string RequestString(string requestParam, string Default)
    {
        string param = HttpContext.Current.Request.QueryString[requestParam];
        if (param != null)
        {
            return param;
        }
        else
        {
            return Default;
        }
    } 
```

我知道这是可能的，但我不记得如何...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:39:34.563

您需要`System.Web.dll`在类库项目中添加对程序集的引用。

但当然，只有在 HTTP 请求的上下文中调用您的方法时，您才能访问查询字符串。

有关 HttpContext 类的更多信息，请参阅[此 MSDN 页面](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.aspx)。

# android - BreakIterator.preceding 在 Android V2 中失败？

> ID：11872758
> 
> 赞同：3
> 
> 时间：2012-08-08T20:36:35.550
> 
> 标签：android

以下代码适用于 Android 4，但在 Android 2 中会导致 IllegalArgumentException。

有什么线索吗？

```
Locale currentLocale = new Locale("en_UK"); 
final BreakIterator boundary = BreakIterator.getSentenceInstance(currentLocale);
boundary.setText("a"); 
int thisThrowsExceptionInVersion2 = boundary.preceding(1); 
```

例外：

```
08-08 22:29:14.414: E/AndroidRuntime(329): Caused by: java.lang.IllegalArgumentException
08-08 22:29:14.414: E/AndroidRuntime(329):  at java.text.RuleBasedBreakIterator.validateOffset(RuleBasedBreakIterator.java:74)
08-08 22:29:14.414: E/AndroidRuntime(329):  at java.text.RuleBasedBreakIterator.preceding(RuleBasedBreakIterator.java:158)
08-08 22:29:14.414: E/AndroidRuntime(329):  at kalle.palle.namespace.KallePalleActivity.onCreate(KallePalleActivity.java:26) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T17:19:52.277

下面是姜饼代码中的 validateOffset

```
private void validateOffset(int offset) {
    CharacterIterator it = wrapped.getText();
    if (offset < it.getBeginIndex() || offset >= it.getEndIndex()) {
        throw new IllegalArgumentException();
    }
} 
```

在ICS代码中如下

```
private void validateOffset(int offset) {
    CharacterIterator it = wrapped.getText();
    if (offset < it.getBeginIndex() || offset > it.getEndIndex()) {
        String message = "Valid range is [" + it.getBeginIndex() + " " + it.getEndIndex() + "]";
        throw new IllegalArgumentException(message);
    }
} 
```

`>=` 已更改为`>`. 在 2.X 设备中，结束偏移检查似乎是错误的。在您传递到的偏移量`preceding`与字符串的结束索引重叠的情况下尤其如此。这似乎是框架中的错误。
您可以在 libcore/luni/src/main/java/java/text/RuleBasedBreakIterator.java 中找到 AOSP 代码中的源代码。
这是[姜饼代码](http://androidxref.com/2.3.6/xref/libcore/luni/src/main/java/java/text/RuleBasedBreakIterator.java#71)，这是[ICS 代码](http://androidxref.com/4.0.4/xref/libcore/luni/src/main/java/java/text/RuleBasedBreakIterator.java#50)

# macos - 安装 Github for Mac 后从命令行使用 git

> ID：11872760
> 
> 赞同：1
> 
> 时间：2012-08-08T20:36:41.127
> 
> 标签：macos, git, github, github-for-mac

我安装了 Mac 版 Github，效果很好，但我无法从终端运行 git 命令。我有另一个需要安装的 git 吗？还是我必须在 Github for Mac 中启用一些选项？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-21T07:04:16.083

从 2013 年 5 月开始（“[为 Mac 从 GitHub 安装 Git](https://github.com/blog/1510-installing-git-from-github-for-mac) ”），您不必安装另一个 git 发行版：所有内容都包含在内。

> 您现在可以轻松地安装 Git 以在命令行上使用，而无需下载任何单独的包。
> 每当我们更新 GitHub for Mac 中包含的 Git 版本时，您将自动获得更改——您无需任何工作！
> 
> 您可能会注意到“首选项”窗口发生了一些变化。
> 在新重命名的“ `Advanced`”选项卡上，只需单击“ `Install Command Line Tools`”。
> 
> 系统将提示您输入管理员密码，以便可以将 Git 安装到`/usr/local/bin`中，然后您应该很快就会看到它成功了：

![在此处输入图像描述](../Images/18907644fa448ed49510ba47bbf95a37.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:42:31.853

在 OSX 上可以通过多种方式安装 Git：

1）如果您安装了[MacPorts](http://www.macports.org/)，您可以通过打开终端并执行以下操作来安装它：

```
sudo port install git 
```

2）从官方网站下载并安装.dmg： http: [//git-scm.com/download/mac](http://git-scm.com/download/mac)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T20:49:31.337

[https://help.github.com/articles/set-up-git#platform-mac](https://help.github.com/articles/set-up-git#platform-mac)有关于为命令行设置 git 的说明。（基本上下载[http://git-scm.com/download/mac](http://git-scm.com/download/mac)并设置配置）

Windows 用户请注意，您可以使用名为“Git Bash”的解决方法程序来近似类似于 unix 的命令行，您可以从中执行 git 命令。

# cron - 将 Cron 作业发送到电子邮件表

> ID：11872763
> 
> 赞同：0
> 
> 时间：2012-08-08T20:36:50.177
> 
> 标签：cron

我想设置一个 cron 作业（我认为这是我最好的选择），每天早上自动通过电子邮件向我发送我的 mySQL DB 中的未结订单表。
我有一个显示表格的 php 页面，我希望能够使用它。然而，你们中的大多数人可能都知道发生了什么，它运行文件并将所有 html 作为文本通过电子邮件发送给我（是的，我的 gMail 允许 html 电子邮件）。我需要查找什么来创建我的表格并将其通过电子邮件发送给我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:47:13.430

我假设您在 PHP 代码中的某处调用如下所示：

```
mail($to, $subject, $message, $headers); 
```

如果是这样，请检查一些基本事项：

1.  您的 $message 变量以：

    ```
    <html> 
    ```

2.  您的 $message 变量以：

    ```
    </html> 
    ```

3.  您已将 HTML 内容类型添加到邮件标头，例如使用以下代码：

    ```
    $headers .= "Content-type: text/html\r\n"; 
    ```

# android - 如何从 sdcard 读取特定文件夹（包含图像）然后显示为幻灯片

> ID：11872778
> 
> 赞同：0
> 
> 时间：2012-08-08T20:38:00.173
> 
> 标签：android, image, view, gallery

我想构建一个应用程序，该应用程序将从中读取特定文件夹`sdcard`，然后使用`GalleryView`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T02:37:11.670

您好使用下面的代码从特定目录获取图像

```
public void walkdir() {

        File dir =new File(getExternalFilesDir(), "urdir");
        String filePattern = ".png";

        File listFile[] = dir.listFiles();

        if (listFile != null) {
            for (int i = 0; i < listFile.length; i++) {
                if (listFile[i].isDirectory()) {
                    walkdir(listFile[i]);
                } else {
                    if (listFile[i].getName().endsWith(filePattern)){
                       //Do what ever u want
                       //  Log.e("PDF",listFile[i].getName());
                       //here you will get the files
                    }
                }
            }
        }    
} 
```

# jquery - Web 层和 UI 之间的计时器

> ID：11872779
> 
> 赞同：0
> 
> 时间：2012-08-08T20:38:05.797
> 
> 标签：jquery, spring, model-view-controller, jsp, timer

我需要检查各层之间的性能。如何获取请求从后端获取数据到 UI 所花费的时间？我正在使用 Spring MVC。我正在考虑将一些变量作为响应并在 jsp 中读取响应，但我不确定这是计算的好方法。我对 spring 控制器进行了 jQuery ajax 调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T04:05:07.257

> 好吧，如果您想在广泛的层面上实现这一目标，那么您应该为此寻找一个适当架构的工具。

我认为[jProfiler](http://www.ej-technologies.com/products/jprofiler/top10.html)会在许多您从未想过的场景中为您服务。检查一下，这将是您的开发生命周期和调用内存管理方面的时间延迟等方面的附加组件。

# iphone - 如何在 UIWebView 上隐藏带有上一个和下一个按钮的键盘栏？

> ID：11872780
> 
> 赞同：0
> 
> 时间：2012-08-08T20:38:06.080
> 
> 标签：iphone, ios, uiwebview, keyboard

1）。如何在 UIWebView 上隐藏带有上一个和下一个按钮的键盘栏？这两个按钮是不活动的，最好隐藏它们。这个怎么做？

![在此处输入图像描述](../Images/36b3a6f8d78dad5eb1b2ecd9b110003f.png)

2）。如何获得这个酒吧的高度？

非常感谢您的帮助！

**如果您遇到此问题**，请确保前往[https://bugreport.apple.com](https://bugreport.apple.com)并复制 rdar://9844216

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:27:38.577

对于 iPad 3，它是 44px。我认为，对于其他设备也是如此。

# html - 样式化 html 正文内联

> ID：11872782
> 
> 赞同：1
> 
> 时间：2012-08-08T20:38:09.583
> 
> 标签：html, css, height, inline

我需要添加这个：

```
html, body{
height: 100%;
} 
```

但是，我目前被困在一个 CMS 中，我只能在 BODY 标记下进行编辑，这意味着我无法向标题添加任何内容、调整样式表或类似内容。我添加它的唯一方法是在正文标记之后内联。如果能以任何方式解决这个问题，我也可以在这个空间内执行 PHP。

我是处于不可能的情况还是有解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T20:40:13.233

您可以使用 PHP 输出一个可以调整样式的 javascript 字符串：

```
print '<script>document.body.style.height = '100%'; document.body.parentNode.style.height = '100%';</script>'; 
```

也就是说，如果您不关心 HTML 验证和/或正在使用 HTML5 文档类型，您*可以*在任何地方简单地添加普通样式标签。如果您需要使用 PHP 输出它，只需将其放入一个字符串中（就像我对上面的 javascript 所做的那样）：

```
print '<style type="text/css">html, body{ height: 100%; }</style>'; 
```

您可能还想查看作用域样式标签，这是 HTML5 的新添加：http: [//dev.w3.org/html5/spec/the-style-element.html#attr-style-scoped](http://dev.w3.org/html5/spec/the-style-element.html#attr-style-scoped)

**文档**

*   PHP `print`- [http://php.net/manual/en/function.print.php](http://php.net/manual/en/function.print.php)
*   Javascript `element.style`- [https://developer.mozilla.org/en-US/docs/DOM/element.style](https://developer.mozilla.org/en-US/docs/DOM/element.style)
*   范围样式表 - [http://dev.w3.org/html5/spec/the-style-element.html#attr-style-scoped](http://dev.w3.org/html5/spec/the-style-element.html#attr-style-scoped)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T20:39:46.070

您可以在事后使用 javascript 更改这些标签的属性。

如果您已经（或想尝试）使用 jquery，这很容易。只需运行此脚本：

```
$("html").css("height","100%"); 
```

如果您不想使用 jquery，那么您对大多数浏览器执行此操作的方式如下：

```
document.body.style.height = "100%"; 
```

或者

```
document.getElementsByTagName('body')[0].style.height = "100%"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T20:41:31.490

很确定这会起作用，样式标签可以添加到任何地方：

```
<style>
html, body{
height: 100%;
}

</style> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-08T20:41:42.250

如果您有权访问 javascript（您可以），您只需添加：

```
<script>
  var body=document.getElementsByTagName('body')[0];
  body.style.background='#000';
</script> 
```

# c++ - 不绘制 QWT 绘图轴

> ID：11872787
> 
> 赞同：1
> 
> 时间：2012-08-08T20:38:17.260
> 
> 标签：c++, qt, qwt

我正在尝试使用 QWT 绘制没有任何标题或轴标签的图。不画标题似乎很容易，你所要做的就是不要在标题中传递它，或者如果已经有一个，只需给它一个空字符串（像这样）：

```
ui->plot->setAxisTitle(QwtPlot::xBottom, "");
ui->plot->setAxisTitle(QwtPlot::yLeft, ""); 
```

但实际标签（在axisScale属性内）是默认绘制的（在x和y中从0到1000）。然而，即使我可以改变它的外观，我也不能完全删除它。

那么有什么方法可以绘制没有任何轴标签或标题的 qwt 图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T03:26:13.593

如果您不想要比例或标签，这将起作用：

```
ui->plot->enableAxis(QwtPlot::xBottom, false);
ui->plot->enableAxis(QwtPlot::yLeft, false); 
```

如果要显示没有标签的比例，可以实现自己的对象，该对象为所有标签`QwtScaleDraw`返回一个空对象：`QwtText`

```
class MyScaleDraw : public QwtScaleDraw
{
public:
    MyScaleDraw() : QwtScaleDraw() { }
    virtual ~MyScaleDraw() { }
    virtual QwtText label(double) const
    {
        return QwtText();
    }
};

//...

ui->plot->setAxisScaleDraw(Qwt::xBottom, new MyScaleDraw);
ui->plot->setAxisScaleDraw(Qwt::yLeft, new MyScaleDraw); 
```

可能有更好的方法，但这是我能想到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-29T09:12:00.287

I did the following: ui->plot->enableAxis(QwtPlot::yLeft, false);

But what happened is that my axis disappeared, but my plot is also squished into a thin horizontal bar.

What could cause this?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-12T11:12:36.757

刚刚找到了一个很好的方法：

```
ui->plot->axisScaleDraw(QwtPlot::xBottom)->enableComponent(QwtAbstractScaleDraw::ScaleComponent::Labels, false); 
```

也适用于 ScaleComponents Ticks 和 Backbone。

# python - 如何使这个 Python 脚本与 Python 3 一起工作？

> ID：11872790
> 
> 赞同：-1
> 
> 时间：2012-08-08T20:38:34.993
> 
> 标签：python, python-3.x

我下载了这个脚本来帮助我转换一些 PNG。然而，从 2003 年开始，我第一次尝试运行它时，它给了我异常语法的错误。我设法解决了这个问题并再次运行它。然后它给了我打印语法的错误。我也修复了这些。现在我完全不知道除了脚本不起作用之外发生了什么。

脚本是：

```
from struct import *
from zlib import *
import stat
import sys
import os

def getNormalizedPNG(filename):
    pngheader = "\x89PNG\r\n\x1a\n"

    file = open(filename, "rb")
    oldPNG = file.read()
    file.close()

    if oldPNG[:8] != pngheader:
        return None

    newPNG = oldPNG[:8]

    chunkPos = len(newPNG)

    # For each chunk in the PNG file    
    while chunkPos < len(oldPNG):

        # Reading chunk
        chunkLength = oldPNG[chunkPos:chunkPos+4]
        chunkLength = unpack(">L", chunkLength)[0]
        chunkType = oldPNG[chunkPos+4 : chunkPos+8]
        chunkData = oldPNG[chunkPos+8:chunkPos+8+chunkLength]
        chunkCRC = oldPNG[chunkPos+chunkLength+8:chunkPos+chunkLength+12]
        chunkCRC = unpack(">L", chunkCRC)[0]
        chunkPos += chunkLength + 12

        # Parsing the header chunk
        if chunkType == "IHDR":
            width = unpack(">L", chunkData[0:4])[0]
            height = unpack(">L", chunkData[4:8])[0]

        # Parsing the image chunk
        if chunkType == "IDAT":
            try:
                # Uncompressing the image chunk
                bufSize = width * height * 4 + height
                chunkData = decompress( chunkData, -8, bufSize)

            except Exception as e:
                # The PNG image is normalized
                return None

            # Swapping red & blue bytes for each pixel
            newdata = ""
            for y in xrange(height):
                i = len(newdata)
                newdata += chunkData[i]
                for x in xrange(width):
                    i = len(newdata)
                newdata += chunkData[i+2]
                    newdata += chunkData[i+1]
                    newdata += chunkData[i+0]
                    newdata += chunkData[i+3]

            # Compressing the image chunk
            chunkData = newdata
            chunkData = compress( chunkData )
            chunkLength = len( chunkData )
            chunkCRC = crc32(chunkType)
            chunkCRC = crc32(chunkData, chunkCRC)
            chunkCRC = (chunkCRC + 0x100000000) % 0x100000000

        # Removing CgBI chunk        
        if chunkType != "CgBI":
            newPNG += pack(">L", chunkLength)
            newPNG += chunkType
            if chunkLength > 0:
                newPNG += chunkData
            newPNG += pack(">L", chunkCRC)

        # Stopping the PNG file parsing
        if chunkType == "IEND":
            break

    return newPNG

def updatePNG(filename):
    data = getNormalizedPNG(filename)
    if data != None:
        file = open(filename, "wb")
        file.write(data)
        file.close()
        return True
    return data

def getFiles(base):
    global _dirs
    global _pngs
    if base == ".":
        _dirs = []
        _pngs = []

    if base in _dirs:
        return

    files = os.listdir(base)
    for file in files:
        filepath = os.path.join(base, file)
        try:
            st = os.lstat(filepath)
        except os.error:
            continue

        if stat.S_ISDIR(st.st_mode):
            if not filepath in _dirs:
                getFiles(filepath)
                _dirs.append( filepath )

        elif file[-4:].lower() == ".png":
            if not filepath in _pngs:
                _pngs.append( filepath )

    if base == ".":
        return _dirs, _pngs

print ("iPhone PNG Images Normalizer v1.0")
print (" ")
print ("[+] Searching PNG files..."),
dirs, pngs = getFiles(".")
print ("ok")

if len(pngs) == 0:
    print (" ")
    print ("[!] Alert: There are no PNG files found. Move this python file to the folder that contains the PNG files to normalize.")
    exit()

print (" ")
print (" -  %d PNG files were found at this folder (and subfolders).") % len(pngs)
print (" ")
while True:
    normalize = raw_input("[?] Do you want to normalize all images (Y/N)? ").lower()
    if len(normalize) > 0 and (normalize[0] == "y" or normalize[0] == "n"):
        break

normalized = 0
if normalize[0] == "y":
    for ipng in xrange(len(pngs)):
        perc = (float(ipng) / len(pngs)) * 100.0
        print ("%.2f%% %s") % (perc, pngs[ipng])
        if updatePNG(pngs[ipng]):
            normalized += 1
print (" ")
print ("[+] %d PNG files were normalized.") % normalized 
```

现在当我在 DOS 窗口中运行它时，我得到了这个错误：

```
C:\wamp\www\py>ipin.py
iPhone PNG Images Normalizer v1.0

[+] Searching PNG files...
ok

 -  %d PNG files were found at this folder (and subfolders).
Traceback (most recent call last):
  File "C:\wamp\www\py\ipin.py", line 158, in <module>
    print (" -  %d PNG files were found at this folder (and subfolders).") % len(pngs)
TypeError: unsupported operand type(s) for %: 'NoneType' and 'int' 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T20:43:36.030

您可能希望将`%`运算符移动到括号内。

```
print (" -  %d PNG files were found at this folder (and subfolders)." % len(pngs)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T23:17:39.523

在 Python 2 中，纯字符串文字是字节串，而在 Python 3 中，它们是 Unicode 字符串。如果要编写字节串文字，请使用`b`前缀，例如 b"\x89PNG\r\n\x1a\n"。Python 3 在将字节串与 Unicode 字符串混合时非常严格。

其他区别是，在 Python 3 中，`print`现在是一个普通函数，而不是语句，该`range`函数返回一个生成器，就像`xrange`在 Python 2 中一样，这`input`就像`raw_input`在 Python 2 中一样（在 Python 3 中没有与 Python 2 的`input`函数等效的函数 - 它是因为它被认为不安全而被丢弃）。

这是我将代码转换为 Python 3 的尝试（顺便说一下，`from something import *`不鼓励使用，因为它可能会无意中隐藏许多名称；仅导入您希望使用的那些名称）：

```
from struct import *
from zlib import *
import stat
import sys
import os

def getNormalizedPNG(filename):
    pngheader = b"\x89PNG\r\n\x1a\n"

    file = open(filename, "rb")
    oldPNG = file.read()
    file.close()

    if oldPNG[:8] != pngheader:
        return None

    newPNG = oldPNG[:8]

    chunkPos = len(newPNG)

    # For each chunk in the PNG file    
    while chunkPos < len(oldPNG):

        # Reading chunk
        chunkLength = oldPNG[chunkPos:chunkPos+4]
        chunkLength = unpack(">L", chunkLength)[0]
        chunkType = oldPNG[chunkPos+4 : chunkPos+8]
        chunkData = oldPNG[chunkPos+8:chunkPos+8+chunkLength]
        chunkCRC = oldPNG[chunkPos+chunkLength+8:chunkPos+chunkLength+12]
        chunkCRC = unpack(">L", chunkCRC)[0]
        chunkPos += chunkLength + 12

        # Parsing the header chunk
        if chunkType == b"IHDR":
            width = unpack(">L", chunkData[0:4])[0]
            height = unpack(">L", chunkData[4:8])[0]

        # Parsing the image chunk
        if chunkType == b"IDAT":
            try:
                # Uncompressing the image chunk
                bufSize = width * height * 4 + height
                chunkData = decompress( chunkData, -8, bufSize)

            except Exception as e:
                # The PNG image is normalized
                return None

            # Swapping red & blue bytes for each pixel
            newdata = b""
            for y in range(height):
                i = len(newdata)
                newdata += chunkData[i]
                for x in range(width):
                    i = len(newdata)
                    newdata += chunkData[i+2]
                    newdata += chunkData[i+1]
                    newdata += chunkData[i+0]
                    newdata += chunkData[i+3]

            # Compressing the image chunk
            chunkData = newdata
            chunkData = compress( chunkData )
            chunkLength = len( chunkData )
            chunkCRC = crc32(chunkType)
            chunkCRC = crc32(chunkData, chunkCRC)
            chunkCRC = (chunkCRC + 0x100000000) % 0x100000000

        # Removing CgBI chunk        
        if chunkType != b"CgBI":
            newPNG += pack(">L", chunkLength)
            newPNG += chunkType
            if chunkLength > 0:
                newPNG += chunkData
            newPNG += pack(">L", chunkCRC)

        # Stopping the PNG file parsing
        if chunkType == b"IEND":
            break

    return newPNG

def updatePNG(filename):
    data = getNormalizedPNG(filename)
    if data != None:
        file = open(filename, "wb")
        file.write(data)
        file.close()
        return True
    return data

def getFiles(base):
    global _dirs
    global _pngs
    if base == ".":
        _dirs = []
        _pngs = []

    if base in _dirs:
        return

    files = os.listdir(base)
    for file in files:
        filepath = os.path.join(base, file)
        try:
            st = os.lstat(filepath)
        except os.error:
            continue

        if stat.S_ISDIR(st.st_mode):
            if not filepath in _dirs:
                getFiles(filepath)
                _dirs.append( filepath )

        elif file[-4:].lower() == ".png":
            if not filepath in _pngs:
                _pngs.append( filepath )

    if base == ".":
        return _dirs, _pngs

print ("iPhone PNG Images Normalizer v1.0")
print (" ")
print ("[+] Searching PNG files..."),
dirs, pngs = getFiles(".")
print ("ok")

if len(pngs) == 0:
    print (" ")
    print ("[!] Alert: There are no PNG files found. Move this python file to the folder that contains the PNG files to normalize.")
    exit()

print (" ")
print (" -  %d PNG files were found at this folder (and subfolders)." % len(pngs))
print (" ")
while True:
    normalize = input("[?] Do you want to normalize all images (Y/N)? ").lower()
    if len(normalize) > 0 and (normalize[0] == "y" or normalize[0] == "n"):
        break

normalized = 0
if normalize[0] == "y":
    for ipng in range(len(pngs)):
        perc = (float(ipng) / len(pngs)) * 100.0
        print ("%.2f%% %s" % (perc, pngs[ipng]))
        if updatePNG(pngs[ipng]):
            normalized += 1
print (" ")
print ("[+] %d PNG files were normalized." % normalized) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-08T21:07:03.153

当你尝试 % str(len(pngs)) 时会发生什么？

# linux - 替换自一行结束以来的第二个点

> ID：11872792
> 
> 赞同：1
> 
> 时间：2012-08-08T20:38:45.053
> 
> 标签：linux, bash, sed, awk

自一行结束以来如何替换第二个点？

```
11.22.mail.su => 11.22@mail.su
22.mails.de => 22@mails.de 
```

等等

我对`sed`or的示例感兴趣`awk`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T20:54:03.377

至于`sed`，试试这个：

```
sed -e 's/\.\([^.]*\.[^.]*\)$/@\1/' 
```

所以：

```
# echo "11.22.mail.su" | sed -e 's/\.\([^\.]*\.[^\.]*\)$/@\1/g'
11.22@mail.su
# echo "22.mails.de" | sed -e 's/\.\([^\.]*\.[^\.]*\)$/@\1/g'
22@mails.de 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:22:01.877

使用`awk`：

```
awk '{ $0 = gensub( /\.([^.]+\.[^.]+)$/, "@\\1", 1 ); print }' infile 
```

输出：

```
11.22@mail.su
22@mails.de 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T02:35:02.927

这是一个纯 bash 解决方案（我不建议使用它，如果需要，可以组合各个步骤）：

```
# An extended pattern to match a single field. letters, numbers, and a hyphen
# Add characters if necessary
shopt -s extglob
field='+([[:alnum:]-])'   

for foo in 11.22.mail.su 22.mails.de; do

    # The first part: drop the last two fields and the dots that precede them
    first="${foo%.$field.$field}"

    # The first part, followed by the @, followed by the full string minus the first
    # part and its following dot.
    modified="$first@${foo/#$first.}"

done 
```

更好的办法是使用 bash 的正则表达式支持。

```
for foo in 11.22.mail.su 22.mails.de; do
    [[ $foo =~ (.*)\.([^.]+\.[^.]+) ]]
    # Three ways to join the two halves with @ 
    one_way="$BASH_REMATCH[1]@${BASH_REMATCH[2]}

    printf -v second_way "%s@%s" ${BASH_REMATCH[@]:1:2}

    SAVE_IFS="$IFS"
    IFS="@"
    third_way="@{BASH_REMATCH[*]:1:2}"
    IFS="$SAVE_IFS"
done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T03:30:48.970

花了我一秒钟看看你在做什么。提醒一下，这是一个有效的电子邮件地址：

```
bob@mail.server.com 
```

这是这样的：

```
bob.smith@mail.server.com 
```

*你说从行尾*替换第二个句号。这意味着您的正则表达式应该锚定到行尾。`$`正则表达式末尾的A就是这样做的。

让我们看一下您的示例：

```
11.22.mail.su 
```

你想匹配`.mail.su`。让我们从最后一个字符开始，即`$`. 我们可以通过做来表示任意字符组合`.*`。这表示从零到行长的任何字符串。句点代表任何字符，而`*`代表前面的零个或多个。

句点是一个特殊的正则表达式字符，所以我们需要在它前面加上一个反斜杠才能成为句点：`\.`. 到目前为止，一切都很好。

这应该有效：

```
\..*\..*$ 
```

并且，在我们想要匹配的内容周围加上括号：

```
(\.)(.*)(\.)(.*)$ 
```

那里！第一个 (.) 捕获第二个到最后一个句点。下一个`(.*)`捕获零个或多个字符，第三个捕获，`(.*)`捕获该行的其余部分，并将其`$`锚定在末尾。

除了它实际上不起作用，因为正则表达式是贪婪的。例如，如果我有这个作为我的正则表达式：

```
.*### 
```

我的字符串如下所示：

```
first###second###third###fourth 
```

该正则表达式不捕获`first###`. 它可以捕获最长的字符串，它恰好是`first###second###third###`.

解决此问题的方法是排除要匹配的字符。在这种情况下，我们不想匹配`#`. 因此，我们可以这样做：

```
[^#]*### 
```

那将只匹配`first###`。***表示除 之外***的任何`[^#]`字符。表示零个或多个非# 字符。所以，我将把上面表达式中的 替换为除了句点之外的任何字符。*`#``*``.*``[^.]`*

 *前：

```
(\.)(.*)(\.)(.*)$ 
```

后：

```
(\.)([^.]*)(\.)([^.]*)$ 
```

看到第二组和第四组的区别了吗？

还有一个小问题：在`sed`我正在使用的 中，您必须在括号前加一个反斜杠，否则它们实际上只是字符串`(`中`)`的字符。这是唯一一个你必须在前面加上反斜杠才能让它变得神奇的角色。每个其他神奇的正则表达式字符都是神奇的，除非你在它前面加上一个反斜杠。这意味着而不是这个：

```
(\.)([^.]*)(\.)([^.]*)$ 
```

我们需要这样做：

```
\(\.\)\([^.]*\)\(\.\)\([^.]*\)$ 
```

与上面相同，但现在在每个左括号和右括号之前都有一个反斜杠。

现在，我们有了匹配字符串结尾的内容，让我们进行替换。首先，一个简单的测试：

```
$ echo "11.22.mail.su" | sed 's/\(\.\)\([^.]*\)\(\.\)\([^.]*\)$/FOO/'
11.12FOO 
```

是的，这与结尾相匹配。接下来，我们可以通过在组号前面加上反斜杠来引用分组：

```
$ echo "11.22.mail.su" | sed 's/\(\.\)\([^.]*\)\(\.\)\([^.]*\)$/@\2\3\4/'
11.22@mail.su 
```

完美的。请注意，第一组是我的第一个时期。我用`@`. 接下来，我想保留第二组、第三组和第四组。因此，我的替换字符串是`@\2\3\4`.

顺便说一句，我真的不需要四个分组。我可以简单地匹配该句点，然后将该行的其余部分作为一个组：

```
echo "11.22.mail.su" | sed 's/\.\([^.]*\.[^.]*\)$/@\1/' 
```

是的，正则表达式是如此简单易读！我的一个朋友将正则表达式称为*水手咒骂*，因为在旧漫画中，当有人布置一堆粗俗的东西时，他们会使用可能是正则表达式符号的东西。^*

Perl 的一个很好的特性是你可以将一个正则表达式分解成多行，这样你就可以注释正在发生的事情：

```
#! /usr/bin/env perl

$string = "11.22.mail.su";
$string =~ s/       #Start of my substitution
\.                  #A period
(                   #Start capturing a string
[^.]*               #Everything up to the next period.
\.                  #The next period
[^.]*)$             #And capture it to the end of the line
/@\1/x;             #Replace with a "@" and the rest of the string

print "String = '$string'\n";

$ test.pl
String = '11.22@mail.su' 
```

Perl 的另一个好处是括号有特殊的含义**，除非**你在它们前面加上反斜杠。（与`sed`）相反。

* * *

有一件事是我顺便提到的，但并没有真正关注。这`[^.]*`匹配***零***个或多个非周期。这可能是正则表达式的问题。要解决这个问题并强制至少匹配一个，您需要将正则表达式加倍。例如，`[^#]*#FOO`will match`THIS IS A #FOO`并且 will match just plain `#FOO`too。

如果我这样做：`[^#][^#]*#FOO`并将正则表达式加倍，我可以保证在 . 之前至少有一个非`#`字符`#`。该正则表达式将匹配`THIS IS A #FOO`，但不只是简单`#FOO`的。

所以，我们可能不得不从：

```
$ sed 's/\(\.\)\([^.]*\)\(\.\)\([^.]*\)$/FOO/' 
```

至

```
$ sed 's/\(\.\)\([^.][^.]*\)\(\.\)\([^.][^.]*\)$/FOO/' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T21:15:33.883

这可能对您有用：

```
sed 's/\(.*\)\.\(.*\.\)/\1@\2/' file 
```*

# php - PHP is_dir 和 mkdir 在映射的网络驱动器上不起作用

> ID：11872803
> 
> 赞同：1
> 
> 时间：2012-08-08T20:39:33.270
> 
> 标签：php, windows, share, mkdir

我已将我的 Z: 驱动器映射为在 Windows 资源管理器中指向我网络上另一台服务器上的文件共享。我可以在那里访问文件并读/写就好了。

当我尝试从 PHP 执行 mkdir() 时，我收到“没有这样的文件或目录”错误。

作为测试，我让每个人都可以读取、写入和执行，但它仍然无法正常工作。

我正在使用的代码：

```
mkdir('Y:/newfolder/', 0777); 
```

我还尝试在 PHP 中再次映射驱动器，但无济于事：

```
system('net use Y: "\\DEV01\share" Password1 /user:Administrator /persistent:no>nul 2>&1");
mkdir('Y:/newfolder/', 0777); 
```

请协助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T21:47:24.333

谢谢大家的建议。原来是语法错误。在映射代码中。您必须像我上面所做的那样在 PHP 脚本中手动映射驱动器，除非您必须在其中转义反斜杠。而不是 `\\DEV01\share`，您必须使用`\\\\DEV01\\share`.

# c - 如何检测套接字在转发代理中关闭

> ID：11872805
> 
> 赞同：1
> 
> 时间：2012-08-08T20:39:36.437
> 
> 标签：c, linux, networking, tcp, network-programming

我编写了简单的转发代理服务器，它接受来自客户端的端口范围内的连接并转发它们。

建立连接后，我将它们添加到我使用 select() 监视的套接字列表中。我知道更好的方法是使用 read() 每个 fd 一个线程。

我有一些限制，因为我不能每个连接使用一个线程，所以我使用 select()。但是后来我不知道客户端是否关闭了连接，因为 select 没有告诉我。有什么办法可以弄清楚吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T20:49:16.847

当 select() 告诉您在已放入读取集中的文件描述符上有一个事件时，您必须通过调用 read() 或 recv() 来读取数据。

如果 read() 返回 0，则另一端已关闭其连接端。如果 read() 返回 -1，则发生了一些错误，您必须检查 errno 以查看它是什么。如果 errno 是 EAGAIN 或 EWOULDBLOCK，您应该简单地返回到您的 select() 循环，否则您应该关闭套接字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:46:42.370

当连接关闭时，选择返回套接字的读取事件。关闭后从套接字读取数据时，重新调整值为 0。

使用 select 比使用每个连接的线程更好。您可以在延迟（每个线程更多连接）和资源使用（每个线程更少连接）之间选择自己的策略。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T20:45:33.437

select() 的第四个参数采用文件描述符的位掩码来监视异常。在那里设置位，就像您为读取和/或写入所做的那样，并在选择返回后测试它们。如果设置了它们，您可以通过正常调用 read() 来检索错误。

# c# - 是否有任何 T4 模板或自定义工具可以从 .resw 文件生成类？

> ID：11872807
> 
> 赞同：3
> 
> 时间：2012-08-08T20:39:37.030
> 
> 标签：c#, localization, windows-8, microsoft-metro, windows-runtime

我正在尝试将本地化添加到我的爱好项目（WinRT 应用程序）中的类库中。我很惊讶它没有为资源（.resw 文件）生成强类型类。是否有任何 T4 模板或自定义工具可以自动从资源生成此类？

我自己编写了简单的 T4 模板，但我想知道是否有任何内置或 MS 提供的机制，因为自定义解决方案有一些缺点（例如保存对资源的更改不会触发 T4 转换）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T19:48:15.173

这是我的原始解决方案（但它在 Windows 8 的 VS 2012 RC 中不起作用，因为它[可能不支持文本模板](http://social.msdn.microsoft.com/Forums/sk/toolsforwinapps/thread/8cf38a11-27cd-462b-bf57-107b6ac2baae)）。您只需要通过在模板中设置，将模板配置为指向正确的资源文件`inputFilePath`。

```
<#@ template debug="false" hostspecific="true" language="C#" #>
<#@ assembly name="System.Core" #>
<#@ assembly name="System.Xml" #>
<#@ assembly name="System.Xml.Linq" #>
<#@ assembly name="EnvDTE" #>
<#@ import namespace="System.IO" #>
<#@ import namespace="System.Linq" #>
<#@ import namespace="System.Xml.Linq" #>
<#@ import namespace="System.Collections.Generic" #>
<#@ import namespace="Microsoft.CSharp" #>
<#@ import namespace="EnvDTE" #>
<#@ output extension=".cs" #>
<#
    DTE env = GetVSEnvironment();
    var inputFilePath = @"Resources\Strings\en\Resources.resw";
    var provider = new CSharpCodeProvider();
    string className = CreateClassName(provider);

    SetCurrentDirectory();
    if (File.Exists(inputFilePath)) {
#>
using Windows.ApplicationModel.Resources;

namespace <#= GetNamespace() #> {
    public static class <#= className #> {
        private static ResourceLoader _resourceLoader;

        static <#= className #>() {
            _resourceLoader = new ResourceLoader("<#= GetResourcePath(env) #>");
        }
<#
        foreach (string name in GetResourceKeys(inputFilePath)) {
#>
        public static string <#= provider.CreateEscapedIdentifier(name) #> {
            get { return _resourceLoader.GetString("<#= name #>"); }
        }
<#
        }
#>
    }
}
<#
    } else {
        throw new FileNotFoundException(String.Format("Unable to find Resource file: {0}", inputFilePath)); 
    } 
#>
<#+
    private DTE GetVSEnvironment() {
        DTE env = null;
        var provider = Host as IServiceProvider;
        if (provider != null) {
            env = provider.GetService(typeof(DTE)) as DTE;
        }

        if (env == null) {
            throw new InvalidOperationException("Template must be executed from Visual Studio");
        }

        return env;
    }

    private void SetCurrentDirectory() {
        Directory.SetCurrentDirectory(Host.ResolvePath(""));
    }

    private string CreateClassName(CSharpCodeProvider provider) {
        string name = Path.GetFileNameWithoutExtension(Host.TemplateFile);
        return provider.CreateEscapedIdentifier(name);
    }

    private string GetNamespace() {
        return Host.ResolveParameterValue("directiveId", "namespaceDirectiveProcessor", "namespaceHint");
    }

    private string GetResourcePath(DTE env) {
        Project project = env.Solution.FindProjectItem(Host.TemplateFile).ContainingProject;
        string assemblyName = project.Properties.Item("AssemblyName").Value.ToString();
        return assemblyName + "/Resources";
    }

    private static IEnumerable<string> GetResourceKeys(string filePath) {
        XDocument doc = XDocument.Load(filePath);
        return doc.Root.Elements("data").Select(e => e.Attribute("name").Value);
    }
#> 
```

我想我会通过用于 .resx 文件的普通自定义工具来解决这个问题，但是 Metro 风格的应用程序需要使用不同的命名空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T22:51:36.460

[我有一个 T4 模板，它从https://github.com/damieng/DamienGKit/tree/master/T4/ResourceGenerator](https://github.com/damieng/DamienGKit/tree/master/T4/ResourceGenerator)的 RESW 文件提供强生成的资源

只需将 ResourceGeneratorMetro.tt 和 ResourceGenerator.ttinclude 文件放到您的项目中，然后修改 ResourceGeneratorMetro.tt 的第 6 行以包含您希望它生成的资源名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T06:40:51.000

```
System.IO.Path.GetDirectoryName(this.Host.TemplateFile) 
```

可以帮助您获取绝对 T4 模板文件路径（仅在 Visual Studio 中执行时），然后只需提供资源文件的相对文件路径即可。

```
var inputFilePath =System.IO.Path.GetDirectoryName(this.Host.TemplateFile) 
+ "\\Resources\\Strings\\en\\Resources.resw" ; 
```

适合我

如果你想爬到文件夹（ ..// 在这里不起作用）你可以手动编辑字符串并使用它

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T07:14:06.343

我刚刚在 CodePlex 上启动了一个名为[ResW 文件代码生成器](http://reswcodegen.codeplex.com)的 Visual Studio 2012 自定义工具项目

# python - 全局变量声明 Python

> ID：11872808
> 
> 赞同：7
> 
> 时间：2012-08-08T20:39:39.383
> 
> 标签：python, global-variables

我有下面的一段代码，它创建一个笔记并添加到笔记本中。

我的问题与全局变量更相关`last_id`。当我将它声明为类变量时，即在类注释中，我收到以下错误，但是当我在类之外声明时，我的代码工作正常。

以下是我的澄清：

1.  为什么它不接受类变量。
2.  `last_id`当我在函数中将其声明为全局变量时，为什么需要定义？

**`Error:`**

```
C:\Python27\Basics\OOP\formytesting>python notebook.py
Traceback (most recent call last):
  File "notebook.py", line 38, in <module>
    firstnote = Note('This is my first memo','example')
  File "notebook.py", line 10, in __init__
    last_id += 1
NameError: global name 'last_id' is not defined 
```

**`code.py`**

```
import datetime
last_id = 0
class Note:

    def __init__(self, memo, tags):
        self.memo = memo
        self.tags = tags
        self.creation_date = datetime.date.today()
        global last_id
        last_id += 1
        self.id = last_id

        #global last_id
        #last_id += 1
        #self.id = last_id

    def __str__(self):
        return 'Memo={0}, Tag={1}, id={2}'.format(self.memo, self.tags,self.id)

class NoteBook:
    def __init__(self):
        self.notes = []

    def add_note(self,memo,tags):
        self.notes.append(Note(memo,tags))

    def __iter__(self):         
        for note in self.notes:             
            yield note 

if __name__ == "__main__":
    firstnote = Note('This is my first memo','example')
    print(firstnote)
    Notes = NoteBook()
    print("Adding a new note object")
    Notes.add_note('Added thru notes','example-1')
    Notes.add_note('Added thru notes','example-2')
    for note in Notes.notes:
        print(note.memo,note.tags)

    for note in Notes:
        print(note)

    print("Adding a new note object----End") 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T20:45:18.167

当你写

```
global last_id 
```

在你的函数内部，你没有创建一个新的全局变量。你正在做的是说“而不是创建一个新的局部变量并将其与名称`last_id`相关联，而是将该名称与封闭范围中具有名称的预先存在的变量相关联`last_id`”

如果还没有一个名为 的变量`last_id`，那么`global last_id`在您写入之前不会引用任何内容。但是，如果您写入它，它将在全局范围内创建。例如：

```
>>> def x():
...     global X
...     X = 1
... 
>>> x()
# No error
>>> X
1 # X is now defined
>>> def y():
...     global Y
...     print Y
... 
>>> y()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 3, in y
NameError: global name 'Y' is not defined 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-08T20:47:09.923

与其他面向对象的语言相比，python 对属性的来源更加明确；您可以有一个班级级别的计数器，如下所示：

```
from itertools import count

class Foo(object):
    last_id = count()

    def __init__(self):
        self.id = self.last_id.next() 
```

您必须引用`last_id`as `self.last_id`，以便 python 知道查看实例（并且因为它不存在，所以类）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T20:44:52.993

该`global`语句不绑定名称，它只是告诉编译器该变量在发生时应该在全局范围内重新绑定。您仍然必须自己执行初始绑定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T20:47:00.737

Python 使用变量的最内层范围，所以这个

```
def __init__(self, memo, tags):
     ....
    global last_id
    last_id += 1 
```

会工作，但这

```
def __init__(self, memo, tags):
     ....
    last_id += 1 
```

将不会。

您可以将其重写为

```
class Note:
    last_id = 0;
    def __init__(self, memo, tags):
        self.memo = memo
        self.tags = tags
        self.creation_date = datetime.date.today()
        Note.last_id += 1
        self.id = last_id 
```

# razor - Web Matrix 错误“无默认文档”

> ID：11872810
> 
> 赞同：1
> 
> 时间：2012-08-08T20:39:43.047
> 
> 标签：razor, webmatrix

我确实是 Web 矩阵和 Razor 语法的新手。但不幸的是，当我尝试运行测试网站时，浏览器中出现错误。

这就是错误

“HTTP 错误 404.20 - 未找到 没有默认文档。”

但是当我在浏览器中通过右键单击+午餐打开网站中的任何页面时，它运行正常。

浏览器中出现了一些建议的解决方案，但我无法从中受益

{最可能的原因：没有为站点配置默认文档。URL 包含印刷错误。目录浏览未启用。}

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T08:07:49.373

从版本 2 开始，如果您从“运行”按钮或按 F12 启动站点，WebMatrix 将查找默认文档。您可以管理站点工作区中的默认页面。单击设置按钮。否则，如果您想启动特定（非默认）页面，您已经找到了执行此操作的方法 - 在文件资源管理器中右键单击它并选择在浏览器中启动。

# java - 关闭 android 应用程序并在 Home press 上运行功能

> ID：11872811
> 
> 赞同：0
> 
> 时间：2012-08-08T20:39:44.953
> 
> 标签：java, android

我知道你们都说你不应该强迫你的应用程序关闭，但我有点需要它。问题是，我的应用程序同时具有振动和声音（媒体播放器）。因此，当用户按下“主页”时，它应该停止这两个并“关闭应用程序”。现在，当我按下 Home 时什么都没有发生 - 实际上它有点冻结（但声音和振动仍在继续） - 直到应用程序崩溃。

```
 if (mpButtonClick.isPlaying())
                    {mpButtonClick.pause();
                    mpButtonClick.seekTo(0);

                    vibr.cancel();
                    }

                    else
                    {

                    mpButtonClick.start();
                    int length = mpButtonClick.getDuration();
                    vibr.vibrate(length);

                    } 
```

我还有一个 onDestroy 和 onBackPressed （它们很相似）：

```
 mpButtonClick.stop();
            vibr.cancel();
        super.onDestroy();
        System.runFinalizersOnExit(true);

                System.exit(0); 
```

onBackPressed 完美运行。但是“主页”按钮崩溃了。有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:42:32.487

> 我知道你们都说你不应该强迫你的应用程序关闭，但我有点需要它。

你不可以。

> 所以当用户按下“主页”时，它应该停止这两个

`onPause()`在或中停止媒体播放和振动`onStop()`。

> 但是“主页”按钮崩溃了。有任何想法吗？

使用`adb logcat`、DDMS 或 Eclipse 中的 DDMS 透视图来检查 LogCat 并查看与您的崩溃相关的堆栈跟踪。考虑使用堆栈跟踪的详细信息以及相关的源代码提出一个新问题，以便人们可以帮助您解决此崩溃问题。

# javascript - 获取ajax请求响应node.js

> ID：11872813
> 
> 赞同：1
> 
> 时间：2012-08-08T20:39:52.140
> 
> 标签：javascript, jquery, ajax, node.js

我有一个触发 ajax 请求的 html 页面：

```
$.ajax({
                type: 'POST',
                url: '/usernamecheck',
                data: {"username":username},
                success: function(taken){
                    if(taken === 0){
                        $('#error').text('The username' + username + ' is available!')
                    }else{
                        $('#error').text('The username' + username + ' is not available')
                    }
                },
                dataType: "json"
            }) 
```

这是我的 node.js 代码：

```
exports.usernameCheck = function(req,res){
var db;
db = require('./../custom_modules/db.js');
var username = req.body.username;
db.users.find({username:username},function(err,users){

    console.log(username)
    if(users.length === 0){
        //return 0
    }else{
        //return1
    }
}) 
```

我想用 node.js 请求响应这个 ajax，但我有点不确定该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T21:09:57.020

jQuery ajax`dataType`代表您期望从服务器返回的数据。我会将其保留为 json，只需更改代码的其他部分以适应数据类型。

**客户**

```
$.ajax({
  type: 'POST',
  url: '/usernamecheck',
  data: {"username":username},
  success: function(response){
    if( response.taken === true){
      $('#error').text('The username' + username + ' is available!')
    }else{
      $('#error').text('The username' + username + ' is not available')
    }
  },
  dataType: "json"
}) 
```

**节点**

```
db.users.find({username:username},function(err,users){
  res.json({taken: users.length !== 0})
}) 
```

# objective-c - 关于iOS分享的几个问题

> ID：11872817
> 
> 赞同：0
> 
> 时间：2012-08-08T20:40:13.753
> 
> 标签：objective-c, ios5

我开发了一个应用程序，允许用户在他们的 iPhone 或 iPad 上添加/创建/存储图像。我想添加到这个应用程序的是将这些图像“传递”到另一个用户的 iDevice 的能力。

因此，例如，假设我制作了一个存储在我的 iPhone 上的图像。然后我有另外 3 个人和我一起坐在桌旁。我想将这些信息发送给他们，因为他们每个人的 iPhone 或 iPad 上都安装了该应用程序。

此功能应该（正如我所设想的那样）通过蓝牙连接或所有设备连接到的网络工作。

所以，我的问题如下：

1.  这可能吗？
2.  如果我这样做，是否会导致我的应用在 App Store 中被拒绝？
3.  谁能告诉我可以去哪里获取相关信息？

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:45:17.107

1.  是的，这是可能的。
2.  您所描述的一切听起来都不像 App Store 拒绝的理由。
3.  [`GKSession`在 GameKit 框架中](http://developer.apple.com/library/ios/DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/GameKitConcepts/GameKitConcepts.html#//apple_ref/doc/uid/TP40008304-CH100-SW1)查找。在创建 iOS 设备到 iOS 设备蓝牙或本地 WiFi 连接时，它是您最好的朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:45:03.237

您可能会发现[Bump API](http://bu.mp/company/api)很有用；它是专门为这种在同一个地方的数据共享而缩进的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T21:05:52.050

您可以通过三种主要方式做到这一点；

1.  通过蓝牙本地
2.  本地通过 Wi-Fi
3.  使用网络服务

正如 Jesse Rusak 所提到的，Bump 是本地交换的不错选择。但是，如果您不想受限于 3rd 方 API，您也可以使用 Game Kit。

您还可以构建自己的 Web 服务，如何做到这一点的示例来自一篇精彩的博客文章[http://www.raywenderlich.com/13511/how-to-create-an-app-like-instagram-with- a-web-service-backend-part-12](http://www.raywenderlich.com/13511/how-to-create-an-app-like-instagram-with-a-web-service-backend-part-12)。

# javascript - 动态创建 无法正确定位

> ID：11872819
> 
> 赞同：0
> 
> 时间：2012-08-08T20:40:17.587
> 
> 标签：javascript, css

我正在制作一个使用两个 的网络应用程序，`textareas`当单击一个按钮时，其中一个`textareas`被替换为`div`使用 JavaScript。我试图将`div`插入到页面中的确切位置与其`textarea`前身一样，因此用户不会注意到开关，但由于某种原因，它并不像应有的那么容易。div 的垂直位置似乎会根据其中的内容而变化。我有一种感觉，它与

```
display: inline-block; 
```

在我的 CSS 文件中，但这需要保持两个`textareas`水平居中而没有固定宽度。

任何帮助，将不胜感激。

该网络应用程序可以在我的网站上找到：http: [//lobian.co/code/remove-attributes/](http://lobian.co/code/remove-attributes/)。要查看问题，请在左侧输入任意数量的文本，`textarea`然后单击“删除属性”。有`div`问题的将替换`textarea`.

**更新：** Musa 在下面的回答解决了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:43:50.017

只需给两个元素相同的垂直对齐方式，例如`vertical-align:top`

[演示](http://jsfiddle.net/9GXJF/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:45:18.067

试试这个

```
div#color_change {
    padding: 0;
} 
```

您提供 2px 的 div 填充（44% 宽度），这会增加其大小。

# ejb-3.0 - JBoss AS 7.1.1 JNDI 绑定

> ID：11872822
> 
> 赞同：4
> 
> 时间：2012-08-08T20:40:38.473
> 
> 标签：ejb-3.0, jndi, jboss7.x

*当我使用标准@Stateless*和*@Remote*注释将典型的**EJB3** bean部署到我的**JBoss AS 7.1.1**时，我在服务器控制台输出上看到以下**JNDI绑定：**

 ******```
22:31:43,209 INFO [org.jboss.as.ejb3.deployment.processors.EjbJndiBindingsDeploymentUnitProcessor]    
(MSC service thread 1-2) JNDI bindings for session bean named HelloEJB3Bean
 in deployment unit deployment "hello.jar" are as follows:

    java:global/hello/HelloEJB3Bean!archetypesEjb3.IHelloEJB3
    java:app/hello/HelloEJB3Bean!archetypesEjb3.IHelloEJB3
    java:module/HelloEJB3Bean!archetypesEjb3.IHelloEJB3
    java:jboss/exported/hello/HelloEJB3Bean!archetypesEjb3.IHelloEJB3
    java:global/hello/HelloEJB3Bean
    java:app/hello/HelloEJB3Bean
    java:module/HelloEJB3Bean 
```

但是，然后我使用以下类型的**JNDI**字符串从独立的 Java 类（使用改编自[JBoss AS 7.1.1 快速入门教程的代码）中找到并调用 bean：](http://www.jboss.org/jdf/quickstarts/jboss-as-quickstart/ejb-remote/)

 **```
String jndiName = "ejb:" + appName + "/"      + moduleName + "/" + distinctName
                         + "/"     + beanName + "!" + viewClassName
                         + (stateful?"?stateful":""); 
```

（不属于上述命名空间/绑定之一）。

1.  为什么提供了这么多 JNDI 绑定，如果我使用其中的一个或另一个会有什么不同？
2.  有没有标准的方法，例如可能使用**ejb:/**命名空间（因为这就是上面给出的快速入门教程中出现的内容）
3.  为什么在 JBoss AS 7.1.1 输出中没有报告**ejb:/**绑定（显然存在，因为这是我用来与我的 bean 交谈的内容）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T07:20:32.173

1) 这些都是在[Java EE 规范](http://download.oracle.com/otndocs/jcp/javaee-6.0-fr-eval-oth-JSpec/ "Java EE 规范")中指定的（看看 capter EE.5.2.2），但足以说它们是“命名空间”，并且取决于“如何”和“从哪里”访问这些EJB，您最终会根据这些条目中的每一个来获得它。例如，如果同一模块 (EAR) 中的代码请求 EJB，它可能会通过 java:module 路由。区别主要在于调用的优化程度，因为“comp”访问需要的“幕后”工作比“全局”要少。

2）EE规范说：

> 本规范建议但不要求在应用程序组件环境的 ejb 子上下文中组织对企业 bean 的引用（即在 java:comp/env/ejb JNDI 上下文中）。请注意，默认情况下，通过注释声明的企业 bean 引用不会在任何子上下文中。

3）我对此没有答案，但也许freenode上#jboss（或#jboss-ejb3）的某人可以回答:-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-12T08:01:11.217

`ejb:/`是 JBoss 用于***远程***客户端的专有名称空间。

它是在 JBoss AS 7.x 中引入的，它取代了事实上的标准远程 JNDI 方式，即使用与本地相同的 JNDI 命名空间，但为指定远程服务器所在位置的初始上下文提供属性。

存在的理由`ejb:/`是双重的。根据 JBoss 的说法，在 Java EE 规范中没有指定事实上的远程 JNDI 访问方式，因此没有理由坚持它。JBoss AS 7 的目标之一是研究不同的做事方式，并且由于其规范漏洞，远程 EJB 只是在这里提供了机会。

有了`ejb:/`命名空间，远程“驱动程序”应该更容易拦截对远程 EJB bean 的请求，同时确保只能请求 EJB bean，而不是说 JMS 队列（也没有指定如何获取它们远程）和最糟糕的所有数据源。********

# java - Java：对象克隆问题？

> ID：11872824
> 
> 赞同：0
> 
> 时间：2012-08-08T20:41:04.153
> 
> 标签：java, clone

我有`invoice`对象，它有两个属性`productDescription`，`productQuantity`这里是代码：

```
public class Invoice() implements Cloneable
{
  private String productDescription;
  private int productQuantity;

  //Getters & Setters

  public Object clone() throws CloneNotSupportedException {
     return super.clone();
  }
} 
```

现在我想在这个类上创建对象的副本，所以我在做

```
Invoice invoiceCopy = (Invoice)invoice.clone(); 
```

现在，如果我更新值`invoiceCopy.setProductQuanity = 10`then`invoice`也会更新值，但这不应该发生，有什么建议吗？

## **更新代码**

```
public class Invoice implements Cloneable {
    private String productDescritpion;
    private int productQuantity;

    public String getProductDescritpion() {
        return productDescritpion;
    }

    public void setProductDescritpion(String productDescritpion) {
        this.productDescritpion = productDescritpion;
    }

    public int getProductQuantity() {
        return productQuantity;
    }

    public void setProductQuantity(int i) {
        this.productQuantity = i;
    }

    public Object clone() throws CloneNotSupportedException {
        return super.clone();
    }

    public static void main(String[] args) {
        Invoice invoice = new Invoice();
        invoice.setProductQuantity(10);
        invoice.setProductDescritpion("nike");
        Invoice invoiceCopy = null;
        try {
            invoiceCopy = (Invoice) invoice.clone();
        } catch (CloneNotSupportedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        invoiceCopy.setProductQuantity(20);
        System.out.println("Invoice quantity: " + invoice.getProductQuantity());
        System.out.println("InvoiceCopy quantity: "
                + invoiceCopy.getProductQuantity());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:49:16.343

默认克隆方法是一种肤浅的方法。你必须为自己编写一个新方法或使用一个库来做你想做的事（例如，参见 apache 的 BeanUtils）

如果你想写它，试试类似的东西：

```
public class Invoice implements Cloneable {
private String productDescription;
private int productQuantity;

public Invoice() {
}

public Invoice(Invoice copy) {
    productDescription = copy.productDescription;
    productQuantity = copy.productQuantity;
}

public Object clone() throws CloneNotSupportedException {
    return new Invoice(this);
} 
```

}

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-08T20:46:36.087

您只是在调用对您的班级没有任何作用的`clone()`方法。`Object`您需要返回对象的新实例：

```
public class Invoice() implements Cloneable {
  private String productDescription;
  private int productQuantity;

  public Invoice() {

  }

  private Invoice(String productDescription, int productQuantity) {
    this.productDescription = productDescription; 
    this.productQuantity = productQuantity;

  //Getters & Setters

  public Object clone() throws CloneNotSupportedException {
     return new Invoice(productDescription, productQuantity);
  }
} 
```

我添加了构造函数来传递参数。

# css - 跨浏览器 CSS3 javascript 库

> ID：11872825
> 
> 赞同：1
> 
> 时间：2012-08-08T20:41:08.337
> 
> 标签：css, cross-browser

我有点担心每次使用 CSS3 功能时都必须编写跨浏览器 CSS 指令，[例如](http://css3please.com/)：

```
-webkit-transform: rotate(7.5deg);  /* Safari 3.1+, Chrome 
   -moz-transform: rotate(7.5deg);  /* Firefox 3.5-15 
    -ms-transform: rotate(7.5deg);  /* IE9 
     -o-transform: rotate(7.5deg);  /* Opera 10.5-12.00 
        transform: rotate(7.5deg);  /* Firefox 16+, Opera 12.50+ 
```

[与CSS3 PIE](http://css3pie.com/)用于 IE的方式相同，是否有一个 javascript 库，我们可以将其作为单行包含在 html`<head>`中，它将读取 CSS 指令的标准版本（`transform:`在本例中），并应用特定的一个用于当前浏览器？

这将允许我编写有效的 CSS3 代码，更重要的是，编写更少的代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T20:42:52.660

有[prefix-free](http://leaverou.github.com/prefixfree/)，它承诺做你想做的事；虽然我必须承认我从未使用过它，所以当我链接到它时，我无法提供任何建议。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T20:43:16.430

我建议你使用[twitter bootstrap](http://twitter.github.com/bootstrap/index.html)并使用它[更少](http://lesscss.org/)的mixins 来实现这一点。此外，如果您想编写更少的 css 代码。您必须先检查[LESS](http://lesscss.org/)。

在其较少的混合中

它包含很多东西，比如

```
// CSS3 PROPERTIES
// --------------------------------------------------

// Border Radius
.border-radius(@radius:4px) {
  -webkit-border-radius: @radius;
     -moz-border-radius: @radius;
          border-radius: @radius;
}

// Drop shadows
.box-shadow(@shadow) {
  -webkit-box-shadow: @shadow;
     -moz-box-shadow: @shadow;
          box-shadow: @shadow;
} 
```

从我的角度来看，整个框架很好地处理了跨浏览器问题。

你可能仍然需要使用 PIE 来解决一些问题并编写自己的 mixins。

这里的好处是您不需要包含任何额外的 javascript 库

您几乎只是使用 CSS 来修复所有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-14T13:33:53.247

您可以使用[cross-style](https://github.com/phatly27/cross-style)来处理跨浏览器。这个库中会有很多内置的自定义 CSS 组件。

例如：

```
.cs-border-radius {
  background-color: indigo;
  padding: 32px;
  cs-border-radius: 10px; // custom CSS component
}
```

```
<html>
  <head>Test the cs-border-radius working on cross browsers</head>
  <link href="site.css" rel="stylesheet"/>
  <body>
    <div class="cs-border-radius">
      Congratulations! Your border-radius is working fine on cross browsers!
    </div>

    <script type="text/javascript" src="cross-style.min.js"></script>
  </body>
</html>
```

输出：

```
 <div class="cs-border-radius" style="border-radius:10px;
-moz-border-radius:10px; -webkit-border-radius:10px;
-khtml-border-radius:10px; behavior: url(../vendors/css-pie/2.0-beta-1/PIE.htc)">
              Congratulations! Your border-radius is working fine on cross browsers!
    </div> 
```

# api - Instagram错误代码：400错误

> ID：11872827
> 
> 赞同：2
> 
> 时间：2012-08-08T20:41:13.233
> 
> 标签：api, instagram

当用户授权他们的帐户时，会弹出此消息？

```
 {"code": 400, "error_type": "OAuthException", "error_message": "Client Disabled"} 
```

我该如何纠正？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-29T17:14:58.017

我联系了 apidevelopers@instagram.com，技术创始人 Mike 回复并帮助我解决了这个问题。我的 API 客户端每秒对同一用户的媒体发出数百个请求，并且没有响应服务器返回的消息，指出令牌已被速率限制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T20:44:09.417

您的应用程序似乎已被禁用，这就是您看到此问题的原因 - 最好的办法是与 Instagram 开发人员支持联系。

# javascript - 如何响应单击 AngularJS 指令中的复选框？

> ID：11872832
> 
> 赞同：80
> 
> 时间：2012-08-08T20:41:40.723
> 
> 标签：javascript, angularjs

我有一个 AngularJS[指令](http://docs.angularjs.org/guide/directive)，它在以下模板中呈现实体集合：

```
<table class="table">
  <thead>
    <tr>
      <th><input type="checkbox" ng-click="selectAll()"></th>
      <th>Title</th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="e in entities">
      <td><input type="checkbox" name="selected" ng-click="updateSelection($event, e.id)"></td>
      <td>{{e.title}}</td>
    </tr>
  </tbody>
</table> 
```

如您所见，`<table>`可以使用自己的复选框单独选择每一行，或者可以使用位于`<thead>`. 相当经典的用户界面。

最好的方法是：

*   选择单行（即选中复选框时，将所选实体的 id 添加到内部数组中，并将 CSS 类添加到`<tr>`包含实体以反映其选定状态）？
*   一次选择所有行？（即对 中的所有行执行前面描述的操作`<table>`）

我当前的实现是在我的指令中添加一个自定义控制器：

```
controller: function($scope) {

    // Array of currently selected IDs.
    var selected = $scope.selected = [];

    // Update the selection when a checkbox is clicked.
    $scope.updateSelection = function($event, id) {

        var checkbox = $event.target;
        var action = (checkbox.checked ? 'add' : 'remove');
        if (action == 'add' & selected.indexOf(id) == -1) selected.push(id);
        if (action == 'remove' && selected.indexOf(id) != -1) selected.splice(selected.indexOf(id), 1);

        // Highlight selected row. HOW??
        // $(checkbox).parents('tr').addClass('selected_row', checkbox.checked);
    };

    // Check (or uncheck) all checkboxes.
    $scope.selectAll = function() {
        // Iterate on all checkboxes and call updateSelection() on them??
    };
} 
```

更具体地说，我想知道：

*   上面的代码是属于控制器还是应该放在`link`函数中？
*   鉴于 jQuery 不一定存在（AngularJS 不需要它），那么进行 DOM 遍历的最佳方法是什么？如果没有 jQuery，我很难选择`<tr>`给定复选框的父级，或者选择模板中的所有复选框。
*   传递`$event`给`updateSelection()`似乎不是很优雅。难道没有更好的方法来检索刚刚单击的元素的状态（选中/未选中）吗？

谢谢你。

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-08-08T21:06:15.513

这就是我一直在做这类事情的方式。Angular 倾向于对 dom 进行声明式操作而不是命令式操作（至少这是我一直在使用它的方式）。

标记

```
<table class="table">
  <thead>
    <tr>
      <th>
        <input type="checkbox" 
          ng-click="selectAll($event)"
          ng-checked="isSelectedAll()">
      </th>
      <th>Title</th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="e in entities" ng-class="getSelectedClass(e)">
      <td>
        <input type="checkbox" name="selected"
          ng-checked="isSelected(e.id)"
          ng-click="updateSelection($event, e.id)">
      </td>
      <td>{{e.title}}</td>
    </tr>
  </tbody>
</table> 
```

并且在控制器中

```
var updateSelected = function(action, id) {
  if (action === 'add' && $scope.selected.indexOf(id) === -1) {
    $scope.selected.push(id);
  }
  if (action === 'remove' && $scope.selected.indexOf(id) !== -1) {
    $scope.selected.splice($scope.selected.indexOf(id), 1);
  }
};

$scope.updateSelection = function($event, id) {
  var checkbox = $event.target;
  var action = (checkbox.checked ? 'add' : 'remove');
  updateSelected(action, id);
};

$scope.selectAll = function($event) {
  var checkbox = $event.target;
  var action = (checkbox.checked ? 'add' : 'remove');
  for ( var i = 0; i < $scope.entities.length; i++) {
    var entity = $scope.entities[i];
    updateSelected(action, entity.id);
  }
};

$scope.getSelectedClass = function(entity) {
  return $scope.isSelected(entity.id) ? 'selected' : '';
};

$scope.isSelected = function(id) {
  return $scope.selected.indexOf(id) >= 0;
};

//something extra I couldn't resist adding :)
$scope.isSelectedAll = function() {
  return $scope.selected.length === $scope.entities.length;
}; 
```

**编辑**：`getSelectedClass()`期望整个实体，但仅使用实体的 id 调用它，现在已更正

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2014-03-24T13:33:29.403

[在处理复选框](http://docs.angularjs.org/api/ng/input/input%5Bcheckbox%5D)时，我更喜欢使用[**ngModel**](http://docs.angularjs.org/api/ng/directive/ngModel)和[**ngChange**](http://docs.angularjs.org/api/ng/directive/ngChange)指令。ngModel 允许您将复选框的选中/未选中状态绑定到实体上的属性：

```
<input type="checkbox" ng-model="entity.isChecked"> 
```

每当用户选中或取消选中复选框时，`entity.isChecked`值也会改变。

如果这就是您所需要的，那么您甚至不需要 ngClick 或 ngChange 指令。由于您有“全选”复选框，因此当有人选中复选框时，您显然需要做的不仅仅是设置属性的值。

当使用带有复选框的 ngModel 时，最好使用 ngChange 而不是 ngClick 来处理选中和未选中的事件。ngChange 就是针对这种情况而设计的。它利用[ngModelController](http://docs.angularjs.org/api/ng/type/ngModel.NgModelController)进行数据绑定（它向 ngModelController 的`$viewChangeListeners`数组添加了一个监听器。这个数组中的监听器在模型值被设置*后被调用，*[避免了这个问题](https://stackoverflow.com/q/20290738/1464699)）。

```
<input type="checkbox" ng-model="entity.isChecked" ng-change="selectEntity()"> 
```

...在控制器中...

```
var model = {};
$scope.model = model;

// This property is bound to the checkbox in the table header
model.allItemsSelected = false;

// Fired when an entity in the table is checked
$scope.selectEntity = function () {
    // If any entity is not checked, then uncheck the "allItemsSelected" checkbox
    for (var i = 0; i < model.entities.length; i++) {
        if (!model.entities[i].isChecked) {
            model.allItemsSelected = false;
            return;
        }
    }

    // ... otherwise ensure that the "allItemsSelected" checkbox is checked
    model.allItemsSelected = true;
}; 
```

同样，标题中的“全选”复选框：

```
<th>
    <input type="checkbox" ng-model="model.allItemsSelected" ng-change="selectAll()">
</th> 
```

... 和 ...

```
// Fired when the checkbox in the table header is checked
$scope.selectAll = function () {
    // Loop through all the entities and set their isChecked property
    for (var i = 0; i < model.entities.length; i++) {
        model.entities[i].isChecked = model.allItemsSelected;
    }
}; 
```

**CSS**

> 什么是最好的方法......将 CSS 类添加到`<tr>`包含实体以反映其选定状态？

如果您使用 ngModel 方法进行数据绑定，您只需将[ngClass](http://docs.angularjs.org/api/ng/directive/ngClass)指令添加到`<tr>`元素中，以便在实体属性更改时动态添加或删除类：

```
<tr ng-repeat="entity in model.entities" ng-class="{selected: entity.isChecked}"> 
```

在此处查看完整的[Plunker](http://plnkr.co/edit/3zS6NHg96SsMUyn25Wy7?p=preview)。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-02-13T22:15:42.503

Liviu 的回答对我非常有帮助。希望这不是糟糕的形式，但我做了一个[小提琴](http://jsfiddle.net/Vbahole22/HmfHy/)，将来可能会帮助其他人。

需要的两个重要部分是：

```
 $scope.entities = [{
    "title": "foo",
    "id": 1
}, {
    "title": "bar",
    "id": 2
}, {
    "title": "baz",
    "id": 3
}];
$scope.selected = []; 
```

# java - Java：谷歌日历 API

> ID：11872839
> 
> 赞同：1
> 
> 时间：2012-08-08T20:42:05.483
> 
> 标签：java, google-calendar-api

我正在玩谷歌日历 API。出于好奇，我没有使用谷歌库，所以我可以自己写。我无法制作新日历。身份验证有效，因为此获取请求有效：[https ://developers.google.com/google-apps/calendar/v3/reference/calendarList/list](https://developers.google.com/google-apps/calendar/v3/reference/calendarList/list)

为了制作我使用的新日历：[https ://developers.google.com/google-apps/calendar/v3/reference/calendarList/insert](https://developers.google.com/google-apps/calendar/v3/reference/calendarList/insert)

我写：

```
try {           
    DefaultHttpClient httpclient = new DefaultHttpClient();
    httpclient.getParams().setParameter(ClientPNames.HANDLE_REDIRECTS,false);
    HttpPost httppost = new HttpPost("https://www.googleapis.com/calendar/v3/users/me/calendarList");
    httppost.addHeader("Authorization", "Bearer " + token); //authentication
    httppost.addHeader("Host", "googleapis.com");

    StringEntity params = new StringEntity("{\"id\": \"TestSchedule\",\"defaultReminders\":[{\"method\": \"popup\",\"minutes\":10}]}");
    httppost.setEntity(params);

    //EXECUTE REQUEST
    HttpResponse postResponse = httpclient.execute(httppost);

    //RESPONSE
    HttpEntity entity = postResponse.getEntity();
    InputStream stream = entity.getContent();
    BufferedReader br = new BufferedReader(new InputStreamReader(stream,"UTF-8"));
    String line;
    while ((line = br.readLine()) != null) {
         System.out.println(line);
    }
    httppost.releaseConnection();

} catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

此外，获得正确令牌的范围是：[https](https://www.googleapis.com/auth/calendar) ://www.googleapis.com/auth/calendar 这应该是正确的。我认为问题出在我的帖子请求的正文中？

因此，获取请求正在工作，所以我假设我的身份验证过程是正确的并且我得到了正确的令牌。执行此发布请求而不是获取请求结果是 302 响应代码。我得到的新 URL 是 google 的主页，根据参考页面我应该得到一个日历资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:53:34.583

```
The following code working. please u can check it now. 

      {
       DefaultHttpClient httpclient = new DefaultHttpClient();
        httpclient.getParams().setParameter(ClientPNames.HANDLE_REDIRECTS,false);
        HttpGet httpget = new HttpGet("https://www.googleapis.com/calendar/v3/users/me/calendarList");
        httpget.addHeader("Authorization", "Bearer " + accessToken);

        //HttpPost httppost = new HttpPost("https://www.googleapis.com/calendar/v3/users/me/calendarList");
        //httppost.addHeader("Authorization", "Bearer " + accessToken); //authentication
       // httppost.addHeader("Host", "googleapis.com");

       /* StringEntity params = new StringEntity("{\"id\":}");
        httppost.setEntity(params);*/

        //EXECUTE REQUEST
        HttpResponse postResponse = httpclient.execute(httpget);

        //RESPONSE
        HttpEntity entity = postResponse.getEntity();
        String responseBody1 = EntityUtils.toString(entity);
        logger.debug(responseBody1);
       } 
```

# java - 将 JSON 数组表示为字符串

> ID：11872840
> 
> 赞同：0
> 
> 时间：2012-08-08T20:42:13.063
> 
> 标签：java, json, parsing

我正在尝试将 JSON 数组转换为字符串，但它给了我错误，比如每次都删除这个令牌。我做错了什么吗？

```
private String jString = "{
    \"geodata\": [
        {
                \"id\": \"1\",
                \"name\": \"Jenifer Hathway\",
                \"email\": \"jh@gmail.com\",
                \"address\": \"xx-xx-xxxx,x - street, x - country\",
                \"gender\" : \"female\",
                \"latitude\" : \"37.33774833333334\",
                \"longitude\" : \"-121.88670166666667\",
                \"phone\": {
                    \"mobile\": \"+91 0000000000\",
                    \"home\": \"00 000000\",
                    \"office\": \"00 000000\"
                }
        },
        {
                \"id\": \"2\",
                \"name\": \"Johnny Depp\",
                \"email\": \"johnny_depp@gmail.com\",
                \"address\": \"xx-xx-xxxx,x - street, x - country\",
                \"gender\" : \"male\",
                \"latitude\" : \"37.336453\",
                \"longitude\" : \"-121.884985\",
                \"phone\": {
                    \"mobile\": \"+91 0000000000\",
                    \"home\": \"00 000000\",
                    \"office\": \"00 000000\"
                }
        }

    ]
}"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T20:50:29.043

Java 不支持多行字符串。

```
private String jString = "{"
+ "    \"geodata\": ["
+ "        {"
+ "                \"id\": \"1\","
+ "                \"name\": \"Jenifer Hathway\","
+ "                \"email\": \"jh@gmail.com\","
+ "                \"address\": \"xx-xx-xxxx,x - street, x - country\","
+ "                \"gender\" : \"female\","
+ "                \"latitude\" : \"37.33774833333334\","
+ "                \"longitude\" : \"-121.88670166666667\","
+ "                \"phone\": {"
+ "                    \"mobile\": \"+91 0000000000\","
+ "                    \"home\": \"00 000000\","
+ "                    \"office\": \"00 000000\""
+ "                }"
+ "        },"
+ "        {"
+ "                \"id\": \"2\","
+ "                \"name\": \"Johnny Depp\","
+ "                \"email\": \"johnny_depp@gmail.com\","
+ "                \"address\": \"xx-xx-xxxx,x - street, x - country\","
+ "                \"gender\" : \"male\","
+ "                \"latitude\" : \"37.336453\","
+ "                \"longitude\" : \"-121.884985\","
+ "                \"phone\": {"
+ "                    \"mobile\": \"+91 0000000000\","
+ "                    \"home\": \"00 000000\","
+ "                    \"office\": \"00 000000\""
+ "                }"
+ "        }"
+ "    ]"
+ "}"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:52:33.597

您在此行有另一个错字

```
\"home\": \"00 000000", 
```

应该

```
\"home\": \"00 000000\", 
```

我也会尝试按照其他人的建议转义所有行

# java - 如何解析android中的jsonObject？

> ID：11872845
> 
> 赞同：-2
> 
> 时间：2012-08-08T20:42:47.340
> 
> 标签：java, android, json

> **可能重复：**
> [如何在 Android 中解析这个 JSON？](https://stackoverflow.com/questions/3605077/how-can-i-parse-this-json-in-android)

我有一个要求，我需要解析 jsonObject。我的格式将是

```
[{"music":{"artist":"Dire Straits","album":"The Best of Dire Straits","genre":"Pop","title":"Sultans Of Swing"}},{"camera":{"picture":"http:\/\/sp.sony-europe.com\/da\/594\/195346.jpeg","model":"Digital Still Camera - H Series - DSC-HX200V","make":"Sony","price":510}},{"book":{"description":"What is self, and how can a self come out of inanimate matter?' Is the riddle that drove Douglas Hofstadter to write this extraordinary book. In order to impart his highly original and personal view on the core mystery of human existence - the intangible sensation of 'I'-ness - Hofstadter defines the playful yet seemingly paradoxical notion of 'strange loop', and explicates this idea using analogies from many disciplines.","authors":"Douglas R Hofstadter","price":650,"id":40724766,"title":"G\u00f6del, Escher, Bach: an Eternal Golden Braid"}}] 
```

如何解析这个？帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:45:19.563

[谷歌：Android 解析 json](https://www.google.nl/search?q=android%20parse%20json%20in%20anroid&sugexp=chrome,mod=19&sourceid=chrome&ie=UTF-8#hl=nl&sclient=psy-ab&q=android%20parse%20json%20&oq=android%20parse%20json%20&gs_l=serp.3..0l4.1426.1426.0.1683.1.1.0.0.0.0.43.43.1.1.0...0.0...1c._-UxYDQRzqE&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=5f7b965ca03a6e72&biw=1366&bih=643)

第一个教程命中：[这里](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:45:50.437

您可以使用[GSON](http://code.google.com/p/google-gson/)（或）[json-lib](http://www.json.org/)等 JSON 库之一来解析 JSON 字符串。他们为 json 字符串创建 Java 对象。

# playframework - greenscript LESS @imports 相对路径

> ID：11872849
> 
> 赞同：0
> 
> 时间：2012-08-08T20:43:00.217
> 
> 标签：playframework, less, greenscript

我有一个关于剧中“@import”语句的相对路径的问题！框架的 greenscript 模块。具体来说，我有一个“main.less”文件，它通过以下语法导入我所有的其他更少文件：

```
 @import "variables.less";
 @import "mixins.less";
 @import "stuff.less";... 
```

在开发模式下，这些文件都返回 404，并在 greenscript 最小化目录（默认为“public/gs”）中查找它们。有谁知道如何让它们相对于 main.less 导入？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T22:04:31.060

尽量不要`@import`在更少的文件中使用。相反，在您的视图文件中使用 ${greenscript.@import}。请参阅`less-and-coffee`greenscript 模块分发中提供的示例。

# c# - 跨 Windows 体系结构的 JPEG 解压缩不一致

> ID：11872850
> 
> 赞同：13
> 
> 时间：2012-08-08T20:43:02.160
> 
> 标签：c#, .net, image-processing, jpeg

我正在使用不同版本的 Windows 的一堆计算机上测试 JPEG 解压缩。所有这些计算机都安装了 .NET 4，我正在针对 .NET 2 和“Any CPU”平台目标进行编译。以下代码在不同系统上产生不同的输出。

```
Bitmap bmp = (Bitmap)Image.FromFile("test.jpg");

long datasum = 0;
for (int y = 0; y < bmp.Height; y++)
    for (int x = 0; x < bmp.Width; x++)
        datasum = datasum + bmp.GetPixel(x, y).R + bmp.GetPixel(x, y).G + bmp.GetPixel(x, y).B;

Console.WriteLine(datasum); 
```

所有 Win7 64 位和 WinXP 32 位机器都产生一个结果。而所有的 Win7 32 位机器都会产生另一个结果。

任何想法为什么输出会不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:07:32.310

它由 gdiplus.dll 实现。检查哪些版本实际加载在不同的系统上，以及位数。

可能存在浮点问题，在一台机器上允许 MMX 指令，而不是另一台。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T22:53:16.370

可与[此](http://msdn.microsoft.com/en-us/library/4sahykhd.aspx)有关。

尝试将 useEmbeddedColorManagement 参数设置为 true。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T19:53:44.203

在所有机器上安装[最新版本的 GDI+](http://www.microsoft.com/en-us/download/details.aspx?id=18909)，然后重试。

此外，如果您决定自己实现，我发现[这个示例](http://www.xbdev.net/image_formats/jpeg/jpeg_decoder_source/index.php)在过去很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T20:42:41.307

我几乎不敢提出这个建议，但是如果您找到或实现自己的 jpeg 解码器怎么办？走老路，依靠基础设施只给你一个字节流。

这将是一个很大的痛苦，但可以消除你所看到的不一致。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-02T15:30:21.453

这不是你的答案，我刚刚过了一半。

我认为最好的解决方案是使用您自己的 JPEG 解码器，我找到了源代码：[Mini Jpeg 解码器](http://www.h4ck3r.net/2009/12/02/mini-jpeg-decoder/)，但它是 C++ 的，我将它部署到 Win32 dll 文件，你可以在[这里](http://mironline.net/_tmp/MiniJpegDecoder.rar)找到它。我在 .net 框架中使用它已经超过 10 个小时，但我没有成功！因为我对c++一无所知。

# ruby-on-rails - 静态：类的未定义方法“boo”

> ID：11872851
> 
> 赞同：0
> 
> 时间：2012-08-08T20:43:07.957
> 
> 标签：ruby-on-rails, ruby, methods, static-methods

我在 lib 目录中有一个类：

`lib/static.rb`

在里面我有：

```
class Static
  def self.boo
    return 'what'
  end
end 
```

我有一个控制器：

```
class PensionsController < ApplicationController
  layout 'page'
  def guides
    render :text => Static.boo
  end
end 
```

我收到了这个错误：

```
undefined method `boo' for Static:Class 
```

有什么想法我在这里做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:46:40.687

您使用的是 Rails 2 还是 3？在 Rails 3 中，lib 目录中的类默认不加载。

我在 config/application.rb 的底部有这一行来启用该行为：

```
config.autoload_paths += %W(#{config.root}/lib) 
```

# jquery - jquery 使用 map/each 延迟

> ID：11872854
> 
> 赞同：1
> 
> 时间：2012-08-08T20:43:17.313
> 
> 标签：jquery, jquery-deferred

我以前没有使用过延迟，但我在这里和那里读过一些关于它们的内容，据我了解，听起来它们可以解决我当前遇到的问题。我有一个页面必须加载 4 个广告。以前，由于服务器为每个广告查询数据库需要时间，因此页面速度变慢。因此，我将横幅广告调用移至 Web 服务。这很好用，但是如果我没有广告，我需要隐藏容器 div，这意味着我需要知道所有 ajax 调用何时完成，然后检查是否加载了任何广告。

我有以下代码可以成功调用 Web 服务并加载广告，但 then() 函数似乎没有正常工作。它似乎在 ajax 调用完成之前执行。我从这个页面得到了我的代码[JQuery deferred with .each()](https://stackoverflow.com/questions/6162855/jquery-deferred-with-each)，我能看到的唯一区别是，在他们的例子中，它显示了在 deferred 中返回函数调用。但是我尝试用 return{} 包围我的函数内部，但它只是抛出一个错误（意外的令牌“=”）。谁能告诉我我做错了什么？谢谢。

```
 var deferreds = $(".ad").map(function () {

    var t = $(this);

    $.ajax({
        type: "POST",
        url: "/Services/Services.asmx/GetBanner",
        data: "{'bannerId':" + t.attr("bannerid") + ",'siteId':" + sid + ",'dt':'" + new Date().toString() + "'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json"
    })
    .success(function(data) {
        if (data.d.Banner != null && data.d.Banner != undefined) {
            t.html("<div class=\"featuredAd\">" + data.d.Banner + "</div>");
        }
    });
});

$.when.apply(null, deferreds.get()).then(function () {
    if($(".featuredAd").length > 0)
        $("#dvFeaturedBottom").show();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:47:27.690

您没有返回承诺对象。

```
 var deferreds = $(".ad").map(function () {

    var t = $(this);

    return $.ajax({
        type: "POST",
        url: "/Services/Services.asmx/GetBanner",
        data: "{'bannerId':" + t.attr("bannerid") + ",'siteId':" + sid + ",'dt':'" + new Date().toString() + "'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json"
    })
    .done(function(data) {
        if (data.d.Banner != null && data.d.Banner != undefined) {
            t.html("<div class=\"featuredAd\">" + data.d.Banner + "</div>");
        }
    });
});

$.when.apply($, deferreds.get()).then(function () {
    if($(".featuredAd").length > 0)
        $("#dvFeaturedBottom").show();
}); 
```

# spring-3 - 包扫描 Spring 3 上下文：component-scan

> ID：11872858
> 
> 赞同：0
> 
> 时间：2012-08-08T20:43:39.337
> 
> 标签：spring-3

在做或`<context:component-scan base-package=` 做有什么不同吗？我有这个疑问，因为这两种方式都有效。我有一个项目**A**可以访问一些数据，这个项目被打包为一个 jar，然后项目**B**导入项目**A**。两者都有不同的包结构，如和。因此，要使组件扫描工作。我声明如下。我必须说这个声明是有效的，但是在 spring（或其他地方）的每个示例中总是使用. 以这种方式工作是否存在一些问题？`com.mycompany.proyect.dao``com.mycompany`******`com.mycompany.proyectA.dao``com.mycompany.proyectB.dao``context:component-scan``com.mycompany``com.mycompany.dao`******

 ******谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:06:28.740

据我所知，DAO 方法`com.mycompany.proyectA.dao`和`com.mycompany.proyectB.dao`

解决方案是拆分为 2 个上下文：组件扫描一个用于 projectADAo，一个用于 projectBDao。

此外，您可以将 context:component-scan 拆分为 2 个 xml 文件，然后 分别`daoA.xml and daoB.xml`在每个 和 中拥有一个 context:component-scan 。`ex: context:component-scan as com.mycompany.proyectA.dao``context:component-scan as com.mycompany.proyectB.dao`******

# linux - linux内核是否发布进程状态更改事件？

> ID：11872863
> 
> 赞同：1
> 
> 时间：2012-08-08T20:43:58.120
> 
> 标签：linux, linux-kernel

我正在运行一个多线程的 java 应用程序。我想知道我的应用程序利用多核 cpu 的效果如何。Linux 中是否有提供以下信息的工具或 api？

进程 ID、线程名称、状态、核心、时间。

linux内核是否发布进程状态更改事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T14:11:08.730

看看 ftrace 或 SystemTap。或者，如果您想要精美的图表，[请使用 KernelShark](https://lwn.net/Articles/425583/)。

# ajax - 无法在 Ext.window.Window 中设置值

> ID：11872870
> 
> 赞同：0
> 
> 时间：2012-08-08T20:44:38.660
> 
> 标签：ajax, extjs4

我尝试使用 Ext.ComponentManager 设置值，但它不起作用。这是我的代码.. 我想从 id 设置名字的值。我从服务器获取 id 值，但无法在名字和姓氏字段中设置它。请帮忙。

```
Ext.define('sample.view.student.Edit', {
extend : 'Ext.window.Window',
alias : 'widget.studentedit',

requires : ['Ext.form.Panel', 'Ext.form.field.Text',
        'Ext.form.field.ComboBox'],

title : 'student dtls',
layout : 'fit',
autoShow : true,
width : 280,

iconCls : 'icon-user',

initComponent : function() {
    this.items = [{
        xtype : 'form',
        padding : '5 5 0 5',
        border : false,
        style : 'background-color: #fff;',

        fieldDefaults : {
            anchor : '100%',
            labelAlign : 'left',
            allowBlank : false,
            combineErrors : true,
            msgTarget : 'side'
        },

        items : [ {
                    xtype : 'textfield',
                    name : 'studentId',
                    fieldLabel : 'studentId',
                    listeners : {
                        blur : function() {
                            //    fnDataForm(this.value);
                            Ext.Ajax.request({
                                url : 'student/fetchDtls.action',
                                params : {
                                    guiInstrId : this.value
                                },
                                success : function(response, opts) {
                                    var jsonResp = Ext
                                            .decode(response.responseText);

                                    console.dir(jsonResp);
                                    console.log(jsonResp.studentFirstName);
                                    // How to set jsonResp.studentFirstName value in below textfield ?
                                    this.up('form').getForm().getValues().studentFirstName.setValue(jsonResp.studentFirstName);
                                },
                                failure : function(response, opts) {
                                    console
                                            .log('server-side failure with status code '
                                                    + response.status);
                                }
                            });
                        }
                    }

                }, {
                    xtype : 'textfield',
                    name : 'studentFirstName',
                    fieldLabel : 'student First Name'

                }, {
                    xtype : 'textfield',
                    name : 'studentLastName',
                    fieldLabel : 'student Last Name'

                }]
    }]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T22:39:32.550

我不得不把它放在我的代码中，然后它就像魅力一样工作。让我知道是否有人也有同样的问题..它也可能对你有帮助......

```
{
xtype: 'textfield',
name: 'studentFirstName',
itemId: 'studentfirstname',
fieldLabel: 'student First Name'
}

..

 var form = this.up('form'),
  sfn = form.down('#studentfirstname');

sfn.setValue(sonResp.studentFirstName); 
```

# python - Python 和字符集

> ID：11872873
> 
> 赞同：-1
> 
> 时间：2012-08-08T20:44:46.667
> 
> 标签：python, mysql, character-encoding

我在使用 python 字符集和德语字符时遇到问题。我正在尝试使用 mysqldb 从数据库中获取字符串，尝试这样做：

```
array=result.fetch_row()[0] 
```

如果我打印数组，我会得到所有值和我的字符串 'f\xfcr' <-- 这就是我需要的。

但是如果我打印`array[stringlocation]`我得到`'f�r'`代表 66 fc 72 （为什么不再是这个 unicode 了？）

如果我将其写入文件：`'fÃŒr'`或十六进制 66 C3 BC 72

我认为这不是mysqldb的问题。我无法获得所需的字符。

注意：我使用的是 latin1 的集合名称。如果我使用 utf8，我会得到双打：`f\xc3\xbcr`

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T22:00:16.253

如果`'f\xfcr'`是从数据库返回的内容，并且与您需要写入文件的内容相同，那么唯一的问题是打印时显示的内容。为此，您需要进行翻译。

```
>>> print 'f\xfcr'.decode('latin1')
für 
```

这是有效的，因为该`print`命令会自动将生成的 Unicode 转换`decode`回显示器使用的字符集。

# xpages - 扩展库应用程序控制中心列宽度或应用程序控制替代

> ID：11872878
> 
> 赞同：0
> 
> 时间：2012-08-08T20:44:55.263
> 
> 标签：xpages

我正在使用扩展库应用程序控件在页面上提供左侧菜单，顶部带有横幅。应用程序控件中禁用了页脚等大多数内容。我真的不在乎它是否符合 oneui，我只想要一个左侧菜单。

我在中心栏中有一个视图。我的问题是中柱不够宽。一些列被截断。有没有办法控制它的宽度？甚至禁用右列？

或者另一个是否有一个自定义控件，就像应用程序控件一样，只有一个左列可以放置菜单控件，而右侧的列可以放置视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T08:51:09.283

仅设置中心列的最小宽度。所以它总是扩展到剩下的最大宽度（在浏览器内），这当然受限于用户设备的分辨率。

首先，我在下面粘贴了一个示例，其中仅在满足特定条件时才显示右列。如果您不打算使用它，只需将其完全删除。其次 .lotusColLeft 类控制左列的宽度，您可以减少它以获得更多的中心列宽度。最后，如果您决定为中心列中的内容包装器提供固定宽度，则还需要添加溢出属性以使中心列可滚动。然而，在我看来，最后一个选项不太理想......希望它有所帮助。

自定义控制

```
<!-- CUSTOM CONTROL -->
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core" xmlns:xe="http://www.ibm.com/xsp/coreex">
    <xe:applicationLayout id="applicationLayout1">
        <xp:callback facetName="facetMiddle" id="facetMiddle"></xp:callback>
        <xe:this.facets>
            <!-- REMOVE THE ROW BELOW IF THE RIGHT COLUMN IS NEVER USED -->
            <xp:callback facetName="facetRight" id="facetRight" xp:key="RightColumn"></xp:callback>
            <xp:callback facetName="facetLeft" id="facetLeft" xp:key="LeftColumn"></xp:callback>
        </xe:this.facets>
        <xe:this.configuration>
            <xe:oneuiApplication titleBar="false" placeBar="false"
                footer="false" legal="false" productLogo="/logo.gif">
            </xe:oneuiApplication>
        </xe:this.configuration>
    </xe:applicationLayout>
</xp:view> 
```

XPAGE

```
<!-- XPAGE -->
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core" xmlns:xc="http://www.ibm.com/xsp/custom">
    <style>
        .lotusColLeft { width:100px }
        /* UNCOMMENT THESE LINES TO SEE THE LAST OPTION IN ACTION
        .hugeWidth { width:2000px }
        .lotusContent { overflow-x: scroll; }
        */
    </style>

    <xc:layout>
        <xp:this.facets>
            <xp:panel xp:key="facetMiddle" styleClass="hugeWidth">MiddlePanel</xp:panel>
            <!-- REMOVE THE ROW BELOW IF THE RIGHT COLUMN IS NEVER USED, OR DEFINE ITS CONDITION -->
            <xp:panel xp:key="facetRight" rendered="#{javascript:viewScope.hasView}">RightPanel</xp:panel>
            <xp:panel xp:key="facetLeft">LeftPanel</xp:panel>
        </xp:this.facets>
    </xc:layout>
</xp:view> 
```

# r - 找出给定函数中调用了哪些函数

> ID：11872879
> 
> 赞同：9
> 
> 时间：2012-08-08T20:44:57.243
> 
> 标签：r, function, recursion, dependencies, function-declaration

> **可能重复：**
> [在 R 中生成调用图](https://stackoverflow.com/questions/4795982/generating-a-call-graph-in-r)

我想系统地分析给定函数，以找出在该函数中调用了哪些其他函数。如果可能，递归。

[我在milktrader](http://www.milktrader.net/)的一篇博客文章中遇到了这个函数，我可以用它对**包**（或命名空间）做类似的事情

```
listFunctions <- function(
    name,
    ...
){ 
    name.0  <- name
    name    <- paste("package", ":", name, sep="")
    if (!name %in% search()) {
        stop(paste("Invalid namespace: '", name.0, "'"))
    }
    # KEEP AS REFERENCE       
#    out <- ls(name)
    funlist <- lsf.str(name)
    out     <- head(funlist, n=length(funlist))
    return(out)
}

> listFunctions("stats")
  [1] "acf"                  "acf2AR"               "add.scope"           
  [4] "add1"                 "addmargins"           "aggregate"           
  [7] "aggregate.data.frame" "aggregate.default"    "aggregate.ts"        
 [10] "AIC"                  "alias"                "anova"               
....
[499] "xtabs" 
```

但是，我想要一个函数，其中函数`name`的名称是函数的名称，返回值是在`name`.

## 动机

我实际上需要某种基于字符的输出（向量或列表）。这样做的原因是我正在开发一个通用包装函数，用于并行化一个任意的“内部函数”，您不必经历耗时的试错过程来找出哪些其他函数内部功能取决于。所以我所追求的函数的输出将直接用于`snowfall::sfExport()`和/或`snowfall::sfSouce`。

编辑 2012-08-08

由于表里不一，有一些票数接近，明天我会检查答案如何与另一个问题合并。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T07:51:46.830

试试这个例子：

```
library(codetools)

ff <- function(f) {
  leaf <- function (e, w) {
    r <- try(eval(e), silent = TRUE)
    if(!is.null(r) && is.function(r)) ret <<- c(ret, as.character(e))
  }
  call <- function (e, w) {
    walkCode(e[[1]], w)
    for (a in as.list(e[-1])) if (!missing(a)) walkCode(a, w)
  }
  ret <- c()
  walkCode(body(f), makeCodeWalker(call = call, leaf = leaf, write = cat))
  unique(ret)
} 
```

然后，

```
> ff(data.frame)
 [1] "{"               "<-"              "if"              "&&"              "is.null"         "row.names"       "function"        "is.character"   
 [9] "new"             "as.character"    "anyDuplicated"   "return"          "||"              "all"             "=="              "stop"           
[17] "gettextf"        "warning"         "paste"           "which"           "duplicated"      "["               "as.list"         "substitute"     
[25] "list"            "-"               "missing"         "length"          "<"               "!"               "is.object"       "is.integer"     
[33] "any"             "is.na"           "unique"          "integer"         "structure"       "character"       "names"           "!="             
[41] "nzchar"          "for"             "seq_len"         "[["              "is.list"         "as.data.frame"   ".row_names_info" ">"              
[49] "deparse"         "substr"          "nchar"           "attr"            "abs"             "max"             "("               "%%"             
[57] "unclass"         "seq_along"       "is.vector"       "is.factor"       "rep"             "class"           "inherits"        "break"          
[65] "next"            "unlist"          "make.names"      "match"           ".set_row_names" 
> ff(read.table)
 [1] "{"              "if"             "&&"             "missing"        "file"           "!"              "text"           "<-"             "textConnection"
[10] "on.exit"        "close"          "is.character"   "nzchar"         "inherits"       "stop"           "isOpen"         "open"           ">"             
[19] "readLines"      "<"              "min"            "("              "+"              "lines"          ".Internal"      "quote"          "length"        
[28] "all"            "=="             "pushBack"       "c"              "stdin"          "scan"           "col"            "numeric"        "-"             
[37] "for"            "seq_along"      "["              "max"            "!="             "warning"        "paste0"         ":"              "make.names"    
[46] "names"          "is.null"        "rep"            "match"          "any"            "<="             "rep.int"        "list"           "%in%"          
[55] "sapply"         "do.call"        "data"           "flush"          "[["             "which"          "is.logical"     "is.numeric"     "|"             
[64] "gettextf"       "&"              "is.na"          "type.convert"   "character"      "as.factor"      "as.Date"        "as.POSIXct"     "::"            
[73] "methods"        "as"             "row.names"      ".set_row_names" "as.integer"     "||"             "is.object"      "is.integer"     "as.character"  
[82] "anyDuplicated"  "class"          "attr" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-09T03:40:15.833

那里一定有更好的方法，但这是我的尝试：

```
listFunctions <- function(function.name, recursive = FALSE, 
                          checked.functions = NULL){

    # Get the function's code:
    function.code <- deparse(get(function.name))

    # break code up into sections preceding left brackets:
    left.brackets <- c(unlist(strsplit(function.code, 
                                       split="[[:space:]]*\\(")))

    called.functions <- unique(c(unlist(sapply(left.brackets, 
                                               function (x) {

        # Split up according to anything that can't be in a function name.
        # split = not alphanumeric, not '_', and not '.'
        words <- c(unlist(strsplit(x, split="[^[:alnum:]_.]")))

        last.word <- tail(words, 1)
        last.word.is.function <- tryCatch(is.function(get(last.word)),
                                      error=function(e) return(FALSE))
        return(last.word[last.word.is.function])
    }))))

    if (recursive){

        # checked.functions: We need to keep track of which functions 
        # we've checked to avoid infinite loops.
        functs.to.check <- called.functions[!(called.functions %in%
                                          checked.functions)]

        called.functions <- unique(c(called.functions,
            do.call(c, lapply(functs.to.check, function(x) {
                listFunctions(x, recursive = T,
                              checked.functions = c(checked.functions,          
                                                    called.functions))
                }))))
    }
    return(called.functions)
} 
```

结果：

```
> listFunctions("listFunctions", recursive = FALSE)
 [1] "function"      "deparse"       "get"           "c"            
 [5] "unlist"        "strsplit"      "unique"        "sapply"       
 [9] "tail"          "tryCatch"      "is.function"   "return"       
[13] "if"            "do.call"       "lapply"        "listFunctions"

> system.time(all.functions <- listFunctions("listFunctions", recursive = TRUE))
   user  system elapsed 
  92.31    0.08   93.49 

> length(all.functions)
  [1] 518 
```

如您所见，递归版本返回了很多函数。这样做的问题是它会返回进程中调用的**每个**函数，这显然会随着您的进行而累加。无论如何，我希望您可以使用它（或修改它）以满足您的需求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T16:53:33.717

## 免责声明

此答案基于[Edward](https://stackoverflow.com/users/1546302/edward)和[Kohske](https://stackoverflow.com/users/314020/kohske)的答案。对于最终接受的答案，我**不会**考虑这一点，其主要目的只是为其他用户记录另一种/扩展方法和一些基准。

## 内在功能 1

由[爱德华](https://stackoverflow.com/users/1546302/edward)提供。

```
listFunctions_inner <- function(
    name, 
    do.recursive=FALSE,
    .do.verbose=FALSE,
    .buffer=new.env()
){
    ..name  <- "listFunctions_inner"
    if (!is.character(name) | missing(name)) {
        stop(paste(..name, " // expecting 'name' of class 'character'", sep=""))
    }
    name.0 <- name
    if (tryCatch(is.function(get(name)), error=function(e) FALSE)) {
    # PROCESS FUNCTIONS       
        if (.do.verbose) {
            message(paste(..name, " // processing function: '", name, "'", sep=""))
        } 
        # Get the function's code:
        code <- deparse(get(name))  
        # break code up into sections preceding left brackets:
        left.brackets <- c(unlist(strsplit(code, split="[[:space:]]*\\(")))  
        out <- sort(unique(unlist(lapply(left.brackets, function (x) {
            # Split up according to anything that can't be in a function name.
            # split = not alphanumeric, not '_', and not '.'
            words <- c(unlist(strsplit(x, split="[^[:alnum:]_.]")))

            last.word <- tail(words, 1)
            last.word.is.function <- tryCatch(is.function(get(last.word)),
                                          error=function(e) return(FALSE))
            out <- last.word[last.word.is.function]
            return(out)
        }))))
        if (do.recursive){           
            # funs.checked: We need to keep track of which functions 
            # we've checked to avoid infinite loops.
            .buffer$funs.checked <- c(.buffer$funs.checked, name)
            funs.next <- out[!(out %in% .buffer$funs.checked)]        
            if (length(funs.next)) {
                out <- sort(unique(unlist(c(out, do.call(c,
                    lapply(funs.next, function(x) {
                        if (x == ".Primitive") {
                            return(NULL)
                        }
                        listFunctions_inner(
                            name=x, 
                            do.recursive=TRUE,
                            .buffer=.buffer
                        )
                    })
                )))))            
            }
        } 
        out <- sort(unique(unlist(out)))
    } else {
    # PROCESS NAMESPACES
        if (.do.verbose) {
            message(paste(..name, " // processing namespace: '", name, "'", sep=""))
        }
        name    <- paste("package", ":", name, sep="")
        if (!name %in% search()) {
            stop(paste(..name, " // invalid namespace: '", name.0, "'"))
        }
        # KEEP AS REFERENCE       
#        out <- ls(name)
        funlist <- lsf.str(name)
        out     <- head(funlist, n=length(funlist))
    }
    out
} 
```

## 内在功能 2

由[Kohske提供](https://stackoverflow.com/users/314020/kohske)

```
listFunctions2_inner <- function(
    name,
    do.recursive=FALSE,
    .do.verbose=FALSE,
    .buffer=new.env()
) {
    ..name <- "listFunctions2_inner"
    if (!is.character(name) | missing(name)) {
        stop(paste(..name, " // expecting 'name' of class 'character'", sep=""))
    }
    name.0 <- name
    if (tryCatch(is.function(get(name)), error=function(e) FALSE)) {
    # PROCESS FUNCTIONS       
        leaf <- function (e, w) {
            r <- try(eval(e), silent = TRUE)
            if(!is.null(r) && is.function(r)) out <<- c(out, as.character(e))
        }
        call <- function (e, w) {
            walkCode(e[[1]], w)
            for (a in as.list(e[-1])) if (!missing(a)) walkCode(a, w)
        }
        out <- c()
        walkCode(
            body(name), 
            makeCodeWalker(call=call, leaf=leaf, write=cat)
        )
        if (do.recursive){           
            # funs.checked: We need to keep track of which functions 
            # we've checked to avoid infinite loops.
            .buffer$funs.checked <- c(.buffer$funs.checked, name)
            funs.next <- out[!(out %in% .buffer$funs.checked)]        
            if (length(funs.next)) {
                out <- sort(unique(unlist(c(out, do.call(c,
                    lapply(funs.next, function(x) {
                        if (x == ".Primitive") {
                            return(NULL)
                        }
                        listFunctions_inner(
                            name=x, 
                            do.recursive=TRUE,
                            .buffer=.buffer
                        )
                    })
                )))))            
            }
        }
        out <- sort(unique(out))
    } else {
    # PROCESS NAMESPACES
        if (.do.verbose) {
            message(paste(..name, " // processing namespace: '", name, "'", sep=""))
        }
        name    <- paste("package", ":", name, sep="")
        if (!name %in% search()) {
            stop(paste(..name, " // invalid namespace: '", name.0, "'"))
        }
        # KEEP AS REFERENCE       
#        out <- ls(name)
        funlist <- lsf.str(name)
        out     <- head(funlist, n=length(funlist))
    }
} 
```

## 包装函数

这个包装器让您选择实际使用的内部函数，并允许指定应该或不应该考虑的命名空间。这对我的用例很重要（参见上面的**动机**部分），因为我通常只对`.GlobalEnv`尚未移动到包中的“自己的”函数（在 中）感兴趣。

```
listFunctions <- function(
    name, 
    ns,
    innerFunction=listFunctions,
    do.inverse=FALSE,
    do.table=FALSE,
    do.recursive=FALSE,
    .do.verbose=FALSE
){
    ..name  <- "listFunctions_inner"
    if (!is.character(name) | missing(name)) {
        stop(paste(..name, " // expecting 'name' of class 'character'", sep=""))
    }
    out <- innerFunction(name, do.recursive=do.recursive, 
        .do.verbose=.do.verbose)

    if (do.table) {
        x.ns <- sapply(out, function(x) {
            out <- environmentName(environment(get(x)))
            if (out == "") {
                out <- ".Primitive"
            }
            out
        })
        if (!missing(ns)) {
            if (!do.inverse) {
                idx <- which(x.ns %in% ns)
            } else {
                idx <- which(!x.ns %in% ns)
            }
            if (!length(idx)) {
                return(NULL)
            }
            out <- out[idx]
            x.ns  <- x.ns[idx]
        }
        out <- data.frame(name=out, ns=x.ns, stringsAsFactors=FALSE)
        rownames(out) <- NULL
    }
    out
} 
```

## 应用

```
# Character vector
listFunctions("install.packages")

# Data Frame (table)
> listFunctions("install.packages", do.table=TRUE)
                 name         ns
1           .libPaths .Primitive
2   .standard_regexps       base
3                 any .Primitive
4  available.packages      utils
...
84          winDialog      utils

# Consider 'base' only
> listFunctions("install.packages", ns="base", do.table=TRUE)
                name   ns
1  .standard_regexps base
2           basename base
3       capabilities base
...
56           warning base

# Consider all except 'base'
> listFunctions("install.packages", ns="base", do.inverse=TRUE, do.table=TRUE)
                 name         ns
1           .libPaths .Primitive
2                 any .Primitive
3  available.packages      utils
...
28          winDialog      utils

# Recursively, no table
listFunctions("install.packages", do.recursive=TRUE)

# Recursively table
listFunctions("install.packages", do.table=TRUE, do.recursive=TRUE)
                                name         ns
1                     .amatch_bounds       base
2                      .amatch_costs       base
3                                 .C .Primitive
...
544                           xzfile       base

# List functions inside a namespace
listFunctions("utils")
listFunctions("utils", do.table=TRUE) 
```

## 基准内部函数 1

```
> bench <- microbenchmark(listFunctions("install.packages"))
bench
> Unit: milliseconds
                               expr      min       lq   median       uq
1 listFunctions("install.packages") 152.9654 157.2805 160.5019 165.4688
       max
1 244.6589

> bench <- microbenchmark(listFunctions("install.packages", do.recursive=TRUE), times=3)
bench
> Unit: seconds
                                                    expr      min      lq
1 listFunctions("install.packages", do.recursive = TRUE) 6.272732 6.30164
    median       uq      max
1 6.330547 6.438158 6.545769 
```

## 基准内部函数 2

```
> bench <- microbenchmark(listFunctions("install.packages",
+         innerFunction=listFunctions2_inner))
bench
> Unit: milliseconds
                                                                     expr
1 listFunctions("install.packages", innerFunction = listFunctions2_inner)
       min       lq   median       uq      max
1 207.0299 212.3286 222.6448 324.6399 445.4154

> bench <- microbenchmark(listFunctions("install.packages", 
+     innerFunction=listFunctions2_inner, do.recursive=TRUE), times=3)
bench
Warning message:
In nm[nm == ""] <- exprnm[nm == ""] :
  number of items to replace is not a multiple of replacement length
> Unit: seconds
                                                                      expr
1 listFunctions("install.packages", innerFunction = listFunctions2_inner, 
       min       lq   median       uq      max
1 7.673281 8.065561 8.457841 8.558259 8.658678 
```

# javascript - 使用 jquery.validate 数据注释验证数字范围

> ID：11872882
> 
> 赞同：0
> 
> 时间：2012-08-08T20:45:15.793
> 
> 标签：javascript, jquery, jquery-validate

构造输入时使用 jQuery.validate 的 ASP.NET MVC 3 视图

```
<input 
  type="text" 
  class="text-box single-line" 
  id="ReserveQuantity" 
  name="ReserveQuantity" 
  data-val="true" 
  data-val-required="The Reserve Quantity field is required." 
  data-val-number="This value must be numeric"
> 
```

这是用于 ReserveQuantity 输入的标记。除了这些参数，我`data-`应该使用什么注释来确保这里只有某个数字范围是可以接受的，**而无需手动验证**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T23:06:50.927

实际上有一个内置的范围数据注释，它看起来像这样：

```
data-val-range="The field must be in range 0 to 104." 
data-val-range-min="0" 
data-val-range-max="104" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T21:29:20.303

[http://docs.jquery.com/Plugins/Validation/Methods/range#range](http://docs.jquery.com/Plugins/Validation/Methods/range#range)

```
var minVal = 10, maxVal = 20;

$("#myform").validate({
    rules: {
        ReserveQuantity: {
            required: true,
            range: [ minVal, maxVal ]
        }
    }
}); 
```

# php - Java 脚本功能的第二部分不起作用

> ID：11872889
> 
> 赞同：0
> 
> 时间：2012-08-08T20:45:27.453
> 
> 标签：php, javascript, validation

我有一个`validateFunction`on submit 检查是否输入了姓名和电话号码。（电话是可选的，因此它仅检查是否已填充）

名称验证工作完美，但数字没有。

我在论坛上读到了一些关于在第一次返回后调用的任何东西都不会被执行的东西，我不明白。

有人可以帮助使此代码正常工作吗？

```
function validateForm()
        {
            var x=document.forms["enterGuest"]["guestName"].value;
            if (x==""||x==Null)
              {
                  alert("Guest Name Please");
                  return false;
              }

            var c=document.forms["enterGuest"]["guestNum"].value;
            if(c=="" || c==Null)

              {
              // Do nothing. Guest does not want to share the phone number.
                alert(" This Guest Cannot Receive A Call.");
                         return true;

              }
               else 
            {

                       c.replace(/[^0-9]/g, '');
                       if (c.length !=10)
                        {
                         alert("10 Digits Please.");
                         return false;
                        }
                        else
                     {
                        var r = confirm(" Please Confirm The Phone Number Is Correct.");
                         if(r==true)
                         {
                         return true; 
                         }
                         else
                         {
                         return false;
                         }

                     }        
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:50:36.577

关键字**return**将导致函数退出，因此return 之后的任何代码只有在return 受到某种形式的条件保护时才会运行（例如if (x)）。

没有你的 html 也很难知道发生了什么，但我会指出你的变量 'c' 被设置为 ["enterGuest"]["guestNum"] 的值而不是电话号码（除非你不小心复制它）。另外，使用**null**而不是**Null**（不是它没有大写）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T21:01:14.123

`N`在你的方法中一切看起来都很好，除了你必须有一个小写：http `null`: [//jsfiddle.net/nivas/XWLXn](http://jsfiddle.net/nivas/XWLXn)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T21:15:04.633

您还可以使用 if/else 语句来避免在 javascript 中使用太多返回。

```
function validateForm() {
    var thisName = document.forms["enterGuest"]["guestName"].value
    if(thisName == "" || thisName === null) {
        alert("Guest Name Please")
    } else {
        var thisNum = document.forms["enterGuest"]["guestNum"].value
        if(thisNum == "" || thisNum === null) {
            alert("This Guest Cannot Receive A Call.")
        } else {
            thisNum.replace(/[^0-9]/g, '')
            if(thisNum.length != 10) {
                alert("10 Digits Please.")
            } else {
                var checkThis = confirm("Please Confirm The Phone Number Is Correct.")
                if(checkThis == true) {
                    return true
                } else {
                    return false
                }
            }
        }
    }
    return false
} 
```

以 Nivas 的小提琴为基础，此处为示例 --> [http://jsfiddle.net/XWLXn/1/](http://jsfiddle.net/XWLXn/1/)

# spring - Tomcat webapp中的Spring ThreadPoolTask Executor - 不好的做法？

> ID：11872890
> 
> 赞同：8
> 
> 时间：2012-08-08T20:45:28.463
> 
> 标签：spring, tomcat, threadpool

最近在我的项目中，我需要异步执行一些任务。由于我们在 Tomcat 中使用 Spring 运行 webapp，因此 Spring 提供的 ThreadPoolTask​​Executor 是一个解决方案。

然而，架构师提出了一些反对意见，指出在 web 应用程序中生成线程/拥有线程池是**可怕的/禁止的/绝对的邪恶。**

通过在网上和 StackOverflow 上进行一些搜索，我意识到是的，在**Java EE**容器中拥有自己的线程池是一种不好的做法。基本原理是，如果您有自己的线程池，则容器不会意识到它并且无法正确管理资源。当您需要对 webapp 进行一些热部署时，这一点尤其重要。

现在，我们的用例是在 Tomcat 中运行的 Spring webapp。首先，我们可以将 Spring 容器视为轻量级 **Java EE**容器吗？在这种情况下，是 Spring 直接管理线程池生命周期，而不是应用程序本身，不是吗？

其次，热部署论点是否也适用于这种配置？

是的，我知道可以直接在 Tomcat 中声明一个工作池，然后通过 JNDI 将其注入 Spring。但是相比Spring提供的直接ThreadPoolTask​​Executor设施，还是有点麻烦

所以我的最后一个问题是：**建筑师的反对意见与我的情况有关吗？**

感谢您对此主题的建议和想法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-10T21:09:32.927

邪恶有不同的层次，并不是所有的邪恶在每种情况下都算作邪恶。

按需创建线程而不是使用池通常被认为是邪恶的，但这不仅适用于 Java EE，而且适用于几乎任何类型的服务器应用程序。

在 Java EE 中，尤其不允许在 EJB 容器中创建自己的线程。这是因为 Java EE 容器可能会在线程本地存储中不可见地存储上下文数据，如果代码开始在自己的线程中执行，这些数据就会丢失。

然而，Web 容器没有这样的限制，根据规范，拥有线程池或多或少是合法的。这就是为什么人们过去常常从 EAR 中的 Web 模块启动 Quartz，即使只使用 EJB 模块，或者 Web 模块中的代码可以将回调侦听器注册到非托管 JMS 队列，但 EJB 不能做这个。

但是，实际上创建线程（通过池）实际上几乎总是有效，只要您记住，如果您使用例如 EJB，您需要在这些线程中运行的代码中从 JNDI 获取实例并且不传递 EJB 的引用到那些非托管线程。当然，您确实需要注意关闭池，但几乎 Java EE 中的每种启动侦听器都有相应的关闭侦听器，您可以在其中执行此操作。

Java EE 确实有一些官方方法可以减轻创建自己的池的需要：

*   @Asynchronous 注解
*   发送 JMS 消息并在 MDB 中处理它
*   使用`AsyncContext#start()`（这是有限的一般用途，请参阅[What's the purpose of AsyncContext.start(...) in Servlet 3.0?](https://stackoverflow.com/questions/10073392/whats-the-purpose-of-asynccontext-start-in-servlet-3-0)）
*   使用工作管理器 API（这实际上是供 JCA 连接器供应商使用的，因此不会为最终用户简化，请参阅[http://www.adam-bien.com/roller/abien/entry/easy_threading_and_concurrency_in](http://www.adam-bien.com/roller/abien/entry/easy_threading_and_concurrency_in)和[http:/ /connectorz.adam-bien.com](http://connectorz.adam-bien.com)）

然而，一些算法**需要**单独的线程池来防止死锁的可能性。由于没有一个 Java EE 解决方案可以绝对保证工作由不同的线程池完成，因此有时除了创建自己的池之外没有其他可行的方法。

所以在最后一种情况下，将代码打开死锁实际上比创建自己的线程池更邪恶。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T21:07:12.713

恕我直言，在 Java EE 应用程序中拥有自我管理的 TaskExecutors 是不错的做法，如果它被正确隔离的话。将异步任务分离到一个孤立的实例中会引入新的复杂性、新的依赖性并降低性能。

不受管理的架构师参数当然可以为空，因为容器不知道/拥有许多实例（例如静态引用），并且您可以在 @Configuration 类或 spring 配置文件中配置执行程序本身，在至少执行器本身由容器管理。

此外，Spring 本身公开了几种执行调度方法的方法，例如使用 @Scheduled 注释 (http://static.springsource.org/spring/docs/3.0.x/reference/scheduling.html)

热部署依赖取决于您的工作队列是如何配置的，以及您的异步任务处理它们的方式。

# java - 如何在 response.sendRedirect() 之后发送 cookie？

> ID：11872896
> 
> 赞同：5
> 
> 时间：2012-08-08T20:46:02.587
> 
> 标签：java, servlets, redirect, cookies

我将用户重定向到某个 URL，我想用它发送一个 cookie：

```
 Cookie cookie = new Cookie("CADASTROADM", "someValue");
        cookie.setPath("/");
        cookie.setMaxAge(129600); //With it or without, makes no difference.
        URL urlToRedirect = new URL(pageToRedirect);
        cookie.setDomain(urlToRedirect.getHost());//With it or without, makes no difference.
        response.addCookie(cookie);
        response.sendRedirect(pageToRedirect); 
```

但是，当他被重定向到该页面时，cookie 不存在。我不能使用 requestDispatcher.forward() 因为我将用户重定向到一个绝对页面。

可能吗？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T00:44:19.563

Cookie 只能设置/检索与请求发送到的相同域或子域。否则这是一个巨大的安全漏洞。

因此，如果您要重定向到不同的域，那么那里的 cookie 将不可用。如果您明确地将 cookie 域设置为该不同的域，那么它将被完全忽略。如果您没有明确设置 cookie 域（因此它默认为与请求发送到的域相同的域），那么它将仅适用于当前域，而不适用于重定向的域。

您需要根据具体的功能要求寻找替代方法。很难提出一个建议，因为您根本没有告诉任何有关您问题中的具体功能要求的内容。也许您应该只发送一些特定的请求参数？

# tridion - SDL Tridion 2011 在 webfarm 中取消发布问题

> ID：11872898
> 
> 赞同：3
> 
> 时间：2012-08-08T20:46:10.170
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

为了让您快速了解我们的系统——我们的生产 CDA 系统是一个由两个网络服务器 web1 和 web2 组成的网络农场。CMS数据库是由两个数据库节点db1和db2组成的sql集群。发布目标“Live”由两个目标组成——web1 部署程序和 web2 部署程序，它们将内容推送到 web1 和 web2 站点存储库。

最近，我们发现在 Production SDL Tridion 2011 中取消发布内容存在问题。从 SDL Tridion 取消发布多个结构组时，System 没有从其中一个 Web 服务器取消发布内容。但是，它从其他 Web 服务器中删除了内容。反之亦然 - 例如，如果取消发布操作从 web1 中删除内容，则内容在 web2 中保持不变。如果它从 web2 中删除，内容仍保留在 web1 中。我们在此取消发布操作的发布队列中看到的消息是“成功”</p>

你以前遇到过这类问题吗？如果您使用类似的策略将内容推送到 webfarm，您是否可以告诉我？

我们在部署程序日志中没有看到任何特定的错误消息，但是我们确实看到了一些警告，如下所示。

2012-08-08 06:48:59,659 WARN PreCommitPhase - 准备失败：tcm:0-5026-66560 错误：org.hibernate.StaleStateException：批量更新从更新 [0] 返回了意外的行数；实际行数：0；预期：1 2012-08-08 06:48:59,659 WARN PreCommitPhase - 准备失败：tcm:0-5026-66560 错误：org.hibernate.StaleStateException：批量更新从更新 [0] 返回了意外的行数；实际行数：0；预期：1

感谢您在这方面的所有帮助！

谢谢，KK

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-08T21:32:00.397

不支持让两个部署者指向同一个代理数据库。如果您考虑一下，很清楚您的情况发生了什么：

*   您取消发布结构组（或页面，或其他）。创建发布包并将其传输到两个部署者。
*   部署者 A 拿起它并开始删除文件和数据库记录
*   在此过程中，部署者 B 拿起同一个包，并开始删除文件（没问题，因为有 2 个独立的文件系统）和数据库记录。但是这些记录已经被部署者 A 删除了。
*   您会收到与您提交的错误类似的错误。

这个问题至少有三种解决方案：

1.  开始为您的两个 Web 服务器使用共享文件系统。然后，您可以关闭您的部署器之一。
2.  更改两个部署器之一的 cd_storage_conf.xml，并将元数据指向某个虚拟目标（例如，文件系统上不会使用的文件夹）。
3.  为您的两个 Web 服务器设置单独的代理数据库。

每个解决方案都有优点和缺点。您需要自己决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:45:10.747

我在早期的一个项目中也遇到了同样的问题。Quirjin 提供了一个很好的解决方案。

另一种选择是将发布设置为仅针对单个文件系统“A”，并使用诸如 robocopy 之类的工具将“A”的内容复制到其他文件系统“B”。

# c# - C# HTML Agility Pack（非/错误）迭代节点集合

> ID：11872901
> 
> 赞同：4
> 
> 时间：2012-08-08T20:46:15.823
> 
> 标签：c#, collections, foreach, html-agility-pack

我使用 HTML Agility Pack 从 w 网页获取 URL。网址是：

[http://goo.gl/DqfQl](http://goo.gl/DqfQl)

如果我使用下面的代码，我会得到我想要的链接：

```
String html = getHtml("http://goo.gl/DqfQl");

HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();

doc.LoadHtml(html);

HtmlNodeCollection address_rows = doc.DocumentNode.SelectNodes("//div[@class='name']/a"); 

foreach (HtmlNode row in address_rows)
{
    MessageBox.Show(row.GetAttributeValue("href",LINK_NOT_FOUND));
} 
```

但是，当我更改`HtmlNodeCollection`以获取包含`div`的内容`class="row'`并希望获取 URL 时，我总是得到第一个 URL。

```
HtmlNodeCollection address_rows = doc.DocumentNode.SelectNodes("//div[@class='row']"); 

foreach (HtmlNode element in address_rows) {
    MessageBox.Show(element.SelectSingleNode("//div[@class='name']/a").GetAttributeValue("href",LINK_NOT_FOUND));
} 
```

我用这段代码玩了一会儿，有一段时间我以为我工作了。但现在我无法使用第二个代码片段选择我想要的所有 URL。你能帮我吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-08T20:50:32.510

您必须添加一个点“。” 到 XPath，否则它将从 Document 的开头匹配，而不是在节点内部。

只需将您的第二个字符串更改为`".//div[@class='name']/a"`它应该可以工作

# ruby - 将数据写入文件的最有效方法

> ID：11872906
> 
> 赞同：6
> 
> 时间：2012-08-08T20:46:40.553
> 
> 标签：ruby, io

我想将 2TB 数据写入一个文件，将来可能是 PB。

数据由所有`'1'`. 例如，2TB 的数据由`"1111111111111......11111"`（每个字节用'1'表示）组成。

以下是我的方式：

```
File.open("data",File::RDWR||File::CREAT) do |file|
  2*1024*1024*1024*1024.times do
  file.write('1')
  end
end 
```

也就是说，`File.write`被称为 2TB 倍。从Ruby的角度来看，有没有更好的方法来实现它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T21:34:02.207

你有几个问题：

1.  `File::RDWR||File::CREAT`总是评估为`File::RDWR`。你的意思是`File::RDWR|File::CREAT`（`|`而不是`||`）。

2.  `2*1024*1024*1024*1024.times do`运行循环 1024 次，然后将循环的结果乘以左边的东西。你的意思是`(2*1024*1024*1024*1024).times do`。

关于您的问题，我通过一次写入 1024 个字节获得了*显着*的加速：

```
File.open("data",File::RDWR|File::CREAT) do |file|
  buf = "1" * 1024
  (2*1024*1024*1024).times do
    file.write(buf)
  end
end 
```

您可能会尝试并找到比 1024 更好的缓冲区大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T00:08:57.217

不知道您使用的是哪个操作系统，但最快的方法是给我们一个系统副本以将文件连接到一个大文件，您可以编写脚本。一个例子。如果您以“1”之类的字符串开头并将其回显到文件中

```
echo "1" > file1 
```

您可以多次将此文件与其自身连接到一个新文件，在 Windows 中，您必须使用参数 /b 进行二进制复制才能做到这一点。

```
copy /b file1+file1 file2 
```

给你一个 12 字节的 file2（包括 CR）

```
copy file2+file2 file1 
```

给你24字节等

我会把数学（以及 Ruby 的乐趣）交给你，但你会足够快地达到你的大小，而且可能比公认的答案更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-10T13:33:19.420

一个相关的答案，如果您想写入任何大小的二进制零，只需使用 dd 命令（Linux/Mac）执行此操作：

```
dd if=/dev/zero of=output_file bs=128K count=8000 
```

bs 是块大小（一次读/写的字节数。count 是块的数量。上面的行在我的机器上仅 10 秒就在 output_file 中写入了 1 GB 的零：

```
1048576000 bytes (1.0 GB) copied, 10.275 s, 102 MB/s 
```

可能对某人有启发！

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-08T21:32:27.010

数据都是1？那么就不用写个了，只写个数。

```
file.write( 2*1024*1024*1024*1024 ) 
```

很简单，是吗？

# php - 是否需要安装特定的邮件程序才能使用 PHP mail() 发送电子邮件？

> ID：11872912
> 
> 赞同：0
> 
> 时间：2012-08-08T20:46:55.277
> 
> 标签：php, email, ubuntu

这个问题可能是多余的，但我试图弄清楚是否有必要在服务器上安装一个单独的邮件服务器（Sendmail、postfix 等）只是为了使用 php 的 mail() 发送一封电子邮件。

我只是想发送一封电子邮件，不需要接收。

我正在运行一个`Ubuntu 12.4`带有`PHP Version 5.3.10-1ubuntu3.2`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:51:08.887

在 Windows 以外的任何平台上，是的，这是必要的。PHP 只是执行 sendmail 或等效的。

Windows 有点不同。PHP 人员可以方便地发送到 Windows 上的 SMTP 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:53:30.993

你可以使用 postfix 的 sendmail。

你可以找到很多帮助你安装它的“howto”。

# java - Jackson 的只写属性

> ID：11872914
> 
> 赞同：12
> 
> 时间：2012-08-08T20:47:03.253
> 
> 标签：java, json, jackson

在我的实体类中，我正在尝试创建一个只写字段（在序列化过程中被忽略，但通常会被反序列化）。

```
@JsonProperty
@JsonSerialize(using=NullSerializer.class)
public String getPassword() {
    return password;
} 
```

这*几乎*给了我想要的东西：JSON 包含“密码”字段，但值始终为空。如何完全删除该字段？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2016-05-09T23:00:10.223

您可以设置`access`值：

```
@JsonProperty(access = JsonProperty.Access.WRITE_ONLY)
private String password; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-08T20:49:49.640

[`@JsonIgnore`](http://jackson.codehaus.org/1.9.9/javadoc/org/codehaus/jackson/annotate/JsonIgnore.html)仅在*getter* 上使用`getPassword`，而不是使用`NullSerializer`. 然后也在*setter*`@JsonProperty("password")`上使用。

 *这应该允许`password`反序列化，但序列化的 JSON 输出不会包含它。

> 例如，一个“getter”方法将被忽略，除非另一个注释定义了替代方法来使用.*

# css - CSS 导航菜单栏：突出但页面友好的颜色

> ID：11872915
> 
> 赞同：-1
> 
> 时间：2012-08-08T20:47:03.647
> 
> 标签：css, menu

我目前正在尝试在我的网页中实现导航菜单栏。[我在这个站点](http://demos.devgrow.com/dark-nav-buttons/)找到了一个很棒的。我目前遇到的问题是调整菜单栏颜色以与我页面中的这些颜色友好。我想要一些突出的东西，但会与我的页面相配。有人可以帮助我将页面中的友好颜色调整到此菜单栏吗？这是我页面的[示例站点](http://google.com)

我尝试将其与灰色一起使用，但结果非常难看：

![在此处输入图像描述](../Images/46975783e8a80e987be15f204687996e.png)

**开发成长.css**

```
<style>
#contentNav { padding: 40px 20px; font-family: "Helvetica Neue", Helvetica, Arial; font-size: 12px; line-height: 18px; color: #cfdae3; }
    a { text-decoration: none; }

    /* Dark Button CSS */
    .buttonNav {
        outline: 0;
        padding: 5px 12px;
        display: block;
        color: #9fa8b0;
        font-weight: bold;
        text-shadow: 1px 1px #1f272b;
        border: 1px solid #1c252b;
        border-radius: 3px;
        -moz-border-radius: 3px;
        -webkit-border-radius: 3px;
        background: #232B30; /* old browsers */
        background: -moz-linear-gradient(top, #3D4850 3%, #313d45 4%, #232B30 100%); /* firefox */
        background: -webkit-gradient(linear, left top, left bottom, color-stop(3%,#3D4850), color-stop(4%,#313d45), color-stop(100%,#232B30)); /* webkit */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#3D4850', endColorstr='#232B30',GradientType=0 ); /* ie */
        box-shadow: 1px 1px 1px rgba(0,0,0,0.2); /* CSS3 */
        -moz-box-shadow: 1px 1px 1px rgba(0,0,0,0.2); /* Firefox */
        -webkit-box-shadow: 1px 1px 1px rgba(0,0,0,0.2); /* Safari, Chrome */
    }
    .buttonNav:hover {
        color: #fff;
        background: #4C5A64; /* old browsers */
        background: -moz-linear-gradient(top, #4C5A64 3%, #404F5A 4%, #2E3940 100%); /* firefox */
        background: -webkit-gradient(linear, left top, left bottom, color-stop(3%,#4C5A64), color-stop(4%,#404F5A), color-stop(100%,#2E3940)); /* webkit */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#4C5A64', endColorstr='#2E3940',GradientType=0 ); /* ie */
    }
    .buttonNav:active {
        background-position: 0 top;
        position: relative;
        top: 1px;
        color: #fff;
        padding: 6px 12px 4px;
        background: #20282D; /* old browsers */
        background: -moz-linear-gradient(top, #20282D 3%, #252E34 51%, #222A30 100%); /* firefox */
        background: -webkit-gradient(linear, left top, left bottom, color-stop(3%,#20282D), color-stop(51%,#252E34), color-stop(100%,#222A30)); /* webkit */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#20282D', endColorstr='#222A30',GradientType=0 ); /* ie */
        -moz-box-shadow: 1px 1px 1px rgba(255,255,255,0.1); /* Firefox */
        -webkit-box-shadow: 1px 1px 1px rgba(255,255,255,0.1); /* Safari, Chrome */
        box-shadow: 1px 1px 1px rgba(255,255,255,0.1); /* CSS3 */
    }

    /* Other stuff: */
    .button-list { list-style: none; padding: 0; margin: 0; width: 100%; float: left; display: block; margin: 0 0 30px; }
    .button-list li { float: left; margin: 0 10px 0 0; }
    .button-list li.search { border-left: 1px solid #273137; padding-left: 18px; margin-left: 10px; position: relative; }

    /* Search CSS: */
    .search-input {
        padding: 0 5px 0 22px;
        border: 2px solid #DADADA;
        height: 30px;
        font-size: 12px;
        line-height: 30px;
        border-radius: 25px;
        -moz-border-radius: 25px;
        -webkit-border-radius: 25px;
        background: #FFF; /* old browsers */

    }
    .search-input:focus {outline: none;}
    .search-submit {
        width: 13px;
        height: 13px;
        border: none;
        background: url(mag-glass.png) no-repeat;
        display: block;
        position: absolute;
        left: 26px;
        top: 10px;
        text-indent: -9999em;
    }

</style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T21:32:33.063

嘿，我的朋友和其他人一样在[http://kuler.adobe.com/](http://kuler.adobe.com/)上提到了使用一个很棒的工具。就像@sellmeadog 说的那样，对你的页面进行截图，然后继续使用你的颜色，以便菜单栏与你的页面匹配。如果你想让菜单栏变灰，你可以选择很多色调。如果您遇到问题，请告诉我们。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:56:14.207

您应该阅读网站的颜色模式。网上有很多攻略，google一下就行了。这是一个比大多数 Web 开发人员意识到的更重要的设计方面。

[http://kuler.adobe.com/](http://kuler.adobe.com/)

您可能会发现这很有帮助，还有其他类似的服务可用。

# javascript - 检查 JS 是否可以访问 iframe 的文档

> ID：11872917
> 
> 赞同：14
> 
> 时间：2012-08-08T20:47:10.717
> 
> 标签：javascript, jquery, iframe, same-origin-policy

有什么标准方法可以知道我的脚本是否可以访问`iframe`的文档？

我在网上找不到任何东西，所以我想出了这个：

```
function checkifr() {
    function errHandler() {
        alert('Error. Try again later.');
    }
    var ifr = $('#ifr')[0]; //the iframe DOM element

    try {
        var d = ifr.contentWindow || ifr.contentDocument;
        if (!d) {
            errHandler();
            return false;
        }

        var b = $('#ifr').contents().find('body');
        //... manipulate iframe content

    } catch(e) {
        errHandler();
    }
} 
```

`iframe`它有效，当我尝试访问' 的内容并最终进入`catch`块时，Firefox 会引发错误。Chrome 在控制台中显示`Unsafe JavaScript attempt to access frame`警告但从未进入该`catch`块，它似乎会返回`null`这些尝试，因此初始`if (!d)`会处理它。Opera 和 IE 的行为与 FF 类似。**编辑：**使用上面的代码，现在 Chrome 返回一个“空”窗口对象（没有属性），它不会触发我的`if`块。检查[Esailija](https://stackoverflow.com/a/11873391/1331430)的答案，它可以很好地跨浏览器！

这是[**小提琴**](http://jsfiddle.net/ult_combo/LHjwZ/6/)。

我**无法**测试`iframe`'s`src`与`window.location`.

> **说明背景：**这是因为这个功能是我正在开发的一个小图像上传插件的一部分（使用`iframe`as 目标，因为 IE<9 不支持 XHR2），目标主要是验证连接错误/超时/等。这些错误的默认浏览器页面受同源策略的约束，因此是这个问题的目的。我不想发送 ajax 调用来检查页面是否可用，因为我想验证提交请求本身。jQuery 的[.load](https://stackoverflow.com/q/375710/1331430)处理程序不会因错误而触发，jQuery 的[.error](https://stackoverflow.com/a/6867890/1331430)和`onerror`HTML 属性对此不起作用。[此处](http://jsfiddle.net/ult_combo/XqVtG/2/)提供了工作脚本的说明，但您可以完全忽略它并简单地回答以下问题。

请注意，上面的块仅用于说明为什么我不能使用`iframe.src`.

我确实认为应该有一种更简单/标准的方法来检查 an的“可访问性”，但是除了简单地检查并且不适用于许多情况`iframe`的半解决方案之外，我在网络上也找不到任何东西。`iframe.src`如果我的 hackish `try`/`catch`块被认为是技术上“干净”的解决方案，如果没有找到更好的选择，其他人可能会重新使用它。

那么是否有任何标准或更简单的方法或 jQuery 插件来检查我的脚本是否可以访问`iframe`' 的文档而无需将`iframe`'`src`与' 进行比较`window.location`？如果可能，在控制台中没有`try`/`catch`块和错误/警告。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-08T21:23:46.593

这是另一种选择，如果没有 try catch 就无法真正做到。

测试[http://jsfiddle.net/LHjwZ/11/](http://jsfiddle.net/LHjwZ/11/)

```
function checkIframe( ifr ) {
    var key = ( +new Date ) + "" + Math.random();

    try {
        var global = ifr.contentWindow;
        global[key] = "asd";
        return global[key] === "asd";
    }
    catch( e ) {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:15:56.047

无论访问是否引发异常，这里都有一个想法：

```
function checkFrameAccess(ifr) {
    try {
        var doc = ifr.contentDocument || ifr.contentWindow.document;
        var origClass = doc.body.className;
        var newClass = origClass += " xxxxx";
        doc.body.className = newClass;
        var valid = doc.body.className == newClass;
        doc.body.className = origClass;
        return(valid);
    } catch(e) {
        return(false);
    }
} 
```

如果他们抛出异常，您最终会进入异常处理程序并返回`false`。如果他们没有抛出异常，那么你测试你是否真的可以修改框架中body标签的className。如果修改有效，那么显然，您可以修改它。如果没有，那么它不会让你访问它。

# jsf - JSF 单页应用程序 gui 流

> ID：11872919
> 
> 赞同：2
> 
> 时间：2012-08-08T20:47:14.303
> 
> 标签：jsf, workflow, cdi, state, activiti

我目前正在 JSF 2（Primefaces、CDI EJB 和 JPA）中开发单页应用程序。应用程序（页面）在幕后有一些复杂的工作流程。

例如，如果用户输入某种数据，则必须出现一个对话框，该对话框首先要求确认，然后根据答案执行某种工作流。在工作流内部，也可以根据插入的数据或某些数据库值弹出一些其他对话框。

我的问题：

是否有任何最佳实践来实现这样的工作流引擎。（刚看了GoV模式状态机和activiti项目）

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:39:38.260

您可以根据您的条件使用视图名称作为操作方法的返回值，以便 JSF 将呈现与您的返回值名称匹配的视图。

可以使用 java 代码或在 faces-config.xml 中声明您的流程来处理您的工作流程

对于 java 示例：（动态导航）

```
public String yourActionMethod(){
   if(condition1){
       return "view1";
   }else if(condition2){
       return "view2";
   }else if(conditionN){
       return "viewN";
   }
} 
```

对于 XML 示例：（静态导航）

```
<navigation-rule>
   <from-view-id>/index.xhtml</from-view-id>
   <navigation-case>
      <from-outcome>success</from-outcome>
      <to-view-id>/welcome.xhtml</to-view-id>
   </navigation-case>
   <navigation-case>
      <from-outcome>failure</from-outcome>
      <to-view-id>/failed.xhtml</to-view-id>
   </navigation-case> 
</navigation-rule> 
```

对于您的用例，动态导航（使用 java 代码）很好。

如果要根据服务器端条件显示对话框，可以这样使用：

```
public void doSomething(ActionEvent actionEvent) {
    RequestContext context = RequestContext.getCurrentInstance();
    context.execute("dialogVar.show()");
} 
```

如果您的用例更复杂并且您有复杂的工作流程，请尝试使用 Activiti 并从中获取输出作为您的 ViewId，然后在您的操作方法中返回，以便 JSF 将呈现它们。

您还可以编写自己的状态机并获取它的输出并将其作为 ViewId 在您的操作方法中返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:35:06.853

我相信这篇博文与您想做的事情有关，它可能会有所帮助：

“Page-Flow 与 Process-Flow - UI 调解器如何提供帮助” [http://www.bpm-guide.de/2012/04/04/pageflow-vs-process-flow-and-ui-mediator-pattern /](http://www.bpm-guide.de/2012/04/04/pageflow-vs-process-flow-and-ui-mediator-pattern/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T13:36:57.647

JSF 2.2 将提供一种称为 Faces Flows 的流作用域机制

适合我的需要感谢您的帮助

# cakephp - 通配符 DNS？重定向？别名记录？.ht 访问？

> ID：11872921
> 
> 赞同：0
> 
> 时间：2012-08-08T20:47:22.603
> 
> 标签：cakephp, dns, subdomain

我一直在阅读以前的帖子，但我无法弄清楚我的设置会起作用或不起作用，因此非常感谢这里的任何帮助！

对于初学者，我使用的是最新版本的 CakePHP (2.2)。我托管在带有 MediaTemple 的 (gs) 帐户上。

我有一个网站，用户可以在 domain.com 上注册一个帐户。

用户可以在dashboard.domain.com 访问和更改他们的信息。

用户可以在sites.domain.com/username 上查看他们的个人信息。用户可以通过从数据库中选择一个主题来改变这个页面的外观，为此，我使用的是 CakePHP 的主题结构。有一个带有多个 css 选项的基本布局，因此所有内容都从数据库中提取到这个文件中，并且根据他们选择的“主题”，提取不同的 css 文件。这一切都很好。

我更喜欢的是他们从通配符子域（？）中看到他们的页面，即。username.domain.com 而不是 sites.domain.com/username。

我还想为他们提供注册自己的域名的选项，并将其指向/重定向/指向子域，同时仍然在 url 中显示他们的唯一域。我也不想托管额外的域名，所以这可以通过名称服务器来完成吗？

关于我从这里去哪里的任何想法？提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T23:29:23.537

这是一个非常常见的请求，它属于 Web 应用程序开发的“多租户”方法。

我[最近回答了一个](https://stackoverflow.com/questions/9780065/cakephp-subdomain-routing-misc/11822914#11822914)使用这种方法的问题。

# 代码

链接的答案显示了我用来支持 CakePHP 方面的动态子域的 DomainRoute。这包含了从项目的那一点开始处理它所需的所有代码。

那里唯一的应用程序特定代码，您需要更改的代码是`Cause`相关的东西：

```
$Cause = new Cause();
if (!($Cause->domainExists($domain) ... 
```

`Cause`是我的应用程序中的一个模型，它有一个`domainExists`方法。此方法检查传递的是否`$domain`存在于任何`Cause`（或子网站）上。的实现`domainExists`是一个非常简单的`find`调用：

```
public function domainExists($domain) {
    $causes = $this->Cause->findByDomain($domain);
    return !empty($causes);
} 
```

如果域确实存在于数据库中，它会将整个域添加到`$params`变量中。

如果该域在数据库**中不**存在，它会进行一些重定向。

# 域名系统

DNS 应设置为通配符。这样做的方式因提供者而异，但在普通的 BIND 中，它是这样完成的：

```
* CNAME domain.com. 
```

这会将通配符 CNAME 添加到您的 DNS 记录中。

我希望这会有所帮助。之前回答的问题中的代码是最有帮助的，因此请务必先仔细阅读。

# rest - REST 更新多个资源

> ID：11872923
> 
> 赞同：7
> 
> 时间：2012-08-08T20:47:31.073
> 
> 标签：rest

我试过搜索这个，但我还没有找到适合我需要的答案。

考虑到我目前有以下路线：

```
[GET] /items 
```

可以使用查询参数进行过滤。现在我需要赋予它一次添加多个资源的能力。我考虑过执行以下请求：

```
[PATCH] /items 
```

有这样的身体：

```
id[]=1&id[]=2&id[]=3&updateField=newValue 
```

我认为这个电话有问题，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-08T20:58:02.877

在 RESTful API 中，URL 应该定义事务的对象，动词是动作。

所以`GET /items`应该返回所有项目。

`GET /items/1`应该返回 id 为 1 的项目。

因此，多个 id 应该是资源定义 (url) 的一部分。所以 `GET /items/1,2,3`应该返回 3 个适当的项目。

因此，要对许多 id 应用部分更新：

```
[PATCH] /items/1,2,3 
```

然后在 PATCH 或 PUT 的正文中，您可以提供要更新的信息（假设您正在发送 JSON 正文）。

```
{"updateField": "newValue"} 
```

# java - Spring DAO 性能

> ID：11872924
> 
> 赞同：1
> 
> 时间：2012-08-08T20:47:33.600
> 
> 标签：java, performance, spring, jdbc

与普通的旧 JDBC 相比，Spring DAO JdbcTemplate 的性能如何？换句话说，使用 Spring JdbcTemplate 有多少开销？

预先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T20:52:48.810

如果有的话，应该是最小的。Spring DAO 模板促进了良好的编程实践，因此应该在这些优势上使用。鉴于您将跨多个层等使用数据库，性能问题将更多地与 I/O 相关，以及与单个查询等有关的问题。HTH

# angularjs - 为什么输入不修改 ng-repeat（和 ng-switch）之外的值？

> ID：11872927
> 
> 赞同：7
> 
> 时间：2012-08-08T20:47:58.100
> 
> 标签：angularjs

我假设范围问题是此示例中的输入可以修改它旁边的值但不能修改其他值的原因。如果是这种情况，我如何将模型连接到正确的范围？如果这不是范围问题，我做错了什么？

```
<html ng-app>
    <head>
        <script type="text/javascript" src="angular-1.0.1.min.js"></script>
        <script type="text/javascript">
            function ExampleCtrl($scope) {
                $scope.list = [
                    { name: "a" },
                    { name: "b" },
                ];

                $scope.value = 5;
            }
        </script>
    </head>
    <body ng-controller="ExampleCtrl">
        <ul ng-repeat="item in list">
            <li>{{ item.name }}
                <ng-switch on="item.name">
                    <span ng-switch-when="b">
                        <input type="number" ng-model="value" />
                        {{ value }}
                    </span>
                </ng-switch>
            </li>
        </ul>

        value is {{ value }}
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T06:07:48.190

另一种方式 - 您可以使用 $parent 访问父范围。

```
<input type="number" ng-model="$parent.$parent.value" /> 
```

见例子：http: [//jsfiddle.net/7Hh2R/](http://jsfiddle.net/7Hh2R/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T21:10:50.847

你是对的[ngRepeat](http://docs.angularjs.org/api/ng.directive%3angRepeat)和[ngSwitch](http://docs.angularjs.org/api/ng.directive%3angSwitch)创建不同的范围。你可以使用很棒的[AngularJS Batarang](https://github.com/angular/angularjs-batarang)开发者工具来查看不同的作用域。

您可以在代码中引用相同值的一项更改是引用对象属性而不是原始类型，例如：

```
$scope.value = { val: 5 }; 
```

并绑定到：

```
<input type="number" ng-model="value.val"/>
{{ value.val }} 
```

我很想看看是否有更好的方法可以在不同的范围内处理这个问题。

# http - 通过 HTTP 将数据从 JMS 主题流式传输到 HTTP 客户端（不是浏览器）的最佳方法

> ID：11872936
> 
> 赞同：0
> 
> 时间：2012-08-08T20:48:53.283
> 
> 标签：http, rest, servlets, jms, websocket

我有一种情况，我不能让我的客户端使用 JMS 端口/协议（我正在使用 ActiveMQ）连接原生，所以我正在寻找使用 HTTP 端口 80 的替代方案。我想做的是创建一个 servlet它将订阅一个包含 XML 消息的 JMS 主题，然后将它们发布到一个持久的 HTTP 客户端，该客户端将读取流并处理消息。

这是我正在使用的软件包堆栈

*   雄猫 7
*   活动MQ 5.5.1
*   Apache HttpClient

我见过的大多数示例都是通过网络浏览器基于 javascript 的。由于我以编程方式使用 HttpClient 而不是浏览器，因此我不确定正确的方法。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T17:42:27.080

您的应用程序服务器将启用 servlet 侦听没有问题...通常的情况是防火墙阻止通往客户端的方式。您设计的解决方案是一个很好的方法，将经过测试。

# php - 自引用 XML 树创建多层无序列表

> ID：11872937
> 
> 赞同：0
> 
> 时间：2012-08-08T20:48:59.627
> 
> 标签：php, xml, recursion

我的目标是创建具有无限深度树的导航菜单。我可以成功生成前 2 个级别。第一个（顶级）使用未存储在 XML 文件中的 PHP 数组。第二个是从一个平面 xml 文件生成的。主要问题是成功的递归。

这是 XML 结构：

```
<articles>
    <article>
        <menu parent="Insurance" label="Business" target="#" show="true" />
        <data />
        <body />
    </article>
    <article>
        <menu parent="Resources" label="Videos" target="content.php#videos" show="true" />
        <data />
        <body />
    </article>
    <article>
        <menu parent="Business" label="Disability" target="content.php#disability" show="true" />
        <data />
        <body />
    </article>
    <article>
        <menu parent="Business" label="Liability" target="content.php#liability" show="true" />
        <data />
        <body />
    </article>

</articles> 
```

我在目标属性中使用 # 来确定是否需要启动新列表（子菜单）。

我收到的输出正确信息成功的 PHP 代码是：

```
 $objXMLMenu = simplexml_load_file('menu.xml');
    foreach ($mainmenu as $menuparent) {  //Main Array

        echo "<li><a href=\"" .$maintargets[$i]. "\">". $menuparent ."</a>\n";  // Top Menu array. I use 2 for clarity
        if ($maintargets[$i] == "#"){

            //Open the ULs for filling
            echo "\t<ul>\n";

    // Start function here?

            foreach($objXMLMenu->article as $art){

                foreach($art->menu as $menuitem){

                    if($menuitem['parent'] == $menuparent){ //Compare to Main Array

                        if ($menuitem['show'] == "true"){

                            if($menuitem['target'] == "#"){  //A Submenu exits here
                                echo "\t\t<li><a href=\"" . $menuitem['target'] . "\" >" .$menuitem['label'] . "</a></li>\n";
                                echo "\t\t\t<ul>\n";
                                //Run XMLQUERY match? As a 

                                echo "\t\t\t</ul>\n";
                            }else{
                                echo "\t\t<li><a href=\"" . $menuitem['target'] . " \"rel=\"ajax\">" .$menuitem['label'] . "</a></li>\n";
                            }
                        }

                    }
                }

            }
            //Close Middle Menus
            echo "\t</ul>";
        }
        $i++;
        //close Top Level Menu Item
        echo "</li>\n";
    }
//<UL> Footer
echo "\t</ul>\n</div>\n"; 
```

为了使其成为递归函数，我的第一个 foreach 语句收到错误，这表明我应该切换到 DOM 和 XPATH 而不是 simplexml。这是我到目前为止提出的功能：

```
$objXMLMenu = simplexml_load_file('menu.xml');
// Start function here!
function mysubmenu($menuparent){
    foreach($objXMLMenu->article as $art){
        foreach($art->menu as $menuitem){
            if($menuitem['label'] == $menuparent){
            //Compare to Main Array
                if ($menuitem['show'] == "true"){

                    if($menuitem['target'] == "#"){
                        // ((ROOT)
                        //A Submenu exits here
                        $strResponse .= "\t\t<li><a href=\"" . $menuitem['target'] . " \">" .$menuitem['label'] . "</a></li>\n";
                        $strResponse .= "\t\t\t<ul>\n";

                        //xmlpath QUERY instead?
                        mysubmenu($menuitem['parent']);

                        $strResponse .= "\t\t\t</ul>\n";
                    }else{
                        $strResponse .= "\t\t<li><a href=\"" . $menuitem['target'] . " \"rel=\"ajax\">" .$menuitem['label'] . "</a></li>\n";
                    }
                }

            }
        }
        //insert counter to stop foreach loop after all records are posted.
    }
    return $strResponse; 
} //End Function 
```

这种类型的递归对我来说是一个新的界限。我发现的每个示例或解释都涉及到 XML 树对元素的深入研究。“深度”（计数器）属性不是一个选项。因为，随着时间的推移，我在一个真正无限深度的“推迟”项目中面临着类似的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:48:05.920

对程序风格起作用的东西在功能中不起作用。我最麻烦的方面是[比较 SimpleXML 对象](http://www.php.net/manual/kr/language.oop5.object-comparison.php#93968)。大约有 5 行需要更改。尽管对于更长的递归，可能有一种更简单、更快的方法来获得这个答案。但我发现这暂时有效。

```
function mysubmenu($menuparent){
    $objXMLMenu = simplexml_load_file('menu.xml');
    foreach($objXMLMenu->article as $art){
        foreach($art->menu as $menuitem){

            if((string)$menuitem['parent'] == $menuparent){ 
                if ($menuitem['show'] == "true"){
                    if($menuitem['target'] == "#"){
                        echo "\t\t<li><a href=\"" . $menuitem['target'] . "\">" .$menuitem['label'] . "</a></li>\n";
                        echo "\t\t\t<ul>\n";
                        mysubmenu($menuitem['label']);
                        echo "\t\t\t</ul>\n";
                    }else{
                        echo "\t\t<li><a href=\"" . $menuitem['target'] . "\" rel=\"ajax\">" .$menuitem['label'] . "</a></li>\n";
                    }
                }

            }
        }

    }

} //End Function 
```

# java - 单击按钮时无法在我的 JLabel 中显示图像 - Java

> ID：11872944
> 
> 赞同：0
> 
> 时间：2012-08-08T20:49:22.260
> 
> 标签：java, swing, awt

如果可能的话，你能帮我吗？我正在做自己的小“电影”项目，同时尝试学习 Java。

我设法创建了一个 JLabel，当单击按钮时它会显示我的文本，它基本上是关于我最喜欢的电影的。因此，当我单击 Commando 按钮时，会弹出一个简短的概要。所以我决定添加一个图像，它位于我的 Java 包所在的同一文件夹中。

我研究了如何应用我的图像，以便它与文本同时显示，但它似乎不起作用。我还有很多东西要学，任何指导将不胜感激！！

提前感谢您的帮助！！;]

达兹。

```
import java.awt.BorderLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextPane;
import java.awt.event.*;
import javax.swing.ImageIcon;

public class Movies {
    JFrame frame;
    JLabel label;

    public static void main(String []args){
            Movies gui = new Movies();
            gui.go();
    }

    public void go(){
        frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JButton commandoButton = new JButton("Commando");
        commandoButton.addActionListener(new LabelListener());
        frame.setLayout(null); // equivalent to frame.getContentPane().setLayout(null);
        frame.add(commandoButton); // equivalent to frame.getContentPane().add(button);
        commandoButton.setBounds(10, 10, 150, 25);

        JButton predatorButton = new JButton("Predator");
        predatorButton.addActionListener(new LabelListenerA());
        frame.setLayout(null); // equivalent to frame.getContentPane().setLayout(null);
        frame.add(predatorButton); // equivalent to frame.getContentPane().add(button);
        predatorButton.setBounds(10, 40, 150, 25);

        JButton expendablesButton = new JButton("The Expendables");
        expendablesButton.addActionListener(new LabelListenerB());
        frame.setLayout(null); // equivalent to frame.getContentPane().setLayout(null);
        frame.add(expendablesButton); // equivalent to frame.getContentPane().add(button);
        expendablesButton.setBounds(10, 70, 150, 25);

        frame.getContentPane().add(BorderLayout.WEST, commandoButton);
        frame.setSize(1000, 350);
        frame.setVisible(true);
    }

    JTextPane labelCommando = new JTextPane();
    class LabelListener implements ActionListener {
        public void actionPerformed(ActionEvent commandoButton){            
            labelCommando.setText("A retired elite Black Ops Commando launches a one man war against a group of South American criminals who have kidnapped his daughter to blackmail him into starting a revolution and getting an exiled dictator back into power. ");
            frame.add(labelCommando);
            labelCommando.setBounds(170, 10, 500, 200);
            labelCommando.setOpaque(false);
            String imgStr = "images/commando.jpg";
            ImageIcon image = new ImageIcon("commando.jpg");
            JLabel labelCommando = new JLabel(" ", image, JLabel.CENTER);
            label.setIcon(image);
        }
    } // Close inner class

    class LabelListenerA implements ActionListener {
        public void actionPerformed(ActionEvent predatorButton){            
            labelCommando.setText("Not long after they land, Dutch and his team discover    that they have been sent under false pretenses. This deception turns out to be the least of their worries though, when they find themselves being methodically hunted by something not of this world...");
            frame.add(labelCommando);
            labelCommando.setBounds(170, 10, 500, 200);
            labelCommando.setOpaque(false);
        }
    } // Close inner class

    class LabelListenerB implements ActionListener {
        public void actionPerformed(ActionEvent expendablesButton){

            labelCommando.setText("Barney Ross leads the 'Expendables', a band of highly  skilled mercenaries including knife enthusiast Lee Christmas, martial arts expert Yin Yang, heavy weapons specialist Hale Caesar, demolitionist Toll Road and loose-cannon sniper Gunner Jensen. When the group is commissioned by the mysterious Mr. Church to assassinate the merciless dictator of a small South American island, Barney and Lee head to the remote locale to scout out their opposition. Once there, they meet with local rebel Sandra and discover the true nature of the conflict engulfing the city. When they escape the island and Sandra stays behind, Ross must choose to either walk away and save his own life - or attempt a suicidle rescue mission that might just save his soul.");
            frame.add(labelCommando);
            labelCommando.setBounds(170, 10, 500, 200);
            labelCommando.setOpaque(false);
        }
    } // Close inner class
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:09:26.640

我已经扫描了您的代码，找不到您正在创建（或添加）的任何地方`label`，现在假设您在运行程序时没有收到任何错误，这表明代码片段不完整。

确保`label`已创建并添加到屏幕的某个位置。

调用`invalidate`and`repaint`可能也会有所帮助，但如果没有有效的代码示例，就很难确定。

我不知道为什么人们坚持使用空布局管理器，但我建议首先使用布局管理器进行测试，这至少消除了组件没有正确布局的怀疑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:00:30.423

我见过的两个问题：

1.  您正在使用 label.setIcon(image)，但您没有为标签设置值
2.  图像应该是 new ImageIcon(imgStr) 而不是 new ImageIcon("commando.jpg)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T21:05:58.067

*   `JLabel label;`未初始化必须`JLabel label = new JLabel();`

*   `JLabel`未添加到容器中，则 GUI 中不显示任何代码

*   使用[标准 LayoutManager](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)而不是`setBounds()`

*   将[JScrollPane](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)用于[JTextArea](http://docs.oracle.com/javase/tutorial/uiswing/components/textarea.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T00:11:44.093

> ..它位于我的 Java 包所在的同一文件夹中。

这个简单的陈述表明了许多可能是问题根源的误解。

1.  类文件不一定与源文件位于同一目录中。
2.  类文件现在可能`ZipEntry`在 Jar 中。
3.  “文件夹”是一个非常基于屏幕的概念，最好将磁盘上的目录视为“目录”（并将 zip 条目视为 zip 条目）。
4.  不要根据目录或 zip 条目来考虑包。它可能变得相关，但又是另一回事。

如何访问图像归结为一个重要问题。图像是应用程序资源吗？

如果应用程序。适用于除您之外的任何人，它们应该作为“嵌入式应用程序资源”包含在 Jar 中以便于分发。这些由 访问`URL`。

如果应用程序。仅供您使用，包含图像的目录的硬编码路径就足够了。通过将`String`参数传递给`ImageIcon`构造函数，我们表明我们想要一个`File`基于该路径的路径，但“相对路径”很少起作用（除非开发人员特别努力确保图像在相对于 ..current 目录的路径上可用）。相反，最好硬编码包含图像的目录的绝对路径，然后在运行时添加图像文件名。

* * *

代码中还有许多其他错误，这些错误大多已在其他答案中得到解决，但又一次。 ***使用布局来管理组件的大小和定位。***

它似乎`JTable`也`JList`比一堆按钮更好。

# c++ - 控制台应用程序不会立即关闭

> ID：11872949
> 
> 赞同：0
> 
> 时间：2012-08-08T20:49:39.293
> 
> 标签：c++, compiler-construction, ide, console, dev-c++

我决定再花一些时间，`C++`这就是为什么我`Dev-C++`今天下载了以最新版本命名的 IDE。

从`C++`几年前的学习中，我记得`main()`函数退出后控制台窗口会立即关闭。

```
int main() {} 
```

但是上面的代码行并没有让控制台窗口只闪烁和消失。而不是这种行为 - 我实际上预期 - 控制台窗口出现并向我显示以下消息。

```
Process exited normally.
Press any key to continue . . . 
```

过去几年有没有我没有注意到的变化？我不记得IDE做了这些奇怪的事情，更不用说我可以相信`GCC`编译器改变了这种方式！

我的控制台应用程序发生了什么，如何防止罪魁祸首这样做？！

更新：为了清楚起见，这种行为可能是所谓的功能。但我不想使用此功能，因为我的应用程序用于设置文件夹结构而不显示任何输出。顺便说一下，我的操作系统是 Windows 7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:52:32.677

这与编译器或工具链无关，而是 IDE 如何创建控制台/终端。实际上，我发现最好让窗口保持打开状态（以防有任何我想验证的输出）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:52:10.400

这可能只是 IDE 行为。我怀疑编译器会在程序末尾插入暂停。IDE 只是让您在关闭窗口之前查看输出。

# c - SIMD 以下代码

> ID：11872952
> 
> 赞同：14
> 
> 时间：2012-08-08T20:50:23.053
> 
> 标签：c, x86, sse, simd

如何在 C 中 SIMIDize 以下代码（当然使用 SIMD 内在函数）？我无法理解 SIMD 内在函数，这将有很大帮助：

```
int sum_naive( int n, int *a )
{
    int sum = 0;
    for( int i = 0; i < n; i++ )
        sum += a[i];
    return sum;
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-09T06:23:51.393

这是一个相当简单的实现（警告：未经测试的代码）：

```
int32_t sum_array(const int32_t a[], const int n)
{
    __m128i vsum = _mm_set1_epi32(0);       // initialise vector of four partial 32 bit sums
    int32_t sum;
    int i;

    for (i = 0; i < n; i += 4)
    {
        __m128i v = _mm_load_si128(&a[i]);  // load vector of 4 x 32 bit values
        vsum = _mm_add_epi32(vsum, v);      // accumulate to 32 bit partial sum vector
    }
    // horizontal add of four 32 bit partial sums and return result
    vsum = _mm_add_epi32(vsum, _mm_srli_si128(vsum, 8));
    vsum = _mm_add_epi32(vsum, _mm_srli_si128(vsum, 4));
    sum = _mm_cvtsi128_si32(vsum);
    return sum;
} 
```

请注意，输入数组`a[]`需要 16 字节对齐，并且`n`应该是 4 的倍数。

# database - VB.NET 2010 - 从访问数据库中的多列填充组合框

> ID：11872958
> 
> 赞同：1
> 
> 时间：2012-08-08T20:50:32.507
> 
> 标签：database, vb.net, combobox

我最近回答了一个关于如何从访问数据库中填充组合框的问题，但是我的最新问题对我来说有点棘手。

我需要从表中的两列填充我的下一个组合框，即：

原因代码 - 原因

所以我希望我的组合框如下所示 -

A - 账户

S - 销售

ST - 系统整洁

但是，原因代码和原因描述存储在我的数据库中的两个单独的列中，它们不能连接在一起。这在 VB.Net 中是否可以将多列拉入一个组合框中？

我当前填充框的代码（由 LarsTech 提供）

```
Protected Overrides Sub OnLoad(e As EventArgs)
    Dim ds1 As New DataSet()
    Dim ConnnectionString1 As String = "PROVIDER=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Users\Admin\Desktop\CancellationsAndMovements\CancellationsandMovements\cancmov.mdb"

    Dim db1 As String = "SELECT reasoncode FROM Reason"

    Using cn1 As New OleDbConnection(ConnnectionString1)
        Using da As New OleDbDataAdapter(db1, cn1)
            da.Fill(ds1, "reasoncode")
        End Using
    End Using

    With drpMoveReason
        .DisplayMember = "reasoncode"
        .DataSource = ds1.Tables("reasoncode")
        .SelectedIndex = 0
    End With

    MyBase.OnLoad(e)

End Sub 
```

我要拉的额外列称为“reasondesc”

如果可以以这种方式填写任何帮助，将不胜感激，也将不胜感激在我写回不同数据库时如何仅写回原因代码的帮助。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T23:58:44.610

您可以按照 David Osborne 的建议从数据库中获取信息时执行此操作，或者您可以创建一个临时数据表，其中包含一个 ID 列（您的原因代码）和连接的字符串作为显示列（将其命名为描述或其他）。设置好临时表列后，您只需要循环浏览从数据库中获取的所有记录，然后手动将行添加到表中。

无论哪种情况，您都希望将`.ValueMember`组合框上的 设置为表中的原因代码列，并将 设置`.DisplayMember`为串联的原因代码和描述。然后，当您想保存回数据库时，只需`.SelectedValue`从组合框中获取它，它将是当前选择的原因代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:59:02.507

这里有几个选项。为什么不尝试在查询中连接两者：select reasoncode & "-" & reasondesc from...

您可以通过以下方式进一步开发它：选择原因代码，原因代码+“-”+reasondesc作为描述来自...

然后使用reasoncode作为valuemember，启用回写到table，description作为displaymember。

# javascript - 对象在 Google Chrome 中没有“焦点”方法

> ID：11872964
> 
> 赞同：2
> 
> 时间：2012-08-08T20:50:56.470
> 
> 标签：javascript, jquery, google-chrome, onfocus

我在 HTML 页面中输入：

```
<input id="Name" name="Name" tabindex="0" type="text" value="Name:" /> 
```

我用 jQuery 编写了 javascript 来绑定事件“onfocus”和“onblur”的处理程序：

```
<script type="text/javascript">
    var name = $("#Name");
    name.focus(function () {if ($(this).val() == "Name:") $(this).val('');});
    name.blur(function () {if ($(this).val() == "") $(this).val("Name:");});
</script> 
```

因此，当用户选择输入时，它的值应该为空。如果用户未在输入中输入文本并更改焦点，则输入的值将返回为“名称：”。

它在 Firefox、Internet Explorer 和 Opera 中运行良好，但在 Google Chrome 中无法运行。此外，chrome调试器中存在错误：“Uncaught TypeError: Object [object Object] has no method 'focus'”。

如何在 Google Chrome 中将处理程序与 jQuery 绑定？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T21:13:10.470

在这种情况下，Chrome 不喜欢将您的变量命名为“name”。以下作品

```
<script type="text/javascript"> 
    var name2 = $("#Name"); 
    name2.focus(function () {if ($(this).val() == "Name:") $(this).val('');}); 
    name2.blur(function () {if ($(this).val() == "") $(this).val("Name:");}); 
</script> 
```

# c++ - STL 容器使用的内存归零

> ID：11872965
> 
> 赞同：13
> 
> 时间：2012-08-08T20:50:58.467
> 
> 标签：c++

我想使用 STL 容器（加号`std::basic_string`）将密钥或密码临时存储在内存中，并且我想在完成后将内存归零。

我最初计划使用在自定义分配器上参数化的 STL 容器，该分配器将内存归零`allocator::deallocate`，但我假设容器被允许使用不是来自指定分配器的内存。例如，a`std::vector`或 a`std::string`包含一个用于小分配的固定大小的数组成员似乎是合理的。

我是否正确地担心，我应该（叹息）编写自己的容器吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T21:01:20.303

我会使用`std::vector`一个自定义分配器来进行归零。根据[May std::vector 的答案，使用小缓冲区优化？](https://stackoverflow.com/questions/8190950/may-stdvector-make-use-of-small-buffer-optimization)，它不能使用小缓冲区优化，因此，使用自定义分配器，你应该是安全的。

如果您更进一步，并使用该分配器来分配向量，然后使用智能指针来确保它正确释放（或手动执行），即使是向量的内部内容（例如大小）也将是歼灭。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T21:05:36.737

您可以通过使用原始内存和放置 new 分配字符串/向量来做到这一点，当您完成它时，调用析构函数、零内存并释放原始内存。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-08T21:36:04.063

使用自定义字符串类，将其析构函数中的内存缓冲区归零。

```
class zeroed_string : public std::string
{
public:
    ~zeroed_string()
    {
        for (int i = 0; i < size(); ++i)
            (*this)[i] = 0;
    }
// ...
}; 
```

# objective-c - 在 Objective-C 中使用自定义 DNS 服务器进行 DNS 查找

> ID：11872967
> 
> 赞同：3
> 
> 时间：2012-08-08T20:50:59.260
> 
> 标签：objective-c, macos, dns, nslookup, nshost

从 Mac OS X 应用程序中，我想使用特定的 DNS 服务器（尚未在系统偏好设置中设置）解析一些域名，并轻松检索解析的地址。

我可以在终端中做到这一点，`nslookup google.com DNS_SERVER`但在 Objective-C 中找不到简单的方法来完成它。我虽然`NSHost`有类似的方法来指定要解析的 DNS 服务器，但不幸的是它没有。

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:07:32.790

一般来说，在我使用的包括 OSX 在内的平台上，用于进行主机查找的 OS 内置函数不允许绕过系统 DNS 配置。如果您真的想这样做，您要么需要尝试破解操作系统设置（不幸的是，就像某些 Windows 应用程序那样），要么使用套接字和您自己的 DNS 框架代码直接连接到 DNS 服务器。

我不能肯定地说，但我很确定 OSX 也是如此。

# c# - 文件流读/写

> ID：11872972
> 
> 赞同：2
> 
> 时间：2012-08-08T20:51:33.393
> 
> 标签：c#, visual-studio-2010, file-io, stream

好的，所以我正在编写另一个程序来操作二进制文件。这个程序正在导入一个比我之前必须操作的文件更大的文件，大约 12K。

我很好奇 Stream.read 命令是如何工作的......我知道这听起来很简单，但是我怎么知道文件已经被完全读取，以便我可以开始操作它，到目前为止我有这段代码...

```
// Opens a stream to the path chosen in the open file dialog
using (FileStream stream = new FileStream(chosenFile, FileMode.Open, FileAccess.Read))                     
{
    size = (int)stream.Length; // Returns the length of the file
    data = new byte[size]; // Initializes and array in which to store the file
    stream.Read(data, 0, size); // Begins to read from the constructed stream
    progressBar1.Maximum = size;

    while (byteCounter < size)
    {
        int i = data[byteCounter];

        byteCounter++;
        progressBar1.Increment(1);
    } 
} 
```

我知道这非常简单，但是有人可以向我解释 stream.Read 是如何工作的，它是否将所有内容都存储到字节数组“数据”中，然后我可以按照我认为合适的方式进行操作，或者我是否必须操作正在读取的文件。如果这是基本的，我再次道歉，感谢所有想法

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T20:54:45.487

这条线

```
stream.Read(data, 0, size); 
```

从流中读取所有内容并将文件内容存储在字节数组中
您可以立即开始在数组上工作。

请参阅MSDN 上的[FileStream.Read](http://msdn.microsoft.com/en-us/library/system.io.filestream.read.aspx)文档

您的代码读取文件的长度，分配正确大小的字节数组，然后一次性读取所有内容。
当然，如果您的文件很大，这种方法是不可行的。
（与可用内存相比，“大”的定义可能不同）。在这种情况下，使用的方法是读取文件的块，处理和循环直到读取所有字节。

但是，DotNet 有专门的类用于读取和写入二进制文件。
请参阅[BinaryReader上的文档](http://msdn.microsoft.com/en-us/library/system.io.binaryreader.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T21:14:27.430

这并不能完全回答您*关于 Stream.Read 如何工作*的问题，但确实说明了您想要的内容已经存在于 .Net 中的事实。

[File.ReadAllBytes](http://msdn.microsoft.com/en-us/library/system.io.file.readallbytes.aspx)对于 12K 文件可以正常工作。

```
byte[] content = File.ReadAllBytes("path"); 
```

# java - 如果 web.xml 中有两个匹配请求的 servlet 映射会发生什么？

> ID：11872973
> 
> 赞同：16
> 
> 时间：2012-08-08T20:51:48.120
> 
> 标签：java, web-applications, servlets

如果 web.xml 中有两个匹配请求的 servlet 映射会发生什么？它选择最具体的吗？

例如，如果我有以下 xml 并且请求来到 ..../something 而它转到 somethingservlet 或 Everything_else servlet？

```
 <servlet-mapping>
      <servlet-name>something</servlet-name>
      <url-pattern>/something</url-pattern>
  </servlet-mapping>    

  <servlet-mapping>
    <servlet-name>everything_else</servlet-name>
    <url-pattern>/*</url-pattern>
  </servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-08T20:55:38.310

将使用第一个成功的匹配。

servlet 容器遵循一定的映射规则。阅读 Servlet 2.5 规范章节 SRV.11：

> 用于映射到 servlet 的路径是来自请求对象的请求 URL 减去上下文路径和路径参数。下面的 URL 路径映射规则按顺序使用。使用第一个成功的匹配，不再尝试匹配：
> 
> 1.  容器将尝试找到请求路径与 servlet 路径的完全匹配。成功的匹配选择 servlet。
> 2.  容器将递归地尝试匹配最长的路径前缀。这是通过使用“/”字符作为路径分隔符一次将路径树下移一个目录来完成的。最长的匹配决定了选择的 servlet。
> 3.  如果 URL 路径中的最后一段包含扩展名（例如 .jsp），则 servlet 容器将尝试匹配处理扩展请求的 servlet。扩展名被定义为最后一个'.'之后的最后一段的一部分。特点。
> 4.  如果前三个规则都没有导致 servlet 匹配，则容器将尝试提供适合所请求资源的内容。如果为应用程序定义了一个“默认”servlet，它将被使用。

# machine-learning - Java 中的 Weka UI 和 API 代码给出了不同的结果

> ID：11872974
> 
> 赞同：2
> 
> 时间：2012-08-08T20:51:49.917
> 
> 标签：machine-learning, weka

我是 Weka 的新手。

我正在尝试使用 API 运行 WEKA，并发现 WEKA GUI 的结果与 Java 代码生成的结果不匹配。

我正在尝试通过提供 TrainingSet 和 Test Set 来运行 RandomForest 算法。

这是代码片段：

```
 DataSource ds = new DataSource(trainingFile);

            Instances insts = ds.getDataSet();

            insts.setClassIndex(insts.numAttributes() - 1);

            Classifier cl = new RandomForest();
            RandomForest rf = (RandomForest)cl;
       //     rf.setOptions(options);
         //   rf.setNumExecutionSlots(1);
            rf.setNumFeatures(5);
            rf.setSeed(1);
            rf.setNumExecutionSlots(1);                  

            Remove remove = new Remove();
            int[] attrs = WekaCustomisation.convertIntegers(attrList);

            remove.setAttributeIndicesArray(attrs);
            remove.setInvertSelection(true);                

            remove.setInputFormat(insts);
            insts = weka.filters.Filter.useFilter(insts, remove);

            insts.setClassIndex(insts.numAttributes() - 1);            

            weka.core.Instances train = new weka.core.Instances(insts, 0, insts.numInstances());          

            cl.buildClassifier(train);

         weka.core.converters.ConverterUtils.DataSource ds2 = new weka.core.converters.ConverterUtils.DataSource(testFile);

            weka.core.Instances instsTest = ds2.getDataSet();
            remove.setInputFormat(instsTest);
            instsTest = weka.filters.Filter.useFilter(instsTest, remove);
            instsTest.setClassIndex(instsTest.numAttributes() - 1);                

            Instances testInstances = new Instances(instsTest);
            int numCorrect = 0;

            weka.classifiers.Evaluation eval = new weka.classifiers.Evaluation(train);
            eval.evaluateModel(cl, testInstances);
            System.out.println(eval.toSummaryString());
            out.write(eval.toSummaryString());
            double roc = eval.areaUnderROC(0); 
```

WEKA GUI 产生的混淆矩阵和这段代码不同。我在这里想念什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T15:05:07.997

首先检查在 Weka GUI 中执行的参数和过滤是否与您在代码中执行的相同。（查看 GUI 中生成的日志）

第二种可能性是随机森林模型在其创建结构中具有的随机分量（在数据集中为每个决策树选择随机特征，请参见[此处](http://en.wikipedia.org/wiki/Random_forest)）。因此，在训练阶段会为相同的训练数据集生成不同的模型，当您使用测试进行评估时，您会得到不同的结果。

# python - Django ModelForm IntegrityError

> ID：11872976
> 
> 赞同：2
> 
> 时间：2012-08-08T20:52:05.530
> 
> 标签：python, django

我在提交 ModelForm 时遇到问题。

基本上，我的一个属性被排除在外，当我们创建表单时，我正在扩充 request.POST 对象以包含它（因此 ORM 可以毫无问题地保存它）。根据我的理解（再次，当谈到 django 时，我是一个 n00b），这就是它的工作原理。

我在调用时收到 IntegrityError `form.save()`。

我正在使用的代码在这里：[http](http://dpaste.com/783425/) ://dpaste.com/783425/ 。

编辑：为后代粘贴代码。

```
# forms.py
class CreateNewItemForm(ModelForm):
    class Meta:
        model = X.models.Y
        exclude = ('person',)

# views.py
def myview(request, person_id):
    if request.method == "POST":
        data = request.POST.copy()
        data['person'] = Person.objects.get(id=person_id)
        # NOTE: I've also tried: data['person'] = person_id

        form = CreateNewItemForm(data)

        if form.is_valid():
            form.save() # throws the IntegrityError 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T21:01:56.827

我认为这段代码是错误的......为此更改你的代码......

```
def myview(request, person_id):
    data = None
    if request.method == "POST":
        data = request.POST
    form = CreateNewItemForm(data)
    if form.is_valid():
        newitem = form.save(commit=False)
        newitem.person = Person.objects.get(id=person_id)
        newitem.save() 
```

# vb.net - 在 PrintDocument.Print() 中的边距范围比在 PrintPreviewDialog.ShowDialog() 中更宽更高

> ID：11872977
> 
> 赞同：0
> 
> 时间：2012-08-08T20:52:09.450
> 
> 标签：vb.net, printing, margin

的显示`PrintPreviewDialog`是完美的，如果我这样做`PrintDocument.Print()`并使用像 PDF995 这样的虚拟打印机，它也很完美。但是，如果我这样做`PrintDocument.Print()`并选择了一台物理打印机（是的，我已经尝试了多台打印机），那么框的左上角放置正确，而不是右下角放置。右下角距右侧 5.5 毫米（在纸上），距底部 7 毫米。

我已经画了一个视觉辅助来进一步澄清发生了什么。红框是我所期望的，当我使用`PrintPreviewDialg`或打印到虚拟打印机时会发生什么。蓝色框是我使用`PrintDocument.Print()`并选择物理打印机时发生的情况。

有谁知道为什么会发生这种情况，更重要的是我能做些什么来解决它？

![打印与打印预览](../Images/1913cc66d882e35ec2521b3f9716298d.png)

* * *

### 我的打印按钮的代码...

```
Dim doc As New Printing.PrintDocument
doc.OriginAtMargins = True
doc.DefaultPageSettings.Margins = New Printing.Margins(50, 50, 50, 50)
AddHandler doc.PrintPage, AddressOf PrintPage

Dim printer As New PrintDialog
printer.Document = doc
printer.UseEXDialog = True
If printer.ShowDialog(Me) = Windows.Forms.DialogResult.OK Then
    printer.Document.Print()
End If 
```

### 我的打印预览按钮的代码...

```
Dim doc As New Printing.PrintDocument
doc.OriginAtMargins = True
doc.DefaultPageSettings.Margins = New Printing.Margins(50, 50, 50, 50)

AddHandler doc.PrintPage, AddressOf PrintPage

Dim preview As New PrintPreviewDialog
preview.Document = doc
preview.ShowDialog(Me) 
```

### `PrintPage()`例行代码...

```
Public Sub PrintPage(ByVal sender As System.Object, ByVal e As System.Drawing.Printing.PrintPageEventArgs)
    Dim Bounds As New Rectangle(e.PageSettings.PrintableArea.X, e.PageSettings.PrintableArea.Y, e.MarginBounds.Width, e.MarginBounds.Height)
    e.Graphics.DrawRectangle(Pens.Black, Bounds)
    e.HasMorePages = False
End Sub 
```

* * *

我也尝试过设置`OriginAtMargin`和`False`使用`e.MarginBounds`而不是我的`Bounds` `Rectangle`. 两者都导致完全相同的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:48:32.300

我相信问题在于您正在使用设置：`e.PageSettings.PrintableArea.X`绘制矩形时 - 这可能会根据您使用的任何打印机而有所不同。你会想要使用类似的东西：

```
Dim Bounds As New Rectangle(e.DefaultPageSettings.Margins.left, e.DefaultPageSettings.Margins.top, e.MarginBounds.Width, e.MarginBounds.Height) 
```

请记住，这可能会导致边缘在打印机中被切断而不打印，除非打印机的 PrintableArea 设置不正确......

# asp.net-mvc-3 - 如何在 Windows 7 / IIS 7.5 上正确设置具有中等信任的 mvc3 Intranet 应用程序

> ID：11872978
> 
> 赞同：0
> 
> 时间：2012-08-08T20:52:08.420
> 
> 标签：asp.net-mvc-3, security, iis-7.5

我正在尝试在 Windows 7 Premium SP1 上本地安装的 IIS 7.5 上部署具有中等信任级别的默认 mvc3 Intranet 项目。

该应用程序使用带有 .net4 集成管道的 defaultApplicationPool。

我只更改了一项设置：在 web.config 中，我添加了 trust level="Medium" 元素。

使用内置的 aspnet dev 在 VS web express 中运行它。服务器。它可以正常工作，并且我的用户名按预期正确显示。

然后我使用 webdeploy，也使用所有默认设置将它部署到我的本地 IIS 7.5。我得到的第一个错误是访问被拒绝（401.2 未授权：由于服务器配置而导致登录失败）。

但是，如果我从 .net 授权视图中删除“拒绝匿名用户”规则，我会得到主页，但“用户”上下文为空。

我怀疑这是由 IIS 配置设置引起的，但我不知道从哪里开始解决这个问题，假设这种设置甚至可以在我的 Win7 高级非基于域的机器上进行。

因此，如果任何 IIS 7.5 专家可以为我指明正确的方向，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:13:35.693

我自己找到了答案，在我的情况下，这是一个两步解决方案：

1）我在网络授权部分删除了“禁止匿名用户”规则

2）我在身份验证部分启用了基本身份验证。最后一个给我带来了很多问题，因为我的机器上默认没有安装“基本身份验证”功能。安装该功能后，我可以为 Web 应用程序启用基本身份验证，并且一切都像魅力一样工作。

# c# - 将 DateTime.Now 转换为不同的时区

> ID：11872980
> 
> 赞同：4
> 
> 时间：2012-08-08T20:52:12.363
> 
> 标签：c#, datetime

这段代码已经工作了很长时间，但是当我尝试将 DateTime.Now 作为 outageEndDate 参数传递时，它现在已经损坏：

```
public Outage(DateTime outageStartDate, DateTime outageEndDate, Dictionary<string, string> weeklyHours, string province, string localProvince)
    {
        this.outageStartDate = outageStartDate;
        this.outageEndDate = outageEndDate;
        this.weeklyHours = weeklyHours;
        this.province = province;
        localTime = TimeZoneInfo.FindSystemTimeZoneById(timeZones[localProvince]);

        if (outageStartDate < outageEndDate)
        {
            TimeZoneInfo remoteTime = TimeZoneInfo.FindSystemTimeZoneById(timeZones[province]);
            outageStartDate = TimeZoneInfo.ConvertTime(outageStartDate, localTime, remoteTime);
            outageEndDate = TimeZoneInfo.ConvertTime(outageEndDate, localTime, remoteTime); 
```

我在最后一行收到的错误消息是 DateTime 参数 (outageEndDate) 上的 Kind 属性设置不正确。我已经用谷歌搜索并检查了示例，但我并不真正理解错误消息。

任何建议表示赞赏。

问候。

编辑 - 确切的错误信息是：

```
The conversion could not be completed because the supplied DateTime did not have the Kind
property set correctly.  For example, when the Kind property is DateTimeKind.Local, the source
time zone must be TimeZoneInfo.Local.  Parameter name: sourceTimeZone 
```

编辑：outageEndDate.Kind = Utc

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T21:13:58.210

感谢您澄清您的问题。

如果 DateTime 实例`Kind`是`Local`，那么`TimeZoneInfo.ConvertTime`将期望第二个参数是您计算机的本地时区。

如果 DateTime 实例`Kind`是`Utc`，那么`TimeZoneInfo.ConvertTime`将期望第二个参数是 Utc 时区。

您需要先将 outageEndDate 转换为正确的时区，以防 localProvice 时区与您计算机上的时区不匹配。

```
outageEndDate = TimeZoneInfo.ConvertTime(outageEndDate, localTime); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:59:07.183

这是您可以尝试的示例

这取决于您所说的“GMT + 1 时区”是什么意思。您是指永久 UTC+1，还是根据 DST 表示 UTC+1 或 UTC+2？

如果您使用的是 .NET 3.5，请使用[`TimeZoneInfo`](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.aspx)获取适当的时区，然后使用：

```
// Store this statically somewhere
TimeZoneInfo maltaTimeZone = TimeZoneInfo.FindSystemTimeZoneById("...");
DateTime utc = DateTime.UtcNow;
DateTime malta = TimeZoneInfo.ConvertTimeFromUtc(utc, maltaTimeZone ); 
```

您需要计算出马耳他时区的系统 ID，但您可以通过在本地运行以下代码轻松完成此操作：

```
Console.WriteLine(TimeZoneInfo.Local.Id); 
```

* * *

如果您**不**使用 .NET 3.5，则需要自己计算夏令时。老实说，*最简单*的方法就是使用一个简单的查找表。计算出未来几年的 DST 变化，然后编写一个简单的方法来返回特定 UTC 时间的偏移量，并对该列表进行硬编码。您可能只需要对已知更改进行排序`List<DateTime>`，并在 1 到 2 小时之间交替，直到您的日期在最后一次更改之后：

```
// Be very careful when building this list, and make sure they're UTC times!
private static readonly IEnumerable<DateTime> DstChanges = ...;

static DateTime ConvertToLocalTime(DateTime utc)
{
    int hours = 1; // Or 2, depending on the first entry in your list
    foreach (DateTime dstChange in DstChanges)
    {
        if (utc < dstChange)
        {
            return DateTime.SpecifyKind(utc.AddHours(hours), DateTimeKind.Local);
        }
        hours = 3 - hours; // Alternate between 1 and 2
    }
    throw new ArgumentOutOfRangeException("I don't have enough DST data!");
} 
```

# git - git push.default=current 和 push.default=upstream 有什么区别？

> ID：11872984
> 
> 赞同：91
> 
> 时间：2012-08-08T20:52:23.160
> 
> 标签：git, git-branch, git-push

git-config 的手册页列出了 push.default 的这些选项：

```
nothing - do not push anything.
matching - push all matching branches. All branches having the same name in both ends are considered to be matching. This is the default.
upstream - push the current branch to its upstream branch.
tracking - deprecated synonym for upstream.
current - push the current branch to a branch of the same name. 
```

在大多数情况下，我会假设推送到分支的上游分支与推送到同名分支相同，因为上游分支通常具有相同的名称，并且由于同名分支（“当前” ) 通常（或根据定义总是？）在上游。那么有什么区别呢？

***更新***： [git-config 的手册页](https://www.kernel.org/pub/software/scm/git/docs/git-config.html)已经更新（正如人们所期望的那样），因此现在所做的区别[可能](https://www.kernel.org/pub/software/scm/git/docs/git-config.html)更加清晰。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-08-08T21:23:19.223

您已经总结了问题中的差异。`upstream`推送到*配置*的上游分支，同时假设上游分支与*当前*`current`本地分支具有相同的名称，并推送到该特定名称。实际上，没有理由假设本地分支的上游跟踪分支与本地分支本身具有相同的名称。

 *例如，如果您在多个存储库或跨多个共享的开发人员远程工作，您通常最终会跟踪同一分支的不同分支，例如`allen-master`or `susan-master`，这两个`master`分支分别跟踪 Allen 和 Susan 的 repos 中的分支。在这种情况下，`current`将是不正确的设置，因为这些分支名称在它们的遥控器上不存在。`upstream`，但是，会工作得很好。

一个更实际的例子可能是同时跟踪 a`development`和`production`存储库。您的工作流程可能会为每个分支使用不同的主线分支，但这可能会让人感到困惑。假设您是代码集成者，并且想要分别跟踪两个存储库的`master`分支。

```
git checkout -b production --track production/master
git checkout -b development --track development/master 
```

现在你有两个分支来跟踪它们各自的存储库，它们都没有使用`master`命名约定。分支名称几乎没有混淆：它们明确地描述了它们跟踪的内容。然而，`push.default = current`这没有任何意义，因为遥控器都不包含一个`development`或`production`分支。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-12T08:11:57.200

`current`将当前分支推送到远程仓库上同名的分支。

`upstream`将当前分支推送到上游分支。

上游分支是已明确或隐含定义为当前分支上游的分支。这意味着默认情况下推送和拉取将与此分支同步。上游分支可能与当前分支本身在同一个仓库中。您可以做一些有趣的事情，例如将*本地主分支设置为**本地*功能（主题）分支的上游，并在它们之间进行推送和拉取。

隐式上游设置是通过`branch.autosetupmerge`配置值完成的。您可以在`git config`帮助页面中找到文档。显式上游设置是通过该命令的`-u`选项完成的。`git branch`有关详细信息，请参阅帮助页面。*

# android - 使用 XML 填充微调器，异常索引出站位置 0 大小为 0

> ID：11872985
> 
> 赞同：-4
> 
> 时间：2012-08-08T20:52:27.450
> 
> 标签：android, android-arrayadapter, android-spinner, android-adapter

我有 3 个 Spinner 依赖项。但是向我发送切换区域异常以下内容：Invalid IndexOutOfBoundException Location 0 Size is 0

负担始终是 Spinner Region。另外两个以前的依赖。示例：我选择一个地区显示城市。如果我选择一个城市相关的地区显示该城市

第一个时间运行正常，但是当我在 Spinner Region 上选择项目时，微调器 Ciudad 启动异常

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.nuevo_cliente);

    posicion=-1;
    txtnCliRut=(EditText) findViewById(R.id.txt_nuRut); 
    txtnCliNombre=(EditText) findViewById(R.id.txt_nuNombre);
    txtnCliDireccion=(EditText) findViewById(R.id.txt_nuDireccion);
    txtnCliTelefono=(EditText) findViewById(R.id.txt_nuTelefono);
    txtnCliRut.setKeyListener(DigitsKeyListener.getInstance("0123456789-kK"));
    txtnCliRut.addTextChangedListener(new InputValidator(txtnCliRut));
    txtnCliTelefono.setInputType(InputType.TYPE_CLASS_PHONE);
    btn_crear=(Button) findViewById(R.id.btnNuCliente);
    btn_cancelar=(Button) findViewById(R.id.btnNuCancela);

    //Declara Spinner
    spRegiones=(Spinner) findViewById(R.id.spRegion);
    spCiudades=(Spinner) findViewById(R.id.spCiudad);
    spComunas=(Spinner) findViewById(R.id.spComuna);
    //Declara Arreglos Objetos
    regiones= new ArrayList<Regiones>();
    ciudades =new ArrayList<Ciudades>();
    comunas =new ArrayList<Comunas>();
    Bundle extras = getIntent().getExtras();
    if (extras != null) 
    {
        posicion= extras.getInt("position");
        ClienteNuevo modCli= new ClienteNuevo();

        modCli=cargaDatos(posicion);
        txtnCliRut.setText(modCli.getRun_nCliente());
        txtnCliNombre.setText(modCli.getNombre_nCliente());
        txtnCliDireccion.setText(modCli.getDireccion_nCLiente());
        txtnCliTelefono.setText(modCli.getTelefono_nCliente());
        btn_crear.setText("Modificar");
    }

    String sFileSrc = null;     
    sFileSrc = "/PDAPedidos/SrcData/regiones.xml";
    oRegion = new ArrayList<Regiones>();
    oParseRegion = new CargaRegionesParserDom(sFileSrc);
    oRegion = oParseRegion.getARegiones();
    for(int i=0;i<oRegion.size();i++)
    {
        regiones.add(oRegion.get(i));
    }

    ArrayAdapter<Regiones> spRegionesAdapter= new ArrayAdapter<Regiones>(this, android.R.layout.simple_spinner_item, regiones);
    spRegionesAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spRegiones.setAdapter(spRegionesAdapter);

    spRegiones.setOnItemSelectedListener(new OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id ) {

            ciudades.clear();
            comunas.clear();
            String sFileSrc = null;     
            sFileSrc = "/PDAPedidos/SrcData/ciudades.xml";
            oCiudad = new ArrayList<Ciudades>();
            oParseCiudad = new CargaCiudadesParserDom(sFileSrc);
            oCiudad = oParseCiudad.getACiudades();
            Log.i("Cargando-Regiones", "Posicion Select REGIOn "+position );
            int idRegion=0;
            idRegion=regiones.get(position).getCodigoRegion();
            for(int i=0;i<oCiudad.size();i++)
            {       
                if(idRegion==oCiudad.get(i).getCodigoRegionCiu())
                {
                    ciudades.add(oCiudad.get(i));
                }
            }

            Log.i("Cargando-Regiones", "Tamaño Arreglo Ciudades"+ ciudades.size());
            ArrayAdapter<Ciudades> spCiudadAdapter= new ArrayAdapter<Ciudades>(getApplicationContext(), android.R.layout.simple_spinner_item,ciudades);
            spCiudadAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            spCiudades.setAdapter(spCiudadAdapter);
        }

        @Override
        public void onNothingSelected(AdapterView<?> parentView) {
        }
    });

    spCiudades.setOnItemSelectedListener(new OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id ) 
        {
            comunas.clear();
            String sFileSrc = null;     
            sFileSrc = "/PDAPedidos/SrcData/comunas.xml";
            oComuna = new ArrayList<Comunas>();
            oParseComuna = new CargaComunasParserDom(sFileSrc);
            oComuna = oParseComuna.getAComunas();

            int idCiudad=0;
            Log.i("Cargando-Regiones", "id Ciudad "+position );
            idCiudad=ciudades.get(position).getCodigoCiudad();       
            Log.i("Cargando-Regiones", "id Ciudad "+idCiudad );
            for(int i=0;i<oComuna.size();i++)
            {
                if(idCiudad==oComuna.get(i).getCodigoCiudadCom())
                {
                    comunas.add(oComuna.get(i));
                }
            }

            ArrayAdapter<Comunas> spComunaAdapter= new ArrayAdapter<Comunas>(getApplicationContext(), android.R.layout.simple_spinner_item, comunas);
            spComunaAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

            spComunas.setAdapter(spComunaAdapter); 
        }

        @Override
        public void onNothingSelected(AdapterView<?> parentView) {
            // your code here
        }
    });

    final ClienteNuevo oNewCli= new ClienteNuevo();
    btn_crear.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            oNewCli.setRun_nCliente(txtnCliRut.getText().toString().trim());
            oNewCli.setNombre_nCliente(txtnCliNombre.getText().toString().trim());
            oNewCli.setDireccion_nCLiente(txtnCliDireccion.getText().toString().trim());
            oNewCli.setCiudad_nCliente(txtnCliCiudad.getText().toString().trim());
            oNewCli.setComuna_nCliente(txtnCliComuna.getText().toString().trim());
            oNewCli.setTelefono_nCliente(txtnCliTelefono.getText().toString().trim());
            if(posicion>=0)
            {
                modificaCli(oNewCli,posicion);
                finish();
            }
            else
            {
                creaNuevoCliente(oNewCli);
                finish();
            }
        }
    });
} 
```

日志猫：

```
08-08 17:01:11.643: E/AndroidRuntime(18992): Uncaught handler: thread main exiting due to uncaught exception
08-08 17:01:11.673: E/AndroidRuntime(18992): java.lang.IndexOutOfBoundsException: Invalid location 0, size is 0
08-08 17:01:11.673: E/AndroidRuntime(18992):    at java.util.ArrayList.get(ArrayList.java:341)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.widget.ArrayAdapter.getItem(ArrayAdapter.java:298)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:351)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.widget.ArrayAdapter.getView(ArrayAdapter.java:323)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.widget.AbsSpinner.onMeasure(AbsSpinner.java:198)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.view.View.measure(View.java:8018)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3026)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:888)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:350)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:278)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.view.View.measure(View.java:8018)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.widget.ScrollView.measureChildWithMargins(ScrollView.java:909)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.widget.ScrollView.onMeasure(ScrollView.java:283)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.view.View.measure(View.java:8018)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3026)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:888)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.widget.TableLayout.measureChildBeforeLayout(TableLayout.java:453)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:350)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.widget.TableLayout.measureVertical(TableLayout.java:465)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.widget.TableLayout.onMeasure(TableLayout.java:428)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.view.View.measure(View.java:8018)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3026)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.view.View.measure(View.java:8018)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3026)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.view.View.measure(View.java:8018)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.view.ViewRoot.performTraversals(ViewRoot.java:763)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1633)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.os.Looper.loop(Looper.java:123)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at android.app.ActivityThread.main(ActivityThread.java:4363)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at java.lang.reflect.Method.invokeNative(Native Method)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at java.lang.reflect.Method.invoke(Method.java:521)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
08-08 17:01:11.673: E/AndroidRuntime(18992):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:02:34.607

我猜这`ciudades`是空的（大小== 0），因为：

```
if(idRegion==oCiudad.get(i).getCodigoRegionCiu()) 
```

我看起来您正在尝试比较两种`Regiones`数据类型。了解在 Java**中不能**用于`==`自定义类。你需要使用`equals()`. 考虑这个简单的例子：

```
class Foo {
    String bar;

    Foo(String string) {
        this.bar = string;
    }

    @Override
    public boolean equals(Object o) {
        if(o instanceof Foo) // check 1
            return bar.equals(((Foo) o).bar);
        else if(o instanceof String) // check 2
            return bar.equals(o);
        return false; // else
    }
} 
```

现在如果我问：

```
Foo foo = new Foo("A");
Foo foo2 = new Foo("A");

foo == foo2;              // false, cannot use == operator for custom classes
foo.equals(new Foo("a")); // false, check 1 says "A" is not "a"
foo.equals(foo2);         // true, check 1
foo.equals("A");          // true, check 2
foo.equals(1);            // false, else 
```

另外两个非常有用的重写方法是 toString() 和 hashCode()。

*   toString() 定义了您的类的用户可读表示，我猜您已经这样做了，或者您的 Spinners 中有一些非常丑陋的字符串。

*   hashCode() 被许多内置数据类型使用。例如，如果您想对 Foo 数组进行排序，这是 Java 尝试使用的第一种方法。

以下是 Foo 对这些方法的版本：

```
@Override
public int hashCode() {
    return bar.hashCode();
}

@Override
public String toString() {
    return bar;
} 
```

# objective-c - 向 AppDelegate 添加协议未注册

> ID：11872996
> 
> 赞同：2
> 
> 时间：2012-08-08T20:52:57.017
> 
> 标签：objective-c, cocoa-touch, protocols, delegation, appdelegate

一旦我的第一个视图加载我的位置控制器调用`-(void)locationFound`到它的委托，即`[UIApplication sharedApplication].delegate`（我的 AppDelegate），我就有一个相应的协议，它只要求一个所需的方法 locationFound。

我在我的 AppDelegate 标头中声明了一个协议遵守：

```
@interface ProgramAppDelegate : UIResponder <UIApplicationDelegate, LocationFoundProtocol> 
```

一切正常——除了我在我的位置控制器中分配代表时收到警告——就像这样：

```
self.positioningBrain.positioningNetworkingDelegate = [UIApplication sharedApplication].delegate; 
```

它告诉我：

```
Assigning to 'id<LocationFoundProtocol>' from incompatible type 'id<UIApplicationDelegate>' 
```

似乎它根本看不到我的 AppDelegate 实际上符合我指定的协议 - 即使它是在标题中声明的。

XCode 注册这种不匹配是否有某些原因？我对我的代码可以正常工作并不感到惊讶，因为无论如何协议都应该是语义的，但是如果有更好的方法可以做到这一点，我想知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T20:58:29.123

UIapplication 的委托属性返回以下类型

```
id<UIApplicationDelegate> 
```

您必须将返回的类型转换为您的 AppDelegates 类型

```
... = (MyAppDelegate*)[UIApplication sharedApplication].delegate 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:58:40.320

问题是编译器不知道那`[UIApplication sharedApplication].delegate`是 type `ProgramAppDelegate`；它只知道 UIApplication 的委托方法返回`id<UIApplicationDelegate>`。如果您想抑制警告，您需要`positioningNetworkingDelegate`从某个您知道应用程序委托的完整类型的地方进行分配。（例如，如果您在委托人自己的代码中，您可以只说`positioningBrain.positioningNetworkingDelegate = self`这会起作用）。

您还可以强制转换它以使编译器相信这是有效的：

```
self.positioningBrain.positioningNetworkingDelegate = (ProgramAppDelegate *)[UIApplication sharedApplication].delegate; 
```

许多人为此目的制作了快捷功能或宏。就像是：

```
#define APPDEL ((ProgramAppDelegate *)[UIApplication sharedApplication].delegate) 
```