# StackOverflow 问答 11934000-11934999

# android - 更新 Android sdk 出错

> ID：11934001
> 
> 赞同：0
> 
> 时间：2012-08-13T12:06:21.827
> 
> 标签：android

我更新了我的 android sdk，但是当我创建一个新的应用程序时，我得到了我以前从未见过的新选项。 ![在此处输入图像描述](../Images/d980b5115d984b54a29395649e8d06e9.png)

这是什么意思 。我为此父活动命名，但是当我运行应用程序时出现此错误

```
No Launcher activity found!
The launch will only sync the application package on the device! 
```

完整的控制台输出

```
[2012-08-13 13:54:35 - GG] ------------------------------
[2012-08-13 13:54:35 - GG] Android Launch!
[2012-08-13 13:54:35 - GG] adb is running normally.
[2012-08-13 13:54:35 - GG] No Launcher activity found!
[2012-08-13 13:54:35 - GG] The launch will only sync the application package on the device!
[2012-08-13 13:54:35 - GG] Performing sync
[2012-08-13 13:54:35 - GG] Automatic Target Mode: launching new emulator with compatible AVD 'Androidvirtual'
[2012-08-13 13:54:35 - GG] Launching a new emulator with Virtual Device 'Androidvirtual'
[2012-08-13 13:54:35 - GG] ------------------------------
[2012-08-13 13:54:35 - GG] Android Launch!
[2012-08-13 13:54:35 - GG] adb is running normally.
[2012-08-13 13:54:35 - GG] No Launcher activity found!
[2012-08-13 13:54:35 - GG] The launch will only sync the application package on the device!
[2012-08-13 13:54:35 - GG] Performing sync
[2012-08-13 13:54:35 - GG] Automatic Target Mode: launching new emulator with compatible AVD 'Androidvirtual'
[2012-08-13 13:54:35 - GG] Launching a new emulator with Virtual Device 'Androidvirtual'
[2012-08-13 13:54:48 - Emulator] WARNING: Data partition already in use. Changes will not persist!
[2012-08-13 13:54:50 - Emulator] WARNING: SD Card image already in use: /home/belkacem/.android/avd/Androidvirtual.avd/sdcard.img
[2012-08-13 13:54:50 - GG] New emulator found: emulator-5554
[2012-08-13 13:54:50 - GG] Waiting for HOME ('android.process.acore') to be launched...
[2012-08-13 13:54:51 - Emulator] WARNING: Cache partition already in use. Changes will not persist!
[2012-08-13 13:54:51 - GG] New emulator found: emulator-5556
[2012-08-13 13:54:51 - GG] Waiting for HOME ('android.process.acore') to be launched...
[2012-08-13 13:55:18 - Emulator] Failed to create Context 0x3005
[2012-08-13 13:55:18 - Emulator] emulator: WARNING: Could not initialize OpenglES emulation, using software renderer.
[2012-08-13 13:55:18 - GG] emulator-5556 disconnected! Cancelling 'sync'!
[2012-08-13 13:55:20 - Emulator] Failed to create Context 0x3005
[2012-08-13 13:55:20 - Emulator] emulator: WARNING: Could not initialize OpenglES emulation, using software renderer.
[2012-08-13 13:55:20 - GG] emulator-5554 disconnected! Cancelling 'sync'! 
```

清单.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="main.java"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="16"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="d" />
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:08:52.067

```
No Launcher activity found! 
```

您的清单文件必须有一个作为应用启动器的活动...

```
<activity
android:name=".MainActivity"
android:label="@string/title_activity_main" >

 <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>    

</activity> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T12:14:47.507

我认为您需要定义一个启动活动。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="main.java"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="16"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T12:15:37.143

插入`<category android:name="android.intent.category.LAUNCHER" />`您的活动标签，我猜这将解决问题。

# java - 如何在 Java 中构造日志接收器？

> ID：11934013
> 
> 赞同：0
> 
> 时间：2012-08-13T12:07:45.060
> 
> 标签：java, log4j, jms, appender

我想创建一个`Receiver`来收集和管理 JMSAppender 发送的日志。现在它只工作 30 秒（`Thread.sleep(30000);`），但我需要它等待来自系统的所有日志。`pw.close();`如果我需要关闭以查看文件中的所有日志，我该怎么做？从文件中，我将日志加载到日志查看器，我想实时查看它们。

```
public class Receiver implements MessageListener {

    PrintWriter pw = new PrintWriter("result.log");

    public Receiver() throws Exception {

        ActiveMQConnectionFactory factory = new ActiveMQConnectionFactory("tcp://localhost:61616");
        Connection conn = factory.createConnection();
        Session sess = conn.createSession(false, Session.AUTO_ACKNOWLEDGE);
        conn.start();
        MessageConsumer consumer = sess.createConsumer(sess.createTopic("logTopic"));
        consumer.setMessageListener(this);

        Thread.sleep(30000);
        consumer.close();
        sess.close();
        conn.close();
        pw.close();
        System.exit(1);
    }

    public static void main(String[] args) throws Exception {
        new Receiver();

    }

    public void onMessage(Message message) {
        try {
            LoggingEvent event = (LoggingEvent) ((ActiveMQObjectMessage) message).getObject();

            DateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss,SSS"); 
            String nowAsString = df.format(new Date(event.getTimeStamp())); 

            System.out.println("zapisujemy do pliku");
            pw.println("["+ nowAsString + "]" + 
                    " [" + event.getThreadName()+"]" +
                    " ["+ event.getLoggerName() + "]" +
                    " ["+ event.getMessage()+"]");
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:13:13.837

不要在构造函数中关闭打印编写器并删除您的`Thread.sleep()`. 您的程序不会终止，因为您正在调用`conn.start();`在 JMS 客户端中创建等待线程。

`pw.flush();`之后添加`pw.println()`到`onMessage()`

编辑：您不必关闭文件。但是，如果您想创建干净的实现，请在关闭挂钩中执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:10:52.387

那是因为你在这 30 秒后关闭它，然后甚至退出 jvm。

在 JVM 退出时关闭：[`Runtime.addShutdownHook`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T12:27:29.427

我觉得我在这里指出了显而易见的事情，但是您确实意识到您**在构造函数**中等待了 30 秒？

如果您想在 30 秒后关闭连接，那么我建议您[`Timer`](http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html)在此处使用并执行线程安全关闭连接。

在您的构造函数中暂停的结果是，当其他线程调用时`onMessage`，您的对象尚未完成创建，并且可能会出现异常行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T09:25:05.863

最后我写了接收器：

```
public class Receiver implements MessageListener {

    static Connection conn;
    ActiveMQConnectionFactory factory;
    static Session sess;
    static MessageConsumer consumer;

    public Receiver() throws Exception {

        /*
         *  create a logTopic topic consumer
         */
        factory = new ActiveMQConnectionFactory("tcp://localhost:61616");
        conn = factory.createConnection();
        sess = conn.createSession(false, Session.AUTO_ACKNOWLEDGE);
        conn.start();
        consumer = sess.createConsumer(sess.createTopic("logTopic"));
        consumer.setMessageListener(this);

    }

    public static void main(String[] args) throws Exception {

        Runtime.getRuntime().addShutdownHook(new Thread(new ShutDownListener(consumer, sess, conn)));
        new Receiver();
    }

    public void onMessage(Message message) {
        try {
            LoggingEvent event = (LoggingEvent) ((ActiveMQObjectMessage) message)
                    .getObject();

            /*
             * log on console and into a file
             */

            FileReceiver.logToFile(event);
            StdoutReceiver.logOnConsole(event);

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

使用 FileReceiver：

```
public class FileReceiver {

    static PrintWriter pw;
    static DateFormat df;

    static {
        try {
            df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss,SSS");
            pw = new PrintWriter("result.log");
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }

        Runtime.getRuntime().addShutdownHook(new Thread() {
            public void run() {
                pw.close();
                System.exit(1);
            }
        });
    }

    public static void logToFile(LoggingEvent event) {
        String nowAsString = df.format(new Date(event.getTimeStamp()));

        pw.println("[" + nowAsString + "]" + " [" + event.getThreadName() + "]"
                + " [" + event.getLoggerName() + "]" + " ["
                + event.getMessage() + "]");
        pw.flush();

    }
} 
```

和标准输出接收器

```
public class StdoutReceiver {

    public static void logOnConsole(LoggingEvent event) {

        System.out.println("[" + event.getTimeStamp() + "]" + " ["
                + event.getThreadName() + "]" + " [" + event.getLoggerName()
                + "]" + " [" + event.getMessage() + "]");
    }

} 
```

# javascript - 在原型而非经典 JavaScript 中实现对象池的资源

> ID：11934021
> 
> 赞同：1
> 
> 时间：2012-08-13T12:08:27.287
> 
> 标签：javascript, object, prototype, pooling, object-pooling

快速提问（稍微费力地建立起来）....

Douglas Crockford 和 Stoyan Stefanov 在他们的 JavaScript 书籍中都强烈鼓励在实施 JavaScript 项目时远离经典（基于类）范式，并利用其原型设计。

我觉得这很吸引人，因为它看起来像你在类型安全和优化方面的松懈，你应该能够通过灵活性和可维护性来获得（据我了解，这是创建 Self，第一个原型语言的目标）

我需要创建一个对象池系统来控制垃圾收集器，因为我正在尝试为基于 Web 的学习材料创建尽可能接近的“实时”模拟。

我能找到的唯一开放的实现（如详细记录和评论）是 gamecore.js 库 [和本教程](http://buildnewgames.com/garbage-collector-friendly-code/)的一部分。

此实现适用于 class.js - 一个启用经典模拟模式的库，并且在我的项目中使用它需要我使用经典模拟继承。

所以，毕竟，我的问题很简单——有没有人知道一个公开可用的对象池脚本，它没有将类模拟作为其实现的一部分？

（只是为了节省时间，建造这个东西只有两周的时间......）

先感谢您

詹姆士

金史密斯大学

# sql - 从重复项中任意选择特定列的不同值

> ID：11934023
> 
> 赞同：1
> 
> 时间：2012-08-13T12:08:33.323
> 
> 标签：sql, db2

我有与死亡有关的健康数据。个人最多应该死一次。在数据库中，他们有时不会；可能是因为更改了死因，但未删除原始条目。我真的不明白这是怎么被允许发生的，但它确实发生了。所以，作为一个虚构的例子，我有：

```
 Row_number | Individual_ID | Cause_of_death        | Date_of_death
------------+---------------+-----------------------+---------------
     1      |     1         | Stroke                | 3 march 2008     
     2      |     2         | Myocardial infarction | 1 jan 2009  
     3      |     2         | Pulmonary Embolus     | 1 jan 2009 
```

我希望每个人只有一个死因。

在示例中，我想要一个返回第 1 行和第 2 行或第 3 行（不是两者）的查询。我必须在第 2 行和第 3 行之间做出任意选择，因为在任何可用于确定哪个是修订版的字段中都没有时间戳；这并不理想，但不可避免。

我不能让 SQL 工作来做到这一点。我已经尝试将不同的 Individual_ID 内部连接到其他字段，但这仍然给出了所有行。我试过用它添加一个 'having count(Individual_ID) = 1' 子句。这完全排除了具有多个死因的人。互联网上的建议似乎是基于使用时间戳字段来选择最新的，但我没有。

IBM DB2。视窗XP。任何想法都感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:19:57.363

从性能的角度来看，row_number() 方法可能更可取。这是 usr 的示例，采用 DB2 语法：

```
select * from (
       select T.*, row_number() over (partition by Individual_ID) as r
           from T
   )
   where r=1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:21:06.033

我不了解 DB2，所以我会笼统地回答。主要有两种方法：

```
select *
from T
join (
 select keys, min(ID) as MinID
 from T
 group by keys
) on T.ID = MinID 
```

和

```
select *, row_number() over (partition by keys) as r
from T
where r = 1 
```

两者都返回所有行，无论是否重复。但是他们每个“键”只返回一个副本。

请注意，这两个语句都是伪 SQL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T12:16:33.790

您是否尝试过使用`MIN`（或`MAX`）来对抗死因。（以及死亡日期，如果他们在两个不同的日期死亡）

```
SELECT IndividualID, MIN(Cause_Of_Death), MIN (Date_Of_Death)
from deaths
GROUP BY IndividualID 
```

# jasmine - 在 Sublime Text 2 中使用 jsTestDriver 和 Jasmine

> ID：11934024
> 
> 赞同：0
> 
> 时间：2012-08-13T12:08:35.000
> 
> 标签：jasmine, sublimetext, js-test-driver

有没有办法在编写 JavaScript 时将 Sublime Text 2 配置为使用 Jasmine 和 jsTestDriver？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T07:23:21.303

由于问题没有说明明确的目标，因此很难猜测这里要问什么。请在问下一个问题时更加专业。

您可能希望对每个 JS 文件保存执行测试。

*   据我所知，没有 Sublime Text 插件可以在测试失败的行上提供修饰输出

*   [但是，您可以使用诸如http://pypi.python.org/pypi/watchdog/0.6.0 之](http://pypi.python.org/pypi/watchdog/0.6.0)类的通用解决方案在后台运行测试，该解决方案监视文件的更改并在某些文件更改时运行命令

*   如果您想将终端输出通过管道传输到 Sublime 选项卡，可以使用[https://github.com/wuub/SublimeREPL/](https://github.com/wuub/SublimeREPL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T04:40:31.127

另一种方法是在 Sublime 和 Firefox 上使用“Live Reload”插件。

当您保存测试文件时，它会自动刷新 Spec Runner。不是完美的设置，但有效。

# nhibernate - Castle Active Record - 延迟加载的默认设置

> ID：11934025
> 
> 赞同：0
> 
> 时间：2012-08-13T12:08:40.517
> 
> 标签：nhibernate, castle-activerecord

全部，

# 1

请确认，但我今天观察到，获取集合的默认设置至少是：Lazy = false（与 NHibernate 相反）。即，当您没有在 HasMany() attr 上指定 Lazy 时，会立即获取集合。

# 2

另一个问题：我在我的订单实体上指定了引用客户实体 BelongsTo(Lazy = FetchWhen.OnInvoke)，该设置不受尊重，当我收到订单时，我的客户急切地获取。那里发生了什么事？为什么所有退货订单都急切地吸引客户？修改后，当我在客户实体本身 (ActiveRecord(Lazy = true)) 上添加惰性时，BelongsTo() 上的惰性设置按预期工作。因此，看起来 BelongsTo(Lazy = FetchWhen.OnInvoke) 仅在引用的实体通过 (ActiveRecord(Lazy = true)) 显式启用延迟加载时才受到尊重。

# 3

城堡活动记录配置文件中有没有办法为所有实体设置 Lazy = true 的全局设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:03:35.487

@1 已确认

@2 如果我没记错的话，您必须设置 [BelongsTo(..., Lazy = FetchWhen.OnInvoke, Fetch = FetchEnum.Select)] 然后甚至 [ActiveRecord(..., Lazy = true)] 应该根据需要加载.

问候 Juy Juka

# cakephp - 使用 CakePHP 记录数据库更新

> ID：11934028
> 
> 赞同：1
> 
> 时间：2012-08-13T12:08:46.310
> 
> 标签：cakephp

如何在 CakePHP 中使用纯 SQL 记录所有数据库更新、插入或删除？

例子：

$this->Car->query('更新汽车设置颜色 = "red" ');

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:14:26.927

扩展您正在使用的任何数据源并覆盖该`_execute()` 方法以记录并传递回父级。

例如，假设您当前正在使用 dbo_mysql。这意味着您的数据库配置是这样的：

```
class DATABASE_CONFIG {

    var $default = array(
            'driver' => 'mysql',
            // ...
    )
} 
```

因此将“驱动程序”更改为“mysql_with_log”，并创建文件 app/model/datasources/dbo/mysql_with_log.php：

```
<?php
require (LIBS . 'model' . DS . 'datasources' . DS . 'dbo' . DS .'dbo_mysql.php');
class DboMysqlWithLog extends DboMysql {
   function _execute($sql) {
         $this->log($sql);
         return parent::_execute($sql);
   }
}
?> 
```

这是[参考链接](http://cakephp.1045679.n5.nabble.com/Log-SQL-queries-td1281970.html)。

您也可以使用[Cake 调试工具包](http://book.cakephp.org/2.0/en/development/debugging.html#debug-kit)。

该插件还将帮助您保存 SQL 日志。这是[下载调试工具包](https://github.com/cakephp/debug_kit)的链接。

# java - 如何在 Java 中管理工作时间？

> ID：11934029
> 
> 赞同：2
> 
> 时间：2012-08-13T12:08:45.803
> 
> 标签：java, date

我想问是否有人知道任何 API 或类似的东西可以让我管理一天中的具体部分（例如工作时间）

我的问题是我必须在下一个上下文中管理时间：

想象一下，我在一家工作时间为“8am-2pm”和“3pm-6pm”的公司工作，夏令时从“8am 到 2pm”。我想知道具体日期的具体时刻是劳动时刻还是不是。

例如，如果我有提到的日历，并且我询问 API “2012 年 8 月 13 日晚上 9 点”是否是工作时间，它必须检查它并返回正确答案（在这种情况下为错误），如果我询问“ 2012 年 8 月 13 日上午 9 点”是一个工作时刻，它必须返回“真”

其他重要的事情相关。我必须使用提到的日历计算两个日期之间的间隔。例如，如果我将开始时间设置为“今天下午 5 点”，结束时间设置为“明天上午 10 点”，则它必须返回 3 小时（或以秒或毫秒为单位的等效时间），因为它是在开始日期和此日历中的结束日期。

它还必须与假期一起工作（特别是每个国家/地区）。我找到了一个 API 调用“JollyTime”，但是，虽然它适用于假期，但它不支持工作时间......

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-24T22:06:01.990

**更新：** Joda-Time 库现在处于维护模式，其主要作者 Stephen Colebourne 继续领导 JSR 310，它定义了Java 8 及更高版本中内置的*java.time类。*

* * *

一个对日期时间具有复杂支持的良好数据库在这里可能会有所帮助。一个这样的数据库是[Postgres](https://en.wikipedia.org/wiki/PostgreSQL)，具有良好的日期时间[数据类型](http://www.postgresql.org/docs/current/static/datatype-datetime.html)和[命令（“函数”）](http://www.postgresql.org/docs/current/static/functions-datetime.html)。

[Joda-Time](http://www.joda.org/joda-time/)框架也可能有所帮助。[Interval](http://www.joda.org/joda-time/apidocs/org/joda/time/Interval.html)类及其父类定义了一对开始和停止日期时间之间的时间跨度。它们提供了比较方法，例如：包含、重叠、isBefore、is After。

下面是一些示例代码，可帮助您开始使用 Joda-Time 2.3 和 Java 7。

```
// © 2013 Basil Bourque. This source code may be used freely forever by anyone taking full responsibility for doing so.
// import org.joda.time.*;
// import org.joda.time.format.*;

DateTimeZone timeZone = DateTimeZone.forID( "Europe/Paris" );

List<Interval> workIntervalsFor13Aug2012 = new ArrayList<Interval>( 2 );
DateTime start, stop;
Interval interval;

start = new DateTime( 2012, 8, 13, 8, 0, 0, timeZone );
stop = new DateTime( 2012, 8, 13, 14, 0, 0, timeZone );
interval = new org.joda.time.Interval( start, stop );
workIntervalsFor13Aug2012.add( interval );

start = new DateTime( 2012, 8, 13, 15, 0, 0, timeZone );
stop = new DateTime( 2012, 8, 13, 18, 0, 0, timeZone );
interval = new org.joda.time.Interval( start, stop );
workIntervalsFor13Aug2012.add( interval );

// Check a date-time against those work intervals.
DateTime test09 = new DateTime( 2012, 8, 13, 9, 0, 0, timeZone );
DateTime test21 = new DateTime( 2012, 8, 13, 21, 0, 0, timeZone );

// You should write a "dateTimeIsInWorkingInterval" method that performs this loop.
Boolean hit = false;
for ( Interval nthInterval : workIntervalsFor13Aug2012 ) {
    if( nthInterval.contains( test09 )) {
        hit = true;
        break;
    }
}
if( hit ) {
    System.out.println( "This date-time: " + test09 + " occurs during a work interval.");
} else {
    System.out.println( "This date-time: " + test09 + " occurs outside a work interval.");
}

hit = false;
for ( Interval nthInterval : workIntervalsFor13Aug2012 ) {
    if( nthInterval.contains( test21 )) {
        hit = true;
        break;
    }
}
if( hit ) {
    System.out.println( "This date-time: " + test21 + " occurs during a work interval.");
} else {
    System.out.println( "This date-time: " + test21 + " occurs outside a work interval.");
} 
```

运行时……</p>

```
This date-time: 2012-08-13T09:00:00.000+02:00 occurs during a work interval.
This date-time: 2012-08-13T21:00:00.000+02:00 occurs outside a work interval. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:12:49.407

看看 JODA 时间库。我知道它有间隔，可能正是您所需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-24T09:34:01.637

我已经实施了一个简单的解决方案来计算两个日期之间的工作时间。从这个角度出发可能会帮助你完成你的任务。

这是以分钟或毫秒为单位计算工作时间的类。

```
public class WorkingTime {

private static final long ONE_SECOND_AS_MILISECONDS = TimeUnit.SECONDS.convert(1, TimeUnit.SECONDS);

private Integer startHour;
private Integer endHour;
private Integer startMinute;
private Integer endMinute;

public WorkingTime(int startHour, int endHour) {
    this(startHour, 0, endHour, 0);
}

public WorkingTime(Integer startHour, Integer startMinute, 
        Integer endHour, Integer endMinute) {
    super();
    this.startHour = startHour;
    this.endHour = endHour;
    this.startMinute = startMinute;
    this.endMinute = endMinute;
}

... getters and setters

public long calculateWorkingAsMilis(Date date1, Date date2) {
    return ONE_SECOND_AS_MILISECONDS * calculateWorkingSeconds(date1, date2);
}

public long calculateWorkingSeconds(Date date1, Date date2) {
    Calendar cal1 = Calendar.getInstance();
    cal1.setTime(date1);
    setWorkingCalendar(cal1);

    Calendar cal2 = Calendar.getInstance();
    cal2.setTime(date2);
    setWorkingCalendar(cal2);

    long day1 = TimeUnit.MILLISECONDS.toDays(cal1.getTimeInMillis());
    long day2 = TimeUnit.MILLISECONDS.toDays(cal2.getTimeInMillis());
    long daydiff = day2 - day1;
    long weekendDiff = (daydiff / 7); // get number of weekends
    if (isLeakWeekend(cal1, cal2))
        weekendDiff++;

    long dailyWorkingTimeAsMinutes = getDailyWorkingTimeAsMinutes();
    long secondsToBeDecrementedAsNonWorkingHours = TimeUnit.SECONDS.convert((24 * 60 - dailyWorkingTimeAsMinutes), TimeUnit.MINUTES); // seconds that are not in interval of working hours
    long secondsToBeDecrementedAsWorkingHoursForWeekends = TimeUnit.SECONDS.convert(dailyWorkingTimeAsMinutes * 2, TimeUnit.MINUTES); // weekend is not working days, they need to be decremented

    long dayDiffAsSeconds = daydiff * secondsToBeDecrementedAsNonWorkingHours;
    dayDiffAsSeconds += (weekendDiff * secondsToBeDecrementedAsWorkingHoursForWeekends); 

    long workDiffSeconds = TimeUnit.SECONDS.convert(
            cal2.getTimeInMillis() - cal1.getTimeInMillis(),
            TimeUnit.MILLISECONDS) - dayDiffAsSeconds; 
    return workDiffSeconds;
}

private boolean isLeakWeekend(Calendar cal1, Calendar cal2) {
    if (cal1.get(Calendar.DAY_OF_WEEK) > cal2.get(Calendar.DAY_OF_WEEK))
        return true;
    return false;
}

private long getDailyWorkingTimeAsMinutes() {
    return (getEndHour() * 60 + getEndMinute()) - (getStartHour() * 60 + getStartMinute());
}

private Calendar setWorkingCalendar(Calendar cal) {
    if (cal.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY) {
        cal.set(Calendar.DAY_OF_YEAR, cal.get(Calendar.DAY_OF_YEAR) + 1);
        resetWorkingHourAndSeconds(cal);
    } else if (cal.get(Calendar.DAY_OF_WEEK) == Calendar.SATURDAY) {
        cal.set(Calendar.DAY_OF_YEAR, cal.get(Calendar.DAY_OF_YEAR) + 2);
        resetWorkingHourAndSeconds(cal);
    } else if (cal.get(Calendar.HOUR_OF_DAY) > endHour || (cal.get(Calendar.HOUR_OF_DAY) == endHour && cal.get(Calendar.MINUTE) > endMinute)) {
        cal.set(Calendar.HOUR_OF_DAY, endHour);
        cal.set(Calendar.MINUTE, endMinute);
    } else if (cal.get(Calendar.HOUR_OF_DAY) < startHour || (cal.get(Calendar.HOUR_OF_DAY) == startHour && cal.get(Calendar.MINUTE) < startMinute)) {
        cal.set(Calendar.HOUR_OF_DAY, startHour);
        cal.set(Calendar.MINUTE, startMinute);
    }
    return cal;
}
private Calendar resetWorkingHourAndSeconds(Calendar cal) {
    cal.set(Calendar.HOUR_OF_DAY, startHour);
    cal.set(Calendar.MINUTE, startMinute);
    cal.set(Calendar.SECOND, 0);
    cal.set(Calendar.MILLISECOND, 0);
    return cal;
} 
```

}

这是用法

```
// create an instance (working hours from 08:30 to 17:30)
WorkingTime workingTime = new WorkingTime(8, 30, 17, 30);
long durationAsMilis = workingTime.calculateWorkingAsMilis(date1, date2); 
```

希望有帮助

通凯森图尔克

# php - php mysql更新准备好的语句

> ID：11934035
> 
> 赞同：-1
> 
> 时间：2012-08-13T12:09:19.790
> 
> 标签：php, mysql, prepared-statement

嘿，我的数据库什么也没做，我不知道为什么。

编码

```
$blub = $dbh->prepare("UPDATE `aufträge` SET status= ? WHERE id= ?");
$blub->bindParam(1, $m[0]);
$blub->bindParam(2, $m[1]);
$blub->execute();      `

var_dump($blub); 
```

> object(PDOStatement)#3 (1) { ["queryString"]=> string(43) "UPDATE `aufträge`SET status= ? WHERE id= ?" }

数据库什么都不做。如果我不使用准备好的语句，它运行没有问题

请帮助我，我想使用准备好的陈述

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T12:18:23.727

试试这个：（我相信你使用的是`mysqli`语法）

```
$blub = $dbh->prepare("UPDATE `aufträge` SET status= :status WHERE id= :id"); 
$blub->bindParam(':status', $m[0]); 
$blub->bindParam(':id', $m[1]); 
$blub->execute(); 
```

还要确保在将它们传递给查询时设置`$m[0]`and （在循环中或诸如此类）`$m[1]`

# asp.net - 启用请求验证时，asp.net 开发人员是否应该处理 xss？

> ID：11934042
> 
> 赞同：1
> 
> 时间：2012-08-13T12:09:49.057
> 
> 标签：asp.net, xss, sql-injection

作为一个内置功能，asp.net 支持请求验证。那么，启用请求验证后，asp.net 开发者是否应该处理 xss？还有什么办法可以完成xss攻击吗？

同样，我们在使用 Linq2SQL 或实体框架时是否应该注意 SQL 注入？

我的团队倾向于不手动过滤输入字符串，因为 asp.net 和这两个 ORM 工具的好处......

谢谢~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:25:02.493

要先回答 sql 问题，linq2sql 会为您处理。只要您不通过连接字符串（参数化查询等）来构建查询，您就是安全的。

关于 XSS，请求验证是不够的。在这里查看我的答案：[PagesSection.ValidateRequest 是否足以防止 asp.Net 中的 XSS](https://stackoverflow.com/questions/9733427/is-pagessection-validaterequest-enough-to-prevent-xss-in-asp-net/9748588)

# javafx - 如何在 JavaFx 的 GridPane 中添加空行？

> ID：11934045
> 
> 赞同：6
> 
> 时间：2012-08-13T12:09:59.767
> 
> 标签：javafx

我想在循环中的每 x 行之间添加一点空间。我发现向 GridPane 添加空行比在行上设置特定约束更好。问题是我不知道应该在该行中放入哪个节点来伪造空元素。我可以通过让我们说文本节点来做到这一点。但这真的正确吗？谁能提供更优雅的解决方案？

```
gridPane.addRow(i, new Text("")); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T18:05:32.060

使用带有空字符串的文本节点来创建空的网格窗格行是可以的。

作为替代方案，下面的示例使用窗格为空网格行创建一个“弹簧”节点，可以将其首选高度设置为任何所需的值，以实现您想要的任何间隙大小。此外，如果需要，也可以通过 css 设置 spring 节点的样式。

```
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.control.Label;
import javafx.scene.layout.GridPane;
import javafx.scene.layout.Pane;
import javafx.stage.Stage;

// GridPane with a blank row
// http://stackoverflow.com/questions/11934045/how-to-add-empty-row-in-gridpane-in-javafx
public class GridPaneWithEmptyRowSample extends Application {
  public static void main(String[] args) { launch(args); }
  @Override public void start(final Stage stage) throws Exception {
    // create nodes for the grid.
    final Label label1 = new Label("Label 1");
    final Label label2 = new Label("Label 2");
    final Label label3 = new Label("Label 3");
    final Pane  spring = new Pane();
    spring.minHeightProperty().bind(label1.heightProperty());

    // layout the scene.
    final GridPane layout = new GridPane();
    layout.add(label1, 0, 0);
    layout.add(spring, 0, 1);
    layout.add(label2, 0, 2);
    layout.add(label3, 0, 3);
    layout.setPrefHeight(100);
    stage.setScene(new Scene(layout));
    stage.show();
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-31T10:02:14.273

我认为解决这个问题的最好方法是添加[RowConstraints](https://docs.oracle.com/javafx/2/api/javafx/scene/layout/RowConstraints.html)，在`Gridpane`. 然后您不必添加“空”行，因为每行都将获得相同的空间，无论它是否包含任何内容。

这是一个[最小、完整且可验证](https://stackoverflow.com/help/mcve)的示例：

```
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.control.Label;
import javafx.scene.layout.GridPane;
import javafx.scene.layout.RowConstraints;
import javafx.scene.layout.VBox;
import javafx.stage.Stage;

public class SSCCE extends Application {

    @Override
    public void start(Stage stage) {

        VBox root = new VBox();

        GridPane gridPane = new GridPane();

        gridPane.add(new Label("First"), 0, 0);
        gridPane.add(new Label("Second"), 0, 2);
        gridPane.add(new Label("Third"), 0, 3);

        // Add one RowConstraint for each row. The problem here is that you
        // have to know how many rows you have in you GridPane to set
        // RowConstraints for all of them.
        for (int i = 0; i <= 3; i++) {
            RowConstraints con = new RowConstraints();
            // Here we set the pref height of the row, but you could also use .setPercentHeight(double) if you don't know much space you will need for each label.
            con.setPrefHeight(20);
            gridPane.getRowConstraints().add(con);
        }

        root.getChildren().add(gridPane);

        Scene scene = new Scene(root);
        stage.setScene(scene);
        stage.show();

    }

    public static void main(String[] args) {
        launch();
    }
} 
```

这种方法的问题在于 - 据我所知 - 没有简单的方法来获取 GridPane 中的数量行，也没有简单的方法可以将相同`RowConstraint`的行添加到`GridPane`. 这使得代码相当混乱。但是您可以通过例如创建自己的 GridPane 子类来跟踪大小来解决这个问题。

在上面的示例中，我们设置了行的首选项高度，但如果您不知道每个标签需要多少空间，您也可以使用 .setPercentHeight(double)。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-08-13T13:35:28.010

```
GridPane gp = new GridPane();
gp.add(" ",2, 2); 
```

# php - php5脚本升级——foreach里面的foreach

> ID：11934047
> 
> 赞同：0
> 
> 时间：2012-08-13T12:10:13.137
> 
> 标签：php, foreach

我正在尝试将脚本从 PHP4 升级到 PHP5，但我遇到了 foreach 问题。我在网上查看过，但找不到任何适合我的脚本的东西。

基本上，问题在于无法识别`$filmid`第 9 行和第 13 行，并且数组返回空。`$event['venueID']`我可以通过分配值来使其工作，`$filmid`但`$event['venueID']`显然这完全违背了这一点。

所以基本上，我怎样才能重写这些让我的脚本工作？if($event['titleID'] == $filmid){ 和 if($venue['venueID'] == $event['venueID']){

这是我正在使用的数据：

```
<listing>
<venueList>
<venue venueID="vxappfil">
</venue>
</venueList>
<titleList>
<title titleID="txgrewhi3">
<titleName>The Great White Silence</titleName>
</title> 
</titleList>
<eventList>
<event titleID="txgrewhi3" venueID="vxappfil">
<startDate>03/08/2012</startDate>
<endDate>09/08/2012</endDate>
<times>Sun 19:00</times>
</event>
</eventList>
</listing> 
```

以下是代码：

```
foreach ($thisweeksxml->titleList->title as $title) {
    $filmid = $title['titleID'];
    ......

    $thiweekscinemasnamesarray = array();
    foreach ($thisweeksxml->eventList->event as $event) { 

        if($event['titleID'] == $filmid ){

            foreach ($thisweeksxml->venueList->venue as $venue) {

                if($venue['venueID'] == $event['venueID']){

                    $cityname = strtolower(str_replace ($removeChars, "", $venue->venueAddress->town));
                    $venuname = strtolower(str_replace ($removeChars, "", $venue->venueName));
                    $thiweekscinemasnamesarray[] = ("- <a href='/cinema/".$cityname."-".$venuname.".html'><font size='-2' style='line-height:15pt'>".$venue->venueAddress->town.", ".$venue->venueName."</font></a>");

                }

            }   

        }

    }

    sort($thiweekscinemasnamesarray);
    foreach($thiweekscinemasnamesarray as $lastweek){

    $bodycontent .="".$lastweek."<br>";

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:30:37.927

你在最后一个 foreach 循环中缺少一个 }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:30:49.170

这里没有足够的信息可以处理，但我猜你作为数组访问的变量实际上是对象。

因此，我建议更改：

```
$event['titleID'] 
```

进入

```
$event->titleID 
```

如果这行得通，那就太好了。如果它不起作用，那么您需要`$thisweeksxml`通过提供`var_dump($thisweeksxml)`or的输出来向我们展示更多关于 的结构`print_r($thisweeksxml)`。（将其编辑为原始问题）

# visual-studio - Microsoft Access 2010 托管代码加载项 – 应用程序挂起

> ID：11934052
> 
> 赞同：0
> 
> 时间：2012-08-13T12:10:47.693
> 
> 标签：visual-studio, ms-access, add-in

我知道我以前有过这种情况，但我不记得如何解决它。

我构建了一个托管代码加载项，除了一件事之外它工作得很好。当我尝试关闭 Access 应用程序时，应用程序窗口仍然存在，除非我结束它的任务。当我使用 Visual Studio 2010 调试加载项时，它会在我停止调试时正常关闭。

作为断开连接事件的一部分，我将所有变量设置为空。

```
Public Sub OnDisconnection(ByVal RemoveMode As Extensibility.ext_DisconnectMode, ByRef custom As System.Array) Implements Extensibility.IDTExtensibility2.OnDisconnection
    'On Error Resume Next
    If Not MenuCommandControls Is Nothing Then MenuCommandControls.Delete()
    If Not MenuCommandDimensionVariable Is Nothing Then MenuCommandDimensionVariable.Delete()
    If Not MenuCommandFields Is Nothing Then MenuCommandFields.Delete()
    If Not MenuCommandForms Is Nothing Then MenuCommandForms.Delete()
    If Not MenuCommandParseSQL Is Nothing Then MenuCommandParseSQL.Delete()
    If Not MenuCommandQueries Is Nothing Then MenuCommandQueries.Delete()
    If Not MenuCommandReports Is Nothing Then MenuCommandReports.Delete()
    If Not MenuCommandTables Is Nothing Then MenuCommandTables.Delete()
    If Not MenuCommandVariables Is Nothing Then MenuCommandVariables.Delete()
    If Not searchForm Is Nothing Then searchForm.Close() : searchForm = Nothing
    If Not ObjectSetting Is Nothing Then ObjectSetting = Nothing
    If Not AccessInst Is Nothing Then AccessInst = Nothing
    If Not addInInstance Is Nothing Then addInInstance = Nothing
    'If Not FormParseSQL Is Nothing Then FormParseSQL = Nothing
    applicationObject.Quit(Access.AcQuitOption.acQuitPrompt)
    If Not applicationObject Is Nothing Then applicationObject = Nothing

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:21:09.107

将 x 作为可选整数添加到子例程

创建一个退出应用程序按钮并设置 x=1 调用您的子例程，并将可选 x 值传递给它。放置 application.quit 命令

在子程序的底部，如果 x=1 则 application.quit。

通过退出应用程序按钮调用 ONdisconnect 子程序。

禁用所有其他退出应用程序的方法。

简单，简单且实用。

这样，当发生断开连接或关闭应用程序时，Ondisconnect 将起作用。

# jsf - 从独立部署的战争中访问 jar 中的 EJB3 bean（未打包在 ear 中）

> ID：11934057
> 
> 赞同：7
> 
> 时间：2012-08-13T12:10:58.347
> 
> 标签：jsf, ejb-3.0

由于某些原因，我想将我的应用程序部署为两个独立的工件：**Users-ejb.jar**和**Users-war.war**，它们没有打包在同一个**耳朵**中（但仍然部署在*同一个*JBoss AS 7.1 实例中）。在**Users-war.war 中**，我有一个支持 bean（注释为 JSF 托管 bean），我希望在其中注入一个打包在**Users-ejb.jar**中的 EJB3 。**当单独部署Users-ejb.jar**和**Users-war.war**时，当所有东西都打包在一个**耳朵**中时，简单的**@EJB**注入不再起作用。

 ******我的设置的一个缩小的简化示例如下：

**EJB3 豆**

```
import javax.ejb.*;

(...)

@Stateless(name="userFacade")
@Local(IUserFacadeLocal.class)
@Remote(IUserFacadeRemote.class)
public class UserFacade extends AbstractFacade<User> implements IUserFacadeLocal, IUserFacadeRemote { 
```

**支持豆**

```
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.ejb.EJB;

import entities.User;
import facades.IUserFacadeRemote;
import facades.IUserFacadeLocal;

@ManagedBean(name="indexBackingBean")
@SessionScoped
public class IndexBackingBean implements Serializable {

    @EJB(beanName="userFacade")
    private IUserFacadeLocal userFacade; 
```

我尝试了各种组合，例如将支持 bean 中的 EJB3 bean 的类型声明为 IUserFacadeRemote（而不是 IUserFacadeLocal），但是当部署**Users-war.war**模块时，它们都失败并出现相同的异常：

```
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException:
JBAS014543: No EJB found with interface of type 'facades.IUserFacadeLocal' and
 name 'userFacade' for binding controllers.IndexBackingBean/userFacade 
```

**Users-ejb.jar**被部署到 JBoss AS 7.1 没有任何抱怨，但是当部署**Users-war.war**时，JBoss 抱怨它找不到他应该注入的 bean。

但是，我可以使用 JNDI 获取对 EJB3 bean 的引用：

```
String jndiName = "java:global/Users-ejb/userFacade!facades.IUserFacadeRemote";
this.userFacade = (IUserFacadeRemote) new InitialContext().lookup(jndiName); 
```

尽管如此，@EJB 注入似乎不起作用。

**更新：** 我遵循了[汤姆安德森](https://stackoverflow.com/users/116639/tom-anderson)下面给出的建议，并且有效的注射是：

```
@EJB(mappedName = "java:global/Users-ejb/userFacade!facades.IUserFacadeRemote") 
```

如果我理解正确，它使用供应商特定的 mappedName 属性。我无法让注入以独立于供应商的方式工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T13:32:32.163

我希望我对 EE 规范的这个领域有足够的了解，可以给你一个明确的答案，但我没有。

[JBoss EJB 文档](http://docs.jboss.org/ejb3/docs/reference/1.0.7/html/EJB_Ref_Resolution.html)有这样的说法：

> *   @EJB 注释也有一个 mappedName() 属性。规范将其保留为供应商特定的元数据，但 JBoss 将 mappedName() 识别为您正在引用的 EJB 的全局 JNDI 名称。如果您指定了 mappedName()，那么所有其他属性都将被忽略，并且此全局 JNDI 名称用于绑定。
> *   如果您指定 @EJB 且未定义任何属性 [...] 则适用以下规则：
>     *   在引用 bean 的 EJB jar 中搜索带有接口的 EJB，用于@EJB 注入。如果有多个 EJB 发布相同的业务接口，则会引发异常。如果只有一个具有该接口的 bean，则使用该接口。
>     *   在 EAR 中搜索发布该接口的 EJB。如果有重复，则抛出异常。否则返回匹配的 bean。
>     *   在 JBoss 中全局搜索该接口的 EJB。同样，如果重复，则会引发异常。
> *   @EJB.beanName() 对应于 . 如果定义了 beanName()，则使用与 @EJB 相同的算法，除了在搜索中使用 beanName() 作为键之外没有定义任何属性。如果您使用 ejb-link '#' 语法，则此规则有一个例外。'#' 语法允许您在 EAR 中放置您引用的 EJB 所在的 jar 的相对路径。有关更多详细信息，请参阅规范

“在 JBoss 中全局搜索该接口的 EJB”当然表明您编写的注入应该可以工作。确实，它应该在没有`beanName`. 但是，我怀疑从 WAR 中的组件的角度来看，EJB-JAR 中的组件是远程的，因此您将需要使用远程接口。

所以，我要尝试的第一件事是：

```
@EJB
private IUserFacadeRemote userFacade; 
```

没有`beanName`, 以防万一惹麻烦。不过，听起来你已经尝试过了。

如果正常的注入方法不起作用，我可能会转而尝试通过 a 进行注入`mappedName`，在 JBoss 中它是一个全局 JNDI 名称。所以：

```
@EJB(mappedName = "java:global/Users-ejb/userFacade!facades.IUserFacadeRemote")
private IUserFacadeRemote userFacade; 
```

这显然是相当丑陋的。

无论如何，祝你好运！

**编辑**：您可以尝试的其他方法是使用`beanName`明确命名 EJB-JAR 的合格亲戚：

```
@EJB(beanName = "Users-ejb.jar#userFacade")
private IUserFacadeRemote userFacade; 
```

由于 WAR 和 EJB-JAR 未打包在 EAR 中，因此可能需要：

```
@EJB(beanName = "../Users-ejb.jar#userFacade")
private IUserFacadeRemote userFacade; 
```

但到目前为止，我只是猜测。

**编辑反击**：我们可能忽略了一些非常简单的事情。注释的[`lookup`](http://docs.oracle.com/javaee/6/api/javax/ejb/EJB.html#lookup%28%29)属性`@EJB`允许您指定“包含目标 EJB 组件的 JNDI 名称的可移植查找字符串”，因此：

```
@EJB(lookup = "java:global/Users-ejb/userFacade!facades.IUserFacadeRemote")
private IUserFacadeRemote userFacade; 
```

可能会奏效。这本质上是 JBoss 特定使用的可移植版本`mappedName`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-24T20:29:30.700

我一直在 Wildfly 中测试这个场景，发现如果战争内部有一个指向 ejb 的 jboss-deployment-structure.xml，它将与上述本地接口一起工作。否则会抛出 ClassNotFoundException，因为由于 JBoss 和 Wildfly 中的模块化类加载，上述战争无法真正“了解” ejbs 类。该文件的内容应为：

```
<jboss-deployment-structure>
    <deployment>
        <dependencies>
            <module name="deployment.Users-ejb.jar" />
        </dependencies>
    </deployment>
</jboss-deployment-structure> 
```

然后 JSF bean 可以使用：

```
@EJB(lookup = "java:global/Users-ejb/userFacade!facades.IUserFacadeRemote")
private IUserFacadeLocal userFacade; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-08T15:49:46.503

正如@TomAnderson 所说，实现跨工件查找的标准方法是注释的[`lookup`属性。](http://docs.oracle.com/javaee/6/api/javax/ejb/EJB.html#lookup%28%29)`@EJB`

这是一个完整的 Maven 项目来说明它是如何工作的：
[https ://github.com/mrts/remote-ejb-injection](https://github.com/mrts/remote-ejb-injection)

您不需要使用`name`EJB 类的属性，只要在查找中提供类名就足够了。引用上面的例子：

```
// in API JAR
@Remote
public interface HelloService { ... }

// in EJB JAR
@Stateless
public class HelloServiceImpl implements HelloService { ... }

// in WAR
@WebServlet("/hello")
public class HelloServlet extends HttpServlet {

    @EJB(lookup = "java:global/service-ear/service-ejb-impl/HelloServiceImpl!" +
                  "ee.mrts.service.HelloService")
    private HelloService helloService;

    ...
} 
```

（因此，`HelloServiceImpl`直接在`lookup`Just Works™ 中使用。）******

# javascript - 使用 MiniProfiler 分析 JavaScript 代码

> ID：11934063
> 
> 赞同：3
> 
> 时间：2012-08-13T12:11:24.850
> 
> 标签：javascript, mvc-mini-profiler

MiniProfiler 可以记录 Ajax 调用并显示时间细目。

是否也可以在我的 JavaScript 代码中添加自定义步骤？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-23T12:16:00.853

[您可以使用Razor](http://en.wikipedia.org/wiki/Microsoft_ASP.NET_Razor_view_engine)视图`TimeScript`中的命令来计时客户端脚本执行时间。

[Sample.MVC](https://github.com/MiniProfiler/dotnet/blob/master/Sample.Mvc/Views/Shared/_Layout.cshtml#L13)中的示例：

```
<head>
  @this.InitClientTimings()
  @this.TimeScript("jQuery 2.0.3", @<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js" type="text/javascript"></script>)

  @using (profiler.Step("<head> rendering"))
  {
    <title>@ViewBag.Title - MVC MiniProfiler Demo</title>
    @(this.TimeScript("Our CSS", @<link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />))
    @RenderSection("head", required:false)
  }
</head> 
```

这里正在计时加载 jQuery 和 CSS 脚本所花费的时间。您当然可以使用此函数注入任何客户端代码。

# python - Python 中的 Inteviewstreet 中位数。除第一个测试用例外，其他所有测试用例均失败

> ID：11934064
> 
> 赞同：2
> 
> 时间：2012-08-13T12:11:28.377
> 
> 标签：python, algorithm, priority-queue, median

所以我写了这段代码，它通过了第一个测试用例，其余的都失败了。但是，我似乎找不到破坏它的输入。也许是因为我一直盯着代码太久了，但我会很感激任何帮助。该算法对当前列表的最小和最大一半使用两个优先级队列。这是代码：

```
#!/bin/python
import heapq

def fix(minset, maxset):
    if len(maxset) > len(minset):
        item = heapq.heappop(maxset)
        heapq.heappush(minset, -item)
    elif len(minset) > (len(maxset) + 1):
        item = heapq.heappop(minset)
        heapq.heappush(maxset, -item)

N = int(raw_input())

s = []
x = []

for i in range(0, N):

        tmp = raw_input()
        a, b = [xx for xx in tmp.split(' ')]
        s.append(a)
        x.append(int(b))

minset = []
maxset = []

for i in range(0, N):
    wrong = False
    if s[i] == "a":
        if len(minset) == 0:
            heapq.heappush(minset,-x[i])
        else:
            if x[i] > minset[0]:
                heapq.heappush(maxset, x[i])
            else:
                heapq.heappush(minset, -x[i])
        fix(minset, maxset)
    elif s[i] == "r":
        if -x[i] in minset:
            minset.remove(-x[i])
            heapq.heapify(minset)
        elif x[i] in maxset:
            maxset.remove(x[i])
            heapq.heapify(maxset)
        else:
            wrong = True
        fix(minset, maxset)
    if len(minset) == 0 and len(maxset) == 0:
        wrong = True

    if wrong == False:
        #Calculate median
        if len(minset) > len(maxset):
            item = - minset[0]
            print int(item)
        else:
            item = ((-float(minset[0])) + float(maxset[0])) / 2
            if item.is_integer():
                print int(item)
                continue
            out =  str(item)
            out.rstrip('0')
            print out
    else:
        print "Wrong!" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T05:13:06.930

您的原件不太清晰，所以首先我使它面向对象： `MedianHeapq`支持方法`rebalance(), add(), remove(), size(), median()`。我们非常想`minset,maxset`从客户端代码中隐藏成员，出于各种合理的原因：防止客户端交换它们，修改它们等。如果客户端需要看到它们，你只需编写一个访问器。我们还添加了一种`__str__()`方法，我们将使用该方法进行可视化调试，让您的生活更轻松。

还添加了易读性更改以避免`[i]`到处索引，将`s,x`数组重命名为`op,val`，在 上添加提示，`raw_input()`在输入阶段拒绝无效操作。你对中位数的实际计算让我感到困惑（你什么时候想要浮点数，什么时候是整数？这`rstrip('0')`有点古怪），所以我重写了它，如果你想要别的东西就改变它。该算法的讨论是[here](https://stackoverflow.com/questions/2579912/how-do-i-find-the-median-of-numbers-in-linear-time-using-heaps)。

现在它清晰易读且独立。也使它可测试。您可能在代码中出现符号错误，我不知道，我稍后再看。接下来，我们将希望通过编写一些 PyUnit 测试用例来自动化它。doctest 也是一种可能。待定。

好的，我想我看到了关于定位中位数的草率的错误。请记住，minset 和 maxset 的大小不匹配可能为 +/-1。因此，请更加注意中位数的确切位置。

```
#!/bin/python
import heapq    

class MedianHeapq(object):
    def __init__(self):
        self.minset = []
        self.maxset = []        
    def rebalance(self):
        size_imbalance = len(self.maxset) - len(self.minset)
        if len(self.maxset) > len(self.minset):
        #if size_imbalance > 0:
            item = heapq.heappop(self.maxset)
            heapq.heappush(self.minset, -item)
        #elif size_imbalance < -1:
        elif len(self.minset) > (len(self.maxset) + 1):
            item = heapq.heappop(self.minset)
            heapq.heappush(self.maxset, -item)
    def add(self, value, verbose=False):
        if len(self.minset) == 0:
            heapq.heappush(self.minset,-value)
        else:
            if value > self.minset[0]:
                heapq.heappush(self.maxset, value)
            else:
                heapq.heappush(self.minset, -value)
        self.rebalance()
        if verbose: print self.__str__()
        return False
    def remove(self,value,verbose=False):
        wrong = False
        if -value in self.minset:
            minset.remove(-value)
            heapq.heapify(self.minset)
        elif value in maxset:
            maxset.remove(value)
            heapq.heapify(self.maxset)
        else:
            wrong = True
        self.rebalance()
        if verbose: print self.__str__()
        return wrong
    def size(self):
        return len(self.minset)+len(self.maxset)
    def median(self):
        if len(self.minset) > len(self.maxset):
            item = - self.minset[0]
            return int(item)
        else:
            item = (-self.minset[0] + self.maxset[0]) / 2.0
            # Can't understand the intent of your code here: int, string or float?
            if item.is_integer():
                return int(item)
            #    continue # intent???
            else:
               return item
            # The intent of this vv seems to be round floats and return '%.1f' % item ?? 
            #out =  str(item)
            #out.rstrip('0') # why can't you just int()? or // operator?
            #return out

    def __str__(self):
        return 'Median: %s Minset:%s Maxset:%s' % (self.median(), self.minset,self.maxset)

# Read size and elements from stdin
N = int(raw_input('Size of heap? '))
op = []
val = []
while(len(val)<N):
        tmp = raw_input('a/r value : ')
        op_, val_ = tmp.split(' ')
        if op_ not in ['a','r']: # reject invalid ops
            print 'First argument (operation) must be a:Add or r:Remove! '
            continue
        op.append(op_)
        val.append(int(val_))

mhq = MedianHeapq()
for op_,val_ in zip(op,val): # use zip to avoid indexing with [i] everywhere
    wrong = False
    if op_ == 'a':
        wrong = mhq.add(val_)
    elif op_ == 'r':
        wrong = mhq.remove(val_)

    assert (mhq.size()>0), 'Heap has zero size!'

    assert (not wrong), 'Heap structure is wrong!'

    if not wrong:
        print mhq.__str__() 
```

# jquery - 展开/折叠适用于 Chrome 而不是 Firefox

> ID：11934069
> 
> 赞同：0
> 
> 时间：2012-08-13T12:12:03.907
> 
> 标签：jquery, css, twitter-bootstrap, overflow, collapse

如下图所示，或者如果您进入[此处](http://staging.openingdesign.com/projects/968)，“+/-”按钮会展开和折叠树状结构。它在 Chrome 中运行良好，但在 Firefox 中，它会展开“一次”，但再次单击时，不会再次折叠。我已经走到了尽头，想知道是否有其他人可以对正在发生的事情提出建议。

![在此处输入图像描述](../Images/ba2f625a9c4a793c3cdd443afaa2e04d.png)

![在此处输入图像描述](../Images/e922fa4ea6a152e95b22971d177e399c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:29:19.337

如果您在 Chrome 中按 F12（或使用 FireBug 的 firefox），它会在启动以获取 XML（可能是树节点）时发出 401 授权要求。我认为这是某个地方的权限问题...

```
You need to sign in or sign up before continuing. 
```

这是我在访问您提供的演示站点时获得的信息的转储 - 这会响起任何铃声吗？

```
UT http://staging.openingdesign.com/nodes/969

401 Authorization Required
        138ms   
application.js (line 18)
HeadersPutResponseXMLCookies
Response Headers
Cache-Control   no-cache
Connection  Keep-Alive
Content-Length  49
Content-Type    */*; charset=utf-8
Date    Mon, 13 Aug 2012 12:25:57 GMT
Keep-Alive  timeout=15, max=93
Server  Apache/2.2.14 (Ubuntu)
Set-Cookie  odr_beta_warning_shown=shown; path=/; expires=Mon, 13-Aug-2012 12:45:57 GMT
Status  401
X-Powered-By    Phusion Passenger (mod_rails/mod_rack) 3.0.12
X-Rack-Cache    invalidate, pass
X-Request-Id    98169a97e591bd9cf29bb5354d4e5add
X-Runtime   0.005322
X-UA-Compatible IE=Edge,chrome=1
Request Headers
Accept  */*
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Connection  keep-alive
Content-Length  14
Content-Type    application/x-www-form-urlencoded; charset=UTF-8
Cookie  _session_id=098df30db9704129db27ceff7162f922; odr_beta_warning_shown=shown; __utma=19439846.1590375237.1344860690.1344860690.1344860690.1; __utmb=19439846.2.10.1344860690; __utmc=19439846; __utmz=19439846.1344860690.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)
Host    staging.openingdesign.com
Referer http://staging.openingdesign.com/projects/968
User-Agent  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1
X-CSRF-Token    F1OPfrWs/qvFL3+zq/46x3GVn9cs1m+2YeEyQmBzvAY=
X-Requested-With    XMLHttpRequest 
```

可能与网络服务器不自动接受 PUT 请求有关吗？

# php - 使用相同的用户名将两个表链接在一起

> ID：11934070
> 
> 赞同：0
> 
> 时间：2012-08-13T12:12:05.773
> 
> 标签：php, mysql, forms

我有两张表 USERS 和 CASH_FLOW_PLAN

我想从当前登录用户的 USERS 表中继承用户名，并将其用作 CASH_FLOW_PLAN 表的主键，这样就可以打印来自 CASH_FLOW_PLAN 的信息，将其带到新页面......等等...因此，例如，我已经登录并被重定向到一个名为 cash-flow-plan.php 的页面，然后我在其中输入一堆工资信息和数字，这些信息和数字与当前登录的用户一起存储在 CASH_FLOW_PLAN 表中用户名。

我有一个会话延续到每一页

```
function startSession(){
  global $database;  //The database connection
  session_start();   //Tell PHP to start the session

  /* Determine if user is logged in */
  $this->logged_in = $this->checkLogin();

  /**
   * Set guest value to users not logged in, and update
   * active guests table accordingly.
   */
  if(!$this->logged_in){
     $this->username = $_SESSION['username'] = GUEST_NAME;
     $this->userlevel = GUEST_LEVEL;
     $database->addActiveGuest($_SERVER['REMOTE_ADDR'], $this->time);
  }
  /* Update users last active timestamp */
  else{
     $database->addActiveUser($this->username, $this->time);
  }

  /* Remove inactive visitors from database */
  $database->removeInactiveUsers();
  $database->removeInactiveGuests();   

  /* Set current url */
  $this->url = $_SESSION['url'] = $_SERVER['PHP_SELF'];
 } 
```

# security - 如何使用 tomcat 7 使用盐密码 sha-1 对用户进行身份验证

> ID：11934071
> 
> 赞同：0
> 
> 时间：2012-08-13T12:12:05.400
> 
> 标签：security, tomcat, tomcat7, jdbcrealm, saltedhash

我尝试使用 tomcat 7.0.x 配置 datasourceRealm，并将用户身份验证数据存储在数据库中的两列中，一列带有盐，另一列带有哈希。我不知道如何使用密码列配置 DataSourceRealm 以及如何验证用户。如果问题看起来有点混乱，我是新手对不起。我想用这个现有的数据库验证用户的东西。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:50:52.393

不支持开箱即用。您需要为此实现一个自定义领域。

# android - 从 CookieManager android 中选择性地删除 cookie

> ID：11934074
> 
> 赞同：2
> 
> 时间：2012-08-13T12:12:15.640
> 
> 标签：android, cookies

应用程序中的所有 web 视图都将使用相同的 cookie 管理器。所以我想做一些事情，比如只删除一组特定的 Cookie，但不是全部。

我知道删除所有 cookie 并设置我想要的会起作用，但我不想要那样。有没有办法做到这一点？

# java - 没有数组集的 Java 实现

> ID：11934075
> 
> 赞同：17
> 
> 时间：2012-08-13T12:12:26.630
> 
> 标签：java, set

为什么 Java 提供了几种不同的类型实现，`Set`包括`HashSet`和***不***？`TreeSet` *`ArraySet`*

 ** * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-13T12:14:50.360

仅基于无特定顺序的元素数组的集合总是有 O(n) 时间进行包含检查。IMO，它不会非常有用。您什么时候*想*使用它而不是`HashSet`or `TreeSet`？

数组最有用的方面是您可以非常快速地找到具有特定*索引的元素。*当涉及到集合时，这并不是很重要。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-13T12:18:20.623

[CopyOnWriteArraySet](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArraySet.html)是一个由数组支持的集合。

这并不是特别有用，因为它的性能对于大型集合来说不是很好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-08T21:20:47.700

Android 有[android.util.ArraySet](https://developer.android.com/reference/android/util/ArraySet.html)（在 API 级别 23 中引入）和[android.util.ArrayMap](https://developer.android.com/reference/android/util/ArrayMap.html)（在 API 级别 19 中引入）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-13T12:17:48.000

实际上 Set 的具体实现没有任何意义。任何集合都存储元素并保证它们的唯一性。我不能确定，但​​听起来你想要保留元素顺序的 Set 实现。如果我正确使用`LinkedHashSet`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-13T12:18:18.733

Java 提供了多种`Collection`接口实现，以实现最佳性能。`ArrayList`在许多`List`操作上表现良好。

对于`Set`总是需要唯一性的操作，不同的实现提供了更好的性能。如果使用数组实现，则任何修改操作都必须遍历所有数组元素以检查它是否已在 Set 中。HashSet 和 TreeSet 大大简化了这个检查。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-13T12:17:31.340

该`Set`接口没有 get-by-index 方法，例如`List.get(int)`，因此建议 Set 可以具有类似数组的属性是没有用的。

最终，所有“分组”类都在底层使用数组来存储它们的元素，但这并不意味着您必须公开访问数组的方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-10T22:00:01.013

考虑[indexed-tree-map](http://code.google.com/p/indexed-tree-map/)，您将能够通过索引访问元素并获取元素的索引，同时保持排序顺序。可以将重复项作为同一键下的值放入数组中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-13T12:48:06.987

你总是可以自己实现它......现在可能只有一个非常非常有限的情况下它会有用（在这种情况下你可以使用更好的数据结构），那就是你有一个非常大的集合几乎永远不会改变，那么数组集将占用更少的内存（没有额外的指针），并且你会稍微更快地枚举整个集合......如果你保持数组排序，那么你仍然可以获得 O(lg n ) 搜索时间。

然而，这些差异纯粹是学术上的。在现实世界中，您永远不会真正想要这样的野兽*

# android - 显示从电话簿中选择的联系方式的最佳方式是什么

> ID：11934076
> 
> 赞同：0
> 
> 时间：2012-08-13T12:12:26.483
> 
> 标签：android

作为android的新人，我想征求您的专家意见，

我正在从电话簿中选择联系人，并希望显示其电话号码（用户应该选择一个，如果有的话）和电子邮件地址。

用户可以添加三个用户。

想收藏这个。（建议最好的方式。首选项、数据库或文件共享）

要求紧急回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:09:02.917

对于您的需要共享首选项最好是因为：

```
 -U are storing only one of the availabe data(which says the data is without any external relation)

   -Retrieval is easier in shared prefs than DB :) 
```

所以你可以将它用于你的场景

# qt - QAction Qt::Key_Return 快捷方式由用户在 GUI 中输入值触发

> ID：11934077
> 
> 赞同：1
> 
> 时间：2012-08-13T12:12:29.813
> 
> 标签：qt, user-interface, keyboard-shortcuts

我在将按键关联到`QAction`. 我正在映射`Enter`到这样的动作：

```
myAction->setShortcut(Qt::Key_Return); 
```

问题是`QAction`当我在 a 中输入一个值`QSpinBox`然后按时也会触发`Enter`。我期待旋转框消耗事件（所以它不会被主窗口捕获）但它不是那样工作的。

我已经看到我可以为我的快捷方式添加一个上下文，我尝试了所有值，但这并不能解决我的问题。

@Matthew 它确实在拒绝该事件：

```
case Qt::Key_Enter:
case Qt::Key_Return:
    d->edit->d_func()->control->clearUndo();
    d->interpret(d->keyboardTracking ? AlwaysEmit : EmitIfChanged);
    selectAll();
    event->ignore();
    emit editingFinished();
    return; 
```

我觉得这种行为很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:45:20.377

据我所知，`QSpinBox`默认行为确实会等到您按下`return`接受该值。从技术上讲，一旦您更改它，该值就会被设置/接受。

如果您希望更改该行为，即当您点击`return`您`QSpinBox`的值时，该值实际上已设置/接受，那么您很可能必须自己处理相关的按键事件`QSpinBox`并将其标记为已接受（即`event->accepted()`）。

否则，这听起来像它最初设计的那样工作，尽管不是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T01:32:50.480

我有完全相同的问题，只在 PyQt 和 QLineEdit

QActions 可能始终被视为菜单操作或全局操作，并且具有比 Widget 默认键更高的优先级。

我的“解决方案”是使用重要键（Return、Tab、Backspace 等）作为快捷方式创建我的操作的全局列表。

然后我连接到 QLineEdit focusInEvent 和 focusOutEvent。每次事件发生时，我都会遍历动作列表并在 focusIn 上将它们全部停用并在 focusOut 上再次激活它们。然后我将事件交给原始的焦点事件处理程序。

我真的希望有更好的解决方案。

# cakephp - Cakephp 系统范围的搜索功能

> ID：11934081
> 
> 赞同：0
> 
> 时间：2012-08-13T12:12:48.943
> 
> 标签：cakephp, search

我希望在我的系统中实现一个搜索功能，该功能允许系统范围的搜索，可以搜索每个模型。那可能吗？

我尝试过 CakeDC Search 插件，但不知何故，它只允许我在添加搜索功能的特定模型中进行搜索。此外，它似乎仅限于我在视图中添加的搜索字段，我必须继续添加这些搜索字段以启用对它们的搜索。我正在寻找的是只有一个搜索框并且能够从整个系统中检索信息的东西（例如，谷歌的基本搜索只有一个搜索字段）。

如果有人能指出我正确的方向，甚至提供有关如何做到这一点的说明，那就太好了，因为我对 Cake 还很陌生。

我正在使用 PHPMyAdmin 作为数据库和最新版本的 CakePHP。如果您需要更多信息，请告诉我，因为我不确定我需要在此处包含什么。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:30:00.407

[http://cakedc.com/downloads/view/cakephp_search_plugin](http://cakedc.com/downloads/view/cakephp_search_plugin)

该插件允许您将行为附加到您想要的任何模型，并指定它应该从中获取数据以创建搜索索引的表字段。（基本上，当您针对模型保存一些数据时，它会遍历您指定要查看的所有字段，创建要保存的数据数组，并将搜索数据保存在自己的表中，以供搜索）。

我建议试一试，因为这听起来像你所追求的。该文档提供了有关设置的详细说明。

希望能帮助到你

皮特

# scala - 如何在运行时确定 Scala 类的属性？

> ID：11934088
> 
> 赞同：3
> 
> 时间：2012-08-13T12:13:14.533
> 
> 标签：scala, reflection, runtime, introspection

我想在运行时以编程方式确定 Scala 类的所有属性。例如，对于以下 Scala 类，我想确定方法`name1`、`name3`、`name4`和`name5`是 的属性的获取器`A`：

```
class A(val name1: String, private val name2: String) {
  val name3 = ""
  var name4 = ""
  def name5 = ""
  def name6() = ""
} 
```

大部分工作都可以使用 Java 的反射 API 来完成。不幸的是，我无法检测 和 之间的`name5`区别`name6()`。因此，我开始使用 ScalaSigParser 进行下一次试验，但不幸的是，ScalaSig 的`name5`和标志`name6()`也是相同的。这是我的代码：

```
def gettersOf(clazz: Class[_]) = {
  for (ssig <- ScalaSigParser.parse(clazz))
  yield {
    ssig.symbols.toList.collect{
      case m: MethodSymbol => m
    }.filter(m => (m.symbolInfo.flags & 0xFFFFF) == 0x200)
  }
}

gettersOf(classOf[A]).get.foreach{m =>
  println(m.name + ": " + m)
} 
```

正如您在以下输出中看到的那样，两种方法仅在`info`值上有所不同：

```
name1: MethodSymbol(name1, owner=0, flags=28400200, info=22 ,None)
<init>: MethodSymbol(<init>, owner=0, flags=200, info=38 ,None)
name3: MethodSymbol(name3, owner=0, flags=8400200, info=45 ,None)
name4: MethodSymbol(name4, owner=0, flags=8000200, info=45 ,None)
name4_$eq: MethodSymbol(name4_$eq, owner=0, flags=8000200, info=54 ,None)
name5: MethodSymbol(name5, owner=0, flags=200, info=45 ,None)
name6: MethodSymbol(name6, owner=0, flags=200, info=66 ,None) 
```

但是，`info`似乎没有返回静态常量。如果您向该类添加另一个方法，则 的`info`值`name6`将发生变化，同时似乎有一些稳定性：

*   `name3`, `name4`, 并且`name5`始终具有相同的`info`值
*   `name6`并且`name5`总是有不同的`info`价值观

有人知道它的含义`info`以及如何使用它来确定它是哪种方法吗？

相关问题：

*   [Scala 如何知道“def foo”和“def foo()”之间的区别？](https://stackoverflow.com/questions/10130106/how-does-scala-know-the-difference-between-def-foo-and-def-foo)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T13:44:18.333

你最好的选择是使用即将到来的 Scala 2.10 的反射 API。

以下是在 2.10.0-M6 中获取类型属性的方法：

```
scala> import reflect.runtime.universe._
import reflect.runtime.universe._

scala> typeOf[A].members.view.filter{_.isValue}.filter{!_.isMethod}.toList
res0: List[reflect.runtime.universe.Symbol] = List(variable name4, value name3, value name2, value name1) 
```

不幸的是，还没有太多关于它的阅读材料。不过，关于 SO 有一些已回答的问题。例如，您可能对[这个问题感兴趣。](https://stackoverflow.com/questions/11586944/how-to-obtain-the-raw-datatype-of-a-parameter-of-a-field-that-is-specialized-in)另请查看Daniel Sobral 的[这篇博文。](http://dcsobral.blogspot.com/2012/07/json-serialization-with-reflection-in.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T14:28:06.380

```
import reflect.runtime.universe._
typeOf[A].members map (m => m -> m.typeSignature) collect { 
  case (m, nm: NullaryMethodType) => m 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T13:16:57.527

我终于找到了解决方案。除了使用原始`info`值之外，还可以使用更多信息`infoType`，它似乎`NullaryMethodType`为所有没有括号的方法返回 a：

```
def gettersOf(clazz: Class[_]) = {
  for (ssig <- ScalaSigParser.parse(clazz))
  yield {
    ssig.symbols.toList.collect {
      case m: MethodSymbol => m
    }.filter(m => (m.symbolInfo.flags & 0xFFFFF) == 0x200 && m.infoType.isInstanceOf[NullaryMethodType])
  }
} 
```

`name6`最后，无论有无隐藏`<init>`方法，我们都得到了想要的结果：

```
name1: MethodSymbol(name1, owner=0, flags=28400200, info=22 ,None)
name3: MethodSymbol(name3, owner=0, flags=8400200, info=45 ,None)
name4: MethodSymbol(name4, owner=0, flags=8000200, info=45 ,None)
name5: MethodSymbol(name5, owner=0, flags=200, info=45 ,None) 
```

# bash - 加入 2 个变量，每个变量指向不同的东西

> ID：11934090
> 
> 赞同：1
> 
> 时间：2012-08-13T12:13:24.773
> 
> 标签：bash, shell, variables

我想做一个“for”循环，将两个变量连接起来。这是情况

初始变量集，每个变量指向一个文件：

```
weather_sunny=/home/me/foo
weather_rainy/home/me/bar
weather_cloudy=/home/me/sth 
```

第二组变量：

```
sunny
rainy
cloudy 
```

现在，我想做这样的事情......

```
for today in sunny rainy cloudy ; do
    cat ${weather_$today}
done 
```

但我没有成功获得初始变量的内容。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T12:21:21.743

您可以很容易地获得变量的名称：

```
for today in ${!weather_*}; do
    echo cat "${!today}"
done
cat /home/me/foo
cat /home/me/bar
cat /home/me/sth 
```

但是，如果您使用的是 bash 4+，则可以为此使用关联数组。在 bash 4 中，

```
$ declare -A weather
$ weather['sunny']=/home/me/sth
$ weather['humid']=/home/me/oth
$ for today in "${!weather[@]}"; do echo "${weather[$today]}"; done
/home/me/sth
/home/me/oth 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T12:25:30.390

```
for today in sunny rainy cloudy ; do
  eval e="\$weather_$today"
  cat $e
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T12:26:05.937

引入临时变量，然后使用间接扩展（由`!`字符引入）。

```
for today in sunny rainy cloudy ; do
  tmp="weather_$today"
  cat ${!tmp}
done 
```

我不知道如何保持在一条线上。

# javascript - jQuery - 在另一个 DIV 中定位特定 DIV

> ID：11934091
> 
> 赞同：2
> 
> 时间：2012-08-13T12:13:31.000
> 
> 标签：javascript, jquery

我有一个我写的 jQuery 函数，它会滑动切换一个额外的表格行。在可点击行的末尾有一个包含按钮的单元格，但是当点击容器 div 触发该功能时，点击行中的任意位置都会导致新行展开。

我需要仅在单击按钮时触发该功能，因为可以将复选框、链接等添加到表格的其他部分。

代码：

```
 var toggleSpeed = 600;
    var expandText = "more";
    var collapseText = "less";
$(".extrainfo_container").click(function() {
       $(this).find('.extrainfo').slideToggle(toggleSpeed);
        if ($(this).find('.moreless').text() == collapseText) {
                $(this).find('.moreless').text(expandText)
        }
        else {
        $(this).find('.moreless').text(collapseText);
    }
    });  

<table>   
     <tr>
        <td>Header 1</td>
        <td>Header 2</td>
        <td>Header 3</td>
    </tr>
</table>
<div class="extrainfo_container">
    <table>   
         <tr>
            <td>Col 1</td>
            <td>Col 2</td>
            <td><div class="moreless">more</div></td>
        </tr>
        <tr>
            <td colspan="3">
                <div class="extrainfo">
                    Extra information.<p />
                    Extra information.<p />
                </div>
            </td>
        </tr>
    </table>
</div> 
```

工作示例：http: [//jsfiddle.net/E22XR/69/](http://jsfiddle.net/E22XR/69/)

我搜索了论坛，虽然我确实找到了类似的问题和答案，但没有一个对我有用。我认为我正在做一些不同的事情，和/或有更好的方法来获得相同的结果 - 我对编写自己的函数很陌生。

如果有更好的方法，则要求我不使用 ID，因为可以动态创建任意数量的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T12:18:42.807

我猜你可以做到这一点。

```
 var toggleSpeed = 600;
    var expandText = "more";
    var collapseText = "less";
$(".moreless").click(function() {
       $(".extrainfo_container").find('.extrainfo').slideToggle(toggleSpeed);
        if ($(".extrainfo_container").find('.moreless').text() == collapseText) {
                $(".extrainfo_container").find('.moreless').text(expandText)
        }
        else {
        $(".extrainfo_container").find('.moreless').text(collapseText);
    }
    }); 
```

编辑：破解多行

```
var toggleSpeed = 600;
var expandText = "more";
var collapseText = "less";
$(".moreless").click(function () {
   var detailsRow = $(this).parent().parent().next();
   detailsRow.find('.extrainfo').slideToggle(toggleSpeed);
   if ($(this).text() == collapseText)
      $(this).text(expandText);
   else
      $(this).text(collapseText);
}); 
```

# google-app-engine - 从 appengine go 调用外部服务的权限被拒绝错误

> ID：11934094
> 
> 赞同：1
> 
> 时间：2012-08-13T12:13:33.903
> 
> 标签：google-app-engine, go

当我从我的 go 代码中调用另一个 Web 服务时，我收到一个权限被拒绝的错误。

我的服务器端 go 程序上的部分处理程序代码：

```
client := http.Client{}
if resp, err := client.Get("http://api.wipmania.com/" + r.RemoteAddr); err != nil {
    c.Errorf("Error getting location from ip: %s", err.Error())
} 
```

从日志中：

```
Error getting location from ip: Get http://api.wipmania.com/30.30.30.30: permission denied 
```

[我在这里](https://stackoverflow.com/questions/1199694/ajax-error-permission-denied)看到了类似的 qn 。还是想不通。您能否告诉我执行此操作的正确方法是什么，以及是否必须在 appengine 控制台上设置任何权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:33:34.193

App Engine 应用程序可以与其他应用程序通信，并且可以通过获取 URL 来访问网络上的其他资源。应用程序可以使用[URL Fetch 服务](https://developers.google.com/appengine/docs/go/urlfetch/overview)来发出 HTTP 和 HTTPS 请求并接收响应。

尝试：

```
import (
    "fmt"
    "net/http"

    "appengine"
    "appengine/urlfetch"
)

func handler(w http.ResponseWriter, r *http.Request) {
    c := appengine.NewContext(r)
    client := urlfetch.Client(c)
    if resp, err := client.Get("http://api.wipmania.com/" + r.RemoteAddr); err != nil {
        c.Errorf("Error getting location from ip: %s", err.Error())
    }
    // ...
} 
```

# sharepoint - 在 sharepoint 中使用 (editifs.aspx?ID=4&IsDlg=1) 打开 Modal 弹出框

> ID：11934095
> 
> 赞同：2
> 
> 时间：2012-08-13T12:13:36.660
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-designer, infopath2010

我创建了一个超链接字段并提供以下列表编辑 URL。

$http://SPS2010/Lists/TestList/Item/editifs.aspx?ID=4&IsDlg=1

但是，当我单击具有上述值的超链接（editifs.aspx?ID=4&IsDlg=1）时，它只是在新页面中打开，而不是在模式弹出窗口中打开。

如果我们通常单击具有相同 URL 的列表项的编辑链接，它将在模态弹出窗口中打开。

请提出建议，我们错在哪里。

提前致谢...

问候，

卡迈勒庞迪尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:35:48.923

它并不像您希望的那样简单。请参阅有助于您了解如何打开对话框的[文章](http://blog.lekman.com/2010/06/working-with-sharepoint-2010-modal.html)。为了在新窗口中打开超链接字段链接，您必须使用 javascript 修改您的标签以启动您的 javascript 函数，而不是导航到 url。看到[这个](http://social.msdn.microsoft.com/Forums/en-US/sharepoint2010general/thread/57d259a0-5679-4b79-888b-7efc9bf94bed/#2a20f32a-1745-4117-a969-6426a6945a76)。

祝你好运。

# java - Axis2 禁用严格验证（wsdl2java 中的 -Eosv）允许什么，如何使它变得不那么严格？

> ID：11934097
> 
> 赞同：3
> 
> 时间：2012-08-13T12:13:38.377
> 
> 标签：java, axis2

我正在使用一个 SOAP 服务，`xsd:sequence`它在 a 中省略和重新排序 XML 元素，就像在`xsd:any`.

我试过`wsdl2java -Eosv`了，但生成的代码拒绝了 SOAP 响应`org.apache.axis2.AxisFault: org.apache.axis2.databinding.ADBException: Unexpected subelement`

什么类型的检查被禁用`-Eosv`？有没有可能让它变得不那么严格？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T02:01:57.667

在与 Axis 2 v1.4.1 打交道时试图理解这一点后，我最终浏览了源代码。如 WSDL2Java 页面和用法文本中所述，-E 选项被传递给数据绑定模块 - 在 -Eosv 的情况下，传递给 ADB 模块的“osv”子选项。深入研究 ADB 的代码生成，我发现 osv (OFF_STRICT_VALIDATION) 选项仅用于确定 minOccurs 时。来自 Axis 2 v1.4.1 中的 org.apache.axis2.schema.SchemaCompiler：

```
// if the strict validation off then we consider all elements have minOccurs zero on it
if (this.options.isOffStrictValidation()){
    metainfHolder.addMinOccurs(referencedQName, 0);
} else {
    metainfHolder.addMinOccurs(referencedQName, elt.getMinOccurs());
} 
```

显然，依赖源代码来实现预期行为是不明智的，因为实现会在版本之间发生变化，但到目前为止，除了模糊的声明“关闭严格”之外，我还没有找到关于 -Eosv 选项意味着什么的“官方”文档验证”。我也没有找到任何其他选择来降低它的严格性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-02T20:54:59.543

> 有没有可能让它变得不那么严格？

[https://axis.apache.org/axis2/java/core/docs/reference.html](https://axis.apache.org/axis2/java/core/docs/reference.html)

-Eiu（用于 ADB） - 忽略意外元素而不是抛出 ADBException。

在最新的 Axis2 1.7.4 中，*-Eiu*确实抑制了异常，但客户端解析的 Web 服务响应不包含所有元素。

如果您遇到类似的问题，则值得使用 JiBX 绑定而不是 ADB 创建客户端。说明在[这里](https://tutteramson.github.io/Axis2JiBXClient/)。

# javascript - 在 JavaScript (ASP.NET) 中将查询字符串传递给 Web 服务

> ID：11934098
> 
> 赞同：1
> 
> 时间：2012-08-13T12:13:52.930
> 
> 标签：javascript, asp.net, web-services, jqgrid, query-string

我在 ASP.Net 中使用 jqGrid，我正在调用 Web 服务来填充网格，我的问题是：我想将查询字符串传递给网格的 'url' 属性到 Web 服务，我该怎么做。 ..？我想做的就是以任何方式将值传递给服务......

我的 jqGrid 代码：

```
function Btt_Search_onclick() {
        SearchFilters = "1"; // Concatenate SearchFilters with , between each filter
        $("#MyGrid").setGridParam({
            url: "../Webservice/QueueManagement.asmx?" + SearchFilters + "/AllDataReport"
        }).trigger("reloadGrid");
    } 
```

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:00:49.967

我认为[这个](https://stackoverflow.com/a/1861900/237808)SO 问题/答案回答了你的问题。

基本上，您只需要设置一个查询字符串参数并在您的服务中具有相应的参数。不过，根据您格式化示例代码的方式，我不确定您到底要做什么。你不能做这样的事情：

```
url: "../Webservice/QueueManagement.asmx?filter=" + SearchFilters + "&queueName=AllDataReport" 
```

# android - 自定义微调器样式

> ID：11934103
> 
> 赞同：1
> 
> 时间：2012-08-13T12:14:20.540
> 
> 标签：android, android-layout, android-ui

如何使用 xml 样式/自定义微调器，如下所示？我可以制作带边框的白色背景，但我不能在左侧设置图标，在右侧设置箭头。

![在此处输入图像描述](../Images/c3c25a2f6c980f715be320851632036d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:44:16.320

如果您的问题在于将图标设置为左侧并将箭头设置为右侧的布局，则以下内容应该有效。

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

    <ImageView
        android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true" />

    <TextView
        android:id="@+id/name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@id/icon" />

    <ImageView
        android:id="@+id/arrow"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true" />

</RelativeLayout> 
```

我在工作，所以我无法对此进行测试，但我认为它应该可以工作。

# android - ListView如何识别和移除位置

> ID：11934107
> 
> 赞同：0
> 
> 时间：2012-08-13T12:14:36.150
> 
> 标签：android, android-arrayadapter

我扩展了ArrayAdapter，画了下图 ![在此处输入图像描述](../Images/8566645498bb55f0e16c8029291c4e7f.png)

```
public class UrlArrayAdapter extends ArrayAdapter<UrlItem> {
    private LayoutInflater inflater;
    public UrlArrayAdapter(Context context, List<UrlItem> urlLists) {
        super(context, R.layout.database_table_list, R.id.editLinearLayout1,urlLists);
        inflater = LayoutInflater.from(context);
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        UrlItem urlItem = (UrlItem) this.getItem(position);
        CheckBox checkBox = null;
        TextView textView = null;
        if (convertView == null) {
            convertView = inflater.inflate(R.layout.database_table_item, null);
            textView = (TextView) convertView.findViewById(R.id.editText1);
            checkBox = (CheckBox) convertView.findViewById(R.id.checkBox1);
            convertView.setTag(urlItem);
            checkBox.setChecked(urlItem.getUse());
            textView.setText(urlItem.getUrl());
            textView.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                }
            });
        } else {
        }
        return convertView;
    }
} 
```

**如何识别和删除我按下的位置？** setOnClickListener() - 不起作用 - 账号点击时间长

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:28:08.143

首先，在您的`getView`方法中，您的代码似乎不正确：无论您是否使用转换后的视图，您都需要设置值。代码应该是这样的：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    UrlItem urlItem = (UrlItem) this.getItem(position);
    CheckBox checkBox = null;
    TextView textView = null;
    if (convertView == null) {
        convertView = inflater.inflate(R.layout.database_table_item, null);
    }

    textView = (TextView) convertView.findViewById(R.id.editText1);
    checkBox = (CheckBox) convertView.findViewById(R.id.checkBox1);
    convertView.setTag(urlItem);
    checkBox.setChecked(urlItem.getUse());
    textView.setText(urlItem.getUrl());
} 
```

然后，要检测对单个项目的点击，不要`onClickListener`在项目上使用。相反，`setOnItemClickListener`在您的`ListView`. 你会有这样的东西：

```
final UrlArrayAdapter adapter = new UrlArrayAdapter(this, items);
ListView list = this.findViewById(R.id.my_list);
list.setAdapter(adapter);
list.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        //deal here with removing the item at position _position_
        //from your adapter, then notify the list view that the data has changed
        adapter.notifyDataSetChanged();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:30:03.210

我想这会对你有所帮助。

```
list.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int position,
            long arg3) {
        // REMOVE DATA FROM YOUR LIST ACCORDING TO POSITION.
        adapter.notifyDataSetChanged();
    }
}); 
```

如果您遇到任何问题，那么您可以询问。

# python - 在带有python的excel中，如何在包含多个单词的单元格中从整列中查找单词？

> ID：11934108
> 
> 赞同：1
> 
> 时间：2012-08-13T12:14:41.607
> 
> 标签：python, excel, list

我有一个 Excel 文件，其中包含 A 列中的关键词列表。

```
eg. Bob
    Dan
    Brian 
```

在 B 列中，我有几行在一个单元格中有多个条目：

```
B1= Bob, Grant, James, Dave
B2= Dean, Dan, Brian 
```

我如何将 C 列和 A 列和 B 列中的名称放入。即我想要一个输出：

```
C1= Bob
C2= Dan, Brian 
```

有任何想法吗？我试过使用 python 但不知道如何开始。

帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:13:20.817

它首先取决于您用来访问 Excel 的 Python 模块。如果您使用的是 Windows，我建议您使用 Win32Com，它可以在[此处找到。](http://sourceforge.net/projects/pywin32/files/pywin32/Build%20217/)该模块让 Python 以编程方式访问任何 Microsoft Office 应用程序（包括 Excel），并使用 VBA 中使用的许多相同方法。

这是使用 Win32Com for Excel 解决问题的方法。我假设您使用逗号 (',') 作为名称之间的分隔符，并且您在 A 列和 B 列之间的名称匹配区分大小写（请记住，在 Python 中“A”不等于“a”）

首先，我们要连接到 Excel 并使用您的姓名访问工作表

```
#First we need to access the module that lets us connect to Excel
import win32com.client 

# Next we want to create a variable that represents Excel
app = win32com.client.Dispatch("Excel.Application")   

# Lastly we will assume that the sheet with the names is the active sheet
sheet = app.ActiveSheet 
```

此时，我们有一个名为*sheet*的变量，它表示带有名称的活动 Excel 工作表。您只需单击任何单元格即可激活工作表。现在我们想首先获取 A 列中的所有名称并将其存储到一个列表中。我们有两种选择：

1.  我们可以遍历 A 列中的所有单元格，并将存储的名称提取为字符串，然后使用*sheet.Cells(row,col).Value 将其附加到所有名称的列表中。*这适用于较小的范围，但如果您处理 500 多行，则可能会很慢。
2.  *我们可以使用sheet.Range("A1","A3").Value*提取 A 列中包含名称的整个单元格范围， 并将值添加到列表中。如果您有大量单元格，这可能会快得多。对于此示例，我们将使用 Range。

示例继续：

```
import win32com.client
app = win32com.client.Dispatch("Excel.Application")   
sheet = app.ActiveSheet

# rang is an object representing the cells A1, A2, A3
rang = sheet.Range("A1","A3")

# names is a tuple of length 3 containing tuples of length 2
names = rang.Value

#nameLst is a list of all values in names
nameLst = [name[0] for name in names] 
```

接下来，我们要遍历 B 列中的所有名称。为此，我们将使用 sheet.Cells.Value 函数来获取 B 列中每个单元格的名称列表。我们还将使用字符串。 split(",") 函数将逗号分隔的名称拆分为名称列表， string.strip() 删除任何不必要的空格。如果此列表中的任何名称在 nameLst 中，我们知道我们有一个匹配项并将其放在 Col C 中。

```
import win32com.client
app = win32com.client.Dispatch("Excel.Application")   
sheet = app.ActiveSheet

rang = sheet.Range("A1","A3")
names = rang.Value
nameLst = [name[0] for name in names]

#Iterate over the rows ic ColB. Remember Excel uses base 1 not 0 for inexing
for rowI in range(1,3):
    cellNames = sheet.Cells(rowI,2).Value

    #split cellNames by "," and add all of the names to a list.
    cellNamesLst = [cellName.strip() for cellName in cellNames.split(",")]

    #Now we want a list of all names that are in cellNamesLst and in nameLst
    matchLst = [matchName for matchName in cellNamesLst if matchName in nameLst]

    #Create a string of all matches to go in Col C
    allMatches = ", ".join(matchLst)

    #Lastly put all matches in in Col C
    sheet.Cells(rowI,3).Value = allMatches 
```

这会将字符串“Bob”放入单元格 C1，将“Dan, Brian”放入单元格 C2。win32com 的使用非常强大，可用于自动化您在所有 MS Office 应用程序中执行的大部分操作。

这是没有注释的最终代码：

```
import win32com.client
app = win32com.client.Dispatch("Excel.Application")   
sheet = app.ActiveSheet

rang = sheet.Range("A1","A3")
names = rang.Value
nameLst = [name[0] for name in names]

for rowI in range(1,3):
    cellNames = sheet.Cells(rowI,2).Value
    cellNamesLst = [cellName.strip() for cellName in cellNames.split(",")]
    matchLst = [matchName for matchName in cellNamesLst if matchName in nameLst]
    allMatches = ", ".join(matchLst)
    sheet.Cells(rowI,3).Value = allMatches 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:38:32.317

如我所见，“列”及其“单元格”只是列表。

```
#the "columns"

A = ["Bob","Dan","Brian"]
B = [["Bob", "Grant", "James", "Dave"],\
     ["Dean", "Dan", "Brian"]]
C = []

for b in B:
    c = []
    for name in b:
        if name in A:
            c.append(name)
    C.append(c)

for c in C:
    print c

>>> 
['Bob']
['Dan', 'Brian'] 
```

您需要做的就是将每一列读入一个列表。对于 A 列，只需将项目附加为名称列表。对于 B 列，只需将每个单元格作为自己的列表附加到主列表中。

你有它。

# php - Wordpress - 如何获取所有作者（或所有用户）姓名及其相关 ID？

> ID：11934111
> 
> 赞同：1
> 
> 时间：2012-08-13T12:14:53.123
> 
> 标签：php, wordpress

目前，我正在执行以下操作以获取所有作者的列表：

```
$authors = wp_list_authors('html=0&style=none&echo=0&exclude_admin=1&optioncount=0&show_fullname=1&hide_empty=1&orderby=name&order=ASC'); 

$authors_array = explode(',', $authors);

for ($j = 0; $j < count($authors_array); $j++)
{
    echo '<li id="">'.$authors_array[$j].'</li>';
} 
```

我怎样才能得到用户的ID？

我到处寻找，我想不出一种方法来获取所有作者和另一位元数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T14:17:26.747

我发现的另一种方法是执行以下操作（发誓我之前找不到这样的东西）：

```
$authors = get_users('role=author&orderby=display_name&order=ASC');

foreach ($authors as $author) {
    if (count_user_posts($author->ID) > 0) {
       echo '<li id="' . $author->ID . '">' . $author->display_name . '</li>';
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T12:51:54.663

您可以覆盖functions.php 中的函数，也可以在原始函数的基础上创建一个新函数。查看代码很容易将 $author_id 包含在 foreach 循环中。

[原始代码在这里](http://core.trac.wordpress.org/browser/tags/3.4.1/wp-includes/author-template.php#L0)

**试试这个并确保将新参数（includeauthorid）添加到函数调用中......**

```
$authors = wp_list_authors('html=0&style=none&echo=0&exclude_admin=1&optioncount=0&show_fullname=1&hide_empty=1&orderby=name&order=ASC&includeauthorid=1'); 
```

新功能 - ps 我不建议更改原始功能。只需将其放在functions.php 中即可。

```
function wp_list_authors($args = '') {
global $wpdb;

$defaults = array(
    'orderby' => 'name', 'order' => 'ASC', 'number' => '',
    'optioncount' => false, 'exclude_admin' => true,
    'show_fullname' => false, 'hide_empty' => true,
    'feed' => '', 'feed_image' => '', 'feed_type' => '', 'echo' => true,
    'style' => 'list', 'html' => true,
    'includeauthorid' => false 
);

$args = wp_parse_args( $args, $defaults );
extract( $args, EXTR_SKIP );

$return = '';

$query_args = wp_array_slice_assoc( $args, array( 'orderby', 'order', 'number' ) );
$query_args['fields'] = 'ids';
$authors = get_users( $query_args );

$author_count = array();
foreach ( (array) $wpdb->get_results("SELECT DISTINCT post_author, COUNT(ID) AS count FROM $wpdb->posts WHERE post_type = 'post' AND " . get_private_posts_cap_sql( 'post' ) . " GROUP BY post_author") as $row )
    $author_count[$row->post_author] = $row->count;

foreach ( $authors as $author_id ) {
    $author = get_userdata( $author_id );

    if ( $exclude_admin && 'admin' == $author->display_name )
        continue;

    $posts = isset( $author_count[$author->ID] ) ? $author_count[$author->ID] : 0;

    if ( !$posts && $hide_empty )
        continue;

    $link = '';

    if ( $show_fullname && $author->first_name && $author->last_name )
        $name = "$author->first_name $author->last_name";
    else
        $name = $author->display_name;

    if( $includeauthorid)
        $name .= ' ('. $author_id .')';

    if ( !$html ) {
        $return .= $name . ', ';

        continue; // No need to go further to process HTML.
    }

    if ( 'list' == $style ) {
        $return .= '<li>';
    }

    $link = '<a href="' . get_author_posts_url( $author->ID, $author->user_nicename ) . '" title="' . esc_attr( sprintf(__("Posts by %s"), $author->display_name) ) . '">' . $name . '</a>';

    if ( !empty( $feed_image ) || !empty( $feed ) ) {
        $link .= ' ';
        if ( empty( $feed_image ) ) {
            $link .= '(';
        }

        $link .= '<a href="' . get_author_feed_link( $author->ID ) . '"';

        $alt = $title = '';
        if ( !empty( $feed ) ) {
            $title = ' title="' . esc_attr( $feed ) . '"';
            $alt = ' alt="' . esc_attr( $feed ) . '"';
            $name = $feed;
            $link .= $title;
        }

        $link .= '>';

        if ( !empty( $feed_image ) )
            $link .= '<img src="' . esc_url( $feed_image ) . '" style="border: none;"' . $alt . $title . ' />';
        else
            $link .= $name;

        $link .= '</a>';

        if ( empty( $feed_image ) )
            $link .= ')';
    }

    if ( $optioncount )
        $link .= ' ('. $posts . ')';

    $return .= $link;
    $return .= ( 'list' == $style ) ? '</li>' : ', ';
}

$return = rtrim($return, ', ');

if ( !$echo )
    return $return;

echo $return; 
```

}

# java - 在 Java 中使用 Content-Type = "application/x-www-form-urlencoded" 处理 SOAP 请求

> ID：11934114
> 
> 赞同：1
> 
> 时间：2012-08-13T12:15:01.670
> 
> 标签：java, soap, jax-ws

我有一个 SOAP 客户端通过其 Content-Type 定义为 application/x-www-form-urlencoded 的请求发送。我的 jax-ws 服务器响应 HTTP 415 错误，抱怨它需要 text/xml 的内容类型。

显然这个客户端不能被改变所以我试图找出是否有强制我的服务器接受这个内容类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:51:41.360

Tichodrama 是对的。客户不是肥皂客户。而是通过 HTTP POST 发送 xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-04T19:55:45.767

我正在处理同样的问题，最后我不得不添加一个 servlet，它接受定义为 application/x-www-form-urlencoded 的 Content-Type，并且在内部这个 servlet 调用了所有的 SOAP 逻辑。

# php - 如何获取范围内的数组元素

> ID：11934115
> 
> 赞同：-1
> 
> 时间：2012-08-13T12:15:02.927
> 
> 标签：php, arrays

我试图让数组元素在一个范围内，但没有这样做。下面解释一下。

```
$date_array = array('2012-08-02','2012-08-09','2012-08-16','2012-08-23');
$start_date = '2012-08-01';
$end_date   = '2012-08-10'; 
```

我想从 $start_date 和 $end_date 中的 $date_array 中获取数组元素。即，输出将是：2012-08-02 和 2012-08-09。

**编辑：**

数组也可以是以下。

```
$date_array = array('2012-08-02','2012-08-10','2012-08-16','2012-08-23'); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T12:19:02.807

您可以使用[`array_filter`^(*Docs*)](http://php.net/array_filter)和满足您需求的回调来做到这一点：

```
$filter = function($start, $end) {
    return function($string) use ($start, $end) {
        return $string >= $start && $string <= $end;
    };
};

$result = array_filter($array, $filter('2012-08-01', '2012-08-10')); 
```

注意参数的顺序，以及你有这些确切的格式，因为只有那些可以通过简单的字符串比较来完成。

* * *

对于 PHP 5.2 的兼容性以及为迭代器而不仅仅是数组解决这个问题，这里有一个更通用的方法：

```
class Range
{
    private $from;
    private $to;
    public function __construct($from, $to) {
        $this->from = $from;
        $this->to = $to;
        if ($from > $to) {
            $this->reverse();
        }
    }
    private function reverse() {
        list($this->from, $this->to) = array($this->to, $this->from);
    }
    public function in($value) {
        return $this->from <= $value && $value <= $this->to;
    }
}

class RangeFilter extends FilterIterator
{
    private $range;
    public function __construct(Iterator $iterator, Range $range) {
        $this->range = $range;
        parent::__construct($iterator);
    }

    public function accept()
    {
        $value = $this->getInnerIterator()->current();
        return $this->range->in($value);
    }
}

$range = new Range($start, $end);
$it = new ArrayIterator($array);
$filtered = new RangeFilter($it, $range);
$result = iterator_to_array($filtered); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:04:22.473

这很容易：

首先将日期字符串转换为时间戳以获取整数。
接下来和可选的，您可以对它们进行排序。
最后再走一遍日期（现在是整数）并收集你想要的日期范围。
这样做时，您可以将整数重新转换为旧的日期格式。

就这样。
不超过 10 行代码。

好的，有些人想要一个例子。这里是：

```
// create a bunch of unsortable random dates-trash
$dates = array();
for($i = 0; $i < 100; $i ++)
    $dates[] = date('Y-m-d', rand(1000, time()));

// first transform it to timestamp integers
// if strtotime don't makes it, you have to transform your datesformat
// as one more pre-step
foreach($dates as $k => $v)
    $dates[$k] = strtotime($v);

// now and optional sort that (now finest) stuff
sort($dates);

// at last get the range of dates back
$datesInRange = array();
$dateStart = strtotime('1998-06-27');
$dateEnd = strtotime('2010-4-20');
foreach($dates as $date)
    if($date >= $dateStart AND $date <= $dateEnd)
        $datesInRange[] = date('Y-m-d', $date);

// have a look at the result
echo implode(',<br />', $datesInRange); 
```

# cordova - PhoneGap/Cordova 应用程序的自动化测试

> ID：11934125
> 
> 赞同：19
> 
> 时间：2012-08-13T12:16:10.280
> 
> 标签：cordova, automated-tests

如果我想对 PhoneGap 应用程序执行自动化测试（目前仅在 iOS 上），我有哪些选项（如果有）？

Selenium 本来是我的第一个电话，但是[您可以将 Selenium 与 phonegap 应用程序一起使用吗？](https://stackoverflow.com/questions/11847344/can-you-use-selenium-with-a-phonegap-application)表明这是不可能的。看起来有一个 iPhone 驱动程序可以在 iOS 上运行 Selenium，但没有说明如何使其与 PhoneGap 交互。旧的 PhoneGap wiki[似乎暗示](http://phonegap.pbworks.com/w/page/36886195/Automated%20TestCases%20for%20PhoneGap)这是可能的，但并没有真正说明如何。

我还研究过将 Jasmine 与 Jasmine-jQuery 插件一起使用，但它需要复制应用程序 HTML（以及保持两者同步的开销等）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-09-06T00:43:31.717

最近，我们添加了一个关于如何使用开源测试框架[Appium](http://appium.io)测试 PhoneGap/Cordova 应用程序的示例。

请参考[https://github.com/appium/appium/blob/master/test/functional/webview/gappium.js](https://github.com/appium/appium/blob/master/test/functional/webview/gappium.js)

Appium 基本上将 PhoneGap/Cordova 应用程序视为混合应用程序（嵌入式 web 视图）。您将能够使用 Selenium Webdriver JSON Wire Protocol 自动化您的测试，该协议具有适用于所有流行平台（Python、Ruby、Java、C#、Obj-c 等）的特定语言绑定。甚至可以在任何给定时间将上下文从本机应用程序切换到 web 视图（例如，如果您想更改设备的方向）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T18:34:41.973

目前无法将 Selenium/WebDriver 与 PhoneGap/Cordova Android 一起使用。我们确实曾在某个版本的 WebDriver 上运行过此功能，但我一直无法让当前版本的 WebDriver 客户端与自定义 WebViews 一起工作，例如 Cordova/PhoneGap Android 所基于的 CordovaWebView。我们仍在试图弄清楚如何让新代码与自定义 Web 视图很好地配合使用，因为到目前为止还没有这方面的文档。

所以，遗憾的是，这个问题的答案是“还没有，但我们正在尝试”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T08:55:18.693

我的解决方案是[QUnit](http://qunitjs.com/)。我在“js”文件夹中创建了一个“tests”文件夹，并在那里提取了所有 QUnit 文件。为了运行我的测试，我启动了 QUnit 使用的 html 页面。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T06:52:48.530

我已经修改了当前的 iPhone webdrive 代码以使用它来测试 phonegap 之类的应用程序。我把我的代码放在这里：[https](https://code.google.com/p/selenium-uiwebview/) ://code.google.com/p/selenium-uiwebview/ 我说phonegap LIKE application cause Phonegap只是充当桥梁的原因。我在实现中所做的是创建了我自己的更简单的桥梁。但是您可以简单地将相同的代码与 phonegap 一起使用，因为我曾帮助我的一位朋友这样做。只需使用最新版本，因为我们在使用旧 XCode 版本时遇到了一些问题。我在项目主页上给出了详细的描述。让我知道它是如何工作的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-21T21:20:24.447

您可能会从这个 phonegap 本身的持续集成设置中得到一些提示

[https://github.com/filmaj/medic](https://github.com/filmaj/medic)

这些是上一个项目执行的测试。只需将整个项目放在 phonegap 项目 www 文件夹中

[https://github.com/apache/incubator-cordova-mobile-spec](https://github.com/apache/incubator-cordova-mobile-spec)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T12:03:49.447

您可以使用[Telerik 的 iOS 测试工作室](http://www.telerik.com/automated-testing-tools/ios-testing/ios-application-testing.aspx)——我们支持 PhoneGap 应用程序！（披露：我是 Test Studio 系列产品的传播者。）[App Store](http://itunes.apple.com/us/app/test-studio/id523796105?mt=8)中有一个免费应用程序，可为您提供录制和播放风格测试，如果您愿意，我们还提供 API 驱动程序框架级测试。（该 API 目前处于测试阶段。如果您有兴趣，我很乐意为您提供访问权限。）

# r - 哪个函数/包用于鲁棒线性回归与 glmulti 一起工作（即，表现得像 glm）？

> ID：11934128
> 
> 赞同：5
> 
> 时间：2012-08-13T12:16:27.543
> 
> 标签：r, glm, robust

# *背景：使用glmulti*进行多模型推理

 *[*glmulti*](http://www.jstatsoft.org/v34/i12/paper)是一个 R 函数/包，用于通用线性模型的自动模型选择，它在给定因变量和一组预测变量的情况下构建所有可能的通用线性模型，通过经典[*glm*](http://stat.ethz.ch/R-manual/R-patched/library/stats/html/glm.html)函数拟合它们，然后允许进行多模型推理（例如，使用从 AICc、BIC 派生的模型权重）。*glmulti在理论上也可以与任何其他函数一起使用，该函数以与**glm*相同的格式返回系数、模型的对数似然和自由参数的数量（可能还有其他信息？）。

# 我的目标：具有鲁棒错误的多模型推理

我想使用*glmulti*对定量因变量的误差进行稳健建模，以防止异常值的影响。

例如，我可以假设线性模型中的误差分布为[t 分布](http://en.wikipedia.org/wiki/Student%27s_t-distribution)而不是正态分布。使用其峰度参数，t 分布可以有重尾，因此对异常值更稳健（与正态分布相比）。

但是，我并不致力于使用 t 分布方法。我对任何能够返回对数似然的方法感到满意，因此可以与*glmulti*中的多模型方法一起使用。但这意味着，不幸的是，我不能使用 R 中众所周知的稳健线性模型（例如，来自*robustbase的*[lmRob](http://cran.r-project.org/web/packages/robust/)或来自 robustbase 的*lmrob* [）](http://cran.r-project.org/web/packages/robustbase/)，因为它们不在对数似然框架下运行，因此无法与*glmulti*一起使用。

# 问题：我找不到适用于*glmulti的稳健回归函数*

发现在对数似然框架下运行的唯一稳健的 RI 线性回归函数是*heavyLm*（来自[重](http://cran.r-project.org/web/packages/heavy/index.html)包）；它在分布时对错误进行建模。不幸的是，*heavyLm*不适用于*glmulti*（至少不是开箱即用的），因为它没有用于*loglik*的 S3 方法（可能还有其他东西）。

为了显示：

```
library(glmulti)
library(heavy) 
```

使用数据集*stackloss*

```
head(stackloss) 
```

正则高斯线性模型：

```
summary(glm(stack.loss ~ ., data = stackloss)) 
```

使用*glm*的默认高斯链接函数使用*glmulti*进行多模型推理

 *```
stackloss.glmulti <- glmulti(stack.loss ~ ., data = stackloss, level=1, crit=bic)
print(stackloss.glmulti)
plot(stackloss.glmulti) 
```

具有 t 分布误差的线性模型（默认为 df=4）

```
summary(heavyLm(stack.loss ~ ., data = stackloss)) 
```

*glmulti*调用*heavyLm*作为拟合函数的多模型推理

```
stackloss.heavyLm.glmulti <- glmulti(stack.loss ~ .,
 data = stackloss, level=1, crit=bic, fitfunction=heavyLm) 
```

给出以下错误：

```
 Initialization...
    Error in UseMethod("logLik") :
    no applicable method for 'logLik' applied to an object of class "heavyLm". 
```

如果我定义以下函数，

```
logLik.heavyLm <- function(x){x$logLik} 
```

glmulti 可以得到对数似然，但随后发生下一个错误：

```
 Initialization...
    Error in .jcall(molly, "V", "supplyErrorDF", 
    as.integer(attr(logLik(fitfunc(as.formula(paste(y,  : 
    method supplyErrorDF with signature ([I)V not found 
```

# 问题：鲁棒线性回归的哪个函数/包适用于 glmulti（即，表现得像 glm）？

可能有一种方法可以定义进一步的函数来让*heavyLm*与*glmulti*一起工作，但在开始这段旅程之前，我想问一下是否有人

*   知道一个健壮的线性回归函数，它 (a) 在对数似然框架下运行，并且 (b) 行为类似于*glm*（因此可以开箱即用地使用*glmulti*）。
*   得到了*heavyLm*已经在使用*glmulti*。

很感谢任何形式的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-06T10:43:43.907**

# php - 像 PHP 中的子域一样重写 URL

> ID：11934129
> 
> 赞同：0
> 
> 时间：2012-08-13T12:16:27.980
> 
> 标签：php, apache, .htaccess, url-rewriting

我想像子域样式一样重写 url。

例如，如果主 url 是 mysite.com/test 比我想重写它像 test.mysite.com

**mysite.com/test => test.mysite.com**

你能建议我在 .htaccess 文件中添加什么重写规则吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T12:25:45.737

```
RewriteCond %{HTTP_HOST} ^mysite.com$ [NC]
RewriteRule ^(.+)$ http://$1.mysite.com [L,R=301] 
```

应该这样做，可能需要一些调整

# c# - 通用显式强制转换失败 C#

> ID：11934134
> 
> 赞同：8
> 
> 时间：2012-08-13T12:16:37.177
> 
> 标签：c#, generics, casting, explicit

我对以下代码有一些问题。我想为一个对象显式一个字符串，这工作得很好，但是，如果这个对象是一个泛型类的一部分，这将失败并出现以下错误异常：“无法转换类型为'System.String'的对象输入'test.B'”。即使我已经重载了该方法。

```
using System;
using System.Collections.Generic;

namespace test {
    class Program {
        static void Main(string [] args) {
            // These two cast perfectly fine.
            B x = (B) "abc";
            C y = (C) "def";

            A <B> a = new A<B>();
            a.b();
            A <C> b = new A<C>();
            b.b();
        }
    }

    class A<T> {
        public List <T> a = new List<T>();

        public void b() {
            // Unable to cast object of type 'System.String' to type 'test.B'
            this.a.Add ((T) (object) "abc"); 
            this.a.Add ((T) (object) "def");
            this.a.Add ((T) (object) "ghi");
        }
    }

    class B {
        public string b;

        public static explicit operator B(string a) {
            B x = new B();
            x.b = a;
            return x;
        }
    }

    class C {
        public string c;

        public static explicit operator C(string a) {
            C x = new C();
            x.c = a;
            return x;
        }
    }
} 
```

如果有人能向我解释为什么这不是正确的投射，那就太棒了。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-13T12:19:44.187

转换运算符仅适用于静态已知类型的情况；毕竟，泛型方法需要对每个方法都使用**完全相同的 IL**`T` - 因此在某些情况下它不能调用您的运算符，而在其他情况下则不能调用类型检查。

此外，由于您已**明确**转换为`object`，因此**永远不会**使用它；强制转换`object`始终*是*简单的拆箱或类型检查。

一个邪恶的解决方法是（我不喜欢这样）：

```
 this.a.Add((T)(dynamic)"abc");
        this.a.Add((T)(dynamic)"def");
        this.a.Add((T)(dynamic)"ghi"); 
```

它将解决方案推迟到运行时。它有效，但在那之后我需要洗眼睛。不过，更一般地说：运算符和泛型*不能很好地发挥作用*- 所以：尽量不要在您的 API 中使用这种组合。我个人***真的***不会使用上述内容！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T12:20:49.897

如果泛型参数具有您正在使用的显式转换，编译器在编译时不知道。

您可以引入接口，并对泛型参数施加约束

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T12:42:28.613

你插入了 (object) cast 来让编译器停止告诉你你做错了。这行得通，编译器不再抱怨，因为这阻止了它检查类型。并且从 object 到 T 的转换实际上可能会起作用，只要几率很小。

但是，您没有想到的是显式转换运算符是 C# 语言功能。只有编译器知道在应用这种强制转换时要执行什么方法。它*不是*CLR 功能，运行时不会去寻找和收集来尝试找到适用的方法来进行转换。C# 编译器无法使用您在编译时提供的任何运算符，它不知道 T 的类型。

麻烦的是，当强制转换执行时，编译器不再提供帮助。卡布姆。

Having generic types applied at runtime instead of compile time is a .NET feature, the generic term is "reified generics". As opposed to "type erasure", the way generics are implemented in Java and C++. The trouble with type erasure is that all info about the generic type arguments are lost after code is compiled, a generic type can't be used by another language and Reflection doesn't work. The trouble with reified generics is that operations that cannot be universally applied to any type cannot be used. Like operator+(). And like this cast.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T12:19:08.167

这是因为`T`for`A<T>`不知道`B`or的显式转换运算符`C`。

# ajax - Zend 表单验证 + ajax

> ID：11934136
> 
> 赞同：1
> 
> 时间：2012-08-13T12:16:55.010
> 
> 标签：ajax, forms, zend-framework, zend-validate

我目前正在发布 Zend Form Validation 和 Ajax 的问题。我正在使用此方法加载要在 div 容器中显示的表单：

```
$('#' + windowId).load('transfer/format/html/id/' + number); 
```

和传输控制器：

```
if ($this->_request->isXmlHttpRequest()) {
} 
```

一切都很好，表单已成功加载到我想要的 div 容器中，但是当我尝试验证它时，它会调用普通视图，我只得到一个表单，没有前一页包装器。任何人都知道如何验证该表格并将其保存在同一个窗口中？

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T09:31:06.707

你能领导这样的事情。您必须确定要如何处理表单。如果通过 Ajax - 下面的示例。

```
<?php
class TestController
extends Zend_Controller_Action
{

    function indexAction() {

    }

    // render form
    function getFormAction() {

        $form = new Zend_Form();
        $form->addElement('hidden', 'isSubmit', array(
            'value' => 1
        ));
        $form->addElement('text','foo', array(
            'required' => true
        ));
        $form->addElement('submit','Send', array(
            'label' => 'ok'
        ));

        // $data
        if( $_POST['isSubmit'] && $form->isValid($_POST)) {
            // ...............
        }

        if( $this->_request->isXmlHttpRequest() ) {
            // render only ajax content in layout-content.phtml
            $this->_helper->layout->setLayout('layout-content');
        } else {
            // render full page elements
            $this->_helper->layout->setLayout('layout-default');
        }

        $this->view->form = $form;

    }
} 
```

模板：

```
<!-- index.phtml     -->
<div id="form-wrapper"></div>

<script type="text/javascript">
<!--
    $(function() {
        $("#form-wrapper").load( "<?= $this->url( array('action'=>'get-form') ) ?>");
    });
//-->   
</script>
<!-- index.phtml     --> 
```

和

```
 <!-- get-form.phtml  -->
<?php 
if( $this->form ) {
    $this->form->setAttrib('id', 'my-form');
    $this->form->setAction( $this->url() );
    echo $this->form; 
}
?>

<script type="text/javascript">
<!--
$(function() {
    $('#my-form').submit( function() {
        var f = $(this);

        $.post(
            f.attr('action'), 
            f.serialize(), 
            function(data) { 
                $('#form-wrapper').html(data);
            }       
        );

        return false;
    }); 
});
//-->
</script>
<!-- /get-form.phtml     --> 
```

迎接帕韦拉

# magento - Magento : 获取所有运费

> ID：11934138
> 
> 赞同：3
> 
> 时间：2012-08-13T12:17:15.797
> 
> 标签：magento

如何获得带有 magento 运费的数组/对象，例如统一费率、免费送货等？

与所选地址或产品无关。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-10T00:51:35.657

这是另一种方式。您需要设置邮编和国家 - 即使这对您的运输方式无关紧要。

```
// Change to your postcode / country.
$zipcode = '2000';
$country = 'AU';

// Update the cart's quote.
$cart = Mage::getSingleton('checkout/cart');
$address = $cart->getQuote()->getShippingAddress();
$address->setCountryId($country)
        ->setPostcode($zipcode)
        ->setCollectShippingrates(true);
$cart->save();

// Find if our shipping has been included.
$rates = $address->collectShippingRates()
                 ->getGroupedAllShippingRates();

foreach ($rates as $carrier) {
    foreach ($carrier as $rate) {
        print_r($rate->getData());
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T12:40:47.890

您不能这样做“无关紧要”，因为您需要设置地址数据（账单或运输，如果只有账单，然后运输设置与账单相同：国家、邮编、地区取决于您的运输方式）并报价至少有一个简单的项目（引用现有的、虚拟的和可下载的产品不需要运输）。之后，您可以调用您的报价对象

```
$quote->getShippingAddress()->getGroupedAllShippingRates(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T14:03:55.950

我想到了...

```
 $carriers = Mage::getStoreConfig('carriers', Mage::app()->getStore()->getId());
foreach ($carriers as $carrierCode => $carrierConfig) {
print_R($carrierConfig);
} 
```

谢谢您的帮助

# c# - RDP 上的串行端口 COM 端口

> ID：11934140
> 
> 赞同：3
> 
> 时间：2012-08-13T12:17:18.987
> 
> 标签：c#, serial-port

我尝试连接到可在 Virtual COM Port X 上访问的 USB 设备。一切正常（本地）。现在我正在使用 RDP（远程桌面）会话并尝试连接到我的设备，但没有得到任何响应。RDP COM 端口重定向已激活。如果我运行：

```
SerialPort.GetPortNames() 
```

在我的 RDP 会话中，我将获得正确的端口（在我的情况下为 COM 端口 9）。然后我尝试连接：

```
_port.Open();
_port.Write(buffer, offset, count); 
```

我可以看到我的设备（连接在我的无 RDP 会话主机上）检索了一些字节（LED 闪烁），但我从未得到任何响应/结果。

如果我在本地尝试，一切正常。

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T12:21:31.483

您能否确认您是否连接到目标 PC 上的设备，而不是从您打开远程桌面的 PC？

本地设置：Target_PC -> USB_Device = Works

远程设置：Other_PC -RDP-> Target_PC -> USB_Device = 应该可以

# jquery - jQuery Mobile 底部有一个意想不到的动画

> ID：11934146
> 
> 赞同：0
> 
> 时间：2012-08-13T12:18:04.617
> 
> 标签：jquery, jquery-mobile, jquery-animate

我没有做任何事情来让它用 LOADING 这个词来动画屏幕，但是当我在屏幕上向上滑动手指时，我得到了一个底部工具栏/页脚，它显示了这个词：

> 加载

这是我的代码，您将在那里看不到任何显示加载的内容。

JS文件

```
$(document).bind("mobileinit", function(){
    //$.mobile.pushStateEnabled = true;
    //$.mobile.hidePageLoadingMsg();
});

        $(function(){

            var menuStatus;
            $("#content").animate({
                    marginLeft: "165px",
                  }, 300, function(){menuStatus = true});

            // Show menu
            $("a.showMenu").click(function(){
                if(menuStatus != true){             
                $(".ui-page-active").animate({
                    marginLeft: "165px",
                  }, 300, function(){menuStatus = true});
                  return false;
                  } else {
                    $(".ui-page-active").animate({
                    marginLeft: "0px",
                  }, 300, function(){menuStatus = false});
                    return false;
                  }
            });

            $('#menu, #content').live("swipeleft", function(){
                if (menuStatus){    
                $("#content").animate({
                    marginLeft: "0px",
                  }, 300, function(){menuStatus = false});
                  }
            });

            $('#content').live("swiperight", function(){
                if (!menuStatus){   
                $("#content").animate({
                    marginLeft: "165px",
                  }, 300, function(){menuStatus = true});
                  }
            });

}); 
```

HTML 文件

```
<!DOCTYPE html> 
<html> 
    <head> 
    <title>SITE</title> 
    <link rel="stylesheet" href="css/main.css" />
    <script type="text/javascript" src="js/jquery-1.6.4.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>
    <script type="text/javascript" src="js/jmobile-animate.js"></script>
    <script type="text/javascript" src="js/app.js"></script>
    <script type="text/javascript" src="cordova-2.0.0.js"></script>
</head> 

<body>
<div id="menu">
    <ul>
        <li class="active"><a href="#home" class="contentLink">Dashboard <span class="icon"></span></a></li>
        <li><a href="#page1" class="contentLink">Subpage 1 <span class="icon"></span></a></li>
        <li><a href="#page2" class="contentLink">Subpage 2 <span class="icon"></span></a></li>
        <li><a href="#page3" class="contentLink">Subpage 3 <span class="icon"></span></a></li>
    </ul>
</div>

<div id="content">
    <div class="hbg"><img src="images/small-logo.png" style="display:block;margin:2px auto 0 auto;"/></div>
</div>

</body>

<div data-role="footer" id="footer"> 
    <h4>&copy; 2012 SITE</h4> 
</div> 
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T01:18:52.933

代替

```
<script type="text/javascript" src="js/jquery-1.6.4.min.js"></script>
<script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script> 
```

和

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.0.js"></script>
<script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:41:58.233

我看到你已经包含了 jquery mobile js。所以我假设你确实需要一些 jquery mobile 功能，尽管我在你的代码中没有看到任何 jquery mobile 特定属性，如`data-role="page",data-role="content`“等。除了 jquery mobile js，你必须包括 jquery移动 css 也是。您看到的“正在加载”文本来自 jquery 移动加载消息 div。它最初通过 css 隐藏，并`$.mobile.showPageLoadingMsg(`在调用 )时显示

在加载 main.css 之前添加这一行

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" /> 
```

或者，如果您不需要 jquery mobile 功能，您可以删除 jquery mobile js 的 script 标签。

刚刚注意到您的代码中的另一件事。页脚 div 在正文标记之外。如果这是无意的，请将其添加到正文标记中。

# qt - CMake 标志指向错误的 Qt 版本

> ID：11934147
> 
> 赞同：0
> 
> 时间：2012-08-13T12:18:10.997
> 
> 标签：qt, cmake

像 QT_QTGUI_LIBRARY 和 QT_USE_FILE 这样的标志正在返回到旧版本 Qt 的路径，即使我`FIND_PACKAGE(Qt4 4.8.2 REQUIRED)`在顶部也是如此。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:24:58.193

删除构建目录中的 CMakeCache.txt 并再次生成。有时有必要更新 CMakeCache.txt，尤其是当您升级您在项目中使用的某些侧面库时。

# jquery - 使用 cakephp 2.x 和 jquery 的 Ajax

> ID：11934153
> 
> 赞同：0
> 
> 时间：2012-08-13T12:18:28.727
> 
> 标签：jquery, ajax, cakephp

我一直在寻找两天多的时间来寻找这个问题的答案，但一点运气都没有。我试图将 ajax 与 jquery 和 cakephp 一起使用。我正在使用这个 jquery 函数：

```
$("#pais").change(function(){ 

$.ajax({ data: "id=" + document.getElementById('pais').value, 
         type: "GET", 
         url: "http://localhost/facebook/Countries/getTeam/", 
         success: function(data){ 
             $('#cuadro').show();
             pais();
        } 
    }); 
}); 
```

我需要为我的控制器功能“getteam（$id = null）”发送1个值，但是当我用firebug检查我实际发送的内容时，我可以看到它广告“？id = 4”，我需要像/controller这样的东西/行动/身份证。

你怎么用jquery得到这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T12:30:43.460

不确定我是否误解了您的要求，但它不会像以下那样简单：

```
$("#pais").change(function(){ 

    $.ajax({
        type: "GET", 
        url: "http://localhost/facebook/Countries/getTeam/" + document.getElementById('pais').value, 
        success: function(data){ 
            $('#cuadro').show();
            pais();
        } 
    }); 
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T12:30:58.020

您需要手动构建 url，如下所示

```
$.ajax({ type: "GET", 
         url: "http://localhost/facebook/Countries/getTeam/"+document.getElementById('pais').value, 
         success: function(data){ 
             $('#cuadro').show();
             pais();
        } 
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T12:32:33.250

尝试将您的 id 附加到 URL 字符串上，而不是在数据参数中传递任何内容。像这样：

```
$("#pais").change(function(){ 

    $.ajax({ 
         type: "GET", 
         url: "http://localhost/facebook/Countries/getTeam/"+document.getElementById('pais').value, 
         success: function(data){ 
             $('#cuadro').show();
             pais();
        } 
    }); 
}); 
```

# java - 通过单击铅笔调用监听器（primefaces 2.2.1 rowEditor）

> ID：11934156
> 
> 赞同：5
> 
> 时间：2012-08-13T12:18:33.350
> 
> 标签：java, html, jsf-2, primefaces

在 rowEditor 上单击铅笔后如何调用侦听器？我想从 dataTable 准备文本进行编辑（清除标签和回车的 html 标签）。你有什么想法？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T10:24:27.727

Actually,there is no event for pencil in datatable.If you want to call listener after pencil click,you can do like that.Wrap rowEditor into commandLink.I did and it works.

```
<p:commandLink id="rowEditLink" action="#{teamMB.initCombo}" ajax="true"
                        update=":formContent:teamTable>

      <p:rowEditor />
 </p:commandLink > 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-28T18:26:21.590

*这不适用于版本 2.2.1，但它仍然可以与其他版本相关*

2 岁的问题，但它是谷歌的顶级搜索结果之一。

有一种方法可以在不使用的情况下做到这一点`<p:commandLink>`

Primefaces[用户指南](http://primefaces.googlecode.com/files/primefaces_users_guide_4_0_edtn2.pdf)第 154 页讨论了 ajax 事件。有三个感兴趣的事件`rowEdit, rowEditInit, rowEditCancel`。

`rowEditInit`是在行切换到编辑模式 `rowEditCancel`时触发的事件 是在取消行编辑时触发的事件

所以你的代码应该是这样的

```
<p:ajax event="rowEditInit" listener="#{tableBean.onEditInitCleanUp}" update="@form"> 
```

然后你的听众会做适当的清理。

# javascript - 扩展如何读取注册表

> ID：11934159
> 
> 赞同：1
> 
> 时间：2012-08-13T12:18:48.670
> 
> 标签：javascript, firefox, firefox-addon, registry

我想从扩展的 javascript 中读取窗口注册表值。对于 Internet Explorer，我们可以使用 ActiveXObject。但不知道如何在 Firefox 情况下读取注册表。

请帮帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T12:32:14.290

[`nsIWindowsRegKey`界面](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIWindowsRegKey)是你的朋友。 [使用 XPCOM 访问 Windows 注册表](https://developer.mozilla.org/en-US/docs/Accessing_the_Windows_Registry_Using_XPCOM)有一些示例，例如：

```
var wrk = Components.classes["@mozilla.org/windows-registry-key;1"]
                    .createInstance(Components.interfaces.nsIWindowsRegKey);
wrk.open(wrk.ROOT_KEY_LOCAL_MACHINE,
         "SOFTWARE\\Microsoft\\Windows\\CurrentVersion",
         wrk.ACCESS_READ);
var id = wrk.readStringValue("ProductId");
wrk.close(); 
```

# css - 在菜单中隐藏父级而不是子级

> ID：11934163
> 
> 赞同：0
> 
> 时间：2012-08-13T12:19:04.243
> 
> 标签：css, drop-down-menu, show-hide

我需要一种隐藏父母`<li>`但保持孩子`<ul>`可见的方法。

例如，我有以下代码：

```
<li class="toplevel">Link
  <ul>
     <li class="secondlevel">Link</li>
  </ul>
<li> 
```

基本上，我希望隐藏顶级类，但可见二级类。现在我知道我可以用 css 做到这一点：

```
visibility:hidden / visibility:visible 
```

但这保留了隐藏类的高度和宽度。我需要使用的更像是：

```
display:none / display:inline 
```

但是，当然，这不起作用，因为孩子没有出现，也没有办法让它重新出现。

除了使用可见性隐藏父级但保留子级以使隐藏的父级没有高度/宽度之外，还有其他方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T12:21:24.890

`parent`隐藏和显示它是不可能的`children`。

您可以将要隐藏的顶级链接放入一些内联标记中：

```
<li class="toplevel"><span>Link</span>
    <ul>
        <li class="secondlevel">Link</li>
    </ul>
</li> 
```

然后，`display:none`为这个标签设置：

```
li > span { display: none } 
```

# ajax - Ajax 正在更新裁剪图像上的所有属性，因此在没有裁剪尺寸的情况下重新处理图像

> ID：11934169
> 
> 赞同：0
> 
> 时间：2012-08-13T12:19:24.890
> 
> 标签：ajax, activerecord, ruby-on-rails-3.2, carrierwave, jcrop

我正在使用carrierwave 和Jcrop 裁剪图像。保存图像的模型被调用`Item`，存储图像的字段被调用`cover`。

种植工作进展顺利。问题与为项目投票的 ajax 动作有关。

每个项目都有一个名为 的字段`votes`。我在项目顶部有一个按钮，单击该按钮时会`votes`按增量将值加 1。如果我不使用 ajax 操作，它会正确更新记录，不会造成任何伤害。但是，如果我使用 ajax 操作，它会使用新属性更新 Item 记录中的所有字段，这些属性将裁剪图像的尺寸更改为几乎为零，然后触发 after_update 回调来重新处理图像。

结果是我得到了一个 1px x 1px 并且完全白色的图像。

如何将我的 ajax 操作更改为不发生这种情况？

谢谢

```
 def vote
    item = Item.find(params[:item_id])
    item.increment!(:votes)

    if request.xhr?
      render json: {votes: item.votes}
    else
      redirect_to users_url
    end
  end

jQuery ($) ->
  $('form.vote').submit (evt) ->
    evt.preventDefault()

    $form = $ @
    $form.find(':submit').prop 'disabled', true
    $.post($form.attr('action'), $form.serializeArray(), type: 'json').done (data) ->
      $form.parent().find(".vote_count").text data.votes 
```

并作为参考项目模型：

```
class Item < ActiveRecord::Base
  before_create :update_image_attributes
  before_update :reprocess_image, :if => :cropping?

  belongs_to :user

  attr_accessible :available, :cover, :privacy, :size, :title, :votes, :user_id, :description, :crop_x, :crop_y, :crop_w, :crop_h

  mount_uploader :cover, CoverUploader

  def cropping?
    !crop_x.blank? && !crop_y.blank? && !crop_w.blank? && !crop_h.blank?
  end

  private

  def update_image_attributes
    if cover.present?
      self.content_type = cover.file.content_type
      self.file_size = cover.file.size
      self.width, self.height = `identify -format "%wx%h" #{cover.file.path}`.split(/x/)
    end
  end

  def reprocess_image
      cover.reprocess(crop_x, crop_y, crop_w, crop_h)
      cover.cache_stored_file!
  end

end 
```

和控制器

```
class ItemsController < ApplicationController
      before_filter :authenticate

      def crop
        @item = Item.find(params[:image_id])
        @user = User.find(params[:user_id])
        respond_to do |format|
          if @item.update_attributes(:crop_x => params[:crop_x],:crop_y => params[:crop_y],:crop_w => params[:crop_w],:crop_h => params[:crop_h])
            format.html { redirect_to items_url }
            format.js
          else
            redirect_to root_url
          end
        end
      end

      # GET /items
      # GET /items.json
      def index
        @items = Item.all

        respond_to do |format|
          format.html # index.html.erb
          format.json { render json: @items }
        end
      end

      # GET /items/1
      # GET /items/1.json
      def show
        @item = Item.find(params[:id])

        respond_to do |format|
          format.html # show.html.erb
          format.json { render json: @item }
        end
      end

      # GET /items/new
      # GET /items/new.json
      def new
        @item = Item.new

        respond_to do |format|
          format.html # new.html.erb
          format.json { render json: @item }
        end
      end

      # GET /items/1/edit
      def edit
        @item = Item.find(params[:id])
      end

      # POST /items
      # POST /items.json
      def create
        @item = Item.create(params[:item])
        respond_to do |format|
          if @item.save
            format.html { redirect_to items_url }
            format.js
          else
            format.html { render action: "new" }
            format.json { render json: @item.errors, status: :unprocessable_entity }
          end
        end
      end

      # PUT /items/1
      # PUT /items/1.json
      def update
        @item = Item.find(params[:id])
        respond_to do |format|
          if @item.update_attributes(params[:item])
            format.html { redirect_to @item, notice: 'Item was successfully updated.' }
            format.json { head :no_content }
          else
            format.html { render action: "edit" }
            format.json { render json: @item.errors, status: :unprocessable_entity }
          end
        end
      end

      # DELETE /items/1
      # DELETE /items/1.json
      def destroy
        @item = Item.find(params[:id])
        @item.destroy

        respond_to do |format|
          format.html { redirect_to items_url }
          format.json { head :no_content }
        end
      end

      private

      def authenticate
        if current_user.nil?
          redirect_to root_path, :alert => "You must first log in to access this page"
        end
      end
    end 
```

更新 - 提交日志

```
Started POST "/vote" for 127.0.0.1 at 2012-08-15 23:28:03 +0200
Processing by VotesController#vote as */*
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"uVxsVGsXImC2VPsavIjZfIUMnGmlyjYEmubI8oODgdk=", "item_id"=>"107", "user_id"=>"1"}
  Category Load (0.2ms)  SELECT "categories".* FROM "categories" 
  Color Load (0.1ms)  SELECT "colors".* FROM "colors" 
  User Load (0.1ms)  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", "1"]]
   (0.1ms)  begin transaction
  SQL (9.2ms)  INSERT INTO "votes" ("created_at", "item_id", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", Wed, 15 Aug 2012 21:28:03 UTC +00:00], ["item_id", 107], ["updated_at", Wed, 15 Aug 2012 21:28:03 UTC +00:00], ["user_id", 1]]
   (3.1ms)  commit transaction
  Item Load (0.3ms)  SELECT "items".* FROM "items" WHERE "items"."id" = ? LIMIT 1  [["id", 107]]
   (0.0ms)  begin transaction
   (0.4ms)  UPDATE "items" SET "votes" = 1, "updated_at" = '2012-08-15 21:28:03.656131' WHERE "items"."id" = 107
   (23.2ms)  commit transaction 
```

# ruby-on-rails-3 - Rails 3 在 text_field 中用 & 替换 &

> ID：11934171
> 
> 赞同：5
> 
> 时间：2012-08-13T12:19:27.530
> 
> 标签：ruby-on-rails-3, html-escape-characters

我正在使用 Rails 3。当用户提交带有 text_field 的表单并在其中输入 & 时，表单会得到验证。当它无效时，Rails 会返回一个错误，然后我会显示给用户。但现在 & 被翻译成`&amp;`. 我怎样才能改变这种行为？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T18:05:23.023

我找到了罪魁祸首。我正在将我的输入发送到一个 sanitizer 方法，该方法用`&amp;`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T01:03:25.290

也许尝试“风险字符串”.html_safe

# iphone - 为什么gamekit自动匹配总是超时

> ID：11934178
> 
> 赞同：4
> 
> 时间：2012-08-13T12:19:43.683
> 
> 标签：iphone, objective-c, ios, gamekit

我是一名新手 iOS 开发人员，目前正在开发一款棋盘游戏。我想集成 UIGameKit，但我遇到了麻烦。好像总是无法自动匹配，邀请好友...

我确实检查了构建包 ID，并且我已经在 iTunes Connect 中启用了 gc，但仍然没有运气。当我在设备或模拟器上单击“立即播放”时，在超时之前什么都不会发生。当我单击“邀请朋友”时，它也会失败并显示以下错误消息：

```
ERROR: {
    GKServerStatusCode = 5008;
    NSLocalizedDescription = "The requested operation could not be completed due to an error communicating with the server.";
    NSUnderlyingError = "Error Domain=GKServerErrorDomain Code=5008 \"The operation couldn\U2019t be completed. status = 5008, missing required key: self-push-token\" UserInfo=0xae53360 {GKServerStatusCode=5008, NSLocalizedFailureReason=status = 5008, missing required key: self-push-token}"; 
```

我不明白我缺少什么游戏套件所需的密钥？错误消息要求的自推送令牌是什么？

（**编者注：**不要认为下面的代码是相关的，无论如何都会离开这里）

```
GKMatchRequest* request = [[GKMatchRequest alloc] init];
request.minPlayers = 2;
request.maxPlayers = 2;

GKMatchmakerViewController* hostVC = [[[GKMatchmakerViewController alloc] initWithMatchRequest:request] autorelease];
if (hostVC != nil)
{
    hostVC.matchmakerDelegate = self;
    [self presentViewController:hostVC];
} 
```

有什么帮助吗？我试图找到一些好的示例来构建一个简单的游戏套件自动匹配应用程序，但没有任何运气，有人对我有建议吗？

# objective-c - 为什么 UINavigaionController 的子类调用 Default Constructor 和 Custom Constructor？

> ID：11934180
> 
> 赞同：2
> 
> 时间：2012-08-13T12:20:00.540
> 
> 标签：objective-c, ios, cocoa-touch, uikit

```
 @implementation NVController
//Plain Init method
-(id)init
{

    self=[super init];
    if(self)
    {
    }
    return self;
}

//CustomInit Method
-(id)initWithRootViewController:(UIViewController *)rootViewController
{

    self=[super initWithRootViewController:rootViewController];
    if(self)`enter code here`
    {
    }
    return self;
}

@end

NVController *instance=[[NVController alloc] initWithRootViewController:nil]; 
```

在上述情况下，由于我只调用`initWithRootViwController`，因此还调用了另一个构造函数`init`。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T12:24:08.467

我猜`initWithRootViewController:`是这样实现的：

```
-(id)initWithRootViewController:(UIViewController *)rootViewController
{
    self=[self init];
    if(self)
    {
        // do something with rootViewController
    }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T12:25:47.637

发生这种情况是因为您没有正确实现初始化程序。

在 Objective C 中有一个*指定初始化器*的概念，它是类的一个`init`函数，所有其他初始化器都必须调用它。是直接调用的指定初始化器`[super init]`；所有其他初始化程序都需要`[super init]`通过调用指定的初始化程序来间接调用。

在您的特定情况下，您需要将您的`init`和共有的代码`initWithRootViewController:`（如果有）移动到`initWithRootViewController:`初始化程序中，并按`init`如下方式重写普通代码：

```
-(id)init {
    return [self initWithRootViewController:nil];
} 
```

** 编辑：**（回应指出此解决方案导致无限递归的评论）我认为您获得无限递归的原因与 的实现细节有关`UINavigationController`，不应继承。根据苹果的文档，

> 该类`UINavigationController`实现了一个专门的视图控制器，用于管理分层内容的导航。此类不用于子类化。相反，在您希望应用程序的用户界面反映内容的分层性质的情况下，您可以按原样使用它的实例。

**编辑**：iOS 6 中取消了对子类化的禁令 - 请参阅 UINavigationController 的文档。

# android - 安装和使用 OnBarcode 库

> ID：11934187
> 
> 赞同：1
> 
> 时间：2012-08-13T12:20:45.487
> 
> 标签：android, generator, barcode, qr-code

我最近购买了适用于 android 的 OnBarcode 库，当我收到电子邮件说我需要下载什么时，我得到了一个 .jar 文件，我将该文件添加到我在我的应用程序中创建的 lib 文件夹中。然后我去了我的项目的属性，在那里我去了“Java Build Path”，我把那个jar文件添加到我的应用程序中。接下来，我在 View Class 中添加了一些代码，并在 onDraw 部分添加`testQRCode(canvas)`了代码：

```
private static void testQRCode(Canvas canvas) throws Exception
    {
        QRCode barcode = new QRCode();

        barcode.setData("test;");
        barcode.setDataMode(QRCode.M_AUTO);
        barcode.setVersion(1);
        barcode.setEcl(QRCode.ECL_L);

        barcode.setFnc1Mode(IBarcode.FNC1_NONE);

        barcode.setProcessTilde(false);

        barcode.setUom(IBarcode.UOM_PIXEL);
        barcode.setX(3f);

        barcode.setLeftMargin(50f);
        barcode.setRightMargin(50f);
        barcode.setTopMargin(50f);
        barcode.setBottomMargin(50f);
        barcode.setResolution(72);

        barcode.setForeColor(AndroidColor.black);
        barcode.setBackColor(AndroidColor.white);

        RectF bounds = new RectF(0, 0, 100, 100);
        barcode.drawBarcode(canvas, bounds);
    } 
```

最后，当我尝试运行我的应用程序时，我收到一个错误，说`java.lang.NoClassDefFoundError: com.onbarcode.barcode.android.QRCode`我做错了什么，我有点强调我们对此的压力，因为这需要花费大约 800 美元购买，而且它吓坏了我。你们对我做错了什么有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:27:13.940

可以试试这个：

```
-> Right click on your project
-> Go into Build Path
-> Configure Build Path 
-> Go to Order and Export
-> Check your OnBarcode library
-> Clean your project 
```

当我尝试添加库时，它解决了我的问题，我得到了和你一样的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:24:54.640

您是否已将 .jar 文件添加到您的项目“libs”目录中？如果没有，请将其添加，在 Eclipse 中刷新项目，右键单击 .jar 文件，然后单击 Build Path > Add to build path。

# sencha-touch-2 - 工具栏的标题在文本太长时被剪切

> ID：11934191
> 
> 赞同：1
> 
> 时间：2012-08-13T12:21:02.267
> 
> 标签：sencha-touch-2

工具栏标题太长会被剪掉，看图：

![在此处输入图像描述](../Images/8dc2cf93227912496af77f07818a1f58.png)

这是代码：

```
launch: function () {

        var myTabPanel = Ext.create('Ext.Toolbar', {
        fullscreen: true,
        title: {
            title: 'BLA BLA BLA BLA BLA',
            style: {
                'text-align': 'left'
            }
        },
        docked: 'top',
        defaults: {
            iconMask: true,
            ui: 'plain'
        }
    });

    [...]

    myTabPanel.add([ start, ...]); 
```

“开始”的代码：

```
Ext.define('MyApp.view.Start',     {
    extend: 'Ext.Button',
    config: {
        html: 'Start',
        iconCls: 'home'
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:49:20.610

这是一个错误，请阅读这篇文章并查看我的评论以进行临时修复：[SenchaTouch2 - NestedList - Title "cut off"](https://stackoverflow.com/questions/11796915/senchatouch2-nestedlist-title-cut-off)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T18:51:07.960

别担心！

这是一个 Chrome 问题，也是为 Sencha 注册的错误以纠正它。它很快就会在即将发布的版本中得到修复。

# php - 如何调用具有通用名称的所有函数以在 CodeIgniter 单元测试中使用

> ID：11934192
> 
> 赞同：0
> 
> 时间：2012-08-13T12:21:02.243
> 
> 标签：php, codeigniter

抱歉标题相当糟糕，但希望我可以用一些代码来解释它。

所以可以说我有以下功能：

```
<?php    
function helloTest()
{
    echo 'hello';
}

function worldTest()
{
    echo 'world';
}

function helloworld()
{
    // call all functions with 'Test'
}
?> 
```

*helloworld*函数是否可以调用最后命名为“测试”的所有函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T12:33:42.943

```
$funcs = get_defined_functions();

foreach( $funcs['user'] as $f ) {
    if( strstr($f, 'Test') )
        call_user_func($f);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-13T12:35:33.483

您应该使用[Get All methods](http://php.net/manual/en/function.get-defined-functions.php) php 函数来获取所有方法，如下所示

```
function helloTest()
{
    echo 'hello';
}

function worldTest()
{
    echo 'world';
}

function helloworld()
{
    // call all functions with 'Test'
    $methods = get_defined_functions();
    $user_defined_methods = $methods['user'];
    foreach ($user_defined_methods as $method_name) 
    {
         //check with regular expressions if it's having 'Test' at end of $method_name then call that function using call_user_func($method_name)
    }
} 
```

有关更多信息，请查看[此链接](http://php.net/manual/en/function.get-defined-functions.php)

# rdf - 这可以在 RDFS 中设计一个单例吗？

> ID：11934197
> 
> 赞同：1
> 
> 时间：2012-08-13T12:21:22.737
> 
> 标签：rdf, rdfs

我实际上是在尝试创建一个 RDFS 模型，并想知道是否有办法将一个类声明为具有单个实例。

设计的方案是针对一种图，我想将单个节点设计为“根”。我应该使用子类还是属性？我知道 OWL 提供了更多的语义词汇，但我打算保持“基本”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T12:54:50.690

不，您不能在 RDFS 中这样做。我也不确定这是否有用。只需定义您的类并将单个资源声明为将该类作为其类型。断言不可能有其他资源具有这种类型有什么好处？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T13:22:24.213

在阅读您的“用例”时，我的印象是您更喜欢功能属性`:hasRoot`，这样一件事就只能有一个根。正如 cygri 所说，这不能在纯 RDFS 中完成，但一个简单的 OWL 片段就足够了：

```
:hasRoot  a  owl:FunctionalProperty . 
```

然后，对于给定的实体`x`，只能有一个实体`y`使得关系`x :hasRoot y`成立。然后，如果您有以下数据：

```
:x  :hasRoot  :y .
:x  :hasRoot  :z . 
```

你可以得出结论：

```
:y  owl:sameAs  :z . 
```

然而，在大多数情况下，这种推理是不需要的，而 cygri 的建议足够简单，只要您的应用程序确保定义了单个根即可。

# ruby-on-rails - Rails 中的身份验证页面？

> ID：11934199
> 
> 赞同：0
> 
> 时间：2012-08-13T12:21:23.593
> 
> 标签：ruby-on-rails

我在rails中尝试了几个例子，但它在某种程度上出错了。最后我查看了[https://github.com/plataformatec/devise_example.git](https://github.com/plataformatec/devise_example.git)，它工作正常，但我发现很难理解它是如何工作的或完成它的过程。因此，如果有人可以通过解释同一示例中涉及的步骤（如果可能的话）来帮助我，我可以理解。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:50:20.317

您可能想在 Devise 上观看 RailsCasts 剧集：[http ://railscasts.com/episodes/209-introducing-devise](http://railscasts.com/episodes/209-introducing-devise)

# c# - Windows Mobile 6 System.PlatformNotSupportedException

> ID：11934210
> 
> 赞同：0
> 
> 时间：2012-08-13T12:21:57.220
> 
> 标签：c#, compact-framework, windows-mobile-6

我编写了小型 WM 6.1 应用程序，它可以读取和写入 xml，但出现以下异常：

```
System.PlatformNotSupportedException was unhandled
  Message="PlatformNotSupportedException"
  StackTrace:
       at System.Globalization.CompareInfo..ctor(Int32 culture)
       at System.Globalization.CompareInfo.GetCompareInfo(Int32 culture)
       at System.Globalization.CultureInfo.get_CompareInfo()
       at System.CultureAwareComparer..ctor(CultureInfo culture, Boolean ignoreCase)
       at System.StringComparer.Create(CultureInfo culture, Boolean ignoreCase)
       at System.Data.DataTable.GetSpecialHashCode(String name)
       at System.Data.DataColumnCollection.RegisterColumnName(String name, DataColumn column, DataTable table)
       at System.Data.DataColumnCollection.BaseAdd(DataColumn column)
       at System.Data.DataColumnCollection.AddAt(Int32 index, DataColumn column)
       at System.Data.DataColumnCollection.Add(DataColumn column)
       at System.Data.DataColumnCollection.Add(String columnName, Type type)
       at MyApp.Settings.CreateDT(String Setting, String Key, String Value)
       at MyApp.Program.Main() 
```

这里是 CreatDT 方法体：

```
public static DataTable CreateDT(string Setting, string Key, string Value)
        {
            DataTable dt;
            dt = new DataTable(Setting);
            dt.Columns.Add("Key", Type.GetType("System.String"));   //<-- error here
            dt.Columns.Add("Value", Type.GetType("System.String"));
            AddRow(ref dt, Key, Value);
            return dt;
        } 
```

任何身体帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T19:18:59.190

无论是否`Type.GetType("System.String")`会导致您出错，我都建议您`typeof(String)`在评论中采纳 Alex 的建议。

话虽如此，尝试在有问题的例程周围放置一个临时的 try...catch 块，以获得更详细的错误消息。

```
public static DataTable CreateDT(string Setting, string Key, string Value)
{
  DataTable dt = new DataTable(Setting);
  try {
    dt.Columns.Add("Key", typeof(String));   //<-- error here
    dt.Columns.Add("Value", typeof("String"));
    AddRow(ref dt, Key, Value);
  } catch (Exception err) {
    MessageBox.Show(err.Message);
    if (err.InnerException != null) {
      MessageBox.Show(err.InnerException.Message);
    }
  }
  return dt;
} 
```

谁知道？“Key”可以是保留字。您可能必须使用其他东西，例如“ID”。

**编辑：**我刚刚注意到您为您的`DataTable`: **Setting**提供了一个名称。如果这是一些不允许的名称值（例如“设置：$95 >> $110”），那么您的表可能永远不会被创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:59:24.830

如果是 PlatformNotSupportedException 则问题取决于系统中不存在的功能。可能缺少一些 Compact Framework 组件。

您可以尝试选择下面标记的选项（不幸的是它在图片上被取消选择），看看它是否有帮助。

![在此处输入图像描述](../Images/62c733dd980f881176eddf27a6f5c88a.png)

# python - Python - How can I query the class in which a method is defined?

> ID：11934212
> 
> 赞同：3
> 
> 时间：2012-08-13T12:22:22.350
> 
> 标签：python, methods, introspection, inspect

My question is somewhat similar to [this one](https://stackoverflow.com/questions/5520580/how-do-you-get-all-classes-defined-in-a-module-but-not-imported); it concerns object methods rather than module contents. I want to know if I can use the `inspect` module to get the methods defined *only in the class I'm asking about*, and not its parent(s).

I need this because my child class defines 'macro' methods, which accesses the parent's methods at a higher level of abstraction, and I don't want the user to have to worry about the lower-level methods defined all the way up the inheritance tree.

Here is a simplified example:

```
class Foo(object):
    def __init__(self): pass
    def f1(self): return 3
    def f2(self): return 1

class Bar(Foo):
    def __init__(self): Foo.__init__(self)
    def g1(self): return self.f1() + self.f2()
    def g2(self): return self.f1() - self.f2()

import inspect
inspect.getmembers(Bar, inspect.ismethod) 
```

Output:

```
[('__init__', <unbound method Bar.__init__>),
 ('f1', <unbound method Bar.f1>),
 ('f2', <unbound method Bar.f2>),
 ('g1', <unbound method Bar.g1>),
 ('g2', <unbound method Bar.g2>)] 
```

The user need not know or care about the existence of the `f`s since she's only ever going to be interested in the `g`s. (Of course, this output makes sense in the vast majority of contexts, since all these methods will be bound to the object when it is instantiated.) For a long inheritance tree, the returned list can get very long and full of things that aren't relevant to the user.

How can I get it to leave `f1` and `f2` off this list? Is there an equivalent to the `__module__` attribute for the methods defined in classes? Better still, is it possible to do the same thing with *instance* methods?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T12:31:43.817

Methods have an `im_class` attribute, that points to the class in question. You can use that filter on functions that are members of the class:

```
inspect.getmembers(Bar,
    lambda m: inspect.ismethod(m) and m.__func__ in m.im_class.__dict__.values()) 
```

This gives you:

```
[
    ('__init__', <unbound method Bar.__init__>),
    ('f1', <unbound method Bar.f1>), 
    ('f2', <unbound method Bar.f2>)
] 
```

Of course, you can just bypass `getmembers` altogether then:

```
[m for m in Bar.__dict__.values() if inspect.isfunction(m)] 
```

gives:

```
[<function __init__ at 0x100a28de8>, <function g1 at 0x100a28e60>, <function g2 at 0x100a28ed8>] 
```

This applies to bound or unbound methods, they have same `.__func__` (or `im_func`, the old name) attribute. The difference between bound and unbound is the value of the `.__self__` attribute (None when unbound).

These "secret" attributes are all documented in the [Python Data Model](http://docs.python.org/reference/datamodel.html).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T12:31:27.980

Hopefully someone will come along with a better solution, but what about:

```
foo_members = inspect.getmembers(Foo,inspect.ismethod)
bar_members = inspect.getmembers(Bar,inspect.ismethod)

set(bar_members) - set(foo_members) 
```

Of course, in a real situation, you might need to walk through `Bar.__bases__` to actually get rid of everything you don't want.

e.g.:

```
set(bar_members) - set(sum([inspect.getmembers(base,inspect.ismethod) for base in Bar.__bases__],[])) 
```

# internet-explorer - 访问我的网站时是否可以禁用特定的 IE 插件？

> ID：11934214
> 
> 赞同：0
> 
> 时间：2012-08-13T12:22:26.937
> 
> 标签：internet-explorer, ieaddon

我在 Internet Explorer 9（可能是 10）中遇到了来自 Yontoo LLC 的“Yontoo API”插件的兼容性问题。这显然是一个仅可用于处理 Facebook 布局或其他东西的 IE 的有问题的附加组件（尽管它甚至没有在 IE 中注册）。许多用户报告说，它在他们的 AV 中注册为恶意软件。我只是想知道当用户通过 html/xhtml、php、javascript 或任何其他方法访问我的网站时，是否有任何方法可以暂时禁用此插件。在此先感谢您，希望您能得到我想要的答案（因为我担心这可能是不可能的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:28:19.520

对不起，但唯一要做的就是通知您的用户此插件会导致问题并要求他们禁用它。无法以编程方式禁用附加组件。

# android - Android 并通过 .http 身份验证连接到网页

> ID：11934216
> 
> 赞同：0
> 
> 时间：2012-08-13T12:22:34.690
> 
> 标签：android, .htaccess, httpclient

我需要使用 httpclient 连接到运行受 .htaccess 身份验证保护的 PHP 脚本的网页（Apache）。

我已经阅读了一个小时的问题和答案（在这里和其他地方），但没有一个对我有用。人们在 Base64.java 等类中使用的方法不存在，或者参数错误。

我正在连接到正常（像这样的不受保护的网页）：

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost(url);
nameValuePairs.add(new BasicNameValuePair("date", cDate));
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
HttpResponse response = httpclient.execute(httppost);
HttpEntity entity = response.getEntity();
is = entity.getContent(); 
```

但是，当页面受到保护时，这自然无济于事。那么我怎样才能以最简单的方式将我的用户名和密码传递给连接呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:44:13.277

您可以在这里获得 Base64：http: [//iharder.sourceforge.net/current/java/base64/](http://iharder.sourceforge.net/current/java/base64/)。

我通常会执行以下操作来进行身份验证：

```
 StringBuilder authentication = new StringBuilder().append("dogT4g").append(":").append("petTheDog5");
            String result = Base64.encodeBytes(authentication.toString().getBytes());
            httppost.setHeader("Authorization", "Basic " + result); 
```

希望能解决您的问题。

# php - 使用 MySql 结果在 PHP 中选择组合框值

> ID：11934217
> 
> 赞同：0
> 
> 时间：2012-08-13T12:22:38.420
> 
> 标签：php, mysql

我正在寻找一些方法来根据 mysql 的结果选择一个 php 组合框“<select>”。

实际上，我正在开发一个 php 表单，该表单将用于编辑 mysql 表中的现有值。我的第一个表单将简单地传递要编辑的记录的 id，这类似于 <a href="editCalendar.php?id=15">点击编辑</a>

editCalendar.php 上的代码如下：

```
<?php
    include("dbpath.php");
    $id =  htmlspecialchars($_GET["id"]);

    $sql="Select * from event_Date where eventid=" . $id;
    $result=mysql_query($sql);

    // Check result
    // This shows the actual query sent to MySQL, and the error. Useful for debugging.
    if (!$result) 
    {
        $message  = 'Invalid query: ' . mysql_error() . "\n";
        $message .= 'Whole query: ' . $query;
        die($message);
    }

    while($row = mysql_fetch_assoc($result))
    {
    $name=$row["EventTitle"];
    $close=$row["OpenOrClose"];
    $remarks=$row["Remarks"];
    $date=$row["EventDate"];
    $type=$row["Type"];
    }
?> 
```

中获得的值`$close`将用于在同一表单上选择“SelectClosedOrOpen”，即用户将从填充的列表中获得预先选择的选项。

```
<select id="SelectClosedOrOpen">
<option value="3">Select</option>
<option value="0">Open</option>
<option value="1">Closed</option>
</select> 
```

意味着，如果`$close`有 0，则`<option value="0">Open</option>`必须选择，否则如果 $close 有 1，`<option value="1">Closed</option>`则应在表单加载时自动选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T12:25:50.637

您只需要在`selected`其中写入属性。试试这个

```
<select id="SelectClosedOrOpen">
<option value="3" <?php echo ($close == 3) ? 'selected="selected"': ''; ?>>Select</option>
<option value="0" <?php echo ($close == 0) ? 'selected="selected"': ''; ?>>Open</option>
<option value="1" <?php echo ($close == 1) ? 'selected="selected"': ''; ?>>Closed</option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:29:31.147

几年前我创建了这个函数。我希望它对你有帮助。它基本上需要您的选项数组和要预先选择的选项的值。它为您的选择返回 OPTIONS，因此您仍然需要创建 SELECT 标签，它允许您自定义 ID、JS 等。

```
function drop_down_box_options_from_array($choices,$default="") 
{
        $output= '';
        // $choices is contructed using $choices[]=array("value","Displayed Choice");
        while (list ($key, $val) = each ($choices))
        { 
                $output.= '<option value="';
                $output.= $choices[$key][0];
                if ($default==$choices[$key][0])
                {
                        $output.= '" selected="selected" >';
                }
                else
                {
                        $output.= '">';
                }
                $output.= $choices[$key][1];
                $output.= '</option>';
                $output.= "\n";
        }
        return $output;
} 
```

使用您的场景：

```
<select id="SelectClosedOrOpen" name="OpenOrClose">
<?php
// defined here for clarity, but can be defined earlier ie in a config file
$choices[]=array('3', 'Select');
$choices[]=array('0', 'Open');
$choices[]=array('1', 'Closed');
echo drop_down_box_options_from_array($choices, $row['OpenOrClose']);
?>
</select> 
```

# coldfusion - cfselect - 如何使用手动值动态设置选定的选项值？

> ID：11934219
> 
> 赞同：1
> 
> 时间：2012-08-13T12:22:57.800
> 
> 标签：coldfusion

如果我有一个带有硬手动值的选择设置，并且我想在此基础上将以下选项之一设置为默认值，你会怎么做？就像到达此表格时，有一个变量将包含 1 到 12。因此，如果它是“6”，我想将“6 个月”设为所选值。我知道您可以将“selected = “selected””直接放在选项值中，但我不知道如何在其中获取 if 语句。我尝试在 cfselect 中进行了一些操作，但无法找出任何可行的方法。

谢谢！

```
<cfselect name="months_select" id="months_select" multiple="no">                                                
    <option value="1">1 Month</option>                                                                                              
    <option value="2">2 Months</option>
    <option value="3">3 Months</option>
    <option value="4">4 Months</option>
    <option value="5">5 Months</option>
    <option value="6">6 Months</option>                                                                                                 
    <option value="7">7 Months</option>
    <option value="8">8 Months</option>
    <option value="9">9 Months</option>
    <option value="10">10 Months</option>
    <option value="11">11 Months</option>
    <option value="12">12 Months</option>   
</cfselect> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T12:53:58.400

您可以将 CF 直接嵌入到 HTML 中，我以第一个为例。

```
<select name="months_select" id="months_select" multiple="no">

    <option value="1" <cfif YourVariable EQ 1>selected="selected"</cfif>>1 Month</option>
    <option value="2">2 Months</option>
    <option value="3">3 Months</option>
    <option value="4">4 Months</option>
    <option value="5">5 Months</option>
    <option value="6">6 Months</option>                                                                                                 
    <option value="7">7 Months</option>
    <option value="8">8 Months</option>
    <option value="9">9 Months</option>
    <option value="10">10 Months</option>
    <option value="11">11 Months</option>
    <option value="12">12 Months</option>   
</select> 
```

你最好做一个循环。

```
<select name="months_select" id="months_select" multiple="no">
    <cfloop from="1" to="12" index="Month"> 
        <option value="#Month#" <cfif YourVariable EQ Month>selected="selected"</cfif>>#Month# Month<cfif Month GT 1>s</cfif></option>
    </cfloop>
</select> 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T13:19:06.070

如果您通过`cfselect`查询使用和生成选项，则可以在此处定义默认值。

```
<cfselect 
  name="months_select" 
  id="months_select" 
  multiple="no" 
  query="numMonths" 
  selected="#monthSelected#" 
  value="monthValue"></cfselect> 
```

# java - 在 Android 中更改文件权限

> ID：11934220
> 
> 赞同：0
> 
> 时间：2012-08-13T12:23:05.397
> 
> 标签：java, android, android-ndk

我正在开发一个项目，其中我有一个`unzip`包含`.doc/.pdf`文件的文件的应用程序。我想提取 zip 文件并想要获取该`.doc/.pdf`文件并将其权限设置为`Readable/ReadWrite`.

现在想要使用适当的应用程序打开文件，例如使用文件权限集的查看器`MS-Word`或查看器。`PDF`我该怎么做？任何提示或想法？

注意：我想使用我的应用程序提取文件并使用对文件设置权限的第三方应用程序打开它。

* * *

因为我们可以在我们的应用程序中设置文件的权限。唯一的问题是在第三方应用程序中打开文件。我可以在android中使用进程间通信机制来完成这个任务，以便我们可以有进程来处理两个应用程序之间的通信吗？

给我你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:27:09.797

如果您在**外部存储**上解压缩文件，则默认情况下它具有**所有权限**（您的外部存储拥有的权限）。

如果您在应用程序存储中提取，那么它只对您的应用程序**私有**（没有第三方应用程序可以轻松访问它）。在这种情况下使用权限`MODE_WORLD_READABLE`。

# asp.net - 跨域认证

> ID：11934221
> 
> 赞同：1
> 
> 时间：2012-08-13T12:23:06.240
> 
> 标签：asp.net

客户有一个使用 Wordpress 构建的网站。我们在子域的 asp.net 中为他们构建了一个 Web 应用程序。客户现在希望在其 wordpress 网站的主页上登录 .net Web 应用程序。
显然，这需要是安全的。

通常如何执行此跨域身份验证？

可以在 iframe 中完成还是首选其他方法>

谢谢

翅膀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T00:39:54.827

使用 iFrame 可以解决问题，但这样做的优雅方法是使用 JSON 数据在不同域之间进行通信。您必须能够修改客户端的 wordpress 站点（其中的身份验证部分），该站点会将 JSON 对象发送到您的 asp.net 应用程序。

然后你的 asp.net 应用程序应该决定登录是否应该成功，或者不查看 wordpress 站点发送的 JSON 数据。祝你好运

# nginx - Nginx 重写规则

> ID：11934222
> 
> 赞同：0
> 
> 时间：2012-08-13T12:23:07.670
> 
> 标签：nginx, rewrite, rule

我需要一个 nginx 服务器的重写规则。我正在使用带有 sh404sef 组件的 joomla 1.5 来制作干净的网址。

现在我已经安装了 gtranslate 模块来制作网站多语言。所以安装模块后，我的 url 会改变。

例如

我的原始网址：

[http://mywebsite.com/index.php?page=shop.product_details&flypage=flypage.tpl&product_id=511&option=com_virtuemart](http://mywebsite.com/index.php?page=shop.product_details&flypage=flypage.tpl&product_id=511&option=com_virtuemart)

sh404sef 组件会将其更改为

[http://mywebsite.com/men-s/coverall-shirt-in-grey.html](http://mywebsite.com/men-s/coverall-shirt-in-grey.html)

但是在安装 gtraslate 之后，网址发生了这样的变化

我想将 url 替换为不同的东西。例如：

[http://mywebsite.com/index.php?/ja/page=shop.product_details&flypage=flypage.tpl&product_id=511&option=com_virtuemart](http://mywebsite.com/index.php?/ja/page=shop.product_details&flypage=flypage.tpl&product_id=511&option=com_virtuemart)

这里我启用了日语，所以在 url 中添加了一个额外的字符串 /ja/。

这使网站出现问题。

我想要一个 nginx 的重写规则来将此 url 替换为没有 ja 的原始 URL

有没有人有想法。

请帮我..

-- 在此先感谢 Tibin Mathew

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T18:08:20.523

如果您在 ngingx 中重写 url，您的 joomla 将永远不会收到 /ja 请求，因此永远不会提供翻译后的内容。

您必须使 sh404sef 组件与 gtranslate url 一起工作，而不是 [http://gtranslate.net/forum/gtranslate-fully-compatible-with-sh404sef-t2168.html](http://gtranslate.net/forum/gtranslate-fully-compatible-with-sh404sef-t2168.html)表明这应该是可能的，但没有说明如何

# excel - 在宏按钮调用期间完成对单元格的更改

> ID：11934228
> 
> 赞同：2
> 
> 时间：2012-08-13T12:23:28.237
> 
> 标签：excel, vba, button

我正在开发一个电子表格工具，该工具可以查询 SQL Server 数据库并用结果填充各种工作表。我为用户提供了一个简单的 GUI（格式化单元格）来输入他们的数据库凭据和一个用于测试连接的 Excel 表单按钮。当按下按钮并正确形成连接字符串时，我通过将状态指示器的颜色从红色更改为绿色来识别这一点。我使用 Worksheet_Change 函数添加了对保存凭据的单元格范围的检查，如果任何单元格被更改，该函数会将状态从绿色切换回红色。

问题是用户正在输入他们连接字符串的某些方面，可能是最后一个字段，然后在没有先按回车键或导航离开的情况下按下“测试连接”按钮。并实际将值写入单元格。首先调用我的“测试连接”宏（链接到按钮），将状态指示器切换为绿色（假设凭据正确），但直到按钮宏运行完成后才会调用 Worksheet_Change 方法。结果是状态指示灯从绿色闪烁，然后返回红色，尽管已成功建立数据库连接。

我已经尝试过手动将焦点从当前单元格中切换出来。在从表单按钮调用我的“TestConnection”函数之前。但到目前为止，没有任何效果。

编辑：一些代码...

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Call SetGlobals

    'Check if database criteria has changed
    If Not Intersect(Target, Target.Worksheet.Range(DB_CELL_RANGE)) Is Nothing Then
        Call UpdateDBStatus(1)
    End If

End Sub

'Connect to database using Main sheet credentials
Function TestConnection()

    'Connection vars
    Set cnn = New ADODB.Connection

    'Open the connection.
    On Error GoTo ConnectError
    cnn.Open GetConnectionString()

    'Update dependencies
    'On Error GoTo FilterError
    Call UpdateFilter("select ********", "F", "F")
    Call UpdateFilter("select *******", "E", "E")
    Call UpdateDBStatus(2)

    MsgBox "Connected successfully to '" & DBASE & "' on machine '" & SERVER & "'"
    'Cleanup
    cnn.Close
    Set cnn = Nothing

    Exit Function

ConnectError:
    Call UpdateDBStatus(1)
    MsgBox "Could not establish a connection."
    Exit Function

FilterError:
    MsgBox "Filter Update Failure."
    Exit Function

End Function

'Set the status of the database connection and mark the result
Public Function UpdateDBStatus(Status As Integer)
    If Status = 1 Then
        Sheets("Main").Range(DB_STATUS_CELL).Value = "Not Connected"
        Sheets("Main").Range(DB_STATUS_CELL).Interior.ColorIndex = 3
        DB_STATUS = False
    Else
        Sheets("Main").Range(DB_STATUS_CELL).Value = "Connected"
        Sheets("Main").Range(DB_STATUS_CELL).Interior.ColorIndex = 4
        DB_STATUS = True
    End If
End Function 
```

基本上，如果有人当前正在编辑 DB_CELL_RANGE 内的单元格并且他们按下“测试连接”按钮，我希望在调用“测试连接”之前完成 Worksheet_Change。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:30:42.883

解决此问题的一种方法是您可以默认禁用“测试连接”按钮。但是无论哪种方式，您都不会绕过之后激活的“工作表更改”，所以我只是不使用它并使用自定义功能。

**更新：** 查看您的代码后，我在下面包含了代码，演示了我在说什么。

我重新编写了您的验证检查并仅在测试开始时调用它，并遍历验证范围。

我还删除了更新状态并将其粘贴到整个代码中，并带有更详细的消息。（包括关于两个错误部分的注释）

```
Sub TestConnection()

    Call ValidateInput

    If DB_STATUS Then
        'Connection vars
        Set cnn = New ADODB.Connection

        'Open the connection.
        On Error GoTo ConnectError 
'-Have ConnectError set the DB-STATUS_Cell to 'Error' and dbstatus to False, cell to red, ect.
        cnn.Open GetConnectionString()

        'Update dependencies
        'On Error GoTo FilterError 
'-Have FilterError set the DB-STATUS_Cell to 'Error' and dbstatus to False, cell to red, ect.
        Call UpdateFilter("select ********", "F", "F")
        Call UpdateFilter("select *******", "E", "E")

        Sheets("Main").Range(DB_STATUS_CELL).Value = "Connected"

        MsgBox "Connected successfully to '" & DBASE & "' on machine '" & SERVER & "'"
        'Cleanup
        cnn.Close
        Set cnn = Nothing
    Else
        MsgBox "Please be sure that you populate all fields", vbExclamation

Exit Sub

Public Sub ValidateInput()
    Dim rCell As Range

    'assuming the named range 'DB_CELL_RANGE' contains all of the input cells you want populated
    For Each rCell In Worksheet.Range(DB_CELL_RANGE)
        If rCell.Value = "" Then
            Sheets("Main").Range(DB_STATUS_CELL).Value = "Not Connected"
            Sheets("Main").Range(DB_STATUS_CELL).Interior.ColorIndex = 3
            DB_STATUS = False
            Exit Sub
        Else
            'keep checking range
        End If

        '- If we make it here, then all of the inputs are validated
        Sheets("Main").Range(DB_STATUS_CELL).Value = "Inputs Good, Testing Connection."
        Sheets("Main").Range(DB_STATUS_CELL).Interior.ColorIndex = 4
        DB_STATUS = True

    Next rCell

End Sub 
```

注意：假设这`DB_STATUS`是一个全局变量，表示是否可以测试连接。另外，我注意到您将这些声明为函数，但它们似乎没有返回任何值，因此我将我的版本编写为子例程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:18:01.890

未经测试，但你应该看到一般的想法......

```
Public LastGoodConnString As String  'this in a regular module

'worksheet module
Private Sub Worksheet_Change(ByVal Target As Range)
    If Not Intersect(Target, Target.Worksheet.Range(DB_CELL_RANGE)) Is Nothing Then
        CheckConnString 'Check if database criteria has changed
    End If
End Sub

'Connect to database using Main sheet credentials
Function TestConnection()

    Set cnn = New ADODB.Connection

    'Open the connection.
    On Error GoTo ConnectError
    cnn.Open GetConnectionString()
    ShowDBStatus True 'this will also cache the connection string...

    '<snipped code>

    Exit Function

ConnectError:
    ShowDBStatus False
    MsgBox "Could not establish a connection."
    Exit Function

End Function

'update DB Status if connection string is changed from a "known good" value
Public Sub CheckConnString()
    ShowDBStatus (GetConnectionString() = LastGoodConnString) _
                     And LastGoodConnString <> ""
End Sub

'Show the status of the database connection
Public Sub ShowDBStatus(StatusOK As Boolean)

    'if connected OK, remember the connection string
    If StatusOK Then LastGoodConnString = GetConnectionString()

    With Sheets("Main").Range(DB_STATUS_CELL)
        .Value = IIf(StatusOK, "Connected", "Not Connected")
        .Interior.ColorIndex = IIf(StatusOK, 4, 3)
    End With

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T18:33:40.460

答案原来是一个相当简单的布尔标志，当建立成功的数据库连接时我将其设置为 True ，然后在下一次运行`Worksheet_Change` *完成*后设置为 false 。从那时起，仅当标志为假时才检查数据库连接。代码如下：

```
Public flag As Boolean

Private Sub Worksheet_Change(ByVal Target As Range)
    If Not flag Then
        If Not Intersect(Target, Target.Worksheet.Range(DB_CELL_RANGE)) Is Nothing Then
            UpdateDBStatus (1)
        End If
    Else
        flag = False
    End If
End Sub

'Connect to database using Main sheet credentials
Sub TestConnection()

    'Connection vars
    Set cnn = New ADODB.Connection

    'Open the connection.
    On Error GoTo ConnectError
    cnn.Open GetConnectionString()

    'Update dependencies
    On Error GoTo FilterError
    Call UpdateFilter("select ********", "F", "F")
    Call UpdateFilter("select *******", "E", "E")
    Call UpdateDBStatus(2)

    flag = True

    MsgBox "Connected successfully to '" & DBASE & "' on machine '" & SERVER & "'"
    'Cleanup
    cnn.Close
    Set cnn = Nothing

End Sub 
```

# php - CodeIgniter 并计算数据库中的特定行

> ID：11934229
> 
> 赞同：3
> 
> 时间：2012-08-13T12:23:37.007
> 
> 标签：php, mysql, codeigniter

我在数据库中有一个表：

```
id      |   int(25) Auto Increment   
game    |   int(10)  
user    |   int(9)   
own     |   int(11)  
userrate|   int(2)   
time    |   datetime 
```

我现在想要的是计算所有`own`类型的行。我知道这很难理解，所以我将发布一个示例：

```
 - own: 1; count: 5;
 - own: 2; count: 3;
 - own: 4; count: 10; 
```

等等

我最初的想法是为每个`own`（因为它只有四个）创建不同的查询，如下所示：

```
 $this->db->where('user',$user);
    $this->db->from('ownership');
    $this->db->where('own','1');

    $whole = $this->db->count_all_results();

    return $whole; 
```

但我认为这根本不好。你能建议我正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:05:18.397

只需按自己的分组结果：

```
$res = $this->db->query("SELECT count(1) AS games,own FROM ownership WHERE user = ? GROUP BY own", array($user))->result_array(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T13:55:01.060

我解决了这个问题。它类似于@vearutop 的解决方案，但它返回一个数组`own - count`。

这是模型：

```
public function countRates($user) {
    $this->db->select('own, COUNT(own) as count');
    $this->db->where('user',$user);
    $this->db->from('ownership');
    $this->db->group_by('own');

    $q = $this->db->get();
    $q = $q->result_array();

    return $q;
} 
```

# visual-c++ - Visual C++，更改“项目选项”文件路径

> ID：11934231
> 
> 赞同：0
> 
> 时间：2012-08-13T12:23:40.730
> 
> 标签：visual-c++, filepath

由于文件夹层次结构发生变化，我的项目不再编译。如果我更改面板中找到的路径：“C/C++”和“链接”中的项目->设置（Alt+F7），项目编译时没有错误或警告。有没有更简单的方法来更新这些路径？（我不热衷于为几十个项目进行这些更改）

泰为你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:26:27.740

我不知道对许多项目进行类似更改的任何更简单的“GUI”方式。移动资源总是一项乏味的任务。我想您可以尝试制作一个在多个项目/sln 文件上执行相同操作的脚本，但这取决于您的更改是否可编写脚本。

# iphone - 字符串中的子字符串范围

> ID：11934232
> 
> 赞同：1
> 
> 时间：2012-08-13T12:23:44.307
> 
> 标签：iphone, objective-c, ios

我有一个包含对象的数组，可以说{我的萨克斯管，到处走}。其次，我有一个`NSString`：“把我的萨克斯管带到任何地方”，那么我怎样才能将数组对象与字符串匹配并从中获取索引`NSString`。我需要`NSString`通过与数组对象进行比较来获取子字符串的索引。这样我就可以正确地对数组进行排序。到目前为止我已经完成了

```
NSRange range = [feedBackAnswer rangeOfString:@"everywhere"];
        if ( range.length > 0 ) 
        {
            NSLog(@"range.location..%d",range.location);
        } 
        else 
        {
            NSLog(@"...%d",-1);
        } 
```

但是我找不到子字符串的索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:35:58.943

```
 NSMutableArray * data=[[NSMutableArray alloc]initWithObjects:@"my saxophone",@"take",@"everwhere", nil];
        NSString * mat=@"take my saxophone everywhere";
        for (int i=0; i<[data count]; i++) {
            NSRange range = [mat rangeOfString:[data objectAtIndex:i]];
            if (range.length > 0)
                NSLog(@"Range is: %@", NSStringFromRange(range));
            else
                NSLog(@"Failed"); 
        }

[data release]; 
```

& 检查数组中的拼写（**everwhere**）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:28:21.163

字符串中子字符串的范围是...

```
 0: U

   1: n

   2: i

   3: v

   4: e

   5: r

   6: s

   7: i

   8: t

   9: y 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T12:52:22.637

试试这个代码

```
NSMutableArray *array1 = [NSMutableArray arrayWithObjects:@"my",@"saxophone",@"take",@"everywhere", nil];

NSString *str1 = @"take my saxophone everywhere";

NSArray *array = [str1 componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
NSLog(@" objects : %@",array);

for (int i=0; i<[array count]; i++) {
    for (int j=0; j<[array count]; j++) {
    if ([[array objectAtIndex:i] isEqualToString:[array1 objectAtIndex:j]]) {
        NSLog(@"String :%@ no : %d ",[array objectAtIndex:i],j);
        }
    }
} 
```

# ruby - Celery 之类的 Ruby 软件？

> ID：11934236
> 
> 赞同：13
> 
> 时间：2012-08-13T12:24:01.267
> 
> 标签：ruby, distributed-computing

有没有类似于[Celery](http://celeryproject.org) for Ruby 的东西？[有没有人对rcelery](https://github.com/leapfrogonline/rcelery)有任何经验？是生产的好选择吗？

更新：我遇到了[resque](https://github.com/resque/resque)，它看起来像是我可以用于我的任务的东西。欢迎任何进一步的建议！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-13T12:36:34.993

ruby 中有很多队列选项。

Sidekiq -> [https://github.com/mperham/sidekiq](https://github.com/mperham/sidekiq)
Resque，你得到了链接
DelayedJob -> [http://blog.leetsoft.com/delayed_job/](http://blog.leetsoft.com/delayed_job/)

所有这些都几乎相同。因此，您只需要使用您更舒适的示例即可。
在我最终使用的项目中`Sidekiq`，关于它的评论非常棒。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-21T18:30:41.550

这是 Resque 和 Sidekiq 的一个很好的比较。 [Resque vs Sidekiq？](https://stackoverflow.com/questions/11580954/resque-vs-sidekiq)

Sidekiq 使用线程，因此内存占用比 Resque 或延迟作业低得多。不利的一面，也是我认为的一个巨大的缺点，是您的工人必须是线程安全的，包括您在其中使用的任何宝石。审查所有进入工作线程安全的代码是肯定的，因为潜在的调试低级库中的争用、段错误等。

# yii - Yii - 如何在 CPortlet 中显示验证码？

> ID：11934237
> 
> 赞同：0
> 
> 时间：2012-08-13T12:24:04.987
> 
> 标签：yii

我正在使用 portlet 来显示联系表格 - 与作为标准生成的静态页面上的完全相同。我正在使用相同的 ContactForm 模型。表单显示但验证码未显示并报告“CCaptchaValidator.action“验证码”无效。无法在当前控制器中找到这样的操作。”

我是 yii 的新手，所以要花很多时间才能弄清楚所有事情。有什么快速建议我会做些什么来让它工作吗？

最好的！

```
Yii::import('zii.widgets.CPortlet');

class ContactFormCard extends CPortlet
{
    public $title='Contact';

protected function renderContent()
{
    $model=new ContactForm;
    if(isset($_POST['ContactForm']))
    {
        $model->attributes=$_POST['ContactForm'];
        if($model->validate())
            $this->controller->refresh();
    }
    $this->render('contactFormCard',array('model'=>$model));
}
public function actions()
{
    return array(
        'captcha'=>array(
            'class'=>'CCaptchaAction',
            'backColor'=>0xFFFFFF,
        ),
    );
} 
```

}

在 portlet 视图中：

```
<?php if(CCaptcha::checkRequirements()): ?>
    <div class="row">
        <?php echo $form->labelEx($model,'verifyCode'); ?>
        <div>
        <?php $this->widget('CCaptcha'); ?>
        <?php echo $form->textField($model,'verifyCode'); ?>
        </div>
        <div class="hint">Please enter the letters as they are shown in the image above.
        <br/>Letters are not case-sensitive.</div>
        <?php echo $form->error($model,'verifyCode'); ?>
    </div>
    <?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:08:45.077

在您的 SiteController.php 中添加：

```
 public function actions() {
        return array(
            'captcha' => array(
                'class' => 'CCaptchaAction',
            'backColor' => 0xFFFFFF,
            ),

            // [...]
        );
    } 
```

在您的 ContactForm.php 中添加：

```
public function rules() {
    return array(
        // [...]

        array('verifyCode', 'captcha', 'allowEmpty' => !CCaptcha::checkRequirements(), 'message' => Yii::t('formsErros', 'Código de verificação incorreto.')),

        // [...]
    );
} 
```

在你看来.php

```
<!-- [...] -->

<?php if(CCaptcha::checkRequirements()): ?>
    <div class="captcha">
            <?=$form->labelEx($contactFormModel, 'verifyCode')?>
            <?php $this->widget('CCaptcha', array('clickableImage' => true, 'showRefreshButton' => true, 'imageOptions' => array('id' => 'captchaContactForm', 'class' => 'clickableCursor'), 'buttonLabel' => '')); ?>
            <?=$form->textField($contactFormModel, 'verifyCode', array('class' => 'verticalAlignBottom'))?> 
            <?=$form->error($contactFormModel, 'verifyCode')?>
    </div>
<?php endif; ?>

<!-- [...] --> 
```

# html - Bootstrap，全屏站点：div 上的滚动条

> ID：11934241
> 
> 赞同：0
> 
> 时间：2012-08-13T12:24:33.410
> 
> 标签：html, css, twitter-bootstrap

我正在制作一个全屏网站，我想要一个可滚动的 div 来显示文本内容；这是我的页面： http: [//www.jeremy-dutheil.fr/barconniere/pages/enterprise](http://www.jeremy-dutheil.fr/barconniere/pages/enterprise)

您可以看到滚动条出现在 body 上，但这不是我想要的；我希望滚动条只出现在 div 内容上，而不是出现在正文上。

有任何想法吗 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:10:56.000

在你的 global.css 中应用这种风格

第 109 行，我想，在你的 #enterprise #textContainer {} 中改变你的风格

像这样...

```
#enterprise #textContainer {
 background-color: #FFFFFF;
 height: 445px;
 margin: 20px auto;
 overflow: auto;
 padding: 20px 0 20px 20px;
 -webkit-border-radius: 5px;
 -moz-border-radius: 5px;
 border-radius: 5px;
 } 
```

这段代码只是为了向您展示带有滚动条的 div 的外观。您可以根据自己的喜好进一步定制它。

上面的样式代码应输出类似于 [BELOW IMAGE] 的页面。看那个滚动条，很可爱。![这个](../Images/869e09bceb9967652324ea3eaa5556c1.png)

# javascript - CKEditor - 在 setData 之后 insertText 不起作用

> ID：11934243
> 
> 赞同：4
> 
> 时间：2012-08-13T12:24:57.937
> 
> 标签：javascript, jquery, ckeditor

我尝试在使用 setData("") 清除内容后插入一些内容，然后使用 insertText 方法向其中插入一些内容。但内容仍然是空的。

相关代码：

```
CKEDITOR.instances.content.setData("");
CKEDITOR.instances.content.focus();
CKEDITOR.instances.content.insertText("the text I want to insert"); 
```

上面的代码不起作用。任何人都可以帮助我吗？找到另一种方法来清除 CKEditor 中的内容，而不是使用 setData("") 或在 setData 之后使 insertText 方法工作都有助于解决我的问题。非常感谢！</p>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-22T07:20:01.480

我遇到了同样的问题，但关键是该`setData()`方法是异步的。如果你想在之后运行一些东西`setData()`，你必须创建一个[回调方法](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#setData)。

```
var fooCallback = function(){
    CKEDITOR.instances.content.focus();
    CKEDITOR.instances.content.insertText("the text I want to insert");
};
CKEDITOR.instances.content.setData("", fooCallback); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T06:24:11.997

也不适合我。一定是个bug。但是使用 jquery 有一种方法。

```
$('#content').val('the text I want to insert'); 
```

对于 jquery 适配器，请看这里：[http ://ckeditor.com/blog/CKEditor_for_jQuery](http://ckeditor.com/blog/CKEditor_for_jQuery)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T11:12:58.887

我遇到了同样的问题并找到了解决方案。当“清除”你的编辑器时，不要使用空字符串，而是使用`CKEDITOR.yourEditor.setData('<span></span>')`，或（可能）其他一些不显示任何内容的等效“有效 html”。我现在只用跨度尝试过这个。对 setData 方法的后续调用不会失败。享受。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-08T03:29:12.307

我遇到了同样的问题，但是按照接受的解决方案的建议安装 jquery 适配器对我来说不是一个选择。

在第二次通话中，我能够使用以下解决方法使其工作：

```
setTimeout(function(){
  CKEDITOR.instances["myEditor"].setData(newText);
}, 0); 
```

我从这里得到了这个想法：[https ://dev.ckeditor.com/ticket/10663#comment:7](https://dev.ckeditor.com/ticket/10663#comment:7)

# android - 为所有方向更新活动的最快方法

> ID：11934246
> 
> 赞同：1
> 
> 时间：2012-08-13T12:25:09.593
> 
> 标签：android, orientation

在我的 android`Activity`中，我需要`camera`根据设备 Orientation `. And I need all orientations for my activity namely`Portrait `,`Landscape `,`Landscape reverse `and`portrait reverse` 更新预览方向和 UI。

我使用 Android API 演示进行相机预览。我发现当我在我的中使用`fullSensor`方向设置`AndroidManifest.xml`并调用 Preview 类的`setCameraDisplayOrientation()`on`surfaceChanged()`方法（我指的`CameraPreview.java`是 API 演示源中的）时，我得到了所需的行为。

但是每个方向切换都有很大的延迟。当我在清单中将方向设置`Landscape`为时，预览很流畅，但 UI 没有根据设备方向更新。我需要设置方向，并`Landscape`根据所有四个方向（即`Portrait up`、和）更改 UI 。以良好的性能实现相同目标的最佳方法是什么？`Landscape right``Landscape left``Portrait down`

# php - Yii - 部分、剪辑或小部件？

> ID：11934247
> 
> 赞同：0
> 
> 时间：2012-08-13T12:25:15.817
> 
> 标签：php, templates, yii

我们有一个管理销售的控制器。我们需要在仪表板上显示这些销售的片段。不再涉及逻辑。

剪掉的应该是什么？剪辑？部分 ? 还是一个小部件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T12:34:17.323

您可能正在寻找一个小部件。

剪辑是（我认为，我并没有真正使用过它们）专门的小部件，用于将页面上的常见内容替换为页面上更具体的版本。

我不确定您所说的部分是什么意思，但我猜是`renderPartial`？这可能有效，但这意味着您必须在每次使用该部分视图时为其提供所需的数据。

小部件可以从您的来源中提取自己的数据，获取参数以更改行为并设置主题。它们是完全可重复使用的，您可以将它们放置在您的布局中，或者在您的情况下，放置在仪表板视图中。

页面上可以有很多小部件负责自己的数据，或者你可以有一个父->子结构，所以你用一些参数调用父小部件，这会收集所需的数据并将其拆分到用于不同显示方法（图表、表格、比较等）的“子”小部件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:58:45.287

我认为您应该更喜欢小部件来满足此要求。我们在这里讨论了widget 和 [renderPartial 在Yii 的视图中我应该更喜欢使用widget 还是renderPartial？](https://stackoverflow.com/questions/11345025/what-should-i-prefer-to-use-widget-or-renderpartial-in-yiis-view)

我希望你能得到你的答案。

# ios - 尝试从 objects[0] 插入 nil 对象？

> ID：11934248
> 
> 赞同：26
> 
> 时间：2012-08-13T12:25:16.057
> 
> 标签：ios, arrays, uitableview, null, datasource

在我的应用程序中，我有一个 UITableView 和一些按钮，用户可以单击这些按钮根据一些 NSDate 或整数对数组进行排序。所以这是我尝试对 UITableView 进行排序的方法：

```
- (void)sortStats:(id)sender reloadData:(BOOL)dataBool {
    NSSortDescriptor *descriptor = nil;
    UIButton *clickedButton = (UIButton*)sender;
    if (clickedButton.tag == 1) {
            descriptor = [NSSortDescriptor sortDescriptorWithKey:@"Date" ascending:NO];
    }
    [self.cellArray sortUsingDescriptors:[NSArray arrayWithObject:descriptor]];
    [[NSUserDefaults standardUserDefaults] setObject:self.cellArray forKey:@"cellArray"];
    if (dataBool) {
        [ivstatstableView reloadData];
    }
    [ivstatstableView scrollRectToVisible:CGRectMake(0, 0, 1, 1) animated:YES];
} 
```

所以最初我只是在没有 reloadData 参数的情况下使用了这个方法，因为 UITableView 上的 reloadData 似乎导致了崩溃。

这是控制台崩溃日志的内容：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“*** -[__NSPlaceholderArray initWithObjects:count:]：尝试从对象 [0] 插入 nil 对象”

无论如何，这里是否有任何代码会导致此崩溃？我真的很想让这个功能在我的应用程序中工作，我知道我即将修复它，但我不确定是什么导致了这个问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-13T13:48:57.007

至少有一个地方可能发生这种情况，也许还有其他地方。在获取用户默认内容的代码中，您不检查`nil`. 所以代替这个：

```
[self.cellArray addObjectsFromArray:[[NSUserDefaults standardUserDefaults] objectForKey:@"array"]]; 
```

你可能想试试这个：

```
NSArray *defaultCellArray = [[NSUserDefaults standardUserDefaults] objectForKey:@"array"];
if (defaultCellArray) {
    [self.cellArray addObjectsFromArray:defaultCellArray];
} 
```

失败的`initWithObjects`调用（根据您的错误消息）也可能嵌套在另一个调用中，也许在这个调用中：

```
[self.cellArray sortUsingDescriptors:[NSArray arrayWithObject:descriptor]]; 
```

如果您查看完整的调用堆栈，它会告诉您此调用是否正在进行后续调用`initWithObjects`并可能将其传递给`nil`. 例如，在您的情况下，如果尚未将要`nil`创建的数组的值设置为 1 或 2，您将传入 a yo 。您可能需要添加一个额外的 else 子句来帮助诊断问题：`clickedButton.tag`

```
if (clickedButton.tag == 1) {
        descriptor = [NSSortDescriptor sortDescriptorWithKey:@"Date" ascending:NO];
} else if (clickedButton.tag == 2) {
        descriptor = [NSSortDescriptor sortDescriptorWithKey:@"Score" ascending:NO];
} else {
    NSLog(@"Unexpected error: Can't determine sort descriptor");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T13:25:45.937

这一切都非常复杂，但有一件事很突出：

```
[[NSUserDefaults standardUserDefaults] setObject:self.cellArray 
                                          forKey:@"cellArray"]; 
```

我认为您应该将其更改为：

```
NSArray *array = [NSArray arrayWithArray:self.cellArray];
[[NSUserDefaults standardUserDefaults] setObject:array forKey:@"cellArray"]; 
```

其次，在您认为应该有对象的每个地方之后添加 asserts() ，即：

```
UIButton *theButton = ...
assert(theButton); 
```

您还说行数是 cellArray 计数的两倍，猜这是故意的。

# asp.net - 多文件上传问题

> ID：11934249
> 
> 赞同：0
> 
> 时间：2012-08-13T12:25:17.793
> 
> 标签：asp.net, file-upload

我使用[多文件上传](http://www.fyneworks.com/jquery/multiple-file-upload/)在 ASP.Net 中上传文件没有问题。但现在我想添加更多功能，比如在上传时创建缩略图，下面是我的代码：

```
try
        {
            string _path = "~/photos/realimg/";
            string _thumPath = "~/photos/thumbimg/";
            // Get the HttpFileCollection
            HttpFileCollection hfc = Request.Files;
            for (int i = 0; i < hfc.Count; i++)
            {
                HttpPostedFile hpf = hfc[i];
                if (hpf.ContentLength > 0)
                {
                    _path += System.IO.Path.GetFileName(hpf.FileName);
                    _thumPath += System.IO.Path.GetFileName(hpf.FileName.Insert(0, "thumb_"));
                    hpf.SaveAs(Server.MapPath(_path));
                    SavePicPath(_path);
                    System.Drawing.Image realImg = System.Drawing.Image.FromFile(Server.MapPath(_path));

                    Int32 rH = realImg.Height;
                    Int32 rW = realImg.Width;

                    Int32 fW = 170;
                    Int32 fH = (Int32)Math.Floor((double)rH * (fW / rW));
                    System.Drawing.Image thumbimg = realImg.GetThumbnailImage(fW, fH, null, IntPtr.Zero);

                    thumbimg.Save(Server.MapPath(_thumPath));
                    SavePicPath(_thumPath);

                }
            }
        }
        catch
        {
        } 
```

每当它到达 GetThumbnailImage 时，我都会收到“内存不足”错误，请更正或我做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:55:41.407

将 int 值更改为（浮点或双精度）。我认为这里`fw/rw`返回 int 值而不是 float 或 double 值。

# jersey - 多个网络资源上的全局参数

> ID：11934252
> 
> 赞同：1
> 
> 时间：2012-08-13T12:25:43.430
> 
> 标签：jersey, jax-rs

我正在使用 jersey,jax-rs 构建一个 web 服务应用程序

我在路径“/authenticate”中有单个 jax-rs 资源文件

我有多种方法具有单独的路径，例如“/user”“/test”

```
@Path ("/authenticate")
public class Authenticate{
private static final Log log = LogFactory.getLog(Authenticate.class);

@QueryParam("entityId")
String entity;

@GET
@Path ("/{param}")
public Response getMsg(@PathParam ("param") String msg) {
    String o = "Hello Welcome Back:"+msg;
    return Response.status(200).entity(o).build();
}

@GET
@Path ("/user")
@Produces({"application/json"})
public UserDTO getUser (@Context HttpServletRequest request,
        @QueryParam("userId") int userId) {
    System.out.println("In Get User, User:"+userId);    
    System.out.println("In Get User, Entity:"+entity);
}

@GET
@Path ("/test")
@Produces({"application/json"})
public TestPOJO getTestPOJO () {
    System.out.println("In Get TestPOJO");
    System.out.println("In Get Test, Entity:"+entity);
    return new TestPOJO();
} 
```

}

正如泽西客户端所建议的那样，我正在使用来自客户端的单个网络资源，并使用 .path("/xxx") 从同一网络资源构建后续网络资源。

这是我创建初始 Web 资源的方式

```
WebResource webResource = client.resource("http://localhost:8080/Service/jaxrs/authenticate");
webResource.queryParam("entityId", securityHelper.getEntityId().toString()); 
```

以下是我随后使用网络资源的方式

```
MultivaluedMap<String, String> params = new MultivaluedMapImpl();           
ClientResponse userRes = webResource.path("/user").queryParams(params).accept("application/json").get(ClientResponse.class); 
```

我想为初始 webresource 分配一个 queryparam，并且我希望使用 .path() 创建的所有后续 webresources 都保留它。但这不是现在发生的。例如，在上面的代码中，当使用 path("/user") 进行调用时，“entityId”不可用。

我的想法是分配公共参数一次，webResource 的所有后续用户都不需要一次又一次地添加这些参数。有没有办法做到这一点？这种方法会奏效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:27:21.037

下面的行创建了一个新的 WebResource 并且不改变 webResource 对象的状态：

```
webResource.queryParam("entityId", securityHelper.getEntityId().toString()) 
```

最终，您可以像这样更改代码以创建“基础”资源：

```
WebResource webResource = client.resource("http://localhost:8080/Service/jaxrs/authenticate").queryParam("entityId", securityHelper.getEntityId().toString()); 
```

然后根据需要使用此资源创建另一个资源。WebResource.queryParam 和 WebResource.queryParams 总是创建一个新的 WebResource 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:35:28.007

我可能不是回答这个问题的最佳人选，因为不久前我进入了 Jersey 和 RESTful 服务器的“世界”，但自从我看到这个问题两天没有回答后，我会尽我所能提供帮助。

如果我理解正确，您正在尝试通过使用查询将用户信息保存在 entityId String 上，以便在您进行后续调用时可用。

好的，让我们从你所拥有的开始。使用您的代码（entityId 作为全局参数），您指定的是，当您从 Authenticate 类调用资源时，可以使用 '?entityId="something" 类型的查询和 ANY 方法进行任何调用在这个类中可以使用查询中发送的信息。

问题是，对于我通过弄乱泽西岛所学到的东西，每当您拨打电话时，资源类（在您的情况下为 Authenticate）都会再次实例化。因此，您不能只将信息保存在全局参数中，因为后续调用会将 String entityId 设为 null。

这意味着如果您想保存信息，则必须在外部资源中进行（例如：数据库、文件等）。您选择哪种方法取决于您想要做什么以及您在应用程序中寻找什么。

我希望我至少能够对您的问题有所了解。

# iphone - 按钮标题中字符串的 ASCII 值

> ID：11934253
> 
> 赞同：0
> 
> 时间：2012-08-13T12:25:44.283
> 
> 标签：iphone, uibutton

我有三个按钮，除了标题之外，它们的属性都相同。标题分别为“A”、“B”和“C”。我编写了一个方法，在其中编写了这三个按钮的所有常见属性，并在我想在视图中添加这些按钮的地方调用此方法。我已经完成了所有这些，但在按钮标题处构建结构。我使用 for 循环来添加这些按钮以进行查看。这是我的代码：

这是具有三个按钮的所有常见属性的方法。

```
-(UIButton *)setMiddlePlayButton{
    UIButton * middleButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [middleButton setBackgroundImage:[UIImage imageNamed:@"Middle"] forState:UIControlStateNormal];
    [middleButton addTarget:self action:@selector(playButtonPressed:)
           forControlEvents:UIControlEventTouchDown];
    middleButton.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin;
    return middleButton;
} 
```

以这种方式调用方法在视图上添加按钮。

```
for(int i= 0; i<3; i++){
        UIButton * middleButtons = [self setMiddlePlayButton];
        middleButtons.tag= 2+i;
        //Here I have to add button Title which is 'A' for first button with tag 2, 'B' for second button with tag 3 and 'C' for third button. 
        [self.view addSubView:middleButtons];

    } 
```

我没有找到获取标题的方法，ASCII值有什么可能吗？或者有没有其他方法可以做到这一点？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:35:17.410

试试这个代码

```
for(int i= 0; i<3; i++){
    UIButton * middleButtons = [self setMiddlePlayButton];
    middleButtons.tag= 2+i;
    [middleButtons setTitle:[NSString stringWithFormat:@"%c", 65+i] forState:UIControlStateNormal];
    [self.view addSubview:middleButtons];   
} 
```

# java - 如何使用 svm 为文本分类创建向量空间

> ID：11934259
> 
> 赞同：1
> 
> 时间：2012-08-13T12:25:51.260
> 
> 标签：java, machine-learning, svm, libsvm

我在为 LIBSVM 生成输入训练向量集时遇到了一些问题。我有 3 个类别及其相关的训练文档，其术语权重如下（仅假设）。

**(标签/类别):1**
词频向量(TF*IDF)
Document1-> 1:0.25 2:1.056 3:2.356
Document2-> 2:1.25 3:0.145 4:1.543
Document3-> 1:1.00 2:2.145 5: 3.543

**（标签/类别）：2**
词频向量（TF*IDF）
Document4-> 1:0.25 2:1.056 3:2.356
Document5-> 2:1.25 3:0.145 4:1.543
Document6-> 1:1.00 2:2.145 5 :3.543

**(标签/类别):3**
词频向量(TF*IDF)
Document7-> 1:0.25 2:1.056 3:2.356
Document8-> 2:1.25 3:0.145 4:1.543
Document9-> 1:1.00 2:2.145 5:3.543

任何人都可以说如何将其转换为 LIBSVM 的训练向量集。这里 1:0.25 2:1.056 3:2.356 是术语索引及其权重。术语索引在全局字典中手动维护。

我也可以知道如何将测试文档转换为术语向量吗？

提前致谢。

* * *

嗨 Qnan .. 我已经按照你的建议准备了样本训练向量空间。你能告诉我我的向量形成是否正确吗？

（标签/类别）：1

1 1:0.25 2:1.056 3:2.356 ->（训练实例 1-for Document1）
1 2:1.25 3:0.145 4:1.543 ->（训练实例 2-for Document2）
1 1:1.00 2:2.145 5:3.543 ->（训练实例 3-for Document3）

（标签/类别）：2

2 1:0.25 2:1.056 3:2.356 ->（训练实例 4-for Document4）
2 2:1.25 3:0.145 4:1.543 ->（训练实例 5-for Document5）
2 1:1.00 2:2.145 5:3.543 ->（训练实例 6-for Document6）

（标签/类别）：3

3 1:0.25 2:1.056 3:2.356 ->(训练实例 7-for Document7)
3 2:1.25 3:0.145 4:1.543 ->(训练实例 8-for Document8)
3 1:1.00 2:2.145 5:3.543 ->（训练实例 9-for Document9）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T13:55:31.357

格式在 LIBSVM 发行版的 README 文件中有描述，基本上是

```
<categoryA> <feature1>:<value1> <feature2>:<value2> <feature3>:<value3> ... 
```

每个训练实例一行。特征索引也应该按升序排列。

测试集看起来完全一样，除了第一列可能包含一些固定数字，例如 0，如果您不知道该集的真实标签。

至于你的数据，我不太明白如何为相同`Document1`和相同的一组术语拥有所有这些不同的权重向量。你能澄清一下吗？

**编辑：**

格式没问题，如果你去掉注释，LIBSVM 运行得很好。假设您正在运行 Windows 并且文件`test.txt`如下所示，

```
1 1:0.25 2:1.056 3:2.356
1 2:1.25 3:0.145 4:1.543
1 1:1.00 2:2.145 5:3.543
2 1:0.25 2:1.056 3:2.356
2 2:1.25 3:0.145 4:1.543
2 1:1.00 2:2.145 5:3.543
3 1:0.25 2:1.056 3:2.356
3 2:1.25 3:0.145 4:1.543
3 1:1.00 2:2.145 5:3.543 
```

您可以`./libsvm-3.12/windows/svm-train.exe test.txt`用于训练和`./libsvm-3.12/windows/svm-predict.exe test.txt test.txt.model test.txt.out`预测。在其他系统上，CMD 类似。

请注意，使用此数据，准确度不会高于 1/3，因为每个标签的数据集中存在相同的权重向量。

# c++ - 接受通用列表类型对象的参数

> ID：11934260
> 
> 赞同：-2
> 
> 时间：2012-08-13T12:25:52.463
> 
> 标签：c++, asp.net, vb.net, c#-4.0

我需要有一个通用列表类型对象作为参数，每当接受不同类型的列表对象时，将该对象作为已转换的列表类型对象传递给函数。有什么解决办法吗，请帮帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T12:32:31.837

不确定是否完全理解，但如果您希望您的函数将任何对象类型的列表作为参数，那么您可以使用通用方法：

对于 C#：

```
private static void Foo<T>(IList<T> parameter)
{
}

private static void Main(string[] args)
{
    Foo<int>(new List<int>());
    Foo<string>(new string[10]);

    Console.ReadLine();
} 
```

另请注意，您可以`IList`根据需要（`ICollection`、、`IEnumerable`... `List`）选择除 之外的其他接口/对象。

# asp.net-mvc-3 - 从视图调用模型函数

> ID：11934262
> 
> 赞同：0
> 
> 时间：2012-08-13T12:26:19.103
> 
> 标签：asp.net-mvc-3

我在视图中有一个 HTML 选择，对于选择选项，我必须从数据库中检索值。我在模型中有一个返回选项列表的函数。如何从视图中调用模型的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:15:11.160

Something like this:

```
public class XXXXViewModel {
    //properties...

    public List<Option> Options {get;set;}
} 
```

and in your controller:

```
public class XXXXController : Controller {
    public ActionResult SomeAction(){
        var model = GetModelFromRepository();
        var viewModel = new XXXXViewModel{
                                            //Properties...
                                            Options = model.GetOptions();
                                         };
        return View(viewModel); 
    }
 } 
```

So, you controller takes care of providing the options to the view using a ViewModel class containing everything your view needs.

Hope it helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:10:56.120

创建一个将调用该函数的事件，并在 json 和 Ajax javascript 的帮助下，您可以轻松地做到这一点

它是一个小概念，在客户端渲染后无法从 html 调用模型，您必须通过控制器操作来处理它，而 ajax 在大多数 mvc 应用程序中是一个很好的做法

# javascript - 如何使用javascript而不是使用控制器中的方法在rails中呈现部分按钮单击？

> ID：11934268
> 
> 赞同：0
> 
> 时间：2012-08-13T12:26:50.780
> 
> 标签：javascript, ruby-on-rails, partial

我有一个问题，我需要在单击按钮时渲染部分内容，说你真的想要执行该操作，并且必须仅使用 javascript 来完成，在控制器中添加一个方法，从而渲染部分内容是不可取的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T12:32:57.223

只需加载部分并使用 CSS 隐藏它 display:none 并且当用户单击按钮时向他显示确认对话框并将部分的 CSS 从无更改为阻止，您就完成了

# sed - sed 命令帮助总结类似的日志信息

> ID：11934271
> 
> 赞同：2
> 
> 时间：2012-08-13T12:26:55.560
> 
> 标签：sed, gnu, inline-editing

我正在尝试为一个应用程序制作一个日志文件摘要工具，该工具创建许多重复条目，只有一个不同的后缀来指示执行点。

`infile_grocery.txt`这是一个通用版本：具有这些内容的 text_file ( )。

```
milk skim fruit apple banana
milk skim fruit orange
milk skim fruit mango
milk skim fruit pomegranate
milk 2 percent fruit cherry tomato
milk 2 percent fruit peach
milk whole fruit pineapple
milk skim fruit strawberry raspberry
milk skim fruit strawberry rhubarb
milk whole fruit pineapple 
```

我希望得到的是：

```
milk skim fruit apple banana, orange, mango, pomegranate
milk 2 percent fruit cherry tomato, peach
milk whole fruit pineapple
milk skim fruit strawberry raspberry, strawberry rhubarb
milk whole fruit pineapple 
```

我目前编写的命令行是：

```
sed -rn "{H;x;s|^(.+) fruit ([^\n]+)\n(.*)\1 fruit (.+)$|\1 fruit \2, \4|;x}; ${x;s/^\n//;p}" infile_grocery.txt 
```

但我得到的结果是：

```
milk skim fruit apple banana, mango, strawberry raspberry
milk skim fruit strawberry rhubarb
milk whole fruit pineapple 
```

我以某种方式丢弃输入。任何有更好想法的大师如何构建这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T12:38:28.397

这是一个`awk`解决方案。

```
awk -F fruit '
$1==x{
    printf ",%s", $2
    next
}
{
    x=$1
    printf "\n%s", $0
}
END {
    print ""
}' input.txt 
```

### 输出

```
milk skim fruit apple banana, orange, mango, pomegranate
milk 2 percent fruit cherry tomato, peach
milk whole fruit pineapple
milk skim fruit strawberry raspberry, strawberry rhubarb
milk whole fruit pineapple 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:09:56.277

```
opref=""
nline=""
while read line; do
  pref=`echo $line | sed 's/\(.*fruit\).*/\1/'`
  item=`echo $line | sed 's/.*fruit\s\(.*\)/\1/'`
  if [ "$opref" == "$pref" ]; then
    nline="$nline, $item"
  else
    [ "$nline" != "" ] && echo $nline
    nline=$line
  fi  
  opref=$pref
done < input_file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T18:57:59.563

这可能对您有用（GNU sed）：

```
sed ':a;$!N;s/^\(\(.*fruit\).*\)\n\2\(.*\)/\1,\3/;ta;P;D' file 
```

解释：

*   `:a`是循环的占位符
*   `$!N`附加一个换行符，后跟下一行，最后一行除外。
*   `s/^\(\(.*fruit\).*\)\n\2\(.*\)/\1,\3/`将所有内容收集到换行符到反向引用 1（又名`\1`）中。在此收集从行首到包含单词的所有内容`fruit`到反向引用 2（又名`\2`）中。将匹配后的所有内容收集`\2`到反向引用 3（又名`\3`）中。将此正则表达式替换为反向引用 1，后跟一个逗号、一个空格，然后是反向引用 3。
*   `ta`如果替换为真循环到占位符`:a`
*   `P`如果替换是错误的，则打印到并包括模式空间中的第一个换行符。
*   `D`如果替换为假，则删除直到并包括模式空间中的第一个换行符。

# excel - 贷款摊销时间表

> ID：11934272
> 
> 赞同：0
> 
> 时间：2012-08-13T12:26:59.660
> 
> 标签：excel, vba

我需要为利率 8%、贷款期限 15 年和初始贷款金额 £200,000 生成一个贷款表。我在 excel 2010 上使用了下面的 VBA 代码，但它没有正确显示表格，这是我使用的代码；

```
Sub LoanSchedule()

Dim intRate, loanLife, initLoan, payment

intRate = InputBox("Input Interest rate:")
loanLife = InputBox("Input Loan life:")
initLoan = InputBox("Input Loan amount:")

Cells(4, 2).Value = intRate
Cells(5, 2).Value = loanLife
Cells(6, 2).Value = initLoan

payment = Pmt(intRate, loanLife, -initLoan)

'Year-beg Bal    Annual Payment  Interest Component  Prinicipal Repaid   Year-end Bal
 Dim yearBegBal, intComp, prinComp, yearEndBal

outRow = 10
yearBegBal = LoanAmtBal

For rowNum = 1 To loanLife
intComp = yearBegBal * intRate
prinComp = payment - intComp
yearEndBal = yearBegBal - prinComp

Cells(outRow + rowNum, 1).Value = rowNum
Cells(outRow + rowNum, 2).Value = yearBegBal
Cells(outRow + rowNum, 3).Value = payment
Cells(outRow + rowNum, 4).Value = intComp
Cells(outRow + rowNum, 5).Value = prinComp
Cells(outRow + rowNum, 6).Value = yearEndBal

yearBegBal = yearEndBal
Next rowNum

End Sub 
```

因为我是VBA的初学者，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:46:20.177

的值`LoanAmtBal`没有定义和直接使用，我认为这是导致问题的原因......

```
yearBegBal = LoanAmtBal 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-22T22:47:16.870

这是OP试图做的工作版本......我自己需要它。

```
Sub LoanSchedule()

Dim intRate, loanLife, initLoan, payment As Double
Dim yearBegBal, intComp, prinComp, yearEndBal, intTot, prinTot, fvloan As Currency

ActiveSheet.UsedRange.Delete

intRateYrs = InputBox("Input Interest rate (Annual):")
loanLifeYrs = InputBox("Input Loan life (Years):")
initLoan = InputBox("Input Loan amount:")

Application.DisplayAlerts = True
Application.ScreenUpdating = True

intRateMths = (intRateYrs / 100) / 12
loanLifeMths = loanLifeYrs * 12

Cells(4, 2).Value = Format(intRateYrs, "#.##") & " %"
Cells(4, 3).Value = Format(intRateMths, "Percent")
Cells(5, 2).Value = loanLifeYrs
Cells(5, 3).Value = loanLifeMths
Cells(6, 2).Value = Format(initLoan, "Currency")

payment = Pmt(intRateMths, loanLifeMths, -initLoan)
Cells(7, 2).Value = Format(payment, "Currency")

outRow = 10
intTot = 0
prinTot = 0
fvloan = 0

Cells(10, 2).Value = "Beginning Balance"
Cells(10, 3).Value = "Payment"
Cells(10, 4).Value = "Interest"
Cells(10, 5).Value = "Principal"
Cells(10, 6).Value = "End Balance"
Cells(10, 7).Value = "Total Interest"
Cells(10, 8).Value = "Total Principal"
Cells(10, 9).Value = "Total Repaid"
yearBegBal = initLoan

For rowNum = 1 To loanLifeMths
    intComp = yearBegBal * intRateMths
    prinComp = payment - intComp
    yearEndBal = yearBegBal - prinComp

    intTot = intTot + intComp
    prinTot = prinTot + prinComp
    fvloan = intTot + prinTot

    Cells(outRow + rowNum, 1).Value = rowNum
    Cells(outRow + rowNum, 2).Value = Format(yearBegBal, "Currency")
    Cells(outRow + rowNum, 3).Value = Format(payment, "Currency")
    Cells(outRow + rowNum, 4).Value = Format(intComp, "Currency")
    Cells(outRow + rowNum, 5).Value = Format(prinComp, "Currency")
    Cells(outRow + rowNum, 6).Value = Format(yearEndBal, "Currency")
    Cells(outRow + rowNum, 7).Value = Format(intTot, "Currency")
    Cells(outRow + rowNum, 8).Value = Format(prinTot, "Currency")
    Cells(outRow + rowNum, 9).Value = Format(fvloan, "Currency")

    yearBegBal = yearEndBal
Next rowNum

ActiveSheet.Range("A:I").EntireColumn.AutoFit
Rows("11:11").Select
ActiveWindow.FreezePanes = True
Range("A1").Select

Application.DisplayAlerts = False
Application.ScreenUpdating = False

End Sub 
```

# android - 在android中的屏幕之间导航

> ID：11934279
> 
> 赞同：-1
> 
> 时间：2012-08-13T12:27:33.297
> 
> 标签：android, start-activity

在我的应用程序中，考虑我有 2 个屏幕，屏幕 A 和屏幕 B。在屏幕 A 中，我有 2 个编辑框和 1 个微调器，当第一次出现时，屏幕不会显示 2 个编辑框。如果用户从微调器中选择任何值将进入屏幕 B，因为我从用户那里获取了一些值，如果用户单击确定，它将进入屏幕 A。现在它应该显示 2 个编辑框。所以我完成了 startactivityforresult ，但它没有进入那部分。请帮助我。在此先感谢。

我的编码：

屏幕 B：

```
 ok.setOnClickListener(new View.OnClickListener() 
            {               
                @Override
                public void onClick(View arg0)
                {
                    // TODO Auto-generated method stub
                    Intent intent=new Intent(getApplicationContext(),BudgetJulyo4Activity.class);                       
                    startActivityForResult(intent, 1);

                }
            }); 
```

屏幕 A：

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) 
        {
            // Result OK.d.
            System.out.println("Inside start");      -------------->This line is not printing.SO what i am doing wrong.
            if (requestCode == 1)
            {
                // do something good
                System.out.println("Inside start if");
                 EditText date=(EditText)findViewById(R.id.startdate);
                EditText NoOfRecc=(EditText)findViewById(R.id.editText3);

                date.setVisibility(View.VISIBLE);
                NoOfRecc.setVisibility(View.VISIBLE);
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:34:30.640

虽然我看不到您的其余代码，但您发布的内容看起来不错，您在正确的行上。但是， startActivityForResults() 是您需要覆盖的底层活动函数。将您的呼叫更改为以下内容应该意味着它被调用。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent intent)
{
    super.onActivityResult(requestCode, resultCode, intent);

    // Result OK.d.
    System.out.println("Inside start");      -------------->This line is not printing.SO what i am doing wrong.
    if (requestCode == 1)
    {
            // do something good
            System.out.println("Inside start if");
             EditText date=(EditText)findViewById(R.id.startdate);
            EditText NoOfRecc=(EditText)findViewById(R.id.editText3);

            date.setVisibility(View.VISIBLE);
            NoOfRecc.setVisibility(View.VISIBLE);
     }
} 
```

# android - 带有联系人的自动完成 TextView

> ID：11934283
> 
> 赞同：4
> 
> 时间：2012-08-13T12:27:45.673
> 
> 标签：android, textbox, android-contacts

我需要显示一个自动完成文本框，它将基本上加载联系人电子邮件 ID。我已经尝试使用自定义适配器，但文本框中没有填充任何内容。完全没有建议。任何解决方案都会非常有用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T14:24:58.723

尝试以下操作：

```
ArrayList<String> emailAddressCollection = new ArrayList<String>();

ContentResolver cr = getContentResolver();

Cursor emailCur = cr.query(ContactsContract.CommonDataKinds.Email.CONTENT_URI, null, null, null, null);

while (emailCur.moveToNext())
{
    String email = emailCur.getString(emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));
            emailAddressCollection.add(email);
}
emailCur.close();

String[] emailAddresses = new String[emailAddressCollection.size()];
emailAddressCollection.toArray(emailAddresses);

ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
             android.R.layout.simple_dropdown_item_1line, emailAddresses);
AutoCompleteTextView textView = (AutoCompleteTextView)findViewById(R.id.YOUR_TEXT_VIEW);
     textView.setAdapter(adapter);
 } 
```

**注意：**不要忘记将`READ_CONTACTS`权限添加到您的 Manifest.xml：

```
<uses-permission android:name="android.permission.READ_CONTACTS" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T20:45:54.370

@Korhan 肯定比我想的要优雅得多。我的代码有效，但@Korhan 的要简单得多。谢谢。我创建了这个自定义适配器类来读取联系人

```
class ContactListAdapter extends CursorAdapter implements Filterable {  
        private ContentResolver mCR;

        public ContactListAdapter(Context context, Cursor c,boolean a) {  
            super(context, c, true);  
            mCR = context.getContentResolver();  
        }

        @Override
        public void bindView(View view, Context context, Cursor cursor) {

                 ((TextView) view).setText(cursor.getString(1));
        }

        @Override
        public View newView(Context context, Cursor cursor, ViewGroup parent) {
             final LayoutInflater inflater = LayoutInflater.from(context);
                final TextView view = (TextView) inflater.inflate( android.R.layout.simple_dropdown_item_1line, parent, false);

                view.setText(cursor.getString(1));

                return view;

        }  
        @Override
        public String convertToString(Cursor cursor) {  

            return cursor.getString(1);
        }
        public Cursor runQueryOnBackgroundThread(CharSequence constraint) {
            if (getFilterQueryProvider() != null) {
                return getFilterQueryProvider().runQuery(constraint);
        }

        StringBuilder buffer = null;
        String[] args = null;
        if (constraint != null) {
            buffer = new StringBuilder();
            buffer.append("UPPER(");
            buffer.append(ContactsContract.CommonDataKinds.Email.ADDRESS);
            buffer.append(") GLOB ?");
            args = new String[] { constraint.toString().toUpperCase() + "*" };
        }

        return mCR.query(ContactsContract.CommonDataKinds.Email.CONTENT_URI,CreateEventActivity.PEOPLE_PROJECTION ,buffer == null ? null : buffer.toString(), args,
               null);
        }

    } 
```

主要活动：

```
MultiAutoCompleteTextView act = (MultiAutoCompleteTextView)findViewById(R.id.attende_list);
ContentResolver content = getContentResolver();
Cursor cursor = content.query(ContactsContract.CommonDataKinds.Email.CONTENT_URI,PEOPLE_PROJECTION, null, null, null);
ContactListAdapter adapter = new ContactListAdapter(this, cursor, true);
act.setThreshold(0);
act.setAdapter(adapter);
act.setTokenizer(new MultiAutoCompleteTextView.CommaTokenizer()); 
```

# c# - 在数据异步返回后使用 <%@ Page Async="true" 对 GridView 进行分页

> ID：11934287
> 
> 赞同：2
> 
> 时间：2012-08-13T12:28:08.773
> 
> 标签：c#, asp.net

我正在阅读以下有关 ASP.Net 异步页面的博客

*   [http://msdn.microsoft.com/en-us/magazine/cc163725.aspx](http://msdn.microsoft.com/en-us/magazine/cc163725.aspx)

*   [http://world.episerver.com/Blogs/Magnus-Rahl/Dates/2012/1/Async-Pages-part-3-Async-Pages-with-databinding-and-events/](http://world.episerver.com/Blogs/Magnus-Rahl/Dates/2012/1/Async-Pages-part-3-Async-Pages-with-databinding-and-events/)

一个问题突然出现在我的脑海中，请考虑以下情况：

1.  假设一个异步页面
2.  该页面注册异步操作以从数据库中检索数据，以便立即释放 ASP.Net 工作线程以增加可伸缩性
3.  页面将分页信息传递给这些操作以在数据库服务器上进行分页
4.  操作完成并在新线程上调用正确的委托。（不使用 ASP.Net 线程池中的线程）
5.  数据返回到页面，可以绑定到`GridView`控件上`Page_PreRendercomplete`

此时，我已经**准备好在我的页面上分页的数据并准备好绑定并显示回用户**（仅返回需要显示的记录**和 Virtual Rows Count 的数量**）

所以有了这些信息，我想把它绑定到我的`GridView`控件上，但是我还没有弄清楚**如何在我的控件上显示分页结果`GridView`**

我尝试使用以下代码：

```
protected override void OnPreRenderComplete(EventArgs e)
{
    if (this.shouldRefresh)
    {
        var pagedSource = new PagedDataSource
        {
            DataSource = this.Jobs, 
            AllowPaging = true,
            AllowCustomPaging = false,
            AllowServerPaging = true,
            PageSize = 3,
            CurrentPageIndex = 0,
            VirtualCount = 20
        };

        this.gv.DataSource = pagedSource;
        this.gv.DataBind();
    }

    base.OnPreRenderComplete(e);
} 
```

但是`GridView`控件*只是忽略了该`VirtualCount`属性，并且从不显示寻呼机*，这就是我得到的：

![在此处输入图像描述](../Images/607166c9934b5efec888dc077d32acd0.png)

### ASPX

```
<%@ Page Async="true" AsyncTimeout="30"  ....
...
    <asp:GridView runat="server" ID="gv" DataKeyNames="job_id" 
        AllowPaging="true" PageSize="3"
    >
        <Columns>
            <asp:CommandField ShowSelectButton="true" />
        </Columns>
        <SelectedRowStyle Font-Bold="true" />
    </asp:GridView> 
```

### ASPX 代码背后

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!this.IsPostBack)
    {
        this.shouldRefresh = true;
    }
}

public IAsyncResult BeginAsyncOperation(object sender, EventArgs e, AsyncCallback callback, object state)
{
    var operation = new MyClassResult(callback, Context, state);
    operation.StartAsync();
    return operation;
}

public void EndAsyncOperation(IAsyncResult result)
{
    var operation = result as MyClassResult;
    this.Jobs = operation.Jobs;
} 
```

笔记：

*   我对 jQuery 异步发布到服务器以获取数据不感兴趣

*   `MyClassResult`实现`IAsyncResult`并从数据库服务器返回数据

*   **`ObjectDataSource`如果可能的话，我很想使用**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:29:26.400

我想我有一些东西至少可以作为进一步探索的一个很好的起点。我制作了一个示例（进一步向下）来说明我的方法，该方法基于几个想法：

1.  为了使分页工作，`ObjectDatasource`应该使用。这样就可以知道`GridView`总共有多少行。
2.  我们需要一种方法来让我们`ObjectDataSource`访问我们获取的数据一旦可用。

为了解决2.我想出的想法是定义一个界面，该界面所在的页面`GridView`可以实现。然后`ObjectDataSource`可以使用一个类将获取数据的调用中继到页面本身。过早调用时，会返回空数据，但稍后会被真实数据替换。

**让我们看一些代码。**

这是我的 aspx 文件：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeFile="GridViewTest.aspx.cs" Inherits="GridViewTest" %>

<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="Server">
    <asp:GridView ID="jobsGv" runat="server" AutoGenerateColumns="false" AllowPaging="true"
        PageSize="13" OnPageIndexChanging="jobsGv_PageIndexChanging" DataSourceID="jobsDataSource">
        <Columns>
            <asp:TemplateField HeaderText="Job Id">
                <ItemTemplate>
                    <asp:Literal ID="JobId" runat="server" Text='<%# Eval("JobId") %>'></asp:Literal>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Job description">
                <ItemTemplate>
                    <asp:Literal ID="Description" runat="server" Text='<%# Eval("Description") %>'></asp:Literal>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Min level">
                <ItemTemplate>
                    <asp:Literal ID="MinLvl" runat="server" Text='<%# Eval("MinLvl") %>'></asp:Literal>
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView>
    <asp:ObjectDataSource ID="jobsDataSource" runat="server" TypeName="JobObjectDs" CacheDuration="0"
        SelectMethod="GetJobs" EnablePaging="True" SelectCountMethod="GetTotalJobsCount">
    </asp:ObjectDataSource>
    <asp:Button ID="button" runat="server" OnClick="button_Click" Text="Test postback" />
</asp:Content> 
```

以及背后的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web.UI.WebControls;

public partial class GridViewTest : System.Web.UI.Page, IJobDsPage
{
    bool gridNeedsBinding = false;
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            gridNeedsBinding = true;
        }
    }
    protected void jobsGv_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        var gv = (GridView)sender;
        newPageIndexForGv = e.NewPageIndex;
        gridNeedsBinding = true;
    }
    private int newPageIndexForGv = 0;
    protected void Page_PreRendercomplete(object sender, EventArgs e)
    {
        if (gridNeedsBinding)
        {
            // fetch data into this.jobs and this.totalJobsCount to simulate 
            // that data has just become available asynchronously
            JobDal dal = new JobDal();
            jobs = dal.GetJobs(jobsGv.PageSize, jobsGv.PageSize * newPageIndexForGv).ToList();
            totalJobsCount = dal.GetTotalJobsCount();

            //now that data is available, bind gridview
            jobsGv.DataBind();
            jobsGv.SetPageIndex(newPageIndexForGv);
        }
    }

    #region JobDsPage Members

    List<Job> jobs = new List<Job>();
    public IEnumerable<Job> GetJobs()
    {
        return jobs;
    }
    public IEnumerable<Job> GetJobs(int maximumRows, int startRowIndex)
    {
        return jobs;
    }
    int totalJobsCount;
    public int GetTotalJobsCount()
    {
        return totalJobsCount;
    }

    #endregion

    protected void button_Click(object sender, EventArgs e)
    {
    }
} 
```

最后是一些将它们联系在一起的类。我在 App_Code 的一个代码文件中将这些组合在一起：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

/// <summary>
/// Simple POCO to use as row data in GridView
/// </summary>
public class Job
{
    public int JobId { get; set; }
    public string Description { get; set; }
    public int MinLvl { get; set; }
    //etc
}

/// <summary>
/// This will simulate a DAL that fetches data
/// </summary>
public class JobDal
{
    private static int totalCount = 50; // let's pretend that db has total of 50 job records
    public IEnumerable<Job> GetJobs()
    {
        return Enumerable.Range(0, totalCount).Select(i => 
            new Job() { JobId = i, Description = "Descr " + i, MinLvl = i % 10 }); //simulate getting all records
    }
    public IEnumerable<Job> GetJobs(int maximumRows, int startRowIndex)
    {
        int count = (startRowIndex + maximumRows) > totalCount ? totalCount - startRowIndex : maximumRows;
        return Enumerable.Range(startRowIndex, count).Select(i => 
            new Job() { JobId = i, Description = "Descr " + i, MinLvl = i % 10 }); //simulate getting one page of records
    }
    public int GetTotalJobsCount()
    {
        return totalCount; // simulate counting total amount of rows
    }
}

/// <summary>
/// Interface for our page, so we can call methods in the page itself
/// </summary>
public interface IJobDsPage
{
    IEnumerable<Job> GetJobs();
    IEnumerable<Job> GetJobs(int maximumRows, int startRowIndex);
    int GetTotalJobsCount();
}

/// <summary>
/// This will be used by our ObjectDataSource
/// </summary>
public class JobObjectDs
{
    public IEnumerable<Job> GetJobs()
    {
        var currentPageAsIJobDsPage = (IJobDsPage)HttpContext.Current.CurrentHandler;
        return currentPageAsIJobDsPage.GetJobs();
    }
    public IEnumerable<Job> GetJobs(int maximumRows, int startRowIndex)
    {
        var currentPageAsIJobDsPage = (IJobDsPage)HttpContext.Current.CurrentHandler;
        return currentPageAsIJobDsPage.GetJobs(maximumRows, startRowIndex);
    }
    public int GetTotalJobsCount()
    {
        var currentPageAsIJobDsPage = (IJobDsPage)HttpContext.Current.CurrentHandler;
        return currentPageAsIJobDsPage.GetTotalJobsCount();
    }
} 
```

**那么这一切有什么作用呢？**

好吧，我们有实现`IJobDsPage`接口的 Page。在页面上，我们有`GridView`使用`ObjectDataSource`with id的页面`jobsDataSource`。这反过来又使用类`JobObjectDs`来获取数据。并且*该类*依次从 中获取当前正在执行的 Page`HttpContext`并将其转换为`IJobDsPage`接口并调用 Page 上的接口方法。

所以结果是我们有一个`GridView`which 使用一个`ObjectDataSource`which 调用 Page 中的方法来获取数据。如果过早调用这些方法，则会返回空数据（`new List<Job>()`相应的总行数为零）。但这没有问题，因为当数据可用时，当我们到达页面处理的一个阶段时，我们无论如何都要手动绑定 GridView。

总而言之，我的样本作品虽然远非一流。就目前而言，将在请求期间多次`ObjectDataSource`调用其关联的方法。`Select`不过，这并不像最初听起来那么糟糕，因为数据的**实际**提取仍然只会发生一次。此外，`GridView`当切换到下一页时，将两次绑定到相同的数据。

所以还有改进的余地。但这至少是一个起点。

# visual-studio-2008 - Visual Studio 挂起“正在执行注册”

> ID：11934291
> 
> 赞同：1
> 
> 时间：2012-08-13T12:28:43.940
> 
> 标签：visual-studio-2008, atl

我认为这是非常基本的。今天我正在构建一个静态链接到 ATL 的动态链接项目。在构建它时，它挂在“执行注册”阶段并且没有继续。我可以看到任务管理器中有一个 regsvr32.exe。我猜这个过程是在做注册工作。但它永远不会结束。

所以我取消了构建并重试，然后我有一些未解决的外部符号问题。有人可以向我解释为什么会这样吗？非常感谢你！平台(Windows 7 64, VS 2008)

最好的祝福，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:33:44.343

`regsvr32.exe`正在加载您的 DLL，并调用其`DllRegisterServer`导出的函数。假设它冻结了，您可以使用任务管理器、进程资源管理器或调试器检查它 - 附加到冻结的进程。因此，原因很可能在您的 DLL 中，您需要解决它，使用调试器附加，或者只是使用`C:\Windows\syswow64\regsvr32.exe <full path to your DLL>`.

并不是说如果您的 DLL 是 32 位的，那么您需要`syswow64\regsvr32.exe`，而不是`system32\regsvr32.exe`（否则被调试者将启动一个子进程，该子进程将冻结而不被调试）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:34:42.973

检查taskmanager，看看传递给regsvr32.exe的参数是什么，通常注册这样的dll被什么东西阻塞，得到什么被阻塞，如果可能的话调试到dllmain。

# c# - div位置内的图像按钮

> ID：11934298
> 
> 赞同：1
> 
> 时间：2012-08-13T12:29:27.293
> 
> 标签：c#, asp.net, css

你好，所以我得到了 Div，在里面我有 5 个图像按钮和按钮从 css 定位如何告诉它们定位在 div 内而不是整个页面？

```
 <div>
                <asp:ImageButton CssClass="imgBtn1" ID="ImageButton1" runat="server" ImageUrl="~/zgaszona.png" OnClick="ImageButton1_Click" Enabled="False" />
                <asp:ImageButton CssClass="imgBtn2" ID="ImageButton2" runat="server" ImageUrl="~/zgaszona.png" OnClick="ImageButton2_Click" Enabled="False" />
                <asp:ImageButton CssClass="imgBtn3" ID="ImageButton3" runat="server" ImageUrl="~/zgaszona.png" OnClick="ImageButton3_Click" Enabled="False" />
                <asp:ImageButton CssClass="imgBtn4" ID="ImageButton4" runat="server" ImageUrl="~/zgaszona.png" OnClick="ImageButton4_Click" Enabled="False" />
                <asp:ImageButton CssClass="imgBtn5" ID="ImageButton5" runat="server" ImageUrl="~/zgaszona.png" OnClick="ImageButton5_Click" Enabled="False" />
 </div> 
```

//CSS样式

```
body {
}
.imgBtn1 {
position:absolute;
right:0%;
bottom:50%;
top:50%;
}
.imgBtn2 {
position:absolute;
right:25%;
bottom:50%;
top:50%;
}
.imgBtn3 {
position: absolute;
right:50%;
bottom:50%;
top:50%;
}
.imgBtn4 {
position:absolute;
right:75%;
bottom:50%;
top:50%;
}
.imgBtn5 {
position:absolute;
bottom:50%;
top:50%;
left:0%;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T12:32:19.573

div的位置必须设置为相对

```
 #div_id {
position: relative;
} 
```

# php - 在 MediaWiki 上使用广告和横幅

> ID：11934305
> 
> 赞同：2
> 
> 时间：2012-08-13T12:29:45.397
> 
> 标签：php, mediawiki, google-dfp

如何使用 Google 的 DFP 广告管理系统 (DFP) 在 MediaWiki 中所有页面的页眉和页脚部分添加横幅 (728x90) 或广告？

请任何人帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T12:29:46.420

MediaWiki有许多现有的[广告扩展](http://www.mediawiki.org/wiki/Category%3aAdvertising_extensions)可能适合您的需要，或者至少可以作为如何完成的示例。

有几种不同的方法可以将广告横幅注入到 MediaWiki 皮肤中：

*   编辑皮肤模板本身（例如`skins/Vector.php`对于 Vector 皮肤）并将横幅代码添加到合适的位置。这是一个相当快速和简单的解决方案，但存在每次升级 MediaWiki（或升级你的皮肤，如果你使用的是非标准皮肤）时都需要重做的问题。

*   找到合适的[钩子](http://www.mediawiki.org/wiki/Manual%3aHooks)将横幅代码注入皮肤。如果您只是为自己的 wiki 执行此操作，您可以简单地将钩子代码直接写入您的`LocalSettings.php`（或写入您从那里包含的单独 PHP 文件，如果您愿意的话），但您也可以将其变成完整的 MediaWiki扩展名（这基本上只是意味着，至少，将它放在一个单独的文件中并添加一些样板代码）。

    唉，为工作找到合适的钩子可能并不总是微不足道的。对于向侧边栏注入广告，[SkinBuildSidebar](http://www.mediawiki.org/wiki/Manual%3aHooks/SkinBuildSidebar)钩子可能很方便；[SkinAfterContent](http://www.mediawiki.org/wiki/Manual%3aHooks/SkinAfterContent)可能适用于页脚广告，而对于顶部广告，您可以（ab）使用[SiteNoticeAfter](http://www.mediawiki.org/wiki/Manual%3aHooks/SiteNoticeAfter)挂钩。

*   创建一个[解析器标签扩展](http://www.mediawiki.org/wiki/Manual%3aTag_extensions)，允许您向`<adshere/>`页面添加自定义标签，以便在该位置注入广告横幅代码。直截了当，但需要您将标签放在您希望在其上投放广告的任何页面上（或在[界面消息](http://www.mediawiki.org/wiki/Manual%3aSystem_message)中，如果您能找到合适的页面；提示：尝试将参数附加`uselang=qqx`到 URL 以查看哪些消息在哪里使用）。

*   找到一个被视为原始 HTML 的适当位置的界面消息，并将您的广告代码直接放在那里。唉，这样的消息并不多，而且趋势是摆脱剩下的少数。

*   对于只能使用 JavaScript 注入的广告，您只需将代码放入`MediaWiki:Common.js`（或相应的皮肤特定 JS 页面中）即可。

# javascript - IE 和悬停状态冻结

> ID：11934306
> 
> 赞同：1
> 
> 时间：2012-08-13T12:29:51.853
> 
> 标签：javascript, html, css, internet-explorer, dom

在处理一个项目时，我们遇到了一个仅在 IE 浏览器中出现的错误。这是 JS 小提琴：http: [//jsfiddle.net/tuHew/1/](http://jsfiddle.net/tuHew/1/)

重现步骤：
1）单击中间的 div，里面有文本
2）将鼠标移出结果视图
3）仅在 IE 中查看冻结的悬停状态

它在所有其他浏览器中都可以正常工作，但似乎在 IE 中，当从 DOM 中删除元素时，它会将当前元素状态保存在内存中，并且当它重新插入时，它已经错过了“悬停”事件以及与“：悬停”相关的任何样式" 伪类被冻结，直到您将鼠标悬停在上面。

有谁知道它是 IE 错误还是 IE“功能”？

编辑：尝试查看 IE 和 Chrome/Firefox 的差异！不要忘记在单击 div 后立即将鼠标移开！

# sql-server - Weblogic 12C + SQL Server 2012

> ID：11934308
> 
> 赞同：2
> 
> 时间：2012-08-13T12:30:04.217
> 
> 标签：sql-server, weblogic, sql-server-2012, weblogic12c

在过去的几天里，我一直在尝试使以下设置正常工作：

*   Weblogic 12c 应用服务器
*   Microsoft SQL Server 2012 数据库
*   Java 应用程序

我一直遇到同样的问题：

`java.sql.SQLException: [FMWGEN][SQLServer JDBC Driver]This driver is locked for use with embedded applications.`

在 Oracle 网站上，我发现 Weblogic 12c 支持 SQL Server 2008 `and up`.. 但我开始怀疑这是否适用于 SQL Server 2012 ..

是否有人能够运行此配置和/或有人知道这是否可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T05:55:09.313

经过 2 多天的搜索，我发现必须将正确数量的依赖项添加到类路径中：

```
 <dependency>
        <groupId>weblogic-server</groupId>
        <artifactId>wlsqlserver</artifactId>
        <version>12c</version>
    </dependency>

    <dependency>
        <groupId>weblogic-server</groupId>
        <artifactId>weblogic</artifactId>
        <version>12c</version>
    </dependency>

    <dependency>
        <groupId>weblogic-server</groupId>
        <artifactId>wlclient</artifactId>
        <version>12c</version>
    </dependency> 
```

# java - JMS 持久订阅者能否为 HA 分组？

> ID：11934309
> 
> 赞同：2
> 
> 时间：2012-08-13T12:30:09.713
> 
> 标签：java, jms

我想知道是否可以使用任何 JMS 代理进行以下操作。

我们有 N 个以集群模式运行的服务实例。每个实例都有一个 JMS 持久订阅者，用于处理来自主题的业务事件。

问题是：是否可以配置这些订阅者，使他们中只有一个会收到事件？（基本上，这组持久订阅者的行为就像他们正在从队列中消费一样）。

我知道队列可以做到这一点，但是我们有许多不同的服务（全部是集群的）来监听几个业务事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-24T22:26:12.760

我的问题的答案是 JMS2，因为它有一个称为*共享持久订阅*的新功能，它允许在多个 JVM 之间共享持久订阅。

[JMS2 中的新增功能](http://www.oracle.com/technetwork/articles/java/jms2messaging-1954190.html)（搜索*共享持久订阅*）中的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:38:13.440

如果这有帮助...

对于我们的项目，它是一个集群环境，节点说 (N1,N2,N3)，我们希望特定的 JMS 消息应该由特定的 MDB 队列（在您的情况下为订阅者）提供服务，我们执行了以下操作：

```
A. Create two MDB queue MDB1 and MDB2.
B. Used `MDBNotificationListenerMBean` to stop MDB1 on N2
C. Used `MDBNotificationListenerMBean` to stop MDB2 on N1 & N3. 
```

并将消息发布到不同的队列...

现在 MDB1 在 N1 和 N3 上可用，而 MDB2 仅在 N2 上侦听消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T03:54:51.830

我是古玩，您提到同一应用程序的多个实例在多个节点上运行，这些实例将与同一个代理进行通信，对吗？如果是这样，所有实例都可以共享同一个 JMS 队列来处理业务事件。在这种情况下，不需要大量的队列。您可以为应用程序的所有实例设置一个队列。您认为这种方法有什么问题吗？

目前，没有任何代理实现提供您正在寻找的行为。

# linq - 从通用列表中删除

> ID：11934310
> 
> 赞同：0
> 
> 时间：2012-08-13T12:30:10.180
> 
> 标签：linq

我的列表有这个问题，我似乎无法解决它

我有一个实现具有以下方法的接口的类。

```
public List<T> CalculateWad<T, TH>(
    List<T> outputList,
    List<TH> inputList,
    bool flag)
{
    ...
} 
```

现在，我有一个输出列表和一个带有公共字段合同的输入列表。我需要在输出列表中删除输入列表中存在的所有合同。

它必须尽可能通用。我似乎无法获取列表的字段。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T12:45:11.653

为了访问 Contract 属性，泛型 T 和 TH 必须实现与 Contract 属性的接口。

文档：[where（泛型类型约束）（C# 参考）](http://msdn.microsoft.com/en-us/library/bb384067.aspx)

```
interface IContractable { string Contract { get; } } 
```

然后您的包含 CalculateWad 方法的类必须定义如下：

```
class MyClass<T, TH>
    where T : IContractable
    where TH : IContractable
{
    public List<T> CalculateWad(List<T> outputList, List<TH> inputList, bool flag)
    {
        return outputList
                  .Where(o => 
                      inputList.Select(i => i.Contract).Contains(o.Contract) == false)
                  .ToList();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T12:51:31.093

这应该通过添加一个公共`IHasContract`接口来完成，`T`并且`TH`必须实现：

```
class Program
{
    static void Main(string[] args)
    {
    }

    private IList<T> CalculateWad<T, TH>(IList<T> output,
        IList<TH> input, bool flag)
        where T : IHasContract
        where TH : IHasContract
    {
        var contracts = new HashSet<string >(input.Select(i => i.Contract));

        var qry = from o in output
                  where !contracts.Contains(o.Contract)
                  select o;

        return qry.ToList();
    }

    private sealed class Contract
    {

    }

    private interface IHasContract
    {
        string Contract { get; }
    }

    private sealed class Foo : IHasContract
    {
        public string Contract { get; set; }
    }

    private sealed class Bar : IHasContract
    {
        public string Contract { get; set; }
    }
} 
```

请注意，*这不会修改`output`*您在文本中提到的 。但是，它确实返回了列表的新更改副本，这可能是方法签名所描述的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T12:42:28.880

所以这是你的界面：

public List CalculateWad(List outputList, List inputList, bool flag) { ... }

你需要这样做吗？假设每个列表中的对象都可以通过它们的 equals 方法进行比较。

```
public List<T> CalculateWad<T, TH>( List<T> outputList, List<TH> inputList, bool flag) {

              // cast list to be regular object lists
              List out = (List) outputList;
              List in = (List) inputList;

              for(Object object : in){
                  out.remove(object);  // this looks for an object that matches using contract.equals(object)         
              }
} 
```

标志变量有什么用？

# regex - 正则表达式问号（在 emacs 中）

> ID：11934311
> 
> 赞同：1
> 
> 时间：2012-08-13T12:30:20.860
> 
> 标签：regex, emacs

我想问一下下面的emacs正则表达式是什么意思（如果有人想知道，这是erlang-mode用于匹配单引号原子的正则表达式）：

`'\\(?:[^\\']\\|\\(?:\\\\.\\)\\)*'`

具体来说，我很难找到三件事的解释。

首先，问号应该要么使前面的项目可选或指定前面的量词使懒惰，但这里没有项目或量词，只有一个新组的开始，那么它在这里有什么作用？

第二，转义的撇号。为什么需要避开撇号？

第三，四重转义`\\.`，这不会给您留下一个转义的反斜杠和一个`\.`会使它成为无效正则表达式的 a 吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T05:35:07.917

> `"[^\\']"`
> 第二，转义的撇号。为什么需要避开撇号？

首先请注意，在 Emacs 正则表达式语法中，`\``匹配字符串的开头，并`\'`匹配字符串的结尾。在多行字符串中，这与更熟悉的`^`and不同`$`，后者匹配行首和行尾。

但是，这与替代字符（方括号）无关，因此该序列实际上匹配反斜杠或撇号以外的任何字符。

**编辑：**

所以从评论来看，这仍然会引起混乱，所以让我们分解一下：

`"'\\(?:[^\\']\\|\\(?:\\\\.\\)\\)*'"`

该代码计算为此字符串/正则表达式：

`'\(?:[^\']\|\(?:\\.\)\)*'`

`'`匹配撇号

`\(?:foo\)*`匹配零个或多个`foo`

`foo\|bar`匹配`foo`或`bar`

`[^\']`匹配除反斜杠或撇号以外的任何字符

`\(?:\\.\)`可以（在这种情况下，是一个只出现一次的非捕获组）被重写为 simple `\\.`，并匹配反斜杠后跟除换行符以外的任何字符。

`'`匹配撇号

所以整个事情匹配一个单引号字符串，其中：

*   任何其他单引号都必须以反斜杠开头
*   任何反斜杠必须与另一个非换行符配对（也可以是反斜杠）

当然，这听起来像是一种典型的字符串语法，其中反斜杠可用于转义特殊字符，包括反斜杠本身和分隔引号字符的任何实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:37:33.703

首先： (?: 将多个标记组合在一起而不创建捕获组。这允许您将量词应用于整个组。

第二和第三，我认为那些是逃脱的酒吧。每对意味着`\`，四对意味着`\\`。所以，它根本没有转义撇号。

# node.js - 在哪里可以找到 express.js 设置

> ID：11934312
> 
> 赞同：1
> 
> 时间：2012-08-13T12:30:23.633
> 
> 标签：node.js, express

我几乎不好意思问这个问题，但是我在哪里可以找到有关 express.js 设置的信息？根据我可以`app.set(name, setting)`用来将设置分配`name`给的文档`setting`，但是我无法在任何地方找到有哪些设置以及它们是如何工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:33:13.300

你可以在这里找到它：

[http://expressjs.com/api.html#app-settings](http://expressjs.com/api.html#app-settings)

> **设置**
> 
> 提供以下设置来改变 Express 的行为方式：
> 
> *   `env`环境模式，默认为 process.env.NODE_ENV 或 "development"
> *   `trust proxy`启用反向代理支持，默认禁用
> *   `jsonp callback name`更改 ?callback= 的默认回调名称
> *   `json replacer`JSON替换回调，默认为null
> *   `json spaces`用于格式化的 JSON 响应空间，在开发中默认为 2，在生产中默认为 0
> *   `case sensitive routing`启用区分大小写，默认禁用，将“/Foo”和“/foo”视为相同
> *   `strict routing`启用严格路由，默认情况下“/foo”和“/foo/”被路由器同等对待
> *   `view cache`启用视图模板编译缓存，默认在生产中启用
> *   `view engine`省略时使用的默认引擎扩展
> *   `views`查看目录路径

# wmic - wmic 删除启动项

> ID：11934313
> 
> 赞同：1
> 
> 时间：2012-08-13T12:30:24.270
> 
> 标签：wmic

我想用 wmic 删除一个条目，但总是出错，我看到 DELETE 命令是 STARTUP 的有效动词。我做错了什么？谢谢

```
wmic:root\cli>/node:'pc-test' startup where name="TwonkyServer" DELETE

Delete '\\pc-test\ROOT\CIMV2:Win32_StartupCommand.Command="C:\\PROGRA~1\\Twonky\\TWONKY~1\\TWONKY~4.EXE ",Location="Common Startup",Name="TwonkyServer",User="Public"' (Y/N/?)? y
Deleting instance \\pc-test\ROOT\CIMV2:Win32_StartupCommand.Command="C:\\PROGRA~1\\Twonky\\TWONKY~1\\TWONKY~4.EXE ",Location="Common Startup",Name="TwonkyServer",User="Public" 
```

错误： **描述 = 提供者无法进行尝试的操作**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T22:05:40.273

我不知道你是否可以通过 WMI 控制台来实现它，但是通过 VBS 尝试提供一个引用系统的特权名字对象字符串：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa389292(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa389292(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-03T21:17:51.913

您可以通过以下命令获取条目：

wmic 启动获取位置 | findstr /B /C:"TwonkyServer"

然后从注册表中删除它

注册删除 [{/v ValueName | /ve | /va}] [/f]

更多帮助在 Reg 删除： [https ://technet.microsoft.com/en-us/library/cc742145.aspx](https://technet.microsoft.com/en-us/library/cc742145.aspx)

# tridion - Microsoft Fast Search 和 Tridion 2011 SP1 的集成

> ID：11934319
> 
> 赞同：-2
> 
> 时间：2012-08-13T12:30:44.690
> 
> 标签：tridion, tridion-2011

我们正在升级到 Tridion 2011 SP1，作为 Tridion 搜索实施的一部分，我们正在使用 FS4SP（sharepoint 2010 的快速搜索）。

在提议的实施中，搜索环境由以下服务器组成：

1.  FAS4SP
2.  FISE

有人可以指导我们如何将内容从 tridion 推送到 FAST 以及如何检索相同内容吗？（这里由于某些原因我们不考虑通过 FAST 抓取网站）

哪些 API 可用于此实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T16:57:45.257

您可能希望为 FAST 创建 XML 并让自定义部署程序（或事件系统）将内容发送到 FAST。

首先创建可以工作的 FAST XML 并编写一个示例应用程序，以便您可以从 .NET 或 Java 应用程序将其插入到 FAST 索引中。这还不涉及 Tridion。

然后编写您的自定义部署程序或事件系统并将 XML 传递给 FAST。

如果您使用 Custom Deployer 方法，如果您自己没有这样做或者不是 Java 程序员，我建议您联系 Tridion 专业服务。新的 Tridion 2011 Storage API 为 Custom Deployer 提供了新的机会。同时，我建议将 FAST XML 附加到最后的普通页面内容，并用一些标记包围，并让您的自定义部署程序将其从页面输出中拉出，发送到 FAST，然后在继续之前从输出中删除。

对于那些没有认真的内容交付/部署/Java技能的人来说，这是一个相当困难的挑战。但是，如果您想自己动手，我建议您至少花 2 周的时间来研究现有的解决方案并尝试使用 API。

使用事件系统可能会更容易一些 - 但您的成功或失败消息不会出现在发布队列中，如果搜索索引无法更新，您只能记录失败而不将信息传递回用户。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T12:46:42.517

如果您不想使用爬取方式，则需要创建自定义部署器，请查看另一篇文章：

[我们如何将 Microsoft FAST 与 SDL Tridion 2011 SP1 集成？](https://stackoverflow.com/questions/11014950/how-can-we-integrate-microsoft-fast-with-sdl-tridion-2011-sp1)

或者，如果您没有熟悉 Java 的开发团队，您可能会考虑创建一个 .NET 应用程序，当您的页面或组件发布、更新或删除时，该应用程序会根据文件系统或数据库触发器更新您的 FAST 索引从您的代理存储库中。

# powershell - 自定义提供程序上的 Powershell 设置位置在控制台上可以正常工作，但不能作为脚本

> ID：11934322
> 
> 赞同：1
> 
> 时间：2012-08-13T12:30:52.913
> 
> 标签：powershell

**编辑这是一个错误，哎呀，这里的任何信息都无法帮助解决它长话短说，当我运行脚本时，oauth 令牌已过期**

如果我通过 powershell 控制台运行它，我已经制作了一个自定义的 powershell 提供程序，它可以正常工作：

```
PS C:\Users\foo.bar> add-pssnapin Pacme
PS C:\Users\foo.bar>
PS C:\Users\foo.bar> $token = set-token -clientId fileadminprojectacmeoob
Please Enter the Auth code into the console!
*removed*
PS C:\Users\foo.bar>
PS C:\Users\foo.bar> new-psdrive -psprovider Pacme -name myacme -root "" -Host api.acme.dev -token $token

*provider gets created no point showing this just takes up space*

PS C:\Users\foo.bar> cd myacme:/
PS myacme:\> 
```

但是，如果我将其作为脚本运行

```
Set-Location : Cannot find path 'myacme:\' because it does not exist.
At C:\scripts\entry.ps1:20 char:3
+ cd <<<<  myacme:
    + CategoryInfo          : ObjectNotFound: (myacme:\:String) [Set-Location], ItemNotFoundException
    + FullyQualifiedErrorId : PathNotFound,Microsoft.PowerShell.Commands.SetLocationCommand

PS C:\scripts> 
```

有谁知道为什么 cd myAcme: 在控制台中可以正常工作，但不能作为脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:55:18.767

这是一个错误，我的结局哎呀，这里的任何信息都无法帮助解决它长话短说令牌将在脚本运行时到期

# ios - 最近发布的 iPhone 应用程序更新挂在闪屏上

> ID：11934328
> 
> 赞同：2
> 
> 时间：2012-08-13T12:31:13.877
> 
> 标签：ios, iphone

我大约一周前提交了我的应用程序更新以供审核，当我提交它时它对我来说效果很好（在多个设备和模拟器上）。Apple 审查并批准了它，现在每当用户下载它时，该应用程序就会永远挂在启动屏幕上。在 iOS 6 beta 上，它立即崩溃。我相信苹果放在商店下载的包一定有问题，但老实说我不知道​​。以前有人发生过这种情况，或者有人对如何调试这样的问题有任何想法吗？

这可能是我第 30 次左右向 Apple 提交内容，而且这是第一次发生这样的事情。我已经使用技术支持事件联系了苹果，但到目前为止没有任何回应。我还使用了itunesconnect门户上的联系我们页面来询问它，也没有得到任何回应。这两件事都是在周五完成的。作为次要问题，有没有人知道当您以其中任何一种方式提交问题时，需要多长时间才能收到 Apple 的回复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-12T09:55:51.317

我遇到了同样的问题。这是一个**DNS**问题。这让我发疯了几个月，因为我无法重现这个问题。然而，一个配置不佳的 WiFi 帮助我偶然重现了这个问题。

iOS 尝试在应用程序生命周期开始时执行 DNS 查找。这甚至在执行单行代码之前。如果在主线程上同步执行 DNS 查找，则会阻塞 UI。此问题仅在其尝试解析 DNS 大约 30 秒同时阻止 UI 的情况下出现。因此，iOS 看门狗会因为超时而终止应用程序。苹果也有一个文档 - [https://developer.apple.com/library/prerelease/ios/documentation/NetworkingInternetWeb/Conceptual/NetworkingOverview/CommonPitfalls/CommonPitfalls.html](https://developer.apple.com/library/prerelease/ios/documentation/NetworkingInternetWeb/Conceptual/NetworkingOverview/CommonPitfalls/CommonPitfalls.html)

您可以在代码中搜索 DNS 查找并检查其执行情况。就我而言，这是一个导致问题的第 3 方 C 库。

我知道自从提出这个问题以来已经很久了，希望它对某人有所帮助。

# iphone - 访问moreNavigationController的UITableView的-willDisplayCell方法

> ID：11934334
> 
> 赞同：0
> 
> 时间：2012-08-13T12:32:02.710
> 
> 标签：iphone, ios, cocoa-touch, ios5, uikit

`UITableView`像这样在moreNavigationController中设置backgroundView之后......

```
UITableView *moreTableView = (UITableView *)tabBarController.moreNavigationController.topViewController.view;
[moreTableView setBackgroundView:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"bg.png"]]]; 
```

`UITableView`...其细胞`backgroundColor`从白色变为透明（透明）。我尝试使用以下代码行将其设置回白色...

```
for (UITableViewCell *cell in [moreTableView visibleCells]) {
    [cell setBackgroundColor:[UIColor whiteColor]];
} 
```

...但不幸的是，这不起作用，所以我想唯一的解决方案是在`-willDisplayCell:`方法中设置该 backgroundColor 。谁能告诉我如何访问该方法？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:35:37.423

如果您有自定义单元格，则可以在 的子类中设置单元格的背景颜色`UITabeViewCell`，否则您应该尝试将此逻辑添加到`tableView:cellForRowAtIndexPath:`UITableView 的数据源的方法中。

您在循环中所做的只会影响可见单元格，因为它们将被重复使用，并且如果背景设置为动态清除，那么您将始终覆盖背景。

# ruby-on-rails - 将块传递给延迟作业

> ID：11934338
> 
> 赞同：12
> 
> 时间：2012-08-13T12:32:24.307
> 
> 标签：ruby-on-rails, ruby, block, delayed-job

我有一个标记为由delayed_job异步处理的函数：

```
class CapJobs
  def execute(params, id)
    begin
      unless Rails.env == "test"
        Capistrano::CLI.parse(params).execute!
      end
    rescue
      site = Site.find(id)
      site.records.create!(:date => DateTime.now, :action => "Task Failure: #{params[0]}", :type => :failure)    
      site.save
    ensure
      yield id
    end 
  end   
  handle_asynchronously :execute
end 
```

当我运行这个函数时，我传入一个块：

```
 capjobs = CapJobs.new
 capjobs.execute(parameters, @site.id) do |id|
   asite = Site.find(id)
   asite.records.create!(:date => DateTime.now, :action => "Created", :type => :init)
   asite.status = "On Demo"
   asite.dev = true
   asite.save
 end 
```

在没有延迟作业的情况下运行时效果很好，但是在使用它运行时出现以下错误

```
2012-08-13T09:24:36-0300: [Worker(delayed_job host:eagle pid:12089)] SitesHelper::CapJobs#execute_without_delay failed with LocalJumpError: no block given (yield) - 0 failed attempts
2012-08-13T09:24:36-0300: [Worker(delayed_job host:eagle pid:12089)] PERMANENTLY removing SitesHelper::CapJobs#execute_without_delay because of 1 consecutive failures.
2012-08-13T09:24:36-0300: [Worker(delayed_job host:eagle pid:12089)] 1 jobs processed at 0.0572 j/s, 1 failed ... 
```

似乎没有拿起传入的块。这不是正确的方法还是我应该找到不同的方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T15:52:43.673

delay_job 的工作原理是将您的作业保存到数据存储（通常是您的主数据库）中，然后将作业从该数据存储中加载到后台进程中，并在其中处理/执行。

要将作业保存到数据库中，delayed_job 需要以某种方式保存使用什么参数调用哪个对象的方法。这是通过将所有内容序列化为字符串来完成的（delayed_job 为此使用*yaml*）。不幸的是，块不能被序列化。所以后台工作人员不知道 block 参数并在没有它的情况下调用方法。这导致`LocalJumpError`该方法何时尝试让步到该块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T17:15:18.143

我找到了一种方法。这有点hacky，但效果很好。我发现[这篇](http://www.rubyquiz.com/quiz38.html)关于创建 SerializableProc 类的文章。如果我将它传递给函数，那么一切都会很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T15:13:08.313

大多数人会将其视为抽象问题。

proc 代码可能不会从运行到运行（vars 除外）发生变化，因此您应该将块代码转换为类或实例方法。传递该方法的名称，然后在您的`execute`方法中调用它，例如

`@some_data = CapJobs.send( target_method )`

或者甚至更好

`@some_data = DomainSpecificModel.send( target_method )`

# iphone - Xcode 无法使用所选设备运行（奇怪的错误）

> ID：11934352
> 
> 赞同：2
> 
> 时间：2012-08-13T12:33:16.077
> 
> 标签：iphone, xcode, build

我正在尝试在我的 iphone 上调试应用程序。在昨天更新 Facebook 客户端库之前，我能够做到这一点。更新后，发生了一些奇怪的事情，现在我收到“Xcode 无法使用所选设备运行”错误。

![错误截图](../Images/e2c1be29b72ad03393468724a2b6061b.png)

从截图中可以看出错误。请注意，在中上部它显示“已在baysungur 的iPhone 上运行FacebookSDK”，这很奇怪，因为我的应用程序名称不同。

我尝试了一些事情，比如添加架构来构建设置、降低最小部署目标等。它们没有奏效。

有人有什么想法吗？

我正在使用 Mountain Lion 和 Xcode 4.4.1。我正在尝试连接到 iphone 4。

注意：在更新该 facebook 客户端之前，我能够连接到设备。

编辑：好吧，模拟器也会发生类似的事情。现在我基本上无法以任何方式调试我的应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T14:42:12.510

Facebook 库中有一个名为 Info.plist 的文件，导致 xcode 头脑混乱。

奇怪的是我在项目设置中看到了正确的设置。我的意思是，该 UI 中的一切似乎都是正确的，但显然 xcode 使用了错误的 Info.plist。

删除第二个 Info.plist 解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:00:23.490

设备是否连接在管理器中？如果是，则退出您的 xcode 并重新启动您的设备并选择有效的配置文件并重试。

谢谢

# c# - 从 xml 解析 wp7 应用程序中的图像

> ID：11934355
> 
> 赞同：1
> 
> 时间：2012-08-13T12:33:16.253
> 
> 标签：c#, xml, windows-phone-7

我正在关注本教程： http: [//www.developer.nokia.com/Community/Wiki/Employees_app_with_XML_parsing_and_messaging_in_WP7](http://www.developer.nokia.com/Community/Wiki/Employees_app_with_XML_parsing_and_messaging_in_WP7)

我有一个显示我所在城市的事件的应用程序，每个事件都有一个图像和一个标题，如果我单击一个事件，我将转到显示更大图像的详细信息页面，事件的标题和描述，一切类似于教程，实际上它工作得很好，问题吗？它只显示了一个事件。

在这里你可以看到我使用的提要：

[http://th05.deviantart.net/fs70/PRE/f/2012/226/0/7/xml_by_javabak-d5b1d16.png](http://th05.deviantart.net/fs70/PRE/f/2012/226/0/7/xml_by_javabak-d5b1d16.png)

这是我的活动课：

```
namespace Bluey
{
   [XmlRoot("rss")]
   public class Eventi
   {
       [XmlArray("channel")]
       [XmlArrayItem("item")]
        public ObservableCollection<Evento> Collect { get; set; }
   }
} 
```

这是我的活动课

```
namespace Bluey
{
  public class Evento
  {
    [XmlElement("title")]
    public string title { get; set; }
    [XmlElement("enclosure")]
    public string image { get; set; }
    [XmlElement("description")]
    public string description { get; set; }
  }
} 
```

我注意到在事件类中，如果我将 [XmlElement("enclosure")] 更改为 [XmlElement("url")] 我将获得所有事件但没有图像

这是我的解析器

```
 public EventiPage()
    {
        InitializeComponent();
        // is there network connection available
        if (!System.Net.NetworkInformation.NetworkInterface.GetIsNetworkAvailable())
        {
            MessageBox.Show("No network connection available!");
            return;
        }
        // start loading XML-data
        WebClient downloader = new WebClient();
        Uri uri = new Uri("http://www.applinesrl.com/appoggio/events/feed", UriKind.Absolute);
        downloader.DownloadStringCompleted += new DownloadStringCompletedEventHandler(EventiDownloaded);
        downloader.DownloadStringAsync(uri);

    }

    void EventiDownloaded(object sender, DownloadStringCompletedEventArgs e)
    {
        if (e.Result == null || e.Error != null)
        {
            MessageBox.Show("There was an error downloading the XML-file!");
        }
        else
        {
            XmlSerializer serializer = new XmlSerializer(typeof(Eventi));
            XDocument document = XDocument.Parse(e.Result);
            Eventi eventi = (Eventi)serializer.Deserialize(document.CreateReader());
            EventiList.ItemsSource = eventi.Collect; 
        }
    } 
```

任何帮助将不胜感激，tnx 建议！

迭戈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:10:46.963

根据您发布的示例 XML，您的图像似乎嵌入在附件节点中。因此，Evento 类是部分正确的。你所要做的就是这样的：

```
public class Enclosure
{
    [XmlElement("url")]
    public string url { get; set; }
}

public class Evento
{
    [XmlElement("title")]
    public string title { get; set; }
    [XmlElement("enclosure")]
    public Enclosure image { get; set; }
    [XmlElement("description")]
    public string description { get; set; }
} 
```

更新以显示如何访问图像 URL：

```
XmlSerializer serializer = new XmlSerializer(typeof(Eventi));
XDocument document = XDocument.Parse(e.Result);
Eventi eventi = (Eventi)serializer.Deserialize(document.CreateReader());
foreach (Evento obj in eventi.Collect)
{
    Debug.WriteLine("Title: {0}", obj.title);
    Debug.WriteLine("Img: {0}", obj.image.url); // Retrieving image URL
} 
```

注意：XML 中的一些值已经是用 base64 编码的图像，而另一些是 URL。所以，你应该验证那些。请在附件中找到我使用我的代码和您的 xml 数据获得的数据的图像捕获。![在此处输入图像描述](../Images/5ebca906d34b43202ecd9934c377e444.png)

# java - 有人可以简要区分一个 java 库、一个类和一个包吗

> ID：11934357
> 
> 赞同：-3
> 
> 时间：2012-08-13T12:33:27.940
> 
> 标签：java

我正在记录我的项目，这是一个非常简单的 Android 应用程序，我对这三个应用程序感到相当困惑。

您在 Java 上导入的库是什么？API 是库吗？如果是这样，这是否意味着 Android 是一个库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T12:39:57.900

`library`：一个或多个包的集合将被称为库。
`package`：一组类将贡献一个包。
`class`：~~一个编译的java，它完成了它自己的原子功能。~~类是用于创建自身实例的构造
在`java`中，您可以导入 a`package`或`class`自身。是的，`API`可以称为库，我们可以使用它来构建自己的系统/应用程序。`Android`是一个`platform`而不是`library`。但`android SDK`可以称为库，而不是具有与设备对话的 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:40:12.500

A`library`是一个包含任何类型的实现的软件，软件可以在 windows 中执行 '.dll' 文件，在 java 中执行 '.jar' 文件。库通常提供一个或多个`API`s（应用程序编程接口），允许您使用应用程序。API 属于库中的公共`Class`es 和`Interface`s（或 C 中的函数）。

Android是一个操作系统。它提供库。这些提供 API。

编辑：忘记包裹：

`packages`是java对类和接口进行分组的方式。

另一个编辑：类是面向对象语言的一部分。它们定义了 Object 的（属性）和做什么（方法）。

`.class`文件是编译的java代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T13:09:55.123

**类：**通过使用（Java 编译器）`byte-code`编译文件生成的文件。进一步读取以**将其转换为**.`.java``javac``JIT` **`runtime machine level executable code`**

 ****package:** `Collection of classes`，在java中，**主要是**所有的包都根据它们的功能。

**图书馆：**考虑它的 aa`collection of packages`等`documentation`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T12:42:48.737

类是允许创建自身实例或使用其包含的方法执行操作的代码构造。它是程序的基本单元。

一个包，如果是一组交互并提供一些特殊功能/帮助来完成特定任务的类。

库是有助于软件开发的类和文档的组合，通常包括几个包。**

# ruby-on-rails - Rails 2.3.11 在服务器上显示日期时间错误

> ID：11934367
> 
> 赞同：0
> 
> 时间：2012-08-13T12:33:59.573
> 
> 标签：ruby-on-rails, datetime

我得到了这个错误，让我发疯。

我想要的输出是显示从星期日开始的一周，然后根据此计算 10 周前。

例子：

> [周日，2012 年 8 月 12 日，周日，2012 年 8 月 5 日，周日，2012 年 7 月 29 日，周日，2012 年 7 月 22 日，周日，2012 年 7 月 15 日，周日，2012 年 7 月 8 日，周日，2012 年 7 月 1 日，周日，2012 年 6 月 24 日，周日, 2012 年 6 月 17 日，2012 年 6 月 10 日，星期日，2012 年 6 月 3 日，星期日]

但是在我的机器上它是正确的并返回上面的数组，但是在服务器上是错误的:(

服务器的输出是：

> [2012 年 8 月 11 日星期六、2012 年 8 月 4 日星期六、2012 年 7 月 28 日星期六、2012 年 7 月 21 日星期六、2012 年 7 月 14 日星期六、2012 年 7 月 7 日星期六、2012 年 6 月 30 日星期六、2012 年 6 月 23 日星期六、星期六, 2012 年 6 月 16 日，2012 年 6 月 9 日，星期六，2012 年 6 月 2 日，星期六]

如果我访问应用程序并从脚本/控制台调用控制器显示错误但如果我在脚本/控制台重新计算显示正确。

我的环境：

> OS X 10.7.4，ruby 1.8.7（2012-04-14 patchlevel 361）[i686-darwin11.3.0]，rvm 1.10.2，Seg 13 Ago 2012 09:27:46 BRT（系统日期）

和服务器环境：

> Ubuntu 12.04，ruby 1.8.7（2012-02-08 MBARI 8/0x8770 补丁级别 358）[i686-linux]，MBARI 0x8770，Ruby 企业版 2012.02，rvm 1.14.0（稳定），8 月 13 日星期一 13:29： 13 西 2012

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T18:02:25.167

可能是您的服务器上的时区不匹配，尝试在 config/appliction.rb 中明确设置您的时区：

```
config.time_zone = "Pacific Time (US & Canada)" 
```

这个问题的一个流行的解决方案是在你的控制器上设置一个 before_filter，为每个用户配置正确的时区。请参阅：[http](http://railscasts.com/episodes/106-time-zones-in-rails-2-1) ://railscasts.com/episodes/106-time-zones-in-rails-2-1作为起点。

# c# - Microsoft XNA MediaPlayer.Play(song) 不播放某些歌曲

> ID：11934370
> 
> 赞同：1
> 
> 时间：2012-08-13T12:34:13.103
> 
> 标签：c#, xna

我对 XNA 很陌生，我一直在尝试解决这个问题。不用说，我不能（因此问题！！）

我一直在尝试使用 XNA 来处理音频，它似乎运行良好。但是，尽管我尝试播放的所有音乐文件都是 MP3 格式，但仍有一些歌曲无法播放。

我做的简单测试的结果如下（假设“SongB”是不播放的歌曲）

*   MediaPlayer.Play(SongA) --> 作品
*   MediaPlayer.Play(SongB) --> 没有声音
*   MediaPlayer.Play(SongC) --> 作品

如果我有一个列出歌曲的列表，以及一个在调用“next()”时播放下一首歌曲的程序：

```
int playingIdx = 0;

SongList[0] = SongA;
SongList[1] = SongB;
SongList[2] = SongC;

void next()
{
    PlayingIdx++;
    MediaPlayer.Play(SongList[PlayingIdx]);
} 
```

那么当PlayingIdx = 1时，跳过SongB，程序播放SongC。有没有人遇到过类似的事情？或者是否有某种类型的 MP3 XNA 可以播放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T05:05:22.900

我的猜测是 XNA 播放器比大多数音频播放器对某些格式不一致的情况过于敏感。尝试解码然后重新编码导致问题的歌曲。对于此任务，您可以使用[LAME](http://lame.sourceforge.net/links.php#Binaries)，例如：

```
lame --mp3input --strictly-enforce-ISO song.mp3 fixed_song.mp3 
```

除此之外会尝试重新排列歌曲的顺序只是为了检查它并不重要。

# php - phpMyEdit 旧版本添加按钮不起作用

> ID：11934378
> 
> 赞同：0
> 
> 时间：2012-08-13T12:34:43.627
> 
> 标签：php

我有旧脚本，一些 phpMyEdit.class.php。

在我们有一个运行 php4 的服务器之前，它一直在工作，现在我们已经转移到 php5，它不再工作了。

我试图找出问题所在，但没有运气。我已经花了4个小时。

当我想更改、删除、更新或添加新记录时，它只是刷新页面，但没有任何反应。

默认语言是英语，所以添加按钮也添加到数组中。

请问有人吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:01:24.837

下载最新版本 ( [http://opensource.platon.sk/projects/download.php?project_id=5&package=phpMyEdit](http://opensource.platon.sk/projects/download.php?project_id=5&package=phpMyEdit) ) 并包含它而不是旧版本。

# php - PHP fork 延迟处理

> ID：11934382
> 
> 赞同：1
> 
> 时间：2012-08-13T12:35:03.900
> 
> 标签：php, fork

我有一个每分钟运行一次的 cron 作业，并为多租户应用程序执行内部 cron 逻辑。PHP 脚本获取每个客户端及其域，然后分叉自身并在每个客户端“范围”（内部名称）下运行。见下文：

```
<?php

$i = 0;
foreach($clients as $client) {
    $client->get_domains();
    foreach($client->domains as $domain) {
        $threads[$i]['client'] = $client->id;
        $threads[$i]['domain'] = $domain->id;
        $i++;
    }
}

$pids = array();
foreach($threads as $key => $thread) {
    $pids[$key] = pcntl_fork(); 
    if(!$pids[$key]) {
        $start = microtime(TRUE);
        $handle = popen($args[0] . ' --client ' . $thread['client'] . ' --domain ' . $thread['domain'] . ' 2>&1', 'r');
        // $end1 = ~0.001 sec execution time
        pclose($handle);
        // $end2 = ~60 sec execution time
        exit();
    }
} 
```

我目前正在将负载迁移到另一台服务器，因此请像现有机器一样安装和设置全新的 Ubuntu 11.04。该应用程序上运行着大约 40 个域，因此在一秒钟内创建了 40 个分叉。

我的问题是，每个分叉进程仅返回`TRUE`进程的事件大约需要 60 秒。

在转储`$end1`时间时，popen() 大约需要 0.001 秒，正如预期的那样。但是，在监视`$end2`pclose() 时需要大约 60 秒。

看着 htop，进程是可见的，但似乎被暂停了。VM 中有 4 个 CPU 和 16GB RAM，运行时服务器上的负载低于 0.1。在 Ubuntu 11.10 上运行 PHP 5.3.6。

我有一种感觉，这是 OS / PHP 配置上的东西，但 ulimit 是正常的，PHP 内存限制和最大执行时间是无限的。还有什么我应该检查的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:41:45.967

正如文档所说，“pclose() 函数等待相关进程终止。” 你的设计在很多层面上真的没有任何意义。似乎没有任何理由使用线程或使用`popen`. 是否有更多代码可以使这些决定变得明智？因为这看起来真的像一个“氢弹杀死蚂蚁”的程序。只需使用`fork`/ `exec`。

# javascript - 悬停div时如何影响图像的不透明度？

> ID：11934384
> 
> 赞同：0
> 
> 时间：2012-08-13T12:35:11.240
> 
> 标签：javascript, css, opacity

我非常接近实现我想要的......但我想知道我是否已经达到了 css 的极限。

如果您导航到[http://host17.qnop.net/~gjcwebde/ecocamel/index.php?option=com_content&view=article&id=28&Itemid=49](http://host17.qnop.net/~gjcwebde/ecocamel/index.php?option=com_content&view=article&id=28&Itemid=49)

我们有一个产品滑块。我正在努力做到这一点..

1) 产品在负载时以 100% 的不透明度开始。2) 将鼠标悬停在产品上..您悬停的产品保持 100% 的不透明度，**其他的都说 0.5 不透明度**（变暗）。

我几乎用 css 实现了这一点。哟可以看到它的工作，除了，当您将鼠标悬停在弹出的描述...活动图像恢复到 0.5 不透明度。是否可以控制此图像的不透明度，同时将鼠标悬停在弹出描述上？我真的很希望如此！失败了......我怎么能用js来实现呢？在这里看了一些，但没有一个真正适用于我的情况。希望我已经提供了足够的信息让你理解。干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:53:20.343

`#containingDiv:hover img { }`当任何包含的 div 悬停在上面时会影响 img，所以如果我是你，我会使用它，Ryan 的解决方案只会在你将鼠标悬停在它上面时影响 img

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:44:23.763

当用户没有悬停时，这应该适用于图像的不透明度。

```
divName img {
 opacity:0.3;
 filter:alpha(opacity=30);(IE)
} 
```

然后当他们悬停时（这应该包括您的产品信息样式，就像您在悬停时显示的那样。）

```
diveName img:hover{
 opacity:1.0;
 filter:alpha(opacity=100);(IE)
} 
```

**还要在启动时加入一个活动类，以便在页面加载时至少显示一个产品**

例如：

```
divName img .activeLoad{
 opacity:1.0;
 filter:alpha(opacity=100);(IE)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T13:00:15.390

我拿起你的 html 并把它放在一个小提琴中。看看[http://jsfiddle.net/hMW8N/](http://jsfiddle.net/hMW8N/)

无论如何，这就是您基本上所需要的。我已经过度指定这些选择器，但我这样做是为了让您更好地理解。

```
#slider-list-stick-1:hover .slide-index{
    opacity: 0.5;
    filter:alpha(opacity=50); //ie
}

#slider-list-stick-1 .slide-index:hover {
    opacity: 1;
    filter:alpha(opacity=100); //ie
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T13:00:37.220

将此声明添加到您的样式中

```
.slide-index:hover img{
    opacity: 1;
} 
```

由于其他`div`s 也在`slide-index`容器中 -`hover`仍将应用效果。

# javascript - IE8 的 Google Maps API 问题

> ID：11934385
> 
> 赞同：1
> 
> 时间：2012-08-13T12:35:15.573
> 
> 标签：javascript, google-maps-api-3

我正在使用 Google Maps API 编写一些代码，它在所有浏览器（FF、IE9、Chrome）中都可以正常工作，但在 IE8 或更低版本中，我已将地图分配给名为 Map 的全局变量，该变量会被填充，但当 addMarker 函数在 IE8 中调用 Map 全局为 null，但是当我从定位器函数调用 addMarker 函数时，它确实有效，我在下面包含了所有这些函数。

```
var GoogleMaps = {};
var Map = null;
var init = (function () {
"use strict";

var MapType = null;
var ZoomLevel = null;
var ControlPos = null;
var ControlSize = null;
var myLatLong = null;

var Geocoder;
var result = null;

GoogleMaps.setup = function (options) {

    myLatLong = new google.maps.LatLng(24.886436490787712, -70.26855468754);

    if (google.loader.ClientLocation) {
        myLatLong = new google.maps.LatLng(
            google.loader.ClientLocation.latitude,
            google.loader.ClientLocation.longitude);
    } else if (options.Lat !== null && options.Long !== null) {
        options.Location = new google.maps.LatLng(options.Lat, options.Long);
    } else {
        // Else centre to UK
        options.Location = new google.maps.LatLng(52.961875, -1.419433);
    }

    if (options.MapType.toUpperCase() === 'ROADMAP') {
        MapType = google.maps.MapTypeId.ROADMAP;
    } else if (options.MapType.toUpperCase() === 'TERRAIN') {
        MapType = google.maps.MapTypeId.TERRAIN;
    } else if (options.MapType.toUpperCase() === 'HYBRID') {
        MapType = google.maps.MapTypeId.HYBRID;
    } else {
        MapType = google.maps.MapTypeId.SATELLITE;
    }

    // Check zoom level, if not set then set to zoom level 8.
    if (options.ZoomLevel) {
        ZoomLevel = options.ZoomLevel;
    } else {
        ZoomLevel = 8;
    }

    var mapOptions = {
        center: myLatLong,
        zoom: ZoomLevel,
        mapTypeId: MapType
    };

    var mapDiv = document.getElementById('canvas');
    // Map gets initiated here 
    window.Map = new google.maps.Map(mapDiv, mapOptions);

    delete options.MapType;
    delete options.Lat;
    delete options.Long;
    delete options.ZoomLevel;
};

GoogleMaps.addMarker = function (options) {
    var Location = null;
    var Animation = null;
    var Title = null;
    var Draggable = null;
    var Content = null;
    var InfoWindow = null;
    var Flat = null;
    var Clickable = null;

    if (options.lat !== null && options.long !== null) {
        Location = new google.maps.LatLng(options.lat, options.long);
        ;
    } else {
        Location = myLatLong;
    }

    if (typeof(options.position) !== "undefined") {
        Location = options.position;   
    }

    if (options.animation.toUpperCase() === 'BOUNCE') {
        Animation = google.maps.Animation.BOUNCE;
    } else if (options.animation.toUpperCase() === 'DROP') {
        Animation = google.maps.Animation.DROP;
    } else {
        Animation = google.maps.Animation.NONE;
    }

    if (options.draggable !== null && options.draggable === 'true') {
        Draggable = true;
    } else {
        Draggable = false;
    }

    if (options.title !== null) {
        Title = options.title;
    } else {
        Title = null;
    }

    if (options.content !== null) {
        Content = options.content;
        InfoWindow = new google.maps.InfoWindow({
            content: Content
        });
    }

    if (options.flat !== null && options.flat === 'true') {
        Flat = true;
    } else {
        Flat = false;
    }

    if (options.clickable !== null && options.clickable === 'true') {
        Clickable = true;
    } else {
        Clickable = false;
    }

        // Gets used in this section
        var Marker = new google.maps.Marker({
        position: Location,
        map: window.Map,
        animation: Animation,
        draggable: Draggable,
        title: Title,
        flat: Flat,
        clickable: Clickable,
        zIndex: 1
    });
    // and sets map here
    Marker.setMap(window.Map);
    if (options.content !== null) {
        google.maps.event.addListener(Marker, 'click', function (e) {
            InfoWindow.open(window.Map, this);
            google.maps.event.addListener(window.Map, 'click', function (e) {
                InfoWindow.close(window.Map, window.Marker);
            });
        });
    }
    google.maps.event.addListener(Marker, 'dragend', function (e) {
    });

    delete options.lat;
    delete options.long;
    delete options.animation;
    delete options.title;
    delete options.content;
    delete options.flat;
    delete options.draggable;
    delete options.clickable;
};

GoogleMaps.Locator = function (result) {
    var address = null;
    Geocoder = new google.maps.Geocoder();
    address = result;
    Geocoder.geocode({ 'address': address }, function (response, status) {
        if (status === google.maps.GeocoderStatus.OK) {
            window.Map.setCenter(response[0].geometry.location);
            var Location = new google.maps.LatLng(response[0].geometry.location.Xa, response[0].geometry.location.Ya);
            var markerOptions = {
                animation: "drop",
                draggable: "true",
                content: 'Hello World!',
                title: "Hello",
                position: Location
            };
            GoogleMaps.addMarker(markerOptions);
        } else {
            alert("Geocode was not successful for the following reason: " + status);
        }
    });
}; 
```

以下是我调用函数的方式：

```
var markerOptions = {
        lat: 52.48278,
        long: -0.892089,
        animation: "drop",
        draggable: "true",
        content: 'Hello World!',
        title: "Click Me"
    };
 google.maps.event.addDomListener(window, 'load', function () { GoogleMaps.setMarker(markerOptions) });

 google.maps.event.addDomListener(window, 'load', function () { GoogleMaps.Locator('London') }); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-20T19:07:25.253

我解决了这样的问题。

`<meta http-equiv=”X-UA-Compatible” content=”IE=EmulateIE7; IE=EmulateIE9″/>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:22:51.433

尝试在您的设置中更改此行

```
window.Map = new google.maps.Map(mapDiv, mapOptions); 
```

只是

```
Map = new google.maps.Map(mapDiv, mapOptions); 
```

这样您就可以访问声明的全局变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T14:06:17.320

何时调用 GoogleMaps.setup？现在看起来取决于浏览器，它可以在附加的函数之后调用

```
 google.maps.event.addDomListener(window, 'load', function () { ... }); 
```

这就是为什么在调用 addMarker 时未设置 map，但在收到来自的回调时已初始化的原因

```
Geocoder.geocode(...) 
```

要解决此问题，请确保在 addMarker 之前调用 GoogleMaps.setup。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-13T14:48:16.043

IE8一直意味着麻烦。:-) 尝试在您的部分**开头**添加以下元标记：`<head>`

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" /> 
```

此处说明：

[http://blogs.msdn.com/b/ie/archive/2008/06/10/introducing-ie-emulateie7.aspx](http://blogs.msdn.com/b/ie/archive/2008/06/10/introducing-ie-emulateie7.aspx)

# c# - 在 xml c#.net 中追加元素

> ID：11934396
> 
> 赞同：0
> 
> 时间：2012-08-13T12:35:49.813
> 
> 标签：c#, .net, xml

我已经通过以下代码编写了xml

```
 if (!File.Exists("d:\\s.xml"))
 {    
     XmlTextWriter textWriter = new XmlTextWriter("d:\\s.xml", null);
     textWriter.WriteStartDocument();
     textWriter.WriteStartElement("node");    
     textWriter.WriteStartElement("zone");    
     textWriter.WriteStartElement("dt");    
     textWriter.WriteStartElement("Mn");
     textWriter.WriteString("m1");
     textWriter.WriteEndElement();    
     textWriter.WriteStartElement("Dist");
     textWriter.WriteString("Colony");
     textWriter.WriteEndElement();   
     textWriter.WriteEndElement();
     textWriter.WriteEndDocument();
     textWriter.Close();
 } 
```

输出为

```
<?xml version="1.0"?>
<Node>
    <Zone>
        <Dt>
            <mn>m1</mn>
            <Dist>Colony</Dist>
        </Dt>
    </Zone>
</Node> 
```

现在我需要将以下 xml 附加到已经存在的 xml 文件中

```
<Dt1>
    <mn>m1</mn>
    <Dist>Colony</Dist>
</Dt1> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T12:47:13.357

我将使用 Linq2Xml 回答

```
var xml = new XElement("Node",
                new XElement("Zone",
                        new XElement("Dt", 
                                new XElement("mn1", "m1"), 
                                new XElement("Dist", "Colony") 
                            )
                    )
                );

var str1 = xml.ToString();

xml.Descendants("Zone")
    .First()
    .Add(new XElement("Dt1",
                new XElement("mn1", "m1"), 
                new XElement("Dist", "Colony")));

var str2 = xml.ToString();

xml.Save(filename); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:54:35.407

我不太明白你想在哪里添加下一个节点，但我猜你想保留你发布的 XML 文件的结构。如果是这种情况，并扩展 Jon Skeet 的答案，您可以使用 XElement 做到这一点：

```
var zone = new XElement(
            "Zone",
            new XElement(
                "Dt",
                new XElement("Mn", "m1"),
                new XElement("Dist", "Colony")));

        var xml = new XElement("Node", zone);

        // append new nodes here
        zone.FirstNode.AddAfterSelf(
            new XElement(
                "Dt",
                new XElement("Mn", "m1"),
                new XElement("Dist", "Colony")));

        // save file
        xml.Save("d:\\s.xml"); 
```

# php - 将 Javascript 变量声明为 PHP 表单

> ID：11934397
> 
> 赞同：-1
> 
> 时间：2012-08-13T12:35:51.283
> 
> 标签：php, javascript

在我有空的时候为 Facebook 比赛做准备，facebook 的 Publish 函数有一个你可以定义的曾经发布过的 javascript 函数。

我要做的是调用一个函数将一个值写入一个 php 表单，然后将其发布并将数据提交到数据库中。我已经测试到我知道这个想法只是调用一个基本警报是合理的，我只是不确定如何从调用函数到将值写入表单。

这个值我需要能够在数据发布到的页面中调用，以关闭“如果函数”，基本上如果“真/是”，那么我需要它来处理除了将其发布到数据库的数据

我现在拥有的是：

```
 <script type="text/javascript">
    function isShared()
    {
    alert("Yes");
    }
  </script>
<input class="fieldbox" name='shared' type='hidden' value="value of 'display_alert()'"/> 
```

我知道这不可能是警报，但这几乎是我目前的 javascript 技能让我陷入困境的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:49:35.990

```
<script type="text/javascript">
function isShared()
{
    document.getElementById('xshared').value = 'Yes';
}
</script>
<input class="fieldbox" id="xshared" name="shared" type="hidden" value="" /> 
```

这将在调用**isShared 后将值****Yes**添加到隐藏字段。

 **您是否希望在用户不点击共享按钮的情况下自动发布表单？我问的唯一原因是，听起来您正在寻找的是 AJAX，它可以静默地将数据发布到数据库，而无需用户离开当前页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:49:34.440

我仍然不是 100% 清楚你在问什么，但你只是想将一个服务器端 PHP 变量发送到客户端 JavaScript 代码中吗？像这样的东西？：

```
<?php
    // some code, etc.
    $myVariable = "foo"; // some value
    // more code, etc.
?>
<script type="text/javascript">
    var myVariable = '<?php echo $myVariable; ?>';
    // more JavaScript code, etc.
</script> 
```

这将向页面发出：

```
<script type="text/javascript">
    var myVariable = 'foo';
    // more JavaScript code, etc.
</script> 
```

基本上，在您需要 PHP 变量中的文字值的任何地方，您都可以编写：

```
<?php echo $myVariable; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T12:52:41.963

我不清楚您究竟打算如何发布表单数据，但您可以使用 jquery 设置输入值，如下所示：

```
 <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

$('#input1').val($('#input1').val() + 'more text');

<input id="input1" class="fieldbox" name='shared' type='hidden' value=""/> 
```**

# jquery - JQuery 返回 NaN 但并非总是如此

> ID：11934400
> 
> 赞同：0
> 
> 时间：2012-08-13T12:35:58.563
> 
> 标签：jquery, ajax

我正在尝试将测试分数传递给 php 脚本，然后将结果通过电子邮件发送给用户。我将分数输出到控制台，效果很好（显示我的百分比），但是当发送电子邮件而不是分数时，它显示为 NaN。

这是我的代码...

```
 score = roundReloaded(trueCount / questionLength * 100, 2);

          $.ajax({
                  type: 'POST',
                  url: config.sendResultsURL,
                  data: { q:score },
                  complete: function () {console.log("Sending complete. The score was "+ score + "%");}
                }); 
```

还有我的 emailData.php 文件...

```
$body = "You scored " . $_POST['q'] . "%";
$to = "someone@test.com";
$email = 'admin@test.com';

$subject = 'Results';
$headers  = "From: $email\r\n";
$headers .= "Content-type: text/html\r\n";

// Send the email:
$sendMail = mail($to, $subject, $body, $headers); 
```

有人可以帮助我并告诉我我做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:45:47.783

如果字符串的第一个字符不能转换为数字。然后返回 NaN 。

所以这里的转换问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:40:50.240

NaN 说它不是一个数字。尝试将 $_POST['q'] 转换为如下数字：

```
$_POST['q']*1 
```

或者可能是形式方面的问题，尝试将 score 变量转换为字符串：

```
score = roundReloaded(trueCount / questionLength * 100, 2);

          $.ajax({
                  type: 'POST',
                  url: config.sendResultsURL,
                  data: { q:score+'' },
                  complete: function () {console.log("Sending complete. The score was "+ score + "%");}
                }); 
```

编辑：试试这个以获得更好的日志记录：

```
score = roundReloaded(trueCount / questionLength * 100, 2);
var params = {q:score};
console.log(JSON.stringify(params));    
          $.ajax({
                  type: 'POST',
                  url: config.sendResultsURL,
                  data: params,
                  complete: function () {console.log("Sending complete. The score was "+ params.q + "%");}
                }); 
```

# ios5 - 使用故事板查看控制器

> ID：11934408
> 
> 赞同：0
> 
> 时间：2012-08-13T12:36:54.497
> 
> 标签：ios5, storyboard, viewcontroller

我正在尝试使用情节提要在两个视图控制器之间切换。我通过从第一个视图控制器到第二个，然后从第二个到第一个的控制拖动（在按钮上）来创建模态海格。

因此，每当我单击第一个 VC 中的按钮时，它都会将我带到第二个 VC。这次当我单击第二个 VC 上的按钮时，它是带我回到第一个 VC 的原始实例还是创建一个新实例？

如果它把我带到同一个实例，并且用户在某些文本字段中写入了一些数据，那么无论如何要在屏幕上保留它吗？（我可能想将它们保存在一些变量中，并且由于程序将返回到同一个实例，我将能够取回变量）

如果它没有把我带到同一个实例，有什么方法可以这样做吗？

我尝试制作第二个 VC 的实例并使用 self.navigarionController push...(instance) 但这不会切换控制器。

如果我使用情节提要执行此推送，并且我确实弹出了我的第二个 VC，它也不会弹出。

（而且我也无法理解推送、模式和自定义海格之间的区别）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T12:47:05.577

创建从 VC1 的按钮到 VC2 的模态序列，但不是相反的。当 VC2 的按钮被点击时，呼叫`dismissViewControllerAnimated:completion:`返回到你原来的位置。

如果您改用 push segue，您会调用`popViewControllerAnimated:`返回，但只有当您的视图控制器由`UINavigationController`.

您可以将推送视为一种逐步浏览一系列相关场景的方式，而模态则有点超出应用程序的正常流程。（这不是一个严格的规则，但它是决定走哪条路的起点。）对于“自定义”，您编写 segue 代码，因此您决定发生什么。

# image - xCode UIImage EPS格式

> ID：11934412
> 
> 赞同：1
> 
> 时间：2012-08-13T12:37:12.697
> 
> 标签：image

我正在尝试使用以下代码将 EPS 格式的图像加载到我的图像视图中：

```
- (void)viewDidLoad {
    UIImage *img = [UIImage imageNamed:@"appbg-vector-temp.eps"];
    [imageView setImage:img];

    [super viewDidLoad];
} 
```

没有错误，但我在我的 ui 视图中看不到我的 eps。

我在我的 .h 文件中得到了这个： IBOutlet UIImageView *imageView; 我将 imageView 变量链接到我的图像视图。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:02:17.727

`UIImage`无法加载 EPS 图像。如果您在调用`imageNamed:`调试器后停在该行，您将看到您的`img`变量为 nil。那是因为它无法加载 EPS。

# facebook-apps - 如何转移禁用的应用程序

> ID：11934417
> 
> 赞同：0
> 
> 时间：2012-08-13T12:37:44.233
> 
> 标签：facebook-apps

最近，我的 Facebook 帐户在没有任何警告的情况下被禁用为“不良应用程序开发人员”。问题是我被列为管理员的所有应用程序都被禁用了，即使它们没有任何负面反馈。我的同事被列为管理员的一些应用程序可以从他们的帐户中恢复（并且它们在正常工作时被启用）。但是有一个，只有我被列为管理员，我找不到发送上诉的方法。我收到的邮件中有一条关于转移过程的通知说

> 有关恢复或转移这些应用程序的更多信息，请访问我们的常见问题解答页面：[http ://www.facebook.com/help?faq=17556](http://www.facebook.com/help?faq=17556)

但是FAQ页面说找不到。

请有人指出如何将应用程序转移到另一个帐户的教程或分步指南，以便我可以再次启用。

多次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:05:18.723

据我所知，无法将应用程序恢复/转移到另一个帐户。您真正能做的就是设置一个新应用程序并将其指向相同的网址。话虽如此，您的帐户被禁用是有原因的，所以我会仔细阅读条款和条件，以找出您做错了什么。

# python - 使用 nextLink 属性获取下一个结果页面

> ID：11934418
> 
> 赞同：4
> 
> 时间：2012-08-13T12:37:47.793
> 
> 标签：python, google-analytics, google-api

我正在使用 Google APIs python 客户端从 Google Analytics 下载一些数据。我基本上复制了他们的一个示例并对其进行了修改以完全满足我的需要。

我从示例中获取了这段代码：

```
request = service.data().ga().get(
    ids=ids,
    start_date=str(start_date),
    end_date=str(end_date),
    dimensions=','.join(dimensions),
    filters=filters,
    sort="ga:date",
    metrics=','.join(metrics)
) 
```

然后将其添加到批处理对象中，并在收集到 10 个请求后执行它。这一切都很好，但问题是，其中一些请求返回一个`nextLink`. 现在我可以用不同的起始索引创建一个新的请求对象（使用上面的代码），但是没有更好的方法吗？

有没有办法将其解析`nextLink`为新的请求对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-29T12:05:10.090

我正在使用这种方法：

```
firstRun = True
params = {'ids':'ga:00000001',
        'start_date':'2013-07-01',
        'end_date':'2013-07-31',
        'metrics':'ga:visits',
        'dimensions':'ga:source',
        'sort':'-ga:visits',
        'start_index':1,
        'max_results':10000}

while firstRun == True or result.get('nextLink'):
    if firstRun == False:
        params['start_index'] = int(params['start_index']) + int(params['max_results'])

    result = service.data().ga().get(**params).execute()
    firstRun = False 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-30T01:36:46.583

我找不到解析 nextLink 对象并用它发出请求的方法，但这是我的解决方案并且工作正常：

```
max_results = 10000

params = {
    'ids': 'ga:' + profile_id,
    'start_date': start_date,
    'end_date': end_date,
    'metrics': ','.join(metrics),
    'dimensions': ','.join(dimensions),
    'start_index': 1,
    'max_results': max_results
}

has_more = True

while has_more:
    results = service.data().ga().get(**params).execute()

    #do something with results

    params['start_index'] = int(params['start_index']) + int(params['max_results'])
    has_more = results.get('nextLink') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-06T14:38:46.200

为什么我们不能这样做：

```
params = {'ids': profile_id,
          'start_date': start_date,
          'end_date': end_date,
          'metrics': metrics,
          'dimensions': dimensions,
          'sort': sort,
          'start_index': 1,
          'max_results': 1}

dummy_call = service.data().ga().get(**params).execute() # just to find out the totalResults number
params['max_results'] = dummy_call[u'totalResults'] # replace max_result with the totalResults number

all_rows = service.data().ga().get(**params).execute()[u'rows'] 
```

？？？

# internet-explorer - Colorbox cboxOverlay 位置 IE

> ID：11934420
> 
> 赞同：0
> 
> 时间：2012-08-13T12:37:57.837
> 
> 标签：internet-explorer, position, colorbox

我对 Colorbox 有疑问。当你点击 cboxOverlay 时，位置在底部，，，但仅限于 IE 中。

看链接：[cboxOverlay位置IE问题](http://paryzinska.pl/projekty.html)

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:21:39.413

你必须修复你的CSS。

```
#cboxOverlay {
    position: absolute !important;
} 
```

# perl - Perl 执行命令失败

> ID：11934426
> 
> 赞同：1
> 
> 时间：2012-08-13T12:38:13.500
> 
> 标签：perl

我正在尝试通过如下所示的 perl 脚本执行 shell 命令

```
 $cmd = 'cat <(ssh -o \"StrictHostKeyChecking no\" dev-adm1 \'sudo cat /etc/httpd/conf/httpd.conf\')';
 exec $cmd; 
```

这是抛出一个错误

```
sh: -c: line 0: syntax error near unexpected token `('
sh: -c: line 0: `cat <(ssh -o \"StrictHostKeyChecking no\" dev-adm1 'sudo cat /etc/httpd/conf/httpd.conf')' 
```

该命令直接在 shell 上工作，但不是这样。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T12:42:17.983

你用哪个shell来测试这个命令？

我的第一个猜测是您使用了 bash 或 ksh，而 sh（由 perl exec 使用）不知道 '(' 语法

# python - 在 Matplotlib 的 stem 命令中使用复数

> ID：11934428
> 
> 赞同：0
> 
> 时间：2012-08-13T12:38:14.710
> 
> 标签：python, numpy, matplotlib

我有两个 numpy 数组`a`（具有整数值）和`b`（具有复数）。现在当我使用时`stem(a,b)`，我收到以下错误：

```
C:\Python27\lib\site-packages\numpy\core\numeric.py:235: 
    ComplexWarning: Casting complex values to real discards the imaginary 
    part return array(a, dtype, copy=False, order=order) 
    Out[5]: <Container object of 3 artists> 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:01:30.590

你想让它做什么？ `stem`plot 在`a` 从基线到高度的每个水平位置绘制垂直线`b`。但这里，`b`是一个复数——你需要它是一个实值量。也许你想要绝对值，`np.abs(b)`？还是真实的部分，`np.real(b)`？也许有两个茎图，`stem(a, np.real(b)); stem(a, np.imag(b))`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-06T03:51:47.023

对于茎图，您只需要复数的实部。

```
x = np.arange(-64,64,1)
C = [cmath.exp(abs(i) * cmath.log(a3)) for i in x]
stem(x,real(C)) 
```

[茎图](http://i.stack.imgur.com/SuPCO.jpg)

# ruby-on-rails - 我无法使用视图将 activeRecord 对象保存在旧表中

> ID：11934429
> 
> 赞同：2
> 
> 时间：2012-08-13T12:38:16.793
> 
> 标签：ruby-on-rails, postgresql, activerecord, rails-postgresql

我在旧数据库中有一个表，其中有一个名为字段的列。将表直接链接到 activeRecord 模型是不可能的，因为后者会尝试创建方法 field_changed? 这已经定义了。

所以我创建了一个视图来重命名字段，并创建了以下规则来允许插入、更新和删除。

```
create or replace rule new_linked_fields_upd as on update to new_linked_fields 
     do instead 
     update linked_fields set race_id = new.race_id , master_id = new.master_id, field = new.field_name
     where id = new.id;

create or replace rule new_linked_fields_ins as on insert to new_linked_fields
     do instead
     insert into linked_fields select nextval('linked_fields_id_seq'), new.race_id, new.field_name, new.master_id;

create or replace rule new_linked_fields_del as on delete to new_linked_fields
     do instead
      delete from linked_fields where id = old.id; 
```

我将 activeRecord 模型链接到视图。

```
class LinkedField < ActiveRecord::Base
  self.table_name ="new_linked_fields"
  self.primary_key = "id"
end 
```

我必须添加 self.primary_key = "id"，否则 LinkedField.last 等方法会失败（生成错误的 SQL）。

在 SQL 中，一切都很好。在 ruby​​ 中，我可以更新 LinkedField 的属性，或者销毁一个实例，但我不能创建一个。

```
LinkedField.create(field_name:'toto',race_id:-3,master_id:4) 
```

返回以下错误。

```
 (0.3ms)  BEGIN
  SQL (1.0ms)  INSERT INTO "new_linked_fields" ("field_name", "master_id", "race_id") VALUES ($1, $2, $3) RETURNING "id"  [["field_name", "toto"], ["master_id", 4], ["race_id", -3]]
   (0.3ms)  ROLLBACK
ActiveRecord::StatementInvalid: PG::Error: ERROR:  syntax error at end of input
LINE 1: DEALLOCATE
                   ^
: INSERT INTO "new_linked_fields" ("field_name", "master_id", "race_id") VALUES ($1, $2, $3) RETURNING "id"
     from /Users/macbook/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:297:in `exec'
     from /Users/macbook/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:297:in `dealloc'
     from /Users/macbook/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:287:in `delete'
     from /Users/macbook/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:1172:in `rescue in exec_cache'
     from /Users/macbook/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:1155:in `exec_cache'
     from /Users/macbook/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:665:in `block in exec_query'
     from /Users/macbook/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract_adapter.rb:280:in `block in log'
     from /Users/macbook/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.6/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
     from /Users/macbook/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract_adapter.rb:275:in `log'
     from /Users/macbook/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:663:in `exec_query'
     from /Users/macbook/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/database_statements.rb:63:in `exec_insert'
     from /Users/macbook/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/database_statements.rb:90:in `insert'
     from /Users/macbook/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
     from /Users/macbook/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.6/lib/active_record/relation.rb:66:in `insert'
     from /Users/macbook/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.6/lib/active_record/persistence.rb:363:in `create'
     from /Users/macbook/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.6/lib/active_record/timestamp.rb:57:in `create' 
```

有什么提示吗？我正在使用 postgres 9.0 和 rails 3.2.6。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T13:49:32.093

首先，如果您能够更新到 PostgreSQL 9.1，那么[视图触发器](http://www.postgresql.org/docs/9.1/static/sql-createtrigger.html)比规则更容易正确。

第二，从哪里来`DEALLOCATE`？它是否试图释放准备好的声明？

尝试启用`log_statement = 'all'`in `postgresql.conf`，重新加载 PostgreSQL（`pg_ctl reload`，`SIGHUP`postmaster，或重新启动它），重新运行测试并检查 Pg 的日志。查看 Rails 程序实际运行的 SQL。

# java - USB - RS232 通讯

> ID：11934430
> 
> 赞同：1
> 
> 时间：2012-08-13T12:38:23.757
> 
> 标签：java, usb, serial-port, fpga, serial-communication

是否可以使用 java 代码将数据从 USB 端口发送到 RS232？RS232 是 FPGA 板上的一个端口，计算机（通过 USB）用于发送这些数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T12:46:56.743

您可以使用[PureJavacomm](http://www.sparetimelabs.com/purejavacomm/index.html)或[RXTX](http://www.rxtx.org)等库将数据从 Java 发送到串行端口。后者有点像 Java 的事实上的标准，但有一些怪癖，而前者正在积极开发，似乎适用于所有当前的“主要”平台（个人经验）。

# android - 如何设置日期选择器的日期？

> ID：11934438
> 
> 赞同：5
> 
> 时间：2012-08-13T12:38:45.327
> 
> 标签：android

我用`DatePickerDialog.OnDateSetListener`那个很好用。

我想在日期选择器中添加 120 天的日期。

我的意思是如果我添加 120 天，日期和月份将自动更改。怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-13T12:54:39.880

这样的事情应该可以解决问题：

```
Calendar cal = Calendar.getInstance();
cal.set(datepick.getYear(), datepick.getMonth() + 1, datepick.getDayOfMonth());
cal.add(Calendar.DATE, 120);
datepick.updateDate(cal.get(Calendar.YEAR), cal.get(Calendar.MONTH) - 1, cal.get(Calendar.DATE)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:49:09.040

确保您创建了一个添加了 120 天的日期对象（请参阅[本主题](https://stackoverflow.com/questions/3747490/android-get-date-before-7-days-one-week)了解如何执行此操作）并使用它来填充您的日期选择器，无论是在初始化时还是在更改时。我不太确定您要实现什么目标，但后者在可用性方面似乎并不正确。在这种情况下，我会创建一个额外的文本字段来表示 +120 天的日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-24T14:59:33.317

使用 UpdateDate 以编程方式设置日期

```
datePickerDialog.UpdateDate(selectedDate ?? DateTime.Now); 
```

# c# - 如何保护 NetNamed Pipe 绑定？

> ID：11934439
> 
> 赞同：0
> 
> 时间：2012-08-13T12:38:51.933
> 
> 标签：c#, wcf, wcf-binding, netnamedpipebinding

我如何能够控制命名管道端点的安全性，端点应该只能由运行 IIS 应用程序池的登录名和本地计算机上的管理员组访问？

我遵循了这一点并创建了必要的自定义绑定：http: [//blogs.charteris.com/blogs/chrisdi/archive/2008/06/23/exploring-the-wcf-named-pipe-binding-part-3.aspx](http://blogs.charteris.com/blogs/chrisdi/archive/2008/06/23/exploring-the-wcf-named-pipe-binding-part-3.aspx)

我想知道如何实现 IIS 应用程序池部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:07:23.933

看看这个[链接](http://learn.iis.net/page.aspx/624/application-pool-identities/)。

您可以指定运行应用程序池的身份，这是一个唯一帐户。您可以指定内置帐户或自定义帐户来运行应用程序池。我认为您需要使用自定义帐户。

# asp.net-mvc - 视图中的继承属性给出“错误：找不到命名空间”

> ID：11934445
> 
> 赞同：0
> 
> 时间：2012-08-13T12:39:38.213
> 
> 标签：asp.net-mvc

我得到的错误是：

> 找不到类型或命名空间名称“LastSundayDate”（您是否缺少 using 指令或程序集引用？）

这是我的视图代码：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Report/Report.Master" Inherits="System.Web.Mvc.ViewPage<IEnumerable<LastSundayDate>>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
   Trade Searches Data
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

<h2>TradeUK KPI Searches Data</h2>
<p></p> 
```

然后我有：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace TradeUK.Entities.Reporting
 {
   public class LastSundayDate
   {
       public virtual int Title { get; set; }
       public virtual int Total { get; set; }
       public virtual int Week6 { get; set; }
       public virtual int Week5 { get; set; }
        public virtual int Week4 { get; set; }
        public virtual int Week3 { get; set; }
       public virtual int Week2 { get; set; }
        public virtual int Week1 { get; set; }
   }
 } 
```

在我的控制器中，我有：

```
public ActionResult TradeUKKPIShowData(DateTime date) //show actual data in the view
{
  var reportData = _reportingService.GetTradeUKKPISearches(date);
  return View(reportData);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:42:10.507

包括你的类的命名空间。否则你的程序无法理解这个`LastSundayDate`类在哪里。

改变

```
Inherits="System.Web.Mvc.ViewPage<IEnumerable<LastSundayDate>> 
```

到

```
Inherits="System.Web.Mvc.ViewPage<IEnumerable<
                                     TradeUK.Entities.Reporting.LastSundayDate>> 
```

或者，您也可以将命名空间导入视图。在您的视图中添加这一行，在`Page`指令声明上方

```
<%@ Import Namespace="TradeUK.Entities.Reporting" %> 
```

现在您不需要为该类添加完整的命名空间，您可以简单地在您的视图中访问该类。您问题中的代码可以正常工作。

If this class is defined in a Project other than your current UI project, you need to add a reference to that project under the `References` section

# javascript - 用javascript中的表单元素构建一个xml字符串

> ID：11934451
> 
> 赞同：0
> 
> 时间：2012-08-13T12:40:05.340
> 
> 标签：javascript, xml

我正在使用带有 java 脚本的 HTML 表单中的元素值构建一个 xml 字符串。我能够获取表单的所有值并使用以下代码轻松构建 xml。但问题是有一些重复的组使得这个过程变得困难。也就是说，重复组是FIELD SETS，例如如果有一个名为xxxRepeatingGroup和yyyRepeatingGroup的字段集，xml应该如下。

```
<xxxRepeatingGroup>
<xxx>
all the element values inside the field set with the name of the element as tag name and the value in between the tags here
</xxx>
<xxx>
all the element values inside the next field set(the repeating thing with different values) here
</xxx>
</xxxRepeatingGroup>
<yyyRepeatingGroup>
    <yyy>
    all the element values inside the field set with the name of the element as tag name and the value in between the tags here
    </yyy>
    <yyy>
    all the element values inside the next field set(the repeating thing with different values) here
    </yyy>
    </yyyRepeatingGroup> 
```

我无法找到添加 、 和 标签的逻辑`<xxxRepeatingGroup>`，并且`<yyyRepeatingGroup>`我 将无法对这些标签进行硬编码，因为我需要在所有地方使用相同的方法。`<xxx>``<yyy>`

下面是我的java脚本函数：

```
function getElementnames() { 
var msg = "";

 for (j=0;j < document.forms.mf.elements.length;j++) { 
  if (document.forms.mf.elements[j].type != 'button' && document.forms.mf.elements[j].type != 'submit' && document.forms.mf.elements[j].type == undefined )
 {
msg +=  startElement(document.forms.mf.elements[j].name ) +  document.forms.mf.elements[j].value + endElement(document.forms.mf.elements[j].name ); 
}
}
alert(msg);
}

function startElement(startname) {

    var startname="<"+ startname +">";
    return startname;
    }

function endElement(endname) {

    var endname ="</"+ endname +">";
    return endname;
    } 
```

请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:47:31.143

我找到了一种方法，方法是添加我需要的元素作为隐藏类型的标签名称，并将其放置在我需要重复组标签的地方。

# ios - UIScrollView如何设置ContentInset和ScrollerInset

> ID：11934452
> 
> 赞同：3
> 
> 时间：2012-08-13T12:40:07.147
> 
> 标签：ios, xcode, uiscrollview, storyboard

我无法配置我的 UIScrollView。

![在此处输入图像描述](../Images/64fdc24abfd9c9a88428b120f33526f5.png)

上图显示了我的观点。橙色框是我的 UIScrollView，蓝色框（加上橙色框）是我想要滚动的视图。

视图是 520 像素，而 UIScollView（像往常一样）是 320 像素。

如何设置 ContentInset 和 ScollerInset？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T12:50:24.603

由于滚动视图的高度和它的内容匹配，并且因为它没有从您的图片中显示您想要为内容添加空白空间，所以您应该将`contentInset`设置保持为零（默认情况下）。如果您希望内容的中间通过滚动视图可见，请将内容偏移设置为`(520-320)/2 = 100`，如下所示：

```
[scrollView setContentOffset:CGPointMake(100, 0) animated:YES];
// If you do not want to see the view scroll, change this ^^^ to NO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T12:52:52.060

我不确定你的问题到底是什么，但我猜你的滚动视图没有按预期滚动。

您需要设置 contentSize 属性来告诉滚动视图有更多的内容而不仅仅是可视区域（例如`myScrollView.contentSize = CGSizeMake(520.0, 100.0);`）

如果您想从根据图表居中的内容开始，您可以设置 contentOffset 属性。（例如`myScrollView.contentOffset = CGPointMake((myScrollView.contentSize.width - myScrollView.frame.size.width) / 2, 0.0);`）

# javascript - JavaScript 获取孩子 id

> ID：11934456
> 
> 赞同：-1
> 
> 时间：2012-08-13T12:40:18.177
> 
> 标签：javascript, html

我正在尝试向表中添加新行，如下所示：

```
 <table class="table table-striped">
        <tbody id="dconTable">
            <th><input type="text" class="span12" id="lbld"></th>
            <th><input type="text" class="span12" id="edizmd"></th>
            <th><input type="text" class="span12" id="idd"></th>
            <th><input type="text" class="span12" id="ad"></th>
            <th><input type="text" class="span12" id="bd"></th>
            <th><input type="text" class="span12" id="en_spard"></th>
            <th><input type="text" class="span12" id="spard"></th>
            <th><input type="text" class="span12" id="en_periodd"></th>
            <th><input type="text" class="span12" id="periodd"></th>
        </tbody> 
    </table> 
```

我使用在互联网上找到的脚本。而且我希望他也在新单元格中写 id（如 id="lbld_1" 等）。这是代码。

```
function addRow(tableID) {
    var table = document.getElementById(tableID);
    var rowCount = table.rows.length;
    var row = table.insertRow(rowCount);
    var colCount = table.rows[0].cells.length;
    for(var i=0; i<colCount; i++) {
        colName = table.rows[0].cells[i].parentNode.children[1].getAttribute('id') +"_"+ i;
        var newcell = row.insertCell(i);
        newcell.innerHTML = table.rows[0].cells[i].innerHTML;
        newcell.childNodes[0].value = "";
        newcell.parentNode.children[1].setAttribute('id',colName);
        colName = "";
    }
}; 
```

控制台说：

```
Uncaught TypeError: Cannot call method 'setAttribute' of undefined 
```

请告诉我我的错误。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T12:55:05.643

您的代码对我没有任何意义：

```
table.rows[0].cells[i].parentNode.children[1];
//===
table.rows[0].cells[1]; 
```

单元格是行的子级，因此获取一行的 parentNode，它将返回一行，获取其中一个子级，然后您就回到了单元格的级别（如果幸运的话！-某些浏览器将包括空格或节点列表中的注释）。
此外，如果您需要一个 id，就`anElem.id`可以了，`getAttribute()`有点多。

所以这就是你想要做的：

```
colName = table.rows[0].cells[i].id;
newcell.id = colName; 
```

但这会创建具有相同 ID 的多个元素，这是不可能的。在现实生活中，如果其他人有我的 ID，我会遇到问题。同样的逻辑也适用于 DOM 中的 ID：它们是独一无二的！所以试试：

```
colName = table.rows[0].cells[i].id.split('_')[0];
newcell.id = colName+'_'+i; 
```

最后，你似乎没有附加你的元素，所以 add `table.rows[0].appendChild(newCell);`，太

# soap - Selenium2：从下拉列表中选择选项导致窗口消失

> ID：11934464
> 
> 赞同：0
> 
> 时间：2012-08-13T12:40:57.240
> 
> 标签：soap, webdriver, selenium-webdriver

当我使用 Selenium WebDriver 中的 Select 功能时，窗口会完全消失，但会保持活动状态（正如我在任务栏中看到的那样）。因此，它似乎被最小化，而不会失去焦点。

这导致某些测试失败。

```
void select(String locator, String option){
    WebElement dropdown = driver.findElement(By.xpath(locator));
    Select selectBox = new Select(dropdown);
    selectBox.selectByVisibleText(option);
} 
```

# android - 事件时区值

> ID：11934465
> 
> 赞同：4
> 
> 时间：2012-08-13T12:41:07.867
> 
> 标签：android, calendar

任何人都可以帮助我在将事件添加到日历时在 eventTimezone 值中插入什么？这是我的代码：

```
 Intent intent = new Intent(Intent.ACTION_INSERT);
    intent.setType("vnd.android.cursor.item/event");
    intent.putExtra("title", eventName);
    intent.putExtra("beginTime", startCal.getTimeInMillis());
    intent.putExtra("endTime", endCal.getTimeInMillis());   
    intent.putExtra("eventTimezone","Hong Kong");
    startActivity(intent); 
```

其他一切正常，但 eventTimezone 似乎没有将时区选项更改为我想要的时区。我需要什么价值？我试过“GMT+1”和“(GMT+8:00) Hong Kong”，但它们不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T02:36:24.397

这就是您将时区放入其中的方式

```
TimeZone tz = TimeZone.getDefault();
intent.putExtra(Events.EVENT_TIMEZONE, tz.getID()); 
```

# python - 嵌套列表推导

> ID：11934468
> 
> 赞同：4
> 
> 时间：2012-08-13T12:41:21.980
> 
> 标签：python, list, syntax, list-comprehension

我尝试在内部列表中使用外部列表理解的值：

```
[ x for x in range(y) for y in range(3) ] 
```

但不幸的是，这会引发 NameError 因为名称`y`未知（尽管外部列表理解指定了它）。

这是 Python 的限制（尝试了 2.7.3 和 3.2.3）还是有充分的理由为什么这不起作用？

是否有计划摆脱限制？

是否有解决方法（一些不同的语法可能我没有弄清楚）来实现我想要的？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-13T12:42:16.007

您在谈论列表*推导*，而不是生成器表达式。

你需要交换你的 for 循环：

```
[ x for y in range(3) for x in range(y) ] 
```

您需要像嵌套在常规循环中一样阅读这些内容：

```
for y in range(3):
    for x in range(y):
        x 
```

具有多个循环的列表推导遵循相同的顺序。请参阅[列表理解文档](http://docs.python.org/reference/expressions.html#list-displays)：

> 提供列表推导时，它由一个表达式组成，后跟至少一个`for`子句和零个或多个`for`or`if`子句。在这种情况下，新列表的元素是通过将每个`for`or`if`子句视为一个块、从左到右嵌套并在每次到达最里面的块时计算表达式以产生一个列表元素而产生的元素。

当然，生成器表达式也是如此，但它们使用`()`括号而不是方括号，并且不会立即实现：

```
>>> (x for y in range(3) for x in range(y))
<generator object <genexpr> at 0x100b50410>
>>> [x for y in range(3) for x in range(y)]
[0, 0, 1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T12:44:35.390

你试过了吗：

```
[x for y in range(3) for x in range(y)] 
```

因为这会产生一个输出......这会产生：

```
[0, 0, 1] 
```

这可能是也可能不是你想要的......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T12:43:06.213

只是嵌套另一代。

```
[ x for x in [range(y) for y in range(3) ]] 
```

给我：

```
[[], [0], [0, 1]] 
```

# javascript - 我的函数返回空。为什么？

> ID：11934469
> 
> 赞同：0
> 
> 时间：2012-08-13T12:41:26.870
> 
> 标签：javascript, jquery

我知道这是一个基本问题，但我在代码中的某个地方遇到了问题。我从某个地方获得了该代码，但现在我正在根据需要对其进行修改。

jQuery('#selector') 是做什么的？在我的代码中，它总是返回空。

这是我的代码

```
query: function (selector, context) {
            var ret = {}, that = this, jqEls = "", i = 0;
            if(context && context.find) {
                jqEls = context.find(selector);
            } else {
                jqEls = jQuery(selector);
            }
            ret = jqEls.get();
            ret.length = jqEls.length;
            ret.query = function (sel) {
                return that.query(sel, jqEls);
            }

            return ret;
        } 
```

当我调用此查询函数时，我将选择器作为参数传递。当我这样做时`console.log(selector)`，它确实具有此功能中我需要的所有选择器。但问题出在这条线上`jqEls = jQuery(selector);`。当我这样做`console.log(jqEls)`之后它返回空，因此整个函数返回空。

我可以使用与此不同的东西来使其工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:45:13.760

`jquery('#selector')`相当于`document.getElementById('selector')`。如果没有 id 为 的 DOM 节点`selector`，则会得到一个空结果。

例如

```
<div id="selector">...</div> 
```

将返回与此 div 对应的 dom 节点。你有加载jquery吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T12:45:36.057

`jQuery(selector)`正在寻找符合选择器标准的 DOM 元素。

```
$('#example') == jQuery('#example') 
```

两者都会寻找 id 为“example”的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T13:11:10.643

阅读您的代码后，我有一个问题：您是否将# 放入变量中`selector`？通过替换坏行来解决此问题的解决方案`jqEls = jQuery("#" + selector);`

如果问题不是由于那个，你能说出类型`selector`吗？细绳 ？目的 ？jQuery 对象？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T13:12:32.143

`$(selector).get()``undefined`如果没有找到元素将返回。这就是你的函数返回的原因`undefined`。要解决此问题，如果没有找到元素，您可以使用默认值：

```
ret = jqEls.length ? jqEls.get() : {}; 
```

这样，您的函数将始终返回一个具有您的`length`和`query`属性的对象，但如果 jQuery 没有找到一个元素，它将没有元素。

# asp.net - 从当前未显示的 LoginView 模板获取控制权

> ID：11934470
> 
> 赞同：0
> 
> 时间：2012-08-13T12:41:27.887
> 
> 标签：asp.net, loginview

我的页面中有一个 LoginView 控件，在我的登录模板中，我有一个需要在页面加载时引用的控件。唯一的问题是，用户在访问我的页面时并不总是登录，因此无法找到页面加载控件。我在登录视图控制器的母版页中的“注册”按钮也有类似的问题。如果页面 url 包含“注册”，我将其设置为隐藏，但是一旦用户登录并且登录模板发生更改，按钮不再在控件中并且页面会引发错误。

关于如何修复的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:56:55.057

当您调用 时`FindControl`，请在尝试访问其属性之前检查 null：

```
Control c = FindControl("MyControl");
if (c != null)
{
    c.Visible = false; 
} 
```

# xml - 分析 XML 的树/结构（标签相互引用）

> ID：11934471
> 
> 赞同：1
> 
> 时间：2012-08-13T12:41:29.453
> 
> 标签：xml, xslt, reference, refer

我得到了几个使用“父”子元素相互引用的 XML 元素。并非所有顶级元素都需要复制，因此我有一个需要复制的（主）部分唯一名称的固定列表。

应该在我的 XSL 中复制哪些小节的主要部分列表：

```
<xsl:variable name="mainSections">|news|sport|</xsl:variable> 
```

源 XML 主要部分：

```
<section uniqueName="news">
</section>

<section uniqueName="sport">
</section>

<section uniqueName="travel">
</section> 
```

源 XML 子部分：

```
<section uniqueName="national_news">
  <parent uniqueName="news"/>
</section>

<section uniqueName="regional_news">
  <parent uniqueName="national_news"/>
</section>

<section uniqueName="city_news">
  <parent uniqueName="regional_news"/>
</section>

<section uniqueName="travel_europe">
  <parent uniqueName="travel"/>
</section>

<section uniqueName="holland">
  <parent uniqueName="travel_europe"/>
</section> 
```

等等。

因为小节在我的 XSL 的开发阶段和生产阶段之间容易移动、更改或删除，所以我需要动态确定任何给定的小节是否是主要节之一的子节。总共还有无数的小节。硬编码要复制的小节列表是不可撤销的。

分段深度可以很深，如示例所示：分段“city_news”以“regional_news”为父，以“national_news”为父，以“news”为父，所以这个部分需要复制，因为它最终是一个“新闻”的孩子。“holland”部分的顶层部分“Travel”（在“travel_europe”小节下）不在要复制的列表中，因此需要忽略它。

起初，如果父元素在列表中，我尝试检查每个元素，但这只是愚蠢的，它只会让我深入 1 级。我最后一次尝试是创建一个 javascript，首先索引所有部分，然后分析结构，消除与不在列表中的 mainsections 相关的所有部分。但是调用脚本也被证明是一个挑战，因为 XSL 没有自己的方法来调用 javascript。

我对如何进行此操作有点无能为力...任何解决方案或建议？

源 XML 文档有 3500 行，其中的信息与此问题无关。问题是我如何过滤掉一个主要部分的子部分的子部分，或者：我如何确定一个子部分是否是指定主要部分中的一个子部分在树上几步。考虑要输入的 5 个提到的小节，那么输出应该是：

```
<section uniqueName="national_news">
  <parent uniqueName="news"/>
</section>

<section uniqueName="regional_news">
  <parent uniqueName="national_news"/>
</section>

<section uniqueName="city_news">
  <parent uniqueName="regional_news"/>
</section> 
```

自从

```
<section uniqueName="travel_europe">
  <parent uniqueName="travel"/>
</section>

<section uniqueName="holland">
  <parent uniqueName="travel_europe"/>
</section> 
```

与“旅行”主要部分有关，该部分不在要复制的列表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:08:00.847

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:param name="pWanted" select="'|news|sport|'"/>

 <xsl:key name="kChildren" match="section" use="parent/@uniqueName"/>

 <xsl:template match="/*">
     <xsl:call-template name="getSections">
       <xsl:with-param name="pParents" select=
       "section[contains($pWanted, concat('|',@uniqueName, '|'))]"/>
     </xsl:call-template>
 </xsl:template>

 <xsl:template name="getSections">
  <xsl:param name="pParents" select="/.."/>

  <xsl:if test="$pParents">
    <xsl:copy-of select="$pParents"/>
    <xsl:call-template name="getSections">
     <xsl:with-param name="pParents"
        select="key('kChildren', $pParents/@uniqueName)"/>
    </xsl:call-template>
  </xsl:if>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于以下 XML 文档时**（未提供此类文档！！！）：

```
<t>
    <section uniqueName="news"></section>
    <section uniqueName="sport"></section>
    <section uniqueName="travel"></section>
    <section uniqueName="national_news">
        <parent uniqueName="news"/>
    </section>
    <section uniqueName="regional_news">
        <parent uniqueName="national_news"/>
    </section>
    <section uniqueName="city_news">
        <parent uniqueName="regional_news"/>
    </section>
    <section uniqueName="travel_europe">
        <parent uniqueName="travel"/>
    </section>
    <section uniqueName="holland">
        <parent uniqueName="travel_europe"/>
    </section>
</t> 
```

**产生想要的（未在问题中完全指定！！！），正确的结果**：

```
<section uniqueName="news"/>
<section uniqueName="sport"/>
<section uniqueName="national_news">
   <parent uniqueName="news"/>
</section>
<section uniqueName="regional_news">
   <parent uniqueName="national_news"/>
</section>
<section uniqueName="city_news">
   <parent uniqueName="regional_news"/>
</section> 
```

**说明**：

正确使用**[键](http://www.w3.org/TR/1999/REC-xslt-19991116#key)**和递归。

# php - 嵌入在 HTML 中的 JavaScript

> ID：11934473
> 
> 赞同：-3
> 
> 时间：2012-08-13T12:41:36.150
> 
> 标签：php, javascript, html, function, drop-down-menu

我有一段 javascript 代码，当进行特定选择时，它会导致一个文本框出现在下拉菜单旁边。在我将它嵌入到 html 之前，它工作得很好。我不确定*为什么*它现在不起作用，尽管它可能真的很微不足道。

这是函数，就像现在一样：

```
$public->html .= '<script type="text/javascript">;
    $(function(){
    // initially check the default value in dd_question
    if($("#dd_question").find("option:selected").val() == "0"){
            $("#other_question").show();
          }else{
            $("#other_question").hide();
          }
        $("#dd_question").change(function() {
          if($(this).find("option:selected").val() == "0"){
            $("#other_question").show();
          }else{
            $("#other_question").hide();
          }
        });
    });
  </script>'; 
```

让它再次工作会很棒。谁能明白为什么不是？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:58:26.450

代码浪费

```
<script type="text/javascript">
$(function() {
  $("#dd_question").change(function() {
    var show = $(this).val() == "0";
    if (show) $("#other_question").show();
    else      $("#other_question").hide();
  }).change();
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:07:15.920

我不是 php 用户，但我可以告诉你，这一行的分号可能不应该存在。

```
$public->html .= '<script type="text/javascript">; 
```

# android - NetworkOnMainThreadException 当我查看是否有互联网连接时

> ID：11934474
> 
> 赞同：-2
> 
> 时间：2012-08-13T12:41:41.437
> 
> 标签：android, internet-connection

我正在尝试检查我的移动设备是否可以访问互联网，但出现以下错误：

```
08-13 14:20:48.990: E/AndroidRuntime(2546): FATAL EXCEPTION: main
08-13 14:20:48.990: E/AndroidRuntime(2546): java.lang.RuntimeException: Unable to start activity ComponentInfo{cx.hell.android/cx.hell.android.conn.tryInternet}: android.os.NetworkOnMainThreadException
08-13 14:20:48.990: E/AndroidRuntime(2546):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
08-13 14:20:48.990: E/AndroidRuntime(2546):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
08-13 14:20:48.990: E/AndroidRuntime(2546):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
08-13 14:20:48.990: E/AndroidRuntime(2546):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
08-13 14:20:48.990: E/AndroidRuntime(2546):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-13 14:20:48.990: E/AndroidRuntime(2546):     at android.os.Looper.loop(Looper.java:137)
08-13 14:20:48.990: E/AndroidRuntime(2546):     at android.app.ActivityThread.main(ActivityThread.java:4745)
08-13 14:20:48.990: E/AndroidRuntime(2546):     at java.lang.reflect.Method.invokeNative(Native Method)
08-13 14:20:48.990: E/AndroidRuntime(2546):     at java.lang.reflect.Method.invoke(Method.java:511)
08-13 14:20:48.990: E/AndroidRuntime(2546):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-13 14:20:48.990: E/AndroidRuntime(2546):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-13 14:20:48.990: E/AndroidRuntime(2546):     at dalvik.system.NativeStart.main(Native Method)
08-13 14:20:48.990: E/AndroidRuntime(2546): Caused by: android.os.NetworkOnMainThreadException
08-13 14:20:48.990: E/AndroidRuntime(2546):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
08-13 14:20:48.990: E/AndroidRuntime(2546):     at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
08-13 14:20:48.990: E/AndroidRuntime(2546):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
08-13 14:20:48.990: E/AndroidRuntime(2546):     at java.net.InetAddress.getAllByName(InetAddress.java:214)
08-13 14:20:48.990: E/AndroidRuntime(2546):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:70)
08-13 14:20:48.990: E/AndroidRuntime(2546):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
08-13 14:20:48.990: E/AndroidRuntime(2546):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:341)
08-13 14:20:48.990: E/AndroidRuntime(2546):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
08-13 14:20:48.990: E/AndroidRuntime(2546):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
08-13 14:20:48.990: E/AndroidRuntime(2546):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
08-13 14:20:48.990: E/AndroidRuntime(2546):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:310)
08-13 14:20:48.990: E/AndroidRuntime(2546):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
08-13 14:20:48.990: E/AndroidRuntime(2546):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
08-13 14:20:48.990: E/AndroidRuntime(2546):     at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
08-13 14:20:48.990: E/AndroidRuntime(2546):     at cx.hell.android.conn.tryInternet.executeReq(tryInternet.java:47)
08-13 14:20:48.990: E/AndroidRuntime(2546):     at cx.hell.android.conn.tryInternet.onCreate(tryInternet.java:27)
08-13 14:20:48.990: E/AndroidRuntime(2546):     at android.app.Activity.performCreate(Activity.java:5008)
08-13 14:20:48.990: E/AndroidRuntime(2546):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
08-13 14:20:48.990: E/AndroidRuntime(2546):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
08-13 14:20:48.990: E/AndroidRuntime(2546):     ... 11 more 
```

在我的应用程序中，我需要通过 WIFI 或数据连接检查设备是否有互联网连接。所以我测试是否有与谷歌的连接。如果这种方法可能是我的问题的原因，则不是。这是我正在使用的代码。

```
public class tryInternet extends Activity{
    String LOGTAG="";
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

            //LOAD LIBRARY//
            URL url;
            try {
                url = new URL("http://www.google.es");
                executeReq(url);
                Intent intent = new Intent(tryInternet.this, MainActivity.class);
                startActivity(intent);
                finish();
            } catch (IOException e) {
                Toast.makeText(getBaseContext(), "DON'T HAVE A CONNECTION OF INTERNET", 
                        Toast.LENGTH_LONG).show();
            }

    }
    private void executeReq(URL urlObject) throws IOException{
        HttpURLConnection conn = null;

        conn = (HttpURLConnection) urlObject.openConnection();
        conn.setReadTimeout(100000);//milliseconds
        conn.setConnectTimeout(150000);//milliseconds
        conn.setRequestMethod("GET");
        conn.setDoInput(true);

        // Start connect
        conn.connect();
        InputStream response = conn.getInputStream();
        String iS= "" + response;
        Log.d("Response:", iS);
    }

} 
```

任何的想法？谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T12:43:39.370

[NetworkOnMainThreadException](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)：

> 当应用程序尝试在其主线程上执行网络操作时引发的异常。

所以你需要使用[Thread](http://developer.android.com/reference/java/lang/Thread.html)、[runOnUiThread](http://developer.android.com/reference/android/app/Activity.html)、[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html) 、[Handler](http://developer.android.com/reference/android/os/Handler.html)或[HandlerThread](http://developer.android.com/reference/android/os/HandlerThread.html)从后台线程更新 UI 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T12:44:13.540

您正在尝试在主线程上执行网络操作，在 Android 应用程序的主 UI 线程中是不允许的。

看看[NetworkOnMainThreadException](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

要解决此问题，请使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)或[Thread](http://developer.android.com/reference/java/lang/Thread.html) 并将您的网络相关操作放入其中。

# sorting - 在分数上排序 lucene

> ID：11934477
> 
> 赞同：2
> 
> 时间：2012-08-13T12:41:55.203
> 
> 标签：sorting, lucene, numeric

我正在测试 lucene 中的排序功能，但没有运气。我是新手。我尝试过使用 TopFieldCollector 或 TopFieldDocs，但似乎没有应用排序。下面是测试代码。它出什么问题了？

```
private void testNumericSorting(){
    // 1\. index some data
    StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_35);
    Directory index = new RAMDirectory();

    IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_35, analyzer);
    IndexWriter w = new IndexWriter(index, config);
    addDoc(w, "orange", 1);
    addDoc(w, "lemon orange", 10);
    w.close();

    // 2\. query
    String querystr = "orange";
    Query q = new QueryParser(Version.LUCENE_35, "title", analyzer).parse(querystr);

    int hitsPerPage = 10;
    IndexSearcher searcher = new IndexSearcher(index, true);
    // Normal score, with no sorting
    //TopScoreDocCollector collector = TopScoreDocCollector.create(hitsPerPage, true);
    //searcher.search(q, collector);
    //ScoreDoc[] hits = collector.topDocs().scoreDocs;

    // Score with TopFieldCollector
    Sort sort = new Sort(new SortField[] {
                                SortField.FIELD_SCORE,
                                new SortField("num", SortField.INT) });  
    TopFieldCollector topField = TopFieldCollector.create(sort, hitsPerPage, true, true, true, false);
    searcher.search(q, topField);   
    ScoreDoc[] sortedHits = topField.topDocs().scoreDocs; 

    // Score with TopFieldDocs
    // TopFieldDocs topFields =  searcher.search(q, null, hitsPerPage, sort);
    // ScoreDoc[] sortedHits = topFields.scoreDocs; 

    System.out.println("Found " + sortedHits.length + " hits.");
    for(int i=0;i<sortedHits.length;++i) {
       int docId = sortedHits[i].doc;
       float score = sortedHits[i].score;
       Document d = searcher.doc(docId);
       System.out.println((i + 1) + ". " + d.get("title")+ " score:"+score);
    }

         searcher.close();
    }
     private static void addDoc(IndexWriter w, String value, Integer num) throws IOException {
        Document doc = new Document();
        doc.add(new Field("title", value, Field.Store.YES, Field.Index.ANALYZED));
        //doc.add(new NumericField("num", Field.Store.NO, false).setIntValue(num));
        doc.add(new Field ("num", Integer.toString(num), Field.Store.NO, Field.Index.NOT_ANALYZED));
        w.addDocument(doc);
    } 
```

如果打印结果有和没有排序，我得到以下输出（基本上没有变化）：

```
Without sorting, found 2 hits.
1\. orange score:0.5945348
2\. lemon orange score:0.37158427

With sorting, found 2 hits.
1\. orange score:0.5945348
2\. lemon orange score:0.37158427 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T14:13:43.123

问题是您将“num”字段添加为字符串，然后尝试将其排序为整数。您应该将其添加为整数（使用 NumericField）或排序为字符串（但请注意它将根据字典顺序进行排序）。

# gcc - GNU 做出意想不到的行为

> ID：11934481
> 
> 赞同：0
> 
> 时间：2012-08-13T12:42:10.303
> 
> 标签：gcc, makefile, gnu-make

我想通过跟踪标头更改在目录`make`中构建所有内容。`.cpp`我尝试通过首先使 gcc 输出带有`-MM`选项的依赖项的目标，然后将主体附加到实际调用编译的目标：

```
OPTIONS = -std=c++11 -Wall

export

all : $(patsubst %.cpp, %.o, $(wildcard *.cpp))

%.o : %.mkt
    make -f $*.mkt

%.mkt : %.cpp
    gcc $(OPTIONS) -MM $*.cpp > $&.mkt1
    echo gcc $(OPTIONS) -c %.cpp > $*.mkt2
    cat $*.mkt1 $*.mkt2 > $*.mkt 
```

然而不知何故，这个脚本发出了表单的调用

```
g++ -c -o something.o something.cpp 
```

对于目录中的每个`.cpp`文件。临时文件`.mkt1`,`.mkt2`并`.mkt`没有被创建。为什么会这样？我如何实现期望的行为？我正在使用 mingw 在 Windows 上执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:39:24.710

您已经提供了两个模式规则链（`%.cpp`-> `%.mkt`，`%.mkt`-> `%.o`），但是 Make 已经有一个隐式规则（`%.cpp`-> `%.o`），它会在搜索构建方法时首先找到它`something.o`。

解决问题的最简单方法是使用`make -r`(or `make --no-builtin-rules`) 将禁用内置的隐式规则。

# c# - 类的自定义Json序列化

> ID：11934487
> 
> 赞同：25
> 
> 时间：2012-08-13T12:42:25.090
> 
> 标签：c#, json, json.net

我的代码结构如下。

```
public class Stats
{
        public string URL { get; set; }
        public string Status { get; set; }
        public string Title { get; set; }
        public string Description { get; set; }
        public int Length { get; set; }
} 
```

和

```
 public class UrlStats
 {
        public string URL { get; set; }
        public int TotalPagesFound { get; set; }
        public List<Stats> TotalPages { get; set; }
        public int TotalTitleTags { get; set; }
        public List<Stats> TotalTitles { get; set; }
        public int NoDuplicateTitleTags { get; set; }
        public List<Stats> DuplicateTitles { get; set; }
        public int NoOverlengthTitleTags { get; set; }
        public List<Stats> OverlengthTitles { get; set; }
 } 
```

基本上我正在扫描网站以获取标题标签、重复标题等统计信息。

我正在使用 JQuery 并对 web 服务进行 AJAX 调用，并在进程运行时检索 url 统计信息以显示迄今为止收集的用户 url 统计信息，因为扫描大型网站需要相当长的时间。所以每 5 秒后我从服务器检索统计信息。现在的问题是我需要在扫描处理完成时发送的所有列表变量数据，而不是在更新期间。现在发生了什么，`List<Stats>`变量数据也在更新期间发送，这是一大块数据，我只想发送`int`显示流程更新所需的类型变量。

通过在互联网上搜索，我找不到任何有用的东西来解决我的问题，我发现 Json.NET 是一个非常好的库，但我真的不知道如何正确使用它来获得我想要的东西。

**基本上，如果可能的话，我正在根据它们在运行时的数据类型来寻找序列化属性。**

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-14T13:49:08.980

您的问题有两种不同的方法。

如果您要更频繁地更改类，则应该选择第一个，因为第一种方法可以防止您忘记序列化新添加的属性。此外，如果你想添加另一个你想以相同方式序列化的类，它的可重用性要高得多。

如果您只有这两个类并且它们很可能不会改变，您可以选择第二种方法来保持您的解决方案简单。

## 1.使用自定义转换器选择所有`int`属性

第一种方法是使用自定义`JsonConverter`，通过仅包含具有 type 的属性来序列化类或结构`int`。代码可能如下所示：

```
class IntPropertyConverter : JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        // this converter can be applied to any type
        return true;
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        // we currently support only writing of JSON
        throw new NotImplementedException();
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        if (value == null)
        {
            serializer.Serialize(writer, null);
            return;
        }

        // find all properties with type 'int'
        var properties = value.GetType().GetProperties().Where(p => p.PropertyType == typeof(int));

        writer.WriteStartObject();

        foreach (var property in properties)
        {
            // write property name
            writer.WritePropertyName(property.Name);
            // let the serializer serialize the value itself
            // (so this converter will work with any other type, not just int)
            serializer.Serialize(writer, property.GetValue(value, null));
        }

        writer.WriteEndObject();
    }
} 
```

然后你必须用一个来装饰你的班级`JsonConverterAttribute`：

```
[JsonConverter(typeof(IntPropertyConverter))]
public class UrlStats
{
    // ...
} 
```

*免责声明：*此代码仅经过非常粗略的测试。

* * *

## 2.单独选择属性

第二种解决方案看起来更简单一些：您可以使用`JsonIgnoreAttribute`来装饰要排除以进行序列化的属性。或者，您可以通过显式包含要序列化的属性从“黑名单”切换到“白名单”。这是一些示例代码：

**黑名单：（**我重新排序了属性以获得更好的概览）

```
[JsonObject(MemberSerialization.OptOut)] // this is default and can be omitted
public class UrlStats
{
    [JsonIgnore] public string URL { get; set; }
    [JsonIgnore] public List<Stats> TotalPages { get; set; }
    [JsonIgnore] public List<Stats> TotalTitles { get; set; }
    [JsonIgnore] public List<Stats> DuplicateTitles { get; set; }
    [JsonIgnore] public List<Stats> OverlengthTitles { get; set; }

    public int TotalPagesFound { get; set; }
    public int TotalTitleTags { get; set; }
    public int NoDuplicateTitleTags { get; set; }
    public int NoOverlengthTitleTags { get; set; }
} 
```

**白名单：（**也重新排序）

```
[JsonObject(MemberSerialization.OptIn)] // this is important!
public class UrlStats
{
    public string URL { get; set; }
    public List<Stats> TotalPages { get; set; }
    public List<Stats> TotalTitles { get; set; }
    public List<Stats> DuplicateTitles { get; set; }
    public List<Stats> OverlengthTitles { get; set; }

    [JsonProperty] public int TotalPagesFound { get; set; }
    [JsonProperty] public int TotalTitleTags { get; set; }
    [JsonProperty] public int NoDuplicateTitleTags { get; set; }
    [JsonProperty] public int NoOverlengthTitleTags { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T14:06:51.830

哦，知道了，重新阅读您的问题，我认为您可以序列化数据的投影。

您可以尝试以下方法：

```
var json = JsonConvert.SerializeObject(new { u.TotalPagesFound, u.TotalTitleTags, u.NoDuplicateTitleTags, u.NoOverlengthTitleTags } ); 
```

这只会将您的类的 int 属性转换为 JSON。这是最简单的方法，它与您的班级结构相关。如果你想要更通用的东西，你需要实现一个自定义转换器。

原答案：

我认为你的类没有问题，你没有任何奇怪的循环引用，所以 Json.NET 序列化你的类应该没有问题。所以去抓 Json.NET 然后你可以尝试以下

```
// create new instance of your url stat class
var u = new UrlStats() { URL = "a.com", TotalPages = new List<Stats>() { new Stats() { URL = "b.com", Status = "xxxx" } } };
// seralize!
var json = JsonConvert.SerializeObject(u);
Console.Write(json); 
```

我用这种方法得到的是这样的：

```
{"URL":"a.com","TotalPagesFound":0,"TotalPages":[{"URL":"b.com","Status":"xxxx","Title":null,"Description":null,"Length":0}],"TotalTitleTags":0,"TotalTitles":null,"NoDuplicateTitleTags":0,"DuplicateTitles":null,"NoOverlengthTitleTags":0,"OverlengthTitles":null} 
```

对我来说，这看起来像是很好的 json。

# web-services - 创建网络服务

> ID：11934491
> 
> 赞同：0
> 
> 时间：2012-08-13T12:42:31.897
> 
> 标签：web-services, mono, xamarin.android

如何使用 Mono For Android 创建 Web 服务？似乎一切都是关于使用 Web 服务，而不是真正创建一个。

我试过用这个：[http ://www.mono-project.com/Writing_a_WebService](http://www.mono-project.com/Writing_a_WebService)

但是 System.Web.Services.WebService 不存在。System.ServiceModel 也尚未翻译。有没有人知道如何在 Mono For Android 上创建 web 服务？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:04:21.680

我现在尝试实现以下代码并尝试在模拟器中运行它，但是我通过浏览器或通过 REST 客户端发出的请求从未到达 HandleRequest。

```
protected override void OnCreate(Bundle bundle) {
    base.OnCreate(bundle);

    // Set our view from the "main" layout resource
    SetContentView(Resource.Layout.Main);

    var startBtn = FindViewById<Button>(Resource.Id.StartBtn);
    stopBtn.Clickable = false;

    startBtn.Click += SetupListener;
}

private void SetupListener(object sender, EventArgs e) {
    _httpListener = new HttpListener();
    _httpListener.Prefixes.Add("http://*:9876/");
    _httpListener.Start();
    _httpListener.BeginGetContext(HandleRequest, _httpListener);
}

private void HandleRequest(IAsyncResult result) {
    var context = _httpListener.EndGetContext(result);
    var response = "<html>Hello World</html>";
    var buffer = Encoding.UTF8.GetBytes(response);

    context.Response.ContentLength64 = buffer.Length;
    context.Response.OutputStream.Write(buffer, 0, buffer.Length);
    context.Response.OutputStream.Close();

    _httpListener.BeginGetContext(HandleRequest, _httpListener);
} 
```

I have tried making request like the following: http:// localhost:9876/ , http:// 10.1.1.190:9876/ and http:// 10.0.2.2:9876/ but none of them actually reaches into the application.

# c# - 实体框架多对多过滤器

> ID：11934496
> 
> 赞同：1
> 
> 时间：2012-08-13T12:43:14.280
> 
> 标签：c#, linq, entity-framework-4.1

我在联系人和列表之间的 EF Code First 中存在多对多关系。ProxyCreation 和 LazyLoading 被禁用以允许实体的序列化。

我有一个查询，旨在返回给定列表中的联系人。

```
// GET api/Contacts
        [Queryable]
        public IQueryable<Contact> GetContacts(int bulkListId)
        {
            var bulkList = db.BulkLists.Include(c => c.Contacts).Where(c => c.ID == bulkListId).SingleOrDefault();

            if (bulkList == null)
                throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotFound));

            return bulkList.Contacts.AsQueryable().OrderBy(c => c.ID).Include(c => c.AddressBookType).Include(c => c.BulkLists);
        } 
```

虽然这有效，但它并没有按预期工作。它会生成给定列表中的正确联系人集，但这些联系人仅在其关系的 Lists 属性中填充了该列表。因此，当它被序列化并返回给客户端时，它会隐藏联系人所属的其他列表。

我看不到查询是如何以这种方式过滤它的，以及我如何将其更改为包含完整的列表集。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:13:28.603

你在作弊！:)

通过添加`AsQueryable()`到`bulkList.Contacts`您，可以继续进行`Include`而不会使编译器抱怨。但...

根据[DbExtensions.Include 上的 MSDN](http://msdn.microsoft.com/en-us/library/gg671236%28v=vs.103%29.aspx)：

> 此扩展方法调用 IQueryable 源对象的 Include(String) 方法（*如果存在此类方法*） 。如果源 IQueryable 没有匹配方法，则此方法不执行任何操作。

（强调我的）

并且`EntityCollection`没有`Include`方法，所以什么也没有发生。

您必须在第一条语句中扩展包含列表，可能像这样：

```
db.BulkLists
    .Include(c => c.Contacts.Select(c => c.AddressBookType))
    .Include(c => c.Contacts.Select(c => c.BulkLists)) 
```

# c# - C#\避免内存不足异常

> ID：11934498
> 
> 赞同：3
> 
> 时间：2012-08-13T12:43:19.847
> 
> 标签：c#, linq, list, serialization, filestream

假设我有一个`List<T>`成员类。假设我不确定将推入多少项目（但我不想将其作为阻止列表执行） - 此列表包含过去 24 小时的项目滑动窗口（我使用 LINQ 查询访问它）。

是否有一种巧妙的方法来告诉列表将自身序列化到某个磁盘文件以避免内存不足并在再次从列表中删除项目时将其自身去除？（文件流什么的）

还是我需要自己编写机制？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T12:47:07.220

通常，这就是您使用数据库的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:22:36.630

您可以[XML 序列化](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)将具有属性的整个类作为 xml 存储到您的数据库中（如果您使用 MS SQL，则为 xml 类型）或 xml 文件，然后在需要时将其反序列化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T12:45:26.180

不，没有这样的方法，对于 LINQ 可访问性的要求更是如此。

# webrtc - WebRTC 开销

> ID：11934499
> 
> 赞同：5
> 
> 时间：2012-08-13T12:43:21.220
> 
> 标签：webrtc

我想知道，通过数据通道发送数据时 WebRTC 会产生多少开销。我知道 Websockets 每帧有 2 - 14 字节的开销。WebRTC 是否使用更多开销？我在网上找不到一些有用的信息。对我来说很清楚，Datachannels 目前不能使用。媒体流使用了多少开销？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-09T11:38:15.423

在应用层，您可以将 DataChannel 视为通过 SCTP 发送和接收。在 SCTP 标头的 PPID（有效负载协议标识符）字段中，Datachannel 设置值 0x51 表示它正在发送 UTF-8 数据，并设置值 0x52 表示二进制数据。

是的你是对的。RTCDataChannel 使用 SCTP over DTLS 和 UDP。DTLS 用于安全性。但是，SCTP 在穿越大多数 NAT/防火墙设置时存在问题。因此，为了克服这个问题，SCTP 通过 UDP 建立隧道。因此，发送数据的总开销将是：

`SCTP + DTLS + UDP + IP`

那就是：

`28 bytes + 20-40 bytes + 8 bytes + 20 - 40 bytes`

因此，开销大约为**120 字节**。WebRTC 客户端可以发送的最大 SCTP 数据包大小为 1280 字节。因此，最多可以为每个 SCTP 数据包发送大约 1160 字节的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T07:16:50.760

WebRTC 使用 RTP 发送其媒体。RTP 在 UDP 上运行。

除了通常的 IP 和 UDP 标头外，还有两个附加标头：

1.  RTP 标头本身从 12 个字节开始，并且可以从那里增长，具体取决于使用的内容。
2.  有效负载标头 - 用于正在使用的特定编解码器的每个数据包的标头。这取决于编解码器本身。

RTP 的设计目的是使其有效负载的开销尽可能小，因为您希望获得更好的媒体质量，这意味着将尽可能多的位专用于媒体本身。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-12T07:57:59.913

[![在此处输入图像描述](../Images/7788b11a22be40b7788b6c90b9441591.png)](https://i.stack.imgur.com/ncw1q.png)

这是 2 个 peer.js 实例（babylon.js 前端）每 16 毫秒（约每秒 60 个）发送 3 个字节的屏幕截图。

分析器显示 30,000 位/秒：

30,000 位 / 每字节 8 位 / 每秒 60 = 62.5 字节，所以根据分析器，在 3 个字节之后我发送它是 ~ **59.5 字节。**

我不确定传入的东西是否不计入，因为它只分析了一半，15k 位/秒

# xsl-fo - 如何在 XSL-FO 文件中添加新页面

> ID：11934500
> 
> 赞同：1
> 
> 时间：2012-08-13T12:43:20.597
> 
> 标签：xsl-fo

现在我正在使用 XSLT 在 XSL-FO 中创建报告。我的 XSLT 文件中有不同的模板，用于报告中的不同部分。在生成报告时，我在半页上得到一个特定部分，在第二页上得到另一半；因此我们决定将整个部分移至新页面。现在我真的很困惑我应该在 XSLT 中向模板添加什么标签，以便它可以在新页面上。我是 XSLT 的新手，需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:53:15.270

如果您可以支持 HTML 报告，请使用 XLST 创建 HTML 文档，然后使用 CSS 管理分页符

```
<style type="text/css">
h1{
page-break-before: always;
}
</style> 
```

由于字体大小等原因，尝试“猜测”在 HTML 中放置分页符的位置是一个挑战。如果您想要打印精美的材料，通常最好使用打印机友好格式（例如 PDF）。然而，HTML+CSS 可以给你一个快速而肮脏的解决方案。

**编辑**

您的评论提到了 XSL-FO。也许[休息前的](http://www.w3schools.com/xslfo/prop_break-before.asp)财产会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-13T09:35:42.053

如果您有很多小部分，则可以`fo:block`在每个部分周围放置一个并使用`keep-together.within-page`（[http://www.w3.org/TR/xsl11/#keep-together](http://www.w3.org/TR/xsl11/#keep-together)），`fo:block`以便这些部分尽可能地保持在一起。

# beanshell - Beanshell 如何将字符串转换为日期时间

> ID：11934501
> 
> 赞同：0
> 
> 时间：2012-08-13T12:43:20.647
> 
> 标签：beanshell

我正在使用 beanshell，我需要将格式为 '2012.08.14 07:30:00.000' 的字符串转换为格式为 1344925800000 的日期时间整数

有没有人有任何想法？

提前致谢

铝

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:10:41.713

我希望您的示例结果只是一个示例，因为使用 Java 意味着我获得了不同的结果。但一个标准是使用自 1970 年 1 月 1 日 00:00:00 GMT 以来的毫秒数。

我不知道是否有更通用的方法，可以让您指定格式字符串。在这里，我使用字符串转换和特定语言环境的格式。

```
import java.text.DateFormat;

sDate = "2012.08.14 07:30:00.000";
// replace beginning dots with hyphens
sDate = sDate.replaceFirst("([0-9]{4})\\.([0-9]{2})\\.([0-9]{2}) ", "$1-$2-$3 ");
// use a date format from a specified locale
formatter = DateFormat.getDateInstance(
    DateFormat.MEDIUM,
    new Locale("PL"));
javax.swing.JOptionPane.showMessageDialog(null,
    "time=" + formatter.parse(sDate).getTime()); 
```

# ruby-on-rails - 将哈希映射映射到类实例

> ID：11934502
> 
> 赞同：3
> 
> 时间：2012-08-13T12:43:30.093
> 
> 标签：ruby-on-rails, ruby, gem

寻找宝石或至少知道如何解决这个问题，我所拥有的并不完全优雅:)

想法很简单我想映射哈希，例如：

```
{ :name => 'foo',
  :age  => 15,
  :job => {
        :job_name => 'bar',
        :position => 'something'
    ...
  }
} 
```

对于类（具有扁平成员结构）或结构的对象，例如：

```
class Person {
  @name
  @age
  @job_name
  ...
} 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:46:02.963

假设您可以确定子条目键不会与包含条目键冲突，这里有一些代码应该可以工作......

```
require 'ostruct'

def flatten_hash(hash)
  hash = hash.dup
  hash.entries.each do |k,v|
    next unless v.is_a?(Hash)
    v = flatten_hash(v)
    hash.delete(k)
    hash.merge! v
  end
  hash
end

def flat_struct_from_hash(hash)
  hash = flatten_hash(hash)
  OpenStruct.new(hash)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:55:14.617

我使用它的解决方案解决了具有相同键名的问题，但它没有提供扁平的类结构。有人可能会觉得这很方便，请记住需要处理具有保留名称（例如*id*、*type ）的值。*

```
 require 'ostruct'

   def to_open_struct(element)
     struct = OpenStruct.new
     element.each do |k,v|
       value = Hash === v ? to_open_struct(v) : v
       eval("object.#{k}=value")
     end
     return struct
   end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T13:56:49.063

您事先知道钥匙的替代答案

```
class Job
  attr_accessor :job_name, :position

  def initialize(params = {})
    self.job_name = params.fetch(:job_name, nil)
    self.position = params.fetch(:position, nil)
  end
end

class Person
  attr_accessor :name, :age, :job

  def initialize(params = {})
    self.name = params.fetch(:name, nil)
    self.age = params.fetch(:age, nil)
    self.job = Job.new(params.fetch(:job, {}))
  end
end

hash = { :name => 'foo', :age => 1, :job => { :job_name => 'bar', :position => 'soetmhing' }}
p = Person.new(hash)

p.name
==> "foo"

p.job
==> #<Job:0x96cacd8 @job_name="bar", @position="soetmhing">

p.job.name
==> "bar" 
```

# jmeter - 想要检查 Jmeter 中的断言失败

> ID：11934513
> 
> 赞同：1
> 
> 时间：2012-08-13T12:44:43.967
> 
> 标签：jmeter

我是 JMeter 的初学者。我想在我的脚本中检查断言失败。我想在一次登录尝试后继续我的事务进行多次迭代，并且我只想在发生错误时注销。为此，我想检查脚本中是否发生错误。

是否可以通过比较 JMeter 中的断言来实现？
如果没有，还有其他方法可以找到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T13:29:13.757

定义将响应标记为不稳定的第一个指标（响应代码、关键字等）。

尝试根据上述指标使用[响应断言](http://jmeter.apache.org/usermanual/component_reference.html#Response_Assertion)来处理请求的状态（成功/失败），然后使用 IfController 以及预定义的[JMeterThread.last_sample_ok](http://jmeter.apache.org/usermanual/functions.html#predefinedvars) jmeter 变量 - 无论最后一个样本是否正常 - 真/假。

架构将如下所示，例如：

```
**ThreadGroup**
    **LOGIN REQUEST**
    ...
    **YOUR HTTP REQUEST HERE**
        **Response Assertion**
        Response Field to Test: Response Code
        Pattern Matching Rules: NOT Equals
        Patterns to Test: 200
        **Regex Extractor**
    **IfController**
    Condition: ${JMeterThread.last_sample_ok}   // will be TRUE if Response Assertion above is TRUE (i.e. response code != 200)
        **LOGOUT REQUEST**
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-16T09:08:20.680

除了上面的答案，我建议你：

*   向您的脚本添加错误检查 - 断言响应对给定请求有效
*   需要调试测试脚本时使用 Firebug 查看网络流量
*   使用正则表达式提取器从响应中检索动态值并在以后的请求中重新使用它

要了解这个想法，您可以按照[JMeter 错误检查](http://community.blazemeter.com/knowledgebase/articles/207652-jmeter-video-tutorial-error-checking-and-dynamic-)视频教程进行操作。

仅供参考：提供了[断言详细信息](http://www.jajakarta.org/jmeter/1.7/en/user_manual/assertions.html)。希望这可以帮助。

# deployment - 出现错误：使用 teamcity 进行 Packageweb 配置时无法创建类型为“archiveDir”和路径“....vbproj.zip”的对象

> ID：11934518
> 
> 赞同：0
> 
> 时间：2012-08-13T12:45:10.297
> 
> 标签：deployment, web, package, teamcity

我正在尝试使用 teamcity 配置 packageweb。但收到以下错误：-

![在此处输入图像描述](../Images/0d9e93c3bc8871045a99224d2573ae6a.png)

我将发布参数传递给它，它也没有转换配置文件。文件中甚至提到了该参数。知道我在这里做错了什么。

PAcakgeweb 参考：[http ://sedodream.com/2012/03/14/PackageWebUpdatedAndVideoBelow.aspx](http://sedodream.com/2012/03/14/PackageWebUpdatedAndVideoBelow.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T13:50:58.637

我遇到了类似的问题，所以虽然我确信八个月后你没有用这个答案，但无论如何我都会发布这个，以防其他人遇到同样的问题。

假设您使用 TeamCity 编译您的项目，您需要将 PackageWeb 目标文件添加到 Web 项目文件中，以便它在编译时运行 SlowCheetah 转换。

对我来说，这意味着在 Visual Studio 中卸载 Web 项目，并在文件底部添加以下导入目标，就在关闭 /Project 标记之前；

```
<Import Project="_Package\Sedodream.Package.targets" /> 
```

[您可以在此处](http://sedodream.com/2011/12/12/SlowCheetahXMLTransformsFromACIServer.aspx)和[此处](http://sedodream.com/2012/12/24/SlowCheetahBuildServerSupportUpdated.aspx)阅读有关此内容的更多信息。

# php - ExtJs4 在 store.sync 上出现空 JSON 服务器端的问题

> ID：11934523
> 
> 赞同：0
> 
> 时间：2012-08-13T12:45:21.360
> 
> 标签：php, post, extjs4

这是我的商店代码：

```
 var sql = Ext.create('Ext.data.Store', {
    model: 'SQL',
    groupField: 'project',
    proxy: {
        type:'ajax',
        api: {                
            read: 'data/showText.php', // Called when reading existing records
            update: 'data/saveRollout.php' // Called when updating existing records                
        },
        actionMethods: {               
            read   : 'GET',
            update : 'POST'               
        },         
        reader: {
            type: 'json',
            root: 'data'
        },
        writer: {
            type: 'json'
        }
    },
    autoSync: true,
    autoLoad: true
}); 
```

它发送正确的 json 代码

```
{
   "projectId":102,
   "project":"2G Rollout and Performance",
   "taskId":123,
   "description":"2)Capacity Sites Delta",
   "january":123,
   "february":0,
   "march":0,
   "april":0,
   "may":0,
   "june":0,
   "july":0,
   "august":0,
   "september":0,
   "october":0,
   "november":0,
   "december":0,
   "id":null
} 
```

但是php文件中的响应为NULL

```
var_dump(json_decode($_POST, true));// shows NULL on response 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:01:04.697

您实际上是通过请求正文而不是通过 url 将数据发送到服务器。

使用：

```
$iRequestBody = file_get_contents('php://input'); 
```

将工作。

查看[类似的问题和一些（额外的）优秀答案](https://stackoverflow.com/questions/9597052/how-to-retrieve-request-payload)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:12:38.220

您是否尝试过取出：

```
writer: {
    type: 'json'
} 
```

要查看它是否处理发送到服务器的常规文本，可能您的服务器没有很好地处理 JSON 编码。

# javascript - 如何从 HTML 获取值到 SVG 文件

> ID：11934527
> 
> 赞同：0
> 
> 时间：2012-08-13T12:45:31.330
> 
> 标签：javascript, html, css, svg

如何从 HTML 获取值到 svg 文件。（即）我必须修复一个文本框和 html 中的命令按钮，然后单击按钮上的值转到 SVG 并打印该文本。我的代码在[这里](http://jsfiddle.net/kbtQB/2/)。我的代码中有什么类型的错误（或）错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:50:32.527

**在 html 文件中，您将其添加到 url....

```
<object type="picture/svg+xml" data="menu.svg param=value&param1=value1"></object>** 
```

# php - 如何使用 PHP 旋转动画 gif？

> ID：11934529
> 
> 赞同：1
> 
> 时间：2012-08-13T12:45:44.917
> 
> 标签：php, rotation, animated-gif

是否有任何代码可以让我在保持动画的同时将动画 gif 旋转 180 度？

我尝试使用标准的[imagerotate](http://php.net/manual/en/function.imagerotate.php)函数（将适当的东西从 jpeg 更改为 gif），但它仍然只输出第一帧。

我还找到了[https://stackoverflow.com/a/9356895/462158](https://stackoverflow.com/a/9356895/462158)，但如果可能的话，我想找到 ImageMagick 以外的东西。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:57:10.837

您可以按照评论中的建议使用[ImageMagick rotateImage](http://php.net/manual/en/imagick.rotateimage.php)

或者

1.  从 gif 中提取帧
2.  以您喜欢的方式处理单个帧（在您的情况下进行图像旋转..）
3.  重建动画

要从 gif 图像中提取帧（并重建动画），您可以使用[gifsicle](http://www.lcdf.org/gifsicle/)。

第一种方法更简单，所以首先尝试一下，但如果它不适合需要，手动处理始终是一种选择

# android - 如何在 Corona 中使用关键事件？

> ID：11934530
> 
> 赞同：2
> 
> 时间：2012-08-13T12:45:46.257
> 
> 标签：android, events, lua, key, coronasdk

编辑：下面的这段代码正在工作。不幸的是，我无法在模拟器中测试这些关键事件，所以我犯了一个错误并将错误的 apk 发送到手机。对于那个很抱歉。

我正在尝试这里给出的代码：http: [//developer.coronalabs.com/reference/index/events/key/eventkeyname](http://developer.coronalabs.com/reference/index/events/key/eventkeyname)

但是我无法检测到返回键事件。我试图打印 event.keyName 但当我触摸 android 设备上的后退按钮时它没有检测到它。

你能帮帮我吗？谢谢。

这是我的代码：

```
 -- Key listener
    local function onKeyEvent( event )
        local phase = event.phase
        local keyName = event.keyName
        eventTxt.text = "("..phase.." , " .. keyName ..")"

        if(keyName=="back") then
        local a=display.newText("hello",100,600,nil,35)
        end
        -- we handled the event, so return true.
        -- for default behavior, return false.
        return true
     end

    -- Add the key callback
   Runtime:addEventListener( "key", onKeyEvent ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T21:10:37.253

我的一个游戏的生产代码：

```
function onBackButtonPressedAtMap(e)
    if (e.phase == "down" and e.keyName == "back") then
        --Here the key was pressed      
        downPress = true
        return true
    else 
        if (e.phase == "up" and e.keyName == "back" and downPress) then
            --Here the key was released, put your print("hello!") here.
            storyboard.gotoScene( "mapscreen", "fade", 200 );
            --The next line is to disable this event
            --so the key is not trapped anymore on the "mapscreen"
            --because I want the back key make the APP quit.
            Runtime:removeEventListener( "key", onBackButtonPressedAtMap );
            return true
        end
    end
    return false;
end 
```

# python - 通过不使用任何数据库来构建 web 界面，将 python 代码与 django 集成

> ID：11934533
> 
> 赞同：2
> 
> 时间：2012-08-13T12:46:03.933
> 
> 标签：python, django-views

我有一个 python 代码，它从用户那里获取很少的输入并给出输出。它不需要任何数据库。现在我想使用 django 构建一个 Web 界面。我想知道如何在不使用任何数据库的情况下将 python 代码集成到 django 的 web 界面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T12:54:35.387

您不需要使用数据库。只需将 Python 代码写入视图并将输出放入传递给渲染函数的字典中。

视图.py：

```
def my_view(request):
    # Do stuff and set value
    return render_to_response('my_page.html',
                              {'value': value},
                              context_instance=RequestContext(request)) 
```

# c# - C# 语句（选择？）

> ID：11934537
> 
> 赞同：2
> 
> 时间：2012-08-13T12:46:20.593
> 
> 标签：c#, syntax

我忘记了 C# 语句的语法，我什至不知道名字....

假设您有一个布尔值，将其称为已连接，并且我想根据连接状态设置一些文本。我知道有一个简单的“单行”语句，但我忘记了语法，而且我不知道语句类型的名称，所以我可以用谷歌搜索它。

这与我正在寻找的东西很接近。语法如下所示：

```
string title = ( connected : "[Not Connected]", "[Connected]"); 
```

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T12:47:51.037

您正在寻找[条件运算符](http://msdn.microsoft.com/en-us/library/ty67wk28%28v=vs.100%29.aspx)：

```
string title = connected ? "[Connected]" : "[Not Connected]"; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T12:47:38.677

它被称为[条件/三元运算符](http://msdn.microsoft.com/en-us/library/ty67wk28%28v=vs.80%29.aspx)

```
string title = connected ? "[Not Connected]": "[Connected]"; 
```

**注意**真正的条件首先出现，所以在你的例子中它实际上应该是

```
string title = connected ? "[Connected]": "[Not Connected]"; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-13T12:47:51.987

我认为您的意思是[*条件运算符*](http://msdn.microsoft.com/en-us/library/ty67wk28.aspx)：

```
// Sample changed from original code for sanity
string title = connected ? "[Connected]" : "[Not connected]"; 
```

它的专有名称是条件运算符，但您有时会在这里将其称为“三元运算符”。这*只是*意味着它具有三个操作数（与一元运算符和二元运算符相比） - 它根本没有描述它的*作用*，应该避免使用 IMO。使用它的正确名称，它描述了它的用途：评估一个*条件*，然后基于该条件评估另一个表达式。

有关行为等的详细信息，请参阅 C# 4 规范的第 7.14 节。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-13T12:48:15.150

听起来您在谈论三元[条件运算符](http://msdn.microsoft.com/en-us/library/ty67wk28)。

```
string title = condition ? "on true" : "on false"; 
```

请注意，这不是许多人可能认为的“三元运算符”，三元只是意味着有 3 个操作数，您可以[在 Wikipedia 上阅读更多内容](http://en.wikipedia.org/wiki/Ternary_operation)。

> 在计算机科学中，三元运算符（有时被错误地称为三元运算符）是一个接受三个参数的运算符

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T12:48:24.510

输入[条件运算符](http://msdn.microsoft.com/en-us/library/ty67wk28%28VS.80%29.aspx)

```
var title = connected ?  "Connected" : "Not Connected" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-13T12:51:09.913

```
title= (connected == true) ? "[Connected]" : "[Not Connected]"; 
```

或者

```
title= (connected) ? "[Connected]" : "[Not Connected]"; 
```

# java - 尝试在 rt.jar 中显示类的 Javadoc 时 Eclipse 超时

> ID：11934538
> 
> 赞同：2
> 
> 时间：2012-08-13T12:46:31.033
> 
> 标签：java, eclipse, javadoc

就在最近，我的 Eclipse 安装已停止可靠地显示`rt.jar`. 悬停文档和内容辅助都不能显示任何非本地类型的 Javadoc。这个问题是零星的，Javadocs 有时一次可以完美运行几个小时。

查看工作区日志，我看到如下消息：

```
!ENTRY org.eclipse.jdt.ui 4 10001 2012-08-13 10:03:58.050
!MESSAGE Internal Error
!STACK 1
Java Model Exception: Java Model Status [Timed out while retrieving the attached javadoc for String {key=Ljava/lang/String;} [in String.class [in java.lang [in C:\Program Files\Java\jre6\lib\rt.jar]]] ]
  at org.eclipse.jdt.internal.core.JavaElement.getURLContents(JavaElement.java:808)
  at org.eclipse.jdt.internal.core.BinaryType.getJavadocContents(BinaryType.java:1037)
  at org.eclipse.jdt.internal.core.BinaryType.getAttachedJavadoc(BinaryType.java:995)
  at org.eclipse.jdt.internal.ui.text.javadoc.JavadocContentAccess2.getHTMLContent(JavadocContentAccess2.java:463)
  at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.getHoverInfo(JavadocHover.java:619)
  at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.internalGetHoverInfo(JavadocHover.java:565)
  at org.eclipse.jdt.internal.ui.text.java.hover.JavadocHover.getHoverInfo2(JavadocHover.java:557)
  at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:163)
  at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverInfo2(BestMatchHover.java:129)
  at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.getHoverInfo2(JavaEditorTextHoverProxy.java:85)
  at org.eclipse.jface.text.TextViewerHoverManager$4.run(TextViewerHoverManager.java:166)
!SUBENTRY 1 org.eclipse.jdt.core 4 1012 2012-08-13 10:03:58.050
!MESSAGE Timed out while retrieving the attached javadoc for String {key=Ljava/lang/String;} [in String.class [in java.lang [in C:\Program Files\Java\jre6\lib\rt.jar]]] 
```

我最初想知道 McAfee 访问扫描是否妨碍了我 - 它有一个可怕的习惯，在遇到 JAR 时会停下来 - 但我放心地看到我的设置仍然存在以忽略所有 JAR 文件（另外，如额外的好处，内容`C:\Program...\Java`）。

有没有人遇到过这个问题？有没有办法增加这里应用的超时值？

我尝试过的事情：

*   增加存储在**Preferences > Java > Edit > Content Assist > Advanced > Timeout 以从附加的 Javadoc (ms) 获取参数名称的**值，但它对我的问题没有明显影响。不足为奇，因为它从未声称会影响基于悬停的超时。
*   创建一个新的工作区，没有效果。
*   仔细检查 McAfee 设置 - JAR 显然未扫描。
*   在访问扫描日志中查看 McAfee 似乎并没有*显示*它正在咀嚼`rt.jar`。
*   对着监视器缓慢而大声地喊叫。

没有一个有效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T14:56:31.360

触发该问题是因为我的 Eclipse 安装配置为使用我的本地 JRE，而不是我的 JDK。由于 JRE 不包含 Java 源代码（也不附加 Javadocs），Eclipse 被迫从 Web 检索此信息。据推测，某些网络延迟有时会导致问题。

我通过在**Preferences > Java > Installed JREs**中添加对本地 JDK的引用并删除对旧 JRE 的引用来解决此问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T21:12:03.827

我在 Eclipse 3.7.1 上遇到了同样的问题，并通过访问解决了它

*窗口 -> 首选项 -> Java -> 已安装的 JRE -> 执行环境 -> JavaSE-1.7*

然后我选择了 jdk 选项而不是 jre7

# knockout.js - 将对象添加到数组数组

> ID：11934540
> 
> 赞同：1
> 
> 时间：2012-08-13T12:46:39.273
> 
> 标签：knockout.js

我想向产品对象添加成分。

```
<ul data-bind="foreach: products">
    <li data-bind="text: name"></li>
    <li>
        <ul data-bind="foreach: ingredients">
            <li data-bind="text: name"></li>
        </ul>
    </li>
</ul>

<script>
    var viewmodel = {
        products: ko.observableArray([])
    };

    ko.applyBindings(viewmodel);
</script> 
```

如果我执行下面的代码，它可以正常工作：

```
viewmodel.products.push({
    name:"product name",
    ingredients:[{name:"ingredient 1"},{name:"ingredient 2"}]
}) 
```

但现在我需要访问最后添加的产品并添加一种成分.. 会是这样的：

```
viewmodel.products[0].ingredients.push({name:"ingredient 3"}) 
```

但是当我这样做时，错误'TypeError：无法读取未定义的属性'成分''抛出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:14:39.773

我为你写了一个小提琴。有用！
要访问`products`你必须写`products()[0]`，但不是`products[0]`，因为这`()`意味着`get value`
这个小提琴是新的淘汰赛风格
[http://jsfiddle.net/hBsFM/3/](http://jsfiddle.net/hBsFM/3/)
而这个小提琴是你使用的风格
[http://jsfiddle.net/zjF6c/](http://jsfiddle.net/zjF6c/)

# objective-c - 用动画隐藏和显示滚动视图

> ID：11934541
> 
> 赞同：1
> 
> 时间：2012-08-13T12:46:41.363
> 
> 标签：objective-c, ios, animation, uikit, scrollview

在我的应用程序中，我有一个滚动视图，当我按下一个按钮时，它会在我再次按下时隐藏起来。

我使用`scrollview.hidden = YES`（或否）来做到这一点。

但我想用动画来做。例如，它可能会通过移动从屏幕底部消失，并以相同的方式显示。我怎样才能做到这一点？

编辑：

```
[UIView beginAnimations:@"myAnimation" context:nil];
CGRect Frame = bottomScroller.frame;
if(Frame.origin.y == 380){
    Frame.origin.y = 460;
}else{
    Frame.origin.y = 380;
}
bottomScroller.frame = Frame;
[UIView commitAnimations]; 
```

这解决了我的问题...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T12:50:41.810

你可以检查 UIView[动画](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/clm/UIView/beginAnimations%3acontext%3a)。这很容易。例如，要使翻译动画化，您可以使用以下内容：

```
[UIView beginAnimations:@"myAnimation" context:nil];
CGRect Frame = yourView.frame;
Frame.origin.y = 0;
yourView.frame = Frame;
[UIView commitAnimations]; 
```

然后将其移回：

```
[UIView beginAnimations:@"myAnimation" context:nil];
CGRect Frame = yourView.frame;
Frame.origin.y = 100;
yourView.frame = Frame;
[UIView commitAnimations]; 
```

帧、alpha 和其他一些参数的变化将自动生成动画。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T12:51:04.780

您可以像这样使用动画：-

```
[UIView animateWithDuration:2.0 animations:^{
     [scrollview setframe:CGRectMake(xpos, ypos, width, height)];
}]; 
```

如果你想在屏幕上滑动滚动视图，设置它的 y 位置 - 视图的底部是你想隐藏它，如果你想显示它是正常的 y 位置。

2.0 是动画长度，可以随意更改！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T12:54:12.697

您可以通过使用简单的视图动画来做到这一点。以下是您可以如何执行此操作的示例：

```
// myScrollView is your scroll view

-(void)toggleShow{
    CGFloat targetAlpha = myScrollView.alpha == 1 ? 0 : 1;
    CGFloat yPosition = targetAlpha == 1 ? 0 : self.view.frame.size.height;

    [UIView animateWithDuration:1.0 animations:^{
        myScrollView.frame = CGRectMake(myScrollView.frame.origin.x, yPosition, myScrollView.frame.size.width, myScrollView.frame.size.height);
        myScrollView.alpha = targetAlpha;
    }];
} 
```

`targetAlpha`将始终与当前状态相反（1 或 0），如果为 0，则 y 位置将设置为父视图的底部。使用带有块的新学校`UIView`动画 API，我们可以在 1 秒内对滚动视图执行这些更改（在我的示例中）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T12:57:19.557

ScrollView**从屏幕下方显示**动画。我认为这个向上动画是你想要的。

```
// ScrollView appearing animation
- (void)ScrollViewUpAnimation
{
    // put the scroll view out of screen
    CGRect frame = ScrollView.frame;
    [self.view addSubview:ScrollView];
    ScrollView.frame = CGRectMake(0, 460, frame.size.width, frame.size.height);

    // setting for animation
    CGPoint fromPt = ScrollView.layer.position;
    CGPoint toPt = CGPointMake(fromPt.x, fromPt.y - frame.size.height - 44);
    CABasicAnimation* anime =
    [CABasicAnimation animationWithKeyPath:@"position"];
    anime.duration = 0.2;
    anime.fromValue = [NSValue valueWithCGPoint:fromPt];
    anime.toValue = [NSValue valueWithCGPoint:toPt];

    // change the position of Scroll View when animation start
    [ScrollView.layer addAnimation:anime forKey:@"animatePosition"];
    ScrollView.layer.position = toPt;
} 
```

# c# - DotNetNuke web.config 超出最大大小

> ID：11934543
> 
> 赞同：1
> 
> 时间：2012-08-13T12:46:55.450
> 
> 标签：c#, asp.net, .net, dotnetnuke, dotnetnuke-settings

我有一个使用 DotNetNuke 的网站，在正常运行几天后，它开始针对任何请求（包括图像或任何其他文件类型）返回“内部服务器错误”。经过一番调查，我注意到 web.config 文件的大小超过了允许的最大大小，这是由于 DotNetNuke 添加了几条升级注释。用原始的“干净”版本替换 web.config 暂时解决了问题，但 DNN 仍在编写这些注释，直到达到大小限制。

有谁知道改变/禁用这种行为的方法，所以我不必几乎每天都清理我的 web.config？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T22:26:17.327

我认为您需要研究为什么 DNN 不断写入 web.config，您的安装有问题，DNN 应该只在您执行升级时写入。您上次升级时是否有任何错误？

也许在telerik安装附近？检查您的安装文件夹（和子文件夹）是否有任何 ZIP 文件，升级完成后，这些文件夹中不应有任何 ZIP 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:57:39.930

**如果您正在寻找增加 Web.config 大小限制，您可以更新注册表项值，如下所述：**

```
HKLM\SOFTWARE\Microsoft\InetStp\Configuration\MaxWebConfigFileSizeInKB (REG_DWORD) 
```

注意：如果您将 IIS 7.0 和 IIS 7.5 配置为在 Windows Server 2008 x64 或 Windows Server 2008 R2 x 64 上以 32 位模式运行，则注册表项将改为：

```
HKLM\SOFTWARE\Wow6432Node\Microsoft\InetStp\Configuration\MaxWebConfigFileSizeInKB (REG_DWORD) 
```

Nativerd.dll 文件使用此注册表项的值来确定 Web.config 文件的最大允许大小（以 KB 为单位）。配置系统在 Windows Server 2008 中假定默认值为 250 KB，在 Windows Vista 发行版中假定为 100 KB。如果 Web.config 文件在 Windows Server 2008 中大于 250 KB 或在 Windows Vista 发行版中大于 100 KB，您会注意到配置系统中的以下错误消息：无法读取配置文件，因为它超出了最大文件大小 如果您更改此键的值，您必须重新启动该过程。

[有关更多详细信息，请参阅此](http://support.microsoft.com/kb/954864)

# z3 - 整数变量的最小值和最大值

> ID：11934545
> 
> 赞同：8
> 
> 时间：2012-08-13T12:46:57.147
> 
> 标签：z3

让我们假设一个非常简单的约束：`solve(x > 0 && x < 5)`.

`x`Z3（或任何其他 SMT 求解器，或任何其他自动技术）能否计算满足给定约束的（整数）变量的最小值和最大值？

在我们的例子中，最小值为 1，最大值为 4。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-13T14:49:32.890

Z3 不支持优化（最大化/最小化）目标函数或变量。我们计划增加这种能力，但今年不会发生。在当前版本中，我们可以通过解决在每次迭代中添加额外约束的几个问题来“优化”目标函数。我们知道，当问题变得无法满足时，我们找到了最优值。这是一个说明这个想法的小 Python 脚本。该脚本最大化变量的值`X`。为了最小化，我们只需要替换`s.add(X > last_model[X])`为`s.add(X < last_model[X])`. 这个脚本非常幼稚，它执行“线性搜索”。它可以通过多种方式进行改进，但它展示了基本思想。

您也可以在线尝试脚本：[http ://rise4fun.com/Z3Py/KI1](http://rise4fun.com/Z3Py/KI1)

请参阅以下相关问题：[确定任意命题公式中变量的上限/下限](https://stackoverflow.com/questions/8995082/determine-upper-lower-bound-for-variables-in-an-arbitrary-propositional-formula)

```
from z3 import *

# Given formula F, find the model the maximizes the value of X 
# using at-most M iterations.
def max(F, X, M):
    s = Solver()
    s.add(F)
    last_model  = None
    i = 0
    while True:
        r = s.check()
        if r == unsat:
            if last_model != None:
                return last_model
            else:
                return unsat
        if r == unknown:
            raise Z3Exception("failed")
        last_model = s.model()
        s.add(X > last_model[X])
        i = i + 1
        if (i > M):
            raise Z3Exception("maximum not found, maximum number of iterations was reached")

x, y = Ints('x y')
F = [x > 0, x < 10, x == 2*y]
print max(F, x, 10000) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-14T06:46:52.990

正如莱昂纳多指出的那样，这在之前已详细讨论过：[确定任意命题公式中变量的上限/下限](https://stackoverflow.com/questions/8995082/determine-upper-lower-bound-for-variables-in-an-arbitrary-propositional-formula)。另请参阅：[如何优化 Z3 中的一段代码？（PI_NON_NESTED_ARITH_WEIGHT 相关）](https://stackoverflow.com/questions/8513809/how-to-optimize-a-piece-of-code-in-z3-pi-non-nested-arith-weight-related)。

总而言之，可以使用量化公式，也可以迭代。不幸的是，这些技术*并不*等同：

*   量化方法不需要迭代，并且可以在一次调用求解器中找到全局最小值/最大值；至少在理论上。但是，它确实会产生更难的公式。因此，后端求解器可能会超时，或者只是返回“未知”。

*   迭代方法为后端求解器创建了简单的公式来处理，但如果没有最优值，它可以永远循环；最简单的例子是试图找到`Int`最大值。量化版本可以很好地解决这个问题，快速告诉你没有这样的价值，而迭代版本会无限期地继续下去。如果您不提前知道您的约束确实有最佳解决方案，这可能是一个问题。（不用说，“足够”的迭代次数通常很难猜测，并且可能取决于随机因素，例如求解器使用的种子。）

还要记住，如果手头有针对问题域的自定义优化算法，通用 SMT 求解器不太可能胜过它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-04-12T15:01:02.570

z3 现在支持优化。

```
from z3 import *

o = Optimize()
x = Int( 'x' )
o.add(And(x > 0, x < 5))
o.maximize(x)
print(o.check())  # prints sat
print(o.model())  # prints [x = 4] 
```

这个特殊的问题是一个[整数程序](https://en.wikipedia.org/wiki/Integer_programming)。

# windows - 获取磁盘/集群编号上的文件偏移量

> ID：11934550
> 
> 赞同：5
> 
> 时间：2012-08-13T12:47:06.200
> 
> 标签：windows, winapi, file-io, ntfs

我需要获取有关文件在 NTFS 磁盘上物理位置的任何信息。绝对偏移量，集群 ID..任何东西。我需要扫描磁盘两次，一次是为了获取分配的文件，另一次我需要直接在 RAW 模式下打开分区并尝试查找其余数据（从已删除的文件中）。我需要一种方法来理解我找到的数据与我之前作为文件处理过的数据相同。当我以原始模式扫描磁盘时，我发现的数据的偏移量可以以某种方式转换为文件的偏移量（具有有关磁盘几何形状的信息）。有没有办法做到这一点？其他解决方案也被接受。现在我正在使用 FSCTL_GET_NTFS_FILE_RECORD，但目前无法使其工作，我不确定它是否会有所帮助。

**更新**

我找到了以下函数 [http://msdn.microsoft.com/en-us/library/windows/desktop/aa364952(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364952(v=vs.85).aspx) 它返回包含 nFileIndexHigh 和 nFileIndexLow 变量的结构。文档说

`The identifier that is stored in the nFileIndexHigh and nFileIndexLow members is called the file ID. Support for file IDs is file system-specific. File IDs are not guaranteed to be unique over time, because file systems are free to reuse them. In some cases, the file ID for a file can change over time.`

我真的不明白这是什么。我无法将它连接到文件的物理位置。以后可以从 MFT 中提取此文件 ID 吗？

**更新**

发现这个： `This identifier and the volume serial number uniquely identify a file. This number can change when the system is restarted or when the file is opened.`

这不能满足我的要求，因为我要打开文件，而 ID 可能会更改的事实并不让我高兴。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T16:10:10.610

使用[碎片整理 IOCTL](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363911%28v=vs.85%29.aspx)。例如，[`FSCTL_GET_RETRIEVAL_POINTERS`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364572%28v=vs.85%29.aspx)将告诉您包含文件数据的范围。

# java - java EE 应用程序可以使用超过 MAX 堆内存吗

> ID：11934555
> 
> 赞同：0
> 
> 时间：2012-08-13T12:47:21.760
> 
> 标签：java, heap-memory

我在我的 servlet 中检查了以下代码：

```
int mb = 1024 * 1024;
Runtime runtime = Runtime.getRuntime();
out.write("Used Memory:" + (runtime.totalMemory() - runtime.freeMemory()) / mb);
out.write("Free Memory:" + runtime.freeMemory() / mb);
out.write("Total Memory:" + runtime.totalMemory() / mb);
out.write("Max Memory:" + runtime.maxMemory() / mb); 
```

输出是：

```
Used Memory:10
Free Memory:46
Total Memory:57
Max Memory:57 
```

我希望我的应用程序不使用超过 64 MB 的堆？我想知道 - 我的应用程序有什么办法可以使用超过 64 MB 的堆...（最大内存：57）？..我的应用程序会`OutOfMemoryException`在 57MB 之后抛出吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:04:35.937

默认最大堆大小为 64Mo，获得更多的唯一方法是使用此参数设置最大大小：

```
-Xmx256m 
```

虽然此参数设置起始值：

```
-Xms128m 
```

不要忘记末尾的“m”表示兆字节，也不要提供比 max 更多的起始内存。此外，如果您正在寻找它，则没有 setMaxHeapSize() 函数。

如果你在 tomcat 中运行你的 servlet，你应该试试这个：

```
export CATALINA_OPTS=-Xms16m -Xmx256m; 
```

在启动.bat

如果您的 servlet 需要的超出 JVM 允许的范围，则在达到限制时会出现奇怪的错误，并且大多数情况下会出现 OutOfMemoryException，但垃圾收集器会尝试避免这种情况，因此它会在抛出它之前稍微爬一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:04:24.503

当您运行您的应用程序时，您还必须指定最大堆大小。

例如，如果您的类名是 HelloWorld，并且如果您想将堆大小设置为 512mb，那么您必须启动以下命令：

```
java -Xmx512m HelloWorld 
```

# java - ServletServerCache 和 ClassNotFoundException 之谜

> ID：11934556
> 
> 赞同：1
> 
> 时间：2012-08-13T12:47:31.437
> 
> 标签：java, web-services, maven-2, resteasy, jboss6.x

我尝试在 JBoss 服务器上添加缓存系统，如 Resteasy 文档： [Resteasy Caching Features](http://docs.jboss.org/resteasy/docs/2.3.1.GA/userguide/html/Cache_NoCache_CacheControl.html)，第 29.3 部分中所述。（本地服务器端响应缓存）：

> 接下来你要做的是添加一个ServletContextListener，org.jboss.resteasy.plugins.cache.server.ServletServerCache。这必须在 web.xml 文件中的 ResteasyBootstrap 侦听器之后指定。

所以我做到了，我添加了一个 ServletServerCache 侦听器，正如在 ResteasyBootstrap 侦听器之后的*web.xml*中所说：

```
<listener>
    <listener-class>
        org.jboss.resteasy.plugins.cache.server.ServletServerCache
    </listener-class>
</listener> 
```

不幸的是，这会在部署阶段产生 ClassNotFoundException ：

> 14:01:44,817 错误 [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/DoQuBookWeb]] Erreur lors de la configuration de la classe d'écoute de l'application（应用程序侦听器) org.jboss.resteasy.plugins.cache.server.ServletServerCache: java.lang.ClassNotFoundException: org.jboss.resteasy.plugins.cache.server.ServletServerCache

（对不起法国的顺便说一句）

所以我的问题是：在这种情况下，我是唯一一个吗（这似乎不是谷歌的常见错误）？什么是/是我的错误/s？什么是正确的方法？

有关我使用 maven 的信息，并且我包含了 resteasy-cache-core 2.3.1.GA 依赖项，我在这一点上有点迷失......

预先感谢您的帮助。

* * *

* * *

编辑 ：

我查看了部署在网络服务器上的档案。我确实找到了 Jar resteasy-cache-core（包含 ServletServerCache）

这里简要介绍一下项目架构：

```
- Main project
    - Ear project (generate the deployed EAR)
         - pom.xml
    - Ejb project (generate an embeded JAR)
         - all ejbs 
         - pom.xml
    - Web project (generate an embeded WAR)
         - some js stuff
         - web.xml 
         - pom.xml 
```

在“mvn deploy”之后，在输出中 Maven2 给出了一个自包含的 EAR，其中填充了：

```
- lib / *.jar
- META-INF/
    - application.xml
    - etc
- Ejb-1.0.0.jar (all ejbs)
- Web.war
    - js stuff/
    - META-INF/
        - etc
    - WEB-INF/
        - web.xml CALLING ServletServerCache
        - jboss-web.xml
        - jboss-app.xml
        - lib / *.jar WITH resteasy-cache-core.X.X.X.jar
        - classes/ 
```

所以，恕我直言，Maven2 正确地捆绑了它。但是什么？这仍然很神秘。

任何想法 ？我不清楚为什么仍未找到该课程。

（抱歉发了这么长的帖子）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:01:52.347

我使用 resteasy 并尝试了它包含的 jboss-cache。我刚刚添加

```
<dependency>
    <groupId>org.jboss.resteasy</groupId>
    <artifactId>resteasy-cache-core</artifactId>
    <version>2.3.5.Final</version> <!--or the version you use-->
</dependency> 
```

到我的 pom.xml，并添加

```
<listener>
    <javaee:listener-class>
        org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap
    </javaee:listener-class>
</listener>

<servlet>
    <servlet-name>resteasy-servlet</servlet-name>
    <servlet-class>
        org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher
    </servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>resteasy-servlet</servlet-name>
    <url-pattern>/MyRestContext</url-pattern>
</servlet-mapping>

<context-param>
    <param-name>resteasy.server.cache.maxsize</param-name>
    <param-value>10000</param-value>
</context-param>

<context-param>
    <param-name>resteasy.server.cache.eviction.wakeup.interval</param-name>
    <param-value>5000</param-value>
</context-param>

<listener>
    <listener-class>
        org.jboss.resteasy.plugins.cache.server.ServletServerCache
    </listener-class>
</listener> 
```

到我的 web.xml 文件。

当然，不要忘记添加其他 resteasy 依赖项。

# c - opengl 土壤质地

> ID：11934557
> 
> 赞同：1
> 
> 时间：2012-08-13T12:47:35.350
> 
> 标签：c, opengl, textures, fopen, soil

这是我从 VS2010 收到的错误消息：

> AzimuthalEqui.e​​xe 中 0x77358dc9 处的未处理异常：0xC0000005：访问冲突写入位置 0x00000014。

产生此错误的代码行是：

```
texture[1] = SOIL_load_OGL_texture
    (
        texture_filename,
        SOIL_LOAD_AUTO,
        SOIL_CREATE_NEW_ID, // create ID automatically
        SOIL_flags
    ); 
```

在进入这个功能之前：

> texture_filename = "数据/texture.jpg"
> 
> SOIL_LOAD_AUTO (= 0)
> 
> SOIL_CREATE_NEW_ID (=0)
> 
> SOIL_flags = 16 (=SOIL_FLAG_INVERT_Y)

问题是当我包含一个我为解析文本文件中的某些信息而编写的文件时，会生成错误，否则会加载并显示纹理。这个问题很可能是由一个函数引起的，因为当这个特定函数被删除时，代码会加载并显示纹理。这是添加到我的项目时导致错误发生的功能：

```
[CODE]
void get_user_points(double *lats, double *longs){

    char buffer[BUFFSIZE_PARSE];
    char *p_buff = buffer;
    FILE *fp;
    const char *filename = "Points.txt";
    double temp;
    double *tmp_p = &temp;

    fp = fopen(filename,"r+");
    if (fp == NULL)
    {
        sprintf(buffer, "Can't Find File: %s", filename);
        MessageBoxA(NULL, buffer, "ERROR", MB_OK|MB_ICONEXCLAMATION);
        exit(0);
    }

    fgets(buffer, BUFFSIZE_PARSE, fp);

    while (*(p_buff+1) != '\0'){

        p_buff = get_next_letter(p_buff);

        switch (tolower(*p_buff)){
            case 'n':
                putchar(*p_buff);
                p_buff++;
                p_buff=get_next_double(lats, p_buff);
                printf(" = %f\n", *lats);
                break;
            case 's':
                ...
                ...
        }
    }
    putchar('\n');
    fclose(fp);
} 
```

它与打开文件进行阅读有关......如果我注释掉这些行，纹理加载正确：

```
//fpr = fopen(filename2,"rb"); 
...
...
...
//fclose(fpr); 
```

这是我的简化代码（我认为这不是问题，但以防万一）。[我的完整代码可能有一些残余]：

```
int main(int argc, char** argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);

    {
        printf("Initialising...\n");
        glutInitWindowSize(700, 700);
        glutInitWindowPosition(0, 0);
        glutCreateWindow ("SOIL Texture Test");
    }

    InitGL();
    glutDisplayFunc(DrawGLScene);
    glutReshapeFunc(ReSizeGLScene);

    glutMainLoop();

    return 0;
}

int InitGL(GLvoid) // Setup OpenGL
{
    //Load textures
    if (!LoadGLTextures())                              // Jump To Texture Loading Routine ( NEW )
    {
        MessageBox(NULL,TEXT("Cannot Load Image for Texture Map"),TEXT("Error!"),MB_OK | MB_ICONINFORMATION);
        //return false;                                 // If Texture Didn't Load Return FALSE ( NEW )
    }
    else
        glEnable(GL_TEXTURE_2D);                        // Enable texture mapping

    glShadeModel(GL_SMOOTH);                            // Enable Smooth Shading
    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);               // Set the background colour (to black)

    glClearDepth(1.0f);                                 // Depth Buffer Setup
    glEnable(GL_DEPTH_TEST);                            // Enables Depth Testing
    glDepthFunc(GL_LEQUAL);                             // Select testing type

    //get_user_points(&user_lat[0], &user_long[0]);

    return true;                                        // Initialization went OK
}

void DrawGLScene(GLvoid) // OpenGL drawing function
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); // Clear the Screen and the Depth Buffer

    glLoadIdentity();
    glTranslatef(0.0f,0.0f,z);

    glBindTexture (GL_TEXTURE_2D, texture[filter]);
    glBegin (GL_QUADS);
        glNormal3f(0, 0, 1);

        glTexCoord2f (0,0);
        glVertex3f (-3,-3 ,0);
        glTexCoord2f (1,0 );
        glVertex3f (3,-3 , 0);
        glTexCoord2f (1, 1);
        glVertex3f (3,3 , 0);
        glTexCoord2f (0,1 );
        glVertex3f (-3,3 ,0 );
    glEnd();

    glFlush();
}

void ReSizeGLScene(int w, int h) // Code to resize (and initialise) the OpenGL scene (run once when in fullscreen mode)
{
    // Set up perspective view matrix
    glViewport(0, 0, w, h);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(45.0f, (GLfloat)w/(GLfloat)h, 0.1f, 100.0f);
    //glOrtho(-50.0, 50.0, -50.0, 50.0, -50.0, 50.0);

    // Set up modelview matrix
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
}

int LoadGLTextures(void) // Load Bitmaps And Convert To Textures
{
    unsigned int SOIL_flags;
    GLint mag_param;
    GLint min_param;

    printf("Loading Textures... ");

    SOIL_flags = SOIL_FLAG_INVERT_Y;
    mag_param = GL_NEAREST;
    min_param = GL_NEAREST;

    texture[1] = SOIL_load_OGL_texture
    (
        texture_filename,
        SOIL_LOAD_AUTO,
        SOIL_CREATE_NEW_ID, // create ID automatically
        SOIL_flags
    );

    if(texture[1] == 0)
        return false;

    glBindTexture(GL_TEXTURE_2D, texture[1]);
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,mag_param);
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,min_param);

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);

    printf("Textures Loaded\n");
    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:36:40.437

在我的项目中包含 .c 文件而不是 .lib 文件可以解决问题。

# java - 通过 JNI 和 DllMain 加载多个依赖库

> ID：11934559
> 
> 赞同：0
> 
> 时间：2012-08-13T12:47:40.097
> 
> 标签：java, windows, dll, java-native-interface

我有一个依赖于第三方库的 JNI 库。

我可以通过首先在`System.Load`第三方库上执行然后`System.Load`在我的库上执行来加载和使用该库。这行得通。

我最近在我的库中引入了一个 DllMain （不做任何事情），现在加载库时我得到`java.lang.UnsatisfiedLinkError: fullpath\name.dll: Can't find dependent libraries`

如果我将本机调试器附加到进程并在 DllMain 函数中设置断点，则会输入断点并正确加载库（没有 UnsatisfiedLinkError ）

有没有人对可能发生的事情有任何想法或指示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:34:45.733

我想你没有将你的dll正在使用的dll链接到你的java运行时。它必须在您的工作目录中或使用 -Djava.library.path=fullpath。

# actionscript-3 - AS3单击时删除对象

> ID：11934569
> 
> 赞同：1
> 
> 时间：2012-08-13T12:48:07.660
> 
> 标签：actionscript-3

我想在单击对象时将其设置为 null 并且我正在尝试实现此代码：

```
 public function onClick(evt:MouseEvent):void{
        var thisPatient = evt.target;
        thisPatient = null;
    } 
```

但是，该元素仍在舞台上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T12:58:36.067

```
public function onClick(evt:MouseEvent):void{
    var thisPatient = evt.target;
    (thisPatient as DisplayObject).parent.removeChild(thisPatient);
    //or if thisPatient is this
    parent.removeChild(this);
} 
```

但是让孩子自行移除是不好的做法。更正确的解决方案是厌恶事件，因为父母必须决定移除或不移除孩子。

```
public function onClick(evt:MouseEvent):void{
    dispatchEvent(new Event("removeMe", true));
}

//parent's code...
child.addEventListener("removeMe", removeHandler); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T12:51:06.627

将其设置为 null 是不够的。`removeElement()`您还必须使用或`removeChild()`根据您使用的容器类型将其从其父容器中删除。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T12:51:40.870

你只需要做`removeChild(thisPatient)`，如果你把对象放在另一个对象中，你必须做`parent.removeChild(thisPatient)`！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T14:18:22.500

根据我的经验，注册一个事件对象，您必须删除所有事件。所有事件将被完全手动删除。对象上的 removeChild 不会释放所有事件。removeChild 但是，会发生内存泄漏。这是因为您没有删除该事件。在移除对象之前，您必须移除事件。

# c# - 根据 x64/x86 更改 C# DllImport 目标代码

> ID：11934570
> 
> 赞同：19
> 
> 时间：2012-08-13T12:48:11.087
> 
> 标签：c#, dllimport, windows-7-x64

我有一个要使用 DLLImport 导入的外部 c++ dll。如果我的应用程序在 x64 中编译，我需要导入这个 dll 的 x64 版本，如果它是 x86 版本，我需要 x86 dll。

实现这一目标的最佳方法是什么？

理想情况下，我想要一些预处理器指令，但我知道这在 c# 中不起作用？

更多信息：DLL 正在由设置为 AnyCPU 的项目导入。父项目是决定应用程序编译为 x64 还是 x86 的项目。我们为不同的客户编译了两个版本——我想在两个版本中共享子项目。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-13T14:13:45.980

这主要是一个部署问题，只需让您的安装程序根据目标计算机上的 Windows 版本复制正确的 DLL。

但没有人喜欢这样做。动态地调用正确的 DLL 函数非常痛苦，您必须为每个导出的函数编写委托类型并使用 LoadLibrary + GetProcAddress + Marshal.GetDelegateForFunctionPointer 来创建委托对象。

但没有人喜欢这样做。较不痛苦的方法是声明函数两次，给它不同的名称，并使用 [DllImport] 属性中的 EntryPoint 属性来指定真实名称。然后在您要调用的运行时进行测试。

但没有人喜欢这样做。最有效的技巧是引导 Windows 为您加载正确的 DLL。您要做的第一件事是将 DLL 复制到 Windows 不会查找它的目录中。最好的方法是在构建目录中创建一个“x86”和一个“x64”子目录，并将适当的 DLL 复制到每个子目录中。通过编写一个创建目录并复制 DLL 的构建后事件来做到这一点。

然后通过调用 SetDllDirectory() 告诉 Windows。您指定的路径将被添加到 Windows 搜索 DLL 的目录中。像这样：

```
using System;
using System.Runtime.InteropServices;
using System.Reflection;
using System.IO;

class Program {
    static void Main(string[] args) {
        var path = Path.GetDirectoryName(Assembly.GetEntryAssembly().Location);
        path = Path.Combine(path, IntPtr.Size == 8 ? "x64" : "x86");
        bool ok = SetDllDirectory(path);
        if (!ok) throw new System.ComponentModel.Win32Exception();
        //etc..
    }
    [DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    private static extern bool SetDllDirectory(string path);
} 
```

请考虑让代码在 64 位模式下运行是否真的对您有用。很少需要从中获得巨大的虚拟内存地址空间，这是唯一真正的好处。您仍然需要支持需要在 2 GB 情况下正常运行的 32 位版本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T12:52:15.273

添加具有不同名称的 x86 和 x86_64 DLL 导入，然后您可以根据运行时的体系结构有条件地调用它们，方法是检查 Environment.Is64BitProcess（或 IntPtr.size，如果您使用的是 < .Net 4）的值。无论项目是构建为 x86、x86_64 还是 AnyCPU，这都将起作用

或者，设置 2 种不同的构建配置 - 一种仅适用于 x86，另一种仅适用于 x86_64，为每个配置提供条件编译符号并在自定义符号上使用 #ifdef。

# c# - 如何在 Linq 中求和格式字符串？

> ID：11934575
> 
> 赞同：-3
> 
> 时间：2012-08-13T12:48:39.440
> 
> 标签：c#, linq

我有数组字符串格式（hh.mm）如何求和？我使用扩展：

```
static class SumExtensions
{
    public static String Sum<T>(this IEnumerable<T> source, Func<T, String> selector)
    {
        return source.Select(selector).Aggregate((x, y) => x + y);
    }
} 
```

但我不明白在哪里解析字符串和求和

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T13:03:39.157

首先，您需要将 转换`string`为`TimeSpan`表示形式。这是必要的，因为该`TimeSpan`表示允许对时间间隔执行算术运算。

```
string[] timeSpanStrings = new[]
    {
        "01.00", "02.00"
    };

var timeSpans = timeSpanStrings.Select(t => TimeSpan.ParseExact(t, @"hh\.mm", CultureInfo.InvariantCulture));
var sumTimeSpan = timeSpans.Aggregate((t1, t2) => t1.Add(t2)); 
```

变量`sumTimeSpan`包含结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:57:10.230

您应该首先更改数据结构，从 String 到[TimeSpan](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)

然后你可以简单地使用函数[TimeSpan#add(Timespan)](http://msdn.microsoft.com/en-us/library/system.timespan.add.aspx)来对数组中的值求和。

# javascript - 无法限制用户输入超过 8 个字符

> ID：11934576
> 
> 赞同：0
> 
> 时间：2012-08-13T12:48:41.660
> 
> 标签：javascript, jquery, jquery-ui, jquery-mobile, cordova

嗨，以下是我的登录表单，因为我想限制用户在用户名字段中输入 8 个字符，但它不起作用以下是我的代码：

```
<div data-role="content">

        <form id="loginForm">
            <div data-role="fieldcontain" class="ui-field-contain ui-body ui-br">
                <label for="username">Username:</label> <input type="text"
                    name="username" id="username" value=""   maxlength="8" /> <label for="password">Password:</label>
                <input type="password" name="password" id="password" value="" /> <label
                    for="dob">Date of birth:</label> <input type="password"
                    type="password" name="dob" id="dob" value="" />
            </div>
            <div >
                <fieldset class="ui-grid-a" >
                    <div class="ui-block-a" >
                        <input type="submit" data-role="button" value="Login"
                            id="submitButton">
                    </div>
                    <div class="ui-block-b">
                        <input type="reset" data-role="button" value="Cancel"
                            id="cancelButton">
                    </div>

                </fieldset>
            </div>
        </form>

    </div>

    <script type="text/javascript">

    </script>

    <script type="text/javascript">
        $("#username").live('keydown', function (event)
        {

            if ((event.keyCode.length>8))
            {
                event.preventDefault();
            }

        }); 

    </script> 
```

但用户仍然可以在 UserName 字段中输入任意数量的字符。这段代码有什么问题？任何建议将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T12:49:50.543

在输入字段中添加一个`maxlength`.. 而不是使用脚本来限制。

```
<input type="text" name="username" id="username" value=""  maxlength="8" /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T12:49:53.853

你需要什么 javascript ？只需将`maxlength`属性添加到您的输入字段。

```
<input type="text" name="usrname" maxlength="8" /> 
```

就那么简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-02T10:53:27.037

```
<script type="text/javascript">
function countChars(countfrom,displayto) {
    var val = document.getElementById(countfrom).value;

    val = val.replace(/[^a-zA-Z0-9]/igm, "");

    var len = val.length;

    document.getElementById(displayto).innerHTML = len;

    onkeydown = function (e) {
        if (e.keyCode != 8 && e.keyCode != 46 && e.keyCode != 9 && e.keyCode != 13 && e.keyCode != 16 && e.keyCode != 17 &&
            e.keyCode != 18 && e.keyCode != 19 && e.keyCode != 20 && e.keyCode != 27 && e.keyCode != 33 && e.keyCode != 34 &&
            e.keyCode != 35 && e.keyCode != 36 && e.keyCode != 37 && e.keyCode != 38 && e.keyCode != 39 && e.keyCode != 40 &&
            e.keyCode != 45 && e.keyCode != 91 && e.keyCode != 92 && e.keyCode != 93 && e.keyCode != 112 && e.keyCode != 113 &&
            e.keyCode != 114 && e.keyCode != 115 && e.keyCode != 116 && e.keyCode != 117 && e.keyCode != 118 && e.keyCode != 119 &&
            e.keyCode != 120 && e.keyCode != 121 && e.keyCode != 122 && e.keyCode != 123 && e.keyCode != 144 && e.keyCode != 145
            && len >= 8)<!-- change the value of len to the number of characters required-->
            e.preventDefault();

    }

}
</script>
```

```
<h1>Day-3 Task-1</h1>

<br /><h2>Counting Number of Characters with Elimination of Special Charecters</h2>

<textarea id="data" cols="40" rows="5"
onkeyup="countChars('data','charcount');" onkeydown="countChars('data','charcount');" onmouseout="countChars('data','charcount');"></textarea><br>
<span id="charcount">0</span> Characters entered.
```

# html - 使用 Bootstrap 的移动视图

> ID：11934577
> 
> 赞同：0
> 
> 时间：2012-08-13T12:48:47.847
> 
> 标签：html, mobile, twitter-bootstrap

我制作了一个简单的页面作为登录表单来测试移动设备的访问。

现场测试在：

> [http://jsbin.com/inumud/1/](http://jsbin.com/inumud/1/)

在jsbin之外：

> [http://balexandre.com/gk2](http://balexandre.com/gk2)

如果您尝试从移动设备打开该 URL，**则无法**进入帐户和密码表单。

我正在使用 Twitter Bootstrap (v.2.0.4) 使用一个非常[**简单**](http://twitter.github.com/bootstrap/)*的***表单**，并且在任何桌面上都可以正常工作，但是为什么我不能从移动设备访问表单输入？ *（iPhone 不进入表单，Android 不启动键盘）*[](http://twitter.github.com/bootstrap/)

 ****为了让它在移动设备上工作而不重做移动框架中的漏洞站点，我还需要做些什么？

我一直在尝试和尝试，但到目前为止没有成功，现在已经好几天了，我可能错过了 - 看到一些简单的东西，我希望社区可以帮助我擦亮眼睛:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:00:53.177

找到了“臭虫”

它是顶部的**模态**`hide`并阻止访问后面的所有其他内容......添加 到模态类可以解决问题。****

# android - 高效地创建 LayoutInflater

> ID：11934578
> 
> 赞同：7
> 
> 时间：2012-08-13T12:48:58.493
> 
> 标签：android, android-context, android-inflate

我的问题是创建`LayoutInflater`实例的最佳方法是什么？有没有区别

```
LayoutInflater inflater = LayoutInflater.from(context); 
```

和

```
LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
```

哪个是更好的解决方案？也欢迎其他解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T13:04:04.400

如果您检查了 LayoutInflater.java 源文件，您会发现。

```
/**
 * Obtains the LayoutInflater from the given context.
 */
public static LayoutInflater from(Context context) {
    LayoutInflater LayoutInflater =
            (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    if (LayoutInflater == null) {
        throw new AssertionError("LayoutInflater not found.");
    }
    return LayoutInflater;
} 
```

# javascript - jqgrid：'addRowData' 不起作用

> ID：11934583
> 
> 赞同：0
> 
> 时间：2012-08-13T12:49:23.237
> 
> 标签：javascript, jqgrid

我需要使用自定义按钮来添加具有内联模式的新行。单击按钮后，确实出现了新行，但它不是处于编辑模式，然后我必须单击编辑按钮，导致没有任何“插入”SQL 语句发送到 db。（只有“更新”SQL 发送到D B）。有谁可以帮我离开这里吗？谢谢。我也不知道在调用 addRowData 时应该将什么值设置为“rowId”。

```
$buttonoptions = array("#pager",
    array("caption"=>"Add", 
          "onClickButton"=>"js: function()
          {
            var myData = [{'phone':'82345674', 'owner': 'abc'}];                
            jQuery('#grid').jqGrid('addRowData','undefined',myData);            
          }
          "));
$grid->callGridMethod("#grid", "navButtonAdd", $buttonoptions); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:49:19.813

如果您希望立即打开添加的行而不是`addRowData`，请使用`addRow`方法

# php - Codeigniter - 在将它们发送到视图之前处理从数据库中检索到的值

> ID：11934584
> 
> 赞同：0
> 
> 时间：2012-08-13T12:49:23.183
> 
> 标签：php, mysql, database, codeigniter-2

`date()`我想通过使用 php 函数正确格式化我的日期时间来显示从 DB 捕获的时间戳值。

但问题是 - 可以在将其传递给视图文件之前完成吗？
关于视图文件中的 php 函数，我想让我的视图文件尽可能干净。

通过使用从数据库中检索项目`/models/content_model.php`：

```
function getPages($per_page){
    $this->db->order_by('id', 'desc');
    $query = $this->db->get('content', $per_page, $this->uri->segment(3));
    return $query->result();
} 
```

然后，它由控制器处理`/controllers/content.php`：

```
...
// Get data
$componentData['results'] = $this->content_model->getPages(5);
... 
```

并显示结果`views/content/home.php`：

```
<?php
    <?php foreach($results as $item):?>
        echo $item->date_created;
     <?php endforeach;?>
?> 
```

将输出一个日期（在 DB 中输入时间戳），如下所示：`2011-08-14 18:34:04`

`date()`我不想在视图文件中使用函数，而是`views/content/home.php`想通过视图之外的函数来处理它`date()`，不确定是否应该在模型或控制器中完成。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:04:06.033

您可以在控制器类中执行此操作。首先创建一个私有函数名称 DateProcess 并发送查询结果并根据需要处理日期。然后您可以将过程数据发送到查看文件。

# java - 多模块应用程序maven

> ID：11934592
> 
> 赞同：1
> 
> 时间：2012-08-13T12:49:53.837
> 
> 标签：java, maven, maven-release-plugin, multi-module

我有多模块 maven 项目，其中主项目依赖于子模块。子模块的每个依赖项都由版本定义，如下所示`${pom.version}`：我使用 Maven 发布插件。如果我尝试准备发布，则会收到关于缺少子模块版本的错误。

例子：

main pom 在版本上`1.0`，我尝试发布它。Maven 将每个子模块构建为 version `1.1`，然后尝试构建父模块，然后崩溃。因为找不到`sub-module-1.1`。

我不知道如何告诉 maven 构建，并立即将它构建的每个子模块安装到 local-repo。我使用maven2。

我的pom：

```
<modelVersion>4.0.0</modelVersion>

<groupId>com.voncuver</groupId>
<artifactId>voncuver</artifactId>
<packaging>pom</packaging>
<version>1.1-SNAPSHOT</version>
<name>multimodule</name>

<modules>
    <module>mod1</module>
    <module>mod2</module>
</modules>

(...)

<dependencyManagement>
    <dependencies>
        <dependency>
            <artifactId>mod1</artifactId>
            <groupId>com.voncuver</groupId>
            <version>${pom.version}</version>
        </dependency>
        <dependency>
            <artifactId>mod2</artifactId>
            <groupId>com.voncuver</groupId>
            <version>${pom.version}</version>
        </dependency>
    </dependencies>
</dependencyManagement>
(...) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:09:59.977

您可能应该发布更多的项目结构，但通常一个多模块项目看起来像这样：

```
project
   mod1
   mod2
   mod3
   pom.xml 
```

主 pom.xml 将具有“pom”包装类型，并在其中有一个部分来构建其他所有内容：

```
<packaging>pom</packaging>
<modules>
  <module>mod1</module>
  <module>mod2</module>
  <module>mod3</module>
</modules> 
```

然后，确保事情正确构建的最可靠方法是执行：

> mvn 干净安装

如果没有“安装”，很有可能在 Maven 反应器中找不到东西，特别是取决于您使用的 Maven 版本（以及其他一些因素）。

# php - 使用 KCacheGrind 聚合 PHP XDebug 数据

> ID：11934595
> 
> 赞同：7
> 
> 时间：2012-08-13T12:50:14.970
> 
> 标签：php, profiling, aggregate, xdebug, kcachegrind

有什么方法可以聚合以前由 PHP XDebug 获取的配置文件数据？

我已经管理 PHP XDebug 将与一个请求相关的数据放入单个文件。当我在 kcachegrind 中打开该文件时，它会显示该文件中聚合的所有请求。但是，每个请求都有自己的堆栈跟踪（我理解，它可能会改变）。有什么方法可以查看从所有请求中汇总的配置文件数据？我不在乎它是否不是 100 % 准确，或者是否缺少某些呼叫，我只需要对所有日常操作进行简要概述。

免责声明：kcachegrind 不是必需的，我只是发现它是迄今为止最好的工具。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T10:21:51.507

将所有文件合并为一个：

```
cat cachegrind.out.* > cachegrind.combined 
```

打开 cachegrind.combined 并选择窗口右下角的“零件”选项卡。您将看到那里列出的配置文件的多个部分。全部选择它们（CTRL+a 或使用鼠标），您将看到所有这些配置文件的汇总数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T18:20:59.390

生成的报告是 TEXT 并且可以被解析，因此构建生成报告的解析器应该不会太复杂。我在 windows 上使用 WinCacheGrind 并发现它非常好，因为除了详细的树之外，它还显示了一般的组合时间/功能以及它有多少调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T20:04:32.950

我不确定，但请参阅下面的 URL 并阅读它。我认为这对你很有帮助。

**使用 Xdebug 和 Webgrind 分析 PHP**

[http://www.chrisabernethy.com/php-profiling-xdebug-webgrind/](http://www.chrisabernethy.com/php-profiling-xdebug-webgrind/)

查找和修复 PHP Web 应用程序中的性能瓶颈既费时又困难。幸运的是，像 Xdebug 和 Webgrind 这样的免费工具可以让您轻松找到并可视化 PHP 脚本中的瓶颈。

> Webgrind 是 PHP5 中的 Xdebug 分析 Web 前端。它实现了 kcachegrind 功能的子集，并在几秒钟内安装并适用于所有平台。–Webgrind

任何需要分析代码的人都可能熟悉 KcacheGrind（一种分析数据可视化工具）。KcacheGrind 提供了一种从程序执行中可视化配置文件数据的方法，使您可以快速轻松地查看程序在哪里花费时间。了解执行瓶颈的位置可以让您将优化工作集中在正确的位置。

很长一段时间以来，PHP 的 Xdebug 扩展能够（除其他外）以 KcacheGrind 可用的格式将执行配置文件信息转储到磁盘，如果您使用 KDE 运行 Linux，这非常棒。

webgrind 项目为 KcacheGrind 提供了一个基于 Web 的替代品，可以安装在任何操作系统上，允许您通过浏览器可视化 Xdebug 分析数据的一部分。

阅读更多文章上方

[http://www.chrisabernethy.com/php-profiling-xdebug-webgrind/](http://www.chrisabernethy.com/php-profiling-xdebug-webgrind/)

**另请参阅另一个示例并阅读：-**

**PHP 的 XDEBUG 扩展 | 文档**

[http://xdebug.org/docs/profiler](http://xdebug.org/docs/profiler)

Xdebug 的内置分析器允许您找到脚本中的瓶颈并使用外部工具（如 KCacheGrind 或 WinCacheGrind）将其可视化。介绍

Xdebug 的 Profiler 是一个强大的工具，它使您能够分析您的 PHP 代码并确定瓶颈，或者通常查看您的代码的哪些部分很慢并且可以使用速度提升。Xdebug 2 中的分析器以 cachegrind 兼容文件的形式输出分析信息。这允许您使用出色的 KCacheGrind 工具（Linux/Windows、KDE）来分析您的分析数据。如果你在 Linux 上，你可以用你最喜欢的包管理器安装 KCacheGrind；如果您在 Windows 上，您可以在 SourceForge 获得 KCacheGrind 的预编译二进制文件。

Windows 用户也可以使用 WinCacheGrind，其功能与 KCacheGrind 不同，因此本页记录使用 KCacheGrind 的部分不适用于此程序。还有一个名为 xdebugtoolkit 的替代配置文件信息呈现工具、一个名为 Webgrind 的基于 Web 的前端和一个名为 XCallGraph 的基于 Java 的工具。

阅读更多文章上方

[http://xdebug.org/docs/profiler](http://xdebug.org/docs/profiler)

# windows-7 - 批处理脚本：在字符串中查找模式

> ID：11934606
> 
> 赞同：2
> 
> 时间：2012-08-13T12:50:47.797
> 
> 标签：windows-7, command-line, batch-file, pattern-matching

我有一个 for 循环，可以让我访问文件夹中的文件名，我需要检查该文件名以查看它是否包含字符串。

例如，文件名：'C:\Temp\hello.cs' 要查找的模式：'C:\Temp\h'

这个的伪代码是

```
IF filename.Contains(pattern) then
    // DO SOMETHING
END IF 
```

我试过这个：

```
%%i|find %pattern% >nul
if not errorlevel 1 echo "Pattern matched" 
```

但它只是打开了文件，就好像我双击了文件一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:51:43.167

谢谢大家，但我发现这有效：

```
Set pattern=name

for .... do (
    Set filenameStr=%%i
    Set patternReplaced=!filenameStr:%pattern%=?!

    If Not !patternReplaced! == !filenameStr! echo "contains pattern"
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:43:36.433

[Rob van der Woude 的 Scripting Pages](http://www.robvanderwoude.com/battech_fileproperties.php)是解决此类 DOS/批处理文件问题的绝佳资源。从我所看到的情况来看，这样的事情可能对你有用：

```
ECHO OFF

FOR %%A IN (C:\Temp\h*) DO (
    ECHO ---
    ECHO Pattern matched
    ECHO Name in 8.3 notation : %%~snA
    ECHO Fully Qualified Path : %%~fA
) 
```

如果这不是您正在寻找的内容，请查看“操作方法”部分以查看其他一些解决方案[。](http://www.robvanderwoude.com/bht.php)

# javascript - JavaScript - setInterval / setTimeout & clearInterval，无法正确执行

> ID：11934608
> 
> 赞同：0
> 
> 时间：2012-08-13T12:50:52.107
> 
> 标签：javascript, settimeout, setinterval

如果我`"body onload="varname=setInterval etc, etc""`最终同时`setInterval`运行两个事件，如果我得到`"overload == true"`它并不会重置`ketchCount`并且它不会更新数组中的图片，它只会启动`setInterval`并从那里开始工作。我知道我很新，但我会很感激任何帮助！

```
ketchupArray=new Array();
ketchupArray[0] = new Image(192, 168);
ketchupArray[0].src = "./pictures/levels/nothing.jpg?";
ketchupArray[1] = new Image(192, 168);
ketchupArray[1].src = "./pictures/levels/lowest.jpg?";
ketchupArray[2] = new Image(192, 168);
ketchupArray[2].src = "./pictures/levels/low.jpg?";
ketchupArray[3] = new Image(192, 168);
ketchupArray[3].src = "./pictures/levels/medium.jpg?";
ketchupArray[4] = new Image(192, 168);
ketchupArray[4].src = "./pictures/levels/high.jpg?";
ketchupArray[5] = new Image(192, 168);
ketchupArray[5].src = "./pictures/levels/highest.jpg?";

overload = false;
ketchCount = 0;
var lessCount;
var overCount;
var lessCountVar;

function overFunction()
{
overload == false;
ketchCount == 0;
document.getElementById("ketchupLevel").src = ketchupArray[ketchCount].src;
lessCountVar=setInterval(function(){lessCount()},5000);
}

function lessCount()
{
if (ketchCount == 0)
  {
  return;
  }
ketchCount--;
document.getElementById("ketchupLevel").src = ketchupArray[ketchCount].src;
}

function moreKetchup()
{
if (overload == true) 
  {
  return;
  }
ketchCount++;
document.getElementById("ketchupLevel").src = ketchupArray[ketchCount].src;
if (ketchCount == 5)
  {
  overload == true;
  clearInterval(lessCountVar);
  overCount=setTimeout(function(){overFunction()},5000);
  }
}

function lessKetchup()
{
if (overload == true)
  {
  return;
  }
else if (ketchCount == 0)
  {
  return;
  }
ketchCount--;
document.getElementById("ketchupLevel").src = ketchupArray[ketchCount].src;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:56:15.123

您可以尝试两件事：

在`onload`使用中首次启动`setTimeout()`。`overFunction()`

在`overFunction()`您的代码中可能有错误。您正在比较重载和 ketchCount，而不是为它们分配值。正确的代码应该看起来更像

```
function overFunction()
{
  overload = false;
  ketchCount = 0;
  document.getElementById("ketchupLevel").src = ketchupArray[ketchCount].src;
  lessCountVar=setInterval(function(){lessCount()},5000);
} 
```

# excel - 将报表导出到 Excel 后 Excel 2010 中的总和时间列

> ID：11934620
> 
> 赞同：0
> 
> 时间：2012-08-13T12:51:45.203
> 
> 标签：excel, jasper-reports, ireport

我有将 JR 报告导出到*Excel 2010*表的应用程序，它的导出成功，但问题在于时间列。

现在我的要求是总结时间列以获得总时间花费，因此时间列显示如下：

```
Time

11.46.10

12.21.11

14.43.54

14.45.07

10.09.13 
```

现在，当我单击顶部的时间单元格 11.46.10 时，功能栏显示 1/1/1970 11.46.10 AM 所以这个自动附加的日期 1/1/1970 正在产生问题，所以现在我手动删除日期即 1/1/1970 来自单元格并尝试通过 SUM(C1:C20) 函数对列求和，它给了我正确的结果。

问题在于自动附加的日期 1/1/1970，现在如何附加是问题

我还附上了类类型为***java.sql.Time***的特定列的代码片段，我确信我们不会在 1970 年 1 月 1 日的任何地方使用或附加它。

知道如何解决这个问题吗？

# node.js - Node.js、Express 和 css、js、图像资产

> ID：11934621
> 
> 赞同：8
> 
> 时间：2012-08-13T12:51:53.870
> 
> 标签：node.js, express

我希望将发送到浏览器的所有 javascript、css 和图像连接起来、缩小并具有 md5 缓存破坏文件名。我已经能够使用 connect-assets 等软件包来实现这一点。

但是，我无法在处理之前将 md5 的图像文件名添加到 css 中。

我正在使用较少的 css 模板。

任何可以帮助我的包的指针都会很棒。

例如

image.png 转换为 image-455454545.png
css 引用 background-image: url(image.png) -> 应该更改为 image-455454545.png

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T17:10:58.153

据我所知，Less 不具备使用用户定义函数的能力。但是，手写笔可以。因此，如果您愿意跳到备用 CSS 预处理器上，那么会很有趣！（Stylus 与 Less 非常相似，切换到它应该不会花太多时间。Plus`connect-assets`已经支持 Stylus，所以它应该很容易插入到您的环境中。）

**服务器.js**

```
var fs = require('fs');
var stylus = require('stylus');

stylus(fs.readFileSync("styles.styl", 'utf8')) //load stylus file
  .define("versionedFile", versionedFile) //add our custom function to the stylus env
  .render(function(err, css){ //render!
    if (err) {
      throw err;
    }

    fs.writeFileSync("styles.css", css); //write the compiled css to a .css file
});

//our custom function
function versionedFile(filename) {
  ... lookup versioned file of filename ...
  return "versionedFilename.png"
} 
```

**样式.styl**

```
.image-block {
  background-image: url(versionedFile('unversionedFilename.png')); //this is how we use our custom function
} 
```

这将编译成：

**样式.css**

```
.image-block {
  background-image: url("versionedFilename.png"); //hooray!
} 
```

# oracle - ORA-30926: 无法在源表中获得稳定的行集

> ID：11934626
> 
> 赞同：0
> 
> 时间：2012-08-13T12:52:15.663
> 
> 标签：oracle, plsql, oracle11g, plsqldeveloper

我想在取消透视后插入数据。该语句需要是一个合并语句。但是，我收到 ora-30926 错误，我真的不知道如何解决它。

这里是数据表：

```
------------------------------------------------------------------------------------
|Employee_id | work_experience_1 | work_experience_2 | work_experience_3 | language |
-------------------------------------------------------------------------------------
| 123        |  C&S              |   Deloitte        |         TCS       |     FI   |
| 211        |   E&Y             |   Microsoft       |                   |     FI   |
| 213        |   C&S             |                   |                   |     FI   |
------------------------------------------------------------------------------------- 
```

因此，首先在输入数据之前，我需要对其进行反透视。

```
---------------------------------- 
|Employee_id | work_experience   |
----------------------------------
| 123        |   C&S             |
| 123        |   Deloitte        |
| 123        |     TCS           |
| 211        |   E&Y             |
| 211        |   Microsoft       |
| 213        |   C&S             |
---------------------------------- 
```

这是我所做的。插入部分工作正常，但更新部分失败。

```
MERGE INTO arc_hrcs.user_multi_work_exp work_exp
USING (SELECT user_id, work_experience_lang, work_exp_fi FROM
         (SELECT ext.user_id, tmp_work.employee_id, tmp_work.work_experience_1, tmp_work.work_experience_2, tmp_work.work_experience_3, tmp_work.work_experience_4, tmp_work.work_experience_5, tmp_work.work_experience_6, tmp_work.work_experience_7, tmp_work.work_experience_8, tmp_work.work_experience_9, tmp_work.work_experience_10, tmp_work.work_experience_lang FROM arc_hrcs.hr_extension_data ext
            JOIN aa_work_exp_tmp tmp_work ON tmp_work.employee_id = ext.employee_id) 
            UNPIVOT (work_exp_fi FOR work_code IN (work_experience_1 AS 'a', work_experience_2 AS 'b', work_experience_3 AS 'c', work_experience_4 AS 'd',  work_experience_5 AS 'e', work_experience_6 AS 'f', work_experience_7 AS 'g', work_experience_8 AS 'h', work_experience_9 AS 'i', work_experience_10 AS 'j'))) r
ON (work_exp.user_id = r.user_id AND r.work_experience_lang LIKE '%FI%' )
WHEN NOT MATCHED THEN
     INSERT (work_exp.user_id, work_exp.work_experience_fi)
     VALUES (r.user_id, r.work_exp_fi)
WHEN MATCHED THEN
     UPDATE SET work_exp.work_experience_fi = r.work_exp_fi 
```

我该怎么做才能让它工作？提前干杯和谢谢:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:36:43.823

本质上，USING原因中的查询是多行子查询，当它需要是单行子查询时。我会尝试单独运行子查询并尝试修复 WHERE 原因的逻辑，以便您带回唯一的行。

[http://blog.mclaughlinsoftware.com/2010/03/05/stable-set-of-rows/](http://blog.mclaughlinsoftware.com/2010/03/05/stable-set-of-rows/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:22:02.753

afaik，MERGE 语句需要在 ON 子句以及目标表中指定的 UNIQUE 或 PRIMARY KEY 列。查看您的数据样本，您可能在源表中遗漏了它（它们）。

# python - 无法将 Visual Basic(VB6) 代码转换为 python

> ID：11934627
> 
> 赞同：0
> 
> 时间：2012-08-13T12:52:16.230
> 
> 标签：python, windows, vb6

我正在研究一个软件（ELTIMA Softwares）的源代码，我在其中获得了多种语言变体的源代码，特别是 c#、VB6、Borland C builder 6.0、Delphi 7.0、VC6、VB.NET、VC.NET

问题是我不擅长这些语言中的任何一种，因为我是一名 Python 开发人员。所以我想要这个代码在python中。为此，我使用开源实用程序[vb2py](http://vb2py.sourceforge.net)将 VB6 代码转换为 python 。

但我无法获得 VB6 的正确输出。现在我不擅长VB6，但是我想出了以下代码来负责主要的软件开发。

```
Type=Exe
Reference=*\G{00020430-0000-0000-C000-000000000046}#2.0#0#C:\WINDOWS\system32\stdole2.tlb#OLE Automation
Form=MainForm.frm
Object={831FDD16-0C5C-11D2-A9FC-0000F8754DA1}#2.0#0; mscomctl.ocx
Object={F9043C88-F6F2-101A-A3C9-08002B2F49FB}#1.2#0; comdlg32.ocx
Form=PropertiesForm.frm
Module=Externs; Externs.bas
Object={FD79D0DD-519A-4337-B682-DC2697BCDF25}#4.0#0; HMFAx.dll
IconForm="MainForm"
Startup="MainForm"
ExeName32="VB6Example.exe"
Command32=""
Name="VB6Example"
HelpContextID="0"
CompatibleMode="0"
MajorVer=1
MinorVer=0
RevisionVer=0
AutoIncrementVer=0
ServerSupportFiles=0
VersionCompanyName="Eltima"
CompilationType=0
OptimizationType=0
FavorPentiumPro(tm)=0
CodeViewDebugInfo=0
NoAliasing=0
BoundsCheck=0
OverflowCheck=0
FlPointCheck=0
FDIVCheck=0
UnroundedFP=0
StartMode=0
Unattended=0
Retained=0
ThreadPerObject=0
MaxNumberOfThreads=1

[MS Transaction Server]
AutoRefresh=1 
```

我只想在这里有人请帮助我在 python 中制作这段代码，或者至少帮助我理解代码，以便我可以将它编码到 python 中。

编辑：如果您需要任何其他文件来理解代码，请务必提及。我还有一些其他文件，例如“清单文件”和表单文件，但认为它是用于 GUI 的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:07:38.083

这不是您想要的答案，但我同意@darkphoenix 的评论，即您需要从头开始重写软件。

然而，一切都不会丢失，因为您将能够看到原始代码是如何完成它的工作的，如果有注释，应该解释它为什么这样做。

编程也是编程——逻辑是一样的，只是语法发生了变化。

# c# - c# 从另一个类中的另一个静态事件引发事件

> ID：11934631
> 
> 赞同：2
> 
> 时间：2012-08-13T12:52:36.643
> 
> 标签：c#, events

需要帮助从另一个班级调用事件。我有声明事件的类：

```
 public class MxPBaseGridView : GridView
    {

        public event AddNewItemsToPopUpMenuEventHandler AddNewItemsToPopUpMenu;
          ...
    } 
```

我需要调用事件的另一个类有方法和“AddNewItemsToPopUpMenuEventHandler”委托

```
 public delegate void AddNewItemsToPopUpMenuEventHandler(PopupMenuShowingEventArgs e);
    public static class GridViewUtils
{
public static void gridView_PopupMenuShowing(object sender, PopupMenuShowingEventArgs e)
    {                     
        if (e.MenuType != DevExpress.XtraGrid.Views.Grid.GridMenuType.Row)
        {
           if (menu != null)
            {               
                if (sender is MxPBaseAdvBandedGridView)
                {
                    MxPBaseAdvBandedGridView currentGrid = sender as MxPBaseAdvBandedGridView;

...

                    currentGrid.AddNewItemsToPopUpMenu();
                    if (currentGrid.AddNewItemsToPopUpMenu != null) //there i need to call event
                        currentGrid.AddNewItemsToPopUpMenu(e); // how you understand it doesn't work 
                } 
```

那么做同样工作的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T05:02:07.880

C# 中的事件是一种有趣的事情。它们非常类似于自动属性，但具有私有 get 方法和公共（或您选择的任何访问权限）set 方法。

请允许我演示一下。让我们创建一个带有假设事件的假设类。

```
class SomeObject{
    public event EventHandler SomeEvent;

    public void DoSomeStuff(){
        OnSomeEvent(EventArgs.Empty);
    )

    protected virtual void OnSomeEvent(EventArgs e){
        var handler = SomeEvent;
        if(handler != null)
            handler(this, e);
    }
} 
```

此类遵循公开事件的类的典型模式。它公开事件，但有一个受保护的虚拟“On...”方法，默认情况下，它只是调用事件（如果它有任何订​​阅者）。这个受保护的虚方法不仅封装了实际调用事件的逻辑，还为派生类提供了一种方法：

*   以更少的开销方便地处理事件，
*   在所有外部订阅者收到事件之前或之后执行一些处理，
*   调用一个完全不同的事件，或
*   完全压制事件。

但是这个名为 SomeEvent 的“事件”对象是什么？在 C# 中，我们熟悉字段、属性和方法，但究竟什么是事件？

在我们开始之前，它有助于意识到 C# 中实际上只有两种类型的类成员：字段和方法。属性和事件或多或少只是它们之上的语法糖。

属性实际上是一种或两种方法，并且是存储在元数据中的名称，C# 编译器允许您使用它来引用这两种方法之一。也就是说，当您定义这样的属性时：

```
public string SomeProperty{
    get{return "I like pie!";}
    set{
        if(string.Compare(value, "pie", StringComparison.OrdinalIgnoreCase) == 0)
            Console.WriteLine("Pie is yummy!");
        else Console.WriteLine("\"{0}\" isn't pie!", value ?? "<null>");
    }
} 
```

编译器为您编写了两种方法：

```
public string get_SomeProperty(){return "I like pie!";}
public void   set_SomeProperty(string value){
    if(string.Compare(value, "pie", StringComparison.OrdinalIgnoreCase) == 0)
        Console.WriteLine("Pie is yummy!");
    else Console.WriteLine("\"{0}\" isn't pie!", value ?? "<null>");
} 
```

我不是这个意思。这两个方法与一大块关于属性的元数据一起成为编译类的一部分，它告诉编译器下次从（get）或写入（set）属性时调用哪些方法。所以当你写这样的代码时：

```
var foo = someObject.SomeProperty;
someObject.SomeProperty = foo; 
```

编译器找到分配给 的 getter 和 setter 方法`SomeProperty`，并将您的代码转换为：

```
string foo = someObject.get_SomeProperty();
someObject.set_SomeProperty(foo); 
```

这就是为什么如果您定义一个具有公共字段的类，但后来决定将其更改为一个属性，以便在读取或写入它时可以做一些有趣的事情，您必须重新编译任何包含对它的引用的外部程序集成员，因为字段访问指令需要变成方法调用指令。

现在这个属性有点不正常，因为它不依赖任何支持字段。它的 getter 返回一个常量值，它的 setter 没有在任何地方存储它的值。需要明确的是，这是完全有效的，但大多数时候，我们定义的属性更像这样：

```
string someProperty;

public string SomeProperty{get{return someProperty;}set{someProperty = value;}} 
```

除了对字段进行读取和写入之外，此属性不执行任何操作。它与名为 的公共字段几乎相同`SomeProperty`，只是您*可以*在以后向该 getter 和 setter 添加逻辑，而无需重新编译您的类的使用者。但是这种模式非常普遍，以至于 C# 3 添加了“自动属性”来达到相同的效果：

```
public string SomeProperty{get;set;} 
```

编译器将其转换为与我们上面编写的代码相同的代码，除了支持字段有一个只有编译器知道的超级机密名称，因此我们只能在代码中引用该属性，即使在类本身中也是如此。

因为我们无法访问支持字段，而您可能具有如下只读属性：

```
string someProperty;

public string SomeProperty{get{return someProperty;}} 
```

您几乎永远不会看到只读的自动属性（编译器允许您编写它们，但您会发现它们几乎没有用处）：

```
public string SomeProperty{get;} // legal, but not very useful unless you always want SomeProperty to be null 
```

相反，你通常会看到的是：

```
public string SomeProperty{get;private set;} 
```

附加的`private`访问修饰符`set`使类内的方法可以设置属性，但该属性在类外仍然显示为只读。

“现在这与事件有什么关系？” 你可能会问。嗯，事实上，一个事件很像一个自动属性。通常，当您声明一个事件时，编译器会生成一个超级机密的支持字段和一对方法。除了支持字段不是超级机密，而且这对方法不是“get”和“set”，它们是“add”和“remove”。让我演示一下。

当您编写这样的事件时：

```
public event EventHandler SomeEvent; 
```

编译器写的是这样的：

```
EventHandler SomeEvent;

public void add_SomeEvent(EventHandler value){
    SomeEvent = (EventHandler)Delegate.Combine(SomeEvent, value);
}
public void remove_SomeEvent(EventHandler value){
    SomeEvent = (EventHandler)Delegate.Remove(SomeEvent, value);
} 
```

它还添加了一些元数据粘合，以便以后在编写如下代码时：

```
void Awe_SomeEventHandler(object sender, EventArgs e){}

void SomeMethod(SomeObject Awe){
    Awe.SomeEvent += Awe_SomeEventHandler
    Awe.SomeEvent -= Awe_SomeEventHandler
} 
```

编译器将其重写为（仅有趣的行）：

```
Awe.add_SomeEvent(Awe_SomeEventHandler);
Awe.remove_SomeEvent(Awe_SomeEventHandler); 
```

这里需要注意的重要一点是，与这些相关的唯一可公开访问的成员`SomeEvent`是那些 add 和 remove 方法，当您使用`+=`and`-=`运算符时会调用这些方法。支持字段，即名为 SomeEvent 的包含事件订阅者的委托对象，是一个私有字段，只有声明类的成员才能访问。

但是，就像自动属性只是手动编写支持字段和 getter 和 setter 的捷径一样，您也可以显式声明您的委托并添加和删除方法：

```
internal EventHandler someEvent;

public event EventHandler SomeEvent{
    add{someEvent = (EventHandler)Delegate.Combine(someEvent, value);}
    remove{someEvent = (EventHandler)Delegate.Remove(someEvent, value);}
} 
```

然后，程序集中的其他类可以触发您的事件：

```
var handler = Awe.someEvent;
if(handler != null)
    handler(Awe, EventArgs.Empty); 
```

但是，以正常（自动）方式定义您的事件更容易也更惯用，并且只需公开一个“Raise”方法：

```
internal void RaiseSomeEvent(){OnSomeEvent(EventArgs.Empty);} 
```

But now you hopefully understand *why* you have to do it this way, and what's going on in the background.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T12:59:13.350

您只能在定义了事件的类中调用事件。常见的是使用特定方法来触发事件，您必须将其添加到定义事件的类中。在您的情况下，在 MxPBaseGridView 类中。添加以下内容：

```
public void OnAddNewItemsToPopUpMenu(<eventargstype> e) {
    var addNewItemsToPopUpMenu = AddNewItemsToPopUpMenu;
    if (addNewItemsToPopUpMenu != null)
        addNewItemsToPopUpMenu(this, e);
} 
```

注意：我不确定 eventargs-type 是什么，所以我把它打开了。

然后你可以从你的静态方法中调用这个方法。

注意：通常我将 On... 方法定义为私有的，如果需要的话，定义为受保护的。在这种情况下，我将其定义为 public，因为您需要从班级外部调用它。

# ios - 在哪里保存无法重新创建的下载数据？

> ID：11934633
> 
> 赞同：1
> 
> 时间：2012-08-13T12:52:39.217
> 
> 标签：ios, ios5

我创建了使用 png 图像作为页面的杂志阅读器应用程序。当用户下载杂志时，所有的 png 图像都被下载并存储在 Caches 文件夹中。

缓存的问题是其中的文件显然可以随时删除。由于应用程序也设计用于离线模式，因此无法重新下载丢失的页面。

我试图将其保存到 Documents 文件夹中，但我的应用程序被拒绝了，这显然不适合他们。

所以我的问题是，我可以将它们放在哪里以使 iOS 不会删除它们？我不需要将它们备份到iTunes或同步或类似的东西，我只需要它们留在那里直到我删除它们。

我尝试查看[文档](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html#//apple_ref/doc/uid/TP40010672-CH2-SW27)，但找不到适合我需要的类别，我是否遗漏了一些微不足道的东西？

编辑：我也需要支持 iOS 4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T12:59:19.773

[Apple 在http://developer.apple.com/library/ios/#qa/qa1719/_index.html](http://developer.apple.com/library/ios/#qa/qa1719/_index.html)有一个技术说明来解决这个问题

它显示了在文件上设置无备份属性的示例代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T12:57:59.990

[http://developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUIde/FileSystemOverview/FileSystemOverview.html](http://developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)

放入库文件夹

> 处理支持文件
> 
> — 应用程序下载或生成的文件，并可根据需要重新创建 — 采用以下两种方式之一：
> 
> 在 iOS 5.0 及更早版本中，将支持文件放在 /Library/Caches 目录中，以防止它们被备份
> 
> 在 iOS 5.0.1 及更高版本中，将支持文件放在 /Library/Application Support 目录中，并对它们应用 com.apple.MobileBackup 扩展属性。此属性可防止将文件备份到 iTunes 或 iCloud。如果您有大量支持文件，您可以将它们存储在自定义子目录中，并将扩展属性仅应用于该目录。

# c - C 打开/关闭模式可能有错误

> ID：11934636
> 
> 赞同：0
> 
> 时间：2012-08-13T12:52:45.957
> 
> 标签：c, resources

当我们为使用子资源的资源创建打开/关闭机制时，我们有 2 种模式来处理发生错误时的子资源释放：

**1**

```
RESULT Open() {
   RESULT result;
   result = OpenSubResourceA();
   if (result == SUCCESS)
      result = OpenSubResourceB();

   /* Do not handle error case, the convention is that the caller 
    * will call Close whatever the return code of Open is */
   return result;
} 
```

**2**

```
RESULT Open() {
   RESULT result;
   result = OpenSubResourceA();
   if (result == SUCCESS)
      result = OpenSubResourceB();

   if (result != SUCCESS)
      ReleaseSubResourceA();

   /* Release A if opening B failed since the convention is 
    * that the caller calls Close only if Open succeeds */

   return result;
} 
```

当然，我们可以用超过 2 个子资源进行概括。

你最喜欢的做事方式是什么？为什么？

**编辑**

感谢您的投入。主要资源不应该处于 Open/Close 调用之外的某个中间状态的想法使我确信 #2 确实是最好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T12:58:05.107

这是其中之一，不能在 C 中干净地完成。

我做的是这种模式（很常见）：

```
 aquire_1;
   if (fail) goto fail_1;

   aquire_2;
   if (fail) goto fail_2;

fail_2:
    release_1;
fail_1:
    return err; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:02:19.510

通常，如果我有一个分配资源的函数 - 内存或文件句柄或任何东西 - 如果 open 方法失败，则应该没有未分配的资源。失败的打开应该将程序返回到与在 at 未发生打开调用时相同的状态。

所以，我会在 open 函数中关闭未使用的资源。我认为最好在尽可能靠近分配它们的位置释放资源。它使代码更具可读性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T13:02:58.200

如果操作失败，资源应该与调用之前的状态相同，以便客户端可以继续使用它。如果某些操作失败，让资源处于不确定的半就绪状态是不好的做法。如果你不能（不想）清理并从不确定状态恢复，那么资源应该显式呈现为错误状态，例如一些成员`isError()`应该开始返回`true`

那是#2

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T14:22:36.313

除了其他人所说的之外， Open() 的调用者甚至可能不知道子资源的存在（取决于资源的性质）。在这种情况下，调用者无法彻底清理干净，Open 函数必须自己完成。

# ruby-on-rails - Mongoid 关联和参考

> ID：11934641
> 
> 赞同：0
> 
> 时间：2012-08-13T12:52:56.460
> 
> 标签：ruby-on-rails, associations, mongoid

我有一个关于 Mongoid 关联的新手问题。我有这两个模型

```
class Manufacturer
  include Mongoid::Document

  field :name, type: String
  field :url, type: String

  has_many :products
end 
```

和

```
class Product
  include Mongoid::Document

  field :manufacturer_name, type :String
  field :model, type: String
  field :price, type: Float

  belongs_to :manufacturer
end 
```

现在我创建了一家新公司：

```
man = Manufacturer.create name: 'Flower Power Companies', url: 'www.flowerpower.com' 
```

和一个新产品：

```
prod = Product.create manufacturer_name: what_comes_here, model: 'Foo0815', price: '19.90' 
```

如何将 prod.manufacturer_name 引用到 man.name？如果 man.name 将被更改， prod.manufacturer_name 应自动更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:58:58.963

当您已经在两者之间建立关系时，为什么您需要在您的产品表中有一个 cloumn 制造名称。

做就是了

```
m = Manufacture.create name: "...", url: "..."
p = m.products.create model: ".." , price : 19.90 
```

这将自动在您的制造和产品之间创建关系。稍后当您想知道制造商的名称时，只需调用 p.manufacture.name

当您创建新产品并希望稍后将制造添加到产品中时，只需执行

```
p = Product.create model: "",price: ""
p.manufacture = Manufacture.find(:id) 
```

# haskell - 在 Yesod 中选择另一个表引用的行

> ID：11934648
> 
> 赞同：1
> 
> 时间：2012-08-13T12:53:04.743
> 
> 标签：haskell, yesod

假设我有以下 Yesod (Database.Persist) 数据库模式：

```
File
   path Text

Tag
   name Text

FileTag
   file FileId
   tag TagId
   UniqueFileTag file tag 
```

Yesod中选择给定Tag记录引用的文件记录最方便的方法是什么？我需要求助于自定义 SQL 吗？我使用 PostgreSQL 作为数据库后端。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T13:31:28.513

您可以使用自定义 SQL 来解决这个问题；我不认为 Persistent 提供了不同的解决方案，因为它不是 ORM，因为它必须支持像 MongoDB 这样的非关系后端。

您可以像这样实现基本连接：

```
let tagFileStatement =
  Text.concat
  [ "SELECT ?? "
  , "FROM  file,     file_tag "
  , "WHERE file.id = file_tag.file "
  , "AND   ?       = file_tag.tag"
  ]
files <- runDB $ rawSql tagFileStatement
         [toPersistValue theTagIdThatYouWantToLookupFilesFor]
files :: [Entity File] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T17:27:05.057

有一个用于处理一对多关系的模块，可以作为[应用程序级连接](http://hackage.haskell.org/packages/archive/persistent/1.0.0/doc/html/Database-Persist-Query-Join.html)，也可以作为[适当的 SQL 连接](http://hackage.haskell.org/packages/archive/persistent/1.0.0/doc/html/Database-Persist-Query-Join-Sql.html)。不幸的是，这些模块可能算作整个 Yesod 项目中文档记录最差的方面。从长远来看，我们希望改善更复杂的 SQL 查询的状态，但我们目前没有任何实际代码可以展示。

Yesod 邮件列表中有几个线程介绍了如何使用这些线程，这是弹出的一个线程：[https](https://groups.google.com/forum/#!msg/yesodweb/a4EAvPS8wFA/ClPuS94TRFwJ%5B1-25%5D) ://groups.google.com/forum/#!msg/yesodweb/a4EAvPS8wFA/ClPuS94TRFwJ%5B1-25%5D . 我们真的需要改进 Haddocks 或编写一个 wiki 页面来更好地详细说明这种行为。

# java - 用于定义值的 JSF 复合属性

> ID：11934657
> 
> 赞同：0
> 
> 时间：2012-08-13T12:53:45.850
> 
> 标签：java, jsf, attributes, composite

我希望的简单问题..我有一个值设置为 3 的 java 类：

```
private static final Integer MAX_LANGUAGES = 3; 
```

你能给我一个例子，如何制作一个复合属性来指定用户可以选择的最大语言数。它现在存储在类中，但我希望它更灵活，因为类不应该依赖于该数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:12:04.507

你在说[`composite components`](http://docs.oracle.com/javaee/6/tutorial/doc/giqzr.html)吗？

如果是这样，您可以使用[`composite:attribute`](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/pdldocs/facelets/index.html)标签向组件添加属性。

例如：

```
<composite:interface>
    <composite:attribute name="maxLanguages"/>
</composite:interface>

<composite:implementation>
    <h:outputFormat value="Maximum languages = {0}">
           <f:param value="#{cc.attrs.maxLanguages}"/>
    </h:outputFormat>
</composite:implementation> 
```

您还可以使用的属性将真实的 java 模型附加到它`componentType`，`composite:interface`并使用它访问它的属性`cc.propertyName`

# winrt-xaml - 如何使过渡尊重 UseLayoutRounding？

> ID：11934659
> 
> 赞同：1
> 
> 时间：2012-08-13T12:53:55.317
> 
> 标签：winrt-xaml, tessellation

我的 C#/XAML Metro 应用程序中有一个页面，它使用`EntranceThemeTransition`. 在这个页面中，我有一些平铺`Image`的图形： 彼此紧密贴合以构建更大的图像。我确保将尺寸设为 5 的倍数，因此即使在不同的 DPI 下它们也能很好地适应。

由于默认值为，我希望 的每一步都`UseLayoutRounding`四舍五入到最近的像素。然而，这并没有发生，正如这个屏幕截图所示（注意两条细的绿色垂直线穿过应该是一个实心块）：`true``EntranceThemeAnimation`

![在此处输入图像描述](../Images/624d434c706b87cae2d4b4248bde8011.png)

这应该是一个无缝块，由 9 个图块（3 宽 x 3 高，每个图块 80x80 像素）组成。在垂直方向上，它们完美地结合在一起；但是当页面动画时，因为 X 方向正在动画并且并不总是 1 像素的倍数，所以我最终会在图块之间出现接缝（因为每个图像的 X 都是分数，所以每个图像都有两个图像在已经存在的顶部绘制具有 50% 不透明度的中间像素，从而导致总共 75% 的不透明度而不是 100%）。这是`UseLayoutRounding`应该防止的那种问题，但它根本没有帮助。

动画完成后，一切都会安定下来，一切都会完美排列。但是在动画期间，尤其是在动画停止之前，接缝非常明显。

我尝试`UseLayoutRounding="true"`在育儿层次结构的各个点显式设置，但没有帮助。

这是我的 XAML 的简化形式，它重现了该问题：

```
<Page x:Class="App1.Page1"
      UseLayoutRounding="True"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid Background="Green" UseLayoutRounding="True">
        <Grid.ChildrenTransitions>
            <TransitionCollection>
                <EntranceThemeTransition/>
            </TransitionCollection>
        </Grid.ChildrenTransitions>
        <Canvas UseLayoutRounding="True">
            <Image Canvas.Left="80" Canvas.Top="80" Source="/Assets/DirtSquare.png" Width="80" Height="80" UseLayoutRounding="True"/>
            <Image Canvas.Left="160" Canvas.Top="80" Source="/Assets/DirtSquare.png" Width="80" Height="80" UseLayoutRounding="True"/>
            <Image Canvas.Left="240" Canvas.Top="80" Source="/Assets/DirtSquare.png" Width="80" Height="80" UseLayoutRounding="True"/>
            <Image Canvas.Left="80" Canvas.Top="160" Source="/Assets/DirtSquare.png" Width="80" Height="80" UseLayoutRounding="True"/>
            <Image Canvas.Left="160" Canvas.Top="160" Source="/Assets/DirtSquare.png" Width="80" Height="80" UseLayoutRounding="True"/>
            <Image Canvas.Left="240" Canvas.Top="160" Source="/Assets/DirtSquare.png" Width="80" Height="80" UseLayoutRounding="True"/>
            <Image Canvas.Left="80" Canvas.Top="240" Source="/Assets/DirtSquare.png" Width="80" Height="80" UseLayoutRounding="True"/>
            <Image Canvas.Left="160" Canvas.Top="240" Source="/Assets/DirtSquare.png" Width="80" Height="80" UseLayoutRounding="True"/>
            <Image Canvas.Left="240" Canvas.Top="240" Source="/Assets/DirtSquare.png" Width="80" Height="80" UseLayoutRounding="True"/>
        </Canvas>
    </Grid>
</Page> 
```

我该怎么做才能使布局*实际上*将所有位置四舍五入到最近的像素，即使`EntranceThemeTransition`正在为页面设置动画？

# c# - 在选择更改事件后绑定到 datagridview 时 bindingnavigator 中断

> ID：11934661
> 
> 赞同：1
> 
> 时间：2012-08-13T12:53:57.720
> 
> 标签：c#, datagridview, selection

我以前使用过这个控件，它非常简单。我有一个绑定到数据源的数据网格视图。我将绑定导航器控件添加到表单并将其设置为使用与数据网格视图相同的绑定源。我添加了一个文本框，我用它来过滤出现在数据网格视图中的结果，并修改导航器以删除添加和删除项目，因此它只包含导航按钮和文本框。一切看起来都很好，直到我在网格中选择一行......虽然导航器中的行号是正确的，但有一个大的红色“X”跨越了整个导航栏，它跨越了表单的整个顶部。我在这里包含了一个快照：![绑定导航栏损坏](../Images/07ae39da148d3a7f1b9fa618473083d5.png)

我没有收到任何警告或异常，并且将调试器设置为在抛出任何异常时中断。我觉得我遗漏了一些明显的东西，但它继续“工作”，因为过滤器工作正常并且行号总是正确的。任何有助于解决此问题的建议将不胜感激。数据网格视图选择更改确实修改了表单的内容（表单上的其他控件），但一切正常。

就示例代码而言，数据网格视图和绑定导航器都使用作为数据源添加的 sql 视图。

```
this.dgvSerial.DataSource = this.vwSerialBindingSource;

this.bindingNavigator1.BindingSource = this.vwSerialBindingSource; 
```

然后，我将绑定源的过滤器设置在绑定导航器中的文本框上：

```
 vwSerialBindingSource.Filter = string.Format("ProductName LIKE '%{0}%' OR LabelProductName LIKE '%{0}%' OR SerialNumber LIKE '%{0}%'", tb.Text); 
```

我还添加了一个“搜索按钮”，其中包含作为嵌入式资源加载的图像。

```
 // setup the search button, the image is 
            // an embedded resource
            bindingNavigator1.ImageList = new ImageList();

            Assembly _assembly = Assembly.GetExecutingAssembly();

            Stream _imageStream = _assembly.GetManifestResourceStream("SNReprint.search.png");
            Image currentImage = Image.FromStream(_imageStream);

            ToolStripButton searchButton = new ToolStripButton();

            searchButton.Image = currentImage;
            searchButton.Text = "Search";
            searchButton.Font = new Font(searchButton.Font, FontStyle.Bold);
            searchButton.BackColor = Color.Lavender;

            // Add the button to the toolstrip
            bindingNavigator1.Items.Add(searchButton); 
```

表单上有许多其他控件绑定到视图中不受影响的列。

我不确定我应该提供哪些其他代码，其中大部分是设计器生成的，并且应用程序的每个其他方面都可以完美运行。由于在引发数据网格视图选择更改事件之前不会出现此问题，因此我必须假设我正在此事件处理程序中执行某些操作以导致绑定导航器无法正确呈现。

如果我可以提供任何其他具体的信息，可能会对问题有所了解，我非常乐意发布它......

# php - 如何在序列化内容中搜索

> ID：11934662
> 
> 赞同：1
> 
> 时间：2012-08-13T12:54:03.527
> 
> 标签：php, mysql, serialization

我有两张桌子

表 1 是：

```
id | item_id
---------------
1  | a:2:{i:0;s:1:"1";i:1;s:1:"2";} 
```

第二个表是：

```
tag_id | tag
------------
1      | c
2      | java 
```

序列化后，我已将表 2 的 id 存储在表 1 中。现在我想通过 mysql 搜索表 1 中的标签，`%like%`但问题是，如果我想搜索 item_id 中 id 为 1 或 2 的标签，即使我没有存储 1，它也会始终找到结果，但这是由序列化函数存储。现在我想知道我该怎么办？任何更好的方法/方法也将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T12:57:55.970

序列化数据不适合搜索。

最好改进你的表结构：

1.  表格标签与您的相同。
2.  表 items_tags 与结构：
    1.  id - 自增字段
    2.  item_id - 带有标签的项目 ID
    3.  tag_id - 标签 ID

使用以下结构，搜索带有标签的项目要容易得多。

**添加**

Mayankswami，示例查询：对于具有指定标签的所有项目：`SELECT item_id FROM items_tags WHERE tag_id=(TAG_ID)`对于项目的标签：`SELECT * FROM item_tags AS IT LEFT JOIN tags AS T ON T.id=IT.tag_id WHERE item_id=(ITEM_ID)`

# python - pydbg 无法导入 pydasm - Python 2.7

> ID：11934668
> 
> 赞同：2
> 
> 时间：2012-08-13T12:54:26.110
> 
> 标签：python, pydbg

这是我的 python shell 的片段，我不明白那里有什么问题，如果有人有任何建议，我会很高兴听到。

```
>>> import pydbg
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Python27\lib\pydbg\__init__.py", line 47, in <module>
    from pydbg                   import *
  File "C:\Python27\lib\pydbg\pydbg.py", line 32, in <module>
    import pydasm
ImportError: DLL load failed: The specified module could not be found.
>>> import pydasm
>>> 
```

为什么我不能导入pydbg，因为它不能导入pydasm，而我可以直接导入pydasm？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T23:45:52.893

我可以通过删除 pydbg 的 site-packages 目录中的 pydasm.pyd 来解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T06:38:28.733

将您的`pydbg`目录从移动`C:\Python27\lib\`到`C:\Python27\lib\site-packages\`，这是 3rd 方包的标准安装位置。[或者，尝试来自http://www.lfd.uci.edu/~gohlke/pythonlibs/#pydbg](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pydbg)的非官方 pydbg 二进制文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-29T19:34:54.793

查找`pydasm`您正在运行的 python 版本。我认为这是python2.6`pydbg`附带`pydasm`的。我不知道为什么。

我`pydasm`在网上找到了python 2.7。您还可以找到有关如何自行转换的信息。我没有收到任何错误，但我仍然在努力，`pydbg`所以我不确定这是否是解决方案。

如果你正在运行 python2.7 试试这个： http: [//blog.csdn.net/qq_lhz/article/details/6922130](http://blog.csdn.net/qq_lhz/article/details/6922130)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T20:14:23.717

也许你可以试试我为 Python 2.7 预编译的 PyDasm 二进制文件：

[https://breakcode.wordpress.com/2012/04/08/quickpost-installer-for-beaenginepython/](https://breakingcode.wordpress.com/2012/04/08/quickpost-installer-for-beaenginepython/)

# javascript - 谷歌分析设置（高级 Javascript）

> ID：11934679
> 
> 赞同：0
> 
> 时间：2012-08-13T12:54:54.893
> 
> 标签：javascript, google-analytics

我的网站上有三个按钮，所有按钮都会打开一个弹出式联系表。

这三个按钮用于不同的事情，例如：

请求电话 获取小册子 访问我们

但是它们都打开相同的表格；我想做的是使用谷歌分析来跟踪表单并知道他们最初点击的是什么按钮；这可能吗？

可以在按钮上使用 onClick 功能吗？

真的需要一些帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:39:34.787

是的，它是可能的......'_trackPageview'这是你在找什么

检查此链接：

官方的：

[http://support.google.com/analytics/bin/answer.py?hl=en&answer=2558867](http://support.google.com/analytics/bin/answer.py?hl=en&answer=2558867)

其他：

[http://viget.com/advance/how-to-track-internal-links-in-google-analytics](http://viget.com/advance/how-to-track-internal-links-in-google-analytics)（推荐）

[http://www.pointit.com/how-to-track-button-clicks-with-google-analytics/](http://www.pointit.com/how-to-track-button-clicks-with-google-analytics/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:50:07.000

事件跟踪将是一个更好的选择，因为它不会过度夸大您的网页浏览量。您现在也可以将[事件设置为目标](http://analytics.blogspot.com/2011/04/new-google-analytics-events-goals.html)。

```
<a href="#" onClick="_gaq.push(['_trackEvent', 'Contact Form', 'Button Click', 'Request a call']);">Request a call</a> 
```

请参阅[事件跟踪指南](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)

# java - Eclipse：导出的库无法实例化 oracle 驱动程序 ojdbc.jar

> ID：11934682
> 
> 赞同：0
> 
> 时间：2012-08-13T12:54:59.187
> 
> 标签：java, eclipse, oracle, jar

我有一个库，其中包含连接到 oracle 数据库的功能。当我导出这个库（作为 JAR）并在主项目中使用它时，在使用 class.forname 加载驱动程序时会出现异常。它显然找不到 ojdbc 驱动程序。我将此驱动程序包含在构建路径中并作为导出库。

我直接从主项目测试并使用了驱动程序，它可以工作，它连接到 oracle db。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:57:10.697

问题是您的驱动程序是一个 jar 文件，当您将应用程序导出为 jar 文件时，该驱动程序将是 jar 文件中的一个 jar 文件。对于这种情况，您要么需要一个特殊的类加载器，要么将驱动程序 jar 文件放在主程序的类路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:07:03.113

使用 WinRar 探索您导出的jar，并检查它是否包含 jar 下的 jar。

# asp.net-mvc-3 - 刷新 ASP.NET MVC 3 中的死锁页面

> ID：11934684
> 
> 赞同：2
> 
> 时间：2012-08-13T12:55:02.023
> 
> 标签：asp.net-mvc-3, refresh, deadlock

我的应用程序中有一个与此解决方案非常相似的异常处理：http: [//www.devcurry.com/2012/06/aspnet-mvc-handling-exceptions-and-404.html](http://www.devcurry.com/2012/06/aspnet-mvc-handling-exceptions-and-404.html)

我的应用程序中有一个令人讨厌的错误，其中 sql 可能与其他进程死锁。这种情况很少发生（每天有 1-2 个请求因此失败），但它仍然会发生。

如何在 sql deadlock 上自动刷新页面（并在获取请求时以这种方式向最终用户隐藏错误）？

我可以在 Application_Error 函数中执行此操作吗？还是在 HandleErrorAttribute 中被覆盖的 OnException 中？

编辑：

我在我创建的 BaseController 中模拟了一些代码：

```
protected override void OnException(ExceptionContext filterContext)
{
    Exception ex = filterContext.Exception;
    SqlException sex = ex as SqlException;

    if (sex != null && sex.Number == 1205)
    {
       Log.Error("Transaction deadlocked with the following exception:");
       Log.Exception(sex);

       //I need to write the logic that refreshes the page here.
    }
    else
    {
       Log.Error("Application error with the following exception:");
       Log.Exception(ex);
    }

    base.OnException(filterContext);
} 
```

我需要刷新部分的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:01:08.373

我将通过覆盖控制器的 OnException() 方法来处理它。最好从自定义基础控制器继承所有控制器，在该基础控制器中进行覆盖以保持解决方案的一致性和干燥性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-19T10:58:16.220

只需添加以下代码，之前`base.OnException(filterContext);`

```
// Stop any other exception handlers from running
filterContext.ExceptionHandled = true; 
```

# java - 如何在java中从RGB中获取原始值

> ID：11934686
> 
> 赞同：2
> 
> 时间：2012-08-13T12:55:06.887
> 
> 标签：java

`320`我从数字创建 RGB 。我得到以下
输出：

```
-16776896 
```

我写了这段代码

```
Color c=new Color(320);
System.err.println(c.getRGB());
System.out.println(c.getRed()+" "+c.getGreen()+" "+c.getBlue()+" "+c.getAlpha());
System.out.println(c.toString()); 
```

现在我想从中检索`320`价值`-16776896`。我该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T13:01:15.313

```
System.out.println(c.getRGB() & 0x00ffffff); 
```

输入在 的构造函数中按位`OR`d 。这是逆运算。`0xFF000000``Color`

实际上，如果它是负数或大于 ，是不可能得到原始值的`16777215`。

# jquery - droppable 未注册 drop

> ID：11934687
> 
> 赞同：1
> 
> 时间：2012-08-13T12:55:09.217
> 
> 标签：jquery, drag-and-drop, draggable, droppable

我试图让我拖动的列表项在它被放下时消失（通过添加一个类）。

我有控制台日志记录它何时被抓取，它下降得很好，但当我放下它时没有发生 addClass 或日志消息。非常感谢任何帮助。

```
<script type="text/javascript" >
        $(document).ready(function(){  
            $('.draggable-demo-product').mousedown(function(){
                    $(this).addClass('grabbed');
                    console.log('grabbed');
            }); 
            $('.droppable').droppable({
                drop: function(){
                $('.draggable-demo-product').addClass('dropped');
                    console.log('dropped');
                }
            });        
        });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-24T11:01:12.250

通过使用您的代码，我设置了一个 jsFiddle，一切正常。检查您的 HTML 文件中是否包含所有必需的 js 库。

这是[jsFiddle](http://jsfiddle.net/vrpruthvi/4d7GF/)

```
$(document).ready(function(){  
        $('.drag').mousedown(function(){
                $(this).addClass('grabbed');
                console.log('grabbed');
        }).draggable(); 
        $('.drop').droppable({
            drop: function(event, ui){
            $('.drag').addClass('dropped');
                console.log('dropped');
            }
        });        
}); 
```

# sharepoint-2010 - SSRS：如何在针对 SharePoint 列表创建报告时指定 ViewAttributes

> ID：11934689
> 
> 赞同：2
> 
> 时间：2012-08-13T12:55:11.417
> 
> 标签：sharepoint-2010, reporting-services, reportbuilder

客户正在尝试使用 Report Builder 3.0 针对 SharePoint 列表构建报告。他试图在子文件夹中包含项目。例如。通过使用 CAML（即在此上下文中，SharePoint 的查询语言），您可以通过指定`<ViewAttributes Scope=”Recursive”/>`：结果集包含子文件夹中的项目来完成此操作。

那么，如何在报告中指定相同的内容？我找不到正确的语法来做到这一点，也没有直接查询列表：

```
<RSSharePointList xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <ListName>testlist</ListName>
  <ViewFields>
    <FieldRef Name="LinkTitleNoMenu" />
    <FieldRef Name="Author" />
  </ViewFields>
</RSSharePointList> 
```

也不是列表 Web 服务 (lists.asmx)：

```
<Query>
       <SoapAction>http://schemas.microsoft.com/sharepoint/soap/GetListItems</SoapAction>
       <Method Namespace="http://schemas.microsoft.com/sharepoint/soap/" Name="GetListItems">
          <Parameters>
             <Parameter Name="listName">
                <DefaultValue>testlist</DefaultValue>
             </Parameter>
             <Parameter Name="rowLimit">
                <DefaultValue>1000</DefaultValue>
             </Parameter>
          </Parameters>
        </Method>
        <ElementPath IgnoreNamespaces="True">*</ElementPath>
</Query> 
```

试图将其作为查询的参数插入，例如

```
 <Parameter Name="viewAttributes">
        <DefaultValue><ViewAttributes Scope="Recursive"/></DefaultValue>
     </Parameter> 
```

但没有运气（还）。

指点，赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:50:13.080

找到东西了...

```
<Query>
<SoapAction>http://schemas.microsoft.com/sharepoint/soap/GetListItems</SoapAction>
       <Method Namespace="http://schemas.microsoft.com/sharepoint/soap/" Name="GetListItems">
          <Parameters>
             <Parameter Name="listName">
                <DefaultValue>testlist</DefaultValue>
             </Parameter>
             <Parameter Name="rowLimit">
                <DefaultValue>1000</DefaultValue>
             </Parameter>

   <Parameter Name="queryOptions" Type="xml">     
    <DefaultValue>
     <QueryOptions>
      <ViewAttributes Scope="Recursive" />
     </QueryOptions>
    </DefaultValue>
   </Parameter>

          </Parameters>
        </Method>
        <ElementPath IgnoreNamespaces="True">*</ElementPath>
</Query> 
```

# php - SQL查询中的foreach循环

> ID：11934690
> 
> 赞同：0
> 
> 时间：2012-08-13T12:55:12.563
> 
> 标签：php, mysql, sql

我有一个名为 $type 的数组，我需要将其放入 SQL 查询中，

问题是我不知道提交查询时 $type 会有多少条记录...

```
$sql="SELECT * FROM tutor_question WHERE questionId in (SELECT questionId FROM tutor_question_list_questions WHERE listId = " . $lid . ")"; 
```

有什么办法可以在上面的查询中做一个 foreach 循环来做这样的事情吗？

```
....AND
foreach ($type as $t) {
    echo $t;
} 
```

我只需要提取适合我正在寻找的特定类型的问题。

我尝试了一些组合，但无法正常工作，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T13:03:42.767

```
"questionType IN (" . implode(",",$type) . ")" 
```

你可以按照这些思路做一些事情，只要类型中总是至少有一个条目，如果没有，你需要先检查这个

# javascript - 如何为滑块的分页按钮创建简单的下一个和上一个触发按钮？

> ID：11934691
> 
> 赞同：1
> 
> 时间：2012-08-13T12:55:14.253
> 
> 标签：javascript, jquery, html, click, each

我试图在单击按钮时在`li`'s 和 combine`each()`和方法之间携带一个类。`eq()`我对上一个和下一个按钮使用相同的代码，`i+1`但`i-1`它返回给我不同的问题。

[**这是要检查的jsFiddle。**](http://jsfiddle.net/merk8/16/)

html:

```
<span class="prev">prev</span>
<ul>
    <li>0</li>
    <li>1</li>
    <li class="active">2</li>
    <li>3</li>
    <li>4</li>
</ul>
<span class="next">next</span> 
```

jQuery：

```
var li = $('li');

$('.prev').click(function() {
    li.each(function(i) {
        if ( $(this).hasClass('active') ) {
            console.log(i);
            //this returning current true value = 2

            li.removeClass('active');
            li.eq(i-1).addClass('active');
            //this is working better
            //problem is: not selecting 4
        }
    });
});

$('.next').click(function() {
    li.each(function(i) {
        if ( $(this).hasClass('active') ) {
            console.log(i);
            //this returning current true value = 2

            //problem starts:
            //li.removeClass('active');
            //when this is active; all active classes are gone

            li.eq(i+1).addClass('active');
            //try to select next 'li' here
            //but it is selecting all li's bigger than current value
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T13:06:17.730

我会尝试使用更像：

[这是工作的jsFiddle。](http://jsfiddle.net/merk8/33/)

```
$(".next").click(function(){
    if($("li.active").next().length > 0){
        $("li.active").removeClass("active").next("li").addClass("active");
    }
});
$(".prev").click(function(){
    if($("li.active").prev().length > 0){
        $("li.active").removeClass("active").prev("li").addClass("active");
    }
});​ 
```

使用“下一个”选择器：[Jquery Next](http://api.jquery.com/next/)

我尽可能避免数学。数数很难:-)。也就是说，我认为您上面的问题可能与索引有关。很难说。在处理这样的列表时，我会避免使用像“li”这样的选择器。尝试在它的“ul”部分放置一个类，并将你的 li 寻址为：“.myList li”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:05:10.850

你应该`return false;`在找到你的第一类之后：http `active`: [//jsfiddle.net/ufomammut66/np4Pt/](http://jsfiddle.net/ufomammut66/np4Pt/)

发生的事情是您迭代前进的元素并按顺序更改每个元素。因此，当您遍历每个案例时，您将按顺序设置下一个为活动状态，这反过来又使下一个`$(this).hasClass('active')`检查为真。这就是 prev 事件起作用的原因，我们以循环的相反顺序移动。所以我们只需要在找到我们的活动案例后停止迭代我们的集合。

**编辑 1**

您可以`.length`在任何选定对象上使用来获取返回的数量。因此，在您提供的示例代码中，我们可以使用`li.length`来获取页面上有多少个 li 元素。您可能希望使用类选择器来确保不使用其他 li 元素来计算您的上限。我已经更新了 jsFiddle 以反映这些变化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T13:10:47.977

如果由于某种原因您需要索引，您总是可以这样做：

```
$('.prev').on('click', function() {
    var i = $(".active").index();
        i--;
    $(".active").removeClass('active');
    $('li').eq(i).addClass('active');
});

$('.next').on('click', function() {
    var i = $(".active").index();
        i = i >= $('li').length-1 ? 0 : i+1;
    $(".active").removeClass('active');
    $('li').eq(i).addClass('active');
});​ 
```

[**小提琴**](http://jsfiddle.net/merk8/31/)

如果不 ：

```
$('.prev, .next').on('click', function() {
    if ($(".active")[$(this).attr('class')]().index()!=-1)
    $(".active").removeClass('active')[$(this).attr('class')]().addClass('active');
}); 
```

[**小提琴**](http://jsfiddle.net/merk8/34/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T13:11:27.463

你甚至可以试试这个：

```
$('.prev').click(function() {
    var el = $.find('li[class=active]'); 
    //check if are prev li
    if(!$(el).prev().is(':first')) $(el).removeClass('active').prev().addClass('active');
});

$('.next').click(function() {
    var el = $.find('li[class=active]'); 
    //check if are next li
    if(!$(el).next().is(':last')) $(el).removeClass('active').next().addClass('active');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T13:21:14.073

[尝试以下更新的 jsFiddle](http://jsfiddle.net/merk8/35/)：

```
var li = $("li");

$(".prev").click(function() {
    var activeLI = $("li.active");
    var index = $(activeLI).index();

    $(activeLI).removeClass('active');

    if (index > 0) {
        $(activeLI).prev().addClass('active');
    } else {
        $(li).last().addClass('active');
    }
});

$(".next").click(function() {
    var activeLI = $("li.active");
    var index = $(activeLI).index() + 1;

    $(activeLI).removeClass('active');

    if (index < li.length) {
        $(activeLI).next().addClass('active');
    } else {
        $(li).first().addClass('active');
    }
}); 
```

这将循环到最后一个活动元素（如果前一个在第一个）和第一个元素活动（如果下一个在最后一个）。

# ruby-on-rails - Shopping cart in rails via book

> ID：11934700
> 
> 赞同：0
> 
> 时间：2012-08-13T12:56:15.780
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

Via such book:

> Agile Web Development with Rails

i'm creating shopping cart for my application. There is such code:

```
class Cart < ActiveRecord::Base
    attr_accessible :id
    has_many :line_items, dependent: :destroy

  def add_article(article_id)
    current_item = line_items.find_by_ART_ID(article_id)
      if current_item
      current_item.quantity += 1
      else
      current_item = line_items.build(ART_ID: article_id)
      end
    current_item
  end
  def total_price
    line_items.to_a.sum { |item| item.total_price(item.ART_ID) }
  end
  def total_count
    line_items.to_a.sum { |item| item.quantity }
  end

end 
```

On my previous project on rails 3.0.9 all was ok, but now it's say that

> nil can't be coerced into Fixnum in db, quantity is null

if i change my code for like this

```
current_item = line_items.find_by_ART_ID(article_id)
          if current_item
          current_item.quantity = 1
          else
          current_item = line_items.build(ART_ID: article_id)
          current_item.quntity = 1
          end
        current_item 
```

all is good, but what's wrong? why rails 3.2.6 and ruby 1.9.3 don't understand my += assignments?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:04:42.913

Its not a problem with += , the problem is you are try to do this with your code.

```
nil + 1 
```

quantity is nil for the first time.

# c - 计数 k 个元素的序列

> ID：11934705
> 
> 赞同：1
> 
> 时间：2012-08-13T12:56:31.150
> 
> 标签：c, algorithm, integer, sequences

如果我有两个整数数组：

`a = {2,2,3,3,5,6,7,2,2,2}`,`b = {6,-5,2,2,2,2,4,5,3,3}`

和一个 integer `k = 2`，它定义了连续序列的数量（两个数组中相同 - `[2,2]`, `[3,3]`, `[2,2,2]`in "a" / `[2,2,2,2]`, `[3,3]`in "b" ），我如何为每个数字序列运行单独的计数？

我是这样想的算法：

```
int count = 1;  
for (int i=0; i<N; i++){
    if ( a[i] == a[i+1] && b[i] == b[i+1] && a[i] == b[i] ){
        count++;
    }

    if ( count >= k ){
        condition = true;
    }
} 
```

对每个元素序列以 1 开始“计数”可以确保计数是准确的，但是这样，在检查数组的第二个和第三个位置时`a`，它也会对元素进行计数，`3`而不是在 处停止`2`。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T20:00:11.513

看到您的评论“函数是布尔值”，我想您想知道是否存在长度相同`k`或更多的序列，即两个输入数组的子序列。

似乎子序列不必出现在两个数组中的相同位置（否则练习将不那么有趣）。

假设我的猜测是正确的，您可以使用以下想法：

1.  检查所有位置对`(p1,p2)`，其中`p1`是第一个数组`p2`中的位置，是第二个数组中的位置。
2.  使用`0...N-k`位置范围，以避免溢出（读取数组末尾）
3.  对于每一对位置，检查`k`从这些位置开始的数字是否相同
4.  如果至少一对位置相同，则结果为`true`; 除此以外`false`

您可以使用两个嵌套循环来实现 (1) 和 (2)，如下所示：

```
for (p1 = 0; p1 <= N - k; ++p1)
{
    for (p2 = 0; p2 <= N - k; ++p2)
    {
        ...
    }
} 
```

您可以使用单独的函数或嵌套循环来检查条件 (3)。

# vba - Excel VBA中的高效小写

> ID：11934706
> 
> 赞同：5
> 
> 时间：2012-08-13T12:56:35.903
> 
> 标签：vba, excel, excel-2007

现在我使用下面的代码将整列更改为小写。

我想知道是否有更有效的方法来做到这一点 - 我的工作表中有大约 150K 行。

完成需要一些时间，有时我会收到`Out of Memory`错误消息。

**第一个子**

```
Sub DeletingFl()
Dim ws1 As Worksheet
Dim rng1 As Range
Application.ScreenUpdating = False
Set ws1 = Sheets("Raw Sheet")

ws1.AutoFilterMode = False
Set rng1 = ws1.Range(ws1.[a1], ws1.Cells(Rows.Count, "A").End(xlUp))
rng1.AutoFilter 1, "Florida"
    If rng1.SpecialCells(xlCellTypeVisible).Count > 1 Then
    Set rng1 = rng1.Offset(1, 0).Resize(rng1.Rows.Count - 1)
    rng1.EntireRow.Delete
    End If
ws1.AutoFilterMode = False    
Call DeletingEC
End Sub

Sub DeletingEC()
Dim ws1 As Worksheet    
Dim rng1 As Range
Application.ScreenUpdating = False
Set ws1 = Sheets("Raw Sheet")

ws1.AutoFilterMode = False
Set rng1 = ws1.Range(ws1.[a1], ws1.Cells(Rows.Count, "A").End(xlUp))
rng1.AutoFilter 1, "East Coast"
If rng1.SpecialCells(xlCellTypeVisible).Count > 1 Then
    Set rng1 = rng1.Offset(1, 0).Resize(rng1.Rows.Count - 1)
    rng1.EntireRow.Delete
End If
ws1.AutoFilterMode = False
Worksheets("Raw Sheet").Activate    
Call Concatenating
End Sub 
```

**第二个子**

```
Sub Concatenating()

Columns(1).EntireColumn.Insert
Columns(2).EntireColumn.Copy Destination:=ActiveSheet.Cells(1, 1)

Dim lngLastRow As Long
lngLastRow = Cells(Rows.Count, "A").End(xlUp).Row

    Range("A2:A" & lngLastRow).Formula = "=F2 & ""_"" & G2"
Range("A1").Select
    ActiveCell.FormulaR1C1 = "Title"       
Call LowerCasing
End Sub

Sub Lowercasing()
Dim myArr, LR As Long, i As Long
       LR = Range("A" & Rows.Count).End(xlUp).Row
myArr = Range("A1:A" & LR)
       For i = 1 To UBound(myArr)
              myArr(i, 1) = LCase(myArr(i, 1))
       Next i
Range("A1:A" & LR).Value = myArr
Set ExcelSheet = Nothing
End Sub 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T13:57:42.497

使用电子表格来完成。我将一些数据放入，并在:`$A$1:$A$384188`中制作了一个数组公式。它是即时的，不会占用太多内存。`$B$1:$B$384188``{=UPPER($A$1:$A$384188)}`

循环通过 VBA 总是会慢得多，而且内存占用更多​​。您可以使用 VBA 创建公式并按值复制粘贴回数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T13:49:36.927

有时您会收到错误，因为您尝试将多少东西打包到一个数组中。您放入该数组的所有内容都必须适合您的可用内存。

像这样的东西应该会更好（注意这是未经测试的代码）：

```
Sub Lowercasing()
Const MaxArraySize As Integer = 1000
Dim myArr, Rng As Range, LR As Long, i As Long, j As Long, ArrayLen As Integer
       LR = Range("A" & Rows.Count).End(xlUp).Row
       Application.ScreenUpdating = False
       For i = 1 To LR Step MaxArraySize
           If LR - i < MaxArraySize Then
               ArrayLen = LR - i + 1
           Else
               ArrayLen = MaxArraySize
           End If
           Set Rng = Range("A" & i & ":A" & i + ArrayLen - 1)
           myArr = Rng
           For j = LBound(myArr) To UBound(myArr)
               myArr(j, 1) = LCase(myArr(j, 1))
           Next j
           Rng.Value = myArr
       Next i
       Application.ScreenUpdating = True
End Sub 
```

总体思路是在一系列较小的更新中进行更新。您可以使用 MaxArraySize 常量来在速度和内存使用之间找到良好的平衡。

您还需要添加一个错误处理程序，以确保在出现问题时重新打开 ScreenUpdating。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-13T14:13:15.297

看起来有一点冗余，而且阵列肯定有问题。

我认为你可以删除 Lowercasing() 函数并增强 Concatenating 为你做小写：

```
Sub Concatenating()
    Dim lRowCount As Long
    Dim lngLastRow As Long

    'Do this first while values in column A
    lngLastRow = Cells(Rows.Count, "A").End(xlUp).Row

    Columns(1).EntireColumn.Insert

    'Meh... :P
    'We're looping through code in the Lower Casing so no need to copy this and then loop through
    'Columns(2).EntireColumn.Copy Destination:=ActiveSheet.Cells(1, 1)

    For lRowCount = 1 To lngLastRow
        'I read a long time ago that LCase$ is faster than LCase; may not be noticable on today's machines
        'It wont' hurt to use LCase$
         Range("A" & lRowCount) = LCase$(Range("B" & lRowCount))
    Next lRowCount

        'Not sure what this does but may need to adjust accoringly
        Range("A2:A" & lngLastRow).Formula = "=F2 & ""_"" & G2"
        Range("A1").Select
        ActiveCell.FormulaR1C1 = "Title"

    'No need...already lower cased
    'Call Lowercasing
End Sub 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T13:54:47.740

这是另一种将列中每个单元格小写的方法，也许值得一试：

```
Public Sub toLowerCase()
    Dim lr As Integer
    For lr = 1 To Application.ActiveSheet.UsedRange.Rows.Count
       Application.ActiveSheet.Cells(lr, 1) = LCase(Application.ActiveSheet.Cells(lr, 1).Value)
    Next lr
End Sub 
```

这不是创建一个数组并重置范围，而是简单地使用 UsedRange 并随时设置值。这避免了对数组的需求，这在处理这种大小的数据时可能会出现问题。

仅供参考...我在您的代码片段中注意到您正在复制。如果您要对大量单元格进行复制，则设置每个单元格值（例如）比将一个单元格值复制到另一个单元格值**要快得多。**`cellTarget.Value = cellSource.Value`

另外，我注意到您将**ScreenUpdating**设置为 False ...您在哪里将其设置回 True？除了在这些大型计算期间切换 ScreenUpdating 之外，您可能还需要考虑[将**Calculation**设置为 manual](http://www.cpearson.com/excel/optimize.htm)。有时，当工作表获得如此多的活动时，Excel 会经常计算。通过将此设置为 manul，您可以避免开销。

这是一个使用上面相同代码片段的示例，但这次提供了 ScreenUpdating 和 Calculation 设置：

```
Public Sub toLowerCase()
    Dim lr As Integer
    Application.ScreenUpdating = False
    Application.Calculation = xlCalculationManual
    For lr = 1 To Application.ActiveSheet.UsedRange.Rows.Count
       Application.ActiveSheet.Cells(lr, 1) = LCase(Application.ActiveSheet.Cells(lr, 1).Value)
    Next lr
    Application.Calculation = xlCalculationAutomatic
    Application.ScreenUpdating = True
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T01:40:17.317

您可以在没有循环和工作列的情况下执行此操作

1.  将范围（单行或单列）转储到一维字符串数组中
2.  取字符串的小写字母并将其转储到范围内

*代码*

```
Sub NoLoops()
Dim rng1 As Range
Dim strOut As String
Dim strDelim As String

strDelim = ","
Set rng1 = Range([a1], Cells(Rows.Count, "A").End(xlUp))
X = LCase$(Join(Application.Transpose(rng1), strDelim))
rng1 = Application.Transpose(Split(X, strDelim))
End Sub 
```

*较短的版本*

```
Sub OneLine()
Range([a1], Cells(Rows.Count, "A").End(xlUp)) = Application.Transpose(Split(LCase$(Join(Application.Transpose(Range([a1], Cells(Rows.Count, "A").End(xlUp))), ",")), ","))
End Sub 
```

**`[Update for the 65536 cell limit with Transpose]`**

对于 150k 行，*考虑*到`Application Transpose`. 这是对“无循环”变成“最小循环”的恼人调整

```
Sub Transpose_Adjust()
Dim rng1 As Range
Dim rng2 As Range
Dim lngCnt As Long
Dim lngLim As Long
Dim lngCalac As Long
Dim strOut As String
Dim strDelim As String

With Application
.ScreenUpdating = False
.EnableEvents = False
lngCalc = .Calculation
.Calculation = xlCalculationManual
End With

strDelim = ","
Set rng1 = Range([a1], Cells(Rows.Count, "A").End(xlUp))
'TRANSPOSE limited to 65536 cells
lngLim = Application.Min(16, Int(rng1.Cells.Count / 2 ^ 16))
For lngCnt = 1 To lngLim
Set rng2 = rng1.Cells(1).Offset((lngCnt - 1) * 2 ^ 16, 0).Resize(2 ^ 16, 1)
X = LCase$(Join(Application.TransPose(rng2), strDelim))
rng2.Value2 = Application.TransPose(Split(X, strDelim))
Next lngCnt

With Application
.ScreenUpdating = True
.EnableEvents = True
Calculation = lngCalc
End With

End Sub 
```

# javascript - Chrome 扩展程序：如何获取表单并填写并提交

> ID：11934708
> 
> 赞同：0
> 
> 时间：2012-08-13T12:56:50.247
> 
> 标签：javascript, ajax, google-chrome-extension

我正在构建一个 chrome 扩展，我需要从网站获取 HTML。它有一个表格，需要填写并提交回来。

我单击扩展按钮，弹出窗口打开。我输入详细信息。它为我获取了一个网站，该网站有一个需要填写并提交回来的表格。我目前正在使用选项卡打开 URL，填写表格并将其提交回来，但我不希望用户看到所有发生的事情。

我也尝试过 Ajax，但不确定如何准确获取 HTML、填写输入并将其提交回来。

我尝试了 iFrames，但随后出现 Unsafe javascript 错误。不确定我是否要使用后台页面，因为它将始终在后台运行。

有什么方法可以让我在后台真正实现它吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:51:09.027

[Simple REST Client](https://chrome.google.com/webstore/detail/fhjcajmcbmldlhcimfajhfbgofnpcjmb)是一个扩展，它允许您做类似的事情，您可以查看它的源代码以获得一些想法。

另请参阅[Chrome 扩展开发 - 发布到新选项卡](https://stackoverflow.com/questions/7387217/chrome-extension-development-post-to-new-tab)，因为第一个答案向您展示了如何使用 JS 提交虚假表单。

# objective-c - 如何将 Scrollview 滚动到边界之外

> ID：11934711
> 
> 赞同：0
> 
> 时间：2012-08-13T12:57:00.727
> 
> 标签：objective-c, ios, cocoa-touch, uiscrollview, uikit

嗨，我的应用程序需要在水平列表中以中心焦点显示图像列表。使用`UIScrollView`and可以正常工作`PagingEnable=Yes`；现在我无法滚动显示在`UIScrollView`边界之外的内容。

如何将 UiscrollView 滚动到边界之外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:10:14.220

假设您有一个与图像高度相同的容器视图，但其大小使所有图像都可以放入其中。每个图像的帧都会有一个“x”偏移量，将其放在图像的末尾。现在假设您的容器中有 3 张图片，每张 320 宽，总共 960 张。

鉴于此，您必须设置 scrollView.contentSize = CGSizeMake(960, 320);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:05:43.457

在这里，我给出了一些关于如何水平管理滚动视图的教程，如下所示。

.h 文件包含

```
@property (nonatomic, strong) NSArray *arForImages; // array for storing images URL
@property (nonatomic, strong) IBOutlet UIScrollView *scrPage; // scroll view used as PageCtr
@property (nonatomic, strong) IBOutlet HJManagedImageV *imgV; // Image to display selected
@property (nonatomic, strong) IBOutlet UILabel *lblName; // label to display selected's title
@property (nonatomic, readwrite) NSUInteger currentPage; // to mantain current page 
```

.m 文件包含

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.arForImages = [NSArray arrayWithObjects:@"http://www.apple.com/in/iphone/iphone-3gs/images/iphone-phone-20100607.jpg",@"http://www.apple.com/in/iphone/iphone-3gs/images/iphone-ibooks-20100607.jpg",@"http://www.blogcdn.com/www.engadget.com/media/2007/01/apple-iphone-official-1.jpg",@"http://www.dailytechpost.com/wp-content/uploads/2011/08/iphone-3G1.jpg",@"http://www.iunlockiphone3g.com/wp-content/uploads/2011/01/Apple-Iphone-India-Launch1.jpg",@"http://st2.gsmarena.com/vv/pics/apple/apple-iphone-3g-01.jpg",@"http://resources.infosecinstitute.com/wp-content/uploads/iphone.jpg",@"http://bindapple.com/wp-content/uploads/2011/01/can-iphones-get-viruses1.jpg",@"http://www.coolpctips.com/wp-content/uploads/2011/08/iphone-mailbox.jpg",@"http://www.everymac.com/images/other_images/iphone-iphone-3g-comparison.jpg",@"http://iphone4issues.org/wp-content/uploads/2011/07/Iphone-4-Issues1.jpg",nil];

    [self setupImages];
} 
```

滚动视图的分页

```
#define kXDistance    5
#define kYDistance    5
#define kThumbWidth   58
#define kThumbHeight   58
#define kTagForImageView    10000

- (void)setupImages {
    // This will remove all subview from your scrollView
    [[self.scrPage subviews] makeObjectsPerformSelector:@selector(removeFromSuperview)];

    // set the content size of your scrollView to number of object that you have in your array
    self.scrPage.contentSize=CGSizeMake((self.arForImages.count+4)*63, 68);

    // we will start from two in this tutorial, you can start from one also.
    NSUInteger i=2; // images starting from location 2
    for (NSString *str in self.arForImages) {
        // buttons will have images within it &amp; we will add buttons to scrollView
        UIButton *btn=[UIButton buttonWithType:UIButtonTypeCustom];
        NSUInteger xVal=(i+1)*kXDistance;
        xVal = xVal + (i*kThumbWidth);
        [btn setFrame:CGRectMake(xVal, kYDistance, kThumbWidth, kThumbHeight)];
        btn.tag=i-1; // index tagging strating from 1

        HJManagedImageV *imgV=[[HJManagedImageV alloc] initWithFrame:CGRectMake(0, 0, kThumbWidth, kThumbHeight)];
        imgV.tag=kTagForImageView;
        imgV.url=[NSURL URLWithString:[self.arForImages objectAtIndex:i-2]];
        imgV.clipsToBounds=YES;
        imgV.layer.borderColor = [[UIColor blackColor] CGColor];
        imgV.layer.borderWidth = 1;
        imgV.layer.cornerRadius = 3;

        // here GlobalCacheManager is an object declared in AppDel which is accessed via a Constant
        [GlobalCacheManager manage:imgV];

        [btn addTarget:self action:@selector(btnTapped:) forControlEvents:UIControlEventTouchDown];
        [btn addSubview:imgV];

        [self.scrPage addSubview:btn];
        i++;
    }
    self.lblName.text=[[self.arForImages objectAtIndex:0] lastPathComponent];
    self.imgV.url=[NSURL URLWithString:[self.arForImages objectAtIndex:0]];
    [GlobalCacheManager manage:self.imgV];
    self.currentPage = 0;
}

- (void)btnTapped:(UIButton*)btn {
    self.scrPage.delegate=nil;
    CGRect rectToScroll = btn.frame;
    rectToScroll=CGRectMake(rectToScroll.origin.x-63-63, kYDistance, 320, 68);
    [self.scrPage scrollRectToVisible:rectToScroll animated:YES];
    self.lblName.text=[[self.arForImages objectAtIndex:btn.tag-1] lastPathComponent];
    self.imgV.url=[NSURL URLWithString:[self.arForImages objectAtIndex:btn.tag-1]];
    [GlobalCacheManager manage:self.imgV];
    [self.scrPage performSelector:@selector(setDelegate:) withObject:self afterDelay:0.3];
} 
```

希望这可能对您有所帮助。

# iphone - 在“id”类型的对象上找不到属性“长度”

> ID：11934712
> 
> 赞同：1
> 
> 时间：2012-08-13T12:57:02.810
> 
> 标签：iphone

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"CustomCell";

    CustomCell *cell = (CustomCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];
        for (id currentObject in topLevelObjects){
            if ([currentObject isKindOfClass:[UITableViewCell class]]){
                cell =  (CustomCell *) currentObject;
                break;
            }
        }
    }
    cell.nameLabel.text = [arrareasdata objectAtIndex:indexPath.row];
    cell.designLabel.text = [arrareasdata1 objectAtIndex:indexPath.row];

    if(([arrareasdata2 objectAtIndex:indexPath.row].length > 0)  
    {
        cell.emailLabel.text = [arrareasdata2 objectAtIndex:indexPath.row]
    }
    else
    {
        cell.emailLabel.text = @"";
    }

    cell.webLabel.text = [arrareasdata3 objectAtIndex:indexPath.row];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:02:40.210

问题就在这里

```
if(([arrareasdata2 objectAtIndex:indexPath.row].length > 0) 
```

您必须做的是从数组中获取对象并将其转换为适当的类型。例如，如果数组中的对象是`NSString`类型，则执行以下操作

```
NSString *value = (NSString*)[arrareasdata2 objectAtIndex:indexPath.row]; 
```

然后在你的 if 语句中检查长度

```
if (value.length > 0) 
```

# node.js - Mongoose 嵌入式文档查询返回 null

> ID：11934719
> 
> 赞同：0
> 
> 时间：2012-08-13T12:57:34.597
> 
> 标签：node.js, mongodb, mongoose

我有以下架构：

```
_schema : {

Prize : new Schema({
        prizeName : { type : String },
        thumbnailImage : [ String ],
        detailImage : [ String ],
        prizeCategory : [ {type : String, index : true } ],
        prizeDescription : { type : String },
        prizePrice : { type : Number, required : true }
    }),

Game : new Schema ({
        roomName : { type : String, required : true },
        openTime : { type : Date },
        closeTime : { type : Date },
        minPlayers : { type : Number },
        maxPlayers : { type : Number, required : true },
        numberOfPlayers : { type : Number },
        winner : { userId : { type : ObjectId, index : true, ref : 'User'} },
        prize : [ this.Prize ],
        tag : [ { type : String, index : true } ],
        status : { type : Number, index : true },
        businessType : { type : Number, required : true, index : true },
        mallId : { type : ObjectId, ref : 'Mall' },
        registeredPlayers : { type : ObjectId, ref : 'User' } 
    }),

Schedule : new Schema ({
        _id : ObjectId,
        time : { type : Date, index : true },
        game : [ this.Game ]
    }),

} 
```

但是，当我尝试查询游戏嵌入文档时，该对象始终为空。我这样查询：

```
var Schedule = mongoose.model('Schedule', this._schema.Schedule);

Schedule.findById({'game._id' : req.params._id}).exec(function(err,gameDetail){...}); 
```

当我声明模式和模型时，我做错了什么吗？我见过很多例子，人们似乎在做我正在尝试的事情。任何帮助将不胜感激！提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T02:49:02.240

猫鼬模型的[`findById`](http://mongoosejs.com/docs/api.html#model_Model-findById)方法用于查找该模型的实例，该实例`_id`作为该方法的第一个参数提供。所以`Schedule.findById`返回`Schedule`实例，而不是单个`Game`实例。 `Schedule.findOne({'game._id' : req.params._id}, ...`将为您提供*包含*具有该 id的`Schedule`实例，但如果您需要按 id 查询实例，您应该将它们保存在单独的集合中，而不是将它们嵌入到.*`Game``Game``Schedule`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:11:39.053

查看您的代码，我的第一个猜测实际上是您`findById`的结构不太正确。

首先，您使用该值`req.params._id`来获取 id。我见过的大多数代码示例以及我的代码`:id`都在路由器 ( `app.get('/schedules/:id')`) 中使用，这实际上意味着您要查找的 ID 存储在`req.params.id`. 你必须在你的代码中检查它。

其次，据我了解，在这种情况下，findById 仅对通过该 ID 查找计划有用。尝试仅使用普通查找。

最后的想法：您在`{'game._id' : req.params._id}`.

希望其中有所帮助。:)*

# dust.js - 何时以及如何调用dust.render

> ID：11934726
> 
> 赞同：2
> 
> 时间：2012-08-13T12:57:46.963
> 
> 标签：dust.js

我已经编写了灰尘 js，我从我的 jquery 本地函数中调用了渲染函数。

任何人都请举例说明灰尘渲染如何返回。我是否需要调用 onload 函数？

```
 dust.render("tmp_skill", json_object, function(err, html_out) {
          //HTML output
             $('#page').html(html_out);
              console.log(html_out);
          }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T18:33:53.533

你的代码没问题，你可以随时调用 render 方法。如果您在 onload 中调用它，则必须先在灰尘缓存中编译并加载该模板（tmp_skill）。

渲染灰尘的步骤是：

1) 编译模板 2) 将其加载到具有名称的灰尘缓存中。3) 渲染模板

所以

```
var compiled = dust.compile("Hello world {name}", "tmp_skill");

dust.loadSource(compiled);

dust.render("tmp_skill", json_object, function(err, html_out) {
      //HTML output
         $('#page').html(html_out);
          console.log(html_out);
      }); 
```

您需要的任何内容都可以阅读我们的 wiki。你会在这里找到很多文档和示例： [https ://github.com/linkedin/dustjs/wiki](https://github.com/linkedin/dustjs/wiki)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:45:28.883

我想这个问题与你之前的问题有关，[How to writedustjs in php code without nodejs](https://stackoverflow.com/questions/11909293/how-to-write-dustjs-in-php-code-without-nodejs)

我测试了你的代码，它工作得很好。

请检查浏览器的控制台以查看加载页面后是否有错误。

另外，请使用linkedin fork ofdust：[https](https://github.com/linkedin/dustjs) ://github.com/linkedin/dustjs - 它的开发更加积极。

# php - 正则表达式：否定断言

> ID：11934744
> 
> 赞同：2
> 
> 时间：2012-08-13T12:59:15.440
> 
> 标签：php, regex

我坚持使用简单的正则表达式来匹配内容中的 URL。目标是从“/folder/id/123”之类的链接中删除该文件夹，并将其替换为“id/123”，因此它是同一文件夹中的一个相对较短的文件夹。

其实我做到了

```
$pattern = "/\/?(\w+)\/id\/(\d)/i"
$replacement = "id/$2";
return preg_replace($pattern, $replacement, $text); 
```

它似乎工作正常。

但是，我要进行的最后一个测试是测试每个匹配的 url 是否不包含 http://，如果它是也使用相同模式 /folder/id/123 的外部站点。

我尝试了 /[^http://] 或 (?<!html)... 和不同的东西，但没有成功。任何帮助都会非常好:-)

```
 $pattern = "/(?<!http)\b\/?(\w+)\/id\/(\d)/i"; ??????? 
```

谢谢 ！

以下是一些示例：非常感谢您的帮助:-)

```
(these should be replaced, "same folder" => short relative path only)
<a href="/mysite_admin/id/414">label</a> ==> <a href="id/414">label</a>
<a href="/mYsITe_ADMIN/iD/29">label with UPPERCASE</a> ==> <a href="id/414">label with UPPERCASE</a>

(these should not be replaced, when there is http:// => external site, nothing to to)
<a href="http://mysite_admin/id/414">label</a> ==> <a href="http://mysite_admin/id/414">label</a>
<a href="http://www.google_admin.com">label</a> ==> <a href="http://www.google_admin.com">label</a>
<a href="http://anotherwebsite.com/id/32131">label</a> ==> <a href="http://anotherwebsite.com/id/32131">labelid/32131</a>
<a href="http://anotherwebsite_admin.com/id/32131">label</a> ==> <a href="http://anotherwebsite_admin.com/id/32131">label</a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T13:31:00.963

不需要`<`用于标记`look-back`断言的 ，仅用`/^(?!http)\/?(\w+)\/node\/(\d)/i`作模式，它匹配 /foo/bar/123，但不匹配[http://www.google.com/foo/bar/123](http://www.google.com/foo/bar/123)

[这个问题](https://stackoverflow.com/questions/3092797/how-does-the-regular-expression-work/)提供了一个很好的概述，可以帮助你解决这个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T13:30:23.887

From the fine PHP manual - [Assertions](http://www.php.net/manual/en/regexp.reference.assertions.php):

> Note that the apparently similar pattern (?!foo)bar does not find an occurrence of "bar" that is preceded by something other than "foo"; it finds any occurrence of "bar" whatsoever, because the assertion (?!foo) is always TRUE when the next three characters are "bar". A lookbehind assertion is needed to achieve this effect.

such as:

```
$pattern = "/(?<!http:\/)\/(\w+)\/id\/(\d)/i"; 
```

# c++ - 将固定长度的字符数组分配给字符串

> ID：11934746
> 
> 赞同：2
> 
> 时间：2012-08-13T12:59:19.887
> 
> 标签：c++, string

我有一个固定长度的字符数组，我想分配给一个字符串。如果字符数组已满，则会出现问题，分配失败。我想过在你可以提供的地方使用assign，`n`但是忽略`\0`s。例如：

```
std::string str;
char test1[4] = {'T', 'e', 's', 't'};
str.assign(test1);    // BAD "Test2" (or some random extra characters)
str.assign(test1, 4); // GOOD "Test"
size_t len = strlen(test1); // BAD 5

char test2[4] = {'T', 'e', '\0', 't'};
str.assign(test2);    // GOOD "Te"
str.assign(test2, 4); // BAD "Tet"
size_t len = strlen(test2); // GOOD 2 
```

对于这两种情况，如何正确地将固定长度的字符数组分配给字符串？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T13:15:31.270

使用“一对迭代器”形式的赋值。

```
str.assign(test1, std::find(test1, test1 + 4, '\0')); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T13:01:46.347

C++ 中的字符缓冲区是非此即彼的：要么以空结尾，要么不以空结尾（并且是固定长度）。因此不建议以您的方式混合它们。如果您绝对需要这个，在达到最大长度或空终止符之前，似乎没有其他选择可以手动复制。

```
for (char const* i = test1; i != test1 + length and *i != '\0'; ++i)
    str += *i; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T13:02:41.903

您想要 NULL 终止*和*固定长度？这是非常不寻常的，不推荐。您必须编写自己的函数和`push_back`每个单独的字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T13:03:27.010

对于第一种情况，当您执行 str.assign(test1) 和 str.assign(test2) 时，您的数组中必须有 /0，否则这不是“char*”字符串，您不能将其分配给std::string 像这样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T13:10:29.617

看到您的序列化注释-使用`std::vector<char>`,`std::array<char,4>`或仅使用 4 字符数组或容器。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-13T13:20:20.830

您的第二个“坏”示例-打印出“Tet”的示例-确实有效，但是您必须小心检查它的方式：

```
str.assign(test2, 4); // BAD "Tet"
cout << "\"" << str << "\"" << endl; 
```

确实复制了四个字符。如果你`od`在 Linux 上通过八进制转储（）运行它，使用`my.exe | od -c`你会得到：

```
0000000   "   T   e  \0   t   "  \n
0000007 
```

# mysql - MySQL：按类别计算项目

> ID：11934748
> 
> 赞同：0
> 
> 时间：2012-08-13T12:59:28.187
> 
> 标签：mysql, sql, timestamp, counter, minimum

我创建了一个根据类别保存项目的表：

```
+------------+---------------------+------+-----+-------------------+----------------+
| Field      | Type                | Null | Key | Default           | Extra          |
+------------+---------------------+------+-----+-------------------+----------------+
| id         | bigint(20) unsigned | NO   | PRI | NULL              | auto_increment |
| name       | varchar(30)         | YES  |     | NULL              |                |
| category   | varchar(30)         | YES  | MUL | NULL              |                |
| timestamp  | timestamp           | NO   |     | CURRENT_TIMESTAMP |                |
| data       | mediumblob          | YES  |     | NULL              |                |
+------------+---------------------+------+-----+-------------------+----------------+ 
```

使用[滑动窗口技术](https://dba.stackexchange.com/questions/20036/implementing-a-circular-buffer-sliding-window-in-mysql#comment33749_20036)删除旧数据，这意味着只有`N`每个类别中的最后一项保留在表中。

如何跟踪每个类别的项目总数以及该类别中第一个项目的时间戳？

**编辑**-在原始表`COUNT`上`MIN`不起作用，因为这是一个滑动窗口数据结构，这意味着第一个项目已经被删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:17:19.080

显然，当您删除记录时，您需要保留一个单独的表。您的表格应总结类别并包括以下字段：

*   类别首次开始时间
*   类别中的项目总数

等等。

当你去删除时，你需要更新这个表。一般来说，我更喜欢使用存储过程来处理数据库维护，因此可以将这段代码添加到存储过程中。其他人更喜欢触发器，因此您可以拥有一个执行相同操作的删除触发器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:01:48.997

尝试`SELECT count(id) FROM table GROUP BY category`

# java - 奇怪的 SQL 浪费了我的资源

> ID：11934749
> 
> 赞同：0
> 
> 时间：2012-08-13T12:59:34.303
> 
> 标签：java, oracle, tomcat, odbc

我在 11.2.0.3 数据库上遇到了一个问题，一个奇怪的查询占了总数据库活动的 47.42%。

该应用程序是使用 Flex 开发的，前端是 Apache Tomcat 6.0.35，Java 版本为 1.6.0_27。

我在几个网站上搜索过，发现其他人有同样的问题，即使在这个网站上（[神秘的 SQL 阻止我的存储过程在 ORACLE 上执行](https://stackoverflow.com/questions/3894896/mysterious-sql-blocking-my-stored-procedure-from-executing-on-oracle)），但到目前为止没有找到解决方案:-(

查询是：

```
 SELECT package_name AS procedure_cat,
            owner AS procedure_schem,
            object_name AS procedure_name,
            argument_name AS column_name,
            DECODE(position,
                     0, 5,
                        DECODE(in_out,
                                 'IN',     1,
                                 'OUT',    4,
                                 'IN/OUT', 2,
                                           0)) AS column_type,
            DECODE (data_type,
                      'CHAR', 1,
                      'VARCHAR2', 12,
                      'NUMBER', 3,
                      'LONG', -1,
                      'DATE', 91,
                      'RAW', -3,
                      'LONG RAW', -4,
                      'TIMESTAMP', 93,
                      'TIMESTAMP WITH TIME ZONE', -101,
                      'TIMESTAMP WITH LOCAL TIME ZONE', -102,
                      'INTERVAL YEAR TO MONTH', -103,
                      'INTERVAL DAY TO SECOND', -104,
                      'BINARY_FLOAT', 100,
                      'BINARY_DOUBLE', 101,
                                       1111) AS data_type,
            DECODE(data_type,
                     'OBJECT', type_owner || '.' || type_name,
                               data_type) AS type_name,
            DECODE (data_precision,
                      NULL, data_length,
                            data_precision) AS precision,
            data_length AS length,
            data_scale AS scale,
            10 AS radix,
            1 AS nullable,
            NULL AS remarks,
            sequence,
            overload,
            default_value
  FROM all_arguments
  WHERE owner LIKE :1 ESCAPE '/'
        AND object_name LIKE :2 ESCAPE '/'
        AND package_name IS NULL
        AND (argument_name LIKE :5 ESCAPE '/'
             OR (argument_name IS NULL
                 AND data_type IS NOT NULL))
  ORDER BY procedure_schem, procedure_name, overload, sequence 
```

我想知道是否有人找到了解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-08T22:43:25.053

您的代码是否使用了 Spring 的 SimpleJdbcCall 类？此类尝试获取有关存储过程的信息并缓存结果。因此，请确保您将 SimpleJdbcCall 类实例化一次，并在每次调用存储过程时重用它。

或者，您可以在构造 SimpleJdbcCall 对象时调用 withoutProcedureColumnMetaDataAccess()。

# json - ServiceNow - JSON Web Service，显示相关表格

> ID：11934752
> 
> 赞同：1
> 
> 时间：2012-08-13T13:00:00.573
> 
> 标签：json, web-services, join, servicenow

我正在开发一个 C# 程序，该程序从 ServiceNow 数据库中检索数据并将该数据转换为 C# .NET 对象。我正在使用 JSON Web 服务以 JSON 格式返回我的数据。

我想要实现的目标如下：如果值之间存在关系映射（例如：我有一个名为 Company 的表，其中 CEO 不是 TEXT 字段而是 sys_id 到 Employee 表）我希望能够不使用 sys_id 输出该数据（或仅使用 'displayvariable' 参数显示名称属性），而是使用 JSON 中显示的对象。

这意味着属性的值应该是 JSON 中的对象，而不仅仅是单个值。

几个例子：

```
// I don't want the JSON like this
{"Company":{"CEO":"b181e841c9212c008aeb36850331fab2"}}

// Or by displaying the name of the sys_id table
{"Company":{"CEO":"James Henderson" }}

// I want the data as follows, so I can have all the data I need inside a single JSON record.
{"Company":{"CEO":{"name":"James Henderson", "age":34, "sex":"male", "office":"SBN Left Floor 23"}}} 
```

通过阅读文档，我在 JSON Web 服务中找不到任何可以显示此类信息的内容，也找不到任何其他替代方法。它应该与加入表格并以正确的格式显示所有内容有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T23:12:12.660

我已经使用 SNC 快三年了，还没有发现您可以在 Web 服务中自动加入表格。您最好的选择是使用可能需要查询参数和表参数的脚本化 Web 服务。然后，您可以按照您认为合适的方式对结果进行 json 序列化。

或者，另一种选择是生成一个将遍历 GlideRecord 对象的新处理器。您传递给 URL 的 ?JSON 参数只是一个标志，用于将您的请求传递给特定的处理器。不幸的是，我认为 OOB 是一个 Java 类而不是 JS 脚本，因此您需要像我之前提到的那样编写一个脚本来遍历将对象图序列化到尽可能远的对象路径。

# api - 是否可以准确指定发送 HTTP 错误代码的原因？

> ID：11934759
> 
> 赞同：1
> 
> 时间：2012-08-13T13:00:35.177
> 
> 标签：api, http, rest, error-handling

如果您运行 API 服务器，然后客户端发送错误请求，您通常会向他发送`400 Bad Request`错误，但如果您将消息更改为更具体的消息是否可以接受？

例子：

*   `400 Invalid ID`
*   `400 Parameter x, y, z is required`
*   `400 Minimum length for parameter is x`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T13:51:57.420

附加信息的规范位置是响应主体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T13:07:09.647

使用您自己的代码是[有先例的（这对于日志文件分析很方便），但是在响应中添加您喜欢的任何描述都没有错。](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)

# core-data - 嵌套对象/NSSet 上的 NSPredicate 用于在 NSFetchRequest 期间过滤结果

> ID：11934763
> 
> 赞同：1
> 
> 时间：2012-08-13T13:00:57.573
> 
> 标签：core-data, filter, nspredicate, nsfetchrequest, nested-set-model

我想要一个简单的谓词，它返回所有模式 = 0 且组中注册模式 = 0 的组

准确地说，我需要一个谓词来访问嵌套对象属性。不知何故，像这样的谓词：

```
[NSPredicate predicateWithFormat:@"mode = 0 AND enrollments.Enrollment.mode = 0"] 
```

上述谓词是错误的，显然不起作用。

***编辑：***

我也尝试了以下谓词，但没有成功。

```
[NSPredicate predicateWithFormat:@"mode = 0 AND ALL ( SUBQUERY(enrollments,$varEnrollment,$varEnrollment.mode = 0))"] 
```

我需要包含所有活动组（group.mode = 0）和所有活动参与者（enrolles.mode = 0）的结果，但对我来说，这个谓词不起作用。

![](../Images/c8272da38244dc9883a7888619e78e58.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T13:24:44.283

从你的问题和评论我**猜**你想要

```
[NSPredicate predicateWithFormat:@"mode = 0 AND (ALL enrollments.mode = 0)"] 
```

**更新**

似乎 ALL 聚合不起作用。它抛出

```
'NSInvalidArgumentException', reason: 'Unsupported predicate (null)' 
```

正如@yunas 注意到的那样。之前也注意到了这一点，例如

*   [核心数据、NSPredicate 和多对多键](https://stackoverflow.com/questions/1164338/core-data-nspredicate-and-to-many-key)
*   [使用聚合操作崩溃：Core Data iOS 应用程序中的“ALL”](https://stackoverflow.com/questions/5922139/crash-using-aggregate-operation-all-in-a-core-data-ios-application)

另一方面，ANY 聚合工作得很好。因此，作为**WORKAROUND**，可以将 ALL 替换为等效的 ANY 表达式：

```
[NSPredicate predicateWithFormat:@"mode = 0 AND NOT(ANY enrollments.mode != 0)"]; 
```

这实际上有效（我已经测试过了）！

**更新 2**

在讨论过程中，很明显 yunas 想要显示一个表格，其中每个组的模式=0，并且在表格行中显示该组的所有注册，模式=0。

*第一个解决方案（可能更好）：*首先用上面给出的方法找到所有可接受的组。对于每一行 (in `cellForRowAtIndexPath:`)，过滤该组的注册并绘制单元格。

*第二种解决方案：*获取所有注册并按组排序。这只需要一个 fetch 请求，但结果不太适合作为 table view 数据源。获取请求如下所示：

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Enrollment"];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"mode = 0 AND group.mode = 0"];
request.predicate = predicate;
NSSortDescriptor *sort1 = [NSSortDescriptor sortDescriptorWithKey:@"group.name" ascending:YES];
NSSortDescriptor *sort2 = [NSSortDescriptor sortDescriptorWithKey:@"share" ascending:YES];
request.sortDescriptors = [NSArray arrayWithObjects:sort1, sort2, nil]; 
```

# jquery - 如何创建带有 taglib 前缀的 jquery 元素？

> ID：11934770
> 
> 赞同：3
> 
> 时间：2012-08-13T13:01:22.257
> 
> 标签：jquery, spring, jsp, taglib

是否可以创建一个带有 spring taglib 前缀的 jquery 元素？

在我的 jsp 中，我有我的 taglib

```
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%> 
```

我想做：

```
 $('<form:input/>', {type: "hidden", prefix: "form", path: "critList["+j+"].attrib", value : splitted[0]  }).appendTo("form[name='cisManagerForm']");
             $('<form:input/>', {type: "hidden", prefix: "form", path: "critList["+j+"].operator", value : splitted[1]  }).appendTo("form[name='cisManagerForm']");
             $('<form:input/>', {type: "hidden", prefix: "form", path: "critList["+j+"].value1", value : splitted[2]  }).appendTo("form[name='cisManagerForm']"); 
```

但是当我尝试在 Apache 中部署页面时，“form:input”符号出现错误。如果我没有在输入中添加“表单”前缀，则输入值似乎不会发送到我在 java/spring 上的服务器代码。

有什么建议么？

* * *

顺便说一句，为问题添加更多上下文。我的目标是能够在服务器端填充 AutoPopulatingList，基于我在客户端使用 javascript 所做的数据转换（同时我正在使用相同的 POST 向服务器发送一些其他数据）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T15:25:15.557

使用 javascript 为您的表单元素创建 spring 标记标记会使您的 html 无效。

如果我理解正确，您希望使用 javascript 在客户端动态构建表单，并希望绑定在服务器端创建的新元素。如果是这样，除了遍历请求参数中的项目之外，没有简单的答案...例如

```
Enumeration en = request.getParameterNames();
ArrayList params = new ArrayList();
while (en.hasMoreElements())
{
    String name = (String)en.nextElement();
    NameValuePair pair = new NameValuePair(name, request.getParameter(name));
    params.add(pair);
} 
```

# curl - cURL 和 DOM 文档

> ID：11934773
> 
> 赞同：0
> 
> 时间：2012-08-13T13:01:35.893
> 
> 标签：curl, domdocument

我需要 cURL 和 DOMdocument 的帮助。如何获取隐藏输入元素的值？因为值是可变的，所以我不能选择带有 cURL 的值！？这是表格：

```
<form action=​"test.php" method=​"post">​
<input type=​"submit" value=​"Doorgaan">​
<input type=​"hidden" name=​"q" value=​"07ojc71sie1ysxikw4kvn5i3eb5nw6exd3gpahisvjqoh99ddt9">​
</form>​ 
```

有人可以帮我吗？

提前致谢！问候，

乔迪·范·坎普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:49:36.663

将 cURL 与[xmllint](/questions/tagged/xmllint "显示标记为“xmllint”的问题")的 xpath 一起使用。这只会显示带有“隐藏”属性的 HTML 元素“输入”

```
shell~> curl http://example.org/ | xmllint --html --xpath "//input[@type='hidden']" - 
```

要提取[xpath](/questions/tagged/xpath "显示标记为“xpath”的问题")返回的项目的值，请使用[awk](/questions/tagged/awk "显示标记为“awk”的问题")或[sed](/questions/tagged/sed "显示标记为“sed”的问题")

```
shell~> curl http://example.org/ | \
        xmllint --html --xpath "//input[@type='hidden']" - | \
        sed 's/.*value="\(.*\)".*/\1/' 
```

# r - rbinding 基于嵌套顺序的数据框列表列表

> ID：11934774
> 
> 赞同：0
> 
> 时间：2012-08-13T13:01:37.407
> 
> 标签：r, list, dataframe, plyr

我有一个数据框`df`和一个返回两个数据框列表的函数`process`，`a`以及`b`. 我使用 dlply 拆分`df`id 列，然后返回数据帧列表的列表。这是近似实际数据和方法的示例数据/代码：

```
df <- data.frame(id1=rep(c(1,2,3,4), each=2))

process <- function(df) {
  a <- data.frame(d1=rnorm(1), d2=rnorm(1))
  b <- data.frame(id1=df$id1, a=rnorm(nrow(df)), b=runif(nrow(df)))
  list(a=a, b=b)
}

require(plyr)
output <- dlply(df, .(id1), process) 
```

`output`是数据框列表的列表，嵌套列表将始终有两个数据框，名为`a`和`b`。在这种情况下，外部列表的长度为 4。

我要生成的是一个包含所有数据帧的`a`数据帧，以及一个`id`指示它们各自值的列（我相信这作为属性留在列表中`split_labels`，请参阅 str（输出））。然后对于数据帧也是`b`如此。

到目前为止，我已经部分使用这个[问题](https://stackoverflow.com/questions/1652522/rbind-dataframes-in-a-list-of-lists)来提出这个代码：

```
list <- unlist(output, recursive = FALSE)
list.a <- lapply(1:4, function(x) {
  list[[(2*x)-1]]
})
all.a <- rbind.fill(list.a) 
```

这给了我最终的`a`数据框（同样也`b`有不同的下标 into `list`），但是它没有我需要的 id 列，我很确定必须有一个更直接或更优雅的解决方案。理想情况下使用干净的东西`plyr`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:31:02.173

不是很干净，但您可以尝试这样的事情（假设相同的数据生成过程）。

```
list.aID <- lapply(1:4, function(x) {
cbind(list[[(2*x) - 1]], list[[2*x]][1, 1, drop = FALSE])
})

all.aID <- rbind.fill(list.aID)
all.aID

all.aID
        d1       d2 id1
1  0.68103 -0.74023   1
2 -0.50684  1.23713   2
3  0.33795 -0.37277   3
4  0.37827  0.56892   4 
```

# image - wordpress 通过 alt 获取所有图片

> ID：11934776
> 
> 赞同：0
> 
> 时间：2012-08-13T13:01:40.383
> 
> 标签：image, wordpress, loops

我有很多帖子，里面有很多图片。我在 alt 字段中为每个图像标记了一种颜色。所以每个图像都有颜色。

现在我需要找到并显示基于该颜色的所有图像。而且我希望仍然能够链接到它的父帖子。所以我根据 alt 标签的内容搜索所有 wordpress 图像。

这可能需要一些嵌套循环，我不确定。我怀疑有一种优雅的方法可以做到这一点。

任何人都可以帮助我，应该是这样的：

```
<a href="link to post"><img src="img source" alt="blue" /></a>
<a href="link to post"><img src="img source" alt="blue" /></a>
<a href="link to post"><img src="img source" alt="blue" /></a>
<a href="link to post"><img src="img source" alt="blue" /></a>
<a href="link to post"><img src="img source" alt="blue" /></a>
<a href="link to post"><img src="img source" alt="blue" /></a> 
```

我没有其他 php 标记，我不知道从哪里开始

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:11:23.093

试试这个`jQuery`解决方案

```
var imgs = $('img[alt|="blue"]');
alert(imgs.length); 
```

有关此选择器的更多信息，请转到[此处](http://api.jquery.com/attribute-contains-prefix-selector/)。

如果你想使用纯 JavaScript 解决方案，试试这个

```
var imgs = document.getElementsByTagName("img");
var imgsBlue = [];
for (var i = 0; i < imgs.length; i++) {
  if (imgs[i].alt == 'blue')
      imgsBlue.push(imgs[i]);
}
alert(imgsBlue.toString()); 
```

# ruby-on-rails - 如何从多项选择中存储数组

> ID：11934786
> 
> 赞同：0
> 
> 时间：2012-08-13T13:01:55.753
> 
> 标签：ruby-on-rails, arrays, postgresql, haml

我目前正在使用这个选择`= select(:schedule, :selected_players, @players.map { |p| [full_name(p), p.id] }, {:include_blank => 'None'}, "data-placeholder" => 'Add Players to Lineup', :prompt => 'Add Players to Lineup', :multiple => "multiple")`

并希望将信息存储到数据库中的数组中，然后访问该数组以获取站点的不同部分

有一份我需要知道的事情的副本

1.  如何最好地存储到数据库中，当前这个字段值是二进制的
2.  然后如何从数组中提取每个值

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T13:08:48.023

听起来像你想要[`serialize`](http://apidock.com/rails/ActiveRecord/AttributeMethods/Serialization/ClassMethods/serialize)的。

如果您将该`selected_players`列设为文本列并`Schedule`使用

```
serialize :selected_players 
```

然后，您可以将 Ruby 数组保存到属性中。它将以 YAML 形式写入数据库，并在您读取时以数组的形式完全弹出。

# c# - Web 服务 - 400 错误请求

> ID：11934788
> 
> 赞同：1
> 
> 时间：2012-08-13T13:01:59.227
> 
> 标签：c#, php, web-services

我想使用受 htaccess 保护的 C# 中的 php Webservice。我通过在我的 VS 2010 中添加 Web 引用来添加服务。

```
mywsfromwsdl myws = new mywsfromwsdl();

System.Net.CredentialCache myCredentials = new System.Net.CredentialCache();
NetworkCredential netCred = new NetworkCredential("user", "pass");
myCredentials.Add(new Uri(myws.Url), "Basic", netCred);
myws.Credentials = myCredentials;
myws.PreAuthenticate = true;

tbxIN.Text = "<?xml version=\"1.0\" encoding=\"UTF-8\"?> "+
            " <test> "+
            " <parm1>4</parm1>  "+
            " <parm1>2</parm1>  "+
            "  </test>";

tbxOUT.Text= myws.func1(tbxIN.Text.ToString()); 
```

VS 在我的最后一行显示一个名为 400 Bad REquest 的错误。如果我删除服务器上的 .htaccess 文件，pgm 工作正常，但我无法删除。因为其他 PHP 用户使用该服务。

谁能告诉我如何正确发送凭据？

由乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:42:43.817

根据 MSDN，您不需要凭据缓存：

```
 // Set the client-side credentials using the Credentials property.
 ICredentials credentials = new NetworkCredential("Joe",SecurelyStoredPassword,"mydomain");
 math.Credentials = credentials; 
```

您是否尝试过这种方法而不是缓存对象？更多信息可以在[这里](http://msdn.microsoft.com/en-us/library/system.web.services.protocols.webclientprotocol.credentials.aspx)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:23:34.857

有时 C# 和 Apache 会发生一些冲突：在这种情况下，可能是`100 Continue`由于身份验证处于活动状态，您的客户端期待响应，但服务器没有发送它。

这种行为由这一行切换：

```
ServicePointManager.Expect100Continue = false; 
```

在执行请求之前添加它。

还值得指出的是，当`400 bad request`发生这种情况时，您可能会在服务器的日志中找到一些有用的详细信息。

# java - 在 jexcelapi 中抓取一个非英文字符

> ID：11934790
> 
> 赞同：1
> 
> 时间：2012-08-13T13:02:01.863
> 
> 标签：java, excel, apache-commons, jexcelapi, apache-commons-lang

我有一张 Excel 表，里面有一些非英文字符，当我尝试通过

```
sheet.getColumn(column)[row].getContents() 
```

它返回带有替换字符 \uFFFD 的字符串，而不是我将使用 StringEscapeUtils.escapeJava 转换为 unicode 的非英语字符。

```
//"L\u00F6schen" - correct
return StringEscapeUtils.escapeJava("Löschen"); 

//"L\uFFFDschen" - incorrect
return StringEscapeUtils.escapeJava(sheet.getColumn(column)[row].getContents());

//"L�schen" - incorrect
System.out.print(sheet.getColumn(column)[row].getContents()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:55:34.410

这真是令人沮丧，似乎 jexcelapi 缺少很多支持。

改用[Apache POI](http://poi.apache.org/)，它运行良好，没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-30T15:40:41.083

初始化 Workbook 时尝试通过 WorkbookSettings 设置编码。例如：

```
WorkbookSettings settings = new WorkbookSettings();
settings.setEncoding("Your java charset name");
Workbook workbook = Workbook.getWorkbook(source, settings); 
```

然后 getContents() 方法应该更正单元格的内容

# regex - 正则表达式在字符串的第 n 个字符处或之前查找空格

> ID：11934792
> 
> 赞同：5
> 
> 时间：2012-08-13T13:02:04.593
> 
> 标签：regex, notepad++

我需要在字符串的第 n 个字符处或之前找到空格字符。

示例，假设 n 为 20：在字符串中

```
 Find one space in the right place
^         ^       ^ ^
0         10      M 20 
```

*h*位于第 20 位，在这种情况下，我需要在第 20 位之前找到第一个空格，即第 18 位“the”之前的第一个空格，就在**M**上方。

我可以使用积极的lookbehinds找到第n个字符

```
(?<=.{80}). 
```

**但后来我需要回去，直到我找到第一个空格字符**，我不知道怎么做。

我正在使用不支持可变长度后视的记事本++，如果可能的话，我想要一个允许我在记事本++中使用正则表达式的答案。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T13:14:04.403

您可以使用此正则表达式（在引号内但不包括引号）：

```
"^.{1,19} " 
```

注意最后的空格。

我已经使用 Notepad++ 6.1.5（发布时的最新版本）对此进行了测试。根据[功能列表](http://notepad-plus-plus.org/features.html)，正则表达式与 PCRE 兼容（后视工作，但仅固定宽度）。上面的正则表达式不适用于我当前拥有的旧版本（Notepad++ 5.9）。

由于您需要用其他内容替换空格，因此您可能希望使用捕获组来保留文本并仅替换空格（在引号内但不包括引号）：

```
"^(.{1,19}) " (Find)
"\1replace_space" (Replace) 
```

注意：正则表达式将在第 20 个字符之前或之前搜索空格。如果您希望空格严格在第 20 个字符之前，请将 19 更改为 18。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-13T13:14:15.840

对于**n = 20**，使​​用正则表达式`(\s)\S*.(?<=^.{20})`

# sql - 如何从 SQL Server 2008 中的 XML 文档中选择每个标签？

> ID：11934793
> 
> 赞同：5
> 
> 时间：2012-08-13T13:02:11.613
> 
> 标签：sql, xml, sql-server-2008

我正在寻找是否可以在 T-SQL 中进行查询，该查询将从我的 XML 文档的**每个**标记中选择值。

我不知道可以有多少个标签，也不知道它们的名字，因为它应该是动态的......它不是重要的输出格式（它可以稍后被操纵），唯一重要的是我从每个标签中获取数据 :)

*谢谢*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:39:04.467

你可以尝试这样的事情：

```
DECLARE @input XML = '..... add your XML here........'

SELECT 
    NodeName = Nod.value('local-name(.)', 'varchar(50)'),
    NodeValue = Nod.value('.', 'varchar(50)')
FROM @input.nodes('//*') AS TBL(Nod) 
```

这将在您的 XML 中列出所有节点 - 名称和值。

警告：我只是`varchar(50)`在这里随机选择了 XML 节点元素的数据类型。如果这不适合您 - 根据需要进行调整！由于您一次将它们全部转换，因此您必须将它们全部转换为相同的数据类型——这`varchar`似乎是一个相当安全的选择:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:41:08.913

```
declare @xml xml

select 
    x.n.query('local-name(.)'),
    x.n.value('(text())[1]','varchar(100)')
from @xml.nodes('//.') x(n) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T14:01:49.640

您可以使用[`openxml`](http://msdn.microsoft.com/en-us/library/ms186918.aspx)获取**边缘**表。它将为您提供节点值和属性值。如果您有混合了节点和文本的复杂 XML，您将获得拆分为单独行的值。

```
declare @xml xml

set @xml = 
'<root Attrib="RootAttribute">
  <item>Value item 1</item>
  <item>
    Value item 2
      <subitem>sub value in 2</subitem>
    More text in item 2
  </item>
 </root>'

declare @idoc int
exec sp_xml_preparedocument @idoc out, @xml

select *
from openxml(@idoc, '')

exec sp_xml_removedocument @idoc 
```

结果：

```
id parentid nodetype localname prefix namespaceuri datatype prev text
0  NULL     1        root      NULL   NULL         NULL     NULL NULL
2  0        2        Attrib    NULL   NULL         NULL     NULL NULL
8  2        3        #text     NULL   NULL         NULL     NULL RootAttribute
3  0        1        item      NULL   NULL         NULL     NULL NULL
9  3        3        #text     NULL   NULL         NULL     NULL Value item 1
4  0        1        item      NULL   NULL         NULL     3    NULL
6  4        3        #text     NULL   NULL         NULL     NULL Value item 2
5  4        1        subitem   NULL   NULL         NULL     6    NULL
10 5        3        #text     NULL   NULL         NULL     NULL sub value in 2
7  4        3        #text     NULL   NULL         NULL     5    More text in item 2 
```

# javascript - JavaScript Getters 和 Setters 问题

> ID：11934801
> 
> 赞同：2
> 
> 时间：2012-08-13T13:02:41.397
> 
> 标签：javascript, prototype, getter-setter

这是我目前正在使用的代码：

```
Object.defineProperty(String.prototype, "testy", {
    get: function() {
        return this.string;
    },
    set: function(string) {
        this.string = string;
    }
});

console.log("tessfef3t".testy()); 
```

在我使用之前`String.prototype.testy = function {}`，我被告知使用类似于上面代码的东西是更好的方法。我不确定这是如何工作的，但我还没有让那个代码工作。

有人可以告诉我如何正确地做我正在做的事情吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:10:27.760

`testy`是一种“假”属性——它没有自己的值，但设置或获取它的值将调用它的`set`and`get`函数。你可以像这样使用它：

```
var foo = new String();

// this invokes the setter and sets foo.string to 5:
foo.testy = 5; 

// this invokes the getter and prints the value of foo.string
console.log(foo.testy); 

// this prints 5, because foo.string has been set by the setter
console.log(foo.string); 
```

**编辑：**

现在我看到你对你真正想要发生的事情的评论。不可能更改字符串对象的值，因为字符串是不可变的。您必须销毁字符串对象并将其替换为新对象，这在对象自己的成员函数中是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:13:29.507

如果您在 getter 和 setter 中所做的只是设置一个未在其他地方使用的属性并且没有其他处理，那么使用 getter 和 setter 将一无所获，因此您最好使用原始方法。此外，无论如何，您将无法检索您在字符串上设置的属性。JavaScript 中的字符串值（它是诸如`"foo"`创建的字符串文字，并且是唯一一种通常有用的字符串）不是对象，因此尝试访问属性需要特殊处理：有效地`String`创建并抛出临时对象之后立即离开。

最后，getter 和 setter 的另一个主要缺点是它们是在 ECMAScript 5 中指定的，因此仅在相对较新的浏览器中可用。例如，它们没有在 IE < 9 中实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-19T14:04:44.613

这对我来说很好：

```
Object.defineProperty(String.prototype, "byteLength", {
    get: function() {
        var str = "" + this; // Get internal value
        // Compute size in actual bytes vs Unicode characters
        // per http://stackoverflow.com/a/23329386/912236
        for (var b = str.length, c = str.length - 1; 0 <= c; c--) {
            var a = str.charCodeAt(c);
            127 < a && 2047 >= a ? b++ : 2047 < a && 65535 >= a && (b += 2);
            56320 <= a && 57343 >= a && c--;
        }
        return b;
    }
}); 
```

> `> "Hello".byteLength`
> `< 5`

# javascript - 如何通过它的 url 知道图像的大小

> ID：11934802
> 
> 赞同：0
> 
> 时间：2012-08-13T13:02:41.153
> 
> 标签：javascript, dom, image-loading

我有一个输入文本字段，用户在其中提供图像的源 url，例如 `http://mysite/images/STARTPAGE_LOGO.gif`是一个有效值。

我的 html 文档中没有任何`img`标签或其他内容。如何确定用户输入的 URL 中存在的图像的尺寸。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-13T13:11:00.163

没有加载图像的方法来找出图像的宽度和高度，因此您必须动态加载它，为此您可以使用

```
function getDimensions(_src,_callback){
     /* create a new image , not linked anywhere in document */
     var img = document.createElement('img');
     /* set the source of the image to what u want */
     img.src=_src;
     /* Wait the image to load and when its so call the callback function */
     /* If you want the actual natural dimensions of the image use naturalWidth and natural height instead */
     img.onload = function () { _callback(img.width,img.height) };
} 
```

以纯 JavaScript 精神声明上述函数后，您可以执行类似的操作

```
getDimensions('http://mysite/images/STARTPAGE_LOGO.gif',function(w,h){
 console.log( "Height : ",h,"Width:",w);
}); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-13T13:07:57.537

HTML：

```
 <input id="src" type="text" value="https://www.google.pl/images/srpr/logo3w.png"/> 
```

JAVASCRIPT：

```
var img = new Image; // create tmp image element  
                     // is equal to document.createElement('img'); 
```

onload 事件绑定函数，加载图片时会自动调用。

```
 img.onload = function(){
     alert( this.width +" : " + this.height );
   }; 
```

设置图片来源；

```
img.src = document.getElementById('src').value // get the value of input element; 
```

出于对 jQuery 的好奇：

```
$('<img/>').attr('src',$('#src').val()).bind('load',function(){
     alert( this.width +' x ' + this.height );
}); 
```

# asp.net - 在 Firefox 中下载的文件不显示空格字符

> ID：11934803
> 
> 赞同：1
> 
> 时间：2012-08-13T13:02:45.253
> 
> 标签：asp.net, firefox, download, content-disposition

我有一个网站，我希望用户在那里下载一些文件。我在 asp.net 中使用字符串为文件命名。

假设我将“描述文件”作为文件 1 的名称，将“样本”作为文件 2 的名称。

即使在 IE 和 Chrome 中，名称的显示方式应该是它们应该显示的方式，但在 Firefox 中，第一个文件名显示为“描述”而不是“描述文件”。

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T14:31:49.060

要在 Firefox 中使用此功能，您必须用引号将附件文件名括起来。

这将在 Chrome 和 IE 中产生“描述文件”，但在 Firefox 中只产生“描述”：

```
Response.AppendHeader("Content-Disposition", "attachment; filename=description file"); 
```

这将在前面提到的所有三个浏览器中产生“描述文件”：

```
Response.AppendHeader("Content-Disposition", "attachment; filename=\"description file\""); 
```

# ide - 具有多种打开的选项卡式文件的代码编辑器？

> ID：11934804
> 
> 赞同：0
> 
> 时间：2012-08-13T13:02:45.687
> 
> 标签：ide, editor

嗨，谁能推荐一个好的、理想的免费编辑器，它允许我根据我正在处理的模块或组件对打开的文件进行分组？

我正在学习 joomla，所以我需要一个带有 php、JavaScript、HTML 的工具。

我目前正在使用dreamweaver。这很棒，但我讨厌不得不遍历通常隐藏的文件选项卡，因为我一次打开了很多文件。理想情况下，我想要一些可以让我将这些打开的文件分组的东西，就像一个文件夹结构一样，我可以创建一个类别来将打开的文件分组在一起，以便将彼此相关的东西放在附近。

如果做不到这一点，请推荐在处理大量打开的文件时最好的方法。

我喜欢浏览器的工作方式，因为它允许我打开多个实例，并让我通过选项卡将我想要的站点分组到每个浏览器实例。Dreamweaver 不允许多个实例。有什么可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:43:16.957

UltraEdit 根据文件类型为选项卡提供不同的颜色 - CSS 是绿色，Javascript 是橙色等。我觉得这非常有用。它还允许选项卡溢出到多行，而不是像 Dreamweaver 那样强制它们到一行。

如果您必须使用 Dreamweaver，您可以使用文件目录面板来遍历硬盘上的文件夹。双击子目录中的文件将其打开，或者如果它已经打开，则切换到其选项卡。我认为，文件目录面板默认位于右上角。

# .htaccess - .htaccess 重写规则处理正确

> ID：11934806
> 
> 赞同：0
> 
> 时间：2012-08-13T13:02:57.623
> 
> 标签：.htaccess, apache2

我想将重写重定向`/zp-core/admin.php`到，`admin`但不知何故我无法让它工作。

我已将此规则添加到我的 htaccess 中：

```
RewriteEngine On

RewriteBase /

RewriteRule ^/admin$ /zp-core/admin.php [L]

RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^albums/?(.+/?)?$ $1 [R=301,L] 
...
# Catch-all - everything else gets handled in PHP for compatibility.
RewriteRule ^(.*)/?$                        index.php?album=$1 [L,QSA] 
```

第三条规则应该这样做，但不知何故它没有。最后，它回到了捕获所有规则

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:13:39.140

当您说“将**A**重写为**B** ”时，通常，“A”是用户键入的内容，而“B”是您希望他获得的内容。

如果 A=' `/admin`' 和 B=' `/zp-core/admin.php`' 那么第一个规则是可以的，如果你删除其他规则，它会起作用。

问题是 - apache 会在每个请求（包括子请求）上查看 .htaccess，并且您的重定向会执行子请求......所以它不再匹配第一条规则，但随后出现了包罗万象的规则，它再次匹配（您会看到在此类请求中点击 index.php 时`$_GET["album"]`会匹配。`/zp-core/admin.php`

您需要做的是添加`RewriteCond`检查 uri 不是`/zp-core/admin.php`或您不在子请求中...

任何一个：

```
RewriteCond %{REQUEST_URI} !^/zp-core/admin.php$ 
```

或者：

```
RewriteCond %{IS_SUBREQ} !=true 
```

# bash - Bash：按前 4 列对 csv 文件进行排序

> ID：11934809
> 
> 赞同：13
> 
> 时间：2012-08-13T13:03:24.163
> 
> 标签：bash, shell, sorting, csv

我有一个 csv 文件，其中的字段由“;”分隔。有 8 个字段，我想按前 4 列按升序对数据进行排序（首先按第 1 列排序，然后按第 2 列等）

我如何从 linux 的命令行执行此操作？

我尝试使用开放式办公室，但它只能让我选择 3 列。

编辑：在我想要对数据进行排序的字段中，三个字段包含带有数值的字符串，一个只有字符串。如何使用`sort`命令指定它？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-13T13:16:04.370

尝试：

```
sort -t\; -k 1,1n -k 2,2n -k 3,3n -k 4,4n test.txt 
```

例如：

```
1;2;100;4
1;2;3;4
10;1;2;3
9;1;2;3

> sort -t\; -k 1,1n -k 2,2n -k 3,3n -k 4,4n temp3
1;2;3;4
1;2;100;4
9;1;2;3
10;1;2;3 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-13T13:05:26.843

`sort -k`将允许您定义排序键。来自`man sort`：

```
-k, --key=POS1[,POS2]
       start a key at POS1 (origin 1), end it at POS2 (default end of line). 
```

所以

```
$ sort -t\; -k1,4 
```

应该这样做。请注意，我已经转义了分号，否则 shell 会将其解释为语句结束。

# python - 正则表达式相邻字符

> ID：11934812
> 
> 赞同：0
> 
> 时间：2012-08-13T13:03:35.153
> 
> 标签：python, regex, regex-negation

我正在尝试制定一个正则表达式（在 Python 中运行），它通过一个单词并且只需要找到不包含 2 个相邻元音的单词。例如：

```
me - would match
mee - would not match
meat - would not match
base - would match
basketball - would match 
```

我在这里迷路了，因为我不知道如何检查不存在的东西？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T13:09:19.957

```
import re

r = re.compile("[aeiou][aeiou]")
m = r.search("me")   # => None
m = r.search("mee")  # => Matcher
m = r.search("meat") # => Matcher
m = r.search("base") # => None 
```

对于所有不匹配的情况也是如此`if not m`。`True`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T13:28:00.353

```
m = re.match(r"(?:[^euioa]|[euioa](?![euioa]))*$", word) 
```

[@Tichodroma 的答案](https://stackoverflow.com/a/11934893/4279)更简单，因此如果您以后可以在代码中否定匹配，则应该更可取，即，只需写下`if not m`您将`if m`使用此解决方案编写的位置。

# gcc - int&b = a; 对于 gcc 与 g++

> ID：11934815
> 
> 赞同：-1
> 
> 时间：2012-08-13T13:03:54.030
> 
> 标签：gcc

我意识到 gcc 和 g++ 对以下代码的处理方式不同：

```
#include <stdio.h>
int main(void)
{
    int a = 0;
    int& b = a;
    return 0;
} 
```

gcc 返回“在 & 之前解析错误”，而 g++ 没有返回错误。

我曾经遇到过一次采访，提到 C 和 C++ 编译器对 int& b 的处理方式不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:07:47.400

那是因为`&`在 C 类型声明中没有任何意义 - 在 C++ 中，这意味着变量将是一个引用，但这些在 C 中不存在。

换句话说，`int& b = a;`根本不是有效的 C 代码。

# mysql - 如何从我的 mysql 数据库表“userlog”中获取高峰时间

> ID：11934818
> 
> 赞同：1
> 
> 时间：2012-08-13T13:04:07.723
> 
> 标签：mysql, sql

我的桌子是

```
    id 用户名 calltime

    1 个用户 1 01-02-2012 10:04:02
    2 用户2 01-02-2012 10:12:02
    3 用户 1 01-02-2012 10:15:22
    5 用户 4 01-02-2012 11:20:02
    6 用户6 01-02-2012 11:23:02
    7 用户8 01-02-2012 11:34:15
    8 用户 7 01-02-2012 11:55:02
    9 用户 8 01-02-2012 15:23:02
    10 用户6 01-02-2012 16:03:02
    11 用户 9 01-02-2012 19:43:02

```

这里的高峰时间是 10 - 12。因为大多数用户在 10 和 12 之间被调用。我如何找到这个？

谁能帮我搞定这个

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:19:58.907

我想你只想按小时分组：

```
select extract(hour from calledtime) as hr,
       count(*)
from t
group by extract(hour from calledtime)
order by 1 
```

要达到一个小时的峰值，您需要为此找到最大值。最简单的方法是：

```
select extract(hour from calledtime) as hr,
       count(*)
from t
group by extract(hour from calledtime)
order by count(*) desc
limit 1 
```

您可能还需要日期信息和时间；只需将其包含在选择和分组依据中。

# javascript - 显示/隐藏选择 html5 javascript

> ID：11934820
> 
> 赞同：-2
> 
> 时间：2012-08-13T13:04:20.230
> 
> 标签：javascript, html

我在这个论坛中搜索并尝试了这里解释的不同方式，我尝试了一切但我遇到了这个问题，正如你所看到的我尝试了不同的方式，该功能向我显示警报....但没有隐藏或显示任何内容，我不知道为什么：/

```
<script type="text/javascript">

function show(valor) {
  var zona1=document.getElementById("zona");
  var b=document.getElementById("barrioscf");
  var part=document.getElementById("partidos");

  if (valor==1) {
    /* b.style.visibility='visible';
       part.style.visibility='hidden';
    */
    b.style.display = 'block';
    part.style.display = 'none';

    alert ("entro if 1");
    //document.all.form_crea.barrioscf.style.visibility="visible"
    //document.all.form_crea.p.style.visibility="hidden"

  } else if(valor==2) {
    b.style
    b.style.display = 'none';
    part.style.display = 'block';

    alert ("entro if 2");

    /* b.style.visibility="hidden";
       part.style.visibility="visible";*/
    //document.all.form_crea.barrioscf.style.visibility="hidden"
    //document.all.form_crea.p.style..visibility="visible"
  }
}
</script>

<select id="zona" name="zona_nombre" 
 onChange="javascript:mostrar_barrios(this.value);">
  <option value="1">Capital Federal</option>
  <option value="2">Gran Buenos Aires</option>
</select>

<tr><td>Barrios:
  <td>
    <select id="barriocf"name="barriocf" >
      <?
        while ($row = mysql_fetch_row($result)) { 
          echo "<option value='".$row['0']."'>".$row['1']."</option>";
        } 
        mysql_free_result($result); 
      ?> 
    </select>
<tr id="partidos">
  <td>Partidos:
  <td>
    <select id="p"name="partido" style="visibility:hidden">
      <option value="Avellaneda">Avellaneda</option>
    </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:31:04.347

那么你的块结构注释结构和选择元素的id是错误的，请看一下这个。

1.  添加了表格标签
2.  函数名改为显示
3.  评论被删除。
4.  第二个，如果阻塞更正并`b.style`删除线。

[http://jsfiddle.net/Dg8wR/](http://jsfiddle.net/Dg8wR/)

其余的都在你的手中。

# c - 如何在 C 中访问（动态分配的）Fortran 数组

> ID：11934822
> 
> 赞同：3
> 
> 时间：2012-08-13T13:04:23.973
> 
> 标签：c, fortran, dlsym, fortran2003, fortran-iso-c-binding

我的主要问题是为什么数组会做如此奇怪的事情，以及是否有任何方法可以以“干净”的方式执行以下操作。

我目前有一个 C 程序通过`foo.c`连接 Fortran 程序，大致如下面的代码所示：`bar.f90``dlopen/dlsym`

**富.c：**

```
#include <dlfcn.h>
#include <stdio.h>

int main()
{
int i, k = 4;
double arr[k];
char * e;

void * bar = dlopen("Code/Test/bar.so", RTLD_NOW | RTLD_LOCAL);

void (*allocArray)(int*);
*(void **)(&allocArray) = dlsym(bar, "__bar_MOD_allocarray");
void (*fillArray)(double*);
*(void **)(&fillArray) = dlsym(bar, "__bar_MOD_fillarray");
void (*printArray)(void);
*(void **)(&printArray) = dlsym(bar, "__bar_MOD_printarray");
double *a = (double*)dlsym(bar, "__bar_MOD_a");

for(i = 0; i < k; i++)
    arr[i] = i * 3.14;

(*allocArray)(&k);
(*fillArray)(arr);
(*printArray)();
for(i = 0; i < 4; i++)
    printf("%f ", a[i]);
printf("\n");

return 0;
} 
```

**bar.f90:**

```
module bar

integer, parameter :: pa = selected_real_kind(15, 307)
real(pa), dimension(:), allocatable :: a
integer :: as

contains

subroutine allocArray(asize)
    integer, intent(in) :: asize

    as = asize
    allocate(a(asize))

    return
end subroutine

subroutine fillArray(values)
    real(pa), dimension(as), intent(in) :: values

    a = values
    return
end subroutine

subroutine printArray()
    write(*,*) a
    return
end subroutine

end module 
```

运行主要产量

```
0.0000000000000000        3.1400000000000001        6.2800000000000002        9.4199999999999999     
0.000000 -nan 0.000000 0.000000 
```

这表明 Fortran 正确地分配了数组，甚至正确地存储了给定的值，但是它们不再可以通过 dlsym 访问（处理该数据会导致段错误）。我也对固定大小的数组进行了尝试——结果保持不变。

有谁知道这种行为的原因？就我个人而言，我希望事情要么双向解决，要么根本不解决——这个“Fortran 接受 C 数组，但反之不行”让我想知道我在以这种方式从 C 访问数组时是否犯了一些基本错误。

另一个（甚至更重要的）问题是，如何以“正确的方式”进行数组访问。目前我什至不确定坚持“Fortran as .so”界面是否是一个好方法——我认为在这种情况下也可以尝试混合编程。尽管如此，数组问题仍然存在 - 我读到这可以使用 ISO C 绑定以某种方式解决，但我不知道如何解决（我还没有使用 Fortran 进行很多工作，尤其是没有使用所述绑定） ，所以在这个问题上的帮助将不胜感激。

**编辑：**

好的，所以我更多地阅读了 ISO C Binding 并在[这里](https://stackoverflow.com/questions/9677972/how-to-allocate-an-array-inside-fortran-routine-called-from-c)找到了一个非常有用的方法。使用`C_LOC`我可以获得指向我的 Fortran 结构的 C 指针。不幸的是，指向数组的指针似乎是指向指针的指针，需要在 C 代码中取消引用，然后才能将它们视为 C 数组 - 或类似的东西。

**编辑：**

至少在大多数情况下，我的程序现在可以按照 Vladimir F 指出的方式使用 C 绑定来工作。C 文件和 Fortran 文件现在链接在一起，所以我可以避免使用 libdl 接口，至少对于 Fortran 部分 - 我仍然需要加载动态 C 库，获取指向其中一个符号的函数指针并传递它作为指向 Fortran 的函数指针，后者随后将该函数作为其计算的一部分调用。正如所说的函数需要 double*s [arrays]，奇怪的是，我无法使用 C_LOC 传递我的 Fortran 数组 - 既没有`C_LOC(array)`也没有`C_LOC(array(1))`将正确的指针传递回 C 函数。`array(1)`虽然成功了。可悲的是，这不是做到这一点的“最干净”的方式。如果有人提示我如何使用`C_LOC`功能，那就太好了。尽管如此，我接受 Vladimir F 的回答，因为我认为这是更安全的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T14:05:17.430

许多 Fortran 编译器在内部使用称为数组描述符的东西 - 保持数组形状的结构（即每个维度的大小和范围以及指向真实数据的指针）。它允许实现诸如假定形状数组参数、数组指针和可分配数组之类的工作。您通过`__bar_MOD_a`符号访问的是可分配数组的描述符，而不是它的数据。

数组描述符是特定于编译器的，依赖于特定描述符格式的代码是不可移植的。示例描述符：

*   [GNU Fortran](http://gcc.gnu.org/wiki/ArrayDescriptorUpdate)
*   [英特尔 Fortran](http://software.intel.com/sites/products/documentation/hpc/composerxe/en-us/2011Update/fortran/lin/bldaps_for/common/bldaps_hndl_arrdesc.htm)

请注意，即使是那些特定于这些编译器的某些版本的。例如，英特尔声明他们当前的描述符格式与英特尔 Fortran 7.0 中使用的格式不兼容。

如果您查看这两个描述符，您会发现它们非常相似，并且第一个元素是指向数组数据的指针。因此，您将能够使用`double **`而不是轻松读取数据`double *`：

```
double **a_descr = (double**)dlsym(bar, "__bar_MOD_a");
...
for(i = 0; i < 4; i++)
    printf("%f ", (*a_descr)[i]); 
```

再一次，这是不可移植的，因为这些描述符的格式将来可能会改变（尽管我怀疑数据指针会被移动到描述符开头之外的其他地方）。有一个试图统一所有描述符格式的规范草案，但不清楚不同编译器供应商将如何以及何时采用它。

**编辑：**以下是如何使用`C_LOC()`从`ISO_C_BINDING`模块中使用的访问器函数来可移植地获取指向可分配数组的指针：

Fortran 代码：

```
module bar
  use iso_c_binding
  ...
  ! Note that the array should be a pointer target
  real(pa), dimension(:), allocatable, target :: a
  ...
contains
  ...

  function getArrayPtr() result(cptr)
    type(c_ptr) :: cptr

    cptr = c_loc(a)
  end function

end module 
```

C代码：

```
...
void * (*getArrayPtr)(void);
*(void **)(&getArrayPtr) = dlsym(bar, "__bar_MOD_getarrayptr");
...
double *a = (*getArrayPtr)();
for(i = 0; i < 4; i++)
    printf("%f ", a[i]);
... 
```

结果：

```
$ ./prog.x
   0.0000000000000000        3.1400000000000001        6.2800000000000002
 9.4199999999999999
0.000000 3.140000 6.280000 9.420000 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T15:12:16.390

在我看来，尝试访问 Fortran 库中的全局数据并不是一个好习惯。它可以使用 COMMON 块来完成，但它们是邪恶的并且需要静态大小的数组。通常存储关联是一件坏事。

永远不要将模块符号作为“__bar_MOD_a”访问，它们是特定于编译器的，不能直接使用。使用函数和子例程传递指针。

将数组作为子例程参数传递。您还可以在 C 中分配数组并将其传递给 Fortran。还可以做的是获取指向数组第一个元素的指针。它将提供指向数组的 C 指针。

我的解决方案，为了简单起见，没有.so，添加它很简单：

酒吧.f90

```
module bar
 use iso_C_binding

implicit none

integer, parameter :: pa = selected_real_kind(15, 307)

real(pa), dimension(:), allocatable,target :: a
integer :: as

contains

subroutine allocArray(asize,ptr) bind(C,name="allocArray")
    integer, intent(in) :: asize
    type(c_ptr),intent(out) :: ptr

    as = asize
    allocate(a(asize))

    ptr = c_loc(a(1))
end subroutine

subroutine fillArray(values) bind(C,name="fillArray")
    real(pa), dimension(as), intent(in) :: values

    a = values
end subroutine

subroutine printArray()  bind(C,name="printArray")

    write(*,*) a
end subroutine

end module 
```

主程序

```
#include <dlfcn.h>
#include <stdio.h>

int main()
{
int i, k = 4;
double arr[k];
char * e;
double *a;
void allocArray(int*,double**);
void fillArray(double*);
void allocArray();

for(i = 0; i < k; i++)
    arr[i] = i * 3.14;

allocArray(&k,&a);
fillArray(arr);
printArray();
for(i = 0; i < 4; i++)
    printf("%f ", a[i]);
printf("\n");

return 0;
} 
```

编译并运行：

```
gcc -c -g main.c

gfortran -c -g -fcheck=all bar.f90

gfortran main.o bar.o

./a.out
0.0000000000000000        3.1400000000000001        6.2800000000000002        9.4199999999999999     
0.000000 3.140000 6.280000 9.420000 
```

注意：您的 Fortran 子例程中没有返回的原因，它们只会使代码变得模糊。

# batch-file - 文件名目录名或卷标语法不正确

> ID：11934825
> 
> 赞同：4
> 
> 时间：2012-08-13T13:04:43.160
> 
> 标签：batch-file

我在 VS 2010 中构建 TFS 之后运行这个 .bat 文件。但它抛出错误说**“文件名目录名称或卷标语法不正确”**

我的批处理文件包含以下内容：

```
REM "*******START :Modify the following sections*******"
call "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\vcvarsall.bat" x86_amd64

set ProjectPath=C:\Builds\1\xxxx\xxx\Sources

Set PATH=%PATH%;%Windir%\Microsoft.NET\Framework\v4.0

REM  "------Move to the Project Folder------"
cd /c %ProjectPath%
cd  C:\Builds\1\xxx\xxxx\TestResults

REM  "------Find the latest Test Result file------"
setLocal EnableDelayedExpansion

for /f "tokens=* delims= " %%a in ('dir/b/a-d/o-d "C:\Builds\1\xxx\xxxx\TestResults\*.trx"') do (
   set latesttrxfile=%%a & goto :done
)
:done

echo %latesttrxfile%

REM  "------Move to test results folder------"
cd C:\Builds\1\xxx\xxxx\TestResults

REM  "------Convert trx to html------"
trx2html "C:\Builds\1\xxx\xxxx\TestResults\%latesttrxfile%"

REM  "------Find the latest Test Result html file------"
setLocal EnableDelayedExpansion

for /f "tokens=* delims= " %%a in ('dir/b/a-d/o-d "C:\Builds\1\xxx\xxx\TestResults\*.htm"') do (
   set latesthtml=%%a & goto :done
)
:done

echo %latesthtml%

REM  "------Send Email------"
sendEmail.exe -s xxx.xxx.xxx.com -f yyyy@xxx.com -t yyyy@xxx.com -u Test Report attached -a "C:\Builds\1\xxx\xxx\TestResults\%latesthtml%" -m TestReportAttached

Pause 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-11T11:29:20.257

我发现问题在于我的批处理文件是 Unicode（似乎是 VS 2010 中的文本文件的默认设置）。

*文件 > 高级保存选项*并更改为*西方*修复了该问题。

# r - 如何按以下格式堆叠R中的数据？

> ID：11934827
> 
> 赞同：1
> 
> 时间：2012-08-13T13:04:48.720
> 
> 标签：r

我有一个看起来像这样的数据框：

```
 inten      new.probes
  12.28280      AFFX-r2-P1-cre-5_at
  12.35039      AFFX-r2-P1-cre-5_at
  12.38397      AFFX-r2-P1-cre-5_at
  12.36304      AFFX-r2-P1-cre-5_at
  12.16271      AFFX-r2-P1-cre-5_at
  12.70304      AFFX-r2-P1-cre-3_at
  12.28280      AFFX-r2-P1-cre-3_at
  12.35039      AFFX-r2-P1-cre-3_at
  12.38397      AFFX-r2-P1-cre-3_at
  12.36304      AFFX-r2-P1-cre-3_at
  12.16271      AFFX-r2-P1-cre-2_at
  12.70304      AFFX-r2-P1-cre-2_at 
  12.16271      AFFX-r2-P1-cre-2_at
  12.70304      AFFX-r2-P1-cre-2_at 
```

（上面的形式为两个单独的列，其中探针名称为一列，信号强度值为另一列）我希望数据帧按以下方式转换：

```
AFFX-r2-P1-cre-5_at 12.28280 12.35039  12.38397  12.36304   12.16271 
AFFX-r2-P1-cre-3_at 12.28280 12.35039  12.38397  12.36304   12.16271 
AFFX-r2-P1-cre-2_at 12.38304 12.36304  12.38397  12.16271   12.70304 
```

欢迎任何建议。这是一个很大的数据集，我只提供了一小部分以寻求帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T13:48:57.223

如果 value of 的元素数量相同`new.probes`，则可以使用：

```
do.call(rbind, unstack(dat))
                        [,1]     [,2]     [,3]     [,4]     [,5]
AFFX-r2-P1-cre-2_at 12.16271 12.70304 12.16271 12.70304 12.16271
AFFX-r2-P1-cre-3_at 12.70304 12.28280 12.35039 12.38397 12.36304
AFFX-r2-P1-cre-5_at 12.28280 12.35039 12.38397 12.36304 12.16271
Warning message:
In function (..., deparse.level = 1)  :
  number of columns of result is not a multiple of vector length (arg 1) 
```

但这显然是错误的 - 您需要用 填充较短的向量`NA`：

```
x <- unstack(dat)
m <- max(sapply(x, length))
do.call(rbind, lapply(x, function(x)c(x, rep(NA, m-length(x)))))

                        [,1]     [,2]     [,3]     [,4]     [,5]
AFFX-r2-P1-cre-2_at 12.16271 12.70304 12.16271 12.70304       NA
AFFX-r2-P1-cre-3_at 12.70304 12.28280 12.35039 12.38397 12.36304
AFFX-r2-P1-cre-5_at 12.28280 12.35039 12.38397 12.36304 12.16271 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T17:00:19.823

这就是我解决这个问题的方法：

1.  确保`new.probes`变量已排序。
2.  使用`sequence()`and`rle()`为每个`new.probes`.
3.  用于`reshape()`转换数据。

这是您的示例数据的一个工作示例（假设它被命名为“DF”）。

```
DF = DF[order(DF$new.probes), ]
DF$time = sequence(rle(as.vector(DF$new.probes))$lengths)
reshape(DF, direction = "wide", idvar = "new.probes", timevar = "time")
#             new.probes  inten.1  inten.2  inten.3  inten.4  inten.5
# 11 AFFX-r2-P1-cre-2_at 12.16271 12.70304 12.16271 12.70304       NA
# 6  AFFX-r2-P1-cre-3_at 12.70304 12.28280 12.35039 12.38397 12.36304
# 1  AFFX-r2-P1-cre-5_at 12.28280 12.35039 12.38397 12.36304 12.16271 
```

或者，如果您更喜欢`reshape2`base R's中的语法`reshape`，请将步骤 3 替换为：

```
require(reshape2)
dcast(DF, new.probes ~ time, value.var = "inten") 
```

# php - PHP：根据其属性值之一的索引位置对对象进行排序

> ID：11934828
> 
> 赞同：0
> 
> 时间：2012-08-13T13:04:48.837
> 
> 标签：php, sorting, object

我有一个具有 3 个属性的对象。我想输入一个数字 1,2 或 3（0,1 或 2 也可以）并根据其属性值按升序对对象进行排序。

这是我的对象的样子：

```
var_dump($obj);

array(3) { 
    [0]=> object(stdClass)#25 (92) { 
        ["file_id"]=> string(1) "6" 
        ["name"]=> string(1) "1st item" 
    } 
    [1]=> object(stdClass)#26 (92) { 
        ["file_id"]=> string(1) "7"    
        ["name"]=> "2nd item"
    } 
    [2]=> object(stdClass)#27 (92) { 
        ["file_id"]=> string(1) "8" 
        ["name"]=> "3rd item"
    }
} 
```

如果我输入 1，那么输出将如下所示：

```
file_id    name
 6      1st item
 7      2nd item
 8      3rd item 
```

如果我输入 2，那么输出将是：

```
7  2nd item
8  3rd item
6  1st item 
```

如果我输入 3，那么输出将是：

```
8  3rd item
6  1st item
7  2nd item 
```

**[这个问题与我之前在 Stackoverflow 上提出的](https://stackoverflow.com/questions/11060200/reorder-php-object-based-on-one-of-its-property-values)问题几乎相同，唯一的例外是我需要`sort()`在值的索引位置上`file_id`而不是在`file_id`值本身上。即，我需要对 1,2,3 而不是 6,7,8 进行排序。**

如果您对这个问题特别兴奋（是的，我意识到这不太可能），我很想知道输出中的数字`25`和`92`代表什么：`object(stdClass)#25 (92)`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:12:09.693

我想你正在寻找[usort](http://php.net/manual/en/function.usort.php)

写3个比较函数，每个属性一个，根据输入值切换，使用哪个比较函数

编辑：数字是 PHP 内部对象 id ( `#25`) 和对象的大小。

快速示例：

```
function compare_1($a, $b) {
  return strcmp($a->file_id, $b->file_id);
}
// compare_2, compare_3 accordingly as needed with your objects

switch ($input) {
  case 1:
    $compareFunctionName = 'compare_1';
    break;
  case 2:
    $compareFunctionName = 'compare_2';
    break;
  case 3:
    $compareFunctionName = 'compare_3';
    break;
  default:
    throw new Exception('wrong Parameter: input is ' . $input);
 }

 usort($objectArray, $compareFunctionName);

 var_dump($objectArray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:35:19.237

据我了解，在按某些属性对数组进行排序*后*，您希望*旋转*数组，以便例如数组 (1,2,3,4) 变为 (3,4,1,2)。
在此示例中，我使用字符串文字作为数组成员，切换到对象是微不足道的。

```
<?php
$sortedData = array('A', 'B', 'C', 'D', 'E'); // getting an array like this has been solved by the answers to your previous question
$foo = rotate($sortedData, 2);
var_dump($foo);

function rotate($source, $n) {
    // could use some pre-checks...
    return array_merge(
        array_slice($source, $n, NULL, true),
        array_slice($source, 0, $n, true)
    );
} 
```

印刷

```
array(5) {
  [0]=>
  string(1) "C"
  [1]=>
  string(1) "D"
  [2]=>
  string(1) "E"
  [3]=>
  string(1) "A"
  [4]=>
  string(1) "B"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T13:38:34.860

这是完成此任务的简单算法

Step1：从数组array_search()中删除输入索引的值并取消设置函数

Step2：使用排序函数对数组进行排序

第 3 步：使用 push/pop 函数将删除的值添加到数组的顶部

有关数组函数的更多知识，请访问[http://www.phpsyntax.blogspot.com](http://www.phpsyntax.blogspot.com)

# .net - .net xml架构验证错误的命名空间

> ID：11934829
> 
> 赞同：4
> 
> 时间：2012-08-13T13:04:53.107
> 
> 标签：.net, xml, xsd, xml-validation

具有带命名空间的 XML 模式`http://mynamespace`。如果验证了具有默认命名空间的错误 XML 文档，`xmlns="http://mynamespace"`则会按预期抛出异常。而如果有人更改了 namespace( `http://Wrongnamespace`)，这个**错误的 XML 将通过验证**。

这是带有模式验证的单元测试。方法`XSD_NotValid_2`不能正常工作：

```
[TestClass]
public class XSDTest
{
    public System.Xml.XmlReaderSettings ReaderSettings
    {
        get
        {
            string sXSD = "<xsd:schema targetNamespace=\"http://mynamespace\" xmlns=\"http://mynamespace\""
                + " xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" elementFormDefault=\"qualified\">"
            + "<xsd:element name=\"Root\">"
            + "<xsd:complexType>"
                + "<xsd:sequence>"
                    + "<xsd:element name=\"Child\" minOccurs=\"1\" maxOccurs=\"1\" />"
                + "</xsd:sequence>"
             + "</xsd:complexType>"
            + "</xsd:element>"
            + "</xsd:schema>";

            System.Xml.Schema.XmlSchema schema = System.Xml.Schema.XmlSchema.Read(new System.IO.StringReader(sXSD)
                        , new System.Xml.Schema.ValidationEventHandler(OnValidationFail));

            System.Xml.XmlReaderSettings readerSettings_Ret = new System.Xml.XmlReaderSettings();
            readerSettings_Ret.ValidationType = System.Xml.ValidationType.Schema;
            readerSettings_Ret.ValidationEventHandler += new System.Xml.Schema.ValidationEventHandler(OnValidationFail);
            readerSettings_Ret.Schemas.Add(schema);

            return readerSettings_Ret;
        }
    }

    private void OnValidationFail(object s, System.Xml.Schema.ValidationEventArgs e)
    {
        throw new OperationCanceledException("Validation error: " + e.Message);
    }

    [TestMethod]
    public void XSD_Valid_Test()
    {
         // Valid elements and valid namespace
        String sXML_Valid = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>"
            + "<Root xmlns=\"http://mynamespace\"><Child /></Root>";
        System.Xml.XmlReader xmlReader_Valid = 
            System.Xml.XmlReader.Create(new System.IO.StringReader(sXML_Valid), this.ReaderSettings);
        while (xmlReader_Valid.Read()) { } // no fail expected
    }

    [TestMethod]
    [ExpectedException(typeof(OperationCanceledException))]
    public void XSD_NotValid_1()
    {
         // No valid elements, while valid namespace
        String sXML_NotValid_1 = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>"
            + "<BadRoot xmlns=\"http://mynamespace\"><Child /></BadRoot>";
        System.Xml.XmlReader xmlReader_NoValid_1 = 
            System.Xml.XmlReader.Create(new System.IO.StringReader(sXML_NotValid_1), this.ReaderSettings);
        while (xmlReader_NoValid_1.Read()) ;
    }

    [TestMethod]
    [ExpectedException(typeof(OperationCanceledException))]
    public void XSD_NotValid_2()
    {
        // No valid elements and no valid namespace
        String sXML_NotValid_2 = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>"
            + "<Root xmlns=\"http://Wrongnamespace\"><NotValidChild /></Root>";
        System.Xml.XmlReader xmlReader_NoValid_2 = 
            System.Xml.XmlReader.Create(new System.IO.StringReader(sXML_NotValid_2), this.ReaderSettings);
        while (xmlReader_NoValid_2.Read()) ;
    }
} 
```

这是正常行为吗？如何强制正确的命名空间定位？`Root`以及在 XSD 有附加元素的情况下如何强制要求`Root2`元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T13:54:43.993

如果启用架构验证警告，您将收到以下错误：

> 找不到元素“http://Wrongnamespace:Root”的架构信息。

利用

```
readerSettings_Ret.ValidationFlags = XmlSchemaValidationFlags.ReportValidationWarnings; 
```

几件小事：

1.  即使在单元测试中，也不应该通过字符串操作来创建 XML。始终使用 XML API 创建 XML，因为他们知道“所有规则”。
2.  即使在单元测试中，您也应该将实现 IDisposable 的对象的创建放在`using`块中。事实上，我想说的是，*特别是*在单元测试中，每个测试都应该独立于其他测试，你要确保在开始下一个测试之前已经清理了一个测试。

# fiddler - 是否可以配置 Fiddler 应该在哪里生成自动回复文件？

> ID：11934830
> 
> 赞同：1
> 
> 时间：2012-08-13T13:05:00.227
> 
> 标签：fiddler

目前，在 Fiddler2 中，当我转到`Autoresponder`选项卡时，选择一个项目，右键单击它并选择`Generate File`，Fiddler 将在我的`Desktop`.

是否可以以某种方式配置此文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T19:41:36.350

不，不是。它只会将它放到您的桌面上。

# sql - 使用 SQL 排序

> ID：11934832
> 
> 赞同：0
> 
> 时间：2012-08-13T13:05:08.170
> 
> 标签：sql, sql-server, sql-server-2008

我是 SQL Server 的新手。在那我需要对以下数据进行排序

```
1, 1AB, 1AA, 20, 3C, 4D 
```

**进入**

```
1, 1AA, 1AB, 3C, 4D, 20. 
```

我的编码是

```
IF EXISTS ( SELECT name FROM sysobjects WHERE name = 'getIntPortion')
 DROP FUNCTION getIntPortion
GO    
CREATE FUNCTION dbo.getIntPortion ( @inputVarchar varchar(255))
RETURNS VARCHAR(255)
AS
BEGIN
 WHILE(PATINDEX('%[^0-9]%', @inputVarchar) ) > 0
 BEGIN
 --then remove that one character, then continue
 SET @inputVarchar = REPLACE(@inputVarchar
 , SUBSTRING(@inputVarchar, PATINDEX('%[^0-9]%', @inputVarchar), 1)
 , '')
 END
 RETURN @inputVarchar
END

SELECT km_ph_act_chapt_no FROM [KM_DB].[dbo].[km_ph_act_chapters]
ORDER BY CONVERT(INT, dbo.getIntPortion(km_ph_act_chapt_no)) 
```

因为这个 Alpha 没有订购......希望等待回复。

谢谢并恭祝安康，

提问者

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T13:11:34.797

尝试：

```
ORDER BY CONVERT(INT, dbo.getIntPortion(km_ph_act_chapt_no)), km_ph_act_chapt_no; 
```

但我建议不要使用这样的标量函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T13:10:44.573

假设您的功能正常工作，将顺序更改为

```
SELECT km_ph_act_chapt_no FROM [KM_DB].[dbo].[km_ph_act_chapters] 
ORDER BY CONVERT(INT, dbo.getIntPortion(km_ph_act_chapt_no)) ,
   km_ph_act_chapt_no 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T13:14:18.287

添加辅助排序，以便在您按前导数字排序后对字母进行排序

例如

```
SELECT km_ph_act_chapt_no FROM [KM_DB].[dbo].[km_ph_act_chapters]
ORDER BY CONVERT(INT, dbo.getIntPortion(km_ph_act_chapt_no)), km_ph_act_chapt_no 
```

# github - 使用 web php 脚本拉取一个 git 存储库

> ID：11934834
> 
> 赞同：0
> 
> 时间：2012-08-13T13:05:10.073
> 
> 标签：github

我需要使用来自网络的脚本在我的云服务器上提取一个 github 存储库。我创建了一个 php 脚本来访问一个 shell 脚本文件。拉动时我会使用 4 个命令：

```
sudo su
eval $(ssh-agent)
ssh-add
git pull repository master 
```

问题是当`ssh-add`我必须输入密码的脚本时，如何在 shell 脚本中输入密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:25:32.083

我会使用[钥匙串](http://www.funtoo.org/wiki/Keychain)`ssh-agent`而不是`ssh-add`-将在必要`keychain`时启动一个，或者使用现有的. 因此，您只需在会话开始时输入密码。`ssh-agent``ssh-agent``keychain``keychain``ssh-agent`

我`keychain`从我的 .bash_profile 中使用，例如：

```
eval `keychain --eval id_rsa` 
```

# iphone - 如何在 iphone 中使用异步 Web 服务调用来自动完成 TextField？

> ID：11934840
> 
> 赞同：2
> 
> 时间：2012-08-13T13:05:30.473
> 
> 标签：iphone, web-services, autocomplete, uitextfield

我想在我的应用程序中自动填充 UITextFiled。当用户在其中输入一些字母时，它将调用 Web 服务并在 UIpPickerView 中显示响应，例如搜索城市。当我们输入任何字母时，它会显示一些城市名称。谁能知道该怎么做？请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T13:37:29.723

要从服务器异步获取数据，您可以使用`NSURLConnection`and`NSURLConnectionDelegate`方法

在接口文件中：

```
@interface ViewController : UIViewController<NSURLConnectionDelegate, UITextFieldDelegate> {
    NSMutableData *mutableData;
}
-(void)getDataUsingText:(NSString *)text;
@end 
```

在实现文件中：

```
@implementation ViewController
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSString *value =[textField.text stringByReplacingCharactersInRange:range withString:string];
    [self getDataUsingText:value];
    return YES;
}

-(void)getDataUsingText:(NSString *)text;
{
    NSString *urlString = [NSString stringWithFormat:@"http://...."];
    NSURL *url =[NSURL URLWithString:urlString];
    NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url];
    NSURLConnection *conn = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    [conn start];
}

-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    mutableData = [[NSMutableData alloc] init];
}

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [mutableData appendData:data];
}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{    
    NSString *dataString = [[NSString alloc] initWithData:mutableData encoding:NSUTF8StringEncoding];
    NSLog(@"your data from server: %@", dataString);
    // Here you got the data from server asynchronously.
    // Here you can parse the string and reload the picker view using [picker reloadAllComponents];

}
@end 
```

您必须将委托设置为文本字段，并且必须使用`NSURLConnectionDelegate`方法中的数据实现选择器。这是加载选择器视图的教程[。](http://www.roseindia.net/tutorial/iphone/examples/UIPickerView/UIPickerViewExample.html)

# jquery - jquery: scrollTop - 滚动容器 div 中的所有 div

> ID：11934842
> 
> 赞同：0
> 
> 时间：2012-08-13T13:05:34.763
> 
> 标签：jquery, scrolltop

我可能想多了：

我有以下设置：

```
<div id='wrapper'>
    <div id='container'>
        <div id='titlebar'><p class='clickObj'>Title</p></div>
        <div id='content' style='display: none;'>...stuff</div>
    </div>

    <div id='container'>
        <div id='titlebar'><p class='clickObj'>Title</p></div>
        <div id='content' style='display: none;'>...stuff</div>
    </div>

    <div id='container'>
        <div id='titlebar'><p class='clickObj'>Title</p></div>
        <div id='content' style='display: none;'>...stuff</div>
    </div>

    <div id='container'>
        <div id='titlebar'><p class='clickObj'>Title</p></div>
        <div id='content' style='display: none;'>...stuff</div>
    </div>

</div> 
```

当您单击 clickObj 中的标题时，关联的内容 div 会向下滑动。然后我希望父容器滑动到包装器 div 的顶部，用它推或拉其他容器 div。希望这是有道理的。

我查看了 scrollTo ，但不确定如何将它用于这样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:24:14.690

```
 $(".clickObj").click(function() {
        $(window).scrollTo($(this).offset().left, $(this).offset().top);
    }); 
```

像这样的东西？（使用jQuery）

# android - 仅 Android TileMode X 或 Y？

> ID：11934845
> 
> 赞同：2
> 
> 时间：2012-08-13T13:05:53.830
> 
> 标签：android

在我的活动布局中，有一个背景，应该由 Y 重复。重复背景没有问题，当它在 X 和 Y 上重复时（只需添加`android:tileMode="repeat"`）。此外，在 Android API 15 上执行此操作也没有问题：

```
RelativeLayout layout = (RelativeLayout) findViewById(R.id.container_layout);

BitmapDrawable bg = (BitmapDrawable)getResources().getDrawable(R.drawable.my_repeating_bg);
bg.setTileModeX(TileMode.REPEAT);`
layout.setBackground(bg); 
```

但是该方法`setBackground(<BitmapDrawable>)`在 Android API < 16 上不可用。当我想在 Android 2.3 中仅按 X 或 Y 重复我的背景时该怎么办？谢谢。PS背景的宽度和高度都是`MATCH_PARENT`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T13:11:03.767

您可以`drawable`在此格式的文件夹（或任何可绘制文件夹）中创建一个 xml 文件。

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/my_repeating_bg"
    android:tileMode="repeat" /> 
```

然后做：

```
layout.setBackgroundResource(R.drawable.name_of_xml_drawable); 
```

如果布局的宽度设置为`wrap_content`，则只会平铺 Y。如果布局的高度设置为`wrap_content`，则只会平铺 X。将两者设置为`match_parent`或`fill_parent`将平铺 X 和 Y。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T07:05:49.597

好的，所以我找到了答案。我只需要检查版本并使用适当的方法。

```
 RelativeLayout layout = (RelativeLayout) fragmentView.findViewById(R.id.container);
    BitmapDrawable bg = (BitmapDrawable)fragmentView.getResources().getDrawable(R.drawable.background);
    bg.setTileModeY(TileMode.REPEAT);
    if(Build.VERSION.SDK_INT < Build.VERSION_CODES.JELLY_BEAN)
        layout.setBackgroundDrawable(bg);
    else
        layout.setBackground(bg); 
```

# c++ - dlopen 可能出现段错误的潜在原因？

> ID：11934847
> 
> 赞同：8
> 
> 时间：2012-08-13T13:06:00.330
> 
> 标签：c++, gcc, segmentation-fault, opensuse, dlopen

除了共享对象不存在之外，dlopen 可能出现段错误的一些原因是什么？

就我而言，我知道共享对象存在，但是当我的程序使用 dlopen 加载它时，它会出现段错误。我检查了我的 lib 文件夹，共享对象在那里，路径都正确。

```
 handle = dlopen(libraryName.c_str(), RTLD_LAZY | RTLD_GLOBAL); 
```

gdb BT：

```
#0  0x00000000001b94f5 in ?? ()
#1  0x00007fffefd96db6 in __do_global_ctors_aux () from /usr/local/lib/MY_LIB2.so
#2  0x00007fffefcf82c3 in _init () from /usr/local/lib/MY_LIB2.so
#3  0x00007fffed69c6c8 in ?? () from /usr/local/lib/MY_LIB1.so
#4  0x00007ffff7de9dc4 in call_init () from /lib64/ld-linux-x86-64.so.2
#5  0x00007ffff7de9ef6 in _dl_init_internal () from /lib64/ld-linux-x86-64.so.2
#6  0x00007ffff7dedf43 in dl_open_worker () from /lib64/ld-linux-x86-64.so.2
#7  0x00007ffff7de9c36 in _dl_catch_error () from /lib64/ld-linux-x86-64.so.2
#8  0x00007ffff7ded7ca in _dl_open () from /lib64/ld-linux-x86-64.so.2
#9  0x00007ffff5c5af26 in dlopen_doit () from /lib64/libdl.so.2
#10 0x00007ffff7de9c36 in _dl_catch_error () from /lib64/ld-linux-x86-64.so.2
#11 0x00007ffff5c5b4cf in _dlerror_run () from /lib64/libdl.so.2 
#12 0x00007ffff5c5afc1 in dlopen@@GLIBC_2.2.5 () from /lib64/libdl.so.2
#13 0x00007ffff6ecef7e in mynamespace::Factory::attachModule (this=0x61d440,    libraryName=...) at Factory.cpp:324
#14 0x00007ffff6ecefe6 in mynamespace::Factory::attachFunction (this=0x61d440, functionName=..., moduleName=...) at Factory.cpp:343
#15 0x00007ffff6ecdd16 in mynamespace::Factory::ReadFile (this=0x61d440, x=...) at Factory.cpp:111
#16 0x00007ffff6ecda62 in mynamespace::Factory::ReadDirectory (this=0x61d440, x=...) at Factory.cpp:79
#17 0x00007ffff6ecdc66 in mynamespace::Factory::ReadDirectory (this=0x61d440, x=0x417901 "/usr/local/lib/") at Factory.cpp:105 
```

#18 0x0000000000410637 在 main (argc=2, argv=0x7fffffffdd58) 在 main.cpp:78

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T14:21:58.310

除了将库加载到内存和修复引用之外，运行时链接器还运行初始化程序，例如标记为 的函数`__attribute__((constructor))`、一个 init 函数（如果用 指定`-Wl,-init,...`）和全局对象的构造函数。您的回溯表明其中一个失败了。

具体来说，`__do_global_ctors_aux`为全局对象运行构造函数。检查那些。

# jquery - 吸盘鱼菜单和adgallery之间的冲突

> ID：11934850
> 
> 赞同：0
> 
> 时间：2012-08-13T13:06:35.580
> 
> 标签：jquery, css, suckerfish

我正在开发的一个网站使用 JQuery 的 ADGallery 和 Superfish 菜单。我遇到的问题与图层堆叠的方式有关。

[http://severnsystems-sms.co.uk/pd_about_us.htm](http://severnsystems-sms.co.uk/pd_about_us.htm)页面演示了该问题。将鼠标悬停在“配置文件”菜单上会显示幻灯片编号以及菜单顶部的“下一个”箭头。

我已将菜单项的 z-index 设置为高于其他项目，所以我不明白为什么它应该以它的方式显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:30:56.753

添加`position: relative; z-index: 120`到您的父级`ul`- `.sf-menu`。我会帮你的 ;）

# macos - PHPUnit安装问题

> ID：11934851
> 
> 赞同：1
> 
> 时间：2012-08-13T13:06:35.980
> 
> 标签：macos, phpunit, mamp

当我在命令下运行时它会出错。

梨安装 pear.phpunit.de/PHPUnit

```
WARNING: channel "pear.phpunit.de" has updated its protocols, use "pear channel-update
pear.phpunit.de" to update
downloading PHPUnit-3.6.12.tgz ...
Starting to download PHPUnit-3.6.12.tgz (119,220 bytes)
..........................done: 119,220 bytes
ERROR: failed to create /Applications/MAMP/bin/php5.3/share/pear/PHPUnit/Extensions 
/PhptTestCase/.tmpLogger.php: fopen(/Applications/MAMP/bin/php5.3/share/pear/PHPUnit 
/Extensions/PhptTestCase/.tmpLogger.php): failed to open stream: Permission denied 
```

我正在使用 mac 和 mamp，我想安装 PHPUnit，请帮助。

---编辑---

我授予了一些权限，现在它显示以下错误无法删除/Applications/MAMP/bin/php5.3/bin/phpunit，无法重命名/Applications/MAMP/bin/php5.3/bin/.tmpphpunit

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:30:40.357

好像权限有问题。

1.  rm -rf /Applications/MAMP/bin/php5.3/bin/phpunit
2.  chmod 0777 /Applications/MAMP/bin/php5.3/ -r

然后重新安装phpunit。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:25:32.243

使用 root 运行安装`sudo`。

```
sudo pear install pear.phpunit.de/PHPUnit 
```

# c# - 取消处理（注销）系统范围的“热键”

> ID：11934853
> 
> 赞同：3
> 
> 时间：2012-08-13T13:06:40.803
> 
> 标签：c#, events, keyboard-events, hotkeys, unhandled

我已经定义了一个`HotKey` `Ctrl + Space`来激活我的 Windows 窗体。当表单处理 this`HotKey`时，系统不会看到此事件。随后有什么方法可以取消处理这些击键吗？（也就是说，注销`HotKey`.）

这是我尝试过的：

```
private int tuyen_HotKey_Active = 1208132019;

private void Reg_HotKey(bool mode)
{
    if (mode)
    {
        RegisterHotKey(this.Handle, tuyen_HotKey_Active, 2, 32); // Ctrl + Space
    }
    else
    {
        UnregisterHotKey(this.Handle, tuyen_HotKey_Active);
    }
}

protected override void WndProc(ref Message m)
{            
    if (m.Msg == 0x0312) if(m.WParam.ToInt32() == tuyen_HotKey_Active)
    {
        // Do something here. I want Ctrl + Space keystroke to be
        // unhandled here so that it can be seen by the system.
    }
    base.WndProc(ref m);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:13:11.753

创建一个全局布尔变量。将其值设置为 false。

在 Windows KeyDown 事件中，检查该 bool 变量是否为 true 从方法返回。

当您想要取消处理这些击键时，将其值设置为 true，而当您想要处理这些击键时，将其值设置为 false。

```
public bool flag = false;

public void Window_KeyDown(object sender, KeyEventArgs e)
{
    if (flag)
        return;

    //.. Code Here something
} 
```

现在您只需设置此标志值来处理或取消处理您的击键。

# osgi - 一类的 OSGi 动态版本

> ID：11934854
> 
> 赞同：0
> 
> 时间：2012-08-13T13:06:46.710
> 
> 标签：osgi

我有 OSGi 包，其中一个服务类由两个客户端使用。两个客户端都使用相同版本的服务类说 1.0，现在我对服务类进行了一些更改并更新了服务类的版本说 1.1，现在我的问题是我想要两个服务类的版本意味着一个客户端可以使用1.0版本和另外一个客户端可以用1.1怎么能实现呢？如果任何示例可以为我提供动态版本控制，它对我真的很有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:05:24.843

我认为 OSGi 没有真正的服务版本概念，但您可以在注册服务时使用任何您喜欢的键/值对。我认为[Knopflerfish 教程](http://www.knopflerfish.org/osgi_service_tutorial.html)非常好。

例如，注册服务时：

```
Hashtable props = new Hashtable();
props.put("version", "1.0");
bundleContext.registerService(ServiceInterface.class.getName(), impl, props); 
```

然后，在使用服务时，您可以使用这些属性来要求某些属性。

拥有该服务的多个版本非常容易，棘手的部分是服务消费者如何处理它。

如果您有两个使用 1.0 版本的消费者，并且出现了 1.1（例如，当一个新的捆绑包已经启动时），消费者是否应该停止使用 1.0 并开始使用 1.1？在您的示例中，一个消费者应该忽略这一点，而另一个应该重新连接到 1.1。当一个消费者使用多项服务时，这会变得特别复杂。

我建议研究声明式服务，它可以使这变得更容易并保持你的代码更干净，我会说[从这里开始](http://wiki.osgi.org/wiki/Declarative_Services)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T21:29:03.547

服务的版本是它实现的**接口**的版本，它来自该接口所在的导出包的版本。

服务实现类版本无关紧要，因为服务的消费者不知道实现类。因此，如果您使用相同的接口注册多个服务，它们对消费者都是可见的。

# c# - 保存图像 在dxl文件到本地机器，c#

> ID：11934855
> 
> 赞同：1
> 
> 时间：2012-08-13T13:06:51.440
> 
> 标签：c#, .net, lotus-notes

主题：如何在本地机器上保存 dxl 文件的 notesbitmap 标签中的图像

产品领域：Lotus Notes 客户端

## 如何将图像从 dxl 保存到本地机器，c#

我有 dxl 文件，我想在本地机器上保存图像，即使我设置了 dxlExporter.ConvertNotesbitmapsToGIF = true;

我得到的图像标签如下。

笔记位图

```
xP8gAAEAAQAAAAgAAAAAAAAAAAAAAAAAU1RHNjI2NTeVACYAAAAAAAAAAAAAAAAAAAAAAAAA0wF/
AAAAAAAAAAAAAAAAAA== 
```

笔记位图

具有以下 dxl - 节点

1) 笔记位图

笔记位图

```
xP8gAAEAAQAAAAgAAAAAAAAAAAAAAAAAU1RHNjI2NTeVACYAAAAAAAAAAAAAAAAAAAAAAAAA0wF/
AAAAAAAAAAAAAAAAAA== 
```

笔记位图

2) 文件数据

文件

文件数据

```
AQAYCQEAmQAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAH0AHAAAAAEA0wF/ANMIAAABAAAAAAAA
AAAAAAB8AN4IAADTCNQIR0lGODlh0wF/AOcAANDQyICAgAAAAEBAQP///wAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA+CHL/745Jdv/vno
p6/++teVfvr74bkP//zIyU///YtvviT+/H9nf/8AdM3/AkhAwemvS50roALZMsAFOtAsDXygBMMS
wQlakCsVvKAGTeW4DXowSQcUVNkwQ0iURRKRW8lggA6JF1QiSZWujCVPYCnLWtKylrG8
JS5RqctdwrGXvnQhMIPpwWESE1SZS6Yyl4m5BHXwmPtK2wvz1hNjQrNS0nyV5p55TXplczaMq6Yi
dZXAbtrqm5HrIR6VEs5ZjpMugqgBBaoojGaUoG1pp0UH6tF2aVQuImXPO9cF0pI66qRxSWlOrOlS
LQlgADjNqU53ytOe+vSnQA0qTjnKqZrikqZGnR9Sk/q+pTLVdE59quiiKlXPUbWqj8OXULfK1a56
9atgDatYx0rWspr1rGhNq1rXyta2etV6cI2rXOdK17ra9a54zate98rXvvr1rzIJCAA7Pw== 
```

文件数据

文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T19:27:19.630

您可以使用此问题/答案中的信息吗？[Lotus Notes DXL Notesbitmap 转 GIF](https://stackoverflow.com/questions/12003916/lotus-notes-dxl-notesbitmap-to-gif)

使用任何在线 Base64 解码器查看第一个 Notesbitmap 元素中的 STG 文件名，然后在 DXL 文件中找到该元素。

# delphi - 出现异常重启服务

> ID：11934858
> 
> 赞同：4
> 
> 时间：2012-08-13T13:07:04.683
> 
> 标签：delphi, windows-services

我正在开发必须自行重启的服务应用程序。有什么方法可以做到这一点？如果停止，是否可以再次询问系统启动应用程序？我正在使用德尔福 2007。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T20:50:44.970

[`ChangeServiceConfig2()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681988.aspx)您的服务可以通过在其`AfterInstall`事件内部调用 Win32 API 函数，以编程方式为自己配置恢复选项。设置`dwInfoLevel`to`SERVICE_CONFIG_FAILURE_ACTIONS`并设置`lpInfo`to 指向一条记录，该`SERVICE_FAILURE_ACTIONS`记录描述了您希望在服务失败时发生的情况。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-13T13:09:22.530

如果您进入`services.msc`，您可以为您的服务配置它。您不必在代码中执行此操作。当您打开服务的属性时，请查看“恢复”选项卡。

# javascript - D3：使用嵌套函数将带有父键的平面数据转换为层次结构

> ID：11934862
> 
> 赞同：10
> 
> 时间：2012-08-13T13:07:22.280
> 
> 标签：javascript, json, nested, operators, d3.js

我敢肯定有一种非常简单优雅的方法可以做到这一点，但我无法弄清楚。我有一些看起来像这样的输入数据：

```
[
{id: 1, name: "Peter"},
{id: 2, name: "Paul", manager: 1},
{id: 3, name: "Mary", manager: 1},
{id: 4, name: "John", manager: 2},
{id: 5, name: "Jane", manager: 2}
] 
```

如果可能，我想使用 d3.js 嵌套运算符来获取要在层次结构布局中使用的结构。像这样：

```
[ 
   {name: "Peter", children: [
          {name:"Paul", children: [
              {name:"John"},
              {name:"Jane"}
          ]},
          {name:"Mary"}
      ]
   }
] 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-14T03:45:25.590

您不能在此处使用嵌套运算符，因为嵌套会产生固定的层次结构：输出层次结构中的级别数与您指定的键函数数相同。

也就是说，您可以编写自己的函数来生成树。假设根节点是输入数组中的第一个节点，可以创建一个从 id 到节点的映射，然后懒惰地构造树。

```
function tree(nodes) {
  var nodeById = {};

  // Index the nodes by id, in case they come out of order.
  nodes.forEach(function(d) {
    nodeById[d.id] = d;
  });

  // Lazily compute children.
  nodes.forEach(function(d) {
    if ("manager" in d) {
      var manager = nodeById[d.manager];
      if (manager.children) manager.children.push(d);
      else manager.children = [d];
    }
  });

  return nodes[0];
} 
```

如果您知道节点按顺序列出以便经理出现在他们的报告之前，您可以将代码简化为只迭代一次。

# java - 为什么“有”不是...有效 JavaBean 方法签名的开头？

> ID：11934866
> 
> 赞同：8
> 
> 时间：2012-08-13T13:07:44.690
> 
> 标签：java, javabeans

JavaBeans 方法的签名必须遵循某些约定，例如 set.../get... 等。他们有一个约定是......例如`isEven()`可以是一个 Integer 类测试布尔值的方法。但后来我想知道为什么 not have... 也是一个合法的标识符，因为对我来说测试某些东西有什么是有意义的，例如`hasCar()`Person 类或类似的东西。

你明白我的问题吗？你怎么看？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T13:15:59.973

好吧，一般约定是使用`get...`，`set...`因此`is...`只是布尔值的一个例外。因为`is...`约定很简单：您需要返回一个布尔值，可以跳过 getter，相应的 setter 也将采用布尔参数。

for 的约定`has...`会更加困难：`has...`会返回一个布尔值，但您仍然需要一个处理不同类型的 getter 和 setter。因此`has...`不能替代`get...`相反`is...`，因为 JavaBeans 约定的那部分通常只涉及 getter，而 setter`has...`不适合其中。

来自 JavaBeans 规范：

> 属性是 Java Bean 的离散的、命名的属性...
> 
> 属性以多种方式显示：
> 
> 1.  ...
> 2.  其他组件可以通过调用它们的*getter* 和*setter*方法以编程方式访问属性（参见下面的第 7.1 节）。
> 3.  ...

任何被使用的属性`has...`都不会是持久的，也不会被它的 getter 方法访问。

例子：如果一个人有一个`car`属性，你会期望有一个`getCar()`访问器。`hasCar()`不会是访问器，因为派生属性`hasCar`需要一个名为 `getHasCar()`or的访问器`isHasCar()`。如果`has`是访问器前缀，则该属性将具有冲突的名称`car`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:27:59.013

`get/set`而`is/set`布尔类型只是惯例。我同意有时调用 getter 更具可读性`hasSomething`。例如`hasChildren()`. 但是让我们继续说调用方法`canWrite()`或等是`willFly()`可以的`providesResult()`。您可以使用这样的名称，但这些名称不遵循 java bean 约定，因此不会被 java bean 框架识别为 getter。

Java Beans 是多年前发明的。定义注解`@Setter`和`@Getter`. 如果这些注解变得普遍，所有的 java bean 框架都可以支持它们，程序员将能够根据需要调用 getter，但用注解标记它们`@Getter`。但是现在不支持这样的注释，所以唯一的建议是遵循现有的命名约定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T13:15:29.563

我认为这根本不是一个坏问题！我也想过这一点，发现人们确实[像您打算使用它一样使用它](http://ugate.wordpress.com/2012/06/)。只是大多数库（比如您可能使用的库）没有。

我同意它应该对布尔属性有效。

# function - 是否有用于修改其参数的函数的术语？

> ID：11934869
> 
> 赞同：0
> 
> 时间：2012-08-13T13:07:48.257
> 
> 标签：function, computer-science, pass-by-reference

我并没有真正接受过 CS 或数学方面的经典教育。我只是想在传递引用的laungauges（例如php）中应该有一个术语。IE。返回结果的函数（例如您希望大多数函数如何工作）与修改参数的函数。有这样的说法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:14:10.017

我听到的与您所谈论的内容有关的唯一术语是：*参数幂等*

简单地说，这种类型的函数保证了参数保持不变。

至于改变参数的函数，我没有听到任何特定的术语，但我只是说：*参数变异*。

根据我的经验，任何引用对象的函数都可以相当安全地打赌，它会以某种方式改变该参数。

# sql-server - 我应该在这种情况下使用合并吗？

> ID：11934871
> 
> 赞同：0
> 
> 时间：2012-08-13T13:07:53.360
> 
> 标签：sql-server

我有一张从外部来源更新的表格。它通常是空的，直到他们将数据推送给我。有了这些数据，我应该在另外两个表中添加、更新或删除记录（通过主键/外键链接）。数据一次一行地推送给我，有时一年两次大量下载。他们希望我实时更新我的​​表格。我应该使用触发器并让它逐行读取或合并表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:20:06.163

我有一个运行 sproc 的计划作业来检查该表中要执行的工作，然后他们分批处理它们。在导入/暂存表上有一个列，您可以使用批次号或时间戳对其进行更新，这样如果出现问题（比如他们向您推送了一些愚蠢的数据），您就知道从哪里重新开始，并且可以确定是哪一行导致了问题。

如果您使用触发器，它不仅可能会减慢他们为您提供大量数据的速度，而且您还可能会失去记录流程在失败时到达何处的能力。

如果它总是一次一行，那么我认为触发方法是好的选择。

编辑：只是为了澄清关于批号/时间戳的观点，如果您有新的/意外数据导致导入崩溃，您可以更改代码并根据需要重新运行该过程，而无需请求新鲜进口。

# javascript - 删除自执行匿名函数

> ID：11934875
> 
> 赞同：1
> 
> 时间：2012-08-13T13:08:06.523
> 
> 标签：javascript, jquery, anonymous-function

我正在使用匿名函数和 Slider() 函数。我只需要一个功能中的所有相同功能。我正在使用的匿名函数应该被删除。下面的代码应该成为一个函数。

这是我尝试过的：

[http://jsfiddle.net/QNZDX/5/](http://jsfiddle.net/QNZDX/5/)

```
$(function() {
        //FadeIn/FadeOut Image on Set Time Interval on Slide
        timer=setInterval(Slider, mainInterval);
        var div=$('<div id="paging_inner"></div>');
        for(i=0;i<maximages;i++)
        {
            div.append($('<a id="page_'+(i+1)+'" data-index="'+(i+1)+'"><span></span></a>'));
        }
        $('#paging').append(div);

        $('#paging a').on('click', function(e){
          e.preventDefault();
          clearInterval(timer);
          prevIndex=$(this).attr('data-index')-1;
          $('#paging div a span').stop(1,1);
          Slider();
          timer=setInterval(Slider, mainInterval);
        });

    });

    function Slider() {
        $('#imageSlide').fadeOut("slow", function() {
            if (prevIndex >= maximages) prevIndex = 0;

            $("#panel").fadeIn("slow").css('background', '#000');

            var title = $xmldata.find("images").find("image:eq(" + prevIndex + ")").find("title").text();
            $("#title").text(title).fadeIn("slow");

            var imgurl = $xmldata.find("images").find("image:eq(" + prevIndex + ")").find("url").text();
            $(this).attr('src', imgurl).fadeIn("slow");

            var desc = $xmldata.find("images").find("image:eq(" + prevIndex + ")").find("desc").text();
            $("#desc").text(desc).fadeIn("slow");
            $('#paging a span')
            .removeClass('active').css('display','block');
            $('#paging a#page_'+(prevIndex+1)+' span')
            .addClass('active')
            .slideUp(mainInterval);
            prevIndex++;

        });
    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:48:52.003

首先，

> 它不仅仅是一个匿名函数——它是一个自调用匿名函数

但在这种情况下，根本没有必要，

这将与以前一样工作

```
//FadeIn/FadeOut Image on Set Time Interval on Slide
timer = setInterval(Slider, mainInterval);
var div = $('<div id="paging_inner"></div>');
for (i = 0; i < maximages; i++) {
    div.append($('<a id="page_' + (i + 1) + '" data-index="' + (i + 1) + '"><span></span></a>'));
}
$('#paging').append(div);

$('#paging a').on('click', function(e) {
    e.preventDefault();
    clearInterval(timer);
    prevIndex = $(this).attr('data-index') - 1;
    $('#paging div a span').stop(1, 1);
    Slider();
    timer = setInterval(Slider, mainInterval);
});

function Slider() {
    $('#imageSlide').fadeOut("slow", function() {
        if (prevIndex >= maximages) prevIndex = 0;

        $("#panel").fadeIn("slow").css('background', '#000');

        var title = $xmldata.find("images").find("image:eq(" + prevIndex + ")").find("title").text();
        $("#title").text(title).fadeIn("slow");

        var imgurl = $xmldata.find("images").find("image:eq(" + prevIndex + ")").find("url").text();
        $(this).attr('src', imgurl).fadeIn("slow");

        var desc = $xmldata.find("images").find("image:eq(" + prevIndex + ")").find("desc").text();
        $("#desc").text(desc).fadeIn("slow");
        $('#paging a span').removeClass('active').css('display', 'block');
        $('#paging a#page_' + (prevIndex + 1) + ' span').addClass('active').slideUp(mainInterval);
        prevIndex++;

    });
} 
```

> 在函数内部用“var”声明的任何东西都是该函数私有的，不能从函数外部访问。这实际上是使用自调用匿名函数的主要原因：提供一个本地范围，您可以在其中设置函数和变量，而不会弄乱全局命名空间。

查看[更新的演示](http://jsfiddle.net/QNZDX/6/)

# jquery - Jquery对任何事情都没有反应

> ID：11934876
> 
> 赞同：0
> 
> 时间：2012-08-13T13:08:06.573
> 
> 标签：jquery

我有这个 jquery 片段。由于它没有向我传递值，因此我将采用各种方法来找出原因，包括函数回调以查看发生了什么。然而什么都没有显示。两个不同的例子

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
//jquery code for source list
$(document).ready(function()
     {
      $('#country').change(function() 
         {
            if ($(this).val()!='') 
              {
                $("#source").load("/CI-3/application/controllers/control_form.php",   {pais_id: $(this).val()}, function() 
            {
          alert('Load was not performed.'));
            }

    });

});  // end of country and city function
</script> 
```

所以这是应该在更改值时激活 jquery 的选择列表：

```
<?php echo form_open('control_form/add_all'); ?>
       <label for="country">Country<span class="red"></span></label>
        <select id="country" name="country">
            <option value="">Select</option>
            <?php

                foreach($result as $row)
                {
                echo '<option value="' . $row->pais_id . '">' . $row->pais_name . '</option>';
                }

            ?>
        </select> 
```

还有一个不同的例子：

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
$(document).ready(function()
        {
             $('#country').change(function() 
                  {
                  if ($(this).val()!='') 
                      {
                               $("#loquesea").load("/not-here.php", function(response, status, xhr) 
                                    {
                                if (status == "error") 
                                      {
                                          var msg = "Sorry but there was an error: ";
                                          $("#error").html(msg + xhr.status + " " + xhr.statusText);
                                          }
                                });

                         });
                  });

                 });

</script>
</head>
<body>
<b>Successful Response (should be blank):</b>
<div id="success"></div>
<b>Error Response:</b>
<div id="error"></div>

<form action="">
<select id = "country" name="country">
<option value="volvo">Volvo</option>
<option value="saab">Saab</option>
<option value="fiat">Fiat</option>
<option value="audi">Audi</option>
</select>
</form>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:14:30.690

括号有*很多*错误。修复它们，您的代码将起作用。使用正确的缩进作为指导。

```
$(document).ready(
     function()
     {
         $('#country').change(
             function() 
             {
                 if ($(this).val()!='') 
                 {
                        $("#source").load("/CI-3/application/controllers/control_form.php",   
                                          {pais_id: $(this).val()}, 
                                           function() 
                                                  {
                                             alert('Load was not performed.'); // 1st fix
                                                }
                                         ); // 2nd fix

                  } 
                } // 3rd fix... and so on 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:15:04.353

您的 html 中没有带有 id 源的元素，因此您的选择器将`$("#source")`

改变

```
$("#source") 
```

到

```
$("#success") 
```

缺少`}`支架`if ($(this).val() != ''){`

```
$(document).ready(function() {
    $('#country').change(function() {
        if ($(this).val() != '') {
            $("#loquesea").load("/not-here.php", function(response, status, xhr) {
                if (status == "error") {
                    var msg = "Sorry but there was an error: ";
                    $("#error").html(msg + xhr.status + " " + xhr.statusText);
                }
            });
        }

        });
    }); 
```

# iphone - 如何使用标签打印 Uitextfield 上的值？

> ID：11934877
> 
> 赞同：0
> 
> 时间：2012-08-13T13:08:07.087
> 
> 标签：iphone, objective-c, xcode, ios5

我有一个带有标签的文本字段。以下循环创建 20 个文本字段。

```
txt_Pos_Y =20;

for (j=0; j<20; j++) {

if (j<20) {
txtField = [[UITextField alloc] initWithFrame:CGRectMake(110, txt_Pos_Y, 100, 15)];
txtField.borderStyle = UITextBorderStyleRoundedRect;
txtField.font = [UIFont systemFontOfSize:11];
txtField.tag = j;
txtField.placeholder = @"Enter Value";
txtField.autocorrectionType = UITextAutocorrectionTypeNo;
txtField.keyboardType = UIKeyboardTypeDefault;
txtField.returnKeyType = UIReturnKeyDone;
txtField.clearButtonMode = UITextFieldViewModeWhileEditing;
txtField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;    
txtField.delegate = self;
[scrollView addSubview:txtField];
[txtField release];  
}
}

-(void)CalculateMethod{

txtField.tag = 1;

double a;

a = Var_sqFt * Var_sqMtr;

txtField.text = [[NSString alloc] initWithFormat:@"%.4f",a];    
} 
```

在 CalculateMethod() 我想在 txtField.text 中显示“a”的值，但我无法在 txtField.tag = 1 上打印该值；

该值显示在底部 textfeild 表示 txtField.tag =19;

我想在 txtField.tag = 1 文本字段上显示“a”的值。

像这样

txtField.tag = 1 txtField.text.tag = [[NSString alloc] initWithFormat:@"%.4f",a];

这该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T13:11:56.947

用这个

```
-(void)CalculateMethod {
    UITextField *txtFld = (UITextField*)[scrollView viewWithTag:1];
    double a;
    a = Var_sqFt * Var_sqMtr;
    txtFld.text = [[NSString alloc] initWithFormat:@"%.4f",a];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:02:55.207

**版本 #1**

```
NSMutableDictionary *textFieldsDictionary = [NSMutableDictionary dictionary]; // SPOt THe DIFFERENCE HERE

CGFloat txt_Pos_Y =20;

for (int j=0; j<20; j++) {
    UITextField *txtField = [[UITextField alloc] initWithFrame:CGRectMake(110, txt_Pos_Y, 100, 15)];
    txtField.borderStyle = UITextBorderStyleRoundedRect;
    txtField.font = [UIFont systemFontOfSize:11];
    txtField.tag = j;
    txtField.placeholder = @"Enter Value";
    txtField.autocorrectionType = UITextAutocorrectionTypeNo;
    txtField.keyboardType = UIKeyboardTypeDefault;
    txtField.returnKeyType = UIReturnKeyDone;
    txtField.clearButtonMode = UITextFieldViewModeWhileEditing;
    txtField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
    txtField.delegate = self;
    [scrollView addSubview:txtField];
    [textFieldsDictionary setObject:txtField forKey:[NSString stringWithFormat:@"%d", j]]; // SPOT THE DIFFERENCE HERE
    [txtField release];
} 
```

和：

```
-(void)CalculateMethod{
    UITextField *txtField = [textFieldsDictionary valueForKey:[NSString stringWithFormat:@"%d", 1]];
    double a = 3.1415f;
    txtField.text = [[NSString alloc] initWithFormat:@"%.4f", a]; 
} 
```

* * *

**版本 #2**

您应该只更改此方法。

```
-(void)CalculateMethod{
    UITextField *txtField = nil;
    for (id temporarySubView in scrollView.subviews) {
        if ([temporarySubView isKindOfClass:[UITextField class]]) {
            if (((UITextField *)temporarySubView).tag == 1) {
                txtField = temporarySubView;
                break;
            }
        }
    }

   double a = 3.1415f;
   txtField.text = [[NSString alloc] initWithFormat:@"%.4f", a];
} 
```

# .net - 我在哪里放置 Microsoft.Scripting.Debugging 以便我们的嵌入式解释器可以找到它？

> ID：11934879
> 
> 赞同：0
> 
> 时间：2012-08-13T13:08:10.460
> 
> 标签：.net, ironpython, pdb

我正在尝试调试我编写的函数，但由于我们在启动嵌入应用程序的函数时所做的所有诡计多端的操作，因此无法在常规 IronPython 解释器中运行它。

但是，当我尝试运行调试器时：

```
import pdb
pdb.runcall(myFunction) 
```

我收到这条消息：

> 无法加载文件或程序集“Microsoft.Scripting.Debugging，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

我将 DLL 放在哪里以便嵌入式解释器可以使用它？目前，我将它与 IronPython 库放在同一个文件夹中。

```
application folder
    resources folder
        IronPython folder
            DLL here
            Libs folder 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:41:48.853

将它放在 IronPython.dll 旁边的 DLLs 文件夹中应该可以工作。如果没有，您可以随时制作手册`Assembly.Load`以提前或`clr.AddReferenceFromFileAndPath`在 Python 中引入它。

# ios - 首次应用内购买 - 无效的产品 ID

> ID：11934882
> 
> 赞同：2
> 
> 时间：2012-08-13T13:08:34.450
> 
> 标签：ios, in-app-purchase, storekit

这是我第一次设置应用内购买，我被卡住了。当我尝试提出产品请求时，我收到错误“无效的产品 ID：TVRBIBLIA001”。我在 Stack Overflow 中看到了几个问题，寻找可能的解决方案但没有成功，所以我发布了自己的问题。这是我的应用内购买的设置。

![应用内购买设置 1](../Images/707d1f861aa73c056530f67495276404.png) ![应用内购买设置 2](../Images/4bf74ee2cf819ec9d1e0aea3d16c6956.png)

这是我的代码：

```
#pragma mark -
#pragma mark Remove Ads InApp Purchase
- (IBAction)requestRemoveAdsProductData
{
    NSSet *productIdentifiers = [NSSet setWithObject:@"TVRBIBLIA001"];
    productsRequest = [[SKProductsRequest alloc] initWithProductIdentifiers:productIdentifiers];
    productsRequest.delegate = self;
    [productsRequest start];

    // we will release the request object in the delegate callback
}

#pragma mark -
#pragma mark SKProductsRequestDelegate methods

- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response
{
    NSArray *products = response.products;
    removeAdsProduct = [products count] == 1 ? [[products firstObject] retain] : nil;
    if (removeAdsProduct)
    {
        NSLog(@"Product title: %@" , removeAdsProduct.localizedTitle);
        NSLog(@"Product description: %@" , removeAdsProduct.localizedDescription);
        NSLog(@"Product price: %@" , removeAdsProduct.price);
        NSLog(@"Product id: %@" , removeAdsProduct.productIdentifier);
    }

    for (NSString *invalidProductId in response.invalidProductIdentifiers)
    {
        NSLog(@"Invalid product id: %@" , invalidProductId);
    }

    // finally release the reqest we alloc/init’ed in requestProUpgradeProductData
    [productsRequest release];

    [[NSNotificationCenter defaultCenter] postNotificationName:kInAppPurchaseManagerProductsFetchedNotification object:self userInfo:nil];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:38:13.790

**解决方案：**从设备中删除App并重新安装id。[通过](http://troybrant.net/blog/2010/01/invalid-product-ids/)

# android - Android：4.0.4 ICS 设备上的活动窗口已终止 (WINDOW DIED)

> ID：11934883
> 
> 赞同：0
> 
> 时间：2012-08-13T13:08:41.813
> 
> 标签：android, android-activity, android-4.0-ice-cream-sandwich

我在我的一个活动中的 4.0 ICS 设备中收到 IllegalArgumentException ..

I/WindowManager（529）：WINDOW DIED 窗口{419a4a18 XXX.XXXXXX.XXX.XXX/XXX.XXXXXX.XXX.XXX.XXXXXXXXXXXXXXXXXXXXX 暂停=假}

```
E/SurfaceTexture(  225): [com.sample/com.sample.MyActivity] dequeueBuffer: SurfaceTexture has been abandoned!

E/SurfaceTextureClient( 9044): dequeueBuffer failed (No such device)
E/ViewRootImpl( 9044): IllegalArgumentException locking surface
E/ViewRootImpl( 9044): java.lang.IllegalArgumentException
E/ViewRootImpl( 9044):  at android.view.Surface.lockCanvasNative(Native Method)
E/ViewRootImpl( 9044):  at android.view.Surface.lockCanvas(Surface.java:76)
E/ViewRootImpl( 9044):  at android.view.ViewRootImpl.draw(ViewRootImpl.java:2157)
    E/ViewRootImpl( 9044):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1846)
    E/ViewRootImpl( 9044):  at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2658)
    E/ViewRootImpl( 9044):  at android.os.Handler.dispatchMessage(Handler.java:99)
    E/ViewRootImpl( 9044):  at android.os.Looper.loop(Looper.java:137)
    E/ViewRootImpl( 9044):  at android.app.ActivityThread.main(ActivityThread.java:4514)
    E/ViewRootImpl( 9044):  at java.lang.reflect.Method.invokeNative(Native Method)
   E/ViewRootImpl( 9044):   at java.lang.reflect.Method.invoke(Method.java:511)
   E/ViewRootImpl( 9044):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
   E/ViewRootImpl( 9044):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
    E/ViewRootImpl( 9044):  at dalvik.system.NativeStart.main(Native Method) 
```

新日志：16 -08 -2012

使用设备：三星 Galaxy S3

安卓版本：4.0.4

2.3 及以下版本中未出现的问题..

我有一个 TabActivity，在其中我有 childactivites（列表活动）..从我的一个子活动我去另一个活动并做一些工作，然后回到相同的子活动（更新 ListActivity 中的视图）。如果我反复执行上述操作，我得到以下异常并且屏幕变为空白。

```
08-16 15:43:00.271: I/ClipboardServiceEx(533): Send intent for dismiss clipboard dialog inside hideCurrentInputLocked() !
08-16 15:43:00.291: D/memalloc(224): ion: Allocated buffer base:0x45808000 size:3768320 fd:56
08-16 15:43:00.291: D/memalloc(27338): ion: Mapped buffer base:0x60a28000 size:3768320 offset:0 fd:93
08-16 15:43:00.291: I/Adreno200-EGLSUB(224): <CreateImage:893>: Android Image
08-16 15:43:00.291: I/Adreno200-EGLSUB(224): <GetImageAttributes:1102>: RGBA_8888
08-16 15:43:00.291: D/KeyguardViewMediator(533): setHidden false
08-16 15:43:00.291: I/ActivityManager(533): Displayed shortComponentName: +329ms
08-16 15:43:00.291: D/DEFERED_APP_VISIBILITY(533): tweaking closing app
08-16 15:43:00.301: D/KeyguardViewMediator(533): setHidden false
08-16 15:43:00.301: D/KeyguardViewMediator(533): setHidden false
08-16 15:43:00.301: D/memalloc(27338): ion: Unmapping buffer  base:0x602f8000 size:3768320
08-16 15:43:00.301: D/memalloc(27338): ion: Unmapping buffer  base:0x5ff38000 size:3768320
08-16 15:43:00.301: W/InputDispatcher(533): channel ~ Consumer closed input channel or an error occurred.  events=0x8
08-16 15:43:00.301: E/InputDispatcher(533): channel ~ Channel is unrecoverably broken and will be disposed!
08-16 15:43:00.301: W/InputDispatcher(533): Attempted to unregister already unregistered input channel
08-16 15:43:00.301: I/WindowManager(533): WINDOW DIED Window{427c45a0 XXX.XXXXXX.XX/XXX.XXXXXX.XX.XXXXXXXXXXXXXXXXXXXXX paused=false}
08-16 15:43:00.311: D/KeyguardViewMediator(533): setHidden false
08-16 15:43:00.311: D/memalloc(224): ion: Freeing buffer base:0x43117000 size:3768320 fd:62
08-16 15:43:00.311: D/memalloc(224): ion: Unmapping buffer  base:0x43117000 size:3768320
08-16 15:43:00.311: D/memalloc(224): ion: Freeing buffer base:0x434af000 size:3768320 fd:43
08-16 15:43:00.311: D/memalloc(224): ion: Unmapping buffer  base:0x434af000 size:3768320
08-16 15:43:00.311: D/memalloc(27338): ion: Unmapping buffer  base:0x5f66f000 size:3768320
08-16 15:43:00.311: D/KeyguardViewMediator(533): setHidden false
08-16 15:43:00.311: E/InputQueue-JNI(27338): channel '427c45a0 com.org.ui/com.org.ui.CreateContactActivity (client)' ~ Publisher closed input channel or an error occurred.  events=0x8
08-16 15:43:00.321: D/KeyguardViewMediator(533): setHidden false
08-16 15:43:00.321: D/memalloc(224): ion: Allocated buffer base:0x43117000 size:3768320 fd:40
08-16 15:43:00.331: D/memalloc(27338): ion: Mapped buffer base:0x5f66f000 size:3768320 offset:0 fd:61
08-16 15:43:00.341: I/Adreno200-EGLSUB(224): <CreateImage:893>: Android Image
08-16 15:43:00.341: I/Adreno200-EGLSUB(224): <GetImageAttributes:1102>: RGBA_8888
08-16 15:43:00.341: D/KeyguardViewMediator(533): setHidden false
08-16 15:43:00.361: D/KeyguardViewMediator(533): setHidden false
08-16 15:43:00.371: D/KeyguardViewMediator(533): setHidden false
08-16 15:43:00.391: D/KeyguardViewMediator(533): setHidden false
08-16 15:43:00.401: D/KeyguardViewMediator(533): setHidden false
08-16 15:43:00.421: D/KeyguardViewMediator(533): setHidden false
08-16 15:43:00.441: D/KeyguardViewMediator(533): setHidden false
08-16 15:43:00.451: D/KeyguardViewMediator(533): setHidden false
08-16 15:43:00.471: D/KeyguardViewMediator(533): setHidden false
08-16 15:43:00.491: D/KeyguardViewMediator(533): setHidden false
08-16 15:43:00.501: D/KeyguardViewMediator(533): setHidden false
08-16 15:43:00.521: D/KeyguardViewMediator(533): setHidden false
08-16 15:43:00.521: W/SurfaceFlinger(224): id=1810 Removed idx=5 Map Size=5
08-16 15:43:00.521: W/SurfaceFlinger(224): id=1809 Removed idx=3 Map Size=4
08-16 15:43:00.521: W/SurfaceFlinger(224): id=1809 Removed idx=-2 Map Size=4
08-16 15:43:00.521: W/SurfaceFlinger(224): id=1807 Removed idx=1 Map Size=3
08-16 15:43:00.521: W/SurfaceFlinger(224): id=1807 Removed idx=-2 Map Size=3
08-16 15:43:00.521: D/KeyguardViewMediator(533): setHidden false
08-16 15:43:00.551: D/memalloc(224): ion: Freeing buffer base:0x453ad000 size:3768320 fd:32
08-16 15:43:00.551: D/memalloc(224): ion: Unmapping buffer  base:0x453ad000 size:3768320
08-16 15:43:00.551: D/memalloc(224): ion: Freeing buffer base:0x43117000 size:3768320 fd:40
08-16 15:43:00.551: D/memalloc(224): ion: Unmapping buffer  base:0x43117000 size:3768320
08-16 15:43:00.571: D/memalloc(224): ion: Freeing buffer base:0x4414e000 size:1146880 fd:68
08-16 15:43:00.571: D/memalloc(224): ion: Unmapping buffer  base:0x4414e000 size:1146880
08-16 15:43:00.571: D/memalloc(224): ion: Freeing buffer base:0x42a2c000 size:3768320 fd:34
08-16 15:43:00.571: D/memalloc(224): ion: Unmapping buffer  base:0x42a2c000 size:3768320
08-16 15:43:00.691: E/MP-Decision(1408): DOWN Ld:34 Ns:1.100000 Ts:190 rq:0.000000 seq:196.000000
08-16 15:43:00.701: W/SignalStrength(533): getGsmLevel=5
08-16 15:43:00.701: W/SignalStrength(533): getLevel=5 (SignalStrength: 18 0 -120 -160 -120 -1 -1 99 2147483647 2147483647 2147483647 2147483647 gsm|lte 5)
08-16 15:43:00.701: W/SignalStrength(658): getGsmLevel=5
08-16 15:43:00.701: W/SignalStrength(658): getLevel=5 (SignalStrength: 18 0 -120 -160 -120 -1 -1 99 2147483647 2147483647 2147483647 2147483647 gsm|lte 5)
08-16 15:43:00.701: W/SignalStrength(658): getGsmLevel=5
08-16 15:43:00.701: W/SignalStrength(658): getLevel=5 (SignalStrength: 18 0 -120 -160 -120 -1 -1 99 2147483647 2147483647 2147483647 2147483647 gsm|lte 5)
08-16 15:43:00.701: W/SignalStrength(533): getDbm 1
08-16 15:43:00.701: W/SignalStrength(533): getGsmDbm=-77
08-16 15:43:00.701: W/SignalStrength(533): getDbm=-77
08-16 15:43:00.701: W/SignalStrength(533): getAsuLevel 1
08-16 15:43:00.701: W/SignalStrength(533): getGsmAsuLevel=18
08-16 15:43:00.701: W/SignalStrength(533): getAsuLevel=18
08-16 15:43:00.701: D/STATUSBAR-NetworkController(658): onSignalStrengthsChanged signalStrength=SignalStrength: 18 0 -120 -160 -120 -1 -1 99 2147483647 2147483647 2147483647 2147483647 gsm|lte 5 level=5
08-16 15:43:00.932: I/power(533): *** release_dvfs_lock : lockType : 1 
08-16 15:43:00.932: D/PowerManagerService(533): releaseDVFSLockLocked : all DVFS_MIN_LIMIT are released 
08-16 15:43:00.932: W/ActivityManager(533): mDVFSLock.release()
08-16 15:43:01.312: E/SurfaceTexture(224): [com.org.ui/com.org.ui.CreateContactActivity] dequeueBuffer: SurfaceTexture has been abandoned!
08-16 15:43:01.312: W/Adreno200-EGLSUB(27338): <SwapBuffers:763>: dequeue native buffer fail: No such device
08-16 15:43:01.312: E/SurfaceTexture(224): [com.org.ui/com.org.ui.CreateContactActivity] dequeueBuffer: SurfaceTexture has been abandoned!
08-16 15:43:01.312: W/Adreno200-EGLSUB(27338): <GetSurfaceSize:276>: dequeue native buffer failed: No such device.
08-16 15:43:01.312: E/SurfaceTexture(224): [com.org.ui/com.org.ui.CreateContactActivity] dequeueBuffer: SurfaceTexture has been abandoned!
08-16 15:43:01.312: W/Adreno200-EGLSUB(27338): <GetSurfaceSize:276>: dequeue native buffer failed: No such device.
08-16 15:43:01.312: E/Adreno200-EGL(27338): <eglSurfaceResize:4030>: EGL_BAD_ALLOC
08-16 15:43:01.312: W/HardwareRenderer(27338): EGL error: EGL_BAD_ALLOC
08-16 15:43:01.312: E/SurfaceTexture(224): [com.org.ui/com.org.ui.CreateContactActivity] queueBuffer: SurfaceTexture has been abandoned!
08-16 15:43:01.312: E/SurfaceTextureClient(27338): queueBuffer: error queuing buffer to SurfaceTexture, -19
08-16 15:43:01.312: D/memalloc(27338): ion: Unmapping buffer  base:0x60690000 size:3768320
08-16 15:43:01.312: D/memalloc(27338): ion: Unmapping buffer  base:0x60a28000 size:3768320
08-16 15:43:01.312: D/memalloc(27338): ion: Unmapping buffer  base:0x5f66f000 size:3768320
08-16 15:43:01.312: W/HardwareRenderer(27338): Mountain View, we've had a problem here. Switching back to software rendering.
08-16 15:43:01.312: E/SurfaceTexture(224): [com.org.ui/com.org.ui.CreateContactActivity] connect: SurfaceTexture has been abandoned!
08-16 15:43:01.322: E/ViewRootImpl(27338): IllegalArgumentException locking surface
08-16 15:43:01.322: E/ViewRootImpl(27338): java.lang.IllegalArgumentException
08-16 15:43:01.322: E/ViewRootImpl(27338):  at android.view.Surface.lockCanvasNative(Native Method)
08-16 15:43:01.322: E/ViewRootImpl(27338):  at android.view.Surface.lockCanvas(Surface.java:76)
08-16 15:43:01.322: E/ViewRootImpl(27338):  at android.view.ViewRootImpl.draw(ViewRootImpl.java:2157)
08-16 15:43:01.322: E/ViewRootImpl(27338):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1846)
08-16 15:43:01.322: E/ViewRootImpl(27338):  at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2658)
08-16 15:43:01.322: E/ViewRootImpl(27338):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-16 15:43:01.322: E/ViewRootImpl(27338):  at android.os.Looper.loop(Looper.java:137)
08-16 15:43:01.322: E/ViewRootImpl(27338):  at android.app.ActivityThread.main(ActivityThread.java:4514)
08-16 15:43:01.322: E/ViewRootImpl(27338):  at java.lang.reflect.Method.invokeNative(Native Method)
08-16 15:43:01.322: E/ViewRootImpl(27338):  at java.lang.reflect.Method.invoke(Method.java:511)
08-16 15:43:01.322: E/ViewRootImpl(27338):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
08-16 15:43:01.322: E/ViewRootImpl(27338):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
08-16 15:43:01.322: E/ViewRootImpl(27338):  at dalvik.system.NativeStart.main(Native Method) 
```

我的活动被系统“WINDOW DIED”杀死。???IllegalArgumentException 背后的原因是什么..

17 - 08- 2012

添加 ANR 跟踪

```
 ----- pid 23522 at 2012-08-17 15:11:59 -----
    Cmd line: com.org.ui

    DALVIK THREADS:
    (mutexes: tll=0 tsl=0 tscl=0 ghl=0)
    "main" prio=5 tid=1 NATIVE
    | group="main" sCount=1 dsCount=0 obj=0x40c3ccd0 self=0x18d7c30
    | sysTid=23522 nice=0 sched=0/0 cgrp=default handle=1074070920
    | schedstat=( 0 0 0 ) utm=5508 stm=1030 core=0
    at android.os.MessageQueue.nativePollOnce(Native Method)
    at android.os.MessageQueue.next(MessageQueue.java:118)
  at android.os.Looper.loop(Looper.java:118)
  at android.app.ActivityThread.main(ActivityThread.java:4514)
  at java.lang.reflect.Method.invokeNative(Native Method)
  at java.lang.reflect.Method.invoke(Method.java:511)
  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
  at dalvik.system.NativeStart.main(Native Method)

"pool-1-thread-1" prio=5 tid=18 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x428acb78 self=0x1f78210
  | sysTid=27231 nice=0 sched=0/0 cgrp=default handle=32950048
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
  at java.lang.Object.wait(Native Method)
  - waiting on <0x428accc0> (a java.lang.VMThread) held by tid=18 (pool-1-thread-1)
  at java.lang.Thread.parkFor(Thread.java:1231)
  at sun.misc.Unsafe.park(Unsafe.java:323)
  at java.util.concurrent.locks.LockSupport.park(LockSupport.java:157)
  at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2022)
  at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:413)
  at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1009)
  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1069)
  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
  at java.lang.Thread.run(Thread.java:856)

"Binder Thread #3" prio=5 tid=17 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x422a2f08 self=0x1df2260
  | sysTid=25366 nice=0 sched=0/0 cgrp=default handle=31652384
  | schedstat=( 0 0 0 ) utm=1 stm=3 core=0
  at dalvik.system.NativeStart.run(Native Method)

"AsyncTask #5" prio=5 tid=16 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x4229a048 self=0x1d22328
  | sysTid=23628 nice=10 sched=0/0 cgrp=bg_non_interactive handle=30355128
  | schedstat=( 0 0 0 ) utm=50 stm=18 core=0
  at java.lang.Object.wait(Native Method)
  - waiting on <0x4229a1a0> (a java.lang.VMThread) held by tid=16 (AsyncTask #5)
  at java.lang.Thread.parkFor(Thread.java:1231)
  at sun.misc.Unsafe.park(Unsafe.java:323)
  at java.util.concurrent.locks.LockSupport.park(LockSupport.java:157)
  at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2022)
  at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:413)
  at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1009)
  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1069)
  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
  at java.lang.Thread.run(Thread.java:856)

"AsyncTask #4" prio=5 tid=12 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x4239ff38 self=0x1cf18e8
  | sysTid=23620 nice=10 sched=0/0 cgrp=bg_non_interactive handle=30297720
  | schedstat=( 0 0 0 ) utm=13 stm=6 core=0
  at java.lang.Object.wait(Native Method)
  - waiting on <0x423a0058> (a java.lang.VMThread) held by tid=12 (AsyncTask #4)
  at java.lang.Thread.parkFor(Thread.java:1231)
  at sun.misc.Unsafe.park(Unsafe.java:323)
  at java.util.concurrent.locks.LockSupport.park(LockSupport.java:157)
  at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2022)
  at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:413)
  at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1009)
  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1069)
  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
  at java.lang.Thread.run(Thread.java:856)

"AsyncTask #3" prio=5 tid=15 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x42383350 self=0x1ce8e60
  | sysTid=23619 nice=10 sched=0/0 cgrp=bg_non_interactive handle=30362952
  | schedstat=( 0 0 0 ) utm=12 stm=5 core=0
  at java.lang.Object.wait(Native Method)
  - waiting on <0x42383470> (a java.lang.VMThread) held by tid=15 (AsyncTask #3)
  at java.lang.Thread.parkFor(Thread.java:1231)
  at sun.misc.Unsafe.park(Unsafe.java:323)
  at java.util.concurrent.locks.LockSupport.park(LockSupport.java:157)
  at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2022)
  at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:413)
  at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1009)
  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1069)
  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
  at java.lang.Thread.run(Thread.java:856)

"AsyncTask #2" prio=5 tid=14 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x419fc028 self=0x1c75928
  | sysTid=23606 nice=10 sched=0/0 cgrp=bg_non_interactive handle=27987104
  | schedstat=( 0 0 0 ) utm=13 stm=6 core=0
  at java.lang.Object.wait(Native Method)
  - waiting on <0x419fc148> (a java.lang.VMThread) held by tid=14 (AsyncTask #2)
  at java.lang.Thread.parkFor(Thread.java:1231)
  at sun.misc.Unsafe.park(Unsafe.java:323)
  at java.util.concurrent.locks.LockSupport.park(LockSupport.java:157)
  at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2022)
  at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:413)
  at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1009)
  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1069)
  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
  at java.lang.Thread.run(Thread.java:856)

"AsyncTask #1" prio=5 tid=13 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x42333a08 self=0x1c8c400
  | sysTid=23562 nice=10 sched=0/0 cgrp=bg_non_interactive handle=29698528
  | schedstat=( 0 0 0 ) utm=10 stm=5 core=0
  at java.lang.Object.wait(Native Method)
  - waiting on <0x42333c80> (a java.lang.VMThread) held by tid=13 (AsyncTask #1)
  at java.lang.Thread.parkFor(Thread.java:1231)
  at sun.misc.Unsafe.park(Unsafe.java:323)
  at java.util.concurrent.locks.LockSupport.park(LockSupport.java:157)
  at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2022)
  at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:413)
  at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1009)
  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1069)
  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
  at java.lang.Thread.run(Thread.java:856)

"Timer-0" prio=5 tid=11 TIMED_WAIT
  | group="main" sCount=1 dsCount=0 obj=0x419df490 self=0x1abe1f0
  | sysTid=23538 nice=0 sched=0/0 cgrp=default handle=27981992
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
  at java.lang.Object.wait(Native Method)
  - waiting on <0x419df490> (a java.util.Timer$TimerImpl)
  at java.lang.Object.wait(Object.java:401)
  at java.util.Timer$TimerImpl.run(Timer.java:238)

"Binder Thread #2" prio=5 tid=10 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x419b52c8 self=0x1a9bf00
  | sysTid=23534 nice=0 sched=0/0 cgrp=default handle=28053104
  | schedstat=( 0 0 0 ) utm=6 stm=3 core=0
  at dalvik.system.NativeStart.run(Native Method)

"Binder Thread #1" prio=5 tid=9 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x419b51c8 self=0x1aaff90
  | sysTid=23533 nice=0 sched=0/0 cgrp=default handle=27190280
  | schedstat=( 0 0 0 ) utm=4 stm=5 core=0
  at dalvik.system.NativeStart.run(Native Method)

"FinalizerWatchdogDaemon" daemon prio=5 tid=8 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x419b17a8 self=0x1a7ee40
  | sysTid=23531 nice=0 sched=0/0 cgrp=default handle=27983144
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
  at java.lang.Object.wait(Native Method)
  - waiting on <0x40c444f8> (a java.lang.Daemons$FinalizerWatchdogDaemon)
  at java.lang.Object.wait(Object.java:364)
  at java.lang.Daemons$FinalizerWatchdogDaemon.run(Daemons.java:213)
  at java.lang.Thread.run(Thread.java:856)

"FinalizerDaemon" daemon prio=5 tid=7 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x419b1650 self=0x1abba90
  | sysTid=23530 nice=0 sched=0/0 cgrp=default handle=27190632
  | schedstat=( 0 0 0 ) utm=22 stm=5 core=0
  at java.lang.Object.wait(Native Method)
  - waiting on <0x40c325d0> (a java.lang.ref.ReferenceQueue)
  at java.lang.Object.wait(Object.java:401)
  at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:102)
  at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:73)
  at java.lang.Daemons$FinalizerDaemon.run(Daemons.java:168)
  at java.lang.Thread.run(Thread.java:856)

"ReferenceQueueDaemon" daemon prio=5 tid=6 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x419b14e8 self=0x1aa9f10
  | sysTid=23529 nice=0 sched=0/0 cgrp=default handle=27190568
  | schedstat=( 0 0 0 ) utm=5 stm=0 core=1
  at java.lang.Object.wait(Native Method)
  - waiting on <0x40c324f8> 
  at java.lang.Object.wait(Object.java:364)
  at java.lang.Daemons$ReferenceQueueDaemon.run(Daemons.java:128)
  at java.lang.Thread.run(Thread.java:856)

"Compiler" daemon prio=5 tid=5 VMWAIT
  | group="system" sCount=1 dsCount=0 obj=0x419b13f8 self=0x1aadcc8
  | sysTid=23528 nice=0 sched=0/0 cgrp=default handle=27983024
  | schedstat=( 0 0 0 ) utm=73 stm=49 core=0
  at dalvik.system.NativeStart.run(Native Method)

"JDWP" daemon prio=5 tid=4 VMWAIT
  | group="system" sCount=1 dsCount=0 obj=0x419b12b0 self=0x1a9dda0
  | sysTid=23527 nice=0 sched=0/0 cgrp=default handle=27766168
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=1
  at dalvik.system.NativeStart.run(Native Method)

"Signal Catcher" daemon prio=5 tid=3 RUNNABLE
  | group="system" sCount=0 dsCount=0 obj=0x419b11b8 self=0x19c7f78
  | sysTid=23526 nice=0 sched=0/0 cgrp=default handle=27706080
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
  at dalvik.system.NativeStart.run(Native Method)

"GC" daemon prio=5 tid=2 VMWAIT
  | group="system" sCount=1 dsCount=0 obj=0x419b10d8 self=0x1982b48
  | sysTid=23524 nice=0 sched=0/0 cgrp=default handle=27705984
  | schedstat=( 0 0 0 ) utm=59 stm=6 core=0
  at dalvik.system.NativeStart.run(Native Method)

----- end 23522 ----- 
```

ActivityThread 被阻塞的原因可能是什么？谢谢

尼兹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:52:14.280

问题出在我项目中的本机代码（文件指针问题）！！！但是系统无法向 ADB 抛出相同的错误，而是抛出上述错误！！虽然很奇怪！

# javascript - 如何在 for 循环中访问 json 数组的字段名称？

> ID：11934887
> 
> 赞同：0
> 
> 时间：2012-08-13T13:08:49.303
> 
> 标签：javascript, json, object

我的 Json 数组如下所示：

```
var data =
{
    "categories": 
    {
        "category1": 
        {
            "Name": "Maps",
             "Id": 3,
             "orderInList": 1
        },
        "category2": 
        {
            "Name": "Books",
            "Id": 2,
            "orderInList": 2
        }
    }
}; 
```

当我编写 do console.log(data) 时，对象的“键”格式如下：

```
|         key           |    value  |

categories[category1][Id]     "3" 
```

如何在 for 循环中迭代它（不使用 JQuery 的 $.each），以便我可以判断哪些键、值对是名称、ID 或 orderInList？

[工作 Jsfiddle](http://jsfiddle.net/tzUWP/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:18:26.837

像这样的东西应该工作：

```
for (var category in data['categories']) {
    for (var key in data['categories'][category]) {
        var value = data['categories'][category][key];

        // Now do whatever you want based on key...
        switch (key) {
           case 'Name':
              // Whatever
              break;
           default:
              break;
        }
    }
} 
```

无论如何，内部循环中的键和值将保存嵌套对象的键和值，类别将保存类别。

可能令人困惑的是对象属性可以像 Javascript 中的数组值一样被访问。

所以考虑下面的代码：

```
var some_object = {
    a: 0
};

// These two lines do the same thing, even though some_object is not an array.
some_object.a = 1;
some_object['a'] = 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:17:21.800

您的外部`categories`对象是一个包含许多子对象的对象。您可以使用循环遍历这些子对象`for...in`。

```
for (var category in data.categories) {
    // here you can access `category.Name`, `.Id`, and `.orderInList`
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T13:32:35.860

签出这个

```
var data = {
  "categories": {
    "category1": {
        "Name": "Maps",
        "Id": 3,
        "orderInList": 1
    },
    "category2": {
        "Name": "Books",
        "Id": 2,
        "orderInList": 2
    }
  }
};

function represent(obj) {
  var reprs = [];
  for (var key in obj) {

    if(!obj.hasOwnProperty(key)) continue;
    if (obj[key] instanceof Object) {
        var result = represent(obj[key]);
        for (var i = 0; i < result.length; i++) {
            reprs.push("[" + key + "]" + result[i]);
        }
    }
    else {
        reprs.push("[" + key + "] = " + obj[key]);
    }
  }
  return reprs;
}

console.log(represent(data));
//output

["[categories][category1][Name] = Maps",
 "[categories][category1][Id] = 3",
 "[categories][category1][orderInList] = 1",
 "[categories][category2][Name] = Books",
 "[categories][category2][Id] = 2",
 "[categories][category2][orderInList] = 2"] 
```

> *哪些键、值对是 Names、Id 或 orderInList？*

我认为您可以在递归终止条件处添加代码以检查密钥是否等于`Names` `Id`或`orderInList`

# wpf - 通过 MVVM 在 wpf 中动态创建带有扩展器控件的列表框

> ID：11934891
> 
> 赞同：0
> 
> 时间：2012-08-13T13:09:12.110
> 
> 标签：wpf

我想通过 MVVM 和 prism 在 wpf 中使用扩展器控件动态创建多个列表框。任何人都可以建议我如何实现这个

请找到以下格式

节目详情（这是扩展器控件，下面的项目应填充在列表框中）HBO AXN

剧集详细信息（这是扩展器控件，下面的项目应填充在列表框中）第 1 部分第 2 部分第 2 部分

计划详情（这是扩展器控件，下面的项目应填充在列表框中） 早上 下午 晚上

它可以继续添加与上面类似的新项目。

请建议我如何实现这一目标或将示例代码发送给我.....

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:18:28.270

我认为这是分层数据。您可以在树视图上创建控件模板，每个树视图项目将在扩展器内具有列表框。

# php - 使用 apache2 和 php 处理大量会话文件

> ID：11934895
> 
> 赞同：0
> 
> 时间：2012-08-13T13:09:23.247
> 
> 标签：php, session, apache2

我目前在更精确地性能方面遇到了一个巨大的问题：通过大量 I/O 在包含大量文件（+100.000）的平面会话文件夹上生成负载。

sessionfiles/htdocs 文件夹位于托管存储上 - 两个单独的服务器（在负载平衡器后面）通过​​ nsf-mount 使用这些文件（apache2），并同时访问相同的会话文件夹（以保持其持久性）。

不幸的是，该项目非常频繁，并且正在生成大量会话文件。即使 ans max_lifetime 为 2 小时，我们也生成了 +100.000 个会话文件，这对于 IO 节点来说已经非常重要了。

是否有可能将这些会话动态拆分为子文件夹？例如，所有带有 sess_1* 的会话文件都放入 /tmp/sessions/1，sess_2 放入 /tmp/sessions/2 等等？使用这种方法，存储/IO 节点只需处理每个文件夹约 10.000 个，这将加快垃圾收集并防止 IO 负载。

我从 PHP (session.save_path) 文档中找到了这段摘录：

[http://de3.php.net/manual/en/session.configuration.php#ini.session.save-path](http://de3.php.net/manual/en/session.configuration.php#ini.session.save-path)

> 此指令有一个可选的 N 参数，用于确定您的会话文件将分布在的目录级别数。例如，设置为 '5;/tmp' 可能最终会创建一个会话文件和位置，如 /tmp/4 /b/1/e/3/sess_4b1e384ad74619bd212e236e52a5a174If 。为了使用 N，您必须在使用前创建所有这些目录。在 ext/session 中存在一个小的 shell 脚本来执行此操作，它称为 mod_files.sh，Windows 版本称为 mod_files.bat。另请注意，如果使用了 N 且大于 0，则不会执行自动垃圾收集，请参阅 php.ini 的副本以获取更多信息。此外，如果您使用 N，请务必将 session.save_path 括在“引号”中，因为分隔符 (;) 也用于 php.ini 中的注释。

有没有人以前在 php 中实现过这个，并且可以为我提供一些示例 php 代码来使用这个 mod_files.sh 处理子文件夹中的会话文件？

不幸的是，它的记录很差......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:50:17.737

有时解决方案比最初看起来要容易。不知何故，我认为 PHP 必须处理和管理对会话目录树的 apache 请求。然而，一旦 session:save_path 被改变，Apache 就会自行完成。

**1.）**通过 ssh调用这个（修改过的）脚本（[http://snipplr.com/view/27710/modfilessh-php/ ）一次：](http://snipplr.com/view/27710/modfilessh-php/)

*sh path/to/script/mod_files.sh path/to/sessions depth*（在我的例子中：“mod_files.sh /tmp/sessions 1”

**2.)**仔细检查新会话目录树的 chown 权限

**3.)**将“session.save_path”更改为“1;/tmp/sessions”

不过还是感谢您的帮助！

# jquery - Jquery在for循环中创建选项元素？

> ID：11934896
> 
> 赞同：1
> 
> 时间：2012-08-13T13:09:32.640
> 
> 标签：jquery

我的`select`下拉菜单最初是`php`这样创建的：

```
 <select id="cupcake-amt" name="amt">
         <?php for($i=0; $i<50; $i++) : ?>
          <option value="<?php echo $i; ?>"><?php echo $i; ?></option>
          <?php endfor; ?>
  </select> 
```

我将如何创建一个将选项重建为不同数量的 jquery 函数。所以不是 50 个选项，我会在 12 个之后想要它。最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:18:24.607

如果你想在 jQuery 中重建你的选项最多 12 个项目，你可以这样做

```
<script type="text/javascript">
   $(function(){
      var options="";
      var numberOfItemsNeeded=12;
      for(var i=1;i<=numberOfItemsNeeded;i++)
      {
         options+="<option value='"+i+"'>"+i+"</option>";
      }       
      $("#cupcake-amt").html(options);        
   });
</script> 
```

工作样本：http: [//jsfiddle.net/yDh6x/3/](http://jsfiddle.net/yDh6x/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:18:03.000

您可以只清空 select.. 然后使用变量来存储选项元素并将其附加到末尾。

```
$('#cupcake-amt').empty(); // <-- empty the select box - so it removes the 50
var x = '';  // <-- variable to store option string
for(i=0;i<theLengthYouWant;i++){  
   x += '<option value="' + i + '">' + i + '</option>';  // <-- store how many options
}
$('#cupcake-amt').append(x);  // <-- append to the select 
```

[http://jsfiddle.net/wirey00/BSmKt/](http://jsfiddle.net/wirey00/BSmKt/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T13:19:08.143

您可以创建 JS 函数：

```
function generator(number, selectId) {
   var options = '';
   for (var i = 0; i < number; i++) {
     options += "<option value="+i+'>'+i+'</option>'
   }
   $('#'+selectId).html(options)
} 
```

然后调用该函数，其中`10`是应生成的选项数，`selectId`是目标选择元素的 ID。

```
generator(10, 'target') 
```

[演示](http://jsfiddle.net/cjG86/1/)

# c++ - 哪个翻译单元包含隐含定义的特殊成员函数？

> ID：11934897
> 
> 赞同：2
> 
> 时间：2012-08-13T13:09:33.297
> 
> 标签：c++

我`boost::scoped_ptr`在头文件中使用和前向声明：

```
//Bar.h
class Foo;

class Bar;
{

private:
    boost::scoped_ptr<Foo> _foo;
}; 
```

我没有实现自己的析构函数，因为智能指针会完成这项工作。

我将此头文件包含在多个翻译单元中，但并非所有翻译单元都包含`Foo`定义。尝试编译时出现错误，`scoped_ptr`正在删除指向不完整类型的指针`Foo`。

如果我声明一个空的析构函数`Bar.h`并在`Bar.cpp`.

但是，如果析构函数是在头文件中实现的，我会遇到同样的错误。

所以问题是：隐式定义的方法在哪些翻译单元中使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T13:13:58.723

问题的表述不正确。你想知道的是

*哪个翻译单元包含隐含定义的特殊成员函数？*

[那是一口]。答案就在每个使用（odr-uses）它们的翻译单元*中*。

对于您的特定用例，并且由于`scoped_ptr`析构函数要求类型是完整的，您别无选择，只能声明 的析构函数`Bar`，并在具有完整定义的翻译单元中定义它，即使它为空`Foo`。

或者，您可以使用没有该限制的不同类型的智能指针。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T13:14:04.140

> 所以问题是：标头实现的方法在哪些翻译单元中执行？

在所有这些中。也就是说，每个 TU 都有自己的（内联）实现。

你会在这里得到错误，因为显然析构函数需要定义`Foo`. 这与定义析构函数的*位置*无关。如果你在它自己的 TU 中定义它，那么那个 TU 仍然需要知道`Foo`.

# c# - 在 BackgroundWorker 中使用组合

> ID：11934898
> 
> 赞同：0
> 
> 时间：2012-08-13T13:09:40.850
> 
> 标签：c#, backgroundworker

> **可能重复：**
> [跨线程操作无效：控件从创建它的线程以外的线程访问](https://stackoverflow.com/questions/142003/cross-thread-operation-not-valid-control-accessed-from-a-thread-other-than-the)

我在尝试使用 BackgroundWorker 时遇到问题。

我有一个复选框，单击时我想调用 BackgroundWorkers RunWorkerAsync 方法：

```
 private void checkBoxLoadRecords_CheckedChanged(object sender, EventArgs e)
    {
        bw.RunWorkerAsync();
    } 
```

因此，在 DoWork 事件中，我在其中一个组合上调用了 SelectionChangeComitted 事件：

```
 void bw_DoWork(object sender, DoWorkEventArgs e)
    {
        comboSelectedIDs_SelectionChangeCommitted(sender, e);
    } 
```

在 SelectionChangeComitted 方法中，我在尝试将 ID 检索到变量中的第一行收到错误。我收到的错误是：跨线程操作无效：控件'comboSelectedIDs'从创建它的线程以外的线程访问。

```
void comboSelectedIDs_SelectionChangeCommitted(object sender, EventArgs e)
{
    int idToUse = (int)multiSelectedIDs.SelectedValue; //Errors here!
    SetupNamesCombo(idToUse);
} 
```

我该如何解决这个问题？

我想在使用我的自定义控件时我会遇到类似的问题，因为它们使用组合文本值，我想在 BackgroundWorker 中得到它。

我正在使用 C# 4.0

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:15:03.127

Use the Dispatcher class to access to the UI elements from different threads:

```
 Deployment.Current.Dispatcher.BeginInvoke(() =>
        {
            int idToUse = (int)multiSelectedIDs.SelectedValue;
        }); 
```

Or if you are in a code behind file you can just do this without the `Deployment.Current`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:15:29.460

You cannot access UI controls in any thread other than the UI thread.

One solution is to save the values of the UI controls in a separate POCO object, so you can access them from the background worker.

# ios - UITableView 删除按钮不会消失

> ID：11934901
> 
> 赞同：-1
> 
> 时间：2012-08-13T13:09:56.777
> 
> 标签：ios, objective-c, uitableview, cocoa-touch

我有一个 UITableViewCell 并将其配置为启用编辑。一切正常，但我的问题是，当第二次按下圆形删除按钮（带有“|”的圆圈）时，删除确认不会消失。

有谁知道为什么会发生这种情况？

[编辑]

我将其缩小到每秒调用一次的方法，在该方法中我在可编辑的 UITableView 上调用 beginUpdates 和 endUpdates。有人知道解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:39:05.950

尝试添加如下内容：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    Dashboard *dashboard = [dashboards dashboardAtIndex:indexPath.row];
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        // Delete the row from the data source
        NSLog(@"delete");
    } else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
        NSLog(@"insert");
    }

    [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationNone];
} 
```

重新加载行是关键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:34:10.847

如果我不得不在黑暗中刺伤......您可能正在设置`editing`为 true，然后没有将其设置回 false。确保`editing`每次调用时设置值的任何方法都会反转其值。

```
- (void)setTableDelete 
{
    bool temp = !myTableView.editing;
    [myTableView setEditing:temp animated:YES];

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T10:52:15.200

如果 tableView 处于编辑模式，则通过避免使用 beginUpdates 和 endUpdates 方法来解决它，如果编辑模式为 YES，我会手动更新单元格。

# html - 使用数据内联图像的最佳实践：-URL？

> ID：11934903
> 
> 赞同：1
> 
> 时间：2012-08-13T13:10:07.290
> 
> 标签：html, image

我有一个简单的 Rails 应用程序，它使用`canvasContext.toDataURL()`. 有一个 index 动作，它显示缩略图列表，以及一个显示每个图像的动作，显示图像。

我这里的后端绝对是懒惰的，我只是存储了`data:image/png;base64,...`原始图像的base64编码字符串和一个缩略图，这也是在客户端生成的。图像使用`<img src="data:"/>`URI 包含在页面中。

现在，由于在 v9 之前的 IE 中不完全支持这一点，我将不得不实现某种解决方法，可能通过使用`data-`属性包含生成图像的 URL，然后在页面加载后使用 jQuery 替换源属性。

`data:`这就提出了一个问题，使用URL将相当大的图像内联到 HTML 中是否是一种好习惯......

有什么建议或最佳实践吗？图像可能高达 500 KiB，并且每个图像仅使用一次。包含图像的页面一旦创建就不会更改，因此它应该可以很好地缓存，包括图像。包含缩略图的索引页面（大约 60 KiB）使用分页，因此该页面几乎不可缓存。您可以假设 HTML 页面在生产中会被压缩或压缩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:12:21.157

这不是一个好主意。我会改用普通的、单独的图像资源。

通过使用内嵌图像，

*   您破坏了静态图像的所有可缓存性 - 对于内联图像，每次 HTML 页面更改时，所有图像数据也必须重新加载。

*   gzipping/deflating 将花费更长的时间，并产生次优结果（因为图像数据更难压缩，效率也更低）。

*   互联网的其余部分面向 HTML 文档和图像作为单独的资源：预取器、缓存系统、代理......

*   那么你就有了浏览器兼容性，正如你所指出的，这对于旧的 IE 来说是非常糟糕的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:18:51.873

最佳做法是：不要。

无论如何，您都需要一个解决方法，这将完全复制基本功能，因此您只是另一个可能出错的地方，并且需要测试更多案例。

您说图像应该非常可缓存，但是您发送它们的方式不允许您包含有关缓存的信息。但是，使用通过单独的 HTTP 请求发送图像的更常见方法，您可以发送 expires 和 max-age 请求以指示图像在一年内不会更改。如果您对图像不会更改非常有信心，您还可以设置最后修改和电子标签（您甚至不需要任何逻辑来决定电子标签，只需发送“IMMUTABLE”作为标签) 并通过发送 304 甚至不检查来响应每个条件 GET（因为同样，如果你*非常自信*，你只会这样做，否则尽管你仍然可以对 304 实施更传统的检查）。

如果图像只使用一次，则让图像由创建它的东西提供，并根据查询中的一些识别特征（正是你正在做的事情）写入它，并将其写入到浏览器的流中。您仍然可以在应用程序中进行更好的分离，以便在自己的位置完成此操作。

即使使用 gzip，您也不会在流大小上击败它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T18:20:01.953

我的建议 ？不要这样做。

使用后端库可以更轻松地修改真实文件，所以不要这样做。如果您想在页面中使用 base64，您可以使用 HTML5 轻松实现。

```
var xhr = new XMLHttpRequest();
xhr.open('GET', 'images/myimage.png', true);
xhr.responseType = 'arraybuffer';

xhr.onload = function(e){
    if(this.status == 200){
        var bb = new WebKitBlobBuilder(); // Or MozBlobBuilder, MSBlobBuilder, etc.
        bb.append(this.response);

        var reader = new FileReader();
        reader.readAsDataURL(bb.getBlob('image/png'));
        reader.onloadend = function(e){
            $("#myimage").attr("src", reader.result);
        };
    }
};

xhr.send(); 
```

# android - 测试我的设备是否可以在 Android 上被发现

> ID：11934904
> 
> 赞同：15
> 
> 时间：2012-08-13T13:10:12.250
> 
> 标签：android, bluetooth

我想在发送提示用户打开它的意图之前测试我的 android 设备是否可被发现，我该怎么办？

意图如下：

```
Intent intent = new Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);
intent.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, 30);
startActivityForResult(intent, idBlueToothDiscoveryRequest); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-12-17T02:41:51.397

我发现：

```
if(mBluetoothAdapter.getScanMode() != BluetoothAdapter.SCAN_MODE_CONNECTABLE_DISCOVERABLE)
{
    Intent intent = new Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);
    intent.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, 30);
    startActivityForResult(intent, idBlueToothDiscoveryRequest);
} 
```

# javascript - 如何使用 SyntaxHighlighter 获取总行数

> ID：11934907
> 
> 赞同：0
> 
> 时间：2012-08-13T13:10:16.697
> 
> 标签：javascript, textarea, syntax-highlighting, syntaxhighlighter

是否可以使用 SyntaxHighlighter ( [http://alexgorbatchev.com/SyntaxHighlighter/](http://alexgorbatchev.com/SyntaxHighlighter/) ) 获得源代码的总行数？

我可以使用这里定义的技术：[How to get the number of lines in a textarea?](https://stackoverflow.com/questions/2035910/how-to-get-the-number-of-lines-in-a-textarea) 但也许 SyntaxHighlighter 可以更轻松地做到这一点。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T17:37:34.160

我不相信有一个内置的解决方案，但这里有一个功能应该可以解决问题。它使用这种`getElementsByClassName`方法，所以我认为它不适用于 IE8 或更低版本。如果你愿意，可以使用你最喜欢的 DOM 查询库。

```
/**
 * Returns the number of lines in a SyntaxHighlighter code block.
 *
 * @param {Element} node The top-level DOM element containing the code block.
 * @return {Number} The number of code lines, or 0 if not found.
 */
function getLineCount(node) {
    var codeNode;
    var containerNode;

    if (node && typeof node.getElementsByClassName === 'function') {
        codeNode = node.getElementsByClassName('code');

        if (codeNode.length) {              
            containerNode = codeNode[0].getElementsByClassName('container');

            if (containerNode.length) {
                return containerNode[0].children.length;
            }
        }
    }

    return 0;
} 
```

jQuery 版本，因为显然这是一回事。

```
function getLineCount(node) {
    return $(node).find('.code .container').children().length;
} 
```

# actionscript-3 - 如何部署 adobe AIR 应用程序

> ID：11934909
> 
> 赞同：-1
> 
> 时间：2012-08-13T13:10:22.593
> 
> 标签：actionscript-3, air

我必须创建一个必须从本地系统读取一些文件的应用程序。由于 FileSystem 类仅在 AIR 应用程序中可用，因此我将其创建为 AIR 应用程序。但是发布后，exe无法正常工作。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:59:12.527

可能会帮助你.... [http://permadi.com/blog/2011/06/creating-air-based-android-application-using-flash-ide/](http://permadi.com/blog/2011/06/creating-air-based-android-application-using-flash-ide/)

# performance - Matlab 中 parfor 循环的一个具体示例，其性能优于 for 循环

> ID：11934910
> 
> 赞同：2
> 
> 时间：2012-08-13T13:10:26.353
> 
> 标签：performance, matlab, for-loop, parallel-processing

我对 Matlab 中的并行计算还有些陌生。我在 C 中成功使用了 OpenMP，但在 Matlab 中无法获得更好的性能。

首先，由于我是刚接触大学的机器，因此我通过`ver`在命令提示符下键入来验证我所在的机器具有并行计算工具箱，并显示： `Parallel Computing Toolbox Version 5.2 (R2011b)`. 注意机器有4核

我尝试了使用`parfor`vs.的简单示例`for`，但`for`总是获胜，尽管这可能是因为开销成本。我正在做一些简单的事情，比如这里的例子：[MATLAB parfor is slow than for -- what is wrong？](https://stackoverflow.com/questions/3174358/matlab-parfor-is-slower-than-for-what-is-wrong)

在尝试将 parfor 应用到我更大更复杂的程序之前（我需要计算一个函数的 500 次评估，每次评估大约需要一分钟，所以并行化在这里会有所帮助），我非常希望看到一个具体的例子，其中`parfor`beats `for`。. OpenMP的例子很丰富，但是没有找到一个我可以复制和粘贴的简单例子，显示`parfor`比`for`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T17:25:28.653

我使用以下代码（每个 Matlab 会话一次）以便使用`parfor`：

```
pools = matlabpool('size');
cpus = feature('numCores');
if pools ~= (cpus - 1)
    if pools > 0
        matlabpool('close');
    end
    matlabpool('open', cpus - 1);
end 
```

这为其他进程留下了 1 个核心。请注意，该`feature()`命令未记录在案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T14:24:55.693

[Loren Shure 的 MATLAB 博客](http://blogs.mathworks.com/loren/2007/10/03/parfor-the-course/)上有一个 parfor 提高性能的示例。

她的示例只是计算幻方矩阵的秩：

```
function ranks = parMagic(n)

ranks = zeros(1,n);
parfor (ind = 1:n)
    ranks(ind) = rank(magic(ind));  % last index could be ind,not n-ind+1
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-22T01:46:45.200

Serg 描述了如何“启用”并行功能。这是一个非常简单的剪切和粘贴示例，可根据要求对其进行测试。只需将以下内容复制并粘贴到 mfile 中并运行它。

```
function parfortest()
enable_parallel;
pause on
tic;
N=500;
for i=1:N
    sequential_answer=slow_fun(i);
end
sequential_time=toc
tic;
parfor i=1:N
   sequential_answer=slow_fun(i);
end
parallel_time=toc
end
function result=slow_fun(x)
    pause(0.001);
    result=x;
end 
```

如果您已运行代码以启用并行，如 Serg 的回答所示，您应该会在性能上获得非常明显的改进。

# html - 自动 CSS 高度

> ID：11934913
> 
> 赞同：0
> 
> 时间：2012-08-13T13:10:33.750
> 
> 标签：html, css

我的网站页脚有问题。应该是，它在页面内容之后呈现，但是当页面内容小于浏览器的高度时，在页面中间看到它很烦人。

我正在纠正这种行为，手动将页脚设置为`position:absolute; bottom:0`，但是这样做会在内容大于浏览器高度时破坏页脚。有什么办法可以自动化吗？

内容只是一个 div，没有附加样式，通常页脚是`position:relative; bottom:0`. 该网站可以在这里看到：http: [//vestibulandos.oplex.com.br](http://vestibulandos.oplex.com.br)

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T13:12:14.857

看看[http://www.cssstickyfooter.com/](http://www.cssstickyfooter.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T14:59:59.193

```
.wrapper {
margin: 0 auto -60px; /* the bottom margin is the negative value of the footer's height */
 }

/* FOOTER BOTTOM --------------------------------------------------------*/

.footer, .push {
    height: 60px; /* .push must be the same height as .footer */
}

#footer{
    position: relative;
    width: 100%;
    height: 60px;
} 
```

# css - 按钮样式链接的 CSS

> ID：11934914
> 
> 赞同：2
> 
> 时间：2012-08-13T13:10:34.887
> 
> 标签：css, asp.net-mvc

我正在尝试在不实际使用按钮标签的情况下创建此按钮。我创建了一个按钮图像并将其分成左右三个部分，因此当我向链接添加文本时，图像将根据长度扩展。我也在使用悬停图像 - 但是当我尝试将此样式应用于按钮标签时 - 过度功能不起作用 - 不确定这是否是因为按钮标签没有悬停功能。但是，当我将这三幅图像以列表格式放置时，它可以很好地显示“按钮”的悬停和未悬停图像，但它不能在所有 Web 浏览器上正确显示。

这是列表格式样式：

```
<ul class="glossyBtn">
    <li class="newBtn">
        <a style="margin-left: 12px"class="printRemove" href='<%:Url.Action("Close", "Close", new{caseId = Model.CaseId}) %>'><b><b class="bodyBtn">Close</b></b></a>
    </li>
</ul> 
```

这是具有按钮标签但未应用悬停 CSS 时的样式。

```
 <ul class="glossyBtn">
   <li class="newBtn">
      <button class="noStyle" type="submit" value="save"> <a>
      <b><b class="bodyBtn">Save</b></b></a></button>
   </li>
</ul> 
```

这是CSS：

```
.glossyBtn
{
    position: relative;
    padding: 5px 0 0 6px;
    margin: 0 auto 0 auto;
    height: 24px;
    float: left;

    list-style: none;
}
.glossyBtn li
{
    float: left;
}
.glossyBtn li a, .glossyBtn li button, .glossyBtn li input a  {
    float: left;
    color: #046fad;
    text-decoration: none;
    font-weight: bold;
    font-size: 13px;
    padding: 0 0 0 6px;
    height: 24px;
    line-height: 24px;
    text-align: center;
    cursor: pointer;
    border-bottom: none;
}

.glossyBtn li a b, .glossyBtn li input a b {
    height: 24px;
    display: block;
    padding: 0 8px 0 8px;
}
.glossyBtn li a b.bodyBtn, .glossyBtn li input a b.bodyBtn
{
    height: 24px;
    display: block;

}
.glossyBtn li.newBtn a, .glossyBtn li.newBtn input a
{
    color: #046fad;
    background: url('images/iconPlace.png') no-repeat 0 0;
}
.glossyBtn li.newBtn a b, .glossyBtn li.newBtn input a b {
    color: #046fad;
    background: url('images/endBtn.png') no-repeat right 0;
}
.glossyBtn li.newBtn a b.bodyBtn, .glossyBtn li.newBtn input a b.bodyBtn
{
    background: url('images/bodyBtn.png') repeat-x;
}
.glossyBtn li a:hover, .glossyBtn li button a:hover {
    background: url('images/iconPlace.png') no-repeat 0 -24px;
}
.glossyBtn li a:hover b, .glossyBtn li button a:hover b {
    background: url('images/endBtn.png') no-repeat right -24px;
}
.glossyBtn li a:hover b.bodyBtn, .glossyBtn li button a:hover b.bodyBtn
{
    background: url('images/bodyBtn.png') repeat-x 0 -24px;
} 
```

我将不胜感激任何建议或替代我正在尝试做的事情。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T13:23:31.760

除非我误解了您的问题，否则您实际上并不需要这三个部分来获得“扩展按钮”。不用管宽度，你会自动得到它。看看：http: [//jsfiddle.net/HrCR8/3/](http://jsfiddle.net/HrCR8/3/)

我应该将这个特殊的按钮归功于 Chad Mazzolla 和他用于创建按钮的样式集合。你可以在这里找到它们[http://hellohappy.org/css3-buttons/](http://hellohappy.org/css3-buttons/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:22:55.850

尝试将悬停样式基于 li 元素。

```
li:hover a{
    //link hover styling
}

li:hover button{
    //button hover styling
} 
```

# sql-server-2008 - 在 SQL Server 中获取使用 FTS 搜索的文本片段

> ID：11934922
> 
> 赞同：1
> 
> 时间：2012-08-13T13:10:58.993
> 
> 标签：sql-server-2008, full-text-search

我们将每条 sql 记录中的一页文本存储为单个 NVARCHAR(MAX) 列。此列是由 SQL 2008 索引的全文。我们使用 FREETEXTTABLE 查询全文索引以定位包含给定关键字或短语的文档。最终用户希望看到 FREETEXTTABLE 以网格形式返回的每个命中的小文本片段。理想情况下，该片段将是表示搜索的关键字/短语的文本以及紧邻点击左右的单词，以便在较大的文档文本中提供上下文。这不是开箱即用的功能。

如何在 SQL Server 中执行此操作？

谢谢你，马库斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T22:03:15.737

Some possibilities are discussed by Aaron Bertrand in this article:
[Hit-Highlighting in Full-Text Search](http://www.sqlperformance.com/2012/09/t-sql-queries/hit-highlighting-in-full-text-search)

# android - 如何将源附加到 Android 库以在 Eclipse 中进行 JUnit 测试？

> ID：11934926
> 
> 赞同：1
> 
> 时间：2012-08-13T13:11:04.467
> 
> 标签：android, eclipse, junit, android-library

我一直在努力让单元测试与自定义 Android 库一起工作。我遵循了[这个 Android 开发人员指南](http://developer.android.com/tools/projects/index.html#testing)中的第一个建议，并创建了一个依赖于库（通过 Properties->Android->Library->Add...）的 Android 应用程序项目作为与实际测试项目的联络。

一切似乎都运行良好，但后来我在一个测试用例中遇到了我的第一个运行时异常。当我想修复库中的代码时，我发现双击 JUnit 测试面板中的任何项目都会打开一个 .class 文件，而不是相应的 .java 文件。因此，在我爬过包层次结构并手动抓取 .java 文件之前，无法编辑代码。

此外，调试器/测试运行器很乐意忽略库中的任何断点。有没有办法让测试项目意识到库的代码就在工作区中？没有使用断点调试和从堆栈跟踪跳转到代码的能力是极大的生产力障碍。

**附录：**离开 Eclipse 并开始另一个会话后，现在断点似乎受到尊重。但是，调试透视图将打开 .class 文件而不是相应的 .java 文件。

# java - Jdoms 烦人的 textnodes 和 addContent(index, Element) - 模式解决方案？

> ID：11934930
> 
> 赞同：0
> 
> 时间：2012-08-13T13:11:11.970
> 
> 标签：java, jdom

我有一些已经生成的 xml，导致问题的应用程序现在需要向其中添加元素，这些元素需要位于特定位置才能对应用的模式有效...

现在有两个问题，第一个是我必须硬编码那些不是很好但“好的”的位置。但更大的是 jdom ......我打印了内容列表，它看起来像：

```
element1
text
element2
element4
text
element5 
```

虽然文本节点只是空格，而我添加的每个元素都使得它更加不可预测有多少文本节点（因为有时添加了一些有时没有），它们只是被视为元素，但我想忽略它们，因为当我添加 element3在索引 2 处，它不在 element2 和 element4 之间，它出现在这个烦人的文本节点之后。

有什么建议么？恕我直言，最好的解决方案是根据架构自动将其放置在必须的位置，但我认为这是不可能的？

谢谢你的建议 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:02:04.037

XML 的 JDOM 模型非常真实……它必须如此。另一方面，JDOM 提供了过滤和处理 XML 的方法，使您的任务更容易。

在您的情况下，您想将 Element 内容添加到文档中，并且所有文本内容都是空格.....所以，只需忽略所有文本内容，而只担心 Element 内容。

例如，如果你想在第 3 个元素之前插入一个新元素 nemt，你可以：

```
rootemt.getChildren().add(3, new Element("nemt")); 
```

元素现在已经整理好了……文字呢……

一个非常简单的解决方案是漂亮地打印输出：

```
XMLOutputter xout = new XMLOutputter(Format.getPrettyFormat());
xout.output(System.out, mydoc); 
```

这样，所有的空白都将被重新格式化以使 XML '漂亮'。

编辑 - 不，JDOM 无法根据架构自动将元素插入正确的位置....

罗尔夫

# java - 使用多个视图/布局时在 Android 中处理触摸事件

> ID：11934932
> 
> 赞同：1
> 
> 时间：2012-08-13T13:11:15.593
> 
> 标签：java, android, layout, views, touch-event

我对 Android 编程非常陌生，并试图通过嵌套视图来理解触摸事件。首先，这是我的应用程序的描述：

我有一个通过 GUI 编辑器添加的相对布局。一切都是默认的。我还创建了一个名为 ClipGrid 的类，它扩展了 ScrollView。嵌套在其中，我制作了一个 Horizo​​ntalScrollView。在其中，我制作了一个 TableLayout 和它的行。这些行包含按钮。

最终结果是一个按钮网格。它一次显示 4x4，但可以滚动任一方向以显示其他按钮。

我从我的主要活动中将其调用到屏幕上，如下所示： ClipGrid clip_grid = new ClipGrid(this); setContentView(clip_grid);

我这样做只是为了测试目的，我想我以后想在我的 relativelayout 中添加其他视图时必须更改它。但我认为它可能对触摸事件有影响。

最后，我想检测网格何时移动，并在用户抬起手指时将新可见的 4x4 按钮网格捕捉到布局的边缘。我只是不确定如何实施这一点，任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T13:28:40.270

处理触摸事件的方式是一种级联效果，从顶部视图开始，向下到较低的嵌套视图。基本上，Android 会将事件传递给每个视图，直到`true`返回。

您可以实现`onTouchEvent`a 事件的一般方法`View`是：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
  boolean actionHandled = false;
  final int action = event.getAction();

  switch(action & MotionEventCompat.ACTION_MASK) {
    case MotionEvent.ACTION_DOWN:
      // user first touches view with pointer
      break;
    case MotionEvent.ACTION_MOVE:
      // user is still touching view and moving pointer around
      break;
    case MotionEvent.ACTION_UP:
      // user lifts pointer
      break;
  }

  // if the action was not handled by this touch, send it to other views
  if (!actionHandled) 
     actionHandled |= super.onTouch(v, MotionEvent.event);

  return actionHandled;
} 
```

# xslt - 从 Xalan 切换到 Saxon

> ID：11934933
> 
> 赞同：0
> 
> 时间：2012-08-13T13:11:21.360
> 
> 标签：xslt, saxon, xalan

saxon 解析器解析 saxon:evaluate 函数时出错。

我得到的这个例外：

```
 XPST0003: Static error in XPath expression supplied to saxon:evaluate: Unexpected token
  "<eof>" in path expression
net.sf.saxon.trans.XPathException: Static error in XPath expression supplied to saxon:evaluate: Unexpected token "<eof>" in path expression
    at com.saxonica.functions.extfn.Evaluate$EvaluateCall.prepareExpression(Evaluate.java:223)
    at com.saxonica.functions.extfn.Evaluate$EvaluateCall.call(Evaluate.java:263)
    at net.sf.saxon.functions.IntegratedFunctionCall.call(IntegratedFunctionCall.java:298)
    at CE__Slash__29499086.process(file:/D:/WORKS/WORKS_ON_XSLT2.0/Test.xsl:48)
    at com.saxonica.bytecode.CompiledExpression.process(CompiledExpression.java:60)
    at net.sf.saxon.expr.instruct.Template.applyLeavingTail(Template.java:214)
    at net.sf.saxon.trans.Mode.applyTemplates(Mode.java:1034)
    at net.sf.saxon.Controller.transformDocument(Controller.java:1957)
    at net.sf.saxon.Controller.transform(Controller.java:1803)
    at com.iflex.fcat.gui.content.TestXMLXSLTContentGenerator.simpleTransform(TestXMLXSLTContentGenerator.java:177)
    at com.iflex.fcat.gui.content.TestXMLXSLTContentGenerator.main(TestXMLXSLTContentGenerator.java:190) 
```

# mysql - 使用全文索引和其他 where 条件进行高效查询

> ID：11934936
> 
> 赞同：4
> 
> 时间：2012-08-13T13:11:27.493
> 
> 标签：mysql, indexing, full-text-search

我的问题如下：

我有一个包含**2300 万行**（1 年数据）的表邮件消息。
以下是该表的重要字段

*   id（大整数）
*   msgtimeutc (bigint)
*   主题（小文本）
*   主体）
*   要显示的其他一些数据

我在这张桌子上有一个全文索引：
`CREATE FULLTEXT INDEX mailmessage_fulltext ON mailmessage (body,subject)`

我需要请求**在正文和主题中搜索文本并**在 msgtimeutc 上按日期时间缩小，如下所示：

```
SELECT M.some_data  
FROM mailmessage M 
WHERE M.MSGTIMEUTC >= 1343651965 AND M.MSGTIMEUTC <= 1344170365 
AND ( MATCH (M.BODY,M.SUBJECT) AGAINST ('test')); 
```

mysql

*   不能同时使用 2 个索引（msgtimeutc 和 fulltextindex 上的一个）。所以我的查询结束了对 msgtimeutc 的全表扫描
*   我不能在全文索引中包含 msgtimeutc，因为它是一个 bigint，我在上面或下面做

所以查询花费了太长时间（和 I/O）！

我坚持做这样的*相交*（示例代码未经测试）

```
SELECT M1.some_data FROM mailmessage M1 
WHERE M1.MSGTIMEUTC >= 1343651965 AND M1.MSGTIMEUTC <= 1344170365 
INTERSECT
SELECT M2.some_data FROM mailmessage M2 
WHERE ( MATCH (M2.BODY,M2.SUBJECT) AGAINST ('test')); 
```

解释（对不起滚动条）：

```
+----+-------------+-------+----------+---------------------------------+----------------------+---------+------+------+-------------+ 
| id | select_type | table | type     | possible_keys                   | key                  | key_len | ref  | rows | Extra       | 
+----+-------------+-------+----------+---------------------------------+----------------------+---------+------+------+-------------+ 
|  1 | SIMPLE      | M     | fulltext | msgtimeutc,mailmessage_fulltext | mailmessage_fulltext | 0       |      |    1 | Using where |
+----+-------------+-------+----------+---------------------------------+----------------------+---------+------+------+-------------+ 
```

但它在 mySQL 上不存在

像下面 2 这样的其他请求也在进行全表扫描

```
SELECT M.some_data 
FROM mailmessage M 
WHERE 
M.id in ( 
   select m2.id from mailmessage m2 use index(mailmessage_fulltext)
   where (MATCH (m2.BODY,m2.SUBJECT) AGAINST ('test')) 
) 
AND M.MSGTIMEUTC >= 1343651965 AND M.MSGTIMEUTC <= 1344170365; 
```

或者

```
SELECT M1.ATTACHMENTCOUNT AS ATCH_COUNT 
FROM mailmessage AS M1 
INNER JOIN mailmessage AS M2 ON M1.id = M2.id 
WHERE (M1.MSGTIMEUTC >= 1343651965 AND M1.MSGTIMEUTC <= 1344170365) 
AND (MATCH (M2.BODY,M2.SUBJECT) AGAINST ('test')) 
```

两个查询都解释了计划显示我只使用了一个索引（全文）

所以我最终可能会按日期过滤程序行......但我更喜欢（关于数量）数据库解决方案

任何的想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:48:28.650

从最新的 MySQL 版本开始，无法将全文索引与其他索引结合起来

[http://dev.mysql.com/doc/refman/5.6/en/index-merge-optimization.html](http://dev.mysql.com/doc/refman/5.6/en/index-merge-optimization.html)

> 索引合并不适用于全文索引。我们计划在未来的 MySQL 版本中对其进行扩展以涵盖这些内容。

您可以尝试使用临时表解决您的问题：

```
CREATE TEMPORARY TABLE my_search 
  (FULLTEXT INDEX mailmessage_fulltext(body,subject))         
SELECT M.some_data  
FROM mailmessage M 
WHERE M.MSGTIMEUTC >= 1343651965 AND M.MSGTIMEUTC <= 1344170365 
```

然后将其与查询匹配

```
SELECT M.some_data  
FROM my_search M 
WHERE ( MATCH (M.BODY,M.SUBJECT) AGAINST ('test')); 
```

请记住，对于此解决方案，真实表中的全文索引变得完全无用。

# .net - 为什么有时会使用“New”构造函数，而其他时候却不使用（基本的 OOP 理解）

> ID：11934941
> 
> 赞同：1
> 
> 时间：2012-08-13T13:11:51.813
> 
> 标签：.net, vb.net, oop

我有一个基本的 oop 问题：

我在操作开始时使用（例如在共享点开发中）`New`构造函数，但后来不使用。例如：

```
' CREATES A INSTANCE OF SPSITE FROM GIVEN URL '
Dim site As spsite = New spsite("http://myhost")

' HERE I DO NOT NEED TO USE NEW(...) AND IT RETURNS AN SPSITE OBJECT, '
' A NEW SPSITE OBJECT '
Dim web As spweb = site.openweb() 
```

我的问题：为什么我需要在站点的第一个对象使用 new，而在第二行不需要！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:17:32.220

这是因为 'site' 对象实例上的 'openweb' 方法正在为您分配对象（使用`new`）。而在第一行，您正在自己创建对象。

在这种情况下，`openweb`分配`spweb`实例是方法的功能。

当我们编写代码时，我们负责分配对象的新实例，但通常这些对象也会实例化其他对象的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:21:26.230

我不太了解您的问题，但是如果这两行都在您的代码中（它们应该是），那么它的工作方式如下：第一行创建一个新的 spsite 对象，您可以使用名为的变量访问该对象：site

```
dim site as spsite = new spsite("http://myhost") 
```

在这里，您通过调用先前创建的站点变量的 openweb() 方法来创建一个新的 spweb 变量。这是一个函数调用。此函数返回一个 spweb 实例，因此您不需要一个新实例。

```
dim web as spweb = site.openweb() 
```

openweb() 要么里面有一个新的 spweb()，要么新的 spsite("myhost") 为你创建了一个新的 openweb（这个你不必知道，你只要知道，你会得到一个 spweb 对象）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T13:16:01.727

`new`是为堆上的对象*分配内存的运算符。*然后它通常由构造函数正确*构造*。这基本上是两个动作。`openweb`似乎是您在现有实例上调用的方法。由于它仍然存在，因此您不需要在堆上分配更多内存。

`openweb`可能会创建一个它返回的新对象，但是执行`new`. `openweb`确实如此，或者它返回一个现有的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T13:19:36.727

`new`运算符只需[调用构造](http://msdn.microsoft.com/en-us/library/77s47661.aspx)函数。在您的示例中，您使用 指导创建 SPSite 对象`New spsite("http://myhost")`，但您要求 SPSite 使用 为您创建 SPWeb 对象`site.openweb()`。

此外，SharePoint 在内存管理方面有点棘手，有时您实际上不得不担心自己之后的清理工作。 [本文](http://msmvps.com/blogs/sundar_narasiman/archive/2011/07/30/sharepoint-2010-recommended-practices-for-disposing-objects-part1.aspx)很好地概述了何时处置对象（这是一个用 C# 编写的三部分系列，但原理相同）。如果您正在开发 SharePoint 应用程序，请帮自己一个忙并熟悉何时进行处理，并使用[SPDisposeCheck](http://archive.msdn.microsoft.com/SPDisposeCheck/)在开发过程中提供帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T13:58:23.543

我认为您的困惑可能是您将变量与对象等同起来。变量实际上不是对象，它们只是指向对象（引用）的指针。`New`运算符不会创建新变量，而是创建一个新对象。您可以声明任意数量的变量而无需调用`New`，因为`New`运算符与变量无关。单个对象可以被任意数量的变量引用，例如：

```
Dim variable1 As StringBuilder  ' Declare a new variable
Dim variable2 As StringBuilder  ' Declare a new variable
' At this point, both variables are null (Nothing) because 
' they do not reference/point to any object yet
variable1 = New StringBuilder()  ' Create a new object and set variable1 to reference it
variable2 = variable1  ' Set variable2 to reference the same object as variable1
variable2.AppendLine("Hello world")
Console.WriteLine(variable1.ToString())  ' Writes "Hello World" 
```

正如您在上面的代码中看到的那样，即使我将文本附加到变量 2，它也会影响变量 1。这是因为附加是针对/由变量指向的对象执行的，而不是由变量本身执行的。因此，由于两个变量都指向同一个对象，它们都包含相同的文本，并且会看到对该对象所做的相同更改。

因此，您无需在`New`每次声明新变量时都调用。很多时候，你只需要一个变量来引用一个已经存在的对象。唯一需要使用`New`操作符的时候是需要创建一个新对象的时候。因此，在您的代码中，第一行需要创建一个新的 sprite 对象，然后设置一个变量来引用它。但是，第二行不需要创建一个新对象，它只需要一个变量来引用该`openweb`方法返回的对象。据推测，在该`openweb`方法内部的某个地方，它在内部使用`New`运算符创建一个新对象，然后返回它。

但是，我应该提一下，我所说的一切都只适用于“引用类型”（类）。“值类型”（结构）则不是这样，例如 Integer、Boolean、Date 等。我建议对引用类型和值类型之间的区别进行一些研究。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T08:06:30.533

谢谢！好的，我明白了。我有a类和b类。我创建了一个类的实例，在这里我有一个方法，例如

返回新的 B 类

因此它不需要使用new，因为它是由一个类的方法提供的。

谢谢大家！

# iphone - 如何为 UISlider 轨道使用不可拉伸但重复的背景图像？

> ID：11934942
> 
> 赞同：3
> 
> 时间：2012-08-13T13:11:52.967
> 
> 标签：iphone, ios, objective-c, uislider

是否可以为`UISlider`不拉伸但重复自身的轨道图像设置？

我有一个带有小位置点的背景图像（附加图像是示例......我的是水平的）。因此，如果`UISlider`比图像本身长，它就会开始拉伸它，并且位置点不再对称。如果滑块或拇指超出轨道图像宽度，那么它只会重复自己，这将是非常好的。

类似于 css 的东西`background-repeat: repeat-x;`

![在此处输入图像描述](../Images/de65a4ac7ece74eaadd50076c694f2e1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:08:43.657

您可以使用[`- (UIImage *)resizableImageWithCapInsets:(UIEdgeInsets)capInsets`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImage_Class/Reference/Reference.html#//apple_ref/occ/instm/UIImage/resizableImageWithCapInsets%3a).

它仅适用于 iOS 5 及更高版本。

# java - 使用休眠保存/更新对象

> ID：11934944
> 
> 赞同：3
> 
> 时间：2012-08-13T13:11:56.743
> 
> 标签：java, hibernate, generics

我的班级 Foo 有方法：

```
 protected void saveMany(Collection<T> many) {  
    for(Object one : many) {
            one = session.merge(one); // also tried this commented out
            session.saveOrUpdate(one); // session.merge(one);   
        } 
```

尝试使用 saveOrUpdate 并合并，但都给了我这个异常：

```
Error: Invocation of method 'saveMany' in class Foo threw exception class org.hibernate.HibernateException : org.hibernate.NonUniqueObjectException: a different object with the same identifier value was already associated with the session: [Bar#581301] 
```

**如何解决这个问题？**

边注：

**当我截断我的表时，保存部分可以工作，但是当我填充了表并再次运行此方法时，因此更新了表，它失败了，但有这个例外**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T14:51:02.967

如果你有一个`@Id`已经存在于 Hibernate Session 缓存中的 Class 的分离实例，那么你将不得不调用`merge()`将分离的实例合并到缓存中。那么你应该打电话给`saveOrUpdate()`.

但是您必须小心保留从调用 merge()**返回**的实例，而不是作为参数传入的实例。所以你的代码必须看起来像这样

```
mergedOne = session.merge(one);
session.saveOrUpdate(mergedOne); 
```

如果您在事务内部进行操作，则数据库将在会话结束并且事务提交之前不会更新，或者您显式调用`flush()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:18:19.127

它表示您正在尝试保存一个新对象，其 Id 已被另一个对象使用。

可能，您没有正确实施`equals`和`hashCode`. 所以，hibernate发现你想用id1保存Object2，而数据库里有id1的Object2，但是没有`Object2.equals(Object1)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T13:20:03.110

您的 Hibernatesessions 缓存中有多个版本的“one”！

您必须找到“one”的实例并使用“.evict(...)”从 Hibernatesessions 中删除缓存信息。

> 最后，您可以成功调用 saveOrUpdate！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T13:21:44.207

您可能正在尝试保存`List<T>`具有一个或多个 equals 对象的保存。

使用 SaveOrUpdate 或 merge 来解决它，或者简单地尝试使所有对象都独一无二。

# android - 通过点击 android 中的 TextView 自动生成数据

> ID：11934945
> 
> 赞同：0
> 
> 时间：2012-08-13T13:11:55.823
> 
> 标签：android

我的应用程序类似于 Google 搜索引擎。`SQLite`当用户单击`TextView`而不输入单个字母时，我需要从数据库中生成项目列表。我研究过`AutoCompleteTextView`需要 3 个字母来生成相关文本。

但我不希望用户输入任何内容。用户只需点击`TextView`并单击选项即可。请推荐一些好的网站以获得帮助。我正在使用 android 3.0 API=11 在此先感谢..

# unix - 根据字段分隔符将行拆分为字符串

> ID：11934952
> 
> 赞同：4
> 
> 时间：2012-08-13T13:12:16.133
> 
> 标签：unix, awk, solaris

我有一个文件如下：

```
10temp3
20/temp4
28 temp 5 
```

我正在使用以下命令来拆分行并获取行中的最后一个数字。

```
awk -F"temp" '{print $NF}' temp3 
```

我得到的输出是：

```
> awk -F"temp" '{print $NF}' temp3
10temp3
20/temp4
28 temp 5 
```

令人惊讶的是，如果我使用 nawk 我得到了预期的输出。

```
> nawk -F"temp" '{print $NF}' temp3
3
4
 5
> 
```

我可以知道原因吗？awk 不支持作为分隔符提到的字符串吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T13:27:29.577

实际上 Solaris`awk`只考虑单个字符。`nawk`我会说这可能是由于传统，以及发货的确切原因。

这个`-F`开关真的很特别：它获取引用字符串的第一个字符，并丢弃其余字符，所以`t`剩下的 --- 代表“查找*制表符*作为字段分隔符”。

# sql - sql查找最近的记录

> ID：11934960
> 
> 赞同：0
> 
> 时间：2012-08-13T13:13:01.830
> 
> 标签：sql

我有以下查询，它获取具有给定条件的记录。下面展示了表中的两条记录以及查询的结果。我想要的是根据该`EntryDate`列获取最近发生的事件。

```
0 A 2012-08-09 00:00:00.000 N0206527 N0168639 NULL 09 420202 LTD False  
0 A 2012-08-08 00:00:00.000 N0206527 N0168639 NULL 09 420202 LTD False

DCMNumber CustomerDivision CustomerSerial Product PriorNonDenied    
N0064819  09               420202     LTD     2

SET @firstDayOfCurrentMonth = DATEADD(m,DATEDIFF(M,0,GETDATE()),0)
SELECT  DCMNumber, CustomerDivision, CustomerSerial, Product, COUNT(*) AS PriorNonDenied
                             FROM   cauAssignedClaim 
                             WHERE  RecordType = 'A' AND  
                                   EscFromSTD = '0' AND  
                                   ([Status] <> 'DE' OR  
                                    [Status] IS NULL) AND  
                                   CONVERT(VARCHAR(10), EntryDate, 110) BETWEEN  
                                       CASE WHEN Product = 'LTD' THEN   CONVERT(VARCHAR(10), @firstDayOfCurrentMonth, 110)    
                                       ELSE CONVERT(VARCHAR(10), DATEADD(Day, -7, GETDATE()-1), 110)  
                                       END  
                                       AND CONVERT(VARCHAR(10), GETDATE()-1, 110) 
                             GROUP BY [Status],  
                                      DCMNumber,  
                                      CustomerDivision,  
                                      CustomerSerial,  
                                      Product 
```

谢谢，布拉德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T14:41:39.297

我想你想要这样的东西

```
SELECT a.EntryDate, a.DCMNumber, CustomerDivision, CustomerSerial, Product, WhateverElse, etc
FROM cauAssignedClaim b INNER JOIN

(SELECT MAX(DCMNumber) DCMNumber, MAX(EntryDate) EntryDate
FROM cauAssignedClaim
GROUP BY DCMNumber) a

ON ( a.DCMNumber = b.DCMNumber AND a.EntryDate = b.EntryDate ) 
```

这将为您提供所有唯一 DCM 编号及其最新日期的列表。然后，您可以将其与您需要的所有其他数据一起加入。最终结果将返回带有最新信息的每个 DCMNumber。

如果这不是您想要的，请添加更多详细信息，以便我们更好地了解您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:14:48.397

MySQL:

```
SELECT * FROM table ORDER BY EntryDate DESC LIMIT 1 
```

MSSQL:

```
SELECT TOP 1 * FROM ORDER BY EntryDate DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T13:16:39.547

尝试这个

```
Select Top 1 col1 From Table Order by MyDate DESC 
```

# xslt - XSLT 1.0：向后遍历和过滤树

> ID：11934965
> 
> 赞同：2
> 
> 时间：2012-08-13T13:13:19.333
> 
> 标签：xslt, tree, xslt-1.0

我有以下 XML：

```
<things>
  <thing name="Foo" available="yes"/>
  <thing name="Bar" available="no"/>
  <thing name="Baz" available="yes">
    <parent name="Foo"/>
    <parent name="Bar"/>
  </thing>
  <thing name="Qux" available="no">
    <parent name="Foo"/>
    <parent name="Bar"/>
  </thing>
  <thing name="Waldo" available="yes">
    <parent name="Foo"/>
    <parent name="Bar"/>
    <parent name="Baz"/>
    <parent name="Qux"/>
  </thing>
</things> 
```

这表示如下结构：

*   富
    *   巴兹
        *   沃尔多
    *   曲克斯
        *   沃尔多
    *   沃尔多
*   酒吧
    *   巴兹
        *   沃尔多
    *   曲克斯
        *   沃尔多
    *   沃尔多

实际的 XML 很大，而且嵌套很深。不可用的东西可以在任何地方。没有循环（以自己为祖先的事物）。

现在我想生成所有可能的 Waldo 路径，过滤掉包含不可用内容的路径。我正在寻找类似以下结果的内容：

```
<ul>
  <li>
    <a href="#Foo">Foo</a>
    <ul>
      <li>
        <a href="#Baz">Baz</a>
        <ul>
          <li>
            <b>Waldo</b>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
<ul>
  <li>
    <a href="#Foo">Foo</a>
    <ul>
      <li>
        <b>Waldo</b>
      </li>
    </ul>
  </li>
</ul> 
```

那是：

*   富
    *   巴兹
        *   **沃尔多**
*   富
    *   **沃尔多**

从叶节点开始，查找树，生成所有可能的路径，同时忽略不可用的路径，这让我很难过。非常感谢任何见解、散文、伪代码或 XSLT！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:49:50.360

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common" exclude-result-prefixes="ext">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kChildren" match="thing" use="parent/@name"/>

 <xsl:template match="/*">
   <xsl:variable name="vrtfPass1">
         <things>
           <xsl:apply-templates select="thing[not(parent)]"/>
         </things>
   </xsl:variable>

   <xsl:apply-templates select="ext:node-set($vrtfPass1)/*"
                        mode="pass2"/>
 </xsl:template>

 <xsl:template match="thing">
    <xsl:copy>
      <xsl:copy-of select="@*"/>
      <xsl:apply-templates select="key('kChildren', @name)"/>
    </xsl:copy>
 </xsl:template>

  <xsl:template match="node()|@*" mode="pass2">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*" mode="pass2"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template mode="pass2"
      match="*[not(@name = 'Waldo' or .//*[@name='Waldo'])]" />
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<things>
    <thing name="Foo" available="yes"/>
    <thing name="Bar" available="no"/>
    <thing name="Baz" available="yes">
        <parent name="Foo"/>
        <parent name="Bar"/>
    </thing>
    <thing name="Qux" available="no">
        <parent name="Foo"/>
        <parent name="Bar"/>
    </thing>
    <thing name="Waldo" available="yes">
        <parent name="Foo"/>
        <parent name="Bar"/>
        <parent name="Qux"/>
    </thing>
</things> 
```

**产生一个只包含包含“waldo”的“分支”的结果：**

```
<things>
   <thing name="Foo" available="yes">
      <thing name="Qux" available="no">
         <thing name="Waldo" available="yes"/>
      </thing>
      <thing name="Waldo" available="yes"/>
   </thing>
   <thing name="Bar" available="no">
      <thing name="Qux" available="no">
         <thing name="Waldo" available="yes"/>
      </thing>
      <thing name="Waldo" available="yes"/>
   </thing>
</things> 
```

将其转换为所需的最终 HTML 格式留给读者作为练习。

**说明**：

1.  这是一个两遍转换。

2.  第一遍构造一棵树，其中明确表达了父子关系。

3.  第二遍是一个身份规则，由一个带有空主体的模板（“删除”模板）覆盖，用于不包含带有 string-value的`thing`with 属性的子树。`name``"Waldo"`

**第一遍的结果是**：

```
<things>
   <thing name="Foo" available="yes">
      <thing name="Baz" available="yes"/>
      <thing name="Qux" available="no">
         <thing name="Waldo" available="yes"/>
      </thing>
      <thing name="Waldo" available="yes"/>
   </thing>
   <thing name="Bar" available="no">
      <thing name="Baz" available="yes"/>
      <thing name="Qux" available="no">
         <thing name="Waldo" available="yes"/>
      </thing>
      <thing name="Waldo" available="yes"/>
   </thing>
</things> 
```

第二遍去除两个`<thing name="Baz" available="yes"/>`元素以产生最终结果。

# java - 如何使用 Selenium WebDriver 和 Java 获得选定的选项

> ID：11934966
> 
> 赞同：36
> 
> 时间：2012-08-13T13:13:18.397
> 
> 标签：java, selenium, selenium-webdriver, webdriver, junit4

我想使用 Selenium WebDriver 获取**下拉列表****的选定标签**或值，然后在**控制台上****打印**它。

 ******我可以从下拉列表中选择任何值，但我无法检索所选值并打印它：

```
Select select = new 
Select(driver.findElement(By.id("MyDropDown"))).selectByVisibleText(data[11].substring(1 , data[11].length()-1));
WebElement option = select.getFirstSelectedOption(); 
```

但是我所有的努力都是徒劳的。如何获得选定的选项？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-08-13T16:21:30.060

您应该能够使用`getText()`（对于您使用的选项元素`getFirstSelectedOption()`）获取文本：

```
Select select = new Select(driver.findElement(By.xpath("//select")));
WebElement option = select.getFirstSelectedOption();
String defaultItem = option.getText();
System.out.println(defaultItem ); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-11T04:09:50.517

完成答案：

```
String selectedOption = new Select(driver.findElement(By.xpath("Type the xpath of the drop-down element"))).getFirstSelectedOption().getText();

Assert.assertEquals("Please select any option...", selectedOption); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-04-07T11:24:01.413

在 Selenium Python 中，它是：

```
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support.ui import Select

def get_selected_value_from_drop_down(self):
    try:
        select = Select(WebDriverWait(self.driver, 20).until(EC.element_to_be_clickable((By.ID, 'data_configuration_edit_data_object_tab_details_lb_use_for_match'))))
        return select.first_selected_option.get_attribute("value")
    except NoSuchElementException, e:
        print "Element not found "
        print e 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-30T12:35:49.360

在以下选项上：

```
WebElement option = select.getFirstSelectedOption();
option.getText(); 
```

如果从该方法中`getText()`得到一个空白，则可以使用该方法从选项的值中获取字符串`getAttribute`：

```
WebElement option = select.getFirstSelectedOption();
option.getAttribute("value"); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-12-08T09:37:20.667

```
var option = driver.FindElement(By.Id("employmentType"));
        var selectElement = new SelectElement(option);
        Task.Delay(3000).Wait();
        selectElement.SelectByIndex(2);
        Console.Read(); 
```******

# android - 如何在 ActionBarSherlock 的微调器中设置图标而不是选定元素？

> ID：11934967
> 
> 赞同：0
> 
> 时间：2012-08-13T13:13:21.800
> 
> 标签：android, actionbarsherlock, android-spinner

我想使用 SherlockActionBar 在操作栏上添加一个下拉菜单。我在演示中找到了这段代码：

```
 Context context = getSupportActionBar().getThemedContext();
    ArrayAdapter<CharSequence> list = ArrayAdapter.createFromResource(
            context, R.array.dropdown_items, R.layout.sherlock_spinner_item);
    list.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item);

    getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
    getSupportActionBar().setListNavigationCallbacks(list, this); 
```

我想要的是微调菜单项是一个图标，而不是下拉菜单中的第一个/选定项。我怎样才能做到这一点？我试图在自定义 sherlock_spinner_item 中为 textview 设置一个可绘制对象，并将文本设置为空，但它不起作用。谢谢。 ![在此处输入图像描述](../Images/bef3114826e74bddf6af1b4c182aa134.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:32:06.223

A `SpinnerAdapter`，用于该小部件的适配器类型，允许为下拉布局和选定项目布局指定自定义布局。

从插图中，您可能希望对显示某种代表性图标的选定项目布局使用不同的视图。最好编写自己的类`SpinnerAdapter`来实现此功能，而不是依赖内置的类之一（如`ArrayAdapter`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-21T14:01:22.193

你应该像这样为你的微调器使用自定义适配器

```
class customAdapter extends ArrayAdapter<String> {
    List<String> stringList;
    Context context;

    public customAdapter(Context context, int resource, List<String> objects) {
        super(context, resource, objects);

        stringList = objects;
        this.context = context;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        LayoutInflater layoutInflater = (LayoutInflater) context.getSystemService(LAYOUT_INFLATER_SERVICE);
        View rootView = layoutInflater.inflate(R.layout.spinner_item, parent, false);
        TextView textView = (TextView) rootView.findViewById(R.id.textView);

        textView.setVisibility(View.GONE);

        return rootView;
    }

    @Override
    public View getDropDownView(int position, View convertView, ViewGroup parent) {
        LayoutInflater layoutInflater = (LayoutInflater) context.getSystemService(LAYOUT_INFLATER_SERVICE);
        View rootView = layoutInflater.inflate(R.layout.spinner_item, parent, false);

        TextView textView = (TextView) rootView.findViewById(R.id.textView);
        ImageView imageView = (ImageView) rootView.findViewById(R.id.imageView);

        textView.setText(stringList.get(position));
        imageView.setVisibility(View.GONE);

        return rootView;
    } 
```

getDropDownView 用于下拉项目，getView 用于微调器标题。

# image - 在matlab中计算两个图像的协方差

> ID：11934968
> 
> 赞同：2
> 
> 时间：2012-08-13T13:13:22.323
> 
> 标签：image, matlab

我正在做一个关于图像质量评估的项目。我将图像转换为灰度并使用 mat2cell 函数将整个图像划分为 8x8 矩阵。我对两个图像做了这个，现在我想计算这两个图像之间的协方差（即图像 1 的矩阵之间的协方差和图像 2 的同一矩阵之间的协方差）。请注意，两者都是相同的图像：一张是没有失真的纯图像，另一张是有失真的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T19:41:08.653

首先将您的图像转换为矩阵：

```
I = double(imread('photo.jpg')); 
```

然后计算协方差：

```
x=cov(I); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-04T11:36:57.207

对于单个矩阵输入，C 的大小 [size(A,2) size(A,2)] 基于由 A 表示的随机变量（列）的数量。列的方差沿着对角线。如果 A 是行向量或列向量，则 C 是标量值方差。

对于两个向量或两个矩阵的输入，C 是两个随机变量之间的 2×2 协方差矩阵。方差沿着 C 的对角线。

# android - 初始化 Cordova 时出错：找不到类

> ID：11934974
> 
> 赞同：58
> 
> 时间：2012-08-13T13:13:53.797
> 
> 标签：android, cordova

我按照 Phonegap.com 官方网站上的 Phonegap 教程进行操作（Android 入门）。

我已经按照所有步骤创建了项目。

1.  创建活动并从“DroidGap”扩展并从 onCreate() 添加 loadURL 方法。
2.  在相应的文件夹中添加了 cordova-2.0.0.js 和 cordova-2.0.0.jar。
3.  将jar文件添加到构建路径
4.  从html标签加载js文件
5.  从 AndroidMainfeast.xml 添加权限
6.  复制了包含“configs.xml”的xml文件夹

现在我不明白问题出在哪里。它显示以下错误，如屏幕截图所示 ![在此处输入图像描述](../Images/89ab3f3668fb2d5d88c02e6476f2f6f6.png)

这是我的 HTML 文件

```
<!DOCTYPE html>
<html>
  <head>
    <title>Notification Example</title>

    <script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>
    <script type="text/javascript" charset="utf-8">

    // Wait for Cordova to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // Cordova is ready
    //
    function onDeviceReady() {
        // Empty
    }

    // Show a custom alert
    //
    function showAlert() {
        navigator.notification.alert(
            'You are the winner!',  // message
            'Game Over',            // title
            'Done'                  // buttonName
        );
    }

    // Beep three times
    //
    function playBeep() {
        navigator.notification.beep(3);
    }

    // Vibrate for 2 seconds
    //
    function vibrate() {
        navigator.notification.vibrate(2000);
    }

    </script>
  </head>
  <body>
    <p><a href="#" onclick="showAlert()">Show Alert</a></p>
    <p><a href="#" onclick="playBeep()">Play Beep</a></p>
    <p><a href="#" onclick="vibrate()">Vibrate</a></p>
  </body>
</html> 
```

有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-08-13T17:04:34.703

它`config.xml`不是`configs.xml`。

根据我看到的日志，您的应用程序`res/xml`目录中缺少此文件。它包含在发行版中，`lib/android/res/xml/config.xml`因此将该文件复制到您的`res/xml`目录中，您应该已准备就绪。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-10-19T16:41:52.427

正如[aharris88 在他对这个问题的回答中](https://stackoverflow.com/a/18884127/282259)一样，从 Phonegap 3.0 迁移后，在我的 Android 开发手机上`[CORDOVA] Error initilizing Cordova: Class not found`使用**Cordova 3.1.0**时，我收到了错误消息。

所有摆弄目录`config.xml`中的文件都`/platforms/android/res/xml`没有帮助。基于上面提到的 Stackoverflow 答案，我尝试通过重新安装 Android 平台支持来“重新开始”：

```
cordova platform rm android
cordova platform add android 
```

在这一步之后它再次工作，我能够`cordova build android && cordova run android`没有任何进一步的问题。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-05-20T22:28:29.223

由于我删除了一个插件，我遇到了这个错误。我添加了

```
<plugin name="Device" value="org.apache.cordova.Device"/> 
```

再次到 config.xml 文件并修复它。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-07-19T08:29:31.267

我的你没有以下插件：

```
<plugin name="Device" value="org.apache.cordova.Device"/> 
```

你必须把它放在中间`<plugins></plugins>`。像

```
<plugins>
    <plugin name="Device" value="org.apache.cordova.Device"/>
</plugins> 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-09-18T23:42:04.247

我在使用 phonegap 3.x 时遇到了这个问题，结果问题是 phonegap 没有正确安装插件，或者他们只是一路搞砸了。基本上，当您安装插件并为平台构建时，它会从 plugins/org.apache.cordova.core.specific-plugin/www 获取 javascript 文件，并将它们放在 platform/android/assets/www/plugins/org.apache 中。 cordova.core.specific-plugin/www 然后它获取Java文件（或iOS的目标C）并将它们放入platforms/android/src/org/apache/cordova/specificplugin

所有这些都由 plugins/org.apache.cordova.core.specific-plugin/plugin.xml 指定。如果您查看 plugins.xml，您应该会看到如下内容：

```
<source-file src="src/android/NetworkManager.java" target-dir="src/org/apache/cordova/networkinformation" /> 
```

所以这告诉你，在platforms/android/src/org/apache/cordova/networkinformation中，应该有NetworkManager.java。该文件可以从 plugins/org.apache.cordova.core.network-information/src/android/NetworkManager.java 复制

现在所有这些都应该自动发生，而无需触及平台文件夹。但是，如果它搞砸了，您可以通过手动将正确的文件复制到正确的文件夹中来修复它。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-05-28T09:53:25.890

好吧，我发现的错误是：

> 05-28 08:19:53.139: E/PluginManager(1478): ================================== ==================================================== = 05-28 08:19:53.139: E/PluginManager(1478): 错误: config.xml 丢失。将 res/xml/config.xml 添加到您的项目中。05-28 08:19:53.139: E/PluginManager(1478): [https://git-wip-us.apache.org/repos/asf?p=incubator-cordova-android.git;a=blob;f=框架/res/xml/plugins.xml](https://git-wip-us.apache.org/repos/asf?p=incubator-cordova-android.git;a=blob;f=framework/res/xml/plugins.xml)

但我在我的项目中找到了 /res/xml/config.xml

最后，我在 org.apache.cordova.api.PluginManager 中发现了错误：

```
public void loadPlugins() {
int id = this.ctx.getActivity().getResources().getIdentifier("config", "xml",    this.ctx.getActivity().getClass().getPackage().getName());
... 
```

应改为：

```
public void loadPlugins() {
int id = this.ctx.getActivity().getResources().getIdentifier("config", "xml",    this.ctx.getActivity().getPackageName());
... 
```

您可以在官方文档中阅读有关“getIdentifier(String name, String defType, String defPackage)”方法的更多信息

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-04-10T16:08:47.613

使用 phonegap 命令行时，您可以通过执行以下操作来解决此问题：

1.  删除合并/android、platforms/android、plugins/android.json

2.  跑`phonegap local build android`

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-05-09T15:35:59.253

没有找到类有同样的问题。需要注意的一个问题是确保 android.json（或 ios.json）文件在构建时被更新。我的实际上是空的。此外，删除并添加回一些其他帖子中提到的插件。最后，对我有用的是确保插件在 config.xml 中被更正引用：

```
<feature name="Device">
  <param name="android-package" value="org.apache.cordova.device.Device"/>
</feature>
<feature name="Camera">
  <param name="android-package" value="org.apache.cordova.camera.CameraLauncher"/>
</feature>
<feature name="Notification">
  <param name="android-package" value="org.apache.cordova.dialogs.Notification"/>
</feature> 
```

请注意“device.Device”的双重命名以及“camera”和“dialogs”插件的子类。Phonegap 文档没有正确引用这一点。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-11-17T16:44:48.310

所以在接近自杀之后，我发现我正在使用cordova 5.3.3版和cordova-android 5.0.0版，不知何故我不知道可能是不兼容还是可能有错误，所以我退回到科尔多瓦 android 4.1.1

```
 cordova platform rm android
  cordova platform add android@4.1.1 
```

这救了我

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-01-25T09:40:15.023

我遇到了同样的错误：“初始化 Cordova 时出错：找不到类”，在 Visual Studio 2015 中使用 Cordova。但这不是唯一的错误，我的插件似乎都没有达到低谷。我什么都试过了。从`cordova platform rm/add android`x1000 次到手动删除和重新添加插件，似乎没有任何效果。

[![在此处输入图像描述](../Images/0780807a1e5d4794c7258a302b471b40.png)](https://i.stack.imgur.com/v3rbs.png)

然后我将 taco.json 文件中的 cordova-cli 从 5.3.3 更改为 5.4.0 并在我的设备上运行它。最后，这为我解决了整个问题。然后我将cordova版本降级回5.3.3（adb桥还不支持5.4.0版本）。试试看！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-11-01T04:47:57.507

[在我的情况下解决]

首先，第六步是错误的：它是 config.xml 而不是 configs.xml

尽管我的**config.xml**在 res/xml 文件夹中，但我有同样的错误。这是因为您必须手动安装基本 API 功能的插件。

通过控制台导航到您的项目文件夹并键入：

```
phonegap local plugin add https://git-wip-us.apache.org/repos/asf/cordova-plugin-device.git 
```

您可以在 phonegap Doc 中阅读更多信息（最后一节称为添加功能）：[Phonegap Doc](http://docs.phonegap.com/en/3.0.0/guide_cli_index.md.html)

我也留给你我的 config.xml 文件

```
<?xml version='1.0' encoding='utf-8'?>
<widget id="io.cordova.helloCordova" version="2.0.0" xmlns="http://www.w3.org/ns/widgets" xmlns:gap="http://phonegap.com/ns/1.0">
    <name short="Menu">Menu Digital</name>
    <description>
        Description
    </description>
    <author email="asd@gmail.com" href="www.facebook.com/usr"> Name </author>
    <feature name="App">
        <param name="android-package" value="org.apache.cordova.App" />
    </feature>
    <feature name="http://api.phonegap.com/1.0/device" />
    <feature name="http://api.phonegap.com/1.0/media" />
    <feature name="Device">
        <param name="android-package" value="org.apache.cordova.device.Device" />
    </feature>
    <content src="index.html" />
    <feature name="App">
        <param name="android-package" value="org.apache.cordova.App" />
    </feature>
    <access origin="*" />
    <preference name="useBrowserHistory" value="true" />
    <preference name="exit-on-suspend" value="false" />
    <preference name="fullscreen" value="true" />
    <preference name="webviewbounce" value="true" />
</widget> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-07-28T07:55:54.480

我遇到了同样的错误，我检查了我的 Cordova 插件列表

通过在我的 Android 项目目录中运行命令“cordova plugin list”，发现缺少“org.apache.cordova.device”插件。

我使用“Cordova plugin add cordova-plugin-device”对其进行了更新，并且错误消失了。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-02-22T12:57:14.133

这可能会发生，因为您的 cordova 插件与 IONIC 期望找到的路径不同：

您应该更正插件源文件夹中的文件**plugin.xml ：**

```
<config-file target="app/src/main/res/xml/config.xml" parent="/*"> 
```

应该：

```
 <config-file target="res/xml/config.xml" parent="/*"> 
```

如果您尝试在 Android Studio Logcat 中搜索该错误，通常会发现如下内容：

```
io.ionic.starter E/chromium: [ERROR:service_manager.cc(156)] Connection InterfaceProviderSpec prevented service: content_renderer from binding interface: blink::mojom::BudgetService exposed by: content_browser
2019-02-22 13:40:06.144 30230-30258/com.android.webview:sandboxed_process0 E/chromium: [ERROR:BudgetService.cpp(167)] Unable to connect to the Mojo BudgetService. 
```

# c++ - 带有 boost 1.50 的 Visual Studio C++ 2005/2010：警告 C4267

> ID：11934976
> 
> 赞同：0
> 
> 时间：2012-08-13T13:14:01.623
> 
> 标签：c++, boost, warnings

我无法阻止这个警告..

```
...\boost\asio\impl\io_service.ipp(46) : warning C4267: 'argument' : conversion from 'size_t' to 'std::numeric_limits<unsigned int>::_Ty', possible loss of data 
```

也许你得到了

1.  对此的解释
2.  防止投掷的解决方案:-)

亲切地，

亚历克斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T13:23:39.290

> 对此的解释

怀疑这是一个 64 位版本，`size_t`将是 64 位，`unsigned int`将是 32 位：

```
std::cout << sizeof(unsigned int) << "\n"; // Output '4' on both x86 and x64
std::cout << sizeof(size_t)       << "\n"; // Output '4' on x86
                                           // Output '8' on x64 
```

> 防止投掷的解决方案

添加编译器标志`/Wd4267`以禁用此警告。但是，这将禁用项目中您可能不喜欢的所有来源的警告。另一种方法是使用[`#pragma warning`](http://msdn.microsoft.com/en-us/library/2c8f766e%28v=vs.71%29.aspx)：

```
#pragma warning(disable: 4267)
#include <boost-header-files>
#pragma warning(default: 4267) 
```

# c# - Gridview 行选择和编辑

> ID：11934979
> 
> 赞同：2
> 
> 时间：2012-08-13T13:14:04.247
> 
> 标签：c#, winforms, datagridview

我正在处理数据输入表单。当我单击保存按钮时，我希望将表单中的数据保存到数据库中。我还想`DataGridview`从数据库中填充一个。

我的问题是：当我从`DataGridview`该行中选择任何行时，该行将显示为已选中。根据主键数据填写数据输入表的所有字段。

我可以使用哪个事件？任何人都可以提供任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:21:05.510

最简单的方法是使用绑定源和数据绑定。

因此，将绑定源添加到您的表单并使其成为您的数据源，`DataGridView`然后为您的数据输入字段设置数据绑定（这里我只是绑定到单个文本框）。

```
// Load your data into a data source - for the example just imagine a data table called dt
bindingSource1.DataSource = dt;
dataGridView1.DataSource = bindingSource1;

// Now we set up a databinding to a text box, to an example property LastName
textBox1.DataBindings.Add(new Binding("Text", bindingSource1, "LastName", false,
    DataSourceUpdateMode.OnPropertyChanged)); 
```

当您从网格中选择项目时，此绑定会自动以两种方式运行。将显示您选择的每个项目的姓氏。

要使双向绑定更快速（有时它会滞后到您进入网格），您可以在文本框 LostFocus 事件中执行以下操作：

```
void textBox1_LostFocus(object sender, EventArgs e)
{
    bindingSource1.ResetBindings(false);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:22:50.307

当您选择一行时 SelectedIndexChanging 被调用

when a row is selected SelectedIndexChanged is called

要填充 gridview，您必须使用 RowDataBound

有关完整列表，请参阅以下 msdn 链接 [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview_events.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview_events.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T13:20:12.060

你可以做

```
private void dataGridView1_CellMouseDown(object sender, DataGridViewCellMouseEventArgs e)
        {
            textBox1.Text = dataGridView1.CurrentRow[e.RowIndex].ToString();
        } 
```

或者使用row enter事件获取当前行

```
private void dataGridView1_RowEnter(object sender, 
    DataGridViewCellEventArgs e)
{
    //e.RowIndex to get the index of the row
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T13:22:20.447

尝试使用：

```
GridView.RowCommand Event 
```

[有关更多详细信息，请参阅 - GridView.RowCommand 事件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcommand.aspx)

# php - 使用简单 XML 读取 XML 属性

> ID：11934992
> 
> 赞同：0
> 
> 时间：2012-08-13T13:14:35.230
> 
> 标签：php, simplexml

我想从 RSS 提要中读取带有简单 XML 的特定属性。

项目示例：

```
<item>
     <category>3500</category>
     <category>20</category>
     <category>17</category>
     <title>Blabla</title>
     <description>Blabla</description>
     <content:encoded>Blabla</content:encoded>
     <link>http://...</link>
     <guid isPermaLink="false">http://...</guid>
     <media:content url="http://image.jpg" medium="image">
              <media:title type="html">caption needed</media:title>
     </media:content>
     <pubDate>Mon, 13 Aug 2012 11:40:53 +0200</pubDate>
</item> 
```

我想阅读 media:content 中的 url。

阅读我使用的其他标签：$xml->channel->item[$i]->title

要读取我尝试的媒体 url 属性： $xml->channel->item[$i]->media->attributes()->url

但这只是返回 NULL。它与 :content 相关，它是一个命名空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:23:21.823

元素的名称实际上是`content`，而不是`media`（它只是一个任意前缀，应该与命名空间相关联以成为格式良好的 XML）。与`encoded`作为元素名称而不是`content`.

```
$xml->item[0]->children('whatever-the-namespace-tied-to-media-is')->content->attributes()->url 
```

# jquery - Arrow positioning in fancybox

> ID：11934993
> 
> 赞同：6
> 
> 时间：2012-08-13T13:14:36.090
> 
> 标签：jquery, fancybox

I have fancybox running to display blog posts in an iframe when the title is clicked from a slider. I would like to use the arrows but the default positioning of the arrows means that (in chrome at least) the buttons cover the area where the scrollbar for the blog post would be meaning that the user cannot scroll.

I would like to reposition the arrows so that they are to the left and right of the fancybox and not overlaid on the box itself although I cannot find an option for this. Can anybody help me out?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T14:17:11.647

主页包含有用的演示集合 - [http://fancyapps.com/fancybox/#useful](http://fancyapps.com/fancybox/#useful) 看起来您正在寻找 #6 - [http://jsfiddle.net/fhpZ5/](http://jsfiddle.net/fhpZ5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:42:23.383

您可以使用 CSS 重新定位箭头并将它们放置在您喜欢的位置。

打开 fancybox css 文件（jquery.fancybox-1.3.4.css），在第 145 行附近，您应该会找到以下 css 样式。将左右位置从默认值 (0) 更改为您希望显示箭头的位置。

```
/* Line 145 (ish) of the fancybox css sheet */
#fancybox-left {
    left: -50px; /* Default: 0 */
}

#fancybox-right {
    right: -50px; /* Default: 0 */
} 
```

应该将`-50px`两个箭头都拉到盒子外面。您可以更改它以将箭头放置在您喜欢的位置。

* * *

更新 - V.2.0.3 花式框样式表。
在 V2 版本中，在 css 表中查找以下内容并相应地进行更改。

```
/* Around line 117 in .css file */
.fancybox-prev {
    left: 0; /* Change to -50px */
}

.fancybox-next {
    right: 0; /* Change to -50px */
} 
```

# r - r spatial mapping

> ID：11934994
> 
> 赞同：1
> 
> 时间：2012-08-13T13:14:46.293
> 
> 标签：r, maps, spatial

I am trying to make some nice spatial maps in R. I am trying to understand how to upload the data in case you would like to have a look at them but I have not figured that out (I am sorry for that but being a new user means looking for all these things).

What is my situation. I have a shapefile of the whole USA, I only need some states, and I can select my grid when I plot it (as you see from the code in the plot section).

I also have some yield data (points) which have latitude, longitude and Yield. I have 4 different Yield data which are called ("All Stations", "0.5", "1.0", and "2.0").

I am trying to plot these 4 yields data on the spatial map to have 4 different spatial maps. Which is done.

I have done this by reading on stackoverflow here and there I used bits and pieces to do that, although I have never done it before I was surprised how fast I could advance (Thank you people on StackOverflow!!!).

Can someone help me to understand if my code is correct?

Also, how can I make the legends of the 4 maps a regularr scale? E.g. from 4000 to 9000 with 500 intervals for each of the 4 maps. What I have done is to create a separate text file ("Yield for Legend.txt") which I use to generate the colour scales in the maps and the legends. Is that correct?

Again, your critics are mostly welcome!

Thank you, David

```
 rm(list=ls())
    setwd("C:\\Users\\.....\\Shape File")
    library(spatstat)
    library(rgdal)
    library(shapefiles)
    library(maptools)
    library(RColorBrewer)
    library(classInt)

    # read in shapefiles

    counties.rg <- readOGR("C:\\Users\\......\\Shape File", "tl_2011_us_county")

    Yields <- read.table("Yield.txt", skip=1, header = F)

    Yield.g <- as.ppp(Yields, owin( c(-89, -76), c(25, 37)))

    ## Reading Data for Legend and colouring breaks

     Y.LE <- read.table("Yield for Legend.txt", header=F)
     Y.L.I <- classIntervals(Y.LE$V1, n=9, style = "quantile")
     Y.L.I <- Y.L.I$brks

    #select color palette and the number colors (levels of income) to represent on the map
    #colors <- brewer.pal(9, "RdYlGn")
    colors <- brewer.pal(9, "Greys")

    ################################################
    ### Generating MAPS ############################
    ################################################

    #set breaks for the 9 colors
      #par(mfrow=c(2,2))

     pdf("13 August Spatial Maps.pdf") 
    # All Points 

    brks.all <-classIntervals(Yields$V3, n=9, style = "quantile")
    brks.all <- brks.all$brks

    plot(counties.rg, axes=TRUE, border="grey", xlim = c(-82, -80),
        ylim = c(24, 37))
    points(Yield.g, cex= 1.1, bg=colors[findInterval(Yields$V3, Y.L.I,all.inside=TRUE)], pch=21)

    #add a title
    title(paste ("Rainfed Yield (kg/ha)All Stations"))

    #add a legend
    legend("bottomright", legend=leglabs(round(Y.L.I)), fill=colors, bty="n", cex=0.7 ) #,x.intersp = .5, y.intersp = .5)

    # 0.5 Grid  
    brks.05 <-classIntervals(Yields$V4, n=9, style = "quantile")
    brks.05 <- brks.05$brks

    plot(counties.rg, axes=TRUE, border="grey", xlim = c(-82, -80),
        ylim = c(24, 37))
    points(Yield.g, cex= 1.1, bg=colors[findInterval(Yields$V4, Y.L.I,all.inside=TRUE)], pch=21)
    #abline(v=GF$V1, col="grey40")
    #abline(h=GF$V2, col="grey10", lty="dotted")
    #backup
    #points(Yield.g, cex= Yields$V4/9000, col=colors[findInterval(Yields$V4, brks.05,all.inside=TRUE)], pch=19)

    #add a title
    title(paste ("Rainfed Yield (kg/ha)0.5"))

    #add a legend
    legend("bottomright", legend=leglabs(round(Y.L.I)), fill=colors, bty="n", cex=0.7 ) #,x.intersp = .5, y.intersp = .5)

    # 1.0 Grid
    brks.1 <-classIntervals(Yields$V5, n=9, style = "quantile")
    brks.1 <- brks.1$brks

    plot(counties.rg, axes=TRUE, border="grey", xlim = c(-82, -80),
        ylim = c(24, 37))
    points(Yield.g, cex= 1.1, bg=colors[findInterval(Yields$V5, Y.L.I,all.inside=TRUE)], pch=21)
    #abline(v=GO$V1, col="grey40")
    #abline(h=GO$V2, col="grey10", lty="dotted")
    #add a title
    title(paste ("Rainfed Yield (kg/ha)1.0"))

    #add a legend
    legend("bottomright", legend=leglabs(round(Y.L.I)), fill=colors, bty="n", cex=0.7 ) #,x.intersp = .5, y.intersp = .5)

    # 2.0 Grid

    brks.2 <-classIntervals(Yields$V6, n=9, style = "quantile")
    brks.2 <- brks.2$brks

    plot(counties.rg, axes=TRUE, border="grey", xlim = c(-82, -80),
        ylim = c(24, 37))
    points(Yield.g, cex= 1.1, bg=colors[findInterval(Yields$V6, Y.L.I,all.inside=TRUE)], pch=21)
    #abline(v=GG$V1, col="grey40")
    #abline(h=GG$V2, col="grey10", lty="dotted") 
    #add a title
    title(paste ("Rainfed Yield (kg/ha)2.0"))

    #add a legend
    legend("bottomright", legend=leglabs(round(Y.L.I)), fill=colors, bty="n", cex=0.7 ) #,x.intersp = .5, y.intersp = .5)
dev.off() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T19:47:45.593

针对您关于设置休息时间和让您的图例匹配的具体查询，有一个相当简单的解决方法。

您可以使用带有 style="quantile" 的 classInterval 函数来定义您的休息时间。如果您希望地图显示“从 4000 到 9000，4 个地图中的每一个都有 500 个间隔”，为什么不使用 style="fixed"

```
brks.all <-classIntervals(Yields$V3, n=10, style = "fixed",
  fixedBreaks=seq(from=4000, to=9000, by=500)
brks.all <- brks.all$brks 
```

请注意，按我的计数，4k 到 9k 到 500 会创建 10 个间隔，而 9 个颜色渐变通常不会形成漂亮的地图。

或者，classInt 中的 dataPrecision 变量也可以帮助您获得更接近您想要的标签和中断，但仍基于分位数（如果跨地图不统一）

# ubuntu - How to install "make" in ubuntu?

> ID：11934997
> 
> 赞同：31
> 
> 时间：2012-08-13T13:14:51.017
> 
> 标签：ubuntu, makefile, centos, yum, apt

I'm trying to install "yum" or "apt-get" into my system "ubuntu centOS". I did download the binary files for these two programs from the internet using the command wget. but after decompressing the files using the command "tar -zxvf "filename" ,then configuring the file "./configuring", and then when I want to use the command "make" I get the following error "make: not found".

I have searched for a method to download the "make" command but all the methods I found on the net use either the command "yum" or "apt-get" and I don't have any of them.

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-08-13T13:25:57.893

我不知道 linux 发行版“ubuntu centOS”是什么。Ubuntu 和 CentOS 是两个不同的发行版。

要回答标题中的问题：要在 ubuntu 中安装 make，您必须安装 build-essentials

```
sudo apt-get install build-essential 
```