# StackOverflow 问答 10882000-10882999

# android - 基于现有小部件的 Android 自定义小部件

> ID：10882001
> 
> 赞同：3
> 
> 时间：2012-06-04T13:15:46.893
> 
> 标签：android, widget, ondraw

我希望我的问题可以理解，因为我是 Android 初学者，英语不是我的母语。

我想创建一个自定义小部件，它将几个 TextView、ProgressBar 和 Button 组合在一起。目标是能够在具有自定义属性的 XML 布局文件中声明我的自定义小部件，这些属性定义按钮文本等......但是内部 Android 小部件的配置将是相同的，并在我的类中定义。

我已经找到了如何声明自定义属性和创建自定义小部件，但在放置现有 Android 小部件的简单情况下，我没有找到任何文档或示例。我很惊讶，所以也许我朝错误的方向搜索。

在我正在测试的简单代码下方。

自定义类：

```
public class CastleViewItem extends View {

    private TextView item;

    public CastleViewItem (Context c, AttributeSet attributes) {
        super(c, attributes);
        item = new TextView(c);
        TypedArray attrs = c.obtainStyledAttributes(attributes, R.styleable.CastleViewItem);
        item.setText(attrs.getString(R.styleable.CastleViewItem_name).toString());
 }
    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas); 
        // I suppose there is some code to add here.
    }
    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        setMeasuredDimension(200, 200);
        // item.getWidth()/item.getHeight() return 0, so I fixed temporarily the value to ensure 
        // the widget will be displayed.
    }
} 
```

XML 自定义属性声明：

```
<resources>
    <declare-styleable name="CastleViewItem">
        <attr name="name" format="string" />
    </declare-styleable>
</resources> 
```

XML 布局文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ffbdx="http://schemas.android.com/apk/res/bdx.fleurey"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <bdx.fleurey.CastleViewItem
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        ffbdx:name="Moat" />

</LinearLayout> 
```

此代码不显示任何内容。我希望我很清楚，在此先感谢您的回答/建议。

# image - matlab中图像的分块处理

> ID：10882003
> 
> 赞同：1
> 
> 时间：2012-06-04T13:15:57.833
> 
> 标签：image, matlab, image-processing

我有一个大小为 256*256 的图像，我想要对该图像进行分块处理。为此，我想获得 64*64=4096 个块，每个块 16 个像素。我是 Matlab 的新手，所以我发现很难找到具体的命令来做到这一点。到目前为止，我所拥有的是，

```
 I=imread('kidneyimage.jpg');
    I=rgb2gray(I);
    % block wise processing needed. 
```

非常感谢有关命令的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T13:23:10.907

为此，您可以使用该功能`im2col`。

[http://www.mathworks.fr/help/toolbox/images/ref/im2col.html](http://www.mathworks.fr/help/toolbox/images/ref/im2col.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T13:28:49.343

如果您刚开始使用 Matlab，请尝试最简单的方法：使用两个嵌套[`for`](http://www.mathworks.com/help/techdoc/learn_matlab/f4-1931.html)循环来迭代和操作每个块。查看 的帮助页面[`imread`](http://www.mathworks.com/help/techdoc/ref/imread.html)，此功能为您提供了一个填充了每个像素颜色的矩阵。[Matlab 具有使用冒号 (:) 运算符](http://www.mathworks.com/help/techdoc/ref/colon.html)提取部分矩阵的特殊符号，因此您可以轻松地逐个修改图像块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T18:40:08.093

该功能似乎完全符合您的需要。它对每个图像块应用函数，然后连接结果。还有直接从文件中读取图像的选项。`B =`[`blockproc`](http://www.mathworks.com/help/images/ref/blockproc.html)`(A, [M N], fun)``fun``A`

# php - 如何检查控制器和动作是否真的存在？

> ID：10882005
> 
> 赞同：2
> 
> 时间：2012-06-04T13:16:02.790
> 
> 标签：php, cakephp, cakephp-2.1

在我的应用程序中，我记录了数据库中的所有页面视图，在 AppController 中是这样的：

```
$this->Link->save(array(
    'controller' => $this->request->params['controller'],
    'action' => $this->request->params['action'],
    'var1' => $this->request->params['pass'][0],
    'var2' => $this->request->params['pass'][1]
)); 
```

效果很好，但是人们（或机器人）输入的一些 URL 是 404。我如何检查这些链接是否真实。

我收到的许多请求来自同一域上的先前网站，Cake 认为是控制器的 /images 请求等。

我不介意检查是在进入数据库之前还是在视图中从数据库中检索之后进行。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:22:03.640

我自己没试过，但你可以试试打电话[`Router::parse()`](https://github.com/cakephp/cakephp/blob/2.2/lib/Cake/Routing/Router.php#L512)

您提供完整的 URL，返回值将是 cake 的路由数组，您可以在其中看到控制器、动作等的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:30:30.703

**更新 2：在调度前捕获请求**

遗憾的是，如果您升级，以下代码适用于 cakephp 2.2。[请参阅调度过滤器的手册页](http://book.cakephp.org/2.0/en/development/dispatch-filters.html)

```
<?php
App::uses('DispatcherFilter', 'Routing');
class HttpCacheFilter extends DispatcherFilter {

    public function beforeDispatch($event) {
        $request = $event->data['request'];

        if ($request->params['controller'] !== 'pages') {
            die('not found');
        }
    }
} 
```

**原始答案：**

你不应该检查任何东西，因为 Cakephp 首先会为你做这件事。

`NotFoundException()`在生产模式下（即 debug=0），CakePHP 将为任何未定义的控制器和/或动作抛出一个。

在开发模式下，CakePHP 可以给您更明确的信息。

所以请尝试`Configure::write('debug',0);`在`core.php`

希望这可以帮助 ！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-15T08:03:23.310

基于来自[http://www.cleverweb.nl/cakephp/list-all-controllers-in-cakephp-2/](http://www.cleverweb.nl/cakephp/list-all-controllers-in-cakephp-2/)的见解，应该执行以下操作。

```
function check($controller, $action)  {
  $controller = Inflector::camelize($controller);
  App::import('Controller', $controller.'Controller');
  $aMethods = get_class_methods($controller.'Controller');
  if($aMethods) {
    foreach ($aMethods as $idx => $method) {
      if($action==$method) return true;
    }
  } else  {
    //this is probably NOT a controller!
  }
  return false;
} 
```

然后像下面这样在 AppController 中调用它，也许在 beforeFilter 中：

```
$this->check($this->request->params['controller'], $this->request->params['action']); 
```

# javascript - 用户关闭浏览器时是否可以保存所有字段信息？

> ID：10882012
> 
> 赞同：2
> 
> 时间：2012-06-04T13:16:52.663
> 
> 标签：javascript

例如，有人正在写一篇文章，但不小心关闭了浏览器。是否有可能保存他写的所有内容？

像这样的东西：

onExit -> 获取用户填写的所有信息 -> 将信息保存在数据库中的 AJAX 请求。

或者

是否只能通过每 x 秒抢先保存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T13:20:15.790

我的公司通过运行 ajax 查询以每 5 秒保存一次来做到这一点，但您应该考虑[`localStorage`](http://hacks.mozilla.org/2009/06/localstorage/)在客户端上进行保存，[`onunload`](https://developer.mozilla.org/en/DOM/window.onunload)用于保存并稍后恢复。

我制作了一个[html5 记事本](http://demos.jkirchartz.com/HTML5notepad.html)，它存储到`localStorage`每个`onchange`事件和每 500 毫秒并`onbeforeunload`保存一个字段，但它很容易修改，这是（基本）代码：

```
<textarea placeholder="Type here, see it here..."  id="notepad"></textarea>
<script>
    var n = document.getElementById("notepad");
    /* save */
    var s = function(){localStorage.setItem("notepad", n.value);}
    /* retrieve (only on page load) */
    if(window.localStorage){ n.value = localStorage.getItem("notepad");}
    /* autosave onchange and every 500ms and when you close the window */
    n.onchange = s();
    setInterval( s, 500);
    window.onunload = s();
</script> 
```

如果您在[该页面上](http://demos.jkirchartz.com/HTML5notepad.html)查看源代码，您还会发现一个用于支持旧浏览器的[polyfill](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills)`localStorage` ，但应该[可以在 IE8+ 中使用](http://caniuse.com/#feat=namevalue-storage)

我不相信客户端`onbeforeunload`单独完成一个 ajax 调用，但我真的不知道该功能如何在顶级浏览器中工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T13:59:14.333

我可能会使用本地存储和 ajax 的组合，并且我会使用延迟的 setTimeout，以便在一段时间不活动后发出 ajax 请求。

因此，例如，您可以将 ajax 刷新绑定到要保存的项目的事件：

```
$("#fieldToSave").bind("keyup",(function()
        {
            var timeoutId = null;
            var previous = "";
            return function(e)
            {
                var that = this;

                if ($(that).val() != previous)
                {
                    previous = $(that).val();
                    clearTimeout(timeoutId);
                    timeoutId = setTimeout(function()
                    {
                        ajaxRefresh();

                        if(window.localStorage)
                        {
                            localStorage.setItem("notepad", that.value);} 
                        }
                    }, 300);
                }
            };
        })()); 
```

这种方法使用 ajax 和本地存储来保持“fieldToSave”的值，此外它不会一遍又一遍地持续保存。例如，它的作用是在 keyup 上，它将执行保存，但每 300 毫秒仅执行一次。因此，如果用户连续输入，直到用户停止 300 毫秒后才会保存。这真的可以绑定到您想要的任何事件。

您决定在页面加载时如何/在何处加载内容由您决定。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T13:21:09.800

**答案：是否只能通过每 x 秒抢先保存？在下面**

您需要在一定时间内调用 ajax 函数，就像我在 blelow 代码中所做的那样...... settime out 函数每 1000 秒后调用 ajaxRefresh 函数......

```
function onLoad() {
    setTimeout(ajaxRefresh, 1000);
} 

function ajaxRefresh()
{
    //ajax code to post data 
    $.ajax({
                type: "GET",        //GET or POST or PUT or DELETE verb
                url: ajaxUrl,       // Location of the service
                data: "",       //Data sent to server
                contentType: "",        // content type sent to server
                dataType: "json",   //Expected data format from server
                processdata: true,  //True or False
                success: function (json) {//On Successful service call
                    var result = json.name;
                    $("#dvAjax").html(result);
                },
                error: function() { alert("err")};  // When Service call fails
            });

    setTimeout(ajaxRefresh, 1000);
} 
```

# android - 在 NDK 上编译 protobuf-2.4.1 代码，版本 (android-ndk-r8-windows.)

> ID：10882014
> 
> 赞同：1
> 
> 时间：2012-06-04T13:16:54.223
> 
> 标签：android, android-ndk, android-ndk-r5, android-ndk-r7

大家好，我正在尝试在 NDK 版本（android-ndk-r8-windows）上编译 protobuf-2.4.1 代码。

我在下面设置：

```
PREBUILT=/cygdrive/d/D_Drive/Project/Pr/CCore/Code/NDK/android-ndk-r8-windows/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3

PLATFORM=/cygdrive/d/D_Drive/Project/Pr/CCore/Code/NDK/android-ndk-r8-windows/android-ndk-r8/platforms/android-4/arch-arm/

export CC="/cygdrive/d/D_Drive/Project/Pr/CCore/Code/NDK/android-ndk-r8-windows/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows/bin/arm-linux-androideabi-gcc"

export CFLAGS="-fPIC -DANDROID -nostdlib"

export ANDROID_ROOT="/cygdrive/d/D_Drive/Project/Pr/CCore/Code/NDK/android-ndk-r8-windows/android-ndk-r8"

export LDFLAGS="-Wl,-rpath-link=$ANDROID_ROOT/platforms/android-4/arch-arm/usr/lib/ -L$ANDROID_ROOT/platforms/android-4/arch-arm/usr/lib/"

export CPPFLAGS="-I$ANDROID_ROOT/platforms/android-4/arch-arm/usr/include/"

CPPFLAGS="-I$ANDROID_ROOT/platforms/android-4/arch-arm/usr/include/"
CPPFLAGS=$CPPFLAGS:"-I$ANDROID_ROOT/sources/cxx-stl/gnu-libstdc++/include/"
export CPPFLAGS

./configure --host=arm-eabi 
```

我在进行 NDK 构建时遇到以下问题：

```
In file included from D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc:33:
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.h:41:18: error: string: No such file or directory
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc:37:18: error: vector: No such file or directory
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc:48:2: error: #error "No suitable threading library available."
In file included from D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc:33:
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.h:136: error: 'string' in namespace 'std' does not name a type
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.h:647: error: expected unqualified-id before '&' token
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.h:647: error: expected ')' before '&' token
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.h:647: error: 'google::protobuf::internal::LogMessage& google::protobuf::internal::LogMessage::operator<<(...)' must not have variable number of arguments
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.h:647: error: expected ';' before '&' token
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.h:663: error: 'string' in namespace 'std' does not name a type
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.h:742: error: expected unqualified-id before '&' token
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.h:742: error: expected ')' before '&' token
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.h:742: error: expected initializer before '&' token
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.h:757: error: expected constructor, destructor, or type conversion before '*' token
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc: In function 'void google::protobuf::internal::VerifyVersion(int, int, const char*)':
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc:62: error: 'VersionString' was not declared in this scope
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc:74: error: 'VersionString' was not declared in this scope
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc: At global scope:
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc:84: error: 'string' does not name a type
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc:108: error: ISO C++ forbids declaration of 'string' with no type
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc:108: error: expected ',' or '...' before '&' token
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc: In function 'void google::protobuf::internal::DefaultLogHandler(google::protobuf::LogLevel, const char*, int, int)':
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc:114: error: 'message' was not declared in this scope
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc: At global scope:
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc:119: error: ISO C++ forbids declaration of 'string' with no type
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc:119: error: expected ',' or '...' before '&' token
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc:123: error: expected initializer before '*' token
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc:141: error: ISO C++ forbids declaration of 'string' with no type
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc:141: error: expected ',' or '...' before '&' token
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc: In member function 'google::protobuf::internal::LogMessage& google::protobuf::internal::LogMessage::operator<<(int)':
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc:142: error: 'message_' was not declared in this scope
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc:142: error: 'value' was not declared in this scope
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc: In member function 'google::protobuf::internal::LogMessage& google::protobuf::internal::LogMessage::operator<<(const char*)':
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc:147: error: 'message_' was not declared in this scope
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc: In member function 'google::protobuf::internal::LogMessage& google::protobuf::internal::LogMessage::operator<<(char)':
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc:168: error: 'message_' was not declared in this scope
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc: At global scope:
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc:169: error: redefinition of 'google::protobuf::internal::LogMessage& google::protobuf::internal::LogMessage::operator<<(int)'
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc:141: error: 'google::protobuf::internal::LogMessage& google::protobuf::internal::LogMessage::operator<<(int)' previously defined here
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc: In member function 'google::protobuf::internal::LogMessage& google::protobuf::internal::LogMessage::operator<<(google::protobuf::uint)':
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc:170: error: 'message_' was not declared in this scope
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc: In member function 'google::protobuf::internal::LogMessage& google::protobuf::internal::LogMessage::operator<<(long int)':
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc:171: error: 'message_' was not declared in this scope
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc: In member function 'google::protobuf::internal::LogMessage& google::protobuf::internal::LogMessage::operator<<(long unsigned int)':
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc:172: error: 'message_' was not declared in this scope
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc: In member function 'google::protobuf::internal::LogMessage& google::protobuf::internal::LogMessage::operator<<(double)':
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc:173: error: 'message_' was not declared in this scope
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc: In member function 'void google::protobuf::internal::LogMessage::Finish()':
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc:190: error: 'log_handler_' is not a member of 'google::protobuf::internal'
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc:190: error: 'message_' was not declared in this scope
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc: At global scope:
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc:208: error: expected constructor, destructor, or type conversion before '*' token
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc:377: error: expected '}' at end of input
D:/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/jni/src/google/protobuf/stubs/common.cc:377: error: expected '}' at end of input
/cygdrive/d/D_Drive/Project/Pr/CCore/Code/NDK/android-ndk-r8-windows/android-ndk-r8/build/core/build-binary.mk:243: recipe for target `/cygdrive/d/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/obj/local/armeabi/objs/protobuf/src/google/protobuf/stubs/common.o' failed
make: *** [/cygdrive/d/D_Drive/Project/Pr/CCore/Code/NDK/eclipse-SDK-3.7.1-win32/eclipse/workspace/CMNC/obj/local/armeabi/objs/protobuf/src/google/protobuf/stubs/common.o] Error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T05:54:16.017

这是来自 NDK 文档：

C++ STL 支持：

独立工具链还附带 GNU libstdc++ 库的副本，它提供了 C++ 标准模板库的实现。但是，要使用它，您需要链接到正确的库：

使用 -lstdc++ 链接*静态*库版本。这可确保所有必需的 C++ STL 代码都包含在您的最终二进制文件中。如果您只生成单个共享库或可执行文件，这是理想的选择。这是推荐的方法。

*   使用 -lgnustl_shared 链接到*共享*库版本。如果您有多个相关的共享库或可执行文件需要在运行时在同一地址空间中运行，则这是必需的（一些全局变量需要唯一定义，如果您将静态 libstdc++ 链接到每个可执行文件，则这是不可能的） .

    如果您使用此选项，您需要确保 libgnustl_shared.so 也被复制到您的设备，以便您的代码正确加载。该文件位于：

$TOOLCHAIN/arm-linux-androideabi/lib/ 用于 ARM 工具链

$TOOLCHAIN/i686-android-linux/lib/ 对于 x86 的。

$TOOLCHAIN/mipsel-linux-android/lib/ 用于 MIPS 工具链

重要提示：GNU libstdc++ 在 GPLv3 下获得许可，但有一个链接例外。有关详细信息，请参阅以下 URL：

```
 http://gcc.gnu.org/onlinedocs/libstdc++/manual/bk01pt01ch01s02.html 
```

如果你不能满足它的要求，即你不能重新分发共享库，不要在你的项目中使用它。

GNU libstdc++ 的共享版本不称为 libstdc++.so 的原因是因为这会在运行时与系统自己的最小 C++ 运行时冲突，即 /system/lib/libstdc++.so。这为 GNU ELF 库强制使用了一个新名称。这对于静态库来说不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T15:19:16.257

我有同样的错误。

要解决它，您必须`APP_STL := gnustl_static`在**Application.mk**文件中有。

# ruby - Rails form_for自己的动作路线

> ID：10882015
> 
> 赞同：0
> 
> 时间：2012-06-04T13:16:57.410
> 
> 标签：ruby, ruby-on-rails-3

我想修改 form_for 助手的操作（提交）

```
<%= form_for(@rating, :as => :post, :url => demo_create_rating_path(@rating)) do |f| %>
  <div class="field">
    <%= f.label :value %><br />
    <%= f.select :value, %w(1 2 3 4 5) %>
  </div>
    <%= f.hidden_field :article_id, :value => @article.id%>
    <%= f.hidden_field :user_id, :value => current_user.id %>
  <div class="field">
    <%= f.label :description %><br />
    <%= f.text_area :description, size: "100x5" %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

这是我的观点，它不起作用。

我想要的是，我可以在提交按钮后重新定向操作，但随后出现此错误：

```
ActionController::RoutingError (No route matches {:controller=>"demo_ratings", :action=>"create", :article_id=>#<Rating id: nil, value: nil, description: nil, article_id: nil, user_id: nil, created_at: nil, updated_at: nil>}):
  app/views/demo_ratings/_form.html.erb:1:in `_app_views_demo_ratings__form_html_erb__1912848844925280312_70155649546120'
  app/views/demo_ratings/new.html.erb:13:in `_app_views_demo_ratings_new_html_erb__27525029454473720_70155632487040' 
```

我究竟做错了什么？

**更新**

form_for 助手需要的所有功能：

```
def new
    @rating = Rating.new
    @article = Article.find(params[:article_id])
  end

  def edit
    @rating = Rating.find(params[:id])
    @article = Article.find(params[:article_id])
  end

  def create
    @rating = Rating.new(params[:rating])
    if @rating.save
      @article= Article.find(params[:article_id])
      puts @article.name
      puts @rating.id
      @rating.article = @article
      puts @rating.article.name
      redirect_to demo_rating_path(@rating, :article_id => @article.id), notice: 'Rating was successfully created.'
    else
      render action: "new"
    end
  end

  def update
    @rating = Rating.find(params[:id])
    if @rating.update_attributes(params[:rating])
      @article = @rating.article
      redirect_to demo_rating_path(@rating), notice: 'Rating was successfully updated.'
    else
      render action: "edit"
    end
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T13:36:47.943

试试这个：

```
<%= form_for(@rating, :as => :post, :url => demo_create_rating_path) do |f| %> 
```

url 中的@rating 提供了一个 nil 对象 id，而您还没有 id。

如果要在创建和更新之间共享表单，请使用以下内容：

```
<% form_for(@rating, :as => :post) do |f| %> 
```

作为参考，请查看 rails 生成的脚手架的 _form.html.erb 的输出。

在您的控制器中，您正在处理之前保存新的/更新的记录。声明`if @rating.save`应该在之后`@rating.article = @article`。

```
 def create
    @rating = Rating.new(params[:post])
    @article= Article.find(params[:article_id])
    @rating.article_id = @article.id
    if @rating.save
      redirect_to demo_rating_path(@rating, :article_id => @article.id), notice: 'Rating was successfully created.'
    else
      render action: "new"
    end
  end 
```

# c# - 为 FB 应用程序内的每个请求生成新会话

> ID：10882016
> 
> 赞同：0
> 
> 时间：2012-06-04T13:16:58.393
> 
> 标签：c#, asp.net-mvc-3, facebook-c#-sdk

我有一个 ASP.NET MVC 3 Web 应用程序，我也想将它作为 Facebook 应用程序发布。

当访问我的 FB 应用程序时，会显示我网站的特定页面（控制器+操作）（例如 mydomain.com/Facebook/Index）。此请求包含一个已签名请求，我将其存储在会话中。

如果我在此页面上显示一个链接，该链接指向我的 webapp 的另一个页面（例如 mydomain.com/Facebook/Other），并且单击此链接，则会生成一个新会话，因此我不知道FB传递给我的初始页面的signed_request！

**所以基本上我的问题是每次用户在 FB 应用程序内导航页面/子页面时都会重新生成会话！**

如果直接访问 url（而不是作为 FB 应用程序），那么我的会话可以正常工作。

此外，如果我的网站在本地运行（因此我的 FB 应用程序设置为使用由 VS 托管的 localhost:[port]），那么会话也可以工作！

我的网站目前托管在 Azure 中。因此，如果我的网站托管在 azure 中并作为 FB 应用程序访问，则会在每个新请求中重新生成会话。

我还没有使用任何 FB 身份验证。

有人建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:03:11.120

搜索词：第三方 cookie、P3P 政策

# cmake - 在 edit_cache 之后自动重建外部 cmake 项目

> ID：10882018
> 
> 赞同：0
> 
> 时间：2012-06-04T13:17:00.360
> 
> 标签：cmake

我有一个主 cmake 项目，它有一个 PROJECT_INCLUDE_PATH，它是一个缓存变量。我将此变量作为 CMAKE_ARGS 参数传递给我使用 ExternalProject_Add() 添加的外部项目。

问题是，当我使用“make edit_cache”更改 PROJECT_INCLUDE_PATH 的值时，外部项目没有重新配置。

当主项目中的缓存变量发生更改时，有什么方法可以自动重新配置和构建外部项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:36:14.947

我总是在修改 CMakeCache.txt 后重新运行 CMake（不是我经常这样做）。这将`ExternalProject_Add`在您的情况下更新呼叫。

这里可能一个更安全的选择是避免`make edit_cache`，并简单地使用命令行参数重新运行 CMake `-DPROJECT_INCLUDE_PATH:PATH=<updated value>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:45:09.297

我发现我没有传递正确的变量。现在它可以正常工作了。

# wix - 使用自注册在 Wix 中注册 DLL

> ID：10882019
> 
> 赞同：0
> 
> 时间：2012-06-04T13:17:10.283
> 
> 标签：wix

我的两个库依赖于第三个。但是后一个库必须复制到system32目录，另外两个-到ProgramFiles目录。请任何人就如何处理前两个库的注册提出建议。**我需要使用自助注册。**我试图将主库的 id 指定为伴随文件，但没有帮助。我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:46:39.910

MSI 的 SelfReg 表不支持对注册操作进行排序。您可以使用 QuietExec 自定义操作以正确的顺序调用 regsvr32 /s，但我自己不会这样做。

最佳设计是不依赖自注册。您是否已经完全用尽了使用 MSI 为您处理注册数据的能力？

# python - 正则表达式 unicode 替换不起作用

> ID：10882027
> 
> 赞同：1
> 
> 时间：2012-06-04T13:17:38.163
> 
> 标签：python, regex, unicode

我在python中有以下示例，但它不起作用：

```
>>> replace = re.compile(ur'најавени', flags=re.IGNORECASE)

>>> docText = replace.sub("најавени1",docText)

>>> print docText

трендафилов во мвр се Најавени нови смени поврзани со безбедноста и борбата против организираниот криминал

>>> docText = replace.sub(u"најавени1",docText)

>>> print docText

трендафилов во мвр се Најавени нови смени поврзани со безбедноста и борбата против организираниот криминал

>>> docText = replace.sub(u"најавени1",docText,re.IGNORECASE)

>>> print docText

трендафилов во мвр се Најавени нови смени поврзани со безбедноста и борбата против организираниот криминал 
```

有什么提示吗？我只想替换文本中的字符串，它可以用英语工作，但不能用我的母语。

第二次尝试：

```
>>> docText = "трендафилов во мвр се Најавени нови смени поврзани со безбедноста и борбата против организираниот криминал"
>>> replace = re.compile(ur'Најавени', flags=re.IGNORECASE)
>>> docText = replace.sub(u"најавени1",docText,re.IGNORECASE)
>>> print docText
трендафилов во мвр се Најавени нови смени поврзани со безбедноста и борбата против организираниот криминал 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T13:32:20.097

您需要指定 unicode 感知字符串和正则表达式，如下所示：

```
>>> import re
>>> replace = re.compile(ur'најавени', flags=re.IGNORECASE | re.UNICODE)
>>> docText = u"трендафилов во мвр се Најавени нови смени поврзани со безбедноста и борбата против организираниот криминал"
>>> print docText
трендафилов во мвр се Најавени нови смени поврзани со безбедноста и борбата против организираниот криминал
>>> docText = replace.sub(u"најавени1",docText)
>>> print docText
трендафилов во мвр се најавени1 нови смени поврзани со безбедноста и борбата против организираниот криминал 
```

# makefile - Cmake与制作示例代码？

> ID：10882030
> 
> 赞同：128
> 
> 时间：2012-06-04T13:17:48.543
> 
> 标签：makefile, cmake

我想知道是否有任何用于`Makefile`s ( `make`) 和`CMakeLists.txt`( `cmake`) 的示例代码都做同样的事情（唯一的区别是一个写在里面`make`，另一个写在里面`cmake`）。

我尝试寻找'cmake vs make'，但我从未找到任何代码比较。即使只是一个简单的案例，理解这些差异也会很有帮助。

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2013-10-09T08:06:30.630

以下 Makefile 构建了一个以`prog`源 命名的可执行文件`prog1.c, prog2.c, prog3.c and main.c`。`prog`链接到`libmystatlib.a` 并且`libmydynlib.so`它们都是从源代码构建的。此外，使用in 中`prog`的库及其在. Makefile 默认构建一个发布目标，但也提供一个调试目标：`libstuff.a``stuff/lib``stuff/include`

```
#Makefile    
CC = gcc
CPP = g++
RANLIB = ar rcs
RELEASE = -c -O3 
DEBUG = -c -g -D_DEBUG
INCDIR = -I./stuff/include
LIBDIR = -L./stuff/lib -L.
LIBS = -lstuff -lmystatlib -lmydynlib
CFLAGS = $(RELEASE)

PROGOBJS = prog1.o prog2.o prog3.o

prog: main.o $(PROGOBJS) mystatlib mydynlib
    $(CC) main.o $(PROGOBJS) $(LIBDIR) $(LIBS) -o prog 
debug: CFLAGS=$(DEBUG)
debug: prog

mystatlib: mystatlib.o
    $(RANLIB) libmystatlib.a mystatlib.o
mydynlib: mydynlib.o
    $(CPP) -shared mydynlib.o -o libmydynlib.so

%.o: %.c
    $(CC) $(CFLAGS) $(INCDIR) $< -o $@ 
%.o: %.cpp
    $(CPP) $(CFLAGS) $(INCDIR) -fPIC  $< -o $@ 
```

这是一个`CMakeLists.txt`（几乎）完全相同的，并带有一些注释以强调与 Makefile 的相似之处：

```
#CMakeLists.txt     
cmake_minimum_required(VERSION 2.8)                    # stuff not directly
project(example)                                       # related to building

include_directories(${CMAKE_SOURCE_DIR}/stuff/include) # -I flags for compiler
link_directories(${CMAKE_SOURCE_DIR}/stuff/lib)        # -L flags for linker

set(PROGSRC prog1.c prog2.c prog3.c)                   # define variable 

add_executable(prog main.c ${PROGSRC})                 # define executable target prog, specify sources
target_link_libraries(prog mystatlib mydynlib stuff)   # -l flags for linking prog target

add_library(mystatlib STATIC mystatlib.c)              # define static library target mystatlib, specify sources

add_library(mydynlib SHARED mydynlib.cpp)              # define shared library target mydynlib, specify sources
#extra flags for linking mydynlib
set_target_properties(mydynlib PROPERTIES POSITION_INDEPENDENT_CODE TRUE) 
#alternatively:
#set_target_properties(mydynlib PROPERTIES COMPILE_FLAGS "-fPIC") 
```

在这个简单的例子中，最重要的区别是：

*   CMake 识别哪些编译器用于哪种类型的源。此外，它为每种类型的目标调用正确的命令序列。因此，没有明确规定诸如 等`$(CC) ...`命令`$(RANLIB) ...`。

*   所有处理包含头文件、库等的常用编译器/链接器标志都被平台独立/构建系统独立命令所取代。

*   通过将变量设置`CMAKE_BUILD_TYPE`为“调试”或在调用程序时将其传递给 CMake来包含调试标志`cmake -DCMAKE_BUILD_TYPE:STRING=Debug`：

*   CMake 还提供独立于平台的包含“-fPIC”标志（通过`POSITION_INDEPENDENT_CODE`属性）和许多其他标志。尽管如此，可以在 CMake 和 Makefile 中手动实现更模糊的设置（通过使用`COMPILE_FLAGS` 和类似的属性）。当然，当第三方库（如 OpenGL）以可移植方式包含时，CMake 才真正开始大放异彩。

*   如果您使用 Makefile，则构建过程只有一个步骤，即 `make`在命令行中键入。对于 CMake，有两个步骤：首先，您需要设置构建环境（通过键入`cmake <source_dir>`构建目录或运行一些 GUI 客户端）。这将创建一个 Makefile 或类似的东西，具体取决于您选择的构建系统（例如，Unix 上的 make 或 VC++ 或 Windows 上的 MinGW + Msys）。构建系统可以作为参数传递给 CMake；但是，CMake 会根据您的系统配置做出合理的默认选择。其次，您在选定的构建系统中执行实际构建。

源代码和构建说明可在[https://github.com/rhoelzel/make_cmake](https://github.com/rhoelzel/make_cmake)获得。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-11T17:53:11.430

获取一些使用 CMake 作为其构建系统的软件（作为示例，有很多开源项目可供选择）。获取源代码并使用 CMake 进行配置。阅读生成的 makefile 并享受。

需要记住的一件事是，这些工具不是一对一的映射。最明显的区别是 CMake 扫描不同文件（例如 C 头文件和源文件）之间的依赖关系，而 make 将其留给 makefile 作者。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-03-15T00:08:08.517

如果这个问题是关于文件的示例`Makefile`输出，`CMakeList.txt`那么请检查 cmake-backend 源并生成一个这样`Makefile`的 . 如果不是，那么添加到@Roberto 的回复中，我试图通过隐藏细节来简化它。

### CMake 函数

虽然`Make`是规则和配方的灵活工具，但`CMake`它是一个抽象层，还添加了配置功能。

我的平原`CMakeLists.txt`将如下所示，

```
cmake_minimum_required(VERSION 2.8)
project(example)
file(GLOB testapp_SOURCES *.cc)
add_executable(testapp ${testapp_SOURCES}) 
```

请注意，可以完成`CMake`隐藏构建。`how`我们唯一指定`what`的是输入和输出。

`CMakeLists.txt`包含由 定义的函数调用列表`cmake`。

### （CMake 函数）Vs Make 规则

在are`Makefile`中`rules and recipes`使用而不是`functions`. 除了`function`-like 功能外，还`rules and recipes`提供链接。我的简约`Makefile`将如下所示，

```
-include "executable.mk"
TARGETS=testapp.bin
all:${TARGETS} 
```

虽然`executable.mk`将如下所示，

```
SOURCES=$(wildcard *.cpp)
OBJECTS=$(SOURCES:.cpp=.o)
DEPS=$(SOURCES:.cpp=.d)

%.bin:$(OBJECTS)
    $(CC) $(CFLAGS) -o $@ $^ $(LFLAGS) $(LIBS)

.PHONY: all clean

clean:
    $(RM) $(OBJECTS) $(DEPS) $(TARGETS)

-include $(DEPS) 
```

从头开始，我将从`Makefile`以下内容开始，

```
all: testapp.bin

testapp.bin:sourcea.o sourcb.o
    $(CC) $(CFLAGS) -o $@ $^ $(LFLAGS) $(LIBS)

.PHONY: all clean

clean:
    $(RM) $(OBJECTS) testapp.bin 
```

我从[这里](https://stackoverflow.com/questions/287259/minimum-c-make-file-for-linux)得到了这个片段并修改了它。请注意，此文件中添加了一些隐式规则，可在 makefile 文档中找到。一些隐式变量在这里也很重要。

请注意，这`Makefile`提供了`recipe`显示`how`可以完成构建的详细信息。可以写入`executable.mk`以将定义的详细信息保存在一个文件中。这样一来，makefile 就可以像我之前展示的那样减少。

### `CMake`和中的内部变量`Make`

现在有点先进了，`CMake`我们可以设置一个编译器标志，如下所示，

```
set(CMAKE_C_FLAGS "-Wall") 
```

请了解有关文件`CMake`中默认变量的更多信息`CMakeCache.txt`。上面的`CMake`代码将等同于`Make`下面的代码，

```
CFLAGS = -Wall 
```

请注意，`CFLAGS`是 中的内部变量`Make`，同样，`CMAKE_C_FLAGS`是 中的内部变量`CMake`。

### 在 CMake 中添加包含和库路径

我们可以`cmake`通过使用函数来做到这一点。

```
target_include_directories(testapp PRIVATE "myincludes")
list(APPEND testapp_LIBRARIES
    mytest mylibrarypath
)
target_link_libraries(testapp ${testapp_LIBRARIES}) 
```

### VS 在 Make 中添加包含和库路径

我们可以通过添加如下行来添加包含和库，

```
INCLUDES += -Imyincludes
LIBS += -Lmylibrarypath -lmytest 
```

请注意，上面的这些行可以从 auto-gen 工具或 pkg-config 生成。（虽然 Makefile 不依赖于自动配置工具）

### CMake 配置/tweek

通常可以使用函数生成一些`config.h`文件，就像工具一样。编写自定义函数可以做更多的技巧。最后我们可以选择如下配置，`auto-config``configure_file`

```
cmake --build . --config "Release" 
```

可以使用该`option`功能添加一些可配置的选项。

### Makefile 配置/调整

如果我们需要用一些调试标志来编译它，我们可以调用`make`类似的，

```
make CXXFLAGS=NDEBUG 
```

我认为内部变量，`Makefile-rules`并且`CMake-functions`是比较的良好开端，祝您好运。

# c# - 未实现的属性 C#

> ID：10882031
> 
> 赞同：15
> 
> 时间：2012-06-04T13:17:51.700
> 
> 标签：c#, exception, attributes

一个简单的问题：为什么 C# 中没有 NotImplementedAttribute？

你总是可以抛出异常，但我认为它作为 ObsoleteAttribute 工作会很好 - >你会收到使用该方法的警告。

好的，您有一个具有此属性的方法，当您实现它时，您必须手动删除该属性，但我认为这比使用内部带有 throw new NotImplementedException() 的方法更安全......并等待它们被调用.

我记得读过 Obsolete 被硬编码到编译器中，但也许这个有一些空余空间 :)

这只是我的看法，也许我错了。但这是我想看到的。

谢谢

# android - 显示无法打开文件

> ID：10882036
> 
> 赞同：0
> 
> 时间：2012-06-04T13:18:11.903
> 
> 标签：android, pdf, file-io

这是我要下载然后从 sdcard 打开文件的代码。

但是下载文件后，当我点击文件打开它时，它会显示一条 Toast 消息：`cannot open file`

请告诉我错误在哪里。

```
package com.pdf;

import java.io.File;
import android.app.Activity;
import android.content.ActivityNotFoundException;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.webkit.WebView;
import android.widget.Toast;

public class PdffileActivity extends Activity 
{
   WebView webview;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
       super.onCreate(savedInstanceState);

      setContentView(R.layout.main);
      webview = (WebView) findViewById(R.id.webview);

      String pdf = "http://officeofthemufti.sg/MaulidBooklet.pdf";
      webview.loadUrl("http://docs.google.com/gview?embedded=true&url=" + pdf);
      setContentView(webview);

      File file=new File("/sdcard/MaulidBooklet.pdf");

      if (file.exists())
      {
         Uri path = Uri.fromFile(file);
         Intent intent = new Intent(Intent.ACTION_VIEW);
         intent.setDataAndType(path, "application/pdf");
         intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
         startActivity(intent);

        try
        {
           startActivity(intent);
        }
        catch (ActivityNotFoundException e)
        {
           Toast.makeText(PdffileActivity.this,
                          "No Application Available to View PDF",
                          Toast.LENGTH_SHORT).show();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:17:45.870

如果您想按照您所说的方式以编程方式打开它，并假设它已下载到标准的“下载”目录中，那么您可以将新文件的声明和实例化更改为以下内容：

```
File file = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS)  + "/MaulidBooklet.pdf"); 
```

这确实假设您使用的是 Android 2.2 或更高版本。

您可以通过使用 DDMS 浏览设备上的“下载”目录来检查文件是否实际下载到此目录中。

# arrays - 将数组项（形状）添加到舞台

> ID：10882037
> 
> 赞同：0
> 
> 时间：2012-06-04T13:18:14.807
> 
> 标签：arrays, actionscript-3, dynamic, shape

我现在正在编写一个 Flash AS3 文件，在 AS3 文件中，我使用舞台上的点（您自己放置）创建一个形状，然后填充中间的部分。我想我已经成功地将形状添加到数组中。现在我在清理舞台后无法在舞台上塑造形状。

代码在这里：

```
var numPoints:Number = 0;       //  Number of points placed. 
                                //  No dragging will work until all 7 points are placed.

//  Set max & min stage coordinates that the points can be dragged, and make the point diameters settable.
var xMax:Number = 455;
var xMin:Number = 5;
var yMax:Number = 305;
var yMin:Number = 5;
var circleWidth:Number = 10;

//  Boolean variables to indicate that dragging is happening so that the appropriate point follows the mouse
//  on the MOUSE_MOVE event.
var isDragging1:Boolean = false;
var isDragging2:Boolean = false;
var isDragging3:Boolean = false;
var isDragging4:Boolean = false;
var isDragging5:Boolean = false;
var isDragging6:Boolean = false;
var isDragging7:Boolean = false;

//  The drawBoard is a rectangle on which the triangle will be drawn.  Colors are settable here. To change size,
//  change the variables xMin, xMax, yMin, yMax above.
var drawBoard:Sprite = new Sprite();
drawBoard.graphics.lineStyle(1, 0x000000);
drawBoard.graphics.beginFill(0xCCCCCC);
drawBoard.graphics.drawRect(0, 0, xMax - xMin, yMax - yMin);
drawBoard.graphics.endFill();
drawBoard.x = xMin;
drawBoard.y = yMin;

// Array

var shapeArray:Array = new Array();

//  Add a default drop shadow filter to the drawBoard
drawBoard.filters = [ new DropShadowFilter() ];

//  This rectangle will listen for mouse clicks in order to construct the three vertices of the triangle.
drawBoard.addEventListener(MouseEvent.CLICK, placePoint);

//  Put on the stage the board on which the triangle will be drawn.
stage.addChild(drawBoard);

//  The filled triangle consists of three lines drawn between the points. It is updated on MOUSE_MOVE once 
//  dragging starts.
var lines:Shape = new Shape();
drawBoard.addChild(lines);

//  The stage will listen for events involving dragging so that the dragging will continue to work even after
//  the mouse has rolled off of the drawBoard region.
stage.addEventListener(MouseEvent.MOUSE_MOVE, mouseUpdate);
stage.addEventListener(MouseEvent.MOUSE_UP, stopDragging);

// Button 2 (Left)
bttn_add.addEventListener(MouseEvent.CLICK, toevoegen);

// Button 3 (Middle)
bttn_show.addEventListener(MouseEvent.CLICK, showit);

// adding shape to array

function toevoegen(e:Event):void
{

    // adding
    shapeArray.push( lines );

    trace(shapeArray)
}

// Shape show

function showit(e:Event):void
{

    // Show me it now!
    var shapeArray:String = lines[0];

}

//  We add 7 points to the stage but we do not add the graphics yet.  We do specify listeners
//  at this time so when they are all placed, we will be able to drag them.

var point1:Sprite = new Sprite();
point1.addEventListener(MouseEvent.MOUSE_DOWN, startDragging1);
drawBoard.addChild(point1);

var point2:Sprite = new Sprite();
point2.addEventListener(MouseEvent.MOUSE_DOWN, startDragging2);
drawBoard.addChild(point2);

var point3:Sprite = new Sprite();
point3.addEventListener(MouseEvent.MOUSE_DOWN, startDragging3);
drawBoard.addChild(point3);

var point4:Sprite = new Sprite();
point4.addEventListener(MouseEvent.MOUSE_DOWN, startDragging4);
drawBoard.addChild(point4);

var point5:Sprite = new Sprite();
point5.addEventListener(MouseEvent.MOUSE_DOWN, startDragging5);
drawBoard.addChild(point5);

var point6:Sprite = new Sprite();
point6.addEventListener(MouseEvent.MOUSE_DOWN, startDragging6);
drawBoard.addChild(point6);

var point7:Sprite = new Sprite();
point7.addEventListener(MouseEvent.MOUSE_DOWN, startDragging7);
drawBoard.addChild(point7);

//  The reset button will stop all dragging, remove all children of drawBoard, and set numPoints back to 0.

btnReset.addEventListener(MouseEvent.CLICK, reset);

function reset(evt:MouseEvent):void {
    var i:Number;
    var n:Number = drawBoard.numChildren;

    isDragging1 = false;
    isDragging2 = false;
    isDragging3 = false;
    isDragging4 = false;
    isDragging5 = false;
    isDragging6 = false;
    isDragging7 = false;

    point1.graphics.clear();
    point2.graphics.clear();
    point3.graphics.clear();
    point4.graphics.clear();
    point5.graphics.clear();
    point6.graphics.clear();
    point7.graphics.clear();

    lines.graphics.clear();

    numPoints = 0;

}

//  The next function is executed when the mouse is moved.  Note that if all points are not placed and nothing
//  is being dragged, this function does nothing.
function mouseUpdate(evt:MouseEvent):void {
    if (numPoints == 7) {                       
        if (isDragging1) {
            point1.x = goodX(evt.stageX);       //  Set x- & y-coordinates.  See below for definition of 
            point1.y = goodY(evt.stageY);       //      functions goodX & goodY
            lines.graphics.clear();             //  Remove lines shape and redraw it 
            drawLines();                        //      with updated coordinates.
        }
        if (isDragging2) {
            point2.x = goodX(evt.stageX);
            point2.y = goodY(evt.stageY);
            lines.graphics.clear();
            drawLines();
        }
        if (isDragging3) {
            point3.x = goodX(evt.stageX);
            point3.y = goodY(evt.stageY);
            lines.graphics.clear();
            drawLines();
        }

        if (isDragging4) {
            point4.x = goodX(evt.stageX);
            point4.y = goodY(evt.stageY);
            lines.graphics.clear();
            drawLines();
        }

        if (isDragging5) {
            point5.x = goodX(evt.stageX);
            point5.y = goodY(evt.stageY);
            lines.graphics.clear();
            drawLines();
        }

        if (isDragging6) {
            point6.x = goodX(evt.stageX);
            point6.y = goodY(evt.stageY);
            lines.graphics.clear();
            drawLines();
        }

        if (isDragging7) {
            point7.x = goodX(evt.stageX);
            point7.y = goodY(evt.stageY);
            lines.graphics.clear();
            drawLines();
        }

        evt.updateAfterEvent();
    }
}

/*  This function chooses the appropriate x-coordinate for a dragged point.  
    If thisX is in the draggable region, then we return it.  Otherwise, we return the max or min x value, 
    depending on which side of the draggable region thisX is on.
*/

function goodX(thisX:Number):Number {
    if (thisX < xMin) {
        return (xMin);
    }
    if (thisX > (xMax - circleWidth)) {
        return (xMax - circleWidth);
    }
    return (thisX);
}

//  This function chooses the appropriate y-coordinate for a dragged point in a manner similar to the previous function. 

function goodY(thisY:Number):Number {
    if (thisY < yMin) {
        return (yMin);
    }
    if (thisY > (yMax - circleWidth)) {
        return (yMax - circleWidth);
    }
    return thisY;
}

// This function manages the placement of points until all 7 points are placed. 
function placePoint(evt:MouseEvent):void {
    if (numPoints == 0) {
        point1.graphics.beginFill(0x7777FF);
        point1.graphics.drawCircle(0, 0, circleWidth/2);
        point1.graphics.endFill();
        point1.filters = [ new DropShadowFilter() ];
        point1.x = drawBoard.mouseX;
        point1.y = drawBoard.mouseY;
        numPoints = 1;
    }
    else if(numPoints == 1) {
        point2.graphics.beginFill(0x7777FF);
        point2.graphics.drawCircle(0, 0, circleWidth/2);
        point2.graphics.endFill();
        point2.filters = [ new DropShadowFilter() ];
        point2.x = drawBoard.mouseX;
        point2.y = drawBoard.mouseY;
        numPoints = 2;
    }
    else if (numPoints == 2) {
        point3.graphics.beginFill(0x7777FF);
        point3.graphics.drawCircle(0, 0, circleWidth/2);
        point3.graphics.endFill();
        point3.filters = [ new DropShadowFilter() ];
        point3.x = drawBoard.mouseX;
        point3.y = drawBoard.mouseY;
        numPoints = 3;
        lines.graphics.clear();

    }

    else if (numPoints == 3) {
        point4.graphics.beginFill(0x7777FF);
        point4.graphics.drawCircle(0, 0, circleWidth/2);
        point4.graphics.endFill();
        point4.filters = [ new DropShadowFilter() ];
        point4.x = drawBoard.mouseX;
        point4.y = drawBoard.mouseY;
        numPoints = 4;
        lines.graphics.clear();

    }

    else if (numPoints == 4) {
        point5.graphics.beginFill(0x7777FF);
        point5.graphics.drawCircle(0, 0, circleWidth/2);
        point5.graphics.endFill();
        point5.filters = [ new DropShadowFilter() ];
        point5.x = drawBoard.mouseX;
        point5.y = drawBoard.mouseY;
        numPoints = 5;
        lines.graphics.clear();

    }

    else if (numPoints == 5) {
        point6.graphics.beginFill(0x7777FF);
        point6.graphics.drawCircle(0, 0, circleWidth/2);
        point6.graphics.endFill();
        point6.filters = [ new DropShadowFilter() ];
        point6.x = drawBoard.mouseX;
        point6.y = drawBoard.mouseY;
        numPoints = 6;
        lines.graphics.clear();

    }

    else if (numPoints == 6) {
        point7.graphics.beginFill(0x7777FF);
        point7.graphics.drawCircle(0, 0, circleWidth/2);
        point7.graphics.endFill();
        point7.filters = [ new DropShadowFilter() ];
        point7.x = drawBoard.mouseX;
        point7.y = drawBoard.mouseY;
        numPoints = 7;
        lines.graphics.clear();
        drawLines();
    }
}

//  Draws the 7 lines between the points with appropriate fill and adds a drop shadow.
function drawLines():void {
    lines.graphics.lineStyle(1, 0xFF0000);
    lines.graphics.beginFill(0xFF7777);
    lines.graphics.moveTo(point1.x, point1.y);
    lines.graphics.lineTo(point2.x, point2.y);
    lines.graphics.lineTo(point3.x, point3.y);
    lines.graphics.lineTo(point4.x, point4.y);
    lines.graphics.lineTo(point5.x, point5.y);
    lines.graphics.lineTo(point6.x, point6.y);
    lines.graphics.lineTo(point7.x, point7.y);
    lines.graphics.lineTo(point1.x, point1.y);
    lines.graphics.endFill();
    lines.filters = [ new DropShadowFilter() ];
    trace(lines)
}

//  The next functions "turn on" dragging for the point that is clicked, as long as all 7 points have
//  been placed.
function startDragging1(evt:MouseEvent):void {
    if (numPoints == 7) {
        isDragging1 = true;
    }
}

function startDragging2(evt:MouseEvent):void {
    if (numPoints == 7) {
        isDragging2 = true;
    }
}

function startDragging3(evt:MouseEvent):void {
    if (numPoints == 7) {
        isDragging3 = true;
    }
}
function startDragging4(evt:MouseEvent):void {
    if (numPoints == 7) {
        isDragging4 = true;
    }
}

function startDragging5(evt:MouseEvent):void {
    if (numPoints == 7) {
        isDragging5 = true;
    }
}

function startDragging6(evt:MouseEvent):void {
    if (numPoints == 7) {
        isDragging6 = true;
    }
}

function startDragging7(evt:MouseEvent):void {
    if (numPoints == 7) {
        isDragging7 = true;
    }
}

//  Turns off dragging. This function is called when the mouse button is released anywhere on the stage.
function stopDragging(evt:MouseEvent):void {
    if (numPoints == 7) {
        isDragging1 = false;
        isDragging2 = false;
        isDragging3 = false;
        isDragging4 = false;
        isDragging5 = false;
        isDragging6 = false;
        isDragging7 = false;

    }
} 
```

我现在得到的错误是

> ReferenceError: 错误 #1069: Kan eigenschap 0 niet vinden bij flash.display.Shape en er is geen standardaardwaarde。在 TriangleDrag_fla::MainTimeline/showit()

我在 Flash 方面没有那么丰富的经验，我也没有任何高级编码背景，但是我渴望学习如何提高自己

在高级谢谢，欢迎任何帮助。

PS：如果我必须提供其他信息，请说什么

正确代码：

```
var numPoints:Number = 0;       //  Number of points placed. 
                                //  No dragging will work until all 7 points are placed.

//  Set max & min stage coordinates that the points can be dragged, and make the point diameters settable.
var xMax:Number = 455;
var xMin:Number = 5;
var yMax:Number = 305;
var yMin:Number = 5;
var circleWidth:Number = 10;

//  Boolean variables to indicate that dragging is happening so that the appropriate point follows the mouse
//  on the MOUSE_MOVE event.
var isDragging1:Boolean = false;
var isDragging2:Boolean = false;
var isDragging3:Boolean = false;
var isDragging4:Boolean = false;
var isDragging5:Boolean = false;
var isDragging6:Boolean = false;
var isDragging7:Boolean = false;

//  The drawBoard is a rectangle on which the triangle will be drawn.  Colors are settable here. To change size,
//  change the variables xMin, xMax, yMin, yMax above.
var drawBoard:Sprite = new Sprite();
drawBoard.graphics.lineStyle(1, 0x000000);
drawBoard.graphics.beginFill(0xCCCCCC);
drawBoard.graphics.drawRect(0, 0, xMax - xMin, yMax - yMin);
drawBoard.graphics.endFill();
drawBoard.x = xMin;
drawBoard.y = yMin;

// Array

var shapeArray:Array/* of flash.display.Shape */ = [] /* of flash.display.Shape */;
var lines:Shape = new Shape();

//  Add a default drop shadow filter to the drawBoard
drawBoard.filters = [ new DropShadowFilter() ];

//  This rectangle will listen for mouse clicks in order to construct the three vertices of the triangle.
drawBoard.addEventListener(MouseEvent.CLICK, placePoint);

//  Put on the stage the board on which the triangle will be drawn.
stage.addChild(drawBoard);

//  The filled triangle consists of three lines drawn between the points. It is updated on MOUSE_MOVE once 
//  dragging starts.

drawBoard.addChild(lines);

//  The stage will listen for events involving dragging so that the dragging will   continue to work even after
//  the mouse has rolled off of the drawBoard region.
stage.addEventListener(MouseEvent.MOUSE_MOVE, mouseUpdate);
stage.addEventListener(MouseEvent.MOUSE_UP, stopDragging);

// Button 2 (Left)
bttn_add.addEventListener(MouseEvent.CLICK, toevoegen);

// Button 3 (Middle)
bttn_show.addEventListener(MouseEvent.CLICK, showit);

// adding shape to array

function toevoegen(e:Event):void
{

    // adding
    shapeArray.push( lines );

    trace("Done that... True story")
}

// Shape show

function showit(e:Event):void
{
    trace(shapeArray.length);
  if (!shapeArray || shapeArray.length == 0)
    return; // nothing to do here

  const lines:Shape = shapeArray[0] as Shape;
   if (lines && ! lines.parent) {
}
// show it
    drawBoard.addChild(lines)

    trace()
}
//  We add 7 points to the stage but we do not add the graphics yet.  We do specify listeners
//  at this time so when they are all placed, we will be able to drag them.

var point1:Sprite = new Sprite();
point1.addEventListener(MouseEvent.MOUSE_DOWN, startDragging1);
drawBoard.addChild(point1);

var point2:Sprite = new Sprite();
point2.addEventListener(MouseEvent.MOUSE_DOWN, startDragging2);
drawBoard.addChild(point2);

var point3:Sprite = new Sprite();
point3.addEventListener(MouseEvent.MOUSE_DOWN, startDragging3);
drawBoard.addChild(point3);

var point4:Sprite = new Sprite();
point4.addEventListener(MouseEvent.MOUSE_DOWN, startDragging4);
drawBoard.addChild(point4);

var point5:Sprite = new Sprite();
point5.addEventListener(MouseEvent.MOUSE_DOWN, startDragging5);
drawBoard.addChild(point5);

var point6:Sprite = new Sprite();
point6.addEventListener(MouseEvent.MOUSE_DOWN, startDragging6);
drawBoard.addChild(point6);

var point7:Sprite = new Sprite();
point7.addEventListener(MouseEvent.MOUSE_DOWN, startDragging7);
drawBoard.addChild(point7);

//  The reset button will stop all dragging, remove all children of drawBoard, and set numPoints back to 0.

btnReset.addEventListener(MouseEvent.CLICK, reset);

function reset(evt:MouseEvent):void {
    var i:Number;
    var n:Number = drawBoard.numChildren;

    isDragging1 = false;
    isDragging2 = false;
    isDragging3 = false;
    isDragging4 = false;
    isDragging5 = false;
    isDragging6 = false;
    isDragging7 = false;

    point1.graphics.clear();
    point2.graphics.clear();
    point3.graphics.clear();
    point4.graphics.clear();
    point5.graphics.clear();
    point6.graphics.clear();
    point7.graphics.clear();

    //lines.graphics.clear();
    drawBoard.removeChild(lines);
    numPoints = 0;

}

//  The next function is executed when the mouse is moved.  Note that if all points are not placed and nothing
//  is being dragged, this function does nothing.
function mouseUpdate(evt:MouseEvent):void {
    if (numPoints == 7) {                       
        if (isDragging1) {
            point1.x = goodX(evt.stageX);       //  Set x- & y-coordinates.  See below for definition of 
            point1.y = goodY(evt.stageY);       //      functions goodX & goodY
            lines.graphics.clear();             //  Remove lines shape and redraw it 
            drawLines();                        //      with updated coordinates.
        }
        if (isDragging2) {
            point2.x = goodX(evt.stageX);
            point2.y = goodY(evt.stageY);
            lines.graphics.clear();
            drawLines();
        }
        if (isDragging3) {
            point3.x = goodX(evt.stageX);
            point3.y = goodY(evt.stageY);
            lines.graphics.clear();
            drawLines();
        }

        if (isDragging4) {
            point4.x = goodX(evt.stageX);
            point4.y = goodY(evt.stageY);
            lines.graphics.clear();
            drawLines();
        }

        if (isDragging5) {
            point5.x = goodX(evt.stageX);
            point5.y = goodY(evt.stageY);
            lines.graphics.clear();
            drawLines();
        }

        if (isDragging6) {
            point6.x = goodX(evt.stageX);
            point6.y = goodY(evt.stageY);
            lines.graphics.clear();
            drawLines();
        }

        if (isDragging7) {
            point7.x = goodX(evt.stageX);
            point7.y = goodY(evt.stageY);
            lines.graphics.clear();
            drawLines();
        }

        evt.updateAfterEvent();
    }
}

/*  This function chooses the appropriate x-coordinate for a dragged point.  
    If thisX is in the draggable region, then we return it.  Otherwise, we return the max or min x value, 
    depending on which side of the draggable region thisX is on.
*/

function goodX(thisX:Number):Number {
    if (thisX < xMin) {
        return (xMin);
    }
    if (thisX > (xMax - circleWidth)) {
        return (xMax - circleWidth);
    }
    return (thisX);
}

//  This function chooses the appropriate y-coordinate for a dragged point in a manner similar to the previous function. 

function goodY(thisY:Number):Number {
    if (thisY < yMin) {
        return (yMin);
    }
    if (thisY > (yMax - circleWidth)) {
        return (yMax - circleWidth);
    }
    return thisY;
}

// This function manages the placement of points until all 7 points are placed. 
function placePoint(evt:MouseEvent):void {

    //var point = new Sprite();
    //array.push(point);

    if (numPoints == 0) {
        point1.graphics.beginFill(0x7777FF);
        point1.graphics.drawCircle(0, 0, circleWidth/2);
        point1.graphics.endFill();
        point1.filters = [ new DropShadowFilter() ];
        point1.x = drawBoard.mouseX;
        point1.y = drawBoard.mouseY;
        numPoints = 1;
    }
    else if(numPoints == 1) {
        point2.graphics.beginFill(0x7777FF);
        point2.graphics.drawCircle(0, 0, circleWidth/2);
        point2.graphics.endFill();
        point2.filters = [ new DropShadowFilter() ];
        point2.x = drawBoard.mouseX;
        point2.y = drawBoard.mouseY;
        numPoints = 2;
    }
    else if (numPoints == 2) {
        point3.graphics.beginFill(0x7777FF);
        point3.graphics.drawCircle(0, 0, circleWidth/2);
        point3.graphics.endFill();
        point3.filters = [ new DropShadowFilter() ];
        point3.x = drawBoard.mouseX;
        point3.y = drawBoard.mouseY;
        numPoints = 3;
        lines.graphics.clear();

    }

    else if (numPoints == 3) {
        point4.graphics.beginFill(0x7777FF);
        point4.graphics.drawCircle(0, 0, circleWidth/2);
        point4.graphics.endFill();
        point4.filters = [ new DropShadowFilter() ];
        point4.x = drawBoard.mouseX;
        point4.y = drawBoard.mouseY;
        numPoints = 4;
        lines.graphics.clear();

    }

    else if (numPoints == 4) {
        point5.graphics.beginFill(0x7777FF);
        point5.graphics.drawCircle(0, 0, circleWidth/2);
        point5.graphics.endFill();
        point5.filters = [ new DropShadowFilter() ];
        point5.x = drawBoard.mouseX;
        point5.y = drawBoard.mouseY;
        numPoints = 5;
        lines.graphics.clear();

    }

    else if (numPoints == 5) {
        point6.graphics.beginFill(0x7777FF);
        point6.graphics.drawCircle(0, 0, circleWidth/2);
        point6.graphics.endFill();
        point6.filters = [ new DropShadowFilter() ];
        point6.x = drawBoard.mouseX;
        point6.y = drawBoard.mouseY;
        numPoints = 6;
        lines.graphics.clear();

    }

    else if (numPoints == 6) {
        point7.graphics.beginFill(0x7777FF);
        point7.graphics.drawCircle(0, 0, circleWidth/2);
        point7.graphics.endFill();
        point7.filters = [ new DropShadowFilter() ];
        point7.x = drawBoard.mouseX;
        point7.y = drawBoard.mouseY;
        numPoints = 7;
        lines.graphics.clear();
        drawLines();
    }
}

//  Draws the 7 lines between the points with appropriate fill and adds a drop shadow.
function drawLines():void {
    lines.graphics.lineStyle(1, 0xFF0000);
    lines.graphics.beginFill(0xFF7777);
    lines.graphics.moveTo(point1.x, point1.y);
    lines.graphics.lineTo(point2.x, point2.y);
    lines.graphics.lineTo(point3.x, point3.y);
    lines.graphics.lineTo(point4.x, point4.y);
    lines.graphics.lineTo(point5.x, point5.y);
    lines.graphics.lineTo(point6.x, point6.y);
    lines.graphics.lineTo(point7.x, point7.y);
    lines.graphics.lineTo(point1.x, point1.y);
    lines.graphics.endFill();
    lines.filters = [ new DropShadowFilter() ];
    trace(lines)
}

//  The next functions "turn on" dragging for the point that is clicked, as long as all 7 points have
//  been placed.
function startDragging1(evt:MouseEvent):void {
    if (numPoints == 7) {
        isDragging1 = true;
    }
}

function startDragging2(evt:MouseEvent):void {
    if (numPoints == 7) {
        isDragging2 = true;
    }
}

function startDragging3(evt:MouseEvent):void {
    if (numPoints == 7) {
        isDragging3 = true;
    }
}
function startDragging4(evt:MouseEvent):void {
    if (numPoints == 7) {
         isDragging4 = true;
    }
}

function startDragging5(evt:MouseEvent):void {
    if (numPoints == 7) {
        isDragging5 = true;
    }
}

function startDragging6(evt:MouseEvent):void {
    if (numPoints == 7) {
        isDragging6 = true;
    }
}

function startDragging7(evt:MouseEvent):void {
    if (numPoints == 7) {
        isDragging7 = true;
    }
}

//  Turns off dragging. This function is called when the mouse button is released anywhere on the stage.
function stopDragging(evt:MouseEvent):void {
    if (numPoints == 7) {
        isDragging1 = false;
        isDragging2 = false;
        isDragging3 = false;
        isDragging4 = false;
        isDragging5 = false;
        isDragging6 = false;
        isDragging7 = false;

    }
} 
```

如果有人想使用代码，请随意

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:04:31.080

根据您的代码，行是一个新形状，没有数组。这是第一个错误。

```
var shapeArray:Array/* of flash.display.Shape */ = [] /* of flash.display.Shape */;
var lines:Shape = new Shape();

// what was wrong
function showit(e:Event):void
{
  // lines is a shape, no array, thus lines[0] will throw a runtime error
  // also, if you wanted to get the first shape, type the reference to
  // Shape instead to String
  var shapeArray:String = lines[0];
}

// doing it better
function showit(e:Event):void
{
  if (!shapeArray || shapeArray.length == 0)
    return; // nothing to do here

  const shape:Shape = shapeArray[0] as Shape;
  if (shape && !shape.parent) // ensure it exists and hasn't been added yet.
    addChild(shape) // show it
} 
```

# php - 用于获取业务评论的 Google plus API？

> ID：10882042
> 
> 赞同：7
> 
> 时间：2012-06-04T13:18:43.060
> 
> 标签：php, api, google-plus

是否有任何 php api 可以从 google plus 获取商业评论？

示例业务页面网址： [https ://plus.google.com/112164489386569071900/about?gl=IN&hl=en-IN](https://plus.google.com/112164489386569071900/about?gl=IN&hl=en-IN)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T22:45:44.063

我强烈建议您使用 Google Places API：我猜结果与 G+ 上显示的结果相同

[https://developers.google.com/places/documentation/details](https://developers.google.com/places/documentation/details)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-09T12:04:38.667

现在可以通过 API 获得评论。请参阅 Place Details API - [https://developers.google.com/places/documentation/details](https://developers.google.com/places/documentation/details)

这是一个[示例响应](https://developers.google.com/places/documentation/details#PlaceDetailsResponses)。

编辑：有 5 条评论的限制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T13:20:49.797

不，没有，[Google Plus api](https://developers.google.com/+/api/)仍然非常有限，它只能访问：

*   用户
*   帖子
*   注释

作为替代方案，您可以查看[Yelp API](http://www.yelp.com/developers/documentation/v2/business)。

# javascript - Facebook 与 javascript FB Graph api 集成 在墙上发布 Firefox 中的未知错误

> ID：10882044
> 
> 赞同：0
> 
> 时间：2012-06-04T13:18:51.687
> 
> 标签：javascript, windows, firefox, facebook-graph-api, jakarta-ee

我正在使用**FB Graph api**在用户的墙上发布我在墙上发布的功能如下：

```
 function PostToWall()
 {

      var mymessage = 'my message';
      var mypic = 'http://myapp/a.jpg';
      var mylink = 'http://www.myapp.com';
      var myname = 'myApp';
      var mydesc = 'my desc .';
      FB.api('/me/feed', 'post', { message: mymessage, picture: mypic, link: mylink, name: myname, description: mydesc }, function (response) {
            if (!response || response.error) {
                       alert(response.error.message);
            } else {
                        alert('Post ID: ' + response.id);
             }
      });
      // alert('Do you want to continue ? ');
 }; 
```

它在 crome 中运行良好，但是当我在 firefox 中使用它时，它会提示**Unknown error** from `alert(response.error.message);`.and 在 firefox 错误的错误控制台中是

```
Error: uncaught exception: [Exception... "prompt aborted by user"  nsresult: "0x80040111 (NS_ERROR_NOT_AVAILABLE)"  location: "JS frame :: resource://gre/components/nsPrompter.js :: openTabPrompt :: line 468"  data: no] 
```

我发现解决方法是在函数结束前提示用户看到最后一行**alert('Do you want to continue ?');** . 当我编写此警报时，它在 Firefox 中也可以正常工作，但我不想提示用户任何消息。可能是什么问题，解决方案是什么？

我正在使用 Firefox 5.0 。我的操作系统是windows 7。

PostOnWall 函数是从另一个函数调用的，如下所示：

```
function f(){

     PostToWall();
    ...
    ...
    //code to click a submit button
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T09:20:05.410

我编写了代码来单击回调处理程序中的提交按钮，如下所示：

```
function PostToWallCallBackHandler(response) {
     if (!response || response.error) {
         alert(response.error.message);
     } else {
          document.getElementById('fbSubmit').click();
     }
 }
 function PostToWall(mymessage,mypic,mylink,myname,mydesc,callbackHandler) {
     FB.api('/me/feed', 'post', { message: mymessage, picture: mypic, link: mylink, name: myname, description: mydesc },function (response){callbackHandler(response);} );
 }; 
```

它适用于 crome 和 firefox、safari 和 IE 9。

# windows-8 - Metro 风格应用媒体捕获异常

> ID：10882047
> 
> 赞同：5
> 
> 时间：2012-06-04T13:19:01.513
> 
> 标签：windows-8, microsoft-metro

我正在编写我的第一个 Metro 风格的应用程序。几天前，我已经根据这个示例（[这里](http://code.msdn.microsoft.com/windowsapps/Media-Capture-Sample-adf87622)）编写了用于拍照的代码，并且它可以工作。随着 Windows 8 发布预览版和 Visual Studio 2012 候选发布版的发布，相同的代码段不再起作用。似乎访问相机存在问题，但在 Package.appxmanifest 我检查了网络摄像头功能。 **xml：**

```
<Canvas x:Name="previewCanvas1" Width="320"  Height="240" Background='Gray'>
<Image x:Name="imageElement1"  Width="320" Height="240" Visibility="Collapsed"/>
<CaptureElement x:Name="previewElement1" Width="320" Height="240" />
</Canvas>
<StackPanel Orientation="Horizontal" Margin="20" HorizontalAlignment="Center">
 <Button Width="120" x:Name="btnStartPreview2" Click="btnStartPreview_Click" IsEnabled="true"  Margin="0,0,10,0"  Background="#FFC3C3C3">Da Webcam</Button>
<Button Width="120" x:Name="btnTakePhoto2" Click="btnTakePhoto_Click" IsEnabled="false"  Margin="0,0,10,0"  Background="#FFC3C3C3">Scatta</Button>
</StackPanel> 
```

**以及背后的代码：**

```
MediaCapture mediaCaptureMgr;
async void btnStartPreview_Click(Object sender, RoutedEventArgs e)
        {
            try
            {

                mediaCaptureMgr = new Windows.Media.Capture.MediaCapture();
                await mediaCaptureMgr.InitializeAsync();

                previewElement1.Source = mediaCaptureMgr;

                await mediaCaptureMgr.StartPreviewAsync();

            }
            catch (Exception ex)
            {
                throw new Exception(ex.Message);
            }
        } 
```

例外是：“**访问被拒绝。（来自 HRESULT 的异常：0x80070005（E_ACCESSDENIED））** ”但如前所述，网络摄像头功能已检查！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T14:16:14.213

我解决了。要使用网络摄像头，您必须在 package.appxmanifest 中指明应用程序需要访问网络摄像头和**麦克风**。奇怪但真实！

# powershell - Powershell Get-ADgroup 内联显示成员名称

> ID：10882048
> 
> 赞同：1
> 
> 时间：2012-06-04T13:19:02.593
> 
> 标签：powershell

我有一个脚本，列出了所有组的一些细节。其中包括他们的成员。默认情况下，成员显示为其 DN。我怎样才能只显示他们的名字（例如 Jon Doe、Jane Doe、...）。

目前我的代码如下：

```
$Groups = Get-ADGroup -Filter * -SearchBase $SearchBase -properties $GroupColumns | Where-Object {$_.GroupCategory -eq "Distribution"} | Sort-Object Name | Select-Object $GroupTableHeader 
```

这将返回所有包含我想要的所有列的组。但是对于成员列，内容显示为 **CN=John Doe,OU=Users,DC=company,DC=com CN=Jane Doe,OU=Users,DC=company,DC=com**

提前感谢所有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:47:48.273

您可以为每个成员发出 Get-ADObject 并仅获取名称，但这是一项昂贵的操作。您可以使用正则表达式来提取名称：

```
$_.Member -replace '^CN=([^,]+).+$','$1' 
```

上面捕获了 'CN=' 之后直到第一个逗号的所有内容，并将整个字符串替换为匹配项。

# jquery - 使用 jQuery 提示提交

> ID：10882055
> 
> 赞同：0
> 
> 时间：2012-06-04T13:19:26.757
> 
> 标签：jquery, asp.net-mvc-3, submit

假设我有一个相当通用的 jQuery Prompt，它要求我重命名一个元素，然后告诉我输入的内容：

```
$(function () {
$("#rename").click(function () {
    jPrompt('Please Enter a New Name:', 'Enter new name...', 'Rename Prompt', function (r) {
        if (r) {
            alert('You entered ' + r);
        }
    });
});
}); 
```

但是我希望重命名的元素存储在服务器上的数据库中，这意味着我需要运行服务器端脚本来重命名这个元素。我假设这意味着我需要使用提交，就像在表单上一样。我在这里找到了一些关于 .submit() jQuery 函数的[信息，](http://api.jquery.com/submit/)但我并不完全理解它是如何工作的。如果有人可以让我知道我将如何提交然后运行服务器端脚本，那将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:28:01.777

```
$(function () {
    $("#rename").click(function (e) {
        e.preventDefault();
        jPrompt('Please Enter a New Name:', 'Enter new name...', 'Rename Prompt', function (r) {
            if (r) {
                $('input[name="NewName"]').val(r.Name);
                $.post('@Url.Action("Edit", "TheController")', $('#hiddenform').serialize(), function(response) {
                    // response = ActionResult
                });
            }
        });
    });
}); 
```

1.  用于`Url.Action`获取正确的 URI
2.  使用 prevent default 来阻止默认操作
3.  从 MVC3 操作返回某种 JSON 以指示成功/失败。
4.  在某处隐藏`<form>`并填写要发布的信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T13:23:27.830

您需要使用 AJAX 将请求从 JavaScript 发送到服务器端脚本。查看[关于 AJAX 的 jQuery API 文档以](http://api.jquery.com/category/ajax/)获取更多信息。

以下 jPrompt 回调将向服务器端脚本发出 HTTP POST 请求，并与请求一起传递`id`和`newName`参数。在 PHP 中，您可以使用`$_POST['id']`和检索这些内容`$_POST['newName']`。

```
function (r) {
    if (r) {
        $.post("rename.php", {
            data: {
                id: somethingToIdentifyTheElement,
                newName: r
            },
            success: function(response) {
                // Successfully renamed the element!
                // If your server-side script returned something interesting,
                // you can find it in the response argument
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T13:23:39.507

> 如果有人可以让我知道我将如何提交然后运行服务器端脚本，那将不胜感激。

为此，您需要使用[$.ajax()](http://api.jquery.com/category/ajax/)函数来调用服务器端函数。

```
$.ajax({
  url: 'YourController\yourAction',
  type:'post'
  success: function(data) {
    $('.result').html(data);
    alert('Load was performed.');
  }
}); 
```

# blackberry - 黑莓：屏幕中字段的位置

> ID：10882056
> 
> 赞同：0
> 
> 时间：2012-06-04T13:19:31.547
> 
> 标签：blackberry, field

我想在标签的相同位置打开一个弹出屏幕。所以我想要一个返回屏幕中字段位置的方法。然后我将这些位置用于弹出窗口。

```
 public void sublayout(int width, int height){
            super.sublayout(width,height);
            setPosition(x_postion_of_label,y_postion_of_labe);
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:23:10.277

```
int xPos=labelField.getLeft() ; 
```

&

```
int yPos=labelField.getTop(); 
```

将为您提供 labelField 的起始 X 和 Y 位置。

# iphone - xcode计数JSON项目

> ID：10882060
> 
> 赞同：0
> 
> 时间：2012-06-04T13:19:58.113
> 
> 标签：iphone, ios, xcode, json

我需要计算此 JSON 响应中的项目数（帖子），

```
2012-06-04 14:09:57.872 horitable[72261:11903] JSON : {
posts =     (
            {
        post =             {
            eventdate = "2012-03-31";
            eventid = 2;
            eventimage = "http://hernandoz.local/~hernandoz/kopict/02_31march2012.jpg";
            eventinfo = "02 event";
            eventname = "xplosion 02";
        };
    },
            {
        post =             {
            eventdate = "2012-07-07";
            eventid = 3;
            eventimage = "http://hernandoz.local/~hernandoz/kopict/greg_vs_turner.jpg";
            eventinfo = "02 event";
            eventname = "Xplosion 02";
        };
    },
            {
        post =             {
            eventdate = "2012-04-29";
            eventid = 4;
            eventimage = "http://hernandoz.local/~hernandoz/kopict/ko_itclub_apr_2012.jpg";
            eventinfo = "KO East London Interclub";
            eventname = "KO Interclub";
        };
    }
); 
```

}

我知道只有 3 个事件（帖子），这是我正在使用的代码

```
 [[AFNetworkActivityIndicatorManager sharedManager] decrementActivityCount];
    NSLog(@"JSON : %@", JSON); //get the JSON response

    // 6.1 - Load JSON into internal variable
    jsonResponse = JSON;
    // 6.2 - Get the number of shows (post)
    int shows = 0;
    for (NSDictionary* day in jsonResponse) {
        shows += [[day objectForKey:@"posts"] count];

        NSLog(@"count : %d",shows);
    } 
```

我得到一个错误，但我不明白为什么。

```
-[__NSCFString objectForKey:]: unrecognized selector sent to instance 0x76986f0 
```

有人可以帮帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:34:05.400

试试这个

```
NSLog(@"Response members= %@",responseString);
NSArray *array = [(NSDictionary*)[responseString JSONValue] objectForKey:@"posts"];
NSLog(@"Count value= %d",[array count]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T13:25:09.067

在你的情况下，你可以这样做

```
 [[AFNetworkActivityIndicatorManager sharedManager] decrementActivityCount];
 NSLog(@"JSON : %@", JSON); //get the JSON response

// 6.1 - Load JSON into internal variable
jsonResponse = JSON;
// 6.2 - Get the number of shows (post)
int shows = [[jsonResponse objectForKey:@"posts"] count];

   NSLog(@"count : %d",shows); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T13:29:56.113

您需要首先将 json 片段化为

```
NSDictionary * dict = [JSON JSONValue]; 
```

或者

```
NSDictionary * dict = [JSON JSONFragmentValue]; 
```

然后

```
for (NSDictionary* day in dict) {
    shows += [[day objectForKey:@"posts"] count];

    NSLog(@"count : %d",shows);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T07:43:59.397

问题是 JSON 作为 ID，这行得通

`jsonResponse = [(NSDictionary*)JSON objectForKey:@"posts"];`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T08:18:12.663

我认为您错误地放置了“帖子”而不是“帖子”。键“posts”包含一个字典数组，每个字典都有一个键“post”。你正在做的是你从数组中取出所有字典

```
 for (NSDictionary* day in jsonResponse) { 
```

并检查字典中的关键“帖子”。确实，字典中没有称为“帖子”的键。我是“帖子”。“post”的值是 NSDictionary 而不是数组。所以你不能`count`在那里打电话。您的问题的解决方案是在 for 循环中删除不必要的 API

```
 [[AFNetworkActivityIndicatorManager sharedManager] decrementActivityCount];
  jsonResponse = JSON;

  int shows = 0;
  for (NSDictionary* day in jsonResponse) {
      shows += 1;
  }

  NSLog(@"count : %d",shows); 
```

# java - 从多对多关系的表中删除记录？

> ID：10882068
> 
> 赞同：1
> 
> 时间：2012-06-04T13:20:30.580
> 
> 标签：java, hibernate, nhibernate-mapping

我正在使用休眠多对多关联。我有 3 张桌子（STUDENT、COURSE 和 STUDENT_COURSE）。3张表中，2张为主表，1张为提供关系的中间表。当从 STUDENT 中删除记录时，从 STUDENT_COURSE 中删除相应的映射。我的要求是它甚至应该从 COURSE 表中删除记录。考虑 STUDENT_COURSE 条目如下：

```
S-Id  C_ID
101   201
102   202 
```

当从 STUDENT 表中删除 101 时，上表中的第一个条目将被删除，但 COURSE 表中与 201 对应的记录保持不变。我怎样才能删除该记录？我需要执行删除查询吗？多对多关系不照顾？下面是我的配置：

```
<set name="course" table="STUDENT_COURSE" 
            inverse="false" lazy="false" fetch="join" cascade="all" >
            <key>
                <column name="S_Id" not-null="true" />
            </key>
            <many-to-many entity-name="COURSE">
                <column name="C_Id" not-null="true" />
            </many-to-many>
        </set> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:34:37.680

如果我删除学生，您还想删除相应的课程，好的，就像您在 Student hbm 中对 Student => STUDENT_COURSE 映射进行`inverse and cascade`配置一样，您也需要在 STUDENT_COURSE hbm 中为 STUDENT_COURSE => COURSE 映射执行相同的操作。

# database - 推荐用于搜索引擎的数据库

> ID：10882072
> 
> 赞同：1
> 
> 时间：2012-06-04T13:20:49.477
> 
> 标签：database

我正在编写一个搜索引擎，我正在寻找一个数据库来存储我所有抓取的数据，这些数据将用于 URLDatabase 和数据存储。

1.  它应该基于磁盘而不是基于内存

2.  Java 更可取，因为我的应用程序是在 Java 中的，因此我可以轻松地嵌入它。

3.  可售

4.  Linux 和 Windows 的首选。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:49:26.383

我真的很喜欢[Solr ，它是](http://lucene.apache.org/solr/)[Lucene](http://lucene.apache.org/)上的一个瘦 Java 包装器，它是一个使用非常广泛、性能极好、基于文本的 nosql 数据库（可能是使用*最*广泛的数据库）。

查找匹配项的速度非常快（毫秒响应），您可以在获得结果时对结果进行排序。

它非常易于设置，在 tomcat 下运行，使用普通的旧磁盘文件并在 linux 和 windows 下运行，因此它满足您的所有要求。

我已经在几个项目中使用过它，而且总是很成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T13:26:45.417

看看 Hadoop 和 HBase

[http://hadoop.apache.org/](http://hadoop.apache.org/)

[http://hbase.apache.org/](http://hbase.apache.org/)

# regex - 如何在vim中搜索所有大写单词？

> ID：10882074
> 
> 赞同：16
> 
> 时间：2012-06-04T13:20:51.127
> 
> 标签：regex, vim

我想搜索文件中的所有大写单词，但我不知道该怎么做（或者如果可能的话）。我在stackoverflow上找到了这个[解决方案](https://stackoverflow.com/questions/4255104/regex-to-match-all-caps-words-php)，但它不适用于vim。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-04T13:32:38.210

在命令模式下，假设您没有`ignorecase`设置选项：

```
/\<[A-Z]\+\> 
```

或者

```
/\v<[A-Z]+> 
```

查找长度大于 1 且被单词边界包围的任何大写字母字符串。第二种形式使用“非常神奇”。 `:help magic`详情

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-04T13:39:23.417

最短的答案：`/\<\u\+\>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T13:48:31.277

如果您想要所有匹配的大写单词的列表（即您对从一个单词跳转到另一个单词不感兴趣），您可以使用：

```
echo filter(split(join(getline(1, '$'), ' '), '\v(\s|[[:punct:]])'), 'v:val =~ "\\v<\\u+>"') 
```

和：

*   `getline(1, '$')`返回当前缓冲区中所有行的列表
*   `join(lines, ' ')`使这个行列表变平
*   `split(all_text, separators_regex)`建立一个类似单词的元素列表
*   and finally `filter(words, uppercase-condition)` that selects only the uppercase words.

# hibernate - SQL 注入问题 -- getHibernateTemplate().delete(getObject(objectClass,objectId)) 方法

> ID：10882076
> 
> 赞同：0
> 
> 时间：2012-06-04T13:20:55.570
> 
> 标签：hibernate, final

我正在修复安全问题审计报告的代码——SQL 注入。在我的代码中，以下方法广泛用于删除记录。该方法在基类中定义，并由模块中的每个其他 dao 级别类扩展。

```
public void delete(Class objectClass, long objectId)throws DAOException{
        try{
            getHibernateTemplate().delete(getObject(objectClass,objectId));
        }catch(Exception e){
            throw new DAOException(e);
        }
    } 
```

并且，方法调用 getHibernateTemplate().delete(getObject(objectClass,objectId));

据报道容易发生SQL注入。举报喜欢

“将从 servlet 请求（“getObject（objectClass，objectId）”）接收到的数据注入到用户定义的危险中。

如何解决问题。我已经做了足够的功课，并且已经通过 HQL 中的准备好的语句修复了一些更多的 SQL 注入问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:05:29.787

ANSWER -- 此方法本身使用绑定参数，可以通过 Log4j api 进行验证。我已经验证了绑定参数的日志，并且这个问题的 SQL 注入是不可行的

# ruby-on-rails - Ruby：温和的“异国情调”继承不起作用？

> ID：10882077
> 
> 赞同：0
> 
> 时间：2012-06-04T13:21:00.173
> 
> 标签：ruby-on-rails, ruby, inheritance, methods, superclass

我想将一堆来自子类的通用代码分解成一个超类方法。超类方法必须引用将在子类中定义的不存在的（在超类中）方法。但我无法让它工作。

这是我尝试过的多种变体中的一种：

```
class Superclass
    def chunk_of_code
        # <code...>
        nonexistant_superclass_method_defined_in_subclass params
        # <more code...>
    end
end

class Subclass < Superclass
    def nonexistant_superclass_method_defined_in_subclass params
        # whatever...
    end
end

Subclass.new.chunk_of_code params 
```

这行不通。其他变体也不起作用。这种编码在 Ruby 中是否可行（我以为是）？我在 Smalltalk 工作时一直在做这种事情。

有什么方法可以实现我想要的吗？请避免建议我使用“mix-ins”或“modules”，因为我现在只想学习和使用 Ruby 的继承。

*运行最新版本的 Ruby。

谢谢。

编辑：这是在 Rails 应用程序中。超类是ApplicationController。

编辑：这是我尝试过的许多迭代之一的实际代码。这个特定的示例在视图中以“nil:NilClass 的未定义方法‘每个’”结束，显然是因为整个事情是在超级（未定义的地方）而不是子的上下文中运行的，或者至少这是我的解释：

```
class ApplicationController < ActionController::Base
    protect_from_forgery
    before_filter :authenticate_registration!

    # models and x defined in subclass
    def index
        models = x.where registration_id: current_registration.id

        respond_to do |format|
            format.html # index.html.erb
            format.json { render json: models }
        end
    end
    # more code here...
    # ...
end

class PositionsController < ApplicationController
    def x
        Position
    end

    def models= blah
        @positions = blah
    end

    # more code here...
    # ...
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T13:32:07.833

您在这里遇到的唯一错误是`chunk_of_code`. 此方法必须接受一些形式参数，例如：

```
def chunk_of_code params 
```

然后你可以随意调用它：

```
params = 'something'
Subclass.new.chunk_of_code params 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T19:18:53.067

您的错误实际上与继承无关，并且在此行

```
models = x.where registration_id: current_registration.id 
```

这可能是模棱两可的：这意味着调用该方法`models=`还是意味着分配给一个名为 的局部变量`models`？在这种（和类似的）情况下，ruby 假设您正在尝试处理局部变量。如果您想调用该方法，则需要执行

```
self.models = x.where registration_id: current_registration.id 
```

由于您的`models=`方法没有被调用，`@positions`因此是 nil，我假设您的视图尝试使用它。

您可能还对诸如 make_resourceful 之类的处理这种常见控制器内容的 gem 感兴趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T19:48:13.163

在 Rails 的模型方面，我经常使用：

```
class GenericModel < ActiveRecord::Base
  self.abstract_class = true

  # define all the generic behavior methods/ model stubs you want.
  # model-specific classes can override to their hearts content
  # or use the inherited implementation

end

class Feature < GenericModel
  # model specific methods, and/or overrides
end 
```

我用一个

```
class GenericController
  # basic show implementation for example
  def show
    @object = params[:controller].singularize.camelcase.constantize.find(params[:id])
    respond_to do |format|
      format.pdf { render :layout => false }
      format.html  # show
      format.xml { render :xml => @object.to_xml }
    end
  end
end 
```

如果特定模型的显示行为与通用模型没有任何不同，则该方法不会出现在该“模型”_controller.rb 中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-04T13:27:51.647

一种方法是在父对象中定义它并`raise NotImplementedError`作为方法的行为。顺便说一句，您要做的是创建一个抽象类，这在某些其他语言（如 Java）中更容易实现。

# wpf - 当子元素没有足够的空间时从左侧而不是右侧进行剪辑？

> ID：10882079
> 
> 赞同：0
> 
> 时间：2012-06-04T13:21:11.133
> 
> 标签：wpf

我有一个宽度为 *、Auto、* 的三列的网格。

当我使用扩展器折叠网格宽度时，我希望中心列保持固定大小。我希望右手边的柱子从右手边开始剪裁。这是默认行为，并且已经可以正常工作。但是，我希望从左侧剪辑第一列。也就是说，我希望列的左侧边缘首先被隐藏。左侧列当前正在从右侧边缘剪裁。

希望我已经解释得足够好！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:33:04.870

您可能需要适当地设置 Horizo​​ntalAlignment="Right" 和 ="Left"。

这是一个示例，它可能不完全符合您的要求，但可以根据您的需要从左右剪辑：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="Auto"/>
    </Grid.ColumnDefinitions>

    <TextBlock Grid.Column="0" Text="Left hand column" HorizontalAlignment="Right"/>
    <Rectangle Grid.Column="1" Fill="Blue" Width="100"/>
    <TextBlock Grid.Column="2" Text="Right hand column" HorizontalAlignment="Left"/>
    <GridSplitter Grid.Column="3" Width="4" VerticalAlignment="Stretch" ResizeBehavior="PreviousAndNext"/>
    <Rectangle Grid.Column="4" Fill="Red"/>
</Grid> 
```

# usb - Kindle USB 连接

> ID：10882082
> 
> 赞同：0
> 
> 时间：2012-06-04T13:21:18.793
> 
> 标签：usb, kindle

kindle如何区分电脑连接和电网充电？我正在尝试实现适配器，它需要在插入时打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:06:16.400

您应该查看[USB 电池充电规范](http://www.usb.org/developers/devclass_docs/USB_Battery_Charging_1.2.pdf)，特别是第 3 节。

# ios - IOS程序中的正则表达式问题

> ID：10882083
> 
> 赞同：1
> 
> 时间：2012-06-04T13:21:19.963
> 
> 标签：ios, regex, sigabrt

我试图让以下正则表达式在 ios 上工作，以确保用户只输入数字和一个点。我无法使匹配数超过 0。我也尝试过 NSRange 一个，无论如何它都会给我 0，所以我的正则表达式不起作用，即使我很确定它应该与我有什么。有什么建议么。

我写的代码在这里，errorRegex 在 .h 文件中定义，并且 regError 也被定义。

```
errorRegex = [NSRegularExpression regularExpressionWithPattern:@"[^0-9.]*" 
            options: NSRegularExpressionCaseInsensitive error:&regError];

NSUInteger rangeOfFirstMatch = [errorRegex numberOfMatchesInString:servAmount1TF.text 
            options:0 range:NSMakeRange(0, [servAmount1TF.text length])]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:02:13.803

`errorRegex`是类型`NSRegularExpression`，但错误是类型`UIButtonContent`。这具有内存错误的所有特征。您的代码中的某些内容没有通过适当的保留/发布周期。

* * *

我有一个单元测试来处理表达式 @"[^0-9.]+"

```
- (void)testRE
{
    NSError *regError = nil;
    NSRegularExpression *errorRegex;
    NSString *string;
    NSUInteger count;

    errorRegex = [NSRegularExpression regularExpressionWithPattern:@"[^0-9.]+" 
                                                           options: NSRegularExpressionCaseInsensitive
                                                             error:&regError];
    STAssertNil(regError, nil);

    string = @"00.0";
    count = [errorRegex numberOfMatchesInString:string 
                                        options:0
                                          range:NSMakeRange(0, [string length])];
    STAssertEquals(count, 0U, nil);

    string = @"00A00";
    count = [errorRegex numberOfMatchesInString:string 
                                        options:0
                                          range:NSMakeRange(0, [string length])];
    STAssertEquals(count, 1U, nil);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T01:20:36.727

为什么不使用 stock-standard c 的 regex.h ？

在此处查看示例：http: [//cboard.cprogramming.com/c-programming/117525-regex-h-extracting-matches.html](http://cboard.cprogramming.com/c-programming/117525-regex-h-extracting-matches.html)

更多信息在这里： [https ://stackoverflow.com/a/422159/1208218](https://stackoverflow.com/a/422159/1208218)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T14:54:16.363

```
NSRegularExpression *errorCheckRegEx = [[NSRegularExpression alloc] initWithPattern:@"\\b^([0-9]+(\\.)?[0-9]*)$|^([0-9]*(\\.)?[0-9]+)$|^[0-9]*$|^([0-9]*(\\/)?[0-9]*)$\\b" options:NSRegularExpressionCaseInsensitive error:nil];
[match setArray: [errorCheckRegEx matchesInString:servAmount1TF.text options:0 range:NSMakeRange(0, [servAmount1TF.text length])]]; 
```

当我终于可以回到它时，我想出了我需要做的事情，所以如果有人感兴趣，这就是我想出的。\b 正是 ios 在他们的正则表达式中使用的东西，这有点愚蠢，但没有它就无法工作，所以当它感觉不自然时，我把它留在那里，特别是在 ruby​​ 的例子之后。这个正则表达式将得到分数、小数 -> .3；2.3；2；并从头到尾进行。我认为可能发生的事情是我没有使用 \b 并且也没有正确匹配，这是第二行。无论哪种方式，它现在都很好用。谢谢您的帮助。

# .net - RabbitMQ Pub/Sub：关闭最后一个消费者会关闭发布者的通道/模型。为什么？

> ID：10882093
> 
> 赞同：2
> 
> 时间：2012-06-04T13:22:35.007
> 
> 标签：.net, c#-4.0, rabbitmq, publish-subscribe

我正在为一些发布/订阅（发布者/订阅者）代码使用 .Net RabbitMQ。一切正常，直到我开始关闭消费者。消费者正确处理发布的数据，直到我关闭最后一个消费者。毕竟消费者，我打开一个新的消费者，但没有任何反应。应用程序打开，但它没有收到来自发布者的任何数据。

我检查了发布者代码，发现当最后一个消费者关闭时，其频道的*IsOpen*属性变为 false。我不知道是否有一些设置可以让频道即使在其消费者关闭后也保持打开状态。

这是我的发布者代码： **编辑**我最初粘贴了错误的代码。

这是我的消费者代码：

```
public MyConsumer
{
private readonly ConnectionFactory _factory;
private readonly IConnection _connection;
private readonly IModel _channel;
private readonly Timer _timer;

private SubscriptionConsumerType(string ipAddress, string exchangeName, TimeSpan tsPullCycle)
{
    //set up connection
    this._factory = new ConnectionFactory();
    this._factory.HostName = ipAddress;
    this._connection = this._factory.CreateConnection();
    this._channel = this._connection.CreateModel();

    //set up and bind the exchange
    this._channel.ExchangeDeclare(exchangeName, "fanout", false, true, new Dictionary<string, object>());
    string queueName = this._channel.QueueDeclare().QueueName;
    this._channel.QueueBind(queueName, exchangeName, "");

    //start consuming
    QueueingBasicConsumer consumer = new QueueingBasicConsumer(this._channel);
    this._channel.BasicConsume(queueName, true, consumer);

    //periodically check for new messages from the publisher
    this._timer = new Timer(new TimerCallback(this.TimerStep), consumer, tsPullCycle, tsPullCycle);
}

public void Dispose()
{
    if (this._timer != null)
        this._timer.Dispose();

    if (this._channel != null)
    {
        this._channel.Close();
        this._channel.Dispose();
    }

    if (this._connection != null)
    {
        this._connection.Close();
        this._connection.Dispose();
    }
}
} 
```

现在，我的解决方法是始终在某处打开一个消费者窗口。不过，理想情况下，我希望我的发布者能够运行，而不管打开了多少个消费者窗口。谢谢。

**编辑**糟糕，我粘贴了错误的生产者代码。这是：

```
private SubscriptionBroadcastType(string ipAddress, string exchangeName)
{
    this._factory = new ConnectionFactory();
    this._factory.HostName = ipAddress;
    this._connection = this._factory.CreateConnection();
    this._channel = this._connection.CreateModel();

    this._exchangeName = exchangeName;
    this._channel.ExchangeDeclare(exchangeName, SubscriptionBroadcastType.BROADCAST, SubscriptionBroadcastType.DURABLE, SubscriptionBroadcastType.AUTO_DELETE, new Dictionary<string, object>());
}

public void BroadcastMessage(string message)
{
    lock (this._syncroot) //protect _channel
    {
        if (this._channel.IsOpen)
            this._channel.BasicPublish(this._exchangeName, "", null, System.Text.Encoding.UTF8.GetBytes(message));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:06:15.350

我认为你在这里可能有一些根本性的错误。请检查您是否发布了正确的代码。当我读到它时，您有一个生产者创建一个特定的命名队列并直接发布到队列。您有一个消费者创建一个特定的命名交换，然后创建一个动态命名的新队列并将其绑定到交换。然后，您正在从此队列中读取，但它不能是您最初发布到的队列。

我将首先修复您的代码，以在您的发布者代码中创建一个交换，并使用您可以在您的消费者代码中访问的特定名称。此行将出现在生产者线程中，而不是队列声明行中：

```
this._channel.ExchangeDeclare(exchangeName, "fanout", false, true, new Dictionary<string, object>()); 
```

然后您将需要发布到该交换，而不是发布到队列的行更改为：

```
this._channel.BasicPublish(exchangeName, "", this._basicProperties, System.Text.Encoding.UTF8.GetBytes(message)); 
```

您的消费者应该被设置为从队列中接收这些消息。看看这是否有助于解决您的问题。

# mysql - 加入 MySQL 表

> ID：10882097
> 
> 赞同：0
> 
> 时间：2012-06-04T13:22:57.677
> 
> 标签：mysql

我有以下表格格式：

**会员**

```
 mem_id | mem_name
    ------------------
     1         A
     2         B 
     3         C 
```

**项目成员**

```
fk_mem_id | meb_parent_id
-------------------------
    1          0
    2          1
    3          2 
```

我需要这样的结果：

```
mem_id | child| parent
--------------------------
   1      A     NULL
   2      B      A
   3      C      B 
```

我试过但失败了..有什么想法....？

```
SELECT pm.*, m1.meb_name as child, m2.meb_name as parent 
FROM members m1
LEFT JOIN members m2 
ON m1.meb_parent_id = m2.meb_id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:28:15.810

```
SELECT project_members.fk_mem_id, 
       a.mem_name AS child, 
       b.mem_name AS parent 
FROM   project_members 
       INNER JOIN members a 
               ON project_members.fk_mem_id = a.mem_id 
       LEFT JOIN members b 
              ON project_members.meb_parent_id = b.mem_id 
```

# android - 如何在android中用不同的调制改变声音

> ID：10882102
> 
> 赞同：2
> 
> 时间：2012-06-04T13:23:10.547
> 
> 标签：android, voice, speech

我想开发会说话的应用程序示例，例如在 android 中说话 Tomcat，但我不知道这个概念任何一个指导我。首先我需要如何用不同的调制改变声音和重复声音任何人帮助我任何教程和任何代码非常感谢。

# c# - 在 WCF 中找不到主要的静态主要方法

> ID：10882106
> 
> 赞同：6
> 
> 时间：2012-06-04T13:23:16.753
> 
> 标签：c#, wcf

我创建了 WCF 服务并遇到了问题。我需要定期更新数据库，但我找不到像 Main 这样的静态方法，它可以在没有客户端交互的情况下完成。我能做些什么？？？在这种情况下你会建议什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T13:26:37.167

如果您的 wcf 服务是自托管的，那么您可以在发布服务之前在您的应用程序中执行此操作。

如果它在 IIS 中，那么真的没有 application_start 之类的东西，因为主机可能是在第一次请求时创建的。请参阅[WCF 应用程序启动事件](https://stackoverflow.com/questions/739268/wcf-application-start-event)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T13:42:48.313

WCF 中没有 Main 方法（或类似的入口点）。您需要将 WCF 服务托管在另一个进程（例如 Windows 服务、IIS 或自托管）中以“激活”它并使其可用于其他进程。

WCF 中的一个概念是您编写服务代码来执行您需要的功能，而不必担心基础结构和托管。编写服务逻辑后，您可以装饰和配置服务以将其公开给其他进程。使用这种方法意味着您可以更改服务向其他进程公开的方式，而无需重新编写实际的服务逻辑——您实际上只是更改了配置。因此，主要入口点特定于您选择如何托管和向外界公开 WCF 服务。

只需 Google 搜索“WCF 托管”，您就会发现很多信息。

如果您不需要将服务逻辑公开给外部进程（听起来可能是您的问题的情况），那么也许您不需要使用 WCF，您可以只编写一个普通的旧 Windows 服务。

# java - 休眠 OneToOneToOne 映射

> ID：10882107
> 
> 赞同：0
> 
> 时间：2012-06-04T13:23:18.423
> 
> 标签：java, hibernate

我不断收到此错误：

```
Error saving identity in IdentityDaoImpl. Reason: org.hibernate.PropertyValueException: not-null property references a null or transient value: com.domain.Identity.password 
```

我在 OneToOneToOne 映射的基础上映射了 3 个表。

用户 -> 帐户 -> 身份

我现在如何拥有它，身份扩展帐户和帐户扩展用户。

也许我没有正确映射。我觉得这有点棘手，因为有 3 个一对一的关系而不是 2 个......

这样做的正确方法是什么？

**编辑1：**

我已经将我所有的 merge() 方法更改为 save() ，但它并没有解决问题。

**编辑2：**

这是我的实体的干净版本：

```
@Entity()
@Table(name = "`user`")
@Inheritance(strategy = InheritanceType.JOINED)
@DiscriminatorColumn(discriminatorType = DiscriminatorType.STRING, name = "type")
@DiscriminatorValue("")
public class User extends ActionSupport implements UserDetails, Serializable {

private static final long serialVersionUID = -7480567862246640031L;
private Integer ID;
private String type;
private String password;

@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name = "ID")
public Integer getID() {
    return ID;
}

public void setID(Integer ID) {
    this.ID = ID;
}

@Column(name = "type", nullable = false, unique = false, length = 255)
public String getType() {
    return type;
}

public void setType(String type) {
    this.type = type;
}

@Override
@Column(name = "password", nullable = false, length = 255)
public String getPassword() {
    return password;
}

public void setPassword(String password) {
    this.password = password;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:02:53.227

```
Error saving identity in IdentityDaoImpl. Reason: org.hibernate.PropertyValueException: not-null property references a null or transient value: com.domain.Identity.password 
```

您的密码和类型两个字段都可以为空，异常清楚地表明您正在尝试在密码中插入不能为空的空值。类型也不接受空值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T13:29:26.337

我们可以看看您是如何定义实体上的密码字段的吗？我猜你是想拯救某事。使用密码，`null`这违反了 an `@NotNull`or sth。喜欢`required=true`

# javascript - 在使用 Jquery 打开之前检查弹出窗口是否已经打开

> ID：10882112
> 
> 赞同：10
> 
> 时间：2012-06-04T13:23:39.953
> 
> 标签：javascript, jquery, html

我想在打开弹出窗口之前检查弹出窗口是否已经打开。如何使用 Jquery 完成它？

以下是我打开新弹出窗口的代码：

```
window.open("mystopchat.php?stat=1&session="+data['myid1']['session_id'][i],"win1","width=500,height=500"); 
```

现在在我调用这个之前，我想确定这个弹出窗口还没有打开。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-12T13:58:02.873

这是我使用的一个小技巧，也许你可以使用它：

```
var winRef; //This holds the reference to your page, to see later it is open or not

function openWindow() {  
    var url = //Your URL;
    if (typeof (winRef) == 'undefined' || winRef.closed) {
        //create new, since none is open
        winRef = window.open(url, "_blank");
    }
    else {
        try {
            winRef.document; //if this throws an exception then we have no access to the child window - probably domain change so we open a new window
        }
        catch (e) {
            winRef = window.open(url, "_blank");
        }

        //IE doesn't allow focus, so I close it and open a new one
        if (navigator.appName == 'Microsoft Internet Explorer') {
            winRef.close();
            winRef = window.open(url, "_blank");
        }
        else {
            //give it focus for a better user experience
            winRef.focus();
        }
    }
} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-04T13:28:06.143

```
var popup;
function openPopupOneAtATime() {
    if (popup && !popup.closed) {
       popup.focus();
       /* or do something else, e.g. close the popup or alert a warning */
    }
    else {
       popup = window.open(...);      
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T13:27:26.540

```
var newWindow = null;

function openwindow()
{
  // open the new window only if newWindow is null (not opened yet)
  // or if it was closed
  if ((newWindow == null) || (newWindow.closed))
    newWindow = window.open(...);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-15T03:30:21.320

这是我的建议：

```
function authorize(callback) {

if(!document.authorize) {
    console.log('Opening authorization window...');
    document.authorize = window.open('popup.html','tw','width=300,height=200');
}

if(document.authorize.closed) {
    console.log('Authorization window was closed...');
    setTimeout(callback,0); 
} else {
    setTimeout(function(){
        console.log('Authorization window still open...');
        authorize(callback);
    },1000);    
}

return false;
}

function test() {
    authorize(function(){
      alert('teste');
    });
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-04T13:28:03.540

试试这个（你会知道是否调用了打开的窗口）：

```
var isOpen = "false";
function OpenPopup()
{
   if(isOpen == "false")
   {
         isOpen = "true"; 
         window.open("mystopchat.php?stat=1&session="+data['myid1']['session_id']  [i],"win1","width=500,height=500");
    }
} 
```

# android - 如何制作这样的形状？

> ID：10882115
> 
> 赞同：3
> 
> 时间：2012-06-04T13:23:53.573
> 
> 标签：android, xml, shape

我想得到类似于你在下面看到的形状。我缺少的是标题颜色（匿名文本后面的颜色）。我通过简单地将鼠标移到现在突出显示的第二个文本视图上来复制我想要的内容并产生这种效果:)

当前代码：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
 android:shape="rectangle">
 <stroke android:width="2dp" android:color="#000000" />
 <gradient android:startColor="#898989" android:endColor="#B5B5B5" android:angle="270"/> 

 <corners android:bottomRightRadius="7dp" android:bottomLeftRadius="7dp"
 android:topLeftRadius="7dp" android:topRightRadius="7dp"/>
</shape> 
```

![在此处输入图像描述](../Images/e7a1d90abbc7ee7c78f993e57a2569b7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T13:34:30.550

您需要使用包含两个可绘制对象 的[图层列表。](http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList)

例如，第一个将覆盖整个形状，第二个将覆盖它但`android:top="10dp"`设置，以创建显示底层第一个形状的偏移量

**编辑：**
像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item>
        <shape android:shape="rectangle" >
            <stroke
                android:width="2dp"
                android:color="#000000" />

            <solid android:color="#00ff00" />

            <corners
                android:bottomLeftRadius="7dp"
                android:bottomRightRadius="7dp" />
        </shape>
    </item>
    <item
        android:bottom="2dp"
        android:left="2dp"
        android:right="2dp"
        android:top="20dp">
        <shape android:shape="rectangle" >
            <gradient
                android:angle="270"
                android:endColor="#B5B5B5"
                android:startColor="#898989" />

            <corners
                android:bottomLeftRadius="7dp"
                android:bottomRightRadius="7dp" />
        </shape>
    </item>
</layer-list> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T13:43:36.073

使用 a`LinearLayout`并放置两个`TextView`不同形状的背景。

第一个的上角是圆形的，第二个的底角是圆的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-19T12:15:25.110

这个工具可能有助于进一步的开发

> [http://angrytools.com/](http://angrytools.com/)
> 
> [http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html)

# magento - 订单编辑后 Magento 重定向到其他 URL

> ID：10882116
> 
> 赞同：1
> 
> 时间：2012-06-04T13:23:55.620
> 
> 标签：magento, redirect

目前，我在 Magento 管理员中编辑订单后遇到问题。该页面总是被重定向到另一个 URL，其基础属于订单所属的商店视图。此页面需要重新登录管理员。

例如，我有两个基本 URL，每个都属于一个商店视图：

```
www.example.old.com //old store view (default)
www.example.new.com //new store view 
```

系统使用`www.example.old.com`默认的基本 URL。因此，在`www.example.old.com`我为新商店创建订单并为其开票时。然后在提交发票时，页面从

```
http://www.example.old.com/index.php/admin/sales_order_invoice/new/order_id/1234/ 
```

至

```
http://www.example.new.com/admin/sales_order/view/order_id/1234/ 
```

它需要再次登录。

我将重定向代码跟踪到`Mage_Core_Model_Url`

```
public function getRouteUrl($routePath=null, $routeParams=null)
    ...
    $url = $this->getBaseUrl().$this->getRoutePath($routeParams);

public function getBaseUrl($params = array())
    ....
    if (isset($params['_store'])) {
        $this->setStore($params['_store']);
    }
    ....
    return $this->getStore()->getBaseUrl($this->getType(), $this->getSecure()); 
```

然后我不知道该怎么办。没有参数`_store`，但似乎 Magento 根据正在处理的订单确定要运行的商店视图，当它应该在整个管理员中保持相同的基本 URL 时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-19T07:37:39.267

原因是 Magento 将上下文切换到订单存储，因为它需要正确翻译电子邮件模板。

查看Mage_Core_Model_Template 类有两个方法_applyDesignConfig 和_cancelDesignConfig。第一个函数切换上下文并记住旧上下文，第二个函数应该全部返回。但是，有一个错误。查看更多信息：http: [//www.magthemes.com/magento-blog/magento-142-multiwebsite-admin-redirect-problem-quick-workaround/#comment-1084](http://www.magthemes.com/magento-blog/magento-142-multiwebsite-admin-redirect-problem-quick-workaround/#comment-1084)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T07:34:17.940

您是否尝试过在后端的商店之间启用客户数据共享？抱歉新手回答，还在学习magento

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T08:56:54.147

对于那些可能仍然对这个旧条目感兴趣的人，我分享我的解决方案。这不是一个好方法，实际上它是一种硬编码重定向，以避免返回到不确定的 URL，但它为我解决了这个问题。

在发生重定向的控制器动作中，修改

```
$this->_redirect(..., array(... => ...)); 
```

至

```
$this->_redirect(..., array(... => ..., '_store' => Mage::app()->getStore($storeId))); 
```

这可确保重定向始终转到指定的商店。

# java - Eclipse 无法识别 org.jdesktop。*

> ID：10882118
> 
> 赞同：13
> 
> 时间：2012-06-04T13:24:05.087
> 
> 标签：java, eclipse, import, jdesktop

我使用`JRE system Library [jre7]`，当`import org.jdesktop.application.Action`我得到

```
The import org.jdesktop cannot be resolved 
```

我删除了构建路径`Build Path > remove from build path`，然后我做了
`project > properties > java build path > add Library > JRE system Library`，仍然是同样的错误。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-12T13:37:26.930

如果有人有兴趣，我必须下载 3 个 JAR：

*   **appframework-1.0.3.jar** （上一篇文章中的链接）包含`org.jdesktop.application`类，
*   **swing-layout-1.0.3.jar** [链接](http://search.maven.org/remotecontent?filepath=org/swinglabs/swing-layout/1.0.3/swing-layout-1.0.3.jar)包含`org.jdesktop.layout`类，
*   **swing-worker-1.1.jar** [链接](http://search.maven.org/remotecontent?filepath=org/jdesktop/swing-worker/1.1/swing-worker-1.1.jar)包含`org.jdesktop.swingworker`其他 jar 所需的类

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-06-04T13:55:36.060

该`org.jdesktop`代码不是 Java SE 的一部分，因此这些类不会在 JRE 中。您需要找到并下载包含这些类的 JAR 文件，然后将其添加到您的 Eclipse 构建路径中。

（下载 JAR 的地方在[这里](http://search.maven.org/remotecontent?filepath=org/jdesktop/appframework/1.0.3/appframework-1.0.3.jar)……但如果此链接断开，您可以轻松进行自己的搜索。转到 Maven Central 或 findjar。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T06:34:03.820

[只需从这里](http://www.java2s.com/Code/Jar/b/Downloadbsaf19jar.htm)下载相应的 jar 文件。你很高兴。将 jar 添加到构建路径。

# jquery - JQuery替换属性源不起作用

> ID：10882121
> 
> 赞同：0
> 
> 时间：2012-06-04T13:24:37.293
> 
> 标签：jquery

我有一个名为“on”（on.png）的按钮和一个名为“off”（off.png）的按钮。它们被设计用作开/关开关，所以当点击时，另一个应该加载。由于我不想处理路径（两者都相同），我正在尝试进行属性替换。然而，下面的 jQuery 代码什么也没做，我找不到错误。任何帮助表示赞赏。

```
$('#btnDining').css({'cursor':'pointer'}).on('click', function(e){
   var src = $(this).attr('src');
   $(this).attr('src', function(i, src){
      return (src.indexOf('off.png')!=-1)?src.replace("_off","_on"):src.replace("_on","_off");
   });
}); // end button click 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:30:02.737

你可以这样做：

```
$('#btnDining').css({'cursor':'pointer'}).on('click', function(e){
   var src = $(this).attr('src');
   src = (src.indexOf('off.png')!=-1)?src.replace("_off","_on"):src.replace("_on","_off");

   $(this).attr('src', src);
}); 
```

而且我认为，这是一种更具可读性的方式..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T13:35:01.207

你把事情复杂化了。尝试这样的事情：

```
$('#btnDining').css('cursor','pointer').on('click', function(e){
   this.src = /_off/.test(this.src) ? 
        this.src.replace("_off","_on") : 
        this.src.replace("_on","_off");
}); // end button click 
```

此外，请考虑使用 CSS 背景图像，因为如果您只是切换类并交换背景图像，您将拥有更有效和更简洁的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T13:26:51.407

您`src`在外部函数的函数范围内定义，然后在内部函数范围内重新定义它。

```
$('#btnDining').css({'cursor':'pointer'}).on('click', function(e){
   var src = $(this).attr('src');
   $(this).attr('src', function(i, source){
      return (src.indexOf('off.png')!=-1)?src.replace("_off","_on"):src.replace("_on","_off");
   });
}); // end button click 
```

我不确定哪个`src`是哪个。但是，更改 attr 函数中的函数变量名称应该可以解决您的问题。

# .net - 如何检查文本框文本已更改

> ID：10882123
> 
> 赞同：0
> 
> 时间：2012-06-04T13:24:43.070
> 
> 标签：.net, wpf, uibutton

我有一个标签为“NAME”的文本框，只要此文本框为空，我就需要禁用一个按钮（即下一个按钮）。这是我的方法

```
private void planName_TextChanged(object sender, TextChangedEventArgs e)
    {
        if (planName.Text.Length != 0)
        {
            parent.EnableOrDisableNextButton("enable") ;
        }
    } 
```

这是第一次工作，但如果用户再次清除名称，则下一个按钮保持启用，或者如果他剪切了整个字段。如何得到这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T13:31:48.733

顺便说一句，这可以在 XAML 中通过绑定更轻松地完成：

```
<Button IsEnabled="{Binding Text.Length, ElementName=planName}" .../> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T13:28:01.110

您需要使用 else 禁用它：

```
 private void planName_TextChanged(object sender, TextChangedEventArgs e) 
        { 
            if (planName.Text.Length != 0) 
            { 
                parent.EnableOrDisableNextButton("enable"); 
            } 
            else
                parent.EnableOrDisableNextButton("disable");
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T13:29:25.807

看起来你只是启用你的按钮，即当条件`planName.Text.Length != 0`满足时，你的代码被执行并且按钮被启用，但是当条件不满足时，没有任何动作并且按钮保持启用状态。

# integration - 持续集成 - 如何在实时构建中添加错误修复？

> ID：10882126
> 
> 赞同：3
> 
> 时间：2012-06-04T13:24:50.943
> 
> 标签：integration, live, continuous

我们正在组织中实施持续集成，出现的问题之一是如何修复实时构建中的错误。

1.  我们是否只是将修复添加到持续集成分支并发布？
2.  从实时版本维护/创建一个发布分支并添加错误修复？

选项1似乎是持续集成所提倡的，但似乎风险很高。选项 2 是历史上已经做过的，并且是低风险的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:33:34.333

这取决于 ！如果您认为您的错误修复涉及深度更改，那么您应该创建一个您工作的分支，否则（通常）错误修复没有那么大的风险，假设修复错误的人知道他在做什么，所以它可以在头上完成。

PS。建立一个分支将迫使你稍后合并，如果在你实施错误修复时头部发生了很多变化，这真的很烦人。

# javascript - 如何使用 Javascript 获取当前正在运行的脚本的路径？

> ID：10882130
> 
> 赞同：6
> 
> 时间：2012-06-04T13:25:00.850
> 
> 标签：javascript, internet-explorer, bho

我们有一个作为浏览器帮助对象 (BHO) 实现的 IE 扩展。我们有一个用 C++ 编写的实用函数，我们将它添加到页面的窗口对象中，以便页面中的其他脚本可以使用它来动态加载本地脚本文件。然而，为了解析这些本地脚本文件的相对路径，我们需要确定调用我们函数的 JavaScript 文件的路径：

*   `myfunc()`用 C++ 编写并暴露给页面的 JavaScript
*   文件：///path/to/some/javascript.js
*   （额外的堆栈帧）

从顶部框架中，我想获取脚本调用`myfunc()`位于 file:///path/to/some/javascript.js 中的信息。

我首先期望我们可以简单地使用该`IActiveScriptDebug`接口从我们的实用程序函数中获取堆栈跟踪。但是，似乎不可能`IActiveScript`从`IWebBrowser2`接口或关联文档中获取接口（请参阅[IE8 上的多帧 JS 的完整调用堆栈](https://stackoverflow.com/questions/4545699/full-callstack-for-multiple-frames-js-on-ie8)）。

我唯一能想到的就是注册我们自己的脚本调试器实现并`myfunc()`闯入调试器。但是，我怀疑这是否会在不提示用户是否要闯入调试器的情况下起作用。

在对这种方法进行更彻底的测试之前，我想检查是否有人有关于这是否可能工作的明确信息和/或可以建议一种替代方法，使用 C++ 编写的函数能够从脚本引擎获取堆栈跟踪调用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:03:20.130

您加载的每个脚本都可能有一个 id，并且调用 myfunc() 的脚本的每个方法都可以将此 id 传递给 myfunc()。这意味着首先您必须修改 myfunct()，最后修改您的脚本和调用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-18T14:46:57.867

这个答案描述了我如何解决我在原始问题中描述的实际问题。问题描述不是很好，因为我在假设如何解决实际上没有根据的问题。我真正想做的是确定当前正在运行的脚本的路径。我已更改问题的标题以更准确地反映这一点。

这实际上很容易实现，因为脚本在加载时在 HTML 文档中执行。因此，如果我当前正在执行一些由`script`标记加载的 JavaScript，则该`script`标记将始终是文档中的最后一个脚本标记（因为文档的其余部分尚未加载）。`src`因此，为了解决这个问题，只需获取最后一个脚本标签的属性的 URL 并根据它解析任何相对路径就足够了。

当然，这不适用于直接嵌入在 HTML 页面中的脚本，但无论如何这都是不好的做法（IMO），所以这似乎不是一个非常重要的限制。

# mysql - 从 Github 获取 twitter 开源 mysql 文件后如何设置？

> ID：10882133
> 
> 赞同：-1
> 
> 时间：2012-06-04T13:25:20.760
> 
> 标签：mysql, twitter, open-source, github

另一个菜鸟问题。我从这个链接下载了开源 mysql 文件：[https](https://github.com/twitter/mysql) ://github.com/twitter/mysql 。在那之后，我不知道我是如何设置它的。我的电脑上安装了 Wamp。我正在尝试从文件中研究 twitter mysql 表。请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:28:01.370

这不包含 Twitter 使用的表格；它包含 Twitter 使用的 mySQL 服务器的修改版本。

如果你想使用它，你需要从源代码构建它。
但是，正如`README`非常清楚的那样，您不应该使用它。

# c# - 如何在图像上制作工具提示？

> ID：10882136
> 
> 赞同：0
> 
> 时间：2012-06-04T13:25:47.473
> 
> 标签：c#, asp.net

我正在尝试找到一些东西来在图像上制作工具提示。

例如： ![在此处输入图像描述](../Images/e679e9c6a730dc85b7264c20a3d64dca.png)

我不知道我该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T13:27:52.020

我认为`System.Web.UI.WebControls.Image`有一个 Tooltip 属性

[asp的MSDN入口：图像控制](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.image.aspx)^

```
<asp:Image AlternateText="string" CssClass="string" ID="string" runat="server" ToolTip="string"/> 
```

否则，`alt`html 图像控件的属性就像一个工具提示

# sql - SQL 查询卡在无限循环中

> ID：10882137
> 
> 赞同：0
> 
> 时间：2012-06-04T13:25:52.603
> 
> 标签：sql, infinite-loop

我正在我的数据库上运行一个非常简单的 SQL 查询，它似乎一遍又一遍地返回相同的记录，从而创建了一个无限循环。也许我遗漏了一些明显的东西，但我没有看到。这是查询：

```
select s.customer as 'Customer',
    s.store as 'Store',
    s.item as 'Item',
    d.dlvry_dt as 'Delivery',
    i.item_description as 'Description',
    mj.major_class_description as 'Major Description',
    s.last_physical_inventory_dt as 'Last Physical Date',
    s.qty_physical as 'Physical Qty',
    s.avg_unit_cost as 'Unit Cost',
    [qty_physical] * [avg_unit_cost] as Value
from database.DELIVERY d,
    database.STORE_INVENTORY s,
    database.ITEM_MASTER i,
    database.MINOR_ITEM_CLASS mi,
    database.MAJOR_ITEM_CLASS mj,
    database.STORE_INVENTORY_ADJUSTMENT sa
where sa.store = s.store
    and s.last_physical_inventory_dt between '6/29/2011' and '7/2/2011'
    and s.customer = '20001'
    and s.last_physical_inventory_dt is not null 
```

有一条记录落在 2011 年 7 月 1 日，它会永远重复，直到我取消查询。

对防止这种情况有任何帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T13:31:08.320

您正在加入所有这些表：`database.DELIVERY`、`database.ITEM_MASTER`、`database.MINOR_ITEM_CLASS`和`database.MAJOR_ITEM_CLASS`- 而不指定*如何*加入它们。您需要指定这些表如何与其余表连接。

**如果这些表中的每一个只有 100 行，它会给你 100 * 100 * 100 * 100 行（1 亿）行！（参见[笛卡尔连接](http://www.orafaq.com/wiki/Cartesian_join)）**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T13:36:37.650

您尚未加入所有表格。例如，表 MINOR_ITEM_CLASS、database.MAJOR_ITEM_CLASS 和 database.ITEM_MASTER 缺少连接。缺少连接会导致查询引擎对未显式连接的表执行笛卡尔连接。所以你没有无限循环，你只是同一记录的许多重复副本。最终您的查询将停止。

为这些表添加适当的连接 & 让我们看看它是如何进行的。您也可以尝试添加 DISTINCT 关键字。

# objective-c - 将 UITapGestureRecognizer 连接到 UIView

> ID：10882139
> 
> 赞同：0
> 
> 时间：2012-06-04T13:25:56.460
> 
> 标签：objective-c, ios5, xcode4

我正在尝试将手势连接到 UIView，以便我可以点击对象，但它不起作用。我究竟做错了什么？

形状.h

```
#import <UIKit/UIKit.h>

@interface Shape : UIView; 

- (id) initWithX: (int)xVal andY: (int)yVal;

@end 
```

形状.m

```
#import "Shape.h"

@implementation Shape 

- (id) initWithX:(int )xVal andY:(int)yVal {
    self = [super init];    
    UIView *shape = [[UIView alloc] initWithFrame:CGRectMake(xVal, yVal, 10, 10)];
    shape.backgroundColor = [UIColor redColor];
    shape.userInteractionEnabled = YES;     
    [self addSubview:shape];
    return self;
}

@end 
```

修改代码：以下代码在主 ViewController 中。我已经从 Shape 类中删除了 UITapGestureRecognizer。如果我进行以下更改，则代码可以工作，但是响应点击手势的是“框”，而不是“形状”：[shape addGestureRecognizer:tap]; 到 [box addGestureRecognizer:tap];

```
- (void)handlerTap:(UITapGestureRecognizer *)recognizer {
    //CGPoint location = [recognizer locationInView:[recognizer.view superview]];
    NSLog(@"Success");
}
-(void)drawShapes{
    NSLog(@"Draw");
    if(!box){
        box = [[UIView alloc] initWithFrame:CGRectMake(0, 0, screenWidth, screenHeight-100)];
        box.backgroundColor = [UIColor colorWithRed: 0.8 green: 0.8 blue: 0.0 alpha:0.2];
        [self.view addSubview:box];
    }
    for (int i = 0; i<5; i++) {
        int x = arc4random() % screenWidth;
        int y = arc4random() % screenHeight;
        Shape * shape =[[Shape alloc] initWithX:x andY:y ];
        [box addSubview:shape];
        UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] init];
        [tap setNumberOfTapsRequired:1];
        [tap addTarget:self action:@selector(handlerTap:)];
        [box addGestureRecognizer:tap];     
    }
} 
```

解决方案：我了解到 self = [super init]; 需要更改以包含一个 CGRECT，该 CGRECT 定义了放置 *shape 的视图的边界。self = [super initWithFrame:CGRectMake(xVal, yVal, 10, 10)];

此外，*shape 需要放置在 0,0 以确保其正确放置在其父级中。UIView *shape = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 10, 10)];

```
#import "Shape.h"

@implementation Shape 

- (id) initWithX:(int )xVal andY:(int)yVal {
    self = [super initWithFrame:CGRectMake(xVal, yVal, 10, 10)];    
    UIView *shape = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 10, 10)];
    shape.backgroundColor = [UIColor redColor];
    shape.userInteractionEnabled = YES;     
    [self addSubview:shape];
    return self;
}
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T13:28:36.747

您应该将手势识别器的目标设置为`self`，而不是视图，因为您在类中实现了该`handlerTap:`方法。`Shape`

# jquery - 如果高度小于 parent.height，则垂直居中图像，否则将高度限制为 100%

> ID：10882141
> 
> 赞同：1
> 
> 时间：2012-06-04T13:26:05.597
> 
> 标签：jquery, css, html

我正在使用带有全屏父 div 的 html5-fullscreen 模式，我想在其中垂直居中图像，但前提是图像小于父 div（即屏幕大小）。我还想将图像限制为`max-height`= 父级的 100%，以避免在图像大于屏幕时放大。

我可以使用两个 div（一个`display:table`和另一个`display:table-cell`）将图像居中，但我不能同时将图像设置`max-height`为不超过父 div。我可以通过使用来完成后者，`position:absolute; max-height:100%;`但是居中不适用于较小的图像。

示例标记：

```
<div id="fullscreen-container">
    <div id="fullscreen-img-wrapper">
        <img id="fullscreen-img" src="/images/test-6000x4000.png" />
    </div>
</div> 
```

非常感谢任何如何实现这一点的想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:47:50.533

```
<style>
#fullscreen-img-wrapper { display: table-cell;
    margin-left: auto;
    margin-right: auto;
    vertical-align: middle;
    width: 100%; }
#fullscreen-img { width:100%; }
</style>

<div id="fullscreen-container">
    <div id="fullscreen-img-wrapper">
        <img id="fullscreen-img" src="/images/test-6000x4000.png" />
    </div>
</div> 
```

# java - HttpPost - http 请求方法的类型

> ID：10882143
> 
> 赞同：1
> 
> 时间：2012-06-04T13:26:13.167
> 
> 标签：java, android, http, post, http-post

嗨 :) 我遇到了一个简单的问题，但很烦人。我正在尝试使用 HttpPost 类发送 http post 请求

这是返回 InputStream 的方法的一部分：

```
 HttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url+path); 
        ArrayList<NameValuePair> paramsList = new ArrayList<NameValuePair>();
        paramsList.add(new BasicNameValuePair("key1", value1));
        paramsList.add(new BasicNameValuePair("key2", value2));
        paramsList.add(new BasicNameValuePair("key3", value3));

        httpPost.setEntity(new UrlEncodedFormEntity(paramsList));

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        InputStream is = httpEntity.getContent();
        return is; 
```

但问题出在服务器上，因为服务器“认为”我发送的是 GET 请求而不是 POST。问题是：错误在哪里？我在其他应用程序中使用类似的代码部分，它工作正常。

干杯。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:33:06.517

请试试

```
httpPost.setEntity(new UrlEncodedFormEntity(paramsList, HTTP.UTF_8)); 
```

代替

```
httpPost.setEntity(new UrlEncodedFormEntity(paramsList)); 
```

# iphone - 错误：iOS 不支持使用两阶段旋转动画

> ID：10882144
> 
> 赞同：-2
> 
> 时间：2012-06-04T13:26:14.187
> 
> 标签：iphone, objective-c, ios5, ios-simulator

我正在开发条形码扫描应用程序。我得到了*示例源代码*。扫描图像时，我从保存了一些条形码图像的照片库中获取图像。

但不会扫描并在控制台中显示为 **2012-06-04 14:09:00.136 阅读器示例 [467:207] 旋转多个视图控制器或视图控制器不是窗口委托时，不支持使用两阶段旋转动画**

这个错误日志是关于什么的，任何人都可以帮助我。

**任何帮助表示赞赏**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T14:44:20.657

> 所以我该怎么做

鉴于控制台消息，我会说您不应该使用两阶段旋转。也就是说，不使用方法`-[will/did]AnimateFirstHalfOfRotationToInterfaceOrientation:`和，而是`-[will/did]AnimateSecondHalfOfRotationToInterfaceOrientation:`使用较新的一步旋转方法`-willRotateToInterfaceOrientation:duration:`和`-didRotateFromInterfaceOrientation:`。

# javascript - 使用 js 调整 iframe 的大小在 https 时停止工作

> ID：10882148
> 
> 赞同：0
> 
> 时间：2012-06-04T13:26:24.793
> 
> 标签：javascript, jquery, https

我想做的是调整fancybox iframe的大小，我认为我通过调用成功了：

```
parent.jQuery('#fancybox-inner').css({'height': '450px'});
parent.jQuery('#fancybox-wrap').css({'height': '550px'}); 
```

但是当将它部署到我在 https 中工作的舞台区域时，这个解决方案不起作用，我猜它与 https 部分有关。我试图谷歌这个，但我没有找到任何合适的解决方案。可以请帮助我，并记住我是一个 JS 新手。

**代码：**

```
jQuery().ready(function() {
    jQuery('#no_user').click(function () { 
        if (jQuery(".temp_expand").css("display") == "none") {
            jQuery(".temp_expand").slideDown();
                parent.jQuery('#fancybox-inner').css({'height': '450px'});
                parent.jQuery('#fancybox-wrap').css({'height': '550px'});
            }
            else {
                jQuery(".temp_expand").slideUp();
                jQuery(".temp_expand").css("display", "none");                    
                parent.jQuery('#fancybox-inner').css({'height': '850px'});
                parent.jQuery('#fancybox-wrap').css({'height': '950px'});
            }
            }).toggle(function() {
                jQuery('#temp_no_user').text("#{messages['login']}");
            }, function() {
                jQuery('#temp_no_user').text("#{messages['register']}");
            });           

        }); 
```

**编辑开始**

我收到一个 JS 错误：

```
Error: Permission denied to access property 'jQuery'
Source File: https://stage.temp.se/login/login
Line: 185 
```

**编辑结束**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:41:12.067

听起来您的页面为 https 而框架源为 http - 反之亦然。如果是这种情况，这可能会有所帮助：

[通过 Javascript 从 https 页面更新 http 父页面](https://stackoverflow.com/questions/1125238/updating-a-http-parent-page-from-a-https-page-via-javascript)

[允许 HTTP iFrame 在 HTTPS 父框架上调用 JavaScript](https://stackoverflow.com/questions/3331548/allowing-http-iframe-to-call-javascript-on-https-parent-frame)

# java - 路线图，爪哇

> ID：10882149
> 
> 赞同：0
> 
> 时间：2012-06-04T13:26:35.817
> 
> 标签：java, google-maps

我正在尝试在我的桌面 Java 应用程序中实现路线图。

我的项目的想法是允许用户将点放置在拍摄特定照片的地图上。

我打算使用谷歌地图，但阅读 T&C，我注意到它只能在网络上使用。我已经设法在一些免费的网络托管 (http://jwasley.netii.net) 上实现了一个地图 - 但它不会显示在我创建的 Java 网络浏览器中。

这是最好的方法，还是有路线图的 API。我确实查看了 OpenStreetMap，但找不到任何像样的教程。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:51:43.257

我建议使用 jxmapkit 作为显示地图的 Swing 框架。它包括强大的功能，例如覆盖。它是 swingx 项目的一部分。我相信它支持许多不同的映射存储库，包括 OpenStreetMap。

你可以在这里看到一个例子：

[http://today.java.net/pub/a/today/2007/10/30/building-maps-into-swing-app-with-jxmapviewer.html](http://today.java.net/pub/a/today/2007/10/30/building-maps-into-swing-app-with-jxmapviewer.html)

如果您想了解更多，那么开源项目 iphoneanalyzer 会广泛使用它。该代码可在此处获得：

[http://iphoneanalyzer.svn.sourceforge.net/viewvc/iphoneanalyzer/trunk/gui/src/main/java/com/crypticbit/ipa/ui/swing/](http://iphoneanalyzer.svn.sourceforge.net/viewvc/iphoneanalyzer/trunk/gui/src/main/java/com/crypticbit/ipa/ui/swing/)

# objective-c - iOS上的HTML到PDF转换？

> ID：10882151
> 
> 赞同：17
> 
> 时间：2012-06-04T13:26:38.693
> 
> 标签：objective-c, ios, pdf

我知道截取 UIWebView 的屏幕截图并将其转换为 PDF，但我需要生成正确的 pdf（文本作为文本而不是屏幕截图）。Save2PDF 是一个创建正确 PDF 的应用程序。有人知道他们是如何做到的吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-12T11:29:09.537

I created a class based on every good advice I found around. I've been digging a lot and I hope my class will offer some good start for anyone trying to create multi-page PDF directly out of some HTML source.

You'll find the whole code here with some basic sample code : [https://github.com/iclems/iOS-htmltopdf](https://github.com/iclems/iOS-htmltopdf)

I had just the same issue as you and my requirements were: - full PDF (real text, no bitmap) - smart multi-pages (compared to cutting a full height webview every X pixels...)

Thus, the solution I use is pretty nice as it resorts to the same tools iOS uses to split pages for print.

Let me explain, I setup a UIPrintPageRenderer based on the web view print formatter (first tip) :

```
UIPrintPageRenderer *render = [[UIPrintPageRenderer alloc] init];

[render addPrintFormatter:webView.viewPrintFormatter startingAtPageAtIndex:0];

CGRect printableRect = CGRectMake(self.pageMargins.left,
                              self.pageMargins.top,
                              self.pageSize.width - self.pageMargins.left - self.pageMargins.right,
                              self.pageSize.height - self.pageMargins.top - self.pageMargins.bottom);

CGRect paperRect = CGRectMake(0, 0, self.pageSize.width, self.pageSize.height);

[render setValue:[NSValue valueWithCGRect:paperRect] forKey:@"paperRect"];
[render setValue:[NSValue valueWithCGRect:printableRect] forKey:@"printableRect"];

NSData *pdfData = [render printToPDF];

[pdfData writeToFile: self.PDFpath  atomically: YES]; 
```

In the meantime, I have created a category on UIPrintPageRenderer to support:

```
- (NSData*) printToPDF
{
    NSMutableData *pdfData = [NSMutableData data];

    UIGraphicsBeginPDFContextToData( pdfData, CGRectZero, nil );

    [self prepareForDrawingPages: NSMakeRange(0, self.numberOfPages)];

    CGRect bounds = UIGraphicsGetPDFContextBounds();

    for ( int i = 0 ; i < self.numberOfPages ; i++ )
    {
        UIGraphicsBeginPDFPage();

        [self drawPageAtIndex: i inRect: bounds];
    }

    UIGraphicsEndPDFContext();

    return pdfData;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-04T13:49:21.533

这个问题的重点是**文本作为文本而不是截图**

以下答案显示了如何在 pdf 容器中制作位图屏幕截图...

```
#import <QuartzCore/CALayer.h>

- (NSString *)pdfPath {
  NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
  NSString *documentsDirectory = [paths objectAtIndex:0];
  NSString *writableDBPath = [documentsDirectory stringByAppendingPathComponent:@"tmp.pdf"];
  return writableDBPath;
}

- (NSDictionary *)pdfContextDictionary {
  NSDictionary *d = [NSDictionary dictionaryWithObjectsAndKeys:@"J. P. Author", kCGPDFContextAuthor,
                     @"My Cool App", kCGPDFContextCreator,
                     @"This is the Output", kCGPDFContextTitle,
                     nil];
  return d;
}

- (void)printToPDF {
  NSString *path = [self pdfPath];
  UIView *displayView = self.view;
  CGRect pageRect = displayView.bounds;
  if (UIGraphicsBeginPDFContextToFile(path, pageRect, [self pdfContextDictionary]) == NO) {
    return; // error
  }
  UIGraphicsBeginPDFPage();
  CGContextRef context = UIGraphicsGetCurrentContext();
  CALayer *layer = displayView.layer;
  [layer renderInContext:context];
  UIGraphicsEndPDFContext();  
  NSLog(@"[%@ %@] %@", NSStringFromClass([self class]), NSStringFromSelector(_cmd), path);
} 
```

# stored-procedures - 嵌套选择语句

> ID：10882153
> 
> 赞同：0
> 
> 时间：2012-06-04T13:26:46.057
> 
> 标签：stored-procedures

如果大于 0，我正在尝试根据案例数返回结果，但是当我尝试执行存储过程时，我收到一条错误消息：操作数类型冲突：uniqueidentifier 与 tinyint 不兼容。这适用于我在 where 子句中的嵌套 select 语句。

```
SELECT 
      O.OfficeId,
      O.OfficeName AS Name,
      AT.Description AS CaseActivity,
      SUM(A.Duration) AS [CaseMinutes], 
      CAST(SUM(A.Duration) AS FLOAT) / 60 AS [CaseHours],  
      COUNT(A.ActivityId) AS Activities,
      COUNT(DISTINCT A.CaseId) AS Cases,
      MIN(CAST(A.Duration AS FLOAT) / 60) AS [Case Min Time],
      MAX(CAST(A.Duration AS FLOAT) / 60) AS [Case Max Time],
      SUM(CAST(A.Duration AS FLOAT) / 60) / COUNT(A.ActivityId) AS [Case Avg Time],
      SUM(CAST(A.Duration AS FLOAT) / 60) AS [Case TotalHours]
  FROM Activity A
      INNER JOIN ActivityType AT ON A.ActivityTypeId = AT.ActivityTypeId
      INNER JOIN ActivityEntry AE ON A.ActivityEntryId = AE.ActivityEntryId
      INNER JOIN [Case] C ON A.CaseId = C.CaseId
      INNER JOIN [Office] O ON AE.OfficeId = O.OfficeId
      INNER JOIN [User] U ON C.CreatedByUserId = U.UserId
  WHERE  A.CaseId in(select A.CaseId from Activity where A.CaseId > 1 AND .dbo.DateOnly(AE.ActivityDate) BETWEEN @BeginDate AND @EndDate)
  GROUP BY 
        O.OfficeId,
        O.OfficeName,
        AT.Description 
```

******来自存储过程的期望目标* *****
我想从这个存储过程返回结果，其中案例计数大于 0。目前，此存储过程返回案例 0 或更大的所有活动。我只对获取案例大于 0 的活动感兴趣。在我的 where 子句中，我试图插入另一个 select 语句，它将结果过滤到案例 > 0。**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:32:32.390

**错误信息告诉你**。

其中一项比较是比较两列不同类型的内容。

查看表结构并查看您正在比较的哪些列具有唯一标识符，哪些具有整数，然后查看 sql 并查看您正在比较哪些列。**

# wpf - DataBinding到wpf中的上下文菜单？

> ID：10882156
> 
> 赞同：1
> 
> 时间：2012-06-04T13:26:55.563
> 
> 标签：wpf, xaml, data-binding, user-controls, command

我有一个`UserControl`, 定义如下：

```
<UserControl x:Name=userControlName>   
    <UserControl.Resources>      
        <Style TargetType="{x:Type MyControl}">
            <Setter Property="ContextMenu">
                <Setter.Value>
                    <ContextMenu >
                        <MenuItem Header="ITEM"
                                  Command="{Binding ElementName=userControlName, Path=DeleteCommand">                          
                        </MenuItem>
                    </ContextMenu>
                </Setter.Value>
            </Setter>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type controlType}">                        
                        <Grid>                            
                            <!--MyContentHere-->
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>        
        </Style>     
    </UserControl.Resources>

    <Grid>
       <!--Content -->
       <ListBox>
        <ListBoxItem> <!--is of Type MyControl-->
       </ListBox>
    </Grid>
</UserControl> 
```

这不起作用，因为`DataContext`未找到 userControlName。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:41:18.480

您应该尝试使用[`RelativeSource`](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.relativesource.aspx)这样的 WPF 绑定：

```
 <ContextMenu >
    <MenuItem Header="ITEM"
          Command="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=DataContext.DeleteCommand}">                          
    </MenuItem>
</ContextMenu> 
```

# preg-replace - 从 html 标签和特殊字符中清除字符串

> ID：10882157
> 
> 赞同：0
> 
> 时间：2012-06-04T13:26:58.993
> 
> 标签：preg-replace, strip-tags

我想从 html 标签、html 空格字符和类似的字符中清除我的文本`< > [ ] / \ * ,`

我用 `$str = preg_replace("/&#?[a-zA-Z0-9]+;/i", "", $str);` 它与 html 特殊字符配合得很好，但有些字符不能删除，例如：( `/*/*]]>*/`)

如何删除这些字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:45:15.467

如果你真的像看起来那样使用 php，你可以使用：

```
$str = htmlspecialchars($str); 
```

所有 HTML 字符都将被转义（这可能比仅仅剥离它们更好）。如果你真的只想过滤这些字符，你需要做的是在字符列表中转义这些字符：

```
$str = preg_replace("/[\&#\?\]\[\/\\\<\>\*\:\(\);]*/i","",$str); 
```

注意只有一个“/[]*/i”，我删除了 a-zA-Z0-9，因为你应该想要这些字符。你也可以只分类想要的字符来输入你的字符串（会给你带来重音的麻烦喜欢 á é ü 如果你使用它们，你必须指定每个接受的字符）：

```
$str = preg_replace("/[^a-zA-Z0-9áÁéÉíÍãÃüÜõÕñÑ\.\+\-\_\%\$\@\!\=;]*/","",$str); 
```

另请注意，转义字符永远不会太多，除非例如对于间隔（\a-\z 会很好，\a-\z 会匹配 a、或 - 或 z）。

我希望它有所帮助。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T20:00:35.973

html标签的正则表达式为：

```
/\<(.*)?\>/ 
```

所以使用这样的东西：

```
// The regular expression to remove HTML tags
$htmltagsregex = '/\<(.*)?\>/';

// what shit will substitute it
$nothing = '';

// the string I want to apply it to
$string = 'this is a string with <b>HTML tags</b> that I want to <strong>remove</strong>';

// DO IT
$result = preg_replace ($htmltagsregex,nothing,$string); 
```

它会回来

> 这是一个带有我要删除的 HTML 标记的字符串

就这样

# dart - dart 是否支持客户端 SSL/TLS 连接？

> ID：10882158
> 
> 赞同：5
> 
> 时间：2012-06-04T13:27:02.563
> 
> 标签：dart

我正在考虑使用 Dart 编写 Apple 推送通知服务器。Dart 是否支持客户端 SSL/TLS 证书？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T23:43:38.753

是的！Dart VM 现在支持 SSL/TLS 和 HTTPS。

请参阅现已关闭的[http://code.google.com/p/dart/issues/detail?id=3950](http://code.google.com/p/dart/issues/detail?id=3950)和[http://code.google.com/p/dart/issues/detail?id=3593 。](http://code.google.com/p/dart/issues/detail?id=3593):)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T15:13:00.977

[Dart 支持使用SecureSocket](http://api.dartlang.org/docs/bleeding_edge/dart_io/SecureSocket.html)的SSL/TLS 客户端连接。它还支持使用[SecureServerSocket](http://api.dartlang.org/docs/bleeding_edge/dart_io/SecureServerSocket.html)的安全服务器套接字（如果您需要侦听 VM 上的安全端口，请使用它）。

请注意，普通的 HttpClient 将自动为您的浏览器连接处理 HTTPS，因此在这些情况下不需要额外的代码。

# c# - MonoTouch 连接到 Azure ACS、Azure SQL / Azure WCF

> ID：10882159
> 
> 赞同：2
> 
> 时间：2012-06-04T13:27:04.550
> 
> 标签：c#, objective-c, ios, azure, xamarin.ios

我将制作 iOS 应用程序，并想知道使用 Cocoa 使用新语言 Objective C 或使用 Mono-Touch 使用旧语言 C# 进行开发之间的区别

应用程序的要求应该是使用 azure 和存储/检索信息以经常存储在本地设备上，内容浏览和令牌登录到门户，截止日期是从今天起 2 个月，我以前从未开发过任何 iPhone / iPad 应用程序。我可以知道哪个更容易开始吗？ Mono 有什么资源吗？虽然我发现如果我可以使用旧的编程语言那就太好了，但似乎没有这样的东西来支持 monoTouch azure 开发......

谢谢你的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T17:23:51.977

首先，您在一篇文章中提出了很多问题。关于您的第一个问题，答案非常主观。Objective C/Cocoa 是 iOS 开发的原生语言，但是使用 MonoTouch，将要求您依赖 MonoTouch 提供的任何内容。因此，如果它不是 MonoTouch 的一部分，您将无法做到这一点。在这里你可以找到很多其他 SO 用户的意见：[MonoTouch & C# VS Objective C for iphone app](https://stackoverflow.com/questions/2696518/monotouch-c-sharp-vs-objective-c-for-iphone-app)

我可以在任何移动设备上为您提供一些有关 Windows Azure 开发的指导。从任何移动设备连接到 Windows Azure 上运行的不同服务都是相同的。如果应用程序在 Azure 上运行并公开 HTTP 或 HTTPS 端点，或者对于 Azure 存储，您正在从代码进行直接 RESTful 调用，则大多数服务都提供直接 HTTP/HTTPS 连接。因此，无论您决定在移动设备中使用哪种编码语言，您都可以使用本地语言连接到 Windows Azure。

![在此处输入图像描述](../Images/855b58b3e96829b5c08b94e8c4580b16.png)

因此，如果您选择 Objective C，那么您可以使用[适用于 Windows Azure 的 iOS SDK](https://github.com/WindowsAzure-Toolkits/wa-toolkit-ios)。但是，如果您决定使用 MonoTouch，则需要使用 WebClient API 来创建您自己的 HTTP/HTTPS 连接，[此处](http://weblogs.thinktecture.com/cweyer/2011/12/cross-devicecross-location-pub-sub-using-windows-azure-service-bus-topics-subscriptions-in-ios-with-monotouch.html)描述的内容可能比较复杂。在 Internet 上，您可能会找到一些实验级代码来使用 Azure 服务和 MonoTouch 应用程序，因此您可以自己尝试让事情正常运行。

我个人不会使用 MonoTouch 在 iOS 设备上开发应用程序，如果我严重依赖 Windows Azure Services，我会选择 iOS Windows Azure SDK 通过原生代码连接 Azure Service。

# java - 其他域中的服务器验证

> ID：10882160
> 
> 赞同：0
> 
> 时间：2012-06-04T13:27:11.347
> 
> 标签：java

我需要解决我遇到的一般问题。

我有一个名为域的站点`foo.com`和一个名为的跨域站点`foo_goo.com`

其中`foo.com`有`form`几个字段：用户名，名字，姓氏，电子邮件......

当用户按下**提交**按钮（在表单中）时，我需要对此字段进行服务器验证，进行验证的服务器位于跨域（`foo_goo.com`）中。

这个问题有什么解决办法吗？（ajax、json、servlet...）

为什么要这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T13:33:05.077

我会向您推荐一个 php、代理，但还有其他解决方案，如 JSONP 或 HTML5 中的一个功能可能会对您有所帮助：[跨域解决方案完整客户端](https://stackoverflow.com/questions/551363/lets-solve-cross-domain-ajax-totally-on-the-client-using-script-tags)

我发现有趣的主要选项：

*   JSONP
*   PHP 代理
*   HTML5 window.postMessage

# java - 从画布java创建位图

> ID：10882164
> 
> 赞同：0
> 
> 时间：2012-06-04T13:27:37.963
> 
> 标签：java, android, android-canvas, bitmapfactory

**解决方案**

感谢@ChandraSekhar 的建议，问题是我将不可变位图传递给画布构造函数。解决方案是在使用 BitmapFactory.decodeFile() 时创建它的副本；

```
Bitmap bmp = BitmapFactory.decodeFile(imageURL).copy(Bitmap.Config.ARGB_8888, true); 
```

所以我有一个位图，我正在使用 bitmapFactory.decodeFile() 并且这有效。我能够创建位图，然后我需要创建一个画布，这就是事情变得奇怪的地方。

这是正在发生的事情的流程。我捕获一张图像，然后将其传递给确定其大小的 functionA，然后将其保存并返回其文件路径。（我正在使用 Phonegap Cordova）

然后我将该 URL 传递回我的 java 并使用之前保存的图像并在 functionB 中对其进行操作

**有问题的代码：**

```
// GET URL TO IMAGE
final JSONObject options = optionsArr.optJSONObject(0);
String imageURL = options.optString("image");

// create image bitmap
Bitmap bmp = BitmapFactory.decodeFile(imageURL);
bmp = Bitmap.createBitmap(bmp,0,0,655,655);

/* Everything works fine until this point */

// create image canvas
Canvas canvas = new Canvas(bmp);
Bitmap one = Bitmap.createBitmap(bmp);
canvas.drawBitmap(one,0,0,null); 
```

我没有收到任何错误，它只是挂起。这是裤子的关键 - 如果我运行另一个函数，首先说 functionB 一个有效，但另一个无效。

我想也许我需要刷新并关闭我的第一个 FileOutputStream，但这似乎没有任何效果。我为所有元素、位图、画布和文件输出流尝试了不同的变量名称。

这是完整功能的示例...注意：因为我使用的是 phonegap / cordova 我正在返回一个字符串

```
public String none(JSONArray optionsArr) {

    // SET FILE PATH
            String filePath = "";
            File path = new File(Environment.getExternalStorageDirectory()+"/myApp/");

            // TMP.jpg is where we store our temporary version of the image
            File NewFilePath = new File(path, "tmp_NBB.jpg");

            // CREATE FOLDERS IF NEEDED
            try{
                boolean success = false;

                if(!path.exists()){
                    success = path.mkdir();
                }
                if (!success){ 
                    Log.d("NONE","Folder not created.");
                }
                else{
                    Log.d("NONE","Folder created!");
                }
            }
            catch (Exception e){
                e.printStackTrace();
            }
            // GET URL TO IMAGE
                final JSONObject options = optionsArr.optJSONObject(0);
                String imageURL = options.optString("image");

                // create image bitmap
                Bitmap bmp = BitmapFactory.decodeFile(imageURL);
                bmp = Bitmap.createBitmap(bmp,0,0,655,655);

                // create image canvas
                Canvas canvas = new Canvas(bmp);
                Bitmap none = Bitmap.createBitmap(bmp);
                canvas.drawBitmap(none,0,0,null);

                // SAVE IMAGE
                try {
                    // OUTPUT STREAM
                    FileOutputStream out = new FileOutputStream(NewFilePath);
                    none.compress(Bitmap.CompressFormat.JPEG, 100, out);

                    // GET FILE PATH
                    Uri uri = Uri.fromFile(NewFilePath);
                    filePath = uri.toString();

                    try{
                        out.flush();
                        out.close();

                        // RETURN FILE PATH
                        return filePath;
                    }
                    catch (Exception e){
                        e.printStackTrace();
                    }

                } catch (Exception e) {
                    e.printStackTrace();
                }
            return filePath;
        } 
```

就像我说的那样，这适用于第一张图片，但是当我尝试再次打开此图片时，根据返回的文件路径，它会在创建画布行中分块。

编辑：我使用的图像路径如下所示：/mtn/sdcard/myApp/tmp.jpg 想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T13:31:02.070

```
Bitmap one = Bitmap.createBitmap(bmp); 
```

在上面的代码中，**bmp**是一个 Bitmap ，您正在从**bmp创建****另一个**Bitmap 对象。

 **删除该行并尝试更改

```
canvas.drawBitmap(one,0,0,null); 
```

到

```
canvas.drawBitmap(bmp,0,0,null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T13:44:07.743

您确定您运行的设备支持图像大小：655x655？是否创建位图？**

# ios - iOS：从不同的“路线”检索音量

> ID：10882165
> 
> 赞同：2
> 
> 时间：2012-06-04T13:27:45.353
> 
> 标签：ios, audio

我想将当前音量保存在我的应用程序中，可以通过使用 轻松访问，`[MPMusicPlayerController iPodMusicPlayer]`并且我可以通过订阅路由更改通知来收听不同的硬件“路由”（这样我就可以检测耳机等）。

但是，我无法弄清楚如何执行以下操作；同时获取 iOS 设备和耳机的音量。现在，我只能检索当前活动硬件路由的音量。

这个问题有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-26T03:22:45.683

I'm not sure if this is enough of an answer, but by the best I could manage was to do as you say and retrieve the volume of the headphones when they are the active route. I then compare this to the volume prior.

To get the headphone volume when plugged in, you can subscribe to `AVAudioSessionRouteChangeNotification`:

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(audioRouteDidChange:) name:AVAudioSessionRouteChangeNotification object:nil]; 
```

And then comparing the current volume in the callback to a last recorded volume.

```
- (void) audioRouteDidChange:(NSNotification*)notificaiton {
    AVAudioSessionRouteChangeReason routeChangeReason = [[notificaiton.userInfo valueForKey:AVAudioSessionRouteChangeReasonKey] intValue];        

    if (routeChangeReason == AVAudioSessionRouteChangeReasonNewDeviceAvailable) {
        AVAudioSessionRouteDescription* route = [[AVAudioSession sharedInstance] currentRoute];
        for (AVAudioSessionPortDescription* desc in [route outputs]) {
            if ([[desc portType] isEqualToString:AVAudioSessionPortHeadphones])
                [self saveHeadphoneVolume];
        }
    }
} 
```

(This code will only work when headphones are plugged in after the app is started, but you could of course check the route and its volume before adding the notification observer.)

# iphone - Flash：如何为附近类似颜色动画剪辑的数组中的网格编写翻转编码？

> ID：10882166
> 
> 赞同：1
> 
> 时间：2012-06-04T13:27:48.313
> 
> 标签：iphone, actionscript-3, flash, ipad, actionscript

Flash AS3：我只需要知道如何检查类似颜色动画剪辑的翻转效果条件，这些动画剪辑在网格中的一组随机颜色动画剪辑中附近，而它在 Flash AS3 中使用 2D 数组。或者
我只需要滚动我写的 over 事件是 onBoxOver 事件函数，因为我的目标对象只是得到翻转或得到 alpha 变化。但我需要知道如何为附近的相似颜色进行翻转。

```
 The code which i wrote is below for your reference. 
```

闪存 AS3::

```
package 
{
    import flash.display.MovieClip;
        import flash.events.MouseEvent;

        public class playGame extends MovieClip
        {
            public static var totalRowBoxes:Number = 13;
            public static var totalColumnBoxes:Number = 12;
            public static var rowGap:Number = 30;
            public static var columnGap:Number = 30;
            public static var totalColorBoxes:Number = 8;
            public static var boxCollection:Array = new Array();
            public static var boxCollection1:Array = new Array();

            public function playGame(theGame:main)
            {
                // constructor code
                addBoxOnStage();
            }

            private function addBoxOnStage():void
            {
            var borderCont:Banner = new Banner();
                var scoreclipCont:scoreclip = new scoreclip();
                addChild(borderCont);
                addChild(scoreclipCont);
                scoreclipCont.x = 0;
                scoreclipCont.y = 0;
                createLevel(1);

                for (var i:Number = 0; i<totalRowBoxes; i++)
                {
                    boxCollection[i] = new Array(i);
                    for (var j:Number = 0; j<totalColumnBoxes; j++)
                    {
                        var squareCont:square = new square();
                        squareCont.x = 30 + (i * rowGap);
                        squareCont.y = 30 + (j * columnGap);
                        squareCont.name = i + "_" + j;
                        var boxCollection1:Array = new Array();
                        boxCollection1[0] = Math.round(Math.random() * 8);
                        boxCollection1[1] = squareCont;
                        var boxColour:Number = new Number();
                        boxColour = boxCollection1[0];
                        boxCollection[i][j] = boxCollection1[1];
                        addChild(squareCont);
                        squareCont.gotoAndStop(boxCollection1[0]);
                        squareCont.addEventListener(MouseEvent.MOUSE_OVER, onBoxOver);                       squareCont.addEventListener(MouseEvent.MOUSE_OUT, onBoxOut);
                               squareCont.addEventListener(MouseEvent.CLICK, onBoxClick);
                        }
                }
                }

            private function onBoxClick(eve:MouseEvent):void
            {

            }

            private function onBoxOver(eve:MouseEvent):void
            {
                for (var i:Number=0; i< totalRowBoxes; i++)
                {
                    for (var j:Number=0; j<totalColumnBoxes; j++)
                    {
                        eve.target.alpha = 0.3;
                        // trace(boxCollection[i][j].currentFrame)
                        trace(eve.target);
                    }

        }
            }

            private function onBoxOut(eve:MouseEvent):void
            {
                eve.target.alpha = 1;
            }

            private function createLevel(lvl):void
            {

            }

        }
       }

   ![My Game screenshot here colourbox][1]

    Thanks in Advance. Greatly Appreciable for the reply. 
```

嗨，这是我的项目的图像或屏幕截图。在该图像中有 8 种颜色随机排列。每当我在任何框上进行鼠标定位或翻转时，条件应检查我正在翻转的框周围是否出现相同的颜色（例如顶部、向下、向左、向右）。1.如果相同的颜色出现在我指向光标的框的顶部，顶框和我指向的框都应该得到更少的alpha，否则只有指向框应该得到更少的alpha。这是我的概念朋友。如果您有任何疑问，请查看图片并告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:46:47.240

我仍然不确定您所说的“附近”是什么意思。（相邻的瓷砖？颜色相似的相邻？...）如果“附近”表示相邻，您需要阅读有关洪水填充算法的信息。[有一篇关于此的很好的 wiki 文章。](http://en.wikipedia.org/wiki/Flood_fill)您将使用它来爬取足够相似的图块列表以触发您想要的效果。

我也不知道您项目中的“相似”颜色是什么意思。您将需要一种方法来确定两种颜色是否相似。有一个stackoverflow问题：相似颜色检测。它有一个很好的答案，可以让您开始研究。[看这里。](https://stackoverflow.com/questions/5347867/color-detection-algorithm-how-should-i-do-this)

# html - 在 UIWebView 中垂直和水平居中 HTML

> ID：10882180
> 
> 赞同：1
> 
> 时间：2012-06-04T13:28:08.193
> 
> 标签：html, css, ios, uiwebview

我正在尝试将 UIWebView 中未知高度的内容垂直和水平居中。

我现在所拥有的在 Safari 中效果很好：

[http://jsfiddle.net/HT9J5/](http://jsfiddle.net/HT9J5/)

但是，它在 UIWebView 中呈现时看起来不正确：

![在此处输入图像描述](../Images/6d434a0d21f39974b209fb24765ff99b.png)

任何想法如何让它发挥作用？我不能做的一件事是设置视口元，因为这需要在 iPad 上的模态视图控制器中呈现 UIWebView 时起作用，它不是屏幕的全宽：

```
<meta name="viewport" content="width=device-width;initial-scale=1.0;maximum-scale=1.0;"/> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-04T20:52:29.763

我尝试了您的示例，它在 UIWebView 中运行良好。我不知道您如何加载 HTML / CSS。您确定 CSS 已正确加载吗？您是否设置了 UIWebView 的框架？

这是对我有用的代码。我将 UIWeb 的框架设置为小于屏幕大小，因为您提到了以模态方式呈现它。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *htmlString = @"<html><head><style type='text/css'>html,body {margin: 0;padding: 0;width: 100%;height: 100%;}html {display: table;}body {display: table-cell;vertical-align: middle;padding: 20px;text-align: center;-webkit-text-size-adjust: none;}</style></head><body><p><strong>Title</strong></p><p>A long explanation about what's going on and all that.</p><p><a href='#'>A link</a></p></body></html>​";

    UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(10.0, 10.0, 300.0, 400.0)];
    [self.view addSubview:webView];
    [webView loadHTMLString:htmlString baseURL:nil];

    [webView release];
} 
```

![在此处输入图像描述](../Images/2178ef1f860ed6d5da2ef764f734f1ec.png)

# php - 时间没有在 mysql 中正确更新

> ID：10882185
> 
> 赞同：0
> 
> 时间：2012-06-04T13:28:48.250
> 
> 标签：php, mysql, sql

我正在尝试添加一个设置用户上次活动的更新，目前它只是在 mysql 中显示 838:59:59 作为时间，我不太清楚为什么。

这是我在每个页面上使用的查询来更新它。

```
mysql_query("UPDATE users SET last_activity = ".time()." WHERE user_id = ".$user_id); 
```

任何想法为什么我会非常感激

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T13:30:41.080

```
mysql_query("UPDATE users SET last_activity = NOW() WHERE user_id = ".$user_id); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T13:31:39.223

```
mysql_query("UPDATE users SET last_activity = CURRENT_TIMESTAMP WHERE user_id = ".$user_id); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T14:04:03.840

这是使用 UTC (GMT) 的 PHP 解决方案。确保引用日期和其他字符串：

```
mysql_query("UPDATE users SET last_activity = '".gmdate('Y-m-d H:i:s')."' WHERE user_id = ".$user_id); 
```

这是当地时间：

```
mysql_query("UPDATE users SET last_activity = '".date('Y-m-d H:i:s')."' WHERE user_id = ".$user_id); 
```

您需要将日期时间格式化为 MySQL 的正确格式。

# .net - 谷歌翻译 API 问题

> ID：10882189
> 
> 赞同：0
> 
> 时间：2012-06-04T13:29:13.367
> 
> 标签：.net

我正在尝试使用 Google Translate API 翻译一个简单的字符串。虽然我现在还没有设置计费，但我有我的 API 密钥来完成这个。

它给出了一个错误/异常：

```
Google.Apis.Requests.RequestError
Daily Limit Exceeded [403]
Errors [
    Message[Daily Limit Exceeded] Location[ - ] Reason[dailyLimitExceeded] Domain[usageLimits]
] 
```

请让我知道我该如何克服这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:56:42.673

需要为 Google 购买 API 密钥，但微软（必应翻译）仍然提供免费的 API 调用进行翻译。谷歌还提供离线翻译——通过上传包含待翻译数据的表格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T13:34:02.453

根据文档，似乎特别是API不能不付费使用

```
Translate API -> Courtesy limit: 0 characters/day 
```

其他 API 允许有限数量的免费请求，但谷歌翻译并非如此。

您可以在您的 google api 控制台上验证这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T13:36:51.910

您必须购买 API 密钥。谷歌和微软（必应翻译）现在都收费（不过，你有一定数量的免费翻译）。

*   要使用谷歌翻译，您必须从谷歌购买许可证。
    [按照 Google 描述的步骤操作。](http://code.google.com/intl/de/apis/language/translate/v2/pricing.html)

*   要使用 Microsoft 必应翻译，您必须从 Microsoft 购买许可证。
    [按照 Microsoft 描述的步骤操作](http://msdn.microsoft.com/en-us/library/hh454950.aspx)。

# c# - 在 Mvc3 中，如何在 display:none 时禁用输入字段的验证？

> ID：10882192
> 
> 赞同：1
> 
> 时间：2012-06-04T13:29:19.997
> 
> 标签：c#, javascript, asp.net-mvc-3

在 Jquery 中，您可以禁用对输入字段客户端的验证（使用忽略），我需要在 MVC3 中执行相同的操作

```
[DisplayName("Title")]
[Required]
public string Title { get; set; }

[DisplayName("OtherTitle")]
[Required]
public string OtherTitle{ get; set; } 
```

在 .cshtml 中

```
 <div class="editor-label">
    <span>
        @Html.LabelFor(x => x.Title)
    </span>
        @Html.DropDownListForNums(m => m.Title, new SelectList(new string[] { "Mr", "Ms", "Mrs", "Dr", "Professor", "OTHER" }, "Title"), "Title")
    </div>
    <div id="altTitle" class="editor-label">
       <span>
           @Html.LabelFor(x => x.OtherTitle)
       </span>
           @Html.TextBoxFor(x => x.OtherTitle, new { @class = "othertitle" })
   </div> 
```

如何在客户端禁用 OtherTitle 输入字段的验证，以便在下拉列表中选择“其他”时可以再次打开它？

谢谢

# objective-c - 如何从导航栏中删除后退按钮

> ID：10882198
> 
> 赞同：1
> 
> 时间：2012-06-04T13:29:35.300
> 
> 标签：objective-c, ios, xcode

我有那个代码。它可以将编辑按钮添加到导航栏，但返回按钮仍然存在，但它变得不负责任。

```
UIBarButtonItem *editButton = [[UIBarButtonItem alloc] 
                               initWithTitle:@"Edit"                                            
                               style:UIBarButtonItemStyleBordered 
                               target:nil 
                               action:nil];
[[self.navigationController.navigationBar.items objectAtIndex:1] setRightBarButtonItem:editButton];

[[self.navigationController.navigationBar.items objectAtIndex:1]setHidesBackButton:YES]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T13:32:04.037

简单而简短：

```
 self.navigationItem.backBarButtonItem = nil; 
```

或者

```
 self.navigationItem.leftBarButtonItem = nil; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-04T18:31:56.203

我以前做过类似的事情。在将要推送下一个视图控制器的控制器中，您不需要后退按钮，将其放在您正在执行 pushViewController 的任何地方：

```
 myNextViewController.navigationItem.hidesBackButton = YES;
 [self.navigationController pushViewController:myNextViewController animated:YES]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-04T13:48:40.987

你也可以使用

目标-C：

```
self.navigationItem.hidesBackButton = YES; 
```

迅速：

```
navigationItem.hidesBackButton = true 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T13:34:55.997

这些中的任何一个都可以工作

```
self.navigationItem.leftBarButtonItem = nil; 
```

或者

```
self.navigationItem.backBarButtonItem = nil; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-01T15:46:58.883

这是旧的，但在今天阅读后，答案是：

```
self.navigationItem.hidesBackButton = YES; 
```

是正确的但不完整，这需要在以后的生命周期方法中完成，然后是 viewDidLoad，也就是将它扔到 viewWillApper 或稍后的东西中，它会起作用

```
- (void)viewWillAppear:(BOOL)animated{
    self.navigationItem.hidesBackButton = YES;
} 
```

希望这可以帮助像我今天一样查看旧帖子的人

# uitableview - 在搜索的 tableview 上调用 NSFetchedResultsChangeUpdate 崩溃

> ID：10882203
> 
> 赞同：0
> 
> 时间：2012-06-04T13:29:43.250
> 
> 标签：uitableview, uisearchbar, nsfetchedresultscontroller

所以我几乎已经弄清楚了这件事，但是当我从搜索表后输入的详细视图更新我的 managedObjectContext 时，我绊倒了 NSFetchedResultsChangeUpdate。

我有一个从核心数据集生成的表格视图。我可以从此表中输入详细视图并毫无问题地进行更改。我也可以搜索表格并在大多数情况下进行更改而不会出现任何问题。但是，在某些对象上，我收到“在核心数据更改处理期间捕获到异常”。

我将此追踪到 NSFetchedResultsChangeUpdate。我正在使用以下代码：

```
case NSFetchedResultsChangeUpdate:
if (searchTermForSegue)
{
NSLog(@"index info:%@.....",theIndexPath);
NSLog(@"crashing at the next line");
[self fetchedResultsController:self.searchFetchedResultsController configureCell:[tableView cellForRowAtIndexPath:theIndexPath] atIndexPath:theIndexPath];
break;
} else {
[self fetchedResultsController:controller configureCell:[tableView cellForRowAtIndexPath:theIndexPath] atIndexPath:theIndexPath]; }
break; 
```

当不搜索表时，它会运行 else 方法，并且 100% 的时间都有效。当表被搜索时，它运行 if (searchTermForSegue) 并且大部分时间都有效，但并非总是如此。我记录了 IndexPath 并发现了以下内容：

当它工作时，theIndexPath 正确地报告了对象 indexPat，当它失败时，错误的 theIndexPath 被调用了。例如，如果我将 tableView 缩小为 3 个部分，第一个是 2 个项目，第二个是 1 个，第三个是 1 个，我会得到以下 nslog：

```
On first object: index info:<NSIndexPath 0xb0634d0> 2 indexes [0, 0].....
on second object: index info:<NSIndexPath 0xb063e70> 2 indexes [0, 1].....
on third object: index info:<NSIndexPath 0xb042880> 2 indexes [1, 0].....
but on the last object: index info:<NSIndexPath 0x9665790> 2 indexes [2, 17]..... 
```

它应该调用 [2, 0]

请注意，我只是更新这些对象，而不是删除它们或添加新对象。

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-04T15:01:00.303

好的，我想出了一个似乎可以解决问题的技巧，但这似乎不是解决问题的最佳方法！有什么想法吗？

我发现当从基表调用 NSFetchedResultsChangeUpdate 时，它​​只被调用一次，但是当它从搜索/过滤的表中调用时，它被调用了两次（似乎 100% 的时间 - 我想这是为了刷新搜索到的表和非搜索表？）。此外，第一次调用似乎总是具有不正确的 indexPath，而第二次调用具有正确的信息。如果不正确的 indexPath 超出范围，第一次调用会使应用程序崩溃。

如果 NSFetchedResultsChangeUpdate 从搜索的表中执行以下操作，我的“修复”是忽略第一个调用

在tableview.h文件的界面中添加：

```
int             changeCall; 
```

然后，在 tableview.m 文件中，在 loadView 中：

```
changeCall = 0; 
```

然后我将 NSFetchedResultsChangeUpdate 更新为：

```
case NSFetchedResultsChangeUpdate:
        if (searchTermForSegue)
        {
            if (changeCall == 0) {
                changeCall++;
                break;
            } else if (changeCall == 1){
                NSLog(@"index infocalledtwice:%@.....",theIndexPath);
                [self fetchedResultsController:self.searchFetchedResultsController configureCell:[tableView cellForRowAtIndexPath:theIndexPath] atIndexPath:theIndexPath];
                changeCall = 0;
                break;
            } else { break; }
        } else {
            [self fetchedResultsController:controller configureCell:[tableView cellForRowAtIndexPath:theIndexPath] atIndexPath:theIndexPath];
        }
        break; 
```

本质上，使用 changeCall int 跳过搜索表更新中的第一个调用，但使用第二个调用实际更新内容。这不是解决此问题的最佳方法，但创可贴似乎有效。如果有人有更好的答案，我当然会很感激。

此外，通过跳过第一个 NSFetchedResultsChangeUpdate，未搜索的表不会更新以反映新值。我已通过在 searchDisplayControllerWillEndSearch 方法中添加重新加载表的调用来解决此问题：

```
- (void)searchDisplayControllerWillEndSearch:(UISearchDisplayController *)controller
{
    [self setSearchTermForSegue:nil];
    [self.tableView reloadData];
} 
```

谢谢！

# grails - 我在 grails 2.0.0 中使用 ${resource(dir:'dir', file:'file.png')} 时遇到问题

> ID：10882208
> 
> 赞同：0
> 
> 时间：2012-06-04T13:30:16.493
> 
> 标签：grails

我用

```
 <img src="${resource(dir:'images', file:'logo.gif')}" width="249" height="31" /> 
```

我得到了

```
 <img alt="Grails" src="/amwccms/static/cXmUZIAv28XIiNgkRiz4RRl21TsGZ5HoGpZw1UITNyV.png"> 
```

代替

```
<img src="/amwccms/images/logo.png"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:02:22.390

用作资源文件名的哈希表明您可能正在使用[Grails 缓存资源插件](http://grails.org/plugin/cached-resources)。这个插件为资源框架提供了一个“哈希和缓存”映射器，自动为你的资源创建安全的唯一文件名，并将它们设置为永久缓存在浏览器中。

# linux - Nagios 验证 Sharepoint

> ID：10882224
> 
> 赞同：0
> 
> 时间：2012-06-04T13:31:23.810
> 
> 标签：linux, sharepoint, nagios

我想设置 Nagios（在我的 Debian 上）来验证 SharePoint 服务器是否已启动。我已经尝试过使用`cURL`，但它对一些我不知道的问题不起作用，所以我决定改变验证该服务的方式。

理论上很简单，我只需要编写一个脚本来发送请求（http 或 https，没关系）并检查响应，如果成功则为 200，否则为 40x（此时可以）。

所以我必须使用`telnet`或任何 ftp 服务来做到这一点，或者我可以为此使用另一个功能/工具。

使用 telnet 我遇到了 400 错误的问题。当服务器启动或关闭时，SharePoint 会返回此错误，因此我不为我工作。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:40:36.770

您可以使用 Nagios 的[check_http](http://nagiosplugins.org/man/check_http)插件。例如：

```
check_http -H SharepointHostname/IP -p port 
```

*   您可以使用 -S 标志进行安全的 http 连接

*   您可以使用 -u 标志转到特定 URL

*   您可以使用 -s 标志在从 -u 标志指定的 url 返回的 HTML 页面中搜索特定字符串。

所以基本上你可以请求一个特定的页面，扫描一个已知的字符串，如果成功找到，你确定这个页面已经启动（这意味着服务器已经启动等）

例子：

```
check_http -H my.sharepoint.com -u /start/page/sharepoint.aspx -s "test string" 
```

通常这是在登录页面等上完成的。不要忘记在您的 URL 中转义特殊字符，如果它包含任何字符（如？和 &）。

还有一个[perl 脚本](http://exchange.nagios.org/directory/Plugins/Email-and-Groupware/Microsoft-Sharepoint/check_sharepoint-2Epl/details)可用于检查共享点服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T12:54:59.227

这不符合您的要求吗：

[http://exchange.nagios.org/directory/Plugins/Email-and-Groupware/Microsoft-Sharepoint/check_sharepoint-2Epl/details](http://exchange.nagios.org/directory/Plugins/Email-and-Groupware/Microsoft-Sharepoint/check_sharepoint-2Epl/details)

您很可能需要 Sharepoint 的登录名/密码才能监控比基本 IIS / 网站工作更多的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T14:31:43.757

我用自己的方式检查 SharePoint 是 UP 还是 DOWN。请注意，这个脚本只是检查服务状态，而不是用户权限之类的。

Perl 脚本：

```
#!/usr/bin/env perl

use strict;
use warnings;
use LWP::UserAgent;
use Getopt::Long qw(:config no_ignore_case_always auto_version);

GetOptions ('h=s' => \my $h);

my $ua = LWP::UserAgent->new;
$ua->agent('Mozilla/4.0 (compatible; MSIE 5.0; Windows 95)');

my $req = $ua->get('http://' . $h);

my $retorno = '';

if ($req->is_success) 
{
    $retorno = $req->content;
}
else
{
    $retorno = $req->status_line;
}

if ($retorno eq "401 Unauthorized")
{ 
    print "OK: SharePoint service at " . $h . " server is UP.";
    exit 0;
}
else
{
    print "CRITICAL: SharePoint service at " . $h . " server is DOWN.";
    exit 2;
} 
```

如果您在运行脚本时遇到此异常：

> 在 @INC 中找不到 LWP/UserAgent.pm

这篇文章可以帮助你，因为它帮助了我：

[http://help.directadmin.com/item.php?id=274](http://help.directadmin.com/item.php?id=274)

因此，在 Nagios`commands.cfg`文件中，您将以这种方式声明命令：

`command_line /usr/local/nagios/libexec/check_sharepoint.pl -h $HOSTADDRESS$`

`$HOSTADDRESS`Nagios 范围内的主机 IP 变量在哪里。

记得`chmod +x`在文件上。我知道你会的...

# search - 如何强制 IntelliJ 始终在“整个项目”中搜索

> ID：10882240
> 
> 赞同：15
> 
> 时间：2012-06-04T13:32:34.893
> 
> 标签：search, intellij-idea

我喜欢使用**Find in Path**函数`CTRL+SHIFT+F`，它在多个文件中搜索文本字符串。

不过，我经常遇到的一件事是，我搜索我知道至少存在于一个文件中的东西，我得到的结果为零，或者我只找到了一些包含搜索词的文件。

然后我意识到“**查找”对话框**中的“范围”设置由于某种原因被设置为“模块”或“目录”，而不是我几乎总是想要的“整个项目”。

在这里愚弄我的是，这似乎只是偶尔发生 - 通常我会像我想要的那样将范围设置为**整个项目，但有时它会是别的东西。**

IntelliJ 如何决定使用哪个范围？

此外，是否有一些设置可用于强制 IntelliJ 始终选择“整个项目”作为默认设置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T13:44:30.530

只需在之前折叠项目选项卡：`Command + 1`或`Alt + 1`

默认选择取决于启动搜索的上下文。如果您打开项目选项卡并选择了文件夹/文件，它将在该文件夹或该文件的父级中搜索。

要默认搜索，只需关闭该面板（这将使上下文成为整个项目）并按搜索快捷方式，它将正确显示范围。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-07T07:22:02.873

不是真正的解决方案，而是如何避免为此使用鼠标：

当对话框打开时，`Alt``h`在按回车之前按一下。这将导致范围设置为*Whole project*。

# iphone - 当 iOS 设备旋转时，如何仅更改一个元素的方向？

> ID：10882242
> 
> 赞同：5
> 
> 时间：2012-06-04T13:32:48.460
> 
> 标签：iphone, ios5

我希望能够在我当前的 iPhone 应用程序中处理方向变化。问题是我不希望我的控制器的视图旋转或调整大小。当设备方向改变时，我只想让一个 UI 元素在屏幕上旋转 90 度。

Apple 的相机应用程序就是一个很好的例子——当设备方向改变时，所有的按钮都会旋转，但视图本身不会旋转。

我想我可以调整视图的大小，移动所有元素，然后为按钮设置动画，但我觉得必须有一种更简单的方法来做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T14:11:10.743

1）您可以创建 2 个视图层次结构并更改屏幕上的`willRotateToInterfaceOrientation:` [查看此问题](https://stackoverflow.com/questions/2496554/easiest-way-to-support-multiple-orientations-how-do-i-load-a-custom-nib-when-th)

2）或者你可以自己处理所有的旋转 [看到这个问题](https://stackoverflow.com/questions/6404786/rotating-an-image-90-degrees-on-same-position-when-orientation-changes)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T13:40:52.800

您可以使用

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
    {
if(interfaceOrientation==UIInterfaceOrientationPortrait || interfaceOrientation==UIInterfaceOrientationPortraitUpsideDown)
    {
        //Change frames as per orientations
    }

    else
    {    
          //Change frames as per orientations
    }

    return NO;
    } 
```

并根据方向手动设置要更改的 UI 元素的框架。[您可以从此文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplication_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006728)`Constants`的部分访问所有方向。

**编辑：您可以使用 NSNotification 来解决这个问题。**

```
UIApplicationDidChangeStatusBarOrientationNotification 
```

> 当应用程序用户界面的方向改变时发布。
> 
> userInfo 字典包含一个封装 UIInterfaceOrientation 值的 NSNumber 对象（请参阅 UIInterfaceOrientation）。使用 UIApplicationStatusBarOrientationUserInfoKey 来访问这个值
> 
> ```
> Available in iOS 2.0 and later. 
> ```
> 
> 在 UIApplication.h 中声明

# c# - 在 WinRT 和 C# 中使用 HttpRequestHeaders

> ID：10882244
> 
> 赞同：1
> 
> 时间：2012-06-04T13:33:00.770
> 
> 标签：c#, httpwebrequest, http-headers, windows-8, windows-runtime

我正在使用 HttpWebRequests 联系 API 并需要添加标头，但编译器告诉我该方法不存在。然而，当我查看 MSDN 时，它告诉我该方法已经存在。设置我的 UserAgent-property 也失败了。

任何人都可以帮助我吗？

```
try{
     HttpWebRequest wr = (HttpWebRequest)HttpWebRequest.Create(url);
     wr.Method = "GET";

     wr.Headers.Add(System.Net.HttpRequestHeader.Authorization, string.Format("Bearer {0}", _accessToken));
     wr.UserAgent = _appNameAndContact;

     var resp = (System.Net.HttpWebResponse) await wr.BetterGetResponse();
     if (resp.StatusCode == System.Net.HttpStatusCode.OK)
     {
        using (var sw = new System.IO.StreamReader(resp.GetResponseStream()))
        {
             var msg = sw.ReadToEnd();

             User usr = JsonConvert.DeserializeObject<User>(msg);

              //var results = JSONHelper.Deserialize<User>(msg);

              return usr;
              }
        }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T13:55:57.963

您将不得不像这样使用[HttpRequestMessage](http://msdn.microsoft.com/en-us/library/hh159020%28v=vs.110%29)：

```
 using (var httpClient = new HttpClient())
  {
    var url = new Uri("http://bing.com");
    var accessToken = "1234";
    using (var httpRequestMessage = new HttpRequestMessage(HttpMethod.Get, url))
    {
      httpRequestMessage.Headers.Add(System.Net.HttpRequestHeader.Authorization.ToString(),
        string.Format("Bearer {0}", accessToken));
      httpRequestMessage.Headers.Add("User-Agent", "My user-Agent");
      using (var httpResponseMessage = await httpClient.SendAsync(httpRequestMessage))
      {
        // do something with the response
        var data = httpRequestMessage.Content;
      }
    }
  } 
```

# json - jquerymobile中的ajax json输出解析

> ID：10882250
> 
> 赞同：0
> 
> 时间：2012-06-04T13:33:39.760
> 
> 标签：json, jquery-mobile

```
 public function actionajaxSearch()  {
         $data_fetched=Person::model()->findByAttributes  (array('Code'=>'Cust0001'));
         echo CJSON::encode($data_fetched); }

  $('#searchResult').live('pageshow', function(e,info) 
   {  
   $.post('?r=mobile/ajaxSearch',$('form').serialize(), 
   function(res) 
   {        
    arrayvalue =res;        
    $.each(arrayvalue, function(i, profile) {
      alert(i);
      alert(profile);
    });
       }
   }); 
```

我将输出作为 json 编码之一。在遍历警报时，我不是通过键或值来获取每个字符的值。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:38:38.797

添加数据类型和内容类型解决了这个问题。添加了其他参考的完整代码。

```
 public function actionajaxSearch()  {
     $data_fetched=Person::model()->findByAttributes  (array('Code'=>'Cust0001'));
     echo CJSON::encode($data_fetched); }

      $('#searchResult').live('pageshow', function(e,info) 
      {  
        $.ajax({
            beforeSend: function() { $.mobile.showPageLoadingMsg(); }, 
            complete: function() { $.mobile.hidePageLoadingMsg() }, 
            url: '?r=mobile/ajaxSearch',
            data: $('form').serialize(),
            type: 'POST',
            ContentType: "application/json",
            dataType: "json",
            success:function(res) {
                if(res !='')
                {
                $.each(res, function(key, value) {
                    var li='<li><a href="#">'+value['Code']+'</a></li>'; 
                    $("#mylist").append(li); //append li to ul of id list

                }); //eachfunction
                $('#mylist').listview();
                 $('#mylist').listview('refresh');
        }//sucess
      }); 
```

# ruby-on-rails - ruby on rails 实现通用搜索

> ID：10882253
> 
> 赞同：0
> 
> 时间：2012-06-04T13:33:49.947
> 
> 标签：ruby-on-rails, search

我的数据库中有 2 个表 - 一个“疾病”表和一个“症状”表。我已经实现了搜索两个表的通用搜索。我的目标是在结果页面中显示结果，每个结果都应该是一个超链接，指向结果“显示”页面（疾病/id/show 或症状/id/show）。

当我将通用结果传递到结果页面时，我真的不知道当前结果是疾病还是症状。我想知道获取此信息的最佳方法是什么（我是否应该尝试在控制器中收集此信息并以某种方式将其传递给 html？我是否应该以某种方式从 html 运行另一个查询？）

我正在使用 rails 3.x，我的控制器代码如下所示：

```
class SearchController < ApplicationController
    def index
        @results = Illness.search(params[:search]) + Symptom.search(params[:search])

        respond_to do |format|
            format.html # index.html.erb
            format.json { render json: @results }
        end
    end
end 
```

谢谢，李

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T13:42:10.170

你不必担心它。让 Rails 为它服务：

```
 - @results.each do |result|
     = link_to 'Show', result 
```

您将根据结果的类型获得正确的链接。

还有一个。`show`in URL 与您的示例中的`show` **操作**有什么关系，例如：`symptom/id/show`？该`show`操作默认映射到`GET /model/id`路径。

# php - 在 symfony2 的非对象上调用成员函数 setName()

> ID：10882256
> 
> 赞同：1
> 
> 时间：2012-06-04T13:34:10.020
> 
> 标签：php, symfony, doctrine-orm

我正在尝试编辑一个表单，我正确地获得了具有现有值的表单，但是当我尝试将新数据放入字段并提交表单时，我收到一个错误，即调用非对象上的成员函数 setName()

我的控制器方法是

```
public function editAction(Request $request){
$request = Request::createFromGlobals();
    $group_id = $request->query->get('id');
    $em = $this->getDoctrine()->getEntityManager();
    $patent_group = $em->getRepository('MunichInnovationGroupBundle:PmPatentgroups')->find($group_id);
    //echo '<pre>';
    //print_r($patent_group);
    //echo '</pre>';
    $form = $this->createForm(new PatentgroupType(), $patent_group);
    if ($request->getMethod() == 'POST') {
        $form->bindRequest($request);
        $name = $form["name"]->getData();
        $description = $form["description"]->getData();
        $patent_group->setName($name);
        $patent_group->setDescription($description);
        $em->flush();
        return $this->redirect($this->generateUrl('MunichInnovationGroupBundle_portfolio'));
    }
    return $this->render('MunichInnovationGroupBundle:Patentgroups:edit.html.twig', array(
            'form' => $form->createView(),
            'group_id' => $group_id
    ));
} 
```

这就是我在 $patent_group 中得到的

```
 MunichInnovationGroup\Bundle\Entity\PmPatentgroups Object
(
[id:MunichInnovationGroup\Bundle\Entity\PmPatentgroups:private] => c3e0eb98-ada5-11e1-96a5-9787dec335c2
[name:MunichInnovationGroup\Bundle\Entity\PmPatentgroups:private] => Zoha Ali khan
[description:MunichInnovationGroup\Bundle\Entity\PmPatentgroups:private] => No Description Provided for this Group
[portfolio_id:MunichInnovationGroup\Bundle\Entity\PmPatentgroups:private] => Proxies\MunichInnovationGroupBundleEntityPmPortfoliosProxy Object
    (
        [_entityPersister:Proxies\MunichInnovationGroupBundleEntityPmPortfoliosProxy:private] => Doctrine\ORM\Persisters\BasicEntityPersister Object
            (
                [_class:protected] => Doctrine\ORM\Mapping\ClassMetadata Object
                    (
                        [reflFields] => Array
                            (
                                [id] => ReflectionProperty Object
                                    (
                                        [name] => id
                                        [class] => MunichInnovationGroup\Bundle\Entity\PmPortfolios
                                    )

                                [portfolioName] => ReflectionProperty Object
                                    (
                                        [name] => portfolioName
                                        [class] => MunichInnovationGroup\Bundle\Entity\PmPortfolios
                                    ) 
```

当我收到此错误时，我在这里做错了什么

```
Call to a member function setName() on a non-object 
```

有任何想法吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:45:47.143

您的对象 $patent_group 很可能尚未在您的数据库中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:39:56.310

我的解决方案：请评论它是否是一个好的解决方案

```
public function editAction(Request $request){
    $request = Request::createFromGlobals();
    $group_id = $request->query->get('id');
    $em = $this->getDoctrine()->getEntityManager();
    $patentgroup = $em->getRepository('MunichInnovationGroupBundle:PmPatentgroups')->findOneBy(array('id'=>$group_id));
    $form = $this->createForm(new PatentgroupType(), $patentgroup);
    if ($request->getMethod() == 'POST') {
        $form->bindRequest($request);
        $group_id = $form["id"]->getData();
        $name = $form["name"]->getData();
        $description = $form["description"]->getData();
        $em = $this->getDoctrine()->getEntityManager();
        $patentgroup = $em->getRepository('MunichInnovationGroupBundle:PmPatentgroups')->findOneBy(array('id'=>$group_id));
        $patentgroup->setName($name);
        $patentgroup->setDescription($description);
        $em->flush();
        return $this->redirect($this->generateUrl('MunichInnovationGroupBundle_portfolio'));
    }
    return $this->render('MunichInnovationGroupBundle:Patentgroups:edit.html.twig', array(
            'form' => $form->createView(),
            'group_id' => $group_id
    ));
} 
```

# matlab - 如何在 MATLAB 编译的应用程序中运行外部 .m 代码？

> ID：10882259
> 
> 赞同：3
> 
> 时间：2012-06-04T13:34:20.720
> 
> 标签：matlab, mcc

我有一个 MATLAB 项目，我使用 MCC 编译它以便拥有一个可执行文件。

然后我想知道外部程序员是否有可能在 .exe 中执行他的一些 .m 文件，而无需重新编译整个项目。

重点是提供一个应用程序，其他开发人员可以在其中添加他们用 MATLAB 编写的“插件”。

我已经搜索了一种在编译的 MATLAB 应用程序中运行外部 .m 文件的方法（比如这个线程：[Running an .m file from a MATLAB-compiled function](https://stackoverflow.com/questions/7409606/running-an-m-file-from-a-matlab-compiled-function)）但它不符合我的目的，尽管使用 eval( ）。

但是这个 eval() “技巧”是不够的，因为它不允许定义新的函数或类。例如，我希望外部 .m 文件成为新类（继承自可执行文件中已编译的“接口”）。

有没有办法将 .m 文件动态加载到 MATALB 编译的可执行文件中？（即使它需要 MATLAB 许可证才能这样做）。

和/或是否有一些“未记录的 MATLAB”涉及我可以进一步调查的这个特定主题？

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:29:40.210

如果您能够创建和分发可以执行任意 .m 文件的已编译应用程序，那么您的用户将能够做任何 MATLAB 可以做的事情，而且是免费的（即使这不是您的意图）。

为他们提供该功能（即使您想要更纯洁和有用的东西）违反了 MATLAB Compiler 的许可协议，并且 MathWorks 还设置了一些技术限制以使其难以做到这一点。

您可能会找到绕过一些技术限制的部分方法，但如果您让您的用户能够在插件中执行任意 m 代码，您将违反许可。

（当然是 IANAL）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:46:36.810

I think that the only way is to do some system calls from your compiled function, like:

```
mFile2Launch='foo'; %%% or whatever input
system(['matlab -r "' mFile2Launch '"']); 
```

or you can also use that more complicated line to make sure everything work well:

```
system(['matlab -nodesktop -nosplash -nodisplay -r "try, ' mFile2Launch '; end; quit"']) 
```

# javascript - Socket.IO ( nodejs ) 中的 Windows Phone 支持

> ID：10882261
> 
> 赞同：3
> 
> 时间：2012-06-04T13:34:23.203
> 
> 标签：javascript, windows-phone-7, node.js, websocket, socket.io

我使用 phonegap、jQuerymobile、nodejs(socket.io) 开发了一个移动聊天应用程序。它在 android 和 iphone 中运行良好，无需任何代码修改。现在客户希望将其移植到 Windows Mobile Phone 7。我更改了一些代码以使其在 Windows Mobile 手机上工作。除了 socket.io 之外，每个功能都运行良好。而在[http://socket.io#browser-support](http://socket.io#browser-support)中，他们的支持平台列表中没有 Windows mobile （如附件）。请帮帮我...![在此处输入图像描述](../Images/9c230c4a78cde29eb1dee7df5b34843b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T22:05:56.223

尽管 Windows Phone 7.5/7.8 上的 Internet Explorer 基于 IE9，但它并不具备所有功能 - 不幸的**是，不支持 WebSockets**。

为了确认这一点，我运行了 Windows Phone 7 和 Windows Phone 8 模拟器，并将 Internet Explorer 指向[http://html5demos.com/web-socket](http://html5demos.com/web-socket)。

WP7 (IE9) 显示“不支持套接字”，Windows Phone 8 (IE10) 显示“套接字打开”。

# android - 从位于 sdcard (Android) 中的 XML 文件中获取数据

> ID：10882266
> 
> 赞同：0
> 
> 时间：2012-06-04T13:34:49.947
> 
> 标签：android, eclipse

这是我第一次发帖 ：-）。我正在 Eclipse 中为 android 开发一个应用程序。

我的问题是我在 sdcard 中放置了一个 XML 文件，其中包含一些元素，如 id、First name 和 lastname。

形成我的 UI 我有一个文本框和按钮。用户将在文本框中输入 ID，并且在按钮的单击事件中，我应该根据该 ID 获取数据。并在 TextView 中显示。

请问有什么帮助吗？？

提前致谢。:-)

这是给我的 XML 文件示例，

```
<tblInsurees xmlns="urn:schemas-microsoft-com:sql:SqlRowSet1">
  <ID>1</ID>
  <LastName>Family 1 (1-42-167)</LastName> 
  <OtherNames>FamMem1</OtherNames> 
  <DOB>01-01-85</DOB> 
  <PhotoFileName xsi:nil="true" /> 
  </tblInsurees>
- <tblInsurees xmlns="urn:schemas-microsoft-com:sql:SqlRowSet1">
  <ID>2</ID>
  <LastName>Family 2 (1-4-16)</LastName> 
  <OtherNames>FamMem1</OtherNames> 
  <DOB>01-01-85</DOB> 
  <PhotoFileName xsi:nil="true" /> 
  </tblInsurees>
- <tblInsurees xmlns="urn:schemas-microsoft-com:sql:SqlRowSet1">
  <ID>3</ID>
  <LastName>Family 3 (1-4-16)</LastName> 
  <OtherNames>FamMem3</OtherNames> 
  <DOB>01-01-98</DOB> 
  <PhotoFileName xsi:nil="true" /> 
  </tblInsurees> 
```

那么有没有可能我可以通过某种方式将一个 ID 作为参数传递，而我可以在我的屏幕上显示其余的信息，如姓名和出生日期等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:53:39.477

[这](http://qtcstation.com/2011/01/parsing-xml-from-the-sdcard-using-xmlpullparser/)是一个完整的源代码示例。你只是为了得到文件使用

```
 File file = new File(Environment.getExternalStorageDirectory()
                    + "your_path/your_xml.xml"); 
```

然后进行进一步处理。

如果您需要不同类型的 XML 解析器的示例，您可以从[这里](http://www.ibm.com/developerworks/opensource/library/x-android/)下载完整的示例。

# sphinx - 使用 Sphinx 的 searchd 命令创建服务

> ID：10882267
> 
> 赞同：0
> 
> 时间：2012-06-04T13:34:54.747
> 
> 标签：sphinx

```
 I make index on one Sphinx compatible xml document.It runs success fully.
Then i make service using searchd command.Following is command to make service 
```

searchd --install --config "配置文件路径" --servicename "servicename" --port "portnumber"。

```
If Sphinx config file is put inside Sphinx directory then service create and start successfully.

But if config file is not inside Sphinx directory then service created successfully but it can not start successfully.

Should i change something inside searchd block in config file? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T05:19:11.057

根据文档（http://sphinxsearch.com/docs/current.html#ref-searchd），在启动服务时调用创建服务时指定的所有参数。

--install 将 searchd 作为服务安装到 Microsoft 管理控制台（控制面板/管理工具/服务）。在命令行上指定的任何其他参数，其中指定了 --install 也将成为服务未来启动时命令行的一部分。例如，作为调用 searchd 的一部分，您可能还需要使用 --config 指定配置文件，并且您将在指定 --install 的同时执行此操作。一旦调用，通常的启动/停止工具将通过管理控制台变得可用，因此您可以用于启动、停止和重新启动服务的任何方法也适用于 searchd。例子：

C:\WINDOWS\system32> C:\Sphinx\bin\searchd.exe --install --config C:\Sphinx\sphinx.conf

上述命令意味着配置文件必须始终存在于 C:\Sphinx\sphinx.conf 中。

如果您的“配置文件路径”存在并且服务仍然没有启动，那么我建议在[http://sphinxsearch.com/bugs/main_page.php](http://sphinxsearch.com/bugs/main_page.php)创建一个错误，以便解决它。

同时，将配置文件放在它工作的 Sphinx 目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:31:02.680

确保 sphinx 文件夹中有一个日志文件夹。如果您检查配置文件的 searchd 部分，它将有一个选项用于放置日志文件和 pid 的位置。如果目录不存在，则服务将不会启动。

# java - 卡尺：为什么不使用注释来定义基准？

> ID：10882268
> 
> 赞同：1
> 
> 时间：2012-06-04T13:34:54.903
> 
> 标签：java, microbenchmark, caliper

刚刚发现了 Caliper 并浏览了文档 - 它看起来是一个很棒的工具（感谢 Kevin 和 Google 的帮派开源它）。

问题。为什么没有基于注释的机制来定义常见用例的基准？似乎是这样的：

```
public class Foo {
  // Foo's actual code, followed by...

  @Benchmark
  static int timeFoobar(int reps) { 
    Foo foo = new Foo();
    for (int i = 0; i < reps; ++i) foo.bar(); 
  }
} 
```

将节省几行代码并增强可读性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T17:35:12.207

我们决定使用`timeFoo(int reps)`而不是`@Time foo(int reps)`出于以下几个原因：

*   我们仍然有很多 JUnit 3.8 测试，并且喜欢与它的`testFoo()`方案保持一致。
*   不需要`import com.google.caliper.Time`
*   我们最终会将 Foo 的基准名称**报告**为`time`**Foo**。这很容易，只是. 如果我们使用注释，我们最终会使用更复杂的机制来处理像,和.**`methodName.substring(4)``@Time timeFoo(int reps)``@Time benchmarkFoo(int reps)``@Time foo(int reps)`**

 **也就是说，我们正在为 Caliper 1.0 重新考虑这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T13:45:56.033

一种可能的解释是，使用 Annotations 的基准无法在 Java 1.5 之前的 JVM 上运行。（考虑到 Java 1.5 的历史，这不是一个很有说服力的理由。）

* * *

其实这是不靠谱的。最新的 Caliper 代码库定义了一个名为的注解，`@VmOption`因此它们不能以支持 Java 1.5 之前的平台为目标。（并不是我建议他们应该......）**

# c# - 参数中的数据值被复制到其他参数 c++, c#

> ID：10882273
> 
> 赞同：0
> 
> 时间：2012-06-04T13:35:08.737
> 
> 标签：c#, c++, visual-c++, c#-4.0

在 c++ 中，我要导出的方法是：

```
__declspec(dllexport) int __thiscall A::check(char *x,char *y,char *z)
{
  temp=new B(x,y,z);
} 
```

在 c# 中，我正在像这样导入此方法：

```
[DllImport("IDLL.dll", CallingConvention=CallingConvention.ThisCall, ExactSpelling = true, EntryPoint = "check")]
    public static extern int check(string x, string y, string z); 
```

我在 c# 中像这样调用这个方法并传递值：

```
public int temp()
{
  string x="sdf";
  string y="dfggh";
  string z="vbnfg";
  int t;

  t=Class1.check(x,y,z);
  return t;
} 
```

问题是，当我调试本机代码时，我看到参数 x、y、z 的值为 sdf、dfggh、vbnfg 并且当它们到达这样的 c++ dll 时甚至在它进入本机 c++ dll 方法之前就被更改了。

```
x=dfggh,y=vbnfg,z=null value 
```

并给我一个错误，说空指针值被传递给函数。谁能帮我解决这个奇怪的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:43:42.620

看起来您的本机方法是一个实例（与静态）方法。我猜你的第一个参数会以某种方式映射到“this”。

这是一个例子：

```
#include <fstream>
using namespace std;

class A
{
public:
__declspec(dllexport) static int __stdcall check(char *x,char *y,char *z)
{
    ofstream f;
    f.open("c:\\temp\\test.txt");
    f<<x<<endl;
    f<<y<<endl;
    f<<z<<endl;
    return 0;

    }

__declspec(dllexport) int __thiscall checkInst(char *x,char *y,char *z)
{
    ofstream f;
    f.open("c:\\temp\\testInst.txt");
    f<<x<<endl;
    f<<y<<endl;
    f<<z<<endl;
    return 0;

    }
}; 
```

看到第一个的**静态**关键字了吗？

进口（因为我很懒，我使用了错误的名称）：

```
[DllImport("TestDLL.dll", CallingConvention = CallingConvention.StdCall, ExactSpelling = true, EntryPoint = "?check@A@@SGHPAD00@Z")]
    public static extern int check(string x, string y, string z);

    [DllImport("TestDLL.dll", CallingConvention = CallingConvention.ThisCall, ExactSpelling = true, EntryPoint = "?checkInst@A@@QAEHPAD00@Z")]
    public static extern int checkInst(IntPtr theObject, string x, string y, string z); 
```

这使它像这样工作：

```
check("x", "yy", "zzz"); 
```

实例方法需要一个 IntPtr

```
IntPtr obj = IntPtr.Zero;
checkInst(obj, "1", "12", "123"); 
```

我的 test.txt 的内容是：

```
x
yy
zzz 
```

和 testInst.txt

```
1
12
123 
```

# c++ - 在 Windows 控制台中正确打印 utf8 字符

> ID：10882277
> 
> 赞同：20
> 
> 时间：2012-06-04T13:35:41.430
> 
> 标签：c++, utf-8, console, mingw, windows-xp-sp3

这是我尝试这样做的方式：

```
#include <stdio.h>
#include <windows.h>
using namespace std;

int main() {
  SetConsoleOutputCP(CP_UTF8);
   //german chars won't appear
  char const* text = "aäbcdefghijklmnoöpqrsßtuüvwxyz";
  int len = MultiByteToWideChar(CP_UTF8, 0, text, -1, 0, 0);
  wchar_t *unicode_text = new wchar_t[len];
  MultiByteToWideChar(CP_UTF8, 0, text, -1, unicode_text, len);
  wprintf(L"%s", unicode_text);
} 
```

效果是只显示我们的ascii字符。没有显示错误。源文件以 utf8 编码。

那么，我在这里做错了什么？

对WouterH：

```
int main() {
  SetConsoleOutputCP(CP_UTF8);
  const wchar_t *unicode_text = L"aäbcdefghijklmnoöpqrsßtuüvwxyz";
  wprintf(L"%s", unicode_text);
} 
```

*   这也行不通。效果是一样的。我的字体当然是 Lucida Console。

第三次采取：

```
#include <stdio.h>
#define _WIN32_WINNT 0x05010300
#include <windows.h>
#define _O_U16TEXT  0x20000
#include <fcntl.h>

using namespace std;

int main() {
    _setmode(_fileno(stdout), _O_U16TEXT);
    const wchar_t *u_text = L"aäbcdefghijklmnoöpqrsßtuüvwxyz";
    wprintf(L"%s", u_text);
} 
```

好的，有些东西开始起作用了，但输出是：`ańbcdefghijklmno÷pqrs▀tuŘvwxyz`.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-04T16:04:01.080

默认情况下，Windows 上的宽打印功能不处理 ascii 范围之外的字符。

有几种方法可以将 Unicode 数据传输到 Windows 控制台。

*   直接使用控制台 API，WriteConsoleW。您必须确保您实际上是在写入控制台，并在输出到其他东西时使用其他方式。

*   将标准输出文件描述符的模式设置为“Unicode”模式之一，_O_U16TEXT 或 _O_U8TEXT。这会导致宽字符输出函数正确地将 Unicode 数据输出到 Windows 控制台。如果它们用于不代表控制台的文件描述符，那么它们会导致字节输出流分别为 UTF-16 和 UTF-8。请注意，设置这些模式后，相应流上的非宽字符函数将无法使用并导致崩溃。您只能使用宽字符函数。

*   如果使用正确的函数，可以通过将控制台输出代码页设置为 CP_UTF8 将 UTF-8 文本直接打印到控制台。大多数更高级别的函数（例如）`basic_ostream<char>::operator<<(char*)`不能以这种方式工作，但您可以使用较低级别的函数或实现自己的 ostream 来解决标准函数所存在的问题。

第三种方法的问题是：

```
putc('\302'); putc('\260'); // doesn't work with CP_UTF8

puts("\302\260"); // correctly writes UTF-8 data to Windows console with CP_UTF8 
```

与大多数操作系统不同，Windows 上的控制台不仅仅是另一个接受字节流的文件。它是由程序创建和拥有的特殊设备，可通过其自己独特的 WIN32 API 访问。问题是，当控制台被写入时，API 可以准确地看到在使用其 API 时传递的数据的范围，并且从窄字符到宽字符的转换发生时没有考虑到数据可能不完整。*当使用对控制台 API 的多次调用传递一个多字节字符时，每个单独传递的部分都被视为非法编码，并被视为非法编码。*

解决这个问题应该很容易，但微软的 CRT 团队认为这不是他们的问题，而在控制台上工作的任何团队都可能不在乎。

您可以通过实现自己的 streambuf 子类来解决它，该子类可以正确处理到 wchar_t 的转换。即考虑到多字节字符的字节可能单独出现的事实，保持写入之间的转换状态（例如，`std::mbstate_t`）。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-04T14:13:20.303

另一个技巧，而不是`SetConsoleOutputCP`，将使用[_setmode](http://msdn.microsoft.com/en-us/library/tw4k6df8(v=vs.80).aspx) on `stdout`：

```
// Includes needed for _setmode()
#include <io.h>
#include <fcntl.h>

int main() {
    _setmode(_fileno(stdout), _O_U16TEXT);  
    wchar_t * unicode_text = L"aäbcdefghijklmnoöpqrsßtuüvwxyz";
    wprintf(L"%s", unicode_text);
    return 0;
} 
```

不要忘记删除对`SetConsoleOutputCP(CP_UTF8);`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-09-28T21:15:50.060

```
//Save As UTF8 without signature
#include<stdio.h>
#include<windows.h>
int main() {
  SetConsoleOutputCP(65001);
  const char unicode_text[]="aäbcdefghijklmnoöpqrsßtuüvwxyz";
  printf("%s\n", unicode_text);
} 
```

结果：
aäbcdefghijklmnoöpqrsßtuüvwxyz

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-09-10T15:35:22.290

我有类似的问题，但没有一个现有的答案对我有用。我观察到的另一件事是，如果我将 UTF-8 字符粘贴在*纯*字符串文字中，它们会正确打印，但如果我尝试使用 UTF-8 文字 ( `u8"text"`)，这些字符会被*编译器*杀死（通过打印证明一次输出一个字节的数值；*原始*文字具有正确的 UTF-8 字节，正如在 Linux 机器上验证的那样，但 UTF-8 文字是垃圾）。

经过一番摸索，我找到了解决方案：[`/utf-8`](https://docs.microsoft.com/en-us/cpp/build/reference/utf-8-set-source-and-executable-character-sets-to-utf-8). 有了它，一切正常；我的来源是 UTF-8，我可以使用明确的 UTF-8 文字，并且输出无需其他更改即可工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-01-13T23:44:19.377

可以将控制台设置为显示 UTF-8 字符：@vladasimovic 答案`SetConsoleOutputCP(CP_UTF8)`可用于此目的。或者，您可以通过 DOS 命令或主程序中`chcp 65001`的系统调用来准备控制台。`system("chcp 65001 > nul")`不要忘记将源代码也保存为 UTF-8。

要检查 UTF-8 支持，请运行

```
#include <stdio.h>
#include <windows.h>

BOOL CALLBACK showCPs(LPTSTR cp) {
  puts(cp);
  return true;
}

int main() {
  EnumSystemCodePages(showCPs,CP_SUPPORTED);
} 
```

`65001`应该出现在列表中。

Windows 控制台默认使用[OEM 代码页](https://en.wikipedia.org/wiki/Code_page#IBM_PC_.2F_DOS_.28OEM.29_code_pages)，并且大多数默认光栅字体仅支持国家字符。Windows XP 和更新版本还支持 TrueType 字体，它应该显示缺失的字符（@Devenec 在他的回答中建议 Lucida Console）。

# 为什么 printf 失败

正如@bames53 在他的回答中指出的那样，Windows 控制台不是流设备，您需要写入多字节字符的所有字节。有时会`printf`搞砸工作，将字节一个一个地放入输出缓冲区。尝试使用`sprintf`然后`puts`结果，或强制 fflush 仅累积的输出缓冲区。

# 如果一切都失败了

注意[UTF-8 格式](https://en.wikipedia.org/wiki/UTF-8)：一个字符显示为 1-5 个字节。使用此函数转移到字符串中的下一个字符：

```
const char* ucshift(const char* str, int len=1) {
  for(int i=0; i<len; ++i) {
    if(*str==0) return str;
    if(*str<0) {
      unsigned char c = *str;
      while((c<<=1)&128) ++str;
    }
    ++str;
  }
  return str;
} 
```

...以及将字节转换为 unicode 数字的此函数：

```
int ucchar(const char* str) {
  if(!(*str&128)) return *str;
  unsigned char c = *str, bytes = 0;
  while((c<<=1)&128) ++bytes;
  int result = 0;
  for(int i=bytes; i>0; --i) result|= (*(str+i)&127)<<(6*(bytes-i));
  int mask = 1;
  for(int i=bytes; i<6; ++i) mask<<= 1, mask|= 1;
  result|= (*str&mask)<<(6*bytes);
  return result;
} 
```

然后你可以尝试使用一些狂野/古老/非标准的winAPI函数，比如MultiByteToWideChar（不要忘记`setlocale()`之前调用！）

或者您可以使用自己的从 Unicode 表映射到您的活动工作代码页。例子：

```
int main() {
  system("chcp 65001 > nul");
  char str[] = "příšerně"; // file saved in UTF-8
  for(const char* p=str; *p!=0; p=ucshift(p)) {
    int c = ucchar(p);
    if(c<128) printf("%c\n",c);
    else printf("%d\n",c);
  }
} 
```

这应该打印

```
p
345
237
353
e
r
n
283 
```

如果您的代码页不支持该捷克语解释，您可以映射 345=>r、237=>i、353=>s、283=>e。至少有 5（！）种不同的字符集仅适用于捷克语。在不同的 Windows 语言环境中显示可读字符是一件很可怕的事情。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-10T07:52:25.927

我通过以下方式解决了这个问题：

Lucida Console 似乎不支持变音符号，因此例如将控制台字体更改为 Consolas 就可以了。

```
#include <stdio.h>
#include <Windows.h>

int main()
{
    SetConsoleOutputCP(CP_UTF8);

    // I'm using Visual Studio, so encoding the source file in UTF-8 won't work
    const char* message = "a" "\xC3\xA4" "bcdefghijklmno" "\xC3\xB6" "pqrs" "\xC3\x9F" "tu" "\xC3\xBC" "vwxyz";

    // Note the capital S in the first argument, when used with wprintf it
    // specifies a single-byte or multi-byte character string (at least on
    // Visual C, not sure about the C library MinGW is using)
    wprintf(L"%S", message);
} 
```

编辑：修复了愚蠢的拼写错误和字符串文字的解码，对此感到抱歉。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-10-05T09:18:20.693

UTF-8 不适用于 Windows 控制台。时期。我尝试了所有组合都没有成功。由于不同的 ANSI/OEM 字符分配会出现问题，因此一些答案说没有问题，但这些答案可能来自使用 7 位纯 ASCII 或具有相同 ANSI/OEM 代码页（中文、日文）的程序员。

要么您坚持使用 UTF-16 和宽字符函数（但*您仍然受限于 OEM 代码页的 256 个字符*- 中文/日语除外），或者您在源文件中使用 OEM 代码页 ASCII 字符串。

**是的，这根本就是一团糟。**

对于多语言程序，我使用字符串资源，并编写了一个`LoadStringOem()`函数，可以将 UTF-16 资源自动转换为 OEM 字符串，`WideCharToMultiByte()`而无需使用中间缓冲区。当 Windows 从资源中自动选择正确的语言时，它有望加载可转换为目标 OEM 代码页的语言的字符串。

因此，您不应将 8 位印刷字符用于英语-美国语言资源（如省略号 ... 和引号“”），因为当未检测到语言匹配（即回退）时，Windows 会选择英语-美国。例如，您有德语、捷克语、俄语和英语-美国的资源，而用户有中文，如果您使文本看起来漂亮，他/她将看到英语加上垃圾而不是您精心制作的排版。

现在，在 Windows 7 和 10 上，`SetConsoleOutputCP(65001/*aka CP_UTF8*/)`可以按预期工作。您应该将源文件保存在没有 BOM 的 UTF-8 中，否则，您的字符串文字将被编译器重新编码为 ANSI。此外，控制台字体*必须*包含所需的字符，并且*不能*是“终端”。不幸的是，即使您同时安装了两个语言包，也没有涵盖变音符号和汉字的字体，因此您无法真正一次显示所有字符形状。

# android - 使用 HttpClient 指定单个请求以使用凭证

> ID：10882281
> 
> 赞同：0
> 
> 时间：2012-06-04T13:35:56.257
> 
> 标签：android, httpclient

我在我的 android 项目上使用 OAuth2。这个想法是使用与 ThreadSafeClientConnManager 一起使用的单例 HttpClient。

对于对服务器的正常请求，我们构造一个 Authorization 标头并发送它。标头是根据从服务器接收到的值构造的。这工作正常。然而，每 15 分钟，我们必须从服务器获取新值来构造标头。要接收这些值，我必须像这样设置凭据。

```
client.getCredentialsProvider().setCredentials(
        new AuthScope(AuthScope.ANY_HOST, AuthScope.ANY_PORT),
        new UsernamePasswordCredentials(creds.clientId, creds.clientSecret)); 
```

为了使它工作，我必须设置和新的 DefaultHttpClient。如果我使用原始的单例 httpclient，我会收到一些错误。我的问题是.. 是否可以将凭据设置为仅用于这一请求？

我注意到有一个 AuthScope。主机和端口不适合这个，但也许领域会？我找不到任何能告诉我领域是什么或如何使用它的东西。

> 06-05 10:12:55.969: W/System.err(23843): org.apache.http.NoHttpResponseException: 目标服务器未能响应 06-05 10:12:55.969: W/System.err(23843):在 org.apache.http.impl.conn.DefaultResponseParser.parseHead(DefaultResponseParser.java:85) 06-05 10:12:55.969: W/System.err(23843): 在 org.apache.http.impl.io。 AbstractMessageParser.parse(AbstractMessageParser.java:174) 06-05 10:12:55.969: W/System.err(23843): at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:179) 06-05 10:12:55.969: W/System.err(23843): 在 org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:235) 06-05 10:12:55.969: W/System.err (23843): 在 org.apache.http.impl.conn.AbstractClientConnAdapter.receiveResponseHeader(AbstractClientConnAdapter.java:259) 06-05 10:12:55.975: W/System.err(23843): 在 org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:279) 06-05 10:12:55.975: W/ System.err(23843): 在 org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:121) 06-05 10:12:55.975: W/System.err(23843): 在 org.apache.http .impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:504) 06-05 10:12:55.975: W/System.err(23843): at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient. java:555) 06-05 10:12:55.975: W/System.err(23843): 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487) 06-05 10:12: 55.975: W/System.err(23843): 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)错误（23843）：在 org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse（HttpRequestExecutor.java:279）06-05 10:12:55.975：W/System.err（23843）：在 org.apache.http.protocol .HttpRequestExecutor.execute(HttpRequestExecutor.java:121) 06-05 10:12:55.975: W/System.err(23843): 在 org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:504) 06-05 10:12:55.975: W/System.err(23843): 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555) 06-05 10:12:55.975: W/ System.err(23843): 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487) 06-05 10:12:55.975: W/System.err(23843): 在 org.apache .http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)错误（23843）：在 org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse（HttpRequestExecutor.java:279）06-05 10:12:55.975：W/System.err（23843）：在 org.apache.http.protocol .HttpRequestExecutor.execute(HttpRequestExecutor.java:121) 06-05 10:12:55.975: W/System.err(23843): 在 org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:504) 06-05 10:12:55.975: W/System.err(23843): 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555) 06-05 10:12:55.975: W/ System.err(23843): 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487) 06-05 10:12:55.975: W/System.err(23843): 在 org.apache .http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)doReceiveResponse(HttpRequestExecutor.java:279) 06-05 10:12:55.975: W/System.err(23843): 在 org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:121) 06-05 10: 12:55.975: W/System.err(23843): 在 org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:504) 06-05 10:12:55.975: W/System.err(23843 ): 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555) 06-05 10:12:55.975: W/System.err(23843): 在 org.apache.http.impl。 client.AbstractHttpClient.execute(AbstractHttpClient.java:487) 06-05 10:12:55.975: W/System.err(23843): at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465 )doReceiveResponse(HttpRequestExecutor.java:279) 06-05 10:12:55.975: W/System.err(23843): 在 org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:121) 06-05 10: 12:55.975: W/System.err(23843): 在 org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:504) 06-05 10:12:55.975: W/System.err(23843 ): 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555) 06-05 10:12:55.975: W/System.err(23843): 在 org.apache.http.impl。 client.AbstractHttpClient.execute(AbstractHttpClient.java:487) 06-05 10:12:55.975: W/System.err(23843): at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465 )执行（HttpRequestExecutor.java:121）06-05 10:12:55.975：W/System.err（23843）：在 org.apache.http.impl.client.DefaultRequestDirector.execute（DefaultRequestDirector.java:504）06-05 10:12:55.975: W/System.err(23843): 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555) 06-05 10:12:55.975: W/System.err (23843): 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487) 06-05 10:12:55.975: W/System.err(23843): 在 org.apache.http。 impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)执行（HttpRequestExecutor.java:121）06-05 10:12:55.975：W/System.err（23843）：在 org.apache.http.impl.client.DefaultRequestDirector.execute（DefaultRequestDirector.java:504）06-05 10:12:55.975: W/System.err(23843): 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555) 06-05 10:12:55.975: W/System.err (23843): 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487) 06-05 10:12:55.975: W/System.err(23843): 在 org.apache.http。 impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)java:555) 06-05 10:12:55.975: W/System.err(23843): 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487) 06-05 10:12: 55.975: W/System.err(23843): 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)java:555) 06-05 10:12:55.975: W/System.err(23843): 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487) 06-05 10:12: 55.975: W/System.err(23843): 在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)

因此，经过更多测试，我发现了问题所在。

我想像这样配置一个池连接管理器

```
SchemeRegistry schemeRegistry = new SchemeRegistry();
schemeRegistry.register(
        new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
schemeRegistry.register(
        new Scheme("https", PlainSocketFactory.getSocketFactory(), 443));

ClientConnectionManager conManager = new ThreadSafeClientConnManager(new BasicHttpParams(), schemeRegistry);
    DefaultHttpClient httpClient = new DefaultHttpClient(conManager, new BasicHttpParams()); 
```

但是当像这样配置时，我得到了上面的错误。如果我像这样使用正常的默认httpclient

```
 DefaultHttpClient httpClient = new DefaultHttpClient(); 
```

然后它工作正常。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T02:44:37.923

由于一个请求需要基本身份验证凭据，并且显然调用`setCredentials()`会导致错误，因此最好的办法可能是根本不使用凭据提供程序，并`setHeader()`仅在需要时手动设置基本身份验证标头（在请求上使用）。

编辑：以下是创建线程安全共享 HttpClient 实例的方法：

```
 DefaultHttpClient createHttpclient(int timeout) {
        HttpParams params = new BasicHttpParams();
        HttpProtocolParams.setContentCharset(params,
                HTTP.DEFAULT_CONTENT_CHARSET);
        HttpConnectionParams.setConnectionTimeout(params, timeout);
        HttpProtocolParams.setUserAgent(params, "MyApp/1.0");
        ConnPerRoute connPerRoute = new ConnPerRouteBean(10);
        ConnManagerParams.setMaxConnectionsPerRoute(params, connPerRoute);
        ConnManagerParams.setMaxTotalConnections(params, 20);

        SchemeRegistry schemeRegistry = new SchemeRegistry();
        schemeRegistry.register(new Scheme("http", PlainSocketFactory
                .getSocketFactory(), 80));
        final SSLSocketFactory sslSocketFactory = SSLSocketFactory
                .getSocketFactory();
        schemeRegistry.register(new Scheme("https", sslSocketFactory, 443));
        ClientConnectionManager cm = new ThreadSafeClientConnManager(params,
                schemeRegistry);

        return new DefaultHttpClient(cm, params);
    } 
```

# rapidminer - RapidMiner 5.2 将数值转换为标称和反向

> ID：10882282
> 
> 赞同：0
> 
> 时间：2012-06-04T13:36:05.393
> 
> 标签：rapidminer

我在 RapidMiner 5.2 中使用 k-means 算法对一堆单词进行聚类，我在聚类之前将名义转换为数值。但是，要真正查看我的聚类，我需要将数字视为单词。我怎样才能把它转换回来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T08:39:14.510

使用`Parse Numbers`or`Guess Types`运算符。

# php - 使用谷歌分析 api 刷新访问令牌

> ID：10882294
> 
> 赞同：4
> 
> 时间：2012-06-04T13:36:59.283
> 
> 标签：php, google-analytics

我尝试使用谷歌分析 API (php) 刷新访问令牌，但我总是出现**invalid_grant 错误**......这是我的过程：

**1\. 我使用离线请求在我的数据库中保存了第一个访问令牌，响应是：**

```
{"access_token":"ya29.AHES6ZSPMUyKfx06Bw89LnlfRa5mEmwdthyCUj6D7bRmDcQ","token_type":"Bearer","expires_in":3600,"refresh_token":"1\/1XLO8PLs2Pb0NPs-T-lt07jWW_STBWYG3IGRB08ZbkA","created":1338810086} 
```

**2\. 我检查令牌信息，如果 "expires_in" < 0 我尝试刷新我的令牌：**

```
if ($infoAt['expires_in'] <= 0) {
 $row = $database->loadObject("SELECT refresh from token WHERE id=1");
 $client->refreshToken($row['refresh']);
} 
```

我有一个 invalid_grant 错误...

有什么帮助吗？非常感谢，对不起我的英语......

# spotify - libspotify API：图像 ID 格式？

> ID：10882295
> 
> 赞同：0
> 
> 时间：2012-06-04T13:37:00.660
> 
> 标签：spotify

**sp_album_cover**和**sp_artist_portrait**返回的图像 ID是否为零终止？还是它的长度是固定的？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:38:52.217

它是一个不透明的结构：即，它的内容是未定义的。

如果您想要一种打印或存储图像的合理方式，请将其转换为链接，然后是字符串：`sp_link_create_from_image()`后跟`sp_link_as_string()`.

# ruby-on-rails - 在任何源中都找不到 i18n-0.6.0 (Bundler::GemNotFound)

> ID：10882298
> 
> 赞同：1
> 
> 时间：2012-06-04T13:37:22.673
> 
> 标签：ruby-on-rails, ruby, gem, rvm, passenger

```
Could not find i18n-0.6.0 in any of the sources (Bundler::GemNotFound) 
```

尝试在 OSX Lion 上的 RVM 下使用 Phusion Passenger运行[redmine时出现此错误。](http://www.redmine.org/)

我在 Ruby 1.9.3 下有“redmine”和“global”RVM gemsets。“全局”宝石集中包含乘客宝石，其他 redmine 特定宝石在“redmine”宝石集中。

有很多关于堆栈溢出的类似帖子处理这个问题（[1](https://stackoverflow.com/questions/9490119/could-not-find-i18n-0-6-0-in-any-of-the-sources)、[2](https://stackoverflow.com/questions/6676890/passenger-says-bundlergemnotfound-error-while-the-bundle-install-says-its-ther)、[3](https://stackoverflow.com/questions/8390604/phusion-passenger-is-throwing-errors-after-upgrading-ruby-and-rails-using-rvm)），所有这些帖子都有公认的答案，但是我不相信它们中的任何一个都是“正确”的解决方案。

请在我的全局 gemset 中安装Passenger 时如何克服此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T15:24:14.047

检查第一个提到的帖子，使用包装器是最重要的部分：

```
PassengerRuby /usr/local/rvm/wrappers/ruby-1.9.3-p125/ruby 
```

包装器为默认 ruby​​ 设置适当的环境，使用 gemsets 遵循 rvm 集成说明：[https ://rvm.io/integration/passenger/](https://rvm.io/integration/passenger/)

# ssis - SSIS 包中的元数据错误

> ID：10882302
> 
> 赞同：0
> 
> 时间：2012-06-04T13:37:36.803
> 
> 标签：ssis

我有一个包，我将 csv 源文件加载到表中。我有两种类型的源文件，员工和员工详细信息。

1.  **例如员工 csv 文件有 4 列 eid、ename、designation、age。**

2.  **Employeedetails csv 文件有 6 列 eid、ename、designation、age、depatname、deptid**。

3.  **我的目标表有 eid、ename、designation、age、depatname、deptid。**

现在，我想根据我的变量集合中的文件类型变量加载这 2 个文件。我也完成了那部分。

因此，我只使用了一个，而不是使用 2 个 Dataflow 任务。我的 DFT 内部有以下转换。

**原始文件源
|
派生列变换
|
Oledb 目标表**

在控制流中，我使用了执行包任务，当我将文件类型指定为员工时调用子包，它运行员工包，它将员工 CSV 文件加载到原始文件目标中。

如果我选择文件类型作为 Employeedetails，它会运行 EmployeeDetails 包，它会在其中获取employeeDetails CSV 文件并将其加载到 rawfile 目标中。

现在我把这个原始文件加载到目标表中。一个文件能够加载，当我加载第二个文件时，无论是 Employee 文件还是 EmployeeDetails 文件，都会出现元数据问题。

因此，我需要去打包并更改每一个转换。

我尝试将所有转换和包级别的 validate External Meta data value 保持为 false。

如何解决这个问题并加载我的两个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:02:48.140

由于这两个文件具有不同的列，因此您需要两个数据流。您可以在控制流中有一个步骤，根据您作为变量发送的文件名选择正确的一个。

但是由于详细信息文件包含员工文件的所有列，为什么不只处理其中一个而忽略另一个呢？

# performance - Grizzly 和 Jersey 独立传输数据非常慢，如何改进/配置它？

> ID：10882307
> 
> 赞同：0
> 
> 时间：2012-06-04T13:38:13.433
> 
> 标签：performance, rest, jersey, nio, grizzly

我将 Jersey 1.12 与 Grizzly 一起使用，使用 Jackson 生成 JSON 输出。如果生成的结果大得多，则数据传输速度非常慢。

我在同一个机器上运行服务器和客户端，350KB 数据的传输速度大约是 350KB/秒，这很慢，对吧？如何调整这个？我监控了生成准备序列化为 JSON 的对象列表的 API，第一次之后大约 50 毫秒。

我将 Grizzly NIO 工作线程的数量设置为 40。

我在服务器上运行

```
Linux 2.6.18-274.7.1.el5 #1 SMP Thu Oct 20 16:21:01 EDT 2011 x86_64 x86_64 x86_64 GNU/Linux 
```

该服务器有 8 个核心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:17:20.713

也许你的堆空间用完了，导致 VM 更积极地尝试 GC，从而导致更长和更频繁的 GC 周期？数据有多大？您是否使用日志过滤器（它缓冲实体 - 将其全部加载到内存中）？尝试增加堆大小或确保以流方式发送/接收数据，而不是将其全部保存在内存中。

# sql - 合并两个 csv 文件

> ID：10882308
> 
> 赞同：0
> 
> 时间：2012-06-04T13:38:21.700
> 
> 标签：sql, database, csv, database-schema

我对数据库和编程相当陌生。我试图找到一种简单的方法来组合来自两个 csv 文件的数据。有什么工具可以帮助做到这一点吗？我最终想要做的是将这两个表组合成一个大表，以便我可以在其上运行脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:38:10.607

假设这两个 .csv 文件格式相同，并且是真正的逗号分隔值文本文件，您可以在 Linux 上使用 cat 并在 Windows 上使用适当的工具来组合这两个文件。然后，您可以将生成的组合 .csv 文件加载到数据库的表中。

您还可以使用数据库管理器加载工具执行两个单独的加载，一个用于每个 .csv 文件。这假设数据库表使用唯一键并且两个 .csv 文件不包含重复数据。

# cvs - 如何在 linux 中设置 CVS pserver

> ID：10882309
> 
> 赞同：1
> 
> 时间：2012-06-04T13:38:22.370
> 
> 标签：cvs

我是 CVS 的新手。我最近安装了 CVS 存储库。我已将我的项目导入 CVS。现在我需要在本地访问我的 CVS 存储库，但我无法访问得到以下错误

在远程 m/c 上导出 CVSROOT=:pserver:cvs@:/etc/cvs/source

cvs login 登录到 :pserver:cvs:2401/etc/cvs/source CVS 密码: cvs [login aborted]: connect to [Host_name]:2401 failed: Connection denied

在 CVS 服务器上检查端口 2401 没有运行。任何指针如何启动/打开端口 2401。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:41:31.130

以下是添加 pserver 的一些说明：http: [//comsci.liu.edu/~murali/cvs/pserver.htm](http://comsci.liu.edu/~murali/cvs/pserver.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-14T07:37:12.733

更新文件 /etc/xinetd.conf

```
service cvspserver
{
port = 2401
socket_type = stream
protocol = tcp
wait = no
user = test 
server = /usr/bin/cvs
server_args = -f --allow-root=/test --allow-root=/test2 pserver 
} 
```

服务 xinetd 重启

这将创建两个存储库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T14:00:52.243

我以根 /etc/xinetd.d/cvspserver 的身份创建了文件，内容如下

```
service cvspserve
{
disable = no
socket_type = stream
protocol = tcp
user = root
wait = no
server = /usr/bin/cvs
server_args = -f --allow-root=/etc/cvs/source pserver
log_on_success +=USERID
log_on_failure += USERID 
```

}

并重新启动 xinetd，如下所示作为 root 服务 xinetd 重新启动。它有效，我可以登录，但在检查时收到此错误

cvs checkout: 未能创建锁定目录

# linux - 如何切换到 root 用户而不在 RedHat 上的 bash 脚本中输入密码

> ID：10882310
> 
> 赞同：1
> 
> 时间：2012-06-04T13:38:23.260
> 
> 标签：linux, bash, root, redhat

我想通过在代码中指定密码而不是输入密码来切换到 RedHat 上的 bash 脚本中的 root 用户。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T14:03:50.883

在脚本中以纯文本形式存储密码并不是一个好主意。您可以使用`visudo`来编辑`sudoers`文件并允许用户在`sudo`不使用密码的情况下运行命令。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T14:09:13.177

sudo 的灵活性被广泛低估了。这会导致非常糟糕的做法（如`sudo su -`经典球手术方法）。

**更好的方法是专门允许您打算允许的命令*而不使用密码***：

```
phill = NOPASSWD: /bin/ls, /usr/bin/lprm 
```

* * *

有关更多示例，请参阅：[Shell 脚本 - Sudo 权限随着时间的推移而丢失](https://stackoverflow.com/questions/5866767/shell-script-sudo-permissions-lost-over-time/6198418#6198418)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T13:44:15.577

让 sudo 使用 -S 标志从标准输入读取

```
sudo -S mkdir /mnt/somedir <<END 
password here

END 
```

这将让用户在 root 拥有的 /mnt 中创建一个目录

编辑：这似乎不适用于“su”命令，但我认为这个解决方案可能会有所帮助

# calendar - 谷歌日历的分析？

> ID：10882311
> 
> 赞同：-1
> 
> 时间：2012-06-04T13:38:27.747
> 
> 标签：calendar, google-analytics

我需要找出有多少人使用我的公共 Google 日历，但我找不到任何集成分析的方法。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T22:33:48.220

如果你有一个网站，有办法做到这一点，但它需要一点编码。

转到日历设置并找到“嵌入此日历”，然后通过复制/粘贴嵌入代码将其嵌入您的网站。在网站上安装 Google Analytics，并使用您的日历跟踪页面的浏览量。

这可能不起作用，具体取决于您共享公共日历的方式...

# java - 玩！framework 2.0：如何显示多张图片？

> ID：10882313
> 
> 赞同：3
> 
> 时间：2012-06-04T13:38:40.343
> 
> 标签：java, playframework, playframework-2.0

我需要显示照片库。所以这是我的模板：

```
@(photos: List[Photo])

@title = {
  <bold>Gallery</bold>
}

@main(title,"photo"){
    <ul class="thumbnails">
    @for(photo <- photos) {
        <li class="span3">
            <a href="#" class="thumbnail">
                <img src="@photo.path" alt="">
            </a>
        </li>
    }
    </ul>
} 
```

这是我的控制器方法：

```
public static Result getPhotos() {
    return ok(views.html.photo.gallery.render(Photo.get()));
} 
```

这是我的照片豆：

```
 @Entity
    public class Photo extends Model {

@Id
public Long id;

@Required
public String label;

public String path;

public Photo(String path, String label) {
    this.path = path;
    this.label = label;
}

private static Finder<Long, Photo> find = new Finder<Long, Photo>(
        Long.class, Photo.class);

public static List<Photo> get() {
    return find.all();
}

public static Photo get(Long id) {
    return find.byId(id);
}

public static void create(Photo photo) {
    photo.save();
}

public static void delete(Long id) {
    find.ref(id).delete();
}

    } 
```

我把照片绝对路径放在img节点的src属性中，但是不起作用。实现这一目标的最佳方法是什么？

PS：图像位于播放应用程序之外。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T15:58:36.730

看看我非常相似的问题：[Direct serving files from outside of Play目录结构](https://stackoverflow.com/questions/10787753/direct-serving-files-from-outside-of-play-directories-structure)，最后我在非常基本的示例中使用了我的第二个建议，它可以显示为：

```
public static Result serve(String filepath){
    // some stuff if required
    return ok(new File("/home/user/files/"+filepath));
} 
```

路线（使用星号`*filepath`允许字符串内部带有斜线）：

```
GET   /files/*filepath    controllers.Application.serve(filepath : String) 
```

视图（之前缺少`@`字符`photo.path`不是偶然的）

```
<img src="@routes.Application.serve(photo.path)" alt="@photo.alt" /> 
```

*编辑：*

You of course don't need to serve files trough the controller if you have any `HTTP server` and ability to create new subdomain/alias pointing to directory. In such case you can just store links as `http://pics.domain.tld/holidays_2012/1.jpg` or even better as `holidays_2012/1.jpg` (and then prefix it in the template with subdomain).

Finally you can set-up some alias ie. with Apache to use your `domain.tld/*` as pointer to Play app and `domain.tld/pics/*` as pointer to some folder

```
<VirtualHost *:80>
  ProxyPreserveHost On
  ServerName domain.tld
  ProxyPass  /pics !
  ProxyPass / http://127.0.0.1:9000/
  ProxyPassReverse / http://127.0.0.1:9000/

  Alias /pics/ /home/someuser/somefolder_with_pics/
  <Directory /home/someuser/somefolder_with_pics/>
    Order allow,deny
    Allow from all
  </Directory>
</VirtualHost> 
```

in such case it's important to place `ProxyPass /pics !` **before** `ProxyPass / http://...`

# animation - 精灵动画

> ID：10882315
> 
> 赞同：0
> 
> 时间：2012-06-04T13:38:44.253
> 
> 标签：animation, graphics, computer-vision, sprite, multimedia

我研究了“多媒体基础：李泽年，马克·S·德鲁”，但是，我不明白“精灵”的含义。现在有人可以解释一下“精灵”的含义吗？请向我解释一种算法。tnx

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T13:49:42.460

根据维基百科：

> 在计算机图形学中，精灵是集成到更大场景中的二维图像或动画。

但是，我不确定它是否真的可以是动画。据我所知，精灵一词是*单帧静止图像*。一个图形的多个精灵可用于制作动画。

例如，在横向滚动的 16 位游戏中（例如旧的马里奥游戏），有一个静止的马里奥精灵，两个奔跑的马里奥精灵，等等。在玩家输入时，相应的精灵会以动画形式显示或不。

我也认为 SO 不是提出此类问题的最佳网站，我推荐[graphicsdesign.stackexchange.com](http://graphicdesign.stackexchange.com)

# ms-access - 获取项目中的查询列表 - MS Access

> ID：10882317
> 
> 赞同：3
> 
> 时间：2012-06-04T13:39:05.180
> 
> 标签：ms-access, report, names, openargs

我有一个非常千篇一律的数据库（非常相似，非常重复的查询），它进入一个模块化报告（即它们都返回具有不同标准的相同内容）。

将有大约 100 个这样的查询，所以我使用组合框来显示查询，这些查询将发送到报告（通过`OpenArgs`）。

我需要生成项目中的查询列表（只是名称）。我希望组合框的控制源是这个查询列表。

如果我必须做一个字符串连接`Value List`源或`Query/Table`源类型并不重要，唯一重要的是绑定列包含`"qryName"`

到目前为止我所拥有的：

```
For Each qry In CurrentDb.QueryDefs
    list = list & ";" & """" & qry.Name & """" 
    'String in the form "qryName";"qryAnotherQuery";"qryNextQuery"
Next 
```

但显然值列表有 ~2000 个字符的限制，所以如果我有很多查询我不能使用值列表？另请注意：`qry.Name`也会返回类似“~sq_cTableName”的内容，而不仅仅是我的查询......这是一个问题。我只想查询。

有任何想法吗？只要我可以将查询名称发送到我的报告的 OpenArgs，我也愿意在没有组合框的情况下以其他方式显示此信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T14:26:24.623

如果您对 具有读取权限`MSysObjects`，则可以将此查询用作组合框的行源。

```
SELECT m.Name
FROM MSysObjects AS m
WHERE m.Type=5 AND m.Name Not ALike "~%"  
ORDER BY m.Name; 
```

条件 ，`m.Name Not ALike "~%"`从结果集中排除临时和隐藏查询。

如果您对 没有读取权限`MSysObjects`，则必须创建一个回调函数，然后将其用作组合框的行源。如果您必须走这条路，请参阅 Allen Browne 的此示例，该示例列出了报告对象并将其更改为列出查询：[可用报告的列表框](http://allenbrowne.com/ser-19.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T13:56:53.523

列表框允许您在`Me.lstBox.AddItem qryName`循环查询时使用。
然后，您可以使用 ItemsSelected 和 ItemData 的组合来查找查询的名称

```
For Each varItm In lstBox.ItemsSelected
    Debug.Print lstBox.ItemData(varItm)
Next varItm 
```

或者如果您不允许多选，

```
lstBox.ItemData(lstbox.ItemsSelected(0)) 
```

会给你选择的单个项目

# azure - 云上的物理数据位置

> ID：10882318
> 
> 赞同：5
> 
> 时间：2012-06-04T13:39:06.413
> 
> 标签：azure, amazon-ec2, cloud, cloud-hosting

我们正在启动 SaaS 解决方案，我们需要知道数据存储的地理位置，并确保提供商不会将数据存储在受限制的国家/地区。

这在 Amazon、IBM 或 Azure 等任何云提供商上是否可行？你有这方面的经验吗？谢谢你

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T13:53:11.250

Windows Azure 信任中心在其[隐私](http://www.windowsazure.com/en-us/support/trust-center/privacy/)页面中列出了所有数据中心的位置：

*   亚洲：东部（香港）和东南部（新加坡）
*   欧洲：北部（爱尔兰）和西部（荷兰）
*   美国：中北部（伊利诺伊州）、中南部（德克萨斯）、东部（弗吉尼亚）和西部（加利福尼亚）

部署应用程序时，您可以选择所需的特定数据中心。您的存储帐户和 SQL Azure 数据库也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:21:21.367

When you activate/provision various Amazon AWS services you have to select what "region" you want them to run in (US East, US West, Japan, EU, etc)... the specific regions available vary depending on the specific service...

Bottom line you have control over where your data is stored.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T17:43:24.477

+1 大卫回答！！

此外，大多数云服务提供商都知道，对于任何选择云服务的客户来说，首先要知道数据的位置以及如何将其复制到以进行检索，这可能是一项基本要求。

Windows Azure 保证您的数据将保留在您为 Azure 存储和/或 SQL Azure 设置的地理位置内。使用 Azure 存储，相同存储中的数据将复制到相同地理位置的其他数据中心，除非您已为 Azure 存储启用 CDN 服务。使用 SQL Azure，您的数据仍存储在您创建主数据库的同一地理位置，除非您在其他地理位置创建了多个数据库并使用数据库同步。

[在此处](http://aws.amazon.com/s3/faqs/#Where_is_my_data_stored)查找有关其 S3 数据存储位置的 Amazon S3。

# asp.net-mvc-3 - 获取当前照片 jQuery 圆形幻灯片库的 ID

> ID：10882320
> 
> 赞同：0
> 
> 时间：2012-06-04T13:39:11.277
> 
> 标签：asp.net-mvc-3, jquery, jquery-cycle

我正在使用 ASP.NET MVC3 和 jQuery Cycle 插件处理图片库项目。这是我的代码：

```
 $(document).ready(function () {
     $('#s1').cycle({
         fx: 'curtainX',
         speed: 2000,
         next: '#raty',
         timeout: 0,
         after: Rate
     });
 }): 
```

我从页面源获得以下列表：

```
<div id="s1" class="slides">     
    <img src="/Photo/Thumbnail/14?size=large" title="walk 071" alt="14" />
    <img src="/Photo/Thumbnail/15?size=large" title="walk 083" alt="15" />
    <img src="/Photo/Thumbnail/16?size=large" title="walk 125" alt="16" />
    <img src="/Photo/Thumbnail/17?size=large" title="001" alt="17" />
    <img src="/Photo/Thumbnail/18?size=large" title="002" alt="18" />
    <img src="/Photo/Thumbnail/19?size=large" title="003" alt="19" />
    <img src="/Photo/Thumbnail/20?size=large" title="004" alt="20" />
    <img src="/Photo/Thumbnail/21?size=large" title="005" alt="21" />
    <img src="/Photo/Thumbnail/22?size=large" title="006" alt="22" />
</div> 
```

问题：我想将幻灯片上当前照片的 ID (int) 从上面的 img url 传递给控制器​​操作，以便我可以在运行时异步显示数据库中的相关信息。我该怎么做？

这是控制器动作：

```
public ActionResult AboutMe(int id) 
    {
       var myphoto = dbase.Photos.Single(x => x.PhotoId == id);
        var model = new MeViewModel
        {
            UserName =myphoto.UserProfile.UserName,
            Location =myphoto.UserProfile.Location,
            ...Continue populating model

        };

        return PartialView(model);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:57:25.307

您可以在 after 事件中获取当前幻灯片索引。

在 after 事件中，您可以使用 options 参数来引用当前 Slide 索引。在下面的示例中，这`getData`将是您的 ajax 调用。

演示（使用当前索引隐藏/显示寻呼机）：http: [//jsfiddle.net/lucuma/fg6d4/10/](http://jsfiddle.net/lucuma/fg6d4/10/)

```
 $('#slideshow').cycle({
    prev: $('.controller .prev', this),
    next: $('.controller .next', this),
    after: function(currSlideElement, nextSlideElement, options, forwardFlag) {
        // you can easily adapt this to hide prev on firstslide and next on last slide
        getData(options.currSlide);

    }

}); 
```

# sql - 如果新值相同，SQL 会更新记录吗？

> ID：10882325
> 
> 赞同：6
> 
> 时间：2012-06-04T13:39:25.710
> 
> 标签：sql, sql-server, sql-server-2008, tsql

如果记录没有更改，SQL 会更新记录吗？

例如，替换是否更有效

```
UPDATE TABLE myTable 
Set Col1 = ISNULL(Col1,'')
...
Set Col100 = ISNULL(Col30,'') 
```

和

```
UPDATE TABLE myTable 
Set Col1 = ISNULL(Col1,'')
...
Set Col100 = ISNULL(Col30,'')
WHERE 
Col1 IS NULL OR
...
Col30 IS NULL 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T13:41:36.677

是的，它会尝试覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T14:02:19.227

您必须手动控制它，在 where 子句中，如果它们与新值不同，您可以将所有字段放入其中，并且表的 id 等于您的参数，您将确保仅更新修改的记录。

```
 UPDATE table
    SET field1 = @field1,
                 field2 = @field2
    WHERE field1 != @field1 AND
          field2 != @field2 AND
          id = @id 
```

# ios - HTML5 Audio iPAD，无法播放音频文件？

> ID：10882329
> 
> 赞同：5
> 
> 时间：2012-06-04T13:39:33.690
> 
> 标签：ios, ipad, html, html5-audio

我有一个小问题

我正在尝试在 ipad 模拟器上使用 html5 在 webView 上播放音频文件，我得到了这样的代码：

```
<audio controls="controls" format="mp3 ogg">
      <source src="test.ogg" />
       <source src="test.mp3" />
</audio> 
```

但我总是在控制的黑条上看到“无法播放音频文件”：/

有人作为一个想法为什么？

当然我的 test.mp3 和 test.ogg 是在我的 xcode 项目中添加的，并且在同一个目录下

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:45:14.063

音频中的格式属性没有任何意义。您应该在源标签中使用 type 属性。

参见示例：

```
<source src="test.ogg" type="audio/ogg" />
<source src="test.mp3" type="audio/mpeg" /> 
```

这在 ipad 中工作。

# ios - 如何使用 ARC 为视图控制器正确释放和保留内存？- iOS

> ID：10882330
> 
> 赞同：0
> 
> 时间：2012-06-04T13:39:40.560
> 
> 标签：ios, xcode

**使用 ARC 功能**

```
record_audio_testViewController *view2 = [[record_audio_testViewController alloc] initWithNibName:@"record_audio_testViewController" bundle:nil];

    [self.view addSubview:view2.view]; 
```

使用上面的代码页面导航到view2页面但是我无法访问任何按钮..在view2中我按下了一个按钮我得到了错误

**Exe_Bad_Access**（代码=1 地址=012902）

如何正确释放内存？？？？

但使用

```
[self.navigationController pushViewController:view2 animated:YES]; 
```

这个 popviewController 和 pushViewController 不起作用..（无法导航 VIEW2 页面）

有谁知道原因？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:57:45.213

问题是您正在创建视图控制器，但您没有使用它，而只是使用它的视图（但当它超出范围时让 ARC 释放视图控制器本身）。在视图控制器之间转换时，您应该使用 pushViewController（如果您使用导航控制器）或 presentModalViewController（如果您想以模态方式呈现下一个视图；在 iOS 5 中使用 presentViewController）。万一您使用的是容器视图控制器，您甚至可以使用 transitionFromViewController 在子视图控制器之间进行转换。请参阅[查看控制器编程指南](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html)有关如何在视图控制器之间转换的指导。但是在 WWDC 2011 session 102 中，Apple 明确建议您要确保视图控制器的层次结构正确结构化（通常反映您的视图层次结构）；您不应该只是添加视图而忽略视图控制器层次结构。

无论如何，在视图之间转换的标准技术是使用导航控制器（这就是为您提供带有“后退”按钮的标题栏......如果您不希望它可见，您可以将其隐藏）：

```
record_audio_testViewController *view2 = [[record_audio_testViewController alloc] initWithNibName:@"record_audio_testViewController" bundle:nil];

[self.navigationController pushViewController:view2 animated:YES];

// if non-ARC project, uncomment the following line
// [view2 release]; 
```

最后，如果您真的想使用将新控制器的视图添加为当前视图控制器视图的子视图的技术（这似乎不是一个好主意），您只需确保 ARC 不会当它超出范围时释放它。所以，不要让它超出范围，让新视图控制器成为当前视图控制器的 ivar，而不是当前方法的本地 var。这解决了 ARC 问题，但似乎不是一个好的技术，因为您可能应该在视图控制器之间进行适当的转换，但我提出它是为了充分披露。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T14:48:14.933

在您的 .h 中设置 record_audio_testViewController *view2 的属性强或弱。（可能很强）

此外，请确保您已在 xib 中将文件所有者类设置为 record_audio_testViewController。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T13:46:21.237

```
record_audio_testViewController *view2 = [[[record_audio_testViewController alloc] initWithNibName:@"record_audio_testViewController" bundle:nil]autorelease]; 
[self.view addSubview:view2]; 
```

# python - Python时区显示

> ID：10882331
> 
> 赞同：0
> 
> 时间：2012-06-04T13:39:40.967
> 
> 标签：python, time, zone

我不确定这是否可行，但问题是：

在python中，是否可以获得一个显示相对于UTC时间的时区的变量？例如，EST 将显示为 -5，PST 显示为 -8。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:56:41.367

[您可以使用email.utils](http://docs.python.org/library/email.util.html#email.utils.parsedate_tz)`parsedate_tz`中的函数非常轻松地去除带时区的时间。

```
from email.utils import parsedate_tz
import time

datetuple = parsedate_tz('Mon 4 jun 2012 12:34:56 +0700')
print datetuple
print '%s; offset: %s' % (time.strftime('%d-%m-%Y %H:%M', datetuple[:9]),
                          datetuple[9] / 3600.0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T13:58:29.087

不确定你到底在问什么。希望这可能会有所帮助！，您可以使用 datetime 模块。改编自[http://docs.python.org/library/datetime.html#datetime.tzinfo.fromutc](http://docs.python.org/library/datetime.html#datetime.tzinfo.fromutc)

从日期时间导入 tzinfo、timedelta、日期时间

```
class FixedOffset(tzinfo):
    def __init__(self, offset):
        self.__offset = timedelta(hours=offset)
        self.__dst = timedelta(hours=offset-1)
        self.__name = ''

def utcoffset(self, dt):
    return self.__offset

def tzname(self, dt):
    return self.__name

def dst(self, dt):
    return self.__dst

print datetime.now()
print datetime.now(FixedOffset(9)) 
```

给出：

```
 2011-03-12 00:28:32.214000
 2011-03-12 14:28:32.215000+09:00 
```

# eclipse - Eclipse 片段分组

> ID：10882333
> 
> 赞同：1
> 
> 时间：2012-06-04T13:39:46.840
> 
> 标签：eclipse, dreamweaver, grouping, code-snippets

在 PHP 开发方面，我正在从 Dreamweaver 过渡到 Eclipse，我不得不承认 Eclipse 在类浏览和语法补全方面提供了出色的功能。我使用代码片段作为一种真正加快应用程序开发过程的机制。我在 Eclipse 中使用片段，它们看起来非常相似，唯一的区别是我找不到**对片段进行分组的**方法。IE。在 Dreamweaver 中，我有引用我们的 DB 类（用于连接、获取字段等）、用于会话处理等的代码片段。然而，在 Eclipse 中，我可以创建片段，但它们只是在一个大列表中。有什么方法可以将它们分组或使用任何 3rd 方工具（商业？），您可以推荐吗？

谢谢，保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:23:30.030

只需使用 Eclipse 中的内置 Snippets 工具

*   窗口 > 显示视图 > 其他
*   .....键入“片段”或选择常规/片段
*   在区域内单击鼠标右键单击“自定义...”
*   然后会弹出以下菜单。![Eclipse 片段视图](../Images/7630a4775f2ec18a8b95699cea338e74.png)

创建一个新的“类别”

但是，类别不能嵌套。只有一个级别。

# javascript - Flowplayer 上的 IE8 加载问题

> ID：10882334
> 
> 赞同：1
> 
> 时间：2012-06-04T13:39:50.973
> 
> 标签：javascript, internet-explorer-8, flowplayer

嗨，我正在尝试使用 Flowplayer 在 ie 8 上的弹出窗口上加载一些视频。我认为这不是兼容性问题，因为我有一个页面可以完美加载视频并显示播放器。仅当我尝试使用 java 脚本将视频加载到弹出窗口时才会发生这种情况。到目前为止，我所得到的只是玩家应该在的地方。

```
 <!-- Internet Explorer Flyout -->
    <div id="videoFlyoutIE<?=$itemz['newsID']?>" class="popUpWrapper" style="display:none;position:absolute;top:10px;left:auto;">
            <div class="firstPopupDiv" style="left:center;height:auto;width:620px;">
                <div class="popupDivInner" style="display:block;" class="hideSteps">
                    <h1 style="color:#333333;" ><?=$itemz['title']?><div id="title"></div></h1>
                    <hr/>
                    <div id="tst<?=$itemz['newsID']?>">
                        <center>
                            <a id="player<?=$itemz['newsID']?>" style=";display:block; height:365px; width:auto;"></a>  
                        </center>
                        <br/>   
                        <hr/>
                        <?php echo $itemz['description'];?>
                    </div>  
                    <a class="btnRed clickable floatRight" style="position:relative;top:12px;" onclick="closeVideo('<?=$itemz['newsID']?>');"><?=$lang[109]?></a>   
                </div>

            </div>
        </div> 
```

这是我的加载功能

```
 function showVideo(ID,link)
    {
    if(navigator.appName == 'Microsoft Internet Explorer')
    {
        showPopup("videoFlyoutIE"+ID);
        startVideo(ID,link);

        }
        else
        {
            showPopup("videoFlyout"+ID)
        }
 }   

function startVideo(ID,link)
 {
    $("#tst"+ID).fadeIn("slow", function()
    {
        $f("player"+ID, {src: "players/nobranding.swf", wmode: 'opaque'},
        {
            clip: 
            {
                autoPlay: true
            },

            playlist: 
            [
                'videos/IMPORTS/'+link,
            ],
            plugins:
            {
                controls: 
                {
                    playlist: true
                }
            }
        }
        ).ipad();
    });
}

function showPopup(popupID, scrollToTop, slideDown) {

    if (scrollToTop === undefined){
        scrollToTop = true;
    }
    else{
        scrollToTop = false;
    }

    if (slideDown === undefined){
        slideDown = false;
    }
    else{
        slideDown = true;
    }

    // see if there is an overlay, and if not, insert it to the begining of the body
    if($(".overlay").length != 1) {
        $(".overlay").remove();

        $("body").prepend("<div class='overlay'></div>");
    }

    // Ensure overlay covers the entire window, not just the viewport
    $(".overlay").css({'height': $(document).height()});
    //$('html,body').animate({scrollTop: error_location}, 'slow', 'swing', function(){firstError.focus();});
    // fade in transparent layer (can't use fadeIn because that screws with opacity)
    $(".overlay").show().animate(
        {
            opacity: 0.7
        },
        "slow"
    );

    if (scrollToTop){
        $('html,body').animate({scrollTop: 0}, 'slow', 'swing');
    }

    // Show the popup
    if (!slideDown){
        $("#" + popupID).fadeIn("slow");
    }
    else{
        $("#" + popupID).slideDown();
    }
} 
```

# asp.net - ASP.NET 长时间运行的任务思路

> ID：10882335
> 
> 赞同：2
> 
> 时间：2012-06-04T13:39:53.737
> 
> 标签：asp.net, azure-webjobs

很多时候，我必须使用 SQL 服务器从 asp.net 站点向第三方会计系统发送数据或从第三方会计系统发送数据。数据导入通常需要一段时间，我正在尝试找到处理长时间运行任务的最佳方法，如果他们想了解它的运行情况，可以更新用户。我的问题是以下方法的优缺点是什么，您推荐什么，为什么？

*   旧式asp response.write：*我实际上使用了很多，目前是我的首选方法，因为它很快。我真的没有很多问题。我认为应用程序池回收将是一个问题，但我认为它不会在请求中间进行回收。*

*   使用此处建议的 IFrame [http://encosia.com/easy-incremental-status-updates-for-long-requests/](http://encosia.com/easy-incremental-status-updates-for-long-requests/)：*与上述方法类似，但这是异步的。我不确定这是否允许 asp .net 重启*

*   一个从站点调用 Web 服务的单独 Windows 应用程序：*我使用过这种方法，但是设置时间会更长一些，并且会在应用程序池回收时停止运行。我可能不会使用这种方法*

*   Windows 工作流程：没有使用过，但似乎（特别是对于小数据更新）会过大

*   Windows 服务：同上。好像太难了

*   Ajax，用于轮询缓存结果的单独线程和计时器：我也使用过很多次，但如果应用程序池回收，这将停止，因为它位于 asp.net 不知道的单独线程上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:13:43.210

如果作业花费的时间超过几分钟，我建议将作业添加到数据库中，在该数据库中，作业的状态可以通过执行工作的进程进行更新。您可以实现一个小型命令行应用程序或 Windows 服务（它们确实不错，请参阅[用 .NET 在五分钟内编写有用的 Windows 服务](http://blogs.msdn.com/b/bclteam/archive/2005/03/15/396428.aspx)）来监视数据库中的新作业。当它找到一个时，它会拿起它并随时更新其状态。最终用户可以被重定向到列出每个作业及其进度的页面。当作业完成时，数据库行被更新并且应用程序等待新作业的出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:00:16.170

这实际上是一个问题，即您希望执行的后台任务有多重要以及触发它的原因。如果它是在每个已知间隔内发生的经常性事件，我发现在应用程序线程（global.asax）上创建一个计时器最好像下面的例子：

在 ASP.NET 中实现重复的后台任务 - [http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)

为了覆盖客户端，iframe 可以解决问题，但 Ajax 请求会更优雅一些。

只要您在 HostingEnvironment.RegisterObject 上签署您的任务，池回收就不会干扰您的工作。

# python - 使用 R 或 python 在坐标系中绘制向量

> ID：10882336
> 
> 赞同：14
> 
> 时间：2012-06-04T13:39:56.023
> 
> 标签：python, r, vector, plot, coordinate-systems

我正在寻找有关在笛卡尔平面上绘制矢量的建议。任务是绘制点（坐标），然后用箭头将它们链接到某个源点（比如 0,0）。下面的图片应该给出一个想法。我不关心颜色和命名向量/点，它只是在坐标平面上绘制箭头。我确信R（或python）中存在一些用于绘制线性代数向量和运算的库。

任何指针将不胜感激！

[![平面上的向量](../Images/8f20da62a3f89111d718e8d60e4a172d.png)](https://i.stack.imgur.com/9oyac.png)
[（来源：[mathinsight.org](http://mathinsight.org/media/image/image/vector_2d_add.png)）]

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-04T13:51:55.113

或者你可以`arrows`在 R 中使用函数。

```
plot(c(0,1),c(0,1))
arrows(0,0,1,1) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-04T16:30:00.527

```
plot(NA, xlim=c(0,5), ylim=c(0,5), xlab="X", ylab="Y")
vecs <- data.frame(vname=c("a","b","a+b", "transb"), 
                   x0=c(0,0,0,2),y0=c(0,0,0,1), x1=c(2,1,3,3) ,y1=c(1,2,3,3), 
                   col=1:4)
with( vecs, mapply("arrows", x0, y0, x1,y1,col=col) ) 
```

如果将 lwd=3 添加到`arrows`调用中，它看起来会好一些。该`text`函数将允许标记并且可以使用“srt”参数进行旋转。

```
plot(NA, xlim=c(0,5), ylim=c(0,5), xlab="X", ylab="Y", lwd=3)
 with( vecs, mapply("arrows", x0, y0, x1,y1,col=col,lwd=3) )
 with(vecs, mapply('text', x=x1[1:3]-.1, y=y1[1:3]+.1, 
  labels=expression(list(a[1],a[2]), list(b[1],b[2]), list(a[1]+b[1],a[2]+b[2]) ) )) 
```

![在此处输入图像描述](../Images/798b440c816a0943666439e532195bed.png)

请注意，调用中的`list`函数`expression`是 plotmath -call `list`，与常规 R 不同，`list`就像 plotmath-`paste`与常规不同一样`paste`。它不会尝试在父框架中评估其参数。为此，需要`bquote`或`substitute`可能需要使用`sapply`be 来处理“内部”表达式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-29T16:30:40.560

绘制一些随机 2 级向量的 Easy(TM) 方法。我首先计算欧几里得范数，否则箭头函数将绘制箭头从一个点到另一个点创建一个三角形，这很好解释，但不是我们想要的。其余的很简单：

```
#first some vectors 
v1<-c(-3,5)
v2<-c(2,-10)
v3 <-c(0,-3)
v4 <- c(2,5)
# This one for the coordinates of the plot
ax<-c(-10,10)
# I will need the euclidean norm (two-norm) of the vectors: 
mag <- function(x) sqrt(sum(x^2))
# I call plot to set up the "canvas"
plot(ax,ax,main="Test")
# I do the stuffz, the FIRST pair of params is the ORIGIN
arrows(0,0, mag(v1),mag(v2),lwd=4,col="red")
arrows(-2,1, mag(v3),mag(v4),lwd=4,col="blue") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T13:51:01.867

最明显的做法是使用 python 的`matplotlib`包，它有很多绘图功能。

具体来说，您想对[这个示例](http://matplotlib.sourceforge.net/examples/pylab_examples/arrow_demo.html)进行逆向工程。

另一种获得好结果的方法，以一种更具艺术性和更少笛卡尔的方式，是使用`rsvg`. 我从未尝试过，但 SVG 应该具有对箭头的原生支持。此外，如果需要，可以在 Inkscape 等绘图程序中编辑 SVG 文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-14T08:56:59.573

查看[matlib 包](https://www.rdocumentation.org/packages/matlib/versions/0.9.2)。

```
library(matlib)
#setting up the plot
xlim <- c(0,6)
ylim <- c(0,6)
par(mar=c(3,3,1,1)+.1)
plot(xlim, ylim, type="n", xlab="X1", ylab="X2", asp=1)
grid()
# define some vectors
a=c(4,2)
b=c(1,3)
# plot the vectors
vectors(b, labels="b", pos.lab=4, frac.lab=.5, col="green")
vectors(a, labels="a", pos.lab=4, frac.lab=.5)
vectors(a+b, labels="a+b", pos.lab=4, frac.lab=.5, col="red")
# vector a+b starting from a is equal to b.
vectors(a+b, labels="b", pos.lab=4, frac.lab=.5, origin=a, col="green") 
```

[![结果](../Images/2bfca77f61640dd656bd52cdc901017e.png)](https://i.stack.imgur.com/LI1bM.png)

# report - 在 TestNG 报告中提供测试输出的链接

> ID：10882344
> 
> 赞同：0
> 
> 时间：2012-06-04T13:40:42.770
> 
> 标签：report, testng

在我的测试中，我捕获每个测试的输出并将它们保存为目录中的 html 文件。如何在 TestNG 报告中为每个测试提供指向这些输出的链接？

例如，如果 testNG 结果中记录了失败，它还会提供指向已保存 html 文件的链接。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T01:05:17.097

It all depends on where and how you want to report the results. It sounds like you want to create a custom TestNG report that will contain information on the status as well as link to the file generated. There are two main ways to accomplish this in TestNG:

1.  Create a test listener - implements [org.testng.ITestListener](http://testng.org/javadocs/org/testng/ITestListener.html), reports status of every tests immediately after tests is executed.
2.  Create a test reporter - implements [org.testng.IReporter](http://testng.org/javadocs/org/testng/IReporter.html), provides a consolidated result of the test statuses, when all the tests were executed.

You can refer to [TestNG](http://testng.org/doc/documentation-main.html#logging-listeners) web site for some examples on listeners.

# templates - 如何使用 knockoutjs 进行模板化

> ID：10882352
> 
> 赞同：0
> 
> 时间：2012-06-04T13:41:08.697
> 
> 标签：templates, knockout.js

我对 KnockOutJS 相当陌生。我想使用knockoutjs的模板功能。我喜欢建立一个带有页眉、内容部分和页脚的网站。在内容部分，我想在您单击按钮时滑入模板（从右到左）。

有人知道设置它的最佳方法是什么吗？或者有人有我的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:44:16.273

[教程](http://learn.knockoutjs.com/#/?tutorial=intro)中有大量示例。这是“模板”绑定文档的[链接。](http://knockoutjs.com/documentation/template-binding.html)

根据您对 Knockout 的认可，我建议您先阅读所有教程，然后再开始尝试将 jQuery 或其他动画库合并到组合中等复杂的事情。

# vbscript - VBScript 无法从 MSI 文件正确执行

> ID：10882362
> 
> 赞同：7
> 
> 时间：2012-06-04T13:41:33.330
> 
> 标签：vbscript, windows-installer, setup-project

我有一个需要从 MSI 文件执行的 VBScript。当我在 Windows 中单独运行该脚本时，它会正确执行，但是，当我从安装程序运行它时，会出现以下错误，如日志文件中所示：

```
Microsoft VBScript runtime error: object required: 'WScript', Line 3, Column 2 
```

脚本如下：

```
sub shell(cmd)
    Set objShell = WScript.CreateObject("WScript.Shell")

    objShell.Run("""" & cmd & """")
    Set objShell = Nothing
end sub

set objFSO = CreateObject("Scripting.FileSystemObject")

strcmd32 = "C:\Path\PathToExecutable.exe"
strcmd64 = "C:\Path\PathToExecutable64.exe"

if (objFSO.FileExists(strcmd32)) then
    shell(strcmd32)
else 
    shell(strcmd64)
end if

set objFSO = Nothing 
```

如前所述，如果我在安装程序的上下文之外运行此脚本，它运行良好。安装项目类型是 VS2010 安装和部署包（这是客户希望使用的，我不能使用其他任何东西）。有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T14:13:37.193

在“shell”子中，我在调用“CreateObject()”之前从第一行中删除了 WScript。修改后的行现在看起来像这样：

```
'Note the absent reference to WScript on the call to CreateObject()
Set objShell = CreateObject("WScript.Shell") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T16:19:11.577

如果您只有一个包含一些合并模块和应用程序文件的简单项目，您可以使用更好的工具[Advanced Installer](http://www.advancedinstaller.com/download.html)。您可以根据需要使用免费版本，即创建“简单”项目类型。添加合并模块和文件不会超过一分钟。

现在很容易的部分是您完全摆脱了自定义操作，创建可以转到文件和文件夹页面并使用上下文菜单选项或工具栏的快捷方式，您可以创建一个[外部快捷方式](http://www.advancedinstaller.com/user-guide/shortcuts.html)，您可以将其配置为指向合并模块中的文件，甚至不指向包中的文件。

通过这种方式，您可以创建更简洁的安装包，更轻松，并且不必担心自定义操作失败的可能性。

# javascript - 如何多次引用我的html5画布绘图？

> ID：10882365
> 
> 赞同：0
> 
> 时间：2012-06-04T13:41:43.580
> 
> 标签：javascript, html, canvas, html5-canvas, getelementbyid

我已经使用画布创建了一个绘图，我打算多次将其用于各种导航链接，我的问题是，当我多次引用它时，它只会显示 1。显然我可以为每个实例复制代码，但我计划经常使用它，所以这并不理想。请查看下面的代码和链接的 jsfiddle。非常感谢。

[http://jsfiddle.net/LTu2H/](http://jsfiddle.net/LTu2H/)

```
//first reference
<canvas id="canvasId" width="50" height="50"></canvas>
//second reference 
<canvas id="canvasId" width="50" height="50"></canvas>

<script>
var context = document.getElementById("canvasId").getContext("2d");

var width = 125;  // Triangle Width
var height = 45; // Triangle Height
var padding = 5;

// Draw a path
context.beginPath();
context.moveTo(padding + width-125, height + padding);        // Top Corner
context.lineTo(padding + width-90,height-17 + padding); // point
context.lineTo(padding, height-35 + padding);         // Bottom Left
context.closePath();

// Fill the path
context.fillStyle = "#9ea7b8";
context.fill();
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:47:34.933

您只能拥有唯一的 ID

* * *

HTML：

```
<canvas id="canvasId" width="50" height="50"></canvas>
<canvas id="canvasId2" width="50" height="50"></canvas> 
```

JS：

```
function drawSomething(canvas) {
    var context = canvas.getContext("2d");

    var width = 125;  // Triangle Width
    var height = 45; // Triangle Height
    var padding = 5;

    // Draw a path
    context.beginPath();
    context.moveTo(padding + width-125, height + padding);        // Top Corner
    context.lineTo(padding + width-90,height-17 + padding); // point
    context.lineTo(padding, height-35 + padding);         // Bottom Left
    context.closePath();

    // Fill the path
    context.fillStyle = "#9ea7b8";
    context.fill();

}

drawSomething(document.getElementById("canvasId"));
drawSomething(document.getElementById("canvasId2")); 
```

# c++ - 实现数学公式时的溢出问题

> ID：10882368
> 
> 赞同：4
> 
> 时间：2012-06-04T13:41:53.797
> 
> 标签：c++, algorithm, numerical-methods, integer-overflow

我听说，在计算平均值时，start+(end-start)/2 与 (start+end)/2 不同，因为后者会导致溢出。我不太明白为什么第二个会导致溢出，而​​第一个不会。实现可以避免溢出的数学公式的通用规则是什么。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-04T13:48:51.243

假设您使用的计算机的最大整数值为 10，并且您想要计算 5 和 7 的平均值。

第一种方法 (begin + (end-begin)/2) 给出

```
5 + (7-5)/2 == 5 + 2/2 == 6 
```

第二种方法 (begin + end)/2 给出了溢出，因为中间的 12 值超过了我们接受的最大值 10 并“换行”到其他东西（如果您使用无符号数字，通常会换行到零，但如果你的数字是签名的，你可能会得到一个负数！）。

```
12/2 => overflow occurs => 2/2 == 1 
```

* * *

当然，在实际计算机中，整数会以 2^32 而不是 10 这样的大值溢出，但想法是一样的。不幸的是，没有我所知道的摆脱溢出的“通用”方法，这在很大程度上取决于您使用的特定算法。然后事件，事情变得更加复杂。根据您在后台使用的数字类型，您可以获得不同的行为，除了上溢和下溢之外，还有其他类型的数字错误需要担心。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-04T13:57:16.623

您的两个公式都会溢出，但在不同的情况下：

*   当并且都接近范围同一侧的整数限制时（即均为正数或均为负数）`(start+end)`，您的`(start+end)/2`公式部分将溢出。`start``end`
*   当为正数和负数时，公式的`(end-start)`一部分将溢出，并且两个值都接近可表示整数值的各自末端。`start+(end-start)/2``start``end`

没有“通用”规则，您可以根据具体情况进行操作：查看公式的某些部分，考虑可能导致溢出的情况，并想出避免溢出的方法。例如，`start+(end-start)/2`当您对具有相同符号的值进行平均时，可以显示公式以避免溢出。

这是艰难的道路；简单的方法是对中间结果使用更高容量的表示。例如，如果您使用`long long`而不是`int`进行中间计算并仅在完成后将结果复制回，`int`则假设最终结果适合`int`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T13:58:42.253

在处理整数时，您可能会在采用此类策略时关心[整数溢出。](http://en.wikipedia.org/wiki/Integer_overflow)

请注意，使用公式`b+(b-a)/2`您要确保`a <= b`. 否则，您可能会在可能值范围的下限处遇到相同的问题。想想`a/2+b/2`。然而，这种方法也有其他缺点。

* * *

处理浮点数时会出现另一个问题，即[灾难性取消](http://en.wikipedia.org/wiki/Catastrophic_cancellation)。由于浮点表示的有效数字数量有限，当添加大量数字时，准确性会丢失（即使这只是一个中间步骤）。

为了解决这个数值稳定性问题，例如可以使用这个算法（稍微改编自[维基百科](http://en.wikipedia.org/wiki/Algorithms_for_calculating_variance)）：

```
def online_mean(data):
  n = 0
  mean = 0

  for x in data:
    n = n + 1
    delta = x - mean
    mean = mean + delta/n

  return mean 
```

我不知何故觉得与你上面提出的公式有关系......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-19T06:00:58.080

在二分搜索中，我们将编写以下代码：

```
if(start > end){
   return;
}
int mid = start + (end - start) / 2; 
```

通过使用`start + (end - start) / 2`，我们可以避免@dasblinkenlight 指出的问题

如果我们使用`(start + end) / 2`，它会溢出，如 dasblinkenlight 所示

# websocket - WebSocket 请求-响应子协议

> ID：10882370
> 
> 赞同：83
> 
> 时间：2012-06-04T13:42:13.547
> 
> 标签：websocket

WebSocket 提供了一种双向通信，就像人类谈话一样。客户端可以向服务器发送数据，服务器可以随时向客户端发送数据。但是请求-响应行为呢？客户端可以向服务器询问某些内容并等待响应。Websocket 似乎没有提供任何东西来将客户端数据（请求）链接到服务器数据（响应）。

这可能是子协议的工作，我对如何做到这一点有一些想法（在请求中发送一个 ID 并在超时期限内等待具有相同 ID 的响应）。

为了不重新发明轮子并节省一些时间，我在互联网上查看了现有的解决方案，但我没有找到任何相关的东西（可能是错误的关键字）。

那么，有没有人知道这种工作或者我错过了什么？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-06-04T14:13:48.753

WebSocket 应用程序消息传递协议 (WAMP) [https://wamp-proto.org/](https://wamp-proto.org/)为此目的在原始 WebSocket 之上提供 RPC（远程过程调用）和 PubSub（发布和订阅）消息传递模式。

WAMP 是一个适当的 WebSocket 子协议，使用 WebSocket 作为传输和 JSON 作为有效负载格式。RPC 是使用 3 条消息实现的，这些消息包含一个“调用 ID”，用于将异步 RPC 服务器响应与客户端发起的过程调用相关联。

免责声明：我是 WAMP 和一些（开源）WAMP 实现的作者。这是一个开放的倡议，其他人已经开始上船了。最终，应该有一个正确定义协议的 WAMP RFC .. 但它仍处于早期阶段。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-13T15:16:51.450

我会使用 JSON-RPC 2.0。

[http://www.jsonrpc.org/specification](http://www.jsonrpc.org/specification)

每条消息都是一个 JSON 对象。协议说明它是需要响应（与 id 耦合）还是通知的呼叫。

支持 JSON-RPC 的应用程序可以轻松检查消息对象是否包含方法（表示调用）或不包含表示响应的方法。

我即将构建一个 javascript 库来处理 websocket 上的 json rpc，并使用 ajax 作为后备......</p>

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-01-28T14:41:03.753

> （发送请求的 id 并等待具有相同 id 的响应，直到超时）

我创建了一个正是这样做的库，称为 WebSocketR2（其中 R2 表示请求响应）：[https ://github.com/ModernEdgeSoftware/WebSocketR2](https://github.com/ModernEdgeSoftware/WebSocketR2)

如果连接丢失，它还会处理重新连接到服务器，如果您通过负载平衡器执行 Web 套接字，这可能会很有帮助。

最终结果是您可以像这样在 Web 套接字发送函数上实现回调：

```
var request = {
    action: "login",
    params: {
        username: "test",
        password: "password"
    }
};

ws.send(request, function(response){
    console.log(response)
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-19T18:37:56.037

看看[SwaggerSocket](https://github.com/wordnik/swaggersocket)，它是所有主要 Java WebServer 都支持的基于 WebSockets 的 REST 协议。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-22T05:18:41.540

看看[msg-rpc](https://github.com/rooseve/msg-rpc)，它通过简单的消息接口提供**双向**rpc 支持，包括 WebSocket。

不仅是简单的 rpc，它可以涵盖“客户端请求/服务器响应”行为，它还支持“服务器请求/客户端响应”行为，即通过 Rpc 服务。

首先，有 sockjs 和 socket.io 示例。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-19T17:06:02.517

我正在使用 websockets 运行一个简单的请求响应程序。请参阅“ [Websocket 服务器演示](http://highlevellogic.blogspot.se/2011/09/websocket-server-demonstration_26.html)”。您可以下载网页源代码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-12T06:39:10.770

这个讨论有点晚了，但是，[BrokerJS](https://github.com/mind-matrix/brokerjs)是您可以在 NodeJS 中尝试的一种反应式替代方案。定义一个数据模型并将 websocket 连接订阅到模型的特定键。对服务器端变量的任何更改都会自动反映在客户端。我认为这将为您节省大量样板代码。更好的是，您仍然可以使用与新的反应式处理方式并行的老式 websocket 消息传递。它远非抛光产品，阵列令人头疼。但结合 VueJS、React 或 Svelte 之类的东西，我认为它会为你省去很多麻烦。

免责声明：我是 BrokerJS 的作者。

# c++ - std::stringstream 没有命名类型（全局）

> ID：10882376
> 
> 赞同：-1
> 
> 时间：2012-06-04T13:42:39.163
> 
> 标签：c++, stringstream

我正在模拟一些 Ising 模型（带有 1 或 -1 的格子），我不想使用文件（我想这里不打算详细介绍：D）。所以，问题是，我使用字符串流来格式化数据和数据的文件名，然后用 bash 将它们分开。显示示例代码

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>    
#include <iostream>
#include <sstream>
#include <string>    
using namespace std;
void print2bash(string file, string data);

int main(int argc, char *argv[]){

    int i, j, n = atoi(argv[1]);
    // I want to put this outside main() {
    stringstream ssbash;    ssbash.clear(); ssbash.str(""); 
    stringstream ssfile;    ssfile.clear(); ssfile.str("");
    //} 
    //  So I don't have to do ss.clear and ss.str("") every time before using them

    ssfile << "this_" << n << "_is_the_filename.dat" << endl;
    for(i = 0; i < n ; i++){
        for(j = 0; j < n; j++)
            ssbash << i*n+j << "\t";
        ssbash << endl;
    }

    print2bash( ssfile.str(), ssbash.str() );

    return 0;
}
// print2bash(); prints string data; to string file; 
//               This will be used to separate data 
//               afterwards ( i.e. ./Ising.o <arguments> | bash )  
void print2bash(string file, string data){

    stringstream ssbash;    ssbash.clear(); ssbash.str(data);       
    stringstream output;    output.clear(); output.str("");
    string line;

    output << "for((i=0;i<1;i++)) do "<< endl; // Buffer all to bash at once
    while( getline(ssbash,line) )
        output << "    echo \"" << line << "\";" << endl;

    output << "done >> " << file; // Appending
    cout << output.str() << endl;

    ssbash.clear(); ssbash.str("");

    return ;
} 
```

这个“sstreams.o”程序的常规输出是

```
~work/Ising$ ./sstreams.o 5
for((i=0;i<1;i++)) do 
    echo "0 1 2 3 4 ";
    echo "5 6 7 8 9 ";
    echo "10 11 12 13 14 ";
    echo "15 16 17 18 19 ";
    echo "20 21 22 23 24 ";
done >> this_5_is_the_filename.dat 
```

你明白吗？从这个思维流程来看，我实际上写的是`./sstreams.o 10 | bash`这样一个很好的分离文件。但问题是：

**每次我想使用 print2bash() 时，我都**厌倦了写这些行（哦，具有讽刺意味！）****

 **```
stringstream ssbash;    ssbash.clear(); ssbash.str(""); 
stringstream ssfile;    ssfile.clear(); ssfile.str(""); 
```

正因为如此，我想把`ss`as 全局变量（不知道这是否是那种可怕的，所以编译器不让我这样做：我只是一个物理学家）。因此，即使我在s （和）`std::stringstream`之后为 ss 变量编写，我仍然会收到错误`#include``using namespace std`

```
error: ‘ssbash’ does not name a type
error: ‘ssbash’ does not name a type
error: ‘ssfile’ does not name a type
error: ‘ssfile’ does not name a type 
```

从编译器。希望你能帮助我。

* * *

编辑：**[已解决]**

问题是，如果我想声明一个`stringstream`out of `main()`it 失败，因为成员`clear`& `str`where 脱离上下文，所以它们不能被使用。`stringstream`除此之外，正如@jpalecek 和@umlaeute 指出的那样，这种使用是不必要的，因为s 是用空内容创建的。

我已经将`stringstream`s 声明为 out of main 并包含一个`clear()`+`str("")`以`print2bash()`提供所需的结果：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>    
#include <iostream>
#include <sstream>
#include <string> 
#include <vector>

using namespace std;

stringstream ssbash, ssfile;

void print2bash(string file, string data);

int main(int argc, char *argv[]){

    int i, j, n = atoi(argv[1]), p, np = atoi(argv[2]);
    vector< vector<int> > chain;    chain.resize(n*n);

    for( p = 0; p < np; p++){

        ssfile << "chain_p="<< p << "_filename.dat" << endl;
        for(i = 0; i < n ; i++){
            for(j = 0; j < n; j++){

                chain[p].push_back( i*n + j );
                ssbash << i*n+j << "\t";
            }
            ssbash << endl;
       }
       print2bash( ssfile.str(), ssbash.str() );
    }

    return 0;
}
void print2bash(string file, string data){

    ssbash.str(data);
    stringstream output;
    string line;

    output << "for((i=0;i<1;i++)) do "<< endl; // Buffer all to bash at once
    while( getline(ssbash,line) )
       output << "    echo \"" << line << "\";" << endl;

    output << "done >> " << file; // Appending 
    cout << output.str() << endl;

    ssfile.clear(); ssfile.str("");
    ssbash.clear(); ssbash.str("");

    return ;
} 
```

的常规输出`./sstreams.o`

```
~/work/Ising$ ./sstreams.o 4 2
for((i=0;i<1;i++)) do 
    echo "0 1   2   3   ";
    echo "4 5   6   7   ";
    echo "8 9   10  11  ";
    echo "12    13  14  15  ";
done >> chain_p=0_filename.dat

for((i=0;i<1;i++)) do 
    echo "0 1   2   3   ";
    echo "4 5   6   7   ";
    echo "8 9   10  11  ";
    echo "12    13  14  15  ";
done >> chain_p=1_filename.dat 
```

感谢一切

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T13:55:48.810

你不用打电话

```
ssbash.clear(); ssbash.str(""); 
```

因为 stringstream 对象是使用空内容自动创建的。这让你有了

```
stringstream ssbash;
stringstream ssfile; 
```

这*可能*是一个全局声明，但**不要这样做**，因为它对你没有帮助。每次使用时都必须清除它。

如果您不喜欢一遍又一遍地重复声明，您可以用宏替换它们

```
#define DECLARE_STREAMS \
  stringstream ssbash; \
  stringstream ssfile; 
```

或更好

```
#define DECLARE_STREAMS(a, b) \
  stringstream a; \
  stringstream b; 
```

像这样使用：`DECLARE_STREAMS(ssbash, ssfile)`.

但是最好的（也是最干净的）解决方案是重构将数据格式化为单个函数的代码。这样，您就不必担心重复流声明。

顺便说一句，您为什么不使用 C++ 写入文件而不是发出执行写入的脚本超出了我的范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T13:55:51.277

C/C++ 禁止您在函数之外执行代码（除了变量声明/定义）。

因此以下内容是非法的：

```
int main(int argc, char**argv) {
   return 0;
}
stringstream ssbash; // OK
ssbash.clear(); // ouch; procedural programming outside of context
ssbash.str(""); // ouch; procedural programming outside of context 
```

如果您需要调用 clear() 和 str()，那么您*必须*在初始化函数中执行此操作

```
static stringstream ssbash, ssfile;
void initSS(void) {
   ssbash.clear(); ssbash.str("");
   ssfile.clear(); ssfile.str("");
}

int main(int argc, char**argv) {
   initSS();
   // ....
   return 0;
} 
```**

# php - PHP Str_replace 与 for 循环

> ID：10882378
> 
> 赞同：0
> 
> 时间：2012-06-04T13:42:50.590
> 
> 标签：php, mysql, str-replace, preg-match-all

我正在尝试为每个`textarea`人命名，以便以后可以使用它们将它们发送回数据库。使用这段代码，我得到了一些奇怪的结果，我猜是因为我使用`str_replace`.

这是代码：

```
$description2 = mysql_result($product, 0, 'productDescription2');
$totalteknisk = preg_match_all('/x(a|b|d|e)/', $description2, $matches);
$searchArray = array('xa', 'xb', 'xc', 'xd', 'xe');

if ($description2 !=""){
for($z=1;$z <= $totalteknisk; $z++){
$xa = '<textarea name="'. $z .'" style="background-color:#FFFFFF;resize: none; height: 20px; width: 200px;">';
$z++;
$xb ='</textarea><textarea name="'. $z .'" style="background-color:#FFFFFF;resize: none; height: 20px; width: 200px;">';
$z++;
$xc = '</textarea><br>';
$xd = '<textarea name="'. $z .'" style="background-color:#EAF2D3;resize: none; height: 20px; width: 200px;">';
$z++;
$xe = '</textarea><textarea name="'. $z .'" style="background-color:#EAF2D3;resize: none; height: 20px; width: 200px;">';
$replaceArray = array($xa, $xb, $xc, $xd, $xe);
$teknisk .=  str_replace($searchArray, $replaceArray, $description2);   
}                               
} 
```

来自数据库的示例字符串`xa1xb2xcxd3xe4xcxa5xb6xc`(description2)

正如你所看到的，我试图将它全部循环并给它一个值 1 到`$totalteknisk`.

我愿意就如何使这项工作提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:18:22.953

我通过使用 preg_replace_callback(...) 以不同的方式解决了它

```
$description2 = 'xa1xb2xcxd3xe4xcxa5xb6xc';

$html = preg_replace_callback('/x(?:a|b|c|d|e)/', function($match) {
    static $count;

    $count++;

    switch($match[0]) {
        case 'xa':
            return "<textarea name=\"$count\" style=\"background-color:#FFFFFF;resize: none; height: 20px; width: 200px;\">";
        case 'xb':
            return "</textarea><textarea name=\"$count\" style=\"background-color:#FFFFFF;resize: none; height: 20px; width: 200px;\">";
        case 'xc':
            return "</textarea><br />";
        case 'xd':
            return "<textarea name=\"$count\" style=\"background-color:#EAF2D3;resize: none; height: 20px; width: 200px;\">";
        case 'xe':
            return "</textarea><textarea name=\"$count\" style=\"background-color:#EAF2D3;resize: none; height: 20px; width: 200px;\">";
    }
}, $description2);

$teknisk .= $html; 
```

我还建议您不要只使用数字作为文本区域中的“名称”属性。您可能应该考虑使用其他名称，例如`fields[$count]`，然后通过以下方式引用它`$_POST['fields'] ...`

# c# - 在 C#/XNA 中转换 3D 图元的正确方法？

> ID：10882381
> 
> 赞同：0
> 
> 时间：2012-06-04T13:43:24.443
> 
> 标签：c#, 3d, matrix, xna

我有一个 Block 类，它基本上包含一个 36 个顶点的数组，一个围绕原点 (0, 0, 0) 构建块的构造函数，以及一个更新方法。

我正在使用物理库来操作块。我为块分配了一个身体和碰撞皮肤，并在每次更新时更新物理步骤。每次更新后，我都会得到一个矩阵，其中包含块的新位置、方向等。

现在，我无法理解的是将矩阵应用于块并有效地每帧更新顶点缓冲区的最佳方法。

这基本上就是我目前所拥有的，我几乎肯定有更好的方法......

```
class Block
{
    const float FullBlockSize = 20f;
    const float HalfBlockSize = FullBlockSize / 2;

    public VertexPositionNormalTexture [] vertices = new VertexPositionNormalTexture[36];
    public VertexPositionNormalTexture [] currentVertices = new VertexPositionNormalTexture[36];
    public DynamicVertexBuffer vBuffer;

    Vector3 position;

    public Block(Vector3 blockPosition)
    {
        position = blockPosition * FullBlockSize;

        /*
         * Build the 6 faces of the block here.
         * The block is built around the origin,
         * (0, 0, 0) being the center of the block.
        */

        vBuffer = new DynamicVertexBuffer(Game.Device, VertexPositionNormalTexture.VertexDeclaration, vertices.Length, BufferUsage.WriteOnly);
        vBuffer.SetData(vertices);
    }
    public Matrix WorldMatrix
    {
        get
        {
            return Matrix.CreateTranslation(position);
        }
    }
    public void Update()
    {
        currentVertices = (VertexPositionNormalTexture[])vertices.Clone();
        Matrix currentWorld = WorldMatrix;
        for(int i = 0; i < currentVertices.Length; ++i)
        {
            currentVertices[i].Position = Vector3.Transform(currentVertices[i].Position, currentWorld);
        }
        vBuffer.SetData(currentVertices);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:18:16.107

让着色器来做...着色器的参数之一通常是 WorldMatrix...

绘制它：

```
effect.Parameters["WorldMatrix"].SetValue(World);
effect.Apply(0); 
```

如果您在绘制块时遇到问题...尝试自己创建一个世界变换矩阵并对其进行测试...

```
effect.Parameters["WorldMatrix"].SetValue(Matrix.CreateRotationZ(angle));
effect.Apply(0); 
```

如果您有多个块实例，则可以使用实例化将 vertexBuffer 中的 trasnform 矩阵传递给着色器...

在这里您可以找到有关实例化的信息：http: [//blogs.msdn.com/b/shawnhar/archive/2010/06/17/drawinstancedprimitives-in-xna-game-studio-4-0.aspx](http://blogs.msdn.com/b/shawnhar/archive/2010/06/17/drawinstancedprimitives-in-xna-game-studio-4-0.aspx)

# html - CSS - 带有波状边框的框架

> ID：10882382
> 
> 赞同：2
> 
> 时间：2012-06-04T13:43:24.507
> 
> 标签：html, css, canvas, shapes

我想为网站中的图像和文本制作摇摇晃晃的框架（如果它们可以移动，那将是最佳选择），但我不知道该怎么做。我一直在研究 paperjs.org，但我不确定是否可以使用它来包装不规则形式的 HTML 文本。

你们知道我可以用来做这种效果的任何库或技术吗？或者在网络的当前状态下可能是不可能的？

![在此处输入图像描述](../Images/c6915e1935e4e93bd8e8fb0d278ffb63.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:17:11.400

一个简单但不太理想的解决方案是发布您的 html 内容，z-index 为 1，然后将背景的 PNG 放置在 z-index 为 2 的内容顶部。

这将允许您模拟您发布的图片，但无法添加任何内容形状的动画。尽管您可以将背景平移到左侧或右侧（模拟向左或向右行走时透过窗户看的效果）。

如果您想创建相同的效果，但可以为形状设置动画，您可能会想使用[HTML5 Canvas](http://www.html5tutorial.info/html5-canvas-rect.php)，但具体如何做到这一点超出了我的范围。

# c# - 将单选按钮转换为字符

> ID：10882387
> 
> 赞同：0
> 
> 时间：2012-06-04T13:43:42.033
> 
> 标签：c#, winforms, linq, radio-button

我有三个单选按钮。请看图片。

![单选按钮](../Images/9c48721595aed1376d2a295232e73288.png)

我定义了一个变量

```
char temp; 
```

我想要的是

如果选择“男性”，则

```
temp = "M"; 
```

如果选择“女性”，则

```
temp = "F"; 
```

如果选择“两者”，则

```
temp = "B". 
```

我未完成的代码：

```
temp = Convert.ToChar(this.Controls.OfType<RadioButton>().FirstOrDefault(r => r.Checked)); 
```

谢谢你的建议。

**编辑：** 控件位于组框中。在调试模式下。我有一个错误。

> ?groupBox4.Controls.OfType() {System.Linq.Enumerable.OfTypeIterator} 来源：null 和 ?groupBox4.Controls.OfType().FirstOrDefault(r=>r.Checked).Text 表达式不能包含 lambda 表达式

**编辑 2：** 见图片。运行代码获取异常。 ![错误](../Images/11d0bcbb5fcb8344c4a0ddc2c9177562.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T13:46:42.600

如果我理解正确，那么这是基于您（不那么推荐）假设每个 RadioButton 的**名称**以不同的字母开头。

```
temp = Convert.ToChar(this.Controls.OfType<RadioButton>().FirstOrDefault(r => r.Checked).Name.Substring(0, 1)); 
```

**编辑：** 相同的假设，但基于*Text*属性而不是*Name*属性

```
 temp = Convert.ToChar(this.Controls.OfType<RadioButton>().FirstOrDefault(r => r.Checked).Text.Substring(0, 1)); 
```

**Edit2：（**基于 OPs Edit - 检查 Checked RadioButton 是否存在）：

```
RadioButton rb = this.Controls.OfType<RadioButton>().FirstOrDefault(r => r.Checked);

if (rb != null)
{
    temp= rb.Text[0];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:34:03.893

它应该是：

```
Controls.OfType<RadioButton>().Where(r => r.Checked).FirstOrDefault(); 
```

# javascript - Knockout.js：向 observable-array 添加元素

> ID：10882389
> 
> 赞同：4
> 
> 时间：2012-06-04T13:44:07.153
> 
> 标签：javascript, knockout.js

我在将元素加载到我的项目 Observable-Array 时遇到问题 - 有一个事件。

```
ViewModel = (function () {
    var 
        items = ko.observableArray([]),

        removeItems = function (element) {
            items.remove(element);
        },
        saveAll = function () {
            return ko.toJS(items);
        },
        addItem = function (element) {
            items.push(element);
            return false;  // no Page-Reload after button-klick
        };

    return {
        Items: items,
        // i call addItem with a dummy object (for testing)
        clickSave: addItem(new Customer(1, "Tfsd", "Tfsd"))
    };
})(); 
```

（[小提琴](http://jsfiddle.net/ThomasDeutsch/g2fMP/1/)）

为什么调用 addItem 函数，甚至没有点击按钮？是因为函数末尾的 () 吗？

```
 addItem = function (element) {
        items.push(element);
        return false;  // no Page-Reload after button-click
    }; 
```

我能做些什么来只为这个活动做这个？还是我的问题在其他地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T11:10:34.010

采用

```
return {
    Items: items,
    clickSave: addItem
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T13:47:48.687

> 为什么调用 addItem 函数，甚至没有点击按钮？是因为函数末尾的 () 吗？

是的。

改为这样做：

```
return {
    Items: items,
    clickSave: function() {
        addItem(
            new Customer( 
                items().length + 1, // or whatever you use to determine new IDs
                $("#inputVorname").val(),
                $("#inputNachname").val()
            )
        );
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-02T20:58:55.577

如果您希望创建的新项目始终相同，这应该可以工作。

```
return {
    Items: items,
    clickSave: addItem.bind(null, new Customer(1, "Tfsd", "Tfsd"))
}; 
```

# php - 如何提取字符串的num部分

> ID：10882390
> 
> 赞同：0
> 
> 时间：2012-06-04T13:44:07.407
> 
> 标签：php

我有一个像“My String 2”这样的字符串，我只想得到 num 值“2”。我尝试按照您在下面看到的那样做，但结果等于 0。

```
$AlphaSURV1="My String 2";
$NumSURV1=intval($AlphaSURV1);
echo $NumSURV1; 
```

你能帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:45:46.467

您可以使用匹配非数字的正则表达式去除非数字字符：

```
$NumSURV1 = preg_replace("/[^0-9]/", "", $AlphaSURV1); 
```

好吧，您对原始帖子的评论使此答案无效。如果你`"3 some text 5"`输入`preg_replace()`我给出的答案，你会得到`"35"`，而不仅仅是`"5"`。如果我大胆猜测并假设您只想要字符串中的最后一段文本而不是所有数字，并且假设有空格，您应该这样做：

```
$exp = explode(" ", $AlphaSURV1);
$NumSURV1 = $exp[count($exp) - 1]; 
```

这很难看，但它会将您的输入字符串拆分为空格，并为您提供结果数组中的最后一个元素。

感谢@nickb，第二个答案的更漂亮的方法：

```
$exp = explode(" ", $AlphaSURV1);
$NumSURV1 = end($exp); 
```

（顺便说一句，您*可以*按照`$NumSURV1 = end(explode(" ", $AlphaSURV1));`它的工作方式进行操作，但是`Strict Standards: Only variables should be passed by reference`如果您在服务器上启用了严格检查，则会出现错误）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T14:20:34.933

为了捕获字符串中的最后一组数字，您可以使用正则表达式：

```
$str = "123 test 29";
preg_match("/[0-9]+$/", $str, $matches);
var_dump($matches[0]); # 29 
```

这适用于以下所有情况，包括缺少空格、前导数字和字符串末尾的多个数字：

```
"1"        => 1
"test 2"   => 2
"test 34"  => 34
"5 test 6" => 6
"7test8"   => 8 
```

请注意，如果您只想获取字符串中的最后一个字符并将其视为数字，则可以使用以下命令：

```
$str = "My String 2";

$digit = intval(substr($str, -1)); 
```

# c# - C# - 保存用户选择的 Outlook 文件夹

> ID：10882392
> 
> 赞同：1
> 
> 时间：2012-06-04T13:44:08.743
> 
> 标签：c#, outlook

我有一个基本的 C# 表单，用户从 Outlook 中选择一个文件夹（使用[`Microsoft.Office.Interop.Outlook.Application.Session.PickFolder()`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._namespace.pickfolder.aspx)）

我希望保存此文件夹，以便每次用户打开表单时，都会恢复最后选择的文件夹。

怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:53:16.640

当用户通过 选择文件夹时[`PickFolder()`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._namespace.pickfolder.aspx)，存储所选文件夹的[`Folder.EntryID`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.mapifolder.entryid.aspx)和[`Folder.StoreID`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.mapifolder.storeid.aspx)。然后您可以使用它[`Session.GetFolderFromID()`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._namespace.getfolderfromid.aspx)来检索先前选择的文件夹。

请参阅[此 MSDN 示例以供参考](http://msdn.microsoft.com/en-us/library/ff184616.aspx)。

```
Outlook.Folder folder = Application.Session.PickFolder() as Outlook.Folder;
Outlook.Folder folderFromID = Application.Session.GetFolderFromID(folder.EntryID, folder.StoreID) as Outlook.Folder; 
```

# c# - 将此数据库内容绑定到 WPF 控件的最简单方法是什么？

> ID：10882395
> 
> 赞同：0
> 
> 时间：2012-06-04T13:44:21.600
> 
> 标签：c#, wpf, data-binding

我是 WPF 的新手。

我有一个包含 2 列的数据库表：类别、类型。主键组合是（类别，类型）。Type从属于Category，即1个Category包含多个Type。

现在，在我的 WPF UI 中，我有 2 个组合框控件。第一个绑定到数据库表中的不同类别列表。我通过将控件绑定到 distinct(Category) 的数据库视图来完成它。第二个需要显示属于当前在第一个控件中选择的类别的类型列表。

我做了研究，但不知道如何轻松做到这一点。我尝试创建一个存储过程以根据给定的类别选择所需的类型值列表，但不知道如何将所选类别传递给 XAML 中的存储过程。我必须使用代码而不是 XAML 来执行此操作吗？你的建议是什么？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:07:49.647

我会创建一个对象来保存您的类别，其中包含该类别可能的每种类型。就像是...

```
public class Category
{
    public ObservableCollection<string> Types { get; set; }
} 
```

然后当您初始化每个类别时，您可以设置允许哪些类型...

```
public class MyClass
{
    public ObservableCollection<Category> Categories { get; set; }
    public MyClass()
    {
         InitializeComponent();
         ObservableCollection MyTypes = new ObservableCollection();
         MyTypes.Add("type1");
         MyTypes.Add("type2");
         MyTypes.Add("Type3");
         Categories.Add(new Category() { Types = MyTypes });
         //Probably a more elegant way to do this, but hard to say based on information given

         this.DataContext = this;
    }
} 
```

最后，您可以将第一个组合框绑定到类别列表，将第二个组合框绑定到另一个组合框的所选项目的类型列表。

```
<ComboBox Name="cboCategory" ItemsSource = "{Binding Categories}" />

<ComboBox ItemsSource = "{Binding ElementName=cboCategory, Path=SelectedItem.Types}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:06:47.537

问题是，每当我们显示这种类型的数据时，我们通常会首先获取数据，然后准备我们需要的对象，然后将它绑定到 wpf 控件。

现在首先您已经绑定到组合框，因此您需要根据 selecteditem 填充另一个下拉列表并将其绑定到第一个或类别列表的 SelectionChanged 上，您也可以使用属性更改事件。

注意：如果数据很大，那么我们将使用 CTE 或 Paging 之类的东西来获取数据。

# php - 将 HTML PHP 网页导出为图像

> ID：10882397
> 
> 赞同：-2
> 
> 时间：2012-06-04T13:44:27.313
> 
> 标签：php, javascript, google-maps, image-processing

我的网站中有一个谷歌地图，我需要将该谷歌地图导出为图像并需要存储。它可以在任何脚本中完成，例如 PHP 或 HTML 或 JAVASCRIPT

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T16:00:52.093

正如@Sirko 和@Brendan 所指出的，您应该提供某种代码，以便我们有一些工作要做。但是，如果您正在寻找一个起点，我会扩展@JBRTRND 的建议，即使用 html5 画布来包装您的谷歌地图 div 并编写一些脚本将其转换为图像。幸运的是，创建了一个 js 库来完成这项任务，看看这个 js 库，希望你能找到答案：[http ://www.nihilogic.dk/labs/canvas2image/](http://www.nihilogic.dk/labs/canvas2image/)

# objective-c - 如何防止自定义 UITableViewCells 在取消选择时闪烁白色？

> ID：10882400
> 
> 赞同：10
> 
> 时间：2012-06-04T13:44:35.860
> 
> 标签：objective-c, ios, cocoa-touch, uikit, core-animation

我有一个自定义 UITableViewCell 它根据它所在的行更改颜色：

`TableViewController.m`

```
- (void)willDisplayCell:(GSRSongCell *)cell atIndexPath:(NSIndexPath *)indexPath;
{
    if (indexPath.row % 2 == 0) {
        [cell lighten];
    } else {
        [cell darken];
    }
} 
```

`CustomTableViewCell.m`

```
- (void)lighten
{
    self.selectedBackgroundView.backgroundColor = [UIColor whiteColor];
    self.contentView.backgroundColor = [UIColor whiteColor];
    self.primaryLabel.backgroundColor = [UIColor whiteColor];
    self.secondaryLabel.backgroundColor = [UIColor whiteColor];
}
- (void)darken
{
    UIColor *darkColor = [UIColor colorWithR:241 G:241 B:241 A:1];
    self.selectedBackgroundView.backgroundColor = darkColor;
    self.contentView.backgroundColor = darkColor;
    self.primaryLabel.backgroundColor = darkColor;
    self.secondaryLabel.backgroundColor = darkColor;
} 
```

但是，当我调用 时，动画在应该更暗`deselectRowAtIndexPath:animated:YES`的单元格中淡出为白色。`selectedBackgroundColor`

`selectedBackgroundColor`然后我意识到取消选择动画与;无关 实际上，取消选择动画实际上是基于`tableView.backgroundColor`属性的！

如何覆盖取消选择动画以淡化为单元格的背景颜色？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T14:11:07.293

它实际上会动画回单元格背景颜色，因此您也必须设置它

在 lighten 方法中添加这一行

```
self.backgroundColor = [UIColor whiteColor]; 
```

这在变暗方法

```
self.backgroundColor = darkColor; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-26T17:32:07.077

只需在 UIBuilder 或代码中将单元格选择设置为 UITableViewCellSelectionStyleNone ：

```
cell.selectionStyle = UITableViewCellSelectionStyleNone; 
```

# string - 在 Pyyaml 中，如何以块样式表示空字符串和列表？

> ID：10882401
> 
> 赞同：3
> 
> 时间：2012-06-04T13:44:36.887
> 
> 标签：string, yaml, dump, pyyaml, empty-list

我已经添加了折叠字符串的表示器，如[Python 中任何支持将长字符串转储为块文字或折叠块的 yaml 库中提到的文字字符串？](https://stackoverflow.com/questions/6432605/any-yaml-libraries-in-python-that-support-dumping-of-long-strings-as-block-liter). 我还添加了代表以在转储的 yaml 内容中以块样式打印列表。

但问题是当字符串为空时，即“”或列表为空时，它们以非块样式出现在转储的 YAML 内容中。

如何强制 pyyaml 转储程序使用“>”或“|”输出“”空字符串 生成的 YAML 内容中的块样式中的样式和带有 flow_style=False 的空列表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T21:11:54.090

经过一番研究，我能够使用 Pyyaml 将空字符串作为块文字（'|>' 中的样式）转储到 YAML 文件中。我的工作部分基于[Python 中支持将长字符串转储为块文字或折叠块的任何 yaml 库？](https://stackoverflow.com/questions/6432605/any-yaml-libraries-in-python-that-support-dumping-of-long-strings-as-block-liter).

```
import yaml
from yaml.emitter import Emitter, ScalarAnalysis

class MyEmitter(Emitter):  
    def analyze_scalar(self, scalar):   
        # Empty scalar is a special case.
        # By default, pyyaml sets allow_block=False
        # I override this to set allow_block=True
        if not scalar:         
            return ScalarAnalysis(scalar=scalar, empty=True, multiline=False,
                allow_flow_plain=False, allow_block_plain=True,
                allow_single_quoted=True, allow_double_quoted=True,
                allow_block=True)   
        return super(MyEmitter, self).analyze_scalar(scalar)

# And I subclass MyDumper from MyEmitter and yaml.Dumper        
class MyDumper(yaml.Dumper, MyEmitter):
    pass
class folded_unicode(unicode): pass
class literal_unicode(unicode): pass

def folded_unicode_representer(dumper, data):
    return dumper.represent_scalar(u'tag:yaml.org,2002:str', data, style='>')
def literal_unicode_representer(dumper, data):
    return dumper.represent_scalar(u'tag:yaml.org,2002:str', data, style='|')

yaml.add_representer(folded_unicode, folded_unicode_representer)
yaml.add_representer(literal_unicode, literal_unicode_representer)

# I test it now
d = {'foo': {'folded': folded_unicode(''), 'literal': literal_unicode('')}}
print yaml.dump(d, Dumper=MyDumper) 
```

输出：

```
foo:
  folded: >
  literal: | 
```

但是，我无法找到以块样式转储空列表的方法。为此，我试图弄乱 yaml/emitter.py 并意识到我需要一个非空列表以块样式转储它。

无论如何，这种努力并没有白费，而是相当令人兴奋:) 我希望有人会觉得这很有用，或者可能有一些东西可以分享。

# android - 从通话记录中删除 - Android 2.3.3

> ID：10882402
> 
> 赞同：0
> 
> 时间：2012-06-04T13:44:37.997
> 
> 标签：android, cursor, calllog

我有这段代码可以`Call`从`CallLog.Calls`提供者中删除一个：

```
 String strNumber= "myPhoneNumber"

            String queryString= "NUMBER='" + strNumber + "'";

            Log.v("Number", queryString); 

            int i=context.getContentResolver().delete(CallLog.Calls.CONTENT_URI, queryString, null); 
            if(i<1) 

            {  
               // do my stuff
            } 
```

此代码适用于 android 2.2，但不适用于 android 2.3.3

LogCat 中没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:48:45.170

在构建查询时，您应该使用 SDK 提供的合约类（在您的情况下为[CallLog.Calls ）。](http://developer.android.com/reference/android/provider/CallLog.Calls.html)

合同类旨在将对象模型映射到数据库中的相应数据名称。当 android 团队需要更新数据库中的列名时，他们也会更新合约类，然后开发人员不需要更改。

然后尝试将您的查询字符串更改为：

```
String queryString = CallLog.Calls.NUMBER + "='" + strNumber + "'"; 
```

注意：单引号是必需的。

还要确保该编号与数据库编号完全匹配。

> （+33678541236！= 0678541236）

为确保删除正确的行，您可以执行以下操作：

```
Cursor cursor = getContentResolver().query(CallLog.Calls.CONTENT_URI, null, CallLog.Calls.NUMBER + " = ? ", strNumber , "");
int idOfRowToDelete = cursor.getInt(cursor.getColumnIndex(CallLog.Calls._ID));
getContentResolver().delete(Uri.withAppendedPath(CallLog.Calls.CONTENT_URI, String.valueOf(idOfRowToDelete)), "", null); 
```

（没有尝试过，但应该进行小的更正）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:57:48.913

```
private void deleteNumber() {
            try {
                String strNumberOne[] = { "00577698160" };
                Cursor cursor = getContentResolver().query(CallLog.Calls.CONTENT_URI, null, CallLog.Calls.NUMBER + " = ? ", strNumberOne, "");
                boolean bol = cursor.moveToFirst();
                if (bol) {
                    do {
                        int idOfRowToDelete = cursor.getInt(cursor.getColumnIndex(CallLog.Calls._ID));
                        getContentResolver().delete(Uri.withAppendedPath(CallLog.Calls.CONTENT_URI, String.valueOf(idOfRowToDelete)), "", null);
                    } while (cursor.moveToNext());
                }
            } catch (Exception ex) {
                System.out.print("Exception here ");
            }
        } 
```

# entity-framework-4.1 - 映射许多：来自多个实体类型的可选关系 EF CodeFirst

> ID：10882405
> 
> 赞同：2
> 
> 时间：2012-06-04T13:45:11.567
> 
> 标签：entity-framework-4.1, ef-code-first, fluent-interface

我们有 3 个相互关联的实体：

*   Foo 有很多附件
*   酒吧有很多附件
*   每个 Attachment 可以属于 Foo 或 Bar。

使用 建模的最佳方法是什么`DbModelBuilder`？

如果我们尝试：

```
modelBuilder.Entity<Foo>().HasMany(t => t.Attachments).WithOptional()
    .Map(m => m.MapKey("FOO_ID")).WillCascadeOnDelete(true);
modelBuilder.Entity<Bar>().HasMany(t => t.Attachments).WithOptional()
    .Map(m => m.MapKey("BAR_ID")).WillCascadeOnDelete(true); 
```

这不是一个非常干净的数据模型： * 附件表将有两个 FK 列，一个用于每个可能的父实体（'FOO_ID'、'BAR_ID'）。如果我们增加需要附件的实体的数量，它会使表格膨胀。* 我们需要将后向引用设为可选，尽管附件总是附加到实体上。它不一定是Foo，也不一定是Bar。但是模式将允许所有 FK 设置为 NULL 的附件，尽管从业务视图来看它是无效的。* 理论上，一个 Attachment 可以同时链接到 Foo 和 Bar，这是无效的。

相反，我们可以将关系映射到联结表 'T_FOO_ATTACHMENT' 和 'T_BAR_ATTACHMENT'： * T_FOO_ATTACHMENT 具有Foo*所需*的外键 (FOO_ID) 和附件 (ATTACHMENT_ID) 所需的 FK。* T_BAR_ATTACHMENT 也一样

缺点： * 附件仍然可以链接到 Foo 和 Bar。* 一个附件甚至可以链接到多个 Foo，这也是无效的。理想情况下，我们可以使用流利的语法来添加防止这种情况的数据库约束。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:18:08.503

> 这不是一个非常干净的数据模型：附件表将有两个 FK 列，一个用于每个可能的父实体（'FOO_ID'、'BAR_ID'）。

但从关系的角度来看这是绝对正确的——如果你想与另一个表建立关系，你需要一个新的外键。

> 但是模式将允许所有 FK 设置为 NULL 的附件，尽管从业务视图来看它是无效的。理论上，一个附件可以链接到一个 Foo 和一个 Bar，这是无效的。

那是你的业务逻辑。对于您当前的模型，您必须在您的应用程序中强制执行它。

您正在寻找的是某种命名关系，其中`Attachment`不仅有 FK，而且还有相关表的名称。这是您在关系级别上无法实现的 - 它是数据级别（再次是业务逻辑），并且无法使用 EF 进行映射。

# visual-studio - 构造函数中的“类型'int'意外”，找不到为什么？

> ID：10882406
> 
> 赞同：2
> 
> 时间：2012-06-04T13:45:12.690
> 
> 标签：visual-studio, class, constructor, c++-cli, managed-c++

我对 C++ 和他的语法很陌生。我以前用 C# 编程过，但想试试 C++。

我在 Visual Studio 中创建了一个 ClassLibrary，并想向其中添加一些类。我知道这是托管 C++。

但我无法理解为什么我不断收到这些错误：

```
Error C2062: type 'int' unexpected
Error C2143: syntax error: messing ; before '{'
Error C2447: '{' : missing function header (old-style formal list?) 
```

这是我的头文件：

```
// LibraryLib.h

#pragma once
#include <string>
using namespace System;

namespace LibraryLib {

public enum EntryType {Book, Newspaper};

public ref class Entry
{   
public:
    int id;
    int year;
    String ^ title;
    EntryType type;

    Entry(int Id, int Year, String ^ Title, EntryType Type);

};
} 
```

这是我的 cpp 文件：

```
// This is the main DLL file.

#include "stdafx.h"
#include "LibraryLib.h"

namespace LibraryLib {

LibraryLib::Entry(int Id, int Year, String ^ Title, EntryType Type) // line of errors   
{
    id = Id;
    year = Year;
    title = Title;
    type = Type;
}
} 
```

在我想在 cpp 文件中实现构造函数的行上抛出了 3 个错误。

我希望有人能指出我做错了什么。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T13:47:04.903

您没有限定构造函数的权利。你需要另一个`Entry::`：

```
Entry::Entry(int Id, int Year, String ^ Title, EntryType Type) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T13:47:33.953

为您的构造函数代码尝试 Entry::Entry(int Id, int Year, String ^ Title, EntryType Type)

# iphone - 无法使用 NSXML 解析器进行解析

> ID：10882407
> 
> 赞同：0
> 
> 时间：2012-06-04T13:45:15.187
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有以下 XML 文件：

```
<?xml version="1.0"? encoding="UTF-8"?>
<api>
        <count count="55" />
        <spa>
            <opt>aa</opt>
            <opt>bb</opt>
            <opt>cc</opt>

        </spa>
</api> 
```

M 使用以下代码行：

```
NSString *path = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"space.xml"];

NSData *data = [[NSData alloc] initWithContentsOfFile:path];

NSXMLParser *xmlParser = [[NSXMLParser alloc] initWithData:data];

//Initialize the delegate.
XMLParser *theParser = [[XMLParser alloc] initXMLParser];

//Set delegate
[xmlParser setDelegate:theParser];

//Start parsing the XML file.
BOOL success = [xmlParser parse];

if(success)
    NSLog(@"No Errors");
else
    NSLog(@"Error Error Error!!!"); 
```

但是，m 在 gdb 中将输出作为“错误错误错误”。我是 Objective C 的新手，无法解决这个错误。有人可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:03:05.517

// 尝试使用 NSXMLParser

```
NSXMLParser *parser = [[NSXMLParser alloc]initWithContentsOfURL:[NSURL URLWithString:@"YourURL"]];
[parser setDelegate:self];
[parser parse]; 
```

// 下面是将为您获取数据的委托

```
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict

  {    
            if([elementName isEqualToString:@"spa"]){
           got = YES; //got is a BOOL and here we have encountere start tag i.e <spa>
     }
  }

    -(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
     {
          if(got)
          {
                 NSLog(@"the Data is = %@",string);
          }
     }

    -(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
     {
         if([elementName isEqualToString:@"spa"])
        {
           got = NO; //Here we have encountered the end tag </spa>
        }

     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T14:10:09.127

您是否检查过“*路径*”或“*数据*”是否为零？

此外，如果 'parse' 没有成功，您可以使用方法 ' [parserError](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html#//apple_ref/occ/instm/NSXMLParser/parserError) ' 来获取一个 NSError 对象，该对象将包含有关问题的更多信息。从 NSXMLParser 类参考：

> **parserError**
> 返回一个 NSError 对象，您可以从中获取有关解析错误的信息。
> 
> ```
> - (NSError *)parserError 
> ```
> 
> **讨论**
> 您可以在解析操作异常终止后调用该方法来确定错误原因。
> 
> **可用性**
> 适用于 iOS 2.0 及更高版本。

在此之后，您应该能够在您的 NSError* 对象上调用方法“ [localizedDescription](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSError_Class/Reference/Reference.html#//apple_ref/occ/instm/NSError/localizedDescription) ”以获取有关该问题的更多信息。

我希望这有帮助！

# objective-c - 什么问题可能导致将 nib 文件的所有者设置为 nil？

> ID：10882411
> 
> 赞同：5
> 
> 时间：2012-06-04T13:45:37.700
> 
> 标签：objective-c, ios, xcode, model-view-controller, nib

如果我可以在不使用文件所有者的情况下从 nib 文件加载对象，那么文件所有者存在的原因是什么？此外，可以在不使用文件所有者的情况下创建出口操作连接。例如，我可以直接从对象连接到笔尖。所以我真的无法理解对文件所有者的需求。它与MVC模式有什么关系吗？文件的所有者必须是 UIViewController 类型吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T14:02:58.413

在加载 nib 文件期间，Cocoa 会生成在 nib 文件中序列化的每个对象。然后，对于 nib 文件中的每个连接，它调用`setValue:forKey:`目标对象来创建连接。一些连接与对象有关`nil`。这些`setValue:forKey:`消息被发送到作为文件所有者传递的任何对象。

如果您没有文件所有者，则`nil`连接将被忽略。如果您没有`nil`连接，那么它与没有文件所有者没有什么不同。这不是特别常见。

所有这些都允许您通过将不同的文件所有者传递给加载过程来实例化相同 nib 文件对象的多个实例。

* * *

编辑：

请记住，一个 nib 文件只是一堆序列化的对象。当您使用 以编程方式创建视图控制器时`initWithNibName:bundle:`，视图控制器在加载 nib 文件之前已经存在。nib 文件中的对象几乎总是希望能够引用该视图控制器。所以我们将视图控制器传递给`UINib`文件所有者。nib 文件中的任何位置`nil`，`UINib`都将其替换为文件所有者（通常是视图控制器）。

这是非常灵活的，但灵活性不是重点。如果您没有在 nib 实例化期间将其传入，则无法引用 nib 文件中的视图控制器。

# javascript - 尝试使用 SignaturePad 在 ruby on rails 应用程序上捕获签名

> ID：10882414
> 
> 赞同：0
> 
> 时间：2012-06-04T13:45:50.230
> 
> 标签：javascript, ruby-on-rails-3, haml

我正在尝试在我的 ruby​​ on rails 应用程序中设置签名捕获。我在这里使用[签名](http://thomasjbradley.ca/lab/signature-pad/#api-ref)板，但我的萤火虫中出现了 javascript 错误。

这是我的 application.js 文件

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require bootstrap-datepicker
//= require build/jquery.signaturepad.js
//= require build/flashcanvas.js
//= require build/json2.min.js
//= require_tree .

$(function(){
    $('.sigPad').signaturePad({drawOnly:true});
}) 
```

我的视图是使用 HAML 呈现的。

```
= simple_form_for(@blah) do |f|
      .form-actions
        %p.typeItDesc Review your signature
        %p.drawItDesc Draw your signature
        %ul.sigNav
          %li.typeIt
            %a.current{:href => "#type-it"} Type It
          %li.drawIt
            %a{:href => "#draw-it"} Draw It
          %li.clearButton
            %a{:href => "#clear"} Clear

          %div.sig.sigWrapper
            %div.typed

            %canvas.sigPad{:width=>"398" ,:height=>"255"}
            %input.output{:name => "output", :type => "hidden"} 
```

每当我运行应用程序时，我都会在 firebug 中收到以下 javascriupt 错误：

```
element is undefined

if (!element.getContext && FlashCanvas) 
```

我真的不知道我在哪里弄错了，但文件已正确包含。这里有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T05:03:24.830

Ouch - I figured it out, actually I had to enclose the entire signature in a div with class sigPad. Thanks anyway

# c++ - LoadLibrary 调用系统错误 wpcap.dll

> ID：10882416
> 
> 赞同：2
> 
> 时间：2012-06-04T13:46:01.007
> 
> 标签：c++, dll, command-line-interface, loadlibrary

我正在尝试加载我在另一个项目中动态创建的 dll。但是，当我去加载库时，我收到以下错误消息：

“程序无法启动，因为您的计算机中缺少 wpcap.dll。请尝试重新安装程序以解决此问题。”

我已经搜索并没有找到适合我的解决方案。我替换了那个 wpcap.dll 文件以及它说丢失的 packet.dll 文件，但它仍然给了我另一个错误。如果有人可以帮助我解决这个问题，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:23:02.110

请重新安装[WinPcap](http://www.winpcap.org/install/default.htm)。它将 wpcap.dll（及其依赖项）放入 Windows 系统目录。然后您可以在代码中调用 LoadLibrary("wpcap.dll")（无需指定 DLL 的路径）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T14:00:44.373

有一个依赖遍历器 (http://www.dependencywalker.com/)，您可以使用它来查找程序的所有相关依赖项。您可以使用它来搜索缺少的依赖项。在 wpcap.dll 上使用它。在您的 .exe 上使用它不会有太大帮助，因为依赖项walker 找不到使用 LoadLibrary 调用的依赖项。

# c - 当 x=0x80000000 时 ~(x-1) 和 ~x+1 之间的差异

> ID：10882423
> 
> 赞同：7
> 
> 时间：2012-06-04T13:47:00.440
> 
> 标签：c, bit-shift

我使用的语言是 C。x 和 n 的类型是 int。

我有一行代码如下

```
 printf("x=%x,n=%d,first=%x,second=%x\n",x,n,((~(x+0xffffffff))>>n),((~x+1)>>n)); 
```

它显示了 x,n 的值以及移动 x 的补数的 n 位的两种方法。当 x=0x80000000,~(x+0xffffffff)=0x8000000,~x+1=0x80000000 时，将这两个移位 n 位时，结果是不同的。

顺便说一句，如果我将 0xffffffff 更改为 ~1+1(这意味着 ~(x+(~1+1))，结果与 ~x+1 相同

我想知道为什么会这样。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T14:23:49.900

Pavan Manjunath 现在删除的答案有一个案例的正确答案，假设它`int`像往常一样是 32 位类型。整数常量

```
0xffffffff 
```

具有值`2^32 - 1`，并且不能由 a 表示`int`，但它可以表示为 a `unsigned int`。所以它的类型是`unsigned int`（6.4.4.1）。因此`x`转换`unsigned int`为加法，并且

```
((~(x+0xffffffff))>>n) 
```

评估为

```
((~(0x80000000u + 0xffffffffu)) >> n)
((~0x7fffffffu) >> n)
(0x80000000u >> n) 
```

带有`2^(31-n)`if的值`0 <= n < 32`（如果`n`超出该范围，则为未定义的行为）。

对于另一种情况，ouah 的答案是正确的，when`x = 0x80000000`是一个`int`，`~0x8000000 = 0x7fffffff = INT_MAX`并且`INT_MAX + 1`是未定义的行为，如有符号整数溢出。

然而，一个常见的行为是回绕，然后加法的结果是有符号整数`0x80000000`，负整数的右移是实现定义的行为（6.5.7）。常见的是使用符号扩展进行移位，这将产生结果`-2^(31-n)`，然后由转换说明符将其解释为`unsigned int`带有值的。`2^32 - 2^(31-n)``printf``%x`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T14:02:09.357

> 当x=0x80000000,~(x+0xffffffff)=0x8000000,~x+1=0x80000000时，

在具有 32 位`int`（假设`x`类型为`int`）和二进制补码符号表示的系统上，此表达式：

```
 ~x+1 
```

是未定义的行为。`x = 0x80000000`表示`~x == 0x7FFFFFFF == INT_MAX`并且`INT_MAX + 1`是未定义的行为。所以`~x + 1`可以`0x80000000`或其他任何东西。

这个表达式：

```
~(x+0xffffffff) 
```

另一方面被定义（`0xffffffff`在`unsigned int`C 中）并且等于`0x80000000`. 它实际上是定义的，因为`0xffffffff`is`unsigned int`和无符号整数在 C 标准的意义上永远不会溢出。

这意味着该声明：

```
printf("x=%x,n=%d,first=%x,second=%x\n",x,n,((~(x+0xffffffff))>>n),((~x+1)>>n)); 
```

调用未定义的行为，比较两个结果是没有意义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T14:23:00.853

（假设 sizeof(int) 为 4；即 32 位有符号值）。0x80000000; // -2147483648 是最小的负整数 0xFFFFFFFF // 是 -1

将两者相加会导致从负到正的“环绕” 0x7FFFFFFF 是两者的总和（使用 int 算术），即 2147483647

在 0x7FFFFFFF 上使用 '~' 运算符会产生按位完成，或 0x80000000

如果您从任何 int 值开始并从中减去 1（或向其添加 1，没关系）足够多次，您将导致它翻转其符号。这是使用固定精度算术的一个基本问题。

在您的情况下，您不能期望在不非常注意这种限制情况的情况下混合有符号算术和按位运算符。

另请注意，使用 2 的补码算术时存在不对称性：负数比正数多一个（因为您需要表示零，这会为其余值留下奇数个其他位表示。）

# asp.net - LINQ 驱动的缓存项失效

> ID：10882427
> 
> 赞同：1
> 
> 时间：2012-06-04T13:47:02.773
> 
> 标签：asp.net, asp.net-mvc, linq

我正在制作一个 ASP.NET MVC 项目，我想在存储库（LINQ2SQL）层实现业务数据缓存。由于实体彼此相关，因此当我使某些基本实体无效时，我需要使相关实体无效。假设我有 Blog/Post/Comments 关系，当用户发表新评论时，我需要使缓存的 Post 实体无效，因为它已经过时 TotalComments 字段。有时，使其他实体失效的逻辑更为复杂。
好吧，我需要为此实施灵活的失效机制。我之前发现的：
- SQL 通知服务。每次时间表发生更改时，它都会通知应用程序。由于我将拥有高负载的应用程序，因此某些表的更改会非常频繁。每次添加新评论时，任何帖子的所有缓存评论都会删除。
- 缓存 LINQ（或 SQL）查询。在这种情况下，呈现的查询使用其哈希作为键放置到缓存中。不错，但不可能删除“所有具有 BlogPostId = deletedBlogPostId 的评论实体”

现在我的想法是什么。我想对 HttpRuntime.Cache 项目使用 LINQ 查询来查找要通过其属性删除的项目（例如，在删除我查找的博客文章的情况下

```
cachedItem => cachedItem.GetType() == typeof(Comment) 
       && ((Comment)cachedItem).BlogPostId == deletedBlogPostId 
```

删除所有相关评论）。但我在谷歌中找不到这种方法被广泛使用。这不是使用缓存的相关实体进行操作的好方法吗？在我的笔记本上，超过 100 万个缓存项目的查询性能为 600 毫秒。
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:53:05.720

我会在你的控制器中为相应的对象调用一个缓存清除方法。例如，如果用户正在编辑单个帖子，那么在处理该 POST 请求的控制器方法中，您应该清除该帖子的缓存。

使用 SQL Server 通知服务对我来说似乎是倒退的。您的服务器端 Web 应用程序是用户的第一个入口点；数据库紧随其后。您知道何时需要清除 MVC 应用程序中的缓存，那么为什么不从那里清除缓存呢？

**编辑：**

将数据存储在缓存中并通过密钥访问它的另一种选择（因此您不必遍历整个缓存集合）：

```
HttpRuntime.Cache.Insert(string.Format("CommentsForPost-{0}", postId), value); 
```

其中 value 是 a`List<Comment>`并且`postId`是您的帖子的 id。通过这种方式，您可以轻松查找您的评论集合，并且您的缓存键是动态的。我已经在许多应用程序中使用了这种方法（尽管我实际上会将它写得更通用，以减少代码重复）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:35:58.653

好吧，过了一会儿，我制作了访问缓存的扩展方法：

```
public static class MyExtensions
{
    // temlplate for cache item key name
    private const string CacheKeyTemplate = "{0}_{1}";

    private static string GetCachePrefixByType(Type type)
    {
        // this is just sample, implement it any way you want
        switch (type.Name)
        {
            case "Blog": return "b"; break;
            case "BlogPost": return "bp"; break;
            case "Comment": return "c"; break;
            default: throw new NotImplementedException();
        }
    }

    // insert with key containing object type custom prefix and object id
    public static void Put(this Cache cache, object obj, long id)
    {
        cache.Insert(String.Format(CacheKeyTemplate, GetCachePrefixByType(obj.GetType()), id), obj);
    }

    // get by object type and id
    public static T Get<T>(this Cache cache, long id)
    {
        return (T)cache[String.Format(CacheKeyTemplate, GetCachePrefixByType(typeof(T)), id)];
    }

    // get objects by WHERE expression
    public static List<object> Get(this Cache cache, Func<object, bool> f)
    {
        return cache.Cast<DictionaryEntry>().Select(e => e.Value).Where(f).ToList();
    }

    // remove by object type and id
    public static void Remove<T>(this Cache cache, long id)
    {
        cache.Remove(String.Format(CacheKeyTemplate, GetCachePrefixByType(typeof(T)), id));
    }

    // remove cache items by WHERE expression against stored objects
    public static void Remove(this Cache cache, Func<object, bool> f)
    {
        foreach (string key in cache.Cast<DictionaryEntry>().Where(de => f.Invoke(de.Value)).Select(de => de.Key))
        {
            cache.Remove(key);
        }
    }
} 
```

这是我要测试的课程：

```
private class Blog
{
    public int BlogId { get; set; }
    public string Name { get; set; }
}

private class BlogPost
{
    public int PostId { get; set; }
    public int BlogId { get; set; }
    public string Text { get; set; }
}

private class Comment
{
    public int PostId { get; set; }
    public int CommentId { get; set; }
    public string Text { get; set; }
} 
```

和测试代码本身：

```
 // a blog
    Blog blog = new Blog{ BlogId = 1, Name = "Jim" };
    // two blog posts
    BlogPost post1 = new BlogPost { PostId = 1, BlogId = 1, Text = "Aaaaaaaa" };
    BlogPost post2 = new BlogPost { PostId = 2, BlogId = 1, Text = "Bbbbbbbbbb" };
    // two comments to the 1st blog post
    Comment comment11 = new Comment { CommentId = 11, PostId = 1, Text = "qwerty" };
    Comment comment12 = new Comment { CommentId = 12, PostId = 1, Text = "asdfg" };
    // one comment to the 2nd blog post
    Comment comment21 = new Comment { CommentId = 21, PostId = 2, Text = "zxcvbn" };

    // put it all to cache
    HttpRuntime.Cache.Put(blog, blog.BlogId);
    HttpRuntime.Cache.Put(post1, post1.PostId);
    HttpRuntime.Cache.Put(post2, post2.PostId);
    HttpRuntime.Cache.Put(comment11, comment11.CommentId);
    HttpRuntime.Cache.Put(comment12, comment12.CommentId);
    HttpRuntime.Cache.Put(comment21, comment21.CommentId);

    // get post #2 by its id
    BlogPost testPost = HttpRuntime.Cache.Get<BlogPost>(2); // testPost.Text = "Bbbbbbbbbb"

    // get all comments for post #1
    IEnumerable<Comment> testComments = HttpRuntime.Cache.Get(
        x => (x is Comment) && ((Comment)x).PostId == 1).Cast<Comment>(); // comments 11 and 12 are in the list

    // remove comment 21
    HttpRuntime.Cache.Remove<Comment>(21);
    // test if it was removed
    comment21 = HttpRuntime.Cache.Get<Comment>(21); // null

    // remove anything having text property = "qwerty"
    HttpRuntime.Cache.Remove(x => x.GetType().GetProperty("Text") != null && ((dynamic)x).Text == "qwerty");
    // test if comment 11 it was removed
    comment11 = HttpRuntime.Cache.Get<Comment>(11); // null

    // but comment 12 should still exist
    comment12 = HttpRuntime.Cache.Get<Comment>(12); // it's there

    // remove anything from cache
    HttpRuntime.Cache.Remove(x => true);
    // cache items count should be zero
    int count = HttpRuntime.Cache.Count; // it is! 
```

# raytracing - 图形中的光线追踪与光能传递

> ID：10882434
> 
> 赞同：2
> 
> 时间：2012-06-04T13:47:35.690
> 
> 标签：raytracing

我有一个考试，有一个我无法回答的问题..使用光线追踪无法实现什么样的照明现象（在这种情况下使用辐射度）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T10:59:28.180

从技术上讲，路径追踪（这是一种光线追踪）实现了完整的光照方程。但它们可能意味着间接照明，iow。全局照明。

# ios - 一个 iOS 应用可以购买在另一个应用（同一供应商）中定义的应用内不可更新订阅产品吗？

> ID：10882435
> 
> 赞同：1
> 
> 时间：2012-06-04T13:47:37.890
> 
> 标签：ios, in-app-purchase, app-store-connect

我有几个 iOS 应用程序都使用相同的订阅来提供同步和其他功能等功能。应用内购买项目将是不可更新的订阅，因此 Apple 只处理付款，我必须在我的服务器上跟踪订阅。在这种情况下，我不明白为什么我需要为每个应用程序复制目录。如果我将应用内 ID（每个订阅的唯一标识符）与一个产品配对，并且将该 ID 目录作为 Web 服务提供，以便我的任何应用程序都可以检索捆绑 ID 列表，那么应用程序 B 有什么原因吗？无法购买在 iTunes Connect 中为应用 A 创建的应用内产品（不可更新订阅）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:58:51.980

从应用商店快速参考（https://developer.apple.com/appstore/in-app-purchase/In-App-Purchase-Guidelines.pdf）：

“• 应用内购买项目不能跨应用或平台共享。”

# java - 如何访问 SharedPreferences 字段？

> ID：10882439
> 
> 赞同：0
> 
> 时间：2012-06-04T13:47:50.097
> 
> 标签：java, android, sharedpreferences, android-context, listpreference

我正在尝试从 SAX 解析器类访问在活动中声明的 SharedPreferences 字段。

我尝试使用 getDefaultSharedPreferences(context)，但由于 SAX 解析器不扩展 Activity，因此我无法找到作为该方法的参数传递的上下文。

如何访问此字段？

现在，假设我设法做到了这一点。我在这里有第二个问题：我的 SharedPreferences 字段是在 Activity 中声明的（实际上是一个扩展 PreferenceActivity 的类）。在此 SharedPreferences 字段中，我可以存储来自两个复选框列表的布尔值，代表两个多选首选项列表。

我需要知道这些偏好列表中的哪个值是“真实的”。我怎样才能做到这一点 ？

这是我的代码：- Pref.java

```
public class Pref extends PreferenceActivity implements OnSharedPreferenceChangeListener {
static SharedPreferences pref;

public void onCreate(Bundle saveInstanceState) {
    super.onCreate(saveInstanceState);

    pref = getPreferenceManager().getSharedPreferences();
    pref.registerOnSharedPreferenceChangeListener(this);

    int c = pref.getInt("numRun",0);
    c++;
    pref.edit().putInt("numRun",c).commit();
    addPreferencesFromResource(R.xml.prefs);
} 
```

我想我需要先访问 pref，然后我有两个多选首选项列表。如何从这些列表中获取值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:07:21.707

试试这样...

```
SharedPreferences prefs;

prefs = PreferenceManager.getDefaultSharedPreferences(this);

username = prefs.getString("username","");

password = prefs.getString("password",""); 
```

# flash - iframe 中的 Flash 对象在 IE7-8 中不起作用

> ID：10882441
> 
> 赞同：0
> 
> 时间：2012-06-04T13:47:51.120
> 
> 标签：flash, internet-explorer, iframe

我有一个 iframe 加载页面，其中包含以下 html：

```
<object height="315" width="560">
  <param name="movie" value="http://www.youtube.com/v/VBBX9uJAy3A?version=3&hl=en_US">
  <param name="allowFullScreen" value="true">
  <param name="allowscriptaccess" value="always">
  <embed wmode="transparent" src="http://www.youtube.com/v/VBBX9uJAy3A?version=3&hl=en_US" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" height="315" width="560">
  <param name="wmode" value="transparent">
</object> 
```

但是当试图在 IE 7-8 中打开页面时，浏览并没有显示内容。当我使用开发人员工具检查页面时，我发现 IE 删除了*嵌入*标签（其余的都可以）。当直接从浏览器（而不是 iframe）访问这个页面时——一切正常。

由于安全原因，我不能放弃 iframe。

我在adobe的网站上发现了同样的问题，没有答案。（[http://forums.adobe.com/thread/183283](http://forums.adobe.com/thread/183283)）

有没有人遇到过这个问题并知道解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:34:37.183

youtube 视频是替代示例吗？如果没有，您应该只使用 youtube 本身提供的 embed 标签：

```
<iframe width="420" height="315" src="http://www.youtube.com/embed/_4LYZC97hmM" frameborder="0" allowfullscreen></iframe> 
```

# sqlite - Windows 而非 Mac OSX 上的 SQLite 异常

> ID：10882442
> 
> 赞同：0
> 
> 时间：2012-06-04T13:48:04.250
> 
> 标签：sqlite, jdbc, windows-vista

我正在从 Mac OS X 开发一个使用 JDBC 驱动程序的 SQLite 数据库的 java 应用程序。

`PreparedStatement`该代码在 mac 上运行良好，但我不能在我的 Windows机器上使用 s 批量插入。

编辑：这也不适用于`Statement`包含单个`INSERT INTO`指令的简单 s （`CREATE TABLE`工作正常）。

我的代码基本上是：

表创建：

```
 final String sql = "CREATE VIRTUAL TABLE " + TABLE_NAME + " USING fts3("
            + KEY_NOM + ", "
            + KEY_PRENOM + ", "
            + KEY_ADRESSE + ", "
            + KEY_ADRESSE2 + ", "
            + KEY_ADRESSE3 + ");";

    try {
        final Statement s = mConnection.createStatement();
        s.execute(sql);
    } catch (final SQLException e) {
        L.e("Unable to create table: "+sql+"! "+e);
    } 
```

`PreparedStatement`创建：

```
 String sql =
            "INSERT INTO "+TABLE_NAME
                    +" ("
                    + KEY_NOM + ", "
                    + KEY_PRENOM + ", "
                    + KEY_ADRESSE + ", "
                    + KEY_ADRESSE2 + ", "
                    + KEY_ADRESSE3 + ") "
                    + " VALUES (?, ?, ?, ?, ?)";

    mConnection.setAutoCommit(false);
    final PreparedStatement prep = mConnection.prepareStatement(sql); 
```

然后是一个解析 CSV 文件的循环，并且在每一行调用以下代码：

```
 int i = 1;
        prep.setString(i++, ""+lawyer.nom);
        prep.setString(i++, ""+lawyer.prenom);
        prep.setString(i++, ""+lawyer.adresse);
        prep.setString(i++, ""+lawyer.adresse2);
        prep.setString(i++, ""+lawyer.adresse3);
        prep.addBatch(); 
```

当 CSV 文件的解析结束后，执行如下：

```
 final int[] res = prep.executeBatch();
        mConnection.setAutoCommit(true);
        for (int r: res) {
            if (r != 1) {
                L.e("Error adding entry!");
            }
        } 
```

当我调用s 时`mConnection.setAutoCommit(true);`，`INSERT`会在引发以下异常时执行 s 语句：

```
java.sql.SQLException: SQL logic error or missing database
at org.sqlite.DB.throwex(DB.java:288)
at org.sqlite.DB.exec(DB.java:68)
at org.sqlite.Conn.setAutoCommit(Conn.java:166) 
```

测试环境：

*   MacBookAir - Mac OS 10.6 - **x64** - Java 1.6.31 -**工作正常**（我的开发站）
*   笔记本电脑 - Windows 7 - **x64** - Java 1.6.30 -**工作正常**
*   MacBook - Mac OS 10.5 - **x64** - Java 1.6.26 -**工作正常**
*   桌面 - Windows Vista - **x86** - Java 1.? -**不工作**
*   服务器 - Windows Server 2003 -**未知架构，猜测为 x86** - Java 1.7 -**不起作用**
*   桌面 - Windows 七 - **x86** - Java 1.7 -**不起作用**
*   桌面 - Windows XP - **x86** - Java 1.6.31 -**不起作用**

似乎只有 x64 主机才能使其工作。使用以下罐子：

*   swt ：在 x64 主机上包含 x64 版本，在 x86 主机上包含 x86 版本
*   [sqlitejdbc-v056](http://www.zentus.com/sqlitejdbc/)：显然这是 x86 和 x64 兼容的
*   [opencsv](http://opencsv.sourceforge.net/)：这不包含本机代码
*   iText-2.1.7 和 iTextRTF：这不包含本机代码

所以也许 JDBC SQLite 驱动程序不完全兼容 x86。我会尝试进行更多调查。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T08:32:37.230

*TL;DR*：
我的 SQLite JDBC 驱动程序使用的是本机代码，并且与 32 位处理器不完全兼容。

两个可能的修复：

*   使用[Xerial](http://www.xerial.org/trac/Xerial/wiki/SQLiteJDBC)，一个在 Mac OS X 64 位和 Windows 32 位上都能正常工作的原生 SQLite JDBC 驱动程序
*   使用纯 java 实现以性能为代价解决了该问题。

*说明*：

在过去的 3 天里，我一直用 SQLite 异常表示“SQL 逻辑错误或缺少数据库”。我不会评论包含两个可能的*不同*错误的异常文本，而不会说明可能是哪个原因。我也不会评论异常文本中提到的两个错误都不是问题的原因。

事实：

*   SQLite 异常说明“ *SQL 逻辑错误或缺少数据库*”
*   使用[jsqlitejdbc](http://www.zentus.com/sqlitejdbc/) v056
*   驱动程序能够创建表
*   驾驶员能够从表格中选择信息
*   数据库文件没有损坏，即。可以使用 sqlite 客户端打开它并将数据插入到表中
*   **驱动程序无法将数据插入表中**

解决我的问题是替换`sqlitejdbc-v056.jar`包含`sqlitejdbc-v056-pure.jar`纯 Java 实现的本机代码。

我希望所有遇到此问题的用户都能够快速看到这一点，而不是为此浪费 3 天。

# drupal - 带有内容计数器的分类列表

> ID：10882444
> 
> 赞同：2
> 
> 时间：2012-06-04T13:48:17.010
> 
> 标签：drupal, drupal-views, drupal-taxonomy

使用 Drupal 7，

我有一个内容类型：电影，

它有一个演员分类：基努·里维斯、克里斯蒂安·贝尔、米拉·乔沃维奇等。

我想建立一个视图，其中列出了与分类术语匹配的内容计数的演员分类，例如：

```
Keanu Reeves (4)
Christian Bale (8)
Milla Jovovich (2) 
```

我不确定如何构建这个视图，

我设置了一个使用聚合的视图，过滤器：=发布，内容类型=电影，语言=用户语言，

字段：COUNT（内容：演员）

它似乎没有实现我的目标，请帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T16:03:58.017

找不到通过视图实现的方法，这是替换视图的自定义块代码。

```
$vid = 3; //vocabulary id
$num_term = 8; //limit maximum terms

$query = "SELECT tid, name, count
FROM (
SELECT td.tid AS tid, name, COUNT(td.tid) AS count
FROM taxonomy_term_data AS td
JOIN taxonomy_index AS tn
  ON td.tid = tn.tid
JOIN node AS n
  ON n.nid = tn.nid
WHERE td.vid = ". $vid ."
  AND n.status = 1
GROUP BY td.tid
ORDER BY count DESC
LIMIT ". $num_term . "
) AS t
ORDER BY name ASC";

$result = db_query($query);
foreach($result as $term) {
if ($term->count > 0) {
  echo l($term->name, "taxonomy/term/$term->tid").' ('.$term->count.')'.'<br/>';
}
}

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:09:44.943

应该有办法生成您正在寻找的视图，而无需进行自定义编码。看看[http://eureka.ykyuen.info/2012/01/20/drupal-7-get-number-of-nodes-of-taxonomy-term-in-views/](http://eureka.ykyuen.info/2012/01/20/drupal-7-get-number-of-nodes-of-taxonomy-term-in-views/)或[http://dev.nodeone.se /en/the-aggregation-setting-the-emmajane-episode](http://dev.nodeone.se/en/the-aggregation-setting-the-emmajane-episode)可以帮助您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-06T14:42:07.727

在 Drupal 7 中，可以使用视图来执行此操作。无需编码或附加模块。请参阅[如何使用视图聚合器创建分类术语计数块？](http://www.brightwebsitedesign.com/how-to-use-views-aggregator-to-create-taxonomy-term-count-block)对于食谱。

# c# - EF 不包含 where 子句

> ID：10882446
> 
> 赞同：1
> 
> 时间：2012-06-04T13:48:20.870
> 
> 标签：c#, sql, linq, entity-framework

我对 EF 有一个小问题。我正在对一张大表执行查询，这需要很长时间。我想我找到了原因，但找不到解决方案；

我的 LINQ 查询如下所示：

```
IEnumerable<string> o = (from P in Table where P.ITEMID == itemid && P.IMAGESIZE == size select P.PATH);
return o.Any() ? o.FirstOrDefault() : null; 
```

我希望这会产生一个带有 where 子句的 SQL 查询，但它实际产生的是这样的：

```
SELECT 
[Extent1].[ITEMID] AS [ITEMID], 
[Extent1].........
snap 10 columns
FROM [dbo].[TABLE] AS [Extent1] 
```

where 子句和 select（我尝试只选择一列）在枚举后执行。我想要它做的是使用 where 子句生成一个 SQL 查询并只选择一列。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:52:43.443

由于您正在创建一种`IEnumerable<string>`对象类型，因此 EF 在第一行运行此查询。然后`Any()`或`FirstOrDefault()`在内存集中执行。如果您想“继续”编写 linq 语句并在最后运行查询；就去吧`IQueryable<T>`。

```
IQueryable<string> o = (from P in Table where P.ITEMID == itemid && P.IMAGESIZE == size select P.PATH);
return o.SingleOrDefault(); 
```

但正如 Ryan Bennett 建议的那样，它更易于使用；

```
return Table.Where(p => p.ITEMID == itemid && P.IMAGESIZE == size).SingleOrDefault().PATH; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T13:55:26.413

```
return table.FirstOrDefault(P => P.ITEMID == itemid && P.IMAGESIZE == size); 
```

我相信这就是你想要完成的。这将在您的 SQL 中为您提供 where 子句，并立即带回记录或 null。

# javascript - dijit.findWidgets 返回空数组？

> ID：10882448
> 
> 赞同：1
> 
> 时间：2012-06-04T13:48:31.087
> 
> 标签：javascript, widget, reload, dojo

在 JSTL 页面上，我有以下 div

```
<div dojoType="dijit.layout.TabContainer" style="width: 100%; height: 100%;" doLayout="false" id="dojoTabbedPane" >
            <c:forEach items="${summariesMap}" var="summaryEntry">
                <div dojoType="dijit.layout.ContentPane" title="${summaryEntry.key}"> 
```

我试图找到（包括dojoTabbedPane）下的所有div，以便反向销毁它下的所有contentPane。然后我可以使用 jQuery.load() 重新加载内容并使用

```
dojo.parser.parse(dijit.byId("dojoTabbedPane")); 
```

重新解析组件以确保 tabbedPane 可以呈现（否则它不会并导致内存泄漏或错误）

这里的问题是：（1）我是否在正确的轨道上重新解析dojo TabbedContainer？(2) 为什么每次 findWidgets 函数只返回大小为 0 的数组？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:36:45.273

我先回答 2：因为 dijit.findWidgets 需要一个 DOM 节点，而不是小部件。如果您需要在另一个小部件中查找所有小部件，则可以使用 getDescendants 代替：

```
var descWidgets = dijit.byId("dojoTabbedPane").getDescendants(); 
```

关于问题 1：首先：如果要销毁 TabContainer 中的所有选项卡，可以使用：

```
dijit.byId("dojoTabbedPane").destroyDescendants(); 
```

现在，如果我理解正确，您随后会从服务器（使用 jQuery）获取 HTML 字符串，并希望将其添加到 TabContainer。这个新内容包含几个 ContentPane div，您希望这些成为 TabContainer 中的新选项卡。

我在这里可能是错的，但我认为如果没有一些粗糙的黑客攻击是可行的。解析/实例化 TabContainer 后，应使用 addChild 添加选项卡，并传递实例化的 ContentPanes。

这意味着，如果您从服务器（通过您的 jQuery 加载）获得这样的新 HTML 内容：

```
<div dojoType="dijit.layout.ContentPane" title="new tab1">foo</div>
<div dojoType="dijit.layout.ContentPane" title="new tab2">bar</div> 
```

..那么你最好的选择是删除旧的 TabContainer 并制作一个新的，然后解析整个事情。如果您能够更改从服务器获取的内容，也许您可​​以简单地将其包装在`<div dojoType="dijit.layout.TabContainer...`.

# vb.net - 带有预加载文本的 RightToLeft RichTextBox

> ID：10882449
> 
> 赞同：1
> 
> 时间：2012-06-04T13:48:36.487
> 
> 标签：vb.net, richtextbox

好的，我在 vb.net 2008 中的 MS 默认 Richtextbox 中发现了一种奇怪的错误。如果我们以编程方式在 Richtextbox 中添加一些文本行。右侧有一个缺口。见下图

![错误](../Images/0a45a99f6219eb7a59bc682ed39593e0.png)

这是我的代码

```
Private Sub Button1_Click_1(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim f As New Form
    Dim rtb As New RichTextBox
    f.Width = 500
    f.Height = 500
    rtb.RightToLeft = Windows.Forms.RightToLeft.Yes
    For i = 1 To 20
        rtb.AppendText("بسم اللہ الرحمن الرحیم" & vbNewLine)
    Next
    rtb.Dock = DockStyle.Fill
    f.Controls.Add(rtb)
    f.Show()
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:32:06.713

我无法解释它，但请尝试更改代码的顺序，以便在添加文本*之前将 RichTextBox 控件添加到表单中。*这对我有用：

```
Private Sub btn1_Click(ByVal sender As Object, ByVal e As EventArgs) Handles btn1.Click
  Dim f As New Form
  f.Width = 500
  f.Height = 500

  Dim rtb As New RichTextBox
  rtb.Name = "rtb"
  rtb.Dock = DockStyle.Fill
  rtb.RightToLeft = RightToLeft.Yes

  f.Controls.Add(rtb)
  For i = 1 To 25
    rtb.AppendText("بسم اللہ الرحمن الرحیم" & vbNewLine)
  Next
  f.Show()

  f.BeginInvoke(New Action(Of RichTextBox)(AddressOf RunFix), rtb)
End Sub

Sub RunFix(ByVal rtfControl As RichTextBox)
  rtfControl.Select(0, 0)
  rtfControl.ScrollToCaret()
End Sub 
```

我添加了一个 hack`BeginInvoke`方法，该方法执行*似乎*可以解决问题的`ScrollToCaret()`调用。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:08:47.980

如果你还设置

```
rtb.Width = 500
rtb.Height = 500 
```

然后它按需要工作。

我同意这是奇怪的行为。VS 2012 RC 也是如此。*

# c# - 联合扇出查询

> ID：10882452
> 
> 赞同：1
> 
> 时间：2012-06-04T13:48:41.460
> 
> 标签：c#, azure, azure-sql-database

我是 sql azure 的新手。现在我面临一个大问题，这是因为 SQL Azure 联合。在我的一个项目中，我想使用联邦。为此，我想从所有联邦中读取数据。如何检查服务器中的联合总数并从联合中读取数据？还有如何将数据插入联邦？目前我正在使用：

```
string strSQL = @"SELECT f.name, fmc.federation_id, fmc.member_id, fmc.range_low, fmc.range_high " +
                                                            "FROM sys.federations f " +
                                                            "JOIN sys.federation_member_distributions fmc " +
                                                            "ON f.federation_id=fmc.federation_id " +
                                                            "ORDER BY fmc.federation_id, fmc.range_low, fmc.range_high";
        string strTableName = "federation_member_distributions";

        try
        {
            using (SqlConnection connection = new SqlConnection(csb.ToString()))
            {
                connection.Open();
                sbResults.AppendFormat("-- Open {0}\r\n\r\n", csb.ToString());

                data = new DataSet();
                data.Locale = System.Globalization.CultureInfo.InvariantCulture;

                using (SqlCommand command = connection.CreateCommand())
                {
                    // Connect to federation root or federation member
                    command.CommandText = "USE FEDERATION ROOT WITH RESET";
                    command.ExecuteNonQuery();
                    sbResults.AppendFormat("{0}\r\nGO\r\n", command.CommandText);
                }

                //Retrieve federation root metadata, and populate the data to the DataGridView control
                SqlDataAdapter sqlDataAdapter = new SqlDataAdapter(strSQL, connection);
                sqlDataAdapter.Fill(data, strTableName);
                sbResults.AppendFormat("{0}\r\nGO\r\n", strSQL);
            }

        }
        catch (Exception ex)
        {

        } 
```

但它不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T16:28:44.820

对于上述问题，您确实需要查看这些有关如何使用 SQL Azure 联合的文章：

[SQL Azure 中联合的扇出查询简介（第 1 部分）：多个联合成员的可扩展查询，MapReduce 风格！](http://blogs.msdn.com/b/cbiyikoglu/archive/2011/12/29/introduction-to-fan-out-queries-querying-multiple-federation-members-with-federations-in-sql-azure.aspx)

您可以在上面找到**Fanout 示例工具**，其中包含向您展示如何从联邦获取数据的代码。

此示例的第二部分“ [SQL Azure 中联合的扇出查询（第 2 部分）：具有 TOP、ORDER BY、DISTINCT 和其他强大聚合的可扩展扇出查询，MapReduce 样式！](http://blogs.msdn.com/b/cbiyikoglu/archive/2012/01/19/fan-out-querying-in-federations-part-ii-summary-queries-fanout-queries-with-top-ordering-and-aggregates.aspx) ”展示了如何运行扇出带有特定示例的查询。

试试上面的示例，如果您遇到任何问题，请告诉我们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T23:08:17.833

我与 SQL Azure 团队的 Cihan Biyikoglu 进行了讨论，以下是他的建议：

这个想法是，您不必使用联邦缓存数据所在位置的“地图”，因此您不必这样做；

这是伪应用程序代码和执行扇出的实际示例；您也可以在此 UI 中试用代码。

[http://federationsutility-seasia.cloudapp.net/About.aspx](http://federationsutility-seasia.cloudapp.net/About.aspx)

```
Start at the 
@i=MIN_VALUE (of the data_type or federation key like customerID=-1)
While (@i not null)
{
 Try
 {
    -- switch to the next member
    USE FEDERATION fedname(id=@i)...

    -- Run your transaction here for this member 
    SELECT * FROM table join other_table … WHERE fedkeycolumn >= @i group by … order by …

    -- grab the next value
    SELECT @i=range_high FROM sys.federation_member_distributions 
 }
 Catch ()
 {
           If retry_count < total_retries
                          Exit the loop
 }
} 
```

如果您仍然想找出成员，您可以随时在包含联邦的数据库中运行查询；

```
Select * from sys.federation_member_distributions fmd join sys.federations f on fmd.federation_id=f.federation_id 
```

这种方法的问题是，如果在读取信息和完成查询处理之间存在间隔，您可能会错过读取数据。

上面没有缓存“地图”的方法不容易出现这个问题。无论任何重新分区操作如何，它都会捕获所有成员。

# mysql - 在 MySQL 表中使用 enum('y','n') 代替布尔字段是否不好？

> ID：10882454
> 
> 赞同：6
> 
> 时间：2012-06-04T13:48:47.657
> 
> 标签：mysql

所以几年前，我看到了一个由第 3 方开发的系统的 DB 模式，并注意到他们使用 enum('y','n') 而不是布尔（tinyint）字段。我不知道为什么，但我非常喜欢它，我发现它使事情更容易阅读（我知道这完全是主观的），但我采用了它并从那时起开始使用它。我想我可以把它换成“真”和“假”，但是，我能说什么，我只是喜欢它。

话虽如此，以这种方式做事是否有任何挫折——除了可能会有点烦人在游戏中迟到的程序员？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-04T13:52:59.837

是的，这很糟糕。你失去了直观的布尔逻辑（`SELECT * FROM user WHERE NOT banned`变成`SELECT * FROM user WHERE banned = 'n'`），并且你在应用程序端接收字符串而不是布尔值，所以你的布尔条件也变得很麻烦。其他使用您的架构的人会因为看到类似标志的列名并尝试在它们上使用布尔逻辑而被咬伤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T13:58:54.610

如[手册中所述](http://dev.mysql.com/doc/refman/5.5/en/enum.html#enum-nulls)：

> 如果将无效值插入到`ENUM`（即，允许值列表中不存在的字符串）中，则会将空字符串作为特殊错误值插入。该字符串与“普通”空字符串的区别在于该字符串的数值为 0。有关[枚举的数字索引的详细信息，请参阅第 11.4.4 节，“枚举文字的索引值”</a>价值观。](http://dev.mysql.com/doc/en/enum.html#enum-indexes)
> 
>  [如果启用了严格的 SQL 模式，则尝试插入无效`ENUM`值会导致错误。](http://dev.mysql.com/doc/en/enum.html#enum-indexes)

[](http://dev.mysql.com/doc/en/enum.html#enum-indexes)

[在这方面，一个`ENUM`导致与一个`BOOLEAN`类型不同的行为；否则我倾向于同意](http://dev.mysql.com/doc/en/enum.html#enum-indexes)[@lanzz 的回答](https://stackoverflow.com/a/10882512/623041)，即它使与应用程序的集成变得不那么直接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T14:51:29.980

要考虑的一个因素是编写原始模式的人是否将其限制为 MySQL。如果它只打算在 MySQL 上运行，那么适应 MySQL 是有意义的。如果相同的模式旨在与其他 DBMS 一起使用，那么适用于所有相关 DBMS 的更通用的模式设计对于设计人员可能会更好。

话虽如此，这`enum`是适度特定于 MySQL 的，但`enum`可以在其他 DBMS 中轻松创建等效的东西：

```
CREATE TABLE ...
(
    ...
    FlagColumn   CHAR(1) NOT NULL CHECK(FlagColumn IN ('y', 'n')),
    ...
); 
```

尽管有 SQL 标准，但不同 DBMS 处理 BOOLEAN 的方式并不像您希望的那样统一（原因是一如既往的历史；在标准之前，不太符合标准的系统对 BOOLEAN 的主题有变化，并且更改其实现会破坏其现有客户的代码）。

所以，我不会自动谴责使用`enum`over `boolean`，但最好使用`boolean`布尔标志。

# wpf - 超链接列表框不会将单击的超链接显示为选定项或当前项

> ID：10882455
> 
> 赞同：-1
> 
> 时间：2012-06-04T13:48:48.770
> 
> 标签：wpf, xaml, listbox

我的一个网格单元中有一个带有超链接的列表框。当我单击列表框中的任何项目时，当前项目始终是列表框中的第一条记录，并且所选项目始终为空。这是我的WPF。我究竟做错了什么？

```
 <DataTemplate x:Key="CellTemplate.InputManagersList">
        <StackPanel Orientation="Horizontal">
            <ListBox ItemsSource="{Binding Path=InputManagers}" HorizontalAlignment="Left">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock>                                    
                        <Hyperlink Name="inputManagerName" 
                           Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.OpenInputManagerViewCommand}"
                           CommandParameter="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListBox}}}">
                           <TextBlock Text="{Binding Path=Name}" />
                        </Hyperlink>
                    </TextBlock>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
                <ListBox.Style>
                    <Style TargetType="ListBox">
                        <Setter Property="HorizontalAlignment" Value="Left"/>
                        <Setter Property="BorderThickness" Value="0"/>
                    </Style>
                </ListBox.Style>
            </ListBox>
        </StackPanel>
    </DataTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:56:00.337

请`SelectedItem="{Binding SelectedName}"`在列表视图对象中绑定。

# sharepoint - 使用 IIS 7.5 重写条件 URL

> ID：10882459
> 
> 赞同：0
> 
> 时间：2012-06-04T13:49:08.793
> 
> 标签：sharepoint, iis, url-rewriting

我们有一个双语 SharePoint 网站，并希望确保所有法语内容都通过我们的法语域汇集，我们将其命名为 _frenchdomain.com。

SharePoint 中的语言变体由文件夹结构分隔，因此在我们的示例中，您可以访问 _http://englishdomain.com/en 获取英语内容，访问 _http://englishdomain.com/fr 获取法语内容。

我的问题是如何让 IIS 识别_http://englishdomain.com/fr/* 的**任何**实例，并将其重写为 _http://frenchdomain.com/fr/*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:59:21.487

```
 <rule name="fr">
      <match url="fr/.*"/>
      <conditions>
        <add input="{HTTP_HOST}" pattern="^frenchdomain.com$" negate="true" />
      </conditions>
      <action type="Redirect" url="http://frenchdomain.com/{R:0}" redirectType="Permanent"/>
    </rule> 
```

# ios - 如何在 Cocos2d 中找出占用内存的内容

> ID：10882467
> 
> 赞同：2
> 
> 时间：2012-06-04T13:49:37.320
> 
> 标签：ios, memory-leaks, cocos2d-iphone, profiling, xcode4.2

我正在使用 Cocos2D for iOS 开发游戏。

有一些像菜单之类的场景和一个主要的游戏场景。在主场景中只有三个动态对象。这些对象周期性地互相射击（直到这些对象被杀死或移出场景）。

现在的问题是：游戏不断消耗内存。我想找出我做错了什么。

没有像过度保留的物体这样的明显泄漏。场景被`dealloc`编辑，对象被从父母身上移除并被清理，动画被停止等等。

无论如何，记忆一直在某个地方。我正在使用以下代码

```
+ (void) reportMemory
{
    struct task_basic_info info;
    mach_msg_type_number_t size = sizeof(info);
    kern_return_t kerr = task_info(mach_task_self(),
                                   TASK_BASIC_INFO,
                                   (task_info_t)&info,
                                   &size);
    if (kerr == KERN_SUCCESS)
        NSLog(@"Memory in use (in Kbytes): %f", info.resident_size / 1024.0);
    else
        NSLog(@"Error with task_info(): %s", mach_error_string(kerr));
} 
```

找出每个场景开始时消耗了多少内存。并且报告的数字总是大于前一个。

我尝试使用分配分析器，但老实说，我无法找出任何有用的东西。我看到总生存字节基本相同，但进程不断分配和释放一些东西。

你建议我看什么？基本上，我正在寻求有关如何在我的情况下调试内存操作的建议。

**编辑（对我有什么帮助）：**

原来我打开了 NSZombieEnabled。基本上，这是内存消耗不断增加的主要因素。可以在[@coneybeare 答案中找到一些有用的信息和提示](https://stackoverflow.com/a/1622091/249690)

第二个最有用的事情是按照@Jack 的建议使用 Instruments (Leaks and Allocations)。它帮助我找到了几个微妙的漏洞。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T14:02:47.820

**Instruments**绝对是你的朋友，是什么东西会吃掉内存然后你就能看到它。

您应该使用的第一件事是**泄漏**工具（不是**分配**工具），它将通过每 X 秒采样一次内存来显示泄漏。

如果您单击特定的已识别泄漏，您可以看到

*   在发现泄漏**的**负责调用链中
*   **通过单击B**中的小箭头，您可以看到内存泄漏的确切生活进程（例如当它被 malloc'd、retained、release 等时）

![泄露 Xcode](../Images/8893179368c782133ddc820bafcd5a6f.png)

如果这还不够，通过选择**分配**工具，您在左侧有一个标记为**Mark Heap**的按钮。每次单击此按钮都会创建堆的快照，并且它能够向您显示确切的差异，以便您能够查看在不应该有的两个时刻之间是否有分配的内存和从未释放的内存.

![在此处输入图像描述](../Images/c1859abaa5abae6e0ebff64557254024.png)

有了这些，我总能找到任何与内存相关的问题！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T14:37:35.587

我将首先查看纹理缓存，如下所示：

```
[[CCTextureCache sharedTextureCache] dumpCachedTextureInfo]; 
```

在每个场景开始时这样做。纹理可以是真正的内存猪。可能您以某种方式保留了一些纹理（一种快速的方法是通过也在某处缓存中的 spriteFrames），或者保留的引用可能在您的数据模型中的某个地方。这是我的#if DEBUG memoryWarning 委托：

```
- (void)applicationDidReceiveMemoryWarning:(UIApplication *)application {
    CCLOG(@"AppDelegate<applicationDidReceiveMemoryWarning> : before purging all caches");
    [[CCTextureCache sharedTextureCache] dumpCachedTextureInfo];
    [[CCSpriteFrameCache sharedSpriteFrameCache] removeUnusedSpriteFrames];
    [[CCDirector sharedDirector] purgeCachedData];
    CCLOG(@"AppDelegate<applicationDidReceiveMemoryWarning> : after purging all caches");
    [[CCTextureCache sharedTextureCache] dumpCachedTextureInfo];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T16:05:06.170

确保你没有在 Cocos 层次结构中保留任何对象；Cocos 内置的清理对象的方法并不总是有效，除非 Cocos 拥有它们的唯一控制权和所有权；如果您将 Sprite 或 Layers 存储为保留的 iVar，将它们的引用计数增加到超出正常 Cocos 所有权的范围，那么它们可能无法按预期清理。`assign`出于这个原因，我在保存指向 Cocos 对象的指针时总是使用属性。

# java - 哪个类相当于 GWT 中 Javascript 的对象 window.document？

> ID：10882468
> 
> 赞同：0
> 
> 时间：2012-06-04T13:49:37.563
> 
> 标签：java, javascript, gwt, firefox-addon

我正在构建一个扩展，它首先获取与 HTTPRequest 关联的窗口，如此[处](https://stackoverflow.com/questions/10719606/is-it-possible-to-know-the-target-domwindow-for-an-httprequest)所述。

文档中有一个 div 元素，它有一个来自外部网站的 src。我基本上取消了请求并获得了关联的窗口。
现在说我想用字符串“Hello World”填充该窗口的文档。

在 JavaScript (JSNI) 中使用以下内容是可行的（即，它替换了通常来自外部源的数据所在的字符串）：

```
window.document.write("Hello World"); 
```

但我真的需要在 Java 中而不是通过 JSNI 来做到这一点。

我尝试使用类 Document 来传递从 JSNI 调用的对象：

```
@[package].[class]::populateBox(Lcom/google/gwt/dom/client/Document)(window.document); 
```

该方法定义为：

```
public static void populateBox(Document doc){
  doc.getBody().setInnerHTML("Hello World);
} 
```

此代码而不是替换要加载请求的 div 处的文本，而是替换 html 文档的顶级正文。

这里有什么问题？Document 是在这里使用的错误类吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:57:00.903

您的代码没有问题：

`window.document`捐赠`Document`.

`doc.getBody()`将是文档的完整正文。

`doc.getBody().setInnerHTML("")`; 将删除完整的内容并将正文设置为新值。

我认为您正在寻找[appendChild](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/user/client/DOM.html#appendChild%28com.google.gwt.user.client.Element,%20com.google.gwt.user.client.Element%29)：

```
DOM.appentChild(doc.getBody(), new HTML('Hello World!').getElement()); 
```

# python - 与 Python 的 dir() 等效的 Groovy 是什么？

> ID：10882469
> 
> 赞同：10
> 
> 时间：2012-06-04T13:49:40.963
> 
> 标签：python, groovy

在 Python 中，我可以看到对象具有哪些方法和字段：

```
print dir(my_object) 
```

Groovy 中的等价物是什么（假设它有一个）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T13:53:37.077

在 Groovy 中看起来特别好（未经测试，[取自此链接](http://noor.ojuba.org/2008/07/groovy-introspection-know-what-you-have/)，因此代码信用应该去那里）：

```
// Introspection, know all the details about classes :
// List all constructors of a class
String.constructors.each{println it}

// List all interfaces implemented by a class
String.interfaces.each{println it}

// List all methods offered by a class
String.methods.each{println it}

// Just list the methods names
String.methods.name

// Get the fields of an object (with their values)
d = new Date()
d.properties.each{println it} 
```

您正在寻找的通用术语是**introspection**。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-04T13:53:47.623

[如此处](http://naleid.com/blog/2008/05/07/what-methods-does-my-groovygrails-class-have/)所述，要查找为 String 对象定义的所有方法：

```
 "foo".metaClass.methods*.name.sort().unique() 
```

它不像Python版本那么简单，也许其他人可以提供更好的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T14:16:21.763

除了只使用普通的 Java 反射 API，还有：

[http://docs.codehaus.org/display/GROOVY/JN3535-Reflection](http://docs.codehaus.org/display/GROOVY/JN3535-Reflection)

您还可以使用元类玩游戏。

# jquery - 具有特定属性的 jQuery 选择器

> ID：10882471
> 
> 赞同：6
> 
> 时间：2012-06-04T13:49:44.317
> 
> 标签：jquery, anchor

我有这个代码：

```
$('a').click(
   function() {
       $("#change_flash").css("display", "block"); $("#my_flash").css("display", "none");
  }); 
```

但是这个适用于所有锚元素。我只想用这个脚本来影响包含 rel="lightbox" 属性的锚元素。

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T13:51:05.057

```
$('a[rel="lightbox"]').click(
   function() {
       $("#change_flash").css("display", "block"); $("#my_flash").css("display", "none");
  }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-04T13:51:14.450

使用以下内容：

```
$('a[rel="lightbox"]').click(
    function(){
        // do your stuff here
    }); 
```

这是使用`attribute="value"`符号（参见参考资料）。

还有其他选择：

*   属性开始于：`attribute^="value"`，
*   属性结束：`attribute$="value",`
*   属性包含：`attribute*="value"。

当然，请注意，虽然`$('[rel="lightbox"]')`它本身是一个绝对有效的选择器，但这将导致 jQuery 检查页面上的*每个*元素的属性和值，以便绑定/分配`click`事件；因此，最好使用标签名，即`$('a[rel="lightbox"]')`,*或*类名，以限制 jQuery 必须搜索以找到匹配元素的元素数量。

虽然在现代浏览器中我似乎记得这个“搜索”是交给原生的`document.querySelectorAll()`，而不是使用 Sizzle，但即便如此，最好限制浏览器需要做的工作量。

参考：

*   [属性等于选择器](http://api.jquery.com/attribute-equals-selector)。
*   [属性开始与选择器](http://api.jquery.com/attribute-begins-with-selector/)。
*   [属性以选择器结尾](http://api.jquery.com/attribute-ends-with-selector/)。
*   [属性包含选择器](http://api.jquery.com/attribute-contains-selector/)。

# c++ - 启动特定子进程后挂起进程

> ID：10882473
> 
> 赞同：1
> 
> 时间：2012-06-04T13:49:50.597
> 
> 标签：c++, windows, winapi, process

我有一个 loader.exe，它使用 CreateProcess(..) 启动进程 A 一段时间后，另一个进程 B 启动进程 A。

当进程A将启动B时，我想暂停进程A和进程B。我该如何等待B？我想收到通知，还是必须在流程完成之前进行轮询？

在运行时，我知道进程 B 的名称，并且我知道 B 将由进程 A 启动。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:53:42.933

使用[Boost 进程间库](http://www.boost.org/doc/libs/1_49_0/doc/html/interprocess.html)。您特别感兴趣的是互斥体、条件和信号量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:40:04.433

如果你不热衷于使用 Boost，可以考虑 win32 mutex。有关如何使用它的更多信息，请参阅此线程。[互斥量解释](https://stackoverflow.com/questions/3528877/can-some-one-explain-mutex-and-how-that-is-used)

基本上，您可以从进程 B 创建具有给定名称的互斥锁，然后等待来自 A/Loader 的相同互斥锁。

# php - 在图像上找到最喜欢的区域

> ID：10882474
> 
> 赞同：7
> 
> 时间：2012-06-04T13:50:14.003
> 
> 标签：php, algorithm, math, statistics

当我的图像具有 N 个样本大小的选择时，我应该使用什么均值统计方程？

我有一个独特的问题，我希望得到一些建议，这样我就不会错过任何事情。问题：根据用户对不同选择比率的区域的选择，在图像上找到最喜欢/最喜欢/最重要的区域。

场景：考虑[一张狗的图像](http://www.kelowna.ca/CM/AssetFactory.aspx?did=9133)，数百名用户在不同分辨率的图像上选择区域，大多数选择中明显的焦点区域将是包含狗的区域。我可以记录 x1,x2,y1,y2 坐标并将它们放入数据库中，现在如果我想以一组分辨率自动生成该图像的版本，我应该能够识别具有最大吸引力的区域用户。我认为可行的方法是：

1.  找到所有选择的平均中心点，并以此为基础选择。- 非常简单，但不会那么准确。
2.  使用一些算法，如 K 均值或 EM 聚类，但我不知道哪一个最适合。

期待一些出色的解决方案来解决我的问题

有关该问题的更多信息：实际图像很可能是 1024x768 图像，并且在其上所做的选择将是最常见的手机分辨率。目标是根据用户选择通过智能学习自动生成手机壁纸。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:44:08.990

我相信您在上面发现了**两个**明显的问题：

**一：点的识别**

为此，您需要开发某种启发式方法来确定是否应考虑某个点。

我相信你提到过数百名用户将在这张图片上选择位置？数百个可能是很多点进行聚类。考虑排除异常值（通过删除在特定距离内没有一定数量邻居的点）

您可以做任何减少数据集的事情都会有所帮助。

* * *

**二：点聚类**

我相信 K 均值聚类最适合这个特定问题。 [关联](http://en.wikipedia.org/wiki/K-means_clustering)

您的特定问题似乎与解释此算法时使用的标准笛卡尔坐标聚类示例非常相似。

您尝试做的似乎是 NP-Hard，但应该通过经典近似来满足。

聚类后​​，您可以对该聚类中的点取平均值以获得相当准确的近似值。

**此外：**

您的数据集听起来像是已经紧密聚集在一起了。（即大多数人会选择狗的脸，而不是躯干的一侧。）您需要注意局部最小值。[链接](http://en.wikipedia.org/wiki/K-means_clustering#Discussion)这些真的会给你的算法带来麻烦。尤其是在少量集群的情况下。请注意，您可能需要一些动态编程来解决这个问题。你通常可以在你的算法中引入一些方差，让平均点从这些局部最小值中“弹出”。[局部最小值/最大值](http://en.wikipedia.org/wiki/Local_minimum)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T17:03:34.420

我认为您可能能够以不同的方式解决您的问题。如果您还没有听说过[Seam Carving](http://en.wikipedia.org/wiki/Seam_carving)，那么我建议您检查一下，因为您可以使用的数据非常适合它。这个想法是，您可以删除不一定在直线上的像素路径，而不是裁剪图像来调整它的大小。这使您可以在保留更多“有趣”信息的同时调整图像大小。

通常你会选择能量最小的路径，这里的能量是对沿着路径的色调/强度变化量的某种度量。当您拥有非常重要的图像区域（例如狗的脸）但这些区域的能量不一定非常高时，这将失败。由于您有指示图像的哪些部分非常重要的用户数据，因此您可以确保在每次有人选择具有该像素的区域时明确地向像素添加一点能量来围绕图像的这些区域进行雕刻。

[这段视频](http://www.youtube.com/watch?v=6NcIJXTlugc)展示了缝雕的实际效果，即使您认为自己不会使用它，观看起来也很酷。不过，我认为值得一试，我之前曾在一些有趣的调整大小应用程序中使用过它，而且它实际上很容易实现。

# eclipse - 如何在 Eclipse 中设置 JDBC？

> ID：10882475
> 
> 赞同：12
> 
> 时间：2012-06-04T13:50:21.640
> 
> 标签：eclipse, jdbc, installation, driver

我有 eclipse 和 j 开发人员，我对 eclipse 更满意。我想知道如何在 eclipse 中设置 JDBC 驱动程序，我从 oracle.com 下载了一个驱动程序，但是当我点击“外部 jars”后浏览时它没有出现在任何地方在“库”选项卡中的“java 构建路径”中。我的数据库是 Oracle Express Edition。

是否有任何好的 pdf 或 Java 应用程序开发教程？我想制作一个前端应用程序，在其中将数据输入字段并将其插入 DB，并使其在输入例如 ID 时也可以检索信息。

这需要什么材料？我不想学得太深，但我想在这个过程中学习（这不是一个项目，只是我本月想完成的事情）所以我猜我需要 1\. 一本关于awt,swing classes 2\. 我需要设置这个 JDBC 东西我不明白如何在 eclipse 中启动和运行它，我输入代码它给了我错误。3.一本关于如何将java连接到oracle express edition DB的书。我有 JDK 1.7.0.0.3

在此先感谢（我是初学者；））

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-04T16:08:52.490

如果你想在你的 Eclipse 项目中包含一个 JAR 文件，你通常会在项目文件夹中创建一个“lib”文件夹，然后把文件放在那里。然后，您需要告诉 eclipse 将其包含在您的类路径中，以便您的代码将在 eclipse 中编译和运行。

要做到这一点： - 进入项目的属性 - 在左侧栏中选择“Java Build Path” - 选择窗口中心部分的“库”选项卡 - 单击“添加 JAR”按钮 - 这将为您提供您在 Eclipse 中的项目列表 - 展开您的项目并进入 lib 文件夹 - 您的 jar 将在那里。- 选择 JAR，单击 OK，然后再次从属性窗口中单击 OK。

或者，您可以右键单击 jar，然后单击 BuildPath->Add to Build Path。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T05:51:34.070

从 Build 路径中选择 Add External Jar 选项，然后浏览到下载 Jar 的位置，选择它并添加它。

如果在浏览构建路径时找不到 Jar，请检查 Windows 资源管理器中的位置并确认它就是您要搜索的位置。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-11-10T11:22:46.990

您问如何“在 Eclipse 中设置 jdbc”。这是我对你的问题的看法。如果这不是您问题的答案，也许它会帮助其他人。

另外-我正在使用开普勒日食。（真的是基于开普勒的jboss dev studio版本）

首先设置驱动程序。

> 首选项 -> 连接性 -> 驱动程序定义

单击添加... 并按照提示进行操作。此时您将能够测试连接。Eclipse 很明显如何！（单击测试连接按钮）

关闭首选项窗口。在主窗口中

> 窗口 -> 显示视图... -> 数据源资源管理器

右键单击数据库连接。选择新建...并按照提示进行操作。

您将能够打开连接并浏览您的数据库。

至于启用 JPA 的应用程序，可能有一种方法可以让 eclipse 设置它（即右键单击您的项目，上下文菜单中可能有一些东西）。它会在正确的位置设置一个 persistence.xml 文件，也许还有其他东西。我不知道在我的头顶。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-27T10:15:13.423

添加一个 classnotfound 异常。像这样：

```
try {

    Class.forName("com.mysql.jdbc.Driver");//the class driver

} catch (ClassNotFoundException e) {

    e.printStackTrace();

} 
```

# vb.net - VB.Net - 寻找设计模式 - For Each 而不是 For with index

> ID：10882478
> 
> 赞同：1
> 
> 时间：2012-06-04T13:50:44.160
> 
> 标签：vb.net, for-loop, foreach, indexing, each

使用 VB.Net，我正在寻找处理以下成语的最佳实践：

```
For i as Integer = 0 To o1.Count - 1
  o1(i).x = o2(i).x
Next 
```

我真正想要的是 VB.Net 不提供的东西—— For Each 语句上的附加和同时迭代器。

```
For Each m1 As c1 In o1, m2 As c2 In o2
  m1.x = m2.x
Next 
```

我对 Linq 和非 Linq 的建议、关于复制方法设计的评论、与 C# 或其他语言的比较感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:56:15.627

我确定您的实际情况比您展示的示例更复杂，但我认为值得一提的是，如果您所做的只是尝试将整个项目列表从一个列表复制到另一个列表，您可以只需执行以下操作：

```
Dim list2 = New List(Of Object)(list1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:31:52.483

我不完全确定您要对此做什么。如果您详细说明您的问题，我们可能会为您提供更好的帮助。

如果两个列表的类型相同，您可以将一个列表附加到另一个列表，然后在一个列表上使用 for each。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T15:26:42.737

我提交了一个请求来扩展 For Each 语句以实现额外的和同时的迭代器。

[http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2923571-allow-additional-clauses-on-for-each-similar-to-c-](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2923571-allow-additional-clauses-on-for-each-similar-to-c-)

我仍然对其他解决方案感兴趣，但在那之前，这就是答案。

# titanium - Appcelerator Titanium Facebook 点赞菜单

> ID：10882487
> 
> 赞同：2
> 
> 时间：2012-06-04T13:51:18.637
> 
> 标签：titanium, appcelerator, titanium-mobile, appcelerator-mobile

那时我正在开发一个应用程序，我想从这里使用 Facebook Like Menü：

[https://github.com/mpociot/titanium-facebook-slide-menu](https://github.com/mpociot/titanium-facebook-slide-menu)

```
// ALPHABYTES

// Facebook like menu window
var leftMenu    = Ti.UI.createWindow({
    backgroundColor: 'red',
    top:   0,
    left:  0,
    width: 150,
    zIndex: 1
});
var data = [{title:"Row 1"},{title:"Row 2"},{title:"Row 3"},{title:"Row 4"}];
var tableView   = Ti.UI.createTableView({ data: data });
leftMenu.add(tableView);
leftMenu.open();

// Facebook like menu window
var rightMenu   = Ti.UI.createWindow({
    backgroundColor: 'red',
    top:   0,
    right:  0,
    width: 150,
    zIndex: 1
});
var data = [{title:"Row 1"},{title:"Row 2"},{title:"Row 3"},{title:"Row 4"}];
var tableView   = Ti.UI.createTableView({ data: data });
rightMenu.add(tableView);
rightMenu.open();

// animations
var animateLeft = Ti.UI.createAnimation({
    left: 150,
    curve: Ti.UI.iOS.ANIMATION_CURVE_EASE_OUT,
    duration: 500
});
var animateRight    = Ti.UI.createAnimation({
    left: 0,
    curve: Ti.UI.iOS.ANIMATION_CURVE_EASE_OUT,
    duration: 500
});
var animateNegativeLeft = Ti.UI.createAnimation({
                left: -150,
                curve: Ti.UI.iOS.ANIMATION_CURVE_EASE_OUT,
                duration: 500
});

var win = Titanium.UI.createWindow({
    left: 0,
    zIndex: 10
});
var win1 = Titanium.UI.createWindow({
    backgroundColor: 'white',
    title: 'Facebook menu',
    left: 0,
    zIndex: 10
});
var nav = Titanium.UI.iPhone.createNavigationGroup({
   window: win1,
   left: 0,
   width: Ti.Platform.displayCaps.platformWidth
});
var button = Ti.UI.createButton({
    title: 'm',
    left: 10,
    width: 30,
    height: 30,
    top: 10
});
var button2 = Ti.UI.createButton({
    title: 'm',
    right: 10,
    width: 30,
    height: 30,
    top: 10
});
var touchStartX = 0;
var touchStarted = false;
win1.addEventListener('touchstart',function(e){
    touchStartX = parseInt(e.x,10);
});
win1.addEventListener('touchend',function(e){
    touchStarted = false;
    if( win.left < 0 ){
        if( win.left <= -140 ){
            win.animate(animateNegativeLeft);
            isToggled = true;
        } else {
            win.animate(animateRight);
            isToggled = false;
        }
    } else {
        if( win.left >= 140 ){
            win.animate(animateLeft);
            isToggled = true;
        } else {
            win.animate(animateRight);
            isToggled = false;
        }
    }
});
win1.addEventListener('touchmove',function(e){
    var x       = parseInt(e.globalPoint.x, 10);
    var newLeft = x - touchStartX;
    if( touchStarted ){
        if( newLeft <= 150 && newLeft >= -150)
        win.left    = newLeft;
    }
    // Minimum movement is 30
    if( newLeft > 30 || newLeft < -30 ){
        touchStarted = true;
    }
});
nav.add(button);
nav.add(button2);
win.add(nav);
win.open();

var isToggled = false;
button.addEventListener('click',function(e){
    if( !isToggled ){
        win.animate(animateLeft);
        isToggled = true;
    } else {
        win.animate(animateRight);
        isToggled = false;
    }
});

button2.addEventListener('click',function(e){
    if( !isToggled ){
        win.animate(animateNegativeLeft);
        isToggled = true;
    } else {
        win.animate(animateRight);
        isToggled = false;
    }
}); 
```

我还实现了菜单，一切都按预期工作。

现在我的问题如下：如果我单击左侧菜单中的“第 1 行”（与我一起“设置”），我希望在主窗口中显示我的设置菜单。**怎么做？**

如果我创建一个新窗口并打开它，我会得到一个完整的新窗口，左侧没有 facebook 菜单和按钮......我不知道该怎么做？！？！有人可以帮忙吗？

谢谢，萨沙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:50:21.950

我希望我没有误解你的问题，但我会在主窗口内打开新窗口作为视图。这是一些代码：[https ://gist.github.com/manumaticx/4961175](https://gist.github.com/manumaticx/4961175)

或者你想改变菜单？然后你会对左边的菜单窗口做同样的事情！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-05T19:26:07.020

```
var curWin = Titanium.UI.createWindow();

var menuBtn = Titanium.UI.createButton({
    title : "Menu",
    top : 20,
    left : 5,
    zIndex : 999
});

var windowView = Titanium.UI.createView({
    top : 60,
    left : 0,
    right : 0,
    width : '100%',
    height : '100%',
    backgroundColor : "blue",
    zIndex : 1
});
curWin.add(windowView);

curWin.add(menuBtn);

curWin.open();

var menuWindow = Titanium.UI.createView({
    top : 20,
    left : 0,
    width : 150
});

curWin.add(menuWindow);
//// ---- Menu Table
// Menu Titles
var menuTitles = [{
    title : 'Menu 1'
}, {
    title : 'Menu 2'
}, {
    title : 'Menu 3'
}, {
    title : 'Menu 4'
}, {
    title : 'Menu 5'
}, {
    title : 'Menu 6'
}];
// Tableview
var tableView = Titanium.UI.createTableView({
    data : menuTitles
});
menuWindow.add(tableView);
var toggle = false;
menuWindow.hide();
menuBtn.addEventListener('click', function(e) {
    if (toggle) {
        menuWindow.hide();
        toggle = false;
        windowView.left = 0;
        menuBtn.left = 5;
    } else {
        menuWindow.show();
        toggle = true;
        windowView.left = 150;
        menuBtn.left = 160;
    }
});

windowView.addEventListener('click', function(e) {
    if (toggle) {
        menuWindow.hide();
        toggle = false;
        windowView.left = 0;
        menuBtn.left = 5;
    }
}); 
```

# java - 使用 Scala（或 Java）中的 python 代码的最佳方法是什么？

> ID：10882488
> 
> 赞同：6
> 
> 时间：2012-06-04T13:51:25.720
> 
> 标签：java, python, scala, jython

> **可能重复：**
> [Java Python 集成](https://stackoverflow.com/questions/1119696/java-python-integration)

有一些用 Python 编写的代码，我需要在 Scala 中使用它。该代码使用了一些本机 C。是否可以从 Scala 或 Java 中使用它而无需重写太多？

我打算在不理解的情况下将代码用作黑盒，因此我不想对其进行研究，而是以某种方式生成一个可以在我的代码中导入的 jar。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:56:18.197

为什么不试试[Jython](http://www.jython.org/)呢？你可以直接将 Python 代码编译成 Java 类，或者通过接口从 Java 中调用 Python 代码。

# .net - 如何将 httpRuntime maxRequestLength="8096" 集成到 app.config [Webservices]

> ID：10882493
> 
> 赞同：3
> 
> 时间：2012-06-04T13:51:44.717
> 
> 标签：.net, web-services

我有一个等待 xml 到达的网络服务。今天我们注意到，XML 有时似乎太大了。现在我想添加`<httpRuntime maxRequestLength="10096" useFullyQualifiedRedirectUrl="true" executionTimeout="120"/>`到我的 app.config 中。不幸的是它似乎没有效果......这是我的app.config：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.web>
    <httpRuntime maxRequestLength="10096"
        useFullyQualifiedRedirectUrl="true"
        executionTimeout="120"/>
  </system.web>

  <system.serviceModel>
    <client />
    <standardEndpoints />
    <services>
      <service behaviorConfiguration="metadataSupport" name="iib.wohnpreis.wohnpreisserver">
        <host>
          <baseAddresses>
            <add baseAddress="URLToWebservice" />
          </baseAddresses>
        </host>
      </service>
    </services>

    <bindings>
      <basicHttpBinding>
        <binding name="basicHttpBinding" transferMode="Buffered" useDefaultWebProxy="false">
          <readerQuotas maxStringContentLength="2147483647" />
        </binding>
      </basicHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="metadataSupport">
          <serviceMetadata httpGetEnabled="true" httpGetUrl="wohnpreis/mex" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

任何建议出了什么问题？谢谢你试图帮助我！

斯蒂菲

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T11:09:34.347

有问题。服务器告诉客户端 maxStringContentLength 被限制为 8096 - 这不是真的，因为我们用

```
<bindings>
  <basicHttpBinding>
    <binding name="basicHttpBinding" transferMode="Buffered" useDefaultWebProxy="false">
      <readerQuotas maxStringContentLength="2147483647" />
    </binding>
  </basicHttpBinding>
</bindings> 
```

不幸的是，这只有在我们删除时才有效，`name="basicHttpBinding"`所以它看起来像

```
<bindings>
  <basicHttpBinding>
    <binding transferMode="Buffered" useDefaultWebProxy="false">
      <readerQuotas maxStringContentLength="2147483647" />
    </binding>
  </basicHttpBinding>
</bindings> 
```

不知道名称如何干扰配置 - 但没有名称它可以正常工作......

# jquery - 仅使用 CSS 和 HTML 创建透明图像

> ID：10882494
> 
> 赞同：4
> 
> 时间：2012-06-04T13:51:46.853
> 
> 标签：jquery, html, css

是否可以仅通过 CSS/HTML 创建此图像，而不使用 JavaScript？因为内容是动态的，图像是透明的。

![在此处输入图像描述](../Images/48897db60cec34bfb473608e103058eb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T13:57:53.267

是的，您可以将多个图像堆叠在一起，以使用 HTML 和 CSS 创建您发布的内容。

要获得不透明效果，请使用

```
.opacity40 {
opacity:0.4;
filter:alpha(opacity=40); /* For IE8 and earlier */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T14:07:13.883

您已将图像拆分为图层：

1.  多彩的背景
2.  带有透明圆圈的白色层
3.  放在圆圈内的眼睛和其他图标

它可能看起来像这样：

**HTML：**

```
<div class="colorful-box">
    <div class="box-with-circle">
        <span class="eye icon"/>Lorem Ipsum With eye
    </div>
</div>

<div class="colorful-box">
    <div class="box-with-circle">
        <span class="ear icon"/>Lorem Ipsum an ear instead
    </div>
</div> 
```

**CSS：**

```
.colorful-box{
    background: url(link-to-the-colorfull-background.jpg);
    width: 400px;
    height: 100px;
    float: left;
}

.box-with-circle{
    background: url(white-box-with-transparent-circle.png);
    margin: 10px;
    width: 380px;
    height: 80px;
    float: left;
}

.icon{
    width: 80px;
    height: 80px;
    float: left;
    position: realtive;
    top: 80px; /*Make it fit inside circle*/
    left: 80px; /*Make it fit inside circle*/
}

.eye{
    background: url(transparent-eye.png);
}

.eye{
    background: url(transparent-ear.png);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T14:02:20.230

每当您需要动态加载内容时，都必须使用 javascript 来访问该内容。在您的情况下，如果图像是静态的，则可以使用 css 和 html 来完成，并且要加载内容，您必须使用 javascript。

filter: alpha(opacity = 0.001);/* for ie */

不透明度：0.001；

# java - Mongodb Java MapReduce getOutputCollection

> ID：10882497
> 
> 赞同：0
> 
> 时间：2012-06-04T13:51:53.800
> 
> 标签：java, collections, mapreduce, inline

我对输出类型一无所知。我正在尝试这样的事情：

```
output=collection.mapReduce(map,reduce,null,
  MapReduceCommand.OutputType.INLINE,null);
collection=output.getOutputCollection(); 
```

但是由于 INLINE 输出类型，该集合为空。我需要减少的集合，因为我需要进一步减少它。我怎么能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T04:38:26.810

我终于找到了解决方案

```
output=collection.mapReduce(map,reduce,"mymap",MapReduceCommand.OutputType. REDUCE,null); 
collection=output.getOutputCollection(); 
```

请注意，您不能一次又一次地存储在同一个目标“mymap”中。循环时必须使用不同的名称`"mymap".concat(Integer.toString(i))`

# ruby-on-rails - db:create 误报数据库存在

> ID：10882499
> 
> 赞同：2
> 
> 时间：2012-06-04T13:51:57.373
> 
> 标签：ruby-on-rails

使用命令创建新站点后

```
rails new board --skip-bundle
...
rake db:create 
```

我有类似“XXXXX 已经存在”的消息，它不一致并表明出现问题。

复制：

```
rails new board --skip-bundle 
...
$ rake db:migrate
rake aborted!
FATAL:  database "boardio" does not exist

Tasks: TOP => db:migrate
(See full trace by running task with --trace) 
```

如果尝试创建数据库，那么：

```
$ rake db:create
boardio already exists 
```

它在这里说“存在”。它只是说“不存在”：为什么 rake 给出错误信息？出了什么问题？在此迁移似乎运行正常后：

```
$ rake db:migrate
==  CreateMyTables: migrating =================================================
-- create_table("users")
NOTICE:  CREATE TABLE will create ........column "users.id"
............. 
```

有关版本的详细信息：

```
$ ruby --version
ruby 1.9.2p290 (2011-07-09 revision 32553) [i686-linux]

$ rails --version
Rails 3.1.3 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:09:55.360

在不了解更多信息的情况下，我不确定是什么导致了这种奇怪的行为。如果再次发生这种情况，我建议删除并创建所有数据库：

```
rake db:drop:all && rake db:create:all 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-17T12:36:53.637

“不存在”错误导致我使用外部工具删除数据库。

然后，为了摆脱持续存在的“已经存在”错误，我将“schema.rb”重命名为“old_broken_db_schema.rb”。

这使我能够创建和迁移数据库。

# android - 为什么 9 补丁在我的应用程序中根本不起作用？

> ID：10882502
> 
> 赞同：4
> 
> 时间：2012-06-04T13:52:15.207
> 
> 标签：android, imageview, nine-patch, stretch

我目前正在尝试在我的应用程序中使用 9 张补丁图片。

图像非常清晰，在 SDK 提供的图形工具中运行良好：

图片是这样的：

![在此处输入图像描述](../Images/1b7a0a14a699f3cfb59807ab9d3b524b.png)

并且该工具似乎工作正常：

![在此处输入图像描述](../Images/e47a4ed30ea31f26976a638f74091696.png)

不幸的是，使用如此简单的布局，在设备上渲染效果很差，并且 9 补丁根本不起作用：

```
<TextView
    android:id="@+id/platenumber"
    android:background="@drawable/plate_fr"
    android:layout_width="320dip"
    android:layout_height="wrap_content" /> 
```

知道我做错了什么吗？

![在此处输入图像描述](../Images/0573cf1feb54b819adc240f4fd3d0fa5.png)

**编辑：**

我的图片被命名为 *.9.png

![在此处输入图像描述](../Images/898a32caeb98c111bc0919523a2e05e8.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-04T14:10:27.623

黑线必须全黑（RGB：#000000），黑线周围的透明区域完全透明。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-04T13:58:11.300

您的 9-patch 图片的扩展名应以 **.9.png**结尾，否则将被视为普通图片

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-26T13:22:42.003

检查图像的所有**四个侧面**是否至少有**一个黑色像素**。

# robotframework - 如何在临时 sql server 上使用带有 Robot Framework 的数据库库

> ID：10882503
> 
> 赞同：0
> 
> 时间：2012-06-04T13:52:26.227
> 
> 标签：robotframework

我正在使用支持数据库验证的 Robot Framework 的数据库库。

我试图执行这个基本命令：

```
***Variables***
***Settings***
Suite Setup  
Suite Teardown  
Test Setup  
Test Teardown  
Library  DatabaseLibrary
***Testcases***
UC_DB_Validation 
```

要连接到我正在使用的数据库：

```
dbapiModuleName=Mysqldb  dbName='bigetestsrv'  dbUsername='ravitest'  dbPassword='welcome'  dbHost='10.73.92.18' 
```

使用 pybot 从命令提示符运行连接字符串时，出现以下错误：

```
"No Module Named as Mysqldb" 
```

我正在使用具有有效凭据的 Query Express，但我的机器中没有安装 Sql Server。

如何连接到我的数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T06:52:53.073

我有 .....

我以错误的方式接近我正在使用的来自 **http://franz-see.github.com/Robotframework-Database-Library/**的数据库库（Apache 许可证）目前仅在使用 psycopg2 的 postgresql 上进行测试，它可能会也可能不会与其他 RDBMS 一起工作。所以我尝试连接支持 bydefualt 的 pymssql db 并且它有效。

我使用自定义参数 pymssql 'dbname', 'username', 'password', 'host' 连接到数据库

作为先决条件，我需要从 **http://pymssql.sourceforge.net/license.php安装 Pymssql (GNU Lesser General Public License)**

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-02T18:19:23.683

代替 ：

```
dbapiModuleName=Mysqldb 
```

利用 ：

```
dbapiModuleName=PyMySQL 
```

另外，请确保使用命令`PyMySQL`将模块安装在您的机器中。`pip`

# groovy - 如何使用 Groovy API 检索 Jenkins 构建参数？

> ID：10882515
> 
> 赞同：40
> 
> 时间：2012-06-04T13:53:01.990
> 
> 标签：groovy, jenkins

我有一个使用 Perforce 插件的参数化作业，并且想要检索构建参数/属性以及由 Perforce 插件设置的 p4.change 属性。

如何使用 Jenkins Groovy API 检索这些属性？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-10-24T11:24:37.520

**更新：Jenkins 2.x 解决方案：**

使用 Jenkins 2 管道 dsl，您可以使用基于`params`(Map) 内置的简单语法直接访问任何参数：

`echo " FOOBAR value: ${params.'FOOBAR'}"`

返回的值将是字符串或布尔值，具体取决于参数类型本身。脚本或声明性语法的语法相同。更多信息：[https ://jenkins.io/doc/book/pipeline/jenkinsfile/#handling-parameters](https://jenkins.io/doc/book/pipeline/jenkinsfile/#handling-parameters)

如果您的参数名称本身在变量中：

```
def paramName = "FOOBAR"
def paramValue = params.get(paramName) // or: params."${paramName}"
echo """ FOOBAR value: ${paramValue}" 
```

**Jenkins 1.x 的原始答案：**

对于 Jenkins 1.x，语法基于`build.buildVariableResolver`内置：

```
// ... or if you want the parameter by name ...
def hardcoded_param = "FOOBAR"
def resolver = build.buildVariableResolver
def hardcoded_param_value = resolver.resolve(hardcoded_param) 
```

请注意官方 Jenkins Wiki 页面也详细介绍了这一点，尤其是如何迭代构建参数： [https ://wiki.jenkins-ci.org/display/JENKINS/Parameterized+System+Groovy+script](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+System+Groovy+script)

重点部分转载如下：

```
// get parameters
def parameters = build?.actions.find{ it instanceof ParametersAction }?.parameters
parameters.each {
   println "parameter ${it.name}:"
   println it.dump()
} 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-05-14T21:29:01.993

对于解决单个参数（我猜是最常用的），这是我发现的最简单的：

> build.buildVariableResolver.resolve("myparameter")

在您的 Groovy System 脚本构建步骤中。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-06-04T14:50:37.120

关于参数：

[先看这个答案](https://stackoverflow.com/a/10781891/1178189)。要获取项目的所有构建列表（根据该答案获得）：

```
project.builds 
```

当您找到您的特定构建时，您需要使用 获取[ParametersAction](http://javadoc.jenkins-ci.org/hudson/model/ParametersAction.html)类型的所有操作[`build.getActions(hudson.model.ParametersAction)`](http://javadoc.jenkins-ci.org/hudson/model/Actionable.html#getActions())。然后查询返回的对象以获取您的特定参数。

关于 p4.change：我怀疑它也被存储为一个动作。在 Jenkins Groovy 控制台中，获取包含 p4.change 的构建的所有操作并检查它们 - 它会让您了解在代码中寻找什么。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-11-28T11:32:55.530

我刚刚完成了这项工作，特别是，使用 Groovy Postbuild 插件，您可以执行以下操作：

```
def paramText
def actionList = manager.build.getActions(hudson.model.ParametersAction)
if (actionList.size() != 0)
{
  def pA = actionList.get(0)
  paramText = pA.createVariableResolver(manager.build).resolve("MY_PARAM_NAME")
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-06-06T18:32:13.783

如果无法对参数名称进行硬编码，我发现这将是访问参数的最简单和最好的方法：

```
def myParam = env.getProperty(dynamicParamName) 
```

在某些情况下，当参数名称已知并且可以硬编码时，以下 3 行是等效的：

```
def myParam = env.getProperty("myParamName")
def myParam = env.myParamName
def myParam = myParamName 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-02-05T23:43:13.747

要从 GroovyScript（使用 Pipeline）的当前构建中获取参数化构建参数，您需要做的就是：假设您有一个名为 VARNAME 的变量。

`def myVariable = env.VARNAME`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-05-26T13:09:56.747

## 获取所有参数：

```
System.getenv().each{
  println it
} 
```

或者更复杂：

```
def myvariables = getBinding().getVariables()
for (v in myvariables) {
   echo "${v} " + myvariables.get(v)
} 
```

您需要同时**禁用**“使用 Groovy Sandbox”。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-07-12T10:00:59.297

如果您尝试将所有参数传递给 Jenkins 作业，您可以使用 groovy 管道中的全局变量**params**来获取它。

> http://jenkins_host:8080/pipeline-syntax/globals
> 
> **参数**

使用类似下面的东西。

```
def dumpParameter()
{
  params.each {
    println it.key + " = " + it.value
  }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-09-12T05:35:25.620

以下可用于检索环境参数：

```
println System.getenv("MY_PARAM") 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-11-11T14:47:34.890

谢谢[帕特里斯-n](https://stackoverflow.com/users/366749/patrice-m)！此代码用于获取排队和正在运行的作业及其参数：

```
import hudson.model.Job
import hudson.model.ParametersAction
import hudson.model.Queue
import jenkins.model.Jenkins

println("================================================")
for (Job job : Jenkins.instanceOrNull.getAllItems(Job.class)) {
    if (job.isInQueue()) {
        println("------------------------------------------------")
        println("InQueue " + job.name)

        Queue.Item queue = job.getQueueItem()
        if (queue != null) {
            println(queue.params)
        }
    }
    if (job.isBuilding()) {
        println("------------------------------------------------")
        println("Building " + job.name)

        def build = job.getBuilds().getLastBuild()
        def parameters = build?.getAllActions().find{ it instanceof ParametersAction }?.parameters
        parameters.each {
            def dump = it.dump()
            println "parameter ${it.name}: ${dump}"
        }
    }
}
println("================================================") 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-02-17T12:49:07.993

以下代码片段对我有用，可以在参数化项目中获取参数值：
`String myParameter = this.getProperty('binding').getVariable('MY_PARAMETER')`

目标是根据选定的项目参数动态锁定资源。

在“[✓] 此构建需要可锁定的资源”中，我有以下“[✓] Groovy 表达式”：

```
if (resourceName == 'resource_lock_name') {
    Binding binding = this.getProperty('binding')
    String profile = binding.getVariable('BUILD_PROFILE')

    return profile == '-Poradb' // acquire lock if "oradb" profile is selected
}

return false 
```

在“[✓] 这个项目是参数化的”部分中，我有一个名为“选择参数”，例如*BUILD_PROFILE* 选择示例是：

```
-Poradb
-Ph2db
-DskipTests -T4 
```

只有在使用参数构建项目时选择了“-Poradb”，才会获取“resource_lock_name”上的锁定

[-] 应取消选中使用 Groovy Sandbox 以使此语法正常工作

# ruby-on-rails-3 - Rails 3 & Devise：注销时出错

> ID：10882517
> 
> 赞同：0
> 
> 时间：2012-06-04T13:53:07.647
> 
> 标签：ruby-on-rails-3, devise

**问题解决了**

klaustopher 他的回答解决了这个问题。

* * *

问题是当我的 layouts/application.html.erb 中有 <%= current_user.email %> 或 <%= current_user.username$> 时我无法注销

当我从我的 application.html.erb 中删除这一行时，我可以无错误地注销。我在谷歌上搜索过，但找不到关于这个问题的任何信息。

我的 application.html.erb：

```
<!DOCTYPE html>
<html id="html">

<head>
<title><%= content_for?(:title) ? yield(:title) : "Contractbeheersysteem" %></title>
    <%= stylesheet_link_tag "application", "simple_form", "gegevens", "drop-down-menu",      "table", :media => "all" %>
    <%= javascript_include_tag "autocomplete-rails.js" %>
    <%= javascript_include_tag "http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js", "http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js", "application" %>
    <%= javascript_include_tag 'jquery.dataTables.min' %>
    <%= csrf_meta_tag %>
    <%= yield(:head) %>
</head>

<body>

<body link="#999" vlink="black" alink="black">  

<div id="menu">
    <ul id="drop-down-menu">
    <li><%= link_to "Home Page", home_index_path, :class => current_page?(home_index_path) ? "current" : "" %></li> 
    <li><%= link_to "Bedrijfsgegevens", bedrijfsgegevens_path, :id => 'bednav' %>
    <ul>
        <li><%= link_to "Nieuw Bedrijf toevoegen", new_bedrijfsgegeven_path %></li>
    </ul> 
    </li> 
    <li><%= link_to "Contactpersonen", contactpersoons_path, :id => 'contanav' %>
    <ul> 
        <li><%= link_to "Nieuw Contactpersoon", new_contactpersoon_path %></li> 
    </ul> 
    </li>
    <li><%= link_to "Contractgegevens", contractgegevens_path(@contractgegevens), :id => 'contrnav' %>
    <ul> 
        <li><%= link_to "Nieuwe Contractgegevens", new_contractgegeven_path %></li> 
    </ul>
        <li><%= link_to "Contactformulier", contact_index_path, :id => 'formnav' %>        </li>
    <% if user_signed_in? %>
        <li><%= link_to "My Account", users_path(@users) %>
        <ul>
            <li><%= link_to "Uitloggen", destroy_user_session_path, :method => :delete %>
            <li><%= link_to "Gebruikers", user_registration_path %>
        </ul>
    <% else %>
        <li><%= link_to "Inloggen", new_user_session_path %>
        <ul>
            <li><%= link_to "Registreren", new_user_registration_path %>
        </ul>
    <% end %>
    </ul>   
  <p class="clear_all"></p>
</div>

<div id="login">
Inlogd als: <%= current_user.username %>
</div>

<div id="content">
  <hr>
    <% flash.each do |name, msg| %>
    <%= content_tag :div, msg, :id => "flash_#{name}" %>
    <% end %>
    <%= yield %>
 </div>

 <div id="footer">
    <hr color="#999", width="100%">
    <h4>
    <b><a href="http://piterjelles.nl">Piter Jelles</a> &copy; 2012 </b> | <a href="http://rubyonrails.org">Ruby on Rails </a> 
    </h4>
 </div>

 </font>    
 </body>
 </div>
 </html> 
```

注意：我来自荷兰，所以我的 application.html.erb 中有荷兰语单词

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:56:39.413

您需要检查 current_user 的存在，例如： <% if current_user.present? %> <%= current_user.email %> 或 <%= current_user.username %> <% end %>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T13:58:11.230

当您退出时，当前用户将返回`nil`。调用方法`nil`会返回错误

```
1.9.3p125 :002 >   nil.username
NoMethodError: undefined method `username' for nil:NilClass 
```

您必须检查 current_user 是否返回 nil 以外的值。您可以使用

```
<%= current_user.username if current_user %> 
```

# javascript - Chrome - 意外令牌非法。火狐和。字符串字面量

> ID：10882521
> 
> 赞同：-2
> 
> 时间：2012-06-04T13:53:19.643
> 
> 标签：javascript, jquery, firefox, google-chrome

我有以下脚本：

```
    jQuery('#content-page-<?php echo $post->ID ?>')
    .data('content','<div class="page-content"><?php echo $post->post_content; ?>');

```

在

```
    '<div class="page-

```

这

```
'

```

符号理解不正确，我得到了

```
Uncaught SyntaxError: Unexpected token ILLEGAL

```

和

```
未终止的字符串文字

```

chrome和firefox中的错误。

问题是什么？

## 更新 1

这

```
    <?php echo $post->post_content; ?>

```

如何处理多行文本？问题似乎在多行中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:59:19.670

php 输出中是否有任何撇号？如果是这样，请记住它变成“原始文本”，所以如果它回显“我是鲍勃”，它将呈现为`'content',';I'm bob'`（注意中间的引号）。所以你应该使用类似`addslashes($post->$post_content)` [http://php.net/manual/en/function.addslashes.php](http://php.net/manual/en/function.addslashes.php)的东西来转义输出。

# jquery - 如何克隆 jquery datepicker？

> ID：10882522
> 
> 赞同：1
> 
> 时间：2012-06-04T13:53:29.480
> 
> 标签：jquery, datepicker, uidatepicker, jquery-ui-datepicker, inheritance

我需要从 datepicker jQuery 对象克隆（继承）并覆盖 _generatedHTML 方法。我的代码：

```
$.fn.datepickerExt = $.fn.datepicker;
var datepickerOldHTML = $.datepicker._generateHTML;

var datepickerExt = $.extend($.datepicker, {
    _generateHTML: function(inst) {
        var generatedHTML = datepickerOldHTML.apply(this, arguments);
        return "<div style='text-align:center'>header</div>"+generatedHTML;
    }
}) 
```

但我不确定我有不同的对象 $.fn.datepicker 和 $.fn.datepickerExt..

JSFiddle 链接：http: [//jsfiddle.net/konstantin/9Rjna/](http://jsfiddle.net/konstantin/9Rjna/)

在这种情况下，只需要为 datepickerExt 添加标题...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:54:54.083

我遇到了同样的问题，经过大多数建议的解决方案后，我找到了出路。

```
$('#actions').append($new_row);
$('#actions').find('input.datepicker').removeClass("hasDatepicker").removeAttr('id');
$('#actions').find('button.ui-datepicker-trigger').remove();
$('#actions').find('input.datepicker').unbind();
$('#actions').find('input.datepicker').datepicker('destroy');
$('#actions').find('input.datepicker').datepicker(
{
   autoSize:false,
   showOn:'button',
   dateFormat:'yy-mm-dd',
   weekHeader: 'W',
   showWeek: true,
   firstDay: 0,
   changeMonth: true,
   changeYear: true,
   gotoCurrent:true,
   showButtonPanel:true,
   showAnim:'',
   duration:'fast'
}
); 
```

插入克隆的元素后（在 ID“actions”内）：

1.  删除每个*日期选择器*ID，以便检测到它们，否则新创建*的日期选择器*仍将坚持特定的输入 ID
2.  删除*日期选择器*按钮，否则它将在克隆元素上重复
3.  取消绑定*日期选择器*（对此不太了解，但必须）
4.  销毁*日期选择器*
5.  现在一切都清理干净了，重新初始化*datapicker*事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:42:35.390

首先，您必须克隆作为（jQuery 代码中的私有类）`$.datepicker`实例的对象。`Datepicker`否则，您只会做一个副本，然后编写相同的方法。

其次，您必须复制 的代码`$.fn.datepicker`，因为它在内部调用了 的实例`$.datepicker`。

代码：

```
(function($, window, undefined) {

    $.datepickerExt = jQuery.extend({}, $.datepicker);
    var datepickerOldHTML = $.datepicker._generateHTML;

    $.datepickerExt._generateHTML = function(inst) {
        var generatedHTML = datepickerOldHTML.apply(this, arguments);
        return "<div style='text-align:center'>header</div>" + generatedHTML;
    };

    $.fn.datepickerExt = function(options) {

        /* Verify an empty collection wasn't passed - Fixes #6976 */
        if (!this.length) {
            return this;
        }

        /* Initialise the date picker. */
        if (!$.datepickerExt.initialized) {
            $(document).mousedown($.datepickerExt._checkExternalClick).
            find('body').append($.datepickerExt.dpDiv);
            $.datepickerExt.initialized = true;
        }

        var otherArgs = Array.prototype.slice.call(arguments, 1);
        if (typeof options == 'string' && (options == 'isDisabled' || options == 'getDate' || options == 'widget')) return $.datepickerExt['_' + options + 'Datepicker'].apply($.datepickerExt, [this[0]].concat(otherArgs));
        if (options == 'option' && arguments.length == 2 && typeof arguments[1] == 'string') return $.datepickerExt['_' + options + 'Datepicker'].apply($.datepickerExt, [this[0]].concat(otherArgs));
        return this.each(function() {
            typeof options == 'string' ? $.datepickerExt['_' + options + 'Datepicker'].
            apply($.datepickerExt, [this].concat(otherArgs)) : $.datepickerExt._attachDatepicker(this, options);
        });
    };

}()); 
```

[跑](http://jsfiddle.net/adescalzo/9Rjna/5/)

# php - Yii CGridView - 自定义列

> ID：10882526
> 
> 赞同：2
> 
> 时间：2012-06-04T13:53:38.933
> 
> 标签：php, javascript, gridview, yii

一直在寻找为“自定义列”添加功能的解决方案......意思是，我提供了一个列列表，我可以向用户显示这些列，他选择他想要查看的列，选择后更新表格并添加/删除所需的列。

在 Google 上没有找到任何东西（也许它的名称与我正在寻找的名称不同......）

有人对如何实现有想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T15:23:38.477

这不是一个完整的示例，但可以为您提供一些有关如何实现它的线索。您必须定义某种形式来收集有关如何呈现网格的数据。如果输入字段超过 3 个，我建议您创建一个 CFormModel 类。使用表单和包含网格的文件的 div 或 renderPartial 创建一个视图文件：

```
$form = $this->beginWidget('CActiveFormExt');
echo $form->errorSummary($model);
echo $form->labelEx($model,'column1');
echo $form->dropDownList($model
echo $form->error($model,'column1');
echo CHtml::ajaxSubmitButton('UpdateGrid',array('controller/grid'),
                                array('update'=>'#grid'),
$this->endWidget();
// you can render the 'default options' before any ajax update
$this->renderPartial('_grid',array($customColumns=>array('id','name'),'dataProvider'=>$dataProvider)); 
```

在 _grid.php 视图文件中：

```
$this->widget('zii.widgets.grid.CGridView', array(
    'id' => 'grid',
    'dataProvider'=>$dataProvider,
    'columns' => $customColumns;
)); 
```

在控制器中：

```
function actionGrid(){
    // recover the form data, and build the custom columns array
    $customColumns = array();
    $customColumns[] = '.....';

    $dataProvider = ...;

    $this->renderPartial('_formTrabajo', array('customColumns' => $idSiniestro, 'dataProvider' => $dataProvider'), false);
} 
```

当点击 ajaxSubmitButton 时，表单被发送到通过 ajax 指定的 url，并且来自控制器的回复必须包含包含网格的视图的 renderPartial，因此 jQuery 调用可以正确替换 html。您必须将一个数组从您的控制器传递到网格的局部视图，其中包含您要显示的列的自定义列表。

# encryption - 如何加密发送到贝宝的购物车数据

> ID：10882533
> 
> 赞同：1
> 
> 时间：2012-06-04T13:54:18.607
> 
> 标签：encryption, paypal

我有一个购物车，当用户购买和结帐时，一些数据会发送到贝宝。我检查了使用萤火虫我们可以看到哪些数据已发布到贝宝网站。像下面发布到贝宝的示例数据

```
address1    Unit 1 Stirling Park
address_override    1
amount_1    350.00
amount_2    11.00
amount_3    72.20
business    msindia@bba-reman.com
cancel_return   http://www.msindia.com/catalogue/order/PayPalFailure.aspx
city    Rochester
cmd _cart
cn  How did you hear about us?
country GB
currency_code   GBP
first_name  ben
invoice PP001250
item_name_1 Marea 2.4 TD
item_name_2 carriage
item_name_3 VAT Amount
item_number_1   0281001741
last_name   walker
notify_url  http://www.msindia.com/catalogue/order/PayPalNotify.aspx
return  http://www.msindia.com/catalogue/order/PayPalSuccess.aspx
state   KENT
upload  1
zip ME9 3QQ 
```

有什么技巧可以让我们加密数据然后发送到贝宝，但贝宝会理解加密并用传入的数据填充其表单。请有经验的人指导一下。谢谢

# wcf - monodroid wcf 调用

> ID：10882535
> 
> 赞同：0
> 
> 时间：2012-06-04T13:54:39.977
> 
> 标签：wcf, xamarin.android

我在访问 WCF 服务时遇到了困难。我的服务与 MonoDroid 应用程序在相同的解决方案中运行，并由 Visual Studio 托管。我将其配置为 BasicHttp。引用添加了 ok 但是在运行时当我调用一个简单的测试方法时，我得到 ;

System.Net.WebException 这很简单，这是网络服务

```
public class Service1 : System.Web.Services.WebService
{

    [WebMethod]
    public string HelloWorld()
    {
        return "Hello World";
    }
} 
```

这是电话

```
 button.Click += delegate
        { 
       localhost.Service1 se = new localhost.Service1();
        button.Text= se.HelloWorld();
        }; 
```

和附件中的错误快照

![错误](../Images/84fd73fab91db6298d85c64c70f2c6e1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:39:57.737

我同意您需要添加更多信息。但是，我前段时间回答了这个问题，这就是我为 WCF 所做的事情，它对我来说非常有用。

[在 WP 7 和 Android 的共享 Mono 库中使用 Soap](https://stackoverflow.com/questions/10332967/using-soap-in-shared-mono-library-for-wp-7-and-android/10435061#10435061)

这可能会有所帮助。

我刚刚想到的另一件事。您是否在网络清单中选择了 internet 选项，如下所示：

[http://docs.xamarin.com/@api/deki/files/1026/=RequiredPermissionsVS.png](http://docs.xamarin.com/@api/deki/files/1026/=RequiredPermissionsVS.png)

# excel - 创建不存在的文件夹和子文件夹，但如果存在则不要

> ID：10882537
> 
> 赞同：0
> 
> 时间：2012-06-04T13:54:43.223
> 
> 标签：excel, vba

好的，我一直在与人们合作编写这段代码，他们在我们提出的一些帮助下：

这在 Mac 和 PC 之间普遍适用。

```
Option Explicit

Sub CreateFolders()

Dim Sheet1 As Worksheet 'Sheet1
Dim lastrow As Long, fstcell As Long
Dim strCompany As String, strPart As String, strPath As String
Dim baseFolder As String, newFolder As String
Dim cell As Range

Set Sheet1 = Sheets("Sheet1")

With Application
    .ScreenUpdating = False
    .DisplayAlerts = False
    .EnableEvents = False
End With

With Sheet1

    lastrow = Sheet1.Cells(Rows.Count, "B").End(xlUp).Row
    baseFolder = "Lists!$G$1"
     'folders will be created within this folder – Change to sheet of your like.

    If Right(baseFolder, 1) <> Application.PathSeparator Then _
     baseFolder = baseFolder & Application.PathSeparator

       For Each cell In Range("S3:S" & lastrow)    'CHANGE TO SUIT

           'Company folder - column A

           newFolder = baseFolder & cell.Value
           If Len(Dir(newFolder, vbDirectory)) = 0 Then MkDir newFolder

           'Part number subfolder - column C

           newFolder = newFolder & Application.PathSeparator & cell.Offset(0, 1).Value
           If Len(Dir(newFolder, vbDirectory)) = 0 Then MkDir newFolder

       Next

End With

    With Application
        .ScreenUpdating = True
        .DisplayAlerts = True
        .EnableEvents = True
    End With

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T13:59:44.960

> ```
> baseFolder = "Lists!$G$1" 
> ```

这分配给`baseFolder`文字 value `"Lists!$G$1"`，而不是单元格的内容。你可能是说

```
baseFolder = Woksheets("Lists").Range("$G$1").Value 
```

（或者`baseFolder = [Lists!$G$1]`，如果您更喜欢该语法）。

* * *

此外，您可能会发现此功能很有用：[`MakeSureDirectoryPathExists`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680352.aspx).

# facebook - 无法使用 fbconsole 在 Facebook 上进行授权

> ID：10882538
> 
> 赞同：0
> 
> 时间：2012-06-04T13:54:43.730
> 
> 标签：facebook, authentication, oauth

我只是安装了[Dean Malmgren 的 fbconsole lib 分支](https://github.com/deanmalmgren/fbconsole)，并尝试使用他的`fbconsole.automatically_authenticate`功能在 Facebook 上进行身份验证，但没有运气。我刚刚收到此错误消息：

```
/var/virtualenvs/jd/src/fbconsole/src/fbconsole.pyc in automatically_authenticate(username, password, app_secret, redirect_uri, debug)
    411         oauth["state"][0], state,
    412     )
--> 413     code = oauth["code"][0]
    414 
    415     # 4\. Exchange the code for a user access token for this user's data

KeyError: 'code' 
```

我不知道出了什么问题。我怀疑 Facebook 应用程序设置可能存在问题（例如，我无法将站点 URL 设置为`http://127.0.0.1:8080`值）。我尝试在本地主机和生产服务器上运行此代码。但错误仍然相同（Facebook 没有给我`code`参数）。

请问有人知道问题出在哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T19:25:02.053

oauth 没有“code”参数，因为在上一步中我们从 facebook 收到错误，因为我们使用了过期的 APP_ID（在 fbconsole 中定义）。

fbconsole.automatically_authenticate 的正确用法：

```
import fbconsole.py
fbconsole.APP_ID = 'our APP_ID'
fbconsole.automatically_authenticate('LOGIN','PASS','our APP_SECRET','request_uri') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-05T19:06:26.933

设置`site_url`为`http://local.fbconsole.com:8080/` 然后使用此代码进行身份验证

```
import fbconsole as fb
fb.APP_ID = <your app id in quotes> 
fb.AUTH_SCOPE = <any list of scopes>
fb.authenticate() 
```

# android - 如何完全杀死/删除/删除/停止 AsyncTask

> ID：10882543
> 
> 赞同：29
> 
> 时间：2012-06-04T13:54:59.160
> 
> 标签：android, android-asynctask

我制作了一个从我们的服务器下载视频的应用程序。问题是：

当我取消下载时，我打电话：

```
myAsyncTask.cancel(true) 
```

我注意到，这`myAsyncTask`不会在调用取消时停止......我`ProgressDialog`仍然会上升，就像从一个状态跳到另一个状态，向我显示每次我取消并重新开始时，`AsyncTask`通过单击下载按钮，一个新的`AsyncTask`开始......每个一次我点击下载..然后取消，然后再次下载单独`AsyncTask`开始。

为什么`myAsynTask.cancle(true)`不取消我的任务？我不想再把它放在后台了。如果单击取消，我只想将其完全关闭。

怎么做 ？

编辑：

感谢 gtumca-MAC，以及其他帮助我的人：

```
while (((count = input.read(data)) != -1) && (this.isCancelled()==false)) 
{
    total += count;
    publishProgress((int) (total * 100 / lenghtOfFile));
    output.write(data, 0, count);
} 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-06-04T13:59:56.403

AsyncTask 不会取消进程

```
myAsynTask.cancel(true) 
```

为此，您必须手动停止它。

例如，您`doInBackground(..)`在 while/for 循环中下载视频。

```
protected Long doInBackground(URL... urls) {

         for (int i = 0; i < count; i++) {
          // you need to break your loop on particular condition here

             if(isCancelled())
                  break;             
         }
         return totalSize;
     } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-22T11:03:56.043

在你的课堂上声明

```
DownloadFileAsync downloadFile = new DownloadFileAsync(); 
```

然后在创建

```
DownloadFileAsync downloadFile = new DownloadFileAsync();
downloadFile.execute(url); 
```

在你的背景中 ()

```
if (isCancelled())
    break;

@Override
protected void onCancelled(){

} 
```

你可以通过以下方式杀死你的 AsyncTask

```
downloadFile.cancel(true); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-04T14:01:14.677

当您启动一个单独的线程（AyncTask）时，它必须完成。您必须手动将取消语句添加到 AsyncTask 内的代码中。

可以通过调用 cancel(boolean) 随时取消任务。调用此方法将导致对 isCancelled() 的后续调用返回 true。调用此方法后，将在 doInBackground(Object[]) 返回后调用 onCancelled(Object)，而不是 onPostExecute(Object)。为了确保尽快取消任务，如果可能（例如在循环内），您应该始终从 doInBackground(Object[]) 定期检查 isCancelled() 的返回值。

在文档中查看更多信息：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-12T07:46:57.163

我从过去 2 周开始一直在研究，但我不知道我们如何手动终止异步操作。一些开发人员使用 BREAK；在检查 for 循环时。但在我的场景中，我没有使用后台线程内的循环。但我必须知道它是如何将其作为一个愚蠢的逻辑工作的，但工作得非常好。

```
downloadFile.cancel(true);   //This code wont work in any case. 
```

而不是取消并在后台线程上做很多工作以编程方式关闭wifi

```
WifiManager wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);
wifi.setWifiEnabled(false); 
```

你想在哪里终止操作并在你需要的地方打开它。

```
WifiManager wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);
wifi.setWifiEnabled(true); 
```

发生的情况是您的 try 块跳转到 IOException 杀死后台任务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-12T08:09:26.440

你最好使用 vogella asyncTask 库，它有很多特性，比如优先级和取消后台任务。[这里](http://www.androidhive.info/2014/05/android-working-with-volley-library-1/)有一个很棒的教程或使用它

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-11T14:34:43.920

您可以使用此代码。我正在下载 OTA 文件，如下所示：

```
static class FirmwareDownload extends AsyncTask<String, String, String> {

        public String TAG = "Super LOG";
        public String file;
        int lenghtOfFile;
        long total;

        @Override
        protected String doInBackground(String... f_url) {
            try {
                int count;
                Utilies.getInternet();

                URL url = new URL(f_url[0]);
                URLConnection connection = url.openConnection();
                connection.connect();
                lenghtOfFile = connection.getContentLength();
                mProgressBar.setMax(lenghtOfFile);
                InputStream input = new BufferedInputStream(url.openStream(), 8192);
                String fileName = f_url[0].substring(f_url[0].lastIndexOf("/"), f_url[0].length());
                File root = Environment.getExternalStorageDirectory();
                File dir = new File(root.getAbsolutePath() + fileName);

                Log.d(TAG, "trying to download in : " + dir);
                dir.getAbsolutePath();
                OutputStream output = new FileOutputStream(dir);
                byte data[] = new byte[1024];

                while ((count = input.read(data)) != -1) {

                    if (isCancelled())
                        break;

                    total += count;
                    mProgressBar.setProgress(Integer.parseInt("" + total));
                    Log.d("Downloading " + fileName + " : ", " " + (int) ((total * 100) / lenghtOfFile));
                    mPercentage.post(new Runnable() {
                        @Override
                        public void run() {
                            mPercentage.setText(total / (1024 * 1024) + " Mb / " + lenghtOfFile / (1024 * 1024) + " Mb");
                        }
                    });
                    output.write(data, 0, count);
                }

                output.flush();
                output.close();
                input.close();

                //new InstallHelper().commandLine("mkdir data/data/ota");

                File fDest = new File("/data/data/ota/" + fileName);
                copyFile(dir, fDest);
                FirmwareInstaller fw = new FirmwareInstaller();
                fw.updateFirmware();

            } catch (Exception a) {
                System.out.println("Error trying donwloading firmware " + a);
                new InstallHelper().commandLine("rm -r  data/data/ota");
                dialog.dismiss();

            }
            return null;
        }

    } 
```

因此，如果您想取消，只需使用以下代码：

```
 fDownload.cancel(true); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-03-05T04:47:44.820

我在一个活动中成功使用了 TextView onclick ...

```
 //inside the doInBackground() ...

        try {
        while (true) {
        System.out.println(new Date());

        //should be 1 * 1000 for second
        Thread.sleep(5 * 1000);
        if (isCancelled()) {
              return null;
        }
          }

        } catch (InterruptedException e) {

        } 
```

在我的 onCreate() ...

```
 //set Activity
     final SplashActivity sPlashScreen = this;

     //init my Async Task
     final RetrieveFeedTask syncDo = new RetrieveFeedTask();
     syncDo.execute();

     //init skip link
     skip_text = (TextView) findViewById(R.id.skip_text);
     skip_text.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {

            //cancel Async
            syncDo.cancel(true);

            //goto/start another activity
            Intent intent = new Intent();
            intent.setClass(sPlashScreen, MainActivity.class);
            startActivity(intent);
            finish();

        }
    }); 
```

和我的 xml TextView 元素...

```
 <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/skip_text"
        android:layout_marginTop="20dp"
        android:text="SKIP"
        android:textColor="@color/colorAccent"/> 
```

# javascript - 从...删除到

> ID：10882546
> 
> 赞同：0
> 
> 时间：2012-06-04T13:55:36.080
> 
> 标签：javascript, jquery, html

所以我有一个问题：我需要从一个标签到另一个标签中删除“信息”，包括它之间的文本。

所以在html中的某个地方是：

```
<input type="radio" rel="1" value="Surname1" name="lastnames">Surname1<br>
<input type="radio" rel="2" value="Name2" name="lastnames">Name2<br>
<input type="radio" rel="3" value="lol" name="lastnames">lol<br>
<input type="radio" rel="4" value="lol2" name="lastnames">lol2<br> 
```

例如：

```
var current_id = $('input:checked:radio').attr('rel');
$.get('index.php?delete_by_id='+current_id);
$("input:radio[rel='"+current_id+"']").remove(); 
```

所以，在 GET 到 php 发送后，我需要从收音机列表中删除已删除的项目。输入一切正常，但在他旁边有名字我有问题......

PS。我知道，这种情况很愚蠢，但我没有时间重写它，直到明天（考试）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:00:57.370

用`span`元素包裹标签。

```
<input type="radio" rel="1" value="Surname1" name="lastnames"><span>Surname1</span><br>
<input type="radio" rel="2" value="Name2" name="lastnames"><span>Name2</span><br> 
```

然后在删除时，获取下一个跨度并将其删除

```
var item=$('input:checked:radio');

var current_id = item.attr('rel');
$.get('index.php?delete_by_id='+current_id,function(data){
   item.remove();
   item.next("span").remove();
}); 
```

**为删除/更新功能保留 HttpPost 操作始终是一个好习惯**。否则，如果他们知道项目 ID，任何人都可以从您的数据库中删除一条记录，只需在浏览器中使用这些查询字符串执行您的页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T14:01:56.270

不确定您正在尝试做什么和/或为什么它不起作用，但请考虑编写如下代码：

```
var $selected_radio = $('input:radio:checked'); // store element reference
$.get('index.php?delete_by_id=' + $selected_radio.attr('rel'), function() {
    // use a callback function to only remove if code succeeds
    $selected_radio.remove();
}); 
```

编辑：回首往事，我看到您想删除输入及其标签。您只需要将您的 HTML 修复为实际应有的样子：

```
<label>
    <input type="radio" rel="1" value="Surname1" name="lastnames"> Surname1
</label> 
```

这使得 jQuery 中的删除代码看起来像：

```
$selected_radio.closest('label').remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T14:07:15.387

我通常总是使用标签来显示连接到单选按钮的文本：

```
<input id="radio1" type="radio" rel="1" value="Surname1" name="lastnames"><label for="radio1">Surname1</label><br>
<input id="radio2" type="radio" rel="2" value="Name2" name="lastnames"><label for="radio2>Name2</label><br>
<input id="radio3" type="radio" rel="3" value="lol" name="lastnames"><label for="radio3">lol</label><br>
<input id="radio4" type="radio" rel="4" value="lol2" name="lastnames"><label for="radio4">lol2</label><br> 
```

然后你可以在你的javascript代码中这样做：

```
var current_rel = $('input:checked:radio').attr('rel'),
    current_id = $('input:checked:radio').attr('id');
$.get('index.php?delete_by_id='+current_rel);
$('#' + current_id + ', label[for="' + current_id + '"]).remove(); 
```

# java - JSTL 中的 BigDecimal，除以 int 或 double 返回整数

> ID：10882549
> 
> 赞同：2
> 
> 时间：2012-06-04T13:55:43.507
> 
> 标签：java, jsp, jstl, el, bigdecimal

```
<fmt:formatNumber var="instAmount" value="${invoice.amount / offer.getTotalInstallments()}" minFractionDigits="2" /> 
```

金额`BigDecimal`在哪里`Java`，在`totalInstallments`哪里`int`。我尝试设置`totalInstallments`为`double`但没有任何变化。它返回一个`Integer`，它的行为就像你在 Java 中将两个整数相除，你得到一个整数。

我错过了什么还是有解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T14:28:25.017

最简单的解决方案是在控制器/servlet 中进行此计算并在视图页面上使用结果。我认为应该在控制器而不是视图中进行计算。您将在 BigDecimal 上使用 divide() 方法。

也就是说，如果您确实想在视图中执行此操作，则必须在标记库中定义一个 JSTL 函数并创建一个静态版本的 divide ，它接受 BigDecimal 和您正在潜水的 int 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T09:51:20.493

你可以这样做：

```
< fmt:parseNumber value="${invoice.amount}" var="a" />

< fmt:parseNumber value="${offer.value)}"  var="b" />

${a/b} 
```

# android - 组合 2 个 ArrayAdapter

> ID：10882558
> 
> 赞同：0
> 
> 时间：2012-06-04T13:56:10.273
> 
> 标签：android

我想制作一个实时交易应用程序.. 但将 2 个适配器组合成一个适配器时遇到问题。所以我需要你们所有人的帮助：D

这是我的代码

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list_item);

    final uraikonversiActivity cp = new uraikonversiActivity(this);
    final ListView list = (ListView) findViewById (R.id.list);
    final String list_array[] = new String[cp.kodekonversi.size()];
    final Float list_nilai[] = new Float[cp.nilaikonversi.size()];

    for (int i = 0; i < cp.kodekonversi.size(); i++) {
        list_array[i] = cp.kodekonversi.get(i);
    }

    for (int i = 0; i < cp.nilaikonversi.size(); i++) {
        list_nilai[i] = cp.nilaikonversi.get(i);

    }

    ArrayAdapter adapter = new ArrayAdapter(this,android.R.layout.simple_list_item_1, list_array);
    ArrayAdapter adapter1 = new ArrayAdapter(this, android.R.layout.simple_list_item_1, list_nilai);
    list.setAdapter(adapter);

}} 
```

（注意：这是一个实时的，所以我从互联网上得到了数组列表）

我的目标是在 list = "USD - 1.xxxxx" 上显示类似的内容。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:02:40.740

最后，您使用一个列表视图显示所有数据。所以只需将两个数组转换为一个这样的数组（因为两个数组的长度相同）：

```
String[] finalArray = new String[list_array.length + list_nilai.length];
for(int i = 0; i< cp.nilaikonversi.size(); ++i)
finalArray[i] = list_array[i] +"-" + list_nilai[i];

ArrayAdapter adapter = new ArrayAdapter(this,android.R.layout.simple_list_item_1, finalArray);
list.setAdapter(adapter); 
```

希望它会帮助你。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:01:15.420

建立自己的适配器，不要仅仅依赖`ArrayAdapter`. 在构建适配器时，`public View getView(int position, View convertView, ViewGroup parent)`您可以使用该方法编写每一行的代码。只需返回一个包含两个文本字段的布局，这些文本字段由您的`list_array`and填充`list_nilai`。

另请参阅：http: [//developer.android.com/reference/android/widget/Adapter.html](http://developer.android.com/reference/android/widget/Adapter.html)
或完整教程： http: [//developerlife.com/tutorials/ ?p=327](http://developerlife.com/tutorials/?p=327)

# configuration - 在同一台服务器上设置两个 Rails 应用程序的正确方法

> ID：10882566
> 
> 赞同：0
> 
> 时间：2012-06-04T13:56:53.397
> 
> 标签：configuration, ruby-on-rails-3.1, project

我有两个（相同的）应用程序在 dev.example.com 和 beta.example.com 上使用不同的数据库运行。一切都设置为使用 Apache 作为 Web 服务器与乘客一起运行。

我所做的是将代码从一个目录复制到另一个目录（myapp_dev 和 myapp_beta），一切似乎都很好，直到我必须迁移一个表。我收到一条错误消息，提示我要迁移的数据已经迁移。可能试图在同一个数据库上迁移。也许我必须重新配置运行应用程序的方式，但不知道该怎么做。任何提示表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:04:58.070

您可以在 config/database.yml 中更改使用的数据库

# iphone - 如何在 UITableview 中显示视频缩略图？

> ID：10882574
> 
> 赞同：2
> 
> 时间：2012-06-04T13:58:03.267
> 
> 标签：iphone, ipad, uitableview, uiwebview, thumbnails

在我的应用程序中，我从 UITableview 中的服务器获取视频链接。所有这些链接都存储在服务器上的文本文件中。但我想在 UITableview 中获取这些链接的缩略图。这是我的形象。

![在此处输入图像描述](../Images/9fa7f6d5907bfa021162447eb729ccf1.png)

由于我的屏幕截图显示了我从服务器获取的链接，但这些链接的缩略图没有显示在红色圆圈中。这些红色圆圈是我的 webviews。这是我的代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CustomCellIdentifier = @"CustomCellIdentifier ";
CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier: CustomCellIdentifier];
if (cell == nil)
{
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];
    cell = [nib objectAtIndex:0];
} 
// Set up the cell.
NSString *embedHTML = @"\
<html><head>\
<style type=\"text/css\">\
body {\
background-color: transparent;\
color: white;\
}\
</style>\
</head><body style=\"margin:0\">\
<embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" \
width=\"%0.0f\" height=\"%0.0f\"></embed>\
</body></html>";
NSString *html = [NSString stringWithFormat:embedHTML, [Listdata objectAtIndex:indexPath.row], cell.webSal.frame.size.width, cell.webSal.frame.size.height];    

cell.lblSal.text = [Listdata objectAtIndex:indexPath.row];
[cell.webSal loadHTMLString:html baseURL:nil];

return cell;
 } 
```

当我使用 NSlog 时，它会显示类似这样的内容。

![在此处输入图像描述](../Images/676d0777c19fc53c4a5f80a817e0a8ca.png) 任何人都可以指导我我犯了什么错误。提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:04:15.713

您正在模拟器上进行测试。缩略图不会显示在模拟器上。在设备中运行时，您可以看到视频缩略图。

# android - 是否可以重用一个活动而不破坏它？

> ID：10882575
> 
> 赞同：0
> 
> 时间：2012-06-04T13:58:08.877
> 
> 标签：android, android-layout, android-activity

是否可以重用一个活动而不破坏它？例如，当我按下 BACK 按钮后，活动将消失，应用程序将返回上一个活动。但是那个消失的活动仍然在内存中，可以快速显示而无需重新创建它。

这就是我有这样一个想法的原因：我使用的是别人写的活动。我发现有一些内存泄漏，但我找不到它们，因为我没有源代码。所以我想找到一个解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:09:41.057

如果你不杀死你的活动，它是可能的：

```
open 1, 2, 3 activities
1 > 2 > 3  

back to #2 // call startActivity for 2, don't call finish() in 3
1 > 2

open #4 activity
1 > 2 > 4

back to #2
1 > 2

restore #3 activity // call startActivity for 3 with intent as Intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_To_FRONT);
1 > 2 > 3 
```

在这里，您将获得活动 3 的副本，因为它是您离开时的副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T14:11:57.053

检查此[链接](https://stackoverflow.com/questions/2232238/how-to-bring-an-activity-to-foreground-top-of-stack)

您应该覆盖后退按钮并将 Activity 带到前台而不实际完成它。

# c - MPI_Isend 请求参数

> ID：10882581
> 
> 赞同：14
> 
> 时间：2012-06-04T13:58:35.827
> 
> 标签：c, mpi

使用时`MPI_Isend`，`MPI_Request`参数是否可以为空指针（当发送方不关心消息发送后）？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-04T15:08:34.180

简短的回答是否定的 - 请求句柄参数不能`NULL`。

`MPI_Isend()`启动异步发送操作。所有异步操作都有一个请求句柄，稍后必须通过以下方式之一对其进行操作：

*   阻止并等待操作完成与`MPI_Wait()`朋友
*   与朋友一起测试操作是否完成，`MPI_Test()`直到测试结果为阳性
*   释放手柄`MPI_Request_free()`

一旦请求完成，等待和测试功能都会释放请求。您也可以在它返回后立即释放它`MPI_Isend()`。这不会取消操作，而是在完成后立即标记删除请求。但是，您将无法获得发送操作的状态。

如果不关心异步操作的结果（如完成状态、消息接收状态、错误码等），正确的做法如下：

```
MPI_Request req;
...
MPI_Isend(..., &req);
MPI_Request_free(&req);
... 
```

警告：这适用于异步发送，因为可以设计另一种方法来验证发送操作是否已完成，例如目标进程可能会在收到消息后响应。但是永远不应该释放异步接收请求，而是应该等待或测试完成，因为没有办法知道操作何时完成。

# sql - 当旧的、新的错误陷阱彼此相邻时，过程停止

> ID：10882585
> 
> 赞同：0
> 
> 时间：2012-06-04T13:58:46.690
> 
> 标签：sql, error-handling, try-catch

我们有一堆带有遗留样式错误捕获的旧存储过程。前几天我更改了一个，并包含了一个更新的 TRY...CATCH 块。存储过程刚刚在 TRY/CATCH 之后停止并返回，就好像遗留块中存在错误一样。

如果我放一个

```
SELECT NULL 
```

在两者之间一切正常。有谁知道为什么会这样？

```
--BEGIN NEW ERROR TRAP--
BEGIN TRY
Do stuff...
END TRY
BEGIN CATCH
END CATCH
--END NEW ERROR TRAP---
----------------- OLD SCHOOL TRAP BEGIN -----------------
SELECT  @spERROR = @@ERROR ,
        @spROWCOUNT = @@ROWCOUNT
SET @spRETURN = @spRETURN + 1
IF ( @spROWCOUNT <= 0
     OR @spERROR <> 0
   ) 
    SET @spRETURN = 0 - @spRETURN
IF ( @spROWCOUNT <= 0
     OR @spERROR <> 0
   ) 
    RETURN @spRETURN
SELECT  @spROWCOUNT = -1 ,
        @spERROR = -1
------------------ OLD SCHOOL ERROR TRAP END ------------------ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:03:04.613

在您的 try catch 块中，最后一条语句可能正在执行将行数设置为 0 的操作。“SELECT NULL”将行数设置为 1，因为它返回一行，因此未检测到错误。

You can fix this by changing the logic in the "old" code or by setting your row count variable in the try/catch code. I would recommend that you remove the SELECT NULL, since it would guarantee success and you may not want that behavior.

# c# - WCF MSMQ 只触发一次

> ID：10882591
> 
> 赞同：0
> 
> 时间：2012-06-04T13:59:17.590
> 
> 标签：c#, wcf, msmq

我编写了一个 C# WCF 服务，它应该处理传入的消息、解析它们包含的 XML 并将数据转录到数据库表中。

当我启动托管 WCF MSMQ 服务实现的 Windows 服务时，它会成功处理一条消息，然后停止。

这用于处理队列中的所有消息，直到我开始重命名。我有点茫然，因为它确实被调用了——但只有一次。事件日志中不会记录任何错误。Window Service 主机继续运行，并迅速响应来自 SCM 的服务停止指令。

```
 <netMsmqBinding>
    <binding name="Binding.MSMQ.TransportSecurity" maxReceivedMessageSize="32767">
      <readerQuotas maxBytesPerRead="32767" maxStringContentLength="32767" maxArrayLength="32767"/>
      <security mode="Transport">
        <transport msmqAuthenticationMode="None" msmqEncryptionAlgorithm="RC4Stream"
            msmqProtectionLevel="None" msmqSecureHashAlgorithm="Sha1" />
        <message clientCredentialType="Windows" />
      </security>
    </binding>
  </netMsmqBinding> 
```

...

```
<services>
  <service behaviorConfiguration="Behavior.CommonSense.ChapterWriter"
    name="CommonSense.ChapterWriter">
    <endpoint address="net.msmq://localhost/private/bob.logwriter"
      binding="netMsmqBinding" bindingConfiguration="Binding.MSMQ.TransportSecurity"
      name="Endpoint.CommonSense.ChapterWriter.msmq" contract="CommonSense.IChapterWriter">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost/CommonSense/ChapterWriter/" />
      </baseAddresses>
    </host>
  </service>
</services> 
```

...

```
using System.ServiceModel;

namespace CommonSense
{
  [ServiceContract]
  public interface IChapterWriter
  {
    [OperationContract(IsOneWay = true)]
    void Write(string xml);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:20:49.693

## 问题是缓冲区大小

它不是*第一次*运行，而是运行*一次*。

我的测试用例中使用的消息生成器恰好被配置为生成两条大消息和一条小消息（16K）。小的进程正常处理，一旦遇到大的异常，就会在不停止 Windows 服务主机进程的等待线程的情况下使 WCF 服务脱轨。

增加各种缓冲区大小完全解决了这个问题。如果您看到类似的行为，请访问 ReaderQuotas 设置和绑定 maxReceivedMessageSize。WCF 配置编辑器使这很容易。

```
<netMsmqBinding> 
  <binding name="Binding.MSMQ.TransportSecurity" maxReceivedMessageSize="65535"> 
    <readerQuotas 
      maxBytesPerRead="65535" 
      maxStringContentLength="65535" 
      maxArrayLength="65535"/> 
    <security mode="Transport"> 
      <transport msmqAuthenticationMode="None" msmqEncryptionAlgorithm="RC4Stream" 
          msmqProtectionLevel="None" msmqSecureHashAlgorithm="Sha1" /> 
      <message clientCredentialType="Windows" /> 
    </security> 
  </binding> 
</netMsmqBinding> 
```

**WCF 配置编辑器**

我不能高度推荐这个工具。虽然我已经对如何配置 WCF 有了一个很好的了解，但没有意外遗漏的样板化是很有价值的，因为在引用它时不可能输入错误的名称。

This tool was was present in the Tools menu of Visual Studio, but the path to the exe is in the Windows SDK so I'm not sure how it got onto my system, but I am sure google or Bing can help you if you don't already have it.

# ruby - 在 Ruby 中解析带有标题的 CSV？

> ID：10882594
> 
> 赞同：1
> 
> 时间：2012-06-04T13:59:22.633
> 
> 标签：ruby, parsing, csv

这有效：

```
 require 'csv'
    file = CSV.open(filename)
    puts file.shift 
```

这不会：

```
 require 'csv'
    file = CSV.open(filename, :headers=>true)
    puts file.shift 
```

我得到：

```
C:/Program Files (x86)/IronRuby 1.1/Lib/ruby/1.9.1/csv.rb:2177:in `convert_field
s': undefined method `with_index' for IronRuby.Builtins.Enumerator:Enumerator (N
oMethodError)
    from C:/Program Files (x86)/IronRuby 1.1/Lib/ruby/1.9.1/csv.rb:2218:in `
parse_headers'
    from C:/Program Files (x86)/IronRuby 1.1/Lib/ruby/1.9.1/csv.rb:1918:in `
shift'
    from C:/Program Files (x86)/IronRuby 1.1/Lib/ruby/1.9.1/csv.rb:1818:in `
loop'
    from C:/Program Files (x86)/IronRuby 1.1/Lib/ruby/1.9.1/csv.rb:1818:in `
shift'
    from C:/myproject/myproject/myproject/Program.rb:3 
```

我正在使用 Ironruby 1.1.3

我正在寻找正确的语法来获得带有 headers 选项的单行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:15:01.803

我在不同的引擎中对此进行了测试，这似乎是 Ironruby 中的一个错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:17:35.600

您可以试试这个，注意 colsep，使其适应 CSV 文件中的内容。如果要显示标题：

```
require 'csv'

path = "G:/documents/musicinfo"
Dir.glob("#{path}/**/*.csv").each {|file|
  CSV.foreach(file, :col_sep => ';') do |row|
    puts "#{file} => #{row}"
    break
  end
} 
```

给出数组：

```
G:/documents/musicinfo/album.csv => ["album_release_year", "album_id", "artist_id", "album"]
G:/documents/musicinfo/artist.csv => ["artist_id", "artist_name"]
G:/documents/musicinfo/Copy of all2.csv => ["album_release_year,album_id,track_id,artist_id,artist_name,duration,genre,track_popularity,disc_number,track_number,track,album"]
G:/documents/musicinfo/genres.csv => ["genreId", " genreNaam"]
G:/documents/musicinfo/songs.csv => ["album_id", " track_id", " artist_id", " track_popularity", "genre_id", "track"] 
```

而且，如果您想显示第一个数据行或将其保留为 CSV，请使用以下内容调整：

```
CSV.foreach(file, :col_sep => ';', :headers => true) do |row| 
```

这使：

```
G:/documents/musicinfo/album.csv => 0000,10747312,11522976,Beyond Imagination (Bonus Track Version)
G:/documents/musicinfo/artist.csv => 10000004,Jimi Hendrix
G:/documents/musicinfo/Copy of all2.csv => "2008,12877382,24516577,10000004,Jimi Hendrix,05:39,Pop,9,16,1,10,Free spirit"
G:/documents/musicinfo/genres.csv => 1,Alternative
G:/documents/musicinfo/songs.csv => 12877382,24516577,10000004,9,16,Free spirit 
```

# android - 有意图地传递上下文

> ID：10882595
> 
> 赞同：2
> 
> 时间：2012-06-04T13:59:31.207
> 
> 标签：android, android-intent, broadcastreceiver, android-service

我有一个广播接收器，它将启动一个意图服务以在单独的线程上做一些工作。

我尝试深入研究意图文档以找到一种方法来获取用于创建意图的上下文：

```
Intent(Context packageContext, Class<?> cls) 
```

但是 on start 命令的签名如下，并且不允许您访问传递的上下文。我没有将获取上下文视为意图的公共方法，但我可能错过了一些东西。

```
public int onStartCommand(Intent intent, int flag, int startId) 
```

有没有一种方法可以获取用于创建意图的上下文，而无需将第二次广播的路由返回接收器以访问 UI 或处理程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:29:19.833

> 我尝试深入研究意图文档以找到一种方法来获取用于创建意图的上下文

由于这`Context`可能不在您的过程中，因此这是不可能的。此外，这不是必需的。

> 有没有一种方法可以获取用于创建意图的上下文，而无需将第二个广播的路由返回接收器以访问 UI

`BroadcastReceiver`无法更新 UI 。因此，即使你想要的东西是可能的（它不是），它对你没有好处。

此外，由于您正在启动`IntentService`，因此您可能没有*UI*。用户可以控制他们的手机，因此非常欢迎他们离开您的应用程序并转到主屏幕或其他应用程序。

处理此问题的一种模式是从`IntentService`. 让活动为该广播实现高优先级`BroadcastReceiver`，并在清单中注册一个正常优先级的接收器。后者会引发 a `Notification`，因此如果您的活动不在前台，则用户将看到它`Notification`。这是一篇更详细[的博客文章](http://commonsware.com/blog/2010/08/11/activity-notification-ordered-broadcast.html)，这里是一个演示此技术[的示例应用程序。](https://github.com/commonsguy/cw-advandroid/tree/master/Broadcast/Ordered)

# math - 支配集贪婪逼近最坏情况示例

> ID：10882599
> 
> 赞同：4
> 
> 时间：2012-06-04T13:59:52.243
> 
> 标签：math, graph, graph-algorithm, discrete-mathematics

要找到无向图 G 的最小支配集，您可以使用如下贪心算法：从空集 D 开始。直到 D 是支配集，添加一个具有最大未覆盖邻居数的顶点 v。

该算法一般不会找到最优解，它是一个 ln(Delta) 近似。（如果 Delta 是 G 中某个顶点的最大度数）

现在我正在寻找一个简单的例子，其中贪心算法找不到最优解。我发现的唯一一个是设置封面问题的相关实例。（[http://en.wikipedia.org/wiki/Set_cover_problem#Greedy_algorithm](http://en.wikipedia.org/wiki/Set_cover_problem#Greedy_algorithm)图片在右边）将这个转换为图形将导致至少 14 个顶点和很多边。

有谁知道一个小例子？

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-04T21:18:08.260

考虑下图：

![在此处输入图像描述](../Images/94c8d22cdaf8408bb522cbdb1aea8766.png)

贪心方法会选择 B 然后 D 和 G。同时， E 和 F 形成一个支配集。

# c++ - 不能从一种数据类型转换为相同的数据类型？

> ID：10882601
> 
> 赞同：1
> 
> 时间：2012-06-04T14:00:02.400
> 
> 标签：c++, templates, set

我正在尝试实现自己的 Set 模板，但在尝试使用独立工作的 Queue 模板进行广度优先搜索时遇到问题。

奇怪的是，我在尝试编译时在我的 Set 模板中遇到了这个错误。为什么它不能从一个指针转换为另一个相同数据类型的指针？

```
error C2440: '=' : cannot convert from 'Set<T>::Node<T> *' to 'Set<T>::Node<T> *'
      with
      [
          T=std::string
      ]
      Types pointed to are unrelated; conversion requires reinterpret_cast, C-style cast or function-style cast
      c:\users\programming\Set\Set.h(96) : while compiling class template member function 'void Set<T>::print(Set<T>::Node<T> *)'
      with
      [
          T=std::string
      ]
      c:\users\programming\Set\main.cpp(13) : see reference to class template instantiation 'Set<T>' being compiled
      with
      [
          T=std::string
      ] 
```

队列类模板

```
template <typename T>
class Queue
...
T* front()
{
    if (first != NULL)
        return first->item;
    else
        return NULL;
} 
```

设置类模板

```
template <typename T>
Class Set
...
Queue<Node<T> *> q;
void print(Node<T> *p)
{
    q.push(p);
    while (p != NULL)
    {
        cout << p->item << "(" << p->height << ") ";
        if (p->left != NULL)
            q.push(p->left);
        if (p->right != NULL)
            q.push(p->right);
        if (!q.size())
        {
            // Error is at this line
            p = q.front();
            q.pop();
        }
        else
            p = NULL;
    }
    cout << endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:25:13.873

你`Queue`的类已经用一个类型实例化了......然后你试图从你的方法`Node<T>*`返回一个指向类型的指针。如果你用 实例化你的类，那么你只需要从你的方法中返回一个类型，而不是一个. 因此，将您的方法签名更改为以下内容：`T``Queue<T>::front``Queue<T>``T=Node<T>*``T``front``T*``front`

```
template <typename T>
class Queue
...
T front()
{
    if (first != NULL)
        return first->item;
    else
        return NULL;
} 
```

`T`现在，如果不是指针类型，这可能会给您带来一堆问题……因此，您可能希望为已经是指针类型`Queue<T>::front`的情况创建方法的特化。`T`例如：

```
//pointer-type specialization
template<typename T>
T Queue<T*>::front()
{
    if (first != NULL)
        return first->item;
    else
        return NULL;
}

//non-specialized version where T is not a pointer-type
template<typename T>
T* Queue<T>::front()
{
    if (first != NULL)
        return &(first->item);
    else
        return NULL;
} 
```

# wpf - WPF 中的图像查看器

> ID：10882603
> 
> 赞同：1
> 
> 时间：2012-06-04T14:00:10.140
> 
> 标签：wpf, image-viewer

大家好，我想在 WPF 应用程序中实现一个 ImageViewer（例如 Facebook 中的那个）

我已经有一个带有我的图片的 ListBox，它运行良好。但是当用户双击其中一个时，我想添加弹出“图像全尺寸”。（就像在 FB 中一样，带有淡出背景等）。目前我正在考虑使用 Window ...您对我应该使用什么有更好的了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:09:09.813

我可能也会为此使用一个窗口。然后您可以在窗口加载时轻松放置不透明动画以使其具有淡入和淡出效果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:36:28.750

您还可以使用[Popup 控件](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.popup.aspx)。

它带有一些内置的（但非常有限的）动画，例如`fade`，请参阅[PopupAnimation。](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.popup.popupanimation.aspx)

我会尝试，如果它不符合您的需求，我会选择[bflosabre91](https://stackoverflow.com/users/1431524/user1431524) oppionion 并使用单独的不透明动画窗口。

但请记住，使用附加窗口可能会产生负面影响，例如始终正确同步窗口位置、处理任务切换（即正确隐藏任务栏/任务列表中的窗口）

# c# - 为 ObjectDataSource 提供要加载的自定义列表/集合

> ID：10882606
> 
> 赞同：1
> 
> 时间：2012-06-04T14:00:13.007
> 
> 标签：c#, asp.net, objectdatasource

我从经验中知道 LinqDataSource 有一个选择事件，我们可以通过将其分配给 r.Result 来提供我们自己的数据

我正在为 ObjectDataSource 寻找相同的行为。尽管我在自定义类中实现了 GetAllData() 方法：`SystemSettingList : List<SystemSetting>`

现在，也许我在这里没有清楚地思考，但 GetAllData 是我的 SystemSettingList 类中的一个方法，我必须在页面加载后在我的页面上实例化它。我将如何告诉我的 ObjectDataSource 从**该**对象中获取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:04:38.147

您需要使用`SelectMethod`和`TypeName`。像这样的东西：

```
 <asp:objectdatasource
      id="ObjectDataSource1"
      runat="server"
      selectmethod="GetAllData"
      typename="YourNamespace.SystemSettingList" /> 
```

# java - 如何进行延迟的非阻塞函数调用

> ID：10882611
> 
> 赞同：9
> 
> 时间：2012-06-04T14:00:50.060
> 
> 标签：java, multithreading, thread-safety, nonblocking

我想调用`add`HashSet 的函数有一些延迟，但不阻塞当前线程。是否有一个简单的解决方案来实现这样的事情：

```
Utils.sleep(1000, myHashSet.add(foo)); //added after 1 second
//code here runs immediately without delay
... 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-04T16:19:11.400

The plain vanilla solution would be:

```
 new Thread( new Runnable() {
        public void run()  {
            try  { Thread.sleep( 1000 ); }
            catch (InterruptedException ie)  {}
            myHashSet.add( foo );
        }
    } ).start(); 
```

There's a lot less going on behind the scenes here than with ThreadPoolExecutor. TPE can be handy to keep the number of threads under control, but if you're spinning off a lot of threads that sleep or wait, limiting their number may hurt performance a lot more than it helps.

And you want to synchronize on `myHashSet` if you haven't handled this already. Remember that you have to synchronize *everywhere* for this to do any good. There are other ways to handle this, like Collections.synchronizedMap or ConcurrentHashMap.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-04T14:04:32.377

您可以使用[ScheduledThreadPoolExecutor.schedule](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html#schedule%28java.lang.Runnable,%20long,%20java.util.concurrent.TimeUnit%29)：

```
ScheduledThreadPoolExecutor exec = new ScheduledThreadPoolExecutor(1);

exec.schedule(new Runnable() {
          public void run() {
              myHashSet.add(foo);
          }
     }, 1, TimeUnit.SECONDS); 
```

它将在 1 秒后在单独的线程上执行您的代码。小心同时修改`myHashSet`虽然。如果您同时从不同的线程修改集合或尝试对其进行迭代，您可能会遇到麻烦并且需要使用锁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T14:02:00.583

检查[ThreadPoolExecutor.schedule()](http://download.java.net/jdk7/archive/b123/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html#schedule%28java.lang.Runnable,%20long,%20java.util.concurrent.TimeUnit%29)方法。

# iphone - 目标 c - 设置子视图框架的正确方法，使其充满屏幕

> ID：10882619
> 
> 赞同：0
> 
> 时间：2012-06-04T14:01:36.533
> 
> 标签：iphone, objective-c, ios, uiview, uiviewcontroller

我在 a 中有一个 viewController `navigationController`，视图控制器有一个 tableview。
在`viewDidLoad`我设置表格视图

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // init tableView
    CGRect tableFrame = self.view.bounds;

    _tableView = [[UITableView alloc] initWithFrame:tableFrame style:UITableViewStylePlain];

    _tableView.delegate = self;
    _tableView.dataSource = self;

    [self.view addSubview:_tableView];
} 
```

这段代码的问题是表格视图框架不正确 - 高度是 460，我需要它是 416。

[iPhone屏幕高度为480，减去状态栏（20）减去导航栏（44）=416]

那么设置表格视图以填充屏幕的正确方法是什么？
我可以想到两种方法：

1.  将其框架设置为 =`(0, 0, 320, 416)`

2.  采用：`[_tableView setAutoresizingMask:(UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth)];`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T14:06:02.230

不要使用幻数。正确使用调整大小标志。所以是的，你的 2\. 方法是正确的。

1）使用超级视图边界。
`_tableView.frame = self.view.bounds;`;

2) 设置自动调整大小标志
`[_tableView setAutoresizingMask: UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth];`

（你已经完成了所有这些：）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-04T14:07:19.867

1 号绝对是错误的做法......如果未来的操作系统/设备中的屏幕尺寸发生变化会发生什么？

我很好奇您为什么不使用 nib 文件执行此操作并省去麻烦，但如果您必须在代码中执行此操作，请根据您的选项 2 设置自动调整大小掩码。

# jquery - 通过缓存选择器结果优化基于 JQuery 的动画？

> ID：10882625
> 
> 赞同：0
> 
> 时间：2012-06-04T14:02:08.797
> 
> 标签：jquery, jquery-animate

我制作了一个基于以下 jQuery 函数的动画：hide()、show()、animate()。

这个动画消耗了大量的 CPU（类似于 Flash 的 CPU 使用），Chrome 告诉我（通过 CSS 选择器分析工具）我有很多类似的 CSS 选择器使用（CSS Selector Profile）。

这些选择器是否仅由渲染引擎使用？这是否还包括使用 $() 时的 jQuery 节点搜索（我假设它由 hide()、show() 或 animate() 调用）？

如果第二个问题是，我怎么能覆盖这个函数来缓存一些节点？（通过硬编码一些选择器，其结果在我的动画逻辑中不会改变）。

编辑：我正在实现帧之间的过渡，每一帧作为其背景上的 Ken Burns 效果

EDIT2：这是一个 jQuery 插件，尽可能使用 CSS3 制作动画[https://github.com/benbarnett/jQuery-Animate-Enhanced](https://github.com/benbarnett/jQuery-Animate-Enhanced)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:42:30.913

如果您正在使用如下代码执行大量 jquery 动画：

```
$('div.myclass').show();
 ...
$('div.myclass').hide();
....
$('div.myclass').toggle(); 
```

您可能想查看链接您的 jquery 选择：

```
$('div.myclass').show().addClass('sdf').children('li').slideToggle() 
```

或将选择器分配给变量并重用该变量

```
 var $ele = $('div.myclass');
 $ele.show();
 ...
$ele.hide();
....
$ele.toggle(); 
```

# iphone - 调用单例类以保持套接字连接打开

> ID：10882628
> 
> 赞同：0
> 
> 时间：2012-06-04T14:02:12.370
> 
> 标签：iphone, ios, class, singleton

我创建了一个单例类，它的工作是创建一个 tcp 套接字连接并在应用程序运行时使其无限打开。我相信我的单例类看起来应该是这样（在其他 StackOverflow 问题的帮助下让我到达那里），但我的问题是我不知道何时或如何调用我的类对象。我对 iOS 开发还是很陌生，所以这对我来说很陌生。

*   我的应用有多个视图
*   我想使用我的单例类来创建一个 tcp 套接字连接并始终保持连接打开
*   我不知道在哪里调用/调用我的单例类对象
*   我不知道如何调用/调用我的单例类对象
*   我正在使用 SmallSockets 库

这是我的类文件：

套接字连接.h

```
#import <Foundation/Foundation.h>

@interface SocketConnection : NSObject
{

}

+ (SocketConnection *)getInstance;

@end 
```

套接字连接.m

```
#import "SocketConnection.h"
#import "imports.h"

static SocketConnection *sharedInstance = nil;

@implementation SocketConnection

- (id)init
{
    self = [super init];

    if (self) 
    {
        while(1)
        {
            Socket *socket;
            int port = 11005;
            NSString *host = @"199.5.83.63";

            socket = [Socket socket];

            @try
            {
                NSMutableData *data;
                [socket connectToHostName:host port:port];
                [socket readData:data];
                //  [socket writeString:@"Hello World!"];

                // Connection was successful //
                [socket retain]; // Must retain if want to use out of this action block.
            }
            @catch (NSException* exception) 
            {
                NSString *errMsg = [NSString stringWithFormat:@"%@",[exception reason]];
                NSLog(errMsg);
                socket = nil;
            }
        }
    }
    return self;
}

+ (SocketConnection *)getInstance
{
    @synchronized(self) 
    {
        if (sharedInstance == nil) 
        {
            sharedInstance = [[SocketConnection alloc] init];
        }
    }
    return sharedInstance;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:12:19.290

要使用此 Singleton 以及与之关联的连接，您可以简单地调用 getInstance 方法来获取对您尝试使用的连接的引用。您将有效地执行此操作，而不是典型的 alloc/init 过程。您可以从每个视图中使用 getInstance 方法，它们都将保持与您预期的相同的连接。

此外，由于您创建单例的方式，如果您调用 alloc/init 而不是 getInstance，您将创建一个新连接而不是使用以前的连接。

您可以如何执行此操作以在视图中创建引用的示例如下：

```
@property (strong, nonatomic) SocketConnection * connection
-(void) awakeFromNib
{
    connection = [SocketConnection getInstance];
} 
```

与此类似的代码将导致您的所有视图使用相同的连接，但不会创建连接，直到您在屏幕上看到正在使用该连接的视图。要在应用程序启动时创建连接，请将相同的“getInstance”添加到您的 appDelegate 方法之一。

此外，因为您使用的是单例，并且此变量从未真正释放，您可能需要考虑添加方法来重新初始化、删除和一般管理与服务器的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:18:19.320

我可能会在 UIApplication Delegate 方法中执行初始化

```
- (void)applicationDidFinishLaunching:(UIApplication *)application 
```

这样，连接就会启动并开始，您可以在任何 View 或 ViewController 出现或处于活动状态之前执行初始化。

# perl - 无法通过包“Apache2::RequestRec”定位对象方法“***”

> ID：10882629
> 
> 赞同：0
> 
> 时间：2012-06-04T14:02:16.253
> 
> 标签：perl, apache, mod-perl, vhosts

我试图让 mod_perl 在我的 apache 安装上工作，以便使用 perlhandler。

我首先尝试使用此虚拟主机在我的域的子目录中

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost
    ServerName ***.fr.cr

    DocumentRoot /var/www/aw
    <Directory /var/www/aw/>
            AllowOverride None
            Order allow,deny
            allow from all
    </Directory>

    PerlModule test2::Rules2
    alias /perl2/ /usr/lib/perl5/test2/
    <Location /perl2/>
            Order allow,deny
            allow from all
            SetHandler perl-script
            PerlHandler test2::Rules2
    </Location>

    ErrorLog ${APACHE_LOG_DIR}/aw.error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog ${APACHE_LOG_DIR}/aw.access.log combined
</VirtualHost> 
```

在这里，当我去*** .fr.cr/perl2/时它工作正常

但是，当我尝试使用这个虚拟主机直接对我的域的根目录执行此操作时：

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost
    ServerName ***.fr.cr

    DocumentRoot /var/www/aw
    <Directory /var/www/aw/>
            AllowOverride None
            Order allow,deny
            allow from all
    </Directory>

    PerlModule aw::main
    alias / /usr/lib/perl5/aw/
    <Location />
            Order allow,deny
            allow from all
            SetHandler perl-script
            PerlHandler aw::main
    </Location>

    ErrorLog ${APACHE_LOG_DIR}/aw.error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog ${APACHE_LOG_DIR}/aw.access.log combined
</VirtualHost> 
```

我收到错误 500，并且 apache 日志有这一行：

```
Can't locate object method "content_type" via package "Apache2::RequestRec" at /usr/lib/perl5/aw/main.pm line 6.\n 
```

奇怪的是我用 2 个代码测试

一个缺少“print”包，一个缺少“content_type”包，第一个有“content_type”，但错误在代码后面。

我想我的虚拟主机缺少一些东西，因为它在一种情况下工作，而不是在另一种情况下使用相同的代码。

谢谢！

编辑：代码：不工作：

```
package aw::main;
use Apache2::Const qw(:common);

sub handler {
    my $r = shift;
    $r->content_type("text/plain");
    $r->print("mod_perl rules!\n");
    return OK;
}
1; 
```

和工作：

```
package test2::Rules2;
use Apache2::Const qw(:common);

sub handler {
my $r = shift;
$r->content_type("text/plain");
$r->print("mod_perl rules!\n");
return OK;
}
1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:57:05.217

我一直在努力解决同样的问题，我想我已经找到了答案：

当您在 Perl 中调用对象方法时，例如 myinstance->themethod(arg1)，那么该方法将类（包）的名称作为第一个参数，将第一个参数作为第二个参数。如果您将方法调用为静态方法，例如 class::method(arg1)，则子例程获取的第一个参数是第一个参数。像这样：

```
#!/usr/bin/perl

print "Calling as an object method:\n";
fish->chips('lettuce');
print "Calling as a static method:\n";
fish::chips('lettuce');

{package fish;

sub chips {
  my $x=shift;
  my $y=shift;

  print "\$x is $x and \$y is $y\n";
  }
} 
```

其输出是：

```
Calling as an object method:
$x is fish and $y is lettuce
Calling as a static method:
$x is lettuce and $y is 
```

mod_perl 将您的处理程序作为对象方法调用。它将包名称作为第一个参数。如果您在第二个`shift`参数之前添加并丢弃第一个参数，`shift`那么您`$r`可能就是您正在寻找的请求对象。

再次查看我的 Apache conf 文件后，我意识到我已经给出了处理程序指令`PerlResponseHandler Fish->chips`而不是`PerlResponseHandler Fish::chips`. mod_perl 在找到我想使用的处理程序时遇到了一些麻烦。当我指定 Fish 并命名处理程序时`sub handler {...`，mod_perl 找不到它。同样，当我指定处理程序名称时，如`Fish::handler`（或者，当我重命名它）时`Fish::chips`，Apache 将`chips.pm`在名为`Fish`.

我不知道这是否是 mod_perl 解析或解析处理程序名称的方式中的实际错误，但至少它是非常脆弱的行为。除非我在这里遗漏了什么，如果我是我希望有人能指出来。

我希望这会有所帮助。

# c# - 每当在数据库中进行更改时运行函数

> ID：10882635
> 
> 赞同：0
> 
> 时间：2012-06-04T14:02:36.073
> 
> 标签：c#, linq-to-sql

每当在数据库中进行更改时，我都想运行一个函数。

有没有办法避免 3 循环这样做？这是我的代码：

```
 public void Save()
    {
        System.Data.Linq.ChangeSet changeSet = db.GetChangeSet();

        foreach (User user in changeSet.Inserts)
        {
            this.doSomeStuff();
        }

        foreach (User user in changeSet.Updates)
        {
            this.doSomeStuff();
        }

        foreach (User user in changeSet.Deletes)
        {
            this.doSomeStuff();
        }
        db.SubmitChanges();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:19:40.900

只需将@adrianm 评论“转换”为答案：

```
foreach (User user in changeSet.Inserts.Concat(changeSet.Updates).Concat(changeSet.Deletes) 
{
    this.doSomeStuff();
} 
```

# vb.net - 动态回发

> ID：10882639
> 
> 赞同：1
> 
> 时间：2012-06-04T14:02:43.707
> 
> 标签：vb.net, postback

是否可以在 vb.net 或 c#.net 中动态回发？

这是一个asp按钮（比如说buttonA）如果我点击buttonA它必须做一些动作然后触发回发

不应在单击按钮时触发回发。只有在执行了一些操作后才触发回发

我已经搜索了将近一天，但找不到任何解决方案请帮忙

非常感谢猫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T15:41:00.737

默认情况下，所有 asp 按钮都会进行回发。如果您想在回发之前执行一些客户端功能，只需将其添加到`OnClientClick`属性并返回`true`或`false`从函数返回，具体取决于您是否想要回发。

```
<asp:Button ID="Btn1" OnClientClick="return MyFunction();" />

function MyFunction()
{
    alert('test');
    return true; //Do postback
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T10:09:48.893

谢谢大家，终于找到了解决办法

在按钮上单击我执行一些操作然后使用下面的代码调用 js 函数

```
ScriptManager.RegisterStartupScript(Me, Me.GetType(), "postback", "postback();", True) 
```

`postback()`是执行回发的 JS 函数

```
function postback()
{

    document.form1.submit(); //postback

} 
```

干杯，斤

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T14:06:42.890

从客户端调用以下 JS 到回发。

```
Response.Write("<script>document.forms[0].submit();</script>"); 
```

或在您想要回发时从 JS 调用。

```
__doPostBack(id,''); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T14:08:36.593

您可以做的是将客户端脚本附加到 ASP.NET 按钮的 OnClientClick 事件。

```
<asp:Button ID="MyButton" OnClientClick="return MyButton_ClientClick()" Text="Click Me" runat="server" /> 
```

然后您的 JavaScript 函数将如下所示：

```
function MyButton_ClientClick()
{
   ...
   __doPostback();
} 
```

不是最好的解决方案，但至少它让你知道如何继续。

# java - 在 ANTLR 中证明下拉设施

> ID：10882642
> 
> 赞同：1
> 
> 时间：2012-06-04T14:02:48.547
> 
> 标签：java, dsl

在我目前的项目中，我正在开发一种领域特定语言。例如，这种语言的语法如下：

```
structs:

    TempStruct 
        tempValue : double; 
        unitOfMeasurement : String;        

abilities:
    sensors: 
        TemperatureSensor  
            attribute responseFormat : String; 
            generate  tempMeasurement : TempStruct; // forward reference of previously defined structs 
```

在上面的代码片段中，您可以看到`TempStruct`之前定义的。我的要求是我想方便 DSL 程序员一个以前定义的结构的下拉列表。因此，程序员可以轻松地`structs`从下拉列表中选择一个。

我开始研究 ANTLR，但我不确定如何在 ANTLR 中实现这一点。对此有任何想法吗？欢迎您对编写 DSL 的其他工具提出建议和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:12:43.193

我想回答我的问题。我刚刚收到我们合作者的指点。它可能会帮助其他人。

创建 DSL 及其相关开发环境的工具：

```
Xtext: 
```

*   oAW xText：文本 {DSL} 的框架
*   [http://www.eclipse.org/Xtext/](http://www.eclipse.org/Xtext/)

    恶搞：

*   恶搞语言工作台。语言和 IDE 的声明性规范规则

*   [http://strategoxt.org/view/Spoofax/](http://strategoxt.org/view/Spoofax/)

    其他参考：

*   [http://martinfowler.com/articles/languageWorkbench.html](http://martinfowler.com/articles/languageWorkbench.html)

*   [http://www.languageworkbenches.net](http://www.languageworkbenches.net)
*   [http://splashcon.org/2011/program/demonstrations（Cedalion](http://splashcon.org/2011/program/demonstrations)，语言的语言，测试特定领域的语言，

# c++ - 如何为 SGE 作业正确配置库？

> ID：10882643
> 
> 赞同：0
> 
> 时间：2012-06-04T14:02:51.860
> 
> 标签：c++, linux, sungridengine

我可以访问一个集群来运行繁重的东西和计算（我只是一个用户，而不是 root）

我有一个名为 rnnlib 的程序，它已编译并正在运行。这使用了我安装在文件夹 (/udd/$USER/local) 中的外部库。

现在，当我尝试向 SGE 提交工作时，我得到的是：

> /udd/$USER/test_rnn_lib/ag_rnnlib/bin/rnnlib：加载共享库时出错：libhdf5_hl.so.7：无法打开共享对象文件：没有这样的文件或目录
> 
> /udd/$USER/test_rnn_lib/ag_rnnlib/bin/rnnlib：加载共享库时出错：libhdf5.so.7：无法打开共享对象文件：没有这样的文件或目录

我已将 rnnlib 使用的所有库（与 ldd 一起列出）复制到 floder (/udd/$USER/local/libs_for_SGE/)

然后我提交了工作，这是我得到的：

> /udd/$USER/test_rnn_lib/ag_rnnlib/bin/rnnlib：重定位错误：/udd/$USER/test_rnn_lib/local/libs_for_sge/libc.so.6：符号_dl_starting_up，版本GLIBC_PRIVATE未在文件ld-linux-x86-中定义64.so.2 与链接时间参考

我试图在 SGE 上加载 libc.so.6，但我得到了这个：

> /udd/$USER/test_rnn_lib/ag_rnnlib/bin/rnnlib：/usr/lib64/libstdc++.so.6：未找到版本“GLIBCXX_3.4.15”（/udd/$USER/test_rnn_lib/ag_rnnlib/bin/rnnlib 需要）

# python - 有没有更快的方法来总结 Python 中的等差数列？

> ID：10882645
> 
> 赞同：0
> 
> 时间：2012-06-04T14:02:57.720
> 
> 标签：python

```
total = 0
for i in range(0, some upper bound):
    total += i 
```

对不起，如果这是基本的，但我有很多这样的东西，它们占用的空间比舒适的要多。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-04T14:04:20.763

```
total = sum(range(upper)) 
```

或者

```
total = upper * (upper - 1) / 2 
```

第一个是 Python，第二个是 Gauss。

编辑：当不从零开始时：

```
total = sum(range(lower, upper)) 
```

或者，再次根据高斯，对 做同样的事情`upper`并减去同样的事情`lower`：

```
total = upper * (upper - 1) / 2 - lower * (lower - 1) / 2 
```

如果您使用的是 Python 2.x，请将所有内容替换`range`为`xrange`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T14:05:44.317

`total = some_upper_bound * (some_upper_bound -1) / 2`

如果`lower_bound != 0`：

`total = (some_upper_bound - lower_bound) * (some_upper_bound + lower_bound - 1) / 2`

*更新：*我会删除我的答案，因为它实际上是已接受答案的一部分的精确副本（尽管我是独立回答的）。但是，有一个非常小但理论上有趣的改进`lower_bound`：我的答案仅包含两个乘法/除法（比加法/减法相对更昂贵），而另一个答案包含四个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T14:14:07.003

扩大eumiro。为了清楚起见，您可能想编写一个封装高斯方法的方法。我会建议这样的东西（用 Groovy 编写，因为我不知道 Python 语法）：

```
public int sumUpToBoundary(def upper_bound){
    return (upper_bound) * (upper_bound - 1) / 2;
}

public int sumBetween(def lower_bound, def upper_bound){
    return sumUpToBoundary(upper_bound) - sumUpToBoundary(lower_bound);
}

public void someOtherMethod() {
    int total = sumUpToBoundary(some_upper_bound);
    int total2 = sumBetween(some_lower_bound, some_upper_bound);
} 
```

更新：@mspy 指出我的方法签名不是 Python 的风格。我已将示例更新为 groovy，它支持更多类似 Python 的语法。

# sql-server - 手动重命名 SSMS 中的选项卡

> ID：10882651
> 
> 赞同：14
> 
> 时间：2012-06-04T14:03:11.517
> 
> 标签：sql-server, tabs, settings, ssms

我总是对 SQL Server Management Studio 2008 R2 中的哪个选项卡感到困惑。我没有发现标签的默认命名方案非常直观。有没有办法手动重命名它们？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-05-01T15:16:01.430

如果您打开选项屏幕并在文本编辑器 > 编辑器选项卡和状态栏 > 选项卡文本下设置以下标志：

```
Include database name: False
Include file name:     True
Include login name:    False
Include server name:   False 
```

然后将查询保存为简单的东西，您可能会看到您想要的结果。

![设置这些选项](../Images/bbb38f5acc33d14ac63d5fa45712044e.png)

![在此处输入图像描述](../Images/4188f654004cb74233fcb2265ca7a860.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T14:07:40.097

然后不要使用标签，切换到窗口视图：

```
from the menu:
    tools - options
        in the dialog box, environment - general:
            click on the "MDI" environment radio button 
```

我与标签作斗争并放弃了，这对我来说效果更好。选项卡只显示前几个字符，最终成为数据库名称的开头，这对我来说毫无用处。您可以使用菜单-“窗口”查看您的窗口列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-28T12:45:56.467

[您可以使用我的Tabs Studio 扩展](https://tabsstudio.com/documentation/ssms-extension.html)手动重命名 SSMS 中的选项卡。

右键单击选项卡并选择**设置 SQL 注释**：

[![在此处输入图像描述](../Images/aa675184032e34346e5a3a21423c725e.png)](https://i.stack.imgur.com/EcJfM.png)

类型选项卡说明：

[![在此处输入图像描述](../Images/f025e023ce9c56ff1522ae6fe5a85855.png)](https://i.stack.imgur.com/bU5fe.png)

并且评论将被添加到标签标题中：

[![在此处输入图像描述](../Images/17cd46f0ab77a2962fe13e8f5ee11933.png)](https://i.stack.imgur.com/qHtYP.png)

如果您想用您的自定义名称完全替换选项卡标题，请在 SQLComment 加载项选项中将**转换替换**从默认更改`$_ ${SQLComment}`为`${SQLComment}`：

[![在此处输入图像描述](../Images/2b0d8e37f6a327b4cce6518318918e83.png)](https://i.stack.imgur.com/PvHcZ.png)

选项卡名称将完全替换为您的描述：

[![在此处输入图像描述](../Images/aca0b11e36224109d3ece0ea721ce92b.png)](https://i.stack.imgur.com/xcQ2T.png)

# php - 按字母顺序排序多维数组不起作用？

> ID：10882652
> 
> 赞同：0
> 
> 时间：2012-06-04T14:03:22.283
> 
> 标签：php, usort

所以我有一个名为 $links 的数组

```
array(
    [0] = array(
        'type' => 'thread'
        'url' => 'blah blah blah'
    ),
    [1] = array(
        'type' => 'media'
        'url' => 'blah blah blah'
    ),
    [2] = array(
        'type' => 'website'
        'url' => 'blah blah blah'
    )
); 
```

我想做的是使用“类型”按字母顺序对这个数组进行排序。为此，我正在使用`usort()`

```
usort($links, create_function('$b, $a', 'return $a["type"] - $b["type"];')); 
```

问题是，这实际上并不是对数组进行排序......它所做的只是反转数组。运行后，我得到网站 > 媒体 > 线程。如果我再次处理它，它会返回到线程 > 媒体 > 网站。

最终结果应该是媒体 > 主题 > 网站。我错过了什么吗？为什么这不能正确排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:05:40.340

试试这个，而不是：

```
usort($links, create_function('$a, $b', 'return strcmp($a["type"], $b["type"]);')); 
```

# android - 如何从图像视图中获取图像？

> ID：10882655
> 
> 赞同：-1
> 
> 时间：2012-06-04T14:03:48.027
> 
> 标签：android, sql, database, image

我正在尝试获取放入图像视图的图像。这是我的方法：

```
// Get the image in the image view
    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
    Bitmap myBitmap = mImageView.getDrawingCache();
    myBitmap.compress(CompressFormat.PNG, 0, outputStream); 
```

然后我想将它插入到数据库中：

```
mDbHelper.createReminder(outputStream); 
```

数据库适配器如下所示：

```
public long createReminder(ByteArrayOutputStream outputStream) {
    ContentValues initialValues = new ContentValues();
    initialValues.put(KEY_IMAGE, outputStream.toByteArray());        
    return mDb.insert(DATABASE_TABLE, null, initialValues);
} 
```

当我尝试它时，应用程序崩溃了。我认为我的陈述在某种程度上是错误的。有任何想法吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:09:55.947

```
Drawable drawable = mImageView.getDrawable();
if (drawable instanceof BitmapDrawable) {
    BitmapDrawable bitmapDrawable = (BitmapDrawable) drawable;
    Bitmap bitmap = bitmapDrawable.getBitmap();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T14:13:17.443

```
Drawable myDrawable = mImageView.getDrawable();

Bitmap bitmap = ((BitmapDrawable)myDrawable).getBitmap(); 
```

现在您将位图转换为流并存储在数据库中。

# spring - 当 bean 具有交叉引用时，Hibernate 会导致问题

> ID：10882661
> 
> 赞同：1
> 
> 时间：2012-06-04T14:04:06.893
> 
> 标签：spring, hibernate

我有休眠豆说A，B和C。这是它们之间的关系：

*   A 包含 B 的对象 - 多对一 - 延迟获取
*   B 包含 C 的对象 - 多对一 - 延迟获取
*   C 包含一个 SortedSet 的对象 - 一对多 - 延迟获取

我试图以这种方式获取对象 A->getB()->getC()->getBs() 并使用 for 循环遍历 Bs。现在，当我在 A->getB() 上调用 HibernateBeanReplicator.deepCopy() 时进行迭代后，它无法填充对象图，并且 B 的许多字段仍然为空。

但是，如果我改变这样的关系 A->getC()->getBs()，hibernateBeanReplicator 工作正常。尽管我当前的应用程序设计不允许我像这样更改它们。

万分感谢。苏曼

# android-softkeyboard - 加载片段时隐藏软键盘或虚拟键盘

> ID：10882662
> 
> 赞同：0
> 
> 时间：2012-06-04T14:04:12.697
> 
> 标签：android-softkeyboard, android

我的片段中有 2 个编辑文本框。每当这个片段被任何活动加载时，软键盘就会出现在屏幕上，从而覆盖平板电脑屏幕的一半。每当我的片段被任何活动加载时，我都想隐藏软键盘。软键盘应仅在单击或点击编辑文本框时出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T15:34:41.067

Padma 的评论将阻止软键盘出现在应用程序中，这听起来不像你想要的，因为你有 EditText 需要从某个地方获取他们的输入。

您可以在加载时关闭该视图上的任何 EditText 的软键盘：

```
InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(findViewById(R.id.your_edit_text).getWindowToken(), 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T09:59:29.113

```
getActivity().getWindow().setSoftInputMode(
              WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-11T19:04:10.793

对于 DialogFragment，您必须从对话框中移除焦点，而不是仅从 DialogFragment 中的第一个 EditText

```
this.getDialog().getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN); 
```

# search - 错字3 索引搜索 是否可以向未登录的用户显示错字3 中的访问受限页面？

> ID：10882663
> 
> 赞同：0
> 
> 时间：2012-06-04T14:04:14.940
> 
> 标签：search, typo3, indexed

我还想向未登录的用户显示访问受限页面的结果，可能有特殊的类或文本显示，如果他注册，他可以获得更多内容。

我在typo3 属性中找到了show.forbiddenRecords，但它不起作用......

我使用typo3 4.7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:51:08.523

你试过了`config.typolinkLinkAccessRestrictedPages = <id of login page>`吗？

检查 Typoscript 参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T12:30:31.377

甚至设置：plugin.tx_indexedsearch.show.forbiddenRecords=1 config.typolinkLinkAccessRestrictedPages = uid-of-login-page

索引搜索不搜索禁止记录。

我发现如果我在第 1119 行的函数 execFinalQuery 中设置： $id_list[] = $this->cObj->getTreeList($rootId,9999,0,0,'','').$rootId;

至

$id_list[] = $this->cObj->getTreeList($rootId,9999,0,1,'','').$rootId;

该索引搜索开始搜索并显示禁止记录。我还在typo3的错误上发布了这个，希望有人会检查这个，因为我不是核心用户......

[http://naprej.net](http://naprej.net)

# java - Smartclient：如何在模态掩码上显示画布？

> ID：10882668
> 
> 赞同：-1
> 
> 时间：2012-06-04T14:04:25.563
> 
> 标签：java, smartgwt, listgrid

我`ListGrid`在仪表板布局上显示了一个。在少数情况下，我需要显示我们通常使用的 Notes 消息`SC.say()`。

但我设计了自己的画布来显示所有此类消息，并将其放置在父仪表板上。

现在需要在 Listgrid 组件上发生某些操作时显示消息。该窗口设置为模态，因此我的 Notes Canvas 显示但被仪表板布局掩盖。

我想在没有遮罩的情况下显示画布？

我怎样才能做到这一点来显示没有蒙版的画布和 ListGrid 显示？

![在此处输入图像描述][1] 这是实际发生的情况，因为窗口设置为 isModal(true) 和 setModalMask(true)，我知道它是可选的，但在我们的项目中是必需的，但现在我只需要带上黄色画布消息显示为正常突出显示，而不是刚刚显示的蒙版

```
public class GetMessageDialogBox extends Canvas 
{
    private GetMessageDialogBox(String messageText)
{
    mainLayout = new GetHorizontalLayout("100%", "40", null, 0, 5, null);

    btnClose = new GetImgButton(16, 16, "Red_Square_Close.png");
    btnClose.setVisible(true);
    btnClose.setShowTitle(true);

    btnClose.addClickHandler(new ClickHandler() 
    {           
        @Override
        public void onClick(ClickEvent event) 
        {
            setAnimateTime(1000);
            animateMove(10 , Window.getClientHeight());
            isVisibleMessageStatus = false;
            setVisible(false);
        }
    }); 

    displayLabel = new GetLabel(messageText,"messageLabelDialogText");
    displayLabel.setBackgroundColor("yellow");
    displayLabel.setHeight100();
    displayLabel.setWidth100();
    displayLabel.setValign(VerticalAlignment.CENTER);
    mainLayout.addMember(new Canvas(){{
        setWidth("50%");
    }});
    mainLayout.addMember(displayLabel);
    mainLayout.addMember(new Canvas(){{  
        setWidth("20%");
    }});
    mainLayout.addMember(btnClose);

    setParentElement(StaticInfo.mainDashboardLayout);
    setVisible(true);
    setHeight(40);
    setBackgroundColor("yellow");
    setBorder("1px solid black");
    setLeft(10);  
    setTop(Window.getClientHeight()-40);
    setShowShadow(true);
    setShadowOffset(5);
    setShadowSoftness(5);
    setAnimateTime(100);
    timer.schedule(5000);
    addChild(mainLayout);
    customMask.show();
    bringToFront();
    show(); 
}
} 
```

现在这个 Message 组件在演示者文件中被调用。

```
customMask.show();
winLoadList.bringToFront();
winLoadList.show(); 
```

上面的代码用于列表网格，因为我需要显示的是未屏蔽但现在当我调用消息组件时，我还需要使用以下代码显示消息组件未屏蔽，但所有三个浏览器都提供不同的 o/p。

```
customMask.show();
GetMessageDialogBox.getInstance(messages.LoadPresenter_NoRecordSelected()).bringToFront();
GetMessageDialogBox.getInstance(messages.LoadPresenter_NoRecordSelected()).show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:24:32.273

你有很多方法可以实现这一目标。

**我认为最简单的方法是尝试调用`bringToFront()`你的黄色画布。**

这段代码可以工作，但是，当您移动窗口时，黄色画布会落在后面：

```
Window window = new Window();
window.setIsModal(true);
window.setWidth(800);
window.setHeight(500);
window.setAutoCenter(true);
window.setShowModalMask(true);

window.show();

final HLayout message = new HLayout();
message.setWidth(400);
message.setHeight(30);
message.addMember(new Label("hey you"));

message.setBackgroundColor("yellow");

message.bringToFront();
message.show(); 
```

**尽管使用`setModal(true)`，您可以自己制作模态掩码，因此您可以处理所有事情（也许有更好的解决方案）。**

代码 ：

```
public class BusyMask extends VLayout
{
    public BusyMask()
    {
    RootPanel.get().add(this);
    hide();
    setOpacity(50);
    setBackgroundColor("#000000");
    setPositionAndSizes();
    this.getParentElement().addResizedHandler(
        new ResizedHandler()
            {

                @Override
                public void onResized(ResizedEvent event)
                {
                    setPositionAndSizes();

                }
            });
    }

@Override
public void show()
{
    this.bringToFront();
    super.show();
}

@Override
public void hide()
{
    super.hide();
}

protected void setPositionAndSizes()
{
    setWidth100();
    setHeight100();

    setLeft(0);
    setTop(0);
}
} 
```

你在`ListGrid`显示方法中使用它，当显示它时：

```
busyMask.show();
bringToFront();
super.show(); 
```

# html - 使用静态标题创建动态大小的 DIV 框

> ID：10882675
> 
> 赞同：0
> 
> 时间：2012-06-04T14:04:36.423
> 
> 标签：html, css

我正在开发一种包含各种大小的 div 的仪表板。高度和宽度目前是基于百分比的，每个 div 框的内容是动态的。我需要创建漂亮的标题来描述盒子的内容。

标题当前位于框内。当涉及溢出时，这会导致很多问题，并使内部内容的间距令人讨厌。

有没有一种更简单的方法可以在 div 内获得完美大小的标题，或者将它们像小帽子一样放在盒子的顶部会更容易。

这与我想要的非常接近，但标题会随着内容滚动！这真的很可怕。

[创建带有标题标题的 div](https://stackoverflow.com/questions/2551945/create-div-with-title-header)

![为什么这么难？](../Images/a8c479c9801eda91f687ae662554bf7d.png)

这就是我想要的，一个像装置一样描述它自己的内容的小部件。

这是一个非常接近我想要的小提琴

[http://jsfiddle.net/exrXR/1019/](http://jsfiddle.net/exrXR/1019/)

但是 Position Absolute 完全覆盖了很多东西......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:15:44.553

在编辑问题以包含指向演示的链接之前，我将这个演示放在一起，所以这是第一次迭代，尽管在查看链接的演示之后，标记似乎相当接近：

```
<div class="dashWrap">
    <h2>header</h2>
    <div class="dashContent">
        <p><!-- content --></p>
    </div>
</div>​ 
```

以下 CSS 似乎可以满足您的要求：

```
.dashWrap {
    width: 50%;
    margin: 0 auto 1em auto;
}
.dashWrap h2 {
    background-color: #ffa;
    border: 2px solid #000;
    border-radius: 0.5em 0.5em 0 0;
    text-indent: 0.5em;
}

.dashWrap .dashContent {
    max-height: 5em;
    overflow-x: hidden;
    overflow-y: auto;
    border: 2px solid #000;
    border-top-color: transparent;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/NyXqu/)。

* * *

**编辑**了来自 OP 的以下问题（在评论中）：

> ...我不知道它为什么起作用。如果您愿意给我一个简短的解释，说明为什么标题如此神奇地保持在原位，那将非常有帮助。

保持“原位”的原因`h2`很简单，因为我没有移动它，也没有改变它的默认`display`行为（`h2`默认为`display: block`）；这意味着它保留在文档流中的位置。

它的兄弟`.dashContent`元素 , 元素能够滚动，因为它有两个规则，第一个是`max-height`防止元素垂直增长以容纳其后代元素，第二个是`overflow-y`（在某些浏览器中`overflow-x`也需要设置，因此上面），它允许`.dashContent`滚动的内容。

# javascript - 谷歌浏览器用户脚本与扩展？

> ID：10882676
> 
> 赞同：3
> 
> 时间：2012-06-04T14:04:37.033
> 
> 标签：javascript, google-chrome, google-chrome-extension, userscripts

我正在寻找各种选项来增强我的浏览体验。我在[userscripts.org](http://www.userscripts.org)上发现了大量的用户脚本。但是，我也在阅读 Google Chrome 扩展（看起来与用户脚本非常相似）。

我想知道使用用户脚本与扩展是否有任何优势？我似乎无法工作的一件事是使用[这些技术](https://stackoverflow.com/questions/5006460/userscripts-greasemonkey-calling-a-websites-javascript-functions/5006952#5006952)中的任何一种将脚本注入 DOM，以便我可以让我的 javascript 代码访问页面的 javascript 方法。它作为单个用户脚本安装工作正常，但是当我尝试将该用户脚本转换为扩展时，它似乎不起作用。不过，我不确定我是否做错了什么，或者它是否根本无法工作。

我问的主要原因是因为在我开始编写自己的用户脚本后，我遇到了脚本文件变得非常大并且与其他脚本重复的问题。Chrome 不支持“@require”选项，因此我无法以这种方式组织我的“通用”代码，这让我认为我应该改用扩展程序。

那么，是否可以在扩展中使用“脚本注入”或“位置黑客”，以便我的 javascript 可以在 DOM 上执行并访问其他 javascript？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T14:22:22.017

回答您的第一个问题：用户脚本是无法请求访问 Chrome API 的单个文件，例如书签、跨域 XMLHttpRequest 等。Chrome 扩展是多个没有这些限制的压缩文件。

至于您的第二个问题，我建议您阅读[如何在 Chrome 中模仿 Greasemonkey/Firefox 的 unsafeWindow 功能？](https://stackoverflow.com/questions/1622145/how-can-i-mimic-greasemonkey-firefoxs-unsafewindow-functionality-in-chrome).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T15:10:06.807

有关 Chrome 扩展内容脚本的“孤立世界”的说明，请参见此处。您可以访问网站 DOM，但不能访问另一个脚本中的变量/函数...

[http://code.google.com/chrome/extensions/content_scripts.html#execution-environment](http://code.google.com/chrome/extensions/content_scripts.html#execution-environment)

# c# - 禁用 Web 应用程序的匿名身份验证会导致错误

> ID：10882678
> 
> 赞同：0
> 
> 时间：2012-06-04T14:04:38.653
> 
> 标签：c#, asp.net, windows, authentication, iis-7

我正在尝试为 Intranet 应用程序启用 Windows 身份验证并禁用匿名身份验证。我已经在 IIS7 中启用了 Windows 身份验证并禁用了匿名，并将我的 Web.Config 设置为使用 Windows 身份验证。

```
<system.web>
    <authentication mode="Windows" />
    <compilation debug="true" targetFramework="4.0" />
</system.web> 
```

当我部署和运行我的应用程序时，只会加载页眉。当我在 Chrome 或 IE 中导航到我的 Service.svc 文件时，我收到以下错误：

> 此服务的安全设置需要“匿名”身份验证，但托管此服务的 IIS 应用程序未启用它。
> 
> System.NotSupportedException：此服务的安全设置需要“匿名”身份验证，但托管此服务的 IIS 应用程序未启用它。

我认为这是我的 Web.Config 或 Service.svc.cs 的问题，但我无法识别它。这只发生在一项服务上。在 IIS7 中启用匿名身份验证将解决该问题，但我需要禁用它。

在我的 ServiceRefernces.ClientConfig 中，我有：

```
<configuration>
  <system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_IService" maxBufferSize="2147483647"
                maxReceivedMessageSize="2147483647">
                <security mode="None" />
            </binding>
        </basicHttpBinding>
    </bindings>
    <client>
  <endpoint address="http://OHARA-WIN7/nightlyweb/Service.svc"       
      binding="basicHttpBinding"
      bindingConfiguration="BasicHttpBinding_IService"    
      contract="ServiceReference2.IService"
      name="BasicHttpBinding_IService" />
    </client>
  </system.serviceModel>
</configuration> 
```

我看到很多帖子告诉人们将 TransportClientCredentialType 设置为 Ntlm，但 VisualStudio 无法识别此元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T18:29:52.233

我终于弄明白了。在与我经理的一个项目进一步比较后，我注意到我应该将此代码添加到我的 Web.CONfig，而不是像我认为我需要的那样添加到我的 ServiceReferences.ClientConfig。

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding>
                <security mode="TransportCredentialOnly">
                    <transport clientCredentialType="Windows" />
                </security>
            </binding>
        </basicHttpBinding>
    </bindings>
</system.serviceModel> 
```

# mysql - 分组时如何从表中选择最长的“字符串”

> ID：10882679
> 
> 赞同：99
> 
> 时间：2012-06-04T14:04:39.700
> 
> 标签：mysql

例子：

```
SELECT partnumber, manufacturer, condition, SUM(qty), AVG(price), description FROM parts

WHERE [something]

GROUP BY partnumber, manufacturer, condition 
```

我有一些空白的描述，可能有许多零件号、制造商、条件值，并且在组上似乎采用了第一个可用的描述，它可以是空白的。我想获得最长的描述。

我试过这个：

```
MAX(LENGTH(description)) 
```

但是，它返回字符串中的字符数。是否可以在 MySQL 中做我想做的事情？

* * *

## 回答 #1

> 赞同：201
> 
> 时间：2012-06-04T14:06:29.240

尝试`ORDER BY LENGTH(description) DESC`并使用`LIMIT 1`只获得最大的。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-12-19T21:34:29.720

```
ORDER BY LENGTH(description) DESC LIMIT 1 
```

这会将结果从最长到最短排序并给出第一个结果（最长。）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-04T14:16:45.490

```
SELECT   partnumber, manufacturer, `condition`, SUM(qty), AVG(price), description
FROM     parts
WHERE    [something] AND LENGTH(description) = (
           SELECT MAX(LENGTH(description))
           FROM   parts AS p
           WHERE  p.partnumber   = parts.partnumber
              AND p.manufacturer = parts.manufacturer
              AND p.condition    = parts.condition
         )
GROUP BY partnumber, manufacturer, `condition` 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-17T14:38:35.557

`MAX(LENGTH(description))`返回描述列中最长值的长度。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-11-11T18:37:14.740

如果“描述”包含多个成语字符，那么您应该使用

```
MAX(CHAR_LENGTH(description)) 
```

例如 ：

```
SELECT LENGTH("Это тест, связанный с длиной строки в базе данных") 
```

结果是89。

然而 ：

```
SELECT CHAR_LENGTH("Это тест, связанный с длиной строки в базе данных") 
```

结果是49。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-04T14:12:13.580

我找到了解决方案。`MAX(description)`似乎工作得很好。

# javascript - 使用 Javascript Infovis Toolkit 在空间树的节点上实现 onclick 事件

> ID：10882683
> 
> 赞同：0
> 
> 时间：2012-06-04T14:05:03.803
> 
> 标签：javascript, infovis

我正在使用 Infovis 库来绘制空间树。

不幸的是，在节点上实现事件时存在问题，因为所有节点都是错误的。

相关的谷歌组上已经有一个关于它的线程： [https ://groups.google.com/forum/?fromgroups#!topic/javascript-information-visualization-toolkit/NJtbe9hq5bQ](https://groups.google.com/forum/?fromgroups#!topic/javascript-information-visualization-toolkit/NJtbe9hq5bQ)

给出的解决方案是修复 NodeTypes 中的“包含”： [https ://github.com/philogb/jit/blob/master/Source/Visualizations/Spacetree.js#L1370](https://github.com/philogb/jit/blob/master/Source/Visualizations/Spacetree.js#L1370)

我复制粘贴了新的 NodeTypes 实现，不幸的是它仍然无法正常工作（节点仍然都是假的）。

任何想法？

编辑：可以通过在节点图上创建标签来做一些接近的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T00:31:21.497

这是问题中所述的已知错误，因此只有两种解决方案：

1.  更正库，如[Spacetree.js 的第 1370 行所示](https://github.com/philogb/jit/blob/master/Source/Visualizations/Spacetree.js#L1370)
2.  使用解决方法

我设法通过使用每个节点的 onPlot 选项创建标签来实现所需的功能。

# python - 从 Python 访问 Matlab 时逃避轮询

> ID：10882686
> 
> 赞同：2
> 
> 时间：2012-06-04T14:05:24.583
> 
> 标签：python, matlab, polling

我想从 Python 访问 Matlab（在 Windows 上，远程和通过 COM 接口）。我的目标是：Matlab 正在做一些工作并永久更改某个变量的值。我需要知道该值何时超过某个常数。现在，我正在无限循环中轮询 Matlab 中该变量的值，该循环会在超过该值时中断。但是，我想让 Matlab 做这项工作并告诉*我*什么时候会出现这种情况，而我却懒洋洋地坐在那里听。有没有办法做到这一点，如何做到最好？我曾想过定义一个要传递给 Matlab 的回调函数，它在超出事件时会触发 Python 中非忙等待循环的中断，但我怀疑它会起作用。我在 Matlab 和 Python 方面都不是很有经验，因此非常感谢提示。

涉及很多其他代码，但基本上现在它就像

```
connectToMatlab(*args)
while True:
    val = getValueFromMatlab()
    if val > constant or timeout: break 
```

我的想法是

```
def breakLoop():
    ...  

connectToMatlab(breakLoop, *args)
while True:
    time.sleep(1) # or some alternate non-busy-wait 
```

然后让 Matlab调用`breakLoop()`. `val > constant`但是，我不知道是否可以让 Matlab 通过回调来做到这一点，如果可以，如何实现这样的`breakLoop()`-Function。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T20:03:25.060

你可以用另一种方式来解决这个问题，并使用文件系统作为在 MATLAB 和 Python 之间传递消息的一种方式。

在您的 MATLAB 代码中，每次更改变量时，检查它是否超过某个阈值。如果是，请在预定位置创建一个新文件。将此视为触发事件。

现在在你的 python 代码中，使用一些可用的方法来[监听](https://stackoverflow.com/questions/182197/how-do-i-watch-a-file-for-changes-using-python)文件系统中的[变化](http://code.activestate.com/recipes/156178-watching-a-directory-under-win32/)，并通过指示一些变量来中断循环来响应。

* * *

## 编辑

这是提出的解决方案的框架：

### matlab_script.m

```
%# directory that Python code is watching for modifications
dirPath = 'some_directory';

x = 0;
for i=1:1000
    %# some lengthy operation
    pause(0.5)
    x = x + 1;

    %# check if variable exceeds threshold
    if x > 10
        %# save the workspace to MAT-file inside the directory watched.
        %# this shall trigger the notification in Python
        save( fullfile(dirPath,'out.mat') )
        break
    end
end 
```

### python_code.py

```
import os, sys, time
import win32file, win32event, win32con

# stub your functions in my case
def connectToMatlab():
  pass
def getValueFromMatlab():
  return 99

# path to predetermined directory to watch
dirPath = "some_directory"
dirPath = os.path.abspath(dirPath)

# start/connect to a MATLAB session, running the script above
connectToMatlab()

# set up folder watching (notify on file addition/deletion/renaming)
print "Started watching '%s' at %s" % (dirPath, time.asctime())
change_handle = win32file.FindFirstChangeNotification(
  dirPath, 0, win32con.FILE_NOTIFY_CHANGE_FILE_NAME)

# time-out in 10 sec (win32event.INFINITE to wait indefinitely)
timeout = 10000

try:
  # block/wait for notification
  result = win32event.WaitForSingleObject(change_handle, timeout)

  # returned because of a change notification
  if result == win32con.WAIT_OBJECT_0:
    # retrieve final result from MATLAB
    print "MALTAB variable has exceeded threshold at %s" % time.asctime()
    val = getValueFromMatlab()

  # timed out
  elif result == win32con.WAIT_TIMEOUT:
    print "timed-out after %s msec at %s" % (timeout,time.asctime())
    val = None    # maybe to indicate failure

finally:
  # cleanup properly
  win32file.FindCloseChangeNotification(change_handle)

# work with val
print val 
```

该[`WaitForSingleObject`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687032.aspx)函数首先检查指定对象的状态。如果它是无信号的，则调用线程进入有效的等待状态，并在等待对象发出信号（或超时间隔过去）时消耗非常少的处理器时间。

您会看到，当线程引用处于非信号状态的对象时，会立即进行上下文切换，即从处理器中取出它并进入等待/睡眠模式。稍后当对象发出信号时，线程被放回可运行队列并准备好执行。

在这种等待中，虽然在上下文切换中存在一些开销，但在等待状态下不会浪费 CPU 周期。

将此与“轮询并等待”方法进行比较，其中线程在某种循环中等待并检查感兴趣对象的状态。这被称为自旋或忙等待，这可以证明是对 CPU 周期的浪费。

现在感谢 pywin32 模块，我们可以直接使用这些[`WaitFor...`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687069.aspx)功能。该实现应该是MSDN 中给出的[标准示例的直接移植。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365261.aspx)

或者，您可以使用 PyQt 库及其[QFileSystemWatcher](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qfilesystemwatcher.html)类，而不是直接使用 Win32 API。

# sql - SQLITE：显示每个类别的总数（总和）

> ID：10882691
> 
> 赞同：3
> 
> 时间：2012-06-04T14:05:57.797
> 
> 标签：sql, database, sqlite

我有两个表（输入和类别）：

```
CREATE TABLE categories (
    iId INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    sName TEXT NOT NULL,
    iParent INTEGER,
    FOREIGN KEY (iParent) REFERENCES categories(iId)
);

CREATE TABLE inputs (
    iId INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    iCategory INTEGER,
    dValue DOUBLE NOT NULL,
    FOREIGN KEY (iCategory) REFERENCES categories(iId)
); 
```

我需要从每个类别的输入表中获取总和（dValue 列）。即使总和结果为零。

如果我能得到每个父类别的总和会更好（何时`categories.iId = categories.iParent`，将子类别的结果与父类别相加）

谁能帮我？我很感激任何帮助！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T14:13:18.097

尝试这个：

```
select c.iParent, sum(i.dValue)
from categories c
left outer join inputs i on i.iCategory=c.iId
group by c.iParent 
```

**编辑：**使用帐户：

```
select c.iParent, a.iCurrency, sum(i.dValue)
from categories c
left outer join inputs i on i.iCategory=c.iId
left outer join accounts a on i.iAccount=a.iId
group by c.iParent,a.iCurrency 
```

# json - Spring 的 RestTemplate 和 JSON 正文中的前缀

> ID：10882694
> 
> 赞同：1
> 
> 时间：2012-06-04T14:06:07.560
> 
> 标签：json, spring, jackson, resttemplate

我想使用 RestTemplate 从服务器获取响应并在我的 Android 应用程序中处理该响应，但服务器在 json 正文中使用前缀（或变量）回答，因此响应看起来类似于：

```
response={"foo":"bar"} 
```

是否可以以简单的方式省略“response =”部分，还是我需要重新实现 MappingJacksonHttpMessageConverter 类？

提前致谢

编辑：**现在可以使用**，以下代码基于最新的 SpringAndroid (1.0.0 RELEASE)。RestTEplate(true) 构造函数添加了所需的转换器，request.toMap() 构建了一个 MultiValueMap，它只有 FormHttpMessageConverter 接受的主体类型。

```
HttpHeaders requestHeaders = new HttpHeaders();
requestHeaders.setContentType(new MediaType("application", "x-www-form-urlencoded"));

RestTemplate restTemplate = new RestTemplate(true);
restTemplate.setRequestFactory(new HttpComponentsClientHttpRequestFactory());

final String url = "http://www.dummy.org/herp/getDerp";
String result = restTemplate.postForObject(url, request.toMap(), String.class); 
```

现在我有输出字符串，我可以从中提取 JSON 并解析它。

# iphone - ASIHTTPRequest 的问题

> ID：10882697
> 
> 赞同：3
> 
> 时间：2012-06-04T14:06:11.603
> 
> 标签：iphone, objective-c, ipad, asihttprequest

我知道 Ben 放弃了 ASIHTTPRequest 项目，但无论如何现在切换到其他东西为时已晚，所以我决定尝试解决我遇到的问题。

我正在发布和使用 https 协议的请求。我已按要求禁用了持久连接。

```
 ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
    [request setUseKeychainPersistence:YES];
    [request setShouldAttemptPersistentConnection:YES];

    // Set the request timeout 
    [request setTimeOutSeconds:REQUEST_TIME_OUT];

    // Upload an image
    NSData *imageData = UIImagePNGRepresentation(imageContainer.mImage);
    [request setPostBody:[NSMutableData dataWithData:imageData]];;

    [request setDelegate:self];
    [request setDidFinishSelector:@selector(uploadRequestFinished:)];
    [request setDidFailSelector:@selector(uploadRequestFailed:)];
    [request startAsynchronous]; 
```

以及我得到`A connection failure occurred`的所有东西`kCFErrorDomainCFNetwork error -1005`。

我已经在项目的配置中启用了所有调试信息，`ASIHTTPRequest`并获得了以下日志

```
[STATUS] Starting asynchronous request <ASIFormDataRequest: 0x1029e000>
[CONNECTION] Request <ASIFormDataRequest: 0x1029e000> will not use a persistent connection
[THROTTLING] ===Used: 0 bytes of bandwidth in last measurement period===
[THROTTLING] ===Used: 327680 bytes of bandwidth in last measurement period===
[CONNECTION] Request attempted to use connection #(null), but it has been closed - will retry with a new connection
[CONNECTION] Request <ASIFormDataRequest: 0x1029e000> will not use a persistent connection
[THROTTLING] ===Used: 229376 bytes of bandwidth in last measurement period===
[THROTTLING] ===Used: 360448 bytes of bandwidth in last measurement period===
[CONNECTION] Request attempted to use connection #(null), but it has been closed - we have already retried with a new connection, so we must give up[STATUS] Request <ASIFormDataRequest: 0x1029e000>: Failed
[CONNECTION] Request #(null) failed and will invalidate connection #(null)ata upload failed "Error Domain=ASIHTTPRequestErrorDomain Code=1 "A connection failure occurred" UserInfo=0xf624750 {NSUnderlyingError=0xf6246f0 "The operation couldn‚Äôt be completed. (kCFErrorDomainCFNetwork error -1005.)" 
```

任何想法为什么会发生崩溃？以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:40:03.333

几个月前我有同样的问题。不保证 Internet 连接，您会发现此错误在 3G 连接中更为常见。我的解决方案是提高重试次数。在里面`ASIHTTPRequest.m`将重试计数修改为至少 5 次，看看是否有帮助。

```
- (BOOL)retryUsingNewConnection
{
    if ([self retryCount] < 5) { 
```

这样做的原因是因为`-1005`捕获了错误，`-handleStreamError`然后在上面的代码中允许多次重试连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:14:59.910

伙计们感谢您的帮助。

我刚刚发现问题是由服务器端引起的。其中拒绝接受更大的数据，比如说 800K。

非常感谢

# .net - 无法更新 WCF 服务参考 - Service Works

> ID：10882703
> 
> 赞同：0
> 
> 时间：2012-06-04T14:06:47.523
> 
> 标签：.net, vb.net, wcf, service, reference

添加新方法后，我无法更新我的 WCF 服务参考。如果我撤消我的更改，它也将不起作用。如果我调用 URI：`http://192.168.1.175:8001/WS`我可以使用所有方法从服务中看到 XML 文件。我的客户端应用程序也可以与服务器通信。如果我在“WcfTestClient.exe”中输入 URI，我将收到与更新服务参考时相同的错误：

```
HTTP-Status 503: Service Unavailable. 
```

帮助表示赞赏.... :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-23T17:32:07.047

我今天遇到了这个问题。在网上四处寻找之后，我得出结论，某处缓存了一些东西。我在我的计算机上搜索服务 DLL 的所有实例（发现 19，顺便说一句）并删除了所有实例。重建后，一切都开始正常工作。

# php - PHP删除（条件）文本中的重复行

> ID：10882707
> 
> 赞同：-2
> 
> 时间：2012-06-04T14:07:01.733
> 
> 标签：php, duplicate-removal

```
$string = "Apple
Foo
Banana
...
Banana
Foo
Other text
...
Apple"; 
```

我有文本，其中单行在一行“...”之后重复。

之前和之后的行可以是任何东西（“Foo”），但也可以是重复的（没有“...”，如“Apple”）。

“...”行可以出现多次，后面没有重复的行。

我只想删除中间有“...”行的重复行。

换句话说：如果它与上面的“...”相同，则删除“...”之后的行

我该如何匹配

```
Banana
...
Banana 
```

删除重复的行：

```
Banana 
```

所以结果是

```
$string = "Apple
Foo
Banana
...
Foo
Other text
...
Apple"; 
```

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:11:41.263

```
$lines = explode("\n", $string);  
$uniqueLines = array_unique(lines);
$result = implode("\n", $uniqueLines); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T14:12:28.410

以下是删除字符串中重复**行的方法：**

```
$string = implode( "\n", array_unique( explode( "\n", $string))); 
```

[`explode()`](http://php.net/explode)将字符串放入换行符的数组中，调用[`array_unique()`](http://php.net/array_unique)结果数组，然后将字符串与[`implode()`](http://php.net/implode).

**输出：**

```
Text row A
Foo
Text row B
...
Text row C 
```

但是，请注意输出与您想要的输出不完全匹配，因为您想要的输出与您对问题的定义相冲突。

[演示](http://codepad.viper-7.com/2MRt7U)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T14:12:51.623

我不确定我是否了解所有条件（例如，您是否可以在...之前有重复项），但是如何`$string = implode("\n", array_unique(explode("\n", $string)));`

**更新** 蛮力解决方案：

```
$string = "Apple\nFoo\nBanana\n...\nBanana\nFoo\nOther text\n...\nApple\n";
$string2 = "";

$arr = explode("\n", $string);

$string2 .= $arr[0] . "\n";
$string2 .= $arr[1] . "\n";

for ($i=2; $i<count($arr); $i++)
{
    if ($arr[$i-1] != '...' || $arr[$i-2] != $arr[$i])
    {
        $string2 .= $arr[$i] . "\n";
    }

}

echo $string2; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T14:25:06.243

如果任务只是删除带有三个点的行之后的行：

```
echo preg_replace("/^(.+?)\r?\n(\.{3})\r?\n\\1/m", "\\1\n\\2", $string); 
```

表达式匹配：

*   包含至少一个字符的整行 (1)
*   一行上的三个点 (2)
*   包含至少一个字符的整行 (1)

`/m`修饰符用于选择多行模式，其中and`^`带有`$`行首和行尾的含义。

`\\1`反向引用用于匹配三个点之前的任何内容。

需要替换`'\\1'`以将匹配的线放回三个点。

# java - Java Xpath 查询编译失败

> ID：10882709
> 
> 赞同：0
> 
> 时间：2012-06-04T14:07:12.827
> 
> 标签：java, xml, xpath, sax

我有以下 XML 文档：

```
<application xmlns="http://www.example.com/schemas/app-config/1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.example.com/schemas/app-config/1.0   http://www.example.com/schemas/app-config/1.0/app-config-1.0.xsd">
    <info name="Dummy Application" runningOn="Dev"/>
</application> 
```

当我运行以下代码时：

```
XPathFactory factory = XPathFactory.newInstance();
XPath xpath = factory.newXPath();
XPathExpression expr = xpath.compile("/application/info@name"); 
```

我得到了一个`XPathExpressionException`方法`compile`。异常的消息只是“ `null`”。看起来我正确地使用 XPath 来定位`name`属性，但我想知道我的所有 XMLNS 和 XSI 声明是否都在这里造成了问题？如果不是，那么我完全一无所知，也不知道是什么导致了这个异常。

一件事 - 在我将实例与我的实际对象相关联之前怎么`compile`会失败？！？`xpath``Document`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:35:51.883

compile 方法会引发异常，因为您的 XPath 表达式无效。您可能想使用`"/application/info/@name"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T14:35:20.607

您只是在表达式中有语法错误`/application/info@name`，正确的语法是`/application/info/@name`. 但是请注意，您的 XML 示例有一个默认名称空间，因此对于 XPath 1.0，表达式`/application/info/@name`不会选择该示例中的任何内容，对于 XPath 2.0，您需要确保为 XPath 评估关联定义默认名称空间。在 XPath 1.0 中，您需要为`df`Java 代码中的默认名称空间定义一个前缀（例如 ），然后使用 eg `/df:application/df:info/@name`。我不熟悉 Java XPath API，因此其他人需要帮助提供有关如何使用 XPathNamespaceContext 或类似设置命名空间的具体代码。

# java - Redis List，弹出不删除

> ID：10882713
> 
> 赞同：16
> 
> 时间：2012-06-04T14:07:30.157
> 
> 标签：java, spring, redis

我在我的 Java 应用程序中使用 RedisTemplate（来自 Spring）。我需要从对应值的元素列表中弹出，但不删除它。有什么建议么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-04T14:57:17.327

您可以使用 range 命令轻松查看项目，而不是弹出项目。

使用 Spring，从 RedisTemplate 实例中，您可以使用 opsForList() 方法获取 ListOperations 实例，然后：

*   listOp.range(key, 0, 0) 将返回第一个（左侧）项目而不弹出它

*   listOp.range(key, -1, -1) 将返回最后一个（右）项目而不弹出它

请参阅以下位置的文档：

[http://static.springsource.org/spring-data/data-keyvalue/docs/1.0.x/api/org/springframework/data/keyvalue/redis/core/RedisTemplate.html](http://static.springsource.org/spring-data/data-keyvalue/docs/1.0.x/api/org/springframework/data/keyvalue/redis/core/RedisTemplate.html)

[http://static.springsource.org/spring-data/data-keyvalue/docs/1.0.x/api/org/springframework/data/keyvalue/redis/core/ListOperations.html](http://static.springsource.org/spring-data/data-keyvalue/docs/1.0.x/api/org/springframework/data/keyvalue/redis/core/ListOperations.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T06:30:14.587

Redis 中是否有任何方法可以在不删除项目的情况下弹出项目但在过期期间保持休眠状态？过期后（并且它没有被删除），这个项目被唤醒并且可以再次弹出。

[http://redis.io/commands/rpoplpush](http://redis.io/commands/rpoplpush)

模式：可靠队列 Redis 通常用作消息传递服务器，以实现对后台作业或其他类型的消息传递任务的处理。一种简单的队列形式通常是在生产者端将值推送到一个列表中，并在消费者端使用 RPOP（使用轮询）或 BRPOP 等待这个值，如果客户端通过阻塞操作得到更好的服务。但是，在这种情况下，获得的队列是不可靠的，因为消息可能会丢失，例如在网络问题或消费者在收到消息后崩溃但仍需处理的情况下。RPOPLPUSH（或阻塞变体的 BRPOPLPUSH）提供了一种避免此问题的方法：消费者获取消息并同时将其推送到处理列表中。一旦消息被处理，它将使用 LREM 命令从处理列表中删除消息。额外的客户端可能会监视处理列表中停留时间过长的项目，并在需要时将那些超时的项目再次推送到队列中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T14:32:40.140

不确定如何使用 RedisTemplate 执行此操作，但要从列表中获取值，您可以使用 redis 命令：

```
LRANGE <LIST> 0 0 
```

获取第一个值，其中 <LIST> 是列表的名称。

RedisTemplate 中有类似的东西吗？

# sharepoint - 将 SPFieldMultiLineText 转换为 HtmlField

> ID：10882718
> 
> 赞同：0
> 
> 时间：2012-06-04T14:08:00.950
> 
> 标签：sharepoint, field

有没有办法使用代码将 SPFieldMultiLineText 转换为 HtmlField？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:27:16.977

`SPFieldMultiLineText`用于显示文本。你试过用`SPFieldMultiLineText.GetFieldValueAsHtml`. 这以 HTML 格式返回字段值，以便直接在页面上呈现该值。找到这个[链接](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfieldmultilinetext.getfieldvalueashtml.aspx)

# linux - GCC如何强制重新定义警告出错

> ID：10882719
> 
> 赞同：2
> 
> 时间：2012-06-04T14:08:01.480
> 
> 标签：linux, gcc

在 gcc 我可以通过选项

```
-Werror= 
```

将特定警告强制为错误。但我找不到需要通过警告的选项

```
redefined [enabled by default] 
```

到一个错误。我应该通过什么选项，所以如果重新定义用户定义的宏，它会强制它出错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:17:31.770

自从

```
g++ -fdiagnostics-show-option -Wunused-macros ./test.cpp 
```

没有提出*直接控制警告发出的标志（诊断）*我只能得出结论，事实上，没有这样的选择。

您可以查询 gcc-devel 列表或提交增强请求。

*或者，您可以查看另一个具有更多选项的预处理器并明确使用它。*

# python - 如何在 Python 2.5.1 的备用安装中启用 OpenSSL 支持？

> ID：10882720
> 
> 赞同：2
> 
> 时间：2012-06-04T14:08:01.800
> 
> 标签：python, openssl, importerror

一些背景信息：
我正在尝试在`python 2.5.1`（服务器编写和测试的版本）中运行服务器程序。该程序的某些功能需要 OpenSSL 库。我从源代码安装了 python 2.5.1，因为我正在运行的 Amazon Linux 实例的 yum 存储库没有我需要的 python 版本。

当我尝试使用 python 2.5.1 运行服务器时，出现以下导入错误：

```
Traceback (most recent call last):  
File "<stdin>", line 1, in <module>  
ImportError: No module named OpenSSL 
```

我知道安装了 OpenSSL 库，因为我可以将它们导入 Python 2.6（yum 安装的 python 版本）。只是我的python 2.5.1安装看不到它们。

我也没有运气通过 yum 安装了 pyOpenSSL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T17:56:44.883

安装的 python 库特定于特定版本。所以你从 yum 安装的 pyOpenSSL 将用于系统 python。您需要为 alt 安装的 2.5 python 安装一个单独的 pyOpenSSL 实例。

如果你使用 python2.5 安装 distutils 那么你会发现你有一个`easy_install-2.5`可以使用的：（`easy_install-2.5 pyopenssl`或类似的）。但请注意，也可能会安装新版本的`easy_install`，覆盖系统 python 的现有版本（如果你有的话）。将 distutils 与现有的包一起使用`easy_install-2.7`（如果它是 python 2.7）。

那有意义吗？基本上，每个 python 都是不同的，需要自己的一组库。相比之下，easy_install 是全局安装的，但每个 python 都有一个特定于版本的 easy_install 副本......！

如果你想避免easy_install的混乱，你可以使用virtualenv。为 2.5 创建一个新环境，启用它，然后您可以在其中安装 pyopenssl（使用环境中的 easy_install）。如果您从未使用过 virtualenv，这听起来可能会更复杂，但如果您给它一点时间来理解它，从长远来看它可能会更好。

# authorization - XACML PEP 如何与上下文交互？

> ID：10882723
> 
> 赞同：2
> 
> 时间：2012-06-04T14:08:13.103
> 
> 标签：authorization, access-control, xacml

我的问题与 XACML 上下文处理程序的角色和目的有关。如果我正确理解 OASIS XACML3.0 规范，PEP 会拦截来自客户端应用程序的对某些资源或访问的请求，然后使用上下文处理程序创建适合 PDP 处理的本机 XACML 上下文对象。在我的设计中，我将上下文处理程序作为一个全局类，其中包含创建请求对象和解析 xml 结果的方法。我设想这个类看起来像这样：

```
public static class ContextHandler
{
    public static bool CreatePolicy(PolicyType policyName)
    {
        // Serialize PolicyType to xml document

    }

    public static PolicyType LoadPolicy(string policyName)
    {
        // 1\. Load policy from db, filesystem...
        // 2\. Hydrate/deserialize into XACML policy object
        // 3\. Return PolicyType object
    }

    public static RequestType BuildRequest(
        Dictionary<string, string> subjects,
        Dictionary<string, string> resources,
        Dictionary<string, string> actions,
        Dictionary<string, string> environment)
    {            
        // 1\. Create AttributesType collection, populate with subjects, resource...
        // 2\. Populate RequestType object
        // 3\. Return Request

    }
} 
```

对象`RequestType`和`AttributesType`其他对象是 XACML 上下文的一部分。

这是上下文处理程序类的正确方法还是我完全错过了上下文处理程序的要点？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:15:45.213

我认为上下文处理程序是 PDP 的一部分。PEP 拦截 SOAP 调用，提取参数值，使用这些值组成标准化请求，并将请求发送到 PDP。PDP 从该请求中提取参数值，通过查询一些 PIP 来查找附加值，将请求与它的策略进行匹配以做出决定，并组成一个标准化的响应发送回 PEP。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-13T17:36:48.747

在完整的 XACML 2.0/3.0 实现中，所有授权过程的真正中心节点或瓶颈是 Context Handler 组件，既不是 PEP，也不是 PDP。[官方文档](http://docs.oasis-open.org/xacml/3.0/xacml-3.0-core-spec-os-en.html#_Toc325047089)中建议的 dataf-flow清楚地表明了这一点。

所以，我认为第一个问题是“*为了简单起见，将 Context Handler 组件粘贴到另一个组件中是一种好方法吗？* ”是的。然后“*如果是，最好的地方是 PEP 还是 PDP？* ”好吧，它认为这取决于您自己的实际情况。

在一般的简单场景中，例如当您不需要 PIP 时，我建议像您一样将上下文处理程序粘贴在 PEP 域中。这有很多原因：

*   你可能有很多 PEP，而不仅仅是一个，所以你应该实现 PEP 和 PDP 之间的解耦
*   每个 PEP 都知道自己特定的授权请求规范，因此它能够将本机请求转换为标准 XACML 请求，反之亦然
*   您获得一个不受特定 PEP 逻辑、PEP 依赖项（即第三方库）和 PEP 代码管理（即授权请求规范的更改、错误修复、新部署等）影响的中央和标准 PDP

在更复杂的场景中，您的授权请求可能不包含 PDP 做出决定所需的所有信息。在这种情况下，PDP 需要向 Context Handler 请求这些信息，并且 Context Handler 必须能够访问 PIP 组件以检索那些用户-资源-环境值。因为 PIP*通常*访问中心化的资源，所以它*通常*是一个中心化的服务。PDP*通常*也是一种集中式服务，因此PDP 和 PIP*通常*在同一个域中。

在这种情况下，您可能很想将上下文处理程序粘贴到 PDP 组件中。但是如果你这样做了，你将需要处理其他问题，因为你在简单的场景中失去了解耦和上面列出的所有特性。此外，遵循 XACML 规范，我希望标准 PDP 能够通过 XACML 消息进行对话，但是，如果您将上下文处理程序直接放在那里，PDP 就真正开始使用 PEP 本地语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T04:47:04.087

是的。我也希望上下文处理程序成为 PDP 的一部分。PEP 可以与您的应用程序一起拦截您的请求并询问 PDP 的授权决定。您可以找到开源 XACML 3.0。[从这里](https://svn.wso2.org/repos/wso2/trunk/commons/balana)称为“Balana”（sun-xacml 的改进）的实现被 WSO2 Identity Server 用作它的 XACML 引擎。从其源代码中，您可以找到详细说明上下文处理程序实现的 ctx 类。此[博客](http://xacmlinfo.com/2012/07/12/what-is-new-with-xacml-3-0/)还将帮助您了解 XACML 3.0 的新事物。

# android - 将 iOS 应用迁移到 Android 机器架构

> ID：10882724
> 
> 赞同：0
> 
> 时间：2012-06-04T14:08:21.743
> 
> 标签：android, ios, types, migration

我正在将 iOS 5.0 应用程序迁移到 Android 2.3.3。

这个 iOS 应用程序有一个使用一些 uint32_t 变量的加密算法。

我在 stdin.h 上找到了这个：

```
#ifndef _UINT32_T
#define _UINT32_T
typedef unsigned int         uint32_t;
#endif /* _UINT32_T */ 
```

`uint32_t`在 Objective-C 中是 a ，所以它在is`unsigned int`中的等价物。这个对吗？`Java``long`

我的问题是：

**int、char、long 等 Objective-C 类型在 Android 上是否具有相同的内存表示？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:12:04.180

不，Android（即 Java）没有无符号变量类型。

因此，如果您需要存储一个 C 无符号 32 位整数，那么您需要在 Java 中使用 long ，但这将是 64 位（这样您就可以存储 uint32 的完整精度）。

相反，任何带符号的表示都将具有相同的内存布局（但我不确定字节顺序，您应该自己检查）。

这是真的，除非您选择在 Android 中使用 C/C++ 并跳过 Java（可以这样做，但无论如何您都需要使用 JNI 将 API 调用桥接到 Java）。

为了解决类似的问题，我找到了一个名为**Javolution**的库，它能够通过保持相同的布局为 C 结构提供良好的实现，看看[这里](http://javolution.org/target/site/apidocs/javolution/io/Struct.html)。但我使用的是结构，而不是普通变量，所以这对你不起作用。

# c# - 地理编码多个地址代码背后

> ID：10882726
> 
> 赞同：2
> 
> 时间：2012-06-04T14:08:24.127
> 
> 标签：c#, geocoding

我正在对 XML 文件中的多个地址进行地理编码，以获取 lat/lng 以在地图上绘制标记。它适用于大约 15 个地址，但今天我检查并发现有 88 个地址，加载页面需要一段时间。发生的情况是用户单击地图页面的链接，浏览器只是旋转，直到所有地址都被地理编码，然后页面加载。我不得不使用 System.Threading.Thread.Sleep(150); 在每次调用谷歌服务之前避免查询限制错误。有什么办法可以让这个加载页面然后加载地址吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:14:21.933

如您所见，Google 的地理编码服务不适用于*大量*请求。事实上，使用该服务进行批量下载或处理批量请求是违反他们[的服务条款的。](https://developers.google.com/maps/terms)

您应该寻找的是没有这么低限制并允许您向 API 提交批量请求的服务。出于公开目的，我为[SmartyStreets](http://smartystreets.com)工作，我们提供了一个名为[LiveAddress](http://smartystreets.com/products/liveaddress-api)的 API 。

听起来您提交的请求与地理编码和绘图的地址一样多。15-100 个请求将需要 1 到 10 或 15 秒，包括网络延迟。我在我的工作中多次看到你的情况，这是一个合理的问题。

我建议做的是让服务器将页面推送到客户端，然后让 Javascript 加载坐标并绘制点。（C.Evenhuis 在他的评论中建议了这一点。）虽然这会更早地加载页面，但它仍然应该旋转某种“加载”动画，这仍然会让用户等待。如果没有升级到 Google 的许可，您的限制将保持不变。

为了克服这个问题，您可以寻找具有一些关键功能的 API：

*   地理分布。这减少了网络延迟并提高了性能。
*   允许您执行批量请求或整体地理编码的服务*条款*
*   每个请求支持多个地址，这意味着您每次页面加载只需提交一个或两个请求，即使是多达 100 或 200 个地址
*   优选地，在绘制地址之前甚至存在验证地址的方法。Google 会估算地址，但不会对其进行验证。
*   缓存/存储值的权限不仅仅是用于优化脚本的临时时间。谷歌的 TOS 不允许您存储结果，除非只是暂时优化运行时的性能。

您可以使用 LiveAddress 作为查找内容的示例，并查看它是否满足您的需求。每个请求最多支持 100 个地址，因此您的等待时间从几秒到几毫秒不等。您基本上可以无限期地存储您下载的结果，并且只会返回实际存在的地址的坐标，或者它会修复不完全正确的地址。如果您对此有任何疑问，请告诉我。

作为一种想法，即使您不希望客户端对地址进行地理编码，您的 C# 代码也可以执行此操作并将所有地址捆绑到一个请求中。

[[这是 GitHub 上的一些示例 C# 代码](https://github.com/smartystreets/LiveAddressSamples/tree/master/c-sharp)]

# android - 如何在不使用 AdMob、AdSense 等的情况下在 Android 应用程序中添加广告横幅

> ID：10882728
> 
> 赞同：1
> 
> 时间：2012-06-04T14:08:32.640
> 
> 标签：android, ads

我只想在我的应用程序中添加一些广告横幅，而不使用 AdMob、AdSense 等广告 SDK。是否可以使用带有自定义代码的自定义横幅？如果有人有示例，请将其发布在答案中。非常非常感谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T14:25:22.217

我很确定您可以制作一个布局来充当您的横幅广告并将其包含在您的其他布局中，然后只需向横幅添加一个 onclick 功能。

或者

我为我的广告使用 admob。Admob 有“内部广告”，您可以在其中免费在您的应用中投放广告。您可以选择让它们以独占方式显示，并使用 admob 来跟踪广告被点击的统计信息以及它们被显示的频率。

[http://support.google.com/admob/bin/answer.py?hl=en&answer=1619751](http://support.google.com/admob/bin/answer.py?hl=en&answer=1619751)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T17:57:47.977

如果您想在您的应用程序中提供来自某些流行产品的横幅，请尝试[http://www.hercle.com 。](http://www.hercle.com)您可以注册为会员，他们将为您提供您可以包含的优惠。当您想向您的应用程序添加优惠时，您可以通过他们的 UI 生成一个 GET 请求，您可以将其添加到您的“点击”功能中，以便用户通过 URL 参数中的会员凭据被定向到产品站点。如果用户最终订购，您将根据每个订单的商定价格或收入百分比获得付款。如果您不想创建图像 URL，它们甚至提供提供图像 URL 的服务。

在网站方面也有完整的 javascript 注入。

我从未在电话应用程序中实现过它们，但功能就在那里，如果你与他们交谈，他们可能会引导你完成整个过程。

# android - Android布局 - 图像将视图推开

> ID：10882732
> 
> 赞同：0
> 
> 时间：2012-06-04T14:08:44.830
> 
> 标签：android, android-layout, layout, imageview

这是我的布局 XML：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/main_screen"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/back"
    android:baselineAligned="false"
    android:gravity="center_vertical"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/bottleImageView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="top"
        android:layout_margin="10dp"
        android:src="@drawable/icon_food_milk" />

    <ImageView
        android:id="@+id/diaperImageView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="top"
        android:layout_margin="10dp"
        android:src="@drawable/icon_store_diaper" />

    <android.opengl.GLSurfaceView
        android:id="@+id/glview"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:layout_marginTop="60dp"
        android:windowIsTranslucent="true" />

</LinearLayout> 
```

在应用程序 onCreate 中，我隐藏了两个图像视图，然后在必要时显示它们。但是当我这样做时，GLSurfaceView 向右移动图像视图的宽度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:15:19.150

这是因为，您使用`LinearLayout`的是`horizontal`方向。当你让你的 imageViews 可见时，这个 viewGroup 中的所有视图都将尝试水平适应。在这种情况下，如果您想进行定位，请使用`RelativeLayout`with`alignParentBottom = true`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:16:39.157

你的父布局是线性布局，它的方向是

```
 android:orientation="horizontal" 
```

这将始终处于水平位置

```
|    |  
view1 view2....
|    | 
```

将其更改为 `android:orientation="vertical"

那么你的观点应该是

```
view 1
view 2
.
. 
```

# ruby-on-rails-3 - resque 不再启动“无法分配请求的地址 - connect(2)”

> ID：10882733
> 
> 赞同：4
> 
> 时间：2012-06-04T14:08:53.467
> 
> 标签：ruby-on-rails-3, connection, redis, ruby-on-rails-3.2, resque

**几天以来，我无法开始 resque，我尝试以各种方式调试此问题，但没有结果！有人知道解决方案吗？亲切的问候**

这是来自以下的日志输出：

```
 bundle exec rake resque:start 
```

日志：

```
bundle exec rake resque:start --trace
** Invoke resque:start (first_time)
** Invoke resque:workers:start (first_time)
** Execute resque:workers:start
rake aborted!
Can't assign requested address - connect(2)

Tasks: TOP => resque:work
(See full trace by running task with --trace)
*** Starting worker dev2.local:4323:critical,high,low
** [09:01:12 2012-06-15] 4323: Registered signals
** Invoke resque:scheduler:start (first_time)
** Execute resque:scheduler:start
rake aborted!
Can't assign requested address - connect(2)

Tasks: TOP => resque:scheduler
(See full trace by running task with --trace)
2012-06-15 21:01:20 Schedule empty! Set Resque.schedule
** Invoke resque:web:start (first_time)
** Execute resque:web:start
/Users/jordan/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/open-uri.rb:346:in `open_http': 500 Internal Server Error (OpenURI::HTTPError) 
```

我试过了：

*   降级redis
*   升级 redis
*   降级 resque + 再次将 resque 升级到最新版本
*   重置所有配置文件并重试
*   所有端口都是默认的，只是默认配置
*   检查默认端口是否关闭
*   看起来真实的 resque gem 代码试图弄清楚它到底发生在哪里

我完全停止了，因为 Resque 是我的应用程序不可或缺的一部分，请知道解决方案的任何人告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T08:42:43.770

出色地...

看来，resque 1.8.2 和 red is 的较新版本之间似乎不兼容。就像@bknoles 建议的那样。

使用

```
gem 'resque', "~> 1.20.0"
gem 'resque-scheduler', :require => 'resque_scheduler' 
```

在 gemfile 中修复了问题

# asp.net - 并排放置 ASP.NET 面板的最佳方式

> ID：10882734
> 
> 赞同：0
> 
> 时间：2012-06-04T14:08:59.910
> 
> 标签：asp.net, css

我正在寻找最好的解决方案，将两个或多个容器并排（左右）放置，而不是放在彼此的顶部。我查看了其他帖子，有人说 add style="float:left;" 没关系，其他人建议添加 style="display:inline;" 这没有任何作用。有更好的建议吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:13:28.753

我经常使用这种风格：

```
 .rightCol
  {
    width: 60%;
    float: right;
    height: 30px;
  }

  .leftCol
  {
    width: 40%;
    float: left;
    height: 30px;
    text-indent: 10px;
  } 
```

定义您自己的尺寸，您就可以开始了！

希望有帮助！

# sql - WHERE 子句返回不正确的记录

> ID：10882735
> 
> 赞同：5
> 
> 时间：2012-06-04T14:09:03.497
> 
> 标签：sql, sql-server, tsql, sql-server-2005, datetime

我正在使用这个

```
DECLARE @Year_Filter_Start AS DATETIME
SET @Year_Filter_Start = DATEADD( dd, -1, DATEADD( yy, DATEDIFF( yy, 0, GetDate() ), 0 ) )
DECLARE @Year_Filter_End AS DATETIME
SET @Year_Filter_End = GetDate()

INSERT INTO TABLE
  ( blah )
SELECT blah
  FROM OTHER_TABLE
 WHERE ACTISSUEDATE IS NULL 
    OR ACTSTARTDATE BETWEEN @Year_Filter_Start AND @Year_Filter_End 
```

它返回 ACTISSUEDATE 不为空且 ACTSTARTDATE 不在年初和今天之间的记录。@Year_Filter_Start 应该是今年年初，@Year_Filter_End 应该是今天。

例如：

ACTSTARTDATE 为 2010-08-02 且 ACTISSUEDATE 为 2011-03-15 的记录

或者 ACTSTARTDATE 是 2009-05-18 并且 ACTISSUEDATE 是 2009-09-06

这个说法有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T02:19:05.287

尝试以下，我认为你需要更多的括号：

```
WHERE ((ACTISSUEDATE IS NULL)  
    OR (ACTSTARTDATE BETWEEN @Year_Filter_Start AND @Year_Filter_End)) 
```

引擎将其视为您拥有的两个语句。你需要做一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:56:56.063

你的 Where 子句应该是

WHERE ACTISSUEDATE 为 NULL 或（ACTSTARTDATE BETWEEN @Year_Filter_Start AND @Year_Filter_End）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T08:14:29.943

你应该在哪里查询

```
WHERE ACTISSUEDATE is null 
    OR (ACTISSUEDATE is not null 
    and ACTSTARTDATE BETWEEN @Year_Filter_Start AND @Year_Filter_End) 
```

希望这有效...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T13:30:19.897

它可能会奇怪地处理 NULLS（没有样本数据很难判断）。

我会尝试改变：

```
WHERE ACTISSUEDATE IS NULL 
OR ACTSTARTDATE BETWEEN @Year_Filter_Start AND @Year_Filter_End 
```

至：

```
WHERE ISNULL(ACTISSUEDATE, @Year_Filter_End) BETWEEN @Year_Filter_Start AND @Year_Filter_End 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T19:47:20.247

我看到你用 sql server 2005 标记了你的问题。鉴于我想指出 BETWEEN 键是包含端点的。因此，如果您只想要年初，您应该将日期计算更改为

```
 DATEADD(yy, DATEDIFF(yy, 0, GetDate()), 0) 
```

[http://msdn.microsoft.com/en-us/library/ms187922.aspx](http://msdn.microsoft.com/en-us/library/ms187922.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-21T12:28:12.023

首先，您希望两个条件都为真还是其中之一为真。其次，它为您提供 ACTISSUEDATE 不为空的记录，因为这些记录在年初和今天之间具有 ACTSTARTDATE。那些 ACTSTARTDATE 不在年初和今天之间的记录的 ACTISSUEDATE 为 NULL。

更改您的位置 AND 而不是 OR

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-21T13:11:11.170

当两个条件之一是 时，您的`where`子句将返回一个值`True`。现在，在您的示例中，您说 `ACTISSUEDATE`的是 not null，因此即使`ACTSTARTDATE`不在您的日期之间，它也会返回该值。

要同时满足这两个条件，请将 WHERE 子句中的 OR 更改为 AND。

# c# - 使用 WCF 向客户端触发事件

> ID：10882736
> 
> 赞同：8
> 
> 时间：2012-06-04T14:09:03.630
> 
> 标签：c#, wcf

我知道那里有关于 WCF 回调和事件的教程，但我无法让它们实际工作，或者它们太复杂了。我是一个真正的初学者，所以我很想听听是否有人知道任何针对我目前特别想弄清楚的内容的可靠初学者教程。如果我使用了错误的术语，请原谅我（请纠正我），就像我说我是初学者一样。

**问题：**

![在此处输入图像描述](../Images/b1aa574275aadbe67bcc8ff611473b56.png)

它可能看起来比实际上更复杂。基本上我想要完成的是：

1.  具有一些本地内存（假设是 5 个整数的数组）并运行 WCF 服务的主机。它将侦听来自客户端的查询，并在这些整数之一发生更改时（从外部源，例如通过命令提示符和 Set() 的用户输入）向客户端触发更新（事件？）。
2.  可以进行直接查询以返回这五个整数之一或订阅主机数组的特定索引的客户端。

**我可以做什么：**

我可以建立连接，但我的服务仅限于独立功能。客户端可以进行“查询”，但仅限于远程函数调用（例如“add”，其中所有参数与函数一起传递并在内部完成处理）。

**我想弄清楚的：**

1.  如何从服务合同函数访问主机内存中保存的一些变量？例如，如何从客户端 GetInt() 调用一个方法，该方法将简单地返回存储在主机应用程序内存中的内容？
2.  如何从主机向客户端推送“消息”？例如，在主机中调用 TellClient(int x)，它会调用客户端的某个函数？如果不在双方都运行服务，这可能吗？

***TLDR：***

主机：服务 <-> 客户端。有没有办法在客户端调用任何函数（没有轮询或查询）的情况下将数据（只是一个 int）推送到客户端？有没有办法在不使用静态成员的情况下将 WCF 服务访问变量存储在主机应用程序的实例中？这可以通过简单的方式完成吗？

**感谢您的帮助和时间，我知道我写了一本书。** 如果有人知道任何不错的教程，请指出我。 **但是请 - 不要将我指向 Add(int x, int y) 示例，其中客户端只是在主机上调用 add 并返回结果**- 我已经这样做了几次，但它并没有帮助我掌握WCF 的真正功能。在这一点上，我真的不想完成任何严肃的事情，我真的想保持简单，这样我就可以了解 WCF 可以做什么，而且我没有发现文档很有帮助。再次感谢大家。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T14:40:07.653

WCF一般用于请求回复的方式，客户端发出请求；和服务器回复。您要实现的是“推拉式”服务；或者在 Microsoft 术语中是双工服务。

在双工服务中，客户端只需连接到服务，服务就会将它们注册到某个内部列表中。每当发生事件（或其他事情）时，它都会向注册的客户发送消息。在您的问题的上下文中，WCF 的关键术语是“双工服务”（您可以在谷歌上找到很多结果）。您可以参考以下教程；[msdn](http://msdn.microsoft.com/en-us/library/ms731064.aspx)或 [codeproject](http://www.codeproject.com/Articles/34460/WCF-Duplex-Reentrant-Services)

对于你问题的第二部分，答案是肯定的。但这并不是那么简单。您需要编写一些“wcf 行为”，例如 an`IInstanceProvider`可以帮助您。对于所有请求，您可以自己创建服务实例，并将所需的参数注入到服务实例中。参考以下内容可能会有所帮助：[stackoverflow](https://stackoverflow.com/questions/2454850/how-do-i-pass-values-to-the-constructor-on-my-wcf-service)或[msdn](http://orand.blogspot.com/2006/10/wcf-service-dependency-injection.html)。

这个问题有点宽泛，因此我不能 100% 确定这是否是直接答案。但至少使用提供的关键字，您可能会找到正确的方向。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T14:37:57.367

Have you tried this article yet? [http://msdn.microsoft.com/en-us/magazine/cc163537.aspx#S6](http://msdn.microsoft.com/en-us/magazine/cc163537.aspx#S6). I thought it was a decent explanation on callbacks. It discusses a publish/subscribe framework which is a solution to your "no polling or queries" requirement.

# php - CherryPy & php：无法从 pickle 加载数据类，但可以从服务器上的 ssh 工作

> ID：10882737
> 
> 赞同：0
> 
> 时间：2012-06-04T14:09:09.267
> 
> 标签：php, json, class, pickle, cherrypy

我正在使用 CherryPy 生成和解析 php 网页的数据，但出现无法在本地或通过 SSH 复制的错误（登录到服务器并从提示符运行 python 脚本可以正常工作）。

当前的粘性错误消息是：

```
File "modules/flex.py", line 335, in convert
    ref_data = cPickle.load(f2)
AttributeError: 'module' object has no attribute 'Data' 
```

另一个泡菜在前一行中加载良好，两个泡菜都表示具有各种字典和列表列表的类对象。但是其中一个有效，另一个无效。

一般来说，对于 CherryPy，隔离错误消息的最佳方法是什么？我可以从它的 URL 运行 /cp/ 函数，并且可以查看网络服务器错误日志，但即使这两个也不总是给出错误消息（或正确的错误）。

另一方面，在 php 中，我使用此代码来检索表示 python 列表列表的 json 对象：

```
$obj = file_get_contents($senddata);
$sue = json_decode($obj); 
```

这是可以接受的方法吗？从 python 数据结构传递和生成 php 数组的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:46:48.113

我认为你有不同的问题：

1.  您的代码不起作用，因为`sys.path`当您通过 ssh 和正在运行以服务 webapp 的 python 连接时，python 解释器中的 PYTHONPATH ( ) 不一样。我说这是因为您要反序列化来自模块的数据，该模块确实存在（否则将是`ImportError`）但没有`class`声明`Data`，可能与该模块同名的文件位于同一目录中并试图`class Data` 在该文件中找到。当你序列化你不保存类声明，只是如何重建该对象。

2.  “正确的错误”是什么意思？，当环境是“生产”时，CherryPy 默认记录最后一个错误的回溯，您当然可以通过[自定义错误处理](http://docs.cherrypy.org/stable/refman/_cperror.html)来更改默认行为。

3.  您应该坚持使用 JSON 进行语言之间的通信，它非常标准且高效，可以在双方进行解析。

我希望这会有所帮助。

# ruby-on-rails - 一起使用 Devise/Cancan/Rolify

> ID：10882741
> 
> 赞同：6
> 
> 时间：2012-06-04T14:09:35.070
> 
> 标签：ruby-on-rails, authentication, devise, authorization, cancan

我正在尝试建立一个授权/身份验证系统，但我很困惑，所以我有几个问题：

1.  在很多教程中，人们建立了用户/角色 HABTM 关系。我知道这允许每个用户拥有多个角色，但是如果您希望每个用户只有一个角色，这是必要的吗？如果我想为“活动”和“非活动”用户提供选项，这些应该是角色还是其他？
2.  在 Cancan wiki 中，它说如果您希望一个用户拥有一个角色，您应该将其设为一个属性，然后使用“can :manage, :all if user.role == "admin"”，但不是这样危险，因为每次“admin”只是一个字符串？这有关系吗？有什么更好的方法来处理这个问题？

我已尽力阅读所有相关文档，并从本教程开始

[http://railsapps.github.com/tutorial-rails-bootstrap-devise-cancan.html](http://railsapps.github.com/tutorial-rails-bootstrap-devise-cancan.html)

虽然我也读过 [http://starqle.com/articles/rails-3-authentication-and-authorization-with-devise-and-cancan-part-1/](http://starqle.com/articles/rails-3-authentication-and-authorization-with-devise-and-cancan-part-1/)和 tonyamoyal.com/2010/09/29/rails -authentication-with-devise-and-cancan-part-2-restful-resources-for-administrators/

我真的无法让它按照我想要的方式工作。我该怎么做呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T21:01:04.477

**1.不需要多个角色或者一个角色表**

CanCan 与您如何在应用程序中定义角色无关。您可以在用户模型中轻松拥有一个角色字段。

至于“活跃”和“非活跃”用户，您有两种选择。您可以拥有该状态的字段，或者您可以拥有“非活动”角色并认为任何其他角色“活动”。这取决于您所说的“活动”以及您在应用程序中如何使用该信息。

**2\. 将用户的角色存储在字符串中没有任何问题。**

角色存储为字符串这一事实并没有降低它的安全性。但是，您应该使用[attr_protected 来防止大量分配](http://guides.rubyonrails.org/security.html#mass-assignment)用户角色。

```
attr_protected :role 
```

这样，用户将无法更新自己的角色。

# html - 如何将两个跨度对齐在一起？

> ID：10882744
> 
> 赞同：0
> 
> 时间：2012-06-04T14:09:41.483
> 
> 标签：html, css

我在将两个跨度对齐在一起时遇到问题。第二个跨度开始时略低于第一个跨度，这导致跨度未对齐。

本质上，我试图将 .cbtnSymbol 和 .cbtnLabel 对齐在一起，以便它们从相同的高度开始。

这是一个测试用例：http: [//jsfiddle.net/DwGEa/](http://jsfiddle.net/DwGEa/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:14:06.350

尝试`float`-s `span`- [http://jsfiddle.net/DwGEa/4/](http://jsfiddle.net/DwGEa/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:17:16.707

添加 line-height 和 vertical-align 似乎有帮助，但我不能 100% 确定你所追求的最终结果。

```
<div class="cmenu">
        <div class="cbtn add"><span class="cbtnSymbol">+</span><span class="cbtnLabel" style="line-height: 20px; vertical-align: top;">Add</span></div>
        <div class="cbtn add"><span class="cbtnSymbol">-</span><span class="cbtnLabel" style="line-height: 20px; vertical-align: top;">Delete</span></div>
</div> 
```

这是修改后的 jsFiddle：http: [//jsfiddle.net/DwGEa/11/](http://jsfiddle.net/DwGEa/11/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T14:21:01.820

给你：http: [//jsfiddle.net/DwGEa/19/](http://jsfiddle.net/DwGEa/19/)

只需添加`line-height: 30px; vertical-align:middle;`到`.cbtnLabel`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T14:58:05.303

将最后四个 CSS 属性另外添加到您的标签标签 CSS

```
.cbtnLabel {
     padding: 0 0 0 10px;
     font-size: 8px;
     height: 30px;
     display: inline-block;
     display: -moz-inline-stack;
     vertical-align:top;
     zoom: 1;
     *display: inline;
}​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T17:57:03.803

我不确定您对此有何感受，但看起来您已经将 div 设置为表格。那么尝试这样的事情怎么样：

```
<table class="cmenu">
    <tr class="cbtn add">
        <td class="cbtnSymbol">+</td>
        <td class="cbtnLabel">Add</td>
    </tr>
    <tr class="cbtn add">
        <td class="cbtnSymbol">-</td>
        <td class="cbtnLabel">Delete</td>
    </tr>        
</table> 
```

通过这样做，您可以为了简单而摆脱一些 CSS。（例如：你不再需要 display:inline-block 了）

**演示** [http://jsfiddle.net/DwGEa/37/](http://jsfiddle.net/DwGEa/37/)

# php - $_SERVER['HTTP_HOST'] 只显示没有 www 的域名

> ID：10882746
> 
> 赞同：-3
> 
> 时间：2012-06-04T14:09:48.457
> 
> 标签：php, apache

即使在 url 我写“www.”，$_SERVER['HTTP_HOST'] 也只有 domain.com 没有“www.”

因此，我无法从非 www 重定向到 www。如何解决这个问题？

```
 ["HTTP_HOST"]=>
      string(8) "ca-fi.ru"
      ["HTTP_COOKIE"]=>
      string(120) "d7b6b86aae18e551749a9da9d54f3daf=floar2lr37318dc76ask49bii5; 849c6485c12558d081c065b4d94a566b=d9iqj8s6oqo41kipg3qaefq497"
      ["HTTP_USER_AGENT"]=>
      string(99) "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.52 Safari/536.5"

      ["PATH"]=>
      string(28) "/usr/local/bin:/usr/bin:/bin"
      ["SERVER_SIGNATURE"]=>
      string(69) "
    Apache/2.2.20 (Ubuntu) Server at ca-fi.ru Port 80

    "
      ["SERVER_SOFTWARE"]=>
      string(22) "Apache/2.2.20 (Ubuntu)"
      ["SERVER_NAME"]=>
      string(8) "ca-fi.ru"
      ["SERVER_ADDR"]=>
      string(13) "192.168.10.12"
      ["SERVER_PORT"]=>
      string(2) "80"
      ["REMOTE_ADDR"]=>
      string(12) "192.168.10.1"
      ["DOCUMENT_ROOT"]=>
      string(8) "/var/www"

      ["REQUEST_METHOD"]=>
      string(3) "GET"

      ["REQUEST_URI"]=>
      string(1) "/"
      ["SCRIPT_NAME"]=>
      string(10) "/index.php"
      ["PHP_SELF"]=>
      string(10) "/index.php"
      ["REQUEST_TIME"]=>
      int(1338819407) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:14:17.287

如果您只想从非 www 重定向到 www，我建议不要使用 PHP 的[header()](http://php.net/manual/en/function.header.php)函数（我假设您正在使用），而是使用[mod rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)。

在您的根目录中创建一个`.htaccess`包含以下内容的文件：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^example.com [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [L,R=301] 
```

# drop-down-menu - EntityManager 导致 nullPointerException。使用 Seam 和 JBOSS

> ID：10882753
> 
> 赞同：1
> 
> 时间：2012-06-04T14:10:16.397
> 
> 标签：drop-down-menu, jboss, nullpointerexception, seam, converter

我正在使用 SEAM 和 JBOSS 制作一个基于 Web 的应用程序。我正在尝试为下拉框制作转换器，但是每当我在转换器类中使用 entityManager 时，我都会收到 NullPointerException。我花了几天时间试图找到这个帮助，任何帮助都将不胜感激

这是我的一些代码。如果还需要，请告诉我：

转换器类：

```
package edu.uwrf.iss.flowershop.entity;

import javax.faces.application.FacesMessage;
import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.convert.Converter;
import javax.faces.convert.ConverterException;
import javax.persistence.EntityManager;
import javax.persistence.Query;
import javax.servlet.ServletContext;
import javax.swing.JOptionPane;

import org.jboss.seam.annotations.In;
import org.jboss.seam.annotations.Scope;

public class EmpConverter implements Converter {

@In
private EntityManager entityManager;

public Object getAsObject(FacesContext arg0, UIComponent arg1, String arg2) {
    int num = Integer.parseInt(arg2);
    entityManager.refresh(getClass());
    Query query = entityManager.createQuery("SELECT e FROM FlowerStoreDelivery WHERE e.deliveryId LIKE :num")
                    .setParameter("num", num);
    JOptionPane.showMessageDialog(null, query.getResultList());
    FlowerStoreEmployee emp = entityManager.find(FlowerStoreEmployee.class, arg2);
    return emp;
}

public String getAsString(FacesContext arg0, UIComponent arg1, Object arg2) throws ConverterException {

return Integer.toString(((FlowerStoreEmployee)arg2).getEmployeeId());
}
} 
```

这是使用转换器的地方：

```
 <my:dropdown label="Employee ID" id="emp" value="#{deliveryPort.emp}"required="false">
                    <f:converter converterId="EmpConverter" />
                    <s:selectItems value="#{deliveryPort.empList}" var="emp" label="#{emp.employeeId} #{ emp.nameFirst}"/> 
                </my:dropdown> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:35:13.797

您不能在非Seam 组件上使用@In。

你能做的是

```
public Object getAsObject(FacesContext arg0, UIComponent arg1, String arg2) {
 EntityManager entityManager = (EntityManager) Component.getInstance("entityManager");
  ...
  ...
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-07T15:12:42.677

我已经弄清楚了问题所在。我的 components.xml 文件中缺少一行代码。谢谢大家的回复。

# asp.net - 如何使用电子邮件链接中的现有浏览器窗口？

> ID：10882755
> 
> 赞同：0
> 
> 时间：2012-06-04T14:10:18.380
> 
> 标签：asp.net, html

我正在尝试开发注册/验证电子邮件流程。用户将

1.  从名为 /Signup.aspx 的网页注册并输入他们的电子邮件地址（此页面告诉他们检查他们的电子邮件。
2.  他们将收到一封“验证您的电子邮件地址”电子邮件
3.  他们将单击该电子邮件中的链接，该链接会将他们发送到 /Verified.aspx

这可行，但是用户最终打开了两个浏览器。理想情况下，当用户单击电子邮件链接时，我希望 Verified.aspx 页面在 Signup.aspx 所在的同一窗口中打开。

我试过使用，但它仍然在不同的窗口中打开

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:11:41.523

你不能。无法从通过电子邮件发送的“页面”中引用特定窗口。

唯一可以引用特定窗口的时间是该窗口是从与指向它的链接相同的站点打开的。

# ios - Coreplot：设置全局范围的长度不起作用

> ID：10882756
> 
> 赞同：2
> 
> 时间：2012-06-04T14:10:19.590
> 
> 标签：ios, core-plot

首先，我有一个图表（Coreplot Linechart）。我已经设置了图形的 defaultPlotspace 的 x 范围和 y 范围。

```
- (void) setUpXRangeForPlotspace:(CPTXYPlotSpace *) plotSpace {

int rangeLength = [self xRangeLength];
plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(- 0.5f)    length:CPTDecimalFromFloat(rangeLength + 1.0)];

}

- (void) setUpYRangeForPlotspace:(CPTXYPlotSpace *) plotSpace {

    float maxValue = [self maximumYValue];

    // length = maxvalue + (10% of maxvalue);
    plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0.0f)     length:CPTDecimalFromFloat(maxValue + (maxValue/10.0))];
} 
```

现在我的任务是根据用户交互沿 x 轴显示图形的一部分（区域）。为此，我正在更改 plotspace 的 globalXRange。

我拿了两个文本字段，从中获取位置和长度。**btnAction：**按下按钮时触发方法。

```
- (void) btnAction:(id) sender {

    float txt1fl = [txt1.text floatValue];
    float txt2fl = [txt2.text floatValue];

    NSLog(@"txt1fl : %f, txt2fl : %f",txt1fl,txt2fl);

    CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;

    [plotSpace setGlobalXRange:[CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(txt1fl)  length:(CPTDecimalFromFloat(txt2fl))]];
    [plotSpace setGlobalYRange:plotSpace.globalYRange];

    NSLog(@"Graph Global x:%f   length:%f",CPTDecimalFloatValue(plotSpace.globalXRange.location),CPTDecimalFloatValue(plotSpace.globalXRange.length));

} 
```

当我更改范围的**位置**并保持这样的**长度**时，图表显示了适当的区域。也就是说，它正在滚动到数字提到的位置。

即使我将 globalXRange 的**长度**从**较高**的值更改为**较低**的值 - 例如，将长度从 5.0 更改为 3.0 - 图表也显示了适当的部分。也就是说，它在更大的图片中显示了一个较小的区域。

但是，当我将 globalXRange 的长度从**较低**更改为**较高**时- 例如，将长度 3.0 更改为 5.0 - 图形的范围并没有增加。

设置范围后，我使用 NSLog 检查 globalXRange 的长度是否已更改。令人惊讶的是，长度根据 NSLog 发生了变化，但从视觉上看，图形并没有移动，也没有改变它的范围。

我无法找出解决方案。请帮我解决一下这个。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T01:07:44.413

`globalXRange`和`globalYRange`使用内置的用户交互功能限制绘图空间可以滚动和缩放的量。使用`xRange`和`yRange`控制绘图的可见部分。

# php - 使用php在pdf文件中搜索字符串

> ID：10882757
> 
> 赞同：1
> 
> 时间：2012-06-04T14:10:22.263
> 
> 标签：php, pdf, string-search

我想以某种方式从 pdf 文件中搜索字符串`strstr()`。但是当一个 pdf 被作为纯文本阅读时，它会给你一个无法理解的垃圾。我该怎么做？

也许**pdflib**有一些解决方案，但我的托管服务提供商并没有帮助我安装它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-04T20:06:10.870

使用上一个响应中的链接，我稍微更改了代码以满足我的需求，即搜索和替换，文章中的函数不需要其他库，但您确实需要替换部分的 FPDI 库。

现在这段代码也不完美，但对于任何搜索类似内容的人来说都是一个好的开始。

该脚本的主要问题是新数据被原始 pdf 模板的一种图像覆盖，这意味着如果您尝试用 5 行文本替换 2 行文本，它不会插入文本，而是覆盖2 行再加上 3 行。这也意味着您尝试覆盖的任何内容都必须具有匹配的背景。

但是对于一些基本需求，例如有一个很好的商业提案或像模板一样的 pdf 报价，这个脚本可以覆盖日期或客户名称，所有这些都在 php 应用程序中。

```
function decodeAsciiHex($input) {
    $output = "";

    $isOdd = true;
    $isComment = false;

    for($i = 0, $codeHigh = -1; $i < strlen($input) && $input[$i] != '>'; $i++) {
        $c = $input[$i];

        if($isComment) {
            if ($c == '\r' || $c == '\n')
                $isComment = false;
            continue;
        }

        switch($c) {
            case '\0': case '\t': case '\r': case '\f': case '\n': case ' ': break;
            case '%': 
                $isComment = true;
            break;

            default:
                $code = hexdec($c);
                if($code === 0 && $c != '0')
                    return "";

                if($isOdd)
                    $codeHigh = $code;
                else
                    $output .= chr($codeHigh * 16 + $code);

                $isOdd = !$isOdd;
            break;
        }
    }

    if($input[$i] != '>')
        return "";

    if($isOdd)
        $output .= chr($codeHigh * 16);

    return $output;
}

function decodeAscii85($input) {
    $output = "";

    $isComment = false;
    $ords = array();

    for($i = 0, $state = 0; $i < strlen($input) && $input[$i] != '~'; $i++) {
        $c = $input[$i];

        if($isComment) {
            if ($c == '\r' || $c == '\n')
                $isComment = false;
            continue;
        }

        if ($c == '\0' || $c == '\t' || $c == '\r' || $c == '\f' || $c == '\n' || $c == ' ')
            continue;
        if ($c == '%') {
            $isComment = true;
            continue;
        }
        if ($c == 'z' && $state === 0) {
            $output .= str_repeat(chr(0), 4);
            continue;
        }
        if ($c < '!' || $c > 'u')
            return "";

        $code = ord($input[$i]) & 0xff;
        $ords[$state++] = $code - ord('!');

        if ($state == 5) {
            $state = 0;
            for ($sum = 0, $j = 0; $j < 5; $j++)
                $sum = $sum * 85 + $ords[$j];
            for ($j = 3; $j >= 0; $j--)
                $output .= chr($sum >> ($j * 8));
        }
    }
    if ($state === 1)
        return "";
    elseif ($state > 1) {
        for ($i = 0, $sum = 0; $i < $state; $i++)
            $sum += ($ords[$i] + ($i == $state - 1)) * pow(85, 4 - $i);
        for ($i = 0; $i < $state - 1; $i++)
            $ouput .= chr($sum >> ((3 - $i) * 8));
    }

    return $output;
}

function decodeFlate($input) {
    return @gzuncompress($input);
}

function getObjectOptions($object) {
    $options = array();
    if (preg_match("#<<(.*)>>#ismU", $object, $options)) {
        $options = explode("/", $options[1]);
        @array_shift($options);

        $o = array();
        for ($j = 0; $j < @count($options); $j++) {
            $options[$j] = preg_replace("#\s+#", " ", trim($options[$j]));
            if (strpos($options[$j], " ") !== false) {
                $parts = explode(" ", $options[$j]);
                $o[$parts[0]] = $parts[1];
            } else
                $o[$options[$j]] = true;
        }
        $options = $o;
        unset($o);
    }

    return $options;
}
function getDecodedStream($stream, $options) {
    $data = "";
    if (empty($options["Filter"]))
        $data = $stream;
    else {
        $length = !empty($options["Length"]) ? $options["Length"] : strlen($stream);
        $_stream = substr($stream, 0, $length);

        foreach ($options as $key => $value) {
            if ($key == "ASCIIHexDecode")
                $_stream = decodeAsciiHex($_stream);
            if ($key == "ASCII85Decode")
                $_stream = decodeAscii85($_stream);
            if ($key == "FlateDecode")
                $_stream = decodeFlate($_stream);
        }
        $data = $_stream;
    }
    return $data;
}
function getDirtyTexts(&$texts, $textContainers) {
    for ($j = 0; $j < count($textContainers); $j++) {
        if (preg_match_all("#\[(.*)\]\s*TJ#ismU", $textContainers[$j], $parts))
            $texts = array_merge($texts, @$parts[1]);
        elseif(preg_match_all("#Td\s*(\(.*\))\s*Tj#ismU", $textContainers[$j], $parts))
            $texts = array_merge($texts, @$parts[1]);
    }
}
function getCharTransformations(&$transformations, $stream) {
    preg_match_all("#([0-9]+)\s+beginbfchar(.*)endbfchar#ismU", $stream, $chars, PREG_SET_ORDER);
    preg_match_all("#([0-9]+)\s+beginbfrange(.*)endbfrange#ismU", $stream, $ranges, PREG_SET_ORDER);

    for ($j = 0; $j < count($chars); $j++) {
        $count = $chars[$j][1];
        $current = explode("\n", trim($chars[$j][2]));
        for ($k = 0; $k < $count && $k < count($current); $k++) {
            if (preg_match("#<([0-9a-f]{2,4})>\s+<([0-9a-f]{4,512})>#is", trim($current[$k]), $map))
                $transformations[str_pad($map[1], 4, "0")] = $map[2];
        }
    }
    for ($j = 0; $j < count($ranges); $j++) {
        $count = $ranges[$j][1];
        $current = explode("\n", trim($ranges[$j][2]));
        for ($k = 0; $k < $count && $k < count($current); $k++) {
            if (preg_match("#<([0-9a-f]{4})>\s+<([0-9a-f]{4})>\s+<([0-9a-f]{4})>#is", trim($current[$k]), $map)) {
                $from = hexdec($map[1]);
                $to = hexdec($map[2]);
                $_from = hexdec($map[3]);

                for ($m = $from, $n = 0; $m <= $to; $m++, $n++)
                    $transformations[sprintf("%04X", $m)] = sprintf("%04X", $_from + $n);
            } elseif (preg_match("#<([0-9a-f]{4})>\s+<([0-9a-f]{4})>\s+\[(.*)\]#ismU", trim($current[$k]), $map)) {
                $from = hexdec($map[1]);
                $to = hexdec($map[2]);
                $parts = preg_split("#\s+#", trim($map[3]));

                for ($m = $from, $n = 0; $m <= $to && $n < count($parts); $m++, $n++)
                    $transformations[sprintf("%04X", $m)] = sprintf("%04X", hexdec($parts[$n]));
            }
        }
    }
}
function getTextUsingTransformations($texts, $transformations) {
    $document = "";
    for ($i = 0; $i < count($texts); $i++) {
        $isHex = false;
        $isPlain = false;

        $hex = "";
        $plain = "";
        for ($j = 0; $j < strlen($texts[$i]); $j++) {
            $c = $texts[$i][$j];
            switch($c) {
                case "<":
                    $hex = "";
                    $isHex = true;
                break;
                case ">":
                    $hexs = str_split($hex, 4);
                    for ($k = 0; $k < count($hexs); $k++) {
                        $chex = str_pad($hexs[$k], 4, "0");
                        if (isset($transformations[$chex]))
                            $chex = $transformations[$chex];
                        $document .= html_entity_decode("&#x".$chex.";");
                    }
                    $isHex = false;
                break;
                case "(":
                    $plain = "";
                    $isPlain = true;
                break;
                case ")":
                    $document .= $plain;
                    $isPlain = false;
                break;
                case "\\":
                    $c2 = $texts[$i][$j + 1];
                    if (in_array($c2, array("\\", "(", ")"))) $plain .= $c2;
                    elseif ($c2 == "n") $plain .= '\n';
                    elseif ($c2 == "r") $plain .= '\r';
                    elseif ($c2 == "t") $plain .= '\t';
                    elseif ($c2 == "b") $plain .= '\b';
                    elseif ($c2 == "f") $plain .= '\f';
                    elseif ($c2 >= '0' && $c2 <= '9') {
                        $oct = preg_replace("#[^0-9]#", "", substr($texts[$i], $j + 1, 3));
                        $j += strlen($oct) - 1;
                        $plain .= html_entity_decode("&#".octdec($oct).";");
                    }
                    $j++;
                break;

                default:
                    if ($isHex)
                        $hex .= $c;
                    if ($isPlain)
                        $plain .= $c;
                break;
            }
        }
        $document .= "\n";
    }

    return $document;
}

function pdf2text($filename, $search) {
    $pageNumber = 1;
    $infile = @file_get_contents($filename, FILE_BINARY);
    if (empty($infile))
        return "";

    $transformations = array();    

    preg_match_all("#obj(.*)endobj#ismU", $infile, $objects);
    $objects = @$objects[1];

    for ($i = 0; $i < count($objects); $i++) {
        $texts = array();
        $currentObject = $objects[$i];

        if (preg_match("#stream(.*)endstream#ismU", $currentObject, $stream)) {
            $stream = ltrim($stream[1]);

            $options = getObjectOptions($currentObject);
            if (!(empty($options["Length1"]) && empty($options["Type"]) && empty($options["Subtype"])))
                continue;

            $data = getDecodedStream($stream, $options); 
            if (strlen($data)) {
                if (preg_match_all("#BT(.*)ET#ismU", $data, $textContainers)) {
                    //print_r($textContainers);
                    $textContainers = @$textContainers[1];
                    //print_r($textContainers);print "<br><br>";
                    getDirtyTexts($texts, $textContainers);
                    //print_r($textContainers);
                }else{
                    getCharTransformations($transformations, $data);
                }
            }

            //print "HOJA = ".$pageNumber;
            //$textTransformed = getTextUsingTransformations($texts, $transformations);
            //print $textTransformed."<br><br><br>";
            //print_r($currentObject);
            //print_r($options);
            //print_r($stream);
            //print_r($data);
            //print ($textContainers[0])."<br>";
            //print_r($textContainers);
            //print_r($texts);            
            //print "<br><br><br>";

            $m = array();            
            foreach ($texts as $key => $value) {
                $prearray = array($value);
                //print_r($textContainers[$key]);
                preg_match("/\/\F[0-9]\s[0-9][0-9]/",$textContainers[$key],$m);
                if(!empty($m)){
                    $fontSize = array();
                    $fontSize = explode(" ", $m[0]);
                    $fontSize = array_filter($fontSize);
                    //print_r($fontSize);
                }

                $textTransformed = getTextUsingTransformations($prearray, $transformations);
                //print $textTransformed."<br><br><br>";
                $pos = strpos($textTransformed, $search);
                if($pos !== false){
                    $data = NULL;
                    $pos = strpos($textContainers[$key], "Tm");
                    if($pos !== false){
                        $data = substr($textContainers[$key], 0, $pos);
                    }else{
                        $pos = strpos($textContainers[$key], "Td");
                        if($pos !== false){
                            $data = substr($textContainers[$key], 0, $pos);
                        }
                    }
                    if(!empty($data)){
                        $dataArray = array();
                        $dataArray = explode(" ", $data);
                        $dataArray = array_filter($dataArray);

                        $returnArray = array();
                        $returnArray['keyword'] = $search;
                        $returnArray['page'] = $pageNumber;
                        $returnArray['font'] = $fontSize[1];
                        $returnArray['x'] = $dataArray[count($dataArray)];
                        $returnArray['y'] = $dataArray[count($dataArray)+1];                        

                        return $returnArray;
                    }
                }
            }
            $pageNumber++;
        }
    }

    //return getTextUsingTransformations($texts, $transformations);
    return false;
} 
```

现在的用法：

我所做的是保存 pdf 模板文件，其中包含一些将被覆盖的“关键字”，例如，为了更改模板 PDF 上的日期，我将关键字 @DATE 放在我想要的位置，等等其他关键字。

`pdf2text`如果在 pdf 中找不到您查找的搜索词，则修改后的函数将返回 false。如果找到它，它会返回一个数组，其中包含搜索的关键字、找到它的页面、单词的字体大小以及 X 和 Y 值。

```
 // initiate FPDI
$pdf = new FPDI('P', 'pt', 'A4');
$pdf->setPrintHeader(false);

// set the source file
$pdffile = "template.pdf";
$numberOfPages = $pdf->setSourceFile($pdffile);

$theReturnedFecha = pdf2text($pdffile, "@DATE");
$theReturnedCliente = pdf2text($pdffile, "@CLIENT");

// import all pages
for($i = 1; $i <= $numberOfPages; $i++){
    $pdf->AddPage();
    $tplIdx = $pdf->importPage($i);
    $pdf->useTemplate($tplIdx);
    if($theReturnedFecha !== false){
        if($theReturnedFecha['page'] == $i){
            $pdf->SetFont('Helvetica');
            $pdf->SetFontSize($theReturnedFecha['font']);
            $pdf->SetTextColor(0, 0, 0);
            $pdf->SetFillColor(255,255,255);
            $pdf->SetXY($theReturnedFecha['x'], ($theReturnedFecha['y']*-1)-$theReturnedFecha['font']);
            $pdf->Cell(0, 0, dateInSpanish("2015-11-04"), 0, 0, 'L', true);
        }
        //print_r($theReturnedFecha);
    }

    if($theReturnedCliente !== false){
        if($theReturnedCliente['page'] == $i){
            $pdf->SetFont('Helvetica');
            $pdf->SetFontSize($theReturnedCliente['font']);
            $pdf->SetTextColor(0, 0, 0);
            $pdf->SetFillColor(255,255,255);
            $pdf->SetXY($theReturnedCliente['x'], ($theReturnedCliente['y']*-1)-$theReturnedCliente['font']);
            $pdf->Cell(0, 0, $x_nombre_cli, 0, 0, 'L', true);
        }
        //print_r($theReturnedFecha);
    }        
}

$pdf->Output(); 
```

希望它可以帮助任何人

再见

# jsf - PrimeFaces TabView中固定和动态选项卡的组合

> ID：10882765
> 
> 赞同：1
> 
> 时间：2012-06-04T14:11:18.287
> 
> 标签：jsf, primefaces, tabview

是否可以在 PF TabView 中组合固定和动态选项卡？我的用例是为对象列表中的每个对象动态创建一个选项卡。固定选项卡将包含用于创建新对象的表单。提交表单后，必须将带有新对象的新选项卡添加到 TabView。

到目前为止，我设法仅使用两个视图来实现此功能 - 一个用于动态显示对象，另一个用于新对象的表单。

我尝试编写一个新的 TabView 渲染器，它能够渲染动态和固定选项卡。但是，如果我结合两种选项卡类型，PF 命令按钮在固定选项卡上不起作用（我在这里发布了这个问题：http: [//forum.primefaces.org/viewtopic.php?t=20840](http://forum.primefaces.org/viewtopic.php?t=20840)）。

我发现了一篇关于在托管 bean 中创建 PF 标签的论坛帖子（[http://stackoverflow.com/questions/4052581/dynamically-generate-tabs-with-primefaces](http://stackoverflow.com/questions/4052581/dynamically-generate-tabs-with-primefaces)）。如果可能的话，我想避免在 .jsf 视图中以声明方式使用 PF 组件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-23T16:04:08.110

创建一个`TabView`，手动添加一个固定选项卡并使用添加动态选项卡`<c:forEach>`：

```
<p:tabView>
    <p:tab title="Fixed tab">
        <h1>This is the fixed tab</h1>
    </p:tab>

    <c:forEach items="#{myBean.listItems}" var="item">
        <p:tab title="#{item.title}" closable="true">
            <h1>This is a dynamic tab</h1>
        </p:tab>
    </c:forEach>
</p:tabView> 
```

```
public List<Item> getListItems() {
    Item item1 = new Item("Item 1 title");
    Item item2 = new Item("Item 2 title");
    Item item3 = new Item("Item 3 title");
    List<Item> listItem = new ArrayList<>();
    listItem.add(item1);
    listItem.add(item2);
    listItem.add(item3);
    return listItem;
} 
```

结果：

[![已选择固定选项卡](../Images/159e489a49067cdc370e92264d83285a.png)](https://i.stack.imgur.com/Uhy3V.png)

[![已选择动态选项卡](../Images/8578e29956cb97526f8c98e3c235d13e.png)](https://i.stack.imgur.com/E3wR8.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:03:06.397

我们在最新的项目中遇到了同样的问题，并以一种简单但有点粗略的方式解决了它：

我们创建了两个（嵌套的）标签视图。最上面的一个包括 2 个选项卡。一个通过嵌套的第二个（动态）选项卡视图显示所有动态选项卡。第二个显示固定选项卡。（在我们的例子中，固定选项卡不会创建新选项卡，而是显示根据动态选项卡计算的最终结果）。

这只是一种解决方法，但也许会有所帮助。

# python - 提高领先游戏练习的 Python 解决方案的速度

> ID：10882768
> 
> 赞同：0
> 
> 时间：2012-06-04T14:11:38.410
> 
> 标签：python, optimization, profiling

这是我[对 Codechef 上的 Lead Game 问题的](http://www.codechef.com/problems/TLG)解决方案。它运行良好，但需要 2.63 秒和 3.8M 内存，而我看到许多 C 程序在 0.08 秒内完成和 1.6M 内存。我怎样才能让它更快？

```
import sys
cnt = int(sys.stdin.readline())
match = [[int(x) for x in sys.stdin.readline().split()] for i in range(cnt)]
diff=[]
for i in range(cnt):
      if i!=0:
             match[i]=[sum(vals) for vals in zip(match[i-1],match[i])]
      diff.append([1 if max(match[i])==match[i][0] else 2,abs(match[i][0]-match[i][1])])
maxval = max(diff,key=lambda x:x[1])
sys.stdout.write(str(maxval[0]) + ' ' + str(maxval[1])) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T14:38:23.123

我不会担心内存占用（Python 数据结构占用更多空间，这很正常），而且很难期望 Python 脚本在速度方面击败 C 程序。

**编辑**：无需保留潜在客户历史记录

我的 O(n) 算法在 1.18 秒内运行：

```
import sys

rounds = int(sys.stdin.readline())

score = [0,0]
leads = [0,0]
while rounds > 0:
    results = map(int, sys.stdin.readline().split())
    score[0] += results[0]
    score[1] += results[1]
    lead = score[0] - score[1]
    if (lead < 0 and leads[1] < -lead): leads[1] = -lead
    if (lead > 0 and leads[0] < lead): leads[0] = lead
    rounds -= 1

if (leads[0] > leads[1]): print 1, leads[0]
else: print 2, leads[1] 
```

**编辑**

要查看您的算法花费最多时间的位置，您可以使用：

```
cat inputfile | python -m cProfile yourScript.py 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T14:21:58.060

快速灵感看起来你有 O(n^2) 算法，你可以使用 O(n) 算法。

代替

```
 for:
    for: #this for  comes from line whit list comprehension 
```

只需组装一个或多个 for 循环（但不嵌套 for 循环）。

没问题，python si 太慢了，只是你的算法不够高效

编辑

我错了，也许追加太慢了。尝试使用理解

所以 diff 只是（在 for 循环之外）

```
diff = [[1 if max(m)==m[0] else 2,abs(m[0]-m[1])] for m in match] 
```

并尝试使用元组：

代码是然后。

```
import sys
cnt = int(sys.stdin.readline())
match = [tuple(int(x) for x in sys.stdin.readline().split()) for i in range(cnt)]
diff=[]
for i in range(cnt):
   if i!=0:
         match[i]=tuple(sum(vals) for vals in zip(match[i-1],match[i]))
diff = [tuple((1 if max(m)==m[0] else 2,abs(m[0]-m[1]))) for m in match]
maxval = max(diff,key=lambda x:x[1])
sys.stdout.write(str(maxval[0]) + ' ' + str(maxval[1])) 
```

# html - 浏览器是否有正文/文档的最大高度？

> ID：10882769
> 
> 赞同：5
> 
> 时间：2012-06-04T14:11:38.597
> 
> 标签：html, css, browser

html页面的像素高度是否有限制？

如果有，影响最大值的因素有哪些？特定于浏览器（尤其是 IE7），或者特定于客户端（内存等）或其他任何东西。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-04T16:38:00.640

**是**的，页面高度有技术限制。（还有一个实际限制——没有人可以真正使用数十亿像素高的页面，如果你的页面那么高，你几乎肯定做错了什么。）

也就是说，实际上有两个不同的限制需要考虑：可以在 CSS 中指定的元素的最大高度，以及最大总高度。

两者都因浏览器而异。

[SlickGrid](https://github.com/mleibman/SlickGrid/wiki)处理虚拟滚动，因此它必须知道元素的最大高度；[它用来检测这个的代码在这里](https://github.com/mleibman/SlickGrid/blob/36cd54e247ea0dd8175f9ae6a8d7585e15e600a6/slick.grid.js#L378)。我把它放在[小提琴](http://jsfiddle.net/josh3736/BhHfN/)中：（*这些是近似的）*

*   铬：512,000,000
*   火狐：6,000,000
*   IE8-9：1,000,000
*   IE6-7：128,000,000（是的，*超过*了较新的 IE）

为了测试最大总高度，我把[这个测试](http://jsfiddle.net/josh3736/ngnBf/)放在了一起，它用 11,000 `<div>`s 99,999px 的高度填充页面，总高度约为 11 亿像素。

*   Chrome 似乎在 10.8 亿像素左右失去了它的弹珠，在 50 亿像素以北的某个地方，滚动条完全消失了。
*   Firefox 的滚动条在 107,398,926 像素左右消失
*   IE 到处都是，`<div>`s 放错位置和大小不正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T15:33:30.023

IE 7 中的 IE 专有 CSS`filter:`限制为 4096 像素。因此，如果您有一个带有半透明叠加层（或任何其他使用 的元素`filter:`）的大页面，则该叠加层最多只能拉伸到 4096 像素。

# qt - 获取外部库中文件的路径

> ID：10882774
> 
> 赞同：0
> 
> 时间：2012-06-04T14:11:55.927
> 
> 标签：qt, path, qstring

我已经制作了 2 个 Qt 项目。一个构建一个库，另一个构建一个使用该库的 GUI。我的图书馆项目包括我制作的一堆着色器。在我的 GUI 中，我想引用这些着色器的路径。我的方法是在我的库中调用一个静态函数，该函数`getLibraryPath()`将`QString`我的文件系统上的路径引用到库中。

我尝试过使用`QDir::currentPath()`和`QApplication::applicationFilePath()`其他类似的返回路径的函数，但它们都返回引用我的 GUI 路径的路径，而不是库的路径，即使获取路径的函数位于库内。

在我的 GUI 中，我尝试通过执行以下操作来引用着色器：`Shader->addShaderFromSourceFile(QGLShader::Vertex, MyExternalLib::getLibraryPath() + "/shaders/MyVertexShader.vs");`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:32:55.823

库只是一堆代码。它没有拥有自己道路的概念。做你想做的事情的正常方法是：

1.  如果库是单独安装的产品——在安装程序中设置一个注册表项，并在运行时检查它。这将是特定于平台的，除非库是用 Qt 编写的——然后您可以使用 QSettings，但请确保您正确设置公司名称、应用程序等，因为 QApplication 不再为您完成。

2.  如果该库作为应用程序的一部分安装，请在同一文件夹树中：使用`QCoreApplication::applicationDirPath()`并将应用程序可执行文件与您想要的文件之间的相对路径添加到此路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:51:25.137

我能够通过将我想要引用的文件添加到我的库项目中的 qrc 文件来解决这个问题。通过这样做，我可以轻松地引用 qrc 路径和其中的文件。

# javascript - IE8 XHTML 在 jQuery ajax 调用问题中返回

> ID：10882776
> 
> 赞同：0
> 
> 时间：2012-06-04T14:11:59.407
> 
> 标签：javascript, jquery, ajax, xhtml, internet-explorer-8

我有一个问题，我无法通过尝试许多不同的方法来解决！！

适用于 Chrome、FF、IE9 但不适用于 IE8 或 IE7

**概述**

我有一个页面，Ajax 在整个 HTML 中来自本地 .aspx，其中读取 photobucket XML 提要放入 HTML 列表并返回。

[http://custommodsuk.com/Gallery.aspx](http://custommodsuk.com/Gallery.aspx)

我已经这样做了，因此页面排名不会受到谷歌速度排名的影响，因为服务器会关闭并拨打电话。

**编码**

```
$.ajax({
                type: "GET",
                url: ajaxURL,
                dataType:'html',
                success: function (feedHTML) {

                    var galleryList = $(feedHTML).find('#galleryList').find('.listItem');
                    var noItems = galleryList.length;

                   console.log(feedHTML.type);

                    galleryList.each(function (index) {
                        ...
                    });
                }
            }); 
```

**我试过的**

如您所见，console.log() 类型未定义，feedHTML.length 显示为 no。的字符。从我收集的内容来看，通常被视为一个字符串。

这是 JQuery 无法将响应转换为 jQuery 对象，我无法遍历它。因此，每个都不会循环。

我见过很多人在 SO 上遇到相同/类似的问题，但没有答案，部分原因是垃圾代码示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:27:36.220

Photobuckets RSS 提要格式不正确。

```
<p><a href="http://s1174.photobucket.com/albums/r614/CustomModsUK/">CustomModsUK</a> posted a photo</a></p> 
```

这绊倒了 IE8。如果以后遇到这样的问题，请检查 HTML 的有效性！！！

# asp.net-mvc - MVC 3 - 无会话控制器数据存储选项

> ID：10882778
> 
> 赞同：1
> 
> 时间：2012-06-04T14:12:11.747
> 
> 标签：asp.net-mvc, data-storage, session-less

我最近一直在阅读有关无会话控制器的文章，这似乎是一个有趣的想法，因为它[提高了性能](http://code-inside.de/blog-in/2011/01/12/howto-sessionless-controller-in-mvc3-what-and-why/)并让 ajax 调用像通常那样异步。

但是，我想不出一种很好的方法来存储以前由会话存储的数据。我有很多单次获取的数据，我一次获得并浏览了几页。我的第一个想法是使用 MemoryCache，但阅读这篇[文章](https://stackoverflow.com/questions/7607841/asp-net-mvc-3-in-memory-data-store)我开始怀疑它，因为 IIS 可以随时释放我的数据。

因此，我对如何以类似会话的方式存储数据感到有些困惑。我读了一些关于 NoSQL 和 MongoDB 的东西，但这与在我需要的时候一直获取数据不一样吗？

你能给我一些说明和技术，我可以用来作为临时数据存储吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:04:34.087

您是否考虑过使用[HttpContext.Cache](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.cache)？正如您在会话中所说的那样，没有理由不能根据当前请求的 sessionid 创建缓存键：

```
// cache key
var cacheKey = string.Format("{0}-{1}", "SomeKey", Session.SessionID);

// save to cache
HttpContext.Cache.Insert(cacheKey, <yourobject>, null, Cache.NoAbsoluteExpiration, TimeSpan.FromMinutes(20)); 
```

从那里开始，只需传递 sessionid 并在稍后检索：

```
HttpContext.Cache[cacheKey] 
```

# php - 如何启用 magento Go Api 设置

> ID：10882780
> 
> 赞同：0
> 
> 时间：2012-06-04T14:12:16.217
> 
> 标签：php, magento

Magento Go 的 WS-I 合规性

我可以为 Magento Go 解决方案生成符合 ws-i 的 wsdl 吗？这似乎适用于其他 Magento 产品（根据论坛下的 Services > Magento Core API > WS-I Compliance to Yes）。但我在 Magento Go 管理控制台中找不到该设置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:52:49.823

您可以从版本 1.1.1.4 开启 WS-I 合规性。

这是版本 1.1.1.0的[发行说明](http://go.magento.com/support/releases/index/page/2/)

> 版本 1.1.1.0 – 2012 年 7 月 17 日
> 
> 什么是新的
> 
> 有关此版本以及英国功能的更多详细信息，请参阅博客。为英国客户实施英国知识库。
> 
> *   添加了额外的 PayPal 选项 PayPal Advance。
> *   自动 PayPal Express 加速入职。
> *   皇家邮政运输方式。
> *   整个订单的运费增值税。
> *   **为 Magento Go 启用 API WS-I 合规性**
> 
> 小改动和修复
> 
> *   二十五个额外的小改动和修复。

# reporting-services - SSRS - 如何将数据继续到下一列？

> ID：10882784
> 
> 赞同：14
> 
> 时间：2012-06-04T14:12:25.943
> 
> 标签：reporting-services

我需要报告“员工姓名”和“年龄”，但我不需要将姓名继续到下一页；我需要继续到下一栏。

它应该是这样的：

```
_________________________________________________
| Employee Name | Age | Employee Name | Age     |
|_______________|_____|_______________|_________| 
```

任何人都可以发送管理此问题的报告吗？我正在使用 Microsoft 报告服务。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-05T01:11:47.237

你想要一个多栏的报告。

在布局选项卡上，右键单击没有任何报表对象的位置，然后选择属性。单击“布局”选项卡并将列数设置为页面上所需的列数 - 在您的示例中为 2。这将为您提供一个用于在左侧布置报表对象的列和一个灰色列右侧将是您在左侧的列将重复的位置。

但是，这里有几个技巧：

*   您的列必须适合页面，否则您将不会获得任何列。例如，如果您的布局设置默认为 1 厘米间距和 2.5 厘米左右边距，那么在 A4（21 厘米宽）页面上，您的列必须小于 7.5 厘米。否则，您只会得到一列，因为页面上放不下两列。
*   设计器中的报表呈现器不支持多列，因此您只会在设计器中看到一列。HTML 呈现器也不支持多列，当部署到 Reporting Services 服务器并显示为网页时，您只会看到报告的一列。您需要将报表输出到支持多列的渲染器，例如 PDF 或打印机，以便实际查看多列报表中的列。

**更新 - 使用表格伪造多列报告**

如果做不到这一点，要让它以独立于渲染器的方式显示，就像你尝试过的那样，使用带有两个表的 hack，但诀窍是以交替的方式隐藏行。

要实现这个技巧，请并排创建两个表，它们都指向您的数据集。在第一个表的 Detail 行上，对于 Visibility-Hidden 属性，使用以下公式：

```
=iif((RowNumber(Nothing) Mod 2) = 0, True, False) 
```

在第二个表的 Detail 行中，对于 Visibility-Hidden 属性，使用相反的公式：

```
=iif((RowNumber(Nothing) Mod 2) = 1, True, False) 
```

这意味着第一个表将打印每个奇数行，第二个表将打印每个偶数行，从而有效地为您提供多列输出。

对于需要两列以上的表格可见性的通用解决方案，请使用以下公式：

```
=iif((RowNumber(Nothing) Mod TOTALCOLUMNS) = THISCOLUMN, True, False) 
```

其中： TOTALCOLUMNS 是总列数 THISCOLUMN 是此表表示的列号，从零开始（即第一列是 0，第二列是 1，等等）

例如，五列输出中第三列的表将 Visibility-Hidden 属性设置为：

```
=iif((RowNumber(Nothing) Mod 5) = 2, True, False) 
```

请注意，这与真正的多列输出略有不同，因为它从左到右而不是在页面向下读取，然后像真正的多列那样换行到右侧列。但是，它具有在每个渲染器中正确渲染的优点。

您可以通过从 InteractiveSize-Height 属性计算出您可以在页面上容纳多少行并在左表中显示这些列，然后在右表中显示其余列等来调整此方法以执行真正的多列。报告，但这可能很脆弱，具体取决于渲染器和更改页面布局设置（如边距）。上述方法简单有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-18T19:43:11.357

我正在尝试做 EmployeeName 和 EmployeeTitle。我试图在上面实施克里斯的解决方案。我会在每个表中得到预期值，但它们会被重复。

我做了更多的研究，最终得到了以下行可见性。

对于偶数行我使用：

```
=iif(RunningValue(Fields!jobtitle.Value, CountDistinct, "EmployeesDataSet") Mod 2 = 0, True, False) 
```

对于偶数行我使用：

```
=iif(RunningValue(Fields!jobtitle.Value, CountDistinct, "EmployeesDataSet") Mod 2 = 1, True, False) 
```

行组在职称上。

来源：[SSRS 2005 中组的行号](https://stackoverflow.com/questions/17581613/rownumber-for-group-in-ssrs-2005)

# c# - 具有动态上限和下限的 MSChart C# 误差条形图

> ID：10882787
> 
> 赞同：2
> 
> 时间：2012-06-04T14:12:29.690
> 
> 标签：c#, charts, mschart

我正在使用 C# 中的 MSChart。我得到了三种不同产品制造时间的模拟数据。我需要创建一个看起来像包含三个点的误差条图的图表，但每个点真正包含的是平均时间值，每个点的误差条的上限和下限是最大和最小时间值的模拟。我发现的问题是，使用 MSChart，错误范围是静态的；图表上的每个点都是相同的。我需要一个误差条图，每个点都有不同的最小值和最大值。我有图表应该是什么样子的图像，但当然，我不允许发布图像。

我想我可以通过在图表中创建 6 个系列，每个点 2 个，然后将最大值添加到一个，将最小值添加到另一个，并隐藏各自的下限和上限来创建一个解决方法，但不方便。但是，尝试这样做会使图形变成一个大的红色 X。我想知道 .Net MSChart 是否无法实现此功能。我需要为此查看第三方库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-01T18:11:53.100

以下使用 System.Windows.Forms.DataVisualization.Charting 库，我认为它自 4.0 以来一直是 .Net 的一部分。

```
Chart aChart = new Chart();
ChartArea aChartArea = new ChartArea();
aChart.ChartAreas.Add(aChartArea);
aChart.Size = new System.Drawing.Size(100,100);

Series aSeries = mChart.Series.Add("SomeSeriesName");
aSeries.ChartType = SeriesChartType.ErrorBar;
aSeries.Points.AddXY(firstXPoint, firstMiddleYPoint, firstLowerYBound, firstUpperYBound);
aSeries.Points.AddXT(secondXPoint, secondMiddleYPoint, secondLowerYBound, secondUpperYBound);
aChart.SaveImage("outputPath/outputName.jpg", ChartImageFormat.Jpeg); 
```

# jquery - 如何在制作firefox插件时使用jquery在网站上显示一个按钮

> ID：10882790
> 
> 赞同：-2
> 
> 时间：2012-06-04T14:12:45.937
> 
> 标签：jquery, jquery-ui, firefox, jquery-plugins, firefox-addon

[![按钮位置](../Images/4f504baf41657695362787d8fa97ba72.png)](https://i.stack.imgur.com/MhhUa.png)
[（来源：[trillian.im](http://ft.trillian.im/bharris007/68aDvvaxg-oUhHoJ6DCV.png)）]

[![点击按钮后](../Images/0d8d83add0787fff4040a927cdb3bce5.png)](https://i.stack.imgur.com/oTM6d.png)
[（来源：[trillian.im](http://ft.trillian.im/bharris007/68aDzRxcg-M58h2nAPHh.png)）]

所以当我按下按钮时，我应该得到一个如图所示样式的弹出窗口。我想我可以通过 Jquery 来做到这一点。其次，一旦我安装了它，它应该永久出现在我的 gmail 帐户上。就像[http://www.rightinbox .com/](http://www.rightinbox.com/) .thanks 提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:20:32.630

在 Firefox 插件中构建 HTML 是一个相当大的挑战。你不能使用innerHtml。对于许多替代方案，请查看 MDN 上的这两篇文章：

*   一个不错的解决方案：[附录 E：DOM 构建和 HTML 插入](https://developer.mozilla.org/en/XUL_School/DOM_Building_and_HTML_Insertion?action=edit)
*   直截了当：[如何创建 DOM 树](https://developer.mozilla.org/en/How_to_create_a_DOM_tree)

您应该检查 gmail 使用的样式，并复制它，就像我在 YouTube 上所做的那样，这样看起来会非常好：

![youtube 附加图像复制](../Images/996ad9ed401542716ac54ace8a5cb89a.png)

至于附加事件，你可以简单地使用[AddEventListener](https://developer.mozilla.org/en/DOM/element.addEventListener)或[绑定](http://api.jquery.com/bind/)（如果你真的想使用 jQuery）。我不能在这里提供完整的代码，因为它会占用太多空间，工作量太大，如果你想实现任何目标，这是你必须做的工作。

# javascript - 应用程序在 android 中强制关闭

> ID：10882796
> 
> 赞同：0
> 
> 时间：2012-06-04T14:12:56.583
> 
> 标签：javascript, android, cordova

我已经开发了 phonegap android 应用程序。当使用 android 服务单击按钮并显示通知和警报时，我一直在后台运行该应用程序。我还将使用 javascript 显示广告（inmobi）。后台进程和广告都工作正常.但是突然我在logcat中遇到错误（有时）并且我的应用程序被强制关闭。在后台进程中，我正在使用Web服务从服务器获取值

这是我的 Logcat 错误：

```
java.net.UnknownHostException: Host is unresolved:Mypath
at java.net.Socket.connect(Socket.java:1038)
at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.
<init>(HttpConnection.java:62)
at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.
get(HttpConnectionPool.java:88)
at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.
getHTTPConnection(HttpURLConnectionImpl.java:927)
at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.
connect(HttpURLConnectionImpl.java:909)
at org.ksoap2.transport.ServiceConnectionSE.connect(ServiceConnectionSE.java:75)
at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:136)
at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:90)
at com.app.myactivity.MyService$1.handleMessage(MyService.java:123)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4627)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
at dalvik.system.NativeStart.main(Native Method)
DEBUG/AndroidRuntime(2881): Shutting down VM
WARN/dalvikvm(2881): threadid=1: thread exiting with uncaught 
exception(group=0x4001d800)
ERROR/AndroidRuntime(2881): FATAL EXCEPTION: main
ERROR/AndroidRuntime(2881): java.lang.NullPointerException
at com.app.mobilyzer.newly.MyService$1.handleMessage(MyService.java:194)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4627)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
at dalvik.system.NativeStart.main(Native Method) 
```

请指导我。请告诉我问题出在哪里。是因为广告还是在后台进程中。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:25:05.913

我认为问题在于，有时您在代码、网站或广告端都得到空值。

# mysql - mysqlimport 报告错误：29，找不到文件“/tmp/newTable.txt”（错误代码：13），使用表时：newTable

> ID：10882797
> 
> 赞同：5
> 
> 时间：2012-06-04T14:13:13.573
> 
> 标签：mysql, ubuntu

一段时间以来，我一直在尝试将制表符分隔的文本文件导入我的 mysql 数据库。我不断收到此错误。

一些论坛建议我应该将文件和文件夹的模式更改为 777。我这样做了，但仍然是同样的错误。

```
Error: 29, File '/tmp/vehicleMake.txt' not found (Errcode: 13), when using table: vehicleMake 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-04T14:15:34.163

抱歉麻烦，我使用了 --local 选项，它起作用了.. 魔术！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-13T14:13:54.020

大多数 MYSQL 版本不再支持 LOCAL 选项。在 Ubuntu 14.04 和 MYSQL 5.5 中，我将文件移动到 /tmp 目录，并在 shell 中使用以下命令将文件的所有权更改为 mysql：

```
sudo chown mysql.mysql <filename> 
```

# asp-classic - 通过经典 ASP 中的活动目录组对用户进行身份验证

> ID：10882799
> 
> 赞同：1
> 
> 时间：2012-06-04T14:13:17.263
> 
> 标签：asp-classic, vbscript, active-directory

我们通过活动目录为 Intranet 站点设置了如下安全性。

首先，我们按部门（销售、会计等）设置安全组

其次，我们有一个用于 Intranet 站点的 AD 安全组，人们通过 NT 质询/响应登录。为此，我们称该组为“Intranet 用户”

在 Intranet Users 下，我添加了允许使用 Intranet 的部门。

因此，在 AD 中，您有 Intranet 用户，并且该组的成员是销售和会计。

在经典 ASP 中我需要做的是针对 Intranet 用户下的组对用户进行身份验证。

我挖出了一些我在其他地方使用过的旧代码，但我无法让它工作，除非我对这个主题的 Google-fu 非常糟糕（一种明显的可能性），否则我无法在经典 ASP 中找到正确的文档。

此代码将获取组，但如果它是用户而不是组，则只会枚举其中的对象。

```
bAuthUser = False
Set objGroup = GetObject("WinNT://DOMAIN/Intranet Users")
For Each objMember In objGroup.Members
    If objMember.Class = "User" Then
          If objMember.Name = Request.ServerVariables("AUTH_USER") Then bAuthUser = True
    End If
Next 
```

如果安全组中有实际用户但组中没有用户，只有其他安全组，则上述代码有效。

我需要做的是遍历“Intranet Users”中的组，然后通过每个组中的用户进行身份验证。

我是在正确的轨道上还是完全不在？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:45:30.667

您可以根据对象的 LDAP 路径查找对象，尽管在[本文](http://www.serverwatch.com/tutorials/article.php/1476961/Accessing-Active-Directory-via-Active-Server-Pages-Part-1.htm)之前我还没有在 ASP 中这样做过，这看起来像是一个很好的起点，就像[这个问题](https://stackoverflow.com/questions/1090336/querying-active-directory-using-vbscript)一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T17:23:22.050

这取决于您正在寻找的功能。

如果目标是“每个人都可以访问此站点，但如果他们是 Intranet 用户，他们将获得此额外功能”，那么您所在的路径是正确的。

如果您只想说“只有 Intranet 用户可以访问我的站点”，那么您可以利用 IIS 的一个未记录的功能。如果您进入文件夹安全选项，并从 ACL 中删除通用帐户并将 Intranet Users 组添加到 ACL，如果经过身份验证的用户不在 Intranet Users 中，则 IIS 将引发 403 异常。

# mercurial - 在推送到 hgweb 服务器时创建远程书签

> ID：10882802
> 
> 赞同：4
> 
> 时间：2012-06-04T14:13:21.013
> 
> 标签：mercurial, nginx, bookmarks, hgrc, hgweb

关于书签有很多问题，但没有一个能回答我的问题：

在推送到我的 hgweb 服务器时，我应该怎么做才能允许创建书签？

这是我在尝试推送书签时得到的：

```
$ hg push -B feature1
pushing to http://local_server/hg/Project
searching for changes
no changes found
exporting bookmark feature1
updating bookmark feature1 failed! 
```

有什么我应该放入`.hgrc`或`hgweb`配置中的吗？

当远程存储库中已经存在书签时，它们会被更新，同时通过推送在 bitbucket 上创建书签，所以我相信这是可能的。

**问题解决了：**

在系统中安装了两个 Mercurial 版本：

```
/usr/bin/hg == v1.4
/usr/local/bin/hg == v2.2 
```

虽然`wchich hg`打印`/usr/local/bin/hg`nginx 正在使用`/usr/bin/hg`.

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:04:28.190

**问题解决了：**

在系统中安装了两个 Mercurial 版本：

```
/usr/bin/hg == v1.4
/usr/local/bin/hg == v2.2 
```

虽然`which hg`显示`/usr/local/bin/hg`nginx 正在使用`/usr/bin/hg`.

# php - 使用正则表达式解析 HTML 链接

> ID：10882809
> 
> 赞同：-2
> 
> 时间：2012-06-04T14:13:52.387
> 
> 标签：php, regex, parsing

我有以下代码：

```
$regex='|<a.*?href="(.*?)"|';      //PARSE FOR LINKS
preg_match_all($regex,$result,$parts);
$links=$parts[1];

foreach($links as $link){
    echo $link."<br>";
} 
```

其输出如下：

```
/watch/b4se39an
/watch/b4se39an
/bscsystem
/watch/ifuyzwfw
/watch/ifuyzwfw
/?sort=v
/?sort=c
/?sort=l
/watch/xk4mvavj
/watch/2h7b53vx
/watch/d7bt47xb
/watch/yh953b17
/watch/tj3z6ki2
/watch/sd4vraxi
/watch/f2rnthuh
/watch/ey6z8hxa
/watch/ybgxgay1
/watch/3iaqyrm1
/help/feedback 
```

如何使用正则表达式提取`/watch/.....`字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:16:55.910

修改您的正则表达式以包含以下限制`/watch/`：

```
$regex = '|<a.*?href="(/watch/.*?)"|'; 
```

一个简单的测试脚本可以表明它正在工作：

```
$tests = array( "/watch/something", "/bscsystem");
$regex = '|<a.*?href="(/watch/.*?)"|'; 

foreach( $tests as $test) {
    $link = '<a href="' . $test . '"></a>';
    if( preg_match( $regex, $link))
       echo $test . ' matched.<br />';
} 
```

这将产生：

```
/watch/something matched. 
```

# ruby - Rubinius 中缺少 GzipReader each_line 方法

> ID：10882814
> 
> 赞同：0
> 
> 时间：2012-06-04T14:14:14.167
> 
> 标签：ruby, gzip, rubinius

我正在尝试使用 Zlib:GzipReader 读取 gzip 文件。使用 ruby​​ 1.9.3 可以按预期工作，但使用 Rubinius 时出现`method_missing`错误。`each_line`

有没有办法使用 Rubinius 读取压缩文件？

```
require 'zlib'

Zlib::GzipReader.open("lines.txt.gz").each_line { |line|
  puts "#{line}"
}

Kernel(Zlib::GzipReader)#each_line (method_missing) at kernel/delta/kernel.rb:81 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T17:03:39.303

我相信这是 Rubinius 中的一个错误，您应该考虑在项目中为它打开一个问题。但是，这种解决方法应该可以帮助您：

```
require 'zlib'
require 'stringio'

file = File.read("lines.txt.gz")
lines = Zlib::GzipReader.new(StringIO.new(file)).read 
```

# flume - Flume 代理抛出 java.net.ConnectException：连接被拒绝

> ID：10882818
> 
> 赞同：1
> 
> 时间：2012-06-04T14:14:23.887
> 
> 标签：flume

我已经使用 Flume 有一段时间了，我已经让代理和收集器在同一台机器上运行。

### 配置

```
agent: exec("/usr/bin/tail -n +0 -F /path/to/file") | agentE2ESink("hostname", 35855)
collector: collectorSource(35855) | collector(10000) { collectorSink("/hdfs/path/to/sink","name") } 
```

代理节点面临的问题：

```
2012-06-04 19:13:33,625 [naive file wal consumer-27] INFO debug.InsistentOpenDecorator: open attempt 0 failed, backoff (1000ms): Failed to open thrift event sink to hostname:35855 : java.net.ConnectException: Connection refused
2012-06-04 19:13:34,625 [logicalNode hostname-19] ERROR connector.DirectDriver: Expected ACTIVE but timed out in state OPENING
2012-06-04 19:13:34,632 [naive file wal consumer-27] INFO debug.InsistentOpenDecorator: open attempt 1 failed, backoff (2000ms): Failed to open thrift event sink to hostname:35855 : java.net.ConnectException: Connection refused
2012-06-04 19:13:36,635 [naive file wal consumer-27] INFO debug.InsistentOpenDecorator: open attempt 2 failed, backoff (4000ms): Failed to open thrift event sink to hostname:35855 : java.net.ConnectException: Connection refused 
```

然后会连续发送空的ACK

```
2012-06-04 19:19:56,960 [Roll-TriggerThread-0] INFO endtoend.AckListener$Empty: Empty Ack Listener began 20120604-191956958+0530.881565921235084.00000026
2012-06-04 19:20:07,043 [Roll-TriggerThread-0] INFO hdfs.SeqfileEventSink: closed /tmp/flume-user1/agent/hostname/writing/20120604-191956958+0530.881565921235084.00000026 
```

我不明白为什么连接被拒绝。是否需要进行任何系统级别的更改？

**注意：**收集器正在监听端口，但代理无法通过 35855 端口发送数据。

谁能帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:31:46.023

如果您在同一个机器上同时运行代理和收集器，您应该使用 localhost 作为地址。

```
agentE2ESink("localhost", 35855) 
```

# iphone - 如何在 iphone sdk 中使用 AVAssertWriter 和 AVAssertReader 录制和播放捕获的视频

> ID：10882821
> 
> 赞同：2
> 
> 时间：2012-06-04T14:14:56.710
> 
> 标签：iphone, objective-c, avfoundation, avassetwriter, avassetreader

我在预览层上显示相机数据（视频）。现在我想录制视频并将其存储在本地文件中并访问它以在屏幕上播放。

我看过一些网站可以使用`AVAssertWriter`和`AVAssertReader`。我很难理解。任何人都可以用明确的方式或任何示例代码给我建议。

任何人的帮助将不胜感激。

谢谢大家，莫尼什。

# javascript - 从输入回显文本

> ID：10882822
> 
> 赞同：0
> 
> 时间：2012-06-04T14:14:59.883
> 
> 标签：javascript, code-generation

我正在尝试制作一个基本的边界半径生成器。我有一个输入字段供用户输入他们选择的数字，如下所示：

```
<label>Border Radius:</label>
<input name="border-radius" class="jj_input" type="text" size="2" /> 
```

然后我有一个输出区域，我希望他们输入的数字出现在“px”之前

```
<div class="yourcode">
     border-radius: *NUMBER_APPEARS_HERE*px;
</div> 
```

我不知道该怎么做，所以有人可以指出我正确的方向。也请让我知道这是否已经得到回答。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:33:46.550

输入元素有一个可以使用的 onchange（或 onkeyup）事件。您可以在设置目标 div 的内部文本的事件中执行 javascript。Onchange 在验证后触发（通常这意味着当用户离开框时）。如果您想在输入后直接更改，并且只允许键盘输入，则可以使用 keydown/up 事件。在下面的示例中使用了 onkeyup

```
<label>Border Radius:</label>

<input name="border-radius" class="jj_input" type="text" size="2" onkeyup = "document.getElementById('displaydiv').innerText = 'border-radius: '  + this.value + ' px'" />

 <div class="yourcode" id="displaydiv">
 border-radius: ..px;
 </div> 
```

一个更优雅的解决方案为 .. 使用单独的跨度，而不是替换整个文本，但出于演示目的，上述内容就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:54:22.110

最后让它工作：

```
<label>Border Radius:</label>
<input name="border-radius" id="jj_input" class="jj_input" type="text" size="2" value='' onkeyup='changeRadius()' />

<div class="yourcode">
    border-radius: <span id="radius"></span>px;
</div>

<script type="text/javascript">
   function changeRadius(){
        var jj_input = document.getElementById('jj_input').value;
        document.getElementById('radius').innerHTML = jj_input;
   }
</script> 
```

# asp.net - ASP.NET 身份验证设计

> ID：10882824
> 
> 赞同：0
> 
> 时间：2012-06-04T14:15:06.333
> 
> 标签：asp.net

您能否验证我的身份验证解决方案是否足够优雅和安全。

网页配置

`<authentication mode="Forms"> <forms name=".ASPXFORMSDEMO" loginUrl="logon.aspx" protection="All" path="/" timeout="30" /> </authentication>`

`<authorization> <deny users ="?" /> <allow users = "*" /> </authorization>`

在 Logon.aspx.cs 我有两种方法：

```
private bool ValidateUser(string userName, string passWord)
private void LoginButton_Click(Object sender, EventArgs e) 
```

`ValidateUser`我正在做的内部方法是执行 SQL 查询以检查输入的凭据是否类似于数据库记录。如果凭据匹配，我想执行重定向到称为`PrivateRoom.aspx`说使用的页面`Response.Redirect("PrivateRoom.aspx", true);`

对于这样的设计，你们怎么看？它有多优雅，有多安全？实际上，我如何`PrivateRoom.aspx`防止未经授权的访问？说我总是可以去`http://mysite.com/PrivateRoom.aspx`，它会打开这个页面。

谢谢您的回答！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:20:54.013

不安全，因为您没有使用`requireSSL="true"`cookie，因此 cookie 可以不安全地传输。

relative:[一些黑客可以从用户那里窃取 cookie 并在网站上使用该名称登录吗？](https://stackoverflow.com/questions/2498599/can-some-hacker-steal-the-cookie-from-a-user-and-login-with-that-name-on-a-web-s)

# javascript - 使用 jQuery 预览图像，更改悬停图像大小

> ID：10882829
> 
> 赞同：0
> 
> 时间：2012-06-04T14:15:28.477
> 
> 标签：javascript, html, css

这应该是一个非常简单的问题：

我正在尝试[使用 jQuery 使用最简单的工具提示和图像预览](http://cssglobe.com/post/1695/easiest-tooltip-and-image-preview-using-jquery) 我正在尝试使用这个[示例](http://cssglobe.com/lab/tooltip/02/)

它对我来说很好用，

我的问题是如何更改悬停图像大小（当我将小图像悬停时显示在工具提示中的那个）我的图像太大，我想将其大小设置为 200px x 200px 我该怎么做？

这是当前的样式：

```
<style>
#preview{
    position:absolute;
    border:1px solid #ccc;
    background:#333;
    padding:5px;
    display:none;
    color:#fff;
    }
</style> 
```

这是Javascript：

```
this.imagePreview = function(){ 
    /* CONFIG */

        xOffset = 10;
        yOffset = 30;

        // these 2 variable determine popup's distance from the cursor
        // you might want to adjust to get the right result

    /* END CONFIG */
    $("a.preview").hover(function(e){
        this.t = this.title;
        this.title = "";    
        var c = (this.t != "") ? "<br/>" + this.t : "";
        $("body").append("<p id='preview'><img src='"+ this.href +"' alt='Image preview' />"+ c +"</p>");                                
        $("#preview")
            .css("top",(e.pageY - xOffset) + "px")
            .css("left",(e.pageX + yOffset) + "px")
            .fadeIn("fast");                        
    },
    function(){
        this.title = this.t;    
        $("#preview").remove();
    }); 
    $("a.preview").mousemove(function(e){
        $("#preview")
            .css("top",(e.pageY - xOffset) + "px")
            .css("left",(e.pageX + yOffset) + "px");
    });         
};

// starting the script on page load
$(document).ready(function(){
    imagePreview();
}); 
```

这是主要的：

```
<a href="1.jpg" /*class="preview"*/><img src="1s.jpg" alt="gallery thumbnail" /></a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:19:48.333

添加

```
#preview img {
  height:200px;
} 
```

或改变

```
 $("body").append("<p id='preview'><img src='"+ this.href +"' alt='Image preview' />"+ c +"</p>"); 
```

到

```
 $("body").append('<p id="preview"><img style="height:200px" src="'+ this.href +'" alt="Image preview" />'+ c +'</p>'); 
```

或者

```
 $("body").append('<p id="preview"><img style="width:200px" src="'+ this.href +'" alt="Image preview" />'+ c +'</p>'); 
```

取决于你想如何限制它

# php - 并用 phing 编码

> ID：10882834
> 
> 赞同：1
> 
> 时间：2012-06-04T14:15:55.117
> 
> 标签：php, unicode, phing

我有一个静态应用程序 (html/js)，我必须以两种不同的语言将其放到网上。虽然复制整个目录两次并替换每个字符串并不难，但这有点无聊，我希望看到这个项目的定期更改。

因此，我考虑使用 phing 构建项目的两个版本（fr 和 nl）。这个想法是使用`<filterchain><expandproperties />`, 并从属性文件加载翻译。

它工作得很好，但一方面： **unicode 字符表示为 \uXXX**，这显然不是我想要的......

关于如何解决这个问题的任何想法？可以在此处找到 build.xml 的摘录：http: [//pastebin.com/2uWHaHvi](http://pastebin.com/2uWHaHvi)

**解决方案**：事实证明，对于 phing 来说没问题。问题是我的 IDE 用它的 \uXXX 等价物透明地替换了这个字符。如果您遇到同样的问题，请尝试使用简单的文本编辑器打开文件。

# ios - Facebook 个人资料图片大

> ID：10882835
> 
> 赞同：7
> 
> 时间：2012-06-04T14:15:57.807
> 
> 标签：ios, xcode, facebook, image

我在尝试在 Facebook 上请求用户个人资料图片的大版本时遇到问题。在我正在执行的图形路径中：

```
NSString *requestPath = @"me/?fields=first_name,last_name,gender,email,birthday,verified,picture"; 
```

那里的图片字段只给了我个人资料图片的小版本，但我需要大版本和普通版本..我已经尝试将图片更改为图片大，图片大，图片大，但这些都不起作用..

拜托，我已经阅读了文档，所以如果您打算告诉我再读一遍，请不要回答。我在这里问这个是因为我已经到处搜索但找不到解决方案。

谢谢，牛顿

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-10T14:54:51.593

您正在寻找的简短答案是`picture.type(large)`

我一直在寻找相同的东西，并使用此处找到的 Facebook Graph API explorer 找到了[答案](https://developers.facebook.com/tools/explorer)。

现在，如果我使用以下代码：

```
[FBRequestConnection startWithGraphPath:@"me"
                             parameters:[NSDictionary dictionaryWithObject:@"picture.type(large),id,email,name,username"
                                                                    forKey:@"fields"]
                             HTTPMethod:@"GET"
                      completionHandler:^(FBRequestConnection *connection, id result, NSError *error){[self fbRequestCompleted:result];}]; 
```

“结果”字典中的“图片”键具有大图片 URL 的值。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-04T14:19:38.623

您可以使用：

```
http://graph.facebook.com/USER/picture?type=large 
```

其中*USER*可以是用户 ID 或用户名。

这将返回到静态图像 url 的重定向，如[用户对象文档](http://developers.facebook.com/docs/reference/api/user/)中所写：

> HTTP 302 重定向到用户头像的 URL（使用 ?type=square | small | normal | large 来请求不同的照片）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-04T15:12:56.337

Nitzan Tomer 的回应对于 iOS 来说仍然是正确的；如果你想使用 Facebook 的 iOS API 获取用户头像的大图，你可以写：

```
 [facebook requestWithGraphPath:@"me/picture" andParams:[NSMutableDictionary dictionaryWithObject:@"large" forKey:@"type"] andDelegate:self]; 
```

您将在此委托方法中获得*结果*对象中的图像数据：

```
- (void)request:(FBRequest*)request didLoad:(id)result 
```

# python - Mac OS X 上 django 不支持的语言环境设置

> ID：10882839
> 
> 赞同：1
> 
> 时间：2012-06-04T14:16:17.213
> 
> 标签：python, django, macos, locale

在过去的一年里，我一直在使用 Django 开发一个应用程序。该应用程序是在 Debian 环境中编写的，开发和测试完全在 debain 机器中完成。

最近，我决定将应用程序移至本地基于 Mac OS X 的笔记本电脑上。使用端口我做了一个虚拟环境并从 github 拉我的项目。当我尝试运行服务器时，出现“不支持的语言环境设置”异常。

我的应用程序大量使用语言环境，我注意到虽然我机器中的语言设置设置为 en_US.UTF-8，而在 debian 机器上设置为 en_US.UTF8。我不知道破折号是否是它失败的原因。

我的应用程序使用 django-localeurl 为 i10n 和 i18n 创建语言代码 url 架构。

下面是我得到的例外

```
Environment:

Request Method: GET
Request URL: http://127.0.0.1:8000/en/

Django Version: 1.3.1
Python Version: 2.7.1
Installed Applications:
['localeurl',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.humanize',
 'django.contrib.comments',
 'libraries.plugins.piston',
 'nani',
 'haystack',
 'compressor',
 'libraries.plugins.social_auth',
 'registration',
 'djcelery',
 'django.contrib.markup',
 'south',
 'libraries.plugins.storages',
 'libraries.plugins.django_messages',
 'merlin',
 'seacucumber',
 'timezones',
 'treebeard',
 'apps.core',
 'apps.core.mediastore',
 'apps.core.accounts',
 'apps.core.mazvars',
 'apps.core.mazguard',
 'apps.core.system',
 'apps.core.sponsorship',
 'apps.portal.default',
 'apps.portal.support',
 'apps.portal.pages',
 'apps.portal.blog',
 'apps.portal.developer',
 'apps.listing',
 'apps.listing.postfix',
 'apps.listing.category',
 'apps.listing.post',
 'apps.listing.home',
 'apps.listing.shoutout',
 'apps.listing.taggables',
 'apps.listing.comment',
 'apps.listing.badge',
 'apps.listing.geo',
 'apps.listing.reputation',
 'apps.mzn.shorturl',
 'grappelli.dashboard',
 'grappelli',
 'django.contrib.admin',
 'django.contrib.admindocs',
 'debug_toolbar']
Installed Middleware:
('localeurl.middleware.LocaleURLMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'apps.core.middleware.FallbackLocaleMiddleware',
 'apps.core.accounts.middleware.LoggingMiddleware',
 'apps.core.accounts.middleware.CompleteEmail',
 'apps.core.accounts.middleware.setref',
 'apps.core.accounts.middleware.FollowUser',
 'apps.core.accounts.middleware.UnFollowUser',
 'apps.core.accounts.middleware.FraudLocked',
 'apps.core.middleware.DefaultAdminLocaleMiddleware',
 'apps.core.middleware.DefaultSiteMiddleware',
 'debug_toolbar.middleware.DebugToolbarMiddleware')

Traceback:
File "/Users/mo/Projects/pythonic/mazban/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Users/mo/Projects/pythonic/mazban/mazban/apps/listing/home/views.py" in home
  23\.     cal = render_event_calendar_widget(language_code=request.LANGUAGE_CODE)
File "/Users/mo/Projects/pythonic/mazban/mazban/apps/listing/post/event_views.py" in render_event_calendar_widget
  115\.     return cal.render()
File "/Users/mo/Projects/pythonic/mazban/mazban/apps/core/utils.py" in render
  81\.             [day for day in cal.formatweekheader(self.wh).split(' ')]
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/calendar.py" in formatweekheader
  297\.         return ' '.join(self.formatweekday(i, width) for i in self.iterweekdays())
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/calendar.py" in <genexpr>
  297\.         return ' '.join(self.formatweekday(i, width) for i in self.iterweekdays())
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/calendar.py" in formatweekday
  511\.         with TimeEncoding(self.locale) as encoding:
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/calendar.py" in __enter__
  490\.         _locale.setlocale(_locale.LC_TIME, self.locale)
File "/Users/mo/Projects/pythonic/mazban/lib/python2.7/locale.py" in setlocale
  531\.     return _setlocale(category, locale)

Exception Type: Error at /
Exception Value: unsupported locale setting 
```

有什么想法可能导致这种情况吗？

**更新：**

当我登录到终端并写下“语言环境”时，我得到了以下信息

```
(mazban)Mohammed-Mughrabis-MacBook-Pro:mazban mo$ locale
LANG="en_US.UTF-8"
LC_COLLATE="en_US.UTF-8"
LC_CTYPE="en_US.UTF-8"
LC_MESSAGES="en_US.UTF-8"
LC_MONETARY="en_US.UTF-8"
LC_NUMERIC="en_US.UTF-8"
LC_TIME="en_US.UTF-8"
LC_ALL= 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T16:01:54.790

为了将来参考，我通过将 LC_ALL 导出为“en_US”解决了这个问题，这解决了我的问题

`export LC_ALL='en_US'`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-07T15:55:46.867

您在代码中的哪个位置设置它？这对我有用，因为 Linux 和 OSX 机器各不相同，而且我在两者上都使用了我的代码，所以我写了这个异常块：

```
try:
    import locale
    locale.setlocale(locale.LC_ALL, 'en_US.utf8')
except Exception:
    try:
        locale.setlocale(locale.LC_ALL, 'en_US.UTF-8')
    except Exception as e:
        messages.error(request, 'An error occurred: {0}'.format(e)) 
```

# jquery - 如何在 jquery 中通过 attr() 获取 text()

> ID：10882842
> 
> 赞同：3
> 
> 时间：2012-06-04T14:16:35.027
> 
> 标签：jquery

这是问题

```
<div class="question">
            <div class="button" data-q="1" data-a="1"><a href="javascript:void();">2002</a></div>
            <div class="button" data-q="1" data-a="2" data-g="true"><a href="javascript:void();">2010</a></div>
            <div class="button" data-q="1" data-a="3"><a href="javascript:void();">1985</a></div>
            <div class="button" data-q="1" data-a="4"><a href="javascript:void();">2013</a></div>
        </div> 
```

我想为设置了 data-g 的 attr() 设置 text() 值。

现在我尝试的代码不起作用

```
$('.question .button a').click(function(){    
  var aText = $(this).parents('.question').find('data-g').text();
  return aText;
}); 
```

我试过这个，但我在 .question DIV (2002,2010,1985,2013) 中得到了所有文本

```
$('.question .button a').click(function(){    
  var aText = $(this).parents('.question').text();
  return aText;
}); 
```

那么我怎样才能只有带有 data-g 属性的 DIV 的结果，并且只获得 2010 作为文本。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T14:17:54.567

```
$('.question .button a').click(function() {
    var aText = $(this).closest(".question").find("[data-g]").text();
                      // to check for `true` use ("[data-g='true']")
    console.log(aText);
});​ 
```

**演示：http:** [//jsfiddle.net/2ny7j/](http://jsfiddle.net/2ny7j/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T14:19:48.587

像这样使用它

```
$('.question .button a').click(function(e){
  e.preventDefault();    
  var aText = $(this).closest('.question').find("div[data-g]").text();
  alert(aText);
  return aText;
});​ 
```

**笔记**

从该函数返回`aText`会将该值返回到代码中的任何位置，因为这是一个回调函数，更多从单击回调返回的值在 jQuery 中具有不同的含义，这可能会导致意外行为。如果您需要将该值传递给其他地方，则必须使用该值调用另一个函数，例如

```
someFunction(aText); 
```

[工作小提琴](http://jsfiddle.net/joycse06/2ny7j/1/)

检查 jQuery[`has attribute selector`](http://api.jquery.com/has-attribute-selector/)

# ruby-on-rails - ActiveRecord::ConnectionNotEstablished 与 PostgreSQL 9.1.3 和 RoR 3.2.5

> ID：10882845
> 
> 赞同：2
> 
> 时间：2012-06-04T14:16:44.210
> 
> 标签：ruby-on-rails, macos, postgresql, homebrew

我刚刚用自制软件安装了 PostgreSQL：

```
$ brew install postgresql 
```

我安装了 pg gem：

```
 $ gem install pg -- --with-pg-config= '/usr/local/var/postgres/postgresql.conf' 
```

我将应用程序的 database.yml 更改为

```
development:
  adapter: postgresql
  encoding: unicode
  database: rails_dev
  pool: 5
  username: vise890
  password:

test:
  adapter: postgresql
  encoding: unicode
  database: rails_test
  pool: 5
  username: vise890
  password:

production:
  adapter: postgresql
  encoding: unicode
  database: ddb
  port: 5432
  pool: 5
  username: postgres
  password: admin 
```

但是，每当我加载任何页面时，都会出现错误：

```
ActiveRecord::ConnectionNotEstablished 
```

我可以使用 pgAdmin (u:vise890 P:{none}) 连接到数据库并且我看到了数据库。

我正在做Ruby on Rails 教程中的[example3](http://ruby.railstutorial.org/chapters/static-pages#sec%3astatic_pages_exercises)

如果你想检查整个事情：[Sample App github branch](https://github.com/vise890/sample_app/tree/postgres)

提前谢谢各位！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:29:31.710

好的不要紧。我从头开始，它奏效了。如果您有兴趣，这[是演练](http://peg.gd/2p2)

# jquery - 使用jquery按类列出元素内容

> ID：10882847
> 
> 赞同：0
> 
> 时间：2012-06-04T14:16:53.483
> 
> 标签：jquery, forms

我有几个使用 PHP 动态创建的表单。我想列出每个表格上方的所有必填字段。

t 应如下所示：

```
<div class="mandatory_list">Mandatory fields: first name, email</div>

<form>
<label>first name*</label><input type="text" />
<label>last name</label><input type="text" />
<label>email*</label><input type="text" />
<label>comments</label><input type="text" />
</form> 
```

如果它可以简化事情，我也可以给所有强制标签一个单独的类。我走了这么远：

```
<script>
    var mandatory= ( $("label:contains('*')").text() );
    $('#mandatory_list').html("Mandatory fields: " + mandatory);
</script> 
```

这给了我以下输出：“必填字段：名字*电子邮件*”。所以这意味着我必须用逗号替换所有星号。可能有更好的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:22:38.577

你可以做：

```
var mandatory= ( $("label:contains('*')").text().split('*').join(', ') );
$('#mandatory_list').html("Mandatory fields: " + mandatory); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T15:01:03.877

我认为强制字段上的类更容易，但这只是选择器的偏好：

：首先，去掉列表中多余的文本并添加类：

```
<div class="mandatory_list">Mandatory fields:</div> 

<form> 
<label class='mandatory'>first name*</label><input type="text" /> 
<label>last name</label><input type="text" /> 
<label class='mandatory'>email*</label><input type="text" /> 
<label>comments</label><input type="text" /> 
</form> 
```

现在填充列表，删除您指定的最后一个逗号：

```
var myList = $('.mandatory_list').text();
$('.mandatory').each(function() {
    myList += ' ' + $(this).text().replace('*', ',');
});
myList = myList.slice(0, myList.length - 1);
$('.mandatory_list').text(myList); 
```

编辑：适应您的“多种”形式

```
$('form').each(function() {
    var myHeader = $(this).prev('.mandatory_list');
    var myList = myHeader.text();
    $(this).find('.mandatory').each(function() {
        myList += ' ' + $(this).text().replace('*', ',');
    });
    myList = myList.slice(0, myList.length - 1);
    myHeader.text(myList);
}); 
```

# jquery - 这里使用的是什么 JQuery 插件？

> ID：10882850
> 
> 赞同：1
> 
> 时间：2012-06-04T14:16:56.010
> 
> 标签：jquery, jquery-plugins, imagemap, zooming, seadragon

我在 BBC 上找到了这个出色的图像地图插件：[http ://www.bbc.co.uk/news/uk-18295433](http://www.bbc.co.uk/news/uk-18295433)

突出显示的链接本质上是普通标签，它们的位置设置为绝对，以将它们悬停在图像上的不同位置。然后他们使用 javascript 插件文件根据单击的标签放大图像上的区域。javascript插件文件在这里： http: [//node1.bbcimg.co.uk/glow/glow/map.1.7.7.js](http://node1.bbcimg.co.uk/glow/glow/map.1.7.7.js)

但是我在任何地方都找不到开源版本。有谁知道类似的东西或这个插件实际上叫什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T14:29:20.163

这是使用微软的 Deep Zoom - [Seadragon Ajax](http://expression.microsoft.com/en-us/gg413360)。

SeaDragon组件还附带[**ASP.NET**](http://gallery.expression.microsoft.com/SeadragonAjax) [Ajax Control Toolkit](http://www.asp.net/ajaxlibrary/AjaxControlToolkitSampleSite/Seadragon/Seadragon.aspx)。

它目前在[开源兼容的 BSD 许可下获得许可](https://getsatisfaction.com/livelabs/topics/seadragon_ajax_license)。

# firefox - 如何让 HTML 5 视频播放器在 PC Firefox 上播放我的视频？

> ID：10882854
> 
> 赞同：1
> 
> 时间：2012-06-04T14:17:20.433
> 
> 标签：firefox, video, html5-video, m4v, video.js

[我正在使用 Win XP，Service Pack 3。我有一个 M4V 视频，我正在尝试使用此处找到的 HTML 5 视频播放器 - http://videojs.com/](http://videojs.com/)将其嵌入网页中。当我通过 Apache 2.2 查看此页面时，视频在 Chrome 和 IE 7 上可以正常播放，但在 Firefox 上却不行（只是一个没有视频控件的黑色方块）...

```
<!DOCTYPE HTML>
<html>
<head>
<link href="css/video-js.css" rel="stylesheet" />
<script src="js/video.js"></script>

</head>
<body>

<video id="my_video_1" class="video-js vjs-default-skin" controls
  preload="auto" width="960" height="540" poster="css/video-js.png"
  data-setup="{}">
  <source src="videos/unpacking_w_students.m4v" type='video/m4v'>
</video>

</body>
</html> 
```

任何想法可能出了什么问题？如果有一些额外的东西我可以添加到网页中以帮助 Firefox 播放它，那将是理想的，但如果有一些其他设置需要调整，那也很高兴知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T18:08:55.020

在 Firefox 中仅使用 mp4/m4v 时，Video.js 应该回退到 Flash，就像在 IE7 中一样。可能是个愚蠢的问题，但是您在 Firefox 中安装了 Flash 吗？

否则，它是否会在 JavaScript 控制台中抛出任何错误，或者是否有我们可以查看的实时页面？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:13:31.473

您只发送 H.264 数据。

Firefox 没有提供 H.264 解码器的专利许可，因此它不支持该视频格式。它确实支持 Theora 和 VP8。

# ios - 无限滚动后，mediaelement.js 在 ios 中不起作用

> ID：10882855
> 
> 赞同：0
> 
> 时间：2012-06-04T14:17:22.307
> 
> 标签：ios, ajax, mediaelement.js, infinite-scroll, jquery-isotope

我在带有无限滚动和同位素 jquery 插件的列表页面中通过 mediaelement.js 制作了一些媒体项目（视频、音频）。我使用无限滚动进入下一页。这是一个ajax插件。第一页有一个视频项目（c1），第二页有一个音频项目（c2）。滚动到底部时，将加载第二页（c2 音频项）。问题是当页面在ipad和iphone上运行时，无限滚动第二页时，c1视频无法播放，一直在加载。它在 pc 的 firefox 和 chrome 中运行良好。请帮我检查代码。 [（这是链接。）](http://www.uiueux.com/test3211/h5player/test-h5plyer.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:19:36.083

**我得到了答案。**

这段代码没问题，希望对某人有所帮助：

```
jQuery(newElements).find('audio,video').mediaelementplayer(); 
```

# android - Android VideoView：从父视图中删除视频后变黑

> ID：10882857
> 
> 赞同：3
> 
> 时间：2012-06-04T14:17:31.277
> 
> 标签：android, video-streaming, fullscreen, android-videoview

我目前正在使用 VideoView 播放 rtsp 实时流媒体源。这工作正常。

VideoView 最初位于带有其他元素的片段内，处于“正常”状态，我正在尝试实现全屏切换按钮。

要进入全屏模式，我将 VideoView 从其父级（LinearLayout）中删除，然后将其添加到另一个 LinearLayout，使用 getActivity().addContentView() 添加到其他所有内容之上，代码如下：

```
 LayoutInflater lf = getActivity().getLayoutInflater();          
    vFullScreen = lf.inflate(R.layout.full_screen, myViewGroup, false);             

    LinearLayout fullscreenCont = (LinearLayout) vFullScreen.findViewById(R.id.fullscreen_container);

    ((ViewGroup) vsPlayer.getParent()).removeView(vsPlayer);

    fullscreenCont.addView(vsPlayer);

    LayoutParams params = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
    getActivity().addContentView(vFullScreen, params); 
```

问题是一旦从原始父视图中删除视频就会变黑。

我想要实现的是保留视频实例以避免再次重新连接/缓冲，但我不知道如何在父母切换期间保留视频播放，有什么想法吗？

编辑：

如果我暂停 videoView 然后恢复它，如下所示：

```
LayoutInflater lf = getActivity().getLayoutInflater();          
vFullScreen = lf.inflate(R.layout.full_screen, myViewGroup, false);             

LinearLayout fullscreenCont = (LinearLayout) vFullScreen.findViewById(R.id.fullscreen_container);

vsPlayer.getVideoView().suspend();
((ViewGroup) vsPlayer.getParent()).removeView(vsPlayer);

fullscreenCont.addView(vsPlayer);

LayoutParams params = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
getActivity().addContentView(vFullScreen, params);
vsPlayer.getVideoView().resume(); 
```

视频播放被中断（变黑几秒钟），但随后恢复，这好多了，但并不完美，因为恢复播放需要很长时间。

另一个不太好的部分是 VideoView 类的 suspend() 和 resume() 方法在 API 级别 8 及更高级别可用，我需要与 API 级别 7 兼容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T15:27:24.623

您的问题是您正在使用的 VideoView 变黑并在视图切换之间暂时徘徊吗？

如果是这样，我已经花了整整一周的时间试图找出导致该问题的原因。我无法找出实际原因，但我的解决方法确实阻止了 VideoView 通过屏幕更改持续存在：

```
public void hideVideoView(){        
    runOnUiThread(new Runnable() {
        public void run() {
            findViewById(R.id.yourVideoView).setVisibility(View.INVISIBLE);
        }
    });    
} 
```

我基本上只是在视图切换时将视图设置为不可见，如果重新加载视图，我只需将其设置回 View.Visible

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:58:48.657

这可能不会:) 解决您的问题，但您可以在删除 VideoView 之前找到您所在的位置：

```
long progress = vsPlayer.getCurrentPosition(); 

LayoutInflater lf = getActivity().getLayoutInflater();          
vFullScreen = lf.inflate(R.layout.full_screen, myViewGroup, false);             

LinearLayout fullscreenCont = (LinearLayout)    vFullScreen.findViewById(R.id.fullscreen_container);

((ViewGroup) vsPlayer.getParent()).removeView(vsPlayer);

fullscreenCont.addView(vsPlayer);

LayoutParams params = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
getActivity().addContentView(vFullScreen, params);

vsPlayer.seekTo(progress); 
```

前段时间我实际上遇到了同样的问题。我最终做的是将 VideoView 的 layoutparams 更改为 match_parent 而不是删除它。

```
mVideoView.getLayoutParams().width = LayoutParams.MATCH_PARENT;
mVideoView.getLayoutParams().height = LayoutParams.MATCH_PARENT; 
```

# java - 只用一个查询执行批处理？

> ID：10882860
> 
> 赞同：1
> 
> 时间：2012-06-04T14:17:36.423
> 
> 标签：java, sql, jdbc, prepared-statement

**我的一般问题是**`preparedStatement.executeBatch()`：如果批处理中只有一个查询，调用是否效率低/不好？

我正在为[Java Helper Library](https://github.com/kentcdodds/Java-Helper)编写一个通用方法来执行查询。有一个名为 javabean 的 javabean`HelperQuery`包含一个数组列表，另一个名为 javabean 的 javabean`QueryParameter`包含一个类型（如`STRING`、`BLOB`、`INT`等）和一个值。`QueryParameter`用于填充' `HelperQuery`s 。`PreparedStatement`在许多情况下，只有一个`QueryParameter`s 数组。

**我的具体问题是**：如果只有一个`QueryParameter`s 数组，我应该以不同的方式处理事情，还是不管有多少 s 都可以处理完全相同的事情`QueryParameter`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:17:37.033

[`executeBatch`](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#executeBatch%28%29)是来自的父级的 " `super`" 方法，它返回一个指示执行查询的成功/失败并返回一个. 因此，最好让这两个方法调用完全不同，以便开发人员可以不同地处理它们。我会推荐：`PreparedStatement``Statement``int[]`[`executeQuery`](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html#executeQuery%28%29)`ResultSet`

1.  一个`executeQuery(HelperQuery helperQuery)`方法将返回关联的`ResultSet`并且只会从s 中获取第一个`QueryParameter`s `HelperQuery`（为了方便）和另一个开发人员可以指定`QueryParameter`要使用的集合的方法（让他们指定`QueryParameter`列表的数量或直接传入`QueryParameter`s 显式（我推荐两者中的第二个））。
2.  一个`executeBatch(HelperQuery helperQuery`将返回的方法，`int[]`开发人员可以根据需要处理它。

让用户（在这种情况下为开发人员）有能力做他们想做的事总是好的（但也为他们提供一个简单的解决方案来执行常见任务）。

# java - Mac OS X Lion下的gettext for eclipse与maven

> ID：10882865
> 
> 赞同：0
> 
> 时间：2012-06-04T14:18:15.893
> 
> 标签：java, eclipse, maven, osx-lion, gettext

我在 Eclipse 中有一个使用 apache maven 构建的 Java 项目。

问题是由于缺少 gettext 函数，该项目无法正确编译。

所以我做了一些搜索并安装了gettext，如下所示：

从以下网址下载 Gettext：[http ://www.gnu.org/software/gettext/](http://www.gnu.org/software/gettext/)

运行这些命令

```
tar -zxf gettext-0.18.1.1.tar.gz
cd  gettext-0.18.1.1 
```

然后在 gettext-0.18.1.1 中运行这些命令

```
./configure
 make
 sudo make install 
```

不幸的是，这并不能解决我的问题。

我还在这里找到了一些关于在 lion 上修补 gettext 的内容： [https](https://gist.github.com/1014218) ://gist.github.com/1014218 但我真的不明白在这里做什么，甚至不确定这是否能解决我的问题。

如果我尝试使用以下命令在终端中编译我的项目：

```
§ maven compile 
```

我收到这个警告：

```
[INFO] [gettext:dist {execution: convert-po-class}]
[INFO] Processing de/de.po
[WARNING] msgfmt --java2 -d /.../workspace/target/classes -r **.**.**.**.Translation -l de /.../workspace/po/de/de.po 
```

（...和**出于隐私原因）

（在 Eclipse 中，还将构建器从 java builder 更改为 maven。如果我尝试在 eclipse 中而不是在终端中运行项目，我会收到此错误：

```
 NoClassDefFoundError: org/xnap/commons/i18n/I18nFactory 
```

)

编辑：我还找到了这个链接： [http ://code.google.com/p/rudix/source/detail?r=0e7c428f9609](http://code.google.com/p/rudix/source/detail?r=0e7c428f9609)

但我什至找不到我被告知要更改的文件。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:19:05.643

`I18nFactory`是`gettext commons`库中的一个类，因此您需要将其添加到项目的类路径/依赖项中。你可以在[这里](https://code.google.com/p/gettext-commons/)找到一些代码片段和一个 Maven 配置示例。

# javascript - 如何使用 jquery 更改 html5 画布元素的颜色？

> ID：10882872
> 
> 赞同：5
> 
> 时间：2012-06-04T14:18:36.757
> 
> 标签：javascript, jquery, html, html5-canvas

基本上我的页面上有几个画布图纸我想要发生的是当激活 jquery 功能时，画布图纸更改为我选择的颜色。我认为它涉及访问定义原始颜色的 context.fillStyle 的某种方式，但我不确定如何更改它。此外，是否可以在第一个实例中为画布绘制一个 css 样式，然后在处理 jquery 时更改该样式？

**HTML**

```
 <canvas class="canvaslink" id="canvasId" width="50" height="50"></canvas>

 <canvas class="canvaslink" id="canvasId2" width="50" height="50"></canvas> 
```

**画布脚本**

```
<script>
function drawSomething(canvas) {
var context = canvas.getContext("2d");

var width = 125;  // Triangle Width
var height = 45; // Triangle Height
var padding = 5;

// Draw a path
context.beginPath();
context.moveTo(padding + width-125, height + padding);        // Top Corner
context.lineTo(padding + width-90,height-17 + padding); // point
context.lineTo(padding, height-35 + padding);         // Bottom Left
context.closePath();

// Fill the path
context.fillStyle = "#9ea7b8";
context.fill();

}

drawSomething(document.getElementById("canvasId"));
drawSomething(document.getElementById("canvasId2"));

</script> 
```

**jQuery 脚本**

```
<script>
var counter = $('#counter div strong');

var counterH2 = $('h2 strong');

$('#box').click(function(){
    $("#counter").css("display", "block");
     var counterValue = counter.text();
     counterValue = ++counterValue;
     counter.text(counterValue);
     counterH2.text(counterValue);
     if (counterValue == 3){
        alert("Thanks for visiting!");
        $('body').css({"background-color":"#9ea7b8"});
        $('body').css({"color":"#11112c"});

        **//I'd like to change the canvas colour here!**

     }

});
</script> 
```

非常感谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-06-02T15:10:28.410

就这么简单：

```
document.getElementById("ID").style.background = 'color'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T14:28:41.627

你可以这样做：

```
var context = canvas.getContext('2d');
context.fillStyle = "#000000";
context.fill();
// Other properties ... 
```

[您可以在此处](http://www.emanueleferonato.com/2010/09/14/html5-game-creation-prototype/)查看 HTML5 画布教程（非常简单）。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-10T15:31:33.617

如果这有任何用处，这是我最终得到的解决方案：

**首先是 HTML：**

```
<canvas class="canvaslink" id="canvasId" width="50" height="50"></canvas>
<canvas class="canvaslink" id="canvasIda" width="50" height="50"></canvas>

<canvas class="canvaslink" id="canvasId2" width="50" height="50"></canvas>
<canvas class="canvaslink" id="canvasId2a" width="50" height="50"></canvas> 
```

我创建了重复的画布元素，我使用 CSS 来隐藏这些元素：

**CSS：**

```
#canvasIda, canvasId2a {
    display:none;
} 
```

**然后我对原始Jquery 脚本**进行了以下更改：

 **```
<script>
var counter = $('#counter div strong');

var counterH2 = $('h2 strong');

$('#box').click(function(){
    $("#counter").css("display", "block");
     var counterValue = counter.text();
     counterValue = ++counterValue;
     counter.text(counterValue);
     counterH2.text(counterValue);
     if (counterValue == 3){

        $('body').css({"background-color":"#9ea7b8"});
        $('body').css({"color":"#11112c"});
        $('a').css({"color":"#11112c"});

     //remove the previous canvas elements

        element = document.getElementById("canvasId");
        element2 = document.getElementById("canvasId2");

        element.parentNode.removeChild(element);
        element2.parentNode.removeChild(element2);

    //function to draw new canvas elements with new desired colour

        function drawSomething2(canvas) {
            var context = canvas.getContext("2d");

            var width = 125;  // Triangle Width
            var height = 45; // Triangle Height
            var padding = 5;

    // Draw a path

            context.beginPath();
            context.moveTo(padding + width-125, height + padding);        // Top Corner
            context.lineTo(padding + width-90,height-17 + padding); // point
            context.lineTo(padding, height-35 + padding);         // Bottom Left
            context.closePath();

    // Fill the path
            context.fillStyle = "#11112c";
            context.fill();

        }
   //draw the canvas elements

        drawSomething2(document.getElementById("canvasIda"));
        drawSomething2(document.getElementById("canvasId2a"));

   //display the previously hidden elements containing the new canvas drawings

        $('#canvasIda').css({"display":"block"});
        $('#canvasId2a').css({"display":"block"});

     }

}); 
```

我相信很多人可以想出一个更有效的解决方案，但这很有效，我没有抱怨。**

# android - QRScanner：startActivityForResult 抛出 ActivityNotFound 异常

> ID：10882878
> 
> 赞同：0
> 
> 时间：2012-06-04T14:19:31.930
> 
> 标签：android, android-intent, android-activity, qr-code

在我的应用程序中，我尝试调用结果的意图，但它显示“未找到活动异常”。

```
Intent intent = new Intent("com.google.zxing.client.android.SCAN");
intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
startActivityForResult(intent, 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:22:54.670

可能没有安装扫描仪？尝试这个：

```
if (checkpackage(context, "com.google.zxing.client.android")) {
        ((Activity) c).startActivityForResult(new Intent("com.google.zxing.client.android.SCAN"), 0);
    } else {
        Uri marketUri = Uri.parse("market://details?id=com.google.zxing.client.android");
        Intent marketIntent = new Intent(Intent.ACTION_VIEW).setData(marketUri);
        ((Activity) c).startActivity(marketIntent);
        Toast.makeText(c, "Es ist kein Barcodescanner installiert", Toast.LENGTH_SHORT).show();
    }

public static boolean checkpackage(Context ctx, String PACKAGE_NAME) {
    try {
        PackageInfo info = ctx.getPackageManager().getPackageInfo(PACKAGE_NAME, 0);
        return info != null;

    } catch (PackageManager.NameNotFoundException e) {
        return false;
    }
} 
```

# css - Chrome中奇怪的CSS webkit-transform-scale悬停

> ID：10882879
> 
> 赞同：1
> 
> 时间：2012-06-04T14:19:34.373
> 
> 标签：css, hover, scale, css-transforms

我对编码很陌生，但在计算机上经验丰富。在以下网站上，我正在创建一个放大悬停效果，仅用 css 编写。

链接：http: [//3514.linux3.testsider.dk/da/produkter/skumdetektorer](http://3514.linux3.testsider.dk/da/produkter/skumdetektorer) 如果您在 Chrome 中查看第 1、4、5、6、7... 图像，它们有严重的堆叠/层/悬停时的优先级问题。

一周前每个浏览器都运行良好，但突然 Chrome 开始出现问题......

起初我在所有浏览器上都遇到了同样的问题，但后来我通过搜索互联网修复了它，发现 z-index 设置是“页面优先级”问题的答案。

我尝试搜索互联网的每个角落，每一个可能与该主题相关的单词，但一无所获。

以下是现场使用的代码：

```
<style type="text/css">

.hovergallery img {
    -webkit-transform:scale(1); /*Webkit:Scale down image to 0.8x original size*/
    -moz-transform:scale(1); /*Mozilla scale version*/
    -o-transform:scale(1); /*Opera scale version*/
    -webkit-transition-duration:0.5s; /*Webkit:Animation duration*/
    -moz-transition-duration:0.5s; /*Mozilla duration version*/
    -o-transition-duration:0.5s; /*Opera duration version*/
    opacity:1; /*initial opacity of images*/
    -webkit-perspective:1000; 
    -webkit-backface-visibility:hidden;
}

.hovergallery img:hover {
    -webkit-transform:scale(1.6); /*Webkit:Scale up image to 1.2x original size*/
    -moz-transform:scale(1.6); /*Mozilla scale version*/
    -o-transform:scale(1.6); /*Opera scale version*/
    box-shadow:0px 0px 30px gray; /*CSS3 shadow:30px blurred shadow all around image*/
    -webkit-box-shadow:0px 0px 30px gray; /*Safari shadow version*/
    -moz-box-shadow:0px 0px 30px gray; /*Mozilla shadow version*/
    opacity:1; /*initial opacity of images*/
    -webkit-perspective:1000;
    -webkit-backface-visibility:hidden;
    z-index:999;
}
    </style> 
```

`webkit-perspective:`并`webkit-backface-visibility:`用于阻止 chrome 中的图像在悬停时闪烁。

`z-index:`用于覆盖 pageholder-shadow 优先级（页面右侧为 998），以便图像在悬停时越过而不是下方。正如您在 Firefox 或任何其他浏览器中查看链接时所看到的...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T14:11:56.703

尝试添加`position:relative;`到您的`.hovergallery img`

```
.hovergallery img {
    -webkit-transform:scale(1); /*Webkit:Scale down image to 0.8x original size*/
    -moz-transform:scale(1); /*Mozilla scale version*/
    -o-transform:scale(1); /*Opera scale version*/
    -webkit-transition-duration:0.5s; /*Webkit:Animation duration*/
    -moz-transition-duration:0.5s; /*Mozilla duration version*/
    -o-transition-duration:0.5s; /*Opera duration version*/
    opacity:1; /*initial opacity of images*/
    -webkit-perspective:1000; 
    -webkit-backface-visibility:hidden;
    position:relative;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T06:53:58.323

我有类似的问题。我有图片库，我在悬停效果中使用了不透明度、变换和缩放效果。缩放后的每个图像都变得透明并在背景中显示其他图像我根据上述讨论修改了代码并将其粘贴在下面

```
.gallary{
    text-align:center;  

}

.gallary_img {
    display:inline-block;    
}

.gallary_img img{
border: 1px solid #660000;
display:inline-block;  
opacity:0.4;
-webkit-transition: -webkit-transform 0.5s ease-in;
**position:relative;**
}
.gallary_img img:hover {
    opacity:1.0;
    filter:alpha(opacity=100); /* For IE8 and earlier */
    border: 1px solid #660000;
    -moz-transform:  scale(2);
    -webkit-transform:  scale(2);
    transform: scale(2);
    **z-index:999;**

} 
```

# machine-learning - 这种情况下合适的机器学习算法是什么？

> ID：10882882
> 
> 赞同：2
> 
> 时间：2012-06-04T14:19:40.270
> 
> 标签：machine-learning, neural-network, data-mining, regression, bayesian-networks

我正在研究一个看起来像这样的机器学习问题：

输入变量

```
 Categorical

   a

   b

   c

   d

 Continuous

   e 
```

输出变量

```
Discrete(Integers)
    v
    x
    y

Continuous
    z 
```

我面临的主要问题是输出变量并不完全相互独立，并且它们之间没有可以建立的关系。也就是说，存在依赖关系，但不是由于因果关系（一个值高并不意味着另一个值也会很高，但另一个值更高的机会会提高）

一个例子是：

v - 广告展示次数

x - 广告点击次数

y - 转化次数

z - 收入

现在，要点击广告，它必须首先出现在搜索中，因此点击在某种程度上取决于印象。

同样，对于要转换的广告，它必须首先被点击，所以转换在某种程度上依赖于点击。

因此，运行 4 个预测每个输出变量的问题实例对我来说没有意义。事实上，应该有某种方法来预测所有 4 个一起处理它们的隐式依赖关系。

但是正如您所看到的，不会有直接的关系，实际上会有一个涉及但无法手动计算的概率。

加上输出变量不是分类的，但实际上是离散的和连续的。

关于如何解决这个问题的任何意见。还指导我了解相同的现有实现以及使用哪个工具包来快速实现解决方案。

只是一个随机猜测 - 我认为贝叶斯网络可以解决这个问题。你怎么看 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:00:29.230

贝叶斯网络在您的情况下会做得很好。您的网络也不会那么大，因此您可以使用精确的推理算法，如图形消除或连接树。如果您决定使用 BN，那么您可以使用 Kevin Murphy 的 BN 工具箱。[这](https://code.google.com/p/bnt/)是一个链接。对于使用 Gibbs 采样进行近似蒙特卡罗推理的更通用的工具箱，您可以使用[BUGS](http://www.mrc-bsu.cam.ac.uk/bugs/)。

编辑：

举个例子，看看著名的喷水器[例子](http://www.cs.ubc.ca/~murphyk/Bayes/bnintro.html)。对于完全离散的变量，您可以在链接中定义条件概率表。例如，您说鉴于今天多云，下雨的概率为 0.8。您定义所有概率分布，其中图表显示因果关系（即如果云然后下雨等）然后作为查询，您向推理算法提出问题，例如，假设草是湿的；是否多云，是否下雨，洒水器是否打开等等。

要使用 BN，需要一个系统模型，该模型根据因果关系（有向无环图）和概率转移进行描述。如果您想了解系统参数，可以使用[EM 算法](http://en.wikipedia.org/wiki/Expectation%E2%80%93maximization_algorithm)等技术。然而，学习图结构是一项非常艰巨的任务，在这种情况下，有监督的机器学习方法会做得更好。

# mysql - 使用 DSN ODBC 2 连接到 ONLINE MySQL 数据库

> ID：10882887
> 
> 赞同：0
> 
> 时间：2012-06-04T14:20:03.840
> 
> 标签：mysql, ms-access, odbc, ms-access-2007, dsn

我正面临这个问题： [stackoverflow 问题](https://stackoverflow.com/questions/6218195/connect-to-online-mysql-database-using-dsn-odbc) ，除了我的主机似乎没有 cpanel。由于链接问题中给出的答案与 cpanel 相关，因此对我没有帮助。有什么我可以做的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T15:15:43.443

您似乎正试图从位于您办公桌上的客户端计算机连接到位于服务提供商服务器场中的 mySQL 服务器实例。您正在尝试使用 mySQL 的 ODBC“驱动程序”来执行此操作，因此您可以使用 MS Access 查看您的 mySQL 数据。（对？）

您需要确保这个特定的托管服务提供商允许远程连接到他们的 mySQL 服务器实例。一些服务提供商，尤其是成本最低的服务提供商，会使用防火墙或其他网络隔离技术来阻止这些远程连接。（他们这样做是因为当只有他们自己的 Web 服务器可以连接到他们的 mySQL 服务器时，更容易控制安全性和性能。）如果您的服务提供商根据策略阻止所有这些连接，您将需要另一个服务提供商.

如果他们确实允许远程连接，您可能需要为您的 mySQL 数据库启用这些连接。这就是另一个问题中提到的“cpanel”功能。cpanel 是一种流行的控制面板 Web 应用程序，由许多商业托管服务提供商提供，允许其客户进行自助控制。如果您的服务提供商不使用 cpanel，则您必须找出他们使用的是什么。即使他们确实使用 cpanel，他们可能仍然不允许远程 mySQL 连接。

您还必须确保您的客户端计算机（运行 ODBC 的那台计算机）和用户在 mySQL 用户数据库中具有授权。

您最好向您的服务提供商提供服务票证，询问他们是否提供远程 mySQL 访问。如果他们说“是”，那么您可以就设置向他们寻求建议和帮助。

请记住，打开 mySQL 服务器实例以通过可公开访问的 Internet 直接连接通常不被认为是一种良好的安全做法。如果您的数据库中的数据以任何方式是私有的（例如人们的身份信息），您确实需要非常小心。

# java - SWT 按钮网格

> ID：10882890
> 
> 赞同：1
> 
> 时间：2012-06-04T14:20:15.847
> 
> 标签：java, button, grid, swt

这是一个困扰我3天的问题。我必须重写一个小tictactoe（nxn的五子棋）游戏的UI。问题是，当我创建 swing GUI 时，我创建了一个继承 JButton 属性的新类，并为行添加了一个 int，为列添加了一个 int。我不能用 SWT（无继承）做到这一点。有没有办法让我将 i 和 j 的值添加到按钮。

这是 Swing 中的示例：

```
for (int i = 0; i < rows; i++) {
    for (int j = 0; j < cols; j++) {
        final MyJButton button = new MyJButton(i, j);
        button.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                MoveResult move = game.move(button.getRow(), button.getCol());
                    switch (move) {
                        case ValidMove:
                            button.setBackground(game.getCurrentPlayer().getColor());
                            game.changePlayer();
                            break;
                    }
                }
            }
        }
    }
} 
```

我为游戏类提供 i 和 j，将其提供给表类以检查移动。

```
if (table.getElement(x, y) != PieceType.NONE) return MoveResult.InvalidMove;
private PieceType[][] table; 
```

有没有办法在 SWT 中做同样的事情，欢迎任何指示。

这是我做的

```
buttonpanel = new Composite(shell, SWT.NONE);
buttonpanel.setLayout(new org.eclipse.swt.layout.GridLayout(cols, true));
buttonTable = new Button[rows][cols];

for (int i = 0; i < rows; ++i){
    for (int j = 0; j < cols; ++j) {
        gridData.heightHint = 45;
        gridData.widthHint = 45;

        Button button = new Button(buttonpanel, SWT.PUSH);
        button.setLayoutData(gridData);
        buttonTable[i][j] = button;
        buttonTable[i][j].addSelectionListener(new buttSelectionListener());    
        // buttonpanel.pack();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:28:16.993

我看到两个解决方案：

*   使用 Button 的 setData 方法（在 Widget 超类中定义）关联包含 x 和 y 的对象（您将在提供给侦听器的事件对象中找到这些数据）
*   为每个按钮使用不同的侦听器

在您的情况下，第一个解决方案似乎是最自然的解决方案。这意味着创建一个包含 x 和 y 的类（我们称之为 Cell），然后做

```
button.setData(new Cell(i, j)); 
```

在你的听众中使用

```
game.move(e.data.x, e.data.y); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:33:31.167

选项包括：

*   子类化 Button，并重写它的 checkSubclass() 方法，以表明您有责任避免有害地进行子类化。
*   使每个 Button 成为一个 Composite，它允许子类化，并在 Composite 中放置一个 Button。
*   为每个按钮创建一个单独的侦听器。
*   在单个侦听器中，在 buttonTable 中搜索调用该侦听器的按钮。

# java - 如何使 J2EE weblogic 应用程序对数据库问题具有弹性

> ID：10882904
> 
> 赞同：2
> 
> 时间：2012-06-04T14:21:21.203
> 
> 标签：java, weblogic, datasource, failover, weblogic11g

我有一个在**Oracle Weblogic Server 11g**上运行的 Web 应用程序。它使用应用服务器中定义的数据源连接到 Oracle 数据库（也是 11g），它的类是

> oracle.jdbc.xa.client.OracleXADataSource

*   如果由于某种原因数据库不存在然后又返回，则应用程序运行正常（它在尝试访问数据库时出现异常，但这很好，然后当数据库返回时可以再次获得一些新连接）

*   但是，**如果数据库在 weblogic 服务器启动期间关闭**， **则数据源未部署**在服务器上，并且应用程序由于没有任何可用的数据源而引发异常，部署被标记为失败，当然没有任何东西可以自动修复此问题。

**即使**在服务器启动期间数据库不存在，是否有办法部署数据源？（这样当数据库恢复时应用程序变得可用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:48:09.700

为什么要在没有有效数据源的情况下部署应用程序？

您可能会伪造数据源（创建一个具有相同 JNDI 名称的虚拟数据源）并假设应用程序在启动时不验证数据源模式，您将获得一个半功能运行的应用程序（这将在第一次 DB 交互时失败）。

当真正的数据源启动并运行时，您将无法切换到它。您仍然需要重新启动应用程序服务器。

**更新：**

根据 J2EE 规范（1.5 版），资源在部署过程中是绑定的。我相信可以实现一个自定义工厂，它将返回虚拟/活动数据源。是否值得努力实施？;)

> EE.5.6.2 部署者的责任
> 
> 将资源管理器连接工厂引用绑定到操作环境中存在的资源管理器连接工厂。例如，部署者可以使用 JNDI LinkRef 机制来创建到资源管理器连接工厂的实际 JNDI 名称的符号链接。资源管理器连接工厂类型必须与 res-type 元素中声明的类型兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:47:25.290

您正在寻找的选项是“连接创建重试”，请查看此[链接](http://docs.oracle.com/cd/E21764_01/web.1111/e13737/ds_tuning.htm)

“如果已设置并且在创建数据源时数据库不可用，WebLogic Server 会在您指定的秒数后再次尝试在池中创建连接，并将继续尝试创建连接直到成功。此选项适用到在服务器启动时创建数据源时创建的连接..."

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-04T23:53:09.410

将“初始容量” [http://docs.oracle.com/cd/E14571_01/web.1111/e13814/jdbc_tuning.htm#i1028616](http://docs.oracle.com/cd/E14571_01/web.1111/e13814/jdbc_tuning.htm#i1028616)设置为 0：weblogic 在启动时不会尝试创建任何连接，如果数据库不可用。

# android - 哪个 SDK 平台更适合开始学习，2.1 还是 4.0.3？

> ID：10882907
> 
> 赞同：0
> 
> 时间：2012-06-04T14:21:27.600
> 
> 标签：android, sdk

我想开始为 android 设备编程，我有 1 个问题要问你。听说安卓是前向兼容的。那么，如果我使用 2.1，我可以在稍后阶段更新应用程序以使其与 4.0.3 一起使用吗？你建议我怎么做？感谢您花时间回答这些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:23:50.553

当然总是从低版本开始`2.1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T14:41:05.790

2.1 非常适合初学者，但我强烈建议使用[Android 支持包](http://developer.android.com/sdk/compatibility-library.html)来学习和实现 Fragment，因为基于 Fragment 的应用程序是 Android 发展的大体方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T14:36:37.303

如果您想开始 Android 开发，如果您不熟悉 Java 环境，我建议您首先学习一些 Java 基础知识。

关于您应该开始使用的 Android Api，我建议您从 2.2 Froyo 开始，它是最稳定的 Api 之一。

android 平台的选择还取决于开发人员希望针对更多设备的事实，这就是为什么 google 提供图表，显示最常用的平台。[您可以在此链接](http://developer.android.com/resources/dashboard/platform-versions.html)中找到此图表。

同样在这个[链接](http://socialcompare.com/fr/comparison/android-versions-comparison)中你可以找到每个平台上的差异矿石改进，你可以参考[android开发者](http://developer.android.com/sdk/android-2.1.html)网站来查看差异

# extjs - 商店中的记录没有在 extjs 中返回

> ID：10882908
> 
> 赞同：0
> 
> 时间：2012-06-04T14:21:27.943
> 
> 标签：extjs, global-variables, local-variables

我是 extjs 的新手，正在根据 Ext.data.store() 的记录数创建一个动态屏幕；getTotalCount/getCount 用于从存储中获取记录数。我需要将记录总数存储在 var 中并返回

我正在尝试做这样的事情

```
function Get_count()
{  
     var num;                            
     CacheStore.on({

           'load':{

            fn : function(store,records,options){
                    num = getTotalCount();
                    //console.info('Store count = ', tsize);
                    //console.info(' count = ', getCount());
            },
            scope: this
    },
    'loadexception' : {
            fn : function (obj,options,response,e){
                    //console.info('error = ', e);
            },
    scope : this
    }

});

     // this is a wrong logic but have to do something similar 
    //return num;  //return num 

    };
    tsize  = Get_count(); 
```

我总是在 tsize 中得到空值。我也尝试了 getCount() 而不是 getTotalCount() 但我遇到了同样的问题。

不知道我哪里错了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:08:32.463

你的逻辑有点戳这里。您不能触发将侦听器添加到商店的函数，该函数将在商店完成加载时挂钩。（你可以，但这是一个微妙的错误）。

您需要做的是在创建它时在商店中声明一个侦听器，其中包含您要在其中使用数字的功能。

```
cacheStore =Ext.create...
cacheStore.on('load',function(store,records,e){
    //dosomestuff that needs the count
    var num=  store.totalCount()
    //now you use the num in here, else you create an async error

    //or you can ...
    my.someFunc(num); 
    //in here, but you can only run it after the store has loaded
},this); 
```

# python - 获取列表和字典值 - Django

> ID：10882910
> 
> 赞同：-2
> 
> 时间：2012-06-04T14:21:43.483
> 
> 标签：python, django

我有个问题。我是 django 的新手，并试图弄清楚如何从列表中获取特定值和从 views.py 中获取字典。我有以下 dict 输出：

```
{'meta_title': u'Alaska State Fair Events', 'varos_id': 2886429L, 'longitude': -149.13053600000001, 'name': u'Palmer', 'thumbnail_id': 8406L, 'image': u'photologue/photos/2c18fe09-275b-4770-aab6-230cff72b2ee.jpg', 'orszag_id': u'US', 'helyszin': u'Alaska State Fair, 2075 Glenn Highway Palmer, AK 99645, United States ', 'slug': u'alaska-state-fair-palmer-ak', 'latitude': 61.580159999999999, 'allam_id': u'AK', 'nev': u'Alaska State Fair, Palmer, AK', 'id': 2886429L} 
```

我想做的很简单。我想解决`image=szorakozohelyquery('image')`可能导致 的变量`image=photologue/photos/2c18fe09-275b-4770-aab6-230cff72b2ee.jpg`

是否有捷径可寻？另外，从列表中执行此操作的最简单方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T14:26:32.520

d.get('image','default value') 如果字典 d 中没有键，将防止您出现键错误

```
>>> d ={'image':'a.jpg'}
>>> d.get('image','not found')
'a.jpg'
>>> d={}
>>> d.get('image','not found')
'not found'
>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T14:24:57.913

`d['image']`将为您获取 key: 的值`'image'`，来自 dict: `d`。

...这将是：`u'photologue/photos/2c18fe09-275b-4770-aab6-230cff72b2ee.jpg'`。

> “此外，从列表中执行此操作的最简单方法是什么？”

列表是一种不同的数据结构：

```
>>> my_list = ['a', 'b', 'c']
>>> print my_list[0]
a 
```

有关列表和字典的更多信息，请参见：[http ://docs.python.org/tutorial/datastructures.html。](http://docs.python.org/tutorial/datastructures.html)

# android - 重新启动 CursorLoader 不反映数据库删除

> ID：10882912
> 
> 赞同：4
> 
> 时间：2012-06-04T14:21:49.107
> 
> 标签：android, database, android-cursorloader

我正在使用 CursorLoader 来跟踪数据库中的数据。可以使用删除此数据库

```
Context.deleteDatabase(databaseName); 
```

删除后我重新启动加载器

```
getLoaderManager().restartLoader(LOADER_ID, null, this); 
```

现在当我收到回调

```
onLoadFinished(Loader<Cursor> loader, Cursor data) 
```

它并不反映数据已经消失。我得到与以前相同的数据。

我在做一些概念上的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:47:41.783

LoaderManager 试图变得聪明并重用加载器。这是针对不同加载程序错误的解决方法，但我认为它可以解决这个问题：

```
 Loader<Object> loader = getLoaderManager().getLoader(0);
    if (loader != null && ! loader.isReset()) {
        getLoaderManager().restartLoader(0, null, mItemsListener);
    } else {
        getLoaderManager().initLoader(0, null, mItemsListener);
    } 
```

# sqlite - 高级 SQLite 更新表查询

> ID：10882914
> 
> 赞同：3
> 
> 时间：2012-06-04T14:22:03.607
> 
> 标签：sqlite

我正在尝试更新如下所示的数据库的表 B：

```
Table A:
id, amount, date, b_id
1,200,6/31/2012,1
2,300,6/31/2012,1
3,400,6/29/2012,2
4,200,6/31/2012,1
5,200,6/31/2012,2
6,200,6/31/2012,1
7,200,6/31/2012,2
8,200,6/31/2012,2

Table B:
id, b_amount, b_date
1,0,0
2,0,0
3,0,0 
```

现在通过这个查询，我可以在一次选择中获得我需要的所有数据：

```
SELECT A.*,B.* FROM A LEFT JOIN B ON B.id=A.b_id WHERE A.b_id>0 GROUP BY B.id

id, amount, date, b_id, id, b_amount, b_date
1,200,6/31/2012,1,1,0,0
3,400,6/29/2012,1,1,0,0 
```

现在，我只想将选定的列金额复制到 b_amount 并将日期复制到 b_date

```
b_amount=amount, b_date=date 
```

导致

```
id, amount, date, b_id, id, b_amount, b_date
1,200,6/31/2012,1,1,200,6/31/2012
3,400,6/29/2012,1,1,400,6/29/2012 
```

我试过 COALESCE() 没有成功。有经验的人对此有解决方案吗？

## 解决方案：

感谢下面的答案，我设法想出了这个。这可能不是最有效的方法，但对于一次性更新来说没问题。这将为您插入每个组的第一个相应条目。

```
REPLACE INTO A SELECT id, amount, date FROM 
(SELECT  A.id, A.amount, B.id as Bid FROM A INNER JOIN B ON (B.id=A.B_id)
ORDER BY A.id DESC) 
GROUP BY Bid; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T18:21:49.000

因此，您正在寻找的似乎是 UPDATE 查询中的 JOIN 。在 mySQL 你会使用

```
UPDATE B INNER JOIN A ON B.id=A.b_id SET B.amount=A.amount, B.date=A.date; 
```

但这不受 sqlite 的支持，因为[这个](https://stackoverflow.com/questions/773441/how-do-i-make-an-update-while-joining-tables-on-sqlite)可能相关的问题指出了这一点。但是，有一个使用 REPLACE 的解决方法：

```
REPLACE INTO B 
SELECT B.id, A.amount, A.date FROM A 
LEFT JOIN B ON B.id=A.b_id 
WHERE A.b_id>0 GROUP BY B.id; 
```

查询将简单地为所有应保持其状态的列填写表 B 的值，并为复制的值填写表 A 的值。确保 SELECT 语句中的列顺序符合表 B 的列顺序，并且所有列都被提及，否则您将丢失这些字段的数据。这对于表 B 的未来更改可能很危险。因此请记住在更改表 B 时更改此查询的列顺序/存在。

有点跑题了，因为您没有要求：`A.b_id`显然是 B.id 的外键。您似乎正在使用`0`外键的值来表示 B 中没有相应的条目。（从您的 SELECT 中推断出来`WHERE A.b_id>0`。）您应该考虑使用该`null`值。当您使用`INNER JOIN`then 而不是时，`LEFT JOIN`您可以完全删除 WHERE 子句。然后星展银行将整理所有不满意的关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:02:59.227

警告 如上所示，某些 RDBMS 将返回 2 行。其他人将返回行的笛卡尔积，即 A 行乘以 B 行。

一种棘手的方法是生成然后执行的 SQL

```
SELECT "update B set b.b_amount = ", a.amount, ", b.b_date = ", a.date, 
" where b.id = ", a.b_id
FROM A LEFT JOIN B ON B.id=A.b_id WHERE A.b_id>0 GROUP BY B.id 
```

现在添加批处理终止符并执行此 SQL。查询结果应如下所示

```
 update B set b.b_amount = 200, b.b_date = 6/31/2012 where b.id = 1 

 update B set b.b_amount = 400, b.b_date = 6/29/2012 where b.id = 3 
```

注意：一些 RDBMS 会以不同的方式处理日期。有些需要引号。

# c - 使用 rand() 函数生成随机 RGB 颜色

> ID：10882916
> 
> 赞同：4
> 
> 时间：2012-06-04T14:22:08.270
> 
> 标签：c, random, colors, svg, srand

我需要一个可以生成三个数字的函数，这样我就可以将它们用作我的 SVG 的 RGB 模式。
虽然这很简单，但我还需要确保我没有两次使用相同的颜色。我该怎么做？使用简单（种子时间激活）一次生成一个数字，`rand`然后呢？我不想排除一个数字，但也许是整个模式？
我有点迷失在这里。

准确地说，通过第一次调用这个函数，我会得到例如 218 199 154，然后我会得到 47 212 236，这绝对是两种不同的颜色。有什么建议么？

另外我认为`struct`with`int r, int g, int b`适合这个吗？

**编辑：**颜色应该与人眼不同。很抱歉之前没有提到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:32:12.247

您可以使用一组来存储生成的颜色。首先实例化一个新集合。然后，每次生成颜色时，查看该值是否存在于您的集合中。如果记录存在，请跳过它并重试新颜色。如果没有，您可以使用它，但不要忘记将其缓存在 Set 之后。如果您需要生成大量颜色，这可能会变得不高效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T14:42:16.623

最便宜的方法是使用[Bloom 过滤器](http://en.wikipedia.org/wiki/Bloom_filter)，它在内存方面非常小，但偶尔会导致误报（即，您会认为您使用了一种颜色，但您没有使用）。基本上，创建 0-255 之间的三个随机数，随意保存它们，将它们散列为三元组并将散列放入过滤器中。

此外，您可能想要丢弃每个通道的低位，因为可能不容易区分 #FFFFF0 与 #FFFFF2。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T10:41:28.113

这是一个简单的方法：

```
1.Generate a random integer.
2.Shift it 8 times to have 24 meaningful bits, store this integer value.
3.Use first 8 bits for R, second group of 8 bits for G,
      and the remaining 8 bits for B value. 
```

对于每个新的随机数，将其移动 8 次，比较您之前存储的所有其他整数值，如果它们都与新的不匹配，则将其用于新颜色（步骤 3）。

人眼的区分是一个有趣的话题，因为感知阈值因人而异。为了实现它移位整数 14 次，为 R 获取前 6 位（填充两个 0 以再次获得 8 位），为 G 获取第二个 6 位，为 B 获取后 6 位。如果您认为 6 位不是对它有好处，减少它 5,4 ......

每个通道有 4 个有效位的简单运行：我的随机整数是：

```
0101-1111-0000-1111-0000-1100-1101-0000 
```

我将（您也可以使用乘法或模数）向左移动 20 次：

```
0000-0000-0000-0000-0000-0101-1111-0000 
```

存储此值。

然后为 R 获取前 4 位，为 G 获取后 4 位，为 B 获取后 4 位：

```
R: 0101
G: 1111
B: 0000 
```

填充它们以使它们中的每一个为 8 位。

```
R: 0101-0000
G: 1111-0000
B: 0000-0000 
```

将它们用于您的颜色组件。

对于移位后的每个新随机数，将其与迄今为止存储的整数值进行比较。如果不同，则存储并用于颜色。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T14:38:09.450

一个想法是使用位向量来表示生成的一组颜色。对于 24 位精度，位向量的长度为 2 ^(24)位，即 16,777,216 位或 2 MB。现在肯定不是很多，查找和插入颜色会非常快。

# c - 计算包含 1 的子集的数量

> ID：10882918
> 
> 赞同：4
> 
> 时间：2012-06-04T14:22:13.007
> 
> 标签：c, algorithm, optimization

有长度为 N 的位集（大约为 500-700）。我需要计算每个仅包含 1 的子集的数量

## 例子

N = 32

设置 = 0* *11* *0* *111* *00* *1* *0* *1* *00* *1111* *0* *11* *00* *111* *000* *1* *0* *1* *

输出 = { [1] = 4, [2] = 2, [3] = 2, [4] = 1, [5] = 0, ... [32] = 0 }

```
void get_count(int tab[], int len) {
int *out = calloc(1, sizeof(*out) * INT_BIT * len);
int i, j, k;
int cur;
int count = 0;

for(i = 0; i < len; i++) {
    cur = tab[i];
    for(j = 0; j < INT_BIT; j++) { 
        count += (cur & 1);
        if(!(cur & 1)) { 
            out[count]++; 
            count = 0; 
        }
        cur >>= 1;
    }
}

for(i = 0; i < INT_BIT * len; i++) {
    printf("%d ", out[i]);
}
printf("\n");
free(out);
} 
```

这个简单的操作将执行大约数十亿次。迭代每一位太慢了。如何优化这个算法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:30:49.087

我会使用查找表来选择适当的维度（可能是 8 位或 16 位键）。

在这个查找表中，我会将每个键与 4 个值相关联：

*   附加到左侧的 1 位数
*   附加到右侧的 1 位数
*   中间未附加任何东西的子集数
*   中间子集的大小

例如，您可以将密钥`11011011`与 2,2,2 相关联，这样您就知道右侧至少附加 1 位的左侧相邻字节将包含其大小 + 2 的子集（当前的左侧附加长度）字节）等等。

你需要找到一种方法

*   在同一个键中管理超过 1 个子集（例如`01011010`）
*   管理一个全为 1 的密钥，以便您必须考虑左字节和右字节，并将密钥长度添加为子集长度的一部分。

但是第一个和最后一个位为 0 的每个键都被简单地管理，因此您可以减少某些可能的键所需的处理量。

我想开发起来很棘手，但它也可能很有趣，最后你只需要对键进行比较，因为其他所有内容都在查找表中进行了硬编码。当然，我不确定最终的算法是否会优于简单的方法，但我认为值得给它一个机会。

# c# - 我们真的需要对 DLL 进行硬编码吗

> ID：10882922
> 
> 赞同：3
> 
> 时间：2012-06-04T14:22:34.777
> 
> 标签：c#, codedom

假设我想写一个小程序，我们可以给它一个 .CS 文件，它可以为我们编译它并告诉我们是否有任何编译错误。所以我为此使用了 CodeDom。当我想使用 CodeDOM 时，我必须添加 DLL 名称，以便在运行时加载它们。像这样的东西：

```
 CompilerParameters parameters = new CompilerParameters();
    parameters.ReferencedAssemblies.Add("System.dll");
    parameters.ReferencedAssemblies.Add("System.Windows.Forms.dll"); 
```

但是这种方法存在一些问题：如何确保包含所有必要的 DLL？这是唯一的方法吗？有没有更好的方法来代替像这样添加这些 DLL？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T14:24:34.370

你不需要硬编码任何东西。想象一下循环调用`Add()`，使用从文本文件中读取的 DLL 名称 - 或者在运行时在目录中找到，就此而言。您拥有编写非常灵活的东西所需的所有工具。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T14:26:06.873

如果通过硬编码您的意思是明确指定要包含的 dll（无论它们来自文本文件还是源文件），那么 CodeDom 没有任何方法可以确定该源正在使用哪些库，因为具有给定名称的类可以存在在“任何”程序集中。因此，作为开发人员，您必须指定您所指的程序集。

在您的情况下，如果您将源作为输入，您也可以要求输入器指定引用的库。你不能可靠地猜到它们。

# xpages - 在 xPages 中处理文档锁定的最佳方法是什么？

> ID：10882925
> 
> 赞同：3
> 
> 时间：2012-06-04T14:22:44.410
> 
> 标签：xpages

在 xPages 中处理文档锁定的最佳方法是什么？目前我们使用标准的软锁定，它似乎在 Notes 客户端中运行良好。

在 xPages 中，我考虑使用“允许文档锁定”功能，但我担心人们会在不使用关闭或保存按钮的情况下关闭浏览器，然后锁定将永远不会被清除。

当用户关闭会话时，有没有办法清除锁定？我没有看到这样的事件。

或者有没有更简单的方法来锁定文档？

我意识到我可以使用代理清除锁，但是什么时候运行呢？我会想某个晚上的某个时候，我相当肯定锁应该不再真正处于活动状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T18:42:30.563

这是我正在使用的代码：

```
/* DOCUMENT LOCKING */
/*

    use the global object "documentLocking" with:
    .lock(doc) -> locks a document
    .unlock(doc) -> unlocks a document
    .isLocked(doc) -> returns true/false
    .lockedBy(doc) -> returns name of lock holder
    .lockedDT(doc) -> returns datetime stamp of lock

*/ 
function ynDocumentLocking() {

    /*

        a lock is an entry in the application scope

        with key = "$ynlock_"+UNID

        containing an array with
        (0) = username of lock holder
        (1) = timestamp of lock

    */

    var lockMaxAge = 60 * 120; // in seconds, default 120 min

    this.getUNID = function(v) {
        if (!v) return null;
        if (typeof v == "NotesXspDocument") return v.getDocument().getUniversalID();
        if (typeof v == "string") return v;
        return v.getUniversalID();
    }

    /* puts a lock into application scope */
    this.lock = function(doc:NotesDocument) {
        var a = new Array(1);
        a[0] = @UserName();
        a[1] = @Now();
        applicationScope.put("$ynlock_"+this.getUNID(doc), a);  
        // print("SET LOCK "+"$ynlock_"+doc.getUniversalID()+" / "+a[0]+" / "+a[1]);
    }   

    /* removes a lock from the application scope */
    this.unlock = function(doc:NotesDocument) {
        applicationScope.put("$ynlock_"+this.getUNID(doc), null);
        //print("REMOVED LOCK for "+"$ynlock_"+doc.getUniversalID());
    }

    this.isLocked = function(doc:NotesDocument) {
        try {
            //print("ISLOCKED for "+"$ynlock_"+doc.getUniversalID());       

            // check how old the lock is
            var v = applicationScope.get("$ynlock_"+this.getUNID(doc));
            if (!v) {
                //print("no lock found -> return false");
                return false;   
            }

            // if lock holder is the current user, treat as not locked
            if (v[0] == @UserName()) {
                //print("lock holder = user -> not locked");
                return false;
            }

            var dLock:NotesDateTime = session.createDateTime(v[1]);
            var dNow:NotesDateTime = session.createDateTime(@Now());
            // diff is in seconds
            //print("time diff="+dNow.timeDifference(dLock)+" dLock="+v[1]+" now="+@Now());
            // if diff > x seconds then remove lock, it not locked
            if (dNow.timeDifference(dLock) > lockMaxAge) {
                // print("LOCK is older than maxAge "+lockMaxAge+" -> returning false");
                return false;
            }
            //print("return true");
            return true;
        // TODO: check how old the lock is
        } catch (e) {
            print("ynDocumentLocking.isLocked: "+e);
        }

    }

    this.lockedBy = function(doc:NotesDocument) {
        try {
        var v = applicationScope.get("$ynlock_"+this.getUNID(doc));
        if (!v) return "";
        //print("ISLOCKEDBY "+"$ynlock_"+doc.getUniversalID()+" = "+v[0]);
        return v[0];

        } catch (e) {
            print("ynDocumentLocking.isLockedBy: "+e);
        }
    }

    this.lockedDT = function(doc:NotesDocument) {
        try {
        var v = applicationScope.get("$ynlock_"+this.getUNID(doc));
        if (!v) return "";
        return v[1];

        } catch (e) {
            print("ynDocumentLocking.isLockedBy: "+e);
        }
    }

}

var documentLocking = new ynDocumentLocking(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T22:44:57.497

ApplicationScope 可能是捕获“锁定”文档的好地方。毕竟，要使 applicationScope 过期，所有用户的会话都必须过期，因此任何打开页面的人都无法保存。

当有人编辑文档时，可能会捕获 UNID、用户和时间。保存文档时清除该值。请记住，用户可能会关闭浏览器等。我一直在内部讨论这种方法，如果我们最终构建它，我会考虑将它添加到 OpenNTF。但我们不太可能在下个月内完成它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T15:09:19.777

您可以从 webDAV 的工作方式中获取一个页面。servlet 管理锁定文档的“锁定列表”。锁会在 10 分钟后自动失效。可以通过调用更新或终止锁。因此，当您编辑文档时，您将请求锁定，然后启动一个 CSJS 计时器，该计时器每 8 分钟调用一次重新锁定功能（因此您有一些错误余地），并且 postSave 调用解锁（除非您保持在编辑模式）。如果用户在 10 分钟后关闭浏览器，文档将自动解锁。由于您可以自由地实现锁定功能，因此您可以捕获用户/位置并在“锁定失败”显示中使用该信息（您可以进一步推动该信息并让原作者知道它或做一些“重试”选项. 实现起来并不简单，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-28T16:33:49.830

我更喜欢使用类似于威瑟斯先生回答的解决方案。主要问题是如何处理不需要的和可怕的后退按钮。文档打开时锁定很容易，但是关闭 XPage 的方法有很多，用户不仅限于您提供的导航，还可以如他所说，完全关闭浏览器，使用返回按钮等。因此，我能想到的最好方法是创建一些我们将在应用程序和会话范围中使用的 java 对象。

第一步是创建一个“LockedDocument”类。众所周知，文档是不可序列化的，我们不想将文档本身保存在这个对象中，我们想保存 UNID 和保存时间。我们希望这样做，以便我们可以在给定时间（如三十分钟到一个小时）后设法清除对象。此类还应实现可比较的接口，以便在此时对集合进行排序，以便最旧的文档排在第一位，最新的文档排在最后。

接下来，我们创建另一个类，其中包含带有这些 LockedDocuments 的列表或映射。这个类还必须有一个线程（实现 Runnable），它将每五分钟左右检查一次所有文档，我还没有对此进行测试，但它应该可以工作）。任何在 30 到 60 分钟前被锁定（预定义）的文档都将被解锁（从列表中删除）。重要的是，列表按上述方式排序，并且当达到小于锁定时间的时间时，循环“中断”，以防止不需要的处理。

下一步是在 sessionScope 中包含用户特定列表。此列表是当前用户拥有的 LockedDocuments。它在用户将文档的状态更改为可编辑时设置，并在文档设置为可编辑之前进行检查，以防止同一用户在多个选项卡中打开一个文档。onquerysave() 再次检查锁。打开主页后，锁会自动释放。onquerysave() 还必须检查以确保文档 UNID 在 sessionScope 列表中，或者在允许保存之前文档是否是新的。

**快速回顾**
任何保存在 applicationScope LockedDocumentList 中的 UNID 都不能被任何人编辑，除非它存在于他们自己的 sessionScope 列表中。
可以警告用户他们的lockedTime 即将到来并重置计时器。
包含锁定文档列表的类必须是单例
可能有改进这个答案的方法，我确信我遗漏了一些东西。这只是一个想法。

可能有更好的方法来处理这个问题，但这是我发现的最好的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-28T18:11:41.857

`window.onunload`您可以在事件中移除 Domino 锁定：

```
window.onunload = function(){
    dojo.xhrGet(...
} 
```

无需重新发明轮子。

# android - 访问 sqlite 数据库时出错

> ID：10882929
> 
> 赞同：0
> 
> 时间：2012-06-04T14:23:01.237
> 
> 标签：android, sql, database

```
public class DBOpener {

private static String DB_PATH = "/data/data/com.edu.tp.iit.mns/databases/"; // path
                                                                            // of
                                                                            // our
                                                                            // database
private static String DB_NAME = "finals"; // Database name
private final Context myContext;
private SQLiteDatabase db;

public DBOpener(Context context) {
    myContext = context;
}

public void open() {
    boolean dbExists = checkDatabase();
    if (!dbExists) {
        try {
            copyDatabase();
        } catch (IOException e) {
            throw new RuntimeException("Something bad!!!");
        }
    }
    String path = DB_PATH + DB_NAME;
    db = SQLiteDatabase.openDatabase(path, null,
            SQLiteDatabase.OPEN_READWRITE);
}

private boolean checkDatabase() {
    SQLiteDatabase checkDB = null;
    try {
        // Try opening the database
        String path = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(path, null,
                SQLiteDatabase.OPEN_READONLY);
    } catch (SQLiteException e) {
        throw new RuntimeException("Something bad111111!!!");
    }
    if (checkDB != null)
        checkDB.close(); // Close the DB; we don’t need it now
    return checkDB != null;
} 
```

我的错误日志文件：

```
 06-04 14:00:38.756: E/Database(306): sqlite3_open_v2("/data/data/com.edu.tp.iit.mns/databases/finals", &handle, 1, NULL) failed
  06-04 14:00:38.836: E/AndroidRuntime(306): FATAL EXCEPTION: main
  06-04 14:00:38.836: E/AndroidRuntime(306): java.lang.RuntimeException: Unable to resume activity {com.edu.tp.iit.mns/com.edu.tp.iit.mns.Lunch}: java.lang.RuntimeException: Something bad111111!!!
  06-04 14:00:38.836: E/AndroidRuntime(306):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:3128)
  06-04 14:00:38.836: E/AndroidRuntime(306):    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:3143)
  06-04 14:00:38.836: E/AndroidRuntime(306):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2684)
  06-04 14:00:38.836: E/AndroidRuntime(306):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
  06-04 14:00:38.836: E/AndroidRuntime(306):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
  06-04 14:00:38.836: E/AndroidRuntime(306):    at android.os.Handler.dispatchMessage(Handler.java:99)
  06-04 14:00:38.836: E/AndroidRuntime(306):    at android.os.Looper.loop(Looper.java:123)
  06-04 14:00:38.836: E/AndroidRuntime(306):    at android.app.ActivityThread.main(ActivityThread.java:4627)
  06-04 14:00:38.836: E/AndroidRuntime(306):    at java.lang.reflect.Method.invokeNative(Native Method)
  06-04 14:00:38.836: E/AndroidRuntime(306):    at java.lang.reflect.Method.invoke(Method.java:521)
  06-04 14:00:38.836: E/AndroidRuntime(306):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
  06-04 14:00:38.836: E/AndroidRuntime(306):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
  06-04 14:00:38.836: E/AndroidRuntime(306):    at dalvik.system.NativeStart.main(Native Method)
  06-04 14:00:38.836: E/AndroidRuntime(306): Caused by: java.lang.RuntimeException: Something bad111111!!!
  06-04 14:00:38.836: E/AndroidRuntime(306):    at com.edu.tp.iit.mns.DBOpener.checkDatabase(DBOpener.java:50)
  06-04 14:00:38.836: E/AndroidRuntime(306):    at com.edu.tp.iit.mns.DBOpener.open(DBOpener.java:29)
  06-04 14:00:38.836: E/AndroidRuntime(306):    at com.edu.tp.iit.mns.Lunch.onResume(Lunch.java:49)
  06-04 14:00:38.836: E/AndroidRuntime(306):    at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1149)
  06-04 14:00:38.836: E/AndroidRuntime(306):    at android.app.Activity.performResume(Activity.java:3823)
  06-04 14:00:38.836: E/AndroidRuntime(306):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:3118)
  06-04 14:00:38.836: E/AndroidRuntime(306):    ... 12 more 
```

我的程序运行良好，直到我从资产文件夹和数据/数据/数据库文件夹中删除数据库并放回我的新数据库文件。由于此错误，我无法继续我的代码。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T14:45:09.407

修改方法`checkDatabase()`如下：

```
private boolean checkDatabase() {
    File dbFile = new File(DB_PATH + DB_NAME);
    return dbFile.exists();
} 
```

请参阅[此链接](http://www.itsalif.info/content/check-if-database-exist-android-sqlite3openv2-failed)以供参考。

# csv - 如何在 BusinessObjects Data Services Designer 中将带引号的逗号作为平面文件读取？

> ID：10882931
> 
> 赞同：1
> 
> 时间：2012-06-04T14:23:19.010
> 
> 标签：csv, escaping, quotes, business-objects

我正在尝试让 SAP BusinessObjects Data Services Designer 12.2.3.1 读取包含以下行的 CSV 文件：

```
"00501","P",0,0,"Nassau-Suffolk, NY","SUFFOLK" 
```

但是，将列分隔符设置为逗号时，我得到的结果是将该行读作七列而不是六列：

```
"00501"    "P"       0        0       "Nassau-Suffolk        NY"      "SUFFOLK" 
```

为了在没有外部预处理的情况下按原样读取文件，我需要哪些额外的选项？（如果这是不可能的，请说出来，我会停止在这面漂亮的砖墙上弄灰质。谢谢！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-27T09:37:09.460

用双引号加载数据的解决方案：

![设置截图](../Images/bc2cbace30303f0981bcdd4e9ec92d4c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T12:37:26.783

解决方案是将**文本**分隔符设置为`"`.

> **文本：**表示文本字符串的开始和结束。此字符的第一次和第二次出现之间的所有字符（包括指定为列分隔符的字符）都是单个文本字符串。行字符的处理由“文本字符串中的行”设置定义。

# php - 在 Symfony2 中，我应该在哪里放置例如 TCPDF？

> ID：10882933
> 
> 赞同：1
> 
> 时间：2012-06-04T14:23:30.620
> 
> 标签：php, symfony, tcpdf

我在 Symfony 2.0 上并且了解第三方库进入 /vendor。我有两个正在使用的第三方类，一个是 TCPDF，另一个是 Paypal 类。两者都没有正式的 Symfony2 Bundles。

因此，我按照此处的说明对它们进行了命名空间并使它们在 /vendor 中可用：

[将第三方库添加到 Symfony 2](http://www.kiwwito.com/article/add-third-party-libraries-to-symfony-2)

这有效，我可以从我的控制器访问它们。但是，我正在重新考虑这是否正确。每当我这样做..

```
php bin/vendors install --reinstall 
```

..那些自定义类消失了，因为它们在“deps”中没有 Git 存储库。这引起了实际问题，例如在尝试部署在 PagodaBox 上时。我有一种强烈的直觉，即“第三方”的代码更接近我的应用程序的代码。

如果这是真的，应该：

*   坐在我的控制器旁边 src/MyCompany/MyBundle/Controller/tcpdf.php
*   与我在 src/MyCompany/MyBundle/DependencyInjection/tcpdf.php 中的其他自定义编写服务一起使用
*   进入我的包下它自己的目录：src/MyCompany/MyBundle/TCPPDF/tcpdf.php

如果我将这两个类从 /vendor 移动到上述之一，我会从带有“use”语句的控制器访问它，还是需要在“services.yml”中定义它？

我希望这不是讨论或意见的问题，而是我错过的一些指导或最佳实践，我不知道更有经验的 Symfony2 开发人员会知道。

在 Symfony 2.1 准备好之前切换到 Composer 是否明智？

谢谢阅读。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T15:07:20.550

如果您使用 deps 来管理供应商库，那么您应该在那里为这些库添加 git repo。

对于 TCPDF，您可以使用：

```
[TCPDF]
    git=git://tcpdf.git.sourceforge.net/gitroot/tcpdf/tcpdf
    target=/tcpdf 
```

如果您有其他不在公共仓库中的库，那么您可能希望将它们提交到您自己的仓库中。

Composer 也是如此。只是添加非打包仓库的语法不同。

# javascript - 这两者在Javascript中有什么区别吗？

> ID：10882941
> 
> 赞同：2
> 
> 时间：2012-06-04T14:23:50.397
> 
> 标签：javascript

使用这个

```
var Class1 = function() {       
        this.test1 = function() {
        };
    }; 
```

* * *

和以下

```
function Class1() { 
};

Class1.prototype.test1 = function() {

}; 
```

这两者有区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T14:25:58.223

第一个为每个类实例制作一个单独的函数副本。
它还允许函数使用构造函数中的闭包变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:46:47.420

Using the later one in efficient.

Functions in JavaScript are objects. Every object in JavaScript holds a hidden piece of state – a reference to another object known as the object’s prototype.

Using prototype multiple objects can maintain references to the same prototype object.

This is a great [reference](http://msdn.microsoft.com/en-us/magazine/ff852808.aspx) to know how prototype in js works.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T14:30:16.490

是的，有。看

*   [var functionName = function() {} vs function functionName() {}](https://stackoverflow.com/q/336859/1048572)和
*   [在 JavaScript 中使用“原型”与“这个”？](https://stackoverflow.com/q/310870/1048572)

对于两个（独立的）差异。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T14:26:42.130

存在差异也会影响性能。

第一个将为创建的类的每个实例添加函数，而后者不会。对于后一种方法，JavaScript 将查看`prototype`对象链并返回所需的方法，`test1`在您的情况下。

# java - 迭代泛型类型 数组列表

> ID：10882943
> 
> 赞同：2
> 
> 时间：2012-06-04T14:23:59.650
> 
> 标签：java, collections

我正在尝试从数组列表中获取值。

我有如下用户类型的bean类..

```
class User{

      public String link;
      public String url;

     User(String l,String u){
           this.link=link;
           this.url=url;
      }
setters and getters below.. 
```

在这里，我正在尝试用 main 编写一个类。

```
public class ListClass{
      public static void main(String args[]){
            List<User> list = new ArrayList<User>();
            list.add(new User("link1","url1"));
            list.add(new User("link2","url2"));
            list.add(new User("link3","url3"));

            //here i want to iterate both links and urls one by one 

            Iterator it=list.iterator();
            // remaining the code to get both link1 and url1 ..
} 
```

我需要输出为：

```
link1  url1
link2  url2
link3  url2 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-04T14:26:32.877

您可以使用 for-in 构造代替迭代器：

```
for (User u : list) {
  System.out.println(u.link + " " + u.url);
} 
```

如果您肯定要使用迭代器：

```
Iterator<User> it=list.iterator();
while (it.hasNext()) {
  User u = it.next();
  System.out.println(u.link + " " + u.url);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T14:31:02.503

正如其他用户已经说明的那样，您可以使用[增强`for`语句](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.14.2)。还考虑添加一个`toString()`实现`User`：

```
class User
{
    @Override public String toString()
    {
        return this.link + " " + this.url;
    }
} 
```

这会将循环减少到：

```
for (User u: list)
{
    System.out.println(u);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T14:27:30.207

```
for (User u : list) {
   System.out.println(u.getLink() + "  " + u.getUrl());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T14:28:29.940

如果你坚持使用迭代器：

```
Iterator<User> it = list.iterator();
while(it.hasNext()) {
   /...
   it.next();
} 
```

# java - java.util.logging.Logger 吞下日志

> ID：10882944
> 
> 赞同：2
> 
> 时间：2012-06-04T14:24:00.737
> 
> 标签：java, logging

我正在使用`java.util.logging.Logger`并且我想启用所有日志级别。我认为以下方法会起作用：

```
logger.setLevel(Level.ALL); 
```

但显然它没有。只有`INFO`级别日志语句正在生效，其他正在被吞噬。

如何启用所有日志级别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T14:46:53.927

吞噬日志记录的可能是日志处理程序。您还需要在处理程序上设置日志级别。例如：

```
for (Handler handler : Logger.getLogger("").getHandlers()) {
  handler.setLevel(Level.ALL);
} 
```

或者您可以从`logging.properties`文件中读取配置（只需将其放在您的 CLASSPATH 根目录中），或者您可以`logging.properties`使用`LogManager.getLogManager().readConfiguration(someInputStream)`.

# cmake - CMake 链接到非编号库

> ID：10882945
> 
> 赞同：1
> 
> 时间：2012-06-04T14:24:03.093
> 
> 标签：cmake

如何指示 CMake 链接到库的非编号版本？例如，当使用 Boost 库时，我有：

```
find_package(Boost COMPONENTS regex program_options REQUIRED)
target_link_libraries(main ${Boost_PROGRAM_OPTIONS_LIBRARY}) 
```

以及针对 libboost_program_options.so.1.49.0 的可执行链接。如果我尝试在旧机器上运行此可执行文件，它将失败，因为找不到该库，尽管我知道该功能已存在于该库版本中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:51:36.273

那是行不通的。即使功能在那里，确切的 API 也可能不在那里。这就是为什么 UNIX 链接系统使用符号链接，以便链接器访问未编号的符号链接，然后在写出依赖项列表时取消引用它，以便在运行时需要相同的主要版本。

您有 3 个选择：

1.  使用较旧的 bo​​ost 在目标机器上重新编译。
2.  分发必要的 boost 库以及您的可执行文件。这可能涉及编写一个在运行之前设置 LD_LIBRARY_PATH 的启动脚本。
3.  链接到静态增强库以消除您的运行时依赖性。在 find_package 之前使用这一行：

`SET(Boost_USE_STATIC_LIBS ON)`

# c++ - 带有独立 C++ 服务器的 MVC3 在线游戏

> ID：10882948
> 
> 赞同：0
> 
> 时间：2012-06-04T14:24:35.337
> 
> 标签：c++, asp.net-mvc, entity-framework

我有兴趣为前端网站使用 MVC3（或 4）制作网页游戏，因为这是我最喜欢使用的网页框架。举个例子，假设它是一个房地产游戏（有趣！..）

我对如何以可扩展的方式做到这一点进行了长期而艰苦的思考，并且遇到了以下小问题/困境：

**1) 将游戏服务器逻辑编码到实际的 Web 服务器本身。**

*优点：Web服务器可以直接使用实体框架，非常适合数据操作。*

*问题：不可扩展 - 游戏几乎仅限于单个服务器，这可能会变得人满为患且速度缓慢。如果我将每个 Web 服务器用作单个“领域”，它可能会起作用，但如果 10 个“领域”正在运行，这可能会给数据库服务器带来大量负载。*

**2) 将游戏服务器逻辑编码为单独的 C++ 可执行文件，甚至可能在单独的机器上。**

*优势：可扩展 - 可以将多个 Web 前端服务器连接到游戏服务器，并且在任何一个 Web 服务器出现故障时都不会出现中断。*

*问题：网络服务器和游戏服务器之间难以通信。据推测，我需要设置套接字连接并建立某种通信协议（可能使用 XML）。此外，游戏服务器需要负责数据存储，这似乎是对 MVC 对实体框架的优雅支持的严重浪费。如果需要对另一台服务器进行套接字查询，则 MVC3 中的一些简单操作（例如检查数据库中是否已存在某些内容）将成为一项非常费力的任务。*

如果有人对此类问题有任何经验，您能否说明我如何最好地解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:45:09.850

如果您已经编写了 ASP.NET 应用程序，为什么不尝试[WCF](http://en.wikipedia.org/wiki/Windows_Communication_Foundation)并使用 .NET 编写游戏服务器逻辑？WCF 做了所有的通信工作，而配置有时会有点棘手。

# ruby-on-rails - 初学者：关于 Ruby on Rails - 它是如何工作的？

> ID：10882949
> 
> 赞同：-1
> 
> 时间：2012-06-04T14:24:38.260
> 
> 标签：ruby-on-rails, ruby

好的，到目前为止已经学会了开发WordPress网站，并且已经开发主题大约2年了。但是，我想进入“实际”网络开发，而不是 WordPress。我偶然发现了 Rails，并且一直在做一些研究，但是我仍然不知道使用 Rails 创建网站需要什么。

我需要模板文件的方式与在 WordPress 中需要它们的方式相同吗？如果是这样，我需要建立一个网站的最少文件是多少？（例如 index/home.php、侧边栏、页眉、页脚？）我需要对 SQL 有深入的了解吗？我可以将 Rails 与大多数托管服务一起使用吗？在我开始对 RoR 进行一些实际学习之前，我需要了解的第一件事是什么（我喜欢边学习边学习——例如，开始学习 HTML 的人通常通过边学习边构建网站来学习）。

再次，我很抱歉向那些对这些东西非常敏感的人提出如此可怕的问题。但我要求你容忍我，因为我们都在某一点上是任何事情的完全初学者。

干杯。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T14:45:19.650

Rails is quite different from Wordpress at a fundamental level:

*   Wordpress is flexible **application software** that can be used for blogging, as a Content Management System for building websites and more.

*   Rails is is flexible application **building software**. It is used to build web applications including web sites and more.

For example, you could use Rails to build the equivalent of Wordpress. Wordpress itself was built using an alternative to Rails, php.

**Templates** Yes, both Wordpress and Rails use templates.

*   In Wordpress, most of your customization of Wordpress is done using templates.
*   In Rails, templates are just one part of your application. Other key parts are models and controllers.

**Other questions/answers**

*   Do I need template files the same way I need them in WordPress? Yes, you usually use them, but they are just one part of Rails apps.
*   Do I need a deep understanding of SQL? A. You need to understand more about what's going on in the database with Rails than with WP. But you don't need a "deep" level of SQL. Rails handles most all of the sql for you. You do need to understand the ideas of tables, joins, columns, column types and how to choose them.
*   Can I use Rails with most hosting services? A. Not as easily as WP. Ask your hosting service to see what their answer is about Rails. There are low cost hosting services that work well with Rails. DreamHost is one.
*   What is the firs thing I need to understand before I begin to do some practical learning on RoR (I like to learn as I go along - for instance, people starting out learning HTML learn usually by building a website as they go along). A. Understand the difference between an application (WP) and a programming system that enables you to build applications (Rails).

**Summary** If you can do what you need to do in Wordpress then it is probably a good solution for your task. If you can't accomplish your task using Wordpress, or it seems like too much work to do so, then investigate Rails.

**Next step** I suggest that you get book on Rails and use it to learn the system.

**Added**

Both Wordpress and Rails are fantastic open source projects. I use both and think that they are both great in their own ways.

I would not recommend Rails if you want to build a web content site. I do recommend it if you want to build a web **application.**

*   You want to build a website where the pages are static except for a "add me to the email list" form. Use WP.
*   You want to build a web page application which enables visitors to donate to a non-profit. Using plugin for WP would probably be the fastest solution. Or get a "Donate button" from Paypal or similar.
*   You want to build a *custom* application which enables donors to organize themselves into teams, raise money and graph the on-going competition between the teams. This would be a good use of Rails.

**Rails as a software learning tool** If you want to learn or improve your skills at writing software, Rails is a good choice. It enables you to write large systems in the Ruby language. WP enables you to use php, but it is much easier to use Ruby to write object oriented software.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T14:29:12.143

`rails new appname`:) 遵循教程，例如：

[http://ruby.railstutorial.org/](http://ruby.railstutorial.org/)

除此之外，这个问题太宽泛了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T14:32:03.050

网上有很多教程，一点点[谷歌](http://google.com/search?q=rails%20beginner%20tutorial)会有所帮助。

同时，假设您已经安装了 Rails，通过打开终端并键入来生成一个简单的 Web 应用程序

```
rails new testapp 
```

这将创建你的 Rails 应用程序——当然是最基本的。

启动你的服务器

```
rails server 
```

然后去

```
http://localhost:3000 
```

查看文件系统上的目录和文件，看看里面有什么。其中大部分可能令人困惑，但这是意料之中的——你才刚刚开始。您将能够通过谷歌搜索和提问来了解这一切是如何运作的。

它还有很多内容，但这只是开始。当您获得更多学习知识时，请确保查看[rvm](https://rvm.io//)和[bundler](http://gembundler.com/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T14:44:14.220

查看[TryRuby.org](http://TryRuby.org)和[Codeschool.com](http://Codeschool.com) - 他们会让您立即启动并运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T14:30:31.007

我也来自 Wordpress。我曾经喜欢 wordpress，但现在我意识到我最好使用 RoR。

在 RoR 中，您可以创建您想要的，或者您的客户想要的。所以强烈推荐。

至于模板。这是不一样的。Rails 使用部分模板。您仍然可以拥有页眉、页脚、侧边栏等。

您以前看过 RoR 网站吗？

@Dave Newtown 是对的.... [http://ruby.railstutorial.org/](http://ruby.railstutorial.org/)

# c# - 替换字符串中的值

> ID：10882950
> 
> 赞同：0
> 
> 时间：2012-06-04T14:24:39.793
> 
> 标签：c#, regex

我正在寻找字符串中的匹配项，对匹配项执行操作，然后替换原始匹配项。

例如，在字符串中查找 @yahoo，查找将 & 符号后面的所有内容与第一个空格匹配。当然，可以在一个字符串中匹配多个值，因此每个匹配项都是一个。

我正在考虑正则表达式，但不确定是否将与号之后的所有内容都匹配到第一个空格（这个正则表达式？）。或者任何其他更简单的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T14:28:33.247

为了这：

> 正在寻找将＆符号之后的所有内容与第一个空格匹配

正则表达式是`@\S+`.

参考：[字符类](http://msdn.microsoft.com/en-us/library/20bw873z.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T14:42:42.607

假设您正确设置了 Regex，您可以利用[Regex.Replace](http://msdn.microsoft.com/en-us/library/ht1sxswy%28v=vs.90%29.aspx)的重载之一来包含[MatchEvaluator](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.matchevaluator%28v=vs.90%29.aspx)委托。这`MatchEvaluator`是一个`Func<Match,string>`委托（意味着任何`public string Method(Match match)`方法都可以作为输入），返回值是您要替换原始字符串的值。搜索的正则表达式`(@\S+)`表示“匹配`@`符号，后跟任何非空白字符 ( `\S`) 至少一次 ( `+`)。

```
Regex.Replace(input, "(@\S+)", (match) => { /* Replace logic here. */ }) 
```

在输入 上运行上述正则表达式`@yahoo.com is going to be @simple for purposes of @matching.`，它匹配`@yahoo.com`,`@simple`和`@matching.`（请注意，它包括在 上的标点符号`@matching.`）。

希望有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T14:30:55.960

如果您使用 C# 编写，那么正则表达式可能是您的最佳选择。代码很简单

```
MatchCollection matches = Regex.Matches(/*input*/, /*pattern*/)
foreach (Match m in matches)
{
    /*Do work here*/
} 
```

为了学习正则表达式和相关的语法，我使用[http://www.regular-expressions.info/tutorial.html](http://www.regular-expressions.info/tutorial.html)开始。里面有很多很好的信息，而且很容易阅读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T14:29:08.197

例如：

```
string str = "@yahoo aaaa bbb";
string replacedStr = str.Replace("@yahoo", "replacement"); 
```

查看文档： [string.Replace](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T14:30:12.020

你的意思是 &`&`或 at-symbol `@`？

这应该做你需要的： `&([\S\.]+)\b`

或对于符号： `@([\S\.]+)\b`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-04T14:33:18.210

尝试使用 String.Replace() 函数：

```
String x="lalala i like being @Yahoo , my Email is John@Yahoo.com";

x=x.Replace("@Yahoo","@Gmail"); 
```

X 现在将是：“lalala 我喜欢成为@Gmail，我的电子邮件是 John@Gmail.com”；

要知道“@Yahoo”之后的下一个空格在哪里，请使用位置变量，带有 String.IndexOf() 和 String.LastIndexOf()。

```
int location=x.IndexOf("@Yahoo");//gets the location of the first "@Yahoo" of the string.

int SpaceLoc=x.IndexOf("@Yahoo",location);// gets the location of the first white space after the first "@Yahoo" of the string. 
```

希望有帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-04T14:53:20.450

我认为 RegEx.Replace 是您最好的选择。你可以简单地做这样的事情：

```
string input = "name@yahoo.com is my email address";
string output = Regex.Replace(input, @"@\S+", new MatchEvaluator(evaluateMatch)); 
```

而你只需要定义evaluateMatch方法，比如：

```
private string evaluateMatch(Match m)
{
    switch(m.Value)
    {
        case "@yahoo.com": 
            return "@google.com";
            break;
        default:
            return "@other.com";
    }
} 
```

# java - Java：从字符串加载类

> ID：10882952
> 
> 赞同：2
> 
> 时间：2012-06-04T14:24:46.057
> 
> 标签：java, reflection, classloader

我知道这可能与类加载器有关，但是我找不到示例（可能是我在谷歌搜索错误的关键字。

我正在尝试从字符串加载类（或方法）。该字符串不包含类的名称，而是类的代码，例如

```
class MyClass implements IMath {
    public int add(int x, int y) {
         return x + y;
    }
} 
```

然后做这样的事情：

```
String s = "class MyClass implements IMath { public int add(int x, int y) { return x + y; }}";
IMath loadedClass = someThing.loadAndInitialize(string);
int result = loadedClass.add(5,6); 
```

现在显然，`someThing.loadAndInitialize(string)`- 部分是我不知道如何实现的部分。这甚至可能吗？或者运行 JavaScript 并以某种方式“给出”变量/对象（如 x 和 y）会更容易吗？

谢谢你的任何提示。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T14:29:42.450

使用 Java 编译器 API。[这](http://mike-java.blogspot.com/2008/03/java-6-compiler-api-tutorial.html)是一篇博客文章，向您展示了如何做到这一点。

您可以为此使用临时文件，因为这需要输入/输出文件，或者您可以创建从字符串读取源代码的[JavaFileObject的自定义实现。](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaFileObject.html)从[javadoc](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)：

```
 /**
    * A file object used to represent source coming from a string.
    */
   public class JavaSourceFromString extends SimpleJavaFileObject {
       /**
        * The source code of this "file".
        */
       final String code;

       /**
        * Constructs a new JavaSourceFromString.
        * @param name the name of the compilation unit represented by this file object
        * @param code the source code for the compilation unit represented by this file object
        */
       JavaSourceFromString(String name, String code) {
           super(URI.create("string:///" + name.replace('.','/') + Kind.SOURCE.extension),
                 Kind.SOURCE);
           this.code = code;
       }

       @Override
       public CharSequence getCharContent(boolean ignoreEncodingErrors) {
           return code;
       }
   } 
```

一旦你有了输出文件（这是一个编译文件），你可以使用如下`.class`方式加载它：`URLClassLoader`

```
 ClassLoader loader = new URLClassLoader(new URL[] {myClassFile.toURL());
    Class myClass = loader.loadClass("my.package.MyClass"); 
```

然后实例化它，使用：

```
 myClass.newInstance(); 
```

或使用`Constructor`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T14:28:07.457

您*可以*在 JDK 7 中使用 Rhino 和 JavaScript。这可能是一个好方法。

`invokedynamic`来了....

如果你想坚持使用 Java，你需要一些东西来解析源代码并将其转换为字节码——比如 cglib。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T14:31:19.303

你可以使用它来编译它，`JavaCompiler`但我建议你使用它来`Groovy`创建这个运行时类。这会容易得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T14:31:29.843

首先你需要编译你的代码，例如使用编译器 API：( [http://www.accordess.com/wpblog/an-overview-of-java-compilation-api-jsr-199/](http://www.accordess.com/wpblog/an-overview-of-java-compilation-api-jsr-199/) , [http://docs .oracle.com/javase/6/docs/api/javax/tools/package-summary.html](http://docs.oracle.com/javase/6/docs/api/javax/tools/package-summary.html)）。并在使用 ClassLoader 加载编译后的类（[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ClassLoader.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ClassLoader.html)）

# javascript - 在tinymce中将内联css添加到正文

> ID：10882963
> 
> 赞同：2
> 
> 时间：2012-06-04T14:25:29.480
> 
> 标签：javascript, tinymce

我正在将一些 html 从外部源导入到 tinyMCE 中。我有两个问题：

如果我这样做`tinyMCE.execInstanceCommand('mce_editor_0','mceSetContent', false, myVar);`并且 myVar 定义了 doctype 和 header 等，它似乎只是获取正文内容。这是正确的行为吗？

由于 myVar 在其 body 标记中有一些内联 css 并且 mceSetContent() 不导入它，我需要自己传递它。那么如何将内联 css 添加到 tinyMCE 实例的主体中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:14:34.947

这是正确的行为。您粘贴的内容将进入编辑器 iframe 正文。doctype 和 css 的东西不是。您唯一能做的就是使用粘贴设置[paste_preprocess](http://www.tinymce.com/wiki.php/Plugin%3apaste)，过滤掉您的 css 内容并将其插入到编辑器 iram 头中。

# .net - 在 Matlab 中调用 .NET 超类方法

> ID：10882966
> 
> 赞同：0
> 
> 时间：2012-06-04T14:25:58.363
> 
> 标签：.net, matlab, types

堆垛机，

现在我正面临一个与在 Matlab 中调用 .NET 方法有关的问题。相关参考可以通过以下链接找到：

[http://www.mathworks.com/help/techdoc/matlab_external/brpb5k6.html][1]

我的问题是，当我从.net 获取对象时，我想调用它的超类的方法。所以这意味着我想将类型转换为它的超级父类型。

我在matlab中从.net调用得到objectA的图像，objectA的类是objectB的子类，我的意图应该像下面的代码行：

**objectB = cast(objectA, '父类类型')**

它不起作用，有任何帮助或评论吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:34:34.970

父（超类或基）类型中的方法是继承的，并且可以在子类型的对象上调用。

或者您是否尝试调用虚拟方法的基类版本？你不能在课堂外这样做。

# linux - 如何查找 Linux 服务器上安装的 Oracle 版本（在终端中）

> ID：10882967
> 
> 赞同：20
> 
> 时间：2012-06-04T14:26:06.740
> 
> 标签：linux, oracle, rhel

我在 Redhat 5.5 的终端中，我需要找出安装了哪个版本的 Oracle。我是 Linux 的新手，但我已经在 Google 上搜索了一段时间，但找不到我需要的东西。我必须找到通过终端安装的版本。我找到了 Oracle 文件，但似乎找不到版本。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-04T14:33:50.427

输入sqlplus（你会看到版本号）

```
# su - oracle

oracle# sqlplus 
```

或者

```
echo $ORAHOME 
```

将为您提供安装 Oracle 的路径，路径将包括版本号。

或者

连接到 Oracle DB 并运行

```
select * from v$version where banner like 'oracle%'; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-05-26T22:43:05.753

作为运行 Oracle 数据库的用户，还可以尝试`$ORACLE_HOME/OPatch/opatch lsinventory`显示安装的确切版本和补丁。

例如，这是一个快速的 oneliner，它应该只返回版本号：

```
$ORACLE_HOME/OPatch/opatch lsinventory | awk '/^Oracle Database/ {print $NF}' 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-04-17T18:39:51.650

在 sql*plus 中以 sys 用户身份登录。然后执行以下查询：

```
select * from v$version; 
```

或者

```
select * from product_component_version; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-04T18:42:54.067

正如 ABCada 指出的那样，您可以使用 sqlplus 查询数据库本身的 db 版本。这是找出正在运行的数据库版本的最简单方法。如果有多个实例，则必须适当设置 oracle_sid 并对每个实例运行查询。

您可以查看 /etc/oratab 文件以查看每个实例使用的实例和 db home。可以为每台服务器安装多个版本的 oracle 以及多个实例。/etc/oratab 文件将列出所有实例和 db home。从 oracle db home 中，您可以运行“opatch lsinventory”来找出安装的数据库的精确版本以及应用于该数据库安装的任何补丁。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-11-25T08:31:16.440

我通过阅读启动脚本（在我的例子中是*/etc/init.d/oracle-xe*）在大约 1 分钟内解决了这个问题：

> 少 /etc/init.d/oracle-xe

在我发现的文件的几乎开头：

> ORACLE_HOME= **[PATH_TO_INSTALLATION_INCLUDING_VERSION_NUMBER]**

这对我来说是最快的解决方案，因为我知道脚本的位置，并且它用于启动/重新启动服务器。

当然，这依赖于版本号实际上对应于实际的服务器版本，它应该用于正确安装的实例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-23T17:09:28.740

你也可以检查

```
ps -ef |grep -i ora 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-16T08:08:21.970

有点手动搜索，但它是另一种方法...
找到 Oracle 主目录或 Oracle 安装文件安装在您的 linux 服务器上的位置。

```
cd / <-- Goto root directory
find . -print| grep -i dbm*.sql 
```

结果因您安装 Oracle 的方式而异，但我的显示此

```
/db/oracle 
```

转到文件夹

```
less /db/oracle/db1/sqlplus/doc/README.htm 
```

向下滚动，您应该会看到类似这样的内容

SQL*Plus 发行说明 -**发行版 11.2.0.2**

# c# - 如何删除 ASP 中继器生成的零空格字符 ( )？

> ID：10882970
> 
> 赞同：0
> 
> 时间：2012-06-04T14:26:25.570
> 
> 标签：c#, asp.net, sitefinity

我有一个基本的 asp 中继器，它生成 a`ul`及其子`li`s。似乎每个`li`前面都有这个神奇的零空格字符 ( [`&#8203;`](https://stackoverflow.com/a/2973713/61654))。这会通过在每个列表项之间添加额外的空间来搞乱设计。

该代码目前在一个开发网站上，所以我不能给你一个链接。这是基本标记

```
<asp:Repeater ID="rptrPageMeta" runat="server">
<HeaderTemplate>
    <ul>
</HeaderTemplate>
<ItemTemplate>​
    <li>
    </li>
</ItemTemplate>
<FooterTemplate>
    </ul>
    <div class="clear"></div>
</FooterTemplate>
</asp:Repeater> 
```

转发器有一个在 Presenter 中绑定到它的数据项列表。但在这个例子中，它是无关紧要的，因为每个项目都没有被渲染。这是它生成的：

```
<ul>
&#8203;
    <li>
    </li>&#8203;
    <li>
    </li>&#8203;
    <li>
    </li>&#8203;
    <li>
    </li>&#8203;
    <li>
    </li>&#8203;
    <li>
    </li>
</ul> 
```

我想删除这个字符而不是做一个 CSS hack 来隐藏它。我试图通过将所有代码放在一行中来删除文件中的所有空格。这删除了那里的空白，但不会摆脱零空格字符。我还在记事本++中编辑了文件，显示了所有字符，但字符不存在。

有什么方法可以删除这个字符？

**编辑：**我确实创建了一个新项目，但无法重现此问题。我现在唯一可以假设的是它是由 Sitefinity 引起的。此代码用于 Sitefinity 5 CMS 内的小部件模板中。

**Current Hack：**我解决这个问题的方法是在特定列表中使用以下 js：

```
if ($('.my-list').length > 0) {
    $('.my-list').each(function() {
        $(this).html($(this).children('li'));
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:58:50.250

您从Repeater 控件发出此字符的错误假设开始。它不是。您的数据或源代码都包含该字符。

当然，您在 Visual Studio 中看不到该字符，因为它毕竟是零宽度的。尝试使用 Notepad++ 并将其配置为显示特殊字符。或者使用十六进制编辑器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:44:50.903

在 ItemTemplate 中，将标签放在一起。

`<ItemTemplate​&gt;<li></li><ItemTemplate>`

# android - 在 WebView 上为 EPub 阅读器渲染 Html 元素

> ID：10882972
> 
> 赞同：3
> 
> 时间：2012-06-04T14:26:27.807
> 
> 标签：android

我正在用 Paul Siegmann [http://www.siegmann.nl/epublib/android的图书馆制作一个 EPub 阅读器](http://www.siegmann.nl/epublib/android)

我将目录提取到 a`ListView`中，该项目链接到 a `WebView`，显示所选章节的内容。

我在显示只有纯文本元素的 E-Pub 文件时没有发现任何问题，但是当涉及到包含 Html 元素（链接、图像）的 E-Pub 文件时，它无法显示。

根据我的情况，有人知道如何在 WebView 上呈现 Html 元素吗？

这是我的课程：

```
public class EPubReaderActivity extends ListActivity 
{

private LayoutInflater inflater;
private List<RowData> contentDetails;
public static final String BOOK_NAME = "ferring.epub";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    inflater = (LayoutInflater) getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
    contentDetails = new ArrayList<RowData>();
    AssetManager assetManager = getAssets();
    try {
        InputStream epubInputStream = assetManager.open(BOOK_NAME);
        Book book = (new EpubReader()).readEpub(epubInputStream);
        logContentsTable(book.getTableOfContents().getTocReferences(), 0);
    } catch (IOException e) {
        Log.e("epublib", e.getMessage());
    }

    CustomAdapter adapter = new CustomAdapter(this, R.layout.list,
            R.id.title, contentDetails);
    setListAdapter(adapter);
    getListView().setTextFilterEnabled(true);
}

private class CustomAdapter extends ArrayAdapter<RowData>{

    public CustomAdapter(Context context, int resource,
            int textViewResourceId, List<RowData> objects) {
        super(context, resource, textViewResourceId, objects);
    }

    private class ViewHolder{
        private View row;
        private TextView titleHolder = null;

        public ViewHolder(View row) {
            super();
            this.row = row;
        }

        public TextView getTitle() {
            if(null == titleHolder)
                titleHolder = (TextView) row.findViewById(R.id.title);
            return titleHolder;
        }
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder = null;
        TextView title = null;
        RowData rowData = getItem(position);
        if(null == convertView){
            convertView = inflater.inflate(R.layout.list, null);
            holder = new ViewHolder(convertView);
            convertView.setTag(holder);
        }
        holder = (ViewHolder) convertView.getTag();
        title = holder.getTitle();
        title.setText(rowData.getTitle());
        return convertView;
    }

}

private void logContentsTable(List<TOCReference> tocReferences, int depth) {
    if (tocReferences == null) {
        return;
    }
    for (TOCReference tocReference:tocReferences) {
        StringBuilder tocString = new StringBuilder();
        for (int i = 0; i < depth; i++) {
            tocString.append("\t");
        }
        tocString.append(tocReference.getTitle());
        RowData row = new RowData();
        row.setTitle(tocString.toString());
        row.setResource(tocReference.getResource());
        contentDetails.add(row);
        logContentsTable(tocReference.getChildren(), depth + 1);
    }
}

private class RowData{
    private String title;
    private Resource resource;

    public RowData() {
        super();
    }

    public String getTitle() {
        return title;
    }

    public Resource getResource() {
        return resource;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public void setResource(Resource resource) {
        this.resource = resource;
    }

}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    RowData rowData = contentDetails.get(position);
    Intent intent = new Intent(EPubReaderActivity.this, ContentViewActivity.class);
    try {
        intent.putExtra("display", new String(rowData.getResource().getData()));
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    startActivity(intent);

}

} 
```

**内容类：**

```
public class ContentViewActivity extends Activity {

WebView webView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.content);

    webView = (WebView) findViewById(R.id.web);
    webView.getSettings().setJavaScriptEnabled(true);

    String displayString = getIntent().getExtras().getString("display");
    if(displayString != null)
        webView.loadData(displayString, "text/html", "utf-8");
}   
} 
```

PS：我不想使用 PageTurner (http://www.pageturner-reader.org/) 或 FBReader (http://www.fbreader.org/FBReaderJ)，因为它们都需要 GPL 许可证才能用于商业用途。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T16:54:45.800

实际上，PageTurner 的 Html 渲染部分被拆分为一个单独的库，该库是 Apache 许可的。

我特别这样做，因为我认为它对商业项目也很有用。

渲染库在这里：http: [//github.com/nightwhistler/htmlspanner](http://github.com/nightwhistler/htmlspanner)

# php - 从数据库中解码 vBulletin 日期

> ID：10882979
> 
> 赞同：0
> 
> 时间：2012-06-04T14:26:50.937
> 
> 标签：php, database, date, vbulletin

我需要使用外部脚本使用来自 vBulletin 数据库的信息。我需要解码加入/上次访问日期。我在数据库中找到了它，但 06-02-2012 在数据库中编码为 1338661020。如何将其解码回 06-02-2012（在 PHP 中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:39:31.287

或者，您可以使用 DateTime （这是一个更强大的解决方案）。

```
$date = new DateTime('@1338661020');
echo $date->format(DATE_ATOM); 
```

这还允许您轻松处理每个用户的自定义时区等事情。

更多信息可在 php.net 上获得：http: [//us3.php.net/manual/en/book.datetime.php](http://us3.php.net/manual/en/book.datetime.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:34:56.207

刚刚发现：

```
echo date(DATE_ATOM, "1338661020"); 
```

# python - 模型和实例方法：会话感知（sqlalchemy）

> ID：10882980
> 
> 赞同：20
> 
> 时间：2012-06-04T14:26:52.607
> 
> 标签：python, sqlalchemy

因此，使用和学习 sqlalchemy。

我有一个实例，我需要得到一个值。如果该值存在，则返回它。如果不计算并返回。

总是有人会说“你做错了”，一般来说，对改进的投入是值得赞赏的。但是，我正在研究如何在无需明确管理会话的情况下做到这一点，因为我正在处理的工作开始增长，并且在我想要更新实例时不断管理会话是有问题的。这让我觉得我*实际上*做错了。

那么如何修复以下方法以不显式管理会话？

```
def method(self, session):
        if self.i_needed_this is None:
            self.i_needed_this = calculate(calcutron)
            session.add(self)
            session.commit()
            return self.i_needed_this                        
        else:
            return self.i_needed_this 
```

也许这个问题的标题应该是“让实例会话感知，所以我并不总是明确地管理它”，如果这是一个愚蠢的问题，至少用例子告诉我为什么，并指出其他人问得更好的地方。

编辑：显然，导入我正在使用的会话有效，并且它是可用的，所以当我更熟练使用 sqlalchemy 时，它可能不是问题或未来的问题。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-04T16:47:56.237

您的问题很常见，答案在SA 文档的[会议常见问题解答中：](http://docs.sqlalchemy.org/en/latest/orm/session_basics.html#session-frequently-asked-questions)

*   如何获取某个对象的 Session？使用Session 上可用的[object_session()类方法：](http://docs.sqlalchemy.org/en/latest/orm/session_api.html#sqlalchemy.orm.session.Session.object_session)
    `session = Session.object_session(someobject)`

*但是，它假定对象是持久的并且是新的（但已添加到会话中）或绑定到会话。您的示例代码包含将对象添加到会话的逻辑，因此在这种情况下我的假设可能不正确。*

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-03-27T14:46:19.190

请参阅[如何获取某个对象的 Session？](http://docs.sqlalchemy.org/en/latest/orm/session_basics.html#how-can-i-get-the-session-for-a-certain-object)：

*   您可以使用 SA 运行时检查 API：

    ```
    from sqlalchemy import inspect
    # ...
    # within instance method
    session = inspect(self).session 
    ```

*   或`object_session()`方法：

    ```
    from sqlalchemy.orm.session import Session
    # ...
    # within instance method
    session = Session.object_session(self) 
    ```

# php - 在 php/python 中绘制带有文本的图表

> ID：10882983
> 
> 赞同：0
> 
> 时间：2012-06-04T14:26:58.477
> 
> 标签：php, draw

我正在寻找一种方法来创建这个：

[http://goo.gl/PNj45](http://goo.gl/PNj45)

使用 php OR python 使用从用户输入中获取的数据。我知道`connection`s和`text`s。在这种情况下，实际上也不可能使用谷歌图表 API。

有什么见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:30:52.993

您可能会发现有用的工具是[Graphviz](http://www.graphviz.org/)

# python - 为什么reduce函数的初始值不是强制性的？

> ID：10882986
> 
> 赞同：3
> 
> 时间：2012-06-04T14:27:17.973
> 
> 标签：python, functional-programming

在 haskell 中，运算符的初始值`foldl`显然是强制性的

```
Prelude> foldl (+) 0 [1]
1
Prelude> foldl (+) 0 []
0
Prelude> :t foldl
(a -> b -> a) -> a -> [b] -> a 
```

但是在reduce函数（或`functools.reduce`）中，初始值是可选的

```
reduce(function, sequence[, initial]) -> value 
```

唯一需要初始值的时候是序列为空时。这与haskell中的行为一致。Python中的Does`reduce`假设如果序列的大小为1；然后它在内部处理这些极端情况？

```
>> reduce(operator.sub, [1])
1
>> reduce(operator.mul, [1])
1
>> reduce(operator.add, [1])
1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T14:35:26.967

回想一下，在 Haskell 中有两种版本的折叠——一种采用某种结果类型的种子，另一种假定种子是序列的第一个元素。

```
foldr :: (a -> b -> b) -> b -> [a] -> b
foldr k z = go
        where
            go []     = z
            go (y:ys) = y `k` go ys 
```

和

```
foldr1 :: (a -> a -> a) -> [a] -> a
foldr1 _ [x]            =  x
foldr1 f (x:xs)         =  f x (foldr1 f xs)
foldr1 _ []             =  errorEmptyList "foldr1" 
```

`foldr`使用序列的初始元素作为第一个状态。

还有一个重要的区别：通过使用序列的第一个元素作为输入状态，`foldr1`被限制为返回与输入列表相同类型的数组。`foldr`但是可以返回一些不同的类型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-04T14:30:22.317

从[手册](http://docs.python.org/library/functions.html#reduce)：

> 如果没有给出*初始化程序并且**可迭代*只包含一个项目，则返回第一个项目

* * *

我也想对此发表评论：

> 唯一需要初始值的时候是序列为空时

这并不完全正确。在折叠操作中，您通常总是假设您有一个较早的结果可以使用。如果您的折叠操作是将元素附加到列表中，则初始元素可以是空列表，因此您可以向其中添加元素。更一般地，当函数的返回类型与列表中元素的类型不同时，总是需要初始值。

# c# - 使用 HTMLAgilityPack.dll 读取 XHTML 文件

> ID：10882987
> 
> 赞同：0
> 
> 时间：2012-06-04T14:27:24.977
> 
> 标签：c#, html-agility-pack

我正在研究 C#（基于 Windows 窗体）项目。它需要从 XHTML 文件中读取内容。XHTML 文件存储在本地驱动器上而不是 Web 上。是否可以使用“HTMLAgilityPack.dll”读取 XHTML 页面的内容（无标签）？如果没有，还有其他解决方案吗？

谢谢; 马尤雷什。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:34:03.157

是的你可以。我正在使用那个库，它工作正常。它公开了一个类似于 .NET 的 System.Xml.XmlDocument 类的 API，但显然所有内容都以 Html 为前缀。可以使用 XPath 查询 HTML 文档树，就像 XML 文档一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:56:00.730

如果保证文件是有效的 XHTML（即 XML），那么我将使用`System.Xml.XmlDocument`.

我似乎记得 HtmlAgilityPack 读取 HTML 文档并尽力使其成为 XHTML。然后，您可以使用其 DOM 处理文档并使用 XPath 选择元素。

# android - android视图创建步骤详解

> ID：10882988
> 
> 赞同：1
> 
> 时间：2012-06-04T14:27:29.753
> 
> 标签：android, android-layout

这是一个普遍的问题，试图解决android中与视图相关的问题对我来说一直是一场噩梦。实际上不是逻辑，但这需要我很多时间，而且我采用了错误的方法，我知道这是错误的：我尝试其他方法，如果我在屏幕上看到正确的东西就可以了。但我知道这不是正确的方法。实际上，我想通过在使用 XML 创建视图时学习内部操作来理清思路。

我需要的是一个参考或教程，清楚地解释当我创建视图、布局、视图树等时会发生什么。我实际上想知道解析器在创建过程中的操作。

在 IOS 平台上，他们开发了一个非常简单直观的故事板设计器，外观和感觉非常好，开发人员不必花太多时间解决 ui 问题。我只想像这样简单地画一些东西。至少应该有一些东西可以让我认为绘制ui很容易。建议？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:54:30.050

首先，你永远找不到像 Apple 的 Interface Builder for Android 那样的东西。原因是，苹果在幕后做了很多你永远看不到，也无能为力的隐藏“魔法”。他们为你做了这么多工作，既是福也是祸。谷歌/安卓不这样做。

Android XML 布局本质上 1:1 等效于使用 java 代码构建布局。您在 xml 中为视图定义的属性直接传递给该视图的 java 代码定义，并在那里读取/解释（请参阅[AttributeSet](http://developer.android.com/reference/android/util/AttributeSet.html)）。

最好的办法是阅读 Google 关于布局和视图的文档。Android 布局本质上是动态的，而 Apple 布局本质上是静态的。通常最好忘记你所知道的关于苹果观点的一切，并按照谷歌规定的方式去做。您可以在此处了解有关 Android 布局的更多信息[。](http://developer.android.com/guide/topics/ui/index.html)

# android - 如何在android上为音频创建示波器

> ID：10882990
> 
> 赞同：2
> 
> 时间：2012-06-04T14:27:43.607
> 
> 标签：android, android-audiomanager, oscilloscope

我正在使用示波器创建一个用于录音的应用程序。我用下面的代码进行了录音现在我添加了如图所示的示波器。我的要求是示波器的波形应该根据用户的语音音调为之字形。我已经尝试了很长时间，但我找不到解决方案。我没有任何想法来实现示波器。请帮助我如何做到这一点，并请提供一些示例代码片段。谢谢。

录音代码：

```
 recorder = new AudioRecord(MediaRecorder.AudioSource.MIC,RECORDER_SAMPLERATE, RECORDER_CHANNELS,RECORDER_AUDIO_ENCODING, bufferSize);

    recorder.startRecording();
...

    byte data[] = new byte[bufferSize];
    String filename = getTempFilename();
    FileOutputStream outputstream = null;
    try {
        outputstream = new FileOutputStream(filename, true);
    } catch (FileNotFoundException e) {
        Log.e("Error @ writeAudioDataToFile() - 1 ", e.getMessage());
    }

    int read = 0;

    if (null != outputstream) {
        while (isRecording) {
            read = recorder.read(data, 0, bufferSize);

            if (AudioRecord.ERROR_INVALID_OPERATION != read) {
                try {
                    outputstream.write(data);
                } catch (IOException e) {
                    Log.e("Error @ writeAudioDataToFile() - 2 ",e.getMessage());
                }
            }
        }

        try {
            outputstream.close();
        } catch (IOException e) {
            Log.e("Error @ writeAudioDataToFile() - 3 ", e.getMessage());
        }
    } 
```

![在此处输入图像描述](../Images/a4f0e8375f25e8ab1f96a95c5bf35a5e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:38:50.710

对此并没有真正简单的答案，您肯定需要做一些工作来处理它。以下是一些可以帮助您入门的链接：

[http://code.google.com/p/musicg/](http://code.google.com/p/musicg/)

[http://codeidol.com/java/swing/Au​​dio/Build-an-Audio-Waveform-Display/](http://codeidol.com/java/swing/Audio/Build-an-Audio-Waveform-Display/)

# matlab - 获取给定运行的传感器平均值

> ID：10882997
> 
> 赞同：0
> 
> 时间：2012-06-04T14:28:21.140
> 
> 标签：matlab, mean

给定在 100 次运行中每次测量的传感器值的数量。

```
 A =

 8     7     8     9     8     8     8     8     9     8 
```

显示特定运行的值（假设每 5 次运行）

代码是：

```
C= B(1:5:end);

C=  8   8 
```

我想要的是存储5次运行的平均值怎么做？

```
answer should be = 8  8.2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:34:57.033

我手头没有 Matlab，但我会尝试类似`mean(reshape(B,5,[]))`.

# android - 绕过 Android 模拟器中的特定网址

> ID：10882998
> 
> 赞同：2
> 
> 时间：2012-06-04T14:28:22.267
> 
> 标签：android, android-emulator, emulation

无论如何通过 -http-proxy 命令行参数绕过android模拟器中的特定服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:35:41.503

也许这个答案可以帮助你：[Proxy which requires authentication with Android Emulator](https://stackoverflow.com/questions/28380/proxy-which-requires-authentication-with-android-emulator)

或者这个：[如何设置 Android 模拟器代理设置？](https://stackoverflow.com/questions/1570627/how-to-setup-android-emulator-proxy-settings)

更多信息：http: [//developer.android.com/guide/developing/tools/emulator.html#startup-options](http://developer.android.com/guide/developing/tools/emulator.html#startup-options)