# StackOverflow 问答 11711000-11711999

# javascript - 如何下载嵌入式 swf？

> ID：11711003
> 
> 赞同：0
> 
> 时间：2012-07-29T16:43:37.040
> 
> 标签：javascript, flash

我正在通过我大学图书馆的 VPN 连接查看网站上的电子书。电子书正在通过 Adob​​e Flash 显示，我无法保存或下载电子书。我想在本地存储嵌入在此站点上的 swf 文件。脚本如下所示：

```
<script type="text/javascript">
var flashvars = {};
if (swfobject.getQueryParamValue("ean")) {
  flashvars.ebook_loc = "/fileadmin/preselect/content/campus";
  flashvars.ean = "9783593411743";
  flashvars.INITIAL_PAGE = "0";
  flashvars.pdY= "";
  flashvars.pdX= "";
  flashvars.aC= "25";
  flashvars.cT= "© 2012 by PRESELECT.media";
  flashvars.hT = "Hilfe";
  flashvars.hTl = "index.php?id=fp_help";
  flashvars.sPT = "Aktuelle Seite drucken";
  flashvars.mPT = "Aktuelle und folgende 9 Seiten drucken";
  flashvars.cpT = "Zitat kopieren";
  flashvars.stamp = "Lizensiert für KIT Karlsruhe. 2012-07-29";
  flashvars.cL = "Unterkapitel ausblenden";
  flashvars.cLK = encodeURIComponent('index.php?id=bib_view&ean=9783593411743&toc=zu');
}
var params = {};
var attributes = {
  id: "flash",
  name: "flash",
  scale:"noscale"
};

if (screen.width > 1280) {
      var hoehe = "1250";
      var breite = "930";
    } 
else if(screen.width > 1024)
     {
      var hoehe = "1150";
      var breite = "850";
    } 
    else {
      var hoehe = "850";
      var breite = "640";
    }

swfobject.embedSWF(flashvars.ebook_loc+"/holder_040212.swf", "swf", breite, hoehe, "8.0.0",flashvars.ebook_loc+"/expressInstall.swf", flashvars, params, attributes);
</script> 
```

有没有软件工具可以做到这一点？谢谢你的时间！

# php - 正则表达式：如何捕获一行的开头、模式和结尾？

> ID：11711005
> 
> 赞同：3
> 
> 时间：2012-07-29T16:43:48.480
> 
> 标签：php, regex

这里有些例子：

1.  `Some text A`
2.  `Some text A 8:00-19:00`
3.  `8:00-19:00`
4.  `Some text A 8:00-19:00 Some text B`

对于上述每种情况，我需要捕获（如果可能）：

*   时间（`8:00-19:00`）
*   开头 ( `Some text A`)
*   结尾（`Some text B`）

使用这种模式`#^(.*?) ?(\d{1,2}:\d{2}-\d{1,2}:\d{2})?$#`，我可以捕获（来自示例 2）：

*   `Some text A`
*   `8:00-19:00`

但是我无法通过在模式的末尾添加`(.*)`或来捕获该行的其余部分。`(.*?)`

你能帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:43:14.993

使用[preg_split](http://php.net/manual/en/function.preg-split.php)怎么样？

```
$tests = array(
    'Some text A',
    'Some text A 8:00-19:00',
    '8:00-19:00',
    'Some text A 8:00-19:00 Some text B'
);

foreach ($tests as $test) {
    $res = preg_split('/(\d\d?:\d\d-\d\d?:\d\d)/', $test, -1,PREG_SPLIT_NO_EMPTY|PREG_SPLIT_DELIM_CAPTURE);
    print_r($res);
} 
```

**输出：**

```
Array
(
    [0] => Some text A
)
Array
(
    [0] => Some text A 
    [1] => 8:00-19:00
)
Array
(
    [0] => 8:00-19:00
)
Array
(
    [0] => Some text A 
    [1] => 8:00-19:00
    [2] =>  Some text B
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T17:04:22.137

```
<?php

    $pattern = <<<REGEX
/
(?:
    (.*)?\s*                    #Prefix with trailing spaces
    (
        (?:\d{1,2}:\d{1,2}-?)   #(dd:dd)-?
        {2}                     #2 of those
    )                           #(The time)
    \s*(.*)                     #Trailing spaces and suffix
    |
    ([a-zA-Z ]+)                #Either that, or just text with spaces
)
/x
REGEX;

    preg_match($pattern, "Some text A 8:00-19:00 Some text B", $matches);

    print_r($matches); 
```

该数组`$matches`将包含您需要的所有部分。

编辑：现在也只匹配文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T17:04:55.507

我认为您的主要问题是您通过`?`在其后添加数字组（我认为您不想要）使数字组成为可选。

这对我有用`/^(.*) ?(\d{1,2}:\d{2}-\d{1,2}:\d{2}) ?(.*)$/`：

```
<?

$str = "Some text A 8:00-19:00 Some text B";
$pat = "/^(.*) ?(\d{1,2}:\d{2}-\d{1,2}:\d{2}) ?(.*)$/";

if(preg_match($pat, $str, $matches)){
   /*

    Cases 2, 3 and 4

    Array
    (
        [0] => Some text A 8:00-19:00 Some text B
        [1] => Some text A 
        [2] => 8:00-19:00
        [3] => Some text B
    )

   */
}else{
   /* Case 1 */
}

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T17:42:55.720

好的......我不明白究竟是什么情况。

我相信您想要匹配 3 个可选组（它们可能会匹配“格式错误”的输入，除非您提供您不想匹配的案例场景）。

这适用于所有示例，尽管在案例 1 中，“某些文本 A”出现在 $matches[0] 和 $matches[3] 而不是 $matches[1] 中。

```
/^([A-Za-z ]*?)([0-2]{0,1}[0-9]\:[0-6][0-9]\-[0-2]{0,1}[0-9]\:[0-6][0-9])?([A-Za-z ]*?)$/ 
```

# java - 如何在 Mac OS X 上安装 mod_jk

> ID：11711009
> 
> 赞同：12
> 
> 时间：2012-07-29T16:44:27.023
> 
> 标签：java, macos, apache, tomcat, mod-jk

我正在寻找在 Mac OS X 10.7 Lion 或更高版本上安装 mod_jk 的正确方法。目标是在 Apache HTTPD 后面测试 Tomcat。

到目前为止，我发现安装 mod_jk 的唯一方法是下载源代码，然后在控制台中配置它并进行 make 和 make install。

这不是很正确，因为我需要自己管理 mod_jk 安装和配置。例如，我可以稍后在需要时忘记删除 mod_jk。无论如何，我认为应该有更友好的方式来安装 mod_jk，比如某种 DMG 包。

我还发现 mod_jk 在 OS X Server 中可用。实际上它在我的开发机器上，但仅适用于服务器。

```
<IfDefine MACOSXSERVER>
...
#LoadModule jk_module libexec/apache2/mod_jk.so
...
</IfDefine MACOSXSERVER> 
```

对于不安装 OS X Server 或任何其他方式的开发人员，可能有一个 mod_jk 包。

**更新**

1.  [mod_proxy_ajp](http://httpd.apache.org/docs/2.2/mod/mod_proxy_ajp.html)是另一种选择。主要优点：它与 Apache 和 Mac OS X 捆绑在一起
2.  我现在在我的配置中测试了[mod_proxy_ajp](http://httpd.apache.org/docs/2.2/mod/mod_proxy_ajp.html)并且可以说它更好——因为不需要额外的配置。mod_proxy_ajp 在 Mac 上开箱即用，我相信也许在 linux-server 上也是如此。您也不需要使用额外的 workers.properties 文件。

这是我的配置的样子：

```
<VirtualHost *:80>
    ServerAdmin me@me.com
    DocumentRoot "/Users/me/Sites/projekt"
    ServerName projekt.local

    <Directory "/Users/me/Sites/projekt">
        Options Indexes FollowSymLinks
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>

    <Proxy *>
      AddDefaultCharset Off
      Order deny,allow
      Allow from all
    </Proxy>

    ProxyPass /coolapp ajp://localhost:8009/coolapp
    ProxyPassReverse /coolapp ajp://localhost:8009/coolapp

    ErrorLog "/private/var/log/apache2/projekt.local-error_log"
    CustomLog "/private/var/log/apache2/projekt.local-access_log" common    
</VirtualHost> 
```

上面这个和配置了带有 AJP 连接器的 Tomcat 只是你所需要的。惊人的！

参考：

1.  在 OS X 上安装 mod_jk - [http://www.bartbusschots.ie/blog/?p=1347](http://www.bartbusschots.ie/blog/?p=1347)
2.  比较 mod_jk 与 mod_proxy_ajp [apache 到 tomcat：mod_jk 与 mod_proxy](https://stackoverflow.com/questions/1081918/apache-to-tomcat-mod-jk-vs-mod-proxy)
3.  [如何使用 Tomcat 配置 mod_proxy_ajp ？](http://www.zeitoun.net/articles/configure-mod_proxy_ajp-with-tomcat/start)

请建议。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-29T18:19:32.673

你可以[试试 mod_proxy_ajp](http://httpd.apache.org/docs/2.2/mod/mod_proxy_ajp.html)。它像 mod_jk 一样执行 AJP13 和负载平衡，但随 Mac OS X 一起提供。

# c# - 使用 Dapper 从 MySql 映射日期字段时出现 InvalidCastException

> ID：11711016
> 
> 赞同：4
> 
> 时间：2012-07-29T16:45:05.680
> 
> 标签：c#, .net, mysql, dapper

我刚刚开始使用 Dapper 访问 MySql 数据库，在处理日期字段时似乎遇到了问题。每当我尝试映射 MySql Date 类型字段时，我都会收到无效的演员表。似乎 MySql 连接器正在返回 MySqlDateTime 类型，这导致 Dapper 将其转换为 Object 而不是日期时间。这是相关代码

我的模型上的属性定义

```
public DateTime PickupDate { get; set; } 
```

MySql 中的字段定义

```
PickupDate DATE 
```

抛出异常

```
System.Data.DataException : Error parsing column 1 (PickupDate= - Object)
----> System.InvalidCastException : Specified cast is not valid. 
```

我知道它一定是我缺少的东西，谁能指出我需要做什么才能让 dapper 将此字段映射到 DateTime 数据类型？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T13:32:30.280

答案是在连接字符串中将 AllowZeroDateTime 设置为 false。[从这里](https://dev.mysql.com/doc/connector-net/en/connector-net-connection-options.html)找到的 MySql 连接字符串选项文档。

> 如果设置为 True，则 MySqlDataReader.GetValue() 为具有不允许值（例如零日期时间值）的日期或日期时间列返回 MySqlDateTime 对象，并为有效值返回 System.DateTime 对象。如果设置为 False（默认设置），则会为所有有效值返回一个 System.DateTime 对象，并为不允许的值（例如零日期时间值）引发异常。

出于某种原因，即使有一个有效的日期，我得到的是 MySqlDateTime 类型而不是 DateTime。将此更改为 false 会导致发生正确的行为。

# sql-server - 带有可选元素的 SQL Server T-SQL XML

> ID：11711019
> 
> 赞同：1
> 
> 时间：2012-07-29T16:45:20.553
> 
> 标签：sql-server, xml, tsql

我有一个带有 XML 列的表，其中一些元素是可选的。在这个（非常）简化的示例中，代码在所有元素都存在时有效，但如果一个或多个不存在，我什么也得不到。（即零行而不是 1，其中 Y 为空）

我通过各种搜索获得了这种技术，所以肯定有更好的方法。最终，我希望这是一个观点（如果这对方法很重要），但我应该能够弄清楚这一点。

```
declare @x XML = '<Root><A x="1"><B ySameName="2"/><C ySameName="3"/></A></Root>';
--declare @x XML = '<Root><A x="1"><C ySameName="3"/></A></Root>';
select EA.*, EB.*, EC.* from
(select c.node.value('@x', 'int') as X 
   from @x.nodes('//Root/A') AS c(node)) EA
,(select c.node.value('@ySameName', 'int') as YB 
   from @x.nodes('//Root/A/B') AS c(node)) EB
,(select c.node.value('@ySameName', 'int') as YC 
   from @x.nodes('//Root/A/C') AS c(node)) EC; 
```

我可以使用本地变量执行 3 次选择，然后返回所有变量 - 但这看起来很笨重，我不确定如何使用这种方法进行查看。

感谢：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T18:08:09.543

试试这个：

```
select T.N.value('@x', 'int') as EA,
       T.N.value('B[1]/@ySameName', 'int') as YB,
       T.N.value('C[1]/@ySameName', 'int') as YC
from @x.nodes('/Root/A') as T(N) 
```

# c# - 如何在互联网上使用我的 C# Messenger？

> ID：11711020
> 
> 赞同：0
> 
> 时间：2012-07-29T16:45:20.507
> 
> 标签：c#, .net, messenger

我用 c# 编写了一个简单的本地信使供自己使用。现在它可以通过本地网络（局域网，wifi）工作并且工作正常。现在我想把它给我的朋友并通过互联网使用它，但不知道如何使用除本地主机之外的不同 ip。

如有任何帮助，我将不胜感激。提前致谢。

* * *

```
 private void InitializeConnection()
    {

        ipAddr = IPAddress.Parse(txtIp.Text);
        tcpServer = new TcpClient();
        tcpServer.Connect(ipAddr, 1986);

        Connected = true;
        UserName = txtUser.Text;

        txtIp.Enabled = false;
        txtUser.Enabled = false;
        txtMessage.Enabled = true;
        btnSend.Enabled = true;
        btnConnect.Text = "Disconnect";

        swSender = new StreamWriter(tcpServer.GetStream());
        swSender.WriteLine(txtUser.Text);
        swSender.Flush();

        thrMessaging = new Thread(new ThreadStart(ReceiveMessages));
        thrMessaging.Start();
    } 
```

这是客户部分

```
 public ChatServer(IPAddress address)
    {
        ipAddress = address;
    }

    private Thread thrListener;

    private TcpListener tlsClient;

    bool ServRunning = false;

    public static void AddUser(TcpClient tcpUser, string strUsername)
    {
        ChatServer.htUsers.Add(strUsername, tcpUser);
        ChatServer.htConnections.Add(tcpUser, strUsername);

        SendAdminMessage(htConnections[tcpUser] + " has joined us");
    } 
```

和这个服务器部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T07:35:18.713

# 介绍

为了能够让其他用户连接到您的计算机，您需要做很多事情。希望这应该可行，但网络通常会变得复杂，并且并非所有网络都运行相同。我假设您在您可以访问的某种路由器后面运行它。网络很复杂，这就是为什么这个答案非常长的原因（如果你在阅读其余部分时质疑自己）。在大多数情况下，它是非常直截了当的，但可能需要一些时间。

在开始之前，只需：

## *预警*

从安全角度考虑，就像计算机和一般网络上的几乎所有东西一样，实际上并没有所谓的“完全安全”（至少据我所知）。与网络一样，打开端口也不是完全安全的。我不是一流的安全专家，但通过这样做，您允许其他计算机与您的计算机发送和接收数据。在您只是进行简单的文本聊天的情况下，这应该是安全的，但在其他情况下，这可能不一样。在处理 SSH 和 FTP 等更复杂和重要的情况下，涉及到更多的安全性。就像警告一样，在弄乱您的网络或一般计算机时，请务必小心。

## 入门

无论如何，（如果我还没有吓跑你的话）这些是我必须采取的步骤才能让你的聊天服务器正常工作：

* * *

# 转发路由器上的端口

您要做的第一件事是转发或打开路由器上的端口。好吧，在您甚至可以这样做之前，您需要了解有关网络的几件事：

基本上，您的路由器是将您的计算机网络连接到互联网并允许通过端口进行连接。如果您不了解端口是什么，它是用于建立互联网连接的端口，基本上就像门牌号码与街道地址一样。它告诉它在那条街道上的哪个地方，并且比街道地址更具体。就网络而言，这是一个数字，用于说明通信的具体位置。端口号（“门牌号”）告诉计算机的 IP 地址（“街道地址”）要连接的位置。

[具体来说，端口号是一个 16 位无符号整数，范围从 0 到 65535（但根据Wikipedia](http://en.wikipedia.org/wiki/Port_number#Technical_details "维基百科")，端口号 0 实际上不能使用）即使这是一个 16 位无符号整数，在 C# 中是 a`ushort`或 a ，当`UInt16`使用[TcpClient](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.aspx "TcpClient")或[TcpListener](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener "Tcp监听器")，他们改为使用有符号的 32 位整数，而不是标准`int`或`Int32`. 此外，例如，端口通常在 IP 地址之后用冒号 (" `:`") 表示，`123.45.67.89:80`但在其他情况下可能会有所不同。这是使用 IPv4，但也有我尚未使用的 IPv6。

现在，如何转发端口，为什么需要这样做？转发端口所做的是将连接到路由器上某个端口的连接转发到路由器后面的计算机。并不总是有一种简单、直接和直接的方式来做到这一点，因为路由器公司有不同的方式来实现这一点。通常，要弄清楚这一点，您可以在 Google 上获取有关如何在特定路由器上转发端口的说明，例如，您可以搜索“*路由器公司名称*路由器上的转发端口”来找到它。为此，在开始之前，您可能还需要一些东西：

*   您将需要您的路由器管理员用户名和密码，这通常不是（并且可能不应该）用于连接它的。如果您不知道它是什么，那么设置您的路由器的人应该知道。一旦你完成了这项工作，你就可以继续前进了。
*   您可能还需要计算机的本地 IP 地址，该地址用于寻址路由器网络中的计算机。要找到它，您的路由器可能会告诉您它是什么，但如果您似乎找不到它，这里是在 Windows 上执行此操作的步骤。
    1.  打开命令提示符
        *   通过转到`Start >> Run...`或按 Win+R打开运行对话框
        *   输入`cmd`并按回车
    2.  `ipconfig`通过输入并按回车键来 运行以查找您的计算机 IP 地址
        *   您应该会看到网络接口连接列表
        *   要找到我们正在寻找的那个，您需要找到您用来通过路由器连接到互联网的网络连接。它在计算机上可能有所不同，但在我的情况下，它的命名`Wireless LAN adapter Wireless Network Connection`是因为我使用的是笔记本电脑。我想，这个名字可能就`LAN`在其中。
        *   这不应该有：`Media State . . . . . . . . . . . : Media disconnected`在它下面列出，因为您需要连接到您的路由器。如果你不是那么简单地这样做。
        *   相反，应该在`IPv4 Address. . . . . . . . . . . :`旁边列出您的实际计算机的 IP 地址。这是您要转发其端口的计算机的 IP 地址。当然，如果您使用的是使用 IPv6 的路由器，这可能会有所不同。

此外，在执行此操作的过程中，您正在使用的端口号可能会被另一个进程或服务占用。这没关系，也很容易解决；您只需要更改端口号。例如，您将想要尝试一个较高的数字，例如 8500，直到找到一个有效的数字。获得该号码后，只需更新代码中的端口号。为了使这更容易，拥有一个存储它的常量要容易得多，例如：

```
const int Port = 8500; 
```

因此，您可以让客户端连接：

```
tcpClient.Connect(ipAddress, Port) 
```

然后让服务器监听

```
TcpListener tcpListener =  new TcpListener(ipAddress, Port); 
```

与其他全局变量（例如您可能拥有的端口号）一样，创建[全局变量 class](http://www.whatismyip.com/)可能会更好，但同时，使用它也可能会引入其他问题，例如使用线程的全局属性。只是一个建议和提醒。

不过，一旦您成功完成端口转发，您就可以继续进行更简单的部分，让您的朋友*实际*连接到您的服务器。

* * *

# 获取路由器的 IP 地址

一旦你设法做到了所有这些，你可能应该拍拍你的后背，因为这是让你的路由器与你试图做的事情*合作的**真正*实际部分。现在您只需将您的 IP 地址、端口号，当然还有您的客户端程序提供给您的朋友，这样他或她就可以连接到服务器。要获取路由器的公共 IP 地址，您可以访问具有讽刺意味的网站[http://www.whatismyip.com/](http://www.whatismyip.com/)。在这里，您可以获得您的公共 IP 地址，但还要确保它在其下方显示“未检测到代理”。如果您使用的是代理，希望您知道它是什么，并且可以连接到互联网而无需获取您的 IP 地址。（相信我，你*不会***要我解释一下现在想要代理）**

 **现在，一旦你得到了它，你就会想把那个 IP 和你的端口号发送给你的朋友。明智地说，您不希望公开显示它，因为您可能不希望一群随机的人试图闯入您的网络。只要您的朋友不公开展示它，通过 IM 或电子邮件发送它应该（希望）没问题。因此，在发送您的 IP 地址时，请谨慎行事。

完成此操作后，请不要忘记实际启动服务器！如果您的服务器没有运行，就无法与客户端通信并接受传入连接。这将避免很多不小心忘记的挫败感。

* * *

# 结论

希望这将帮助您能够创建一个很酷的聊天程序，并在此过程中了解其他一些事情。我真的希望这不是那么长，但是网络在大多数情况下确实很复杂。

希望这对您有很大帮助！**

# solr - solr 可以为 Adob e XML 突出显示规范生成突出显示位置信息吗？

> ID：11711026
> 
> 赞同：0
> 
> 时间：2012-07-29T16:46:15.323
> 
> 标签：solr

Adobe 有一个 PDF 突出显示规范，允许向 PDF 查看器 API 提供描述突出显示位置的 XML 文件。Solr 可以生成生成此类文件所需的突出显示信息吗？强制性信息是：页面、位置和长度。如果答案是肯定的，关于配置 Solr 高亮组件的任何提示？

示例 XML 突出显示文件：

```
<XML>
<Body units='characters' color='#ff00ff' mode='active' version='2'>
<Highlight>
    <loc pg='0' pos='0' len='6' />
    <loc pg='2' pos='1' len='10' />
</Highlight>
</Body>
</XML> 
```

# mysql - mysql - 在组的子组中查找唯一的字符串匹配

> ID：11711028
> 
> 赞同：1
> 
> 时间：2012-07-29T16:46:24.780
> 
> 标签：mysql

我有一个 mysql“问题”，我很难解决问题。

我有一个来自数据库的字符串表（实际上是基因型，但不应该相关），可以存在于任何一到三个样本中。我想计算每个目录 id (c_id) 的每个样本 (s_id) 的唯一等位基因的数量。例如给出下表：

```
id   batch_id  catalog_id   sample_id   tag_id      allele  depth
309     1       324             1         323         TCGC  244
1449616 1       324             2         7961        TCGC  192
2738325 1       324             2        1168472      CCGG  31
3521555 1       324             3        221716       TAAC  29 
```

到目前为止，我已经能够构建以下代码：

```
CREATE TABLE danumbers2
SELECT catalog_id,
count(case when sample_id = '1' and allele != 'consensus' then sample_id end) as SAMPLE1,
count(case when sample_id = '2' and allele != 'consensus' then sample_id end) as SAMPLE2,
count(case when sample_id = '3' and allele != 'consensus' then sample_id end) as SAMPLE3,
sum(case when sample_id = '1' and allele != 'consensus' then depth end) as DEPTH1,
sum(case when sample_id = '2' and allele != 'consensus' then depth end) as DEPTH2,
sum(case when sample_id = '3' and allele != 'consensus' then depth end) as DEPTH3,
count(distinct allele) AS ALLELECOUNT

from matches as danumbers
group by catalog_id

CREATE TABLE thehitlist_all
SELECT catalog_id,SAMPLE1,SAMPLE2,SAMPLE3,DEPTH1,DEPTH2,DEPTH3,ALLELECOUNT
FROM danumbers
WHERE(SAMPLE1>1 SAMPLE2>1 AND SAMPLE3>1 AND ALLELECOUNT>1 AND DEPTH2>10 AND DEPTH3>10) 
```

这给出了这个结果：

```
catalog_id  SAMPLE1 SAMPLE2 SAMPLE3 DEPTH1  DEPTH2  DEPTH3  ALLELECOUNT
324           1    2        1    244     223     29     4 
```

结果本质上是每个样本中等位基因总数的 catalog_id 排序计数，以及*每个目录 id*的不同等位基因总数的计数。我对计算感兴趣（但似乎无法弄清楚！）是样本之间不共享的“独特”等位基因。换句话说，在每个目录 ID 处为每个样本查找诊断“等位基因”。

因此，对于上面的示例数据，我希望表格如下所示：

```
catalog_id  SAMPLE1 SAMPLE2 SAMPLE3 ALLELECOUNT
324           0    1        1       2 
```

任何想法将不胜感激！请让我知道我是否可以提供更多信息等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T18:16:00.893

您可以简单地将其他列名称添加到`COUNT(DISTINCT...`：

```
COUNT(DISTINCT s_id, allele) AS ALLELECOUNT 
```

这将计算 和 的唯一`s_id`组合`allele`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:56:48.437

这将为您提供在 catalog_id 中等位基因诊断的匹配的完整记录：

```
select good.*
from matches good
  left join matches dq on
    dq.catalog_id = good.catalog_id and
    dq.allele = good.allele and
    dq.sample_id != good.sample_id
where dq.catalog_id is null 
```

从这里，您应该能够转储到临时表并使用类似于您已经说明的技术轻松总结。如果您愿意，您可以跳过临时表并直接进入摘要。

它只会过滤掉那些在每个目录中找到多个样本的等位基因的行。如果在同一个目录中为同一个样本找到同一个等位基因，那么这仍然会为它返回一行。如果您想选择每个目录仅找到一个记录的等位基因（而不是每个目录一个样本），那么您可以将 dq.sample_id != good.sample_id 更改为 dq.id != good.id

# html - 使元素浮动直到指定宽度

> ID：11711032
> 
> 赞同：0
> 
> 时间：2012-07-29T16:46:38.340
> 
> 标签：html, css, css-float

我使用浮动来使登录表单在页面右侧以黑条显示。但是，如果用户调整窗口大小并使其具有较小的宽度，则表单会从背景图像上升。我希望它在宽度为 100 像素时停止浮动并且不移动。我的网站是[http://greek.netii.net](http://greek.netii.net)。
我使用以下**HTML 代码：**

```
<form action='index.php?action=login' method='post'>
  <ul id='loginbar'>
    <li>Email:<input id='logemail' type='text' name='email' />
        Password:<input id='logpass' type='password' name='pass' />
        <input class='button' type='submit' name='action' value='Login' />
    </li>
    <li><div id='forgotpass' onclick='forgotpass();'>Forgot Password?</div></li>
  </ul>
</form> 
```

以及以下**css代码：**

```
ul#loginbar {
    float:right;
    margin:25px 0px 0px 0px;
    list-style-type:none;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:50:27.553

您可以使用以下 CSS 属性设置最小宽度和高度：

```
min-width: 100px;
min-height: 150px; 
```

避免组件减少太多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T16:55:59.447

你不需要将它浮动到右边，因为它会在调整大小时向内......使用这个

```
ul#loginbar
{
position: absolute;
top: 10px;
right: 10px;
margin:25px 0px 0px 0px;
list-style-type:none;

} 
```

以及在表单或正文的父容器中添加

```
position: relative;
min-width: 600px; 
```

# ruby-on-rails - 根据日期比较选择记录

> ID：11711033
> 
> 赞同：1
> 
> 时间：2012-07-29T16:47:16.277
> 
> 标签：ruby-on-rails

我的数据库中有一堆“游乐设施”。我只想显示“date_range_end”字段（即日期）在当前日期之后的那些。在我的控制器中，我有这个：

```
Ride.find(:all, :conditions => [ :date_range_end > Date.today ]) 
```

但这会导致此错误：符号与日期的比较失败

那么如何执行这个查询呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T16:52:38.160

```
Ride.where('date_range_end > ?', Date.today).all 
```

# c++ - std::shared_ptr 这个

> ID：11711034
> 
> 赞同：127
> 
> 时间：2012-07-29T16:47:34.063
> 
> 标签：c++, this, shared-ptr, this-pointer

我目前正在尝试学习如何使用智能指针。然而，在做一些实验时，我发现了以下情况，我找不到令人满意的解决方案：

想象一下，您有一个 A 类对象是 B 类对象（子对象）的父对象，但两者应该彼此认识：

```
class A;
class B;

class A
{
public:
    void addChild(std::shared_ptr<B> child)
    {
        children->push_back(child);

        // How to do pass the pointer correctly?
        // child->setParent(this);  // wrong
        //                  ^^^^
    }

private:        
    std::list<std::shared_ptr<B>> children;
};

class B
{
public:
    setParent(std::shared_ptr<A> parent)
    {
        this->parent = parent;
    };

private:
    std::shared_ptr<A> parent;
}; 
```

问题是 A 类的对象如何将`std::shared_ptr`自身的 a ( `this`) 传递给它的子对象？

有 Boost 共享指针（[Getting a `boost::shared_ptr`for`this`](https://stackoverflow.com/questions/142391/getting-a-boostshared-ptr-for-this)）的解决方案，但是如何使用`std::`智能指针来处理呢？

* * *

## 回答 #1

> 赞同：202
> 
> 时间：2012-07-29T16:54:43.957

就是[`std::enable_shared_from_this`](http://en.cppreference.com/w/cpp/memory/enable_shared_from_this)为了这个目的。你从它继承，你可以[`.shared_from_this()`](http://en.cppreference.com/w/cpp/memory/enable_shared_from_this/shared_from_this)从类内部调用。此外，您在此处创建可能导致资源泄漏的循环依赖项。这可以通过使用来解决[`std::weak_ptr`](http://en.cppreference.com/w/cpp/memory/weak_ptr)。所以你的代码可能看起来像这样（假设孩子依赖父母的存在而不是相反）：

```
class A;
class B;

class A
    : public std::enable_shared_from_this<A>
{
public:
    void addChild(std::shared_ptr<B> child)
    {
        children.push_back(child);

        // like this
        child->setParent(shared_from_this());  // ok
        //               ^^^^^^^^^^^^^^^^^^
    }

private:     
    // note weak_ptr   
    std::list<std::weak_ptr<B>> children;
    //             ^^^^^^^^
};

class B
{
public:
    void setParent(std::shared_ptr<A> parent)
    {
        this->parent = parent;
    }

private:
    std::shared_ptr<A> parent;
}; 
```

但是请注意，调用`.shared_from_this()`需要在调用点`this`拥有的`std::shared_ptr`。这意味着您不能再在堆栈上创建此类对象，并且*通常*不能`.shared_from_this()`从构造函数或析构函数中调用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-29T16:57:38.480

您的设计中有几个问题，这似乎源于您对智能指针的误解。

智能指针用于声明所有权。你通过声明父母都拥有所有孩子，而且每个孩子都拥有它的父母来打破这一点。两者都不可能是真的。

此外，您正在返回一个弱指针`getChild()`。通过这样做，您声明调用者不应该关心所有权。现在这可能是非常有限的，但通过这样做，您必须确保在仍然持有任何弱指针时所讨论的孩子不会被破坏，如果您使用智能指针，它会自行排序.

最后一件事。通常，当您接受新实体时，您通常应该接受原始指针。智能指针对于在父母之间交换孩子可以有自己的意义，但对于一般用途，您应该接受原始指针。

# php - 从页面中删除应用程序时的 Facebook 回调

> ID：11711035
> 
> 赞同：2
> 
> 时间：2012-07-29T16:47:45.203
> 
> 标签：php, facebook

我目前正在创建一个添加到 facebook 页面选项卡的应用程序。文档在这里：

[http://developers.facebook.com/docs/appsonfacebook/pagetabs/](http://developers.facebook.com/docs/appsonfacebook/pagetabs/)

但是文档没有提到应用程序的回调被删除。当我的应用程序被删除一个我可以用来更新我的记录的选项卡时，是否有这样的回调会提醒我？

如果重要的话，我目前正在使用 PHP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:12:44.940

转到您的应用程序：管理页面 -> 编辑设置 -> 高级，然后取消授权回调 URL

这是一个关于如何在我的代码中取消对用户授权的 php 示例：

```
require_once(dirname(dirname(dirname(__FILE__))).'/autoload.php');
App::init();
DBConn::init();
error_log("request");

$app_secret = 'yoursecretkey';
$request = parse_signed_request($_POST['signed_request'], $app_secret);
$fbid=$request["user_id"];
error_log($fbid);
if ($fbid) {
    $rec = new ADOdb_Active_Record( "users" );
    $found=$rec->load("id=?",array($fbid));
    if ($found){
        $rec->deauth= 1;
        $rec->save();
    }
}
echo "ok";

function parse_signed_request($signed_request, $secret) {
    list($encoded_sig, $payload) = explode('.', $signed_request, 2);

    // decode the data
    $sig = base64_url_decode($encoded_sig);
    $data = json_decode(base64_url_decode($payload), true);

    if (strtoupper($data['algorithm']) !== 'HMAC-SHA256') {
        error_log('Unknown algorithm. Expected HMAC-SHA256');
        return null;
    }

    // check sig
    $expected_sig = hash_hmac('sha256', $payload, $secret, $raw = true);
    if ($sig !== $expected_sig) {
        error_log('Bad Signed JSON signature!');
        return null;
    }

    return $data;
}

function base64_url_decode($input) {
    return base64_decode(strtr($input, '-_', '+/'));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T16:54:06.913

I don't believe there is such a callback only one for if the user cancels giving your app the privileges first time around.

When you try to auth the user next time on your site and the auth does not succeed then you know they have either:

*   Deauthed your app
*   Or the fb token has not been used for 60 days

As such the users should reauth your app.

Edit: By site I do mean app. English Fail.

# javascript - 为什么我不能从内部重新定义函数的原型

> ID：11711040
> 
> 赞同：1
> 
> 时间：2012-07-29T16:48:30.657
> 
> 标签：javascript, inheritance, prototype

我正在尝试实现一种在 JavaScript 中实现继承的方法。首先我定义了基类，如下：

```
function Person(name){
    name = name + "!"; //I want to reuse this code for initialization

    this.getName = function(){
        return name;
    };

    this.setName = function(_name){
        name = _name;
    };
}; 
```

然后我定义子类。碰巧我需要一种方法来调用基类构造函数。`VipPerson`理想情况下，当我仍然有参数参考时，我会从构造函数中调用它`name`。但是，如果我从那时开始这样做，它根本不起作用，并且如果我尝试`getName`从基类访问，我会收到一个错误`VipPerson has no getName method`。

```
function VipPerson(name, vipLevel){
    this.getVipLevel = function(){
        return vipLevel;
    };

    //the line below would not work!
    //VipPerson.prototype = new Person(name);
};

VipPerson.prototype = new Person(); //but this would. not ideal IMO 
```

我从外部设置原型的缺点`VipPerson`是我丢失了对传递的参数的任何引用。

有没有优雅的方法来解决这个问题？我想要这个干净的界面：

```
var foo = new Person("Foo");
console.log(foo.getName());

var bar = new VipPerson("Bar", 100);
console.log(bar.getName()); //error
console.log(bar.getVipLevel()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T16:57:02.080

```
function VipPerson(name, vipLevel){
    Person.call(this, name);

    this.getVipLevel = function(){
        return vipLevel;
    };
};

VipPerson.prototype = Object.create(Person.prototype); 
```

看：

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/create/](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/create/)

但是，除非存在特定的安全问题，否则我会避免创建闭包只是为了制作“私有”变量。JavaScript 是一种基于 OOP 原型的动态语言，不应像具有私有成员的基于类的语言那样使用。

我建议你阅读这样的文章：[https ://developer.mozilla.org/en/Introduction_to_Object-Oriented_JavaScript](https://developer.mozilla.org/en/Introduction_to_Object-Oriented_JavaScript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T16:54:58.750

当您从构造函数内部设置原型时，它有点工作，但它并没有做您真正想要的。因为原型对象的设置是在您已经运行构造函数之前进行的，所以第一次`this`调用“VipPerson”构造函数中的第一个新创建的对象 ( ) 将不会正确“连接”。

但是，如果您*再次*调用构造函数，您会注意到原型在那里并且“.getName()”有效。

请注意，除非您希望所有“Person”对象共享相同的名称，否则它不会以任何方式工作。应该设置“Person”，以便“setName()”更新`this.name`而不是闭包中的变量。*所有*“VipPerson”实例只有一个“Person”实例——即实例化的原型对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T17:17:35.280

你试过这种方法吗？

```
function VipPerson(name, vipLevel){
    this.__proto__ = new Person(name);

    this.getVipLevel = function(){
        return vipLevel;
    };
}; 
```

# c# - 检索存储在列表中的信息 c# ASP.NET

> ID：11711042
> 
> 赞同：1
> 
> 时间：2012-07-29T16:48:45.557
> 
> 标签：c#, asp.net, list

我正在使用以下代码将来自网格视图行的人员信息存储在列表中：

```
public class PlayerInfo
{
    public string FirstName { get; set; }
    public string Email { get; set; }
    public string DaysLeft { get; set; }
}

protected void btn_Click(object sender, EventArgs e)
{
    List<PersonInfo> person_list = new List<PersonInfo>();

          foreach (GridViewRow row in my_gridview.Rows)
        {
            CheckBox cb = (CheckBox)(row.Cells[2].FindControl("CheckBox"));
            if (cb.Checked)
            {
                person_list.Add(new PlayerInfo() {FirstName=row.Cells[0].Text,Email=row.Cells[2].Text,DaysLeft=row.Cells[5].Text});
            }
            else
            {

            }
        }

etc etc..

} 
```

因此，如果我尝试输出 person_list[0] 这将不起作用，因为列表中的每个点都关联了三个项目，因此列表中的位置 0 包含名字、电子邮件和剩余天数。在 Visual Studio 中调试时，我可以看到这些项目正在正确存储。

我如何从这个列表中单独检索每个项目？例如，能够在循环中将值设置为变量，因此电子邮件地址将被分配给电子邮件变量，名字被分配给另一个等等？我只处理过普通数组，以前从未遇到过分层列表。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T16:57:06.750

像这样使用 for 迭代它

```
for(int i =0; i <person_list.Count; i++)
{
  string name =  person_list[i].FirstName;
  string email =  person_list[i].Email;
  string daysLeft =  person_list[i].DaysLeft;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T16:57:52.067

首先，您的列表变量是本地的，因此如果您想在类之外访问它，您需要在类级别声明它。

其次，当您在列表中添加`PersonInfo`对象时，您将`PersonInfo`退出列表。

就迭代而言，它可以通过任何循环来完成：

例子：

```
foreach(PersonInfo pInfo in person_list)
{
  // your code
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T17:00:01.543

有几种方法可以从列表中获取值。

您可以使用 for 或 foreach 进行迭代：

```
for (var i=0; i<person_list.Count; i++) {
    var email=person_list[i].Email;
}

foreach(var person in person_list) {
    var email=person.Email;
} 
```

或者您可以使用他们的索引访问各个成员：

```
var person=person_list[1];
if (person!=null) {
    var email=person.Email;
} 
```

或者您可以使用 Linq 查询列表：

```
var person=person_list.FirstOrDefault(p=>p.FirstName=="Jack");
if (person!=null) {
    var email=person.Email; 
} 
```

此外，要访问 GridViewRow 中的项目，您可以使用 GridViewRow.DataItem

```
foreach (GridViewRow row in my_gridview.Rows)
{
    var cb = (CheckBox)(row.Cells[2].FindControl("CheckBox"));
    if (cb.Checked)
    {
        person_list.Add(row.DataItem as PlayerInfo);
    }
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T17:01:50.037

使用`Lists`with的一种漂亮方法`GridViews`是设置`DataPropertyNames`自定义列表中的属性名称并将其用作数据源，即

```
my_gridview.DataSource = person_list; 
```

不要忘记设置`my_gridview.AutoGenerateColumns = false;`，除非您希望根据列表中的属性自动生成列。

# python - Python搜索多个值并显示边界

> ID：11711045
> 
> 赞同：0
> 
> 时间：2012-07-29T16:49:11.857
> 
> 标签：python, regex

我试图允许用户这样做：

让我们说最初的文字说：

```
"hello world hello earth" 
```

当用户搜索“hello”时，它应该显示：

```
|hello| world |hello| earth 
```

这就是我所拥有的：

```
m = re.compile(pattern)
i =0
match = False
while i < len(self.fcontent):
    content = " ".join(self.fcontent[i])
    i = i + 1;
    for find in m.finditer(content):    
        print i,"\t"+content[:find.start()]+"|"+content[find.start():find.end()]+"|"+content[find.end():]
        match = True
        pr = raw_input( "(n)ext, (p)revious, (q)uit or (r)estart? ")
        if (pr == 'q'):
            break
        elif (pr == 'p'):
            i = i -  2
        elif (pr == 'r'):
            i = 0
if match is False:
    print "No matches in the file!" 
```

在哪里 ：

```
pattern = user specified pattern
fcontent = contents of a file read in and stored as array of words and lines e.g:
[['line','1'],['line','2','here'],['line','3']] 
```

但是它打印

```
|hello| world hello earth
hello world |hello| earth 
```

如何合并两条线以显示为一条线？谢谢

**编辑**：

这是一个更大的搜索功能的一部分，其中模式..在这种情况下，单词“hello”是从用户传递的，所以我必须使用正则表达式搜索/匹配/查找器来查找模式。遗憾的是，替换和其他方法不起作用，因为用户可以选择搜索“[0-9]$”，这意味着将结束数字放在 | 之间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T16:55:10.273

如果您只是这样做，请使用`str.replace`.

```
print self.content.replace(m.find, "|%s|" % m.find) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T17:04:01.713

您可以按如下方式使用正则表达式：

```
import re
src = "hello world hello earth"
dst = re.sub('hello', '|hello|', src)
print dst 
```

或使用字符串替换：

```
dst = src.replace('hello', '|hello|') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T17:05:45.170

好的，回到原始解决方案，因为 OP 确认该单词将独立存在（即不是另一个单词的子字符串）。

```
target = 'hello'
line = 'hello world hello earth'
rep_target = '|{}|'.format(target)

line = line.replace(target, rep_target) 
```

产量：

```
|hello| world |hello| earth 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T17:29:40.810

正如根据您的示例所指出的那样，使用 str.replace 是最简单的。如果需要更复杂的标准，那么您可以调整以下...

```
import re

def highlight(string, words, boundary='|'):
    if isinstance(words, basestring):
        words = [words]
    rs = '({})'.format(boundary.join(sorted(map(re.escape, words), key=len, reverse=True)))
    return re.sub(rs, lambda L: '{0}{1}{0}'.format(boundary, L.group(1)), string) 
```

# ruby - RSpec：模拟、存根和验证

> ID：11711048
> 
> 赞同：2
> 
> 时间：2012-07-29T16:49:36.557
> 
> 标签：ruby, testing, rspec, tdd, rspec-mocks

我正在为[Cinch](https://github.com/cinchrb/cinch/)（IRC 机器人）编写一个插件，并尝试为它编写一些 RSpec 测试。

但是，我正在尝试掌握 RSpec，并模拟此插件的外部依赖项。我现在想测试两个不同的东西——它向人们问好，它跟踪它向谁问好。

所以我有一个方法，`say_hello`，它需要一个`Cinch::Message`. 模拟这个特定类的最简单方法是什么？我习惯了 Mockito 和 Java，所以我习惯于模拟一个特定的类。

我怎样才能模拟`Cinch::Message`？在我的第一个测试中，我想断言该`reply`方法是对该消息调用的。在下一个中，我只希望它像会一样响应`Cinch::Message`，因为我只关心类的跟踪，而不是与消息的交互。

我刚刚开始使用 RSpec，所以也许我错过了一些基本的东西。我应该使用模拟吗？存根？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T18:02:48.407

首先，文档将是一个不错的起点，请参阅：[https ://www.relishapp.com/rspec/rspec-mocks/v/2-11/docs/message-expectations](https://www.relishapp.com/rspec/rspec-mocks/v/2-11/docs/message-expectations)

..这就是您的测试的外观：

```
it 'should call #reply on the message'
  message = double('cinch message')
  message.should_receive(:reply)
  object_under_test.say_hello(message)
end 
```

# haskell - 如何使用 Snap 突出显示活动链接？

> ID：11711051
> 
> 赞同：4
> 
> 时间：2012-07-29T16:49:46.797
> 
> 标签：haskell, haskell-snap-framework

[有人可以举个例子，用Snap](http://snapframework.com/)突出显示网站菜单上的“活动”链接吗？或者至少告诉我你会怎么做——因为我不知道。

在其他网络框架中，我通常设置一个上下文变量，称为`active`活动页面应该是什么，然后我的 html 简单地检查它：

```
<ul> 
   {% ifequal active "home" %}
   <li class="active">
   {% else %}
   <li>
   {% endifqual %}
   <a href="/">Home</a>
   </li>

   {% ifequal active "about" %}
   <li class="active">
   {% else %}
   <li>
   {% endifequal %}
   <a href="/about">About Us</a>
   </li>

 </ul> 
```

抢劫中有拼接，但我不确定您将如何使用它们来确定当前 url 是什么或设置上下文变量。

## 我的解决方案

感谢@mightybyte 和@Adam Bergmark，我已经解决了以下问题：

哈斯克尔代码：

```
menuenuEntrySplice :: MonadSnap m => HeistT m Template
menuEntrySplice = do
               requestPath <- lift $ withRequest (return . rqURI)
               node <- getParamNode
               let setActive n = if getAttribute "href" node == Just (decodeUtf8 requestPath)
                                    then setAttribute "class" "active" n
                                    else n

               let aNode = Element "a" [("href", fromMaybe "/" $ getAttribute "href" node)] $ [TextNode (nodeText node)]
               let liNode = setActive $ Element "li" [] [aNode]

               return [liNode]

app :: SnapletInit App App
app = makeSnaplet "app" "An snaplet example application." Nothing $ do
    ....
    addSplices [ ("menuEntry", liftHeist menuEntrySplice) ]
    return $ App h s a 
```

现在它在 HTML 中使用：

```
<ul class="nav">
      <menuEntry href="/">Home</menuEntry>
          <menuEntry href="/contact">Contact</menuEntry>
</ul> 
```

产生：

```
<ul class="nav">
     <li class="active"> <a href="/">Home</a> </li>
     <li> <a href="/contact">Contact</a> </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T15:35:57.640

在 snapframework.com 站点中，我们使用 javascript 来完成。在[site.js](http://snapframework.com/media/js/site.js)的末尾，您会发现这段代码将适当的类添加到适当的链接。

```
if ($.url.segment(0)) {
  $('.nav li.'+$.url.segment(0)).addClass('active');
} else {
  $('.nav .home').addClass('active');
} 
```

如果您想使用 Heist 执行此操作，那么您需要使用与上面的模板使用的范例稍有不同的范例。Heist 的全部意义（借助 Haskell 强大的静态类型系统）是在视图和业务逻辑之间提供尽可能强的分离，因此您不能直接在模板中使用循环或条件等 Haskell 构造。答案是创建完全符合您要求的新标签（通过拼接实现）。在您的模板中，您将像这样使用它：

```
<ul>
  <menuLink href="/">Home</menuLink>
  <menuLink href="/about">About Us</menuLink>
</ul> 
```

首先，请注意这是多么清洁。在您的方法中，您必须为每个链接重复相同的代码。在这里，我们能够保持模板 DRY 并且它读起来非常好。

要实现 menuLink 标记，您需要一个如下所示的拼接拼接：

```
import Control.Monad.Trans.Class (lift) -- transformers 
import Data.Text.Encoding (decodeUtf8)
import Text.XmlHtml (getAttribute, setAttribute, elementTag)

menuLinkSplice :: MonadSnap m => HeistT m Template
menuLinkSplice = do
    requestPath <- lift $ withRequest (return . rqURI)
    node <- getParamNode
    let addActive n = if getAttribute "href" n == Just (decodeUtf8 requestPath)
                           then setAttribute "class" "active" n
                           else n
    return [addActive (node { elementTag = "a" })] 
```

然后，要将它们放在一起，您需要将该拼接绑定到 menuLink 标记。在 Snap 应用程序中，您将使用：

```
addSplices [ ("menuLink", liftHeist menuLinkSplice) ] 
```

您还可能会发现我的博客文章“抢劫”[中的循环和控制流](http://softwaresimply.blogspot.com/2011/04/looping-and-control-flow-in-heist.html)很有帮助（以及我的其他一些带有“抢劫”标签的文章）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T02:41:10.197

据我所知，Heist 甚至要求您将这种逻辑放入 Haskell 而不是 Heist。例如，请参阅[Text.Templating.Heist 文档中的](http://hackage.haskell.org/packages/archive/heist/0.8.1.1/doc/html/Text-Templating-Heist.html)此示例：

```
link :: Text -> Text -> X.Node
link target text = X.Element "a" [("href", target)] [X.TextNode text]

loginLink :: X.Node
loginLink = link "/login" "Login"

logoutLink :: Text -> X.Node
logoutLink user = link "/logout" (T.append "Logout " user)

loginLogoutSplice :: Splice MyAppMonad
loginLogoutSplice = do
    user <- lift getUser
    return [maybe loginLink logoutLink user] 
```

这里不是将 Bool 传递给模板，并让模板执行 if/then 逻辑，而是在 Haskell 级别执行所有逻辑。这是我能给出的最好答案。我不熟悉抢劫；我知道您可以提供拼接参数，但我不清楚如何完成您的特定任务。

# android - RoboGuice 导致大量 GC_FOR_MALLOC

> ID：11711052
> 
> 赞同：0
> 
> 时间：2012-07-29T16:50:26.423
> 
> 标签：android, roboguice

我已经开始将 roboguice 用于其中一个应用程序。为了进行比较，我从带有 RoboActivity 和三个 RoboAsyncTask 的初始屏幕开始。当我使用普通活动和普通线程开发它并传递给它的上下文和处理程序时，在整个启动活动执行期间，甚至没有一次 GC 被调用。但是使用 RoboActivity 和 @Context 、3 个 POJO 依赖注入和三个 RoboAsync 任务，GC_FOR_MALLOC 被调用了 5 次。

Roboguice 代码

```
@ContentView(R.layout.activity_splash)
public final class Splash extends RoboActivity {

/**
 * Constant TAG used in debugging
 */
public static final String TAG = "###Splash###";

/**
 * To initialize singleton instance
 */
@Inject
private PreferenceManager mPreferenceManager;

@Inject
private DeviceInfo mDeviceInfo;

@Inject
private Handler mHandler;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
... 
```

在此之下，我在 RoboAsyncTask 中有简单的 Web api 调用。

我是不是做错了什么……或者使用 RoboGuice 会导致不必要的对象创建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T12:00:03.570

一些研究表明，注释不是很好用。而且我个人觉得 roboguice 正在添加很多后端代码，我们可以手动完成这些代码，但费用并不高。所以从我的构建中删除了 roboguice 并且行为比以前好得多。

# codeigniter - Codeigniter 搞乱了会话

> ID：11711053
> 
> 赞同：0
> 
> 时间：2012-07-29T16:50:26.707
> 
> 标签：codeigniter, session

我在 Codeigniter 上编写了一个简单的身份验证过程，但是有一个问题。

出于某种原因，当用户浏览站点时，会话会被混淆并冒充另一个随机用户。

我只是简单地做：

```
$this->session->set_userdata('logged_in', TRUE);  
$this->session->set_userdata('id', $account->id); 
```

我通过 `$logged_id = $this->session->userdata('id');`

我将会话存储在数据库的 ci_sessions 表上
，并且配置文件包含默认值：

```
$config['sess_cookie_name']     = 'ci_session';  
$config['sess_expiration']      = 7200;  
$config['sess_expire_on_close'] = FALSE;  
$config['sess_encrypt_cookie']  = TRUE;  
$config['sess_use_database']    = TRUE;  
$config['sess_table_name']      = 'ci_sessions';  
$config['sess_match_ip']        = FALSE;  
$config['sess_match_useragent'] = TRUE;  
$config['sess_time_to_update']  = 300; 
```

什么可能会弄乱会话并从它们那里获得不同的 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T14:22:23.473

迟到的答案，但它可能对某人有用。我曾经遇到过这个问题，这是因为 User-Agent 的列太小（然后，字符串被截断，CodeIgniter 正在重新创建会话 id，认为客户端不同）。确保使用 CI 中提到的模式表。

```
如果不存在 `ci_sessions` 则创建表（
    session_id varchar(40) DEFAULT '0' NOT NULL,
    ip_address varchar(45) DEFAULT '0' NOT NULL,
    user_agent varchar(120) 非空，
    last_activity int(10) 无符号 DEFAULT 0 NOT NULL，
    user_data 文本不为空，
    主键（session_id），
    KEY `last_activity_idx` (`last_activity`)
);

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T19:21:06.893

听起来真的很奇怪。您的代码和配置似乎没问题。请检查用户登录时是否正确销毁/初始化会话：

```
$this->CI->session->sess_destroy();
$this->CI->session->sess_create(); 
```

然后查看您的 MySQL ci_sessions 表并尝试调试您的问题，显示当前用户的“session_id”.. 正确吗？如果您不解决，请发布更多您正在使用的代码。

# ios - iOS 和 ARC 管理

> ID：11711057
> 
> 赞同：-3
> 
> 时间：2012-07-29T16:50:44.907
> 
> 标签：ios, objective-c, memory-management, reference-counting

> **可能重复：**
> [发布方法已弃用](https://stackoverflow.com/questions/9061162/release-method-deprecated)

我有这个代码

```
NSURLRequest *request = [[NSURLRequest alloc] initWithURL:yourURL]; 
```

如果我的项目使用 ARC，我是否需要发布它？我应该寻找什么来防止不必要的泄漏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T16:52:23.990

每天会问多少次？不，你不必释放它。该对象由 ARC 管理。有关更多信息，[请阅读此文档链接](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T21:19:35.957

release 方法不再与 ARC 相关。如果您想了解有关 ARC 的更多信息，请查看[这篇方便的文章。](http://www.mikeash.com/pyblog/friday-qa-2011-09-30-automatic-reference-counting.html)

如果您仍然担心泄漏（[它们仍然*可能*发生](https://agilewarrior.wordpress.com/2012/04/09/memory-leaks-with-arc/)），您可以单击并按住 XCode 窗口左上角的“运行”箭头，选择“配置文件”并运行。这将打开 Instruments 应用程序。从那里，您可以选择“泄漏”模块，该模块将在程序运行时向您显示它在您的程序中发现的任何泄漏。

我希望这有帮助。

# python - 如何在 apache 服务器的 cgi-bin 中运行 python 脚本？

> ID：11711060
> 
> 赞同：2
> 
> 时间：2012-07-29T16:51:18.973
> 
> 标签：python, apache

我在 apache2 的 cgi-bin 中放了一个简单的 python 脚本，并尝试使用浏览器执行它，如下所示，

“http://www.example.com/cgi-bin/test.py”

但它给出了 500 内部服务器错误。

以下是apache2中的error.log。

[Sun Jul 29 22:07:51 2012] [error] (8)Exec 格式错误：'/usr/lib/cgi-bin/test.py' 的执行失败 [Sun Jul 29 22:07:51 2012] [错误] [客户端 ::1] 脚本头过早结束：test.py [Sun Jul 29 22:07:51 2012] [错误] [客户端 ::1] 文件不存在：/var/www/favicon.ico

谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T17:06:38.493

看起来您没有正确发送标头。

试试这个最简单的示例脚本是否运行：

```
print('Content-Type: text/html; charset=utf-8\n')
print("Hello, World!") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T22:57:32.257

BlaXpirit 的答案应该可以解决您的 500 服务器内部错误问题。

重要的是要注意第一个打印语句末尾的“\n”。你也可以写成

print("内容类型: text/html; charset=utf-8")

打印（）

我很惊讶地发现，即使你的 Python 程序只做服务器端工作——根本不响应浏览器，写出这些头文件也是必要的。

# ruby-on-rails - Ruby on Rails 作为便携式应用程序

> ID：11711067
> 
> 赞同：4
> 
> 时间：2012-07-29T16:52:15.017
> 
> 标签：ruby-on-rails, ruby, portability

有没有办法将 RoR 应用程序作为“portbale 应用程序”运行？

例如，您可以将一个应用程序（包括 ruby​​ on rails 堆栈、Web 服务器等）放在一根棍子上，然后在 Windows 机器上运行它吗？不安装？

有一个名为 Instant Rails 的项目或多或少地提供了这个，但它没有得到维护。(http://rubyforge.org/projects/instantrails/)

此外，还有来自 Bitnami (http://bitnami.org/stack/rubystack#nativeInstaller) 的 RubyStack，但它需要安装（我可以安装，但不能安装）。

所以，问题是，Ruby on Rails，包括一个特定的应用程序，是否可以在任何计算机上运行（好吧，让我们从 Win 开始）从棒、CD 或 DVD 开始，而无需先安装任何东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:41:07.557

我认为这就是你要找的：

[http://www.erikveen.dds.nl/distributingrubyapplications/rails.html](http://www.erikveen.dds.nl/distributingrubyapplications/rails.html)

本教程将引导您完成创建一个自包含 Windows 应用程序的整个过程，该应用程序将您的 Rails 应用程序捆绑在其中。

# html - 这个差距/利润来自哪里？

> ID：11711070
> 
> 赞同：2
> 
> 时间：2012-07-29T16:52:26.953
> 
> 标签：html, css

使用这个 CSS 和 HTML，我在`<span>`-tag 上方有一个空白，我不知道为什么会这样：

### CSS

```
<style>

    header > aside {
        float:                  left;
        font-size:              0;
        line-height:            0;
        white-space:            nowrap;
        border:                 1px solid green;

    }

    header > aside > span {
        display:                inline-block;
        height:                 19px;
        margin:                 0px 10px 0px 0px;
        padding:                5px 0px 0px 0px;
        opacity:                0.75;
        font-size:              9px;
        line-height:            9px;
        text-transform:         uppercase;
        color:                  #0fa1b4;
        border:                 1px solid red;
    }

    a.share {
        display:                inline-block;
        width:                  24px;
        height:                 24px;
        margin:                 -1px 0px 0px -1px;
        padding:                0;
        opacity:                0.45;
        background:             blue;
        font-size:              0;
        line-height:            0;
    }

</style> 
```

### HTML

```
<header>
    <aside>
        <span>Follow</span>
        <a class="share facebook" href=""></a>
        <a class="share soundcloud" href=""></a>
    </aside>
</header> 
```

### 在行动

[http://jsfiddle.net/insertusernamehere/ZAVJJ/](http://jsfiddle.net/insertusernamehere/ZAVJJ/)

我可以使用浮点数来解决它，但不知何故我想不用它来解决它。我想这很简单，我只是忽略了一些东西。但是只有几个小时的睡眠，我无法弄清楚。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T16:59:45.960

`vertical-align: top;`在跨度上就可以了。见：http: [//jsfiddle.net/ZAVJJ/3/](http://jsfiddle.net/ZAVJJ/3/)

# objective-c - 带有 ObjC 的奇怪（？）Xcode 错误消息

> ID：11711073
> 
> 赞同：0
> 
> 时间：2012-07-29T16:52:58.787
> 
> 标签：objective-c, xcode, message

有谁知道这条消息是什么意思（或者什么时候出现）？

```
CFURLCopyResourcePropertyForKey failed because it was passed this URL which has no scheme 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T16:55:55.117

URL 中的方案是出现在第一个冒号之前的内容。例如，此网页的 URL 的方案是`http`. 您可能将错误的 URL 传递给函数。设置断点以查看您传入的内容或记录 URL。

# php - 绕过 PHP CURL 2GB 下载限制

> ID：11711074
> 
> 赞同：0
> 
> 时间：2012-07-29T16:53:10.763
> 
> 标签：php, linux, curl, centos

我正在尝试使用 php-curl 下载一个 7GB 的文件，但它似乎只会下载前 2GB。

似乎没有任何文档或谈论这个。

有人有想法么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T16:59:25.040

以下是有关该主题的两个有用链接：

[使用 curl 下载大文件](https://stackoverflow.com/questions/6409462/downloading-a-large-file-using-curl)

[如何使用 cURL 部分下载远程文件？](https://stackoverflow.com/questions/2032924/how-to-partially-download-a-remote-file-with-curl)

基本上你可能会遇到两个问题：

*   您首先要读入内存，因为这样会耗尽 PHP 的内存分配
*   您需要分块下载文件以克服 HTTP 协议中的某些限制。

还有文件系统限制，还有什么不检查@ajreal 提到的文件系统类型（即FAT32 有4GB 的限制，99% 的机会你不使用FAT，但它仍然是一个例子）。

正如 OP 发现它与数据库有关：

> 原来是数据库问题。文件大小存储在 mysql 数据库中，大小以字节为单位，“int”列的最大大小为 2147483648。将列类型更改为“bigint”解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T17:06:19.407

假设您的文件系统可以处理大于 2GB 的文件，您可以尝试使用`copy`

```
copy("http:://example.org/your_file","/tmp/your_file"); 
```

还要确保设置适当的时间限制（使用`set_time_limit(...)`）。

# javascript - 如何向 p:dataTable globalFilter 添加“enter”选项

> ID：11711075
> 
> 赞同：0
> 
> 时间：2012-07-29T16:53:10.790
> 
> 标签：javascript, jsf, jsf-2, primefaces

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T19:11:06.000

您只需要聆听并回复*Enter* key code，

所以更换

```
<p:inputText id="globalFilter" onkeyup="carsTable.filter()" style="width:150px" /> 
```

和

```
<p:inputText id="globalFilter" onkeypress="if (event.keyCode == 13) {carsTable.filter()}" style="width:150px" /> 
```

`event.keyCode == 13`---> 输入被按下

# google-app-engine - How to structure movies database and user choices?

> ID：11711077
> 
> 赞同：3
> 
> 时间：2012-07-29T16:53:12.910
> 
> 标签：google-app-engine, google-cloud-datastore, app-engine-ndb

I would like to create movies database, where user will be able to mark movies he/she watched and liked:

```
class Movies(ndb.Model):
    watched = ndb.UserProperty()
    liked = ndb.UserProperty() 
```

Will that work? I use Google accounts. How should I choose later all movies user liked?

* * *

**Upd**. I've followed [**systempuntoout** approach](https://stackoverflow.com/a/11724844/604388) and use the following code to save user choices:

```
user = users.get_current_user()
if user:
    userschoices = models.UsersChoices(
        movie=ndb.Key(models.Movies, movie_id), # TODO: what if movie_id is wrong?
        watched=True,
        user_id=user.user_id()
        )
    try:
        userschoices.put()
        self.response.out.write('1')
    except:
        self.response.out.write('0') 
```

But if user makes his choice several times, then several records are added to the datastore... Wouldn't be it better just to save user id and movie id as keyname?

```
userschoices = models.UsersChoices.get_by_id(user.user_id() + '-' + movie_id)
if userschoices is None:
    userschoices = models.UsersChoices(id=user.user_id() + '-' + movie_id)
userschoices.movie = ndb.Key(models.Movies, movie_id) # TODO: what if movie_id is wrong?
userschoices.user_id = user.user_id()
if option == 'liked':
    userschoices.liked = True
elif option == 'watched':
    userschoices.watched = True 
```

However, with such approach if I don't pass `liked`, then it overwrites its value with `None` (the same with `watched`, if not passed, `None` is used).

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T15:43:18.743

我会使用两种不同的模型，一种存储所有`Movies`详细信息，另一种存储`UserChoices`：

```
class Movies(ndb.Model):
    title = ndb.StringProperty(required=True)
    director = ndb.StringProperty()
    whatever = ndb.StringProperty()

class UsersChoices(ndb.Model):
    movie = ndb.KeyProperty(kind=Movies, required=True)
    watched = ndb.BooleanProperty(required=True)
    liked = ndb.BooleanProperty(required=True)
    user_id = ndb.StringProperty(required=True)

    @classmethod
    def get_liked_movies(cls, user_id):
        return cls.query(cls.user_id == user_id, cls.liked == true).fetch(10)

    @classmethod
    def get_watched_movies(cls, user_id):
        return cls.query(cls.user_id == user_id, cls.watched == true).fetch(10)

    @classmethod
    def get_by(cls, user_id, movie_key):
        return cls.query(cls.user_id == user_id, cls.movie == movie_key).get() 
```

如果您需要存储有关用户的信息，您应该创建您的模型，由[用户 API](https://developers.google.com/appengine/docs/python/users/userclass#User_user_id)`UserInfo`键入，并包含您的应用程序所需的所有详细信息属性。`user_id`

```
class UserInfo(ndb.Model):
        #Keyed by user_id 
        nickname = ndb.StringProperty()
        email = ndb.StringProperty() 
```

要创建一个新的`UserInfo`，你可以这样做：

```
from google.appengine.api import users

user = users.get_current_user()
userinfo = UserInfo(
        id = user.user_id(),
        nickname = user.keyname(),
        email = user.email()
      )
userinfo.put() 
```

然后，当用户登录时，使用他/她`user_id`来检索观看/喜欢的电影。

```
from google.appengine.api import users

user = users.get_current_user()
userinfo = ndb.Key(UserInfo, user.user_id()).get()
watched_movies = UsersChoices.get_watched_movies(userinfo.key.id())
liked_movies = UsersChoices.get_liked_movies(userinfo.key.id()) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T16:20:19.733

看来您正在尝试建模多对多关系。 [有几种方法可以对这种关系进行建模](https://developers.google.com/appengine/articles/modeling)（参见多对多部分）。另见[尼克的博客](http://blog.notdot.net/2010/10/Modeling-relationships-in-App-Engine)。（不幸的是，这些引用都不是为 NDB 编写的，因此，例如，[您不能使用`collection_name`，即反向引用](https://stackoverflow.com/questions/9917569/google-app-engine-ndb-equivalent-for-modelname-set-backreference-property)。但它们仍然有助于向您展示如何将数据分解为不同的模型。）

这是您可以使用“连接表”/“关系模型”的一种方法：

```
class Movie(ndb.Model):
    title = ndb.StringProperty(required=True)

class LikedMovie(ndb.Model):
    movie = ndb.KeyProperty(kind=Movie, required=True)
    user  = ndb.StringProperty(required=True)  # user.user_id()

class WatchedMovie(ndb.Model):
    movie = ndb.KeyProperty(kind=Movie, required=True)
    user  = ndb.StringProperty(required=True)  # user.user_id()

...
    movies_user_likes = LikedMovie.query(LikedMovie.user == user.user_id()).fetch() 
```

根据您的应用程序将支持多少用户以及数据库更新的频率，使用重复属性（即用户列表）而不是连接表可能更有效：

```
class Movie(ndb.Model):
    title = ndb.StringProperty(required=True)
    users_who_watched = ndb.StringProperty(repeated=True)  # list of user.user_id()s
    users_who_liked   = ndb.StringProperty(repeated=True)  # list of user.user_id()s

...
    movies_user_likes = Movie.query(Movie.users_who_liked == user.user_id()).fetch(projection=[Movie.title]) 
```

请注意，我在上面使用了[投影查询](https://developers.google.com/appengine/docs/python/ndb/queries#projection)，因此 users_who_watched 列表不会与查询结果一起返回。您可能不需要这些，这应该会显着加快获取速度。

例如，如果您预计观看或喜欢某部电影的用户少于 1,000 人，那么列表方法可能会更好。

如需更高级的技术，请参阅[在 App Engine 上构建可扩展的复杂应用程序](http://code.google.com/events/io/2009/sessions/BuildingScalableComplexApps.html)，其中 Brett 展示了如何使用父键将重复/列表属性移动到单独的模型中。

# java - 如何减少 Java 应用服务器中的内存消耗

> ID：11711089
> 
> 赞同：-1
> 
> 时间：2012-07-29T16:54:15.390
> 
> 标签：java, jakarta-ee

我有一个处理来自网络客户端的数据的 Java 应用程序服务器。我面临的问题是 Java 应用程序的内存消耗。有哪些有效的技术可以减少 Java 应用程序的内存消耗。你能分享一些经验吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-29T17:04:54.200

使用分析器，确定内存消耗的位置，并优化应该优化的内容。

它可以是设置（池中的线程数等）、算法、数据结构、数据库查询。如果不知道应用程序的内部，就不可能知道。

即便如此，猜测也很有可能给出错误的结果。测量和分析是最好的方法。

# c# - how would you built intellisense for c#

> ID：11711090
> 
> 赞同：1
> 
> 时间：2012-07-29T16:54:23.283
> 
> 标签：c#, intellisense, code-completion

I'd like to build simple code completion for c# for a simple tool. However this seems to be a bit of a challenge. Suppose all that would suffice are suggestions after dot delimiter and method parameters/overloads. In both cases it's necessary to determine the type of a variable which would require parsing and probably even more work (like checking all available members in the inheritance chain). So generally how should this task be approached? Perhaps there are some useful libraries out there (Roslyn maybe)?

**EDIT** [https://stackoverflow.com/a/9556530/579026](https://stackoverflow.com/a/9556530/579026)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T16:58:43.163

> Perhaps there are some useful libraries out there (Roslyn maybe)?

ActiproSoftware has an extensible editor control with intellisense support for C# and other languages. You can also define your own language. The editor works on WPF and Silverlight.

(I don't work for them).

[http://www.actiprosoftware.com/products/controls/wpf/syntaxeditor](http://www.actiprosoftware.com/products/controls/wpf/syntaxeditor)

# android - Intent中的大图像额外，导致Android中的黑屏

> ID：11711091
> 
> 赞同：0
> 
> 时间：2012-07-29T16:54:24.410
> 
> 标签：android, android-intent, android-asynctask, android-imageview

我有这个代码可以从画廊或相机中挑选图像：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        switch (requestCode) {
        case SELECT_PICTURE_ACTIVITY_REQUEST_CODE:
            if (resultCode == RESULT_OK) {
                Uri selectedImage = data.getData();
                String[] filePathColumn = { MediaStore.Images.Media.DATA,
                        MediaStore.Images.Media.DISPLAY_NAME };
                Cursor cursor = getContentResolver().query(selectedImage,
                        filePathColumn, null, null, null);
                if (cursor.moveToFirst()) {
                    int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
                    String filePath = cursor.getString(columnIndex);
                    ext = filePath
                            .substring(filePath.lastIndexOf(".") + 1);
                    photod = BitmapFactory.decodeFile(filePath);

                    new AsyncTaskOne().execute(new String[] {});
    (fileNameIndex);

                }
            }
            break;

        case SELECT_CAMERA_ACTIVITY_REQUEST_CODE:
            if (requestCode == CAMERA_REQUEST) {
                photod = (Bitmap) data.getExtras().get("data");
                new AsyncTaskOne().execute(new String[] {});
            }
        }
    } 
```

当我按下确认按钮时，我调用了这个监听器

```
OnClickListener confirm = new OnClickListener() {
        public void onClick(View v) {
            Intent i = new Intent("com.striget.eu.UpdatePhoto");
            i.putExtra(PropertiesUpdatedPhoto.EXTRA_PHOTO, codedPhoto);
            i.putExtra(PropertiesUpdatedPhoto.EXTRA_EXT, ext);
            startActivity(i);
        }
    }; 
```

（其中*codedPhoto*是通过另一种方法以 base64 编码的图像）在另一个活动中发送图像及其扩展

**小图像一切正常，**但如果我选择中等大小的图像或大照片（如果不是很大），应用程序会冻结，屏幕变黑，如果我等待几分钟返回当前活动而不显示任何错误在堆栈中并且调用的意图*PropertiesUpdatedPhoto*没有启动。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T17:13:58.103

这个问题在[这里](https://groups.google.com/forum/?fromgroups#!topic/android-developers/kwmTGz8GAoQ)讨论，我们应该尽量减少意图的额外内容。

我的建议是传递图像而不是传递图像，也许传递图像 URI 或路径会是更好的解决方案。然后只在该活动中加载图像。

例子 ：

```
OnClickListener confirm = new OnClickListener() {
    public void onClick(View v) {
        Intent i = new Intent("com.striget.eu.UpdatePhoto");
        i.setData(PropertiesUpdatedPhoto.EXTRA_PHOTO, # Image URI Here # );
        // Or i.putExtra(PropertiesUpdatePhoto.EXTRA_PHOTO, # Image Path Here #);
        i.putExtra(PropertiesUpdatedPhoto.EXTRA_EXT, ext);
        startActivity(i);
    }
}; 
```

# c++ - 单例类的私有成员

> ID：11711093
> 
> 赞同：-1
> 
> 时间：2012-07-29T16:54:41.167
> 
> 标签：c++, singleton, initialization, member, default-constructor

我有一个单身班级，我需要一个私人成员。我希望该成员为空，直到我使用我的 setter 方法设置正确的数据。

```
class PlaybackHelper{
private:
    PlaybackHelper();
    PlaybackHelper(PlaybackHelper const&);
    void operator=(PlaybackHelper const&);

    playback_type type;

    Note note;
public:
    void setPlaybackType(playback_type aType);
    static PlaybackHelper &getInstance();

}; 
```

Xcode 在我的实现文件（我正在实现我的私有构造函数）中给我一个错误，说我应该初始化我的成员：

```
PlaybackHelper::PlaybackHelper(){

} 
```

`error: Semantic Issue: Constructor for 'PlaybackHelper' must explicitly initialize the member 'note' which does not have a default constructor`

我不明白为什么我不能这样做（特别是因为它没有给我任何`playback_type type;`以相同方式工作的（枚举）成员的错误）我可以做些什么来让我的 Note 成员为空直到我我准备好给它赋值了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T16:57:02.847

错误消息很清楚 - 没有默认构造函数`Note`。要么创建一个，要么`Note`在初始化列表中使用现有的构造函数进行初始化。

> 我希望该成员为空，直到我使用我的 setter 方法设置正确的数据。

你不能。创建对象时两者都`note`存在。`playback_type`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T17:03:37.020

`playback_type`是一个普通的旧数据，因此缺少初始化`type`只会使其未初始化；但是，`class Note`的非默认构造函数是定义的，因此如果你没有定义它，它的默认构造函数不会自动生成。要解决它，您可以

1.  使用您定义的（其中一个）非默认构造函数的参数对其进行初始化。

    `PlaybackHelper::PlaybackHelper() : note(/*...*/) { }`

2.  定义一个默认构造函数`class Note`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T16:58:06.800

由于`Note`没有默认构造函数（即无参数构造函数），因此必须在成员初始化列表中将其初始化为：

```
PlaybackHelper::PlaybackHelper() : note(/*..args...*/) 
{                              //^^^^^^^^^^^^^^^^^^^^member initialization

} 
```

根据构造函数`note`的要求传递适当的参数。`Note`对于井的其​​他构造函数，您必须这样做`PlaybackHelper`。

# css - CSS Rounding Works in Safari but not Chrome

> ID：11711095
> 
> 赞同：4
> 
> 时间：2012-07-29T16:54:50.447
> 
> 标签：css, rounded-corners

I'm having an issue with some CSS I'm working on. The expected content is to be a containing box with four rounded corners that everything falls into. It works in Safari on the Mac, but not in Chrome or in iOS. In those browsers, the corners are squared for the .posttype and the image. I can't seem to figure out what is causing the issue. Any help will be great.

**CSS:**

```
.row { margin-bottom: 50px; }
.box { background: #eee; }
.shadow { -moz-box-shadow: 0px 3px 3px 0px #666; -webkit-box-shadow: 0px 3px 3px 0px #666; box-shadow: 0px 3px 3px 0px #666; }
.rounded { border-radius: 10px; -webkit-border-radius: 10px; -moz-border-radius: 10px; display: block; overflow: hidden; }
.posttype {
    float: right;
    position: relative;
    width: 150px;
    height: 150px;
    text-transform: uppercase;
    margin: -85px -85px 4px 4px;
    -moz-transform: rotate(45deg);
    -webkit-transform: rotate(45deg);
    -ms-transform: rotate(45deg);
    -o-transform: rotate(45deg);
    transform:rotate(45deg);
    overflow: hidden;
}
.posttype > p { 
    position: absolute; 
    bottom: 0; 
    width: 100%; 
    text-align: center;
    font-size: 24px;
    text-shadow: -1px -1px 1px #fff, 1px 1px 1px #000;
    color: #fff;
    opacity: 0.3;
}
.meta {
    width: 110%;
    margin: 5px -8px -8px -8px;
    padding: 5px;
    background-color: rgba(255,255,255,0.8);
    box-shadow: inset -5px 1px 5px #555;
    font-size: 10pt;
    color: #555;
}
.photo { position: relative; }
.photo > p { padding: 0 8px; }
.photo > .meta { padding-left: 16px; padding-bottom: 16px; }
.photo > img, .photo > a > img { width: 100%; margin-bottom: 10px; }
.photo > .posttype { position: absolute; top: 0; right: 0; margin: -75px -75px 4px 4px; } 
```

**HTML:**

```
<div class="row">
    <div class="span7 box rounded shadow photo">
        <img src="photo.jpg" alt="Alt" width="500">
        <div class="posttype"><p>photo</p></div>
        <p>This is a great picture.</p>
        <hr class="clear">
        <div class="meta">
            <ul>
                <li class="date"><i class="icon-time"></i> <a href="#" title="date">7/29/12</a></li>
                <li class="comments"><i class="icon-comment"></i> 3 Comments</li>
            </ul>
            <hr class="spacer">
            <ul class="tags">
                <li class="tags"><i class="icon-tags"></i></li>
                <li class="tag"><a href="#" title="Tag1">Tag1</a></li>
                <li class="tag"><a href="#" title="Tag2">Tag2</a></li>
            </ul>
        </div>
    </div>
</div> 
```

**Live demo: [Tinkerbin](http://tinkerbin.com/nvxjO0OL)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T17:09:06.687

圆形边框在图片后面，加个`padding-top`看这个[http://tinkerbin.com/fLyD5Cuf](http://tinkerbin.com/fLyD5Cuf)

# ios - Cross Compiling libogg for iOS

> ID：11711100
> 
> 赞同：3
> 
> 时间：2012-07-29T16:55:22.770
> 
> 标签：ios, arm, cross-compiling, osx-mountain-lion, i386

I've been trying to cross compile libogg for armv6, armv6 and i386 using the iOS 5.1 SDK in Mountain Lion. Libogg uses autoconf, and I've been having pretty similar issues with a few other libraries as well. I picked up a neat little cross-compiling script from [here](http://tinsuke.wordpress.com/2011/02/17/how-to-cross-compiling-libraries-for-ios-armv6armv7i386/). I had to update it a bit to find the location of the SDK's.

```
GLOBAL_OUTDIR="`pwd`/dependencies"
mkdir -p $GLOBAL_OUTDIR/include $GLOBAL_OUTDIR/lib
OUTDIR="./outdir"
OGG_LIB="`pwd`/libogg-1.3.0"

IOS_BASE_SDK="5.1"
IOS_DEPLOY_TGT="3.2"

setenv_all()
{
# Add internal libs
export CFLAGS="$CFLAGS -I$GLOBAL_OUTDIR/include -L$GLOBAL_OUTDIR/lib"

export CXX="$DEVROOT/usr/bin/llvm-g++-4.2"
    export CC="$DEVROOT/usr/bin/llvm-gcc-4.2"

export LD=$DEVROOT/usr/bin/ld
export AR=$DEVROOT/usr/bin/ar
export AS=$DEVROOT/usr/bin/as
export NM=$DEVROOT/usr/bin/nm
export RANLIB=$DEVROOT/usr/bin/ranlib
export LDFLAGS="-L$SDKROOT/usr/lib/"

export CPPFLAGS=$CFLAGS
export CXXFLAGS=$CFLAGS
}

setenv_arm6()
{
unset DEVROOT SDKROOT CFLAGS CC LD CPP CXX AR AS NM CXXCPP RANLIB LDFLAGS CPPFLAGS CXXFLAGS

export DEVROOT=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer
export SDKROOT=$DEVROOT/SDKs/iPhoneOS$IOS_BASE_SDK.sdk

export CFLAGS="-arch armv6 -pipe -no-cpp-precomp -isysroot $SDKROOT -miphoneos-version-min=$IOS_DEPLOY_TGT -I$SDKROOT/usr/include/"

setenv_all
}

setenv_arm7()
{
unset DEVROOT SDKROOT CFLAGS CC LD CPP CXX AR AS NM CXXCPP RANLIB LDFLAGS CPPFLAGS CXXFLAGS

export DEVROOT=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer
export SDKROOT=$DEVROOT/SDKs/iPhoneOS$IOS_BASE_SDK.sdk

export CFLAGS="-arch armv7 -pipe -no-cpp-precomp -isysroot $SDKROOT -miphoneos-version-min=$IOS_DEPLOY_TGT -I$SDKROOT/usr/include/"

setenv_all
}

setenv_i386()
{
unset DEVROOT SDKROOT CFLAGS CC LD CPP CXX AR AS NM CXXCPP RANLIB LDFLAGS CPPFLAGS CXXFLAGS

export DEVROOT=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer
export SDKROOT=$DEVROOT/SDKs/iPhoneSimulator$IOS_BASE_SDK.sdk

export CFLAGS="-arch i386 -pipe -no-cpp-precomp -isysroot $SDKROOT -miphoneos-version-min=$IOS_DEPLOY_TGT"

setenv_all
}

create_outdir_lipo()
{
for lib_i386 in `find $LOCAL_OUTDIR/i386 -name "lib*\.a"`; do
    lib_arm6=`echo $lib_i386 | sed "s/i386/arm6/g"`
    lib_arm7=`echo $lib_i386 | sed "s/i386/arm7/g"`
    lib=`echo $lib_i386 | sed "s/i386\///g"`
    lipo -arch armv6 $lib_arm6 -arch armv7 $lib_arm7 -arch i386 $lib_i386 -create -output $lib
done
}

merge_libfiles()
{
DIR=$1
LIBNAME=$2

cd $DIR
for i in `find . -name "lib*.a"`; do
    $AR -x $i
done
$AR -r $LIBNAME *.o
rm -rf *.o __*
cd -
} 
```

And then to build the ogg library.

```
## libogg
cd $OGG_LIB
rm -rf $OUTPUT_DIR
mkdir -p $OUTDIR/arm6 $OUTDIR/arm7 $OUTDIR/i386

## Build for armv6
make clean 2> /dev/null
make distclean 2> /dev/null
setenv_arm6
./configure --host=arm-apple-darwin6 --enable-shared=no
make
cp /src/.libs/libogg.a $OUTDIR/arm6

## Build for armv7

make clean 2> /dev/null
make distclean 2> /dev/null
setenv_arm7
./configure --host=arm-apple-darwin7 --enable-shared=no
make
cp src/.libs/libogg.a $OUTDIR/arm7

## Build for iPhone simulator
make clean 2> /dev/null
setenv_i386
./configure
make -j4
cp src/.libs/libogg.a $OUTDIR/i386

## Stich it altogether in a fat .a file.  
create_outdir_lipo 
```

Anyway, when building armv6 and armv7, configure finds the compiler's and sdk's okay , and the compiling stage goes off without a hitch. But they both fail to link. The armv7 build spits out the error.

```
ld: in section __TEXT,__text reloc 1: unknown relocation type 9 for architecture armv7 collect2: ld returned 1 exit status 
```

And when I test the output binary with lipo :

```
$ lipo -info libogg.a
lipo: archive with no architecture specification: libogg.a (can't determine architecture for it) 
```

What is strange is i386 seems to compile perfectly, (I've tried it in the simulator and all is okay).

Any suggestions on what I can do to try and fix this, or a least where I should start looking. Sorry for the massive code dumps, and thanks.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T00:39:12.927

我能够通过将编译上的优化级别设置为`-O3`而不是`-O4`. `-O4`文件输出似乎无法识别`lipo`（甚至将`file`它们报告为`data`而不是`Mach-O object arm`）。

**更新：**似乎很多人在编译 Ogg Vorbis 时遇到了困难。我已经使我的构建可用。请参阅：[适用于 iOS 的预编译 Ogg Vorbis 库](http://iosdeveloperzone.com/2012/08/07/precompiled-ogg-vorbis-libraries-for-ios/)。

# visual-studio-2010 - Visual Studio 2010 TFS Solution checked out and hard drive broken

> ID：11711111
> 
> 赞同：1
> 
> 时间：2012-07-29T16:57:04.103
> 
> 标签：visual-studio-2010, version-control, tfs

I am working on a group project in Visual Studio and using TFS for source control. I was working on the project from my laptop and the hard drive broke. Now the solution is eternally checked out by my laptop user. How can I clear the checkout from my laptop? None of the changes are needed, I have the log in credentials, and I can still get into Windows on the laptop (the secondary hard drive broke).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T17:18:01.423

最简单的方法是使用 tf.exe 命令行实用程序。

找到确切的工作空间，如果不知道，使用：

```
tf workspaces /computer:computername 
```

然后使用以下命令删除该工作区：

```
tf workspaces /remove:workspacename 
```

更多信息：http: [//msdn.microsoft.com/en-us/library/54dkh0y3.aspx](http://msdn.microsoft.com/en-us/library/54dkh0y3.aspx)

# php - 扩展 CI_Controller

> ID：11711114
> 
> 赞同：2
> 
> 时间：2012-07-29T16:57:08.120
> 
> 标签：php, oop, codeigniter, extend

我要做的只是一些相当简单的事情：

*   创建一个扩展 CI_Controller的类（比方说`brandNewClass`- NOT ）`MY_Controller`
*   创建其他扩展的控制器`brandNewClass`

**例如**

```
class brandNewClass extends CI_Controller {

    public function index()
    {

    }

    public function info()
    {

    }
} 
```

像这样使用（在 下的文件中`/controllers`）：

```
<?php

class newController extends brandNewClass
{
}

?> 
```

问题是，虽然它在我复制文件`/application/core`并将其命名为时有效`MY_Controller`，但当我将名称更改为更多......不言自明时，它不会。

> **致命错误：** *在线..中找不到类“brandNewClass”*

我什至尝试过使用[这里](https://forum.codeigniter.com/thread-39043-post-230503.html#pid230503)`__autoload`提到的功能，但没有任何运气。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-29T17:06:14.337

自动装载机不会自动包含其他控制器。您必须像这样手动包含它：

```
if (!defined('BASEPATH'))exit('No direct script access allowed');

    include_once(APPPATH . 'controllers/brandnewclass.php'); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-30T07:52:01.140

看看这个优秀的教程 - 我希望它有帮助

[http://codeigniter.tv/a-10/Extending-the-core-MY_Controller-and-beyond](http://codeigniter.tv/a-10/Extending-the-core-MY_Controller-and-beyond)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-23T07:38:14.237

如果你想创建一个自定义的基本控制器并让其他控制器在那里扩展，你可以通过以下方式进行：

1.  在文件夹中创建`MY_Controller`扩展并使其他控制器扩展为将从核心自动加载（我猜你已经知道但想要其他替代方案。`CI_Controller``application/core/``MY_Controller``MY_Controller`

2.  在. `MY_Controller`_ `application/core/`然后创建其他级别的控制器，主要是`Admin_Controller`和`Frontend_Controller`。现在，这些控制器之一将为您实际使用的控制器奠定基础。

例如在`application/core/MY_Controller.php`

```
class MY_Controller extends CI_Controller {
    public function __construct(){
        parent::__construct();
    }
} 
```

然后 Admin 和 Frontend 控制器将被创建`application/libraries/`并扩展`MY_Controller`为

```
class Admin_Controller extends MY_Controller {
    public function __construct(){
        parent::__construct();
    }
} 
```

现在，任何控制器都可以扩展这 2 个控制器之一，但为此您必须自动加载它们。在这种情况下，自动加载可能会造成混淆，因为在 config/autoload.php 中设置 autoload['libraries'] 将不起作用。该自动加载在控制器内部工作，但在这里我们需要在此之前自动加载，即在类声明中。需要将此代码设置为`config/config.php`

```
function __autoload($class) 
{
  $path = array('libraries');

  if(strpos($class, 'CI_') !== 0) {
    foreach($path as $dir) {
        $file = APPPATH.$dir.'/'.strtolower($class).'.php';
        if (file_exists($file) && is_file($file))
            @include_once($file);
    }
  }
} 
```

现在您可以创建自己的控制器

```
class newController extends Admin_Controller
{
} 
```

这是使您的结构非常干净和有效的最建议的方法。第一次理解可能需要一些努力，但绝对值得。

3.  第三种方法只是第二种方法的调整，仅基于您提到的不使用条件`MY_Controller` 您可以直接制作`Admin_Controller`或`Frontend_Controller`扩展`CI_Controller`而不是扩展`MY_Controller` 如果可能是这种情况，这可能只会导致这两个控制器中的一些代码重复

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-29T19:21:03.143

[http://philsturgeon.co.uk/blog/2010/02/CodeIgniter-base-Classes-Keeping-it-DRY](http://philsturgeon.co.uk/blog/2010/02/CodeIgniter-base-Classes-Keeping-it-DRY) 我怀疑你正在尝试类似的东西？有一个自动加载功能，您可以将其添加到配置文件中，这样您就不需要一直 require_once() 类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-29T17:05:12.973

1.  您应该将该类声明为抽象类，因为它不应该被直接实例化。
2.  您需要修改 CodeIgniter 自动加载器[配置文件](https://github.com/EllisLab/CodeIgniter/blob/develop/application/config/autoload.php)并将您的类添加到其中，或者更改[实际的自动加载器](https://github.com/EllisLab/CodeIgniter/blob/develop/system/core/Loader.php)。
3.  你真的应该考虑不使用 CodeIgniter :)

# c# - NamedScopes Ninject 绑定和异步（线程）

> ID：11711118
> 
> 赞同：6
> 
> 时间：2012-07-29T16:57:31.453
> 
> 标签：c#, asp.net-mvc, ninject

我的项目由服务和存储库构成（所有存储库共享数据库上下文）。在我的一个服务层中，我有一个使用存储库写入数据库的异步方法。Web 请求将在此方法开始使用之前完成并处理上下文。我试图理解此[答案中所述的](https://stackoverflow.com/a/10669539/400861)[NamedScopes](http://www.planetgeek.ch/2010/12/08/how-to-use-the-additional-ninject-scopes-of-namedscope/)。我似乎仍然无法理解如何实现它。我将展示我的项目的结构，并希望有人可以在代码级别帮助我。

**绑定**

```
 private static void RegisterServices(IKernel kernel)
    {
        //dbcontext
        kernel.Bind<EntityDatabaseContext>().ToMethod(context => new EntityDatabaseContext()).InRequestScope();

        //unit of work
        kernel.Bind<IUnitOfWork>().To<UnitOfWork>().InRequestScope();

        //repositories
        kernel.Bind<IRepository<Account>>().To<Repository<Account>>().InRequestScope();

        //services
        kernel.Bind<IAuthenticationService>().To<AuthenticationService>().InRequestScope();
    } 
```

**AuthenticationService 使用构造函数注入**

```
public AuthenticationService(UnitOfWork unitOfWork, IRepository<Account> accountRepository){} 
```

**我的 AuthenticationService 中的一个方法**

```
 //this is a background process
    public Task SomeMethodAsync(string text)
    {
        //spin it off into a new task
        return Task.Factory.StartNew(() => SomeMethod(text));
    } 
```

`SomeMethod`利用`accountRepository`. 请告诉我是否需要更多信息。请帮助我解决线程问题，如果 NamedScopes 是解决方案，我该如何实现它？

基本上，正在执行一个后台进程，并且由于请求范围，它正在使用由 ninject 处理的上下文。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T07:05:22.400

您应该知道，运行后台线程可能会给您带来很多问题。IIS 可以随时决定回收应用程序池，这将立即终止您的线程（或者在某些情况下根本不执行），从而使您的应用程序处于不一致的状态。

[http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)

运行异步操作的最简单和最不容易出错的方法是实现 Windows 服务并将这些异步操作委托给 Windows 服务，例如使用 MSMQ。

如果您仍然想走艰难的路，请阅读`HostingEnvironment.RegisterObject`并`IRegisteredObject`防止这些不一致的情况。

Ninject 部分非常简单。只需创建一些作业处理器类，例如`MyJobProcessor`获取所有必需的依赖项来执行任务。它应该实施`INotifyWhenDisposed`。最简单的方法是从`DisposeNotifyingObject`.

```
public class MyJobProcessor : DisposeNotifyingObject, IRegisteredObject
{
    public void Execute() { ... }
    public void Stop(bool immediate) { ... }
} 
```

将此处理器注入控制器，让任务启动它，并在它完成工作后处理它。

```
Task.Factory.StartNew(() => 
    { 
        try 
        { 
            processor.Execute(); 
        } 
        finally 
        { 
            processor.Dispose); 
        }
    }); 
```

指定它是其依赖项的范围。

```
Bind<MyJobProcessor>().ToSelf().Named("MyJobProcessor").DefinesNamedScope("MyJobProcessorScope");
Bind<IUnitOfWork>().To<UnitOfWork>().WhenAnyAnchestorNamed("MyJobProcessor").InNamedScope("MyJobProcessorScope"); 
```

# grails - GORM - add child onto parent and save is giving groovy.lang.MissingMethodException

> ID：11711123
> 
> 赞同：7
> 
> 时间：2012-07-29T16:58:11.190
> 
> 标签：grails, groovy, grails-orm, grails-2.0

This is my domain model, a survey has many questions, and each question has many repsonses :

```
class Survey {

    String name
    String customerName
    static hasMany = [questions: SurveyQuestion]

    static constraints = {
    }
}

class SurveyQuestion {

    String question

    static hasMany = [responses : SurveyQuestionResponse]
    static belongsTo = [survey: Survey]

    static constraints = {
    }
}

class SurveyQuestionResponse {

    String description
    static belongsTo = [question: SurveyQuestion]

    static constraints = {
    }
} 
```

In my controller, I have a method that takes in the ID for a Survey, looks it up, then builds a question from another request parameter, tries to add the question to the survey and save it:

```
def addQuestion =
    {
        def question = new SurveyQuestion(question:params.question)
        def theSurvey = Survey.get(params.id)

        theSurvey.addToQuestions(question) //fails on this line
        theSurvey.save(flush:true)

        redirect(action: showSurvey, params:[id:theSurvey.id])
    } 
```

However, it fails and returns this :

> No signature of method: roosearch.Survey.addToQuestions() is applicable for argument types: (roosearch.SurveyQuestion) values: [roosearch.SurveyQuestion : null] Possible solutions: addToQuestions(java.lang.Object), getQuestions()

I'm not quite understanding what I'm doing wrong here, I've tried various alternative ways to create the question, even instantiating one manually with a literal string, but it always gives the same error.

Can anyone please advise me?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-06T13:14:00.517

问题是您没有保存“问题”，所以它还没有在数据库中。尝试先保存“问题”，然后将其添加到调查中。像这样的东西：

```
def addQuestion =
    {
        def question = new SurveyQuestion(question:params.question).save()
        def theSurvey = Survey.get(params.id)

        theSurvey.addToQuestions(question)
        theSurvey.save(flush:true)

        redirect(action: showSurvey, params:[id:theSurvey.id])
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T17:21:09.580

您可以尝试断言 SurveyQuestion 是否实际上是使用输入参数创建的？例如

```
assert question 
```

就在这条线之后

```
def question = new SurveyQuestion(question:params.question) 
```

并按照#alcoholiday 的建议尝试一些日志记录。或者一个简单的

```
println params 
```

可以让你快速浏览一下

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-03T01:21:22.943

（我没有足够的评论点，所以我会“回答”）。

首先，它看起来确实“OK”。

我已经学会了以错误信息的**面值看待**错误信息。由于某种原因，它认为“问题”是空的。我猜你可以插入一些日志，然后发现它不是。

此时，我会先尝试保存问题，查看它是否正确保存并获得分配和 id，然后调用 addToQuestions。

# c# - Paged Datasource With Pages Enumerated in .aspx

> ID：11711124
> 
> 赞同：0
> 
> 时间：2012-07-29T16:58:19.413
> 
> 标签：c#, asp.net, pagination, devexpress, datasource

I've used paged datasource but I need page numbers to be listed on the .aspx like this

**1 2 3 4 5 ... 16 next last**

How to achieve this? any idea?

Or please suggest me another way of paging. I can devexpress tools too..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T17:00:49.443

1.You can use `LinkButton`, with `Server.Transfer` or `ResponseRedirect` methods.

```
<asp:LinkButton id="LinkButton1" runat="server" Text="1"/>
<asp:LinkButton id="LinkButton2" runat="server" Text="2"/>
.....

  void LinkButton1_Click(Object sender, EventArgs e) 
  {
     Server.Transfer("...");
  } 
```

Note :

1.  You can add dynamically your linkbuttons with PlaceHolderControl

2.  You can use TreeView Control Navigation

3.  You can use Menu Control Navigation

4.  You can use WizardStep Control

5.  You can also try with [this](http://www.codeproject.com/Articles/11418/Pager-Control-for-ASP-NET) custom library

# java - 在 Java 中为背景计算创建图形上下文

> ID：11711126
> 
> 赞同：2
> 
> 时间：2012-07-29T16:58:19.600
> 
> 标签：java, graphics, draw, java-2d

我有一堆 Line2D，我需要在单个图形上下文中执行一些计算。例如，我只需要查看哪些相交，哪些重叠等。图形永远不需要显示，只需在后台运行即可。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T17:12:28.530

如果它们从不需要显示，那么您不需要创建图形上下文。只需使用所需坐标构造 Line2D.Double（或 Line2D.Float）对象，然后根据需要调用[intersectsLine(Line2D)](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/Line2D.html#intersectsLine%28java.awt.geom.Line2D%29)方法。

例如：

```
Line2D.Double firstLine = new Line2D.Double(0.0, 0.0, 1.0, 1.0);
Line2D.Double secondLine = new Line2D.Double(0.5, 0.0, 0.5, 1.0);
boolean intersectionOccurs = firstLine.intersectsLine(secondLine); 
```

如果我的心智图生成器正在工作，那么对于交集发生应该是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T21:09:59.447

除非图形以某种方式与同一程序中显示的内容直接相关，否则这可能不是一个好方法。哪些绘图操作涉及哪些位的详细信息是神秘的、未记录的，并且在大多数情况下不能保证从一个环境到另一个环境是一致的。

例如，数学上相交的两条线可能会相互穿过而不共享任何像素。绘制三角形可以产生几个离散的斑点，而不是一个连续的斑点。

# java - Java renameTo Files Showed 0 File Size 然后消失了...Windows仍然保留空间

> ID：11711129
> 
> 赞同：1
> 
> 时间：2012-07-29T16:58:37.590
> 
> 标签：java, windows, file

所以我一直在用Java制作一个程序来组织我所有的文件。我从电影文件开始，因为这是我最喜欢的，但我计划最终能够检查所有文件类型。

无论如何，`renameTo`将所有文件移动到新文件夹时我工作得很好。下一步是尝试按字母顺序排列文件。我也可以正常工作，但显然我需要能够删除文章（即“the”、“a”、“an”）才能正确按字母顺序排列。我可以很容易地在我的 ArrayList 中做到这一点，然后决定实际重命名文件。

我做了一个 renameTo 以将文件重命名为相同的文件名减去文章。我用了：

```
 File newb = new File(folder+""+filelist[i].getName().substring(4));
  if(filelist[i].renameTo(newb)){}
  else{
      System.out.println("FAILED");
  } 
```

其中文件夹显然是文件所在的文件夹位置，它是原始字符串的子字符串减去单词“The_”或“The”开头的 4 个字符。

然后它尝试将同一文件夹中的文件重命名为自身减去子字符串。

此代码的结果是在调用该文件的 length() 时文件消失并且文件大小被列为 0。在 Windows 资源管理器中找不到该文件，但我的硬盘上没有多余的空间！

现在的问题：

1.  这有什么问题？我应该将临时文件放入另一个文件夹还是什么？
2.  有没有办法从 Windows 释放文件，这样它们就不会永远堵塞我的硬盘空间？
3.  你还有什么需要知道的吗？要添加吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T17:09:03.370

我不确定发生了什么，但是通过附加字符串来构造文件名可能会导致问题。（特别是，如果`folder`不以路径分隔符结尾，您可能会在父文件夹中找到您移动的文件。这可以解释为什么文件在没有释放任何磁盘空间的情况下消失了。因此，与其重命名`C:\movies\The_Sting.avi`为，不如`C:\movies\Sting.avi`说它结束了上升为`C:\moviesSting.avi`。）

试试这个：

```
File parent = filelist[i].getParentFile();

String newName = filelist[i].getName().substring(4);
if (!filelist[i].renameTo(new File(parent, newName)) {
    System.out.println("FAILED");
} 
```

显然，如果其中的所有文件`filelist`都来自同一个文件夹，那么您只需分配`parent`一次（在开始循环之前）。

# css - CSS right-border not displayed

> ID：11711130
> 
> 赞同：1
> 
> 时间：2012-07-29T16:58:38.913
> 
> 标签：css, border

On my site [http://goo.gl/BcJtC](http://goo.gl/BcJtC) section "about us" I'd like a thin grey border on the right side of my `activity-left` div, to make a separation with `activity-right` div. Unfortunately with my current code it doesn't work. Any idea?
Thanks

**HTML code:**

```
<div class="section" id="plan-activite">
   <div id="activity-container">
      <div id="activity-left"><span class="activity-title">About Us</span><br /><img src="images/planet-water.jpg" class="activity-planet" alt="Picture" /></div>
      <div id="activity-right"><p><span class="activity-conclusion">XYZ, khkhkhk, ren natur</span></p><br /><p>XXZ AS was founded 2011sdqsd.</p><br/>
      </div>
   </div>
</div><!--END page3--> 
```

**CSS code:**

```
#activity-container {
    width:90%;
    background-color:#FFFFFF;
    Height:400px;
    margin-left: auto;
    margin-right: auto;
    opacity:0.95;
    filter:alpha(opacity=95); /* For IE8 and earlier */
    border: 1px solid #efefef;
    background: #fff;
    -webkit-box-shadow: 0 1px 4px rgba(0, 0, 0, 0.27), 0 0 40px rgba(0, 0, 0, 0.06) inset;
    -moz-box-shadow: 0 1px 4px rgba(0, 0, 0, 0.27), 0 0 40px rgba(0, 0, 0, 0.06) inset; 
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.27), 0 0 40px rgba(0, 0, 0, 0.06) inset;
}
#activity-left {
    color:#000;
    margin: 0 auto; 
    border-style:solid;
    border-right-color:#666;
    padding:15px;
    width: 30%; 
    float: left;
    position: relative; 
}
#activity-right { 
    font:12px 'Open Sans', "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    font-weight:400;
    margin: O auto; 
    padding:15px;
    color:#000;
    width: 60%; 
    float: left;
    position: relative; 
    text-align:justify;
    -moz-column-count: 1;
    -moz-column-gap: 1.5em;
    -moz-column-rule: 1px solid #c4c8cc;
    -webkit-column-count: 1;
    -webkit-column-gap: 1.5em;
    -webkit-column-rule: 1px solid #c4c8cc;
}
.activity-planet {
    text-align:center;
    margin-top:20px;
    margin-left:20px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T17:01:33.167

添加`border: 1px solid #000`到`#activity-left`. 这个对我有用。

虽然我会这样做`border-left: 1px solid #000`，`#activity-right`因为这会一直向下延伸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T17:15:43.237

边界声明由三部分组成：`color`和`style`属性`width`。**样式**和**宽度**是强制性的，**颜色**是可选的（如果未提供，则从文本颜色继承）。

`-left`可以使用、和后缀使这些属性更具体`-right`，就像您对**color**属性所做的那样。`-top``-bottom`

 **因此，目前，您所缺少的只是宽度声明，以便拥有右侧边框。不过，问题在于，由于您为整体设置了通用**样式**`<div>`，添加`border-width: 1px`, 将为其他 3 边提供默认颜色的边框。

为了解决这个问题，您可以使用速记声明并一次将所有 3 个属性都放在右侧 ( `border-right: 1px solid #000;`)。**

# ruby-on-rails - 如何在 Rails 中编写增加日助手？

> ID：11711136
> 
> 赞同：1
> 
> 时间：2012-07-29T16:59:10.217
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, refactoring, helper

我有以下助手，它应该把一天写成文字取决于数字：

```
def day_in_words(number)
    case number
    when 0
      "Sunday"
    when 1
      "Monday"
    when 2
      "Tuesday"
    when 3
      "Wednesday"
    when 4
      "Thursday"
    when 5
      "Friday"
    when 6
      "Saturday"
    when 7
      "Sunday"
    when 8
      "Monday"
    when 9
      "Tuesday"
    when 10
      "Wednesday"
    when 11
      "Thursday"
    ...
    when 16
      "Sunday"
    when 17
      "Monday"
    when 18
      "Tuesday"
    when 19
      "Wednesday"
    when 20
      "Thursday"
    when 21
      "Friday"
    else
      "Unknown Day"
    end
  end 
```

如何重构那个助手？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T17:06:57.360

你有没有试过这个->

```
Date::DAYNAMES[number%7] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T17:13:04.743

您可以使用：

```
def day_in_words(number)
  return "Unknown Day" if number > 20
  %w[sun mon tue wed thu fri sat].cycle(3).to_a[number]
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T17:02:26.163

首先想到的是简单地使用模 7 作为日期名称数组的索引：

```
def day_in_words(number)
  return ['Sun','Mon','Tue','Wed','Thurs','Fri','Sat'][number % 7]
end 
```

# objective-c - UIGestureRecognizer - 获取对触摸的 UIViewController 而不是其视图的引用？

> ID：11711138
> 
> 赞同：3
> 
> 时间：2012-07-29T16:59:27.203
> 
> 标签：objective-c, ios, uiviewcontroller, uigesturerecognizer

如何获得对触摸视图的 UIViewController 的引用？

我在 UIViewController 的视图上使用 UIPanGestureRecognizer。这是我初始化它的方式：

```
 TaskUIViewController *thisTaskController = [[TaskUIViewController alloc]init];
    [[self view]addSubview:[thisTaskController view]];
    UIPanGestureRecognizer *panRec = [[UIPanGestureRecognizer alloc]initWithTarget:self action:@selector(handlePan:)];
    [[thisTaskController view] addGestureRecognizer:panRec]; 
```

在使用手势识别器触发的触发动作中，我可以使用**recognizer.view从参数中获取视图**

```
- (IBAction)handlePan:(UIPanGestureRecognizer *)recognizer {
    UIView *touchedView = [[UIView alloc]init];
    touchedView = (UIView*)[recognizer view];
    ...
} 
```

但是我真正需要的是所触摸视图的底层 UIViewController 。如何获取对包含此视图而不是仅 UIView 的 UIViewController 的引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T17:11:32.170

`[touchedView nextResponder]`将返回`UIViewController`管理的对象`touchedView`（如果有的话）或`touchedView`的超级视图（如果没有`UIViewController`管理它的对象）。

有关详细信息，请参阅[UIResponder 类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIResponder_Class/Reference/Reference.html)。(`UIViewController`并且`UIView`是 的子类`UIResponder`。)

在您的情况下，由于您碰巧知道这`touchedView`是您的 viewController 的视图（而不是，例如，您的 viewController 的视图的子视图），您可以只使用：

```
TaskUIViewController *touchedController = (TaskUIViewController *)[touchedView nextResponder]; 
```

在更一般的情况下，您可以处理响应者链，直到找到 UIViewController 类型的对象：

```
id aNextResponder = [touchedView nextResponder];

while (aNextResponder != nil)
{
  if ([aNextResponder isKindOfClass:[UIViewController class]])
  {
    // we have found the viewController that manages touchedView,
    // so we break out of the while loop:
    break;
  }
  else
  {
    // we have yet to find the managing viewController,
    // so we examine the next responder in the responder chain
    aNextResponder = [aNextResponder nextResponder];
  }
}

// outside the while loop.  at this point aNextResponder points to
// touchedView's managing viewController (or nil if it doesn't have one).
UIViewController *eureka = (UIViewController *)aNextResponder; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T18:37:23.370

我会说这不仅仅是一个参考，而是一个设计问题。所以我会遵循几个简单的建议：

1.  所有者应从其视图中捕获事件。即 TaskUIViewController 应该是您添加到其视图中的 UIPanGestureRecognizer 的目标。
2.  如果控制器有一个子控制器并等待其子控制器的一些响应 - 将其实现为委托。
3.  您的“handlePan:”方法中有内存泄漏。

这是解决您的问题的骨架：

```
@protocol CallbackFromMySubcontroller <NSObject>
- (void)calbackFromTaskUIViewControllerOnPanGesture:(UIViewController*)fromController;
@end

@interface OwnerController : UIViewController <CallbackFromMySubcontroller>
@end

@implementation OwnerController

- (id)init
{
    ...
    TaskUIViewController *thisTaskController = [[TaskUIViewController alloc] init];
    ...
}

- (void)viewDidLoad
{
    ...
   [self.view addSubview:thisTaskController.view];
    ...
}

- (void)calbackFromTaskUIViewControllerOnPanGesture:(UIViewController*)fromController
{
    NSLog(@"Yahoo. I got an event from my subController's view");
}

@end

@interface TaskUIViewController : UIViewController {
    id <CallbackFromMySubcontroller> delegate;
}
@end

@implementation TaskUIViewController

- (id)initWithOwner:(id<CallbackFromMySubcontroller>)owner
{
    ...
    delegate = owner;
    ...
}

- (void)viewDidLoad
{
    UIPanGestureRecognizer *panRec = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePan:)];
    [self.view addGestureRecognizer:panRec];
    [panRec release];
}

- (void)handlePan:(UIPanGestureRecognizer *)recognizer {
    ...
    [delegate calbackFromTaskUIViewControllerOnPanGesture:self];
    ...
}

@end 
```

# eclipse-plugin - 旧的 android sdk 可供下载

> ID：11711139
> 
> 赞同：-3
> 
> 时间：2012-07-29T16:59:31.417
> 
> 标签：eclipse-plugin, adt, android-2.2-froyo

有人知道我可以在哪里获得一些较旧的 Android SDK 的 ftp 服务器/镜像吗？至少比[http://developer.android.com/sdk/index.html旧，必须使用 ADT r16.0.1](http://developer.android.com/sdk/index.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T17:10:10.880

您可以找到适当的标签并将其从源代码控制中检查出来

[https://github.com/android](https://github.com/android)

并使用您想要的任何版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T18:13:11.973

[http://dl.google.com/android/android-sdk_r16-macosx.zip](http://dl.google.com/android/android-sdk_r16-macosx.zip)

根据[http://en.androidwiki.com/wiki/Android_SDK#Old_versions找到](http://en.androidwiki.com/wiki/Android_SDK#Old_versions)

# android - 试图让 Android 键盘在活动启动时弹出

> ID：11711140
> 
> 赞同：0
> 
> 时间：2012-07-29T16:59:33.507
> 
> 标签：android, xml, android-layout, android-keypad

我希望 Android 键盘在我的活动启动时弹出。一个简单的谷歌搜索显示你只需要`requestFocus`我在 my 中执行的操作`.xml`，但它仍然没有弹出。我是否犯了任何导致这不起作用的小错误？

**测试：**

物理 4.1 模拟器 2.2

**布局.xml：**

```
<EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:ems="10"
        android:hint="To:"
        android:inputType="textPersonName" >

        <requestFocus />
    </EditText> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T17:46:32.833

这有效：

```
myEditText.setOnFocusChangeListener( new View.OnFocusChangeListener() {
    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        if (hasFocus) {
            getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE);
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T17:18:17.697

试试这个代码：

```
EditText input = (EditText) findViewById(R.id.editText1);
InputMethodManager inputManager = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);         
inputManager.showSoftInput(input, InputMethodManager.SHOW_IMPLICIT); 
```

# android - 将位置转换为地理点

> ID：11711147
> 
> 赞同：4
> 
> 时间：2012-07-29T17:01:47.913
> 
> 标签：android, google-maps, location, overlay

全部-我试图获取用户的当前位置，而不是在地图上使用覆盖项显示该位置。我的问题是用户的位置作为一个位置进来，而覆盖数组只接受 GeoPoints。这是我尝试过的：

```
LocationListener locationListener = new LocationListener() {
        public void onLocationChanged(Location location) {      
            GeoPoint point = new GeoPoint.valueOf(location);
            OverlayItem overlayitem4 = new OverlayItem(point, "You Are Here", "Boulder, CO");               
        } 
```

但我收到一个错误`GeoPoint.valueOf(location);`，特别是：

> GeoPoint.valueOf 无法解析为类型`

所以我的问题是**如何从位置转换为 GeoPoint？**谢谢大家的时间。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-29T17:08:59.217

尝试这个

```
LocationListener locationListener = new LocationListener() {

     public void onLocationChanged(Location location) {      
         int lat = (int) (location.getLatitude() * 1E6);
         int lng = (int) (location.getLongitude() * 1E6);
         GeoPoint point = new GeoPoint(lat, lng);
         OverlayItem overlayitem4 = new OverlayItem(point, "You Are Here",   "Boulder, CO"); 
     }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-30T03:52:32.717

这对我有用，而且似乎更容易：

```
GeoPoint geoPoint = new GeoPoint(location); 
```

# ios - 在设备（例如 iPhone）上使用 stdlib.h 模拟概率

> ID：11711149
> 
> 赞同：1
> 
> 时间：2012-07-29T17:02:03.330
> 
> 标签：ios, random, simulation, probability

愚蠢的愚蠢问题，但我们在这里..

所以，我想在 iOS 应用程序（在我的例子中是游戏）中生成一些随机事件。我编写了一个函数“verifyEvents”，每次加载特定视图（游戏场景）时都会调用它。

为了将概率与事件相关联，我为每个事件分配了一个值（例如杀死玩家：0.05，给予额外奖励 0.08）。

在函数中，我使用 CCRANDOM_0_1() 生成一个随机数，这是一个基于 stdlib.h 中定义的 random() 函数的 iOS 宏。如果数字小于分配的值，我会触发事件（下面是代码）。

```
#define CCRANDOM_0_1() ((random() / (float)0x7fffffff )) 
```

**这是最好的方法还是你在你的应用程序中使用了其他东西？**

```
-(void) verifyEvents
{
    float value = CCRANDOM_0_1() ;
    float eventPValue = 0.05f;

    if(value<eventPValue){
        CCLOG(@"EVENT!");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T21:07:10.830

好的，按照@lukya 的建议，我在gamedev 上提出了这个问题并做了更多的研究。到目前为止，我得到了两个看起来很有趣的答案（应该与我的问题的评论一起阅读）。

编辑：也忘了把链接放在这里（只在评论中）： [https ://gamedev.stackexchange.com/questions/33236/simulating-probability](https://gamedev.stackexchange.com/questions/33236/simulating-probability)

# c# - 从子用户控件调用 sub

> ID：11711160
> 
> 赞同：0
> 
> 时间：2012-07-29T17:03:16.253
> 
> 标签：c#, vb.net, windows-8

我有一个用户控件，当它被点击时，它应该调用父页面的 Sub。但我无法用`this.Parent`(or `Me.Parent`) 等来达到它。

那么如何从页面类中访问属性和子类呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T19:49:41.393

您不应该直接从用户控件调用 sub，而是引发一个事件，然后在 Form 中响应该事件。我假设您正在使用 Winforms。

在用户控件中：

```
'declare the event
Public Event ControlClick()

'raise the event when the control is clicked
Private Sub UserControl1_Click(sender As Object, e As System.EventArgs) Handles Me.Click
    RaiseEvent ControlClick()
End Sub 
```

在表格中：

```
Private Sub UserControl1_ControlClick1() Handles UserControl1.ControlClick
    MessageBox.Show("Control was clicked")
End Sub 
```

# objective-c - xcode 窗口创建

> ID：11711163
> 
> 赞同：0
> 
> 时间：2012-07-29T17:03:39.623
> 
> 标签：objective-c, xcode, macos, cocoa

我对 OSX 编程非常陌生，我一直在尝试各种文章中的一些示例，但我一直面临一个问题；那时我决定遵循“MacOSX 的 Cocoa 编程”中的教程，我遇到了同样的问题。

我的项目名称是“随机”，当我单击“构建并运行”时，它显示状态为“随机运行”。但是我没有看到弹出的窗口。为什么会这样？

我看了一下[这个 SO 线程](https://stackoverflow.com/questions/4872451/xcode-program-starts-but-no-window)，不幸的是它没有帮助。

[编辑]

"Random" 是一个适用于 Mac 的 Cocoa 应用程序。

[编辑2]

我尝试对新的可可应用程序做同样的事情，但问题仍然存在。这就是我所做的。创建一个名为“blah”的新可可项目。单击“构建并运行”-从我正在阅读的内容中，我应该看到一个空窗口-但是我看不到相同的内容。

[编辑3]

我的 Xcode 版本详细信息：-

*   Xcode IDE：1610.0
*   Xcode 核心：1608.0
*   工具支持：1591.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:00:47.577

通常，如果您在加载主菜单的 xib 中有一个可见的窗口，并且它被标记为在启动时可见...如果您选择了基于窗口的应用程序，这应该全部设置，如果您选择基于文档，那么当您从文件菜单中选择新建时，您将看到一个窗口