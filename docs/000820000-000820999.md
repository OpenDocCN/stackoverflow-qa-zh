# StackOverflow 问答 000820000-000820999

# opencv - 0x10012c5d (highgui110.dll) 处未处理的异常

> ID：820002
> 
> 赞同：0
> 
> 时间：2009-05-04T13:03:11.437
> 
> 标签：opencv, unhandled-exception

我的机器上安装了 OpenCV 库，一切正常，直到我决定尝试新版本的库[1.1pre](http://sourceforge.net/project/showfiles.php?group_id=22870&package_id=16937&release_id=633499)。从那一刻起，我收到以下错误：

```
Unhandled exception at 0x10012c5d (highgui110.dll) in foo.exe: 0xC0000005: Access violation reading location 0x719b3856. 
```

我已经尝试卸载并重新安装 lib....同样的事情发生了。我能做些什么？我该如何解决这个问题？

我在 Windows Vista 操作系统上使用 VS 2005 Express Edition。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T13:26:35.063

两种解决方案：

*   恢复到适合您的 OpenCV 库并等待非预发布版本。预发布通常有点不稳定。

*   从 sourceforge 页面获取 OpenCV 的源代码。在调试模式下编译 DLL。

    如果崩溃再次发生，您将能够看到它发生的来源。这可能会或可能不会提示您出了什么问题。也许您不小心传递了错误的参数，或者它是 OpenCV 中的错误。

    如果它很简单，请自行修复并提交补丁。否则，我建议您在 OpenCV 项目页面提交错误报告。

顺便说一句：错误跟踪器在这里：[https ://sourceforge.net/tracker/?atid=376677&group_id=22870&func=browse](https://sourceforge.net/tracker/?atid=376677&group_id=22870&func=browse)

# sql-server - 来自不受信任域的集成 SQL 服务器身份验证

> ID：820004
> 
> 赞同：2
> 
> 时间：2009-05-04T13:03:20.483
> 
> 标签：sql-server, windows-authentication, sspi

我真的想从 C#/.NET 应用程序中使用 SQL-server，而不使用 SQL-Server 帐户或将受影响的计算机添加到同一个域或任何域，或者使用与域相同的登录名。

没有办法吗？有人尝试使用 SSPI 的 MONO 实现来做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T15:51:54.713

重新表述您的问题，您想使用没有域的域身份验证。

不，那是不可能的。

您可以在域上分别设置它们并使用域之间的信任，也可以使用 SQL 身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T13:51:31.650

您是否考虑过在应用程序中使用模拟？

# asp.net-membership - System.Security.Principal.WindowsIdentity.GetCurrent().Name 是 Works

> ID：820008
> 
> 赞同：1
> 
> 时间：2009-05-04T13:05:06.283
> 
> 标签：asp.net-membership

我正在使用`System.Security.Principal.WindowsIdentity.GetCurrent().Name`（在我的 web.config 中使用 Windows 身份验证）来获取客户端用户名。

我的问题是当我将页面放到 Intranet 上时这段代码是否有效，因为我需要将用户名存储在会话中以备后用。

我能否使用此代码获取用户用于登录我的页面的用户名？

```
void Authenticate()
{
    string strLogin = null;

    try
    {
        strLogin = System.Security.Principal.WindowsIdentity.GetCurrent().Name;
        Session.Add("Login", strLogin);
        //Label1.Text = strLogin;
        //Label2.Text = System.Environment.UserName;
    }
    catch (Exception ex)
    {
        Response.Write(strLogin);
        Response.Write("<br/>handled:" + ex.Message.ToString());
        Response.End();
    }
    finally
    {
        GC.Collect();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-04T14:09:31.747

您需要将应用程序配置为模拟访问它的 Windows 用户，方法是在 Web.Config 中的身份验证元素之后添加以下元素：

```
<identity impersonate="true"/> 
```

如果未将 impersonate 设置为 true，则工作进程将作为网络服务或 ASPNET 帐户运行，具体取决于您的 IIS 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T13:22:50.720

是的。它也适用于 Page.User.Identity.Name

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T13:12:32.443

如果您的用户登录您的网站，您可以通过 Page.User.Identity.Name 获取当前用户的名称。

# delphi - Delphi D2009 for Win32 和 CodeDom

> ID：820018
> 
> 赞同：1
> 
> 时间：2009-05-04T13:08:15.357
> 
> 标签：delphi, delphi-2009

有谁知道是否有可能（理论上或实际上）使用似乎在 Delphi 的 .NET 对应物中提供的 CodeDom？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T14:20:57.710

简而言之：不，.NET CodeDom 依赖于被编译成[CIL](http://en.wikipedia.org/wiki/Common_Intermediate_Language)和 .NET ByteCode 的代码，并且不适用于 Win32 编译的 Delphi 程序。

# algorithm - 递归遍历儿童森林的算法

> ID：820023
> 
> 赞同：1
> 
> 时间：2009-05-04T13:09:12.263
> 
> 标签：algorithm, recursion, loops

如果这是不好的做法或在某种程度上是一件坏事，请告诉我。事情是在我的程序中，我需要创建一个通过根元素和该元素的所有子节点的方法。我的元素是这样的：

```
|--ID--|--Parent--|--Additinal info--|
|  1   |    0     | root element     |
|  2   |    0     | root elemnet     |
|  3   |    1     |child element of 1|
|  4   |    1     |child element of 1|
|  5   |    3     |child element of 3|
-------------------------------------- 
```

现在，如果我想接收 ID 为 1 的元素的所有子元素（无论它有 1000 个子元素还是本例中只有 2 个子元素），我希望我的方法也能把它带给我，但我不知道该怎么做？所有这些元素都在一个列表中，这就是我正在使用的。每次我找到一个元素时，我都需要检查它是否有任何子元素，子元素也是如此。这是因为我需要以正确的顺序输出元素。我一直在想也许可以做，所以我先做一个布局的地图，然后用地图输出，但我有点坚持这个想法。

有什么线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T13:25:33.973

像很多这样的树问题一样，这里的神奇词是递归。您在表中描述的顺序是 ID 的顺序，它与深度或广度不完全匹配。但这没关系，您只需将节点放入一些数据结构中，这些数据结构将按照您想要的顺序返回。所以总体规划是

*   递归地“遍历”树以找到所有节点；将节点插入到按 ID 排序的数据结构中
*   打印有序节点

递归部分也很简单：

*   从根节点开始

*   如果根节点不在节点列表中，则添加它

*   取第一个子节点并做同样的事情。

所以像（伪代码）：

```
dfs(node, nodelist):
   if node not in nodelist
      insert node in nodelist
   for each child node n
      dfs(n, nodelist) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T13:25:04.007

在遍历节点的子节点时，您表示分层数据的方法非常低效。您基本上需要为每个节点发出一个查询。

我强烈建议您查看嵌套集模型（[在此页面中进行了解释](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)）。如果使用这种方法，则可以使用一个查询遍历节点的子节点，而不管树的深度或子节点的数量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T13:27:10.490

您必须实现类似，在列表中循环并针对列表的每个当前元素，查找子元素的数量，例如列表中元素的数量 where element.Parent = currentElementofList.Id .If 这个元素的子元素计数大于零，您必须获取此子元素，并且此过程一直持续到列表中没有更多元素要循环为止。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T13:17:33.850

这听起来像是一个图遍历问题，所以我会将此列表转换为图结构（使用[邻接列表](http://en.wikipedia.org/wiki/Adjacency_list)），然后使用[DFS](http://en.wikipedia.org/wiki/Depth-first_search)或[BFS](http://en.wikipedia.org/wiki/Breadth-first_search)遍历它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-04T13:32:16.390

你需要的是[邻接表模型](http://www.sitepoint.com/article/hierarchical-data-database/)。

查看文章了解详细信息，但此方法允许您通过一次查询来检索树，并且结果很容易通过您的代码进行遍历。这是随机树访问的最快方法。

# javascript - 在 Firefox 中捕获鼠标

> ID：820026
> 
> 赞同：4
> 
> 时间：2009-05-04T13:09:55.227
> 
> 标签：javascript, html

在 IE 中存在 .setCapture(); .releaseCapture() 函数。在不使用 jQuery 的情况下，Firefox 中这些功能的等价物是什么？（我的客户不想使用它）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-24T09:25:28.137

正如上面所说，Firefox 不提供此功能，您可以通过监视整个文档上的事件来解决它。为了确保没有更好的技巧，我刚刚检查了 jQuery UI，看起来他们使用了相同的方法。因此，例如，如果您想在 jQuery 中鼠标按下时捕获鼠标移动，您可以这样做：

```
$("#someElement").
    mousedown(function() { $(document).mousemove(captureMouseMove) }).
    mouseup(function() { $(document).unbind("mousemove", captureMouseMove) });

function captureMouseMove(event)
{
    // ...
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-11T22:22:17.303

[https://developer.mozilla.org/en-US/docs/DOM/element.setCapture](https://developer.mozilla.org/en-US/docs/DOM/element.setCapture)

setCapture 和 releaseCapture 于 2011 年 3 月 22 日被添加到 Firefox 4（随着 Gecko 2 的发布）。然而，WebKit（Chrome/Safari）仍然缺乏这些功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-09-20T07:14:25.033

随时捕获鼠标不是好的行为，我认为这就是为什么`setCapture`不提供。

但是，要捕获鼠标以进行拖放，您只需要处理`document`对象的鼠标事件（mouse{up,down,move}），即使在客户区之外拖动也可能会触发该事件。

```
<html>
<head>
    <title>Capture test</title>
</head>
<body>
<script type="text/javascript">
    document.onmousedown = function () {
        state.innerHTML = "Dragging started";
    };
    document.onmousemove = function (e) {
        coord.innerHTML = e.clientX + ',' + e.clientY;
    }
    document.onmouseup = function (e) {
        state.innerHTML = "Dragging stopped";
    }
</script>
<p id="state">.</p>
<p id="coord">.</p>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-14T22:03:39.150

我相信 element.setCapture() 和 document.releaseCapture() 自 FF4 起已添加到 Firefox： [https ://developer.mozilla.org/en/DOM/element.setCapture](https://developer.mozilla.org/en/DOM/element.setCapture)

“在处理 mousedown 事件期间调用 element.setCapture() 方法以将所有鼠标事件重新定位到此元素，直到释放鼠标按钮或调用 document.releaseCapture()。”

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-24T16:18:56.893

@JanZich 的解决方案效果很好，但如果鼠标在元素之外，它不会捕获鼠标向上事件。这对我来说效果更好：

```
$("#someElement").mousedown(function() { 
    $(document).mousemove(captureMouseMove); 
    $(document).mouseup(captureMouseUp);
});

function captureMouseMove(event) {
    console.log("mouse move");
}                       

function captureMouseUp(event) {
    console.log("mouse up");
    $(document).unbind("mousemove", captureMouseMove);
    $(document).unbind("mouseup", captureMouseUp);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-04T15:39:42.247

使用事件冒泡：将冒泡鼠标事件的事件侦听器添加到高级容器（可能是 even `document`）并使用变量来跟踪哪个元素应该是捕获元素。

如果没有有关您要做什么的更多信息，就没有更多可说的了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-04T13:35:05.027

SetCapture 和 ReleaseCapture 是您发现的 IE 专有功能。在 Firefox 中没有以相同方式操作内容菜单的本地方法。

Gimme 似乎可以在[http://www.codeplex.com/gimme/Wiki/Recent.aspx](http://www.codeplex.com/gimme/Wiki/Recent.aspx)找到。这里有一篇博客文章：http: [//blog.stchur.com/2007/11/21/setcapture-with-gimme](http://blog.stchur.com/2007/11/21/setcapture-with-gimme)描述了使用它来替换功能的一种场景。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-04T13:36:29.593

setCapture() 和 releaseCapture() 是 Internet Explorer 特定的非标准方法。Firefox 中没有实现。有一个名为 Gimme 的框架，它为您提供了一些鼠标捕获功能。[http://www.codeplex.com/gimme/](http://www.codeplex.com/gimme/)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-08-14T02:17:08.657

用作捕获方法的`true`第三个参数。`addEventListener`例如：

```
document.addEventListener("click", function(event){location.hash=event.target}, true) 
```

使用`removeEventListener`相同的参数释放：

```
document.removeEventListener("click", function(event){location.hash=event.target}, true); 
```

**参考**

*   [DOM 3 级事件流](http://www.w3.org/TR/DOM-Level-3-Events/images/eventflow.svg)

*   [Netscape 6，第三部分：事件模型](http://www.webreference.com/js/column74/4.html)

*   [当前事件：客户端提示表](http://www.webreference.com/programming/javascript/events/2.html)

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2009-05-04T13:12:16.657

FF / JavaScript 中没有这样的功能。捕获函数仅存在于 JScript 中。

# jquery - jQuery 类在类实例之间静态共享一个对象

> ID：820045
> 
> 赞同：1
> 
> 时间：2009-05-04T13:14:16.760
> 
> 标签：jquery, oop

不久前，我需要使用 jQuery 创建一个面向对象的类。我转而使用[John Resig 的](http://ejohn.org/blog/simple-javascript-inheritance/)优秀 Class 解决方案。

遇到问题。当我定义一个全局选项对象时，在我看来后者是在类之间共享的。我已经确认通过仅在一个类中修改对象后打印各种console.log。代码如下所示：

```
var MyClass = Class.extend({
    defaults : {
        distance : 10,
        speed : 20
    },
    options : null,

    init : function(options) {
        this.options = $.extend(this.defaults, options);
    },

    ...
}); 
```

我需要一个全局哈希或数组，以便我可以轻松地将可选设置传递给类。有什么方法可以这样做吗？如果没有任何效果，我可能不得不求助于类的手动设置器。

我也不太清楚为什么选项对象在使用“new”关键字实例化的不同类对象之间静态共享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T13:19:25.063

我在这里可能错了，但请尝试从“var MyClass”中删除“var”。这样做将在窗口命名空间中创建“MyClass”，这实质上使其成为全局的。

* * *

更新

这是你需要的吗？

```
var myObject = function() {
    var defaults = {
                      speed: 20,
                      distance: 10
    };
    var options = null;
    return {
        init: function() { ... },
        setSpeed: function(speed) { this.defaults['speed'] = speed; },
        // etc
    }

} 
```

然后将其称为：

```
myObject.init(); 
```

或者

```
myObject.setSpeed(100); 
```

也许我没有正确理解这个问题，我应该只是 stfu

ps - 以上代码直接来自内存，未经测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-10-26T20:06:22.693

他们确实共享**选项**值，但那是因为您分配了一个修改**后的 this.defaults***而* 不是一个不同的对象。来自[jQuery.extend() 文档](http://docs.jquery.com/Utilities/jQuery.extend#deeptargetobject1objectN)：

 **> 请记住，目标对象将被修改，并将从 extend() 返回。

您可以通过使用默认值和选项扩展一个空对象来修复它：

```
 this.options = $.extend({}, this.defaults, options); 
```

# .net - 部署 .NET WinForms 应用程序的最恶劣的企业环境是什么？

> ID：820047
> 
> 赞同：5
> 
> 时间：2009-05-04T13:14:20.567
> 
> 标签：.net, winforms, restriction, corporate

假设您正在编写一个基于网络的 WinForms 应用程序，由于客户站点的限制性公司政策，该应用程序应该在“偏执”环境中运行。这种恶劣的环境有什么样的限制，你做了什么围绕它们设计的？

一些例子开始：

*   问题：有一个非常严格的防火墙，只允许出站端口 80 流量。解决方案：仅使用 HTTP 进行网络连接。
*   问题：不允许使用 .NET 框架。解决方案：将您的应用程序转变为网络应用程序。

您在现实生活中的客户情况中遇到过哪些此类限制，例如在银行软件中（通常需要生活在特别严格的环境中）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T13:18:56.593

好吧，问题的第一部分，我不确定。但是，至于您的要点。您可以在端口 80 上运行您的服务器，而不是使用 HTTP，而是使用您的自定义协议。另外，防火墙当然允许 SSL (443)，您也可以将您的协议包装在 SSL 中。就不允许使用 .NET 框架而言，您可以使用 Xenocode 的 PostBuild 或类似的用于 .NET 的“静态链接”应用程序。此外，对于 HTTP 的东西，您可以让您的应用程序通过 HTTP 进行通信，但使用 Web 服务，因此仍然提供富客户端。

这是 PostBuild 的链接：

[https://secure.xenocode.com/Products/Postbuild-for-NET/](https://secure.xenocode.com/Products/Postbuild-for-NET/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T13:35:06.820

坚持使用IE6的公司。如果您尝试使用 Web 应用程序解决限制，这可能会增加整个开销。

Not giving their users admin rights to install stuff on their machine is also a big deal, as can be some security settings on the browser they may insist on.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T13:26:25.593

强制所有网络流量通过端口 80 是一个不错的选择。然后需要端口 80 上的重定向器以允许多个服务器应用程序在一个端口上“侦听”，因为打开任何其他端口将是“安全风险”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-04T13:30:32.197

您可能会发现最大的问题是那些不定期运行 Windows Update 并且无法访问其计算机的 Internet 的公司。我的客户就是这样，但他们必须这样。

这意味着当你推出你的软件时，你需要知道他们有什么 .net 平台，并且告诉他们“更新到最新”并不总是一种选择。在没有互联网的情况下，在每个桌面上安装更新，并推出所有 .net 版本、服务包和 MS 补丁，这真的很痛苦。因此，如果您交付的代码需要用户没有的东西，您可能必须重写它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-04T13:22:25.073

在 .NET 2.0 发布 3 年后，被迫在 .NET 1.1 等旧框架中进行开发。还有桌面和服务器团队之间的脱节。桌面团队认为 .NET 不好且不安全，而服务器团队的反应完全相反，他们喜欢 .NET，因为它能够使用信任权限锁定环境。

您无法快速更改公司政策。让他们接受新事物是一个缓慢、非常缓慢的过程。

# reflection - 从紧凑框架 2.0 中的 dll 获取应用程序

> ID：820061
> 
> 赞同：1
> 
> 时间：2009-05-04T13:19:15.423
> 
> 标签：reflection, compact-framework, .net-2.0

我正在尝试为 Compact Framework 2.0 dll 编写一个方法，该方法将返回调用 dll 的父应用程序的名称，但我正在努力了解如何执行此操作。

使用反射我可以获得我写的 dll 等等 - 任何想法如何获得应用程序名称？

谢谢

莫里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-24T14:41:22.050

您可以使用

```
AppDomain.CurrentDomain.FriendlyName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-24T21:49:20.920

如果您想要 EXE 的完整路径：

```
Assembly.GetCallingAssembly().GetName().CodeBase 
```

# javascript - Vista x64，小工具开发，OLEDB 错误：“找不到提供程序”

> ID：820063
> 
> 赞同：1
> 
> 时间：2009-05-04T13:20:46.450
> 
> 标签：javascript, windows-vista, oledb

我正在开发一个 Vista 小工具。该小工具正在使用本地 .mdb 数据库，使用 OLEDB。代码如下：

```
var cs = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + getDbFilePath() + ";Persist Security Info=False;";
var connection = new ActiveXObject("ADODB.Connection");
connection.ConnectionString = cs; 
```

它在 Vista 32 下工作，但在 x64 下失败并显示消息：

> 找不到提供者。它可能没有正确安装。

当我从命令行运行 javascript 文件时，不会发生错误。 **getDbFilePath()**返回正确的路径、数据库是否存在等。

如何解决？也许，有使用其他数据库提供者的意义吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-04T13:45:18.667

没有为 x64 注册/可用的本机 Jet 映像 - 它仅在 x64 上的 32 位进程中可用。边栏可执行文件作为本机 x64 映像运行 - 因此它失败了。

您的选择似乎有限：

1.  放弃 Jet，例如切换到 SQL Compact Edition、SQL Express 或类似版本之一
2.  将您的 Jet 调用包装在一个代理 32 位 COM 对象中。在 64 位注册表中将对象注册为进程外。例如

    [http://dnjonline.com/article.aspx?ID=jun07_access3264](http://dnjonline.com/article.aspx?ID=jun07_access3264)

3.  不支持 x64

试图强制侧边栏以 32 位模式运行似乎很困难/不可能，更不用说不合理了。

# ruby-on-rails - Nokogiri：在元素A和B之间选择内容

> ID：820066
> 
> 赞同：4
> 
> 时间：2009-05-04T13:21:27.400
> 
> 标签：ruby-on-rails, ruby, dom, parsing, nokogiri

让 Nokogiri 选择开始和停止元素（包括开始/停止元素）之间的所有内容的最聪明的方法是什么？

检查下面的示例代码以了解我在寻找什么：

```
require 'rubygems'
require 'nokogiri'

value = Nokogiri::HTML.parse(<<-HTML_END)
  "<html>
    <body>
      <p id='para-1'>A</p>
      <div class='block' id='X1'>
        <p class="this">Foo</p>
        <p id='para-2'>B</p>
      </div>
      <p id='para-3'>C</p>
      <p class="that">Bar</p>
      <p id='para-4'>D</p>
      <p id='para-5'>E</p>
      <div class='block' id='X2'>
        <p id='para-6'>F</p>
      </div>
      <p id='para-7'>F</p>
      <p id='para-8'>G</p>
    </body>
  </html>"
HTML_END

parent = value.css('body').first

# START element
@start_element = parent.at('p#para-3')
# STOP element
@end_element = parent.at('p#para-7') 
```

**结果（返回值）应如下所示**：

```
<p id='para-3'>C</p>
<p class="that">Bar</p>
<p id='para-4'>D</p>
<p id='para-5'>E</p>
<div class='block' id='X2'>
  <p id='para-6'>F</p>
</div>
<p id='para-7'>F</p> 
```

**更新：这是我目前的解决方案，但我认为必须有更聪明的东西：**

```
@my_content = ""
@selected_node = true

def collect_content(_start)

  if _start == @end_element
    @my_content << _start.to_html
    @selected_node = false
  end

  if @selected_node == true
    @my_content << _start.to_html
    collect_content(_start.next)
  end

end

collect_content(@start_element)

puts @my_content 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-04T16:20:10.263

一种使用递归的智能单线器：

```
def collect_between(first, last)
  first == last ? [first] : [first, *collect_between(first.next, last)]
end 
```

迭代解决方案：

```
def collect_between(first, last)
  result = [first]
  until first == last
    first = first.next
    result << first
  end
  result
end 
```

**编辑：（简短）asterix 的解释**

它被称为 splat 运算符。它“展开”一个数组：

```
array = [3, 2, 1]
[4, array]  # => [4, [3, 2, 1]]
[4, *array] # => [4, 3, 2, 1]

some_method(array)  # => some_method([3, 2, 1])
some_method(*array) # => some_method(3, 2, 1)

def other_method(*array); array; end
other_method(1, 2, 3) # => [1, 2, 3] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-07T11:09:29.843

```
# monkeypatches for Nokogiri::NodeSet
# note: versions of these functions will be in Nokogiri 1.3
class Nokogiri::XML::NodeSet
  unless method_defined?(:index)
    def index(node)
      each_with_index { |member, j| return j if member == node }
    end
  end

  unless method_defined?(:slice)
    def slice(start, length)
      new_set = Nokogiri::XML::NodeSet.new(self.document)
      length.times { |offset| new_set << self[start + offset] }
      new_set
    end
  end
end

#
#  solution #1: picking elements out of node children
#  NOTE that this will also include whitespacy text nodes between the <p> elements.
#
possible_matches = parent.children
start_index = possible_matches.index(@start_element)
stop_index = possible_matches.index(@end_element)
answer_1 = possible_matches.slice(start_index, stop_index - start_index + 1)

#
#  solution #2: picking elements out of a NodeSet
#  this will only include elements, not text nodes.
#
possible_matches = value.xpath("//body/*")
start_index = possible_matches.index(@start_element)
stop_index = possible_matches.index(@end_element)
answer_2 = possible_matches.slice(start_index, stop_index - start_index + 1) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-09-27T21:06:10.330

为了完整起见，**只有 XPath**的解决方案 :)
它构建了两个集合的交集，即起始元​​素的以下兄弟姐妹和结束元素的前面兄弟姐妹。

> *基本上你可以建立一个交叉点：*
> 
> ```
>  $a[count(.|$b) = count($b)] 
> ```

为了可读性，变量有点分歧：

```
@start_element = "//p[@id='para-3']"
@end_element = "//p[@id='para-7']"
@set_a = "#@start_element/following-sibling::*"
@set_b = "#@end_element/preceding-sibling::*"

@my_content = value.xpath("#@set_a[ count(.|#@set_b) = count(#@set_b) ]
                         | #@start_element | #@end_element") 
```

Siblings 不包含元素本身，因此表达式中必须分别包含 start 和 end 元素。

**编辑：**更简单的解决方案：

```
@start_element = "p[@id='para-3']"
@end_element = "p[@id='para-7']"
@my_content = value.xpath("//*[preceding-sibling::#@start_element and
                               following-sibling::#@end_element]
                         | //#@start_element | //#@end_element") 
```

# windows-xp - Windows NT 版本

> ID：820072
> 
> 赞同：0
> 
> 时间：2009-05-04T13:23:37.673
> 
> 标签：windows-xp

在 Windows NT 4.0 中修复了 rpcrt4.dll。我从知识库文章中得到了这个。如何检查我的 Windows NT 版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T13:27:49.647

有多种方式：

1.  打开命令窗口并键入“ver”并按 Enter。

2.  右键单击“我的电脑”，然后单击属性。

# java - Google 使用哪个 IDE 进行 C++ 和 Java 开发

> ID：820074
> 
> 赞同：21
> 
> 时间：2009-05-04T13:23:43.290
> 
> 标签：java, c++

我很好奇 Google 使用哪个 IDE 进行 C++ 和 Java 开发？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-05-04T13:25:03.350

谷歌不是一个人。那里可能使用了很多 IDE 和工具。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-05-04T13:28:05.667

Google 的开发人员可以选择他们觉得最舒服的任何 IDE。他们甚至可以选择他们觉得最舒服的操作系统。所以它的范围从 Vi 到 Emacs 到 NetBeans 到 Eclipse 再到 Visual Studio。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-05-04T13:31:10.887

Mehrdad 非常正确，他们极不可能为每种语言在一个 IDE 上标准化。但是，每种语言可能都有一个或两个流行的。

一个很好的判断方法是查看他们发布的需要 IDE 插件的源代码，看看他们支持什么。我注意到（关于 Java）JetBrains 的 Intellij IDEA 倾向于获得早期插件支持，但这可能只是选择偏差（因为这是我使用的）。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-05-07T03:30:55.640

Google 的 C++ 人员主要在 Linux 上工作。我的理解是，他们倾向于使用命令行工具和 emacs 作为一种自豪感。话虽如此，随着 CDT 日趋成熟，越来越多的 Linux 用户正在过渡到 Eclipse。

至于Java 编程，我认为Eclipse 是相当标准的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-07T03:34:47.753

最流行的编辑器包括 eclipse、vim 和 emacs。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-07T03:22:25.583

我相信那里的人可以选择他们喜欢的任何东西。也许他们中的大多数人根本不使用 IDE :)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-03-10T14:24:56.360

一般来说，Eclipse IDE 对 Android 和其他使用插件的 API/SDK 有很多支持，例如 ARM 使用它作为他们推送给客户的 IDE 的基础（RealView 和 DS-5）。谷歌可能会基于他们的 Android 支持将 Eclipse 作为他们的内部 IDE，但正如已经说过的，如果他们愿意，开发人员可能会被允许远离这个。

# database - Oracle 的免费桌面客户端？

> ID：820077
> 
> 赞同：28
> 
> 时间：2009-05-04T13:24:28.797
> 
> 标签：database, oracle, desktop-application

哪个是最好的~~开源~~用于查询 Oracle 数据库的免费客户端？它可能还支持其他数据库（MySQL、Postgres 等），因为我们的开发环境经常需要在不同数据库之间切换。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-05-04T14:13:50.690

我一直在使用 Oracle SQL Developer（因为它是免费的），起初我讨厌花在它上面的每一分钟。我仍然遇到奇怪的图形问题，因为它在 Vista 上运行，并且似乎存在某种图形驱动程序问题（幸运的是，没有人可以让它在 Vista 上正常运行，所以我并不孤单），其中使得它的使用相当麻烦。

尽管如此，我必须学习如何应对它，现在我必须承认它是一个用于查询 Oracle 数据库的简洁且非常有用的工具（不仅限于）。我想你也可以从中查询其他数据库，例如我用它来查询一些遗留的 MS Access 数据库，所以我相信你也可以查询 SQL Server。

您可以进行数据迁移、导入/导出、查看 OWA 输出以及据称还可以调试（单步执行、设置断点等）PL/SQL 代码，但我还没有尝试过。到目前为止，我对 sqlplus 命令行很好 :) 试一试，不要让与 Vista 相关的图形问题给你一个错误的印象 :)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-04T13:41:48.753

如果说开源你真的是指免费，那么[Oracle SQL Developer](http://www.oracle.com/technology/products/database/sql_developer/index.html)是免费的。但是它不是开源的。虽然它完全受支持，但我们一直在我工作的地方使用它。

如果您有兴趣，可以到[此处](http://www.oracle.com/technology/products/database/sql_developer/files/what_is_sqldev.html)获取有关其功能的良好入门参考。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2011-03-21T16:40:44.710

SQLTools 是免费且干净的轻量级客户端。 [www.sqltools.net](http://www.sqltools.net)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-04T13:38:16.423

你是指什么样的“客户”？您是指实际的驱动程序，还是只是您可以从中获取 SQL 结果的应用程序？例如，[松鼠 SQL](http://squirrel-sql.sourceforge.net/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-04T13:42:04.277

那么Oracle免费提供SQL Developer，它基本上是一个Oracle IDE - 让您浏览表，PLSQL的代码编辑器，SQL查询窗口等......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-08-17T05:35:08.480

如果您使用 mac，您可以尝试[macsequel - oracle 的本机 mac 客户端](http://www.macsequel.com)。

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2009-05-04T13:33:03.377

一个答案（对于任何平台和数据库）就是使用 ODBC。例如在 POSIX、[unixODBC](http://www.unixodbc.org/)上。Oracle 当然支持带有[自己的驱动程序](http://www.oracle.com/technology/software/tech/windows/odbc/index.html)的标准。

# javascript - 禁用 onfocus="this.blur();"

> ID：820082
> 
> 赞同：1
> 
> 时间：2009-05-04T13:25:20.183
> 
> 标签：javascript, asp.net, vb.net

我正在从弹出窗口中为我的文本框选择值，并且我使用了 onfocus="this.blur();" 对于文本框，我想在编辑按钮时禁用此功能。我不能使用只读，因为由于回发，值没有传递到服务器，请帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-04T13:31:47.890

您提到您无法使用`readonly`，因为它在 POST 回期间未提交回。实际上`readonly`属性，如

```
<input ... readonly="readonly" /> 
```

在POST 期间**提交**回服务器。`disabled`属性，如

```
<input ... disabled="disabled" /> 
```

在POST 期间**未提交支持。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T13:27:35.217

```
document.getElementById("button").readOnly = true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T13:53:03.953

您可以通过将此行放在 Page_Load 中来提交禁用的控件：

```
Page.Form.SubmitDisabledControls = true; 
```

对于 ASP.NET 2.0

# groovy - Groovy：闭包内“this”的含义

> ID：820084
> 
> 赞同：12
> 
> 时间：2009-05-04T13:26:05.033
> 
> 标签：groovy, closures

以下示例改编自“Groovy in Action”

```
class Mother {

    Closure birth() {                            
        def closure = { caller ->
            [this, caller]
        }
        return closure
    }
}                    

Mother julia = new Mother()
closure = julia.birth()                                
context = closure.call(this)                             

println context[0].class.name        // Will print the name of the Script class
assert context[1] instanceof Script 
```

根据书，`this`闭包内部的值是最外层范围（即`julia`声明的范围）。我是否正确地假设

*   `this`在闭包内部计算闭包被调用的范围？
*   在上面显示的闭包内，`this`并`caller`引用相同的范围？

谢谢，唐

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-26T09:34:34.753

" `this`" 在 Groovy 中的块中总是意味着周围的类（实例）（无论是普通的类似 Java 的块还是闭包）。“ `owner`”是闭包的一个属性，指向嵌入对象，要么是一个类（实例），然后与“ `this`”相同，要么是另一个闭包。我会完全忘记这部分的范围。所以在上面的例子中，“这个”指的是一位母亲是正确的。

现在让事情变得复杂......“this”和隐含的 this 在 Groovy 中是不一样的。所以如果你有一个闭包`{foo()}`，`{this.foo()}`你可以获得不同的结果。`this.foo()`将始终解析为嵌入类，而只会`foo()`使用 Groovy 元对象协议 (MOP) 解析，并且可以指向完全不同的东西。例如，对于标准的 Groovy 构建器，构建器可以在该闭包上设置一个委托并捕获方法调用。无论如何......这就是为什么这部分被称为动态范围。

历史背景：在 Groovy 1.0 之前，“this”是 Closure 对象本身。但是已更改，因为`this.foo()`如果构建器确实捕获了所有调用，则实际上调用变得不可能。那么您将无法再从构建器中调用本地方法。有很多尝试改变标准解决策略 - 也有很大的情感讨论。但最后，将“this”更改为引用嵌入类是解决问题的一个简单方法，并且更符合来自 Java 的人，而且如果您坚持，它可以让您轻松绕过 MOP。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-04T13:49:30.873

看第144页

> ...this 指的是闭包，而不是声明对象。在这一点上，闭包对我们起到了作用。它们将所有方法调用委托给所谓的委托对象，默认情况下，委托对象恰好是声明对象（即所有者）。这使得闭包看起来**好像**封闭的代码在*生日上下文中*运行。

对于您的问题；

> 闭包内的 this 评估为调用闭包的范围？

从书中他们说“this指的是闭包，而不是声明对象”但是从bertport和我的实验来看，似乎“this”实际上是声明对象。

无论哪种方式，您的问题的答案仍然是“否”。

> 在上面显示的闭包中， this 和 caller 指的是相同的范围？

恐怕不是。

请注意，Groovy in Action 中的第 143 页和第 144 页需要一些更正

[http://groovy.canoo.com/errata/erratum/show/5](http://groovy.canoo.com/errata/erratum/show/5)

[http://groovy.canoo.com/errata/erratum/show/8](http://groovy.canoo.com/errata/erratum/show/8)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-04T11:00:39.593

```
{
    def self = ({ owner })()
} 
```

owner：封闭对象（this 或周围的[Closure](http://groovy.codehaus.org/Closures)）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-01-27T15:36:02.190

Sake 说，“*这*是**闭包**，而不是构造闭包的对象。” 但是当我们运行这个脚本时，我们发现*这*是一个Mother，而不是一个Closure。

# regex - 如何从 Perl 正则表达式匹配中获得多个记忆？

> ID：820090
> 
> 赞同：4
> 
> 时间：2009-05-04T13:27:01.160
> 
> 标签：regex, perl, multiline

正则表达式搜索的目的是从 C++ 头文件中确定所有模板类实例。类实例可以格式化为：

```
CMyClass<int> myClassInstance;

CMyClass2<
int,
int
> myClass2Instacen; 
```

通过将整个文件加载到字符串中来执行搜索：

```
open(FILE, $file);
$string = join('',<FILE>);
close(FILE); 
```

即使类实例跨越字符串中的一行以上，以下正则表达式也用于确定类实例：

```
$search_string = "\s*\w[^typename].*<(\s*\w\s*,?\n?)*)>\s*\w+.*";
$string =~ m/$search_string/; 
```

问题是即使文件中存在更多类实例，搜索也只会返回一次命中。

是否可以通过使用这种方法从一个正则表达式反向引用变量中获得所有命中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-04T14:01:12.903

首先，如果你要 slurp 文件，你应该使用[File::Slurp](http://search.cpan.org/~drolsky/File-Slurp-9999.13/)。然后你可以这样做：

```
my $contents = read_file $file; 
```

read_file 会因错误而嘶哑。

其次，[^typename] 不仅排除字符串 'typename'，还排除包含任何这些字符的任何字符串。除此之外，对我来说，您使用的模式是否会始终匹配您希望它匹配的内容对我来说并不明显，但我现在无法对此发表评论。

最后，要一一获取文件中的所有匹配项，请在循环中使用 g 修饰符：

```
my $source = '3 5 7';

while ( $source =~ /([0-9])/g ) {
    print "$1\n";
} 
```

既然我有机会查看您的模式，我仍然不确定如何制作 [^typename]，但这里有一个示例程序，它捕获了尖括号之间的部分（因为这似乎是唯一的您在上面捕获的东西）：

```
use strict;
use warnings;

use File::Slurp;

my $pattern = qr{
    ^
    \w+                    
    <\s*((?:\w+(?:,\s*)?)+)\s*> 
    \s*
    \w+\s*;
}mx;

my $source = read_file \*DATA;

while ( $source =~ /$pattern/g ) {
    my $match = $1;
    $match =~ s/\s+/ /g;
    print "$match\n";
}

__DATA__
CMyClass<int> myClassInstance;

CMyClass2<
int,
int
> myClass2Instacen;

C:\Temp> t.pl
int
int, int 
```

现在，我怀疑您更喜欢以下内容：

```
my $pattern = qr{
    ^
    (
      \w+                    
      <\s*(?:\w+(?:,\s*)?)+\s*> 
      \s*
      \w+
    )
    \s*;
}mx; 
```

产生：

```
C:\Temp> t.pl
CMyClass<int> myClassInstance
CMyClass2< int, int > myClass2Instacen 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-04T13:49:34.553

你需要的是`\G`修饰符。它在最后一场比赛之后开始你的字符串的下一场比赛。

这是来自 Perl Doc 的文档（所以链接有问题，所以你必须复制和粘贴）：

> [http://perldoc.perl.org/perlfaq6.html#What-good-is-'%5cG'-in-a-regular-expression%3f](http://perldoc.perl.org/perlfaq6.html#What-good-is-) _

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T16:06:16.207

我会做这样的事情，

```
 #!/usr/bin/perl -w
use strict;
use warnings;

local(*F);
open(F,$ARGV[0]);
my $text = do{local($/);};
my (@hits) = $text =~ m/([a-z]{3})/gsi;

print "@hits\n"; 
```

假设您有一些文本文件，例如，

```
/home/user$ 更多 a.txt
a bb dkl jidij lksj lai suj ldifk kjdfkj bb
bb kdjfkal idjksdj fbb kjd fkjd fbb kadfjl bbb
bb bb bbd 我

```

这将打印出正则表达式中的所有命中：

```
 /home/user$ ./a.pl a.txt
dkl jid lks lai suj ldi kjd fkj kdj fka idj ksd fbb 
kjd fkj fbb kad fjl bbb bbd 
```

* * *

* * *

以及使用相同方法针对您的问题的特定解决方案可能看起来像，

```
 #!/usr/bin/perl -w                                                                                                           
use strict;
use warnings;

my $text = <<ENDTEXT;
 CMyClass<int> myClassInstance;

CMyClass2<
int,
int
> myClass2Instacen;

CMyClass35<
int,
int
    > myClass35Instacen;

ENDTEXT

my $basename = "MyClass";
my (@instances) = $text =~ m/\s*(${basename}[0-9]*\s*\<.*?                                                                
                            (?=\>\s*${basename})                                                                          
                            \>\s*${basename}.*?;)/xgsi;

for(my $i=0; $i<@instances; $i++){
    print $i."\t".$instances[$i]."\n\n";
} 
```

当然，您可能需要稍微调整正则表达式以适应数据中的所有边缘情况，但这应该是一个很好的开始。

# visual-studio-2008 - 使用 Visual Studio 复制文件？

> ID：820091
> 
> 赞同：13
> 
> 时间：2009-05-04T13:27:01.537
> 
> 标签：visual-studio-2008, file, msbuild, copy

我想创建一个 Visual Studio（我使用的是 VSTS 2008）项目，它只进行文件复制工作，更详细地说，我将向这个项目添加一些文件，并将这个项目复制文件（包含在这个项目中）复制到某个目标位置我建立项目。

任何想法如何在 VSTS 中做到这一点？

顺便说一句：我听说使用 proj 文件可以完成此类任务，但我没有找到任何适合初学者的简单易学示例。:-)

提前谢谢，乔治

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-04T13:40:20.130

您可以在 Visual Studio 中添加构建后步骤：

*   打开项目属性（这适用​​于 C# 项目，我想这也适用于 VB.NET）。
*   选择构建事件选项卡
*   例如，您可以在那里添加构建后事件命令

    `copy $(ProjectDir)\bin\* SOME_OTHER_FOLDER\*`

$(ProjectDir) 是一个宏，还有一些可用的，当您编辑命令时会显示它们。

然后，如果您查看相应的项目文件（XYZ.csproj 或 XYZ.vbproj），您可以看到在文件底部添加了一个属性组，例如：

```
 <PropertyGroup>
      <PostBuildEvent>copy $(ProjectDir)\bin\* SOME_OTHER_FOLDER\*</PostBuildEvent>
  </PropertyGroup> 
```

这就是直接编辑 MSBuild 文件时的操作方式。请注意，您无需启动 Visual Studio 即可构建和复制文件，只需将项目文件传递给 msbuild.exe。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-04T13:55:21.217

如前所述，Visual Studio . *xx* proj 文件实际上是 MSBuild 文件。因此，您可以在其中做任何 MSBuild 允许他们做的事情。我已经使用它们来定制我的构建过程。就您而言，您正在寻找的是[Copy Task](http://msdn.microsoft.com/lv-lv/library/3e54c37h(en-us).aspx)。您可以将其添加到**AfterBuild**目标中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T16:40:50.267

这个问题的其他答案往往假设您没有使用 VisualStudio，而是直接使用 MSBuild，或者有一个现有项目，您可以为其添加自定义构建步骤或构建事件（我发现构建事件类型的解决方案容易出错，因为它们不会总是在需要复制文件时复制文件）。

如果您想要一个仅进行复制的 VisualStudio 项目，您可以使用带有*Makefile*项目的库存 VisualStudio 来执行此操作。

稍微错误命名的*Makefile*项目可以做任何你可以从命令行做的事情。显然这意味着您可以创建一个只复制文件的 Makefile 项目。在 Makefile 项目的*Properties* ⇒ *Configuration Properties* ⇒ *NMake*部分中是 Build、Rebuild 和 Clean 操作的字段。这些可以用普通的旧批处理文件命令填充。在每次构建时，VisualStudio 将从适当的字段创建一个临时批处理文件并使用 cmd 执行它。***警告***您将在 64 位机器上获得 32 位 cmd 解释器，因此您需要使用神奇的*sysnative*如果您想访问 64 位 Windows 命令或 DLL，则该目录（我不确定这是否记录在任何地方，因此可能并非总是如此 - 您的批处理脚本应该能够抵抗 cmd 更改的位性。

示例批处理代码需要 64 位系统文件，但事先不知道什么 cmd 或 OS（32 位或 64 位）将运行该代码：

```
if /i "%programfiles%"=="%programfiles(x86)%" if /i not "%programfiles%"=="%programw6432%" (
    REM 32 bit cmd on 64-bit computer
    REM Use the 'sysnative' fake directory to get to 64-bit system32 files
) else (
    if /i not "%programfiles%"=="%programfiles(x86)%" if /i "%programfiles%"=="%programw6432%" (
        REM 64 bit cmd on 64-bit computer
        REM Use the 'system32' directory to get to 64-bit system32 files
    ) else (
        echo "Cannot do 64-bit on 32-bit computer"
        copy foobar
    )
) 
```

（上面的“复制 foobar”行将失败，导致构建失败。）

请注意，VisualStudio（和 MSBuild）将*始终*运行 Makefile 项目 - 它不会检查输出文件上的时间戳，而是将该作业添加到它期望的其他构建工具（nmake、cmake、make、ant、maven、 ETC。）。因为，在这种情况下，只有一个简单的复制命令，而不是一些程序检查是否执行复制，所以复制发生在每个构建中。

VisualStudio*总是*运行 makefile 项目也意味着每次按**F5**调试项目时，VisualStudio 都会用一个措辞不当的弹出对话框（如果你没有告诉它不要）来告诉你你的项目已经结束了日期，您必须重新构建它。如果您告诉 VisualStudio 不显示对话框，它只会在运行可执行文件之前执行复制而不询问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T13:33:23.160

C#/VB.NET 项目文件是[MSBuild](http://msdn.microsoft.com/en-us/library/0k6kkbsd.aspx)脚本。MSBuild 可以做任何你需要的事情......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-10-28T19:56:52.733

在 Visual Studio 2010 中，您使用[自定义生成工具](http://msdn.microsoft.com/en-us/library/dd293705.aspx)

例如，此规则将“faq.txt”复制到输出目录。

```
<ItemGroup>
  <CustomBuild Include="faq.txt">
    <Message>Copying readme...</Message>
    <Command>copy %(Identity) $(OutDir)%(Identity)</Command>
    <Outputs>$(OutDir)%(Identity)</Outputs>
  </CustomBuild>
</ItemGroup> 
```

# vb.net - VB.NET Switch 语句 GoTo 案例

> ID：820104
> 
> 赞同：28
> 
> 时间：2009-05-04T13:30:18.937
> 
> 标签：vb.net, switch-statement, goto

我正在 VB.NET 中编写一些使用 switch 语句的代码，但在其中一种情况下它需要跳转到另一个块。在 C# 中，它看起来像这样：

```
switch (parameter)
{
    case "userID":
        // does something here.
    case "packageID":
        // does something here.
    case "mvrType":
        if (otherFactor)
        {
            // does something here.
        }
        else
        {
            goto default;
        }
    default:
        // does some processing...
        break;
} 
```

但是，我不知道如何将其转换为 VB.NET。我试过这个：

```
Select Case parameter 
    Case "userID"
        ' does something here.
    Case "packageID"
        ' does something here.
    Case "mvrType" 
        If otherFactor Then 
            ' does something here. 
        Else 
            GoTo Case Else 
        End If 
    Case Else 
        ' does some processing... 
        Exit Select 
End Select 
```

但是当我这样做时，我得到一个编译器错误：“预期标识符”。“案例”下方有一条波浪线。有任何想法吗？

另外，在这种情况下使用 GoTo 语句是错误的吗？似乎任何其他方式我都必须重新编写它。

* * *

我已将代码更改为如下：

```
If otherFactor AndAlso parameter = "mvrType" Then 
    'does something here 
Else 
    ' My original "Select Case statement" here without the case for "mvrType" 
End If 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-05-04T13:42:16.087

为什么不这样做：

```
Select Case parameter     
   Case "userID"                
      ' does something here.        
   Case "packageID"                
      ' does something here.        
   Case "mvrType"                 
      If otherFactor Then                         
         ' does something here.                 
      Else                         
         ' do processing originally part of GoTo here
         Exit Select  
      End If      
End Select 
```

我不确定最后没有其他案例是否很重要，但是如果您只是将其放在 if 的 else 语句中，您似乎并不需要 go to。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-05-04T13:46:37.043

我找不到在 VB.NET 中的等价物。对于这段代码，您可能想要在 Reflector 中打开它并将输出类型更改为 VB 以获得您需要的代码的精确副本。例如，当我将以下内容放入 Reflector 时：

```
switch (args[0])
{
    case "UserID":
        Console.Write("UserID");
        break;
    case "PackageID":
        Console.Write("PackageID");
        break;
    case "MVRType":
        if (args[1] == "None")
            Console.Write("None");
        else
            goto default;
        break;
    default:
        Console.Write("Default");
        break;
} 
```

它给了我以下 VB.NET 输出。

```
Dim CS$4$0000 As String = args(0)
If (Not CS$4$0000 Is Nothing) Then
    If (CS$4$0000 = "UserID") Then
        Console.Write("UserID")
        Return
    End If
    If (CS$4$0000 = "PackageID") Then
        Console.Write("PackageID")
        Return
    End If
    If ((CS$4$0000 = "MVRType") AndAlso (args(1) = "None")) Then
        Console.Write("None")
        Return
    End If
End If
Console.Write("Default") 
```

如您所见，您可以使用 If 语句完成相同的 switch case 语句。通常我不建议这样做，因为它更难理解，但 VB.NET 似乎不支持相同的功能，并且使用 Reflector 可能是获取所需代码的最佳方法很多痛苦。

**更新：**

刚刚确认您不能在 VB.NET 中做完全相同的事情，但它确实支持一些其他有用的事情。看起来 IF 语句转换是你最好的选择，或者可能是一些重构。这是 Select...Case 的定义

[http://msdn.microsoft.com/en-us/library/cy37t14y.aspx](http://msdn.microsoft.com/en-us/library/cy37t14y.aspx)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-05-04T14:02:58.843

为什么不将默认情况重构为方法并从两个地方调用它？这应该更具可读性，并允许您以后以更有效的方式更改代码。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-06-26T19:49:19.003

在 VB.NET 中，即使其他条件不适用于 Select 参数，您也可以应用多个条件。见下文：

```
Select Case parameter 
    Case "userID"
                ' does something here.
        Case "packageID"
                ' does something here.
        Case "mvrType" And otherFactor
                ' does something here. 
        Case Else 
                ' does some processing... 
End Select 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-05-04T13:35:26.803

我不确定使用 GoTo 是否是个好主意，但如果您确实想使用它，您可以执行以下操作：

```
Select Case parameter 
    Case "userID"
        ' does something here.
    Case "packageID"
        ' does something here.
    Case "mvrType" 
        If otherFactor Then 
            ' does something here. 
        Else 
            GoTo caseElse
        End If 
    Case Else
caseElse:
        ' does some processing... 
End Select 
```

正如我所说，虽然它有效，但 GoTo 并不是一个好习惯，所以这里有一些替代解决方案：

使用其他...

```
If parameter = "userID" Then
    ' does something here.
ElseIf parameter = "packageID" Then
    ' does something here.
ElseIf parameter = "mvrType" AndAlso otherFactor Then
    ' does something here.
Else
    'does some processing...
End If 
```

使用布尔值...

```
Dim doSomething As Boolean

Select Case parameter
Case "userID"
     ' does something here.
Case "packageID"
     ' does something here.
Case "mvrType"
     If otherFactor Then
          ' does something here. 
     Else
          doSomething = True
     End If
Case Else
     doSomething = True
End Select

If doSomething Then
     ' does some processing... 
End If 
```

除了设置布尔变量，您还可以在这两种情况下直接调用方法......

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-04T13:45:28.713

你应该先声明标签使用这个：

```
 Select Case parameter 
        Case "userID"
                    ' does something here.
            Case "packageID"
                    ' does something here.
            Case "mvrType" 
                    If otherFactor Then 
                            ' does something here. 
                    Else 
                            GoTo else
                    End If 

            Case Else 
else :
                    ' does some processing... 
                    Exit Select 
    End Select 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-09-17T03:19:26.007

```
Select Case parameter 
    ' does something here. 
    ' does something here. 
    Case "userID", "packageID", "mvrType" 
        If otherFactor Then 
            ' does something here. 
        Else 
            goto case default 
        End If 
    Case Else 
        ' does some processing... 
        Exit Select 
End Select 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-29T09:39:29.193

```
Select Case parameter
    ' does something here.
    ' does something here.
    Case "userID", "packageID", "mvrType"
                ' does something here.
        If otherFactor Then
        Else
            goto case default
        End If
    Case Else
        ' does some processing...
        Exit Select
End Select 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-08-13T02:22:52.113

```
Select Case parameter 
    Case "userID"
        ' does something here.
    Case "packageID"
        ' does something here.
    Case "mvrType" 
        If otherFactor Then 
            ' does something here.
        End If 
    Case Else 
        ' does some processing... 
        Exit Select 
End Select 
```

goto有原因吗？如果它不满足 if 标准，它将根本不执行该功能并转到下一个案例。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-07-21T18:35:46.640

至少在 Visual Basic 2017 中现在有一种方法可以使用。虽然它不是最漂亮的。

`GoTo Case "[label]"`仍然`Goto [Case-label]`无法正常工作。

标签（`Number2`此处）必须在`Case`. 那是最令人失望的部分。

```
dim Value = "1"
Select Case Value
    Case "0"
       ' do nothing, example
    Case "1"
        MsgBox("one")
        GoTo Number2
    Case "2"
Number2:
        MsgBox("two")
    Case "boolean"
        MsgBox("three")
        ' just to show it won't fall through
End Select 
```

# c# - 依赖注入解析和单元测试

> ID：820105
> 
> 赞同：6
> 
> 时间：2009-05-04T13:30:26.347
> 
> 标签：c#, .net, unit-testing, dependency-injection, ioc-container

我正在尝试学习依赖注入并且在对应用程序进行单元测试时遇到了问题。

我正在编写一个控制台应用程序，容器是在 Main() 中创建和初始化的，它可以作为`get-property`in 使用`Program.Container`，所以我可以在我的应用程序的任何地方调用`Program.Container.Resolve<..>()`.

我有一个这样的 ServiceValidator 类：

```
public class ServiceValidator
{
    private readonly IConfiguration _configuration;
    private readonly IService _service;

    public ServiceValidator(IConfiguration configuration, IService service)
    {
        _configuration = configuration;
        _service = service;
    } 
```

在我使用的另一堂课中

```
ServiceValidator serviceValidator = Program.Container.Resolve<ServiceValidator>();
serviceValidator.VerifyVersion(); 
```

这是调用`Program.Container.Resolve`导致我在单元测试中出现问题的原因，因为它尚未设置。

在容器上调用 resolve 是一种不好的做法吗？我可以在其中创建 ServiceValidator 实例`Main()`并传递对象，但这似乎很愚蠢，因为它会导致对象的大量参数被传递给下一个方法。

所以我想在一个类中调用 Resolve 是可以接受的，但是必须为单元测试配置容器。我应该怎么做，我应该将容器移动到程序类之外的另一个地方吗？你会推荐什么？

如果重要的话，我正在使用 Unity 和 C#

谢谢 ：-）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-04T13:55:33.433

> 在容器上调用 resolve 是一种不好的做法吗？我可以在 Main() 中创建 ServiceValidator 实例并传递对象，但这似乎很愚蠢，因为它会导致刚刚传递给下一个方法的对象的大量参数。

当您一直使用依赖注入时，您将不需要向对象传递大量参数。每个对象的构造函数应该只具有它自己直接使用的那些依赖项作为参数——它不会知道其直接依赖项的传递依赖项。

因此，如果您有一个需要 ServiceValidator 的类 X，那么类 X 将有一个 ServiceValidator 类型的构造函数参数。然后如果某个类 Y 使用类 X，那么类 Y 将有一个类型为 X 的构造函数参数。请注意，Y对 ServiceValidator*一无所知*，因此您不需要将 ServiceValidator 从一个类传递到另一个类——它唯一的地方用于构建 X 时，通常由 DI 框架或仅在手写工厂的一个地方完成。

一些链接以获取更多信息：

*   [http://martinfowler.com/articles/injection.html](http://martinfowler.com/articles/injection.html)
*   [http://www.youtube.com/watch?v=RlfLCWKxHJ0](http://www.youtube.com/watch?v=RlfLCWKxHJ0) - 从 19:20 “关于 DI 的神话”开始回答您关于传递对象的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T13:37:01.620

我通常允许在 main 等地方调用来解决来自容器的依赖关系，尽管我仍然尝试将它们保持在最低限度。然后我要做的是在测试类的初始化方法中配置容器。对于需要调用容器的任何测试类，我都使用假实现对其进行了初始化。

不调用任何需要初始化容器的测试类然后能够忽略它并且不使用假货。我通常在这些情况下使用模拟。

我还使用[Microsoft 服务定位器](http://msdn.microsoft.com/en-us/library/cc707905.aspx)，以便我所采用的依赖项是 .NET Framework 中的某些内容，而不是特定容器。这让我可以在路上使用任何我想要的东西，甚至是自制的容器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T13:44:33.583

您可以使用静态类作为容器的初始化程序。像 BootStrapper.cs 这样的东西就可以了。然后，您可以在代码和测试中引用类方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T13:55:20.843

好吧，从技术上讲，您所做的是班级中的服务地点。

我记得不久前读过这篇文章：

[http://martinfowler.com/articles/injection.html](http://martinfowler.com/articles/injection.html)

对于我的课程，我从不尝试在其中使用 Resolve。我在需要时通过容器创建对象。对于单元测试，我要么使用一些模拟库和存根类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-04T14:24:58.883

问题在于您正在尝试测试 Main 方法。这种方法几乎不可能进行单元测试。

我认为最好不要对您的 Main 方法进行单元测试，因为：

*   现代单元测试的重点是设计
*   您应该尽量减少对单元测试中配置的依赖。可以使用冒烟或集成测试来测试配置。

# python - 使用线程和队列时如何处理异常？

> ID：820111
> 
> 赞同：10
> 
> 时间：2009-05-04T13:31:47.327
> 
> 标签：python, multithreading, exception

如果我有一个使用线程和队列的程序，我如何获得异常以停止执行？这是一个示例程序，不能用 ctrl-c 停止（基本上是从 python 文档中提取的）。

```
from threading import Thread
from Queue import Queue
from time import sleep

def do_work(item):
    sleep(0.5)
    print "working" , item

def worker():
        while True:
            item = q.get()
            do_work(item)
            q.task_done()

q = Queue()

num_worker_threads = 10

for i in range(num_worker_threads):
     t = Thread(target=worker)
    # t.setDaemon(True)
     t.start()

for item in range(1, 10000):
    q.put(item)

q.join()       # block until all tasks are done 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-04T13:34:45.073

最简单的方法是将所有工作线程作为守护线程启动，然后让你的主循环成为

```
while True:
    sleep(1) 
```

点击 Ctrl+C 会在你的主线程中抛出一个异常，当解释器退出时，所有的守护线程都会退出。这假设您不想在所有这些线程退出之前对其执行清理。

更复杂的方法是拥有一个全局`stopped` [Event](http://docs.python.org/2/library/threading.html#event-objects)：

```
stopped = Event()
def worker():
    while not stopped.is_set():
        try:
            item = q.get_nowait()
            do_work(item)
        except Empty:      # import the Empty exception from the Queue module
            stopped.wait(1) 
```

然后你的主循环可以将`stopped`事件设置为`False`当它得到一个`KeyboardInterrupt`

```
try:
    while not stopped.is_set():
        stopped.wait(1)
except KeyboardInterrupt:
    stopped.set() 
```

这可以让您的工作线程完成您想要的工作，而不是让每个工作线程都成为守护进程并在执行过程中退出。你也可以做任何你想做的清理工作。

请注意，此示例没有使用`q.join()`- 这使事情变得更加复杂，尽管您仍然可以使用它。如果你这样做了，那么你最好的选择是使用信号处理程序而不是异常来检测`KeyboardInterrupt`s。例如：

```
from signal import signal, SIGINT
def stop(signum, frame):
    stopped.set()
signal(SIGINT, stop) 
```

这使您可以定义当您按下 Ctrl+C 时会发生什么，而不会影响主循环中间的任何内容。所以你可以继续做`q.join()`而不必担心被 Ctrl+C 打断。当然，对于我上面的例子，你不需要加入，但你可能有其他的理由这样做。

# jboss - JBoss 数据库连接池

> ID：820116
> 
> 赞同：7
> 
> 时间：2009-05-04T13:33:29.257
> 
> 标签：jboss, datasource, connection-pooling

我是 jboss 的新手，我被要求将 jboss 连接池机制与现有的 Web 应用程序结合起来。考虑到正确编写了 Web 应用程序数据库层，即在不需要时正确关闭所有结果集、语句和连接，在我正确配置 jboss 数据源后，我必须在我的 Web 应用程序中进行的所有代码更改。

任何人都可以向我指出在 Web 应用程序中使用 jboss 数据源的教程或代码示例。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2011-05-04T07:08:11.470

首先按名称创建一个xml文件**`xxx-ds.xml`**并将这个文件放在`server/default/deploy/xxx-ds.xml`

```
<datasources>
<local-tx-datasource>
<jndi-name>/jdbc/Exp</jndi-name>
<type-mapping>SQL</type-mapping>
<connection-url>jdbc:microsoft:sqlserver://          </connection-url>
<driver-class>com.microsoft.jdbc.sqlserver.SQLServerDriver</driver-class>
<user-name></user-name>
<password></password>
<min-pool-size>5</min-pool-size>
<max-pool-size>1000</max-pool-size>
</local-tx-datasource>
</datasources> 
```

**`jboss-web.xml`**

```
<jboss-web>
<!--  <security-domain flushOnSessionInvalidation="false"/>-->
<!--  <context-root>/BSI</context-root>-->
  <resource-ref>
        <description>Database connection resource</description>
        <res-ref-name>jdbc/Exp</res-ref-name>
        <res-type>javax.sql.DataSource</res-type>
        <jndi-name>java:/jdbc/Exp</jndi-name>
        <res-auth>Container</res-auth>
    </resource-ref>
</jboss-web> 
```

**`web.xml`**

```
<resource-ref>
    <description>Database connection resource</description>   
    <res-ref-name>jdbc/Exp</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref> 
```

现在在你的`.java`文件中

```
javax.naming.Context ctx1 = new javax.naming.InitialContext();
javax.sql.DataSource ds = (javax.sql.DataSource) ctx1.lookup("java:comp/env/jdbc/Exp");
con = ds.getConnection(); 
```

***** 确保资源引用名称在所有地方都应该相同

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-04T13:38:32.973

JBoss 中的池全部在 DataSource 配置中处理。[这](http://www.jboss.org/community/docs/DOC-9328)是操作方法。Web 应用程序必须对数据源执行 JNDI 查找以获取数据库连接，而不是执行直接 JDBC URL，然后您将进行池化。

不过，交易是另一回事。

编辑：为了回应您关于这如何影响代码的评论，这就是它的样子：

```
String jndiPath = "java:DataSourceJNDIName"; //The exact prefix here has a lot to do with clustering, etc., but if you are using one JBoss instance standalone, this works.
Context ctx = new InitialContext();
DataSource ds = (DataSource) PortableRemoteObject.narrow(ctx.lookup(jndiPath), DataSource.class);
Connection c = ds.getConnection(); 
```

从技术上讲，PortableRemoteObject.narrow 在 JBoss（无论如何是 4.2.2）单服务器配置中肯定不是必需的，但它是更合适的 J2EE 标准代码，因为一般应用程序服务器不必返回正确类型的对象只是为了做一个 Context.lookup。

以上不包括资源利用和错误处理问题。您应该在完成后关闭该 Context 对象，当然还有数据库连接，尽管如果您忘记关闭数据库连接并且事务结束，JBoss 会对您大喊大叫，并为您关闭它。

无论如何，该 Connection 对象与 DriverManager.getConnection(url); 一样可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T17:55:58.253

你不必改变任何东西。当您选择正确类型的数据源（local-tx-datasource / xa-datasource）时，连接处理和 TX 将为您完成。在 $JBoss/docs/examples/jca 中，您将找到几乎每个数据库的模板，您可以重复使用这些模板。

如果您使用的是 XA，则需要配置 Tx-recovery。请参阅有关操作方法的帖子：http: [//management-platform.blogspot.com/2008/11/transaction-recovery-in-jbossas.html](http://management-platform.blogspot.com/2008/11/transaction-recovery-in-jbossas.html)（好吧，也许不是独立模式下的操作方法，但在结合 Jopr 源代码）。

# java - 使用属性类型信息 Hibernate NamingStrategy

> ID：820118
> 
> 赞同：2
> 
> 时间：2009-05-04T13:33:54.187
> 
> 标签：java, hibernate

我正在为我们的模式编写一个 Hibernate NamingStrategy。

我们的旧架构（出于某种原因！）在列名中包含类型信息。例如：

```
strproperty
intcustomer 
```

我正在从 NamingStrategy 接口实现以下方法：

```
public String propertyToColumnName(String propertyName) 
```

我想知道上面属性的 Java 类型，这样我就可以实现我们的命名策略：

```
public String getProperty() {
    return this.property()
} 
```

会自动映射到 strproperty。

出于争论的原因，说这是我设想的工作方式（我知道这种方法不存在）：

```
public String propertyToColumnName(Object propertyName, Class propertyType) {
    if (propertyType instanceof String) {
        return "str" + propertyName;
    } else {
        return "int" + propertyName;
    }
} 
```

有没有办法从 Hibernate 的命名约定挂钩中确定 Java 属性的类型？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T15:35:57.793

我认为界面的设计没有考虑到这一点 - 乍一看，似乎没有办法知道**propertyToColumnName()**的调用者正在查询什么类

但是，我注意到**propertyToColumnName()**的 javadocs 说它返回“...*属性路径表达式*的列名”。可能值得研究一下 Hibernate 将什么 String 传递给此方法：如果它实际上完全符合类名，那么您可以解析出类名并使用该类的反射来确定属性类型。

或者，不要忘记您始终可以直接在映射文件中指定列名（或者在您的注释中，如果您使用它们，我猜）：

**<property name="blah" column="intblah"/>**

这可能是一种更简单的方法。

# wpf - 为什么 ItemsControl 在其父对象获得焦点时显示焦点矩形？

> ID：820125
> 
> 赞同：1
> 
> 时间：2009-05-04T13:35:21.250
> 
> 标签：wpf, focus, itemscontrol, focusvisualstyle

当 WPF 的 ItemsControl 认为它有焦点并且用户按下 Tab 或 Alt 时，它会显示一个焦点矩形。

但我最近有一个 ItemsControl 显示一个焦点矩形，即使它*没有焦点*——它的一个父项有焦点。ItemsControl 位于 UserControl 内部，而后者位于另一个具有焦点的 UserControl*内部*。像这样的东西：

```
<!-- UserControl1.xaml; this is the control that has focus -->
<UserControl x:Class="UserControl1" Focusable="True" ...>
    <UserControl2/>
</UserControl>

<!-- UserControl2.xaml -->
<UserControl x:Class="UserControl2">
    <ItemsControl .../>
</UserControl> 
```

或者，要直观地显示嵌套：

```
+---------------------------------------------------+
| UserControl1 (has focus)                          |
|                                                   |
| +-----------------------------------------------+ |
| | UserControl2                                  | |
| |                                               | |
| | +-------------------------------------------+ | |
| | | ItemsControl (shows focus rectangle)      | | | 
```

我花了一段时间（还有一个[StackOverflow 问题](https://stackoverflow.com/questions/818566/remove-focus-rectangle-on-a-usercontrol)）来弄清楚焦点矩形的来源，因为我从没想过没有焦点的控件会显示焦点矩形。

我仍在学习如何使用 WPF，显然我还不够了解，否则这不会让我感到困惑。两个问题可以帮助我理解：

1.  *为什么*ItemsControl 实际上没有焦点，但它的父控件之一却显示焦点矩形？这个功能的原因是什么？（我确定有一个——可能与模板或可视化树有关？——我只是对 WPF 机制和哲学还没有足够深入的了解。）
2.  *这是如何*工作的？ItemsControl 使用什么机制来决定它应该显示一个焦点矩形？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T19:26:46.157

您确定 ItemsControl 没有焦点吗？如果它正在绘制焦点矩形，它应该。仅仅因为视觉树中较高的控件具有焦点，并不意味着它的一个子控件也没有焦点。要了解原因，请确保您已了解 WPF 中“逻辑焦点”和“键盘焦点”之间的区别。MSDN上有[详尽的解释](http://msdn.microsoft.com/en-us/library/aa969768.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T22:17:50.100

我认为这是设计使然。我的理解是焦点是从父控件继承的，并且沿着视觉树向下工作。尝试检查 itemscontrol 父项的视觉样式，然后检查 itemscontrol 本身以查看 xaml 的可视化树发生了什么。这应该会揭示一些关于正在发生的事情的线索。您也可以尝试在谷歌和其他一些网站上搜索关于焦点和项目控制等的信息。可能还有一些其他信息提供了更多关于所有工作原理的详细信息，这比我如何解释它更清楚。如果您单击项目控件，然后单击其他位置，然后单击父项，会发生什么情况？重心有什么变化吗？您还可以尝试制作一个覆盖焦点的自定义类，并使其控件不会以相同的方式显示焦点。应该（相当）容易做到。

# iphone - App ID 和 Provisioning Profiles 的意义何在？

> ID：820127
> 
> 赞同：2
> 
> 时间：2009-05-04T13:35:29.860
> 
> 标签：iphone

据我了解，App ID 是单个应用程序唯一的代码。每次我开始开发一个新的应用程序时，我都必须创建一个新的 App ID。

但是我不明白那个“配置文件”是怎么回事。每个应用程序都需要一个吗？那个有什么用途？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T13:43:13.027

通过验证应用程序及其来源的方法来保护最终用户。它还用作控制开发的集中式系统。在 Windows 上，大多数应用程序为此使用 GUID，但它们没有任何关于它们的集中信息。苹果确实做到了，这有时会很痛苦，但最终它是一种有效的努力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T15:45:34.353

配置文件包含允许运行或调试代码的设备列表。一切都通过数字签名进行验证，最终让 Apple 控制分发。这就是为什么您需要越狱才能从 App Store 以外的来源获取应用程序的原因。

# c# - 使用 AddRange 添加子类的集合

> ID：820134
> 
> 赞同：1
> 
> 时间：2009-05-04T13:36:41.513
> 
> 标签：c#, .net-3.5, inheritance, iteration

如果我有这两个类：

```
class A {}
class B : A {} 
```

我创建了一个 List<A> 但我想通过调用 List<A>.AddRange(List<B>) 添加一个 List<B> 但编译器拒绝：

```
Argument '1': cannot convert from 'System.Collections.Generic.List<A>'
to 'System.Collections.Generic.IEnumerable<B> 
```

我完全理解，因为 IEnumerable<B> 不是从 IEnumerable<A> 继承的，它的泛型类型具有继承性。

我的解决方案是枚举 List<B> 并单独添加项目，因为 List<A>.Add(A item) 将与 B 项目一起使用：

```
foreach(B item in listOfBItems)
{
    listOfAItems.Add(item);
} 
```

然而，这是相当不具表现力的，因为我想要的只是 AddRange。

我可以使用

```
List<B>.ConvertAll<A>(delegate(B item) {return (A)item;}); 
```

但这不必要地令人费解并且用词不当，因为我没有转换，我正在铸造 .

**问题**：如果我要编写自己的类似 List 的集合，我会添加什么方法来允许我将 B 的集合复制到 A 的集合中，作为类似于 List<A>.AddRange(List <B>)**并**保持最大的类型安全性。（最多我的意思是参数既是集合又是类型继承检查。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-04T16:09:46.310

事实上，泛型类型现在不是变体。在 C# 4.0 中，*如果 B 可通过引用转换转换为 A*`<B` ，则 IEnumerable > 将转换为 IEnumerable `<A`> 。有关此功能设计的一些详细信息，请参见：

 *[http://blogs.msdn.com/ericlippert/archive/tags/Covariance+and+Contravariance/default.aspx](http://blogs.msdn.com/ericlippert/archive/tags/Covariance+and+Contravariance/default.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T13:39:16.607

不幸的是，这不起作用，因为 .net 中的泛型（尚）不支持协方差。

但是，您可以创建一个小的帮助方法或类来克服这个问题。

如果您实现自己的列表类，则可以使用附加的通用参数添加协方差：

```
class MyList<T> {
    void AddRange<U>(IEnumerable<U> items) where U: T {
        foreach (U item in items) {
            Add(item);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T13:41:40.220

你不能这样做：

```
listOfAItems.AddRange(listOfBItems.Cast<A>()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-17T13:09:40.810

我能够使用 LINQ 实现这一目标......

```
listOfAItems.AddRange(listOfBItems.Cast<A>()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-03T08:01:11.000

如果您发现自己处于泛型类型没有变体的情况下，以下扩展方法可以让您的生活更轻松：

```
public static void AddRange<TList,TOther>(this List<TList> list, IEnumerable<TOther> collection) where TOther: TList {
    foreach(TOther e in collection) {
        list.Add(e);
    }
} 
```

不必从`List<T>`某个实用程序类中派生或拥有此方法，而是将其用作扩展方法可以简化使用。您还可以从推理中获利，因此这个以前无效的调用将在没有任何修改的情况下变为有效：

```
List<Animal> animals;
List<Dog> dogs;
animals.AddRange(dogs); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-04T13:39:28.947

我唯一能想到的就是这个

```
public class MyList<T> : List<T>
{
    public void AddRange<Tother>(IEnumerable<Tother> col)
        where Tother: T
    {    
        foreach (Tother item in col)
        {
            this.Add(item);
        }
    }
} 
```

调用它意味着执行 MyList<A>.AddRange<B>(MyList<B>)。如果参数不可枚举或者类型继承没有成功，则此操作失败，因此它满足了我的问题的最大类型安全要求。

# iphone - 如何定位特定的 iPhone 版本？

> ID：820142
> 
> 赞同：36
> 
> 时间：2009-05-04T13:38:33.537
> 
> 标签：iphone

我有一些我只想在最新的 iPhone SDK (3.0) 上执行的代码，但是我似乎无法找到一种只针对 3.0 并忽略 2.2.1 等的方法。有一个 ifdef 语句，但它似乎涵盖了整个 iPhone：

```
#if TARGET_OS_IPHONE 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2009-05-05T04:04:30.007

您可以使用此 #define 更改为每个 SDK 构建的内容...

```
#if __IPHONE_OS_VERSION_MIN_REQUIRED > __IPHONE_2_2
// iPhone 3.0 code here
#endif 
```

并在运行时执行此操作以运行 3.0 及更高版本的代码：

```
float version = [[[UIDevice currentDevice] systemVersion] floatValue];
if (version >= 3.0)
    {
    // iPhone 3.0 code here
    } 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2011-03-27T22:32:16.863

我会小心 floatValue 返回结果：

```
[[[UIDevice currentDevice] systemVersion] floatValue] 
```

与任何花车一样，它可能并不完全符合您的期望。在我的系统上运行上述程序时，我很困惑为什么我的条件语句没有执行，我注意到返回的值是：

```
3.20000005 
```

在这里推荐解决方案：[如何检查 iOS 版本？](https://stackoverflow.com/questions/3339722/check-iphone-ios-version)

摘抄：

```
NSComparisonResult order = [[UIDevice currentDevice].systemVersion compare: @"3.1.3" options: NSNumericSearch];
if (order == NSOrderedSame || order == NSOrderedDescending) {
    // OS version >= 3.1.3
} else {
    // OS version < 3.1.3
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2010-11-22T17:36:28.510

更新：当使用 Xcode 4 在 iPhone (4.3.1) 上构建和运行时，这似乎不再适合我。另外，我得到`__IPHONE_OS_VERSION_MIN_REQUIRED = 30200`.

[*iPhone Developer's Cookbook*](https://rads.stackoverflow.com/amzn/click/com/0321659570)说你也可以这样做：

```
#ifdef _USE_OS_4_OR_LATER
    // code to compile for 4.0 or later
#else
    // code to compile for pre-4.0
#endif 
```

而且，它似乎对我有用。:)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-09-13T23:16:58.760

很确定你也可以这样做：

```
#ifdef __IPHONE_3_0
// 3.0 code here
#endif 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-04T13:47:06.060

它在 Xcode 的构建选项中。左上角的下拉菜单显示“myapp - 3.0 | Debug”之类的内容，选择您想要的构建，然后就完成了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-04T16:28:39.057

[使用从这个答案](https://stackoverflow.com/questions/146986/what-defines-are-setup-by-xcode-when-compiling-for-iphone)添加 OTHER_CFLAGS = "-g3 -save-temps -dD" 的技巧，我发现定义 __IPHONE_OS_VERSION_MIN_REQUIRED 20000 的项目针对 2.2.1。也许这会奏效？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-04T16:39:06.300

我相当肯定对 OP 的评论总结了这一点。你不能。因为编译时指令不能做出运行时决定。在 Xcode 中，如果您以 3.0 为目标，它将无法在 2.2.1 手机上运行。如果您以 2.2.1 为目标，它将无法编译，因为那里有 3.0 特定代码。

唯一真正的解决方案是您的应用程序的两个版本，其中一个是为 3.0 编译的，另一个是为 2.2.1 编译的。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2009-08-03T13:59:14.623

好吧，我的两分钱：

如何使用最新版本（例如 3.0）构建您的应用程序，以便您可以利用所有新的和酷的 API，并将部署目标指定为您想要支持的最新版本，以便那些没有花时间升级他们的设备的人仍将运行您的应用程序。在这种情况下，如上所示，您需要检查 SDK 的最新版本并提供备用功能以使您的应用程序向后兼容。

问候，哈迪克

# asp.net-mvc - 是否可以使用 MS Visual C# 2008 Express Edition 和 IIS 开发 ASP.NET MVC？

> ID：820148
> 
> 赞同：3
> 
> 时间：2009-05-04T13:40:15.357
> 
> 标签：asp.net-mvc, visual-studio-2008, iis

是否可以使用 MS Visual C# 2008 Express Edition 和 IIS 开发 ASP.NET MVC？

该[教程](http://www.asp.net/learn/mvc/tutorial-21-cs.aspx)指出需要“Visual Studio 2008 或 Visual Web Developer 2008 Express”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-04T13:52:34.547

如果没有大杂烩，您无法使用 Visual C# 2008 Express 开发 ASP.NET（MVC 或其他）。C# Express 主要用于 Windows 应用程序。

您*可以*下载并安装 Visual Web Developer 2008 Express。此版本适用于 ASP.NET 开发人员（使用 C# 或 VB.NET）。与 Standard 或 Professional 不同，Express 的功能分为 4 个单独的包 - C# Express 用于 C# 桌面开发，VB.NET Express 用于 VB.NET 桌面开发，C++ Express 用于 C++ 桌面开发，以及 Web Developer Express 用于任何类型的ASP.NET 开发。您可以在同一台机器上下载并安装所有这 4 个（它们甚至应该共享同一个 MSDN Express 副本）。

如果您想在一个 IDE 中全部使用，则需要为 Standard 或 Professional 付费。

哦，只要确保你下载了 Web Developer 2008 Express 的 SP1 版本，尝试在 Express 版本上安装 SP1 真的很烦人（或者至少如果你在同一台机器上有一些其他版本的 VS），而且你需要 SP1 来安装 MVC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T13:44:51.650

这绝对是可能的。我还没有真正使用过 Express 版本，无法知道在一个或另一个版本中什么更容易或更难，但 Web Developer 版本也是免费的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T14:12:42.033

一个简单的方法是获取[Web Platform Installer](http://www.microsoft.com/web/downloads/platform.aspx)。它安装了您使用 Web 开发所需的一切。有些人声称它只是 vista，但我可以用它在我的华硕上网本上的 XP HOME 上安装它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T13:44:30.060

关于运行 ASP.NET MVC 项目，您是什么意思？要运行它，您需要一个 Web 服务器而不是 Visual Studio。对于开发，您可以在 C# Express 中开发一个将在 ASP.MVC 应用程序中使用的类库，但项目模板仅适用于 Web 开发产品线（Visual Web Developer 或完整的 VS）

更新以反映 OP 编辑​​：要*有效地*开发应用程序，您需要 Visual Web Dev 或 VS。不使用 VWD Express 没有任何意义，因为它是免费的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-04T13:49:33.120

是的。我已经安装了一些预览版。你只是没有得到 MS 测试。

编辑：但是，那是 VS Express Web Developer Edition。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-04T14:14:26.413

至少需要 Visual Web Developer 2008 Express Edition SP1。如果您不在团队中工作，我认为这对于 ASP.NET MVC 开发来说已经足够了。有很多很棒的 3d 方测试框架 - 您不仅限于 MS Test。

# sql - 如何在 SQL Server 中将 hh:mm:ss 转换为 hh:mm？

> ID：820155
> 
> 赞同：15
> 
> 时间：2009-05-04T13:42:24.853
> 
> 标签：sql, sql-server, sql-server-2005

如何在 SQL Server 中将 hh:mm:ss 转换为 hh:mm？

```
select Count(Page) as VisitingCount,Page,CONVERT(VARCHAR(8),Date, 108) from scr_SecuristLog   
where Date between '2009-05-04 00:00:00' and '2009-05-06 14:58'  
and [user] in(select USERNAME             
    from scr_CustomerAuthorities )  
group by Page,Date order by [VisitingCount] asc 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-05-04T13:50:49.293

`CONVERT(VARCHAR(5),Date, 108)`-- 只获取`HH:mm`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-04T13:49:03.153

一般来说，时间戳的集合不是[**有序的**](http://en.wikipedia.org/wiki/Well_ordered_set)，这意味着您无法获得时间部分最多为 的“最后一个”时间戳`2009-05-06 14:58`。

在`SQL Server`中，将日期时间的时间部分保留为`1/300`午夜后的秒小数，此“最后”时间戳将为，但不保证与其他存储方法`2009-05-06 14:58:59.997`的未来版本兼容。`TIMESTAMP`

这意味着您需要将您的`BETWEEN`条件分成两个条件，其中一个是`strict less`比下一分钟：

```
select Count(Page) as VisitingCount,Page,CONVERT(VARCHAR(8),Date, 108) from scr_SecuristLog   
where Date >= '2009-05-04 00:00:00'
      AND Date < DATEADD(minute, 1, '2009-05-06 14:58')
and [user] in(select USERNAME             
    from scr_CustomerAuthorities )  
group by Page,Date order by [VisitingCount] asc 
```

该解决方案将有效地使用索引`Date`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-05-04T13:50:33.163

```
SELECT Convert(varchar(5), GetDate(), 108) 
```

使用 varchar(5) 将自动截断日期以删除秒数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-04T13:49:37.720

我认为没有内置功能；通常做这样的事情

```
SET @time = '07:45'
SET @date = CONVERT(DATETIME,@time)
SELECT @date

SELECT LEFT(CONVERT(VARCHAR,@date,108),5) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-04T13:49:10.920

对于这种特定需求，您应该使用[Quassnoi 的回答](https://stackoverflow.com/questions/820155/how-do-i-convert-hhmmss-to-hhmm-in-sql-server/820174#820174)所指出的 between 方法。但是，一般问题可以通过以下方式解决：

```
select dateadd(second, -datepart(second, @date), @date) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-04T13:58:04.613

一种方法是使用 RIGHT() 函数来裁剪日期。就像是：

```
RIGHT(CONVERT(VARCHAR(8),Date, 108),5) 
```

这仅在字符数恒定时才有效，例如，如果适用，则前导零。（抱歉这里没有 SQL Server 来测试）。

更好的方法是使用 T-SQL datepart 函数拆分然后重新连接日期部分，这样：

```
DARTPART("hh", CONVERT(VARCHAR(8),Date, 108))+":"+DARTPART("mi", CONVERT(VARCHAR(8),Date, 108)) 
```

**参考：**

[http://msdn.microsoft.com/en-us/library/ms174420.aspx](http://msdn.microsoft.com/en-us/library/ms174420.aspx)
[http://msdn.microsoft.com/en-us/library/ms187928.aspx](http://msdn.microsoft.com/en-us/library/ms187928.aspx)
[http://msdn.microsoft.com/en-我们/图书馆/ms177532.aspx](http://msdn.microsoft.com/en-us/library/ms177532.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-27T11:33:08.110

要从今天的日期获取 hh:mm 格式：

```
select getdate()

select convert(varchar(5),getdate(),108) 
```

要从表数据中的任何日期时间列获取 hh:mm 格式：

```
select date_time_column_name from table_name where column_name = 'any column data name'

select convert(varchar(5),date_time_column_name,108) from table_name
where column_name = 'any column data name'

select creationdate from employee where Name = 'Satya'

select convert(varchar(5),creationdate,108) from employee 
where Name = 'Satya' 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-19T16:42:50.103

```
SELECT CAST(CAST(GETDATE() AS Time(0)) AS VARCHAR(5)) 
```

# jquery - JQuery：动态添加 5 个 id（而不是类）

> ID：820170
> 
> 赞同：0
> 
> 时间：2009-05-04T13:47:27.850
> 
> 标签：jquery, colors, getelementbyid, addclass

我正在处理这种情况：

*   我有一个以 id 为目标的彩色动画脚本（不是 JQuery，而是纯 javascript）
*   然后我有一个没有 id 的动态列表：'ul' somePHP throwing list items '/ul'
*   最后我有 JQuery 本身（我将使用它来动态添加几个 id 到列表项：但我仍然不知道如何）

我意识到我无法使用 JQuery 将单个类添加到列表项中，因为颜色插件仅按 id 搜索（它使用 getElementById，它与类不平行）。

我必须排除 addClass JQ 函数，它很容易投入使用。

只有当我可以在列表中插入 id、5 个明确定义的 id 并稍后在外部化颜色插件中给出一些指令以影响它们时，该脚本才会起作用：

```
<ul>
     <li><a href="" id="ontheflyone">pulled from the DB</a></li>
     <li><a href="" id="ontheflytwo">pulled from the DB</a></li>
     <li><a href="" id="ontheflythree">pulled from the DB</a></li>
     <li><a href="" id="ontheflyfour">pulled from the DB</a></li>
     <li><a href="" id="ontheflyfive">pulled from the DB</a></li>
</ul> 
```

然后，说明：

```
document.getElementById(’id’).onmouseover = function() { 'ontheflyone','text','$color1' };
document.getElementById(’id’).onmouseout = function() { 'ontheflyone','text','$color2'};

document.getElementById(’id’).onmouseover = function() { 'ontheflytwo','text','$color1' };
document.getElementById(’id’).onmouseout = function() { 'ontheflytwo','text','$color2'};

etc. 
```

我可以更改插件本身的 javascript，但我认为使用 JQuery 在我的 html 中以某种方式添加 id 会更容易。

颜色插件是由[Michael Leigeber](http://www.leigeber.com/2008/05/javascript-color-fading-script/)编写的一段很棒的代码， 我复制如下：

```
// main function to process the fade request //
function colorFade(id,element,start,end,steps,speed) {
  var startrgb,endrgb,er,eg,eb,step,rint,gint,bint,step;
  var target = document.getElementById(id);
  steps = steps || 20;
  speed = speed || 20;
  clearInterval(target.timer);
  endrgb = colorConv(end);
  er = endrgb[0];
  eg = endrgb[1];
  eb = endrgb[2];
  if(!target.r) {
    startrgb = colorConv(start);
    r = startrgb[0];
    g = startrgb[1];
    b = startrgb[2];
    target.r = r;
    target.g = g;
    target.b = b;
  }
  rint = Math.round(Math.abs(target.r-er)/steps);
  gint = Math.round(Math.abs(target.g-eg)/steps);
  bint = Math.round(Math.abs(target.b-eb)/steps);
  if(rint == 0) { rint = 1 }
  if(gint == 0) { gint = 1 }
  if(bint == 0) { bint = 1 }
  target.step = 1;
  target.timer = setInterval( function() { animateColor(id,element,steps,er,eg,eb,rint,gint,bint) }, speed);
}

// incrementally close the gap between the two colors //
function animateColor(id,element,steps,er,eg,eb,rint,gint,bint) {
  var target = document.getElementById(id);
  var color;
  if(target.step <= steps) {
    var r = target.r;
    var g = target.g;
    var b = target.b;
    if(r >= er) {
      r = r - rint;
    } else {
      r = parseInt(r) + parseInt(rint);
    }
    if(g >= eg) {
      g = g - gint;
    } else {
      g = parseInt(g) + parseInt(gint);
    }
    if(b >= eb) {
      b = b - bint;
    } else {
      b = parseInt(b) + parseInt(bint);
    }
    color = 'rgb(' + r + ',' + g + ',' + b + ')';
    if(element == 'background') {
      target.style.backgroundColor = color;
    } else if(element == 'border') {
      target.style.borderColor = color;
    } else {
      target.style.color = color;
    }
    target.r = r;
    target.g = g;
    target.b = b;
    target.step = target.step + 1;
  } else {
    clearInterval(target.timer);
    color = 'rgb(' + er + ',' + eg + ',' + eb + ')';
    if(element == 'background') {
      target.style.backgroundColor = color;
    } else if(element == 'border') {
      target.style.borderColor = color;
    } else {
      target.style.color = color;
    }
  }
}

// convert the color to rgb from hex //
function colorConv(color) {
  var rgb = [parseInt(color.substring(0,2),16), 
    parseInt(color.substring(2,4),16), 
    parseInt(color.substring(4,6),16)];
  return rgb;
} 
```

所以，如果有人能告诉我如何即时添加这些 id，或者，也许，如何将 javascript 更改为目标类，一百万谢谢，

非常感谢，

简

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-04T14:07:34.527

所以你有一个普通的`<ul></ul>`并想给`<li>`它一个唯一的ID？试试 jQuery 命令["each"](http://docs.jquery.com/Core/each)：

```
$("li").each(function(index, element){$(element).attr("id", index);}); 
```

这将遍历所有`<li>`元素并将每个元素的数字索引（在 jQuery 找到的元素数组中）分配为“id”属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T13:59:52.703

如果您使用的是 jquery，您可以使用这样的语法按类获取元素（假设 css 类称为“className”：

```
$(".className").mouseover(function(){
  alert("something");
}); 
```

用 id 做同样的事情，你可以在 jquery 中这样做：

```
$("#idVal").mouseover(function(){
  alert("something");
}); 
```

# java - 如何在忽略转义逗号的同时拆分逗号分隔的字符串？

> ID：820172
> 
> 赞同：32
> 
> 时间：2009-05-04T13:48:40.063
> 
> 标签：java, regex, csv

我需要编写 StringUtils.commaDelimitedListToStringArray 函数的扩展版本，该函数获取一个附加参数：转义字符。

所以打电话给我：

```
commaDelimitedListToStringArray("test,test\\,test\\,test,test", "\\") 
```

应该返回：

```
["test", "test,test,test", "test"] 
```

我目前的尝试是使用 String.split() 使用正则表达式拆分字符串：

```
String[] array = str.split("[^\\\\],"); 
```

但是返回的数组是：

```
["tes", "test\,test\,tes", "test"] 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-05-04T13:58:05.720

正则表达式

```
[^\\], 
```

意思是“匹配一个不是反斜杠的字符，后跟一个逗号” - 这就是为什么模式`t,`匹配的原因，因为`t`是一个不是反斜杠的字符。

我认为您需要使用某种[否定的lookbehind](http://www.regular-expressions.info/lookaround.html)，以捕获 a前面没有`,`a`\`而不捕获前面的字符，例如

```
(?<!\\), 
```

（顺便说一句，请注意，我故意没有双重转义反斜杠以使其更具可读性）

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2009-05-04T13:57:09.513

尝试：

```
String array[] = str.split("(?<!\\\\),"); 
```

基本上这是在逗号上拆分，除非逗号前面有两个反斜杠。这称为[负后视零宽度断言](http://www.regular-expressions.info/lookaround.html)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-04T19:32:21.360

为了将来参考，这是我最终得到的完整方法：

```
public static String[] commaDelimitedListToStringArray(String str, String escapeChar) {
    // these characters need to be escaped in a regular expression
    String regularExpressionSpecialChars = "/.*+?|()[]{}\\";

    String escapedEscapeChar = escapeChar;

    // if the escape char for our comma separated list needs to be escaped 
    // for the regular expression, escape it using the \ char
    if(regularExpressionSpecialChars.indexOf(escapeChar) != -1) 
        escapedEscapeChar = "\\" + escapeChar;

    // see http://stackoverflow.com/questions/820172/how-to-split-a-comma-separated-string-while-ignoring-escaped-commas
    String[] temp = str.split("(?<!" + escapedEscapeChar + "),", -1);

    // remove the escapeChar for the end result
    String[] result = new String[temp.length];
    for(int i=0; i<temp.length; i++) {
        result[i] = temp[i].replaceAll(escapedEscapeChar + ",", ",");
    }

    return result;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-12T13:04:37.877

正如 matt b 所说，`[^\\],`将逗号前面的字符解释为分隔符的一部分。

```
"test\\\\\\,test\\\\,test\\,test,test"
  -(split)->
["test\\\\\\,test\\\\,test\\,tes" , "test"] 
```

正如 drvdijk 所说，`(?<!\\),`会误解转义的反斜杠。

```
"test\\\\\\,test\\\\,test\\,test,test"
  -(split)->
["test\\\\\\,test\\\\,test\\,test" , "test"]
  -(unescape commas)->
["test\\\\,test\\,test,test" , "test"] 
```

我希望能够逃脱反斜杠以及......

```
"test\\\\\\,test\\\\,test\\,test,test"
  -(split)->
["test\\\\\\,test\\\\" , "test\\,test" , "test"]
  -(unescape commas and backslashes)->
["test\\,test\\" , "test,test" , "test"] 
```

drvdijk 建议`(?<=(?<!\\\\)(\\\\\\\\){0,100}),`这对于以最多 100 个反斜杠结尾的元素的列表效果很好。这已经足够了......但为什么要限制？有没有更有效的方法（不是向后看贪婪）？无效字符串怎么办？

我搜索了一段时间以寻找通用解决方案，然后我自己编写了这个东西......这个想法是按照与列表元素匹配的模式进行拆分（而不是匹配分隔符）。

我的回答没有将转义字符作为参数。

```
public static List<String> commaDelimitedListStringToStringList(String list) {
    // Check the validity of the list
    // ex: "te\\st" is not valid, backslash should be escaped
    if (!list.matches("^(([^\\\\,]|\\\\,|\\\\\\\\)*(,|$))+")) {
        // Could also raise an exception
        return null;
    }
    // Matcher for the list elements
    Matcher matcher = Pattern
            .compile("(?<=(^|,))([^\\\\,]|\\\\,|\\\\\\\\)*(?=(,|$))")
            .matcher(list);
    ArrayList<String> result = new ArrayList<String>();
    while (matcher.find()) {
        // Unescape the list element
        result.add(matcher.group().replaceAll("\\\\([\\\\,])", "$1"));
    }
    return result;
} 
```

模式描述（未转义）：

`(?<=(^|,))`forward 是字符串的开头或`,`

`([^\\,]|\\,|\\\\)*``\,`由 或 组成的元素`\\`既不是`\`也不是`,`

`(?=(,|$))`后面是字符串的结尾或`,`

图案可以简化。

即使使用 3 次解析 ( `matches`++ `find`) `replaceAll`，这种方法似乎也比 drvdijk 建议的方法更快。它仍然可以通过编写特定的解析器来优化。

另外，如果只有一个字符是特殊的，那么需要一个转义字符，它可以简单地加倍......

```
public static List<String> commaDelimitedListStringToStringList2(String list) {
    if (!list.matches("^(([^,]|,,)*(,|$))+")) {
        return null;
    }
    Matcher matcher = Pattern.compile("(?<=(^|,))([^,]|,,)*(?=(,|$))")
                    .matcher(list);
    ArrayList<String> result = new ArrayList<String>();
    while (matcher.find()) {
        result.add(matcher.group().replaceAll(",,", ","));
    }
    return result;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-14T17:25:24.377

`split(/(?<!\\),/g)`为我工作，但接受的答案没有

```
> var x = "test,test\,test\,test,test"
undefined
> x.split(/(?<!\\),/g)
[ 'test', 'test\\,test\\,test', 'test' ]
> x.split("(?<!\\\\),")
[ 'test,test\\,test\\,test,test' ] 
```

# php - 引用 PHP 数组中的元素

> ID：820173
> 
> 赞同：2
> 
> 时间：2009-05-04T13:48:56.537
> 
> 标签：php, arrays

答案不是 $array[0];

我的阵列设置如下

```
$array = array();
$array[7] =  37;
$array[19] = 98;
$array[42] = 22;
$array[68] = 14; 
```

我正在对数组进行排序，并尝试在排序后获得尽可能高的匹配。所以在这种情况下 $array[19] = 98; 我只需要返回值 98，它*总是*在数组的第一个位置。我无法使用 $array[0] 引用，因为 0 键不存在。速度限制意味着我无法遍历数组以找到最高匹配。

还必须有更好的解决方案

```
foreach ( $array as $value )
{
    echo $value;
    break;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-04T13:55:10.237

```
$keys = array_keys($array);
echo $array[$keys[0]]; 
```

或者你可以使用[current()](http://us2.php.net/manual/en/function.current.php)函数：

```
reset($array);
$value = current($array); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-04T13:55:29.890

如果我正确理解了您的问题，您需要数组中的第一个键：

```
$firstValue = reset($array);
$firstKey = key($array); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-04T13:54:24.917

你总是可以做的；

```
$array = array_values($array); 
```

现在 $array[0] 将是正确的答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-04T14:01:41.093

如果你想要第一个元素，你可以使用[array_shift](http://www.php.net/manual/en/function.array-shift.php)，这不会循环任何东西，只返回值。

但是，在您的示例中，它不是第一个元素，因此您的示例/问题似乎存在差异，或者我对此的理解存在错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-04T13:53:44.827

如果要对其进行排序，则可以指定自己的排序例程，并在排序时让它选出最高*值*。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-04T13:56:10.123

```
$array = array_values($array);
echo $array[0]; 
```

# git - 你如何只推送一个 Git 分支（而不是其他分支）？

> ID：820178
> 
> 赞同：268
> 
> 时间：2009-05-04T13:49:33.040
> 
> 标签：git, git-push

我正在开发本地 git 存储库。有两个分支，`master`和`feature_x`。

我想推`feature_x`送到远程仓库，但我不想推送`master`分支上的更改。

`git push origin feature_x`来自我的分支`feature_x`（`feature_x`远程分支已经存在）的工作吗？

我不想在我的盒子上测试这个，因为我现在无法推送到大师。

* * *

## 回答 #1

> 赞同：398
> 
> 时间：2009-05-04T13:57:28.967

是的，只需执行以下操作

```
git checkout feature_x
git push origin feature_x 
```

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2012-05-31T07:51:11.530

默认情况下`git push`更新所有远程分支。但是您可以配置 git 以仅将当前分支更新到其上游。

```
git config push.default upstream 
```

这意味着当您执行 git push 时，git 只会更新当前（签出）分支。

其他有效选项是：

*   `nothing`**：除非明确给出 refspec**，否则不要推送任何内容（错误输出）。这主要适用于希望通过始终明确来避免错误的人。
*   `matching`**：将所有具有相同名称**的分支推到两端。（Ver 1.7.11 之前的默认选项）
*   `upstream`：将当前分支推送到其上游分支。**仅当您推送到您通常会从中提取的同一存储库（即中央工作流程**）时，此模式才有意义。**本地和远程分支无需同名**。
*   `tracking`: 已弃用，`upstream`改为使用。
*   `current`：将当前分支推送到接收端的**同名远程分支。**适用于中央和非中央工作流程。
*   `simple`：[自 Ver 1.7.11 起可用] 在集中式工作流程中，`upstream`如果上游分支的名称与本地分支的名称不同，则可以使用附加的安全性拒绝推送。当推送到与您通常从中拉出的遥控器不同的遥控器时，作为`current`. 这是最安全的选择，适合初学者。此模式已成为 Git 2.0 中的默认模式。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-03-28T20:24:48.453

[在Karthik Bose 的回答](https://stackoverflow.com/a/10829461/456814)之上的小更新- 您可以全局配置 git，以影响所有工作区的行为方式：

```
git config --global push.default upstream 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-11T07:04:42.383

更好的答案将是

`git config push.default current`

`upsteam`可以，但是当您没有分支时，`origin`您将需要设置上游分支。将其更改为`current`将自动设置 upsteam 分支并立即推送分支。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-10-29T12:33:52.307

无论您有什么配置，都要推送您当前的分支：

```
git push origin $(git branch --show-current) 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2015-01-07T00:14:53.843

因此，假设您有一个本地分支 foo、一个名为 origin 的远程分支和一个远程分支 origin/master。

要将 foo 的内容推送到 origin/master，首先需要设置它的上游：

```
git checkout foo
git branch -u origin/master 
```

然后您可以使用以下命令推送到该分支：

```
git push origin HEAD:master 
```

在最后一个命令中，您可以添加 --force 以将 origin/master 的整个历史记录替换为 foo 的历史记录。

# asp.net - 有没有办法计算 ViewState MAC？

> ID：820188
> 
> 赞同：2
> 
> 时间：2009-05-04T13:50:47.780
> 
> 标签：asp.net, proxy, viewstate

我们正在为 .NET 应用程序编写代理缓存，并且代理上的 ViewState MAC 出现问题。我们已禁用 MAC 验证以绕过此问题，但这不是最好的方法（出于安全原因）。

有没有办法计算代理上的 ViewState MAC 以通过验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T17:58:35.657

查看 MSDN 上的这篇文章：http: [//msdn.microsoft.com/en-us/library/ms972976.aspx](http://msdn.microsoft.com/en-us/library/ms972976.aspx) 我的猜测是您需要确保代理服务器上的机器密钥与您的 Web 应用程序服务器上的机器密钥相同.

# calendarextender - 在 ajaxToolkit CalendarExtender 中禁用以前的日期

> ID：820192
> 
> 赞同：9
> 
> 时间：2009-05-04T13:51:26.500
> 
> 标签：calendarextender

如何在 ajaxToolkit CalendarExtender 中使用时禁用以前的日期

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-08-18T22:12:26.740

一种选择是在 calenderextender 绑定到的文本框上使用 rangevalidator。即，如果您将日历扩展器的 TargetID 设置为 tb1，则添加一个 rangeValidator 以标记 tb1 的内容何时在今天之前。

另一种选择是使用 javascript，这是一个很好的例子： [http](http://www.dotnetcurry.com/ShowArticle.aspx?ID=149) ://www.dotnetcurry.com/ShowArticle.aspx?ID= 149 TIP 6。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2011-06-14T00:59:28.767

这是我对日历日期限制问题的完整解决方案：我喜欢这个解决方案的地方是您设置 RangeValidator 的 MinimumValue 和 MaximumValue，并且您不必修改任何 javascript。我从未找到不需要重新编译 AjaxControlToolkit.dll 的完整解决方案。感谢[http://www.karpach.com/ajaxtoolkit-calendar-extender-tweaks.htm](http://www.karpach.com/ajaxtoolkit-calendar-extender-tweaks.htm)让我知道如何在不重新编译 AjaxControlToolkit.dll 的情况下覆盖 calendar.js 文件中的关键方法。此外，我收到“AjaxControlToolkit 未定义”javascript 错误，因此我将其更改为 Sys.Extended.UI。在使用 4.0 版本的工具包时它适用于我。

```
<%--//ADD THIS NEW STYLE TO STYLESHEET TO GRAY OUT DATES THAT AREN'T SELECTABLE--%>
<style type="text/css"> 
    .ajax__calendar_inactive  {color:#dddddd;}
</style> 
```

在 Page_Load 或 Init 或任何地方，为您的范围验证器设置最小值和最大值：

```
<script runat="server">
    protected override void OnLoad(EventArgs e)
    {
        //set the validator min and max values
        this.valDateMustBeWithinMinMaxRange.MinimumValue = DateTime.Today.Date.ToShortDateString();
        this.valDateMustBeWithinMinMaxRange.MaximumValue = DateTime.MaxValue.Date.ToShortDateString();
        base.OnLoad(e);
    }
</script> 
```

在页面中的某处添加此 javascript：

```
<script type="text/javascript">
<%--//   ADD DATE RANGE FEATURE JAVASCRIPT TO OVERRIDE CALENDAR.JS--%>
        var minDate = new Date('<%= valDateMustBeWithinMinMaxRange.MinimumValue %>');
         var maxDate = new Date('<%= valDateMustBeWithinMinMaxRange.MaximumValue %>');
        Sys.Extended.UI.CalendarBehavior.prototype._button_onblur_original = Sys.Extended.UI.CalendarBehavior.prototype._button_onblur;
        //override the blur event so calendar doesn't close
        Sys.Extended.UI.CalendarBehavior.prototype._button_onblur = function (e) {
            if (!this._selectedDateChanging) {
                this._button_onblur_original(e);
            }
        }
        Sys.Extended.UI.CalendarBehavior.prototype._cell_onclick_original = Sys.Extended.UI.CalendarBehavior.prototype._cell_onclick;
        //override the click event
        Sys.Extended.UI.CalendarBehavior.prototype._cell_onclick = function (e) {
            var selectedDate = e.target.date;

            if (selectedDate < minDate || selectedDate > maxDate ) {
                //alert('Do nothing. You can\'t choose that date.');
                this._selectedDateChanging = false;
                return;
            }

            this._cell_onclick_original(e);
        }

        Sys.Extended.UI.CalendarBehavior.prototype._getCssClass_original = Sys.Extended.UI.CalendarBehavior.prototype._getCssClass;
        Sys.Extended.UI.CalendarBehavior.prototype._getCssClass = function (date, part) {

            var selectedDate = date;

           if (selectedDate < minDate || selectedDate > maxDate ) {
                return "ajax__calendar_inactive";
            }
            this._getCssClass_original(date, part);
        }

</script> 
```

使用 CalendarExtenter 和 RangeValidator 将此文本框添加到您的 asp.net 页面：

```
<asp:TextBox ID="textBoxDate" runat="server" />
<ajaxToolkit:CalendarExtender ID="calendarExtender" runat="server" TargetControlID="textBoxDate" />
<asp:RangeValidator ID="valDateMustBeWithinMinMaxRange" runat="server" ControlToValidate="textBoxDate"
    ErrorMessage="The date you chose is not in accepted range" Type="Date" />
<br />
<asp:Button ID="Button1" runat="server" Text="Button" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T04:39:40.433

在 html 标记中使用 Ajax 工具包 Calendar Extender：

```
<asp:TextBox ID="txtDate" runat="server" CssClass="contentfield" Height="16px" MaxLength="12" width="80px" Wrap="False"></asp:TextBox>
<asp:CalendarExtender ID="CalendarExtender3" runat="server" Enabled="true" StartDate="<%# DateTime.Now %>" EndDate="<%# DateTime.Now.AddDays(1) %>" Format="dd MMM yyyy" PopupButtonID="imgDatePicker" TargetControlID="txtDate">
</asp:CalendarExtender>
<asp:ImageButton ID="imgDatePicker" runat="Server" AlternateText="Click to show calendar" Height="16px" ImageAlign="Middle" ImageUrl="~/images/Calendar_scheduleHS.png" Width="16px" /> 
```

上面你会看到日历只允许一个人通过设置在今天或明天之间进行选择

> StartDate="<%# DateTime.Now %>"

和

> EndDate="<%# DateTime.Now.AddDays(1) %>"

这也可以在后端使用`CalendarExtender1.StartDate = DateTime.Now;`或`CalendarExtender1.EndDate = DateTime.Now.AddDays(1);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-01T07:49:40.203

只需在 ajaxtoolkit calendarextender 控件中添加一个属性***StartDate="<%# DateTime.Now %>"***

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-11-06T10:20:27.063

以下链接可能对您有所帮助： [在 CalendarExtender 中禁用日期](http://gratisaccount.wordpress.com/2008/10/22/disable-dates-in-calendarextender/)

# c# - 哪个更快/更有效：字典 或字典 ?

> ID：820200
> 
> 赞同：14
> 
> 时间：2009-05-04T13:53:48.023
> 
> 标签：c#, string, dictionary, enums

当用作字典键时，**枚举**类型是否比**字符串**类型更快/更有效？

```
IDictionary<string,object> or IDictionary<enum,object> 
```

事实上，哪种数据类型最适合作为字典键，为什么？

请考虑以下事项：*注意：为简单起见，仅提供 5 个属性*

```
struct MyKeys
{
   public string Incomplete = "IN"; 
   public string Submitted = "SU"; 
   public string Processing="PR"; 
   public string Completed = "CO"; 
   public string Closed = "CL";   
} 
```

和

```
enum MyKeys
{
   Incomplete, 
   Submitted, 
   Processing, 
   Completed, 
   Closed
} 
```

如果用作字典中的键，以上哪个会更好！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-04T13:57:07.970

当然`enum`版本更好（当然，当两者都适用且有意义时）。不仅仅是为了性能*（它可能更好或更糟，请参阅 Rashack 的非常好的评论）*，因为它检查了编译时间并产生更清晰的代码。

`Dictionary<int, object>`您可以通过使用键并将`enum`键转换为`int`s 或指定自定义比较器来规避比较器问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-04T14:27:32.140

我认为你应该从关注正确性开始。这比程序中可能出现的微小性能差异之间的最小差异重要得多。在这种情况下，我将专注于您的类型的正确表示（枚举似乎是最好的）。然后稍后分析您的应用程序，如果有问题，那么您应该修复它。

在流程的后期使代码更快通常是一个直接的过程。获取 skolima 提供的链接。如果您选择了枚举，则需要大约 10 分钟的时间来修复应用程序中的**潜在**性能问题。我想在这里强调潜力这个词。这对于 NHibernate 来说绝对是一个问题，但至于它是否会成为您的程序的问题将完全取决于用途。

另一方面，在流程的后期使代码更正确往往更困难。在一个足够大的问题中，您会发现人们开始依赖先前不良行为的副作用。这可以使在不破坏其他组件的情况下更正代码具有挑战性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-04T14:04:03.007

使用 enum 来获得更清晰和更好的代码，但如果您关心性能，请记住提供自定义比较器：http: [//ayende.com/Blog/archive/2009/02/21/dictionaryltenumtgt-puzzler.aspx](http://ayende.com/Blog/archive/2009/02/21/dictionaryltenumtgt-puzzler.aspx)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-05-04T15:11:44.373

我猜想枚举版本更快。在引擎盖下，字典通过哈希码引用所有内容。我的猜测是为字符串生成哈希码会比较慢。但是，这可能慢得可以忽略不计，而且肯定比字符串比较之类的任何东西都要快。我同意其他说枚举更干净的海报。

# wpf - 如何访问位于 ControlTemplate 中的 WPF 控件？

> ID：820201
> 
> 赞同：25
> 
> 时间：2009-05-04T13:54:09.537
> 
> 标签：wpf, controls, controltemplate

通常，WPF 控件是在 .xaml 文件中声明的，而不是在后面的代码（.xaml.cs 文件）中声明的。但是，有时我需要在后面的代码中使用其中一些控件来操作它们。如果它“驻留在”xaml 文件中，我如何获得此类控件的句柄？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-05-04T13:55:20.720

您可以使用 ControlTemplate 类的 FindName() 方法。

```
// Finding the grid that is generated by the ControlTemplate of the Button
Grid gridInTemplate = (Grid)myButton1.Template.FindName("grid", myButton1); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-04T14:48:23.867

我不确定你在问什么，所以我会尝试回答我解释为你的问题的两个实例。

1) 如果你想声明一个显式控件，然后直接编辑它，你所要做的就是像这样设置 name 属性：

```
<Canvas x:Name="myCanvas"/> 
```

然后，您可以通过 Name 访问画布，如下所示：

```
myCanvas.Background = Brushes.Blue; 
```

2）如果您要声明一个通用控件，然后多次使用它，您可以这样做：

```
<Window>
   <Window.Resources>
      <Ellipse x:Key="myEllipse" Height="10" Width="10">
   </Window.Resources>
</Window> 
```

然后，您可以在代码中使用以下语法访问该预定义控件：

```
Ellipse tempEllipse = (Ellipse)FindResource("MyEllipse"); 
```

如果要将资源用作多个控件的模板，请添加 x:Shared="false"。

# c++ - 如何在 Visual Studio 中自动将预处理器和注释块插入到新的 C++ 头文件中？

> ID：820204
> 
> 赞同：2
> 
> 时间：2009-05-04T13:54:59.503
> 
> 标签：c++, visual-studio, visual-studio-2008

当我在 Visual Studio (2005/2008) 中创建新的 C/C++ 头文件时，我希望将一些预处理器头包含自动插入到新的头文件中。有人知道怎么做吗？Visual Studio 中的新项目和新项目模板系统似乎不适用于 C++ 文件。

例如，当我创建 foo.h 时，我希望新文件向导自动生成以下内容：

```
#ifndef FOO_H
#define FOO_H

#endif // FOO_H 
```

更新：Visual Studio 用作创建新 C++ 源文件的模板的文件位于：C:\Program Files\Microsoft Visual Studio 8\VC\vcprojectitems（适用于 Visual Studio 2005）。对这些文件的修改将应用于添加到 C++ 项目的任何新文件。但是，似乎没有办法将这些文件中的内容参数化以允许插入文件名等。搜索继续......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T14:21:32.123

购买[Visual Assist X](http://www.wholetomato.com/)并使用[片段](http://www.wholetomato.com/products/features/vasnippets.asp)！说真的，Visual Assist 填补了 VS 中的许多漏洞，这并不好笑。它不贵，而且可以省去你拔头发的麻烦。

# apache-flex - 用于将 Markdown 转换为 HTML 的 ActionScript 库

> ID：820212
> 
> 赞同：6
> 
> 时间：2009-05-04T13:56:48.313
> 
> 标签：apache-flex, actionscript-3, markdown

我目前正在开发一个 Flex 3.0 项目，在该项目中我必须以最小格式显示一些输入文本。

我们正在考虑使用“markdown”作为表达这种格式的选择方式，现在我想知道是否有用于此目的的库。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2010-10-27T10:15:23.693

你可以使用我的[John Fraser's Showdown 的](http://attacklab.net/showdown/)[AS3 端口](http://gist.github.com/648771)。

```
// Usage:
var text = "Markdown *rocks*.";
var html = Showdown.makeHtml(text);

// <p>Markdown <em>rocks</em>.</p> 
```

# c++ - C++ 新手：我应该使用 Visual Studio 吗？

> ID：820213
> 
> 赞同：12
> 
> 时间：2009-05-04T13:56:58.157
> 
> 标签：c++, ide

我即将开始我的第一个 C++ 项目。在过去 10 年左右的时间里，我做了很多 C# 和 VB（VB6 和 VB.NET），以及 Java 和其他一些事情，直到现在才需要 C++。

我计划使用 Visual Studio 2008，但我很想从有经验的 C++ 程序员那里了解 Visual Studio 是否适合 C++ 新手。

VS 会以任何方式让我更难学习正确编程 C++ 吗？

VS会鼓励任何坏习惯吗？

有什么我应该注意的陷阱吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-05-04T14:01:27.630

首先，VS 2008 非常强大，可能是 C++ 编程的最佳 IDE 之一（至少有一个支持插件，例如[Visual Assist X](http://www.wholetomato.com/)）。

但是请注意，C++ 是一种很难让编译器正确使用的语言，并且默认警告级别对引导非常宽松。所以它*会*经常容忍坏/错误的代码。始终建议检查其他编译器上的代码 - 至少`g++`在严格模式下具有高警告级别。

还鼓励在 Visual Studio 中设置更高的警告级别。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-05-04T13:58:16.203

Visual Studio 是一个优秀的 C++ IDE。如果您从 C# 中了解它，就会很熟悉。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2009-05-04T14:05:06.310

完全不使用 IDE 而是通过命令行构建来开始学习像 C++ 这样的语言，有一些话要说。这将使您对 c++ 编译和链接过程的各个阶段印象深刻，如果您需要真正的跨平台可移植性，它将为您提供良好的服务。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-04T14:11:29.417

VS 2008 非常适合开发 C++。就像其他人说的那样，我会购买 Visual Assist X 仅仅是因为它为您提供了更强的 Intellisense 和更好的代码大纲。此外，您使用 VS 获得的 MSDN 文档质量非常好，并且包含对 C++ 语言和标准库的完整描述。在 Windows 上，你会疯狂地使用其他任何东西。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-04T14:22:17.673

使用 Visual Studio，特别是如果您已经通过 C# 了解它。我同意其他人的观点，尽管您应该投资于 Visual Assist。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-04T15:10:15.500

最好使用代码编辑器 + 构建工具

作为一个 IDE，VS 非常糟糕（主观）。有很多替代品（当然更轻量级）

通过构建工具，我不仅指编译器，还指某种 make/jam 等

这样，您将准备好进行真正的跨平台开发（首先），并且作为奖励，您将有可能为“不小的”项目进行更快、更舒适的构建——一个命令构建一切。虽然你可以在 VS 中得到相同的结果（真的吗？）它会更快。另外，您可以按照自己的方式拥有项目结构 8)

作为参考，对于我的宠物项目，我使用 source insight + kjam + msvc 编译器

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-04T14:22:44.583

我记得几年前在 VS 上遇到了一些麻烦。实际上问题出在 C++ 编译器上，因为它们没有实现该语言的某些特性，或者至少它们没有以标准方式实现。

我们切换到 Eclipse CDT 是因为它相对容易使用其他编译器、支持自定义 makefile 和多个目标。

但是如果你打算为 Win32 开发，VS 可能是最安全的选择。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-04T14:53:07.303

我正在做类似的事情；我做了很多 Java 编程，不久前开始学习 C++。当我开始学习一门新语言时，我喜欢通过编写更小的程序来解决各种语法差异。与 Visual Studio 一样适用于大型项目，我认为它往往会为这种实践增加大量内容。我和 Konrad 一起讨论命令行的想法——这是一个很好的起点。我也将[Dev-C++](http://www.bloodshed.net/dev/index.html)用于较小的项目。这是一个漂亮、紧凑的小型 gcc IDE，在硬盘驱动器上的总占用空间只有大约 60MB，它可以毫无问题地编译为 Windows 可执行文件。祝你工作顺利！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-04T18:58:25.187

是的，使用 Visual Studio，它是您已经知道的 IDE，因此它在工具方面的学习曲线最低。由于您以前从未使用过任何 C++，因此请使用 IDE，而不是控制台窗口来学习。您会错过的一件事是 .NET 框架。您可以将托管 C++ 与 VS 一起使用，但如果您打算使用纯 C++，根本没有托管代码，那一开始会很吓人。

关于 C++，我一直注意到的一件事是，如果您希望在开始使用 C# 时使用 C# 的所有相同工具，那么您可能会感到失望。VS 是一个很棒的 IDE，它在 .NET 出现之前就已经支持 C++，所以相信它，享受它，记住，没有什么是完美的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-04T14:03:24.770

[我在这里](https://stackoverflow.com/questions/28605/c-on-visual-studio)问了一个类似的问题，除了在 Visual Studio 上使用 C。虽然我个人无法想象在没有 VS 的情况下使用 C#，但我发现将 VS 用于 C 是一种自虐练习。我知道这与您所要求的并不完全相同，但如果您发现它与 C++ 中的体验相似，请知道这不仅仅是您。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-04T14:14:04.417

使用 VS 可以让您不必深入了解构建工具链的工作原理。使用 VS 将您知道如何手动执行的操作自动化，并确保您了解幕后发生的事情。在 C++ 的世界中，与 C# 或 VB 等高级语言相比，您更希望了解构建链。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-05-04T17:20:01.693

如果你使用的是 VC 项目系统，你应该没问题。但是，如果您使用的是基于 makefile 的项目，那么告诉 IDE 您的包含路径、预处理器宏等非常重要，这样智能感知才能正常工作。

有些人对 Visual C++ 的代码浏览功能印象不好，因为他们习惯了不需要配置的 C#。

另一件需要注意的事情：有时，我发现智能感知在我工作了几天或几周的项目中无法正常工作。如果您的解决方案名为 foo.sln，则删除 foo.ncb 文件将导致 IDE 重新解析您的代码，并且智能感知将重新开始工作。

最后，我听说 VS 2010 多年来第一次对 C++ IDE 体验进行了重大改进。 [http://blogs.msdn.com/somasegar/archive/2008/11/21/c-enhancements-in-vs-2010.aspx](http://blogs.msdn.com/somasegar/archive/2008/11/21/c-enhancements-in-vs-2010.aspx)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-05-04T17:37:28.640

是的，使用 Visual Studio，但请注意，您使用它构建的应用程序不会在某些计算机上运行，​​除非它们安装了 Visual Studio 运行时 Redist。如果您发现您的应用程序无法在其他机器上运行，请[下载](http://www.microsoft.com/downloads/details.aspx?FamilyID=9b2da534-3e03-4391-8a4d-074b9f2bc1bf&displaylang=en)它。

# asp.net - AJAX.Net - UpdatePanel 不会删除旧内容

> ID：820218
> 
> 赞同：1
> 
> 时间：2009-05-04T13:57:39.013
> 
> 标签：asp.net, asp.net-ajax, user-controls, ajax.net

我在用户控件中使用 AJAX.Net (3.5)。用户控件包含一个UpdatePanel，在UpdatePanel 内部有一个MultiView。ScriptManager 包含在充当用户控件容器的页面中。

要在视图之间切换，用户控件包含一个简单的按钮。当我单击它时，视图会更改，因此隐藏旧内容并显示新内容。我的问题是内容根本没有隐藏。视图发生变化并显示新内容，但旧内容仍保留在页面上。为了隔离问题，我尝试更改简单标签的多视图和切换可见性，但行为是相同的。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T20:32:48.173

哦，我懂。那就没事了。这里的问题不在于 Ajax。只是你不能在`<table>`标签中嵌入一些东西。在这种情况下，您可以尝试与控件不同的东西`<table>`。也许是一个`<div>`或别的什么。不知道你具体是什么情况。也许你解释一下你想要达到的结果，这样我就可以给你一些建议。

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T20:22:47.357

如果您在 UpdatePanel 之外有表格的一部分，那么 AJAX.Net 似乎不能很好地工作。

在我的控件上，我想显示或隐藏表格的某些行。我在更新面板中只包含了*tr*和*td*标签。

要重现问题：

```
<table>
<asp:UpdatePanel ID="UpdatePanel" runat="server">
    <ContentTemplate>
        <tr>
            <td>
                <asp:Label ID="lblToShow" runat="server" Text="Label to show" Visible="false" />
                <br />
                <asp:Label ID="lblToHide" runat="server" Text="Label to hide" />
            </td>
        </tr>
    </ContentTemplate>
</asp:UpdatePanel>
</table> 
```

如果您使用以下方法更改可见性：

```
lblToShow.Visible = true;
lblToHide.Visible = false; 
```

两个标签的文本都显示在页面上（lblToHide 不隐藏）

如果您在 UpdatePanel**内移动***表格*标签，一切正常。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T14:04:40.213

称呼

```
updatepanel.Update() 
```

对更新面板进行更改后

或尝试

```
 updatepanel.Controls.Clear(); 
```

# sql-server - 如何找到最慢的查询

> ID：820219
> 
> 赞同：55
> 
> 时间：2009-05-04T13:57:39.917
> 
> 标签：sql-server, sql-server-2005, profiling

使用 Sql Server 2005 Profiler，您跟踪哪些事件、列和过滤器来查找最慢的查询和存储过程？

慢 = 大于 N 秒，10 用于争论。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2009-05-04T14:04:02.070

在 SQL 2005 中，您可以使用管理视图来查找运行缓慢的查询。[我不久前在SQL Server 性能](http://www.sql-server-performance.com/articles/per/tsql_statement_performance_p1.aspx)上找到的一个很好的脚本将帮助您入门；它首先列出性能最慢的数据。

```
SELECT  creation_time 
        ,last_execution_time
        ,total_physical_reads
        ,total_logical_reads 
        ,total_logical_writes
        , execution_count
        , total_worker_time
        , total_elapsed_time
        , total_elapsed_time / execution_count avg_elapsed_time
        ,SUBSTRING(st.text, (qs.statement_start_offset/2) + 1,
         ((CASE statement_end_offset
          WHEN -1 THEN DATALENGTH(st.text)
          ELSE qs.statement_end_offset END
            - qs.statement_start_offset)/2) + 1) AS statement_text
FROM sys.dm_exec_query_stats AS qs
CROSS APPLY sys.dm_exec_sql_text(qs.sql_handle) st
ORDER BY total_elapsed_time / execution_count DESC; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-05-04T14:10:01.637

在使用分析器之前，我会检查内置的使用情况报告。右键单击数据库、报告、标准报告，然后单击对象执行统计信息。

它列出了当前缓存的执行计划，以及资源数量和运行次数。这通常可以很好地了解导致服务器忙碌的原因。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-04T14:03:25.660

持续时间栏为我做了这件事，但有时我也会查看读取和写入栏。

我使用 TSQL:StmtCompleted 过滤器来获取原始查询。您可能想向其中添加其他存储过程，但 tsql 是您需要查看的“基础”。正如[MSDN 文章](http://msdn.microsoft.com/en-us/library/aa173892(SQL.80).aspx)所说

> “存储过程的执行可以通过 SP:Starting、SP:StmtStarting、SP:StmtCompleted 和 SP:Completed 事件类以及所有 TSQL 事件类来监控。”

# python - 将 PyCairo 渲染到 PyOpenGL 表面？

> ID：820221
> 
> 赞同：4
> 
> 时间：2009-05-04T13:57:53.677
> 
> 标签：python, opengl, cairo

我最近开始玩 pycairo - 将它渲染到 pyopengl 表面是否足够容易（例如在立方体的一侧？）......我的 opengl 真的不存在，所以我不确定最好的方法去吧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-29T18:31:56.783

此过程可能有效：

1.  像往常一样在 pycairo 中绘图。
2.  将图像导出到文件（或在内存中获取它的句柄）。
3.  将图像加载到 opengl 纹理内存中。
4.  使用纹理在opengl中绘制你的立方体。

第 1 步和第 2 步在开罗，我不熟悉。第 3 步和第 4 步将在 opengl 中完成。[在 NeHe 有一个关于绘制纹理表面](http://nehe.gamedev.net/data/lessons/lesson.asp?lesson=06.)的教程，底部有一个 python 版本的链接。

# excel - 并发总和

> ID：820228
> 
> 赞同：0
> 
> 时间：2009-05-04T13:59:32.160
> 
> 标签：excel

我可以用公式对这些数字求和吗？

```
1
2
3
4
5
6 
```

不，我不是在寻找 =“Sum(Cell___1:Cell_6)”。
使用“产品”你乘以 - 我只想添加它们。像“=1+2+3+4+5+6”，但只是用一个公式。例如“公式名称（6）”。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-04T14:01:59.003

你的意思是：

Sum = n * (n+1) / 2，其中 n 是序列中的最后一个数字？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T14:08:06.647

嗯... =6*(6+1)/2 应该这样做

对于更通用的方法，您可以将 6 放入 A1 中，然后使用

=A1*(A1+1)/2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T15:45:54.120

```
Function GaussForm(ByVal x As Integer) As Integer

       GaussForm = (x * (x + 1) / 2)

End Function
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T21:15:51.207

不是很高斯，但这是另一种方式：

```
=SUM(ROW(A1:A6))
```

这是一个数组公式，所以用 Control+Shift+Enter 输入

# palm-os - 如何使用 CodeWarrior9 解决 Palm 上的“近数据段大于 64k”问题？

> ID：820229
> 
> 赞同：1
> 
> 时间：2009-05-04T13:59:43.050
> 
> 标签：palm-os, palm, codewarrior

我正在做一个大型项目，现在我对这个“近数据段大于 64k”错误感到困惑。

如果我评论“FrmSetEventHandler（frm，DadosConstrutivos1HandleEvent）；” 在 PilotMain 的 PrvAppHandleEvent 上，程序编译得很好。如果我尝试使用 de call，则会收到错误消息。

我已经在使用多段和“扩展模式”。

我该如何解决这个问题？

谢谢罗德里戈·雷特·戈米德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-27T16:39:25.760

我不使用 CodeWarrior，但我使用的是 PocketStudio，“同样的问题”经常发生在我身上。

每个单元都是一个“代码段”，因此当您的*编译单元*增长到大于 64k 的代码时，编译器会警告您并且不要链接您的代码。

尝试将一些代码从该单元移动到另一个单元。

或者您可以使用#pragma：

```
#pragma segment Seg1

... code ...

#pragma segment Seg2

... code ... 
```

问候，

基督教。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-14T05:28:15.310

没有什么好的方法可以解决这个问题。Palm OS 中的 68K 代码只能访问少量的静态程序数据，因为 68K 指令集只为寻址数据提供了 +-32K 的偏移量。这需要对编译器进行重大更改以支持更进一步，因为编译器需要生成代码来执行复杂的指针运算，而 CodeWarrior 或 prc-tools 都不支持这一点。

这里有一些提示：

*   如果您有大型数据表，请尝试将它们移动到它们自己的资源中，您将在运行时加载并锁定它们的位置。这会将它们移出数据部分。
*   打开链接器映射功能并查看您的数据部分是如何分配的，看看是否有您不需要的大型数据对象或数组。
*   不要声明全局变量，而是使用指向您使用 MemGluePtrNew 分配的内存的全局指针。

# sql-server-2000 - 在 MS Sql Server 2000 中删除数据库连接

> ID：820231
> 
> 赞同：1
> 
> 时间：2009-05-04T14:00:05.793
> 
> 标签：sql-server-2000

我有一个我们遇到问题的数据库。不知何故，日志变成了 400 Gb，数据库变得毫无用处。我想删除与数据库的所有现有连接，然后分离数据库。

基本上我要做的是摆脱巨大的日志文件并创建一个新文件并重新附加如果它有效。如果没有，我们将从备份中恢复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T14:06:09.773

如果日志没有用，你可以使用这些命令，但是在生产服务器上应用之前，请自己记录它们。

BACKUP LOG WITH NO_LOG 用于丢弃日志中的页面，

sp_helpdb 用于查找数据库文件的名称

DBCC SHRINKFILE('your log filename ', 0) -- 用于将物理文件中继到指定的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T14:07:09.817

如果您确定没有打开的事务，您可以将数据库置于单用户模式。

ALTER DATABASE [YourDB] SET SINGLE_USER WITH NO_WAIT

完成后将其放回多用户模式 ​​ALTER DATABASE [YourDB] SET MULTI_USER WITH NO_WAIT

做

使用 truncate_only 备份日志 yourdb 然后 dbcc shrinkdatabase(yourdb) 不会为您缩小日志文件？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T18:00:19.497

好吧，基本上没有命令会针对数据库执行。我们最终做的是关闭服务并创建 mdf 和 ldf 文件的空副本并替换 sql server 正在使用的那些。之后，我们从上次备份中恢复了数据库，瞧，它又开始工作了（大部分情况下）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-11-03T15:47:50.430

```
ALTER DATABASE [DB_NAME_HERE] SET SINGLE_USER WITH ROLLBACK IMMEDIATE

ALTER DATABASE [DB_NAME_HERE] SET MULTI_USER 
```

# c# - 将 DataRow 设置为 ComboBox 的值成员

> ID：820243
> 
> 赞同：1
> 
> 时间：2009-05-04T14:02:40.093
> 
> 标签：c#, combobox, datatable

我正在使用 DataTable 从 XML 文件向我的 ComboBox 填充项目。目前我已将其设置为一列是 ComboBox 的显示成员，另一列是它的值成员。但是，这可能并不总是对我有用，因为我必须设置 selectedItem 参数，并且 value 成员可能不是唯一的。

我不知道表中是否存在重复的值成员，所以我的想法是我将整个 DataRow 作为 ComboBox 的值成员，然后使用 ComboBox.SelectedITem = (DataRow)some_data_row; 用于选择，它总是会选择正确的 ComboBox 对象。

我将如何做到这一点？有没有更好的方法来做到这一点？我对建议持开放态度，但是我可以同时获得展示成员和价值成员是非常重要的。

感谢您的帮助！

**编辑**：也许我之前不够清楚，但是当我问这是否是这里最好的方法时，我也在问*如何*做到这一点。如果我不设置 valuemember 参数，则 SelectedItem 是 DataRowView 类型...请注意，我想使用 selectedValue 参数从 ComboBox 中选择项目，如果我尝试在没有明确设置 value 成员的情况下这样做抛出异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T14:41:38.643

如果您将 a 绑定`ListBox`到 a `DataTable`，您实际上是在将其绑定到`DataView`表示该`DataTable`(`DataTable`实现`IListSource`，并返回 a `DataView`) 的 a 。您不能直接设置`SelectedItem`为`DataRow`实例，您必须将其设置为`DataRowView`实例。不幸的是，没有简单的方法`DataRowView`从`DataRow`.

您最好只通过`DataRowView`. 这将允许您`SelectedItem`明确设置。

您不能使用该`SelectedValue`属性，您必须为此使用该属性`SelectedItem`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T17:17:19.190

首先感谢亚当罗宾逊，我相信你的回答是正确的，但这不是我想听到的。我以不同的方式解决了我的问题，我认为它可能对其他人有用，所以我将其发布在这里。

我所做的是我创建了一个新类，在我的例子中，我将它命名为 ListObject，它有一个属性 DataRow（稍后您将看到它也适用于其他类型，我只是使用它，因为这是我真正想要的我的 Item价值属性）。它还覆盖方法：

*   字符串 ToS​​tring()
*   布尔等于（对象 obj）
*   int GetHashCode() -- 在我的情况下不需要，但是 Visual Studio
    警告您应该覆盖它。

这个想法是我可以用我自己的类的对象填充 ComboBox.Items 集合，显示一个自定义字符串（如果我没有像这样解决它，我关于堆栈溢出的下一个问题可能是关于在从DataRow）并仅比较一个类的项目（在我的情况下为 DataRow）。

所以这是代码，它工作得很好（至少对于我想用它做的）。

```
public class ListObject
{
    public DataRow element;

    public String DisplayObject = null;

    public ListObject(DataRow dr)
    {
        element = dr;
    }

    public ListObject(DataRow dr, String dspObject)
    {
        element = dr;
        DisplayObject = dspObject;
    }

    public override String ToString()
    {
        if (DisplayObject == null) throw new Exception("DisplayObject property was not set.");

        return element[DisplayObject].ToString();
    }

    public override bool Equals(object obj)
    {
        if (obj.GetType() == typeof(ListObject))
            return Equals(((ListObject)obj).element, this.element);
        else return base.Equals(obj);
    }

    public override int GetHashCode()
    {
        return base.GetHashCode();
    }
} 
```

就我而言，它很好用，因为我可以用 foreach 语句填充 ComboBox：

```
dtUsers.ReadXml(Program.Settings.xmlInputUsers);

foreach(DataRow dr in dtUsers.Rows) 
{
    cmbUser.Items.Add(new ListObject(dr, "Name"));
} 
```

当我得到我想要选择的 DataRow 时，我只是这样做：

```
cmbUser.SelectedItem = new ListObject(dlg.SelectedDataRow); 
```

我不必担心 DisplayMember 等，因为只会比较 DataRow，并且您的显示参数仍将在您填充 ComboBox.Items 集合时设置。此外，由于 toString 方法被覆盖，您可以真正自定义输出。

之所以可以创建此类，是因为有关*ComboBox.SelectedItem 属性*的 msdn 文章指出，SelectedItem 属性使用 IndexOf 方法工作。此方法使用 Equals 方法来确定相等性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-20T04:14:43.813

这是将 DataTable 获取到组合框的最简单方法

```
private void load() { 
DataTable dt = // get data from DB 
comboBox1.ValueMember = null; // allows you to get all fields in the obj to combobox
comboBox1.DisplayMember = "ccType";//label displayed from dt
comboBox1.DataSource = dt;
}
//to test 
private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {

        DataRowView current = (DataRowView)comboBox1.SelectedValue;
        string drs = current.Row["ID"].ToString();

    } 
```

# groovy - 在 Groovy 中实现带有闭包的接口 - 调用了什么方法？

> ID：820246
> 
> 赞同：4
> 
> 时间：2009-05-04T14:03:19.140
> 
> 标签：groovy, closures

groovy 中有一个习惯用法是用一个闭包来实现一个接口。闭包必须准备好处理传递的任何参数。这很好用。但是如何确定在接口上调用了什么方法呢？

```
interface X
{ void f(); void g(int n); void h(String s, int n); }

x = {Object[] args -> println "method called with $args"} as X
x.f() 
```

参数可用，但被调用的方法的名称 - 显然 - 不是。我错过了什么吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2010-03-09T15:26:20.187

我认为迈克尔·博格沃特基本上是对的。您通过大括号语法提供的实现提供了一种用于所有*接口定义的**方法实现*：

 *```
interface X { void f(); void g(int n); void h(String s, int n); }
x = {Object[] args -> println "method called with $args"} as X

x.f()
x.g(5)
x.h("a string",2) 
```

如果要为每个方法创建一个方法实现的闭包，请使用以下替代语法：

```
interface X
{ void f(); void g(int n); void h(String s, int n); }

x = [
        f: {println "f is called"},
        g: {int i-> println "g is called with param ${i}"},
        h: {Object[] args -> println "h is called with ${args}"}
] as X

x.f()
x.g(5)
x.h("a string",2) 
```

有关详细信息，请参阅以下内容：

*   [http://groovy.codehaus.org/Closures+-+Formal+Definition](http://groovy.codehaus.org/Closures+-+Formal+Definition)
*   [http://groovy.codehaus.org/Closures](http://groovy.codehaus.org/Closures)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T16:45:19.047

[您可以使用此示例http://groovy.codehaus.org/Using+methodMissing+and+propertyMissing](http://groovy.codehaus.org/Using+methodMissing+and+propertyMissing)中所示的动态 MethodMissing 功能

有了这个，您可以实现一个回退方法，该方法可以处理对接口方法的调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-17T19:12:59.293

该功能旨在用于单方法接口的常见情况，例如`Comparable`or `Runnable`（在 Java 中通常用作闭包的替代品）。

# iphone - NSString initWithBytes isNotEqualTo 错误

> ID：820255
> 
> 赞同：2
> 
> 时间：2009-05-04T14:04:29.043
> 
> 标签：iphone, nsstring

我在我的应用程序中使用肥皂请求并使用 initWithBytes 将检索到的 NSMutableData 转换为 NSString。

```
NSString *theXML = [[NSString alloc] initWithBytes: [webData mutableBytes] length:[webData length] encoding:NSUTF8StringEncoding]; 
```

当我在模拟器上运行应用程序时，一切正常。但在 iPhone 上面的代码退出并出现错误：

> 'NSInvalidArgumentException'，原因：'*** -[NSCFString isNotEqualTo:]：无法识别的选择器发送到实例 0x16b7e0'

没有包含“isNotEqualTo”的代码，并且问题并非在每个请求中都发生。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T14:35:55.643

你有没有尝试过：

```
NSString *theXML = [[NSString alloc] initWithData:webData encoding:NSUTF8StringEncoding]; 
```

在我们深入研究哪一个可能导致问题之前，这应该可以减少几个需要担心的电话。

# java - Java 导出 .properties 文件到构建文件夹？

> ID：820257
> 
> 赞同：2
> 
> 时间：2009-05-04T14:04:48.713
> 
> 标签：java

我刚刚在 Java 中创建了一个 .properties 文件并让它工作。问题是在哪里/如何存储它。我目前正在 Eclipse 中开发“动态 Web 项目”，并将属性文件存储在 build/classes/myfile.properties 下，我正在使用以下代码加载它：

```
properties.load(this.getClass().getResourceAsStream("/myfile.properties")); 
```

但是这个文件夹在构建项目时会不会被截断，或者在导出为 WAR 文件时不会被包含在内？如何将此文件添加到构建路径，以便在每次导出（在 Eclipse 中）时将其添加到 /build/classes？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T14:13:14.497

如果您将 .properties 文件添加到源文件夹中，它将在构建时被复制到 classes 文件夹中。我通常在我的项目中创建一个单独的“源文件夹”来保存 .properties 文件和其他非 Java 源文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T14:18:32.630

请参阅我关于[使用 ant 任务复制属性文件的](https://stackoverflow.com/questions/775279)问题。正如@highlycaffeinated 所建议的那样，Eclipse 会自动执行此操作，但您必须确保您的文件列表是最新的（在调试/运行/部署之前刷新项目中的文件）。

我使用 ant 对此进行更正式的控制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T14:16:44.647

将它放在类路径中的任何位置都可以。只需确保它在部署/构建后包含在 WEB-INF/classes 中。

在 maven 项目中，属性文件的标准位置是 /src/main/resources。你可以把它放在那里，然后将此文件夹添加为 Eclipse“源文件夹”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T14:17:02.257

可以将属性放到“Web App Libraries/classes”文件夹中，对应磁盘上的“src/main/webapp/WEB-INF/class”文件夹（eclipse自动创建上面的速记版本）：

# ruby - Ruby 和规则引擎

> ID：820259
> 
> 赞同：15
> 
> 时间：2009-05-04T14:05:11.087
> 
> 标签：ruby, rule-engine

我正在寻找一种简单的方法来让用户定义一组规则来过滤对象。

例如。让他们定义类似“如果预订日期 < 2009/04/30 且价值 > 100.00 时通知我预订”

或多或少：我想要一个带有自定义 DSL 的 Ruby 规则引擎。

有图书馆提供吗？遇到了 Ruleby，但它还不支持自定义 DSL。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T16:51:12.613

看看[wongi-engine](https://github.com/ulfurinn/wongi-engine) gem，它是一个基于 Rete 算法的新规则引擎，最近引起了相当多的关注。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T21:15:35.280

看看[树顶](http://cjheath.github.io/treetop/)。您可以将您的 DSL 定义为解析表达式语法，然后对其进行解析以创建您喜欢的任何格式的规则。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-05T03:50:16.670

我不确切知道应该如何以及在哪些对象上评估这些规则，但如果这些是 ActiveRecord 模型，那么[Ambition](http://ambition.rubyforge.org/)可能是可行的方法。它可以让你用 ruby​​ 编写条件，例如：

```
User.select { |m| m.name == 'jon' && m.age == 21 } 
```

这将转换为 SQL，您将获得满足给定条件的所有用户

# java - 使用嵌入的其他 Jar 文件混淆 Jar 文件

> ID：820261
> 
> 赞同：3
> 
> 时间：2009-05-04T14:05:58.900
> 
> 标签：java, jar, obfuscation

因此，假设我们的 Java 应用程序有一个 Jar 文件，其中包含它所依赖的库的 Jar 文件，一个 jdbc 或任何其他第三方 jar。

您如何继续使用免费软件对其进行混淆？我的意思是，混淆你的代码，让罐子保持不变。

我尝试使用[Proguard](http://proguard.sourceforge.net/)，但无济于事。甚至作者在 sourceforge 论坛上告诉我这是不可能的。

但是你可以用一个丑陋的黑客手动完成它，包括将 jar 重命名为 zip 并修改内部数据，那么，为什么软件不能做到这一点呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T20:52:41.463

[您可以使用Jar Jar Links](http://code.google.com/p/jarjar/)从多个 jar 中创建一个 jar 。然后你用[ProGuard](http://proguard.sourceforge.net/)处理结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T14:50:18.230

大概，您有​​某种构建脚本来编译您的源代码，将其与其他 jar（One-Jar/Fat Jar/等）打包，然后构建您的 jar。

您应该能够在编译和打包之间插入混淆任务。

如果您选择的混淆工具只接受 jar 输入，您应该能够独立地编译、jar 和混淆您的代码。之后，让您的脚本解压缩混淆文件并进行打包。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2009-05-04T16:16:41.567

不要浪费你的时间。任何人都可以反编译您的混淆代码，您唯一要做的就是挫败想要调试您的软件问题的合法用户。

混淆是法律问题的一种技术解决方案（而且是一个糟糕的解决方案）。

# java - OpenGL - 纹理映射后无法渲染除白色以外的颜色

> ID：820263
> 
> 赞同：1
> 
> 时间：2009-05-04T14:06:27.120
> 
> 标签：java, opengl, jogl

在渲染其他具有纹理的立方体后，我正在尝试渲染彩色立方体。我有多个符合 Drawer 接口的“Drawer”对象，我将每个对 GL 对象的引用传递给每个单独实现类的*draw(final GL gl)*方法。但是，无论我做什么，我似乎都无法渲染彩色立方体。

代码示例：

```
gl.glDisable(GL.GL_TEXTURE_2D);

gl.glColor3f( 1f, 0f, 0f );
gl.glBegin(GL.GL_QUADS);
// Front Face
Point3f point = player.getPosition();

gl.glNormal3f(0.0f, 0.0f, 1.0f);
//gl.glTexCoord2f(0.0f, 0.0f);

gl.glVertex3f(-point.x - 1.0f, -1.0f, -point.z + 1.0f);
//gl.glTexCoord2f(1.0f, 0.0f);

gl.glVertex3f(-point.x + 1.0f, -1.0f, -point.z + 1.0f);
//continue rendering rest of cube. ...
gl.glEnd();
gl.glEnable(GL.GL_TEXTURE_2D); 
```

我也尝试在每个顶点调用之前抛出 glColor3f 调用，但这仍然给了我一个白色立方体。这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T20:10:26.730

您需要确保执行一些操作。

首先：

```
gl.glEnable(gl.GL_COLOR_MATERIAL); 
```

这将使您可以将颜色应用于顶点。（在调用 glColor3f 之前执行此操作。）

如果这仍然不能解决问题，请确保您正确使用混合（如果您正在使用混合。）

对于大多数应用程序，您可能希望使用

```
gl.glEnable(gl.GL_BLEND);
gl.glBlendFunc(gl.GL_SRC_ALPHA,gl.GL_ONE_MINUS_SRC_ALPHA); 
```

如果这些事情都不能解决您的问题，您可能需要在代码的这一部分之前向我们提供有关您正在做什么/设置的更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-04T20:20:48.110

如果启用了光照，颜色来自材质，而不是 glColor 顶点颜色。如果您提到的绘图功能正在为纹理对象设置材质（并且纹理下的白色材质很常见），那么其余的立方体将是白色的。使用 GL_COLOR_MATERIAL 设置 OpenGL 以获取 glColor 命令并更新材质，而不仅仅是顶点颜色，这样应该可以工作。

因此，简单地说，如果您启用了照明，请尝试使用 GL_COLOR_MATERIAL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T14:12:18.417

您可能想尝试的一件事是：`glBindTexture(GL_TEXTURE_2D, 0);`将纹理绑定到 nil。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T15:53:02.543

需要检查的一些事项：

*   是否有着色器处于活动状态？
*   任何 gl 错误？
*   你还改变了哪些其他状态？例如 GL_COLOR_MATERIAL，混合或光照会改变几何体的外观。
*   如果您先绘制无纹理的立方体，它会起作用吗？如果它确实试图弄清楚它在什么时候变白。也有可能立方体只会在第一帧中以正确的颜色显示，那么肯定涉及到 GL 状态。
*   将 glPushAttrib/glPopAttrib 放在绘图方法的开头/结尾可能会有所帮助，但最好首先找出导致问题的原因。

# sql - 如何按 SQL 中的列分组？

> ID：820267
> 
> 赞同：1
> 
> 时间：2009-05-04T14:07:14.700
> 
> 标签：sql, sql-server, sql-server-2005

如何按时间分组？我试过这个，但它给出了错误“无效的列名'时间'。”：

```
select Count(Page) as VisitingCount, CONVERT(VARCHAR(5), Date, 108) as [Time]
from scr_SecuristLog   
where Date between '2009-05-04 00:00:00' and '2009-05-06 14:58'  
and [user] in (select USERNAME from scr_CustomerAuthorities)  
group by [Time] order by [VisitingCount] asc 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-04T14:10:13.600

尝试

```
GROUP BY CONVERT(VARCHAR(5),Date, 108) 
```

始终确保您按 select 子句中没有围绕它的聚合函数的所有内容进行分组。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-04T14:14:12.950

[时间] 是列别名。尝试

```
SELECT 
      COUNT(Page) AS VisitingCount
    , CONVERT(VARCHAR(5),Date, 108) AS [Time] 
FROM
    scr_SecuristLog   
WHERE
    Date BETWEEN '2009-05-04 00:00:00' AND '2009-05-06 14:58'  
    AND
    [user] IN (
                SELECT 
                    USERNAME             
                FROM
                    scr_CustomerAuthorities 
                )  
GROUP BY
    CONVERT(VARCHAR(5),Date, 108) 
ORDER BY
    [VisitingCount] ASC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T14:12:10.757

```
select Count(Page) as VisitingCount,CONVERT(VARCHAR(5),Date, 108) as [Time] from scr_SecuristLog   
where Date between '2009-05-04 00:00:00' and '2009-05-06 14:58'  
and [user] in(select USERNAME             
    from scr_CustomerAuthorities )  
group by CONVERT(VARCHAR(5),Date, 108) order by [VisitingCount] asc 
```

我修改了`GROUP BY`以包含 的实际表达式`[Time]`，而不是列别名（因为这不能用于`GROUP BY`，只能用于`ORDER BY`）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T14:25:42.423

看起来 Date 是这里的一列，但它是一个关键字而不是引用。也许这就是问题（虽然没有测试）：

```
select Count(Page) as VisitingCount,CONVERT(VARCHAR(5),[Date], 108) as [Time] from scr_SecuristLog   
where [Date] between '2009-05-04 00:00:00' and '2009-05-06 14:58'  
and [user] in(select USERNAME             
    from scr_CustomerAuthorities )  
group by [Time] order by [VisitingCount] asc 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-04T14:37:24.423

如果您不想重复日期转换（有时计算比简单转换更密集），那么您可以使用以下内容：

```
select * 
from ( select Count(page) .., ... As [Date] from ... where ...) UG
group by UG.[Date] 
```

请注意，您*必须*将“UG”名称提供给内部选择，这很可能而且在大多数情况下效率低于在原始分组中重复转换表达式。你的整个表情也可能会改变......但你知道这是可能的。

# objective-c - 翻转 Quicktime 预览和捕捉

> ID：820275
> 
> 赞同：2
> 
> 时间：2009-05-04T14:09:39.827
> 
> 标签：objective-c, cocoa, quicktime

我需要水平翻转一些我正在预览和捕捉的视频。A-la iChat，我有一个网络摄像头，希望它看起来好像用户在照镜子。

我正在预览 Quicktime 视频`QTCaptureView`。我的捕获是逐帧完成的（出于我不会进入的原因），例如：

```
imageRep = [NSCIImageRep imageRepWithCIImage: [CIImage imageWithCVImageBuffer: frame]];
image = [[NSImage alloc] initWithSize: [imageRep size]];
[image addRepresentation: imageRep];
[movie addImage: image forDuration: someDuration withAttributes: someAttributes]; 
```

有小费吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2010-01-03T07:51:17.473

没有什么比复活一个老问题更重要的了。无论如何，我来到这里，几乎找到了我要寻找的东西，这要归功于 Brian Webster，但是如果有人正在寻找批发解决方案，请在将您的类设置为`QTCaptureView`实例的代表后尝试以下操作：

```
- (CIImage *)view:(QTCaptureView *)view willDisplayImage:(CIImage *)image {
//mirror image across y axis
return [image imageByApplyingTransform:CGAffineTransformMakeScale(-1, 1)];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-04T15:32:17.770

您可以通过获取从捕获中获取的 CIImage 并通过核心图像过滤器运行它来翻转图像来做到这一点。然后，您会将生成的图像传递给您的图像代表，而不是原始图像。代码看起来像：

```
CIImage* capturedImage = [CIImage imageWithCVImageBuffer:buffer];
NSAffineTransform* flipTransform = [NSAffineTransform transform];
CIFilter* flipFilter;
CIImage* flippedImage;

[flipTransform scaleByX:-1.0 y:1.0]; //horizontal flip
flipFilter = [CIImage filterWithName:@"CIAffineTransform"];
[flipFilter setValue:flipTransform forKey:@"inputTransform"];
[flipFilter setValue:capturedImage forKey:@"inputImage"];
flippedImage = [flipFilter valueForKey:@"outputImage"];
imageRep = [NSCIImageRep imageRepWithCIImage:flippedImage];
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:24:58.443

试试这个！它会将过滤器应用于 CaptureView，但不会应用于输出视频。

```
- (IBAction)Vibrance:(id)sender
{
    CIFilter* CIVibrance = [CIFilter filterWithName:@"CIVibrance" keysAndValues:
                            @"inputAmount", [NSNumber numberWithDouble:2.0f],
                            nil];
    mCaptureView.contentFilters = [NSArray arrayWithObject:CIVibrance];
} 
```

顺便说一句，您可以从此参考应用任何过滤器：[https ://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CoreImageFilterReference/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CoreImageFilterReference/Reference/reference.html)

# asp.net-mvc - ASP.NET MVC 的路线图是什么？

> ID：820278
> 
> 赞同：6
> 
> 时间：2009-05-04T14:10:14.927
> 
> 标签：asp.net-mvc, roadmap

ASP.NET MVC 的路线图是什么？我想了解我应该运行哪些版本以及何时运行。

我尝试了 Scott Guthrie 的[网站](http://weblogs.asp.net/scottgu/archive/2008/02/12/asp-net-mvc-framework-road-map-update.aspx)，但找不到比 MIX 晚的任何内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-04T14:19:56.057

你看到[这个](http://aspnet.codeplex.com/Wiki/View.aspx?title=Road%20Map&referringTitle=Home)路线图了吗？这是我能找到的最新的。

在任何情况下，查找 MVC Futures 项目（[在此处](http://aspnet.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=24471)下载），您可以在其中找到新的东西，这些东西没有进入第一个版本，但可能会进入未来的版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T14:16:19.747

我不相信他们目前是 MVC 的路线图。事实上，我不认为 MS 为其开发工具和框架提供任何前瞻性材料。由于 MVC 刚刚以 1.0 的形式发布，我们知道它会在未来得到支持，但能支持多久还不得而知。

甚至对于明年将与 VS2010 一起发布的 asp.net 4 知之甚少。

# subsonic - 如何使用 SubSonic 内部加入带有参数的 UDF 函数

> ID：820284
> 
> 赞同：1
> 
> 时间：2009-05-04T14:11:44.750
> 
> 标签：subsonic

我需要使用 SubSonic 使用 FreeTextTable 查询表（因为我需要排名）。AFAIK，Subsonic 不支持全文，所以我最终创建了一个简单的 UDF 函数（表函数），它需要 2 个参数（要搜索的关键字和最大结果数）。现在，我怎样才能用这个 FreeTextTable 内部加入主表？InlineQuery 不是一个选项。例子：

具有字段 Id、ArticleName、Author、ArticleStatus 的表 ARTICLE。

搜索可以通过以下多个字段之一完成：ArticleName（全文）、作者（另一个全文但具有不同的搜索关键字）、ArticleStatus（一个整数）。

实际上，查询要复杂得多，并且有其他联接（取决于用户的选择）。

如果 SubSonic 无法处理这种情况，最好的解决方案可能是好的旧普通 sql（因此也不需要创建 UDF）。

谢谢你的帮助

ps：SubSonic 3.0 会处理这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-28T16:42:08.377

我意识到您的问题比这更复杂，但是您可以通过 SubSonic 2.2 从表值函数中获得结果，并稍加按摩。

将 .cs 文件从生成的视图之一复制到安全文件夹中，然后更改所有属性以匹配 UDF 返回的列。

然后，在您的集合上，使用您的参数添加一个构造函数方法并让它执行一个 InlineQuery。

```
public partial class UDFSearchCollection
{
    public UDFSearchCollection(){}

    public UDFSearchCollection(string keyword, int maxResults)
    {
         UDFSearchCollection coll = new InlineQuery().ExecuteAsCollection<UDFSearchCollection>("select resultID, resultColumn from dbo.udfSearch(@keyword, @maxResults)",keyword,maxResults);
         coll.CopyTo(this);
         coll = null;
    }
}

public partial class UDFSearch : ReadOnlyRecord<UDFSearch>, IReadOnlyRecord
{
    //all the methods for read only record go here
    ...

} 
```

内连接会稍微困难一些，因为表对象没有自己的参数集合。但它可以...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T19:14:42.743

3.0 可以为您做到这一点，但您需要为它制作一个模板，因为我们还没有处理开箱即用的功能。我将在接下来的几周内进行这项工作——目前我认为 2.2 不会为你做这件事。

# visual-studio - 您可以在 Visual Studio 片段中自动插入命名空间吗？

> ID：820286
> 
> 赞同：6
> 
> 时间：2009-05-04T14:12:13.300
> 
> 标签：visual-studio, code-snippets

我有一个为我创建 C# 类的代码片段。它将区域放置在所有正确的位置，并按照我喜欢的方式进行设置。

当我通过添加一个新项目来创建一个类时，它会根据我的项目和文件夹结构自动创建命名空间。

有没有办法可以对我的自定义代码片段执行相同的操作？

有没有办法可以将默认类更改为我想要的类格式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-09-24T19:14:04.677

现在（2018 年）这是可能的，至少是您的部分愿望，并添加以下内容：

```
<Snippet>
  ...

  <Imports>
    <Import>
      <Namespace>SomeNamespace</Namespace>
    </Import>
    <Import>
      <Namespace>AnotherNamespace</Namespace>
    </Import>
  </Imports>
</Snippet> 
```

欲了解更多信息：[https ://github.com/dotnet/roslyn/issues/4457](https://github.com/dotnet/roslyn/issues/4457)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-05T17:25:16.743

我认为 VS Snippets 不可能做到这一点，只有[少数可用功能](http://msdn.microsoft.com/en-us/library/ms242312%28VS.80%29.aspx)，它们在 MSDN 中列出。但是，您可以创建一个新的项目模板并使用[参数](http://msdn.microsoft.com/en-us/library/eehb4faa%28VS.80%29.aspx)$rootnamespace$，该参数将替换为当前项目的根命名空间。项模板是 Visual Studio 的一个非常有用的部分，MSDN 上有[大量文档](http://msdn.microsoft.com/en-us/library/6db0hwky%28VS.80%29.aspx)，Visual Studio 杂志对它们进行了[很好的演练](http://visualstudiomagazine.com/columns/article.aspx?editorialsid=2761)。

# c# - 如何设置多语言 PrincipalPermission 角色名称？

> ID：820289
> 
> 赞同：6
> 
> 时间：2009-05-04T14:13:09.990
> 
> 标签：c#, security, permissions, multilingual

我正在尝试使用 Windows 帐户保护 WCF 服务。该服务应该在许多具有不同语言的系统上运行。如何设置具有语言独立角色名称的 PrincipalPermission？

我发现了像这样的丑陋解决方法。

```
[PrincipalPermission(SecurityAction.Demand, Role = "Builtin\\Administrators")] // English
[PrincipalPermission(SecurityAction.Demand, Role = "Vordefiniert\\Administratoren")] // German
public string HelloWorld()
{
    return "Hello";
} 
```

我认为这不是一个好的解决方案，有没有办法让这种语言独立？有没有办法使用帐户 SID 而不是字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-09T13:29:14.917

您可以滚动自己的权限属性来处理翻译：

```
 [Serializable, AttributeUsage(AttributeTargets.Method | AttributeTargets.Class, AllowMultiple = true, Inherited = false), ComVisible(true)] 
 public sealed class AdministratorPrincipalPermissionAttribute : CodeAccessSecurityAttribute 
 {  
    public AdministratorPrincipalPermissionAttribute(SecurityAction action) : base(action)
    { }

    public override IPermission CreatePermission()
    {
       var identifier = new SecurityIdentifier(WellKnownSidType.BuiltinAdministratorsSid, null);
       var role = identifier.Translate(typeof(NTAccount)).Value;
       return new PrincipalPermission(null, role);
    }
 } 
```

请注意，这将需要一些额外的部署工作（gac、caspol 等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-08T11:26:44.177

再试一次：看看[http://msdn.microsoft.com/en-us/library/system.security.principal.windowsbuiltinrole.aspx](http://msdn.microsoft.com/en-us/library/system.security.principal.windowsbuiltinrole.aspx) .... 并转到示例。在那里，您可以使用 BuiltIn 枚举成员来获取正确拼写的组名（通过 API）......然后它应该是语言中性的。

HTH，托马斯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-08T18:40:47.293

您可以使用命令式版本并将语言中性形式（例如 SID）动态转换为本地化形式（可能通过 SecurityIdentifier.Translate）。

众所周知的 SID 在 KB 243330 中列出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T14:49:50.197

嗯，我不会直接在我的代码中使用组名（硬编码）。尝试将其抽象为“HelloWorldAdmin”之类的角色，并在 app.config 中配置角色。这个应该映射到一个用户组。这将允许您的用户/管理员选择一个组并将其映射到角色（例如，如果应用程序管理员不是您的 AD 管理员）。看看[http://msdn.microsoft.com/en-us/library/ms998314.aspx](http://msdn.microsoft.com/en-us/library/ms998314.aspx)。HTH。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-04T16:44:47.863

您确定在德语系统上，“BUILTIN\Administrators”不起作用吗？即使在那时我也会想象，这些基本组名应该是有效的。是的，在您的管理工具中，它会显示“Vordefiniert\ADministratoren” - 但如果 PrincipalPermission 属性取决于语言，我会感到惊讶。

马克

# tags - 内容的自动分类

> ID：820296
> 
> 赞同：3
> 
> 时间：2009-05-04T14:14:39.860
> 
> 标签：tags, tagging, semantics, semantic-web, taxonomy

我正在开发一个脚本，从我是其中成员的特定 meetup.com 组的消息存档中提取消息 - [http://www.meetup.com/opencoffee/messages/archive/](http://www.meetup.com/opencoffee/messages/archive/)

想法是将这些动态添加到 wordpress 站点，并允许人们搜索消息、自动标记消息等。

我遇到的问题是如何最好地对这些消息进行自动分类。我欢迎任何关于如何最好地解决这个问题以及什么是最有效的编程方式的想法和想法。

选项1

使用美味的 API 按主题领域（如金融、技术、商业等）查找标签来源，并按主题查找相关标签：-

[http://delicious.com/tag/finance](http://delicious.com/tag/finance)

[http://delicious.com/tag/technology](http://delicious.com/tag/technology)

如果消息包含这些标签，则该消息被分配到相应的类别。

我相信这可以工作，但不确定扫描这些标签的消息的最有效方法。

选项 2

查找代表我需要的类别的网站，例如 ft.com、金融经济学家等、技术 techcrunch 等，然后确定人们使用哪些标签来标记这些网站，并默认情况下确定这些标签是人们的方式与这些网站及其内容堆栈有关。

选项 3

将消息 url 传递到[http://semanticproxy.com/](http://semanticproxy.com/)（路透社加来项目的一部分）或使用 Open Calais API。我已经尝试过但没有取得多大成功，因为内容的可变深度并不总是足以返回有意义的分类法。

这是我通过 calais api 解析的示例消息：-

原始信息

[http://www.meetup.com/opencoffee/messages/6045615/](http://www.meetup.com/opencoffee/messages/6045615/)

加来结果

[http://www.mashinteractive.com/opencoffee/calais.php](http://www.mashinteractive.com/opencoffee/calais.php)

概括

就是这样。我欢迎任何关于方法的想法和想法，以及关于如何最好地处理选项 1 和 2 的消息扫描的提示。

仅供参考，迄今为止大约有 1,700 条消息，我猜我可能有 10 个类别，每个类别由 20 或 30 个标签定义。

如果有人愿意帮助开发一个 Wordpress 插件或类来做到这一点，我会非常高兴有你加入。请记住，我不是程序员，我只是在边缘修修补补，假装我是一个。

提前致谢

乔纳森 CEO

人群

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-25T19:26:50.513

您可能想查看[Zemanta](http://www.zemanta.com/)，它具有用于自动标记内容的工具和插件（包括 Wordpress），还可以查看[Common Tag](http://commontag.org/Home)，这是一个使用 RDFa 表示内容标签的词汇表，目前已被索引的语义网络标准通过一些搜索引擎。

# hibernate - 使用休眠时索引调用的最佳位置

> ID：820298
> 
> 赞同：2
> 
> 时间：2009-05-04T14:14:57.740
> 
> 标签：hibernate, solr

目前我正在考虑在我的代码中我必须将调用方法放在我的索引服务（solR）中的最佳位置。

事实是我必须确保存储在数据库中的每个实体都被索引，我正在使用休眠，我将尝试使用拦截器来实现它。

任何建议 | 主意 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T15:53:06.213

我们已经在hibernate的实体拦截器上调用了。作为只有一个

允许EntityInterceptor，我们实现filterchain模式来传递实体

跨越许多拦截器。

希望它可以帮助某人...

# delphi - 读取任意内存位置？可能的？

> ID：820299
> 
> 赞同：3
> 
> 时间：2009-05-04T14:15:20.420
> 
> 标签：delphi, memory, pointers, access-violation

有没有办法（只读）访问任意内存位置而不会遇到访问冲突？我认为每个进程都有自己的虚拟地址空间，并且它可以读取所有可用的内存位置......似乎并非如此，因为如果我执行类似的操作，我的程序就会挂起

```
var
  IntPtr : PInteger;
  AnInteger : Integer;
...
IntPtr := $100;
AnInteger := IntPtr^; 
```

我仍在尝试编写我的低级递归大小函数并尝试检测数据成员是否是对象引用。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-04T14:50:30.260

您只能通过指针访问您自己的进程的内存，即使那样它也只是那些已为您的进程映射的部分。有调试器钩子可以让你访问其他进程的内存；但他们很难做到正确。

所以如果你真的想遍历你的进程内存，你可以在这里找到你需要的函数：http: [//msdn.microsoft.com/en-us/library/ms878​​234.aspx](http://msdn.microsoft.com/en-us/library/ms878234.aspx)

Windows中的AFAIR也将内核的一部分映射到您的进程内存空间（这就是您的进程没有所有4G可用的原因）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-04T14:51:38.913

您的应用程序挂起？那么你的应用程序有问题。通常，会有一个简单的 AV。AV 导致错误消息。就这些。

顺便说一句，你不应该害怕它 - 只是处理它。

```
function IsValidObject(const AObj: Pointer { or TObject} ): Boolean;
begin
  try
    ...
    // place your checking code there
    Result := ...;
  except
    on EAccessViolation do
      Result := False;
  end;
end; 
```

想到此规则的唯一例外是，如果您正在编写某种异常处理程序并想要检测是否存在有效对象。在这种情况下，您可能不想在异常处理程序中生成异常；）

如果这是您的情况 - 然后尝试使用此代码（这是一个示例）：

```
function GetReadableSize(const AAddress: Pointer; const ASize: Cardinal): Cardinal;
const
  ReadAttributes = [PAGE_READONLY, PAGE_READWRITE, PAGE_EXECUTE_READ, PAGE_EXECUTE_READWRITE];
var
  MemInfo: TMemoryBasicInformation;
  Tmp: Cardinal;
begin
  Result := 0;
  if (VirtualQuery(AAddress, MemInfo, SizeOf(MemInfo)) = SizeOf(MemInfo)) and
     (MemInfo.State = MEM_COMMIT) and (MemInfo.Protect in ReadAttributes) then
  begin
    Result := (MemInfo.RegionSize - (Cardinal(AAddress) - Cardinal(MemInfo.BaseAddress)));
    if Result < ASize then
    begin
      repeat
        Tmp := GetReadableSize(Pointer(DWord(MemInfo.BaseAddress) + MemInfo.RegionSize), (ASize - Result));
        if (Tmp > 0) then
          Inc(Result, Tmp)
        else
          Result := 0;
      until (Result >= ASize) or (Tmp = 0);
    end;
  end;
end;

function IsValidBlockAddr(const AAddress: Pointer; const ASize: Cardinal): Boolean;
begin
  Result := (GetReadableSize(AAddress, ASize) >= ASize);
end; 
```

但通常你应该更喜欢第一种方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-05T09:48:18.183

如果您想安全地尝试读取任何内存地址而不大惊小怪，并在您尝试读取的内存不可访问时获得一个很好的错误代码而不是异常，那么您要使用的函数在 WinAPI 中：[ReadProcessMemory](http://msdn.microsoft.com/en-us/library/ms680553(VS.85).aspx)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-04T14:48:45.753

内存可能不会在所有地址上映射。并且较低的 4kb 左右总是受到保护 afaik。

但是，如果是针对 VM，如果您控制内存管理器，则可以建立一个列表，其中包含应用程序映射的所有内存范围。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-04T15:47:59.823

在旧 Windows、95、98、Me 中，您可以在函数中执行一些内联​​ asm 并读/写一些任意内存位置或硬件端口...

函数 ReadPortByte ：字节；var Base : 单词；开始 Base := FAddress; asm mov DX, Base in AL, DX mov 结果, AL end; 结尾;

您仍然可以通过使用设备驱动程序来做到这一点，但除非驱动程序为 Vista 及更高版本正确编译，否则 Vista 可能会给您带来一些问题。

有几个免费的，值得尝试。

约翰

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-04T14:32:27.870

除非有一些我不知道的魔法方式，否则我很确定你不能这样做。Windows 使用受保护的内存，这意味着您无法访问尚未专门分配给您的任何内容。

有 DMA，但它是为驱动程序级软件保留的。

# variables - 用闪光灯实现青蛙

> ID：820301
> 
> 赞同：1
> 
> 时间：2009-05-04T14:15:47.970
> 
> 标签：variables, actionscript-2, flash-cs3

对于初学者：我正在使用 Flash CS3 和 Actionscript 2.0

我正在尝试重新制作青蛙游戏，但我有点坚持将汽车放在屏幕上。

对于那些不知道frogger的人：[http](http://www.actionscript.org/showMovie.php?id=1157) ://www.actionscript.org/showMovie.php?id=1157 ，但我没有实现日志。

最大的问题是我有3辆车，都是图书馆里的电影剪辑，我不会把它们放在舞台上。多个实例必须同时出现。这些车需要双向行驶，所有 3 辆车都必须出现在所有车道上（我有 4 车道）当然，1 车道只有 1 个方向。

我可以用它`hitTest()`来查看我的青蛙是否撞到了其中一辆车，但我需要让它变得真实，这意味着我不能硬编码每条车道上的汽车数量。

我似乎也找不到如何围绕其中心旋转影片剪辑...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T14:21:20.780

嗯，有几件事我可以建议。

对于汽车，将每辆汽车创建为库中的单独对象（不要将它们放在舞台上）。当您需要在屏幕上显示一个时，请使用 attachMovie() 创建您想要的汽车实例。

为了使它们面向不同的方向（我相信您只需要左右），您可以在图书馆中为每辆车创建 2 个副本，一个面向每个方向。或者，我认为如果您将 xScale 值设置为 -100%，我认为这会水平翻转它，因此您可以对两者使用相同的库实例。但是，如果每个方向都有单独的库实例，而不是在一个方向上进行旋转，则可能会更容易处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T15:34:12.917

为了回答您关于旋转的问题，影片剪辑围绕其注册点旋转，而不是围绕其视觉中心旋转。因此，当您创建剪辑时，请确保符号编辑屏幕上的十字准线出现在中心。十字准线是注册点，它基本上定义了 x:0,y:0 在剪辑上的位置。

听起来您的问题实际上是关于如何使用 hitTest 查看青蛙是否撞到了任何汽车，无论是哪一辆，舞台上有多少辆等等。所以我要做的是为汽车创建一个类一个静态成员，可以是指向青蛙的指针，然后让类检查它是否击中青蛙。

所以开始：

```
public class Car extends MovieClip{     
    public static var frog:MovieClip;
    private var interval;
    public function Car(){
        super();
        interval = setInterval(checkHit,500);
    }
    private function checkHit(){
            if(this.hitTest(frog)){
            trace("the frog hit the car");
            clearInterval(interval);
            //do what you need to do when the frog gets hit 
        }
    }
} 
```

对于每辆单独的汽车，您可以扩展 Car 类：

```
class Truck extends Car{
    public function Truck(){
        super();
    }
}

class Volkswagen extends Car{
    public function Volkswagen(){
        super();
    }
}

class Bus extends Car{
    public function Bus(){
        super();
    }
} 
```

创建单独的类后，在每辆车的库符号上使用链接。（右键单击符号，选择链接，然后在类字段中输入您的类名）。

最后，将青蛙成员设置为舞台上的青蛙

```
var frog:MovieClip = attachMovie("frog_mc", frogMC, _root.getNextHighestDepth())
Car.frog = frog; //set the static var "frog" to your frog instance 
```

现在你的车都应该检查自己是否撞到了青蛙。

另一种选择是在每个不同的汽车影片剪辑的第一帧上编写 checkHit() 函数，而不是为每个影片使用类：

```
this.onEnterFrame = function(){
    if(this.hitTest(_root.frog)){
        trace("the frog hit the car");
        //do what you need to do when the frog gets hit 
        delete this.onEnterFrame;
    }
} 
```

# c# - 多个列表框绑定到同一个列表

> ID：820302
> 
> 赞同：0
> 
> 时间：2009-05-04T14:15:55.943
> 
> 标签：c#, listbox, datasource

我正在尝试将几个 ListBox 绑定到一个列表。当一个表单上的 ListBox 更新时，我希望它也更新另一个 ListBox。

我遇到的问题是，当我更新基础列表时，它似乎没有更新 ListBox 上的视图。如果我在调试中查看 ListBox.Items，我可以看到我添加的所有项目都在那里，但没有显示。此外，当我打开另一个在 ListBox 上显示列表的表单时，它确实正确显示了已添加的任何项目。

```
private List<String> _list;

public Form1()
{
   InitializeComponent();

   _list = StaticInstanceOfList.GetInstance();
   listbox1.DataSource = _list;
}

public void AddStringToList(string value)
{
   if (!_list.Contains(value))
   {
      _list.Add(value);
   }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-04T14:20:56.057

尝试使用 a来存储您的项目，然后通过该属性[`BindingList<T>`](http://msdn.microsoft.com/en-us/library/ms132679.aspx)将此列表分配给两个列表框。[`DataSource`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.datasource.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T14:22:14.990

使用[bindingSource](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.aspx)并将两个 listBoxes 绑定到它。

# sql - PL/SQL Developer - 忽略/限制查询中的大数据

> ID：820304
> 
> 赞同：2
> 
> 时间：2009-05-04T14:16:37.750
> 
> 标签：sql, plsql

在 PL/SQL Developer v7.1.x 中，有没有办法忽略查询中的大数据类型或“查询数据”功能。例如：如果您右键单击 table`FOO`并选择“Query Data”，这将执行一个`SELECT * FROM FOO`. 如果该表包含`BLOB`数据，则查询将需要一段时间才能完成并暂时锁定应用程序。这在查询远程数据库时尤其成问题（原因很明显）。

我想要一种方法来告诉 PL/SQL Developer 默认情况下不要检索大数据。我知道有一种方法可以限制 ResultSet 的大小，但这并不能满足我的要求。

我可以只选择我想要忽略某些列的每一列，但是我不能使用“查询数据”功能。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-08T05:32:12.173

不，查询数据功能只做一件事，而且只做一件事 - 查询所有数据。

您可能会发现有用的是，您可以将表或视图的名称从浏览器拖到 SQL 窗口中，从弹出的菜单中选择“选择”，它会在包含所有列的表上生成一个 SELECT 语句包括名称 - 但不会立即执行查询。然后，您可以在运行它之前随意编辑它（例如注释掉 LOB 列）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T13:11:26.307

我知道它`Toad`内置了类似的东西，但我不知道禁用 BLOBS 的 PL/SQL Developer 选项。

目前，您剩下的选项是简单地单独选择所有列并截断 blob。

IE：

`select foo, bar, trunc(baz,100) from foo where ...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-05T20:43:03.833

创建一个不包含 blob 列或您通常不想查看的任何列的视图。

# php - PHP会话变量处理不当？

> ID：820307
> 
> 赞同：4
> 
> 时间：2009-05-04T14:17:31.260
> 
> 标签：php, security, session

我目前在我的 cms 中使用以下代码来检查访问者是否以管理员身份登录，以便他可以编辑当前页面：

```
if($_SESSION['admin']=="1")
{
        echo "<a href="foobar/?update">edit</a>";
} 
```

但我担心代码不安全。用户不能轻松修改 $_session 变量吗？

什么是更安全的做法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-04T14:19:20.100

不，这是一个很好的方法。用户不能修改 $_SESSION 全局变量，除非他有权访问您的服务器。请记住**远离客户端 cookie**。

为了使其更加安全，一个好方法是存储 IP 地址并检查它在每个请求之间是否保持相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-04T15:27:53.180

代码没问题，你只是显示一个链接。只需确保您的 UPDATE 脚本也受到保护。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-05T11:21:00.707

我发现了这个关于会话安全的演示文稿

*   [http://talks.php.net/show/phpworks2004-php-session-security/](http://talks.php.net/show/phpworks2004-php-session-security/)

它解释了如何避免：

*   会话固定。
*   会话劫持。

还有更多信息的幻灯片有一些真正的商品链接

*   [http://talks.php.net/show/phpworks2004-php-session-security/18](http://talks.php.net/show/phpworks2004-php-session-security/18)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-04T14:19:32.347

一旦你的编码是安全的，会话变量应该足够安全。

另外，请改用以下内容。使用 == 停止错误 可能也应该使用 true ，因为它比字符串比较快得多。

```
if( "1" === $_SESSION['admin'] ) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-04T14:20:05.417

`$_SESSION`变量不能由用户设置。因此，该代码非常好，尽管您通常会询问您的用户后端（通常只是一个表用户，有时是 LDAP）有关当前用户的权限。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-11T06:54:42.927

此代码不再安全：

```
if mypage.php contains this code:

session_start();
$_SESSION['admin']==1;
echo "<a href='http://the.link-to-your-page.php' target='_blank'>link</a>"; 
```

如果点击链接，会话管理员为 1 将被带到您的页面并出现编辑按钮。

最安全的方法是在登录通过身份验证后立即设置令牌（这是一个非常简单的步骤）。例如`$token = sh512($var.....); $_SESSION['token']=$token;`

在每一页的顶部放上这样的东西：

```
if(!isset($_SESSION['token'])){ die('Access Denied');}
if(!isset($_SESSION['username'])){ die('Access Granted');} 
```

首先检查 SESSION 中的令牌携带，然后检查用户 ID，包括用户的权限级别。这只是一种简单的做法，在开头多放些指纹扫描码，让截取sessionid变得复杂。

# moq - 我如何最小化这个 DotNetOpenAuth 响应对象？

> ID：820308
> 
> 赞同：1
> 
> 时间：2009-05-04T14:17:40.727
> 
> 标签：moq, dotnetopenauth

我有一个接受[DotNetOpenAuth](http://code.google.com/p/dotnetopenid/)（正式称为 DotNetOpenId）`Response`对象的方法。我的方法提取任何声明的数据，检查该用户是否存在于我们的系统中，yadda yadda yadda... 完成后返回经过身份验证的用户实例。

现在..我如何使用*moq*来模拟这个响应对象，以测试我的身份验证方法（`AuthenticateUser()`）？

```
switch (response.Status)
{
    case AuthenticationStatus.Authenticated:

    User user = null;
    try
    {
        // Extract the claimed information and 
        // check if this user is valid, etc.
        // Any errors with be thrown as Authentication Errors.
        user = _authenticationService.AuthenticateUser(response) as User;
    }
    catch (AuthenticationException exception)
    {
        ViewData.ModelState.AddModelError("AuthenticationError", exception);
    }

    .. other code, like forms auth, other response.status' etc. ..
} 
```

模拟框架：moq
语言：.NET C# 3.5 sp1
响应对象：取自 DotNetOpenAuth 框架

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-05T01:01:42.443

我对 Moq 并不特别熟悉，但是响应对象是一个实现的类型`DotNetOpenAuth.OpenId.RelyingParty.IAuthenticationResponse`，因此可以通过创建一个实现相同接口并准备返回相同类型值的类来轻松地模拟它。

...刚刚下载了 Moq 并像这样模拟了 IAuthenticationResponse：

```
var response = new Mock<IAuthenticationResponse>(MockBehavior.Loose);
response.SetupGet(r => r.ClaimedIdentifier)
        .Returns("http://blog.nerdbank.net/");
response.SetupGet(r => r.Status)
        .Returns(AuthenticationStatus.Authenticated);
response.SetupGet(r => r.FriendlyIdentifierForDisplay)
        .Returns("blog.nerdbank.net");

IAuthenticationResponse resp = response.Object;
Console.WriteLine(resp.ClaimedIdentifier); 
```

显然，与其将结果发送给`Console.WriteLine`您，不如将`resp`对象传递给您正在测试的方法。

# apache - 使用 Apache mod_proxy 的风险

> ID：820310
> 
> 赞同：10
> 
> 时间：2009-05-04T14:18:45.263
> 
> 标签：apache, mod-proxy

我现在正在探索使用 Apache 的 mod_proxy 指令，例如 ProxyPass，作为跨域脚本限制解决方案的一部分（用于 html/ajax/flash 代码）。但是，我担心通过启用 mod_proxy，我会冒着将服务器作为开放代理的风险。

简而言之，风险是什么，如何将风险降到最低？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-04T14:26:18.040

由于您特别提到了 ProxyPass，我假设您使用 mod_proxy 作为反向代理。

如果是这种情况，只需确保 ProxyRequests 已关闭。反向代理不需要它。

在转发代理配置中，如果您要启用 ProxyRequests 而不设置访问限制（即允许哪些主机/网络使用代理），您可以很容易地使用开放代理。

有关更多信息，请参阅[mod_proxy 文档](http://httpd.apache.org/docs/2.0/mod/mod_proxy.html#proxyrequests)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-04T14:27:01.673

只需确保将**ProxyRequests**设置为**Off**：

这可以防止 Apache 充当正向代理服务器（这是对开放代理的关注所在），但不影响其使用 ProxyPass 作为反向代理

# java - JAX-WS 调度响应中的错误编码

> ID：820311
> 
> 赞同：0
> 
> 时间：2009-05-04T14:18:50.897
> 
> 标签：java, xml, character-encoding, jax-ws

我正在尝试使用 JAX-WS 访问 Web 服务：

```
Dispatch<Source> sourceDispatch = null;
sourceDispatch = service.createDispatch(portQName, Source.class, Service.Mode.PAYLOAD);
Source result = sourceDispatch.invoke(new StreamSource(new StringReader(req)));
System.out.println(sourceToXMLString(result)); 
```

在哪里：

```
private static String sourceToXMLString(Source result)
        throws TransformerConfigurationException, TransformerException {
    String xmlResult = null;
    try {
        TransformerFactory factory = TransformerFactory.newInstance();
        Transformer transformer = factory.newTransformer();
        transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
        transformer.setOutputProperty(OutputKeys.METHOD, "xml");
        transformer.setOutputProperty(OutputKeys.ENCODING, "utf-8");
        OutputStream out = new ByteArrayOutputStream();
        StreamResult streamResult = new StreamResult();
        streamResult.setOutputStream(out);
        transformer.transform(result, streamResult);
        xmlResult = streamResult.getOutputStream().toString();
    } catch (TransformerException e) {
        e.printStackTrace();
    }
    return xmlResult;
} 
```

当我在 utf-8 页面上打印结果时，utf-8 字符显示不正确。

由于 WS 可以与其他工具一起正常工作（返回 UTF-8 正常），我倾向于认为我的转换**sourceToXMLString()**存在一些问题。这会破坏我的编码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T14:54:36.257

尝试以下操作：

```
private static String sourceToXMLString(Source result) throws TransformerConfigurationException, TransformerException {

String xmlResult = null;
try {
    TransformerFactory factory = TransformerFactory.newInstance();
    Transformer transformer = factory.newTransformer();
    transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
    transformer.setOutputProperty(OutputKeys.METHOD, "xml");
    transformer.setOutputProperty(OutputKeys.ENCODING, "utf-8");
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    transformer.transform(result, new StreamResult(out));
    xmlResult = out.toString("UTF-8");
    // or xmlResult = new String(out.toByteArray(), "UTF-8");
} catch (TransformerException e) {
    e.printStackTrace();
}
return xmlResult; 
} 
```

# iphone - NSHost 花费了很长时间

> ID：820322
> 
> 赞同：1
> 
> 时间：2009-05-04T14:20:48.410
> 
> 标签：iphone, cocoa-touch, sockets, nshost

我有一个 iPhone 应用程序，它是现有服务器应用程序的客户端。

我正在使用以下代码进行连接，并且此代码运行良好。今天我开始了这个项目，奇怪的事情正在发生。

当我单击“连接”时，NSHost 大约需要 30-45 秒才能解析并连接到主机。建立连接后，数据传输速度正常且快速。

我有原始客户端软件（PC应用程序）连接到同一台服务器，并且立即处理连接！

也许有人可以对这个主题有所了解......

```
-(IBAction)tryConnection{
    [self showLogoffButtons];
    iPhone_PNPAppDelegate *mainDelegate = (iPhone_PNPAppDelegate *)[[UIApplication sharedApplication] delegate];
    settings=mainDelegate.settings; 
    [activityindicator startAnimating];
    sendState=0;

    NSHost* host;

    //30-45 second pause happens here (since I am using an IP Address)
    host = [NSHost hostWithAddress:settings.masterLocation];
    //NSHost returns (eventually) with the correct connection.

    if (!host)  {
        host = [NSHost hostWithName:settings.masterLocation];
    }
    if( host ) {
        [NSStream getStreamsToHost:host port:[settings.masterPort intValue] inputStream:&iStream outputStream:&oStream] ;
        if( nil != iStream && nil != oStream ) {
            [iStream retain];
            [oStream retain];
            [iStream setDelegate:self];
            [oStream setDelegate:self];
            [iStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
            [oStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
            [iStream open];
            [oStream open]; 
        }else{
            [self resetConnectionAndScreen];
            self.navigationItem.prompt=@"Connection Error! Please check connection settings.";
        }

    }else{
        [self resetConnectionAndScreen];
        self.navigationItem.prompt=@"Connection Error! Please check connection settings.";
    }
} 
```

//我现在也收到这些警告。**.. wth?! :)

*   警告：找不到“+hostWithAddress:”方法
*   警告：（没有匹配方法签名的消息
*   警告：找不到“+hostWithName:”方法
*   警告：“NSStream”可能不会响应“+getStreamsToHost:port:inputStream:outputStream:”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T15:00:12.140

我已将我的代码更新为以下内容，这解决了我的问题。

```
-(IBAction)tryConnection{   
    CFReadStreamRef readStream = NULL;
    CFWriteStreamRef writeStream = NULL;
    CFStreamCreatePairWithSocketToHost(kCFAllocatorDefault, (CFStringRef)settings.masterLocation, [settings.masterPort intValue], &readStream, &writeStream);
    if (readStream && writeStream) {
        CFReadStreamSetProperty(readStream, kCFStreamPropertyShouldCloseNativeSocket, kCFBooleanTrue);
        CFWriteStreamSetProperty(writeStream, kCFStreamPropertyShouldCloseNativeSocket, kCFBooleanTrue);

        iStream = (NSInputStream *)readStream;
        [iStream retain];
        [iStream setDelegate:self];
        [iStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
        [iStream open];

        oStream = (NSOutputStream *)writeStream;
        [oStream retain];
        [oStream setDelegate:self];
        [oStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
        [oStream open];     
    }
    if (readStream) CFRelease(readStream);
    if (writeStream) CFRelease(writeStream);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-26T15:19:41.730

这是使用 cfsockets 的另一种联网方式

[http://randomsnippetsofusefulstuff.blogspot.com/](http://randomsnippetsofusefulstuff.blogspot.com/)

# javascript - 如何在原型 1.5.1 中向上/向下移动兄弟元素的顺序？

> ID：820324
> 
> 赞同：2
> 
> 时间：2009-05-04T14:20:56.507
> 
> 标签：javascript, prototypejs

我正在尝试设置一个函数以允许在表格中“向上”和“向下”移动表格行。表格的行数是动态的——用户可以点击一个按钮来添加额外的行。每个表格行中有多个字段。有一个具有不同类名的页眉行和页脚行，因此检查 hasClassName。

我首先成功地编写了此函数以用于 Prototype 1.6，然后才意识到我需要它与 1.5.1 版本一起使用。当有时间进行测试时，我们将升级到最新版本的 Prototype，但我需要它在我们项目的当前版本下工作。

主要问题是在 1.5 中你不能只插入一个元素作为插入的内容。这意味着我需要要插入的元素的 HTML。这带来了一个问题，当我访问元素的 HTML（变量“insertHTML”）时，这是原始 HTML，不包括用户输入到相关表单元素中的信息。

任何帮助将不胜感激。

```
moveDataDef: function(num, dir) {
    var targRow = $('dataDefItem'+num);
    var content = targRow.innerHTML;
    var siblings;
    var insertHTML = targRow.inspect() + targRow.innerHTML + '</tr>';

    if(dir == 'up')
        siblings = targRow.previousSiblings();
    else
        siblings = targRow.nextSiblings();

    if (siblings[0].hasClassName('dataDefItem')) {
        targRow.remove();
        if(dir == 'up')
            new Insertion.Before(siblings[siblings.length - 1].id, targRow);
        else
            new Insertion.After(siblings[0].id, targRow);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T15:15:51.307

我想，您可以使用此代码的一部分来替换较低的 if 块。它使用原生 DOM 函数，即**insertBefore()**：

```
if (siblings[0].hasClassName('dataDefItem')) {
  var targetParent = targRow.parentNode;
  var sibling = siblings[0];

  if(dir == 'up'){
    targRow.remove();
    targetParent.insertBefore(targRow, sibling);
  } else {
    sibling.remove();
    targetParent.insertBefore(sibling, targRow);
  }
} 
```

供您参考，如果您有兴趣，这是我的 POC 代码：

```
<table id="tb1">
<tbody>
<tr id="tr1"><td>1</td></tr>
<tr id="tr2"><td>2</td></tr>
<tr id="tr3"><td>3</td></tr>
</tbody>
</table>

<script type="text/javascript">
/* <![CDATA[ */
(function(){
var trr3 = $('tr3');
var tp = trr3.parentNode; 
var trr1 =trr3.previousSiblings();
trr3.remove();
tp.insertBefore(trr3, trr1[0]);
})();
/* ]]> */
</script> 
```

谢谢。

更新：修正错字（缺少“{”和“}”）。

# java - 访问 sun.awt 包中的非公共类 [特别是：FetcherInfo]

> ID：820334
> 
> 赞同：0
> 
> 时间：2009-05-04T14:23:48.827
> 
> 标签：java, security, awt, javax.imageio, securitymanager

**问题：**

我的应用程序存在一些性能问题 - 瓶颈是`sun.awt.image.ImageFetcher.run`，我无法从探查器获得任何（更多）有意义的信息。所以我认为看看 ImageFetcher 正在做的工作会很好。

我无法进入`FetcherInfo`拥有所有`ImageFetcher`工作的班级。要获得`FetcherInfo`实例，我必须调用`FetcherInfo.getFetcherInfo()`.

我在包中创建了类`sun.awt.image`（只是在我的项目中，我没有修改 rt.jar）。

为了让`FetcherInfo`我使用：

```
try{
   for(Method method : FetcherInfo.class.getDeclaredMethods()){
      method.setAccessible(true);
      if(method.getName().equals("getFetcherInfo")){
         m = method;
      }
   }
}catch (Exception e){
   e.printStackTrace();
}

FetcherInfo info = null;
try {
   info = (FetcherInfo) m.invoke(null);
} catch (IllegalAccessException e) {
   e.printStackTrace();
} catch (InvocationTargetException e) {
   e.printStackTrace();
} 
```

我得到了例外：`Exception in thread "IMAGE-FETCHER-WATCHER" java.lang.IllegalAccessError: tried to access class sun.awt.image.FetcherInfo from class sun.awt.image.FetcherDebug`

堆栈跟踪指向：

```
for(Method method : FetcherInfo.class.getDeclaredMethods()){ 
```

由以下人员引发了相同的异常：

```
 FetcherInfo.class.getMethod("getFetcherInfo"); 
```

所以任何人都有任何想法如何：

*   获取 ImageFetcher 实例
*   找出正在加载的图像

**解决方案**

问题是我已经将我的类放入`sun.java.awt`包中以访问包受保护的成员，而没有将其放入`rt.jar`，并且在调用时抛出异常`ImageFetcher.class`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T15:38:33.653

要访问不可访问的成员，请使用`setAccessible(true)`. （如果没有安全管理器，则不会阻止`sun.*`类与反射一起使用。）

```
import java.lang.reflect.Method;

public class Access {
    public static void main(String[] args) throws Exception {
        Class<?> imageFetcher = Class.forName("sun.awt.image.FetcherInfo");
        for (Method method : imageFetcher.getDeclaredMethods()) {
            ;
        }
        Method method = imageFetcher.getDeclaredMethod("getFetcherInfo");
        method.setAccessible(true);
        Object fetcher = method.invoke(null);
        System.err.println(fetcher);
    }
} 
```

# jquery - 序列化所有字段

> ID：820335
> 
> 赞同：0
> 
> 时间：2009-05-04T14:24:08.123
> 
> 标签：jquery, forms, serialization

我检查了 jquery 序列化文档，我试图找到最好的方法来序列化我的表单中的所有字段，然后打印输出，演示有如下内容：

```
 function showValues() {
          var str = $("form").serialize();
          $("#results").text(str);
        }

        $(":checkbox, :radio").click(showValues);
        $("select").change(showValues);
        showValues();
    }); 
```

即使在表单提交时调用序列化，使用 return false 并让它显示出来。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T14:33:06.587

如果你使用[表单](http://plugins.jquery.com/project/form)插件，你可以这样做：

```
var formData = jQuery('form').formSerialize();
alert(formData); 
```

这将序列化表单中的所有元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T14:34:02.357

您是否放入 document.ready 方法？看起来你正在以这种方式结束......它应该是：

```
$(function() {
    $(":checkbox, :radio").click(showValues);
    $("select").change(showValues);
    $('form').bind('submit',function() { showValues(); return false; });
    showValues();
});

function showValues() {
    var str = $("form").serialize();
    $("#results").text(str);
} 
```

# objective-c - 访问 DOM Webkit Objective C

> ID：820338
> 
> 赞同：2
> 
> 时间：2009-05-04T14:25:11.600
> 
> 标签：objective-c, api, webkit

熟悉 webkit 的人能否解释一下或指出正确的方向为什么以下代码不起作用

我想要做的是加载一个页面，让 webkit 解析它并简单地打印出标题。

这是我所拥有的：

```
#include <iostream>
#include <WebKit/WebKit.h>

using namespace std;

/*
 Seek Help
*/
int main (int argc, char * const argv[]) {      
    NSAutoreleasePool    *autoreleasepool = [[NSAutoreleasePool alloc] init];

     WebFrame * mainFrame;
     WebView * view = [[WebView alloc] initWithFrame: NSMakeRect (0,0,640,480)];

    mainFrame = [view mainFrame];
    NSString * url = @"http://test.com";
    [[view mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:url]]];

    NSString * data = @"<html><head><title>testing</title></head><body>tester</body></html>";
    [[view mainFrame] loadHTMLString:data baseURL: nil];

    // NSString * urlString = [[NSString alloc] initWithUTF8String:"<html><head><title>Hello World</title></head><body><p>My first Web page.</p></body></html>"];

    //[[view mainFrame] loadHTMLString:urlString baseURL:nil];    

    NSString * outerHtml = [(DOMHTMLElement *)[[[view mainFrame] DOMDocument] documentElement] innerHTML];

     cout << "Html: " << [outerHtml UTF8String] << endl;

    NSString * title = [view mainFrameTitle];

    cout << "title: " << [title UTF8String] << endl;

    [autoreleasepool release];

     return 0;
} 
```

输出为 html 且标题为空白

谢谢你的阅读

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-05T12:07:35.167

它不起作用，因为 WebKit 依赖 RunLoop 来加载内容，即使它只是静态内容。

您应该添加一个标准运行循环，例如：

```
while (!done) {
    pool = [[NSAutoreleasePool alloc] init];
    [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode
                             beforeDate:[NSDate distantPast]];
    [pool release];
} 
```

并创建一个您设置为 WebFrameLoadDelegate ( `webView.frameLoadDelegate = thatObject`) 的自定义类，在`- (void)webView:(WebView *)sender didFinishLoadForFrame:(WebFrame *)frame`回调中您应该能够访问 DOM。此外，当加载完成时，将`done`标志设置为 YES。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T22:39:56.397

如果您只想解析 HTML，为什么不使用 NSXMLDocument 而不是 WebView。我相信它的 initWithContentsOfURL 初始化程序会阻塞，直到加载 url。如果这不起作用，请尝试为 URL 创建一个 NSURLRequest，然后使用 [NSURLConnection sendSynchronousRequest:..] 加载它，然后将其提供给 NSXMLDocument。

# asp.net - 我在哪里可以找到关于页面请求生命周期的详细教程？

> ID：820342
> 
> 赞同：3
> 
> 时间：2009-05-04T14:26:33.640
> 
> 标签：asp.net, lifecycle

关于页面请求生命周期的详细教程。

我已经阅读了 ASP.NET 页面生命周期，我说的是 .NET 进程开始处理请求之前发生的事情。

即在浏览器中键入域，DNS 映射？等等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T15:02:27.827

快速参考：

我一直使用下面的图表，它挂在我的桌子上： [http ://blog.krisvandermast.com/ASPNET20PageLifeCycle.aspx](http://blog.krisvandermast.com/ASPNET20PageLifeCycle.aspx)

以及每个阶段的详细版本：http: [//john-sheehan.com/blog/wp-content/uploads/aspnet-life-cycles-events.pdf](http://john-sheehan.com/blog/wp-content/uploads/aspnet-life-cycles-events.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T14:38:58.493

我发现[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms178473.aspx)非常有趣，希望你也喜欢它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T14:39:55.713

我会阅读[IIS 5.0 和 6.0 的 ASP.NET 应用程序生命周期概述](http://msdn.microsoft.com/en-us/library/ms178473.aspx)：

> 在 ASP.NET 中，必须执行几个处理步骤才能初始化 ASP.NET 应用程序并处理请求。此外，ASP.NET 只是为浏览器发出的请求提供服务的 Web 服务器体系结构的一部分。了解应用程序生命周期对您来说很重要，这样您就可以在适当的生命周期阶段编写代码以获得您想要的效果。

# java - 是否可以在覆盖的方法中有专门的参数？

> ID：820344
> 
> 赞同：2
> 
> 时间：2009-05-04T14:27:05.243
> 
> 标签：java, abstract-class, overriding

假设我有一个名为“shape”的抽象父类，并且有多个子类（三角形、正方形、圆形......）。我想在父“shape”类中定义一个所有子类都必须实现的抽象方法，我们称之为“draw”。所以所有形状子类都必须提供“draw()”方法。但是，draw 方法采用“Stencil”类型的参数，并且，并非每个形状子类都可以使用任何模板......

所以有一个抽象的“形状”类、多个形状子类和多个模板。我需要一个在 shape 类中定义的 draw 方法。正方形可能使用 Stencil1，圆形可能使用 Stencil2。

我猜泛型可以解决问题，但我不确定。每个形状子类都需要使用特定的模板定义绘图方法，因为这些类也被其他类使用，编译器应该强制所有程序员使用该类支持的模板调用绘图方法。我们不能定义像“public abstract void draw(Stencil s)”这样的抽象方法，因为程序员可以将任何模板传递给 square 类，而 square 类只支持“Stencil1”

有任何想法吗？

**更新1：** 应该补充一点，形状类不关心子类使用哪个模板，但由于其他类也使用子类，所以定义draw方法很重要，以便编译器只接受支持的模板.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-04T14:38:24.593

```
public abstract class Shape<S extends Stencil>
{
   public abstract void draw( S stencil );
}

public class Square extends Shape<Stencil1>
{
   public void draw( Stencil1 stencil )
   {
     stencil.letsdo();
     stencil.some();
     stencil.drawing();
   }
}

public class Circle extends Shape<Stencil2>
{
   public void draw( Stencil2 stencil )
   {
      stencil.some();
      stencil.more();
      stencil.drawing();
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T14:36:46.423

我认为您可能应该重新考虑您的初始设计。

当然，您*可以*通过使用 instanceof 等来解决此问题。但是，这将导致 API 非常混乱（如果您正在使用它）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T14:39:31.580

定义一个抽象模板并让子类构造函数决定使用哪个模板类。

```
private Stencil s;

public void draw(){
   privateDraw(s)
}

private abstract void privateDraw(Stencil s); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T14:36:11.103

如果您希望在编译时捕获它，请考虑以下选项：

*   创建一组抽象模具。特别是如果您认为可以将它们分组。因此，如果您将有多个“方形”模板，请创建一个 SquareStencil 抽象类型并从中派生具体实例。您甚至可以将它们创建为抽象 Stencils 类的子集。
*   重载draw方法。它没有必要是通用的。让编译器通过为工作选择正确的方法来帮助您。

# xml - AS3：来自 XML 属性的所有键 + 值

> ID：820347
> 
> 赞同：1
> 
> 时间：2009-05-04T14:27:39.190
> 
> 标签：xml, actionscript-3, xml-attribute

```
<top>
    <item link="http://www.google.be"><![CDATA[test]]></item>
    <item link="http://www.google.be"><![CDATA[test]]></item>
    <item bold="true" link="http://www.google.be"><![CDATA[test]]></item>
</top> 
```

我需要获取所有属性（键和值）

```
for each ( var item : XML in data.item )
{
     trace(item.attributes().name());
} 
```

给出这个错误

```
 TypeError: Error #1086: The name method only works on lists containing one item. 
```

第 3 项

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-04T14:46:25.807

它在第三个项目上爆炸的原因是它有两个属性。您正在使用仅在只有一个属性时才获取名称的快捷方式。您需要将代码更改为以下内容：

```
for each (var item : XML in data.items)
{
    for each (var attr : XML in item.attributes())
    {
        trace(attr.name());
    }
} 
```

编辑：名称后的括号丢失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-02-03T13:54:22.450

使用 attr.valueOf() 获取该属性的值

```
for each (var item : XML in data.items)
{
    for each (var attr : XML in item.attributes())
    {
        trace(attr.name()+":"+ attr.valueOf());
    }
} 
```

# perl - 为什么 Perl 和 Word VBA 中 Word 文档的页数不同？

> ID：820348
> 
> 赞同：2
> 
> 时间：2009-05-04T14:27:46.460
> 
> 标签：perl, winapi, ms-word, ole

我有一个（一组）Word 文档，我试图在 Perl 中使用 Win32::OLE 获取各种属性（页数、作者等）：

```
print $MSWord->Documents->Open($name)->
BuiltInDocumentProperties->{"Number of pages"}->value . " \n"; 
```

这将返回 4 页。但是文档的实际页数是9。第一节的页数是4。我想要文档的总页数。

如果在 Word VBA 中，我执行以下操作：

```
MsgBox ActiveDocument.BuiltInDocumentProperties("Number of pages") 
```

这将显示 9。“属性/统计”页面中显示的页面数为 9。

我必须强制重新计算吗？有什么方法可以让 OLE 库强制重新计算，还是我必须分别处理每个部分？

我在 XP、Word 2007、ActivePerl v5.10.0 上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-04T19:26:30.267

```
#!/usr/bin/perl

use strict;
use warnings;

use File::Spec::Functions qw( catfile );

use Win32::OLE;
use Win32::OLE::Const 'Microsoft Word';
$Win32::OLE::Warn = 3;

my $word = get_word();
$word->{Visible} = 1;

my $doc = $word->{Documents}->Open(catfile $ENV{TEMP}, 'test.doc');
$doc->Repaginate;

my $props = $doc->BuiltInDocumentProperties;
my $x = $props->Item(wdPropertyPages)->valof;
print "$x\n";

$doc->Close(0);

sub get_word {
    my $word;
    eval {
        $word = Win32::OLE->GetActiveObject('Word.Application');
    };

    die "$@\n" if $@;

    unless(defined $word) {
        $word = Win32::OLE->new('Word.Application', sub { $_[0]->Quit })
            or die "Oops, cannot start Word: ", 
                   Win32::OLE->LastError, "\n";
    }
    return $word;
} 
```

# sql-server-2005 - 安装 sql server 2005 中的错误

> ID：820352
> 
> 赞同：-3
> 
> 时间：2009-05-04T14:31:24.673
> 
> 标签：sql-server-2005

当我想安装 sql server 2005 时，这个错误是什么意思？

## > 标题：Microsoft SQL Server 设置

无法安装或升级任何选定的功能。由于没有对机器进行有效更改，安装程序无法继续。要继续，请单击返回，然后选择要安装的功能。要退出 SQL Server 安装程序，请单击取消。

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T14:40:11.860

该消息非常具有自我描述性。安装不相信您正在对机器进行任何更改。对于这个问题，Google/MSDN/Microsoft Help 是一个比 stackoverflow 更好的论坛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T14:39:49.957

它认为您正在升级已安装的系统而不是新实例。检查已安装的程序，看是否有以前的版本；如果您正在创建一个新实例，请确保在完成向导时指定它。

# desktop - 开发机器的最佳快捷方式管理工具？

> ID：820354
> 
> 赞同：2
> 
> 时间：2009-05-04T14:32:20.520
> 
> 标签：desktop, development-environment

作为一名开发人员，我每天都会使用大量的快捷方式和应用程序。Visual Studio 6、2003、2005、2008、SQL 客户端工具、WinMerge、Notepad++、Synergy、VMware（以及大量虚拟机、多个浏览器，以及最重要的 20 个重要目录、服务器、测试环境等的快捷方式） ...

Vista 开始菜单是快速访问其中许多的救命稻草。然而，有很多日常任务仍然需要相对大量的工作才能访问（打开一个文件夹，跳转几个子文件夹，找到一个特定的文件并启动它。

您认为哪些工具/应用程序/实用程序最有利于提供对所有最常访问的工具的有组织和快速的访问？

有哪些工具可以嵌入到 Windows 的任务栏上，提供与 Linux 中的抽屉或 OS X 中的堆栈类似的功能？我当前的快速启动栏（以及添加到任务栏的其他文件夹）占用了大量空间，并坚持打开新的资源管理器窗口以显示子目录，这已经足够了，但仍然很慢并且污染了我的桌面。

*...等不及明天获得 Win 7 RC 及其最终改进的任务栏*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-04T14:37:22.070

[启动](http://www.launchy.net/)。[我是从Scott Hanselman](http://www.hanselman.com/blog/ScottHanselmans2007UltimateDeveloperAndPowerUsersToolListForWindows.aspx)那里第一次听说的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-04T14:36:24.647

从 Stardock查看[Fences 。](http://www.stardock.com/products/fences/)它非常聪明，即使有很多快捷方式，也能让您的桌面保持整洁有序。哦，它是免费的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-04T14:39:35.260

不确定这是否是您要找的，但我是[SlickRun](http://www.bayden.com/SlickRun/)的忠实粉丝。它基本上是一个命令启动器工具，但它是我启动几乎所有东西的方式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-04T14:41:07.973

**我喜欢[人性化的恩索](http://www.humanized.com/)。**

他们的产品现在是免费的，尽管它不再由原作者开发。

还有一个基于 Enso 原型的[Google Code 项目](http://code.google.com/p/enso/)，它允许您使用 Python 轻松扩展它。

**简短的摘要：**

*   允许您教授程序的快捷方式
*   具有不错的功能，例如：
    *   综合翻译...
    *   集成谷歌地图...
    *   综合词典
    *   集成的谷歌搜索
    *   ETC...
*   由现在在[Mozilla Ubiquity工作的同一个人开发](http://labs.mozilla.com/projects/ubiquity/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-04T14:39:35.683

我非常喜欢[SlickRun](http://www.bayden.com/SlickRun/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-04T14:42:10.170

我使用[热键盘](http://www.hot-keyboard.com/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-04T14:40:06.603

如果您使用的是 XP，我认为 Virtual Desktop Manager 是一个很好的解决方案。我不知道是否有适用于 Windows Vista 的类似 Microsoft 产品.. :(

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-05-04T14:38:19.757

Quicksilver 风格的发射器在完成这项任务时非常常见。您按下键盘快捷键或单击托盘中的图标，会弹出一个窗口，您可以在其中搜索程序、文档、快捷方式、书签等。

查看[Launchy](http://www.launchy.net/)，它简单、干净且免费。

# c# - 有没有办法获取 C# 类或库并自动将其转换为 Visio？

> ID：820362
> 
> 赞同：6
> 
> 时间：2009-05-04T14:34:59.813
> 
> 标签：c#, visual-studio, visio

我有一个需要记录的 C# 类库。有没有办法可以将项目或类转换为 Visio Uml。

我正在使用 Visual Studios 2008 Professional。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-04T14:38:33.923

我认为这个线程回答了你的问题：

[http://social.msdn.microsoft.com/forums/en-US/vstsarch/thread/07b39757-eac4-49fa-81d5-8d167c9b9d21/](http://social.msdn.microsoft.com/forums/en-US/vstsarch/thread/07b39757-eac4-49fa-81d5-8d167c9b9d21/)

*正如“Program.X”所述，上述链接不再有效。*

简短回答：Visio UML 模型中的代码逆向工程与 Visio Pro 2007 和 Visual Studio Team System for Software Architects 2005 的组合一起使用。它不适用于 Visio Pro 2007 和 Visual Studio Team System Architecture Edition 2008。但是，Visio Pro 2007 确实允许您对数据库进行逆向工程。

为什么？：现在所有版本的 Visual Studio 都以类设计器的形式提供了对代码进行逆向工程的能力，其中代码与模型持续同步。未来将在 Visual Studio Team System 中提供其他建模功能。

显然有人找到了 VS2008 的解决方法，但使用它需要您自担风险。 [http://www.nullify.net/Article/298.aspx](http://www.nullify.net/Article/298.aspx)

还有一篇关于这个主题的 MSDN 文章：http: [//msdn.microsoft.com/en-us/library/cc947873.aspx](http://msdn.microsoft.com/en-us/library/cc947873.aspx)

# javascript - getElementsByTagName 的替代方案

> ID：820369
> 
> 赞同：1
> 
> 时间：2009-05-04T14:36:43.083
> 
> 标签：javascript, html, dom

由于 getElementsByTagName() 函数是新的（DOM-1？），我想要另一种更可靠的方法来根据其标签名称/id 获取对元素的引用。

**编辑-** 不使用框架，因为我需要缩小尺寸；所以一个框架10-20K是不可接受的。我只需要可以获取元素的 JS 代码

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-04T14:41:31.030

getElementsByTagName 并不新鲜。根据[w3schools ，它从 IE5、FF1 和 Opera 7 开始受支持](http://www.w3schools.com/HTMLDOM/dom_obj_document.asp)

[编辑] 感谢您指出这一点。从 Opera 7 开始确实支持它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-04T14:37:45.127

如前所述，getElementsByTagName 不是新的......

我认为您将获得大约 10 次对[jQuery](http://jquery.com)的引用。

返回所有段落元素：

```
$('p').length 
```

如果 19kb 太大，而你只想进行元素选择，那么像[sizzle](http://sizzlejs.com/)这样的东西效果很好，大约 4kb。我唯一要注意的是，无论如何你可能最终会需要 jQuery 中的东西。

[http://sizzlejs.com/](http://sizzlejs.com/)

查询非常相似：

```
Sizzle("li"); 
```

19kb 对于 jQuery 的强大功能来说是非常小的一次性价格。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-04T14:41:21.887

如果您只想选择元素，那么只使用 sizzle 选择器引擎而不是完整的库可能是明智的。我会使用完整的库，但是，使用选择器引擎在有限的情况下可能会有用。

Sizzle 是支持 jQuery 的 CSS 选择器引擎。

[http://sizzlejs.com/](http://sizzlejs.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T14:38:44.547

或原型等。您需要使用这些 javascript 胶水库之一来实现这一点。如果它存在，他们都会调用这个函数，否则会伪造它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-31T13:02:48.930

这是一个基于 jQuery 1.12.4 实现的实现。如果可用，它使用 getElementsByTagName。如果没有，它会使用 querySelectorAll（如果可用）。如果不是，它会退回到递归遍历。jQuery 1.12.4 支持较旧的浏览器，例如 IE6，根据[自己](https://blog.jquery.com/2014/04/02/browser-support-in-jquery-1-12-and-beyond/)的情况。

```
function getElementsByTagName( node, tagName ) {
  if (tagName == '*') {
    tagName = undefined;
  }
  var merge = function( first, second ) {
        var len = +second.length,
            j = 0,
            i = first.length;

        while ( j < len ) {
            first[ i++ ] = second[ j++ ];
        }

        // Support: IE<9
        // Workaround casting of .length to NaN on otherwise arraylike objects (e.g., NodeLists)
        if ( len !== len ) {
            while ( second[ j ] !== undefined ) {
                first[ i++ ] = second[ j++ ];
            }
        }

        first.length = i;

        return first;
    },
    nodeName = function( elem, name ) {
        return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();
    },
  elems, elem,
    i = 0,
  context = node,
  tag = tagName,
    found = typeof context.getElementsByTagName !== "undefined" ?
        context.getElementsByTagName( tag || "*" ) :
        typeof context.querySelectorAll !== "undefined" ?
            context.querySelectorAll( tag || "*" ) :
            undefined;

    if ( !found ) {
        for ( found = [], elems = context.childNodes || context;
            ( elem = elems[ i ] ) != null;
            i++
        ) {
            if ( !tag || nodeName( elem, tag ) ) {
                found.push( elem );
            } else {
                merge( found, getElementsByTagName( elem, tag ) );
            }
        }
    }

  return found;
/*  return tag === undefined || tag && nodeName( context, tag ) ?
        merge( [ context ], found ) :
        found;*/
} 
```

我使用了 jQuery 1.12.4 的 getAll() 内部函数，并复制了它需要的两个辅助函数（jQuery.nodeName 和 jQuery.merge）。我还确保您可以通过在函数顶部添加几行来使用“*”作为 tagName 来调用它。最后，在函数的末尾，我注释掉了一些功能，它将当前节点添加到结果中（如果匹配），并简单地返回找到的节点。

请注意，该函数在某些情况下会返回 HTMLCollection，而在其他情况下会返回 Array。另请注意，当“*”作为标记名传递时，输出因浏览器而异： Element.prototype.getElementsByTagName 不返回 TextNodes，但递归遍历会。

或者，您可以使用[picoQuery](http://picoQuery.com)。picoQuery 是 jQuery 的实现，您可以在其中选择在线构建器中需要的方法。在这种情况下，您不需要任何方法，因为选择是核心的一部分，并且构建只是 1kb gzip 压缩。picoQuery 是为现代浏览器编写的，但对于旧浏览器则回退到 jQuery 1.12.4。

# silverlight - .NET Web 服务的 Silverlight 序列化导致 XML 错误

> ID：820376
> 
> 赞同：0
> 
> 时间：2009-05-04T14:37:35.033
> 
> 标签：silverlight, web-services, serialization, wcf-binding

我有这个类由 Web 服务提供，然后由 Silverlight 应用程序使用（我不知道这是否相关）

```
[Serializable]
public class Entry
{
    private string _title;

    public string Id { get; set; }
    public string Title { get { return _title; } set { _title = value; } }
    public string Link { get; set; }
    public DateTime Published { get; set; }
    public DateTime Updated { get; set; }
    public User User { get; set; }
    public Service Service { get; set; }
    public List<Comment> Comments { get; set; }
    public List<Like> Likes { get; set; }
    public List<Media> Media { get; set; }
} 
```

我添加的`_title`变量来演示出了什么问题。当我在 silverlight 应用程序中引用 Web 服务时，它会生成以下 xsd：

```
 <xs:complexType name="Entry">
    <xs:sequence>
      <xs:element name="_title" nillable="true" type="xs:string" />
      <xs:element name="_x003C_Comments_x003E_k__BackingField" nillable="true" type="tns:ArrayOfComment" />
      <xs:element name="_x003C_Id_x003E_k__BackingField" nillable="true" type="xs:string" />
      <xs:element name="_x003C_Likes_x003E_k__BackingField" nillable="true" type="tns:ArrayOfLike" />
      <xs:element name="_x003C_Link_x003E_k__BackingField" nillable="true" type="xs:string" />
      <xs:element name="_x003C_Media_x003E_k__BackingField" nillable="true" type="tns:ArrayOfMedia" />
      <xs:element name="_x003C_Published_x003E_k__BackingField" type="xs:dateTime" />
      <xs:element name="_x003C_Service_x003E_k__BackingField" nillable="true" type="tns:Service" />
      <xs:element name="_x003C_Updated_x003E_k__BackingField" type="xs:dateTime" />
      <xs:element name="_x003C_User_x003E_k__BackingField" nillable="true" type="tns:User" />
    </xs:sequence>
  </xs:complexType> 
```

请注意，只有 title 属性被简单命名，其他属性`<Link>_BackingField`在您尝试加载元素时完全消失，因为您不能在属性名称中包含 < 或 >。

为什么它序列化支持字段而不是公共属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T15:11:10.007

如[本文所述](http://msdn.microsoft.com/en-us/magazine/cc163569.aspx)，当您将`DataContractSerializer`（WCF 的默认序列化程序）与`Serializable`属性结合使用时，行为是所有字段（公共和私有）都被序列化。因为在您的情况下支持字段是自动生成的，所以编译器会提供有趣的名称，这些名称不会与您可能创建的任何字段名称冲突（C# 可能不接受标识符中的“<”或“>”，但 CLR没那么挑剔）。

纠正这种情况的最简单方法可能是根据需要向类添加`DataContract`和`DataMember`属性`Entry`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T15:09:50.353

不要使用自动属性。而不是写：

```
public string Id { get; set; } 
```

写：

```
string id;
public string Id { get { return id;} set {id = value;} } 
```

在自动属性的情况下，只有支持字段会被序列化，这就是为什么你会得到奇怪的名字。

# vb.net - 单元测试的 MVP 实现的最佳实践示例（在 VB.Net 中）

> ID：820382
> 
> 赞同：3
> 
> 时间：2009-05-04T14:38:43.080
> 
> 标签：vb.net, unit-testing, mvp

谁能指出我使用的完整场景

MSTest，vb.net，有或没有模拟，MVP（监督控制器）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-10-29T15:08:05.427

这是我学习模式的方法。最佳实践？我不知道。但它包括单元测试示例：

[设计模式：模型视图展示器](http://msdn.microsoft.com/en-us/magazine/cc188690.aspx)

我下载了源代码，它全部是 C#，没有翻译到 VB.net。不理想，但它可能会让你开始。

# asp.net - Microsoft ASP.NET ReportViewer 解析器错误

> ID：820396
> 
> 赞同：10
> 
> 时间：2009-05-04T14:41:04.493
> 
> 标签：asp.net, reportviewer

我在网站中使用 MS ReportViewer 组件已有一段时间了，但最近我收到了如下所示的错误。

> 解析器错误消息：基类包含字段“xyz”，但其类型 (Microsoft.Reporting.WebForms.ReportViewer) 与控件类型 (Microsoft.Reporting.WebForms.ReportViewer) 不兼容。

```
<rsweb:ReportViewer ID="xyz" runat="server" Width="100%" Font-Names="Verdana" Font-Size="8pt" Height="400px" ProcessingMode="Local" ShowExportControls="false"> 
```

现在，我在 Visual Studio 和生产环境中都遇到了这个错误。我在生产中安装了 ReportViewer Redistributable。

我是否以某种方式错过了我的项目中的参考资料，或者其他什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-04T14:49:55.953

我找到了答案：以某种方式对 Microsoft.Reporting.WebForms 版本 9 的引用切换到了版本 8。这导致了错误。因此，删除引用并添加正确版本的引用似乎已经解决了问题。

编辑：

好吧，根据以前版本的 .vbproj 文件，它是对 9 的引用，尽管项目引用属性屏幕告诉我 8。简而言之，我不太确定是什么搞砸了，但似乎现在正在工作。

如果有人经历过或有一些见解，请贡献。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-03-31T10:20:20.740

全新安装后，我的项目没有编译，因为对 dll 的引用已损坏，所以我将其删除并再次添加，然后使用 ReportViewer 的网页出现解析器错误：

`The base class includes the field 'rprtReportsViewer', but its type (Microsoft.Reporting.WebForms.ReportViewer) is not compatible with the type of control (Microsoft.Reporting.WebForms.ReportViewer).`

我在网页上找到了与我刚刚添加的版本号不同的参考：

```
<%@ Register Assembly="Microsoft.ReportViewer.WebForms, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
    Namespace="Microsoft.Reporting.WebForms" TagPrefix="rsweb" %> 
```

我把版本改成了9.0.0.0，这次刷新页面时出现编译错误：

```
CS0433: The type 'Microsoft.Reporting.WebForms.ReportViewer' exists in both 'c:\Windows\assembly\GAC_MSIL\Microsoft.ReportViewer.WebForms\8.0.0.0__b03f5f7f11d50a3a\Microsoft.ReportViewer.WebForms.dll' and 'c:\Windows\assembly\GAC_MSIL\Microsoft.ReportViewer.WebForms\9.0.0.0__b03f5f7f11d50a3a\Microsoft.ReportViewer.WebForms.dll' 
```

然后我搜索了“Microsoft.ReportViewer”的解决方案，并在compile.config中找到了更多参考：

```
 <add assembly="Microsoft.ReportViewer.WebForms, Version=8.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
    <add assembly="Microsoft.ReportViewer.Common, Version=8.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
  </assemblies>
  <buildProviders>
    <add extension=".rdlc" type="Microsoft.Reporting.RdlBuildProvider, Microsoft.ReportViewer.Common, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
  </buildProviders> 
```

我也在这里更改了版本号，它停止了错误

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T15:39:29.530

您可能还需要从 \bin 文件中删除：

```
 Microsoft.ReportViewer.Common.dll
     Microsoft.ReportViewer.ProcessingObjectModel.dll
     Microsoft.ReportViewer.WebForms.dll
     Microsoft.ReportViewer.WinForms.dll 
```

我只是将它们移到一个子目录中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-14T06:14:34.937

检查您的页面 rdlc 版本，例如

```
<%@ Register Assembly="Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
    Namespace="Microsoft.Reporting.WebForms" TagPrefix="rsweb" %> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-07-10T17:23:25.683

有同样的问题。使用 SQL Server 2005 和 SQL 报告清理 Windows 2008 Server 安装。服务器托管该站点。已安装 ReportViewer 2008 SP1。Web.config 引用版本 9.0.0.0。

出现相同的错误消息：基类包含该字段，但其类型 (Microsoft.Reporting.WebForms.ReportViewer) 与控件类型 (Microsoft.Reporting.WebForms.ReportViewer) 不兼容。

网上搜了一下，很多人都遇到过同样的问题。有人建议手动编辑项目文件。我设法通过在解决方案资源管理器->[Web 项目名称]->参考->Microsoft.Reporting.WebForms->属性中设置特定版本 = True (Version=9.0.0.0) 来修复它。

在其中一种环境中，我们还在 web bin 文件夹中找到了 Microsoft.Reporting dll。而且，它们与在 GAC 中注册的 dll 冲突。删除 dll 解决了这个问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-17T11:15:42.100

我在生产服务器上遇到了这个问题。我安装了正确版本的 ReportViewer，并确保项目中的所有引用都指向正确的版本。但是，我仍然遇到错误。

最终，我通过转到“临时 ASP.NET 文件”并删除我的应用程序的文件来解决了这个问题。为此，您需要先停止该应用程序。这然后解决了这个问题。在 DEV 服务器上我没有遇到这个问题，因为安装 ReportViewer 后我重新启动了机器。

希望这可以帮助某人。在解决这个特殊的“挑战”之前，我拔掉了很多头发。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-09T16:01:34.487

References -> (Microsoft.ReportViewer.WebForms)，点击鼠标右键。

指定版本选项，将其保留为 false。

之后，只需保存并再次运行。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2016-11-07T10:01:24.557

我遇到了同样的错误。对我有用的是删除引用 Microsoft.ReportViewer.WebForms 并再次添加它。

# android - Android - 在运行时更改自定义标题视图

> ID：820398
> 
> 赞同：23
> 
> 时间：2009-05-04T14:41:14.227
> 
> 标签：android, android-custom-view

我在我的应用程序中为每个活动使用自定义标题视图。在其中一项活动中，基于按钮单击，我需要更改自定义标题视图。现在，每当我调用 setFeatureInt 时，它都可以正常工作。

但是，如果我尝试更新自定义标题中的任何项目（例如更改按钮的文本或标题上的文本视图），则不会进行更新。

通过代码调试显示文本视图和按钮实例不为空，我还可以看到自定义标题栏。但是文本视图或按钮上的文本没有更新。有没有其他人遇到过这个问题？我该如何解决？

谢谢。

**编辑**

这是我尝试过的。即使在调用 postInvalidate 时也不会更新。

```
 getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.text_title);

    TextView databar = (TextView) findViewById(R.id.title_text);
    databar.setText("Some Text");
    databar.postInvalidate();

    Button leftButton = (Button) findViewById(R.id.left_btn);
    leftButton.setOnClickListener(mLeftListener);
    leftButton.setText("Left Btn");
    leftButton.postInvalidate();

    Button rightBtn = (Button) findViewById(R.id.right_btn);
    rightBtn.setOnClickListener(mRightListener);
    rightBtn.postInvalidate(); 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-05-14T22:27:43.090

问题是唯一的[`Window`](http://developer.android.com/reference/android/view/Window.html)实现 ( [`PhoneWindow`](http://android.git.kernel.org/?p=platform/frameworks/policies/base.git;a=blob_plain;f=phone/com/android/internal/policy/impl/PhoneWindow.java;hb=HEAD))[`LayoutInflater`](http://developer.android.com/reference/android/view/LayoutInflater.html)在其方法中使用 a 并使用and`setFeatureInt`实例化新布局。因此，当您调用 时，新布局不会*被替换*，而是*附加*到内部标题容器，因此会在彼此之上绘制。[`inflate`](http://developer.android.com/reference/android/view/LayoutInflater.html)`attachToRoot=true``setFeatureInt`

 **您可以通过使用以下辅助方法而不是`setFeatureInt`. 在设置新的自定义标题功能之前，助手会简单地从内部标题容器中删除所有视图：

```
 private void setCustomTitleFeatureInt(int value) {
    try {
        // retrieve value for com.android.internal.R.id.title_container(=0x1020149)
        int titleContainerId = (Integer) Class.forName(
            "com.android.internal.R$id").getField("title_container").get(null);

        // remove all views from titleContainer
        ((ViewGroup) getWindow().findViewById(titleContainerId)).removeAllViews();

        // add new custom title view 
        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, value);

    } catch(Exception ex) {
        // whatever you want to do here..
    }
} 
```

我不确定当前的`setFeatureInt`行为是否是有意的，但它肯定没有以一种或另一种方式记录，这就是为什么我会把它带到 android 开发者那里；）

**编辑**

正如评论中所指出的，上述解决方法并不理想。*您可以在设置新标题时简单地隐藏*旧的自定义标题，而不是依赖`com.android.internal.R.id.title_container`常量。

 *假设您有两个自定义标题布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout android:id="@+id/custom_title_1" ... 
```

和

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout android:id="@+id/custom_title_2" ... 
```

并且您想替换`custom_title_1`为`custom_title_2`，您可以隐藏前者并使用`setFeatureInt`添加后者：

```
findViewById(R.id.custom_title_1).setVisibility(View.GONE);
getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.custom_title_2); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2011-06-24T19:06:49.593

正确的方法如下：

```
requestWindowFeature( Window.FEATURE_CUSTOM_TITLE );
setContentView( R.layout.my_layout );
getWindow().setFeatureInt( Window.FEATURE_CUSTOM_TITLE, R.layout.my_custom_title );
super.onCreate( savedInstanceState ); 
```

请注意，这些语句的顺序非常重要。

如果您在任何其他语句之前调用 super.onCreate()，您将得到一个空白标题栏，查找标题栏 ID 并从中删除所有视图的黑客将修复但不推荐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T16:41:11.060

您是否在更新文本后调用 invalidate 或 postInvalidate 来重绘视图？如果它是一个自定义视图，你可以在绘制代码中放置一个断点以确保它被调用吗？

如果您在 UI 线程上，则可以调用“invalidate”，如果不是，则必须调用“postInvalidate”，否则视图不会重绘自身。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-01-09T01:36:29.210

只是我的 2c 价值：

在 MapActivity 中工作时，请求自定义标题会导致根本不显示任何标题。

幸运的是，我想做的只是以不同的方式设置标题文本，我很快意识到在 onCreate() 中调用 setTitle() 对我有用（我在调用 setContentView() 后调用了它）

抱歉，但我现在没有时间再调试它并弄清楚为什么我所做的事情不起作用，以及为什么改变它使它起作用。正如我所说，只是认为这可能会帮助别人。

# ruby - ruby 中是否有 SOAP::Lite 等效库？

> ID：820400
> 
> 赞同：4
> 
> 时间：2009-05-04T14:41:23.307
> 
> 标签：ruby, soap

我想使用 ruby​​ 构建一个 SOAP 客户端。我尝试使用soap4r 库从WSDL 文件中生成ruby 类，但问题在于它生成的所有方法都是可选类型，而不是名称/值对。鉴于某些方法有大量参数，其中许多是可选的，我更喜欢使用 SOAP::Lite(Perl Library) 之类的东西，它不依赖于 WSDL 文件并接受参数作为 NAME/VALUE 对。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-01-10T16:11:46.600

也看看[萨文](http://github.com/rubiii/savon/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T20:36:41.033

我自己并没有真正使用过这个，但我记得前几天听说过：[Handsoap](https://github.com/unwire/handsoap)。看看它是否符合您的需求！;)

# c# - 如何检测何时将行添加到 MySQL 数据库？

> ID：820405
> 
> 赞同：0
> 
> 时间：2009-05-04T14:42:35.177
> 
> 标签：c#

我有 ac# 应用程序，它从 ftp 服务器获取文件，从文件中获取文本并将其插入 mysql 数据库。从那里它将数据和 ftp 传输到我们组织内的另一台服务器。

我要做的是创建一个监视程序，用户可以将其加载到具有网格的 PC 上，并且每次将新条目添加到 mysql 数据库时都会刷新。

最好的方法是什么？我打算在表单上放置一个计时器控件并让它每 30 秒左右检查一次，但是有没有办法实时执行此操作，以便我的应用程序确切知道何时将项目添加到数据库中？一种类似于 FileSystemWatcher 但用于数据库表的控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T14:45:49.897

我认为让应用程序轮询数据库是最好的解决方案，因为它是最简单、最容易构建、配置和维护的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T14:45:44.530

没有通用工具可以做到这一点。SQL Server 有 a 的概念`SQLDependency`，但这是一个相当昂贵的工具。

**您最简单和最简单的选择是按照您的想法进行操作，并使用一个刷新的计时器。**

除此之外，您可以使用某种消息队列技术（如[MSMQ](http://www.microsoft.com/windowsserver2003/technologies/msmq/default.mspx) ）并自己中继一条消息，指示已添加项目。根据您项目的规模以及更改通知即时发送或查询特别长或特别昂贵的重要性，这可能值得，也可能不值得。

# php - 发布时 APC 的问题

> ID：820406
> 
> 赞同：5
> 
> 时间：2009-05-04T14:42:41.853
> 
> 标签：php, apc

我们最近在我们的服务器上启用了[APC](http://us3.php.net/manual/en/book.apc.php)，有时当我们发布新代码或更改时，我们会发现被更改的源文件开始抛出未反映在代码中的错误，通常会解析描述不存在的令牌的错误存在。我们已经通过运行`php -l`错误日志说受到影响的文件来验证这一点。通常重新发布可以解决问题。我们使用的是 PHP 5.2.0 和 APC 3.01.9。我的问题是，有没有其他人遇到过这个问题，或者有没有人认识到我们的问题是什么？如果是这样，您是如何修复它的，或者我们如何修复它？

编辑：我可能应该添加一些关于我们发布过程的细节。内容通过 rsync 从登台服务器推送到生产服务器。我们启用`apc.stat_ctime`是因为它说这有助于使用 rsync 使事情运行得更顺畅。 `apc.write_lock`默认情况下是打开的，我们还没有禁用它。同上`apc.file_update_protection`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-04T15:26:43.200

听起来像一个部分发布的文件被读取并缓存为损坏。[apc.file_update_protection](http://php.net/manual/en/apc.configuration.php#ini.apc.file-update-protection)旨在帮助阻止这种情况。

在 php.ini 中：`apc.file_update_protection integer`

> `apc.file_update_protection`设置延迟缓存全新文件。默认值为 2 秒，这意味着如果文件上的修改时间戳 (mtime) 显示它在被访问时小于 2 秒，则不会缓存该文件。访问这个写了一半的文件的不幸的人仍然会看到怪异，但至少不会持续存在。

在编辑问题之后：我没有看到这类问题的一个原因是我推送了一个全新的站点副本（使用 SVN 导出）。只有在完全完成之后，它才会对 Apache/Mod_php 可见（请参阅我的回答[如何开始从 subversion 存储库部署 PHP 应用程序？](https://stackoverflow.com/questions/800294/how-to-get-started-deploying-php-applications-from-a-subversion-repository/820639#820639)）

当然，可能发生的另一件事是，如果您正在就地更新，您可能正在更新依赖于尚未上传的其他文件的文件。Rsync 只能保证单个文件的原子更新，而不是正在更改/上传的整个集合。另一个原因是我想把网站批量上传，然后才投入使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-04T15:20:08.643

听起来 APC 没有执行或获取正确的文件统计信息。您可以检查它以确保 APC 配置[apc.stat](http://us.php.net/manual/en/apc.configuration.php#ini.apc.stat)设置正确。您可以做的另一件事是在发布新代码时强制使用[apc_clear_cache()清除缓存。](http://us.php.net/manual/en/function.apc-clear-cache.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T14:47:46.350

以前从未见过，即使我是 APC 的忠实用户。每次在服务器上发送新代码时，也许尝试触发一个清空 APC 操作码的脚本？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T14:57:11.227

当你得到一个有解析错误的文件时，备份它，然后重新发布。获取现在可以工作的同一个文件，并对出现解析错误的文件进行比较。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-04T16:44:41.420

ctime 表示创建时间。每次进行更新时，您都需要手动刷新整个缓存。

通过将 apc.php 脚本放在服务器上的某个位置，您可以轻松地做到这一点。此脚本为您提供缓存统计信息，并允许您完全删除缓存。

该脚本随 APC 一起提供。

希望他的帮助，埃弗特

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-26T14:56:28.010

这可能是因为您的代码与代码的缓存版本不匹配。

例如，APC 有一个 User.php 的缓存版本，但您对 User.php 或 User 使用的数据进行了更改。即使在部署之后缓存版本仍在运行，因为它还没有过期。

如果您在部署时清除 APC 缓存条目，此问题应该会消失。

# jquery - 从 Google 的 CDN 下载 jQuery UI CSS

> ID：820412
> 
> 赞同：456
> 
> 时间：2009-05-04T14:45:22.173
> 
> 标签：jquery, css, jquery-ui, cdn, google-ajax-libraries

我计划使用 Google 下载 UI 和 Core 的 jQuery 库。我的问题是，他们允许我为它下载 CSS 还是我必须自己托管它？

另外，如果我使用谷歌加载我应该如何加载其他插件？我可以将所有插件压缩在一起还是应该是它自己的单独文件？

* * *

## 回答 #1

> 赞同：577
> 
> 时间：2009-05-04T14:51:40.583

包含 jQuery UI（当前为 v1.10.3）的 Google AJAX 库 API 还包含[jQuery UI 博客](http://blog.jqueryui.com/2013/05/jquery-ui-1-10-3/)中的流行主题：

**Google Ajax 库 API (CDN)**

*   未压缩：[http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.js](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.js)

*   压缩：[http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js)

*   未压缩主题： [black-tie](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/black-tie/jquery-ui.css) , [blitzer](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/blitzer/jquery-ui.css) , [cupertino](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/cupertino/jquery-ui.css) , [dark-hive](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/dark-hive/jquery-ui.css) , [dot-luv](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/dot-luv/jquery-ui.css) , [eggplant](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/eggplant/jquery-ui.css) , [excite-bike](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/excite-bike/jquery-ui.css) , [flick](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/flick/jquery-ui.css) , [hot-](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/hot-sneaks/jquery-ui.css) [sneaks](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/humanity/jquery-ui.css) , human , [le-frog](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/le-frog/jquery-ui.css) , [mint-choc](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/mint-choc/jquery-ui.css) , [overcast](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/overcast/jquery-ui.css) , [pepper-grinder](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/pepper-grinder/jquery-ui.css) , [redmond](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/redmond/jquery-ui.css) , [smoothness](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/smoothness/jquery-ui.css) ,[南街](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/south-street/jquery-ui.css),[开始](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/start/jquery-ui.css),[阳光明媚](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/sunny/jquery-ui.css),[时髦的钱包](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/swanky-purse/jquery-ui.css), [trontastic](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/trontastic/jquery-ui.css) , [ui-darkness](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/ui-darkness/jquery-ui.css) ,[ui-lightness](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/ui-lightness/jquery-ui.css)和[vader](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/vader/jquery-ui.css)。

*   压缩主题： [black-tie](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/black-tie/jquery-ui.min.css)、[blitzer](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/blitzer/jquery-ui.min.css)、[cupertino](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/cupertino/jquery-ui.min.css)、[dark-hive](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/dark-hive/jquery-ui.min.css)、[dot-luv](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/dot-luv/jquery-ui.min.css)、[茄子](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/eggplant/jquery-ui.min.css)、[excite-bike](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/excite-bike/jquery-ui.min.css)、[flick](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/flick/jquery-ui.min.css)、[hot-sneaks](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/hot-sneaks/jquery-ui.min.css)、[humanity](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/humanity/jquery-ui.min.css)、[le-frog](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/le-frog/jquery-ui.min.css)、[mint-choc](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/mint-choc/jquery-ui.min.css)、[overcast](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/overcast/jquery-ui.min.css)、[pepper-grinder](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/pepper-grinder/jquery-ui.min.css)、[redmond](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/redmond/jquery-ui.min.css)、[smoothness](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/smoothness/jquery-ui.min.css) ,[南街](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/south-street/jquery-ui.min.css),[开始](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/start/jquery-ui.min.css),[阳光明媚](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/sunny/jquery-ui.min.css),[时髦的钱包](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/swanky-purse/jquery-ui.min.css), [trontastic](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/trontastic/jquery-ui.min.css) , [ui-darkness](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/ui-darkness/jquery-ui.min.css) ,[ui-lightness](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/ui-lightness/jquery-ui.min.css)和[vader](http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/vader/jquery-ui.min.css)。

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2012-11-09T18:44:13.233

jQuery 现在拥有 CDN 访问权限：

code.jquery.com/ui/ **[版本]** /themes/ **[主题名称]** /jquery-ui.css

* * *

为了让这更容易一点，给你：

*   基地：[http ://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css](http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css)
*   黑色领带：[http ://code.jquery.com/ui/1.9.1/themes/black-tie/jquery-ui.css](http://code.jquery.com/ui/1.9.1/themes/black-tie/jquery-ui.css)
*   [闪电战： http](http://code.jquery.com/ui/1.9.1/themes/blitzer/jquery-ui.css) ://code.jquery.com/ui/1.9.1/themes/blitzer/jquery-ui.css
*   [库比蒂诺： http](http://code.jquery.com/ui/1.9.1/themes/cupertino/jquery-ui.css) ://code.jquery.com/ui/1.9.1/themes/cupertino/jquery-ui.css
*   黑暗蜂巢：[http ://code.jquery.com/ui/1.9.1/themes/dark-hive/jquery-ui.css](http://code.jquery.com/ui/1.9.1/themes/dark-hive/jquery-ui.css)
*   点-luv：[http ://code.jquery.com/ui/1.9.1/themes/dot-luv/jquery-ui.css](http://code.jquery.com/ui/1.9.1/themes/dot-luv/jquery-ui.css)
*   茄子：[http ://code.jquery.com/ui/1.9.1/themes/eggplant/jquery-ui.css](http://code.jquery.com/ui/1.9.1/themes/eggplant/jquery-ui.css)
*   激发自行车：[http ://code.jquery.com/ui/1.9.1/themes/excite-bike/jquery-ui.css](http://code.jquery.com/ui/1.9.1/themes/excite-bike/jquery-ui.css)
*   轻弹：[http ://code.jquery.com/ui/1.9.1/themes/flick/jquery-ui.css](http://code.jquery.com/ui/1.9.1/themes/flick/jquery-ui.css)
*   热门偷拍：http: [//code.jquery.com/ui/1.9.1/themes/hot-sneaks/jquery-ui.css](http://code.jquery.com/ui/1.9.1/themes/hot-sneaks/jquery-ui.css)
*   人性：[http ://code.jquery.com/ui/1.9.1/themes/humanity/jquery-ui.css](http://code.jquery.com/ui/1.9.1/themes/humanity/jquery-ui.css)
*   乐蛙：[http ://code.jquery.com/ui/1.9.1/themes/le-frog/jquery-ui.css](http://code.jquery.com/ui/1.9.1/themes/le-frog/jquery-ui.css)
*   薄荷巧克力：http: [//code.jquery.com/ui/1.9.1/themes/mint-choc/jquery-ui.css](http://code.jquery.com/ui/1.9.1/themes/mint-choc/jquery-ui.css)
*   阴天：[http ://code.jquery.com/ui/1.9.1/themes/overcast/jquery-ui.css](http://code.jquery.com/ui/1.9.1/themes/overcast/jquery-ui.css)
*   胡椒研磨机：[http ://code.jquery.com/ui/1.9.1/themes/pepper-grinder/jquery-ui.css](http://code.jquery.com/ui/1.9.1/themes/pepper-grinder/jquery-ui.css)
*   雷蒙德：http : [//code.jquery.com/ui/1.9.1/themes/redmond/jquery-ui.css](http://code.jquery.com/ui/1.9.1/themes/redmond/jquery-ui.css)
*   平滑度：[http ://code.jquery.com/ui/1.9.1/themes/smoothness/jquery-ui.css](http://code.jquery.com/ui/1.9.1/themes/smoothness/jquery-ui.css)
*   南街：[http ://code.jquery.com/ui/1.9.1/themes/south-street/jquery-ui.css](http://code.jquery.com/ui/1.9.1/themes/south-street/jquery-ui.css)
*   开始：[http ://code.jquery.com/ui/1.9.1/themes/start/jquery-ui.css](http://code.jquery.com/ui/1.9.1/themes/start/jquery-ui.css)
*   晴天：[http ://code.jquery.com/ui/1.9.1/themes/sunny/jquery-ui.css](http://code.jquery.com/ui/1.9.1/themes/sunny/jquery-ui.css)
*   时髦的钱包：[http ://code.jquery.com/ui/1.9.1/themes/swanky-purse/jquery-ui.css](http://code.jquery.com/ui/1.9.1/themes/swanky-purse/jquery-ui.css)
*   trontastic：[http ://code.jquery.com/ui/1.9.1/themes/trontastic/jquery-ui.css](http://code.jquery.com/ui/1.9.1/themes/trontastic/jquery-ui.css)
*   ui-darkness：[http ://code.jquery.com/ui/1.9.1/themes/ui-darkness/jquery-ui.css](http://code.jquery.com/ui/1.9.1/themes/ui-darkness/jquery-ui.css)
*   用户界面亮度：[http ://code.jquery.com/ui/1.9.1/themes/ui-lightness/jquery-ui.css](http://code.jquery.com/ui/1.9.1/themes/ui-lightness/jquery-ui.css)
*   维达：http : [//code.jquery.com/ui/1.9.1/themes/vader/jquery-ui.css](http://code.jquery.com/ui/1.9.1/themes/vader/jquery-ui.css)

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2012-03-11T00:38:13.583

Google 在此链接上托管 jQueryUI css [https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery.ui.all.css](https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery.ui.all.css)

如果您直接查看此代码，它正在使用 @import 导入 css [，这可能很慢](https://stackoverflow.com/a/1022715/745)。您可能希望将导入分解为其部分以获得轻微的性能优势：

[https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery.ui.base.css](https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery.ui.base.css) [https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base /jquery.ui.theme.css](https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery.ui.theme.css)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-08-27T10:28:54.790

正如奥巴马所说的“是的，我们可以”。这是它的链接。[developer.google.com/#jquery](https://developers.google.com/speed/libraries/devguide#jquery)

你需要使用

**谷歌**

```
ajax.googleapis.com/ajax/libs/jqueryui/[VERSION NO]/jquery-ui.min.js
ajax.googleapis.com/ajax/libs/jqueryui/[VERSION NO]/themes/[THEME NAME]/jquery-ui.min.css 
```

**jQuery CDN**

```
code.jquery.com/ui/[VERSION NO]/jquery-ui.min.js
code.jquery.com/ui/[VERSION NO]/themes/[THEME NAME]/jquery-ui.min.css 
```

**微软**

```
ajax.aspnetcdn.com/ajax/jquery.ui/[VERSION NO]/jquery-ui.min.js
ajax.aspnetcdn.com/ajax/jquery.ui/[VERSION NO]/themes/[THEME NAME]/jquery-ui.min.css 
```

在图库子选项卡中的[http://jqueryui.com/themeroller/](http://jqueryui.com/themeroller/)中查找主题名称

.

但我**不建议**您从 CDN 托管，原因如下

1.  尽管与其他人相比，在使用 Google CDN 的情况下，您的命中率很高，但仍然非常低。（任何 CDN 不仅仅是谷歌）。
2.  通过 cdn 加载，您将有 3 个请求，一个用于 jQuery.js，一个用于 jQueryUI.js，一个用于您的代码。您可以将其压缩到本地并将其作为单个资源加载。

[http://zoompf.com/blog/2010/01/should-you-use-javascript-library-cdns](http://zoompf.com/blog/2010/01/should-you-use-javascript-library-cdns)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-05-04T14:49:16.127

我会这么认为。为什么不？没有提供 CSS 来支持脚本文件的 CDN 不会太多

[此链接](http://www.filamentgroup.com/lab/jquery_ui_17_now_released/)表明它们是：

> 我们发现 jQuery UI CSS 主题现在托管在 Google 的 Ajax Libraries CDN 上特别令人兴奋。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-05-25T17:24:04.790

如果你的意思是 jQuery UI css，你可以使用这个：

```
<link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" /> 
```

# outlook - 创建新邮件时在 Outlook 中使用自定义表单

> ID：820414
> 
> 赞同：1
> 
> 时间：2009-05-04T14:45:23.483
> 
> 标签：outlook, outlook-2007, outlook-form

我想在 Outlook 2007 中创建一个自定义表单，然后让该表单成为用户单击工具栏中的新建/邮件消息时出现的表单。有没有办法做到这一点？我知道如何创建自定义表单，但我不知道如何更改菜单项的功能。

乔恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T12:24:40.717

如果您使用的是 Outlook 表单，您可以将其发布到组织表单库，并让您的客户使用新的自定义表单，而不是默认的开箱即用表单。它是一个注册表更改，将其指向一个新表单。有一些工具可以为您进行此更改。

一个很好的例子[http://www.petri.co.il/customizing_new_meeting_request_outlook_form.htm](http://www.petri.co.il/customizing_new_meeting_request_outlook_form.htm)

76梅尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T12:19:24.637

Ty Anderson 有一个很棒的教程，位于[devx](http://www.devx.com/MicrosoftISV/Article/29261/2213)上，关于用自定义表单替换标准 AppointmentItem 检查器。

基本上，您需要编写在[NewInspector](http://msdn.microsoft.com/en-us/library/bb147644.aspx)事件上触发的代码并改为显示您的表单并取消标准检查器。

# c# - 如何将参数从 javascript 发布到 asp.net？

> ID：820419
> 
> 赞同：0
> 
> 时间：2009-05-04T14:46:51.733
> 
> 标签：c#, javascript, post

我有一个 javascript 代码，它建立了一个带有 2 个参数的链接。

现在，我知道如何使用地址发布这些参数，但我不想使用它。

我尝试使用 cookie 发布参数，但不知何故我无法在服务器端读取它们。

这是客户端代码

```
document.cookie="name="+"value"; 
```

这是服务器端读取代码

```
string s = Response.Cookies[cookieName].Value; 
```

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T14:52:37.197

您可以使用[Ajax 请求](http://docs.jquery.com/Ajax/jQuery.ajax)将数据发布到 ASP.NET 表单。

要将数据发布到任何页面，您必须使用该页面的路径。至于您设置cookie的问题，它们只能由同一域中的页面使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T14:59:22.750

创建一个迷你表单（不是 asp.NET Web 表单，只是一个简单的表单），其中包含两个名为参数的输入类型隐藏字段。之后创建一个链接或按钮，将它的**onclick 事件**绑定到一个 javascript 函数（例如：onclick="javascript:postIt();"）。

然后，当用户单击按钮或链接时，该函数将替换这些参数的值，例如：

```
document.miniform.parameter1.value = yourvalue1;
document.miniform.parameter1.value = yourvalue2;
document.miniform.submit(); 
```

要将参数返回到代码中，请使用 Request.form("parameter1") 等等......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T14:54:34.320

你在做一个 HTTP Post 吗？您可以在表单字段中发布这些值。我会使用隐藏的输入字段。您可以在标记中添加一个或通过 javascript 添加一个。

您的另一个选择是使用某种 Ajax 并在帖子正文中传递 JSON 或 XML。

Cookie 旨在跨页面和/或会话保存数据客户端。

# facebook - 我可以在 iframe 中使用 Facebook 的 fb:friend-selector 吗？

> ID：820421
> 
> 赞同：21
> 
> 时间：2009-05-04T14:47:20.970
> 
> 标签：facebook

我正在尝试使用 Facebook 的`fb:friend-selector`FBML 标签，但我的应用程序在 iframe 中运行。是否可以在 iframe 中使用此标签？如果是这样，有人有任何例子吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-04T19:10:17.763

是的，这绝对是可能的，但您必须使用[Facebook Connect](https://developers.facebook.com/docs/guides/web/)和[XFBML](http://wiki.developers.facebook.com/index.php/XFBML)。具体来说，您想使用[fb:serverfbml](https://developers.facebook.com/docs/reference/fbml/serverFbml/)标签来让 fb:friend-selector 工作。我有一个 iframe 应用程序，我在标准的“邀请朋友加入您的应用程序”上下文中使用所有这些和 fb:friend-selector，并且效果很好。

这是我的模板文件的正文，它在我的 iframe 正文中得到输出：

```
<fb:serverfbml style="width: 650px;"> 
<script type="text/fbml">
    <fb:fbml> 
        <fb:request-form
            action="http://example.com/invite/sent"
            method="POST"
            invite="true"
            type="My App"
            content="Try out my app!
                <fb:req-choice url='http://your-facebook-canvas-url'
                label='<?php echo htmlspecialchars("Accept button text",ENT_QUOTES); ?>'
                /> 
            " > 
            <fb:multi-friend-selector
                showborder="false"
                actiontext="Invite your friends to try My App."
                exclude_ids="<?php echo $excludeIds; ?>"
                rows="3"
            /> 
        </fb:request-form> 
    </fb:fbml>
</script> 
</fb:serverfbml> 
```

在页面的页脚，我有标准的 Facebook Connect 代码，它将加载和呈现 fb:serverfbml 内容：

```
<script src="http://static.ak.connect.facebook.com/js/api_lib/v0.4/FeatureLoader.js.php" type="text/javascript"></script>
<script type="text/javascript">
    FB_RequireFeatures(
        ["CanvasUtil"],
        function(){
             FB.XdComm.Server.init('/xd_receiver.html');
             FB.CanvasClient.startTimerToSizeToContent();
        }
    );
</script>

<script type="text/javascript">
    FB_RequireFeatures(["XFBML"], function(){ FB.Facebook.init("Your Facebook API Key", "/xd_receiver.html"); });   
</script> 
```

这应该就是您所需要的（当然，在适用的情况下填写您自己的选项）。您必须设置 Facebook Connect 才能使用跨域接收器文件。我建议遵循[渲染 XFBML 步骤](http://wiki.developers.facebook.com/index.php/XFBML#Rendering_XFBML)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2010-11-09T05:54:59.567

该线程中的问题仍然相关，但答案已过时。您应该使用新的 javascript SDK。这应该替换 zombat 发布的第二个代码片段

```
<script src="http://connect.facebook.net/en_US/all.js"></script> 
<script type="text/javascript">
   FB.init({appId: 'your app id',
       status: true,
       cookie: true,
       xfbml: true});
   FB.Event.subscribe('auth.sessionChange', function(response) {
     if (response.session) {
       // A user has logged in, and a new cookie has been saved
     } else {
       // The user has logged out
     }
   });
</script> 
```

更多信息在这里：[http ://www.clickonchris.com/2010/11/facebook-javascript-sdks/](http://www.clickonchris.com/2010/11/facebook-javascript-sdks/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-07-29T00:39:34.337

因为这是关于 iframe 中的朋友选择器的很多问题。

伙计们，现在正确的语法是`<fb:serverfbml width="650px">`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-01-31T15:20:53.020

遗漏的一个主要和重要的一点是，你们中的许多人（包括我）几乎在任何地方都坚持使用脚本......但是“FB” load.js 文件需要在 body 标记之后*立即加载。*

至少这是我发现让一切正常工作并相应地嗡嗡作响的东西。我在其他网站上的帖子上找到了它（不确定我是否应该在这里发布它......）但它是在花费无数小时完成上述上述 - 以及每隔一个 1,2 之后出现的，使 iframe 正确调整大小的 3 个步骤...

现在我已经开始工作了:)

# perl - 在循环期间防止在 Perl 中实时输出重复项的最佳方法

> ID：820423
> 
> 赞同：0
> 
> 时间：2009-05-04T14:48:19.000
> 
> 标签：perl, loops, duplicates

我看到很多“相关”的问题出现了，但我没有看到回答这个特定的场景。

在解析从 SQL 选择语句生成的结果集的 while/for 循环期间，如果下一行包含相同的字段数据（无论是第一个字段还是第 x 个字段）？

例如，如果两行是：

```
('EML-E','jsmith@mail.com','John','Smith')
('EML-E','jsmith2@mail.com','John','Smith') 
```

基于“EML-E”在两行中相同的事实，仅打印第一行的最佳方法是什么？

现在，我正在这样做：

*   将第一个字段（特定于我的场景）存储到一个 2 元素数组（dupecatch[1]）中
*   检查是否 dupecatch[0] = dupcatch[1]（重复 - 使用 's' 的转义循环）
*   处理完行后，设置 dupecatch[0] = dupecatch[1]

    ```
    while ($DBS->SQLFetch() == *PLibdata::RET_OK)
    {
        $s=0; #s = 1 to escape out of inside loop
        while ($i != $array_len and $s==0)
        {
            $rowfetch = $DBS->{Row}->GetCharValue($array_col[$i]);
            if($i==0){$dupecatch[1] = $rowfetch;} #dupecatch prevents duplicate primary key field entries
            if($dupecatch[0] ne $dupecatch[1])
            {
                dosomething($rowfetch);
            }
            else{$s++;}
            $i++;
        }
        $i=0;
        $dupecatch[0]=$dupecatch[1];
    } 
    ```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-04T14:53:19.830

如果您只关心连续重复的项目，那就是标准方式，但 $dupecatch[0] 通常被命名为 $old 而 $dupecatch[1] 通常只是有问题的变量。您可以判断该数组不合适，因为您只引用了它的索引。

如果要避免所有重复项，可以使用 %seen 哈希：

```
my %seen;
while (defined (my $row = get_data())) {
    next if $seen{$row->[0]}++; #skip all but the first instance of the key
    do_stuff();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T14:53:32.013

我建议在您的 SQL 语句中使用 DISTINCT。这可能是迄今为止最简单的解决方法。

# python - 如何在不重新启动 python 解释器的情况下更改模块？

> ID：820431
> 
> 赞同：1
> 
> 时间：2009-05-04T14:49:29.513
> 
> 标签：python

我正在 python 解释器中测试代码并在单独的窗口中进行编辑。每当我对正在测试的模块进行更改时，我目前都需要重新启动 python。

有没有更简单的方法来做到这一点？

谢谢，

查理

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-04T14:52:25.917

内置功能[`reload`](http://docs.python.org/library/functions.html#reload)是您正在寻找的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-04T14:56:22.820

听起来您想重新加载模块，其中有一个[内置函数 reload(module)](http://docs.python.org/library/functions.html#reload)。也就是说，当我刚刚查找它时（为了确保我的参考正确，Google 回复了[几个](http://pyunit.sourceforge.net/notes/reloading.html) [讨论](http://mail.python.org/pipermail/python-list/2002-October/166262.html)（假设它们已经有几年了）指出使用 reload() 的问题。如果重新加载，您可能想要查看这些问题() 让你头疼。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-05T09:08:35.487

看看 IPython [http://ipython.scipy.org](http://ipython.scipy.org)。它具有多种功能，可以更轻松地以交互方式使用 Python 代码。

一些[截图](http://ipython.scipy.org/screenshots/index.html)和[提示](http://ipython.scipy.org/doc/manual/html/interactive/tutorial.html)。

# java - 如果用户还没有安装 JRE，我该如何提示她？

> ID：820439
> 
> 赞同：2
> 
> 时间：2009-05-04T14:50:54.347
> 
> 标签：java, deployment, applet

我正在编写一个 Java 小程序，并且想知道将它包含在网页中的最佳方式。

如果她还没有安装 JRE，我希望它提示用户安装 JRE。此功能应该（理想情况下）在运行 Java 的任何操作系统上跨浏览器工作。另一个要求是不应在页面加载时加载小程序，而是在用户操作之后加载，而不是在每次加载页面时加载 JVM。我猜[这是官方的SUN方式](http://java.com/js/deployJava.js)，但是它使用了`document.write()`，所以页面完成渲染后我不能使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-04T15:40:50.310

我建议只使用小程序标签。正如 Alex B 评论的那样，如果没有 JRE，大多数浏览器都会提示用户安装。

甚至 Sun 也建议[在 Intranet 上使用 applet 标签，](http://java.sun.com/j2se/1.5.0/docs/guide/plugin/developer_guide/using_tags.html)除非您在 Intranet 上。我想这里的逻辑是您可以在内部服务器上托管 JRE 下载，并使用 embed & object 标签将下载定向到该服务器。

我曾经使用嵌入和对象标签，但由于版本号，这最终很麻烦。假设您需要 Java 1.5。因此，您在 object & embed 标记中指定，以确保用户在没有 1.5 时必须升级。但是，这并不是您真正想要的，您希望它将它们升级到最新的 JVM。无论如何，这不是我上次玩它时最聪明的行为——他们现在可能已经改进了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-08T15:31:02.210

我同意*jwls*，最好使用*小程序*标签，因为使用 embed 和 object 来获得正确的跨浏览器非常尴尬 - 以至于每个浏览器都需要自定义设置。

但是，使用*小程序*标签时，您需要注意 Microsoft 的 VM 1.1 上的用户。当我在 2 月份进行测试时，它们仍然占[Java 版本的 5%](https://stackoverflow.com/questions/650582/what-java-versions-are-commonly-installed-on-browsers-is-it-safe-to-assume-1-4/810664#810664)。如果这些用户访问需要更新版本的页面，他们将看到一个可怕的灰色区域。

解决方案（在 java.net 上讨论后）是使用一个小程序来检查 Java 版本，如果不满足目标版本，则重定向到失败页面。这是我的来源：

**JavaRedirectorApplet.java**

```
import java.applet.Applet;
import java.net.URL;

/**
 * Applet built for bytecode 1.1
 * 
 * If applet is less than a set level redirects to a given page, else does nothing
 */
public class JavaRedirectorApplet extends Applet {

    /** The required java version */
    private final static String PARAM_REQUIRED_JAVA_VERSION = "REQUIRED_JAVA_VERSION";

    /** The failure page */
    private final static String PARAM_FAILURE_PAGE = "FAILURE_PAGE";

    /**
     * Initializes the applet
     */
    public void init() {

        // evaluate the required Java version
        double requiredJavaVersion = -1;
        String requiredJavaVersionString = getParameter(PARAM_REQUIRED_JAVA_VERSION);
        if (requiredJavaVersionString != null) {
            try {
                requiredJavaVersion = Double.valueOf(requiredJavaVersionString).doubleValue();
            } catch (Exception e) {
                // ignored, caught below
            }
        }

        if (requiredJavaVersion < 0) {
            System.err.println(PARAM_REQUIRED_JAVA_VERSION + " not set or set incorrectly (must be set to a number greater than 0)");
            return;
        }

        // get the failure page
        URL failurePageURL = null;
        String failurePageString = getParameter(PARAM_FAILURE_PAGE);
        if (failurePageString != null) {
            try {
                failurePageURL = new URL(getCodeBase().getProtocol(),
                                    getCodeBase().getHost(),
                                    getCodeBase().getPort(),
                                    failurePageString);
            } catch (Exception e) {
                // ignored, caught below
            }
        }

        if (failurePageURL == null) {
            System.err.println(PARAM_FAILURE_PAGE + " not set or set incorrectly (must be set to a valid path)");
            return;
        }

        // check to see whether valid
        if (!isValidVersion(requiredJavaVersion)) {

            // not valid redirect self
            getAppletContext().showDocument(failurePageURL, "_self");
        }

        // seems fine
    }

    /**
     * Check the Java version against a required version
     *
     * @param versionRequired
     * @return the verdict
     */
    public static boolean isValidVersion(double versionRequired) {
        try {
            double javaVersion = Double.valueOf(System.getProperty("java.version").substring(0, 3)).doubleValue();

            if (javaVersion < versionRequired) {
                return false;
            } else {
                return true;
            }
        } catch (NumberFormatException e) {
            return false;
        }
    }
} 
```

**示例 HTML**

```
<!-- place before the actual applet -->
<div style="display: none;">
    <applet code="JavaRedirectorApplet" width="0" height="0">
        <param name="REQUIRED_JAVA_VERSION" value="1.4"/>
        <param name="FAILURE_PAGE" value="/failurePage.html" />
    </applet>
</div> 
```

# .net - 没有 tnsnames.ora 文件的 Oracle 连接字符串

> ID：820440
> 
> 赞同：14
> 
> 时间：2009-05-04T14:50:54.360
> 
> 标签：.net, asp.net, oracle, connection-string, oracleclient

我正在使用带有 System.Data.OracleClient 命名空间的 .NET 框架。我的计算机上安装了 oracle 11 客户端。我不想使用 tnsnames.ora 文件来存储连接信息。

如果我不想使用 tnsnames.ora 文件，有人可以告诉我连接字符串会是什么样子吗？我会将连接字符串存储在 Web 应用程序项目的 web.config 文件中。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-05-05T07:17:29.670

从 10g 客户端开始，您可以使用[EZCONNECT](http://www.orafaq.com/wiki/EZCONNECT)功能，无需编辑 TNSNAMES.ORA 文件：`username/password@servername:port/instance`. 例如 ：

```
Data Source=localhost:1521/XE;Persist Security Info=True;User ID=scott;Password=tiger;Unicode=True 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-05-04T14:53:07.740

[http://www.connectionstrings.com/oracle](http://www.connectionstrings.com/oracle)

这是个很棒的资源

> SERVER=(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=MyHost)(PORT=MyPort))
> (CONNECT_DATA=(SERVICE_NAME=MyOracleSID)));uid=myUsername;pwd=myPassword;

是你想要的，我相信...

# .net - ReportViewer 2008 切换到不同的页面大小

> ID：820442
> 
> 赞同：1
> 
> 时间：2009-05-04T14:51:28.337
> 
> 标签：.net, .net-3.5, reporting-services, reportviewer

我部署的应用程序使用 ReportViewer (CLR 3.5) 打印本地报告。

最近用户注意到打印问题。我对此进行了调查，结果发现在某些 PC reportViewer 中将页面格式设置为 Letter（而不是 A4），这就是打印输出被剪切的原因。

请注意，所有用户都使用相同的网络部署版本和相同的 ReportViewer dll。RDLC 已正确设置为 A4 大小...

任何建议如何强制使用相同的标准（所有应用程序实例的 A4），以及生成的格式取决于什么？

**编辑：**

原来这不仅仅是打印机设置/驱动程序问题

最后通过默认设置打印布局来修复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T02:49:03.637

打印机是否默认设置为 A4？如果可能，导出为 pdf 时页面大小是否会改变？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T02:53:11.050

打印和显示的页面大小都存储在 RDL 文件本身中，所以如果只有某些客户端以错误的大小打印，那么我怀疑他们的打印机设置不正确。

# outlook - 编辑/查看 Microsoft Outlook NK2 名称缓存文件

> ID：820456
> 
> 赞同：0
> 
> 时间：2009-05-04T14:54:09.033
> 
> 标签：outlook

我试图找到一些代码来显示如何打开 Outlook NK2 名称缓存文件。我做了一些搜索，我看到几个人说这是不可能的，但后来我找到了一些可以做到这一点的免费软件的链接，所以我知道它是可能的。我会使用免费软件应用程序，但宁愿在我自己的代码中使用它，如果我在组织内使用我自己的代码而不是免费软件/共享软件应用程序，更容易获得管理层的批准。我正在尝试用 VB 编写代码，但如果有帮助，我想找到任何语言的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-02-06T00:24:56.253

Redemption 有一些[Nk2 示例](http://www.dimastr.com/redemption/rdonicknames.htm)，尽管您可能需要为商业许可证付费。

还有一个关于[Google Code](http://code.google.com/p/debunk2/)的项目，里面有很多好东西可以帮助你入门。

# .net - WinForm CRUD App 的 UI 设计，有什么用？

> ID：820461
> 
> 赞同：12
> 
> 时间：2009-05-04T14:55:11.900
> 
> 标签：.net, winforms, user-interface, crud

我正在为一大群护士和社会工作者设计一个 WinForms CRUD “like”应用程序，以与客户信息进行交互。

对于任何给定的客户，他们需要“可能”与之交互的许多不同形式（大约**30**种），并且对于特定的人，他们“可能”需要从一个跳到另一个。

我正在努力设计用户界面。我只设计了非常简单的线性 WEBForm CRUD，您可以在其中在页面上执行您需要的操作，然后单击下一步。

什么对非线性 WINForm CRUD 应用程序有意义？

我已经开始在这些选项卡中嵌入表单的选项卡路径，但可能由于我缺乏能力，该程序感觉非常庞大。我不确定直接 MDI 是否可行，因为我有非常简单的用户，如果窗口“隐藏”，他们可能很容易混淆。

我非常感谢任何人可能拥有的任何建议、见解或示例。特别是如果有人不得不自己制作 WINForm CRUD 应用程序。

哪种 UI 布局对您有效（或无效）？

我目前的样子的一个例子在这里 -->

[![](https://i.stack.imgur.com/451Sr.jpg)](https://i.stack.imgur.com/451Sr.jpg)

来自[DevFiles](http://picasaweb.google.com/TheSchallers/DevFiles?feat=embedwebsite)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-04T17:08:43.390

免责声明：我一直在做 CRUD，我不知道有多久了，但我现在才开始使用我的第一个 winforms 应用程序。

所以，一些混合的想法：

在我们当前的系统（使用 Centura/Gupta 编写）中，我们使用类似 MDI 的方法。我认为允许用户开始处理新记录而不强迫他关闭当前工作很重要，因此始终显示打开窗口的列表以允许在不同表单之间快速切换。例子：

[![替代文字](https://i.stack.imgur.com/OCpHN.png)](https://i.stack.imgur.com/OCpHN.png)
[（来源：[pingmbh.de](http://www.pingmbh.de/download/medi01.png)）]
左下方打开的窗口列表。该系统还可以从另一个记录中打开一个记录，例如打开一个客户，显示该客户的订单，双击他的一个订单以打开它等等。

现在关于winforms：在做了一些研究之后，我决定反对MDI，而是使用包含一些SplitContainers的表单。其中一个容器面板显示打开的窗口列表，另一个显示当前窗体。由于我没有找到在面板中显示表单的方法，因此表单被实现为用户控件。主窗体跟踪打开的窗口并将它们显示在窗口列表中。如果用户单击列表中的窗口，或从程序中的其他位置打开相同的记录，则会将相应的面板带到前面。正在进行的工作图片：（ [来源：][[pingmbh.de](http://www.pingmbh.de/download/pdp_progress.png)][）][![替代文字](https://i.stack.imgur.com/yh17x.png)](https://i.stack.imgur.com/yh17x.png)

考虑将现有记录的选择与这些记录的编辑分开，即将现有记录显示在具有过滤和搜索功能的某种表格（如网格视图）中，并让用户双击这些记录进行编辑。

我注意到在您的屏幕截图中，您有“插入”和“更新”按钮。这是为了创建新记录和保存现有记录吗？我认为更好的方法是给用户一个“新建”按钮，然后打开一个包含“保存”和“取消”按钮的表单。用户可能并不总是记得他是否开始编辑新记录或现有记录。

顺便说一句，选择屏幕是“新记录”按钮的好地方。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-04T17:33:02.223

我通过 CRUD 类型的应用程序学到的最重要的事情之一是确保几乎每个按钮都有热键，并且标签顺序设置正确。

大多数时候，当您进行数据输入/修改时，您不希望将手从键盘上移开以将鼠标移动到提交/更新按钮，尤其是在处理大量数据的情况下。将这两项按顺序排列将大大提高应用程序的生产力。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-04T17:29:57.677

这里有一些公认的模式，有时您可以有效地组合它们：

1.  标签页
2.  TreeView（Win Explorer 文件夹，Visual Studio 的工具|选项）
3.  折叠面板（Outlook 邮件/日历/联系人）

折叠面板不是标准控件，但有几种可用的实现（这里[只有一个](http://www.codeproject.com/KB/selection/csoutlookbar.aspx)）

而且您并不孤单，对于一些灵感，请参阅这个[SO answer](https://stackoverflow.com/questions/84556/whats-your-favorite-programmer-cartoon/109884#109884)。

# mysql - 从不删除条目？好主意？通常？

> ID：820466
> 
> 赞同：18
> 
> 时间：2009-05-04T14:56:02.337
> 
> 标签：mysql

我正在设计一个系统，我认为让最终用户能够删除数据库中的条目并不是一个好主意。我是这样认为的，因为通常最终用户一旦获得管理员权限，最终可能会在数据库中弄得一团糟，然后求助于我来修复它。

当然，如果他们被设置为管理员，他们将需要能够删除条目，或者至少认为他们做到了。

所以，我在想数据库中的**所有**条目都应该有一个“活动”字段。如果他们试图删除一个条目，它只会将标志设置为“false”或类似的东西。然后会有某种超级管理员，我公司的团队可以改变这个领域。

我已经在我工作的另一家公司看到了这一点，但我想知道这是否是个好主意。我*可以*只进行定期数据库备份，然后如果他们犯了错误就回滚，添加这个字段会给所有查询增加一些复杂性。

你怎么看？我应该那样做吗？你在你的应用程序中使用这种技巧吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-04T15:01:34.740

在我们的一个数据库中，我们区分了`transactional`和`dictionary`记录。

简而言之，`transactional`记录是您在现实生活中无法回滚的东西，例如来自客户的电话。您可以更改呼叫者的姓名、状态等，但您不能自行关闭呼叫。

`Dictionary`记录是您可以更改的内容，例如将 a 分配`city`给客户。

`Transactional`记录**和导致它们**的东西永远不会被删除，而`dictionary`那些可以被删除的。

我所说的“导致它们的事物”是指一旦记录出现在可以导致`transactional`记录的业务规则中，该记录也变为`transactional`.

就像，`city`可以从数据库中删除 a 。但是当一条规则出现“发送给**莫斯科**`SMS`的所有客户”时，这些城市也成为了记录，否则我们将无法回答“为什么要发送这个”的问题。**`transactional``SMS`**

 **区分的经验法则是：*这只是我公司的业务吗？*

如果我的一位员工根据数据库中的数据做出决定（例如，他做了一份报告，根据该报告做出了一些管理决策，然后数据报告基于消失），则认为删除这些数据是可以的。

但是，如果该决定影响了与客户的一些直接行动（例如打电话、弄乱客户的余额等），那么导致这些决定的所有内容都会被永久保留。

它可能因一种商业模式而异：有时，甚至可能需要记录内部数据，有时可以删除影响外部世界的数据。

但是对于我们的商业模式，上面的规则运行良好。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-04T15:00:27.457

人们做这样的事情的几个原因是为了审计和自动回滚。如果一行被完全删除，那么如果它出错，则无法自动回滚该删除。此外，保持一行及其先前的状态对于审核很重要 - 超级用户应该能够看到谁删除了什么以及何时以及谁更改了什么等。

当然，这完全取决于您当前应用程序的业务逻辑。一些应用程序不需要审计，完全删除一行可能是合适的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-05-04T15:11:32.267

仅设置 IsActive 或 DeletedDate 之类的标志的缺点是，所有查询在提取数据时都必须考虑该标志。这使得另一个程序员在编写报告时更有可能不小心忘记这个标志......

更好的选择是将记录存档到不同的数据库中。通过这种方式，它已被物理移动到通常不会搜索到的位置。您可以添加几个字段来捕获谁以及何时删除它；但关键是它不会污染您的主数据库。

此外，您可以提供撤消功能以相当快地将其恢复；并在 30 天或类似的时间后永久删除。

**关于观点的更新：**

使用视图，数据仍然参与您的索引方案。如果可能删除的数据量很小，则视图可能会很好，因为从编码的角度来看它们更简单。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-04T15:05:18.163

我更喜欢你描述的方法。能够撤消错误真是太好了。通常情况下，没有简单的方法可以返回`DELETE`查询。我从来没有遇到过这种方法的问题，除非您用“已删除”条目填充数据库，否则不应该有问题。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-04T15:05:40.690

我使用多种技术来解决这个问题。对于某些事情，添加额外的“活动”字段是有意义的。然后用户会觉得某个项目已被删除，因为它不再出现在应用程序屏幕上。我将实现这一点的场景将包括需要保留历史记录的项目......让我们说发票和付款。我不希望出于任何原因删除此类内容。

但是，数据库中有一些不那么敏感的项目，比如说我想要动态的类别列表......然后我可能会允许具有管理员权限的用户添加和删除一个类别，并且删除可以成为永久的。但是，作为应用程序逻辑的一部分，我将在允许删除之前检查该类别是否在任何地方使用。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-05T13:56:07.697

我建议使用第二个数据库，例如 DB_Archives，在其中添加从 DB 中删除的每一行。is_active 字段否定了外键约束的目的，您必须确保在其他地方引用该行时不会将其标记为已删除。当您的数据库结构庞大时，这变得过于复杂。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-04T14:59:31.580

许多应用程序（drupal 的版本控制系统等）中都存在一种可接受的做法。由于 MySQL 可以快速轻松地扩展，所以应该没问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-04T15:07:54.913

我最近一直在做一个项目，所有数据也都保存在数据库中。每个单独行的状态保存在一个整数字段中（数据可以是活动的、已删除的、in_need_for_manual_correction、历史的）。

您应该考虑使用视图仅访问每个表中的活动/历史/...数据。这样您的查询就不会变得更复杂。

另一件让事情变得简单的事情是使用 UPDATE/INSERT/DELETE 触发器来处理数据库内的所有标志更改，从而将复杂的东西排除在应用程序之外（大部分情况下）。

我应该提到数据库是一个 MSSQL 2005 服务器，但我想同样的方法也应该适用于 mysql。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-04T15:10:33.050

是和不是。

它*会使*您的应用程序变得比您预期的要复杂得多，因为每个不允许删除的表都将在额外检查 (IsDeleted=false) 等之后。这听起来并不多，但是当您构建更大的应用程序并查询 11 个表时 9 需要不删除的检查..它很乏味且容易出错。（嗯，是的，然后有删除/未删除的视图......当你记得做/使用它们时）

一些模式升级将成为 PITA，因为您必须放松 FK:s 并为非常非常旧的数据发明“合适的”数据。

我没有尝试过，但已经考虑了一些关于将行数据压缩到 xml 并将其存储在一些“历史”表中的解决方案。然后，如果“必须立即恢复 OMG，世界正在死去！11”，则可以挖掘出来。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-05-04T15:37:48.693

我同意所有受访者的观点，如果您有能力永久保留旧数据，那是个好主意；为了性能和简单性，我同意将“逻辑删除”记录移动到“旧东西”表而不是添加“is_deleted”标志的建议（移动到完全不同的数据库似乎有点矫枉过正，但您可以轻松更改为如果最终累积的数据量对于具有普通和“旧东西”表的单个数据库来说是一个问题，那么稍后会采取更激烈的方法）。

# asp.net-mvc - DataAnnotationsModelBinder 如何与自定义 ViewModel 一起使用？

> ID：820468
> 
> 赞同：5
> 
> 时间：2009-05-04T14:56:14.927
> 
> 标签：asp.net-mvc, data-binding, viewmodel

我正在尝试使用[DataAnnotationsModelBinder](http://aspnet.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=24471)以便在 ASP.NET MVC 中使用数据注释进行服务器端验证。

只要我的 ViewModel 只是一个具有直接属性的简单类，一切都可以正常工作，例如

```
public class Foo
{
    public int Bar {get;set;}
} 
```

但是，尝试使用 complex 时的`DataAnnotationsModelBinder`原因，例如`NullReferenceException``ViewModel`

```
public class Foo
{
    public class Baz
    {
        public int Bar {get;set;}
    }

    public Baz MyBazProperty {get;set;}
} 
```

对于呈现多个 LINQ 实体的视图来说，这是一个大问题，因为我真的更喜欢使用`ViewModel`包含多个 LINQ 实体的自定义而不是无类型的 ViewData 数组。

`DefaultModelBinder`没有这个问题，所以它看起来像一个错误`DataAnnotationsModelBinder`。有什么解决方法吗？

**编辑：**一种可能的解决方法当然是在 ViewModel 类中公开子对象的属性，如下所示：

```
public class Foo
{
    private Baz myBazInstance;

    [Required]
    public string ExposedBar
    {
        get { return MyBaz.Bar; }
        set { MyBaz.Bar = value; }
    }

    public Baz MyBaz
    {
        get { return myBazInstance ?? (myBazInstance = new Baz()); }
        set { myBazInstance = value; }
    }

    #region Nested type: Baz

    public class Baz
    {
        [Required]
        public string Bar { get; set; }
    }

    #endregion
}

#endregion 
```

但我宁愿不必编写所有这些额外的代码。这种`DefaultModelBinder`层次结构可以正常工作，所以我认为`DataAnnotationsModelBinder`也应该如此。

**第二次编辑：**看起来这确实是`DataAnnotationsModelBinder`. 但是，希望在下一个 ASP.NET MVC 框架版本发布之前解决这个问题。有关更多详细信息，请参阅[此论坛主题](http://forums.asp.net/p/1418796/3139121.aspx#3139121)。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-14T17:04:18.610

我今天遇到了完全相同的问题。像你自己一样，我不会将我的视图直接绑定到我的模型，而是使用一个中间 ViewDataModel 类，该类包含模型的实例和我想发送到视图的任何参数/配置。

我最终修改`BindProperty`了 DataAnnotationsModelBinder 以规避`NullReferenceException`，而且我个人不喜欢仅在属性有效时才绑定属性（请参阅下面的原因）。

```
protected override void BindProperty(ControllerContext controllerContext,
                                         ModelBindingContext bindingContext,
                                         PropertyDescriptor propertyDescriptor) {
    string fullPropertyKey = CreateSubPropertyName(bindingContext.ModelName, propertyDescriptor.Name);

    // Only bind properties that are part of the request
    if (bindingContext.ValueProvider.DoesAnyKeyHavePrefix(fullPropertyKey)) {
        var innerContext = new ModelBindingContext() {
            Model = propertyDescriptor.GetValue(bindingContext.Model),
            ModelName = fullPropertyKey,
            ModelState = bindingContext.ModelState,
            ModelType = propertyDescriptor.PropertyType,
            ValueProvider = bindingContext.ValueProvider
        };

        IModelBinder binder = Binders.GetBinder(propertyDescriptor.PropertyType);
        object newPropertyValue = ConvertValue(propertyDescriptor, binder.BindModel(controllerContext, innerContext));
        ModelState modelState = bindingContext.ModelState[fullPropertyKey];
        if (modelState == null)
        {
            var keys = bindingContext.ValueProvider.FindKeysWithPrefix(fullPropertyKey);
            if (keys != null && keys.Count() > 0)
                modelState = bindingContext.ModelState[keys.First().Key];
        }
        // Only validate and bind if the property itself has no errors
        //if (modelState.Errors.Count == 0) {
            SetProperty(controllerContext, bindingContext, propertyDescriptor, newPropertyValue);
            if (OnPropertyValidating(controllerContext, bindingContext, propertyDescriptor, newPropertyValue)) {

                OnPropertyValidated(controllerContext, bindingContext, propertyDescriptor, newPropertyValue);
            }
        //}

        // There was an error getting the value from the binder, which was probably a format
        // exception (meaning, the data wasn't appropriate for the field)
        if (modelState.Errors.Count != 0) {
            foreach (var error in modelState.Errors.Where(err => err.ErrorMessage == "" && err.Exception != null).ToList()) {
                for (var exception = error.Exception; exception != null; exception = exception.InnerException) {
                    if (exception is FormatException) {
                        string displayName = GetDisplayName(propertyDescriptor);
                        string errorMessage = InvalidValueFormatter(propertyDescriptor, modelState.Value.AttemptedValue, displayName);
                        modelState.Errors.Remove(error);
                        modelState.Errors.Add(errorMessage);
                        break;
                    }
                }
            }
        }
    }
} 
```

我还对其进行了修改，使其**始终**绑定属性上的数据，无论它是否有效。这样我就可以将模型传递回视图，而无需将无效属性重置为 null。

**控制器摘录**

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Edit(ProfileViewDataModel model)
{
    FormCollection form = new FormCollection(this.Request.Form);
    wsPerson service = new wsPerson();
    Person newPerson = service.Select(1, -1);
    if (ModelState.IsValid && TryUpdateModel<IPersonBindable>(newPerson, "Person", form.ToValueProvider()))
    {
        //call wsPerson.save(newPerson);
    }
    return View(model); //model.Person is always bound no null properties (unless they were null to begin with)
} 
```

我的模型类（人）来自一个网络服务，所以我不能直接把属性放在他们身上，我解决这个问题的方法如下：

**带有嵌套 DataAnnotations 的示例**

```
[Validation.MetadataType(typeof(PersonValidation))]
public partial class Person : IPersonBindable { } //force partial.

public class PersonValidation
{
    [Validation.Immutable]
    public int Id { get; set; }
    [Validation.Required]
    public string FirstName { get; set; }
    [Validation.StringLength(35)]
    [Validation.Required]
    public string LastName { get; set; }
    CategoryItemNullable NearestGeographicRegion { get; set; }
}

[Validation.MetadataType(typeof(CategoryItemNullableValidation))]
public partial class CategoryItemNullable { }

public class CategoryItemNullableValidation
{
    [Validation.Required]
    public string Text { get; set; }
    [Validation.Range(1,10)]
    public string Value { get; set; }
} 
```

现在，如果我将表单字段绑定到`[ViewDataModel.]Person.NearestGeographicRegion.Text`& `[ViewDataModel.]Person.NearestGeographicRegion.Value`，ModelState 开始正确验证它们，DataAnnotationsModelBinder 也会正确绑定它们。

这个答案不是确定的，是今天下午挠头的产物。[尽管它通过了 Brian Wilson 开始的项目](http://bradwilson.typepad.com/blog/2009/04/dataannotations-and-aspnet-mvc.html)中的单元测试和我自己的大部分有限测试，但它没有经过适当的测试。为了真正结束这件事，我很想听听[Brad Wilson](http://bradwilson.typepad.com/blog/2009/04/dataannotations-and-aspnet-mvc.html)对这个解决方案的看法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-06-14T02:11:53.083

正如 Martijn 所指出的，此问题的解决方法很简单。

在 BindProperty 方法中，你会发现这行代码：

```
if (modelState.Errors.Count == 0) { 
```

应改为：

```
if (modelState == null || modelState.Errors.Count == 0) { 
```

我们打算在 MVC 2 中包含 DataAnnotations 支持，其中将包含 DataAnnotationsModelBinder。此功能将成为第一个 CTP 的一部分。

# .net - .NET 中的 DoEvents

> ID：820471
> 
> 赞同：10
> 
> 时间：2009-05-04T14:57:31.990
> 
> 标签：.net, vb.net

.NET 中 VB6 的 DoEvents 的等价物是什么？

编辑：

我有一个 Sub 需要很长时间才能完成工作。（它有一个do-while）当我调用它时，表格变成白色。在 VB6 中，我曾经在方法中（在它的 do-while 内）放置一个 DoEvents 来防止这种情况。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-05-04T15:01:09.623

很少（如果有的话）DoEvents 是 .NET 中的正确解决方案。如果您发布一些关于您正在做的事情的信息，我们可能会对替代方案提出一些建议。

* * *

为了响应您的编辑，您需要做的是创建一个[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)。这将使您的主（GUI）线程保持空闲，允许它重新绘制并正常运行。网上有很多关于这个的教程，包括[这个](http://vbnotebookfor.net/2007/09/24/how-to-update-controls-using-backgroundworker-in-vbnet/)。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-05-04T14:58:35.433

[Application.DoEvents()](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.doevents.aspx)应该是您正在寻找的。

但是，请注意以下事项（来自链接的 MSDN 页面）：

> 与 Visual Basic 6.0 不同，DoEvents 方法不调用 Thread.Sleep 方法。

### 更新

鉴于现在的问题提供了对用法的解释，我会说重构以使用后台线程将是一个更好的解决方案。DoEvents 可能会导致一些问题，因为它会导致底层消息队列泵送，这可能导致重新进入和许多其他副作用。DoEvents 有有效的用例，我不敢说它的使用是不好的做法——它的存在是有正当理由的——但在大多数情况下，有比仅仅调用 DoEvents 更好的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-04T15:39:09.690

其他答案是正确的，作为旁注如果您需要使用 DoEvents() 考虑使用 BackgroundWorker 或 Control.Invoke 。99% 的时间 DoEvents() 表示一些肮脏的黑客行为。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-03T06:04:24.887

最简单的方法是：

`Application.DoEvents()`

因此你可以打电话`DoEvents`

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-07-17T14:49:11.183

对于那些认为 DoEvents 是邪恶的人，只需使用它：

System.Windows.Forms.Application.ThreadContext.FromCurrent.RunMessageLoop（2，无）

# javascript - 宽度吸收 HTML 元素

> ID：820473
> 
> 赞同：3
> 
> 时间：2009-05-04T14:57:52.580
> 
> 标签：javascript, html, css

我试图思考如何使用 html 元素来做到这一点。

![替代文字](https://i.stack.imgur.com/pip4W.png)

颜色没有什么特别之处，所以我不需要制作它们的图像。请注意，文本是右对齐的。此外，颜色条从左侧上升到文本。

所以这可以通过让文本与背景颜色为白色一起浮动，并在其旁边设置背景颜色的 div 来实现（然后是透明的）。

或者代替浮动，我可以做文本右对齐并获得类似的效果。

这是踢球者。

我正在使用一个 javascript 库（不管是哪一个）来创建动画。动画是条形向左收缩，最终如下：

![替代文字](https://i.stack.imgur.com/Fjzol.png)

float 或 text-align 方法的问题是必须更改太多值才能在两种状态之间转换。javascript 动画效果倾向于更改几个预定义的值，例如宽度或字体大小。为了使用浮动或文本对齐方法从图片 1 传输到图片 2，我必须删除浮动/文本对齐，然后设置条形颜色的宽度，但如果我想保留 javascript，这不起作用对于这样一个简单的任务，开销最小。

我已经尝试过绝对定位/宽度，但我无法使文本右对齐并使条在左侧的同一点相遇。

我希望也许我只是对一个简单的解决方案视而不见，但正如我所见，我需要一个元素以某种方式将文本定位在右侧，并且一个元素在它旁边尽可能多地占用颜色空间...并且具有颜色的元素应该能够采用宽度，同时让文本跟随在它旁边。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T15:26:37.380

这是我的尝试。**注意：**对于一些反桌子狂热者来说，这确实使用桌子。浮动不能像桌子那样“占用所有可用空间”。

```
<html>
<head>
<style type="text/css">
table { width: 300px; background: #DDD; empty-cells: show; }
th { padding-left: 8px; width: 100%; height: 1em; }
td { padding-left: 12px; width: auto; }
div { white-space: nowrap; }
#row1 th { background: red; }
#row2 th { background: blue; }
#row3 th { background: green; }
#row4 th { background: yellow; }
#row5 th { background: pink; }
#row6 th { background: gray; }
</style>
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type="text/javascript">
google.load("jquery", "1.3.2");
google.setOnLoadCallback(function() {
  $(function() {
    $("th").animate({ width: 0 }, 2000);
  });
});
</script>
</head>
<body>
<table><tr id="row1"><th></th><td><div>FOO</div></td></tr></table>
<table><tr id="row2"><th></th><td><div>BAR</div></td></tr></table>
<table><tr id="row3"><th></th><td><div>THESE PRETZELS ARE</div></td></tr></table>
<table><tr id="row4"><th></th><td><div>MAKING ME THIRSTY</div></td></tr></table>
<table><tr id="row5"><th></th><td><div>BLAH</div></td></tr></table>
<table><tr id="row6"><th></th><td><div>BLAH</div></td></tr></table>
</body>
</html> 
```

我想到了一种非常有效的非表格方式，所以这里是：

```
<html>
<head>
<style type="text/css">
div div { height: 1.3em; }
#wrapper { width: 300px; overflow: hidden; }
div.text { float: right; white-space: nowrap; clear: both; background: white; padding-left: 12px; text-align: left; }
#row1, #row2, #row3, #row4, #row5, #row6 { width: 270px; margin-bottom: 4px; }
#row1 { background: red; }
#row2 { background: blue; }
#row3 { background: green; }
#row4 { background: yellow; }
#row5 { background: pink; }
#row6 { background: gray; }
</style>
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type="text/javascript">
google.load("jquery", "1.3.2");
google.setOnLoadCallback(function() {
  $(function() {
    $("div.text").animate({ width: "90%" }, 2000);
  });
});
</script>
</head>
<body>
<div id="wrapper">
<div class="text">FOO</div><div id="row1"></div>
<div class="text">BAR</div><div id="row2"></div>
<div class="text">THESE PRETZELS ARE</div><div id="row3"></div>
<div class="text">MAKING ME THIRSTY</div><div id="row4"></div>
<div class="text">BLAH</div><div id="row5"></div>
<div class="text">BLAH</div><div id="row6"></div>
</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T15:43:00.303

这是经过测试的，它工作得很好（没有愚蠢的表格和非常简单的 CSS/jQuery）：

```
<style type="text/css">
   .crazy_slider { display:block; height:25px; width:500px; clear:both; position:relative; z-index:0; text-decoration:none; }
    .crazy_slider_text { position:absolute; right:0px; top:0px; height:100%; background-color:white; color:#666; font-size:1em; display:block; text-align:left; z-index:1px; padding-left:10px; }
    #red { background-color:red; }
    #blue { background-color:blue; }
    #green { background-color:green; }
    #yellow { background-color:yellow; }
    #pink { background-color:pink; }
    #grey { background-color:grey; }
</style>

<script type="text/javascript">
    $(function() {
        $('.crazy_slider').hover(
            function() {
                var bar_width = $(this).width();
                var $crazy_slider_text = $(this).children('.crazy_slider_text');
                if($crazy_slider_text.data('original_width') == null || $crazy_slider_text.data('original_width') == undefined || !$crazy_slider_text.data('original_width')) {
                    var original_width = $crazy_slider_text.width();
                    $crazy_slider_text.data('original_width',original_width);
                }
                $crazy_slider_text.stop().animate({width:95+'%'},500);
            },
            function() {
                var $crazy_slider_text = $(this).children('.crazy_slider_text');
                var text_width = $crazy_slider_text.data('original_width');
                $crazy_slider_text.stop().animate({width:text_width+"px"},500);
            }
        );
    });
</script>

<a href="#" class="crazy_slider" id="red"><div class="crazy_slider_text">FOO</div></a>
<a href="#" class="crazy_slider" id="blue"><div class="crazy_slider_text">BAR</div></a>
<a href="#" class="crazy_slider" id="green"><div class="crazy_slider_text">BAZ</div></a>
<a href="#" class="crazy_slider" id="yellow"><div class="crazy_slider_text">FOOBAR</div></a>
<a href="#" class="crazy_slider" id="pink"><div class="crazy_slider_text">FOOBARBAZ</div></a>
<a href="#" class="crazy_slider" id="grey"><div class="crazy_slider_text">BAZAGAIN</div></a> 
```

**编辑：** 我假设你想用这些来制作某种导航元素，所以我添加了鼠标交互逻辑。无论如何，它可能有用，哈哈？

**第二次编辑：** 我已经将代码更改为更高效和更可预测......如果有人在乎的话。;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T15:27:57.627

彩色条是否需要具有特定的宽度，或者只是填充右侧单词和左侧原点之间的空间？假设我的假设是正确的：

```
<style>

#container    {width: 50%;
          margin: 0 auto;
        }

span    {width: 100%;
        display: block;
        text-align: right;
        margin: 0.2em 0;
        }

span p  {text-align: right;
        background-color: #fff;
        color: #333;
        display: inline-block;
        padding: 0 0 0 0.4em;
        line-height: 1.4em;
        font-weight: bold;
        }

span#foo    {background-color: #f00;
        }
span#bar    {background-color: #0f0;
        }
span#foobar {background-color: #00f;
        }

 </style>

<div id="container">
    <span id="foo">
        <p>foo</p>
    </span>
    <span id="bar">
        <p>bar</p>
    </span>
    <span id="foobar">
        <p>foobar</p>
    </span>

</div> 
```

工作演示：[http://davidrhysthomas.co.uk/so/colouredfoobars.html](http://davidrhysthomas.co.uk/so/colouredfoobars.html)

# c# - 如何更改 WCF 的默认配置？

> ID：820480
> 
> 赞同：2
> 
> 时间：2009-05-04T14:59:44.590
> 
> 标签：c#, wcf, configuration

我已经像这样初始化了 WCF 客户端

```
 MyServiceClient client = new MyServiceClient(); 
```

所以它使用 app.config 来读取端点。我想将默认配置文件动态更改为我定义的文件。我知道我可以打开这样的配置文件：

```
Configuration myConfig = ConfigurationManager.OpenExeConfiguration 
```

但是如何设置`myConfig`替换默认配置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-04T15:57:03.670

在此处查看这篇文章：[从自定义位置读取 WCF 配置](http://www.paraesthesia.com/archive/2008/11/26/reading-wcf-configuration-from-a-custom-location.aspx)。

它基本上涉及创建一个自定义 ServiceHost，它将从您可以指定的不同文件读取配置，而不是从 web.config 或 app.config。

这是另一篇关于使用 IIS 中托管的 WCF 服务的自定义配置文件的优秀文章：http: [//blogs.msdn.com/dotnetinterop/archive/2008/09/22/custom-service-config-file-for-a-wcf-服务托管在 iis.aspx](http://blogs.msdn.com/dotnetinterop/archive/2008/09/22/custom-service-config-file-for-a-wcf-service-hosted-in-iis.aspx)

马克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T15:13:01.953

我已经看到通过从自定义配置文件（刚刚打开并使用标准 XML 解析器读取）中读取值来完成类似的操作。然后以编程方式将这些值插入到 WCF 配置条目中。

这样做是因为同一解决方案中的多个项目都从同一文件中读取其 WCF 配置条目。我不确定他们为什么采用那种架构，但最终它工作得很好。

# visual-studio - 您的解决方案中包含哪些项目

> ID：820490
> 
> 赞同：5
> 
> 时间：2009-05-04T15:02:04.070
> 
> 标签：visual-studio, architecture

您通常如何在 Visual Studio 中布置您的解决方案？最近，我把 BLL、DAL 和演示文稿放在不同的类中，并计划在学习 TDD 时添加一个测试解决方案。但是，在最近观看了 Rob Conery 的视频并查看了外部承包商的项目后，我注意到解决方案中的多个项目的主题。

解决方案中包含的项目是：

*   基础设施
*   模型
*   网络
*   测试
*   SQL 存储库

这是为 MVC 建议的新事物还是设计技术？谁能告诉我更多关于这个设计的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T16:15:41.053

首先，您需要了解 Rob 的编码习惯。他使用 MVC 式的开发方法（如果不是纯 MVC）并使用他的 ORM SubSonic。

使用 MVC 是“模型”类的原因，因为 SubSonic 2.1 包含迁移，他使用 SQL 存储库进行这些迁移，以便他可以对他的数据库进行版本控制。

测试和 Web 是不言自明的，只剩下基础设施，你的猜测和我的一样好，尽管它可能是 MVC 模式的“控制器”。

这完全取决于您使用的模式、您自己对关注点分离的偏好以及您一次开发多个项目的舒适度。

# url - “SEO 友好”网址可以包含唯一 ID 吗？

> ID：820493
> 
> 赞同：41
> 
> 时间：2009-05-04T15:03:33.503
> 
> 标签：url, seo, friendly-url

我想开始使用“SEO Friendly Urls”，但是相对于简单地通过整数查找而言，生成和查找大型、独特的文本“ids”的概念似乎是一个重大的性能挑战。现在，我知道这不是“人类友好”，但如果我从

```
http://mysite.com/products/details?id=1000 
```

到

```
http://mysite.com/products/spacelysprokets/sproket/id 
```

我仍然可以单独使用 ID 来快速查找详细信息，但 URL 本身包含将显示在该详细信息中的关键字。这对谷歌来说足够友好吗？我希望如此，因为这似乎比最终生成既独特又有意义的东西要容易得多。

谢谢！

詹姆士

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2009-09-18T00:57:53.540

**允许使用与堆栈溢出相同的方法来呈现页面时**要小心。****

 **`http://stackoverflow.com/questions/820493/random-text-can-cause-problems`

黑帽可能会导致长尾竞争对手的重复内容惩罚（相信我）。

**您可以做两件事来保护自己免受这种情况的影响。**

*   HTTP 301 将任何与您的 ID 匹配但与文本不匹配的入站显示 URL 重定向到正确的文本。

> 示例： `http://stackoverflow.com/questions/820493/random-text-can-cause-problems` 301 -> `http://stackoverflow.com/questions/820493/can-an-seo-friendly-url-contain-a-unique-id`

*   使用规范的 URL。

> `<link rel="canonical" href="http://stackoverflow.com/questions/820493/can-an-seo-friendly-url-contain-a-unique-id" />`

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2009-05-04T15:05:00.957

> [https://stackoverflow.com/questions/ **820493** /can-an-seo-friendly-url-contain-a-unique-id](https://stackoverflow.com/questions/820493/can-an-seo-friendly-url-contain-a-unique-id)

我会说你很好。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-05-04T15:05:07.073

查看 StackOverflow 使用的 URL。他们有一个唯一的 id，然后他们有对 SEO 友好的东西。您可以省略对 SEO 友好的内容，并且 URL 仍然有效。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-04T15:12:20.020

你在这里制造了一个恶魔般的讨价还价，你正在用商业目标来换取技术目标。

如果您要问“从纯粹的业务和 SEO 角度来看，在 URL 中包含唯一 ID 是否更好？”；答案显然是不使用它们。

那么问题就变成了，如果你确实使用它们，它在搜索引擎中对你的伤害有多大？答案是肯定会产生一些负面影响。多少还有待确定。

就“用户友好”而言，不，它们绝对不是用户友好的。

就 Google 而言，他们声明“尽可能通过修剪不必要的参数来缩短 URL。” 请参阅他们的[URL 结构](http://www.google.com/support/webmasters/bin/answer.py?hl=en&answer=76329)文档。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-04T15:46:36.723

我不知道将 ID 添加到 URL 会导致任何问题。事实上，它可能非常有用，因为它允许更改 URL 中对人类/搜索引擎友好的部分，而不会导致指向搜索引擎已编入索引的页面的链接断开。以 SO 为例，这是您问题的链接：

[https://stackoverflow.com/questions/820493/you-can-put-any-text-you-want-here](https://stackoverflow.com/questions/820493/and-you-will-still-end-up-on-the-right-page)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-04T15:14:49.577

没有错。[正如Paul Tomblin 已经指出](https://stackoverflow.com/questions/820493/can-an-seo-friendly-url-contain-a-unique-id/820498#820498)的那样，越来越多的服务已经开始使用混合解决方案。除了 SO，Tumblr 也使用这种模式（也许是第一个）。

此外，在某些服务（如[Google 新闻](http://www.google.com/support/news_pub/bin/answer.py?hl=en&answer=68323)）中，URL 必须包含唯一的数字 ID。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-04T15:15:42.133

摆脱参数化的 URL 肯定会有所帮助。根据我的经验，只要 url 中没有 '?key=value' 对，包括 ID 在内都不会造成伤害或帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-09-18T01:22:32.530

我在这里有两个看似矛盾的观点：-

1.  没有人看网址！经验已经“训练”浏览器用户将“地址”框内容呈现为不可见，他们知道内容将是“不可读”、“无意义”和“令人困惑”中的任何两个，因此他们完全忽略了它。

2.  使用可以轻松转换为整数的字符串可能会比使用稍微难以转换为整数的较长字符串（hash() 与 to_int()）提供轻微的性能优势。但是，在普通 Web 应用程序的上下文中，任何性能差异都可以忽略不计。

我的建议是坚持你喜欢的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-04T19:05:57.087

使用[modrewrite 之](http://httpd.apache.org/docs/1.3/mod/mod_rewrite.html)类的东西在 URL 到达您的服务器之前对其进行解析。[因此，您可以将http://oorl.com/99942/My-Friendly-Text-For-Search-Engines/](http://oorl.com/99942/My-Friendly-Text-For-Search-Engines/)之类的 slug 转换为[http://oorl.com/lookup.php?id=99942](http://oorl.com/lookup.php?id=99942)。这还可以让您更改用于优化某些链接的 slug 和关键字，而不会损坏功能。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-29T22:51:44.913

与友好 URL 相比，重复引用会造成更多负面影响，请小心使用带有 id 的虚假文本，您的竞争对手可能会错过使用它。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2009-09-18T01:02:15.663

是的，事实上，在你的 url 中包含一个数字对 SEO*更*友好，因为它向谷歌暗示你一直在更新你的内容。

我相当肯定，如果您没有以某种方式将递增数字附加到您的网址，那么在 Google 新闻中被编入索引会变得更加困难。

# mysql - View 上奇怪的 Mysql 查询性能

> ID：820495
> 
> 赞同：0
> 
> 时间：2009-05-04T15:04:27.060
> 
> 标签：mysql, optimization

我有一个看法：vcompanyendofday

以下查询仅在 0.7 秒内执行

```
Select * from vcompanyendofday 
```

但是这个查询的简单 where 条件大约需要 200.0 秒

```
select * from vcompanyendofday where companyid <= 51; 
```

这是视图定义：

```
 CREATE VIEW `vcompanyendofday` AS 
  select  `c`.`companyid` AS `companyid`,
          `c`.`scripcode` AS `scripcode`,
          `e`.`eoddate` AS `eoddate`,
          `e`.`prevclose` AS `prevclose`,
          `e`.`delqty` AS `delqty` 
  from    (
          `company` `c`
  left join
          `endofday` `e`
  on      ((`c`.`companyid` = `e`.`companyid`)))
  where   (`e`.`eoddate` =
          (
          select  max(`e2`.`eoddate`) AS `max(eoddate)`
          from    `endofday` `e2` 
          where (`e2`.`companyid` = `c`.`companyid`)
          )
  ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T15:22:40.510

好像你没有索引`endofday.companyid`

当您添加条件时，`company`成为连接中的领先者，并杀死所有性能。

在 上创建索引`endofday.companyid`：

```
CREATE INDEX ix_endofday_companyid ON endofday(companyid) 
```

顺便说一句，如果你想返回所有的公司，你需要把子查询放到 的`ON`子句中`OUTER JOIN`，否则你缺少`endofday`的会被过滤掉：

```
CREATE VIEW `vcompanyendofday` AS 
select  `c`.`companyid` AS `companyid`,
        `c`.`scripcode` AS `scripcode`,
        `e`.`eoddate` AS `eoddate`,
        `e`.`prevclose` AS `prevclose`,
        `e`.`delqty` AS `delqty` 
from    (
        `company` `c`
left join
        `endofday` `e`
on      `c`.`companyid` = `e`.`companyid`
        AND `e`.`eoddate` =
        (
        select  max(`e2`.`eoddate`) AS `max(eoddate)`
        from    `endofday` `e2` 
        where (`e2`.`companyid` = `c`.`companyid`)
        ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T15:09:22.163

您是否尝试过使用 WHERE 子句自行创建视图的选择，看看会发生什么？

如果出现问题，`EXPLAIN`请在该查询上运行以查看发生了什么。

猜测一下，其中一张表中没有关于 companyid 的索引，很可能是当天结束。

# python - 蛞蝓和 unicode 的规则

> ID：820496
> 
> 赞同：11
> 
> 时间：2009-05-04T15:04:38.867
> 
> 标签：python, google-app-engine, url, unicode, friendly-url

在研究了人们如何处理标题的不同方式之后，我注意到它经常错过如何处理非英语标题。

url 编码非常严格。见[http://www.blooberry.com/indexdot/html/topics/urlencoding.htm](http://www.blooberry.com/indexdot/html/topics/urlencoding.htm)

因此，例如，人们如何处理诸如此类的标题

"Una lágrima cayó en la arena"

可以为印欧语言提出一个合理的表格，即。可以通过 ISO-8859-1 编码的东西。例如，转换表将翻译 'á' => 'a'，所以 slug 将是

"una-lagrima-cayo-en-la-arena"

但是，我使用的是 unicode（特别是使用 UTF-8 编码），因此无法保证我将获得哪些排序代码点（我必须为无法使用 ISO-8859-1 编码的东西做好准备。

我很无语。如何处理？我是否应该为 ISO_8859-1 范围（<255）中的字符提供一个转换表并放弃其他所有内容？

**编辑**：为了先验地提供更多背景信息，我真的不希望用非印欧语言处理数据，但如果遇到此类数据，我想制定一个计划。扩展 ASCII 的转换表会很好。任何指针？

另外，由于人们在问，我正在使用 python，在 Google App Engine 上运行

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-05T13:21:26.440

几乎完整的音译表（用于拉丁语、希腊语和西里尔语字符集）可以在[slughifi 库](http://trac.django-fr.org/browser/site/trunk/project/links/slughifi.py?rev=47)中找到。它面向 Django，但可以轻松修改以满足一般需求（我将它与 AppEngine 上基于 Werkzeug 的应用程序一起使用）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-05T09:58:39.313

我只是将 utf-8 用于 URL 路径。只要域是非 IDN FF3，IE 就可以正常工作。Google 会正确读取并显示它们。[IRI RFC](http://www.ietf.org/rfc/rfc3987)允许使用Unicode。只要确保正确解析传入的 url。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-05T01:27:51.897

一般来说，这将取决于您期望获得的语言。如果您的主要用户群是日本人，那么删除除 ISO-8859-1 字符之外的所有内容不太可能顺利进行。

也就是说，如果您的字符集转换库支持，一种选择可能是使用音译模式。例如，使用 GNU iconv，可以：

```
] echo Una lágrima cayó en la arena|iconv -f utf8 -t ascii//TRANSLIT
Una lagrima cayo en la arena 
```

如您所见，重音字符自动转换为 ASCII 范围内的字符。如何将其转换为代码当然取决于您使用的语言，但如果您的语言基于 GNU iconv 进行字符集转换（如果它在 linux 上，它可能是），这个技巧可能可以直接应用只需将“ascii//TRANSLIT”指定为转换为字符集。

然而，需要注意的一点是，它只对“看起来像”ASCII 中的某些字符有效。例如：

```
] echo 我輩は猫である。名前はまだない。|iconv -f utf8 -t ascii//TRANSLIT                                               
???????????????? 
```

如您所见，它对日语没有多大帮助，并且需要在之后进一步处理以删除不适合 URL 的字符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-05T01:01:42.893

如果一切都失败了，您可以使用转换表，但可能有更好的解决方案可用。您使用的是什么服务器端语言？

# user-interface - 关于软件中有意义的消息

> ID：820513
> 
> 赞同：1
> 
> 时间：2009-05-04T15:09:23.677
> 
> 标签：user-interface, messages

我很困惑如何为我的 SW 写好消息。像下面这样：

> “要保存项目，请点击‘保存’按钮。要取消它，请点击‘取消’按钮。”

但我觉得真的没用，你对如何写有意义的信息有什么意见吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-04T15:17:13.877

我个人喜欢不需要太多解释的信息。Windows 应用程序的第一个错误是使用带有标准文本的按钮，而不是按下它时执行的操作。

示例：而不是这个：

> ```
> Do you want to save the changes before closing?
> - To save the changes press Yes
> - To discard the changes press No
> - To cancel and keep the application open press Cancel
> [Yes] [No] [Cancel] 
> ```

我喜欢

> ```
> Do you want to save the changes before closing?
> [Save] [Discard] [Cancel] 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T15:13:10.297

如果这是一个提示，那么我会使用问答风格：

> 保存对此项目的更改？
> 
> [是] [否]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T15:14:35.723

*   不要说明显的
*   但是不要假设对你来说显而易见的事情对用户来说是显而易见的。
*   链接到帮助主题，解释您的消息使用的术语的含义
*   模拟 Mac：许多提示都有“嗯？” 导致进一步帮助的链接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-04T15:22:43.613

不确定时，添加帮助选项。

所以而不是：

“输入 S 保存 C 表示取消”

采用

“输入 S 表示保存，输入 C 表示取消或输入 H 表示帮助”

另一个重要特性是如果您的应用程序是一致的，特别是与它的操作环境一致。例如，对于几乎所有 Windows 应用程序，按下 F1 键都会显示帮助屏幕。同样，按 F5 通常会刷新当前视图。

真正让用户抓狂的是一个反复无常的界面。考虑一个应用程序，有时按 F1 会显示帮助，而在应用程序的其他部分按 F1 将意味着“删除此文档”

出于这个原因，供应商（Apple、Microsoft）经常发布关于应用程序应如何在其平台上与用户交互的样式指南。例如，Microsoft 有[Windows 用户体验交互指南](http://msdn.microsoft.com/en-us/library/aa511258.aspx)，其中：

“这些官方 Windows 用户体验交互指南（或简称为“UX 指南”）的目标是：

为所有基于 Windows 的应用程序建立高质量和一致性基线。回答您的特定用户体验问题。让你的工作更轻松！”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-04T16:21:41.163

如果您正在谈论*错误*消息，那么当您让用户知道为什么会发生此错误时会很棒。

例如，如果用户看到第 404 页，那么您不需要为他写整篇文章，但您应该参考“为什么我看到这个页面？”

如果用户在 URL 中犯了简单的错误，那么他不会打开该引用，但如果您的项目改变了它的结构并且一周前它是正确的 URL，而现在它不是，那么用户肯定会打开引用并阅读必要的信息。这是一个很好的风格。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-04T16:26:26.020

根据用户的操作描述选择。简明扼要。“省略不必要的话。” 理想情况下，按钮将描述操作，并且您不需要文本来减慢用户的速度。假设用户讨厌阅读屏幕上的任何内容；即使用户识字率很高，并且使用您的应用程序编写不死的散文，用户也对他或她所写的内容感兴趣，而不是关于系统正在做什么的冗长文本。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-05T03:54:16.943

如果您真的在帮助他们理解按钮的作用，请告诉他们单击按钮后会发生什么。

所以不要说“点击保存保存”，因为他们可能不知道“保存”是什么意思。说“单击保存，您的信息将被存储以备后用”或“如​​果您单击取消，您输入的所有信息都将丢失”。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-05T12:52:35.510

保持简短！

用户不会阅读解释按下哪个按钮的所有来龙去脉的段落。您最多只能获得用户将阅读的大约 2 个句子。有多少人真正读过第二段？

# c# - 列表中的 Microsoft WinForm ReportViewer

> ID：820514
> 
> 赞同：4
> 
> 时间：2009-05-04T15:09:42.333
> 
> 标签：c#, winforms, reporting, reportviewer

任何人都可以提供代码片段、教程链接或有关如何从对象列表在 Microsoft Report 中创建报告的信息吗？

我有以下 Dog 类：

```
namespace MyNS
{
   public class Dog
   {
      public int Legs { get; set; }
      public string Name { get; set; }
      public string Breed { get; set; }
   }
} 
```

然后，在窗口窗体中，我有一个 ReportViewer 对象，我想从**MyNS.Dog对象****列表**中填充它，如下所示：

 **```
List<MyNS.Dog> MyDogs = new List<MyNS.Dog>();
// populate array here
// and use it as datasource for ReportViewer 
```

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2011-11-18T03:54:56.777

对于 winform reportviewer：包括以下代码

```
public class Dog
    {

        int legs;

        public int Legs
        {
            get { return legs; }
            set { legs = value; }
        }
        string name;

        public string Name
        {
            get { return name; }
            set { name = value; }
        }
        string breed;

        public string Breed
        {
            get { return breed; }
            set { breed = value; }
        }

    }

    public class DogBll
    {
        List<Dog> myDog;
        public DogBll()
        {
            myDog = new List<Dog>();
            myDog.Add(new Dog() { Legs = 10, Name = "mimi", Breed = "german" });
            myDog.Add(new Dog() { Legs = 4, Name = "momo", Breed = "english" });
        }
        public List<Dog> GetDogs()
        {
            return myDog;
        }
    } 
```

构建您的解决方案，在您的表单中添加一个reportviewer 控件，在reportviewer 智能标签上，创建一个新报表并选择对象数据源，展开您的类并检查Dog 类作为您的对象数据源。再次选择您的reportviewer 控件，然后选择新创建的报表，会自动创建一个DogBindingSource。在您的表单类中，将以下代码添加到类的顶部。您可以在 public partial class Form1 之后使用第一行：Form { 语句，但在构造函数之前

```
private DogBll _dogBll = new DogBll(); 
```

在 formload() 上，添加：

```
this.DogBindingSource.DataSource = _dogBll.GetDogs(); 
```

对于 webform reportviewer：您应该提供一个返回 Dog 列表的函数，在这个类中它应该包含一个默认构造函数。

```
namespace MyNS 
{ 
   public class Dog 
   { 
      public int Legs { get; set; } 
      public string Name { get; set; } 
      public string Breed { get; set; } 
   }
   public class DogBll
   {
      public DogBll()
      {
      }
      public List<Dog> GetDogs(List<Dog> myDog)//make sure you set the parameter in object datasource
      {
          return myDog;
      }
    }
} 
```

添加报表查看器向导控件，选择数据源作为刚刚创建的新函数 GetDogs()，根据 Dog 类中的 3 个公共属性定义报表。在表单中添加对象数据源，将报表指向使用对象数据源。最后，在对象数据源中设置 GetDogs() 的参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T16:42:31.020

对于本地报告，您可以像这样指定数据源：

```
var reportViewer = New ReportViewer();
var reportDataSource = New ReportDataSource("MyNS_Dog", MyDogs);
reportViewer.LocalReport.DataSources.Add(reportDataSource); 
```

# ubuntu - .bashrc 在 ssh 登录

> ID：820517
> 
> 赞同：435
> 
> 时间：2009-05-04T15:10:11.537
> 
> 标签：ubuntu, ssh, bash

当我 ssh 进入运行 Hardy 8.04 的 ubuntu-box 时，我的环境变量`.bashrc`没有设置。

如果我做一个 source `.bashrc`，变量设置正确，一切都很好。

为什么`.bashrc`登录时不运行？

* * *

## 回答 #1

> 赞同：738
> 
> 时间：2009-05-04T15:14:39.810

`.bashrc`使用 SSH 登录时不来源。您需要`.bash_profile`像这样获取它：

```
if [ -f ~/.bashrc ]; then
  . ~/.bashrc
fi 
```

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2011-06-02T09:28:11.660

我也有类似 Hobhouse 的情况。我想使用命令

```
ssh myhost.com 'some_command' 
```

`some_command`存在于哪里`/var/some_location`。

我试图`/var/some_location`通过编辑附加到 PATH 环境变量，`$HOME/.bashrc`但这不起作用。因为默认情况下，`.bashrc`（在 Ubuntu 10.4 LTS 上）由于这段代码而提前退出：

```
# If not running interactively, don't do anything
[ -z "$PS1" ] && return 
```

这意味着如果您想更改 ssh 非登录 shell 的环境，您应该在该行上方添加代码。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2009-05-04T15:50:09.087

有关 bash 调用如何工作、点文件做什么以及应该如何使用/配置它们的优秀资源，请阅读以下内容：

*   [点文件](http://mywiki.wooledge.org/DotFiles)

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2009-05-04T15:19:22.857

如果 ayman 的解决方案不起作用，请尝试命名您的文件`.profile`而不是`.bash_profile`. 这对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-18T19:02:41.330

类似于 @Loïc Wolff ，在我的`$HOME/.bash_profile`Ubuntu 16下面添加

```
if [ -n "$BASH_VERSION" ]; then
    # include .bashrc if it exists
    if [ -f "$HOME/.bashrc" ]; then
        echo "Executed .bash_profile , calling .bashrc"
        . "$HOME/.bashrc"
    fi
fi 
```

# visual-c++ - MFC 库 - 将元素添加到固定大小的 CList

> ID：820519
> 
> 赞同：0
> 
> 时间：2009-05-04T15:10:17.247
> 
> 标签：visual-c++, mfc, list

我正在使用固定大小的 CList，我想知道当列表已满并且我调用添加另一个元素时实现会做什么。是否添加失败？它会替换最旧的元素吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T15:16:07.530

你如何制作一个固定大小的 CList？我不知道有这样的事情存在。你有可能误解了什么吗？

# c# - IoC：如何动态创建对象

> ID：820520
> 
> 赞同：4
> 
> 时间：2009-05-04T15:10:24.127
> 
> 标签：c#, inversion-of-control

我很难理解如何在需要动态创建对象的场景中使用 IoC。假设我有这个类：

```
abstract class Field {
  public Field( ICommandStack commandStack ) {}
}

abstract class Entity {
  public readonly Collection<Field> Fields { get; }
}

class EntityA {
  public EntityA( ICommandStack commandStack ) {
    Fields.Add( new StringField( commandStack ) );
  }
}

class EntitiyB {
  public EntityB( ICommandStack commandStack ) {
    Fields.Add( new IntField( commandStack ) );
    Fields.Add( new IntField( commandStack ) );
    Fields.Add( new IntField( commandStack ) );
  }
} 
```

所以我的问题是在构造函数中创建字段。我的字段需要一个 ICommandStack，但实体不需要。他们只获得用于创建字段的 ICommandStack。

在每个实体的构造函数中请求字段作为参数可能会更容易。但是单个实体的字段数可能大于 10。我不想创建具有这么多参数的构造函数。

所以我的想法是将 FieldFactory 交给实体：

```
class EntityA {
  public EntityA( IFieldFactory fieldFactory ) {
    // create as many fields as needed via the factory
    Fields.Add( fieldFactory.CreateStringField() );
  }
} 
```

至少（对于实体）不必要的 ICommandStack 现在已经消失了。但是 FieldFactory 是如何创建一个 Field 的呢？它只能注入 ICommandStack - 但字段的创建仍需通过“new”关键字完成。或者我应该向工厂提供我的 DI 容器的参考资料？

这里有什么好的设计解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T16:01:40.040

我会使用 FieldFactory 并通过对容器的引用来注入工厂（或者，如果您对对容器的强依赖不满意，则可以将其抽象为抽象的接口）。

否则，一路下来都是乌龟。您需要一些对象在某个时候向容器请求新实例。如果您希望您的字段被 DI 注入，那么您需要让容器或您来构建它们。

总而言之，我会和工厂一起去。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T15:31:13.000

在 Spring（和 Spring.NET）中，存在“原型范围”bean/对象的概念。

[http://static.springframework.org/spring/docs/2.0.x/reference/beans.html#beans-factory-scopes-prototype](http://static.springframework.org/spring/docs/2.0.x/reference/beans.html#beans-factory-scopes-prototype)

原型作用域不是注入固定对象并将它们全部连接在一起，而是在任何时候从 IoC 容器请求它时创建对象的新实例。我不确定您使用的是什么 DI 框架，但它可能有类似的东西。

# c++ - C++ 线程安全映射

> ID：820526
> 
> 赞同：17
> 
> 时间：2009-05-04T15:11:39.473
> 
> 标签：c++, dictionary, collections, thread-safety, stdmap

有谁知道我在哪里可以找到包装 a`std::map`并使其线程安全的暗示？当我说线程安全时，我的意思是它只提供对映射的串行访问，一次一个线程。理想情况下，此地图应仅使用标准库和/或增强结构。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-04T15:28:24.397

不符合您指定的标准，但您可以查看[TBB](http://www.threadingbuildingblocks.org/)容器。有所谓`concurrent_hash_map`的允许多个线程同时访问映射中的数据。有一些细节，但所有内容都有很好的文档记录，可以让您了解“并发容器”。根据您的需要，这可能是完全不合适的......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-04T15:15:22.477

boost shared_mutex 将提供最佳的多读取器/单写入器方法来包装标准映射给定您的约束。我不知道任何与这两者结合的“预建”实现，因为任务通常是微不足道的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-04T15:18:00.350

集合类提供线程安全通常不是一个好主意，因为它们不知道它们是如何被使用的。通过在使用集合的更高级别的构造中实现自己的锁定机制，您将获得更好的服务。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-04T15:20:30.343

试试这个库

[http://www.codeproject.com/KB/threads/lwsync.aspx](http://www.codeproject.com/KB/threads/lwsync.aspx)

它以现代 c++ 基于策略的方法实现。

这是链接中的一些内容，以显示“矢量”案例的想法

```
typedef lwsync::critical_resource<std::vector<int> > sync_vector_t;
sync_vector_t vec;

// some thread:
{
   // Critical resource can be naturally used with STL containers.
   sync_vector_t::const_accessor vec_access = vec.const_access();
   for(std::vector<int>::const_iterator where = vec_access->begin();
         where != vec_access->end();
         ++where;
        )
   std::cout << *where << std::endl;
}

sync_vector_t::accessor some_vector_action()
{
   sync_vector_t::accessor vec_access = vec.access();
   vec_access->push_back(10);
   return vec_access;
   // Access is escalated from within a some_vector_action() scope
   // So that one can make some other action with vector before it becomes
   // unlocked.
}

{
   sync_vector_t::accessor vec_access = some_vector_action();
   vec_access->push_back(20);
   // Elements 10 and 20 will be placed in vector sequentially.
   // Any other action with vector cannot be processed between those two
   // push_back's.
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-09-10T18:53:34.597

您可能会查看[线程安全模板库](http://freshmeat.net/projects/tstl/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-01-26T20:06:29.143

我想出了这个（我确信可以改进它以采用两个以上的参数）：

```
template<class T1, class T2>
class combine : public T1, public T2
{
public:

    /// We always need a virtual destructor.
    virtual ~combine() { }
}; 
```

这允许您执行以下操作：

```
// Combine an std::mutex and std::map<std::string, std::string> into
// a single instance.
combine<std::mutex, std::map<std::string, std::string>> lockableMap;

// Lock the map within scope to modify the map in a thread-safe way.
{
    // Lock the map.
    std::lock_guard<std::mutex> locked(lockableMap);

    // Modify the map.
    lockableMap["Person 1"] = "Jack";
    lockableMap["Person 2"] = "Jill";
} 
```

如果您希望使用 std::recursive_mutex 和 std::set，那也可以。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-20T14:30:42.067

这里有一个命题（由我 - 无耻插件）包装对象（包括`STL`容器）以实现高效（零成本）线程安全访问：

[https://github.com/isocpp/CppCoreGuidelines/issues/924](https://github.com/isocpp/CppCoreGuidelines/issues/924)

> 基本思想非常简单。只有几个包装类用于强制读/写锁定，同时呈现包装对象的 const（用于只读）或非 const（用于读写）视图。
> 
> 这个想法是使编译时不可能不正确地访问线程之间共享的资源。

实现代码可以在这里找到：

[https://github.com/galik/GSL/blob/lockable-objects/include/gsl/gsl_lockable](https://github.com/galik/GSL/blob/lockable-objects/include/gsl/gsl_lockable)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-05-04T15:15:49.200

这取决于应用程序来实现。“线程安全”映射将使对映射的单独调用成为线程安全的，但许多操作需要**在**调用之间实现线程安全。使用映射的应用程序应将互斥锁与映射关联，并使用该互斥锁来协调对其的访问。

尝试制作线程安全的容器在 Java 中是一个错误，在 C++ 中也是一个错误。

# wpf - WPF：自定义控件与用户控件

> ID：820545
> 
> 赞同：3
> 
> 时间：2009-05-04T15:17:57.337
> 
> 标签：wpf, user-controls, custom-controls

在 WPF 中，CustomControls 和 UserControls 有什么区别？我应该什么时候使用每个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-04T15:21:25.940

用户控件（组合）：

*   将多个现有控件组合成一个可重用的“组”
*   由 XAML 和代码隐藏文件组成
*   无法样式化/模板化
*   派生自 UserControl

* * *

CustomControl（扩展现有控件）

*   使用附加功能扩展现有控件
*   由代码文件和 Themes/Generic.xaml 中的默认样式组成
*   可以样式化/模板化
*   构建控件库的最佳方法

* * *

资料来源：[CustomControls 和 UserControls 的区别](http://www.wpftutorial.net/CustomVsUserControl.html)

# wpf - 您在复杂、分离的 WPF 应用程序上使用 Expression Blend 的策略是什么？

> ID：820547
> 
> 赞同：9
> 
> 时间：2009-05-04T15:18:13.717
> 
> 标签：wpf, mvvm, expression-blend

我一直在使用 Visual Studio 使用 MVVM 模式进行 WPF 应用程序，主要是手动编写 C# 和 XAML。

现在我已经掌握了 Expression Blend 的速度，因此我可以仅使用 GUI 快速单击 WPF 应用程序，这非常好，与 80% 的时间摆弄所有 XAML 元素相比，对布局的控制要多得多。

但似乎我在 Expression Blend 中的应用程序更简单并且必然耦合，使用在后面的代码中处理的事件等。

我很难想象我将如何从这种更简单的 Expression Blend 方法转变为具有视图、ViewModel、路由事件和命令等的解耦 MVVM 应用程序，而不是将我的整个项目放入 Visual Studio 并将其重新排列到指出我无法在 Blend 中真正对其进行可视化编辑，但会回到使用 Blend 来创建我粘贴到 Visual Studio 中的 XAML 小片段。

**对于那些正在使用 Expression Blend 处理更复杂的应用程序的人，您有哪些策略可以使您的项目以 MVVM 方式解耦，同时以“Expression Blend 方式”构建（您仍然可以在其中查看和编辑您的应用程序的整个部分以视觉上有意义的方式），以便您可以在 Blend GUI 中继续编辑它们，因为它们可以缩放？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-04T15:25:43.590

我一直首先使用 Blend 作为快速原型制作工具。为此，我真的很喜欢它。特别是，当我不确定如何设置以获得我想要的布局/行为时，我发现它非常有用。

我很少直接在 Blend 中编辑我的主要项目文件。我发现它创建了不必要的复杂或冗长的标记。此外，随着我​​越来越熟悉 WPF/XAML，我发现自己越来越少使用 Blend。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-10T17:59:54.080

从版本 1 开始，我一直在项目的 UI 中使用 Blend。因为我的目标是将设计器完全集成到项目中，所以我已经克服了任何阻碍实现这一目标的方法。虽然已经有一段时间不了解 MVVM，但我自然得出了相同的结论，并且一直在制作 ViewModel，但并不知道它们有什么模式。现在在其他致力于 MVVM 的人的帮助下，它一直在变得更好。我现在已经开发了 3 个具有丰富 UI 和功能的应用程序，其中所有 UI 都是在 Blend 中完成的。阅读 Josh Smith 的 MSDN 文章，查看 Jason Dolinger 的工作，以及 Karl Shifflett 的工作，仅举几例。

仔细查看使用 ICommand、INotifyPropertyChanged、ObservableCollections。

另外，寻找如何从 ViewModel 操作控件。例如，有 ICollectionView。假设您有一个动物列表，并且您有一组要过滤它们的类型（鸟类、哺乳动物等）

通过使用 ICommand 和 ICollectionView，您可以公开足够的控件，设计人员可以在其中构造一个列表框来显示动物，以及一个菜单来显示过滤器列表。ICollectionView 中有足够的功能可以知道当前的选择是什么，如果你有基于 ICommand 的“SortByBird”、“SortByMammal”等命令，那么当设计师制作菜单时，它（假设窗口的上下文是你的 ViewModel此窗口）将为设计人员提供适当的绑定选项。

我目前正在与我公司的另一个团队合作，解释我的项目是如何设置的，他们对使用 Blend 的设计师的新角色做出了积极回应。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-04T15:56:56.090

为此，我一直无法成功地端到端使用 Blend。

我发现在一般情况下，在 VS 中手动编辑 xaml 会更快（例外情况包括使用非标准画笔的任何东西）。Blend 非常适合点击，而且完成它并不是很快。

Blend 真正有用的另一个领域是从现有控件创建样式/模板。

除此之外，我还没有卖掉。当使用代码实例化的数据上下文时，它的功能会下降，所以它在那里没有帮助，而且它往往会生成无用的标记、静态大小等，我真的不喜欢这些。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-04T16:01:08.933

Blend 非常适合让您了解如何完成工作，但它制作的 xaml 非常糟糕且紧密耦合。当您更好地了解 xaml 方面时，您会发现仅编写 xaml 比使用 Blend 快得多。直到达到这一点，您可以在 Blend 中进行更改，但是您应该重构它创建的 xaml 以使其不那么紧密地耦合并去除无关的 UI 元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-01-05T16:10:20.867

我参加这个聚会有点晚了，但希望有人仍然可以回应。我还没有找到一个搜索结果，它概述了在设计师和程序员之间划清界限的过程。它的第一部分是 MVVM，因此 GUI 和底层“业务逻辑”之间没有任何耦合，我现在正在努力学习。我还没有看到任何人写过的另一部分是，你实际上如何在 Blend 中设计一个项目，以便开发人员基本上可以给你一个 GUI DLL，然后你的应用程序的 GUI 神奇地改变了？

这就是我要找的东西——开发人员照常编写代码，还编写了一个非常基本的 GUI 来证明一切都按预期工作。与此同时，设计师正在创建他很酷的小 GUI，它具有人们所期待的所有可用性功能。现在，开发人员可以使用他的 GUI 运行他的应用程序，但也可以即时切换到设计人员的 GUI。

我想如果不能即时完成，这是否意味着在理想情况下，开发人员会让他的 VS 解决方案包含 Blend 解决方案中的 XAML？然后在 App.xaml 中只是引用不同的启动文件？

# visual-studio - 上下文相关帮助在 VS 2008 中不起作用

> ID：820548
> 
> 赞同：0
> 
> 时间：2009-05-04T15:18:25.620
> 
> 标签：visual-studio, visual-studio-2008, msdn

这似乎是一个小问题，但这种情况开始变得烦人：

当我在 VS 2008 中工作并且想要获得上下文相关的帮助时，我会突出显示我想要帮助的术语/关键字/窗口，然后按 F1。它打开了 MSDN 帮助窗口，但它总是在开始时给我一个“找不到页面”/断开的链接，我必须去搜索页面并搜索我正在寻找的术语，这很烦人对于初学者来说，有时这个术语是模棱两可的，在我得到正确的帮助页面之前，我必须搜索几十个不同的选项。

其他人有这个问题，或者知道如何解决它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-05T15:20:15.110

您是否尝试过弄乱您的环境帮助在线选项？您可能想尝试：“先在线尝试，然后本地尝试”或“仅尝试本地，而不是在线”。我没有这个问题，所以我无法验证这是一个解决方案，但你可能想尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T10:51:53.840

## 解决方案（有点......）

我切换到使用“集成帮助查看器”而不是“外部帮助查看器”，现在它可以工作了。我仍然不知道为什么外部查看器不起作用，我会感谢任何可以帮助我正确设置外部查看器的人......

# asp.net - WAP 与 XHTML-MP

> ID：820550
> 
> 赞同：0
> 
> 时间：2009-05-04T15:19:04.417
> 
> 标签：asp.net, wap, xhtml-mp

去年我们使用 WAP 和 ASP.NET 为服务器端开发了 Intranet 网站，该网站已经投入生产并被认为是成功的。我们使用内置 Openwave 版本 6 的低端手机。

现在我们使用 XHTML-MP 更新应用程序，因为我们认为这将是未来将支持的移动应用程序技术。但是性能非常差。我们在同一时间和同一模块上测试了这两个应用程序，新应用程序比旧应用程序长 10 秒（平均）。我们消除了重定向等几种可能性，并且我们已经压缩了页面（两个应用程序都是 2 kb 大小）。在测试过程中，我们遇到了 XHTML-MP 应用程序经常出现网络错误，例如“无法解析主机名”和“请求超时”，但在使用同一设备和浏览器的 WAP 应用程序上却没有。应用程序使用相同的代理。我们使用直接访问和使用代理（WAP 网关）进行了测试。

我们在我们的应用程序中放置了记录器，用于跟踪应用程序在服务器时间内执行了多长时间，并且不到一秒。

我们已经为此投入了大量时间和金钱，但我们无法弄清楚问题的原因。

这是否意味着在 Openwave 浏览器上渲染 XHTML-MP 比渲染 WAP 更长？为什么我在 Internet 上没有看到任何提到此的文件？是否建议使用 XHTML-MP 开发新的网络移动设备？

任何帮助和建议都非常感谢。

ucin

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-15T02:24:13.817

请问你在做多少css格式？建议您不要广泛使用 css 来格式化页面，因为许多手机没有足够的能力来处理它（至少几年前是这样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-01-31T14:42:46.347

这显然是特定于设备（或设备范围）的，您能告诉我们哪些设备难以格式化 xhtml 吗？

如果是这样，是不是不能向这些老的麻烦设备展示WML？例如，您可以查看他们的代理字符串来检测输出它们的标记。

# c# - 使用 SUM 和 ORDER BY 进行 Linq 查询

> ID：820552
> 
> 赞同：14
> 
> 时间：2009-05-04T15:19:26.210
> 
> 标签：c#, linq, sum, sql-order-by

我有一个名为 Hit 的 (C#) 类，它有一个 ItemID (int) 和一个 Score (int) 属性。我跳过其余的细节以保持简短。现在在我的代码中，我有一个巨大的列表，我需要在该列表上执行以下选择（进入一个新列表）：我需要为每个单独的 Hit.ItemID 获取所有 Hit.Score 的总和，按分数排序。所以如果我在原始列表中有以下项目

```
ItemID=3, Score=5
ItemID=1, Score=5
ItemID=2, Score=5
ItemID=3, Score=1
ItemID=1, Score=8
ItemID=2, Score=10 
```

结果列表应包含以下内容：

```
ItemID=2, Score=15
ItemID=1, Score=13
ItemID=3, Score=6 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-04T15:26:47.130

```
var q = (from h in hits
    group h by new { h.ItemID } into hh
    select new {
        hh.Key.ItemID,
        Score = hh.Sum(s => s.Score)
    }).OrderByDescending(i => i.Score); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-04T15:33:36.100

```
IEnumerable<Hit> result = hits.
   GroupBy(hit => hit.ItemID).
   Select(group => new Hit 
                   {
                      ItemID = group.Key,
                      Score = group.Sum(hit => hit.Score)
                   }).
   OrderByDescending(hit => hit.Score); 
```

# c# - 需要帮助将 C# 转换为 vb。“数组初始值设定项缺少 1 个元素”

> ID：820553
> 
> 赞同：1
> 
> 时间：2009-05-04T15:19:39.067
> 
> 标签：c#, vb.net, typeof, gettype

我正在尝试使用 3.5 框架将以下代码从 C# 转换为 Vb。

这是我遇到问题的 C# 代码。

```
MethodInfo mi = typeof(Page).GetMethod("LoadControl", new Type[2] { typeof(Type), typeof(object[]) }); 
```

我以为在VB中会是这样；

```
Dim mi As MethodInfo = GetType(Page).GetMethod("LoadControl", New Type(2) {GetType(Type), GetType(Object())}) 
```

但我收到以下错误“数组初始化程序缺少 1 个元素”

我遇到问题并遇到相同错误的另一行是

```
control = (Control) mi.Invoke(this.Page, new object[2] { ucType, null }); 
```

我在vb中尝试过，但它不起作用。

```
control = DirectCast(mi.Invoke(Me.Page, New Object(2) {ucType, Nothing}), Control) 
```

ucType 定义如下

```
Dim ucType As Type = Type.[GetType](typeName(1), True, True) 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-04T15:26:18.910

VB.Net 数组是从 0 开始的，但使用最高索引而不是项目数声明。因此，索引为 0..9 的 10 项数组被声明为 Item(9)。

话虽如此，解决问题的真正方法是让编译器计算出数组长度，如下所示：

```
Dim mi As MethodInfo = GetType(Page).GetMethod("LoadControl", New Type() {GetType(Type), GetType(Object())}) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-04T15:28:02.570

在 VB.NET 中，数组声明采用数组的**上限**，而不是像 C# 那样的长度（如果你问我，有点傻）。因此，您需要将传递给数组声明的数量减少 1（因为数组是从零开始的）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-04T15:25:58.643

对于第一行，您需要将 new Type(2) 更改为 New Type(1)。

```
Dim mi As MethodInfo = GetType(Page).GetMethod("LoadControl", New Type(1) {GetType(Type), GetType(Object())}) 
```

在 VB.Net 中，数组初始值设定项中指定的数字是最高可访问索引与长度的关系。您提到的第二行具有相同的问题和解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-04T15:36:01.117

VB 使用上限作为数组的参数。

```
new byte[X]

new byte(X) 'wrong, 1 more element
new byte(X-1) 'correct, kinda confusing
new byte(0 to X-1) 'correct, less confusing 
```

我建议使用 (0 to X-1) 样式，因为它更清晰。在 vb6 的日子里，当 array(X) 根据上下文可能意味着 0 到 X 或 1 到 X 时，这一点要重要得多。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-04T15:25:51.623

会是这样——

```
Dim mi As MethodInfo = GetType(Page).GetMethod("LoadControl", New Type(1) {GetType(Type), GetType(Object())}) 
```

另一个将是——

```
control = DirectCast(mi.Invoke(Me.Page, New Object(1) {ucType, Nothing}), Control) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-04T16:20:49.853

[http://converter.telerik.com](http://converter.telerik.com)上有一个在线版本，可以将 C# 转换为 VB，反之亦然。

# nhibernate - 加入流利的nhibernate

> ID：820555
> 
> 赞同：0
> 
> 时间：2009-05-04T15:19:57.503
> 
> 标签：nhibernate

我正在使用流利的nhibernate。

例子：

我有 3 张桌子，即

客户 CustomerId pk CustomerName

产品 ProductId pk 产品名称

Cust_Product cust_prodId pk ProductId fk CustomerId fk

现在，我想显示客户名称、产品名称

那么，我该如何编写相同的映射类。

我想用

session.CreateCriteria(typeof("className")).List() 像这样。我该怎么做呢..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-04T15:34:51.090

如果您正在寻找有关如何执行此操作的完整教程，我推荐[FNH wiki](http://wiki.fluentnhibernate.org/show/StandardMapping)或可通过 Google 找到的众多博客文章之一。

但是，您在这里尝试实现多对多关系，这似乎让很多人望而却步。这是一个粗略的指南：

在您的 Customer 类上，您将需要一个集合，例如：

```
IList<Product> Products { get; private set; } 
```

同样，在您的 Product 类上：

```
IList<Customers> Customers { get; private set; } 
```

您使用以下功能开始一个多对多映射`HasManyToMany`：

```
public class CustomerMap : ClassMap<Customer>
{
    public CustomerMap()
    {
        // other mappings

        HasManyToMany<Product>(x => x.Products)
            .WithTableName("Cust_Product")  // Specifies the join table name
            .WithParentKeyColumn("CustomerId") // Specifies the key joining back to this table (defaults to [class]_id, Customer_id in this case)
            .WithChildKeyColumn("ProductId")
            .FetchType.Join(); // Instructs NHibernate to use a join instead of sequential select
    }
} 
```

然后对关系的另一端（Product 类的 Customers 属性）重复该过程。

# iphone - 网上有没有好的 UIScrollView 教程？

> ID：820557
> 
> 赞同：28
> 
> 时间：2009-05-04T15:20:26.507
> 
> 标签：iphone, uikit, uiscrollview

任何好的链接都非常感谢！这转到社区维基。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2009-05-04T16:12:14.947

一些包含基本功能的好示例

*   [非常简单的 uiscrollview 演示](http://halmueller.wordpress.com/2008/10/08/a-very-simple-uiscrollview-demo/)
*   [滚动](http://developer.apple.com/iphone/library/samplecode/Scrolling/index.html)
*   [UiScrollView 教程](http://www.vimeo.com/1642150)
*   [在 iphone 上实现点击放大 uiscrollview](http://jonathanwatmough.com/2008/12/implementing-tap-to-zoom-in-uiscrollview-on-an-iphone/)
*   [uiscrollview 中的多个虚拟页面](http://cocoawithlove.com/2009/01/multiple-virtual-pages-in-uiscrollview.html)

更何况：

*   [堆栈溢出 UIScrollView](https://stackoverflow.com/search?q=UIScrollView)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-03-10T18:54:51.890

这是一个新的： [http ://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content#more-10518](http://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content#more-10518)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-04-26T13:36:36.577

这是我的博客，但它可能对初学者有用 以 [编程方式创建 UIScrollview 的教程](http://unconditionalloop.blogspot.com/2011/04/uiscrollview-programmatically.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-07T22:44:00.237

我关于两种高级 UIScrollView 技术的文章（+ 示例代码）：[github.com/andreyvit/ScrollingMadness/](http://github.com/andreyvit/ScrollingMadness/)：

1.  模拟照片库风格的分页+缩放+滚动。
2.  以编程方式缩放 UIScrollView。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-28T23:22:52.540

我发现本教程非常适合我的情况。我不需要任何缩放效果。我想要一个包含子视图的大型内容。

[uiscrollview-示例](http://agilewarrior.wordpress.com/2012/05/18/uiscrollview-examples/)

# .net - 列表 全有或全无

> ID：820560
> 
> 赞同：2
> 
> 时间：2009-05-04T15:22:05.317
> 
> 标签：.net, wcf, web-services, design-patterns

我正在使用 Windows Communication Foundation (WCF) 创建一个 Web 服务，但我目前不知道使用它进行验证的最佳方法是什么。

我有两种方法： `CreateCustomer(Customer)`和`CreateCustomers(List<Customer>)`.

如果一个客户传入了一个客户列表，而其中一些客户是无效的，我应该拒绝整个请求吗？或者我应该返回通过验证的那些并标记那些无效的？

`CreateCustomer(Customer)`或者，如果他们想创建多个客户，我应该只允许他们调用该方法并让他们重复调用它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T15:25:19.410

在这种情况下，我会推荐一种类似事务的方法。

基本上，您将使用标识符或实际对象验证所有未通过、抛出异常或其他验证失败事件的客户。这将允许管道另一端的人员识别问题。

为了保存到数据库，我也会考虑在事务中执行此操作，部分保存 1-7 个客户，但不是第 8 个可能会导致问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T15:32:14.417

由于您正在开发 Web 服务，因此您可能希望减少往返次数。话虽这么说，摆脱 CreateCustomers(list) 是个坏主意。

现在是困难的部分。我建议你把它留给客户他们希望如何处理错误。您可以更改 CreateCustomers 方法的签名，以包含一个布尔值，说明他们是想要全部还是什么都不想要。像这样的东西：CreateCustomers(list, allOrNothing)。此操作的返回类型应该是具有客户属性的对象列表和是否成功的布尔值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T15:24:59.957

如果您在每次调用中做尽可能多的工作，您将减少来回流量，因此接受列表并仅针对有问题的情况（同时处理其他情况）返回错误似乎很好。当然，例外情况是需要原子的工作（全有或全无），但就应用程序语义而言，这里似乎并非如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T15:49:08.900

由提供商为您提供符合您的 Web 服务合同的数据。如果不是这样，你就是在帮他们告诉他们哪些数据是坏的（至少，与我最近开发的所有 API 相比）。

在这种情况下，接受有效客户和无效客户甚至会使事情更加混乱：

我做了一个清单 custs...; 大小为 100 并调用您的 CreateCustomers(custs)。20 是不好的，但你提供了为什么的信息。原来我的数据录入员错字很多。问题解决了，我重试了 CreateCustomers(custs)，但我得到一个错误，其中 80 个已经存在。您是否仍然创建了 20 个已修复的（因为，上次我传递数据时您这样做了）？

让所有事务都是原子的一个主要好处是，如果某些事情不起作用，那么您肯定知道在操作失败后状态没有改变。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-07T18:25:00.030

在您描述的场景中，它归结为您希望如何管理 WCF 中的错误（故障合同）。

所有方法都需要您创建一个故障合同，该合同可以简单地说明一个或多个客户请求中存在错误。

如果您不采用这种方法，那么您可能希望设计您的数据合同/故障合同以处理每个可能的错误并针对列表中的每个错误区分它们。您还需要确保在回程中优雅地处理重复条目。

# objective-c - 如何在 Mac 和 iPhone 之间同步 Core-Data 应用程序？

> ID：820563
> 
> 赞同：1
> 
> 时间：2009-05-04T15:22:52.427
> 
> 标签：objective-c, cocoa, cocoa-touch, core-data

只是想知道我需要什么代码来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T15:44:56.540

iPhone 上不存在 Core Data，因此您至少需要为 iPhone 部分使用其他东西。事实上，如果您想在 iPhone 和 Mac 应用程序之间共享大量代码，您可能希望完全避免使用 Core Data。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T15:55:36.903

iPhone（还）没有 CoreData，因此无法在 iPhone 和 Mac 应用程序中使用相同的代码。您可以围绕 sqlite 编写自己的包装器，该包装器将在两者上运行。Omni 小组有一个[开源版本](http://www.omnigroup.com/developer/)（根据[修改后的 MIT 许可证](http://www.omnigroup.com/developer/sourcelicense/)），这可能是一个很好的起点。

此外，没有内置的方法来同步数据，因此您也必须想出一种方法来做到这一点。许多应用程序在手机/mac 上运行服务器并通过该服务器进行同步。它通常要求您的手机连接到与 mac 相同的 wifi 网络。

# php - php pdo ¿我做错了什么？

> ID：820566
> 
> 赞同：1
> 
> 时间：2009-05-04T15:24:16.997
> 
> 标签：php, pdo, xampp

我正在学习 php pdo；我的环境是：NetBeans 6.5.1，XAMPP 1.7.0，我有这段代码，它似乎可以连接。

*   如果我将 dbname 更改为不存在的，则会引发异常“db not exists”
*   如果我更改用户，它会引发“登录不正确”）

但是当我调用 $cn->query 时，它会引发：

> apache.exe 中出现未处理的 Win32 异常

我究竟做错了什么？

```
$hostname = 'localhost';
$username = 'crb';
$password = 'letmein';
try {
    $cn = new PDO("mysql:host=$hostname;dbname=bitacora", $username, $password);
    echo 'Connected to database<br />';
    $sql = "SELECT * FROM usuario WHERE login = '".$login."' AND clave = '".$clave."'";
    // Error here
    foreach ($cn->query($sql) as $row) {
        print $row['login'] .' - '. $row['clave'] . '<br />';
    }
} catch (PDOException $e) {
    echo $e->getMessage();
} catch (Exception $e) {
    echo $e->getMessage();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-04T15:46:05.633

这是 XAMPP 1.7.0 中的一个错误。升级到[1.7.1](http://www.apachefriends.org/en/xampp-windows.html)或按照[这些说明](http://www.apachefriends.org/f/viewtopic.php?f=16&t=32617)修复 1.7.0 安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T15:36:41.707

$cn 有效吗？检查返回值。到目前为止，您所描述的内容并不能使我相信您已建立联系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T15:46:49.327

如果您还没有，我会确保您的环境正常工作。

1.  检查以确保用户使用 MySQL 本身（使用类似 mysqlquery 的东西）。
2.  检查以确保 php 可以连接到 MySQL。我在所有新设置上安装 phpmyadmin（即使我没有将其留在原处）以确保我有良好的工作连接。
3.  通过错误异常处理 PDO（请参阅[http://us2.php.net/manual/en/pdo.error-handling.php](http://us2.php.net/manual/en/pdo.error-handling.php)）以立即查看错误发生的位置。

我的猜测是您从未连接到 MySQL，这可以解释无法更改数据库的原因。

# asp.net - 如何使 webtest 接受文件下载？

> ID：820567
> 
> 赞同：1
> 
> 时间：2009-05-04T15:24:55.760
> 
> 标签：asp.net, mstest, webtest

我正在使用 Visual Studio Team Foundation Server 2008 Team Suite 为网站创建 Web 测试。在某些页面上，响应是文件下载（通常是 PDF），我只需要测试响应是否返回正确的状态代码和内容类型，忽略正文。当我在 Visual Studio 中运行 webtest，或者使用 MSTest 运行编译测试并加载结果时，这些请求失败，导致整个 webtest 失败。

测试结果的 Web 浏览器选项卡包含以下文本：

```
请求失败：无法从传输连接读取数据：连接已关闭。
```

详细信息选项卡包含异常：

```
System.IO.IOException：无法从传输连接读取数据：连接已关闭。
   在 System.Net.ConnectStream.EndRead（IAsyncResult asyncResult）
   在 Microsoft.VisualStudio.TestTools.WebStress.DataCaptureStream.EndRead(IAsyncResult asyncResult)
   在 Microsoft.VisualStudio.TestTools.WebStress.WebTestTransaction.ReadResponse（IAsyncResult 结果）
```

Response 选项卡显示一个成功的响应，标头包括“HTTP/1.1 200 OK”和“Content-Type : application/pdf”，以及正文中的 PDF 内容。

我怎样才能让 webtest 接受这些请求的 PDF 或其他类型的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T12:47:14.707

Visual Studio Team System 2008 SP1 中存在显示此类症状的错误。尝试为它安装热修复。更多详细信息：http: [//kbalertz.com/972678/successfully-recorded-Visual-Studio-System-authentication-redirected-logon.aspx](http://kbalertz.com/972678/successfully-recorded-Visual-Studio-System-authentication-redirected-logon.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T15:27:36.487

老实说，这听起来像是浏览器问题，请使用 type/unknown 强制在客户端上另存为，而不是客户端的默认浏览器尝试显示它。

# c++ - 是否有实现 C++ 类获取/设置成员函数的 Perl 脚本？

> ID：820569
> 
> 赞同：3
> 
> 时间：2009-05-04T15:25:00.817
> 
> 标签：c++, perl, code-generation

今天早上我正在阅读[The Pragmatic Programmer](http://www.pragprog.com/the-pragmatic-programmer) Chapter 3 关于每个程序员都应该拥有的基本工具的书，他们提到了代码生成工具。他们提到了一个用于 C++ 程序的 Perl 脚本，该脚本有助于自动化实现私有数据成员的 get/set() 成员函数的过程。

有谁知道这样的脚本以及在哪里可以找到它？我一直无法想出正确的谷歌关键字来找到它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-04T16:40:46.640

虽然它没有直接回答您的问题，但您可能会发现生成的代码实际上对于管理 C++ 中的属性是不必要的。以下模板代码将允许您方便地声明和使用属性：

```
// Declare your class containing a few properties
class my_class {
public:
    property<int> x;
    property<string> y;
    ...
};

...

my_class obj;
cout << obj.x();          // Get
obj.y("Hello, world!");   // Set 
```

这是代码：

```
// Utility template to choose the 2nd type if the 1st is void
template <typename T, typename U>
struct replace_void {
    typedef T type;
};

template <typename T>
struct replace_void<void, T> {
    typedef T type;
};

// Getter/setter template
template <typename T, typename D = void>
class property {
    typedef typename replace_void<D, property>::type derived_type;

    derived_type& derived() { return static_cast<derived_type&>(*this); }

public:
    property() {}   // May be safer to omit the default ctor
    explicit property(T const& v) : _v(v) {}
    property(property const& p) : _v(p._v) {}
    property& operator=(property const& p) { _v = p._v; return *this; }

    T operator()() const { return _v; }                 // Getter
    void operator()(T const& v) { derived().check(v); _v = v; }   // Setter

protected:
    // Default no-op check (derive to override)
    void check(T const& v) const { (void)v; //avoid unused variable warning}

private:
    T _v;
}; 
```

`check()`是一个测试分配的值是否有效的函数。您可以在子类中覆盖它：

```
class nonnegative_int : public property<int, nonnegative_int> {
public:
    // Have to redeclare all relevant ctors unfortunately :(
    nonnegative_int(int v) : property<int, nonnegative_int>(v) {}

    void check(int const& v) const {
        if (v < 0) {
            throw "Yikes! A negative integer!";
        }
    }
}; 
```

有了它 - 外部生成的 getter/setter 函数的所有优点，没有任何混乱！:)

您可以选择`check()`返回`bool`指示有效性而不是抛出异常。原则上，您可以添加一个类似的方法 ,`access()`来捕获对该属性的读取引用。

**编辑：**正如 Fooz 先生在评论中指出的那样，类作者稍后可以在不修改类的逻辑结构的情况下更改实现（例如，通过用`property<int> x`一对`x()`方法替换成员），尽管二进制兼容性丢失了，所以用户需要每当进行此类更改时，重新编译他们的客户端代码。 *这种轻松整合未来变化的能力实际上是人们首先使用 getter/setter 函数而不是公共成员的主要原因。*

**性能说明：**因为我们使用[CRTP](http://en.wikipedia.org/wiki/Curiously_Recurring_Template_Pattern)来实现“编译时多态性”，所以在子类中提供您自己的虚拟调用没有开销`check()`，您无需声明它`virtual`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-04T15:29:23.520

由于大多数 C++ 私有成员不应通过 Get/Set 样式函数访问，这似乎是个坏主意。

关于为什么会这样的简单示例，请考虑 C++ std::string 类。它的私有成员可能看起来像这样（确切的实现并不重要）：

```
private:
   int last, len;
   char * data; 
```

您认为为这些提供 get/set 成员是否有意义？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-04T23:49:40.523

您想要一个脚本为您的*所有*私人成员不加选择地生成 get/set 函数吗？那不是一个非常有用的脚本；您可能不会在 Google 中找到它。如果您希望能够以某种方式标记您的成员变量并自动为您生成 getter 和/或 setter 骨架，那么 IDE 宏似乎更合适。试试谷歌。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-04T23:25:55.963

我知道一位程序员在宏（[该项目的最新版本）方面](http://www.sidhe.org/~dan/blog/archives/000462.html)[使用 Perl 来增强 C 预处理器](http://www.sidhe.org/~dan/blog/archives/000457.html)。基本思想是您将决定一些约定来告诉您的 Perl 脚本何时生成 getter 或 setter：

```
struct My_struct {
    //set
    //get
    int x;

    int y;

    //get
    int z;
}; 
```

给定这样的代码，我可以编写一个脚本来查找由成员变量声明之前的行上的注释“get”或“set”组成的注释行，然后用简单的 setter/getter 替换它们。在上面的示例中，我将在关联的成员变量定义**之后**生成 void set_x(int i)、int get_x() 和 int get_z() 。

一句警告：不要使用 s/// 就地执行此操作。相反，单独扫描每一行，如果你找到合适的注释行，将“我需要一个 getter/setter”的内容推送到堆栈上，然后当你看到相关的成员变量时，将内容从堆栈中弹出并生成代码.

细节中有一些魔鬼，但总的来说就是这样。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-04T16:14:50.493

我无法帮助您了解该特定脚本的位置。但是，有[相当多](http://www.codegeneration.net/generators.php "代码生成器列表")的代码生成工具。您甚至可能已经拥有您正在寻找的 IDE 的一部分。有关如何、为什么以及是否使用代码生成工具的更多辩论/意见，您可以查看[这个 stackoverflow 问题](https://stackoverflow.com/questions/143855/do-you-use-code-generation-tools)。我喜欢这个问题的公认答案。

# iphone - 你将如何在你的 iPhone 应用程序中实现一个可滚动的网格？

> ID：820570
> 
> 赞同：2
> 
> 时间：2009-05-04T15:25:03.890
> 
> 标签：iphone, uikit, view, uiscrollview

我有大约 50 张 50 x 50 像素大小的图像。我希望用户选择其中之一。所以首先我想到了一个 UITableView，但这不是正确的事情。它浪费了大量的屏幕空间。与其将所有图像放在一个下方，不如显示一个网格，比如说 6 列和 n 行。

我会使用 UIScrollView 并用我自动排列的 UIView 对象填充它，使它们看起来像一个网格。这是要走的路吗？或者有什么其他建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T21:29:08.087

我在我的应用程序中做了一些非常相似的事情——一个 NxN 网格，下面有一个图像，另一个子视图在上面绘制“线条”，所有这些都归 UIScrollView 所有。我建议使用单独的视图来绘制图像，例如：

```
-(void) drawRect(CGRect rect) {
    CGRect smallerRect = CGRectMake(x, y, width, height);
    [yourImage drawRect: smallerRect];
    // repeat as needed to draw the grid
 } 
```

另一张海报提到，如果您的视图归 UIScrollView 所有，您将无法获得触摸事件——这根本不是真的。我有它的工作。您可能需要设置以下内容：

```
[yourScrollView setUserInteractionEnabled: YES]
[yourGridView setUserInteractionEnabled: YES] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T21:13:04.350

正如您所建议的，表格视图并不一定意味着每行显示一个图像。可以自定义表格单元格，并且具有六个 50x50 UIImageViews 的单元格子类将非常简单。它可能不如滚动视图灵活，但如果每行六张图像是您的目标，那么表格视图是获得它的最快方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T16:30:40.190

three20[库](http://github.com/joehewitt/three20/tree/master)有一个类可以做到这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-04-28T18:51:10.167

three20 太可怕了，我用过，我不推荐它...显示网格很容易...

```
 - (void) reloadGridView
    {

        scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(5, 54, scrollViewWidth, scrollViewHeight8)];
        scrollView.delegate = self;
        scrollView.showsVerticalScrollIndicator = NO;
        scrollView.showsVerticalScrollIndicator = NO;
        scrollView.userInteractionEnabled = YES;
        scrollView.scrollEnabled = YES;

        [self.view addSubview:scrollView];

        int x = 10;
        int y = 10;

        divisor = 1;

        for (int i = 0; i < [self.photosArray count]; i++) {

            int buttonTag = divisor;

            UIImage *thumb = [UIImage imageWithContentsOfFile:[self thumbPathAtIndex:i]];
            //********* CREATE A BUTTON HERE **********
            //********* use the thumb as its backgroundImage *******

            if(divisor%4==0){
                y+=70; 
                x = 10;

            }else{
               x += 70;
            }

            divisor++;
        }
        [scrollView setContentSize:CGSizeMake(scrollViewWidth, ([self.photosArray count]%4 == 0) ? y : y+100)];

} 
```

如果您在横向时想要 6 张图像 - 为 isLandscape 设置一个 BOOL

```
if (isLandscape) {
    //change the divisor to change @ 6 instead of 4
} 
```

如果您需要更高级的 gridView，请查看 AQGridView（谷歌）

# c# - 对 SharePoint 对象（Web 部件）使用 Disposable

> ID：820577
> 
> 赞同：2
> 
> 时间：2009-05-04T15:26:06.740
> 
> 标签：c#, sharepoint

在 SharePoint 中编写 Web 部件时，您是否通过`using`子句实现 IDisposable？或者，您是否将您的物品丢弃在`try/catch/finally`? 两个都？要看？你为什么选择一个而不是另一个？

背景：

我正在研究一些没有实现 IDisposable 的继承代码，所以我一直在阅读以纠正问题。MSDN 有一篇很好的文章，涵盖了“最佳实践”：

[http://msdn.microsoft.com/en-us/library/aa973248.aspx](http://msdn.microsoft.com/en-us/library/aa973248.aspx)

那建议`using`，但接着说在许多情况下不建议使用`using`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-04T16:02:15.390

我可以理解文章中的模棱两可-真正的答案像泥巴一样清楚:)

当涉及到 Web 部件开发（或通常使用 SharePoint API 开发）时，如果您没有正确实例化您的对象，那么处置某些对象（特别是 SPOM 对象）将产生不可预知的结果。

特别是，如果您从当前上下文中获得对 SPSite 或 SPWeb 的对象引用并尝试处理它（使用 using 子句或 try/finally），您将从 SharePoint 堆栈中获得对象引用错误。

处理您的 SP 对象（SPSite、SPWeb 等）的正确方法是使用 URL 从站点实例化一个新的 SP 对象（而不是使用上下文来获取它）。例如：

```
using (SPSite siteCollection = new SPSite("http://your_site_url"))
{
  using (SPWeb site = siteCollection.OpenWeb("News"))
  {
    //do stuff with your news web
  }
} 
```

下面是一个代码示例，如果您尝试使用它会引发对象引用错误：

```
using(contextSite = SPControl.GetContextSite(Context))
{
  using (SPWeb site = siteCollection.OpenWeb("News"))
  {
    //do stuff with your news web
  }
} 
```

该错误不会在 using 块期间发生，但稍后会在 SharePoint 尝试在网站内部执行某些操作时在下游发生。

在一般用途方面，如果你有一个 IDisposable 对象，我非常喜欢 using() 而不是 try/finally。我选择 try/finally 的唯一一次是如果我需要围绕取消分配非 IDisposable 对象做额外的逻辑。

希望这可以帮助！

# javascript - jquery，防止父元素上的 onclick=window.location

> ID：820583
> 
> 赞同：1
> 
> 时间：2009-05-04T15:27:14.493
> 
> 标签：javascript, jquery, onclick

我有一个包含如下数据的表：

```
<table>
 <tr onclick="window.location='download.php?id=1'">
  <td>Program 1<br/>Short Description 1 (<a onclick="$.popup.show('Install Instructions', 'Instructions pulled from DB here')">Instructions</a>)</td>
  <td>Added by user and date/time here<td>
  <td>Filesize here<td>
  <td><a href="edit.php?id=1">Edit</a> - <a href="delete.php?id=1">Delete</a><td>
 </tr>
 (repeat TRs for more programs pulled from DB)
</table> 
```

我遇到的问题是，当您单击（说明）链接时，它应该会弹出一个带有说明的窗口。它确实做到了，但它也会触发 TR 的 onclick。所以我得到一个弹出窗口，然后它转到download.php。

有什么办法可以阻止它触发 TR 的 onclick 吗？最好使用 jquery，但我也不介意纯 JavaScript 解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T15:43:40.787

基本上，您需要停止[事件的传播](http://www.quirksmode.org/js/events_order.html)，使用 event.cancelBubble（对于 IE）或 event.stopPropagation()（对于其他所有人）。[quirksmode](http://www.quirksmode.org/js/events_order.html#link9)（我之前使用过）给出的解决方案是执行以下操作：

```
<script type="text/javascript">
var instructions = function(e) {
    // Get the correct event in a cross-browser manner, then stop bubbling/propagation.
    if (!e) var e = window.event;
    e.cancelBubble = true;
    if (e.stopPropagation) e.stopPropagation();

    // Do what you want now
    $.popup.show('Install Instructions', 'Instructions pulled from DB here');
}
</script> 
```

然后你的脚本会调用它：

```
<td>Program 1<br/>Short Description 1 (<a onclick="instructions(event)">Instructions</a>)</td> 
```

（当然，你可以把这一切都内联，但那是一团糟。）

您可能还会发现[这个问题](https://stackoverflow.com/questions/387736/how-to-stop-event-propagation-with-inline-onclick-attribute)很有启发性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T15:44:09.803

stopPropogation 是您想要的。

[http://docs.jquery.com/Events/jQuery.Event#event.stopPropagation.28.29](http://docs.jquery.com/Events/jQuery.Event#event.stopPropagation.28.29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T15:50:01.863

你可以写

```
onclick="false" 
```

并使用事件模型级别 2 添加事件（ie 中的attachEvent 或其他浏览器中的 addEventListener）。如果你使用 jquery，你也可以 jquery 绑定（'click'）。

# java - 用于管理文件上传到服务器的 Java 小程序

> ID：820589
> 
> 赞同：1
> 
> 时间：2009-05-04T15:28:16.423
> 
> 标签：java, flash, file-upload

寻找一个符合以下要求的 Java File Upload Applet（甚至是 Flash）：

1.  免费/便宜（是的，希望在商业网络应用程序中使用）
2.  最好允许多个文件选择
3.  能够在目标服务器上创建/编辑文件夹吗？（在安全的根文件夹中）
4.  能够覆盖目标目录中的文件吗？
5.  需要 IE + Firefox 支持... Safari、Chrome 等。
6.  能够“挂钩”到流程中以应用额外的逻辑

笔记：

*   特别是我正在寻找上传到另一台服务器上的目录的能力（例如，不是我的网络服务器或应用程序服务器运行的地方）
*   目标服务器有一个共享驱动器，应用程序的所有用户都有权存储文件。
*   通过“体面的外观”，我真的非常想避免像这样“剥皮”的 UI：（ [来源：][[swtguibuilder.com](http://www.swtguibuilder.com/images/swing_in.png)][）][![替代文字](https://i.stack.imgur.com/V233N.png)](https://i.stack.imgur.com/V233N.png)

*在我因“与编程无关”而被关闭之前，我需要能够连接到这样的小程序以应用一些额外的权限逻辑等。如果其他人制作了组件，我不想重新发明轮子这已经做了我需要的。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T15:43:32.283

这对于 Java 来说相对容易。查看[Apache Commons Fileupload](http://commons.apache.org/fileupload/)以获取服务器端代码。对于前端，有很多[基于flash的文件上传的例子](http://www.flex888.com/296/9-flex-file-upload-examples-visited.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T20:38:22.187

至少有两个要求：

1.  **Applet 文件上传** 器 这些都是可用的，例如：http: [//sourceforge.net/projects/jupload/](http://sourceforge.net/projects/jupload/)
2.  **配置目的地的小部件** 这在我的经验中是不寻常的，但我曾经为一个 Swing 应用程序写过一个，它与一个小程序类似。有必要为用户提供远程文件系统的视图，启用视图操作，然后上传更改。请注意，这里存在交易问题，因此并非微不足道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T18:51:20.850

您的问题的简单答案曾经是 Flash。自 Flash Player 10 发布以来，它就不再存在了。Adobe 添加了对文件上传的限制，仅允许在 UIA - 用户启动的操作范围内上传文件。这意味着文件上传必须通过鼠标单击开始。

有一些内置在 Flash 中的免费文件上传器可用。唯一的问题是队列被 FP10 破坏了。将文件添加到挂起的上传列表是没有问题的。开始上传也没有问题。但是当一个文件上传完成并且下一个应该开始时，如果您不再次单击，Flash Player 将不允许它，这几乎是无用的。

# c# - C# 中的性能跟踪

> ID：820591
> 
> 赞同：1
> 
> 时间：2009-05-04T15:29:22.130
> 
> 标签：c#, performance, logging, mobile, trace

我想跟踪 ac# 移动应用程序中的性能，以便了解一些长时间运行的方法所需的时间。目标是了解方法级别的性能。这种跟踪将在运行时决定。

出现的第一个想法是维护一个全局变量“doWeHaveToTrace”，每次调用可能可跟踪的方法时检查它，如果该变量为真，则跟踪它。在这种情况下，我可能会使用 Logger 或 TraceListener 将跟踪信息写入文件。

但我认为这种机制相当繁重，因为必须在每个方法中检查一个变量，并且必须对记录器调用进行编码。

我也考虑过方面编程（在`before()`和`after()`方法中插入跟踪代码），但我不认为在这个项目中可以允许方面编程。

所以我想知道，有没有其他好的机制可以提供这样的性能跟踪？是否可以跟踪整个方法？并决定在运行时停止或恢复跟踪？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T15:53:44.273

不确定您要跟踪的确切内容，但如果您要跟踪长时间运行的方法之间的时间，也许您最好连接到[.NET Profiling API](http://msdn.microsoft.com/en-us/library/bb384358.aspx)。这里有一个[使用教程。](http://www.blong.com/Conferences/DCon2003/Internals/Profiling.htm)

商业分析器将是另一个更简单的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T15:53:55.567

阅读有关如何在 .NET 中使用[Trace 和 Debug 有条件地编译](http://msdn.microsoft.com/en-us/library/64yxa344.aspx)（假设您使用的是 .NET）。**Trace**和**Debug**类将为您提供开发所需的所有运行时输出。然后，您只需删除 TRACE 编译器指令即可删除已部署应用程序中的所有调试/跟踪代码（以及相关的运行时开销）。

**或者**

您可以使用**外部分析应用程序**进行性能和内存分析。请参阅此处（来自 StackOverflow.com）：[哪些是好的 .NET 分析器？](https://stackoverflow.com/questions/3927/what-are-some-good-net-profilers)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T23:17:24.713

你可以在台式机上，在 IDE 下运行它，然后做通常的事情，比如计时和/或[采样吗？](https://stackoverflow.com/questions/375913/what-can-i-use-to-profile-c-code-in-linux/378024#378024)

您一定会发现需要时间并且可以加快速度的事情。

# design-patterns - 控制反转是否特定于 OO 语言？

> ID：820594
> 
> 赞同：9
> 
> 时间：2009-05-04T15:29:48.697
> 
> 标签：design-patterns, oop, inversion-of-control

问这个问题的另一种方式是：你认为什么是控制反转？

我问这个问题是因为关于[IoC](http://en.wikipedia.org/wiki/Inversion_of_control)的 Wikipedia 文章已被非 OO 解释劫持。这取自[讨论页面](http://en.wikipedia.org/wiki/Talk:Inversion_of_control#Rewrite_--_motivation_and_idea_behind)，来自 2007 年：

> 我冒昧地完全重写了页面，因为以前的内容完全被毫无意义的“面向对象”的胡言乱语所取代......

我看不出控制反转在 OO 语言之外有什么意义。在过程语言中已经有很多关于放弃控制的解释（事件编程就是其中之一），纯函数式语言不需要像控制反转这样的概念，因为它们具有高阶函数。

此外，在Martin Fowler 详细阐述 IoC的[文章中，他专门处理了 OO 示例。](http://martinfowler.com/articles/injection.html)

那么，IoC 是否完全是一个 OO 概念，它到底是什么？

对我来说，IoC 试图在大多数 OO 语言所施加的限制内将函数转换为数据，并尝试将这些函数作为数据作为参数传递给其他函数。这不是 IoC 的唯一部分，但其中有一些。

还有工厂设计模式，对象树在传递之前被构建和配置。

对我来说，IoC 完全是一个 OO 概念。

你的答案是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-04T15:47:36.907

控制反转绝对不是 OO 概念。

IoC 存在并且在非 OO 语言中经常使用。例如，它在 C 语言中很常见。一个典型的例子是 Windows API - 任何时候你调用任何通过回调工作的 Windows API 函数，你基本上都在以最原始的形式使用 IoC。

例如，看一下[EnumWindows](http://msdn.microsoft.com/en-us/library/ms633497.aspx)函数。使用它，您将函数指针 (EnumWindowsProc) 传递给库，并且您的代码从库代码中运行。

将此与 Wikipedia 中对控制反转的定义进行比较：“当库过程调用用户过程时，就会发生控制反转。”

完全一样。

但是，当您添加丰富的类型系统和 OOP 附带的许多其他工具时，IoC 确实变得非常强大、灵活且易于使用。这使它更常见，因为它使用起来“更好”，但它确实存在于 OOP 之前。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-04T16:20:51.460

您从实施的角度看待理论问题。出现的第一个问题应该是**你 Invert 究竟是什么 Control**？

然后你会意识到，它是一个对象、方法、函数还是其他传递的东西并不重要，而是代码的实际作用。

简而言之，当你进行依赖注入时，你颠倒了对依赖（资源）的创建和使用的控制。

当您为 Windows API 函数提供一个指向回调函数的指针时，您就可以让他们控制使用自己的参数调用您的函数。

所以你看，IoC 只是一个理论概念，当然，它可以有不同的实际实现。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-05-04T15:39:55.350

好吧，“控制反转”的概念似乎适用于您可以通过某种方式传递函数指针的任何地方。基本上，具有兼容签名的插件概念和 DLL（例如考虑驱动程序）只不过是 IoC 的一种形式。

但是，当使用具有丰富类型和容器模型的 IoC 时，您基本上会自动进入 OO 世界。OOP 的概念很好地映射到 IoC 概念，特别是在支持纯虚拟类（或“接口”，也称为“接口”）的多重继承的语言中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-04T17:37:44.833

事实上，IoC 的 OO 实现非常精细，因为函数通常不是一等公民。

正如 Azder 所说：使用 IoC 的原因有很多。我会在这里总结一些来说服:)

迭代

```
#ruby
{1,2,3}.each{ |i| puts i }

#haskell
map [1,2,3] ( \i -> write i )

//the stl algorithms
int printint( int i ){ return printf( "%d", i ); }
std::foreach( onetwothree.begin(), onetwothree.end(), &printi ); 
```

线程创建

```
CreateThread( NULL, 0, &myFunction, NULL, 0, NULL ); 
```

通用事件分发

```
//javascript
document.getElementById( "mybutton" )
            .addEventListener( 
                 function(e){ alert("buttonPressed") } ); 
```

这些例子都不是面向对象的，qed。

# c# - .net 在运行时确定我的应用是 exe 还是 Web 应用

> ID：820595
> 
> 赞同：3
> 
> 时间：2009-05-04T15:29:48.713
> 
> 标签：c#, winforms, asp.net-3.5, environment-variables

我确定我过去曾这样做过，但我在文档中已经有一段时间了，似乎无法再次找到它。我需要能够在我的业务域中的运行时确定我的应用程序在哪个上下文中运行。这样我就可以对配置文件进行一些切换，并使用正确的方法来确定我是在调试还是发布等中运行。我非常有信心它在 System.Environment 中，但我还没有遇到它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-04T15:32:21.640

非常简单的方法：

```
bool isWebApp = HttpContext.Current != null; 
```

每次都像魅力一样工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-04T20:19:57.033

我终于找到了我之前做的方式。

```
bool isWebApp = System.Web.HttpRuntime.AppDomainId != null; 
```

不过，这与内森的反应大致相同。谢谢回复。

# .net - 创建用于 Visual Studio 单元测试的模拟对象的“首选”方法是什么？

> ID：820598
> 
> 赞同：4
> 
> 时间：2009-05-04T15:31:26.823
> 
> 标签：.net, visual-studio-2008

我知道 Castle 的 DynamicProxy 和 RhinoMocks，但我想知道，鉴于 Microsoft 已将单元测试作为 Visual Studio 的一流功能引入这一事实，他们是否提供了任何标准化的对象模拟机制来配合它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-04T16:19:25.380

我也认为 Rhino 是要走的路，但在使用了 2 个月后，切换到了 Moq。

如果您使用 .Net 3.5，我强烈推荐 Moq。请[查看这篇文章](https://stackoverflow.com/questions/690769/what-are-the-capabilities-of-moq-and-rhino-mocks)以获取有关您正在考虑的模拟框架的更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-04T15:42:13.987

微软目前没有提供自己的模拟框架，仍然参考第三方工具。

您可以看到这一点，即使您查看他们的官方[SharePoint 指南之](http://msdn.microsoft.com/en-us/library/dd239285.aspx)类的内容，他们说：

“有多种工具支持使用模拟对象进行单元测试。Training Management 应用程序使用 Typemock 提供的名为 Typemock Isolator 的商用测试工具。如果要运行单元测试，则必须安装此工具。”

如果你搜索 MSDN，有很多关于测试框架的文章。最常见的参考似乎是 RhinoMocks、NMock 和 Typemock。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-07-15T16:13:37.603

恕我直言，Rhino Mock 过于复杂，因为随着时间的推移会添加许多额外的功能层。

Moq 与 Rhino Mock 具有大部分相同的功能，但它是从头开始设计的，因此提供了更简洁的 API。Moq 遗漏了一些功能，最重要的是能够断言调用的模拟方法的确切顺序。

不过，我仍然发现自己在使用 Rhino Mock，我想在这一点上这只是一个坏习惯。不过，我确实建议对所有新项目使用起订量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-15T16:04:59.493

如果您要进行单元测试，Typemock [Isolator](http://www.typemock.com/sharepointpage.php)是目前唯一可以模拟 SharePoint 对象的工具。[Moq](http://code.google.com/p/moq/)和[Rhino](http://ayende.com/projects/rhino-mocks.aspx)无法使用内部构造函数创建 SharePoint 对象，因此您需要努力使代码适合它们。

# sql - 在数据库 ORM 中应该将字符串映射到什么？

> ID：820603
> 
> 赞同：1
> 
> 时间：2009-05-04T15:33:25.727
> 
> 标签：sql, database, nhibernate, orm, string

字符串是无界的，但似乎每个普通的关系数据库都要求列声明其最大长度。这似乎是一个相当大的差异，我很好奇典型的 ORM 是如何处理这个问题的。

从理论上讲，使用“文本”列类型会为您提供更多类似字符串的存储，但据我了解，文本列不可查询，或者至少效率不高（非索引？）。

我可能正在考虑使用 NHibernate 之类的东西，但我的 ORM 需求相对简单，所以如果我可以自己编写它可能会节省一些臃肿。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T15:43:50.863

据我所知，他们不处理它，要么您让 ORM 定义架构，然后： ORM 将决定默认大小或由您的配置定义的大小。

或者模式不是由 ORM 定义的，那么它只需要遵守规则，如果你插入太大的字符串，那么你会从数据库中得到错误。

我会继续使用 varcharish 类型，例如用于 oracle 的 varchar2 或用于 sql server 的 nvarchar，除非您正在处理 clob。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T16:13:18.407

例如，SqlServer 仅存储数据的实际大小。对我来说，为字符串定义足够​​大的大小就足以让用户无法识别这些限制。

示例：

*   产品名称、人名等：500
*   路径、网址等：1000
*   评论，自由文本：2000 甚至更多

NHibernate 在运行时与大小无关。您需要使用某种验证器或让数据库剪切或抛出异常。

引用：“我的 ORM 需求比较简单”。很难说 NHibernate 是否矫枉过正。数据访问通常不是那么简单。

作为我头顶的简单指南，如果出现以下情况，请使用 NHibernate：

*   您有一个细粒度或复杂的域模型。您需要映射继承。
*   您希望您的域模型在某种程度上独立于数据库模型。
*   您需要一些延迟加载功能
*   您希望独立于数据库，例如。在 SqlServer 或 Oracle 上运行它

如果您认为每个表的类是您所需要的，那么您实际上并不需要 ORM。

# visual-studio - 当 2008 可用时，是否有理由使用 Visual Studio 2005？

> ID：820606
> 
> 赞同：2
> 
> 时间：2009-05-04T15:34:14.850
> 
> 标签：visual-studio, visual-studio-2008, visual-studio-2005

有什么理由在 2008 可用时继续运行 Visual Studio 2005？

我在一个环境被指定为 Visual Studio 2005 的项目中工作。这是否有充分的技术原因？我能否使用 Visual Studio 2008 构建一个与使用 Visual Studio 2005 构建的同一应用程序 100% 无法区分的应用程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-04T15:41:55.237

我认为这里有两个问题

## 我可以使用VS2008创建与VS2005兼容的应用程序吗

一般来说，答案是肯定的。我经常通过几个内部和外部的业余爱好项目来做这件事，并取得了巨大的成功。您可能会遇到一个奇怪的球工具问题，但到目前为止，我还没有遇到任何问题。

## 有什么理由不使用 VS2008 而不是 VS2005

我能想到的最好理由是大型开发人员环境。一旦您切换到使用 VS2008，它会将您解决方案中的所有项目升级到新格式。这将不再适用于任何使用 VS2005 的人。他们将被迫升级或维护项目文件的并行版本。总的来说，我发现最好是集体升级而不是个人升级。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-04T15:40:20.217

我们目前正在从 2005 迁移到 2008。如果您在 VS2008 中打开并保存项目，您将无法在 VS2005 中打开该解决方案/项目（至少我们无法轻松找到方法）。如果你团队的其他成员还在 2005 年，你应该留在那里。您可以，但是在 2008 年建立一个项目并使其与 2005 年兼容...只要打开它的每个人都使用 2008 年。您将 .NET 版本保持在 2.5，并且不要转换它想要的大部分内容你转换。

唯一不能迁移到 2008 的情况是，如果您使用的是报表项目和 SQL Server 2005。VS2008 只会让您将报表项目与 SQL Server 2008 集成。我们做了什么？

我们迁移到 2008 年和所有 Team Server 的东西，除了数据库和报告。我们保留在 2005 年的那些，所以我最终不得不每天打开这两个版本……但这就是为什么他们付给我（有点？？）大笔钱！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-04T15:40:03.447

并非如此，新版本的 Visual Studio 具有新语言版本的编译器和 .NET 3.5 的所有库。由于它们都针对 2.0 CLR 并且 Visual Studio 2008 允许您针对以前版本的框架，我认为没有任何理由坚持使用 2005。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-04T15:42:20.493

显而易见的答案是：**没有 Visual Studio 2008 的许可。**

我公司在“省钱”但不升级...

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-04T16:19:51.167

一个原因可能是与现有产品的交互。我用 C# 为 AutoCAD 编写代码。他们（欧特克）“正式”支持 VS 2005，但我从 2008 年开始就一直在使用 2008 年……嗯 2008 年。

# django - 如何在自定义 m2m 关系模型中使用通用外键

> ID：820613
> 
> 赞同：2
> 
> 时间：2009-05-04T15:36:44.873
> 
> 标签：django, django-models, many-to-many

在第一个版本中，我们可以为 ManyToManyField 使用自定义表，参数 through=MyModel。MyModel 应该包含外键。但我想使用通用外键：

```
content_type = models.ForeignKey(ContentType)
object_id = models.PositiveIntegerField()
content_object = generic.GenericForeignKey('content_type', 'object_id') 
```

内容对象作为外键。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-05T23:56:53.090

我认为您最好的选择是使用您自己的中间表/模型，具有自己的通用外键，并编写自定义管理器或方法来检索您想要的信息。ManyToManyField 的当前实现没有这个功能，你可能很难让它像这样工作。

如果那里还没有一张票，那么肯定应该提交一张票，看看 django 开发人员认为应该针对这种情况做些什么。:)

# com - COM / OLE / ActiveX / IDispatch 混乱

> ID：820614
> 
> 赞同：10
> 
> 时间：2009-05-04T15:36:57.667
> 
> 标签：com, activex, ole, idispatch

我无法理解这些术语之间的差异。

COM 和 ActiveX 是同义词吗？

ActiveX 对象只是公开 IDispatch 的 COM 对象吗？

许多较旧的 MSDN 页面提到 IDispatch 时没有任何 COM 上下文。它是否有单独的历史，并且是在其生命周期的后期才在 COM“保护伞”下引入的？

OLE 在哪里适合？一般而言，它在 MFC 命名和 MSDN 中的（相当大的）存在 - 都只是遗留问题吗？

[维基百科](http://en.wikipedia.org/wiki/Component_Object_Model)提供了一些见解，但不多。我找不到更深入的参考。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-05T07:30:40.417

[从COM Programming by Example](http://books.google.com/books?id=5otUpy4cLAIC&printsec=frontcover&dq=%22com+programming+by+example%22#PPP1,M1)中找到一些引用：

> 使用 COM 很快就会发现的另一件事是，营销部门有一个使用术语的实地考察日。在大多数情况下，您会发现它不是帮助促进理解，而是促进神秘。... OLE、ActiveX、远程对象——本周哪一个意味着什么？...
> 
> COM 从解决特定问题的解决方案演变而来 - 如何允许文字处理器编辑字母中的电子表格，而无需用户退出文字处理器来执行此操作。此解决方案称为 OLE。... 然而，随着 OLE 的第二个版本 (OLE2)，其创建者修改了 OLE32.DLL 以公开更多 OLE 的基本功能，以便其 API 可用于允许任何应用程序访问另一个应用程序的功能。这个 API 自 1993 年以来没有太大变化，被认为是 COM API。...
> 
> 一旦 COM API 公开，Microsoft 就使用它创建了当时称为 OLE 控件的东西，以允许 Visual Basic 应用程序可以访问用 Visual C++ 编写的复杂控件（例如，螺旋形按钮、播放音乐的列表框）。最终，同样的技术被用于允许您的 Web 浏览器下载和使用控件。此时，出于营销原因，名称更改为 ActiveX 控件或只是普通的 ActiveX。尽管您可以在 ActiveX 控件中打包任何功能，但它的要求已专门用于支持用户界面控件。

我仍然对最后一句话感到好奇——COM 对象必须满足一些额外的要求才能成为 ActiveX 控件吗？- 但它足以放手。

感谢您的回答！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-04T15:49:38.043

ActiveX 是 COM 的市场营销语言，尽管 ActiveX 通常用于作为 GUI 对象的“ActiveX 控件”的上下文中。

IDispatch 是由 COM 对象实现的接口，因此客户端程序可以在运行时（后期绑定）动态调用其方法，而不是在编译时需要提前知道所有方法和参数类型。

OLE 是 COM 的早期版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T16:36:21.940

关于 OLE：COM 起源于 OLE。但是今天，OLE 可能被认为是建立在 COM 之上的，并且主要用于顾名思义——文档链接和嵌入。虽然 COM 本身只定义了几个接口（IUnknown、IClassFactory、IMalloc 等），但 OLE 添加了一大堆额外的接口，如 IMoniker、IOleItemComtainer 等。

综上所述：COM是基础，ActiveX和OLE是COM之上的一层。

# c# - 从网络共享运行代码时如何访问本地文件夹

> ID：820625
> 
> 赞同：0
> 
> 时间：2009-05-04T15:40:08.550
> 
> 标签：c#, networking, share

我正在从网络共享运行应用程序，然后该应用程序尝试验证路径“C:\temp”是否存在并返回真或假。

如果代码在本地运行，则没有问题。如果它是从网络共享运行的，即使该文件夹在本地存在，我也会得到错误的结果。

代码是框架 2.0 上的 C#

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T15:50:14.950

您需要在提升的权限下运行才能看到这一点。它是[代码访问安全](http://msdn.microsoft.com/en-us/library/930b76w0(VS.71).aspx)模型的一部分。

我建议使用[Environment.GetFolderPath](http://msdn.microsoft.com/en-us/library/system.environment.getfolderpath.aspx)返回的应用程序数据文件夹，而不是硬编码路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T15:48:14.707

这与 .NET 框架的安全策略设置有关。默认情况下，从 Intranet 区域（UNC 路径分配到）运行的代码不完全受信任，从而限制了某些代码的成功。

如果需要，您可以使用配置向导更改这些设置。打开 Visual Studio 命令提示符并运行“Configwizards.exe”。

有关 CAS 配置的信息，另请参阅[此链接](http://msdn.microsoft.com/en-us/library/2bc0cxhc(VS.80).aspx)。

# java - Java桌面应用程序：按下热键时如何最大化托盘应用程序？

> ID：820627
> 
> 赞同：6
> 
> 时间：2009-05-04T15:40:25.957
> 
> 标签：java, desktop, hotkeys, system-tray

我需要编写一个程序，当最小化时，它位于系统托盘中，我将使用 Java 6 的 SystemTray API 来执行此操作。

**当用户按下某个热键时，如何使该应用程序进入前台？**

例如，应用程序正在运行但已最小化。当用户按下 CTRL-SHIFT-Y 或其他东西（或者，像 Google 桌面的搜索，CTRL 两次）并且应用程序被最大化。

编辑：我知道[如何将 Java 窗口带到前台](https://stackoverflow.com/questions/309023/howto-bring-a-java-window-to-the-front)。我更具体地询问***如何让正在运行的 Java 应用程序监听 hotkey***。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T15:46:45.677

您将需要求助于 JNI，查看[一个示例](http://www.codingforums.com/showthread.php?t=147913)。

这是来自 Sun 论坛的[另一个很好的例子。](http://forums.sun.com/thread.jspa?threadID=632369)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-28T19:49:51.450

您可以使用以下 SWT 扩展库来创建一个可以监听热键的键盘挂钩 - [http://feeling.sourceforge.net/](http://feeling.sourceforge.net/)

请注意，这只是 Windows（但这对您来说可能不是问题）。

# winapi - 如何使用 WinAPI 创建“全部同意”按钮？

> ID：820633
> 
> 赞同：5
> 
> 时间：2009-05-04T15:43:10.397
> 
> 标签：winapi, dialog

我们有一个用 C 语言编写的使用 WinAPI 的遗留应用程序。我们想在我们的一些对话框中添加一个“全部是”按钮。不幸的是，现有的 MessageBox 函数不允许自定义按钮或按钮标题。

最好的方法是什么？是否有一个巧妙的技巧可以轻松添加自定义按钮？还是我们应该创建自己的 MessageBox 替代品？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-05T11:07:56.713

WinAPI 中还有另一种消息框，自 Windows 2000 以来。它是[`SHMessageBoxCheck`](http://msdn.microsoft.com/en-us/library/bb773836(VS.85).aspx).

它允许您显示标准`MB_OKCANCEL`/ `MB_YESNO`/`MB_OK`类型`MessageBox`，并通过指定在这种情况下的默认选项是不再显示它的选项。

也许它并不完全符合您的要求，但它与 Windows UI 相当一致。

在 Vista 中，大多数 shell 的“全部同意”对话框实际上都是这样工作的——没有额外的按钮说“全部同意/否”——而是有一个“对所有项目执行所选操作”复选框。

但是文档中的注释让我担心：

> 此功能可通过 Microsoft Windows XP 和 Windows Server 2003 使用。它可能会在 Windows 的后续版本中更改或不可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T16:05:33.107

可能是这样的吗？ [http://www.codeproject.com/KB/dialog/CRHYesNoToAllDialog.aspx](http://www.codeproject.com/KB/dialog/CRHYesNoToAllDialog.aspx)

或者这个： [使用 Windows Hooks to Enhance MessageBox in .NET](http://msdn.microsoft.com/en-us/magazine/cc188920.aspx)

马克

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-09-21T18:10:48.387

您可能还需要处理文本换行以使其类似于`MessageBox`. `MessageBox`与默认的 GUI 字体相比，还使用不同的字体。并且不要忘记在对话框弹出时播放声音:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-09-21T15:09:45.377

我们刚刚创建了自己的 DIALOGEX 替换资源模板，然后简单地调用 DialogBox() 并检查返回值。

参考： http: [//msdn.microsoft.com/library/ms644996 (v=VS.85).aspx#modal_box](http://msdn.microsoft.com/library/ms644996(v=VS.85).aspx#modal_box)

# nhibernate - NHibernate HQL 中的左连接

> ID：820634
> 
> 赞同：0
> 
> 时间：2009-05-04T15:43:17.573
> 
> 标签：nhibernate, hql

是否可以通过父子关系或多对多关系在彼此不相关的两个表之间执行左连接？我发现的所有样本都只显示了这些场景。

我有以下表格，

同步 -> Id（字符串）-> EntityId（字符串）-> OtherInfo

客户 -> Id -> 其他信息

项目 -> Id -> 其他信息

Sync 是一个通用表，用于存储有关其余表的元数据。EntityId 表示这些表中的字段“Id”（在同步和其余表之间没有创建物理外键）。

我基本上想在 SQL 中执行以下查询，

选择 s。*, 即* from sync s left join entity e on s.entityid = e.id /

（上面的 sql 中的实体应该替换为真实的表、客户、项目或任何其他包含同步表中的一些数据的表）。

谁能给我一些关于如何在 HQL 中表达该查询的帮助或指导？

谢谢巴勃罗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T15:48:49.480

据我所知，你不能直接这样做。HQL 是面向对象的，只知道已映射的实体和关系。您可以通过执行 a`session.CreateSQLQuery`并使用`.AddEntity`来让 NHibernate 从 SQL 查询的结果构建实体结果来实现此功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T19:58:23.997

这不是我知道的左连接，但它可能会给出一些指示：

[http://jaychapman.blogspot.com/2007/10/nhibernate-non-mapped-joins.html](http://jaychapman.blogspot.com/2007/10/nhibernate-non-mapped-joins.html)

在 NH 中使用未映射的左连接是一个长期存在的问题，请注意解决方法有一些警告。在这里查看问题和第一对评论：[https ://nhibernate.jira.com/browse/NH-514](https://nhibernate.jira.com/browse/NH-514)

# asp.net-mvc - 在数据访问级别保护 Web 应用程序

> ID：820645
> 
> 赞同：0
> 
> 时间：2009-05-04T15:45:41.140
> 
> 标签：asp.net-mvc, security, architecture

请考虑以下设置：

1.  多租户网络应用程序。
2.  租户创建公司帐户，公司帐户下有用户帐户。
3.  用户有角色，有一个特殊的角色“所有者”（创建公司帐户的用户）。

我想让用户编辑其他用户帐户（一些管理任务），但必须满足两个条件：

1.  没有人可以编辑所有者的数据（所有者除外，当他编辑自己的个人资料时，自己的个人资料编辑是同一用户编辑）。
2.  用户只能在其公司帐户内访问用户数据和编辑用户。

该应用程序使用 MVC 架构。目前我在 web 层检查这两个条件，它对我有用，但我有一些顾虑。如果我使用某种 API 或某种其他类型的数据消费者，我可能会“忘记”重新强化这些条件。此外，应用程序中还会有其他对象具有类似的功能要求，并且会对它们有类似的限制，所以我最好想出某种模式来强制我对数据访问级别的限制。

谁能推荐一些值得研究的方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T15:52:17.020

我相信方面或拦截器应该能够帮助你。如果您使用对象，您应该能够拦截包含您的业务数据的请求并检查您的用户是否被允许使用它。然后拦截器可以停止或继续执行。

# javascript - 将 Click 事件放在来自 javascript 的 html 中的锚标记上？

> ID：820655
> 
> 赞同：0
> 
> 时间：2009-05-04T15:47:13.103
> 
> 标签：javascript, html, onclick

任何人都可以帮忙，似乎在放置锚标记的 onclick 事件时遇到问题，它适用于图像.. 我有这个

```
this.whereAreWe = document.getElementById('where_are_we');
this.whereAreWe.onclick = this.whereAreWe; 
```

我使用“where_are_we”的ID放置了一个A标签......

但它永远不会执行..如果我将它更改为它可以工作的图像..

我也把 href="#"

锚标签和通过代码应用 onclick 有什么特别之处吗？

我也尝试删除href，如果我删除href，它不会显示小手图标。

我已经在函数中放置了一个断点，并且它输入了一个图像，但使用锚它没有

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T15:52:58.893

您提供的代码令人困惑。以下代码对我来说可以正常工作：

```
<a href="#" id="whereWeAre">a link</a>
<script type="text/javascript">
  var whereWeAre = document.getElementById("whereWeAre");

  function testClick() {
    alert("You clicked!");
  }

  whereWeAre.onclick = testClick;
</script> 
```

如果您的示例更具体一点，我们可能会更有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T15:54:41.383

您的 javascript 存在 2 个问题。使用“this”并将 onclick 事件绑定回 HREF 的 DOM 元素的引用。试试这个：

```
var whereAreWe = document.getElementById("where_are_we");
whereAreWe.onclick = function(){ 
     alert("Click event on Where are We");
     return false;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T16:00:34.350

> 我也尝试删除href，如果我删除href，它不会显示小手图标。

您需要 'a' 标签的 'href' 属性来指定目标文档或 Web 资源的 URL。如果您没有指定它 - mouseover 不会更改光标。当然，您可以使用 CSS 来修改它，但这是一个不同的问题。

# jboss - jboss-4.2.3.GA-jdk6.zip 稳定吗？

> ID：820657
> 
> 赞同：1
> 
> 时间：2009-05-04T15:47:48.500
> 
> 标签：jboss

似乎 jboss 团队不想说 Jboss AS 4.2.3 的 Java 6 编译是 GA，他们写道它应该被认为是过期的。

有人在生产中使用它吗？我们正在测试中使用它，并计划将其移至 prod，因为它没有显示任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T14:42:27.900

几个月来，我们一直在生产中运行相同的发行版 (jboss-4.2.3.GA-jdk6.zip)，而且它一直在像冠军一样工作。但是请特别注意这个问题，它在测试中咬了我们，并且会在生产中杀死我们：（添加 http://）jira.jboss.org/jira/browse/JBWEB-82。我们已经安装了 JBoss Native 作为解决方法，它运行良好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-10-28T15:21:45.960

我们现在已经运行了四分之一年。看起来很稳定，除了来自事务管理器的一些奇怪的日志，用于无法接收的 XA 事务，但我们无法将这些日志条目连接到任何应用程序错误。所以看起来很稳定。

# c++ - 'mpirun' 不被识别为内部或外部命令，

> ID：820664
> 
> 赞同：2
> 
> 时间：2009-05-04T15:49:37.653
> 
> 标签：c++, openmp

我需要制作一个小型 openMP 项目。我从 www.openmp.org 中获取了示例。我可以在 VC++ 2005 中使用 /openmp 选项对其进行编译。但是，当我尝试运行该程序时，我面临“'mpirun' 未被识别为内部 ort 外部命令、可运行程序或批处理文件”错误。当我在网上搜索时。我发现这个 mpirun 和 mpiexec 不在 XP 桌面上。它们仅在服务器分发中。如何在 Windows 上运行/调试 openMP 程序？

还是我需要去Linux？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T16:11:16.617

您提到您正在使用 OpenMP - 您实际上不需要使用 mpirun 或 mpiexec，就像使用[MPICH](http://www.mcs.anl.gov/research/projects/mpich2/)或[OpenMPI](http://www.open-mpi.org/)程序一样。OpenMP 的工作方式与消息传递库完全不同：OpenMP 在同一进程中使用多个线程，但 MPICH 和 OpenMPI 使用多个进程。

因此，如果我正确理解您的问题，您应该能够在不使用 mpirun 或 mpiexec 的情况下运行您的可执行文件。

另一方面，如果您使用 MPICH，则 mpiexec 程序位于 `{ProgramFiles}\MPICH2\bin`.

祝你好运！

# .net - 为 .Net 特别是波斯日历更改文化 DateTimePicker

> ID：820670
> 
> 赞同：6
> 
> 时间：2009-05-04T15:50:18.477
> 
> 标签：.net

. net datetimepicke 不能更改为波斯日历我需要一个支持 geregorian 和 Persian 和 Hijri 文化的多文化 DateTimePicker。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-04T18:44:46.950

看一下这个。 [CodeProject：波斯语图书馆](http://www.codeproject.com/KB/selection/FarsiLibrary.aspx?fid=287863&df=90&mpp=25&noise=3&sort=Position&view=Quick&fr=176)

# python - python、__slots__ 和“属性是只读的”

> ID：820671
> 
> 赞同：23
> 
> 时间：2009-05-04T15:50:36.090
> 
> 标签：python, exception, descriptor, readonly-attribute

我想在 python 中创建一个具有一些属性的对象，并且我想保护自己免于意外使用错误的属性名称。代码如下：

```
class MyClass( object ) :
    m = None # my attribute
    __slots__ = ( "m" ) # ensure that object has no _m etc

a = MyClass() # create one
a.m = "?"  # here is a PROBLEM 
```

但是在运行这个简单的代码之后，我得到了一个非常奇怪的错误：

```
Traceback (most recent call last):
  File "test.py", line 8, in <module>
    a.m = "?"
AttributeError: 'test' object attribute 'm' is read-only 
```

有没有聪明的程序员可以抽出一点时间来告诉我“只读”错误？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2009-05-04T16:07:51.587

当您使用 声明实例变量时`__slots__`，Python 会创建一个[描述符对象](https://docs.python.org/2/howto/descriptor.html)作为具有相同名称的类变量。`m`在您的情况下，此描述符被您在以下行定义的类变量覆盖：

```
 m = None # my attribute 
```

以下是您需要做的：不要定义一个名为 的类变量，并在方法中`m`初始化实例变量。`m``__init__`

```
class MyClass(object):
  __slots__ = ("m",)
  def __init__(self):
    self.m = None

a = MyClass()
a.m = "?" 
```

作为旁注，具有单个元素的元组在元素后需要一个逗号。两者都可以在您的代码中使用，因为`__slots__`接受单个字符串或字符串的可迭代/序列。通常，要定义包含元素的元组`1`，请使用`(1,)`or`1,`和 not `(1)`。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-05-04T20:05:24.620

你完全在滥用`__slots__`. 它阻止`__dict__`为实例创建。这仅在您遇到许多小对象的内存问题时才有意义，因为摆脱`__dict__`可以减少占用空间。这是一项核心优化，在 99.9% 的情况下都不需要。

如果您需要您描述的那种安全性，那么 Python 确实是错误的语言。最好使用像 Java 这样严格的东西（而不是尝试用 Python 编写 Java）。

如果您自己无法弄清楚为什么类属性会在您的代码中导致这些问题，那么也许您应该三思而后行地引入这样的语言技巧。首先更熟悉该语言可能会更明智。

为了完整起见，这里是[slot 的文档链接](https://docs.python.org/2/reference/datamodel.html#slots)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-05-04T16:02:54.873

`__slots__`适用于实例变量，而您拥有的是类变量。这就是你应该这样做的方式：

```
class MyClass( object ) :
  __slots__ = ( "m", )
  def __init__(self):
    self.m = None

a = MyClass()
a.m = "?"       # No error 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-05-04T17:06:55.173

考虑一下。

```
class SuperSafe( object ):
    allowed= ( "this", "that" )
    def __init__( self ):
        self.this= None
        self.that= None
    def __setattr__( self, attr, value ):
        if attr not in self.allowed:
            raise Exception( "No such attribute: %s" % (attr,) )
        super( SuperSafe, self ).__setattr__( attr, value ) 
```

更好的方法是使用单元测试进行这种检查。这是相当多的运行时开销。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-20T15:51:31.073

```
class MyClass( object ) :
    m = None # my attribute 
```

这里`m`是类属性，而不是实例属性。您需要通过 self in 将它与您的实例连接起来`__init__`。

# java - jsp下载文件大小

> ID：820672
> 
> 赞同：0
> 
> 时间：2009-05-04T15:51:33.700
> 
> 标签：java, html, jsp, tomcat, download

我们正在运行 tomcat，并且正在动态生成 pdf 文件。我事先没有文件大小，所以我无法直接链接到服务器上的文件。所以我直接发送输出。

```
response.setContentType("application/force-download");
OutputStream o = response.getOutputStream(); 
```

然后我直接输出到这个OutputStream。

唯一的问题是接收者没有得到文件大小，所以他们不知道下载需要多长时间。有没有办法告诉响应文件有多大？

**编辑** 我知道文件大小，我只是不能告诉 STREAM 文件有多大。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-04T16:23:54.467

响应对象应该有一个[setContentLength](http://java.sun.com/j2ee/1.4/docs/api/javax/servlet/ServletResponse.html#setContentLength(int))方法：

```
// Assumes response is a ServletResponse
response.setContentLength(sizeHere); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T15:54:21.510

将 PDF 字节流序列化为文件或在字节数组中计算其大小，设置大小并将其写入输出流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T15:55:08.590

我相信你正在回答你自己的问题：引用：我没有事先知道文件大小，所以我直接发送输出。

没有尺码就发不了。。。。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T16:05:03.590

为什么不即时生成 PDF 文件到临时文件系统、ram-base 文件系统或内存映射文件。然后你可以得到文件大小。

response.setContentType("应用程序/强制下载"); response.setContentLength(sizeHere); 输出流 o = response.getOutputStream();

# java - 在 Linux 中创建 AppleDouble 格式的文件

> ID：820683
> 
> 赞同：1
> 
> 时间：2009-05-04T15:54:41.960
> 
> 标签：java, linux, macos, filesystems

我正在开发一个同步数据的应用程序。对于 Mac OS，文件被上传，如果它们包含资源分支信息，则使用以下命令读取分支并将其存储为字符串：file/..namedfork/rsrc

用户可以使用在 Linux 服务器上运行的 Web 应用程序 (Java) 访问他们的文件，有没有一种方法可以仅使用数据叉和从 namedfork 读取的字符串生成有效的 AppleDouble 格式文件？我不介意丢失 Finder 元数据。

注意：生成的文件将作为单个文件下载（使用 Web 应用程序）供 Mac OS 用户使用。

这可能吗？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-10-07T21:13:11.927

据我所知，OS 9/OS X 只能本地访问 AppleTalk 共享提供的文件上的资源分支。对于其他媒体，例如 SMB (Microsoft Networking) 或 HTTP，保留资源分支的唯一方法是将文件放入存档中。

有几种特定于 Mac 的存档格式支持此功能，例如[StuffIt](http://www.stuffit.com/)和[HQX](http://en.wikipedia.org/wiki/BinHex)。我非常怀疑 StuffIt 的 Linux 二进制文件是否允许从单独的文件中打包资源分支，但至少有一些东西可供您评估。

查看[AppleDouble](http://en.wikipedia.org/wiki/AppleDouble) Wikipedia 条目，似乎可以使用[开源工具](http://sourceforge.net/projects/macbinconv/)`multipart/appledouble`从非 Apple 机器创建这样的文件，并使用MIME 类型发送生成的文件。也许你可以从你的 Java 代码中调用这个二进制文件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T17:00:16.670

维基[百科文章](http://en.wikipedia.org/wiki/AppleSingle)指出：

> AppleSingle 将文件分叉和相关的 Finder 元文件信息合并到一个文件中，而 AppleDouble 将它们存储为两个单独的文件。

苹果[知识库文章](http://support.apple.com/kb/TA20578)指出：

> 第二个新文件具有以“._”为前缀的原始文件的名称，并包含原始文件的资源分支。

因此，我假设您只需将资源分支字符串的内容保存到适当命名的文件中。

*编辑：* 在您发表评论后，我不确定您想要什么。你的问题是如何

> 在 Linux 中创建 AppleDouble 格式的文件

我链接到的文档显示您需要创建两个文件来执行该操作，一个包含数据，另一个包含名称以 ._ 为前缀的资源分支。如果这不是你想要的，那么你需要问一个不同的问题。

# project-management - 有多少神话人物月仍然适用？

> ID：820693
> 
> 赞同：37
> 
> 时间：2009-05-04T15:57:32.843
> 
> 标签：project-management

这本书是在分时系统、过程式编程和软件工程经验少了大约 30 年的时代写成的。随着现有库、高级语言、IDES 以及 Internet 上可用的文档和示例的数量等方面的改进，这本书有多少仍然适用？

虽然我可以相信在项目中增加新人员最初可能会减慢它的速度，但我认为诸如单元测试、关注点分离以及其他形式的自动化和设计改进之类的事情将使团队的新成员比假设的更快地提高生产力在本书中，假设项目有良好的设计文档和流程。

我没有大型项目或大型团队的经验，所以很想听听那些有经验的人的想法。编辑：我想知道新的通信工具，如 Wiki、即时消息和一般互联网是否会减少通信时间。根据每个人的回答，我会说通信效率的任何提高都被复杂性的增加所抵消。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2009-05-04T16:02:05.953

它今天仍然像它写成的那一天一样真实。这是因为它从根本上是关于从事同一项目的人们之间的交流，而过去 30 年的进步都没有实质性地改变这一点。

当然，这 30 年来我们学到了很多东西，但我们工具和理解的所有改进都是渐进的，这与 Brooks 的“没有灵丹妙药”的预测一致。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2009-05-04T16:10:07.760

这不是问孙子兵法在我们有现代装备的情况下还适用于战争吗？

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2009-05-04T16:02:10.150

这本书仍然有一些事情要告诉我们，我个人经历过团队规模增加带来的沟通问题。您应该知道，单元测试、关注点分离等并不是新概念。

然而，有些事情并没有经受住时间的考验。我不认为在您的代码中编写 ASCII 流程图是一个好主意，建议的“外科团队”方法已经被几个人（最著名的是 MS 的查尔斯西蒙尼）尝试过，但发现效果不佳。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-05-04T16:03:44.670

这个想法不是“大团队不起作用”，而是“把人/钱扔在问题上不是答案”。诸如单元测试、关注点分离等之类的事情正在做其他事情，而不仅仅是让人们解决问题。这些其他的东西可以让你**在正确的地方***小心地*添加更多的人来加快速度。如果有的话，你提出的观点支持这本书的想法。

 *** * *

## 回答 #5

> 赞同：9
> 
> 时间：2009-05-04T17:27:53.750

布鲁克斯著名的著作“没有银弹”和“神话般的人月”分别是对编程语言和项目管理的基本限制的解释。

确实，有些章节在 TMMM 的一半之前对当时的技术进行了过多的处理，但其余章节在今天仍然与编写时一样重要。

在 TMMM 中，布鲁克斯遵循“概述问题”、“展示一些错误的开始”和“提出我自己的解决方案”的技巧。上面的一些评论员指出，他自己的解决方案在这一点上可能被认为是过时的，但他对大型项目固有问题的简洁描述使这本书值得一读。

他不断提到的一个主题是通信开销是大型团队的一个限制因素。作为一个思想实验，考虑一下互联网作为程序员的交流媒介的影响，以及大型开源项目的催化剂。

就个人而言，我会读这本书只是为了“工艺的乐趣”部分。我从来没有读过任何能如此优雅地描述最好的编程*感觉*的东西。（如果你好奇，它在第 7 页，可以在 amazon.com 的“往里看！”功能中查看）

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-05-04T16:05:05.947

我当然认为“没有银弹”之类的东西在今天和几十年前一样适用，尤其是当我们看到越来越多的年轻人进入行业并认为 x 是最新和最伟大的杀手语言/技术以及所有其他技术时会因此而死。

诚然，对 Ada 或共享计算机的引用已经过时，但偶然和基本困难的概念，购买与构建，代码如何定义复杂，因为我们不重复部分，所有其他理论主题仍然完全准确和相关的。

为什么 TMMM 相关的另一个论点是，它实际上并不是关于软件本身，而是关于程序员如何完成工作。这样一来，它就很难过时了。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2009-05-04T16:03:15.107

在我脑海中突出的两个：“版本 2”仍然适用，“添加更多人不一定更快”也是如此。

Spolsky 以他自己的方式讨论“版本 2”。我不记得他是否专门链接到 MMM，但它在概念上非常相似。

与 MMM 被识别时相比，沟通变得更加有效，但是，我认为这都是成比例的。与编写 MMM 时相比，准备好软件生产需要更多的时间。

有人说，计算机科学中的一切都是在 1960 年发现的，从那时起，一切都是衍生的。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-05-04T16:21:26.453

阅读 TMM 作为一本书概述了软件工程中的问题，也许是问题：不是技术，而是人！您提到的所有改进都源于该核心实现。他们都准备好解决布鲁克斯提出的问题。我敢肯定，肯特·贝克、沃德·坎宁安、阿利斯特·科克本和马丁·福勒都读过这本书，深信不疑，然后开始制作他们的灵丹妙药。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-05-04T17:02:29.990

我认为这是任何想要了解软件开发过程的人的“必读”书籍之一。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-05-04T16:24:13.217

过去 40 年来，对发展劳动力的需求一直在迅速增长，而且这种需求不会停止。由于人口中聪明人（参见 Joel 的“聪明并能把事情做好”）的比例基本保持不变，每年教育越来越多的开发人员意味着开发人员的平均聪明程度越来越低。
40 年前，半神成为开发者；20 年前，这是一份适合聪明人的工作，而现在当我在我的母校看到年轻的 CS 学生时，似乎他们正在接受所有知道计算机是什么的人。
这并不意味着灾难即将来临——西方世界不断从新兴市场或第三世界国家引进聪明人（或外包工作）。新的开发工具使开发良好的应用程序变得更加容易。这些因素似乎相互抵消，使 MM-M 永恒真实。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2009-05-04T17:09:09.990

神话人物月是一本非常过时的读物，但核心真理仍然适用。Sure Brooks 讨论了对秘书的需求，这在今天显然是不正确的，他的外科团队概念并不适用，但本书的大部分内容仍然是准确的。他认为沟通需求随着团队规模的增加而增加的观点仍然正确。他观察到，将人员添加到后期项目中会使它变得更晚，这已被许多项目所证实。单元测试有一点帮助，但它们并不能阻止人们误解代码或提出很多问题。没有银弹也继续经受住时间的考验。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-05-04T20:03:42.893

所有的。一个简单的事实是软件项目是不平凡的。我们将自己的领域知识真正直接构建到我们的解决方案中。领域知识转移对转让方和受让方来说都是昂贵的；这没有改变。我，一方面，相信它永远不会，无论使用什么实践和工具。事情可能会稍微好一些，但简单的事实是，教与学都是昂贵且困难的事情，没有办法避免它们。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-05-05T17:46:22.323

社会因素仍然存在，因为人类本质上仍然是我们 50 年前的野兽。

技术示例几乎完全过时了，只有当您考虑 1964 年的 0.034 MIPS System/360 时才有意义。当您只有 8 KB 内存时，这表明用户应该负责处理闰年，而不是浪费 26 字节的系统内存（正如 Brooks 所做的那样）是有道理的，但今天看来简直是愚蠢的。我不知道今天有这么小的系统——你的电话比最强大的 OS/360 系统强大数千倍。今天我们对可用性和人机交互有了更多的了解，让用户对这类事情负责简直是疯了。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-05-04T16:14:01.463

一位程序员现在可以编写比当时一位程序员更多的代码/构建更多的软件，但是添加第二位开发人员并不会产生两倍的产量。

如果/当我开始一个具有良好设计文档和流程的项目时，我会告诉你这是否有任何改进。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-05-09T23:43:01.253

如果你想到一个大型项目迟到了，那么它很可能处于危机/恐慌模式，就像在这种模式下的大多数事情一样，最好的答案是一个半体面的计划，简单地在危机中投入更多的资源并不能解决除了浪费资源和复杂化问题之外的任何事情。

调度（发音为shed-uling）、计划和体面的管理是无可替代的。

与大多数这些“一条线”或“黄金法则”一样，将它们视为更多指导方针（有上下文）而不是一成不变的。

# svn - Subversion 是否合并差异或仅更新未修改文件的修订版

> ID：820694
> 
> 赞同：2
> 
> 时间：2009-05-04T15:57:43.747
> 
> 标签：svn

我们有一些功能分支，可以一次搁置几个星期。在主干中进行许多更改后，最好将主干中的更改合并到分支中，还是删除分支并直接从主干创建一个新分支并将起始分支的更改复制到其中。

我问的原因是，对于合并 SVN 只需将主干从上次合并到头部的差异应用于分支。

在许多情况下，主干中的更改远远超过分支中的更改，因此从差异的大小来看，删除功能分支并创建一个新的功能分支更改补丁是有意义的。

当更新大量 PDF 时，这尤其是一个问题。

似乎另一种方式是 SVN 意识到分支中的文件从未被触及，因此更新它指向的修订号，而不是盲目地应用差异。

从 Subversion 的输出来看，它似乎正在应用差异。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T16:51:40.623

> 似乎另一种方式是让 SVN 意识到分支中的文件没有被触及，因此更新它指向的修订号。这将避免差异的额外空间。

AFAIK，应用差异不会在颠覆中占用任何显着的额外空间。如果差异很小，它应该只占用与更新修订版相似的空间。

顺便说一句，从主干合并到分支？仅当您计划稍后将分支合并回主干时才有意义。

[http://svnbook.red-bean.com/en/1.5/svn.branchmerge.basicmerging.html](http://svnbook.red-bean.com/en/1.5/svn.branchmerge.basicmerging.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T16:09:40.723

我认为您使用 Subversion 的方式可能不正确（我之前已经这样做过）。您需要做的是将一系列修订合并到您的主干中。例子：

```
Rev: 100 
/trunk 
```

（做一个分支）

```
Rev:101 
/trunk (r100) 
/branch (r101) 
```

（很多变化）

```
Rev: 200 
/trunk (r100)
/branch (r200) 
```

现在您需要做的是生成 r100 和 r200 之间的所有差异并将它们应用到主干。合并有点误导（[如文档状态](http://svnbook.red-bean.com/en/1.1/ch04s03.html#svn-ch-4-sect-3.2)）。[您的用例是文档](http://svnbook.red-bean.com/en/1.0/ch04s04.html)中介绍的相当常见的场景。

我认为是否合并主干->分支或分支->主干没有任何最佳实践。这在很大程度上取决于您希望如何工作和您的场景。从它的声音来看，功能分支会更加不稳定的主干。一旦你完成了这个功能，合并到主干是有意义的。为了在合并回主干时限制冲突，您可以从主干->分支连续合并。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T18:30:46.440

从 Subversion 1.6 更改文件：

相同的文件在存储库中共享存储空间（issue #2286）

因此，似乎即使应用了差异，在提交时，代码也应该发现相同的文件，并且只使用指向文件第一个版本的指针。

# c++ - 从 txt 文件输入到数组

> ID：820696
> 
> 赞同：1
> 
> 时间：2009-05-04T15:59:19.640
> 
> 标签：c++

我有一个文本文件，其中包含如下行：

```
James Dean         10 Automotive      27010.43 
```

我需要读取该文件并将上述 4 个文件中的每一个放入数组中。

```
char nameArray[MAX][NAME_MAX];
int yearArray[MAX];
char departmentArray[MAX][DEP_MAX];
double payArray[MAX];

while(i < MAX && infile) {

        infile.getline(nameArray[i], 20);
        infile >> yearArray[i];
        infile.getline(departmentArray[i], 15);
        infile >> payArray[i];

        cout << nameArray[i] << "  " << yearArray[i] << "  " << departmentArray[i] << "  " << fixed << setprecision(2) << payArray[i] << endl;
        i++;
    } 
```

代码被删减只是为了让您了解我正在尝试做什么，但是当我运行它时，我会得到类似的东西：

```
James Dean         -858993460    -92559631349317830000000000000000000000000000
000000000000000000.00 
```

谢谢您的帮助。

====编辑===========================================

我从 getline 更改为 get，谢谢。我必须使用 get 而不是 >> 因为我正在阅读的某些行不仅仅是“James Dean”，它们长达 20 个字符......例如：“William K. Woodward”是另一个。

所以，如果我只使用 get，那么它会很好地读取第一行，但是我会在第二行得到相同的混乱文本。

这是代码：

```
 infile.get(nameArray[i], 20);
    infile >> yearArray[i];
    infile.get(departmentArray[i], 15);
    infile >> payArray[i]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T16:07:36.453

这些`getline`函数接受一个输入流和一个要写入的字符串。因此，两个`getline`调用分两行读取。你的输入机制坏了。要么，要么使用`getline`流提取运算符（即`>>`），但不能同时使用。

如果您打算使用`getline`，则需要将字符串（实际上是一行输入）解析为令牌，然后将它们存储在适当类型的数组中。第二个和第四个标记是数字，因此您需要将它们从 string 转换为`int`or `double`。

`operator >>`方法：

```
string name, surname;
int year;
double pay;
while (infile) {
    infile >> name >> surname >> year >> department >> pay;
    namearray[ i ] = name + " " + surname;
    // ...
    payarray[ i ] = pay;
    ++i;
} 
```

`getline`方法：

```
string line;
while (getline(infile, line)) {
    parse(line, tokens);
    namearray[ i ] = token[ 0 ] + " " + token[ 1 ];
    // ...
    payarray[ i ] = strTodouble(token[ 4 ]);
    ++i;   
}

// parse definition
void parse(string line, vector<string>& token) {
    // roll your own
}

double strToDouble(string s) {
   // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T16:08:42.583

我没有看到你在哪里定义 infile 但我会假设它是一个 ifile 。在这种情况下，您应该像使用 cin 获取输入一样使用它。

你为什么要做一个 getline () ？该函数将仅在 '\n' 字符或 EOF 字符处停止。所以这意味着，您在行尾之后开始读取 int，一些随机数据。

如果我错了，请纠正我，但数字 (10) 之前的第一个字符串 (James Dean) 中是否有 20 或 19 个字符？

# python - 为什么 Maya 2009 TreeView 控件在拖动时会出现语法错误？

> ID：820697
> 
> 赞同：1
> 
> 时间：2009-05-04T15:59:26.473
> 
> 标签：python, treeview, syntax-error, maya

我在 Maya 2009 中使用 TreeView 控件，但在拖放时出现语法错误。我的代码如下（为简洁起见）：

```
class View(event.Dispatcher):
    def __init__(self):
        self.window = cmds.window()
        tree_view = cmds.treeView(
            numberOfButtons=1,
            allowReparenting=True,
            dragAndDropCommand=self.tree_view_onDrag
        )
        cmds.showWindow(self.window)

    def tree_view_onDrag(self, dropped_items, old_parents, old_indexes, new_parent, new_indexes, item_before, item_after, *args):
        print "worked" 
```

当我拖放元素时，我会在控制台中执行以下命令：

```
<bound method View.tree_view_onDrag of  {"layer 3"} {""} {1} "layer 1"  {0} "" "layer 2"; 
```

并得到以下错误：

```
// Error: <bound method View.tree_view_onDrag of  {"layer 3"} {""} {1} "layer 1"  {0}€ // 
// Error: Line 1.1: Syntax error // 
```

**编辑：**事实证明，我遇到的问题是由于 treeView 仍在其大多数事件回调上实现 MEL 函数调用。MEL 解释器在尝试将参数提供给命令名称时抛出上述错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T20:21:38.933

请参阅[http://download.autodesk.com/us/maya/2009help/CommandsPython/treeView.html：dragAndDropCommand](http://download.autodesk.com/us/maya/2009help/CommandsPython/treeView.html)是一个字符串——您正在传递一个绑定方法，Maya 正在使用它的 repr。我不确定，但我怀疑字符串应该命名一个顶级（模块级）函数，而不是绑定方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-09T22:57:03.897

从 Maya 2010 开始，treeView 小部件似乎仍需要 mel 过程的字符串名称才能用于其某些回调，但不用于其他回调。例如，dragCallback 和 dropCallback 确实按预期工作，但 selectCommand 和其他人没有。许多其他小部件确实接受 python 函数作为它们的回调。尽管文档将某些 treeView 回调的参数列为字符串，但并未说明该字符串必须是 mel 过程名称，而且肯定是不一致的。

# jquery - rails jquery ajax表单验证

> ID：820698
> 
> 赞同：0
> 
> 时间：2009-05-04T15:59:56.880
> 
> 标签：jquery, ruby-on-rails, ajax

我正在寻找用 jquery 做一些 ajax 表单验证。一切就绪，我可以在一个看起来像这样的 json 对象中返回我的错误：

```
errors => {
"first_name": "cannot be blank",
"password": "cannot be blank",
"last_name": "cannot be blank",
"email": "cannot be blank"} 
```

如果我只想在顶部显示错误消息，这很好用。但是，我还想做一些类似于内置 rails valdation 的事情，它用 'fieldWithErrors' div 包围和错误字段。（实际上我只想将类 'fieldWithErrors' 附加到错误输入中）

我不确定找到适当错误字段并添加错误 div 的 rails 魔法到底在哪里，但我正在寻找该代码，以便我可以返回一个包含错误消息的 json 对象，以及错误字段，以便我可以使用正确的类对其进行更新。当然，我可以将对象名称（在这种情况下为用户）添加到 json 对象中返回的“字段”（即“first_name”）中，但是我希望这是一个适用于我的任何形式的通用函数有。

谁能指出我生成错误字段的实际ID的地方。我希望能够做类似@object.errors[:first_name].field_id 这样的事情，所以我可以返回一个类似于上面的json对象，除了我的键'first_name'实际上是'user_first_name'，ID错误字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T16:07:14.223

查看 actionpack/lib/action_view/helpers/form_helper.rb 以了解 Rails 是如何做到的

以下是 form_helper.rb 中确定标签 ID 的方法

```
 def tag_id
      "#{sanitized_object_name}_#{sanitized_method_name}"
    end

    def sanitized_object_name
      @sanitized_object_name ||= @object_name.gsub(/\]\[|[^-a-zA-Z0-9:.]/, "_").sub(/_$/, "")
    end

    def sanitized_method_name
      @sanitized_method_name ||= @method_name.sub(/\?$/,"")
    end 
```

# asp.net - 无效的回发或回调参数。调试问题

> ID：820702
> 
> 赞同：3
> 
> 时间：2009-05-04T16:00:54.443
> 
> 标签：asp.net, debugging, postback

我收到错误消息：“回发或回调参数无效。在配置或页面中启用了事件验证。出于安全目的，此功能验证回发或回调事件的参数是否来自最初呈现它们的服务器控件。如果数据有效且符合预期，请使用 ClientScriptManager.RegisterForEventValidation 方法注册回发或回调数据以进行验证。” 使用配置或页面启用事件验证。我没有通过 javascript 修改控件中的数据。该错误很少发生，我只知道它是因为我在抛出异常时设置了一些自动电子邮件。我找到异常原因的最佳方法是什么？有时输入文本框中的某些文本是否可能导致此错误，我需要进行 Html 编码？我什么时候做编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T16:05:24.230

如果问题很少发生，这**通常**意味着一些用户发布了一个页面太快或连接很差，这不允许所有隐藏的 ASP.net 回调 javascript 机制到位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T16:20:19.280

当用户提交包含潜在危险字符（'<'、'>' 等）的表单时，我经常遇到此问题。如果您的页面需要允许在表单中提交这些字符，则需要将页面级属性“ValidateRequest”设置为 false。

前任。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="MyClass.cs" Inherits="MyClass" ValidateRequest="false" %> 
```

如果您想阻止这些类型的提交（通常建议这样做），您可能需要添加客户端脚本以防止将无效字符输入到表单中。如果用户无法输入无效值，则表单可以成功发布。如果您尝试仅在服务器端进行验证，它将不会运行，因为 .NET ValidateRequest 首先发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T13:36:19.437

我之前遇到过这个错误，原来有人将`form runat="server"`标签的“action”属性更改为不同的 url（除非使用跨页回发，否则这不起作用）。

-edit：在这种情况下，它当然不会经常发生，所以它可能不会帮助你找到正确的解决方案

# web-services - WSE 3.0 引发 WSE1608 错误

> ID：820707
> 
> 赞同：1
> 
> 时间：2009-05-04T16:02:08.357
> 
> 标签：web-services

我们有一个启用了 wse 3.0 的 web 服务，并且一些客户端计算机正在接收这个 wse1608 错误消息 WASE1608: No XOP parts were located in the stream for the specified content-id:

有什么想法会导致这种情况吗？它适用于同一办公室中的一些客户，但只有一个客户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T17:16:32.193

这是 WSE 3 错误消息，对错误的进一步检查表明存在从服务器返回的 SOAP 错误。

# email - 测试为日语编码的电子邮件

> ID：820712
> 
> 赞同：0
> 
> 时间：2009-05-04T16:03:21.830
> 
> 标签：email, encoding, internationalization

在弄清楚如何对日本用户阅读的电子邮件进行编码（IS0-2022-JP 编码，然后是 base64 编码）之后，我需要弄清楚如何测试它是否真的有效。我日语不太流利。如何测试电子邮件是否正确阅读？我发送的消息将由我的程序用英语编写，供日本用户阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T07:12:50.910

如果您在处理测试用例的日文字符时遇到困难，为什么不使用宽拉丁文进行测试呢？Wide latin 是格式化为等宽的拉丁字符集，并在 ISO-2020 和 unicode 中具有自己的代码点。如果你给自己一个日文输入法，你应该可以输入它们。

以下是一些比较：

```
Hello World // standard ASCII codepoints
Ｈｅｌｌｏ　Ｗｏｒｌｄ // Japanese wide latin 
```

由于您将能够轻松输入和阅读所有内容，因此此策略可能适合测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T06:04:16.507

如果您要发送英文，则无需担心编码问题。ISO-2022-JP[以 ASCII 开头](http://en.wikipedia.org/wiki/ISO_2022#ISO_2022_character_sets)。

# sql-server - 什么是 Sql Server 中的书签查找？

> ID：820714
> 
> 赞同：25
> 
> 时间：2009-05-04T16:04:29.160
> 
> 标签：sql-server, performance, optimization, indexing

我正在尝试优化查找历史数据的查询。我正在使用查询分析器来查找执行计划，并发现我的大部分查询成本都在称为“书签查找”的东西上。我以前从未在执行计划中看到过这个节点，也不知道它是什么意思。

在查询中这是好事还是坏事？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-05-04T16:08:12.770

书签查找是根据在非聚集索引中找到的条目在 SQL 表中查找实际数据的过程。

当您在非聚集索引中搜索值时，您的查询需要的字段多于索引叶节点的一部分（所有索引字段，加上任何可能的 INCLUDE 列），那么 SQL Server 需要检索实际数据page(s) - 这就是所谓的书签查找。

在某些情况下，这确实是唯一的方法——只有当您的查询只需要一个字段（而不是一大堆'em）时，在非聚集索引中包含该字段可能是个好主意。在这种情况下，非聚集索引的叶级节点将包含满足查询所需的所有字段（“覆盖”索引），因此不再需要书签查找。

马克

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-04T16:10:53.810

它`NESTED LOOP`是在行指针上将非聚集索引与表本身连接起来的。

发生在这样的查询中：

```
SELECT  col1
FROM    table
WHERE   col2 BETWEEN 1 AND 10 
```

, 如果你有一个索引`col2`.

上的索引`col2`包含指向索引行的指针。

因此，为了检索 的值`col1`，引擎需要在索引上扫描从to`col2`的键值，并且对于每个索引叶子，使用叶子中包含的指针引用表本身，以找出 的值.`1``10``col1`

[**这篇文章**](http://sqlserverpedia.com/blog/sql-server-bloggers/a-bookmark-lookup-by-any-other-name%E2%80%A6/)指出，a`Bookmark Lookup`是`SQL Server 2000`' 术语，`NESTED LOOP`在索引和`SQL Server 2005`上面

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-05T16:46:22.313

从[MSDN](http://msdn.microsoft.com/en-us/library/ms180920.aspx)关于书签查找：

> Bookmark Lookup 运算符使用书签（行 ID 或聚集键）在表或聚集索引中查找相应的行。Argument 列包含用于在表或聚集索引中查找行的书签标签。Argument 列还包含在其中查找行的表或聚集索引的名称。如果 WITH PREFETCH 子句出现在 Argument 列中，则查询处理器已确定在表或聚集索引中查找书签时使用异步预取（预读）是最佳的。

# cocoa - 是否可以使用 Cocoa 的 Bindings 将可编辑的 NSTableView 连接到 NSMutableArray？

> ID：820717
> 
> 赞同：3
> 
> 时间：2009-05-04T16:05:18.987
> 
> 标签：cocoa, cocoa-bindings, nsuserdefaults, nsarraycontroller

从我可以拼凑起来的点点滴滴看来，这个答案将是“不”，所以我将广泛地解释在我试图敲定的（可能的）情况下我想要实现的目标一个螺丝。

我的应用程序中有一个要读入的有效文件扩展名列表，我正在通过一个目录对其进行递归。我希望这是一个偏好，所以我有以下内容：

```
NSMutableDictionary *dic = [NSMutableDictionary dictionary];
[dic setObject:[NSMutableArray arrayWithObjects:@"pdf", @"rtf", @"txt", nil] forKey:@"validExtensions"];
[[NSUserDefaults standardUserDefaults] registerDefaults:dic]; 
```

我将 NSTableView 绑定到 NSArrayController 绑定到共享用户默认控制器...

拥有用户可自定义的有效扩展列表是完全错误的方法吗？我是否误解了 NSUserDefaults 的作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T16:23:12.610

标题中提出的问题的答案是“是”......但不幸的是，这对您没有帮助，因为实际 NSUserDefaults 后备存储中数据结构的可变性不受您传递的对象的可变性控制在与 registerDefaults:.

对于本身就是结构的首选项值，为了更改它们，您必须读取旧结构，制作您需要修改的任何部分的可变副本，更改它，然后将该结构设置为新值。不幸的是，这不太适合绑定，因此您需要一个粘合层，将绑定数组中的更改反映到首选项中。

# java - 使用单个 RMI 注册表

> ID：820719
> 
> 赞同：8
> 
> 时间：2009-05-04T16:05:32.450
> 
> 标签：java, exception, networking, distributed, rmi

我一直在将 RMI 用于我目前正在处理的项目，并且我想从多个主机绑定到单个 RMI 注册表。

但是，当我尝试这样做时，我收到一条错误消息

java.rmi.AccessException: Registry.Registry.bind 不允许；origin / 192.168.0.9 是非本地主机

我做了谷歌搜索，似乎 RMI 默认情况下会阻止远程主机绑定，我想知道是否有某种方法可以覆盖或绕过它？

如果有人对如何解决这个问题有任何建议，他们将不胜感激，我尝试使用不同的策略文件并覆盖安全管理器，但似乎没有一个工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-19T20:07:35.830

有一种方法可以绕过限制，但它就是这样：一种解决方法。无论如何，请随意尝试。它对我们有用。

在运行中央 RMI 注册表的主机上，运行一个小服务，该服务将使用一个远程方法绑定远程对象：proxyRebind。此方法的实现只是将提供给它的对象绑定在中央注册表中（这不会失败，因为注册表与此服务在同一台机器上）。

所有其他主机将简单地查找此远程对象并使用它们自己的远程对象调用 proxyRebind。

这是可行的，因为允许在远程托管的注册表上进行查找。您最初的尝试失败了，因为不允许绑定到远程托管的注册表。

如果您需要进一步澄清这一点，请告诉我。

/RS

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-08-30T15:54:16.990

> 2 有一种方法可以绕过限制，但它就是这样：一种变通方法。无论如何，请随意尝试。它对我们有用。
> 
> 在运行中央 RMI 注册表的主机上，运行一个小服务，该服务将使用一个远程方法绑定远程对象：proxyRebind。此方法的实现只是将提供给它的对象绑定在中央注册表中（这不会失败，因为注册表与此服务在同一台机器上）。
> 
> 所有其他主机将简单地查找此远程对象并使用它们自己的远程对象调用 proxyRebind。
> 
> 这是可行的，因为允许在远程托管的注册表上进行查找。您最初的尝试失败了，因为不允许绑定到远程托管的注册表。
> 
> 如果您需要进一步澄清这一点，请告诉我。

这非常有效。唯一需要注意的是应始终正确设置跟随。-Djava.rmi.server.hostname="本地主机IP"

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T19:16:33.687

我可能误解了你的问题，如果是这样，请告诉我。

我对 Java RMI 的经验有限，我们在设计模式类中使用它和代理模式。（教科书：Headfirst 设计模式）

我们无法让我们的项目在大学网络之外运行，但它们在直接连接到网络时运行良好。根据我们的教授的说法，在我们通过 Internet 或 WAN 的实现中不可能使用 RMI。她建议的解决方案是需要 VPN。我相信 Vladimir 是正确的，因为它与本地命名服务有关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T17:58:04.410

我可能错了，但看起来 rmiregistry 应用程序本质上是本地命名服务的包装器。这意味着没有办法让它指向远程对象。

您需要的是一个命名实现，并聚集在此。考虑转入 J2EE AS 集群解决方案。JNDI 树在集群内共享。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-14T15:15:10.673

感谢大家的回答，我最终提出的解决方案是使用[Cajo 框架](https://cajo.dev.java.net/)，它提供了一个非常灵活的分发系统，它允许我按照我认为合适的方式处理注册表。它还可以在 NAT、防火墙和 HTTP 代理之后工作，这非常有用。

我相信 rndm.buoy 建议的代理方法在某些情况下会起作用，但在某些系统上可能会很麻烦。RMI 似乎有一些与错误的网络接口相关联的问题，尤其是在基于 Debian 的 Linux 发行版上运行时，我遇到了这个问题。

# sql-server-2005 - 存储过程的大小会影响其执行性能吗？

> ID：820723
> 
> 赞同：2
> 
> 时间：2009-05-04T16:06:36.487
> 
> 标签：sql-server-2005

存储过程的大小会影响其执行性能吗？

关于性能，是拥有一个完成所有过程的大型 SP 还是将其拆分为多个 SP 更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T16:12:06.897

让我解释一下：“我的函数的大小会影响它的执行性能吗？”

显而易见的答案是：不。该函数将在它碰巧运行的硬件上尽可能快地运行。（要明确：当然，更长的函数会*花费更长*的时间来执行。但它不会运行得更*慢*。因此，性能不受影响。）

*正确*的问题是：“我编写函数的方式会影响它的执行性能吗？”

答案是：是的，无论如何。

如果您实际上是在问第二个问题，您应该添加一个代码示例并且更具体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T16:11:16.600

不，不是真的——或者不多，无论如何。存储过程是在服务器上预编译的——它不会在服务器和客户端之间来回发送——所以它的大小实际上并不是那么相关。

以可维护且易于阅读的方式对其进行设置更为重要。

马克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T16:11:44.090

不确定存储过程的大小（代码行数？复杂性？表数？连接数？）是什么意思，但执行性能完全取决于存储过程中定义和编译的 SQL 的执行计划。如果您使用的是 SQL Server，则可以通过 SQL Profiler 很好地监控这一点。连接和表扫描等对性能的影响最大，一个好的工具可以帮助您找出放置索引的位置，或者想出更好的方法来定义 SQL。希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T16:19:11.263

如果需要刷新执行计划以回收本地内存而单个过程不需要，则可能会通过编写多个存储过程来降低性能。

我们遇到了再次需要刷新存储过程并且必须重新编译的情况。在查询访问数百个分区表的视图时，这可能代价高昂，并导致我们的生产超时。从八个组合成两个解决了这个问题。

另一方面，我们有一个存储过程非常复杂，以至于将其分解为多个使得查询执行计划对于块更简单并且执行得更好。

基本上“取决于”的其他答案已经死了。无论您拥有多快的数据库，一个错误的查询都会让它陷入困境。而且每种情况都是独一无二的。在大多数地方，以模块化且易于理解的方式进行编码，性能更好，维护成本更低。SQL 服务器在构建查询计划时必须“理解”它。

# vb.net - 使用 ASP.NET 将数据库中的 HTML 转换为 XHTML

> ID：820725
> 
> 赞同：1
> 
> 时间：2009-05-04T16:07:20.637
> 
> 标签：vb.net, validation

我有大量不合规的 HTML 存储在需要验证的数据库表中。

我想把它拉到像 X-Standard 这样可以进行转换的内联编辑器中，但是有没有更简单的方法可以通过 VB.NET 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T16:09:52.673

我会研究[HTML Tidy](http://tidy.sourceforge.net/)。

从[整洁的文档](http://tidy.sourceforge.net/docs/tidy_man.html)：

> Tidy 读取 HTML、XHTML 和 XML 文件并编写清理标记。对于 HTML 变体，它检测并纠正许多常见的编码错误，并努力生成符合 W3C 且适用于大多数浏览器的视觉等效标记。**Tidy 的一个常见用途是将纯 HTML 转换为 XHTML。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T16:37:56.133

HTML Tidy 可能是最好的选择。

如果是一次性转换，则使用 PHP 脚本（内置 TIDY）可能更容易完成这项工作；否则，您将不得不包装一个 COM 对象，而不是将其与 VB.NET 一起使用（如果您想这样做，请[在此处了解更多信息。](http://www.codeproject.com/KB/cs/ZetaHtmlTidy.aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-06-08T18:16:30.337

通过在详细信息页面 (tinyMCE) 上嵌入 WYSIWYG 编辑器，我能够加载错误的 HTML 并让编辑器完成创建非常接近有效代码的工作。

# java - Mathematica 的“禁用动态”对话框杀死了 Java

> ID：820729
> 
> 赞同：2
> 
> 时间：2009-05-04T16:07:48.187
> 
> 标签：java, wolfram-mathematica

我将 Mathematica 与 JLink 一起用于一个涉及大量计算的研究项目。Mathematica 用作输入参数和绘制结果的图形前端。实际算法位于通过 JLink 调用的 Java 类中。

“链接”是一个名为 evalFrontend 的实例。在按下按钮时，会执行如下操作：

```
 RunEvaluation[] := (
  success = False;
  results = evalFrontend@run[];
  eval = evalFrontend@getEvaluation[];
  success = eval@success[];
  Return[results];
  ) 
```

如果计算需要超过 10 秒，则会显示一个对话框：

> Abort Dynamic：内核不响应动态评估。您可以选择中止并重新启动内核或继续等待。[..]

显示此内容时，Java 仍在运行。但是，再过一段时间，会显示另一个对话框：

> 禁用动态：一个或多个动态对象需要很长时间才能完成评估。您可以禁用进一步的动态评估或继续等待[...]

当这出现时，Java 进程被终止。

我怎样才能防止这种情况发生？任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T16:15:38.930

尝试使用[同步更新 -> False](http://reference.wolfram.com/mathematica/ref/SynchronousUpdating.html)。

另请参阅[此链接](http://reference.wolfram.com/mathematica/tutorial/AdvancedDynamicFunctionality.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-12-09T17:53:02.447

如果您的 UI 让您单击按钮开始计算，请使用 Method -> "Queued" 选项到 Button：

```
Button["Start Chugging", RunComputation[], Method -> "Queued"] 
```

Disable Dynamic 对话框永远不会弹出，动态更新仍然会发生，因此您可以监控计算的进度。

# regex - 你如何使用 Notepad++ 正则表达式管道 | 对于超过一个字符的字符串？

> ID：820740
> 
> 赞同：19
> 
> 时间：2009-05-04T16:10:41.610
> 
> 标签：regex, notepad++, pipe

我正在尝试让 notepad++ 正则表达式在以下句子中查找“abc”和“def”的所有实例：

> abc去了def。

以下语法似乎都不起作用：

*   abc|定义
*   [abc|定义]
*   (abc)|(定义)
*   (abc|定义)

注意：“[a|d]”在我测试时匹配“a”或“d”的任何实例

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-04T16:16:30.973

~~“超过一个字符”没什么特别的，Notepad++不支持| 正则表达式中的字符。甚至“a|d”都不起作用。请参阅[正则表达式帮助页面](http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=Unsupported_Regex_Operators)。~~Notepad++ 6.1.1 版现在支持`|`.

我建议使用具有适当正则表达式实现的编辑器，例如[gvim](http://www.vim.org/)或[UltraEdit](http://www.ultraedit.com/)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-03-29T18:33:49.463

升级到记事本++ v6。来自更新日志：“支持 PCRE（Perl 兼容正则表达式）。” 我已经验证了 | 使用 Notepad++ v6 时在正则表达式搜索中工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T16:31:18.347

在字符集声明 ( `[…]`) 中只有字符和是特殊字符，它们分别具有转义下一个字符、关闭字符集声明和标记字符范围的特殊功能（仅当未写在开头或结尾时）`\`。任何其他字符都被解释为普通字符。`]``-`

您`|`的`[a|d]`意思也是如此，它`[a|d]`描述了任何字符`a`，`|`或者`d`而不是仅仅`a`或`d`类似`a|d`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-03-09T21:11:46.267

我遇到了同样的问题，这就是我登陆这里的方式。由于它是notepad++的缺陷，我们可以使用Powershell来解决。在您的情况下，只需运行一个 Select-String：

```
`ss abc,def filename` 
```

如果在 Unix 上，那么您当然还有其他工具，例如 grep。

我知道你想要一个记事本++的解决方案，我也是，但有时你必须凑合着做。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-08T18:28:27.993

现在`|`应该可以工作了。
感谢 Notepad++ 中的正则表达式改进

```
abc|def 
```

```
(abc)|(def) 
```

# python - 如何在我的课堂上赋予字符串性？

> ID：820742
> 
> 赞同：6
> 
> 时间：2009-05-04T16:11:14.213
> 
> 标签：python, string, multiple-inheritance, immutability

我想要一个带有一个附加属性的字符串，让我们说是用红色还是绿色打印它。

Subclassing(str) 不起作用，因为它是不可变的。我看到了它的价值，但它可能很烦人。

多重继承有帮助吗？我从来没有用过那个。

仅继承对象并使用 self.value=str 意味着我必须自己实现所有字符串消息（如 strip）。

或者有没有办法转发它们，比如Ruby的missing_method？

我认为使用按实例索引的类级字典来存储颜色是可行的。太丑了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-04T16:38:51.607

str 可以被继承，除非您使用的是非常旧的 python 版本，例如：

```
>>> class A(str):
...    def __new__(cls, color, *args, **kwargs):
...        newobj = str.__new__(cls, *args, **kwargs)
...        newobj.color = color
...        return newobj
>>> a = A("#fff", "horse")
>>> a.color
'#fff'
>>> a
'horse'
>>> a.startswith("h")
True 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T16:39:07.283

```
import UserString
class mystr(UserString.MutableString):
   ... 
```

通常最好使用不可变字符串及其子类，但如果您需要一个可变字符串，这是获得它的最简单方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T16:13:22.557

也许**包含**字符串的自定义类会是更好的方法。您真的需要将所有字符串方法传递给底层字符串吗？为什么不通过属性公开字符串并允许类的消费者为所欲为呢？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T16:17:39.223

您需要所有字符串的方法，因此扩展字符串并添加额外的详细信息。那么如果字符串是不可变的呢？也让你的类不可变。然后你无论如何都在创建新对象，这样你就不会意外地认为它是一个可变对象。

或者，如果 Python 有一个，扩展一个可变的字符串变体。我对 Python 不够熟悉，不知道是否存在这样的结构。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T18:38:05.443

您可以尝试在[PyPI](http://pypi.python.org/pypi/stringlike)`stringlike`中使用该模块。这是[一个例子](http://developer.covenanteyes.com/stringlike-in-python/)。

# c - Dev C++编译C源文件

> ID：820751
> 
> 赞同：3
> 
> 时间：2009-05-04T16:13:25.427
> 
> 标签：c, dev-c++

如何使用 Dev C++ 编译 C 源文件。我认为它会自动执行此操作，但由于某种原因，它编译时出现了几个错误，我认为这是因为您必须对其进行更改才能编译 C 文件。

**示例测试代码：**

```
 #include <stdio.h>

main ()        
{ int i,j;
double x,x_plus_one();
char ch;

i = 0;
x = 0;

printf (" %f", x_plus_one(x));
printf (" %f", x);

j = resultof (i);

printf (" %d",j);
}

double x_plus_one(x)          

double x;

{
  x = x + 1;
  return (x);
}

resultof (j)             

int j;

{
   return (2*j + 3);       
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-04T16:22:06.060

那是前 ANSI 代码。我不确定 gcc 编译器是否支持它，无论如何使用它都是不好的做法。将您的功能更改为：

```
double x_plus_one( double x) {
  x = x + 1;
  return (x);     
} 
```

您需要将其声明为：

```
double x_plus_one( double x); 
```

您可能还想尝试使用**-traditional**标志进行编译，但我尚未对此进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T16:40:06.627

也将 main 更改为 int main()。并按照尼尔指出的那样进行修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-03T21:07:33.487

我想你试图写这个：

```
#include <stdio.h>

double x_plus_one(double x);
int resultof(int j);

main()        
{ int i,j;
double x;//,x_plus_one;
char ch;

 i = 0;
 x = 0;

printf (" %f", x_plus_one(x));
printf (" %f", x);

j = resultof (i);

printf (" %d",j);
}

double x_plus_one(double x)

//double x;

{
  x = x + 1;
  return (x);
}

int resultof (int j)             

//int j;

{
   return (2*j + 3);       
} 
```

另存为 main.cpp 并用于编译

```
g++.exe -D__DEBUG__ -c main.cpp -o main.o -I"C:/Program Files/CodeBlocks/MinGW/include" -g3

g++.exe -D__DEBUG__ main.o -o Project1.exe -L"C:/Program Files/CodeBlocks/MinGW/lib" -static-libgcc -mwindows -g3

Compilation results...
--------
- Errors: 0
- Warnings: 0
- Output Filename: F:\My Folder\C++ projects\test01\Project1.exe
- Output Size: 38.990234375 KiB
- Compilation Time: 1.92s 
```

# entity-framework - 如何在实体框架中将字段设置为 DBNull

> ID：820752
> 
> 赞同：8
> 
> 时间：2009-05-04T16:13:41.417
> 
> 标签：entity-framework, dbnull

如何在实体框架中将字段设置为 DBNull？这些字段是强类型的，因此您不能将其设置为等于 DBNull.Value，而且我没有找到任何方法将字段设置为 DBNull。似乎这是必须做的事情，但经过大量谷歌研究后，我一无所获。

我正在尝试使用 vb.net 在实体框架中设置一个日期时间字段。这需要我写

```
 myEntity.mydate = Nothing 
```

这不会将该字段设置为 null，而是将其设置为默认日期值，这在 SQL Server 中不是有效的日期值。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-05T20:55:59.310

如果数据库中的列可以为空，则结果类也将具有可以为空的属性。

例如，如果一个`Order`表有一个`Datetime`名为 的可空列`CreatedDate`，那么生成的`Order`类将如下所示：

```
public partial class Order: EntityObject
{
  ...
  private DateTime? _createdDate;
  ...
} 
```

如果 _`createdDate`在您调用时没有值`ObjectContext.SaveChanges()`a`System.DBNull`将作为插入或更新命令的一部分自动发送到数据库。

希望这有助于亚历克斯

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-04T16:17:04.357

将字段值设置为`null`。实体框架会将其转换为`System.DBNull`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T17:57:33.320

我从来没有使用过实体框架，但你能把一个变量变成一个可为空的类型吗？

就像是

```
dim entityVar as nullable(of date) 
```

然后你可以做 =nothing 并且它不会留下任何东西。

但就像我说的，我从未使用过实体框架

在查看谷歌时，我发现[Microsoft Connect 上的错误报告](http://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=432777)

# bash - 在 Unix 中，如何删除当前目录及其下的所有内容？

> ID：820760
> 
> 赞同：111
> 
> 时间：2009-05-04T16:16:00.647
> 
> 标签：bash, unix, directory, subdirectory, delete-directory

我知道这将删除子目录及其下方的所有内容：

```
rm -rf <subdir-name> 
```

但是如何删除当前目录中的所有内容以及它下面的每个子目录以及所有这些子目录的内容？

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2009-05-04T16:21:41.007

练习安全计算。只需在层次结构中上一层，不要使用通配符表达式：

```
cd ..; rm -rf -- <dir-to-remove> 
```

两个破折号`--`表明`rm`这`<dir-to-remove>`不是命令行选项，即使它以破折号开头也是如此。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2009-05-04T16:52:28.517

将删除当前文件/目录下的所有文件/目录。

```
find -mindepth 1 -delete 
```

如果你想对另一个你有名字的目录做同样的事情，你可以命名

```
find <name-of-directory> -mindepth 1 -delete 
```

如果您不仅要删除它的子目录和文件，还要删除目录本身，请省略`-mindepth 1`. 在没有 的情况下执行此`-delete`操作以获取将要删除的内容的列表。

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2009-05-04T18:06:37.417

我总是打字

```
rm -rf * 
```

然后**点击 ESC-***，bash 会将 * 扩展为当前工作目录中的文件和目录的显式列表。

好处是：

*   在按 ENTER 之前，我可以查看要删除的文件列表。
*   命令历史不会包含完整的通配符的“rm -rf *”，然后可能会在错误的时间在错误的地方意外重用。相反，命令历史记录将在其中包含实际的文件名。
*   回答“等一下……我刚刚删除了哪些文件？”也变得很方便。文件名在终端回滚缓冲区或命令历史记录中可见。

事实上，我非常喜欢这一点，以至于我在 .bashrc 中使用这一行将其设为 TAB 的默认行为：

```
bind TAB:insert-completions 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2009-05-04T16:17:22.937

采用

```
rm -rf * 
```

更新：`.`代表当前目录，但我们不能使用它。该命令似乎对`.`和进行了明确的检查`..`。请改用通配符通配符。但这可能是有风险的。

更安全的 IMO 版本是使用：

```
rm -ri * 
```

（这会提示您在删除每个文件/目录之前进行确认。）

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-05-04T16:57:06.053

正确的做法是`rm –rf .`直接删除当前目录中的所有内容，包括任何子目录及其内容。单**点**( `.`) 表示当前目录。注意不要这样做，`rm -rf ..`因为**双点**( `..`) 表示上一个目录。

话虽这么说，如果您像我一样并且同时打开了多个终端窗口，则最好安全并使用`rm -ir .`让我们看一下命令参数以了解原因。

首先，如果您查看[`rm`命令手册页](http://bashcurescancer.com/man/cmd/rm)（`man rm`在大多数 Unix 下），您会注意到这`–r`意味着“递归删除目录的内容”。因此，`rm -r .`单独执行将删除当前目录中的所有内容及其下面的所有内容。

在`rm –rf .`添加的 -f 表示“忽略不存在的文件，从不提示”。该命令会删除当前目录中的所有文件和目录，并且永远不会提示您确认您确实想要这样做。`-f`如果您在特权用户下运行命令，则特别危险，因为您可以删除任何目录的内容而没有机会确保这确实是您想要的。

另一方面， in that 替换了**`rm -ri .`**“在任何删除之前提示”的意思。这意味着在 rm 愉快地删除所有文件之前，您将有机会说“哎呀！那不是我想要的”。`-i``-f`

在我早期`rm -rf /`的系统管理员时代，我在以完全权限（root）登录时在系统上进行了操作。结果是两天后从备份中恢复系统。这就是我现在雇用的原因`rm -ri`。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2009-05-06T08:58:52.083

怎么样：

```
rm -rf "$(pwd -P)"/* 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2009-05-04T16:18:21.030

```
rm  -rf * 
```

不要这样做！这很危险！确保您在正确的目录中！

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2009-05-04T16:17:41.500

确保**您**在正确的目录中

```
rm -rf *

```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-05-04T17:26:41.787

这个最简单的安全通用解决方案可能是：

```
find -mindepth 1 -maxdepth 1 -print0 | xargs -0 rm -rf 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-10-26T00:53:00.273

我相信这个答案更好：

[https://unix.stackexchange.com/questions/12593/how-to-remove-all-the-files-in-a-directory](https://unix.stackexchange.com/questions/12593/how-to-remove-all-the-files-in-a-directory)

> 如果您的顶级目录被调用`images`，则运行`rm -r images/*`. 这使用 shell glob 运算符在图像中的每个文件或目录上`*`运行。`rm -r`

基本上你上一层，然后说删除 X 目录中的所有内容。这样，您仍然可以指定应该删除哪个文件夹的内容，这比仅说“删除此处的所有内容”更安全，同时保留原始文件夹（有时您想要这样做，因为您不被允许或只是不想要修改文件夹的现有权限）

# cocoa - 如何在 Cocoa 中制作指向网站的按钮链接？

> ID：820769
> 
> 赞同：10
> 
> 时间：2009-05-04T16:17:42.827
> 
> 标签：cocoa

单击打开网页时，您将如何在可可中制作一个按钮？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-04T22:22:10.517

就像查克说的，查一下[这个](http://developer.apple.com/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace%5FClass/Reference/Reference.html#//apple%5Fref/occ/instm/NSWorkspace/openURL:)。例如，如果我想链接到 Google.com，您可以执行以下操作：

```
- (IBAction)goToLink:(id)sender
{
[[NSWorkspace sharedWorkspace] openURL: [NSURL URLWithString:@"http://google.com"]];
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-04T16:24:39.923

假设您的意思是在用户的默认浏览器中打开页面（而不是在应用程序内的 Web 视图中），请参阅[-[NSWorkspace openURL:]](http://developer.apple.com/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWorkspace/openURL:)

# python - 最后（Django）中的语法错误

> ID：820778
> 
> 赞同：4
> 
> 时间：2009-05-04T16:20:23.477
> 
> 标签：python, django

我正在使用 Django，但出现以下错误：

> 异常类型：SyntaxError 异常值：无效语法（views.py，**第 115 行**）

我的 viws.py 代码如下所示：

```
def myview(request):
try:
    [...]
except MyExceptionClass, e:
    [...]
finally:
    render_to_response('template.html', {}, context_instance = RequestContext(request)) 
```

其中 MyExceptionClass 是扩展 Exception 的类，**第 115 行**是“finally”子句行。如果我删除 finally 子句（第 115-116 行），效果很好。任何的想法？

非常感谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-04T16:25:56.223

你用的是什么版本的python？在 2.5 之前，您不能在同一个 try 块中同时拥有 except 子句和 finally 子句。

您可以通过嵌套 try 块来解决此问题。

```
def myview(request):
    try:
        try:
            [...]
        except MyExceptionClass, e:
            [...]
    finally:
        render_to_response(
            'template.html', {}, context_instance = RequestContext(request)
        ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T16:31:20.640

Nadia 是对的，所以如果你坚持使用 Python 2.4 或更早版本，请使用*两个*try 块：

```
try:
  try:
        [...]
  except MyExceptionClass, e:
        [...]
finally:
        render_to_response(...) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T16:24:39.830

在 Python 3 中，应该是：

```
except MyExceptionClass as e:
    [....] 
```

在你的情况下，情况并非如此。

# ruby-on-rails - 使用redirect_to后如何停止控制器执行？（使用导轨）

> ID：820781
> 
> 赞同：47
> 
> 时间：2009-05-04T16:21:17.047
> 
> 标签：ruby-on-rails, error-handling

我有一个具有多个操作的控制器，这些操作将 :year 和 :month 作为 URL 的属性。我创建了一个私有方法 check_date 来检查日期是否有效并检查日期是否在未来。

```
def check_date(year, month)
  if month < 1 || month > 12 || year < 2000
    flash[:notice] = I18n.t 'archive.invalid_date'
    redirect_to :action => 'index'
  elsif year > Date.today.year || (year == Date.today.year && month > Date.today.month)
    flash[:notice] = I18n.t 'archive.no_future'
    redirect_to :action => 'month_index', 
      :year => Date.today.year, 
      :month => Date.today.month,
      :type => params[:type]
  end
end 
```

在redirect_to之后是否有结束控制器执行的rails方式？

我能想到的方法是要么在 redirect_to 之后抛出异常，要么从 check_date 返回一个值并在每个调用它的操作中检查它——比如

```
def month_index 
  year = params[:year].to_i
  month = params[:month].to_i
  if !check_date(year, month)
    return
  ...
end 
```

但我想知道是否有一些不错的 rails 方法可以做到这一点。我有一半希望调用redirect_to rails 会认识到我想停止，但这似乎没有发生。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2009-11-18T00:40:23.767

你也可以这样做：

```
return redirect_to :action => 'index' 
```

和

```
return redirect_to :action => 'month_index', 
  :year => Date.today.year, 
  :month => Date.today.month,
  :type => params[:type] 
```

因为它看起来比将 return 放在自己的线路上更好（恕我直言）。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2009-05-04T16:46:14.707

您可能想要使用过滤器。

如果你在控制器中调用你的`check_date`as a `before_filter`，它呈现或重定向的事实将阻止控制器调用 action 方法。它在那里结束。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2009-05-04T17:40:23.080

你可以投进去

```
return false 
```

您希望操作中的代码执行停止的任何位置

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-05-04T16:39:32.370

redirect_to 只是告诉 rails 完成后要渲染什么。如果您在真正想要的指令之后添加其他 render 或 redirect_to 指令，Rails 会感到困惑，因此只需在 redirect_to 之后从控制器返回 - 这是“正常”的 rails 做事方式。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-12-14T18:23:24.930

我认为 OP 对`redirect_to`.

`redirect_to`将在动作结束时重定向。但是，控制器功能的其余部分将照常执行。您所要做的（正如其他人所发布的）就是包含一个返回，就像任何其他函数调用一样。

# linux - 如何找出本地套接字另一端的程序？

> ID：820782
> 
> 赞同：20
> 
> 时间：2009-05-04T16:21:23.800
> 
> 标签：linux, debugging, sockets

strace 告诉我，我的 Linux 系统上的一个进程正在使用一个文件描述符为 10 的套接字。lsof 告诉我这是一个带有 inode 11085 的 unix 套接字，netstat 进一步告诉我 inode 11085 是一个流套接字，它是连接的。

鉴于此进程没有任何其他线程，因此系统上必须有另一个进程连接到此套接字的另一端。我怎样才能知道它是什么？

**更新：**

[这里](https://web.archive.org/web/20090608083420/http://www.justskins.com/forums/lsof-find-both-endpoints-of-a-unix-socket-123037.html)有来自 lsof 作者的一些启发。从本质上讲，Linux 似乎只是不提供这些信息。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2011-01-29T03:03:17.577

```
ss -p 
```

将会说。（假设套接字不属于内核本身。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-04T16:29:03.783

有`netstat -p`帮助吗？

从手册页：

```
 -p,
  --program Show the PID and name of the program to which each socket belongs. 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-05T21:50:51.707

这个怎么样：`grep 11085 /proc/net/unix`。假设在您感兴趣的 inode 所在的行上存在一个非空路径，`grep`以便该路径`/proc/net/unix`找到连接另一端的 inode，然后使用 @efficientjelly 的方法将另一个 inode 映射到`pid`.

这里的一个关键点是两个连接的套接字都将具有不同的 inode 编号。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-04T16:36:34.543

如果由于某种原因您无法使用适当的 lsof 和 netstat 选项，您还可以执行以下操作：

```
find /proc -lname '*11085*' 2> /dev/null 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-09-21T15:33:00.873

看起来如果你真的很绝望，你可以通过使用一些内核调试器直接从 Linux 内核内存中获取该信息。使用 RHEL5 的“崩溃”工具：

*   获取未压缩`vmlinux`的图像（例如，安装`kernel-debuginfo`rpm，或从该 rpm 中提取`vmlinux`文件）
*   跑`crash /path/to/vmlinux`
*   `net -s 12345``PID`列出12345的所有套接字
*   找到有趣的套接字（必须是 family/type `UNIX:STREAM`），并记下它的`SOCK`值：
    *   `PID: 12345 TASK: e903d000 CPU: 0 COMMAND: "someapp"`
    *   `FD SOCKET SOCK FAMILY:TYPE SOURCE-PORT DESTINATION-PORT`
    *   `36 cadd0240 c8a64040 UNIX:STREAM`
*   你现在有了`unix_sock struct`这个套接字 的地址
    *   基本上，`unix_sock.peer.name`就是socket另一端的名字结构
    *   打印它：`p *(*(*((struct unix_sock*)( (struct unix_sock*)0xc8a64040)->peer)).addr).name`

真的很遗憾，这些信息没有直接导出到用户空间。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-01-29T02:03:18.953

我观察到：

`fd`在客户端调用的inode`connect()`始终比您从`accept()`服务器端调用返回的 inode 大一。

我的 prog 的示例输出：

```
client_fd=4
/proc/4436/fd/4
inode=3072
is socket
node: 3072 socket: /tmp/unix.socket
f0be8960: 00000003 00000000 00000000 0001 03  3072 /tmp/unix.socket

/proc/9293/fd/43
fd:43
inode=3073
is socket
node: 3073 socket: 
f0be81e0: 00000003 00000000 00000000 0001 03  3073 
```

绑定路径没有显示`/proc/net/unix`。

YMMV 和我还没有研究过潜在的机制。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-11-14T14:56:12.350

我编写了一个[工具](https://github.com/lemonsqueeze/unix_sockets_peers)，它使用[gdb 方法](https://serverfault.com/a/417946/148210)可靠地获取套接字对等信息，不需要内核调试符号。

要让进程连接到给定的套接字，请将 inode 号传递给它：

```
# socket_peer 11085
3703 thunderbird 
```

要一次找出所有进程 use `netstat_unix`，它会在 netstat 的输出中添加一列：

```
# netstat_unix
Proto RefCnt Flags       Type       State         I-Node   PID/Program name     Peer PID/Program name  Path
unix  3      [ ]         STREAM     CONNECTED     6825     982/Xorg             1497/compiz            /tmp/.X11-unix/X0
unix  3      [ ]         STREAM     CONNECTED     6824     1497/compiz          982/Xorg                 
unix  3      [ ]         SEQPACKET  CONNECTED     207142   3770/chromium-brows  17783/UMA-Session-R       
unix  3      [ ]         STREAM     CONNECTED     204903   1523/pulseaudio      3703/thunderbird       
unix  3      [ ]         STREAM     CONNECTED     204902   3703/thunderbird     1523/pulseaudio           
unix  3      [ ]         STREAM     CONNECTED     204666   1523/pulseaudio      3703/thunderbird       
... 
```

`netstat_unix --dump`如果您需要易于解析的输出，请尝试。
有关详细信息，请参阅[https://github.com/lemonsqueeze/unix_sockets_peers](https://github.com/lemonsqueeze/unix_sockets_peers)。

对于信息，[inode +1/-1 hack](https://stackoverflow.com/a/4834657/1883178)是不可靠的。它大部分时间都可以工作，但如果你运气不好，它会失败或（更糟）返回错误的套接字。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-04T18:03:27.707

~~lsof | grep 11085~~

~~lsof 应该以 root 身份执行。~~

我一直在我的 Linux 系统上试验 lsof 并`lsof -U`显示 NODE 列下的所有数字都是唯一的。

# c - 最大 CreateProcessWithLogonW 和 NetUserAdd

> ID：820794
> 
> 赞同：1
> 
> 时间：2009-05-04T16:25:07.817
> 
> 标签：c, windows, winapi

我编写了一个小函数，它将使用 CreateProcessWithLogonW 加载可执行文件的多个实例

伪代码：

```
for ( i=0;i<100;i++)
 {
 sprintf(user,"user%i",i);
 sprintf(pass,"pass%i",i);
 if(NetUserGetInfo(user,pass)==NOT_FOUND) { NetUserAdd(user,pass); }
 aaProcessCreateWithLogin("prog.exe",user,pass);
 } 
```

它工作正常，除了它仅限于 32 个实例 - 其他实例失败 -

可以同时启动进程的用户数量是否有限制？

谢谢

灰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T13:44:48.797

From the [documentation for CreateProcessWithLogonW](http://msdn.microsoft.com/en-us/library/ms682431(VS.85).aspx):

> There is a limit to the number of child processes that can be created by this function and run simultaneously. For example, on Windows XP, this limit is `MAXIMUM_WAIT_OBJECTS*4`. On Windows 2000, this limit is `MAXIMUM_WAIT_OBJECTS`. However, you may not be able to create this many processes due to system-wide quota limits.

I've tested `MAXIMUM_WAIT_OBJECTS` on Windows XP and it is 64, so maybe you are hitting the 'system-wide quota limits'.

[This post](http://www.derkeiler.com/Newsgroups/microsoft.public.platformsdk.security/2006-01/msg00130.html) suggests using a combination of [LogonUser](http://msdn.microsoft.com/en-us/library/aa378184(VS.85).aspx) and [CreateProcessAsUser](http://msdn.microsoft.com/en-us/library/ms682429.aspx) instead to avoid hitting these limits.

# visual-studio - 用于放置 using 指令的 Visual Studio 或 Resharper 功能

> ID：820795
> 
> 赞同：123
> 
> 时间：2009-05-04T16:25:10.030
> 
> 标签：visual-studio, resharper, using-directives

我喜欢将我的 using 指令放在当前命名空间内，而不是像 VS 和 Resharper 一样默认放置它们。

有谁知道宏/标准功能可以对未使用的 using 指令进行排序/删除并将它们*放在*当前命名空间中？

* * *

## 回答 #1

> 赞同：225
> 
> 时间：2009-05-05T14:55:19.007

**更新 - ReSharper 2016.1**：此选项现在移至*代码编辑 → C# → 代码样式 → 将“使用”指令添加到最深范围*

您是否尝试过 ReSharper 选项：

*语言 → C# → 格式化样式 → 命名空间导入 → 将 using 指令添加到最深范围*

我不确定 R# 的代码清理是否会为您重新排序现有代码。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2016-10-29T06:04:14.717

在**ReSharper 2020**中，转到选项，然后：

> `Code Editing`→ `C#`→ `Syntax Style`→`Add 'using' directive to deepest scope`

[![在此处输入图像描述](https://i.stack.imgur.com/a5wsV.png)](https://i.stack.imgur.com/a5wsV.png)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-04-22T17:37:55.017

从 8.2 版开始，这已移动。现在在这里：

在 Visual Studio
Resharper -> 选项...

然后在选项对话框中
代码编辑 -> C# -> 命名空间导入 -> 在必要时插入使用指令 -> 将使用指令添加到最深的范围

![在此处输入图像描述](https://i.stack.imgur.com/WLQPo.png)

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2014-12-13T19:05:01.913

从 Resharper 9 开始，这已移至`Code Editing`=> `C#`=> `Code Style`=> `Reference Qualification`=> `Add 'using' directive to deepest scope`。

或者您可以使用新的设置搜索工具并搜索`deepest scope`. 将出现确切的设置：

![将“使用”指令添加到最深范围](https://i.stack.imgur.com/MCSlA.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-04T16:11:09.337

StyleCop 从 4.7 版开始支持 ReSharper 集成。

来自[http://stylecop.codeplex.com/](http://stylecop.codeplex.com/)：

> 4.7 与 JetBrains R#5.1(5.1.3000.12)、R#6.0 (6.0.2202.688)、R#6.1 (6.1.37.86)、R#6.1.1 (6.1.1000.82) 和 R#7.0 (7.0.54.77) 兼容)
> 
> 4.7 与 Visual Studio 2008、Visual Studio 2010 和 Visual Studio 11 兼容
> 
> **此版本包括 StyleCop ReSharper 插件**（与 ReSharper 5.1、6.0、6.1、6.1.1 和 7.0 兼容）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-04T16:48:35.483

我已经[编辑了我的默认 Visual Studio 模板](http://www.thecodinghumanist.com/Content/HowToEditVSTemplates.aspx)，以将我的 using 指令放在命名空间中。

对于排序和删除未使用的指令，我使用[Power Commands for Visual Studio 2008](http://code.msdn.microsoft.com/PowerCommands)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-24T14:36:09.863

**Resharper 2020.1 更新**：现在可以在*选项 → 代码编辑 → C# → 语法样式 → 参考限定和“使用”指令中找到此选项*

[图片供参考](https://i.stack.imgur.com/uxIWr.png)

# postgresql - PostgreSQL 的开源列式存储引擎？

> ID：820796
> 
> 赞同：25
> 
> 时间：2009-05-04T16:25:34.210
> 
> 标签：postgresql, column-oriented

是否有任何开源项目正在为 PostgreSQL 创建面向列的存储引擎？我知道雅虎在内部创建了一个，并且有基于 PostgreSQL 的面向列的商业产品。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-04-04T07:14:39.760

[Citus Data](http://citusdata.com/)为 PostgreSQL 开发了一个开源的列式存储扩展。它在 Apache License v2.0 下可用。它支持 PostgreSQL 9.3 及更高版本。

首先，创建扩展和外部服务器：

```
CREATE EXTENSION cstore_fdw;

CREATE SERVER cstore_server FOREIGN DATA WRAPPER cstore_fdw; 
```

接下来，创建一些外部表：

```
CREATE FOREIGN TABLE customer_reviews
(
    customer_id TEXT,
    review_date DATE,
    review_rating INTEGER,
    review_votes INTEGER,
    review_helpful_votes INTEGER,
    product_id CHAR(10),
    product_title TEXT,
    product_sales_rank BIGINT,
    product_group TEXT,
    product_category TEXT,
    product_subcategory TEXT,
    similar_product_ids CHAR(10)[]
)
SERVER cstore_server
OPTIONS(filename '/opt/citusdb/3.0/cstore/customer_reviews.cstore',
        compression 'pglz'); 
```

最后，`COPY`数据入表：

```
COPY customer_reviews FROM '/home/user/customer_reviews_1998.csv' WITH CSV; 
```

可以像任何其他表一样查询外部表。您甚至可以将它们与普通桌子一起加入。

更多示例和信息可在[相关博客文章](http://citusdata.com/blog/76-postgresql-columnar-store-for-analytics)和[项目主页中找到](https://github.com/citusdata/cstore_fdw)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-06T15:19:57.347

这里缺乏回应和我自己的研究似乎表明确实没有开源计划将列存储添加到 PostgreSQL。

2008 年有人谈论雅虎可能会外包 Everest（他们的 PostgreSQL 列存储后端），所以希望他们能发布它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-03-17T05:35:30.013

[Greenplum](http://dbmsmusings.blogspot.com/2009/10/greenplum-announces-column-oriented.html)为 PostgreSQL 创建了一个面向列的存储引擎。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-28T07:42:10.150

在玩 monetDB 时，我一直在寻找相同类型的扩展/实现。从Citus [Data](https://github.com/citusdata/cstore_fdw)找到**cstore_ftw**后，我从 monetDB 进入这篇文章：https: [//www.monetdb.org/content/citusdb-postgresql-column-store-vs-monetdb-tpc-h-shootout](https://www.monetdb.org/content/citusdb-postgresql-column-store-vs-monetdb-tpc-h-shootout)

> 由于 cstore_ftw 使用 PostgreSQL 的火山式查询处理器，我们立即怀疑该组件将成为其性能的限制因素。

我没有测试过自己，但是（IMO）MonetDB 对他们的东西很认真。我认为如果 MonetDB 为 PostgreSQL 创建一个扩展/实现，那将是完美的。现在我还在使用 monetDB，同时在 PostgreSQL 上寻找新功能。

# ruby-on-rails - 如何在 rails 中显示查看次数（例如此链接/页面已查看 68 次）？

> ID：820800
> 
> 赞同：4
> 
> 时间：2009-05-04T16:26:14.147
> 
> 标签：ruby-on-rails, views

如何在 rails 中显示查看次数（例如：此链接/页面已查看 68 次）？我有任何可用的 gem 或插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T16:37:29.893

如果您遵循通常的 MVC 模式，那么视图是对象模型的表示，并且跟踪视图计数的最佳方法是简单地将“查看次数”计数器添加到表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T16:38:23.713

只需向您的模型添加一个计数器列，并在控制器中点击页面时将其递增。就这么简单，有一些设计问题：

*   页面缓存会影响您的统计数据。在这种情况下，您仍然可以在页面上使用 Ajax 来注册命中。（与谷歌分析的工作方式没有太大区别。）

*   您的页面是否已经与模型有明显的关系？例如，如果它们是用户个人资料页面，请将计数器放在 Profile 模型中。

# windows - 如何使用 SetWindowsHookEx 和 WH_KEYBOARD 挂钩外部进程

> ID：820804
> 
> 赞同：6
> 
> 时间：2009-05-04T16:27:35.300
> 
> 标签：windows, winapi, dll, code-injection, keyboard-hook

我试图钩住例如记事本没有成功。制作一个全局钩子似乎工作正常。

在 XP SP2 上测试。

编辑：修改后的代码现在可以使用。

MyDLL 代码

```
#include <windows.h>
#include <iostream>
#include <stdio.h>

HINSTANCE hinst;
#pragma data_seg(".shared")
HHOOK hhk;
#pragma data_seg()
//#pragma comment(linker, "/SECTION:.shared,RWS") compiler error in VC++ 2008 express

LRESULT CALLBACK wireKeyboardProc(int code, WPARAM wParam,LPARAM lParam) {  
    if (code < 0) {
        return CallNextHookEx(0, code, wParam, lParam);
    }
    Beep(1000, 20);
    return CallNextHookEx(hhk, code, wParam, lParam);
}

extern "C" __declspec(dllexport) void install(unsigned long threadID) { 
    hhk = SetWindowsHookEx(WH_KEYBOARD, wireKeyboardProc, hinst, threadID);
}
extern "C" __declspec(dllexport) void uninstall() {
    UnhookWindowsHookEx(hhk); 
}

BOOL WINAPI DllMain(__in HINSTANCE hinstDLL, __in  DWORD fdwReason, __in  LPVOID lpvReserved) {
    hinst = hinstDLL;
    return TRUE;
} 
```

我的程序

```
#include <Windows.h>

unsigned long GetTargetThreadIdFromWindow(char *className, char *windowName)
{
    HWND targetWnd;
    HANDLE hProcess;
    unsigned long processID = 0;

    targetWnd = FindWindow(className, windowName);
    return GetWindowThreadProcessId(targetWnd, &processID);
} 

int _tmain(int argc, _TCHAR* argv[]) {
    unsigned long threadID = GetTargetProcessIdFromWindow("Notepad", "Untitled - Notepad");
    printf("TID: %i", threadID);    

    HINSTANCE hinst = LoadLibrary(_T("MyDLL.dll")); 

    if (hinst) {
        typedef void (*Install)(unsigned long);
        typedef void (*Uninstall)();

        Install install = (Install) GetProcAddress(hinst, "install");
        Uninstall uninstall = (Uninstall) GetProcAddress(hinst, "uninstall");

        install(threadID);

        Sleep(20000);

        uninstall();
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-04T16:38:19.937

三个问题：

当您应该使用线程 ID 时，您正在使用进程 ID。

你的 HHOOK 需要进入共享内存：

```
#pragma data_seg(".shared")
HHOOK hhk = NULL;
#pragma data_seg()
#pragma comment(linker, "/SECTION:.shared,RWS") 
```

您需要将您的 to 传递`HHOOK`给`CallNextHookEx`：

```
return CallNextHookEx( hhk, code, wParam, lParam); 
```

# delphi - Delphi 7：在 Win XP 或 Windows Server 2003 下编译有什么区别？

> ID：820807
> 
> 赞同：6
> 
> 时间：2009-05-04T16:29:51.673
> 
> 标签：delphi, compiler-construction, windows-xp, windows-server-2003

我有一个遗留应用程序要维护。目前，发布是从一个特定的开发人员工作站构建的，这是一个坏习惯。

我要求使用虚拟化构建服务器从一个集中式环境自动构建。唯一的问题是他们给我的服务器运行的是windows server 2003，他们不会给我一个windows XP来做到这一点......

我应该在具体问题上小心，我应该注意什么？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-04T16:35:12.830

通常，使用 Delphi 构建应用程序的操作系统无关紧要，因此应该没有问题。唯一的例外是任何导入的类型库，因为更新的操作系统可能带有更新的版本。这可以通过不直接使用导入的单元来解决，而是通过将已知的良好版本复制到您的项目，重命名并将其添加到版本控制中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-04T18:26:45.713

编译器本身不会关心，无论如何都会产生相同的代码。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-04T20:25:45.243

根据您的 Delphi 版本，许可证特别允许您在单独的构建 PC 上“安装”命令行编译器，以用于这些类型的构建。操作系统是什么并不重要。

您实际上不需要使用 Delphi 安装程序来设置这样的构建 PC。我的构建 PC 只是将以下文件夹直​​接复制到它上面（您可能需要/想要将 bin 路径添加到 PATH 环境变量中）。

Program Files\CodeGear\RAD Studio\5.0\bin
Program Files\CodeGear\RAD Studio\5.0\lib
Program Files\CodeGear\RAD Studio\5.0\source
Program Files\Common Files\RAD Studio\Shared Assemblies\5.0

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-04T17:48:51.093

我使用 Win2003 构建机器和 Delphi 7 有一段时间没有遇到任何问题。开发和调试也很好。我什至有时使用终端服务器访问控制台，那里也没有问题。

# objective-c - Objective-C/Cocoa：代理和控制器的正确设计

> ID：820808
> 
> 赞同：7
> 
> 时间：2009-05-04T16:30:06.137
> 
> 标签：objective-c, cocoa, touch

考虑以下常见情况：

您的 Cocoa 应用程序中有一些`MainView`从 NIB 加载，由`MainViewController`. 您`MainView`包含一些控件，例如`UILabel infoLabel`. 您还有一个`MyDelegate`接收某种事件的委托类。

您想确保在`MyDelegate`收到其事件时，`infoLabel`适当地更新。但是，问题在于`MyDelegate`没有对 the`MainView`或 the的引用`MainViewController`并且不知道标签。

一种解决方案是传递`MainViewController`对委托对象的引用，但这感觉不对，因为您可能会发现自己处于对象具有彼此引用的不良情况。

解决这个问题的正确设计是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-04T18:07:03.577

在一个未具名的开发者论坛中，有人写道：

> 所以，长话短说，我决定开始使用 NSNotifications。人们一直在关注的斯坦福在线课程是由两名苹果工程师教授的。他们刚刚明确表示不要使用应用程序委托或全局变量，并表示要使用 NSNotifications、委托和 KV 观察。
> 
> 如果这是苹果工程师所说的，我将朝着这个方向前进。
> 
> NSNotifications 非常巧妙，因为它们并没有真正干扰封装。监听器只监听通知和一个对象——我认为它不必知道或关心是谁发送的。
> 
> 因此，在您的示例中，我会考虑让代表发布标签已更改的通知，或者如果可能的话，最好让控制器观察该属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T17:33:18.463

以下是我想到的 2 个选项：

*   如果要委托的事件是由您的控制器发送的，您可以让该方法向控制器返回一个值以推送到视图。

*   您还可以将 infoLabel 的值绑定到某个键（例如，使用 Cocoa 绑定或仅使用原始键值观察）。绑定对象（可以是委托或其他模型对象）可以只更新绑定键，这会将值推送到 infoLabel。例如，您可以将委托的“info”成员绑定到 infoLabel 的值。当代理接收到一个事件时，它可以更新信息成员，并且视图发生变化。实际绑定本身可能发生在 IB 中（如果您的委托在 nib 中）或控制器（它具有对视图和委托的引用。）

后一种解决方案基本上是一个循环引用，但对我来说似乎更干净。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T17:16:08.693

我们实现了一个棘手的“数据”对象，它控制了几乎所有的东西。它检查是否有更改并保持所有全局变量的更新。

创建新实例时，我指的是 Data 类，如下所示：

```
[[Button alloc] initWithData:data]]; 
```

`data`单例数据类在哪里。现在我们可以检查是否需要做出响应的更改。

我承认，它仍然需要像你描述的那样引用。似乎没有`parent`嵌入一个简单的参考。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-05-04T17:12:47.077

正如您所说，通常的模式是`MainView`通过其委托方法传递一个指针。因此，如果`MainView`正在调用其委托的`doSomethingWithFoo:`方法，您希望将该方法更改为：

```
- (void)mainView:(MainView *)view doSomethingWithFoo:(id)foo 
```

并相应地调用新方法。如果直接对 MainView 指针进行操作，循环引用应该不会有任何问题。

# c# - C# 正则表达式仅匹配字符串中完整单词的一部分

> ID：820810
> 
> 赞同：1
> 
> 时间：2009-05-04T16:30:49.783
> 
> 标签：c#, .net, regex

在问这个问题之前，我已经用谷歌搜索过这个问题，并且我已经查看了所有与 StackOverflow 相关的问题。

问题很简单

我有一个字符串“北大西洋公约组织”

我有一个模式“a.*z”，现在它会匹配

北大西洋公约组织

但我需要它来匹配完整的单词（例如，orgANIZation）

我试过 "\ba *z\b" 和 "\Ba* z\B" 作为模式，但我想我不太明白

我应该如何更改我的模式以匹配字符串包含的完整单词（不匹配多个单词）

模式是动态生成的，用户输入 a*z，我的应用程序将其转换为匹配字符串中完整单词部分的模式。

我的问题是我不知道用户要搜索什么。理想情况下，我会在用户的表达式中添加一些正则表达式。

谢谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-04T16:34:44.347

orgANIZation 中的 ANIZ**不是**一个完整的词——它是一个词的一部分。顺便说一句，你的模式不是你写的——`a*z`与你描述的不匹配；您可能正在使用`a.*z`，这会。所以，试着`a[^ ]*z`让它不匹配空格。如果您不想匹配除了空格之外的其他字符，例如某些标点符号，`[^...]`当然也将它们粘贴到结构中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-04T16:35:27.353

```
"a[^\s]*z" 
```

这意味着一个“a”后跟任意数量的非空白字符，然后是一个“z”。

*编辑：* 您似乎希望将 ' `*`' 解释为通配符。因此，用户不要输入正则表达式，而是输入带有某些通配符的字符串。您可以通过推理预期的含义将这些通配符转换为正则表达式。假设 ' `*`' 应该表示“零个或多个不是空格的字符”。然后用相应的正则表达式替换这个字符：

```
                       [^\s]*
                       `-.-´|
     Character class-----´  `---Zero or more of these

     '\s': "Whitespace"
     Inside Character class: if it starts with '^': "not"

```

You might also want to define '?' as matching exactly a single non-whitespace character. This is the same character class, but you omit the '*' at the end.

So, what you do is regex-replace "`*`" with "`[^\s]*`" and "`?`" with "`[^\s]`".

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-05T21:49:21.710

```
Regex reWord = new Regex("\\b[A-Za-z]*?(a.*z)[A-Za-z]*\\b"); 
```

...这将返回“大西洋条约组织”，并从 a 中捕获。`*`z 是“反条约组织”。

问题是您的方法所固有的 - 除非您通过修改为 [^\s] 来解析用户提供的`*`z（或`*`a.z，这在您的帖子中不太清楚）的“正则表达式” ？正如 Svante 建议的那样（或者可能是 \w ？），您将吞噬比您喜欢的更多的字符。 `*``*``*`

“。`*`”一般来说，当你试图具体化时，这是一个坏主意。它将匹配除换行符之外的所有内容，并且您无法附加任何内容来阻止它。

```
Regex reWord = new Regex("\\b\\w*?(a\\w*?z)\\w*\\b"); 
```

...将仅返回“组织”。

或者，如果您出于某种原因**绝对必须**避免修改用户提供的正则表达式，也许可以尝试将您的字符串拆分为一个单词数组并针对正则表达式单独测试每个单词。

最终，它是 GIGO - 垃圾进，垃圾出。为您的系统提供一个错误的正则表达式，如果您没有适当地修复它，您将无法获得所需的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-04T16:42:29.770

这就是你要找的：

```
new Regex( @"\b[^ ]*a[^ ]*z[^ ]*\b" ); 
```

它只匹配一个单词（不允许有空格） - 但匹配整个单词。您可以将您的用户输入翻译成这样的正则表达式 - 只需将 * 替换为 [^ ]* - 它甚至可以使用多个通配符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-04T17:00:19.230

与您的问题没有直接关系，但您可能需要查看 RegEx 可视化工具，该工具会根据文本输入和给定的正则表达式向您显示捕获的结果。

这样的工具非常有助于找到正确的模式，这可能非常棘手。[RegExLab](http://www.mycsharp.de/wbb2/thread.php?postid=224752#post224752)是专门用于 .net RegEx 的一个不错的工具，它有点老，但在显示正则表达式匹配的内容方面做得很好。由于该页面是德语的，因此只需单击 regexlab.006.zip 链接。源代码也包括在内。

# .net - .NET 中的共享配置文件

> ID：820811
> 
> 赞同：8
> 
> 时间：2009-05-04T16:30:55.743
> 
> 标签：.net, asp.net-mvc, configuration, windows-services

我有一个包含 Web 和 Windows NT 服务应用程序的解决方案。这些当然是两个不同的项目，但在同一个解决方案中。但是，它们确实共享许多相同的配置。

目前我在 web.config 和 app.config 文件中有相同的值。这开始变得混乱，我想为解决方案中的两个应用程序提供一个共享的配置文件。

*   如果配置不在 Web 应用程序的根级别，Web 应用程序是否有问题？这里有限制吗？
*   如果我不使用 web.config，我是否会丢失 Web 应用程序的缓存和自动回收？
*   按照描述共享配置通常是一个坏主意吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-04T16:35:18.743

好吧，您可以将配置的某些部分“外部化”为单独的 .config 文件，并从两个地方使用它们。

例如，您可以像这样外部化您的连接字符串设置：

```
<connectionStrings configSource="connectionStrings.config" /> 
```

然后有这样的“connectionString.config”文件：

```
<?xml version="1.0" encoding="utf-8"?>
<connectionStrings>
  <add name="ConfigurationDatabase" 
       connectionString="server=.;Integrated Security=true;database=test"/>
  <add name="TestDatabase" 
       connectionString="server=TEST;Integrated Security=true;database=test"/>
</connectionStrings> 
```

基本上，任何 ConfigurationSection 都有这样的“configSource”设置，它允许您指定要使用的外部文件。

这样，您就可以共享两个配置文件的公共部分。

马克

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-05T10:36:56.070

您仍然需要一个**web** .config，因为某些特定于 web 的配置元素不会出现在您的服务的 app.config 中。正如[Marc 所说](https://stackoverflow.com/questions/820811/shared-configuration-files-in-net/820827#820827)，使用 ConfigSource 属性将使您能够共享公共元素。

请注意，[appSettings](http://msdn.microsoft.com/en-us/library/ms228154.aspx)元素有一点不同：File 属性。

> 指定包含自定义应用程序配置设置的外部文件的相对路径。指定的文件包含与 appSettings 添加、清除和删除属性中指定的相同类型的设置，并使用与这些元素相同的键/值对格式。

这与 ConfigSource 属性的行为不同，因为您不必将整个部分替换为外部文件，它可以只包含您想要添加的元素，或者覆盖这些值：

> 您可以使用 file 属性指定一个配置文件，该文件提供*其他设置*或*覆盖*appSettings 元素中指定的设置。

如果您使用[ConfigSource](http://msdn.microsoft.com/en-us/library/ms228167.aspx)来共享其他元素，那么当值更改时您仍然会自动重新启动应用程序 - 对于 ASP.NET 应用程序应该忽略有关 restartOnExternalChanges 属性的注释，但是使用 File 属性将意味着更改获胜不会导致重启。

外部文件的内容仍应被缓存，因此不应影响性能。

# c# - 我需要一个正则表达式来获取 img 标签的 src 属性

> ID：820814
> 
> 赞同：2
> 
> 时间：2009-05-04T16:31:44.883
> 
> 标签：c#, regex

我有一个**字面意思**的字符串：

```
"lt;img src=quot;http://www.news.gov.tt/thumbnail.php?file=Hon__Jerry_Narace_Minister__Of_Health_599152837.jpgamp;size=summary_mediumquot;gt;lt;pgt;Fifty-eight people have been tested for Influenza A/H1N1 virus, commonly called swine flu, in Trinidad and Tobago. \r\nThe tests have all come back negative, Health Minister Jerry Narace said yesterday. \r\n\r\n" 
```

我想得到'quot;'之间的网址 字符串，即

```
http://www.news.gov.tt/thumbnail.php?file=Hon__Jerry_Narace_Minister__Of_Health_599152837.jpgamp;size=summary_medium 
```

在 .NET 中使用正则表达式。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T16:41:34.453

```
Regex r = new Regex("(?<=img src=&quot;).*?(?=&quot;)"); 
```

假设没有任何＆符号隐藏在某处，应该为您解决问题。

编辑：发布此答案后，我注意到我之前在您的字符串中看到的 & 符号不再存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T20:08:18.310

```
^\"lt;img\s+src\=quot;(.+)quot; 
```

给定以下输入：

```
"lt;img src=quot;http://www.news.gov.tt/thumbnail.php?file=Hon__Jerry_Narace_Minister__Of_Health_599152837.jpgamp;size=summary_mediumquot;gt;lt;pgt;Fifty-eight people have been tested for Influenza A/H1N1 virus, commonly called swine flu, in Trinidad and Tobago. \r\nThe tests have all come back negative, Health Minister Jerry Narace said yesterday. \r\n\r\n" 
```

此正则表达式返回以下内容：

```
http://www.news.gov.tt/thumbnail.php?file=Hon__Jerry_Narace_Minister__Of_Health_599152837.jpgamp;size=summary_medium 
```

我相信这正是您所需要的。

希望这会有所帮助，瑞恩

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T16:58:26.987

这个正则表达式应该让您整理出*仅*获取 IMG 标签的 src 内容：

```
(?<=<img.*?src=\&quot;)[^\"]*(?=\&quot;.*?((&frasl;&gt;)|(&gt;.*&lt&frasl;img&gt;))) 
```

它不依赖于定位或标签内的 src，但它确实要求您将区分大小写设置为不敏感以保持稳定。

Patjbs 版本将获取所有标签的 src，如果您正在解析包含外部内容（例如 javascript、外部 div 内容等）链接的 html，这将导致不稳定。

```
string htmlString = @"<img id="tagId" src="myTagSource.gif" name="imageName" />";
string matchString = Regex.Match(htmlString, @"(?<=<img.*?src=\")[^\"]*(?=\".*?((/>)|(>.*</img)))").Value; 
```

matchString 现在等于“myTagSource.gif”

我注意到您的输入字符串缺少一些 & （与号）来表示转义字符，例如 quot; 将没有办法（不强制逻辑查找 quot; lt; gt;）以编程方式解释这些字符。您必须对初始字符串进行替换才能将其转换为正则表达式可解释的 [is that a word?] 字符串。

因此，假设您从页面中获取所有这些字符串，您需要假设 lt; 的所有实例 成为<和所有的gt；成为>，所有quot; 变得 ”。

您也不能假设提供的数据*总是*以这种形式返回，有时字符串可能包含其他标签信息（id、名称、边框信息等）。所以我认为也许最具意识形态和最可维护的解决方案可能会略有不同。最有思想的方法是一次解析，但最易于维护的方法可能是分两步完成，首先将输入字符串转换为标准的 html 字符串，然后提取源数据。

或者，您*可以*在一次解析中执行此操作，用相应的字符替换替换我的模式中的 html 构造（假设它们使用标准编码但删除 & 符号），尽管它不太可读，并且可能会导致一些混淆对维护代码的任何人：

(?<=lt;img. *?src=\quot;)。*?(?=\quot;.*?((frasl;gt;)|(gt;.*lt;frasl;imggt;)))

**编辑：**如果事实证明他们*使用的是*标准编码，而*您*只是没有在示例中提供 & ，那么您可以在我提出的第一个模式中使用以下方法引用解码的 URL：

```
string MatchValue = Regex.Match(HttpUtility.UrlDecode(inputString), pattern).Value; 
```

这会将您从他们那里得到的字符串解码为标准字符串，用正确的字符替换转义字符，然后运行相同的模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T20:02:07.530

正则表达式根本不擅长解析 HTML（请参阅[您能否提供一些示例，说明为什么用正则表达式解析 XML 和 HTML 很困难？](https://stackoverflow.com/questions/701166)为什么）。您需要的是一个 HTML 解析器。请参阅[您能否提供一个使用您最喜欢的解析器解析 HTML 的示例？](https://stackoverflow.com/questions/773340)对于使用各种解析器的示例。

# architecture - 哪些类型的特定开发模式支持敏捷开发？

> ID：820815
> 
> 赞同：0
> 
> 时间：2009-05-04T16:31:47.490
> 
> 标签：architecture, agile

反之亦然：“什么类型的特定开发模式不支持敏捷开发？

更简洁地说：我不是在寻找“方法论”或“理论”。我说的是在敏捷的迭代过程中编写代码的特定模式。

显然，一些开发模式更适合于瀑布。其他人，为了敏捷。

我正在寻找围绕您自己编写代码的个人经历的细节。这就是为什么这不是主观的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T16:56:35.587

我认为快速应用程序开发、迭代/增量开发，甚至混沌策略都将支持敏捷方法论。

任何需要在需求阶段固化所有东西的东西都不支持敏捷方法论，例如瀑布模型、能力成熟度模型（CMMI）、牛仔编码，甚至用例驱动开发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-11-10T18:00:52.757

良好的人际关系方面：

*   一个**相互信任并欣赏他们为团队带来的不同技能的开发人员**团队。- 大多数开发人员是否觉得他们可以公开发言？如果是，那么你有这个。
*   灵活的**态度**。
*   **不需要证明他们“知道一切”的**人
***   **有足够勇气**承认错误的人。*   **愿意尝试新事物**- 在有限的参数范围内（“让我们尝试在 15 分钟内进行测试……如果它无处可去，我们将把它扔掉。”）*   **业务和开发人员之间相互尊重和热切合作**——“同一个团队”的态度。“我们都在‘信任圈’内”；-)**

 **有帮助的商业条件

*   **对方法论兴趣为零**的企业相信开发人员会继续使用它，这是一个很大的帮助。（即无干扰）
*   拥有**按使用付费的应用程序**确实有助于企业衡量软件发布对收入的影响。这使计划游戏去政治化，因为决策是基于市场的反馈。

编程语言方面：

*   运行时/调试系统，**让程序在您编辑**时持续运行（在每个开发步骤之间不会浪费时间、耗费精力的大型构建。）
*   ...您可以在其中键入一些代码并**立即根据正在运行的程序对其进行评估**。这消除了就某些代码将做什么进行辩论的需要——运行它更容易、更准确！
*   ...您可以**在签入时拥有微小的代码单元**- 例如单个方法或一个小类 - 当一些 eliphantine 源代码控制系统进行簿记时，绝对不需要等待时间
*   ...您**只需要在一个范例中思考**- 即仅在对象或函数或其他方面 - 没有 SQL、XML 或可编程模板语言或其他语言外的东西。这意味着您可以在重构时将代码库中的工作从一个地方推到另一个地方，而无需支付“复杂性费用”来跨界进入 SQL、XML 或模板或任何其他黑客语言......
*   使用**一种概念很少能完全集成的语言**（Smalltalk、Lisp、Prolog、Ruby），而不是由世界上所有语法黑客组成的语言——这使得凡人无法理解代码的语义（如 C++ 和Perl)
*   通过抛出异常或以其他方式响应而不是崩溃来容忍失败的语言意味着您可以在不停止、启动和重建的情况下进行 TDD

我已经对这些事情中的大部分进行了积极的表述，但是您可以将这些事情中的任何一个的缺席或相反的事情想象成消极的……

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T16:36:00.443

迭代开发是敏捷的必要（尽管不充分）部分，而“瀑布”不支持它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-11-10T17:37:37.450

我有一些要分享，但我不确定这些是 OP 想要列出的内容：

*   结对编程——在任何新功能上都有一对开发人员，以确保知识不会被一个人孤立。

*   测试驱动开发——首先编写测试以确保满足要求，而不是等到实现完成后再添加测试。

*   持续集成 - 拥有可以验证代码更改是否破坏现有功能的自动构建机器。

我会注意到，敏捷的方式不止一种，因为宣言对解释非常开放，并且可能会被曲解。

# winapi - RS232（Com-Port）RTS/CTS/DTR/DSR的低级控制可能吗？

> ID：820817
> 
> 赞同：9
> 
> 时间：2009-05-04T16:32:30.887
> 
> 标签：winapi, embedded, serial-port, handshaking

我想知道是否以及如何直接从 win32（旧的 C-API）控制 RS-232 握手线。

我想与一个外部硬件接口，两条简单的数据线就足以满足我的需要。

那么 - 是否有一个用于 win32 的 API 可以让我读取和写入四个状态行的状态？在正常的串行通信中，握手线由 UART 自动驱动（如果启用了硬件握手）。

我记得在 DOS 下它是微不足道的。只需直接对 UART 进行编程。这个功能是否以某种方式在win32中幸存下来？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-04T16:43:21.890

您可以使用 控制 RTS 和 DTR `SetCommState()`。您还可以设置硬件或驱动程序处理硬件流控制（CTS 和/或 DSR），或者您可以设置使用`SetCommMask()`，以便在这些信号发生变化时获取事件。

一个不错的概述在这里：http: [//msdn.microsoft.com/en-us/library/ms810467.aspx](http://msdn.microsoft.com/en-us/library/ms810467.aspx)

请注意，Win32 串行通信 API 和/或驱动程序可能很挑剔，因此请准备好对线路上发生的事情进行一些调试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-26T01:34:46.560

当我不得不做一个与 RS232 端口通信的项目时，我遇到了[这个教程。](https://web.archive.org/web/20120905123232/http://robbayer.com/files/serial-win.pdf)这是一个关于如何打开端口、设置一些属性（包括超时、读/写和关闭端口）的完整示例。尽管您的项目现在可能已经结束，但我希望它仍然有用，因为它仍保留在 SO 档案中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T16:36:59.177

您仍然可以进行类似类型的编程，以获取您需要实现设备驱动程序的受保护硬件。我认为自 1980 年代我从事相同类型的工作以来，这变得更容易了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T16:55:31.597

微软现在真的在做硬件握手吗？多年来NT、win2000和XP在硬件上没有做握手。相反，当 fifo 达到某个点时，设备驱动程序将手动更改 cts 行。这意味着导致设备驱动程序丢失数据非常简单，例如用鼠标抓住一个窗口并在屏幕周围转圈（确保在所有或部分通道上将该窗口从屏幕左侧移开）。Alt-enter 以全屏显示命令提示符是导致数据丢失的一种简单方法。或者任何其他导致足够中断延迟的东西。基本上，微软的硬件流控制不是硬件而是软件流控制，即使硬件确实具有硬件流控制功能，microsft 的驱动程序也没有设置那个位。

至于控制信号的程序，请使用 SetCommState()。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-13T06:31:04.763

有一些 USB 转串口适配器不支持 DTR/DSR/DCD 流量控制。所以这可能是你的情况。

[http://www.digi.com/support/kbase/kbaseresultdetl?id=588](http://www.digi.com/support/kbase/kbaseresultdetl?id=588)

# asp.net - 如何在IIS7上获取WEB实例的运行IP地址

> ID：820821
> 
> 赞同：2
> 
> 时间：2009-05-04T16:34:21.477
> 
> 标签：asp.net, iis-7, httpwebrequest, vista64

我的开发人员正在运行 Vista x64 IIS7。机器。

我曾经使用**Request.ServerVariables.Get("LOCAL_ADDR")**来获取解析为 192.168.1.89 之类的网站的操作实例 IP 地址，但是在切换到**Vista & IIS7**后，我开始获取 ::1 哪些人说它是IPv6。

**我怎样才能以旧方式获得它？**我们使用它来监视实例是否实际显示正确的内容。（这种监控方式很难改变）

所以黄金问题是我怎样才能**运行网络应用程序的本地 IP 地址？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T16:03:21.300

巧合的是，我找到了解决方案。它隐藏在主机文件中。

它被写在主机文件中

```
127.0.0.1       localhost
::1             localhost 
```

现在我把它改成了

```
127.0.0.1       localhost
#::1             localhost 
```

现在效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T20:08:01.603

Request.ServerVariables.Get("LOCAL_ADDR") 将返回当前 Web 应用程序的 IP 地址。

检查 IIS 中的站点配置并查看该站点绑定到的 IP 地址。如果该站点绑定到所有未分配的 IP 地址，并且您正在实际服务器上访问/调试该站点，则 ::1(localhost) 或 127.0.0.1 地址是正确的。

尝试从另一台机器连接到该站点，或者通过指定实际 IP 地址而不是主机名，看看您是否得到不同的结果。

# sql-server - 如何使用 ASP.NET MVC 链接到远程数据库？

> ID：820826
> 
> 赞同：1
> 
> 时间：2009-05-04T16:35:15.593
> 
> 标签：sql-server, asp.net-mvc

我使用在我的开发机器上运行的 SQL Sever express 2005 数据库实例启动并运行了一个 ASP.NET MVC 应用程序。但是，当应用程序部署到生产环境时，IIS 实例和 SQL Server 实例将位于不同的逻辑机器上。我不知道它们是否是不同的物理盒子，但我怀疑这很重要。

生产数据库服务器当前就位，上面有一个填充的数据库。由于我对该实例具有读取权限，因此我想将我的开发机器上的项目指向它，以确保远程数据库连接仍然有效。架构是相同的，显然，只是位置和内容不同。

我目前将项目链接到位于我的开发机器上的 .mdf 文件。我需要进行哪些更改才能将其切换到远程服务器上的数据库实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T16:57:56.163

简单的答案：在 web.config 中更改数据层（Linq to SQL？）的连接字符串以指向您的进程外数据库实例。

更详细地说，以下是我在开发框中将数据库从我的站点中拆分出来的步骤。通过执行以下操作，您可以在将两台服务器配置部署到生产之前在本地对其进行测试。

1.  [安装 SQL Server Management Studio](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=8961)
2.  打开 Management Studio 并连接到本地 SQL Server Express 实例（通常为 [boxname]/SQLEXPRESS）
3.  右键单击 Management Server 中的数据库文件夹并选择附加...
4.  在您的项目中找到您的 .mdf 文件并打开它。
5.  将新附加的数据库重命名为您想要的名称。
6.  提供您的 IIS 应用程序池在数据库权限下运行的任何服务帐户。首先在顶级 Security/Logins 文件夹下创建一个帐户，然后将该帐户添加到新数据库的 Security/Users 文件夹中。对于我的配置，我使用的是网络服务。

现在您的数据库已作为独立数据库安装在 SQL Server Express 中，您可以使用[普通的 SQL Server 连接字符串](http://www.connectionstrings.com/sql-server-2005)连接到数据库。

此时，您的开发环境正在模拟数据库和IIS进程分离的生产环境。您只需在生产中更改连接字符串以指向生产数据库。

# c# - 替换文件夹中同名的图片

> ID：820832
> 
> 赞同：0
> 
> 时间：2009-05-04T16:36:06.510
> 
> 标签：c#, asp.net, vb.net, image, directory

**A.)**当我使用代码删除文件夹 Pics 中的 Image123.jpg 时，我上传另一个图像并将该图像也重命名为 Image123.jpg 并将其放入文件夹 Pics 中，由于某种原因，新图像会显示，但它使用的尺寸我删除的图像。在此处使用中继器显示图像........

**B.）**当我只是将 Image99.jpg 复制并粘贴到我的 Pics 文件夹中时，它已经准备好包含一个 Image99.jpg，那么它当然会更改原始文件。所以由于某种原因它必须被缓存，因为当我运行我的页面时它仍然显示第一个图像。在此处使用普通的图像控件.......

为什么它在做**A**和**B** ........我该如何解决这个问题......问题**A**对我来说更重要，因为当用户单击“更改徽标”时我需要更改图像名称“ 按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T17:07:32.830

浏览器缓存图像，因此如果您替换图像，则必须更改请求图像的 url 以查看新图像。

您可以通过以下方式执行此操作：

1.  更改图像本身的名称。

2.  将查询字符串添加到您更改的 url。

如果您在 url 中添加版本号，例如`images/Image123.jpg?version=42`并在替换图像时增加版本号，浏览器将从服务器请求新图像，因为浏览器会根据完整的 url 缓存文件，而不仅仅是文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T17:14:23.440

如果确实是缓存问题，您可以执行以下操作。

以编程方式：

```
Response.Cache.SetCacheability(HttpCacheability.NoCache); 
```

声明式：

```
<%@ OutputCache Location="None" VaryByParam="None" %> 
```

通过缓存网页，您可以避免在后续请求中重新创建信息，因此请记住，这可能会对页面加载时间产生不利影响，因为缓存将被禁用。

# c# - 没有使用名称 evanmoor_sales 定义提供程序

> ID：820833
> 
> 赞同：0
> 
> 时间：2009-05-04T16:36:13.093
> 
> 标签：c#, subsonic

尝试运行我的登录页面时出现此错误。这是我的堆栈跟踪：

`[ArgumentException: No provider is defined with the name evanmoor_sales Parameter name: providerName] SubSonic.DataService.GetInstance(String providerName) in C:\svn\subsonicproject\trunk\SubSonic\DataProviders\DataService.cs:163 Emcom.Sales.SalesUser.GetTableSchema() in C:\work\2007.evan-moor.com\Sales.DataAccess.Generated\Generated\SalesUser.cs:123 Emcom.Sales.SalesUser.SetSQLProps() in C:\work\2007.evan-moor.com\Sales.DataAccess.Generated\Generated\SalesUser.cs:102 Emcom.Sales.SalesUser..ctor() in C:\work\2007.evan-moor.com\Sales.DataAccess.Generated\Generated\SalesUser.cs:73 salesreps_Login.SalesRepLogin(Object sender, EventArgs e) in c:\web\sites\dev.evan-moor.com\salesreps\salesreplogin.aspx.cs:25 System.Web.UI.WebControls.Button.OnClick(EventArgs e) +105 System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +107 System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +7 System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +11 System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +33 System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +1746`

这是我的 web.config 文件的提供者部分：

```
<SubSonicService defaultProvider="evanmoor_web">
    <providers>
        <clear/>
        <add name="evanmoor_web" type="SubSonic.SqlDataProvider, SubSonic" connectionStringName="evanmoor_web" generatedNamespace="Emcom"/>
  <add name="evanmoor_standards" type="SubSonic.SqlDataProvider, SubSonic" connectionStringName="evanmoor_standards" generatedNamespace="Ts"/>
  <add name="evanmoor_sales" type="SubSonic.SqlDataProvider, SubSonic" connectionStringName="evanmoor_sales" generatedNamespace="Emcom.Sales"/>
    </providers>
</SubSonicService> 
```

有什么建议么？我使用的是 SubSonic 2.1.0，所以它应该是最新版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-04T16:41:43.800

没关系，我偶然在我的 DataAccess 类的 App.config 中有一个空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-09-02T13:21:33.750

由于不同的原因，我也遇到了这个问题，并且需要一些搜索才能根除问题，所以我想我会分享我的解决方案。

我已经使用 defaultprovider=provider1 设置了我的 web.config，然后需要将其更改为 provider2。我在所有文件中替换了 provider1 的所有实例并运行了应用程序，但遇到了这个错误，并且确实出现了错误消息 namespace1 的详细信息，因此显然在 Visual Studio 中查找和替换是不够的。

最后，我不得不删除 Studio 在 \bin 和 \obj\debug 文件中生成的 myClass.xml 文件。尽管清理和重建了解决方案，但它们并没有得到重建，它们仍然保留对旧设置的引用。

# java - 对于 facelets，什么是 fmt:formatDate 的等价物？

> ID：820835
> 
> 赞同：1
> 
> 时间：2009-05-04T16:36:23.857
> 
> 标签：java, jsp, jstl, facelets

我正在将 JSP 网页转换为 facelets 视图处理程序。

什么相当于 fmt:formatDate 等？

我知道它不受支持。但有替代方案吗？三级实施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-04T17:18:17.720

通常在 JSF 中，您会在控件中添加一个 ( [convertDateTime](http://java.sun.com/javaee/javaserverfaces/1.2_MR1/docs/tlddocs/f/convertDateTime.html) ) 转换器：

```
<h:outputText value="#{dateConverterBean.now}">
    <f:convertDateTime type="date" dateStyle="short" />
</h:outputText> 
```

[Facelets](https://facelets.dev.java.net/nonav/docs/dev/docbook.html#taglib-available)的文档暗示它们使用相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T12:33:20.187

f:convertDateTime 转换器使用 GMT / UMT 作为时区来格式化日期/时间。这很烦人，并可能导致显示不正确的本地日期和时间。您可以使用 bean 向转换器提供时区。我建议制作自己的转换器。只需要几行代码并允许更严格的格式。

# svn - 新项目或分支？

> ID：820839
> 
> 赞同：6
> 
> 时间：2009-05-04T16:37:14.200
> 
> 标签：svn

我在 Subversion 中有一个解决方案，我现在将创建一个客户特定的版本。这个版本不太可能完全合并回主要开发中。然而，我很容易需要进入特定项目的主干中的开发和其他方式（需要回到主干的自定义项目中的开发）。

在您看来，新的自定义项目应该是与主要开发并行的分支还是同一存储库中的新项目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-04T16:39:38.280

我肯定会创建一个新的分支。如果该项目的两个变体仍然共享许多公共代码，并且它们仍然有可能重新合并在一起的可能性很小，那么我认为将它们分成两个完全独立的项目没有任何好处。

我会选择一个分支 - 如果需要，它为您提供了稍后将东西合并在一起的选项。

马克

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-04T16:40:35.720

如果它们在同一个存储库中，那么没关系。您仍然可以从一个项目树合并到另一个项目树。

否则，我的直觉会说“分支”

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-04T16:39:20.670

理论上这是一个分支。所以我建议像这样使用它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-04T16:46:09.293

我会说这是一个分支。虽然您可能不会从自定义版本合并到头部，但您可能希望将主流/头部中的代码迁移到自定义分支以升级自定义版本。虽然这可以在单独的存储库中完成，但如果它在一个地方并且当某些东西从雷达上掉下来时它往往会落后并年久失修，它就不是“可见的”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-04T16:45:55.643

由于这是对主要开发的修改，因此最好有一个分支。

分支将允许使用 svn 进行双向合并。

创建新项目需要手动同步更改。

# java - 为什么不能在 Java 中创建通用填充方法？

> ID：820840
> 
> 赞同：2
> 
> 时间：2009-05-04T16:37:22.467
> 
> 标签：java, generics

我有以下课程：

```
abstract class DTO{ }

class SubscriptionDTO extends DTO { } 
```

和以下通用方法：

```
protected void fillList(ResultSet rs, ArrayList<? extends DTO> l)
        throws BusinessLayerException {
    SubscriptionDTO bs;
    try {
        while (rs.next()){
            //initialize bs object...
            l.add(bs); //compiler error here
        }
    } catch (SQLException e) {
        e.printStackTrace();
    }

} 
```

我似乎无法理解为什么您不能创建一个通用方法来填充 DTO 子类型。我做错了什么还是设计使然？如果是这样，是否有任何解决方法？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-04T16:42:38.693

您应该使用`<? super DTO>`（或者`<? super SubscriptionDTO>`，正如[Tom Hawtin - tackline](https://stackoverflow.com/users/4725/tom-hawtin-tackline)指出的那样）作为`ArrayList`.

来自[*Effective Java*](http://java.sun.com/docs/books/effective/)的第 28 项（[示例章节](http://java.sun.com/docs/books/effective/generics.pdf)[pdf] 的第 28 页）：

> 这是一个助记符，可帮助您记住要使用的通配符类型：
> 
> **PECS 代表生产者扩展，消费者超级。**
> 
> 换句话说，如果参数化类型代表`T`生产者，则使用`<? extends T>`; 如果它代表`T`消费者，请使用`<? super T>`.

在这种情况下，`l`是一个消费者（您将对象传递给它），因此`<? super T>`类型是合适的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T16:42:57.773

想象一下下面的情况，有`Foo extends Bar`和`Zoo extends Bar`

```
List<Foo> fooList = new ArrayList<Foo>();
fooList.addAll(aBunchOfFoos());
aMethodForBarLists(fooList); 
```

然后我们有方法本身：

```
void aMethodForBarLists (List<? extends Bar> barList) {
   barList.add(new Zoo());
} 
```

这里发生的情况是，即使 Zoo 确实扩展了 Bar，您仍试图在 a 中添加 Zoo `List<Foo>`，这是为 Foos 明确制作的，并且仅适用于 Foos。

*这*就是为什么 Java 规范不允许将内容添加到Collection 中的原因 - 虽然语法*看起来*`<? extends Something>`正确，但无法确定实际的对象是否允许将内容添加到 Collection 中。

 ** * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-04T16:44:53.713

这应该有效，并且更简单：

```
protected void fillList( ResultSet rs, List<DTO> l ) throws BusinessLayerException 
{
   SubscriptionDTO bs;
   try 
   {
      while   ( rs.next() )
      {
         //initialize bs object...
         l.add( bs );
      }
    }
    catch ( SQLException e ) 
    {
       e.printStackTrace();
    } 
```

}

# visual-studio - 用于生成 Visual Studio 解决方案/项目的 API/框架

> ID：820845
> 
> 赞同：0
> 
> 时间：2009-05-04T16:38:05.303
> 
> 标签：visual-studio, automation

除了用于生成 Visual Studio 解决方案和/或项目文件的 Visual Studio 自动化 API 之外，还有人知道其他任何东西吗？项目文件是基于 MSBuild 的，因此如果必须手动生成应该可以，但解决方案文件基于专有的文本格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T16:05:48.157

也许是[树外科医生？](http://www.codeplex.com/treesurgeon)虽然我不认为这是你的意思。

# c++ - RegOpenKeyEx 在 HKEY_LOCAL_MACHINE 上失败

> ID：820846
> 
> 赞同：6
> 
> 时间：2009-05-04T16:38:17.597
> 
> 标签：c++, winapi, registry

嗨，我正在尝试读取一个注册表值，它为我提供了 firefox.exe 的路径。这存储在

```
HKEY_LOCAL_MACHINE\SOFTWARE\Mozilla\Mozilla Firefox 3.0.10\bin 
```

（版本号可以在其他地方找到）

但我似乎无法让 RegOpenKeyEx 为以下任何内容返回 ERROR_SUCCESS

```
HKEY_LOCAL_MACHINE 
```

所以这个测试失败了：

```
if(RegOpenKeyEx(HKEY_LOCAL_MACHINE,TEXT("\\SOFTWARE"),0,KEY_QUERY_VALUE,&keyHandle) == ERROR_SUCCESS) 
```

虽然此测试通过：

```
if(RegOpenKeyEx(HKEY_CLASSES_ROOT,TEXT("\\Shell"),0,KEY_QUERY_VALUE,&keyHandle) == ERROR_SUCCESS) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-05-04T17:57:11.713

以下代码在我的机器上失败，错误代码为 161，表示“路径错误”（在 winerror.h 中查找）：

```
long n = RegOpenKeyEx(HKEY_LOCAL_MACHINE,TEXT("SOFTWARE"),
                      0,KEY_QUERY_VALUE, &hk ); 
```

然后我更改了对 RegOpenKeyEx 的调用以使用“SOFTWARE”（注意没有前导斜杠）并且它起作用了：

```
#include <windows.h>
#include <iostream>
using namespace std; 

int main() {
    HKEY hk;

    // Notice that it's SOFTWARE instead of \\SOFTWARE:
    long n = RegOpenKeyEx(HKEY_LOCAL_MACHINE,TEXT("SOFTWARE"),
                      0,KEY_QUERY_VALUE, &hk );
    if ( n == ERROR_SUCCESS ) {
        cout << "OK" << endl;
    }
    else {
        cout << "Failed with value " << n << endl;
    }
} 
```

# wpf - 在 Visual Studio Express 中创建 WPF 库

> ID：820850
> 
> 赞同：6
> 
> 时间：2009-05-04T16:39:05.943
> 
> 标签：wpf, visual-studio, configuration, ide

我试图通过将经常出现的实用程序类和用户控件放入打包库中来使我的代码更可重用。IDE 使这变得困难，到目前为止，我发现它始终默认为 Windows 窗体用户控件，并禁用我从“添加新项目”对话框创建 xaml 文件等的能力。

是否可以在 IDE 环境的帮助下为类和控件创建一个库（我使用的是 VS2008 Express）？

如果是这样，在为 WPF 开发库时，我需要进行哪些更改才能从 IDE 中获得首选行为？这只是选择正确的参考组合的情况，还是我需要编辑项目文件？我对这个有点茫然。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-05T08:09:02.773

[以下是](http://dotupdate.wordpress.com/2007/12/05/how-to-add-a-wpf-control-library-template-to-visual-c-express-2008/)有关如何为此创建模板的详细分步说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T16:53:41.617

如果没有特定的“WPF 类库”选项（我想不起来，并且手边没有 Visual Studio Express 的副本），那么恐怕您将不得不修改project 文件直接让 Visual Studio 知道它是一个 WPF 项目。有关如何执行此操作的说明，请参阅[此问题。](https://stackoverflow.com/questions/450377/upgrading-a-winforms-app-to-wpf)

# php - Mod重写/清理网址问题

> ID：820856
> 
> 赞同：0
> 
> 时间：2009-05-04T16:39:34.100
> 
> 标签：php, drupal

多年来，我一直在使用 drupal 4.7 安装，并且最近出现了一个问题。也就是说，重写后的 URL 现在显示这些字符： ?q= 在每个 drupal 生成的 URL 中，如下所示：[http://sitename.com/?q=path/alias](http://sitename.com/?q=path/alias)，之前是：[http://sitename。 com/路径/别名](http://sitename.com/path/alias)。

对于为什么会发生这种情况，我最好的猜测是，我最近开始使用一些 PHP 代码在几个侧边栏中添加特定于上下文的链接样式。这是代码：

```
<?php   $alias= $_GET['q']; ?>

<a <?php $pos=strpos($alias,"1234"); // node number
if(!$pos == false) {
echo 'style="color:black"'; 
} ?> href="internal/link/alias">Internal Link</a> 
```

或者最近：

```
<?php $path = isset($_GET['q']) ? $_GET['q'] : '<front>';
$alias = url($path, array('absolute' => TRUE)); ?> 

<a <?php $pos=strpos($alias,"internal/link/alias"); 
if(!$pos == false) {
echo 'style="color:black"';
} ?> href="internal/link/alias">Internal Link</a> 
```

这可能是问题吗？如果是这样，关于修复的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-09T07:34:41.037

进入 admin/settings 并确保 Clean URLs 已打开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T17:20:34.687

我在想你的干净网址刚刚坏了。当您没有打开干净的 URL 时，您的所有 URL 将看起来像`http://example.com/?q=/foo/bar/baz`. 重写规则将请求`http://example.com/foo/bar/baz` **转换** `http://example.com/?q=/foo/bar/baz`为内部处理。

您需要返回并确保您的重写规则仍然有效（您甚至可以去`http://example.com/foo/bar/bazz`吗？）并且 Drupal 已打开干净的 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T16:53:23.723

我认为您的代码段不是造成它的原因。它只从数据库中读取；它不会更改 URL。mod_rewrite 是否仍然启用？这可能是由最近对服务器配置的更改引起的。检查 的输出`phpinfo()`。

顺便说一下，选项`$absolute`for在 Drupal 4.7`url()`中[作为单独的参数传递](http://api.drupal.org/api/function/url/4.7)，而不是在`$options`数组中。你的电话应该是：

```
url($path, $absolute=TRUE); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-15T16:38:18.010

尝试以下操作：

1.  再次将未修改的 .htaccess 文件上传到站点的根目录

2.  确保你的 apache 有可用的 mod_rewrite。如果您有 shell 访问权限并且它是一台 Ubuntu/Debian 机器，那么就这样做

    a2enmod 重写

3.  检查是否在 admin/settings 上启用了该选项

4.  在根文件夹中创建一个简单的 .php 文件并键入：

    phpinfo();

然后看看模块是否正常工作。

# c++ - 确定对象是否在 std::set 中

> ID：820859
> 
> 赞同：3
> 
> 时间：2009-05-04T16:40:27.903
> 
> 标签：c++, stl, set

我试图确定一个对象是否已经包含在`std::set`. 根据 msdn （和其他来源），如果 set::find 函数`end()`没有找到您要求的元素，它应该返回。

但是，当我实现如下代码时，会改为`set::find`返回 junk ( )。`0xbaadf00d`

```
set<Cell*> cellSet;

Cell* cell = new Cell();    

if (cellSet.find(cell) == cellSet.end())
{
    ...
} 
```

我正确使用它吗？我正在使用 Visual C++ 2005。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-04T16:48:18.480

您发布的代码将始终执行 , 中的代码`if`，并且`0xbaadf00d` **是**实现的“one-past-the-end”标记。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-04T17:12:43.460

使用 stl set 时，我喜欢使用[count](http://cplusplus.com/reference/stl/set/count/)函数来确定成员资格。我认为这使代码更易于阅读。

```
set<Cell*> cellSet;

Cell* cell = new Cell();    

if (cellSet.count(cell) == 0)
{
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T16:45:06.537

callSet.end() 也有值 0xbaadf00d 吗？

**编辑**

我在 VS2008 中运行了这个示例代码，一切都按预期工作。find 函数返回一个指向原始值的迭代器。

你到底看到了什么行为？它是返回 end() 还是返回集合中的另一个位置？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T17:23:12.247

一个简单的错误是您应该测试不等于结束。

```
set<Cell*> cellSet;
Cell* cell = new Cell();
if (cellSet.find(cell) != cellSet.end())     // Test NOT EQUAL to end
{
     // Found item in set.
} 
```

但是您还应该注意，您不是在比较实际的 Cell 值，而是比较指向 Cell 对象的指针（这可能是您想要的，也可能不是您想要的）。通常在 C++ 中，您不倾向于将指针存储在容器中，因为指针没有隐含的所有权，但有时可以。

要实际比较对象，您需要使用 find_if() 并传递谓词（函子）。

```
struct PointerCellTest
{
    Cell&  m_lhs;
    PointerCellTest(Cell* lhs): m_lhs(lhs) {}
    bool operator()(Cell* rhs)
    {
         return lhs.<PLOP> == rhs.<PLOP>
    }
};

if(find_if(cellSet.begin(),cellSet.end(),PointerCellTest(cell)) != cellSet.end())
{
     // Found item in set.
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-04T16:57:53.510

尝试仅编译和运行*您*提供的代码片段，我保证您会发现它可以毫无问题地执行。这个问题几乎可以肯定是由于程序中其他地方发生的内存分配错误，例如引用未初始化的指针或指向已`delete`d 对象的指针。

你熟悉 C++ 容器如何管理它们的对象吗？他们不会为您删除指针。在可能的情况下，使用对象容器而不是指向对象的指针总是更安全。（在某些情况下，指针容器是必要的——尤其是当您希望容器存储来自单个类层次结构的不同类型的对象时。）

# c++ - 如何控制在 Windows XP 中图标化程序时发生的情况

> ID：820865
> 
> 赞同：0
> 
> 时间：2009-05-04T16:41:55.903
> 
> 标签：c++, icons, real-time, state

我有一个需要连续运行的实时程序。当程序被图标化时，它似乎有时会停止更新，有时会在恢复到活动状态时中止。有没有一种方法可以控制我的程序图标化时会发生什么？我正在使用 Visual Studio 2005。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T17:25:43.710

我窃取了lothar 的评论并将其作为答案提出：您可能希望将实时程序实现为Windows 服务。如果您需要在用户控制下启动和停止它，您可以提供一个 GUI（不需要一直运行）来启动、暂停、继续和停止服务。作为一项服务，你的程序不太可能被用户在计算机上做的事情打断，包括注销之类的事情。

# windows - 是否可以在 VB.NET 中复制以下凭据过程？

> ID：820866
> 
> 赞同：3
> 
> 时间：2009-05-04T16:41:59.837
> 
> 标签：windows, vb.net, impersonation, comobject

# 解决方案（有点）：

事实证明，这种具有 .NET 安全性的模拟只允许应用程序级别的访问。由于 COM 对象处于系统级别，因此模拟用户仍然无法实例化它。我通过右键单击可执行文件并选择“运行方式...”来解决这个问题，程序运行良好。我发现启动具有系统访问权限的程序（假设您正在运行它的用户具有这些凭据）。现在我正在创建一个外部程序，它将使用这种方法启动这个应用程序。

感谢您的提示：D

* * *

我在虚拟机上安装了 Windows XP。它是我域的一部分，但登录用户只是本地用户。显然，如果我尝试访问网络共享，它会提示输入用户/密码：

[![替代文字](https://i.stack.imgur.com/PgQAE.jpg)](https://i.stack.imgur.com/PgQAE.jpg)

我在虚拟机上测试的程序使用 COM 对象与来自另一个程序的数据进行交互。如果我不冒充，我会收到错误，因为我没有正确的凭据。

我对此事进行了一些研究，发现许多网站都有大量的 VB.NET 信息。我编写的代码遇到的问题是我可以访问网络资源，但我无法实例化 COM 对象。

如果我在尝试实例化之前填写并提交凭据提示（上图），它可以正常工作。这让我相信 WinXP 凭据提示一定有一些我没有做的事情。以下是我用于模拟的代码：

```
Public Sub BeginImpersonation()
    Const LOGON32_PROVIDER_DEFAULT As Integer = 0
    Const LOGON32_LOGON_INTERACTIVE As Integer = 2
    Const SecurityImpersonation As Integer = 2

    Dim win32ErrorNumber As Integer

    _tokenHandle = IntPtr.Zero
    _dupeTokenHandle = IntPtr.Zero

    If Not LogonUser(_username, _domainname, _password, LOGON32_LOGON_INTERACTIVE, LOGON32_PROVIDER_DEFAULT, _tokenHandle) Then
        win32ErrorNumber = System.Runtime.InteropServices.Marshal.GetLastWin32Error()
        Throw New ImpersonationException(win32ErrorNumber, GetErrorMessage(win32ErrorNumber), _username, _domainname)
    End If

    If Not DuplicateToken(_tokenHandle, SecurityImpersonation, _dupeTokenHandle) Then
        win32ErrorNumber = System.Runtime.InteropServices.Marshal.GetLastWin32Error()

        CloseHandle(_tokenHandle)
        Throw New ImpersonationException(win32ErrorNumber, "Unable to duplicate token!", _username, _domainname)
    End If

    Dim newId As New System.Security.Principal.WindowsIdentity(_dupeTokenHandle)
    _impersonatedUser = newId.Impersonate()
    _impersonating = True
End Sub 
```

我也尝试向模拟方法发送不同的标志，但似乎没有任何效果。以下是我发现的不同标志：

```
Enum LOGON32_LOGON
    INTERACTIVE = 2
    NETWORK = 3
    BATCH = 4
    SERVICE = 5
    UNLOCK = 7
    NETWORK_CLEARTEXT = 8
    NEW_CREDENTIALS = 9
End Enum
Enum LOGON32_PROVIDER
    [DEFAULT] = 0
    WINNT35 = 1
    WINNT40 = 2
    WINNT50 = 3
End Enum
Enum SECURITY_LEVEL
    Anonymous = 0
    Identification = 1
    Impersonation = 2
    Delegation = 3
End Enum 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-05T05:06:40.553

我之前遇到过这种情况，并使用了两种不同的解决方案 - 最简单的是使用第三方应用程序：TqcRunas：[http](http://www.quimeras.com/Products/products.asp) ://www.quimeras.com/Products/products.asp ，它允许您将所需的凭据打包成加密的文件。但是，如果密码被迫过期，那就很痛苦了。

我使用的另一个解决方案是使用替代凭据调用新进程：

```
 Dim myProcessStartInfo As ProcessStartInfo = New ProcessStartInfo

    With myProcessStartInfo

        .FileName = "file path and name"

        .Domain = "domainname"
        .UserName = "username"

        'password needs to be a SerureString
        Using NewPassword As New Security.SecureString
            With NewPassword
                For Each c As Char In "password".ToCharArray
                    .AppendChar(c)
                Next c
                .MakeReadOnly()
            End With
            .Password = NewPassword.Copy
        End Using

        'UseShellExecute must be false for impersonated process
        .UseShellExecute = False

    End With

    Using Process As New System.Diagnostics.Process
        With Process
            .StartInfo = myProcessStartInfo
            .Start()
        End With
    End Using 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T21:08:57.400

根据您的定义，我使用

```
LogonUser(_username, _domainname, _password, LOGON32_LOGON_NEW_CREDENTIALS, LOGON32_PROVIDER_WINNT50, _tokenHandle) 
```

在我通过网络进行身份验证的代码中。我正在模拟远程机器上的本地用户，就像你一样。然而，这是很久以前的事了，我不记得使用这些值的理由。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T02:28:44.150

我做了类似的事情来映射网络驱动器以在机器之间复制文件。我没有写代码，但它和你的几乎一样，除了两件事：

*   在 Impersonate 方法返回后，我使用 CloseHandle 例程关闭两个标记，然后退出我的模拟方法。

*   在模仿者的顶部发生的第一件事是调用 RevertToSelf，大概是为了取消任何以前的模仿。

我不知道他们是否会有所作为，但值得一试。以下是相关声明：

```
Declare Auto Function CloseHandle Lib "kernel32.dll" (ByVal handle As IntPtr) As Long
Declare Auto Function RevertToSelf Lib "advapi32.dll" () As Long 
```

# wpf - WPF - 按下CTRL + SHIFT时如何捕获？

> ID：820874
> 
> 赞同：4
> 
> 时间：2009-05-04T16:44:38.940
> 
> 标签：wpf, keyboard, transparency, opacity

当用户单击左 CTRL+ 左 SHIFT 时，我想让整个应用程序半透明（如 VS2008 的智能感知下拉菜单）。如果我在 KeyUp 事件上编写代码，我可以捕获两个键都被按下，但是透明效果应该只在按下键时才有效。当它们被释放时，不透明度应该回到 100%。我想要的行为实际上是 KeyDown 事件，但我无法捕获 KeyDown 上的两个键，可以吗？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-04T16:57:51.030

使用[`Keyboard`](http://msdn.microsoft.com/en-us/library/system.windows.input.keyboard.aspx)类的静态方法，专门[`IsKeyDown()`](http://msdn.microsoft.com/en-us/library/system.windows.input.keyboard.iskeydown.aspx)检查您感兴趣的键的状态。

`KeyDown`你可以使用它来启用半透明，`KeyUp`你可以再次禁用效果。如果您正在使用它，您可以自己保存密钥的状态并对其进行操作。

# groovy - 在 Grails 中使用 java 类

> ID：820887
> 
> 赞同：7
> 
> 时间：2009-05-04T16:47:33.753
> 
> 标签：groovy, grails

我有一个 Java\Spring\Hibernate 应用程序 - 包含基本上是 Hibernate POJO 的域类

我认为有一个功能可以在 Grails 中很好地编写。

我希望重用我在主 Java 应用程序中创建的域类

最好的方法是什么？

我应该编写扩展 Java 类的新域类吗？这听起来很俗气或者我可以从 Java 域类中“生成”控制器吗？

在 Grails\Groovy 中重用 Java 域对象的最佳实践是什么？我相信肯定有其他人在 grails\groovy 中编写一些片段

如果您知道有关此类集成的教程-那将是很棒的！！！

PS：我是 grails-groovy 的新手，所以可能会错过明显的内容。谢谢 ！！！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-05-22T04:00:55.117

了解 Groovy 和 Grails 在与现有 Java 代码集成方面的出色表现，我想我可能比 Michael 对您的选择更加乐观。

首先是您已经在使用 Spring 和 Hibernate，并且由于您的域类已经是 POJO，它们应该很容易集成。您可能拥有的任何 Spring bean 都可以像往常一样在 XML 文件中指定（在 中`grails-app/conf/spring/resources.xml`），或者更简单地使用 Grails 的[Spring bean 构建器](http://www.grails.org/Spring+Bean+Builder)特性。然后可以在任何控制器、视图、服务等中按名称访问它们，并像往常一样使用它们。

在我看来，以下是用于集成域类和数据库模式的选项：

*   绕过 GORM 并完全按照您已经在做的方式加载/保存您的域对象。

    Grails 不会强迫您使用 GORM，所以这应该非常简单：创建一段`.jar`Java 代码（如果您还没有的话）并将其放到 Grails 应用程序的`lib`目录中。如果您的 Java 项目是 Maven 化的，那就更容易了：Grails 1.1 与 Maven 一起工作，因此您可以`pom.xml`为您的 Grails 应用程序创建一个并添加您的 Java 项目作为依赖项，就像在任何其他 (Java) 项目中一样。

    无论哪种方式，您都可以`import`上课（以及任何辅助课程）并照常进行。由于 Groovy 与 Java 的紧密集成，您将能够像在 Java 项目中一样创建对象、从数据库加载它们、修改它们、保存它们、验证它们等等。您不会以这种方式获得 GORM 的所有便利，但您将拥有以对您来说已经有意义的方式处理对象的优势（除了由于 Groovy 可能使用更少的代码）。您总是可以先尝试此选项以使某些东西起作用，然后如果当时似乎有意义，则稍后再考虑其他选项之一。

    如果您确实尝试此选项，则有一个提示：将实际的持久性代码抽象为 Grails 服务（`StorageService`也许）并让您的控制器在其上调用方法，而不是直接处理持久性。这样，如果需要，您可以用其他东西替换该服务，并且只要您保持相同的界面，您的控制器就不会受到影响。

*   创建新的 Grails 域类作为现有 Java 类的子类。

    如果您的类已经被编写为适当的 bean，这可能非常简单，即所有属性都使用 getter/setter 方法。Grails 将看到这些继承的属性，就像它们是用更简单的 Groovy 风格编写的一样。您将能够指定如何验证每个属性，使用简单的验证检查（非 null、非空白等）或使用执行更复杂事情的闭包，可能调用其 POJO 超类中的现有方法。

    您几乎肯定需要通过[GORM 映射 DSL](http://www.grails.org/GORM+-+Mapping+DSL)调整映射以适应您现有数据库模式的实际情况。关系可能会变得棘手。例如，您可能有其他一些解决方案，其中 GORM 需要一个连接表，尽管甚至可能有一种方法可以解决诸如此类的差异。我建议尽可能多地学习 GORM 及其映射 DSL，然后尝试一些你的类，看看这是否是一个可行的选择。

*   让 Grails 直接使用您现有的 POJO 和 Hibernate 映射。

    我自己没有尝试过，但根据 Grails 的[Hibernate Integration 页面](http://www.grails.org/Hibernate+Integration)，这应该是可能的：“Grails 还允许您用 Java 编写域模型或重用已使用 Hibernate 映射的现有域模型。所有你要做的就是把必要的'hibernate.cfg.xml'文件和相应的映射文件放在'%PROJECT_HOME%/grails-app/conf/hibernate'目录下。你仍然可以调用所有的动态持久化和GORM 中允许的查询方法！”

    谷歌搜索“gorm legacy”会发现许多有用的讨论和示例，例如Glen Smith（即将发布的*Grails in Action*的合著者）的[这篇博客文章](http://blogs.bytecode.com.au/glen/2008/11/07/san-gria-update--mapping-the-legacy-db-from-hell.html)，其中他展示了一个用于集成的 Hibernate 映射文件与“来自地狱的遗留数据库”。*Grails in Action*有一章标题为“高级 GORM Kungfu”，承诺对此主题进行详细讨论。我有这本书的预发行 PDF，虽然我还没有读到那一章，但到目前为止我读到的内容非常好，而且这本书涵盖了许多其他 Grails 书籍中没有充分讨论的主题.

 **抱歉，我无法就最后一个选项提供任何个人经验，但它听起来确实可行（而且很有希望）。无论您选择哪个选项，让我们知道结果如何！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-04T16:59:58.200

您真的想要/需要使用 Grails 而不仅仅是 Groovy？

Grails 确实不是您可以用来将部件添加到现有 Web 应用程序的东西。整个“约定优于配置”方法意味着您几乎必须遵守 Grails 的规则，否则使用它毫无意义。其中一个规则是域对象是被 Grails 运行时大量“增强”的 Groovy 类。

有可能让它们扩展现有的 Java 类，但我不会打赌——你现有应用程序的所有 Spring 和 Hibernate 部分都必须被丢弃，或者至少你必须花费很多努力使它们在 Grails 中工作。您将与框架抗争，而不是从中获利。

IMO你有两个选择：

*   在 Grails 中从头开始重写您的应用程序，同时尽可能多地重用现有代码。
*   保持您的应用程序不变，并在 Groovy 中添加新内容，而无需使用 Grails。

后者在您的情况下可能更好。Grails 旨在非常快速地创建新的 Web 应用程序，这就是它的亮点。向现有应用程序添加东西并不是它的目的。

**编辑：** 关于评论中的澄清：如果您打算基本上为另一个应用程序使用的数据编写数据输入/维护前端，并将数据库作为它们之间唯一的通信渠道，那么这实际上可能与 Grails 很好地配合；它当然可以配置为使用现有的 DB 模式，而不是从域类中创建自己的模式（尽管后者的工作量较少）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-14T23:57:29.240

这篇文章提供了一些关于使用 grails[在 Web 框架中包装现有 Java 类的](http://www.itexto.net/devkico/?p=333)建议。

# java - Java RTSP 客户端/服务器库

> ID：820888
> 
> 赞同：14
> 
> 时间：2009-05-04T16:47:48.807
> 
> 标签：java, media, rtsp

有人知道好的 RTSP 客户端/服务器 Java 库吗？

在 Google 上搜索显示 JMF，这是非常过时的。

谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2010-07-07T09:41:04.640

如果您*仍然*感兴趣，[Netty](http://www.jboss.org/netty)从 3.2 版开始提供 RTSP 支持。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-01-19T07:27:16.683

您可以使用 Netty NIO 框架编写自己的 RTSP 服务器/客户端实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-12-11T22:37:46.767

而且，我想你已经知道了，你可以使用[Xuggler](http://www.xuggle.com/xuggler) :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-11T10:27:37.357

前段时间我编写了 android rtsp 流式客户端（android 可以流式传输到媒体服务器，在那种特殊情况下是 wowza）。这种方法只有几个棘手的时刻：

*   它基于unix套接字和解析设备生成的mp4的已知技巧，以便从中获取NALU；
*   当两个媒体记录器（用于视频和音频）用于获取媒体时，音频和视频的时间戳同步在 android 上确实不是微不足道的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-04T23:52:59.363

您可以尝试使用[FMJ](http://fmj-sf.net/ "FMJ")。它是一组库，将许多现代编解码器包装在 Java 接口中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-13T06:29:33.053

RTSP协议没有java实现。您必须自己使用 NIO 框架（MINA、GRIZZLY、NETTY...），这是一个可能的解决方案。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-09-23T22:54:13.790

Red5 有一些支持或将支持 RTSP，并且是基于 Java 的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-09T15:13:24.720

看看 Gstreamer。我为 RTSP 客户端创建了一个 Java 代码。并且还在java上的RTSP服务器[rtsp流上发布了链接](https://stackoverflow.com/questions/4039801/rtsp-streaming-on-java/7475559#7475559)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2010-10-04T11:19:46.977

您可以在 vlcj 和 JNA 中使用 vlc（Videolan 客户端）

# html - IE 7/8 将 Iinline (Floated Divs) 渲染为块：宽度不适应内容？

> ID：820894
> 
> 赞同：0
> 
> 时间：2009-05-04T16:49:52.297
> 
> 标签：html, css, internet-explorer, width, css-float

我有一个横跨整个页面的块元素 (DIV)。它包含多个可变宽度的浮动 DIV。这个元素可以存在于许多网页上（任何人都可以把它放在他们的网站上）。在所有站点的 FF 中，它都正确呈现，浮动的 DIV 仅与其内部内容一样宽。在 IE 中，它有时可以工作——但在其他网站上却不行，而是将每个浮动 DIV 拉伸到其父级的宽度，这是不应该的。附上一张图片来进一步举例说明（红色DIV是容器，黑色DIV是浮动的）。

[http://img8.imageshack.us/img8/4734/screenrrl.jpg](http://img8.imageshack.us/img8/4734/screenrrl.jpg) （图像经过 Photoshop 处理，不是实际的 HTML 渲染）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T22:34:19.583

找到了！问题是我使用单个 DIV 来清除父级中的所有元素。IE 中的某些渲染模式对此存在问题。相反，我通过向父级添加一个 clearfix 类来替换它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T23:27:19.690

您可以将此 clearfix 用于 ul （我想它在屏幕截图中使用）：

```
#list { overflow: hidden; zoom: 1; } 
```

而不是“清除：两者；”。

# c# - WPF 所见即所得编辑器

> ID：820895
> 
> 赞同：2
> 
> 时间：2009-05-04T16:50:56.570
> 
> 标签：c#, wpf, browser, wysiwyg

我使用 windows 窗体控件创建了一个所见即所得编辑器作为标准 C# 程序。除了WPF，我想做同样的事情。

在我的旧应用程序中，我做了这样的事情。

```
using mshtml;
private IHTMLDocument2 doc;

...

HTMLeditor.DocumentText =

"<html><body></body></html>"; 

doc = HTMLeditor.Document.DomDocument as IHTMLDocument2; 

doc.designMode = "On"; 
```

这允许在编辑器上使用 Document.ExecCommand。

这在 WPF 中是如何实现的？它看起来不像 WPF 中的 WebBrowser 控件允许设计模式。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-04T18:10:01.747

尝试这个：

```
public MyControl()
{
    InitializeComponent();

    editor.Navigated += new NavigatedEventHandler(editor_Navigated);
    editor.NavigateToString("<html><body></body></html>");
}

void editor_Navigated(object sender, NavigationEventArgs e)
{
    var doc = editor.Document as IHTMLDocument2;

    if (doc != null)
        doc.designMode = "On";
} 
```

**编辑：**其中编辑器是一个 WebBrowser 控件。

# c# - 列表.Contains Expression Tree I would like to build an Expression that would equate to expected... Expression<Func<ReferencedEntity, bool>> expected = (ReferencedEntity referencedEntity) => foreignKey 问问题 问问题 2009-05-04T16:51:13.200 5537 次 This question shows research effort; it is useful and clear 4 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. c#linqlambda 4 2 回答 2 This answer is useful 12 如果没有塞缪尔的建议，这是我无法完成的解决方案...... /// <summary> /// /// </summary> /// <param name="foreignKeys"></param> /// <returns></returns> private Expression<Func<TReferencedEntity, bool>> BuildForeignKeysContainsPredicate(List<object> foreignKeys, string primaryKey) { Expression<Func<TReferencedEntity, bool>> result = default(Expression<Func<TReferencedEntity, bool>>); try { ParameterExpression entityParameter = Expression.Parameter(typeof(TReferencedEntity), "referencedEntity"); ConstantExpression foreignKeysParameter = Expression.Constant(foreignKeys, typeof(List<object>)); MemberExpression memberExpression = Expression.Property(entityParameter, primaryKey); Expression convertExpression = Expression.Convert(memberExpression, typeof(object)); MethodCallExpression containsExpression = Expression.Call(foreignKeysParameter , "Contains", new Type[] { }, convertExpression); result = Expression.Lambda<Func<TReferencedEntity, bool>>(containsExpression, entityParameter); } catch (Exception ex) { throw ex; } return result; } 于 2009-05-04T17:26:22.490 回答 This answer is useful 8 我不知道解决方案，但我知道你怎么能得到它。Expression<Func<ReferencedEntity, bool>>创建一个接受 an并将其传递给您的 lambda的虚拟函数。并且使用调试器，您可以检查编译器如何为您创建表达式。 于 2009-05-04T16:55:40.723 回答 Related 0 java - Android AutoCompleteTextView 上的指针 2 javascript - Chrome console.log(elementID) 输出控制台中的元素 0 algorithm - 如何计算点密度更大的距离？ 1 ruby - 有没有办法通知 SSLSocket (Ruby) 中的新数据可用？ 2 jquery - 随着宽度的增加自动增加列数 2 durandal - 如何检测何时在 Durandal 中加载了组合的 html 文件（在激活器激活新项目后） 3 javascript - 添加对象值 Javascript 1 javascript - 使用javascript在同一页面上调用多个函数 1 python-3.x - 没有 .zip 导入的交织列表 2 regex - 正则表达式在在线正则表达式测试器中工作，但不在 mod-rewrite 中 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：820896
> 
> 赞同：4
> 
> 时间：
> 
> 标签：c#, linq, lambda

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-04T17:26:22.490

如果没有塞缪尔的建议，这是我无法完成的解决方案......

```
 /// <summary>
    /// 
    /// </summary>
    /// <param name="foreignKeys"></param>
    /// <returns></returns>
    private Expression<Func<TReferencedEntity, bool>> BuildForeignKeysContainsPredicate(List<object> foreignKeys, string primaryKey)
    {
        Expression<Func<TReferencedEntity, bool>> result = default(Expression<Func<TReferencedEntity, bool>>);

        try
        {
            ParameterExpression entityParameter = Expression.Parameter(typeof(TReferencedEntity), "referencedEntity");
            ConstantExpression foreignKeysParameter = Expression.Constant(foreignKeys, typeof(List<object>));
            MemberExpression memberExpression = Expression.Property(entityParameter, primaryKey);
            Expression convertExpression = Expression.Convert(memberExpression, typeof(object));
            MethodCallExpression containsExpression = Expression.Call(foreignKeysParameter
                , "Contains", new Type[] { }, convertExpression);

            result = Expression.Lambda<Func<TReferencedEntity, bool>>(containsExpression, entityParameter);

        }
        catch (Exception ex)
        {
            throw ex;
        }

        return result;
    } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-04T16:55:40.723

我不知道解决方案，但我知道你怎么能得到它。`Expression<Func<ReferencedEntity, bool>>`创建一个接受 an并将其传递给您的 lambda的虚拟函数。并且使用调试器，您可以检查编译器如何为您创建表达式。

# visual-studio-2008 - 为 Windows 服务创建 MSI 安装程序

> ID：820899
> 
> 赞同：20
> 
> 时间：2009-05-04T16:51:52.837
> 
> 标签：visual-studio-2008, windows-services, windows-installer

我在 Visual Studio 2008 中有一个 Windows 服务项目。我还添加了设置和部署项目。不幸的是，当我安装它时，该服务没有显示在服务 MMC 管理单元中。

我已经将 ProjectInstaller 添加到服务项目中，并且已经按照[此处](http://www.branded3.com/blogs/c-windows-services-creating-an-msi-installer/)的说明进行操作。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-04T17:42:06.413

您正在寻找的（我可以看到那篇文章对此一无所知）是一个 ProjectInstaller 类。如果您在设计视图中打开您的服务，您可以右键单击并选择“添加安装程序”。这会为您的项目添加一个类，默认情况下（我认为）ProjectInstaller.cs。在设计视图中，您将看到默认名称为 ServiceProcessInstaller1 和 ServiceInstaller1 的两个项目。更改每个您希望服务在哪个帐户下运行的属性、服务名称、描述等。

然后，在您的 MSI 项目中，单击自定义操作编辑器图标并将“YourServiceProject 的主要输出”添加到所有操作，安装、提交、回滚和卸载。

这是[Microsoft 的较早演练](http://support.microsoft.com/kb/317421)。

祝你好运。

# c# - 如何使用 Rhino Mocks 模拟 MEF 导出？

> ID：820900
> 
> 赞同：4
> 
> 时间：2009-05-04T16:52:15.567
> 
> 标签：c#, .net, rhino-mocks, mef

参考 Managed Extensibility Framework (MEF)，我正在尝试研究如何使用模拟创建干净的测试。

我有一个出口组件，它有三个**私人**进口。每个导入的对象（字段）都需要被模拟。鉴于 CompositionContainer 使用花哨的反射策略来设置可组合部分的导入私有字段，即使在单元测试中，我也需要使用容器来设置这些字段值。

如何在运行时告诉容器接受我用 Rhino Mocks 创建的动态对象作为有效导出，以便它可以用于满足我正在测试的组件中的导入？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-04T17:43:01.437

我的问题已在[这里](http://mef.codeplex.com/Thread/View.aspx?ThreadId=55271)得到解答。

* * *

嗨内森

这里有几个不同的选择。

1.  使用批处理，您可以调用 AddExportedObject 方法将模拟实例添加到容器中。AddExportedObject 允许您为要添加的实例指定合同。即batch.AddExportedObject(mockLogger, typeof(ILogger));

2.  您还可以创建自定义导出提供程序以允许您添加模拟实例。如果您点击此链接，这里有一些我使用的实用程序。[http://pastie.org/467842](http://pastie.org/467842)。您会在其中找到 FakeExportProvider 以及 FakeExportDefinitions。FakeExportDefinitions 为实例提供一个函数。这意味着您可以向它传递一个实例，甚至可以直接创建一个模拟。

这是用于说明用法的示例代码。

```
 protected override void Context()
    {
        MockCache = MockRepository.GenerateStub<ICache>();
        var metadata = new Dictionary<string, object> ()
        var cacheDefinition = new FakeInstanceExportDefinition(typeof(ICache), MockCache, metadata);
        FakeProvider = new FakeExportProvider(f => ((FakeInstanceExportDefinition)f).Instance);
        FakeProvider.AddExportDefinitions(cacheDefinition);
        CacheExport = FakeProvider.GetExport<ICache>();
    } 
```

现在上面我直接查询导出提供程序。但是，我们的容器允许在其构造中传入一个导出提供程序。所以你可以这样做...

var container = new CompositionContainer(null, FakeProvider).

HTH格伦

# javascript - 如何为 XMLHTTPRequest 指定外部网站

> ID：820905
> 
> 赞同：4
> 
> 时间：2009-05-04T16:53:33.910
> 
> 标签：javascript, http, xmlhttprequest

在 javascript 中使用 XMLHTTPRequest 时，我想将其发送到外部网站，而不是托管 .js 文件的网站。要将其发送到当前服务器上的 test.php，我会使用

```
request.open("POST", "test.php", true); 
```

但是对于第二个争论，我如何将其发送到另一个网站。“example.com/test.php”在当前服务器上查找文件，而“ [http://example.com/test.php](http://example.com/test.php) ”似乎完全失败了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-04T16:59:39.077

出于安全原因，您不能这样做。请参阅 JavaScript 的[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)。

有一些利用浏览器错误或极端情况的解决方法，但不建议使用它们。

最好的方法是使用服务器端代理来接收 Ajax 请求，然后将 HTTP 请求发送到其他服务器。这应该通过清理输入并将发送的请求类型和联系的服务器列入白名单来仔细实施。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-04T16:56:06.977

这听起来像是[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)的一个糟糕案例，我的朋友 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T17:01:31.817

您不能（在大多数情况下）使用 XmlHttpRequest 从外部网站获取数据。但是，您可以做的是动态创建 SCRIPT 标记并引用外部地址。[jQuery](http://jquery.com)在功能上将其包装为 ajax 处理的一部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-04T19:37:28.773

确实可以。虽然不在任何浏览器中。

在 Internet Explorer 8.0 中有[XDomainRequest](http://msdn.microsoft.com/en-us/library/cc288060(VS.85).aspx)，这是一个启用跨域请求的对象。您需要通过首先使用“*”或请求者域名发送 Access-Control-Allow-Origin 标头来正确处理服务器上使用此对象发出的请求。

既然您无论如何都在做一些 hacky 的事情，为什么不先尝试在 IE8 上使用它呢？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-03T21:30:58.337

如果您可以控制服务器，则可以在 HTTP 回复中使用此标头，尽管它可能不适用于所有浏览器。

```
Access-Control-Allow-Origin: * 
```

# c# - 重新定义 C# 关键字？

> ID：820908
> 
> 赞同：4
> 
> 时间：2009-05-04T16:53:56.750
> 
> 标签：c#, .net

是否可以重新定义 C# 关键字，例如`int`使用 Int64 而不是 Int32？

如果没有，怎么能做到这一点？我希望能够灵活地重新定义我使用的 int，所以稍后我可以根据需要将其更改为 int64，而不是手动替换所有 int 值。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-04T16:55:25.420

不，这是不可能的，你真的不应该这样做。将关键字重新定义为自定义值只会降低您的代码的可读性和可维护性。被介绍到您的代码库的人们将不得不忘记他们所知道的关于 C# 默认值的所有内容并学习*您的*默认值。这不是制作可维护代码库的好方法。

您应该考虑的是创建一个新的类型名称并使用“使用别名”在您的代码库中重定向该类型。

```
using FexibleInt = System.Int32; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-04T16:55:14.983

添加

```
using MyIntType = System.Int64; 
```

声明后`namespace`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T16:55:54.827

抱歉 - 这不能使用 C# 完成，除非您在编译之前将所有文件通过预处理器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-04T16:56:04.310

我不这么认为。您是否尝试在 c++ 中具有与 typedef 相同的功能？

您可以做的一件事是将 int 封装到自定义的类/结构中。

或者

使用 MyIntType = System.Int64;

# c# - 获取应用程序的窗口句柄

> ID：820909
> 
> 赞同：16
> 
> 时间：2009-05-04T16:54:04.237
> 
> 标签：c#, .net, winapi, handle

我正在构建一个应用程序，给另一个应用程序 mainWindowhandle 它收集有关窗口状态的信息。我收集有关子窗口的信息没有问题，但我无法访问应用程序的其他打开窗口甚至菜单。有没有办法获取应用程序的所有窗口句柄？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-04T17:01:45.293

您可以做`Process.MainWindowHandle`看起来要做的事情：使用 P/Invoke 调用该[`EnumWindows`](http://pinvoke.net/default.aspx/user32/EnumWindows.html)函数，该函数为系统中的每个顶级窗口调用一个回调方法。

在您的回调中，调用[`GetWindowThreadProcessId`](http://pinvoke.net/default.aspx/user32/GetWindowThreadProcessId.html)并将窗口的进程 ID 与`Process.Id`;进行比较 如果进程 ID 匹配，则将窗口句柄添加到列表中。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-04T17:38:33.757

首先，您必须获得应用程序主窗口的窗口句柄。

```
 [DllImport("user32.dll", SetLastError = true)]
 static extern IntPtr FindWindow(string lpClassName, string lpWindowName);

 IntPtr hWnd = (IntPtr)FindWindow(windowName, null); 
```

然后，您可以使用此句柄来获取所有子窗口：

```
[DllImport("user32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool EnumChildWindows(IntPtr hwndParent, EnumWindowsProc lpEnumFunc, IntPtr lParam);

private List<IntPtr> GetChildWindows(IntPtr parent)  
{  
    List<IntPtr> result = new List<IntPtr>();  
    GCHandle listHandle = GCHandle.Alloc(result);  
    try  
    {  
         EnumWindowProc childProc = new EnumWindowProc(EnumWindow);  
         EnumChildWindows(parent, childProc, GCHandle.ToIntPtr(listHandle));  
    }  
    finally  
    {  
         if (listHandle.IsAllocated)  
               listHandle.Free();  
    }  
    return result;  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-23T22:16:32.940

```
 public void GetWindowHandles()
    {
        List<IntPtr> windowHandles = new List<IntPtr>();

        foreach (Process window in Process.GetProcesses())
        {
            window.Refresh();

            if (window.MainWindowHandle != IntPtr.Zero) 
            {
                windowHandles.Add(window.MainWindowHandle);
            }
        }
    } 
```

阅读[本文](https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.process.mainwindowhandle?view=net-5.0)以了解为什么我们调用刷新方法并检查指针是否为零

# c# - 将数字格式化为钱

> ID：820913
> 
> 赞同：18
> 
> 时间：2009-05-04T16:55:17.977
> 
> 标签：c#, string, format

如何将数字格式化为如下所示：9,000 我的数据库字段是货币数据类型，当我将其拉起时，我看到它是这样的：9000.0000 在我看来不正确（我希望它看起来像真钱格式）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-05-04T17:47:29.960

虽然您可以调用 string.format，但我认为只调用[ToString](http://msdn.microsoft.com/en-us/library/0b22a4x2.aspx)会更容易。

```
decimal money = 9000m;
string formattedMoney = money.ToString("C"); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-04T17:00:13.583

```
decimal money = 1000;
Response.Write(string.Format("{0:C}", money)); 
```

以上是 C# 中的示例。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-05-01T14:39:38.513

以为我会添加一个带有插值字符串的 C# 6 选项：

```
decimal money = 9000m;
string formatted = $"{money:C}"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T17:16:12.577

您需要执行“格式化”功能（以您使用的任何语言），它将以货币格式返回数据。另一个答案已经描述了 C# 中的代码。这是vbscript：

```
Dim Amount
Amount = 2000
Response.Write(FormatCurrency(Amount)) 
```

您的数据库查看应用程序如何读取数据以及数据如何实际存储在数据库中可能是两件不同的事情。

# iphone - UIView clipsToBounds 属性：它会提高性能吗？

> ID：820919
> 
> 赞同：16
> 
> 时间：2009-05-04T16:55:54.840
> 
> 标签：iphone, uikit, uiview

文档说 的`clipsToBounds`属性`UIView`会将绘图剪辑到边界，或者更准确地说，`subView`不能在`superView`.

听起来不错，但这在实践中意味着什么？

如果我将其设置为**YES**，那么我`subView`将自动仅绘制那些不在`superView`. 所以它提高了整体性能还是我仍然必须确保我不创建任何不可见的视图，即在一个`UIScrollView`？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-05-04T16:59:14.007

我认为恰恰相反：打开剪辑会损害性能，因为它必须设置剪辑蒙版。我隐约记得在某处读过这篇文章，但现在找不到了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-03T17:18:08.877

clipsToBounds 的用例更多用于部分位于主视图之外的子视图。例如，我在其父（矩形）UIView 的边缘有一个（圆形）子视图。如果将 clipsToBounds 设置为 YES，则只会显示一半的圆/子视图。如果设置为 NO，则会显示整个圆圈。刚遇到这个，想分享一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T00:18:54.827

如果您知道视图层次结构，那么（可能的）性能影响只是确定性的。如上所述，通常渲染器将使用 GPU 周期来绘制视图，除非层次结构中的某些视图使用`drawRect:`. 这不会影响 OpenGL ES 应用程序，因为`drawRect:`在此类应用程序中被省略。

据我了解，与实际计算/绘制/混合整个视图相比，确定和显示剪切区域可能需要更少的周期。从[OpenGL ES 2.0 开始](http://www.khronos.org/registry/gles/specs/2.0/es_cm_spec_2.0.24.pdf)，裁剪可以在 GPU 中计算。

# java - 通用接口：特定事物的列表

> ID：820922
> 
> 赞同：1
> 
> 时间：2009-05-04T16:56:35.323
> 
> 标签：java, generics, interface

我想定义一个接口 MyList，它是接口 MyThing 的列表。MyList 的部分语义是它的操作对没有实现 MyThing 接口的对象没有任何意义。

这是正确的声明吗？

```
interface MyList<E extends MyThing> extends List<E> { ... } 
```

**编辑：（**第 2 部分）现在我有另一个接口，它返回一个 MyList 作为其方法之一。

```
// I'm defining this interface
// it looks like it needs a wildcard or template parameter
interface MyPlace {
    MyList getThings();
}

// A sample implementation of this interface
class SpecificPlace<E extends MyThing> implements MyPlace {
    MyList<E> getThings();
}

// maybe someone else wants to do the following
// it's a class that is specific to a MyNeatThing which is
// a subclass of MyThing
class SuperNeatoPlace<E extends MyNeatThing> implements MyPlace {
    MyList<E> getThings();
    // problem?
    // this E makes the getThings() signature different, doesn't it?
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T17:03:47.007

是的，至少它是这样的[`EnumSet`](http://java.sun.com/javase/6/docs/api/java/util/EnumSet.html)。

> `public abstract class EnumSet<E extends Enum<E>>
> extends AbstractSet<E>`

* * *

**编辑回答第 2 部分：**

我不确定为什么`getThings()`接口中的返回类型不会抱怨原始类型。我怀疑由于类型擦除，接口中的警告即使存在也将毫无用处（如果将返回类型更改为 也没有警告`List`）。

对于第二个问题，由于`MyNeatThing`extends `MyThing`，`E`在其范围内。这就是在泛型参数中使用`extends`边界的意义所在，不是吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T18:09:09.283

对于第 1 部分，是的，看起来不错。

对于您的第 2 部分，我建议如下。该方法返回 a `MyList`of something，你不知道它是什么（显然不同的实现是不同的），但你知道它是 MyThing 的子类型。

```
interface MyPlace {
    MyList<? extends MyThing> getThings();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T20:44:53.777

请记住，*正确*实现 java.util.List 之类的接口很难；所以问问自己所有这些问题：

*   我可以“按原样”使用 java.util.List，我需要添加/删除功能吗？
*   我可以实现一些更简单的东西吗，比如 Iterable<T>？
*   我可以使用合成吗？（相对于继承）
*   我可以在 Google Collections 等现有库中找到新需要的功能吗？
*   如果我需要添加/删除功能，是否值得增加复杂性？

也就是说，您可能只使用 java.util.List 作为示例：

```
interface MyPlace<T extends MyThing> {
   List<T> getThings();
}

class SpecificPlace implements MyPlace<MyThing> {
   public List<MyThing> getThings() { return null; }
}

class SuperNeatoPlace implements MyPlace<MyNeatThing> {
   public List<MyNeatThing> getThings() { return null; }
} 
```

# html - 删除链接的正则表达式

> ID：820926
> 
> 赞同：10
> 
> 时间：2009-05-04T16:57:13.527
> 
> 标签：html, regex

> **可能重复：**
> [正则表达式匹配打开的标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

我有一个 HTML 页面

```
<a class="development" href="[variable content]">X</a> 
```

[变量内容]每个地方都不一样，其余的都是一样的。
什么正则表达式会捕获所有这些链接？（虽然我不是在这里写，但我确实尝试过......）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-04T19:59:59.673

正则表达式根本不擅长解析 HTML（请参阅[您能否提供一些示例，说明为什么用正则表达式解析 XML 和 HTML 很困难？](https://stackoverflow.com/questions/701166)为什么）。您需要的是一个 HTML 解析器。请参阅[您能否提供一个使用您最喜欢的解析器解析 HTML 的示例？](https://stackoverflow.com/questions/773340)对于使用各种解析器的示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-04T17:02:05.230

试试这个正则表达式：

```
<a class="development" href="[^"]*">X</a> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-04T17:07:01.180

非贪婪版本怎么样：

```
<a class="development" href="(.*?)">X</a> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-04T20:05:20.407

这是一个允许将各种邪恶放入`href`属性的版本。

```
/<a class="development" href=(?:"[^"]*"|'[^']*'|[^\s<>]+)>.*?<\/a>/m 
```

我还假设`X`它将是可变的，所以我在那里添加了一个非贪婪匹配来处理它，并且`/m`手段`.`也匹配换行符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-04T17:10:13.310

正则表达式通常是 HTML 解析的糟糕解决方案，每次提出此类问题时都会讨论这个话题。例如，元素可以换行到另一行，或者作为

```
<a class="development" 
  href="[variable content]">X</a> 
```

或者

```
<a class="development" href="[variable content]">X
</a> 
```

你想达到什么目的？

使用 JQuery，您可以禁用链接：

```
$("a.development").onclick = function() { return false; } 
```

或者

```
$("a.development").attr("href", "#"); 
```

# c# - 在模型类中获取用户名

> ID：820935
> 
> 赞同：0
> 
> 时间：2009-05-04T16:59:50.243
> 
> 标签：c#, asp.net-mvc, model, audit

我正在尝试使用我的一些模型（例如 CreatedAt、UpdatedAt、CreatedBy 和 UpdatedBy）来实现基本审计。

日期/时间部分已完成。`INotifyPropertyChanging, INotifyPropertyChanged`当属性发生更改（实现）并且可以很好地更新对应的字段时，我会在我的模型上引发事件。

我只需要知道如何获取当前用户名，而不必每次实例化或获取模型的现有实例时都通过控制器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T18:10:35.723

> 引用 System.Web 并使用 HttpContext.Current.User.Identity.Name 就像一个魅力。

我不知道。谢谢。我这样做：

```
Membership.GetUser().UserName 
```

哪种方式更快？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T19:38:08.553

谈论身份的抽象方式是“主体” - 请参阅[此线程](https://stackoverflow.com/questions/818891/819124#819124)。我希望这段代码可以让你在不知道登录实现的情况下获得身份：

```
public static class SomeUtilityClass {
    public static string GetUsername() {
        IPrincipal principal = Thread.CurrentPrincipal;
        IIdentity identity = principal == null ? null : principal.Identity;
        return identity == null ? null : identity.Name;
    }
}
...

record.UpdatedBy = record.CreatedBy = SomeUtilityClass.GetUsername(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T17:38:08.360

引用`System.Web`和使用`HttpContext.Current.User.Identity.Name`就像一种魅力。

# cocoa - How do you set a title so that every row in a table has the title already typed in when you add a new row?

> ID：820943
> 
> 赞同：0
> 
> 时间：2009-05-04T17:01:03.813
> 
> 标签：cocoa, core-data

I am using a Core-Data app, i am looking to set a pre-defined title/word so that every new row that is created already has that title/word typed in. For example the word could be 'New Task' and so when the user adds a new row it would already say 'New Task', how would you do that?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T17:23:12.560

Have a look at [this article](http://www.cocoadevcentral.com/articles/000085.php). It tells you how to set default values for attributes (under the Configure the Attribute heading)

# signal-processing - 如何将低通滤波器转换为带通滤波器

> ID：820944
> 
> 赞同：5
> 
> 时间：2009-05-04T17:01:05.280
> 
> 标签：signal-processing

我有一个由以下传递函数描述的低通滤波器：

h[n] = (w_c/Pi) * sinc( n * w_c / Pi )，其中 w_c 是截止频率

我必须将此低通滤波器转换为带通滤波器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-04T17:39:53.550

您`h[n]`转换到`rect`频域中。要使其带通，您需要将其中心频率移得更高。

要做到这一点，乘以`h[n]`，`exp(j*w_offset*n)`其中`w_offset`是移位量。如果`w_offset`是正数，那么你会转向更高的频率。

时域中的乘法是频域中的卷积。由于`exp(j*w_offset*n)`变成以 为中心的脉冲函数`w_offset`，因此乘法移动`H(w)`了`w_offset`。

有关详细信息，请参阅[离散时间傅里叶变换。](http://en.wikipedia.org/wiki/DTFT)

**注意**：这样的过滤器不会关于 0 对称，这意味着它将具有复数值。为了使其对称，您需要添加`h[n]`乘以`exp(-j*w_offset*n)`：

`h_bandpass[n] = h[n](exp(j*w_offset*n)+exp(-j*w_offset*n))`

因为`cos(w*n) = (exp(j*w*n)+exp(-j*w*n))/2`我们得到：

`h_bandpass[n] = h[n]cos(w_offset*n)`

然后，该过滤器具有纯实值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T12:24:59.513

简短的回答是，您将乘以时域中的复指数。时域中的乘法将在频域中移动信号。

Matlab代码：

```
n_taps = 100;
n = 1:n_taps;
h = ( w_c / Pi ) * sinc( ( n - n_taps / 2) * w_c / Pi ) .* ...
    exp( i * w_offset * ( n - n_taps / 2) ); 
```

* * *

ps 我恰好在几周前刚刚为学校实现了这个确切的功能。

这是使用窗口方法创建自己的带通滤波器的代码：

```
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Function: Create bandpass filter using windowing method
% Purpose:  Simple method for creating filter taps ( useful when more elaborate
%           filter design libraries are not available )
%
% @author   Trevor B. Smith, 24MAR2009
%
% @param    n_taps    How many taps are in your output filter
% @param    omega_p1  The lower cutoff frequency for your passband filter
% @param    omega_p2  The upper cutoff frequency for your passband filter
% @return   h_bpf_hammingWindow     The filter coefficients for your passband filter
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
function h_bpf_hammingWindow = BPF_hammingWindow(n_taps,omega_p1,omega_p2)
    % Error checking
    if( ( omega_p2 == omega_p1 ) || ( omega_p2 < omega_p1 ) || ( n_taps < 10 ) )
        str = 'ERROR - h_bpf_hammingWindow():   Incorrect input parameters'
        h_bpf_hammingWindow = -1;
        return;
    end

    % Compute constants from function parameters
    length = n_taps - 1; % How many units of T ( i.e. how many units of T, sampling period, in the continuous time. )
    passbandLength = omega_p2 - omega_p1;
    passbandCenter = ( omega_p2 + omega_p1 ) / 2;
    omega_c = passbandLength / 2; % LPF omega_c is half the size of the BPF passband
    isHalfSample = 0;
    if( mod(length,2) == 1 )
        isHalfSample = 1/2;
    end

    % Compute hamming window
    window_hamming = hamming(n_taps);

    % Compute time domain samples
    n = transpose(-ceil(length/2):floor(length/2));
    h1 = sinc( (1/pi) * omega_c * ( n + isHalfSample ) ) * pi .* exp( i * passbandCenter * ( n + isHalfSample ) );

    % Window the time domain samples
    h2 = h1 .* window_hamming;
    if 1
        figure; stem(h2); figure; freqz(h2);
    end

    % Return filter coefficients
    h_bpf_hammingWindow = h2;
end % function BPF_hammingWindow() 
```

如何使用此功能的示例：

```
h_bpf_hammingWindow = BPF_hammingWindow( 36, pi/4, 3*pi/4 );
freqz(h_bpf_hammingWindow); % View the frequency domain 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T18:45:30.803

让`f[n]`您从低通滤波器获得的信号`w_c`位于所需频带的下限。`f[n]`您可以通过从原始信号中减去来获得高于此下限的频率。这是您想要用于第二个低通滤波器的输入。

# jquery - 如何在按下带有井号的返回按钮时使 FF 和 IE 的行为相同#

> ID：820946
> 
> 赞同：0
> 
> 时间：2009-05-04T17:01:41.130
> 
> 标签：jquery, firefox, accordion

我正在使用一个 jquery 手风琴，它使用哈希标记来区分打开的手风琴选项卡。

演示页面

[http://sandbox.unwrongest.com/jquery.accordion/](http://sandbox.unwrongest.com/jquery.accordion/)

当点击几个标签然后使用返回按钮时，Firefox 只显示哈希值的变化。

在 IE 中，哈希值不会随着后退按钮而改变，而是直接转到上一页。

我希望 Firefox 的行为与 IE 相同……这不是我经常说的。

感谢任何有一些建议的人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T17:08:54.497

这是一个 jquery 历史插件，它使用 AJAX 调用启用后退按钮

[http://plugins.jquery.com/project/history](http://plugins.jquery.com/project/history)

我在我们的主要电子商务 B2B 应用程序之一中使用过它，并且非常好。

# c# - 带有字符串值的复选框的数据绑定

> ID：820947
> 
> 赞同：3
> 
> 时间：2009-05-04T17:01:44.920
> 
> 标签：c#, data-binding, datarow

我必须将数据行绑定到我的控件。到目前为止，一切都很好。现在的问题是，我的数据行只包含我必须绑定的列中的字符串，但是 Checkbox 的“已选中”属性当然只接受布尔参数。

有没有办法在这里使用 DataBinding？也许在两者之间有某种转换器？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-04T17:42:52.433

使用[ConvertEventHandler 委托](http://msdn.microsoft.com/en-us/library/system.windows.forms.converteventhandler(VS.71).aspx)更改 DataBinding 的类型。

例子

```
 Binding binding = new Binding("checked", dt, "string_field");
    binding.Format += new ConvertEventHandler(binding_Format);
    binding.Parse += new ConvertEventHandler(binding_Parse);
    this.checkbox1.DataBindings.Add(binding); 

    void binding_Format(object sender, ConvertEventArgs e)
    {
        if (e.Value.ToString() == "yep") e.Value = true;
        else e.Value = false;
    }

    void binding_Parse(object sender, ConvertEventArgs e)
    {
        if ((bool)e.Value) e.Value = "yep";
        else e.Value = "nope";
    } 
```

# javascript - 几秒钟后隐藏 div

> ID：820951
> 
> 赞同：134
> 
> 时间：2009-05-04T17:02:23.530
> 
> 标签：javascript, jquery, timing

我想知道，几秒钟后我如何在 jquery 中隐藏一个 div？例如 Gmail 的邮件。

我已尽力而为，但无法使其正常工作。

* * *

## 回答 #1

> 赞同：271
> 
> 时间：2009-05-04T17:03:31.187

这将在 1 秒（1000 毫秒）后隐藏 div。

```
setTimeout(function() {
    $('#mydiv').fadeOut('fast');
}, 1000); // <-- time in milliseconds
```

```
#mydiv{
    width: 100px;
    height: 100px;
    background: #000;
    color: #fff;
    text-align: center;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="mydiv">myDiv</div>
```

如果您只想隐藏而不褪色，请使用`hide()`.

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2011-09-23T16:56:10.190

你可以试试`.delay()`

```
$(".formSentMsg").delay(3200).fadeOut(300); 
```

调用 div 以毫秒为单位设置延迟时间并设置要更改的属性，在这种情况下，我使用了 .fadeOut() 以便它可以动画，但您也可以使用 .hide() 。

[http://api.jquery.com/delay/](http://api.jquery.com/delay/)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-04-04T17:16:12.533

jquery 提供了多种方法来以定时方式隐藏 div，不需要设置和稍后清除或重置间隔计时器或其他事件处理程序。这里有一些例子。

纯隐藏，一秒延迟

```
// hide in one second
$('#mydiv').delay(1000).hide(0); 
```

纯隐藏，无延迟

```
// hide immediately
$('#mydiv').delay(0).hide(0); 
```

动画隐藏

```
// start hide in one second, take 1/2 second for animated hide effect
$('#mydiv').delay(1000).hide(500); 
```

消退

```
// start fade out in one second, take 300ms to fade
$('#mydiv').delay(1000).fadeOut(300); 
```

此外，这些方法可以将队列名称或函数作为第二个参数（取决于方法）。可以在此处找到上述所有调用和其他相关调用的文档： [https ://api.jquery.com/category/effects/](https://api.jquery.com/category/effects/)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-06-21T13:08:38.763

**有一个非常简单的方法可以做到这一点。**

问题是 .delay 只影响动画，所以你需要做的是让 .hide() 像动画一样通过给它一个持续时间。

`$("#whatever").delay().hide(1);`

通过给它一个不错的短持续时间，它看起来就像常规的 .hide 函数一样是即时的。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-05-04T17:06:29.620

```
$.fn.delay = function(time, callback){
    // Empty function:
    jQuery.fx.step.delay = function(){};
    // Return meaningless animation, (will be added to queue)
    return this.animate({delay:1}, time, callback);
} 
```

来自[http://james.padolsey.com/javascript/jquery-delay-plugin/](http://james.padolsey.com/javascript/jquery-delay-plugin/)

（允许链接方法）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-04T22:20:26.450

使用 jQuery 计时器还可以让您拥有与附加到对象的计时器相关联的名称。因此，您可以将多个计时器附加到一个对象并停止其中任何一个。

```
$("#myid").oneTime(1000, "mytimer1" function() {
  $("#something").hide();
}).oneTime(2000, "mytimer2" function() {
  $("#somethingelse").show();  
});

$("#myid").stopTime("mytimer2"); 
```

eval 函数（及其相关函数，Function、setTimeout 和 setInterval）提供对 JavaScript 编译器的访问。这有时是必要的，但在大多数情况下，它表明存在极其糟糕的编码。eval 函数是 JavaScript 中被滥用最多的特性。

[http://www.jslint.com/lint.html](http://www.jslint.com/lint.html)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-04T17:05:02.743

可能最简单的方法是使用计时器插件。 [http://plugins.jquery.com/project/timers](http://plugins.jquery.com/project/timers)然后调用类似

```
$(this).oneTime(1000, function() {
    $("#something").hide();
  }); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-07-02T07:05:16.913

```
<script>
    $(function() {
        $(".hide-it").hide(7000);
    });              
</script>

<div id="hide-it">myDiv</div> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-02-16T09:38:26.667

我们可以直接使用

```
$('#selector').delay(5000).fadeOut('slow'); 
```

# performance - 编译时程序变慢

> ID：820956
> 
> 赞同：1
> 
> 时间：2009-05-04T17:04:27.737
> 
> 标签：performance, compiler-construction, vb6

关于为什么 VB6 程序在编译时会比在调试器中运行时慢的任何建议？我正在用“优化快速代码”来编译它。

注意：我通过在同一台机器上运行编译版本和非编译版本来衡量性能。我的预测基于挂钟时间，因为 30 分钟与 100 分钟的差异足以让人看得见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-04T21:54:02.020

几个月前，我配置了一个调试工具，以便在程序运行时将其附加到我的程序中。我完全忘记了我做过这件事。

特别感谢[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)使这一点非常明显。

关闭它会使程序运行得很快。

[AppVerifier](http://msdn.microsoft.com/en-us/library/ms807121.aspx)，适合那些好奇的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T17:06:48.777

您应该选择 compile to **Native Code**选项

编译为**P 代码**选项会强制您的程序以解释模式运行，这可能会更慢。

高级部分有一些优化。也试试看。

**还有一些需要考虑的点：**

您是否在同一环境中运行已编译的应用程序？它是否采用与输入相同的数据？

你怎么知道它很慢？如果你的计时程序有误怎么办？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T17:07:38.510

你如何衡量绩效？

很难用你刚才说的来衡量性能。您必须确保运行环境必须完全相同才能比较性能？

你在同一台机器上运行吗？你连接到数据库吗？DB 在不同的运行中是否具有相同的工作负载？在做出这样的决定之前，您需要隔离其他因素。

# php - 大型 PHP 应用程序中的 SQL 调试

> ID：820961
> 
> 赞同：2
> 
> 时间：2009-05-04T17:05:20.183
> 
> 标签：php, sql

我正在使用 CodeCharge Studio 来完成一个大型 PHP 应用程序。这个问题实际上与 CCS 无关，但更笼统一些。我有一个 Web 表单，它应该允许对某个 SQL Server 表进行 CRUD 功能，但是插入一直失败而不会引发任何错误。调试这个的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-04T17:10:59.360

当动态生成的 SQL 查询遇到问题时，我通常会回显查询并尝试在数据库的控制台上运行该查询。或者，您可以编写一个简单的 PHP 函数，将字符串写入文件，这样您就不必直接在页面上显示查询，而是在日志文件中显示。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-04T17:08:16.730

查看实际查询是什么，然后尝试直接在数据库上执行该查询。然后你就知道是 PHP 问题还是 DB 问题了。

然后从那里出发，取决于结果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-04T18:12:37.170

如果查询看起来正常，请仔细检查运行查询的用户是否具有对数据库的**插入**权限。

我以前就被那个抓住了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-04T17:19:09.403

您可以监控 mysql 中的所有 sql 查询，如[本站点](http://www.howtogeek.com/howto/database/monitor-all-sql-queries-in-mysql/)所示，一旦启用日志记录，手动运行查询并查看其失败的原因..这应该是一个很好的起点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-15T16:22:32.837

除了前面提到的，我可以添加我最近的发现：

> trigger_error(print_r($your_var,1),E_USER_ERROR);

所以你可以输出和调试你的变量，即使它是一个带有重定向的复杂脚本，简单的回显也无济于事。

德米特里。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-15T16:08:13.777

您应该尝试使用[FirePHP](http://www.firephp.org/)并将所有 SQL 记录到您的 Firebug：

一个例子是：

 `$sql = "SELECT * FROM table"
if (!mysql_query($sql)) {
// In un successfull log to FireBug
FB::error($data, "SQL error: ".mysql_error());
}`

您还可以从您自己的函数中实现 FB::error 调用，因此您可以稍后停用此行为以修改您的函数：

 `function log_error($data, $msg){
//dont forget to deactivate in case the application goes live!
FB::error($data, $msg);
}
if (!mysql_query($sql)) {
// In un successfull log to FireBug
log_error($data, "SQL error: ".mysql_error());
}`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-06T23:25:59.123

CodeCharge 中的大多数数据库连接类都有一个“调试”标志，它将自动在页面顶部写入所有页面的数据库命令。

例如，在我的一个旧 PHP 项目中，“Common Files”文件“db_mysql.php”（第 27 行）：

```
public $Debug         = 0;     ## Set to 1 for debugging messages. 
```

更改为“1”并发布该文件。加载网页。完成后改回并重新发布。

我已经在 CCS 中将它用于 PHP 和 ASP 项目，并且可能在其他语言中使用（不确定是否或在哪里可以找到 .NET 项目）。

# vb.net - 来自嵌入资源图像的 RAW 数据

> ID：820964
> 
> 赞同：0
> 
> 时间：2009-05-04T17:06:11.057
> 
> 标签：vb.net, image, embedded-resource

我正在尝试从嵌入式资源中检索图像，并以其 RAW DATA 格式（即 -> 垃圾文本数据）显示它。

基本上，我尝试的一切都在碰壁。有人可以告诉我如何正确地做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-28T19:34:37.783

您可以使用以下[msdn 参考](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getmanifestresourcestream.aspx "msdn 参考")

```
System.Reflection.Assembly.GetExecutingAssembly.GetManifestResourceStream(fileName) 
```

这将为您提供一个 Stream，然后您可以使用[code cite](http://snipplr.com/view/2012/stream-to-byte-array/ "代码引用")将其转换为几乎是原始数据的字节数组。

```
private Function GetStreamAsByteArray(ByVal stream As System.IO.Stream) As Byte()
Dim streamLength As Integer = Convert.ToInt32(stream.Length)
Dim fileData As Byte() = New Byte(streamLength) {}
' Read the file into a byte array
stream.Read(fileData, 0, streamLength)
stream.Close()
Return fileData
End Function 
```

# ruby-on-rails - 包含/使用“局部视图”时的最佳实践？

> ID：820970
> 
> 赞同：6
> 
> 时间：2009-05-04T17:07:08.310
> 
> 标签：ruby-on-rails, model-view-controller, symfony1

在像 Rails 和 symfony 这样的现代 Web 框架中，部分包含或部分视图的概念有很好的文档记录和推荐。

我最近遇到的麻烦是决定在部分中包含多少设计。

这有点难以解释，但我想知道其他人在创建部分并将其包含在模板中时会做什么。您是只显示数据并将其放置在模板中，还是将所有样式和定位代码放在部分中并像这样包含它。

我想我的问题是，当你决定创建一个部分时，你的思考过程是什么，你什么时候在你自己的代码中使用它，当你决定使用一个时，你在你的部分中投入了多少。

*   [http://www.symfony-project.org/book/1_2/07-Inside-the-View-Layer#Partials](http://www.symfony-project.org/book/1_2/07-Inside-the-View-Layer#Partials)
*   [http://api.rubyonrails.org/classes/ActionView/Partials.html](http://api.rubyonrails.org/classes/ActionView/Partials.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T20:11:41.593

如果您要重复部分视图代码，部分代码是个好主意。如果您重用的代码在您的页面之间略有不同，请使用您可以传递部分的参数。

至于 CSS，我建议将其保留在您的部分/模板之外。如果您有很多部分特定的 CSS 代码，请在 web/css 下创建一个“partials”文件夹并命名 css 文件以匹配您的部分（如果您认为开销值得组织）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T07:14:04.107

我在两种情况下使用局部：

*   当我需要重用视图时
*   当视图很大（数百行）时，我将其拆分为部分以使其更具描述性，从而更易于维护。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T17:24:52.133

我将部分视图代码用于不止一个地方使用的视图代码。如果代码要在多个地方被复制或重用，那么它是被 DRY'd 并放入部分的主要候选者。

至于样式代码，所有这些都应该驻留在您的 CSS 文件中

# asp.net - 回发时 URL 可以更改吗？

> ID：820975
> 
> 赞同：2
> 
> 时间：2009-05-04T17:08:32.890
> 
> 标签：asp.net, postback

我只需要在 GET 上解析 URL Request.Querystrings，而不是在回发上，对吧？

```
if(!IsPostBack)
{
    Viewstate["magic_number"] = Parse(Request.Query);
} 
```

不能期望用户修改请求中的 URL 以进行后续回发，或者可以吗？

提问的动机——我不控制执行回发的 javascript 片段，所以它对我来说是一个黑匣子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-04T17:21:51.550

URL预计*不会*更改。但请记住，每个回发都是您的页面类的一个新实例。因此，如果您没有将结果保存在第一个视图的某个位置，您需要准备好在下一个视图中再次执行此操作，依此类推。在这种情况下，您将其保存到 ViewState，所以应该没问题。

但是，我怀疑除非您观察到导致您怀疑的行为，否则您不会问这个问题。因此，让我们考虑一下可能导致此问题的原因：

*   可以在保存结果*的*客户端上修改 ViewState（尽管不是微不足道的，绝对不推荐）。
*   您可以在初始页面查看之前伪造回发。
*   您可以使用 javascript 来更改发布的网址。

然而，对于所有这些事情，如果你写了任何东西来做这件事，你肯定会知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T17:13:56.543

您的假设是正确的，预计不会在随后的回发中修改 URL，并且您只需要在 GET 上解析查询字符串，这会在第一次加载页面时发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T17:14:08.620

URL 通常不会因回发而改变。

当然可以使用 FireBug 之类的工具在回发之前编辑表单标签中的 URL，但是您可能不想要用户注入的值，而是原始值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T17:30:40.607

正如其他人指出的那样，预计 URL 不会改变。当然，如果我们生活在一个完美的世界中，您将永远不会收到垃圾邮件，也不会有人试图对您的网站做任何恶意的事情。

在现实世界中，您应该期望恶意人员会尝试劫持您的网站，并且需要关注诸如[注入攻击之类的事情](http://en.wikipedia.org/wiki/SQL_injection)

您*永远*不应假设在回发中收到的数据是有效的。

# jsp - 在 JSP 中包含文件的内容

> ID：820982
> 
> 赞同：3
> 
> 时间：2009-05-04T17:11:02.620
> 
> 标签：jsp

我想在 JSP 页面中包含文件的内容。通常，我会使用类似的东西：

```
<jsp:include page="<%= path_to_file %>" /> 
```

但是，这在这里不起作用，因为我尝试包含的文件位于 Web 部署之外。

我见过的最丑陋的解决方案是这样的：

```
<td>
<% BufferedReader  br =  new BufferedReader(new FileReader(new File(path_to_file)));
   String line = br.readLine();
   while (line != null) { %>
     <% out.println(line); %>
     <% line = br.readLine(); } %>
</td>
<% } catch (IOException e) { %>
<td>
  <%= e %>
</td>
<% } %> 
```

但我*真的*不想这样做。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T11:07:03.483

为了避免丑陋的 scriptlet 代码，您可以编写一个小标签（在 Java 中，扩展`SimpleTagSupport`）仅用于包含来自外部路径的任意文件。

然后你可以写

```
<my:include page="<%= path_to_file %>" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T17:20:56.480

您*可以*在您的发行版中包含一个符号路径以指向您的外部路径。

# nhibernate - nHibernate - 从数据库生成类？

> ID：820984
> 
> 赞同：14
> 
> 时间：2009-05-04T17:12:05.830
> 
> 标签：nhibernate, orm

我知道您可以使用 nHibernate 从类及其映射生成数据库，但我找不到任何好的链接来反过来做。我们有一个已经设计好的数据库，我们正在考虑使用 nHibernate。使用工具从数据库生成映射和类会很好，然后我们可以调整/操作它们以适应我们的口味。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2011-01-04T09:02:22.563

[NHibernate 映射生成器](http://nmg.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-04T17:17:24.460

您可以将 nhibernate 与现有数据库一起使用。这是编写映射文件的问题。

我还推荐使用 Fluent Nhibernate ......在这个社区推荐它之后我开始使用它......

如果您不喜欢维护映射，请查看亚音速。

# iphone - 内联汇编错误

> ID：820987
> 
> 赞同：0
> 
> 时间：2009-05-04T17:12:50.947
> 
> 标签：iphone, xcode, assembly, arm

我正在为 iphone 使用内联汇编，我在设备调试模式下工作。

指令如下：

```
__asm__("smlatb %0, %1, %2 ,%3 \n\t": "=r"(Temp): "r"(treg5) : "r"(fac5) : "r"(Temp) ); 
```

我收到一个错误：

> 错误：tokedn '(' 之前的预期 ')' 错误：'asm' 中的未知寄存器名称 'r'

我正在使用 X-code 3.0 和 gcc 4.0。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-03-27T20:54:59.533

应该只有三个冒号，而不是四个。

第一个冒号后面的参数指定输入，然后是输出，然后是clobber 列表。

如果您有多个参数，您可以使用逗号而不是冒号来分隔它们。

在你的例子中。我假设 temp 是您的输出，而 treg5, fac5 是您的输入。你可能想要这样的东西。

```
__asm__("smlatb %0, %1, %2, %0 \n\t"
        : "=r"(Temp) 
        : "0"(Temp), "r"(treg5), "r"(fac5)
        :); 
```

[顺便说一句， vfpmath](http://code.google.com/p/vfpmathlibrary/)库中有一些很好的 iphone ARM 程序集示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T06:18:33.937

你有太多`:`（冒号）。它们用作分隔符。因此，您应该有一个将汇编代码与输出变量分开，一个将输出变量与输入变量分开。有点像`asm ("assembly" : <output> : <inputs> : [extra attributes])`。查找 GCC 的“内联汇编”，您将看到一些示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T17:44:30.200

我相信你应该做这样的事情：

```
__asm__("smlatb %0, %1, %2 ,%3 \n\t": "=r"(Temp): "r"(treg5) : "r"(fac5) : "r"(Temp)); 
```

有关详细信息，请参阅[此 Stack Overflow 问题](https://stackoverflow.com/questions/238010/how-do-i-do-inline-assembly-on-the-iphone)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-05T13:01:36.907

我添加了 codewarrior 风格的内联汇编 __asm{
smlatb Temp, treg5, fac5 ,Temp } 并在 GCC 4.0 语言下的 build 选项卡下的项目设置中我选择了选项 Allow CodeWarrior-Style Inline Assembly 也选择了 allow 'asm' 'inline' 'typeof'选项和代码终于工作了

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-04T17:14:01.613

一个更正指令是 **asm** ("smlatb %0, %1, %2 ,%3 \n\t": "=r"(Temp): "r"(treg5) : "r"(fac5) : "r “（温度））；

# javascript - 替代 document.getElementById().setAttribute() 函数

> ID：820996
> 
> 赞同：2
> 
> 时间：2009-05-04T17:16:12.030
> 
> 标签：javascript, jquery

是否有任何替代方法可以执行以下操作：

```
 document.getElementById("btn").setAttribute("onclick", "save(" + id + ");"); 
```

这一行基本上将`onclick()`按钮的事件更改为：`save(34); , save(35);`等。但是它在 IE 7 和 6 中失败，但在 IE 8 和 Firefox 中有效。

我也可以为此使用 jquery。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-04T17:23:11.827

**普通的旧javascript：**

```
var myButton = document.getElementById("btn");
myButton.onclick = function()
{
  save(id); //where does id come from?
} 
```

**jQuery：**

```
$(function(){
  $("#btn").click(function(){
    save(id); //where does id come from?
  });    
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-04T17:18:32.180

如果你可以使用 jQuery，那么：

```
$("#btn").click(function() { save(id); }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T17:21:52.097

还有这个：

```
$("#btn").bind('click', function() { save(id); }); 
```**********************