# StackOverflow 问答 12180000-12180999

# design-patterns - 软件设计：如何为可以访问互联网并缓存数据的实体建模？

> ID：12180002
> 
> 赞同：2
> 
> 时间：2012-08-29T14:15:03.500
> 
> 标签：design-patterns

让我们举个例子。让我们考虑一个具有检索员工功能的公司实体 - `getEmployees()`。一家公司可能有很多员工，因此在加载公司时不会加载员工。但是，一旦加载了员工，它们就会保存在缓存中，并在下次调用时立即检索。

现在我想在列表视图 - GUI 中显示员工列表。

我想提供一个“加载”指示，而员工是从互联网加载的。

但是，当从缓存中加载（非常快）时，显示“加载”指示器并立即删除它会很烦人。**所以，当已经加载时，我根本不想显示“加载”指示器。**

你将如何解决这个设计问题？你会添加一个方法`getCachedEmployees()`吗？也许`isEmployeesCached()`？也许将方法更改为`getEmployees(boolean cache)`?

我不喜欢上面的任何一个，因为不是封装缓存，而是强调缓存——从而使软件复杂化。

**还有其他想法吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:44:54.933

我假设您的 GUI 和代码用于显示和管理与应用程序逻辑和数据分离的 GUI 元素。

我知道，如果 GUI 中的某些操作触发应用程序逻辑来加载员工，您只想调用 getEmployees() 方法。您的 GUI 不应控制数据是从缓存还是从 Internet 加载。但是您需要 GUI 中的逻辑来决定是否需要显示加载指示。

我能想到的最好的解决方案是你的 GUI 有类似计时器的东西——你调用 getEmployees() 方法，等待 500 毫秒，如果数据已经返回，你直接显示它们。如果到目前为止没有返回数据，您需要显示加载指示器。您需要在这里进行异步调用和回调，因此您可能希望在这里有一个单独的类来进行同步，但这可能是值得的。

我在 .NET/C# 中实现了类似的东西，如果特殊的其他条件也为真，则仅在 500 毫秒的等待时间后触发操作。使用该应用程序时，用户会发现 GUI 的反应有一点延迟，但不会影响您的整体观感。

顺便说一句，我喜欢只向您的 GUI 显示一个 getEmployees() 方法的方法。通过这种方式，您可以确保您在 GUI 和应用程序逻辑之间有严格的分离......

# php - 在php中切换条件大小写

> ID：12180004
> 
> 赞同：2
> 
> 时间：2012-08-29T14:15:09.163
> 
> 标签：php

我使用 javascript 将案例发送到 ajax 函数。案例取自链接 ID。例如，如果用户单击此链接： `<a id="answer-yes-123">click this</a>` javascript 会将 id 拆分为 3 部分，并将中间部分“yes”发送给 ajax 作为案例。对于大多数情况，当 ajax 收到案例时，如果是，则执行此操作，否则执行此操作。

```
switch ($case) {
    case 'yes' :
        $assignment->add();
        break;
    case 'no' :
        $assignment->remove();
        break; 
```

有一个例外——数字案例。如果链接的中间部分是数字，我不知道如何进行切换语句。可能有无限的不同数字，我不能把它们都做成一个案例，如何让一个条件像`if(is_int($case))`一个案例一样工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T14:18:18.543

在这种`switch` `default:`情况下，您可以测试`is_int()`：

```
switch ($case) {
    case 'yes' :
        $assignment->add();
        break;
    case 'no' :
        $assignment->remove();
        break;
    default:
        // Determine the numeric value however you need to 
        // is_int(), is_numeric(), preg_match(), whatever...
        if (is_int($case)) {
           // numeric stuff
        }
} 
```

这在逻辑上有点奇怪，因为*如果没有其他*`default:`条件满足，通常用于执行此操作。但是，在您的情况下，如果您不需要进一步划分数字大小写，它就可以工作。请务必在您的代码中清楚地注释它，这样当您在六个月后回顾它时，您会记得为什么这样做。

 *### 评论后更新：

由于您已经使用了`default:`，我相信您实际上可以在 a 中使用表达式`case`。这需要更清晰的评论，因为它不是一种常见的做法，并且有点违背 a 的目的`switch`：

```
switch ($case) {
    case 'yes' :
        $assignment->add();
        break;
    case 'no' :
        $assignment->remove();
        break;
    // This actually works, but is highly weird. 
    // One of those things I can't believe PHP allows.
    // is_int(), is_numeric(), preg_match(), whatever... 
    case is_int($case):
        // Numeric stuff
        break;
    default:
        // default stuff
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T14:18:11.787

在开关周围写 if 语句。

我想到了这样的事情：

```
if (is_int($case)) {
   // ...
} else {
    switch ($case) {
        // ...
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T14:26:57.847

Michael Berkowski 的回答是完美的，但如果不想使用这样的默认情况也可以：

```
switch (preg_replace('/^[0-9]*$/','numeric',$case)) {
case 'yes' :
    $assignment->add();
    break;
case 'no' :
    $assignment->remove();
    break;
case 'numeric' :
    $assignment->remove();
    break;
default:
    //...
    break;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T14:18:12.207

使用 PHP 的`is_numeric`

[http://php.net/manual/en/function.is-numeric.php](http://php.net/manual/en/function.is-numeric.php)

```
if (is_numeric($case)) {
   // ...
} else {
    switch ($case) {
        // ...
    }
} 
```*

# c - 排序时间时结构和qsort不起作用

> ID：12180018
> 
> 赞同：1
> 
> 时间：2012-08-29T14:15:34.983
> 
> 标签：c

我不知道我哪里出错了。下面的代码预计将接受用户输入的奥运会游泳运动员的 fname、lname 国家和完成时间，并按以下最快时间对结果进行 qsort；

```
**样本输入**
阿德灵顿丽贝卡 GBR 4:03.01
MUFFAT 卡米尔 FRA 4:01.45  
FRIIS 乐天 DNK 4:03.98
施密特艾莉森美国 4:01.77

**样本输出**
MUFFAT 卡米尔 FRA 4:01.45
施密特艾莉森美国 4:01.77
阿德灵顿丽贝卡 GBR 4:03.01
FRIIS 乐天 DNK 4:03.98

```

```
struct mtime_t {
    int mins;
    int secs;
    int fsecs;
};
typedef struct mtime_t mtime;

struct olympians { 
    char fname[15];
    char lname[15];
    char country[3];
    int time;
    int mins, secs, fsecs;
    mtime otime;
};

/* qsort struct comparision function (time float field) */ 
int struct_cmp_by_time(const void *a, const void *b) 
{ 
    struct olympians *ia = (struct olympians *)a;
    struct olympians *ib = (struct olympians *)b;
    return (int)(60*ia->time - 60*ib->time); 
}

/* struct array printing function */ 
void print_struct_array(struct olympians *array, size_t len) 
{ 
    size_t i;
    for(i=0; i<len; i++) 
        printf("%s %s %s \t %d:%d,%d\n", array[i].lname, array[i].fname, 
               array[i].country, &array[i].otime.mins, 
           &array[i].otime.secs, &array[i].otime.fsecs);

    puts("\n");
} 

/* sorting structs using qsort() */ 
void sort_structs_time() 
{ 
    int i, ath_num;

    struct olympians *ath_recs;
    scanf("%d", &ath_num);

    ath_recs = (struct olympians *) malloc(ath_num*sizeof(struct olympians));

    for(i = 0; i < ath_num; i++) {
        scanf("%s %s %s %d:%d,%d\n", ath_recs[i].fname, ath_recs[i].lname, 
              ath_recs[i].country, &ath_recs[i].mins, &ath_recs[i].secs, &ath_recs[i].fsecs);
    }

    puts("\n");

    /* print original struct array */ 
    print_struct_array(ath_recs, ath_num);

    /* sort array using qsort function */ 
    qsort(ath_recs, (size_t) ath_num, sizeof(struct olympians), struct_cmp_by_time);

    /* print sorted struct array */ 
    print_struct_array(ath_recs, ath_num);
}  

/* call to the function) */ 
int main() 
{ 
    /* run the function */
    sort_structs_time();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T14:18:27.277

一个问题是：

```
char country[3]; 
```

不够大，无法容纳`GBR`或任何 3 个字符串，因为空终止符需要附加字符，该字符将附加`scanf()`. 这将导致写入不应该写入的内存，从而导致未定义的行为。改成：

```
char country[4]; 
```

建议限制读取的字符数`scanf()`以防止缓冲区溢出并检查返回值`scanf()`以确保完成所有预期的分配：

```
if (6 == scanf("%14s %14s %3s %d:%d,%d\n", ... 
```

请注意，输入中时间的格式是`4:03.01`但在`scanf()`格式说明符`,`中用于分隔最后两个`int`s。改成：

```
if (6 == scanf("%14s %14s %3s %d:%d.%d\n", ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:46:21.750

另一个问题是您的输入和输出格式`,`用作小数点；您的样本数据`.`用作小数点。

另一个问题是您在输入期间没有将`time`字段设置为任何值。我可能会选择：

```
for (i = 0; i < ath_num; i++)
{
    if (scanf("%s %s %s %d:%2d,%2d\n", ath_recs[i].fname, ath_recs[i].lname,
              ath_recs[i].country, &ath_recs[i].mins, &ath_recs[i].secs,
              &ath_recs[i].fsecs) != 6)
        break;
    ath_recs[i].time = (ath_recs[i].mins * 60 + ath_recs[i].secs) * 100 +
                       ath_recs[i].fsecs;
} 
```

如果我是偏执狂，我会确保分钟、秒和小数秒都为零或正数（非负数）。而且我可能会编写代码以将整行读入缓冲区，`fgets()`然后用`sscanf()`;解析 它使错误检测更容易。

```
char buffer[4096];
int i = 0;

while (fgets(buffer, sizeof(buffer), stdin))
{
    if (i >= ath_num)
        ...too much data...
    if (sscanf(buffer, "%s %s %s %d:%2d,%2d\n", ath_recs[i].fname, ath_recs[i].lname,
              ath_recs[i].country, &ath_recs[i].mins, &ath_recs[i].secs,
              &ath_recs[i].fsecs) != 6)
    {
         ...report problems...but I've got the whole line to identify which record
         ...is giving the problem — which helps you and the user...
         break;
    }
    ...other checking...
    ath_recs[i].time = (ath_recs[i].mins * 60 + ath_recs[i].secs) * 100 +
                       ath_recs[i].fsecs;
    i++;
}

...actual number of athletes is in i... 
```

最好不要让用户做数据的统计；计算机擅长数数。您只需随时分配数组，这需要稍加注意以避免二次行为。

然后，在比较代码中，不需要乘以 60：

```
/* qsort struct comparision function (time float field) */ 
int struct_cmp_by_time(const void *a, const void *b) 
{ 
    const struct olympians *ia = (struct olympians *)a;
    const struct olympians *ib = (struct olympians *)b;
    if (ia->time > ib->time)
        return +1;
    else if (ia->time < ib->time)
        return -1;
    ...else if ... tie-breaker decisions - name? ...
    return 0; 
} 
```

我将显示的结构用于比较器函数，因为它是可扩展的，并且因为它避免了算术溢出问题。在这个应用程序中，两次之间的差异不太可能导致问题，但避免麻烦仍然是一个好主意，并且减去两个整数通常会导致溢出（环绕）。

* * *

在您的代码中：

```
 printf("%s %s %s \t %d:%d,%d\n", array[i].lname, array[i].fname, 
           array[i].country, &array[i].otime.mins, 
       &array[i].otime.secs, &array[i].otime.fsecs); 
```

我的编译器抱怨`&`,和. 如果您的编译器没有这样做，请调高警告级别，直到它这样做，或者获得更好的编译器。`mins``secs``fsecs`

您的运动员打印代码使用 的`otime`子结构`struct olympians`，但您的代码没有设置它（并且它复制了单独成员`mins`、`secs`、中的值`fsecs`）。这让我在调试代码时偏离了轨道。此代码有效。它包括一个单独的小函数`print_athlete()`（可能应该是`print_olympian()`）来打印单个运动员，并且`print_struct_array()`代码使用它 - 但我也能够在找出输入数据没有在输出中打印的原因时使用它（那个调用仍在代码中）。阅读后回显输入是一种基本的调试技术。该代码还检查是否`malloc()`成功。（我通常有一个功能，如`void dump_olympian(FILE *fp, const char *tag, const struct olympian *athlete);`将复杂结构打印到指定文件。该标签也被打印出来，这使我可以注释对转储函数的每个调用。转储函数通常应该转储结构的每个元素。）

在生产代码中，我有一组函数，例如使用函数之类`extern void err_error(const char *fmt, ...);`的接口报告错误`printf()`；`err_error()`也退出。这将 4 行错误报告减少到只有 1 行，这意味着我更有可能这样做。

对于输入数据（注意`.`和的开关`,`）：

```
4
ADLINGTON Rebecca GBR 4:03,01 
MUFFAT Camille FRA 4:01,45  
FRIIS Lotte DNK 4:03,98 
SCHMITT Allison USA 4:01,77 
```

输出是：

```
Processing 4 athletes
Rebecca ADLINGTON GBR    4:3,1
Camille MUFFAT FRA   4:1,45
Lotte FRIIS DNK      4:3,98
Allison SCHMITT USA      4:1,77

Rebecca ADLINGTON GBR    4:3,1
Camille MUFFAT FRA   4:1,45
Lotte FRIIS DNK      4:3,98
Allison SCHMITT USA      4:1,77

Camille MUFFAT FRA   4:1,45
Allison SCHMITT USA      4:1,77
Rebecca ADLINGTON GBR    4:3,1
Lotte FRIIS DNK      4:3,98 
```

第一个块来自输入循环中的调试打印；另外两个是之前和之后的图像，当然，来自您的原始代码。

* * *

### 未解决的问题

您需要解决一个问题（分两部分）。简单的一点是输出：

```
Rebecca ADLINGTON GBR    4:3,1 
```

应该

```
Rebecca ADLINGTON GBR    4:3,01 
```

甚至：

```
Rebecca ADLINGTON GBR    4:03,01 
```

这可以通过在打印格式中使用`%.2d`而不是修复。`%d`

困难的部分是，如果输入时间字符串是：

```
4:03,1 
```

它需要被视为 4:03,10 而不是 4:03,01。更糟糕的是，4:3,9 应该是 4:03,90，而不是 4:03,09；这让运动员在排序中获得了 0.81 秒的优势，仅仅是因为省略了尾随的零（所以它确实很重要）。这将需要不同的输入代码；我什至可以用 将小数部分读入长度为 3 的字符串`%2[0-9]`，然后将其后处理成一个数字。这样您就可以判断输入的是一位数还是两位数。

`time`顺便说一句，您可以通过直接对组件进行排序来避免转换为完全，然后比较器的系统结构变得有益：

```
int struct_cmp_by_time(const void *a, const void *b) 
{ 
    const struct olympians *ia = (struct olympians *)a;
    const struct olympians *ib = (struct olympians *)b;
    int rc;
    if (ia->mins > ib->mins)
        return +1;
    else if (ia->mins < ib->mins)
        return -1;
    else if (ia->secs > ib->secs)
        return +1;
    else if (ia->secs < ib->secs)
        return -1;
    else if (ia->fsecs > ib->fsecs)
        return +1;
    else if (ia->fsecs < ib->fsecs)
        return -1;
    else if ((rc = strcmp(ia->lname, ib->lname)) < 0)
        return -1;
    else if (rc > 0)
        return +1;
    else if ((rc = strcmp(ia->fname, ib->fname)) < 0)
        return -1;
    else if (rc > 0)
        return +1;
    return 0; 
} 
```

（总的来说，您已经非常接近于正确编写代码了——做得很好。）

### 轻度被黑但有效的代码

并非所有推荐的更改都在此代码中，但它或多或少会产生合理的输出。

```
#include <stdio.h>
#include <stdlib.h>

struct mtime_t {
    int mins;
    int secs;
    int fsecs;
};
typedef struct mtime_t mtime;

struct olympians { 
    char fname[15];
    char lname[15];
    char country[4];
    int time;
    int mins, secs, fsecs;
    mtime otime;
};

/* qsort struct comparison function (time float field) */ 
int struct_cmp_by_time(const void *a, const void *b) 
{ 
    struct olympians *ia = (struct olympians *)a;
    struct olympians *ib = (struct olympians *)b;
    return (int)(60*ia->time - 60*ib->time); 
}

static void print_athlete(const struct olympians *ath)
{
    printf("%s %s %s \t %d:%d,%d\n", ath->lname, ath->fname, ath->country,
            ath->mins, ath->secs, ath->fsecs);
}

/* struct array printing function */ 
void print_struct_array(struct olympians *array, size_t len) 
{ 
    size_t i;
    for(i=0; i<len; i++) 
        print_athlete(&array[i]);
    puts("\n");
} 

/* sorting structs using qsort() */ 
void sort_structs_time(void) 
{ 
    int i, ath_num;

    struct olympians *ath_recs;
    scanf("%d", &ath_num);
    printf("Processing %d athletes\n", ath_num);

    ath_recs = (struct olympians *) malloc(ath_num*sizeof(struct olympians));
    if (ath_recs == 0)
    {
        fprintf(stderr, "Out of memory\n");
        exit(1);
    }

    for(i = 0; i < ath_num; i++) {
        if (scanf("%14s %14s %3s %d:%2d,%2d\n", ath_recs[i].fname, ath_recs[i].lname, 
              ath_recs[i].country, &ath_recs[i].mins, &ath_recs[i].secs, &ath_recs[i].fsecs) != 6)
        {
            fprintf(stderr, "Ooops\n");
            exit(1);
        }
        ath_recs[i].time = (ath_recs[i].mins * 60 + ath_recs[i].secs) * 100 +
                               ath_recs[i].fsecs;
        print_athlete(&ath_recs[i]);
    }

    puts("\n");

    /* print original struct array */ 
    print_struct_array(ath_recs, ath_num);

    /* sort array using qsort function */ 
    qsort(ath_recs, (size_t) ath_num, sizeof(struct olympians), struct_cmp_by_time);

    /* print sorted struct array */ 
    print_struct_array(ath_recs, ath_num);
}  

/* call to the function) */ 
int main(void) 
{ 
    /* run the function */
    sort_structs_time();
    return 0;
} 
```

# css - GWT 日期选择器滚动问题

> ID：12180021
> 
> 赞同：1
> 
> 时间：2012-08-29T14:15:41.693
> 
> 标签：css, gwt

我在我的网页中使用 GWT datepicker。当我在页面底部添加时，它的行为非常异常，如快照所示。

我尝试使用 z-index 和一些已知的 css 属性。但我没有从 digg 中出来。任何其他 css 或日期选择器属性都可以解决这个问题？

![在此处输入图像描述](../Images/60f56f6c382bc8ad98a45bf8b23ac214.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:12:16.170

![在此处输入图像描述](../Images/b06445cc53f448a64838dd56b9427b23.png)我得到了解决方案

```
dateIcon.addClickHandler(new ClickHandler() 
    {
        @Override
        public void onClick(ClickEvent event) 
        {
            int left = dateIcon.getAbsoluteLeft() + 30;
            int top = dateIcon.getAbsoluteTop() + 10;
            if(dateIcon.getAbsoluteTop()+400>Window.getClientHeight()){
                top = dateIcon.getAbsoluteTop()-200; 
            }
            popUp.setPopupPosition(left, top);
            if (isControlEnabled()) 
        ![enter image description here][2]  {
                popUp.show();
            } else 
            {
                popUp.hide();
            }
        }
    }); 
```

# sql - 安装 SQL Server 2008

> ID：12180023
> 
> 赞同：-2
> 
> 时间：2012-08-29T14:15:50.367
> 
> 标签：sql, database, sql-server-2008

我在 Windows 7 32 位机器上安装 SQL Server 2008 时遇到问题。我收到未处理的异常错误消息。

这些有什么解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:18:05.857

您是否尝试过在网上搜索“sql server 2008 b77a5c561934e089”？

*   [Sql Server 2008 R2 Express 安装问题](http://social.msdn.microsoft.com/Forums/en-US/sqlsetupandupgrade/thread/90df9616-c269-48b0-8951-f50e0c2fabca)
*   [SQL Server 2008 安装程序 - Microsoft Corporation：软件](http://social.msdn.microsoft.com/Forums/en-US/sqlsetupandupgrade/thread/49a20ee4-7f21-41da-99f3-b031411c747e)
*   [安装 SQL SERVER 2008 时出现 Microsoft 框架错误](http://social.msdn.microsoft.com/Forums/en-US/sqlgetstarted/thread/6eb11052-2508-4446-9c41-f7b4047de984)

其中两个帖子建议删除 C:\Users\rethabile\AppData\Local\Microsoft_Corporation 文件夹并重试。另一个说你不能安装在压缩的驱动器上。

# cocos2d-iphone - 以弧形或曲线路径移动 box2d 实体

> ID：12180024
> 
> 赞同：0
> 
> 时间：2012-08-29T14:15:51.783
> 
> 标签：cocos2d-iphone, box2d, physics, box2d-iphone

如何使 b2Body 沿弧形或弯曲路径移动？我听说过 cocos2d 贝塞尔曲线函数（ccBezier），但这是用于移动 cocos2d 精灵的。或者可以修改它以移动 box2d 物体吗？任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:39:18.633

不要以为你可以修改它来移动身体。在 CCNode 子类的情况下，此函数使用`setPosition:`方法。如果您使用 b2Body 对象的方法在每个刻度上更改身体的位置`SetTransform`，它将忽略所有可能的碰撞。

您可以尝试将线速度设置为物理体。在这种情况下，您需要根据需要更改（旋转）速度矢量。

# python - biopython - Entrez.esearch() 查询翻译与我的查询不对应

> ID：12180035
> 
> 赞同：1
> 
> 时间：2012-08-29T14:16:47.603
> 
> 标签：python, biopython

我是 Biopython 的新手。使用此代码：

```
handle = Entrez.esearch(db="nuccore", term="complete", field="title", FILT="refseq", porgn="viruses", rettype='xml')
print Entrez.read(handle)[u'QueryTranslation'] 
```

我得到：

```
complete[Title] 
```

但我期待这样的事情：

```
complete[Title] AND "viruses"[porgn] 
```

（来自[http://www.ncbi.nlm.nih.gov/nuccore](http://www.ncbi.nlm.nih.gov/nuccore)搜索结果的查询翻译）

refseq 过滤器似乎也不起作用。我究竟做错了什么？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:11:37.157

根据当前的 NCBI 文档，没有选项 FILT 或 progrn - NCBI 可能默默地忽略它们（我个人更喜欢它们的明确错误消息）。

基于[http://www.ncbi.nlm.nih.gov/books/NBK25499/#chapter4.ESearch](http://www.ncbi.nlm.nih.gov/books/NBK25499/#chapter4.ESearch)你现在可以做

```
>>> from Bio import Entrez
>>> handle = Entrez.esearch(db="nuccore", term="complete", field="title", rettype='xml')
>>> print Entrez.read(handle)[u'QueryTranslation']
complete[Title] 
```

作为替代方案：

```
>>> from Bio import Entrez
>>> handle = Entrez.esearch(db="nuccore", term="complete[title]", rettype='xml')
>>> print Entrez.read(handle)[u'QueryTranslation']
complete[Title] 
```

该字段选项（我很确定）是 NCBI 的一项新功能，但实际上并没有添加任何新功能。这似乎只对琐碎的搜索有意义。

为了进行您想要的复杂搜索，请执行以下操作：

```
>>> from Bio import Entrez
>>> handle = Entrez.esearch(db="nuccore", term="complete[title] AND viruses[porgn]", rettype='xml')
>>> print Entrez.read(handle)[u'QueryTranslation']
complete[title] AND viruses[porgn] 
```

Biopython 教程中有这样的例子。另请参阅[http://news.open-bio.org/news/2009/06/ncbi-einfo-biopython/](http://news.open-bio.org/news/2009/06/ncbi-einfo-biopython/)（现在也在 Biopython 教程中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:07:07.500

我认为您需要编辑`term`关键字参数。你需要包括`AND viruses[porgn]`

```
>>> handle = Entrez.esearch(db="nuccore", term="complete AND viruses[porgn]", field="title", FILT="refseq", rettype='xml')
>>> print Entrez.read(handle)[u'QueryTranslation']
complete[Title] AND viruses[porgn] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T20:34:10.767

要添加 RefSeq 要求，您可以执行

```
>>> from Bio import Entrez
>>> handle = Entrez.esearch(db="nuccore", term="complete[title] AND refeq[filter] AND viruses[porgn]", rettype='xml') 
```

# c# - 随机打乱列表

> ID：12180038
> 
> 赞同：7
> 
> 时间：2012-08-29T14:16:58.213
> 
> 标签：c#, list, random, shuffle

> **可能重复：**
> [在 C# 中随机化一个 List<T>](https://stackoverflow.com/questions/273313/randomize-a-listt-in-c-sharp)
> [随机播放（随机重新排列）一个 List<string>](https://stackoverflow.com/questions/5383498/shuffle-rearrange-randomly-a-liststring)
> [随机绘图算法](https://stackoverflow.com/questions/9557883/random-plot-algorithm)

嗨，我有以下列表，我想将其输出`model`到列表中，但这样做是随机的。我看过一些例子，但它们似乎真的很令人困惑。我只是想要一个简单的方法来做到这一点？

```
List<Car> garage ----randomise------> List<string> models

List<Car> garage = new List<Car>();

garage.Add(new Car("Citroen", "AX"));
garage.Add(new Car("Peugeot", "205"));
garage.Add(new Car("Volkswagen", "Golf"));
garage.Add(new Car("BMW", "320"));
garage.Add(new Car("Mercedes", "CLK"));
garage.Add(new Car("Audi", "A4"));
garage.Add(new Car("Ford", "Fiesta"));
garage.Add(new Car("Mini", "Cooper")); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-29T14:17:39.243

我想你想要的就是这个，这是一种简单的方法；

```
Random rand = new Random();
var models = garage.OrderBy(c => rand.Next()).Select(c => c.Model).ToList(); 
```

//模型假设这是您的属性的名称

注意：具有讽刺意味的是，Random() 实际上并不是很随机，但对于快速简单的解决方案来说很好。有更好的算法可以做到这一点，这里有一个；

[http://en.wikipedia.org/wiki/Fisher-Yates_shuffle](http://en.wikipedia.org/wiki/Fisher-Yates_shuffle)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-29T14:18:50.600

我已经看到这个 pre-LINQ 的一些混乱代码，但是 LINQ 方式看起来很干净。

也许试一试？

[http://www.ookii.org/post/randomizing_a_list_with_linq.aspx](http://www.ookii.org/post/randomizing_a_list_with_linq.aspx)

```
Random rnd = new Random();
var randomizedList = from item in list
                     orderby rnd.Next()
                     select item; 
```

# javascript - javascript中的正则表达式问号

> ID：12180040
> 
> 赞同：1
> 
> 时间：2012-08-29T14:17:00.847
> 
> 标签：javascript, regex, validation

这可能很简单，但我不知道该怎么做。

我有这个正则表达式：

```
new RegExp("^[A-Za-z\\u00C0-\\u017F][\\- ]?+$"); 
```

它验证名字。名称必须以字母开头（范围为 unicode 且工作正常），然后以字母或 - 或空格继续。但它可以只是字母，就像大多数名字一样。

我已经搜索过，但我没有找到正确的方法。

我不想复制字符范围。只是为了让代码更“正确”。

如果您能提供帮助，那就太好了:)

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T14:19:14.013

现在您只允许*一个*字母，然后是一个或多个破折号/空格。你可能想要

```
new RegExp("^[A-Za-z\\u00C0-\\u017F][A-Za-z\\u00C0-\\u017F -]*$"); 
```

但总的来说，尝试使用正则表达式验证名称并不是一个好主意。

# java - 不读取文件？

> ID：12180041
> 
> 赞同：2
> 
> 时间：2012-08-29T14:17:03.300
> 
> 标签：java, netbeans, bufferedreader, filereader, filewriter

所以我想读取一个文本文件，但由于某种奇怪的原因它找不到该文件。我以前使用过这些方法，因此我不知道为什么这不起作用，有人可以帮助我吗？

## 编辑：

抱歉，我遗漏了一大段信息，即它可以在写入文件时找到文件，但在读取文件时找不到。感谢你们所有人的帮助，很抱歉浪费您的时间问一个我不需要答案的问题......再次抱歉。

## 更多信息：

“Assets.txt”位于项目的根文件夹以及 src/assetregistry 中

程序运行时会出现“Assets.txt”

我得到的只是来自 readFromFile() 方法中的 catch 异常的 JOption 消息

根据assetRegistry的属性，工作目录是

```
"C:\Users\Justin\Documents\NetBeansProjects\assetregistry\src\assetregistry" 
```

***感谢所有提供帮助的人，尤其是 Chris 和 Andrew Thompson。该程序现在可以运行，以下是更新版本。如果需要，请随意复制。这真的是一个简单的程序。***

# 主类：

```
package assetregistry;
import java.io.IOException;
import javax.swing.JOptionPane;

public class Assetregistry {

public static void main(String[] args) throws IOException {
    new Assetregistry();
}

assetArray aa = new assetArray();

public Assetregistry() throws IOException {
    aa.readFromFile ();
    char choice = 'Z';
    while (choice != 'X') {
        choice = menu();
        options(choice);
    }
}   

public char menu() {
    char ch = JOptionPane.showInputDialog("\t" + "Welcome to asset registry. Please input your choice" + "\n" + "A: Enter new asset" + "\n" + "B: Calculate depreciation and display" + "\n" + "X: Exit").toUpperCase().charAt(0);
    return ch;
}

private void options(char c) throws IOException {

    switch (c) {
        case 'A':
            aa.enterAsset();
            break;
        case 'B':
            aa.calculate();
            break;
        case 'X':
            System.exit(0);
            break;
    }
}
} 
```

# 数组/方法类

```
package assetregistry;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.StringTokenizer;
import javax.swing.JOptionPane;

public class assetArray {

asset[] aArr = new asset[100];
private double year;
private double month;
private int count = 0;
Assetregistry AR;
String home = System.getProperty("user.home");
File userHome = new File(home);
File file = new File(userHome,"Assets.txt");

public assetArray() throws IOException {
}

public void enterAsset() throws IOException {

    int choice = JOptionPane.YES_OPTION;
    while (choice == JOptionPane.YES_OPTION) {
        String name = JOptionPane.showInputDialog("Enter asset name");
        double costP = Double.parseDouble(JOptionPane.showInputDialog("Enter the cost price of the asset"));
        int lSpan = Integer.parseInt(JOptionPane.showInputDialog("Enter the amount of years you wish to keep the asset"));
        double mBought = Double.parseDouble(JOptionPane.showInputDialog("Enter the month the asset was bought (As a number)"));
        double yBought = Double.parseDouble(JOptionPane.showInputDialog("Enter the year the asset was bought"));
        double depr = (1.00 / lSpan * 100.00);
        aArr[count] = new asset(name, costP, lSpan, yBought, mBought, depr);
        PrintWriter pw = new PrintWriter(new FileWriter(file, true));
        pw.println(aArr[count].toString());
        pw.close();
        count++;
        choice = JOptionPane.showConfirmDialog(null, " Do you want to enter another asset?", " Enter another asset?", JOptionPane.YES_NO_OPTION);
    }
}

public void calculate() {
    String name;
    int lSpan;
    double ybought;
    double mbought;
    double pValue;
    double Rate;
    double deprExp;
    double numYears;
    double fValue;
    double accDepr;
    String[] mnth = new String[12];
    mnth[0] = "January";
    mnth[1] = "February";
    mnth[2] = "March";
    mnth[3] = "April";
    mnth[4] = "May";
    mnth[5] = "June";
    mnth[6] = "July";
    mnth[7] = "August";
    mnth[8] = "September";
    mnth[9] = "October";
    mnth[10] = "November";
    mnth[11] = "December";

    if (count > 0) {
        year = Integer.parseInt(JOptionPane.showInputDialog("Enter the year you wish to calculate depreciation for"));
        month = Integer.parseInt(JOptionPane.showInputDialog("Enter the month you wish to calculate depreciation for"));
        int m = (int) month;
        int y = (int) year;
        System.out.println("Asset regestry" + "\t" + mnth[m-1] + "  " + y);
        for (int i = 0; i < count; i++) {
            name = aArr[i].getName();
            lSpan = aArr[i].getLifeSpan();
            ybought = aArr[i].getyBought();
            mbought = aArr[i].getmBought();
            pValue = aArr[i].getCostP();
            Rate = aArr[i].getDeprR();
            int m2 = (int) mbought;
            int y2 = (int) ybought;
            deprExp = pValue - (pValue * ((1.00 - ((Rate))) * 1.00 / 100.00));
            numYears = (year + (month / 12.00)) - (ybought + mbought / 12.00);
            fValue = pValue * (1.00 - (((Rate) * (numYears)) / 100.00));
            if (fValue <= 0.00) {
                fValue = (int) 1;
            }
            accDepr = pValue - fValue;
            System.out.println("\n" + "Asset:  " + name);
            System.out.println("Life span:  " + lSpan + "yrs");
            System.out.println("Cost price:  " + "R" + pValue);
            System.out.println("Date acquired:  " + mnth[m2-1] + "  " + y2);
            System.out.println("Depreciatin rate (p.a.):  " + Rate + "%");
            System.out.println("Depreciation(p.a.):  R" + deprExp);
            System.out.println("Accumulated depreciation:  R" + accDepr);
            System.out.println("Current book value:  R" + fValue);
            System.out.println("_________________________________________");
        }
    } else {
        JOptionPane.showMessageDialog(null, "There are no assets in memory", "NO ASSETS!", JOptionPane.ERROR_MESSAGE);
    }

}

/**
 *
 */
public void readFromFile() {
    String line = "";
    try {
        BufferedReader fr = new BufferedReader(new FileReader(file));
        line = fr.readLine();
        while (line != null) {
            StringTokenizer stk = new StringTokenizer(line, "#");
            String name = stk.nextToken();
            double costP = Double.parseDouble(stk.nextToken());
            int lSpan = Integer.parseInt(stk.nextToken());
            double yBought = Double.parseDouble(stk.nextToken());
            double mBought = Double.parseDouble(stk.nextToken());
            double deprR = Double.parseDouble(stk.nextToken());
            aArr[count] = new asset(name, costP, lSpan, yBought, mBought, deprR);
            count++;
            line = fr.readLine();

        }
        fr.close();
    } catch (Exception e) {
        JOptionPane.showMessageDialog(null, "There is a file missing.", "FILE MISSING!", JOptionPane.ERROR_MESSAGE);
    }
}
} 
```

# 资产类别

```
package assetregistry;

/**
 *
 * @author Justin
 */
public class asset {

private String name;
private double costP;
private int lifeSpan;
private double yBought;
private double mBought;
private double deprR;

public asset(){
}

public asset(String name, double costP, int lifeSpan, double yBought, double mBought, double deprR) {
this.name = name;
this.costP = costP;
this.lifeSpan = lifeSpan;
this.yBought = yBought;
this.mBought = mBought;
this.deprR = deprR;
}

public String getName() {
return name;
}

public void setName(String name) {
this.name = name;
}

public double getCostP() {
return costP;
}

public void setCostP(double costP) {
this.costP = costP;
}

public int getLifeSpan() {
return lifeSpan;
}

public void setLifeSpan(int lifeSpan) {
this.lifeSpan = lifeSpan;
}

public double getyBought() {
return yBought;
}

public void setyBought(double yBought) {
this.yBought = yBought;
}

public double getmBought() {
return mBought;
}

public void setmBought(double mBought) {
this.mBought = mBought;
}

public double getDeprR() {
return deprR;
}

public void setDeprR(double deprR) {
this.deprR = deprR;
}

@Override
public String toString ()
{
String stg = "";
stg += name + "#" + costP + "#" + lifeSpan + "#" + yBought + "#" + mBought + "#" + deprR + "#";
return stg;
}   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:23:52.277

```
String home = System.getProperty("user.home");
System.out.println("User home directory is: " + home);
File userHome = new File(home);
// Put files in a known and reproducible path!
File file = new File(userHome, "Assets.txt"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T16:28:50.437

这取决于您在文件系统中放置“Assets.txt”的位置。如果您从 netbeans 内部运行代码，则该行：

```
File file = new File("Assets.txt"); 
```

将在项目的根文件夹中查找文件，例如 */NetBeansProjects/INSERT_PROJECT_NAME/（如果不是，那么它将在应用程序运行所在的同一目录中查找文件）。我注意到你有线：

```
URL url = AR.getClass().getResource("/Assets.txt"); 
```

但是您从不在代码中使用 url。您是否尝试在与“Assetregistry”类相同的目录中查找文件，却忘记使用 url 指定位置？如果是这种情况，则从名称的开头删除“/”并像这样构造文件：

```
URL url = Assetregistry.class.getResource("Assets.txt");
File file = new File(url.toURI()); 
```

希望这可以帮助 ：）

# jpa - JPA 和添加的最后一个对象

> ID：12180043
> 
> 赞同：0
> 
> 时间：2012-08-29T14:17:06.920
> 
> 标签：jpa, jpa-2.0, eclipselink

我使用 EclipseLink JPA 和我的工作。并使用 GenerationType.TABLE。

当我使用持久化创建新对象时，如何检索创建对象的 id 字段。

例子：

```
em.getTransaction().begin();

Student student = new Student();

student.setName("Joe");

em.persist(student);
em.flush();
em.getTransaction().commit();

Query query = em.createQuery("SELECT e FROM Student e");
List<Student> list = (List<Student>) query.getResultList();
System.out.println(list);

em.close();
emf.close(); 
```

所以我看到所有的学生，但是你怎么知道我在一个有竞争的环境中创造了哪一个。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:05:45.067

我假设问题是关于生成的 id，否则你当然已经有了 id。

在flush操作后可以找到生成的id，如下所示：

1.  打电话`student.nameOfTheGetterForID`
2.  通过[PersistenceUnitUtil.getIdentifier](http://docs.oracle.com/javaee/6/api/javax/persistence/PersistenceUnitUtil.html#getIdentifier%28java.lang.Object%29)：

    //将结果转换为id的类型
    em.getEntityManagerFactory().getPersistenceUnitUtil().getIdentifier(student);

# java - 在android中设置相对布局的高度和宽度

> ID：12180047
> 
> 赞同：0
> 
> 时间：2012-08-29T14:17:31.147
> 
> 标签：java, android

这是我的场景。

我有一个按照分辨率 320*480 制作的图像（假设我使用的是 mdpi 移动设备）。我将此图像作为背景添加到相对布局中。

现在我的屏幕有三个主要的东西。

```
1- Title bar (The standard title bar of android)
2- My relative layout and its sub view image relative layout which is matched parent.
3- My menu bar at the bottom. 
```

现在因为我的图像在菜单栏和标题栏之间被拉伸了。我想让它适合屏幕。下面是我正在使用的代码。

```
 mainLayout.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

            public void onGlobalLayout() 
        {
           if (notCreated == true)
           {
               notCreated = false;
           }
           else
           {
               mnHeight = mainLayout.getHeight();
               Rect rect = getRawCoordinatesRect(mainLayout);
               h = getWindowManager().getDefaultDisplay().getHeight() -  
                       - rect.top - mainLayout.getHeight();
// rect.top to remove android standard title bar

               RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(image.getWidth(),LayoutParams.MATCH_PARENT);
               params.topMargin = -1 * rect.top;
               params.bottomMargin = -1 * h;
               image.setLayoutParams(params);

       }
    }

}); 
```

现在这行不通。一点帮助将不胜感激。

注意：实际上我只是想将我的图像相对布局拉伸到 320*480。现在它夹在标题栏和我的菜单栏之间。例如，现在它的尺寸是 320*400

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:22:54.943

不确定它是否会有所帮助，但尝试`setScaleType()`尝试不同的选项。

```
image.setScaleType(ScaleType.FIT_CENTER); 
```

[这里列出了 ScaleType 类的所有常量。](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:27:21.700

我必须诚实地说我不完全确定你想在这里做什么。但我会假设你想让图像功能作为背景。如果这是你想要的，你可以简单地通过在主布局上设置 android:background="@drawable/your_image" 属性来做到这一点你的布局文件。

如果您想要删除标题栏，只需将此行添加到活动类中的 onCreate 方法即可完成：

```
//Remove title bar
this.requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

如果您想要删除通知栏，这也可以在活动类的 onCreate 方法中完成：

```
//Remove notification bar
this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

我希望这可以帮助你:-) 如果这不是你要找的东西，那么不要犹豫，尝试重新制定你想要的东西。

# c - 了解此输入中的动态分配，c

> ID：12180052
> 
> 赞同：1
> 
> 时间：2012-08-29T14:17:36.250
> 
> 标签：c, arrays

假设我想输入一个整数平方。在每一行上，每对整数由一个空格分隔。所以下面的代码工作得很好：

```
//size of the square
int N;
scanf("%d",&N);
int **c;
c = malloc(N*sizeof(int*));

for (i=0;i<N;i++)
{   c[i] = malloc(2*sizeof(int));
    for (j=0;j<2;j++)
    {scanf("%d",&c[i][j]);}
} 
```

所以在这里我不明白为什么不考虑空间（为什么它工作:-)）？相反，如果我使用数组 c[N][N]，它就不会起作用，因为每个空格都会被解释为数组的输入

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:36:45.883

```
int N;
scanf("%d",&N);
int c[N][N];   /* Error */ 
```

`c[][]`创建时必须知道的大小。这意味着 N 不能从输入中动态获得。

**编辑：** 正如 Jonathan Leffler 所指出的，一些编译器支持在运行时确定数组大小。它是 C99 标准的一部分，但在随后的 C11 标准中它是可选的。

虽然可选功能可能很棒，但它们会降低程序的可移植性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:19:22.780

好吧，基本上，scanf 的每次调用都将以空格分隔。

# mysql - 在 SQL 中使用数组

> ID：12180055
> 
> 赞同：0
> 
> 时间：2012-08-29T14:17:38.777
> 
> 标签：mysql, variables

我有这个 sql 语句：

```
DECLARE @option_id INT;

SELECT DISTINCT product_options.option_id
INTO   @option_id
FROM   product_options,
       product_options_descriptions
WHERE  product_options.product_id = '31288'
       AND product_options_descriptions.option_name = "Color";

SELECT @option_id; 
```

哪个工作正常。我想做的是使用 @option_id 将多个 id 选择到一个数组中。但是据我所知，DECLARE @var 仅适用于单个值，并且我在 sql 中找不到有关数组数据类型的任何信息。

在大纲中，我想做以下事情

```
declare @option_id;
SELECT @option_id;
DECLARE @id_array;
SELECT into @id_array WHERE id = @option_id;
DECLARE @return_array;
FOREACH @id IN @id_array {
@return_array[] = SELECT value FROM column where id = @id
}
SELECT @return_array 
```

有谁知道我在哪里可以找到实现这一目标的教程等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:19:19.660

您可以使用临时表，表前缀为#

```
CREATE TABLE #YourTable (  
  YourColumn int 
) 
```

链接：[http ://www.sqlteam.com/article/temporary-tables](http://www.sqlteam.com/article/temporary-tables)

对于 mysql 语法：[http ://dev.mysql.com/doc/refman/5.1/en/create-table.html](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)

# batch-file - 如何在批处理文件中执行 Winrar

> ID：12180056
> 
> 赞同：1
> 
> 时间：2012-08-29T14:17:40.927
> 
> 标签：batch-file, winrar, sfx

在 WinRAR 的实际 UI 中，您可以创建一个 sfx 文件并具有以下 sfx 选项：

**在常规选项卡下：**
提取路径：在当前文件夹中创建

**在模式选项卡下：**
静音模式：全部隐藏

**在文本和图标选项卡下：**
从文件中加载 SFX 图标：*选择特定文件*

我将如何使用批处理文件来做到这一点？

另外，我将如何使用批处理方法添加一个目录，而不仅仅是一个文件？

我不太擅长批处理文件，哎呀——我从来没有做过批处理文件——我只是在看开关，我不知道该怎么做。请，如果有人可以告诉我甚至指导我，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:36:57.187

您需要使用 winrar 命令行，GUI 不利于通过批处理文件进行操作。

例如;

```
winrar a -sfx -z"XXX.INI" OUTPUT.EXE 
```

`XXX.INI`是一个包含 sfx 选项的文本文件，如 WinRar 帮助文件中的“ *SFX 命令*`silent=1`”下所示，例如.

（还有一个*SFX 命令：脚本示例*）

# mysql - 存储敏感数据

> ID：12180057
> 
> 赞同：0
> 
> 时间：2012-08-29T14:17:43.597
> 
> 标签：mysql, security, filesystems

假设我想存储 terminalCode、merchantCode、pin、user、pass ... 以连接到 Web 服务，我应该将它们存储在系统上的 Web 根目录之外的配置文件中，还是将它们存储在具有特殊权限的单独数据库表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:22:16.070

只要您确保对 cPanel FTP 等的访问受到良好密码的保护，将它们存储在您的 webroot 之外的文件中是非常安全的。

或者在使用 PHP 的示例中，您可以将访问数据库的凭据存储在 webroot 之外的 PHP 包含文件中的 PHP 变量中，并在任何将访问数据库的 PHP 文件中引用它。然后你可以让你的用户名和密码超长并且很难破解，你只需要输入一次（在包含文件中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:26:15.623

根据您的网络服务器设置，可能会有更简单的方法；例如，使用`.config`Apache 服务器在默认配置中隐藏的点文件（例如 ）。

# ios - IOS Developer企业程序应用分发

> ID：12180062
> 
> 赞同：0
> 
> 时间：2012-08-29T14:17:56.607
> 
> 标签：ios

我在任何地方都找不到这个问题的答案，所以因为在 stackOverflow 中，我总是能从专业人士那里得到很好的编码问题答案，我想在这些问题上获得帮助。我熟悉 IOS 开发人员计划（99 美元），但我有两个客户订购了 iPhone 应用程序并希望仅在他们的公司内部分发，所以我需要再见企业计划（299 美元）。

1.  如果我希望 A 公司只能更新和删除她的应用程序，我是否需要开设 2 个不同的企业帐户？
2.  公司将如何将应用分发给员工？
3.  更新应用程序如何工作，每个公司将使用自己的应用程序商店之类的选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:29:05.750

如果您不使用两个单独的帐户，每个客户一个，那么两个客户的应用程序将存在于同一商店中。

当我们为企业客户开发时，我们要求他们获得自己的企业许可证。无论如何，此过程都需要一个 DUNS 编号。不仅仅是任何人都可以获得企业许可证。

# zend-form - Zend_Validation 在 ZF2 中的翻译

> ID：12180064
> 
> 赞同：1
> 
> 时间：2012-08-29T14:18:01.147
> 
> 标签：zend-form, zend-framework2, zend-validate

我在 Zend Framework 2 中有一个奇怪的问题。我使用了 Zend Skeleton Application (https://github.com/zendframework/ZendSkeletonApplication) 并将 PhlyContact 添加为供应商模块 (https://github.com/weierophinney/PhlyContact) . 我将 Translation-Type 更改为 PhpArray，以便我可以使用位于 ZF2-Dist 的资源目录中的 Zend_Validate.php。

一切都翻译除了验证消息：/所以我想我错过了一些东西：

*   我必须将 Translator 传递给 Zend_Validate（但是如何以及在哪里？）
*   翻译应该使用文本域，但不

当我记得在 ZF1 中时，您必须将 Translator 设置为默认值才能将其传递给 Zend_Validate。对此有任何想法！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:57:01.327

看看这些方法

```
\Zend\Validator\AbstractValidator::setDefaultTranslator();
\Zend\Validator\AbstractValidator::setDefaultTranslatorTextDomain(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-03T13:13:10.317

你甚至可以只用一行来做到这一点（第二个参数是文本域）：

`AbstractValidator::setDefaultTranslator($translator, 'default');`

Module.php 中的示例：

```
use Zend\Validator\AbstractValidator;

class Module 
{

    public function onBootstrap(MvcEvent $e) 
    {
        $translator = ....
        AbstractValidator::setDefaultTranslator($translator, 'default');
    }
} 
```

# asp.net - 单个域上的两个 Web 应用程序

> ID：12180065
> 
> 赞同：2
> 
> 时间：2012-08-29T14:18:02.740
> 
> 标签：asp.net, web-services, dns, hyperlink

客户在其本地服务器上安装了一个业务应用程序，并带有一个客户数据库。我必须实现一个应用程序（web 或 win），它将查询数据库并根据某些规则向客户发送邮件。

但是，其中一个要求是邮件应该有一个链接，允许他们的客户确认或取消某些约会，问题是我的客户希望这些链接与他们的网站具有相同的域，该网站已经托管在某个地方别的。

在我看来，这样做的唯一方法是让他们允许我访问他们现有的网站，并直接在那里添加必要的功能，但他们对此并不满意。

是否可以将单独的应用程序添加到位于同一域中的同一托管服务提供商？

还是你有更好的主意？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T14:19:30.553

您可以使用子域或使用子目录并使其成为 IIS 中的应用程序。

1) 子域在 IIS 中添加一个新网站并添加到子域的绑定。所以可以说他们的主要网站是 www.company.com 您将添加绑定 yourwebapplication.company.com

2) 在 IIS 中选择网站，右键单击并选择： 添加应用程序 网站不一定要在子文件夹中，只要您正确设置了权限，它就可以在任何地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:21:49.990

您可以为此使用 IIS 虚拟目录。

[创建虚拟目录 (IIS 7)](http://technet.microsoft.com/en-us/library/cc771804%28v=ws.10%29.aspx)

# html - 防止在` `标签之前或之后换行

> ID：12180070
> 
> 赞同：4
> 
> 时间：2012-08-29T14:18:14.747
> 
> 标签：html, css

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T14:21:40.350

使用 CSS 属性使您的锚标记内联`display: inline`，例如：

```
 <a style="display: inline;" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:20:55.297

除非您添加了 css，否则它根本不应该被破坏。

尝试：

```
display: inline;
clear: none; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T11:28:07.063

这绝对是 Aldiko 中的一个错误。我已经报告了它，正在等待他们修复它。

# python - 我怎么知道我的子进程是否在等待我的输入？（在 python3 中）

> ID：12180073
> 
> 赞同：7
> 
> 时间：2012-08-29T14:18:22.847
> 
> 标签：python, python-3.x, subprocess

文件 sp.py：

```
#!/usr/bin/env python3
s = input('Waiting for your input:')
print('Data:' + s) 
```

文件 main.py

```
import subprocess as sp
pobj = sp.Popen('sp.py',stdin=sp.PIPE,stdout=sp.PIPE,shell=True)
print(pobj.stdout.read().decode())
pobj.stdin.write(b'something...')
print(pobj.stdout.read().decode()) 
```

main.py 将在第一个阻塞`pobj.stdout.read()`，因为 sp.py 正在等我。
但是如果我想先处理字符串'Waiting for you input:'，我怎么知道sp.py是否在等我呢？
换句话说，我希望`pobj.stdout.read()`在 sp.py 等待（或因为 睡眠`time.sleep()`）时返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:08:14.197

好的，我已经解决了。我的代码基于对[python 中 subprocess.PIPE 的非阻塞读取](https://stackoverflow.com/questions/375427/non-blocking-read-on-a-subprocess-pipe-in-python)（谢谢，@VaughnCato）

```
#!/usr/bin/env python3
import subprocess as sp
from threading import Thread
from queue import Queue,Empty
import time

def getabit(o,q):
    for c in iter(lambda:o.read(1),b''):
        q.put(c)
    o.close()

def getdata(q):
    r = b''
    while True:
        try:
            c = q.get(False)
        except Empty:
            break
        else:
            r += c
    return r

pobj = sp.Popen('sp.py',stdin=sp.PIPE,stdout=sp.PIPE,shell=True)
q = Queue()
t = Thread(target=getabit,args=(pobj.stdout,q))
t.daemon = True
t.start()

while True:
    print('Sleep for 1 second...')
    time.sleep(1)#to ensure that the data will be processed completely
    print('Data received:' + getdata(q).decode())
    if not t.isAlive():
        break
    in_dat = input('Your data to input:')
    pobj.stdin.write(bytes(in_dat,'utf-8'))
    pobj.stdin.write(b'\n')
    pobj.stdin.flush() 
```

# css - wkhtmltopdf css 大小，以 cm/mm 为单位

> ID：12180079
> 
> 赞同：21
> 
> 时间：2012-08-29T14:18:51.117
> 
> 标签：css, wkhtmltopdf

我使用 wkhtmltopdf 生成 A4 大小的 PDF。当我创建一个`<div>`标签并将其样式设置为`height: 297mm; width: 210mm`（这是定义的 A4 大小）时，将 wkhtmltopdf 的边距设置设置为 0 ( `wkhtmltopdf -B 0 -T 0 -L 0 -R 0 ...`) 并赋予`<div>`红色背景，我可以在页面底部看到一条细白线，即没有`<div>`完全填满页面。Debian 上的 0.11.0 rc1（最新版本）和 Mac OS X 上的 0.10.0 rc2 始终如一地发生这种情况。

有没有其他人看过这个？这是一个已知问题，还是有解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-10-08T10:30:08.373

我有一种对我有用的方法，它使用了边距。

```
style="margin:0,auto" 
```

如果这不起作用，请尝试：

```
style="margin:0,auto,0,auto" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T10:37:02.957

也许尝试增加`<div>`几分之一毫米的高度？

`height: 297.5mm`还是`height: 298mm`取而代之？

让我知道这是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-06T15:46:50.950

不知道它是否有帮助，但经过一些尝试（div 上的红色边框），我发现 wkhtmltopdf 默认的 A4 页面大约是 1000px 宽和 1425px 高。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-23T17:50:05.743

在我的情况下尝试设置`<div>`元素`style="margin: 0;"`这有助于......

# php - 如何在zendframework2中使用partial

> ID：12180081
> 
> 赞同：6
> 
> 时间：2012-08-29T14:19:04.267
> 
> 标签：php, zend-framework2, partials, view-helpers

在 ZF1 中，我们在 layout.phtml 文件中使用部分类似的东西

```
$this->partial('header.phtml', array('vr' => 'zf2')); 
```

我们如何在 ZF2 中做同样的事情？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-29T14:43:11.160

这可以通过

```
 echo $this->partial('layout/header', array('vr' => 'zf2')); 
```

您可以使用访问视图中的变量

```
echo $this->vr; 
```

不要忘记在 module.config.php 文件的 view_manager 中添加以下行。

```
'layout/header'           => __DIR__ . '/../view/layout/header.phtml', 
```

添加后看起来像这样

```
return array(  

'view_manager' => array(
        'template_path_stack' => array(
            'user' => __DIR__ . '/../view' ,
        ),
        'display_not_found_reason' => true,
        'display_exceptions'       => true,
        'doctype'                  => 'HTML5',
        'not_found_template'       => 'error/404',
        'exception_template'       => 'error/index',
        'template_map' => array(
            'layout/layout'           => __DIR__ . '/../view/layout/layout.phtml',

            'layout/header'           => __DIR__ . '/../view/layout/header.phtml',            

            'error/404'               => __DIR__ . '/../view/error/404.phtml',
            'error/index'             => __DIR__ . '/../view/error/index.phtml',
        ),

    ),    

); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-09T13:32:19.487

如已接受的答案中所述，您可以使用

```
echo $this->partial('layout/header', array('vr' => 'zf2')); 
```

但是你必须`layout/header`在你的module.config.php中定义。

* * *

如果您不想弄乱您的`template_map`，可以使用基于的相对路径`template_path_stack`直接指向您的部分。

假设您定义：

```
'view_manager' => array(
        /* [...] */
        'template_path_stack' => array(
            'user' => __DIR__ . '/../view' ,
        ),
        'template_map' => array(
            'layout/layout'           => __DIR__ . '/../view/layout/layout.phtml',

            'error/404'               => __DIR__ . '/../view/error/404.phtml',
            'error/index'             => __DIR__ . '/../view/error/index.phtml',
        ),
    ),    
); 
```

在你的 module.config.php 和你的 listsnippet.phtml 中`.../view/mycontroller/snippets/listsnippet.phtml`，然后你可以使用以下代码：

```
echo $this->partial('mycontroller/snippets/listsnippet.phtml', array('key' => 'value')); 
```

# web - 在 Internet 的浏览器中运行 Silverlight 5 RC P/Invoke 应用程序？

> ID：12180083
> 
> 赞同：0
> 
> 时间：2012-08-29T14:19:08.040
> 
> 标签：web, pinvoke, silverlight-5.0

当应用程序在 Web 浏览器中运行时，是否可以运行使用 P/Invoke 访问 Win API 函数的 Silverlight 5 RC 应用程序？该应用程序的来源来自互联网上的网站。

我问这个是因为我没有运气。我遇到错误：Silverlight 应用程序中的未处理错误尝试通过安全透明方法“xxxx”通过方法“yyyyy”调用本机代码失败。方法必须是安全关键或安全安全关键才能调用本机代码。

我尝试在调用 P/Invoke 方法的方法上添加 [SecurityCritical] 属性，但没有成功。然后我试图把它放到整个调用类中，但还是没有运气。

有人对此有解决方案吗？

有可能这样做吗？由于来自互联网的应用程序的部分信任，这是一个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:34:08.833

要使用 P/Invoke，您的 SL 应用程序必须是完全信任的应用程序。

您可以从浏览器运行受信任的应用程序，但它需要[管理员进行一些设置](http://msdn.microsoft.com/en-us/library/gg192793%28v=vs.95%29.aspx)。

# jsf-2 - JSF 2中statehelper中的put和add方法有什么区别

> ID：12180097
> 
> 赞同：1
> 
> 时间：2012-08-29T14:19:42.130
> 
> 标签：jsf-2, java-ee-6, myfaces, composite-component, uicomponents

有什么区别：

*   对象放置（可序列化键，对象值）
*   无效添加（可序列化键，对象值）

JSF中StateHelper中的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:41:04.057

我发现 api 文档对自己没有太大帮助并对其进行了调查。每次调用 add 时，它都会将另一个值附加到保存在给定键下的列表中。如果你在那个键上调用 get ，你会得到一个列表。add 方法可以节省您创建该列表并监视极端情况，例如。当键为空时创建列表。

您提到的 put 的工作方式类似于 map-like put。它在一个键下保存一个值。

相反，有一个带有 3 个参数的重载 put。它在该键下创建一个映射，并使用另一对键/值对该映射进行放置。再次，获得钥匙会给你一张地图。

这基本上就是添加和放置工作的方式。还有一些事情可以使部分状态正常工作。总结一下：当你想在一个键下添加多个值时，你可以使用 add。带有 2 个参数的 put 可以为您提供类似地图的行为。put 带有 3 个参数可让您在一个键下填充地图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:33:45.137

来自[Mojarra API](http://javaserverfaces.java.net/nonav/docs/2.1/javadocs/javax/faces/component/StateHelper.html)文档：

> **void add(java.io.Serializable key, java.lang.Object value)**
> 将指定值存储在 StateHelper 内部的 List 中。
> 
> **java.lang.Object put(java.io.Serializable key, java.lang.Object value)** 返回之前存储的值，存储指定的键/值对。

我猜 MyFaces 以类似的方式实现了它。

# asp.net - 重定向到慢速 aspx 页面

> ID：12180099
> 
> 赞同：0
> 
> 时间：2012-08-29T14:19:44.653
> 
> 标签：asp.net, crystal-reports-xi

我有一个性能问题，我们有一个 2 页设置作为更大系统中工作流程的一部分。本节专门用于呈现报告，允许用户选择自己的参数。

`Page1.aspx`收集报告的参数信息。它获取表单上提交的信息并对其进行验证。如果验证成功，它将选择作为 XML 存储在 DB 中，然后`Page2.aspx`使用查询字符串中的运行 ID 重定向到。很简单，性能很棒。

`Page2.aspx`从数据库中提取 ID 并水合一个 Crystal`ReportDocument`对象（需要几毫秒），然后我们调用`ExportToHttpStream`它，然后将报告呈现为 PDF 或 DOC 或 XLS 下载（输出格式在 中确定`Page1.aspx`）。由于我们的报告编写方式和目标系统上的数据库索引，该方法的性能`ExportToHttpStream`非常差。目前这超出了我的控制范围，但我保证他们正在处理中。

所以问题是，当`Page1.aspx`按下提交按钮时，用户在下载开始之前会经历很长的延迟。然后，用户再次按下提交按钮认为存在问题，从而使情况更加复杂。

我认为我需要做的是`Page1.aspx`重定向到`Page2.aspx`. `Page2.aspx`应该渲染母版页家具和加载`div`，并且报告应该在自动弹出保存对话框之前在后台以某种方式异步渲染，之后我想将加载 div 更改为“生成报告，单击此处返回'。

如果这是实现这一目标的最佳方式，我如何加载整页，然后异步请求报告？我愿意接受任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:26:14.587

您可以使用 ajax 加载报告`Page2.aspx`并在处理时显示加载消息。

看`jQuery.load()`方法。这可能是完成您正在尝试做的事情的最简单方法。

`Page1.aspx`- 收集参数
`Page2.aspx`- 报告视图，`Page2Details.aspx`通过 ajax 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:25:29.470

尝试`Page2.aspx`在里面加载`iframe`并使用jQuery显示等待指示器并在`Page2.aspx`下载后将其隐藏

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T19:11:49.493

虽然这两个答案都给了我一些基础，让我走出去并朝着正确的方向进行研究。我的解决方案包括使用`fileDownload`John Culviner 的插件来促进类似的解决方案：

[jQuery 文件由 John Culviner 下载](http://johnculviner.com/post/2012/03/22/Ajax-like-feature-rich-file-downloads-with-jQuery-File-Download.aspx)

这允许我使用以下页面结构：

1.  `Page1.aspx`，收集和验证报告的参数并将它们放入 Oracle。
2.  `Page2.aspx``div`, 同时通过查询字符串 setup 3 hidden s传入 runid（指向数据库中参数的指针） 。加载、错误和成功。

此时使用了上面提到的脚本。jQuery 首先设置加载`div`可见然后调用插件。该插件动态创建`iframe`并从`Page3.aspx`. 然后它会触发成功回调或失败。成功回调是通过在响应末尾设置的 cookie 触发的`Page3.aspx`。

我相信插件提到在 jQuery 中使用`'text/plain'`AJAX 调用进行下载，避免了在 AJAX 中没有等效八位字节流的限制。

它可以工作，无论如何它都不是最干净的解决方案，它不会降低任何性能，而是为我们控制的 Intranet 上的用户提供响应速度极快且令人愉悦的 UI。

# html - 我应该使用哪个字符来分隔一些 URL？

> ID：12180100
> 
> 赞同：3
> 
> 时间：2012-08-29T14:19:44.607
> 
> 标签：html, url, get, character

我有一些网址，例如：

```
http://stackoverflow.com/questions/ask
http://example.com/Hello/EveryBody/?page=5
http://another.example.com/GoodBye.html?q=me%20%40%20%3Cstackoverflow%3E%20!%3B 
```

我正在从用户那里获取 URL，我想将它们放在一个字符串中并将它们发送到 C# 服务器（使用 jQuery`ajax`方法，根据`GET`请求）。

（例如，如果我有数字而不是 URL，我可以使用`;`数字分隔 -> `123;234;2012;4;0;99`...但是现在有 URL ...）

那么，分隔 URL 的最佳字符是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T15:08:11.953

使用竖线`|`或[竖线](http://en.wikipedia.org/wiki/Vertical_bar)字符。`encodeURIcomponent`将竖线编码为`%7C`.

我建议对所有 URL 进行编码，然后将它们连接成一个字符串，并在其间使用竖线。这样，在您的 C# 代码中，您可以找到竖线，然后使用它们的位置来正则表达式输出 URL。

# javascript - 如何在谷歌地图的标记上获得双击事件

> ID：12180102
> 
> 赞同：3
> 
> 时间：2012-08-29T14:19:46.103
> 
> 标签：javascript, google-maps, dom-events

在我的应用程序中，我正在显示具有多个标记的 Google 地图。在那我有点击事件和获取信息窗口。但我需要的是，当我双击一个标记时，应该显示一些其他页面，其中包含有关该标记位置的详细信息。因为我将为每个标记提供不同的页面，如何在双击标记时重定向到相应的页面？请帮我。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-29T14:59:28.960

您可以使用

```
google.maps.event.addListener(marker, "dblclick", function (e) { 
               log("Double Click"); 
            }); 
```

供参考：[https ://developers.google.com/maps/documentation/javascript/examples/marker-labels](https://developers.google.com/maps/documentation/javascript/examples/marker-labels)

# javascript - D3：从 json 对象创建分组条形图

> ID：12180108
> 
> 赞同：4
> 
> 时间：2012-08-29T14:20:05.057
> 
> 标签：javascript, json, charts, d3.js

我有一些这样的数据：

```
[
 { id: 12, value1: "2.92", value2: "4.22", value3: "3.69" }
, 
 { id: 23, value1: "2.69", value2: "4.24", value3: "3.77" }
,
  ....
] 
```

我想创建一个水平分组条形图，以便有 3 组条形图，首先是所有 value1 条形图（标记为 Value1），然后是所有 value2 条形图，最后是所有 value3 条形图。

我该如何做到这一点 - 请记住，数据将在未来动态更新，因此将添加新数据对象并删除其他数据对象。猜猜我可以使用 id 作为键。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T16:33:30.247

首先，将数据提供或转换为一个或多个普通数组，例如

```
data = [ [ 2.92, 4.22, 3.69], [2.69, 4.24, 3.77] ] 
```

现在您可以使用 d3.transpose 来旋转数据，以便获得

```
 var tdata = d3.transpose(data); 
```

给你

```
 [ [2.92, 2.69], [4.22, 4.24], [3.69, 3.77]] 
```

然后这里有一个来自 iaindillingham 的组栏，用作模型（我已经修复了他的版本以使用最新的 d3 库）。看到它在这里工作：http: [//bl.ocks.org/3532324](http://bl.ocks.org/3532324)

# c# - WPF TabControl - 无法访问此对象，因为不同的线程拥有它

> ID：12180109
> 
> 赞同：0
> 
> 时间：2012-08-29T14:20:07.697
> 
> 标签：c#, wpf, .net-4.0

我正在开发一个 WPF 登录表单。我有一个带有两个选项卡的选项卡控件：

tab1) 包含登录的输入（用户名和密码文本框/标签）

tab2) 包含一个自定义动画，用作进度条

一旦用户捕获了所有信息并在登录按钮的单击事件中单击登录，我将活动选项卡设置为 tab2 并向用户显示进度条。如果在此步骤中发生错误，我想将用户返回到 tab1，这就是我收到以下错误的地方：

**无效操作异常**（调用线程无法访问此对象，因为不同的线程拥有它。）

请建议我如何杀死线程或任何其他解决方法来帮助解决我的问题

**我的代码：**

```
public partial class LogonVM : ILogonVM
{
    private IWebService _webService;
    private static TabControl loaderTabs;

    private string userName = String.Empty;
    public string UserName
    {
        get { return userName; }
        set
        {
            userName = value;
            OnPropertyChanged("UserName", true);
        }
    }

    private SecureString password = new SecureString();
    public SecureString Password
    {
        get { return password; }
        set
        {
            password = value;
            OnPropertyChanged("Password", true);
        }
    }

    public MinimalLogonViewModel(MinimalLogonView view,IWebService webService)
    {
            _webService = webService;

            View = view;
            view.DataContext = this;

            loaderTabs = (TabControl)this.View.FindName("loaderTabs");
        }

        catch (Exception eX)
        {
            MessageBox.Show(eX.Message);
        }
    }

    protected virtual void OnPropertyChanged(string propertyName, bool raiseCanExecute)
    {
            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));

            if (raiseCanExecute)
                LogonCommand.RaiseCanExecuteChanged();
    }

    private void Logon(object parameter)
    {
        SetActiveTab(TabType.Loader);

        _messageBroker.onAuthenticated += new EventHandler(_MessageBroker_onAuthenticated);
        Task.Execute((DispatcherWrapper)View.Dispatcher,
                     () => _webService.Authenticate(userName, password.ConvertToUnsecureString()),
                     (ex) =>
                     {
                         if (ex != null)
                         {                       
                             //This is where I'm having issues
                             //If an error occurs I want to switch back to the Login tab which will enable the user to try Login again
                             //This does not throw an error but it also doesn't show the Login tab
                             SetActiveTab(TabType.Login);
                         }
                         else
                         {
                            //No error perform additional processing
                         }
                     });
    }

    private void SetActiveTab(TabType type)
    {
        //If I leave the code as simply:
        //loaderTabs.SelectedIndex = (int)type;
        //I get an error when seting the tab for the second time:
        //Invalid Operation Exception (The calling thread cannot access this object because a different thread owns it.) 

        loaderTabs.Dispatcher.Invoke((Action)(() =>
        {
            loaderTabs.SelectedIndex = (int)type;
        }));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:40:35.107

我不是 WPF 专家，但我想知道为什么你会使用调度程序对象来实现这个功能，你肯定可以这样做吗？

```
private void SetActiveTab(TabType type) 
{
  loaderTabs.SelectedIndex = (int)type; 
} 
```

编辑：

好的，我现在完全理解您为什么要使用调度程序了。我在单独的线程上处理时尝试了您的代码位，它对我有用。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Threading;
using System.ComponentModel;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
public partial class MainWindow : Window
{

    private BackgroundWorker _worker;

    public MainWindow()
    {
        InitializeComponent();
        _worker = new BackgroundWorker();
        _worker.DoWork += new DoWorkEventHandler(_worker_DoWork);
        _worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(_worker_RunWorkerCompleted);

    }

    void _worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        MessageBox.Show("Done");
    }

    void _worker_DoWork(object sender, DoWorkEventArgs e)
    {
        Thread.Sleep(5000);
    }

    private void SetActiveTab(TabType type)
    {
        loaderTabs.Dispatcher.Invoke((Action)(() =>
        {
            //This is where the error happens when I try set the active tab back to tab1 
            loaderTabs.SelectedIndex = (int)type;
        }));
    }

    public void Login(string userName, string password)
    {
        try
            {
               SetActiveTab(TabType.Loader);
               //Processing... 
               _worker.RunWorkerAsync();
           }
           catch (Exception)
           {
               SetActiveTab(TabType.Login);
           }
       }

        enum TabType {Login, Loader};

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            Login("user", "password");
        }

   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T21:54:57.097

为什么要使用选项卡控件？这是不必要的。

您可以使用 a 来实现这一点，并使用 a 来`Grid`切换`Visibility`属性`IValueConverter`。

```
<Grid>
   <Grid x:Name="Login" Visibility="{Binding Path=IsProcessing, Converter={StaticResource InvertBooleanToVisilityConverter}}">
       <!-- Your login fields -->
   </Grid>
   <Grid x:Name="Status" Visibility="{Binding Path=IsProcessing, Converter={StaticResource BooleanToVisilityConverter}}">
       <!-- Your login status -->
   </Grid>
</Grid> 
```

`IsProcessing`是一个简单的布尔属性，通知属性更改，两者`IValueConverters`只是将此布尔值转换为等效`Visibility`值。

我一直使用这种模式来创建可以显示多种状态的复杂界面（我通过将`EnumToBool`转换器与 a链接来实现这一点`BoolToVisibility`）。

* * *

另外，直接回答有关线程所有权的问题及其可能的原因。您很可能`SetActiveTab`是第二次从另一个线程调用 （例如切换回第一个选项卡）。在尝试修改任何属性之前，您需要调用回主线程（创建控件的线程）；StackOverflow 和 Google 上已经有很多关于如何做到这一点的信息。在我遇到的几乎所有情况下，引发异常的行都不是问题所在，您需要返回调用堆栈。

# sql-server - SSRS 报告管理器未正确显示

> ID：12180110
> 
> 赞同：5
> 
> 时间：2012-08-29T14:20:15.570
> 
> 标签：sql-server, sql-server-2008-r2, ssrs-2008, reporting-services

我是 Reporting Services 的新手，最近开始创建报表。

我在**MS SQL Server**附带的 BIDS 中创建报告，出于我的目的，*R2*，并且还配置了**报告服务器**。一切都很好。我可以使用 BIDS 预览报告、调试、部署等等。但是，问题是，当我单击**Reporting Service 配置管理器**中的**Report Manager URL**并希望将**[Report Manager 视为 Web 应用程序](http://msdn.microsoft.com/en-us/library/ms157147%28v=sql.105%29.aspx/ "Report Manager 是一个 Web 应用程序，您可以通过 ...")**时，我最终得到一个非图形网页，显示基于文本的链接到像这样的目录： **[![在此处输入图像描述](../Images/7056355529f6cd27faa0c3d9bfcc58e2.png)](https://i.stack.imgur.com/LU7Wb.png)** 

* * *

**最终，我没有得到类似的选项：（**如 MSDN 所示**）

*   单击页面顶部的**站点设置**
*   单击页面侧面的“**安全”选项卡等。**

是的，当然，我确实尝试以管理员身份运行浏览器，然后在其中输入报告管理器 URL，但再次出现相同的屏幕有

什么建议吗？将不胜感激
谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T16:45:53.333

您发布的屏幕截图是有效的，它称为“报表服务器”，例如在传递参数时调用报表服务器是必不可少的。您要查看的是报告管理器，通常可以在以下位置找到`http://reportservername/reports`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T21:07:14.477

只是为了澄清 JonH 发布的内容：在 Reporting Services 配置管理器中 - 单击左栏中的报表管理器 URL 链接。在“虚拟目录：”旁边的框中输入您想要的名称...我的公司报告。单击应用，一旦管理器完成，您应该能够单击新 URL 并查看报告管理器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-28T20:08:30.697

谢谢...我面临同样的问题。

我安装了 SQL Server Express 2012 版本。默认情况下，“Reporting Services 配置管理器”指向“ReportServer_SQLEXPRESS”作为“Web 服务 URL”和“报表管理器 URL”中的虚拟目录。所以默认情况下它变成了；

报表服务器：_http://zed:80/ReportServer_SQLEXPRESS

报告管理器：_http://zed:80/ReportServer_SQLEXPRESS

因此不显示报告主页。

我更改如下，“报告”作为“Web 服务 URL”中的虚拟目录和“报告”作为“报告管理器 URL”中的虚拟目录。所以它变成了下面这样。

报告服务器：_http://zed/report

报告管理器：_http://zed/Reports/Pages/Folder.aspx**

# ios - IOS静态框架，里面有资源

> ID：12180113
> 
> 赞同：22
> 
> 时间：2012-08-29T14:20:18.147
> 
> 标签：ios, frameworks, uiimageview, xib

我正在尝试创建一个框架，以保留我在项目中使用的一些通用代码。我找到了在线教程并设法创建了一个框架，但我仍然有一个与资源（xib、图像等）相关的问题。

假设我有`MainViewController.xib`一个`UIImageView`using a `test.png`。所有这些都在我的框架包中。

当我在另一个项目中使用该框架时，我将其添加到“复制捆绑资源”构建阶段。问题是 xib 只能使用类似的路径访问`dummy.framework/Resources/MainViewController.xib`，并且`UIImageView`内部无法加载`test.png`。

似乎 UIImageView 将尝试从包的根目录加载 png，而不是从也存储 xib 的相对文件夹中加载 png。

有没有人设法创建一个包含代码和资源的框架并在另一个项目中使用它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-10-20T15:14:14.327

我知道这是一个旧线程，但为了防止新人犯同样的错误，这里有一个注意事项：

从 Xcode 6 和 iOS8 开始，Apple 内置了完全支持的第一方动态框架解决方案。有关更多信息，请参见此处：[https ://developer.apple.com/library/ios/documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/ xcode_6_0.html#//apple_ref/doc/uid/TP40014509-SW14](https://developer.apple.com/library/ios/documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_6_0.html#//apple_ref/doc/uid/TP40014509-SW14)

但它的短处是，创建一个新项目并选择 Cocoa Touch Framework 模板。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-05-05T16:59:33.367

我创建了一个框架目标并访问其资产目录中的图像，我执行了以下操作：

```
UIImage *img = [UIImage imageNamed:@"IMAGE_NAME_HERE" inBundle:[NSBundle bundleForClass:[self class]] compatibleWithTraitCollection:[UITraitCollection traitCollectionWithDisplayScale:[UIScreen mainScreen].scale]]; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-14T00:37:20.367

我不再手动管理框架，而是使用并[推荐](https://stackoverflow.com/a/25174719/1049134) [CocoaPods](http://cocoapods.org)。

* * *

*原答案：*

1.  使用提到的[假框架](https://github.com/kstenerud/iOS-Universal-Framework)@wattson12。它还将编译和保存资源。
2.  受此[脚本](https://stackoverflow.com/questions/5668021/include-exclude-resources-depending-on-scheme)的启发，将其添加到您的目标以将资源复制到您的应用程序：

    ```
    SOURCE_PATH="${TARGET_BUILD_DIR}/MYFramework.framework/Resources/"
    TARGET_PATH="${TARGET_BUILD_DIR}/${UNLOCALIZED_RESOURCES_FOLDER_PATH}/MYFrameworkResources.bundle"
    mkdir -p $TARGET_PATH
    cp -R $SOURCE_PATH $TARGET_PATH 
    ```

您也可以只将框架拖到 Copy Resources 步骤，但随后您将添加不必要的标头和编译代码。

**编辑**

要使用 IB 中的这些资源，例如 png 文件，请替换：

```
MyImage 
```

经过：

```
MYFrameworkResources.bundle/MyImage.png 
```

它将预览损坏的图像图标，但在运行时会起作用。

从代码中加载一个 Nib：

```
[NSBundle loadNibNamed:@"MYFrameworkResources.bundle/MyNib" ... 
```

最后，您可以在 NSBundle 类别中添加这些方法，以方便访问我在您的主包或 MYFrameworkResources.bundle 中的 Nib 资源：

```
@implementation NSBundle (MyCategory)

+ (NSString *)pathForResource:(NSString *)name
                       ofType:(NSString *)extension
{
    // First try with the main bundle
    NSBundle * mainBundle = [NSBundle mainBundle];
    NSString * path = [mainBundle pathForResource:name
                                           ofType:extension];
    if (path)
    {
        return path;
    }

    // Otherwise try with other bundles
    NSBundle * bundle;
    for (NSString * bundlePath in [mainBundle pathsForResourcesOfType:@"bundle"
                                                          inDirectory:nil])
    {
        bundle = [NSBundle bundleWithPath:bundlePath];
        path = [bundle pathForResource:name
                                ofType:extension];
        if (path)
        {
            return path;
        }
    }

    NSLog(@"No path found for: %@ (.%@)", name, extension);
    return nil;
}

+ (NSArray *)loadNibNamed:(NSString *)name
                    owner:(id)owner
                  options:(NSDictionary *)options
{
    // First try with the main bundle
    NSBundle * mainBundle = [NSBundle mainBundle];
    if ([mainBundle pathForResource:name
                             ofType:@"nib"])
    {
        NSLog(@"Loaded Nib named: '%@' from mainBundle", name);
        return [mainBundle loadNibNamed:name
                                  owner:owner
                                options:options];
    }

    // Otherwise try with other bundles
    NSBundle * bundle;
    for (NSString * bundlePath in [mainBundle pathsForResourcesOfType:@"bundle"
                                                          inDirectory:nil])
    {
        bundle = [NSBundle bundleWithPath:bundlePath];
        if ([bundle pathForResource:name
                             ofType:@"nib"])
        {
            NSLog(@"Loaded Nib named: '%@' from bundle: '%@' ", name, bundle.bundleIdentifier);
            return [bundle loadNibNamed:name
                                  owner:owner
                                options:options];
        }
    }

    NSLog(@"Couldn't load Nib named: %@", name);
    return nil;
}

@end 
```

它将首先查看您的应用程序包，然后查看 MYFrameworkResources.bundle 等。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-10-12T21:44:58.607

为了从**Swift 3**中的动态框架加载图像：

`UIImage(named: "name", in: Bundle(for: type(of: self)), compatibleWith: nil)`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-29T14:26:13.003

基本框架不包含大多数类型的资源，要包含资源使用[这个“假”框架库](https://github.com/kstenerud/iOS-Universal-Framework)

您最终会得到一个 .embeddedframework 文件夹，其中包含实际框架，但还包括您添加到 Copy Bundle Resources 构建阶段的任何资源。我用它来包含 xib、核心数据模型、图像和 plist

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-29T14:24:51.047

简短的回答：你不能。

编译应用程序时，会使用“主”项目的资源生成捆绑包，忽略链接框架中的资源。这包括图像、xib、plist 等（任何不是源文件的内容）

您需要做的是将这些资源添加到您的主项目中，以便它们可以在您的应用程序中使用，这不是最快乐的方式，但它会起作用。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-03-10T02:10:10.100

从 Xcode 7 开始，我们现在可以使用资产目录。在我的实验中，我发现您可以在同一个工作区中引用不同项目中的文件，从而无需在构建阶段对资产进行微管理或担心目标。

# asp.net - 会员登录控制

> ID：12180116
> 
> 赞同：0
> 
> 时间：2012-08-29T14:20:21.063
> 
> 标签：asp.net, login

我创建了一个使用**登录控制的小网站**

我已经做了每一件事

但是在执行时我收到错误消息

> XML 解析错误：格式不正确“位置：“http://localhost/WebSite/Login.aspx”第 1 行，第 2 列：<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Login. aspx.cs" Inherits="登录" %> " -^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:22:48.020

Sanjay，您可以删除 Page 和 @ 之间的空格

```
<%@Page Language="C#" AutoEventWireup="true" CodeFile="Login.aspx.cs" Inherits="Login" %> 
```

# javascript - 为什么 jQuery.getJSON 不返回数据？

> ID：12180121
> 
> 赞同：4
> 
> 时间：2012-08-29T14:20:32.810
> 
> 标签：javascript, jquery, ajax, callback, getjson

我有这个方法：

```
function getUserName(guid) {
    var name = "Unbekannt";

    $.getJSON(urlCurrent, {
        "method" : "get_user_info",
        "guid" : guid,
        "auth_token" : temporaryAuthToken
    }, function(data) {
        if (data.status == 0) {
            alert(data.result[0].name);
            name = data.result[0].name;
        }
    });

    return name;
} 
```

几乎一切正常：Ajax-Request 获取数据并触发回调函数，这样

```
alert(data.result[0].name); 
```

显示具有此值的弹出窗口：“Forename Surname”

但随后在

```
return name; 
```

该方法返回“Unbekannt”，尽管 name 应该具有新值“Forename Surname”。发生了什么，错误在哪里？

多谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T14:26:51.700

我会从函数中返回 promise 对象并对其采取行动。

```
function getUserName(guid) {
    return $.getJSON(urlCurrent, {
        "method" : "get_user_info",
        "guid" : guid,
        "auth_token" : temporaryAuthToken
    });
}

getUserName(guid).done(function(data) {
    if (data.status == 0) {
        alert(data.result[0].name);
    }
}); 
```

而且，如果您想预先进行状态检查，那么 .then 非常适合。

```
function getUserName(guid) {
    return $.getJSON(urlCurrent, {
        "method" : "get_user_info",
        "guid" : guid,
        "auth_token" : temporaryAuthToken
    }).then(function(data){
        return $.Deferred(function(def){
            if (data.status == 0) {
                return def.resolve(data);
            }
            return def.reject(data);
        });
    });
}

getUserName(guid).done(function(data) {
    alert(data.result[0].name);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T14:23:43.797

当您返回`name`时，尚未为其分配从 getJSON 回调中获得的新值，因为 ajax 调用是异步的并且需要一些时间才能完成。

您需要带一个回调函数：

```
function getUserName(guid, callback) {
    var name = "Unbekannt";

    $.getJSON(urlCurrent, {
        "method" : "coinor.get_user_info",
        "guid" : guid,
        "auth_token" : temporaryAuthToken
    }, function(data) {
        if (data.status == 0) {
            alert(data.result[0].name);
            name = data.result[0].name;
            callback(name);
        }
    });
}

getUserName(guid, function(name) {
    alert(name);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T14:21:33.580

因为`return name;`在 ajax 调用返回之前执行。

如果您希望它与调用中返回的数据相关`$.getJSON()`，它也需要在回调函数中。

# emacs - 这个“文件局部变量”是什么意思？

> ID：12180122
> 
> 赞同：4
> 
> 时间：2012-08-29T14:20:39.037
> 
> 标签：emacs, elisp

我正在阅读`kill-emacs-hook`emacs 手册中的变量。它说：

> `kill-emacs-hook`是在“C 源代码”中定义的变量。
> 它的值为
> `(org-babel-remove-temporary-directory migemo-pattern-alist-save)`
> 
> 当用作文件局部变量时，此变量具有潜在风险。
> 
> 文档：调用
> ` ' 时要运行的挂钩`kill-emacs`。
> ...缩写...

我不明白这句话：“一个文件局部变量”。这个“文件局部变量”是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T14:44:47.073

Emacs 具有在文件内容中指定缓冲区变量的功能。[http://www.gnu.org/software/emacs/manual/html_node/emacs/Specifying-File-Variables.html#Specifying-File-Variables](http://www.gnu.org/software/emacs/manual/html_node/emacs/Specifying-File-Variables.html#Specifying-File-Variables)

这经常用于指定文件的模式`-*- python -*-`，例如首选的缩进样式或标签宽度；但如果您允许，它可能会让文件的作者完全控制您的 Emacs。但是，对于被认为不安全的变量，默认行为是在允许设置生效之前要求用户确认。有关进一步讨论，请参阅手册。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T14:48:06.327

默认情况下，当您设置一个具有`setq`全局值的变量时。这意味着所有缓冲区都将看到新值。

但是，某些变量（称为缓冲区局部变量）的工作方式不同。设置缓冲区局部变量时，其值仅针对`setq`发生事件的缓冲区更改。其他缓冲区看不到更改。

这些缓冲区局部变量可以从缓冲区当前访问的文件的内容中获取它们的值。如果文件包含格式正确的字符串（请参阅@tripleee 的答案），则缓冲区局部变量将在文件打开时使用该值初始化。

附带说明一下，目录局部变量也存在，它们为访问目录中文件的每个缓冲区设置一个缓冲区局部变量。

# android - 我如何转储 SQLite 表的 .schema？

> ID：12180124
> 
> 赞同：0
> 
> 时间：2012-08-29T14:20:50.133
> 
> 标签：android, database, sqlite, schema

我是 android 的菜鸟，我在创建条目和从我的表中检索数据时遇到了麻烦。在另一篇文章中建议[如何解决 IllegalArgumentException？](https://stackoverflow.com/questions/12179114/how-to-do-i-resolve-illegalargumentexception)，我应该得到数据库的 .schema 转储，看看它是否构造正确？我该怎么做呢？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:27:00.870

在 adb shell 中，您可以键入命令

```
sqlite3 /data/data/<your-namespace>/databases/<database-name> 
```

在那里，您可以使用每个表的命令`.tables` 模式查看所有表`pragma table_info(<table-name>)`

这样您就可以看到您的应用在模拟器中创建的表。

# javafx-2 - 在 Scenebuilder 中使用分层自定义 JavaFx 组件解析类路径

> ID：12180127
> 
> 赞同：2
> 
> 时间：2012-08-29T14:20:55.213
> 
> 标签：javafx-2, fxml, scenebuilder

我正在使用 FXML 创建自定义组件。自定义组件以分层方式设计。

当我设计一个使用另一个自定义组件 A 的自定义组件 B 时，scenebuilder 中会弹出一个类路径问题对话框，我只需通过设置适当的类路径来解决这个问题。

但是，当我创建三个组件时，例如 C 包含 B 包含 A，并尝试在 Scenebuilder 中打开顶级组件 C 失败。它要求我提供我适当指定的类路径。它找到了 B，但没有找到 A。

类路径、FXML 和代码是正确的，因为应用程序能够正确执行。只有 Scenebuilder 有问题。

**如何使用 Scenebuilder 打开分层自定义组件？**

任何对使用 FXML 的分层组件定义示例的引用将不胜感激，并获得 50 分的奖励。（只需要 3 个级别）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T08:46:27.540

一个叫大卫的人确实在论坛上回答了你的问题。出于遗留目的，我将其发布在这里。

Scene Builder 中自定义组件的类加载器存在问题。在 SceneBuilder 中加载 FXML 文件时：它使用带有自己的类加载器的 FXMLLoader。为了加载使用自己的 FXMLLoader 的自定义组件来加载其他自定义组件，需要使所有 FXMLLoader 使用相同的类加载器。正如大卫在论坛上所说，您可以通过在自定义组件中添加此代码来实现这一点。

```
public class CustomC extends VBox {
    public CustomC() {
        init();
    }

    private void init() {
        FXMLLoader loader = new FXMLLoader();
        loader.setRoot(this);
        loader.setLocation(this.getClass().getResource("CustomC.fxml"));

        // Make sure to load "CustomC.fxml" with the same classloader that
        // was used to load CustomC class. 
        loader.setClassLoader(this.getClass().getClassLoader());

        try {
           final Node root = (Node)loader.load();
           assert root == this;
        } catch (IOException ex) {
           throw new IllegalStateException(ex);
        }
    }
} 
```

如果您想将此代码外部化到一个类中，将这个类与您的自定义组件放在同一个 jar 中很重要：您不能将它放在外部 jar 中（至少目前如此）。

# php - 在数据库中保存带有复选框值的清单

> ID：12180133
> 
> 赞同：0
> 
> 时间：2012-08-29T14:21:02.717
> 
> 标签：php, mysql, database

对于 Web 应用程序，我需要为用户制作某种清单。清单由一个特殊的管理员帐户管理，只有他可以编辑清单。每个用户都有自己的清单，其中包含某些条件，当满足该条件时必须检查这些条件。我还为任何评论添加了一个文本框（如果有的话）

我在 MySQL 数据库中构建了几张表： 一个用户数据库，其中包含所有注册用户的数据

一个名为清单属性的表，包含以下列：

```
property_idnr | type | description 
```

接下来是一个表格，它将用户与具有以下列的属性联系起来：

```
link_idnr | user_idnr | property_idnr | comments 
```

现在我的问题是，我是否正确设置了它？另外，我对查询有点问题。将这些值存储在数据库中的最佳方法是什么？

我希望有人能够帮助我解决这个问题，如果您需要更多信息，请询问！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:32:01.907

您的架构看起来很合理。要获取给定用户的列表，您可以使用如下查询：

```
select clp.type
from CheckListLink cll join
     CheckListProperties clp
     on cll.property_id = clp.property_id
where cll.user_id = <user_id> 
```

我建议在 CheckListLink 表中添加一个排序列。不同的用户可能以不同的方式排列他们的检查清单。另外，我会在所有表中添加一个日期时间列，以便您知道记录的创建时间。

存储值。. . 好吧，您需要一种方法来设置检查列表中的可能项目。然后，您需要一种方法让用户在他们的清单中选择他们想要的项目。从数据库的角度来看，这只是各种插入语句的问题（也许还有删除）。更大的挑战是在 UI 方面。

# c# - 具有相同值的结构是否被视为相等？

> ID：12180134
> 
> 赞同：-5
> 
> 时间：2012-08-29T14:21:07.513
> 
> 标签：c#, data-structures

考虑这个结构。

```
public struct myStruct{
    public int value1;
    public int value2;
    public int value3;

    public myStruct(int val1, int val2, int val3){
        value1 = val1;
        value2 = val2;
        value3 = val3;
    }
} 
```

现在考虑我有一些类型列表`myStruct`：

```
public List<myStruct> myList = new List<myStruct>(); 
```

现在我实例化 2 个`myStruct`使用相同值的不同版本：

```
myStruct s1 = new myStruct(1,2,3);
myStruct s2 = new myStruct(1,2,3); 
```

然后我将第一个实例添加到`myList`：

```
myList.Add(s1); 
```

然后我做一个简单的检查，看看第二个实例是否在列表中：

```
bool structsEqual = myList.Contains(s2); 
```

是`structsEqual`真的还是假的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:27:02.560

你有所有的代码，你可以把它放在一个程序中并运行它，看看会发生什么。我使用 LinqPad，这就是我得到的...

```
public List<myStruct> myList = new List<myStruct>(); 

void Main()
{
    myStruct s1 = new myStruct(1,2,3); 
    myStruct s2 = new myStruct(1,2,3); 

    myList.Add(s1); 

    bool structsEqual = myList.Contains(s2); 

    structsEqual.Dump();
}

public struct myStruct{ 
    public int value1; 
    public int value2; 
    public int value3; 

    public myStruct(int val1, int val2, int val3){ 
        value1 = val1; 
        value2 = val2; 
        value3 = val3; 
    } 
} 
```

结果 = “真”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:29:26.530

[结构](http://msdn.microsoft.com/en-us/library/saxz13w4.aspx)是[值类型](http://msdn.microsoft.com/en-us/library/s1ax56ch.aspx)，所以答案是`True`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T14:36:24.127

有趣的是，这个特定的代码将等于 true，但如果结构包含没有系统类型的对象，那么您必须实现 IComparable 以使其不总是返回 false。

```
public struct myStruct
{ 
    public MyOwnType value1; 
    public int value2; 
    public int value3; 

    public myStruct(MyOwnType val1, int val2, int val3){ 
        value1 = val1; 
        value2 = val2; 
        value3 = val3; 
    } 
}

public class MyOwnType
{
    public int Id { get; set; }

    public MyOwnType(int id)
    {
        this.Id = id;
    }
} 
```

要让 Contains 工作，您需要实现 IComparable：

```
public class MyOwnType : IComparable
{
    public int Id { get; set; }

    public MyOwnType(int id)
    {
        this.Id = id;
    }

    public int CompareTo(object obj)
    {
        if (obj == null) return 1;

        MyOwnType other = obj as MyOwnType;
        if (other != null)
            return this.Id.CompareTo(other.Id);
        else
            throw new ArgumentException("Object is not a MyOwnType");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T14:29:13.830

快速谷歌导致以下链接：

[http://www.java2s.com/Tutorial/CSharp/0120__struct/Valuetypeequalitydefaultbehavior.htm](http://www.java2s.com/Tutorial/CSharp/0120__struct/Valuetypeequalitydefaultbehavior.htm)

所以是的，这将是真实的

# sql - 将 LONG 数据类型列分配给 NUMBER 数据类型列

> ID：12180139
> 
> 赞同：1
> 
> 时间：2012-08-29T14:21:24.967
> 
> 标签：sql, oracle, type-conversion

我正在使用 Oracle 并且有一个包含 long 数据类型的表。从那以后我发现这是遗留问题，我应该使用 LOB。我现在也认为我可能只使用 NUMBER(10,0)。

我想将列从 long 数据类型转换为 NUMBER 数据类型。

到目前为止，这是我的 SQL。

```
ALTER TABLE BUDGET ADD AMT2 NUMBER(10,0);
UPDATE BUDGET SET AMT2 = AMT;
ALTER TABLE BUDGET DROP COLUMN AMT;
ALTER TABLE BUDGET RENAME COLUMN AMT2 TO AMT; 
```

AMT 列是 LONG 新的 AMT2 列是我的新列 NUMBER(10, 0)

问题是当将 long 分配给一个数字时，我得到一个错误。这是在更新行 (line2) 我认为这是因为数据截断。

错误是

```
SQL Error: ORA-00932: inconsistent datatypes: expected NUMBER got LONG 
```

该列中的所有数据都小于 10000，所以我想强制 oracle 忽略任何数据截断（因为我不相信应该有任何数据截断）。如何将长数据分配给数字数据列？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T14:34:13.197

创建一个 PL/SQL 函数以获取 Long 作为您需要的数据类型。

例子：

```
create or replace 
function longtonumber( p_rowid in rowid)
return number
 as
      l_data long;
 begin
     select remarks into l_data from cr_claimheader where rowid = p_rowid;
      return to_number(substr( l_data, 1, 4000 ));
end; 
```

然后您需要做的就是在更新语句中使用此函数进行更新：update am1=longtonumber(amt2)...等。

我从 askTom 那里得到这个：http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID: [839298816582](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:839298816582)

# imap - 标头上的 IMAP 搜索未按预期工作

> ID：12180143
> 
> 赞同：0
> 
> 时间：2012-08-29T14:21:42.207
> 
> 标签：imap, exchange-server-2010, imaplib

我正在为 IMAP 构建库，我的搜索命令适用于收件箱文件夹，它返回一个数字，我可以用它来获取邮件。但是，当我尝试搜索已发送的项目时，它不起作用，它不会给出错误，而只是返回没有任何数字的 Search OK。您能否指出为什么会出现这种行为。我正在访问 Exchange 2010。

我的搜索命令类似于：

```
search all HEADER Message-ID "<cc6aed80-955b-4800-a3ac-6c3942ceecac>" 
```

这正是[http://support.microsoft.com/kb/302965中描述的方式](http://support.microsoft.com/kb/302965)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:53:34.763

可能没有用，但我可能遇到了同样的问题。

在包含“比尔·盖茨”电子邮件的邮箱中，使用表达式“(FROM "billy@microsoft.com")' 的搜索没有返回任何结果；搜索“（FROM Gates）”返回命中。

我不得不将我的代码更改为 '(HEADER FROM "billy@microsoft.com")' 才能让它工作。

或者：您可以使用 IMAP4.uid(command, arg[, ...]) 见[http://docs.python.org/2/library/imaplib.html#imaplib.IMAP4.uid](http://docs.python.org/2/library/imaplib.html#imaplib.IMAP4.uid)

# delphi - TStreamReader 从 WebBrowser Delphi 中逐行读取 HTML 代码

> ID：12180145
> 
> 赞同：0
> 
> 时间：2012-08-29T14:21:44.387
> 
> 标签：delphi, stream, browser, activex

我在使用流时遇到问题。我想逐行阅读我的html代码。通过逐行读取文件我没有问题，但我需要使用 webbrowser 读取实际打开的文档，所以我写了这个：

```
procedure TForm2.SpeedButton2Click(Sender: TObject);
var
    iall : IHTMLElement;
    strumien : TStringStream;
    reader : TStreamReader;
begin
  if Assigned(WebBrowser1.Document) then
    begin
      iall := (WebBrowser1.Document AS IHTMLDocument2).body;
      while iall.parentElement <> nil do
        begin
          iall := iall.parentElement;
        end;
      Strumien:=Tstringstream.Create(iall.innerHTML);
      Strumien.Position:=0;
      reader:=TStreamReader.Create(Strumien, TEncoding.UTF8);
      reader.OwnStream;
      while not reader.EndOfStream do
        memo1.Lines.Add(reader.ReadLine);
    end;
end; 
```

此代码不起作用。从文档中心仅读取几行并给出“列表索引超出范围”有人知道为什么吗？使用 Embarcadero XE2 Delphi

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T19:08:06.600

您将不同的字符串编码混合在一起，这可能解释了为什么`TStreamReader`无法正确读取所有内容。 `TStringStream`也在`TEncoding`D2009+ 中使用，但您没有`TEncoding`在构造函数中指定任何类型`TStringStream`，因此它将使用`TEncoding.Default`，这与编码不同`TEncoding.UTF8`。因此，您正在获取原始 UTF-16 编码的 HTML 字符串，将其转换为操作系统默认的 Ansi 编码，然后尝试将其作为 UTF-8 读回。这只有在数据中不包含任何非 ASCII 字符时才有效。

试试这个：

```
procedure TForm2.SpeedButton2Click(Sender: TObject);   
var   
  iall : IHTMLElement;   
  iparent : IHTMLElement;   
  strumien : TStringStream;   
  reader : TStreamReader;   
  s: String;
begin   
  if Assigned(WebBrowser1.Document) then   
  begin   
    iall := (WebBrowser1.Document AS IHTMLDocument2).body;   
    iparent := iall.parentElement;
    while iparent <> nil do
    begin
      iall := iparent;
      iparent := iparent.parentElement;   
    end;
    Strumien := TStringStream.Create(iall.innerHTML, TEncoding.UTF8, False);   
    try
      Strumien.Position := 0;
      reader := TStreamReader.Create(Strumien, TEncoding.UTF8);   
      try
        while not reader.EndOfStream do   
        begin
          s := reader.ReadLine;
          // use s as needed...
        end; 
      finally
        reader.Free;
      end;
    finally
      Strumien.Free;
    end;
  end;   
end; 
```

在将文档加载到 a 的特定情况下`TMemo`，您根本不需要`TStringStream`or `TStreamReader`：

```
procedure TForm2.SpeedButton2Click(Sender: TObject);   
var   
  iall : IHTMLElement;   
  iparent : IHTMLElement;   
begin   
  if Assigned(WebBrowser1.Document) then   
  begin   
    iall := (WebBrowser1.Document AS IHTMLDocument2).body;   
    iparent := iall.parentElement;
    while iparent <> nil do
    begin
      iall := iparent;
      iparent := iparent.parentElement;   
    end;
    Memo1.Text := iall.innerHTML;   
  end;   
end; 
```

# wpf - 带有背景图像和颜色的文本框

> ID：12180146
> 
> 赞同：0
> 
> 时间：2012-08-29T14:21:47.007
> 
> 标签：wpf, xaml, textbox

我有一个 TextBox 控件，我希望能够设置背景图像和背景颜色。

目前我可以设置一个，或者另一个，但不能同时设置。当我尝试同时设置两者时，我收到“属性'背景'设置不止一次”错误。

这是我使用的代码：

```
<TextBox Name="tbImageTextBox">
      <TextBox.Background>
           <ImageBrush ImageSource="/Resources/Images/image.png" 
                  AlignmentX="Right" Stretch="None"/>
           <SolidColorBrush>#FF8D8A8A</SolidColorBrush>
      </TextBox.Background>
</TextBox> 
```

我还尝试在 TextBox 的样式和 中的图像中设置背景颜色`<TextBox.Background>`，但颜色被忽略。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T14:36:47.783

根据需要使用网格资源作为背景。同一资源可用于多个文本框。

```
<Grid>
    <Grid.Resources>
        <ImageBrush x:Key="img" ImageSource="Blue hills.jpg"></ImageBrush>
        <SolidColorBrush x:Key="brownBrush" Color="Brown"></SolidColorBrush>
    </Grid.Resources>

    <TextBox x:Name="test" Background="{StaticResource img}" Width="100" Height="40" />
</Grid> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T16:19:26.507

我最终将 TextBox 放入设置了背景颜色的网格中，并将背景图像应用于 TextBox 本身，因为使用 VisualBrush 和 DrawingBrush 拉伸了我的图像或仅将背景颜色应用于图像 - 而不是 TextBox 的其余部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T14:33:05.643

您可能想要 a`VisualBrush`或 a `DrawingBrush`。更多信息可以在 MSDN 上[找到](http://msdn.microsoft.com/en-us/library/aa970904.aspx)。这样的事情可能会让你开始：

```
<Rectangle Width="75" Height="75">
  <Rectangle.Fill>
    <VisualBrush TileMode="Tile">
      <VisualBrush.Visual>
        <Grid>
          <Image BaseUri="somepic.png" />
          <Rectangle Brush="FF8D8A8A" />  
        </Grid>
      </VisualBrush.Visual>
    </VisualBrush>
  </Rectangle.Fill>
</Rectangle> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T14:28:17.597

您需要将颜色和图像组合在一个`Brush`实例中，例如，您可以使用 a[`DrawingBrush`](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingbrush.aspx)或 a[`VisualBrush`](http://msdn.microsoft.com/en-us/library/system.windows.media.visualbrush.aspx)包含`Image`图像的控件并将其`Background`设置为颜色。

# css - 使用 ie9 获取 CSS Div 问题

> ID：12180150
> 
> 赞同：-2
> 
> 时间：2012-08-29T14:21:53.627
> 
> 标签：css, html

实际上，我已经为我的一个游戏网站设计了模板。在我玩游戏时，我在 IE9 中遇到了一些问题，但在其他浏览器上没有问题。为了清楚地理解这个问题，请看[这个](http://www.toon10.com/gameplay/KungFu_Panda_Racing_Challenge)

![在此处输入图像描述](../Images/c04ba520efaa1ca0a79c259f7d77aac8.png) 播放页面代码：

```
<div style="float:left">
<div class="gameContentsurround">
<div class="gameContentbg">
       <div class="gameDiv">
          <div align='center'>

            <!--game content here-->        
          </div>
      </div>
</div>
<div class="gameboxbelowheight"></div>
</div>
<div style='height:5px'></div>
<div style="clear:both"></div>
<div class="gameDesc">
<!--game description here-->
</div>
<div class="moregamesbg">
<div class="moregameswhitebg">
<!--more games section here-->
</div>
</div>
</div>
<div style="float:right; width:390px">
 <!--right column where actual issue comes here in IE9-->
</div> 
```

right_column 代码：

```
<div class="playAdsWhiteBg">
    <div class='playAdsDiv'>
    <center>
        google ads

        </center>
    </div>

</div>
<div style="clear:both"></div>
<div style='height:2px'></div>
<!-- Ads END -->

<!-- Ads -->

<!--<div><?php echo SPONSORS_TITLE;?></div> -->

<div class="playAdsWhiteBg">
    <div class='playAdsDiv'>
    <center>
        google ads

        </center>
    </div>
 </div> 

<div style="clear:both"></div>
<div style='height:2px'></div>
<!-- Ads END -->

<!-- Comments Section -->
<div class="playAdsWhiteBg">
    <div class='playAdsDiv'>
    <div style="overflow:scroll">
fb comments
</div>
</div>
 </div> 

 <div style="clear:both"></div>
<div style='height:2px'></div>
<!-- Rating Section -->

<div class="ratethisgameWhiteBg">
    <div class='ratethisgameDiv'>
        rating system
    </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:05:52.910

添加`width: 390px`到`content`的第一个孩子。

当你使用浮动元素时，你应该总是设置它们`width`

# iphone - RestKit 处理重叠的 RKRequest 委托

> ID：12180151
> 
> 赞同：0
> 
> 时间：2012-08-29T14:21:55.837
> 
> 标签：iphone, rest, restkit

我有几个 RestKit 都使用相同的格式：

```
[[RKClient sharedClient] get:endString queryParameters:params delegate:self]; 
```

我有一个masterMethod，它基本上刷新了我所有用户的宁静数据，看起来像这样

```
-(void)masterMethod
{
[self get1];
[self get2];
[self get3];
[self get4];
[self get5];
} 
```

所有获取的格式都与上述格式相同。所有这些代码都在一个包含委托方法的类中：

```
- (void)request:(RKRequest*)request didLoadResponse:(RKResponse*)response 
```

但是，我认为当我尝试以相同的方法调用 all give get 时出现了问题。就好像委托 didLoadResponse 和 didRecieveResponse 方法重叠或获得释放或其他东西。有没有办法让一个主队列来处理这个巨大的呼叫？还是有其他问题。

我在 masterMethod 调用中的某处遇到 BAD_ACCESS 错误。

谢谢，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:47:36.887

你在说什么`get`？如果你要拉下对象，你应该使用 isKindOfClass 方法来区分对象`objectLoader:didLoadObjects`并适当地设置。

```
- (void)objectLoader:(RKObjectLoader*)objectLoader didLoadObjects:(NSArray*)objects {

    if ([[objects objectAtIndex:0] isKindOfClass:[Apple class]]) {

        Apple *apple = [objects objectAtIndex:0];

    }
    else if ([[objects objectAtIndex:0] isKindOfClass:[Banana class]]) {

        Banana *banana = [objects objectAtIndex:0];

    }
} 
```

如果您要从请求响应中提取数据，请查看在请求对象上设置 userdata，然后在`request:didLoadResponse`. 有关更多信息，请参阅[RestKit：在 didLoadResponse: 中区分多个请求](https://stackoverflow.com/questions/8387253/restkit-distinguish-multiple-requests-in-didloadresponse)。

# visual-studio-2010 - 无法在 Visual Studio 2010 中加载 Silverlight 3 项目

> ID：12180156
> 
> 赞同：1
> 
> 时间：2012-08-29T14:22:22.500
> 
> 标签：visual-studio-2010, visual-studio, silverlight, silverlight-3.0

我一直在尝试在 Visual Studio 2010 中打开 Silverlight 3 解决方案，但出现以下错误：

> 无法读取项目文件“ESM.Visualization.csproj”。C:\Code\ESM\ESM.Visualization\ESM.Visualization.csproj(238,3)：导入的项目“C:\Program Files(x86)\MSBuild\Microsoft\Silverlight\v3.0\Microsoft.Silverlight.CSharp .targets”没有找到。确认声明中的路径正确，并且该文件存在于磁盘上。

我发现我没有 Silverlight v3.0，但我找不到在我的 Visual Studio 2010 上安装 Silverlight 3.0 的方法，特别是因为我已经安装了 Silverlight v4.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T15:04:52.063

您必须手动更改 *.csproj 文件。

在任何文本编辑器中打开它，导航到代码不正确的行（我想是数字 238）并检查它是否如下所示：

```
<Import Project="$(MSBuildExtensionsPath32)\Microsoft\Silverlight\$(SilverlightVersion)\Microsoft.Silverlight.CSharp.targets" /> 
```

然后更改这些行，将第二个元素的内容设置为“v4.0”：

```
<TargetFrameworkIdentifier>Silverlight</TargetFrameworkIdentifier>
<TargetFrameworkVersion>v4.0</TargetFrameworkVersion>
<SilverlightVersion>$(TargetFrameworkVersion)</SilverlightVersion> 
```

# objective-c - 从 URL 中提取图像

> ID：12180158
> 
> 赞同：1
> 
> 时间：2012-08-29T14:22:24.760
> 
> 标签：objective-c, ios, url, uiimage, nsdata

网址是：

```
https://api.url2png.com/v3/P4DE5D1C99D8EF/7bbb6e0d1b74fb0ae1d4f18b06320096/400x400/abc.com 
```

我想将上面的图像放入 UIImage。我试过这个：

```
NSURL *urlString = [NSURL URLWithString:@"https://api.url2png.com/v3/P4DE5D1C99D8EF/7bbb6e0d1b74fb0ae1d4f18b06320096/400x400/abc.com"];

NSData *imageData = [[NSData alloc]initWithContentsOfURL:urlString];
UIImage *img = [UIImage imageWithData:imageData]; 
```

但这似乎行不通。该 url 没有文件扩展名，如`.png`or `.jpg`。是否可以从这种 URL 中提取图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T14:36:09.203

你很接近，你要做的是`UIImagePNGRepresentation`在这个特定图像的情况下（因为你链接的图像实际上是`.png`）基本上将数据转换为可用的图像。如果您尝试使用`.jpg`图像，请使用`UIImageJPEGRepresentation`.

```
NSURL *urlString = [NSURL URLWithString:@"https://api.url2png.com/v3/P4DE5D1C99D8EF/7bbb6e0d1b74fb0ae1d4f18b06320096/400x400/abc.com"];
NSData *imageData = [NSData dataWithData:UIImagePNGRepresentation([UIImage imageWithData:[NSData dataWithContentsOfURL:urlString]])];
UIImage *image = [UIImage imageWithData:imageData]; 
```

或者，如果你和我一样是单线的忠实粉丝，你可以使用这个：

```
UIImage *image = [UIImage imageWithData:UIImagePNGRepresentation([UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"https://api.url2png.com/v3/P4DE5D1C99D8EF/7bbb6e0d1b74fb0ae1d4f18b06320096/400x400/abc.com"]]])]; 
```

# sql - 放置在 ColdFusion CFC 中时 SQL 语句不起作用

> ID：12180159
> 
> 赞同：3
> 
> 时间：2012-08-29T14:22:25.200
> 
> 标签：sql, sql-server, database, coldfusion, cfc

我有在 Microsoft SQL Server 中运行良好并返回预期结果的下表连接。

```
SELECT     d.id1, c.content_type
FROM       Document2 AS d INNER JOIN
           Content2 AS c ON d.content_id = c.content_id
WHERE     (d.class_id = 1) 
```

但是，当我将语句放入 ColdFusion CFC 时，该语句将不会执行，并且我没有得到任何返回。CFC 文件中的语法是否更改？Microsoft SQL 语法与 ColdFusion CFC 语法不同吗？还是我在这里错过了其他东西？

这是相关的功能。如果我使用不是表连接的简单 SQL 语句，我可以让这段代码工作。但是，当我插入表连接语句时，什么都不会返回。

```
 remote array function getcontent() {
    var q = new com.adobe.coldfusion.query();
     q.addParam( name="searchParam", value="#searchName#" );
    q.setDatasource("Document");
    q.setSQL("SELECT d.id1, c.content_type FROM Document2 
    AS d INNER JOIN   
    Content2 AS c ON d.content_id = c.content_id WHERE (d.class_id = 1)");

    var data = q.execute().getResult();
    var result = [];
    for(var i=1; i<= data.recordCount; i++) {
        arrayAppend(result, {"id"=data.d.id1[i], "Type"=data.c.content_type[i]});
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T14:45:56.443

问题是这行代码：

```
arrayAppend(result, {"id"=data.d.id1[i], "Type"=data.c.content_type[i]}); 
```

您不会像那样引用数据库变量 - 表别名不是列别名的一部分。

你应该简单地使用：

```
data.id1[i] 
```

*如果*您确实`.`在列别名中有 a，那么您需要使用括号表示法来引用它，如下所示：

```
data['d.id1'][i] 
```

但同样，表别名不是列别名的一部分，因此不需要。

# bash - 将文件中的值读入变量

> ID：12180162
> 
> 赞同：2
> 
> 时间：2012-08-29T14:22:31.047
> 
> 标签：bash, makefile

我在 Windows 中使用 make，我想从文件中读取几个值以用作 makefile 中的变量。

我有一个文件，其中包含以下几行：

```
/* A comment */
#define SOME_STRING "ABCDE"

/* A comment         "     " */
#define BLANK_STRING "     "

/* A comment */
#define SOME_VERSION 01.01a01 
```

我想在我的makefile中得到两个变量。一组设置为**ABCDE**，另一组设置为**01.01a01**。

这也可以使用从 makefile 中调用的一些 bash 命令来完成。我是 makefile、bash 和 stackoverflow 的新手，所以请多多包涵！

谢谢

斯蒂芬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:50:34.880

```
all:
  echo $(SOME_VERSION)

imports: input_file
  sed -n 's/^#define \([^ ]*\) \("*[^"]*"*\)/\1=\2/p' input_file > imports

include imports 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T16:49:25.137

```
VARS := $(shell  sed -n "s/^\#define .* //p" filename)

A = $(word 1, $(VARS))
B = $(word 2, $(VARS)) 
```

# javascript - 某些 js 文件在 Drupal 中不起作用

> ID：12180165
> 
> 赞同：0
> 
> 时间：2012-08-29T14:22:42.770
> 
> 标签：javascript, drupal

我正在尝试在另一个之前渲染一个 div。

我已经在我的本地机器上测试了 js，以确保它通过创建一个简单的页面来工作。代码如下：

```
<!DOCTYPE html>
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
    <div id="QWERTY">
        <div class="content">   
            <div class="field-name-field-image-one">IMAGE</div>
            <div class="body">BODY</div>
        </div>
    </div>       
<script>$('.content .body').insertBefore('.content .field-name-field-image-one'); // check before() examples</script>

</body>
</html> 
```

我已将以下代码添加到我的 Drupal 站点上的 js 文件中：

```
(function ($, Drupal, window, document, undefined) {

    $('.content .body').insertBefore('.content .field-name-field-image-one'); // check before() examples

})(jQuery, Drupal, this, this.document); 
```

我的 .info 文件链接到 js 并且正在加载。其他需要 javascript 的元素也可以工作。我什至尝试在 html.tpl 文件中添加脚本，但这也不起作用。

与我制作的简单版本相比，我试图影响的 div 嵌套在 html 标记的深处，并且应用了多个类。这可能是原因吗？我不够具体吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:43:52.170

感谢一些帮助，我已将其更新为以下内容，并且可以正常工作：

```
(function ($, Drupal, window, document, undefined) {
  $(function() {
    $('.content .body').insertBefore('.content .field-name-field-image-one'); // check before() examples
  });

})(jQuery, Drupal, this, this.document); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T03:24:45.147

您不需要使用 Javascript 来更改内容类型中字段的顺序。

如果您使用的是 Drupal 7，请转到主页 » 管理 » 结构 (/admin/structure/types)，然后单击要更改的内容类型旁边的“管理显示”。您现在可以拖放字段以更改它们在每种视图模式下的显示顺序（例如，默认、预告片）。

如果你真的想使用 Javascript 来做这件事，Drupal 7 使用了一种特殊的语法。

```
(function ($) {
  Drupal.behaviors.custom_moveimage = {
    attach: function (context, settings) {
      $('.content .body').insertBefore('.content .field-name-field-image-one');
    }
  };
}(jQuery)); 
```

Drupal 文档对此有[更多信息](https://drupal.org/node/171213)。

# function - 如何在“发布操作”Facebook JavaScript 函数中插入当前 URL

> ID：12180170
> 
> 赞同：0
> 
> 时间：2012-08-29T14:22:55.867
> 
> 标签：function, facebook-javascript-sdk

我可以将以下操作发布到 facebook。我现在想做的是自动将当前页面 URL 插入 MYURL。然后我可以将此代码放在外部文件中，而不必手动插入 url 并将其放在每个页面上。我是 JavaScript 新手（我花了很长时间才一起编写下面的代码）。我已经搜索到死亡，找不到这样做的方法。如果有任何帮助，我将不胜感激。

```
 <script type="text/javascript">

function postRead()
    {

FB.api('/me/namespace:action&object=http://MYURL','post',  function(response) {
            if (!response || response.error) {
        FB.login(function(response) {
   if (response.authResponse) {
     console.log('Welcome!  Fetching your information.... ');
     FB.api('/me', function(response) {
       console.log('Good to see you, ' + response.name + '.');
     });

FB.api('/me/namespace:action&object=http://MYURL','post',  function(response) {
            if (!response || response.error) {
                alert('Error occured');
              } else {
                 document.getElementById("postlink").innerHTML="Posted!";

              }
        });

   } else {
     console.log('User cancelled login or did not fully authorize.');
   }
 });
              } else {
                 document.getElementById("postlink").innerHTML="Posted!";

              }
        });
    }   

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T22:33:13.643

多亏了这篇文章->[从javascript 'onclick'-command 上的url中删除字符，](https://stackoverflow.com/questions/8782120/strip-characters-from-url-on-javascript-onclick-command)我才解决了这个问题。不幸的是我不能投票，因为我没有声誉，这是一种耻辱。

答案代码是双星，这意味着要大胆对不起。

```
function postRead()
    {
FB.api('/me/namespace:action&object='**+encodeURIComponent(location.href)**,'post', function(response) {
            if (!response || response.error) {
        FB.login(function(response) {
   if (response.authResponse) {
     console.log('Welcome!  Fetching your information.... ');
     FB.api('/me', function(response) {
       console.log('Good to see you, ' + response.name + '.');
     });

FB.api('/me/namespace:action&object='+encodeURIComponent(location.href),'post', function(response) {
            if (!response || response.error) {
                alert('Error occured');
              } else {
                 document.getElementById("postlink").innerHTML="Posted!";

              }
        });

   } else {
     console.log('User cancelled login or did not fully authorize.');
   }
 });
              } else {
                 document.getElementById("postlink").innerHTML="Posted!";

              }
        });
    } 
```

# performance - Groovy @CompileStatic 和 Grails

> ID：12180178
> 
> 赞同：0
> 
> 时间：2012-08-29T14:23:21.343
> 
> 标签：performance, grails, groovy-2

查看 DZone 上关于使用 @CompileStatic 注释编译时使用 Groovy2 提高性能的文章，我想知道我可以在多大程度上利用它？我猜是注释控制器、域对象和服务？编译应用程序时，Grails 默认会利用它吗？

[链接到文章。](http://java.dzone.com/articles/groovy-20-performance-compared)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T15:43:59.070

截至[2012 年 12 月 20 日](http://grails.org/news/1285958)，注释应该可用于 Grails 2.2（使用 Groovy 2.0）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:31:48.320

当前 Grails 版本 (2.1) 运行 groovy 1.8.x

在 Grails web 中，您可以看到路线图，其中 Groovy 2.x 集成是特色

[http://grails.org/路线图](http://grails.org/Roadmap)

# c# - 在运行时创建表？

> ID：12180180
> 
> 赞同：1
> 
> 时间：2012-08-29T14:23:26.193
> 
> 标签：c#, rtf

C# WinForms：

如果我想在运行时为富文本框创建表格，我应该以编程方式创建表格的 RTF 规范语法并将其传递给它的 rtf 文本吗？有没有更好的办法？

# vb.net - 线程在 sub 完成之前不会启动 VB.NET

> ID：12180181
> 
> 赞同：0
> 
> 时间：2012-08-29T14:23:26.607
> 
> 标签：vb.net, multithreading

我的程序中有以下子程序：

```
public sub RunThis()
Me.Hide()
NEWFORM.Show()
Dim t = New Thread(Sub() Me.printToPowerPoint(saveLocation, printlist))
t.SetApartmentState(ApartmentState.STA)
t.IsBackground = True
t.Start()
While t.isAlive

end while
NEWFORM.close()
Me.Close()
end sub 
```

运行这个我的程序挂起。有没有人有这个问题的解决方案。我是线程新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:19:18.113

您可能知道，在 WinForm 项目中，UI 只能从单个线程处理。这被亲切地称为 UI 线程。这就是为什么在任何时候需要访问或修改 UI 元素时，都必须调用控件或表单的`Invoke`方法。该`Invoke`方法使给定的委托在 UI 线程上运行。但是，这样做不会中断 UI 线程已经在执行的任何处理。如果 UI 线程当前很忙，当你调用 时`Invoke`，它会挂起，直到 UI 线程不再忙，然后它会执行给定的委托。

因此，在您的代码中，您正在启动一个新线程，该线程内部试图在 UI 线程上调用一个方法。但是，在启动新线程后，您会立即进入一个循环，使 UI 线程保持忙碌，直到另一个线程完成。因此，当您的新线程调用回 UI 线程时，UI 线程很忙，并且两个线程实际上都会永远挂起。

`DoEvents`是一个关键字，您可以从 UI 线程中的冗长进程或循环中调用，以表明您想要暂停当前处理，从而释放 UI 线程来处理任何等待的窗口消息（绘制事件、单击事件、调用请求等）。一旦处理了所有这些待处理的窗口消息，它将返回执行您调用后的下一条语句`DoEvents`。因此，如果`DoEvents`在循环内调用使其正常工作，这意味着您的新线程必须调用回 UI 线程，或者在继续之前等待处理其他一些窗口消息。

打电话`DoEvents`是危险的，并且被广泛认为是不好的做法。通常，如果您需要调用`DoEvents`，这表明您需要重新考虑您的设计。通常有更好的方法来做你正在做的事情。

在您的情况下，似乎启动新线程完全没有意义。除非您已缩写代码，否则似乎只要您启动新线程，您只需将 UI 线程置于等待其他线程完成即可。如果是这种情况，那么简单地在 UI 线程本身上完成工作而不是开始一个新线程会更有意义。在您提供的代码中，没有两个线程将同时有效地进行处理，因此它并不比单个线程好。

# objective-c - 改变 UIStepper 的大小

> ID：12180182
> 
> 赞同：4
> 
> 时间：2012-08-29T14:23:35.357
> 
> 标签：objective-c, ios, cocoa-touch, uistepper

我似乎无法更改的大小`UIStepper`：

1.  在 IB 中，宽度和高度框是灰色的。
2.  我用过`initWithFrame`：

    UIStepper *stepper = [[UIStepper alloc] initWithFrame:CGRectMake(300, 638, 120, 80)];

    但它不会改变大小。SO上的几个帖子似乎暗示它是可变的。有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-09T14:37:04.153

```
UIStepper* s = [UIStepper alloc] init];  
s.transform = CGAffineTransformMakeScale(0.75, 0.75); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-11T05:06:12.677

You can properly update the UIStepper size without transformation.

Use the following method to set the background image and the stepper will draw itself using the background size:

```
- (void)setBackgroundImage:(UIImage*)image forState:(UIControlState)state 
```

**Example**

```
 [self.stepper1 setIncrementImage:[UIImage imageNamed:@"plusIcon1.png"] forState:UIControlStateNormal];
    [self.stepper1 setDecrementImage:[UIImage imageNamed:@"minusIcon1.png"] forState:UIControlStateNormal];

    [self.stepper1 setBackgroundImage:[UIImage imageNamed:@"stepperBkg1.png"] forState:UIControlStateNormal];
    [self.stepper1 setBackgroundImage:[UIImage imageNamed:@"stepperBkgHighlighted1.png"] forState:UIControlStateHighlighted];
    [self.stepper1 setBackgroundImage:[UIImage imageNamed:@"stepperBkgDisabled1.png"] forState:UIControlStateDisabled]; 
```

This yields the following result on the left, compared to an unmodified stepper on the right: ![enter image description here](../Images/40f6f6f0641ea7dac54042e8f2d59544.png)

stepperBkg1@2x.png:

![enter image description here](../Images/c2ee5dd7327b4901079da1c3a5c4a27c.png)

stepperBkgHighlighted1@2x.png:

![enter image description here](../Images/29fd93d59bbea4902c1eb22667c1d0fb.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-08T14:58:40.120

我在我的步进器上尝试了变换——它确实改变了外观并对其进行了缩放，但是，+ 和 - 的图像被拉伸了（所以你必须按照原始步进器的比例缩放。

另外，要小心，因为实际增加和减少的触摸区域确实会改变 - 所以在拉伸的图像上，按钮不会沿着整个视图减少 - 所以这可能不是一个好的解决方案......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-29T14:38:36.343

来自文档：

> 步进器的边界矩形与 UISwitch 对象的边界矩形相匹配。

听起来不像，好像可以提前。

同样在这篇[博文](http://mobiledevelopertips.com/user-interface/ios-5-uistepper-control.html)中：

```
// Frame defines location, size values are ignored
UIStepper *stepper = [[UIStepper alloc] initWithFrame:CGRectMake(120, 20, 0, 0)]; 
```

但是你可以尝试[改变它的 layer](http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_affine/dq_affine.html#//apple_ref/doc/uid/TP30001066-CH204-TPXREF101)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T21:51:40.453

您可以证明可以扩展它：

```
stepper.transform = CGAffineTransformMakeScale(1.75, 1.0); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-26T13:43:00.230

我为它制作了一个小的自定义 UIStepper 类。不需要图像，不需要转换。自动生成的图像。 [https://github.com/alelipona/VZCustomSizeStepper](https://github.com/alelipona/VZCustomSizeStepper) [![在此处输入图像描述](../Images/0edba8319fd7d9a3c1dcd7ee2de15ae0.png)](https://i.stack.imgur.com/JKiAP.png)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-11-30T23:39:59.043

是的，您可以更改步进器的大小。

首先，右键单击情节提要->选择（打开方式）->选择（源代码）

然后在代码中找到 stepper--> find width=??? 和改变。

然后再次单击情节提要并选择作为界面构建器打开。

# java - 带有数据输入的 PHP/JavaScript Web 交互式图集？

> ID：12180184
> 
> 赞同：0
> 
> 时间：2012-08-29T14:23:41.453
> 
> 标签：java, php, javascript, html, css

我为帖子的标题有点模棱两可道歉，我想不出它的名字，所以如果有人有更好的主意，请随时编辑！

我想创建类似的东西：[http](http://re.jrc.ec.europa.eu/pvgis/apps4/pvest.php) ://re.jrc.ec.europa.eu/pvgis/apps4/pvest.php或类似的东西。我什至不知道从哪里开始，这是一个问题，因为由于我的模棱两可，我无法搜索问题。

我在 php 方面有丰富的经验，在 javascript 方面经验一般。我想可能使用 java 会做到这一点，但不应该有 php 不能这样做的原因。

我可以从哪里开始这样的事情？我正在寻找一些输入，用户可以在其中输入数据，它将显示不同区域的“天气模式类型颜色”能源使用情况（有点像[这样](http://blogs.redding.com/smobley/archives/11-20-07-today-gfsx_500p_24h.gif)）

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:34:55.237

无需创建自己的地图和关联的“对象”。尝试学习和使用现有的地图/地理工具，例如[Google Maps API](https://developers.google.com/maps/)。同样对于天气之类的事情，您可以选择一些[API 提供程序](http://blog.programmableweb.com/2009/04/15/5-weather-apis-from-weatherbug-to-weather-channel/)并相应地格式化您的地图。

# crystal-reports - Crystal - 制作条形图跨页

> ID：12180190
> 
> 赞同：1
> 
> 时间：2012-08-29T14:23:59.267
> 
> 标签：crystal-reports, report, bar-chart

[使用水晶报表 2008]

我在报告页脚中有一个水平条形图。此条形图的行数可能多于一页上可以查看的行数。目前，它们都被压缩成一页，并且沿 y 轴的大部分标签都被跳过了。

如何将此条形字符配置为跨页？我还希望能够设置每个立管的默认宽度。

提前致谢。

# backbone.js - 如何从事件中调用模型方法？

> ID：12180191
> 
> 赞同：1
> 
> 时间：2012-08-29T14:24:00.053
> 
> 标签：backbone.js

我在模型中有方法：

```
decrease: function(){
    this.save({
        count: this.get('count') - 1
    });
} 
```

接下来，我调用事件视图中的方法：

```
'click [data-skills="minus"]': 'decrease' 
```

从这个方法中，我从模型中调用方法：（#3）

```
decrease: function(){
    this.model.decrease();
} 
```

有没有办法直接从事件中调用模型的方法？没有第 3 步。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:30:32.423

```
events: {
    'click [data-skills="minus"]': function(){
       this.model.decrease();
     }
} 
```

# css - 为什么这个页脚不在内容的末尾？

> ID：12180193
> 
> 赞同：0
> 
> 时间：2012-08-29T14:24:02.983
> 
> 标签：css, css-float

主要标记

```
<body>
  <div id="contenedor">
      ....
  </div>
  <div class="fLeft"> <footer > ... </footer> </div>
</body> 
```

CSS

```
body{
}
#contenedor{ float: left; width:100%;}
.fLeft{ float:left } 
```

我想最好的方法是触发页面..

```
http://209.51.221.243/integracion/login.php 
```

如您所见，页脚位于内容后面的页面中间上方...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:28:00.560

起初，我认为可能是您没有清除浮动。但后来我注意到每个浮动元素都是绝对定位的。通过应用`position:absolute`到一个元素，您将其从文档流中剥离出来。解决此问题的最佳方法是`position:absolute`从您的“小部件”中删除，但是您的设计将不会显示为您当前拥有的样子。

解决您的限制的想法/建议是将页脚固定到页面底部。将以下内容应用于`<footer>`：

```
footer {
 position: fixed;
 bottom: 0;
 left: 0;
 width: 100%;
} 
```

您会注意到，当您在页面上滚动时，您的页脚将保持不变，这很可能不太理想，但我可以保证它会保持在页面底部。否则，由于滥用某些属性，您正在考虑重新设计样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:30:11.007

您在页脚之前使用浮动 div，因此，为了将页脚放在这些 div 之后，您的页脚的 css 应包含：`clear: both;`或`clear: left;`，在您的情况下。

文档：[http](http://www.w3schools.com/cssref/pr_class_clear.asp) ://www.w3schools.com/cssref/pr_class_clear.asp和（当然）[https://www.google.com/search?q=css+clear](https://www.google.com/search?q=css+clear) :)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-29T14:37:11.833

UPDATE2：我意识到我错了。这个答案在这种特殊情况下不起作用。

* * *

第一：对于任何页脚来说，[这](http://ryanfait.com/sticky-footer/)都是一个很好的起点。用它。

第二：您可能已经注意到，包含所有浮动框 ( `.centerCnt`) 的容器不够大，无法容纳所有浮动框。要解决此问题，您需要使用良好的`.clearfix`. 有很多可供选择，但我使用[这个](http://www.yuiblog.com/blog/2010/09/27/clearfix-reloaded-overflowhidden-demystified/)：

```
/* The Magnificent Clearfix: Updated to prevent margin-collapsing on child elements. - j.mp/bestclearfix */
.clearfix:before, .clearfix:after { content: "\0020"; display: block; height: 0; overflow: hidden; }
.clearfix:after { clear: both; }
/* Fix clearfix: blueprintcss.lighthouseapp.com/projects/15318/tickets/5-extra-margin-padding-bottom-of-page */
.clearfix { zoom: 1; } 
```

您将需要此选项，`.centerCnt`否则 Sticky Footer 将不起作用。

更新：简单地使用 clearfix 可能会解决您的问题。将上面的代码添加到您的 CSS 并给出`.centerCnt`类`clearfix`.

# php - 在 Drupal 6 中，如何避免在使用菜单挂钩时清除缓存？

> ID：12180194
> 
> 赞同：1
> 
> 时间：2012-08-29T14:24:04.203
> 
> 标签：php, drupal, caching, menu, hook

我正在使用 Drupal 6.26。例如，当我将页面参数从 150 更新到 50 时，我刷新页面并看不到任何变化。当我从性能页面清除缓存时，我只会看到变化。当我在 Windows 上本地测试 Drupal 时，缓存的设置全部关闭。现在我知道在 Drupal 5 上你有一个布尔标志 $may_cache 但查看 API 这个选项对于 Drupal 6 不存在。

有没有办法不每次都清除缓存以查看更改？

```
function usman_menu(){

$items['usman/hello'] = array(
        'page callback' => 'usman_example',
        'access callback' =>'user_access',
        'access arguments' =>array('access content')
);

$items['usman'] = array(
        'page callback' => 'usman_begin',
        'page arguments' => array('150'), 
        'access callback' =>'user_access',
        'access arguments' =>array('access content')
);
return $items;
}

function usman_begin($id = 20, $message = "YES", $optional = "NO"){

print "Loaded " . __FUNCTION__;
print "<br/>";
print "ID is $id, Message is $message, Option is $optional";
} 
```

* * *

好的，我现在已经了解了有关菜单挂钩的一些知识。我只是在玩代码，看看路径如何与参数和占位符一起工作。它刷新得足够快，我可以测试并且不得不求助于清除缓存。我觉得这很奇怪，考虑到没有选项可以通过性能页面暂时禁用此类缓存，仅供开发人员使用。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:55:10.820

在不更改核心文件的情况下，我不知道有任何方法可以做到这一点（显然这不是一个好主意）。

菜单项被缓存并且在被调用之前不会被刷新[`menu_rebuild()`](http://api.drupal.org/api/drupal/includes%21menu.inc/function/menu_rebuild/6)，直到您刷新缓存（或调用其他一些管理任务之一）才会发生。

无论您采用哪种方式，您都必须至少清除`cache_menu`表格，否则`hook_menu()`根本不会被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:56:15.293

如果我正确理解你的问题，我的答案是否定的。

我假设您正在更改“页面参数”=> 数组（“150”）中的参数值。由于整个定义都会被缓存，并且下次访问相同的路径时，会使用缓存的数据并且不会调用 hook_menu。

我能提供的唯一建议是：

*   对于快速而肮脏的测试，请覆盖函数（回调）本身中的变量值。
*   使用模块/脚本在每次重置时清除缓存表。例如`drush cc all`，或使用开发。

# couchdb - 尝试连接到不可用的 CouchDB 时，带有 Opa 应用程序的节点崩溃

> ID：12180196
> 
> 赞同：1
> 
> 时间：2012-08-29T14:24:07.220
> 
> 标签：couchdb, opa

我正在使用 CouchDB 作为数据库后端开发 Opa 应用程序。当使用 API 函数`CouchDd.Document.get`( [API doc](http://doc.opalang.org/value/stdlib.apis.couchdb/CouchDb/Document/get) ) 获取文档并且数据库服务器已关闭时，我的应用程序崩溃了：

```
/opt/mlstate/lib/opa/stdlib/server.opp/serverNodeJsPackage.js:169
,(global.hasOwnProperty("toString") && global.toString || undefined)(e));}req.
                                                                    ^
TypeError: undefined is not a function
    at ClientRequest.on_error (/opt/mlstate/lib/opa/stdlib/server.opp/serverNodeJsPackage.js:169:489)
    at ClientRequest.EventEmitter.emit (events.js:88:17)
    at Socket.socketErrorListener (http.js:1320:9)
    at Socket.EventEmitter.emit (events.js:88:17)
    at Socket._destroy.self.errorEmitted (net.js:329:14)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

并返回到 shell 提示符。我正在使用 运行应用程序`./myapp --nodb`，因为我不使用 MongoDB 的内置支持。

该`CouchDb.Document.get`函数返回`{success: {FormatedJson: ...}}`或`{failure}`。我希望解析结果`{failure}`足以捕获所有网络连接问题。我还应该做什么？

我在 OSX (11.4.0 Darwin) 上使用 Opa 框架版本 1.0.5，来自 Opa 网站上的标准包，Node.js v0.8.3 和 CouchDB 1.2.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:21:00.273

这是 1.0.5 中的错误，但已经修复。[您可以在此处](https://github.com/MLstate/opalang/tree/v3179)获取固定版本的源代码，但尚未发布官方软件包。

# android - 如何禁用滚动视图的投掷

> ID：12180200
> 
> 赞同：6
> 
> 时间：2012-08-29T14:24:14.493
> 
> 标签：android, android-scrollview

我想禁用滚动视图的投掷手势，但它似乎不起作用。我认为这就像创建一个扩展滚动视图和 @ 方法的基本类一样`Overriding` 简单`onFling`。但是eclipse给了我一个删除@Override的错误：

任何想法如何禁用投掷

```
public class ScrollViewNoFling extends ScrollView {

    /**
     * @param context
     * @param attrs
     * @param defStyle
     */
    public ScrollViewNoFling(Context context) {

        super(context);
        // TODO Auto-generated constructor stub
    }
    public ScrollViewNoFling(Context context, AttributeSet attrs) {

        super(context, attrs);
        // TODO Auto-generated constructor stub
    }
    public ScrollViewNoFling(Context context, AttributeSet attrs, int defStyle) {

        super(context, attrs, defStyle);
        // TODO Auto-generated constructor stub
    }

   @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY)
    {
        return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-10T11:20:51.013

我用 Override fling 方法解决了同样的问题。如果你在你的 ScrollViewNoFling 类上重写了 fling 方法，而不是在这个方法上调用 super.fling，你将拥有 not-fling-handled scrollView。

```
@Override
public void fling (int velocityY)
{
    /*Scroll view is no longer gonna handle scroll velocity.
     * super.fling(velocityY);
    */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:33:45.993

除了使用`fling()`而不是`onFling()`，您还需要注意您的返回值。

根据[onFling()](http://developer.android.com/reference/android/view/GestureDetector.OnGestureListener.html#onFling%28android.view.MotionEvent,%20android.view.MotionEvent,%20float,%20float%29)的文档：

> **退货**
> 
> 如果事件被消费，则为 true，否则为 false

如果您想捕捉事件并且什么都不做，请返回 true。否则，该事件将被传递给其他方法/类以尝试处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T14:27:15.023

我认为应该是 fling 而不是 onFling。请参考官方[文档](http://developer.android.com/reference/android/widget/ScrollView.html#fling%28int%29)

# gwt - 我们如何访问 Selenium-webdriver (Java) 中的实际元素？

> ID：12180201
> 
> 赞同：0
> 
> 时间：2012-08-29T14:24:17.570
> 
> 标签：gwt, selenium, selenium-webdriver, gwt2

在 selenium-webdriver (Java) 中，

例如，我们可以获得 GWT 元素
。`WebElement obj = driver.findElement(By.id("gwt-debug-celltable"));`

通过`obj`我们可以获得celltable的webelement，但我们不会得到实际的celltable。因此，如果想使用 Selenium-Webdriver 检查 celltable 中的记录数。我需要做什么？

可能吗？如果是，请尽快回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:14:07.420

是的。您可以使用 xpath 以某种方式做到这一点：

```
List<WebElement> elements =
     driver.findElements(By.xpath("//table[@id='gwt-debug-celltable']/tbody/tr")); 
```

在元素中将是行列表。我没有测试过这段代码。但它喜欢我们在项目中使用的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-20T08:05:51.990

对于 webtable，我从下面的代码中引用了以下链接 [http://money.rediff.com/gainers/bsc/daily/groupa](http://money.rediff.com/gainers/bsc/daily/groupa) ，您可以从 webtable 中获取所有值

```
 public class MaxFromTable {
public static void main(String[] args) throws ParseException {
WebDriver wd;
System.setProperty("webdriver.chrome.driver","G://chromedriver.exe");
wd= new ChromeDriver();
wd.get("http://money.rediff.com/gainers/bsc/daily/groupa?"); 
String max;
double m=0,r=0;
     //No. of Columns
List  col = wd.findElements(By.xpath(".//[@id='leftcontainer']/table/thead/tr/th"));
System.out.println("Total No of columns are : " +col.size());
 //No.of rows
        List  rows = wd.findElements(By.xpath (".//*[@id='leftcontainer']/table/tbody/tr/td[1]"));
        System.out.println("Total No of rows are : " + rows.size());
        for (int i =1;i<rows.size();i++)
        {    
            max= wd.findElement(By.xpath("html/body/div[1]/div[5]/table/tbody/tr[" + (i+1)+ "]/td[4]")).getText();
            NumberFormat f =NumberFormat.getNumberInstance(); 
            Number num = f.parse(max);
            max = num.toString();
            m = Double.parseDouble(max);
            if(m>r)
             {    
                r=m;
             }
        }
        System.out.println("Maximum current price is : "+ r);        
    }
    } 
```

# perl - 将txt文件中的重复行与perl结合起来

> ID：12180209
> 
> 赞同：1
> 
> 时间：2012-08-29T14:24:33.663
> 
> 标签：perl, text-files

我正在尝试使用 Perl 组合重复的行，但运气不佳。我的制表符分隔的文本文件的结构如下（为便于阅读添加了空格）：

```
Pentamer  Probability Observed Length
ATGCA    0.008        1        16
TGTAC    0.021        1        16
GGCAT    0.008        1        16
CAGTG    0.004        1        16
ATGCA    0.016        2        23
TGTAC    0.007        1        23 
```

我想通过添加三个数字列来组合重复的行，因此包含“ATGCA”的行现在看起来像这样：

```
ATGCA  0.024 3 39 
```

任何想法/帮助/建议将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T01:45:04.807

这是另一种选择：

```
use Modern::Perl;

my %hash;

while ( my $line = <DATA> ) {
    my @vals = split /\s+/, $line;
    $hash{ $vals[0] }->[$_] += $vals[ $_ + 1 ] for 0 .. 2;
}

say join "\t", $_, @{ $hash{$_} } for sort keys %hash;

__DATA__
ATGCA   0.008   1   16
TGTAC   0.021   1   16
GGCAT   0.008   1   16
CAGTG   0.004   1   16
ATGCA   0.016   2   23
TGTAC   0.007   1   23 
```

输出：

```
ATGCA   0.024   3   39
CAGTG   0.004   1   16
GGCAT   0.008   1   16
TGTAC   0.028   2   39 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:32:44.187

```
#!/usr/bin/perl

use warnings;
use strict;

my %hash;
while(<>) {
  my @v = split(/\s+/);
  if (defined $hash{$v[0]}) {
    my $arr = $hash{$v[0]};
    $hash{$v[0]} = [$v[0], $arr->[1] + $v[1], 
                   $arr->[2] + $v[2], $arr->[3] + $v[3]];
  } else {
    $hash{$v[0]} = [@v];
  }
}
foreach my $key (keys %hash) {
  print join(" ", @{$hash{$key}}), "\n";
} 
```

# java - 启动工作台时跳过丢失的编辑器文件

> ID：12180210
> 
> 赞同：1
> 
> 时间：2012-08-29T14:24:34.270
> 
> 标签：java, eclipse-plugin, eclipse-rcp

Eclipse 工作台的标准行为是在调用之间保留打开的文件集，并在重新启动时尝试重新打开这些相同的文件。如果任何文件丢失，则会出现一个占位符编辑器，显示有关丢失文件的错误消息。我们想改变 Eclipse RCP 应用程序的行为，改为静默地跳过任何丢失的文件。

我们已经在编写自己的`IApplication`,`WorkbenchAdvisor`等；这些类可以将各种行为注入平台，但我还没有找到通过这些类完成这些的方法。我们如何实现期望的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T21:40:31.710

我处理这个问题的方式实际上是在正在创建的编辑器中：重写`setInput`以通过调用检查传入的 IEditorInput 的有效性`editorInput.exists()`（在 FileEditorInput 的情况下，检查文件是否存在）或者如果你是使用自定义编辑器输入，您需要的任何其他验证。

如果 editorInput 验证失败，则异步关闭编辑器（当编辑器在完成打开之前关闭时，Eclipse 不喜欢它）：

```
public void close () {
    Display.getDefault().asyncExec(new Runnable () {
        public void run () {
            getSite().getPage().closeEditor(YourEditorClass.this, false);
        }
    });
} 
```

处理此问题的另一种方法是仅在启动时禁用重新打开编辑器 - 请参阅[In Eclipse, how to close the open files(editors) when exiting without auto-load in next startup](https://stackoverflow.com/questions/5337036/in-eclipse-how-to-close-the-open-fileseditors-when-exiting-without-auto-load)

# android - Android中的标签栏问题？

> ID：12180211
> 
> 赞同：-1
> 
> 时间：2012-08-29T14:24:35.070
> 
> 标签：android, listview, android-layout, listactivity, tabbar

目前我在 Android 应用程序中工作，使用 Tabbar 创建五个选项卡，如 1、2、3、4 和 5。第一个选项卡使用 ListActivity 创建 ListView，当我从 ListView 中选择 ListItem 时，ListItem 值转到第三个选项卡，并且我在第三个选项卡中得到了很好的值，但问题是从第一个选项卡到第三个选项卡的值传递，当时只选择了第一个选项卡，但我想选择第三个选项卡。如何解决这个问题，请帮助我。

提前致谢

源代码供您参考：

第一个标签：

```
 @Override
     protected void onListItemClick(ListView l, final View v, int position, long id) 
     {
      super.onListItemClick(l, v, position, id);

      String SelectedItem = l.getItemAtPosition(position).toString();
      System.out.println("Selected Item: "+ SelectedItem);
      System.out.println("position Item: "+ position);

       String SelectedPhoneNumber  = phoneNumber.get(position);
       System.out.println("SelectedPhoneNumber  " + SelectedPhoneNumber);

     // Using TabGroupActivity, so
       Intent i = new Intent(getParent(), 3rdTab.class);
      i.putExtra("DestinationNumber", SelectedPhoneNumber);
     TabGroupActivity parentActivity = (TabGroupActivity)getParent();
     parentActivity.startChildActivity("Sample", i);
   } 
```

1.  TabGroupActivity.java

    公共类 TabGroupActivity 扩展 ActivityGroup {

    ```
    private ArrayList<String> mIdList;

     @Override
        public void onCreate(Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);       
            if (mIdList == null) mIdList = new ArrayList<String>();
        }

     @Override
      public void finishFromChild(Activity child) 
     {
          LocalActivityManager manager = getLocalActivityManager();
          int index = mIdList.size()-1;

          if (index < 1)
          {
              finish();
              return;
          }

          manager.destroyActivity(mIdList.get(index), true);
          mIdList.remove(index); index--;
          String lastId = mIdList.get(index);
          Intent lastIntent = manager.getActivity(lastId).getIntent();
          Window newWindow = manager.startActivity(lastId, lastIntent);
          setContentView(newWindow.getDecorView());
      }

     public void startChildActivity(String Id, Intent intent) {     
          Window window = getLocalActivityManager().startActivity(Id,intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
          if (window != null) {
              mIdList.add(Id);
              setContentView(window.getDecorView()); 
          }    
      }

      @Override
      public boolean onKeyDown(int keyCode, KeyEvent event) {
          if (keyCode == KeyEvent.KEYCODE_BACK) {
              //preventing default implementation previous to android.os.Build.VERSION_CODES.ECLAIR
              return true;
          }
          return super.onKeyDown(keyCode, event);
      }

      /**
       * Overrides the default implementation for KeyEvent.KEYCODE_BACK 
       * so that all systems call onBackPressed().
       */
      @Override
      public boolean onKeyUp(int keyCode, KeyEvent event) 
      {
          if (keyCode == KeyEvent.KEYCODE_BACK) 
          {
              onBackPressed();
              return true;
          }
          return super.onKeyUp(keyCode, event);
      }

      @Override
      public void  onBackPressed  () 
      {
          int length = mIdList.size();
          if ( length > 1) 
          {
              Activity current = getLocalActivityManager().getActivity(mIdList.get(length-1));
              current.finish();
          }       
      }

    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:05:48.967

你看过[这篇文章](http://ericharlow.blogspot.com/2010/09/experience-multiple-android-activities.html)底部的示例应用程序了吗？

进一步来说：

*   您的主要活动是否遵循 TabSample.java 的格式并将选项卡添加到 TabHost？
*   您的选项卡式活动是否扩展了 TabGroupActivity？您可以在示例中看到，作者为每个选项卡（例如 TabGroup1Activity、TabGroup2Activity）创建了一个扩展 TabGroupActivity 的新类，然后*这些*活动中的每一个都会启动另一个活动（例如 OptionsActivity 或 EditActivity）。

如果一切都失败了，您还应该能够使用`tabHost.setCurrentTab(int tabIndex)`.

# javascript - 如何在 javascript 中显示 Javascript 变量？

> ID：12180212
> 
> 赞同：0
> 
> 时间：2012-08-29T14:24:35.193
> 
> 标签：javascript, facebook-opengraph

您好，我正在尝试为我的网站开发 facebook 开放图形系统，我几乎完成了...

它需要发布当前页面 url 才能运行该操作。我使用 document.url 将当前页面 url 获取到一个名为 BASE 的 java 脚本变量，但我不知道如何将它放在 javascript 中，因为它总是显示变量名 intead当我查看页面源时的 url...

```
 var base = document.URL;

  function postCook()
  {

      FB.api(
        '/me/video.watches',
        'post',
        { video: CURRENT PAGE URL SHOULD BE HERE},
        function(response) {
           if (!response || response.error) {
              alert('Error occured');
           } else {
              alert('Cook was successful! Action ID: ' + response.id);
           }
        });

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:27:52.463

查看页面源代码时，您会看到从服务器发送的代码。只需将变量放在那里，它应该可以工作。

```
 var myURL = document.URL;
 FB.api(
    '/me/video.watches',
    'post',
    { video: myURL },
    function(response) {
       if (!response || response.error) {
          alert('Error occured');
       } else {
          alert('Cook was successful! Action ID: ' + response.id);
       }
    }); 
```

或者

```
 FB.api(
    '/me/video.watches',
    'post',
    { video: window.location.href },
    function(response) {
       if (!response || response.error) {
          alert('Error occured');
       } else {
          alert('Cook was successful! Action ID: ' + response.id);
       }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T18:57:50.940

我在我的应用程序中使用它：

```
FB.api('/me/namespace:action&object='+encodeURIComponent(location.href),'post', function(response) {
       if (!response || response.error) {
          alert('Error occured');
       } else {
          alert('Cook was successful! Action ID: ' + response.id);
       }
    }); 
```

# javascript - Javascript嵌套对象访问根级别

> ID：12180215
> 
> 赞同：5
> 
> 时间：2012-08-29T14:24:45.957
> 
> 标签：javascript, object

我在javascript中有一个像这样的嵌套对象：

```
{
nameRoot: "my object",
sub: {
  nameSub: "my sub object"
}
} 
```

我想从 sub 中定义的函数访问 nameRoot。

使用一个函数，我会定义如下：

```
var self = this; 
```

并使用了 self 但我怎样才能在文字对象中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:03:32.987

以下代码允许您链接到父元素并避免父元素出现在 for-in 循环中。

```
var parent = { a: 1 };
var child = { b: 2 };

Object.defineProperty(
    child, 'parent', 
    { value: parent, 
      enumerable: false }
);

parent.child = child;

child.performAction = function() {
    console.log(this.parent.a) // 1
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:48:26.897

因此，最好的方法是使用函数范围。

```
function myFunc(){
   this.nameRoot = "my object";
} 
```

那么您可以执行以下操作：

```
var func = new myFunc();
func.sub = new myFunc();
func.sub.nameRoot = "my sub object"; 
```

显然有更聪明的方法可以做到这一点（例如通过函数参数传递名称），但这是一般模式。

# php - Jumping to function declarations in PHP

> ID：12180220
> 
> 赞同：1
> 
> 时间：2012-08-29T14:24:52.847
> 
> 标签：php, phpstorm

I have a class like

```
class bank
{
    public $accounts;
    public function __construct()
    {
           $accounts = new Accounts();
    }

    public function fun1()
    {
           ///some code
    }
} 
```

Inside `fun1()`, I dont get the auto complete(in PHPStorm and Eclipse) feature when using

```
$this->accounts->..any function 
```

But it works fine when, directly using

```
$accounts->..auto complete works fine here 
```

Can we achieve the same in the first case?

**UPDATE:** Thanks to Berry Langerak for rightly pointing it out.

Also, is it possible to

```
class bank
{
    public $accounts;
    public function __construct()
    {
           $this->accounts = new Accounts();
    }

    public function fun1()
    {
           ///Note changing the reference now
           $this->accounts = new OldAccounts();
           $this->accounts->..it still shows the functions of Accounts Class, can we override this setting in PHPStorm
    }
} 
```

Can we override the behavior and show the functions of the new class, the reference is pointing to

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T14:36:20.147

That's because you're setting "new Accounts" to a local variable in your constructor, versus setting it to the class variable (no $this);

```
class bank
{
    public $accounts;
    public function __construct()
    {
           $this->accounts = new Accounts();
    }

    public function fun1()
    {
           $this->accounts->doStuff( );

           /* @var OldAccounts $this->accounts */
           $this->accounts = new OldAccounts;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T14:30:21.193

It's because the variable has not been documented. This will let the IDE know about the reference (line #3):

```
/* @var Accounts */
$accounts 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T14:33:27.143

I think it's because you haven't defined it as a class variable. IE it should be `protected $accounts`, `public $accounts` or `private $accounts`

# silverlight - 如何在不使用无窗口的情况下使 jQuery 对话框出现在 Silverlight 上方

> ID：12180221
> 
> 赞同：1
> 
> 时间：2012-08-29T14:25:04.623
> 
> 标签：silverlight, jquery-ui

我在多个页面上使用 Silverlight 的 Web 应用程序中使用[jQuery 对话框](http://jqueryui.com/demos/dialog/#modal)。当对话框出现在带有 SL 窗口的页面上时，对话框隐藏在 SL 后面。 **我不能使用无窗口模式。** 有什么直接的方法可以让这个对话框出现在 SL 前面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:53:26.127

您始终可以创建与对话框大小相同的浮动 div。它将在 silverlight 插件之上。您还需要在对话框关闭时关闭 div 的代码。

该对话框将是 div 的一部分，因此会在 Silverlight 上方浮动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T18:51:55.537

使用类似于您使用浮动 div 解释的 iframe 似乎可以正常工作。

它可能需要调整，但希望这可以帮助其他人。

在您的页面上，包含一个 iframe，如下所示：

```
<div id="popupDiv" style="display: none">
    popup contents...
</div>
<iframe id='popupSupporter-iframe' tabindex='-1' frameborder='0' style='display: block;
    position: absolute; z-index: -1; border: 0px none transparent; opacity: 0; top: auto;
    left: auto; width: auto; height: auto;'></iframe> 
```

在您声明对话框的脚本部分：

```
$('#popupDiv').dialog({
    open: function (event, ui) {
        var myDialogIFrame = $('#popupSupporter-iframe');
        var myDialog = $('#popupDiv').dialog("widget");
        myDialogIFrame.css("z-index", "10");
        var left = myDialog.offset().left + 'px';
        var top = myDialog.offset().top + 'px';
        var height = (myDialog.height() + 15) + 'px';
        var width = (myDialog.width() + 15) + 'px';
        $(myDialogIFrame).css("left", left).css("top", top).css("height", height).css("width", width);
    },
    close: function (event, ui) {
        $('#popupSupporter-iframe').css("z-index", "-1");
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-28T09:20:33.747

为 silverlight 应用程序的背景和无窗口属性设置以下值对我有用:)

```
<param name="background" value="transparent" /> 
<param name="windowless" value="true" /> 
```

# opencv - 在交叉编译项目中使用 Opencv 作为静态库

> ID：12180223
> 
> 赞同：1
> 
> 时间：2012-08-29T14:25:20.013
> 
> 标签：opencv, static-libraries, cross-compiling

我在 arm 板上使用 opencv，带有 cortex a8 处理器并在 Debian 上运行。我想使用处理器的 fpu 来提高我的应用程序的性能，所以我使用工具链成功地交叉编译了 opencv（遵循[本指南](http://processors.wiki.ti.com/index.php/Building_OpenCV_for_ARM_Cortex-A8)）为此目的而生成。

话虽如此，我没有使用静态库的经验。当我编译我的代码时，我得到了很多链接错误。显然，它们与 zlib 或 zlib2 有关，正如我在[这个主题](https://stackoverflow.com/questions/9966109/opencv-static-build-jpeg-png-tiff-not-static-linked)上看到的那样。事情是，我没有启用 png 支持，但我仍然得到那些链接错误：

```
cxpersistence.cpp:(.text._ZL8icvCloseP13CvFileStorage+0x24): undefined reference to `gzclose'
/cv-lib-arm-hf/lib/libcxcore.a(cxpersistence.o): In function `icvPuts(CvFileStorage*, char const*)':
cxpersistence.cpp:(.text._ZL7icvPutsP13CvFileStoragePKc+0x3c): undefined reference to `gzputs'
/cv-lib-arm-hf/lib/libcxcore.a(cxpersistence.o): In function `icvGets(CvFileStorage*, char*, int)':
cxpersistence.cpp:(.text._ZL7icvGetsP13CvFileStoragePci+0x4c): undefined reference to `gzgets'
/cv-lib-arm-hf/lib/libcxcore.a(cxpersistence.o): In function `icvEof(CvFileStorage*)':
cxpersistence.cpp:(.text._ZL6icvEofP13CvFileStorage+0x30): undefined reference to `gzeof'
cxpersistence.cpp:(.text._ZL6icvEofP13CvFileStorage+0xc4): undefined reference to `gzeof'
/cv-lib-arm-hf/lib/libcxcore.a(cxpersistence.o): In function `cvOpenFileStorage':
cxpersistence.cpp:(.text.cvOpenFileStorage+0x674): undefined reference to `gzopen'
cxpersistence.cpp:(.text.cvOpenFileStorage+0xae8): undefined reference to `gzrewind'
cxpersistence.cpp:(.text.cvOpenFileStorage+0xb98): undefined reference to `gzrewind'
/cv-lib-arm-hf/lib/libcxcore.a(cxlapack.o): In function `cv::SVD::operator()(cv::Mat const&, int)':
cxlapack.cpp:(.text._ZN2cv3SVDclERKNS_3MatEi+0x2b0): undefined reference to `dgesdd_'
cxlapack.cpp:(.text._ZN2cv3SVDclERKNS_3MatEi+0x4b8): undefined reference to `dgesdd_'
cxlapack.cpp:(.text._ZN2cv3SVDclERKNS_3MatEi+0x74c): undefined reference to `sgesdd_'
cxlapack.cpp:(.text._ZN2cv3SVDclERKNS_3MatEi+0x874): undefined reference to `sgesdd_'
/cv-lib-arm-hf/lib/libcxcore.a(cxlapack.o): In function `cv::eigen(cv::Mat const&, cv::Mat&, cv::Mat&, bool, int, int)':
cxlapack.cpp:(.text._ZN2cvL5eigenERKNS_3MatERS0_S3_bii+0x4bc): undefined reference to `dsyevr_'
cxlapack.cpp:(.text._ZN2cvL5eigenERKNS_3MatERS0_S3_bii+0x66c): undefined reference to `dsyevr_'
cxlapack.cpp:(.text._ZN2cvL5eigenERKNS_3MatERS0_S3_bii+0xa7c): undefined reference to `ssyevr_'
cxlapack.cpp:(.text._ZN2cvL5eigenERKNS_3MatERS0_S3_bii+0xc30): undefined reference to `ssyevr_'
/cv-lib-arm-hf/lib/libcxcore.a(cxlapack.o): In function `cv::solve(cv::Mat const&, cv::Mat const&, cv::Mat&, int)':
cxlapack.cpp:(.text._ZN2cv5solveERKNS_3MatES2_RS0_i+0x760): undefined reference to `dgelsd_'
cxlapack.cpp:(.text._ZN2cv5solveERKNS_3MatES2_RS0_i+0x8fc): undefined reference to `dgelsd_'
cxlapack.cpp:(.text._ZN2cv5solveERKNS_3MatES2_RS0_i+0xb8c): undefined reference to `dgesv_'
cxlapack.cpp:(.text._ZN2cv5solveERKNS_3MatES2_RS0_i+0x1018): undefined reference to `dpotrf_'
cxlapack.cpp:(.text._ZN2cv5solveERKNS_3MatES2_RS0_i+0x105c): undefined reference to `dpotrs_'
cxlapack.cpp:(.text._ZN2cv5solveERKNS_3MatES2_RS0_i+0x10d4): undefined reference to `dgels_'
cxlapack.cpp:(.text._ZN2cv5solveERKNS_3MatES2_RS0_i+0x115c): undefined reference to `dgels_'
cxlapack.cpp:(.text._ZN2cv5solveERKNS_3MatES2_RS0_i+0x11e0): undefined reference to `sgelsd_'
cxlapack.cpp:(.text._ZN2cv5solveERKNS_3MatES2_RS0_i+0x123c): undefined reference to `sgelsd_'
cxlapack.cpp:(.text._ZN2cv5solveERKNS_3MatES2_RS0_i+0x12e0): undefined reference to `spotrf_'
cxlapack.cpp:(.text._ZN2cv5solveERKNS_3MatES2_RS0_i+0x1324): undefined reference to `spotrs_'
cxlapack.cpp:(.text._ZN2cv5solveERKNS_3MatES2_RS0_i+0x1398): undefined reference to `sgels_'
cxlapack.cpp:(.text._ZN2cv5solveERKNS_3MatES2_RS0_i+0x13e8): undefined reference to `sgels_'
cxlapack.cpp:(.text._ZN2cv5solveERKNS_3MatES2_RS0_i+0x1468): undefined reference to `sgesv_'
/cv-lib-arm-hf/lib/libcxcore.a(cxlapack.o): In function `cv::determinant(cv::Mat const&)':
cxlapack.cpp:(.text._ZN2cv11determinantERKNS_3MatE+0x298): undefined reference to `dgetrf_'
cxlapack.cpp:(.text._ZN2cv11determinantERKNS_3MatE+0x40c): undefined reference to `sgetrf_'
/cv-lib-arm-hf/lib/libcxcore.a(cxlapack.o): In function `cv::invert(cv::Mat const&, cv::Mat&, int)':
cxlapack.cpp:(.text._ZN2cv6invertERKNS_3MatERS0_i+0x460): undefined reference to `dgetri_'
cxlapack.cpp:(.text._ZN2cv6invertERKNS_3MatERS0_i+0x4c8): undefined reference to `dgetrf_'
cxlapack.cpp:(.text._ZN2cv6invertERKNS_3MatERS0_i+0x7e4): undefined reference to `dpotrf_'
cxlapack.cpp:(.text._ZN2cv6invertERKNS_3MatERS0_i+0x82c): undefined reference to `sgetri_'
cxlapack.cpp:(.text._ZN2cv6invertERKNS_3MatERS0_i+0xa78): undefined reference to `sgetrf_'
cxlapack.cpp:(.text._ZN2cv6invertERKNS_3MatERS0_i+0xab0): undefined reference to `sgetri_'
cxlapack.cpp:(.text._ZN2cv6invertERKNS_3MatERS0_i+0xaf8): undefined reference to `dgetri_'
cxlapack.cpp:(.text._ZN2cv6invertERKNS_3MatERS0_i+0xb28): undefined reference to `spotrf_'
cxlapack.cpp:(.text._ZN2cv6invertERKNS_3MatERS0_i+0xb5c): undefined reference to `spotri_'
cxlapack.cpp:(.text._ZN2cv6invertERKNS_3MatERS0_i+0xb84): undefined reference to `dpotri_' 
```

谁能阐明我需要做什么？我错过了什么？

**更新：**

我尝试使用相同的工具链编译 zlib 和 bzip2，但错误仍然存​​在。现在我不知道我做错了什么。有人可以帮忙吗？

# javascript - 在 Chrome for iOS 中附加到用户代理字符串的唯一选项卡 ID？

> ID：12180224
> 
> 赞同：5
> 
> 时间：2012-08-29T14:25:25.083
> 
> 标签：javascript, security, user-agent, privacy, chrome-ios

当我在 Chrome for iOS（iPhone 和 iPad）中测试我的网络应用程序时，我注意到附加到用户代理字符串的奇怪 ID，例如：

```
 alert(navigator.userAgent) 
```

会产生这样的东西（注意最后的“3810AC74-327F-43D7-A905-597FF9FDFEAB”部分）：

```
 Mozilla/5.0 (iPhone; CPU iPhone OS 5_1_1 like Mac OS X; en-us) AppleWebKit/534.46.0 (KHTML, like Gecko) CriOS/21.0.1180.77 Mobile/9B206 Safari/7534.48.3 (3810AC74-327F-43D7-A905-597FF9FDFEAB) 
```

此 ID 似乎是特定于选项卡的，即使在转到其他站点时也会保留。

我的问题是，是否有人对此有所了解以及它可能用于什么？

**更新：**

附加此 GUID 是为了[克服 UIWebView 的限制](https://code.google.com/p/chromium/issues/detail?id=355541)。[感谢 eric](https://stackoverflow.com/users/448268/eric)在评论中指出这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-05T13:08:44.290

该 ID与跟踪**没有**任何关系。

有一个[chromium 错误](https://code.google.com/p/chromium/issues/detail?id=355541)详细说明了为什么它是必要的：基本上，它是实现选项卡所必需的。

从错误跟踪器：

> iOS 中没有 API 可以知道，在网络层中，网络请求来自哪个 UIWebView。
> 
> [...] 解决方案 [...] 所有 UIWebView 都将 tabID（仅在设备本地）添加到用户代理字符串。

您可能还想查看一些讨论此问题的 Twitter 线程以及[更多](https://twitter.com/dermike/status/448186339994116097) [信息](https://twitter.com/thijs/status/448110361112485888)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:39:15.400

这真的，真的，看起来像一个邪恶的“超级 cookie”（间谍软件将 GUID 放到您的用户代理字符串上）。

*   [http://www.pcpitstop.com/betapit/tips/SecGUID.asp?conid=24935364&report=Security](http://www.pcpitstop.com/betapit/tips/SecGUID.asp?conid=24935364&report=Security)。
*   [http://blogs.msdn.com/b/ieinternals/archive/2009/10/08/extending-the-user-agent-string-problems-and-alternatives.aspx](http://blogs.msdn.com/b/ieinternals/archive/2009/10/08/extending-the-user-agent-string-problems-and-alternatives.aspx)

如果是这样的话，奇怪的是它在你的两个设备上是如何发生的。网络服务器也收到了用户代理吗？

# python - 如何在 OS X Mountain Lion 上构建 PIL？

> ID：12180225
> 
> 赞同：1
> 
> 时间：2012-08-29T14:25:24.460
> 
> 标签：python, macos, python-imaging-library, osx-mountain-lion

当我尝试在 Mac OS X 10.8.1 Mountain Lion 上构建 PIL 时，我得到以下结果：

```
$ sudo python setup.py install
Password:
running install
running build
running build_py
running build_ext
--- using frameworks at /System/Library/Frameworks
building '_imaging' extension
clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -DHAVE_LIBJPEG -DHAVE_LIBZ -IlibImaging -I/opt/local/include -I/System/Library/Frameworks/Python.framework/Versions/2.7/include -I/usr/local/include -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c _imaging.c -o build/temp.macosx-10.8-intel-2.7/_imaging.o
clang: warning: argument unused during compilation: '-mno-fused-madd'
_imaging.c:75:10: fatal error: 'Python.h' file not found
#include "Python.h"
         ^
1 error generated.
error: command 'clang' failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T15:03:55.340

PIL 跟不上对新操作系统的支持（通过更改 setup.py 以获取新的 lib 目录等）。但是，您可以使用“友好的 PIL fork”**枕头**代替 PIL ：

*   [http://pypi.python.org/pypi/Pillow](http://pypi.python.org/pypi/Pillow)

如果您遇到同样的错误，请报告问题：

*   [https://github.com/python-imaging/Pillow/issues/new](https://github.com/python-imaging/Pillow/issues/new)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:25:24.460

从[这个 SO question](https://stackoverflow.com/questions/2686520/unable-to-build-mercurial-on-osx-python-h-not-found)中，我能够在 /Developer/SDKs/MacOSX10.7.sdk/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 中找到 Python.h。（注意我已经安装了 Xcode）

然后我跑了`sudo python setup.py build_ext --include-dirs /Developer/SDKs/MacOSX10.7.sdk/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7:/Developer/SDKs/MacOSX10.7.sdk/usr/include`

（注意：`/Developer/SDKs/MacOSX10.7.sdk/usr/include`添加是因为 Python.h 解决后 stdio.h 丢失）

最后，我跑了`sudo python setup.py install`

# c++ - C++实现复制构造函数

> ID：12180226
> 
> 赞同：-4
> 
> 时间：2012-08-29T14:25:25.757
> 
> 标签：c++, crash, deep-copy

我正在编写一些代码来实现对象的深层副本。

这是我的代码：

```
//---------------------------------------------------------------------------

#pragma hdrstop

#include <tchar.h>
#include <string>
#include <iostream>
#include <sstream>
#include <conio.h>

using namespace std;

//---------------------------------------------------------------------------

class Wheel
{
public:
    Wheel() : pressure(32)
    {
        ptrSize = new int(30);
    }
    Wheel(int s, int p) : pressure(p)
    {
        ptrSize = new int(s);
    }
    ~Wheel()
    {
        delete ptrSize;
    }
    void pump(int amount)
    {
        pressure += amount;
    }
    int getSize()
    {
        return *ptrSize;
    }
    int getPressure()
    {
        return pressure;
    }
private:
    int *ptrSize;
    int pressure;
};

class RacingCar
{
public:
    RacingCar()
    {
        speed = 0;
        *carWheels = new Wheel[4];
    }
    RacingCar(int s)
    {
        speed = s;
    }
    RacingCar(RacingCar &oldObject)
    {
        for ( int i = 0; i < sizeof(carWheels)/sizeof(carWheels[0]); ++i)
        {
            Wheel oldObjectWheel = oldObject.getWheel(i);
            carWheels[i]=new Wheel(oldObjectWheel.getSize(),oldObjectWheel.getPressure());
        }
    }
    void Accelerate()
    {
        speed = speed + 10;
    }
    Wheel getWheel(int id)
    {
        return *carWheels[id];
    }
    void printDetails()
    {
        cout << carWheels[0];
        cout << carWheels[1];
        cout << carWheels[2];
        cout << carWheels[3];
    }
private:
    int speed;
    Wheel *carWheels[4];
};

#pragma argsused
int _tmain(int argc, _TCHAR* argv[])
{

RacingCar testCar;
testCar.printDetails();

RacingCar newCar = testCar;
newCar.printDetails();

getch();
return 0;
}
//--------------------------------------------------------------------------- 
```

出于某种原因，我的 C++ 构建器在编译此代码后崩溃。上面是否有任何不正确的内容会导致崩溃。没有编译错误，程序只是崩溃了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:27:45.300

问题是：

```
Wheel *carWheels[4]; 
```

和

```
*carWheels = new Wheel[4]; 
```

这仅分配 4 个轮子`carWheels[0]`。随着

```
return *carWheels[id]; 
```

如果`id`不是 0，这将导致未定义的行为，因为如前所述，只有第一个元素是有效指针。

除此之外，代码很糟糕。避免原始指针。C++ 中有更好的选择。使用`std::vector`或`std::array`使用 C 数组的位置，以及使用原始指针的智能指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:29:28.953

一般来说，根据我的经验，如果我的编译器/工具崩溃，我可能做错了什么，以至于编译器编写者甚至从未想过要检查它。

追踪这些事情的最好方法是注释掉代码直到它再次工作，然后慢慢地把东西放回去，直到你找到有问题的部分。

作为设计说明，我会说如果是我，我也会实现一个复制构造函数，而不必为使用它`Wheel`的类编写复杂的深度复制构造函数。`RacingCar`

# maven - wsdl2java生成的代码导致字符编码问题

> ID：12180231
> 
> 赞同：2
> 
> 时间：2012-08-29T14:25:33.557
> 
> 标签：maven, jetty, wsdl2java

我从 WSDL 源生成了一堆 java 文件。我使用 Apache CXF 2.6.1 来生成文件。

当我将代码放到运行 jetty 和 maven 的生产机器上并通过生成的 java 文件向服务器发送请求时，它会以某种方式更改系统/JVM 字符编码。瑞典语字符 å、ä 和 ö 变为 Ã¥、Ã¤、Ã¶。

我无法在我自己的盒子上复制它。

有人知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-03T11:12:14.713

从版本 2.5.4 开始，有一个新的命令行选项 -encoding 尚未记录在官方[文档](http://cxf.apache.org/docs/wsdl-to-java.html)中。但是当您使用帮助选项 (-h|-help) 调用该工具时，您将看到编码选项：

```
wsdl2java ... -encoding UTF-8 .... 
```

# java - 无法使用 JBoss AS 7.1 实例化 EJB

> ID：12180234
> 
> 赞同：2
> 
> 时间：2012-08-29T14:25:39.820
> 
> 标签：java, ejb, jboss7.x

我定义了一个 EJB，并试图在另一场战争中使用它：

在`ejb-api.jar`：

```
@Remote
public interface Example {
    // ...
} 
```

* * *

在`ejb-impl.war`（使用`ejb-api.jar`）：

```
@Stateless(mappedName = "ExampleEjb")
public class ExampleBean implements Example {
    // ...
} 
```

* * *

在`ejb-user.war`（使用`ejb-api.jar`）：

```
@WebServlet("/ejbuser")
public class UserServlet extends HttpServlet {

    @Override
    public void doGet(...) throws Exception {
        Example example = null;
        try {
            InitialContext context = new InitialContext();
            example = (Example)context.lookup("ExampleEjb");
        } catch (NamingException e) {
            e.printStackTrace();
        }
    }
} 
```

我部署`ejb-impl.war`了`ejb-user.war`一个 JBoss AS 7.1 实例。如果我将所有类放在同一个 war 文件中，则可以找到 EJB。但这样，它不是（我得到一个`NamingException`）。

此外，如果我添加一个`jndi.properties`包含这些内容的文件......

```
java.naming.factory.initial = org.jboss.naming.remote.client.InitialContextFactory
java.naming.provider.url = remote://localhost:4447
jboss.naming.client.ejb.context = true
java.naming.factory.url.pkgs = org.jboss.ejb.client.naming 
```

...然后我收到这种警告：

```
16:55:46,268 WARNING [javax.enterprise.resource.webcontainer.jsf.config] (MSC service thread 1-7) javax.naming.NamingException: JBAS011843: Failed instantiate InitialContextFactory org.jnp.interfaces.NamingContextFactory from classloader ModuleClassLoader for Module "deployment.example.war:main" from Service Module Loader: javax.naming.NamingException: JBAS011843: Failed instantiate InitialContextFactory org.jnp.interfaces.NamingContextFactory from classloader ModuleClassLoader for Module "deployment.example.war:main" from Service Module Loader
    at org.jboss.as.naming.InitialContextFactoryBuilder.createInitialContextFactory(InitialContextFactoryBuilder.java:64)
    at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:681) [rt.jar:1.7.0_03]
    at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:307) [rt.jar:1.7.0_03]
    at javax.naming.InitialContext.init(InitialContext.java:242) [rt.jar:1.7.0_03]
    at javax.naming.InitialContext.<init>(InitialContext.java:192) [rt.jar:1.7.0_03]
    at com.sun.faces.config.WebConfiguration.processJndiEntries(WebConfiguration.java:687) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.config.WebConfiguration.<init>(WebConfiguration.java:134) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.config.WebConfiguration.getInstance(WebConfiguration.java:194) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:163) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_03]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_03]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_03] 
```

你知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T14:57:05.277

根据[@Stateless 的文档](http://docs.oracle.com/javaee/6/api/javax/ejb/Stateless.html)，“应用程序服务器不需要支持任何特定形式或类型的映射名称，也不需要使用映射名称的能力。” 因此，使用它来更改 bean 的映射名称恕我直言，这不是一个好主意。

咱们试试吧

1.  从 @Stateless 中删除 mappedName
2.  **编辑：**在 java:global 命名空间中使用 ExampleBean 的名称： `java:global[/application name]/module name/enterprise bean name[/interface name]`

[进一步阅读可移植 JNDI 语法](http://docs.oracle.com/javaee/6/tutorial/doc/gipjf.html#girgn)

**编辑：** 您将两个模块部署到同一个应用服务器，不是吗？然后，你不需要 jndi.properties 文件，我们试试不使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T05:06:15.407

将“依赖项：org.jboss.remote-naming”添加到 .WAR 文件的 META-INF/manifest.mf 中。这将加载 org.jboss.remote-naming 模块并消除“Failed instantiate InitialContextFactory”异常。详情[在这里](https://docs.jboss.org/author/display/AS71/Class+Loading+in+AS7)

[您可以在这里看到](https://stackoverflow.com/a/12684762/1713511)相同问题的答案

# c# - Windows 8 Metro 应用程序 - 渲染 PNG

> ID：12180235
> 
> 赞同：3
> 
> 时间：2012-08-29T14:25:48.317
> 
> 标签：c#, windows-8, windows-runtime, windows-store-apps, winrt-xaml

我需要在 Windows 8 应用程序中呈现一些自定义 PNG。

基本上，我需要通过将我的应用程序中制作的一些绘图放在动态磁贴的图像上来创建自定义动态磁贴，而做到这一点的唯一方法是将 PNG 渲染到磁盘，[请参见此处](https://stackoverflow.com/questions/12149591/windows-8-custom-live-tile)。

我应该使用什么库来做到这一点？我的第一个想法是使用 Xaml`UserControl`和`RenderTargetBitmap`，但它在 Metro 应用程序中不可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:08:42.877

目前唯一的选择是使用 DirectX（或 SharpDX）来创建您的图像。您可能必须使用低级 DirectX API 重新创建绘图。 [如果您的绘图很简单， WritableBitmapEx](http://writeablebitmapex.codeplex.com/)也可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T22:11:38.647

WinRT XAML Toolkit 有一些您也可以使用的 WriteableBitmap 扩展方法。您可能可以使用[WriteableBitmapLoadExtensions](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/17730#327689)进行加载，并使用[WriteableBitmapSaveExtensions](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/17730#327690)进行保存。它具有相当有限的 blitting 功能，因为它已经被[WriteableBitmapEx](http://writeablebitmapex.codeplex.com/)公开并且无论如何都易于编写。[WriteableBitmapBlitBlockExtensions](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/17730#327681)只是一种从相同宽度的位图中对全宽像素块进行 blit 的方法。

Edit*`RenderTargetBitmap`现在在 Windows 8.1 中可用。虽然它不支持某些元素（我认为它不渲染相机预览、媒体元素，也许还有`WebViews`）。

# wix - 使用刻录复制文件

> ID：12180236
> 
> 赞同：1
> 
> 时间：2012-08-29T14:25:49.750
> 
> 标签：wix, burn

我正在使用 WiX Burn 来制作我的安装程序，我捆绑了一个 exe 和一个 msi。并且 exe 在安装时需要一个属性文件。有没有办法使用刻录复制文件，我尝试了 Payload，但它不起作用。我可以通过复制文件的任何 Bundle 变量知道位置吗？

谢谢拉维小号

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:56:30.703

确保将属性文件指定为 exe 而不是引导程序的有效负载。例如，在您的捆绑包中，您的链可能如下所示：

```
<Chain>
 <MsiPackage SourceFile="MyInstaller.msi" Id="MyInstaller" Cache="yes"/>
 <ExePackage SourceFile="MyExe.exe" Id="MyExe" Cache="yes">
   <Payload SourceFile="OtherFile.properties" Id="Properties"/>
 </ExePackage>
</Chain> 
```

此外，作为健全性检查，您使用的是哪个版本的 WiX？如果您使用的是旧版本（例如 RC0），您可以尝试更新到最新的每周版本。

更新：在 WiX 3.6 中，您似乎无法获取有效负载文件的绝对路径。目前有两个关于推迟到 WiX 3.7 的问题的错误/功能请求：

*   [将刻录变量添加到缓存路径 - ID：3557446](http://sourceforge.net/tracker/?func=detail&aid=3557446&group_id=105970&atid=642714)
*   [将工作文件夹更改为缓存文件夹 - ID：3538846](http://sourceforge.net/tracker/?func=detail&aid=3538846&group_id=105970&atid=642714)

一种解决方法是使用 burn 编写您自己的引导程序应用程序，然后以编程方式确定工作目录并设置适当的参数，但这对于这一问题将是很多工作。

# linq - Linq GroupBy 更改列表

> ID：12180237
> 
> 赞同：1
> 
> 时间：2012-08-29T14:25:56.750
> 
> 标签：linq, list, group-by, sql-order-by

我有一个 IList<> 中的项目列表。每个列表项都有一个日期和一些其他字段。我需要按日期对列表进行排序，然后将列表更改为仅显示第一项的日期，如果日期重复，则有效地将其他项目的日期字段设置为空。

例子：

```
12/01/2012 500
12/01/2012 700
15/02/2012 900
15/02/2012 1100
27/05/2012 2000 
```

期望的结果：

```
12/01/2012 500
null       700
15/02/2012 900
null       1100
27/05/2012 2000 
```

linq group by 和 order by 这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:38:28.943

LINQ 运算符不应该更改基础数据。`foreach`如果要修改数据，最好使用常规。

这应该**可以**工作：

```
var groups = items.GroupBy(x => x.Date).ToArray();
foreach (var group in groups)
{
    foreach (var item in group.Skip(1)) item.Date = null;
} 
```

我会避免使用这种结构，因为您必须仔细检查以`GroupBy`保持秩序。相反，我会使用这样的东西：

```
var sortedItems = items.OrderBy(x => x.Date);
var lastVisitedDate = (DateTime?) null;
foreach (var item in sortedItems)
    if (Equals(item.Date, lastVisitedDate)) item.Date = null;
    else lastVisitedDate = item.Date; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:38:32.360

这应该有效：

```
var list = new List<DateItem>(); 
// Initialization ...
var dups = list.Select((Item,Index) => new{ Item,Index })
               .GroupBy(x => x.Item.Date)
               .Where(g => g.Count() > 1);
foreach(var dup in dups)
{
    foreach (var nullable in dup.OrderBy(x => x.Item.Date).Skip(1))
    {
        list[nullable.Index].Date = null; 
    }
} 
```

假设您的班级看起来与此类似：

```
class DateItem {
    public DateTime? Date;
    public int OtherField;
} 
```

**编辑**：这是一个工作演示：http: [//ideone.com/cVL4G](http://ideone.com/cVL4G)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T15:59:29.467

一种方法是使用 LINQ 获取所有关注者，然后在循环中将其日期设置为 null：

```
// Use ToList() to make sortedItems non-lazy so it won't get ordered each time it's called.
var sortedItems = items.OrderBy(x => x.Date).ToList();
var followers = sortedItems.GroupBy(item => item.Date)
                           .SelectMany(group => group.Skip(1));  
foreach (var follower in followers)
{
    follower.Date = null;
}
// Now you can use sortedItems. 
```

或者，如果您更喜欢查询语法：

```
var followers = from item in sortedItems
                group item by item.Date into grp
                from follower in grp.Skip(1)
                select follower; 
```

# django - Django ORM“获取”到 SQL 的翻译

> ID：12180238
> 
> 赞同：2
> 
> 时间：2012-08-29T14:26:04.873
> 
> 标签：django, django-models

对于 Django 中的 Queryset，我们可以调用它的方法 .query 来获取原始 sql。

例如，

```
queryset = AModel.objects.all()
print queryset.query 
```

输出可能是：SELECT "id", ... FROM "amodel"

但是对于通过“get”检索对象，比如说，

```
item = AModel.objects.get(id = 100) 
```

如何获得等效的原始 sql？注意：该项目可能是无。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T14:47:00.883

`item = AModel.objects.get(id = 100)`等于_

```
items = AModel.objects.filter(id = 100)
if len(items) == 1:
    return items[0]
else:
    raise exception 
```

因此执行的查询等于`AModel.objects.filter(id = 100)`

此外，您可以查看最新的项目`connection.queries`

```
from django.db import connection # use connections for non-default dbs
print connection.queries[-1] 
```

而且，正如 FoxMaSk 所说，`django-debug-toolbar`在您的浏览器中安装并享受它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T14:49:31.647

这是相同的 SQL，只是`WHERE id=100`在末尾添加了一个子句。

但是，FWIW，如果 a`filter`足够具体到只返回一个结果，它与`get`将产生的 SQL 相同，唯一的区别在于此时的 Python 端，例如

```
AModel.objects.get(id=100) 
```

是相同的：

```
AModel.objects.filter(id=100).get() 
```

因此，您可以简单地查询`AModel.objects.filter(id=100)`然后使用`queryset.query`它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T14:39:02.113

如果只是出于调试目的，您可以使用“django debug bar”，它可以通过以下方式安装

```
pip install django-debug-toolbar 
```

# database - 为什么没有更广泛地使用基于时间戳的并发控制协议？

> ID：12180241
> 
> 赞同：0
> 
> 时间：2012-08-29T14:26:12.753
> 
> 标签：database, database-concurrency, database-theory

作为一个数据库理论概念，自从我第一次了解它们以来，我一直是基于时间戳的并发控制协议的忠实粉丝。我注意到它们似乎没有被太多使用。这是为什么？还是我错了？

编辑：我的意思是带有读写时间戳的时间戳数据项和具有固定时间戳顺序的时间戳事务，类似于此处描述的内容：[http ://en.wikipedia.org/wiki/Timestamp-based_concurrency_control](http://en.wikipedia.org/wiki/Timestamp-based_concurrency_control)

# symfony - Symfony2 - EntityNotFoundException

> ID：12180244
> 
> 赞同：1
> 
> 时间：2012-08-29T14:26:16.930
> 
> 标签：symfony, twig

我有一个通过关联与实体`Stats`相关的实体。`Journey``ManyToOne`

```
id:
    index:
        type: integer

fields:
        idJourney:
        type: string
// data fields...
manyToOne:
    journey:
        targetEntity: Journey
        joinColumn:
            name: idJourney
            referencedColumnName: idJourney 
```

与实体通过两个关联关联：一个与 中的第一个关联`Journey`，一个与最后一个关联。`Station``ManyToOne``Station``Journey`

```
id:
    idjourney:
        type: string
    fields:
        idFirstStation:
            type: string
        idLastStation:
            type: string
    // other info fields
    manyToOne:
        firstStation:
            targetEntity: Station
            joinColumn:
                name: idFirstStation
                referencedColumnName: idStation
        lastStation:
            targetEntity: Station
            joinColumn:
                name: idLastStation
                referencedColumnName: idStation 
```

最后，`Station`实体：

```
id:
    idStation:
        type: string
fields:   
    name:
        type: string
// other station info 
```

我通过一个工作正常的自定义存储库方法检索`Stats`具有所有相关子对象的对象集合。

```
$statCollection = $statsRepository->getStatsByDateAndArea($date, $area);

//This retrieves the expected data
$statCollection[0]->getJourney()->getFirstStation()->getName(); 
```

但是，使用循环遍历集合`foreach`不起作用：

```
foreach($statCollection as $stat) {
    $journey = $stat->getJourney(); // works fine
    $firstStationId = $journey->getFirstStationId(); // works too
    $firstStation = $journey->getFirstStation(); // still works, but returns a Proxies\AcmeAppPathWhateverBundleEntityStationProxy object instead of a AcmeAppPathWhateverBundleEntityStation, but this should be transparent (as per Doctrine documentation)
    $firstStationName = $firstStation->getName(); // throws an EntityNotFoundException
} 
```

知道发生了什么吗？我应该强制 Doctrine 获取所有子实体吗？

**编辑** 错误消息相当简洁：

```
EntityNotFoundException: Entity was not found. 
```

不是很有帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T09:47:23.073

我最终在我的自定义存储库方法中明确查询了完整的子实体集......

我改变了这个查询：

```
 ->select('stats')
    ->leftJoin('stats.journey', 'j')
    ->leftJoin('j.firstStation', 'fs')
    ->leftJoin('j.lastStation', 'ls') 
```

至 ：

```
 ->select('stats, j, fs, ls')
    ->leftJoin('stats.journey', 'j')
    ->leftJoin('j.firstStation', 'fs')
    ->leftJoin('j.lastStation', 'ls') 
```

我猜 Doctrine 对 Proxy 对象的使用并不是那么透明......

# html - 用js创建画布并对齐元素

> ID：12180245
> 
> 赞同：1
> 
> 时间：2012-08-29T14:26:22.383
> 
> 标签：html, canvas, html5-canvas

我在下面有这段代码，可以帮助我将图像与任何设备/屏幕上的中心对齐。

现在我需要帮助来绘制`picture(myImage)`画布而不是`$("body").append(img);`

我怎样才能做到这一点？

```
<script>
        $(document).ready(function() {
            var img=new Image();
            img.src="myImage.jpg"
            img.onload=function() {
            //  console.log("image is loaded, yessss!")
                function my_resize() {
                    var w=img.width;
                    var h=img.height;
                    var ww=$(window).width();
                    var wh=$(window).height();
                    var ox=(ww-w)/2;
                    var oy=(wh-h)/2;
                    console.log("data is "
                        +w+","+
                        +h+","+
                        +ww+","+
                        +wh+","+
                        +ox+","+
                        +oy+","
                    );
                    $(img).offset({left:ox,top:oy,});
                }
                $("body").append(img);
                my_resize();
                $(window).resize(function() {
                    my_resize();
                    });
            }
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:56:39.127

试试这个jsfiddle：

[http://jsfiddle.net/MqkRs/4/](http://jsfiddle.net/MqkRs/4/)

# php - 使用组匹配单词的 PHP 正则表达式 (preg_match)

> ID：12180246
> 
> 赞同：1
> 
> 时间：2012-08-29T14:26:22.540
> 
> 标签：php, regex

我正在尝试使用 preg_match 匹配正则表达式中的 2 个单词。这是我的陈述的简化版本，实际代码如下。当我在表达式中使用 2 个组时，表达式不起作用。请帮忙。

如果 preg_match(string or string) and (string or string) { do this }

```
$subject = 'over £200 and under £300';

$minPrice = 0;
$maxPrice = 10000;

if (preg_match_all( '#£.*?([0-9]+)#i', $subject, $priceMatches)) {
    foreach ($priceMatches as $price) {}
     if (preg_match('/(over|above)(under|below|beneath)/i',$subject)) {
        $minPrice = $price[0];
        $maxPrice = $price[1];
        $priceOrder = "#!No=0&Nf=P_Price|BTWN+".$minPrice."+".$maxPrice."&N=&side=&Ns=P-SYSTEM_Price_Revenue|1&perPage=12";
        echo 'MIN PRICE ' . $minPrice . "\n";
        echo 'MAX PRICE ' . $maxPrice . "\n";

    } else {
   echo "no e found";
    }
} else {
   echo "no e found";
} 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:38:50.250

如果您始终匹配的顺序始终相同，您只需将正则表达式更改为：

```
/(over|above).*(under|below|beneath)/i 
```

这将允许两个词之间的任何内容。以前，您的正则表达式期望单词是背靠背的（事实并非如此）。

# java - 在两个不同的请求周期中访问 MongoDB 游标

> ID：12180247
> 
> 赞同：0
> 
> 时间：2012-08-29T14:26:25.643
> 
> 标签：java, spring, mongodb, spring-mvc, spring-data

我目前正在寻找一种解决方案来保存 mongodb 游标（在 find() 之后）以在两个 http 请求之间访问它。我的环境是 JAVA Spring MVC 和 mongodb (Spring Data)，所以我拥有所有强大的功能。不幸的是，我没有找到任何可以解决我的问题的文档/教程：

客户端在他的第一个请求中请求前 20 个结果，在他的第二个请求中请求接下来的 20 个结果。我不想再次查询 mongo，而是想访问以前生成的游标，因为文档在一段时间内发生了变化，我想获得它们的初始顺序。有什么办法吗？

非常欢迎帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:38:10.260

一些驱动程序支持对称为`getMore`. 这将重用您的游标 ID 来检索更多数据。

除非您严格要求，否则您的光标不会做快照，在插入或删除新文档的情况下会导致奇怪的行为（例如两次查看同一个文档）。要快照您的结果，请尝试将 添加`.snapshot()`到您的查询中，例如：

`var cursor = db.myCollection.find({country:'uk'}).snapshot();`

我从来没有测试过，所以请确认这种方法是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:45:14.137

您还可以尝试遍历`Cursor`并将所有内容添加到`SortedMap`. 然后，您可以`SortedMap`根据需要多次查询。您可以`SortedMap`按自然顺序对其进行排序，也可以使用 a`Comparator`以任何您想要的方式对其进行排序。

# c# - 拆分容器的两个问题

> ID：12180248
> 
> 赞同：0
> 
> 时间：2012-08-29T14:26:32.243
> 
> 标签：c#, .net, winforms, user-interface, split

我正在使用多个拆分容器设计一个 GUI。我有一个控件，它的大小应该从 200 x 200 开始。该控件位于 SplitContainer 的 Panel1 中，它也应该从 200 x 200 开始。我还将 Panel1 的 MinSize 设置为 200，以免变得小于200 像素高。

我的问题在于将 SplitterDistance 设置为 200 像素，因为似乎有一些“障碍”阻止 SplitterDistance 超过随机数量的像素（在本例中为 71）。

因此，SplitterDistance 从 50 开始。我将其设置为 200，但最终以 71 结束。我不知道为什么会这样……有什么建议吗？此外，这个特殊的 SplitContainer 只在运行时获得一个 Panel2，因此为什么目前没有 Panel2 ......

以下是一些相关代码：

```
BetweenPanelContext.BorderStyle = BorderStyle.Fixed3D;
BetweenPanelContext.Panel1.Size = new Size(200,200);
BetweenPanelContext.SplitterDistance = 200;
BetweenPanelContext.Dock = DockStyle.Fill;
BetweenPanelContext.Panel1MinSize = 200;
BetweenPanelContext.Panel1.Controls.Add(context);
.................................................
this.context.Name = "context";
this.context.TabIndex = 0;
this.context.Text = "context";
this.context.Dock = DockStyle.Fill;
this.context.Size = new Size(200, 200); 
```

* * *

我的第二个问题是我的一个面板的开始尺寸小于我为其设置的 Panel1MinSize 属性，但是如果我抓住拆分器，它会跳转到正确的尺寸，而不是让我调整到什么它开始于。为什么是这样？我怎样才能阻止这种情况发生？

# ruby-on-rails - rails Twitter 提到

> ID：12180254
> 
> 赞同：0
> 
> 时间：2012-08-29T14:26:59.687
> 
> 标签：ruby-on-rails, ruby, api, twitter

大家下午，

我正在尝试使用 rails Twitter gem 检索一些 Twitter 提及。多亏了 Ryan Bates，检索最喜欢的推文非常简单；

```
Twitter.favorites("your_twitter_screen_name", count: 5).each do |tweet| etc... 
```

但是，当尝试对提及执行相同操作时，它似乎在文档中具有与收藏夹相同的选项，它会出错 with；

```
undefined method `each' for "bestluxuryhotel":String 
```

（也在删除每个块之后）

有谁知道如何正确输入提及选项和格式？

在此先感谢，安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:46:06.570

此外，每个块不起作用的原因是因为您返回的是字符串类型而不是哈希或数组。

看看以下内容：[https ://dev.twitter.com/docs/api/1/get/statuses/mentions](https://dev.twitter.com/docs/api/1/get/statuses/mentions)

玩得开心

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:45:17.397

我不确定，但可能是：

```
 -Twitter.favorites("your_twitter_screen_name", count: 5).map do |tweet| etc... 
```

# php - 如果满足条件，则 INSERT INTO

> ID：12180259
> 
> 赞同：1
> 
> 时间：2012-08-29T14:27:08.047
> 
> 标签：php, mysql, sql

仅当数组属于查询结果时，我才需要将数组保存`$solution`到 SQL 表中。如果它不属于它，那么 $i 行必须不保存在 SQL 表中。下面提供的查询似乎不正确。如何实现所描述的任务？这样做的正确方法是什么？`$solution[$i][0]``SELECT num_arr FROM Schedule WHERE num_arr<>''`

```
$query_land = "INSERT INTO `Sequence` (`num_arr`,`start`,`fin`,`way_id`) 
               VALUES ('".$solution[$i][0]."','".$solution[$i][1]."',
                                   '".$solution[$i][2]."','".$solution[$i][3]."') 
               WHERE '".$solution[$i][0]."' IN (SELECT num_arr 
                                                FROM Schedule 
                                                WHERE num_arr<>'')"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T14:34:22.703

该`INSERT`声明有两种变体：

```
INSERT INTO tableX
    (a, b, c, ...)
VALUES
    (1, 2, 3, ...) ; 
```

和

```
INSERT INTO tableX
    (a, b, c, ...)
SELECT
    1, 2, 3
FROM
    ... ;             --- the same or another table or many tables 
```

这`dual`是一个正好有 1 行的系统表。它可以用于各种事情。在这里使用它，因此 a`VALUES (...)`被重写为`SELECT ...`我们没有任何合适的表可以放入`FROM`子句的地方：

```
$query_land = "INSERT INTO `Sequence` (`num_arr`,`start`,`fin`,`way_id`) 
               SELECT '".$solution[$i][0]."','".$solution[$i][1]."',
                      '".$solution[$i][2]."','".$solution[$i][3]."'
               FROM dual 
               WHERE '".$solution[$i][0]."' IN (SELECT num_arr 
                                                FROM Schedule 
                                                WHERE num_arr<>'')"; 
```

# jquery - 减少计数器时，删除 div

> ID：12180263
> 
> 赞同：0
> 
> 时间：2012-08-29T14:27:14.417
> 
> 标签：jquery

我在一个看起来像这样的表格上有计数器：

![在此处输入图像描述](../Images/5b13ce4709ed337d33d8e7cc8967337f.png)

当用户单击加号/减号图标时，计数器会正确递增和递减。我要做的是在用户单击加号时添加更多表单元素，然后如果他们选择减号则将其删除。这是我的html：

```
<div class="label01">Total attendees:</div>
  <div class="field01">
    <input name="qty" type="text" size="4" value="1" readonly="readonly" style="background:#999;"/>
     <img src="/assets/images/minus_icon.png" id="dec">
     <img src="/assets/images/plus_icon.png" id="inc">
     (include yourself in this count)
   </div>
   <div class="additional"></div> 
```

我的jQuery：

```
$(document).ready(function() 
{  
    $(function() {
      $("#inc").click(function() { 
        var num = $(":text[name='qty']").val(function(i, v) { 
                       return Number(v) + 1;
                  }).val();
        $(this).addClass ('c' + num);
        var incrementVar = num;
        $('.additional').append("<div id='a_'" + num + ">Test</div>");
      }); 

      $("#dec").click(function() {      
        $(":text[name='qty']").val(function(i, v) { 
            if(Number(v) > 1){              
                return Number(v) - 1; 
            }
            else{
                return 1;
            }
            $("div").removeClass("a_" + Number(v) - 1);
        });
      });  
    });
}); 
```

上面的代码正确附加了测试 div，但不会删除。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:29:49.543

您正在使用 removeClass()。您应该使用 remove()。

`$("#a_" + Number(v) - 1).remove();`

编辑：查看您的代码，您有无法访问的代码：

```
$("#dec").click(function() {      
    $(":text[name='qty']").val(function(i, v) { 
        if(Number(v) > 1){              
            return Number(v) - 1; 
        }
        else{
            return 1;
        }
            // unreachable
        $("div").removeClass("a_" + Number(v) - 1);
            // should be
            $("#a_" + Number(v) - 1).remove();
    });
  }); 
```

编辑：

我发现你的代码有什么问题。
`$('.additional').append("<div id='a_'" + num + ">Test</div>");`

应该

`$('.additional').append("<div id='a_" + num + "'>Test</div>");`

这是一个有效的 jsfiddle：http: [//jsfiddle.net/TH79T/](http://jsfiddle.net/TH79T/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:33:22.807

尝试：

```
$("#inc").click(function() {
   $("#additional").append("<div></div>");
});

$("#dec").click(function() {
   $("#additional").last().remove();
}); 
```

# sql - SQL：将全文搜索转化为like构造

> ID：12180267
> 
> 赞同：1
> 
> 时间：2012-08-29T14:27:23.487
> 
> 标签：sql, sql-server, tsql, full-text-search

在一般情况下，我有一个使用全文索引执行搜索的存储过程。但是我不能为一个字段建立全文索引，我需要使用LIKE构造。

所以，问题是：参数可能是

> “a*”或“b*”

像`CONTAINS`命令的参数。

Сan任何人都给出了一个很好的解决方案，如何转换这个参数进行`LIKE`构造。

谢谢你。

PS：我用`MSSQL Server`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:43:48.633

根据您想要支持的全文搜索结构，这通常是不可能的。

根据[MSDN](http://msdn.microsoft.com/en-us/library/ms142571.aspx#queries)，SQL Server 上的全文搜索语法支持以下结构：

> 一个或多个特定单词或短语（简单术语）

LIKE '%[,;.-()!? ]学期[，;。-（）！？]%'

> 词以指定文本开头的词或短语（前缀词）

LIKE '%[,;.-()!? ]学期％'

> 特定词的屈折形式（世代词）

不可能

> 与另一个词或词组相近的词或词组（邻近词）

不可能

> 特定词的同义词形式（同义词库）

不可能

> 使用加权值的单词或短语（加权项）

不可能

我标记为“不可能”的那些不能真正翻译成 LIKE 查询，但当然你可以发挥创造力（使用你自己的词干算法来处理屈折形式，或者你自己的同义词词典）来支持至少其中一些.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:46:26.103

最后，您可能需要使用动态 SQL。

给定输入，这是一种获得正确 WHERE 子句的方法：

```
declare @str varchar(255) = '"a*" or "b*"';

with const as (select 'col' as col)
select col+' like '+replace(replace(REPLACE(@str, '"', ''''), '*', '%'), 'or ', 'or '+COL+' like ') as WhereClause
from const 
```

“const”只是一个包含一列的表，用于指定您的列名。它允许在一个地方指定它。

这只是替换以获得 LIKE 的正确语法。当然，要支持来自 CONTAINS 的更多功能，这将更加复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T06:42:58.323

谢谢大家！

不幸的是，表达式解析对于一般情况来说是不够的。

我在 MS SQL SERVER 中使用正则表达式

> [http://anastasiosyal.com/POST/2008/07/05/REGULAR-EXPRESSIONS-IN-MS-SQL-SERVER-USING-CLR.ASPX](http://anastasiosyal.com/POST/2008/07/05/REGULAR-EXPRESSIONS-IN-MS-SQL-SERVER-USING-CLR.ASPX)

# javascript - 我怎样才能轻轻地“破坏” UIWebview？

> ID：12180268
> 
> 赞同：4
> 
> 时间：2012-08-29T14:27:26.117
> 
> 标签：javascript, ios, html, uiwebview

最近，一些开发人员开始创建应用程序，这些应用程序仅通过 UIWebViews 指向国有内容（免费、公共财产）。这通常不会是一个问题，除了这些应用程序都是广告支持的，有些甚至是付费的。从本质上讲，他们是靠国有内容赚钱的。

我的问题是：如何强制网站打开一个新的 Safari 窗口，而不是显示在 UIWebview 中（包含在他们的应用程序品牌中）？我可以使用以下方法检测 UIWebview，但除了简单地隐藏内容之外，我什么也做不了。我希望它提供指向我们内容的链接，然后在 Safari 中打开。

这就是我检测 UIWebview 的方式：

```
var is_uiwebview = /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:34:36.133

不幸的是，对于开发人员来说，将 User-Agent 字符串强制为他们想要的任何东西都是微不足道的，因此您阻止这些开发人员的尝试可能只是暂时的。您不能强制在浏览器中查看您的内容。用户也可以使用 CURL 之类的工具来查看您的内容...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:51:36.553

您可以查看它是 WebView 还是 Mobile Safari，如[本线程](https://stackoverflow.com/questions/2143763/does-uiwebview-send-the-same-user-agent-in-the-request-headers-as-mobile-safari)所示。问题是，您只能通过自定义 URL 方案打开 Safari，但认为只有 http://、https:// 等有效。即使有类似 safari-http:// 之类的东西，具有 UIWebView 的应用程序的程序员也可以捕获该请求并将其重定向回 Web 视图。所以，我很遗憾地说：那是不可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T14:37:58.333

一旦你检测到你在 UIWebview 中，你需要触发一个 window.open() 来把你的内容放在一个新的窗口中。

这谈到了一些让它有点棘手（但并非不可能）的怪癖：[在 UIWebview 中打开弹出链接](https://stackoverflow.com/questions/1245224/opening-popup-links-in-uiwebview-possible)。请注意，那里的问题与您的问题相反，但接受的答案确实显示了如何让 UIWebview 通过 Javascript 弹出一个新窗口。

自从 Web 出现以来，这一直是一个问题。您无法阻止人们抓取您的内容，但您可以使其难以重构。

**编辑添加**

不幸的是，该应用程序*可以*拦截 window.open()：[UIWebView 响应 Javascript 调用](https://stackoverflow.com/questions/6525191/uiwebview-respond-to-javascript-calls)

我想你总是可以放弃并展示一个横幅，上面写着“你用税收支付了这些数据，你不应该再用广告支付它*。*只需打开浏览器并转到......”

# php - 为什么我的脚本只向 MYSQL DB 中的一个收件人发送消息

> ID：12180275
> 
> 赞同：-1
> 
> 时间：2012-08-29T14:27:47.167
> 
> 标签：php, mysql, forms, attachment

所以我有这个代码可以在没有“文件附件”的情况下完美运行，并将输入 html 的消息发送给 MYSQL DB 中的所有收件人，但是当我插入附件代码时，邮件只会发送给一个收件人。请帮帮我:)

```
<html>
<head>
<title>test</title>
</head>
<body>

<?

mysql_connect("localhost", "root", "mypass") or die("Could not connect: " . mysql_error());

mysql_select_db("mydb");

$sql = mysql_query("SELECT * FROM mytable");

while($row = mysql_fetch_array($sql)){

$email = $row["email"];
$strSubject = $_POST["txtSubject"];
$strMessage = nl2br($_POST["txtDescription"]);

//*** Uniqid Session ***//
$strSid = md5(uniqid(time()));

$strHeader = "";
$strHeader .= "From: ".$_POST["txtFormName"]."<".$_POST["txtFormEmail"].">\nReply-To: ".$_POST["txtFormEmail"]."";

$strHeader .= "MIME-Version: 1.0\n";
$strHeader .= "Content-Type: multipart/mixed; boundary=\"".$strSid."\"\n\n";
$strHeader .= "This is a multi-part message in MIME format.\n";

$strHeader .= "--".$strSid."\n";
$strHeader .= "Content-type: text/html; charset=utf-8\n";
$strHeader .= "Content-Transfer-Encoding: 7bit\n\n";
$strHeader .= $strMessage."\n\n";
}
//*** Attachment ***//
if($_FILES["fileAttach"]["name"] != "")
{
    $strFilesName = $_FILES["fileAttach"]["name"];
    $strContent = chunk_split(base64_encode(file_get_contents($_FILES["fileAttach"]["tmp_name"]))); 
    $strHeader .= "--".$strSid."\n";
    $strHeader .= "Content-Type: application/octet-stream; name=\"".$strFilesName."\"\n"; 
    $strHeader .= "Content-Transfer-Encoding: base64\n";
    $strHeader .= "Content-Disposition: attachment; filename=\"".$strFilesName."\"\n\n";
    $strHeader .= $strContent."\n\n";
}

$flgSend = @mail($email,$strSubject,null,$strHeader);  // @ = No Show Error //

if($flgSend)
{
    echo "Task Complete. Your emails are being forwareded to your clients";
}
else
{
    echo "Error!!! Task incomplete. Please contact website maintainer.";
}
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:30:07.033

您的电子邮件发送代码在循环之外

把它移到下面：

```
while($row = mysql_fetch_array($sql)){
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:31:11.067

您没有在 while 循环中发送电子邮件。

```
$strHeader .= $strMessage."\n\n";
} //This is the end of your while loop
//*** Attachment ***//
if($_FILES["fileAttach"]["name"] != "")
{ 
```

所以你的代码应该是这样的：

```
<html>
<head>
<title>test</title>
</head>
<body>

<?

mysql_connect("localhost", "root", "mypass") or die("Could not connect: " . mysql_error());

mysql_select_db("mydb");

$sql = mysql_query("SELECT * FROM mytable");

while($row = mysql_fetch_array($sql)){

$email = $row["email"];
$strSubject = $_POST["txtSubject"];
$strMessage = nl2br($_POST["txtDescription"]);

//*** Uniqid Session ***//
$strSid = md5(uniqid(time()));

$strHeader = "";
$strHeader .= "From: ".$_POST["txtFormName"]."<".$_POST["txtFormEmail"].">\nReply-To: ".$_POST["txtFormEmail"]."";

$strHeader .= "MIME-Version: 1.0\n";
$strHeader .= "Content-Type: multipart/mixed; boundary=\"".$strSid."\"\n\n";
$strHeader .= "This is a multi-part message in MIME format.\n";

$strHeader .= "--".$strSid."\n";
$strHeader .= "Content-type: text/html; charset=utf-8\n";
$strHeader .= "Content-Transfer-Encoding: 7bit\n\n";
$strHeader .= $strMessage."\n\n";
//********************* This is the old end of while loop}
//*** Attachment ***//
if($_FILES["fileAttach"]["name"] != "")
{
    $strFilesName = $_FILES["fileAttach"]["name"];
    $strContent = chunk_split(base64_encode(file_get_contents($_FILES["fileAttach"]["tmp_name"]))); 
    $strHeader .= "--".$strSid."\n";
    $strHeader .= "Content-Type: application/octet-stream; name=\"".$strFilesName."\"\n"; 
    $strHeader .= "Content-Transfer-Encoding: base64\n";
    $strHeader .= "Content-Disposition: attachment; filename=\"".$strFilesName."\"\n\n";
    $strHeader .= $strContent."\n\n";
}

$flgSend = @mail($email,$strSubject,null,$strHeader);  // @ = No Show Error //

if($flgSend)
{
    echo "Task Complete. Your emails are being forwareded to your clients";
}
else
{
    echo "Error!!! Task incomplete. Please contact website maintainer.";
}

} // New end of while loop
?> 
```

# django - 在 django 中实现 http404

> ID：12180281
> 
> 赞同：0
> 
> 时间：2012-08-29T14:28:14.010
> 
> 标签：django, django-views

在 django 中找不到实现页面并查看了文档[404](https://docs.djangoproject.com/en/dev/topics/http/views/#the-http404-exception)

我还没有找到页面未找到错误 ami 在这里做什么

在我的 urls 代码中，我完成了以下操作，

```
 url(r'^$', 'site_config.views.pagenotfound') 
```

从 django.http 导入 Http404

```
 def pagenotfound(request):
   return render_to_response('polls/pagenotfound.html', {}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T14:39:04.203

你在django中处理404和500的方式是：默认情况下，在templates目录下，创建一个404.html

如果您需要自定义处理程序，只需将这些添加到 urls.py

```
handler404 = 'views.page_not_found_custom'    
handler500 = 'views.page_error_found_custom' 
```

以您想要的方式设计 404.html 页面

# javafx-2 - javafx 新“屏幕”在同一选项卡中

> ID：12180284
> 
> 赞同：0
> 
> 时间：2012-08-29T14:28:30.823
> 
> 标签：javafx-2, fxmlloader

我有一段这样的代码：

```
<Tab text="A" fx:controller="myController" xmlns:fx="http://javafx.com/fxml">
  <content>
    <VBox>
      <children>
        <fx:include fx:id="topTab" source="../top-tab.fxml"/>
        <AnchorPane prefHeight="600" VBox.vgrow="ALWAYS">
            <!-- insert code here -->
        </AnchorPane>
        <AnchorPane id="bottom_anchor" prefHeight="250" />
        <fx:include fx:id="bottomTab" source="../bottom-tab.fxml"/>
      </children>
    </VBox>
  </content>
</Tab> 
```

现在，“在此处插入代码”部分包含指向 youtube 视频的链接列表。这个想法是，当用户单击这些链接之一时，在相同的 AnchorPane 中显示视频并且列表消失。就像列表消失时出现的另一个屏幕（如果可能，有一个很好的过渡），所有这些都在这个 AnchorPane 中，因为我需要呆在那里。

我曾考虑过使用 StackPane 并根据需要使事物可见或不可见，但这似乎......很奇怪。

由于我是 JavaFX 的新手，任何解释为 9 岁儿童的答案将不胜感激

谢谢你们 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:48:20.570

我认为最简单的方法是在您已经拥有的 AnchorPane 中添加 2 个 AnchorPane。我们称它们为 pList 和 pContent。然后使用它们的可见属性。

要进行良好的过渡，您可以执行以下操作：

```
FadeTransition showTransition = new FadeTransition(Duration.seconds(.1), pList);
showTransition.setFromValue(0.0f);
showTransition.setToValue(1.0f);
showTransition.play(); 
```

对 pContent 采用另一种方式。

# javascript - 不同版本的 Firefox 上的 Javascript 错误

> ID：12180285
> 
> 赞同：1
> 
> 时间：2012-08-29T14:28:31.887
> 
> 标签：javascript, jquery, firefox

我想知道是否有一些 JavaScript 经验的人有办法解决我的问题！

我正在使用 Firefox 的第 5 版（如果有影响，则使用前动），是的，我知道这在很大程度上已经过时了，但这取决于公司政策！

无论如何，在 Firefox 的第 5 版中，我的函数会触发并正常工作，但是在 v14 和 v15 中，它给了我一个错误，说我正在使用的函数不是函数。有问题的行是以 var $tabs 开头的行。

有任何想法吗？提前致谢

```
$(function() {
    if ($('.ui-tabs-panel').length > 0) {        
        var $tabs = $('#tabs').tabs();

        $(".ui-tabs-panel").each(function(i) {        

            var totalSize = $(".ui-tabs-panel").size() - 1;
            if (i != totalSize) {
                next = i + 2;
                $(this).append("<a href='#' class='next-tab mover' rel='" + next + "'>Next Page &#187;</a>");
                $('.toggle').hide();
            }
            if (i != 0) {
                prev = i;
                $(this).append("<a href='#' class='prev-tab mover' rel='" + prev + "'>&#171; Prev Page</a>");
                $('.toggle').hide();
            }
        });

        $('.next-tab, .prev-tab').click(function() {
            $tabs.tabs('select', $(this).attr("rel"));
            return false;
        });
    }
});​ 
```

# mongodb - 将公里转换为弧度

> ID：12180290
> 
> 赞同：21
> 
> 时间：2012-08-29T14:28:52.743
> 
> 标签：mongodb, radians

我需要将公里转换为弧度。这是正确的公式吗？我需要 MongoDB 中近球的弧度。

如果我需要将 5 公里转换为弧度，我会这样做：

```
5/6371 
```

我得到了这个结果（看起来是否正确）：

```
0.000784806153 
```

**更新**

这不是数学问题，我真的需要知道我是否在从公里到弧度进行正确的计算，以便能够使用 MongoDB 进行地理空间查询。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2018-03-10T18:54:08.977

# 公里到弧度或距离和弧度的转换

我到了这里，很困惑，然后我看了一些可汗学院的视频，那时它更有意义，然后我能够实际查看其他来源的方程式来进一步教育自己。

这是我的思路。

1.  我看到一个关于弧度的图表，我首先认为来自地理位置点的半径**是错误的**。

2.  相反，想象地球被完美地切成两半，然后只关注其中的一半。

[![在此处输入图像描述](../Images/9a566b42e94245462a543d6810af9750.png)](https://i.stack.imgur.com/067YE.jpg)

3.  现在把那一半面向你，看看数学图。

[![在此处输入图像描述](../Images/9ebf87c18149b23f8d3e75e41f702b32.png)](https://i.stack.imgur.com/aPAsV.png)

4.  将数学图想象为从地球中心根据弧长测量地球边缘，毕竟地球是弯曲的，所以任何测量结果都会在地球表面弯曲。
5.  弧度就像圆中的度数，弧长实际上是数学图中 A 和 B 之间的距离。
6.  对你来说，鸟瞰图上它是一条直线，但实际上它只是沿地球边缘的 3d 空间中的一条曲线。
7.  尤里卡！一个灯泡在我脑海里闪过。

`distance = earth radius * radians`

因此，使用一些非常简单的代数...

`radians = distance / earth radius`

**公里** `radians = distance in km / 6371`

**米** `radians = distance in mi / 3959`

有时候想一想很有趣。

仔细检查... [https://www.translatorscafe.com/unit-converter/en/length/7-89/kilometer-Earth%E2%80%99s%20equatorial%20radius/](https://www.translatorscafe.com/unit-converter/en/length/7-89/kilometer-Earth%E2%80%99s%20equatorial%20radius/)

## 现在关于 Mongo v3.2 特别在 node.js 中使用 mongoose

尽管我尽了最大的努力，但 mongo 的行为并没有像记录的对 2d 索引的 $geoNear 查询那样正确。**从来没有工作过**

```
 let aggregate = [
    {
      $geoNear: {
        near: { type: 'Point', coordinates: lonLatArray },
        spherical: false,
        distanceField: 'dist.calculated',
        includeLocs: 'dist.location',
        maxDistance: distanceInMeters / (6371 * 1000),
        query: {
          mode: 'nearme',
          fcmToken: { $exists: true }
        }
      }
    },
    { $skip: skip },
    { $limit: LIMIT }
  ]; 
```

但是，当我更改为 2dsphere 索引时，它工作得很好。

```
 let aggregate = [
    {
      $geoNear: {
        near: { type: 'Point', coordinates: lonLatArray },
        spherical: true,
        distanceField: 'dist.calculated',
        includeLocs: 'dist.location',
        maxDistance: distanceInMeters,
        query: {
          mode: 'nearme',
          fcmToken: { $exists: true }
        }
      }
    },
    { $skip: skip },
    { $limit: LIMIT }
  ]; 
```

但教育似乎从来都不是浪费时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-25T11:59:32.143

你是对的。在球面几何中，您将距离除以球体的半径。请注意，您应该保留这些单位。因此，如果您以千米为单位计算球体半径，那么您应该使用以千米为单位的距离。如果您使用英里，那么您应该使用以英里为单位的地球半径（大约：3,963.2）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-03-08T09:23:17.747

地球的赤道半径约为**3,963.2 英里**或**6,378.1 公里**。

**注：1 公里 = 0.621371 英里**

下面是一些简单的计算公式：

> **100 公里为英里：** (100 * 0.621371)
> 
> **100 公里到辐射 :** 100 / **6378.1**
> 
> **100 英里到辐射 :** 100 / **3963.2**

因此，如果您有**公里**数据，那么您必须使用**(100 / 6378.1)**，而对于**英里**数据，您可以使用 **(100 / 3963.2)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-03T18:14:14.547

**转换**：

**与弧度**的距离：用与距离测量相同的单位将距离除以球体（例如地球）的半径。
**弧度到距离**：将弧度测量值乘以要转换为距离的单位系统中的球体（例如地球）的半径。

**例如**：如果您想将 5 英里转换为弧度，那么我们需要将距离（5 英里）除以球体的半径（也以英里为单位），即 3959。那么 5/3959 就是 0.0012629451...

谢谢

# javascript - 在 url 参数 javascript 中存储键值对列表。

> ID：12180291
> 
> 赞同：4
> 
> 时间：2012-08-29T14:28:59.840
> 
> 标签：javascript, jquery, url, url-parameters

假设`www.mydomain.com?param1=example`作为一个例子。

存储作为键值对列表的第二个参数的最佳方法是什么？在我使用的那一刻`&param2=key|value,key|value`。我使用垂直线将键与值分开，并用逗号配对，等号之后的所有内容都使用`encodeURIComponent()`. 这工作正常。

但是，用户可以控制该值……作为明智的人，我们都知道用户可能会做的第一件事就是将竖线或逗号作为破坏我的参数解析器的值之一。有一个更好的方法吗？我见过 PHP 用户谈论在 url 中存储关联的数组，但我正在寻找一个*纯 javascript 解决方案*。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T14:44:48.383

PHP（和其他服务器端语言）支持在查询字符串中传递数组。

```
www.mydomain.com?param1=example&param2[key1]=value1&param2[key2]=value2 
```

PHP 会这样解析 GET 字符串：

```
array(2) {
  ["param1"]=>
  string(7) "example"
  ["param2"]=>
  array(2) {
    ["key1"]=>
    string(6) "value1"
    ["key2"]=>
    string(6) "value2"
  }
} 
```

如果您不传递键，它将成为一个数字数组：

```
www.mydomain.com?param1=example&param2[]=value1&param2[]=value2 
```

将被解析为：

```
array(2) {
  ["param1"]=>
  string(7) "example"
  ["param2"]=>
  array(2) {
    [0]=>
    string(6) "value1"
    [1]=>
    string(6) "value2"
  }
} 
```

**更新**：您还可以在 JavaScript 中解析查询字符串。

这是我制作的一个简单的 jQuery 插件：

```
$.parseQuery = function(str) {
    var ret = {};
    $.each(str.split("&"), function() {
        var data = this.split('='),
            name = decodeURIComponent(data.shift()),
            val = decodeURIComponent(data.join("=")).replace('+', ' '),
            nameVal = name.match(/(.*)\[(.*)\]/);

        if (nameVal === null) {
            ret[name] = val;
        }
        else {
            name = nameVal[1];
            nameVal = nameVal[2];
            if (!ret[name]) {
                ret[name] = nameVal ? {} : [];
            }
            if ($.isPlainObject(ret[name])) {
                ret[name][nameVal] = val;
            }
            else if($.isArray(ret[name])){
                ret[name].push(val);
            }
        }
    });
    return ret;
}; 
```

然后你可以这样做：`$.parseQuery('param1=example&param2[]=value1&param2[]=value2');`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:30:54.577

一种可能的解决方案是在将用户输入中的管道和逗号发布到您的 url 之前对其进行转义。

这意味着清理用户输入值并用不会破坏您的代码或完全剥离它们的东西替换`|`和。`,`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T14:52:56.430

为了防止随意篡改，您可以添加校验和并对您的值进行 base-64 编码，然后 encodeURIComponent() 结果字符串。（请参阅[如何使用 Javascript 编码为 Base64？](https://stackoverflow.com/questions/246801/how-can-you-encode-to-base64-using-javascript)和[A JavaScript CRC32](http://noteslog.com/post/crc32-for-javascript/)。）

当然，这不会阻止那些真正下定决心的人弄乱你的价值观，但它会减慢那些喜欢玩弄 URL 的人的速度。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-29T14:39:33.350

当我想到序列化键值对列表时，我立即想到使用查询字符串。

对于基础知识（用于显示反序列化的 JSON）：

```
foo=bar&foo=baz&fizz=buzz&alpha&beta= 
```

本质上是：

```
{
    foo: [
        'bar',
        'baz'
    ],
    fizz: 'buzz',
    alpha: null,
    beta: ''
} 
```

但是必须转义特殊字符：

```
foo=bar%26baz 
```

本质上是：

```
{
    foo: 'bar&baz'
} 
```

这意味着您可以将查询字符串作为另一个查询字符串中的值传递：

```
foo=bar%3Dbaz%26fizz%3Dbuzz 
```

本质上是：

```
{
    foo: 'bar=baz&fizz=buzz'
} 
```

并且`foo`可以解析产生：

```
{
    bar: baz,
    fizz: buzz
} 
```

* * *

话虽如此，编码/解码时很容易出错，一旦开始双编码和双解码，你肯定会遇到问题。如果可以，请使用单个查询字符串来包含所有必要的数据，并且不要在查询字符串中嵌入查询字符串。

# timezone - Event_New API 时区 - 它是否接受 Olson tz 值？

> ID：12180293
> 
> 赞同：1
> 
> 时间：2012-08-29T14:29:02.137
> 
> 标签：timezone, eventbrite

有谁知道这个 API 是否会在时区字段中接受诸如“America/Los_Angeles”之类的 Olson tz 标签？

我正在使用这个 API：http: [//developer.eventbrite.com/doc/events/event_new/](http://developer.eventbrite.com/doc/events/event_new/)

它在哪里说时区：

```
The event time zone in relation to GMT (e.g., “GMT+01″, “GMT+02″, “GMT-01″). 
```

我从其他社区讨论中知道，这也将接受诸如“美国/太平洋”之类的价值观。

我还查看了手动事件输入表单中的选择下拉菜单，这些值似乎是 Olson tz 标签。我只是想知道是否有人可以证实这一点。一旦我通过 API 获得事件发布后，我会自己确认，但我希望通过提前知道来节省时间。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:01:39.447

是的，输入时允许使用 Olson tz 标签，现在是该字段的默认输出格式。

之前的时区输入值（'GMT+8'、'US/Pacific'、'PT' 等）仍然允许，现在在输入时自动重新映射到与 Olson 兼容的等效值（'America/Los Angeles'） .

# php - 字段值变化系统时间

> ID：12180295
> 
> 赞同：0
> 
> 时间：2012-08-29T14:29:10.663
> 
> 标签：php

您好想知道如果满足系统时间的日期，我应该如何更改某个字段的值。我正在考虑这一点。任何想法/帮助表示赞赏。

```
 if('y','4','d'){ field='changevalue' } 
```

编辑：字段是状态：值为 ENROLL 和 UNENROLLED，我的想法是一旦系统时间是 4 月，状态的值应该变为未注册。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:23:13.873

“我的想法是一旦系统时间到了4月status的值就应该变成unenrolled。”

```
$month = date("n");
if ($month == 4) {
  // It is April
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:39:01.930

```
<input type="text" name="test" value="<? if(/* your condition */){ echo "changevalue";} ?>" > 
```

没有测试它，但我认为这应该工作。

# javascript - Modernizr toString

> ID：12180299
> 
> 赞同：4
> 
> 时间：2012-08-29T14:29:22.613
> 
> 标签：javascript, modernizr

为什么[Modernizr](https://github.com/Modernizr/Modernizr/blob/v2.6.1/modernizr.js#L54)会执行以下操作：

```
toString = {}.toString, 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T14:32:49.520

它正在获取该方法的本地副本，`Object.prototype.toString`这将允许它在脚本中进行小的速度改进。这也允许它测试该`toString`方法是否存在。

关于评论：

每个名称解析都有一个成本，在查找时间（局部变量、全局变量、原型链接）和创建（闭包范围变量）中，因此成像以下代码：

```
var values = // Create some object here.

for (var i = 0; i < count; i++) {
  console.log(values[i].toString());
} 
```

对于外观的每次迭代，我们都必须解析`values`变量，并遍历原型链以识别成员`toString`，然后执行它。

以上面的示例为例，我们可以执行以下操作：

```
var toString = {}.toString,
    values = // Create some object here.

for (var i = 0; i < count; i++) {
  console.log(toString.call(values[i]));
} 
```

甚至更进一步：

```
var toString = {}.toString,
    log = console.log,
    values = // Create some object here.

for (var i = 0; i < count; i++) {
  log.call(console, toString.call(values[i]));
} 
```

轻量级应用程序并不会真正从中受益太多，但更大的框架，如 jQuery 等，可以显着提高脚本性能。我相信 IE 就是这样一种浏览器，这些小改进可以提供很大帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:32:34.083

它检查在给定环境下是否存在对象上默认定义的 toString 属性。它不会在 new Object() 上执行此操作，因为 Object 本身可能未在环境中定义。

# python - 解码文件输入

> ID：12180308
> 
> 赞同：0
> 
> 时间：2012-08-29T14:29:51.897
> 
> 标签：python, encoding

我有一个包含以下内容的纯文本文件：

```
Test: \u0410\u0412\u0422\u041e 
```

我尝试在 python 中读取该文件并使用 unicode 打印字符，如下所示：

```
import codecs
f = codecs.open('b.txt', encoding='utf-8')
for line in f:
    print line 
```

输出：

```
Test: \u0410\u0412\u0422\u041e 
```

我正在写这篇文章：

```
Test: ABTO 
```

“测试”后面的西里尔单词表示停止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:31:35.797

你有一个带有 unicode 转义序列的 ascii 文件；的形式`\u0410...`，我们必须将其转换为形式`\\u0410....`，以便我们可以应用解码功能如下。

```
f = open('b','r')
for line in f:
    line.replace('\u','\\u')
    print line.decode('unicode-escape') 
```

# javascript - 通过javascript在html标签内添加一个额外的属性

> ID：12180309
> 
> 赞同：0
> 
> 时间：2012-08-29T14:29:52.197
> 
> 标签：javascript, html

假设我们有一组 html 标签，比如

```
<div id="slide1" class="slide"></div>
<div id="slide2" class="slide"></div>
<div id="slide3" class="slide"></div> 
```

我正在尝试在 div 标签中添加一个额外的属性，例如从 每个标签`key='post'`的数组中分别添加一个属性。`[post, get, search]`是否可以使用javascript来做到这一点？

我也想知道如果输入是散列而不是像数组这样的

```
 {"post" : ["0","1"], "get": ["0","2"], "search": ["2","1"]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:35:11.450

```
var attrs = ['post', 'get', 'search'];
for (var i = 0, n = attrs.length; i < n; ++i) {
    var el = document.getElementById('slide' + (i + 1));
    el.setAttribute('key', attrs[i]);
} 
```

或者，如果您使用的是 jQuery（并假设只有这三个元素具有`slide`该类）：

```
var attrs = ['post', 'get', 'search'];
$('.slide').attr('key', function(i) {
    return attrs[i];
}); 
```

问题的更新部分（使用对象“哈希”而不是数组）不起作用，因为对象没有定义的顺序。您*可以获得*标签，但它们不会以确定的顺序出现：。

```
var myobj = {"post" : ["0","1"], "get": ["0","2"], "search": ["2","1"]};
var attrs = Object.keys(myobj);
... // as above 
```

[有关 的文档`Object.keys`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)，请参阅 MDN 站点，包括适用于旧浏览器的 shim。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:32:21.403

是的，这是可能的，只需像这样使用 element.setAttribute() ：

```
var element = document.getElementById("slide1");
element.setAttribute('key','post'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T14:34:19.810

设置属性是您正在寻找的：

[https://developer.mozilla.org/en-US/docs/DOM/element.setAttribute](https://developer.mozilla.org/en-US/docs/DOM/element.setAttribute)

```
var d = document.getElementById("slide1"); 
d.setAttribute("key", "post"); 
```

# mule - Mule ESB 3 转换器无法转换为 MessageProcessor

> ID：12180315
> 
> 赞同：1
> 
> 时间：2012-08-29T14:30:15.083
> 
> 标签：mule

我正在尝试按照文档中的转换器示例将字符串输入转换为 URL 列表，但它会引发错误。

示例在这里： http: [//www.mulesoft.org/documentation/display/MULE3USER/Transformer+Annotation#TransformerAnnotation-WorkingwithCollections](http://www.mulesoft.org/documentation/display/MULE3USER/Transformer+Annotation#TransformerAnnotation-WorkingwithCollections)

我的变压器代码是从他们那里复制粘贴的。

当我第一次这样做时，我通过放入我的配置 xml 来设置转换器：

```
<custom-transformer class="com.test.transformer.StringToListTransformer" doc:name="StringToUrlList"/> 
```

注意到“注册”变压器的要求，我后来在文件的开头添加了（在开始标记之后）：

```
<spring:bean id="stringToListTransformer" class="com.test.transformer.StringToListTransformer"/> 
```

但是，当我运行该应用程序时，我收到以下错误：

```
Exception in thread "main" org.mule.module.launcher.DeploymentInitException: IllegalStateException: Cannot convert value of type [com.test.transformer.StringToListTransformer] to required type [org.mule.api.processor.MessageProcessor] for property 'messageProcessors[3]': no matching editors or conversion strategy found 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T15:46:05.970

您不能使用带有`@Transformer`as注释的类，`custom-transformer`因为它不是真正的`org.mule.api.processor.MessageProcessor`。只有真正的消息处理器可以直接在 XML 配置中使用并显式调用。

正如[文档`@Transformer`](https://docs.mulesoft.com/mule-user-guide/v/3.8/transformer-annotation)所说：

> 在 Mule 3.x 中没有机制来实际调用从带注释的方法构造的转换器。

如果你想让你的变压器在一个流程中启动，你需要使用：

```
<auto-transformer returnClass="java.util.List.class"/> 
```

假设它返回一个列表并且没有其他合适的具有更高优先级的注册转换器。

否则，通过扩展创建一个真正的转换器，`org.mule.transformer.AbstractMessageTransformer`然后将其与`custom-transformer`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-12T21:15:42.393

请使用 Java Component 而不是 Java Transformer..

# layout - Yii：（嵌套）子模块的布局

> ID：12180317
> 
> 赞同：1
> 
> 时间：2012-08-29T14:30:18.250
> 
> 标签：layout, module, yii

我在 Yii 中设置了一个嵌套模块结构，由于某种原因，子模块似乎根本没有使用任何布局。

这是我的路径heirachy。

```
app
    protected
        modules
            parent
                views
                    layouts
                        column1.php
                        column2.php
                        main.php
                modules
                    child
```

我在配置文件中添加了模块如下

```
'modules'=>array(
    'parent'=>array(
        'modules'=>array(
            'child',
        ),
    ),
),
```

两个模块都起作用，但在子模块中，我得到的只是解释默认/索引控制器的消息，可以在以下路径中自定义。没有显示布局内容。

根据文档，我希望子模块从父模块继承布局。

我确实使用 gii 生成了子模块（它不会创建子模块），所以我将它创建为一个典型的模块，在我的父级中添加了一个模块文件夹，并将结果作为子级复制到我的父模块中。

任何想法在哪里看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T22:54:32.723

事实证明，问题在于 Yii 中的视图解析方案。我的父模块将默认布局设置为“column1”，它由我的子模块继承。在“column1”布局中，“主”布局使用以下代码呈现。

```
$this->beginContent('/layouts/main');
```

在 Yii 的视图解析方案中，它映射到当前模块的 layouts 文件夹。对于我的父模块中的视图，它映射到父视图文件夹中的主布局并且工作得很好。

`/protected/modules/parent/views/layouts/main.php`

对于我的子模块中的视图，这会映射到子视图文件夹中的主布局，该文件夹不存在，并且解析失败。

`/protected/modules/parent/modules/child/views/layouts/main.php`

Yii 论坛上提供的解决[方法](http://www.yiiframework.com/forum/index.php/topic/29776-layout-problems-with-nested-modules/)是修改父模块中的“column1”和“column2”布局以使用半*固定*路径。

```
$this->beginContent('//../modules/parent/views/layouts/main')
```

# salesforce - 客户布局页面上的自定义字段

> ID：12180323
> 
> 赞同：0
> 
> 时间：2012-08-29T14:30:37.043
> 
> 标签：salesforce

我在 Salesforce 的客户和联系人上添加了一些自定义字段。当我查看个人帐户/联系人时，我可以看到这些字段，但安装在其他帐户中时。这些字段不会出现在客户/联系人页面上（尽管它们已创建）。如何使它们在其他 Salesforce 帐户上可见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:45:18.023

很可能您有多个页面布局与不同的客户/联系人记录类型相关联。

添加字段时，它们仅被添加到某些客户/联系人页面布局中。

那些未显示字段的客户/联系人将具有与显示字段不同的记录类型。

当您使用托管包将自定义字段部署到另一个 Salesforce 组织时，它们不会自动添加到他们拥有的任何现有页面布局中。

它们可以在安装软件包后通过以下任一方式手动添加：

*   查看具有所需记录类型和页面布局的客户/联系人记录。然后使用编辑布局链接。

![Salesforce 编辑布局链接](../Images/1573e8ea0adde4df17b0754734b9002c.png)

*   或设置 > 应用程序设置 > 自定义 > 帐户 > 页面布局 > 操作：编辑

# php - PHP 5.3 或更低版本中的数组不区分大小写键排序

> ID：12180324
> 
> 赞同：16
> 
> 时间：2012-08-29T14:30:36.880
> 
> 标签：php, arrays, sorting

PHP 5.4 引入了有用的 SORT_FLAG_CASE 以使任何其他搜索不区分大小写。不幸的是，这在 PHP 5.3 或更低版本中不可用，所以我想知道以下数组如何：

```
array('a'=>2,'b'=>4,'A'=>1,'B'=>3); 
```

可以分类为：

```
array('A'=>1,'a'=>2,'B'=>3,'b'=>4); 
```

正如通常的`ksort()`功能将其排序为：

```
array('A'=>1,'B'=>3,'a'=>2,'b'=>4); 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-29T14:30:36.880

对 PHP 函数参考页面之一的评论将我指向该`uksort()`函数；这（以及`uasort()`按值而不是键排序的功能）允许用户编写用于快速排序的比较算法。

将此与非常简单的`strcasecmp()`函数（比较两个字符串并返回 <0 表示 a>b 和 >0 表示 a>b）相结合，可以得到：

```
uksort($array, 'strcasecmp'); 
```

轻松达到以下效果：

```
ksort($array,SORT_STRING | SORT_FLAG_CASE); 
```

在 PHP 5.3 或更低版本中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-01T14:17:05.410

这就是我在 PHP 7 中对 utf8 字符串数组进行排序（不区分大小写）的方式：

```
uksort($myarray, function ($a, $b) {
  $a = mb_strtolower($a);
  $b = mb_strtolower($b);
  return strcmp($a, $b);
}); 
```

对于 PHP 5.3，您需要创建自己的排序函数：

```
function mySort1($a, $b) {
  $a = mb_strtolower($a);
  $b = mb_strtolower($b);
  return strcmp($a, $b);
}
uksort($result['rows'], 'mySort1'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-22T14:31:34.183

`SORT_NATURAL`我建议，当数组键包含数字或为数字时，使用标志来防止不自然的排序：

```
ksort($elements, SORT_NATURAL | SORT_FLAG_CASE); 
```

标准排序：

```
Array
(
   img1.png => some_data_1
   img10.png => some_data_10
   img12.png => some_data_12
   img2.png => some_data_2
) 
```

自然顺序排序：

```
Array
(
    img1.png => some_data_1
    img2.png => some_data_2
    img10.png => some_data_10
    img12.png => some_data_12
) 
```

# mysql - 左连接选择后查询结果头

> ID：12180326
> 
> 赞同：0
> 
> 时间：2012-08-29T14:30:42.520
> 
> 标签：mysql, header, left-join

我在构建一些多维查询时遇到了一些困难。

我的问题是，例如这个查询：

```
SELECT 
    persons.name, 
    contacts.email 
FROM 
    persons
LEFT JOIN 
    contacts ON persons.person_ID = contacts.person_ID
LIMIT 0,10; 
```

返回 2 列，其中 1 列的名称为：“name”，另一列的名称为“email”。

但我希望它返回标题的方式是这样的：

```
'persons.name' 
```

和

```
'contacts.email' 
```

（我不想创建视图，也不想使用别名或子查询）

甚至可能吗？如果是怎么办？

预先感谢您的帮助。

要提供更多详细信息：

我将查询数据库、主表和列存储在表中。然后将这些列构建到一个数组中，并基于该数组构建一个查询

存在列是子查询的情况，有时它们只是一个表格单元格，有时它们是2列或更多列的值

我的问题是动态构建查询后，我必须显示它，但是如果包含标题名称的数组定义为table.colname，

```
print $row[$array[column_name]] 
```

评估为`print $row[persons.name]`

但是mysql服务器正在生成的索引是'name'而不是'persons.name'

这也应该有效，但是如果查询中有 2 个名称，那是不明确的，并且在运行查询后我看不到传递 where 条件的选项。

这就是我不想首先使用别名的原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:34:25.737

您可以使用“AS”关键字来提供别名

```
SELECT persons.name as persons.name, contacts.email as contacts.email 
FROM presons 
LEFT JOIN contacts ON persons.person_ID=contatcs.person_ID 
LIMIT 0,10; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:34:45.003

尝试使用别名

```
 SELECT persons.name AS 'person.name', contacts.email AS 'contacts.email' FROM presons
 LEFT JOIN contacts ON persons.person_ID=contatcs.person_ID
 LIMIT 0,10; 
```

# facebook - 我可以在外部网站上显示主页的 Facebook 活动日志吗？

> ID：12180328
> 
> 赞同：0
> 
> 时间：2012-08-29T14:30:43.347
> 
> 标签：facebook, facebook-graph-api, rss, facebook-c#-sdk, feed

Facebook 页面有一个 RSS 提要。此提要似乎仅显示用户在页面上的活动。

此外，还有点赞框。但 Like Box 似乎只显示页面自己的评论，而不显示用户的活动。

最后是活动日志。这似乎结合了上述两者，但似乎没有对此的提要。与活动日志中的条目类似的提要或插件正是客户正在寻找的。

有没有办法在外部网站上显示页面活动日志条目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:46:13.760

不，活动日志是私有的，没有 API 或社交插件可以在其他地方检索或显示它

# objective-c - iOS 在 NSMutableArray 中保留一个值并将其传递给另一个视图

> ID：12180331
> 
> 赞同：0
> 
> 时间：2012-08-29T14:30:56.230
> 
> 标签：objective-c, ios, xcode

我正在使用 .XIB 并且没有 ARC。我将 NSMultableArray 的值传递给另一个视图，如果我放置 [self presentModel...]，它可以工作，但是如果我用按钮调用 AnotherView，AnotherView 的 NSMultableArray 的值为 null！

另一个视图.h

```
@interface AnotherViewController : UIViewController<UITableViewDataSource, UITableViewDelegate>{
NSMutableArray *otherAnother;
NSMutableArray *arrayOfTheAnotherView;
}
@property (retain, nonatomic) IBOutlet UITableView *tableView;
@property (retain, nonatomic) NSMutableArray *arrayOfTheAnotherView; 
```

另一个视图.m

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view from its nib.

otherAnother = [[NSMutableArray alloc]init];
otherAnother = [[NSMutableArray alloc]initWithArray:self.arrayOfTheAnotherView];
//    [otherAnother addObjectsFromArray:arrayOfTheAnotherView]; 
NSLog(@"%@", otherAnother);
NSLog(@"%@", arrayOfTheAnotherView);
NSLog(@"%@", self.arrayOfTheAnotherView);
} 
```

3 NSLog 写了“null”

当前视图.h

```
@interface CurrentViewController : UIViewController {
NSMutableArray * arrayCurrentView;
AnotherViewController *superAnotherView;
}
@property (retain, nonatomic) AnotherViewController *superAnotherView; 
```

当前视图.m

```
@synthesize superAnotherView;
NSString *x = [[NSString alloc]initWithFormat:@"%@",[label text]];

arrayCurrentView = [[NSMutableArray alloc]init];
[arrayCurrentView retain];
[arrayCurrentView addObject:x];

self.superAnotherView = [[AnotherViewController alloc]initWithNibName:nil bundle:nil];
self.superAnotherView.arrayOfTheAnotherView = [[NSMutableArray alloc]init];
[self.superAnotherView.arrayOfTheAnotherView retain];
[self.superAnotherView.arrayOfTheAnotherView addObjectsFromArray:arrayCurrentView]; 
```

我不知道如何保留 NSMultableArray 的值，谢谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:42:04.123

代码有一些问题，比如你初始化了 otherAnother 数组两次，并且 viewDidLoad 可能在你设置 arrayOfTheAnotherView 之前被触发。有很多方法可以做到这一点，但有一个问题。您是要创建数组的副本还是只是指向同一数组对象的指针？

如果您像这样为 AnotherViewController 创建自定义初始化语句，可能会使事情变得更简单。

```
- (id) initWithSomeArray: (NSMutableArray *) _arrayOfTheAnotherView{
    self = [super init];
    if (self){
        arrayOfTheAnotherView = [[NSMutableArray alloc] initWithArray:_arrayOfTheAnotherView];
        //Or if you didn't' want a copy
        //arrayOfTheAnotherView = _arrayOfTheAnotheView;

    }
    return self;
} 
```

# ipad - 登录屏幕后拆分视图屏幕

> ID：12180332
> 
> 赞同：0
> 
> 时间：2012-08-29T14:31:01.053
> 
> 标签：ipad

登录后我有一个登录屏幕，它应该导航到拆分视图。我以编程方式创建了一个拆分视图，并在另一个视图控制器上使用了两个控制器左视图控制器（作为表视图）和右视图控制器（将在其中显示详细视图），但是单击右视图控制器上的左视图子视图是未生成。我是 iPad 和 iOS 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T04:52:06.903

您必须在 appDelegate 中设置拆分视图

# excel - 合并excel数据透视报告的两列

> ID：12180333
> 
> 赞同：2
> 
> 时间：2012-08-29T14:31:01.793
> 
> 标签：excel, pivot, excel-2010, pivot-table

我的 excel 表中有如下数据：

![在此处输入图像描述](../Images/95b5711198784a7095ff89fd8efec732.png)

为了解释起见，我隐藏了一些列（请忽略它们）。我以您在上面看到的视图为中心，其输出如下：

![在此处输入图像描述](../Images/4b7a29b33e1d472b99775fdcc02329f7.png)

但是，我期待类似于以下的输出，其中 L1 和 L1C（表示相同的东西）显示为一个实体（好像它来自一列本身）

![在此处输入图像描述](../Images/34aa7bb36022342c17c16c81693b3007.png)

excel 的数据透视功能是否提供了这种效果？

ps：如果您想访问我使用过的数据，请访问我的 google doc 文件：单击[此处](https://docs.google.com/spreadsheet/ccc?key=0ArJoUDcjmKXbdGtCNE9kcFhaUU5saHlVci1ZQW9tVlE)

更新：

我为达到预期结果所做的是通过 excel 公式生成所需的列。（因此，您会注意到我在上面共享的电子表格中名称字段后面的列）。这是您在旋转期间在 excel 中解决此问题的唯一方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:44:36.070

在前两个屏幕截图中设置数据和透视后，您可以在数据透视表中选择一个单元格并尝试运行此代码以获取最后一个屏幕截图：

```
Sub UpdatePivot()
With ActiveCell.PivotTable
    AddPivotLabels .PivotFields("l1"), .PivotFields("l1c")
    AddPivotLabels .PivotFields("l2"), .PivotFields("l2c")
    AddPivotLabels .PivotFields("l3"), .PivotFields("l3c")
End With
End Sub

Sub AddPivotLabels(pName1 As PivotField, pName2 As PivotField)
Dim i As Long
For i = 1 To pName1.PivotItems.Count
    pName1.PivotItems(i).Value = pName1.PivotItems(i).SourceName & _
                            " (" & pName2.PivotItems(i).SourceName & ")"
Next i
End Sub 
```

*注意*：这假设关系是 1-1，您可能希望在运行更大的数据集之前检查这一点。

# android - Android 多次运行一个应用程序

> ID：12180339
> 
> 赞同：2
> 
> 时间：2012-08-29T14:31:30.077
> 
> 标签：android

我试图弄清楚如何允许用户多次运行我的应用程序。这是一个在后台运行的脚本，我希望用户能够根据需要多次运行它，即多个实例。哪种启动模式最能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:44:30.363

不幸的是， [Android 服务是单例的](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/4_EJTGYhAxU)，所以你不能拥有多个。应用程序也是单例的，[这里有很多关于这个话题的讨论](https://stackoverflow.com/questions/3826905/singletons-vs-application-context-in-android)。

实现您正在寻找的最佳方法是在一个线程中运行您的脚本/后台进程，并允许您的服务或应用程序产生无限数量的这些线程。

# proxy - 无法通过代理服务器克隆 github 目录

> ID：12180341
> 
> 赞同：0
> 
> 时间：2012-08-29T14:31:34.360
> 
> 标签：proxy, github

我无法克隆特定的 github 分支！当我尝试这样做时，它会显示以下错误，因为我的大学中有一个 squid 代理服务器。

```
 Cloning into 'ws'...
       error: The requested URL returned error: 407 while accessing https://github.com/abcd/efg.git/info/refs
       fatal: HTTP request failed 
```

请帮忙 ！！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:35:26.387

尝试将代理服务器添加到您的`.gitconfig`（它位于您的`$HOME`文件夹中）

```
 [http]
        proxy = http://username:passwd@your-proxy-ip:your-proxy-port 
```

例子：

```
 [http]
        proxy = http://user:pass@127.0.0.1:3128 
```

这必须放在`[core]`gitconfig 的部分中。有关更多文档，请参见[此处](https://www.kernel.org/pub/software/scm/git/docs/git-config.html)

# xcode - XCode 编号及其本地化值

> ID：12180344
> 
> 赞同：1
> 
> 时间：2012-08-29T14:31:36.783
> 
> 标签：xcode, cocoa, random, nsdictionary

我正在与国家/地区制作应用程序，它是国旗。现在我有一个问题。我有从 1 到 200 的标志。以及所有数字的名称。（例如，1 是澳大利亚，2 是美国）。我使用随机在`UIImageView`. 之后我有 4 个按钮，它们从标志名称变成它们的名称。最后全部代码。

我有一个数组，我在其中存储图像的名称。

*   我有一个数组，我在其中存储图像的名称。
*   还有一个带有按钮名称的文件。

还有问题：*如何用名称替换国家/地区的数量？* 如何将文件中的所有名称放入 NSDictionary？或者怎样做才能拥有这样的功能？

对不起我的英语不好。:) 函数代码，这使得 nextFlag。

```
- (void)nextFlag
{
    int tmp = random() % [avalibleFlags count];
    NSString *imgString = [avalibleFlags objectAtIndex:tmp]; 
    NSString *path = [[NSBundle mainBundle] pathForResource:imgString ofType:@"png"];
    UIImage *newImage = [UIImage imageWithContentsOfFile:path];
    currentFlagName = imgString;
    [_currentFlag setImage:newImage];
    [avalibleFlags removeObjectAtIndex:tmp];
    NSMutableArray *tmpFlags = [allFlags mutableCopy];
    [tmpFlags removeObjectAtIndex:tmp];
    for (int i=0; i<3; i++) 
    {
        int tmpNumber = random() % [tmpFlags count];
        NSString *stringForButton = [tmpFlags objectAtIndex:tmpNumber];
        [tmpFlags removeObjectAtIndex:tmpNumber];
        [buttonNames insertObject:stringForButton atIndex:i];
    }
    int tmp2 = random() % 4;
    [[_buttons objectAtIndex:tmp2] setTitle:imgString forState:UIControlStateNormal];
    for (int i = 0, j = 0; i<4; i++) {
        if ([[_buttons objectAtIndex:i] currentTitle] != currentFlagName) 
        {
            [[_buttons objectAtIndex:i] setTitle:[buttonNames objectAtIndex:j] forState:UIControlStateNormal];;
            j++;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:24:51.017

与其尝试将数字映射到国家名称，不如将图像名称映射到国家名称。这样，确切的顺序并不重要。这将是最容易在文件中管理的，正如您提到的，名称确实应该本地化。因此，您想使用一个特殊的本地化字符串表，将文件名映射到国家/地区名称。一种方便的方法是`NSLocalizedStringFromTable()`. 要在程序中检索特定标志的国家名称，您可以使用：

```
NSString *countryName = NSLocalizedStringFromTable(imgString, @"FlagToCountry", @""); 
```

然后在您的代码项目中将一个本地化文件添加到您的项目中，名为“FlagToCountry.strings”。它应该具有通常的 .strings 文件格式的所有标志到国家/地区的映射，例如：

```
/* Australia */
"aus" = "Australia"

/* USA */
"usa" = "USA"
... 
```

# c# - 从 ViewModel 中的新启动线程更新可绑定属性

> ID：12180346
> 
> 赞同：0
> 
> 时间：2012-08-29T14:31:39.403
> 
> 标签：c#, binding, asynchronous, windows-8

我正在研究 Windows 8 编程，我已经与这个问题斗争了几个小时，然后至少以某种方式让它工作。这个功能现在似乎以某种方式工作。但肯定不好看。

功能确实登录，如果登录成功，那么它应该分拆更新商家的任务。执行不应等待商家列表完成。

棘手的部分是那些 LoadingMerchants 属性，它们也会触发 OnPropertyChanged 并且需要在 UI 线程中执行。

```
public async Task<bool?> LoginAsync(string username, string password)
{
    var uri = new Uri(string.Format("{0}/User/Login?userName={1}&password={2}", ServerURL, username, password));

    bool? result = await GetJsonAsync<bool?>(uri);

    if(result.HasValue && result.Value)
    {
        LoginDone = true;
        LoadingMerchants = true;
        var task = Task.Run(async () => { await LoadMerchantsAsync(); });
        var uitask = task.ContinueWith((loadtask) => { LoadingMerchants = false; }, TaskScheduler.FromCurrentSynchronizationContext());
    }

    return result; 

} 
```

Task.Run 是在新胎面上开始执行的正确方法吗？

我有很多不需要的额外等待吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:06:02.713

`Task.Run`是在线程池线程上开始执行的正确方法。但你不需要它。

这应该可以正常工作：

```
public async Task LoadMerchantsAndUpdateUiAsync()
{
  LoadingMerchants = true;
  await LoadMerchantsAsync();
  LoadingMerchants = false;
}

public async Task<bool?> LoginAsync(string username, string password)
{
  var uri = new Uri(string.Format("{0}/User/Login?userName={1}&password={2}", ServerURL, username, password));

  bool? result = await GetJsonAsync<bool?>(uri);
  if (result.HasValue && result.Value)
  {
    LoginDone = true;
    LoadMerchantsAndUpdateUiAsync();
  }

  return result; 
} 
```

# unit-testing - 使用 specs2 对 Scalatra POST 服务进行单元测试

> ID：12180353
> 
> 赞同：0
> 
> 时间：2012-08-29T14:32:02.900
> 
> 标签：unit-testing, scala, scalatra, specs2

我正在尝试使用此测试来测试我的网络服务：

```
 "POST /phaseupdate" should {
    "return status 200" in {
      put("/phaseupdate", Map("filename" -> "test1", "entryaddress" -> "address 1","name" -> "starting","percentcomplete" -> "10")) {
        status must_== 200
      }
    }
  } 
```

Web服务定义是：

```
 post("/phaseupdate/:filename/:entryaddress/:name/:percentcomplete") { 
```

但是我收到了 404 错误，所以我传递参数的方式似乎是错误的。

让这个测试调用我的网络服务的正确方法是什么？

**更新**

所以这行得通，所以我对服务的定义不是我所期望的：

```
put("/phaseupdate/test1/address1/starting/10") { 
```

# .net - 使用 VB.NET 逆非蕴涵

> ID：12180363
> 
> 赞同：1
> 
> 时间：2012-08-29T14:32:21.370
> 
> 标签：.net, vb.net, boolean-logic

如何使用 VB.NET（在两个整数之间）进行[逆非暗示？](http://en.wikipedia.org/wiki/Converse_nonimplication)

我有两个标志枚举`myFlag1`，`myFlag2`并且想要获得`myFlag3`仅包含 in`myFlag2`但不在`myFlag1`.
我认识`XOR`运营商，但这并不好。

![的维恩图](../Images/5054310ebbdcc1c0896684846790f112.png)

说我有

```
010110
100011
------
100001 (this is what I need) 
```

还

```
111
101
---
000 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T14:50:38.023

```
Dim a As Integer = 22
Dim b As Integer = 35

Dim output As Integer = (b And Not a) 
```

这几乎就是你试图向某人解释时大声说出来的方式。:)

# javascript - 将页面标题添加到站点标题下方的现有页面

> ID：12180365
> 
> 赞同：2
> 
> 时间：2012-08-29T14:32:24.327
> 
> 标签：javascript, jquery, coldfusion

我的客户有一个现有的横幅网站标题，并且在 7 年多之后，他们现在希望在页面横幅文本下方有另一行引用页面标题是什么。我试图避免进入每一页添加一行文本并提出以下解决方案。它并不完美（也不一定是完美的），但您是否发现这种方法有任何不可预见的问题？

```
<cfparam name="url.CurrentPage" default="">
<div id="wideheader">
<div id="wideheadermain">
    <h1 id="title">
    <div class="PageBannerText">Technology Lab
    <span id="CurrentPage"><cfswitch expression="#url.CurrentPage#">
        <cfcase value="Update">
            Update Project Data
        </cfcase>
        <cfcase value="Tracker">
            Project Tracker
        </cfcase>
        <cfcase value="ProjectLog">
            Project Log
        </cfcase>
        <cfcase value="Portfolio">
            Project Portfolio
        </cfcase>
        <cfcase value="Links">
            Related Links
        </cfcase>
        <cfcase value="Coordinator">
            Coordinator Space
        </cfcase>
        <cfcase value="Request">
            Project Request
        </cfcase>
        <cfcase value="Viewer">
            Project Tracker Read-Only
        </cfcase>
        <cfcase value="LabMgr">
            Lab Manager
        </cfcase>
        <cfcase value="Architect">
            Architect Module
        </cfcase>
        <cfdefaultcase>
            #url.CurrentPage#
        </cfdefaultcase>
    </cfswitch> #cookie.CurrentPage#</span>
        </div>
</div>
 </div> 
```

我可以将上面的代码添加到我的标题页，然后在主导航菜单中，添加以下代码来设置子页面标题：

```
<ul>
    <li><a href="Proj/TrackerMenu.cfm?CurrentPage=Project Tracker">Project Tracker</a></li>
    <li><a href="Proj/RequestCopyOrAdd.cfm?CurrentPage=Request a Project">Request a Project</a></li>
    <li><a href="Proj/ViewerMenu.cfm?CurrentPage=Project Viewer">Project Viewer</a></li>
    ...
</ul> 
```

我知道这不会是完美的，但我相信这将覆盖 90-95% 的网站。

我的另一个想法是用 span 标签包装子页面横幅文本并给它一个 ID，然后使用 jQUery 设置文本。我可以编写一个例程来评估当前 URL，然后相应地设置子页面横幅文本。

TIA

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T15:01:40.303

一个更简单的解决方案是将标题存储在结构中，然后进行查找。

即把它放在onApplicationStart里面：

```
<cfset Application.PageTitles = 
    { 'Update'    : 'Update Project Data'
    , 'Tracker'   : 'Projet Tracker'
    ...
    , 'LabMgr'    : 'Lab Manager'
    , 'Architect' : 'Architect Module'
    }/> 
```

*^(（注意：如果您使用的是 CF9 或更早版本，则需要使用`=`而不是`:`那里。CF10，并且所有版本的 Railo 和 OpenBD 都支持使用内联结构`:`或`=`内联结构。）)*

然后用这个替换你的 switch/case 块：

```
<cfif StructKeyExists(Application.PageTitles,Url.CurrentPage)>
    <cfset PageTitle = Application.PageTitles[Url.CurrentPage] />
<cfelse>
    <cfset PageTitle = Url.CurrentPage />
</cfif>

#HtmlEditFormat(PageTitle)# 
```

您可以在菜单中使用类似的内容，因此您无需在多个位置更新标题。

还要注意使用[HtmlEditFormat](http://cfdocs.org/HtmlEditFormat)来防止可能的 HTML/脚本注入。

您还应该将其添加到 cookie 变量和任何其他用户提供的变量（以及任何不保证不包含可能更改 HTML 的字符的变量）。

# c# - 从 ThreadStaticAttribute 派生子类的原因是什么？

> ID：12180369
> 
> 赞同：4
> 
> 时间：2012-08-29T14:32:34.583
> 
> 标签：c#, threadstatic

今天早上我在 C# 上刷新了我的记忆`ThreadStaticAttribute`，下面这行突然出现在我身上：

> 照原样使用此属性，不要从它派生。

此行存在于所有版本的 .Net Framework 的文档中，并且 Microsoft 自己[对该问题的代码分析](http://msdn.microsoft.com/en-us/library/ms182267%28v=vs.80%29.aspx)指出，只有当属性被设计为属性层次结构的一部分时，它们才应保持未密封状态。

所以 -`ThreadStaticAttribute`类[现在没有](http://msdn.microsoft.com/en-us/library/system.threadstaticattribute%28v=vs.110%29.aspx)，而且[似乎从来没有](http://msdn.microsoft.com/en-us/library/system.threadstaticattribute%28v=vs.71%29.aspx)，`sealed`。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:47:20.500

有很多事情在 99% 的情况下都是坏主意，而在 1% 的情况下是个好主意。

如果您不开发框架本身，那么还有更多的事情是一个坏主意，但必须有人在框架中。

`ThreadStaticAttribute`在这种情况下，与您或我想要的相比，有人可能想要向框架添加一个特殊情况。

即使这样可能也不太可能，但他们现在应该积极阻止它，还是让可能性保持开放？

你可以争论任何一种方式，但有人决定保留这种可能性。（或者不能排除“他们只是忘记了”）。

请注意，如果他们现在确实将其密封，那么如果有人确实在派生属性方面取得了成功，那将是一个重大变化。即使已经有人争辩说他们不应该这样做，即使几乎所有的更改都有破坏某些东西的风险，但保持现状仍然是一个论据。

# facebook - 使用带有自定义对象的 facebook 内置操作

> ID：12180372
> 
> 赞同：0
> 
> 时间：2012-08-29T14:32:47.603
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

我正在为我的网站开发一个包含用户生成内容的应用程序。我已经成功发布了自定义操作+自定义对象，但现在我正在尝试将内置操作与自定义对象一起使用，以便显示

“用户在他们的时间线上喜欢 appname 上的“自定义对象””

这是我还包括 og:url、og:image、描述等的标题

```
 <meta property="og:type" content="appname:custom_object" /> 
```

到目前为止我的代码（我曾经成功发布自定义操作+自定义对象）

```
 if(user_clicks_on_action_button){
    try{
        $params = array('custom_object_name'=> 'url_to_object');
        $statusUpdate = $facebook->api("/me/og.likes", 'post', $params);
    }catch(FacebookApiException $e){
        error_log($e);
        echo $e->getMessage();

    }
} 
```

但这是我得到的信息：

```
 The action you're trying to publish is invalid because it does not specify any reference objects. At least one of the following properties must be specified: object. 
```

根据 facebook 文档是可能的： [https](https://developers.facebook.com/docs/opengraph/actions/builtin/likes/) ://developers.facebook.com/docs/opengraph/actions/builtin/likes/ 但也许我错过了一些东西。

# asp.net - 数据绑定中继器项目上的可选超链接

> ID：12180374
> 
> 赞同：0
> 
> 时间：2012-08-29T14:32:50.230
> 
> 标签：asp.net, data-binding, repeater

我的 ASP.NET 页面上有一个数据绑定中继器。我正在使用转发器来构建一个元素列表，每个元素都包含一个文本（由数据绑定表中的一列给出），该文本可能超链接到另一个页面。是否应包含超链接由数据绑定表中的另一列确定。

我不知道如何解决这个问题。我应该使用根据第二列中的值显示或隐藏的 HyperLink 服务器控件吗？然后如何更改转发器中每个项目的此控件的 Visible 属性？有更好的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:35:54.020

1 最火的方法

是的，您将 asp:label 和 asp:hyerlink 添加到模板中，在 ItemDataBound 上，您可以访问您的数据，并调整超链接和标签的可见性。

2 秒方法（快速）

`Visible`或根据`Eval.DataBinder`c# 表达式调整您的属性

对于您的超链接（只是示例）

```
Visible='<%#
CustomFunction((object)DataBinder.Eval(Container.DataItem, "YourColumn")).ToString()
%>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:42:34.263

您可以有两个控件。一个是超链接，一个是常规标签或文字。然后，在[ItemDataBound](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemdatabound.aspx)事件中，根据第二列的值显示/隐藏相应的控件。请参阅下面的示例代码。您显然需要更改它以适应您的情况。

```
Private Sub Repeater_ItemDataBound(ByVal sender As Object, Byval e As RepeaterItemEventArgs)
  If (e.Item.ItemType Is ListItemType.Item) Or (e.Item.ItemType Is ListItemType.AlternatingItem) Then
    Dim hyperlink = CType(e.Item.FindControl("HyperLink1"), HyperLink)
    Dim label = CType(e.Item.FindControl("Label1"), Label)
    Dim dataSource = CType(e.Item.DataItem, MyDataSourceObject)

    If (dataSource.HyperLink = String.Empty) Then
      hyperlink.visible = false
    Else
      label.visible = false
      hyperlink.NavigateUrl = dataSource.HyperLink
    End If
  End If
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T14:43:09.613

您可以像这样在转发器中设置可见属性：

```
<asp:HyperLink ID="lnk" runat="server" Visible='<%# Boolean.Parse(Eval("IsVisible").ToString()) %>' /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T14:45:41.440

试试这个：

```
void Repeater1_ItemDataBound(Object Sender, RepeaterItemEventArgs e) {

          // Execute the following logic for Items and Alternating Items.
          if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) {
             DataRowView row = e.Item.DataItem as DataRowView;
             if (row["ColumnName2"]  == "Something") {
                ((HyperLink)e.Item.FindControl("HyperLink1")).NavigateUrl= row["ColumnName1"];
             }
             else
             {
               ((HyperLink)e.Item.FindControl("HyperLink1")).Visible = False;
             }
          }
       } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T14:46:14.173

使用Repeater ItemDataBound 命令..

```
 void repeater_ItemDataBound(Object Sender, RepeaterItemEventArgs e) 
   {                          
      DataRowView row = (DataRowView)e.Item.DataItem;

      if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType    ==ListItemType.AlternatingItem) 
       {             
            if(row["othercolumnName"].ToString()==true)//You can check the value here..use your logic
             {
                LinkButton lnk=(LinkButton)e.Item.FindControl("lnkID");
                 lnk.Visible=False;
             }
      }
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T15:04:18.233

我更喜欢在标记中做这种简单的事情，因为它更容易测试、修改和适应未来的变化。

这是一个如何做到这一点的示例 - 假设我正在绑定到具有 a `Name`、 a`ShouldWeCreateLink`和一个`Address`属性的对象集合：

```
<ItemTemplate>
        <tr>
            <td>
                <%--Bind to Name Property--%>
                <%#  Eval("Name") %>
            </td>
            <%--Should we show a hyperlink or a simple text with the address?--%>
            <td>
               <%# Eval("ShouldWeCreateLink").ToString() == "True" ? string.Format("<a href=\"Link.aspx?ID={0}\">{1}</a>", Eval("ID"),"Click me") : Eval("Address")%>
            </td>
        </tr>
    </ItemTemplate> 
```

当需要创建超链接时，上面会生成这样的超链接：

`<a href="link.aspx?ID=9">Click me</a>`

尽可能避免使用服务器控件，除非您需要`ViewState`或以编程方式从代码隐藏中访问它们的属性。

# python - UTF8 Python 物料清单

> ID：12180376
> 
> 赞同：3
> 
> 时间：2012-08-29T14:32:58.790
> 
> 标签：python, unicode, utf-8, byte-order-mark

> **可能重复：**
> [在 python 中写入 utf-8 文件](https://stackoverflow.com/questions/934160/write-to-utf-8-file-in-python)

我有想要写入 CSV 文件的 Unicode 字符串（带有日语字符）。但是，BOM 似乎没有正确写入，就像`"ï»¿"`第一行中的字符串一样。这会导致 Excel 无法正确显示日文字符。使用 Notepad++ 打开 CSV 时，字符显示正确。

```
fileObj = codecs.open(filename,"w",'utf-8')
fileObj.write(codecs.BOM_UTF8)
c = u';'
for s in stringsToWrite:
   line = e.someUnicodeString
   fileObj.write(line)
fileObj.close() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T09:47:57.320

```
fileObj = codecs.open(filename,"w",'utf-8') 
```

好的，你有一个 Unicode 输出流。

```
fileObj.write(codecs.BOM_UTF8) 
```

BOM_UTF8 是字节序列，而不是您期望写入 Unicode 流的 Unicode 字符串。Python 会使用一些可能不正确的编码自动从字节转换为 Unicode。如果默认编码是 Windows 代码页 1252 而不是 UTF-8，您将有效地对 BOM 进行双重编码，它将以`ï»¿`.

建议将 BOM 写为 Unicode 字符，而不是：

```
fileObj.write(u'\uFEFF') 
```

InternetSeriousBusiness 写道：

> 无论如何，UTF-8 BOM 不是不鼓励吗？–

是的，UTF-8 faux-BOM 在大多数情况下很大程度上是一场灾难，但需要让 Excel 的字符集猜测来获取 UTF-8。不幸的是，它在 Excel for Mac 中不起作用。另一种可能的方法可能是使用 UTF-16。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:36:46.060

您复制的字符串*是*UTF-8 BOM。所以你的问题不在你的python代码中，而是在其他地方。

# asp.net-mvc - 在asp.net mvc的redirecttoaction中设置查询字符串

> ID：12180387
> 
> 赞同：6
> 
> 时间：2012-08-29T14:33:33.787
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, query-string, redirecttoaction

我必须`redirecttoaction`在 asp.net mvc 视图中使用不同的参数进行调用，这些参数是从视图的引用页面（网格的状态）中提取的。

我有（在隐藏字段中）查询字符串的内容（有时为空，有时带有 2 个参数等等），所以我在创建路由值数组时遇到了问题。

是否有一些助手可以帮助我将查询字符串转换为路由值数组？就像是：

```
string querystring ="sortdir=asc&pag=5";
return RedirectToAction( "Index", ConvertToRouteArray(querystring)); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T14:38:12.177

要创建通用解决方案，请将您的查询字符串转换为字典，并在字典中转换为 RouteValueDictionary。

```
var parsed = HttpUtility.ParseQueryString(temp); 
Dictionary<string,object> querystringDic = parsed.AllKeys
    .ToDictionary(k => k, k => (object)parsed[k]); 

return RedirectToAction("Index", new RouteValueDictionary(querystringDic)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T20:10:03.113

使用的一个限制`RedirectToAction("actionName", {object with properties})`是 RedirectToAction() 没有接受的重载`RedirectToAction(ActionResult(), {object with properties})`，因此您被迫使用魔术字符串作为操作名称（可能还有控制器名称）。

如果您使用[T4MVC 库](http://t4mvc.codeplex.com/documentation)，它包含两个流畅的 API 帮助器方法 (`AddRouteValue(...)`和`AddRouteValues(...)`)，使您能够轻松添加单个查询字符串参数、对象的所有属性或整个 Request.QueryString。您可以在 T4MVC 自己的 ActionResult 对象上或直接在 RedirectToAction() 方法上调用这些方法。当然，T4MVC 就是要摆脱魔术字符串！

举个例子：假设你想重定向到一个非认证请求的登录页面，并将最初请求的 URL 作为查询字符串参数传递，这样你就可以在成功登录后跳转到那里。以下任一语法示例都可以使用：

```
return RedirectToAction(MVC.Account.LogOn()).AddRouteValue(@"returnUrl", HttpUtility.UrlEncode(Request.RawUrl)); 
```

或者

```
return RedirectToAction(MVC.Account.LogOn().AddRouteValue(@"returnUrl", HttpUtility.UrlEncode(Request.RawUrl))); 
```

# asp.net-mvc-4 - HttpResponseMessage 中的非泛型类型错误

> ID：12180391
> 
> 赞同：0
> 
> 时间：2012-08-29T14:33:49.997
> 
> 标签：asp.net-mvc-4

我刚刚将 MVC4 WebAPI 从 beta 更新为 RC，现在这部分代码不起作用。我从这里读到： [http](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/e90d582a-7023-44a1-b311-4fe1370b0314/) ://social.msdn.microsoft.com/Forums/en-US/wcf/thread/e90d582a-7023-44a1-b311-4fe1370b0314/我必须使用

`Request.CreateResponse(HttpStatusCode.OK, Response)`

但是没有`CreateResponse`哪个实现需要两个参数？所以我想知道我应该如何继续修复这部分？

```
public HttpResponseMessage<Response> Login(string username, string password)
{
       ApiResponse<string> user = am.LogOn(username, password);
       System.Diagnostics.Debug.WriteLine(username + " - " + password);
       System.Diagnostics.Debug.WriteLine("User status is: " + user.Status);

       switch (user.Status)
       {   
           case ResponseStatus.OK:
              System.Diagnostics.Debug.WriteLine(user.Value);
              return new HttpResponseMessage<Response>(new Response { Token = user.Value, ValidTo = user.ValidTo });
           default:
              return new HttpResponseMessage<Response>(HttpStatusCode.Forbidden);
       }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:37:52.200

> 但是，没有实现带有两个参数的 CreateResponse？

当然，[有](http://msdn.microsoft.com/en-us/library/hh969056%28v=vs.108%29.aspx)：

```
public HttpResponseMessage Login(string username, string password)
{
    ApiResponse<string> user = am.LogOn(username, password);
    System.Diagnostics.Debug.WriteLine(username + " - " + password);
    System.Diagnostics.Debug.WriteLine("User status is: " + user.Status);

    switch (user.Status)
    {   
        case ResponseStatus.OK:
            System.Diagnostics.Debug.WriteLine(user.Value);
            return Request.CreateResponse(
                HttpStatusCode.OK, 
                new Response { Token = user.Value, ValidTo = user.ValidTo }
            );
         default:
             return Request.CreateResponse(HttpStatusCode.Forbidden);
    }
} 
```

# google-drive-api - 在 Google Drive SDK 上，如何更新内容为空的文件 [已确认错误]

> ID：12180392
> 
> 赞同：0
> 
> 时间：2012-08-29T14:33:52.687
> 
> 标签：google-drive-api

我有一个文件，当我想用​​空内容更新它时，API 返回一个成功的请求，但不更新内容。

要求：

```
PUT https://www.googleapis.com/upload/drive/v2/files/xxxxxxxxxx?uploadType=media
Content-Length = 0
Content-Type = binary/octet-stream
Authorization = Bearer xxxxx 
```

响应代码为 200，但文件未更新。

我也尝试了 uploadType=resumable ，我也遇到了同样的问题。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:49:27.787

@Martin我认为Google不允许您覆盖驱动器中的文件，而是更新时间戳，这样您就可以拥有两个同名的文件。我认为您可以做的唯一更新是更新文件的元数据。我可能错了，但还没有真正尝试过更新内容为空的文件。另外，您是否使用 API 客户端，因为我相信它们可以帮助您完成大部分繁重的工作。

# ios - 在没有 CAAnimations 但使用“Fling/Flick”的情况下将 UIImageView 移动到多个 CGPoints（数组）上

> ID：12180393
> 
> 赞同：0
> 
> 时间：2012-08-29T14:33:55.187
> 
> 标签：ios, uiimageview, uipangesturerecognizer

我有一些图像，所有这些图像都放在自己的 UIImageView 上。我有一个 NSArray，其中包含我希望图像移动的多个点。所有图像必须相互跟随，并且 10 个图像中可能只有 5 个同时在该轨道上（用户设置）。仍然这些图像必须均匀地分布在路径上。

我的问题是我可以让图像移动，但我不能像 UIScrollView 和 UITableView 那样进行“轻弹或轻弹”移动。（通过 UIPanGesture 移动并在释放时使用剩余速度来计算图像应该保持移动多长时间，同时放慢速度直到它们可以停止）。

我的 UIImageViews 跳到最后一个地方，而不是从一个点移动到另一个点。我已经尝试过使用默认动画，但是离开和进入屏幕的 UIImageViews 给我带来了问题。

这是我为测试这部分（运动）而创建的代码

```
 - (void) move: (int) direction{

    switch (direction) {
        case MOVEMENT_LEFT:
        {
            if ((currentLocation -1) <= startpoint){
                currentLocation = endpoint;
            } else {
                currentLocation--;
            }
        }
            break;
        case MOVEMENT_RIGHT:
        {
            if ((currentLocation +1) >= endpoint){
                currentLocation = startpoint;
            } else {
                currentLocation++;
            }
        }
            break;
        default:
            break;
        }
    [image setFrame:CGRectMake(currentLocation, 100, 125, 125)];
}

- (void) panHandler: (UIPanGestureRecognizer *) recognizer
{
    CGPoint velocity = [recognizer velocityInView:[self view]];
    //NSLog(@"Speed: x.%f y.%f", velocity.x, velocity.y);

    if (recognizer.state == UIGestureRecognizerStateBegan){

    } else if (recognizer.state == UIGestureRecognizerStateChanged){

        if((velocity.x < 0 && velocity.y < 0) || (velocity.x < 0 && velocity.y > 0) || (velocity.x < 0 && velocity.y == 0) || (velocity.x == 0 && velocity.y < 0))
        {
            speed = floorf(sqrtf((velocity.x * velocity.x) + (velocity.y * velocity.y)));
            gestureDirection = MOVEMENT_LEFT;
            LOG_direction = @"Left";
            [self move:MOVEMENT_LEFT];
        } else if((velocity.x > 0 && velocity.y > 0) || (velocity.x > 0 && velocity.y < 0) || (velocity.x > 0 && velocity.y == 0) || (velocity.x == 0 && velocity.y > 0))
        {
            speed = floorf(sqrtf((velocity.x * velocity.x) + (velocity.y * velocity.y)));   
            gestureDirection = MOVEMENT_RIGHT;
            LOG_direction = @"Right";
            [self move:MOVEMENT_RIGHT];
            //[image setFrame:CGRectMake(currentLocation, 100, 125, 125)];
        }

    } else if (recognizer.state == UIGestureRecognizerStateEnded || recognizer.state == UIGestureRecognizerStateFailed || recognizer.state == UIGestureRecognizerStateCancelled){
        NSLog(@"Movement %@ with start speed: %i", LOG_direction, speed);
        if (speed > 1250){
            NSLog(@"Fling Movement Event");
            //int sleeper = 0;
            if (gestureDirection == MOVEMENT_LEFT){
                for (int i = speed; i > 0; i--){
                    [image removeFromSuperview];
                    [self move:MOVEMENT_LEFT];
                    sleep(.05);
                    [[self view] addSubview:image];
                    //sleeper = sleeper + 100;
                    //sleep(sleeper);
                }
            } else {
                for (int i = speed; i > 0; i--){
                    [image removeFromSuperview];
                    [self move:MOVEMENT_RIGHT];
                    sleep(.05);
                    [[self view] addSubview:image];
                    //sleeper = sleeper + 100;
                    //sleep(sleeper);
                }
            }
        } else {
            NSLog(@"Normal Movement Event");
        }
    }

} 
```

我想要实现的是：在 SINUS-WAVE 上从左到右或向后移动的 UIImageViews（取决于用户的触摸），离开左边的图像将被右侧数组中的下一个图像替换，也向后..

所以：[图像 F] [图像 A] [图像 B] [图像 C] [图像 D] 用户将手指向右移动......并且： [图像 G] [图像 F] [图像 A] [图像 B] [图片 C] 并且随着一甩，它会向前迈进一步，但仍会在旅途中显示所有图像..

希望有人可以帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:42:27.717

UIScrollView 有一个属性“pagingEnabled”，它将滚动视图的大小作为页面大小，当您滚动时，它将转到您内容的下一个“页面”

IE：您的滚动视图大小为 100x100，您的 contentSize 为 400x100，从 contentOffset 0x0 开始，当您向左滑动时，您的 contentOffset 将变为 100x0，然后是 200x0，依此类推，停止在正确的数字

但是，如果您想在具有自定义尺寸的自定义位置中实现此效果，您将需要手动编写代码，因为没有什么可以实现您正在寻找的

我希望我有帮助，祝你好运！

# android - 寻找一种以编程方式触发 Android ActionBar 主页的方法，使其进入按下状态

> ID：12180397
> 
> 赞同：1
> 
> 时间：2012-08-29T14:34:17.713
> 
> 标签：android, android-actionbar

我正在开发一个飞入菜单功能。它运作良好 - 除了我试图添加的视觉效果。

与 Google+ 应用程序一样，当用户单击打开窗格上的任意位置时，它就会关闭。当窗格以这种方式关闭时，我想以按下状态显示主页按钮。理想情况下，我可以只执行单击主页按钮，但我看不到访问 ActionBar 视图的明显方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-20T08:52:04.553

正如[这里](https://stackoverflow.com/questions/10187523/actionbarsherlock-how-to-access-home-button-view)所解释的，home 按钮`ActionBar`不包含在`Activity`内容视图中，而是属于装饰。

使用以下代码

```
mActivity.getWindow().getDecorView().findViewById(android.R.id.home); 
```

我检索主页按钮，然后单击它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:43:55.003

您可以使用`actionBar.setBackgroundDrawable`，然后使用`findViewById`获取主页按钮并将他手动设置为按下模式`Button.setPressed(true)`

# javascript - Javascript条件为数据变量赋值

> ID：12180399
> 
> 赞同：0
> 
> 时间：2012-08-29T14:34:18.467
> 
> 标签：javascript, jquery

我正在从数据库中读取一些数字数据。

我需要做的是为每个数字分配一个名称......

就像是：

```
get the variable: ... thevar = '1';

If thevar = 1 then myname = 'name1';
else
If thevar = 2 then myname = 'name2'; 
```

我怎么能用javascript做到这一点？

抱歉，我认为我没有正确解释它...如果我将如何使用 javascript 执行上述操作的语法，我需要什么。

希望它现在更有意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T14:35:45.693

您可以在 JavaScript 中连接数字和字符串：

```
myname = 'name' + myvariable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:35:41.040

怎么样`myname = 'name' + myvariable;`

假设您想要我们发布的语法，

```
var thevar = '1'; //read from database
var myname = '';

if (thevar === '1') {
  myname = 'name1';
} else if (thevar === '2') {
  myname = 'name2';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T14:38:42.650

```
function buildNumberMap(numbers) {
    var i, len, number, map = {};
    for (i = 0, len = numbers.length; i < len; i++) {
        number = numbers[i];
        map["name" + number] = number;
    }
    return map;
} 
```

# python - 错误记录装饰器，在函数内具有单独/隔离的异常处理

> ID：12180405
> 
> 赞同：1
> 
> 时间：2012-08-29T14:34:28.837
> 
> 标签：python, exception, logging, decorator

有没有办法编写一个通用的日志装饰器，它记录函数或方法内部发生的所有异常（已处理和未处理的异常），但不影响函数本身的异常处理？这对于在通用装饰器中记录异常可能很有用，但可以保留特定于函数的异常处理部分。

# java - 线程中List的内存范围

> ID：12180407
> 
> 赞同：1
> 
> 时间：2012-08-29T14:34:35.723
> 
> 标签：java, multithreading, list, memory

我正在写一个我有一个列表的课程。我正在从 的 run 方法实例化列表`Runnable`。作为：

```
public void sendEmailToLegalUsers() {
    Log.info("JYM====================================");

    try {
        new Runnable() {

            public void run() {
                userCns = new ArrayList<String>();
                recipients = new ArrayList<String>();

                ///other codes
            }
        };                  
    } catch (Exception e) { 
        Log.info("Error occurred in LDAPSendMail: "+ e.getMessage());
    }   

    Log.info("END====================================");
} 
```

现在每次调用 sendEmailToLegalUsers 方法都会有一个新线程。现在我想知道列表的内存范围是否绑定到类级别（如果它绑定到类级别并且如果说此方法被调用两次，那么当线程 1 创建的列表也有线程 2) 或线程在它们自己的范围内运行，那么每个线程的列表将具有不同的范围。有没有机会在两个或多个线程之间混淆列表数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T14:37:03.770

如果您`Runnable`对两个线程都使用相同的类，那么是的，会有重叠。如果您`new Runnable()`的每个线程都有一个单独的线程，那么不会，它们将是单独的列表实例*，但这*仅适用于将列表定义为`Runnable`. 如果列表是在调用类中定义的，那么第二次调用方法时，`userCns`和`recipients`字段将被覆盖。

在您的情况下，我根本看不到任何线程被分叉。我所看到的只是你实例化`Runnable`. 你确定你没有尝试做类似的事情：

```
 new Thread(new Runnable() {
        public void run() {
            // lists are local to the runnable
            List<String> userCns = new ArrayList<String>();
            List<String> recipients = new ArrayList<String>();
           ///other codes
        }
    }).start(); 
```

在这种情况下，每次调用`sendEmailToLegalUsers()`方法时，`Runnable`都会使用新列表创建一个新方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T14:37:48.420

您正在为每个线程创建一对新的列表。您还应该使它们成为局部变量，否则您可能会遇到线程安全问题，而不是在列表上，而是在对列表的引用上。

```
new Thread(new Runnable() {
    public void run() {
        List<String> userCns = new ArrayList<String>();
        List<String> recipients = new ArrayList<String>();

        ///other codes
    }
}).start(); 
```

如果 userCns 或接收者是字段，它们可以在线程之间共享，因为该字段是共享的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T14:36:51.807

如果多个线程调用相同`run()`，是的，有可能出现错误结果，因为列表是实例范围，并且两个线程都在同一个列表上运行。

如果您为每个线程创建新的 Runnable()，那么它们将拥有自己的副本，并且不会更新彼此的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T14:39:12.473

你正在创建一个新的 Runnable，但没有对它做任何事情——你肯定不是在创建一个新的线程。

但是，如果您要将创建的 Runnables 传递给线程，则引用将被限制为 Runnable 实例。

# magento - Magento 移除脚本标签

> ID：12180408
> 
> 赞同：5
> 
> 时间：2012-08-29T14:34:40.143
> 
> 标签：magento, markup

我在使用 Magento（Magento 版本 1.5.1.0）时遇到了一些问题。Magento 会做一些输出/标记/js 过滤吗？

我在 *.phtml 模板中放置了一些脚本标签（没有 CMS 块）

```
<script type="text/javascript">
// echo foo
function foo() {
}
</script> 
```

当我查看 html-source 时，这个标签不见了。所有其他周围的标签都是可见的。我检查了模板路径并清除了缓存。任何提示或想法？

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-24T15:24:57.820

我有同样奇怪的问题，明确表示没有涉及缓存，也不是由浏览器插件引起的。对于它的价值： javascript get 已执行，但必须像这样声明变量：

```
// Not working
var foo = 'baz';
// Working
window.foo = 'baz'; 
```

不要问我为什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T18:48:30.213

不，开箱即用 Magento 的布局/块/`phtml`系统不执行任何 HTML 过滤和/ro 转义。

我最初的猜测是你正在编辑错误的`phtml`模板文件——也许你在错误的主题中？

第二个猜测是您正在处理缓存的块/模板，因此在缓存过期或您手动清除它之前，您的更改不会显示。

您问题中的更多上下文将帮助人们提出解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-06T18:56:54.340

今天也是同样的问题，是 HF_Defer 扩展导致的。当您遇到此问题时，在 app/etc/modules 中创建文件夹 temremove 将是一种更快的方法。然后只需将所有文件从自定义模块移动到该文件夹​​。然后将其放回 5 x 5 以查看它何时开始/停止正常工作。

# php - 多选下拉

> ID：12180413
> 
> 赞同：0
> 
> 时间：2012-08-29T14:34:45.020
> 
> 标签：php, drop-down-menu, multi-select

我有一个 PHP 问题。我正在尝试更改我的一个合作伙伴编写的一些代码（从那时起他已经离开并且无法联系到），但我对 PHP 不是很熟悉。我相信这个问题会相当简单，但我不知道从哪里开始。目前有一个下拉菜单允许您只选择一个选项。我相信该过程中涉及的代码在这里：

```
<select id='List' style='width:75px' onchange='displayEx(this);'>
    <option value="0">list</option>

    <?php
    foreach ($LIST as $list)
    {
        echo "<option value='$list'>$list</option>";
    }
    echo "</select>";
    ?>   
<select id='selectd' style='width:75px'>
        <option value="0">X</option>
        </select>
        <input id="addTest" type="button" value="Add" onclick="addTest();"/>
        <p id='error_display' style="height:10px;"></p>
        <div>
            <?php
                $i = 1;
                foreach ($Groups as $G)
                {
                echo "<div style='float:left;width:30%;height:100px;display:inline'><p id='Group $i' title='$G'>Group $G:</p><p id='display_Group_$i'>0/94</p><input id=\"get_Group_$i\" type=\"button\" value=\"Create\" onclick=\"createSheet($i);\" disabled = \"true\" style=\" vertical-align:bottom; display:inline;\"/></div>";
                $i++;
                }
            ?>
        </div> 
```

但我不确定如何处理它。我在想这样的事情......

```
foreach ($select as $value)  
{  
    echo '<option';  
    if (isset($_POST['select']) && $_POST['select'] == $value)  
    SOMETHING HERE
} 
```

不过我不知道。其他人的代码有时会非常混乱（尤其是在您不擅长的语言中）。为了我的理智，我希望有人能帮我解决这个问题，但即使有人能帮我翻译当前的代码，我也会非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:37:53.240

对选择标签使用多选

```
 <select multiple="multiple">
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="mercedes">Mercedes</option>
  <option value="audi">Audi</option>
</select> 
```

# python - Python空行和文本标记

> ID：12180414
> 
> 赞同：0
> 
> 时间：2012-08-29T14:34:50.210
> 
> 标签：python, python-3.x

我正在使用以下代码来拾取 10 个随机行，但它也是拾取空行。我只是想在选择时排除空行。并且还想用 * 作为前缀标记选定的行。所以下次这段代码不会拾取任何以 * 开头的行。

```
import random  
task = 10  
while ( task >= 0 ):  
    lines = open('master.txt').read().splitlines()
    myline =random.choice(lines)    
    print(myline)  
    task -= 1  
print ('Done!') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:44:36.740

摆脱空行：

```
with open(yourfile) as f:
    lines = [ line for line in f if line.strip() ] 
```

您可以修改`if`列表理解部分中的内容以适合您的喜好（`if line.strip() and not line.startswith('*')`例如）

现在洗牌并取 10：

```
random.shuffle(lines)
random_lines = lines[:10] 
```

现在您可以通过以下方式删除您选择的行`shuffle`：

```
lines = lines[10:] 
```

而不是用`*`...标记

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:41:01.283

```
import random
lines = [line
           for line in open('master.txt').read().splitlines()
           if line is not '']
random.shuffle(lines)

for line in lines[:10]:
    print line
print "Done!" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T14:42:58.853

```
import random

task = 10
with open('master.txt') as input:
    lines = input.readlines()
    lines = [line.strip() for line in lines] ## Strip newlines
    lines = [line for line in lines if line]  ## Remove blank
    selected = random.sample(lines, task)

for line in selected:
    print(line)

print('Done!') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T14:52:00.370

下面将随机选择10行非空且未标记的行。打印出所选行并更新文件，以便标记所选行（以 开头`*`）并删除空行。

```
import random
num_lines = 10

# read the contents of your file into a list
with open('master.txt', 'r') as f:
  lines = [L for L in f if L.strip()]  # store non-empty lines

# get the line numbers of lines that are not marked
candidates = [i for i, L in enumerate(lines) if not L.startswith("*")] 

# if there are too few candidates, simply select all
if len(candidates) > num_lines:
  selected = random.sample(candidates, num_lines) 
else:
  selected = candidates  # choose all

# print the lines that were selected
print "".join(lines[i] for i in selected)

# Mark selected lines in original content
for i in selected:
  lines[i] = "*%s" % lines[i]  # prepend "*" to selected lines

# overwrite the file with modified content
with open('master.txt', 'w') as f:
  f.write("".join(lines)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T14:50:02.843

```
import random  
task = 10 

#read the lines just once, dont read them again and again
lines = filter(lambda x: x, open('master.txt').read().splitlines())
while ( task >= 0 and len(lines) ):  
    myline = random.choice(lines)
    #don't mark the line with *, just remove it from the list
    lines.remove(myline)    
    print(myline)  
    task -= 1  
print ('Done!') 
```

# node.js - 在 node-mongodb.native 中使用 Mongos 的 ReadPreference 出错

> ID：12180418
> 
> 赞同：0
> 
> 时间：2012-08-29T14:34:52.913
> 
> 标签：node.js, mongodb, node-mongodb-native

在将 MongoS 用于 node-mongodb-native 时，我遇到了 GridFS 的问题。我在github中打开了一个问题，但这实际上只是问题的一个症状。未捕获的错误抱怨未设置 ReadPreference。我找不到使用 GridFS 设置 ReadPreference 的好例子。有人在分片设置中使用过 mongo 驱动程序吗？

[https://github.com/mongodb/node-mongodb-native/issues/686](https://github.com/mongodb/node-mongodb-native/issues/686)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:43:30.393

[https://github.com/mongodb/node-mongodb-native/issues/686](https://github.com/mongodb/node-mongodb-native/issues/686)

他们在 1.1.5 驱动程序更新中修复了这个问题。

# css - 从 NetBeans 中的语法检查中排除文件

> ID：12180420
> 
> 赞同：15
> 
> 时间：2012-08-29T14:34:55.843
> 
> 标签：css, netbeans

我正在使用 netbeans 开发一个网站，我想知道以下几点：

如何禁用特定文件的错误检查？我正在使用一些 CSS hack 和一些 Netbeans 似乎不支持的 CSS3 东西，它在“操作项”中显示了数百个错误和警告。所以我想知道是否有办法从 Netbeans 调试中删除这些特定文件，以便我可以过度查看真正的错误和警告？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T10:09:15.567

这个问题是在 netbeans 论坛上提出[的](http://forums.netbeans.org/ntopic31161.html)。因此，出现了一个错误并且似乎已经修复，可以在[此处](http://netbeans.org/bugzilla/show_bug.cgi?id=190181)找到详细信息。该修复程序说：

> 现在有一个编辑器提示允许禁用有关未知属性的警告。设置是全局的。一旦您禁用了至少一个属性检查，在每个包含禁用属性的文件的第一行都会有一个新提示，您可以使用它来重新启用检查。

如果您对 netbeans 中的提示不太熟悉，这表明 netbeans 不喜欢的属性将带有黄色下划线，您应该能够单击它们，按 alt+enter，然后选择禁用警告的选项出现（如果您熟悉，我道歉，我只是添加了一个详细的答案）

编辑-被误解的问题：

要更改“操作项”窗口中显示的内容，您可以应用过滤器和/或更改窗口范围。

要更改范围，请在“操作项”窗口中右键单击并单击范围，然后选择该选项。如果正在生成的不需要的警告发生在与您尝试调试的文件或项目不同的文件或项目中，请使用此选项。

您还可以对窗口应用过滤器以消除具有共同属性的特定消息，例如，如果假设您所有不需要的警告都包含字符串“CSSHackWarning”，那么您可以过滤掉所有包含该字符串的警告消息，以免显示。

这可以通过右键单击 Action Items 窗口并选择 filter->edit... 然后创建一个新过滤器并单击关键字选项卡来完成。有关更多详细信息，请参阅[此处](http://wiki.netbeans.org/TS_70_Tasklist#Test_suite%3a_.22Filters.22)。（注意：在 NetBeans 7.2 之前，Action Items 窗口被称为任务窗口）

很抱歉造成混乱，希望这更符合您的要求。

# git - 我替换了目录中旧的 git 版本文件，我该怎么办？

> ID：12180421
> 
> 赞同：0
> 
> 时间：2012-08-29T14:34:56.090
> 
> 标签：git, github

我创建了受版本控制的 _bak 目录（我将其重命名为 project_bak），然后我创建了新目录并将受 git 版本控制的文件复制到同一位置的新目录中。

但是如果我打开 gitx，我看不到目录有任何变化（我在文件中做了同样的变化）。

我认为 git 有一些我随项目移动的隐藏文件，但我无法在 Mac os 上显示它们。请问怎么解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:27:00.207

git 存储库位于`.git`项目根文件夹 ( `project_bak/.git`) 的隐藏文件夹中。您可以通过终端中的路径正常访问此文件夹，也可以在 Finder 中通过按`Command`+ `Shift`+`G`并输入完整路径来打开它。

# sharepoint - Sharepoint 2010 设备

> ID：12180423
> 
> 赞同：0
> 
> 时间：2012-08-29T14:35:02.383
> 
> 标签：sharepoint

如何获取访问共享点应用程序的移动设备类型？是否有自定义代码来检测我们正在使用黑莓、android 或 iphone 访问共享点站点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T21:48:58.303

SharePoint 无法告诉您正在访问您的网站的设备，但它可以提供用户代理。如果您在运行时需要用户代理，您应该能够使用 System.Web.HttpRequest.UserAgent 属性。如果您出于 javascript 原因需要用户代理，则可以使用 navigator.userAgent。

# javascript - 如何使用 javascript 使用循环动态并排附加 Divs？

> ID：12180428
> 
> 赞同：2
> 
> 时间：2012-08-29T14:35:14.063
> 
> 标签：javascript

您能否帮助如何使用 javascript 使用循环并排附加 Div，这里是两列和 6 行。我尝试了以下代码，

```
for(var i=0;i<2;i++) {
    for(var j=0;j<5;j++) {
        document.write('<div style="width:200px;height=200px;border:1px solid red;float:left" />')+"\n";    
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:47:36.443

html:

```
​&lt;div id="table"></div>​ 
```

js：

```
var newdiv;
for(var i=0;i<2;i++) {
    for(var j=0;j<6;j++) {
        newdiv=document.createElement("div");
        newdiv.style.width = '80px';
        newdiv.style.height = '80px';
        newdiv.style.border = '1px solid red';
        newdiv.style.float = 'left';
        document.getElementById('table').appendChild(newdiv);    
    }
    newdiv=document.createElement("div");
    newdiv.style.clear = 'both';
    document.getElementById('table').appendChild(newdiv);
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:38:15.703

我想你`"\n"`在错误的地方添加了。

```
 document.write('<div style="width:200px;height=200px;border:1px solid red;float:left" />'+"\n"); 
```

**测试代码**： -

```
function CreateDiv()
{
for(var i=0;i<2;i++) {
        for(var j=0;j<5;j++) {
            document.write('<div style="width:200px;height=200px;border:1px solid red;float:left" >Hi</div>');  
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T14:52:19.637

试试这个

[http://jsfiddle.net/DsqMj/4/](http://jsfiddle.net/DsqMj/4/)

HTML

```
<div id="table"></div> 
```

CSS

```
#table .box {
width: 100px;
height: 30px;
background-color: #ccc;
}
#table .box:nth-child(even) {
background-color: #eee;
}
#table .col {
width:100px;
border: 1px solid #aaa;
float: left;
} 
```

JS

```
makeTable();

function makeTable() {
var table = document.getElementById("table");
var row ='';

for(var i=0;i<2;i++) 
{    
    for(var j=0;j<6;j++) 
    {
        row += "<div class='box'></div>";
    }
    table.innerHTML += "<div class='col'>"+row+"</div>";
    row ='';
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T15:10:13.880

它似乎工作，看看：http: [//jsfiddle.net/fCSTp/1/](http://jsfiddle.net/fCSTp/1/)

```
var i = 0, div,
    node = document.createElement("div"),
    main = document.getElementById("main");

while (6 > i++) {
    div = node.cloneNode(true);
    div.innerHTML = i;
    div.style.cssText = "width:200px;height:20px;float:left;border:1px solid red";
    main.appendChild(div);
}

delete node;
delete div; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-29T14:40:34.023

`<br style="clear:both"/>`在每行的末尾插入 a ：

```
for(var i=0;i<2;i++) {
    for(var j=0;j<5;j++) {
        document.write('<div style="width:200px;height=200px;border:1px solid red;float:left" />')+"\n";    
    }
    document.write('<br style="clear:both"/>');
} 
```

# java - 如何在 Java 排序期间删除前导“the”？

> ID：12180431
> 
> 赞同：0
> 
> 时间：2012-08-29T14:35:26.043
> 
> 标签：java, android

`ListView`我有一个想要排序的 Android 。目前我正在使用`Collections.sort`which 按字母顺序排列就好了。

但是，我想更进一步，移动领先的“the”。是否有内置的 Java 或 Android 方法可以处理这个问题？

如果没有，我需要什么代码？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T14:37:05.533

与在比较字符串之前去除前导s`Collections.sort()`的自定义一起使用。`Comparator<String>``"The"`

```
List<String> foo = /* init */;

Comparator<String> ignoreLeadingThe = new Comparator<String>() {
    @Override public int compare(String a, String b) {
        // TODO check for nulls?

        // (?i) makes the match case-insensitive
        a = a.replaceAll("(?i)^the\\s+", "");
        b = b.replaceAll("(?i)^the\\s+", "");

        // TODO use compareToIgnoreCase() instead?
        return a.compareTo(b);
    }
};

Collections.sort(foo, ignoreLeadingThe); 
```

演示：http: [//ideone.com/6hogi](http://ideone.com/6hogi)

# ruby-on-rails - wicked_pdf_image_tag 给定未定义的图像路径名

> ID：12180433
> 
> 赞同：8
> 
> 时间：2012-08-29T14:35:40.290
> 
> 标签：ruby-on-rails, wicked-pdf

嗨，我在生成 pdf 时保存图像后使用 wicked_pdf 生成图像，并使用此标签显示这样的图像

```
 <%= wicked_pdf_image_tag(@image.snap.url(:original)) unless @image.blank? %> 
```

它给了我这个未知的错误

```
 ActionView::Template::Error (undefined method `pathname' for nil:NilClass): 
```

而 puts @image.inspect 在下面给我正确的路径

```
 "/system/snaps/7/original/flake.jpg" 
```

任何人都可以帮助

谢谢....

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T07:10:09.797

我也面临同样的问题。在`app/helpers/application_helper.rb`文件中写入以下代码行：

```
module ApplicationHelper
  def wicked_pdf_image_tag_for_public(img, options={})
    if img[0] == "/"
      new_image = img.slice(1..-1)
      image_tag "file://#{Rails.root.join('public', new_image)}", options
    else
      image_tag "file://#{Rails.root.join('public', 'images', img)}", options
    end
  end
end 
```

在要添加图像的视图页面中写入：

```
<%= wicked_pdf_image_tag_for_public @logo.url(:small) %> 
```

@logo.url 给出由回形针存储的公共图像路径。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T12:35:34.563

看起来这个错误来自 wicked_pdf 中的这一行：

[https://github.com/mileszs/wicked_pdf/blob/master/lib/wicked_pdf_helper.rb#L59](https://github.com/mileszs/wicked_pdf/blob/master/lib/wicked_pdf_helper.rb#L59)

find_asset(source) 出于某种原因对您来说为零。也许您需要将一些东西与您的资产管道整合在一起。我承认我还没有很多经验。

但是，您可以看到 wicked_pdf_image_tag 实际上是一个非常简单的助手：

[https://github.com/mileszs/wicked_pdf/blob/master/lib/wicked_pdf_helper.rb#L14](https://github.com/mileszs/wicked_pdf/blob/master/lib/wicked_pdf_helper.rb#L14)

如果包含的内容不适合您，您可以轻松编写自己的内容并将其放入 application_helper.rb 中。它正在做的重要事情是为您的图像使用 file:// 路径，因为如果 wkhtmltopdf 在生成 PDF 时不必调用网络流量，它将渲染得更快。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T09:44:27.523

我遇到了同样的问题，事实证明 WicketPdf 帮助程序用于您的应用程序提供的资产，而不是上传的附件。您唯一需要做的就是添加主机。您可以通过`URI.join`在图像上执行此操作-url 结合`request.url`..

这是一个适用于 PDF 生成的示例：

```
= image_tag( URI.join( request.url, model.attachment.url ) ) 
```

# jquery - 无法让基本的 SP2010 模式工作

> ID：12180436
> 
> 赞同：1
> 
> 时间：2012-08-29T14:35:50.490
> 
> 标签：jquery, sharepoint, sharepoint-2010, modal-dialog

我正在将一个项目从 SP2007 迁移到 SP2010。我想让一个模式弹出窗口工作，从一个 aspx 页面打开一个列表的新项目窗口。我无法让模态在最基本的示例中工作，我无法弄清楚发生了什么。

如果我使用开发人员工具并启用脚本调试，我会不断收到以下错误：

```
SCRIPT5022: Sys.ArgumentTypeException: Object of type 'SP.UI.ApplicationPages.CalendarSelector' cannot be converted to type 'Sys.IDisposable'. 
```

这是一个代码片段：

```
<SharePoint:ScriptLink ID="ScriptLink3" Language="javascript" Name="../ProjectFolder/jquery/jquery-1.7.2.min.js" Defer="false" runat="server" />
<SharePoint:ScriptLink ID="ScriptLink1" Language="javascript" Name="../ProjectFolder/jquery/jquery-ui-1.8.12.custom.min.js" Defer="false" runat="server" />
<SharePoint:ScriptLink ID="ScriptLink4" Language="javascript" Name="../MicrosoftAjax.js" Defer="false" runat="server" />
<SharePoint:ScriptLink ID="ScriptLink5" Language="javascript" Name="../SP.debug.js" Defer="false" runat="server" />
<SharePoint:ScriptLink ID="ScriptLink6" Language="javascript" Name="../SP.UI.Dialog.js" Defer="false" runat="server" />
<script type="text/javascript">
    function OpenInDialog(title, url) {
        var options = SP.UI.$create_DialogOptions();
        options.title = title;
        options.width = 680;
        options.height = 500;
        options.url = url;
        options.dialogReturnValueCallback = Function.createDelegate(null, ConfirmationCallback);
        SP.UI.ModalDialog.showModalDialog(options);
    }

    function ConfirmationCallback(dialogResult, returnValue) {
        if (dialogResult == SP.UI.DialogResult.OK) {

        }
    }

    OpenInDialog('test', 'http://portal.dev.loc/sites/TestSite/_layouts/Test.aspx');

</script> 
```

我一直认为问题与 SP.UI.Dialog.js 有关，但我的参考是正确的，我不知道为什么它不起作用。这让我发疯了。任何线索我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T09:33:20.303

我最近一直在做类似的事情，所以为了进一步澄清代码，请尝试以下方法：

```
 function OpenInDialog(title, url) {
            var options = {
                title: title,
                width: 680,
                height: 500,
                url: url,
                dialogReturnValueCallback: ConfirmationCallback
            };

            SP.UI.ModalDialog.showModalDialog(options);
        }

    function ConfirmationCallback(dialogResult, returnValue) {
        if (dialogResult == SP.UI.DialogResult.OK) {
            // TODO
        }
    }

    OpenInDialog('test', 'http://portal.dev.loc/sites/TestSite/_layouts/Test.aspx'); 
```

希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:52:44.647

问题是通过将方法调用放在 $(document).ready 中没有解决的竞争条件，我之前尝试过（不知道为什么我在这个例子中没有它）。

我试图只做一个简单的模态，但它太简单了。尝试在打开页面时立即打开模式不起作用。将完全相同的方法调用移动到按钮上效果很好。没有任何 Scriptlinks 是必需的。SharePoint 已经在页面上提供了所有 jquery 库。

我知道这将是一件愚蠢的事情。感谢 Vardhaman，带领我朝着正确的方向前进。

此外，Vardhaman 的回答在这里奏效： [https ://sharepoint.stackexchange.com/questions/44548/cant-get-a-basic-modal-to-work-on-2010/44687#comment41263_44687](https://sharepoint.stackexchange.com/questions/44548/cant-get-a-basic-modal-to-work-on-2010/44687#comment41263_44687)

ExecuteOrDelayUntilScriptLoaded(function(){

```
OpenInDialog('test', 'http://portal.dev.loc/sites/TestSite/_layouts/Test.aspx'); 
```

},"sp.ui.dialog.js");

# php - 在 PHP Header 之前调用 javascript 函数

> ID：12180437
> 
> 赞同：0
> 
> 时间：2012-08-29T14:35:52.843
> 
> 标签：php, javascript

我正在使用此代码调用 javascript 函数，然后重定向 PHP 页面。

```
<script type='text/javascript'>

mixpanel.track('login: Login ', {'page name' : document.title, 'url' : window.location.pathname});
</script>;  

<?php
        header("Location:".$domain_name."/services.htm");

?> 
```

但是这段代码不起作用，如果我不重定向，那么 js 函数可以正常工作。

我也尝试过`ob_start();`，`ob_end_flush();` 但没有任何效果。如何在重定向之前使用 JS 函数。我是 JavaScript 和 PHP 标头函数的新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T14:39:07.280

PHP 在*服务器*上运行，而 JavaScript 在*浏览器*中运行。你不能像那样把它们混合在一起。

您需要做的是使用 JavaScript 而不是 PHP 进行重定向。

```
<script type='text/javascript'>
    mixpanel.track('login: Login ', {'page name' : document.title, 'url' : window.location.pathname});
    window.location = '<?=$domain_name?>/services.htm';
</script> 
```

**更新**：重定向在`mixpanel.track`完成之前触发。您需要将一个函数传递给回调^([docs](https://mixpanel.com/docs/integration-libraries/javascript-full-api#track))，以便它在完成后运行。

```
<script type='text/javascript'>
    mixpanel.track('login: Login ', {
        'page name': document.title,
        'url': window.location.pathname
    }, function(){
        window.location = '<?=$domain_name?>/services.htm';
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:38:36.153

您也应该使用 javascript 转发您的用户。就像是`window.location = '<?php echo $domain_name ?>/services.htm';`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-29T14:37:51.867

使用函数后，您可以使用 Javascript 本身进行重定向：

```
window.location = 'http://www.example.com'; 
```

或者，您可以使用基于[Ajax](http://www.w3schools.com/ajax/default.asp)的解决方案；但它必须与 相结合`window.location`，其中位置由 ajax 调用的 php 脚本给出。

# asp.net - 浏览器的缓存是否考虑了 URL 中的参数？（ASPX 页面）

> ID：12180444
> 
> 赞同：7
> 
> 时间：2012-08-29T14:36:24.533
> 
> 标签：asp.net, caching, iis, browser, browser-cache

我想在浏览器中缓存一个特定的 aspx 页面。我有正当理由将其作为 ASPX 页面，我需要在浏览器上进行缓存。

现在，在服务器缓存上，我可以通过参数改变缓存。浏览器在缓存页面响应时是否也考虑参数？

例如，以下两个响应是否会**在浏览器上**保存为两个不同的缓存项？ [http://mypage.com/page.aspx?Param=1](http://mypage.com/page.aspx?Param=1) 和 [http://mypage.com/page.aspx?Param=2](http://mypage.com/page.aspx?Param=2)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T14:39:46.990

是的，浏览器会将这些 url 视为 2 个不同的资源，因此它将分别缓存它们（以防缓存标头指示这样做）。

您可以使用[Fiddler](http://www.fiddler2.com/fiddler2/)轻松测试它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T14:41:23.797

编辑 2： [如何在缓存资源时指示浏览器忽略 GET 参数](https://stackoverflow.com/questions/1877339/how-to-instruct-browsers-to-ignore-get-parameters-when-caching-a-resource)描述了类似的问题，如果您想将这两个页面缓存为同一个页面，可能会很困难。如果您希望它们不同，则应设置为默认行为，但请确保您的

```
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="CACHE"> 
```

标签设置为明确告诉浏览器执行此操作。

原答案：

如果你愿意，你可以选择。例如，如果您希望它们以不同的方式缓存，请使用 varyByParam="param" 设置输出缓存：

```
<%@ OutputCache Duration="60" VaryByParam="Param" %> 
```

如果您不使用参数变化选项，这两个页面将缓存相同。如果你想改变多个参数，用分号分隔它们。如果您想根据所有参数进行更改，请使用 * 通配符：

```
<%@ OutputCache Duration="60" VaryByParam="*" %> 
```

有关输出缓存的更多信息：http: [//msdn.microsoft.com/en-us/library/y96218s9.aspx](http://msdn.microsoft.com/en-us/library/y96218s9.aspx)

编辑：只需重新阅读您的问题。这将导致服务器端缓存，而不是浏览器。

# css - 仅在 css3 中显示元素？

> ID：12180446
> 
> 赞同：0
> 
> 时间：2012-08-29T14:36:38.043
> 
> 标签：css

我正在创建一个 css3-heavy 网站，并希望为使用旧浏览器的人提供一些信息，以及内容的替代版本。我想知道我是否可以做类似的事情：

```
#old {display:-webkit-none;}
#new {display:none; display:-webkit-block;} 
```

这样#old div 将仅在非 css3 兼容的浏览器中可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:45:33.183

嗯，每个浏览器的 CSS3 兼容性是不同的。这不是非黑即白的事情，有些浏览器支持 CSS3，有些不支持。大多数浏览器至少实现了 CSS3 的某些功能，但比其他浏览器更多，而且我相当肯定没有一个支持 CSS3 的所有功能。您可以检查哪些浏览器支持哪些功能，如下所示： [http ://caniuse.com/](http://caniuse.com/)

您可以使用 Modernizr [http://modernizr.com/](http://modernizr.com/)根据浏览器支持的 CSS3 功能使用不同的样式。

例如，如果您想在不支持边框半径的浏览器上显示消息：

```
.no-borderradius #old
{
    display: block;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:38:58.823

您可以使用**IE 条件注释**。像这样写：

```
<!--[if IE]>
  <style>
    #old {display:none;}
  </style>
<![endif]--> 
```

更简短的阅读这个[http://www.quirksmode.org/css/condcom.html](http://www.quirksmode.org/css/condcom.html)

# iphone - UISearchBar inputAccessoryView 的问题

> ID：12180457
> 
> 赞同：2
> 
> 时间：2012-08-29T14:37:05.220
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我创建了一个 UISearchBar，我必须在 inputAccessoryView 中插入一个视图，但编译器给了我这个错误：

> 分配给只读属性

为什么会这样？：

```
@property(nonatomic,retain)IBOutlet UISearchBar *searchbar;

@property (retain, nonatomic) IBOutlet UIView *keyView;

 self.searchbar.inputAccessoryView = keyView; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T14:45:15.903

SearchBars 里面有一个 UITextView，你可以用稍微脏一点的方式来寻找它，并将 inputAccessoryView 设置为它。我不确定这是否可行，但值得一试

```
UITextField *searchBarField = nil;
for (UIView *subView in searchBar.subviews) {
    if ([subView conformsToProtocol:@protocol(UITextInputTraits)]) {
        searchBarField = (UITextField *)subView;
        searchBarField.inputAccessoryView = ...
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:43:48.207

发生这种情况，因为这个属性是只读的，你不能简单地分配一个“UIView”。阅读[UISearchBar inputAccessoryView](https://stackoverflow.com/questions/7058133/uisearchbar-inputaccessoryview)以获取有关如何访问此属性的建议。您必须对搜索栏进行子类化。

# python - 如何删除或推迟 AMQP 队列中的消息

> ID：12180461
> 
> 赞同：4
> 
> 时间：2012-08-29T14:37:11.190
> 
> 标签：python, twisted, rabbitmq, amqp

我正在使用 txamqp python 库连接到 AMQP 代理（RabbitMQ），并且我有一个带有以下回调的消费者：

```
@defer.inlineCallbacks
def message_callback(self, message, queue, chan):
    """This callback is a queue listener
    it is called whenever a message was consumed from queue
    c.f. test_amqp.ConsumeTestCase for use cases
    """

    # The callback should be redefined here to keep getting further messages from queue
    queue.get().addCallback(self.message_callback, queue, chan).addErrback(self.message_errback)        

    print " [x] Received a valid message: [%r]" % (message.content.body,)

    yield self.smpp.sendDataRequest(SubmitSmPDU)

    # ACK the message in queue, this will remove it from the queue
    chan.basic_ack(message.delivery_tag) 
```

当“确认”一条消息时，它将从队列中删除（确认？），但是当消息没有“确认”时会发生什么？我需要一个“重试”机制，我可以推迟消息稍后再次回调，并跟踪它重试了多少次。

以及如何从队列中列出/删除消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T22:24:36.163

RabbitMQ 有一个不错的[管理插件](http://www.rabbitmq.com/management.html)，但是它甚至不允许从队列中删除消息。

您基本上必须编写自己的应用程序，或者找出[这些第 3 方管理应用程序](http://www.rabbitmq.com/how.html#management)中的哪些可以删除消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:08:18.940

已解决，为了重试队列中的消息，必须拒绝带有“重试”标志的消息，它将重新排入队列。

如果我用计时器拒绝它（callLater in twisted），则排队的消息将被推迟到我想要的任何时间。

# php - 将 `arr2` 中存在的 `arr1` 中的所有条目复制到 `arr3`

> ID：12180466
> 
> 赞同：0
> 
> 时间：2012-08-29T14:37:37.190
> 
> 标签：php, arrays

从存在的所有条目中复制到`arr3`所有这些条目的最简单方法是什么？不使用 FOR 循环是否可以做到这一点？`arr1``arr2`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T14:38:32.290

您可以使用以下方法执行此操作[`array_intersect`](http://php.net/array_intersect)：

```
$arr3 = array_intersect($arr1, $arr2); 
```

或者，如果`$arr3`有您希望保留的项目，您可以[合并](http://php.net/array_merge)旧数组和函数调用的结果：

```
$arr3 = array_merge($arr3, array_intersect($arr1, $arr2)); 
```

# xml - 为什么eclipse在保存时格式化我的xml文件

> ID：12180473
> 
> 赞同：1
> 
> 时间：2012-08-29T14:37:52.200
> 
> 标签：xml, eclipse, formatting

当我保存 XML 文档时，eclipse 将其格式化（很糟糕）。我想关掉它。我已经检查了分配给 ctrl+s 的快捷方式的首选项、xml 文件首选项等，但我无法找到它被配置为执行此类操作的位置。哦，如果有用的话，我还安装了 WTP 和 jboss 工具。

谁能告诉我如何阻止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T16:23:36.190

这是由于它打开的编辑器类型。它在特定的休眠 xml 编辑器中打开（我不知道如何更改它的保存操作），所以我更改为标准 XML 编辑器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T16:05:11.310

检查您是否有活动的“保存操作”：

窗口 -> 首选项 -> Java -> 编辑器 -> 保存操作

# scala - Play Framework webservice教程scala

> ID：12180475
> 
> 赞同：5
> 
> 时间：2012-08-29T14:37:55.533
> 
> 标签：scala, playframework-2.0

我对 Play 很陌生！和 scala，我正在拼命地寻找关于如何实现 web 服务的分步教程。文档很差，我找不到有用的东西。

ps：我已经完成了 playframework 网站中给出的示例，它对理解框架有很大帮助，但我对 scala 的了解是这里的一大障碍。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T13:13:38.040

好吧，我认为这就是我想要的。首先让我们假设我们想要一个返回用户信息的 RESTfull web 服务。我们创建用户类如下

```
case class User() {
  val id= 1
  val name = "john"
  val score = 8.5
} 
```

然后我们制作如下控制器

```
object Application extends Controller {

  def sum() = Action {
    val user = new User
    val json = Json.generate(user)
    Ok(json).as("application/json")
  }
} 
```

并且不要忘记为 Json 添加导入，即`import com.codahale.jerkson.Json`

对于路线，将以下行添加到您的`route`文件中：

```
GET     /sum                 controllers.Application.sum 
```

结果应该看起来像

```
{
 "id":1,
 "name":"john",
 "score":8.5
} 
```

# transparency - {OpenGL 3.3+} GL_BLEND 不起作用

> ID：12180483
> 
> 赞同：1
> 
> 时间：2012-08-29T14:38:17.093
> 
> 标签：transparency, blending

昨天我开始用 C++ + GLFW + OpenGL 3.3 + GL3W + DevIL 编写我的 2D 引擎。但我有很大的问题：/ glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 不起作用：/我已经尝试了一切！;/ 我的 glTexImage2D ：

```
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width,height, 0, GL_RGBA, IL_UNSIGNED_BYTE, ilGetData()); 
```

我的纹理（通常它有 alpha ;p）： [Texture Link](https://lhswug.sn2.livefilestore.com/y1pngL2hUxdwtHTW-yfB7NJxmLHw1QlNq8uptMJwWSpf18FA332jJ8GOzXIkpLpwmjbp5Qo1BoCLGrlGX0BzOGU5c3kEAt1340R/Player.png?psid=1)

结果 glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); : [glBlend 结果链接](https://public.sn2.livefilestore.com/y1pBc7Ajmb-pLrZEUEcLb6JBhvK1W9CYu0p3afYpbs6UbswNocemkTrPA4H5oJrs6t7FaKlB0EjX9hFU_w0kjtC7Q/result1.png?psid=1)

请帮我。

感谢帮助！

# javascript - 在这个项目中使用来自 jQuery 或 JavaScript 的选择器？

> ID：12180484
> 
> 赞同：0
> 
> 时间：2012-08-29T14:38:21.840
> 
> 标签：javascript, jquery, performance, jquery-selectors, getelementbyid

我正在制作一个包含大量元素创建和附加的项目，经过一番研究后我想出了

`$(newElement)`和`$(selector)`

比

`.createElement(newElement)`和`.getElementBy`

因为我正在做一个待办事项列表应用程序，其中将包括很多创建/附加/选择：

```
<div class="mainTaskWrapper clearfix">
    <div class="mainMarker"></div>
    <label for="task1">This is task1</label>
    <div class="holder"></div>
    <div class="subTrigger"></div>                            
    <div class="checkButton"></div>
    <div class="optTrigger"></div>
    <div class="mainOptions">
        <ul>
            <li id="mainInfo">Details</li>
            <li id="mainDivide">Divide</li>
            <li id="mainEdit">Edit</li>
            <li id="mainDelete">Delete</li>
        </ul>                               
    </div>
</div> 
```

你会建议我用什么？jQuery选择和创建方式，还是JavaScript一种？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:41:08.987

有点取决于你在做什么。在某些情况下，设置 innerHTML 是最快的（尤其是插入大块的块）。

也就是说，从开发人员的角度来看，jquery 方法确实是最可维护的。在性能成为问题之前，我可能会使用 jquery 版本，并将对 jquery 的调用包装在其他函数中，这样我可以在它发生时换掉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:41:56.123

这确实是开发人员偏好问题。

就个人而言，我发现严格使用 jQuery 选择器更容易编写和理解，并且在选择器变得更复杂时更加一致。使用本机 JavaScript 编译和渲染速度更快，但根据页面的复杂性，您实际上可能看不出任何差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T14:43:51.780

当您说“大量的创建/附加/选择”时，您到底是什么意思？

它是每秒几个，还是只是“很多”？由于代码将在客户端运行，因此每秒一个不会是什么大问题。

jQuery 将是“最佳”选择，因为可维护性是一个很大的优势，并且您使用 jQuery 编写的任何代码都可能会更清晰。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T14:44:25.450

我建议您不要一次创建那么多相同的元素。相反，将它们放置在您的 HTML 中并隐藏它（使用`display:none`），然后`.clone()`根据需要对整个块使用 jQuery。

但是：首先，摆脱这些`id=`属性。同一 ID 的页面上不能有多个元素。

# php - 返回 mySQL 结果集时创建动态下拉菜单

> ID：12180492
> 
> 赞同：0
> 
> 时间：2012-08-29T14:38:46.543
> 
> 标签：php, mysql, sql

我正在使用 5 列将结果集从 mySQL 数据库返回到表中。到目前为止，表格显示了正确的字段数据。我想知道我应该如何为每一行创建一个下拉菜单？这将是名为“状态”的第 6 列，由三个值组成，这些值将改变行的外观。另一件要提的是，“状态”不会链接到数据库。这是我当前的代码：

```
<?php
$result = mysql_query("SELECT * FROM somewhere")
or die (mysql_error());
?>
<table class="table1" >
<h4>Orders</h4>
<tr>
<th>Number</th>
<th>Date</th>
<th>Ordered By</th>
<th>Supplier</th>
<th>Price</th>
<th>Status</th>
</tr>
<?php
while($row=mysql_fetch_array($result)){
echo "</td><td>";
echo $row['Orderno'];
echo "</td><td>";
echo $row['Orderdate'];
echo "</td><td>";
echo $row['Orderedby'];
echo "</td><td>";
echo $row['Supplier'];
echo "</td><td>";
echo $row['totalprice'];
echo "</td><td>";
echo $row['Status'];
echo "</td></tr>";
}
echo "</table>";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:42:49.710

```
<select>
    <?php
    while($row=mysql_fetch_array($result)){
     ?>
     <option value = "<?php echo $row['Orderno']?>">
          <?php $row['other']?>
     </option>
     <?php
     }
     ?>
</select> 
```

这只是样本。您可以根据自己的要求使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:44:26.247

像这样。请注意，`$options`它们在循环之外。我还固定了`<h4>`标签的位置 - 它之前在`<table>`标签内。

```
<?php

function create_select($name, $options = array(), $selected = null)
{
    $html = '<select name="'.$name.'">';
    foreach ($options as $k => $v)
    {
        $html .= '<option value="'.$k.'"';
        if ($k == $selected)
        {
            $html .= ' selected';
        }

        $html .= '>'.$v.'</option>';
    }

            $html .= '</select>';

    return $html;
}

$result = mysql_query("SELECT * FROM somewhere")
or die (mysql_error());
?>
<h4>Orders</h4>
<table class="table1" >
    <tr>
        <th>Number</th>
        <th>Date</th>
        <th>Ordered By</th>
        <th>Supplier</th>
        <th>Price</th>
        <th>Status</th>
    </tr>
<?php
$options = array(
    'despatched' => 'Despatched',
    'pending' => 'Pending'
    // etc...
);

while($row=mysql_fetch_array($result))
{
    echo "</td><td>";
    echo $row['Orderno'];
    echo "</td><td>";
    echo $row['Orderdate'];
    echo "</td><td>";
    echo $row['Orderedby'];
    echo "</td><td>";
    echo $row['Supplier'];
    echo "</td><td>";
    echo $row['totalprice'];
    echo "</td><td>";
    echo create_select('status_'.$row['id'], $options, $row['Status']);
    echo "</td></tr>";
}
echo "</table>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T14:45:26.413

```
<?php
    $result = mysql_query("SELECT * FROM somewhere")
    or die (mysql_error());
    ?>
    <h4>Orders</h4>
    <table class="table1" >
        <tr>
        <th>Number</th>
        <th>Date</th>
        <th>Ordered By</th>
        <th>Supplier</th>
        <th>Price</th>
        <th>Status</th>
    </tr>
    <?php
    while($row=mysql_fetch_array($result)){
        echo "</td><td>";
        echo $row['Orderno'];
        echo "</td><td>";
        echo $row['Orderdate'];
        echo "</td><td>";
        echo $row['Orderedby'];
        echo "</td><td>";
        echo $row['Supplier'];
        echo "</td><td>";
        echo $row['totalprice'];
        echo "</td><td>";
        echo '  <select id="'.$row['Orderno'].'" onchange="myJSFunction(this)">
                    <option>Example</option>
                    <option>Example 2</option>
                </select>';
        echo "</td></tr>";
    }
    echo "</table>";
?> 
```

然后编写一个 JS 函数 myJSFunction 来处理 change 事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-04T21:14:44.067

您还可以使用：

```
<select class="form-control" name="job_sector" id="job_sector">
            <?php
                $num_results = mysqli_num_rows($result);
                for ($i=0;$i<$num_results;$i++) {
                  $row = mysqli_fetch_array($result);
                  $name = $row['job_title'];
                  echo '<option value="' .$name. '">' .$name. '</option>';
                  }
            ?> 
```

# spring - 从静态方法调用 AOPContext.currentProxy()

> ID：12180506
> 
> 赞同：0
> 
> 时间：2012-08-29T14:39:18.387
> 
> 标签：spring, spring-mvc, spring-aop

我在 @service 类实现中使用 Spring 的 AOPContext.currentProxy() 。但是，我在静态方法中使用它，我做了类似的事情

```
public static void addCustomer() {
    //....

    ((CustomerService) AopContext.currentProxy()).addCustomer();

    //... 
```

但是，我得到了错误——“找不到代理”将暴露代理设置为真。

使用静态方法是这种错误的原因吗？

注意：“ *addCustomer* ”方法也是静态的

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T11:32:41.953

代理配置是在实例创建时注入的。假设使用此代理创建的实例，您正在调用方法 AOP 适用于该方法。假设没有代理实例或使用类名（在静态的情况下）您调用的方法是直接调用代理配置未注入实例，因此 AOP 不适用于该方法调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:08:05.997

我不确定你想做什么，但你根本不能这样做。

方法的调用`static`在编译时被解析，因此它们不会受到基于代理的 AOP 的影响。换句话说：

*   `AopContext.currentProxy()`在静态方法内部没有意义（除非您想获得一个代理来封闭对某些实例方法的调用），因为静态方法的调用没有被代理
*   在返回的实例上调用静态方法`AopContext.currentProxy()`没有意义，因为它是在编译时使用静态类型的表达式解析的，即它编译为`CustomerService.addCustomer()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T15:02:34.430

您的配置是否包括类似的内容`<aop:config expose-proxy="true" />`？

# dom - 使用 PhantomJS 操作 DOM

> ID：12180508
> 
> 赞同：9
> 
> 时间：2012-08-29T14:39:23.127
> 
> 标签：dom, phantomjs

我正在使用 PhantomJS 从任意 URL 创建屏幕截图。在截取屏幕截图之前，我想操作页面 DOM 以删除所有下拉菜单，因为 PhantomJS 将它们错误地呈现在页面的左上角（一个已知的 Phantom[问题](http://code.google.com/p/phantomjs/issues/detail?id=601)。）

我有一个简单的 DOM 脚本来执行此操作：

```
 var selects = document.getElementsByTagName('select');

    for (var i=0; i < selects.length; i++) {
        document.getElementsByTagName('select')[i].style.visibility="hidden";
    } 
```

这已经过测试并且可以作为独立的 Javascript 正常工作。但是，它在我用来收集屏幕截图的 PhantomJS 代码中不起作用（显示的最后一部分）：

```
 page.open(address, function (status) {

    if (status !== 'success') {
        console.log('Unable to load the address!');
    } else {
        window.setTimeout(function () {

            var selects = document.getElementsByTagName('select');

            for (var i=0; i < selects.length; i++) {
                document.getElementsByTagName('select')[i].style.visibility="hidden";
            }

            page.render(output);

            phantom.exit();

        }, 200);
    }
}); 
```

某些页面仍然在错误的位置呈现选择框。我很感激帮助解决原始 PhantomJS 渲染错误或隐藏 DOM 中的下拉菜单。谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-01T04:30:09.267

在正确的上下文中运行它，即在带有`page.evaluate`. [PhantomJS 包含](https://github.com/ariya/phantomjs/tree/master/examples)许多示例来证明这一点，例如[useragent.js](https://github.com/ariya/phantomjs/blob/master/examples/useragent.js)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T17:44:02.537

这段代码不起作用？我在 for 循环中使用了缓存的选择变量，而不是从 DOM 中重新选择元素来提高性能。

```
var selects = document.getElementsByTagName('select'); 
for (var i=0; i < selects.length; i++) { 
   selects[i].style.visibility="hidden"; 
} 
```

# android - 在具有无效参数的根电话上执行过程

> ID：12180510
> 
> 赞同：0
> 
> 时间：2012-08-29T14:39:25.670
> 
> 标签：android, unix, process, terminal, busybox

假设：

```
Runtime runtime = Runtime.getRuntime();
Process process = runtime.exec(SU);
DataOutputStream processStream = new DataOutputStream(process.getOutputStream());
processStream.writeChars("cat /qwerty");
processStream.writeChars(EXIT);
processStream.flush();

int status = process.waitFor();

Log.d("EXIT STATUS", String.valueOf(status)); 
```

`process.waitFor();`导致当前线程永远等待。我想问题出在那个无效的命令上（我是故意这样做的）。但是我该如何处理这种情况呢？

**忙箱 1.17.1**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:59:15.200

当您使用 writeChars 发送命令时，它们都在 shell 中的同一行上，并且我认为从未真正执行过。您需要添加换行符以使 shell 执行。试试这个：

```
Runtime runtime = Runtime.getRuntime();
Process process = runtime.exec(SU);
DataOutputStream processStream = new DataOutputStream(process.getOutputStream());
processStream.writeChars("cat /qwerty\n");
processStream.writeChars("exit \n");
processStream.flush();

int status = process.waitFor();

Log.d("EXIT STATUS", String.valueOf(status)); 
```

# c# - 从 C# 中的控制台应用程序退出

> ID：12180512
> 
> 赞同：9
> 
> 时间：2012-08-29T14:39:29.720
> 
> 标签：c#, console, exit, exit-code

我在这里阅读了很多关于 stackoverflow 的内容、评论、意见和各种想法。但无论如何，我真的需要一种解释方法来在 C# 上退出我的控制台应用程序（我在 VS2010 Framework 4 上）并出现自定义错误。

我现在能读到的最好的东西是在 VB 上：

```
Private Declare Sub ExitProcess Lib "kernel32" (ByVal uExitCode As Long) 
```

并使用 ExitProcess(1) 处理错误或 ExitProcess(0)

所以我的问题是：

*   与 Environment.Exit(1) 相同吗？
*   对于作为自动作业运行的应用程序来说，什么更好？
*   退出代码是什么意思，-1、0、1，它们有什么区别？
*   static void ExitProcess(uint uExitCode); 怎么样？?

一些以前标记为参考书目的问题：

[在 C# 中退出控制台应用程序的命令是什么？](https://stackoverflow.com/questions/10286056/c-sharp-what-the-command-for-exit-console-application)

[http://geekswithblogs.net/mtreadwell/archive/2004/06/06/6123.aspx](http://geekswithblogs.net/mtreadwell/archive/2004/06/06/6123.aspx)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-29T14:46:19.677

你可以：

1.  调用 Environment.Exit(int)
2.  将您的 Main 函数重新声明为返回 int，并从中返回值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T14:48:18.633

1) Environment.Exit 几乎一样，

2）我猜是windows自动化服务？试试看，但我想我不会按预期工作......

3) 看看这个，[Windows 退出代码](http://www.symantec.com/connect/articles/windows-system-error-codes-exit-codes-description)

4）很好，但你也可以使用.Net内置方法

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T14:43:51.640

`Environment.Exit`将做与`ExitProcess`（可能加上一些.Net 清理）相同的事情 - 最终结果是相同的。

至于退出代码，它们的意思是你想要的任何东西（在合理范围内） - 0 是“成功”，!= 0 是“不成功”，但你可以使用任何你喜欢的非 0 值来表示你喜欢的任何东西，就可以了给程序使用该值来做一些有用的事情。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-29T14:50:25.730

以下是使用时特定于您的问题之一的一些退出代码`Environment.Exit(ExitCode)`

```
ERROR_SUCCESS
0 (0x0)
The operation completed successfully.
ERROR_INVALID_FUNCTION
1 (0x1)
Incorrect function.
ERROR_FILE_NOT_FOUND
2 (0x2)
The system cannot find the file specified. 
```

有关详细信息的更多退出代码，请参见此处[http://msdn.microsoft.com/en-us/library/windows/desktop/ms681382(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681382(v=vs.85).aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-29T15:12:20.867

> -1。*与 Environment.Exit(1) 相同吗？*

这是 .NET，如果不使用 windbg 窥视内部，您几乎不会知道他们为它实现了哪个 WINAPI。但是，没有任何关于 .NET 和 .NET 的相似性的 `ExitProcess`记录`Environment.Exit`。`Environment.Exit`可能包含多个 ExitProcess。

> -2。*对于作为自动作业运行的应用程序来说，什么更好？*

如果您使用某些调度程序运行自动化作业，那么我还有其他使用 Windows 服务的想法。这将消除退出进程的任何头痛。

> -3。*退出代码是什么意思，-1、0、1，它们有什么区别？*

它们只是告诉操作系统退出类型的代码。您可能已经看到程序员指定`return 1`错误或`return 0`成功。这使您可以自由使用其中任何一个。

> -4。*static void ExitProcess(uint uExitCode); 怎么样？?*

您可以在应用程序中自由使用非托管调用，当然您会错过`Environment.Exit`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T06:55:35.853

我正在回答问题“退出代码是什么意思，-1、0、1，它们有什么区别？”

不同的退出代码只是与调用者应用程序通信状态的一种方法。例如在我参与的一个项目中，我们使用 99 作为警告代码。只要涉及的所有应用程序都知道在收到 99 或其他内容时该怎么做，就可以了。在该应用程序中，如果调用者收到除 0 或 99 之外的任何其他内容，则调用者应该中止，并且在 99 的情况下它可以自由继续。

# r - 将 geom_line 与多个分组一起使用

> ID：12180515
> 
> 赞同：36
> 
> 时间：2012-08-29T14:39:47.500
> 
> 标签：r, ggplot2, grouping

我有一张如下表：

```
> testsizes
    size value replicate lane
361   16  6898         1   L1
362   17 10707         1   L1
363   18  1786         1   L1
364   19  1721         1   L1
365   20  2454         1   L1
421   16  8486         2   L1
422   17 26691         2   L1
423   18  3241         2   L1
424   19  5068         2   L1
425   20  7579         2   L1
481   16  4152         3   L1
482   17  4452         3   L1
483   18   899         3   L1
484   19  1973         3   L1
485   20  2595         3   L1
571   16  8284         1   L2
572   17  9045         1   L2
573   18  5041         1   L2
574   19  7160         1   L2
575   20  9730         1   L2
631   16  5639         2   L2
632   17  9773         2   L2
633   18  2433         2   L2
634   19  3017         2   L2
635   20  3864         2   L2
691   16 10161         3   L2
692   17 18609         3   L2
693   18  3760         3   L2
694   19  3543         3   L2
695   20  4257         3   L2

> dput(testsizes)
structure(list(size = c(16L, 17L, 18L, 19L, 20L, 16L, 17L, 18L, 
19L, 20L, 16L, 17L, 18L, 19L, 20L, 16L, 17L, 18L, 19L, 20L, 16L, 
17L, 18L, 19L, 20L, 16L, 17L, 18L, 19L, 20L), value = c(6898L, 
10707L, 1786L, 1721L, 2454L, 8486L, 26691L, 3241L, 5068L, 7579L, 
4152L, 4452L, 899L, 1973L, 2595L, 8284L, 9045L, 5041L, 7160L, 
9730L, 5639L, 9773L, 2433L, 3017L, 3864L, 10161L, 18609L, 3760L, 
3543L, 4257L), replicate = c("1", "1", "1", "1", "1", "2", "2", 
"2", "2", "2", "3", "3", "3", "3", "3", "1", "1", "1", "1", "1", 
"2", "2", "2", "2", "2", "3", "3", "3", "3", "3"), lane = c("L1", 
"L1", "L1", "L1", "L1", "L1", "L1", "L1", "L1", "L1", "L1", "L1", 
"L1", "L1", "L1", "L2", "L2", "L2", "L2", "L2", "L2", "L2", "L2", 
"L2", "L2", "L2", "L2", "L2", "L2", "L2")), .Names = c("size", 
"value", "replicate", "lane"), row.names = c(361L, 362L, 363L, 
364L, 365L, 421L, 422L, 423L, 424L, 425L, 481L, 482L, 483L, 484L, 
485L, 571L, 572L, 573L, 574L, 575L, 631L, 632L, 633L, 634L, 635L, 
691L, 692L, 693L, 694L, 695L), class = "data.frame") 
```

我想使用 ggplot 制作一个线图，显示不同尺寸的值变化。目前我有这个，在我尝试过的其他组合中：

```
ggplot(testlengths, aes(size, value, group=replicate, colour=replicate)) 
    + geom_line() 
```

![在此处输入图像描述](../Images/edda43f2e857d9dc2e80edf01c7acb85.png)

看起来它试图将两条车道合并到同一个系列中。但是我找不到将车道设置为分组的另一个因素的方法。我希望根据复制和车道类别对线进行分组。泳道应该是彩色的，但复制品不需要相互区分。

我知道我可以通过预先将两组连接成一组来实现这一点。但是，在我沿着这条路线走之前，如果 ggplot 可以在没有分面的线图中按多个分组进行分组（我需要稍后使用分面进行另一个分组），我会徘徊吗？我觉得应该可以。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-08-29T15:58:00.753

根据我对两者交互的评论：

```
ggplot(testsizes, aes(x = size, y = value,
                      group = interaction(replicate, lane),
                      colour = lane)) +
 geom_line() 
```

这使：

![在此处输入图像描述](../Images/0fecb084555933ca45e4bce0f12e58ec.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-29T15:22:07.353

正如@joran 指出的那样，如果 ggplot 本身可以做到这一点，那么无论如何它只是将两个组连接起来。因此，我自己将这两个组连接起来是正确的方法，并给了我想要的结果：

```
> testlengths$replane <- paste(testlengths$replicate, testlengths$lane, sep="_")

> testlengths
    size value replicate lane replane
361   16  6898         1   L1    1_L1
362   17 10707         1   L1    1_L1
363   18  1786         1   L1    1_L1
364   19  1721         1   L1    1_L1
365   20  2454         1   L1    1_L1
421   16  8486         2   L1    2_L1
422   17 26691         2   L1    2_L1
423   18  3241         2   L1    2_L1
424   19  5068         2   L1    2_L1
425   20  7579         2   L1    2_L1
481   16  4152         3   L1    3_L1
482   17  4452         3   L1    3_L1
483   18   899         3   L1    3_L1
484   19  1973         3   L1    3_L1
485   20  2595         3   L1    3_L1
571   16  8284         1   L2    1_L2
572   17  9045         1   L2    1_L2
573   18  5041         1   L2    1_L2
574   19  7160         1   L2    1_L2
575   20  9730         1   L2    1_L2
631   16  5639         2   L2    2_L2
632   17  9773         2   L2    2_L2
633   18  2433         2   L2    2_L2
634   19  3017         2   L2    2_L2
635   20  3864         2   L2    2_L2
691   16 10161         3   L2    3_L2
692   17 18609         3   L2    3_L2
693   18  3760         3   L2    3_L2
694   19  3543         3   L2    3_L2
695   20  4257         3   L2    3_L2

> ggplot(testlengths, aes(size, value, group=replane, colour=lane)) 
    + geom_line() 
```

![在此处输入图像描述](../Images/4c6c57e7bd27b699d65cfea6c7996463.png)

我想这里的道德是在将表格提供给 ggplot 之前尽可能多地对表格进行预处理。

# excel - 在一组特定的列值中查找第二大值（不创建新列）

> ID：12180517
> 
> 赞同：3
> 
> 时间：2012-08-29T14:39:56.350
> 
> 标签：excel, excel-formula

我有一张看起来像这样的桌子

```
Employee Date
Sean     21-07-2012
Peter    19-08-2012
Tammy    19-08-2012
Sean     14-07-2012
Sean     07-07-2012
Mickey   09-07-2012
Mickey   24-07-2012
Jean     27-07-2012
Jean     13-07-2012
Jean     07-07-2012
Victor   17-08-2012
Victor   10-08-2012 
```

假设我想获得 Jean 的第二大约会。我找到了以下教程： [http ://www.dailydoseofexcel.com/archives/2009/04/21/vlookup-on-two-columns/](http://www.dailydoseofexcel.com/archives/2009/04/21/vlookup-on-two-columns/)

我尝试以这种方式使用顶级方法：

```
=SUMPRODUCT((A:A='Jean')*LARGE(B:B,2)) 
```

我得到一个没有意义的大量数字。一些帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T14:47:33.190

请改用以下公式：

```
=LARGE(IF(A:A="Jean",B:B),2) 
```

（注意这是一个数组公式，所以输入后需要push `ctrl`++ `shift`）`enter`

它的作用是采用 A 列，如果它包含“Jean”，那么它将 B 列中的相应日期提供给`Large`公式。这样，`Large`公式仅适用于满足您要求的日期。

# java - Java的访问者模式

> ID：12180518
> 
> 赞同：2
> 
> 时间：2012-08-29T14:40:01.740
> 
> 标签：java, design-patterns, visitor-pattern

我有一个关于访客模式的问题！想象一下，我有数据结构类，并且在其中我与 Class2 有一个 has-a 关系。Class2 具有特定的类层次结构，大约有 10 个类。

我需要根据 Class2 的类型迭代 Class1 实例列表并调度 Visitor.visit(Class1) 的请求。我不能对 class2 使用迭代，因为我需要来自 class1 上下文的变量。

现在我正在考虑接受 Class1 对象的调度程序，然后在这个类的基础上检查 class2 的类型并调用一些东西

**visitor.visitClass2Type1（Class1 对象）**

但在这种情况下，我失去了访问者模式的相同签名......

另一个问题是如何在访问者模式的上下文中注入变量。就像我遍历树结构一样，我想保留上一级的父变量以在较低级别执行某些操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T14:55:47.367

您可以向访问者类添加一个 setContext() 方法，该方法告诉访问者需要在哪个上下文中解释以下对象。

当您有一个嵌套多个级别的对象关系时，您可以添加一个模拟 leaveContext() 方法并在您的访问者类中保留一堆上下文。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T13:13:43.323

采取菲利普建议的更进一步，试试这个。

给定类 Widget 是父类，类 Feature 是子层次结构的基类型

简单用法：

```
// widget will have an instance of a Feature subclass from args or config, etc
Widget theWidget = new Widget(args);

// create and configure visitor
Visitor theVisitor = new Visitor();
theVisitor.prop1 = x; 
theVisitor.prop2 = y;
theVisitor.prop3 = z;

theWidget.visit(theVisitor); 
```

小部件（父类）：

```
class Widget 
{
   Feature _childFeature;

   void visit(Visitor visitor)
   {
      visitor.beginAccept(this);
      childFeature.visit(visitor);            
      visitor.endAccept();
   }

} 
```

要素类层次结构：

```
abstract class Feature
{
   abstract void visit(Visitor visitor);
}

class Sunroof extends Feature
{
   void visit(Visitor visitor)
   {
      visitor.accept(this);
   }
}

class BulletProof extends Feature
{
   void visit(Visitor visitor)
   {
      visitor.accept(this);
   }
}

class GoldPlated extends Feature
{
   void visit(Visitor visitor)
   {
      visitor.accept(this);
   }
} 
```

一个同时使用父母和孩子的具体访问者：

```
class ExampleVisitor extends Visitor
{

   private _widgetInProcess;

   void beginAccept(Widget w)
   {
      _widgetInProcess = w;
   }

   void accept(Sunroof feature)
   {
      // do work based on both _widgetInProcess and type-specific feature
   }

   void accept(BulletProof feature)
   {
      // do work based on both _widgetInProcess and type-specific feature
   }

   void accept(GoldPlated feature)
   {
      // do work based on both _widgetInProcess and type-specific feature
   }

   void endAccept()
   {
      _widgetInProcess = null;
   }

} 
```

您还可以可视化树模型用例，以及在`beginAccept`您推送到堆栈的位置，各种`accept`方法查看堆栈以获取其父上下文，并`endAccept`从堆栈中弹出。这可以让您递归处理树，同时始终可以访问父链。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T15:16:11.567

我认为您的 Visitor.visit 方法应该类似于 Visitor.visit(Class2, Class1) 您的访问者类将为每种类型的 Class2 实现访问方法。

所以可以实现vi​​sit(Class2-1, Class1), visit(Class2-2,Class1)...visit(Class2-10,Class1)

我认为通过这种方式，您将能够访问访问方法中的 Class1 对象信息，并且访问方法调用将动态决定，因此您的 Class2 列表具有什么并不重要......

有关更多信息，您可以参考 wiki 页面： [http ://en.wikipedia.org/wiki/Visitor_pattern](http://en.wikipedia.org/wiki/Visitor_pattern)

# element - TYPO3：缺少分隔元素

> ID：12180519
> 
> 赞同：1
> 
> 时间：2012-08-29T14:40:11.680
> 
> 标签：element, typo3, divider

我这里有一个 TYPO3 4.2.10，我想在内容中添加一个分隔元素（特殊元素）。但是没有分隔元素。有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T22:27:18.727

您可能没有管理员权限，或者不允许用户插入页面或内容类型“分隔符”。检查用户组或用户的权限*访问列表*的权限。

对于团体：

模块列表 > 页面根目录 > 后端用户组 编辑您所属的组。转到选项卡*访问列表*（如有必要，请检查）：

![在此处输入图像描述](../Images/e31e2c8faaae5ca67cfa73fed81b2d3b.png)

向下滚动并检查是否有任何选项被明确拒绝：

![在此处输入图像描述](../Images/236826bcbfd8528add7aea366ce979b1.png)

*另一种方法是在选项卡选项*卡上检查用户组的 TSconfig 。也可以在*页面 TSconfig*中禁用内容元素，该页面可以在页面设置选项卡*资源*中找到。在这两种情况下，请检查以下代码：

```
TCEFORM.tt_content.CType.removeItems = div 
```

并用合适的东西替换它，例如：

```
TCEFORM.tt_content.CType.removeItems > 
```

[资源](http://www.mail-archive.com/typo3-german@lists.netfielders.de/msg06266.html)

# exception - 未对齐的异常行为 mips

> ID：12180521
> 
> 赞同：0
> 
> 时间：2012-08-29T14:40:17.290
> 
> 标签：exception, mips

假设我在 MIPS 中有这个指令

```
lw $t0, 21($s0) 
```

`$s0`包含小数`2022`（不是四的倍数）

`$s0`在这里，仅在地址计算时或之后查看地址时会出现异常`21+$s0`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T00:33:27.173

尝试从地址 21($s0) 或 2022+21 = 2043 十进制加载会导致异常。`EPC`将包含异常发生时加载指令的地址，`BadVaddr`寄存器应包含十进制 2043。

# git - 了解 Meld 与 Git 的 3 路合并

> ID：12180523
> 
> 赞同：13
> 
> 时间：2012-08-29T14:40:30.550
> 
> 标签：git, repository, meld, 3-way-merge

我的老板建立了我们的新 Git 存储库，一个在我们的 Windows 服务器上，一个在我们的 Linux 服务器上。

我被要求解决我们的冲突，所以我选择使用 Meld。

当我运行第一个文件时，它会打开 3 个窗口；

*   shipping.php.local.####,
*   运输.php
*   运输.远程。####

我已阅读文档并提供帮助，但我无法理解。从我所见，*shipping.remote*中有我对 Linux 机器上我想要保留的文件所做的更改。*shipping.local*是来自 Windows 服务器的文件， *shipping.php*是合并后的文件。

因此，如果我只是从*shipping.remote*中获取代码，将其移动到中间文件（shipping.php）并保存，我将在 Linux 机器上的 Git 存储库中获得我想要的更新文件？

我希望我解释正确，我只是不想把事情搞砸。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T19:02:55.753

您正确理解您看到的文件是什么。但是，如果您以您描述的方式合并（合并从远程到基础的更改），您将失去本地的更改。实际上，您必须将本地和远程合并到基础中。您可以使用更改 | 合并所有不冲突的，然后手动解决每个冲突。

# php - 将数组的内容保存到变量中

> ID：12180525
> 
> 赞同：-1
> 
> 时间：2012-08-29T14:40:31.730
> 
> 标签：php, arrays, foreach

`get_travel_reports_places()`我在函数 ( )中有一个数组，`$places`其中保存了几个位置（例如“曼谷，泰国”，“万象，老挝”，...）。

我现在想把这个数组的内容放入一个可以返回的变量中。目标是像这样调用函数

```
<?php echo get_travel_reports_places(); ?> 
```

并获取地点列表，以 分隔`|`：

```
Bangkok, Thailand|Vientiane Laos 
```

我试图用一个循环来做`foreach`，但这只有在我`echo`直接放置时才有效。将它们存储在单个变量中是行不通的。

有人愿意帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:41:53.207

您可以使用[join() 来做到这一点，它是 implode 的别名](http://www.php.net/manual/en/function.implode.php)

```
join("|", $places); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T14:42:09.163

看一下内爆函数。

`return implode('|', $places);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T14:42:13.400

```
$places = get_travel_reports_places();
echo implode('|', $places); 
```

应该这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T14:44:02.597

要更正您的问题，您希望返回一个字符串，而不是一个数组。

代码如下：

```
function get_travel_report_places() {
  // your regular code here
  return implode(' | ', $places);
} 
```

此函数将连接`$places`数组中的所有位置并返回一个字符串，其中位置之间用 . 分隔`|`。

# jsf-2 - 我们如何在渲染属性中拥有或条件

> ID：12180528
> 
> 赞同：1
> 
> 时间：2012-08-29T14:40:52.113
> 
> 标签：jsf-2, facelets

我已经呈现了如下所述的情况。ui:fragment render="#{ navigationBean.currentUri == '/login/selectEnv.jsf' || navigationBean.currentUri == '/home/home.jsf'}"

但是 || 条件不起作用。是否可以检查渲染属性中的两个条件。对此有什么替代方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-06T11:47:47.290

您可以使用“或”关键字来使用或操作。

```
 ui:fragment rendered="#{ navigationBean.currentUri == '/login/selectEnv.jsf' or  
     navigationBean.currentUri == '/home/home.jsf'}" 
```

# java - 使用Struts2访问jsp动作类方法中本地定义的变量的值

> ID：12180535
> 
> 赞同：0
> 
> 时间：2012-08-29T14:41:20.077
> 
> 标签：java, jsp, jakarta-ee, struts2

我正在尝试使用Struts2访问jsp中动作类的方法中定义的变量的值。我在动作类的方法中定义了一个变量 desc_map。我想在 jsp 中访问 this 的值。我该怎么做？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:45:32.983

为属性创建一个公共 getter，最好按照 JavaBean 规范正确命名：

```
public TheType getDescMap() {
    return desc_map;
} 
```

从 JSP 访问它：

```
${descMap} 
```

或者如果您需要转义，则不能使用 JSP 2.0+ 等：

```
<s:property value="descMap"/> 
```

所有这些基本上都包含在每个 Struts 2 教程中。

# asp.net-mvc - Web API 和实体框架用户名问题

> ID：12180538
> 
> 赞同：0
> 
> 时间：2012-08-29T14:41:23.423
> 
> 标签：asp.net-mvc, entity-framework, asp.net-web-api

全部，

我有一个 ASP.NET Web API 项目，它正在另一个项目中对我的服务层进行 REST 调用。服务项目的数据访问是通过 Entity Framework 4.3 进行的。web.config 文件中的连接字符串设置为使用集成安全性。

正在发生的事情是，服务器的名称“服务器 A”正在传递到服务层，并且针对 SQL Server 的身份验证失败。没有名为“服务器 A”的用户帐户。

更具体地说，这就是架构的样子

```
jquery file making an api controller via POST to a method within the API controller
API controller method references the service layer DLL, and calls a method within the service class
The service class is calling a method in a repository class that uses DbContext to connect to SQl Server 2008 table. 
```

使用 Web API 框架以将正确的用户名传递给 EF 时，我需要做一些具体的事情吗？

任何帮助，将不胜感激。

德里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:15:09.430

问题是双跳模拟。[您可以通过此链接](http://weblogs.asp.net/owscott/archive/2008/08/22/iis-windows-authentication-and-the-double-hop-issue.aspx)了解它。但我不确定这种模拟是否可以通过 REST 进行。我建议您通过特殊帐户使用数据库，而不是集成安全性。

# php - 使用 IN 搜索带有数组的数据库

> ID：12180540
> 
> 赞同：1
> 
> 时间：2012-08-29T14:41:43.037
> 
> 标签：php, mysql, sql

我有一条 SQL 语句：

```
$sql = "SELECT * FROM user_events WHERE userID =" . $uid . " OR groupID = (IN ($gId) WHERE userID IS NULL) ORDER BY timestamp DESC"; 
```

打印时看起来像这样：

```
SELECT * FROM user_events WHERE userID = 34 OR groupID =(IN (44,45) WHERE uID IS NULL) ORDER BY timestamp DESC 
```

我要做的是从数据库中选择`userId`匹配特定变量或`groupID`匹配 CSV 变量的任何`userID`行`NULL`。

谁能解释我在这里做错了什么？我被卡住了！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T14:43:09.380

`IN`是操作员，而不是……那个。你也想要`AND`，没有`WHERE`。

```
$sql = "SELECT * FROM user_events
        WHERE userID = $uid
           OR groupID IN ($gId) AND userID IS NULL
        ORDER BY timestamp DESC"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:44:11.423

```
$sql = "SELECT * FROM user_events 
       WHERE userID =" . $uid . " 
       OR (groupID IN ($gId) AND userID IS NULL) ORDER BY timestamp DESC"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T14:44:59.540

我认为你想要类似的东西：

```
SELECT * FROM user_events 
WHERE (userID = 34 OR groupID IN (44,45)) and uID IS NULL
ORDER BY timestamp DESC 
```

在 PHP 中，这可能看起来像：

```
$sql = "SELECT * FROM user_events WHERE (userID =". $uid . " OR groupID IN ($gId)) AND userID IS NULL ORDER BY timestamp DESC"; 
```

# c# - 如何在 C# 中加密文件以进行传输？

> ID：12180542
> 
> 赞同：2
> 
> 时间：2012-08-29T14:41:47.887
> 
> 标签：c#

我试图在将文件保存到磁盘时对其进行加密，并且我查看了 C# 中的 Crypto 命名空间，但不确定我应该如何去做。基本上我需要我的程序能够加密和解密文件。该文件只是一个由我的程序序列化的 xml 文件，但它可以包含敏感数据，例如 SQL 服务器的连接字符串。我的客户希望能够通过电子邮件将这些配置文件发送给其他人并在我们的应用程序中打开它们以将设置应用到他们的系统。

我尝试了 Crypto 命名空间中的 AES 类，但我不知道在哪里存储 IV 和密钥，以便我在另一台机器上的程序能够解密它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:54:03.857

在典型的场景中，处理这样的事情的流程是：

*   IV 是静态的并且为客户所知
*   终端机器生成一个 RSA 密钥对，并将公钥只提供给发送数据的一方（XML 文件）
*   您的 AES 密钥已生成，并使用 RSA 公钥加密并发送给客户端，现在只有客户端能够使用之前生成的私钥获取该 AES 密钥。
*   您使用之前安全发送给客户端的 AES 密钥加密数据

这意味着即使有人捕获了完整的数据流，他们也无法解密您的数据，因为他们没有获取 AES 密钥所需的私钥。

# mongodb - Mongopper 外键？

> ID：12180548
> 
> 赞同：1
> 
> 时间：2012-08-29T14:42:02.470
> 
> 标签：mongodb, mongomapper, padrino

我目前正在从外部源导入数据的 Padrino 项目中使用 Mongomapper。主对象 ( `Application`) 有两个关联的文档类型，`Activity`和`Notice`.

但是，我想自己指定外键，而不是使用内部的 Mongo ID，因为外键在数据导出中，我通过 rake 任务导入。

我试过了`EmbeddedDocument`，但这会导致问题，因为我必须删除所有关联的数据，而不是更新它，这并不理想。

我尝试了以下方法，但没有任何运气：

```
class Application
  include MongoMapper::Document
  ensure_index [[:latlng, '2d']]

  key :refval, String
  key :pkeyval, String
  key :applicantname, String
  key :latlng, Array
  key :address, String
  key :occupier, String
  key :type, String
  key :casetype, String
  key :tradingname, String
  key :closingdate, Date
  key :recieveddate, Date
  key :details, String
  key :usetype, String
  key :status, String
  key :validfrom, Date
  timestamps!

  many :activities
  many :notices  
end

class Activity
  include MongoMapper::Document

  key :keyval, String
  key :pkeyval, String
  key :type, String  
  key :cycle, String
  key :open, String
  key :close, String

  belongs_to :application, :foreign_key => :pkeyval
end

class Notice
  include MongoMapper::Document

  key :keyval, String
  key :pkeyval, String
  key :recieveddate, Date
  key :startdate, Date
  key :enddate, Date
  key :days, String  
  key :hours, String
  key :activities, Array

  belongs_to :application, :foreign_key => :pkeyval
end 
```

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T21:11:00.450

MongoMappers 的[Associations 文档](http://mongomapper.com/documentation/plugins/associations.html)对此有点轻描淡写，但在[test_associations](https://github.com/jnunemaker/mongomapper/blob/master/test/functional/test_associations.rb)功能测试中可以找到一个示例。该`:foreign_key`定义应指定为 on`many`而不是`belongs_to`。

# c - Openssl：错误“证书链中的自签名证书”

> ID：12180552
> 
> 赞同：27
> 
> 时间：2012-08-29T14:42:11.247
> 
> 标签：c, linux, openssl, ssl-certificate, verify

当我使用 openssl API 验证服务器证书（自签名）时，出现以下错误：

> 1 深度查找时出现错误 19：证书链中的自签名证书

根据 openssl[文档](http://www.openssl.org/docs/apps/verify.html)，此错误 (19) 是

> “X509_V_ERR_SELF_SIGNED_CERT_IN_CHAIN：证书链中的自签名证书 - 可以使用不受信任的证书构建证书链，但在本地找不到根。”

为什么会出现这个错误？我的服务器证书有问题吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-29T14:52:02.313

您有一个自签名的证书，因此默认情况下它是*不受信任*的，这就是 OpenSSL 抱怨的原因。这个警告实际上是一件好事，因为这种情况也可能由于[中间人攻击](http://en.wikipedia.org/wiki/Man-in-the-middle_attack)而上升。

要解决此问题，您需要将其安装为受信任的服务器。如果它是由不受信任的 CA 签名的，则您还必须安装该 CA 的证书。

查看有关安装自签名证书的[链接。](http://gagravarr.org/writing/openssl-certs/others.shtml#selfsigned-openssl)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-09-15T06:34:03.457

这是验证要由特定 CA 签名的证书的单行代码：

`openssl verify -verbose -x509_strict -CAfile ca.pem certificate.pem`

这不需要在任何地方安装 CA。

请参阅[SSL 证书链捆绑包如何工作？](https://stackoverflow.com/questions/20409534/how-does-an-ssl-certificate-chain-bundle-work)有关详细信息和正确的证书链处理。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-11-22T09:22:33.527

如果您正在运行[Charles](https://www.charlesproxy.com/)并尝试构建[docker](/questions/tagged/docker "显示标记为“码头工人”的问题")容器，那么您很可能会收到此错误。

确保在下禁用 Charles (macos) 代理`proxy -> macOS proxy`

查尔斯是一个

> HTTP 代理/HTTP 监视器/反向代理，使开发人员能够查看他们的机器和 Internet 之间的所有 HTTP 和 SSL/HTTPS 流量。

所以任何类似的事情都可能导致同样的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-18T11:36:25.253

该错误的解决方案是在代码顶部添加这一行：

```
process.env.NODE_TLS_REJECT_UNAUTHORIZED = "0"; 
```

# hibernate - Hibernate 方言自动检测

> ID：12180553
> 
> 赞同：1
> 
> 时间：2012-08-29T14:42:12.377
> 
> 标签：hibernate

我读到 Hibernate 可以手动尝试为给定数据库找到合适的方言，但它仅限于我认为的内置方言（因为当我没有为我的 sqllite 数据库指定方言时，我会遇到异常）。

有没有办法将其他方言添加到休眠中作为某人项目的一部分，这样他就可以利用它们进行方言循环？

编辑：我正在使用`3.6.0.Final`Hibernate 版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T15:44:29.800

肯定有。您必须提供自定义 DialectResolver。您可以使用`hibernate.dialect_resolvers`设置以逗号分隔的 DialectResolver 实现列表命名。

# wordpress - 这些换行符来自哪里？

> ID：12180555
> 
> 赞同：0
> 
> 时间：2012-08-29T14:42:14.813
> 
> 标签：wordpress, wordpress-theming

我正在努力简化我的 WordPress 日志的设计。对于出现在帖子或帖子标题上方的元数据，我想要的只是它出现在一个单一的、相当不起眼的行中。

伪代码如下所示：

```
$date $category $edit 
```

它实际上看起来像在这里：http: [//johnlaudun.org/20120828-isaac-at-9pm/](http://johnlaudun.org/20120828-isaac-at-9pm/)

这一行的 CSS 是：

```
.entry-meta {
    font-family: "Avenir Next Condensed", "Arial Narrow", sans-serif;
    font-size: .75em;
    text-transform: uppercase;
}

.entry-meta p {
    white-space: nowrap;
}

.entry-meta a {text-decoration: none;}
.entry-meta .date {color: #000;}
.cat-links a {color: #436EEE;}
.edit-link a {color: orange;} 
```

PHP是：

```
<div class="entry-meta">

<p>             
    <?php if ( ! is_page() ) : ?>
    <a href="<?php the_permalink(); ?>">
    <?php the_time( 'Y M d' ); ?></a>
    <?php endif; ?> &nbsp;

    <span class="cat-links">
    <?php the_category( ', ' ); ?></span>

    <span class="edit-link">
    <?php edit_post_link( __( 'Edit', 'chunk' ) ); ?></span>

</p>
</div> 
```

它向浏览器生成以下输出：

```
<div class="entry-meta">
        <p>

                        <a href="http://johnlaudun.org/20120828-isaac-at-9pm/">
            2012 Aug 28</a>
             &nbsp;

            <span class="cat-links">
            <a href="http://johnlaudun.org/category/status-2/" title="View all posts in status" rel="category tag">status</a></span>

            <span class="edit-link">
            <a class="post-edit-link" href="http://johnlaudun.org/wordpress/wp-admin/post.php?post=5052&amp;action=edit" title="Edit Post">Edit</a></span>

        </p>
    </div> 
```

从我的角度来看，我错过了什么是在应该是相当简单的输出中插入某种换行符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:48:43.627

看看 style.css，第 191 行：

```
.cat-links, .tag-links {
  display: block;
} 
```

尝试：`display: inline;`

# java - 摆动菜单 Java 7 mac osx

> ID：12180557
> 
> 赞同：4
> 
> 时间：2012-08-29T14:42:33.237
> 
> 标签：java, macos, swing, java-7, japplet

我一直在运行在小程序上的 mac os x 上测试我的 Swing 应用程序。

当我在浏览器中运行这个小程序时，我注意到 JMenus/JMenuItems 上的鼠标悬停不能正常工作。

这是一个重现问题的小程序：

```
package com.macosx.tests;

import java.applet.Applet;
import java.awt.event.*;
import java.awt.*;

import javax.swing.*;

public class Example extends JApplet {

    JMenuBar bar;
    JMenu file, edit;
    JMenuItem new1, save, close;

    private void doStart() {
        bar = new JMenuBar();

        file = new JMenu("File");
        edit = new JMenu("Edit");

        new1 = new JMenuItem("New");
        save = new JMenuItem("Save");
        close = new JMenuItem("Close");

        setJMenuBar(bar);
        bar.add(file);
        bar.add(edit);
        file.add(new1);
        file.add(save);
        file.add(close);
    }

    @Override
    public void start() {
        try {
            SwingUtilities.invokeAndWait(new Runnable() {
                public void run() {
                    doStart();
                }
            });
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }
} 
```

使用此代码，生成一个 .jar 文件。在 Eclipse 中，您可以使用导出功能，并且只需确保将 Main-Class 定义为上述类。

运行 jar 后，创建一个包含以下内容的 html 文件：

```
<html>
<head>
<title>Menu test Applet</title>
</head>
<body>
<applet id="appletID" height="800" width="600" 
  code="com.macosx.tests.Example" 
  archive="tests.jar">
</applet>
</div>
</body>
</html> 
```

之后，运行 html 文件并检查菜单：它们不应接收鼠标悬停事件。难道我做错了什么？这是一个Java错误吗？有没有Mac用户来测试这个问题？

我正在使用最新的 Oracle JRE for mac (http://www.oracle.com/technetwork/java/javase/downloads/jre7-downloads-1637588.html) 运行 Mac OSX 10.7.4。使用 Firefox 进行测试。

```
java.vendor     Oracle Corporation
java.version    1.7.0_06
os.name         Mac OS X
os.version      10.7.4 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T00:18:12.353

代码在这里工作正常。我怀疑这是该 JRE 中的错误。

将代码更改为：

1.  转储`java.version`&`java.vendor`
2.  删除主要（这只会混淆事物） - 然后..
3.  提出错误报告。

## 试机详情

从此[属性小程序](http://pscode.org/prop/?prop=java.vendor%2Cjava.version%2Cos.name%2Cos.version&format=TSV)获得的详细信息：

```
Name            Value
java.vendor     Oracle Corporation
java.version    1.7.0_05
os.name         Windows 7
os.version      6.1 
```

**浏览器：** 火狐15.0

# java - 在多个 Java 进程之间提供共享实体的解决方案

> ID：12180562
> 
> 赞同：1
> 
> 时间：2012-08-29T14:42:49.883
> 
> 标签：java, caching, concurrency, nosql

我正在尝试从由不同 Java 进程处理的多个部分重建信息流。请注意，我不生成流程，我只是阅读了一些关于它们的信息。

我尝试使用 MySQL（MyISAM/InnoDB 表）和 INSERT ON DUPLICATE KEY UPDATE，并为每个流使用一个 id。我还尝试存储所有信息并在最后运行查询以获取完整信息。这些方法都没有产生所需的性能。

我正在寻找一种解决方案，它允许我在多个 Java 进程之间拥有一组共享对象。对象应该在运行之间保持持久性，并且可以快速同时查找/更新（> 100k 查找/更新每秒）。

我想到了一些解决方案，包括：

*   NoSQL：像 MongoDB、HBase 等。
*   像 EhCache、Memcached 等缓存解决方案。

问题是我对这些解决方案没有任何经验。那么，您会推荐什么符合以下标准：

*   在单个系统上非常快。我提到的大多数应用程序都是为分布式系统构建的，但这里并非如此。
*   易于学习/使用（我希望能够在一天内制作原型）
*   成熟的技术
*   即使用于商业目的也可以免费使用
*   最好是开源的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:56:12.077

您可以尝试一个单独的 java 进程来协调其他进程。此过程将保存信息以传递给主要过程。您可以使用 RMI 将它们连接起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-18T16:49:45.710

旧的（遗留？）解决方案是 JavaSpaces。但是，从软件架构师的角度来看，我会说分布式缓存是当今的替代品。特别是看看 hazelcast 和 infinispan。

从性能的角度来看，我对“大”分布式缓存解决方案的性能不满意，当只需要一个内存缓存时，请参阅我在[cache2k 基准测试](http://cache2k.org/benchmarks.html)页面上的文章（需要在此处添加 hazelcast）。

无论如何，请先澄清您的问题陈述，因为您的问题属于[XyProblem](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)类别。您没有描述实际问题，您的问题归结为“快速可靠的分布式对象”解决方案。什么样的数据进来？费率是多少？谁访问？考虑到写入和读取是并行的，需要满足哪些一致性保证？

对我来说，“信息流”这个词听起来更像是一个[复杂的事件处理](http://en.wikipedia.org/wiki/Complex_event_processing)问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-18T11:40:31.060

如果您只想与 java 应用程序交换对象，您还可以查看元组空间。java空间有具体的实现，JavaSpaces，应该可以做你需要的。不确定他们是否可以跟上性能。此外，我不确定这项技术的使用范围有多广，因为它只支持 Java，并且不像现在的 NoSQL 存储那样灵活。

[维基百科](http://en.wikipedia.org/wiki/Tuple_space#JavaSpaces)有更详细的描述和不同实现的列表，其中许多是开源的。

另一种选择是使用 Redis，那里有通知，它可以肯定地扩展到您正在寻找的要求。

# java - 允许推回的java fifo队列？

> ID：12180564
> 
> 赞同：0
> 
> 时间：2012-08-29T14:42:54.133
> 
> 标签：java, data-structures, nio

是否有一个 fifo 队列实现可以在偷看后替换 head 元素？

在部分写入网络连接后（使用 java nio 选择器时），我想使用它来将部分写入的缓冲区推回队列。

这比将部分写入的缓冲区作为附件粘贴在选择键上要干净一些，但如果没有可用的方便实现，我将不得不使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T14:45:50.787

您可以使用[允许](http://docs.oracle.com/javase/7/docs/api/java/util/Deque.html)您添加到开头或结尾的双端队列。

但是，如果您有部分写入并且您的缓冲区不是很大，那么您的消费者可能会很慢，您可能会考虑采取不同的操作，例如关闭连接。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-30T00:02:13.210

窥视后，头部元素不受干扰，因此您的问题没有意义。只是偷看，尝试写入，如果没有剩余，*则从*队列中删除缓冲区。

# java - 测试用例没有按预期运行？

> ID：12180571
> 
> 赞同：1
> 
> 时间：2012-08-29T14:43:09.427
> 
> 标签：java, spring, junit, slf4j

我的 pom.xml 中有以下配置。

```
<dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>1.5.2</version>
        </dependency> 
```

但是当我运行测试用例时，它给了我以下错误：

```
java.lang.NoSuchMethodError: org.slf4j.spi.LocationAwareLogger.log(Lorg/slf4j/Marker;Ljava/lang/String;ILjava/lang/String;[Ljava/lang/Object;Ljava/lang/Throwable;)V
    at org.apache.commons.logging.impl.SLF4JLocationAwareLog.debug(SLF4JLocationAwareLog.java:133)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.<init>(SpringJUnit4ClassRunner.java:106)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at org.junit.internal.builders.AnnotatedBuilder.buildRunner(AnnotatedBuilder.java:31)
    at org.junit.internal.builders.AnnotatedBuilder.runnerForClass(AnnotatedBuilder.java:24)
    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
    at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:29)
    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
    at org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:24)
    at org.junit.internal.requests.FilterRequest.getRunner(FilterRequest.java:34)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.<init>(JUnit4TestReference.java:33)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestMethodReference.<init>(JUnit4TestMethodReference.java:25)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.createTest(JUnit4TestLoader.java:54)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.loadTests(JUnit4TestLoader.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

我在这里错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:55:17.287

您可能还需要包含以下依赖项：

```
<dependency>
   <groupId>org.slf4j</groupId>
   <artifactId>slf4j-api</artifactId>
   <version>1.5.2</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T19:55:04.207

如果你想在 Spring 中使用 slf4j，那么我建议你使用以下依赖项：

```
<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>slf4j-api</artifactId>
  <version>${slf4j-version}</version>
</dependency>

<!--
    This forces the Java commons logging that is used as part of Spring
    to use slf4j
-->
<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>jcl-over-slf4j</artifactId>
  <version>${slf4j-version}</version>
  <scope>runtime</scope>
</dependency>

<!--
    Use log4j as the slf4j implementation
-->
<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>slf4j-log4j12</artifactId>
  <version>${slf4j-version}</version>
  <scope>runtime</scope>
</dependency>

<!--
    You will also need log4j itself.
    It includes a lot of cruft, so exclude the parts you don't want.
-->
<dependency>
  <groupId>log4j</groupId>
  <artifactId>log4j</artifactId>
  <version>1.2.15</version>
  <exclusions>
    <exclusion>
      <groupId>javax.mail</groupId>
      <artifactId>mail</artifactId>
    </exclusion>
    <exclusion>
      <groupId>javax.jms</groupId>
      <artifactId>jms</artifactId>
    </exclusion>
    <exclusion>
      <groupId>com.sun.jdmk</groupId>
      <artifactId>jmxtools</artifactId>
    </exclusion>
    <exclusion>
      <groupId>com.sun.jmx</groupId>
      <artifactId>jmxri</artifactId>
    </exclusion>
  </exclusions>
  <scope>runtime</scope>
</dependency> 
```

我正在使用 slf4j 的 1.6.6 版本，但只要版本在每个依赖项中保持一致，这并不重要。

# ms-access - 使用 Access 对 .asp 中的值进行排名

> ID：12180573
> 
> 赞同：2
> 
> 时间：2012-08-29T14:43:11.270
> 
> 标签：ms-access, asp-classic, ms-access-2007

对.asp 和董事会来说相当新，所以请多多包涵。我正在尝试使用存储 24 条唯一记录（棒球队）的访问数据库，其中包含 TeamName、TeamUID（唯一 ID）、TotalHR、TotalRS、TotalWins 和 TotalLosses 的值。我想使用此表来显示团队在每个类别中的排名。例如，每个团队都有自己的页面，该页面基于他们的 TeamUID。我想显示他们在每个类别中的排名（第 1 到第 24 位），但无法弄清楚如何在页面中做到这一点。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:49:20.450

您可以使用 MS Access 分配等级，例如：

```
SELECT table1.ANumber, 
      (SELECT count(*) 
       FROM table1 t 
       WHERE t.anumber<=table1.anumber) AS rank
FROM table1
WHERE (((table1.ANumber) Is Not Null))
ORDER BY table1.ANumber; 
```

针对 ADO 连接运行，您可以使用[GetString](http://www.w3schools.com/ado/ado_getstring.asp)或[GetRows](http://www.w3schools.com/ado/met_rs_getrows.asp)将其分配给字符串或数组。

上面的示例将给出一个重复的数字，其中 ANumber 有一个重复的值。例如：

```
ANumber Rank
-1      1
1       7
1       7
1       7
1       7
1       7
1       7
2       11
2       11 
```

# c# - 在 Windows 服务中自托管 WCF 的 Silverlight 跨域问题

> ID：12180574
> 
> 赞同：0
> 
> 时间：2012-08-29T14:43:13.143
> 
> 标签：c#, wcf, silverlight, cross-domain, self-hosting

我有一个 Silverlight 应用程序，它在我的本地机器上完美运行，使用 WCF 服务形成一个开发服务器（在 Windows 服务中自托管）。

我必须调试其中一个 WCF 服务，才能找到错误的根本原因。我在服务中添加了我的调试/跟踪信息，并安装在虚拟机（甚至本地）中，但从那时起，我得到了众所周知的跨域错误：

> “尝试向 URI 'http://MyVMMachine:4096/MyService' 发出请求时发生错误。这可能是由于尝试以跨域方式访问服务而没有适当的跨域策略，或不适合 SOAP 服务的策略。您可能需要联系服务所有者发布跨域策略文件，并确保它允许发送与 SOAP 相关的 HTTP 标头。此错误也可能是由于使用Web 服务代理中的内部类型，而不使用 InternalsVisibleToAttribute 属性。有关更多详细信息，请参阅内部异常。

这很奇怪，因为如果从开发服务器使用，它可以正常工作，但如果将服务安装在开发机器中，或者甚至在本地（在 Windows 服务中自托管），它就不起作用。

这是服务原始代码：

```
public partial class WindowsService : ServiceBase
{
    ServiceHost _Host;

    public WindowsService()
    {
        try
        {
            InitializeComponent();
        }
        catch (Exception exc)
        {
            Server.One.Log("Windows service initialization failed: " + exc.Message);
        }
    }

    protected override void OnStart(string[] args)
    {
        try
        {
            Server.One.Start();
            _Host = new ServiceHost(typeof(Service));
            _Host.Open();
        }
        catch (Exception exc)
        {
            Server.One.Log("Windows service start failed: " + exc.Message);
        }
    }

    protected override void OnStop()
    {
        try
        {
            if (_Host != null)
                _Host.Close();
            Server.One.Stop();
        }
        catch (Exception exc)
        {
            Server.One.Log("Windows service stop failed: " + exc.Message);
        }
    }
} 
```

在阅读了[Carlos Figueira](http://code.msdn.microsoft.com/Accessing-self-hosted-WCF-7872c931)关于此主题的文章后，我应用他的方法更改了服务，但仍然无法正常工作。

有任何想法吗？？？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:46:39.880

尝试使用 fiddler 来查看您的应用程序在哪里真正需要您的服务。

这在我身上发生过几次，通常是因为服务器端口更改 8-)

只需将您的 ServiceReferences.ClientConfig 更改为服务器端口。

查看您的服务项目配置（web 选项卡）并将特定端口设置为 4096，如果您想在那里调用它：

![在此处输入图像描述](../Images/22757fa8a40a51841465e249f37aab53.png)

# cuda - CUDA 程序的速度如何随着块数的增加而变化？

> ID：12180576
> 
> 赞同：4
> 
> 时间：2012-08-29T14:43:17.673
> 
> 标签：cuda, gpgpu, gpu

我正在研究 Tesla C1060，它包含 240 个处理器内核，计算能力为 1.3。知道每 8 个内核由单个多处理器控制，并且每个线程块都分配给单个多处理器，那么我预计启动 30 个块的网格应该与单个线程花费相同的执行时间堵塞。然而，事情并没有很好地扩展，即使每个块有 8 个线程，我也从来没有得到过这种很好的扩展。走到另一个极端，每个块有 512 个线程，当网格最多包含 5 个块时，我得到一个块的大致相同时间。当我将性能与在 8 核 CPU 机器上实现与 MPI 并行的相同任务进行比较时，这令人失望。有人可以向我解释一下吗？

顺便说一句，计算机实际上包含两张特斯拉卡，那么它是自动在它们之间分配块，还是我必须采取进一步措施确保两者都被充分利用？

编辑：关于我的最后一个问题，如果我在同一台计算机上启动两个独立的 MPI 进程，我怎样才能让每个进程在不同的显卡上工作？

EDIT2：根据 Pedro 的要求，这里是一个图表，描绘了垂直访问的总时间，标准化为 1 ，与并行块的数量。线程/块的数量 = 512。这些数字是粗略的，因为我观察到大量块的时间差异很大。 ![](../Images/263a15afaeb5ed24ee6393289c8b7b3f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:02:23.793

速度与块数不是简单的线性关系。这取决于一堆东西。例如，内存使用量、块中执行的指令数等。

如果要进行多GPU计算，则需要修改代码，否则只能使用一张GPU卡。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-12T01:01:41.463

在我看来，您只是简单地采用了一个 C 程序并在 CUDA 中编译它而没有太多的麻烦。

亲爱的朋友，这不是要走的路。您必须设计代码以利用 CUDA 卡具有与常规 CPU 不同的内部架构这一事实。特别要考虑以下几点：

*   **内存访问模式**- GPU 中有许多内存系统，每个系统都需要考虑如何最好地使用它

*   **线程分歧问题**——只有当你的大多数线程大部分时间都遵循相同的代码路径时，性能才会好

如果您的系统有 2 个 GPU，您可以同时使用它们来加速一些（合适的）问题。问题是两者的内存区域是分开的并且不容易被彼此“看到” - 你必须设计你的算法来考虑到这一点。

在 GPU 时代之前编写的典型 C 程序通常不容易移植，除非最初是考虑到 MPI 编写的。

要使每个 CPU MPI 线程与不同的 GPU 卡一起工作，您可以使用 cudaSetDevice()

# asp.net - 使用具有 3 层架构的 ASP.NET WebApi

> ID：12180577
> 
> 赞同：1
> 
> 时间：2012-08-29T14:43:37.743
> 
> 标签：asp.net, asp.net-web-api

我一直在努力掌握 ASP 的使用。NET WebApi 最近，我看了一堆教程并阅读了很多资料，但没有找到我需要的信息。这可能是一个非常基本的问题，但我的想法是使用 IIS 托管我的 webapi，并针对 3 层架构，例如表示层、业务日志和数据访问。

现在我为我的表示层创建了一个 MVC 4 项目。但我不太了解的是，我是否会为我的业务逻辑创建另一个带有 web api 模板的 MVC 4 项目，并去掉所有控制器、视图等？

希望我说得通。谢谢阅读。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T14:46:55.757

是否应将 WebAPI 托管在与 MVC 项目不同的 ASP.NET 应用程序中是值得商榷的。两种方法都是正确的。例如，如果您不想将 WebAPI 公开给公众，您可以将它托管在一些只能由您的 MVC 应用程序访问的内部网络中。如果您想向公众公开它，那么您可以将它与您的 MVC 应用程序一起托管。因此，这实际上取决于您是否要向公众公开 HTTP API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T14:47:38.707

3 层架构并不意味着（在一般情况下）SOA（面向服务的架构）。如果您真的需要 SOA - 最好为 API 项目（服务）和 Web UI（演示）设置单独的项目。但是，如果您只需要 SOA 而不需要 REST 服务（用于公共访问），那么使用 WCF 而不是 WebAPI 可能会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T14:46:57.807

Marcel，您的 MVC 是用于定义表示层的模式，您也可以使用 WebForms，但您选择了 MVC，

您还必须创建业务层和数据访问层。这些层独立于 MVC。

选择 MVC 只是允许您方便单元测试（控制器），方便将来更改视图技术，将业务逻辑与表示分离......

# android - BroadcastReceiver 什么时候启用？

> ID：12180584
> 
> 赞同：3
> 
> 时间：2012-08-29T14:43:53.230
> 
> 标签：android, broadcastreceiver

如果我在我的应用程序清单中注册了一个 BroadcastReceiver（例如，要收到网络更改的通知），它什么时候开始收到通知？在设备启动时？还是需要手动启动应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T14:47:49.500

当您的设备完全启动时，它开始接收广播。但是，从 Honeycomb（API 级别 12）开始，您需要至少启动一次应用程序以使其能够开始收听广播。

在 Honeycomb 及更高版本中，当您安装应用程序时，框架将其标记为**STOPPED_PACKAGE**并且不包括其用于侦听的广播接收器。但是一旦你启动你的应用程序，这样的标记就会被删除，你就可以开始了:)

作为替代方案，尝试将标志设置`Intent.FLAG_INCLUDE_STOPPED_PACKAGES`为您的广播意图，以便也包含那些已停止的包。

例如：

```
intent.setFlags(Intent.FLAG_INCLUDE_STOPPED_PACKAGES); 
```

# objective-c - Mac App WebView 背景

> ID：12180586
> 
> 赞同：0
> 
> 时间：2012-08-29T14:43:58.390
> 
> 标签：objective-c, macos, background, webview

如何在 Mac App 中将图像设置为 WebView 的背景？因为 WebView 具有那种“弹跳”效果，所以如果您向下滚动到比内容更远的位置，则背景通常只是白色。是否可以像 UIWebView 一样设置背景图像？

编辑：另一种方法是完全停用 webView 的弹跳效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:56:29.613

如果您以编程方式创建此 Web 视图，则创建图像然后创建 Web 视图。确保它们的位置（x，y）和尺寸（高度，宽度）相同。

如果您通过 IB 执行此操作，请放下图像（实际上只是拖动图像），然后将 webview 放在它上面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-04T03:05:50.950

这是我发现的一种停止弹跳的方法：

```
id sub = self.web.subviews[0];
if ([sub isKindOfClass:[WebFrameView class]])
    [sub setAllowsScrolling:NO]; 
```

可能不需要班级检查，但我想确定一下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-09T11:19:58.333

我们可以使用 cocoa 在 WebView 中添加背景图片。为此，我们需要为 body 标签添加 css。

**创建一个网页视图：**

```
WebView *webView; 
```

**获取图像表单捆绑路径：**

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"my-bg" ofType:@"jpg"]; 
```

**为body标签编写CSS。**

```
NSMutableString *htmlBuilder = [[NSMutableString alloc] init];
[htmlBuilder appendString:@"body {"];
[htmlBuilder appendString:[NSString stringWithFormat:@" background-image: url('file://%@');",path]];
[htmlBuilder appendString:@"}"]; 
```

**在 webview 上加载此图像**

```
[[webView mainFrame] loadHTMLString:htmlBuilder baseURL:nil];
[webView setDrawsBackground:NO]; 
```

您的图像将添加到 webview 的背景中。

# javascript - 为什么 D3 力有向图中的新节点没有一致地显示？

> ID：12180589
> 
> 赞同：0
> 
> 时间：2012-08-29T14:44:03.267
> 
> 标签：javascript, d3.js, nodes, directed-graph

我已经与 d3 合作了一段时间，试图创建一个交互式生态系统浏览器工具来绘制物种之间的关系。最近我尝试添加一个功能，让用户在力有向图中显示或隐藏物种（节点）。我尝试过其他示例，尽管代码有效 - 它只是工作不一致。

出于某种原因，当我添加回一个节点时，它有时是不可见的。图表像添加了节点一样移动，但随后不显示。我感觉它正在添加它，但随后节点又被隐藏在 force.on("tick") 代码中，但不知道为什么。我已经在下面发布了相关代码，非常感谢任何想法！toggleNode 函数确定一个节点是显示还是隐藏 - 基本上只是拼接或添加到节点数组。我将数据保存在一个名为 dataset 的数组中，该数组存储一个标志以指示节点是否可见。

```
var force = d3.layout.force()
.gravity(.05)
.distance(100)
.charge(-100)
.size([w, h]);

var nodes = force.nodes(), links = force.links(); // arrays to hold data

var vis = d3.select("#chart").append("svg:svg")
.attr("width", w)
.attr("height", h);         

force.on("tick", function() {

vis.selectAll("circle.node")
    .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });

vis.selectAll("line.link")
    .attr("x1", function(d) { return d.source.x; })
    .attr("y1", function(d) { return d.source.y; })
    .attr("x2", function(d) { return d.target.x; })
    .attr("y2", function(d) { return d.target.y; });

});

function restart() {

// UPDATE nodes
var node = vis.selectAll("circle.node")
    .data(nodes, function(d) { return d.id;});

// ENTER new nodes
var nodeEnter = node.enter().append("svg:circle")
        .attr("class", "node")
        .attr("cx", function(d) { return d.x; })
        .attr("cy", function(d) { return d.y; })
        .style("fill", function(d) { return groupColors[(d.group)-1]; })
        .style("stroke","fff")
        .style("stroke-width",1)
        .on("mousedown", function(d) {
            clickNode(d);
            })
        .call(force.drag);

// REMOVE deleted nodes
var nodeExit = node.exit().remove();

force.start();
}

// Add the nodes and links to the vis
function createVis(json) {

    dataset = json; // store data in global

    for (var i = 0; i < dataset['nodes'].length; i++) {
        // fill node info
        nodes.push(dataset['nodes'][i]);
    }

    restart();  
}

// Remove node and associated links.
function toggleNode(nodeKey,eol_id) {

    console.log(nodeKey + ': ' + eol_id);

    var tLabel; // value for toggle label

    if ( dataset['nodes'][nodeKey]['isHidden'] == 0 ) {

        // node is visible, so hide it
        tLabel = 'Show';
        for( var k=0; k<nodes.length; k++ ) {
            if ( nodes[k]['eol_id'] == eol_id ) {
                nodes.splice(k, 1); // remove this node
                break;
            }
        }
        dataset['nodes'][nodeKey]['isHidden'] = 1;
        console.log('node removed: ' + nodeKey);

    } else {

        dataset['nodes'][nodeKey]['isHidden'] = 0;

        nodes.push(dataset['nodes'][nodeKey]);

        tLabel = 'Hide';

    }

    $('#primary_title_toggle').html('&nbsp; <a href="#" onclick="toggleNode(' + nodeKey + ',\'' + eol_id + '\')">' + tLabel + '</a><br>');

    restart();

} 
```

# android - 如何检查收到的 Intent 操作是 NEW_OUTGOING_CALL、NEW_INCOMING_CALL 还是挂断？

> ID：12180590
> 
> 赞同：0
> 
> 时间：2012-08-29T14:44:02.610
> 
> 标签：android

```
private static final String CALLACTION = "android.intent.action.PHONE_STATE"; 
```

然后我注册它

```
 final IntentFilter theCallFilter = new IntentFilter();
        theCallFilter.addAction(CALLACTION);

        yourCallReceiver = new CallReceiver();        

        // Registers the receiver so that your service will listen for broadcasts
        registerReceiver(yourCallReceiver, theCallFilter); 
```

后来我检查了

```
if(intent.getAction().equals("android.provider.Telephony.SMS_RECEIVED")) { ... } 
```

但我也可以检查一下是否是

```
android.intent.action.NEW_OUTGOING_CALL 
```

或来电或是否挂断...？如果是的话，如何在这个`PHONE_STATE`活动中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:50:56.713

看看教程

[http://www.tutorialforandroid.com/2009/01/get-phone-state-when-someone-is-calling_22.html](http://www.tutorialforandroid.com/2009/01/get-phone-state-when-someone-is-calling_22.html)

它会解决你的问题

# mysql - 选择分组的行，即使它们不在另一个表中

> ID：12180595
> 
> 赞同：3
> 
> 时间：2012-08-29T14:44:14.123
> 
> 标签：mysql, sql, join

为 SQL 问题命名很难！如果您能想到如何更好地描述这一点，请随意更改它！

我有一个非常典型的设置：3 个表、`users`、`groups`和`group_members`。

这是一个 SQL 小提琴：[http ://sqlfiddle.com/#!2/23712/1](http://sqlfiddle.com/#!2/23712/1)

我想知道哪些组是哪些用户。

所以，我正在运行：

```
SELECT u.id, u.firstname, u.lastname,
GROUP_CONCAT(m.group_id) as groups
FROM group_members m, users u
WHERE m.user_id = u.id
GROUP BY id
ORDER BY u.lastname ASC 
```

这很酷，并向我显示用户名和他们所在的组。

我的问题是不属于任何组的用户不会出现，因为当然 WHERE 位与他们不匹配。

我怎样才能返回不属于任何组的用户？（在上面的 SQL Fiddle 中，我想要 Zack Jones 的另一行，表明他要么在第 0 组，要么为 NULL 或其他什么！）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T14:46:18.570

您应该在不确定匹配是否可用的表上使用 LEFT JOIN。在您的情况下，您应该左加入 group_members 表。

```
SELECT u.id,
       u.firstname,
       u.lastname,
       GROUP_CONCAT(m.group_id) AS groups
FROM   users
       LEFT JOIN group_members
              ON users.id = group_members.user_id
GROUP  BY id
ORDER  BY users.lastname ASC 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T14:46:44.353

```
SELECT
    u.id, u.firstname, u.lastname, GROUP_CONCAT(m.group_id) as groups
FROM
    users u
    LEFT JOIN
    group_members m ON  m.user_id = u.id
GROUP BY u.id, u.firstname, u.lastname
ORDER BY u.lastname ASC 
```

使用[显式 JOIN，而不是隐含的 WHERE JOIN](https://stackoverflow.com/a/5654338/27535)。在这种情况下，使用 LEFT OUTER JOIN

此外，不要依赖 MySQL GROUP BY 扩展：[它们并不总是按预期工作](https://stackoverflow.com/q/6642241/27535)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-29T14:49:15.233

您将希望在以下位置使用`LEFT JOIN`您的`users`桌子`group_members`：

```
SELECT u.id, 
  u.firstname, 
  u.lastname, 
  GROUP_CONCAT(m.group_id) as groups 
FROM users u
LEFT JOIN group_members m 
  ON u.id = m.user_id
GROUP BY u.id, u.firstname, 
  u.lastname
ORDER BY u.lastname ASC 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/23712/8)

或者你`RIGHT JOIN` `group_members`可以`users`

```
SELECT u.id, 
  u.firstname, 
  u.lastname, 
  GROUP_CONCAT(m.group_id) as groups 
FROM group_members m
RIGHT JOIN users u
  ON m.user_id = u.id 
GROUP BY id, u.firstname, 
  u.lastname
ORDER BY u.lastname ASC 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/23712/11)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T14:47:14.047

```
SELECT u.id, u.firstname, u.lastname,
GROUP_CONCAT(m.group_id) as groups
FROM users u
LEFT JOIN group_members m on m.user_id = u.id
GROUP BY u.id
ORDER BY u.lastname ASC 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-29T14:47:38.897

外连接在这些情况下很有用。我已经交换了 users 和 group_members m 以进行左外连接。您还应该考虑避免在 where 子句中执行 JOIN。

```
SELECT u.id, u.firstname, u.lastname, GROUP_CONCAT(m.group_id) as groups 
FROM users u LEFT OUTER JOIN group_members m 
ON m.user_id = u.id 
GROUP BY id 
ORDER BY u.lastname ASC 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-29T14:51:41.563

```
SELECT 
        u.id, 
        u.firstname, 
        u.lastname,
        m.groups
FROM users u
LEFT JOIN (
            SELECT  user_id,
                    GROUP_CONCAT(m.group_id) as groups  
            FROM group_members
           ) as m on m.user_id = u.id
WHERE m.user_id = u.id
GROUP BY id
ORDER BY u.lastname ASC 
```

在您的查询中，您使用的是笛卡尔积。避免使用你的方法，因为它会带来太多不想要的结果，而是使用连接更快，因为它们是

# java - 最佳实践：为 XMLReader 创建 SAX 解析器

> ID：12180606
> 
> 赞同：7
> 
> 时间：2012-08-29T14:44:37.867
> 
> 标签：java, spring, tomcat, amazon-s3, sax

我在同一个 Tomcat 上运行的两个单独的战争中使用 Amazon S3 开发工具包。我在我的一项 Spring 服务的 @PostConstruct 中初始化了一个 AmazonS3Client。

如果我单独运行这些战争，通常一切正常。如果我一起运行它们，其中一个（第二个启动）会引发以下异常：

> com.amazonaws.AmazonClientException：无法为 XMLReader 初始化 sax 驱动程序

如果发生这种情况，我有一个解决方法，我在捕获 AmazonClientException 后设置以下系统属性：

```
try {
  init();
} catch (AmazonClientException ase) {
  System.setProperty("org.xml.sax.driver", "com.sun.org.apache.xerces.internal.parsers.SAXParser");
  init();
} 
```

但这当然是可怕的。有一个更好的方法吗？为什么会在这些情况下发生？

更新：起初，似乎将 AmazonS3Client 的初始化移出 @PostConstruct 并延迟初始化它完全防止了这个错误。但显然它有时仍然会发生 - 即使我只进行一场战争而不是两者。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T12:24:44.893

XMLReader 通过一系列步骤来识别要使用的驱动器。引用文档

*   如果系统属性 org.xml.sax.driver 有一个值，则该值用作 XMLReader 类名。
*   JAR“服务 API”用于在运行时可用的 jarfile 中的 META-INF/services/org.xml.sax.driver 文件中查找类名。
*   强烈建议 SAX 解析器分发提供默认的 XMLReader 类名，该类名仅在之前的选项（在此列表中）不成功时才会生效。
*   最后，如果 ParserFactory.makeParser() 可以返回系统默认的 SAX1 解析器，则该解析器将包装在 ParserAdapter 中。（这是 SAX1 环境的迁移辅助工具，其中 org.xml.sax.parser 系统属性通常可用。）

查看[AWS](https://github.com/amazonwebservices/aws-sdk-for-java/blob/master/src/main/java/com/amazonaws/services/s3/model/transform/XmlResponsesSaxParser.java)开发工具包的代码...

```
public XmlResponsesSaxParser() throws AmazonClientException {
    // Ensure we can load the XML Reader.
    try {
        xr = XMLReaderFactory.createXMLReader();
    } catch (SAXException e) {
        // oops, lets try doing this (needed in 1.4)
        System.setProperty("org.xml.sax.driver", "org.apache.crimson.parser.XMLReaderImpl");
        try {
            // Try once more...
            xr = XMLReaderFactory.createXMLReader();
        } catch (SAXException e2) {
            throw new AmazonClientException("Couldn't initialize a sax driver for the XMLReader");
        }
    }
} 
```

有几件事我不喜欢该代码。

1.  SaxException e 的根本原因被吃掉了。
2.  SaxException e2 的根本原因也被吃掉了。代码至少应该打印一条提及根本原因的警告。
3.  在关卡框架代码中使用 System.setProperty() 可能会导致一些难以调试的问题。

这些点使调试问题变得更加困难。我能做出的最有根据的猜测是，深红色解析器可以在一个类加载路径中访问，但在另一个类加载路径中不存在。找到问题的一个决定性方法是在代码上设置一个断点，试图实例化阅读器并找出根本原因是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T09:22:28.737

由于它使用单例模型，因此隔离此调用的唯一方法是在 WAR 本身中拥有一整套与 SAX 相关的 JAR（它们将加载到不同的类加载器）。当我遇到同样的问题时，它对我有用。这将产生 PermGen 的影响，但是该怎么办。或者如果您不介意更改 S3 库，请将此方法静态同步并共享该库。如果亚马逊的人让这个电话同步，这不会是问题。

# qt - 隐藏 qdialog 并显示主窗口

> ID：12180617
> 
> 赞同：0
> 
> 时间：2012-08-29T14:45:11.800
> 
> 标签：qt, dialog, qmainwindow

我有一个 Qdialog，我可以在其中获得一些输入以在我的主窗口上使用。所以它必须比主窗口先出现。

问题是我的主窗口没有出现。这是我的 main.cpp

```
#include <QtGui/QApplication>

#include "planevolume.h"
#include "dialog.h"

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    Dialog *dialog= new Dialog;
    dialog->show();

    planevolume mainwindow;

    bool dialogcheck = dialog->isHidden();

    if (dialogcheck==1)
    {
        mainwindow.show();
    }
    else
    {
    }

    return app.exec();
} 
```

我有一个按钮，按下时隐藏 qdialog，如果它被隐藏，主窗口应该显示出来，对吗？

这是我使用的 SLOT：

```
void Dialog::startplanevolume()
{
    if (xMax==0 || yMax==0 || zMax==0 || xMMax==0 || yMMax==0 || zMMax==0)
    {
        ui->label_17->setText("Error: Can't start, invalid measures");
    }
    else
    {
        hide();
    }
} 
```

主窗口只能在单击该按钮后启动，因为只有这样我才能输入到主 winodw

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T16:54:07.613

当你按下按钮时，你打电话给你`Dialog::startplanevolume`，是的，但就是这样。你不会回到主循环。

如果你想显示你的`mainwindow`，你可能想`planevolume.show()`在你的`Dialog::startplanevolume`之后调用一个`hide`。

但是，如果您的对象位于不同的文件中，这可能会很棘手。所以也许你可以定义一个类似的信号，在你的（当然......之后）`DialogChecked`发出这个信号，并修改你的，以便它在接收到一个时调用。`Dialog::startplanevolume``hide``main``mainwindow.setVisible(1)``DialogChecked`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T16:58:18.133

所以这里的问题是调用 dialog->show() 不会阻塞执行。在进行调用的那一刻，它会转到下一个方法。您需要阻止执行，直到用户完成输入。

让你的主要是这样的：

```
QApplication app(argc, argv);

Dialog *dialog= new Dialog;
if ( dialog->exec() ) {
    planevolume mainwindow;
    mainwindow.show();
    return app.exec();
}
return 0; 
```

在您的对话框类中，使您的方法如下所示：

```
void Dialog::startplanevolume() 
{
    if (xMax==0 || yMax==0 || zMax==0 || xMMax==0 || yMMax==0 || zMMax==0) 
    {
        ui->label_17->setText("Error: Can't start, invalid measures");
    }
    else 
    {
        this->accept();  // close the dialog with a result of 1
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T19:32:55.840

该`PushButton`动作可能仅在`app.exec()`被调用后发生。在进入主循环之前测试对话框属性是没有意义的。

可以通过将组件设置为以异步方式顺序启动来达到预期的行为。在*Qt*世界中，这意味着使用信号和插槽。

```
connect(dialog, SIGNAL(accept()), &mainwindow, SLOT(show())); 
```

# objective-c - 以度为单位转换千字节

> ID：12180625
> 
> 赞同：-3
> 
> 时间：2012-08-29T14:45:36.680
> 
> 标签：objective-c

我正在尝试对速度计进行编程！我有一个针图像，我希望针根据当前的下载速度旋转。

我有以下方法，但它不起作用。当我用 CurrentDegress 更新我的针头时，它永远不会下降，只会越来越高；针绕着圆圈旋转……有人吗？！

```
- (void) recalculateDegrees:(CGFloat) currentlyLoadedBytes
{
    if(bytes <= 0){
        currentDegrees = 0;
    }
    else if (bytes > completeFileSize){
        currentDegrees = MAX_DEGREES;
    }
    else {
        CGFloat log_tmp =(CGFloat) log10f(currentlyLoadedBytes / 1000);
        currentDegrees = (log_tmp/5.0f)*290.0f;
    }
    //code to rotate image to currentDegrees
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:57:10.330

您可以使用以下方法从速度值（而不是从`currentlyLoadedBytes`）中获取角度：

```
- (CGFloat)angleFromSpeed:(CGFloat)speed
{
    if (speed <= 0) {
        return MIN_ANGLE;
    } else if (speed >= MAX_SPEED) {
        return MAX_ANGLE;
    } else {
        return speed / MAX_SPEED * (MAX_ANGLE - MIN_ANGLE) + MIN_ANGLE;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:51:18.227

我不会 100% 关注你正在做的事情，但`else`你应该在你的街区的某个地方划分`currentlyLoadedBytes / completeFileSize`。另外，`bytes`应该是`cuurentlyLoadedBytes`？

# android - PhoneGap Android jQuery Mobile 应用程序在没有 CSS/JS 的设备上运行

> ID：12180626
> 
> 赞同：0
> 
> 时间：2012-08-29T14:45:38.010
> 
> 标签：android, cordova, jquery-mobile

我有一个 Phonegap (Cordova 2.0.0) 应用程序，专为 Android 构建，使用 jQuery Mobile + Backbone.js 运行。当我在模拟器上测试它时，它可以正常工作（在浏览器中运行，出现 CSS 和 JS 等）。

当我对其进行签名并将其安装在非调试设备上时，它会运行但没有 CSS 和 JS（因此基本上显示了一个不运行 JS 的无样式 HTML 文档）。

我的应用程序的主体如下：

```
<!DOCTYPE html>
<html>
  <head>
  <title>My App</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
    <meta charset="utf-8">

     <link rel="stylesheet" href="libraries/jquery.mobile-1.1.1.min.css" />
     <link rel="stylesheet" href="assets/css/style.css" />

     <script src="http://localhost:8080/target/target-script-min.js#anonymous"></script>

    <script type="text/javascript" charset="utf-8" src="libraries/cordova-2.0.0-ios.js"></script>
    <script src="libraries/jquery-1.7.2.min.js"></script>
        <script src="libraries/underscore.js"></script>
        <script src="libraries/backbone-min.js"></script>
        <script src="libraries/backbone.localStorage-min.js"></script>
        <script src="libraries/detect.js"></script>
        <script type="text/javascript" src="libraries/sha1.js"></script>
    <script type="text/javascript" src="app.js"></script>           

    <script type="text/javascript">

          var jqmReady = $.Deferred();
        var deviceReady = $.Deferred();

        /**
         * on load - manages dependency between jquery mobile and phonegap
         */
        function onBodyLoad()
        {
          // get device
          $.os = {};
        $.os.android = navigator.platform.indexOf("android")>=0;
        $.os.ios = navigator.platform.indexOf("iPhone")>=0 || navigator.platform.indexOf("iPad")>=0;

        // listen to device ready
        if ($.os.android || $.os.ios) {
            document.addEventListener("deviceready", deviceReady.resolve, false);
        }
        else {
          // must be in a browser, so immediately resolve
          deviceReady.resolve();
        }
        }

        $(document).bind("mobileinit", jqmReady.resolve);
        $(document).bind("mobileinit", function() { console.log('mobileinit'); });
        $(document).bind('pageinit', function() { console.log('pageinit'); });

        // when jquery mobile and device ready, then fire
        $.when(jqmReady, deviceReady).then(function() {
          console.log('Ready');
        // disable push state: http://jquerymobile.com/demos/1.1.1/docs/pages/page-links.html
        $.mobile.pushStateEnabled = false;
        App.init();
      });

      onBodyLoad();

    </script>           
  </head>
  <body onload="" data-lat="" data-lng=""> 
```

有没有人遇到过这个？我想知道这是否与相对路径（而不是绝对路径）有关，或者我如何在 Eclipse 中将它打包在一起。此外，在 iPhone 上也可以正常工作。

谢谢。

# python - 为什么我在编组代码上调用 exec 的函数会给出关于全局变量的错误？

> ID：12180627
> 
> 赞同：8
> 
> 时间：2012-08-29T14:45:39.080
> 
> 标签：python, exec

在玩弄marshal[模块](https://docs.python.org/2/library/marshal.html)[`compile()`](https://docs.python.org/2/library/functions.html#compile)和. 我遇到了一些令人困惑的行为。考虑 [`exec`](https://docs.python.org/2/reference/simple_stmts.html#the-exec-statement)`simple.py`

```
def foo():
    print "Inside foo()..."

def main():
    print "This is a simple script that should count to 3."

    for i in range(1, 4):
        print "This is iteration number", i

    foo()

if __name__ == "__main__":
    main() 
```

`exec`当我像这样运行这个脚本时

```
with open('simple.py', 'r') as f:
    code = f.read()
exec code 
```

它给出了预期的输出。

```
This is a simple script that should count to 3.
This is iteration number 1
This is iteration number 2
This is iteration number 3
Inside foo()... 
```

但是，如果我像这样介绍`compile()`,`marshal.dump()`和`marshal.load()`

```
import marshal

def runme(file):
    with open(file, "r") as f:
        code = marshal.load(f)
    exec code

with open("simple.py", "r") as f:
    contents = f.read()

code = compile(contents, "simple.py", "exec")
with open("marshalled", "w") as f:  
    marshal.dump(code, f)

runme("marshalled") 
```

它打印预期输出的开头，然后出错

```
This is a simple script that should count to 3.
This is iteration number 1
This is iteration number 2
This is iteration number 3
Traceback (most recent call last):
  File "./exec_within_function.py", line 17, in <module>
    runme("marshalled")
  File "./exec_within_function.py", line 8, in runme
    exec code
  File "simple.py", line 15, in <module>
    main()
  File "simple.py", line 12, in main
    foo()
NameError: global name 'foo' is not defined 
```

为什么它说`foo`没有定义？

为了理解，我尝试`dir()`像这样使用

```
import simple # imports simple.py
dir(simple) 
```

正如预期的那样，它表明`foo`已定义。

```
['__builtins__', '__doc__', '__file__', '__name__', '__package__', 'foo', 'main'] 
```

我还注意到，当我`dis.dis()`在反序列化代码对象（通过读取`marshal.load()`）上使用时，我看到的唯一东西是`LOAD_NAME`and `CALL_FUNCTION`for `main()`，但是当我这样做`import`时

```
import dis, sys

import simple
dis.dis(sys.modules["simple"]) 
```

它按预期给了我整个反汇编。

我什至查看[了 python 用于编译的一些代码，](https://svn.python.org/projects/python/trunk/Lib/py_compile.py)虽然我认为`import`使用某种查找表进行定义，但我不确定`compile()`导致这种行为的区别是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T19:54:03.930

该脚本成功运行了您的 simple.py 代码 3 次。这是否澄清了什么？还是我误解了你的问题？

```
# from original example
with open('simple.py', 'r') as f:
    code = f.read()
exec(code)
# compile and run again
a = compile(code, "simple_compiled_this_file_not_created", "exec")
exec(a)
# marshal and unmarshal
import marshal
f = open("./marshalfoo.bin", "wb")
marshal.dump(a,f) 
f.close()
b = marshal.load(open("./marshalfoo.bin", "rb"))
exec(b) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-28T17:50:14.473

> 为什么它说`foo`没有定义？

这个小得多的例子给出了同样的错误

```
with open("simple.py", "r") as f:
    code = f.read()

def wrap_exec(code):
    exec code

wrap_exec(code) 
```

但这个没有。

```
with open("simple.py", "r") as f:
    code = f.read()

exec code 
```

如果您还没有猜到，那么当您`exec`从函数中调用时就会出现问题。

要找到最好的解释和解决方案，请查看[*为什么 exec() 在函数内部调用时工作方式不同以及如何避免它*](https://stackoverflow.com/q/55763182/7246614)的答案。为了完整起见，以下是我建议您在这种情况下解决它的方法。

由于您可以更改`exec`ed 代码（`simple.py`在此示例中），因此可以通过添加`global`声明轻松解决问题。

```
global foo # added

def foo():
    print "Inside foo()..."

def main():
    print "This is a simple script that should count to 3."

    for i in range(1, 4):
        print "This is iteration number", i

    foo()

if __name__ == "__main__":
    main() 
```

至于为什么`dir(simple)`仍然显示`foo`，实际上是因为你`import`编辑`simple.py`而不是编辑`exec`它的内容。不仅会`foo`出现在 的输出中`dir()`，而且当您使用`import`.

```
import simple
simple.main() 
```

如果这让你感到惊讶，那是因为当你`import`做某事时，Python 将它视为一个模块。在一个模块中，在顶层声明的东西会自动变成全局的。

关于令人困惑的输出`dis.dis`，我无法重现该行为，因此我无法研究它并提供解释。

# php - Magento 不正确的 404 重定向

> ID：12180629
> 
> 赞同：2
> 
> 时间：2012-08-29T14:45:45.337
> 
> 标签：php, magento, redirect, http-status-code-404

Magento 正在将任何 404 错误重定向到管理员登录。在管理设置中，我将无路由设置设置为我确认存在的 CMS 页面。

我已经为此奋斗了一个星期。清除缓存、重新索引、重建 url 重写等...

如果有办法完全绕过 magento 处理 404，我可以通过 htaccess 执行此操作，以使其正常工作。

想法？

我还检查并禁用了我安装的任何自定义模块，看看它们是否影响它。那里没有运气。

检查 apache/php 日志以及 Magento 生成的异常和系统日志。没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:54:42.607

你检查过设置吗？

管理->系统->配置->Web->默认页面

默认无路由 URL 应设置为“cms/index/noRoute”

该显示下方的下拉菜单是您的 404 页面。

当然你可以把 noRoute 放到你自己的模块中，只要把 'yourmodule/yourindexcontroller/whateveraction' 放在框中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:56:49.657

如果您遇到“4xx 错误”，则表示错误发生在用户/客户端。如果您遇到“5xx 错误”，则表示错误发生在服务器端。

```
404 Not Found 
```

> 无法找到请求的资源，但将来可能会再次可用。[2] 客户的后续请求是允许的。

我不确定，但听起来错误出在您的控制器中。您正在调用一个不存在的控制器操作。

# javascript - 使用数组表示法在多个字段上的 jQuery 日期选择器

> ID：12180634
> 
> 赞同：1
> 
> 时间：2012-08-29T14:45:59.843
> 
> 标签：javascript, jquery, jquery-ui

使用 JS 生成输入字段列表，其名称为：

```
name="date_from[]" 
```

类，“date_picker”，使用实例化：

```
$( ".date_picker" ).datepicker({ dateFormat: "dd-mm-yy" }); 
```

当使用 JS 生成新记录时，新的输入字段确实会显示日期选择器，但选择的日期总是插入到第一个字段中。

是否有任何解决方案，或者可能是 date_picker 中的选项以使其插入当前选定的字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:06:06.490

datepicker 有一个`onClose`事件，它为结果提供一个变量。您需要将其取出、拆分并将其设置为您的输入：

```
var $input = $('input')
$input.datepicker({
    dateFormat: 'dd-mm-yy'
  , onClose: function(dateText) {
        for (var i = 0, date = dateText.split('-'), item; item = $input[i];) {
            item.value = date[i++];
        }
    }
})​ 
```

这是[一个活生生的例子](http://jsfiddle.net/Calou/fWuw6/)。

# python - Python/Django 脚本在 MySQL 死锁时崩溃

> ID：12180637
> 
> 赞同：2
> 
> 时间：2012-08-29T14:46:07.990
> 
> 标签：python, mysql, django, deadlock

由于死锁，以下脚本和平保持错误：

```
sqlQuery = """INSERT INTO gps_points (gps_track_segment_id, gps_unit_id, date, lat,  lng) SELECT MAX(gps_track_segments.id) AS gps_track_segment_id, %(gps_unit_id)s AS gps_unit_id, %(date)s AS date, %(lat)s AS lat, %(lng)s AS lng FROM gps_track_segments 
    INNER JOIN gps_tracks ON gps_track_segments.gps_track_id = gps_tracks.id WHERE gps_tracks.hash = %(track)s"""

from django.db import connection, transaction
cursor = connection.cursor()
success = cursor.execute(sqlQuery, point)
transaction.commit_unless_managed() 
```

错误日志显示：

```
2012-08-28 12:37:58,051 - django.db.backends - DEBUG - (0.018) INSERT INTO gps_points (gps_track_segment_id, gps_unit_id, date, lat, lng) SELECT MAX(gps_track_segments.id) AS gps_track_segment_id, 121 AS gps_unit_id, '2012-08-28 12:37:56' AS date, 51361100 AS lat, 4983910 AS lng FROM gps_track_segments 
    INNER JOIN gps_tracks ON gps_track_segments.gps_track_id = gps_tracks.id WHERE gps_tracks.hash = '7f5d950564786e182e175fb5d8e1b937528f85cc1ddabbee0d53859fb603ede3'; args={'gps_unit_id': 121L, 'lat': 51361100, 'date': '2012-08-28 12:37:56', 'course': None, 'track': u'7f5d950564786e182e175fb5d8e1b937528f85cc1ddabbee0d53859fb603ede3', 'speed': '0.0', 'lng': 4983910, 'segment': 5, 'altitude': None, 'accuracy': None}
Exception in thread Thread-1:
Traceback (most recent call last):
  File "/usr/lib64/python2.6/threading.py", line 532, in __bootstrap_inner
self.run()
  File "/usr/lib64/python2.6/threading.py", line 484, in run
self.__target(*self.__args, **self.__kwargs)
  ...
  ...
  File "/tcpserver/gpslibs.py", line 75, in saveGpsPoint
success = cursor.execute(sqlQuery, point)
  File "/usr/lib/python2.6/site-packages/django/db/backends/util.py", line 40, in execute
return self.cursor.execute(sql, params)
  File "/usr/lib/python2.6/site-packages/django/db/backends/mysql/base.py", line 114, in execute
return self.cursor.execute(query, args)
  File "/usr/lib64/python2.6/site-packages/MySQLdb/cursors.py", line 173, in execute
self.errorhandler(self, exc, value)
  File "/usr/lib64/python2.6/site-packages/MySQLdb/connections.py", line 36, in defaulterrorhandler
raise errorclass, errorvalue
DatabaseError: (1213, 'Deadlock found when trying to get lock; try restarting transaction') 
```

使用 mysql 命令 SHOW ENGINE INNODB STATUS 我看到上述查询与 php 网站请求的查询冲突。问题是有时 php-request 被回滚，有时 INSERT。最后一种情况导致脚本因死锁错误而停止。由于更改所涉及的查询非常困难。我现在喜欢如果：

我可以以某种方式制作一个不会在死锁中失败并再次尝试的 Django/Python 脚本吗？Ofcouse 我并不真正关心 php 请求失败或回滚。从可用性的角度来看，这很容易处理。我确实关心后端脚本失败。这需要高于一切

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:58:39.943

> 我可以以某种方式制作一个不会在死锁中失败并再次尝试的 Django/Python 脚本吗？

您可以捕获引发的异常`DatabaseError`，然后执行再次执行事务的逻辑（可能通过在插入行之前先获取表上的写锁）。

```
try:
    success = cursor.execute(sqlQuery, point)
except DatabaseError:
     # retry here 
```

理想情况下，您应该将其包装在可以再次调用的方法中。

# javascript - 将查询字符串值从 asp.net 页面传递到 iframe

> ID：12180638
> 
> 赞同：0
> 
> 时间：2012-08-29T14:46:09.923
> 
> 标签：javascript, jquery, asp.net

我有一个带有文本框和按钮的 asp.net 页面。单击按钮时，我打开一个弹出窗口并使用 iframe 在其中加载一个页面。我想将文本框的值作为查询字符串传递给 iframe 中的页面。我怎样才能做到这一点？

我尝试像这样使用服务器端 iframe：

```
<iframe id="popupframe" runat="server" src="~/temp.aspx" width="100%" height="455">
            </iframe> 
```

但 temp.aspx 不加载并给出 404。如果我在没有服务器端标记的情况下使用它

```
<iframe id="popupframe"  src="../../../../temp.aspx" width="100%" height="455">
            </iframe> 
```

页面在 iframe 中加载，但我无法将文本框的值传递给 temp.aspx。请提出解决方案。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:01:08.473

temp.aspx 绝对是您网站的根目录吗？404 错误通常非常清楚地表明您正在寻找的东西不存在！而且您在工作的纯 HTML 版本中有相对路径这一事实让我认为您的服务器端版本的路径可能存在问题。

作为替代方案，您可以将查询字符串传递给弹出页面，并在该页面上使用一些 javascript 来操作 iframe 的 src 属性。

例如（弹出页面上的脚本）

```
var qs = window.location.search; // Gets the entire querystring - not very obvious!
var iframe = document.getElementById("popupframe");
iframe.src += qs; // Adds the querystring on to the end of the iframe's src. 
```

您希望在页面内容加载后运行它。我不知道您使用的是 jQuery 还是其他框架（或没有框架！），所以我不会讨论如何做到这一点（但如果您需要我可以）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:51:29.580

尝试这个：

```
<iframe id="popupframe" runat="server" src="<%= Page.ResolveUrl("~/temp.aspx") %>" width="100%" height="455">
            </iframe> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-23T13:00:40.267

我用这个

按钮单击事件上的代码隐藏

this.iframRfer.Attributes["src"] = "visit_opd_refer.aspx?regnn="+opdNo; mpopup.Show();

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-25T05:54:05.917

```
 <% Int64 ss =Convert.ToInt64( Request.QueryString["id"].ToString());%>
 <% string bb = ss.ToString().Insert(0, "testing.aspx?id="); %>
  <iframe    src="<%=bb %>"   style="height: 100%; width: 100%; border: 2px;"> 
 </iframe> 
```

不需要任何脚本。这也是一种格式。

# database - 数据库和程序设计

> ID：12180646
> 
> 赞同：1
> 
> 时间：2012-08-29T14:46:30.690
> 
> 标签：database, sqlite, database-design

我正在制作用于监视三个不同系统之间的文件移动的 Web 应用程序，每个系统将生成一个具有以下格式的日志文件：

```
Folder, Filename, DataTime, Filesize 
```

要求是确定在 生成的文件`System1`是否成功传输到`3rd System`. 并且还要识别失败点。

我正在使用`SQLite`数据库，因为我必须将失败的文件信息保存 7 天。

**数据库设计：**

> `Folder, Filename, DateTime, FileSize, FileSource`

`FileSource`可以是`System1`, `System2`, `System3`.

这样我可以进行批量插入，但会减慢识别失败文件的速度，任何人都可以帮助我编写好的 SQL 来识别失败的文件。

例如：样本数据

```
folder1, file1, 2012-29-08 23:01:02, 10, S1
folder1, file1, 2012-29-08 23:03:02, 10, S2 
```

上述 ex 数据表示 S2 到 S3 之间的文件夹 1/文件 1 传输失败。

*注意：每天将传输超过 10,000 个文件。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:07:16.417

我不确定你能不能从这里到达那里。您最好从实际执行传输的程序中记录错误代码。

你现在的桌子有一些问题。

```
CREATE TABLE filelog (
  folder text, 
  filename text, 
  datatime timestamp, 
  filesize integer, 
  filesource text);

-- Your failed transfer . . .
INSERT INTO "filelog" VALUES('folder1','file1','2012-08-29 23:01:02',10,'S1');
INSERT INTO "filelog" VALUES('folder1','file1','2012-08-29 23:03:02',10,'S2');
-- . . . and a duplicate of it.
INSERT INTO "filelog" VALUES('folder1','file1','2012-08-29 23:01:02',10,'S1');
INSERT INTO "filelog" VALUES('folder1','file1','2012-08-29 23:03:02',10,'S2'); 
```

替换我的表名，您的查询是

```
select folder, filename, count() 
from filelog group by folder, filename having count() < 3; 
```

使用上面的数据，即使有两次失败，您的查询也不会返回任何行。（或者一个故障的两个副本。）修复它的第一步是声明一个可防御的主键。

```
CREATE TABLE filelog (
  folder text, 
  filename text, 
  datatime timestamp, 
  filesize integer, 
  filesource text,
  primary key (folder, filename, datatime)
); 
```

该主键约束将阻止您两次输入单个传输。它允许您每天多次传输同一文件，这在第一次传输失败时可能有意义。

```
-- Your failed transfer . . .
INSERT INTO "filelog" VALUES('folder1','file1','2012-08-29 23:01:02',10,'S1');
INSERT INTO "filelog" VALUES('folder1','file1','2012-08-29 23:03:02',10,'S2');
-- . . . and an earlier transfer that also failed.
INSERT INTO "filelog" VALUES('folder1','file1','2012-08-23 23:01:02',10,'S1');
INSERT INTO "filelog" VALUES('folder1','file1','2012-08-23 23:03:02',10,'S2'); 
```

您的查询将再次不返回任何行。我们需要更好地定义成功和失败的转移。

似乎成功的转移具有这些特征。

*   它包括所有三个源——S1、S2 和 S3。
*   它用于单个路径名，其中*路径名*表示文件夹 + 目录分隔符 + 文件名。
*   时间戳遵循文件源顺序。换句话说，S1 的“datatime”在 S2 的“datatime”之前，S2 的“datatime”在 S3 的“datatime”之前。
*   对于任何唯一的 {folder, filename, datatime}，所有三个文件源的字节数都是相同的。

还有*大，麻烦的特性。. .

*   单个文件传输的所有三行必须属于单个“批次”（因为没有更好的词）。这意味着我们不能让查询将下面的前两行（传输失败）与下面的最后一行（成功传输的一部分）组合在一起，即使时间戳的顺序正确并且传输的字节是正确的.

    ```
    folder1  file1  2012-08-29 23:01:02  10  S1
    folder1  file1  2012-08-29 23:03:02  10  S2
    folder1  file1  2012-08-29 23:45:02  10  S1
    folder1  file1  2012-08-29 23:48:02  10  S2
    folder1  file1  2012-08-29 23:53:02  10  S3 
    ```

这*会*有些复杂。而且我可能完全误解了您成功转移的标准。

（您可能可以为“数据时间”列起一个更好的名称。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T19:31:27.183

你完全误解了我的情况

```
CREATE TABLE filelog (
   folder       text, 
   filename     text, 
   transferTime     timestamp, 
   filesize     integer, -- what time the transfer occurs at this filesource 
   filesource   text,
   primary key (folder, filename, filesource)
   ); 
```

每个源将生成一个日志文件，其中包括它们传输或处理的文件。

案例：如果在 S1 的日志文件中找到了 file1.txt，而在 S2 的日志文件中丢失了，这意味着 S1 和 S2 之间的传输失败。

如果在 S1 和 S2 日志文件中都找到了 file1.txt，并且不在 S3 日志文件中，则 S2 和 S3 之间的传输失败，或者 S3 没有处理该文件。

通过这个查询，我可以找到在 S2 或 S3 中丢失的文件：

```
select folder, filename, filesource, count(*) 
from filelog 
group by folder, filename, filesource
having count() < 3; 
```

在回复您时我得到了答案，如果计数为 1，则表示 S1 和 S3 传输失败，或者如果计数为 2，则表示 S2 和 S3 之间的传输失败。

感谢您的回复。@catcall

# html - 整个拉伸链接

> ID：12180648
> 
> 赞同：0
> 
> 时间：2012-08-29T14:46:33.047
> 
> 标签：html, css

li 中的文本是一个链接，因为包括文本在内的整个 li 项目都应该作为链接工作。我怎样才能得到它，以便整个 li 项目作为链接而不是 li 中的文本运行？

CSS：

```
#navbar {
    width: 900px;
    height: 50px;
    background-image: url(http://iforce.co.nz/i/chiislxt.mp4.png);
}

#navbar ul {
    list-style-type:none;
    margin:0px;
    padding:0px;
    text-align: center;
}

#navbar ul li {
    height: 50px;
    width: auto;
    float: left;
    padding-left: 20px;
    padding-right: 20px;
    line-height: 50px;
    border-right: 1px solid black;
}

#navbar ul li a {
    display: block;
    height: 100%;
}

#navbar a:link {
    font-weight:bold;
    color: black;
    font-family: Franklin Gorthic Heavy, Helvetica, sans-serif;
    text-decoration: none;
}

#navbar a:hover {
    background-color: #003300;
    color: gold;
}

#navbar a:visited {
    color: black;
}

a:active {
    background-color: #003300; 
    color: gold;
} 
```

HTML：

```
 <div id="navbar">
        <ul>
            <li><a href="#home">HOME</a></li>
            <li><a href="#about">ABOUT</a></li>
            <li><a href="#news">NEWS</a></li>
            <li><a href="#reading">READING</a></li>
            <li><a href="#store">STORE</a></li>
            <li><a href="#contact">CONTACT</a></li>
        </ul>
    </div> 
```

这是一个供参考的屏幕截图：（主页上有我的光标）

![在此处输入图像描述](../Images/ccef5b29e6ea31a86f1dec28a4b58913.png) 干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:52:21.283

这是一个简单的例子：

[http://jsfiddle.net/DFS5P/](http://jsfiddle.net/DFS5P/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:55:17.537

给你的&`padding`锚**而**不是**LI**。像这样写：`height`

 ****```
#navbar ul li {
    float: left;
    border-right: 1px solid black;
}

#navbar ul li a {
    display: block;
    padding-left: 20px;
    padding-right: 20px;
    line-height: 50px;
    height: 50px;
} 
```

检查这个[http://jsfiddle.net/DFS5P/1/](http://jsfiddle.net/DFS5P/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T14:49:16.367

然后你应该将一些 li css 移动到 a css - 像这样

```
#navbar ul li {
    height: 50px;
    width: auto;
    float: left;

}

#navbar ul li a {
    display: block;
    height: 100%;
   padding-left: 20px;
    padding-right: 20px;
    line-height: 50px;
    border-right: 1px solid black;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T14:52:55.603

如果您从列表项中删除填充并给它们一个固定的宽度，它会根据您的需要工作。

```
#navbar ul li {
    height: 50px;
    width: 100px;
    float: left;
    line-height: 50px;
    border-right: 1px solid black;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/RtmXs/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T14:53:27.047

这绝对不是最好的方法，但有时我只是将整个 'li' 移动到 'a' 标签内。这样，当您单击它时，“li”中的所有内容都会转到链接。

我工作得很好，但正如我所说，这不是最好的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T14:50:54.963

尝试添加

```
width:100%; 
```

至：

```
#navbar ul li a {
    display: block;
    height: 100%;
} 
```****

# html - 如何让 -ms-grid 在 win8 html 和 javascript Metro 应用程序中自适应宽度布局？

> ID：12180651
> 
> 赞同：2
> 
> 时间：2012-08-29T14:46:38.967
> 
> 标签：html, css, layout, windows-8, microsoft-metro

我的代码都在 default.html 中，html 是：

```
<div id="content">
    <div class="group" id="left">
            <div>Left_1</div>
            <div>Left_2</div>
            <div>Left_3</div>
            <div>Left_4</div>
            <div>Left_5</div>
    </div>
    <div class="group" id="center">
            <div>Center_1</div>
            <div>Center_2</div>
            <div>Center_3</div>
    </div>
    <div class="group" id="right">
            <div>Right_1</div>
            <div>Right_2</div>
    </div>
</div> 
```

而CSS是：

```
body {
    font-size:20px;
}

#content {
    display:-ms-grid;
    -ms-grid-rows:1fr;
    -ms-grid-columns:auto auto auto;
    height:100%;
}

.group {
    margin-right:20px;
}

#left {
    -ms-grid-column:1;
}

#center {
    -ms-grid-column:2;
}

#right {
    -ms-grid-column:3;
}

.group div {
    width:300px;
    height:300px;
    background:#888;
    margin:10px;
    text-align:center;
} 
```

结果是： ![在此处输入图像描述](../Images/1c430bdc071e70ed2e120dd286db07e5.png)

但我需要的是： ![在此处输入图像描述](../Images/25edf631adf6a90c2486d5331a923f47.png)

如何修改css？谁能帮帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T15:42:28.100

你应该使用 flexbox：

```
.container 
{
    display: -ms-flex;
    -ms-flex-direction: column;
} 
```

然后把你的物品放在那个容器里，你们应该都很好。

我肯定会建议在仅限 Metro 的应用程序中使用 flexbox over table-cell。

flexbox 布局有很多额外的选项，这可能会变得非常复杂。请参阅[此处](http://ie.microsoft.com/testdrive/Graphics/hands-on-css3/hands-on_flex.htm)进行动手操作（请务必在 IE10 中查看），并[在此处](http://msdn.microsoft.com/en-us/library/ie/hh673531%28v=vs.85%29.aspx)获取更多文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:54:59.000

您应该能够通过使用其 Layout 设置为 GridLayout 的 ListView 来实现所需的布局。列表视图的信息在这里[http://msdn.microsoft.com/en-us/library/windows/apps/br211837.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br211837.aspx)

查看 Visual Studio 2012 中 Javascript 部分下的 Grid App 模板（当您选择 File -> New Project 时）以获取示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T07:28:53.747

我通过使用 flexbox 解决了这个问题：

```
.group {
    display:-ms-flexbox;
    -ms-flex-align:center;
    -ms-flex-pack:start;
    -ms-flex-direction:column;
    -ms-flex-wrap:wrap;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T23:57:57.823

Flexbox 确实为您提供了这一点，但需要您使用 winjs 列表视图重新连接您开箱即用的所有行为......（页面导航、点击事件、数据绑定等）

Gridview 不允许您水平显示数据。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-08-29T15:20:39.513

见[http://jsfiddle.net/zuB3k/](http://jsfiddle.net/zuB3k/)

如果您使用`display:-ms-grid`的是仅受 IE 10 支持的 ，您可以使用`display:table`and `display:table-cell`，它遵循 w3c 标准并且从版本 8 开始受支持。

```
body {
    font-size:20px;
}

#content {
    height:100%;
    display:table;
    width:100%;
}

.group {
    display:table-cell;
    padding-right:20px;
    vertical-align:top;

}

.group div {
    width:100px;
    height:100px;
    background:#888;
    margin:10px;
    text-align:center;
    float:left;
} 
```

# visual-c++ - vs2005 - vc++- 无法为此文件显示设计器，因为其中没有任何类可以设计

> ID：12180653
> 
> 赞同：0
> 
> 时间：2012-08-29T14:46:45.793
> 
> 标签：visual-c++, visual-studio-2005, gui-designer

我知道这个话题之前已经被问过好几次了，但似乎没有一个能解决我的问题。我需要创建一个 Windows 窗体应用程序（在 Visual Studio 2005 中，32 位），我需要使用 makefile 构建它。我只是从创建一个 Windows 窗体应用程序开始，然后将“properties->General->Configuration Type”更改为“Makefile”。然后我添加了一个实际上什么都不做的简单的makefile。问题是当我这样做时，那个设计师不再工作了。文件的内容是：

表格1.h：

```
#pragma once
namespace design {
    using namespace System;
    using namespace System::ComponentModel;
    using namespace System::Collections;
    using namespace System::Windows::Forms;
    using namespace System::Data;
    using namespace System::Drawing;
    public ref class Form1 : public System::Windows::Forms::Form
    {
    public:
        Form1(void)
        {
            InitializeComponent();
        }
    protected:
        ~Form1()
        {
            if (components)
            {
                delete components;
            }
        }
    private:
        System::ComponentModel::Container ^components;
#pragma region Windows Form Designer generated code
        void InitializeComponent(void)
        {
            this->components = gcnew System::ComponentModel::Container();
            this->Size = System::Drawing::Size(300,300);
            this->Text = L"Form1";
            this->Padding = System::Windows::Forms::Padding(0);
            this->AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;
        }
#pragma endregion
    };
} 
```

主文件（design.cpp）：

```
// design.cpp : main project file.
#include "stdafx.h"
#include "Form1.h"
using namespace design;
[STAThreadAttribute]
int main(array<System::String ^> ^args)
{
    // Enabling Windows XP visual effects before any controls are created
    Application::EnableVisualStyles();
    Application::SetCompatibleTextRenderingDefault(false); 
    // Create the main window and run it
    Application::Run(gcnew Form1());
    return 0;
} 
```

制作文件（design.mak）：

```
all: clean 
clean:
    @echo Clean
    if exist *.obj erase *.obj
    @echo Clean done! 
```

项目文件（design.vcproj）：

```
<?xml version="1.0" encoding="windows-1254"?>
<VisualStudioProject
    ProjectType="Visual C++"
    Version="8,00"
    Name="design"
    ProjectGUID="{2652A3E3-D3B2-48F0-8C9C-831BF4912839}"
    RootNamespace="design"
    Keyword="MakeFileProj"
    >
    <Platforms>
        <Platform
            Name="Win32"
        />
    </Platforms>
    <ToolFiles>
    </ToolFiles>
    <Configurations>
        <Configuration
            Name="Debug|Win32"
            OutputDirectory="$(SolutionDir)$(ConfigurationName)"
            IntermediateDirectory="$(ConfigurationName)"
            ConfigurationType="0"
            CharacterSet="1"
            ManagedExtensions="2"
            >
            <Tool
                Name="VCNMakeTool"
                BuildCommandLine=""
                ReBuildCommandLine=""
                CleanCommandLine=""
                Output=""
                PreprocessorDefinitions=""
                IncludeSearchPath=""
                ForcedIncludes=""
                AssemblySearchPath=""
                ForcedUsingAssemblies=""
                CompileAsManaged=""
            />
        </Configuration>
        <Configuration
            Name="Release|Win32"
            OutputDirectory="$(SolutionDir)$(ConfigurationName)"
            IntermediateDirectory="$(ConfigurationName)"
            ConfigurationType="1"
            CharacterSet="1"
            ManagedExtensions="2"
            WholeProgramOptimization="1"
            >
            <Tool
                Name="VCPreBuildEventTool"
            />
            <Tool
                Name="VCCustomBuildTool"
            />
            <Tool
                Name="VCXMLDataGeneratorTool"
            />
            <Tool
                Name="VCWebServiceProxyGeneratorTool"
            />
            <Tool
                Name="VCMIDLTool"
            />
            <Tool
                Name="VCCLCompilerTool"
                PreprocessorDefinitions="WIN32;NDEBUG"
                RuntimeLibrary="2"
                UsePrecompiledHeader="2"
                WarningLevel="3"
                DebugInformationFormat="3"
            />
            <Tool
                Name="VCManagedResourceCompilerTool"
            />
            <Tool
                Name="VCResourceCompilerTool"
            />
            <Tool
                Name="VCPreLinkEventTool"
            />
            <Tool
                Name="VCLinkerTool"
                AdditionalDependencies="$(NoInherit)"
                LinkIncremental="1"
                GenerateDebugInformation="true"
                SubSystem="2"
                EntryPointSymbol="main"
                TargetMachine="1"
            />
            <Tool
                Name="VCALinkTool"
            />
            <Tool
                Name="VCManifestTool"
            />
            <Tool
                Name="VCXDCMakeTool"
            />
            <Tool
                Name="VCBscMakeTool"
            />
            <Tool
                Name="VCFxCopTool"
            />
            <Tool
                Name="VCAppVerifierTool"
            />
            <Tool
                Name="VCWebDeploymentTool"
            />
            <Tool
                Name="VCPostBuildEventTool"
            />
        </Configuration>
    </Configurations>
    <References>
        <AssemblyReference
            RelativePath="System.dll"
            AssemblyName="System, Version=2.0.0.0, PublicKeyToken=b77a5c561934e089, processorArchitecture=MSIL"
        />
        <AssemblyReference
            RelativePath="System.Data.dll"
            AssemblyName="System.Data, Version=2.0.0.0, PublicKeyToken=b77a5c561934e089, processorArchitecture=x86"
        />
        <AssemblyReference
            RelativePath="System.Drawing.dll"
            AssemblyName="System.Drawing, Version=2.0.0.0, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL"
        />
        <AssemblyReference
            RelativePath="System.Windows.Forms.dll"
            AssemblyName="System.Windows.Forms, Version=2.0.0.0, PublicKeyToken=b77a5c561934e089, processorArchitecture=MSIL"
        />
        <AssemblyReference
            RelativePath="System.XML.dll"
            AssemblyName="System.Xml, Version=2.0.0.0, PublicKeyToken=b77a5c561934e089, processorArchitecture=MSIL"
        />
    </References>
    <Files>
        <Filter
            Name="Source Files"
            Filter="cpp;c;cc;cxx;def;odl;idl;hpj;bat;asm;asmx"
            UniqueIdentifier="{4FC737F1-C7A5-4376-A066-2A32D752A2FF}"
            >
            <File
                RelativePath=".\AssemblyInfo.cpp"
                >
            </File>
            <File
                RelativePath=".\design.cpp"
                >
            </File>
            <File
                RelativePath=".\stdafx.cpp"
                >
                <FileConfiguration
                    Name="Release|Win32"
                    >
                    <Tool
                        Name="VCCLCompilerTool"
                        UsePrecompiledHeader="1"
                    />
                </FileConfiguration>
            </File>
        </Filter>
        <Filter
            Name="Header Files"
            Filter="h;hpp;hxx;hm;inl;inc;xsd"
            UniqueIdentifier="{93995380-89BD-4b04-88EB-625FBE52EBFB}"
            >
            <File
                RelativePath=".\Form1.h"
                FileType="3"
                >
                <File
                    RelativePath=".\Form1.resX"
                    SubType="Designer"
                    >
                </File>
            </File>
            <File
                RelativePath=".\resource.h"
                >
            </File>
            <File
                RelativePath=".\stdafx.h"
                >
            </File>
        </Filter>
        <Filter
            Name="Resource Files"
            Filter="rc;ico;cur;bmp;dlg;rc2;rct;bin;rgs;gif;jpg;jpeg;jpe;resx;tiff;tif;png;wav"
            UniqueIdentifier="{67DA6AB6-F800-4c08-8B7A-83BB121AAD01}"
            >
            <File
                RelativePath=".\app.ico"
                >
            </File>
            <File
                RelativePath=".\app.rc"
                >
            </File>
        </Filter>
        <Filter
            Name="Make Files"
            >
            <File
                RelativePath=".\design.mak"
                >
            </File>
        </Filter>
        <File
            RelativePath=".\ReadMe.txt"
            >
        </File>
    </Files>
    <Globals>
    </Globals>
</VisualStudioProject> 
```

解决方案文件（design.sln）：

```
Microsoft Visual Studio Solution File, Format Version 9.00
# Visual Studio 2005
Project("{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}") = "design", "design.vcproj", "{2652A3E3-D3B2-48F0-8C9C-831BF4912839}"
EndProject
Global
    GlobalSection(SolutionConfigurationPlatforms) = preSolution
        Debug|Win32 = Debug|Win32
        Release|Win32 = Release|Win32
    EndGlobalSection
    GlobalSection(ProjectConfigurationPlatforms) = postSolution
        {2652A3E3-D3B2-48F0-8C9C-831BF4912839}.Debug|Win32.ActiveCfg = Debug|Win32
        {2652A3E3-D3B2-48F0-8C9C-831BF4912839}.Debug|Win32.Build.0 = Debug|Win32
        {2652A3E3-D3B2-48F0-8C9C-831BF4912839}.Release|Win32.ActiveCfg = Release|Win32
        {2652A3E3-D3B2-48F0-8C9C-831BF4912839}.Release|Win32.Build.0 = Release|Win32
    EndGlobalSection
    GlobalSection(SolutionProperties) = preSolution
        HideSolutionNode = FALSE
    EndGlobalSection
EndGlobal 
```

我知道 makefile 没有做任何事情（它也不适用于合理的 makefile），但在这种情况下我不在乎构建操作。我所做的唯一更改是更改“配置类型”属性并将 .vcproj 文件中的“关键字”属性更改为 Keyword="MakeFileProj"。（否则构建不起作用？！）。我真的被困在这里，寻找任何有用的想法。

谢谢，

选择44

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:47:51.620

终于找到了解决办法。问题出在“properties->NMake->IntelliSense->Common Language Runtime Support”选项中。我将它从“无公共语言运行时支持”更改为“公共语言运行时支持”，它现在可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:51:58.840

您不需要将项目转换为 Makefile 类型。任何 Visual Studio 项目都可以从批处理文件或 makefile 的命令行构建。请参阅此参考：http: [//msdn.microsoft.com/en-us/library/xee0c8y7%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/xee0c8y7%28v=vs.80%29.aspx)

您需要使用 /Build 开关。例子：

```
devenv foo.csproj /Build "Release"
devenv foo.vcproj /Build "Debug" 
```

# .net - 在角色启动时从 Azure Blob 存储下载 .exe 的 Powershell 脚本失败：文件大小为 0KB

> ID：12180657
> 
> 赞同：3
> 
> 时间：2012-08-29T14:46:53.733
> 
> 标签：.net, powershell, azure, azure-blob-storage

使用 SDK 和模拟器的 2012 年 6 月版本，我正在尝试在 Azure 辅助角色上安装 Java 运行时可执行文件，如下示例：[http ://code.msdn.microsoft.com/windowsazure/Installing-Java-in -Web-94f145dd#content](http://code.msdn.microsoft.com/windowsazure/Installing-Java-in-Web-94f145dd#content)。

我已将 x64 安装程序作为 blob 上传，并将其重命名为“Java.exe”（只是为了使文件名更容易理解）：

![斑点](../Images/358c839747c05d2c457995208d361ba9.png)

当我使用[Azure Storage Explorer](http://azurestorageexplorer.codeplex.com/)检查时，我可以看到 blob 在那里，并且大小正确 (31MB)。

按照这个例子，我然后使用这个启动任务：

```
<Startup>
    <Task commandLine="Run.cmd" executionContext="elevated" taskType="background" />
</Startup> 
```

要调用此命令：

```
powershell -executionpolicy unrestricted -file .\Launch.ps1

start /w Java.exe /s 
```

这反过来又调用了这个powershell脚本：

```
function download_from_storage ($container, $blob, $connection, $destination) {
Add-Type -Path ((Get-Location).Path + '\Microsoft.WindowsAzure.StorageClient.dll')
$storageAccount = [Microsoft.WindowsAzure.CloudStorageAccount]::Parse($connection)
$blobClient = New-Object Microsoft.WindowsAzure.StorageClient.CloudBlobClient($storageAccount.BlobEndpoint, $storageAccount.Credentials)   
$remoteBlob = $blobClient.GetBlobReference($container + '/' + $blob)
$remoteBlob.DownloadToFile($destination + "\" + $blob)
}

$connection_string = 'DefaultEndpointsProtocol=https;AccountName=devstoreaccount1; AccountKey=Eby8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw=='

# JRE
$jre = 'Java.exe'
download_from_storage 'startuputil' $jre $connection_string (Get-Location).Path 
```

这可行，如果我浏览到模拟器在本地磁盘上创建的 approot，我可以在那里看到 Java.exe，但它的文件大小为 0KB，并且运行它失败并出现错误“不是有效的 Win32 应用程序”

![空 Java.exe](../Images/229fd0765157196c4dc23526425f7e27.png)

显然下载开始了，但由于某种原因，它似乎没有完成。谁能告诉我为什么？

我想知道它是否与这个问题有关：[Exception Downloading Azure Blob](https://stackoverflow.com/questions/11550005/exception-downloading-azure-blob)，但是针对我们的实时存储帐户运行它会以完全相同的方式失败。

我应该补充一点，我是一个相当有经验的 C# 程序员，但对 powershell 知之甚少，所以我或多或少地逐行遵循示例。而且我并不是真的在寻找解决方法 - 通过将其包含在项目中并将其设置为始终复制来打包此文件非常简单，但我将需要这种技术来处理其他更大的文件，所以想如果可能的话，让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:59:38.237

（将我的评论转换为答案）

我相信错误消息可能意味着容器不存在。您确定“startuputil”是您创建的容器的正确名称吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:24:26.167

尝试像这样指定您的连接字符串：

```
$connection_string = 'UseDevelopmentStorage=true' 
```

希望这可以帮助。

# python - 增量发生在它应该之前

> ID：12180659
> 
> 赞同：0
> 
> 时间：2012-08-29T14:46:56.090
> 
> 标签：python, for-loop

```
a_string = 'abc'

destination = [2, 3]    

edges = { (1, 'a') : [2, 3],
          (2, 'a') : [2],
          (3, 'b') : [4, 3],
          (4, 'c') : [5] }

def make(a_string, destination, edges):
    n = 0
    while n + 1 < len(a_string):
        letter = a_string[n]
        letter2 = a_string[n + 1]
        for d in destination:                              # (1)
            if (d, letter2) in edges:
                for state in edges[(d, letter2)]:
                    destionation.append(state)
            destination.remove(d)
        n += 1                                             # (2)
    return destination 
```

代码返回`[]`，但我希望看到`[5]`，所以我认为问题在于它`n`意外增加然后进行`letter2`更改。为什么此代码`n`在完成`for`循环（在位置 1）之前递增（在位置 2）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:55:20.660

在循环完成之前 n 不会增加。您可能缺少的是 while 循环检查 n+1 而不是 n。

现在编辑我们有更多信息：

问题是您正在从具有未定义行为的迭代器中删除项目。

尝试

```
for d in destination[:]: 
```

这是整个数组的切片运算符，因此它充当复制构造函数。您现在正在循环一个不同的对象，并且删除应该是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:14:28.947

您也可以遍历字符串，并且使用`index`字符串的方法可以获取字符的下一个位置。

结合这两者，您的初始外循环可以简化：

```
def make(a_string, destination, edges):

    for letter in a_string:
        while a_string.index(letter)+1 < len(a_string):
            next_letter = a_string[a_string.index(letter)+1] 
```

此外，您不应命名变量`string`，因为它是模块的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T14:50:10.253

如果在循环结束时不给 n 加 1，则循环条件保持不变，循环将永远执行。它不是在 for 循环中执行，而是在 while 循环体中执行。（缩进决定了一行属于哪个代码块！）

# asp.net - 本地 asp.net 安装 - SQL Server Express、IISExpress

> ID：12180660
> 
> 赞同：0
> 
> 时间：2012-08-29T14:46:56.703
> 
> 标签：asp.net, iis-express, sql-server-2008r2-express

我有一个使用 SQL Server 2008 R2 Express 在 localhost 上运行的 ASP.NET 项目。我想使用我需要在客户端 PC 中安装的所有内容进行设置，并以不需要配置 SQL Server Express 的方式自动化它（如创建数据库、用户、成员资格等）。

最好的方法是什么？我搜索了一些生成安装文件的应用程序（如 Installshield，但免费），但我的主要问题是如何在不提示输入的情况下设置所有需要的配置的 SQL Server 2008 R2 Express？

另一个问题是如何在我打开网站时让 IIS Express 运行？我想让它与 .exe 应用程序（可能是特定于站点的网站）相似。最好的方法是什么？

编辑：

我制作了一个批处理脚本，例如：

> 启动 iisexpress.exe /site:xpto
> 
> 启动 http://localhost/xpto

这是最好的方法吗？有什么建议么 ？

问候

# objective-c - NSMangedObject 在索引处替换

> ID：12180666
> 
> 赞同：0
> 
> 时间：2012-08-29T14:47:09.647
> 
> 标签：objective-c, macos, core-data, nsmanagedobject

我还是`NSMangedObject`s 的新手，我在替换某个索引处的对象时遇到了麻烦。

```
 for (NSString *file in filelist){

    NSManagedObject *fileEntity = [NSEntityDescription insertNewObjectForEntityForName:@"File" inManagedObjectContext:[self managedObjectContext]];
    [fileEntity setValue:file forKey:@"filename"];

    NSImage *audioImage = [NSImage imageNamed:@"tag_white.png"];
    [fileEntity setValue:audioImage forKey:@"taggedImage"];
    [markedAudioFiles addObject:audioImage];

} 
```

如您所见，我可以轻松地插入托管对象。它显示表格上的文件和所有内容。但是，我想更改`@"taggedImage"`键的某个索引处的一些值。

所以我尝试了这样的事情：

```
NSEntityDescription *fileEntity = [NSEntityDescription entityForName:@"File" inManagedObjectContext:[self managedObjectContext]];
NSImage *audioImage = [NSImage imageNamed:@"tag_green.png"];

[fileEntity replaceValueAtIndex:index inPropertyWithKey:@"taggedImage" withValue:audioImage]; 
```

我得到的错误是：

> [ valueForUndefinedKey:]：这个类对于键 taggedImage 不符合键值编码。

我什至尝试将`fileEntity`上面的声明替换为

```
NSManagedObject *fileEntity = [NSEntityDescription insertNewObjectForEntityForName:@"File" inManagedObjectContext:[self managedObjectContext]]; 
```

但由于它不是一个新对象，我认为这是错误的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T15:01:17.570

在您的第二个代码块中`fileEntity`只是对对象的描述，它不是实际的`NSManagedObject`，因此它没有 key `taggedImages`。

但是，这不是您的代码无法工作的真正原因。我认为你正在尝试做的事情有一个更大的问题不是这样做的方法！

如果您尝试更新索引*n*`taggedImage`处的对象的属性，那不是这样做的方法。您的第一个问题是 CoreData 中的 File 对象是如何排序的 - 它是按名称排列的，是按日期创建的，还是随机排列的？你不知道，所以在*n*处索取物品还没有任何意义！`File`

 **您需要查询数据存储并按特定顺序获取项目（请参阅Apple`NSFetchRequest`的[核心数据教程](https://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/iPhoneCoreData01/Articles/05_Fetching.html#//apple_ref/doc/uid/TP40008305-CH107-SW1)。

一旦按照您想要的顺序将文件对象从核心数据中取出，您就可以在索引*n*处获取项目，将其更新为 taggedImage 然后保存。

* * *

PS但是，如果您每次只想更新一个时都必须全部获取核心数据中的许多项目，这将变得非常低效:)**

# java - 为什么这个观察者在运行时不更新？

> ID：12180668
> 
> 赞同：3
> 
> 时间：2012-08-29T14:47:13.080
> 
> 标签：java, observer-pattern

我有一个实现 Observer & Runnable 的类，如下所示（我知道这个例子可能很笨拙）：

```
public class Triage implements Observer,Runnable{
    Observable obsrvbl;
    private BlockingQueue<String> messages; 
    volatile static boolean interrupted=false;  
    double updated;

    Triage(Observable obsrvbl, BlockingQueue messages){
    this.obsrvbl=obsrvbl;
    this.messages = messages;
    obsrvbl.addObserver(this);
    }

    public void update(Observable o, Object arg){
        updated += ((Double)arg).doubleValue();
        System.out.println("updated");
    }

    public void run(){
        String msg; 
        while(!interrupted){
            msg=messages.take();
            if(msg!=null){    
                //do something with message         
            }
        }
    }
} 
```

正在查看的队列在 Observable 调用 notifyObservers() 的同时填充。当 Queue 上没有任何内容时，在 Observer 上成功调用 update()，但如果 Queue 上有要处理的消息，则永远不会调用 update()。这是预期的行为吗？

我见过[这个](https://stackoverflow.com/questions/6537532/java-observer-observable-pattern-does-not-notify)，但它似乎是一个不同的问题。

这是 Observable - 有点做作：

```
public class Producer extends Observable implements Runnable {
    volatile static boolean interrupted=false;
    private BlockingQueue<String> quotes;
    Producer(BlockingQueue quotes){
        this.quotes=quotes; 
    }
    public void run(){
        String msg;     
        while(!interrupted){    
            msg=quotes.take();
            if(msg!=null){
                setChanged();
                notifyObservers(Double.valueOf(3.0));   
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:56:17.110

弄清楚这有什么问题-我的疏忽。正如@slim 在评论中建议的那样，两个队列是相同的，因此 Triage 的 run() 在 Producer 的 run() 之前消耗了消息，因此没有收到通知。无论如何，fwiw - 这是一个完整的工作示例：

```
public class Triage implements Observer,Runnable{
    Observable obsrvbl;
    private BlockingQueue<String> messages; 
    volatile static boolean interrupted=false;  
    Integer updated = 0;
    private static Random rand = new Random(47);

    Triage(Observable obsrvbl, BlockingQueue messages){
        this.obsrvbl=obsrvbl;
        this.messages = messages;
        obsrvbl.addObserver(this);
    }

    public void update(Observable o, Object arg){
        updated += ((Integer)arg);
        System.out.println("Updated: " + updated);
    }

    public void run(){
        String msg; 
        while(!interrupted){
            try{
                msg=messages.take();
                System.out.println("Run: " + msg);
            }catch(InterruptedException ie){}
        }
    }

    public static void main(String[] args){
        BlockingQueue<String> q1 = new LinkedBlockingQueue<String>();
        BlockingQueue<String> q2 = new LinkedBlockingQueue<String>();
        Producer p = new Producer(q1);
        new Thread(p).start();
        new Thread(new Triage(p,q2)).start();
        for(int i=0;i<20;i++){      
            int next = rand.nextInt(10)*500;
            System.out.println("Populating: " + next);
            q1.add((Integer.valueOf(next)).toString());
            q2.add((Integer.valueOf(next)).toString());         
        }
    }
}

class Producer extends Observable implements Runnable {
    volatile static boolean interrupted=false;
    private BlockingQueue<String> quotes;
    Producer(BlockingQueue quotes){
        this.quotes=quotes; 
    }
    public void run(){
        String msg;     
        while(!interrupted){    
            try{
                msg=quotes.take();
                if(msg!=null){
                    System.out.println("Notifying: " + msg);
                    setChanged();
                    notifyObservers(Integer.valueOf(msg));  
                }
            }catch(InterruptedException ie){}
        }
    }
} 
```

# objective-c - 与 xcode、未分类、pngcrush 和复制 png 文件错误中的图像有关的奇怪错误？

> ID：12180675
> 
> 赞同：14
> 
> 时间：2012-08-29T14:47:33.247
> 
> 标签：objective-c, xcode, pngcrush

```
(null): While reading /Users/lewiselliott/Desktop/Final Version/2bm/2bm/static.png pngcrush caught libpng error:
(null): Could not find file: /Users/lewiselliott/Desktop/Final Version/2bm/build/Debug-iphoneos/2bm.app/static.png
Command /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/Xcode/PrivatePlugIns/iPhoneOS Build System Support.xcplugin/Contents/Resources/copypng emitted errors but did not return a nonzero exit code to indicate failure 
```

这是什么意思，为什么它才刚刚开始发生，我该如何解决？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-01-24T23:38:17.933

我有这个问题。为同一图像添加了两个目标。转到项目目标 -> 构建阶段 -> 复制捆绑资源并搜索您的图像文件名。很可能有两个条目。删除一个。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-08-29T15:09:13.923

我猜这是在设备上测试应用程序时发生的。这是因为您的图像 static.png。它不是一个 png 文件。删除该文件并重试。另外，我猜该应用程序不会崩溃，并且上面提到的图像没有显示在它应该显示的任何地方。尝试在 Photoshop 中打开文件并将其另存为 png。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-22T13:14:40.577

我也有这个问题。原来我在两个不同的组中有两组同名的 png 文件。我全部删除并加载了一组。然后它工作得很好。我的问题是用于启动画面的 Default.png 文件。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-09-01T08:58:34.520

我有同样的问题。我检查了所有目标，发现 Default-568@2x.png 只添加了一次（Default-568@2x.png 是给我造成问题的文件）。我只是在项目 -> 目标 -> 构建设置 -> 打包 -> 压缩 PNG 文件中取消选中“压缩 PNG 文件”选项，它确实对我有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-29T05:35:55.133

有类似的问题。我的问题是我将它保存为 jpg，但将其命名为 png 文件。我不认为 xcode 非常喜欢。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-08T05:10:43.513

我有一个带有`.png`扩展名的文件，当我只将扩展名更改为`.jpg`- 它不起作用。*我真的不知道它应该*是什么图像格式......

所以我搜索了一个在线图像转换器，它可能会“吞下”损坏的艺术品并从中制作出体面的格式化图像，并且[在谷歌中的第一次搜索给了我这个](http://www.coolutils.com/Online/Image-Converter/)。

它做得很好。在它转换为之后，我可以使用[在线图像编辑器](http://pixlr.com/editor/)`JPEG`打开它并将其保存为. 刷新就像一个魅力。`PNG``PNG`

# api - Tumblr API v2 发布错误未授权

> ID：12180677
> 
> 赞同：3
> 
> 时间：2012-08-29T14:47:34.847
> 
> 标签：api, post, oauth-2.0, tumblr

当我发布一篇包含几个字的文章时，它还可以，但是当我尝试发布一篇超过 100 个字的文章时，会出现“未授权”错误。

这是发布请求（我将 oauth 令牌更改为公开）

```
发布 /v2/blog/mysite.tumblr.com/post HTTP/1.1
TE：放气，gzip；q=0.3
连接：TE，关闭
Authorization: OAuth oauth_nonce="b9282afe60b7f",oauth_timestamp="13462177",oauth_version="1.0",oauth_consumer_key="CnVDC1PdI5d26DRZpJ88JYuO",oauth_token="qTIeLpAQWSIZ2wYBFoUeZMQjkgRDlvEGLjJw7xjo",oauth_signature_method="HMAC-SHA1",oauth_signature="GG8ywH0iq94C6a8jpwryktIE%3D"
主办方：api.tumblr.com
用户代理：libwww-perl/6.04
内容长度：781
内容类型：application/x-www-form-urlencoded

正文 = 古代 + 领域 + 的 + 神秘 + (ADOM) + 是 + 一个 + 的 + 最 + 成功 + roguelike + 游戏 + 曾经 + 创建 %2C + + 下载 + 中 + 百万 + 和 + 很多 + 更多+every+day.+ADOM+was+the+first+roguelike+to+add+a+true+角色扮演+经验+to+the+roguelike+流派+and+it+has+inspired+无数+数字+的+新+角色+玩%2Froguelike+游戏+你+可能+已经+看过+在+最后+2+十年。%C2%A0+ADOM+是+在+开发+从+1994+直到+2002年11月%2C+when+the+last+build+was+released.+现在%2C%C2%A0creator+Thomas+Biskup+is+resurrecting%C2%A0it%2C+with+a%C2%A0crowd%C2%A0funding+活动+on+Indiegogo。++这+新+化身+的+ADOM+已经+已经+超越+它+资金+和+三个+伸展+目标。+你+可以+预期+跟随+新+功能+在+the+game%2C+包括+a+full+图形+版本&title=Linux+resources&tags=linux

HTTP/1.1 401 未授权

```

# javascript - HTML/JavaScript 表头

> ID：12180682
> 
> 赞同：-2
> 
> 时间：2012-08-29T14:47:43.767
> 
> 标签：javascript, html

有人可以帮我在表格顶部创建一个新行作为标题，如..

```
| S.No | Date | Product Name | Client Name | 
```

请看这个[小提琴](http://jsfiddle.net/QwBsa/2/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T14:58:57.273

...

```
var orderArrayHeader = ["S.No","Date","Product Name","Client Name"]; 
```

...

```
var thead = document.createElement('thead');

table.appendChild(thead);

for(var i=0;i<orderArrayHeader.length;i++){
    thead.appendChild(document.createElement("th")).
    appendChild(document.createTextNode(orderArrayHeader[i]));
} 
```

...

[http://jsfiddle.net/QwBsa/12/](http://jsfiddle.net/QwBsa/12/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:53:20.470

利用

```
<table>
    <thead>
        <tr>
            <th>S.No</th>
            <th>Date</th>
            <th>ProductName</th>
            <ht>ClientName</th>
        </tr>
    </thead> 
```

做一些造型，你会得到你想要的......

# python - Google App Engine app.yaml 不适用于旧版 Python 2.5 主/从应用程序

> ID：12180686
> 
> 赞同：0
> 
> 时间：2012-08-29T14:48:02.863
> 
> 标签：python, google-app-engine, app.yaml

拥有运行 Python 2.5 和 Master/Slave 的旧版 GAE 应用程序。

试图让 url 路由工作，这就是我所拥有的`app.yaml`：

```
application: theapp
version: 1
runtime: python
api_version: 1

handlers:
    - url: /rest/.*
      script: np/resources/rest.py 
```

希望它可以与以下网址一起使用：

```
http://localhost:8080/rest/something 
```

但我不断收到`404`错误

根据[应用引擎文档](https://developers.google.com/appengine/docs/python/config/appconfig#About_app_yaml)，这应该可以工作。

有任何想法吗？

# ruby-on-rails - 在 Ruby on Rails 中设置日志记录级别

> ID：12180690
> 
> 赞同：48
> 
> 时间：2012-08-29T14:48:19.827
> 
> 标签：ruby-on-rails, ruby-on-rails-3, logging

我正在使用以下代码在我的 Ruby on Rails 应用程序中配置日志记录：

环境.rb：

```
Rails.logger = Logger.new(STDOUT)

class Logger
  def format_message(severity, timestamp, progname, msg)
    "#{timestamp.to_formatted_s(:db)} #{severity} #{msg}\n"
  end
end 
```

我正在尝试将日志记录级别设置为现在使用警告

```
config.log_level = :warn 
```

在我的 production.rb 中，但它似乎不起作用。我在这里错过了什么吗？

如果我将 Rails.logger.level = 4 放在我的 environment.rb 中，它似乎确实有效。但我想在我的环境初始化程序中配置一些东西。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-09-01T06:53:54.630

根据[官方文档](http://guides.rubyonrails.org/v3.2.14/debugging_rails_applications.html#log-levels)，您应该使用：

```
config.log_level = :warn # In any environment initializer, or
Rails.logger.level = 0 # at any time 
```

如果这些都不适合您，请尝试：

```
config.log_level = Logger::WARN 
```

如果这不起作用，请尝试：

```
config.logger.level = Logger::WARN 
```

***注意：****最后一种方法似乎将两种官方策略混为一谈，但在某些情况下有效*

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-07-07T19:00:13.990

对于 Rails 4.0，您可以在`production.rb`（或您想要的环境）中设置值，如下所示：

```
# Set to :debug to see everything in the log.
config.log_level = :warn 
```

**更新** [文档](http://guides.rubyonrails.org/debugging_rails_applications.html#log-levels)说明它是这样的：

> ### 2.2 日志级别
> 
> 记录某些内容时，如果消息的日志级别等于或高于配置的日志级别，则会将其打印到相应的日志中。如果您想知道当前的日志级别，您可以调用该`Rails.logger.level`方法。
> 
> 可用的日志级别有：`:debug`、`:info`、`:warn`、`:error`、`:fatal`和`:unknown`，分别对应从 0 到 5 的日志级别编号。要更改默认日志级别，请使用
> 
> ```
> config.log_level = :warn # In any environment initializer, or
> Rails.logger.level = 0 # at any time 
> ```
> 
> 当您想要在开发或暂存中登录时，这很有用，但您不想让生产日志充满不必要的信息。
> 
> > 默认的 Rails 日志级别是`info`生产模式，调试模式是开发和测试模式。

# sql - 另一个我不明白的 SQL 语句

> ID：12180692
> 
> 赞同：0
> 
> 时间：2012-08-29T14:48:26.147
> 
> 标签：sql

我知道我的问题的答案与排名有关，只是不知道该怎么做。我声明的目标是只获取 5 条记录，但优先于某个表中的记录。

我有两张桌子：`News`和`NewsToLocation`。

让我们假设新闻表中有 4 个新闻项和 3 个`NewsToLocation`符合我的要求。由于我只能选择 5 我想确保`News`表中的 4 获得偏好，然后只从`NewsToLocation`表中选择 1。我当前的查询正在做相反的事情，我不知道如何解决它。

这是整个查询。

```
SELECT 
newSpotlights.* 
FROM
(SELECT 
    TOP 5 n.news_id, 
    n.is_spotlight, 
    n.location_id, 
    n.news_title, 
    CAST(n.news_content AS varchar(200)) AS news_content, 
    n.writing_date,
    n.publication_date, 
    n.end_date, 
    n.alt_uri, 
    n.youtube_code, 
    n.icon_img_file, 
    n.banner_img_file
FROM 
    (SELECT 
        n.news_id
    FROM rcde_news n
    WHERE n.location_id = 4
    AND n.is_spotlight = 1 AND n.publication_date < GETDATE() AND n.end_date > GETDATE()
    AND n.status_id = 2 /*2 = Active rcde_ItemStatus*/
    UNION
    SELECT 
        n.news_id
    FROM rcde_newsToLocation ntl
    INNER JOIN rcde_news n ON ntl.news_id = n.news_id
    WHERE ntl.location_id = 4
    AND n.status_id = 2 /*2 = Active rcde_ItemStatus*/ 
    ) AS News
INNER JOIN rcde_news n ON news.news_id = n.news_id
WHERE n.is_spotlight = 1
AND n.publication_date < GETDATE()
AND n.end_date > GETDATE()
ORDER BY publication_date DESC
) AS newSpotlights 
```

我觉得我应该能够通过对最内部查询进行排名来做一些排序，但我不确定到底该怎么做。我有点理解排名，但不知道如何在`UNION`声明中做到这一点。我可以做一些简单的事情，比如分别在工会的不同部分选择 1 作为等级和 2 作为等级，然后按等级排序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:54:49.067

您可以将 1 添加为排名，将 2 作为排名添加到查询的联合部分，然后先按此排序。

```
SELECT 
    TOP 5 
    n.news_id, 
    n.is_spotlight, 
    n.location_id, 
    n.news_title, 
    CAST(n.news_content AS varchar(200)) AS news_content, 
    n.writing_date,
    n.publication_date, 
    n.end_date, 
    n.alt_uri, 
    n.youtube_code, 
    n.icon_img_file, 
    n.banner_img_file
FROM 
    (SELECT 
        1 as rank,
        n.news_id
    FROM rcde_news n
    WHERE n.location_id = 4
    AND n.is_spotlight = 1 AND n.publication_date < GETDATE() AND n.end_date > GETDATE()
    AND n.status_id = 2 /*2 = Active rcde_ItemStatus*/
    UNION
    SELECT 
        2 as rank,
        n.news_id
    FROM rcde_newsToLocation ntl
    INNER JOIN rcde_news n ON ntl.news_id = n.news_id
    WHERE ntl.location_id = 4
    AND n.status_id = 2 /*2 = Active rcde_ItemStatus*/ 
    ) AS News
INNER JOIN rcde_news n ON news.news_id = n.news_id
WHERE n.is_spotlight = 1
AND n.publication_date < GETDATE()
AND n.end_date > GETDATE()
ORDER BY rank DESC, publication_date DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:54:08.943

是的，你基本上有你的排名想法：

```
select top 5 Column1, Column2
from (
    select top 5 Column1, Column2, 1 as Rank
    from News
    order by SomeColumn

    union all

    select top 5 Column1, Column2, 2 as Rank
    from NewsLocation
    order by SomeColumn
    ) x
order by Rank 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T14:54:23.810

```
SELECT
    TOP 5 
    n.news_id
FROM 
    (SELECT 
        1 as ranking,
        n.news_id
    FROM rcde_news n
    WHERE blah blah
    UNION
    SELECT 
        2 as ranking,
        n.news_id
    FROM rcde_newsToLocation ntl
    WHERE blah blah

    ) AS News
ORDER BY publication_date DESC, Ranking 
```

# sql - 如何从日期（格式monyy）大于今天的行中获取数据

> ID：12180695
> 
> 赞同：0
> 
> 时间：2012-08-29T14:48:29.983
> 
> 标签：sql, oracle

我有一个数据库，其中有一列将日期列为 MONYY ex。FEB05、JUN12 等。我想从日期>= 今天的行中获取数据。我尝试使用 to_date 如下

```
select t.date, t.data, to_date(t.date, 'monyy') from table t
   where to_date(t.date,'monyy') >='8/1/2012' 
```

但是我收到错误消息说 FROM 关键字不在预期的位置。

在编写此查询时需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:53:31.020

`table`是保留字，而不是有效的表名。交换`table`您的表的实际名称。

**编辑：** 我试过了，如果我将最终日期更改为：

```
to_date('8/1/2012', 'mm/dd/yyyy') 
```

# asp.net - responseText 返回“错误”而不是从服务器返回的实际异常消息 - jqgrid ASP.NET MVC4

> ID：12180697
> 
> 赞同：0
> 
> 时间：2012-08-29T14:48:41.670
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, jqgrid, jqgrid-asp.net

我在 ASP.NET MVC4 中创建了一个应用程序，并将我的应用程序托管在 IIS 7.5 中。当我尝试在 jqgrid 中执行一个从服务器引发异常但它只是在 jqgrid 中显示为“错误”的操作时，我注意到一个奇怪的问题。

在控制器操作中，在 catch 块中，我正在抛出一条我想要显示的消息，它在我的机器上工作得很好，但是当我尝试使用 //machine-name 从另一台机器连接到服务器（我的机器）时/virtual-directory-name/，我只是显示“错误”。

我真的很怀疑我的虚拟目录中的某些设置导致了这个问题。我应该在虚拟目录设置中更改什么以使其正常工作。

我目前有

```
Anonymous Authentication - Enabled (Application Pool Identity)
ASP.NET Impersonation    - Enabled 
Windows Authenticaiton   - Enabled 
```

请帮助，感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T02:14:22.010

经过一段时间的努力，我弄清楚了问题所在以及如何解决问题。正如我所怀疑的，这个问题与 web.config 设置有关，可以通过在 web.config 文件中添加一个附加标签来解决。

在 web.config 中，将以下标记添加到`<system.web>`标记中。

```
<customErrors mode="Off"/> 
```

共有三种模式；开、关和仅远程。将其设置为 Off 将使我们能够显示 ASP.NET 特定的详细错误。出于安全原因，建议您使用 RemoteOnly，以防您不向远程客户端显示应用程序特定的错误。

希望这对某人有所帮助，这样他们就不必在他们的系统上猛烈抨击了。

# javascript - 包含多个由缩略图触发的幻灯片的投资组合

> ID：12180699
> 
> 赞同：-1
> 
> 时间：2012-08-29T14:48:56.120
> 
> 标签：javascript, jquery, html, gallery

前几天我发现以下网站使用了一个很棒的画廊/幻灯片/作品集，但我找不到任何类似的插件幻灯片。关键功能是：单独的拇指/链接将特定图像平稳快速地加载到幻灯片中。

[http://www.blacktie.es/#!trifermed](http://www.blacktie.es/#!trifermed)

这种类型的代码/幻灯片/画廊有特定的名称吗？到目前为止，我发现的只是正常的幻灯片。

有没有人用过类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:54:00.413

仅供参考，幻灯片本身使用[jQuery Cycle](http://jquery.malsup.com/cycle/)，一个强大的插件，版本 2 目前正在开发中。

# javascript - 在页面中找不到元素的正确位置。函数不考虑填充

> ID：12180701
> 
> 赞同：0
> 
> 时间：2012-08-29T14:49:06.280
> 
> 标签：javascript, position, padding

考虑到其他元素的位置，我一直在尝试寻找好的功能来帮助我将元素放置在页面中。我没有使用 jQuery。

所以我发现很多消息来源告诉我应该导航到目标元素的 offsetParent，获取它们的 offsetTops 和 offsetLefts。它几乎可以工作，但我做了一些测试并意识到它没有考虑一些父母的填充。我使用 CSS 更改了填充，它仍然给出相同的数字。当我将元素放在页面中时，它会被卡在靠近或超过父级的边距

我正在使用这个功能（它与我在网上找到的大多数功能非常相似）

```
function getOffset(el){
if(isString(el)) el = document.getElementById(el);

var x = el.offsetLeft;
var y = el.offsetTop;

while(el = el.offsetParent){
    x += el.offsetLeft;
    y += el.offsetTop;
}

return { left: x, top: y }; 
```

}

朋友们知道怎么解决吗？如果我发布一些图片有帮助吗？我已经尝试过更改 css，并且我确信问题出在一个元素的填充上。

@编辑

我正在使用 Firefox 14.0.1

在原始页面中还有许多其他元素，这就是我得到的数字不同的原因。但是jsfiddle中的错误是一样的。它向左表示 1（这可能是元素“内容”的边框宽度）。它没有考虑元素“registerArea”中左填充的 15 像素，也没有考虑它的边界。

[http://jsfiddle.net/rhPYH/25/](http://jsfiddle.net/rhPYH/25/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:41:31.533

好的，

我一直在使用 display: table 来使元素的大小自动调整到它的内容。出于某种原因，Javascript aws 在找到这个元素“registerArea”的正确大小时遇到​​了一些问题（它有一个**显示：table rule 和 paddings**）。我所做的是**更改 block 的显示**。它仍在正确呈现元素，现在 Javascript 正在考虑填充，这给了我元素的正确位置。

# python - DynamoDB 扫描函数返回正确的结果，但出现 DynamoDBResponseError

> ID：12180704
> 
> 赞同：2
> 
> 时间：2012-08-29T14:49:13.897
> 
> 标签：python, amazon-web-services, amazon-dynamodb

我正在尝试使用扫描功能从我的数据库中的表中检索任何 10 个结果，如下所示：

```
 conn = boto.connect_dynamodb(
         aws_access_key_id=config.AWS_KEY,
         aws_secret_access_key=config.AWS_SECRET)

  table = conn.get_table('tablename')
  results = table.scan(attributes_to_get={'id'},
            max_results=10)

  for item in results:
    print item

  ./dbtest.py
   {'id': 'SkAJWDUZPSNrwepf7gdnFhExXPFABmqLjk1ADDRJuoo'}
   {'id': 'RjAVvd4SAmjtUbXEYmzBaIIDuruL5UZWEQPdcpj4XRc'}
   ... 
```

但是最后我得到了这个错误（在返回正确的结果之后）：

```
Traceback (most recent call last):
  File "./mediatest.py", line 23, in <module>
    for item in results:
  File "/usr/lib/python2.7/dist-packages/boto/dynamodb/layer2.py", line 767, in scan
    object_hook=item_object_hook)
  File "/usr/lib/python2.7/dist-packages/boto/dynamodb/layer1.py", line 521, in scan
    return self.make_request('Scan', json_input, object_hook=object_hook)
  File "/usr/lib/python2.7/dist-packages/boto/dynamodb/layer1.py", line 121, in make_request
    retry_handler=self._retry_handler)
  File "/usr/lib/python2.7/dist-packages/boto/connection.py", line 746, in _mexe
    status = retry_handler(response, i, next_sleep)
  File "/usr/lib/python2.7/dist-packages/boto/dynamodb/layer1.py", line 148, in _retry_handler
    json_response)
boto.exception.DynamoDBResponseError: DynamoDBResponseError: 400 Bad Request
{'Message': 'Expected null', '__type': 'com.amazon.coral.service#SerializationException'} 
```

我不是在处理需要处理的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:57:35.280

扫描线上有错误：

```
results = table.scan(attributes_to_get={'id'},
        max_results=10) 
```

代替

```
results = table.scan(attributes_to_get=['id'],
        max_results=10) 
```

编辑：

这适用于 Boto 2.5.2

```
import boto

db = boto.connect_dynamodb()

table = db.get_table('MyTable')
res = table.scan(attributes_to_get=['id'], max_results=10)

for i in res:
    print i 
```

# javascript - 如果 src 静态设置，则 html5 音频播放，但如果动态设置则不播放

> ID：12180707
> 
> 赞同：3
> 
> 时间：2012-08-29T14:49:16.743
> 
> 标签：javascript, html, html5-audio

我有一个问题，如果将音频文件作为 src 属性直接添加到 html5 源代码中，我可以播放它，但如果我尝试在运行时设置 src，它不会播放。

最初我有以下包含一些音频标签的 HTML：

```
<audio id="audio1" controls preload="none" src="http:/theurl/clip1.mp3"></audio>
<audio id="audio2" controls preload="none" src="http:/theurl/clip2.mp3"></audio> 
```

使用以下函数播放剪辑，该函数使用 id 和剪辑 url 调用：

```
function audioClick(id, clip) {
    var audio = document.getElementById(id);
    if (audio.paused) {
        audio.play();
    }
    else {
        audio.pause();
        audio.currentTime = 0;
    }
} 
```

这可行，当用户点击页面的相关部分时，会播放相应的音频文件，但问题是浏览器需要大约 3-4 秒来加载页面，这太长了。我已经找到了延迟的原因是由于 src 属性是远程文件。并且将 preload 设置为“none”或“metadata”并不能加快速度。

所以为了解决这个问题，我想在运行时设置 src，所以将函数更改为：

```
function audioClick(id, clip) {
    var audio = document.getElementById(id);
    if (audio.paused) {
        audio.setSrc(clip);
        audio.load();
        audio.play();
    }
    else {
        audio.pause();
        audio.currentTime = 0;
    }
} 
```

我尝试将html设置为此

```
<audio id="audio1" controls></audio>
<audio id="audio2" controls></audio> 
```

但有两个问题：1) 音频不播放 2) 控件显示初始消息说文件无法播放

我没有在控件中显示无法播放文件的消息，因此我将 html 更改为：

```
<audio id="audio1"></audio>
<audio id="audio2"></audio> 
```

但是文件不播放的问题仍然存在。

以这种方式完成后，为什么音频文件不播放？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:57:56.523

当您的目标是 iOS 时，会有一些陷阱。第一个是设置音频标签的属性 preload 什么都不做。iOS 只会做它想做的事，而我们对此无能为力。

我认为 Yoshi 的代码在 chrome 中运行良好但在 iOS 中运行良好的原因是因为 iOS 要求对 audio.play() 的所有调用都与单击事件在同一个调用堆栈中。由于 canplay 事件的调用结果我认为它被 iOS 忽略了。此外，当您设置 src 时，iOS 不会预加载任何音频。您需要调用 audio.load() 来执行此操作，但就像以前一样，您需要用户单击某些内容才能让 iOS 实际执行该功能。

要使其在 iOS 中工作，您需要避免 canplay 回调并简单地使用：

```
audio.src = src;
audio.play(); 
```

它不太理想。Safari 加载文件时可能需要一两秒钟，但它应该可以工作。与 android 浏览器或更好的新移动 chrome 相比，iOS 对 HTML5 音频的处理相当有限。Mobile Safari 有点把规范抛到了窗外，只是做它想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:08:38.790

尝试类似：

```
function audioClick(id, src) {
  var audio = document.getElementById(id);
  if (audio.paused) {
    audio.addEventListener('canplay', function canplay() {
      this.removeEventListener('canplay', canplay, false);
      this.play();
    }, false);

    audio.src = src;
  }
  else {
    audio.pause();
    audio.currentTime = 0;
  }
} 
```

并查看其他可用的[媒体事件](https://developer.mozilla.org/en-US/docs/DOM/Media_events)。

# java - 将 Spring 与 IntelliJ 集成

> ID：12180712
> 
> 赞同：13
> 
> 时间：2012-08-29T14:49:36.443
> 
> 标签：java, spring, ide, intellij-idea

我已经下载并安装了 Spring 工具包。现在，当我尝试在 IntelliJ 中创建一个新项目时，它不会在库中显示 Spring .. 我怎样才能在那里获得 Spring？

提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-29T15:36:15.700

[SpringSource Tool Suite与](http://www.springsource.org/sts)[IntelliJ Idea](http://www.jetbrains.com/idea/)无关，实际上它是一个不同的 IDE（它是一个专门的[Eclipse](http://www.eclipse.org/)发行版）。

[因此，虽然下载 Spring*框架*](http://www.springsource.org/download/)确实有意义（尽管[通过 Maven 之类的构建工具访问它](http://mvnrepository.com/artifact/org.springframework)更好），但同时使用 Springsource Tool Suite 和 IntelliJ Idea 没有意义。它是一个或另一个（并且都很好地支持 Spring）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-29T15:02:19.677

使用向导创建项目时，您可以选择**Spring Framework**并指定新库或让 IntelliJ IDEA 下载它。库[也可以稍后管理，](http://www.jetbrains.com/idea/webhelp/configuring-module-dependencies-and-libraries.html)或者您可以`Add Framework`从`Project View`.

检查[启用 Spring 支持](http://www.jetbrains.com/idea/webhelp/enabling-spring-support.html)帮助部分以获取详细信息。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-12-20T22:18:40.540

我这么晚才回答这个问题，但我需要为答案做出贡献以澄清事情，以便将来对其他人有所帮助。

有一点你需要清楚的知道，IntelliJ IDEA 有两种不同的类型，第一种是 INTELLIJ IDEA ULTIMATE，它是一个商业产品，它不是免费的，还有一个 INTELLIJ IDEA COMMUNITY，它是免费的。

第一个（IntelliJ IDEA ULTIMATE）支持有关 java 和 kotlin 以及其他语言的所有内容，您可以在 java 中创建任何类型的项目，无论是桌面应用程序、移动应用程序还是具有 java2ee 平台的 Web 应用程序. 但是第二个（IntelliJ IDEA COMMUNITY）有局限性。您可以创建您选择的不同类型的项目，但如果您不是使用 maven 或 gradle 创建它，则不能使用 java2ee 项目。

因此，如果您想创建 SpringBoot 应用程序，可以使用 IntelliJ IDEA 社区。您无需为此下载 Spring Tool Suite。有两三种可能。

1.  您需要去创建项目，然后选择 maven，然后设置所有内容，然后在创建项目后，打开名为 pom 的 xml 文件，添加依赖项，这将告诉 maven 下载 SpringBoot 应用程序所需的所有库。然后你开始编码。但是这第一步，并不是最好的选择，因为一旦你用这种方式创建了项目，你的项目中就会缺少其他的 maven-plugins，所以在部署时会是一个很大的问题。

2.  第二种最好的方法是去[https://start.spring.io/](https://start.spring.io/)然后你在那里创建 springboot 项目，然后你下载它，它将是一个 .zip 文件，你解压缩，然后你导入它IntelliJ 想法。在那里，您将获得工作所需的一切。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-10-29T08:26:56.167

**Intellij 社区版不支持 Springboot 项目。它仅在终极版中可用。这就是我切换回 Eclipse（或 STS）的原因。**

很少有解决方法可以帮助您在 Intellij 社区版中运行 Springboot 项目：-

*   通过运行 Main 类。
*   通过在终端或 cmd 中执行 spring-boot:run 命令。
*   您可能需要更改一些设置以使 spring-dev-tools 在 Intellij 社区版中工作。

*我的建议：如果您打算使用 spring 和 spring-dev-tools，那么您应该切换到 Intellij Ultimate 版或 Eclipse STS。*

参考：[https ://www.jetbrains.com/idea/download/#section=windows](https://www.jetbrains.com/idea/download/#section=windows)

# php - 无法在新的 Netsuite 记录中设置布尔字段

> ID：12180714
> 
> 赞同：1
> 
> 时间：2012-08-29T14:49:45.553
> 
> 标签：php, netsuite

我正在尝试使用 Netsuite PHP Toolkit 创建一个新任务，将其分配给一名员工并将一封电子邮件发送给该员工。

我可以成功创建和分配任务，但无法获取要发送的电子邮件。

这是我正在使用的代码：

```
 $task_data = array(
        'title'=>$request['subject'],
        'assigned'=>new nsRecordRef(array('internalId'=>NETSTUITE_CONF::EMPLOYEE_ID, 'type'=>'employee')),
        'message'=>$request['body'],
        'sendEmail'=>true,
        'startDate'=>date('c', strtotime($request['date_added']))
    );
    $task = new nsComplexObject('Task', $task_data);
    $ret = $ns->add($task);
    var_dump($ret); 
```

哪个输出：

```
object(nsWriteResponse)#13 (3) {
  ["isSuccess"]=>
  bool(true)
  ["statusDetail"]=>
  NULL
  ["recordRef"]=>
  object(nsRecordRef)#19 (4) {
    ["nsComplexObject_type"]=>
    string(9) "RecordRef"
    ["nsComplexObject_namespace"]=>
    string(49) "urn:core_2010_1.platform.webservices.netsuite.com"
    ["nsComplexObject_fields"]=>
    array(2) {
      ["type"]=>
      string(4) "task"
      ["internalId"]=>
      string(6) "408557"
    }
    ["nsComplexObject_namespaces"]=>
    NULL
  }
} 
```

新任务具有除`sendEmail`字段外的所有数据集，SuiteTalk 模式浏览​​器将类型列为`xsd:boolean`. 我也尝试发送字符串“true”和“T”，但该字段仍然为 false。

如何将字段设置为`true`，以便发送电子邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:16:34.173

尝试“T”或“F”我只是在 netsuite 其他地方的不同布尔字段上做了这个，这就是我的诀窍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:57:05.573

我在他们的支持论坛上收到了一位 netsuite 员工的回复说：

> 当 sendemail=true 时，通过 Web 服务添加任务记录当前不支持发送电子邮件

# iphone - uiimageview的对角滚动动画

> ID：12180715
> 
> 赞同：0
> 
> 时间：2012-08-29T14:49:51.120
> 
> 标签：iphone, ios, uiimageview, scroll, coverflow

我想要做的是检测用户的对角滚动并将视图移动到滚动的方向。我想实现一个coverflow风格的动画，除了我的视图排列有点圆形。

- -编辑 - -

我已经使用 iCarousel 来尝试实现这一点，到目前为止，它已通过在垂直位置使用 iCarouselTypeCustom 类型并覆盖 carousel:itemTransformForOffset:baseTransform: 方法成功完成：

```
CGFloat theFloat = 0;
if (offset > 0) {
    theFloat = offset * 30;
}
else {
    theFloat = offset * -30;
}
return CATransform3DTranslate(transform, theFloat, offset * 40, 0); 
```

当前的问题是，当我向下滚动时，视图的排列不正确。屏幕下部的视图应位于另一个视图的顶部。我为此附上了截图：

![在此处输入图像描述](../Images/465b5d6d3eae4da93f165a5b3f8bffa5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:55:34.080

我会推荐[NickLockwood](https://github.com/nicklockwood/iCarousel)的这款 iCarousel。伟大的项目。你可以随心所欲地调整它，相信我。使其垂直，并查看其类型，因为它支持 11 种类型，包括您想要的封面流。一探究竟！

希望这可以帮助。

# java - 如何轻松（在 java 中）从掩码字符串生成文件名？

> ID：12180717
> 
> 赞同：7
> 
> 时间：2012-08-29T14:49:57.893
> 
> 标签：java, filenames

我想从 Java 中的掩码生成文件名。

像“Data-${YY}-${MM}-${DD}-${var1}.xml”这样的掩码中的“Data-12-08-29-xxx.xml”。我不想生成随机文件名，而是根据运行时提供的模式构建文件名。

我可以想象我需要什么来创建一个很好的通用类来处理各种情况，但我不想重新发明轮子，如果那里存在我可以重新定位甚至扩展的东西。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T14:54:36.807

该类[`Formatter`](http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html)（背后的功能`String.format()`）具有非常强大的格式化语法（比 MessageFormat 强大得多）。它可以处理变量替换以及日期格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T14:54:42.407

```
 Format f=new SimpleDateFormat("dd-MM-yyyy-HH.mm.ss");
 String fileName="Data-"+f.format(new Date() /*or a Date object which you saved previously*/).toString()+".xml"; 
```

这会给你类似 Data-12-12-2012-14.55.32.xml

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T15:01:40.233

```
MessageFormat messageFormat = new MessageFormat("Data-{0,number,#}-{1}-{2}-{3,number,#}.xml");
Calendar cal = Calendar.getInstance();
int variable = 555;
Integer[] args = {cal.get(Calendar.YEAR), cal.get(Calendar.MONTH) + 1, cal.get(Calendar.DAY_OF_MONTH), variable};
String result = messageFormat.format(args);
System.out.println(result); 
```

**输出：**

> 数据-2012-8-29-555.xml

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T15:27:19.563

String.format() 的问题在于，您将被迫在格式字符串中使用变量的索引，并且类似于以下的模式`%1$ty-%1$tm-%1$td-%2$03d`可能会给用户带来问题：

```
Calendar time = Calendar.getInstance();
int number = 7;
String msg = String.format("Data-%1$ty-%1$tm-%1$td-%2$03d.xml", time, number); 
```

在我的一个项目中，我决定使用 Apache Velocity（此处给出了一个示例：[http](http://www.javaworld.com/javaworld/jw-12-2001/jw-1228-velocity.html) ://www.javaworld.com/javaworld/jw-12-2001/jw-1228-velocity.html ）。对于此类任务，它是一个非常强大的工具，但它提供了在您的格式中使用有意义的变量名的可能性`Date-${year}-${month}-${day}-${number}.xml`。首先，您必须在速度上下文中添加适当的变量：

```
VelocityContext context = new VelocityContext();
context.put("number", "007");
context.put("year", ...); 
```

但是，用户指定格式字符串会容易得多..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-15T16:15:21.587

您可以使用一个名为[AlephFormatter](https://github.com/nomemory/aleph-formatter)的小型库，它允许您拥有“命名”参数。

例如：

```
String result = template("#{errNo} -> #{c.simpleName} -> #{c.package.name}")
                .arg("errNo", 101)
                .arg("c", String.class)
                .fmt();

System.out.println(result); 
```

输出：

```
Error number: 101 -> String -> java.lang 
```

# jqgrid - 将 CSS 类添加到列

> ID：12180718
> 
> 赞同：13
> 
> 时间：2012-08-29T14:50:00.537
> 
> 标签：jqgrid

如何将自己的类添加到 jqgrid 中的列中。正如我看到的 html 输入元素正在获取类“FormElement”。我需要向特定列添加一个类。我找到了这个[http://www.trirand.com/blog/?page_id=393/help/cell-tooltip-1/#p21526](http://www.trirand.com/blog/?page_id=393/help/cell-tooltip-1/#p21526)，但我不确定这是否是实现这一目标的最方便的方法？我的意思是遍历所有行和单元格，然后手动更改类属性——这似乎是这种“简单”任务的开销。

**更新**

我想添加类，因为我想使用这个多选小部件[http://quasipartikel.at/multiselect/](http://quasipartikel.at/multiselect/)的功能。这个小部件通过定义的类工作。这就是为什么。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-29T14:56:39.893

可能您需要为相应的列使用[classes属性。](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:colmodel_options)

我不确定这是否是您所需要的，因为您写了关于*form*`FormElement`中存在的类。如果您必须使用表单编辑的[beforeShowForm](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing#events)回调，例如将类添加到编辑表单的相应字段的输入字段。表单中字段的id与对应列的属性相同。*`name``colModel`*

 *如果您确实需要为一列的单元格添加类属性，则还有另一种可能性：`cellattr`为`colModel`. 如果您需要为*列的所有单元格*添加类，则该方法可能是实用的。您可以根据行内容测试一些条件，并仅在条件发生时设置类。例如， 的用法将在列上的*所有*`classes:'ui-state-error-text ui-state-error'`单元格上设置相应的两个类（`ui-state-error-text`和`ui-state-error`） 。另一边的回调函数

 *```
cellattr: function(rowId, val, rawObject) {
    if (parseFloat(val) > 200) {
        return " class='ui-state-error-text ui-state-error'";
    }
} 
```

仅当单元格值高于 200 时才允许您设置类。我没有`rawObject`在上述回调中使用，因此可以删除可选参数。我在回调中添加它只是为了提醒您可以使用该参数来访问该行*另一*列的值。因此，您可以在`cellattr`.

结果可以得到如下图所示的网格：

![在此处输入图像描述](../Images/d3e327bc3a194c5632be7f6660ae5e75.png)

**更新**：如果您需要添加`class`编辑表单的输入字段，您可以另外使用[editoptions](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:common_rules#editoptions)`dataInit`的回调。在这种情况下，用法将非常简单。例如，您可以执行以下操作：

```
editoptions: {
    dataInit: function (domElem) {
        $(domElem).addClass("ui-state-highlight");
    }
} 
```

结果你会得到像这样的编辑表单

![在此处输入图像描述](../Images/92580e9cff6cc17a876dc0e86969f0b2.png)

您可以在[此处](http://www.ok-soft-gmbh.com/jqGrid/addclasstocolumn.htm)找到演示。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-29T14:56:13.543

有一个`classes`colmodel 选项可以满足您的需要。从[jqGrid 文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:colmodel_options)：

> **班级**
> 
> 细绳
> 
> 此选项允许向列添加类。如果将使用多个类，则应设置一个空格。例如`classes:'class1 class2'`，将为该列上的每个单元格设置一个 class1 和 class2。
> 
> 在网格 css 中有一个预定义的类 ui-ellipsis，它允许将省略号附加到特定的行。这也适用于 FireFox。**

# perl - 在 perl 中创建输出文件后删除空格的问题

> ID：12180721
> 
> 赞同：-1
> 
> 时间：2012-08-29T14:50:02.243
> 
> 标签：perl

我编写了一个脚本，将输出保存在 Perl 脚本中，但由于某种原因，它在每一行的末尾留下了空间。我尝试使用 Perl 正则表达式，但它不起作用。有人可以看看我的代码，让我知道我做错了什么吗？

我的代码

```
 open FILE, ">", "finaloutput.txt" || die "cannot create";
 my @output = ``; # (here i am using back ticks to run third party command)
 foreach  my $output (@output) {
     chomp $output;
     my $remove_whitespace = $output;
     $remove_whitespace =~ s/^\s+|\s+$//g;
     print  FILE "$remove_whitespace  \n";
 }
 close FILE; 
```

即使这样做了，它也会在输出的每一行末尾留下一个空格。请指导我。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T15:01:43.670

当你这样做时，你`print FILE "$remove_whitespace \n";`在每行的末尾添加 2 个空格，`print FILE "$remove_whitespace\n";`改为

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:01:49.723

您在每行的末尾放置两个空格：

```
print  FILE "$remove_whitespace  \n";
                               ^^
                               || 
```

摆脱那些！解决方案：

```
print FILE "$remove_whitespace\n";
  -or-
print FILE $remove_whitespace, "\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T15:01:39.507

出于某种原因，您在`print`语句末尾包含多个空格。将您的打印声明更改为：

```
print FILE "$remove_whitespace\n"; 
```

此外，您不应再使用全局样式的文件句柄。相反，使用类似的东西：

```
open my $file, '>', "output.txt";
print $file "Some string\n";
close $file; 
```

# android - 基于 ListItem 特定变量的 ListItem 上的膨胀布局

> ID：12180724
> 
> 赞同：7
> 
> 时间：2012-08-29T14:50:14.850
> 
> 标签：android, listview, adapter, loader, listitem

我正在使用 a`SimpleCursorAdapter`和 a`ListView`来显示一些使用 Loader 加载的数据。在里面`cursor`我有一个`int`从 0 到 3 的项目。

我希望此 int 等于 0-1 的项目具有布局（右对齐，一种颜色），而具有 2-3 的项目具有另一种布局（左对齐，另一种颜色）。 `much like a chat app, where sent messages are on the right and received ones are on the left.`

有没有简单的方法来做到这一点？类似于开关，其中 0-1 我膨胀 layout_1 和 2-3 我膨胀 layout_2。

编辑：我添加了要填充的 ListFragment 的代码。用作开关的 int 是 MyContentProvider.Data.E_TYPE。我无法掌握它，但也许有人可以清楚地解释我必须写什么！

```
 import com.actionbarsherlock.view.Menu;
   import com.actionbarsherlock.view.MenuInflater;
   import com.corsalini.survcontr.MyContentProvider.Data;

   import android.content.ContentResolver;
   import android.content.ContentValues;
   import android.database.Cursor;
   import android.os.Bundle;
   import android.support.v4.app.ListFragment;
   import android.support.v4.content.CursorLoader;
   import android.support.v4.app.LoaderManager;
   import android.support.v4.content.Loader;
   import android.support.v4.widget.CursorAdapter;
   import android.support.v4.widget.SimpleCursorAdapter;
   import android.util.Log;
   import android.view.View;
   import android.widget.ListView;

  public class FragEvents extends ListFragment implements  LoaderManager.LoaderCallbacks<Cursor>{
@Override
public void onPause() {
    allRead();
    super.onPause();

}

private static final int EVENTS_LOADER = 0x02;

// This is the Adapter being used to display the list's data.
SimpleCursorAdapter mAdapter;

// If non-null, this is the current filter the user has provided.
String mCurFilter;

@Override public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    // Give some text to display if there is no data.  In a real
    // application this would come from a resource.
    setEmptyText(this.getString(R.string.perform_event)); 

    // We have a menu item to show in action bar.
    setHasOptionsMenu(true);

    // Create an empty adapter we will use to display the loaded data.
    mAdapter = new SimpleCursorAdapter(getActivity(),
            android.R.layout.simple_list_item_2, null,
            new String[] { MyContentProvider.Data.E_TEXT, MyContentProvider.Data.E_DATE, 
        MyContentProvider.Data.E_NUMBER, MyContentProvider.Data.E_TYPE  },
        new int[] { android.R.id.text1, android.R.id.text2 },
        CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);
    setListAdapter(mAdapter);

    // Start out with a progress indicator.
    setListShown(false);

    // Prepare the loader.  Either re-connect with an existing one,
    // or start a new one.
    getActivity().getSupportLoaderManager().initLoader(EVENTS_LOADER, null, this);

}

public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
     inflater.inflate(R.menu.menu_events, menu);  
}

@Override public void onListItemClick(ListView l, View v, int position, long id) {
    //TODO Insert desired behavior here.
    Log.i("FragmentComplexList", "Item clicked: " + id);
}

// These are the Contacts rows that we will retrieve.
static final String[] SUMMARY_PROJECTION = new String[] {
    MyContentProvider.Data.E_ID,
    MyContentProvider.Data.E_DATE,
    MyContentProvider.Data.E_NUMBER,
    MyContentProvider.Data.E_TEXT,
    MyContentProvider.Data.E_TYPE,

};

public Loader<Cursor> onCreateLoader(int id, Bundle args) {

    return new CursorLoader(getActivity(),  MyContentProvider.Data.CONTENT_URI_EVENTS,
            SUMMARY_PROJECTION, null, null,
            Data.E_ID + " DESC");
}

public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
    // Swap the new cursor in.  (The framework will take care of closing the
    // old cursor once we return.)
    mAdapter.swapCursor(data);

    // The list should now be shown.
    if (isResumed()) {
        setListShown(true);
    } else {
        setListShownNoAnimation(true);
    }
}

public void onLoaderReset(Loader<Cursor> loader) {
    // This is called when the last Cursor provided to onLoadFinished()
    // above is about to be closed.  We need to make sure we are no
    // longer using it.
    mAdapter.swapCursor(null);
}

public void deleteEvent(ContentResolver contentResolver,
        long id){
    String selection = Data.E_ID + "=";
    String[] args = {String.valueOf(id)};
    contentResolver.delete(Data.CONTENT_URI_EVENTS, selection, args);
}

public void allRead(){
    ContentResolver contentResolver = getActivity().getContentResolver();
    ContentValues contentValue = new ContentValues();
    contentValue.put(Data.E_NUMBER, Data.RECEIVED_READ);
    String selection= Data.E_TYPE+"=";
    String[] args= {String.valueOf(Data.RECEIVED_UNREAD)};
    contentResolver.update(Data.CONTENT_URI_EVENTS, contentValue, selection, args);
}

   } 
```

编辑：如果我做对了，我最终的 EventsAdapter（它扩展了 SimpleCursorAdapter）应该如下所示：

```
 import android.content.Context;
    import android.database.Cursor;
    import android.support.v4.widget.SimpleCursorAdapter;
    import android.view.LayoutInflater;
    import android.view.View;
    import android.view.ViewGroup;
    import android.widget.TextView;

    public class EventsAdapter extends SimpleCursorAdapter {

private Context localContext;

public EventsAdapter(Context context, int layout, Cursor c, String[] from,
        int[] to, int flags) {
    super(context, layout, c, from, to, flags);

    localContext = context;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    Cursor c= getCursor();
    c.moveToPosition(position);
    if(convertView == null)
    {
        LayoutInflater layoutInflator = (LayoutInflater)localContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        switch (getItemViewType(position)){
        case 0:
            convertView = layoutInflator.inflate(R.layout.item_event_0, null);
            break;
        case 1:
            convertView = layoutInflator.inflate(R.layout.item_event_1, null);
            break;
        case 2:
            convertView = layoutInflator.inflate(R.layout.item_event_2, null);
            break;
        case 3:
            convertView = layoutInflator.inflate(R.layout.item_event_3, null);
            break;
        }

    }
    switch (getItemViewType(position)){
    case 0:
        TextView date0=(TextView)convertView.findViewById(R.id.date0);
        TextView text0=(TextView)convertView.findViewById(R.id.text0);
        date0.setText(""+c.getString(c.getColumnIndex(Data.E_DATE)));
        text0.setText(""+c.getString(c.getColumnIndex(Data.E_TEXT)));
        break;
    case 1:
        TextView date1=(TextView)convertView.findViewById(R.id.date1);
        TextView text1=(TextView)convertView.findViewById(R.id.text1);
        date1.setText(""+c.getString(c.getColumnIndex(Data.E_DATE)));
        text1.setText(""+c.getString(c.getColumnIndex(Data.E_TEXT)));
    case 2:
        TextView date2=(TextView)convertView.findViewById(R.id.date2);
        TextView text2=(TextView)convertView.findViewById(R.id.text2);
        date2.setText(""+c.getString(c.getColumnIndex(Data.E_DATE)));
        text2.setText(""+c.getString(c.getColumnIndex(Data.E_TEXT)));
    case 3:
        TextView date3=(TextView)convertView.findViewById(R.id.date3);
        TextView text3=(TextView)convertView.findViewById(R.id.text3);
        date3.setText(""+c.getString(c.getColumnIndex(Data.E_DATE)));
        text3.setText(""+c.getString(c.getColumnIndex(Data.E_TEXT)));
    }
    return convertView;
}

@Override
public int getItemViewType(int position) {
    int type = 0;
    int returnInt = 0;
    Cursor c= getCursor();
    c.moveToPosition(position);
    type= c.getInt(c.getColumnIndex(Data.E_TYPE));
    switch (type){
    case Data.RECEIVED_READ:
        returnInt=3;
    case Data.RECEIVED_UNREAD: 
        returnInt= 2;
    case Data.SENT_COMPLETED:
        returnInt= 1;
    case Data.SENT_PROGRESS:
        returnInt= 0;
    default:
        returnInt=0;
    }
    return returnInt;
}

@Override
public int getViewTypeCount() {
    return 4;
}

    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T15:55:05.083

在使用 ListViews 时，尤其是像您描述的复杂的那样，正确处理视图回收非常重要。该类`BaseAdapter`是一个超类，`SimpleCursorAdapter`具有一些方法，您可以覆盖这些方法以在使用最少资源的同时实现您想要的效果。我以前从未使用过 SimpleCursorAdatper，因此在编写时考虑到了普通的 CursorAdapter，但您可以将其与任何覆盖 BaseAdapter 的适配器类一起使用。

Android 中的 ListViews 以一种非常特殊的方式来降低内存成本。当您滚动浏览 ListView 时，移出屏幕的项目的视图被放置在一个小的视图池中。该`convertView`参数取自该池。他们这样做是因为将每个列表项 View 保留在内存中不能很好地扩展，并且会很快导致 OutOfMemory 异常。该`getView()`方法是您获取这些视图并为当前列表项配置它们的地方。通常你会有这样的一行：

```
if(convertView == null)
    convertView = layoutInflator.inflate(R.layout.list_item, null); 
```

在这种情况下，如果 convertView 不为空，我们就知道它之前被夸大了。我们不想重新膨胀它，因为这是一个代价高昂的操作，而 getView 应该只是在视图显示之前快速用数据填充视图。

现在，在您的情况下，convertView 有两个潜在的通货膨胀。与其每次都重新膨胀视图（非常糟糕）或对每个视图使用具有唯一资源 id 的某种 hack（更好，但不理想），我们可以覆盖基类中的两个方法以确保 convertView 始终是正确的类型。这两种方法是`getItemViewCount()`和`getItemViewType(int position)`。

`getItemViewCount()`适配器使用它来确定它应该为列表维护多少个视图池。覆盖它很简单，在你的情况下看起来像这样。

```
@Override
public int getViewTypeCount()
{
    return 2; //Even though you have four cases, there are only 2 view types.
} 
```

`getItemViewType(int position)`在调用 getView 之前，适配器使用它来决定应来自哪个池 convertView。在这里，您需要一个 switch 或 if/else 语句来检查底层数据源的视图类型并返回它。（请注意，根据 Android 文档，此处的返回值必须介于 0 和 getViewTypeCount() -1 之间，因此在您的情况下为 0 或 1。）

```
@Override
public int getItemViewType(int position)
{
    Item item = getItem(position)  //Or however you're getting the data associated with a particular list position
    switch(item.myInt)
    {
         //I simplified this a bit, basically, check your int, if it's the first type, return 0 for your first layout type, else return 1 for your second.
         case(0):
         case(1):
             return 0;
         case(2):
         case(3):
             return 1;
    }
} 
```

现在，最后，我们将修改 getView 以执行初始 layoutInflation 以便您在池中拥有正确的视图。

```
@Override
public View getView(int position, View convertView, ViewGroup viewParent)
{
    //if convertView is not null, we got a view from the pool, just go on
    if(convertView == null)
    {
        //This means we didn't have a view in the pool to match this view type.  Inflate it and it will be placed in the proper pool when this list item is scrolled off the screen
        if(getItemViewType(position) == 0)
            convertView = layoutInflator.inflate(R.layout.list_item_type1, null);
        else if(getItemViewType(position) == 1)
            convertView = layoutInflator.inflate(R.layout.list_item_type2, null);
    }

    //Populate the view with whatever data you need here

    //And finally....
    return convertView;
} 
```

ListViews 和它们的适配器是我在 Android 中遇到的最复杂的事情之一，但是花时间去做正确的事情会极大地提高你的应用程序的性能和用户体验。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:12:25.073

我认为你只需要在你的`getView(int position, View convertView, ViewGroup parent)`方法上增加正确的布局：

```
MyItem item = getItem(position);
View vi = convertView;
if(vi == null){
    switch(item.getStatus())
    {
        case 0:
            vi = mInflater.inflate(R.layout.item1, null);
            break;
        case 1:
            vi = mInflater.inflate(R.layout.item2, null);
            break;
        case 2:
            vi = mInflater.inflate(R.layout.item3, null);
            break;
    }
    //set viewholder ...
}else{
    //get viewholder ...
}
// set values to views ... 
```

这是你需要的吗？

# iphone - AFNetworking：如何知道响应是否使用缓存？304 或 200

> ID：12180727
> 
> 赞同：19
> 
> 时间：2012-08-29T14:50:22.577
> 
> 标签：iphone, ios, asihttprequest, afnetworking, http-status-code-304

我找不到任何问题的答案，可能是我错过了什么......

当我请求一个 url 时，我需要知道响应是来自缓存还是来自网络。

状态码是 304 还是 200 ？（但`AFNetworking`总是响应 200）

我`ASIHTTPRequest`曾经检查“ `didUseCachedResponse`” from `ASIHTTPRequest`，这是完美的。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-02-04T15:05:54.657

我想我找到了一个解决方案来确定响应是从缓存返回还是不使用 AFNetworking 2.0。我发现每次从服务器返回一个新响应（状态 200，而不是 304）时，都会调用`cacheResponseBlock`它的一个属性。`AFHTTPRequestOperation`如果应该缓存响应，则该块应该返回`NSCachedURLResponse`，如果不应该缓存，则返回 nil。这样您就可以过滤响应并仅缓存其中的一些。在这种情况下，我正在缓存来自服务器的所有响应。诀窍是，当服务器发送 304 并从缓存加载响应时，不会调用此块。所以，这是我正在使用的代码：

```
AFHTTPRequestOperationManager *manager = [AFHTTPRequestOperationManager manager];

BOOL __block responseFromCache = YES; // yes by default

void (^requestSuccessBlock)(AFHTTPRequestOperation *operation, id responseObject) = ^(AFHTTPRequestOperation *operation, id responseObject) {
    if (responseFromCache) {
        // response was returned from cache
        NSLog(@"RESPONSE FROM CACHE: %@", responseObject);
    }
    else {
        // response was returned from the server, not from cache
        NSLog(@"RESPONSE: %@", responseObject);
    }
};

void (^requestFailureBlock)(AFHTTPRequestOperation *operation, NSError *error) = ^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"ERROR: %@", error);
};

AFHTTPRequestOperation *operation = [manager GET:@"http://example.com/"
                                      parameters:nil
                                         success:requestSuccessBlock
                                         failure:requestFailureBlock];

[operation setCacheResponseBlock:^NSCachedURLResponse *(NSURLConnection *connection, NSCachedURLResponse *cachedResponse) {
    // this will be called whenever server returns status code 200, not 304
    responseFromCache = NO;
    return cachedResponse;
}]; 
```

这个解决方案对我有用，到目前为止我还没有发现任何问题。但是，如果您有更好的想法或对我的解决方案有异议，请随时发表评论！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T08:09:48.427

似乎苹果不想让你知道它是否来自缓存。

我找到了一种方法，将修改日期与请求关联起来，并在 AFNetWorking 回复我时比较这个日期。

没有我想要的那么干净，但可以工作......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-20T22:52:51.997

在 AFNetworking 中有一种方法可以指定应该被视为成功的状态码，它是通过响应序列化来完成的，这里是代码

```
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

AFHTTPResponseSerializer *respSerializer = [AFHTTPResponseSerializer serializer];
NSMutableIndexSet *responseCodes = [NSMutableIndexSet indexSet];
[responseCodes addIndex:200];
[responseCodes addIndex:304];

[operation setResponseSerializer:respSerializer]; 
```

使用此代码，AFNetworking 会将 304 视为成功

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-13T13:36:27.577

创建您的 URLCache 类并覆盖**storeCachedResponse**方法

```
class MyURLCache: URLCache {
    override func storeCachedResponse(_ cachedResponse: CachedURLResponse, for request: URLRequest) {

        //adding caching header if needed
        var headers = response.allHeaderFields
        headers.removeValue(forKey: "Cache-Control")
        headers["Cache-Control"] = "max-age=\(5 * 60)" //5 min

        //the trick
        if (headers["isCachedReponse"] == nil){
            headers["isCachedReponse"] = "true"
        }

        if let
            headers = headers as? [String: String],
            let newHTTPURLResponse = HTTPURLResponse(url: response.url!, statusCode: response.statusCode, httpVersion: "HTTP/1.1", headerFields: headers) {
            let newCachedResponse = CachedURLResponse(response: newHTTPURLResponse, data: cachedResponse.data)
            super.storeCachedResponse(newCachedResponse, for: request)
        }
    }
} 
```

在 AppDelegate 中使用您的 URLCache 设置 URLCache.shared

```
class AppDelegate: UIResponder, UIApplicationDelegate {

    var window: UIWindow?
    func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey : Any]? = nil) -> Bool {
        let cache = MyURLCache(memoryCapacity: 1024 * 1024 * 500, diskCapacity: 1024 * 1024 * 500, diskPath: nil)
        URLCache.shared = cache
        return true
    }
} 
```

在响应回调中检查响应内容的标题是否为“newResponse”键

```
if (response.allHeaderFields["isCachedReponse"] == nil){
      print("not cache")
} else {
      print("cache")
} 
```

适用于所有版本的**AFNetworking**

# windows - 我是否需要调整令牌权限才能成功调用 CreateRemoteThread？

> ID：12180732
> 
> 赞同：3
> 
> 时间：2012-08-29T14:50:36.480
> 
> 标签：windows, winapi

我正在为我的应用程序开发一个调试工具来帮助我诊断死锁。该应用程序在我客户的机器上运行，因此我期望有广泛的操作系统、安全策略等。

我使用的技术是在目标应用程序中实现一个函数，该函数为所有线程生成堆栈跟踪以及其他诊断信息。然后将其写入内存映射文件。我还在创建一个实用程序应用程序，用于触发诊断报告的创建，然后从内存映射文件中读取它。

由于目标应用程序预计会死机，因此实用程序无法向其发送消息以触发诊断收集。相反，我正在使用`CreateRemoteThread`这样我可以确保获得一个实时线程来完成这项工作。

请注意，这与 DLL 注入方法不同，后者通常`LoadLibrary`用作`CreateRemoteThread`. 我的线程 proc 是目标应用程序的入口点。所以，我不需要打电话`WriteProcessMemory`。

我已经实现了这一点，并且在我的测试环境中它运行良好。根据文档[`CreateRemoteThread`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682437.aspx)，我需要一个具有以下访问权限的进程句柄：

> `PROCESS_CREATE_THREAD`, `PROCESS_QUERY_INFORMATION`, `PROCESS_VM_OPERATION`, `PROCESS_VM_WRITE`, 和`PROCESS_VM_READ`

所以，我在调用`OpenProcess`.

现在，最后，我的问题是：我需要我的令牌拥有什么特权才能使调用`OpenProcess`成功？

在我的测试环境（Windows 7，启用 UAC，管理员用户）中，我只使用默认令牌没有遇到任何问题。我已经看到了各种`SE_DEBUG_NAME`在调用之前获得特权的示例代码`OpenProcess`。我的猜测是`WriteProcessMemory`在进行 DLL 注入时需要它并且我不需要该特权。在某些情况下我需要调整我的令牌权限吗？

我对 Windows 安全一无所知，所以我非常感谢任何这样做的人的明智之言！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T23:53:58.083

通常，如果目标进程运行在与调试器相同的上下文中（即，作为相同的用户），则 OpenProcess 或 CreateRemoteThread 都不需要特权。

如果目标进程以不同的用户身份运行，或者进程权限已被修改，您可能需要在调用 OpenProcess 之前启用 SE_DEBUG_NAME。此权限允许您打开任何进程，绕过分配给进程的安全权限。（这类似于备份/恢复权限允许您绕过文件和目录的安全权限的方式。）

一些应用程序会修改自己的进程权限，例如，用户不能使用任务管理器来终止进程。在这种情况下，它是您自己的代码，所以这不会是一个问题。其他一些软件（例如杀毒软件）原则上可以修改您进程的权限，但我从未听说过这种情况，因此您可能无需担心启用 SE_DEBUG_NAME。

# android - 谷歌账户权限

> ID：12180734
> 
> 赞同：0
> 
> 时间：2012-08-29T14:50:49.303
> 
> 标签：android, rss

我使用 GReader（[链接](https://play.google.com/store/apps/details?id=com.noinnion.android.greader.reader&hl=en)）从我的 Android 平板电脑上的 Google Reader 读取我的 RSS 提要。不过，我从未在上面注册过帐户，它仍然可以读取我的 Google 帐户数据。两个问题浮现在脑海：

1.  它是如何认证我的？

2.  这种身份验证有多安全？GReader 的开发者可以获取我的密码吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:41:10.220

由于您通常必须将您的 Google 帐户添加到 Android 手机才能使用它，因此 GReader（如 GMail）可能会使用`AccountManager`API 的其他部分或其他部分连接到该帐户。

查看[其他问题](https://stackoverflow.com/questions/4038333/how-do-i-retrieve-the-logged-in-google-account-on-android-phones)的一些代码，了解如何获取登录用户的帐户名（如果您在清单中拥有[GET_ACCOUNTS](http://developer.android.com/reference/android/Manifest.permission.html#GET_ACCOUNTS)权限）。

我无法谈论此身份验证的安全性（因为我不确定使用 Google 服务器进行身份验证的实际机制是什么，但它可能是 OAuth）但由于您必须获得该权限，您至少可以检查应用程序关于他们是否可能对您的用户帐户做某事的市场。

请注意，您可以在 Android 手机上拥有多个帐户，因此最好让用户选择是否有可能获得错误的帐户。

# octopress - 如何在 octopress 中创建自定义文章类型？

> ID：12180743
> 
> 赞同：0
> 
> 时间：2012-08-29T14:51:17.777
> 
> 标签：octopress

有 2 种不同的文章类型：文章（博客）和 Octopress 中的页面。如果我想用不同的文章模板和索引页面创建另一个自定义文章类型（例如项目）怎么办？就像我们可以在 Drupal 的节点系统上一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:38:58.140

您可以使用不同的样式表。

# javascript - 添加 @javascript 标记时，Cucumber 中的 HTTP 身份验证失败

> ID：12180744
> 
> 赞同：1
> 
> 时间：2012-08-29T14:51:18.453
> 
> 标签：javascript, ruby-on-rails, cucumber, capybara

我在我的 Ruby on Rails 应用程序中有一个功能，可以很好地处理来自后台给定步骤的消息“响应 browser_basic_authorize”。

但是，如果我在场景之前添加一个@javascript 标记，那么我给出的背景会因“我不知道如何登录”而失败。

出了什么问题，如何在我的应用程序上测试 JavaScript 交互？

```
Background:
    Given I perform HTTP authentication as "<id>/<password>"
    When I go to the homepage
    Then I should see "Text-that-you-should-see-on-your-home-page"

Scenario: Displaying injury causative factors
    Given I am on the new_incident_report page
    When I choose "incident_report_employee_following_procedures_true"
    Then I should see "Equipment failure?"
    Then I should not see "Lack of training"

When /^I perform HTTP authentication as "([^\"]*)\/([^\"]*)"$/ do |username, password|
    puts "id/pswd: #{username}/#{password}"
    ### Following works ONLY if performed first before even going to a page!!!
    if page.driver.respond_to?(:basic_auth)
        puts 'Responds to basic_auth'
        page.driver.basic_auth(username, password)
    elsif page.driver.respond_to?(:basic_authorize)
        puts 'Responds to basic_authorize'
        page.driver.basic_authorize(username, password)
    elsif page.driver.respond_to?(:browser) && page.driver.browser.respond_to?(:basic_authorize)
        puts 'Responds to browser_basic_authorize'
        page.driver.browser.basic_authorize(username, password)
    else
        raise "I don't know how to log in!"
    end
end 
```

我正在使用 Ruby on Rails 3.0.9，当前的 gems 和其他测试正在通过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:37:15.803

我认为您的`@javascript`驱动程序是 Selenium，因为这是默认设置。[Selenium Core FAQ](http://wiki.openqa.org/display/SEL/Selenium+Core+FAQ#SeleniumCoreFAQ-HowdoIuseSeleniumtologintositesthatrequireHTTPbasicauthentication%28wherethebrowsermakesamodaldialogaskingforcredentials%29%3F)中关于基本身份验证的建议是在 URL 中提供用户名和密码，例如`http://user:pass@myexample.com/blah`.

我还没有找到明确的答案，但 Selenium Webdriver（Capybara 使用的）似乎不支持访问或修改 HTTP 标头，因此在 URL 中提供此信息可能是唯一的方法。

# actionscript-3 - AS3 - 特定框架事件监听器？

> ID：12180746
> 
> 赞同：1
> 
> 时间：2012-08-29T14:51:36.953
> 
> 标签：actionscript-3, events

我有以下代码来生成一个新的爆炸影片剪辑。不幸的是，GameEvent.EXPLOSION_FINISHED 事件从未被触发。每个帧都有一个特殊的事件监听器吗？

```
var exp:Explosion = new Explosion();
exp.addFrameScript(exp.totalFrames - 1, function():void {exp.stop();dispatchEvent( new GameEvent( GameEvent.EXPLOSION_FINISHED));});
exp.addEventListener(GameEvent.EXPLOSION_FINISHED, tidyUp, false, 0, true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T16:34:01.763

我认为你的问题是你没有在 exp 对象上调度事件，而是你的代码块所在的对象。试试这个：

```
exp.addFrameScript(exp.totalFrames - 1, function():void {exp.stop();exp.dispatchEvent( new GameEvent( GameEvent.EXPLOSION_FINISHED));}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:04:45.307

```
stage.addEventListener(GameEvent.EXPLOSION_FINISHED,tidyUp);
...
function tidyUp(e:Event):void {
    var s:Object=e.target;
    if (s is Explosion) {
        var expl:Explosion=s as Explosion;
        // process your "expl" Explosion object here
    }
} 
```

应该做。

# c# - RegularExpressionValidator 控件不允许使用法语字符的电子邮件。例如：é

> ID：12180753
> 
> 赞同：1
> 
> 时间：2012-08-29T14:51:48.070
> 
> 标签：c#, .net, regex, visual-studio, validation

我们与许多法国客户打交道，这是我们注册表单上的一个问题。

如何告诉控件允许使用法语字符？

最终，正则表达式是 Microsoft 提供的默认表达式：

```
\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)* 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:57:54.763

那么基本上正则表达式的结果不应该是不同的，无论是否有重音。（参见[Regex 重音不敏感？](https://stackoverflow.com/questions/6664582/regex-accent-insensitive)供参考）

但除此之外 - 我不知道，口音在电子邮件中是有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:00:47.190

即使我无法使 Microsoft 提供的正则表达式工作，*如果 \w 仍然不匹配特殊字符作为 èéà*您可以替换任何`\w`实例`[\wèéà]`以使此正则表达式接受任何单词文字以及您提供的任何特殊字符（也许在域部分省略那些特殊字符，我想你永远找不到 some@test.còm）

也许它不在答案范围内，但您会花一些时间查看[此](https://stackoverflow.com/questions/5383548/internet-e-mail-validation-expression-validates-everything)问题的答案以了解有关电子邮件验证的一些想法吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T14:54:56.983

试试这个：

```
ValidationExpression="\w*[\éèà]+([-+.']\w+)*@\w*[\éèà]+([-.]\w+)*\.\w+([-.]\w+)*" /> 
```

其中 [\éèà] 是您的特殊字符“列表”。您还可以添加 /i ( [\éèà]/i ) 以忽略区分大小写。

但我建议在后端验证电子邮件：

```
public bool IsValidEmail(string email)
{
     bool isValidEmail = false;
     try
     {
         var validEmail = new MailAddress(email);
         isValidEmail = true;
     {
     catch (FormatException ex)
     {
         // The email has not a good format
     }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-30T23:06:40.727

为法语电子邮件尝试上述多种方法，但所有这些方法都对我不起作用，我发现解决方案对我有用。

```
ValidationExpression="[À-ÿ\w]+([-+.'][À-ÿ\w]+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*" 
```

# android - 如何在Android中检测两指点击？

> ID：12180759
> 
> 赞同：4
> 
> 时间：2012-08-29T14:52:08.507
> 
> 标签：android, multi-touch, gesture

我需要在`Android`我正在开发的应用程序中检测两指点击。我还使用`ScaleGestureDetector`and`GestureDetector`来检测轻击、双击、长按和缩放。

在我的`onTouchEvent`方法中，我有：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    scaleGestureDetector.onTouchEvent(event);
    gestureDetector.onTouchEvent(event);

    switch (event.getActionMasked()) {
    case MotionEvent.ACTION_DOWN:
        activePointerId = event.getPointerId(0);
        break;
    .
    .
    .
    case MotionEvent.ACTION_POINTER_UP:
        int pointerId = event.getPointerId(event.getActionIndex());

        if (pointerId == activePointerId) {
            // change active pointer
        } else if (!scaleDetector.isInProgress() && (event.getPointerCount() == 2)) {
            // handle two-finger tap
        }
        break;
    .
    .
    . 
```

问题是规模也被检测为两指轻敲。关于解决这个问题的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T03:24:51.647

我之前也遇到过这样的问题。最后我必须编写自己的类来扩展 GestureDetector。你可以自己实现缩放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-12T06:51:29.583

```
private int tap_count=0;
    @Override
        public boolean onTouchEvent(MotionEvent event) {

        int action = event.getAction() & MotionEvent.ACTION_MASK;
        switch(action) {

            case MotionEvent.ACTION_DOWN : {

                ++tap_count;
                Log.d(LOG_TAG, "MotionEvent.ACTION_DOWN "+tap_count);
                break;
            }

            case MotionEvent.ACTION_MOVE : {
                break;
            }

            case MotionEvent.ACTION_POINTER_DOWN : {

                ++tap_count;
                Log.d(LOG_TAG, "MotionEvent.ACTION_POINTER_DOWN "+tap_count);
                break;
            }

            case MotionEvent.ACTION_POINTER_UP : {

                ++tap_count;
                Log.d(LOG_TAG, "MotionEvent.ACTION_POINTER_UP "+tap_count);
                break;
            }

            case MotionEvent.ACTION_UP : {

                --tap_count;
                Log.d(LOG_TAG, "MotionEvent.ACTION_UP "+tap_count);

                if(tap_count == 2){
                    tap_count = 0;
                    Toast.makeText(mContext,"Enableing Accessbility",Toast.LENGTH_SHORT).show();
                    return true;
                }
                break;
            }
        }
        return true;
        } 
```

# java - Maven 检查样式作为构建的一部分

> ID：12180765
> 
> 赞同：23
> 
> 时间：2012-08-29T14:52:43.403
> 
> 标签：java, maven, checkstyle

`checkstyle`如果出现一些错误，是否有可能以某种方式强制 maven 使构建失败？现在我必须运行`site`目标来生成`javadocs`和`checkstyle`报告。我想实现`install`目标，如果 checkstyle 有一些错误，我需要构建失败。这有可能实现吗？

现在我有我`checkstyle`的 Maven 报告块：

```
<reporting>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-checkstyle-plugin</artifactId>
            <version>2.9.1</version>
            <configuration>
                <configLocation>src/test/resources/checkstyle.xml</configLocation>
            </configuration>
        </plugin>
    </plugins>
</reporting> 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-29T15:09:04.203

您需要绑定`checkstyle:check`到 Maven 生命周期阶段（例如 validate ）并设置`failOnViolation`为 true。

就像是：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-checkstyle-plugin</artifactId>
    <version>2.9.1</version>
    <executions>
        <execution>
        <id>checkstyle</id>
        <phase>validate</phase>
        <goals>
            <goal>check</goal>
        </goals>
        <configuration>
            <failOnViolation>true</failOnViolation>
        </configuration>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-02-16T14:02:48.253

自从提出问题以来可能已经有一段时间了，但这对我不起作用。

对于可能遇到与我相同问题的其他任何人，尽管存在许多问题，但构建成功，我通过将`violationSeverity`属性从默认值降低`error`到`warning`插件`configuration`块中来修复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-27T18:20:19.683

尽管已经很久没有被问到这个问题了，但我确实遇到了另一个问题：

`JavadocMethod: Unable to get class information for @throws tag 'X'.`

我通过将阶段从“验证”更改为“测试”来解决这个问题，以便 checkstyle 在编译阶段之后运行。

# qt - 随着 QStackedWidget 索引的快速变化而闪烁

> ID：12180767
> 
> 赞同：1
> 
> 时间：2012-08-29T14:52:49.637
> 
> 标签：qt, flicker, qglwidget

我使用存储在 QStackedWidget 中的两个 QGLWidget 在 Qt 中开发了一个图像可视化应用程序。我希望能够依次快速显示每个 QGLWidget，以便发现所考虑的两个图像中的差异。为此，我将`wheelEvent()`函数映射到`setCurrentIndex()`QStackedWidget 的。

我的问题是，当快速触发该`wheelEvent()`功能时，这不时会导致白色闪烁，这会干扰图像分析任务。就像在显示 QGLWidget 之前显示某些小部件的默认背景一样，但我一直无法找到哪个...

我在 VisualStudio 2008 中使用 C++ 和 Qt 4.7，问题出现在 Windows XP 和 Windows 7 上。

以下是重现问题的最小代码：

```
#include <QtGUI/QApplication>
#include <QtGUI/QMainWindow>
#include <QtGUI/QStackedWidget>
#include <QtOpenGL/QGLWidget>

// Class for the QGLWidgets
class GLWidget : public QGLWidget
{
public:
    int _id;
    // Constructor
    GLWidget(int id, QWidget *parent) :
        QGLWidget(parent),
        _id(id)
    {
    };
    // OpenGL initialization
    void initializeGL()
    {
        glClearColor(0.0f, 0.0f, 0.0f, 1.0f);// Black Background
        glClearDepth(1.0f);                  // Depth Buffer Setup
    };
    // Paint in OpenGL viewport
    void paintGL()
    {
        // Clear Screen And Depth Buffer, and adapt viewport to widget geometry
        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
        glViewport(0,0,geometry().width(),geometry().height());
        // Define projection matrix
        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        glOrtho(0,1,0,1,-1,1);
        // Draw rectangle
        glMatrixMode(GL_MODELVIEW);
        glLoadIdentity();
        glColor4f((_id?0:1),0,(_id?1:0),1.0f);
        glPolygonMode( GL_FRONT_AND_BACK, GL_FILL );
        glFrontFace(GL_CW);
        glBegin(GL_QUADS);
            glVertex3f(0.33,0.33,0);
            glVertex3f(0.33,0.66,0);
            glVertex3f(0.66,0.66,0);
            glVertex3f(0.66,0.33,0);
        glEnd();
    };
};

// Class for the main window
class MainWindow : public QMainWindow
{
public:
    QStackedWidget* _stack;
    GLWidget* _w1;
    GLWidget* _w2;

    // Constructor
    MainWindow(QWidget * parent = 0, Qt::WindowFlags flags = 0) :
        QMainWindow(parent,flags),
        _stack(NULL),
        _w1(NULL),
        _w2(NULL)
    {
        _stack = new QStackedWidget(this);
        _w1 = new GLWidget(0,_stack);
        _w2 = new GLWidget(1,_stack);
        _stack->addWidget(_w1);
        _stack->addWidget(_w2);
        setCentralWidget(_stack);
    };

protected:
    // Mouse wheel event switches between two GL widgets
    void wheelEvent(QWheelEvent* event)
    {
        _stack->setCurrentIndex(1-_stack->currentIndex());
    };
};

// Main function
int main(int argc, char *argv[])
{
    QApplication app(argc, argv);
    app.connect( &app, SIGNAL(lastWindowClosed()), &app, SLOT(quit()) );
    MainWindow mw;
    mw.show();
    return app.exec();
} 
```

我尝试使用下面的代码将所有涉及的小部件的背景颜色设置为黑色（包括 QMainWindow），但仍然出现白色闪烁。

```
setAutoFillBackground(true);
QPalette pal = palette();
pal.setColor(QPalette::Window,Qt::black);
setPalette(pal); 
```

有谁知道如何消除这种闪烁？

# html - iframes直接使用html代码，没有源码

> ID：12180768
> 
> 赞同：1
> 
> 时间：2012-08-29T14:52:52.320
> 
> 标签：html, iframe

我想将 HTML 代码嵌入到 html 页面中。HTML 嵌入代码的样式扰乱了完整的布局，这就是我想使用 iframe 的原因。问题是没有 .html 页面可以链接，因为这个 HTML 代码来自数据库。我尝试过类似的东西：

```
<iframe>${htmlContent} </iframe> 
```

where`${htmlContent}`包含一个简单的 html 内容。

```
<html>
<head>
<title></title>
</head>
<body>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:27:00.423

此答案假定您能够从存储的 HTML 中删除`<html>`and`</html>`标记，并且能够`HtmlEncode`在放入标记时使用它。

将编码的 HTML 存储到类似 div 的东西中...

```
<div id="htmlstore" style="display:none;">{html goes here}</div> 
```

所以它看起来像......

```
<div id="htmlstore" style="display:none;">&lt;body&gt;This is my text&lt;/body&gt;</div> 
```

然后使用以下 Javsacript，它将“HtmlDecode”（不幸的是没有本机 javascript 函数来执行此操作），然后放入 iframe

```
<script type="text/javascript">
  window.onload = function(){
    var html = document.getElementById("htmlstore").innerHTML;
    html = html.replace(/&lt;/g,"<").replace(/&gt;/g,">");
    var frameDoc = document.getElementById("newframe").contentWindow.document;
    frameDoc.documentElement.innerHTML = html;
  }
</script> 
```

# java - 用于调试和测试的 Log4j 配置

> ID：12180769
> 
> 赞同：3
> 
> 时间：2012-08-29T14:52:54.660
> 
> 标签：java, unit-testing, maven, intellij-idea, log4j

我想在我的 web 应用程序中有两个 Log4j 配置文件。我放在这里的第一个：*conf/main/log4j.properties*

第二个在这里：*conf/test/resources/log4j-test.properties*

所以我的 pom 包含以下内容：

```
<build>....
    <resources>
        <resource>
            <directory>conf/main</directory>
            <filtering>true</filtering>
            <includes>
                <include>*.properties</include>
            </includes>
        </resource>
    </resources>
    <testResources>
        <testResource>
            <directory>conf/test/resources</directory>
            <filtering>true</filtering>
            <includes>
                <include>*.properties</include>
            </includes>
        </testResource>
    </testResources>
    .......
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.8.1</version>
            <configuration>
                <systemPropertyVariables>
                    <log4j.configuration>file:${project.build.testOutputDirectory}/log4j-test.properties</log4j.configuration>
                </systemPropertyVariables>
            </configuration>
        </plugin>
        <plugin>
    ..... 
```

log4j.properties：

```
log4j.rootLogger=INFO, stdout, mainFile

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

log4j.appender.mainFile=org.apache.log4j.RollingFileAppender
log4j.appender.mainFile.File=../logs/main.log
log4j.appender.mainFile.MaxFileSize=1MB
log4j.appender.mainFile.MaxBackupIndex=1
log4j.appender.mainFile.layout=org.apache.log4j.PatternLayout
log4j.appender.mainFile.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n 
```

和 log4j-test.properties：

```
log4j.rootLogger=INFO, stdout

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n 
```

我的目标 - 仅将测试中的日志写入我的控制台。例如我有一个简单的测试方法：

```
@Test(dataProvider = "invalidCredentials", threadPoolSize = 10, invocationCount = 1, invocationTimeOut = 1000)
public void testGetUserByLoginInvalid(String login, String password) {
    LDAPUser user = LdapUtils.getUserByLogin(login, password);
    assertNull(user);
} 
```

LdapUtils 类具有记录器定义：

```
private static final Logger logger = Logger.getLogger(LdapUtils.class); 
```

它可以写一些信息消息：

```
public static LDAPUser getUserByLogin(String login, String password) {
    ....
    if (user == null) {
        logger.info(INVALID_USER + login);
        return null;
    }
    .....
} 
```

所以问题是：当我执行 Maven 安装（或简单地 - 测试）时，它工作正常，因为它从正确的位置（conf/test/resources/log4j-test.properties）读取 log4j 配置并且什么都不写入文件，只写入控制台。

但是当我试图在 IntellijIDEA 中运行这个测试方法时（右击 testGetUserByLoginInvalid 方法并选择 Run "testGetUserByLoginInvalid()" ）它失败了

```
log4j:ERROR setFile(null,true) call failed.
java.io.FileNotFoundException: ..\logs\main.log (The system cannot find the path specified) 
```

在这种情况下，它读取错误的配置（log4j.properties 而不是 log4j-test.properties）并且在尝试查找 ..\logs\main.log 文件时失败

log4j.appender.mainFile.File=../logs/main.log

在网络应用程序的情况下，它似乎与

log4j.appender.mainFile.File=${catalina.home}/logs/main.log

但是测试根本不需要知道关于 ${catalina.home} 的东西，不是吗？因为它们不是 .war 的一部分。所以我的想法是为测试创建自己的 log4j 配置，但我无法避免在运行测试时读取错误配置的问题，而不是使用 Maven，而是使用我上面描述的 IDEA...

有什么想法吗？或者可能有另一种方法来做我想做的事？...提前非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-04T13:53:56.153

我通过以下方式解决了**${catalina.home}**的问题：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.16</version>
            <configuration>
                <systemProperties>
                    <property>
                        <name>catalina.home</name>
                        <value>${project.build.directory}</value>
                    </property>
                </systemProperties>
            </configuration>
        </plugin> 
```

# function - 将函数转换为委托

> ID：12180772
> 
> 赞同：3
> 
> 时间：2012-08-29T14:52:57.540
> 
> 标签：function, delegates, d

我有一个接受委托的属性：[`http.onReceiveHeader = (in char\[\] key, in char\[\] value) { }`](http://dlang.org/phobos/std_net_curl.html#HTTP)。我想使用一个分离的功能，而不是，例如：

```
void do_something(char[] key, char[] value)
{
}

http.onReceiveHeader = do_something; 
```

有可能在D中做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T14:59:16.977

中有一个[`toDelegate`](http://dlang.org/phobos/std_functional.html#toDelegate)函数[`std.functional`](http://dlang.org/phobos/std_functional.html)。

所以这应该工作：

```
http.onReceiveHeader = toDelegate(do_something); 
```

# javascript - Highcharts.js 设置更改列颜色的阈值

> ID：12180773
> 
> 赞同：2
> 
> 时间：2012-08-29T14:53:00.977
> 
> 标签：javascript, jquery, svg, highcharts

我想知道是否有人可以帮助我调整这个 Highcharts 折线图：**http :** [//jsfiddle.net/highcharts/PMyHQ/](http://jsfiddle.net/highcharts/PMyHQ/)到柱形图同时 仍然保持阈值着色（红色表示值>0；蓝色表示值<0） .

 **问题是，如果您只是更改图形类型 ，`type:'column'`那么基于阈值的着色会丢失，并且所有列都是蓝色的。

改变颜色的功能是`applyGraphGradient()`。我不知道如何更改此功能以保留基于阈值的颜色。

```
/**
 * Event handler for applying different colors above and below a threshold value. 
 * Currently this only works in SVG capable browsers. A full solution is scheduled
 * for Highcharts 3.0\. In the current example the data is static, so we don't need to
 * recompute after altering the data. In dynamic series, the same event handler 
 * should be added to yAxis.events.setExtremes and possibly other events, like
 * chart.events.resize.
 */
function applyGraphGradient() {

    // Options
    var threshold = 0,
        colorAbove = '#EE4643',
        colorBelow = '#4572EE';

    // internal
    var series = this.series[0], 
        i,
        point;

    if (this.renderer.box.tagName === 'svg') {

        var translatedThreshold = series.yAxis.translate(threshold),
            y1 = Math.round(this.plotHeight - translatedThreshold),
            y2 = y1 + 2; // 0.01 would be fine, but IE9 requires 2

        // Apply gradient to the path
        series.graph.attr({
            stroke: {
                linearGradient: [0, y1, 0, y2],
                stops: [
                    [0, colorAbove],
                    [1, colorBelow]
                ]
            }
         });

    }

    // Apply colors to the markers
    for (i = 0; i < series.data.length; i++) {
        point = series.data[i];
        point.color = point.y < threshold ? colorBelow : colorAbove;
        if (point.graphic) {
            point.graphic.attr({
                fill: point.color
            });
        }
    }

    // prevent the old color from coming back after hover
    delete series.pointAttr.hover.fill;
    delete series.pointAttr[''].fill;

}

// Initiate the chart
var chart = new Highcharts.Chart({

    chart: {
        renderTo: 'container',
        events: {
            load: applyGraphGradient
        },
        defaultSeriesType : 'column'
    },

    title: {
        text: 'Average monthly temperature'
    },

    yAxis: {
        plotLines: [{
            value: 0,
            color: 'silver',
            width: 2,
            zIndex: 2
        }],
        title: {
            text: 'Temperature (°C)'
        }
    },

    xAxis: {
        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
    },

    series: [{
        name: 'Temperature (°C)',
        data: [-2, -3, -2, 2, 5, 9, 11, 11, 10, 8, 4, -1]
    }]

});
​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T17:50:33.907

使用 Highcharts 绘图 API，它也可以在 VML 浏览器中工作：http: [//jsfiddle.net/highcharts/XndxH/](http://jsfiddle.net/highcharts/XndxH/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T15:39:15.087

这个怎么样：

```
function applyGraphGradient() {

    // Options
    var threshold = 0,
        colorAbove = '#EE4643',
        colorBelow = '#4572EE';

    // internal
    var someSeries = this.series[0];

    $.each(someSeries.points, function(){
        if (this.y < threshold)
        {
            $(this.graphic.element).attr('fill', colorBelow);
        }
        else
        {
            $(this.graphic.element).attr('fill', colorAbove );
        }
    });

    delete someSeries.pointAttr.hover.fill;
    delete someSeries.pointAttr[''].fill; 
} 
```

[在这里](http://jsfiddle.net/PMyHQ/345/)看小提琴。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T15:10:10.183

您所指的阈值是 0。对于柱形图，您可以像这样简单地单独设置每个条的颜色：[**示例**](http://jsfiddle.net/PMyHQ/343/)**

# google-maps-api-2 - Google Maps API Ver2 退役了吗？

> ID：12180774
> 
> 赞同：1
> 
> 时间：2012-08-29T14:53:14.357
> 
> 标签：google-maps-api-2

我最近读到 google maps api ver 2 将被淘汰。我知道它已经被弃用了。

有人知道这是不是真的吗？基本上是否有 Ver2 停止工作的时间点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-03T15:17:01.557

以防万一有人读到这篇文章，退休已延长至 2013 年 11 月 19 日。 [https://developers.google.com/maps/documentation/javascript/v2/reference](https://developers.google.com/maps/documentation/javascript/v2/reference)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T14:56:28.917

2013 年 5 月 19 日，似乎... [https://developers.google.com/maps/documentation/javascript/v2/reference](https://developers.google.com/maps/documentation/javascript/v2/reference)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T14:56:45.107

据谷歌称，[V2 API 将继续工作到 2013 年 5 月 19 日](https://developers.google.com/maps/documentation/javascript/v2/reference)。所以是的，它将被淘汰，届时将不再起作用。但是，您可以使用[Google AJAX API loader](https://developers.google.com/loader/)进行开发，因为[Maps API](https://developers.google.com/maps/)已集成到其中。它还继续依赖 Javascript 进行脚本编写和开发。Google 建议开发人员迁移到[API 的第 3 版](https://developers.google.com/maps/documentation/javascript/)。

所以是的，谷歌肯定会淘汰第 2 版。他们已经弃用第 2 版，他们建议迁移到第 3 版，并且他们希望在第 3 版平台上[积极促进](http://googlegeodevelopers.blogspot.com/)使用谷歌地图的开发。

# android - 有什么方法可以检测 android 屏幕内容是否发生变化？

> ID：12180781
> 
> 赞同：1
> 
> 时间：2012-08-29T14:53:32.313
> 
> 标签：android, broadcastreceiver, android-service

假设我有一个始终在后台运行的 android 应用程序。该应用程序所做的是侦听 android 屏幕上的任何更改，然后记录到数据库中。（这是我正在开发的应用程序的一个有用的法律功能）。那么，有没有什么办法可以监听安卓屏幕的变化呢？

UPDATE1：我想检测屏幕内容的变化，而不仅仅是方向。

Update2：我发现一个应用程序[（Droid VNC）](https://play.google.com/store/apps/details?id=org.onaips.vnc&feature=search_result#?t=W251bGwsMSwxLDEsIm9yZy5vbmFpcHMudm5jIl0.)做得很好。有人知道VNC在那里使用什么技术吗？谢谢，

阮明平。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:06:44.377

如果我没有错，你肯定是在谈论屏幕内容而不是方向如果是，那么你必须感知设备的帧缓冲区，因为你需要根设备

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:00:06.183

[onConfigurationChanged()](http://developer.android.com/reference/android/app/Activity.html#onConfigurationChanged%28android.content.res.Configuration%29)可以帮助你

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
   super.onConfigurationChanged(newConfig);
   //YOUR STUFF HERE
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T15:04:26.593

创建一个`Service`使用`SensorManager`来检测方向变化的。

# r - 在 R 中翻转 Beta 值

> ID：12180782
> 
> 赞同：0
> 
> 时间：2012-08-29T14:53:40.167
> 
> 标签：r, generics, beta

我有一个非常大的数据集，其中包含多个组。它们都包含相同的信息，但是，偶尔且不一致，这些信息是错误的。在下面的示例中，The`Group1_A1`和`Group2_A1`列不匹配（第 3 行和第 4 行被翻转），因此这些行中的其余信息不可比较。为了纠正这个问题，BETA`GROUP1_BETA`应该乘以 -1（同样，考虑到组之间的 A1 列不匹配，如果它们匹配，则 Beta 应该保持原样）。

```
MARKER  GROUP1_A1  GROUP1_A2  GROUP1_BETA  GROUP1_SE  GROUP2_A1  GROUP2_A2  GROUP2_BETA GROUP2_SE
rs10        A         C         -0.055      0.003        A         C           0.056      0.200
rs1000      A         G          0.208      0.100        A         G           0.208      0.001
rs10000     G         C         -0.134      0.009        C         G          -0.8624     0.010
rs10001     C         A          0.229      0.012        A         C           0.775      0.003 
```

在处理介于 0-1 之间的频率时，我使用的是：

```
data$GROUP1_oppositeFrequency <- abs( (as.character(data$Group2_A1) != 
                            as.character(data$Group1_A1)) -                   
                          as.numeric(data$Group1_Frequency) ) 
```

但是，因为 Beta 值可能是负数，所以这是行不通的。谁能指出我正确的方向？

可重现的数据：

```
data <- textConnection("SNP,GROUP1_A1,GROUP1_A2,GROUP1_Beta,GROUP1_SE,GROUP2_A1,GROUP2_A2,GROUP2_Beta,GROUP2_SE,GROUP3_A1,GROUP3_A2,GROUP3_Beta,GROUP3_SE
rs1050,C,T,0.0462,0.0035,T,C,0.007,0.0039,C,T,-0.007,0.009
rs1073,A,G,-0.0209,0.0035,A,G,0.0004,0.0031,A,G,-0.009,0.013
rs1075,C,T,-0.001,0.0039,T,C,-0.0013,0.0028,C,T,0.004,0.011
rs1085,C,G,-0.0001,0.0068,C,G,-0.0027,0.0032,C,G,-0.049,0.026
rs1127,C,T,0.0015,0.0044,T,C,0.0002,0.0029,C,T,-0.017,0.009
rs1312,A,G,-0.0014,0.0039,A,G,-0.0025,0.0029,A,G,0,0.01")
test_data <- read.csv(data, header = TRUE, sep = ",") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:32:08.447

假设唯一的可能性是“翻转”，您需要做的就是查看 in 中的值是否与因此`group1_a1`中的值相同`group2_a1` ：

```
mydata$group1_beta <- mydata$group1_beta * (-1)^((mydata$group1_a1 == mydata$group2_a1) + 1) 
```

更新：这是一个例子，显示它有效（至少，我的意思是它的工作方式:-)）。

```
 Rgames> mydat<-data.frame(A=c('a','b','d','c'),B=c('a','b','c','d'),one=1:4,two=1:4)
Rgames> mydat
  A B one two
1 a a   1   1
2 b b   2   2
3 d c   3   3
4 c d   4   4
Rgames> mydat$two<-mydat$two*(-1)^((mydat$A==mydat$B)+1)
Rgames> mydat
  A B one two
1 a a   1   1
2 b b   2   2
3 d c   3  -3
4 c d   4  -4 
```

# iphone - 自定义后退按钮在 xcode 中不起作用

> ID：12180783
> 
> 赞同：-1
> 
> 时间：2012-08-29T14:53:50.410
> 
> 标签：iphone, ios, xcode4

我将这些代码用于自定义后退按钮

```
UIImage *buttonImage = [UIImage imageNamed:@"back-button-2.png"];

    //create the button and assign the image
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button setImage:buttonImage forState:UIControlStateNormal];

    //set the frame of the button to the size of the image (see note below)
    button.frame = CGRectMake(0, 0, buttonImage.size.width, buttonImage.size.height);

    [button addTarget:self action:@selector(back) forControlEvents:UIControlEventTouchUpInside];

    //create a UIBarButtonItem with the button as a custom view
    UIBarButtonItem *customBarItem = [[UIBarButtonItem alloc] initWithCustomView:button];
    self.navigationItem.leftBarButtonItem = customBarItem; 
```

这是返回功能

```
-(void)back {   
    // Tell the controller to go back
    [self.navigationController popViewControllerAnimated:YES];
} 
```

自定义后退按钮即将出现，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:57:22.953

```
self.navigationItem.leftBarButtonItem = [self getBackBtn];

- (UIBarButtonItem *) getBackBtn
{
    UIButton * backBtn=[UIButton buttonWithType:UIButtonTypeCustom];
    [backBtn setFrame:CGRectMake(0.0f,0.0f,73.0f,33.0f)];
    [backBtn setImage:[UIImage imageNamed:[NSString stringWithFormat:@"back.png"]] forState:UIControlStateNormal];
    [backBtn addTarget:self action:@selector(backBtnPressed) forControlEvents:UIControlEventTouchUpInside];
    UIBarButtonItem *backBarButton = [[UIBarButtonItem alloc] initWithCustomView:backBtn];
    return backBarButton;    
}

//Action For LeftBarButton - BackButton
- (void)backBtnPressed
{
    [self.navigationController popViewControllerAnimated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:26:38.593

因为`UIBarButtonBarItem`它自己处理事件并且**它永远不会将事件传递**给它的`UIView`，您的自定义后退按钮所在的位置。在这一行中，您**仅将其添加为子视图。**

```
UIBarButtonItem *customBarItem = [[UIBarButtonItem alloc] initWithCustomView:button]; 
```

它显示，但它**永远**不会从. 这不是合乎逻辑的行为，因此这很好。`UIBarButtonItem``UIBarButtonItem``UIView`

* * *

你必须添加选择器之`UIBarButtonItem`类的

```
[customBarItem setAction:@selector(back)]; 
```

不为你`UIButton`反对。

* * *

...或者您可以添加后退按钮，例如

```
[self.navigationItem setBackBarButtonItem:[[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStyleBordered target:self action:@selector(back)]]; 
```

您可以使用该类的任何其他 init 方法对其`UIBarButtonItem`进行自定义，您可以在**[UIBarButtonItem 类参考](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIBarButtonItem_Class/Reference/Reference.html)**中找到它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T15:01:36.303

您可以以不同的方式执行自定义 UIBarButtonItem，并使其保持箭头形状

假设您的第一个控制器是 A，并且您在 A 控制器的 viewWillAppear 中推入 B：您可以这样做

```
self.navigationItem.backBarButtonItem = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"whatever.png"] style:UIBarButtonItemStyleBordered target:nil action:nil]; 
```

这将使 B 的后退按钮成为普通的后退按钮，但具有您选择的图像

如果你想要自定义文本，你可以做

```
self.navigationItem.backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"title" style:UIBarButtonItemStyleBordered target:nil action:nil]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T14:56:14.233

尝试将目标添加到`customBarItem`而不是`button`自定义视图

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-03T11:13:42.257

试试这里： [http ://www.raywenderlich.com/4344/user-interface-customization-in-ios-5](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)

这就是我使用的......基本上你将这个方法添加到你的应用程序委托中：

```
- (void)customizeAppearance
{

    UIImage *buttonBack30 = [[UIImage imageNamed:@"button_back_textured_30"] 
        resizableImageWithCapInsets:UIEdgeInsetsMake(0, 13, 0, 5)];
    [[UIBarButtonItem appearance] setBackButtonBackgroundImage:buttonBack30 
        forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
} 
```

# c# - 如何从资源文件中在 CustomValidator 上加载 ErrorMessage？

> ID：12180784
> 
> 赞同：6
> 
> 时间：2012-08-29T14:53:56.297
> 
> 标签：c#, asp.net, globalization

我想从资源文件中`ErrorMessage`为我加载。`CustomValidator`

我的`CustomValidator`设置如下：

```
<asp:CustomValidator ID="cv1" runat="server" ControlToValidate="txt1" 
        ErrorMessage="TEXT TO BE LOCALIZED" OnServerValidate="cv1_Validate" /> 
```

我的验证方法如下：

```
protected void cv1_Validate(object source, ServerValidateEventArgs e)
{
    if (FalseCondition)
    {
        e.IsValid = false;
    }
    else
    {
        e.IsValid = true;
    }
} 
```

验证工作正常，但我想`ErrorMessage`从我的本地资源文件中提取。

**编辑**：我也很好奇是否有任何方法可以使用`meta:resourcekey`.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-29T14:59:09.517

假设您的页面（或控件）有本地资源，这将是这样做的方法

```
ErrorMessage="<%$ resources:ResourceName %>" 
```

如果您从全局资源文件中获取文本，您应该执行以下操作

```
ErrorMessage="<%$ resources:Strings, ResourceName %>" 
```

文件名在哪里`Strings`。这种方法称为显式本地化。

**编辑**

您可以使用`meta:resourcekey`. 这称为隐式本地化。您需要拥有本地资源，因为这种方法对全局资源无效。

> 1.  确保您具有满足以下条件的本地资源文件（.resx 文件）：
>     
>     
>     *   它们位于 App_LocalResources 文件夹中。
>         
>         
>     *   基本名称与页面名称匹配。
>         
>         
>     
>     例如，如果您正在使用名为 Default.aspx 的页面，则资源文件名为 Default.aspx.resx（用于默认资源）、Default.aspx.es.resx、Default.aspx.es-mx.resx、等等。
>     
>     
>     *   文件中的资源使用命名约定 resourcekey."property"。
>     
>     例如，键名 Button1."Text"。
>     
>     
> 2.  在控件标记中，添加隐式本地化属性。
>     
>     
>     
>     例如：
>     
>     
>     
>     <asp:Button ID="Button1" runat="server" Text="DefaultText" meta:resourcekey="Button1" />

资料来源：[MSDN](http://msdn.microsoft.com/en-us/library/ms228093(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T17:18:39.157

如果要在代码隐藏中执行此操作，可以使用以下内容：

```
ResourceManager resmgr = new ResourceManager("YourApplication.YourBaseResourceFile ", 
                              Assembly.GetExecutingAssembly());

protected void cv1_Validate(object source, ServerValidateEventArgs e) 
{   

if (FalseCondition)  
   {  
       CultureInfo ci = Thread.CurrentThread.CurrentCulture;    
       String str = resmgr.GetString("Error Msg Key in Resource File");
       cv1.ErrorMessage =str;      
       e.IsValid = false; 
    }     
else   
  {   
     e.IsValid = true;  
   } 
} 
```

# javascript - 通过原型定义方法与在构造函数中使用 this - 真的是性能差异吗？

> ID：12180790
> 
> 赞同：62
> 
> 时间：2012-08-29T14:54:29.443
> 
> 标签：javascript, performance, memory-management, prototype

在 JavaScript 中，我们有两种方法来创建“类”并赋予它公共功能。

方法一：

```
function MyClass() {
    var privateInstanceVariable = 'foo';
    this.myFunc = function() { alert(privateInstanceVariable ); }
} 
```

方法二：

```
function MyClass() { }

MyClass.prototype.myFunc = function() { 
    alert("I can't use private instance variables. :("); 
} 
```

我读过很多次有人[说](https://stackoverflow.com/questions/4508313/advantages-of-using-prototype-vs-defining-methods-straight-in-the-constructor)使用方法 2 更有效，因为所有实例都共享相同的函数副本，而不是每个实例都有自己的副本。但是，通过原型定义函数有一个巨大的缺点——它使得不可能拥有私有实例变量。

即使在理论上，使用方法 1 为对象的每个实例都提供了它自己的函数副本（因此使用了更多的内存，更不用说分配所需的时间了）——这在实践中真的发生了吗？似乎网络浏览器可以轻松进行的优化是识别这种极其常见的模式，并且实际上让对象的所有实例都引用通过这些“构造函数”定义*的相同函数副本。*然后，如果稍后显式更改它，它只能为实例提供它自己的函数副本。

任何关于两者之间性能差异的见解——或者甚至更好的*真实世界经验——都将非常有帮助。*

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-08-29T15:00:10.810

请参阅[http://jsperf.com/prototype-vs-this](http://jsperf.com/prototype-vs-this)

通过原型声明你的方法更快，但这是否相关是有争议的。

例如，如果您的应用程序存在性能瓶颈，则不太可能出现这种情况，除非您碰巧在某个任意动画的每一步都实例化了 10000 多个对象。

如果性能是一个严重的问题，并且您想进行微优化，那么我建议通过原型声明。否则，只需使用对您最有意义的模式。

我要补充一点，在 JavaScript 中，有一个前缀属性的约定，这些属性旨在被视为带有下划线的私有属性（例如`_process()`）。大多数开发人员会理解并避免这些属性，除非他们愿意放弃社会契约，但在这种情况下，你最好不要迎合他们。我的意思是：你可能真的不需要*真正的*私有变量......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-26T03:50:05.633

在新版 Chrome 中，this.method 比prototype.method 快20% 左右，但创建新对象仍然较慢。

如果您可以重用对象而不是总是创建一个新对象，那么这可能比创建新对象快 50% - 90%。加上没有垃圾收集的好处，这是巨大的：

[http://jsperf.com/prototype-vs-this/59](http://jsperf.com/prototype-vs-this/59)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-30T00:39:54.553

只有在创建大量实例时才会有所不同。否则，两种情况下调用成员函数的性能完全相同。

我在 jsperf 上创建了一个测试用例来证明这一点：

[http://jsperf.com/prototype-vs-this/10](http://jsperf.com/prototype-vs-this/10)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-05T20:45:38.200

您可能没有考虑过这一点，但是将方法直接放在对象上实际上在一种方式上会更好：

1.  **方法调用要快得多***（***jsperf*** [），因为不必](http://jsperf.com/method-invocation-speed)参考原型链来解析方法。*

 *但是，速度差异几乎可以忽略不计。最重要的是，将方法放在原型上更好，有两种更有影响力的方式：

1.  **更快地创建实例**( [jsperf](http://jsperf.com/object-creation-speed-method-on-object-vs-on-prototype) )
2.  **使用更少的内存**

正如 James 所说，如果您要实例化一个类的数千个实例，这种差异可能很重要。

也就是说，我当然可以想象一个 JavaScript 引擎，它识别出你附加到每个对象的函数不会在实例之间改变，因此只在内存中保留一个函数副本，所有实例方法都指向共享函数。事实上，Firefox 似乎在做一些这样的特殊优化，但 Chrome 没有。

* * *

**在旁边：**

你是对的，不可能从原型的内部方法访问私有实例变量。所以我想你必须问自己的问题是，你是否重视能够使实例变量真正私有而不是利用继承和原型设计？我个人认为使变量真正私有化并不那么重要，只需使用下划线前缀（例如，“this._myVar”）来表示虽然变量是公共的，但它应该被认为是私有的。也就是说，在 ES6 中，显然有一种方法可以两全其美！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T15:01:48.797

简而言之，使用方法 2 创建所有实例将共享的属性/方法。这些将是“全局的”，对它的任何更改都将反映在所有实例中。使用方法 1 创建实例特定的属性/方法。

我希望我有一个更好的参考，但现在看看[这个](https://github.com/johnnyfreeman/revolver/blob/master/dist/revolver.js)。您可以看到我是如何在同一个项目中将这两种方法用于不同目的的。

希望这可以帮助。:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-03T22:50:27.400

这个答案应该被认为是填补缺失点的其余答案的扩展。结合了个人经验和基准。

就我的经验而言，我使用构造函数来虔诚地构造我的对象，无论方法是否是私有的。主要原因是当我开始时，这对我来说是最简单的直接方法，所以它不是特别偏好。它可能就像我喜欢可见的封装一样简单，并且原型有点脱离实体。我的私有方法也将被分配为范围内的变量。尽管这是我的习惯，并且可以很好地保持事物的独立性，但这并不总是最好的习惯，而且我有时会碰壁。除了根据配置对象和代码布局进行高度动态自组装的古怪场景外，在我看来，它往往是较弱的方法，尤其是在性能受到关注的情况下。知道内部是私有的是有用的，但你可以通过其他方式和正确的纪律来实现这一点。除非性能是一个严肃的考虑因素，否则对手头的任务使用最有效的方法。

1.  使用原型继承和约定将项目标记为私有确实使调试更容易，因为您可以从控制台或调试器轻松遍历对象图。另一方面，这样的约定使混淆变得更加困难，并使其他人更容易将自己的脚本固定在您的网站上。这是私有作用域方法获得流行的原因之一。这不是真正的安全性，而是增加了阻力。不幸的是，很多人仍然认为这是一种真正的安全 JavaScript 编程方式。由于调试器变得非常好，代码混淆取而代之。如果您正在寻找客户端上存在太多安全漏洞的情况，那么您可能需要注意这种设计模式。
2.  约定允许您毫不费力地拥有受保护的属性。这可能是一种祝福，也可能是一种诅咒。它确实缓解了一些继承问题，因为它的限制较少。在考虑可能在哪里访问财产时，您仍然存在碰撞或增加认知负担的风险。自组装对象可以让你做一些奇怪的事情，你可以解决一些继承问题，但它们可能是非常规的。我的模块往往具有丰富的内部结构，除非在外部需要，否则在其他地方需要功能（共享）或公开之前，事情不会被拉出。构造器模式往往会导致创建自包含的复杂模块，而不是简单的零碎对象。如果你想要，那很好。否则，如果您想要更传统的 OOP 结构和布局，那么我可能会建议按惯例规范访问。在我的使用场景中，复杂的 OOP 通常不合理，模块可以解决问题。
3.  这里的所有测试都是最小的。在现实世界的使用中，模块可能会更复杂，使得命中比这里的测试显示的要大得多。有一个私有变量和多个方法在其上工作是很常见的，并且这些方法中的每一个都会增加更多的初始化开销，而原型继承是不会得到的。在大多数情况下，这无关紧要，因为只有少数此类对象的实例漂浮在周围，尽管累积起来可能会累加。
4.  由于原型查找，假设原型方法调用速度较慢。这不是一个不公平的假设，在我测试它之前我自己也做了同样的假设。实际上它很复杂，一些测试表明这方面是微不足道的。在 、`prototype.m = f`和`this.m = f`之间，`this.m = function...`后者的性能明显优于前两者，后者的性能大致相同。如果仅原型查找是一个重要问题，那么最后两个函数将显着执行第一个函数。相反，至少在 Canary 方面，发生了一些奇怪的事情。功能可能会根据它们的成员进行优化。许多性能考虑因素开始发挥作用。您在参数访问和变量访问方面也存在差异。
5.  内存容量。这里不好讨论。您可以预先做出的一个假设可能是正确的，即原型继承通常会更加节省内存，并且根据我的测试，它通常是这样的。当您在构造函数中构建对象时，您可以假设每个对象可能都有自己的每个函数的实例而不是共享的，一个更大的属性映射用于它自己的个人属性，并且可能还有一些开销来保持构造函数范围的开放。在私有作用域上运行的函数对内存的要求极高且不成比例。我发现在很多情况下，内存的比例差异将比 CPU 周期的比例差异重要得多。
6.  内存图。您还可以堵塞引擎，使 GC 更昂贵。分析器确实倾向于显示这些天在 GC 中花费的时间。这不仅是分配和释放更多的问题。您还将创建一个更大的对象图来遍历和类似的事情，以便 GC 消耗更多周期。如果您创建一百万个对象然后几乎不接触它们，根据引擎的不同，它可能会对环境性能产生比您预期的更大的影响。我已经证明，这至少会使 gc 在处理对象时运行更长时间。这往往与使用的内存和 GC 所需的时间相关。但是，在某些情况下，无论内存如何，时间都是相同的。这表明图构成（间接层、项目计数等）具有更大的影响。那'
7.  没有多少人广泛使用链式原型，我必须承认包括我自己在内。理论上，原型链可能很昂贵。有人会，但我没有衡量成本。如果您完全在构造函数中构建对象，然后在每个构造函数自己调用父构造函数时具有继承链，理论上方法访问应该快得多。另一方面，如果它很重要（例如将原型沿祖先链展平），并且您不介意破坏诸如 hasOwnProperty 之类的东西，也许是 instanceof 等，如果您真的需要它，您可以完成等效操作。在任何一种情况下，一旦你在性能黑客方面走上这条道路，事情就会变得复杂。你可能最终会做你不应该做的事情。
8.  许多人不直接使用您提出的任何一种方法。相反，他们使用匿名对象制作自己的东西，允许以任何方式共享方法（例如 mixins）。也有许多框架实现了它们自己的组织模块和对象的策略。这些是大量基于约定的自定义方法。对于大多数人和你来说，你的第一个挑战应该是组织而不是性能。这通常很复杂，因为 Javascript 提供了许多实现事物的方法，而不是具有更明确的 OOP/命名空间/模块支持的语言或平台。当谈到性能时，我会说首先要避免重大缺陷。
9.  有一种新的 Symbol 类型应该适用于私有变量和方法。有很多方法可以使用它，它提出了许多与性能和访问相关的问题。在我的测试中，与其他所有东西相比，Symbols 的性能并不是很好，但我从未彻底测试过它们。

免责声明：

1.  有很多关于性能的讨论，随着使用场景和引擎的变化，并不总是有一个永久正确的答案。始终配置文件，但也始终以不止一种方式测量，因为配置文件并不总是准确或可靠。除非确实存在明显的问题，否则请避免在优化方面投入大量精力。
2.  最好在自动化测试中包含敏感区域的性能检查并在浏览器更新时运行。
3.  请记住，有时电池寿命和可感知的性能一样重要。在其上运行优化编译器后，最慢的解决方案可能会变得更快（IE，编译器可能会更好地了解何时访问受限范围变量而不是按约定标记为私有的属性）。考虑后端，例如 node.js。这可能需要比您通常在浏览器上找到的更好的延迟和吞吐量。大多数人不需要担心这些事情，比如验证注册表单，但是这些事情可能很重要的不同场景的数量正在增长。
4.  您必须小心使用内存分配跟踪工具才能保留结果。在某些情况下，我没有返回并保留数据，它已被完全优化，或者在实例化/未引用之间采样率不够，让我对如何初始化数组并填充到注册为 3.4KiB 的一百万个感到摸不着头脑在分配配置文件中。
5.  在现实世界中，大多数情况下真正优化应用程序的唯一方法是首先编写它，以便您可以对其进行测量。在任何给定的情况下，如果不是数千个因素，就有数十到数百个因素可以发挥作用。引擎也会做一些可能导致不对称或非线性性能特征的事情。如果您在构造函数中定义函数，它们可能是箭头函数或传统函数，每个函数在某些情况下的行为不同，我不知道其他函数类型。类的行为也与原型构造函数的性能不同，这些构造函数应该是等效的。您还需要非常小心基准测试。原型类可以以各种方式延迟初始化，特别是如果您也对您的属性进行了原型化（建议，不要）。这意味着您可以低估初始化成本并夸大访问/属性突变成本。我还看到了渐进优化的迹象。在这些情况下，我用相同的对象实例填充了一个大数组，并且随着实例数量的增加，对象似乎逐渐针对内存进行优化，直到其余部分相同。这些优化也可能会显着影响 CPU 性能。这些事情不仅很大程度上取决于您编写的代码，还取决于运行时发生的事情，例如对象数量、对象之间的差异等。在这些情况下，我用相同的对象实例填充了一个大数组，并且随着实例数量的增加，对象似乎逐渐针对内存进行优化，直到其余部分相同。这些优化也可能会显着影响 CPU 性能。这些事情在很大程度上不仅取决于您编写的代码，还取决于运行时发生的事情，例如对象数量、对象之间的差异等。在这些情况下，我用相同的对象实例填充了一个大数组，并且随着实例数量的增加，对象似乎逐渐针对内存进行优化，直到其余部分相同。这些优化也可能会显着影响 CPU 性能。这些事情在很大程度上不仅取决于您编写的代码，还取决于运行时发生的事情，例如对象数量、对象之间的差异等。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-25T21:15:39.820

您可以使用这种方法，它将允许您使用`prototype`和访问实例变量。

```
var Person = (function () {
    function Person(age, name) {
        this.age = age;
        this.name = name;
    }

    Person.prototype.showDetails = function () {
        alert('Age: ' + this.age + ' Name: ' + this.name);
    };

    return Person; // This is not referencing `var Person` but the Person function

}()); // See Note1 below 
```

注1：

括号将调用函数（自调用函数）并将结果分配给`var Person`.

* * *

**用法**

```
var p1 = new Person(40, 'George');
var p2 = new Person(55, 'Jerry');
p1.showDetails();
p2.showDetails(); 
```*

# python - 在hadoop的一个流式作业中使用多个映射器输入？

> ID：12180791
> 
> 赞同：2
> 
> 时间：2012-08-29T14:54:33.187
> 
> 标签：python, hadoop, streaming

在java中我会使用：

> MultipleInputs.addInputPath(conf, path, inputFormatClass, mapperClass)

为每个添加具有不同映射器的多个输入。

现在我正在使用python在hadoop中编写一个流式作业，可以完成类似的工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T17:50:33.820

您可以使用多个 -input 选项来指定多个输入路径：

```
hadoop jar hadoop-streaming.jar -input foo.txt -input bar.txt ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-12T09:51:15.150

我想这可以帮助你：[https](https://github.com/hyonaldo/hadoop-multiple-streaming) ://github.com/hyonaldo/hadoop-multiple-streaming 。

在这里，您还可以看到“这些不同输入路径的不同映射器”：

```
hadoop jar hadoop-multiple-streaming.jar \  
  -input    myInputDirs \  
  -multiple "outputDir1|mypackage.Mapper1|mypackage.Reducer1" \  
  -multiple "outputDir2|mapper2.sh|reducer2.sh" \  
  -multiple "outputDir3|mapper3.py|reducer3.py" \  
  -multiple "outputDir4|/bin/cat|/bin/wc" \  
  -libjars  "libDir/mypackage.jar" \
  -file     "libDir/mapper2.sh" \  
  -file     "libDir/mapper3.py" \  
  -file     "libDir/reducer2.sh" \  
  -file     "libDir/reducer3.py" 
```

# multithreading - DBCP 无异常停止工作

> ID：12180792
> 
> 赞同：0
> 
> 时间：2012-08-29T14:54:34.183
> 
> 标签：multithreading, connection-pooling, apache-commons, infinite-loop, apache-commons-dbcp

我对 Apache Commons DBCP 有疑问。池工作，但在随机时间（小时）之前，这会停止循环。我有 Java 中的线程，其中一个以 15 秒的睡眠时间连接到数据库。这个线程，在随机时间停止工作之前，但没有被杀死，并且在无限循环中等待连接。

这是我的 DBCP 配置的附件：

```
 BasicDataSource basicDataSource = new BasicDataSource();
    basicDataSource.setDriverClassName(_configuracion.getClassName());
    basicDataSource.setUsername(_configuracion.getUser());
    basicDataSource.setPassword(_configuracion.getPassword());
    basicDataSource.setUrl("jdbc:mysql://" + _configuracion.getSocket() + "/" +     
    _configuracion.getNombreBd());

    basicDataSource.setValidationQuery("SELECT 1");
    basicDataSource.setTestOnBorrow(true);
    basicDataSource.setTestWhileIdle(true);
    basicDataSource.setTestOnReturn(false);
    basicDataSource.setTimeBetweenEvictionRunsMillis(1000 * 60 * 15);
    basicDataSource.setMinEvictableIdleTimeMillis(1000 * 60 * 2);
    basicDataSource.setNumTestsPerEvictionRun(10);

    basicDataSource.setRemoveAbandoned(true);
    basicDataSource.setRemoveAbandonedTimeout(60 * 60);

    _dataSource = basicDataSource; 
```

_dataSource 属性是我的数据库类的静态属性，并且该类被称为线程。

```
private static DataSource _dataSource; 
```

我不知道我的 DBCP 配置是否有问题。

请帮我！

编辑：这是使用数据源的代码。

```
public CachedRowSet query(String sql) {

CachedRowSet datos = null;
Connection con;
ResultSet rs;
try {
    con = _dataSource.getConnection();
    Statement sentencia = con.createStatement();
    rs = sentencia.executeQuery(sql);

    datos = new CachedRowSetImpl();
    datos.populate(rs);
    rs.close();
    sentencia.close();
    con.close();

 } catch (Exception ex) {
    System.out.println("Error: " + ex.getMessage());
 }

return datos; 
```

}

我发现在 DBCP 池停止工作之前，它有一个 SQL 异常，这个异常被捕获，但是池停止工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:09:21.877

尝试使用最新的 jar (commons-dbcp-1.4) 使用**setValidationQueryTimeout**

为您的 sql 查询设置查询超时。

# jquery - 使用 jCoverflip 设计产品描述

> ID：12180799
> 
> 赞同：0
> 
> 时间：2012-08-29T14:54:50.477
> 
> 标签：jquery, html, css, jquery-plugins

我在为图像下的文本设置样式时遇到问题。我尝试过内联样式，但似乎没有任何效果。我需要产品名称的字体大小大于文本的其余部分。任何建议将不胜感激。

提前致谢。

*   麦克风

[http://mikedemar.com/stromasys/jcoverflip/index01.html](http://mikedemar.com/stromasys/jcoverflip/index01.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T16:16:41.993

见[http://jsfiddle.net/QmVFR/](http://jsfiddle.net/QmVFR/)

添加

```
#flip>li>.content{display:none;}

#flip>li.selected>.content{
    display:block;
    position:absolute;
    font-size:11px;
    z-index:1;
    text-align:center;
    width:500px;
    padding-left:50%;
    margin-left:-250px;
}

#flip>li.selected>.content>.title{font-size:16px;display:block!important;}

#scrollbar{top:320px;} 
```

将您的 HTML 更改为

```
<ul id="flip">

<li>
    <img src="http://mikedemar.com/stromasys/jcoverflip/images/1.png" />
    <div class="content">
        <p class="title">CHARON-AXP/DS10</p>
        <p>Up to two (2) virtual CPUs</p>
        <p>Up to 32GB of Alpha memory.</p>
        <p>Run OpenVMS or Tru64 with no changes</p>
        <p>Supports Windows, Linux and VMware</p>
        <p>Pricing starts at $9,500.00 USD</p>
    </div>
</li>
<li>
    <img src="http://mikedemar.com/stromasys/jcoverflip/images/2.png" />
    <div class="content">
        <p class="title">CHARON-AXP/GS80</p>
        <p>Up to eight (8) virtual CPUs</p>
        <p>Up to 32GB of Memory</p>
        <p>Run OpenVMS or Tru64 with no changes</p>
        <p>Supports Windows, Linux and VMware</p>
        <p>Pricing starts at $49,000</p>
    </div>
</li>
<li>
    <img src="http://mikedemar.com/stromasys/jcoverflip/images/5.png" />
    <div class="content">
        <p class="title">CHARON-AXP/DS20</p>
        <p>Up to two (2) virtual CPUs</p>
        <p>Up to 32GB of Alpha memory.</p>
        <p>Run OpenVMS or Tru64 with no changes</p>
        <p>Supports Windows, Linux and VMware</p>
        <p>Pricing starts at $12,200</p>
    </div>
</li>
<li>
    <img src="http://mikedemar.com/stromasys/jcoverflip/images/4.png" />
    <div class="content">
        <p class="title">A title for the image</p>
    </div>
</li>
<li>
    <img src="http://mikedemar.com/stromasys/jcoverflip/images/6.png" />
    <div class="content">
        <p class="title">CHARON-VAX/6620</p>
        <p>Up to six (6) virtual CPUs</p>
        <p>Up to 3 GB of Memory</p>
        <p>Run OpenVMS with no changes</p>
        <p>Supports Windows and VMware</p>
        <p>Pricing starts at 65,000</p>
    </div>
</li>
<li>
    <img src="http://mikedemar.com/stromasys/jcoverflip/images/7.png" />
    <div class="content">
        <p class="title">A title for the image</p>
    </div>
</li>
</ul> 
```

并添加

```
jQuery('#flip>li.selected').removeClass('selected');
el.addClass('selected'); 
```

在`currentCss`函数的开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:33:00.537

试试这个：

您想扩大规模的测试，只需添加一个跨度标签，因为整个文本使用“#flip .ui-jcoverflip--title”css，您无法将其分开。

为更大的文本使用额外的 span 标签，例如：<span style="font-size:15px">CHARON-AXP/DS20 </span>

您可以使用带有 "#flip .ui-jcoverflip--title .myfont" 的附加类，并为其指定 myfont 类名称。希望这会有所帮助。

# linux - 剥离错误或无错误

> ID：12180805
> 
> 赞同：5
> 
> 时间：2012-08-29T14:55:11.583
> 
> 标签：linux, shell, strip

我试图在 linux 中使用 strip 命令剥离一组文件。但是我收到以下错误：

```
strip: files : could not create temporary file to hold stripped copy: No error 
```

然后命令完成，没有任何其他错误。试纸有错误还是没有错误？如果有错误我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T15:04:30.183

您似乎无权在当前工作目录中创建文件。为此，您的用户帐户需要对该目录的写入权限。

# xquery - 如何防止 xdmp:node-replace 添加命名空间声明？

> ID：12180811
> 
> 赞同：3
> 
> 时间：2012-08-29T14:55:22.937
> 
> 标签：xquery, marklogic

我想用它`xdmp:node-replace`来替换我的 xml 文档中的一个节点。但是，每当它替换一个节点时，它都会`xmlns`向该节点插入一个空白标签。如何避免？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:26:20.310

空白 xmlns 标记表示默认命名空间未声明。

如果新节点没有前缀并且不在命名空间中，并且父节点在其范围内有一个默认命名空间，这听起来像是正确的行为，例如：

```
<parent xmlns="http://www.example.com/">
  <new-node xmlns=""/>
</parent> 
```

您是否尝试过替换为父级范围内默认命名空间中的节点？然后我会期待以下结果（新节点在[http://www.example.com/](http://www.example.com/)命名空间中）：

```
<parent xmlns="http://www.example.com/">
  <new-node/>
</parent> 
```

# c++ - c++线程安全累加器

> ID：12180820
> 
> 赞同：0
> 
> 时间：2012-08-29T14:56:00.567
> 
> 标签：c++, multithreading

我需要根据分钟间隔监控内部流量，所以我决定做这样的事情：

```
Flow{
   void send();
   static uint accumulator;
}

//Only single thread call to send
void Flow::sendPacket(pck){
   accumulator+=pck.size();
   do();
}

//Only single thread call to monitor . **No the same thread that call to send!**
Monitor::monitor(){
   //Start monitor
   Flow::accumulator = 0;
   sleep(60);
   rate  = accumulator/60;
} 
```

**如果不使用 atomic ，我可以有初始化为 0 的风险不会正确发生吗？**

我担心的是，即使是原子也不会保证 init，因为如果同时将 init 监视为 0，并且同时使用旧值进行累积，那么新的累积值将基于旧值而不是 init 值.

另外我担心原子惩罚。send 为每个数据包调用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T14:59:19.890

Volatile 对多线程没有帮助。您需要防止`accumulator`在另一个线程正在读取该值的同时更新和更新的值。如果你有 C++11，你可以做`accumulator`原子：`std::atomic<uint> accumulator;`否则，你需要锁定一个互斥锁，围绕所有对其值的访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:00:48.540

`volatile`对于在线程之间共享数据既没有必要也不充分，所以不要使用它。

如果它可能被多个线程访问，那么您必须：

*   使用 C++11 原子库或编译器特定的语言扩展（如果不可用）使访问原子化，或者
*   如果不可用，请使用 C++11 线程库或其他一些库（Boost.Thread、POSIX 线程、Intel TBB、Windows API 或许多其他库）使用互斥锁或类似锁保护它。

否则，您将遇到*数据竞争*，给出未定义的行为。

如果只有一个线程可以访问它，那么您不需要做任何特别的事情。

# ember.js - 如何在 Controller 中获取 View 的引用

> ID：12180821
> 
> 赞同：3
> 
> 时间：2012-08-29T14:56:01.380
> 
> 标签：ember.js

我正在使用 Ember 1.0pre 并遵循 Ember 建议的[应用程序结构](http://emberjs.com/guides/outlets/#toc_ember-application-structure)（使用路由器）。
对于表单验证，我想在按钮单击时调用**$('form').valid()方法。**所以我认为我有以下方法

```
validate: function(){
  return this.$('form').valid()
} 
```

模板文件中的操作：

```
<button type="submit" class="btn" {{action doSaveSettings this}}>Save Changes</button> 
```

并且**doSaveSettings**方法在 Controller 中。如何在控制器中获取视图实例，以调用验证方法？

**编辑：**
在控制器中， this.view 为空。我已将 {{debugger}} 放入模板中，这指的是 <App.XyzController:ember1062> 并且 this.view 为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:20:30.897

在 ember 0.9.8.1（我相信）中，默认的操作目标已从视图更改为路由器。要将目标设置为视图，您需要像这样覆盖它

```
 <button type="submit" class="btn" {{action doSaveSettings target="view"}}>Save Changes</button> 
```

编辑：您的控制器不应该知道视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T08:42:47.497

在 ember 中，视图的目的只是我重复只是为了处理事件或创建可重用的组件
我不建议这样做，因为总是有一个原因为什么视图不应该从控制器访问并且它很好地遵循它，但是如果您真的想使用它，您可以执行以下两种方式：
我不知道您使用的是 ember-cli 还是 ember，但逻辑是相同的。然而，答案是针对 ember-cli

```
//Inside appname/controller/your-conroller.js

import reqdView from 'appname/views/your-view';

//Lets assume u want to call a function called validate inside view
//Add this statement inside the controller to run the validate function

reqdView.prototype.validate();

OR

var reqdViewInst = new reqdView();
reqdViewInst.validate(); 
```

如果要验证视图，请在 didInsertElement 中进行验证

```
export default Ember.View.extend({
didInsertElement:function()
{
  this.validate(); 
},
validate:function()
{
//do your validation
}
}); 
```

或者

```
export default Ember.View.extend({
eventManager: Ember.Object.create({
    didInsertElement:function(event, view)
    {
      view.validate(); 
    }
  }),

    validate:function()
    {
    //do your validation
    }
    }); 
```

# python - scipy优化中的整数步长最小化

> ID：12180822
> 
> 赞同：22
> 
> 时间：2012-08-29T14:56:04.780
> 
> 标签：python, optimization, numpy, machine-learning, scipy

我有一个计算机视觉算法，我想使用[scipy.optimize.minimize](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.minimize.html)进行调整。现在我只想调整两个参数，但参数的数量最终可能会增加，所以我想使用一种可以进行高维梯度搜索的技术。SciPy 中的 Nelder-Mead 实现似乎很合适。

我把代码全部设置好了，但似乎最小化函数真的想使用步长小于一的浮点值。当前的参数集都是整数，一个有一个步长，另一个步长为 2（即该值必须是奇数，如果不是我要优化的东西，会将其转换为奇数）。大致一个参数是以像素为单位的窗口大小，另一个参数是阈值（0-255 的值）。

值得我使用来自 git repo 的全新 scipy 版本。有谁知道如何告诉 scipy 为每个参数使用特定的步长？有什么方法可以滚动我自己的渐变函数吗？有没有可以帮助我的 scipy 标志？我知道这可以通过简单的参数扫描来完成，但我最终希望将此代码应用于更大的参数集。

代码本身非常简单：

```
import numpy as np
from scipy.optimize import minimize
from ScannerUtil import straightenImg 
import bson

def doSingleIteration(parameters):
    # do some machine vision magic
    # return the difference between my value and the truth value

parameters = np.array([11,10])
res = minimize( doSingleIteration, parameters, method='Nelder-Mead',options={'xtol': 1e-2, 'disp': True,'ftol':1.0,}) #not sure if these params do anything
print "~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"
print res 
```

这就是我的输出的样子。正如你所看到的，我们重复了很多次运行，但在最小化过程中没有任何进展。

```
*+++++++++++++++++++++++++++++++++++++++++
[ 11\.  10.]  <-- Output from scipy minimize
{'block_size': 11, 'degree': 10} <-- input to my algorithm rounded and made int
+++++++++++++++++++++++++++++++++++++++++
120  <-- output of the function I am trying to minimize
+++++++++++++++++++++++++++++++++++++++++
[ 11.55  10\.  ]
{'block_size': 11, 'degree': 10}
+++++++++++++++++++++++++++++++++++++++++
120
+++++++++++++++++++++++++++++++++++++++++
[ 11\.   10.5]
{'block_size': 11, 'degree': 10}
+++++++++++++++++++++++++++++++++++++++++
120
+++++++++++++++++++++++++++++++++++++++++
[ 11.55   9.5 ]
{'block_size': 11, 'degree': 9}
+++++++++++++++++++++++++++++++++++++++++
120
+++++++++++++++++++++++++++++++++++++++++
[ 11.1375  10.25  ]
{'block_size': 11, 'degree': 10}
+++++++++++++++++++++++++++++++++++++++++
120
+++++++++++++++++++++++++++++++++++++++++
[ 11.275  10\.   ]
{'block_size': 11, 'degree': 10}
+++++++++++++++++++++++++++++++++++++++++
120
+++++++++++++++++++++++++++++++++++++++++
[ 11\.    10.25]
{'block_size': 11, 'degree': 10}
+++++++++++++++++++++++++++++++++++++++++
120
+++++++++++++++++++++++++++++++++++++++++
[ 11.275   9.75 ]
{'block_size': 11, 'degree': 9}
+++++++++++++++++++++++++++++++++++++++++
120
+++++++++++++++++++++++++++++++++++++++++
~~~
SNIP 
~~~
+++++++++++++++++++++++++++++++++++++++++
[ 11\.         10.0078125]
{'block_size': 11, 'degree': 10}
+++++++++++++++++++++++++++++++++++++++++
120
Optimization terminated successfully.
         Current function value: 120.000000
         Iterations: 7
         Function evaluations: 27
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  status: 0
    nfev: 27
 success: True
     fun: 120.0
       x: array([ 11.,  10.])
 message: 'Optimization terminated successfully.'
     nit: 7* 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T17:13:33.227

假设要最小化的函数是任意复杂的（非线性），这通常是一个非常困难的问题。除非您尝试所有可能的选项，否则无法保证最佳解决方案。我*不*知道是否有任何整数约束非线性优化器（有点怀疑），我假设您知道 Nelder-Mead 如果它是一个连续函数应该可以正常工作。

编辑：考虑到@Dougal 的评论，我将在此处添加：首先设置粗+细网格搜索，如果您想尝试 Nelder-Mead 是否有效（并且收敛速度更快），以下几点可能会有所帮助...

但也许有些点会有所帮助：

1.  考虑到整个整数约束非常困难，也许可以选择做一些简单的插值来帮助优化器。它仍应收敛到整数解。当然这需要计算额外的分数，但它可能会解决许多其他问题。（即使在线性整数规划中，它通常首先解决无约束系统 AFAIK）
2.  Nelder-Mead 从 N+1 点开始，这些在 scipy（至少是旧版本）中硬连线到`(1+0.05) * x0[j]`（对于`j`所有维度，除非`x0[j]`是 0），您将在第一个评估步骤中看到。也许这些可以在较新的版本中提供，否则您可以更改/复制 scipy 代码（它是纯 python）并将其设置为更合理的东西。或者，如果您觉得这更简单，请按比例缩小所有输入变量，使 (1+0.05)*x0 具有合理的大小。
3.  也许您应该缓存所有函数评估，因为如果您使用 Nelder-Mead，我猜您总是会遇到重复评估（至少在最后）。
4.  您必须检查 Nelder-Mead 缩小到单个值并放弃的可能性有多大，因为它总是找到相同的结果。
5.  您通常必须检查您的函数是否表现良好......如果函数在参数空间上没有平滑变化，那么这种优化注定要失败，即使这样，如果您应该拥有这些，它也很容易陷入局部最小值。（因为您缓存了所有评估 - 请参阅 2。 - 您至少可以绘制这些并查看错误情况，而无需进行任何额外的评估）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-09T23:52:23.657

不幸的是，Scipy 的内置优化工具不容易做到这一点。但永远不要害怕；听起来你有一个凸问题，所以你应该能够找到一个唯一的最优值，即使它在数学上并不漂亮。

我针对不同问题实现的两个选项是创建自定义梯度下降算法，以及对一系列单变量问题使用二分法。如果您在调整中进行交叉验证，那么您的损失函数很遗憾不会平滑（因为来自不同数据集的交叉验证的噪声），但通常会是凸的。

要以数值方式实现梯度下降（没有用于评估梯度的分析方法），请选择一个测试点和一个`delta`在所有维度上都远离测试点的第二个点。在这两点评估损失函数可以让您以数值方式计算局部次梯度。重要的是`delta`要足够大，使其超出由交叉验证噪声产生的局部最小值。

一个较慢但可能更强大的替代方法是对您正在测试的每个参数实施二等分。如果您知道两个参数（或*n 个*参数）的联合凸问题，您可以将其分解为*n 个*单变量优化问题，并编写一个二分算法递归地磨练最佳参数。这可以帮助处理某些类型的准凸性（例如，如果您的损失函数对其域的一部分采用背景噪声值，并且在另一个区域中是凸的），但需要对初始迭代的边界进行很好的猜测。

如果您只是将请求的`x`值捕捉到整数网格而不固定`xtol`映射到该网格大小，您可能会让求解器请求网格单元内的两个点，接收相同的输出值，并得出结论它是最小值。

不幸的是，没有简单的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T16:21:01.743

将浮点数 x、y（又名 winsize、阈值）捕捉到函数*内*的整数网格，如下所示：

```
def func( x, y ):
    x = round( x )
    y = round( (y - 1) / 2 ) * 2 + 1  # 1 3 5 ...
    ... 
```

然后 Nelder-Mead 将仅在网格上看到函数值，并且应该为您提供接近整数的 x、y。

（如果您想在某个地方发布您的代码，我正在寻找重启的 Nelder-Mead 的测试用例。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-27T21:55:56.583

Nelder-Mead 最小化方法现在允许您指定初始单纯形顶点，因此您应该能够将单纯形点设置为相距很远，然后单纯形将翻转并找到最小值并在单纯形大小降至 1 以下时收敛。

[https://docs.scipy.org/doc/scipy/reference/optimize.minimize-neldermead.html#optimize-minimize-neldermead](https://docs.scipy.org/doc/scipy/reference/optimize.minimize-neldermead.html#optimize-minimize-neldermead)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-28T19:51:11.023

问题是该算法在试图缩小其 (N+1) 单纯形时陷入困境。我强烈建议任何刚接触这个概念的人了解更多关于[单纯形](https://en.wikipedia.org/wiki/Simplex)的地理形状并弄清楚输入参数如何与单纯形上的点相关联。一旦你掌握了这一点，那么正如 IP Freeley 建议的那样，可以通过为你的单纯形定义强大的初始点来解决这个问题，请注意，这与定义你的 x0 不同，并进入[nelder-mead 的专用选项](https://docs.scipy.org/doc/scipy/reference/optimize.minimize-neldermead.html)。这是一个更高--4-维问题的示例。另请注意，在本例 5 和您的情况 3 中，初始单纯形必须具有 N+1 个点。

```
init_simplex = np.array([[1, .1, .3, .3], [.1, 1, .3, .3], [.1, .1, 5, .3],
                         [.1, .1, .3, 5], [1, 1, 5, 5]])
minimum = minimize(Optimize.simplex_objective, x0=np.array([.01, .01, .01, .01]),
                   method='Nelder-Mead',
                   options={'adaptive': True, 'xatol': 0.1, 'fatol': .00001,
                            'initial_simplex': init_simplex}) 
```

在本例中，x0 被 initial_simplex 的定义忽略。高维问题中其他有用的选项是“自适应”选项，它在尝试设置模型操作系数时考虑参数的数量（即分别用于反射、膨胀、收缩和收缩的 α、γ、ρ 和 σ） . 如果您还没有，我还建议您熟悉[算法](https://en.wikipedia.org/wiki/Nelder%E2%80%93Mead_method#One_possible_variation_of_the_NM_algorithm)的步骤。

现在，这个问题发生的原因是因为该方法在扩展中没有得到好的结果，所以它不断地缩小单纯形，试图找出可能存在或不存在的更好的解决方案。

# javascript - 保留页面状态

> ID：12180823
> 
> 赞同：2
> 
> 时间：2012-08-29T14:56:05.247
> 
> 标签：javascript

我的页面有几个部分，其中一些可以在一些 js 事件上更改，例如滑块、分页、过滤器。我需要存储这些数据，以便当用户使用浏览器历史记录（后退和前进按钮）向后和向前导航时，状态会被保留。换句话说，当用户点击离开时，用户应该会看到与离开页面相同的状态。

由于有几个部分由 js 事件驱动，我不想使用 html5 历史功能，因为 url 会变得太乱，并且在与他人共享页面时不会添加任何有效信息。

因此，简单来说，我想在不更改 url 的情况下恢复或保持页面状态。有没有明确的方法来实现这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T14:57:52.250

您可以使用[localStorage](https://developer.mozilla.org/en-US/docs/DOM/Storage)来存储下次可以读取的属性。

写 ：

```
localStorage['key'] = 'value'; 
```

读 ：

```
var val = localStorage['key']; 
```

使用默认值读取（例如，对于第一个连接）：

```
var val = localStorage['key'] || 'default value'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:00:44.637

您可以将这些值保存在本地存储/会话存储中。您还可以 AJAX 将数据发布到服务器，并在前进/后退时重建此数据。

# c# - 如何选择节点

> ID：12180828
> 
> 赞同：0
> 
> 时间：2012-08-29T14:56:15.557
> 
> 标签：c#, xml, xml-parsing, alfresco

我有以下 xml：

```
<?xml version="1.0" encoding="UTF-8"?>
><feed xmlns="http://www.w3.org/2005/Atom" xmlns:app="http://www.w3.org/2007/app" xmlns:cmisra="http://docs.oasis-open.org/ns/cmis/restatom/200908/" xmlns:cmis="http://docs.oasis-open.org/ns/cmis/core/200908/" xmlns:alf="http://www.alfresco.org" xmlns:opensearch="http://a9.com/-/spec/opensearch/1.1/">
<author><name>Me</name></author>
<generator version="3.4.7 (572)">Alfresco (Enterprise)</generator>
<icon>http://xxxxx/alfresco/images/logo/AlfrescoLogo16.ico</icon>
<id>urn:uuid:0d9b7b51-a696-4d79-85ed-9c3511e0b812-children</id>
<link rel="service" href="http://xxxxx/alfresco/service/cmis"/>
<link rel="self" href="http://xxxxx/alfresco/service/cmis/s/workspace:SpacesStore/i/0d9b7b51-a696-4d79-85ed-9c3511e0b812/children"/>
<link rel="via" href="http://xxxxx/alfresco/service/cmis/s/workspace:SpacesStore/i/0d9b7b51-a696-4d79-85ed-9c3511e0b812"/>
<link rel="up" href="http://xxxxx/alfresco/service/cmis/s/workspace:SpacesStore/i/4d4117c4-beaf-4065-9a45-749928506507/children" type="application/atom+xml;type=feed"/>
<link rel="down" href="http://xxxxx/alfresco/service/cmis/s/workspace:SpacesStore/i/0d9b7b51-a696-4d79-85ed-9c3511e0b812/descendants" type="application/cmistree+xml"/>
<link rel="http://docs.oasis-open.org/ns/cmis/link/200908/foldertree" href="http://xxxxx/alfresco/service/cmis/s/workspace:SpacesStore/i/0d9b7b51-a696-4d79-85ed-9c3511e0b812/tree" type="application/atom+xml;type=feed"/>
<link rel="first" href="http://xxxxx/alfresco/service/cmis/s/workspace:SpacesStore/i/0d9b7b51-a696-4d79-85ed-9c3511e0b812/children?pageNo=1&amp;pageSize=-1&amp;guest=&amp;format=atomfeed" type="application/atom+xml;type=feed"/>
<link rel="last" href="http://xxxxx/alfresco/service/cmis/s/workspace:SpacesStore/i/0d9b7b51-a696-4d79-85ed-9c3511e0b812/children?pageNo=1&amp;pageSize=-1&amp;guest=&amp;format=atomfeed" type="application/atom+xml;type=feed"/>
<title>Directory</title>
<updated>2012-08-03T08:55:10.413+02:00</updated>
<opensearch:totalResults>3</opensearch:totalResults>
<opensearch:startIndex>0</opensearch:startIndex>
<opensearch:itemsPerPage>-1</opensearch:itemsPerPage>
<cmisra:numItems>3</cmisra:numItems>
<entry>
<author><name>Me</name></author>
<content type="application/vnd.openxmlformats-officedocument.wordprocessingml.document" src="http://xxxxx/alfresco/service/cmis/s/workspace:SpacesStore/i/a8df77ad-7542-4380-819e-97bcb652c39a/content.docx"/><id>urn:uuid:a8df77ad-7542-4380-819e-97bcb652c39a</id>
<link rel="self" href="http://xxxxx/alfresco/service/cmis/s/workspace:SpacesStore/i/a8df77ad-7542-4380-819e-97bcb652c39a"/>
<link rel="enclosure" href="http://xxxxx/alfresco/service/cmis/s/workspace:SpacesStore/i/a8df77ad-7542-4380-819e-97bcb652c39a/content.docx" type="application/vnd.openxmlformats-officedocument.wordprocessingml.document"/>
<link rel="edit" href="http://xxxxx/alfresco/service/cmis/s/workspace:SpacesStore/i/a8df77ad-7542-4380-819e-97bcb652c39a"/>
<link rel="edit-media" href="http://xxxxx/alfresco/service/cmis/s/workspace:SpacesStore/i/a8df77ad-7542-4380-819e-97bcb652c39a/content.docx" type="application/vnd.openxmlformats-officedocument.wordprocessingml.document"/>
<link rel="http://docs.oasis-open.org/ns/cmis/link/200908/allowableactions" href="http://xxxxx/alfresco/service/cmis/s/workspace:SpacesStore/i/a8df77ad-7542-4380-819e-97bcb652c39a/allowableactions"/>
<link rel="http://docs.oasis-open.org/ns/cmis/link/200908/relationships" href="http://xxxxx/alfresco/service/cmis/s/workspace:SpacesStore/i/a8df77ad-7542-4380-819e-97bcb652c39a/rels"/>
<link rel="http://docs.oasis-open.org/ns/cmis/link/200908/policies" href="http://xxxxx/alfresco/service/cmis/s/workspace:SpacesStore/i/a8df77ad-7542-4380-819e-97bcb652c39a/pols"/>
<link rel="http://docs.oasis-open.org/ns/cmis/link/200908/acl" href="http://xxxxx/alfresco/service/cmis/s/workspace:SpacesStore/i/a8df77ad-7542-4380-819e-97bcb652c39a/acl"/>
<link rel="up" href="http://xxxxx/alfresco/service/cmis/s/workspace:SpacesStore/i/a8df77ad-7542-4380-819e-97bcb652c39a/parents" type="application/atom+xml;type=feed"/>
<link rel="version-history" href="http://xxxxx/alfresco/service/cmis/s/workspace:SpacesStore/i/a8df77ad-7542-4380-819e-97bcb652c39a/versions"/>
<link rel="current-version" href="http://xxxxx/alfresco/service/cmis/s/workspace:SpacesStore/i/a8df77ad-7542-4380-819e-97bcb652c39a?returnVersion=latest"/>
<link rel="describedby" href="http://xxxxx/alfresco/service/cmis/type/cmis:document"/>
<link rel="service" href="http://xxxxx/alfresco/service/cmis"/>
<published>2011-09-27T16:24:09.302+02:00</published>
<summary>Test.docx</summary>
<title>Test.docx</title>
<updated>2011-09-27T16:24:14.864+02:00</updated>
<app:edited>2011-09-27T16:24:14.864+02:00</app:edited>
<alf:icon>http://xxxxx/alfresco/images/filetypes/docx.gif</alf:icon>
<cmisra:object>
<cmis:properties>
<cmis:propertyBoolean propertyDefinitionId="cmis:isLatestMajorVersion" displayName="Is Latest Major Version" queryName="cmis:isLatestMajorVersion"><cmis:value>false</cmis:value></cmis:propertyBoolean>
<cmis:propertyInteger propertyDefinitionId="cmis:contentStreamLength" displayName="Content Stream Length" queryName="cmis:contentStreamLength"><cmis:value>245939</cmis:value></cmis:propertyInteger>
<cmis:propertyId propertyDefinitionId="cmis:contentStreamId" displayName="Content Stream Id" queryName="cmis:contentStreamId"><cmis:value>store://2011/9/27/16/24/d18d00be-6abd-4b20-9ef0-88f336a62cf0.bin</cmis:value></cmis:propertyId>
<cmis:propertyString propertyDefinitionId="cmis:versionSeriesCheckedOutBy" displayName="Version Series Checked Out By" queryName="cmis:versionSeriesCheckedOutBy"/>
<cmis:propertyId propertyDefinitionId="cmis:objectTypeId" displayName="Object Type Id" queryName="cmis:objectTypeId"><cmis:value>cmis:document</cmis:value></cmis:propertyId>
<cmis:propertyId propertyDefinitionId="cmis:versionSeriesCheckedOutId" displayName="Version Series Checked Out Id" queryName="cmis:versionSeriesCheckedOutId"/>
<cmis:propertyString propertyDefinitionId="cmis:name" displayName="Name" queryName="cmis:name"><cmis:value>Test.docx</cmis:value></cmis:propertyString>
<cmis:propertyString propertyDefinitionId="cmis:contentStreamMimeType" displayName="Content Stream MIME Type" queryName="cmis:contentStreamMimeType"><cmis:value>application/vnd.openxmlformats-officedocument.wordprocessingml.document</cmis:value></cmis:propertyString>
<cmis:propertyId propertyDefinitionId="cmis:versionSeriesId" displayName="Version series id" queryName="cmis:versionSeriesId"><cmis:value>workspace://SpacesStore/a8df77ad-7542-4380-819e-97bcb652c39a</cmis:value></cmis:propertyId>
<cmis:propertyDateTime propertyDefinitionId="cmis:creationDate" displayName="Creation Date" queryName="cmis:creationDate"><cmis:value>2011-09-27T16:24:09.302+02:00</cmis:value></cmis:propertyDateTime>
<cmis:propertyString propertyDefinitionId="cmis:changeToken" displayName="Change token" queryName="cmis:changeToken"/>
<cmis:propertyString propertyDefinitionId="cmis:versionLabel" displayName="Version Label" queryName="cmis:versionLabel"><cmis:value>1.2</cmis:value></cmis:propertyString>
<cmis:propertyBoolean propertyDefinitionId="cmis:isLatestVersion" displayName="Is Latest Version" queryName="cmis:isLatestVersion"><cmis:value>true</cmis:value></cmis:propertyBoolean>
<cmis:propertyBoolean propertyDefinitionId="cmis:isVersionSeriesCheckedOut" displayName="Is Version Series Checked Out" queryName="cmis:isVersionSeriesCheckedOut"><cmis:value>false</cmis:value></cmis:propertyBoolean>
<cmis:propertyString propertyDefinitionId="cmis:lastModifiedBy" displayName="Last Modified By" queryName="cmis:lastModifiedBy"><cmis:value>Me</cmis:value></cmis:propertyString>
<cmis:propertyString propertyDefinitionId="cmis:createdBy" displayName="Created by" queryName="cmis:createdBy"><cmis:value>Me</cmis:value></cmis:propertyString>
<cmis:propertyString propertyDefinitionId="cmis:checkinComment" displayName="Checkin Comment" queryName="cmis:checkinComment"/>
<cmis:propertyId propertyDefinitionId="cmis:objectId" displayName="Object Id" queryName="cmis:objectId"><cmis:value>workspace://SpacesStore/a8df77ad-7542-4380-819e-97bcb652c39a</cmis:value></cmis:propertyId>
<cmis:propertyBoolean propertyDefinitionId="cmis:isImmutable" displayName="Is Immutable" queryName="cmis:isImmutable"><cmis:value>false</cmis:value></cmis:propertyBoolean>
<cmis:propertyBoolean propertyDefinitionId="cmis:isMajorVersion" displayName="Is Major Version" queryName="cmis:isMajorVersion"><cmis:value>false</cmis:value></cmis:propertyBoolean>
<cmis:propertyId propertyDefinitionId="cmis:baseTypeId" displayName="Base Type Id" queryName="cmis:baseTypeId"><cmis:value>cmis:document</cmis:value></cmis:propertyId>
<cmis:propertyString propertyDefinitionId="cmis:contentStreamFileName" displayName="Content Stream Filename" queryName="cmis:contentStreamFileName"><cmis:value>Test.docx</cmis:value></cmis:propertyString>
<cmis:propertyDateTime propertyDefinitionId="cmis:lastModificationDate" displayName="Last Modified Date" queryName="cmis:lastModificationDate"><cmis:value>2011-09-27T16:24:14.864+02:00</cmis:value></cmis:propertyDateTime>
<alf:aspects>
<alf:appliedAspects>P:rn:renditioned</alf:appliedAspects>
<alf:appliedAspects>P:cm:author</alf:appliedAspects>
<alf:properties>
<cmis:propertyString propertyDefinitionId="cm:author" displayName="Auteur" queryName="cm:author"><cmis:value>Me</cmis:value></cmis:propertyString>
</alf:properties>
</alf:aspects>
</cmis:properties>
</cmisra:object>
<cmisra:pathSegment>Test.docx</cmisra:pathSegment>
</entry>
</feed> 
```

我正在尝试选择“入口”节点，但我无法让它工作。

```
 XmlDocument rssDoc = new XmlDocument();            
    XmlNamespaceManager manager = new XmlNamespaceManager(rssDoc.NameTable);
    manager.AddNamespace("atom", "http://www.w3.org/2005/Atom");
    manager.AddNamespace("app", "http://www.w3.org/2007/app");
    manager.AddNamespace("cmisra", "http://docs.oasis-open.org/ns/cmis/restatom/200908/");
    manager.AddNamespace("cmis", "http://docs.oasis-open.org/ns/cmis/core/200908/");
    manager.AddNamespace("alf", "http://www.alfresco.org");
    manager.AddNamespace("opensearch", "http://a9.com/-/spec/opensearch/1.1/");
    rssDoc.Load(rssStream);

    XmlNodeList rssItems = rssDoc.SelectNodes("//atom:entry", manager); 
```

怎么了 ？我尝试了不同的 xpath，但没有任何效果。我从一个 Alfresco 网络服务的电话中得到了 rss。我编辑了原来更长的xml。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:30:47.720

您最好使用 CMIS 客户端库，而不是尝试自己手动解析 AtomPub XML。Apache Chemistry 有一个名为[DotCMIS](https://chemistry.apache.org/dotnet/dotcmis.html "点CMIS")的可用 C# 客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:52:01.077

谢谢你们每一个人的帮助 ！

答案是我很愚蠢，因为我没有调用正确的 web 服务，因此我没有得到我发布的所有 xml（我是手动得到的）。一旦纠正它就像一个魅力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T18:16:40.173

尝试

```
//*[local-name()='entry'] 
```

这将选择与名称“条目”匹配的所有元素，而不考虑名称空间。

# php - 在 javascript 文件之外声明变量并在文件中使用它

> ID：12180830
> 
> 赞同：-1
> 
> 时间：2012-08-29T14:56:19.040
> 
> 标签：php, javascript, wordpress, declare

所以我在 .php 文件中声明一个变量

```
<script type="text/javascript" src="<?php bloginfo('template_directory'); ?>/script/jscript_pages.js">
        var templatePath = "<?php bloginfo('template_directory'); ?>";
    </script> 
```

但是我想在 jscript_pages.js 中使用变量 templatePath 但是当我这样做时，我的控制台会说： Uncaught ReferenceError ...

我希望有人能帮帮忙 ：）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T14:57:34.623

如果浏览器不支持`src`，脚本元素的内容是可以使用的替代内容，它不是在运行外部脚本之前运行的脚本。

使用两个脚本元素。

```
<script>
    var templatePath = "<?php bloginfo('template_directory'); ?>";
</script>
<script src="<?php bloginfo('template_directory'); ?>/script/jscript_pages.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:58:15.227

在脚本中引用它之前设置变量。

```
<script>
    var templatePath = "<?php bloginfo('template_directory'); ?>";
</script>
<script type="text/javascript" src="<?php bloginfo('template_directory'); ?>/script/jscript_pages.js">
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T15:00:05.433

正如@Quentin 所说，它要么/要么在单个标签中。

从概念上讲，您可以通过两个脚本标签来做您正在寻找的事情

```
<script type='text/javascript'>      
            var templatePath = "<?php bloginfo('template_directory'); ?>";
        </script>
    <script type="text/javascript" src="<?php bloginfo('template_directory'); ?>/script/jscript_pages.js"></script> 
```

但是，在实践中，通常更好的（对于测试、可移植性等）是让您的脚本文件只定义函数，然后让您的页面脚本（如果有的话）调用这些函数并应用变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T14:58:38.537

在此设置中，您的函数`bloginfo('template_directory');`应返回一个 $GLOBALS 变量。

# scala - 尝试使用 JSON 参数定义 Scalatra 网络服务

> ID：12180832
> 
> 赞同：0
> 
> 时间：2012-08-29T14:56:21.630
> 
> 标签：scala, rest, scalatra, specs2

我正在尝试使用Scalatra定义一个Web服务，其中参数在正文中传递，最好是JSON，而不是像我现在拥有的那样在url上包含所有内容。

所以，我希望这个测试通过，但是注释掉的代码是当前通过的。未注释的代码不是 JSON，但我也不确定如何通过 JSON 进行测试，因为`put`第二个参数中需要 Iterable。

```
class WebAppSpec extends MutableScalatraSpec {
  addServlet(classOf[WebApp], "/*")
  "PUT /phaseupdate" should {
    "return status 200" in {
      //put("/phaseupdate/test1/address1/starting/10") {
      put("/phaseupdate", Map("filename" -> "test1", "entryaddress" -> "address1","name" -> "starting","percentcomplete" -> "10")) {
        status must_== 200
      }
    }
} 
```

我目前的错误定义是：

```
put("/phaseupdate/:filename/:entryaddress/:name/:percentcomplete") {
    val filename = params("filename")
    val entryaddress = params("entryaddress")
    val name = params("name")
    val percentcomplete = params("percentcomplete") 
```

那么如何定义我的`put`服务来调用它`PUT /phaseupdate`并在正文中包含参数？

基本上，我试图限制进入网络服务器访问日志的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:46:54.220

解决方案是这样做：

```
put("/phaseupdate") {
    val filename = if (params("filename").indexOf('.') > -1) params("filename").substring(0, params("filename").indexOf('.')) else params("filename")
    val entryaddress = params("entryaddress")
    val name = params("name")
    val percentcomplete = params("percentcomplete") 
```

基本上，`params()`可以读取通过的内容。

specs2 测试是，如果这之后是 get 它返回正确的信息。

```
 "PUT /phaseupdate" should {
    "return status 200" in {
      put("/phaseupdate", Map("filename" -> "test1", "entryaddress" -> "address1", "name" -> "starting", "percentcomplete" -> "10")) {
        status must_== 200
      }
    }
  } 
```

# java - Oracle 调用另一台机器上的 Java 方法

> ID：12180833
> 
> 赞同：0
> 
> 时间：2012-08-29T14:56:25.993
> 
> 标签：java, oracle, plsql, interop, java-stored-procedures

根据架构师的要求，我不允许将 java 类编译到我们正在运行的 Oracle 实例中，因此我正在寻找替代方案。要求是利用位于网络上的应用程序服务器上的 java 库。是否可以从 PL/SQL 调用位于另一台机器上的 java 方法？我发现[这篇文章](http://docs.oracle.com/cd/B28359_01/appdev.111/b28424/adfns_externproc.htm#i1019726)谈论的是 Oracle 中的外部过程，但我不确定它是否允许这样做。另一方面，性能还必须足够快，才能用于批处理数千或数百万个调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:58:32.857

我怀疑您能做的最好的事情是将条目添加到您的 Java 进程轮询以获取每条或一批消息的另一个表中。Oracle 并不是真正为消息处理而设计的。

无论如何，我会和你的建筑师讨论这个问题，因为他是专家。;)

如果您的 Oracle 系统无法完成这项工作，您可能需要一个不使用 Oracle 的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T17:09:33.770

你有三个选择：

1.) 我们通过使用 UTL_HTTP 让 PL/SQL 调用 HTTP，然后让 app-server 调用 java 过程来解决类似的问题。我们这样做是为了将我们的 Oracle 数据库与 Oracle Reports 连接起来。PL/SQL 触发了一个 HTTP 请求，该请求由调用 Java 的应用服务器接收。Java 可以通过普通的 JDBC 回调 PL/SQL。

2.）您可能无法加载该 java proc，但也许您可以创建一些其他 java 存储过程，可以使用 RMI 调用它。

3.) AQ 是另一种方法。基本上，您可以使用 AQ 对消息进行排队，并在应用服务器上使用 JMS 将其出列并使用它。

选项 3 将是最快的，尽管我们已经尝试了选项 1，但它的延迟并没有你想象的那么多。它还提供了一种通过并行运行多个请求来进行一些并行处理的方法。

# javascript - 测试我的 OCX 时来自 IE 的警告

> ID：12180836
> 
> 赞同：1
> 
> 时间：2012-08-29T14:56:30.990
> 
> 标签：javascript, internet-explorer, activex

我的本地 PC 上有一个签名的 OCX。当脚本加载它时，IE 会输出一个警告框：“此页面上的 ActiveX 控件可能不安全，无法与页面的其他部分进行交互。你想允许这种交互吗？”

有没有办法消除这个警告？10xs，尼尔

# c# - Azure 会员帐户访问问题

> ID：12180839
> 
> 赞同：1
> 
> 时间：2012-08-29T14:56:36.757
> 
> 标签：c#, azure

我在 WindowsAzure 暂存环境中部署了我的 MVC 应用程序。我使用通用提供商作为会员资格。但我有点困惑。

我的困惑是，当我尝试访问云中的这些帐户时，我在部署后现在在本地机器上创建了一些帐户，我收到错误消息，用户名或密码不正确，但是如果我从本地机器访问这些帐户，则没有错误信息。我没有更改连接字符串。谁能解释一下这个概念或给我一些参考链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:23:48.120

当您询问有关其工作原理的概念时，我可以解释一下。当您在 MVC 应用程序中使用 ASP.NET 通用提供程序时，必须有一个可以配置它的数据库。在大多数情况下，SQLExpress 是 Universal Providers 用来存储成员详细信息的本地数据库。

现在，当您将应用程序作为云服务部署到 Windows Azure 时，没有配置本地数据库，因此您对 Universal Providers 的默认配置将不起作用。解决此问题的最佳方法是将 MVC 应用程序通用提供程序配置为使用 SQL 数据库，即使您在本地进行测试也是如此。一旦完成本地测试并将应用程序部署到 Windows Azure，因为您的应用程序仍指向 SQL 数据库，它将毫无问题地工作（考虑到您已正确配置 SQL 数据库）。

这篇特别的[文章](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)展示了 MVC 应用程序中用于连接 SQLExpress 或 SQL 数据库的不同连接字符串，因此您可以使用它来修改您的 SQL DB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T18:55:15.607

您需要`<machineKey>`在`web.config`. 该密钥用于许多与会话和成员资格相关的事情（如 cookie 和密码）。如果您没有明确指定密钥，Windows Azure 会在每次部署时为您选择一个，这将使现有的身份验证 cookie 和存储的密码无效。

# google-app-engine - 用于简单项目报告 Web 应用程序的 JSP？

> ID：12180844
> 
> 赞同：0
> 
> 时间：2012-08-29T14:56:48.597
> 
> 标签：google-app-engine, jsp

我即将开始为国际项目中的任务开发一个简单的报告工具。简而言之：使用该工具创建一个项目，定义团队成员、任务和工作包。团队成员将被要求定期提交他们所做工作的报告（与任务和/或工作包相关）。这些报告将通过该工具进行存储和访问。

我将使用 Google App Engine（客户端要求）及其数据存储（使用 JDO）。但是我想请教前端部分的建议：对于非 Java 开发人员来说，JSP 看起来相当混乱……还有其他想法吗？？？

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:29:05.967

JSP 不需要比其他类似的 HTML 表示框架更混乱，它真正归结为实现。话虽如此，它是旧的 Java 技术，这意味着它没有保持最新状态，很难找到一个好的单一文档来源。

如果您不想使用 JSP，您可以使用其他框架，您只需要确保它们与 Google App Engine 兼容。

新出现的是 Play 框架，它是一个类似于 Ruby on Rails 的 Java MVC 框架。您可以在这里找到教程：http: [//viralpatel.net/blogs/first-play-framework-gae-siena-application-tutorial-example/](http://viralpatel.net/blogs/first-play-framework-gae-siena-application-tutorial-example/)

如果您打算使用 Spring，请查看以下问题： [Alternatives to JSP for Spring MVC view layer](https://stackoverflow.com/questions/2746598/alternatives-to-jsp-for-spring-mvc-view-layer)

对于前端开发人员来说，如果代码分离正确，您将不必了解 Java，因为不应有任何 Java 与 HTML 混合。如果这是您唯一的担心，那么除非团队有其他技术方面的经验，否则我会选择 JSP 以保持简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:07:50.820

似乎目前它是java或python。但是，您可能想查看 Grails。GSP 可能看起来不那么“混乱”。我根据您对项目的描述建议 Grails，我怀疑以后会变得很简单。您最终可能会对 Grails 能够提供的约束和灵活性的混合感到高兴。

# sql - TSQL - 根据一个字段将行分成组

> ID：12180854
> 
> 赞同：3
> 
> 时间：2012-08-29T14:57:15.243
> 
> 标签：sql, tsql, sql-server-2005

这是我之前的问题的修改版本：[TSQL 将结果集平均划分为组并更新它们](https://stackoverflow.com/questions/12059119/tsql-equally-divide-resultset-to-groups-and-update-them)

我的数据库有 2 个表，如下所示：

订单表有如下数据：

```
OrderID    OperatorID    GroupID        OrderDesc    Status    Cash    ...
--------------------------------------------------------------------------
      1             1          1      small_order         1     300 
      2             1          1    another_order         1       0 
      3             1          2      xxxxxxxxxxx         2    1000 
      5             2          2      yyyyyyyyyyy         2     150 
      9             5          1      xxxxxxxxxxx         1      50 
     10          NULL          2      xxxxxxxxxxx         1     150 
     11          NULL          3      xxxxxxxxxxx         1     -50 
     12             4          1      xxxxxxxxxxx         1     200 
```

运算符表：

```
OperatorID    Name    GroupID    Active
---------------------------------------
      1       John          1         1
      2       Kate          1         1
      4       Jack          2         1
      5       Will          1         0
      6        Sam          3         0 
```

我可以使用以下查询将我的记录集平等地划分为相同的组：

```
SELECT o.*, op.operatorName AS NewOperator, op.operatorID AS NewOperatorId
FROM (SELECT o.*, (ROW_NUMBER() over (ORDER BY newid()) % numoperators) + 1 AS randseqnum
      FROM Orders o CROSS JOIN
     (SELECT COUNT(*) AS numoperators FROM operators WHERE operators.active=1) op
      WHERE o.status in (1,3)
     ) o JOIN
     (SELECT op.*, ROW_NUMBER() over (ORDER BY newid()) AS seqnum
      FROM Operators op WHERE op.active=1
     ) op
     ON o.randseqnum = op.seqnum ORDER BY o.orderID 
```

演示可在：[http ://sqlfiddle.com/#!3/ff47b/1](http://sqlfiddle.com/#!3/ff47b/1)

使用上面的脚本，我可以将订单划分为（几乎）相等的组，但基于操作员的数量或订单，但我需要对其进行修改，以便它将基于总和或订单的操作员分配给`Cash`订单。

例如：

如果我有 6 个订单的`Cash`值：300、0、50、150、-50、200，它们的总和为 650。
我的脚本应该随机分配给 3 个操作员 2 个订单，其中订单的随机总和`Cash`。
我想要得到的是将例如 300,-50 分配给 operator1，将 200, 0 分配给第二个，将 150, 50 分配给第三个。
希望这听起来很清楚:)

这是我希望得到的示例输出：

```
ORDERID  OPERATORID  GROUPID    DESCRIPTION  STATUS  CASH  NEWOPERATORID
------------------------------------------------------------------------
      1           1        1    small_order       1   300              2
      2           1        1  another_order       1     0              1
      9           5        1    xxxxxxxxxxx       1    50              4
     10      (null)        2    xxxxxxxxxxx       1   150              4
     11      (null)        3    xxxxxxxxxxx       1   -50              2
     12           4        1    xxxxxxxxxxx       1   200              1 
```

**我如何（如果可以的话）将操作员分配给我的订单，以便总和`Cash`最接近平均值**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:27:50.360

如果我理解这一点，您能否通过将 Cash 列按最大排序、然后最小排序、然后是下一个最大排序、然后是下一个最小排序等等来获得您想要的结果。像这样：

```
ROW_NUMBER() over (order by CASE WHEN CashOrder % 2 = 1 then Cash else -Cash END) as splitCash 
```

您在查询中提供 CashOrder 较低的位置

```
ROW_NUMBER() over (ORDER by CASH) as CashOrder 
```

然后根据这个拆分值指定每个运算符，即（对于三个运算符）：

```
splitCash%3 +1 
```

# php - CSplit 不分裂

> ID：12180859
> 
> 赞同：0
> 
> 时间：2012-08-29T14:57:32.593
> 
> 标签：php, linux, csv

我正在尝试运行读取 CSV 的复杂导入任务。此导入工作正常，除非服务器用完可用内存来完成任务。我正在尝试将文件拆分为 1000 行的块，以允许服务器然后一一处理这些“咬大小”部分。但是，我的 CSplit 不会拆分文件。我的语法是否正确。

我检查了目录是否正确，命令的路径是否正确，文件在那里但没有运气。

提前致谢。

```
function processSplit() {
      chdir('Files');
      $dir = '*';

      foreach (glob($dir) as $file) {
           system(CSPLIT_PATH . " -k -n 4 -f ' " . $file . " ' 1000 '{1000}'");

      }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:22:09.407

命令行不正确。你有：

`system(CSPLIT_PATH . " -k -n 4 -f ' " . $file . " ' 1000 '{1000}'");`

应该：

`system(CSPLIT_PATH . " $file -k -n 4 -f ' " . $file . " ' 1000 '{1000}'");`

此外，我会更改`-f ' " . $file . " '`，因为您正在输出文件的前后创建一个空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:24:36.240

解决了。Grzegorz 感谢您的帮助，但问题在于传递的文件的结构以及使用此函数时文件不能包含任何空格的事实。使用`preg replace`将所有空白更改为`_`解决问题。

# intellisense - Intellisense 在 SQL Server Management Studio 中不起作用。可能是什么原因？

> ID：12180862
> 
> 赞同：3
> 
> 时间：2012-08-29T14:57:39.753
> 
> 标签：intellisense, ssms, sqlclient

过去 1 个月我一直在研究 SSMS 2008，我启用了智能感知

![在此处输入图像描述](../Images/d8e0d924f534688feca5deaa6fc29733.png)

不知道为什么，但它只是不起作用。可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-06-18T06:30:28.267

在非 dbmanager 帐户上使用**Azure SQL DB时，在****SSMS 版本 17.9 和 18.0 和 18.1**中，我们遇到了 Intellisense 无法正常工作的相同问题。

 **@sundar 的建议会有所帮助，即使它报告了错误

```
Msg 40508, Level 16, State 1, Line 1
USE statement is not supported to switch between databases. Use a new connection to connect to a different database. 
```**

# php - Doctrine2 和 Symfony2 的级联持续问题

> ID：12180864
> 
> 赞同：3
> 
> 时间：2012-08-29T14:57:44.480
> 
> 标签：php, symfony, doctrine-orm

我正在为我的应用程序使用 Symfony2，并且正在使用两个实体管理器；一个用于读取，另一个用于写入。

我正在创建这样的实体管理器对象：

```
$em = $this->getDoctrine()->getEntityManager('write');
$em = $this->getDoctrine()->getEntityManager('read'); 
```

最初它工作正常，但现在出现以下错误：

> 通过关系 ' `AppBundle\Entity\ProfileViewer#viewer`' 找到一个新实体，该实体未配置为对实体进行级联持久化操作: `shamsi`。显式持久化新实体或在关系上配置级联持久化操作。

这是我的 ProfileViewer 实体：

```
/**
 * AppBundle\Entity\ProfileViewer
 *
 * @ORM\Table(name="profile_viewer")
 * @ORM\Entity
 */
class ProfileViewer
{
/**
 * @var bigint $id
 *
 * @ORM\Column(name="id", type="bigint", nullable=false)
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="IDENTITY")
 */
private $id;

/**
 * @var bigint $userId
 *
 * @ORM\Column(name="user_id", type="bigint", nullable=false)
 */
private $userId;

/**
 * @var datetime $viewedAt
 *
 * @ORM\Column(name="viewed_at", type="datetime", nullable=true)
 */
private $viewedAt;

 /**
 * @ORM\ManyToOne(targetEntity="user", inversedBy="viewers")
 * @ORM\JoinColumn(name="viewer_id", referencedColumnName="id")
 */
private $viewer;

public function __construct()
{
    $this->viewedAt = new \DateTime();      
}
 /**
 * Get id
 *
 * @return bigint 
 */
public function getId()
{
    return $this->id;
}

/**
 * Set userId
 *
 * @param bigint $userId
 */
public function setUserId($userId)
{
    $this->userId = $userId;
}

/**
 * Get UserId
 *
 * @return bigint 
 */
public function getUserId()
{ 
    return $this->userId;
}

/**
 * Set viewedAt
 *
 * @param datetime $viewedAt
 */
public function setViewedAt($viewedAt)
{
    $this->viewedAt = $viewedAt;
}

/**
 * Get viewedAt
 *
 * @return datetime 
 */
public function getViewedAt()
{
    return $this->viewedAt;
}

/**
 * Set viewer
 *
 * @param AppBundle\Entity\User $viewer
 */
public function setViewer(AppBundle\Entity\User $viewer)
{
    $this->viewer = $viewer;
}

/**
 * Get viewer
 *
 * @return AppBundle\Entity\User
 */
public function getViewer()
{
    return $this->viewer;
}

} 
```

当我创建了两个实体管理器时会出现此错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T15:03:25.920

默认情况下，Doctrine2 中**没有级联操作。**

您可以添加`cascade={"persist"}`到您的关联：

```
 /**
 * @ORM\ManyToOne(targetEntity="user", inversedBy="viewers", cascade={"persist"})
 * @ORM\JoinColumn(name="viewer_id", referencedColumnName="id")
 */ 
```

您可以阅读[本文](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/working-with-associations.html#transitive-persistence-cascade-operations)以了解学说中关联的级联操作。强调这一点很重要：

> 级联操作**在内存**中执行。这意味着集合和相关实体被提取到内存中，即使在即将执行级联操作时它们仍被标记为惰性。然而，这种方法允许为这些操作中的每一个执行实体生命周期事件。
> 
> 但是，在级联时将对象图拉入内存会导致 **相当大的性能开销**，尤其是在级联集合很大时。确保权衡您定义**的每个级联操作的优点和缺点。**

# iphone - CATransition 动画键总是“过渡”

> ID：12180866
> 
> 赞同：0
> 
> 时间：2012-08-29T14:57:48.050
> 
> 标签：iphone, ios, core-animation, calayer, quartz-graphics

有一个基本的CATranisition。作品。

```
 animationKey = @"fadeIn";

        [self.icon setImage:self.iconSelected];
        [self.shadow setAlpha:1.0];
        CATransition *transitionIn = [CATransition animation];
        transitionIn.removedOnCompletion = NO;
        transitionIn.delegate = self;
        transitionIn.duration = 1.2;
        transitionIn.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
        transitionIn.type = kCATransitionFade;

        [self.icon.layer addAnimation:transitionIn forKey:animationKey];
        [self.shadow.layer addAnimation:transitionIn forKey:animationKey];
        [CATransaction commit]; 
```

这是问题所在：

```
 [self.icon.layer animationForKey:animationKey] 
```

总是返回 NULL。

当我做：

```
 [self.icon.layer animationKeys] 
```

我得到：

```
 icon keys: (
transition
         ) 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T16:37:04.253

[CALayer 参考](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html)说“特殊键 kCATransition 自动用于过渡动画。”

# sql-server - 清除约束的存储过程

> ID：12180870
> 
> 赞同：2
> 
> 时间：2012-08-29T14:58:10.453
> 
> 标签：sql-server, sql-server-2008-r2

我正在尝试创建一个存储过程来清除表中的约束。

我在检查是空还是空时遇到了一些麻烦，还要检查表是否存在是否有比嵌套 if 更优雅的方法来检查表是否存在并且参数不为空或空？

这适用于 SQL Server 2008 R2。

```
ALTER PROCEDURE [dbo].[sp_quitarConstrain](@table NVARCHAR(50))
AS
DECLARE @database NVARCHAR(50)
DECLARE @sql NVARCHAR(255)
SET @database = 'table'

IF((COALESCE(@table,'') <> '') OR (@table IS NULL))
    BEGIN
        PRINT 'Necesitas dar una tabla valida'
        RETURN 
    END
ELSE
    BEGIN
        WHILE EXISTS(SELECT * FROM sys.foreign_keys WHERE referenced_object_id = object_id(+ @table))
        BEGIN
            SELECT    @sql = 'ALTER TABLE ' + OBJECT_NAME(parent_object_id) + ' DROP CONSTRAINT ' + name 
            FROM    sys.foreign_keys 
            WHERE    referenced_object_id = object_id(@table)

            EXEC    sp_executesql @sql
        END
    END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:05:39.410

您的存储过程确实可以工作，只有很小的变化 - 例如`(COALESCE(@table,'') <> '')` 应该是`(COALESCE(@table,'') = '')`

```
ALTER PROCEDURE [dbo].[sp_quitarConstrain](@table NVARCHAR(50))
AS
    DECLARE @sql NVARCHAR(255)

    IF((COALESCE(@table,'') = '') OR (@table IS NULL))
        BEGIN
            PRINT 'Necesitas dar una tabla valida'
            RETURN 
        END
    ELSE
        BEGIN
            WHILE EXISTS(SELECT * FROM sys.foreign_keys WHERE referenced_object_id = object_id(@table))
                BEGIN
                    SELECT    @sql = 'ALTER TABLE ' + OBJECT_NAME(parent_object_id) + ' DROP CONSTRAINT ' + name 
                    FROM    sys.foreign_keys 
                    WHERE    referenced_object_id = object_id(@table)
                    EXEC    sp_executesql @sql
                END
        END 
```

如果您对模式不太挑剔，可以像这样检查表：

```
IF NOT EXISTS(SELECT 1 FROM sys.tables WHERE name=@table)
    BEGIN
        PRINT 'Necesitas dar una tabla valida'
        RETURN 
    END 
```

# drupal - Drupal - Webform 组件值的标记

> ID：12180871
> 
> 赞同：1
> 
> 时间：2012-08-29T14:58:11.317
> 
> 标签：drupal, drupal-7

有没有办法设置 Webform，以便我可以将组件字段提交转换为令牌以在提交电子邮件中使用？

例如，我想在电子邮件主题行中包含“来自 [电子邮件地址] 的消息”。默认选项仅允许在电子邮件中仅包含组件字段（主题：[email]），或仅包含自定义文本。

有没有办法可以将组件字段提交转换为令牌以在电子邮件中使用？看起来有一个将网络表单项转换为令牌的模块，但它不适用于网络表单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T21:22:58.520

想通了 -`%value[key]`每当你想获得提交的字段值时使用。我从随机搜索中找到了它，它把我带到了这里：[http](http://drupal.org/node/1010648) ://drupal.org/node/1010648 。感觉`%value[key]`应该在 webform 管理 UI 的电子邮件部分的令牌帮助字典中，这很难找到。

# css - 无法使垂直飞出子菜单全屏

> ID：12180873
> 
> 赞同：0
> 
> 时间：2012-08-29T14:58:12.873
> 
> 标签：css

我正在使用一个标准的 css 垂直导航菜单，它使用 ":hover" 来显示子菜单。菜单使用标准的“ul”和“li”元素完成。菜单位于页面的左侧，当您将鼠标悬停在菜单上时，它会弹出其右侧的子菜单。

我的问题是，弹出的子菜单，有没有办法让它全屏高度？

## 更新

这是一个非常简单的示例：http: [//jsfiddle.net/NuAWQ/1/](http://jsfiddle.net/NuAWQ/1/)

所有周围的 html/css 都已删除，因此您只能看到菜单。

## 更新

我现在已经设法通过使用 jQuery 来做到这一点。jQuery是：

`$('ul > li > ul').css('height', $(window).height() + 'px');`

[http://jsfiddle.net/NuAWQ/2/](http://jsfiddle.net/NuAWQ/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T16:29:36.457

如果有人好奇，只是一些额外的信息。

除了上面的解决方案，它使用 jQuery 修复了整个大小问题：（`$('ul > li > ul').css('height', $(window).height() + 'px');`演示[）](http://jsfiddle.net/NuAWQ/2/)，可以通过扩展 jQuery 代码进一步将子菜单项与悬停的父项对齐。

[JSFiddle 演示在这里](http://jsfiddle.net/wSN2W/2/)。在上面已经提到的上面添加了以下 jQuery 代码：

```
$('ul > li > ul > li:first-child').css('margin-top', function(index, value) {
    var offset = $(this).parent().parent().offset();

    if (offset != null && offset.top > 0) {
        return offset.top + "px";
    } else {
        return 0 + "px";
    }
}); 
```

它所做的几乎就是它需要每个子菜单并`margin-top`在第一个子菜单上添加一个`<li>`与悬停的父菜单项的垂直偏移量相同的值。在上面的演示中，这仅适用于第一个子菜单，但我很确定它可以应用于所有子菜单，只需调整 CSS 选择器或偏移获取逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:10:19.190

This gave the intended result.

$('ul > li > ul').css('height', $(window).height() + 'px');

However, also see Roddy's additional answer if you wish to align the child elements with the parent element.

# jquery - $(data).find("some tag") 不起作用

> ID：12180877
> 
> 赞同：0
> 
> 时间：2012-08-29T14:58:24.587
> 
> 标签：jquery, ajax, post

有这个代码：

```
$.post("auth.php", {pass : pass}, function(data) {
        var x = $(data).find("span#c");
        $("div#addform").show();
        menu.html(data);
        console.log(data);
        console.log(x);
        alert(x); 
```

和 php：

```
if($ath['mail'] != $pass){ echo "<center> try another pass )</center>";} else {
    // print all db
    echo("<span id=\"c\">OK</span><br>");
    $sql = "SELECT * FROM user";
    $result=mysql_query($sql); 
```

作为响应得到文本/ html，但在控制台中，如果警报（x）所有数据在menu.html（数据）中完美加载，我只会得到“[]”和[object Object]；但为什么我不能让我的'x'跨越我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T15:04:43.770

尝试使用[`.filter`](http://api.jquery.com/filter/)而不是`.find`.

`find`搜索 jQuery 元素的子元素，但在您的代码中，数据*是*`<span>`. 它没有孩子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:02:56.797

试试这样[http://jsfiddle.net/qW4nB/](http://jsfiddle.net/qW4nB/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T15:00:30.777

`.find`是找孩子；这`span`不是一个孩子。

# php - 我做推特应用，我怎么看这个应用？，我的推特应用程序的 URL 是什么？

> ID：12180879
> 
> 赞同：-4
> 
> 时间：2012-08-29T14:58:34.623
> 
> 标签：php, twitter

我创建了新的 twitter 应用程序，它显示了我的应用程序页面。

我的APP名称是：testfactw

如果我单击此应用程序，我会转到此页面[https://dev.twitter.com/apps/1495385/show](https://dev.twitter.com/apps/1495385/show)

我的问题是我的应用程序的 URl 是什么？

例如[https://twitter.com/XXXXXXX](https://twitter.com/XXXXXXX)

实际上我不知道我在谷歌上搜索，但我没有找到真正的答案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:03:00.810

您的应用没有公共 URL。如果您想为您的应用程序提供一个 Twitter 页面，您应该注册为用户并将用户名设置为您的应用程序名称。然后登录该帐户并创建应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:06:30.020

我从来没有创建过 Twitter 应用程序，所以我不能说我有这样做的经验，但是，我在 Twitter 的“创建应用程序”页面上，它提供了一个“网站”输入框，上面写着：

"**您的应用程序的可公开访问的主页，用户可以在其中下载、使用或查找有关您的应用程序的更多信息。这个完全限定的 URL 用于您的应用程序创建的推文的来源归属，并将显示在面向用户的授权屏幕。（如果您还没有 URL，只需在此处放置一个占位符，但记得稍后更改它。）** “。

这应该是 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-17T07:31:11.693

如果您尚未登录，请访问[http://apps.twitter.com并登录。](http://apps.twitter.com)您应该会看到一个应用程序列表（如果您有多个）

# javascript - 强制谷歌浏览器“杀死页面”弹出窗口的方法？

> ID：12180884
> 
> 赞同：1
> 
> 时间：2012-08-29T14:58:47.007
> 
> 标签：javascript, google-chrome

当 javascript 陷入循环时，Google Chrome 浏览器最终会显示一个弹出窗口，要求我等待或终止该页面。我按了好几次等待开始，以至于 Chrome 不再要求我正在测试的网页。现在我希望查看它显示的确切 HTML，因此我需要弹出窗口以终止执行并查看源代码。

我可以在 Chrome 选项中的任何地方执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T22:05:11.247

`debugger;`在您怀疑代码可能循环的位置之前，在您的 javascript 代码中插入断点 ( )：

Ctl+Shft+J 在加载页面之前打开开发工具选项卡，然后在 Chrome 中加载页面，当 Chrome 读取`debugger;`语句时，执行将停止。然后，您可以检查您的源代码并逐步调试 js。

# jquery - 您应该按什么顺序引用脚本？

> ID：12180891
> 
> 赞同：0
> 
> 时间：2012-08-29T14:59:08.847
> 
> 标签：jquery, asp.net-mvc, modal-dialog

如果脚本像往常一样定位，我有一个大问题

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script> 
```

我无法从 js 提交：

```
$('#table').get(0).setAttribute('action', '@Url.RouteUrl(new { controller = "Home", action = "Domain" })'); // it's work
$('#table').submit(); // this not work!!! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:03:13.097

[这里](http://api.jquery.com/submit/)说提交方法“只能附加到`<form>`元素”。那么问题不在于脚本顺序

# windows-phone-7 - 如何在 windows phone 的 longlistselector 的弹出网格中禁用类别

> ID：12180895
> 
> 赞同：2
> 
> 时间：2012-08-29T14:59:15.353
> 
> 标签：windows-phone-7, windows-phone, longlistselector

我正在尝试为 WF 7.5 编写一个应用程序，其中包括按字母顺序排列的食谱列表。我正在使用 LongListSelector 将此列表显示为跳转列表。目前，用户可以点击列表中的类别标题，然后会出现一个包含所有字母的网格（就像在音乐应用程序中一样）。不幸的是，现在用户可以从列表中选择一个灰色的字母，LLS 会将它们放在相邻的类别中。我希望用户保持在网格视图中，直到他们选择一个包含项目的类别，或者他们回击。我有一个变量告诉我类别中是否有项目，但我不确定如何使用它来禁用网格视图中的特定类别。我将不胜感激您能提供的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T06:26:11.563

只需将变量绑定到*GroupItemTemplate*中主元素的*IsHitTestVisible*属性即可。就像这样：

 *```
<LongListSelector.GroupHeaderTemplate>
    <Border IsHitTestVisible="{Binding CategoryHasItems}">
        <TextBlock Text="{Binding CategoryTitle}"/>
    </Border>
</LongListSelector.GroupHeaderTemplate> 
```*

# database - postgresql 在数据库之间快速传输表

> ID：12180897
> 
> 赞同：1
> 
> 时间：2012-08-29T14:59:17.757
> 
> 标签：database, postgresql, data-warehouse, postgresql-9.1, database-optimization

我有一个每天对数据进行分区的 postgresql 操作数据库和一个 postgresql 数据仓库数据库。为了将数据从操作数据库快速复制到 DWH，我想以最快的速度复制表并且使用最少的资源。由于这些表是按天分区的，我知道每个分区本身就是一个表。这是否意味着我可以以某种方式在机器之间复制数据文件并使用这些数据文件在 DWH 中创建表？在这种情况下，最佳做法是什么？

编辑：我将在这里回答所有问题： 1\. 我正在构建一个 ETL。ETL 的第一步是复制对操作数据库影响较小的数据。2\. 如果这不会减慢操作数据库的写入速度，我想复制数据。3\. 更多数据，操作数据库不在我的响应范围内，但主要关注的是该数据库的写入时间。它每天写入大约 5 亿行，其中有几个小时加载更多，但没有几个小时根本没有写作。4\. 我遇到了一些工具/方法——复制、pg_dump。但是我找不到可以比较工具以了解何时使用什么以及了解什么适合我的情况的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:55:58.560

如果您要进行批量传输，我实际上会考虑在仓库系统上运行 pg_dump 并将结果每天一次通过管道传输到 psql 中。您可能也可以运行 Slony，但这需要更多资源，并且可能会更复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T20:04:28.017

有许多在数据库之间复制数据的好方法。虽然只是在寻找一个

> 在数据库之间快速传输表

...扩展[dblink](http://www.postgresql.org/docs/current/interactive/dblink.html)提供了一个简单而快速的解决方案。这里有很多关于 SO 的例子。尝试搜索。

如果您想要更广泛的方法、持续同步等，请考虑使用已建立的复制工具之一。手册中有很好的[比较](http://www.postgresql.org/docs/current/interactive/different-replication-solutions.html)可以帮助您入门。

# three.js - 使用法线贴图着色器破坏灯光

> ID：12180899
> 
> 赞同：1
> 
> 时间：2012-08-29T14:59:19.940
> 
> 标签：three.js, lighting

我一直在尝试使用`THREE.ShaderUtils.lib["normal"]`法线贴图着色器，但灯光坏了。法线贴图本身有效，但当我环顾四周或移动相机时，灯光似乎疯狂地移动到奇怪的位置。定期`THREE.MeshPhongMaterial`工作。请参阅下面的图片以说明问题（黄色圆圈是灯的实际位置）。

*Phong 材料按预期工作：* ![Phong 材料按预期工作](../Images/fbe9ef5133ab19826922a55a2d28e356.png)

*法线贴图着色器破坏了一些东西——你可以看到光线不再从灯的真实位置发出，而是从随机的某个地方发出（当视口移动时，那些明显随机的光线位置也会移动）：* ![法线贴图着色器破坏了一些东西](../Images/8cdd87fb0bca192f46471b022d6a5c36.png)

几何生成部分取自[minecraft 示例](https://github.com/mrdoob/three.js/blob/master/examples/webgl_geometry_minecraft.html#L115)（已`geometry.computeTangents()`添加），法线贴图材质生成部分来自[法线贴图示例](https://github.com/mrdoob/three.js/blob/master/examples/webgl_materials_normalmap.html#L156)。

这种行为的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:03:39.290

我最初通过使用在 phong 材质中具有法线贴图的 r51dev 版本解决了这个问题，但似乎 dev 分支现在也修复了原始的法线贴图着色器，很可能是通过[这次提交](https://github.com/mrdoob/three.js/commit/0faca8f468b7f9f701f82f9601b1e57ba421ce64)。

# mysql - 我在哪里可以获得用于练习 MySQL 查询优化的大型示例数据库

> ID：12180902
> 
> 赞同：35
> 
> 时间：2012-08-29T14:59:25.980
> 
> 标签：mysql, sql

谁能提供一个相当大的示例数据库的参考，我可以将其导入 MySQL 以测试和学习优化和基准测试？
数据库应该至少有6-8个表，它们之间有很多外键，即一个完整的数据库。该`MySQL` `employees`数据库看起来很有希望，但下载页面有 3 个下载链接，单击其中任何一个都会在浏览器中打开一个页面，其中包含大量的二进制数据，不知道该怎么办。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-29T15:05:23.863

StackOverflow 本身发布了一个可用于此类测试的数据库。由于有很多播种机，因此使用 BitTorrent可以快速[下载。](https://archive.org/details/stackexchange)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-29T15:02:19.033

[mysql网站](http://dev.mysql.com/doc/index-other.html)上有大型数据集

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-29T15:44:39.930

结帐[https://launchpad.net/test-db/+download](https://launchpad.net/test-db/+download)

我相信它有大约 6 张桌子，建议下载完整档案。

导出数据约为 167 MB。

# google-chrome - Windows 版 Chrome 上的黑框

> ID：12180907
> 
> 赞同：1
> 
> 时间：2012-08-29T14:59:41.313
> 
> 标签：google-chrome, windows-7, rendering

我试图理解这些太大而无法忽略的奇怪渲染错误框。这似乎发生在 Windows 7 中的 Chrome 上（我的测试不太详细），其他地方都没有。当我试图检查时，它们都消失了。这可能是某种视频卡问题，因为我正在使用一些非常高级的 CSS3 过渡，可能会弄乱内存。无论如何，如果有人可以就我可以做些什么来解决问题提供建议，我会不知所措。该网站是 www.crane-usa.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T00:10:41.777

我们的网站使用 21.0.1180.89 和 21.0.1180.79 时遇到同样的问题。问题出现在 Windows 7、Mac OS X 最新版本、Ubuntu 和在 IE9 中运行的 Chrome 框架中。禁用 Chrome 框架的 IE9 工作正常。这些问题是间歇性的，不可重复的。正如您所说，检查元素消除了问题。我尝试通过 chrome://flags 禁用 GPU 合成，但这并没有解决问题。

我们和我们的用户直到大约 2012 年 8 月 27 日，也就是 3 天前才看到这些问题。我查看了 crbugs.com，发现这似乎已经存在了几个星期。[http://code.google.com/p/chromium/issues/detail?id=143647](http://code.google.com/p/chromium/issues/detail?id=143647)

抱歉，我们的网站不公开，所以我无法发布我们的网址，但您并不孤单。

# git - 如何使用 git push 推送到所有 github 源？

> ID：12180909
> 
> 赞同：0
> 
> 时间：2012-08-29T14:59:46.650
> 
> 标签：git, version-control, versioning

我的 git repo 有两个来源：

*   来源：这是 GitHub 来源。
*   Heroku：Heroku 的起源。

我怎样才能用一个单一的推送到两个起源的主分支`git push`？我目前正在做`git push origin master && git push heroku master`，但我觉得有一个更简单的方法。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T16:14:24.933

在你的`<repo>/.git/config`你可以做这样的事情（我假设`github`和`heroku`遥控器已经定义，但你可能有不同的实际名称）：

```
... other stuff ...
[remote "github"]
    fetch = <refspec>
    url = <github_url>
[remote "heroku"]
    fetch = <refspec>
    url = <heroku_url>
[remote "both"]
    url = <github_url>
    url = <heroku_url> 
```

然后，当你运行时`git push both`，它会推送到两者。如果适当/必要，您也可以将 fetch/push refspecs 或其他选项添加到“all”远程定义中。我认为这两个网址不能有不同的参考规范，但这可能会带来一点不便......

# ruby-on-rails-3 - Rspec 不通过 h as_and_belongs_to_many 关联加载对象

> ID：12180910
> 
> 赞同：0
> 
> 时间：2012-08-29T15:00:03.747
> 
> 标签：ruby-on-rails-3, activerecord, rspec

我的模型中有这个：

```
class Instance < ActiveRecord::Base
   has_and_belongs_to_many :owners, :class_name => 'User' 
```

和这个：

```
 class User < ActiveRecord::Base
   has_many :instances 
```

我有这个迁移：

```
 class CreateInstancesUsersJoinTable < ActiveRecord::Migration
     def up
       create_table :instances_users, :id=>false do |t|
         t.string :instance_id
         t.string :user_id
       end
     end

 def down
   drop_table :instances_users
  end
end 
```

在实例控制器中，我有：

```
 @instance.owners << owner 
```

但是测试表明所有者不在所有者数组中。但是当我说：

```
 p @instace.owners - before or after @instance.owners << owner 
```

测试通过。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:08:01.687

在用户模型中，您应该编写

```
has_and_belongs_to_many  :instances 
```

代替

```
 has_many :instances 
```

# php - 在 PHP 中解析多维数组

> ID：12180918
> 
> 赞同：-1
> 
> 时间：2012-08-29T15:00:34.653
> 
> 标签：php, arrays, multidimensional-array, smarty

我在*PHP*中有一个多维数组，如下所示：

```
Array
(
    [0] => Array
        (
            [category_id] => 1
            [name] => Football Team Name 1
        )
    [1] => Array
        (
            [category_id] => 2
            [name] => Football Team Name 2
        )
    [2] => Array
        (
            [category_id] => 3
            [name] => Hockey Team Name 1
        )
    [3] => Array
        (
            [category_id] => 4
            [name] => Hockey Team Name 2
        )
    [4] => Array
        (
            [category_id] => 5
            [name] => Hockey Team Name 3
        ) 
```

第一个单词（称为*name*的数组键）我总是用作类别标题，因此，我想但到目前为止无法弄清楚如何使最终输出看起来像这样：

![输出示例](../Images/216b9c045871640c63960e34ca74c0b7.png)

就我而言，该解决方案最终应与*Smarty*一起使用。

如果有任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T15:14:19.243

您应该在将数据解析给 Smarty 之前准备好数据。

你可以这样做：

```
$result = array(
    array('name' => 'Hockey Team 1', 'category_id' => 1),
    array('name' => 'Hockey Team 2', 'category_id' => 2),
    array('name' => 'Hockey Team 3', 'category_id' => 3),
    array('name' => 'Football Team 1', 'category_id' => 4),
    array('name' => 'Football Team 2', 'category_id' => 5),
    array('name' => 'Football Team 3', 'category_id' => 6)
);

$sports = array();

foreach ($result as $team) {
    $sport_parts = explode(' ', $team['name']);
    $sport = array_shift($sport_part);
    $team['name'] = join(' ', $sport_parts);
    if (isset($sports[$sport]) === FALSE) {
        $sports[$sport] = array();
    }
    $sports[$sport][] = $team;
} 
```

这将产生一个像这样的数据集，在 Smarty 中很容易迭代：

```
array(2) {
  ["Hockey"]=>
  array(3) {
    [0]=>
    array(2) {
      ["name"]=>
      string(13) "Team 1"
      ["category_id"]=>
      int(1)
    }
    [1]=>
    array(2) {
      ["name"]=>
      string(13) "Team 2"
      ["category_id"]=>
      int(2)
    }
    [2]=>
    array(2) {
      ["name"]=>
      string(13) "Team 3"
      ["category_id"]=>
      int(3)
    }
  }
  ["Football"]=>
  array(3) {
    [0]=>
    array(2) {
      ["name"]=>
      string(15) "Team 1"
      ["category_id"]=>
      int(4)
    }
    [1]=>
    array(2) {
      ["name"]=>
      string(15) "Team 2"
      ["category_id"]=>
      int(5)
    }
    [2]=>
    array(2) {
      ["name"]=>
      string(15) "Team 3"
      ["category_id"]=>
      int(6)
    }
  }
} 
```

Smarty 模板的示例：

```
{foreach from=$sports key=sport item=teams}
  <h1>{$sport}</h1>
    <ul>
      {foreach from=$teams item=team}
        <li>{$team['name']}</li>
      {/foreach}    
    </ul>
{/foreach} 
```

# r - 字符“|” 在 strsplit 函数中（垂直条/管道）

> ID：12180927
> 
> 赞同：6
> 
> 时间：2012-08-29T15:01:08.943
> 
> 标签：r

我很好奇：

```
> strsplit("ty,rr", split = ",")  
[[1]]
[1] "ty" "rr"

> strsplit("ty|rr", split = "|")
[[1]]
[1] "t" "y" "|" "r" "r" 
```

为什么我不从中`c("ty","rr")`得到`strsplit("ty|rr", split="|")`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-29T15:03:23.423

这是因为`split`参数被解释为正则表达式，并且`|`是正则表达式中的特殊字符。

为了解决这个问题，您有两种选择：

选项 1：转义`|`，即`split = "\\|"`

```
strsplit("ty|rr", split = "\\|")
[[1]]
[1] "ty" "rr" 
```

选项 2：指定`fixed = TRUE`：

```
strsplit("ty|rr", split = "|", fixed = TRUE)
[[1]]
[1] "ty" "rr" 
```

* * *

另请注意 的**另见**部分`?strsplit`，它告诉您阅读`?"regular expression"`模式规范的详细信息。

# c# - 使用 XPathNodeIterator

> ID：12180929
> 
> 赞同：0
> 
> 时间：2012-08-29T15:01:19.613
> 
> 标签：c#, xml

我正在尝试使用以下 xml 示例进行交互

```
XPathNodeIterator nodes = xPathNav.Select("z:row");

while(nodes.MoveNext())  
{
} 
```

这给出了错误“需要命名空间管理器或 XsltContext”

谁能建议循环遍历 xml 的最佳方法或指出我出错的正确方向

谢谢

小号

![示例 xml](../Images/6af733fddeed33f0127284c119bcfa11.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:45:33.553

我认为您需要将命名空间管理器作为第二个参数传递给 Select，有点像这里描述的内容：http: [//support.microsoft.com/kb/316913](http://support.microsoft.com/kb/316913)（除了它是 SelectNodes 的示例）。

# android - 生成位图的时间戳 - Android

> ID：12180934
> 
> 赞同：3
> 
> 时间：2012-08-29T15:01:38.490
> 
> 标签：android, android-image

我有一个应用程序，我从网上下载了一个图像文件，并将这个文件保存在外部存储中。

稍后，将此图像添加到媒体存储中，我调用：

```
MediaStore.Images.Media.insertImage(getContentResolver(),
                fullPath, "IMG_"+System.currentTimeMillis(),null); 
```

但是，我的照片总是添加到画廊的末尾 - 它认为照片是在 1970 年拍摄的。如何更改此信息？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:07:56.833

使用带有 ExifInterface 的 JPEGS（不是 PNG！）

# google-app-engine - 使用 @ElementCollection 不适用于 JPA 2 的 GAE

> ID：12180936
> 
> 赞同：1
> 
> 时间：2012-08-29T15:01:39.217
> 
> 标签：google-app-engine, jpa, jpa-2.0, datanucleus

我在我的 Gooogle App Engine 项目中从 JPA 1 迁移到 JPA 2，为此我更改了枚举集合的注释，例如这种情况：

```
//  @OneToMany(cascade = CascadeType.ALL) // JPA 1
    @ElementCollection(targetClass=PositioningType.class)
    private List<PositioningType> bestPositionings; 
```

`PositioningType`是一个没有注释的枚举。

该代码给了我以下异常：

```
javax.persistence.PersistenceException: The MetaData for the element class "com.olympya.datamodel.model.PositioningType" of the collection field "com.olympya.datamodel.model.Player.bestPositionings" was not found.
at org.datanucleus.api.jpa.NucleusJPAHelper.getJPAExceptionForNucleusException(NucleusJPAHelper.java:302)
at org.datanucleus.api.jpa.JPAEntityTransaction.commit(JPAEntityTransaction.java:122)
at com.olympya.Services.mergeUser(Services.java:102)
...
Caused by: org.datanucleus.exceptions.NucleusUserException: The MetaData for the element class "com.olympya.datamodel.model.PositioningType" of the collection field "com.olympya.datamodel.model.Player.bestPositionings" was not found.
at com.google.appengine.datanucleus.scostore.AbstractFKStore.<init>(AbstractFKStore.java:120)
at com.google.appengine.datanucleus.scostore.FKListStore.<init>(FKListStore.java:83)
at com.google.appengine.datanucleus.DatastoreManager.newFKListStore(DatastoreManager.java:472)
at org.datanucleus.store.mapped.MappedStoreManager.getBackingStoreForCollection(MappedStoreManager.java:798)
at org.datanucleus.store.mapped.MappedStoreManager.getBackingStoreForField(MappedStoreManager.java:709)
at org.datanucleus.store.types.sco.backed.ArrayList.<init>(ArrayList.java:99)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
... 
```

* * *

**更新 1**

尝试持久化整数集合时，我遇到了同样的异常：

```
@ElementCollection
@Extension(vendorName = "datanucleus", key = "gae.unindexed", value = "true")
//private List<PositioningType> bestPositionings = new ArrayList<PositioningType>();
private List<Integer> bestPositionings; 
```

结果是：

```
Caused by: org.datanucleus.exceptions.NucleusUserException: The MetaData for the element class "java.lang.Integer" of the collection field "com.olympya.datamodel.model.Player.bestPositionings" was not found.
at com.google.appengine.datanucleus.scostore.AbstractFKStore.<init>(AbstractFKStore.java:120)
at com.google.appengine.datanucleus.scostore.FKListStore.<init>(FKListStore.java:83)
at com.google.appengine.datanucleus.DatastoreManager.newFKListStore(DatastoreManager.java:472)
at org.datanucleus.store.mapped.MappedStoreManager.getBackingStoreForCollection(MappedStoreManager.java:798)
at org.datanucleus.store.mapped.MappedStoreManager.getBackingStoreForField(MappedStoreManager.java:709)
at org.datanucleus.store.types.sco.backed.ArrayList.<init>(ArrayList.java:99) 
```

未找到**Integer**的元数据！！！

* * *

**更新 2**

使用 注释该字段`@Basic`，仅此而已，使其正常工作。不过，仍然在这里等待答案，因为`@ElementCollection`应该可以工作并且`@Basic`不应该用于收藏。

# haskell - 将嵌套列表转换为自定义数据类型

> ID：12180939
> 
> 赞同：1
> 
> 时间：2012-08-29T15:01:40.223
> 
> 标签：haskell

我正在尝试将嵌套列表转换为`Mydata`使用列表理解调用的自定义类型，如下所示：

```
main = do
    let a = [["12.345", "1", "4.222111"],
             ["31.2", "12", "9.1234"],
             ["43.111111", "3", "8.13"],
             ["156.112121", "19", "99.99999"]]
    let b = foo a
    print b

foo xss = [(xs,xs) | xs <- xss, xs <- xss]
    where
         xs = Mydata (read xs!!0 :: Float) (read xs!!1 :: Int) (read xs!!2 :: Float)

data Mydata = Mydata {valA :: Float, valB :: Int, valC :: Float} 
```

当我运行我的程序时，我收到以下错误：

```
1.hs:11:28:
    Couldn't match expected type `String' with actual type `Mydata'
    In the first argument of `read', namely `xs'
    In the first argument of `(!!)', namely `read xs'
    In the first argument of `Mydata', namely `(read xs !! 0 :: Float)' 
```

谁能帮我找出问题所在？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T15:26:18.150

`xs`列表理解中的定义是（可能是无意的）递归的，没有任何意义。可能的实现如下：

```
data Mydata = Mydata {valA :: Float, valB :: Int, valC :: Float} deriving Show

-- rely on type inference instead of specifying explicit type for each `read'
dataFromList [a, b, c] = Mydata (read a) (read b) (read c)
dataFromList _ = error "dataFromList: not enough arguments in list"

main = do
    let a = [["12.345", "1", "4.222111"],
             ["31.2", "12", "9.1234"],
             ["43.111111", "3", "8.13"],
             ["156.112121", "19", "99.99999"]]
    let b = map dataFromList a
    -- alternatively
    -- let b = [dataFromList triple | triple <- a]
    print b 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T00:46:49.897

{- 我将借此机会告诉您一些其他我认为从长远来看会有所帮助并解决问题的事情。-}

```
import Control.Applicative
import Data.Maybe
import Network.CGI.Protocol (maybeRead) 
```

{- Control.Applicative 让我可以使用它们`<$>`，`<*>`它们是处理大量事物的非常方便的功能（稍后会详细介绍）。我打算`maybeRead`以后用。不知道为什么不在`Data.Maybe`。

先说数据结构。我已经导出了 show 所以我们可以打印 Mydata。-}

```
data Mydata = Mydata {valA :: Float, 
                      valB :: Int, 
                      valC :: Float}
  deriving Show 
```

{- 我`somedata`在主体中做了一个定义（你有`let a =`inside `main`），因为我觉得你严重过度使用了 IO monad。在纯世界中尽可能多地尝试是值得的，因为它使调试变得更加容易。也许在你的实际问题中，你会`somedata`从某个地方读到，但是对于编写函数，有一些像这样的测试数据是一个很大的好处。（尝试`somedata`在这里只提及一次定义，这样你就不会得到大量的全局常量！）-}

```
somedata = [["12.345", "1", "4.222111"],
            ["31.2", "12", "9.1234"],
            ["43.111111", "3", "8.13"],
            ["156.112121", "19", "99.99999"]]

somewrong = [ ["1",   "2",   "3"     ],    -- OK
              ["1.0", "2",   "3.0"   ],    -- OK, same value as first one
              ["1",   "2.0", "3"     ],    -- wrong, decimal for valB
              ["",    "two",  "3.3.3"] ]   -- wrong, wrong, wrong. 
```

{- 让我们编写一个函数来读取单个`Mydata`，但是`Maybe Mydata`如果它不起作用，我们可以优雅地恢复。 `maybeRead :: Read a => String -> Maybe a`, 所以它将字符串变成`Just`你想要的，或者`Nothing`如果它不能给你。这比简单地因错误消息而崩溃要好。（最好还是返回`Either`一条错误消息来解释问题或`Right`答案，但我今天将跳过它。）

我打算写这三种方式，越来越好。-}

```
readMydata_v1 :: [String] -> Maybe Mydata
readMydata_v1 [as, bs, cs] = case (maybeRead as, maybeRead bs, maybeRead cs) of
   (Just a, Just b, Just c) -> Just $ Mydata a b c
   _                        -> Nothing
readMydata_v1 _ = Nothing    -- anything else is the wrong number of Strings 
```

{- 所以我们看一下`(maybeRead as, maybeRead bs, maybeRead cs)`，如果它们都有效，我们就用`Mydata`它们做 a，然后返回`Just`正确的答案，但如果发生其他事情，其中​​一个是 a `Nothing`，所以我们不能做 a `Mydata`，所以我们得到`Nothing`了整体.

`map readMydata_v1 somedata`使用和在 gchi 中尝试一下`map readMydata_v1 somewrong`。

请注意，因为我使用了表达式，`Mydata a b c`所以它强制在模式中使用`a`和`b`to `c`be`Float`的类型。该模式是的输出，它强制三种用途的类型是正确的——我不需要给出单独的类型签名。类型签名真的很方便，但它们在函数中间并不漂亮。`Int``Float``(Just a, Just b, Just c)``(maybeRead as, maybeRead bs, maybeRead cs)``maybeRead`

现在我喜欢使用`Maybe`，但我不喜欢`case`在彼此之间编写大量语句，所以我可以`Maybe`使用`Monad`. 请参阅*Learn You a Haskell for Great Good* [http://learnyouahaskell.com](http://learnyouahaskell.com)了解有关 monad 的更多详细信息，但出于我的目的，我可以将`Maybe`值视为它的值，`IO`即使它不是。-}

```
readMydata_v2 :: [String] -> Maybe Mydata
readMydata_v2 [as,bs,cs] = do
      a <- maybeRead as
      b <- maybeRead bs
      c <- maybeRead cs
      return $ Mydata a b c
readMydata_v2 _ = Nothing    -- anything else is the wrong number of Strings 
```

{- 我好像没有写错误处理代码！`Maybe`单子不是很好！在这里，我们拿走`a`我们能从中得到的`maybeRead as`一切，`b`从阅读中得到的`bs` 一切`c`，从我们得到的一切`cs`，如果这一切都奏效了，我们就会得到`Just $ Mydata a b c`。`Maybe`monad 处理`Nothing`我们通过停止和返回得到的任何 s ，`Nothing`并将任何正确答案包装在`Just`.

虽然这真的很好，但它感觉不是很*函数式编程*，所以让我们全力以赴并完成它`Applicative`。`Applicative`您应该在[http://learnyouahaskell.com](http://learnyouahaskell.com)中阅读有关内容，但现在，让我们使用它。

每当你发现自己在写作

```
foo x y z = do
   thing1 <- something x
   thing2 <- somethingelse y
   thing3 <- anotherthing x z
   thing4 <- yetmore y y z
   return $ somefunction thing1 thing2 thing3 thing4 
```

这意味着当您可以更干净地使用“应用函子”时，您正在使用 monad。这意味着在实践中你可以写成

```
foo x y z = somefunction  <$>  something x  <*>  somethingelse y  <*>  anotherthing x z  <*>  yetmore y y z 
```

或者，如果您愿意，

```
foo x y z = somefunction  <$>  something x  
                          <*>  somethingelse y  
                          <*>  anotherthing x z  
                          <*>  yetmore y y z 
```

这更好，因为（a）它感觉更像是普通的函数应用程序（注意，它的`<$>`工作方式`$`和`<*>`工作方式都像一个空格`）和（b）你不需要发明名称`thing1`等。`

 `这意味着找出 and 的结果`something x`，然后`somethingelse y`应用于结果。`anotherthing x z``yetmore y y z``somefunction`

让我们做`readMydata`应用方式：-}

```
readMydata_nice :: [String] -> Maybe Mydata
readMydata_nice [a,b,c] = Mydata <$> maybeRead a <*> maybeRead b <*> maybeRead c
readMydata_nice _       = Nothing 
```

{- Aaaahhhhh，如此干净，如此实用，如此简单。嗯。:) 多想，少写。

这意味着将`maybeRead a`and`maybeRead b`和`maybeRead c`and 的结果应用于`Mydata`结果，但是因为一切都是`Maybe`，如果沿途有任何事情是`Nothing`，答案将是`Nothing`。

同样，您可以在 ghci 中使用`map readMydata_nice somedata`or进行测试`map readMydata_nice somewrong`

无论如何，让我们 write `main`，它现在也更实用了。-}

```
main = mapM_ print $ catMaybes $ map readMydata_nice somedata 
```

{- 这会将每个字符串列表`somedata`读取为`Maybe Mydata`，然后丢弃`Nothing`s 并将它们转换为`IO` `print`命令并一个接一个地执行。 `mapM_`工作有点像`map`，但`IO`它创造的每一个。因为是几个`print`s，所以每一个都是单独的一行，这样阅读起来要容易得多。

在这里，我决定使用`catMaybes`忽略这些`Nothing`值并仅打印有效的值。在一个真正的程序中，我会`Either`像我说的那样使用，这样我就可以传递一条错误消息，而不是默默地忽略错误的数据。我们使用的所有技巧`Maybe`也适用于`Either`. -}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T15:19:43.453

在定义中

```
where
  xs = Mydata (read xs!!0 :: Float) (read xs!!1 :: Int) (read xs!!2 :: Float) 
```

您`xs`在定义的左侧和右侧使用。因此，它必须在两侧具有相同的类型。编译器假定的类型`xs`是`MyData`并且您不能应用于`read`该类型的值。`

# jquery - 页面滚动到顶部 JQuery 不起作用

> ID：12180940
> 
> 赞同：-1
> 
> 时间：2012-08-29T15:01:41.810
> 
> 标签：jquery

我已经安装了页面滚动到顶部，但它不起作用。什么都没有显示。

有人可以帮我吗？我的网站是： http: [//www.vipjournal.net](http://www.vipjournal.net)。

我只是不知道该怎么办。

我已按照此步骤操作。[http://gazpo.com/2012/02/scrolltop/](http://gazpo.com/2012/02/scrolltop/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:33:31.327

我认为问题在于：

```
.scrollup {
    background: url("html/icon_top.png") no-repeat scroll 0 0 transparent;
    bottom: 50px;
    display: none;
    height: 40px;
    opacity: 0.3;
    position: fixed;
    right: 100px;
    text-indent: -9999px;
    width: 40px;
} 
```

您在后台提供的 url-“html/icon_top.png”似乎无效。因此，向上滚动箭头位于您的页脚（右侧）中。但它没有显示，因为网址找不到图像。所以我建议你检查正确的网址。

目前，您可以通过单击页脚右侧的来查看您的脚本正在运行。（距右侧 1 英寸远，位于页脚的垂直中间。）

# c# - 如何通过共享点 Web 服务在自定义列表中添加带有图像的新列表项？

> ID：12180942
> 
> 赞同：1
> 
> 时间：2012-08-29T15:01:42.637
> 
> 标签：c#, image, web-services, sharepoint-2010

我正在开发 asp.net Web 应用程序。我正在通过 lists.asmx Web 服务访问共享点列表数据。同样，我通过lists.asmx 在sharepoint 列表中添加数据。我添加新列表项的代码如下

```
public void InsertDataInClientList(Client clientObj)
        {
            PBSWebApplication.LocalHostServiceReference.ListsSoapClient proxy = Utility.GetLocalProxy();

            try
            {

                XmlDocument doc = new XmlDocument();
                XmlElement batch = doc.CreateElement("Batch");

                batch.InnerXml = "<Method ID='1' Cmd='New'>"
                    + "<Field Name='FirstName'>" + clientObj.FirstNameOfIndividual + "</Field>"
                    + "<Field Name='Last_x0020_Name'>" + clientObj.LastNameOfIndividual + "</Field>"
                    + "<Field Name='PATIENT_x0020_DOB'>" + clientObj.DateOfBirth.ToString("yyyy-MM-dd") + "</Field>"
                    + "<Field Name='Age'>" + clientObj.Age + "</Field>"    
                    + "<Field Name='Gender'>" + clientObj.Gender + "</Field>"
                    + "<Field Name='Preferred_x0020_By'>" + clientObj.ReferredBy + "</Field>"
                    + "<Field Name='Parent_x002f_Caregiver_x0020_Fir'>" + clientObj.Parent1FirstName + "</Field>"
                    + "<Field Name='Parent_x002f_Caregiver_x0020_Las'>" + clientObj.Parent1LastName + "</Field>"
                    + "<Field Name='Parent_x0020_1_x0020_Street_x002'>" + clientObj.Parent1StreetAddress + "</Field>"
                    + "<Field Name='Parent_x0020_1_x0020_City'>" + clientObj.Parent1City + "</Field>"
                    + "<Field Name='Parent_x0020_1_x0020_State'>" + clientObj.Parent1State + "</Field>"
                    + "<Field Name='Parent_x0020_1_x0020_Zip'>" + clientObj.Parent1Zip + "</Field>"                    
                    + "<Field Name='Parent_x0020_1_x0020_Home_x0020_'>" + clientObj.Parent1HomePhone + "</Field>"
                    + "<Field Name='Parent_x0020_1_x0020_Work_x0020_'>" + clientObj.Parent1WorkPhone + "</Field>"
                    + "<Field Name='Parent_x0020_1_x0020_Mobile_x002'>" + clientObj.Parent1MobilePhone + "</Field>"
                    + "<Field Name='Parent_x0020_1_x0020_Mobile_x002'>" + clientObj.Parent1MobilePhone + "</Field>"
                    + "<Field Name='Parent_x0020_1_x0020_Email'>" + clientObj.Parent1Email + "</Field>"
                    + "<Field Name='Marital_x0020_Status'>" + clientObj.Parent1MaritalStatus + "</Field>"
                    + "<Field Name='Parent_x0020_2_x002f_Caregiver_x'>" + clientObj.Parent2FirstName + "</Field>"
                    + "<Field Name='Parent_x0020_2_x002f_Caregiver_x0'>" + clientObj.Parent2LastName + "</Field>"
                    + "<Field Name='Parent_x0020_2_x0020_Street_x002'>" + clientObj.Parent2StreetAddress + "</Field>"
                    + "<Field Name='Parent_x0020_2_x0020_City'>" + clientObj.Parent2City + "</Field>"
                    + "<Field Name='Parent_x0020_2_x0020_State'>" + clientObj.Parent2State + "</Field>"
                    + "<Field Name='Parent_x0020_2_x0020_Zip'>" + clientObj.Parent2Zip + "</Field>"
                    + "<Field Name='Parent_x0020_2_x0020_Home_x0020_'>" + clientObj.Parent2HomePhone + "</Field>"
                    + "<Field Name='Parent_x0020_2_x0020_Work_x0020_'>" + clientObj.Parent2WorkPhone + "</Field>"
                    + "<Field Name='Parent_x0020_2_x0020_Mobile_x002'>" + clientObj.Parent2MobilePhone + "</Field>"
                    + "<Field Name='Parent_x0020_2_x0020_Email'>" + clientObj.Parent2Email + "</Field>"
                    + "<Field Name='Parent_x0020_2_x0020_Marital_x00'>" + clientObj.Parent2MaritalStatus + "</Field>"
                    + "<Field Name='Insurance_x0020_Company_x0020_Na'>" + clientObj.InsuranceCompanyName + "</Field>"
                    + "<Field Name='INSURED'>" + clientObj.InsuredCardHoldersName + "</Field>"
                    + "<Field Name='INSURED_x0020_DOB'>" + clientObj.InsuredCardHoldersDateOfBirth.ToString("yyyy-MM-dd") + "</Field>"
                    + "<Field Name='Insured_x0020_SSN'>" + clientObj.InsuredSSN + "</Field>"
                    + "<Field Name='Member_x0020_Number'>" + clientObj.MemberNumber + "</Field>"
                    + "<Field Name='GROUP_x0020__x0023_'>" + clientObj.GroupNumber + "</Field>"
                    + "<Field Name='Physician'>" + clientObj.Physician + "</Field>"
                    + "<Field Name='Physician_x0020_Phone_x0020_Numb'>" + clientObj.PhysicianPhoneNumber + "</Field>"
                    + "<Field Name='Medicaid_x0020_Id'>" + clientObj.MedicaidNumber + "</Field>"
                    + "<Field Name='Need_x0020_additional_x0020_help'>" + clientObj.NeedAdditionalHelp + "</Field>"
                    + "<Field Name='Interested_x0020_in_x0020_Speech'>" + clientObj.InterestedInSpeechAndLanguageServices + "</Field>"
                    + "<Field Name='Interested_x0020_in_x0020_Occupa'>" + clientObj.InterestedInOccupationalTherapy + "</Field>"
                    + "</Method>";

                XElement xElement = Utility.ToXElement(batch);

                proxy.UpdateListItems("Clients", xElement);
            }
            catch (Exception ex)
            {
                Utility.ShowErrorMessage(ex);
            }

        } 
```

上面的代码工作正常。我可以添加新的列表项。在上面的代码中，“客户”列表是自定义列表。现在在“客户”列表中，我还有一个字段名为 Image。它属于“超链接或图像”类型。我可以通过提供网址手动在此列中添加图像。但我想通过后面的代码添加这个图像。我有图像的字节数组。我也有源网址。我想添加具有上述字段值的图像。我想为特定列表项添加图像。意味着我想通过添加图像来更新列表项。我该怎么做。您能否提供我可以解决上述问题的任何代码或链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:29:28.303

当我使用 SharePoint 的 Web 服务创建文件时，我总是最终使用复制服务。如果您要向列表项添加附件，则可以解决此问题。如果没有，下面是一个可以让您朝着正确方向前进的示例：

```
 Byte[] bytes = new Byte[InputFile.PostedFile.InputStream.Length];
    InputFile.PostedFile.InputStream.Read(bytes, 0, bytes.Length);
    string soapStr =
        @"<?xml version=""1.0"" encoding=""utf-8""?>
            <soap:Envelope xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xmlns:xsd=""http://www.w3.org/2001/XMLSchema"" xmlns:soap=""http://schemas.xmlsoap.org/soap/envelope/"">
              <soap:Body>
                <CopyIntoItems xmlns=""http://schemas.microsoft.com/sharepoint/soap/"">
                  <SourceUrl>http://devint/a/ceo/PublishingImages/FridayMemoHeader1.png</SourceUrl>
                  <DestinationUrls>
                    <string>http://sp-pubdev:88/Resources/Images/testFile.png</string>
                  </DestinationUrls>
                  <Fields>
                  </Fields>
                  <Stream>{1}</Stream>
                </CopyIntoItems>
              </soap:Body>
            </soap:Envelope>";

    System.Net.HttpWebRequest req = (System.Net.HttpWebRequest)System.Net.WebRequest.Create(Url);
    req.Headers.Add("SOAPAction", "\"http://schemas.microsoft.com/sharepoint/soap/CopyIntoItems\"");
    req.ContentType = "text/xml;charset=\"utf-8\"";
    req.Accept = "text/xml";
    req.Method = "POST";
    //req.Credentials = System.Net.CredentialCache.DefaultCredentials;
    req.Credentials = new System.Net.NetworkCredential("myUserName", "myPassword", "Domain");

    using (System.IO.Stream stm = req.GetRequestStream())
    {
        soapStr = string.Format(soapStr, "testFile.png", Convert.ToBase64String(bytes));
        using (System.IO.StreamWriter stmw = new System.IO.StreamWriter(stm))
        {
            stmw.Write(soapStr);
        }
    } 
```

您可能对前两行最感兴趣，它们只是将文件加载到字节数组中，这一行：

```
soapStr = string.Format(soapStr, "testFile.png", Convert.ToBase64String(bytes)); 
```

该字节数组被转换为 base64 字符串并插入到 SOAP 请求中。祝你好运！

# java-me - 是否可以在 s40 上自定义倒带 mp3 X 秒？

> ID：12180944
> 
> 赞同：0
> 
> 时间：2012-08-29T15:01:49.210
> 
> 标签：java-me, mp3, midp

我一直在尝试找出是否可以自定义倒带 X mp3 秒，但没有任何运气。

我想在我的播放器中实现的附加功能是从“xx:xx”（指定时间）播放 mp3。也找不到任何描述该内容的文档。

我的播放器使用 Manager/Player 类，MIDP 2+

请帮忙

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:10:11.037

这种方法使用[`getMediaTime`](http://java.sun.com/javame/reference/apis/jsr118/javax/microedition/media/Player.html#getMediaTime%28%29)and[`setMediaTime`](http://java.sun.com/javame/reference/apis/jsr118/javax/microedition/media/Player.html#setMediaTime%28long%29)怎么样？

```
private void rewind(Player player, int seconds)
    throws MediaException 
{
    long now = player.getMediaTime();
    long before = now - (1000 * seconds);

    if (before > 0) {
        player.setMediaTime(before);
    }
} 
```

# javascript - jQuery UI：更改按钮文本会扭曲按钮大小

> ID：12180945
> 
> 赞同：0
> 
> 时间：2012-08-29T15:01:48.937
> 
> 标签：javascript, jquery, jquery-ui

我在表单中有一个按钮（使用 jQuery UI 进行样式设置），并且正在使用 JavaScript 动态更改文本。出于某种原因，更改文本会使按钮大小缩小到不寻常的大小。我能做些什么来解决这个问题？

这是问题的图片：

* * *

![不同的按钮大小](../Images/86136bddeb2f21a8b3f6ca20a3606878.png)

* * *

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T15:07:02.027

您可能以错误的方式更改按钮的文本。例如，如果您只是这样做，`$('#button').text('Test')`或者`$('#button').html('Test')`您将覆盖 jQuery 为样式目的而发出的 span 元素。

尝试这个：

```
$('#button').find('span').text('Test'); 
```

**编辑**：

我刚刚找到了一种更清洁的方法来做到这一点：

```
$('#button').button('option', 'label', 'Test'); 
```

# actionscript-3 - 带 alpha 的 AS3 BitmapData CopyPixels

> ID：12180947
> 
> 赞同：1
> 
> 时间：2012-08-29T15:01:55.037
> 
> 标签：actionscript-3, rendering, bitmapdata

我正在尝试以 0.5 的透明度将位图的像素复制到 BitmapData 中，但我似乎在谷歌或这里的任何地方都找不到对此的任何引用！

我有我的标准复制像素代码

`_bitmapData.copyPixels(_bitmaps.vault[BitmapNames.BITMAPNAME], SCREENRECT, _drawPoint, null, null, true);`

我可以看到我传递的第一个空值是一个标有 BitmapData 的值，`alphaBitmapData:BitmapData`所以我假设它与此有关，但我无法解决！

任何帮助将不胜感激，干杯！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T15:30:09.733

在[此链接](http://www.designswan.com/archives/the-function-of-mergealpha-in-copypixels.html)之后，您将找到有关变量的一些解释。

简而言之，当您将最后一个参数 (mergeAlpha:Boolean) 设置为 true 时，该函数将在复制像素时考虑第四个参数 (alphaBitmap:BitmapData)，从而有效地使用 alphaBitmap 的 alpha 来合并复制的像素。因此，您应该将用于第一个参数的相同位图传递给第四个参数，相应地设置第五个参数 (alphaPoint:Point) 并将最后一个参数设置为 true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:51:00.100

我已经接受了 Will Kru 的回答作为下面的答案（尽管只是基于理论）是用于将方法置于疯狂背后的代码！

`var alphaBitmap:BitmapData = new BitmapData(width, height, true, toARGB(0x000000, (.5 * 255)));`

`_bitmapData.copyPixels(_bitmaps.vault[BitmapNames.BITMAP], _drawRect, _drawPoint, alphaBitmap, null, true);`

[在这里找到alpha + RGB -> ARGB](https://stackoverflow.com/questions/1150046/alpha-rgb-argb)的 toARGB 函数？

# c++ - 所有三元组组合，一次 6 个值

> ID：12180953
> 
> 赞同：1
> 
> 时间：2012-08-29T15:02:15.137
> 
> 标签：c++, python, algorithm, combinatorics

~~我正在寻找一种算法，通过一次选择 6 个值来有效地生成数据集的所有三个值组合。~~

我正在寻找一种算法来有效地生成一小组 6 元组，这些 6 元组累积地表达数据集的所有可能的 3 元组组合。

例如，计算 6 张牌的扑克牌手牌，表示所有可能的 3 张牌组合。

例如，给定一个数据集：

```
['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'] 
```

6 个值的第一个“选择”可能是：

```
['a','b','c','d','e','f'] 
```

这涵盖了三值组合：

```
('a', 'b', 'c'), ('a', 'b', 'd'), ('a', 'b', 'e'), ('a', 'b', 'f'), ('a', 'c', 'd'),
('a', 'c', 'e'), ('a', 'c', 'f'), ('a', 'd', 'e'), ('a', 'd', 'f'), ('a', 'e', 'f'),
('b', 'c', 'd'), ('b', 'c', 'e'), ('b', 'c', 'f'), ('b', 'd', 'e'), ('b', 'd', 'f'),
('b', 'e', 'f'), ('c', 'd', 'e'), ('c', 'd', 'f'), ('c', 'e', 'f'), ('d', 'e', 'f') 
```

显然可以通过：

*   计算所有三元组组合
*   选择 6 个值
*   计算这 6 个值的所有三元组组合
*   从第一次计算中删除这些组合
*   重复直到所有的都被考虑在内

在这个例子中，有 2600 种可能的三元组组合`(26*25*24)/(3*2*1) == 2600`，使用上面的“蛮力”方法，所有三元组组合可以表示为大约 301 个 6 值组。

但是，感觉应该有一种更有效的方法来实现这一点。

我的首选语言是`python`，但我计划在`C++`.

* * *

**更新**

这是我的python代码“蛮力”它：

```
from itertools import combinations
data_set = list('abcdefghijklmnopqrstuvwxyz')

def calculate(data_set):
  all_triplets = list(frozenset(x) for x in itertools.combinations(data_set,3))
  data = set(all_triplets)
  sextuples = []
  while data:
    sxt = set()
    for item in data:
      nxt = sxt | item
      if len(nxt) > 6:
        continue
      sxt = nxt
      if len(nxt) == 6:
        break
    sextuples.append(list(sxt))
    covers = set(frozenset(x) for x in combinations(list(sxt),3))
    data = data - covers
    print "%r\t%s" % (list(sxt),len(data))
  print "Completed %s triplets in %s sextuples" % (len(all_triplets),len(sextuples),)

calculate(data_set) 
```

> 在 301 个六胞胎中完成 2600 个三胞胎

我正在寻找比这更具计算效率的东西。

* * *

**更新**

Senderle 提供[了一个有趣的解决方案](https://stackoverflow.com/a/12188268/267781)：将数据集分成对，然后生成所有可能的对的三元组。这绝对比我想出的任何东西都要好。

这是一个快速功能，用于检查是否覆盖了所有三元组并评估三元组覆盖的冗余：

```
from itertools import combinations
def check_coverage(data_set,sextuplets):
  all_triplets = dict.fromkeys(combinations(data_set,3),0)
  sxt_count = 0
  for sxt in sextuplets:
    sxt_count += 1
    for triplet in combinations(sxt,3):
      all_triplets[triplet] += 1
  total = len(all_triplets)
  biggest_overlap = overlap = nohits = onehits = morehits = 0
  for k,v in all_triplets.iteritems():
    if v == 0:
      nohits += 1
    elif v == 1:
      onehits += 1
    else:
      morehits += 1
      overlap += v - 1
    if v > biggest_overlap:
      biggest_overlap = v
  print "All Triplets in dataset: %6d" % (total,)
  print "Total triplets from sxt: %6d" % (total + overlap,)
  print "Number of sextuples:     %6d\n" % (sxt_count,)
  print "Missed  %6d of %6d: %6.1f%%" % (nohits,total,100.0*nohits/total)
  print "HitOnce %6d of %6d: %6.1f%%" % (onehits,total,100.0*onehits/total)
  print "HitMore %6d of %6d: %6.1f%%" % (morehits,total,100.0*morehits/total)
  print "Overlap %6d of %6d: %6.1f%%" % (overlap,total,100.0*overlap/total)
  print "Biggest Overlap: %3d" % (biggest_overlap,) 
```

使用 Senderle 的`sextuplets`生成器，我很着迷地观察到重复的三元组是本地化的，并且随着数据集大小的增加，重复按比例变得更加本地化并且峰值重复更大。

```
>>> check_coverage（范围（26），sextuplets（范围（26）））
数据集中的所有三元组：2600
来自 sxt 的三胞胎总数：5720
六倍数：286

错过 2600 次中的 0 次：0.0%
HitOnce 2288 的 2600：88.0%
HitMore 312 of 2600: 12.0%
2600 的重叠 3120：120.0%
最大重叠：11

>>> check_coverage（范围（40），sextuplets（范围（40）））
数据集中的所有三元组：9880
来自 sxt 的三胞胎总数：22800
六倍数：1140

错过 9880 次中的 0 次：0.0%
9880 中的 HitOnce 9120：92.3%
HitMore 760 of 9880: 7.7%
重叠 12920 与 9880：130.8%
最大重叠：18

>>> check_coverage（范围（80），sextuplets（范围（80）））
数据集中的所有三元组：82160
来自 sxt 的三胞胎总数：197600
六倍数：9880

错过 82160 次中的 0 次：0.0%
82160 中的 HitOnce 79040：96.2%
点击更多 82160 中的 3120：3.8%
82160 的重叠 115440：140.5%
最大重叠：38

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T00:19:08.830

我相信以下会产生正确的结果。它依赖于直觉，即要生成所有必要的六元组，所需要的只是生成任意项目*对*的所有可能组合。这将值很好地“混合”在一起，以表示所有可能的三元组。

有轻微的皱纹。对于奇数个项目，一对根本就不是一对，因此您无法从中生成六元组，但仍需要表示该值。这做了一些体操来回避这个问题。可能有更好的方法，但我不确定它是什么。

```
from itertools import izip_longest, islice, combinations

def sextuplets(seq, _fillvalue=object()):
    if len(seq) < 6:
        yield [tuple(seq)]
        return
    it = iter(seq)
    pairs = izip_longest(it, it, fillvalue=_fillvalue)
    sextuplets = (a + b + c for a, b, c in combinations(pairs, 3))
    for st in sextuplets:
        if st[-1] == _fillvalue:
            # replace fill value with valid item not in sextuplet
            # while maintaining original order
            for i, (x, y) in enumerate(zip(st, seq)):
                if x != y:
                    st = st[0:i] + (y,) + st[i:-1]
                    break
        yield st 
```

我在长度为 10 到 80 的项目序列上对其进行了测试，它在所有情况下都生成了正确的结果。我没有证据表明这将为所有序列提供正确的结果。我也没有证据证明这是一组最小的六胞胎。但我很想听听任何一个证据，如果有人能想出一个。

```
>>> def gen_triplets_from_sextuplets(st):
...     triplets = [combinations(s, 3) for s in st]
...     return set(t for trip in triplets for t in trip)
... 
>>> test_items = [xrange(n) for n in range(10, 80)]
>>> triplets = [set(combinations(i, 3)) for i in test_items]
>>> st_triplets = [gen_triplets_from_sextuplets(sextuplets(i)) 
                   for i in test_items]
>>> all(t == s for t, s in zip(triplets, st_triplets))
True 
```

虽然我已经说过了，但我还是要再次指出，这是一种实际生成三元组的低效方式，因为它会产生重复项。

```
>>> def gen_triplet_list_from_sextuplets(st):
...     triplets = [combinations(s, 3) for s in st]
...     return list(t for trip in triplets for t in trip)
... 
>>> tlist = gen_triplet_list_from_sextuplets(sextuplets(range(10)))
>>> len(tlist)
200
>>> len(set(tlist))
120
>>> tlist = gen_triplet_list_from_sextuplets(sextuplets(range(80)))
>>> len(tlist)
197600
>>> len(set(tlist))
82160 
```

事实上，虽然理论上你应该得到加速......

```
>>> len(list(sextuplets(range(80))))
9880 
```

...`itertools.combinations`仍然优于`sextuplets`小序列：

```
>>> %timeit list(sextuplets(range(20)))
10000 loops, best of 3: 68.4 us per loop
>>> %timeit list(combinations(range(20), 3))
10000 loops, best of 3: 55.1 us per loop 
```

`sextuplets`对于中等规模的序列，它仍然具有竞争力：

```
>>> %timeit list(sextuplets(range(200)))
10 loops, best of 3: 96.6 ms per loop
>>> %timeit list(combinations(range(200), 3))
10 loops, best of 3: 167 ms per loop 
```

除非您正在处理非常大的序列，否则我不确定这是否值得。（不过，这是一个有趣的问题。）

# mercurial - 破坏 Mercurial 文件“链接”？

> ID：12180955
> 
> 赞同：1
> 
> 时间：2012-08-29T15:02:16.040
> 
> 标签：mercurial

我们似乎搞砸了一些 HG 配置。

合并时，我们会看到其中一些条目：

```
warning: detected divergent renames of core/src/main/java/x/y/z/MyFile.java to:
 core/src/main/java/x/y/z/NewFileA.java
 core/src/main/java/x/y/z/NewFileB.java 
```

MyFile 不应链接到“新文件”。你怎么能打破这个链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T15:45:02.130

事后您不能断开链接。该链接是在您（很可能）创建时创建的

```
$ hg rename MyFile.java NewFileA.java 
```

在一个分支中，有人做了

```
$ hg rename MyFile.java NewFileB.java 
```

在另一个。合并两个分支时，您最终会得到`NewFileA.java`和`NewFileB.java`。有些人可能认为这是冲突，因此发出警告。

你也有可能做到了

```
$ hg copy MyFile.java NewFileA.java
$ hg copy MyFile.java NewFileB.java 
```

并且是故意这样做的。在这种情况下，没有冲突，不需要警告。Mercurial 无法在内部区分这两种情况，因为`hg rename X Y`与 相同`hg copy X Y; hg remove X`。有关真正作用的信息，请参阅[我的其他答案。](https://stackoverflow.com/a/8531968/110204)`hg copy`

所以，别担心，什么都没有。合并后，您将不会再次看到警告 - 仅当您与`MyFile.java`仍然存在的分支合并时才会出现警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-02T22:19:12.347

除非有一些我不知道的负面影响，否则您*可以*通过删除或忘记无意复制目标文件、提交该文件，然后重新添加文件（具有相同内容）来中断链接。对原始副本源的更改不会合并到重新添加的文件中。

在 Mercurial 3.7.2 中，我能够重现*后续*合并（不仅仅是第一次合并），将更改应用于复制目标，这与文档相反，尽管我没有进一步深入研究。这里我指的是合并*到*提交副本的分支，而不是另一个方向。

# sql - 左连接的锂

> ID：12180956
> 
> 赞同：1
> 
> 时间：2012-08-29T15:02:16.933
> 
> 标签：sql, lithium

我是新来的`Lithium`。我需要做一个左连接。这就是`query`我需要的。

```
SELECT `title`,`body`,`user_id`,`users`.`username`,`users`.`id` 
FROM `posts` LEFT JOIN `users` 
        ON `user_id` = `users`.`id` 
```

我尝试做这样的事情。

```
 $conditions['user_id'] = $this->data['user_id'];
                $posts = Post::all(array(
                  'conditions' => $conditions,
                  'fields' => array('title','body','username'),
                  'join' => array('source' => 'posts', 
                  'type' => 'LEFT',
                  'constraint' => array('post.user_id' => 'Users.id')), 
                     ))->data(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:56:59.737

这里有一个很棒的教程（以博客为例）[，](http://nitschinger.at/Introducing-Relationships-in-Lithium)它解释了在锂中使用**关系**`JOINS`，关系使使用关系数据变得更简单。

您还可以[查看](http://lithify.me/docs/manual/working-with-data/relationships.wiki)官方文档以及此答案：[如何使用锂模型执行连接？](https://stackoverflow.com/questions/9391062/how-do-i-perform-joins-with-lithium-models)

一旦你在你的**模型**上设置了你的**关系**，你可以简单地做你的：**`JOINS`**

 **```
$posts = Posts::find('all', array(
    'with' => 'Users'
)); 
```

锂中有几种不同类型的关系，它们大致对应于不同类型的`JOINS`...

*   **hasOne**：当前对象链接到另一种类型的单个对象
*   **hasMany**：当前对象链接到许多其他类型的对象
*   **belongsTo**：当前对象被拥有并标记为与另一个对象相关**

# android - Android 上的 RandomAccessFile

> ID：12180963
> 
> 赞同：3
> 
> 时间：2012-08-29T15:02:33.617
> 
> 标签：android

我在 android 手机上有一个文件，我想安全地擦除它。

我读[了这个](https://stackoverflow.com/a/4448994/1008256)。它提到`This is especially true on mobile devices containing flash, which has wear-leveling to prolong its life and isn't guaranteed to overwrite the same block internally when you overwrite a block on the filesystem.`

那么，如果我想[在](https://stackoverflow.com/a/858553/1008256).Would 上使用该代码，它会在 Android 手机上安全擦除吗？或者当我`RandomAccessFile`用来将数据写入文件时，它会在新块而不是原始块上？

是否完全 100% 不可能知道确切的块指针`android`？

或者我必须递归地创建一个文件，用随机数据写入，直到存储空间达到最大值。然后我尝试编辑我想删除的文件。当我重写内容并删除它时，闪存将被强制使用原始块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:23:58.617

尝试阅读有关您提到的代码中使用的对象和方法的文档[这](https://stackoverflow.com/questions/858036/how-to-securely-delete-files-in-java/858553#858553)一点，您在用于保存文件的真实块上写的没有任何要点，并注意文件可以写成非顺序块，我想我的朋友告诉我关于文章讨论这个问题，他们使用 C++ 解决了它。

# php - .htaccess 允许子目录

> ID：12180965
> 
> 赞同：2
> 
> 时间：2012-08-29T15:02:35.707
> 
> 标签：php, .htaccess, mod-rewrite

这是我的 .htaccess 文件：

```
Options +FollowSymLinks  
RewriteEngine On  

RewriteCond %{SCRIPT_FILENAME} !-d  
RewriteCond %{SCRIPT_FILENAME} !-f  

RewriteRule ^.*$ ./index.php 
```

这是我的文件夹结构

```
testsite/index.php
testsite/css/style.css
testsite/.htaccess 
```

问题：每当我`http://localhost/testsite/`去它加载css罚款。但是每当我转到`http://localhost/testsite/abc/test/`css 时，它都不会渲染，因为它试图从 testsite/abc/test/css 获取它。

我宁愿不使用每个文件的完整网址，或者必须动态测试层次结构级别然后转到 ../css/style.css

非常感谢先进，

缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:04:46.487

您可以将基本标签添加到每个页面的头部标签中：

```
<base href="/testsite/"> 
```

这样，浏览器将在该页面中的所有 css 前面加上`/testsite/`.

有关基本标签的更多信息，[请参阅文档](http://www.w3schools.com/tags/tag_base.asp)

# mdx - 在多维数据集中找不到 MDX 对象

> ID：12180968
> 
> 赞同：0
> 
> 时间：2012-08-29T15:02:40.050
> 
> 标签：mdx, olap-cube, mondrian

我有地区的地区。我正在尝试从我的多维数据集中获取数据。问题是：

1.  我将新区域添加到数据库中的区域。
2.  多维数据集中的数据每天只重新计算一次。所以在我添加新区域后，它不会出现在我的立方体中。
3.  当我尝试从多维数据集获取信息时，在重新计算多维数据集后，出现错误“MDX 对象'[ATD].[Area].&[6007d9a7-a137-4bba-9d72-0020ee5d2db0]' not found in cube”好的。

我该如何解决这个错误？

```
with member [Measures].[District]   
     member [Measures].[Area]       
     member [Measures].[AreaID]                         
select
                    {
                         [Measures].[District],
                         [Measures].[Area], 
                         [Measures].[AreaID]

                    }  on columns,
                    {
                          {{[MyDimension].[Area].&[6007d9a7-a137-4bba-9d72-0020ee5d2db0]}}
                    } on rows
                    from SomeCube 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:00:03.263

您应该将该`ignoreInvalidMembers`属性设置为 true。

[您可以在Mondrian 的配置页面](http://mondrian.pentaho.com/documentation/configuration.php)上找到更多信息。

# python - 使用 Pyro4 获取系统信息

> ID：12180969
> 
> 赞同：1
> 
> 时间：2012-08-29T15:02:44.647
> 
> 标签：python, pyro

我尝试在自动测试中使用 Pyro4，但现在我对 Pyro4 的某些功能感到困惑。是否存在通过 Pyro4 对象获取系统信息的方法。

在我的想法中，我暴露了一个可以获取系统信息的pyro对象，远程机器可以使用这个对象来显示系统信息。但是在我的代码中，远程机器总是显示服务器信息。我想我误解或误用了 Pyro4

抱歉这个愚蠢的问题，我是 Pyro4 的新手。以下是我的示例代码。服务器公开 pyro 对象

```
# Server.py
#! /usr/bin/env python

import Pyro4
import os

class Ex(object):
    def run(self):
        print os.uname()

if __name__ == "__main__":
    daemon = Pyro4.Daemon()
    ns     = Pyro4.locateNS()
    uri = daemon.register(Ex())
    ns.register("ex", uri)
    print uri
    daemon.requestLoop() 
```

和使用 Pyro 对象的客户端

```
# Remote
#! /usr/bin/env python

import Pyro4
if __name__ == "__main__":
    uri = raw_input("input the uri> ")
    fn = Pyro4.Proxy(uri)
    fn.run() 
```

ps 我知道我可以在客户端获取操作系统信息，但我想使用 Pyro 对象来获取信息，而不是客户端自己执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T02:36:35.027

我得到了答案！

只需使用 Pyro4.utils.flame。该模块可以提供在远程机器上使用模块或功能的能力。

以下是示例代码：

远程机器

```
python -Wignore -m Pyro4.utils.flameserver --host <yourIP> --port 9999 
```

主人

```
#! /usr/bin/env python

import Pyro4.utils.flame

if __name__ == "__main__":
    flame = Pyro4.utils.flame.connect("192.168.16.29:64024")
    os = flame.module("os")
    print os.listdir('.') 
```

# c# - 单击按钮后的回发在用户控件中第一次没有反应

> ID：12180976
> 
> 赞同：0
> 
> 时间：2012-08-29T15:03:03.500
> 
> 标签：c#, asp.net

我有一个带有 UserControls 的 web 应用程序。当我单击网格中的菜单项或选择按钮时，我发现第一次没有反应。当我第二次单击时，按钮后面的事件将触发。

我错了什么？我给组件一个唯一的 ID，事件在 cs 文件中。

我希望有一个人可以帮助我。

谢谢。

* * *

问题出在以下两个示例中：

```
 <asp:Menu ID="TabMenu" Width="100%" Height="25px" runat="server"         
                    Orientation="Horizontal" CssClass="TabPages" 
                    StaticEnableDefaultPopOutImage="False" 
                     AutoPostBack="true"  
                     OnMenuItemClick="DoMenuItemClick" > 
                <Items> 
                    <asp:MenuItem Text="Domains" Value="0"></asp:MenuItem> 
```

在这种情况下，当您第一次单击菜单项时，似乎只重新加载了页面。当第二次点击时，事件真的会触发。在此示例中，当您单击菜单项时，将显示正确的视图。

```
 <asp:GridView ID="gvwSelection" runat="server" 
        AllowPaging="True" 
        SelectedIndex="1"                 
        AutoGenerateSelectButton="True"
        OnSelectedIndexChanged="gvwSelectie_SelectedIndexChanged"
        OnSelectedIndexChanging="gvwSelectie_SelectedIndexChanging" >
        <PagerStyle ForeColor="#00257e" HorizontalAlign="Right" 
            BackColor="#FFFFFF"></PagerStyle>

    </asp:GridView> 
```

示例 2：第一次单击选择按钮时，您触摸的行未被选中。在第一次之后一切正常。

ID 有一个固定的名称。AutoPostBack 设置为 True。有一个事件链接。网格具有 DataBinded。有 site.master 和 default.aspx，并且 UserControls 被放置在占位符中。

我希望有一个人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:52:45.437

我发现并解决了这个问题。

我有一个动态的 UserControl FAddress 并且每次他都戴着另一个控件。所以我在方法中添加了以下行：**FAddress.ID = "UserControl1";**

问题是，控件每次都在加载。通过给这个动态控件一个固定的ID，这个项目就解决了。

```
private void LoadPage(string APageName)
{
    FAddress = null;
    PlaceholderAddressTemplate.Controls.Clear();

    if (!string.IsNullOrEmpty(APageName))
    {
        FAddress = (UserControl)LoadControl(string.Format("~/UserControls/{0}.ascx",
                    APageName));

        if (FAddress != null)
        {
            FAddress.ID = "UserControl1";

            PlaceholderAddressTemplate.Controls.Add(FAddress);
            ShowOrHideComponents();
            FAddress.Focus();
        }
        else
            ShowOrHideComponents();
    }
    else
    ShowOrHideComponents();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T15:09:43.840

确保按钮后面的 autopostback 属性设置为 true，这可能会解决您的问题。

# c# - C# 模型到 Javascript 对象 - 使用 knockout.js

> ID：12180980
> 
> 赞同：2
> 
> 时间：2012-08-29T15:03:17.180
> 
> 标签：c#, javascript, asp.net-mvc, serialization, knockout.js

我正在尝试使用 knockout.js 在服务器端属性上执行添加/删除操作。这是我的 C# 模型的样子：

```
public class MyModel
{
    [Key]
    public int MyModelId { get; set; }

    [Required]
    public string Name { get; set; }

    private IEnumerable<string> _Items;

    [Required]
    public IEnumerable<string> Items
    {
        get { return _Items; }
        set { _Items = value; }
    }

    //Used to store in SQL database
    public string ItemsSQL
    {
        get { return _Items != null ? String.Join(";", _Items) : null; }
        set { _Items = value != null ? value.Split(';').ToList() : null; }
    }
} 
```

这是我的 ViewModel 的样子：

```
@model MyProject.Models.MyModel

<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/knockout-2.1.0.js")" type="text/javascript"></script>
<script type="text/javascript">
    @{
        var initialData = new JavaScriptSerializer().Serialize(Model);
    }
    var viewModel = {
        MyModel: ko.observable(@Html.Raw(initialData)),

        //Commented out on purpose
        //Items: ko.observableArray(this.MyModel.Items),

        addItem: function() { 
            this.MyModel.Items.push("");
        },

        removeItem: function(item) {
            this.MyModel.Items.remove(item);
        },
    };

    alert(JSON.stringify(@Html.Raw(initialData)));

    $(document).ready(function() {ko.applyBindings(viewModel); });
</script> 
```

这是我的观点：

```
Name: <span data-bind="text: MyModel().Name"></span>
<br />
Items: <button data-bind="click: addItem">Add Item</button>

<table>
    <tbody data-bind="template: { name: 'itemTemplate', foreach: MyModel().Items}"></tbody>
</table>

<script type="text/html" id="itemTemplate">
    <tr>
        <td>
            <input data-bind="value: $data" />
            <a href="#" data-bind="click: function() { 
                                   viewModel.removeItem($data) }">Remove Item</a>
        </td>
    </tr>
</script> 
```

这与显示在文本框中`MyModel.Name`的每个项目一起`MyModel.Items`显示。我的问题是当我尝试实例化时`Items`，它会吐出错误消息： `Unable to get value of the property 'Items': object is null or undefined.` 这也会影响我的添加和删除操作。

**更新**

当我这样做时`alert(JSON.stringify(this.MyModel));`，它显示 MyModel 未定义，但是当我这样做时，`alert(JSON.stringify(@Html.Raw(initialData)));`我的模型以 JSON 格式显示。所以，我的模型正确序列化，但淘汰赛无法从 C# 变量创建可观察的属性？我不知道。剃须刀是一种痛苦。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T15:46:33.353

ViewModel 应按如下方式构造：

```
@{
    var initialData = new JavaScriptSerializer().Serialize(Model);
}
var data = @Html.Raw(initialData);
function ViewModel(data) {
    var self = this;
    self.Name = ko.observable(data.Name);
    self.Items = ko.observableArray(data.Items);
    self.addItem = function() { self.Items.push(""); };
    self.removeItem = function(data) { self.Items.remove(data); }
}
$(document).ready(function() {ko.applyBindings(new ViewModel(data)); }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T15:46:08.050

我认为这`initialData`是一个 C# 变量，但您正试图通过 javascript 来提醒它。

这有点令人困惑，因为很难说出剃须刀是如何处理内脏`var` 的`@{ }`

如果要对其进行字符串化，则必须先将其放入 javascript 变量中。就像是：

```
var jsInitialData = @{Html.Raw(initialData)} 
```

Razor 在 javascript 块中有点麻烦，所以它不能完全工作，但我怀疑你需要一些类似的东西。

# google-apps-script - 删除的脚本继续运行

> ID：12180981
> 
> 赞同：0
> 
> 时间：2012-08-29T15:03:19.177
> 
> 标签：google-apps-script

我创建了一个应该向我发送电子邮件的 google 脚本，但它现在正在不断地向我发送电子邮件。

脚本中有一个无限循环，我无法阻止它。我试图删除脚本，这不起作用。我试图删除包含脚本的电子表格，但这不起作用。

任何人都可以帮忙吗？有没有办法在某处查看正在运行的脚本？（并阻止他们）

亲切的问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:08:10.133

您的脚本是如何被调用的——通过脚本编辑器还是通过触发器？无论哪种情况，脚本都会在大约 5 分钟后超时。如果它是通过触发器运行的，那么删除触发器应该会阻止邮件的到来

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:29:48.233

在向我发送了 1500 封电子邮件后，该脚本最终停止了。我认为这对我的业务来说是某种每日限制。

我从中学到的教训是：始终检查您的循环，永远不要使用您自己的电子邮件地址 =)

# java - 格式化没有字符串的日期对象？

> ID：12180984
> 
> 赞同：-2
> 
> 时间：2012-08-29T15:03:23.450
> 
> 标签：java

我有一个日期对象（1999 年 12 月 31 日星期五 00:00:00 CET），我只想显示 31-12-1999。

而且我不想使用字符串对象来显示我需要用日期对象显示的信息。

你有解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T15:06:18.733

使用[java.text.SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)。

```
SimpleDateFormat dateFormatter = new SimpleDateFormat("dd-MM-yyyy");
String formattedDate = dateFormatter.format(dateInstance); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:05:26.270

您可以将日期作为文本直接写入可以写入 IO 设备的 ByteBuffer。例如，这可用于加快日志记录。

使用时区转换日期的逻辑非常复杂，但是我建议您使用标准库或 JodaTime 作为日期，因为它不值得自己编写。

出于这个原因，我直接将时间写入 ByteBuffer 并使用 SimpleDateFormat 为日期生成缓存字符串（因为它每天只更改一次）

如果要显示到 GUI，则必须使用字符串，因为 GUI 使用的是字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T15:07:49.887

您的意思是您需要从 Date 对象中删除时间信息吗？你可以做这样的事情。

```
Date d; // this is your date 
Date dateWithoutTime = new Date(d.getYear(), d.getMonth(), d.getDay()); 
```

# c# - 如何创建一个可以拖动到资源管理器或Skype来保存/发送文件的图标？

> ID：12180985
> 
> 赞同：0
> 
> 时间：2012-08-29T15:03:23.943
> 
> 标签：c#, drag-and-drop, skype

我正在开发一个生成输出的工具，我希望用户能够方便地发送到 Skype 或其他正在运行的应用程序，而不是在需要时简单地保存它。

当我使用 Acorn 的 RiscPC 时，“另存为”功能的推荐样式是一个带有代表文件的图标的小对话框，您可以将其拖到文件夹进行保存，或者拖到另一个应用程序以将其发送到该应用程序而不是保存它。

现在，用户需要保存文件，然后在 Windows 资源管理器中找到该文件并将其从那里拖到 Skype。当然我可以很容易地添加一个“在文件夹中显示”图标，但直接将它拖到 Skype 会更简洁。

任何人都知道如何做到这一点，或者如果它已经完成，我可以看看？

我应该强调，我并不是专门谈论将东西拖到 Skype，我可以查看 Skype API，我说的是一般模拟拖动，就好像它是从资源管理器中拖动的文件一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:33:19.480

如果您使用的是 WinForms，[这里](http://www.codeproject.com/Articles/14059/Drag-and-drop-cut-copy-and-paste-files-with-Window)有一篇 CodeProject 文章，向您展示了在资源管理器/您的应用程序之间进行双向拖放。[在此处](https://stackoverflow.com/questions/3040415/drag-and-drop-to-desktop-explorer)查找WPF。

希望这可以帮助！

# vb.net - 在单个 Web 服务中拥有更多 WebMethod 的优点和缺点是什么？

> ID：12180987
> 
> 赞同：0
> 
> 时间：2012-08-29T15:03:25.533
> 
> 标签：vb.net, wcf, web-services, webmethod

在单个 Web 服务中拥有更多 WebMethod 的优点和缺点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:37:42.763

如果您将多个 Web 方法添加到单个 Web 服务类，它们都将通过单个 URL 得到支持（这可以使部署和配置更加简单）。在客户端，当您创建 Web 引用时，它将为每个 Web 服务创建一个单独的类，而不是每个类中的单独方法，每个 Web 方法一个。因此，正如您可以想象的那样，当您有一个具有多个方法的类而不是每个只包含一个方法的多个类时，在客户端代码中使用它也更容易。这可能成为依赖注入 (DI) 的噩梦（您正在注入依赖项，对吗？嗯？）。因此，经验法则应该是尝试将所有相关方法组合到一个 Web 服务中，并将 Web 服务的数量保持在合理的范围内。

# google-app-engine - GAE 迁移到 HRD。有可能回去吗？

> ID：12180990
> 
> 赞同：2
> 
> 时间：2012-08-29T15:03:37.397
> 
> 标签：google-app-engine, migration, google-cloud-datastore

我使用迁移工具将项目迁移到 HRD。

这似乎有各种副作用。有些可能与未锚定的实体或查询有关。该应用程序不会发送它应该发送的通知电子邮件，这可能与需要重新启用帐单和 Google 等待 7 天才能应用邮件配额有关。

无论如何，我想知道是否可以回滚到主/从？禁用或删除 HRD 应用程序并重新启用旧应用程序？

作为我争取时间的一种方式，请为这次迁移做好更好的准备，然后再试一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:43:05.090

恐怕您无法返回，因为 Master/Slave Datatsore[自 April 4, 2012 起已弃用](https://developers.google.com/appengine/docs/python/datastore/usingmasterslave)。您可以联系支持人员，但我建议您花一些时间尝试在 HRD 上修复它。

# performance - Firefox 中的渐变性能不佳

> ID：12180992
> 
> 赞同：1
> 
> 时间：2012-08-29T15:03:45.723
> 
> 标签：performance, firefox, css, gradient

我目前正在研究一个 css3 渐变背景，它在 Chrome 上运行良好，但在 Firefox 上却很糟糕。我注意到这是由于`background-size`我的CSS中的属性。有什么方法可以制作出完全相同的背景，但使用不同的方法？

```
body {
    background: -webkit-linear-gradient(45deg,  #cccccc 0%, #cccccc 25%, #bbbbbb 25%, #bbbbbb 50%, #cccccc 50%, #cccccc 75%, #bbbbbb 75%);
    background:    -moz-linear-gradient(45deg,  #cccccc 0%, #cccccc 25%, #bbbbbb 25%, #bbbbbb 50%, #cccccc 50%, #cccccc 75%, #bbbbbb 75%);
    background-size: 30px 30px:
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:50:38.037

[错误657603](https://bugzilla.mozilla.org/show_bug.cgi?id=657603)

原来这是 Mozilla firefox 上的一个错误……正如 Jonah Bishop 所发布的那样，在背景上使用低分辨率渐变图案时性能不佳

# matlab - 如何解释以下代码？

> ID：12180995
> 
> 赞同：-3
> 
> 时间：2012-08-29T15:04:01.347
> 
> 标签：matlab

你能解释一下下面的代码吗？当大小 newRowB (1,12) 时，这段代码不能工作？

```
~any(diff([0;find(newRowB);12+1])>3)); 
```

谢谢之前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:08:15.317

`diff`计算给定输入向量的连续项之间的差. 和

`find`定位数组 X 中非零的元素

# ruby-on-rails-3.1 - Haml 的 Rails 助手

> ID：12180996
> 
> 赞同：2
> 
> 时间：2012-08-29T15:04:05.353
> 
> 标签：ruby-on-rails-3.1, haml

我有一些 HAML 代码在 10 个视图中重复出现，并希望将其放入某种帮助程序中。在这里进行搜索产生了一些有趣的结果，但最终没有答案，所以：

在`application_helper.rb`我有这个：

```
def pagination_helper(object)
  haml_tag :div, :class => 'apple_pagination page_info' do
    page_entries_info @book_formats
    paginate @book_formats
  end
end 
```

在视图模板中我有这个：

```
- pagination_helper(@book_formats) 
```

如果我尝试调用它`=`来输出一些东西，我会得到一个错误。

以上不会给我一个错误，但它也不会调用这些方法。我得到空的div。

最终我想重复的代码是这样的：

```
.apple_pagination.page_info
  = page_entries_info @book_formats
  = paginate @book_formats 
```

代码将是相同的，除了`object`会改变，我从视图模板发送。例如`@book_formats`将更改为`@dvds`等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T18:21:56.177

传递给的块`haml_tag`不会自动添加到输出中。您需要使用[`haml_concat`](http://haml.info/docs/yardoc/Haml/Helpers.html#haml_concat-instance_method)：

```
def pagination_helper(object)
    haml_tag :div, :class => 'apple_pagination page_info' do
        haml_concat(page_entries_info @book_formats)
        haml_concat(paginate @book_formats)
    end
end 
```

# java - 如何在 web 方法中返回两个参数？

> ID：12180999
> 
> 赞同：-1
> 
> 时间：2012-08-29T15:04:15.513
> 
> 标签：java, return-value

如何在web方法中返回两个参数。？

我已经尝试过这些东西，但下面的代码只返回一个参数。

**网络方法**

```
public class GetTMSMargin 
{
public String GetTMSMargin(String fd,String td)
{
    return fd;
}  
  } 
```

任何人都可以修改此代码并让我清楚吗？

提前致谢！..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:39:10.343

你可以像这样发送数组

```
public class GetTMSMargin 
{
    public String[] GetTMSMargin(String fd,String td)
    {
       //your code
       String array[] = {fd, td};
       return array;
    }  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T15:11:21.803

您可以返回一个数组、集合、映射......以及许多其他可能包含任意数量结果的东西（我更喜欢“结果”而不是“参数”作为返回变量的指示）。
顺便说一句：如果你在这里考虑 web 服务，那么你需要序列化（JSON 或类似的东西）你的数组/集合/映射......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T15:14:01.093

您可能需要阅读更多有关 Java 的内容。在 Java 中，一个函数只能返回**一个**值。如果您需要返回多个值，那么您将需要返回一个`Array`值（如果它们都是相同的类型，则`List`出于这些目的将一个等视为一个数组）或将`Object`这些值作为其属性的一个，例如：

```
class ReturnMultipleValues {

    /**
     * Returns an object containing the two Strings passed.
     */
    public ComplexReturnValue getComplexReturnValue(String arg1, String arg2) {
        ComplexReturnValue value = new ComplexReturnValue(arg1, arg2);
        return value;
    }

    /**
     * Value type which contains 2 strings
     */
    public static class ComplexReturnValue {
        private String arg1;
        private String arg2;

        public ComplexReturnValue(String arg1, String arg2) {
            this.arg1 = arg1;
            this.arg2 = arg2;
        }

        public String getArg1() {
            return arg1;
        }
        public String getArg2() {
            return arg2;
        }
    }

    /**
     * Main method just runs a quick example
     */
    public static void main(String[] args) {
        ReturnMultipleValues rmv = new ReturnMultipleValues();
        ComplexReturnValue crv = rmv.getComplexReturnValue("Hello", "World");

        crv.getArg1(); // Returns "Hello"
        crv.getArg2(); // Returns "World"
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T15:11:46.030

如果你想返回两个值，我建议你使用 ArrayList，或者像 Lucifer 那样的表。

```
 public ArrayList <String> GetTMSMargin(String fd,String td)
    {
        ArrayList <String> theArray = new ArrayList <String>();
        theArray.add(fd);
        theArray.add(td);
        return theArray;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T15:07:27.797

实际上，在任何计算机语言中，您都不能从函数/方法返回多个参数。

您可以通过从函数/方法返回一个数组来实现它。在数组中您可以存储多个值，因此在返回值中您将获得多个值。

```
public String[] getMyValues ( String fd,String td )
{
      String [] returnValues = new String { fd, td };

     return returnValues;
} 
```

作为 android 代码，您还可以使用另一个名为`ArrayList`返回多个值的类。

然而，这只是返回多个值的技巧/逻辑，而不是完美的解决方案。