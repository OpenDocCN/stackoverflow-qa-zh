# StackOverflow 问答 10550000-10550999

# sqlite - 如果我们在 sqlite 数据库中使用“Select 8 而不是 Select *”会产生什么结果？

> ID：10550009
> 
> 赞同：0
> 
> 时间：2012-05-11T10:54:51.670
> 
> 标签：sqlite

如果我们使用`Select 8`而不是`Select *`在 sqlite 数据库中，结果会是什么？

为什么没有显示错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:59:42.763

不会显示错误，因为您没有做错任何事情。您只需返回值“8”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:51:40.570

如果你`Select 'Something'` 不知从何而来，SQL 只会返回“某事”。

# eventbrite - EventBrite API 方法

> ID：10550010
> 
> 赞同：1
> 
> 时间：2012-05-11T10:54:58.847
> 
> 标签：eventbrite

[我正在尝试将此 url 用于活动与会者信息](https://www.eventbrite.com/xml/event_list_attendees?app_key=value&id=3135062055)
我没有获得*与会者*的完整详细信息，但响应仅包含*与会者 ID*

```
<attendees>
   <attendee>
    <event_id>3135062055</event_id>
     <id>110210217</id>
</attendee>

<attendee>
<event_id>3135062055</event_id>
<id>110216615</id>
</attendee>
</attendees> 
```

但在文档中我可以看到完整的休息！
我需要为此添加哪些参数才能获得完整的与会者信息，并且
我想一次性获得所有与会者信息？

请帮助我实现上述目标。
提前致谢，

文卡特什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:45:16.543

如果您已授权[Eventbrite 的 API 文档](http://developer.eventbrite.com/)访问您的帐户，那么您的[用户身份验证凭据](http://developer.eventbrite.com/doc/authentication/)将自动添加到您使用文档的“立即尝试”功能发出的任何请求中。

如果您在请求中添加[user_key 或 Oauth2.0 access_token](http://developer.eventbrite.com/doc/authentication/)，那么您应该能够成功访问您的[与会者信息](http://developer.eventbrite.com/doc/events/event_list_attendees/)。

您的另一个选择是将您的活动配置为有一个[公开的与会者列表](http://www.eventbrite.com/t/how-to-show-attendee-list)。这将允许通过您共享的 API URL 获得在您的活动页面上公开可见的任何与会者信息（无需您添加您的私人身份验证令牌）。确保您保留将此功能用于与会者愿意披露此信息的活动。

# c++ - 从迭代器返回对象的引用

> ID：10550011
> 
> 赞同：18
> 
> 时间：2012-05-11T10:55:02.077
> 
> 标签：c++, reference, vector, null, iterator

我想从向量返回对象的引用，并且该对象位于迭代器对象中。我怎样才能做到这一点？

我尝试了以下方法：

```
Customer& CustomerDB::getCustomerById (const string& id) {
    vector<Customer>::iterator i;
    for (i = customerList.begin(); i != customerList.end() && !(i->getId() == id); ++i);

    if (i != customerList.end())
        return *i; // is this correct?
    else
        return 0; // getting error here, cant return 0 as reference they say
} 
```

代码中customerList是一个客户向量，getId函数返回客户的id。

是`*i`正确的吗？我怎样才能返回 0 或 null 作为参考？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-11T10:58:33.310

`return *i;`是正确的，但是您不能返回 0 或任何其他此类值。如果在向量中找不到客户，请考虑抛出异常。

返回对向量中元素的引用时也要小心。如果 vector 需要重新分配其内存并移动内容，则在 vector 中插入新元素会使您的引用无效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T11:01:08.710

没有“空”引用之类的东西：如果您的方法获得不在向量中的 id，它将无法返回任何有意义的值。正如@reko_t 指出的那样，当向量重新分配其内部时，即使是有效的引用也可能变得无效。

当您始终可以返回对将在一段时间内保持有效的现有对象的引用时，您应该只使用引用返回类型。在您的情况下，两者都不能保证。

# iphone - XCode 使用两个目标和类复制

> ID：10550018
> 
> 赞同：0
> 
> 时间：2012-05-11T10:55:34.310
> 
> 标签：iphone, objective-c, ios, xcode, cocoa

我对应用程序白色标签有一些问题。

我有两个目标 App1、App2，我有三个框架，CoreCustomFramework、App1Assets、App2Assets

我有两个类，Class1 和 Class2，2 是一个的克隆，其中包含一些仅在 App2Assets 中的导入。

Class1 和 Class2 共享相同的名称（应该无关紧要，因为两者都是 AppFrameworks 的私有，而不是 coreFramework）。

现在，App1 编译良好，但 App2 失败，并且仅在 12 个重复的类中的大约 4 个上失败。由于“类的重复接口定义......”。

```
In file included from /Users/ME/Dev/ProjectFolder/Modules/App2Assets/Classes/Table/TableViewController.m:

In file included from /Users/ME/Dev/ProjectFolder/Modules/CoreCustomFramework/Classes/Table/TableViewController+Private.h:9:

In file included from /Users/ME/Dev/ProjectFolder/Modules/App1Assets/Classes/Table/TableViewController.h:11: 
```

现在其他一些重复的类很好。所以我不知道为什么，我唯一能想到的是 PrivateHeaders 设置是扫描项目文件夹所以我应该尝试只扫描所需的模块文件夹。那么核心和特定的应用程序资产？

请在明信片上回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:06:04.640

您应该检查 class1 是否也与目标 2 一起编译。

在项目导航器中选择它的 .m 文件，打开实用程序并显示文件检查器，然后控制它的目标成员：它应该只是在 target1...

# tridion - 从 Razor TBB 访问页面模板元数据

> ID：10550023
> 
> 赞同：9
> 
> 时间：2012-05-11T10:55:55.680
> 
> 标签：tridion

有谁知道是否可以从 Razor TBB 中读取页面模板元数据？我正在实施一个使用 960 网格系统构建的设计，为了保持 CT 的可重复使用性，我希望能够执行以下操作：

```
<div class="@Page.Template.Metadata.content_grid">
</div> 
```

不幸的是，这会引发空引用异常。

我正在尝试的是可能的还是我需要编写一个自定义的 TBB 来将此信息添加到包中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T12:49:52.740

在前往亚历克斯的博客提问后，我看到他已经[为其他人回答了这个](http://www.codedweapon.com/2012/04/razor-mediator-4-tridion-version-1-2-released/)问题：

> 关于获取模板元数据......不幸的是，我还没有为模板本身创建一个包装器，现在公开的 @Template 只是 Tridion.ContentManager.CommunicationManagement.Template 之一，这意味着现在你必须获取模板淘汰老式的方式：
> 
> @{ Tridion.ContentManager.ContentManagement.Fields.ItemFields templateFields = new ContentManager.ContentManagement.Fields.ItemFields(Template.Metadata, Template.MetadataSchema); }
> 
> 不过，我现在已将此添加到我的待办事项列表中，因此您一定会看到一个方便的包装器，它允许您在 1.3 版中执行 @Template.MetaData.YourField。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T10:28:46.383

我能够使用以下代码为组件模板元数据获取此信息：

```
@foreach (var cp in ComponentPresentations) {
    @if (cp.Template.Metadata != null && cp.Template.Metadata["position"] != null){
        @Debug(string.Format("The Component Template position is {0}", cp.Template.Metadata["position"].InnerText))
        @if (cp.Template.Metadata["position"].InnerText.ToLower().Equals("main")){                              
            @cp.RenderComponentPresentation()
        }
    }
} 
```

因此，我认为您应该能够使用类似于以下内容的内容：

```
@if (Page.Template.Metadata != null && Page.Template.Metadata["content_grid"] != null){
    @Debug(string.Format("The content_grid value is {0}", Page.Template.Metadata["content_grid"].InnerText))
    <div class="@Page.Template.Metadata["content_grid"].InnerText">
    </div>
} 
```

请注意 .InnerText 而不是 .Value，因为 content_grid 以 xml 形式返回。在我的代码中，“位置”只是一个字符串。我想如果您使用分类法，这可能会有所不同。

谢谢，乔纳森

PS 我使用的是 Razor Mediator 1.2 版

# asp.net-mvc - Google Api OAuth2.0 和 Aspnet MVC 3

> ID：10550025
> 
> 赞同：5
> 
> 时间：2012-05-11T10:56:01.983
> 
> 标签：asp.net-mvc, google-api

对于在 ASP.Net MVC 3 或任何 .net Web 服务器应用程序中使用 Google API 的体面示例，我一定已经阅读了网络上可用的所有内容。

由于 google 强烈建议将其客户端库用于 OAuth 2.0，因此我花了一天的大部分时间阅读文档，寻找 .net Web 服务器应用程序的示例。

而且我发现了蹲下（除了一些关于 SO 和其他地方的未回答的问题）。

1.  [WebServer 应用程序的文档](https://developers.google.com/accounts/docs/OAuth2WebServer)
2.  [.net 客户端库的文档](http://code.google.com/p/google-api-dotnet-client/wiki/OAuth2)

我想要做的是允许我网站的经过身份验证的用户从谷歌导入联系人。即使用 OAuth2.0 访问谷歌联系人 api。

所以我的问题是：

1.  我是否应该在我的 Asp.Net MVC 3 应用程序中使用用于 OAuth2.0 的谷歌客户端库。
2.  有没有我可以使用的像样的样品。
3.  有人可以发布一个很好的样本。

# iphone - NSFetchedResultsControllerDelegate 不会触发 fetchedResultsController

> ID：10550026
> 
> 赞同：0
> 
> 时间：2012-05-11T10:56:04.680
> 
> 标签：iphone, objective-c, ios5

我有`UITableViewController`

```
@interface ListViewController : UITableViewController <NSFetchedResultsControllerDelegate>

...

@end 
```

但它不火`-(NSFetchedResultsController*)fetchedResultsController`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:57:44.790

```
@interface ListViewController : UITableViewController<NSFetchedResultsControllerDelegate> ... end 
```

评估代表

# c# - asp.net中的urlrewriting按钮单击

> ID：10550029
> 
> 赞同：1
> 
> 时间：2012-05-11T10:56:16.743
> 
> 标签：c#, asp.net, url-rewriting

大家好，我看过很多文章，`url rewriting`但我没有找到任何符合我要求的文章。假设我有两个页面`Default.aspx`，并且`Default1.aspx`..在初始加载时，我想将我的`Default.aspx`内容重写为类似的`urlrewrite\dummy.aspx`内容，并且在`Default.aspx`我单击此按钮时，我将有一个按钮，我将重定向到`Default1.aspx`我想将其重写为`urlrewrite\dummy1.aspx`

我只是发布示例重写，但如果有更好的重定向方法，请帮助我..

如果我有一些`20-50`页面，那么重写所有页面的最佳方法是什么

我的 global.asax 文件

```
<%@ Application Language="C#" %>
<%@ Import Namespace="System.Web" %>
<%@ Import Namespace="System.Web.Routing" %>
<script RunAt="server">

    void Application_Start(object sender, EventArgs e)
    {
        // Code that runs on application startup
        RegisterRoutes(System.Web.Routing.RouteTable.Routes);
    }
    public static void RegisterRoutes(RouteCollection routeCollection)
    {
        string root = Server.MapPath("~");
        System.IO.DirectoryInfo info = new System.IO.DirectoryInfo(root);
        System.IO.FileInfo[] files = info.GetFiles("*.aspx", System.IO.SearchOption.AllDirectories);

        foreach (System.IO.FileInfo fi in files)
        {
            string pageName = fi.FullName.Replace(root, "~/").Replace("\\", "/");
            routeCollection.MapPageRoute(fi.Name + "Route", fi.Name, pageName);
        }

        routeCollection.MapPageRoute("DummyRouteName1", "Dummy", "~/Default2.aspx");
    }

    void Application_End(object sender, EventArgs e)
    {
        //  Code that runs on application shutdown

    }

    void Application_Error(object sender, EventArgs e)
    {
        // Code that runs when an unhandled error occurs

    }

    void Session_Start(object sender, EventArgs e)
    {
        // Code that runs when a new session is started

    }

    void Session_End(object sender, EventArgs e)
    {
        // Code that runs when a session ends. 
        // Note: The Session_End event is raised only when the sessionstate mode
        // is set to InProc in the Web.config file. If session mode is set to StateServer 
        // or SQLServer, the event is not raised.

    }

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T11:04:48.750

您可以在应用程序启动时在 Global.asax 文件中添加路由：

```
protected void Application_Start(object sender, EventArgs e)
{
    RegisterRoutes(System.Web.Routing.RouteTable.Routes);
}

private void RegisterRoutes(RouteCollection routes)
{
    routes.MapPageRoute("DummyRouteName", "Dummy", "~/Default.aspx");
    ....
} 
```

用法：

```
Response.Redirect("~/Dummy"); 
```

在 url 你会看到：*(server)/Dummy*

**编辑：**

这是自动添加路由的方法：

```
// Get root directory
string root = Server.MapPath("~");
DirectoryInfo info = new DirectoryInfo(root);
// Get all aspx files
FileInfo[] files = info.GetFiles("*.aspx", SearchOption.AllDirectories);

foreach (FileInfo fi in files)
{
    // Get relative path
    string pageName = fi.FullName.Replace(root, "~/").Replace("\\", "/");
    // Add route
    routes.MapPageRoute(fi.Name + "Route", fi.Name.Replace(".aspx", ""), pageName);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:19:04.140

我假设您已经涵盖了重写部分，唯一的问题是回发，您可以通过设置表单操作将回发设置为“友好”URL，如下所示：

```
Page.Form.Action = Page.Request.RawUrl; 
```

# python - 要列出的python元组

> ID：10550030
> 
> 赞同：-6
> 
> 时间：2012-05-11T10:56:16.913
> 
> 标签：python, list

> **可能重复：**
> [python 元组到 str](https://stackoverflow.com/questions/10549672/python-tuple-to-str)

这是数据库中的数据，我用完了。

```
>>> policy_id = ((2309L,), (118L,), (94L,))
>>> for i in policy_id:
        print i

(2309L,)
(118L,)
(94L,) 
```

但我希望结果为：

```
i[0]=2309
i[1]=118
i[2]=94 
```

mysql:

```
 and p.policy_id in ('%s','%s','%s') %(i[0],i[1],i[2]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T10:57:31.350

你很亲密。我相信这会做你想要的：

```
p.policy_id = ((2309L,), (118L,), (94L,))

for i in p.policy_id:
    print i[0] 
```

产量：

```
2309
118
94 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:02:10.140

如果您想要将结果保存在变量中而不仅仅是打印它，您可以使用列表推导：

```
>>> policy_id_list = [ item[0] for item in policy_id ]
>>> for i in policy_id_list:
...     print i
... 
2309
118
94 
```

# c# - Selenium ChromeDriver 切换选项卡

> ID：10550031
> 
> 赞同：16
> 
> 时间：2012-05-11T10:56:17.210
> 
> 标签：c#, selenium, selenium-chromedriver

当我单击测试中的链接时，它会打开一个新选项卡。我希望 ChromeDriver 然后专注于该选项卡。我尝试使用以下代码让 ChromeDriver 使用 ctrl+tab 快捷方式更改 taba：

```
Actions builder = new Actions(driver);
builder.KeyDown(Keys.Control).KeyDown(Keys.Tab).KeyUp(Keys.Tab).KeyUp(Keys.Control);//switch tabs
IAction switchTabs = builder.Build();
switchTabs.Perform(); 
```

但这会引发以下异常：

```
ekmLiveChat.tests.UITests.EndToEndTest.EndToEnd:
System.ArgumentException : key must be a modifier key (Keys.Shift, Keys.Control, or Keys.Alt)
Parameter name: key 
```

**有没有办法使用 ChromeDriver 切换标签？**

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-05-29T14:34:44.357

这对我有用：

```
var popup = driver.WindowHandles[1]; // handler for the new tab
Assert.IsTrue(!string.IsNullOrEmpty(popup)); // tab was opened
Assert.AreEqual(driver.SwitchTo().Window(popup).Url, "http://blah"); // url is OK  
driver.SwitchTo().Window(driver.WindowHandles[1]).Close(); // close the tab
driver.SwitchTo().Window(driver.WindowHandles[0]); // get back to the main window 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-11T11:28:52.107

正如我在对您的帖子的评论中提到的，我不确定 Chrome 驱动程序处理选项卡的方式是否与处理窗口的方式相同。

打开新窗口时，此代码在 Firefox 中有效，因此希望它也适用于您的情况：

```
public void SwitchToWindow(Expression<Func<IWebDriver, bool>> predicateExp)
{
    var predicate = predicateExp.Compile();
    foreach (var handle in driver.WindowHandles)
    {
        driver.SwitchTo().Window(handle);
        if (predicate(driver))
        {
            return;
        }
    }

    throw new ArgumentException(string.Format("Unable to find window with condition: '{0}'", predicateExp.Body));
}

SwitchToWindow(driver => driver.Title == "Title of your new tab"); 
```

（我希望我对这个答案的代码的编辑没有引入任何错误......）

只要确保您在 Chrome 有机会打开它之前没有开始寻找新标签 :)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-03-12T18:19:31.390

在我的代码上，我单击一个按钮并打开一个选项卡（因此它已经在新选项卡上，我不需要做任何事情来转到该新选项卡）并运行它，以便它识别新选项卡并工作：

```
driver.SwitchTo().Window(driver.WindowHandles.Last()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-07T21:17:17.997

经过长时间的斗争，我能够使用 chrome 驱动程序来解决这个问题。警报消息不可见，但会将选项卡放在前面并接受立即关闭它。

```
//Rotate Tabs
seleniumDriver.SwitchTo().Window(seleniumDriver.WindowHandles[currentUrlIndex]);
IJavaScriptExecutor jscript = seleniumDriver as IJavaScriptExecutor;
jscript.ExecuteScript("alert('Focus')");
seleniumDriver.SwitchTo().Alert().Accept(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-06T12:31:05.163

在 C# 中，我使用以下行在两个选项卡之间切换。

```
IJavaScriptExecutor js = (IJavaScriptExecutor)driver;   
js.ExecuteScript("window.open();");   
IList<string> tabs = new List<string>(driver.WindowHandles);    
driver.SwitchTo().Window(tabs[1]);
driver.Navigate().GoToUrl("http://www.google.com"); 
```

# android - setOnClick 100 个按钮

> ID：10550050
> 
> 赞同：1
> 
> 时间：2012-05-11T10:57:54.903
> 
> 标签：android, button, onclick, buttonclick, onclicklistener

我有 100 个按钮（从 button000 到 button 999）。有什么方法可以为所有这些设置 setOnClick 吗？因为所有按钮都具有相同的功能。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:00:41.443

小伙伴试试这个方法

```
import android.view.View.OnClickListener;

public class MyActivity extends Activity implements OnClickListener {

  @Override public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);
     Button buttonA = (Button) findViewById(R.id.buttonA);    
     buttonA.setOnClickListener(this);
     Button buttonB = (Button) findViewById(R.id.buttonB); 
     buttonB.setOnClickListener(this);
  }

  //etc... etc...

 public void onClick(View v) {

  switch (v.getId()) {
     case R.id.buttonA: 
      // do something
      break;
     case R.id.buttonB:
      // do something else
      break;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T11:01:22.907

如果您的按钮在布局内，那么就这样做。

```
int childcount = ll.getChildCount();
for (int i=0; i < childcount; i++){
      View v = ll.getChildAt(i);
      v.setOnCLickListener(this);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T11:01:49.407

现在我可以说最简单的
使用方式 button000.setOnclicklistener(this);

```
 :

  :

 button999.setOnclicklistener(this); 
```

并在当前类中实现 Onclicklistener ....

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T11:07:29.667

如果您确定这是您的应用程序创建 1000 个按钮的最佳方式，那么它将是这样的：

```
Button [] my_button=new Button[1000];
LinearLayout ll=(LinearLayout)findViewById(R.id.mylayout);
for (int i=0;i<1000;i++){
   my_button[i]=new Button(this);
   my_button[i].setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                          LayoutParams.WRAP_CONTENT));
   my_button[i].setText("button "+i);
   ll.addView(my_button[i]);
   my_button[i].setOnClickListener(new View.OnClickListener() {
      @Override
      public void onClick(View v) {
         ////click event
      }
   });
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T11:04:02.533

只需将按钮添加到数组中，然后循环按钮，然后在侦听器上调用以下代码块：

```
for (int i=0; i < buttonArray.length; ++i){
      buttonArray[i].onClick(this);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-11T11:07:09.497

有两种方法，一种是您可以通过onClick方法在xml布局文件中设置onClick，您可以定义方法，单击按钮时应调用该方法。当您在 xml 中定义按钮时，此方法是合适的。

如果您在 Activity 中添加按钮，并且如果您在循环中添加，那么您可以这样做

```
for(int i=0; i<100; i++)
{
   //Create and Add button
   btn.setOnClickListener(new OnClickListener()
   {
       public void onClick(View view)
       {
            //Operations
       }
   });
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-11T11:44:49.153

如果所有按钮都具有完全相同的功能，那么您可以简单地使用

```
private OnClickListener mListenr=new OnClickListener(
@Override
public void onClick(View v) {
//Whatever you want
}

for(int i=0; i<100; i++)
{
mButton[i].setOnClickListener(mListenr);
} 
```

你可以参考[这个](https://codereview.stackexchange.com/a/10586/12329)来查看实现监听器的方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-11T12:28:18.983

动态制作按钮的最佳方法

```
 Integer[] button_Ids = {R.id.btn000,R.id.btn001...............,R.id.btn999};
 for(int i=0;i<100;i++)
 { 
 Button btn = (Button)findViewById(button_ids[i]);
  btn.setOnClickListner(this);
  }
  @Override
 public void onClick(View v)
         {
         Toast.make(getApplicationContext,"Hello",1000).show();
         } 
```

# c++ - 通过 Doxygen 中的宏定义的文档函数

> ID：10550057
> 
> 赞同：6
> 
> 时间：2012-05-11T10:58:21.470
> 
> 标签：c++, documentation, doxygen

我有一个实际上并不存在但通过宏定义的类：

```
#define DEFCLASS(name,datatype) Class name { \
    public: \
        void clear(); \
        datatype obj; \
    };
DEFMETHOD(StringContainer, const char*) 
```

...

```
StringContainer foo("hi!"); 
```

当然它应该是使用模板实现的，但我没有编写它，我无法更改它并且大型代码库依赖于它。

现在的问题是，我想在 doxygen 中记录 StringContainer。但是，它不是真正存在的类，所以如果我这样做：

```
/*!
    \class StringContainer
    \brief A string container

    \fn void StringContainer::clear()
    \brief Clears the container
*/ 
```

我收到 doxygen 警告：

```
warning: documented function `StringContainer::clear' was not declared or defined. 
```

并且文档不包含该功能。我知道这有点棘手，但是有什么方法可以强制 doxygen 拥有“信仰”并为 StringContainer 创建文档，即使它没有在源代码中定义？

**解决方案**

可以创建假的 .h 文件来让 doxygen 相信一个类存在，同时阻止构建系统包含它。这些文件可以具有**.dox**扩展名。这样，我将创建一个包含类定义和文档的 .dox 文件：

```
class StringContainer {
public:
    /*! Removes the contents of the container. */
    void clear();
    const char *obj;
}; 
```

该文件实际上不会包含在构建系统中，其唯一目的是记录 StringContainer。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T12:50:48.190

我不得不为现有的代码库做很多事情，我发现使用“EXPAND_AS_DEFINED”配置选项可以为您解决这个问题。在 Doxygen 配置文件中，设置以下内容：

> EXPAND_AS_DEFINED = DEFCLASS

只要包含“DEFCLASS”定义的文件是您的 Doxygen 的输入，它就可以工作。（即这不适用于“STDMETHOD”之类的东西，因为您可能不包含将“STDMETHOD”定义为 Doxygen 输入的文件）

我在 VS 2010 中进行了如下尝试，并且能够在没有警告的情况下编译和运行 Doxygen。

这是示例：

## Base.h 文件：

```
#pragma once

#define DEFCLASS(name,datatype) class name { \
    public: \
        name(){} \
        void clear(){}; \
        datatype obj; \
    };

DEFCLASS(StringContainer, const char*)

/*!
    \class StringContainer
    \brief A string container

    \fn void StringContainer::clear()
    \brief Clears the container
*/ 
```

## Base.cpp 文件：

```
#include "Base.h"

int main()
{
    StringContainer foo;
    foo.clear();

    return 0;
} 
```

## DoxygenTest.doxygen

```
MACRO_EXPANSION        = YES
EXPAND_ONLY_PREDEF     = YES
EXPAND_AS_DEFINED      = DEFCLASS 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T11:49:12.523

如果在 doxygen 配置 (http://www.star.bnl.gov/public/comp/sofi/doxygen/config.htm) 中将 MACRO_EXPANSION 设置为“yes”，doxygen 将“看到”StringContainer。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T08:03:54.003

我建议阅读 doxygen 手册的这一部分：http: [//www.doxygen.org/preprocessing.html](http://www.doxygen.org/preprocessing.html)。解释如何处理 DECLARE_INTERFACE 和 STDMETHOD 宏的部分与您想要的非常相似。

因此，如果您不希望在单独的文件中编写虚拟类，这可能是一种替代解决方案。

# c# - 如何限制由DataSet填充的下拉列表的可见项

> ID：10550063
> 
> 赞同：0
> 
> 时间：2012-05-11T10:58:46.087
> 
> 标签：c#, asp.net

我有一个`DropdownList ASP control`，由 填充`DataSet`。

我在用`.net 3.5, c#.`

为了控制 DropDownList 的高度，我使用以下代码并且它正在工作。

```
<asp:DropDownList size="1"
            onMouseOver="this.size=10;"             
            onMouseOut="this.size=1;"
            style="display:none; position:absolute; width:150px;" 
            runat="server"></asp:DropDownList> 
```

**但是**单击它时它会闪烁，这意味着首先它显示所有值并再次调整大小为 10，提供控件的长度。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T06:54:37.093

是的，我得到了正确答案。以下代码对我来说正常工作。

```
<asp:DropDownList ID="ddl" width="100px" onclick="this.size=1;" onMouseOver="this.size=10;" onMouseOut="this.size=1;" style="position:absolute;" runat="server"></asp:DropDownList> 
```

使用`position:absolute;`and `this.size`，我可以管理项目的数量（10 个可见）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T11:02:12.673

如果您使用的是 ASP.NET 下拉列表服务器控件 - 为什么不直接使用**height**属性？或者使用Css来控制**高度**？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T11:10:05.557

```
comboBox1.DropDownHeight = comboBox1.ItemHeight * no of item to display; 
```

# qt - Qt。为应用程序自动添加版本

> ID：10550071
> 
> 赞同：12
> 
> 时间：2012-05-11T10:59:21.187
> 
> 标签：qt, qmake

在`.pro`文件中，我可以设置应用程序的版本，例如：

```
VERSION = <some version> 
```

有没有办法自动执行此操作（例如从 Mercurial 获取值）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T23:32:22.580

如果可以从 shell 命令获取版本，则可以使用`$$system`qmake 函数将其分配给变量。

因此，对于 mercurial，您可以尝试：

```
# if the version tag is <major version>.<minor version> 
VERSION = $$system(hg parents --template '{latesttag}.{latesttagdistance}')
# or if you fill all 3 positions manually: <major>.<minor>.<patchset>
VERSION = $$system(hg parents --template '{latesttag}') 
```

或者，如果您使用本地修订号作为版本：

```
VERSION = $$system(hg parents --template '{rev}') 
```

它只会打印没有未提交更改指示符（'+'）的数字。

# windows-phone-7 - 在 WebBrowser 中加载本地 html

> ID：10550077
> 
> 赞同：0
> 
> 时间：2012-05-11T11:00:12.893
> 
> 标签：windows-phone-7

我正在尝试将本地 html 文件加载到 WebBrowser 控件中。但是，该 html 附带的资源已添加到项目中，但未加载到 html 中。我将它们复制到同一目录中，将它们标记为“始终复制”资源。

由于我是 windows phone 开发的新手，任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-27T03:12:58.963

（假设您在项目的“Help”文件夹中有 Help.html 文件。）

## 如果您将文件的构建操作标记为“内容”

```
var rs = Application.GetResourceStream(new Uri("/Help/Help.html", UriKind.Relative));
StreamReader sr = new StreamReader(rs.Stream);
string htmlText = sr.ReadToEnd();
sr.Close();
webBrowser1.NavigateToString(htmlText); 
```

## 如果您将文件的构建操作标记为“资源”

```
var rs = Application.GetResourceStream(new Uri("/YOUR_PROJECT_NAME;component/Help/Help.html", UriKind.Relative));
StreamReader sr = new StreamReader(rs.Stream);
string htmlText = sr.ReadToEnd();
sr.Close();
webBrowser1.NavigateToString(htmlText); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T08:29:27.387

将文件的构建操作标记为“属性”中的“内容”，然后尝试以下操作：

（假设您在项目的“html”文件夹中有 b.html 文件。）

```
 var rs = Application.GetResourceStream(new Uri("html/b.html", UriKind.Relative));
  StreamReader sr = new StreamReader(rs.Stream);
  string htmlText = sr.ReadToEnd();
  sr.Close();
  webBrowserCtrl.NavigateToString(htmlText) ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T12:32:35.340

您应该将 HTML 文件标记为内容。它现在应该是“资源”。

# google-apps-script - 如何使用与 http 不同的协议打开链接

> ID：10550078
> 
> 赞同：1
> 
> 时间：2012-05-11T11:00:19.837
> 
> 标签：google-apps-script

我尝试使用谷歌电子表格在单元格 F 中打开我的电话号码作为 callto:// 链接，以便我的 voip 软件可以立即拨打该号码。不幸的是，将 callto://number 写入单元格会使电子表格猜测链接是 http:/callto://number。

所以我尝试实现一个 UI，它从单元格中读取数字并发出 window.open，但这是不可能的。然后我尝试将此 callto://-link 放入锚元素中，但这也不起作用。我也尝试过使用 setHTML，但是这不起作用。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-14T02:22:41.483

我定制了一个现有的工作流程来实现这个目的，它工作得非常好。它使用 Mac 应用程序[Alfred](https://www.alfredapp.com)（需要付费的 Powerpack）来使用。工作流程由几个部分组成：

1.  突出显示/选择 Google 表格（或任何其他应用程序）中的数字
2.  触发分配给 Alfred 工作流程的键盘快捷键。
3.  工作流将数字复制到剪贴板。
4.  它会转义任何无关的字符以使其成为可用的电话号码。
5.  它将文本片段`tel://`添加到数字之前。可以轻松调整工作流程以使用`callto://`
6.  它执行已建立的“链接”。
7.  FaceTime 使用 Mac 的切换功能自动启动以使用附近连接的 iPhone 进行通话。如果您使用呼叫链接，它可能会打开 Skype 或其他分配用于本地处理链接的 VOIP 应用程序。

如果你喜欢这个想法，你可以[下载我的工作流程](https://dl.dropboxusercontent.com/u/419640/Call%20Selected%20Number%20with%20Facetime.alfredworkflow)并试一试。

# jquery - 输入类型 =“范围”在 PhoneGap IOS 应用程序中未刷新

> ID：10550082
> 
> 赞同：1
> 
> 时间：2012-05-11T11:00:32.177
> 
> 标签：jquery, html, css, cordova

我正在Phone Gap IOS中开发iPhone应用程序，在此我正在创建一个音频栏，其中将包含一个滑块以显示音频运行的进度，通过它我也可以使音频向后和向前，并且有一个标签将显示经过的时间。

我使用 HTML5 输入 Type="range" 作为滑块，并在我的应用程序中实现了 JQuery Mobile。

我面临的问题是，当音乐播放时，滑块的手柄不会随着音乐的进展而保持在滑块的开头，在做了一些研究之后，我知道滑块没有刷新，为什么位置是没有改变，为此我编写了以下代码行来刷新滑块。

```
$("input[type='range']").val(60).slider("refresh"); 
```

但它给了我以下错误：

> 类型错误：'undefined' 不是函数（评估 '$("input[type='range']").val(60).slider("refresh")'）

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:00:44.807

如果您在页面初始化之前运行此代码，则您想要刷新的滑块可能还没有初始化。请在刷新之前尝试对其进行初始化。

尝试：

```
$("input[type='range']").val(60).slider(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:03:06.580

试试这个，这两种方法不能相互链接：

```
$("input[type='range']").val("60");
$("input[type='range']").slider("refresh"); 
```

# python - 将列表项作为单独的条目插入数据库

> ID：10550088
> 
> 赞同：1
> 
> 时间：2012-05-11T11:00:43.937
> 
> 标签：python, google-app-engine

我有一个输入字段，它基本上是一个逗号分隔的字符串（例如“deniscm, toms, peters”）。该信息通过 AJAX 发送到我的 Python 处理程序 SaveQueryPage。我想要做的是将这些信息解析为一个列表，然后将每个条目插入我的数据库。我的代码如下，但不幸的是它不起作用。有什么建议么？

**Python代码：**

```
class SaveQueryPage(webapp2.RequestHandler):
  def post(self):
    user = users.get_current_user()
    user_nickname = user.nickname()
    query_name = self.request.get('queryName')
    query_collab = self.request.get('queryCollab')

    query_collaborators = re.split(r'\s*[,]\s*', query_collab.strip())
    query_collaborators = query_collaborators.append(user_nickname)
    query_collaborators = filter(None, query_collaborators)

    conn = rdbms.connect(instance=_INSTANCE_NAME, database='queryInfo')
    cursor = conn.cursor()
    cursor.execute('INSERT INTO queries (userNickname, queryName) VALUES (%s, %s)', (user_nickname, query_name))
    conn.commit()

    for item in query_collaborators:
      cursor = conn.cursor()
      cursor.execute('INSERT INTO collaborators (queryName, userNickname) VALUES (%s, %s)', (query_name, item))
      conn.commit()

    conn.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T21:47:01.657

我终于设法让它工作了。看起来正则表达式将列表中的项目转换为 unicode 格式，仅在我添加一些日志时才被捕获。我在将字符串附加到列表时也出错了。谢谢指点！下面的代码现在对我有用：

```
class SaveQueryPage(webapp2.RequestHandler):
  def post(self):
    user = users.get_current_user()
    user_nickname = user.nickname()
    user_email = user.email()

    query_name = self.request.get('queryName')
    query_description = self.request.get('queryDescription')

    query_collab = self.request.get('queryCollab')
    logging.info('Data read for query_collab is %s', query_collab)

    query_collab_re = re.split(r'\s*[,;]\s*', query_collab.strip())
    logging.info('Data read for query_collab_re is %s', query_collab_re)

    query_collab_decode = []
    for item in query_collab_re:
      item = str(item)
      query_collab_decode.append(item)
    logging.info('Data read for query_collab_decode is %s', query_collab_decode)

    query_collab_decode.append(user_nickname)
    logging.info('Data read for query_collab_append is %s', query_collab_decode)

    query_collab_filter = filter(None, query_collab_decode)
    logging.info('Data read for query_collab_filter is %s', query_collab_filter)

    query_value = self.request.get('queryValue') # query_value
    date_created = datetime.today()
    date_lastupdated = datetime.today()
    active_flag = "true"
    random_id = random.randint(1000000000000, 9999999999999)
    unique_query_id = user_nickname + "_" + str(random_id)

    conn = rdbms.connect(instance=_INSTANCE_NAME, database='userPrefs')
    cursor = conn.cursor()
    cursor.execute('INSERT INTO queries (userNickname, queryName, queryDescription, queryValue, dateCreated, dateLastUpdated, activeFlag, uniqueId) VALUES (%s, %s, %s, %s, %s, %s, %s, %s)', (user_nickname, query_name, query_description, query_value, date_created, date_lastupdated, active_flag, unique_query_id))
    conn.commit()

    try:
      for item in query_collab_filter:
        cursor = conn.cursor()
        cursor.execute('INSERT INTO collaborators (uniqueId, userNickname) VALUES (%s, %s)', (unique_query_id, item))
        conn.commit()
    except:
      logging.error('There was an error inserting the values into the collaborators table. query_collaborators =' + str(query_collaborators))

    conn.close() 
```

# jsf-2 - Jsf2.0 preRenderView

> ID：10550094
> 
> 赞同：0
> 
> 时间：2012-05-11T11:01:10.367
> 
> 标签：jsf-2

我正在使用 jsf 2.0

我对 PreRenderView 有疑问。

在我的 Bean 中，我有类似的方法

```
public void init() throws Exception
    {

        FacesContext.getCurrentInstance().getExternalContext().redirect("/To My Page");
        if(!FacesContext.getCurrentInstance().isPostback())
        {
            System.out.println("Kshitij");
        }
    } 
```

执行此方法时，它还会在 servler 日志中打印“Kshitij”。

然后重定向到页面。

为什么？我认为它必须首先重定向到页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:34:52.510

为什么您认为首先执行实际重定向？该方法必须先完成运行，然后服务器才能继续控制请求/响应。**在全新的**请求和线程中，中途暂停代码执行然后在完全相同的位置继续执行代码是不可能的。

该`redirect()`调用基本上设置了`Location`响应标头。只有当方法返回时，服务器才会发送响应，然后浏览器才会在该位置发送新请求。

如果您想在需要重定向时跳过打印，请添加 return 语句或 if/else。

```
if (youNeedToRedirect) {
    FacesContext.getCurrentInstance().getExternalContext().redirect("/To My Page");
}
else {
    if (!FacesContext.getCurrentInstance().isPostback()) {
        System.out.println("Kshitij");
    }
} 
```

这一切都与 JSF 或`preRenderView`. 这只是基本的 Java 和 HTTP。

### 有关的：

*   [java.lang.IllegalStateException：提交响应后无法（转发|发送重定向|创建会话）](https://stackoverflow.com/questions/2123514/java-lang-illegalstateexception-cannot-forward-after-response-has-been-committe/2125045#2125045)

# ldap - Liferay + LDAP + CAS

> ID：10550096
> 
> 赞同：1
> 
> 时间：2012-05-11T11:01:14.747
> 
> 标签：ldap, liferay, single-sign-on, cas

我必须创建一个允许用户登录和访问另一个 Web 应用程序的 Intranet，这些 Web 应用程序已经存在，并且每个用户都有一个登录名和密码来访问。所以，我必须在 Liferay 中实现它。

首先，我登录到门户网站，其中一个 portlet 中将放置一个链接。当我单击该链接时，它应该将我重定向到 Web 应用程序，而无需再次要求我登录，并且该 Web 应用程序中将只有“退出”选项。

我使用了 LADP 和 CAS SSO，所以我使用了 Apache Directory Server 作为 LDAP 服务器并实现了 CAS。问题是我不知道我将用户的登录名和密码存储在哪里。我使用 jxplorer LDAP 客户端来探索并找到如何添加用户并设置他们的登录名和密码，但问题是我如何为登录到门户的每个用户添加其他 Web 应用程序的其他登录名和密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T12:46:17.367

Liferay 提供完整的基础设施来绑定 CAS 上的单点登录 (SSO) 并从 LDAP 读取用户数据。关于liferay的配置和其他： [http ://www.liferay.com/community/wiki/-/wiki/Main/CAS+Liferay+6+Integration](http://www.liferay.com/community/wiki/-/wiki/Main/CAS+Liferay+6+Integration)

# android - 模拟器虚拟设备未启动；日志显示“未知错误”

> ID：10550097
> 
> 赞同：1
> 
> 时间：2012-05-11T11:01:15.633
> 
> 标签：android, android-emulator

我正在尝试在旧 XP SP2 桌面上使用模拟器启动 android 虚拟设备。该设备出现一个空白屏幕，甚至不显示初始的 android 徽标。我检查了以前的帖子，可能[这个 Q](https://stackoverflow.com/questions/10022580)类似但没有回答。所以这里是 - 我在 cmd 提示符下使用详细选项启动了模拟器，我看到报告了未知错误：

> 模拟器：现实的传感器模拟不可用，因为无法访问遥控器：未知错误 模拟器：模拟器窗口不在视野范围内并重新定位
> 
> 模拟器：无法打开文件：ÿ-"：没有这样的文件或目录模拟器：控制台监听端口 5554，ADB 在端口 5555 模拟器：发送 '0012host:emulator:5555' 到 ADB 服务器

顺便说一句，adb 没有列出该设备。设备按钮响应鼠标但屏幕保持空白，正如我之前所说，我没有看到它出现在启动屏幕上。我也尝试使用电源按钮打开电源，但没有运气。我应该补充一点，我还创建了几个名称不同但没有变化的设备。

任何有关如何修复的指示都非常感谢。

# c# - Clr 命名空间映射到默认的 xaml 命名空间

> ID：10550102
> 
> 赞同：7
> 
> 时间：2012-05-11T11:01:51.690
> 
> 标签：c#, .net, wpf, xaml

我有点厌倦了必须在每个 xaml 文件中声明一个 xmlns 并且必须为我的自定义控件使用前缀。是否可以将 clr 命名空间映射到“http://schemas.microsoft.com/winfx/2006/xaml/presentation”？

我在我的 AssemblyInfo.cs 中尝试了以下内容：

```
[assembly: XmlnsDefinition("http://schemas.microsoft.com/winfx/2006/xaml/presentation","MyOwnNamespace")] 
```

但这似乎不起作用。我仍然收到如下编译错误：

> XML 命名空间“http://schemas.microsoft.com/winfx/2006/xaml/presentation”中不存在标记“MyCustomControl”。

注意：我的控件在同一个程序集中（我有一个程序集）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T11:10:35.623

1.  `XmlnsDefinition`不幸的是，如果控件是在同一个程序集中定义的，则不能使用映射到由 定义的 Xaml 命名空间的控件。不同的组件虽然工作正常。您必须为此使用`clr-namespace`定义。

2.  为什么要将控件添加到 Xaml 默认命名空间？不要这样做。这就像`System`为你的类使用命名空间，因为你不想`using`为它们的命名空间添加指令。

# php - 如何在 Centos 中安装 PHP 5.3 - mhash？

> ID：10550106
> 
> 赞同：0
> 
> 时间：2012-05-11T11:02:06.863
> 
> 标签：php, hash, centos, rpm

如何在我的 centos 中安装 php 5.3 mhash。从哪里获得该 RPM 文件。每个地方都只显示 5.2 版本。请帮我。我怎样才能安装它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:06:29.823

您可以从此处[http://repo.webtatic.com/yum/centos/5/SRPMS/](http://repo.webtatic.com/yum/centos/5/SRPMS/)安装 5.3，但 mhash 已关闭：

从 5.3.0 发行说明：

不再提供 mhash 扩展。请参阅替代扩展 HASH 消息摘要框架 -> [http://fr2.php.net/hash](http://fr2.php.net/hash)

# jquery - 无样式内容的闪光。如何在页面加载之前隐藏所有自定义字体？

> ID：10550113
> 
> 赞同：1
> 
> 时间：2012-05-11T11:02:37.050
> 
> 标签：jquery, fouc

我正在努力对抗 FOUC。我的网站严重依赖自定义字体。我已经让它在字体加载之前不显示页面，但是在歌剧中我仍然在每次页面更改时都会得到一些 FOUC。

所以，我想我会应用额外的措施并隐藏所有使用自定义字体的文本。有没有一种简单的方法可以选择`font-family: CustomFont;`css 文件中的所有 div、span 并使它们在字体加载之前不显示文本？

编辑：或者只是延迟0.5秒？

# c# - 使用 WPF 打印视觉对象并分配打印机名称

> ID：10550115
> 
> 赞同：1
> 
> 时间：2012-05-11T11:03:00.707
> 
> 标签：c#, wpf, printing

我正在尝试在我的 WPF 应用程序中打印该页面。由于 PrintVisual() 方法的易用性，我决定将其创建为画布。

但问题是我无法动态设置打印机名称 - 使用打印对话框也不是一个选项，工作人员必须能够单击打印按钮，它会自动打印到他们分配的打印机（通过从配置文件中读取分配，而不是基于 Windows 默认打印机）。这可以使用打印页面事件处理程序（PrintDocument 的一部分，例如`pd.PrintPage += new PrintPageEventHandler(pageLayoutForPrint)))`因为我也可以设置打印机名称（作为字符串），但我试图变得懒惰并利用内置方法。

我对印刷很**陌生**，但这是我的 2 个问题

1.  如果我使用 PrintVisual 方法，可以设置打印机名称吗？

2.  如果无法设置打印机名称，那么打印画布的最佳方式是什么？是打印有效映射坐标然后将其传递给打印机的理论。例如，要打印只有一个文本框的文档，我们可以使用以下伪代码：

    `int left = textbox.Left;
    int top = textbox.Top;
    e.Graphics.DrawString(Textbox.Text, printFont, Brushes.Black, left, top, new StringFormat());`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T11:20:53.463

答案嵌入在这里

[WPF MVVM后台打印数据绑定问题](https://stackoverflow.com/questions/10192054/wpf-mvvm-background-printing-databinding-issue)

简短的回答：

1）导入 System.Printing（可能需要添加引用
2）这段代码可以做到（假设已经创建了一个画布）！

```
 PrintDialog dialog = new PrintDialog();
        PrintQueue queue = new LocalPrintServer().GetPrintQueue(printerName);
        dialog.PrintQueue = queue;
        dialog.PrintVisual(canvas, ""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T18:50:38.410

将 PrintDialog 与 PrintVisual() 一起使用。您不必显示打印对话框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-11T06:13:49.333

您可以使用这个简单的代码轻松完成。我很遗憾地说你的问题是重复的。

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    PrintDialog _PrintDialog = new PrintDialog();

    _PrintDialog.PrintQueue = new PrintQueue(new PrintServer(), "Printer Name");

    _PrintDialog.PrintVisual(CanvasOrAnyVisualName, "Printing Job Name");
} 
```

# javascript - 将 javascript 保留在新的 javascript 元素中

> ID：10550116
> 
> 赞同：0
> 
> 时间：2012-05-11T11:03:02.607
> 
> 标签：javascript, styles, nicedit

我正在开发一个网页，但我遇到了一些 javascript 代码的问题。

我将[Nicedit](http://nicedit.com/)用作 textareas 的 WYSIWYG，正如其主页所述，就像在我的网页中的任何位置复制/粘贴这 2 行一样简单：

```
<script src="http://js.nicedit.com/nicEdit-latest.js" type="text/javascript"></script>
<script type="text/javascript">bkLib.onDomLoaded(nicEditors.allTextAreas);</script> 
```

这与页面的默认文本区域配合得很好。问题是我也有这个 javascript 来添加更多的文本区域：

```
function addchapter()
  {
  if (num_chapter < 10)
    {
    var num=num_chapter+1;
    document.getElementById('chapters').innerHTML += "<h3>Chapter " + num + "</h3> Title: <input type='text' name='titlechapter_" + num + "'><br>Content:<textarea  name='chapter_" + num + "'></textarea>";
    }
  else if (num_chapter == 10)
    {
    document.getElementById('chapters').innerHTML += "<br />Maximum is 10 chapters.";
    }
  num_chapter += 1;
  } 
```

所以当我通过javascript添加一个textarea时，它没有正确的样式；它没有实施 Nicedit。问题是文本区域都是标准的，所以两种情况下的代码没有区别。我不太了解 javascript，但我认为问题可能是 Nicedit 代码在页面加载时运行一次，仅此而已。**知道如何在页面加载（<= 已经完成）和`addchapter`函数运行时运行它吗？**

相关的 HTML 位是这样的：

```
 <div id="chapters">
 </div>
 <button type="button" onclick="addchapter()"> Add chapter </button> 
```

我的页面可以看到奇怪的行为是~~**这个**~~（断开的链接），在第 1 章下，您会看到“添加章节”按钮。

非常感谢大家。

编辑 1，错误控制台输出：当页面加载它抛出这个：

```
"GET http://js.nicedit.com/nicEditIcons-latest.gif 
bkClass.extend.getStylenicEdit-latest.js:8
bkClass.extend.constructnicEdit-latest.js:38
AnicEdit-latest.js:8
bkClass.extend.addInstancenicEdit-latest.js:37
bkClass.extend.panelInstancenicEdit-latest.js:37
nicEditors.allTextAreasnicEdit-latest.js:37
bkLib.domLoaded" 
```

当我添加新章节时：

```
"Uncaught TypeError: Object #<bkClass> has no method 'removeInstance'
bkClass.extend.checkReplacenicEdit-latest.js:37
bkClass.extend.panelInstancenicEdit-latest.js:37
nicEditors.allTextAreasnicEdit-latest.js:37
(anonymous function)/file/new/:112
onclick" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T11:07:21.050

您必须为添加到页面的文本字段分配唯一 ID。要将其转换为编辑器，您可以调用；

```
nicEditors.findEditor(editorID); 
```

或者你可以`nicEditors.allTextAreas()`再打电话。但我不确定这是否会从已经存在的编辑器中删除现有内容。

资料来源：[API](http://wiki.nicedit.com/w/page/521/Javascript%20API)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T20:50:49.003

您可以在代码中添加 try{}catch(e){} 块

```
jQuery('.js-control-des').each(function () {
            var index = jQuery(this).attr('lang');
            var editor = jQuery(this).find('textarea');
            var editor_id = editor.attr('id');
            var editor_loaded = editor.attr('rel');
            if (editor_loaded == undefined || editor_loaded != null || editor_loaded == 0) {
                var editor_new_width = parseFloat(editor.css('min-width')) + 7 + 'px';
                editor.css({
                    width: editor_new_width,
                    'max-width': editor_new_width,
                    'min-width': editor_new_width
                });
                try {
                    new nicEditor({maxHeight: 300}).panelInstance(editor_id);
                    jQuery(this).attr('rel', 'editor-loaded');
                    jQuery(this).find('.nicEdit-main').attr('data-index', index).keyup(function (e) {
                        if (vnLineUcp.editorKeyUp(jQuery(this)) == false) {
                            return false;
                        }
                    });
                } catch (e) {
                }
            }
        }); 
```

# android - Android : 4.0.3 模拟器在一段时间后自动关闭

> ID：10550118
> 
> 赞同：15
> 
> 时间：2012-05-11T11:03:09.333
> 
> 标签：android, eclipse, android-emulator, avd

我正在使用模拟器 4.0.3，每当运行项目时，新的 android 模拟器就会启动，并且以前的模拟器会显示空白屏幕，即空闲时出现空白屏幕不起作用。会有什么问题？我该如何解决？

重置 adb 时出错

```
[2012-05-11 16:54:11 - DeviceMonitor] Adb connection Error:An existing connection was forcibly closed by the remote host
[2012-05-11 16:54:11 - Unexpected error while launching logcat. Try reselecting the device.] An existing connection was forcibly closed by the remote host
java.io.IOException: An existing connection was forcibly closed by the remote host
at sun.nio.ch.SocketDispatcher.read0(Native Method)
at sun.nio.ch.SocketDispatcher.read(Unknown Source)
at sun.nio.ch.IOUtil.readIntoNativeBuffer(Unknown Source)
at sun.nio.ch.IOUtil.read(Unknown Source)
at sun.nio.ch.SocketChannelImpl.read(Unknown Source)
at com.android.ddmlib.AdbHelper.executeRemoteCommand(AdbHelper.java:395)
at com.android.ddmlib.Device.executeShellCommand(Device.java:397)
at com.android.ddmuilib.logcat.LogCatReceiver$1.run(LogCatReceiver.java:102)
at java.lang.Thread.run(Unknown Source)

[2012-05-11 16:54:12 - DeviceMonitor] Connection attempts: 1 
```

仿真器图像如下所示..

![有效的 XHTML](../Images/dc1c0d6ae5fc24ae4f62d933d2f8a293.png).

而且它非常慢..当我尝试在模拟器中将设备内存大小从 512 增加到 1024 时，它对我不起作用。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T03:42:12.650

Android 4.0.3 模拟器几乎没有错误，并且还带有 logcat。最好创建一个新的模拟器并重新启动 adb。我希望这可能会有所帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T06:17:05.507

擦除SD卡...并在任务管理器中杀死adb进程并再次重新启动它，重新启动eclipse而不是尝试，它会

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T13:00:48.937

我遇到了同样的问题。我刚刚重新启动，即重新启动 Eclipse 并重新创建了 Android SDK。

这对我来说可以。希望它对你也有帮助。

# java - 等距世界滚动 Java

> ID：10550120
> 
> 赞同：0
> 
> 时间：2012-05-11T11:03:19.503
> 
> 标签：java, graphics, scroll, isometric

所以我创建了一个等轴测世界，当你使用 WASD 键时它会滚动世界。现在我所做的实际上是根据玩家的移动而不是玩家移动整个世界。这是一个好方法吗？我有一些奇怪的图形故障，在世界的左上角（仅左上角）瓷砖开始出现故障和闪烁......我正在使用 Graphics2D ..

我是这样做的： 移位器它自己：

```
public void checkForShift(Player p, World world, GameWindow win) {
    //X MOVING

    if (p.getEnty().getX()>win.getWidth()/2) {
        if (p.getEnty().getX()<world.getWidth()-win.getWidth()/2) {
            temp = (p.getEnty().getX()-win.getWidth()/2);
            world.subSWidth(temp);
            world.subWidth(temp);
            world.updateShift(1, temp);
        }
    }
    if (p.getEnty().getX()<win.getWidth()/2) {
        if (p.getEnty().getX()>world.getSwidth()+win.getWidth()/2) {
            temp = (p.getEnty().getX()-(world.getSwidth()+win.getWidth()/2));
            world.addSWidth(temp);
            world.addWidth(temp);
            world.updateShift(2, temp);
        }
    }
    //Y MOVING
    if (p.getEnty().getY()>win.getHeight()/2) {
        if (p.getEnty().getY()<world.getHeight()-win.getHeight()/2) {
            temp = (p.getEnty().getY()-win.getHeight()/2);
            world.subSHeight(temp);
            world.subHeight(temp);
            world.updateShift(3, temp);
        }
    }
    if (p.getEnty().getY()<win.getHeight()/2) {
        if (p.getEnty().getY()>world.getSheight()+win.getHeight()/2) {
            temp = (p.getEnty().getY()-(world.getSheight()+win.getHeight()/2));
            world.addSHeight(temp);
            world.addHeight(temp);
            world.updateShift(4, temp);
        }
    }
} 
```

世界：

```
public void updateShift(int operation, int amount) {
    for(Entity e:ListManager.entityList) {
        e.updateShift(operation, amount);
    }
    for (Chunk c : this.getChunkList()) {
        for (Tile t : c.getTileList()) {
            t.updateShift(operation, amount);
        }
    }
} 
```

实体：

```
public void updateShift(int operation, int amount) {
    if (operation == 1) {
        SubX(amount);
    } else if (operation == 2) {
        AddX(amount);
    } else if (operation == 3) {
        SubY(amount);
    } else {
        AddY(amount);
    }

} 
```

瓷砖：

```
public void updateShift(int operation, int amount) {
    if (operation == 1) {
        SubX(amount);
    } else if (operation == 2) {
        AddX(amount);
    } else if (operation == 3) {
        SubY(amount);
    } else {
        AddY(amount);
    }
} 
```

所以我有 2 个问题，这是一种良好且高效的方法吗？以及如何解决奇怪的故障？这是一个视频：

[http://youtu.be/YUn5xCeBInM](http://youtu.be/YUn5xCeBInM)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:11:14.523

也许我的回答会有点偏离，但您可能对[libgdx](http://code.google.com/p/libgdx/)及其 [IsometricMap](http://code.google.com/p/libgdx-users/source/browse/)示例感兴趣。

# java - 推荐一个免费的Java库来构造一棵树并获取叶子节点之间的路径？

> ID：10550122
> 
> 赞同：1
> 
> 时间：2012-05-11T11:03:22.157
> 
> 标签：java, tree

你能推荐一个用于创建树的Java库吗？我正在寻找一个库，它将计算叶节点之间的各种路径，报告树的叶节点数量以及其他实用方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:29:24.850

尝试[jgrapht](http://jgrapht.org/)。从网页：

> JGraphT 是一个免费的 Java 图形库，提供数学图形理论对象和算法。JGraphT 支持各种类型的图，包括：
> 
> *   有向图和无向图。
> *   带有加权/未加权/标记或任何用户定义边的图形。
> *   各种边多重性选项，包括：简单图、多重图、伪图。
> *   不可修改的图 - 允许模块提供对内部图的“只读”访问。
> *   可收听的图表 - 允许外部侦听器跟踪修改事件。
> *   subgraphs 图是在其他图上自动更新子图视图。
> *   以上图表的所有组成。
> 
> 尽管功能强大，但 JGraphT 被设计为简单且类型安全（通过 Java 泛型）。例如，图顶点可以是任何对象。您可以基于以下内容创建图形：字符串、URL、XML 文档等；你甚至可以创建图表的图表！

其他[SO 用户报告](https://stackoverflow.com/questions/2727788/java-library-for-trees-similar-to-jgrapht-for-graphs)[Jung](http://jung.sourceforge.net/)成功。我对他们的 API 进行了 30 秒的仔细审查，建议您应该从[这里](http://jung.sourceforge.net/doc/api/edu/uci/ics/jung/graph/Tree.html)开始。

# powershell - Powershell测试文件夹是否为空

> ID：10550128
> 
> 赞同：84
> 
> 时间：2012-05-11T11:03:40.927
> 
> 标签：powershell

在 Powershell 中，如何测试目录是否为空？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-05-11T11:42:05.693

如果您对隐藏文件或系统文件不感兴趣，您也可以使用 Test-Path

要查看它是否存在目录中的文件，`.\temp`您可以使用：

```
Test-Path -Path .\temp\* 
```

或很快：

```
Test-Path .\temp\* 
```

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-05-11T12:51:12.543

尝试这个...

```
$directoryInfo = Get-ChildItem C:\temp | Measure-Object
$directoryInfo.count #Returns the count of all of the objects in the directory 
```

如果`$directoryInfo.count -eq 0`，则您的目录为空。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2014-12-22T12:12:29.117

为了防止枚举 c:\Temp 下的每个文件（这可能很耗时），我们可以这样做：

```
if((Get-ChildItem c:\temp\ -force | Select-Object -First 1 | Measure-Object).Count -eq 0)
{
   # folder is empty
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-11T11:49:15.300

```
filter Test-DirectoryEmpty {
    [bool](Get-ChildItem $_\* -Force)
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-08-26T14:19:05.583

一条线：

```
if( (Get-ChildItem C:\temp | Measure-Object).Count -eq 0)
{
    #Folder Empty
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-06-29T01:59:48.160

简单的方法

```
if (-Not (Test-Path .\temp*) 
{
 #do your stuff here
} 
```

`-Not`如果你想在文件存在时输入'if'，你可以删除

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-05-23T12:55:33.307

您可以使用该方法`.GetFileSystemInfos().Count`检查目录的数量。[微软文档](https://docs.microsoft.com/en-us/dotnet/api/system.io.directoryinfo.getfilesysteminfos?view=netcore-3.1)

```
$docs = Get-ChildItem -Path .\Documents\Test
$docs.GetFileSystemInfos().Count 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-31T18:29:00.753

只需添加到 JPBlanc，如果目录路径是 $DirPath，此代码也适用于包括方括号字符的路径。

```
 # Make square bracket non-wild card char with back ticks
    $DirPathDirty = $DirPath.Replace('[', '`[')
    $DirPathDirty = $DirPathDirty.Replace(']', '`]')

    if (Test-Path -Path "$DirPathDirty\*") {
            # Code for directory not empty
    }
    else {
            # Code for empty directory
    } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-05-30T13:02:13.053

获取所有文件和目录并仅计算它们以确定目录是否为空是一种浪费。更好地使用 .NET`EnumerateFileSystemInfos`

```
$directory = Get-Item -Path "c:\temp"
if (!($directory.EnumerateFileSystemInfos() | select -First 1))
{
    "empty"
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-01-30T04:48:41.250

```
 $contents = Get-ChildItem -Path "C:\New folder"
    if($contents.length -eq "") #If the folder is empty, Get-ChileItem returns empty string
    {
        Remove-Item "C:\New folder"
        echo "Empty folder. Deleted folder"
    }
    else{
    echo "Folder not empty"
    } 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-07-05T16:24:07.953

删除空文件夹的示例：

```
IF ((Get-ChildItem "$env:SystemDrive\test" | Measure-Object).Count -eq 0) {
    remove-Item "$env:SystemDrive\test" -force
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-03-22T22:46:24.503

```
#Define Folder Path to assess and delete
$Folder = "C:\Temp\Stuff"

#Delete All Empty Subfolders in a Parent Folder
Get-ChildItem -Path $Folder -Recurse -Force | Where-Object { $_.PSIsContainer -and (Get-ChildItem -Path $_.FullName -Recurse -Force | Where-Object { !$_.PSIsContainer }) -eq $null } | Remove-Item -Force -Recurse

#Delete Parent Folder if empty
If((Get-ChildItem -Path $Folder -force | Select-Object -First 1 | Measure-Object).Count -eq 0) {Remove-Item -Path $CATSFolder -Force -Recurse} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-06-23T17:08:55.170

```
#################################################
# Script to verify if any files exist in the Monitor Folder
# Author Vikas Sukhija 
# Co-Authored Greg Rojas
# Date 6/23/16
#################################################

################Define Variables############ 
$email1 = "yourdistrolist@conoso.com" 
$fromadd = "yourMonitoringEmail@conoso.com" 
$smtpserver ="mailrelay.conoso.com" 

$date1 = get-date -Hour 1 -Minute 1 -Second 1
$date2 = get-date -Hour 2 -Minute 2 -Second 2 

###############that needs folder monitoring############################ 

$directory = "C:\Monitor Folder"

$directoryInfo = Get-ChildItem $directory | Measure-Object
$directoryInfo.count

if($directoryInfo.Count -gt '0') 
{ 

#SMTP Relay address 
$msg = new-object Net.Mail.MailMessage
$smtp = new-object Net.Mail.SmtpClient($smtpServer) 

#Mail sender 
$msg.From = $fromadd 
#mail recipient 
$msg.To.Add($email1) 
$msg.Subject = "WARNING : There are " + $directoryInfo.count + " file(s) on " + $env:computername +  " in " + " $directory 
$msg.Body = "On " + $env:computername + " files have been discovered in the " + $directory + " folder."
$smtp.Send($msg) 

} 

Else
      { 
    Write-host "No files here" -foregroundcolor Green 
      } 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-05-21T21:55:58.917

用于管道的一条线，也使用`GetFileSystemInfos().Count`with a test ：

```
gci -Directory | where { !@( $_.GetFileSystemInfos().Count) } 
```

将显示所有没有项目的目录。结果：

```
Directory: F:\Backup\Moving\Test

Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
d-----         5/21/2021   2:53 PM                Test [Remove]
d-----         5/21/2021   2:53 PM                Test - 1   
d-----         5/21/2021   2:39 PM                MyDir [abc]
d-----         5/21/2021   2:35 PM                Empty 
```

* * *

我发布这个是因为我遇到了包含括号的名称的极端问题`[ ]`；失败是在使用其他方法时，输出管道`Remove-Item`错过了带括号的目录名称。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-06-28T18:01:21.373

从 Get-ChildItem 获取计数可能会提供错误结果，因为空文件夹或访问文件夹时出错可能导致计数为 0。

我检查空文件夹的方法是分离出错误：

```
Try { # Test if folder can be scanned
   $TestPath = Get-ChildItem $Path -ErrorAction SilentlyContinue -ErrorVariable MsgErrTest -Force | Select-Object -First 1
}
Catch {}
If ($MsgErrTest) { "Error accessing folder" }
Else { # Folder can be accessed or is empty
   "Folder can be accessed"
   If ([string]::IsNullOrEmpty($TestPath)) { # Folder is empty
   "   Folder is empty"
   }
} 
```

上面的代码首先尝试访问该文件夹。如果发生错误，则输出发生错误。如果没有错误，说明“文件夹可以访问”，然后检查它是否为空。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-10-08T08:38:28.460

在查看了一些现有的答案并进行了一些试验后，我最终使用了这种方法：

```
function Test-Dir-Valid-Empty {
    param([string]$dir)
    (Test-Path ($dir)) -AND ((Get-ChildItem -att d,h,a $dir).count -eq 0)
} 
```

这将**首先检查有效目录**( `Test-Path ($dir)`)。然后它将检查任何内容，包括任何目录、隐藏文件或“常规”文件**，分别由于属性`d`、`h`和`a`。

用法应该足够清楚：

```
PS C_\> Test-Dir-Valid-Empty projects\some-folder
False 
```

...或者：

```
PS C:\> if(Test-Dir-Valid-Empty projects\some-folder){ "empty!" } else { "Not Empty." }
Not Empty. 
```

* * *

***实际上，我不是 100% 确定`a`这里定义的效果是什么，但无论如何它确实会导致所有文件都被包含在内。文档说明`ah`显示隐藏文件，我认为`as`应该显示系统文件，所以我猜测`a`它自己只是显示“常规”文件。如果你从上面的函数中删除它，它无论如何都会找到隐藏文件，但不会找到其他文件。*

# php - PHPUnit - 我得到一些不必要的异常（未定义的变量）

> ID：10550129
> 
> 赞同：0
> 
> 时间：2012-05-11T11:03:44.483
> 
> 标签：php, cmd, phpunit, testcase

我开始使用 PHPUnit，我想连接到我的数据库并从中获取一些值，但是因为我必须通过文件“database.php”连接到我的数据库。

'database.php' 总是有这个未定义变量的问题：$connected。所以我读了一些关于错误报告消息的内容：error_reporting(E_ALL ^ E_NOTICE);

我之前确实将它修复到我的项目中的其他文件，但是当我使用 PHPUnit 时，我收到此错误消息：未定义的变量：已连接

我的测试用例文件及其代码：

```
<?php include("database.php"); ?>
<?php
require_once 'person.php';

class PersonTest extends PHPUnit_Framework_TestCase {

    public function lookupPerson(){

    $result = database::query("select * from Person where forename='Anna'");
    $rows = mysql_numrows($result);
    for($i=0; $i < $rows; $i++){
    $arr[$i] = mysql_result($result, $i, 'forename');
    }
    return $arr;
    }

    public function testLooking(){
    $arr = PersonTest::lookupPerson();
    foreach($arr as $a){
    $this->assertEquals('Anna', $a);
    }
    }
}

?> 
```

所以我想知道我能做什么？

问候用户

还有阿列克谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:06:14.100

在您的代码顶部添加下面，这隐藏了所有通知......当然最好只修复错误:)

```
error_reporting(0);
ini_set("display_errors", 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:15:34.973

看看这个问题：[test the return value of a method that triggering an error with PHPUnit](https://stackoverflow.com/questions/1225776/test-the-return-value-of-a-method-that-triggers-an-error-with-phpunit)

那里的答案显示了如何防止 PHPUnit 将通知和警告视为异常。

如果可以，请修复通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T11:19:18.477

> 我之前确实将它修复到我的项目中的其他文件，但是当我使用 PHPUnit 时，我收到此错误消息：未定义的变量：已连接

`database.php`这个通知是从哪一行抛出的？也许你做了一个`if (!$connected)`地方，虽然`$connected`从来没有被写过。所以开始你`database.php`的`$connected = false`，你会失去通知。

# php - 在此查询中获取不同的值

> ID：10550130
> 
> 赞同：-1
> 
> 时间：2012-05-11T11:03:51.870
> 
> 标签：php, mysql

你好，这是我的查询：

```
 SELECT tbl_order_detail.order_id, tbl_order_lead_send_detail.customer_id, tbl_order_detail.order_title, tbl_order_detail.dealer_id , tbl_order_lead_send_detail.send_date_time
        FROM tbl_order_detail
        INNER JOIN tbl_order_lead_send_detail
        ON tbl_order_detail.order_id=tbl_order_lead_send_detail.order_id
        where tbl_order_detail.order_status='Active'
        ORDER BY tbl_order_lead_send_detail.send_date_time DESC 
```

我得到这个输出，

![紧迫的 ？](../Images/93a1e64018f476ad63db8b144972d2e0.png)

我只想为一个数据行获取一个数据行，这意味着**Order ID**的不同值。如何更改我的 sql 查询以获得我想要的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:05:43.720

```
SELECT distinct(tbl_order_detail.order_id), tbl_order_lead_send_detail.customer_id, tbl_order_detail.order_title, tbl_order_detail.dealer_id , tbl_order_lead_send_detail.send_date_time
        FROM tbl_order_detail
        INNER JOIN tbl_order_lead_send_detail
        ON tbl_order_detail.order_id=tbl_order_lead_send_detail.order_id
        where tbl_order_detail.order_status='Active'
        ORDER BY tbl_order_lead_send_detail.send_date_time DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:16:06.327

请注意，即使您`distinct`在查询中使用关键字，如果至少其中一列返回不同的数据，它仍然会为相同的订单 ID 返回多行。
您的结果图像显示 4 列，而您的查询要求 5；因此，并非 100% 可能确定问题出在哪里。
话虽如此，使用`select distinct`，看看它是否能解决您的问题。如果没有，您可能必须从查询中删除具有不同数据的列。
快乐编码！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T11:06:42.643

SELECT DISTINCT tbl_order_detail.order_id, ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T11:07:16.283

两种可能：

1）选择**不同的**..

2) 选择 ...**按 tbl_order_detail.order_id, tbl_order_lead_send_detail.customer_id, tbl_order_detail.order_title, tbl_order_detail.dealer_id , tbl_order_lead_send_detail.send_date_time 分组**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T11:21:43.373

*从您的一些屏幕截图中，每行的客户 ID*似乎都不同。您*需要*显示所有输出以获得合理的答案。

我很确定**SELECT DISTINCT**没有损坏，因此您*必须*选择非唯一行。

# java - 使用 JRAT Java Runtime Analysis Toolkit 分析简单的 java 程序

> ID：10550131
> 
> 赞同：1
> 
> 时间：2012-05-11T11:03:54.980
> 
> 标签：java, profiler

我想为我的简单 java 程序使用 JRAT 分析器，如下所示：

```
public class MainController {

    public static int a=4;

    public static void main(String[] args) {

        for(int i=0;i<30;i++)
        {
            methodA();
            //System.out.println("Hello");
        }

    }

        static void methodA()
        {
            System.out.println("This is Method A");
            methodB();
        }

        static void methodB()
        {
            System.out.println("This is Method B");
            methodC();
        }
        static void methodC()
        {
            System.out.println("This is Method C");

        }

} 
```

我运行 JRAT 命令如下： java -javaagent:shiftone-jrat.jar cased/test/MainController

我运行以下命令来查看输出： java -Xmx256M -jar shiftone-jrat.jar

我在 outputfile 中看到的不是那么好。在某些视图中，我期待方法签名和方法调用层次结构。输出如下所示：

```
viewer="org.shiftone.jrat.ui.viewer.SimpleTextOutputViewBuilder"
JRat:INFO (May/11 12:32:57,613) (main) RuntimeContextImpl - logfile created
JRat:INFO (May/11 12:32:57,613) (main) RuntimeContextImpl - Running JRat version 1-alpha2 - built on July 31 2006
JRat:INFO (May/11 12:32:57,614) (main) Settings - string 'jrat.factory' = 'org.shiftone.jrat.provider.silent.SilentMethodHandler'
JRat:INFO (May/11 12:32:57,614) (main) RootFactory - JRat creating root handler factory...
JRat:INFO (May/11 12:32:57,618) (JRat-Shutdown) ShutdownRegistry - shutting down...[Transformer[AsmInjectorStrategy(uses http://asm.objectweb.org)], FileOutputRegistry[PrintWriter[001_JRat-LOG.jrat]]]
JRat:INFO (May/11 12:32:57,618) (JRat-Shutdown) ShutdownRegistry - shutting down FileOutputRegistry[PrintWriter[001_JRat-LOG.jrat]]...
JRat:INFO (May/11 12:32:57,618) (JRat-Shutdown) FileOutputRegistry - closeFileOutputs [PrintWriter[001_JRat-LOG.jrat]]
JRat:INFO (May/11 12:32:57,618) (JRat-Shutdown) FileOutputRegistry - closing : PrintWriter[001_JRat-LOG.jrat]
JRat:INFO (May/11 12:32:57,619) (JRat-Shutdown) FileOutputPrintWriter - closing
JRat:INFO (May/11 12:32:57,619) (JRat-Shutdown) FileOutputRegistry - remove PrintWriter[001_JRat-LOG.jrat] 
```

有谁知道如何获取方法调用和方法签名以及方法层次结构（如调用图）？还有什么是仪表和注入选项在查看器中的作用？我是分析和 JRAT 的新手。我真的很感激任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:11:15.357

最后我发现了为什么我看不到正确的输出。我使用的是旧版本的 JRAT。如果你使用下面的版本，它会显示正确的输出。

[http://pages.cpsc.ucalgary.ca/~jacobs/Courses/cpsc331/W07/java/profiler.html](http://pages.cpsc.ucalgary.ca/~jacobs/Courses/cpsc331/W07/java/profiler.html)

# ipad - 什么导致错误 NSNetServicesErrorCode = "-72000"？

> ID：10550137
> 
> 赞同：5
> 
> 时间：2012-05-11T11:04:24.280
> 
> 标签：ipad, ios5, uiwebview, nsnetservice

我创建了一个简单的浏览器，可以使用 UIWebview 加载本地文件。起初，当我尝试预览 html 文件时，uiwebview 可以加载源文件并进行预览。但是在我最小化应用程序（应用程序进入后台），然后再次打开应用程序后，我收到了这个错误：

```
Error Dict: {
    NSNetServicesErrorCode = "-72000";
    NSNetServicesErrorDomain = 10;
} 
```

之后，uiwebview 无法加载源文件，当我登录错误时`(void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error`，它显示此消息：

```
Error Domain=NSURLErrorDomain Code=-1004 "Could not connect to the server." UserInfo=0x53d610 {NSErrorFailingURLStringKey=http://localhost:9898/local/a.html?83C66B33-874C-41A7-BBF5-78D1615512DF, NSErrorFailingURLKey=http://localhost:9898/local/a.html?83C66B33-874C-41A7-BBF5-78D1615512DF, NSLocalizedDescription=Could not connect to the server., NSUnderlyingError=0x5ccaa0 "Could not connect to the server."} 
```

该应用程序没有崩溃，但旋转指示器永远不会停止。

有人能告诉我是什么原因导致这个案子吗？以及如何解决？

谢谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-11-10T14:24:02.900

如果您查看`NSNetServices`标题内部，您将看到以下枚举来解释每个错误：

```
typedef NS_ENUM(NSInteger, NSNetServicesError) {

/* An unknown error occured during resolution or publication.
*/
    NSNetServicesUnknownError = -72000L,

/* An NSNetService with the same domain, type and name was already present when the publication request was made.
*/
    NSNetServicesCollisionError = -72001L,

/* The NSNetService was not found when a resolution request was made.
*/
    NSNetServicesNotFoundError  = -72002L,

/* A publication or resolution request was sent to an NSNetService instance which was already published or a search request was made of an NSNetServiceBrowser instance which was already searching.
*/
    NSNetServicesActivityInProgress = -72003L,

/* An required argument was not provided when initializing the NSNetService instance.
*/
    NSNetServicesBadArgumentError = -72004L,

/* The operation being performed by the NSNetService or NSNetServiceBrowser instance was cancelled.
*/
    NSNetServicesCancelledError = -72005L,

/* An invalid argument was provided when initializing the NSNetService instance or starting a search with an NSNetServiceBrowser instance.
*/
    NSNetServicesInvalidError = -72006L,

/* Resolution of an NSNetService instance failed because the timeout was reached.
*/
    NSNetServicesTimeoutError = -72007L,

}; 
```

您遇到服务冲突错误，这意味着具有相同域、类型和名称的网络服务已经在您的网络上发布其服务。

一般来说，我总是查阅头文件以获取错误代码。它们几乎总是由枚举值分配，并且枚举通常具有比使用的数字更具描述性的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T23:10:01.973

问题似乎是您尝试连接的主机：`http://localhost:9898/local/[..]`

你电脑上的 localhost 就是你的电脑，你 ipad 上的 localhost 就是你的 ipad——用于测试使用可解析的域名或 ip 地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-15T00:11:25.703

Sergiu Todirascu 在问题中的评论为我解决了这个问题。Mac 沙盒导致此问题，我必须在权利选项卡中打开网络，在我的情况下，传入和传出网络复选框。创建一个答案，以便更容易看到。

# php - 带有 Moneris 的 Magento 支付模块

> ID：10550138
> 
> 赞同：1
> 
> 时间：2012-05-11T11:04:31.760
> 
> 标签：php, zend-framework, magento, payment-gateway

[在https://github.com/ph/magento-moneris](https://github.com/ph/magento-moneris)的帮助下，我设法在 Magento 中创建了一个 Moneris 支付网关，我现在正在使用 Moneris Development 站点对其进行测试。

我有几个问题，我很困惑，不知道如何继续。

*   有没有办法可以在代码中的某个位置将“仅授权”设置为“授权和捕获”，以便在下订单时同时执行捕获？

*   还有一种方法可以在下订单的同时开具发票，并将发票邮件发送给客户 n 店主。

*   例如：单击“下订单”时，会检查并验证客户的卡详细信息。如果他们没问题，那么付款会同时在商家的帐户中被捕获，并且发票电子邮件会发送给客户和店主。

如果卡的详细信息不正确，则在前端向客户显示适当的消息，并将该订单保持为待处理状态，并提供适当的理由供店主查看。

我现在拥有的代码是用于`_authorize`n 个`_capture`函数的。它们是否需要修改或需要创建新功能。

```
 public function authorize(Varien_Object $payment, $amount)
    {
     $error = false;
     // check for payment
    if($amount > 0) {
$payment->setAmount($amount);
// Map magento keys to moneris way
$order = $payment->getOrder();
$billing = $order->getBillingAddress();
$avsTemplate = array('avs_zipcode' => $order->getBillingAddress()->getPostcode(), 'avs_street_number' => $order->getBillingAddress()->getStreet(1),'', 'avs_street_name' => $order->getBillingAddress()->getStreet(2),'');
$mpgAvsInfo = new mpgAvsInfo($avsTemplate);
$cvdTemplate = array('cvd_value' => $payment->getCcCid(),'cvd_indicator' => 1);

$mpgCvdInfo = new mpgCvdInfo($cvdTemplate);
$transaction = $this->_build($payment, self::TRANSACTION_PREAUTH);
$transaction->setAvsInfo($mpgAvsInfo);
$transaction->setCvdInfo($mpgCvdInfo);  
$response = $this->_send($transaction);
$payment->setCcApproval($response->getReceiptId())
         ->setLastTransId($response->getReceiptId())
         ->setCcTransId($response->getTxnNumber())
         ->setCcAvsStatus($response->getAuthCode())
         ->setCcCidStatus($response->getResponseCode());        
if($response->getResponseCode() > 0 && $response->getResponseCode() <= self::ERROR_CODE_LIMIT) 
{
    $payment->setStatus(self::STATUS_APPROVED);
    $message = 'AVS Response: ' . Mage::helper('paygate')->__($this->_errors[$response->getAvsResultCode()]);
    $message .= '<br>CVD Response: ' . Mage::helper('paygate')->__($this->_errors[$response->getCvdResultCode()]);
    Mage::getSingleton('core/session')->addSuccess($message);
} 
else if($response->getResponseCode() > self::ERROR_CODE_LIMIT && $response->getResponseCode() < self::ERROR_CODE_UPPER_LIMIT)
{
    $error = Mage::helper('paygate')->__($this->_errors[$response->getResponseCode()]);
} 
else 
{
    $error = Mage::helper('paygate')->__('Incomplete transaction.');
}
}
else
{
$error = Mage::helper('paygate')->__('Invalid amount for authorization.');
} 
 if ($error !== false)
 Mage::throwException($error);
  return $this;
} 

  /**
  * Capture the authorized transaction for a specific order
  * @var Variant_Object $payment
  * @var Float $amount
  */
   public function capture(Varien_Object $payment, $amount) {
   $error = false;
   // check for payment
if ($amount <= 0) 
{
     Mage::throwException(Mage::helper('paygate')->__('Invalid amount for capture.'));
    }
if($amount > 0)
{
    $payment->setAmount($amount);
    // Map magento keys to moneris way
    $transaction = $this->_build($payment, self::TRANSACTION_COMPLETION);
    $response = $this->_send($transaction);

    if($response->getResponseCode() > 0 && $response->getResponseCode() <= self::ERROR_CODE_LIMIT)
    {
        $payment->setStatus(self::STATUS_SUCCESS);
        $message = 'AVS Response: ' . Mage::helper('paygate')->__($this->_errors[$response->getAvsResultCode()]);
        $message .= '<br>CVD Response: ' . Mage::helper('paygate')->__($this->_errors[$response->getCvdResultCode()]);
        Mage::getSingleton('core/session')->addSuccess($message);
    }
    else if($response->getResponseCode() > self::ERROR_CODE_LIMIT && $response->getResponseCode() < self::ERROR_CODE_UPPER_LIMIT) 
    {
        $error = Mage::helper('paygate')->__($this->_errors[$response->getResponseCode()]);
    }
    else 
    {
        $error = Mage::helper('paygate')->__('Incomplete transaction.');
    }
} 
else
{
    $error = Mage::helper('paygate')->__('Invalid amount for capture.');
}

// we've got something bad here.
if ($error !== false)
Mage::throwException($error);

return $this;

  } 
```

随意在任何地方纠正我或建议一种更好的方法来做我想做的事情。

最后，我期待在 Magento 中构建一个基本的 Moneris 支付网关，如果卡的详细信息正确，它会授权 n 捕获金额，并在点击“下订单”的同时将发票邮件发送给客户 n 店主'。

如果卡详细信息有误，则向客户显示适当的消息，并将其保持为待处理，并提供待付款的正确理由，以供店主查看。

# android - 使用 AsyncTask 的 Android ICS 和 MJPEG

> ID：10550139
> 
> 赞同：30
> 
> 时间：2012-05-11T11:04:39.863
> 
> 标签：android, android-asynctask, mjpeg, ip-camera

我修改了[Android 和 MJPEG](https://stackoverflow.com/questions/3205191/android-and-mjpeg)中的 MJPEG 查看器代码以使用 AsyncTask 工作（因此可以在 Ice Cream Sandwich (ICS)，4.0.4 上工作），这是我的代码。

如果有人对如何优化、清理或对代码做更正确的事情有任何建议，请告诉我。我希望能帮助解决两个问题：

*   如果您将设备放在流上，则锁定屏幕并解锁屏幕，直到您终止并恢复应用程序或旋转屏幕，它才会恢复播放。我所有使用 OnResume() 做某事或其他事情的尝试都导致了应用程序崩溃。

*   特别是我想在 MjpegInputStream.java 中恢复 AsyncTask 但无法使其正常工作。

MjpegActivity.java：

```
package com.demo.mjpeg;

import java.io.IOException;
import java.net.URI;

import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

import com.demo.mjpeg.MjpegView.MjpegInputStream;
import com.demo.mjpeg.MjpegView.MjpegView;
import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.Window;
import android.view.WindowManager;
import android.widget.Toast;

public class MjpegActivity extends Activity {
    private static final String TAG = "MjpegActivity";

    private MjpegView mv;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        //sample public cam
        String URL = "http://trackfield.webcam.oregonstate.edu/axis-cgi/mjpg/video.cgi?resolution=800x600&amp%3bdummy=1333689998337";

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
        WindowManager.LayoutParams.FLAG_FULLSCREEN);

        mv = new MjpegView(this);
        setContentView(mv);        

        new DoRead().execute(URL);
    }

    public void onPause() {
        super.onPause();
        mv.stopPlayback();
    }

    public class DoRead extends AsyncTask<String, Void, MjpegInputStream> {
        protected MjpegInputStream doInBackground(String... url) {
            //TODO: if camera has authentication deal with it and don't just not work
            HttpResponse res = null;
            DefaultHttpClient httpclient = new DefaultHttpClient();     
            Log.d(TAG, "1\. Sending http request");
            try {
                res = httpclient.execute(new HttpGet(URI.create(url[0])));
                Log.d(TAG, "2\. Request finished, status = " + res.getStatusLine().getStatusCode());
                if(res.getStatusLine().getStatusCode()==401){
                    //You must turn off camera User Access Control before this will work
                    return null;
                }
                return new MjpegInputStream(res.getEntity().getContent());  
            } catch (ClientProtocolException e) {
                e.printStackTrace();
                Log.d(TAG, "Request failed-ClientProtocolException", e);
                //Error connecting to camera
            } catch (IOException e) {
                e.printStackTrace();
                Log.d(TAG, "Request failed-IOException", e);
                //Error connecting to camera
            }

            return null;
        }

        protected void onPostExecute(MjpegInputStream result) {
            mv.setSource(result);
            mv.setDisplayMode(MjpegView.SIZE_BEST_FIT);
            mv.showFps(true);
        }
    }
} 
```

MjpegInputStream.java：

```
package com.demo.mjpeg.MjpegView;

import java.io.BufferedInputStream;
import java.io.ByteArrayInputStream;
import java.io.DataInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.util.Properties;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.util.Log;

public class MjpegInputStream extends DataInputStream {
    private static final String TAG = "MjpegInputStream";

    private final byte[] SOI_MARKER = { (byte) 0xFF, (byte) 0xD8 };
    private final byte[] EOF_MARKER = { (byte) 0xFF, (byte) 0xD9 };
    private final String CONTENT_LENGTH = "Content-Length";
    private final static int HEADER_MAX_LENGTH = 100;
    private final static int FRAME_MAX_LENGTH = 40000 + HEADER_MAX_LENGTH;
    private int mContentLength = -1;

    public MjpegInputStream(InputStream in) {
        super(new BufferedInputStream(in, FRAME_MAX_LENGTH));
    }

    private int getEndOfSeqeunce(DataInputStream in, byte[] sequence) throws IOException {
        int seqIndex = 0;
        byte c;
        for(int i=0; i < FRAME_MAX_LENGTH; i++) {
            c = (byte) in.readUnsignedByte();
            if(c == sequence[seqIndex]) {
                seqIndex++;
                if(seqIndex == sequence.length) {
                    return i + 1;
                }
            } else {
                seqIndex = 0;
            }
        }
        return -1;
    }

    private int getStartOfSequence(DataInputStream in, byte[] sequence) throws IOException {
        int end = getEndOfSeqeunce(in, sequence);
        return (end < 0) ? (-1) : (end - sequence.length);
    }

    private int parseContentLength(byte[] headerBytes) throws IOException, NumberFormatException {
        ByteArrayInputStream headerIn = new ByteArrayInputStream(headerBytes);
        Properties props = new Properties();
        props.load(headerIn);
        return Integer.parseInt(props.getProperty(CONTENT_LENGTH));
    }   

    public Bitmap readMjpegFrame() throws IOException {
        mark(FRAME_MAX_LENGTH);
        int headerLen = getStartOfSequence(this, SOI_MARKER);
        reset();
        byte[] header = new byte[headerLen];
        readFully(header);
        try {
            mContentLength = parseContentLength(header);
        } catch (NumberFormatException nfe) { 
            nfe.getStackTrace();
            Log.d(TAG, "catch NumberFormatException hit", nfe);
            mContentLength = getEndOfSeqeunce(this, EOF_MARKER); 
        }
        reset();
        byte[] frameData = new byte[mContentLength];
        skipBytes(headerLen);
        readFully(frameData);
        return BitmapFactory.decodeStream(new ByteArrayInputStream(frameData));
    }
} 
```

MjpegView.java：

```
package com.demo.mjpeg.MjpegView;

import java.io.IOException;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.PorterDuff;
import android.graphics.PorterDuffXfermode;
import android.graphics.Rect;
import android.graphics.Typeface;
import android.util.AttributeSet;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public class MjpegView extends SurfaceView implements SurfaceHolder.Callback {
    private static final String TAG = "MjpegView";

    public final static int POSITION_UPPER_LEFT  = 9;
    public final static int POSITION_UPPER_RIGHT = 3;
    public final static int POSITION_LOWER_LEFT  = 12;
    public final static int POSITION_LOWER_RIGHT = 6;

    public final static int SIZE_STANDARD   = 1; 
    public final static int SIZE_BEST_FIT   = 4;
    public final static int SIZE_FULLSCREEN = 8;

    private MjpegViewThread thread;
    private MjpegInputStream mIn = null;    
    private boolean showFps = false;
    private boolean mRun = false;
    private boolean surfaceDone = false;    
    private Paint overlayPaint;
    private int overlayTextColor;
    private int overlayBackgroundColor;
    private int ovlPos;
    private int dispWidth;
    private int dispHeight;
    private int displayMode;

    public class MjpegViewThread extends Thread {
        private SurfaceHolder mSurfaceHolder;
        private int frameCounter = 0;
        private long start;
        private Bitmap ovl;

        public MjpegViewThread(SurfaceHolder surfaceHolder, Context context) {
            mSurfaceHolder = surfaceHolder;
        }

        private Rect destRect(int bmw, int bmh) {
            int tempx;
            int tempy;
            if (displayMode == MjpegView.SIZE_STANDARD) {
                tempx = (dispWidth / 2) - (bmw / 2);
                tempy = (dispHeight / 2) - (bmh / 2);
                return new Rect(tempx, tempy, bmw + tempx, bmh + tempy);
            }
            if (displayMode == MjpegView.SIZE_BEST_FIT) {
                float bmasp = (float) bmw / (float) bmh;
                bmw = dispWidth;
                bmh = (int) (dispWidth / bmasp);
                if (bmh > dispHeight) {
                    bmh = dispHeight;
                    bmw = (int) (dispHeight * bmasp);
                }
                tempx = (dispWidth / 2) - (bmw / 2);
                tempy = (dispHeight / 2) - (bmh / 2);
                return new Rect(tempx, tempy, bmw + tempx, bmh + tempy);
            }
            if (displayMode == MjpegView.SIZE_FULLSCREEN){
                return new Rect(0, 0, dispWidth, dispHeight);
            }
            return null;
        }

        public void setSurfaceSize(int width, int height) {
            synchronized(mSurfaceHolder) {
                dispWidth = width;
                dispHeight = height;
            }
        }

        private Bitmap makeFpsOverlay(Paint p, String text) {
            Rect b = new Rect();
            p.getTextBounds(text, 0, text.length(), b);
            int bwidth  = b.width()+2;
            int bheight = b.height()+2;
            Bitmap bm = Bitmap.createBitmap(bwidth, bheight, Bitmap.Config.ARGB_8888);
            Canvas c = new Canvas(bm);
            p.setColor(overlayBackgroundColor);
            c.drawRect(0, 0, bwidth, bheight, p);
            p.setColor(overlayTextColor);
            c.drawText(text, -b.left+1, (bheight/2)-((p.ascent()+p.descent())/2)+1, p);
            return bm;           
        }

        public void run() {
            start = System.currentTimeMillis();
            PorterDuffXfermode mode = new PorterDuffXfermode(PorterDuff.Mode.DST_OVER);
            Bitmap bm;
            int width;
            int height;
            Rect destRect;
            Canvas c = null;
            Paint p = new Paint();
            String fps;
            while (mRun) {
                if(surfaceDone) {
                    try {
                        c = mSurfaceHolder.lockCanvas();
                        synchronized (mSurfaceHolder) {
                            try {
                                bm = mIn.readMjpegFrame();
                                destRect = destRect(bm.getWidth(),bm.getHeight());
                                c.drawColor(Color.BLACK);
                                c.drawBitmap(bm, null, destRect, p);
                                if(showFps) {
                                    p.setXfermode(mode);
                                    if(ovl != null) {
                                        height = ((ovlPos & 1) == 1) ? destRect.top : destRect.bottom-ovl.getHeight();
                                        width  = ((ovlPos & 8) == 8) ? destRect.left : destRect.right -ovl.getWidth();
                                        c.drawBitmap(ovl, width, height, null);
                                    }
                                    p.setXfermode(null);
                                    frameCounter++;
                                    if((System.currentTimeMillis() - start) >= 1000) {
                                        fps = String.valueOf(frameCounter)+" fps";
                                        frameCounter = 0; 
                                        start = System.currentTimeMillis();
                                        ovl = makeFpsOverlay(overlayPaint, fps);
                                    }
                                }
                            } catch (IOException e) {
                                e.getStackTrace();
                                Log.d(TAG, "catch IOException hit in run", e);
                            }
                        }
                    } finally { 
                        if (c != null) {
                            mSurfaceHolder.unlockCanvasAndPost(c); 
                        }
                    }
                }
            }
        }
    }

    private void init(Context context) {
        SurfaceHolder holder = getHolder();
        holder.addCallback(this);
        thread = new MjpegViewThread(holder, context);
        setFocusable(true);
        overlayPaint = new Paint();
        overlayPaint.setTextAlign(Paint.Align.LEFT);
        overlayPaint.setTextSize(12);
        overlayPaint.setTypeface(Typeface.DEFAULT);
        overlayTextColor = Color.WHITE;
        overlayBackgroundColor = Color.BLACK;
        ovlPos = MjpegView.POSITION_LOWER_RIGHT;
        displayMode = MjpegView.SIZE_STANDARD;
        dispWidth = getWidth();
        dispHeight = getHeight();
    }

    public void startPlayback() { 
        if(mIn != null) {
            mRun = true;
            thread.start();         
        }
    }

    public void stopPlayback() { 
        mRun = false;
        boolean retry = true;
        while(retry) {
            try {
                thread.join();
                retry = false;
            } catch (InterruptedException e) {
                e.getStackTrace();
                Log.d(TAG, "catch IOException hit in stopPlayback", e);
            }
        }
    }

    public MjpegView(Context context, AttributeSet attrs) { 
        super(context, attrs); init(context); 
    }

    public void surfaceChanged(SurfaceHolder holder, int f, int w, int h) { 
        thread.setSurfaceSize(w, h); 
    }

    public void surfaceDestroyed(SurfaceHolder holder) { 
        surfaceDone = false; 
        stopPlayback(); 
    }

    public MjpegView(Context context) { 
        super(context);
        init(context); 
    }

    public void surfaceCreated(SurfaceHolder holder) { 
        surfaceDone = true; 
    }

    public void showFps(boolean b) { 
        showFps = b; 
    }

    public void setSource(MjpegInputStream source) { 
        mIn = source;
        startPlayback();
    }

    public void setOverlayPaint(Paint p) { 
        overlayPaint = p; 
    }

    public void setOverlayTextColor(int c) { 
        overlayTextColor = c; 
    }

    public void setOverlayBackgroundColor(int c) { 
        overlayBackgroundColor = c; 
    }

    public void setOverlayPosition(int p) { 
        ovlPos = p; 
    }

    public void setDisplayMode(int s) { 
        displayMode = s; 
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:13:11.733

干得好！对于您的 onResume() 问题，将以下代码从 onCreate() 移动到 onResume() 还不够吗？

```
 //sample public cam 
    String URL = "http://trackfield.webcam.oregonstate.edu/axis-cgi/mjpg/video.cgi?resolution=800x600&amp%3bdummy=1333689998337"; 

    mv = new MjpegView(this); 
    setContentView(mv);         

    new DoRead().execute(URL); 
```

然后你只需重新创建 AsyncTask 的视图和新实例......我试过了，它对我有用......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-19T18:22:53.743

如果您想访问具有用户名或密码的网络摄像机，您可能希望将其添加到您的网络`DefaultHttpClient`摄像机中，上述代码将适用于需要身份验证的摄像机，这对新手很有帮助

```
 CredentialsProvider provider = new BasicCredentialsProvider();
            UsernamePasswordCredentials credentials = new UsernamePasswordCredentials("yourusername", "yourpassword");
            provider.setCredentials(AuthScope.ANY, credentials);
            DefaultHttpClient httpclient = new DefaultHttpClient();
            httpclient.setCredentialsProvider(provider); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-04T12:02:41.437

感谢您的代码，它非常有帮助

我想建议一些优化技巧，这些技巧已经在我的代码中使用，整体性能可以轻松提高几倍。

1.  在可能的情况下，我在帧读取期间删除了内存分配

    ```
    private final static int HEADER_MAX_LENGTH = 100;
    private final static int FRAME_MAX_LENGTH = 200000 + HEADER_MAX_LENGTH;
    private final String CONTENT_LENGTH = "Content-Length:";
    private final String CONTENT_END = "\r\n";
    private final static byte[] gFrameData = new byte[FRAME_MAX_LENGTH];
    private final static byte[] gHeader = new byte[HEADER_MAX_LENGTH];
    BitmapFactory.Options bitmapOptions = new BitmapFactory.Options();

    public Bitmap readMjpegFrame() throws IOException {

        mark(FRAME_MAX_LENGTH);
        int headerLen = getStartOfSequence(SOI_MARKER);

        if(headerLen < 0)
            return false;

        reset();
        readFully(gHeader, 0, headerLen);

        int contentLen;

        try
        {
            contentLen = parseContentLength(gHeader, headerLen);
        } catch (NumberFormatException nfe) 
        {
            nfe.getStackTrace();
            Log.d(TAG, "catch NumberFormatException hit", nfe);
            contentLen = getEndOfSequence(EOF_MARKER);
        }

        readFully(gFrameData, 0, contentLen);

        Bitmap bm = BitmapFactory.decodeByteArray(gFrameData, 0, contentLen, bitmapOptions);
        bitmapOptions.inBitmap = bm;

        return bm;
    } 
    ```

2.  优化parseContentLength，尽量去掉String操作

    ```
    byte[] CONTENT_LENGTH_BYTES;
    byte[] CONTENT_END_BYTES;

    public MjpegInputStream(InputStream in)
    {
        super(new BufferedInputStream(in, FRAME_MAX_LENGTH));

        bitmapOptions.inSampleSize = 1;
        bitmapOptions.inPreferredConfig = Bitmap.Config.RGB_565;
        bitmapOptions.inPreferQualityOverSpeed = false;
        bitmapOptions.inPurgeable = true;
        try
        {
            CONTENT_LENGTH_BYTES = CONTENT_LENGTH.getBytes("UTF-8");
            CONTENT_END_BYTES = CONTENT_END.getBytes("UTF-8");
        } catch (UnsupportedEncodingException e) 
        {
            e.printStackTrace();
        }
    }

    private int findPattern(byte[] buffer, int bufferLen, byte[] pattern, int offset)
    {
        int seqIndex = 0;
        for(int i=offset; i < bufferLen; ++i)
        {
            if(buffer[i] == pattern[seqIndex])
            {
                ++seqIndex;
                if(seqIndex == pattern.length)
                {
                    return i + 1;
                }
            } else
            {
                seqIndex = 0;
            }
        }

        return -1;
    }

    private int parseContentLength(byte[] headerBytes, int length) throws IOException, NumberFormatException
    {
        int begin = findPattern(headerBytes, length, CONTENT_LENGTH_BYTES, 0);
        int end = findPattern(headerBytes, length, CONTENT_END_BYTES, begin) - CONTENT_END_BYTES.length;

        // converting string to int
        int number = 0;
        int radix = 1;
        for(int i = end - 1; i >= begin; --i)
        {
            if(headerBytes[i] > 47 && headerBytes[i] < 58)
            {
                number += (headerBytes[i] - 48) * radix;
                radix *= 10;
            }
        }

        return number;
    } 
    ```

代码中可能存在错误，因为我正在为 stackoverflow 重写它，最初我使用 2 个线程，一个正在读取帧，另一个正在渲染。

我希望它对某人有所帮助。

# c++ - 如何使 ld 将 Multiply 定义的结构/类视为错误？

> ID：10550140
> 
> 赞同：3
> 
> 时间：2012-05-11T11:04:42.703
> 
> 标签：c++, gcc, ld, multiple-definition-error

编辑 - 澄清我的问题的目标：我浪费了很多时间来诊断我希望链接器报告的问题，这是由公认的糟糕的编程风格引起的，例如从一个编译单元复制粘贴代码块时会弹出到另一个，并改变它。

我正在寻找一种在编译/链接时检测此问题的方法。

在此设置中：

**啊**

```
void foo(); 
```

**A.cpp**

```
struct A { 
  int values[100];
  A(){ 
    std::cout << __FILE__ << ": A::A()\n";
}};
void foo(){ 
   A a;
} 
```

**主文件**

```
#include "A.h"
struct A { 
  double values[100];
  A(){ 
  std::cout << __FILE__ << ": A::A()\n";
}};
int main(){ foo(); }
// void foo(){} ===> this would cause a linker error 
```

我希望链接器报告结构`A`或至少构造函数`A::A()`被定义了两次。

但是，g++ 4.4 链接就好了。运行代码显示，在这种情况下，链接器选择使用`A`from A.cpp。

```
$ g++ -Wall A.cpp main.cpp && ./a.out
A.cpp:3
A.cpp:7
A.cpp:3 
```

当一个*函数* `foo()`出现在两个目标文件中时，链接器会报告一个多重定义，但对于结构，它不会。

编辑：刚刚发现通过使用`nm -C *.o`Ao 和 main.o 都`A::A()`定义为*弱符号*。这使它可以从具有相同名称的符号池中“选择”。也许这个问题可以改写为“我怎样才能使编译器生成*强*符号？”......

```
00000000 W A::A() 
```

我怎样才能检测到这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T11:24:25.080

> 也许这个问题可以改写为“我怎样才能使编译器生成强符号？”......

尝试限制`inline`函数的使用：

```
struct A {
    A();
};

// Inside A.cpp
A::A() { 
    std::cout << __FILE__ << ": A::A()\n";
} 
```

实现更有可能报告未声明的函数`inline`（包括*隐式*声明的函数`inline`，如在类定义中定义的成员）的 ODR 违规，但严格来说，这种诊断从来不需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:12:21.513

这不是问题，也不是重新定义。这就是 C++ 的工作原理。想一想——你把类*定义*放在头文件中（只暴露声明远不常见）。标题几乎被复制粘贴到每个使用它们的翻译单元中。在多个 TU 中具有同一类的多个定义*不会*是错误的。所以，这不是要解决的问题。

但是，如果在同一名称下定义了不同的类，编译器/链接器应该会抱怨。

# jquery - 带有实时功能的 jQuery 工具 Dateinput

> ID：10550152
> 
> 赞同：0
> 
> 时间：2012-05-11T11:06:02.023
> 
> 标签：jquery, datepicker, live

我正在使用 jQuery 工具 Dateinput 脚本[http://jquerytools.org/demos/dateinput/index.html](http://jquerytools.org/demos/dateinput/index.html)作为日期选择器。

```
$('.inputDate').dateinput({
    format: 'yyyy-mm-dd'
}); 
```

我正在克隆这个输入字段，所以我必须使用实时功能。目前，克隆后我正在使用此功能

```
 $('.dateDiv:last').find('.inputDate').dateinput({
        format: 'yyyy-mm-dd'
    }); 
```

它工作得很好，但我只是想知道我是否可以使用这样的东西

```
$('.inputDate').live('focus', function(){
   ???
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:50:16.653

你可以这样做

```
$('input.datePick').live('focusin', function() {
   $(this).datetime(); 
}); 
```

希望这可以帮助

# iphone - 我无法保存从另一个类检索 NSurl？

> ID：10550156
> 
> 赞同：0
> 
> 时间：2012-05-11T11:06:17.720
> 
> 标签：iphone, objective-c, ios, xcode, nsurl

我有一个返回 NSUrl 的函数，我想在另一个类中使用它。但是当我试图在我的其他班级中检索它时，它给了我空值。这是我的第一堂课

```
@interface UOEventDetailController : UIViewController {
NSURL *imgData;
}
@property(nonatomic, retain)NSURL *imgData;
-(NSURL *)imgData;

@implementation UOEventDetailController
@synthesize imgData; 
```

.m 文件

```
-(NSURL *)imgData{
UOEventPost *post = (UOEventPost *)self.event;
NSURL *url = [NSURL URLWithString:post.postImageURL];
return url;
} 
```

我想检索此类中的 URL

```
@class UOEventDetailController;

@interface UOEnlargeImageViewController : UIViewController {
IBOutlet UIImageView *enlargedImage;

}
@property (nonatomic, retain) UOEventDetailController *controller;
@property (nonatomic, retain) IBOutlet UIImageView *enlargedImage; 
```

.m 文件

```
@implementation UOEnlargeImageViewController
@synthesize controller;
@synthesize enlargedImage;

- (void)viewDidLoad
{
[super viewDidLoad];
self.title = @"Enlarged Image";
controller = [[UOEventDetailController alloc]init];
NSURL *url = [controller imgData];
NSLog(@"%@",url);

}
@end 
```

我可以检索 post.postImageUrl 以外的对象。例如，而不是 post.postImageUrl，我输入了像 @"omg"、@"god" 这样的字符串，它在我的其他类中被检索到......

## 编辑

```
-(IBAction)enlargeImg{
UOEventPost *post = (UOEventPost *)self.event;
UOEnlargeImageViewController *enlarge = [[UOEnlargeImageViewController alloc]initWithNibName:nil bundle:nil];
enlarge.temp = post.postImageURL;
[self.navigationController pushViewController:enlarge animated:YES];
[suggestPopupView removeFromSuperview];
[enlarge release];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:08:57.653

这是因为您正在制作一个新对象。而新对象的相关属性为空，因此 url 也为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:49:50.080

对象将为空，因为正在创建新对象并且它的状态与您想要的不同，如果流程向后，您必须使用协议和委托将对象传递给另一个类，否则请确保您在同一个对象上工作。

# javascript - 在 JavaScript 中将关联项推送到数组中

> ID：10550158
> 
> 赞同：61
> 
> 时间：2012-05-11T11:06:21.437
> 
> 标签：javascript

如何更正以下代码？

```
var arr = [];
var name = "name";
var val = 2;
arr.push(val); //works , but not associative
arr[name] = val; //does not work
console.log(arr);
```

[JSFiddle](http://jsfiddle.net/bz8pK/)

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-05-11T11:07:18.187

要[在 JavaScript 中创建类似关联数组的](http://www.quirksmode.org/js/associative.html)东西，您必须使用对象。​</p>

```
var obj = {}; // {} will create an object
var name = "name";
var val = 2;
obj[name] = val;
console.log(obj);
```

**演示：http:** [//jsfiddle.net/bz8pK/1/](http://jsfiddle.net/bz8pK/1/)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-05-11T11:07:39.937

JavaScript 没有关联数组。您需要使用 Objects 代替：

```
var obj = {};
var name = "name";
var val = 2;
obj[name] = val;
console.log(obj);​ 
```

为了获得价值，您现在可以使用不同的方式：

```
console.log(obj.name);​
console.log(obj[name]);​
console.log(obj["name"]);​ 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-08-02T11:28:29.243

JavaScript**有**关联数组。

这是一个工作片段。

```
<script type="text/javascript">
  var myArray = [];
  myArray['thank'] = 'you';
  myArray['no'] = 'problem';
  console.log(myArray);
</script>
```

它们被简单地称为对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-18T01:15:41.147

### 另一种创建 JavaScript 关联数组的方法

首先创建一个对象数组，

```
 var arr = {'name': []}; 
```

接下来，将值推送到对象。

```
 var val = 2;
  arr['name'].push(val); 
```

从中读取：

```
var val = arr.name[0]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-10T04:20:36.247

如果您来这个问题是为了寻找一种方法来推入关联数组的末尾，同时保留顺序，就像一个适当的堆栈一样，这个方法应该可以工作。尽管输出与原始问题不同，但仍然可以迭代。

```
// Order of entry altered
let obj = {}; //  will create an object
let name = "4 name";
let val = 4;
obj[val] = name;
name = "7 name";
val = 7;
obj[val] = name;
name = "2 name";
val = 2;
obj[val] = name;
console.log(obj);

// Order of entry maintained for future iteration
obj = []; //  will create an array
name = "4 name";
val = 4;
obj.push({[val]:name}); // will push the object to the array
name = "7 name";
val = 7;
obj.push({[val]:name});
name = "2 name";
val = 2;
obj.push({[val]:name});
console.log(obj);
```

# .htaccess - Htaccess 将静态子域重定向到域

> ID：10550162
> 
> 赞同：0
> 
> 时间：2012-05-11T11:06:30.530
> 
> 标签：.htaccess, redirect

我为图像创建了一些静态子域：

```
www.static1.domain.com
www.static2.domain.com 
```

现在我想将不是图像的文件从静态域重定向到 www.domain.com，以避免重复内容。我的 htaccess 中有这些规则（不存在的文件被静默重定向到 index.php）：

```
#Redirect static to main
RewriteCond %{HTTP_HOST} static([0-9]+)\.
RewriteCond %{REQUEST_FILENAME} -f
RewriteCond %{REQUEST_FILENAME} !\.(js|css|png|jpg|jpeg|gif)$ [NC]
RewriteRule (.*) http://www.domain.com%{REQUEST_URI} [R=301,L]

#Redirect non exisitng files to index.php (silent)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

重定向工作正常。但是，如果我输入一个不存在的图像，例如[http://www.static1.domain.com/test.gif](http://www.static1.domain.com/test.gif)，我将被重定向到[http://www.domain.com/index.php](http://www.domain.com/index.php)。

**test.gif 的重定向应该是对索引 php 的静默重定向**……我做错了什么？

感谢您的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:11:12.237

我不确定我是否理解正确。通过静默重定向到您的意思是“index.php”不应该在 url 栏中，或者您的意思是 url 栏应该仍然显示“test.gif”但页面应该呈现 index.php？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:04:55.343

您不能添加多`RewriteCond`行。只有最后一个适用于`RewriteRule`.

所以这条线没有任何效果：

```
RewriteCond %{REQUEST_FILENAME} -f 
```

这就是为什么不存在的图像也被重定向的原因。

怎么样：

```
#Redirect non exisitng files to index.php (silent)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule . /index.php [L]

#Redirect static to main
RewriteCond %{REQUEST_FILENAME} !\.(js|css|png|jpg|jpeg|gif)$ [NC]
RewriteRule (.*) http://www.domain.com%{REQUEST_URI} [R=301,L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T10:04:50.573

是这样做的。未找到[http://www.static1.domain.com/test.gif](http://www.static1.domain.com/test.gif)时抛出默认服务器 404 页面。不是最好的，但很好。

```
RewriteCond %{HTTP_HOST} !static([0-9]+)\.
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]

RewriteCond %{HTTP_HOST} static([0-9]+)\.
RewriteCond %{REQUEST_FILENAME} !\.(js|css|png|jpg|jpeg|gif)$ [NC]
RewriteRule (.*) http://www.domain.com%{REQUEST_URI} [R=301,L] 
```

# iphone - 为 uitextfield iphone 提供自定义自动建议

> ID：10550163
> 
> 赞同：2
> 
> 时间：2012-05-11T11:06:32.657
> 
> 标签：iphone, autocomplete, uitextfield, autosuggest

我必须为 UITextField 实现自定义自动建议> 我有一个单词数组，当我开始在文本字段中输入时，所有与输入文本相似的单词都应该显示为自动建议，就像 ios 中的正常自动建议一样，但不止一个单词。当我点击其中一个时，它应该会触发一个事件。我知道如何使用 tableview 来做到这一点，有人知道用 ios 的外观和感觉来做到这一点的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T04:20:57.547

为此，我使用了下面链接的项目：http: [//cocoacontrols.com/platforms/ios/controls/autocompletiontableview](http://cocoacontrols.com/platforms/ios/controls/autocompletiontableview)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T13:06:16.140

自动完成的性感外观：

UITextField + UITextFieldDelegate [http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=wepopover](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=wepopover)

使用 UITableView 您可以保留数据并将谓词应用于：

*   (BOOL) textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string

[![在此处输入图像描述](../Images/efa12c656d2ef7acafb817dcdcf6619f.png)](https://i.stack.imgur.com/8J2WMm.png)

我没有附上源代码，因为它不通用，可能会让你感到困惑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T11:11:10.807

创建一个`array`of ，并在委托方法`NSString`中搜索键入的字符串，然后在 a 中打印字符串。`UITextfield``textChanged:``tableView`

事实上，这将像一个`UISearchBar`.

# javascript - 通过 jQuery UI 对话框进行用户决策的移动检测/重定向

> ID：10550166
> 
> 赞同：0
> 
> 时间：2012-05-11T11:06:46.767
> 
> 标签：javascript, jquery-ui, javascript-events

我正在尝试使用[Sebastiano Armeli-Battana 编写的](http://blog.sebarmeli.com/2010/11/02/how-to-redirect-your-site-to-a-mobile-version-through-javascript/)[JS Redirection Mobile](https://github.com/sebarmeli/JS-Redirection-Mobile-Site)库。

默认情况下，如果它检测到用户正在使用移动设备，它将**自动将用户重定向到移动站点，这是我不喜欢的做法。**

我想让用户有机会**同意重定向**。幸运的是，Sebastiano 包含了一个 `beforeredirection_callback`，我想用它来为用户提供对话框中的选择。由于有问题的网站在 jQuery UI 上投入了大量资金，因此我正在尝试使用 jQuery UI 对话框。jQuery Dialog 没有返回值，但可以执行回调。

我相信这个问题更多地与变量范围有关。谁能看到问题的解决方案？如何将 args 值返回给父回调？

事件.js：

```
// declare namespace if not already defined
var RP = window.RP || {};

RP.events = {
    DetectedSiteSelection: "RP.Detect.onDetectedSiteSelection"
}; 
```

检测.js：

```
// declare namespace if not already defined
var RP = window.RP || {};

// route-manager.js
(function ($, undefined) {

    var init = function () {

        var mobileSelectorDialog = $('<div></div>')
            .html("<p>We have detected that you are browsing our website using a mobile device.</p><p>Click 'Yes' to use our mobile site, or click 'No' to stay on the desktop site.</p>")
            .dialog({
                title: 'Do you want to use our mobile site?',
                bgiframe: true,
                autoOpen: false,
                minHeight: 200,
                width: 350,
                modal: true,
                closeOnEscape: false,
                draggable: false,
                resizable: false,
                buttons: {
                    'Yes': function() {
                        $(this).dialog('close');
                        $(document).trigger(RP.events.DetectedSiteSelection, true);
                    },
                    'No': function() {
                        $(this).dialog('close');
                        $(document).trigger(RP.events.DetectedSiteSelection, false);
                    }
                }
        });

        SA.redirection_mobile ({
            mobile_url : "http://site.com/mobile/",
            noredirection_param:"noredirection",
            cookie_hours : "2",
            beforeredirection_callback : (function() { 

                // open dialog
                mobileSelectorDialog.dialog('open');

                // this needs to return true or false to beforeredirection_callback 
                // but it doesn't work (scope issue??)
                $(document).on(RP.events.DetectedSiteSelection, function (evt, args) {
                    return args;
                });

                // return true or false for this to work
            })
        });
    };

    RP.Detect = {
        Init: init
    };

    return true;

})(jQuery); 
```

在页面中：

```
// Mobile browser detection
RP.Detect.Init(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:23:11.203

忘记所有这些废话，只需在左上角附近放置一个按钮，以便用户可以自行选择移动站点或完整站点。鉴于具有各种屏幕分辨率的设备大量涌入市场，“移动”检测充其量是不稳定的。

一个简单的按钮可以避免所有这些，并赋予用户权力。

或者您可以使用基于屏幕大小的简单脚本（这可能与任何其他方法一样可靠），但仍提供完整站点的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:39:44.643

`beforeredirection_callback`在处理事件处理程序之前，JavaScript 执行已经过去很久了。我决定改为编写自己的插件：

```
/**
 * MOBILE.DETECT
 * Offers the user a chance to be redirected to a mobile site alternative. 
 * Optionally remember that choice.
 * 
 * requires PERSIST.js, jQueryUI Dialog, and http://detectmobilebrowsers.com/
 *
 **/

// declare namespace if not already defined
var MOBILE = window.MOBILE || {};

// events.js
MOBILE.events = {
    DetectedSiteSelection: "MOBILE.Detect.onDetectedSiteSelection"
};

// mobile-detection.js
(function ($, undefined) {

    var options = {
        key: "redirection",
        mobileUrl: "http://mobile.site.com/"
    };

    // Constants
    State = {
        REDIRECT: "REDIRECT",
        NOREDIRECT: "NOREDIRECT",
        RESET: "RESET"
    };

    // vars
    var store; // Persist.JS

    // handles the triggered callback
    var handleCallback = function (evt, args) {

        // (re)store result
        setStore(args);

        // redirect if preference is to redirect
        if (args === State.REDIRECT) {
            document.location.href = options.mobileUrl;
        }
    };

    // store the preference
    var setStore = function(val) {
        store.set(options.key, val); // setting preference
    };

    // get the preference
    var getStore = function() {
        return State[store.get(options.key)];
    };

    // gets a query string value
    var getQueryValue = function (param) {

        if (!param) {
            return;
        }

        var querystring = document.location.search,
            queryStringArray = querystring && querystring.substring(1).split("&"),
            i = 0,
            length = queryStringArray.length;

        for (; i < length; i++) {
            var token = queryStringArray[i],
                firstPart = token && token.substring(0, token.indexOf("="));
            if (firstPart === param) {
                return token.substring(token.indexOf("=") + 1, token.length);
            }
        }

    };

    // gets the query string (key) value
    var checkQuery = function () {
        return State[getQueryValue(options.key)];
    };

    // inits this instance
    var init = function (_options) {

        // extend basic options
        $.extend(options, _options);

        // initialise store
        store = new Persist.Store('MobilePrefs');

        // handle event
        $(document).on(MOBILE.events.DetectedSiteSelection, handleCallback);

        // check query
        var query = checkQuery(); // 'true', 'false', undefined
        if (query === State.RESET) {
            store.remove(options.key); // remove this key entirely
        } else if (query != undefined) {
            $(document).trigger(MOBILE.events.DetectedSiteSelection, query); // set redirection preference
        }

        // is mobile browser?
        if ($.browser.mobile) {

            // check previous value
            var state = getStore();
            if (state === undefined) {

                // define dialog
                var mobileSelectorDialog = $('<div></div>')
                    .html("<p>We have detected that you are browsing our website using a mobile device.</p><p>Click 'Yes' to use our mobile site, or click 'No' to stay on the desktop site.</p>")
                    .dialog({
                        title: 'Do you want to use our mobile website?',
                        bgiframe: true,
                        autoOpen: false,
                        minHeight: 200,
                        width: 350,
                        modal: true,
                        closeOnEscape: false,
                        draggable: false,
                        resizable: false,
                        buttons: {
                            'Yes': function() {
                                $(this).dialog('close');
                                $(document).trigger(MOBILE.events.DetectedSiteSelection, State.REDIRECT);
                            },
                            'No': function() {
                                $(this).dialog('close');
                                $(document).trigger(MOBILE.events.DetectedSiteSelection, State.NOREDIRECT);
                            }
                        }
                });

                // open dialog
                mobileSelectorDialog.dialog('open');

            } else if (state === State.REDIRECT) {
                $(document).trigger(MOBILE.events.DetectedSiteSelection, State.REDIRECT); // trigger event
            }
        }
    };

    // definition
    MOBILE.Detect = {
        Init: init
    };

})(jQuery);

/**
 * jQuery.browser.mobile (http://detectmobilebrowser.com/)
 *
 * jQuery.browser.mobile will be true if the browser is a mobile device
 *
 **/
(function(a){jQuery.browser.mobile=/android.+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))})(navigator.userAgent||navigator.vendor||window.opera); 
```

# python - pygtk 组合框焦点信号处理

> ID：10550168
> 
> 赞同：0
> 
> 时间：2012-05-11T11:06:50.357
> 
> 标签：python, combobox, focus, pygtk, signals

我一直在尝试找到一种方法来处理对 pygtk 组合框的关注。目标是在组合框获得焦点时更改组合框的颜色，然后在焦点离开组合框时将其改回。我试过使用“focus_out_event”，但这似乎不适用于组合框。我已经广泛搜索了这个问题的答案，看来这可能是一个 gtk+ 错误？？

到目前为止我提出的解决方案......

我有 4 个单独的组合框的 cb0 - cb3。我已将它们连接到相同的方法...

```
self.cb0.connect("focus", self.focus) 
```

在我改变状态和颜色的方法中......

```
def focus(self, widget, direction):
    if widget.get_state() == gtk.STATE_NORMAL:
        widget.set_state(gtk.STATE_SELECTED)
        widget.modify_base(gtk.STATE_SELECTED, gtk.gdk.Color("#99CCFF"))
    else:
        widget.set_state(gtk.STATE_NORMAL)
        widget.modify_base(gtk.STATE_NORMAL, gtk.gdk.Color("#FFFFFF")) 
```

这在使用键盘进行选项卡时提供了所需的效果。但是，如果用鼠标单击组合框，我会得到不希望的结果。现在我正在寻找一种跟踪鼠标点击的方法。

我似乎找不到检查特定组合框何时被单击的信号或方法。使用“grab_notify”信号将为所有 4 个组合框触发一个信号（从而一次更改所有框的基色。）

这是一个令人沮丧的问题，占用了我太多时间。似乎应该有一个简单的解决方案。

# php - 使用 apache 直接为经过身份验证的用户下载文件

> ID：10550172
> 
> 赞同：0
> 
> 时间：2012-05-11T11:07:03.740
> 
> 标签：php, apache, .htaccess

这是交易，我正在出售一些文件，它们可以下载。

因此，只有付费购买文件的用户才能下载它们。出于多种原因，我想避免通过 PHP 脚本下载 - 文件很大（有些约为 5GB） - 如果下载迷恋，则必须重新开始。

有什么办法吗？任何策略都可以帮助我识别允许下载文件的用户，并让 apache 完成这项工作（提供下载的直接链接），而不是使用 PHP 脚本来流式传输文件。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:18:03.563

mod身份验证令牌怎么样？

[http://code.google.com/p/mod-auth-token/](http://code.google.com/p/mod-auth-token/)

可能是一个很好的解决方案 - 我使用类似的策略，但使用我自己的模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:08:50.853

任何 URL 都可以共享，因此您必须保留文件已下载的指示，否则付费访问者可以发布 URL，任何人都可以下载它。

使用 PHP，您可以在整个文件传输后设置一个标志（大致表示下载成功），因此无法再次下载文件。

您也可以使用某种身份验证，但话又说回来，可以共享凭据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T11:10:14.663

一种相当简单的解决方案是使用[虚](http://php.net/manual/en/function.virtual.php)函数。您将对用户进行身份验证，然后将请求交给 apache。那*不是*使用php来流式传输文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T11:25:42.623

借助一些技巧，您可以创建指向真实文件的符号链接，并在文件下载后将其关闭。

用户购买文件：您创建一个符号链接并将唯一的 URL 发送给用户。然后，您可能会监视日志文件并在文件下载后禁用符号链接。或者，如果您无法访问日志文件，您可以将用户发送到仅在用户访问时创建符号链接的 PHP 文件，然后在一定时间后关闭符号链接（尽管您如何确定那个时间，我'不确定）。

不是一个完美的解决方案，只是抛出一个想法。

# asp.net - 一个复选框来控制 gridview 行

> ID：10550178
> 
> 赞同：0
> 
> 时间：2012-05-11T11:07:24.677
> 
> 标签：asp.net, vb.net, gridview, checkbox

如何实现以下内容：我想在我的 gridview 顶部有一个复选框。选中复选框时应显示网格视图中的所有隐藏行，但未选中时应仅显示取消隐藏的行。

我只需要顶部的 1 个复选框（不在 gridview 的标题中），我找到了几个示例，但所有示例都将复选框作为列，然后也添加到标题中。

最好的方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T19:09:00.753

这是在服务器上执行此操作的一种方法：

我将 Gridview 和 Checkbox 定义如下：

```
<asp:CheckBox id="cbShowHidden" runat="server" Text="Show Hidden Rows" 
    Checked="true" oncheckedchanged="cbShowHidden_CheckedChanged" AutoPostBack="true" ></asp:CheckBox>
<br />
<asp:GridView ID="gvTest" AutoGenerateColumns="false" runat="server" 
    ShowHeader="true" onrowdatabound="gvTest_RowDataBound">
    <Columns>
        <asp:BoundField DataField="id" HeaderText="id" />
        <asp:BoundField DataField="name" HeaderText="name" />
        <asp:BoundField DataField="family" HeaderText="family" />
        <asp:BoundField DataField="visibility" HeaderText="visibility" />
    </Columns>
</asp:GridView> 
```

这是代码隐藏：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            PopulateGrid();
        }
    }
    private void PopulateGrid()
    {
        gvTest.DataSource = Enumerable.Range(0, 3000).Select(i => new { id = i, name = 2 * i, family = "Unknown", visibility = i % 3 == 0 ? "Visible" : "Hidden" });
        gvTest.DataBind();
    }
    protected void gvTest_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        bool showHidden = cbShowHidden.Checked;
        if (e.Row.RowType == DataControlRowType.DataRow)
            e.Row.Visible = showHidden || string.Compare(e.Row.Cells[3].Text, "Visible") == 0;
    }
    protected void cbShowHidden_CheckedChanged(object sender, EventArgs e)
    {
        PopulateGrid();
    } 
```

这可以通过使用 jQuery 在客户端进行隐藏来大大优化。

# php - JSP .NET PHP SSO

> ID：10550180
> 
> 赞同：0
> 
> 时间：2012-05-11T11:07:38.987
> 
> 标签：php, asp.net, jsp, cookies, single-sign-on

我有以下情况： Website1 - php Website2 - ASP.Net Website3 - jsp 我需要实现单点登录，因为网站相互依赖。有没有办法创建一个可以在身份验证请求中获取的 cookie？因此，当用户在其中一个网站上登录时，我们会存储一个 cookie，该 cookie 可以被其他两个网站读取和解密，以便在重定向后处于登录状态？我使用相同的数据库和相同的表“shared.Users”来存储用户凭据。这里有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:17:19.710

简短的回答：是的。

更长的答案：

a) 如果服务器在同一个域（可以是不同的子域，但必须是同一个根域），那么它们都可以读取相同的 cookie。登录服务器使用会话 ID 创建一个 cookie，第二个网站的访问者读取 cookie 并传递给服务器，服务器对登录服务器进行后端调用以获取会话/用户详细信息并登录用户。

b) 如果服务器位于不同的域中，那么您有两种选择。一种是将会话 ID 作为字符串传递给第二台服务器（丑陋）。但更好（也更复杂）的是一系列隐藏帧。（您需要在 IE 中使用 P3P 才能工作 - 其他浏览器都可以）。基本上隐藏帧从登录域加载，并且可以读取/操作以获取会话 ID。这有点杂耍，但当你把它映射出来时效果很好。

* * *

**编辑：单点登录选项（详细）**

你有两台服务器，我称之为“A”和“B”。

“A”保存身份验证/登录系统，“B”是您登录“A”时要登录的服务器。

如果两个服务器提供完全独立的页面，或者一个是另一个内部的 iFrame，这将起作用。也将在不同平台上工作

首先要注意：服务器“A”需要与服务器“B”共享信息。有两种方法可以做到这一点，具体取决于您的情况。第一种选择是它们共享同一个数据库并在其中存储数据，另一种是服务器相互“对话”：如果您使用后者，请使用 CURL 并添加校验和并向 HTTP 调用添加特定标头- 这应该使它足够安全（只要没有人看到代码）。如果两者不在同一个数据中心，您还应该在两者之间添加 SSL 通信——但用户将永远不会看到这些调用。我推测您不会共享数据库（不同平台），因此您需要允许服务器一起交谈。

**服务器“A”上发生了什么**

“A”提供一个页面并提供一个会话“X”，将“Y”存储在 cookie 中。

无论用户在哪个服务器上，都应该将用户发送到“A”进行登录。这可以通过在每个“发布”到“A”的页面上设置一个登录表单来完成，您可以执行一个弹出窗口来弹出“A”提供的登录表单，或者您重定向到“A”提供的页面。（最后两个是 Facebook 的做法。）

“A”在将会话“X”与登录用户相关联中签署用户。

当用户访问服务器“A”提供的页面时，一切都很好，因为它可以读取 cookie“X”并知道发生了什么。因此问题是服务器“B”（或“C”或“D”等 - 这可以扩展）。

**服务器“B”上发生了什么**

当用户从服务器“B”访问页面时，您无法从“A”读取 cookie。所以有一个简单的选项和一个复杂的选项

简单：从服务器“A”创建的页面到服务器“B”的每个链接都将添加 SessionID 作为参数。服务器“B”然后与服务器“A”对话以获取会话详细信息。如果用户总是从服务器“A”到服务器“B”而不是直接到达服务器“B”（例如通过 Google 等），这很好。实际上，这不是一个很好的选择。

复杂：这是事件的顺序。

*   B 将会话“Y”分配给用户并将其存储在 cookie 中。

*   B 提供了一个包含“隐藏”iFrame 的网页。隐藏 iFrame 的 src 将是由“A”传递的页面，并且您将会话“Y”作为 GET 参数附加到调用中。

*   iFrame 可以访问会话“X”（通过 cookie）和会话“Y”（通过 GET 参数）。

*   （慢慢阅读：） iFrame 告诉服务器“A”，如果您从服务器“B”听到用户有会话“Y”，则向“B”提供与会话“X”相同的凭据 - 即会话“Y”与“X”相同，将两者联系在一起。

*   （现在是棘手的部分）一旦建立链接，服务器“B”然后需要联系服务器“A”并说“我是会话“Y”，这个人是

已登录？'。服务器“A”会将“X”匹配到“Y”并说“是的，这是用户的详细信息。”

**当然，事情没那么简单……：**

这种方法的问题是“B”提供的第一个页面会假设用户没有登录。（服务器“A”在 iFrame 与它通信之前不会链接“X”和“Y”，所以当服务器“B”询问服务器“A”你知道“Y”时，答案将是“不”。 ) 所以你需要监视服务器“A”，让服务器“B”知道它已登录。您可以通过多种方式执行此操作：

*   如果服务器“B”从未发送过带有 cookie 的页面（即会话“Y”是新的），或者服务器“B”查询服务器“A”并且服务器“A”响应它从未听说过会话“Y”，然后提供一个带有隐藏 iFrame 的空白“重定向页面”，在短时间内，再次尝试服务器“A”应该知道“Y”是谁，并且可以确认他是否已登录。作为替代方案，您提供整个页面（未登录）并让 JavaScript 不断调用服务器“B”以查看服务器“A”现在是否知道“Y”是谁，以及当您刷新以登录用户时得到回应。[注1]

    *   您可以重复此“服务器“B”联系人服务器“A””欺骗由“B”传递的每个页面（这是您的应用程序连接到 Facebook 的方式，每个页面加载时都会调用 facebook）。这确实会给您的自己的服务器，虽然。

    *   或者，您可以独立跟踪服务器“B”上的会话“Y”并假设用户已登录，直到服务器“A”与您联系以说出与会话“X”相关联的用户（因此与会话“Y”相关联） ) 已注销 - 然后您也将用户从会话“Y”中注销。

    *   您还可以使用“服务器到服务器”调用共享活动（例如，“与“X”关联的用户已获得成就，更新您的本地缓存”，或“与“Y”关联的用户已注销 - 将“X”注销还'）。我还通过 Javascript 调用支持这个，所以如果我在两个选项卡中查看两个页面，一个来自服务器“A”

并且一旦从服务器“B”中注销，如果我从其中一个注销，则 Javascript 调用将定期检查并将我从另一个注销。

**那么，安全吗？**

“X”和“Y”都是公共字符串。这意味着如果您窃取“Y”，那么您可以伪装成“X”。实际上，这与窃取普通会话密钥“X”没有什么不同，但您可以采取更多措施来防止欺骗。您知道对“A”的 iFrame 调用应该来自完全相同的 IP、用户代理和引用者 [注 2]，并且 iFrame 调用应该与来自“B”的请求同时出现（给予或接受网络延迟，允许 30 秒）。如果其中任何一个不匹配，则放弃会话“Y”，创建一个新会话“Y”并重新开始“会话“Y”与“X”相同的过程。

**下一步去哪儿？**

你可以做很多变化，你可能需要调整以获得你需要的确切流量。您还可以使用同一系统登录多个应用程序（例如，我有 Wordpress、SMF 和一个自定义游戏，它们都共享数据，因此您登录一个并在另一个上注销，即使应用程序位于不同的服务器上 - 但它们共享一个域，因此可以共享 cookie，这会更容易一些，但它们不共享会话，所以我使用了这个）。但是作为最终用户，除了“重定向页面”或暂时的“您没有登录”之外，他们不应该注意到。

另一种变体是服务器“A”还可以加载隐藏的 iFrame，该 iFrame 在服务器“B”上加载页面。相同的交流方式，只是相反。由于用户在不访问“A”的情况下无法登录，因此 iFrame 在用户登录之前将链接“X”和“Y”——这是不可避免的。因此，当用户从服务器“B”访问页面时，“X”和“Y”是链接的，我们立即知道他们是否登录。但是，您仍然需要轮询，因此它并不容易。

**笔记：**

注意 1：使用 javascript 选项时，请小心。我写的一个系统太忙了，服务器无法处理（这分布在 5 个服务器上）。javascript 没有得到响应，但继续尝试，这增加了负载。这意味着服务器->服务器通信也无法通过，并且由于使用了所有 Apache 套接字，它很快使整个系统崩溃。Javascript 不断地轮询和轮询，即使在系统关闭之后，浏览器也会继续运行（当然）。我们必须黑化旧的调用 URL，更新调用以响应不同的 URL，并以某种方式让所有用户的浏览器获取新的 Javascript，以便它们能够正常工作。因此，如果您选择投票路线，请为这种情况做好计划。

注意 2：通常您不应该完全依赖这些来验证用户，因为它们很容易被更改/欺骗。但在这种情况下，它们应该完全相同，并且非常适合确认用户没有尝试做一些有趣的事情。

注意 3：这是单点登录解决方案的建议，其变体已在多个站点上实施。请不要就每种方法的各种优点、服务器负载、陷阱或潜在的安全漏洞等进行辩论。它们供您在实施时考虑。在此过程中，您会发现一些陷阱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:15:12.567

是的，这是可能的，前提是这 3 个网站在同一个域中。如果不是，则网站 1 创建的 cookie 将不会发送到网站 2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T08:13:29.630

我最近发布了一个新产品，叫做单点登录服务器/客户端：

[http://barebonescms.com/documentation/sso/](http://barebonescms.com/documentation/sso/)

现在只有一个 PHP 服务器和客户端。如果您有兴趣使用它，在 PHP 主机上安装服务器部分是最有意义的。然后需要进行一些移植工作才能获得适用于 ASP.NET 和 JSP 的客户端。但它确实可以跨域工作。我应该警告您，目前，每个客户端实例都需要重新登录。

# xml - trace() 的功能是什么？

> ID：10550183
> 
> 赞同：0
> 
> 时间：2012-05-11T11:08:05.653
> 
> 标签：xml, actionscript-3

在下面的示例中，我能否知道 trace() 的作用

```
var reportXML:XML = <Report>
                        <prop1>4</prop1>                      
                        <prop2>2255</prop2>
                        <prop3>true</prop3>
                        <prop4>false</prop4>
                    </Report>;
var myArray:Array = [{xmlNodeName: "prop5", value: false}];
for each (var item:Object in myArray) {
    reportXML[item.xmlNodeName] = item.value.toString();
}
trace(reportXML); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:30:21.220

当您在 Flash 中对对象调用跟踪时，该函数会在内部执行类似的操作。

```
trace(Object);

//pseudo implementation of trace 
function trace(obj:*)
{
    //open a socket connection at a previously decided port
    socket.open(xxxx);
    if(obj is String)
    {
        socket.write(obj);
    }
    else
    {
        socket.write(obj.toString());
    }
} 
```

您的控制台窗口是侦听此套接字的东西。因此，当将流写入套接字时，控制台窗口会显示它。

其他一些外部程序会强制 Flash 播放器将此“日志”写入文件。Flash 播放器有一种方法可以实现这一点。一旦将其写入文件，他们就会“监视”该文件的任何更改，并在文件更改时打印到自己的控制台中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T12:58:48.290

Trace 会将 reportXML 变量的字符串值打印到 IDE 控制台。跟踪结果仅在调试代码时可见。

前任：

```
var strVal:String = "123";
var intVal:int    = 77;
var spriteObj:Sprite = new Sprite();

trace(strVal);
trace(intVal);
trace(spriteObj);

// will write to console:
// 123
// 77
// flash.display.Sprite (@2eccb01) 
```

对于精灵，显示类签名和内存地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T11:15:20.103

它会打印出您正在跟踪到 Flash IDE 中的“输出”窗口的任何值。

它用于调试目的。

# actionscript-3 - 为什么对象的新实例上的 removeEventListener 不起作用？

> ID：10550184
> 
> 赞同：0
> 
> 时间：2012-05-11T11:08:13.023
> 
> 标签：actionscript-3

我正在尝试在同一类中创建一个类的新实例，并在创建实例后尝试删除 MouseDown 侦听器。

```
package com.objects{
    import flash.display.MovieClip;
    import flash.events.MouseEvent;
    public class StickDragDrop extends NumButton {
        public var duplicateObject:MovieClip;
        public function StickDragDrop() {
            init();
        }
        public function init() {
            addEventListener(MouseEvent.MOUSE_DOWN,stick);
        }
        public function stick(e:MouseEvent) {
            duplicateObject=new e.currentTarget.constructor
            addChild(duplicateObject);
            duplicateObject.startDrag();
            duplicateObject.removeEventListener(MouseEvent.MOUSE_DOWN,stick);
            duplicateObject.addEventListener(MouseEvent.MOUSE_DOWN,unStick);
        }
        public function unStick(e:MouseEvent) {
            stopDrag();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T12:54:25.427

您正在尝试删除`duplicateObject`会调用的事件侦听器`this.stick`，而不是`duplicateObject.stick`该事件侦听器不存在。

尝试添加：

```
public function removeStick() {
    removeEventListener(MouseEvent.MOUSE_DOWN,stick)
} 
```

到你的班级，而不是打电话

```
duplicateObject.removeEventListener(MouseEvent.MOUSE_DOWN,stick); 
```

称呼

```
duplicateObject.removeStick(); 
```

* * *

或者，您可能只需将调用更改为

```
duplicateObject.removeEventListener(MouseEvent.MOUSE_DOWN,duplicateObject.stick); 
```

但我更喜欢第一种选择。

# compression - 直接下载与打开并保存时 Excel 文件的文件大小差异

> ID：10550186
> 
> 赞同：0
> 
> 时间：2012-05-11T11:08:38.253
> 
> 标签：compression, excel-2007, openxml

可能是我的问题的标题真的很糟糕，但我想不出更好的方法来构建它。所以问题是我有一个 Silverlight Web 应用程序，它进行一些处理并生成一个 Excel 文件作为输出。Excel 生成代码使用 OpenXML 格式创建各种 XML 部件和包，并使用 System.Packaging.CompressionOptions 压缩生成的文件。现在，当浏览器 (IE 9) 显示下载选项框时，如果我单击打开以在 Excel 中打开文件，然后执行另存为，它会以进一步减小的大小保存文件，而不是直接在下载框，在这种情况下，它会以创建文件的大小保存它。

任何想法为什么这两种保存相同文件的方法会导致大小不同？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T20:07:05.263

根据您使用 OpenXML 库的方式，可能会出现一些效率低下或错误。在 Excel 中重新保存文件将修复任何重复的格式、更新元数据（可能会减少它）并修复任何验证错误。我鼓励使用随 OpenXML SDK 一起提供的 Open XML SDK 2.0 Productivity Tool 来检查任何验证错误并更好地了解效率低下的地方。可以通过使用 Interop（无论如何使用 C#）使用 Excel 自动重新保存文件。

# mysql - 数据库中的最后一行

> ID：10550205
> 
> 赞同：2
> 
> 时间：2012-05-11T11:09:47.270
> 
> 标签：mysql

你如何在 MySQL 的数据库中获取最后添加的记录/行。我必须知道这一点，因为我只想将最后添加的行更新到数据库中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T11:12:22.770

如果你有一个自动递增的 id 你可以这样做

```
select * from your_table order by id desc limit 1 
```

甚至更简单

```
select max(id) from your_table 
```

通常，如果您的表中有一个列指示您的最后一条记录是做什么的

```
select max(column_that_indicates_order) from your_table 
```

如果您没有任何列表明您的最后一条记录是什么，那么您将找不到它。仅选择没有任何顺序的第一个元素不会最后给出最后一个条目。

## 编辑

要更新您的最后一条记录，您可以执行以下操作：

```
UPDATE tblPlaces SET lat = '%s', lng = '%s' 
order by id desc
limit 1 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-11T11:12:18.290

假设您的表中有一个 ID 列，您可以通过以下方式执行此操作：

```
SELECT id FROM table ORDER BY id DESC LIMIT 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-05T14:03:48.760

这是当 $conn 是您的连接名称时最后插入的行的函数。这仅适用于最后**一行**。

```
$thelastid=mysqli_insert_id($conn); 
```

如果要检索最后多行，则使用 `select * from your_table order by id desc limit 1`

# c - 如何检查套接字的另一端是否已被接受？

> ID：10550219
> 
> 赞同：3
> 
> 时间：2012-05-11T11:11:04.867
> 
> 标签：c, linux, sockets, unix-socket

我有一个客户端/服务器设置，我希望我的客户端知道服务器是否接受了连接。否则我的客户不知道它仍在等待被接受。我不能依靠进一步的通信（协议规范）来验证这一点。因此，例如，从服务器向客户端发送“Good to go”字符串不是一种选择。是否有标志或其他东西可以检查服务器是否确实在接收？一些示例代码如下：

```
/* Client */
...
getaddrinfo(ip, port, &hints, &servinfo);
connect(sockfd, info->ai_addr, info->ai_addrlen);

if (info == NULL) {
    printf("connection failure\n");
    exit(1);
}

inet_ntop(info->ai_family, get_in_addr((struct sockaddr *)info->ai_addr), ipstring, sizeof(ipstring));
printf("Connected to %s!\n", ipstring);
...

/* Server */
...
pause(); /* If don't accept the connection, how to make the client know? */ 
new_fd = accept(sockfd, (struct sockaddr *)&cli_addr, &addr_size);
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T11:41:58.910

由于积压，服务器可以在接受呼叫之前发送 SYN-ACK。所以客户端调用`connect()`可以在服务器调用之前返回`accept()`。

正如您所说：来自服务器的“Good to go”消息不是选项。怎么样：来自客户的“回声”请求。所以服务器会在接受后响应。

如果 TCP 流中的任何额外流量不是一个选项。可以使用辅助数据吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T11:16:12.427

您应该检查返回值，`connect()`因为它将通过`errno`失败的原因来指示。

您的`connect()`电话将超时，因此`connect()`将返回`-1`并`errno`设置为`ETIMEDOUT`

```
 int ret = connect(sockfd, info->ai_addr, info->ai_addrlen);
  if (ret == -1) {
      /* connect failed */
      switch(errno) {
      case ETIMEDOUT:
             /* your server didn't accept the connection */
      case ECONNREFUSED:
             /* your server isn't listening yet, e.g. didn't start */
      default:
             /* any other error, see man 2 connect */
      }
  } 
```

# macos - OS X 应用程序无需激活即可运行？

> ID：10550220
> 
> 赞同：5
> 
> 时间：2012-05-11T11:11:07.460
> 
> 标签：macos, cocoa

最近我尝试[了 ColorSnapper](http://colorsnapper.com/)应用程序，我注意到它可以保持其他应用程序处于活动状态。

（检查下面的屏幕，您可以看到 safari 窗口仍然处于活动状态，并且 ColorSnapper 也一直处于活动状态）。

![在此处输入图像描述](../Images/a98a2586b80a7c8b68342ea3d86627e5.png)

怎么可能重现这种效果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T11:20:15.300

我相信这些类型的应用程序在其 plist 文件中使用`LSBackgroundOnly`或作为启动服务键（[参考](https://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Articles/LaunchServicesKeys.html)）。`LSUIElement`

[这里](http://uselessthingies.wordpress.com/2008/05/18/an-app-without-dock-icon-and-menu-bar/)有更多关于它的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T14:50:31.700

我只是尝试一下，**LSBackgroundOnly**是解决方案，但是您必须设置窗口的级别。

例子 ：

```
[mySpecialNSWindow setLevel:NSMainMenuWindowLevel]; 
```

这将在其他应用程序的窗口上方显示特殊窗口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T21:31:09.140

我认为正确的方法是（1）制作应用程序 LSBackgroundOnly，（2）使用[此处](http://cocoawithlove.com/2008/12/drawing-custom-window-on-mac-os-x.html)描述的自定义透明窗口并将其级别设置为 NSFloatingWindowLevel，（3）在您的应用程序委托中使用类似的东西来监视鼠标移动尽管您的应用程序未处于活动状态，例如，让您的窗口跟随鼠标位置：

```
[NSEvent addGlobalMonitorForEventsMatchingMask:NSMouseMovedMask handler:^(NSEvent *event) {
        [window setFrameOrigin:[NSEvent mouseLocation]];
    }]; 
```

然后，您可以在（透明）窗口中拥有您喜欢的视图，移动它们并根据鼠标位置修改其内容。

# android - 在 Android 中接收 GPRMC

> ID：10550226
> 
> 赞同：1
> 
> 时间：2012-05-11T11:11:35.390
> 
> 标签：android, gps, nmea

我在 android 上有一个应用程序，当前使用以下方法接收 NMEA 数据 GPGSA：

```
locationManager.addNmeaListener (new GpsStatus.NmeaListener () {
@ Override
public void onNmeaReceived (long timestamp, nmea String) {
ts = timestamp;
nm = nmea;
}}); 
```

任何机会，而不是在接收 GPGSA GPRMC 接收数据。

我使用 GPS Desire HD 进行测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T02:26:21.637

当您使用 addNmeaListener 时，您将收到手机提供的所有 GPS 语句（在某些情况下根本没有）。但是 GPGSA 仅包含卫星 DOP 信息，因此如果您收到该信息，您几乎肯定也会获得 GPRMC。

我怀疑您的问题是您正在将收到的所有句子移动到一个全局变量中，而 GPGSA 恰好是您在读取缓冲区时收到的最后一个句子。你会想要这样的东西：

```
if (nmea.substring(0,6).equals("$GPRMC")) {
    ts = timestamp;
    nm = nmea;
} 
```

# iphone - UIKeyboard 推送 UIWEBVIEW

> ID：10550228
> 
> 赞同：1
> 
> 时间：2012-05-11T11:11:47.443
> 
> 标签：iphone, ios5, uiwebview, uitextfield, uikeyboard

目前，ios 处理 uiwebviews 中的输入字段的方式是在您点击 uiwebview 中的输入字段时向上推 uiwebview。有时，uiwebview 会出现在页面之外。我想知道整个事情是如何运作的？我的 parentviewcontroller 内部没有任何滚动视图等。但它会将 uiwebview 向上推。

知道如何防止键盘向上推动 uiwebview。它如何知道需要向上推多少。我添加了一种方法来获取有关键盘显示的信息，并且返回的键盘大小为 1024px 的高度，这真的很奇怪。

谢谢。

# android - 从 MYSQL 获取 JSON 对象到数组

> ID：10550229
> 
> 赞同：0
> 
> 时间：2012-05-11T11:11:49.547
> 
> 标签：android, mysql, database, arrays, json

我怎样才能从具有相同关键字“”的数据库中获取更多`JSON object`信息，`php page`并将该列（列）中的所有值插入到数组中，例如：`MYSQL``example``"example"`

`exemple_array[1] = (first value of column example ) from the Mysql database`.

任何人都可以帮助我或给我一些教程或有用的提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:20:13.940

一方面，它来自 MySql 数据库并不重要，只是服务器正在向您返回一个 JSON 结构。

Android 附带了非常易于使用的 JSON 解析类：JSONObject 和 JSONArray。如果您提前知道格式将是什么，您可以轻松地将它们与从远程服务器接收的 JSON 数据字符串一起使用（前提是您已经制定了 HTTP 内容）

[http://developer.android.com/reference/org/json/JSONArray.html](http://developer.android.com/reference/org/json/JSONArray.html)

[http://developer.android.com/reference/org/json/JSONObject.html](http://developer.android.com/reference/org/json/JSONObject.html)

# google-app-engine - 在 jdo 中不使用父级获取子级

> ID：10550230
> 
> 赞同：2
> 
> 时间：2012-05-11T11:11:57.050
> 
> 标签：google-app-engine, gwt, parent-child, jdo, datanucleus

我正在将 gwt 与 jdo datanucleus 一起使用。我有要求让孩子和父母在一起。但是当访问父母时我没有得到孩子。我的代码如下

我的家长班是

```
@PersistenceCapable(identityType = IdentityType.APPLICATION, table = "user")
public class User implements Serializable {

    private static final long serialVersionUID = 2660867968471555842L;

    @PrimaryKey
    @Persistent
    private String email;

    @Persistent(defaultFetchGroup = "true",mappedBy="user")
    private UserProfile profile;

    public User() {}

    public User(String email) {
        this.email = email;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public UserProfile getProfile() {
        return profile;
    }

    public void setProfile(UserProfile profile) {
        this.profile = profile;
    }
} 
```

我的孩子班是

```
@PersistenceCapable(identityType = IdentityType.APPLICATION,table = "user_profile")
public class UserProfile implements Serializable {

    private static final long serialVersionUID = -6818036410894395030L;

    @PrimaryKey
    @Persistent(defaultFetchGroup="true")
    private User user;

    @Persistent
    private String name;

    public UserProfile() {}

    public UserProfile(User user) {
        this.user = user;
        user.setProfile(this);
    }

    public User getUser() {
        return user;
    }

    public void setUser(User user) {
        this.user = user;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

} 
```

我正在通过以下查询获取数据

```
PersistenceManager pm = PMF.get().getPersistenceManager();
                 User user=null;

                try{
                    String userId ="abc@abc.com";
                    Query userQuery = pm.newQuery(User.class);
                    userQuery.setFilter("email == '" + userId + "'");
                    userQuery.setUnique(true);
                    user = (User) userQuery.execute();
                } catch (Exception e) {
                    throw new IllegalAccessError("Failed to get the User..");
                }finally{
                    pm.close();
                } 
```

但我在对象用户中得到 userprofile null。哪里有问题 ？如何将孩子与父母一起加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:11:01.337

我不确定你是否找到了答案，但对于那些偶然发现这个问题的人，我只是想分享一下我是如何让它工作的。

```
@PersistenceCapable(detachable = "true") 
@FetchGroup(name = "fooGroup", members = { @Persistent(name = "list") }) 
public class ParentClass {

    @Persistent(mappedBy = "parent")
    @Element(dependent = "true") //can not exist without parent
    private List<ChildClass> list;

}

@PersistenceCapable(detachable = "true") 
public class ChildClass {
    @Persistent
    private ParentClass parent;
} 
```

然后进行提取：

```
PersistenceManager pm = PMF.get("eventual-reads-shortdeadlines").getPersistenceManager();
pm.setDetachAllOnCommit(true); 
pm.getFetchPlan().addGroup("fooGroup");
Transaction tx = pm.currentTransaction();

    try {
        tx.begin();

        Query query = pm.newQuery(ParentClass.class);
        list = (List<ParentClass>) query.execute();

        tx.commit();
    } catch (Exception ex) {
        ...
    } finally {
        if (pm != null) {
            if(pm.currentTransaction().isActive()){
                pm.currentTransaction().rollback();
            }
            pm.close();
        }
    } 
```

您的 ParentClass 现在应该拥有每个 ChildClass 的所有内容。希望有帮助！

# node.js - 如何使用 Mongoose 从 Schema 方法访问嵌入文档（类似 DBRef）的属性？

> ID：10550243
> 
> 赞同：0
> 
> 时间：2012-05-11T11:12:48.170
> 
> 标签：node.js, mongoose

我正在用 express 和 mongoose/mongodb 构建一个 nodejs 应用程序。

为了管理用户角色（一个用户可能有 0-n 个角色），我决定实现一个用户模式和一个单独的角色模式，并像 DBRefs 一样将它们联系在一起，并使用猫鼬填充功能轻松地从一个到另一个。我选择这种结构是因为我认为这是回答以下问题的最佳方式：“给我一个具有 X 角色的用户列表”或“给我一个 Y 角色即将到期的用户列表”。

这些是我的角色和用户模式的精简版本：

```
RoleSchema = new Schema {
  _user: { type: Schema.ObjectId, ref: 'User' }
  type: String
  expiration: { type: Date, default : '0' }
}

UserSchema = new Schema {
  email: { type: String, index: { unique: true }}      
  roles : [{ type: Schema.ObjectId, ref: 'Role' }]
} 
```

有了这个，我可以毫无问题地从我的快速脚本中创建/获取/填充用户和角色。当我想向用户添加角色时，我创建角色，保存它，然后将其推送到用户的角色数组，然后保存用户。所以，在 mongoDB 中发生的事情是每个模式都有自己的集合，它们通过 id 字段相互指向。

现在，我接下来要做的是在我的模式上实现布尔类型的方法来检查与角色相关的问题，这样我就可以做类似的事情

```
if(user.isActiveSubscriber()) 
```

我认为我可以通过向我的用户模式添加一个方法来完成此操作，如下所示：

```
UserSchema.method "isActiveSubscriber", ->
  result = false
  now = new Date()
  @roles.forEach (role) ->
    result = true  if role.type is "SUBSCRIBER" and role.expiration > now
 result 
```

我的问题是角色的属性为空。我想这是有道理的，因为我的用户集合只有角色的 id，但实际属性存储在另一个集合中。

所以，这里有问题：

a) 有没有办法从我的用户模式方法中加载角色属性？我尝试在方法内调用填充，但收到用户对象不知道任何填充方法的错误。我还尝试从方法内部执行 Role.findById()，但也出现错误（尝试使用 Role 和 RoleSchema）

b) 如果没有办法……我应该简单地添加代码来签入我的脚本吗？我讨厌不得不将这种逻辑与应用程序逻辑/流混合。有更好的选择吗？

c) 将这些集合分成两部分是不是一个坏主意？我完全错过了 NoSQL 的意义吗？如果角色只是作为用户集合的一部分存储的嵌入文档数组会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:35:08.103

让我回答你的问题：

a）您可以做的是在您的通话中加载角色。假设你做了

```
Role = mongoose.model('Role', RoleSchema) 
```

你只需要运行

```
Role.where('_id').in(user.roles).run( (err, res) ->
    /* you have roles in res now */
) 
```

然而，这是一个异步操作，需要将回调传递给您的方法，即

```
UserSchema.method "isActiveSubscriber", (callback) ->
    now = new Date()
    if @roles.length is 0
        return callback(false)
    if @roles[0].type
        /* roles are loaded,
           maybe there is some other fancy way to do the check */
        result = false
        @roles.forEach (role) ->
            if role.type is "SUBSCRIBER" and role.expiration > now
                result = true
        callback(result)
    else
        /* we have to load roles */
        Role.where('_id').in(@roles).run( (err, res) =>
            /* you have roles in res now */
            /* you may want to populate the field,
               note => sign in this function definition */
            @roles = res 
            result = false
            res.forEach (role) ->
                if role.type is "SUBSCRIBER" and role.expiration > now
                    result = true
            callback(result)
        ) 
```

现在对于用户`user`，您可以这样称呼它

```
user.isActiveSubscriber( (result) ->
    /* do something with result */
) 
```

问题是该操作是异步的，它会强制在您的代码中嵌套额外的回调（如果您想检查 100 个用户的角色，这将很痛苦，您将需要一些异步调用处理库，如[async](https://github.com/caolan/async)）。因此，我建议您在加载用户并使用您向我们展示的代码时填充此字段。您可以为此添加静态方法（也许您甚至可以覆盖默认`find`方法？不过我不确定）。

b+c) 另一种选择是将角色作为字符串存储在您的集合中，并在应用程序中对可能的角色进行硬编码。这将更容易实现，但是添加/删除新角色将是 $%^&* 中的一个痛苦。您这样做的方式（即通过引用）很好，我认为您唯一需要做的就是在搜索用户时填充该字段，一切都会好起来的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:29:23.043

采用的方法在 mongoose 如何使用 populate 实现类似 DBRef 的行为的范围内。然而，有些事情似乎被遗漏了。不确定这些细节是否已经被注意并且为简洁起见未显示。将运行完整的步骤集：

```
RoleSchema = new Schema {
   type: String
   expiration: { type: Date, default : '0' }
}

UserSchema = new Schema {
   email: { type: String, index: { unique: true }}      
   _roles : [{ type: Schema.ObjectId, ref: 'Role' }] // array of pointers for roles
}

Role = mongo.model('Role', 'RoleSchema');
User = mongo.model('User', 'UserSchema');

var life_sub = new Role({ type: 'LIFE_SUBSCRIBER', .... });
var daily_sub = new Role({ type: 'DAILY_SUBSCRIBER', .... });
var monthly_sub = new Role({ type: 'MONTHLY_SUBSCRIBER', .... });

var jane = new User({email: 'jane@ab.com', _roles: [daily_sub, monthly_sub]}); 
```

根据需要添加用户。接下来要查找指定的用户和相应的角色集，请使用：

```
User
 .find({email:'jane@ab.com'})
 .populate('_roles[]')
 .run(function(err, user) 
```

现在 user 是一个指针数组，对应于指定用户的角色。遍历数组并找到用户的每个角色和相应的到期日期。与 Date.now() 进行比较以得出特定用户的哪些角色已过期。

希望这可以帮助。

# javascript - javascript 对象语法

> ID：10550249
> 
> 赞同：-1
> 
> 时间：2012-05-11T11:13:13.377
> 
> 标签：javascript, canvas

我试图学习如何使用 javascript 对象，并在这里遇到了一些问题。

```
var playerImg = new Image();
    playerImg.src = 'player_stay.png';

var player = {
    posX: 50,
    posY: 50,
    draw: function(){
        ctx.drawImage(playerImg, player.posX, player.posY);
    }
} 
```

可以将 playerImg 插入播放器对象吗？像 player.img 这样的东西

编辑：我可以这样

```
var player = {
    posX: 50,
    posY: 50,
    draw: function(){
        playerImg = new Image();
        playerImg.src = 'player_stay.png';
        ctx.drawImage(playerImg, player.posX, player.posY);
    }
} 
```

但我认为它会创建新的 Image(); 我一直在使用 player.draw(); 所以我问是否有更好的方法来做到这一点并将所有参数都放在玩家对象中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:14:14.973

是的，为什么不：

```
var player = {
    posX: 50,
    posY: 50,
    draw: function(){
        ctx.drawImage(playerImg, player.posX, player.posY);
    },
    playerImage: playerImg
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:18:55.973

是的，有可能。

通常，您可以拥有嵌套对象或列表，如下所示：

```
var player = {
    posX: 50,
    posY: 50,
    draw: function(){
        ctx.drawImage(playerImg, player.posX, player.posY);
    },
    playerImage:{
                 src = 'player_stay.png'
                 },
   playerList:['elem1', 'elem2']
} 
```

在您刚刚编写的代码中引用它（例如在赋值的情况下）

```
player.playerImage.src='anotherplayer.jpg'; 
```

此链接可能会有所帮助 [http://www.json.org/](http://www.json.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T11:41:41.480

如果我理解正确，您不想在`playerImg`对象之外/之前构建对象`player`。

好吧，这是您可以做到的一种方式，但我不推荐它，因为它不那么可读：

```
var player = {
    posX: 50,
    posY: 50,
    draw: function(){
        ctx.drawImage(player.img, player.posX, player.posY);
    },
    img: (function(){
        var playerImg = new Image();
        playerImg.src = 'player_stay.png';
        return playerImg;
    })()
} 
```

这种构造`(function(){})();`称为*自执行/自调用匿名函数*，或[立即调用函数表达式](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)

BTW：这个表达式只执行一次，当玩家对象被构造时，所以你不必担心重复创建图像。

# mongodb - 使用 mongoDB 一次索引多个表，如何？

> ID：10550256
> 
> 赞同：-2
> 
> 时间：2012-05-11T11:13:30.183
> 
> 标签：mongodb, for-loop

我正在尝试一次为多个表创建索引。我目前使用 for 循环来创建这种效果，但显然我的 for 循环不起作用。

```
for(i=3;i<8;i++) { db.events_i.ensureIndex({userid:1, numid:1}); }; 
```

我怎样才能解决这个问题？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T11:16:24.983

尝试这个

```
for(var i = 3; i < 8; i++) { 
    db.getCollection('events_' + i).ensureIndex({userid: 1, numid: 1}); 
}; 
```

# image - 使用 ccv 进行图像背景/前景检测

> ID：10550268
> 
> 赞同：0
> 
> 时间：2012-05-11T11:14:40.007
> 
> 标签：image, image-processing, canvas, computer-vision

我需要以编程方式确定在图像上覆盖文本的最佳位置。换句话说，我需要从背景中分辨出前景。我试过 imagemagick：[http](http://www.imagemagick.org/Usage/scripts/bg_removal) ://www.imagemagick.org/Usage/scripts/bg_removal 。不幸的是，这还不够好。这些图像可以是几乎任何东西的照片，但通常背景模糊。

我现在想试试 liuliu 的 CCV。代码：[https](https://github.com/liuliu/ccv) ://github.com/liuliu/ccv ，演示： http: [//liuliu.me/ccv/js/nss/](http://liuliu.me/ccv/js/nss/)

该演示使用看起来像 json haar 级联的东西来检测人脸：[https ://github.com/liuliu/ccv/blob/unstable/js/face.js](https://github.com/liuliu/ccv/blob/unstable/js/face.js)

我该怎么做： 1\. 将 xml haar 级联文件转换为能够与 CCV 一起使用 2\. 为我的目标生成最佳级联（图像上的文本放置） 3\. 查找 CCV 的任何文档

最后，有没有更好的方法来解决这个问题？

编辑：我在这里问过边界问题：[https ://stackoverflow.com/questions/10559262/programmatically-place-text-in-an-image](https://stackoverflow.com/questions/10559262/programmatically-place-text-in-an-image)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T08:13:00.350

> 1.  将 xml haar 级联文件转换为能够与 CCV 一起使用
> 2.  为我的目标生成最佳级联（图像上的文本放置）
> 3.  查找 CCV 的任何文档

我不知道 1）（无论如何，哪些 XML 文件？我猜一些来自 opencv？）或 3），但这是我对 2）的看法

要使 haar cascade 成为 lá viola&jones，您需要一系列*仅*包含所需对象（例如人脸）的小型训练图像。

每个图像一个对象，尽可能少的背景，都在相同的方向和大小，归一化，因此它们都具有相同的平均亮度和亮度变化。您将需要大量训练图像。

您还需要一系列仅包含背景的负面训练图像，大小/亮度等与正面示例相同。

**但是，我怀疑这种方法是否适合您：**

Haar 过滤器通过识别所有前景对象中常见的矩形亮/暗结构来工作。所以你想要的前景图像需要有一个共同的结构。

一个示例 haar 过滤器级联的工作方式如下（非常简化）：

*   x1,y1 处的矩形区域是否比 x2,y2 处的区域暗？如果不是 --> 不是一张脸，如果是 --> 继续
*   x3,y3 处的区域是否比 x4,y4 处的区域暗？如果不是 --> 不是一张脸 --> 如果是，继续
*   等等 ....

（要在更大的图像中找到人脸的*位置，您对图像中的**每个可能位置*执行此过滤器。过滤器级联在拒绝非人脸方面非常快，因此这是可行的。）

所以你的前景对象需要有一个共同的模式。对于面部，眼睛区域比脸颊区域更暗，嘴巴比下巴更暗，以此类推。

如果您只是旋转面，相同的面过滤器将停止工作。你不能为树木和人脸建立一个好的过滤器，你绝对不能为一般的前景对象建立一个过滤器。它们之间没有这样的共同结构。您需要为每种可能的对象类型使用单独的过滤器，因此除非您的图片仅显示非常有限的类型，否则这将不起作用

# iphone - MKPointAnnotation 在标题中泄漏内存

> ID：10550270
> 
> 赞同：2
> 
> 时间：2012-05-11T11:14:42.347
> 
> 标签：iphone, ios, xcode, memory-leaks

> ```
> MKPointAnnotation *pa = [[MKPointAnnotation alloc] init];
> pa.coordinate = mapView.userLocation.coordinate;
> pa.title = [NSString stringWithFormat:@"place name"];//memory leaks here
> [mapView addAnnotation:pa];
> [pa release]; 
> ```

在使用分析器运行代码时，我发现内存在标题处泄漏，不知道如何解决这个问题。

# objective-c - 在 Objective-c 中，检测何时按下了所有可变数量的 UIButton

> ID：10550275
> 
> 赞同：0
> 
> 时间：2012-05-11T11:15:05.860
> 
> 标签：objective-c, uibutton, nsmutablearray

`UIButtons`我有一个关于检查我是否全部被按下的最佳方法的快速问题。

我有 x 个`UIButtons`我以编程方式创建的。每个按钮都有自己独特的标签（从 100 开始向上递增。）

当你点击一个按钮时，运行这个：

```
- (void)myButtonAction:(id)sender
{
    [self handleButton:sender];
}

- (void)handleButton:(UIButton *)button
{
    // ???
} 
```

当且仅当用户单击了所有按钮时，才希望实例`[self allButtonsClicked]`运行。

做这个的最好方式是什么？我应该做一个`NSMutableArray`, 并检查标签号是否在其中`NSMutableArray`，如果不是，则添加它。然后当 的`NSMutableArray`大小等于按钮的 x 个数时，运行`[self allButtonsClicked]`。

确保单击每个按钮的最简单方法是什么？

* * *

*编辑我在输入后想通了。写出来帮助我得到它。

* * *

```
-(void)letterreveal: (id)sender {

    //data
    UIButton *button = (UIButton *)sender;

    //action
    [self clickcheck:[NSNumber numberWithInt:button.tag]];
}

-(void)clickcheck:(NSNumber*)currenttag {

    if ([self.buttonPressCounts containsObject:currenttag]) {
        NSLog(@"case A");
    }
    else {
        [self.buttonPressCounts addObject:currenttag];
         NSLog(@"case B");

        if([self.buttonPressCounts count]==[self.currentword length])
        {
            NSLog(@"fininshed");
        }
    }
} 
```

buttonPressCounts 是一个 NSMutablearray。我只需要确保在制作按钮时设置它。

```
 self.buttonPressCounts = [NSMutableArray arrayWithCapacity:[self.currentword length]]; 
```

currentword 是一个 NSString（每个按钮都是从 NSString 派生的一个字母）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:19:49.490

您可以创建一个`NSMutableSet`包含所有按钮的按钮，然后从该集合中删除每个单击的按钮，直到它为空。一旦集合为空，您肯定已经单击了所有按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:19:35.683

如果您不介意，如果按钮被按下一次或多次，请使用 NSMutableSet 的成员 ivar。

我会使用一些标签，但添加/删除按钮本身。

# sql-server - 如何确定 t-sql 中的更新触发器中是否有任何更改

> ID：10550277
> 
> 赞同：27
> 
> 时间：2012-05-11T11:15:14.020
> 
> 标签：sql-server, tsql, triggers

如何确定 UPDATE 触发器中是否发生了变化？例如，我有一个名为 person 的表，其中只有一列 NAME，其中包含值“Mike”。如果我跑

```
UPDATE person SET NAME = 'Mike' 
```

如何在更新触发器中确定没有任何变化？我知道 UPDATE(col) 语句，但我不想遍历列。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-11T13:12:08.727

Update(column) 仅说明该列参与了更新，但并未说明其值已更改。例如，

```
update Person SET Name = Name 
```

在 update(name) 中产生 true，即使 Name 在任何行中都没有更改。

要检查新值是否与旧值不同，您将使用[except](http://msdn.microsoft.com/en-us/library/ms188055%28v=sql.90%29.aspx)因为 except 将从顶部集中删除底部集中存在的行。由于人员表可能具有主键，因此不会有删除已删除对应项的更改项的危险。但是，如果您决定更改`*`为有趣列的列表，请确保包含主键。

```
insert into logTable (ID)
select a.ID
from
(
   select * from Inserted
   except
   select * from Deleted
) a 
```

另一个好处是这也适用于插入，因为 Deleted 将是空的，并且插入的所有行都将被返回。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-09-24T16:12:04.613

参考上面 Arion 的回答：

确保在从 JOIN 中选择时按主键比较记录，因为 INSERTED 和 DELETED 表可能包含多个记录，如果忽略这些记录，可能会导致错误的查询结果和对数据库性能的负面影响。

```
-- Anrion's answer - slightly modified
CREATE TRIGGER UpdatedTriggerName
ON person -- table name
AFTER UPDATE
AS 
IF EXISTS (
    SELECT
        *
    FROM
        INSERTED I
        JOIN
        DELETED D
            -- make sure to compare inserted with (same) deleted person
            ON D.ID = I.ID 
            AND D.NAME <> I.NAME -- only persons with changed name
    )
print 'something'
GO 
```

# algorithm - 创建二叉搜索树

> ID：10550280
> 
> 赞同：5
> 
> 时间：2012-05-11T11:15:28.417
> 
> 标签：algorithm, binary-tree, binary-search

如果我构造一个二叉搜索树，按顺序添加以下值：

```
 10, 7, 16, 12, 5, 11, 2, 20, 1, 14 
```

我得到一棵高度为 5 的树。是否有一种方法（除了反复试验）可用于确定将创建高度为 4 的树的整数的排序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T16:38:56.563

是的，您可以首先构建一个完美平衡的树，然后您可以以一种在其子节点之前打印父节点的方式输出节点。

要创建一个完美平衡的树，只需对数字进行排序，然后使用递归二进制除法来构建一棵树。

* * *

例如，在您的情况下，我们将对数字进行排序

```
 1 2 5 7 10 11 12 14 16 20 
```

然后从它们中构建一个平衡树（以中间数为根，递归地重复这个过程）

```
 11
     5            14
 1     7       12    16
   2     10             20 
```

我们现在可以使用前序遍历或广度优先遍历以您想要的顺序打印节点（只要我们在子节点之前输出父节点就可以了）。

```
11 5 14 1 7 12 16 2 10 20 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T16:55:11.840

我还没有完全考虑过这一点，但是获得特定深度树的一种方法是在插入元素之前对其进行排序：即排序然后将`N`元素插入二叉搜索树将产生深度树`N`。

您*或许*能够：

1.  对元素进行排序
2.  插入其中一个特定`K=4`的以产生深度树`K`
3.  以不让树变得更深的方式插入剩余的元素。

（当然，选择从哪些`K`元素开始以及插入剩余元素的策略是棘手的部分——但也许这将是一个开始？）

* * *

**编辑**：我认为一个通用的解决方案是可能的，假设`K`足够大。这个怎么样：

1.  给定`10, 7, 16, 12, 5, 11, 2, 20, 1, 14`
2.  对元素进行排序：`1, 2, 5, 7, 10, 11, 12, 14, 16, 20`
3.  插入最后一个 K=4 个元素，然后是最后一个 K-1，然后是 K-2，依此类推，直到 1。

例如，在排序并插入最后 4 个之后：

```
12
  \
   14
     \
      16
        \
         20 
```

...然后在插入最后 3 个之后：

```
 12
 /  \
7    14
 \     \
  10    16
    \     \
     11    20 
```

...然后在最后 2 个之后：

```
 12
   /  \
  7    14
 / \     \
2   10    16
 \    \     \
  5    11    20 
```

...最后，在插入最后一个元素之后：

```
 12
     /  \
    7    14
   / \     \
  2   10    16
 / \    \     \
1   5    11    20 
```

...你留下一个高度为 K=4 的 BST。

请注意，这种方法仅在`K`足够大时才有效 - 特别是，当`K(K+1)/2 >= N`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-21T01:32:02.250

```
public void testMakeBinarySearchTree() {
    List<Integer> array = new ArrayList<>();
    for (int i = 0; i < 10; i++) {
        array.add(i+1);
    }

    Collections.shuffle(array);

    Node root = new Node(array.get(5));
    for (int value : array) {
        binarySearchTreeInsertNode(root, value);
    }
}

private void binarySearchTreeInsertNode(Node node, int value) {
    int data = node.getData();
    if ( value > data) {
        Node right = node.getRight();
        if (right != null) {
            binarySearchTreeInsertNode(right, value);
        } else {
            node.setRight(new Node(value));
        }
    } else if (value < data) {
        Node left = node.getLeft();
        if (left != null) {
            binarySearchTreeInsertNode(left, value);
        } else {
            node.setLeft(new Node(value));
        }
    }
} 
```

# sql - 获取上个月的第一个和最后一个日期的最简单和最有效的方法是什么？

> ID：10550286
> 
> 赞同：2
> 
> 时间：2012-05-11T11:15:59.697
> 
> 标签：sql, date, sql-server-2000

我正在尝试获取上个月的第一天和最后一天。我真正需要的是一个`BETWEEN`子句的范围，所以我需要第一天的第一秒和最后一天的最后一秒。

这是我一直在使用的代码：

```
set @startDate = DATEADD(mm, DATEDIFF(mm,0,DATEADD(mm, -1, getdate())), 0)
set @endDate = dateadd(ms,-3,DATEADD(mm, DATEDIFF(mm,0,getdate()  ), 0)) 
```

但是，对于今天，这实际上是返回 2011 年 4 月 1 日和 2011 年 5 月 1 日，这并不完全准确。我想获得 2011 年 4 月 30 日的最后一秒作为 endDate。

我一直在谷歌搜索，我看到了很多不同的方法来获得一个月的第一天/最后一天。即使在 SO 本身上，我也看到这个问题有许多不同的变体，有许多不同的答案。我想编制一个所有方法的列表来实现这一点，然后确定哪个是“最好的”（基于简单性和效率）

（我应该补充一点，我正在使用 sql server 2000）

**编辑：**

重新结束日期错误 - 这段代码实际上是正确的，问题只是那`@endDate`是一个小的日期时间。我将其更改为日期时间，现在可以正常工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T11:21:28.447

对于日期，我强烈建议不要使用`BETWEEN`. 您需要从日期中删除 3ms 以获得“前一天的最后一刻”，从而突出显示了这一点。

对于可能具有不同准确度的连续值（而不是离散值），通常最好使用`>= AND <`. 例如...

```
WHERE myDateField >= '2012-04-01' AND myDateField < '2012-05-01' 
```

通过这样做，您甚至不需要考虑`myDateField`数据或数据类型的准确性。它只是工作。总是。

考虑到这一点，您的代码非常接近我将使用的代码......

```
SET @start = DATEADD(month, DATEDIFF(month, 0, getDate()) - 1, 0)
SET @end   = DATEADD(month, DATEDIFF(month, 0, getDate())    , 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:21:33.803

编辑：根据@Dems 的解释（请参阅评论）

I think now my answer will be same as @Dems to we both are have same answers. :) @Dems Credit goes to you.

try this query it will get you the proper dates as per your need.

```
select DATEADD(mm, DATEDIFF(mm,0,DATEADD(mm, -1, GETDATE())), 0)
select DATEADD(mm, DATEDIFF(mm,0,GETDATE()  ), 0) 
```

and using this date you can directly use the `>= and <` as per the suggestion by @Dems below.

# java - Java 设计模式：外观

> ID：10550288
> 
> 赞同：1
> 
> 时间：2012-05-11T11:16:06.520
> 
> 标签：java, design-patterns, facade

我正在尝试制作一个简单的排序系统，因为它是一个分配，所以我不应该制作 DB 和 GUI，但我需要实现至少 4 种设计模式。我的一个决定是使用 Facade。据我了解，外观类是一种控制器，这就是我到目前为止所拥有的：

```
package model;

import java.util.ArrayList;

public class Facade {
ClientsList clients;
OrdersList orders;
ProductsList products;
ArrayList<Orders> orderlist;
public Facade() {
    clients = new ClientsList();
    orderlist=new ArrayList<Orders>();
    orders = new OrdersList(orderlist);
    products = new ProductsList();

}

public int ClientsSize() {

    return clients.size();
}

public int OrdersSize() {

    return orders.size();
}

public void addClients(Clients client) {
    clients.add(client);

}

public void addOrders(Orders order) {
    orders.add(order);
}

public void removeClients() {
    clients.remove();

}

public void removeOrders() {
    orders.remove();

}

public String next() {
    return orders.it();
}
} 
```

我的模型包中的其他类是 Orders、OrdersList、Clients、Clientslist、Products 和 ProductsList，在 *List 类中，我将信息保存在 ArrayList 中。所以我的问题是：这段代码是门面吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:04:08.930

外观应该使我不知道某些类及其实现的操作。在您的示例中，我可能不需要了解 ClientList，但我确实需要了解 Client、Product 和 Order。如果这些课程对我隐藏起来会更好，所以我只需要与门面交谈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T13:00:37.310

编写一个额外的接口，以便开发人员不必使用外观的实现：

```
public interface OrderService {
    //methods your co-developers should be able to use
}

public class Facade implements OrderService {
    //methods your co-developers dont want to know about
} 
```

在您的代码中使用接口而不是实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T11:31:44.793

立面的意图：

1.  为子系统中的一组接口提供统一的接口。Facade 定义了一个更高级别的接口，使子系统更易于使用。

2.  用更简单的接口包装复杂的子系统。

您提供的功能与上述几点相匹配，所以在我看来它是一个门面。

在您的示例中，您通过 Facade 公开子系统（OrdersList，ProductsList）功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T17:25:59.877

要获得有关外观设计模式的更多知识，请阅读“Head First Design Patterns”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T11:21:33.983

外观的目标是屏蔽某个组件中功能的实现。外观通常为“外部世界”提供接口。我不知道你的其余代码，但上面的例子*可能*是一个门面。

假设您正在构建一个从社交媒体获取消息的组件。您可以使用“GetMessage（字符串关键字）”方法构建外观，该方法（显然）返回消息列表，而不管社交媒体来源如何。该组件的*客户端*并不关心组件*如何*从社交媒体获取数据，他只想要消息。可以隐藏诸如“SearchFacebook”或“SearchTwitter”之类的方法，因为客户端对调用这些方法没有兴趣。但是，“GetMessages”可以使用它们来搜索 Facebook 和 Twitter，构建这两个结果的列表并将其返回给客户端。

另一个很好的例子，请查看 wiki 页面：[http ://en.wikipedia.org/wiki/Facade_pattern](http://en.wikipedia.org/wiki/Facade_pattern)

# android - 在Android中隐藏键盘的最佳方法

> ID：10550290
> 
> 赞同：6
> 
> 时间：2012-05-11T11:16:17.980
> 
> 标签：android, keyboard

我想知道在将文本输入到 EditText 后隐藏键盘的最佳方法。

1) setonfocuschangelistener ：这个监听器是否仅在按下完成按钮或焦点从一个 EditText 变为另一个时触发？当我使用这种方法时，我无法隐藏键盘。

2) setOnTouchListener ：当我使用它时，我可以隐藏键盘，但我怀疑这可能存在问题。在这种情况下，我将触摸侦听器添加到根 LinearLayout。以下代码我使用过：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);

    txtUserName = (EditText)findViewById(R.id.txtUserName);
    btnLogin = (Button)findViewById(R.id.btnLogin);
    layoutView = (LinearLayout)findViewById(R.id.li);

    layoutView.setOnTouchListener(new OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            InputMethodManager inputManager = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
            inputManager.hideSoftInputFromWindow(txtUserName
                    .getWindowToken(), 0);
            return true;
        }
    });
} 
```

在主 LinearLayout 中，我使用了另外两个 LinearLayout。我遇到上述代码的问题是，当我按下时，键盘并没有隐藏。我的疑问是我只添加带有根布局的触摸侦听器，而不是给带有其他内部布局或其他控件（TextView）的触摸侦听器。当我触摸其他控件或 TextView 周围的某些点（即内部布局）时，键盘不会隐藏。

这意味着我是否需要将 touchListener 添加到根布局内的所有布局或控件？如何更好地处理这种情况？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-11T11:59:31.533

您可以使用此代码

```
InputMethodManager imm = 
    (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(mEditView.getWindowToken(), 0); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-13T09:05:28.057

我对这个问题的回答：

添加这个方法：

```
public static void hideSoftKeyboard(Activity activity) {
  InputMethodManager inputMethodManager = (InputMethodManager)  activity.getSystemService(Activity.INPUT_METHOD_SERVICE);
  inputMethodManager.hideSoftInputFromWindow(activity.getCurrentFocus().getWindowToken(), 0);
} 
```

如果你想在触摸屏时隐藏键盘，你可以这样做：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
 hideSoftKeyboard(LoginActivity.this);
 return false;
} 
```

希望这会帮助你。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-11T11:18:36.940

尝试这个 ：

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

它可以用来抑制键盘，直到用户实际触摸到 edittext 视图。

**或者**

```
 inputManager.hideSoftInputFromWindow(editView.getWindowToken(), 0); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-08T21:07:20.350

**对null**或**try-catch**的简单检查可以避免`NullPointerException`if 没有聚焦视图。

```
public void hideKeyboard(Activity activity) {
    InputMethodManager inputManager = (InputMethodManager) activity.getSystemService(Context.INPUT_METHOD_SERVICE);
        if (activity.getCurrentFocus() != null) {
            inputManager.hideSoftInputFromWindow(activity.getCurrentFocus()
                    .getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS);
        }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-09-05T12:51:23.653

隐藏键盘的最佳方式，就`dispatchDoneKey`在您的活动中。如果键盘处于可见状态，则键盘将被隐藏。

```
public void dispatchDoneKey() {
    dispatchKeyEvent(new KeyEvent (KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_BACK));
    dispatchKeyEvent(new KeyEvent (KeyEvent.ACTION_UP, KeyEvent.KEYCODE_BACK));
} 
```

# iphone - writeToFile 方法不适用于 ipod

> ID：10550293
> 
> 赞同：1
> 
> 时间：2012-05-11T11:16:38.027
> 
> 标签：iphone, excel, ipod

在我的应用程序中，我们使用 sqlite 从数据库中检索数据并将整个数据写入 xls 类型的文件，即 excel 表。对于 iPhone，它工作正常，我们得到了 excel 表。但是，当在 iPod 上运行相同的应用程序时，我们不会得到 excel 表。

我使用过： [https](https://github.com/andreac/RSSheet) ://github.com/andreac/RSSheet将数据写入 excel 工作表。

是否有另一种方法可以为 iPod 写入文件或使用应用程序文档目录写入文件适用于 iPod？

谢谢。

# python - Python 2.7 函数中的自引用变量赋值错误：在赋值之前引用了局部变量

> ID：10550294
> 
> 赞同：-2
> 
> 时间：2012-05-11T11:16:39.070
> 
> 标签：python, python-2.7, self-reference

以下脚本产生“赋值前引用的局部变量 'var'”错误：

```
def func1():
    var = var + 1

var = 1

func1() 
```

您如何建议更正代码？为什么在调用函数之前在脚本中声明变量时会出现此错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T11:19:51.910

您可以通过在修改它的每个函数中将其声明为全局变量来在其他函数中使用全局变量：

```
>>> var = 2
>>> def func():
...     global var
...     var = var+1
...     return var
... 
>>> func()
3 
```

**OP 编辑​​后的问题：** 如果您在定义函数后移动变量，则需要将其作为参数传递给函数。

```
>>> def func(var):
...     var = var+1
...     return var
... 
>>> var = 2
>>> func(var)
3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:20:45.610

函数有自己的作用域，与主程序分开。因此，尽管您在主程序中定义了 var，但 func1() 和 func2() 并不知道。要修复您的错误，您需要将参数传递给两个函数，然后返回新值，如下所示：

```
def func1(var):
    var = var + 1
    return var

var = 1

var = func1(var) 
```

# java - 连接到远程服务器并使用 Ant 启动/停止在该特定服务器上运行的 Tomcat？

> ID：10550298
> 
> 赞同：1
> 
> 时间：2012-05-11T11:16:47.950
> 
> 标签：java, tomcat, ant, jmx

## 目的是：

1.  **可以通过主机连接**到远程服务器： ip ，端口： 8181
2.  **停止**在该服务器上运行的 Tomcat
3.  **部署**.war 文件
4.  **重启**Tomcat

下面是我迄今为止为完成这项任务所采取的几种方法：

## 目前采取的方法：

我查看了以下解决方案，但没有一个对我有用：

1.  [http://www.linuxquestions.org/questions/linux-newbie-8/start-tomcat-server-remotely-824472/——](http://www.linuxquestions.org/questions/linux-newbie-8/start-tomcat-server-remotely-824472/) 效率不高
2.  [http://tomcat.apache.org/tomcat-6.0-doc/manager-howto.html#Start_an_Existing_Application](http://tomcat.apache.org/tomcat-6.0-doc/manager-howto.html#Start_an_Existing_Application)
3.  [http://raibledesigns.com/wiki/Wiki.jsp?page=TomcatAntTasks](http://raibledesigns.com/wiki/Wiki.jsp?page=TomcatAntTasks) -- 仅启动/停止应用程序而不是实际的 tomcat 本身
4.  [http://cargo.codehaus.org/Remote+Container](http://cargo.codehaus.org/Remote+Container) -- 不会启动/停止在该服务器上运行的 tomcat

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:27:15.057

如果您对服务器具有 ssh 访问权限，那么您可能需要考虑[JSch 库](http://www.jcraft.com/jsch/)，您可以将其与[SSHExec Ant Task](http://ant.apache.org/manual/Tasks/sshexec.html)结合使用来启动和停止服务器：

```
<sshexec host="somehost"
    username="dude"
    password="yo"
    command="/etc/init.d/tomcat restart"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-13T05:26:31.450

***用于启动/停止 tomcat***

在 linux 环境中使用 SSH 来访问远程机器的终端。从终端您可以启动/停止tomcat

启动 **startup.sh** 停止 **shutdown.sh**

windows环境下

为 Windows 安装 OpenSSHD - 这将允许远程“控制台”会话。

如果您正在寻找非常“类 unix”的东西，那么您可以安装 cygwin。

[http://www.worldgoneweb.com/2011/installing-openssh-on-windows-7/](http://www.worldgoneweb.com/2011/installing-openssh-on-windows-7/)

启动 **startup.bat** 停止 **shutdown.bat**

***用于部署***

只需转到以下页面上的 tomcat 管理器链接（在任何环境中）

http:// `your_server_ip`: `port_number`/

用户凭据在 conf di 内的 tomcat-users.xml 中指定

# api - 如何使用 API 向 Yammer 发布具有特定主题的消息？

> ID：10550299
> 
> 赞同：1
> 
> 时间：2012-05-11T11:16:50.507
> 
> 标签：api, yammer

我有一个使用 Yammer API 的应用程序，并且我有一个特定的主题，我想将其应用于消息（我通过 topicid 知道它）。

API 非常不清楚：[https ://developer.yammer.com/api/#messages-manipulating](https://developer.yammer.com/api/#messages-manipulating)

```
>*topicn*
>
>Topics to apply to the message. Can use topic1 through topic20. 
```

如果我发送一条消息

```
topic1:1234567 
```

其中数字是主题标识。我收到一条标题为主题编号的主题的消息。

知道语法是什么让主题匹配该主题ID而不是创建一个新主题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:20:53.433

我也为文档而苦苦挣扎-对我来说，以下内容有效：“body =带有主题#foo #bar的消息”。换句话说，主题是实际的标签。请注意，根据您设置的媒体类型，某些字符（例如“;”）可能会在字符串中出现问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-16T14:35:20.423

你可以：

*   在消息正文中添加标签。

例如，如果您的主题是“软件”并且您在消息正文中添加#Software，您将看到主题软件已添加到您的帖子中，但您还将看到#Software 作为消息正文中的链接。不是太棒了...

*   在参数中传递主题

这是正确的语法：

```
yam.platform.request(
   { 
      url: "https://api.yammer.com/api/v1/messages.json"
      , method: "POST"
      , data: {
       "body" :  msg_value
      ,"group_id" : groupID
      ,topic1 : "Software"
     } 
```

...

这样做，您将不会在帖子中看到主题名称......这要好得多:-)

# image - GridFS - 产品图片和缩略图 - 最好的数据库结构是什么？

> ID：10550300
> 
> 赞同：3
> 
> 时间：2012-05-11T11:16:51.183
> 
> 标签：image, mongodb, thumbnails, gridfs

我有一个使用 MongoDB + GridFS 的电子商务网站。每个产品最多可以有 5 张图片。每个图像有 3 个不同大小的缩略图。

为此，我需要有关最佳数据库结构的建议。

目前我正在考虑在每个产品中存储图像 ID 和拇指 ID（来自 GridFS 的 ID）：

```
{
   '_id': 1, 
   'title': 'Some Product', 
   'images': [
               {'id': '11', thumbs: {'small': '22', 'medium': '33'},
               {'id': '44', thumbs: {'small': '55', 'medium': '66'}  
             ]
} 
```

或者将路径存储在GridFS中会更好吗？

```
{
  '_id': '111',
  'filename': '1.jpg',
  'path': 'product/988/image/111/'
},
{
  '_id': '222',
  'filename': '1.jpg',
  'path': 'product/988/image/111/thumbnail_small'
},
{
  '_id': '333',
  'filename': '1.jpg',
  'path': 'product/988/image/111/thumbnail_large'
} 
```

**更新**：GridFS 中的“路径”字段是“假”路径，而不是真实路径。只是一种快速查找所有相关文件的方法。拥有 1 个索引字段比具有复合索引的多个字段便宜。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T13:15:48.693

如果您要在 MongoDB 中使用 GridFS 存储图像，我会选择第一个。

The second schema doesn't seem to be correct. I mean GridFS is supposed to store files, so with the id of the image you don't need any path within those documents. If you simply want to store the path of the file, directly embedd it into your primary collection, so you don't need this overhead of a somewhat useless collection.

In general see [Storing Images in DB - Yea or Nay?](https://stackoverflow.com/questions/3748/storing-images-in-db-yea-or-nay/3751#3751) if you really should store your images in dbms.

Additionally if you only save the path you may need few to no changes in case you're switching to some CDN to get your images to the customer.

# python-3.x - python：在多态类上覆盖 __new__

> ID：10550301
> 
> 赞同：-3
> 
> 时间：2012-05-11T11:16:54.830
> 
> 标签：python-3.x

是否可以在多态类上覆盖**new**，如果可以，如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T11:48:23.350

是的。

“糟糕！您的答案无法提交，因为：

正文必须至少为 30 个字符；你输入了 4"

# html - 使用灵活的网格缩放字体标题

> ID：10550304
> 
> 赞同：0
> 
> 时间：2012-05-11T11:17:02.817
> 
> 标签：html, css, fonts, responsive-design

在下图所示的场景中，我有基于百分比的列和装订线宽度。如果在不同的设备或浏览器宽度上查看，我希望（文本）列标题也可以按比例缩放，就像它们是 100% 宽度的图像一样。

我快速浏览了 FitText jQuery 扩展，它可以缩放文本以适应包含的元素，但在下面的例子中，这将涉及将标题放在三个自定义容器中，并进行调整以确保字体高度一致。

我也不希望依赖 JavaScript。

有没有简单的方法，还是我应该硬着头皮使用图像？

![在此处输入图像描述](../Images/2a29a25abae13b8ce4f1f111481ee25c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:00:38.700

不要将图像用于文本 **颤抖**。

您可以使用[fit-text](http://fittextjs.com/)或[平板文本](http://www.frequency-decoder.com/demo/slabText/)（两者都做同样的事情）。

如果您正在寻找不需要 JS 的解决方案，那么您将不得不考虑添加一些额外的断点以使文本在开始看起来很糟糕时进行更改。您还可以在其上添加一些过渡效果，使其更平滑一些。

# asp.net - Microsoft Visual Studio 10.0 无法为设计器视图加载 mso.dll

> ID：10550305
> 
> 赞同：1
> 
> 时间：2012-05-11T11:17:03.867
> 
> 标签：asp.net, visual-studio-2010, memory, memory-management, dll

我正在做一个 ASP 项目，在尝试从代码切换到设计器视图时遇到以下问题。出现一个弹出窗口并且 Visual Studio 关闭。

```
cannot load "c:\PROGRA~2\MICROS~2.0\Common7\packages\vwd\mso.dll 
```

这里有一些我尝试过但没有解决的互联网解决方案 1\. 我重新安装了软件（visual studio 10.0） 2\. 有人建议用户使用权限较低的帐户，所以我也尝试了。不工作 。3.我安装了 Microsoft Office 并且工作正常
3.我读到了一些关于某个补丁的模糊信息（但找不到它） 4.mso.dll 文件没有丢失或删除。

这是我的 Visual Studio 10.0 的安装文件夹

```
C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE 
```

帮助 ！? ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-22T09:02:56.007

我很久以前就知道这篇文章，但如果有人仍然有问题：

使用以下正确路径更新 PATH 环境变量：C:\Program Files\Microsoft Visual Studio 10.0\Common7\Packages C:\Program Files\Microsoft Visual Studio 10.0\Common7\Packages\vwd。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-18T08:15:21.970

为了解决这个问题，我尝试了网络上提供的许多解决方案。真正对我有用的是：

首先，我使用了实用程序“ [Depency Walker](http://www.dependencywalker.com/) ”。我使用此实用程序打开了“C:\Program Files\Microsoft Visual Studio 10.0\Common7\Packages\vwd\mso.dll”文件，发现缺少 Msvcr90.dll 文件依赖项。

然后下载[Microsoft Visual C++ 2008 Service Pack 1 Redistributable Package MFC 安全更新](http://www.microsoft.com/en-us/download/details.aspx?id=26368)并运行它。

问题解决了。

# sql-server - 如何在 SQL Server 2008 R2 中使用 CONCAT 函数？

> ID：10550307
> 
> 赞同：109
> 
> 时间：2012-05-11T11:17:11.787
> 
> 标签：sql-server, sql-server-2008, tsql

我正在寻找`CONCAT`SQL Server 2008 R2 中的函数。我[找到了这个函数的链接](http://msdn.microsoft.com/en-us/library/hh231515.aspx)。但是当我使用这个函数时，它给出了以下错误：

> 消息 195，级别 15，状态 10，第 7 行
> “CONCAT”不是可识别的内置函数名称。

`CONCAT`SQL Server 2008 R2 中是否存在该函数？

如果没有，如何在 SQL Server 2008 R2 中连接字符串？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-06-17T19:23:52.187

仅出于完整性考虑 - 在 SQL 2008 中，您将使用加号`+`运算符来执行字符串连接。

查看带有示例代码的[MSDN 参考。](http://msdn.microsoft.com/en-us/library/ms177561.aspx)从 SQL 2012 开始，您可能希望使用新的[CONCAT 函数](http://msdn.microsoft.com/en-us/library/hh231515.aspx)。

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2012-05-11T11:19:24.813

`CONCAT`是 SQL Server 2012 的新功能。您提供的链接说明了这一点，它不是*以前版本*的功能，包括 2008 R2。

在文档树中可以看到它是 SQL Server 2012 的一部分：

```
SQL Server 2012  
Product Documentation  
Books Online for SQL Server 2012  
Database Engine  
  Transact-SQL Reference (Database Engine)  
    Built-in Functions (Transact-SQL)  
      String Functions (Transact-SQL) 
```

**编辑**Martin Smith 有帮助地指出[SQL Server 提供了 ODBC`CONCAT`函数](http://msdn.microsoft.com/en-us/library/bb630290.aspx)的实现。

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2014-02-11T13:08:36.260

I suggest you cast all columns before you concat them

```
cast('data1' as varchar) + cast('data2' as varchar) + cast('data3' as varchar) 
```

This should work for you.

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2013-04-08T04:29:40.743

如前所述，CONCAT 在 SQL Server 2012 之前不受支持。但是，您可以按照建议使用 + 运算符进行连接。但请注意，如果第一个操作数是数字，则此运算符将引发错误，因为它认为将添加而不是连接。要解决此问题，只需在前面添加“”。例如

```
someNumber + 'someString' + .... + lastVariableToConcatenate 
```

会引发错误但`'' + someNumber + 'someString' + ......`会正常工作。

Also, if there are two numbers to be concatenated make sure you add a '' between them, like so

```
.... + someNumber + '' + someOtherNumber + ..... 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-11-21T21:48:00.100

**NULL safe drop in replacement approximations for SQL Server 2012 CONCAT function**

*SQL Server 2012*:

`SELECT CONCAT(data1, data2)`

*PRE SQL 2012 (Two Solutions)*:

`SELECT {fn CONCAT(ISNULL(data1, ''), ISNULL(data2, ''))}`

`SELECT ISNULL(CAST(data1 AS varchar(MAX)), '') + ISNULL(CAST(data2 AS varchar(MAX)), '')`

These two solutions collate several excellent answers and caveats raised by other posters including @Martin Smith, @Svish and @vasin1987.

These options add `NULL` to `''` (empty string) casting for safe `NULL` handling while accounting for the varying behaviour of the `+` operator pertaining to specific operands.

Note the [ODBC Scaler Function](https://docs.microsoft.com/en-us/sql/t-sql/functions/odbc-scalar-functions-transact-sql) solution is limited to 2 arguments whereas the **`+` operator** approach is scalable to many arguments as needed.

Note also the potential issue identified by @Swifty regarding the default `varchar` size here remedied by `varchar(MAX)`.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-08-25T17:50:28.360

```
(city + ', ' + state + ' ' + zip) as ctstzip for select
(city + ', ' + state + ' ' + zip) for insert 
```

Only cast or convert if any field type is different from others.

On insert the value needs to be in the correct spot you need it be inserted. Using "as" will give you an error.

i.e.

```
Insert into testtable (ctstzip) Values ((city + ', ' + state + ' ' + zip)) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-09-11T09:05:03.623

Yes the function is not in sql 2008\. You can use the cast operation to do that.

For example we have `employee` table and you want `name` with `applydate`.

so you can use

```
Select   cast(name as varchar) + cast(applydate as varchar) from employee 
```

It will work where concat function is not working.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-04T09:25:25.420

You can use '+' between the strings that you want to concat like

```
SELECT string1 + string2 
```

If one of those give conversion error like if one of the columns is an int column you should cast it before concatenating the columns like

```
SELECT (CONVERT(nvarchar, intColumn) + string2 
```

# c++ - 计算电影实例的数量

> ID：10550315
> 
> 赞同：0
> 
> 时间：2012-05-11T11:17:46.037
> 
> 标签：c++, qt4

这是我的实现

Film.h //标题

```
#ifndef FILM_H
#define FILM_H
#include <QString>

class Film {
  protected:
    QString title;
    double dailyRate;
  public:
    Film(QString ti,double dr);
    virtual double calculateRental(int num)const;
};

#endif // FILM_H 
```

电影.cpp

```
#include "film.h"
#include <QString>

Film::Film(QString ti,double dr){
  title=ti;
  dailyRate=dr;
 }

 double Film::calculateRental(int num)const {
 return dailyRate*num;
} 
```

主文件

```
 #include <QtCore/QCoreApplication>
 #include <QtCore/QTextStream>
 #include  "film.h"

 using namespace std;

 int main(int argc, char *argv[]) {
 QCoreApplication a(argc, argv);
 QTextStream cout(stdout, QIODevice::WriteOnly);
 Film f("Top Gun", 10.00); //create an instance of a film
 cout <<f.calculateRental(2);
 return a.exec();

} 
```

如何计算创建的 Film 实例的数量？我知道是这样的：

```
static int numOfFilms;
numOfFilms++; 
```

我如何使用代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T11:19:54.953

这取决于。如果您替换`Class`为`class`, 并且`QString`有一个来自 的转换构造函数`const char*`，那么可以。

# c# - 获取给定字符串中的特定句子

> ID：10550323
> 
> 赞同：2
> 
> 时间：2012-05-11T11:18:22.743
> 
> 标签：c#

示例字符串如下所示。

> "{"这是 allstate 公司 url":{"previous":"https://graph.facebook.com/allstate/feedaccess_token=AAACEdEose24VEBPa9&limit=25&since=13369&__previous=1","获取的公司 url"}}

从上面的字符串中我想提取

> “https://graph.facebook.com/allstate/feedaccess_token=AAACEdEose24VEBPa9&limit=25&since=13369&__previous=1”

怎么做？在我的真实情况下，我需要在字符串之前和之后有很多句子 fetch 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:21:32.080

看看[Json.NET](http://json.codeplex.com/)，它可以将您的 JSON 字符串解析为一个有意义的对象，然后您可以在代码中与之交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:33:48.893

这取决于文本如何不同。如果它总是 https 并且在 url 后面总是有一个逗号，你可以使用这个正则表达式：

## . *“（https://.+）”，。*

```
string strUrl = string.Empty;
string strPattern = @".*"(https://.+)",.*";
Match match = Regex.Match(strLine, strPattern, RegexOptions.IgnoreCase);
if (match.Success)
{
  strUrl = match.Groups[1].Value;
} 
```

互联网上有很好的工具来开发reges表达式。[以Expresso](http://www.ultrapico.com/Expresso.htm)为例

# css - CSS div 相对位置

> ID：10550324
> 
> 赞同：-1
> 
> 时间：2012-05-11T11:18:27.167
> 
> 标签：css, html

是否可以在该模型上创建布局？

![必要的行为](../Images/03871303dc1d2eb782e74138d031988c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:29:59.420

**HTML**

```
<div class="layout">
    <span id="click">Click me</span
    <div id="mydiv"></div>
</div> 
```

**CSS**

```
.layout {position:relative;height:200px}
#mydiv {width:100px; height:50px;bottom:0} 
```

**JS**

```
$("#click").click(function(){
    $("#mydiv").css("position", "absolute");
}); 
```

# jquery - iframe 覆盖内容

> ID：10550342
> 
> 赞同：0
> 
> 时间：2012-05-11T11:19:21.667
> 
> 标签：jquery, css, jquery-ui

我得到了这个代码：

```
 <div id="resizeDiv"><div id="title">Lol</div><div id="content"><iframe src='todo.php' height='100%' width='100%' frameborder='0px'></iframe></div></div> 
```

这是CSS：

```
 #title{
      height: 25px;
      width: 100%;
      background: #c0c0c0;
      border-bottom: 1px solid #999;
    }
    #content{
      margin-bottom: 25px;
    } 
```

我使用 jquery 来允许调整框的大小。但 iframe 开箱即用 25px。我试过：

```
 margin-bottom: 25px; 
```

但这不起作用有没有人知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:28:57.567

使用`overflow: hidden`：

```
#resizeDiv {
  overflow: hidden;
}

#content{
  margin-bottom: 25px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:59:40.767

实际上并`overflow: hidden`没有纠正问题，它只是隐藏了它，问题是标题的高度没有被考虑在内，在 jQuery 的调整大小函数中，我会使用类似的东西来计算标题高度：

```
$("#content > iframe").height($("#resizeDiv").innerHeight() - $("#title").outerHeight()); 
```

# c++ - C & C++ 编译器是否优化与函数调用的比较？

> ID：10550345
> 
> 赞同：19
> 
> 时间：2012-05-11T11:19:33.863
> 
> 标签：c++, c, optimization, complexity-theory

C 和 C++ 编译器通常会优化与函数的比较吗？

例如，[此页面](http://www.cplusplus.com/reference/stl/list/size/)建议`size`C++ 中 std::lists 上的函数在某些标准库实现中可能具有 O(N) 的线性复杂度（这对链表有意义）。

但在那种情况下，如果`myList`是一个巨大的列表，这样的东西会做什么？

```
 if (myList.size() < 5) return 1;
    else return 2; 
```

size() 函数会查找并计算所有 N 个列表成员，还是会在找到 5 个成员后优化为短路？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-11T11:24:01.883

理论上，如果被内联，则存在这种可能性`size()`，但要执行优化，编译器必须

1.  检测您正在专门测试“小于”条件
2.  证明循环（假设存在一个用于讨论的目的）导致变量单调增加
3.  证明循环体没有可观察到的副作用

恕我直言，这是一大堆东西，它包括在其他情况下也不是“明显有用”的功能。请记住，编译器供应商的资源有限，因此必须有充分的理由来实现这些先决条件并让编译器将所有部分组合在一起以优化这种情况。

看到即使这对某人来说是一个性能问题，*这个问题也可以在代码中轻松解决*，我不觉得会有这样的理由。所以不，通常你不应该期望这样的情况得到优化。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-11T11:21:00.333

实际上，在 C++11 中，`std::list`经过优化并`size()`以恒定时间返回。

对于 C++03，`size()`确实是在线性时间中运行的，因为它每次都需要计算元素。

> size() 函数会查找并计算所有 N 个列表成员，还是会在找到 5 个成员后优化为短路？

在实践中从未见过这种优化。虽然这当然是合法的，但我怀疑是否有任何编译器实际上实现了这样的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T11:22:15.470

myList.size() 函数本身无法为您使用它的目的进行编译，因此它将确定整个大小。为了获得您建议的优化，您需要一个专用的谓词函数而不是通用的`size()`，例如`bool sizeLessThan(int);`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-11T17:31:03.470

**否**您是在询问编译器是否可以根据其结果的使用方式使函数表现不同。这只能对调用者和函数将同时编译在一起的内联函数进行。除此之外的任何事情似乎都有些牵强。

# android - 将图像从服务器检索到 android 应用程序

> ID：10550349
> 
> 赞同：2
> 
> 时间：2012-05-11T11:19:44.923
> 
> 标签：android, android-layout, android-service, android-image

```
package com.sample.downloadImage;
import java.io.BufferedInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLConnection;
import org.apache.http.util.ByteArrayBuffer;
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.widget.ImageView;

public class downloadImage extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

  Bitmap bitmap = DownloadImage("http://www.allindiaflorist.com/imgs/arrangemen4.jpg");

        ImageView img = (ImageView) findViewById(R.id.img);
        img.setImageBitmap(bitmap);
    }

    private InputStream OpenHttpConnection(String urlString) 
    throws IOException
    {
        InputStream in = null;
        int response = -1;

        URL url = new URL(urlString); 
        URLConnection conn = url.openConnection();

        if (!(conn instanceof HttpURLConnection))                     
            throw new IOException("Not an HTTP connection");

        try{
            HttpURLConnection httpConn = (HttpURLConnection) conn;
            httpConn.setAllowUserInteraction(false);
            httpConn.setInstanceFollowRedirects(true);
            httpConn.setRequestMethod("GET");
            httpConn.connect();
            response = httpConn.getResponseCode();                 
            if (response == HttpURLConnection.HTTP_OK) {
                in = httpConn.getInputStream();                                 
            }                     
        }
        catch (Exception ex)
        {
            throw new IOException("Error connecting");            
        }
        return in;     
    }
    private Bitmap DownloadImage(String URL)
    {        
        Bitmap bitmap = null;
        InputStream in = null;  

        try {
            in = OpenHttpConnection(URL);
            BufferedInputStream bis = new BufferedInputStream(in, 8190);

            ByteArrayBuffer baf = new ByteArrayBuffer(50);
            int current = 0;
            while ((current = bis.read()) != -1) 
            {
                baf.append((byte)current);
            }
            byte[] imageData = baf.toByteArray();
            bitmap =BitmapFactory.decodeByteArray(imageData, 0, imageData.length);
            in.close();
        } 
       catch (IOException e1) 
       {

            e1.printStackTrace();
        }
        return bitmap;                
    }
} 
```

想从服务器检索图像，所以我尝试在服务器中发布图像并通过 url 检索，但它适用于小图像，当它涉及超过 60kb 的大图像时，有人可以提出解决问题的想法

```
package com.sample.downloadImage;
import java.io.BufferedInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLConnection;
import org.apache.http.util.ByteArrayBuffer;
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.widget.ImageView;

public class downloadImage extends Activity {

    HttpURLConnection httpConn;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

  Bitmap bitmap = DownloadImage("http://www.allindiaflorist.com/imgs/arrangemen4.jpg");

        ImageView img = (ImageView) findViewById(R.id.img);
        img.setImageBitmap(bitmap);
    }

    private InputStream OpenHttpConnection(String urlString) 
    throws IOException
    {
        InputStream in = null;
        int response = -1;

        URL url = new URL(urlString); 
        URLConnection conn = url.openConnection();

        if (!(conn instanceof HttpURLConnection))                     
            throw new IOException("Not an HTTP connection");

        try{
             httpConn = (HttpURLConnection) conn;
            httpConn.setAllowUserInteraction(false);
            httpConn.setInstanceFollowRedirects(true);
            httpConn.setRequestMethod("GET");
            httpConn.connect();
            response = httpConn.getResponseCode();                 
            if (response == HttpURLConnection.HTTP_OK) {
                in = httpConn.getInputStream();  

                DownloadImage(urlString);
            }                     
        }
        catch (Exception ex)
        {
            throw new IOException("Error connecting");            
        }
        return in;     
    }

    private Bitmap DownloadImage(String URL)
    {        
        Bitmap bitmap = null;
        //InputStream is = null;  
        InputStream in;
        try
        {
            in = httpConn.getInputStream();
            BufferedInputStream bis = new BufferedInputStream(in, 3 *1024);
            ByteArrayBuffer baf = new ByteArrayBuffer(50);
            int current = 0;
            while ((current = bis.read()) != -1)
            {
                baf.append((byte)current);
                byte[] imageData = baf.toByteArray();
                bitmap =BitmapFactory.decodeByteArray(imageData, 0, imageData.length);
                return bitmap;     
            }
        }
        catch (IOException e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return bitmap;  
          }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T11:24:55.213

form :[从 Android 上的服务器加载大图](https://stackoverflow.com/questions/4996470/load-large-image-from-server-on-android)

当您将 Bi​​tmapFactory.decodeFromStream() 直接连接到远程连接的 InputStream 时，放弃并仅返回 null 的情况并不少见。在内部，如果您没有向该方法提供 BufferedInputStream，它会将提供的流包装在一个缓冲区大小为 16384 的流中。有时可行的一种选择是传递具有更大缓冲区大小的 BufferedInputStream，例如：

BufferedInputStream bis = new BufferedInputStream(is, 32 * 1024); 一个更普遍有效的方法是先完全下载文件，然后像这样解码数据：

```
InputStream is = connection.getInputStream();
BufferedInputStream bis = new BufferedInputStream(is, 8190);

ByteArrayBuffer baf = new ByteArrayBuffer(50);
int current = 0;
while ((current = bis.read()) != -1) {
    baf.append((byte)current);
}
byte[] imageData = baf.toByteArray();
BitmapFactory.decodeByteArray(imageData, 0, imageData.length); 
```

仅供参考，此示例中的缓冲区大小有些随意。正如在其他答案中所说，不要在内存中保留比您必须的更长的图像大小是一个绝妙的主意。您可能会考虑将其直接写入文件并显示下采样版本。

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T11:28:26.993

这也可以帮助你

[http://blog.sptechnolab.com/2011/03/04/android/android-load-image-from-url/](http://blog.sptechnolab.com/2011/03/04/android/android-load-image-from-url/)

[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T11:25:39.677

查看此页面并下载示例代码。它会解决你的问题

[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

# c# - Wp7 数据连接异常

> ID：10550354
> 
> 赞同：0
> 
> 时间：2012-05-11T11:19:56.340
> 
> 标签：c#

我编写了一个代码来映射一个包含字段 empId empName Salary 的表 emp。但是当它到达for循环时，它会在button1单击时引发异常无效的应用程序会话ID。需要帮助来纠正它。我想查看 Empname = ss 的 empId

私有常量字符串 ConnectionString = "isostore:/Emp1.sdf";

```
 [Table(Name = "Emp")]
    public class Emp2
    {
        [Column(IsPrimaryKey = true, IsDbGenerated = true)]
        public int EmpId
        {
            get;
            set;
        }
        [Column]
        public string EmpName
        {
            get;
            set;
        }
        [Column]
        public int Salary
        {
            get;
            set;
        }
    }

    public MainPage()
    {
        InitializeComponent();

        using (CountryDataContext context = new CountryDataContext(ConnectionString))
        {

            if (!context.DatabaseExists())
            {

                context.CreateDatabase();

            }
            else
            {
                MessageBox.Show("Employee table exist already");
            }
        }

    }

    private IList<Emp2> getcountry()
    {
        IList<Emp2> countryList = null;
        using (CountryDataContext context = new CountryDataContext(ConnectionString))
        {
            IQueryable<Emp2> query = from c in context.Emp where c.EmpName=="ss"   select c;
            countryList = query.ToList();
        }

        return countryList;
    }

    public class CountryDataContext : DataContext
    {
        public CountryDataContext(string connectionString)
            : base(connectionString)
        {

        }
        public Table<Emp2> Emp
        {
            get
            {
                return this.GetTable<Emp2>();
            }
        }

    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        IList<Emp2> emp= this.getcountry();

        try
        {
            foreach (Emp2 a in emp)
            {
                MessageBox.Show(a.EmpId.ToString());

            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:07:14.510

可能是您使用的是 wp7explorer 吗？我有一个类似的问题，禁用 wp7explorer 解决了这个问题。

有关更多信息，请查看此链接：[http ://wp7explorer.codeplex.com/workitem/8259](http://wp7explorer.codeplex.com/workitem/8259)

# c# - 如何捕获键盘输入并将其写入文件？

> ID：10550355
> 
> 赞同：0
> 
> 时间：2012-05-11T11:20:03.677
> 
> 标签：c#

我找不到任何可以帮助我的文章。我想制作一个在后台运行的应用程序（控制台，winforms，wpf，真的不重要）（在启动时有它）并将每个按下的键（在任何文本框或类似的东西中）写入文件。例如，电脑启动，我打开 IE 并在地址栏中输入 www.bla.com，然后打开 pokerstars 应用程序并在登录信息或文本框中输入一些内容；并且在我打开文本文件的任何时候，我都会在其中找到直到那时为止所写的内容。

你能为此建议ac#方法吗？（如果这很重要，我正在使用 Windows 7）谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T11:24:45.440

我希望你想要这个用于合法和有效的目的..

您要创建的是键盘挂钩。看到这个：

[http://blogs.msdn.com/b/toub/archive/2006/05/03/589423.aspx](http://blogs.msdn.com/b/toub/archive/2006/05/03/589423.aspx)

最好的问候，不要作恶..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:23:39.507

你想写的是一个键盘记录器。

搜索 KeyboardHook，你会发现这样的文章：

[在 c#](http://blogs.msdn.com/b/toub/archive/2006/05/03/589423.aspx)或[c 中](http://www.codeproject.com/Articles/1264/KeyBoard-Hooks)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T11:24:07.617

您正在寻找的是所谓的键盘记录器。网上有很多例子如何写一个。

您可以创建一个 WinForms 表单并将该[`KeyPreview`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.keypreview.aspx)属性设置为 true，这样您就可以“拦截”所有按键，即使是未发送到您的应用程序的按键。你也可以原生并[使用 hooks](http://blogs.msdn.com/b/toub/archive/2006/05/03/589423.aspx)。

但通常键盘记录是不受欢迎的。你想达到什么目的？

# ios - 接收 kAUGraphErr_CannotDoInCurrentContext

> ID：10550359
> 
> 赞同：2
> 
> 时间：2012-05-11T11:20:19.030
> 
> 标签：ios, core-audio

该行`AudioDeviceManager *manager = (__bridge AudioDeviceManager *)inRefCon;`导致 EXC_BAD_ACCESS（代码 1）。实际错误是 AudioUnitRender Failed: Unknown (-10863)，它转换为 kAUGraphErr_CannotDoInCurrentContext。

这是它发生的回调：

```
static OSStatus playbackCallback(void *inRefCon, AudioUnitRenderActionFlags *ioActionFlags, const AudioTimeStamp *inTimeStamp, UInt32 inBusNumber, UInt32 inNumberFrames, AudioBufferList *ioData) {  

    int i, j; 

    if(startedCallback && noInterrupt) {

    //get a copy of the objectiveC class "self"
    AudioDeviceManager *manager = (__bridge AudioDeviceManager *)inRefCon;

    //data from input; 16 bit integer, one channel
    short signed int * source= (short signed int *)bufferList->mBuffers[0].mData; 

    inNumberFrames= inNumberFrames<1025?inNumberFrames:1024; 

    //pre created data stores   
    float * inputbuf = manager->inputbuf; 

    // shift old audio data
    memmove(inputbuf, inputbuf+inNumberFrames, sizeof(float)*(1024-inNumberFrames));

    for (j = 0; j < inNumberFrames; j++) {
        inputbuf[j+1024-inNumberFrames] = source[j]*3.0518509475997e-05f; //conversion from 16 bit integer (range up to 32767 either side of 0.0) to float (-1.0 to 1.0)
    }

    manager->seq_cb(inputbuf, NULL, inNumberFrames, inTimeStamp, manager->seq);

    //loop through all the buffers that need to be filled ( in practice, will be one) 
    for (i = 0 ; i < ioData->mNumberBuffers; i++){

        //get the buffer to be filled
        AudioBuffer buffer = ioData->mBuffers[i];
        //printf("which buf %d numberOfSamples %d channels %d countertest %d \n", i, buffer.mDataByteSize, buffer.mNumberChannels, g_countertest);

        //if needed we can get the number of bytes that will fill the buffer using
        // int numberOfSamples = ioData->mBuffers[i].mDataByteSize;

        //get the buffer and point to it as an UInt32 (as we will be filling it with 32 bit samples)
        //if we wanted we could grab it as a 16 bit and put in the samples for left and right seperately
        //but the loop below would be for(j = 0; j < inNumberFrames * 2; j++) as each frame is a 32 bit number
        //UInt32 *frameBuffer = buffer.mData;

        short signed int *frameBuffer = (short signed int *)buffer.mData;

        //loop through the buffer and fill the frames
        for (j = 0; j < inNumberFrames; j++){

            //interleaved stereo, left then right
            frameBuffer[2*j] = 0;       //mono output; later could have stereo effects
            frameBuffer[2*j+1] = 0; 

            //++g_countertest; 
        }
    }

    } else {

        //output zeroes while not ready to process input

        for (i = 0 ; i < ioData->mNumberBuffers; i++){
            AudioBuffer buffer = ioData->mBuffers[i];

            short signed int *frameBuffer = (short signed int *)buffer.mData;

            //loop through the buffer and fill the frames
            for (j = 0; j < inNumberFrames; j++){

                short signed int value = 0; //32767.0*0.0; 
                frameBuffer[2*j] = value;   
                frameBuffer[2*j+1] = value; 

                //++g_countertest; 
            }

        }

    }
    return noErr;
} 
```

我发现[了这个](https://stackoverflow.com/questions/7354964/intermittent-crash-in-recordingcallback-on-app-launch)，这是一个类似的情况。文档[只是](http://developer.apple.com/library/ios/#documentation/AudioToolbox/Reference/AUGraphServicesReference/Reference/reference.html#//apple_ref/doc/uid/TP40007289)说

> 您通常可以再次尝试该操作 - 通常是 NEXT 渲染周期

但是每次调用回调时都会引发相同的异常。

堆栈跟踪：

```
Thread 6 name:  AURemoteIO::IOThread
Thread 6 Crashed:
0   libobjc.A.dylib                 0x317bcf7a objc_retain + 10
1   Partyscape                      0x0006cb36 _ZL16playbackCallbackPvPmPK14AudioTimeStampmmP15AudioBufferList (AudioDeviceManager.mm:80)
2   AudioToolbox                    0x366a5326 AUInputElement::PullInput(unsigned long&, AudioTimeStamp const&, unsigned long, unsigned long) + 130
3   AudioToolbox                    0x366aa6f6 AUInputFormatConverter2::InputProc(OpaqueAudioConverter*, unsigned long*, AudioBufferList*, AudioStreamPacketDescription**, void*) + 154
4   AudioToolbox                    0x3668f31e AudioConverterChain::CallInputProc(unsigned long) + 354
5   AudioToolbox                    0x3668f074 AudioConverterChain::FillBufferFromInputProc(unsigned long*, CABufferList*) + 72
6   AudioToolbox                    0x3668f01e BufferedAudioConverter::GetInputBytes(unsigned long, unsigned long&, CABufferList const*&) + 122
7   AudioToolbox                    0x366aa5c2 CBRConverter::RenderOutput(CABufferList*, unsigned long, unsigned long&, AudioStreamPacketDescription*) + 74
8   AudioToolbox                    0x3668ed4c BufferedAudioConverter::FillBuffer(unsigned long&, AudioBufferList&, AudioStreamPacketDescription*) + 180
9   AudioToolbox                    0x3668ee92 AudioConverterChain::RenderOutput(CABufferList*, unsigned long, unsigned long&, AudioStreamPacketDescription*) + 86
10  AudioToolbox                    0x3668ed4c BufferedAudioConverter::FillBuffer(unsigned long&, AudioBufferList&, AudioStreamPacketDescription*) + 180
11  AudioToolbox                    0x3668eb22 AudioConverterFillComplexBuffer + 350
12  AudioToolbox                    0x367549b0 AUInputFormatConverter2::PullAndConvertInput(AudioTimeStamp const&, unsigned long&, AudioBufferList&, AudioStreamPacketDescription*, bool&) + 104
13  AudioToolbox                    0x366aa518 AUConverterBase::RenderBus(unsigned long&, AudioTimeStamp const&, unsigned long, unsigned long) + 896
14  AudioToolbox                    0x36745376 AURemoteIO::RenderBus(unsigned long&, AudioTimeStamp const&, unsigned long, unsigned long) + 42
15  AudioToolbox                    0x36757d84 AUBase::DoRenderBus(unsigned long&, AudioTimeStamp const&, unsigned long, AUOutputElement*, unsigned long, AudioBufferList&) + 184
16  AudioToolbox                    0x3669002e AUBase::DoRender(unsigned long&, AudioTimeStamp const&, unsigned long, unsigned long, AudioBufferList&) + 438
17  AudioToolbox                    0x3674592a AURemoteIO::PerformIO(unsigned int, unsigned int, XAudioTimeStamp const&, XAudioTimeStamp const&, int&) + 870
18  AudioToolbox                    0x36745a90 AURIOCallbackReceiver_PerformIO + 192
19  AudioToolbox                    0x3673ca1e _XPerformIO + 178
20  AudioToolbox                    0x366a5cdc mshMIGPerform + 368
21  AudioToolbox                    0x36710b96 MSHMIGDispatchMessage + 22
22  AudioToolbox                    0x367452ea AURemoteIO::IOThread::Run() + 58
23  AudioToolbox                    0x36748f42 AURemoteIO::IOThread::Entry(void*) + 2
24  AudioToolbox                    0x36685c9c CAPThread::Entry(CAPThread*) + 208
25  libsystem_c.dylib               0x3414172e _pthread_start + 314
26  libsystem_c.dylib               0x341415e8 thread_start + 0 
```

实际上还有*另一个*AURemoteIO 线程，它看起来像这样：

```
Thread 9 name:  AURemoteIO::IOThread
Thread 9:
0   libsystem_kernel.dylib          0x382dd004 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x382dd1fa mach_msg + 50
2   AudioToolbox                    0x36745312 AURemoteIO::IOThread::Run() + 98
3   AudioToolbox                    0x36748f42 AURemoteIO::IOThread::Entry(void*) + 2
4   AudioToolbox                    0x36685c9c CAPThread::Entry(CAPThread*) + 208
5   libsystem_c.dylib               0x3414172e _pthread_start + 314
6   libsystem_c.dylib               0x341415e8 thread_start + 0 
```

# iphone - 检测 UITableView 是否处于 beginUpdates/endUpdates 状态

> ID：10550360
> 
> 赞同：5
> 
> 时间：2012-05-11T11:20:26.823
> 
> 标签：iphone, ios, uitableview

我正在为 UITableView 编写一个小型单元测试，并想检查是否有 endUpdates 方法调用。换句话说，我想检查 UITableView 是否处于正常状态而不是处于“更新”状态。

有没有办法（方法、属性或其他东西）我可以用来检查 TableView 状态？

我考虑过子类化，但对于这样一个简单的任务来说似乎很复杂。

* * *

## 回答 #1

> 赞同：-5
> 
> 时间：2012-05-11T12:06:16.787

有一个内置的布尔值来检查 tableView 是否处于编辑模式。

检查状态使用

```
if([tableView isEditing] == YES)
{
//enter code if in editing mode
}
else
{
//enter code for non editing mode
} 
```

希望能帮助到你。快乐编码:)

# windows - 如何在 Windows 中使用命令行函数仅选择 txt 文件中的数字

> ID：10550361
> 
> 赞同：0
> 
> 时间：2012-05-11T11:20:29.743
> 
> 标签：windows, cmd

我有一个具有这种格式的文件：

```
<somecharacters> 1 <somecharacters>
<somecharacters> 2 <somecharacters>
<somecharacters> 4 <somecharacters>
<somecharacters> 9 <somecharacters> 
```

我需要解析出最大的数字。我尝试使用`FINDSTR`and `FIND`，但对 Windows 命令行没有足够的经验......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:00:50.647

如果您的文件中的所有行的格式都是一致的，那么这应该可以工作（我使用属性而不是内部文本）

```
@echo off
setlocal enableDelayedExpansion
set maxPort=0
for /f "tokens=6 delims=<./ " %%N in (test.txt) do (
  if %%N gtr !maxPort! set maxPort=%%N
)
echo maxPort=%maxPort% 
```

但是，如果您有其他看起来不同的行应该被忽略，您将需要使用 FINDSTR 过滤掉您不想解析的行。FINDSTR 命令将进入 IN() 子句。FINDSTR 对可能满足您需求的正则表达式的支持有限。

# c++ - 在哪里/如何删除另一个对象中的对象，在它创建的函数之外

> ID：10550362
> 
> 赞同：0
> 
> 时间：2012-05-11T11:20:34.390
> 
> 标签：c++, object, memory, memory-leaks, delete-operator

为了解决这个问题[内存管理不好？类成员(boolean)值大于1，在递归函数](https://stackoverflow.com/questions/10543987/bad-memory-management-class-member-boolean-value-greater-than-1-in-recursion)中，我在Valgrind下跑了整个程序，发现在这一步之前出现了一些内存泄漏问题。在函数 CMFLoader 中发现了 2 个“绝对丢失”的问题。

（这里MyDataset是一个Molecule对象的向量，每个Molecule对象都包含一个Elements对象）

在 CMFLoader::loadFile(vector& MyDataset) 中，我原来有

```
MyDataset.push_back( readMolecule( in_file, word ); 
```

其中 CMFLoader::readMolecule 返回一个 Molecule 对象。在 readMolecule 函数中，创建了一个新的 Molecule 对象（但直到 main 的最后才被删除，稍后会详细介绍）

```
Molecule* CMFLoader::readMolecule( ifstream& in_file, string id)
{
Molecule* my_mol = new Molecule( id );
// statements, somewhere along the readFormula function is called
my_mol->setFormula( readFormula( ss ) );
return my_mol;
} 
```

其中 CMFLoader::readFormula 返回一个 Element 对象，并且有一个 Molecule::setFormula 函数将其保存到 Molecule 对象。在读取公式

```
Elements* CMFLoader::readFormula( stringstream& ss )
{
Elements* my_formula = new Elements();
...
return my_formula;
} 
```

我遇到了问题[here](https://stackoverflow.com/questions/10543987/bad-memory-management-class-member-boolean-value-greater-than-1-in-recursion)中描述的问题，稍后在主程序中。具体问题发生在 HammettCheck::checkHammett 步骤。然后我将上面的 CMFLoader 函数更改为类似的东西。之前遇到的问题好像都消失了（但后来程序中出现了其他问题，无疑与内存泄漏有关）：

在 CMFLoader::loadFile

```
Molecule* new_mol = new Molecule(word);
    MyDataset.push_back( readMolecule( in_file, word ,new_mol) ); 
```

其中 readMolecule 现在接受一个新参数 Molecule* 并且新运算符在函数中被删除。同样，在 readFormula 中，我现在有

```
 Elements* new_formula = new Elements();
my_mol->setFormula( readFormula( ss, new_formula ) ); 
```

等等

现在当然没有消除内存泄漏问题！但是，我**不能在任何 CMFLoader 函数中放入删除运算符，**因为这些对象稍后会在主程序中使用。具体来说，Elements* 一直使用到 ConjugationCheck::checkConjugation 步骤，Molecule* 一直使用到程序结束。

主程序是这样的

```
int main(int argc, char* argv[]){
//initialising an empty array to store our molecules.
vector<Molecule*> MyDataset;

//Read command line inputs.
InputReader* MyInputs = new InputReader();
if( !MyInputs->readInputs(argc, argv) ) {delete MyInputs;return -1;}

//Load CMF file.
CMFLoader* MyLoader = new CMFLoader( MyInputs );
unsigned int min_same_grp = MyLoader->getmin(); //define minimum no of same hammett groups for structure
if( !MyLoader->loadFile( MyDataset ) ) {delete MyLoader;delete MyInputs;return -1;}
delete MyLoader;

cout << MyDataset.size() << " molecules loaded" << endl;

//Remove molecules which are too large.
BigFilter* MyBigFilter = new BigFilter( MyInputs );
if( !MyBigFilter->filterBigLigands( MyDataset ) ) {delete MyBigFilter;delete MyInputs;return -1;}
delete MyBigFilter;

cout << "Molecules left after big ligand filter: " << MyDataset.size() << endl;

//Mark any Hammetts groups found in molecules.
HammettCheck* MyHammettCheck = new HammettCheck(min_same_grp);
if( !MyHammettCheck->loadHammetts() ) {delete MyHammettCheck;delete MyInputs;return -1;}
if( !MyHammettCheck->checkHammett( MyDataset ) ) {delete MyHammettCheck;delete MyInputs;return -1;}
delete MyHammettCheck;

cout << "Molecules containing Hammett Groups: " << MyDataset.size() << endl;

ConjugationCheck* MyConjugationCheck = new ConjugationCheck(min_same_grp);
if( !MyConjugationCheck->checkConjugation( MyDataset ) ) {delete MyConjugationCheck;delete MyInputs;return -1;}
delete MyConjugationCheck;

cout << "Molecules containing conjugated Hammett Groups: " << MyDataset.size() << endl;

DataAdder* MyDataAdder = new DataAdder( MyInputs );
if( !MyDataAdder->addData( MyDataset ) ) {delete MyDataAdder; delete MyInputs;return -1;}
delete MyDataAdder;

//Sorts molecules based on their NLO rating given by NLOCompare.
if (min_same_grp ==1) {sort(MyDataset.begin(), MyDataset.end(), NLOCompare);}
else {sort(MyDataset.begin(), MyDataset.end(), OctuNLOCompare);}

//Saves a new CIF file containing just the predicted NLO molecules.
FileSaver* MyFileSaver = new FileSaver( MyInputs );
if( !MyFileSaver->saveFile( MyDataset ) ) {delete MyFileSaver;delete MyInputs;return -1;}
delete MyFileSaver;

/*
Saves a txt file which can be imported into Excel, showing the
paths to each of the selected Hammett groups in a molecule.
*/
ExcelSaver* MyExcelSaver = new ExcelSaver( MyInputs );
if( !MyExcelSaver->saveFile( MyDataset ) ) {delete MyExcelSaver;delete MyInputs;return -1;}
delete MyExcelSaver;

//Cleans the memory before exiting the program.
for(unsigned int i=0; i < MyDataset.size(); i++){
    delete MyDataset[i];
}
delete MyInputs;
return 0;
} 
```

在程序的各个点，如果 Molecule MyDataset[i] 不符合某些条件，则使用以下方法将其删除

```
MyDataset.pop_back(); 
```

所以这将调用分子析构函数，它看起来像这样

```
Molecule::~Molecule(void)
{
//Deletes all atoms in molecule.
for(unsigned int i=0; i < mol_atoms.size(); i++){
    delete mol_atoms[i];
}

//Deletes all bonds in molecule.
for(unsigned int i=0; i < mol_bonds.size(); i++){
    delete mol_bonds[i];
}

//Deletes the class of elements contained.
delete mol_formula;
} 
```

**我不确定这里出了什么问题。我应该如何解决内存泄漏问题？**

我的 Valgrind Memcheck 泄漏总结中的“绝对丢失”问题

```
==34809== 400 (96 direct, 304 indirect) bytes in 2 blocks are definitely lost in loss record 24 of 33
==34809==    at 0x1000A0679: malloc (vg_replace_malloc.c:266)
==34809==    by 0x1000F7F04: operator new(unsigned long) (in /usr/lib/libstdc++.6.0.9.dylib)
==34809==    by 0x10000A3B4: CMFLoader::readMolecule(std::basic_ifstream<char, std::char_traits<char> >&, std::string, Molecule*) (in ./OctuDiscovery)
==34809==    by 0x10000B9EE: CMFLoader::loadFile(std::vector<Molecule*, std::allocator<Molecule*> >&) (in ./OctuDiscovery)
==34809==    by 0x10000282E: main (in ./OctuDiscovery)

==34809== 12,833 (152 direct, 12,681 indirect) bytes in 1 blocks are definitely lost in loss record 33 of 33
==34809==    at 0x1000A0679: malloc (vg_replace_malloc.c:266)
==34809==    by 0x1000F7F04: operator new(unsigned long) (in /usr/lib/libstdc++.6.0.9.dylib)
==34809==    by 0x10000B93B: CMFLoader::loadFile(std::vector<Molecule*, std::allocator<Molecule*> >&) (in ./OctuDiscovery)
==34809==    by 0x10000282E: main (in ./OctuDiscovery) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T11:33:41.673

评论多于答案，但评论太长：
在下一个函数中，使用动态内存没有意义：

```
Molecule* CMFLoader::readMolecule( ifstream& in_file, string id)
{
Molecule* my_mol = new Molecule( id );
// statements, somewhere along the readFormula function is called
my_mol->setFormula( readFormula( ss ) );
return my_mol;
} 
```

您可以将其替换为：

```
Molecule CMFLoader::readMolecule( ifstream& in_file, string id)
{
Molecule my_mol( id );
// statements, somewhere along the readFormula function is called
my_mol.setFormula( readFormula( ss ) );
return my_mol;
} 
```

这已经解决了 1 个可能的内存泄漏问题，但可能存在需要/首选动态内存版本的原因，在这种情况下，应该使用已经提到的 unique_ptr。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T11:25:26.693

如果您想做这样的事情，我建议您看一下 std::auto_ptr 类，或者至少看一下智能指针或自动指针的概念。您应该依赖 RAII (Resource Aquisition Is Initialization) 范式，这意味着内存管理应该由对象自己完成：尽可能避免使用基本指针和自写内存管理代码。

# android - 不同屏幕尺寸的动态视图

> ID：10550363
> 
> 赞同：4
> 
> 时间：2012-05-11T11:20:34.643
> 
> 标签：android

我正在开发一个动态生成许多视图的项目，并且应用程序将在不同的屏幕尺寸上运行。那么，当视图动态生成并且应用程序在不同设备上运行时，有什么方法可以处理代码中的屏幕大小。提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:18:41.523

如果您想真正具体，请使用：

`DisplayMetrics metrics = new DisplayMetrics(); getWindowManager().getDefaultDisplay().getMetrics(metrics);` 然后，您可以在 IF 语句中以某些方式指定要更改布局的屏幕像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:49:11.963

是的，有可能。

转到 AndroidManifiest.xml 文件 -> Manifiest 选项卡 -> 添加屏幕支持。您还可以在最后一个 AndroidManifyt.xml 选项卡中看到这样的。

< 支持-屏幕

```
 android:xlargeScreens="true" 

    android:resizeable="true" 

    android:normalScreens="true" 

    android:anyDensity="true" 

    android:smallScreens="true" 

    android:largeScreens="true"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T11:58:00.393

尝试类似的东西

LayoutParams p = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.FILL_PARENT);
txtView.setLayoutParams(p);

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

使用 WRAP_CONTENT 或 FILL_PARENT 不固定高度和宽度

使用 dp 和 sp 作为单位

为不同的屏幕密度提供不同的位图可绘制对象

为不同的屏幕尺寸提供不同的布局

# java - java创建HTTP持久连接

> ID：10550364
> 
> 赞同：0
> 
> 时间：2012-05-11T11:20:39.993
> 
> 标签：java, httpurlconnection, persistent

我正在尝试编写一个 java 程序，它会自动下载并命名一些我最喜欢的网络漫画。由于我将从同一个域请求多个对象，因此我希望有一个持久的 http 连接，我可以保持打开状态，直到所有漫画都下载完毕。下面是我正在进行的工作。如何在不打开新的 http 连接的情况下从同一个域但不同的路径发出另一个请求？

```
import java.io.BufferedReader;
    import java.io.IOException;
    import java.io.InputStreamReader;
    import java.net.HttpURLConnection;
    import java.net.URL

public class ComicDownloader
{
    public static void main(String[] args)
    {
        URL url = null;
        HttpURLConnection httpc = null;
        BufferedReader input = null;

        try
        {
            url = new URL("http://www.cad-comic.com/cad/archive/2002");
            httpc = (HttpURLConnection) url.openConnection();
            input = new BufferedReader(new InputStreamReader(httpc.getInputStream()));
            String inputLine;

            while ((inputLine = input.readLine()) != null)
            {
                System.out.println(inputLine);
            }

            input.close();
            httpc.disconnect();
        }
        catch (IOException ex)
        {
            System.out.println(ex);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T11:36:58.860

只要 HTTP 服务器支持 keep-alive，HttpURLConnection 的实现就会缓存底层的 TCP 连接并为您透明地执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-08T11:47:07.867

对 HTTP keep-Alive 的支持是透明的。但是，它可以通过系统属性**http.keepAlive**和**http.maxConnections**以及 HTTP/1.1 指定的请求和响应标头来控制。

控制 Keep-Alive 行为的系统属性是：

> http.keepAlive=(boolean) 默认值：true

指示是否应支持保持活动（持久）连接。

> http.maxConnections=(int) 默认值：5

指示每个目标在任何给定时间保持活动的最大连接数

取自：[持久连接](http://docs.oracle.com/javase/7/docs/technotes/guides/net/http-keepalive.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T11:26:57.290

HTTP 连接是无状态的，因此您请求的每个新图像都将是一个新 URL，因此也是一个新连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-07T10:11:33.730

要利用 java 持久 Http 连接，您不应关闭`HttpURLConnection`（在您的情况下为 httpc），而只需关闭输入流，就像从流中读取所有数据或关闭它一样。Java 将清除 Socket 连接并使其可供重用。
根据 jdk，它使用缓存机制来重用相同的 TCP 连接。调用`disconnect()`不应该暗示这个`HttpURLConnection`实例可以被其他请求重用。

# sql-server - 更新日期时间变量中的年份

> ID：10550368
> 
> 赞同：6
> 
> 时间：2012-05-11T11:20:52.440
> 
> 标签：sql-server, datetime, datediff

我正在玩弄一个`datetime`变量。我似乎找不到将`datetime`可变年份更新为当前年份的方法。

例如我有

```
2007-12-01 00:00:00.000 
```

但我希望这样

```
2012-12-01 00:00:00.000    (The current year were in) 
```

我一直在玩`datediff`，但我似乎无法确定它。

任何意见，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T11:25:36.247

```
DECLARE @date datetime = '2007-01-09T12:34:56'
SELECT @date = DATEADD(yyyy, DATEDIFF(yyyy, @date, GETDATE()), @date)

SELECT @date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T11:26:30.750

也许是这样的：

对于 sql server 2008+

```
DECLARE @date DATETIME='2007-12-01 00:00:00.000'
SET @date=DATEADD(year,DATEDIFF(year,@date,GETDATE()),@date) 
```

对于 sql server 2005

```
DECLARE @date DATETIME
SET @date='2007-12-01 00:00:00.000'
SET @date=DATEADD(year,DATEDIFF(year,@date,GETDATE()),@date) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T11:29:56.777

这是一个简单的方法：

```
select @yourDate = dateadd(year, datepart(year, getdate()) - datepart(year, @yourDate), @yourDate) 
```

# xml - 如何将xml代码解析为html

> ID：10550370
> 
> 赞同：0
> 
> 时间：2012-05-11T11:20:59.757
> 
> 标签：xml, xml-parsing

如果我有 xml 反馈链接，`www.my_site.com/api.php?query=something` 结果如下 xml 代码

```
<api>
<page pageid="577" ns="0" title="something">
<extract xml:space="preserve">
blah blah about something blah blah
</extract>
</page>
</api> 
```

现在如何解析这段代码以显示为 HTML ？！我试过这个想法但没有奏效

```
<?PHP
$rssurl = "www.my_site.com/api.php?query=something";
$xml = @simplexml_load_file("$rssurl");
if($xml){

foreach ($xml->extract->item as $item) {
$desc = $item->extract;
$latestfeeds .= "$desc";
}

}else{

$latestfeeds = "Problem";

}

$body = "$latestfeeds";
echo $body;
?> 
```

它一直给我“问题”！这个想法可能是完全错误的所以任何帮助如何做到这一点以获得提取的内容`blah blah about something blah blah`〜谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:28:10.487

从 XML 到 HTML 没有解析，而是转换。W3C 定义了一种能够转换 XML 的语言。XSL（可扩展样式表语言）可以帮助您使用 XSLT 将 XML 转换为 HTML。（[见教程](http://www.w3schools.com/xsl/)）

# php - 如果非静态方法可以是静态的而不会对代码产生任何不良影响？

> ID：10550373
> 
> 赞同：0
> 
> 时间：2012-05-11T11:21:05.797
> 
> 标签：php, oop

我是 OOP 的新手。我在下面看到了一个例子。已`getStudentName()`设置为静态方法。根据我所掌握的 OOP 知识，这个方法应该是一个非静态方法。

但是，即使代码错误，代码仍然有效。我想知道非静态方法是否可以是静态的而不会对代码产生任何不良影响？

顺便说一句，代码是用 PHP 编写的。

```
class student{

    public static function getStudentName($studentID){
             ....
             return $studentName;

    }

}

$stuName = student::getStudentName($stuID) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:27:48.600

AFAIK，您可以在 PHP 中将静态方法称为普通方法。

`$someStudent->getStudentName()`

`student::getStudentName()`

但是你不会有 $this。

将这个具体方法设为静态是否是一个好主意取决于它的功能。

如果它应该为您提供学生对象的名称，请使其正常。

如果它应该在所有学生对象中搜索一个 ID 并检索该对象的名称，请将其设为静态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:38:19.147

PHP 允许您忽略或推断“静态”关键字，并且只抛出 E_STRICT 错误（隐藏在默认的 error_reporting 掩码下）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T11:29:06.040

要看。

您的班级“学生”必须是学生。studentId 是一个属性，它存储在数据库中。从数据库中检索 que student 或学生姓名是另一回事。

如果您使用 ActiveRecord 模式，好的，自己的类知道这样的事情，但这样做更相关

```
$instance = student::find($id);
$name = $instance->name(); 
```

但在某些情况下，您只能这样做

```
$name = student::find_and_return_the_name($id); 
```

如果资源的建造成本很高。

# primefaces - 提交表单后如何保持在同一个选项卡上

> ID：10550383
> 
> 赞同：0
> 
> 时间：2012-05-11T11:21:42.817
> 
> 标签：primefaces

我正在使用这样的 p:tab 视图

```
<ui:composition template="./WEB-INF/templates/masterTemplate.xhtml">
    <ui:define name="windowTitle">
        #{msgs.home}
    </ui:define>

    <ui:define name="content">
        <p:tabView id="tabView" dynamic="false">

            <p:tab id="tab1" title="#{msgs.home}">
                <ui:include src="/homePages/home.xhtml" />
            </p:tab> <!--end of tab1 -->

            <p:tab id="tab2" title="#{msgs.join}">
                <ui:include src="/homePages/join.xhtml" />
            </p:tab> <!--end of tab2 -->

            <p:tab id="tab3" title="#{msgs.signIn}">
                <ui:include src="/homePages/login.xhtml" />
            </p:tab> <!--end of tab3 -->

        </p:tabView>
    </ui:define>
</ui:composition> 
```

这是我的 join.xhtml 页面

```
<h:body>
    <ui:composition>
        <div id="join" style="border-style:solid; border-width:5px; padding: 10px;" >
            <div id="joinFormPosition" class="left">
                <h:form id="joinForm">
                    <h:outputText id="joinMessgae" value="#{msgs.joinMessgae}" />
                    <span class="asterisk">*</span><span class="labels">#{msgs.signInName}: </span>
                    <p:inputText id="name"
                                 value="#{joinPage.signInName}"
                                 required="true"/>
                    <p:message for="name" />
                    ...

                    <div id="submitButton">
                        <h:commandButton id="submitBtn"
                                         value="Submit"
                                         actionListener="#{join.saveUser}" />
                    </div>
                </h:form>
            </div> <!--end of joinFormPosition  -->
        </div> <!--end of join  -->
    </ui:composition>
</h:body> 
```

登录.xhtml

```
<ui:composition>

        <div id="login" style="border-style:solid; border-width:5px; padding: 10px;" >

            <div id="loginFormPosition" class="left">

                <h:form id="loginForm">
                    <h:outputText value="#{msgs.signIn}" />
                    .....
                    <div id="signInButton">
                        <h:commandButton id="signInBtn"
                                         value="Submit"
                                         actionListener="#{login.signIn}"
                                         action ="#{login.outcome}"/>
                    </div>
                </h:form>
            </div> <!--end of loginFormPosition  -->
        </div> <!--end of login -->
    </ui:composition> 
```

如果我在选项卡加入，然后提交表单，如果任何验证失败，那么我切换到第一个选项卡。我希望如果我单击提交按钮并且验证是否失败，我会留在同一个选项卡上。我在登录选项卡上面临同样的情况。提交表单后如何保持在同一个选项卡上？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T12:54:21.380

您可以将 tabview 绑定到支持 bean 上的 tabview 对象并在那里设置活动索引。

```
<p:tabView binding="#{myTabBean.messagesTab}"> 
```

然后在 myTabBean 上：

```
private TabView messagesTab = new TabView();

public TabView getMessagesTab () {
    return messagesTab;
}

public void setMessagesTab(TabView messagesTab ) {
    this.messagesTab = messagesTab;
}

public void someDecisionMethod(){
    int idx=1
    this.messagesTab.setActiveIndex(idx);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-26T12:03:47.947

我知道这个问题很老，但几年后我在 primefaces 5.2 中遇到了同样的问题。对于您的特定情况，可能有几种解决方案，例如仅更新选项卡的内容而不是整页。但我真的不得不重新加载整个页面（区域设置更改）：

要“记住” activeTab，您基本上只需在视图范围的 managedBean 中绑定 activeIndex 并指定 ap:ajax 事件侦听器。但是由于您的 p:tabView 不在表单中，并且选项卡本身有自己的表单，因此存在一些已知问题：[https](https://github.com/primefaces/primefaces/issues/695) ://github.com/primefaces/primefaces/issues/695恕我直言，最简单的解决方法是设置 partialSubmit p:ajax 为真。因此，这就是设置 activeIndex 并保留在选项卡上所需的全部内容：

xhtml:

```
<p:tabView activeIndex="#{myManagedBean.activeTabIndex}">
  <p:ajax event="tabChange" partialSubmit="true" /> 
```

我的托管豆：

```
//plus its getter and setter
private Integer activeTabIndex; 
```

编辑：只指定`<p:ajax event="tabChange" partialSubmit="true" />`上述内容可能就足够了，甚至没有绑定 activeIndex。至少对于我的用例来说，这就足够了。

# asp.net-mvc-3 - 在缩略图中转换该图像并将这两个图像保存在 asp.net-mvc3 中

> ID：10550385
> 
> 赞同：1
> 
> 时间：2012-05-11T11:21:55.797
> 
> 标签：asp.net-mvc-3, image, file-upload

通过上传控件上传图像并将该图像转换为缩略图并将文件实际图像保存在图像文件夹中，并将缩略图图像保存在 asp.net-mvc3 中的缩略图图像文件夹中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:26:52.977

我使用名为[Image Resizer](http://imageresizer.codeplex.com/)的 3rd 方库。我在上传图像和保持质量方面遇到了困难，这个库帮助了我很多。

在您看来：

```
@model YourProject.ViewModels.ProductImageUploadCreateViewModel
@using (Html.BeginForm("Upload", "ProductImage", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
     <input type="file" name="ImageFile1" id="ImageFile1">
} 
```

你的控制器：

```
public class ProductImageController : Controller
{
     [HttpPost]
     public ActionResult Upload(ProductImageUploadCreateViewModel viewModel)
     {
          if (!ModelState.IsValid)
          {
               return View(viewModel);
          }

          if (viewModel.ImageFile1 != null)
          {
               UploadImage(viewModel.ProductId, "1", viewModel.ImageFile1);
          }

          // Return to where ever...
     }
} 
```

您的上传方式：

```
private void UploadImage(int productId, string imageNo, HttpPostedFileBase imageFile)
{
     string uploadPath = Server.MapPath("~/Assets/Images/Products/" + productId);
     if (!Directory.Exists(uploadPath))
     {
          Directory.CreateDirectory(uploadPath);
     }

     Dictionary<string, string> versions = new Dictionary<string, string>();
     versions.Add("_m", "width=150&height=150&scale=both&format=jpg");  // Medium size

     string filePrefix = productId + "_" + imageNo;
     versions.Add("_s", "width=90&height=90&scale=both&format=jpg");  // Small size
     versions.Add("_l", "width=300&height=300&scale=both&format=jpg");  // Large size

     foreach (string fileSuffix in versions.Keys)
     {
          // Generate a filename
          string fileName = Path.Combine(uploadPath, filePrefix + fileSuffix);

          // Let the image builder add the correct extension based on the output file type
          fileName = ImageBuilder.Current.Build(imageFile, fileName, new ResizeSettings(versions[fileSuffix]), false, true);
     }
} 
```

看看他们的网站，有几个示例可供您使用。我希望这有帮助 ：）

# mysql - 按用户分组并在 MYSQL 中显示最新不工作

> ID：10550386
> 
> 赞同：0
> 
> 时间：2012-05-11T11:21:57.400
> 
> 标签：mysql, group-by, sql-order-by

我有一个正在编码的社交网络，但它与其他的有点不同，在这种情况下，每个用户在提要部分只显示一个状态。

所以我需要按日期对状态进行排序，最新的在最上面，但也按用户ID分组不幸的是我似乎无法让这个工作......

这是我当前的查询：

```
SELECT *
FROM status
WHERE userID != "83" #This is just so my statuses don't show
GROUP BY userID
ORDER BY addedDate DESC
LIMIT 10 
```

我希望看到最新的状态结果，并且每个用户只有一个，而不是我看到第一个状态，因此 group by 正在工作，但 order by 没有。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T12:10:14.573

[正如Robin's answer](https://stackoverflow.com/a/10550415/623041)的评论中所提到的，这种方法是不可靠的，因为 MySQL 不保证它总是会返回每个组的最新状态。您必须改为使用选择最新状态（基于`addedDate`）的子查询来连接您的表。

```
SELECT   *
FROM     status
  NATURAL JOIN (
    SELECT   userID, MAX(addedDate) as addedDate
    FROM     status
    GROUP BY userID
  ) AS mostRecent
ORDER BY addedDate DESC
LIMIT    10 
```

请注意，如果用户有多个相同`addedDate`的状态更新，服务器将返回所有状态（而 Robin 的查询将返回不确定的状态）；如果您需要控制这种情况，您将需要定义如何确定应该选择哪种状态更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T11:23:34.503

```
SELECT *
FROM (  SELECT *
        FROM status
        WHERE userID != "83"
        ORDER BY addedDate DESC) AS h
GROUP BY userID
ORDER BY addedDate DESC
LIMIT 10 
```

您必须在 GROUP BY'ing 之前 ORDER BY。

[**示例 1**](https://stackoverflow.com/questions/10497635/how-to-write-inner-query-that-returns-latest-message-for-a-given-user/10497700#10497700)
[**示例 2**](https://stackoverflow.com/questions/7436973/use-group-by-in-mysql-and-return-identity-of-the-row/7437076#7437076)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T11:24:59.183

```
SELECT userID, max(addedDate)
FROM status
WHERE userID != "83" #This is just so my statuses don't show
GROUP BY userID 
```

# asp.net - ASP.NET 身份验证使用 LocalStorage 而不是 Cookie？

> ID：10550387
> 
> 赞同：1
> 
> 时间：2012-05-11T11:22:00.710
> 
> 标签：asp.net, forms-authentication, local-storage

*暂时忽略并非所有浏览器都支持 LocalStorage。*

是否可以在 ASP.NET Web 应用程序中使用 LocalStorage 而不是用于 FormsAuthentication 的 Cookie 来推出您自己的身份验证“处理程序”（想要一个更好的词）？

如果可能的话，我在哪里可以找到最好的信息来开始学习如何去做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T11:27:23.193

通常，您的身份验证发生在服务器端，cookie 内容与每个请求一起传递。因此，通过在访问资源之前使用请求中可用的信息，服务器可以查看用户是否已登录。

但是，在 localStorage 的情况下，内容不会随每个请求传递给服务器，并且只能由 Javascript 访问。因此，不能使用 localStorage 代替 cookie 进行身份验证。

# java - 如果一个新的 Frame 出现 setEditable(false) ，如果用户关闭它 setEditable(true)

> ID：10550389
> 
> 赞同：0
> 
> 时间：2012-05-11T11:22:05.033
> 
> 标签：java, swing, exception, jframe, jtextfield

我想创建这个代码：用户输入一个数值，如果他输入了字符，它将抛出异常，该字段将停止工作，然后在用户关闭新框架后显示另一个框架并显示错误消息，一切都恢复原状这是否意味着该领域将再次发挥作用！我设法使该领域停止工作，但我不知道用户是否关闭了新框架！这是我的尝试

```
public void keyReleased(KeyEvent event) {

try{
double l,h,w;
l=Double.parseDouble(input_length.getText());
w=Double.parseDouble("0"+input_width.getText());
h=Double.parseDouble("0"+input_width.getText());
}

catch(NumberFormatException a){

input_length.setEditable(false);
input_height.setEditable(false);
input_width.setEditable(false);

JFrame ErrorFrame = new JFrame("Error");
JPanel content = new JPanel(); ;
ErrorFrame.setContentPane(content);

ErrorFrame.setSize      (350, 150);
ErrorFrame.setResizable (false);
ErrorFrame.setLocation  (FRAME_X_ORIGIN, 250);

content.setLayout(new FlowLayout());
JLabel text = new JLabel(" ERROR ! please Enter number only ",JLabel.CENTER);
text.setFont(new Font("Arial", Font.PLAIN, 20));
text.setForeground(Color.red);
content.add(text);
ErrorFrame.setVisible(true);

setDefaultCloseOperation(ErrorFrame.EXIT_ON_CLOSE);
int op = ErrorFrame.getDefaultCloseOperation();

if(op == 1 ){
input_length.setEditable(true);
input_height.setEditable(true);
input_width.setEditable(true);}

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T11:30:16.337

1）。不要将 new`JFrame`用于错误消息 - 使用`JDialog` [Here is how](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)

2）。`h=Double.parseDouble("0"+input_width.getText());`我认为你的意思是`input_height.getText()`这里，不是`input_width.getText()`

3）。显示您的错误对话框后，只需清除您的文本字段 - 没关系。当用户关闭它时 - 他会看到它们是空的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T12:06:00.870

1.  如果您选择模式对话框来显示错误消息，则无需更改字段的可编辑状态。
2.  就我个人而言，如果每次我打错字时都显示一个对话框，我会非常恼火。例如，在无效输入时将文本字段的背景颜色更改为红色，并禁用“确定”按钮（或作为用户指示您已完成编辑的任何机制）对 IMO 更友好。您甚至可以在面板中显示指示错误的标签，或工具提示，...。
3.  如果您想对文本字段中的文本更新做出反应，我还建议您使用 a`DocumentListener`而不是 a`KeyListener`

关于为什么我建议选择另一种机制来通知用户错误的示例：我在文本字段中粘贴了一个无效值（例如`3x456`），然后弹出一个对话框。现在我想使用箭头键导航到错误并更正它。这意味着我必须向左导航 3 个位置才能删除`x`. 如果我使用箭头键（也是键），我将在导航期间再看到 3 次此对话框。

# c# - 使用 Visual FoxPro 进行编程/数据库

> ID：10550390
> 
> 赞同：3
> 
> 时间：2012-05-11T11:22:06.313
> 
> 标签：c#, database, foxpro, visual-foxpro

我为一家使用 Foxpro 作为其数据库的程序的公司工作。

如果 Visual FoxPro 只是一个数据库，或者它是一个编程语言 + 数据库的组合，我实际上有点困惑。

我想创建一些软件来与之集成，但我只需要操作数据库中的日期（因为我无权访问源代码）。

是否有与 Visual FoxPro 相当的 SQL Management Studio，我可以通过查看数据库文件来查看表和数据吗？或者它是否全部集成到编程中，我需要源来操作它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T12:28:43.000

最好的 SQL Management Studio 等价物是 VFP IDE。但是，作为 C# 开发人员，您可能更喜欢使用[LINQPad](http://www.linqpad.net/)，这样您就可以使用 LINQ 处理数据，而不必了解任何有关 VFP 语法的知识。至于编写一些 C# 代码来操作 VFP 数据……我建议查看 LINQ to VFP 和 VFP EF Provider。

全面披露：我写了[LINQPad Provider](http://randomdevnotes.com/2011/04/23/accessing-vfp-data-using-linqpad/)、[LINQ to VFP](http://linqtovfp.codeplex.com/)和[VFP EF Provider](http://vfpefprovider.codeplex.com/)所以我可能有点偏见 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T12:47:52.787

Visual Foxpro 既是一种编程语言，又是一种数据库，它们都封装在一个中。如果您可以获得 Visual Foxpro，您可以自己编程并根据需要直接打开表格、更新表格等。

此外，Microsoft 有一个 OleDbProvider 可以连接到 VFP 表并执行所有常见的选择/插入/更新/删除功能。所以，就是说，您可以使用任何您可能喜欢的 .net。我个人使用 C# 和 Microsoft OleDbProvider，并使用它构建了一些网站以及桌面应用程序，所有这些都直接进入表格。唯一的问题是如果任何表都使用第三方加密工具加密。

我和其他人有很多关于如何与 VFP 连接以选择、插入和更新数据的帖子，因此您显然可以随意查找。我将从使用标签搜索开始，例如

C# VFP OleDb

当你遇到困难时，你总是可以在这里再次提问以获得答案:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T03:27:27.060

无需任何人说“对不起”，正如 Alan B 所说，FoxPro 应用程序的数量比大多数人意识到的要多。由于 Access 会包含大量数据文件，因此我将 MS Access 应用程序转换为 FoxPro 过得很好。

FoxPro 既是一个数据库（Think RDBMS 系统），也是一个出色的快速应用程序开发工具。您可以通过 OleDbProvider 轻松读取表，如果您将其用作前端，则可以轻松连接到任何主数据库。我个人有连接到 MySql、Sql-Server 的应用程序。

如果您使用 Visual Studio 2010，使用 C# 编写应用程序以读取和返回 FoxPro 表中的数据实际上非常简单，Tom 提供了一些很好的链接，以获取有关如何完成您正在尝试做的事情的信息

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T11:37:06.147

如果没有 FoxPro 本身（想想访问），您就在搞乱 ODBC 并自己编写它。或者更好的是（显然）有一个 OLEDB 提供程序。

[用于 Visual FoxPro 的 Sm OLE DB 提供程序](http://www.microsoft.com/en-us/download/details.aspx?id=14839)

和@Tim Medora 一样，我很抱歉。

# cassandra - 如何使用 Hector 重新连接到 Cassandra？

> ID：10550391
> 
> 赞同：3
> 
> 时间：2012-05-11T11:22:08.513
> 
> 标签：cassandra, hector

我有以下代码：

```
StringSerializer ss = StringSerializer.get();
String cf = "TEST";
CassandraHostConfigurator conf = new CassandraHostConfigurator("localhost:9160");
conf.setCassandraThriftSocketTimeout(40000);
conf.setExhaustedPolicy(ExhaustedPolicy.WHEN_EXHAUSTED_BLOCK);
conf.setRetryDownedHostsDelayInSeconds(5);
conf.setRetryDownedHostsQueueSize(128);
conf.setRetryDownedHosts(true);
conf.setLoadBalancingPolicy(new LeastActiveBalancingPolicy());
String key = Long.toString(System.currentTimeMillis());
Cluster cluster = HFactory.getOrCreateCluster("TestCluster", conf);
Keyspace keyspace = HFactory.createKeyspace("TestCluster", cluster);
Mutator<String> mutator = HFactory.createMutator(keyspace, StringSerializer.get());    int count = 0;
while (!"q".equals(new Scanner( System.in).next())) {
    try{
        mutator.insert(key, cf, HFactory.createColumn("column_" + count, "v_" + count, ss, ss));
    count++;
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

我可以使用它编写一些值，但是当我重新启动 cassandra 时，它会失败。这是日志：

> TIOStreamTransport.write(TIOStreamTransport.java:145) ... 9 更多 [15:11:17] 错误 [HConnectionManager] 将主机标记为已关闭主机 >localhost(127.0.0.1):9160 [15:11:17] 错误[HConnectionManager ] 关闭时的池状态：>:{localhost(127.0.0.1):9160}; IsActive?：真；主动：1；封锁：0；空闲：15；NumBeforeExhausted：49 [15:11:17] INFO [ConcurrentHClientPool] 关闭触发：{localhost(127.0.0.1):9160} [15:11:17] INFO [ConcurrentHClientPool] 关闭完成：{localhost(127.0.0.1) ：9160} [15:11:17] INFO [CassandraHostRetryService] 检测到已关闭的主机已添加到重试队列：localhost（127.0.0.1）：9160 [15:11:17] WARN [HConnectionManager] 无法在此主机上完成请求CassandraClient [15:11:17] 警告 [HConnectionManager] 例外：我。关闭。[15:11:17] 信息 [HConnectionManager] 客户端 CassandraClient 已释放到非活动或死池。关闭。[15:11:17] 信息 [HConnectionManager] 将主机 localhost(127.0.0.1):9160 添加到池中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T01:28:19.033

你已经设置 -

```
conf.setRetryDownedHostsDelayInSeconds(5); 
```

尝试在重启后等待 5 秒以上。此外，您可能需要升级。

**您设置的thrift_max_message_length_in_mb**大小是多少？

亲切的问候。

# windows - 如何在具有不同参数的批处理文件中连续运行 exe

> ID：10550395
> 
> 赞同：0
> 
> 时间：2012-05-11T11:22:14.653
> 
> 标签：windows, batch-file, cmd

我有一个 exe 应用程序，它接受 2 个参数。一是带有特定扩展名的输入文件路径（例如 *.jpg），二是输出文件路径。

现在在一个文件夹中，假设我想连续传入 100 张 jpeg 图像，并使用与输入相同的文件名保存输出（扩展名将不同，exe 进行转换）。

知道如何编写批处理文件来实现这一点吗？

谢谢和问候， 佩鲁马尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:27:17.517

尝试这个：

```
@FOR %%1 IN (%1) DO convert %%1 %2\%%n1.png 
```

用作：

```
bulkconvert c:\test\*.jpg c:\test 
```

它将为每个与搜索模式匹配的文件调用 convert但扩展名为 png。

作为参考：[如何使用 CMD 从文件路径中获取文件夹路径](https://stackoverflow.com/questions/659647/how-to-get-folder-path-from-file-path-with-cmd)

# sencha-architect - 如何在 Sencha Architect 2 中编辑控制器？

> ID：10550398
> 
> 赞同：-1
> 
> 时间：2012-05-11T11:22:20.103
> 
> 标签：sencha-architect

从 Sencha Architect 2 编辑控制器或 sencha touch 应用程序的任何 js 文件是否可编辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:19:58.013

手动还是通过 UI？

手动添加控制器，然后在设计器视图中选择 CODE，然后选择 OVERWRITE。保存原件（看目录结构）

下次打开这个屏幕，选择（在代码视图的第一个选择器中）VIEW OVERRIDE CODE，这样你就可以看到你的最新作品。

我与 intellij 一起编辑文件。然后将其粘贴到字段中，它会自动更新两个文件（有一个 .js 和一个 Architect 元数据文件）

当然是通过 UI：这很简单。使用配置检查器选择您希望控制的视图模型和存储。

摩西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T11:44:03.197

如果您每次保存项目时都使用架构师，架构师会编辑 app 文件夹和 app.html 和 app.js 中所有文件的代码，因此您对实际文件所做的任何手动编辑将始终被覆盖...

这实际上在每个文件中显示为注释，例如：

```
/*
 * File: app/controller/MyController.js
 *
 * This file was generated by Sencha Architect version 2.1.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Sencha Touch 2.0.x library, under independent license.
 * License of Sencha Architect does not include license for Sencha Touch 2.0.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */ 
```

我希望这就是你要找的

# mtu - 分片是否依赖于 IP 或以太网 MTU

> ID：10550400
> 
> 赞同：0
> 
> 时间：2012-05-11T11:22:25.690
> 
> 标签：mtu

根据 RFC791，IP 模块不准备接受超过 576 个八位字节的数据报，以太网 MTU 为 1500 个八位字节。数据包是否根据以太网 MTU 或 IP MTU 进行分段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:10:17.330

从我正在阅读的内容来看，rfc791 需要 576 用于 ip 模块作为传入 ip 数据包/片段的“最小”缓冲区大小。

```
 All hosts must be prepared to accept datagrams of up 
    to 576 octets (whether they arrive whole or in fragments). 
```

IP 分片通常根据 1500，这是以太网的默认 MTU。

请注意，某些供应商支持帧大小高达 64k 的以太网巨型帧。

# php - (#100) 必须指定至少一个引用对象 - OG 操作的简单 POST

> ID：10550402
> 
> 赞同：6
> 
> 时间：2012-05-11T11:22:29.730
> 
> 标签：php, facebook, facebook-graph-api

我正在使用 PHP SDK 尝试使用 Graph API 发布一个简单的操作。

我设置了一个名为“Competition”的对象和一个名为“Enter”的动作。这样，用户参加比赛。

我的代码是这样的：

```
try {
    $statusUpdate = $this->data['facebook']->api('/me/lovepoppycompetition:enter', 'post', array(
        'competition' => 'https://apps.facebook.com/lovepoppycompetition/'
    ));
    echo '<pre>SUCCESS: '.print_r($statusUpdate, true).'</pre>';
} catch(FacebookApiException $e) {
    echo '<pre>FAILED: '.print_r($e, true).'</pre>';    
} 
```

我收到一个错误返回（FacebookApiException）：

```
(#100) At least one reference object must be specified 
```

我不太确定为什么，尤其是当我在另一个应用程序上使用此代码（具有不同的对象/操作）时，没有任何问题。

可能值得注意的是，我没有提交该操作，尽管我认为我不必为它工作？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:37:39.643

我认为问题在于您将操作重定向回您的 Facebook 应用程序。您应该在您的网站上创建一个竞赛页面，并使用它将用户重定向回您的网站。

确保在重定向页面上使用正确的 og 标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:29:45.183

这是由 FB 错误引起的，现已解决

# spring - 如何控制直接 url 访问？

> ID：10550404
> 
> 赞同：0
> 
> 时间：2012-05-11T11:22:40.533
> 
> 标签：spring, url, jakarta-ee, jsf-2, struts2

如何控制 jsf 2.0、struts 2 和 spring 3 中的直接 url 访问？我的意思是不登录用户类型 url 并始终显示主页或登录页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:11:19.610

您可以使用**spring-security 之**类的项目与您的应用程序集成，也可以编写自己的**servlet-filter**

stackoverflow [servlet-filter](/questions/tagged/servlet-filter "显示标记为“servlet-filter”的问题")标签很好地概述了 servlet 过滤器。对于大多数与 servlet 兼容的 Web 框架，您可以集成一个过滤器来拦截请求并将无效或未经授权的请求重定向到它们所属的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:34:19.500

我建议您使用 Apache Shiro 过滤器来控制对某个 url 的直接访问。

查看 Apache Shiro 配置 ini 文件，其中显示了对 url 访问的控制。

```
[main]
logout = org.apache.shiro.web.filter.authc.LogoutFilter
roles  = org.apache.shiro.web.filter.authz.RolesAuthorizationFilter
authc.loginUrl=/faces/login.xhtml
authc.successUrl=/faces/index.xhtml
roles.unauthorizedUrl = /faces/unauthorized.xhtml
logout.redirectUrl = /faces/login.xhtml?status=loggedOut
jdbcRealm = org.apache.shiro.realm.jdbc.JdbcRealm
jdbcRealm.permissionsLookupEnabled = true
jdbcRealm.authenticationQuery = SELECT PASSWORD FROM USERS WHERE USERS.USERNAME = ?
jdbcRealm.userRolesQuery = SELECT ROLE_NAME FROM ROLES, USER_ROLE, USERS WHERE  ROLES.ROLE_ID = USER_ROLE.ROLE_ID AND USERS.USR_ID = USER_ROLE.USR_ID AND USERS.USERNAME = ?
jdbcRealm.permissionsQuery = SELECT PERMISSIONS.PERM_NAME FROM ROLES, PERMISSIONS_ROLE, PERMISSIONS WHERE  ROLES.ROLE_ID = PERMISSIONS_ROLE.ROLE_ID AND PERMISSIONS.PERM_ID = PERMISSIONS_ROLE.PERM_ID AND ROLES.ROLE_NAME = ?
ds = com.mysql.jdbc.jdbc2.optional.MysqlDataSource 
ds.user = maqraa
ds.password = maqraa
ds.databaseName = maqraa
ds.serverName = localhost
ds.portNumber = 3306
jdbcRealm.dataSource = $ds
securityManager.realms = $jdbcRealm

[urls]
/faces/login.xhtml = authc
/faces/admin/** = authc, roles[admin]
/faces/teacher/** = authc, roles[teacher]
/faces/reports/** = authc, roles[admin]
/faces/officer/** = authc, roles[officer]
/faces/manager/** = authc, roles[manager]
/faces/roles/** = authc, roles[admin] 
```

查看前面的 url，您会发现对 /faces/login.xhtml 的任何访问都必须由经过身份验证的用户完成，此外还必须访问某些您必须扮演特定角色的 url .

查看 stackoverflow 上的 Shiro 标签或查看 Apache Shiro 站点。

我希望对你有所帮助。谢谢。

# magento - Magento结账成功页面：获取一些订单信息

> ID：10550407
> 
> 赞同：2
> 
> 时间：2012-05-11T11:23:04.050
> 
> 标签：magento

我需要一些关于我的 Magento 结帐成功页面的基本信息，以检查通过我的商店进行的一些转换。为此，我需要订单的总价和所有文章 ID。

在搜索时，我找到了获取最后订单的代码：

```
<?php
    $_customerId = Mage::getSingleton('customer/session')->getCustomerId();
    $lastOrderId = Mage::getSingleton('checkout/session')->getLastOrderId();
    $order = Mage::getSingleton('sales/order'); 
    $order->load($lastOrderId);
?> 
```

但是我怎样才能得到总价和所有文章 ID（用 , 分隔）。

我对 Magento 很陌生，所以一切都让我感到困惑。

有人可以帮助我吗？

谢谢你。

来自德国的问候，Raisis

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T14:30:23.487

您可以通过以下方式获得订单总额`$order->getData('base_grand_total');`

为了获得您需要做的所有文章（循环），

```
foreach($order->getAllItems() as $items) {
    $items->getName();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T02:19:39.547

使用此代码获取订单对象和订单总额，它更干净

```
<?php
$order = Mage::getModel('sales/order')->loadByIncrementId($this->getOrderId());
$total = $order->getGrandTotal();
?> 
```

# javascript - Javascript 从 html 表的特定行中获取列的文本值

> ID：10550410
> 
> 赞同：17
> 
> 时间：2012-05-11T11:23:16.387
> 
> 标签：javascript, html, html-table, row

用户单击表格的一行，我想（在 Javascript 中）获取该行的第 3 列的 innerhtml。

就像是 ：

```
document.getElementById("tblBlah").rows[i].columns[j].innerHTML 
```

似乎无法实现，我在这里或网上都找不到任何东西。

任何解决方案将不胜感激（没有 jQuery）

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-11T11:25:31.053

```
document.getElementById("tblBlah").rows[i].columns[j].innerHTML; 
```

应该：

```
document.getElementById("tblBlah").rows[i].cells[j].innerHTML; 
```

但我有一个明显的印象，即您需要的行/单元格是用户单击的行/单元格。如果是这样，实现此目的的最简单方法是将事件附加到表格中的单元格：

```
function alertInnerHTML(e)
{
    e = e || window.event;//IE
    alert(this.innerHTML);
}

var theTbl = document.getElementById('tblBlah');
for(var i=0;i<theTbl.length;i++)
{
    for(var j=0;j<theTbl.rows[i].cells.length;j++)
    {
        theTbl.rows[i].cells[j].onclick = alertInnerHTML;
    }
} 
```

这使得所有表格单元格都可以点击，并提醒它是innerHTML。事件对象将被传递给`alertInnerHTML`函数，其中`this`对象将是对被单击单元格的引用。事件对象为您提供了很多巧妙的技巧，让您了解单击事件的行为方式，例如，如果单元格中有一个被单击的链接，但我建议检查 MDN 和 MSDN（对于 window.event 对象）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-04-28T12:26:08.030

如果你的桌子有 tbody

```
let tbl = document.getElementById("tbl").getElementsByTagName('tbody')[0];
console.log(tbl.rows[0].cells[0].innerHTML) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-28T00:03:59.003

**要获取 html 代码：**

```
document.getElementById("table").rows[i].cells[j].innerHTML; 
```

**获取文本：**

```
document.getElementById("table").rows[i].cells[j].innerText; 
```

# azure - 如何以编程方式设置 Azure VM 角色实例就绪/忙碌？

> ID：10550411
> 
> 赞同：2
> 
> 时间：2012-05-11T11:23:16.713
> 
> 标签：azure

有什么方法可以将 vm 角色实例的状态从忙碌更改为就绪。如果可能的话，我想用 wcf 服务来做到这一点。非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T11:39:39.270

Fabric Controller 将定期检查您的实例的状态，当这样做时，您将能够让它知道实例是否繁忙。

您只需处理**StatusCheck**事件并将其设置为忙（通过调用**SetBusy**方法）。一旦您确定实例已准备好（不再忙），请停止调用**SetBusy**方法。

```
public override bool OnStart()
{
   RoleEnvironment.StatusCheck += RoleEnvironmentStatusCheck;

   return base.OnStart();
}

// Use the busy object to indicate that the status of the role instance must be Busy
private volatile bool busy = true;

private void RoleEnvironmentStatusCheck(object sender, RoleInstanceStatusCheckEventArgs e)
{
   If (this.busy)
   {
      // Sets the status of the role instance to Busy for a short interval.
      // If you want the role instance to remain busy, add code to 
      // continue to call the SetBusy method
      e.SetBusy();
   }
} 
```

参考：http: [//msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.roleenvironment.statuscheck.aspx](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.roleenvironment.statuscheck.aspx)

# javascript - javascript 适用于 IE，但不适用于 firefox 和 chrome

> ID：10550417
> 
> 赞同：0
> 
> 时间：2012-05-11T11:23:45.027
> 
> 标签：javascript, asp.net

这段 javascript 代码仅适用于 IE 为什么以及如何使其在 Firefox 和 chrome 上运行。提前致谢。

Javascript

```
 function uploadFileChange() {
        if (document.getElementById('textbox1').value != document.getElementById("FileUpload1").value) {
            document.getElementById('textbox1').value = document.getElementById("FileUpload1").value;
        }
        return false;
    } 
```

HTML/asp.net

```
<div class="fileinputs">
    <!-- Upload file invisivel-->
    <asp:FileUpload ID="FileUpload1" ClientIDMode="Static" class="file" runat="server"
        onpropertychange="uploadFileChange();" />
    <!-- button e textbox falsas para poder dar syles ao button-->
    <div class="fakefile">
        <asp:TextBox ID="textbox1" CssClass="textbox" ClientIDMode="Static" runat="server"
            Width="31%" ReadOnly="true" />
        <asp:Button ID="FileChooserButton1" CssClass="btnSubmit" runat="server" Text="Procurar..."
            ForeColor="White" />
        <asp:Button ID="FileChooserButton2" CssClass="btnSubmit" Text="Apagar" ForeColor="White"
            OnClientClick="clear();" runat="server" />
    </div>
</div> 
```

解决

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T12:25:36.627

onpropertychange 事件仅适用于 IE，因此不会在其他浏览器中触发，请参见[http://help.dottoro.com/ljufknus.php](http://help.dottoro.com/ljufknus.php)。

改用 onchange 事件[http://forums.asp.net/t/1138684.aspx/1](http://forums.asp.net/t/1138684.aspx/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T12:08:07.007

使用警报。并尝试警告这两个值..你会知道原因..很可能其他浏览器返回未定义...更好地使用警告和调试值。可能是编码错误。

# asp.net-mvc - 如何从 ASP.Net MVC 3 中的下拉列表中读取数据

> ID：10550420
> 
> 赞同：2
> 
> 时间：2012-05-11T11:23:55.417
> 
> 标签：asp.net-mvc, asp.net-mvc-3

步骤1：

我正在使用下拉列表来显示公司位置。该列表来自位置表。

第2步：

当用户注册时，下拉列表将显示有问题的位置。

当用户选择印度时，该值（位置名称）应存储在 UserLogin 表中。

如何从 ASP.Net MVC 3 的下拉列表中读取值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T11:33:20.203

为您的表单创建一个 ViewModel

```
public class CompanyViewModel
{
  public int CompanyId { set;get;}
  // Other properties of Company
  public int SelectedLocationId { set;get;}
  public IEnumerable<Location> Locations { set;get;}
} 
```

假设你有一个像这样的 Location 类

```
public class Location
{
  public int Id { set;get;}
  public string Name { set;get;}
} 
```

在 Register ( `HTTPGET`) Action 方法中，返回一个 CompanyViewModel 对象，其中包含从数据库填充的 Locations 到 View

```
public ActionReuslt Register()
{
  CompanyViewModel model=new CompanyViewModel();
  model.Locations =myRepositary.GetAllLocations();
  return View(model);
} 
```

假设`GetAllLocations`从您的存储库返回 Location 对象列表。

并在强类型为 CompanyViewModel 的注册视图中

```
@model CompanyViewModel
@using(Html.BeginForm())
{

  @Html.DropDownListFor(x=>x.SelectedLocationId,
                     new SelectList(Model.Locations ,"Id",
                     "Name"),"Select Location")

  <input type="submit" value="Save" />
} 
```

现在编写一个`HTTPPost`动作方法来处理表单发布（当用户提交表单时）

```
[HttpPost]
public ActionResult Register(CompanyViewModel model)
{
 if(ModelState.IsValid)
 {
  // You will have selected Location id available in model.SelectedLocationId property now
  //Save and redirect.
 }
 //Model Validation failed. so Let us reload the locations again
 //because HTTP is stateless and ASP.NET MVC is true to HTTP ! :)
 model.Locations =myRepositary.GetAllLocations();
 return View(model);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T11:47:07.597

下面是一些示例代码，您可以在场景中修改和使用它们。我不知道您的代码是什么样的，所以我创建了自己的代码。

在您看来：

```
@model YourProject.ViewModels.YourViewModel 
```

您的位置下拉菜单：

```
<td><b>Location:</b></td>
<td>
     @Html.DropDownListFor(
          x => x.LocationId,
          new SelectList(Model.Locations, "Id", "Name", Model.LocationId),
          "-- Select --"
     )
     @Html.ValidationMessageFor(x => x.LocationId)
</td> 
```

您的视图模型：

```
public class YourViewModel
{
     // Partial class

     public int LocationId { get; set; }
     public IEnumerable<Location> Locations { get; set; }
} 
```

您的创建操作方法：

```
public ActionResult Create()
{
     YourViewModel viewModel = new YourViewModel
     {
          // Get all the locations from the database
          Locations = locationService.FindAll().Where(x => x.IsActive)
     }

     // Return the view model to the view
     // Always use a view model for your data
     return View(viewModel);
}

[HttpPost]
public ActionResult Create(YourViewModel viewModel)
{
     if (!ModelState.IsValid)
     {
          viewModel.Locations = locationService.FindAll().Where(x => x.IsActive);

          return View(viewModel);
     }

     // If you browse the values of viewModel you will see that LocationId will have the
     // value (unique identifier of location) already set.  Now that you have this value
     // you can do with it whatever you like.
} 
```

您的位置类别：

```
public class Location
{
     public int Id { get; set; }
     public string Name { get; set; }
     public bool IsActive { get; set; }
} 
```

这很简单。我希望这有帮助 ：）

**更新：**

我的服务层用于任何进一步的业务逻辑，然后它调用我的存储库层以从数据库中获取数据。我首先使用实体​​框架代码。我还将 Autofac 用于我的 IoC 容器。

您的服务层：

```
public class LocationService : ILocationService
{
     private readonly ILocationRepository locationRepository;

     public LocationService(ILocationRepository locationRepository)
     {
          this.locationRepository = locationRepository;
     }

     public IEnumerable<Location> FindAll()
     {
          return locationRepository.FindAll();
     }
} 
```

还有你的存储库：

```
public class LocationRepository : ILocationRepository
{
     YourDbContext db = new YourDbContext();

     public IEnumerable<Location> FindAll()
     {
          return db.Locations.OrderBy(x => x.Name);
     }
} 
```

您的数据库上下文类：

```
public class YourDbContext : DbContext
{
     public DbSet<Location> Locations { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T11:29:23.840

如果您传递 formcollection 则取决于您如何获取表单的值，然后您可以通过此访问它的值

```
public ActionResult MyAction (FormCollection form)
    {
        string value = form["DropDownListName"];
    } 
```

或者您可以通过

```
string value = Request.Form["DropDownListName"]; 
```

# javascript - 更改特定字体的大小

> ID：10550421
> 
> 赞同：1
> 
> 时间：2012-05-11T11:24:02.037
> 
> 标签：javascript, webfonts

假设网页中有两种语言（英文和中文）。我需要在我的网页上增加中文字体的大小。我不需要更改英文字体的大小。只需要增加中文字体的大小。我怎么能这样做？有没有办法使用java脚本或任何其他技术来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T12:14:29.120

扩展@MichaelRobinson 的评论：

您应该使用[`lang`属性](http://www.w3.org/TR/html4/struct/dirlang.html#adef-lang)标记文本，然后您可以使用 CSS[属性选择器](http://www.w3.org/TR/CSS2/selector.html#attribute-selectors)（特别是连字符分隔的变体）或[`:lang`伪类](http://www.w3.org/TR/CSS2/selector.html#lang)来选择这些文本，例如：

```
[lang|=en] {
   font-size: 12px;
}

:lang(zh) {
   font-size: 15px;
}

<h1 lang="en">English</h1>
<p lang="zh">汉语</lang> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:36:44.180

我没有测试它，但我怀疑如果字体系列不同，以下将起作用。使用查询，您可以检索元素的 css 值。如果您检索 font-family 值，您应该有字体名称。基于此，您可以确定此元素是中文字体还是英文字体。如果 font-family 是中文字体，你可以将 font-size 设置得更大一些。

# python - 如何将块长度从上传方法传递到流内容？

> ID：10550424
> 
> 赞同：3
> 
> 时间：2012-05-11T11:24:09.863
> 
> 标签：python, flask, ftputil

在我的 Flask 项目中，我使用[ftputil](http://ftputil.sschwarzer.net/)库。[在其中一个应用程序部分中，我使用Flask 文档](http://flask.pocoo.org/docs/patterns/streaming/)中描述的内容流：

```
@app.route('/section')
def section():
    def generate():
        ftp.upload(source, target, "b", callback)
        yield 'completed'
    return Response(generate()) 
```

示例中的函数`generate`将文件上传到 FTP 服务器，如[ftputil 文档](http://ftputil.sschwarzer.net/trac/wiki/Documentation#callback-function)中所述。

方法中使用的回调函数 [ `callback(chunk)`]`upload`为每个上传的文件块执行。

是否有可能`len(chunk)`从回调输出到流？任何肮脏的黑客也非常受欢迎。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:28:35.960

我假设 ftp.upload() 同步运行，这是有道理的。我没有测试下面的代码，所以它可能充满了错误，但这个想法应该可行。

```
import threading, Queue

@app.route('/section')
def section():
    q = Queue.Queue()
    def callback(chunk):
        q.put(len(chunk))
    t = threading.Thread(target=lambda: ftp.upload(source, target, "b", callback) or q.put(None))
    t.setDaemon(True)
    t.start()
    def generate():
        while 1:
            l = q.get()
            if l is None:
                return
            yield unicode(l) + '\n'
    return Response(generate()) 
```

# c# - 在 asp.net 中生成树视图？

> ID：10550425
> 
> 赞同：1
> 
> 时间：2012-05-11T11:24:24.573
> 
> 标签：c#, asp.net, c#-4.0

我有一个我自己的结构的列表类型。这是我的结构。

```
 public struct outlineData
    {
        public string paragraphID;
        public string outlineText;
        public int outlineLevel;
    } 
```

我的清单是

```
List<outlineData> outlinePara = new List<outlineData>(); 
```

所以，我在我的outlinePara 列表中添加了这么多outlineData。现在，我想创建一个基于outlineData 的outlineLevel 的TreeView。

例如：outlineData 的 outlineLevel 可能是 0,1,2,3,1,2....0,1...0,1,1,1,1,1,2,3,2....

所以，现在我想创建一个这样的树视图......

```
 0
             1
               2
                 3
             1
               2
          0
             1
          0
             1
             1
             1
             1
             1
               2
                 3
               2

TreeNode childNode;
            if (outlineParaInfo.outlineLevel == 0)
            {
                headNode = new TreeNode(outlineParaInfo.outlineText);
                TreeView11.Nodes.Add(headNode);
            }
            else if (outlineParaInfo.outlineLevel == 1)
            {
                childNode = new TreeNode(outlineParaInfo.outlineText);
                headNode.ChildNodes.Add(childNode);
            } 
```

请指导我为这个问题找到正确的逻辑......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:49:42.643

**[编辑使用 System.Web.UI.WebControls.TreeView PER OP COMMENT]**

类似下面的伪代码怎么样：

```
int currentLevel = 0; 
TreeNode currentNode = null;
TreeNode childNode = null;

foreach(var outLineItem in outlinePara)
{
    if(outLineItem.outlineLevel == 0)
    {
            currentNode = new TreeNode(
                                outLineItem.paragraphID, outLineItem.outlineText);

            yourTreeView.Nodes.Add(currentNode);
            continue;
    }

    if(outLineItem.outlineLevel > currentLevel)
    {
        childNode = new TreeNode(
                          outLineItem.paragraphID, outLineItem.outlineText);

        currentNode.ChildNodes.Add(childNode);
        currentNode = childNode;

        currentLevel = outLineItem.outlineLevel;
        continue;
    }

    if(outLineItem.outlineLevel < currentLevel)
    {
       currentNode = currentNode.Parent;

       childNode = new TreeNode(
                          outLineItem.paragraphID, outLineItem.outlineText);

       currentNode.ChildNodes.Add(childNode);

       currentLevel = outLineItem.outlineLevel;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T20:20:29.110

就像 Antonio Bakula 所说，使用 parentParagraphID。您可以使用递归函数动态填充树视图

使用 parentParagraphID 更改您的 outlineLevel。

```
public struct outlineData
{
    public string paragraphID;
    public string outlineText;
    //public int outlineLevel;
    public string parentParagraphID;
} 
```

创建列表后。

```
List<outlineData> outlinePara = new List<outlineData>(); 
```

首先插入根 TreeNode，然后插入其余部分。

```
TreeNode rNode = new rNode();
rNode.Name = "root";
outlinePara.Add(rNode);
...
outlinePara.Add(lastNode); 
```

插入所有节点后，只需启动此功能。

```
populate(rNode, rNode.Name); 
```

此函数将为您的 TreeView 创建关卡结构。

```
public void populate(TreeNode node, string parentParID)
{
    var newList = this.outlinePara.Where(x => x.parentParagraphID == parentParID).toList();
    foreach(var x in newList)
    {
        TreeNode child = new TreeNode();
        child.Name = paragraphID;
        child.Text = outlineText;
        populate(child, child.Name);
        node.Nodes.Add(child);
    }
} 
```

你会得到一个像这样的 TreeView

```
root
|-->0
|   |-->1
|   |-->1
|       |-->2
|       |-->2
|       |-->2
|
|-->0
|   |-->1
|   ...
... 
```

**小费**

在这段代码中，ID 是一个字符串，最好使用其他东西，并且它必须是唯一的，这样您就不会因为将数据放在另一个 parentNode 中而遇到问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T07:04:30.250

```
 private void generateTreeView()
        {
            int currentLevel = 0;
            TreeNode currentNode = null;
            TreeNode childNode = null;

            foreach (var outLineItem in outlineParagraph)
            {
                if (outLineItem.outlineLevel == 0)
                {
                    currentNode = new TreeNode(outLineItem.outlineText);
                    TreeView11.Nodes.Add(currentNode);

                    currentLevel = outLineItem.outlineLevel;
                    continue;
                }

                if (outLineItem.outlineLevel > currentLevel)
                {
                    childNode = new TreeNode(outLineItem.outlineText);

                    currentNode.ChildNodes.Add(childNode);
                    currentNode = childNode;

                    currentLevel = outLineItem.outlineLevel;
                    continue;
                }

                if (outLineItem.outlineLevel < currentLevel)
                {
                    //logic to find exact outlineLevel parent...
                    currentNode = findOutlineLevelParent(outLineItem.outlineLevel, currentNode);

                    if(currentNode!=null)
                        currentNode = currentNode.Parent;

                    childNode = new TreeNode(outLineItem.outlineText);
                    currentNode.ChildNodes.Add(childNode);

                    currentLevel = outLineItem.outlineLevel;
                    currentNode = childNode;
                    continue;
                }

                if (outLineItem.outlineLevel == currentLevel)
                {
                    currentNode = currentNode.Parent;
                    childNode = new TreeNode(outLineItem.outlineText);
                    currentNode.ChildNodes.Add(childNode);

                    currentLevel = outLineItem.outlineLevel;
                    currentNode = childNode;
                    continue;
                }
            }

        }//generateTreeView Ends here...

        private TreeNode findOutlineLevelParent(int targetLevel, TreeNode currentNode)
        {

            while (currentNode.Parent != null)
            {
                currentNode = currentNode.Parent;
                if (currentNode.Depth == targetLevel)
                {
                    return currentNode;
                }
            }

            return null;
        }   //findOutlineLevelParent ends here... 
```

# ios - cocos2d - NSMutableArray 具有级别，重启级别和崩溃，下一个级别效果很好

> ID：10550429
> 
> 赞同：0
> 
> 时间：2012-05-11T11:24:44.323
> 
> 标签：ios, crash, cocos2d-iphone, restart, levels

我有带有级别和两个按钮的 nsmutablearray。下一级，然后再试一次。当用户触摸下一个级别时，我设置了 objectAtIndex:indexCurrLevel+1 并且下一个级别正在加载没有问题。但是，如果用户再次触摸，我尝试将级别设置为 objectAtIndex:indexCurrLevel app crashed with children already added error。这太疯狂了，因为如果我为 ex 手动设置重试。objectAtIndex:5 可以完美运行，直到用户不玩 5 级，因为应用程序崩溃了。

对于与当前级别索引不同的索引，可以完美运行。(objectAtIndex:index - works) 手动设置索引的原因与使用索引相同。

```
[self removeFromParentAndCleanup:YES];

    Levels *l = [levels2 objectAtIndex:index-1];
    Game *hl = [[Game alloc]initWithObstacles:[l staticO] :[l rotateO]:[l lvl]:[l level]:[l pendulumO]:self.levelsArray];
    [hl setLevels2:self.levels2];
    [hl setBasketY:[l basketY]];
    [hl setBasketX:[l basketX]];

    [l release];

    [[CCDirector sharedDirector] replaceScene:(CCScene*) hl];    
    [hl configureLevel];
    [hl release]; 
```

Eroor：断言失败 -[Game addChild:z:tag:], ../libs/cocos2d/CCNode.m:388 2012-05-11 19:03:20.349 Game[932:10a03] *** 由于未捕获而终止应用程序异常'NSInternalInconsistencyException'，原因：'孩子已经添加。不能再次添加' ***首先抛出调用堆栈：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T01:57:39.440

尝试删除语句`[l release]`。一般来说，您应该只释放您调用的对象，或者您使用以或`retain`开头的方法获得的对象。该数组还将保留每个级别，并且将其保留为级别的所有者可能是合适的。在 Xcode 中运行静态分析器以找出这些问题。`init``new``copy``levels2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:09:43.600

猜测数组边界问题，但没有代码示例或崩溃日志就无法验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T03:48:51.083

阅读消息：您正在尝试 addChild 一个已经有父对象的对象......即已经作为 CCNode 后代的子代添加到代码库中的其他地方。CCNode 的第 388 行是 NSAssert，不可破解。暂时把CCNode改成有breakable指令，如下：

```
if (nil==child) {
    CCLOG(@"%@<addChild> : have nil child. not adding.",self.class);
    return;
}
if (child.parent) {
    CCLOG(@"%@<addChild> : This child is already added somewhere. not adding.",self.class); // **** PUT BREAKPOINT HERE *****//
    return;
}

NSAssert( child != nil, @"Argument must be non-nil"); // was line 388
NSAssert( child.parent == nil, @"child already added. It can't be added again"); 
```

最后两行来自 CCNode（在我的项目中）。如果发生您提到的错误，我会在指示的行处中断，重新运行，然后查看堆栈跟踪。当你完成你的开发/测试周期，并且这些事情对你来说很重要时，记住将 cocos2d 恢复到它的原始状态以用于这些临时 mod。

# jwplayer - 如何在 JW 播放器中加载 vimeo 视频

> ID：10550431
> 
> 赞同：0
> 
> 时间：2012-05-11T11:24:48.397
> 
> 标签：jwplayer, vimeo

我需要在 JW 播放器中嵌入 vimeo 视频。我正在使用的脚本用于将新内容加载到播放器中，可以在此处找到[http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/16025/loading-new-内容到播放器](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/16025/loading-new-content-into-the-player)

有人可以帮助我使用 onclick 和从 vimeo 加载视频的设置脚本吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:28:06.920

我认为，要嵌入 vimeo 视频，您需要一个额外的插件，即“vimeo 媒体提供程序”，因为 JW 播放器原生支持 youtube，但不支持 vimeo。最后，您需要一个 vimeo pro 帐户来支持第三方播放器（请参阅[http://vimeo.com/help/faq/pro](http://vimeo.com/help/faq/pro)）！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T00:25:55.910

[如果这对您来说仍然是个问题，我可以通过http://luwes.co/labs/vimeo-provider](http://luwes.co/labs/vimeo-provider)的 vimeo 提供程序来完成这项工作。我没有 Vimeo Pro 帐户，fwiw。售价 9 美元，可与 v. 5 Flash 播放器配合使用。如果您搜索“vimeoprovider.swf”，您会找到指向其他项目的链接，这些我都没有尝试过，但可能有用。祝你好运！

# javascript - Node - Express + Ember + Socket 用于MVC开发的io项目文件结构

> ID：10550436
> 
> 赞同：4
> 
> 时间：2012-05-11T11:25:11.390
> 
> 标签：javascript, model-view-controller, node.js, express, ember.js

所以我最近开始接触**节点**，并开始使用**Express 框架**进行一些项目。我喜欢它——作为一个交互式 jQuery 开发者，它的语法真的很吸引我。

但是，就项目文件结构而言，我似乎一无所知，并且似乎使事情变得不成比例。

我在 github 上有一个基本的项目样板：[https](https://github.com/KingScooty/node-express-3.0-html5-boilerplate) ://github.com/KingScooty/node-express-3.0-html5-boilerplate ，它对我非常有用。

现在我正在寻找整合**Ember.js**。但是，我不知道如何构建目录。我正在考虑这样的事情：

```
project
├── app
│   ├── collections
│   ├── models
│   └── views
├── node_modules
├── public
│   ├── css
│   ├── img
│   └── js
├── routes
└── server
    ├── environment
    └── logs 
```

套接字 io 设置与所有节点服务器配置和环境配置设置（开发/登台/生产）一起位于服务器文件夹中。静态文件和 jQuery 公开，MVC 应用程序的优点放在 app 文件夹中。

但是将公用文件夹与应用程序文件夹分开感觉并不合适。更不用说我什至会如何在 MVC 文件夹结构中包含各种 JS 文件。

***（前端 MVC 开发是我知之甚少的东西，但这是我正在尝试学习的内容，同时也尝试将其集成到我的 Node 环境中）***

如果有人可以在使用节点/套接字 io 供电的后端的同时为我指出前端 MVC 开发的正确路径，那将是邪恶的！

干杯。

-S

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T09:45:33.167

Sails.js 是一个节点的 MVC 框架，其独特之处在于 RESTfully 路由 Socket.io 消息的方式与您的 Express 路由相同。

它还捆绑了一个前端组件 Mast。Mast 提供与 Meteor 类似的功能，因为它允许您直接从客户端与数据库对话。如果您需要提供更复杂的功能，您只需在后端添加一个控制器。

更多信息： [https ://github.com/balderdashy/sails](https://github.com/balderdashy/sails)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-11T23:55:00.920

所以关于 Express 的事情是它并没有真正在你的代码上强制执行*任何类型的结构。*这是一种喜忧参半的祝福。它非常适合 JSON API 之类的简单事物，但是当您开始处理整个 MVC 框架和 UI 时，它会变得更加复杂。

以下[帖子](https://stackoverflow.com/questions/5683916/node-js-express-vs-geddy)可能对您有所帮助。

就个人而言，我建议看看[Geddy](http://geddyjs.org/)和[Railwayjs](http://railwayjs.com/)（现在称为[CompoundJS](http://compoundjs.com/)）。这两种方法都试图为整个过程提供一些额外的结构。

您还可以在此处查看更广泛[的选项列表](http://www.nodetoolbox.com/categories/MVC%20Framework)。

# delphi - Delphi Indy IdUdpClient读取操作，没有返回数据

> ID：10550440
> 
> 赞同：2
> 
> 时间：2012-05-11T11:25:21.857
> 
> 标签：delphi, delphi-7, indy, udpclient, indy-9

我需要读取电子设备发送的信息（使用 UDP 协议）。我在 Delphi 7 中使用 Indy 组件（版本 9）时遇到问题。您可以在下面看到我的代码。

```
procedure TForm1.Button1Click(Sender: TObject);
var
  buffer: Array of Byte;
  bytes_received: integer;
begin
  SetLength(buffer, 36);
  IdUDPClient1.Host:='192.168.1.1';
  IdUDPClient1.Port:=49152;
  IdUDPClient1.BufferSize:=36;

  IdUDPClient1.Active:=True;
  IdUDPClient1.ReceiveTimeout:=50;
  bytes_received:=IdUDPClient1.ReceiveBuffer(buffer,Sizeof(buffer));
  IdUDPClient1.Active:=False;
end 
```

“bytes_received”的输出值为 0，显然，“buffer”的内容不是我所期望的……我做错了什么？

提前致谢，

伊莫诺

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:25:27.480

使用`TIdUDPClient`您的方式，您正在远程`192.168.1.1:49152`对与`TIdUDPClient`绑定到的任何随机本地 IP/端口对之间创建静态关联。只能接收从`192.168.1.1:49152`该 IP/端口发送的数据包。设备需要知道将数据包发送到哪里，并且您需要在它们发送到的 IP/端口上接收它们。我不记得Indy 9 中的`TIdUDPClient`has`BoundIP`和`BoundPort`properties，但在 Indy 10 中确实如此。

`ReceiveTimeout`以毫秒表示。即使您已`TIdUDPClient`正确设置，50ms 也是等待数据到达的非常短的时间，因此`ReceiveBuffer()`可能只是超时。尝试使用更大的超时值，至少需要几秒钟。

或者，`TIdUDPServer`改为使用。使用您想要接收数据的本地 IP/端口对设置其`Bindings`属性，然后让其`OnUDPRead`事件在新数据从任何远程 IP/端口到达时告诉您。

# php - 将我的 cookie 数据保存到 MySQL 数据库？

> ID：10550441
> 
> 赞同：0
> 
> 时间：2012-05-11T11:25:23.757
> 
> 标签：php, javascript, database, cookies, offline

我正在做一项调查我是离线服务器所以我将用户信息保存在 cookie 中，我有这样的用户信息

**Fname:Ali,Lname:Kheiri,title:Director,org:Magiclamp,email:alikheiri@gmail.com Fname:Ali,Lname:Kheiri,title:Director,org:Magiclamp,email:alikheiri@gmail.com**

它保存在 cookie 中，但现在我在线，所以我想将此 cookie 数据保存在 php 中的 mysql 数据库中，为此我编写了这段代码，但它不起作用

```
 mysql_connect("localhost","root","");//database connection05
    mysql_select_db("o2measure");
    if($_POST['submit']){
        $date = date('Y,m,d');
       $time = date("i:h:s",time() + $time_a);
       echo $session_id;
       $ip=$_SERVER['REMOTE_ADDR'];
        foreach($_COOKIE as $name => $cookie){
    // you can check any conditions based on cookie name $name
    $sql="INSERT INTO user_data (first_name, last_name, job_title, organisation, email, phone_number, ip_address, date, time)
     VALUES(" . mysql_escape_string($cookie) . ")";
        $result=mysql_query($sql); 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:41:12.243

您应该将 cookie 值作为字符串拆分并单独使用每个条件，而不是使用插入查询，因为您编写的查询不正确，您说在 user_data 中插入名字姓氏职位......但你只是给他 1 重视 $cookie 但 sql 不知道 $cookie 包含所有内容，因此您应该首先根据 ',' 拆分 cookie 值

# java - 在 Java 中获取 Lion 上的完整文件路径（无别名）

> ID：10550442
> 
> 赞同：0
> 
> 时间：2012-05-11T11:25:26.030
> 
> 标签：java, file, path, osx-lion

我有一个带有绝对路径的文件：**/Users/ivan/test.txt**

```
String absolutePath = file.getAbsolutePath(); 
```

但我需要完整路径：**/Volumes/Macintosh HD/Users/ivan/test.txt**（“/”是“Macintosh HD”的别名）。

我已经尝试过使用 getCanonicalPath 和 FileSystemView 但我总是得到相同的路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:42:04.510

查看[Aliases.h](http://opensource.apple.com/source/CarbonHeaders/CarbonHeaders-8A428/Aliases.h)文件。具体来说，您想查看函数`FSIsAliasFile()`和函数`FSResolveAlias`族，可能是`FSResolveAlias()`或`FSResolveAliasFile()`。

我自己没有尝试过，但它看起来应该能给你你所追求的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:45:30.170

我认为没有办法用纯 Java 获得这条路。Yiou 将不得不编写一个本地共享对象。

Maye Java-7 和文件系统有一些[改进](http://docs.oracle.com/javase/7/docs/api/java/nio/file/FileSystem.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T20:37:44.070

最后我使用Runtime做到了（我只需要卷文件夹中“/”别名的实名文件夹：

```
...
// ls -al command lists the files and the alias
proc = Runtime.getRuntime().exec("ls -al /Volumes");

BufferedReader stdInput = new BufferedReader(new 
InputStreamReader(proc.getInputStream()));

String line;
// match the name between the time and the arrow
Pattern myPatter = Pattern.compile("[0-9]+:[0-9]+ (.*?) -> " + "/");
Matcher matcher;
while ((line = stdInput.readLine()) != null) {
        if (line.indexOf(" -> ") != -1){
            // get the real volume name                    
            matcher = myPatter.matcher(line);
            if (matcher.find())
                return matcher.group(1);                     
        }                    
}
... 
```

# javascript - Javascript/HTML：优化大表/大量元素

> ID：10550443
> 
> 赞同：2
> 
> 时间：2012-05-11T11:25:26.167
> 
> 标签：javascript, performance, html-table

我需要显示由某些数字配置创建的视觉模式，以及它们之间的关系。为此，我创建了一个表并使用行/列作为 x/y 坐标（以 ID 编码）。对于许多 TD 元素，我提供了有意义的背景颜色并附加了 mouseover/out 处理程序以显示一个带有该 TD 分配的编号和有关它的信息的弹出窗口。（单元格太小而无法实际包含数字；它们更像是一种视觉设备，我使用上述背景颜色，因此可以很容易地看到图案。）

我需要能够放大和缩小此表，以及以其他方式对其进行管理。但是，在处理大型表（1000 行和列，或更多）时，浏览器需要花费大量时间在每个新的缩放级别呈现它。做了一些研究，我发现 TABLE 元素需要更多的汁液，因为浏览器必须根据表格中的单元格内容和可用宽度重新计算。将'table-layout'设置为'fixed'并给表格一个宽度应该可以防止这种情况发生，但它仍然需要很长时间。

然后我认为用 DIV 元素制作一个表格可能会起作用，因为这将需要更少的总元素并且没有像表格那样的自动调整大小 - 我可以对尺寸进行硬编码。我尝试了一些我在网上找到的代码，使用“display: table”（以前从未听说过），以及非表格化的 DIV（喜欢编造词......）。

这是我创建的一个测试页面，用于测试这三个并为它们计时（[在此处查看](http://dl.dropbox.com/u/16709081/table.html)）：

```
<!--
  Only tested in Google Chrome on Windows 7!
  I have not bothered testing in other browsers as this is a private project
  and all members of the project use Chrome.
-->
<html>
<head>
<title>Table Test</title>
<style>
#controls td {
  font-family: Courier New, monospace;
}
input[type=button] {
  width: 100%;
}
input[type=text] {
  width: 50px;
}
/* styles the pure table version */
table {
  table-layout: fixed;
  border-collapse: collapse;
}
.td {
  border: 1px solid black;
  width: 48px;
  height: 48px;
  vertical-align: top;
}
/* styles the DIV version using "display: table" */
.div-table {
  display: table;
  border: solid black;
  border-width: 1px 0px 0px 1px;
}
.div-table-row {
  display: table-row;
  width: auto;
  clear: both;
}
.div-table-col {
  float: left;
  display: table-column;
  width: 48px;
  height: 48px;
  border: solid black;
  border-width: 0px 1px 1px 0px;
}
/* styles the pure DIV version */
div#grid {
  border: solid black;
  border-width: 1px 0px 0px 1px;
}
.cell {
  display: inline-block;
  width: 49px;
  height: 49px;
  padding: 0px;
  margin: 0px;
  border: solid black;
  border-width: 0px 1px 1px 0px;
}
</style>

<script type="text/javascript">
function Stopwatch() {   // basic Stopwatch object to time functions
  var startTime = null; 
  var stopTime = null; 
  var running = false; 

  function getTime() {
    var day = new Date();
    return day.getTime();
  }

  this.start = function() { 
    if (running == true)
      return;
    else if (startTime != null) 
      stopTime = null; 
    running = true;    
    startTime = getTime();
    return startTime;
  }
  this.stop = function() { 
    if (running == false)
      return;    
    stopTime = getTime();
    running = false; 
    return stopTime;
  }
  this.duration = function() { 
    if (startTime == null || stopTime == null)
      return 'Undefined';
    else
      return (stopTime - startTime) / 1000;
  }
}
var stopwatch = new Stopwatch();

var x = 50;  // global dimension variables
var y = 100;

function updateDims() { // updates the global dimension variables
                        // returns true/false to indicate success
  x = parseInt(document.getElementById('x').value);
  y = parseInt(document.getElementById('y').value);
  if (typeof x == 'number' && x > 0 && typeof y == 'number' && y > 0) return true;
  return false;
}

function makeTableTable() {        // creates the pure table version
  if (!updateDims()) return false; // grab desired x/y dimensions

// grab count of how many times function has been run to calculate average
  var count = document.getElementById('count1');
  count = count.value = parseInt(count.value) + 1;
// grab previous average time to calculate new average
  var avg = parseFloat(document.getElementById('avg1').innerHTML);

// start the stopwatch, grabbing initial start time, and begin concatenating
  var start = stopwatch.start();
  var html = '<table id="grid" cellpadding="0" cellspacing="0">';
  for (var i = 0; i < y; i++) {  // for each row...
    html += '<tr>';
    for (var j = 0; j < x; j++) {  // build desired number of cells
      html += '<td class="td" id="'+j+'/'+[y-[i+1]]+'">' + [1+j+i*x] + '</td>';
    }
    html += '</tr>';  // close row
    j = 0;
  }
  html += '</table>';

// stop the watch and record duration it took to concatenate
  stopwatch.stop();
  document.getElementById('concat1').innerHTML = stopwatch.duration();

// start the watch again and insert HTML
  stopwatch.start();
  document.getElementById('output').innerHTML = html;

// stop the watch, grabbing the final end time, and record duration for innerHTML
  var end = stopwatch.stop();
  document.getElementById('insert1').innerHTML = stopwatch.duration();

// find total time from initial start time and final end time
  document.getElementById('total1').innerHTML = (end - start) / 1000;

// calculate average time
  if (count > 1)
    document.getElementById('avg1').innerHTML = Math.round(100000*(avg*(count-1)+(end-start)/1000)/count)/100000;
  else
    document.getElementById('avg1').innerHTML = (end-start) / 1000;
}

function makeDivTable() {          // creates the DIV version using "display: table"
  if (!updateDims()) return false;

  var count = document.getElementById('count2');
  count = count.value = parseInt(count.value) + 1;
  var avg = parseFloat(document.getElementById('avg2').innerHTML);

  var start = stopwatch.start();
  var html = '<div id="grid" class="div-table">';
  for (var i = 0; i < y; i++) {
    html += '<div class="div-table-row">';
    for (var j = 0; j < x; j++) {
      html += '<div class="div-table-col" id="'+j+'/'+[y-[i+1]]+'">' + [1+j+i*x] + '</div>';
    }
    html += '</div>';
    j = 0;
  }
  html += '</div>';

  stopwatch.stop();
  document.getElementById('concat2').innerHTML = stopwatch.duration();

  stopwatch.start();
  document.getElementById('output').innerHTML = html;

  var end = stopwatch.stop();
  document.getElementById('insert2').innerHTML = stopwatch.duration();
  document.getElementById('total2').innerHTML = (end - start) / 1000;

  if (count > 1)
    document.getElementById('avg2').innerHTML = Math.round(100000*(avg*(count-1)+(end-start)/1000)/count)/100000;
  else
    document.getElementById('avg2').innerHTML = (end-start) / 1000;

// update width of outer DIV
  document.getElementById('grid').style.width = 50 * x + 'px';
}

function makeDivDiv() {            // creates the pure DIV version
  if (!updateDims()) return false;
  var cells = x*y;   // will iterate through total number of cells,
                     // rather than by row and column
  var count = document.getElementById('count3');
  count = count.value = parseInt(count.value) + 1;
  var avg = parseFloat(document.getElementById('avg3').innerHTML);

  var start = stopwatch.start();
  var html = '<div id="grid">';
  for (var i = 0; i < cells; i++) {
    var id = [i-x*Math.floor(i/x)+1] + '/' + [y-Math.floor(i/x)];
    html += '<div class="cell" id="' + id + '">' + [i+1] + '</div>';
  }
  html += '</div>';

  stopwatch.stop();
  document.getElementById('concat3').innerHTML = stopwatch.duration();

  stopwatch.start();
  document.getElementById('output').innerHTML = html;

  var end = stopwatch.stop();
  document.getElementById('insert3').innerHTML = stopwatch.duration();
  document.getElementById('total3').innerHTML = (end - start) / 1000;

  if (count > 1)
    document.getElementById('avg3').innerHTML = Math.round(100000*(avg*(count-1)+(end-start)/1000)/count)/100000;
  else
    document.getElementById('avg3').innerHTML = (end-start) / 1000;

  document.getElementById('grid').style.width = 50 * x + 'px';
}

</script>

</head>
<body>

<table id="controls" border="1">
  <tr>
    <td>x: <input type="text" id="x" value="50"  /></td>
    <td>y: <input type="text" id="y" value="100" /></td>
    <td colspan="7"></td>
  </tr>
  <tr>
    <td><input type="button" onclick="makeTableTable()" value="Standard table" />
        <input type="hidden" id="count1" value="0" /></td>
    <td>Concatenation:</td>
    <td id="concat1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td> 
    <td>Insertion:</td>
    <td id="insert1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td>Total:</td>
    <td id="total1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td>Average:</td>
    <td id="avg1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  </tr>
  <tr>
    <td><input type="button" onclick="makeDivTable()" value="Div w/ 'display:table'" />
        <input type="hidden" id="count2" value="0" /></td>
    <td>Concatenation:</td>
    <td id="concat2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td> 
    <td>Insertion:</td>
    <td id="insert2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td>Total:</td>
    <td id="total2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td>Average:</td>
    <td id="avg2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  </tr>
  <tr>
    <td><input type="button" onclick="makeDivDiv()" value="Div Table" />
        <input type="hidden" id="count3" value="0" /></td>
    <td>Concatenation:</td>
    <td id="concat3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td>Insertion:</td>
    <td id="insert3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td>Total:</td>
    <td id="total3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td>Average:</td>
    <td id="avg3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  </tr>
</table><br />

<div id="output"></div>
</body>
</html> 
```

首先尝试使用较小的值，例如默认值。然后尝试将 x 和 y 更改为 1000，并尝试默认浏览器缩放功能。生成表格以及放大或缩小都需要相当长的时间。

不过，有趣的是，据报道所用的时间显然不是它实际所用的时间——人们可以通过计算棒球场的秒数来看出这一点（很好的“一个密西西比州”）。当报告的几次运行后的平均时间约为 2.3、2.7 和 2.4 时，400x400 的网格分别持续大约 13 秒、5 秒和 7 秒。所有与时间相关的代码都不会对其产生太大影响。您可以将其全部删除或将其全部注释掉（[查看](http://dl.dropbox.com/u/16709081/table-notime.html)），它是相同的（对我来说是 13、5 和 7）。

所以两个问题：

首先，为什么这些数字有差异？计时器应该对函数中发生的所有事情进行计时。除了第一次调用 updateDims 之外，发生的主要两件事是字符串连接和对 innerHTML 的赋值。（网格的宽度也发生了变化，但我看不出这会花费多少时间。）它只是浏览器渲染时间，在函数完成后发生，所以没有计时？支持这一点的一些证据是纯表格版本的明显时间要长得多，这意味着浏览器可能正在重新计算所有 TD 宽度等。

其次，可以做些什么呢？任何事物？串联是其中的一小部分，所以这不是问题。（而且我已经尝试推入一个数组并加入，并且连接始终更快，至少对我来说是这样。）此外，如果要相信秒表，将它插入到 innerHTML 不会花费那么长时间。这就是后来发生的任何事情。我曾考虑过使用后台程序技术，因此即使需要一段时间来更新，至少它不会一直锁定浏览器并且会进行一些明显的活动。但是如果锁定点发生在函数的“外部”，我看不出它是如何工作的。我可以设计自己的缩放功能，但我不相信它会比浏览器更快。初步测试说没有。

我正在尝试做的任何其他选择（尽管它可能对你来说很模糊；对不起）当然值得赞赏！

StackOverflow 上的其他一些页面：

[大型 html 表慢吗？](https://stackoverflow.com/questions/1364213/are-large-html-tables-slow)听起来好像表格通常可以快速渲染。但是，这可能只适用于已经硬编码到 HTML 文件中的表格，而不是像我的那样生成的。

[创建大表的 Javascript 性能与](https://stackoverflow.com/questions/3739819/javascript-performance-with-creating-large-tables)我的情况非常相似，除了具有分页表的公认解决方案对我来说不是一个选项，因为这会破坏目的。而且我的表不包含数据。然而，其中一位受访者确实暗示，对于如此大的表，DOM 方法可能比 HTML 解析更快（尽管我在其他地方看到相反的情况；可能有合理数量的元素）。当我有机会时，我可能会测试一下。你怎么看？

# ruby-on-rails - Rails SQL 查询生成器...或 ActiveRecord 查询生成器

> ID：10550453
> 
> 赞同：5
> 
> 时间：2012-05-11T11:25:49.520
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, gem

我需要像这样运行 sql 查询

```
sql = 'SELECT * FROM users WHERE id != ' + self.id.to_s + ' AND id NOT IN (SELECT artner_id FROM encounters WHERE user_id = ' + self.id.to_s + ')'
sql += ' AND id NOT IN (SELECT user_id FROM encounters WHERE partner_id = ' + self.id.to_s + ' AND predisposition = ' + Encounter::Negative.to_s + ')'
sql += ' AND cfg_sex = ' + self.sex.to_s + ' AND cfg_country = ' + self.country.to_s + ' AND cfg_city = ' + self.city.to_s
sql += ' ORDER BY rand() LIMIT 1' 
```

它可以通过 AR.find_by_sql 执行，但之前的代码可读性差。是否有任何查询构建器可以构建该查询？

例如，Kohana（它是 PHP 框架，我是 php 开发人员，但我想将这种儿童语言更改为 ruby​​/rails）有一个查询构建器，其工作方式如下：

```
$sql = DB::select('*')->from('users');
$sql->where('id', 'NOT_IN', DB::expr('SELECT partner_id FROM encounters WHERE user_id = '.$user->id));
$sql->where('id', 'NOT_IN', DB::expr('SELECT user_id FROM encounters WHERE partner_id = '.$user->id.' AND predisposition = '.Encounter::Negative));
....
etc
... 
```

使用 Kohana 查询构建器等查询构建器构建的查询更具可读性和可理解性。

有什么宝石可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T12:43:36.143

你需要[squeel](https://github.com/ernie/squeel) gem。它使用块**扩展**AR，并轻松进行非常复杂的查询。

只有几个特点：

```
# not_in == cool! )
Product.where{id.not_in LineItem.select{product_id}}
# SELECT "products".* FROM "products" WHERE "products"."id" NOT IN 
# (SELECT "line_items"."product_id" FROM "line_items" )

# outer joins on pure Ruby:
LineItem.joins{product.outer}
# LineItem Load (0.0ms)  SELECT "line_items".* FROM "line_items" 
# LEFT OUTER JOIN "products" ON "products"."id" = "line_items"."product_id"

# calcs, aliasing:
Product.select{[avg(price).as(middle)]}
# SELECT avg("products"."price") AS middle FROM "products"

# comparison
Product.where{id != 100500}
Product.where{price<10}

# logical OR
Product.where{(price<10) | (title.like '%rails%')}
# SELECT "products".* FROM "products" WHERE (("products"."price" < 10 OR
# "products"."title" LIKE '%rails%'))

# xxx_any feature (also available xxx_all)
Product.where{title.like_any %w[%ruby% %rails%]}
# SELECT "products".* FROM "products" WHERE (("products"."title" LIKE '%ruby%' OR 
# "products"."title" LIKE '%rails%')) 
```

注意使用块：`{...}`这里不是哈希。还要注意没有符号。

**如果您决定选择它，请阅读以“这具有重要意义”开头的部分**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T11:32:11.140

有一个使用关系代数的 ruby​​ 库。它被称为[ARel](https://github.com/rails/arel)。如果您使用的是 Rails 3.x，那么您已经拥有了。

```
ids   = Partner.where(user_id: self.id).pluck(:partner_id) << self.id
users = User.where("id NOT IN #{ ids.join(',') }") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-11T12:40:56.240

这是转换为 rails AREL 术语的相同查询。它还不漂亮——一般来说这是一个复杂的查询。

```
User.where("id = ? AND "
           "id NOT IN (SELECT artner_id FROM encounters WHERE user_id = ?) AND " +  
           "id NOT IN (SELECT user_id FROM encounters WHERE partner_id = ? AND predisposition = ? ) AND " + 
            "cfg_sex = ? AND cfg_country = ? AND cfg_city = ?)", 
            self.id, self.id, self.id, Encounter::Negative, 
            self.sex, self.country, self.city).order(" rand() ").limit(1) 
```

（我没有测试过这个，所以它可能有错字。）

我推荐几件事：

当您有复杂的 where 子句时，它们可以链接在一起，并且 AREL 通常会将它们重新组合在一起。这允许您在模型类中使用范围并将它们链接在一起。

例如，您可以这样做：

```
class User < ActiveRecord::Base
  def self.in_city_state_country(city, state, country)
    where("cfg_sex = ? AND cfg_country = ? AND cfg_city = ?", city, state, country)
  end

  def self.is_of_sex(sex)
    where("cfg_sex = ?", sex)
  end
end 
```

然后你可以用这种方式重写查询的这些部分：

```
User.is_of_sex(user.sex).in_city_state_country(user.city, user.state, user.country) 
```

等等。

将查询分解成更小的部分还可以更轻松地使用您的 rspec 测试其中的特定部分。它产生了更加模块化、可维护的代码。

有关更多详细信息，请查看[Rails 指南 - Active Record 查询接口](http://guides.rubyonrails.org/active_record_querying.html)

# apache-flex - Flex：如何为我点击的目标设置动画？

> ID：10550455
> 
> 赞同：0
> 
> 时间：2012-05-11T11:25:53.147
> 
> 标签：apache-flex, animation, flex4, flex-spark

我编写了一个循环，将 MouseEVENT.CLICK 事件侦听器添加到我视图中的所有图像。

（这部分有效）

```
var numChildren:int = PageScroll.numChildren; 

for (var i:int = 0; i < numChildren; i++) { 
    if(PageScroll.getChildAt(i) is Image)
    { 
        PageScroll.getChildAt(i).addEventListener(MouseEvent.CLICK, onClick);
    }
} 
```

现在我希望 onClick 在我点击的目标上播放动画......

我不知道该怎么做，也无法通过谷歌找到它......

```
protected function onClick(event:MouseEvent):void
{
    maxSize.play(new Array(event.target), false);
} 
```

（这部分不起作用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:15:21.257

检查此代码；这会帮助你...

```
<mx:Canvas id="can" width="500" height="500">
        <mx:Image source="indian cricket logo.png"/>
</mx:Canvas>
<mx:Resize id="resize" widthBy="50" heightBy="50" duration="500"/>

protected function application1_creationCompleteHandler(event:FlexEvent):void
    {
        for (var i:int = 0; i< can.numChildren;i++){
            if(can.getChildAt(i) as Image){
                        Image(can.getChildAt(i)).addEventListener(MouseEvent.CLICK,onMouseCLick,false,0,true);
                  }
          }

    }

private function onMouseCLick(e:MouseEvent):void
{
    resize.play([e.currentTarget]);
} 
```

# mysql - MySQL 子查询分组依据

> ID：10550458
> 
> 赞同：0
> 
> 时间：2012-05-11T11:26:06.903
> 
> 标签：mysql, group-by, subquery

我有一个查询，它根据一个人的 id (athleteid) 显示比赛结果列表。我已经查询了数据库，以便它按时间（性能）和事件（eventid）的顺序列出该人的比赛，但我正在努力将其设置为子查询，以便之后我可以对结果进行分组，让我以最快的速度每个 eventid 的性能。这是我到目前为止所拥有的：

```
$id = $_GET['id'];
$query = sprintf("SELECT events.eventcode, meetings.meetingid, meetings.meetingname, meetings.location, meetings.meetingdate, DATE_FORMAT(meetings.meetingdate,'%%d %%b %%Y') AS date, results.performance, results.unit, results.wind, agegroups.agegroup
FROM results 
JOIN athletes ON athletes.athleteid = results.athleteid
JOIN meetings ON meetings.meetingid = results.meetingid
JOIN events ON events.eventid = results.eventid
JOIN agegroups ON agegroups.agegroupid = results.agegroupid
WHERE results.athleteid='$id' AND events.eventtype = 'track' ORDER BY results.eventid asc, results.performance asc, meetings.meetingdate desc"); 
```

这工作正常，并以正确的顺序显示所有相关条目。然后我尝试将其转换为子查询，以便我可以使用 GROUP BY，但没有成功。这是我尝试使用它的地方：

```
$id = $_GET['id'];
$query = sprintf("SELECT * FROM (SELECT events.eventcode, meetings.meetingid, meetings.meetingname, meetings.location, meetings.meetingdate, DATE_FORMAT(meetings.meetingdate,'%%d %%b %%Y') AS date, results.performance, results.unit, results.wind, agegroups.agegroup
FROM results 
JOIN athletes ON athletes.athleteid = results.athleteid
JOIN meetings ON meetings.meetingid = results.meetingid
JOIN events ON events.eventid = results.eventid
JOIN agegroups ON agegroups.agegroupid = results.agegroupid
WHERE results.athleteid='$id' AND events.eventtype = 'track' ORDER BY results.eventid asc, results.performance asc, meetings.meetingdate desc) AS t1
GROUP BY t1.eventid"); 
```

但是，这给了我一个错误，指出：“组语句”中的未知列“t1.eventid”

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:32:44.083

您尚未`eventid`在子查询中选择 。如果它不存在，你怎么能分组呢？

```
SELECT events.eventid,events.eventcode, 
meetings.meetingid, meetings.meetingname, 
meetings.location, meetings.meetingdate, 
DATE_FORMAT(meetings.meetingdate,'%%d %%b %%Y') AS date, 
results.performance, results.unit, results.wind, 
agegroups.agegroup
....... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:32:59.883

那是因为您在子查询中没有该列，请尝试在子选择中添加该列：

```
$id = $_GET['id'];
$query = sprintf("SELECT * FROM (SELECT events.eventid, events.eventcode, meetings.meetingid, meetings.meetingname, meetings.location, meetings.meetingdate, DATE_FORMAT(meetings.meetingdate,'%%d %%b %%Y') AS date, results.performance, results.unit, results.wind, agegroups.agegroup
FROM results 
JOIN athletes ON athletes.athleteid = results.athleteid
JOIN meetings ON meetings.meetingid = results.meetingid
JOIN events ON events.eventid = results.eventid
JOIN agegroups ON agegroups.agegroupid = results.agegroupid
WHERE results.athleteid='$id' AND events.eventtype = 'track' ORDER BY results.eventid asc, results.performance asc, meetings.meetingdate desc) AS t1
GROUP BY t1.eventid"); 
```

# wpf - Collectionviewsource - 不同的线程拥有它

> ID：10550461
> 
> 赞同：1
> 
> 时间：2012-05-11T11:26:18.520
> 
> 标签：wpf, multithreading, dispatch

我这里有一个新问题。我有一个 MainWindow，其中是 ContentGrid，这是一个 Frame。现在我创建了不同的页面，可以在这个“内容区域”中显示。在其中一个页面中，有一个绑定到 CollectionViewSource 的 Datagrid，其中 Source 是一个数据库（通过 EntityFramework）。现在，当此数据库表发生更改时（通过 ServiceBroker 和 SQLDependency 解决，触发工作正常）Datagrid 必须更新。 **现在的问题：** “Dependency_OnChange”事件在 MainWindow-Thread 中工作。当我尝试访问页面的 CollectionViewSource 来更新它（cvs.View.Refresh）时，我得到一个异常，因为另一个线程拥有这个 CVS，所以这是不可能的。

我已经尝试过不同的调度，例如：

```
Application.Current.Dispatcher.Invoke((Action)(()=>
                {
                    cvs.Source = _db.Table.OrderByDescending(nr => nr.Date).Take(200);
                    cvs.View.Refresh();
                })); 
```

此代码块不会带来异常，但我也不会更新 UI ......似乎它什么也没做。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:41:21.603

如果您的 LINQ 查询评估，您的数据网格将更新。现在它只是指定了 LINQ IEnumerable 但没有评估它。

```
 cvs.Source = _db.Table.OrderByDescending(nr => nr.Date).Take(200).ToList(); 
```

应该为您评估 LINQ...

虽然我必须说你的`cvs.View.Refresh()`电话非常昂贵，因为它会导致整个网格刷新。您可能必须在这里考虑更好的设计。

为什么不`dataGrid.ItemsSource = _db.Table.DefaultView`直接将数据网格设置为项目源。我猜如果您的表格更新（和执行`_db.Table.AcceptChanges();`），视图会自动通知对网格的更改，并且网格可能会更快地更新自身！

但这只是我的意见，因为我不知道您在这里的线程上下文。但仍然尝试让我知道。

# cakephp - cakephp 重定向在服务器上不起作用

> ID：10550462
> 
> 赞同：4
> 
> 时间：2012-05-11T11:26:18.527
> 
> 标签：cakephp, cakephp-2.0

在我的带有 WAMP 服务器和 php 5.3.9 的 PC 上，一切正常。

当我使用 php 5.2.1.7 将其上传到服务器时，所有重定向都停止工作 - 当 ->redirect(..) 执行脚本停止工作时 - 它的行为就像没有`die;`重定向，并且没有打印任何内容并且重定向不起作用。

这些是我正在使用的重定向：

```
$this->redirect( array('controller' => 'users', 'action' => 'login') );
$this->redirect( $this->referer() ) 
```

上传到服务器后，两者（实际上都是......）都停止工作......

- - - 编辑

我设法显示 E_ALL 错误，例如，如果我`$omg->lol()`在重定向之前写入，则错误报告为

注意（8）：未定义变量：omg [APP/Controller/LanguagesController.php，第 31 行] 致命错误：在...中的非对象上调用成员函数 lol()

但是仍然没有重定向的错误消息...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:43:46.483

我设法修复它！问题是很少有 php 文件在标签之前`<?php`和之后有一些标签或空格`?>`- 当我删除它们时一切正常 - 该死的 PHP 是真正的婊子！

# android - 如何伪造安卓硬件设备？

> ID：10550463
> 
> 赞同：0
> 
> 时间：2012-05-11T11:26:25.590
> 
> 标签：android

我正在专门为 Galaxy Note 开发。我想在我没有的真实设备上测试我的应用程序。有什么方法可以在 AVD 上伪造 Galaxy Note？

我确实知道如何使用硬件匹配注释创建 AVD。然而，这还不够。我希望应用程序将 AVD 识别为真实设备。我在大方向上有一些小提示：1）以某种方式在 AVD 上安装库存 Note ROM。2）修改build.props，创建自己的ROM。

我还有一部 Galaxy S 手机，如果可以的话。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:41:07.957

您只能在真实设备上执行此操作，因为此信息仅写入设备的固件上。您可以尝试在远程真实设备上进行调试。在[http://innovator.samsungmobile.com/bbs/lab/view.do?platformId=1](http://innovator.samsungmobile.com/bbs/lab/view.do?platformId=1) 或此处搜索[http://www.perfectomobile.com/portal/cms/services/android](http://www.perfectomobile.com/portal/cms/services/android)

# php - Javascript 不接受我的函数参数？

> ID：10550468
> 
> 赞同：0
> 
> 时间：2012-05-11T11:26:52.310
> 
> 标签：php, javascript, jquery

我将 chechboxes 的类和 id 传递给 js 函数，并尝试使其动态地为任何复选框的 id 和类工作以选中所有复选框并取消选中所有复选框这里是 html

```
 <input type="checkbox" name="reply_status[]" <?=$checked;?>  class="memebers" value="<?=$status[$e]['mail_sent_id']?>">
            </td>
            <td>
                <input type="checkbox" name="send_invoice[]" <?=$checked_send_invoice;?>  class="send_invoice" value="<?=$status[$e]['mail_sent_id']?>">
            </td>
            <td>
                <input type="checkbox" name="invoice_paid[]" <?=$checked_invoice_paid;?>  class="invoice_paid" value="<?=$status[$e]['mail_sent_id']?>">
            </td>

<td>
         <input type="checkbox" id="check_all_re" name="check_all" onclick="checkall_members('memebers','check_all_re')">&nbsp;&nbsp;&nbsp;&nbsp;
                Check All
            </td>
            <td>
                <input type="checkbox" id="check_all_sv" name="check_all" onclick="checkall_members('send_invoice','check_all_sv')">&nbsp;&nbsp;&nbsp;&nbsp;
                Check All
            </td>
            <td>
                <input type="checkbox" id="check_all_ip" name="check_all" onclick="checkall_members('invoice_paid','check_all_ip')">&nbsp;&nbsp;&nbsp;&nbsp;
                Check All
            </td> 
```

这是js函数

```
<script type="text/javascript">
function checkall_members(chechboxclass, chechboxid) {
    // var id = document.getElementById("check_all");
    alert();
    chechboxid = $('#' + chechboxid);
    chechboxclass = $('.' + chechboxclass);
    if (chechboxid.checked) {
        chechboxclass.attr('checked', 'checked');
    }
    else {
        chechboxclass.removeAttr('checked');
    }
} 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T11:30:13.277

用以下内容替换您的 if..else 块。

```
chechboxclass.prop('checked', chechboxid.prop('checked')); 
```

顺便说一句，它是*checkbox**而*不是*check **box***。

要进一步改进您的代码，请去掉内联事件：

```
$('input[name="check_all"]').on('change', function() {
    $($(this).data('toggleAll')).prop('checked', this.checked);
}); 
```

现在您只需要在`data-toggle-all=".send_invoice"`这些复选框中添加等。参数值应该是您要使用该复选框切换的复选框的选择器。

如果您拥有所有`name="check_all"`元素 a ，您还可以通过使用而不是`class`加速选择器`input.whatever_class``input[name="check_all"]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T13:24:10.663

我已经为我的问题整理出了最简单的解决方案

```
 <script type="text/javascript">

function checkall_members(chechboxclass, chechboxid) {

    var checkbox = document.getElementById(chechboxid);
    chechboxclass = $('.' + chechboxclass);

    if (checkbox.checked) {
        chechboxclass.attr('checked', 'checked');
    }
    else {

        chechboxclass.removeAttr('checked');
    }
}
 </script> 
```

我必须在同一个 javascript 库中获取 id elememt 这就是为什么它不起作用 var checkbox = document.getElementById(chechboxid); 谢谢你们帮助我

# python - 如何在 Matplotlib 中将颜色设置为矩形？

> ID：10550477
> 
> 赞同：27
> 
> 时间：2012-05-11T11:28:07.070
> 
> 标签：python, matplotlib

例如，如何在 matplotlib 中将颜色设置为 Rectangle？我尝试使用参数颜色，但没有成功。

我有以下代码：

```
fig=pylab.figure()
ax=fig.add_subplot(111)

pylab.xlim([-400, 400])    
pylab.ylim([-400, 400])
patches = []
polygon = Rectangle((-400, -400), 10, 10, color='y')
patches.append(polygon)

p = PatchCollection(patches, cmap=matplotlib.cm.jet)
ax.add_collection(p)
ax.xaxis.set_major_locator(MultipleLocator(20))    
ax.yaxis.set_major_locator(MultipleLocator(20))    

pylab.show() 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-11T12:33:55.293

我无法让您的代码正常工作，但希望这会有所帮助：

```
import matplotlib
import matplotlib.pyplot as plt

fig = plt.figure()
ax = fig.add_subplot(111)
rect1 = matplotlib.patches.Rectangle((-200,-100), 400, 200, color='yellow')
rect2 = matplotlib.patches.Rectangle((0,150), 300, 20, color='red')
rect3 = matplotlib.patches.Rectangle((-300,-50), 40, 200, color='#0099FF')
circle1 = matplotlib.patches.Circle((-200,-250), radius=90, color='#EB70AA')
ax.add_patch(rect1)
ax.add_patch(rect2)
ax.add_patch(rect3)
ax.add_patch(circle1)
plt.xlim([-400, 400])
plt.ylim([-400, 400])
plt.show() 
```

产生： ![在此处输入图像描述](../Images/8ce2cb5368549263e5484ad6b817ada1.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-26T17:39:18.650

事实证明，你需要做`ax.add_artist(Rectangle)`的是让颜色规范起作用；使用时`patches.append(Rectangle)`，矩形显示为蓝色（至少在我的 PC 上），忽略任何颜色规范。

顺便说一句，请注意[艺术家 — Matplotlib 1.2.1 文档：class matplotlib.patches.Rectangle](http://matplotlib.org/api/artist_api.html#matplotlib.patches.Rectangle)声明有

*   `edgecolor`- 用于描边颜色
*   `facecolor`- 用于填充颜色

...然后是`color`- 它基本上同时设置笔触和填充颜色。

这是我在 Linux (Ubuntu 11.04)、python 2.7、matplotlib 0.99.3 上测试过的修改后的 OP 代码：

```
import matplotlib.pyplot as plt
import matplotlib.collections as collections
import matplotlib.ticker as ticker

import matplotlib
print matplotlib.__version__ # 0.99.3

fig=plt.figure() #pylab.figure()
ax=fig.add_subplot(111)

ax.set_xlim([-400, -380]) #pylab.xlim([-400, 400])
ax.set_ylim([-400, -380]) #pylab.ylim([-400, 400])
patches = []
polygon = plt.Rectangle((-400, -400), 10, 10, color='yellow') #Rectangle((-400, -400), 10, 10, color='y')
patches.append(polygon)

pol2 = plt.Rectangle((-390, -390), 10, 10, facecolor='yellow', edgecolor='violet', linewidth=2.0)
ax.add_artist(pol2)

p = collections.PatchCollection(patches) #, cmap=matplotlib.cm.jet)
ax.add_collection(p)
ax.xaxis.set_major_locator(ticker.MultipleLocator(20)) # (MultipleLocator(20)) 
ax.yaxis.set_major_locator(ticker.MultipleLocator(20)) # (MultipleLocator(20)) 

plt.show() #pylab.show() 
```

这是输出：

![matplotlib.png](../Images/1341c3c5806054274a7ba61e95ee4a3e.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-24T14:25:38.457

为了避免`.add_patch()`多次调用（通常是首先使用 PatchCollection 的目的），您可以将 a 传递`ListedColormap`给`PatchCollection`via `cmap=`。

这看起来如下（从[fraxel 的答案](https://stackoverflow.com/a/10551413/5516420)修改）：

```
import matplotlib
import matplotlib.pyplot as plt
from matplotlib.colors import ListedColormap
from matplotlib.collections import PatchCollection
import numpy as np

fig = plt.figure()
ax = fig.add_subplot(111)
patches_list = []
color_list = []
patches_list.append(matplotlib.patches.Rectangle((-200,-100), 400, 200))
color_list.append('yellow')
patches_list.append(matplotlib.patches.Rectangle((0,150), 300, 20))
color_list.append('red')
patches_list.append(matplotlib.patches.Rectangle((-300,-50), 40, 200))
color_list.append('#0099FF')
patches_list.append(matplotlib.patches.Circle((-200,-250), radius=90))
color_list.append('#EB70AA')

our_cmap = ListedColormap(color_list)
patches_collection = PatchCollection(patches_list, cmap=our_cmap)
patches_collection.set_array(np.arange(len(patches_list)))
ax.add_collection(patches_collection)

plt.xlim([-400, 400])
plt.ylim([-400, 400])
plt.show() 
```

结果： [cmap_approach_result](https://i.stack.imgur.com/apRJe.png)

# java - 我应该使用 Spring 的 TaskScheduler 在指定时间使用 @Async 注释执行任务吗？

> ID：10550484
> 
> 赞同：1
> 
> 时间：2012-05-11T11:28:40.920
> 
> 标签：java, spring, spring-annotations

我在 Web 应用程序中使用 Spring 3，我想在未来两分钟内运行一次任务（例如发送电子邮件）。不同的用户（使用不同的参数）可能会多次调用来调度同一任务，因此会有一些调度队列重叠。

在应用程序的其他地方，我使用 Spring 的**@Scheduled**注释定期执行 cron 样式的任务，因此我已经配置了[Spring 的任务执行和调度](http://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/scheduling.html)并正常工作。因此，我的**applicationContext.xml**文件包含以下内容：

```
<task:annotation-driven executor="myExecutor" scheduler="myScheduler"/>
<task:executor  id="myExecutor"  pool-size="5"/>
<task:scheduler id="myScheduler" pool-size="10"/> 
```

**我已经编写了以下代码作为测试，并且从发送到控制台的输出来看，无论我是否使用@Async**注释似乎都没有任何区别（行为是相同的）。

```
public static void main(String[] args) {
    ApplicationContext ctx = 
         new ClassPathXmlApplicationContext("applicationContext.xml");
    long start = System.currentTimeMillis();
    long inXseconds = start + (1000 * 10);        
    Date startTime = new Date(start + 5000);
    TaskScheduler taskscheduler = (TaskScheduler) ctx.getBean("myScheduler");

    System.out.println("Pre-calling " + new Date());        
    doSomethingInTheFuture(taskscheduler, startTime, "Hello");
    System.out.println("Post-calling " + new Date());    

    while(System.currentTimeMillis()< inXseconds){            
        // Loop for inXseconds
    }        

    System.exit(0);
}

@Async
private static void doSomethingInTheFuture(
       TaskScheduler taskscheduler, 
       Date startTime, 
       final String attribute){
    // Returns a ScheduledFuture but I don't need it
    taskscheduler.schedule(new Runnable(){
        public void run() {
            System.out.println(attribute);
            System.out.println(new Date());
        }            
    }, startTime);                        
} 
```

我的一些问题是：

**我应该使用@Async 注释吗？如果我这样做会有什么不同？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T12:30:20.223

这对您的情况没有影响，因为您已经使用 @Async 注释注释了一个静态方法 - 而 Spring 不会在此实例中创建代理。

如果您在普通 Spring bean 方法上声明了 @Async 注释，那么行为将是在内部将其包装到 Runnable 类中并将其作为任务提交给线程池，并且您调用的方法将立即返回 - 而任务计划由线程池执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T12:18:20.113

据我了解，如果您放置注释调度程序，唯一的区别将执行此任务并转到另一个。如果任务的执行时间超过您的时间间隔（2 分钟） - 您会看到差异。

使用@Asunc 注释调度程序将启动新任务，而无需等待前一个任务完成。如果没有此注释，它将等到当前任务完成。

因此，如果任务执行时间超过您的时间间隔（2 分钟），可能会有所不同。

# asp.net-mvc-3 - MVC3 Razor httppost 返回复杂对象子集合

> ID：10550486
> 
> 赞同：1
> 
> 时间：2012-05-11T11:28:47.723
> 
> 标签：asp.net-mvc-3, razor, http-post

我已经很久没有使用 MVC3 了，我认为这是我知识上的一个缺陷，而不是一个真正的问题。

我有一个具有一些基本属性的对象，然后是内部对象的集合（简化版）：

```
public class myClass
{
    public string Name { get; set; }
    public string Location { get; set; }
    public List<myOtherClass> Children { get; set; }
 }

public class myOtherClass
{
    public string Name { get; set; }
    public int Age { get; set; }
} 
```

我有一个强类型为“myClass”对象的视图。我使用 @html.editorfor 作为名称和位置，然后使用 foreach 作为子对象。在 foreach 中，我再次对它们的每个属性使用 editorfor。

在回发（httppost 操作）上，填写了 myClass 名称和位置，但子列表为空。

我不确定我应该如何制作视图以确保它填充所有子元素。

我都试过了：

```
[httppost]
public actionresult myaction(myClass myclass)
{
} 
```

和：

```
[httppost]
public actionresult myaction()
{
    myClass myclass = new myClass();
    TryUpdateModel(myclass);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T12:07:18.890

您不应该手动迭代子项，您应该定义编辑器模板`myOtherClass`，然后让框架为所有项目集合生成编辑器。

`myOtherClass`为at创建 EditorTemplate`~/Views/Shared/EditorTemplates/myOtherClass.cshtml`

```
@model myOterClass
@Html.EditorFor(model => model.Name)
@Html.EditorFor(model => model.Age) 
```

然后在父视图中

```
@Html.EditorFor(model => model.Children) 
```

这将为集合中的所有项目在内部调用您的编辑器模板，并为模型绑定生成正确的输入名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T12:31:24.903

在视图中：

```
@for (int i = 0; i < Model.Children.Count; i++)
{
  <div class="editor-field">
    @Html.EditorFor(m => m.Children[i].Name)
  </div>

} 
```

在控制器中：

```
public ActionResult Test()
{
    var model = new myClass();
    model.Name = "name";
    model.Location= "loc";

    model.Children = new List<myOtherClass>();
    var child1 = new myOtherClass();
    child1.Name = "Name1";

    var child2 = new myOtherClass();
    child2.Name = "Name2";

    model.Children.Add(child1);
    model.Children.Add(child2);
    return View(model);
}

[HttpPost]
public ActionResult Test(myClass model)
{
    //model.Children Has Value
} 
```

# keyboard-shortcuts - vi：如何自动插入空格

> ID：10550487
> 
> 赞同：0
> 
> 时间：2012-05-11T11:28:48.130
> 
> 标签：keyboard-shortcuts, indentation, vi

我正在尝试为像我这样喜欢线条完美对齐的疯狂人编写一个不错的功能。

我经常写一些格式为“key = value”的文件。由于密钥可能包含不确定数量的字符，因此必须手动对齐“=”符号，这并不酷。

有没有办法告诉 vi “当有人键入等号时，然后根据需要插入空格以转到第 25 列，然后写一个等号”？

第二步是定义一个快捷方式以将此格式应用于整个文件。

任何帮助，将不胜感激。

本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T22:39:03.917

映射*插入模式*`=`中的行为。

 *下一个代码将从当前光标位置到第 24 列添加空格，并在其后添加等号。如果光标位置后有字符（假设在单词中间），这些字符将移动到第 25 列之后。将其添加到`vimrc`文件中并尝试。

```
"" If length of the line is more or equal to 24, add an equal sign at the end.
"" Otherwise insert spaces from current position of cursor until column 24 
"" and an equal sign, moving characters after it.
function My_align()
    let line_len = strlen( getline('.') )
    if line_len >= 24
        s/$/=/
        return
    endif
    let col_pos = col('.')
    exe 's/\%#\(.\|$\)/\=submatch(1) . printf( "%' . (24 - col_pos) . 's%s", " ", "=" )/'
endfunction

inoremap = <Esc>:call My_align()<CR>A 
```

第二步，使用多次重复命令，检查等号并插入空格，直到第 25 列之前。如果等号在执行之前在第 25 列之后将不起作用，但你明白了。

```
:g/=/exe 's/=/\=printf( "%' . ( 24 - stridx( getline('.'), "=" ) ) . 's", " " ) . submatch(0)/' 
```*

# sql-server-2008 - 删除表，然后无法重新创建同名表

> ID：10550488
> 
> 赞同：2
> 
> 时间：2012-05-11T11:28:50.113
> 
> 标签：sql-server-2008, create-table, drop-table

我首先在 SQL Server 2008 中删除了一个表（之后它显示命令已成功执行的消息）。

然后我尝试创建一个同名的表，它向我显示了一个错误。

关闭 SSMS 窗口并重新打开后，它尝试再次创建具有相同名称的表并成功。

到底是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T11:49:35.743

您不能在 sql server 的同一批次中删除和创建同一个表，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/ms173790.aspx)

他们的示例使用 GO 来分解这两个命令。半冒号可能有效，

删除表...; 创建表,,,;

可能

```
Begin Transaction
Drop Table...
Commit Transaction
Create Table 
```

或者当然将其拆分为两个命令，这就是 GO 在 SQL 服务器管理器的查询窗口中所做的。

如果确实将其拆分，则在尝试删除表之前检查表是否存在以及在尝试创建表之前检查表是否存在可能是明智之举。

# java - 是否可以在运行时手动将消息驱动 bean 订阅到 JMS 队列/主题？

> ID：10550491
> 
> 赞同：4
> 
> 时间：2012-05-11T11:28:56.837
> 
> 标签：java, jakarta-ee, jboss, ejb, jms

我有一个在 JBoss 上运行的企业应用程序，其中包含许多消息驱动的 bean。目前，每个 MDB 都侦听来自通过 MDB 类上的注释定义的目标的消息。

是否可以在运行时设置 MDB 订阅的目标，而不是通过部署描述符的注释来配置它？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:42:51.367

通常你不能重新配置现有的 MDB 来监听另一个队列，但是你可以尝试[这种方法](https://stackoverflow.com/questions/308188/configurable-values-to-mdb-annotations)来指定系统属性而不是真正的队列名称。可以通过 JMX 在运行时更改系统属性

# php - 错误：WSDL - SOAP-ERROR：解析 WSDL：无法从

> ID：10550505
> 
> 赞同：2
> 
> 时间：2012-05-11T11:29:49.080
> 
> 标签：php, security, soap, wsdl

我有一个使用肥皂的 php 代码

我得到错误

> 错误：WSDL - SOAP-ERROR：解析 WSDL：无法从

这是一个安全 wsdl，所以我还需要发送用户名和密码。我的代码有什么问题？我在网上看到它并不能在 php 代码中使用肥皂。这是我的代码：

```
<?php
ini_set("soap.wsdl_cache_enabled", "0"); 
$soap_url = 'http://some-ip/prod/app/soap/user/storeitemws?WSDL';
$sh_param = array(
                'username' => 'aya',
                'password' => 'aya');

$soap_client = new SoapClient($soap_url);
$test = $soap_client->Authenticate($sh_param);

echo $test . "\nDone";
?> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:54:46.033

请参阅[文档](http://php.net/manual/en/soapclient.soapclient.php)：

```
$client = new SoapClient("some.wsdl", array('login'          => "some_name",
                                            'password'       => "some_password")); 
```

更改并`username`尝试`login`上述方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:20:24.250

也许一些**防火墙**？您无法访问服务器？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T11:48:38.463

是`Authenticate()`SOAP 方法吗？wsdl 以什么方式得到保护？如果您使用浏览器访问它会发生什么？

SoapClient 不支持对构建它的 WSDL 进行身份验证，因此您必须手动下载 WSDL（例如使用 cURL）并从该文件创建 SoapClient。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T11:36:03.707

要在 localhost 上使用，请安装 WAMP。
点击 wamp 托盘图标 > PHP Services > 并启用这些选项：
**openssl、
php_openssl、
curl；
SOAP，

ps 可能，一些免费主机没有这些选项**

# php - 如何使用 SMTP 格式化电子邮件

> ID：10550508
> 
> 赞同：1
> 
> 时间：2012-05-11T11:29:56.290
> 
> 标签：php, email, formatting, smtp

我正在尝试使用**php smtp 身份验证**发送格式化的电子邮件，但由于某种原因`\n`，`\r\n`并且`PHP_EOL`无法格式化消息，因此所有内容都出现在一行上。

**以下是我尝试过的**

```
$order .= "Title : {$title}" . PHP_EOL
."Author : {$author}" . PHP_EOL
."ISBN : {$isbn}" . PHP_EOL
."Publisher : {$publisher}" . PHP_EOL
."Supplier : {$supplier}\n
Quantity : {$qty}\r\n 
```

该变量`$order`包含电子邮件的正文。这是我的`sendMail()`功能的一部分

```
$from = "{$sender_name} <{$sender}>";
$to = $reciever." <$email>";
$subject = $subj;
$body = $msg;
$host = "mail.thekingsbooks.com";           
$username = "noreply@thekingsbooks.com";
$password = "password";

$headers = array(
  'From'    => $from, 
  'To'      => $to, 
  'Subject' => $subject
);

$smtp = Mail::factory(
  'smtp',
   array(
     'host'   => $host, 
     'auth'   => true,
     username => $username, 
     password => $password
   )
 );

$mail = $smtp->send($to, $headers, $body); 
```

**发送的邮件是这样的**

```
Ordered items\r\nTitle : A Retreat With Pope John Paul II: Be Not Afraid (Retreat With-- Series)\r\nAuthor : \r\nISBN : 0867164204\r\nPublisher : \r\nSupplier : \r\n\r\n                               Quantity : 6\r\n\r\n 
```

关于如何格式化电子邮件正文的任何​​建议？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:58:19.180

如果您在 Outlook 中查看此内容，则 Outlook 可能会删除空格。在 Outlook 中，单击显示已恢复空白的选项。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-11T11:55:35.013

它可能是作为 HTML 发送的。尝试将“Content-type: text/plain; charset=iso-8859-1”添加到您的标题中。

# java - 带有 Hibernate 4 和 ManyToOne 级联的 IllegalStateException

> ID：10550511
> 
> 赞同：23
> 
> 时间：2012-05-11T11:29:59.880
> 
> 标签：java, hibernate, jpa, many-to-one, hibernate-cascade

我有这两个课

我的项目对象：

```
@Entity
public class MyItem implements Serializable {

    @Id
    private Integer id;
    @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})
    private Component defaultComponent;
    @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})
    private Component masterComponent;

    //default constructor, getter, setter, equals and hashCode
} 
```

组件对象：

```
@Entity
public class Component implements Serializable {

    @Id
    private String name;

    //again, default constructor, getter, setter, equals and hashCode
} 
```

我试图坚持使用以下代码：

```
public class Test {

    public static void main(String[] args) {
        Component c1 = new Component();
        c1.setName("comp");
        Component c2 = new Component();
        c2.setName("comp");
        System.out.println(c1.equals(c2)); //TRUE

        MyItem item = new MyItem();
        item.setId(5);
        item.setDefaultComponent(c1);
        item.setMasterComponent(c2);

        ItemDAO itemDAO = new ItemDAO();
        itemDAO.merge(item);
    }
} 
```

虽然这适用于 Hibernate 3.6，但 Hibernate 4.1.3 抛出

```
Exception in thread "main" java.lang.IllegalStateException: An entity copy was already assigned to a different entity.
        at org.hibernate.event.internal.EventCache.put(EventCache.java:184)
        at org.hibernate.event.internal.DefaultMergeEventListener.entityIsDetached(DefaultMergeEventListener.java:285)
        at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:151)
        at org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:914)
        at org.hibernate.internal.SessionImpl.merge(SessionImpl.java:896)
        at org.hibernate.engine.spi.CascadingAction$6.cascade(CascadingAction.java:288)
        at org.hibernate.engine.internal.Cascade.cascadeToOne(Cascade.java:380)
        at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:323)
        at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:208)
        at org.hibernate.engine.internal.Cascade.cascade(Cascade.java:165)
        at org.hibernate.event.internal.AbstractSaveEventListener.cascadeBeforeSave(AbstractSaveEventListener.java:423)
        at org.hibernate.event.internal.DefaultMergeEventListener.entityIsTransient(DefaultMergeEventListener.java:213)
        at org.hibernate.event.internal.DefaultMergeEventListener.entityIsDetached(DefaultMergeEventListener.java:282)
        at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:151)
        at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:76)
        at org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:904)
        at org.hibernate.internal.SessionImpl.merge(SessionImpl.java:888)
        at org.hibernate.internal.SessionImpl.merge(SessionImpl.java:892)
        at org.hibernate.ejb.AbstractEntityManagerImpl.merge(AbstractEntityManagerImpl.java:874)
        at sandbox.h4bug.Test$GenericDAO.merge(Test.java:79)
        at sandbox.h4bug.Test.main(Test.java:25) 
```

数据库后端是 h2（但 hsqldb 或 derby 也是如此）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-12T11:25:15.483

I had the same problem, and this is what I found:

The merge method traverses the graph of the object that you want to store, and for each object in this graph it loads it from the database, so it has a pair of (persistent entity, detached entity) for each object in the graph, where detached entity is the entity that is going to be stored, and persistent entity is gotten from the database. (In the method, as well as in the error message the persistent entity is known as 'copy'). Then these pairs are put in two maps, one with the persistent entity as key and the detached entity as value, and one with the detached entity as key and the persistent entity as value.

For each such pair of entites, it checks these maps, to see if the persistent entity maps to the same detached entity as before (if it has already been visited), and vice versa. This problem occurs when you get a pair of entities where doing a get with the persistent entity returns a value, but a get from the other map, with the detached entity returns null, which means that you have already linked the persistent entity with a detached entity with a different hashcode (basically the object identifier if you have not overridden the hashcode-method).

TL;DR, you have multiple objects with different object identifiers/hashcode, but with the same persistence identifier (thus referencing the same persistent entity). This is appearantly no longer allowed in newer versions of Hibernate4 (4.1.3.Final and upwards from what I could tell).

The error message is not very good imo, what it really should say is something like:

`A persistent entity has already been assigned to a different detached entity`

or

`Multiple detached objects corresponding to the same persistent entity`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T21:00:13.347

同样在这里，检查你的 equals() 方法。很可能执行不力。

编辑：我已经验证，如果您没有正确实现实体的 equals() 和 hashCode() 方法，则合并操作将不起作用。

您应该遵循以下准则来实现 equals() 和 hashCode()：

[http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch04.html#persistent-classes-equalshashcode](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch04.html#persistent-classes-equalshashcode)

*“建议您使用业务键相等来实现 equals() 和 hashCode()。业务键相等意味着 equals() 方法仅比较形成业务键的属性。它是一个键，可以在真实世界（一个自然的候选键）"*

这意味着：你不应该使用你的 ID 作为你的 equals() 实现的一部分！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-30T01:29:22.840

您的项目和组件之间的关系是*单向*的还是*双向*的？如果它是双向的，请确保您没有`Cascade.MERGE`返回到 Item 的调用。

基本上，较新版本的 Hibernate 有一个实体映射，其中包含基于对 merge() 的调用需要合并的所有事物的列表，它将调用 merge 然后移动到下一个，但将事物保留在映射中，当遇到已处理的项目时，它会抛出您在“实体副本已分配给不同的实体”上面所说的错误。当我们在对象图中找到这些“向上”合并时，我们在我们的应用程序中发现，即。在双向链接上，它修复了合并调用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-27T09:24:15.790

有相同的异常（休眠 4.3.0.CR2）厌倦了保存具有两个子对象副本的对象，该对象由以下实体中的实体修复：

```
@OneToOne(cascade = CascadeType.MERGE)
private User reporter;
@OneToOne(cascade = CascadeType.MERGE)
private User assignedto; 
```

只是，

```
@OneToOne
private User reporter;
@OneToOne
private User assignedto; 
```

我不知道原因

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-22T13:24:38.723

如果您使用的是 jboss EAP 6 .. 将其更改为 jboss 7.1.1 。这是 jboss EAP 6 的错误。 [https://access.redhat.com/documentation/en-US/JBoss_Enterprise_Application_Platform/6.3/html/6.3。 0_Release_Notes/ar01s07s03.html](https://access.redhat.com/documentation/en-US/JBoss_Enterprise_Application_Platform/6.3/html/6.3.0_Release_Notes/ar01s07s03.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T10:47:12.930

根据 EventCache 中的逻辑，对象图中的所有实体都应该是唯一的。所以最好的解决方案（或者它是否可以解决？）是将 MyItem 中的级联删除到 Component。如果真的需要，单独合并组件——我敢打赌，在 95% 的情况下，组件不应该根据业务逻辑进行合并。

另一方面——我真的很想知道这个限制背后的真实想法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-26T05:30:32.123

如果名称是 ID，为什么要创建两个具有相同 ID 的对象？您可以在所有代码中使用 c1 对象。

如果这只是一个示例，并且您在代码的另一部分创建了 c2 对象，那么您不应该创建新对象，而是从数据库中加载它：

```
c2 = itemDao.find("comp", Component.class); //or something like this AFTER the c1 has been persisted 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-11T12:43:21.993

尝试在 Component 类中添加`@GeneratedValue`注释。`@Id`否则两个不同的实例可能会获得相同的 id，然后发生冲突。

接缝你给他们相同的ID。

```
 Component c1 = new Component();
    c1.setName("comp");
    Component c2 = new Component();
    c2.setName("comp"); 
```

这可能会解决你的问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-11-09T02:55:41.600

我有同样的问题，刚刚解决了。虽然上述答案可能会解决问题，但我不同意其中的一些，尤其是更改已实现的 equlas() 和 hashcode() 方法。但是我觉得我的回答强化了@Tobb 和@Supun 的回答。

在我的许多方面（孩子方面）我有

```
 @OneToMany(mappedBy = "authorID", cascade =CascadeType.ALL, fetch=FetchType.EAGER)
 private Colllection books; 
```

而在我的一侧（父母一方）

```
 @ManyToOne(cascade =CascadeType.ALL)
 private AuthorID authorID; 
```

在阅读了@Tobb 提供的出色的最佳答案并稍加思考后，我意识到注释没有意义。我理解它的方式（在我的情况下）我正在合并（）作者对象和合并（）书对象。但是因为图书集合是 Author 对象的一个​​组件，所以它试图保存它两次。我的解决方案是将级联类型更改为：

```
 @OneToMany(mappedBy = "authorID", cascade =CascadeType.PERSIST, fetch=FetchType.EAGER)
  private Collection bookCollection; 
```

和

```
 @ManyToOne(cascade =CascadeType.MERGE)
 private AuthorID authorID; 
```

长话短说，坚持父对象并合并子对象。

希望这有帮助/有意义。

# r - 如何在 R 中绘制 abline 的值？

> ID：10550520
> 
> 赞同：5
> 
> 时间：2012-05-11T11:30:47.033
> 
> 标签：r, plot

我用这段代码来制作这个情节：

```
plot(p, cv2,col=rgb(0,100,0,50,maxColorValue=255),pch=16, 
     panel.last=abline(h=67,v=1.89, lty=1,lwd=3)) 
```

我的情节是这样的： ![阴谋](../Images/3faf01d8a411d083a001a36f6bff5371.png)

1.) 如何在一个简单的图中绘制 ablines 的值？

2.) 如何缩放我的绘图以使两条线都出现在中间？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T11:41:12.203

改变绘图的比例，使线条在中间改变轴，即

```
x<-1:10
y<-1:10
plot(x,y)
abline(a=1,b=0,v=1)

changed to:

x<-1:10
y<-1:10
plot(x,y,xlim=c(-30,30))
abline(a=1,b=0,v=1) 
```

通过“价值”我假设你的意思是线切割x轴的位置？像`text`什么？IE：

```
text((0), min(y), "number", pos=2) 
```

如果您想要 x 轴上的标签，请尝试：

```
abline(a=1,b=0,v=1)
axis(1, at=1,labels=1) 
```

为了防止标签之间的重叠，您可以删除零，即：

```
plot(x,y,xlim=c(-30,30),yaxt="n")
axis(2, at=c(1.77,5,10,15,20,25)) 
```

或在您绘制扩展边距并从轴进一步添加标签之前

```
par(mar = c(6.5, 6.5, 6.5, 6.5))
plot(x,y,xlim=c(-30,30))
abline(a=1,b=0,v=1)
axis(2, at=1.77,labels=1.77,mgp = c(10, 2, 0)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:58:06.860

与@user1317221 提出的答案在精神上相似，这是我的建议

```
# generate some fake points
x <- rnorm(100)
y <- rnorm(100)

# positions of the lines
vert = 0.5
horiz = 1.3 
```

要在图的中心显示线条，首先计算数据点与线条之间的水平和垂直距离，然后适当调整限制。

```
# compute the limits, in order for the lines to be centered
# REM we add a small fraction (here 10%) to leave some empty space, 
# available to plot the values inside the frame (useful for one the solutions, see below)
xlim = vert + c(-1.1, 1.1) * max(abs(x-vert))
ylim = horiz + c(-1.1, 1.1) * max(abs(y-horiz))

# do the main plotting
plot(x, y, xlim=xlim, ylim=ylim)
abline(h=horiz, v=vert) 
```

现在，您可以在轴上绘制“线的值”（该`line`参数允许您控制可能的重叠）：

```
mtext(c(vert, horiz), side=c(1,2)) 
```

或者在绘图框架内：

```
text(x=vert, y=ylim[1], labels=vert, adj=c(1.1,1), col='blue')
text(x=xlim[1], y=horiz, labels=horiz, adj=c(0.9,-0.1), col='blue') 
```

高温高压

# eclipse - Android / Eclipse / Emulator / WAMP：错误 503 和超时

> ID：10550524
> 
> 赞同：0
> 
> 时间：2012-05-11T11:30:51.300
> 
> 标签：eclipse, json, apache, android-emulator, wamp

我正在尝试从我的 Android 应用程序中的 PHP 脚本请求 JSON 数据。

当我直接连接我的手机并直接访问“真正的”互联网网络服务器时，整个事情运行良好。但是，使用模拟器和本地主机（WAMP 安装）它根本不起作用。再次，直接在本地网络服务器上运行脚本，给了我预期的结果——只有当我使用模拟器在同一台机器上调用它时，麻烦就开始了。

以下是我迄今为止尝试过的组合（脚本位于根目录的子目录“zz”中）：

```
private static String url_all_venues = "http://10.0.2.2/zz/pullvenuesjson.php"; 
```

或者

```
private static String url_all_venues = "http://10.0.2.2:80/zz/pullvenuesjson.php"; 
```

导致以下异常： E/JSON Parser(657): Error parsing data org.json.JSONException: Value

当我尝试以下操作时：

```
private static String url_all_venues = "http://10.0.2.2:8080/zz/pullvenuesjson.php"; 
```

代码“永远”运行，大约 5 分钟后出现超时错误。

知道如何解决这个问题，以便我也可以在本地网络服务器/模拟器上测试我的应用程序吗？很可能问题出在我的本地 Apache 配置中，但是，我不确定……</p>

**编辑：**

以下是一些似乎触发错误的代码：

```
 DefaultHttpClient httpClient = new DefaultHttpClient();
            String paramString = URLEncodedUtils.format(params, "utf-8");
            url += "?" + paramString;
            HttpGet httpGet = new HttpGet(url); 
            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent(); 
```

“url”就是上面提到的那个。正如我在下面的评论中提到的，问题似乎来自本地 WAMP 网络服务器没有正确响应，因为当我通过 Internet 直接访问“真实”服务器时，代码工作正常（iow，除了更改之外什么都不做php 脚本的 Internet 地址的 URL）。奇怪的是，当我在本地运行脚本时，该脚本也可以正常工作，但不能通过模拟器运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T08:28:26.147

我终于想通了！我使用 Log.d(..) 记录了传输的数据，发现用户名/密码组合无效，因为我没有检查本地主机条件......脚本和应用程序现在都可以很好地检索数据，本地主机和网络。感谢您的询问，这帮助我找到了错误的根源！

[回答自己以避免 Q 显示为未回答]

# objective-c - 调用两次静态变量的函数？

> ID：10550525
> 
> 赞同：0
> 
> 时间：2012-05-11T11:30:54.837
> 
> 标签：objective-c, database, xcode, sqlite, static

我有一个包含一个静态变量“数据库”的类，它代表一个用 sqlite 实现的数据库和一个函数 getAllShop，它的任务是调用存储在数据库中的所有数据并将它们填充到一个可变数组中

```
#define kFilename @"negozi.sqlite"

@implementation ShopDatabase

static ShopDatabase *database;

+(ShopDatabase *)database{
    if (database==nil) {
        database = [[ShopDatabase alloc] init];
        return database;
    }
}

- (id)init
{
    self = [super init];
    if (self) {

    // Create the path to the database in the Documents directory for the bundle itself is not writable
    NSArray *pathsToDocuments = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [pathsToDocuments objectAtIndex:0];
    databasePath = [documentsDirectory stringByAppendingPathComponent:kFilename];
    if (![[NSFileManager defaultManager] isReadableFileAtPath:databasePath]) {
        if ([[NSFileManager defaultManager] copyItemAtPath:yourOriginalDatabasePath toPath:databasePath error:NULL] != YES)
            NSAssert2(0, @"Fail to copy database from %@ to %@", yourOriginalDatabasePath, databasePath);
    }

    // --- open db
    if(sqlite3_open([databasePath UTF8String], &database) != SQLITE_OK){
        NSLog(@"Failed to open database");
    }else {
        NSLog(@"Database opened");
    }
}
return self;
}

- (NSMutableArray *) getAllShops{

// ------ read all the db
NSMutableArray *returnArray=[[NSMutableArray alloc] init];
NSString *query= @"SELECT * FROM negozio";
sqlite3_stmt *statement;

if (sqlite3_prepare_v2(database, [query UTF8String], -1, &statement, NULL) == SQLITE_OK){
    NSLog(@"Prepared database");
    while (sqlite3_step(statement)==SQLITE_ROW) {
            int uniqueId = sqlite3_column_int(statement, 0);    
            NSMutableString *nome = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 1)];
        ShopInfo *info= [[ShopInfo alloc] initWithUniqueId:uniqueId nome:nome];
        [returnArray addObject:info];
    }
    sqlite3_finalize(statement);
}

return returnArray;
}

@end 
```

当我必须从另一个类的数据库中获取数据时，我会这样做，调用 getAllShop 并且一切顺利。通过这种方式，我将数据库的所有数据都放入了我的数组 shopinfo 中：

```
NSMutableArray *shopInfo=[[ShopDatabase database] getAllShops]; 
```

现在，我的数据库包含我需要用来填充两个表视图的数据，所以我需要执行两次：一次在代表第一个表视图的类中，一次在第二个。当我在第一个视图中执行此操作时一切顺利，但是当我第二次执行相同操作时，Xcode 给了我一个 exc bad access 错误。我尝试在同一个类中执行代码两次，这就是我得到的

```
2012-05-11 13:06:54.897 Shopping Mall[11333:707] -[NegozioPartenza getAllShops]: unrecognized selector sent to instance 0x14b8c0
2012-05-11 13:06:54.899 Shopping Mall[11333:707] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NegozioPartenza getAllShops]: unrecognized selector sent to instance 0x14b8c0'
*** First throw call stack:
(0x33ad188f 0x325c3259 0x33ad4a9b 0x33ad3915 0x33a2e650 0xa4141 0x35727e33 0x3574c629 0x35710d7d 0x357d34dd 0x3571955d 0x3571940b 0x357d34a3 0x35788873 0x357881b7 0x357d1d89 0x357d04eb 0x3582b82b 0x33a2b3fd 0x35709faf 0x35709f6b 0x35709f49 0x35709cb9 0x3570a5f1 0x35708ad3 0x357084c1 0x356ee83d 0x356ee0e3 0x32fa622b 0x33aa5523 0x33aa54c5 0x33aa4313 0x33a274a5 0x33a2736d 0x32fa5439 0x3571ce7d 0xa2515 0xa24c0) 
```

终止称为抛出异常（lldb）

我是目标 C 的新手，所以我无法理解有什么意义。如何在静态变量上调用两次函数？谢谢你。

编辑：也许调用 [ShopDatabase 数据库] 激活第二次初始化的构造函数弄得一团糟？当我说一个变量是静态的时，这意味着该类的每个对象只有一个实例，对吗？那么我如何在第一次创建该唯一实例后访问它呢？我想我搞砸了当你使用静态变量时会发生什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:40:57.437

在你第一次打电话后的某个地方，`database`正在被释放。随后，`NegozioPartenza`在同一位置创建类型对象。第二次调用`[ShopDatabase database]`返回这个对象，然后你发送`-getAllShops`到那个对象，它显然没有实现那个方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T13:28:17.433

您在第二次通话中没有有效的回报。

```
+(ShopDatabase *)database{
    if (database==nil) {
        database = [[ShopDatabase alloc] init];
        return database;
    }
} 
```

在第二次调用数据库不是零，你不返回任何东西。您应该收到警告，并非所有控制路径都返回值。

这是正确的方法。

```
+(ShopDatabase *)database{
    if (database==nil) {
        database = [[ShopDatabase alloc] init];
    }

    return database;
} 
```

# android - Andengine Box2D 爆炸

> ID：10550528
> 
> 赞同：0
> 
> 时间：2012-05-11T11:31:01.197
> 
> 标签：android, box2d, andengine, game-physics

我想在玩家投掷手榴弹后制作爆炸效果，爆炸意味着爆炸，就像投掷手榴弹附近的身体会随机跳跃.......这里是例子

[http://www.youtube.com/watch?v=DXCJsV3oAkw](http://www.youtube.com/watch?v=DXCJsV3oAkw)

我怎样才能得到这个效果..请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:09:26.100

只需使用 andengine 创建一个动画精灵，然后（也许）使用物理扩展来抛出一些弹片（还有一些精灵）。

顺便说一句：如果你想要 2 有代码，你也许应该开始向我们展示我们可以使用的东西；）

# ruby-on-rails-3 - Rails 3 路径未按预期工作

> ID：10550530
> 
> 赞同：0
> 
> 时间：2012-05-11T11:31:05.737
> 
> 标签：ruby-on-rails-3, path, routes

我有一个为组织创建新活动的表格。路由是：

```
resource :organisations do
  resource :events
end 
```

当我编辑一个事件时，成功后我会路由回事件控制器中的显示操作，如下所示：

```
def update
    @organisation = current_user.organisations.find(params[:organisation_id])
    @event = @organisation.events.find(params[:id])
    if @event.update_attributes(params[:event])
        # Handle a successful update.
        flash[:success] = "Event updated"
        redirect_to organisation_event_path
    else
        render 'edit'
    end
end 
```

当我创建一个事件时，我还希望它重定向到事件显示动作，实现如下：

```
def create
    @organisation = current_user.organisations.find(params[:organisation_id])
    @event = @organisation.events.create(params[:event])
    if @event.save
        flash[:success] = "Event added!"
        redirect_to organisation_event_path
    else
        render 'new'
    end
end 
```

但是，这会产生以下错误：`No route matches {:action=>"show", :controller=>"events"}`

这是因为 URI 中没有事件 ID/名称，据我所知。可能是我对路径生成缺乏了解，但是如何达到我想要的结果呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:26:54.400

我不确定为什么您的第一个重定向有效，但 organization_event_path 将需要两个参数，因为它是从两个资源的 ID（组织和事件）创建路径。所以，你应该这样称呼它：

```
organisation_event_path(@organization, @event) 
```

# c++ - c ++存储值超出数组的愤怒

> ID：10550532
> 
> 赞同：0
> 
> 时间：2012-05-11T11:31:10.560
> 
> 标签：c++, arrays, visual-studio-debugging

```
char *asd = new char[5];
asd[10] = 'f'; 
```

为什么这段代码在运行 whit 调试时不会给我一个错误？它会在发布构建期间导致崩溃。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T11:32:04.120

因为**未定义的行为**并不意味着它必须崩溃。

这意味着*任何事情都*可能发生，包括看起来正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T11:35:11.637

您可以使用 std::vector 代替常规数组，因为在 C++ 或 C 中的数组中没有边界检查，这是设计使然（但您必须使用 at 方法）。数组只是第一个内存地址的指针，您可以使用它进行迭代，但没有关于边界的运行时信息。一个很好的例子是字符串：出于这个原因，我们使用 \0 终止符。

关于调试：当您使用调试器运行 ac 程序时，仅在操作系统上运行该程序并不是 100% 相等的。线程就是一个很好的例子，例如，当您在 gdb 上运行时会有所不同。

可能在不同的机器或操作系统中它不会崩溃。例如，为了避免这种情况，您可以使用 valgrind 来查看代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T11:57:57.030

通常，当您在调试下编译和运行时，会在分配的内存空间周围实施一些保护块，高级编译器可以检查它是否被覆盖，从而向您发出内存访问错误的信号。在发布时，没有这样的东西，这取决于编译器将您的字节放在哪里，您只需覆盖之后的内容，这可能就是一切。一些感兴趣的读物是：[http](http://scottmcpeak.com/memory-errors/) ://scottmcpeak.com/memory-errors/和[http://msdn.microsoft.com/en-us/library/faz3a37z%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/faz3a37z%28v=vs.71%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T11:53:56.730

asd[10] 仅表示“asd 的地址 + sizeof(10 字节)” 根据分配给 asd 的内存位置，此内存地址可能无法供您的程序使用，从而导致未定义的行为：

*   不保证任何其他变量不会覆盖 asd[10]
*   应用程序崩溃

# twitter - Twitter 速率限制、身份验证以及如何通过 oauth 获得关注者

> ID：10550535
> 
> 赞同：0
> 
> 时间：2012-05-11T11:31:20.017
> 
> 标签：twitter

我对 twitter api 的理解是，如果用户已授予身份验证，get 请求限制将从每小时 150 次提高到每小时 450 次。

我公司的网络应用程序将有大约 50 个同时用户，由于请求通过我们的服务器，它们将从相同的 IP 地址发送到 twitter，因此获取请求将很快达到限制。但是，如果我有 oauth（我这样做是为了发送推文）而不是从 150 个有限请求的集合池中获取所有用户请求，那么**每个**用户每小时将有 450 个请求。

这个对吗？

我的 Web 应用程序的很大一部分是使用来自 twitter api 的 /followers/ids 来获取 twitter 上各种不同人的关注者。因此，如果用户登录，他们将能够获得他们指定的 5 个不同人的关注者。我想使用他们每小时 450 个请求的配额来执行此操作，而不是 Web 应用程序的所有用户每小时 150 个的 ip 限制配额。

这可能吗？如果可以，如何 - 大致？获取当前登录用户的关注者很容易，但我不知道如何使用 oauth 和使用 450 个个人配额来获取其他关注者。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T13:39:06.323

你是对的，但数字不是 450，而是 350。 [https://dev.twitter.com/docs/rate-limiting](https://dev.twitter.com/docs/rate-limiting)

当用户使用 twitter 登录时，您会获得他的 oAuth 凭据，您应该将它们保存在数据库中，它们一直有效，直到用户在 twitter.com 中撤销它们（很少）。现在，每次您需要来自 twitter API 的东西时，获取随机用户表单数据库并使用他的 oauth 信息来签署请求。*除非您需要特定于用户的东西 - 那么您应该使用正确的用户*

# c# - 在哪里放置访问数据库的方法

> ID：10550537
> 
> 赞同：2
> 
> 时间：2012-05-11T11:31:26.837
> 
> 标签：c#, asp.net-mvc, model-view-controller, architecture, code-first

我目前正在开发一个 ASP .NET MVC 3 Web 应用程序作为原型，其中 Code First 作为数据访问层。现在我有点困惑把我的代码放在哪里。

我有一个班级客户和一个班级项目。项目对其客户具有导航属性。

```
public class Customer
{
    public int Id { get; set; }
    public string Name { get; set; }
}

public class Project
{
    public int Id { get; set; }
    public string Name { get; set; }
    public virtual Customer Customer { get; set; }
} 
```

我使用这两个类通过 codefirst 进行数据访问。

```
public class MyContext : DbContext
{
    public DbSet<Customer> Customers { get; set; }
    public DbSet<Project> Projects { get; set; }
} 
```

我了解到，最好**不要**直接在我的 MVC 视图中使用这些数据访问类 - 所以我为单个客户创建了一个 ViewModel (CustomerListModel) 和一个 DTO。

```
public class CustomerDto
{        
    public int Id { get; set; }
    public string Name { get; set; }
    public int ProjectCount { get; set; } <== this property is in question
}

public class CustomerListModel
{
    public List<CustomerDto> Customers;
} 
```

在我的控制器中，我从进行实际数据访问的（服务）类中获取客户。

```
public class CustomerService : IDisposable
{
    private MyContext db;
    public CustomerService()
    {
        db = new MyContext();
    }

    public IEnumerable<Customer> GetAllCustomers()
    {
        return db.Customers.ToList<Customer>();
    }
} 
```

在我的控制器中，我调用该方法来获取所有客户。

```
 public ViewResult Index()
    {
        //Mapper.CreateMap<Customer, CustomerDto>();

        var customerList = new List<CustomerDto>();
        foreach (var customer in rep.GetAllCustomers())
        {
            var cust = new CustomerDto();
            cust.Id = customer.Id;
            cust.Name = customer.Name;
            cust.Rate = customer.Rate;
==> cust.ProjectCount = customer.ProjectCount; <=====
            customerList.Add(cust);
        }

        var viewModel = new CustomerListModel()
        {                
            Customers = customerList //Mapper.Map<IEnumerable<Customer>, List<CustomerDto>>(rep.GetAllCustomers())
        };
        return View(viewModel);            
    } 
```

我要问的是 - 例如将单个客户的 ProjectCount 放在哪里。我可以把它放在客户类

```
 public int ProjectCount
    {
       var db = new MyContext();
       return db.Projects.Where(x => x.Customer.Id == this.Id).Count();
    } 
```

...但是我将有两个可以访问数据的地方-服务类和客户类。

我也可以将此代码放在我的 ServiceClass 中：

```
 public int GetProjectCount(Customer customer)
    {
        return db.Projects.Where(x => x.Customer.Id == customer.Id).Count();
    } 
```

...但后来我不得不从控制器调用它：

```
 foreach (var customer in rep.GetAllCustomers())
        {
            var cust = new CustomerDto();
            cust.Id = customer.Id;
            cust.Name = customer.Name;
            cust.Rate = customer.Rate;
            cust.ProjectCount = rep.GetProjectCount(customer); <==
            customerList.Add(cust);
        } 
```

...我也可以从客户类的吸气剂中从我的服务类中调用此方法。

```
 public int ProjectCount
    {
        get
        {
            return new CustomerService().GetProjectCount(this);
        }
    } 
```

所有描述的方法都有效并给了我正确的结果 -**但**我想以正确的方式做 - 你会**怎么**做 - 或者我完全偏离了轨道;-)？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T12:51:44.420

以下是我的看法，只是为了回顾一下我在评论中写的内容。我不能说这是否是“要走的路”，但我想认为这是一个可行的解决方案。

因此，如果您使用非泛型方法（正如我所提到的），对于具有少量表的小型数据库来说，这种方法简单、易于管理和调试，您可以按以下方式进行操作：

```
public interface ICustomerService
{
    IEnumerable<Customer> GetAllCustomers();
    // and other methods you'd like to use
}

public sealed class CustomerService : ICustomerService
{
    private YourContext context = new YourContext();
    // or, alternatively, even something along these lines
    private YourContext context;
    public CustomerService()
    {
        context = ContextFactory.GetDBContext();
    }
    //----

    public IEnumerable<Customer> GetAllCustomers()
    {
         // here goes the implementation
    }
}

public class YourController : Controller
{
    private ICustomerService customerService;
    public YourController(ICustomerService service)
    {
          customerService = service;
    }
    // and now you can call customerService.GetAllCustomers() or whatever other methods you put in the interface. 
} 
```

题外话 - 数据库上下文工厂可能看起来像这样，以防您想稍后更改数据库连接：

```
public static ContextFactory
{
    public static YourContext GetDBContext()
    {
         return new YourContext();
    }        
} 
```

当然，这种简单的设置适用于任何选择的 IoC 容器，我的是用于 Web 应用程序的 Autofac，它位于 Global.asax 中`Application_Start`：

```
var builder = new ContainerBuilder();
    builder.Register(service => new CustomerService()).As<ICustomerService>().InstancePerHttpRequest();
    builder.RegisterControllers(typeof(MvcApplication).Assembly);
    var container = builder.Build();
    DependencyResolver.SetResolver(new AutofacDependencyResolver(container)); 
```

依赖注入使以后测试控制器变得更容易，因为您可以使用许多模拟助手之一来模拟任何（例如准备好的项目列表）的数据库访问。

但是，如果您的大多数存储库的方法都相似，您可能想看看更[通用的解决方案（它适用于数据库优先，但也可以应用于代码优先）](http://huyrua.wordpress.com/2010/07/13/entity-framework-4-poco-repository-and-specification-pattern/)，这将更适合您的需求所以您不必重复代码，但是 - 代码可能看起来有点复杂。:)

# c# - 将 MWCellArray 从 C# 转移到 Matlab

> ID：10550538
> 
> 赞同：0
> 
> 时间：2012-05-11T11:31:36.013
> 
> 标签：c#, matlab, com, matlab-deployment

让我们说，为了争论，我有 MWCellarray temp：

```
MWCellArray temp = new MWCellArray(10000,11); 
```

我现在希望调用一个 Matlab 函数来对其进行一些简单的计算：

```
 MLApp.MLApp matlab = new MLApp.MLApp();
            <THIS IS THE MISSING STEP>
            matlab.Execute("open 'C:\Program Filez\mymatlabcode.m'");
            matlab.Execute("[thisismyoutput] = mymatlabcode(temp)"); 
```

我现在需要确保我可以先将 temp 传递到 matlab 工作区。显然我的第一个想法是：

```
 matlab.PutWorkspaceData("putworkspace", "base", temp); 
```

但没有：{“未实现（来自 HRESULT 的异常：0x80004001（E_NOTIMPL））”}

似乎我将不得不将 MWCellArray 转换为字符串数组才能使用该命令....

```
 //{
        //    int[] kDimensions = temp.Dimensions;
        //    string[,] stemp = new string[kDimensions[0], kDimensions[1]];

        //    for (int i = 0; i < kDimensions[0]; i++)
        //    {
        //        for (int j = 0; j < kDimensions[1]; j++)
        //        {
        //            stemp [i, j] = (temp[i + 1, j + 1]).ToString();
        //        }
        //    }
        //} 
```

这是非常缓慢的。真正的实现是大约 15 个 MWCellArrays，这个转换需要 15-20 分钟。

所以。我怎样才能以明智的方式做到这一点？我看不到任何其他启用传输的方法。matlab.PutCharArray 和 matlab.PutFullMatrix 似乎都不适用。

有没有办法大大加快循环？我对 c# 完全陌生

或者我会认为我应该能够将 MWCellArray 保存为 C 驱动器上的 .mat 文件然后加载它？（加载很容易，保存让我难过）

我会对你能提供的任何见解感兴趣。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T12:51:52.477

我认为您可能会混淆 MATLAB 和 .NET 之间的两种交互类型。

1.  您可以使用`MLApp.MLApp`. 然后生成的对象具有诸如 等的方法`PutCharArray`，`PutWorkspaceData`这些方法将常规 .NET`System.Array`变量作为输入；`Execute`运行 MATLAB 命令；等等`GetFullMatrix`，它们返回常规的 .NET`System.Array`变量作为输出。
2.  使用附加产品[MATLAB Builder for .NET](http://www.mathworks.com/products/netbuilder/)，您可以将 MATLAB 代码部署到 .NET 程序集。然后，您可以从 .NET 调用该程序集，并且您部署的函数可作为方法使用。这些方法将诸如`MWCellArray`等`MWNumericArray`作为输入，并将它们作为输出返回。

例如，您不能通过传递 a `MWCellArray`to 来混合这两者`matlab.PutWorkspaceData`。

如果您的目标是调用 MATLAB 的实时副本，请不要创建变量 - 只需使用and`MWCellArray`传递字符串和数组，执行内容，然后使用and获取结果。[这](http://www.mathworks.com/help/techdoc/matlab_external/f135590.html#f135616)是 MATLAB 文档中的一个示例。`PutCharArray``PutFullMatrix``GetCharArray``GetFullMatrix`

如果您的目标是调用已部署的 .NET 程序集，则实例化它并调用它（传递`MWCellArray`等）而不是`MLApp.MLApp`. [下面](http://www.mathworks.com/help/toolbox/dotnetbuilder/ug/bs3zxbx.html#bqh32vx-1)是 Builder for .NET 文档中的一个示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T12:01:37.973

将其保存为 ascii 文件，然后同样将其加载到 matlab 中？ascii 文件的格式看起来很简单：[加载文档](http://www.mathworks.nl/help/techdoc/ref/load.html)。现在的问题是如何从 C# 中保存为 ascii，这对我来说似乎比原来的问题简单一点:)

唯一真正的格式要求是每行上的元素数量相等。当然，您只能以这种方式使用 2d 矩阵:(

# c# - 如何使用 SqlConnectionStringBuilder 从连接字符串中获取数据库名称

> ID：10550541
> 
> 赞同：100
> 
> 时间：2012-05-11T11:31:52.323
> 
> 标签：c#, asp.net, sql, ado.net

我不想使用字符串操作函数拆分连接字符串来获取服务器、数据库、用户名和密码。

我阅读了以下链接并阅读了接受的答案，我发现这是从连接字符串中获取用户名和密码的最佳方法，但是数据库名称呢？

[从连接字符串中获取用户名和密码的正确方法？](https://stackoverflow.com/questions/9975122/right-way-to-get-username-and-password-from-connection-string)

如何使用 SqlConnectionStringBuilder 从连接字符串中获取数据库名称。（DataSource 是服务器名称吗？）

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2012-05-11T11:45:05.007

您可以使用特定于提供者的 ConnectionStringBuilder 类（在适当的命名空间内），或者`System.Data.Common.DbConnectionStringBuilder`在需要时抽象连接字符串对象。您需要知道用于指定您要查找的信息的特定于提供程序的关键字，但对于 SQL Server 示例，您可以执行以下两件事之一：

```
System.Data.SqlClient.SqlConnectionStringBuilder builder = new System.Data.SqlClient.SqlConnectionStringBuilder(connectionString);

string server = builder.DataSource;
string database = builder.InitialCatalog; 
```

或者

```
System.Data.Common.DbConnectionStringBuilder builder = new System.Data.Common.DbConnectionStringBuilder();

builder.ConnectionString = connectionString;

string server = builder["Data Source"] as string;
string database = builder["Initial Catalog"] as string; 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-05-11T11:34:53.570

[有关InitialCatalog 属性，](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.initialcatalog.aspx)请参阅MSDN 文档：

> 获取或设置与连接关联的数据库的名称...
> 
> 此属性对应于连接字符串中的“初始目录”和“数据库”键...

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2014-02-12T06:59:22.027

一个更简单的替代方法是从连接对象本身获取信息。例如：

```
IDbConnection connection = new SqlConnection(connectionString);
var dbName = connection.Database; 
```

同样，您也可以从连接对象中获取服务器名称。

```
DbConnection connection = new SqlConnection(connectionString);
var server = connection.DataSource; 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-05-11T11:42:50.980

```
string connectString = "Data Source=(local);" + "Integrated Security=true";

SqlConnectionStringBuilder builder = new SqlConnectionStringBuilder(connectString);

Console.WriteLine("builder.InitialCatalog = " + builder.InitialCatalog); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-05-11T11:49:03.173

这给了你 Xact；

```
System.Data.SqlClient.SqlConnectionStringBuilder connBuilder = new System.Data.SqlClient.SqlConnectionStringBuilder();

connBuilder.ConnectionString = connectionString;

string server = connBuilder.DataSource;           //-> this gives you the Server name.
string database = connBuilder.InitialCatalog;     //-> this gives you the Db name. 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-05-11T11:34:54.163

数据库名称是[SqlConnectionStringBuilder.InitialCatalog](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.initialcatalog.aspx)属性的值。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-05-11T11:39:25.777

您可以使用[InitialCatalog](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.initialcatalog.aspx)属性或也可以使用`builder["Database"]`。我用不同的情况对其进行了测试，它仍然有效。

# workflow - 暂停和恢复由 IIS7 托管的工作流（流程图）

> ID：10550543
> 
> 赞同：1
> 
> 时间：2012-05-11T11:32:04.473
> 
> 标签：workflow

我有一个 WCF 工作流服务应用程序（由 IIS7 托管）。在其中我有一个工作流程（流程图），我需要暂停，然后在满足条件时恢复。

经过大量阅读后，我了解到暂停和恢复是通过使用书签（我在代码活动中拥有的）实现的，一旦执行路径到达书签，工作流就会被卸载。

我找不到在 WCF 工作流服务应用程序中完成此操作的任何示例，只是一个工作流控制台应用程序，其中使用程序类的 Main 方法卸载和加载工作流

```
WorkflowApplication app = new WorkflowApplication(new Workflow1()); 
```

.

*有谁知道是否可以使用一些内置的 IIS 或 AppFabric 功能暂停和恢复工作流程流程图？*

我对 WF 和 AppFabric 还是很陌生，所以如果我遗漏了一些明显的东西，我会道歉。

非常感谢

大卫

# python - python元组到mysql

> ID：10550545
> 
> 赞同：-2
> 
> 时间：2012-05-11T11:32:32.997
> 
> 标签：python, mysql

这是数据库中的数据，我用完了。

```
policy_id = ((2309L,), (118L,), (94L,))
for i in policy_id:
    print i 
```

但我希望结果为：

```
p.policy_id in ('%s','%s','%s') %(i[0],i[1],i[2])
#i[0]=2309
#i[1]=118
#i[2]=94 
```

我的英文不好，相比之前的问题没有得到我想要的，我是新手，请谅解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:38:08.460

你得到了你想要的。有人告诉您，您可以从每个项目中获取第 0 个“子项目”。所以第零种方法可能是

```
c.execute("foo bar blub where p.policy_id in (%s,%s,%s)", (i[0][0], i[1][0], i[2][0])) 
```

另一种方法可能是首先转换元组

```
ii = tuple(x[0] for x in i)
c.execute("foo bar blub where p.policy_id in (%s,%s,%s)", ii) 
```

请注意，我还包括有关如何正确访问 MySQLdb 游标的信息。这不是通过字符串格式完成的，而是通过`data`参数 of`cursor.execute()`来正确转义数据。

# wpf - 水平滚动条未出现在 DataGrid 中

> ID：10550546
> 
> 赞同：2
> 
> 时间：2012-05-11T11:32:38.423
> 
> 标签：wpf, datagrid, scrollbar

我的 DataGrid 出现在可视范围之外的数据。我在 StackOverflow 上查看了几个类似的问题，但似乎都没有解决我的问题。我无法弄清楚我做错了什么。这就是我的 xaml 的样子：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="50"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>        
    <TextBlock HorizontalAlignment="Left" Foreground="{DynamicResource TitleFontColor}" 
     TextWrapping="Wrap" Text="{Binding WindowTitle}" VerticalAlignment="Center" 
     Margin="10,10,0,10" FontSize="18.667" FontFamily="Segoe UI" />
    <Border  Background="{DynamicResource pnlworkarea}" 
      Grid.Row="1" CornerRadius="2" BorderThickness="1">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="65"/>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Border BorderThickness="1" 
         Background="{DynamicResource Brush_HeaderNew}" 
         BorderBrush="{DynamicResource pnlworkareastroke}" 
         CornerRadius="2" Margin="5">
        <Grid Margin="0">
               <ListBox ItemsSource="{Binding ViewMenuItems}" SelectedItem="{Binding Viewselected}" 
                VerticalAlignment="Center" Style="{DynamicResource Content_Header_ListBoxStyle}" 
        ItemTemplate="{DynamicResource Header_DataTemplate}" 
        ItemContainerStyle="{DynamicResource ContentHeader_ListBoxItemStyle}"               
        ItemsPanel="{DynamicResource Header_ItemsPanelTemplate}" HorizontalAlignment="Left"/>                                   
    </Grid>
    </Border>
    <Grid Grid.Row="1" Margin="5">
            <StackPanel HorizontalAlignment="Left" Orientation="Horizontal" VerticalAlignment="Top" Margin="10,0,0,0">
                     <ContentControl Focusable="False" Content="ContentControl"  
        Background="{DynamicResource Brush_VectorIcon}" 
       Template="{DynamicResource vector_Summary}" 
       Height="16" Margin="0,5,0,0"/>
        <TextBlock TextWrapping="Wrap" Text="{Binding SearchDisplayMessage}" Margin="5,3,0,0" VerticalAlignment="Center"/>
            </StackPanel>
        </Grid>
        <Grid Grid.Row="2" Margin="5">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <DataGrid  x:Name="dataGrid"
                    commands:ControlEvents.GridViewSelectionChangedEventCommand="{Binding SelectionItemsChangeCommand}"
                    SelectionMode="Single"
                    AutoGenerateColumns="True"                      
                    Margin="0,5" Grid.Row="1" IsReadOnly="True"
                    ItemsSource="{Binding GridItem, Mode=TwoWay}"  SelectedItem="{Binding SelectedItem}"
                    AlternatingRowBackground="#FFF5F4F8" Background="White" Grid.ColumnSpan="2"
                    ScrollViewer.CanContentScroll="True" 
                    ScrollViewer.HorizontalScrollBarVisibility="Auto" 
                    ScrollViewer.VerticalScrollBarVisibility="Auto">
                    <i:Interaction.Behaviors>
                        <Behaviors:SelectorDoubleClickCommandBehavior Command="{Binding GridDoubleclickcommand}"/>
                    </i:Interaction.Behaviors>

                </DataGrid>
            </Grid>

        </Grid>

    </Border>

</Grid> 
```

只是要补充一点，这里的 DataGrid 不是我正在使用的实际 DataGrid。我的自定义 DataGrid 是从 DataGrid 派生的。但我也用普通的 DataGrid 试过这个，但似乎也不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-04-27T06:53:28.770

我有一个类似的问题，水平滚动条没有显示。我有一列宽度为“*”。一旦我删除它，滚动条就会出现。我想如果您将宽度设置为固定，它也会出现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T19:06:30.480

您的高度为 Auto

```
<Grid Grid.Row="2" Margin="5">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <DataGrid  x:Name="dataGrid"
                    SelectionMode="Single"
                    AutoGenerateColumns="True"                      
                    Margin="0,5" Grid.Row="1" IsReadOnly="True"
                    ItemsSource="{Binding GridItem, Mode=TwoWay}"  SelectedItem="{Binding SelectedItem}"
                    AlternatingRowBackground="#FFF5F4F8" Background="White" Grid.ColumnSpan="2"
                    ScrollViewer.CanContentScroll="True" 
                    ScrollViewer.HorizontalScrollBarVisibility="Auto" 
                    ScrollViewer.VerticalScrollBarVisibility="Auto">
                </DataGrid>
            </Grid> 
```

改成

```
<DataGrid Grid.Row="2"  x:Name="dataGrid"
                    SelectionMode="Single"
                    AutoGenerateColumns="True"                      
                    Margin="0,5" Grid.Row="1" IsReadOnly="True"
                    ItemsSource="{Binding GridItem, Mode=TwoWay}"  SelectedItem="{Binding SelectedItem}"
                    AlternatingRowBackground="#FFF5F4F8" Background="White" Grid.ColumnSpan="2"
                    ScrollViewer.CanContentScroll="True" 
                    ScrollViewer.HorizontalScrollBarVisibility="Auto" 
                    ScrollViewer.VerticalScrollBarVisibility="Auto">
                </DataGrid> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-12T18:43:12.873

这里有几件事你应该记住分配宽度属性和数据网格视图。定义您的列，将最后一列的宽度设为自动，并分配一些 minWidth。

```
 <DataGrid  VerticalAlignment="Top" Margin="0,0,0,0" Height="221" HorizontalAlignment="Left" Width="234"
                DataContext="{DynamicResource ItemCollectionViewSource}" 
                        ItemsSource="{Binding}" AutoGenerateColumns="False" IsReadOnly="True" 
                        ScrollViewer.CanContentScroll="True" 
                        ScrollViewer.VerticalScrollBarVisibility="Auto"
                        ScrollViewer.HorizontalScrollBarVisibility="Auto" >
                <DataGrid.Columns>
                    <DataGridTextColumn Binding="{Binding ID}" Header="ID"/>
                    <DataGridTextColumn Binding="{Binding URL}" Header="URL" Width="Auto" MinWidth="186"/>
                </DataGrid.Columns>
            </DataGrid> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T12:16:47.217

我猜不出你做错了什么，因为你的代码的缩放最多的版本正在向我显示水平滚动条......

```
<UserControl.Resources>
    <x:ArrayExtension x:Key="MyArray" Type="{x:Type TextBlock}">
        <TextBlock Name="Test1" Text="12345678"
                   DataContext="12345678" Tag="12345689"/>
        <TextBlock Name="Test2" Text="12345678"
                   DataContext="12345678" Tag="12345689"/>
        <TextBlock Name="Test1" Text="12345678"
                   DataContext="12345678" Tag="12345689"/>
        <TextBlock Name="Test2" Text="12345678"
                   DataContext="12345678" Tag="12345689"/>
        <TextBlock Name="Test1" Text="12345678"
                   DataContext="12345678" Tag="12345689"/>
        <TextBlock Name="Test2" Text="12345678"
                   DataContext="12345678" Tag="12345689"/>
        <TextBlock Name="Test1" Text="12345678"
                   DataContext="12345678" Tag="12345689"/>
        <TextBlock Name="Test2" Text="12345678"
                   DataContext="12345678" Tag="12345689"/>
        <TextBlock Name="Test1" Text="12345678"
                   DataContext="12345678" Tag="12345689"/>
        <TextBlock Name="Test2" Text="12345678"
                   DataContext="12345678" Tag="12345689"/>
        <TextBlock Name="Test1" Text="12345678"
                   DataContext="12345678" Tag="12345689"/>
        <TextBlock Name="Test2" Text="12345678"
                   DataContext="12345678" Tag="12345689"/>            
    </x:ArrayExtension>
</UserControl.Resources>
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="50"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <TextBlock HorizontalAlignment="Left"
               TextWrapping="Wrap"
               Text="My Text Clock"
               VerticalAlignment="Center" 
               Margin="10,10,0,10" FontSize="18.667"
               FontFamily="Segoe UI" />
    <Border Grid.Row="1" CornerRadius="2" BorderThickness="1">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="65"/>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <Border BorderThickness="1" 
                 CornerRadius="2" Margin="5">
                <Grid Margin="0">
                       <ListBox
                           ItemsSource="{Binding
                                ViewMenuItems}"                            
                           VerticalAlignment="Center"
                           HorizontalAlignment="Left"/>             
    </Grid>
    </Border>
    <Grid Grid.Row="1" Margin="5">
             <StackPanel HorizontalAlignment="Left"
                         Orientation="Horizontal"
                         VerticalAlignment="Top" Margin="10,0,0,0">
                    <ContentControl Focusable="False"
                                    Content="ContentControl"  
                                    Height="16" Margin="0,5,0,0"/>
                     <TextBlock TextWrapping="Wrap"
                                Text="DisplayHerePlz!"
                                Margin="5,3,0,0"
                                VerticalAlignment="Center"/>
              </StackPanel>
     </Grid>
         <Grid Grid.Row="2" Margin="5">
            <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
             <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="*"/>
             </Grid.ColumnDefinitions>
    <tk:DataGrid x:Name="dataGrid"
            SelectionMode="Single"
       AutoGenerateColumns="True"   
               Margin="0,5" Grid.Row="1"
            IsReadOnly="True"   
            ItemsSource="{StaticResource MyArray}"
            ScrollViewer.CanContentScroll="True" 
            ScrollViewer.HorizontalScrollBarVisibility="Auto" 
            ScrollViewer.VerticalScrollBarVisibility="Auto"
       AlternatingRowBackground="#FFF5F4F8" 
            Background="White"
            Grid.ColumnSpan="2">                        
      </tk:DataGrid>
    </Grid>
   </Grid>
  </Border>
</Grid> 
```

它可能是我省略的其他位，这可能导致水平宽度超出滚动视图......

# apache-flex - Flex - 如何在触发 FaultEvent 时获取传递给 RemoteObject 调用的参数？

> ID：10550548
> 
> 赞同：1
> 
> 时间：2012-05-11T11:32:43.463
> 
> 标签：apache-flex, parameters, remoteobject

我在循环中调用 RemoteObject 方法。此方法接收行 ID 作为删除数据库中行的参数。在一个循环中，可以同时进行很多调用。某些调用可能会触发 FaultEvent。如何检测触发 FaultEvent 的行 ID？

远程对象：

`<mx:RemoteObject id="myTableFactory" destination="myTableFactoryFactory"/>`

循环：

```
myTableFactory.addEventListener(FaultEvent.FAULT, faultFunction);
for each (var myTableRow:myTable in rowsToBeExcludedArray)
{
  myTableFactory.removeMyTableRow(myTableRow.id);
}

private function faultFunction(e:FaultEvent):void
{
  // The main question. How to get myTableRow.id that fired the FaultEvent
} 
```

谢谢。

卡洛斯·利马。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:51:30.190

您绝对应该阅读[AsyncToken](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/rpc/AsyncToken.html)。

RemoteObject 上的每个远程过程调用都将返回一个：

```
var token:AsyncToken = myTableFactory.removeMyTableRow(myTableRow.id); 
```

现在，您可以使用此令牌做两件事。

**添加响应者**

您可以为每个调用添加一个[响应](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/rpc/Responder.html)程序，这使您可以为每个调用拥有一个唯一的处理程序：

```
token.addResponder(new Responder(handleResult, handleFault)); 
```

在尝试此操作之前，请务必删除您的全局结果和故障处理程序。此外，我在`Responder`这里使用了默认类，但任何实现[IResponder](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/rpc/IResponder.html)的类都可以。

**捎带你的身份证**

您可以向令牌添加新属性，因为它是一个动态类。例如，`id`这里可能会派上用场：

```
token.removedId = myTableRow.id; 
```

甚至可能是整个班级：

```
token.removedRow = myTableRow; 
```

现在您可以在事件处理程序中找到这些值：

```
private function handleResult(event:ResultEvent):void {
    trace(event.token.removedId);
} 
```

同样的原则适用于`FaultEvent`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:34:35.357

如果您不喜欢捎带支持您的 AsyncToken 的想法（而且我并不特别认为有时不切实际），您可以很容易地检索原始请求的详细信息。

当遇到 BlazeDS 的 DuplicateSessionDetected 错误时，我使用此技术来使客户端 ID 为空并重新发出原始请求。

```
private function handleFault(event:FaultEvent):void
{
    const remoteObject:RemoteObject = (event.target as RemoteObject);
    const message:RemotingMessage = (event.token.message as RemotingMessage);

    message.clientId = null;
    remoteObject.getOperation(message.operation)
        .send.apply(null, message.body);
} 
```

希望有帮助！

# c# - 需要在列表框中的另一页中显示一个页面的内容吗？

> ID：10550550
> 
> 赞同：0
> 
> 时间：2012-05-11T11:32:50.380
> 
> 标签：c#, windows-phone-7

我想使用独立存储创建一个 windows phone 7 应用程序。我创建了两个名为 MainPage.xaml 和 Page1.xaml 的页面。在 MainPage.xaml 中，我创建了一个名为 button1 的按钮和一个名为 textBox1 的文本框。在 Page1.xaml 中，我创建了一个名为 listBox1 的列表框。如果我在 textBox1 中写了一些东西，当我点击 button1（在 MainPage.xaml 中）时，我需要 listBox1 来显示所有内容，无论我写到 textBox1 中，我还需要保存 listBox1 中的内容到隔离存储。任何人都可以帮忙吗？？？...我已经研究了很多关于这个的地方。提前感谢您的辛勤工作！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T07:54:07.380

在 MainPage.xaml.cs 中，你可以这样写：

```
Private void button1_click()
{
    NavigationService.Navigate(new Uri("/Page1.xaml?content="+textBox1.Text,UriKind.Relative));
} 
```

在 Page1.xaml.cs 中你可以这样写：

```
using System.Collections.Generic;
using Microsoft.Phone.Controls;
using System.IO;
using System.IO.IsolatedStorage;

namespace PhoneApp1
{
public partial class Page1 : PhoneApplicationPage
{
    public static List<string> list = new List<string>();
    public Page1()
    {
        InitializeComponent();
        listBox1.ItemsSource = list;
        IsolatedStorageFile storge = IsolatedStorageFile.GetUserStoreForApplication();
        StreamWriter writer = new StreamWriter(new IsolatedStorageFileStream("/list.txt", FileMode.OpenOrCreate, storge));
        for (int i = 0; i < list.Count; i++)
        {
            writer.WriteLine(list[i]);
        }   
        writer.Close();
    }

    protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        if (NavigationContext.QueryString.ContainsKey("content"))
        {
            list.Add(NavigationContext.QueryString["content"]);
        }
        base.OnNavigatedTo(e);
    }
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:53:52.380

在 Mainpage.xaml

私人无效 button1_click()

{

```
 string message = textbox1.text;

 NavigationService.Navigate(new Uri(String.format("/Page1.xaml?value1 = {0}",message), UriKind.Relative));} 
```

在 Page1.Xaml

受保护的覆盖无效 OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)

{

```
 base.OnNavigatedTo(e);

 string newparameter = "";

 this.NavigationContext.QueryString.TryGetValue("value1", out newparameter);

 listbox1.items.add(newparameter.ToString());} 
```

然后获取新参数字符串并将其保存在 isostore 中。任何帮助进一步问我。

# java - Akka become() 和 getSender() 不兼容

> ID：10550551
> 
> 赞同：0
> 
> 时间：2012-05-11T11:32:57.703
> 
> 标签：java, concurrency, actor, akka

我在 Java API 中有一个与 Akka 2.0.1 相关的问题。我有以下情况：

Actor A：接收来自 UI 的请求。然后它将执行以下操作。

1.  等待来自 UI 的消息
2.  向 Actor B 发送消息，以检索数据
3.  当它被检索到时，成为一个正在处理来自参与者 B 的答案的参与者。

演员乙：

1.  等待演员 A 的消息。
2.  检索数据
3.  来电`getSender().tell(xxx)`；

这不起作用，Actor A 将不会收到答案。但是，如果演员 B 在系统中使用全局 actorRef 到演员 A，那么在我的情况下`zzz.eventCaller.tell(xxx)`它将起作用。

是我错过了一些基本的东西，还是这是预期的行为或错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T10:21:23.563

由于您没有提供实际代码，因此您有点让我猜测您的问题可能是什么。除非您提供，否则 Akka Java API 无法跟踪发件人：

```
recipient.tell(message, getSelf()); 
```

我*希望*这会有所帮助。

# file-upload - 如何使用 org.apache.struts.upload.FormFile[] 在 struts 1.3 中上传多个文件

> ID：10550557
> 
> 赞同：0
> 
> 时间：2012-05-11T11:33:21.780
> 
> 标签：file-upload, struts, struts-1, multifile-uploader

在我的表单中，最终用户有机会动态添加多个文件。所以我在 javascript 的帮助下完成了这项工作。但问题是我正在使用 dynavalidator 表单，在这个 dynavalidator 表单中，我提到了 org.apache.struts.upload.FormFile[] 数组。

我该怎么做..请帮帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:41:13.817

使用 dynavalidator 表单是不可能的 像这样使用动作表单 Formfile 你可以添加多少文件 你想要那么多

私有列表 formFiles = new ArrayList();

```
public List<FormFile> getUploads() {
    return this.formFiles;
}

public void setUploads(int iIndex, FormFile formFile) {
    this.formFiles.add(formFile);
} 
```

# nginx - Nginx TCP (WebSockets) 超时 / Keepalive 配置

> ID：10550558
> 
> 赞同：33
> 
> 时间：2012-05-11T11:33:29.503
> 
> 标签：nginx, tcp, websocket

我在用`nginx version: nginx/1.0.12`

我的 nginx.conf 看起来像这样：

```
#user  nobody;
worker_processes  1;  

error_log  logs/error.log;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

#pid        logs/nginx.pid;

events {
    worker_connections  1024;
}

tcp {

     upstream websockets {
      ## Play! WS location
       server 127.0.0.1:9000;
       check interval=3000 rise=2 fall=5 timeout=1000;
     }    

    server {
        listen 80; 
        listen 8000;
        server_name socket.domain.com;

        tcp_nodelay on; 
        proxy_pass websockets;
        proxy_send_timeout 300;

    }   

     # virtual hosting
     #include /usr/local/nginx/vhosts/*;
} 
```

我的应用程序似乎每 75 秒（左右）丢弃一次 websocket 连接，我认为这是因为 Nginx 的默认 keepalive 配置。如何增加超时？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2014-07-24T19:49:47.293

I tried the `websocket_*_timeout` which are not supported on nginx 1.7.1 (it gives: *unknown directive*).

However setting a high `proxy_*_timeout` works:

```
proxy_connect_timeout 7d;
proxy_send_timeout 7d;
proxy_read_timeout 7d; 
```

`7d` means 7 days, see [official nginx configuration reference](http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_connect_timeout)

Additionally you probably only have to set the `proxy_read_timeout 7d;` as that's the one that usually matter unless the server behind the proxy is very slow.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-01T23:22:54.677

这些聪明的家伙有同样的问题并解决了它....

[NGINX 反向代理 websocket 并启用 SSL (wss://)？](https://stackoverflow.com/questions/12102110/nginx-to-reverse-proxy-websockets-and-enable-ssl-wss)

此外，在该模块的原始存储库中，还有来自模块作者的更多说明。

[https://github.com/yaoweibin/nginx_tcp_proxy_module/issues/28](https://github.com/yaoweibin/nginx_tcp_proxy_module/issues/28)

它基本上相当于在 server 指令中添加 websocket_*_timeout 指令：

```
 server {

     ....

     websocket_connect_timeout ######;
     websocket_send_timeout #####;
     websocket_read_timeout #####;

     ....

         } 
```

# c# - C#获取字符串用换行符替换NULL

> ID：10550559
> 
> 赞同：1
> 
> 时间：2012-05-11T11:33:34.280
> 
> 标签：c#, string, unicode, bytearray

我有一个包含 unicode 字符串列表的字节数组。每个字符串都以`0x00 0x00`. `Encoding.Unicode.GetString`有效，但它返回给我一个连接的字符串。我想有换行符。

一种可能的解决方案是用换行符替换`0x00 0x00`序列，然后使用上述函数将字节数组转换为字符串，但我不知道该怎么做。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T11:35:49.000

有什么理由不先将其转换为字符串然后使用正常的字符串替换？

```
var text = Encoding.Unicode.GetString(binary).Replace("\u0000", "\r\n"); 
```

编辑：如前所述，您可能希望用于`Environment.NewLine`获取当前系统的行分隔符。这取决于您的上下文。

# html - 在 Lamp 上运行网站时出现 IE、HTML 问题

> ID：10550562
> 
> 赞同：1
> 
> 时间：2012-05-11T11:33:57.273
> 
> 标签：html, css

从 windows 服务器和 apache linux 服务器解析 HTML / CSS 有什么区别吗？

问题是，当我在 Windows（wamp）服务器上的开发环境中运行我的网站时，我的网站在 Internet Explorer 上运行良好（应该如此）。

当我在 IE 中打开站点时，同样的事情不起作用，而它部署在 linux 环境中。

到目前为止，我已经检查过没有任何重大区别，我怀疑 css 文件有一些解析错误，也许 linux 有一些大问题。

[http://jigsaw.w3.org/css-validator/validator?uri=demo.behoover.com%3A8001&profile=css3&usermedium=all&warning=1&vextwarning=&lang=en](http://jigsaw.w3.org/css-validator/validator?uri=demo.behoover.com%3A8001&profile=css3&usermedium=all&warning=1&vextwarning=&lang=en)

[http://demo.behoover.com:8001](http://demo.behoover.com:8001)

如果你在 IE 上运行它，你会注意到，字体中断，页眉有一个难看的边距，表单对齐不正确。

表单对齐是可修复的，但其他 2 ，我不知道

* * *

好的，我只是看了一点，发现了这个，当我尝试从 linux 服务器访问该站点时，它显示 DocumentMode 为 IE7

![在此处输入图像描述](../Images/68bb9617f5d5919b07d6906c5892341f.png)

但从我的本地服务器，它默认显示我

```
DocumentMode IE8 standards 
```

顺便说一句，我在 IE8 和 IE7 上运行它，但不是更大

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:59:27.880

基于平台提供的内容应该没有区别（除非为此目的有特定的逻辑）。但是，您要访问的站点的位置可能会在 IE 中触发不同的兼容性视图策略。

根据站点的托管位置（即本地计算机与 Intranet 或 Internet），可能会应用不同的策略，这将准确给出所描述的行为。

![截屏](../Images/1d8bbf68c952424c96e2c1a0e7a11a8f.png)

值得一提的是，当我在 Chrome 和 IE 9 中打开该网站时，它看起来还不错。IE 9 运行正常（正确模式，未触发兼容性）。IE 8（仿真）看起来没有那么精致，但页面布局是正确的，并且没有触发兼容模式。但是，无论我使用什么模式，IE 7 都会出现字体/对齐问题，所以这可能是更大的问题。

# jquery-mobile - 如何在 JQM 网站中水平居中字段集

> ID：10550563
> 
> 赞同：1
> 
> 时间：2012-05-11T11:34:01.663
> 
> 标签：jquery-mobile

我做了一个非常基本的页面，我试图将字段集水平居中。我试着把它包在里面`<centre>`，但没有用。我应该怎么办？

这是我的代码

```
<div data-role="content">   
    <div data-role="fieldcontain">
                //Its left align, how do i centre align
                <fieldset data-role="controlgroup" data-type="horizontal">
                        <input type="radio" name="radio-choice-b" id="radio-choice-c" value="on" checked="checked" />
                        <label for="radio-choice-c">Recent</label>
                        <input type="radio" name="radio-choice-b" id="radio-choice-d" value="off" />
                        <label for="radio-choice-d">Upcoming</label>
                </fieldset>
    </div>        
<ul data-role="listview">   
       //my list                       
    </ul>   
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:45:13.337

我发现对我有用的技巧是将字段集包装在另一个 div 中，并将以下 CSS 放在该 div 内联或 CSS 文件中。

```
display: table;
margin: 0 auto; 
```

所以你最终会得到类似的东西

```
<div class='fieldset-center-wrapper'>
  <fieldset>
    your stuff here
  </fieldset>
</div> 
```

# python - 图像作为 python / Tkinter 中的超链接

> ID：10550567
> 
> 赞同：0
> 
> 时间：2012-05-11T11:34:25.413
> 
> 标签：python, hyperlink, tkinter, wiki

我想答案是否定的，但我不得不问...我在 python/tkinter 中写了一个 wiki，其中超链接由 tkHyperlinkManager 管理（http://effbot.org/zone/tkinter-text-hyperlink.htm）在文本小部件中。一切都很完美，但我也想使用可点击的图像 - 有可能吗？我看到超链接通过标签起作用，但我找不到将标签添加到图像的方法

亚历山德罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T20:14:13.737

tkHyperLinkManager 不支持它，但它非常简单，文本小部件中已经内置了这些功能。您需要做的就是用您的图像创建一个标签，嵌入标签，然后为标签添加绑定。

例如：

```
import Tkinter as tk
...
image_link = tk.Label(text_widget, image=my_image, cursor="left_ptr")
image_link.bind("<1>", do_something)
text_widget.window_create("insert", window=image_link) 
```

# ruby-on-rails-3 - Rails 3 重构 ActiveRecord 查询

> ID：10550568
> 
> 赞同：0
> 
> 时间：2012-05-11T11:34:43.440
> 
> 标签：ruby-on-rails-3, activerecord, refactoring

我有以下查询，它查找属于当前登录用户的组织，然后找到属于该组织的任何事件。

```
def update
    @organisation = current_user.organisations.find(params[:organisation_id])
    @event = @organisation.events.find(params[:id])
    if @event.update_attributes(params[:event])
        # Handle a successful update.
        flash[:success] = "Event updated"
        redirect_to organisation_event_path
    else
        render 'edit'
    end
end 
```

目前这会导致对数据库的 2 次查询，虽然这不一定是问题，但我觉得应该能够在一次查询中实现。这是可能的还是需要2？如果是前者，我应该如何实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:02:27.510

可以通过这种方式重构查询：

```
def update
    @event = Event.joins(:organisations).where("id = ? AND organisation_id = ? AND user_id = ?", params[:id], params[:organisation_id], current_user.id).first()
    if @event.update_attributes(params[:event])
        # Handle a successful update.
        flash[:success] = "Event updated"
        redirect_to organisation_event_path
    else
        render 'edit'
    end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T11:47:19.417

它应该工作：

```
current_user.organisations.joins(:events).where(["id = ? AND events.id = ?", params[:organisation_id], params[:id]]).first() 
```

# c# - 如何正确定义模型到 ViewModel 的关系？

> ID：10550571
> 
> 赞同：4
> 
> 时间：2012-05-11T11:34:53.767
> 
> 标签：c#, wpf, architecture, mvvm

我试图了解模型到 ViewModel 的关系，但我一直遇到同样的问题。假设我们有一个只有一个字段的“Person”类：

```
public class Person
{
   public string Name;
} 
```

在下一阶段，我的 XAML 艺术家创建了一个用户控件来呈现一个人，他根据 MVVM 的实践需要将他的视图与 VMPerson（视图模型人）相关联，所以现在我添加另一个类：

```
public class VMPerson : INotifyPropertyChange
{
   private Person person;

   public VMPerson():this(new Person()){}

   public VMPerson(Person person)
   {
      this.person = person;
   }

   public Name
   { get { return person.name; }
   { set { person.name = value; PropertyChange("Name"); }
} 
```

所以现在我几乎所有的东西都设置好了。但是我的 VM 类与我的模型类的变化有什么关系呢？如果我添加 INotifyPropertyChanged 并在模型中为“名称”添加一个属性，我最终会得到与我的 ViewModel 类非常相似的东西，这是一个我不需要的额外层。有没有办法让我的模型类保持原样，并且仍然会在视图模型类中得到通知？如果除了使用 INotifyPropertyChanged 机制或将在模型中实现的任何类似方法之外别无他法，为什么我需要 VM？只是为了将几个“模型”类聚合到一个将提供给视图的类的情况吗？

我认为我的理解中一定遗漏了一些东西，因为根据我的描述，在我看来，在使用 View 代码隐藏作为控制器时，模型到视图模式会比 MVVM 更好的抽象，但我当然不确定. 有人可以向我解释我错过了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T11:43:44.587

## 将 viewmodel 代码放入模型中并不是最好的主意

确实，在许多情况下，视图模型开始时看起来像是额外的代码层，并没有真正增加任何价值，但关键是它们可以*进化*。

VM 的作用是*为视图提供便利*——`INotifyPropertyChanged`这就是一种便利，而模型的作用是*封装您的业务逻辑*。随着代码功能的增长，将变得越来越丰富；在某些时候，它的代码量甚至可能比您的模型大得多。所以区分是为了方便和业务逻辑部分很好地分开，这对代码的可维护性有很好的影响。

## 将视图模型代码放入视图不是最好的主意

这里的原因是不同的：如果您这样做，然后需要将视图模型与另一种类型的视图一起使用，您还必须将所有逻辑复制到其他视图的代码隐藏中。重复是不好的；干是好的。

考虑到 MVVM 的一个非常重要的特性是它提供了可测试性，并且可测试性必然意味着至少两种类型的视图（真实视图和模拟视图），这种方法的必要性变得显而易见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T11:59:42.797

视图模型的一个目的是从模型中获取数据，以必须可视化的方式处理它。

例如，在您的模型中，您可能拥有 DateOfBirth 信息，并且您想要可视化实际年龄。

在这种情况下，您应该在 ViewModel 中进行处理（将 DateOfBirth 转换为实际年龄，例如 DateTime.Now.Year - DateOfBirth.Year）。

在您的特定情况下，ViewModel 只是模型数据的包装器（不处理），显然不需要 Viewmodel。

为了在 ViewModel 中获得模型更改（对于不需要在 VM 中处理的属性），我通常也在模型中实现 INotifyPropertyChanged。这避免了 ViewModel 中的许多包装器属性。

在我的 ViewModel 中，我会有一些想法

```
_model.PropertyChanged += PropertyChangedEventHandler(OnPropertyChangedModel);

void OnPropertyChangedModel(object sender, System.ComponentModel.PropertyChangedEventArgs e)
{
    OnPropertyChanged(e.PropertyName);
} 
```

请注意，在这种情况下，模型属性会直接发送到 View（在 ViewModel 中不进行处理）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T12:36:23.870

我看它的方式如下： - ViewModel，这在某种程度上就像旧 MVP 中的 Presenter，它将包含和加入各种业务功能（如使用 IDealService 和 IStaticDataService）。

对我来说，模型非常接近 DataModel，它只是代表数据。

如果 VM 有太多与数据相关的位，我通常将它们移动到模型中并使用 VM 中的实例。

即你可以有：

```
public class VMPerson : INotifyPropertyChange
{
   public Person PersonItem {get; set;}

   public VMPerson()
   {
      PersonItem = new Person();
   }
} 
```

您仍然可以通过以下方式获取 Person 的姓名： `{Binding PersonItem.Name}`

我同意如果您的原始 Person 类不继承 INPC，将很难使其成为 Notifiable。

# iphone - 为什么在使用 -Wall 标志时编译指示会导致警告以及应该采取哪些措施来消除警告

> ID：10550579
> 
> 赞同：0
> 
> 时间：2012-05-11T11:35:16.487
> 
> 标签：iphone, objective-c

为什么在使用 -Wall 标志时编译指示会导致警告以及应该采取哪些措施来消除警告。

苹果到处都在使用 pragma。

我应该怎么做 - 如果我不想看到警告，我应该完全停止使用它们还是应该切换 -Wall 标志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:38:35.707

在这里阅读他们

[http://www.informit.com/articles/article.aspx?p=1829415&seqNum=14](http://www.informit.com/articles/article.aspx?p=1829415&seqNum=14)

# wpf - WPF限制datagridviewcheckboxcolumn中检查的行数

> ID：10550581
> 
> 赞同：0
> 
> 时间：2012-05-11T11:35:26.093
> 
> 标签：wpf, binding, datagrid, checkbox, multibinding

在 DataGrid 中，我显示包含属性 IsEnabled 的项目列表，该属性由 datagridviewcheckboxcolumn 表示。我想将同时检查的复选框数量限制为 5 个。

我怎么能那样做？

编辑：

我现在正在做的是使用多重绑定：转换器接受项目对象的“IsEnabled”属性和项目列表本身作为输入值。

```
<DataGrid ItemsSource="{Binding MyItems}" AutoGenerateColumns="false" 
                  CanUserAddRows="False" CanUserDeleteRows="False" CanUserReorderColumns="False" CanUserSortColumns="false">
        <DataGrid.Columns>
          <DataGridCheckBoxColumn Header="" Binding="{Binding Path=IsEnabled, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
            <DataGridCheckBoxColumn.CellStyle>
              <Style>
                <Setter Property="CheckBox.IsEnabled" >
                  <Setter.Value>
                    <MultiBinding Converter="{Utilities:MyConverter}">
                      <Binding Path="IsEnabled" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged"/>
                      <Binding Path="DataContext.MyItems" RelativeSource="{RelativeSource AncestorType=UserControl}"/>
                    </MultiBinding>
                  </Setter.Value>
                </Setter>
             </Style>
            </DataGridCheckBoxColumn.CellStyle>
          </DataGridCheckBoxColumn>
... 
```

MyConverter 中的转换函数如下所示：

```
public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
{
  var val1 = (bool)values[0];
  int numSelected = 0;

  if (values[1] != null && values[1] is ObservableCollection<MyTestItem>)
  {
    var list = (ObservableCollectionBase<MyTestItem>)values[1];
    foreach (MyTestItem mti in list)
    {
      if (mti.IsEnabled)
        numSelected++;
    }
  }
  else
  {
    return false;
  }

 return val1 ? val1 : (numSelected < 5);
} 
```

这可以按预期工作（不能同时选择超过 5 个复选框，所有其他复选框都被禁用），但我不断收到如下警告：

```
System.Windows.Data Warning: 4 : Cannot find source for binding with reference 'RelativeSource FindAncestor, AncestorType='System.Windows.Controls.UserControl', AncestorLevel='1''. BindingExpression:Path=DataContext.MyItems; DataItem=null; target element is 'DataGridCell' (Name=''); target property is 'IsEnabled' (type 'Boolean') 
```

我还尝试设置数据网格名称并在绑定中使用“ElementName”，但我不断收到相同的警告，尽管行为是正确的。

为什么我会收到这些警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:38:05.400

在每个项目的 ctr 中传递集合。如果当前集合有 5 个 IsEnabled = true，则在 IsEnabled 属性上拒绝 True。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:44:54.720

将事件处理程序添加到复选框选中事件。检查底层数据源的记录以查看已检查的记录数，如果超过 5 条记录，则取消已检查的事件。

# nhibernate - NHibernate FlushMode.Commit 自动保存脏对象

> ID：10550588
> 
> 赞同：0
> 
> 时间：2012-05-11T11:35:45.760
> 
> 标签：nhibernate, commit, flush, autosave

我似乎在这里错过了一些东西：

我有一个应用程序，它使用每个应用程序方法的会话并使用延迟加载。

我已经设置了会话 FlushMode.Commit 并且似乎 NHibernate 仍然自动将我的脏对象保存到数据库（SQLCe），尽管我从未开始事务并提交它。

谁能告诉我我做错了什么？

我的一些代码：

```
 public Repository(ISessionProvider sessionProvider)
    {
        _sessionProvider = sessionProvider;
        _session = _sessionProvider.OpenSession();
        _session.FlushMode = FlushMode.Commit;
    }

    public IList<T> GetAll<T>() where T : class
    {
        var criteria = _session.CreateCriteria<T>();
        var list = criteria.List<T>();
        return list;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:33:21.617

当我在 UI 中创建脏对象时，似乎有另一个线程正在刷新同一个会话，我想这只是我的应用程序中的一个错误。

现在工作得很好，因为我需要 Lazy 功能，所以每个应用程序仍然使用一个会话。

# unit-testing - node.js jasmin-node 脚本一次运行一个规范

> ID：10550589
> 
> 赞同：0
> 
> 时间：2012-05-11T11:35:48.780
> 
> 标签：unit-testing, node.js, jasmine

我在一个目录中有一堆 jasmine-node 规范。当我运行 jasmine-node 并假设特定规范失败时，我没有收到有关特定规范失败的消息。内部错误确实浮出水面，但触发它的规范并未显示在堆栈跟踪中。

谁能指出解决这个问题的方法？是否有一个脚本可以一次按顺序运行一个规范并在任何单个规范失败时失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T03:39:00.250

你试过了吗

```
jasmine-node --verbose 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-22T08:56:49.683

试试[humile](https://github.com/megahertz/humile)，它是 Node.js 的替代 Jasmine 测试运行器。它显示未捕获异常的附加信息。

# android - 如何使用 AsyncTask 将存储为字符串 url 的图像设置为 android 中的图像视图

> ID：10550591
> 
> 赞同：0
> 
> 时间：2012-05-11T11:35:50.907
> 
> 标签：android, arraylist, imageview

我已将图像视图布局放在 xml 布局文件中

```
<ImageView 
  android:id="@+id/imageData"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:layout_marginLeft="10sp"
  android:layout_marginTop="10sp"
/> 
```

并在我的代码中设置为..

```
ImageView imageData = (ImageView) findViewById(R.id.imageview); 
```

现在这个 imageData 应该在活动启动时保存图像..这是我的代码......</p>

```
public class TestImageClass extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.imagetable);
        ImageView mChart = (ImageView) findViewById(R.id.imageview);
        String testurl = "http://....some image name....jpg";
        mChart.setTag(testurl);
        new DownloadImagesTask().execute(mChart);

    }   
    public class DownloadImagesTask extends AsyncTask<ImageView, Void, Bitmap> {

        ImageView imageView = null;

        @Override
        protected Bitmap doInBackground(ImageView... imageViews) {
            this.imageView = imageViews[0];
            return download_Image((String)imageView.getTag());
        }

        @Override
        protected void onPostExecute(Bitmap result) {
            imageView.setImageBitmap(result);
        }

        private Bitmap download_Image(String url) {

            Bitmap bm = null;
            try {
                Log.e("inside", "download image.....");
                URL aURL = new URL(url);
                URLConnection conn = aURL.openConnection();
                conn.connect();
                InputStream is = conn.getInputStream();
                BufferedInputStream bis = new BufferedInputStream(is);
                bm = BitmapFactory.decodeStream(bis);
                bis.close();
                is.close();
                Log.e("going out of", "download image.....");
            } catch (IOException e) {
                Log.e("Hub","Error getting the image from server : " + e.getMessage().toString());
            } 

            return bm;          
}
}
} 
```

那么现在如何将这个位图对象“bm”设置为我的 ImageView？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:43:18.670

尝试这个，

```
Drawable d;
        try {
            InputStream is = (InputStream) new URL("http://trivetts.iconnectgroup.com/Uploads/Pictures/noname.jpg").getContent();
            d = Drawable.createFromStream(is, "src name");
            imageView.setBackgroundDrawable(d);
        } catch (Exception e) {

        } 
```

# c# - 获取页面源以获取 ID 或标签名称的可能方法

> ID：10550594
> 
> 赞同：1
> 
> 时间：2012-05-11T11:36:02.383
> 
> 标签：c#, html, forms

我一直在使用[WebBrowser.Document](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.document.aspx)来获取某些元素，例如 id、标签或 div……但似乎 WebBrowser 处理许多 URL 地址似乎太慢了……知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:40:19.037

您可以尝试包含一些开源浏览器并将它们包含在代码中

[http://duckwebbrowser.codeplex.com/](http://duckwebbrowser.codeplex.com/)

[http://xplora.codeplex.com/](http://xplora.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:12:20.617

> 我一直在使用 WebBrowser.Document 来获取某些元素，例如 id、tag 或 div。

从您的问题的标题和内容来看，从这个陈述中不清楚您需要使用一个获取、解析和呈现 HTML 的控件。

听起来你只是为了获取和解析你的 HTML。如果这是真的，您可能应该使用[Html Agility Pack](http://htmlagilitypack.codeplex.com/)。HAP 可以从 URL 中获取 HTML，然后对其进行解析。然后，您可以使用 linq 或 XPath 或遍历方法来获取您的标签和 div。

有很多关于如何使用 hap 的文章，例如[How to use HTML Agility pack](https://stackoverflow.com/questions/846994/how-to-use-html-agility-pack)，其中包括示例和链接。

其中一个[链接](http://www.fairnet.com/post/2010/08/28/Html-screen-scraping-with-HtmlAgilityPack-Library.aspx)包括 Farooq Kaiser 的这个示例，它获取文档中的所有链接并将其添加到“列表”

```
HtmlDocument doc = new HtmlDocument();
doc.Load(url);
HtmlNode root = doc.DocumentNode;

List<string> anchorTags = new List<string>();

foreach (HtmlNode link in root.SelectNodes("//a"))
{
    string att = link.OuterHtml;
    anchorTags.Add(att);
} 
```

# java - 以字符序列动态填充数据

> ID：10550604
> 
> 赞同：0
> 
> 时间：2012-05-11T11:37:12.033
> 
> 标签：java, android, charsequence

我有一个要动态填充数据的字符序列。当我对值进行硬编码时，它的工作正常，否则不会

**这个正在工作**

```
private void getDir(String dirPath){

     File f = new File(dirPath);
     File[] files = f.listFiles(); 
         final CharSequence[] items = {files[0].getPath(), files[1].getPath()};
} 
```

**这是一个运行时异常**

```
private void getDir(String dirPath){

     File f = new File(dirPath);
     File[] files = f.listFiles(); 
         CharSequence[] items;
         items[0]=files[0].getPath();
     items[1]=files[1].getPath();
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:40:03.070

您忘记 `CharSequence[] items;`在第二次实现中进行初始化。

你可以试试`CharSequence[] items = new CharSequence[2];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T11:47:43.213

您需要创建 items 数组并指定其大小。

尝试类似：

```
private void getDir(String dirPath){

    File f = new File(dirPath);
    File[] files = f.listFiles();
    CharSequence[] items = new CharSequence[files.length];
    for (int i=0; i< files.length; i++)
        items[i]=files[i].getPath();
} 
```

# asp.net - 如何在 ASP NET 网页中的特定时间运行查询？

> ID：10550608
> 
> 赞同：0
> 
> 时间：2012-05-11T11:37:56.350
> 
> 标签：asp.net, triggers

我想知道，是否可以像触发器一样在特定时间（例如每天 0.00）运行查询以及如何执行。谢谢，橡树。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:42:33.307

如果当前没有人使用您的站点，它将在 20 分钟后进入休眠状态（进程被终止）。即使您设法连接到您的系统日期，您也无法保证一个活的进程来运行您的代码。

实现这一点的最佳方法是创建一个小型控制台应用程序，您可以在服务器上安排它（带有预定任务）。
确保执行此任务的用户有足够的权限执行此操作（作为批处理作业登录）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-11T12:32:54.870

你用 asp.net 标记了这个问题。所以我假设你需要一个网页来触发 SQL 查询。

以下是您的选择：

*   如果您希望一个 asp.net 页面自己完成这一切，您将需要使用 HTML 刷新或带有循环服务器端的 response.redirect。该循环将用作计时器（丑陋的代码）。另一边的 html 刷新效率非常低，但被 html 聊天广泛使用。
*   您可以为您的 asp.net 网站创建自定义构建的程序集。在组件内部使用计时器控件
*   您可以创建一个控制台应用程序，它将作为 Windows 服务运行。然后使用任务调度器运行
*   您可以使用 SQL Server 代理并创建一个将运行查询的作业。然后安排工作。这种方法不会调用 asp.net 页面。

# c# - 在特殊字符之前只获取单词

> ID：10550610
> 
> 赞同：0
> 
> 时间：2012-05-11T11:38:01.633
> 
> 标签：c#, regex, string, nlp

我有来自医疗部门的“分块”句子的文件。

句子看起来像：

> " [再次ADVP/RB] [VP 看到/VBN] [NP 是/VBZ] [NP a/DT 焦点/JJ 不对称/NN]。
> 
> " [NP 诊断/JJ 乳房 X 线照片/NN] [PP of/IN] [NP 左/DT 左/JJ 乳房/NN]。

我需要从那些“块”中只提取**单词的方法。**所有句子的共同规则是单词在 '/' 字符之前。

是否可以选择组合 REGEX 或其他东西以获得没有 POS 的字符串？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T12:12:02.733

查找此正则表达式的所有匹配项。

```
\w+(?=/) 
```

我在[RegexPal.com](http://regexpal.com)对其进行了测试。像魅力一样工作。

正则表达式非常简单。它匹配单词 ( `\w+`) 后跟 a`/`而不进行`/`匹配部分。这消除了处理捕获组等的需要。它与 'followed by' 匹配`(?=/)`，本质上匹配紧随其后的点 a `/`。这称为[前瞻](http://www.regular-expressions.info/lookaround.html)。

这是一些示例代码：

```
string sentence = "[ADVP again/RB ] [VP seen/VBN ] [NP is/VBZ ] [NP a/DT focal/JJ asymmetry/NN ].";
MatchCollection matches = Regex.Matches(sentence, @"\w+(?=/)");
foreach (Match match in matches)
{
    Console.WriteLine(match.Value);
} 
```

输出：

```
again
seen
is
a
focal
asymmetry 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T11:57:51.097

这似乎有效：

```
var patt = @"\s(\b(.+?))/";
var matches = Regex.Matches("[ADVP again/RB ] [VP seen/VBN ] [NP is/VBZ ] [NP a/DT focal/JJ asymmetry/NN ].", patt);

var matchedValues = matches
    .Cast<Match>()
    .Select(match => match.Groups[1].Value);

var output = string.Join(" ", matchedValues); 
```

=>“再次看到的是焦点不对称”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T11:42:01.137

您正在再次搜索 RegEx 匹配，已看到，是，a，对称性和诊断性，乳房 X 光检查，of，the，left，breast

对？

然后... /\b([\w]+)// 应该可以工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T12:12:18.490

试试这个。

```
var val = "[ADVP again/RB ] [VP seen/VBN ] [NP is/VBZ ] [NP a/DT focal/JJ asymmetry/NN ]";    
var list = val.Split('/').Select(c => c.Split(' ').Last()); 
```

# magento - Magento 缓慢登录到管理员（后端）

> ID：10550611
> 
> 赞同：0
> 
> 时间：2012-05-11T11:38:04.193
> 
> 标签：magento, login, admin, backend

登录管理员大约需要 20 秒。但是当我注销并再次登录时，一切都很好。你能告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:23:48.253

打赌你有一个查询缓存问题（它没有得到足够的资源）。我会检查你的 MySQL 配置并确保你给 MySQL 足够的内存。

否则，您可以尝试通过在代码中添加时间来查找减速来找到减速。通常我通过使用 microtime 函数来做到这一点：

```
$start = microtime(true);

.... Code You Want To Time ....

$end = microstime(true);

echo "TIME: " . ($end - $start); 
```

您可能需要在 echo 之后退出（），这样您就没有任何类型的重定向阻止您看到这一点。

您也可以将时间放入日志文件中。

```
Mage::log("TIME: " . ($end - $start), null, "yourlogfile.txt"); 
```

然后，您的时间将出现在您在 Magento 目录的 var/log 目录中指定的文件中。

# actionscript-3 - 静态变量生命周期

> ID：10550615
> 
> 赞同：0
> 
> 时间：2012-05-11T11:38:16.130
> 
> 标签：actionscript-3, compilation

假设我在一个类中有一个静态变量：

```
class Example {
    public static var one:One = new One;
} 
```

'one' 会在我的**程序启动**时被实例化（即使我从不使用它），还是只是在我第一次使用它时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:57:57.887

我想如果你问这个问题，那是因为你只希望在使用它时创建对象。在这种情况下，您应该做的是实现对象的延迟创建。像这样的东西会起作用：

```
class Example {

    private static var one_:One = null;

    public static function get one():One {
        if (!one_) one_ = new One();
        return one_;
    }

    // If the variable is not read-only, you also need a setter:
    public static function set one(v:One):void {
        one_ = v;
    }

} 
```

现在您确定只有在您的代码中`one`直接引用它时才会创建它。`Example.one`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:40:16.213

第一次使用该类`Example`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T11:46:52.643

它会在启动时。但是应该有这个类的“链接”。

*   在代码中的某处直接使用此类
*   你有`imports`这门课

所以如果这个类被编译进来，它会在启动时被实例化。

如我错了请纠正我。

实际上它很容易测试:)

# javascript - 有没有做 CSS3 圆角的 JQuery 插件？

> ID：10550617
> 
> 赞同：0
> 
> 时间：2012-05-11T11:38:25.337
> 
> 标签：javascript, jquery, html, css

我知道你不需要它的 javascript ......但脚本需要处理“内部元素”。

例如，如果我将图像粘贴在 div 中，则圆角在 CSS3 中消失了。JQuery 脚本可以处理这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T11:47:35.240

对于您可能遇到的问题，有几种解决方案，其中一些比另一种更好。

## div 内的元素需要圆角。

### 仅 CSS

```
div>img {
    border-radius: 10px;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
} 
```

### jQuery 应用 CSS

```
$("div#id>*").css({
   "border-radius": "10px",
   "-moz-border-radius": "10px",
   "-webkit-border-radius": "10px"
}); 
```

或者

```
$("div#id").children().css({
   "border-radius": "10px",
   "-moz-border-radius": "10px",
   "-webkit-border-radius": "10px"
}); 
```

* * *

## 最后一个孩子在 div 内需要圆角

### jQuery 应用 CSS

```
$("div#id:last-child").css({
   "border-radius": "10px",
   "-moz-border-radius": "10px",
   "-webkit-border-radius": "10px"
}); 
```

或者：

```
$("div#id").children(':last').css({
   "border-radius": "10px",
   "-moz-border-radius": "10px",
   "-webkit-border-radius": "10px"
}); 
```

### 仅 CSS

```
div>*:last {
    border-radius: 10px;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
} 
```

或者

```
div:last-child {
    border-radius: 10px;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
} 
```

* * *

## 盒子里面的东西的角落作物。

### 仅 CSS

```
div {
    border-radius: 10px;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    overflow: hidden;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T12:18:28.683

有一个 jquery 插件可以做你想做的，它[在这里](http://jquery.malsup.com/corner/)

尽管上面有一些很好的评论可以说明您如何更好地实现之后的效果，但我认为这确实回答了您的要求。

您仍然应该为旧浏览器使用 css 和优雅降级，而不是使用 jquery/javascript 添加额外的处理

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T11:40:29.823

您可以单独使用 CSS，添加以下类：

```
.round{
 -moz-border-radius:10px;
 -webkit-border-radius:10px;
 border-radius:10px;
} 
```

要在 IE 中添加对圆角的支持，您可以使用[CSS3Pie](http://css3pie.com/)（或其他一些解决方案）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T14:40:04.327

在这里你去 Jquery 圆角演示

[http://jquery.malsup.com/corner/](http://jquery.malsup.com/corner/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T11:51:36.917

不需要 JavaScript（除非您想为不支持它们的浏览器提供圆角边框）。但是，您确实需要在容器和图像上设置边框。

小提琴：http: [//jsfiddle.net/rEq4X/](http://jsfiddle.net/rEq4X/)

**HTML**

```
​&lt;div>
    <img src="url" />
​&lt;/div>​​​​​​ 
```

**CSS**

```
DIV, DIV > IMG{
 -moz-border-radius: 16px;
 border-radius: 16px;   
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-11T11:43:35.177

您可以创建一个 jQuery UI 自定义主题，它会生成包含圆角的 CSS。

[jQuery UI - ThemeRoller](http://jqueryui.com/themeroller/)

# ruby - Ruby += 操作抛出错误

> ID：10550619
> 
> 赞同：0
> 
> 时间：2012-05-11T11:38:33.880
> 
> 标签：ruby, arrays, hash, count, operation

我有一个哈希，所有值都是数组。所以它看起来像下面这样：

```
my_hash = {:key       => ["some string", "some string"],
           :other_key => ["some string"]} 
```

现在我想要这个哈希中所有字符串的计数。

所以我这样做：

```
my_hash.each_value do |value|
  string_count += value.count
end 
```

但我得到错误：`undefined method '+' for nil:NilClass`

但是我的值数组永远不会为零......例如当我这样做时：

```
my_hash.each_value do |value|
  puts value.count
end 
```

我得到：

```
2
1
2
2
2
etc. 
```

那么我做错了什么？提前谢谢:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T11:53:08.910

“注入”是这样的方法：

```
string_count = my_hash.inject(0) { |memo, (key, value)| memo += value.count } 
```

[http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T11:40:38.157

我认为您需要`string_count`在循环之前进行初始化。

```
string_count = 0
my_hash.each_value do |value|
  string_count += value.count
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T11:40:53.180

`string_count`是`nil`。

```
string_count = 0
my_hash.each_value do |value|
  string_count += value.count
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T11:40:55.503

*string_count* 是否已初始化？
（你的代码中有“string_count = 0”吗？）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-11T11:42:12.937

您必须先初始化 string_count。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-11T11:45:13.990

在迭代器之前初始化`string_count`将解决这个问题。

```
string_count = 0

my_hash.each_value do |value|
  string_count += value.count
end

#=> 3 
```

# android - 从 Android Asset 文件夹中读取 xml 文件

> ID：10550621
> 
> 赞同：8
> 
> 时间：2012-05-11T11:38:36.377
> 
> 标签：android, xml, android-assets

我正在尝试从**assets文件夹中读取相同的文件“** *xmlfile.xml* ”，并从 SD 卡**sdcard/download/**中读取另一个副本。

 ****我可以从 SD 卡读取：

*   解压返回**真**
*   Esite 返回**真**

我无法从 Assets 文件夹中读取：

*   unfile 返回**False**
*   Esite 返回**False**

* * *

此代码无效

```
 File source = new File("file:///android_asset/xmlfile.xml");
        boolean unfile = source.isFile();
        boolean Esiste = source.exists();

        try
        {
          // todo
        } catch (Exception e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

* * *

这段代码在工作

```
 File source = new File("/sdcard/" + "download" + "/" + "xmlfile.xml");
        boolean unfile = source.isFile();
        boolean Esiste = source.exists();

        try
        {
          // todo
        } catch (Exception e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

有人可以解释我如何从 Assets 文件夹中读取文件。

谢谢马可

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-11T11:42:15.803

要打开资产，您需要以下代码：

```
InputStream is = getAssets().open("xmlfile.xml") 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-11T12:03:39.237

使用此功能

```
// Converting given XML file name to String form
String mOutputText = getxml("yourxml.xml");

/**
 * Function used to fetch an XML file from assets folder
 * @param fileName - XML file name to convert it to String
 * @return - return XML in String form
 */
private String getXml(String fileName) {
    String xmlString = null;
    AssetManager am = context.getAssets();
    try {
        InputStream is = am.open(fileName);
        int length = is.available();
        byte[] data = new byte[length];
        is.read(data);
        xmlString = new String(data);
    } catch (IOException e1) {
        e1.printStackTrace();
    }
    return xmlString;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-06T05:53:02.360

```
 try 
    {
        AssetManager aManager = Class.getAssets();
        InputStream iStream = aManager.open("file.xml");
        int length = iStream.available();
        byte[] data = new byte[length];
        iStream.read(data);
        assetString = new String(data).toString();
    }
    catch (IOException e)
    {
        e.printStackTrace();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-14T13:53:28.150

这肯定会帮助你。要读取文件表单资产文件夹，您需要一个`InputStream`对象。

*句法：*

```
InputStream yourobj=getApplicationContext().getAssets().open("Path to xml file"); 
```

*所以实时代码可以是*：

```
InputStream in_s = getApplicationContext().getAssets().open("www/application/app/client/controllers/data1.xml"); 
```

这`data1.xml`是路径内的文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-06T22:26:45.140

我发现执行以下操作更容易：

```
val xmlStream = context.resources.getXml(R.xml.example) 
```

我相信这是 XmlPullParser 的一个子集，但它已经足够好了。****

# javascript - JavaScript：在现有图像元素旁边的键盘插入符号处插入图像元素

> ID：10550622
> 
> 赞同：0
> 
> 时间：2012-05-11T11:38:42.123
> 
> 标签：javascript, dom

使用以下 XHTML 代码...

```
<div contenteditable="true">
<img alt="" src="1.png" />
</div> 
```

...如果用户在图像元素（anchorNode 或 focusNode）之后有键盘插入符，我想使用 W3C 标准方法，例如 appendChild 或 insertBefore 来插入新的图像元素。

我尝试了以下方法来确定 DOM 中的位置...

```
alert(
'focusNode = '+window.getSelection().focusNode
+'\n\npreviousSibling = '+window.getSelection().focusNode.previousSibling
+'\n\nnextSibling = '+window.getSelection().focusNode.nextSibling
+'\n\nparentNode = '+window.getSelection().focusNode.parentNode);

try
{
alert(
'focusNode = '+window.getSelection().focusNode
+'\n\n.previousSibling.previousSibling = '+window.getSelection().focusNode.previousSibling.previousSibling
+'\n\n.nextSibling.nextSibling = '+window.getSelection().focusNode.nextSibling.nextSibling
+'\n\nparentNode = '+window.getSelection().focusNode.parentNode);
} catch (err) {}

alert(
'anchorNode = '+window.getSelection().anchorNode
+'\n\npreviousSibling = '+window.getSelection().anchorNode.previousSibling
+'\n\nnextSibling = '+window.getSelection().anchorNode.nextSibling
+'\n\nparentNode = '+window.getSelection().anchorNode.parentNode);

try
{
alert(
'anchorNode = '+window.getSelection().anchorNode
+'\n\n.previousSibling.previousSibling = '+window.getSelection().anchorNode.previousSibling.previousSibling
+'\n\n.nextSibling.nextSibling = '+window.getSelection().anchorNode.nextSibling.nextSibling
+'\n\nparentNode = '+window.getSelection().anchorNode.parentNode);
} catch (err) {} 
```

我也试过这个，它只是告诉我有多少空白字符（断线）......

```
alert(window.getSelection().anchorOffset+'\n\n'+window.getSelection().focusOffset); 
```

我无法确定如何直接在键盘插入符号旁边找到图像。

* * *

我的目标是仅使用 W3C 方法和属性来做到这一点......

1.) 不使用专有的微软内部---任何方法。

2.) 不使用框架，不仅仅是因为它们使用了内部——任何方法。

3.）我正在尝试确定图像元素是否就在插入符号旁边，如果它是文本，那么这是一个不同的条件（只需提及 {alert('in or next to text');}）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T12:53:33.537

```
var img = document.createElement('img');
img.setAttribute('alt','alternative text');
img.setAttribute('src','2.png');
window.getSelection().getRangeAt(0).insertNode(img); 
```

# javascript - 如何使用 firebug 调试自定义 javascript jquery 文件而不停止所有其他 jquery 核心文件？

> ID：10550626
> 
> 赞同：1
> 
> 时间：2012-05-11T11:39:09.053
> 
> 标签：javascript, debugging, firebug

我想在 Firebug 中开始逐行调试会话，但仅限于属于脚本面板中所选文件的行。

我想避免进入任何 javascript 库（例如 Jquery）的核心文件，并最终查看大量应该可以正常工作的代码。

**有没有一种方法可以将调试器配置为足够智能，只在属于我的自定义 js 文件的行上停止，而不在整个文件的每一行中设置断点？**

**编辑 5 月 12 日：** 为了更好地阐明我需要什么，我只是想问是否有任何方法可以在每个文件的基础上进行调试，而不是像我们都习惯的那样在每行的基础上进行调试。假设我有一个我不拥有的 javascript 进程（我不编写它），我只想检查它是如何工作的。我不确切知道流程是如何进行的，但我说我只对调试一个文件感兴趣。主要问题是因为我不拥有我不知道流程的项目，所以我不知道我的 javascript 文件的哪个点将是执行指针。所以我问是否有任何方法可以仅在执行行是我的文件时设置断点，而不是从执行的第一行开始并单步执行，然后单步执行。

最好的，德米安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T13:27:02.560

当出现问题时，您需要知道它不会总是在您的代码中停止。使用堆栈跟踪，您可以看到您的哪个函数调用导致节点崩溃，它显示了哪些函数如何相互调用的列表。您可以在右侧找到堆栈选项卡：

![在此处输入图像描述](../Images/99933c75457a8d60eaffb5776722cd82.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:49:44.457

如果您`F10`在断点后按下，调试器将跳过`js`文件中的下一个函数调用（行），依此类推。`F11`将进入函数调用。因此，结合这两个快捷键，您可以轻松调试所需的内容。

# java - iText PDF 中的绘画框

> ID：10550628
> 
> 赞同：1
> 
> 时间：2012-05-11T11:39:17.567
> 
> 标签：java, itext

我知道**iText** PDF 支持绘画段落，这非常好。但是，我想知道（除了使用表格之外）是否可以自定义段落背景的绘制，例如添加圆形边框等？
我知道有一个*VerticalPositionMark*接口允许一个人在当前的 y 位置上进行绘制，但是对于一个段落，我需要知道他的确切位置才能首先绘制到背景中（包括段落中的任何边距等） .
除了为每个盒子使用表格之外，还有其他方法吗？

谢谢！
亚历克斯

# c# - 新 COM 端口可用事件

> ID：10550635
> 
> 赞同：9
> 
> 时间：2012-05-11T11:39:48.237
> 
> 标签：c#, visual-studio, events, serial-port, port

我的 C# 应用程序使用 COM 端口。我遇到了一些大多数程序应该常见的困难。当端口名列表更改时，我需要获取一个事件。我有一个选择框，用户可以在其中从可用端口名称列表中进行选择。有没有人有这方面的代码片段？谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-24T12:43:28.803

它也可以在“ManagementEventWatcher”的帮助下完成：

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.ComponentModel.Composition;
using System.Linq;
using System.Text;
using System.Management;
using System.IO.Ports;
using System.Threading;
using System.Threading.Tasks;

namespace HmxFlashLoader
{
    /// <summary>
    /// Make sure you create this watcher in the UI thread if you are using the com port list in the UI
    /// </summary>
    [Export]
    [PartCreationPolicy(CreationPolicy.Shared)]
    public sealed class SerialPortWatcher : IDisposable
    {
        public SerialPortWatcher()
        {
            _taskScheduler = TaskScheduler.FromCurrentSynchronizationContext();
            ComPorts = new ObservableCollection<string>(SerialPort.GetPortNames().OrderBy(s => s));

            WqlEventQuery query = new WqlEventQuery("SELECT * FROM Win32_DeviceChangeEvent");

            _watcher = new ManagementEventWatcher(query);           
            _watcher.EventArrived += (sender, eventArgs) => CheckForNewPorts(eventArgs);
            _watcher.Start();       
        }

        private void CheckForNewPorts(EventArrivedEventArgs args)
        {
            // do it async so it is performed in the UI thread if this class has been created in the UI thread
            Task.Factory.StartNew(CheckForNewPortsAsync, CancellationToken.None, TaskCreationOptions.None, _taskScheduler);
        }

        private void CheckForNewPortsAsync()
        {
            IEnumerable<string> ports = SerialPort.GetPortNames().OrderBy(s => s);

            foreach (string comPort in ComPorts)
            {
                if (!ports.Contains(comPort))
                {
                    ComPorts.Remove(comPort);
                }
            }

            foreach (var port in ports)
            {           
                if (!ComPorts.Contains(port))
                {
                    AddPort(port);
                }
            }
        }

        private void AddPort(string port)
        {
            for (int j = 0; j < ComPorts.Count; j++)
            {
                if (port.CompareTo(ComPorts[j]) < 0)
                {
                    ComPorts.Insert(j, port);
                    break;
                }
            }

        }

        public ObservableCollection<string> ComPorts { get; private set; }

        #region IDisposable Members

        public void Dispose()
        {
            _watcher.Stop();    
        }

        #endregion

        private ManagementEventWatcher _watcher;
        private TaskScheduler _taskScheduler;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T13:29:28.540

创建一个简单的表单应用程序并将以下代码放入表单中：

```
protected override void WndProc(ref Message m)
{
    switch (m.Msg)
    {
        case 537: //WM_DEVICECHANGE
            var ports = SerialPort.GetPortNames().OrderBy(name => name);

            foreach (var portName in ports)
            {
                Debug.Print(portName);
            }
            break;
    }
    base.WndProc(ref m);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-11T11:43:38.013

COM 端口更改是罕见事件，而不是常见事件。

最简单的方法是设置一个计时器，每 10-30 秒枚举一次 COM 端口列表，如果发生更改，更新列表。

更好的是，提供一个“刷新列表”按钮——列表基本上只有在用户插入 USB 串行适配器时才会改变。

# php - php，如何要求文件中没有的东西？

> ID：10550637
> 
> 赞同：0
> 
> 时间：2012-05-11T11:39:52.953
> 
> 标签：php, caching, require

我想要求/包含数据库记录中的内容，但要求/包含只接受文件。这件事与缓存有关，所以我不想向文件写入任何内容（冲突等）。如何躲避它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T11:47:56.767

您是否从数据库中获取 PHP 代码？如果是这样，你可能做错了。理想情况下，您应该只将数据存储在数据库中，而不是代码。

如果您要从数据库中获取 PHP 结构，请考虑使用它的`serialize()`'d 版本（或`json_encode()`'d）。

也许我错过了你想要完成的确切目的，如果我的答案走错了路，请告诉我。

无论你做什么，都不要依赖，`eval`除非你真的必须；即使那样，也不要:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T11:41:22.547

这是非常危险的，特别是如果数据库内容是由用户提供的，但无论如何你都可以使用它：

```
eval($your_database_content); 
```

[手动的](http://us3.php.net/manual/en/function.eval.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T11:42:03.963

如果是代码，则需要使用`eval()`，尽管有很多反模式涉及`eval()`

手册说：

> 注意 eval() 语言结构非常危险，因为它允许执行任意 PHP 代码。因此不鼓励使用它。如果您已仔细验证除了使用此构造之外别无选择，请特别注意不要将任何用户提供的数据传入其中，而无需事先正确验证。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T12:10:12.267

由于其他人已经涵盖`eval()`并且这是一个坏主意，我将谈到将这个“内容”写入文件的主题。使用[`tempnam`](http://php.net/manual/en/function.tempnam.php). 这将为您提供刚刚创建的具有 0600 权限的唯一文件名的名称。然后您可以打开它，编写您的内容，关闭，然后要求/包含。[`tempnam`](http://php.net/manual/en/function.tempnam.php)请参见手册页上的示例 #1 。

确保检查 的返回值`tempnam`不为假；完成后确保`unlink`文件。

# ruby-on-rails-3 - Rspec 控制器规格

> ID：10550640
> 
> 赞同：2
> 
> 时间：2012-05-11T11:40:18.123
> 
> 标签：ruby-on-rails-3, rspec, controller, bdd

我是 Rspec 的新手，请告诉我以下两种方法的控制器规范在索引方法中，只有通过输入用户名控件才能看到登录页面，然后转到登录方法并查找人名。如果找到人员，则控制转到人员路径，否则返回到作为索引页面的根路径。

```
class HomeController < ApplicationController
def index

end

def login
  @person = Person.find(:all, :conditions => ['people.name =?', params[:person][:name]] )

  if @person.blank?
    redirect_to root_path          
  else
    redirect_to people_path
  end
end
end 
```

请帮我。
谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T07:45:44.240

您的 rspec 控制器测试可能是这样的：

```
describe HomeController do
  render_views
  it "Logs in Person with non-blank name" do
    person = Factory(:Person, name: "non-blank name")
    get :login
    response.should redirect_to(people_path)
  end
  it "does not log in Person with blank name" do
    person = Factory(:Person, name: "") # blank name
    get :login
    response.should redirect_to(root_path)
  end
end 
```

有关详细信息，请参阅[rails 控制器规范](https://github.com/rspec/rspec-rails#controller-specs)。

编辑：

工厂：创建对象（在本例中为测试对象）的代码。这是创建测试对象的首选方法，因为您可以自定义代码以创建具有不同属性且重复最少的对象。

Fixtures：如果你不使用工厂，你可以为你要创建的每个对象指定属性。对于超过 2-3 个对象，这些数据很快变得难以维护（例如，当您添加一个属性时，您需要对这些对象中的每一个进行更改）。

存根：如果您不想在创建模型对象时创建数据库记录，您可以存根模型代码白测试控制器。

更多信息，请参考：
1.[测试指南](http://guides.rubyonrails.org/testing.html)
2\. [asciicast](http://asciicasts.com/episodes/158-factories-not-fixtures)（注意：此代码指的是旧版本的 FactoryGirl gem。请参阅下面的 FactoryGirl 的最新 API）
3\. [FactoryGirl 自述文件](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md)

# jquery - div - 边框直到是文本

> ID：10550643
> 
> 赞同：2
> 
> 时间：2012-05-11T11:40:37.843
> 
> 标签：jquery, html, css

```
<div id="test">
    DYNAMIC DATA FROM PHP <br />
DYNAMIC DATA FROM PHP
DYNAMIC DATA FROM PHP
</div>

<div id="test2">
    DYNAMIC DATA FROM PHP <br />
DYNAMIC DATA FROM PHP
DYNAMIC DATA FROM PHP
</div>

#test {
   border: solid 1px red;

   width: auto;
}

#test2 {
   border: solid 1px green;

   width: auto;
} 
```

[http://jsfiddle.net/jcgtL/15/](http://jsfiddle.net/jcgtL/15/)

如何为当前区域制作边框？在此示例中，div 扩展到右侧区域浏览器。我不能使用例如宽度：100px 或更少，因为这些数据是我用 PHP 生成的。也许我必须使用 jQuery？

编辑：

这不是内联元素

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T11:44:32.153

您使用的`div`是块元素，您应该使用`span`内联元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T11:43:42.520

将 a 添加`position:fixed`到您的样式中，它应该看起来像您想要的那样：

[http://jsfiddle.net/jcgtL/1/](http://jsfiddle.net/jcgtL/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T11:49:23.580

我倾向于`float: left`在这些情况下使用（或者`right`如果合适的话）。

[http://jsfiddle.net/lollero/jcgtL/10/](http://jsfiddle.net/lollero/jcgtL/10/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T12:01:28.440

请试试这个可能对你有帮助。[演示](http://jsfiddle.net/jcgtL/27/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T11:45:52.523

我插入了一个跨度[http://jsfiddle.net/jcgtL/4/](http://jsfiddle.net/jcgtL/4/)

# android - Sqlite 数据库应该只创建一次

> ID：10550648
> 
> 赞同：4
> 
> 时间：2012-05-11T11:40:47.160
> 
> 标签：android, sqlite

我开发了一个具有 C2DM 功能的项目。每当服务器上有可用数据时；服务器将数据推送到安装此应用程序的所有设备（在我的情况下，它是一个小消息）。

现在我的问题是每次都会在消息到来的地方创建数据库和表时，这是我的代码，

```
 public class MessageHelper extends Activity
    {
        public String str; 
        public int sts;
        public Date timeStamp;

        protected void onCreate(Bundle savedInstanceState) 
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            Bundle extras = getIntent().getExtras();
            if (extras != null) {
                this.str = extras.getString("msgg");
                Log.d("C2DM", this.str);
            }

            // Create a ref of SQLite
            SQLiteDatabase db;

            //use tat ref to open or create a table 
            db = openOrCreateDatabase( "/data/data/de.vogella.android.c2dm.simpleclient/app_database/file__0/0000000000000001.db", SQLiteDatabase.CREATE_IF_NECESSARY, null);

            try 
            {
                //initialsiging a query with all the table fields 
                final String CREATE_TABLE_CONTAIN = "CREATE TABLE IF NOT EXISTS tbl_Message4("
                        + "id INTEGER PRIMARY KEY AUTOINCREMENT,"
                        + "msg TEXT not null," 
                        + "msg_time INTEGER not null,"
                        + "msg_status INTEGER not null);";

                //execute the above query
                db.execSQL(CREATE_TABLE_CONTAIN);

                timeStamp = new Date();

                String sql =
                        "INSERT or replace INTO tbl_Message4 (msg,msg_time,msg_status) VALUES('"+this.str+"' ,'"+this.timeStamp+"' , 0)" ;       
                db.execSQL(sql);
        }
    } 
```

我也有一个名为 MessageReceiver 的类，它扩展了 Broadcastreceiver；每当有消息到来时，该类就会被执行，然后加载 MessageHelper.class 这里是 MessageReceiver 的代码，

```
public class C2DMMessageReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        Log.w("C2DM", "Message Receiver called");
        if ("com.google.android.c2dm.intent.RECEIVE".equals(action)) {
            Log.w("C2DM", "Received message");
            final String payload = intent.getStringExtra("payload");
            Log.d("C2DM", "dmControl: payload = " + payload);
            // TODO Send this to my application server to get the real data
            // Lets make something visible to show that we received the message
            createNotification(context, payload);

        }
    }

    public void createNotification(Context context, String payload) {
        NotificationManager notificationManager = (NotificationManager) context
                .getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(R.drawable.ic_launcher,
                "Message received", System.currentTimeMillis());
        // Hide the notification after its selected
        notification.flags |= Notification.FLAG_AUTO_CANCEL;

        //Intent intent = new Intent(context, MessageReceivedActivity.class);
        //intent.putExtra("payload", payload);

        Intent intent = new Intent(context, MessageHelper.class);
        intent.putExtra("msgg", payload);
        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(intent);
        //PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, 0);
        //notification.setLatestEventInfo(context, "Message", "New message received", pendingIntent);
        //notificationManager.notify(0, notification);

    }

} 
```

我正在寻找的是，第一次安装应用程序时应该创建一个数据库。

提前致谢，

文盲

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T11:44:18.707

数据库将只创建一次，因为它的*名称*没有被更改。是的，它只会在您的应用程序第一次启动活动**MessageHelper**时创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:47:43.143

数据库只会使用一个名称创建一次。

在这里您也可以选择此代码以使其变得容易

[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T11:57:11.300

“CREATE TABLE IF NOT EXISTS”只会在表不存在时创建表。所以它只会创建一次。你会在其他地方删除这张表吗？

# linux - 如何从现有分区创建循环分区

> ID：10550649
> 
> 赞同：1
> 
> 时间：2012-05-11T11:40:50.510
> 
> 标签：linux, command-line, partitioning

我相信 /images/backups 正在使用 /images 中的空间？

```
/dev/sdb1             820G  645G  135G  83% /images
/dev/loop0            296G  296G     0 100% /images/backups 
```

我在另一台机器/images中有一个类似的分区，免费500G，我想取出350G用于/images/backups，怎么做？

对吗，它是一个简单的循环挂载，可以提供指定的空间量，还是我们应该创建一个所需大小的 NULL 文件并挂载？如果是这样，应该使用哪些挂载选项来指定大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T11:44:17.987

您需要创建具有固定大小的目标，但可以使用“稀疏文件”，该文件实际上还没有写入任何块（因此在写入之前实际上不会占用空间）。

例如：

```
dd if=/dev/zero of=file.img bs=1 count=0 seek=20G 
```

将创建一个预分配为 20GB 的稀疏文件。也就是说，实际上预先将 20GB 的零写入磁盘（使文件非稀疏）在写入时会更快并导致更少的碎片。

这可以使用 losttup 命令附加到环回设备，创建文件系统并挂载：

```
losetup /dev/loop1 file.img
mke2fs -j /dev/loop1
mount /dev/loop1 /mnt/somewhere 
```

如果您想知道现有文件是否稀疏，以下方法可以解决问题（在具有 GNU 工具的系统上；纯 POSIX 环境不支持以下某些内容）：

```
{
    read block_count block_size file_size
    if (( block_count * block_size < file_size )) ; then
        echo "Sparse"
    else
        echo "Non-Sparse"
    fi
} < <(stat --format='%b %B %s'$'\n' /images/backups.img) 
```

# ruby-on-rails-3 - client_side_validations 中的自定义验证器

> ID：10550653
> 
> 赞同：0
> 
> 时间：2012-05-11T11:40:59.270
> 
> 标签：ruby-on-rails-3, client-side-validation, custom-validators

我需要添加自定义验证器来比较两个日期 - 开始日期和结束日期。我创建了自定义验证器

```
class MilestoneDatesValidator < ActiveModel::EachValidator
  def validate_each(record, attribute, value)
    if record.start_date > record.end_date
      record.errors.add(attribute, :end_date_less, options.merge(:value => value))
    end
  end
end 
```

我创建了 ClientSideValidations 自定义验证器。我不确定如何在其中获取其他属性值，但我尝试以这种方式执行此操作：

```
ClientSideValidations.validators.local['milestone_dates'] = function(element, options) {
  start_date = new Date($('#milestone_start_date').val());
  end_date = new Date($('#milestone_end_date').val());
  if(end_date < start_date) {
    return options.message;
  }
} 
```

但它不起作用/我只有在重新加载页面后才会出现错误，而不是客户端验证。我使用 client_side_validations (3.2.0.beta.3)、client_side_validations-formtastic (2.0.0.beta.3)、rails (3.2.3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T00:24:38.763

您在上面提供的代码没有提及验证器辅助方法的声明（和使用）。在milestone_dates_validator.rb 初始化程序中，尝试在文件末尾添加以下内容：

```
module ActiveModel::Validations::HelperMethods
  def validates_milestone_dates(*attr_names)
    validates_with MilestoneDatesValidator, _merge_attributes(attr_names)
  end
end 
```

并在您的模型中调用您正在验证的属性上的验证器：

```
validates_milestone_dates :milestone_ends_at 
```

# postgresql - 这种磁盘读取速度是否符合预期（Amazon EBS）？

> ID：10550668
> 
> 赞同：-2
> 
> 时间：2012-05-11T11:42:04.363
> 
> 标签：postgresql, optimization, amazon-web-services, hard-drive

我们的 Amazon EBS 支持的实例已大大减慢（可能是物理主机转移？）。

我已经使用 top 检查了实例，并且在激活进程时 CPU 使用率非常低（例如 1%）。使用 iotop 我监控了 postgresql 的磁盘读取速度。当只有一个 postgresql 线程在运行时，它会报告大约 5M/s 的读取速度。这是相当慢还是在通常的磁盘读取速度参数中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:44:04.447

5MB/s 或多或少是单个硬盘驱动器的典型值。我的意思当然是顺序访问。如果你只有一个硬盘，那么你的 CPU 就很好，因为一个硬盘可能不足以给你的 CPU 带来压力，如果你没有达到比这更高的速度，即使有不断的查询，那么你的硬盘就是瓶颈。

# java - Netty：阻止调用以获取连接的服务器通道？

> ID：10550682
> 
> 赞同：2
> 
> 时间：2012-05-11T11:42:56.430
> 
> 标签：java, netty

调用`ServerBootstrap.bind()`返回 a`Channel`但这不是`Connected`状态，因此不能用于写入客户端。

`Channel`Netty 文档中的所有示例都显示了从它`ChannelHandler`的事件写入 a ，例如`channelConnected`- 我希望能够获得一个连接的 Channel 不是在事件中，而是作为事件外部的参考，让我们说一些使用我的服务器组件的客户端代码。一种方法是手动编写等待`channelConnected`事件的代码，然后复制 Channel 引用。但这可能是在重新发明轮子。

所以问题是：Netty 中是否有返回连接通道的阻塞调用？

编辑：我使用的是 Oio Channels，而不是 Nio。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T13:21:12.837

您可以创建一个阻塞调用，但我认为您过快地诋毁了基于事件的方法。这是一个人为的例子，只是为了确保我理解你想要做什么：

1.  Netty 服务器启动
2.  DataPusher*服务*启动。
3.  当客户端连接时，DataPusher 获取对客户端通道的引用并向其写入一些数据。
4.  客户端在连接后不久收到推送的数据。

或多或少正确？

为此，您的 DataPusher（或者更好的是，它的一个仆从）可以在您创建的服务器管道中注册为 ChannelHandler。让它扩展[org.jboss.netty.channel.SimpleChannelHandler](http://netty.io/docs/stable/api/org/jboss/netty/channel/SimpleChannelHandler.html)。处理程序可能如下所示：

```
DataPusher dataPusher = getMyDataPusherReference();

public void channelConnected(ChannelHandlerContext ctx, ChannelStateEvent e) {
   dataPusher.doYourThing(e.getChannel());  // do something in another thread....
} 
```

如果您确定从 DataPusher 的角度来看它是一个阻塞调用，只需让它等待一个闩锁并让仆从放下闩锁。

不知道这是否是你要找的......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T13:10:54.497

经过以上所有的交流，我仍然认为没有任何必要。

当然，您所要做的就是接受来自外部服务的连接；不要为任何事件注册它；然后，当另一个客户端连接时，在两个通道上注册 I/O 事件。

外部服务不知道也不关心您是否被阻塞在等待另一个连接的线程中，或者只是由于其他原因而没有响应。

如果他正在写信给你，他的写无论如何都会成功，直到你的套接字接收缓冲区的大小，无论你是否阻塞，只要你实际上没有从他那里读。当该缓冲区填满时，他将阻塞，直到您读取其中一些为止。

如果他正在阅读你的信息，他会阻止直到你发送一些东西，而你在此期间所做的事情对他来说是不可见的。

所以我认为你只需要简化你的想法，让它更符合非阻塞 I/O 的美妙世界。

# php - 有没有办法用 php 获取 html 内容/值？

> ID：10550683
> 
> 赞同：-4
> 
> 时间：2012-05-11T11:42:57.640
> 
> 标签：php

我可以用 php 获取标签的内容或值吗？我知道我可以用 javascript 得到它：

```
$(function() {
    $('class or id').text();
}); 
```

但我想用 php 得到它，所以我可以在另一个查询中将它发送回我的 sql 表。

```
function changeContentToId(id) {
    $("#spanContent").html(id); }

<?php echo "<span onclick='changeContentToId($ob->ID)'>...</span>"; ?>
<span id="spanContent"></span> 
```

这是我现在的代码，关于如何在 php 中编写顶级代码的任何提示？

谢谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:47:15.647

没办法：PHP是服务器端的，你的数据在客户端。

然后你有两种选择：在将信息发送到浏览器之前获取信息（输出缓冲是一种好方法），或者之后，通过 AJAX 调用。

希望这可以帮助 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:47:53.837

你为什么不以“正常”的方式发送它？就像将内容放在表单中然后将其提交给 PHP。

或者使用 Javascript 获取它，然后使用 AJAX 提交它。

PHP 将不会访问客户端信息 (HTML) 一旦它在您的客户端（内容交付后），您可以使用客户端操作（Javascript）或将其发送回服务器然后在那里使用它。

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T11:48:03.793

简单的答案是你不能那样做。PHP在页面呈现**之前在服务器上执行。**更新内容的 JavaScript在页面呈现**后在浏览器中执行。**因此，当您的内容准备好可供阅读时，就不再有 PHP 了。

解决方法是使用 AJAX 通过 JavaScript 读取信息，然后将其发送到另一个 PHP 脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T11:49:25.083

使用 javascript 获取它并使用 ajax 将其发送到服务器。

如果你真的需要，因为我没有看到任何理由，因为它是第一次用 php 生成的。所以你应该在渲染 html 页面之前使用你想要的单词。

# c# - 从字符串转换为唯一标识符时转换失败

> ID：10550694
> 
> 赞同：3
> 
> 时间：2012-05-11T11:44:12.290
> 
> 标签：c#

当我在调试时运行我的代码时，我收到了这个错误：

> 从字符串转换为唯一标识符时转换失败

这是代码：

```
public class UserObject
{
    private string m_name = string.Empty;

    public UserObject(string id)
    {
    #region Internal Logic
        try
        {
            using (SqlConnection cn = new SqlConnection(SiteConfig.ConnectionString))
            {
                string sSQL = "SELECT [UserName] FROM [aspnet_users] WHERE [UserID] = @UserID";
                using (SqlCommand cm = new SqlCommand(sSQL, cn))
                {
                    cm.Parameters.AddWithValue("@UserID", id);
                    cn.Open();
                    using (SqlDataReader rd = cm.ExecuteReader())
                    {
                        while (rd.Read())
                        {
                            m_name = rd[0].ToString();
                        }
                        rd.Close();
                    }
                    cn.Close();
                }
            }
        }
        catch (Exception ex)
        {

        }
    #endregion Internal logic
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T11:52:04.503

您在评论中对`id`传递给方法时没有价值的问题说。从数据库的角度来看，`uniqueidentifier`s 可以是`null`（`DBNull`在 C# 中），但要实现这一点，您必须省略参数或`DBNull.Value`显式设置。

在 C# 中，`Guid`不能`null`- 因此您必须提供`Guid.Empty`或`Guid`在调用`AddWithValue`.

**编辑**示例代码如下：请注意，给定您使用的 SQL 语句，除非您有一个 ID 仅包含s的用户，否则您
不会得到任何结果。我建议，您将SQL 语句的子句更改如下：`Guid.Empty``0``where`

```
WHERE [UserId] = ISNULL(@UserID, [UserId]) 
```

这样，当您通过时，您将获得所有用户`null`。

```
public UserObject(string id)
{
    try
    {
        using (SqlConnection cn = new SqlConnection(SiteConfig.ConnectionString))
        {
            string sSQL = "SELECT [UserName] FROM [aspnet_users] WHERE [UserID] = @UserID";
            using (SqlCommand cm = new SqlCommand(sSQL, cn))
            {

                if (id.Length == 0)
                    cm.Parameters.AddWithValue("@UserID", Guid.Empty);
                else if (id == null)
                    cm.Parameters.AddWithValue("@UserID", DBNull.Value);
                else
                    cm.Parameters.AddWithValue("@UserID", Guid.Parse(id));

                cn.Open();
                using (SqlDataReader rd = cm.ExecuteReader())
                {
                    while (rd.Read())
                    {
                        m_name = rd[0].ToString();
                    }
                    rd.Close();
                }
                cn.Close();
            }
        }
    }
    catch (Exception ex)
    {

    } 
```

# sql - Oracle SQL Developer - 结合笛卡尔积、计数/总和和分组依据

> ID：10550707
> 
> 赞同：0
> 
> 时间：2012-05-11T11:45:13.113
> 
> 标签：sql, oracle, cartesian-product

我正在使用笛卡尔积加入 2 个表，如下所示。

```
select p.type, i.amount 
FROM products p, invoice i
where (p.account = i.id); -- column headers cant be changed despite having same info 
```

这当然会显示 2 列和各自的值。

但是，我随后想使用 COUNT/GROUP BY 和 SUM/GROUP BY 进一步操作数据，但无法找到任何可以使用 2 个表开始工作的相关示例。（把它们分开做是可以的，只是让它们一起工作才是问题所在）。

对于最终结果，我想显示 3 列显示 4 种类型的分组，每种类型下的条目数，以及每种类型的总金额/SUM，例如。

类型 - 类型计数 - 总值

一个 - 5 - 500

乙 - 6 - 1000

C - 1 - 50

D - 2 - 100

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T11:51:31.877

你试过这个吗？

```
select p.type, count(p.type) Cnt, sum(i.amoumt) Total
FROM products p, invoice i
where (p.account = i.id)
group by p.type 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T12:44:53.390

请记住，查询的结果在逻辑上等同于表或视图——它们都是零或多行与一或多列的投影。

一般来说，您可以对表执行选择操作，也可以对查询或视图执行操作。尽管有一些限制，您也可以像对表一样对视图和查询应用删除和更新。

如果有疑问，请创建返回所需数据的查询，然后将其视为表：

```
select   type,
         count(type) count_type,
         sum(amount) sum(amount)
from     (select ... )
group by type 
```

另请注意子查询因式分解子句，如果您需要多次引用相同的逻辑数据集，该子句具有特定的应用：

```
with my_data as(
    select ... )
select   type,
         count(type) count_type,
         sum(amount) sum(amount)
from     my_data
where    type in (select ... from my_data)
group by type 
```

# java - 可编辑的 JavaFX TextArea 显示为只读

> ID：10550709
> 
> 赞同：1
> 
> 时间：2012-05-11T11:45:27.893
> 
> 标签：java, textarea, javafx-2, java-7, fxml

在我的独立 JavaFX 舞台上，有一个`TextArea`, 在 FXML 中指定，它*似乎*总是被禁用。但是左上角有一个带有编辑光标的小可点击区域，大约一个字母高，四个字母宽*。*的表面的其余部分`TextArea`表现得好像`TextArea`被禁用了。

只要：

a）文本更改（通过用户输入或以编程方式） b）`TextArea`曾经有输入焦点

它`TextArea`是完全可点击的，看起来就像任何可编辑的控件。当我调整窗口大小（`HGrow`并`VGrow`设置为`ALWAYS`）时，可点击区域也会增加。我们在两台不同的机器（Windows 7）上对其进行了测试。相同的行为。

```
<TextArea GridPane.columnIndex="1"
          GridPane.rowIndex="0"
          fx:id="timeTextArea"
          prefHeight="70" /> 
```

这不是 JavaFX 的一般问题，因为我无法在一个小测试应用程序中重现该问题。任何想法都会很棒。为了进一步调查，有完整的 FXML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.collections.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.control.Tooltip?>
<?import javafx.scene.effect.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.paint.*?>
<?import javafx.scene.text.*?>

<BorderPane fx:id="mainContainer" xmlns:fx="http://javafx.com/fxml" fx:controller="gui.RulesView">
  <center>
    <VBox fx:id="vb_tabBackSettings">
      <children>
        <GridPane hgap="20.0" vgap="5.0">
          <children>
            <Label prefHeight="20.0" text="%settings.rules.timeLabel.text"
                GridPane.columnIndex="0" GridPane.rowIndex="0" />
            <Label prefHeight="20.0" text="%settings.rules.winLabel.text"
                GridPane.columnIndex="0" GridPane.rowIndex="1" />
            <Label prefHeight="20.0" text="%settings.rules.numOfRoundsLabel.text"
                GridPane.columnIndex="0" GridPane.rowIndex="2" />
            <Label prefHeight="20.0" text="%settings.rules.algoLabel.text"
                GridPane.columnIndex="0" GridPane.rowIndex="3" />
            <Label prefHeight="20.0" text="%settings.rules.colorLabel.text"
                GridPane.columnIndex="0" GridPane.rowIndex="4" />

            <TextArea fx:id="timeTextArea" prefHeight="70.0"
                GridPane.columnIndex="1" GridPane.rowIndex="0" />
            <TextArea fx:id="trophyMoneyTextArea" prefHeight="70.0"
                GridPane.columnIndex="1" GridPane.rowIndex="1" />
            <TextField fx:id="numberOfRoundsTextField"
                GridPane.columnIndex="1" GridPane.rowIndex="2" />
            <ChoiceBox fx:id="algoChoiceBox" prefHeight="20.0" prefWidth="200.0"
                GridPane.columnIndex="1" GridPane.rowIndex="3" />
            <ChoiceBox fx:id="colorChoiceBox" prefHeight="20.0" prefWidth="200.0"
                GridPane.columnIndex="1" GridPane.rowIndex="4" />
            <CheckBox fx:id="isRatedCheckBox" prefHeight="20.0"
                text="%settings.rules.checkLabel.text"
                GridPane.columnIndex="0" GridPane.rowIndex="5" />
          </children>
        </GridPane>
      </children>
    </VBox>
  </center>
</BorderPane> 
```

# websphere - 编译的 JiBX 类不在 EAR 文件中

> ID：10550714
> 
> 赞同：0
> 
> 时间：2012-05-11T11:45:52.417
> 
> 标签：websphere, java-ee-6, jibx

我尝试在 WebSphere Application Server 8 上运行 JiBX 映射。我在 Eclipse 中使用 ant 编译绑定。

当我将应用程序作为“Java 应用程序”运行时，不会发生错误。但是，当我创建项目的 ear-File 并将其部署在应用程序服务器上时，我会得到绑定未编译的异常。

ear 文件中的 WAR 文件不包含 JIBX_bidning..._acces.classes。我怎样才能获得我的项目的正确耳朵包，它也在服务器上运行？

最好的问候投票

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T05:04:50.843

投票，

您可能正在使用 eclipse 进行开发。Eclipse 自动编译源文件而不将模式绑定到已编译的类文件中。

你有几个选择：

*   使用[JiBX eclipse 插件](http://jibx.sourceforge.net/eclipse/index.html)。

*   或者 - 将你的类文件打包到一个 jar 中，这样 eclipse 在添加到 war 文件之前不能更改它们。

*   或 - 使用 jibx-maven-plugin，它与 eclipse 和 WebSphere 配合得很好。

祝你好运！

大学教师

# jquery - 使用 jquery 进行 url 验证的正则表达式

> ID：10550717
> 
> 赞同：1
> 
> 时间：2012-05-11T11:46:03.840
> 
> 标签：jquery, regex

我需要使用正则表达式验证 url。应接受的有效格式如下：

```
users.kathir.com
www.kathir.com 
```

我目前正在使用以下正则表达式：

```
^[a-z0-9-]+(\.[a-z0-9-])+(.[a-z]) 
```

但它接受 www.google 作为有效的，但它应该只接受 google.com 或 www.google.com。请建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T11:49:32.030

我用这个，效果很好：

```
function checkUrl(url){
    return url.match(/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:/~\+#]*[\w\-\@?^=%&amp;/~\+#])?/);
} 
```

希望有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-19T05:40:15.437

The answer provided by user [will](https://stackoverflow.com/users/200910/will) also validate those regex in which there is no .com|edu|org etc at the end to make it more appropriate I have modify the regex which works fine for me and also want to share with you

```
var pattern = /^(http|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:/~\+#]*[\w\-\@?^=%&amp;/~\+#])+(.[a-z])?/;
var regex = new RegExp(pattern);
var website_url = $("#website_url").val();// url of the website
if (website_url.match(regex)) {
    return true
} else {
    return false;
} 
```

if you like it do an Upvote

# jakarta-ee - GlassFish 安装\配置错误\错误

> ID：10550718
> 
> 赞同：0
> 
> 时间：2012-05-11T11:46:07.130
> 
> 标签：jakarta-ee, glassfish

我正在使用最新的 JDK

```
# java -version
java version "1.7.0_04"
Java(TM) SE Runtime Environment (build 1.7.0_04-b22)
Java HotSpot(TM) 64-Bit Server VM (build 23.0-b21, mixed mode) 
```

我已经下载了最新的适用于 Windows 平台的 Java EE SDK (java_ee_sdk-6u4-windows.exe)，并定义了一个`JAVA_HOME`指向 JDK 安装目录的系统变量。

在 Java EE SDK 的安装过程中，会安装 GlassFish。当我尝试配置 GlassFish 服务器时，文本框折叠并且无法进行输入（[参见屏幕截图](http://i47.tinypic.com/34gx8k0.png)）。

有没有解决问题的办法？这是一个已知的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T12:37:46.430

奇怪的行为，以前从未见过。

您可以通过解压缩 zip 文件并手动设置配置参数来单独安装 GF。

这是一个参考：

[从 ZIP 文件安装 GlassFish Server](http://docs.oracle.com/cd/E18930_01/html/821-2427/ghmxb.html)

# c# - 如何将图像从画布中的一个点移动到另一个点

> ID：10550719
> 
> 赞同：2
> 
> 时间：2012-05-11T11:46:18.097
> 
> 标签：c#, wpf, image, animation, kinect

我正在编写一个程序，当指针位于图像上时，我想将**图像**从一个位置移动到另一个位置。图像的目标将是窗口中的任何位置。
而且，在移动到目的地时，图像大小必须逐渐减小到某个特定大小。
我正在为此使用 WPF C#
提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:49:18.547

有关移动图像，请参阅[Channel 9 Kinect QuickStart Series（骨骼跟踪基础）](http://channel9.msdn.com/Series/KinectQuickstart/Skeletal-Tracking-Fundamentals)，我将添加代码。对于不断变化的图像大小，我会使用形状游戏中的飞行文本之类的东西。希望这可以帮助！

### 移动图像（XAML）

```
<Window x:Class="SkeletalTracking.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="600" Width="800" Loaded="Window_Loaded" 
    xmlns:my="clr-namespace:Microsoft.Samples.Kinect.WpfViewers;assembly=Microsoft.Samples.Kinect.WpfViewers" 
    Closing="Window_Closing" WindowState="Maximized">       
<Canvas Name="MainCanvas">
    <my:KinectColorViewer Canvas.Left="0" Canvas.Top="0" Width="640" Height="480" Name="kinectColorViewer1" 
                          Kinect="{Binding ElementName=kinectSensorChooser1, Path=Kinect}" />
    <my:KinectSensorChooser Canvas.Left="250" Canvas.Top="380" Name="kinectSensorChooser1" Width="328" />
    <Image Canvas.Left="66" Canvas.Top="90" Height="87" Name="headImage" Stretch="Fill" Width="84" Source="/SkeletalTracking;component/c4f-color.png" />
</Canvas> 
```

### 内部代码

```
void sensor_AllFramesReady(object sender, AllFramesReadyEventArgs e)
    {
        if (closing)
        {
            return;
        }

        //Get a skeleton
        Skeleton first =  GetFirstSkeleton(e);

        if (first == null)
        {
            return; 
        }

        //set scaled position
        //ScalePosition(headImage, first.Joints[JointType.Head]);

        GetCameraPoint(first, e); 

    }

    void GetCameraPoint(Skeleton first, AllFramesReadyEventArgs e)
    {

        using (DepthImageFrame depth = e.OpenDepthImageFrame())
        {
            if (depth == null ||
                kinectSensorChooser1.Kinect == null)
            {
                return;
            }

            //Map a joint location to a point on the depth map
            //head
            DepthImagePoint headDepthPoint =
                depth.MapFromSkeletonPoint(first.Joints[JointType.Head].Position);

            //Map a depth point to a point on the color image
            //head
            ColorImagePoint headColorPoint =
                depth.MapToColorImagePoint(headDepthPoint.X, headDepthPoint.Y,
                ColorImageFormat.RgbResolution640x480Fps30);
    }

    Skeleton GetFirstSkeleton(AllFramesReadyEventArgs e)
    {
        using (SkeletonFrame skeletonFrameData = e.OpenSkeletonFrame())
        {
            if (skeletonFrameData == null)
            {
                return null; 
            }

            skeletonFrameData.CopySkeletonDataTo(allSkeletons);

            //get the first tracked skeleton
            Skeleton first = (from s in allSkeletons
                                     where s.TrackingState == SkeletonTrackingState.Tracked
                                     select s).FirstOrDefault();

            return first;

        }
    }

  private void ScalePosition(FrameworkElement element, Joint joint)
    {
        //convert the value to X/Y
        //Joint scaledJoint = joint.ScaleTo(1280, 720); 

        //convert & scale (.3 = means 1/3 of joint distance)
        Joint scaledJoint = joint.ScaleTo(1280, 720, .3f, .3f);

        Canvas.SetLeft(element, scaledJoint.Position.X);
        Canvas.SetTop(element, scaledJoint.Position.Y); 

    } 
```

### 飞行文字（类）

```
public class FlyingText
{
    private static readonly List<FlyingText> FlyingTexts = new List<FlyingText>();
    private readonly double fontGrow;
    private readonly string text;
    private System.Windows.Point center;
    private System.Windows.Media.Brush brush;
    private double fontSize;
    private double alpha;
    private Label label;

    public FlyingText(string s, double size, System.Windows.Point center)
    {
        this.text = s;
        this.fontSize = Math.Max(1, size);
        this.fontGrow = Math.Sqrt(size) * 0.4;
        this.center = center;
        this.alpha = 1.0;
        this.label = null;
        this.brush = null;
    }

    public static void NewFlyingText(double size, System.Windows.Point center, string s)
    {
        FlyingTexts.Add(new FlyingText(s, size, center));
    }

    public static void Draw(UIElementCollection children)
    {
        for (int i = 0; i < FlyingTexts.Count; i++)
        {
            FlyingText flyout = FlyingTexts[i];
            if (flyout.alpha <= 0)
            {
                FlyingTexts.Remove(flyout);
                i--;
            }
        }

        foreach (var flyout in FlyingTexts)
        {
            flyout.Advance();
            children.Add(flyout.label);
        }
    }

    private void Advance()
    {
        this.alpha -= 0.01;
        if (this.alpha < 0)
        {
            this.alpha = 0;
        }

        if (this.brush == null)
        {
            this.brush = new SolidColorBrush(System.Windows.Media.Color.FromArgb(255, 255, 255, 255));
        }

        if (this.label == null)
        {
            return;
        }

        this.brush.Opacity = Math.Pow(this.alpha, 1.5);
        this.label.Foreground = this.brush;
        this.fontSize += this.fontGrow;
        this.label.FontSize = Math.Max(1, this.fontSize);
        Rect renderRect = new Rect(this.label.RenderSize);
        this.label.SetValue(Canvas.LeftProperty, this.center.X - (renderRect.Width / 2));
        this.label.SetValue(Canvas.TopProperty, this.center.Y - (renderRect.Height / 2));
    }
} 
```

### 项目中的代码

```
 FlyingText.FlyingText.NewFlyingText(this.skeleton.Width / 30, new Point(this.skeleton.Width / 2,
            this.skeleton.Height / 2), e.Matched); 
```

*现在显然你希望你的图像更小，而不是文本，但我认为你可以自己解决这个问题，你也可以将 XAML 中的图像更改为你想要的任何内容以及你想要的`Joints`任何关节。*

# xcode - 选择一行后 UISplitView 崩溃

> ID：10550720
> 
> 赞同：0
> 
> 时间：2012-05-11T11:46:18.473
> 
> 标签：xcode, ipad, ios5, uisplitviewcontroller

我有一个`UISPlitViewController`，我的`UITableView`rootView 中有一个 detailView，在我的 rootView 中选择第二行时，我想要做的是：删除`UISplitViewController`并添加一个新的`UISplitViewController`（根据我的要求），所以在纵向模式下当我从 popOver 中选择第二行时，应用程序崩溃了？（但在横向模式下效果很好）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:01:44.950

我 100% 确定我可以回答这个问题，但如果您发布一些代码会有所帮助。您现在使用什么代码适用于横向但纵向崩溃？

（我会在评论中写下这个，但我需要 50 个代表）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T04:49:58.973

```
 [splitViewController.view removeFromSuperview];

    splitViewController = [[UISplitViewController alloc] init];

    rootObj  = [[HotelsRootViewController alloc] init];        
    mapObj = [[mapViewController alloc] init];
    rootObj.mapObj = mapObj;

    UINavigationController *rootNav=[[UINavigationController alloc]initWithRootViewController:rootObj];
    UINavigationController *detailNav=[[UINavigationController alloc]initWithRootViewController:mapObj];
    [mapObj release];

    splitViewController.viewControllers=[NSArray arrayWithObjects:rootNav,detailNav,nil];
    splitViewController.delegate=mapObj;
    [window addSubview:splitViewController.view];
    [window makeKeyAndVisible]; 
```

这就是我在 rootViewController 中选择第二行时所做的，我删除了整个 splitView 并添加了一个新的 SplitView（根据我的要求），但是如果我处于横向模式，当我打开我的 iPad 时，应用程序不会崩溃Potrait 模式，当我单击工具栏中的按钮和 popOver 中的按钮时，当我在 rootView 中选择相同的第二行时，应用程序正在崩溃.....希望你现在明白......

# ruby-on-rails - 使用 Rspec 测试“创建后”

> ID：10550721
> 
> 赞同：6
> 
> 时间：2012-05-11T11:46:18.690
> 
> 标签：ruby-on-rails, testing, rspec, factory-bot, rspec-rails

我正在尝试使用 Rspec 测试“创建后”操作。代码如下：

```
 def valid_attributes
     {
    :zone => Flymgr::Zone.new(:countries => Flymgr::ZoneCountry.first,
        :name => 'USA',
        :description => 'USA Flight',
        :zipcodes => ''),
    :price => '100.00',
    :class => 'first',

     }
   end

   def valid_session
     {}
   end

   before(:each) do
       @request.env["devise.mapping"] = Devise.mappings[:admin]
       admin = FactoryGirl.create(:admin)
       sign_in admin                           
      end

describe "POST create" do
     describe "with valid params" do
       it "creates a new Flymgr::Rule" do
         expect {
           post :create, {:Flymgr_rule => valid_attributes}
         }.to change(Flymgr::Rule, :count).by(1)
       end 
```

表单的必需属性之一是“区域”，这是一个下拉框，下拉框的选项是使用不同的表单创建的。我不知道如何使用 Rspec 创建表单条目。如您所见，我尝试从不同的控制器调用方法`Flymgr::Zone.new`。我不认为这是有效的，它打破了我的测试。

任何人都可以建议最好的方法吗？也许我应该使用 FactoryGirl 创建区域和规则条目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T13:18:42.667

您的请求参数哈希有一个对象作为 :zone 的值，当您发布它时，它将只是 'to_s'-ed，这不太可能是您想要的。

一般来说，最佳实践是使用 factory girl 来构建您的对象并使用 attributes_for 策略来参数化其属性以用于发布请求： [测试“创建”控制器操作的正确方法是什么？](https://stackoverflow.com/questions/10548745/what-is-the-proper-way-to-test-create-controller-actions)

您的问题是暗示该关联是一个belong_to，因此您只需要发布一个ID。请注意，目前，FactoryGirl 不会为关联创建任何属性。如果您的规则工厂定义负责区域关联，则可以使用此解决方法：

```
FactoryGirl.build(:flymgr_rule).attributes 
```

还包括 zone_id 但是，您需要排除不需要的参数。（“id”、“created_at”、“updated_at”等）。

因此，您最好按照您在有效发布请求中看到的方式显式插入区域的参数哈希信息。

阅读有关 factorygirl 属性和关联的主题： [https ://github.com/thoughtbot/factory_girl/issues/359](https://github.com/thoughtbot/factory_girl/issues/359)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-22T17:56:28.613

正如[指南](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#using-factories)指出的那样：

```
# Returns a hash of attributes that can be used to build a User instance
attrs = FactoryGirl.attributes_for(:user) 
```

# glassfish - glassfish 使用虚拟目录

> ID：10550722
> 
> 赞同：0
> 
> 时间：2012-05-11T11:46:37.310
> 
> 标签：glassfish, hosting, localhost

我正在尝试在我的 glassfish 服务器上托管一些文件。

我发现这篇文章解释了如何使用虚拟目录执行此操作：http: [//www.marceble.com/2009/07/virtual-directories-in-glassfish/](http://www.marceble.com/2009/07/virtual-directories-in-glassfish/)

但是当我冲浪时这对我不起作用：`localhost:8080/media/test.txt`

我得到：**HTTP 状态 404：请求的资源 () 不可用。**

我的 glassfish 控制面板的屏幕截图：http: [//i77.photobucket.com/albums/j74/bertyhell/glassfish_error.png](http://i77.photobucket.com/albums/j74/bertyhell/glassfish_error.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T10:56:51.593

更好的是[这篇文章](http://harkiran-howtos.blogspot.com/2009/08/map-external-directory-into-glassfish.html)。

对于 GlassFish 3.1.x，它现在是应用程序配置中的 glassfish-web.xml 文件。如果你使用这样的东西：

```
from=/media/* dir=C:/ 
```

或 glassfish-web.xml 文件中的相同：

```
<property name="alternatedocroot_1" value="from=/media/* dir=C:/"/> 
```

**确保您在计算机上创建了目录：C:/media**

**“from”必须与您计算机上的目录匹配。**

那么它将在这里可用：

```
http://{hostName}:{portNumber}/myapp/media/* 
```

# iphone - 带有 Strike 的字体

> ID：10550732
> 
> 赞同：2
> 
> 时间：2012-05-11T11:47:24.160
> 
> 标签：iphone, ios

我正在做一个处理当天任务的项目，比如记笔记。
所以我分配日常任务去做，当任务完成时，我希望在任务名称中划出一行。
我正在寻找具有此删除线但失败的适当字体系列。
所以请为此建议我一个 .ttf 字体名称，以便我可以在我的项目中使用该字体来满足我的要求。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T12:39:34.250

******选项1******

.

如果您想在多行模式下删除文本：使用**TTTAttributedLabel**

创建新的 TTTAttributedLabel.h 和 TTTAttributedLabel.m 文件（不是来自 GITHUB，因为我使用单/双删除线功能进行了调整）

[http://www.2shared.com/file/Z_qZpWVd/TTTAttributedLabel.html](http://www.2shared.com/file/Z_qZpWVd/TTTAttributedLabel.html)

[http://www.2shared.com/file/xXjmC-1M/TTTAttributedLabel.html](http://www.2shared.com/file/xXjmC-1M/TTTAttributedLabel.html)

以及需要删除线标签的地方 - 使用**TTTAttributedLabel**而不是**UILabel**。

设置*删除线*=

```
TTTAttributedLabel *labelName = [[TTTAttributedLabel alloc] init];

labelName.linkAttributes = [NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES] 
                forKey:@"TTTCustomStrikeOut"]; 
```

设置*双通*=

```
TTTAttributedLabel *labelName = [[TTTAttributedLabel alloc] init];

labelName.linkAttributes = [NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES] 
                forKey:@"TTTCustomDoubleStrikeOut"]; 
```

添加标签文本应该被删除的范围+提供可点击的链接（nil，无链接）：

```
//set link to nil, to NOT-have a link on taping on this label.
[labelName addLinkToURL:nil withRange:NSMakeRange(0, [labelName.text length])]; 
```

PS - 正确重新定位双删除线 - 请在第 483、484 和 489、490 行编辑 TTTAtributedLabel.m 文件（目前我从中心更改了上行 y-2 和下 y+2。调整它以获得更好的结果。）

.

******选项2******

.

将所有字符串符号转换为特殊的删除线字符。

你可以从这个主页获得它们：http: [//adamvarga.com/strike/](http://adamvarga.com/strike/)

然后您可以 - 例如，将必要的符号翻译放在语言文件中：

“A”=“A̶”；“B”=“B̶”；"C" = "C̶"; “D”=“D̶”；“E” = “E̶”；“F”=“F̶”；“G” = “G̶”；"H" = "H̶"; ……

并使用此函数将普通文本字符串转换为删除字符串：

```
- (NSString *)returnStrikedOutTextFromString:(NSString *)mString
{
    NSString * mNewString = @"";

    for(int i = 0; i<[mString length]; i++)
    {
        mNewString = [NSString stringWithFormat:@"%@%@",mNewString, 
        NSLocalizedString([[mString substringToIndex:i+1] substringFromIndex:i],nil)];
    }

    return mNewString;
} 
```

例如：

```
textLabel.text = [self returnStrikedOutTextFromString:@"string text"]; 
```

****选项 3****

我还建议尝试这里提到的 UILabel 子类：[Underline text in UIlabel](https://stackoverflow.com/questions/2711297/underline-text-in-uilabel/11826922#11826922)

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T12:00:30.740

使用下面的代码来划线：

```
NSString *string = Yourlabel.text;
CGSize stringSize = [string sizeWithFont:Yourlabel.font];
CGRect buttonFrame = Yourlabel.frame;
CGRect labelFrame = CGRectMake(buttonFrame.origin.x , 
buttonFrame.origin.y + stringSize.height/2, 
                                           stringSize.width, 2);
UILabel *lineLabel = [[UILabel alloc] initWithFrame:labelFrame];
lineLabel.backgroundColor = [UIColor blackColor];
[CellView addSubview:lineLabel]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T12:11:14.787

如果你使用另一个简单的想法，它的工作很好，也很容易......

只需在标签上方添加另一个标签，标签代码是

```
UILabel *canceledlable = [[UILabel alloc] initWithFrame:yourmainlableframe];
canceledlable.opaque = YES;
canceledlable.backgroundColor = [UIColor clearColor];
canceledlable.text = @"------------------------------------------------";
canceledlable.lineBreakMode = UILineBreakModeClip;
[self.view addSubview: canceledlable]; 
```

在这里哪个标签想要你删除线字体只是把它的框架给这里，当你的任务完成时添加这个标签希望，这对你有帮助...... :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-22T01:40:38.077

用 TTTAttributedLabel 试试这个添加。

```
@implementation TTTAttributedLabel (Additions)

- (void)setStrikeThroughOn:(BOOL)isStrikeThrough {
    NSString* text = self.text;
    [self setText:text afterInheritingLabelAttributesAndConfiguringWithBlock:^        NSMutableAttributedString *(NSMutableAttributedString *mutableAttributedString) {
    NSRange strikeRange = [[mutableAttributedString string] rangeOfString:text options:NSCaseInsensitiveSearch];
    [mutableAttributedString addAttribute:kTTTStrikeOutAttributeName value:[NSNumber numberWithBool:isStrikeThrough] range:strikeRange];
    return mutableAttributedString;
}];

// must trigger redraw
[self setNeedsDisplay];
}

@end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-29T19:50:41.230

在斯威夫特，

```
let label = UITextView(frame: CGRectMake(0, 0, 300, 100))
let strikeThroughAttributes = [NSStrikethroughStyleAttributeName: NSUnderlineStyle.StyleSingle.rawValue]
let labelString = NSAttributedString(string: "Hello, playground", attributes: strikeThroughAttributes)
label.attributedText = labelString 
```

# javascript - 在窗口中使用“事件处理程序”是否是确定窗口是否支持给定事件处理程序的安全方法？

> ID：10550734
> 
> 赞同：0
> 
> 时间：2012-05-11T11:47:32.290
> 
> 标签：javascript, events, window, handler, detect

所有功劳归于：

[http://benalman.com/news/2010/03/jquery-special-events/#add-and-remove-hashchange](http://benalman.com/news/2010/03/jquery-special-events/#add-and-remove-hashchange)

对于这种方法，但我们想知道是否执行以下操作：

```
if('onhashchange' in window){
    console.log('yep, window supports onhashchange');
}
else{
    console.log('nope, window does not support onhashchange');
} 
```

确定窗口对象是否支持 onhashchange 事件处理程序是一种安全的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T12:23:49.437

不，这通常不是一个安全的测试，尽管对于这个特定的事件来说可能是可以的，因为它相对较新。无法保证主机对象（例如`window`）将如何响应`in`操作符，并且某些浏览器（包括旧版本的 Firefox）不会返回`true`事件处理程序属性。以下文章有详细说明：

[http://perfectkills.com/detecting-event-support-without-browser-sniffing/](http://perfectionkills.com/detecting-event-support-without-browser-sniffing/)

似乎Firefox[在版本 9](https://developer.mozilla.org/en/DOM/DOM_event_handlers)中添加了[对使用运算符检测事件支持的支持，`in`](https://developer.mozilla.org/en/DOM/DOM_event_handlers)而[在 3.6](https://developer.mozilla.org/en/DOM/window.onhashchange)中添加了，因此除非有特殊行为，否则您的测试将在 Firefox 3.6 - 8.0 中给出假阴性。`onhashchange``onhashchange`

**更新**

我现在已经在 Firefox 3.6 中进行了测试，这似乎`onhashchange`是一个特殊情况，因为您的测试有效：`'onhashchange' in window`返回 true，而`'onload' in window`，例如，没有。看起来您的测试可能没问题，尽管我仍然建议您仔细测试所有目标浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:51:09.387

是的。它检查`'onhashchange'`对象中是否存在键`window`并返回布尔值。没有不安全的使用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-11T12:00:59.083

我会这样做：

```
if (window.onhashchange) ... 
```

# xstream - XStream：使用类属性的值作为元素名称

> ID：10550740
> 
> 赞同：1
> 
> 时间：2012-05-11T11:47:54.610
> 
> 标签：xstream

class 属性是一个热门的 XStream 主题：没有人想要它。

摆脱它的正确方法是编写一个自定义转换器（其他建议的调整仅在编组时起作用，而不是在解组时起作用）。一个很好的工作示例是[here](http://old.nabble.com/%22class%22-attribute-and-the-references-to-subclasses-in-a-hierarchy-td19494734.html)。

不幸的是，我需要一个以不同方式工作的转换器：我想使用类属性的值作为实际包含该属性的元素的名称。例如，而不是

```
<codecData class="videoCodec">
...
</codecData> 
```

和

```
<codecData class="audioCodec">
...
</codecData> 
```

我想

```
<videoCodec>
...
</videoCodec> 
```

和

```
<audioCodec>
...
</audioCodec> 
```

这样做的正确方法是什么？我编写这样一个转换器的尝试失败了。

假设我有

```
public class MediumData {
    public CodecData codecData;
    public String otherInfo;
}

public abstract class CodecData {
    public String name;
}

public class VideoCodec extends CodecData {
    public String videoInfo;
}

public class AudioCodec extends CodecData {
    public String audioInfo;
} 
```

谢谢你。

# delphi - Delphi中的串口同步

> ID：10550745
> 
> 赞同：2
> 
> 时间：2012-05-11T11:48:22.530
> 
> 标签：delphi, serial-port

我仍然对 TComPort 组件有问题，但这次不是组件本身，而是它背后的逻辑。我有一个设备女巫通过串行端口发送一些 ascii 字符串我需要 prase 这些字符串问题是计算机反应非常快，所以在事件 char 它只捕获字符串的一部分，其余的字符串稍后会回来......所以当它被接收时解析它是不可能的。

我正在考虑编写一个计时器来验证是否在 10 秒或更长时间内没有串行活动，然后将我保存到缓冲区中的字符串 prase。但是这种方法是不专业的，不是有一个空闲的事件女巫我可以听...等待我的问题的最佳解决方案。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T15:28:02.613

在使用了许多串行端口组件之后，到目前为止，我已经获得了最好的结果，通过使用`CreateFile('\\?\COM1',GENERIC_READ or GENERIC_WRITE,0,nil,OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL,0)`，将该句柄传递给一个 THandleStream 实例，并启动一个专用线程来读取它。我知道线程比编写事件处理程序需要更多的工作，但它仍然是处理使用串行端口引起的任何同步问题的最佳方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T14:09:27.023

OnRXChar 事件的典型处理程序：

```
procedure XXX.RXChar(Sender: TObject; Count: Integer);
begin
  ComPort.ReadStr(s, Count);
  Accumulator := Accumulator + s;
  if not AccumContainsPacketStart then
    Accumulator := ''
  else if AccumContainsPacketEndAfterStart then begin
    ExtractFullStringFromAccum;
    ParseIt;
  end;
end; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T14:09:53.310

**笔记。** 大多数通信端口组件都不知道何时向所有者报告。通常，负责从端口收集字节的线程会被操作系统通知一个或多个字节已准备好进行处理。然后，此信息会简单地弹出到您的级别。因此，当您期望消息被传输时，您会得到操作系统给您的信息。

您必须在全局缓冲区中缓冲所有传入的字符。当您获得消息字符串中的最后一个字符时，处理该消息。

下面是一个示例，其中消息开头用特殊字符标识，消息结尾用另一个字符标识。

如果您的消息是以另一种方式构建的，我相信您可以弄清楚如何调整代码。

```
var
  finalBuf: AnsiString;

{- Checking message }
Function ParseAndCheckMessage(const parseS: AnsiString) : Integer;
begin
  Result := 0; // Assume ok
  {- Make tests to confirm a valid message }
  ...
end;

procedure TMainForm.ComPortRxChar(Sender: TObject; Count: Integer);
var
  i,err: Integer;
  strBuf: AnsiString;
begin
  ComPort.ReadStr(strBuf, Count);
  for i := 1 to Length(strBuf) do
    case strBuf[i] of
      '$' : 
        finalBuf := '$';  // Start of package
      #10 :
        begin
          if (finalBuf <> '') and (finalBuf[1] = '$') then  // Simple validate check 
            begin
              SetLength( finalBuf, Length(finalBuf) - 1); // Strips CR
              err := ParseAndCheckMessage(finalBuf);
              if (err = 0) then 
                {- Handle validated string }
              else
                {- Handle error } 
            end;
          finalBuf := '';
        end; 
    else
      finalBuf := finalBuf + strBuf[i];  
    end;
end; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T20:06:09.240

如果您的协议有开始/结束标记，您可以使用 TComDataPacket 为您提供完整的数据包（当它们可用时）。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-08-22T06:57:14.203

对于一定数量的字符，我们可以在 ReadStr 之前使用延迟几毫秒来确保数据完全发送。4个字符的示例：

```
procedure TForm1.ComPort1RxChar(Sender: TObject; Count: Integer);
var
  Str: String;
  tegangan : real;
begin
  sleep(100); //delay for 100ms
  ComPort1.ReadStr(Str, 4); 
```

...

# c# - 代码访问安全性 - 了解 SecurityTransparent 为何可以调用 SecurityCritical

> ID：10550751
> 
> 赞同：6
> 
> 时间：2012-05-11T11:48:51.073
> 
> 标签：c#, asp.net, .net, security, code-access-security

我正在研究代码访问安全性。我费了一番脑筋，所以我想我最终会使用 Reflector 并开始研究 .NET 4.0 如何使用安全属性。

## 观察

该`System.IO.File.Delete`方法用`[SecuritySafeCritical]`属性修饰。

该`System.IO.File.Delete`方法委托给一个内部方法**InternalDelete**，该方法使用该`[SecurityCritical]`属性进行修饰。

**我在我的一个名为DeleteFile**的 MVC 应用程序类中有一个方法，它正在运行`SecurityTransparent`（我通过检查**DeleteFile**的 MethodInfo.IsSecurityCritical 属性进行了验证）

## 权限

根据我目前的理解，这意味着：

1.  System.IO.File.Delete 可以调用**InternalDelete**，因为`[SecuritySafeCritical]`方法可以调用`[SecurityCritical]`，因此不会引发 SecurityException。
2.  **DeleteFile**可以调用 System.IO.File.Delete 因为`[SecurityTransparent]`可以调用`[SecuritySafeCritical]`

所以基本上，在不调整任何开箱即用的安全设置的情况下，这段代码将成功删除一个名为 test.txt 的虚拟文件

```
namespace MyTestMvcApp
{
    public class FileHelpers()
    {
        // Has SecurityTransparent
        public void DeleteFile()
        {
            // Will succesfully delete the file
            File.Delete("test.txt");
        }
    }
} 
```

## 混乱

在 的**InternalDelete**方法中`System.IO.File.Delete`，它使用该`CodeAccessPermission.Demand`方法检查堆栈上的所有调用者是否具有必要的权限。我不太明白的是 MSDN 文档中的这一行`CodeAccessPermission.Demand`：

> 不检查调用该方法的代码的权限；检查从该代码的直接调用者开始，并继续向上堆栈。

所以我的问题是，如果我的应用程序的**DeleteFile**方法是`SecurityTransparent`，为什么允许调用`SecurityCritical`方法？

这可能是一个损坏的示例，可能缺少一些概念，但正如我所说，我仍在思考它，人们可以提供的任何见解越多，我就越会加深我的理解。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:18:26.127

您正在混淆两种 CAS 执行机制。虽然他们确实有一些互动，但它与您似乎担心的方式并不完全相同。对于以 Demand 为代表的完全许可要求，它们本质上是独立的。

CLR 在执行代码之前应用透明度验证。如果通过，CLR 将验证通过属性应用的任何声明性 CAS 要求。如果这些通过（或不存在），CLR 将执行代码，此时命令式（内联）需求将运行。

有关“不检查调用此方法的代码的权限”的 Demand 文档说明适用于 Demand 方法本身。换句话说，如果您有一个调用 Demand 的方法 Foo，则验证的调用堆栈将启动 Foo 的调用者，而不是 Foo 本身。例如，如果您有调用链`A -> B -> C -> Foo -> Demand`，则仅验证 A、B 和 C 以检查它们是否具有授予的权限。

# php - 如何让MySQL值加一，使用PHP

> ID：10550752
> 
> 赞同：0
> 
> 时间：2012-05-11T11:48:56.687
> 
> 标签：php, mysql, codeigniter

我有以下数据库表。

```
 id     article_content       article_views
   1       content..             48 
```

我正在尝试`article_views`使用 mysql 查询来增加列的值。

我知道我可以获取数字然后添加 +1 然后更新值，但是有没有更好的方法来做到这一点？

谢谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T11:50:31.590

您的查询变为 -

```
Update TABLE_NAME SET article_views = article_views+1 WHERE id = 'your_id' 
```

# testing - 如何轻松跨多个平台进行黑盒自动化测试？

> ID：10550754
> 
> 赞同：2
> 
> 时间：2012-05-11T11:49:05.273
> 
> 标签：testing, cross-platform, integration-testing, black-box-testing

我在一家软件开发公司工作，该公司开发跨多个平台的特定应用程序：Web App、iOS、Android、Mac 和 Windows。我们正在寻找一种方法，以一种易于维护的方式在所有这些平台上进行黑盒自动化测试。

到目前为止，Watir (watir.com) 似乎是 Web 应用程序的最佳解决方案（我更喜欢使用 Ruby），而 MonkeyTalk (www.gorillalogic.com/testing-tools/monkeytalk) 可能是我们移动应用程序的最佳解决方案平台（因为我们可以同时为两个平台编写一组测试）。我们仍然无法为我们的桌面平台找到一个好的解决方案。

我们是一家初创公司，因此我们没有专有解决方案的预算，而那些正在寻找开源解决方案的人。

是否有更好的方法来解决我们所处的情况？对于我们想要测试的各种平台是否有更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T11:19:01.357

您可以使用 cucumber 作为所有平台的主要测试框架（这将允许您在所有平台上拥有相同的场景和测试）并使用特定的工具来测试本机应用程序。

您可以为您的 Web 应用程序使用 cucumber + selenium Web 驱动程序，为 Android 和 iOS 使用葫芦 ( [http://github.com/calabash](http://github.com/calabash) )，为 Mac 应用程序使用 frank ( [https://github.com/moredip/Frank](https://github.com/moredip/Frank) )。Windows 可能也有一些可以与黄瓜一起使用的东西，但我个人对此一无所知。

所有这些工具都是免费的。

# java - 我应该使用什么？

> ID：10550755
> 
> 赞同：0
> 
> 时间：2012-05-11T11:49:08.000
> 
> 标签：java, variables, methods

我们有两种不同的（也许更多）方法来访问`x`变量：

`example.x`和`example.getX()`

我认为 first 非常快，但在某些情况下我们不能使用它（例如`e.getX()`当我们处理窗口事件时）。

问题是：我应该只使用`example.getX()`而不是`example.x`到处使用，还是这些方式的组合更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T11:52:34.427

这取决于。大多数人认为在面向对象设计中使用**封装是一种很好的做法。**这意味着应用程序的某些部分只能访问他们需要的属性，并且以非常可控的方式——在这种情况下，您可以使用 getter 和 setter 来保护访问和分配。

另一方面，如果您在同一类中设置字段，则可以使用点访问，只要您没有执行重要操作的智能设置器。

请注意，为了将一个类视为 Java Bean，它**必须**为每个字段（以及其他内容）具有公共的 setter/getter。当然，这仅适用于 Java，因此在与语言无关的上下文中考虑问题时，这并不是真正的理由。

# javascript - Backbone.model：对象函数 (a){return new n(a)} 没有方法“有”

> ID：10550758
> 
> 赞同：0
> 
> 时间：2012-05-11T11:49:10.960
> 
> 标签：javascript, backbone.js, requirejs

我确实写了以下代码（*）

当我尝试在我的 js 控制台中运行以下代码（**）时，
我得到以下结果：

```
"your attributes are: ", Object // json object taken from the server as I was expecting  

Object function (a){return new n(a)} has no method 'has' 
```

为什么我会收到关于 的问题`has no method 'has'`？

-

(**)

```
require.config({
    baseUrl: "/"
});

require(["js/models/task"], function ( Model ) {
    var model = new Model({id: 1});
    model.fetch();
    console.log(model.attributes);
}); 
```

(*)

```
define([], function () {
    var MyModel = Backbone.Model.extend({

        initialize: function ()
        {
            this.bind("change", function () {
                console.log("this model has been changed")
            });

            this.bind("error", function (model, error) {
                console.log(error);
            })
        },

        urlRoot: "/",
        url: function () {
            var base = this.urlRoot || (this.collection && this.collection.url) || "/";
            if (this.isNew()) return base;
            return base + this.id;
        },

        validate: function (attribute) {
            if (typeof attribute === "object") {
                console.log("your attributes are: ", attribute);
            }
        }

    });

    return MyModel;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T12:12:13.810

`fetch`是异步的，所以请尝试以下操作：

```
require(["js/models/task"], function ( Model ) {
    var model = new Model({id: 1});
    model.fetch({success: function() {
        console.log(model.attributes);
    }});

}); 
```

# ios - 核心图像，一次保存还是一个接一个？

> ID：10550760
> 
> 赞同：0
> 
> 时间：2012-05-11T11:49:11.060
> 
> 标签：ios, filter, core-image

我正在从 AVFoundation 获取图像，调整大小并裁剪它，然后获取该图像并对其应用一组过滤器。根据用户选择的内容，可以应用三个可能的过滤器，并保存三个单独的图像（每个图像一个过滤器）。

我想知道在应用过滤器后保存图像是否明智，或者等到应用并创建所有过滤器和图像，然后保存整个批次？

此外，如果他们选择最高分辨率和所有过滤器，手机将必须创建三个 1800x1800 图像，应用三个过滤器，然后保存三个文件。我担心这对设备来说太多了，所以想知道错开转换和保存是否明智？

您可以提供的任何指导都会很棒。我不需要代码示例（但请随意），我正在更多地研究最佳实践。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:57:38.413

在测试了各种方法之后，似乎没有比其他方法更快的方法了。我在创建每个图像后保存它，以便我可以从内存中释放它。

流程如下：

获取相机数据。--> 通过过滤器运行数据。--> 获取输出图像并转换为 CGImageRef。--> 保存并发布。

# google-app-engine - 搜索 API 的限制不起作用？

> ID：10550769
> 
> 赞同：1
> 
> 时间：2012-05-11T11:49:37.340
> 
> 标签：google-app-engine, full-text-search, gae-search

我添加了 11 个文档，其中数字字段设置为 1 到 11。并在数字字段上设置排序。

```
 SortOptions sortOptions = SortOptions.newBuilder()
            .addSortExpression(SortExpression.newBuilder()
                    .setExpression(NUMERIC_FIELD)
                    .setDirection(SortExpression.SortDirection.DESCENDING)
                    .setDefaultValue("0"))
            .setLimit(1000)
            .build();
    QueryOptions options = QueryOptions.newBuilder()
            .setLimit(maxResults)                       
            .setSortOptions(sortOptions)
            .setCursor(cursor)
            .build();
    Query query = Query.newBuilder().setOptions(options).build(queryString); 
```

当 maxResults 设置为 11 或更高时，它可以正常工作，但对于较低的值，返回的结果排序不正确。在我将此作为错误发布之前，我是否在某个地方犯了错误？

# php - 在货币转换时更改购物车列单价中的货币不包括税错误

> ID：10550779
> 
> 赞同：0
> 
> 时间：2012-05-11T11:50:18.193
> 
> 标签：php, magento, php-5.3, cart, magento-1.6

我有两个商店视图，一个是欧元（主要货币），另一个是美元。两家商店的税均为 21%，已包含在产品价格中。在购物车中，如果我将商店更改为美元商店视图，则“单价（不含税）”列的计算不正确。似乎只有在此字段上进行两次货币转换。

这是商店的内容

[http://dl.dropbox.com/u/546584/cart_problem_DOLLAR.png](http://dl.dropbox.com/u/546584/cart_problem_DOLLAR.png) http://dl.dropbox.com/u/546584/cart_problem_EUR.png

有人可以帮助我解决这个问题吗？我做了很多调试，但无法让自己走出隧道。呸！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T05:46:48.850

下载版本 1.7.0.2

复制到本地

Mage_Tax_Model_Sales_Total_Quote_Subtotal

那应该可以解决您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T12:13:37.480

如果商店正在保存价格，包括。税，那么你在计算价格时要小心。税。

如果税是 21%，那么价格包括。税是价格的 121%，不含税。税，因此价格不包括在内。税应该这样计算`$priceExclTax = $priceInclTax / 1.21;`。

# sharepoint - 使用 PowerShell 和 Web 服务删除 SharePoint Recyclebin

> ID：10550780
> 
> 赞同：0
> 
> 时间：2012-05-11T11:50:20.373
> 
> 标签：sharepoint, powershell

有人可以帮助我了解如何使用 powershell 和 web 服务删除 SharePoint 2007 /2010 Recyclebin。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:03:43.000

我不知道这是否是您想要的，但是您可以使用 powershell 中的这两行来清空 Web 的回收站：

```
$w = get-spweb http://localhost
$w.RecycleBin.DeleteAll() 
```

但是我从来没有将 powershell 和 web 服务结合起来，所以这可能不是你想要的。

# java - 使用 JExcel API 检查 excel 中的空单元格

> ID：10550782
> 
> 赞同：1
> 
> 时间：2012-05-11T11:50:23.427
> 
> 标签：java, api, jexcelapi

如何检查 Excel 表中的 CELL 是否为空且其中没有任何内容？我从左到右遍历一行，遇到空单元格时想停下来。我在用

```
 cell.getType()==CellType.EMPTY 
```

但它似乎不起作用。还，

```
if(cell.getContents() == "") is also not working. 
```

检查单元格是否为空白单元格的条件是什么？

谢谢阿布舍克 S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:17:06.090

```
 List cellDataList = new ArrayList();
XSSFWorkbook workbook = new XSSFWorkbook(fileInputStream);

                        XSSFSheet sheet = workbook.getSheetAt(0);

                        Iterator rows = sheet.rowIterator();

                        int number=sheet.getLastRowNum();

                        int lineNumber = 0;

                        while (rows.hasNext())

                        {
                            XSSFRow row = ((XSSFRow) rows.next());
                            lineNumber++;
                            if(lineNumber==1){continue;}

                            Iterator cells = row.cellIterator();
                            List cellTempList = new ArrayList();    
                            int current = 0, next =1;
                            while(cells.hasNext())

                            {

                                XSSFCell cell = (XSSFCell) cells.next();

                                current = cell.getColumnIndex();

                                if(current<next){

                                }
                                else{

                                    int loop = current-next;

                                    for(int k=0;k<loop+1;k++){

                                        cellTempList.add(null);
                                        next = next + 1;
                                    }
                                }
                                switch (cell.getCellType()) {
                                            case Cell.CELL_TYPE_STRING:
                                                System.out.println(cell.getRichStringCellValue().getString());
                                                cellTempList.add(cell.getRichStringCellValue().getString());
                                                break;
                                            case Cell.CELL_TYPE_NUMERIC:                                                    
                                                    System.out.println(cell.getNumericCellValue());
                                                    cellTempList.add(String.valueOf(cell.getNumericCellValue()));                                                   
                                                break;
                                            case Cell.CELL_TYPE_BOOLEAN:
                                                System.out.println(cell.getBooleanCellValue());
                                                break;
                                            case Cell.CELL_TYPE_FORMULA:
                                                System.out.println(cell.getCellFormula());
                                                cellTempList.add(cell.getCellFormula());
                                                break;                                              

                                            default:
                                                System.out.println("Inside default");
                                }
                                next = next + 1;

                            }
                            cellDataList.add(cellTempList); 
                         } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:13:31.103

```
String contents = cell.getContents();
if (contents != null && contents.length() != 0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T11:56:34.873

从以下链接[JExcel API](http://www.teamdev.com/downloads/jexcel/docs/JExcel-PGuide.html)中，检查`cell.isEmpty()`要测试的方法。

# database - 从数据库中索引数据

> ID：10550784
> 
> 赞同：0
> 
> 时间：2012-05-11T11:50:27.517
> 
> 标签：database, solr, indexing

我正在尝试从数据库中索引数据。我正在成功地做到这一点。但我有一个问题。我想为整个数据库使用一个索引。所有的 db 表至少有 3 个同名的列（我想要这样）。例如，我有这些表：members、new_members、books、journals 和 cds。所有这些都有名为：id、model、biog 的列。因此，在所有 db 表中，id（自动递增）从 1 开始。当我使用过滤器（fq=model:journal）查询 Solr 时，它什么也不返回。查询书籍会返回一部分数据（我有 5 行，它返回 2。我正在使用*:*来检索所有行）。我知道数据在 Solr 的“数据”文件中。我认为存在某种冲突。我怎样才能在没有任何冲突的情况下对所有这些表建立一个索引？

**数据配置.xml：**

```
<?xml version="1.0" encoding="utf-8"?>

<dataConfig>

  <dataSource type="JdbcDataSource" 
              driver="com.mysql.jdbc.Driver"
              url="jdbc:mysql://127.0.0.1:3306/rental" 
              user="root" 
              password="1a2b3c4d"/>

  <document>

    <entity name="members" pk="id" transformer="HTMLStripTransformer" query="select id, firstname, lastname, biog, model from members">
        <field column="id" name="id" /> 
        <field column="firstname" name="firstname" stripHTML="true" />
        <field column="lastname" name="lastname" stripHTML="true" />
        <field column="biog" name="biog" stripHTML="true" />
        <field column="model" name="model" stripHTML="true"  />
    </entity>

    <entity name="new_members" pk="id" transformer="HTMLStripTransformer" query="select id, firstname, lastname, biog, model from new_members">
        <field column="id" name="id" /> 
        <field column="firstname" name="firstname" stripHTML="true" />
        <field column="lastname" name="lastname" stripHTML="true" />
        <field column="biog" name="biog" stripHTML="true" />
        <field column="model" name="model" stripHTML="true" />
    </entity>

  <entity name="books" pk="id" transformer="HTMLStripTransformer" query="select id, title, description, model from books">
        <field column="id" name="id" /> 
        <field column="title" name="title" stripHTML="true" />
        <field column="description" name="biog" stripHTML="true" />
        <field column="model" name="model" stripHTML="true" />
    </entity>

  <entity name="journals" pk="id" transformer="HTMLStripTransformer" query="select id, title, description, model from journals">
        <field column="id" name="id" /> 
        <field column="title" name="title" stripHTML="true" />
        <field column="description" name="biog" stripHTML="true" />
        <field column="model" name="model" stripHTML="true" />
    </entity>

  <entity name="cds" pk="id" transformer="HTMLStripTransformer" query="select id, title, description, model from cd">
        <field column="id" name="id" /> 
        <field column="title" name="title" stripHTML="true" />
        <field column="description" name="biog" stripHTML="true" />
        <field column="model" name="model" stripHTML="true" />
    </entity>

  </document>
</dataConfig> 
```

**schema.xml（字段）：**

```
<fields>
  <field  name="id" type="string" indexed="true" stored="true" /> 
  <field  name="model" type="text_en" indexed="true" stored="true"  />
  <field  name="firstname" type="text_en" indexed="true" stored="true"/>
  <field  name="lastname" type="text_en" indexed="true" stored="true"/>
  <field  name="title" type="text_en" indexed="true" stored="true"/>
  <field  name="biog" type="text_en" indexed="true" stored="true"/>
</fields>
<uniqueKey>id</uniqueKey>
<defaultSearchField> biog </defaultSearchField> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T12:06:32.973

您的 uniqueKey 并不是真正唯一的，您需要每个实体具有与其他实体不同的 pk，一种简单的方法是在 id 上附加一些内容，例如书籍：

```
query="select CONCAT('b-',id) as id,..." 
```

这样书的 ID 将是 b-1，b-2，对具有不同前缀的其他表执行相同操作

# c# - Delphi 记录转换为 C# 结构并写入套接字

> ID：10550785
> 
> 赞同：1
> 
> 时间：2012-05-11T11:50:28.280
> 
> 标签：c#, delphi, pinvoke

我有以下德尔福代码：

```
type
   RegbusReq2=packed record 
     Funct:char;             
     Device:char;           
     Device1:char;
     Starting:integer;       
     Quantity:smallint;      
     _CRC:Word;              //CRC
     stroka:char;          
   end;

   type                         
     crcReg=packed record
     buf:array[0..2] of byte;
     value:array[0..5] of byte;
   end;

   type                          
   myRB=record                      
   case byte of
    0:(data:RegbusReq2);
    1:(Buff:crcReg);
   end;
...
procedure TForm1.Button3Click(Sender: TObject);
var
  DataReq:myRB;
  Output:array[1..15] of Byte;
  i:integer;
  nomP:string;
  st:string;
begin
cs1.Address:=edit5.Text;  
 cs1.Port := 6001;
typecon:=2;

DataReq.data.Funct:=chr(63);    
DataReq.data.Device:=chr(48);     
DataReq.data.Device1:=chr(49);    
DataReq.data.Starting:=768;     
DataReq.data.Quantity:=7;      
DataReq.data._CRC:=CRC2(@DataReq.Buff.value,6);      
  memo1.Lines.Add(IntToStr(DataReq.data._CRC));
DataReq.data.stroka:=chr(13);             
application.ProcessMessages();
  cs1.Active:=true;
  cs1.Socket.SendBuf(DataReq.data,SizeOf(DataReq.data));
  application.ProcessMessages();
  cs1.Socket.ReceiveBuf(output,SizeOf(output));         
  application.ProcessMessages();
  cs1.Active:=false;
  application.ProcessMessages();

if output[1]<>62 then begin
  showmessage('îøèáêà ñâÿçè');
  exit;
end;
  for i:=10 to 15 do
  begin
    nomp:= nomp + chr(Output[i]);
    st:=st + '_' + inttostr(output[i]);
  end;
  memo1.Lines.Add(inttostr(sizeof(DataReq.data)));
  memo1.Lines.Add(st);
  memo1.Lines.Add(DataReq.data.Funct);
  form1.Caption:=nomp;
  Button1.Enabled:=true;
end; 
```

此代码正在运行，我在 Delphi 中观看：http: [//i48.tinypic.com/ei6ph5.png](http://i48.tinypic.com/ei6ph5.png)

在 C# 中，我从以下结构代码开始：

```
[StructLayout(LayoutKind.Explicit, CharSet = CharSet.Ansi, Size=12)]
        struct RegBusRec
        {
            [FieldOffset(0)]
            public char Funct;
            [FieldOffset(1)]
            public char Device;
            [FieldOffset(2)]
            public char Device1;
            [FieldOffset(6)]
            public uint Starting;
            [FieldOffset(8)]
            public ushort Quantity;
            [FieldOffset(10)]
            public uint _CRC;
            [FieldOffset(11)]
            public char Message;
        } 
```

我尝试使用代码将 srtuct 转换为字节数组：

```
public static byte[] Serialize(object obj)
        {
            Type objectType = obj.GetType();
            int objectSize = Marshal.SizeOf(obj);
            IntPtr buffer = Marshal.AllocHGlobal(objectSize);
            Marshal.StructureToPtr(obj, buffer, false);
            byte[] array = new byte[objectSize];
            Marshal.Copy(buffer, array, 0, objectSize);
            Marshal.FreeHGlobal(buffer);
            return array;
        } 
```

并发送：

```
System.Net.Sockets.TcpClient cl = new System.Net.Sockets.TcpClient();
            cl.Connect(IPAddress.Parse("xxx.xxx.xxx.xxx"), 6001);
if (cl.Connected)
            {
RegBusRec req2 = new RegBusRec();
                req2.Funct = '?';
                req2.Device = '0';
                req2.Device = '1';
                req2.Starting = 768;
                req2.Quantity = 7;
                req2.Message = '\r';
byte[] data = Serialize(req2);
cl.Client.Send(data);
                cl.Client.Receive(output);
if (output[0] != 62)
                {
                    Console.WriteLine("Connection error!");
                    Console.ReadLine();
                }
} 
```

但我从设备收到错误消息。需要更正将 Delphi 代码转换为 C#。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T11:59:51.237

你的结构是错误的。它应该是：

```
[StructLayout(LayoutKind.Sequential, Pack=1, CharSet=CharSet.Ansi)]
struct RegBusRec
{
    public char Funct;
    public char Device;
    public char Device1;
    public int Starting;
    public short Quantity;
    public ushort _CRC;
    public char Message;
} 
```

Delphi`Integer`匹配 C# `int`。Delphi`Smallint`匹配 C# `short`。Delphi`Word`匹配 C# `ushort`。

您对显式布局的使用只会让您的生活变得艰难。使用顺序和`Pack`属性来简化事情。

在初始化结构的代码中，您编写：

```
req2.Device = '0';
req2.Device = '1'; 
```

我希望你打算写

```
req2.Device = '0';
req2.Device1 = '1'; 
```

我没有检查其他任何东西，可能还有其他我没有发现的错误。如果我是你，我会添加诊断代码以逐字节地发出你的序列化结构，这样你就可以确定你正在正确地序列化它。

# c# - NLog 不创建日志文件

> ID：10550788
> 
> 赞同：45
> 
> 时间：2012-05-11T11:50:33.997
> 
> 标签：c#, compact-framework, nlog

我正在尝试向使用 Windows Mobile 6.1 的移动设备上运行的应用程序添加日志记录。.NET Compact 框架 3.5。使用 NLog。

我安装了适当版本的 NLog 发行版。

但是没有创建日志文件。

这是我的`NLog.config`文件：

```
<?xml version="1.0" encoding="utf-8"?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <targets>
    <target name="logfile" xsi:type="File" fileName=".\Neolant.ASRM.Terminal.log" layout="${longdate}|${level}|${message}|${exception}" autoFlush="true"/>
  </targets>
  <rules>
    <logger name="*" minlevel="Info" writeTo="logfile" />
  </rules>
</nlog> 
```

这是我使用的测试代码：

```
public static void Main()
{
    try
    {
        AppDomain.CurrentDomain.UnhandledException += CurrentDomainOnUnhandledException;
        var logger = NLog.LogManager.GetLogger("UpperLevel");
        logger.Info("test test test.");
        try
        {
            throw new Exception("Unexpected!");
        }
        catch (Exception e)
        {
            var logger = NLog.LogManager.GetLogger("UpperLevel");
            logger.WarnException("An exception occured.", e);
        }
        throw new Exception("Suddenly!");           
    }
    finally
    {
        NLog.LogManager.Flush();
    }
}

private static void CurrentDomainOnUnhandledException(object sender, UnhandledExceptionEventArgs unhandledExceptionEventArgs)
{
    var logger = NLog.LogManager.GetLogger("UpperLevel");
    logger.FatalException("Application closed due to exception.", unhandledExceptionEventArgs.ExceptionObject as Exception);
    NLog.LogManager.Flush();
} 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2017-04-14T21:42:27.877

我遇到了这个问题，原来我的日志文件没有被复制到我的构建目录中。NLog github 页面给出了答案。（为了更好的可读性，我对段落进行了一些重新格式化。） [https://github.com/NLog/NLog/wiki/Logging-troubleshooting](https://github.com/NLog/NLog/wiki/Logging-troubleshooting)

NLog 找不到配置文件。当 NLog.config 文件配置为 Build Action = None 或 Copy to Output Directory = Do not copy in Visual Studio 时，可能会发生这种情况。

设置构建操作 = 内容和“复制到输出目录 = 如果更新则复制以解决此问题）

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-05-11T12:18:53.273

正在创建日志文件 - 但不在应用程序目录中。

使用[${basedir}](https://github.com/nlog/nlog/wiki/Basedir-Layout-Renderer)布局渲染器作为文件名的一部分被证明是一种解决方案。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-05-10T15:36:45.853

如果标记为答案的响应不是那么清楚，您可以查看示例

```
<targets>
  <target xsi:type="Console" name="console" 
    layout="${longdate}|${level}|${message}" />
  <target xsi:type="File" name="ErrorLog" fileName="${basedir}/error.txt"
          layout="${longdate}
          Trace: ${stacktrace} 
          ${message}" />
  <target xsi:type="File" name="AccessLog" fileName="${basedir}/access.txt"
          layout="${shortdate} | ${message}" />
</targets> 
```

[使用 NLog 中的 AppData 位置](https://stackoverflow.com/questions/2000189/appdata-for-nlog)从此处获取

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2018-04-24T07:54:04.337

来自[nlog 故障排除指南](https://github.com/NLog/NLog/wiki/Logging-troubleshooting)

请检查 Nlog.config 文件属性：复制到输出目录应**始终为复制**

请查看图片链接[https://i.stack.imgur.com/AlUG5.png](https://i.stack.imgur.com/AlUG5.png)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-05-17T16:18:45.057

我的问题与权限有关，日志文件需要允许进程写入它，没有写入权限，您将不会获得任何文件。

以下是在 IIS 中为网站修复它的方法：

1.  在Windows资源管理器中右键单击您的文件夹并选择**属性**
2.  选择**安全**选项卡
3.  点击**编辑**
4.  点击**添加**
5.  在文本框中键入“ **IIS AppPool\YourAppPoolName** ” *，将 YourAppPoolName 替换为您的站点在其下运行的应用程序池的实际名称*
6.  单击**检查名称**
7.  点击**确定**

安全脚注：从安全方面来看，最佳实践是使用 ApplicationPoolIdentity，因为它是一个动态创建的非特权帐户。更多阅读：[https ://docs.microsoft.com/en-us/iis/manage/configuring-security/application-pool-identities](https://docs.microsoft.com/en-us/iis/manage/configuring-security/application-pool-identities)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-06-19T06:49:58.770

从 nlog 故障排除指南：

[https://github.com/NLog/NLog/wiki/Logging-troubleshooting](https://github.com/NLog/NLog/wiki/Logging-troubleshooting)

如果你知道你的配置文件肯定被找到了，暂时用下面的替换你的 NLog.config 文件的部分并尝试一下。

此规则将匹配您创建的任何记录器，如果有效，它将在“基本目录”中放置一个 log.txt 文件 - 这是**您的测试实例的“bin”目录，**例如，如果您在调试中运行模式下，您会在 bin > debug 文件夹中看到 log.txt。（这在故障排除指南中没有解释得很清楚）。

如果这有效，那么您知道问题出在您的规则上：

```
<nlog throwExceptions="true">
  <targets>
    <target name="file" type="File" fileName="${basedir}/log.txt" />
  </targets>
  <rules>
    <logger name="*" minLevel="Trace" writeTo="file" />
  </rules>
</nlog> 
```

**我发现只有 name="file" 对目标有效 - 其他值没有**

如上所述添加 throwExceptions="true" 还可以确保您在调试时收到有用的错误消息。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-12-22T11:18:18.657

就我而言，在定义规则后我错过了规则就像一个魅力

```
 <rules>
    <logger name="*" minlevel="Trace" writeTo="logfile" />
    <!-- add your logging rules here -->

    <!--
    Write all events with minimal level of Debug (So Debug, Info, Warn, Error and Fatal, but not Trace)  to "f"
    <logger name="*" minlevel="Debug" writeTo="f" />
    -->
  </rules> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-07-07T17:27:34.330

在这个问题上花了很多时间。这是我的问题。我正在使用安装项目来安装带有 MSI 的 Windows 服务。我必须手动将 NLog.config 添加到安装程序的输出中，以确保将其复制到服务的安装目录中

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-24T11:32:56.103

在我的情况下，一个`WebAPI`应用程序，我通过将`IIS_IUSRS`修改权限授予网站文件夹的修改权限来解决问题`C:\inetpub\wwwroot\my_website`

[![在此处输入图像描述](../Images/688fad3fae14f3ab9a2fadb7ba4f0b3d.png)](https://i.stack.imgur.com/YpmfF.jpg)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-08T14:26:44.503

为了解决这个问题，我必须以管理员模式运行我的应用程序。我怀疑windows有一个更新突然阻止exe创建（日志）文件，因为exe总是可以在没有管理员权限的情况下预先登录。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-09-13T11:37:53.477

在我的情况下，我不得不在代码中手动加载 NLog.config 文件，因为它不是自动找到的。加载配置必须在生成日志之前完成。

```
LogManager.LoadConfiguration(@"D:\doe\ConsoleApp2\ConsoleApp2\NLog.config"); 
```

之后我得到了日志文件和控制台输出。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-08-22T11:40:06.953

我也遇到了同样的问题，终于解决了。我有一个 Web 应用程序，我想在其中实现 NLog。请找到以下步骤来实现 NLog。

第 1 步：- 转到 NuGet 包管理器并安装以下包。 [![在此处输入图像描述](../Images/a227ea3d6359c2c9c3ed716388fe9f7c.png)](https://i.stack.imgur.com/yCjRN.png)

第 2 步：- 打开 Web.config 并添加以下行

```
<configSections>
<section name="nlog" type="NLog.Config.ConfigSectionHandler, NLog"/>
</configSections>
 <nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.nlog-project.org/schemas/NLog.xsd NLog.xsd"
  autoReload="true"
  throwExceptions="false"
  internalLogLevel="Off" internalLogFile="D:\projects\NlogWeb\nlog-internal.log">
<targets>
  <target name="console" xsi:type="ColoredConsole" layout="${message}" />
  <!--Write logs to File-->
  <target name="file" xsi:type="File" fileName="D:\projects\NlogWeb\ErrorLogFile.log" layout="--------------------- ${level}(${longdate})${machinename}-------------------- ${newline}
Exception Type:${exception:format=Type}${newline} 
Exception Message:${exception:format=Message}${newline}  
Stack Trace:${exception:format=Stack Trace}${newline}  
Additional Info:${message}${newline}" >
</target>  
</targets>   
<rules>

  <logger name="*" minlevel="trace" writeTo="file" />
</rules>
</nlog> 
```

第 3 步：- 现在是在 .cs 文件中调用的最后一个配置。

```
using NLog;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace NlogWeb
{
public partial class Home : System.Web.UI.Page
{
    private static Logger logger = LogManager.GetCurrentClassLogger();
    protected void Page_Load(object sender, EventArgs e)
    {
        try
        {
            throw new Exception("Divide By Zero Exception", new DivideByZeroException());
        }
        catch (Exception ex)
        {                 
            logger.Error(ex.Message);
        }
    }
  }
} 
```

我们已经做到了。现在执行您的代码并享受日志记录。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2018-08-16T08:11:44.980

出于简单的故障排除目的，启动 VisualStudio 以管理员身份运行。这将有助于整理在调试时创建日志文件的权限。

还在每个目标部分中使用 createDirs=true 以在目标部分提供的文件路径中自动创建缺少的文件夹。

# c# - C# 路径中的非法字符

> ID：10550798
> 
> 赞同：4
> 
> 时间：2012-05-11T11:51:30.850
> 
> 标签：c#

我使用以下代码在路径中获取非法字符：

```
string fileNameExisting = Application.StartupPath + "\\CodesLocation\\Template.pdf";
PdfReader templateFile = new PdfReader(fileNameExisting); 
```

我测试了一些变化：

```
string fileNameExisting = @Application.StartupPath + "\CodesLocation\Template.pdf";
PdfReader templateFile = new PdfReader(fileNameExisting); 
```

但它仍然得到同样的非法错误。

谁能帮我看看我的代码是否错误？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-11T11:55:49.007

我建议使用适当的方式加入 .net 中的路径： [Path.Combine](http://msdn.microsoft.com/en-us/library/dd784047)

所以

```
Path.Combine(Application.StartupPath, "CodesLocation","Template.pdf"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T11:55:38.373

字符串文字前面的 at 关闭`\`转义（在变量前面，它明确地将变量标记为*not a keyword*）：

```
Path.Combine(Application.StartupPath, @"CodesLocation\Template.pdf"); 
```

并且`Path.Combine`是连接路径的最先进方法（独立于平台，处理额外的斜线）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T11:56:24.823

你最好使用
`Path.Combine(Application.StartupPath, "CodesLocation\\Template.pdf")`. 除此之外检查 Application.StartupPath 是否以`\`.

# extjs4 - ExtJs：组合框中的搜索过滤器

> ID：10550802
> 
> 赞同：0
> 
> 时间：2012-05-11T11:51:51.907
> 
> 标签：extjs4

我有一个包含一组值的组合框，

```
Ext.define('loincList', {
            extend: 'Ext.data.Model',
            fields: [{ name: 'loincNumber', mapping: 'loincNumber' },
                     { name: 'component', mapping: 'component' }            
            ]
        });    

ds = Ext.create('Ext.data.Store', {
            model: 'loincList',
            proxy: {
                type: 'ajax',
                url : url+'/lochweb/loch/LOINCData/getLOINCData',
                reader: {
                    type: 'json',
                    root: 'LOINCData'
                }
            }
        }); 
```

组合框：

```
{
        xtype: 'combo',
        fieldLabel: 'Search Loinc Code',
        name: "loincId",       
        displayField: 'loincNumber',                    
        valueField: 'id',
        width: 400,                 
        store: ds,
        queryMode: 'local',
        allowBlank:false,
        listConfig: {
            getInnerTpl: function() {
                return '<div data-qtip="{loincNumber}.{component}">{loincNumber} {component} {status}</div>';
            }
        }

    } 
```

当我在组合框中输入数字时，它会根据输入的数字进行过滤，但是当我输入文本时，它不会根据输入的文本进行过滤。**如何根据输入的文本进行过滤。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T12:07:04.360

过滤在服务器端工作，如果你打开像 Firebug 这样的东西，你会看到特殊的参数（通常命名为过滤器）和你在控件中输入的文本，所以你需要检查你的服务器端发生了什么。您需要在服务器端处理过滤器文本并根据需要制作过滤器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T16:43:03.477

当您将数据键入组合框时，它将根据`displayField`. 因此，我认为当您“键入文本时，它不会根据输入的文本进行过滤”，因为组合中的任何项目都没有`displayField`与您键入的文本一样的前缀。

# php - 在 mysql/php 中插入错误

> ID：10550807
> 
> 赞同：0
> 
> 时间：2012-05-11T11:52:13.780
> 
> 标签：php, mysql

我有这个功能：

```
 public static function insert_user($user)
{
    $con = mysql_connect("localhost","root","") or die(mysql_error());
    mysql_select_db("speakom",$con) or die(mysql_error());
    mysql_query("INSERT INTO user (user_ip,user_name,full_name,email_address,password,gender,birthday,banned,role,country) 
        VALUES('".$user->ip."','".$user->name."','".$user->full_name."','".$user->email."','".$user->password."',".$user->gender.",'".$user->birthday."',".$user->banned.",".$user->role.",'".$user->country."'") or die(mysql_error());
    mysql_close($con);
} 
```

我得到这个错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的 '' 附近使用正确的语法

错误指向哪里？我怎么知道错误在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T11:54:49.807

您缺少`)`该`VALUES (`子句的结尾。通常，在将 SQL 传递给`mysql_query`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T12:03:09.273

不要大喊大叫，您应该使用 PDO 和准备好的语句，这是 PDO 风格的答案：

```
$con = new PDO('mysql:host=localhost;dbname=speakom', 'root', ''); // optionally add encoding options
$con->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); // enable exception throwing
$stmt = $db->prepare('INSERT INTO user (user_ip, user_name, full_name, email_address, password, gender, birthday, banned, role, country) 
    VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)');
$stmt->execute(array(
    $user->ip, $user->name, $user->full_name, $user->email, $user->password, 
    $user->gender, $user->birthday, $user->banned, $user->role, $user->country,
)); 
```

**免责声明**没有对此进行测试，但它应该给你一个好主意:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T11:55:43.030

你会跑吗

```
echo "INSERT INTO user (user_ip,user_name,full_name,email_address,password,gender,birthday,banned,role,country)      VALUES('".$user->ip."','".$user->name."','".$user->full_name."','".$user->email."','".$user->password."',".$user->gender.",'".$user->birthday."',".$user->banned.",".$user->role.",'".$user->country."'"; 
```

我建议你使用 `user` 而不是`user`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T11:56:34.107

```
VALUES('".$user->ip."','".$user->name."','".$user->full_name."','".$user->email."','".$user->password."',".$user->gender.",'".$user->birthday."',".$user->banned.",".$user->role.",'".$user->country."'" 
```

你`)`最后不见了。顺便说一句，使用 PDO 或 mysqli。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-11T11:56:39.443

您要插入的某些值不在引号中，并且您错过`)`了`VALUES`. 尝试这个

```
mysql_query("INSERT INTO user (user_ip,user_name,full_name,email_address,password,gender,birthday,banned,role,country) 
    VALUES('$user->ip', '$user->name','$user->full_name', '$user->email', '$user->password', '$user->gender', '$user->birthday', '$user->banned', '$user->role', '$user->country')") or die(mysql_error()); 
```

# dictionary - Xquery 中的字典

> ID：10550808
> 
> 赞同：2
> 
> 时间：2012-05-11T11:52:16.403
> 
> 标签：dictionary, xquery

Xquery 中是否有任何字典格式？

在 python 中，我们可以使用`dict(zip())`组合两个列表，但是在 Xquery 中，我们有这样的功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T13:46:35.403

要在 XQuery 中组合两个列表（序列），语法是：

```
let $combined-list := ($seq1, $seq2) 
```

例如：

```
let $list1 := ('a', 'b', 'c')
let $list2 := ('d', 'e', 'f')
let $combined-list := ($list1, $list2) 
```

您还可以使用以下方法删除重复项：

```
distinct-values($list1, $list2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T12:48:53.730

**我不知道**，但这样的功能（称为“地图”）可能出现在 XSLT 3.0 或 XPath 3:0 中。

请参阅 Michael Kay 的这篇文章：http: [//dev.saxonica.com/blog/mike/2012/01/#000188](http://dev.saxonica.com/blog/mike/2012/01/#000188)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T12:52:29.303

虽然这不是标准的一部分，但 BaseX 目前有一个可用的[地图模块](http://docs.basex.org/wiki/Map_Module)。

# php - 使用 zend 框架找不到请求 URL

> ID：10550811
> 
> 赞同：-2
> 
> 时间：2012-05-11T11:52:25.013
> 
> 标签：php, zend-framework, apache2

我用 Zend Framework 创建了一个新项目，如果我运行 Index 控制器，它就会运行，但如果我运行一个新控制器，它就不起作用。

它返回： **在此服务器上找不到请求 URL /MyProject/quickstart/public/mycontroller/。**

这是我的 apache2.conf 文件

```
 #
# Based upon the NCSA server configuration files originally by Rob McCool.
#
# This is the main Apache server configuration file.  It contains the
# configuration directives that give the server its instructions.
# See http://httpd.apache.org/docs/2.2/ for detailed information about
# the directives.
#
# Do NOT simply read the instructions in here without understanding
# what they do.  They're here only as hints or reminders.  If you are unsure
# consult the online docs. You have been warned.  
#
# The configuration directives are grouped into three basic sections:
#  1\. Directives that control the operation of the Apache server process as a
#     whole (the 'global environment').
#  2\. Directives that define the parameters of the 'main' or 'default' server,
#     which responds to requests that aren't handled by a virtual host.
#     These directives also provide default values for the settings
#     of all virtual hosts.
#  3\. Settings for virtual hosts, which allow Web requests to be sent to
#     different IP addresses or hostnames and have them handled by the
#     same Apache server process.
#
# Configuration and logfile names: If the filenames you specify for many
# of the server's control files begin with "/" (or "drive:/" for Win32), the
# server will use that explicit path.  If the filenames do *not* begin
# with "/", the value of ServerRoot is prepended -- so "/var/log/apache2/foo.log"
# with ServerRoot set to "" will be interpreted by the
# server as "//var/log/apache2/foo.log".
#

### Section 1: Global Environment
#
# The directives in this section affect the overall operation of Apache,
# such as the number of concurrent requests it can handle or where it
# can find its configuration files.
#

#
# ServerRoot: The top of the directory tree under which the server's
# configuration, error, and log files are kept.
#
# NOTE!  If you intend to place this on an NFS (or otherwise network)
# mounted filesystem then please read the LockFile documentation (available
# at <URL:http://httpd.apache.org/docs-2.1/mod/mpm_common.html#lockfile>);
# you will save yourself a lot of trouble.
#
# Do NOT add a slash at the end of the directory path.
#
ServerRoot "/etc/apache2"

#
# The accept serialization lock file MUST BE STORED ON A LOCAL DISK.
#
#<IfModule !mpm_winnt.c>
#<IfModule !mpm_netware.c>
LockFile /var/lock/apache2/accept.lock
#</IfModule>
#</IfModule>

#
# PidFile: The file in which the server should record its process
# identification number when it starts.
# This needs to be set in /etc/apache2/envvars
#
PidFile ${APACHE_PID_FILE}

#
# Timeout: The number of seconds before receives and sends time out.
#
Timeout 300

#
# KeepAlive: Whether or not to allow persistent connections (more than
# one request per connection). Set to "Off" to deactivate.
#
KeepAlive On

#
# MaxKeepAliveRequests: The maximum number of requests to allow
# during a persistent connection. Set to 0 to allow an unlimited amount.
# We recommend you leave this number high, for maximum performance.
#
MaxKeepAliveRequests 100

#
# KeepAliveTimeout: Number of seconds to wait for the next request from the
# same client on the same connection.
#
KeepAliveTimeout 15

##
## Server-Pool Size Regulation (MPM specific)
## 

# prefork MPM
# StartServers: number of server processes to start
# MinSpareServers: minimum number of server processes which are kept spare
# MaxSpareServers: maximum number of server processes which are kept spare
# MaxClients: maximum number of server processes allowed to start
# MaxRequestsPerChild: maximum number of requests a server process serves
<IfModule mpm_prefork_module>
    StartServers          5
    MinSpareServers       5
    MaxSpareServers      10
    MaxClients          150
    MaxRequestsPerChild   0
</IfModule>

# worker MPM
# StartServers: initial number of server processes to start
# MaxClients: maximum number of simultaneous client connections
# MinSpareThreads: minimum number of worker threads which are kept spare
# MaxSpareThreads: maximum number of worker threads which are kept spare
# ThreadsPerChild: constant number of worker threads in each server process
# MaxRequestsPerChild: maximum number of requests a server process serves
<IfModule mpm_worker_module>
    StartServers          2
    MinSpareThreads      25
    MaxSpareThreads      75 
    ThreadLimit          64
    ThreadsPerChild      25
    MaxClients          150
    MaxRequestsPerChild   0
</IfModule>

# event MPM
# StartServers: initial number of server processes to start
# MaxClients: maximum number of simultaneous client connections
# MinSpareThreads: minimum number of worker threads which are kept spare
# MaxSpareThreads: maximum number of worker threads which are kept spare
# ThreadsPerChild: constant number of worker threads in each server process
# MaxRequestsPerChild: maximum number of requests a server process serves
<IfModule mpm_event_module>
    StartServers          2
    MaxClients          150
    MinSpareThreads      25
    MaxSpareThreads      75 
    ThreadLimit          64
    ThreadsPerChild      25
    MaxRequestsPerChild   0
</IfModule>

# These need to be set in /etc/apache2/envvars
User ${APACHE_RUN_USER}
Group ${APACHE_RUN_GROUP}

#
# AccessFileName: The name of the file to look for in each directory
# for additional configuration directives.  See also the AllowOverride
# directive.
#

AccessFileName .htaccess

#
# The following lines prevent .htaccess and .htpasswd files from being 
# viewed by Web clients. 
#
<Files ~ "^\.ht">
    Order allow,deny
    Deny from all
    Satisfy all
</Files>

#
# DefaultType is the default MIME type the server will use for a document
# if it cannot otherwise determine one, such as from filename extensions.
# If your server contains mostly text or HTML documents, "text/plain" is
# a good value.  If most of your content is binary, such as applications
# or images, you may want to use "application/octet-stream" instead to
# keep browsers from trying to display binary files as though they are
# text.
#
DefaultType text/plain

#
# HostnameLookups: Log the names of clients or just their IP addresses
# e.g., www.apache.org (on) or 204.62.129.132 (off).
# The default is off because it'd be overall better for the net if people
# had to knowingly turn this feature on, since enabling it means that
# each client request will result in AT LEAST one lookup request to the
# nameserver.
#
HostnameLookups Off

# ErrorLog: The location of the error log file.
# If you do not specify an ErrorLog directive within a <VirtualHost>
# container, error messages relating to that virtual host will be
# logged here.  If you *do* define an error logfile for a <VirtualHost>
# container, that host's errors will be logged there and not here.
#
ErrorLog /var/log/apache2/error.log

#
# LogLevel: Control the number of messages logged to the error_log.
# Possible values include: debug, info, notice, warn, error, crit,
# alert, emerg.
#
LogLevel warn

# Include module configuration:
Include /etc/apache2/mods-enabled/*.load
Include /etc/apache2/mods-enabled/*.conf

# Include all the user configurations:
Include /etc/apache2/httpd.conf

# Include ports listing
Include /etc/apache2/ports.conf

#
# The following directives define some format nicknames for use with
# a CustomLog directive (see below).
# If you are behind a reverse proxy, you might want to change %h into %{X-Forwarded-For}i
#
LogFormat "%v:%p %h %l %u %t \"%r\" %>s %O \"%{Referer}i\" \"%{User-Agent}i\"" vhost_combined
LogFormat "%h %l %u %t \"%r\" %>s %O \"%{Referer}i\" \"%{User-Agent}i\"" combined
LogFormat "%h %l %u %t \"%r\" %>s %O" common
LogFormat "%{Referer}i -> %U" referer
LogFormat "%{User-agent}i" agent

#
# Define an access log for VirtualHosts that don't define their own logfile
CustomLog /var/log/apache2/other_vhosts_access.log vhost_combined

# Include of directories ignores editors' and dpkg's backup files,
# see README.Debian for details.

# Include generic snippets of statements
Include /etc/apache2/conf.d/

# Include the virtual host configurations:
Include /etc/apache2/sites-enabled/

<VirtualHost *:80>
    DocumentRoot "/var/www/MyProject/quickstart/public"

<Directory "/var/www/MyProject/quickstart/public">
  Options Indexes MultiViews FollowSymLinks
  AllowOverride All
  Order allow,deny
  Allow from all
</Directory>

</VirtualHost> 
```

这是我的 .htaccess 文件：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

有什么建议吗？

**[我的解决方案]** 在 apache.conf 中添加这一行

DirectoryIndex index.php AllowOverride All Order allow,deny Allow from all

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T12:33:59.550

在您的公共文件夹中创建`.htaccess`包含下一个内容的文件（我不知道您的项目结构，但它是 Zend Framework 的默认配置）：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

# mercurial - 解压缩数据时出现错误 -3：无效距离太远

> ID：10550813
> 
> 赞同：1
> 
> 时间：2012-05-11T11:52:32.690
> 
> 标签：mercurial

我们的 CI 服务器上有一个 Mercurial 存储库，可通过 Windows 网络共享 ( `\\server\hg_repo`) 使用。我们的 7 名开发人员团队定期推送和拉取那里。CI服务器本身也很明显。

定期存储库因错误而损坏：

```
stdout: requesting all changes
adding changesets
adding manifests

stderr: transaction abort!
rollback completed
** unknown exception encountered, please report by visiting
** http://mercurial.selenic.com/wiki/BugTracker
** Python 2.6.6 (r266:84297, Aug 24 2010, 18:13:38) [MSC v.1500 64 bit (AMD64)]
** Mercurial Distributed SCM (version 2.0.1)
** Extensions loaded: 
Traceback (most recent call last):
File "hg", line 42, in <module>
File "mercurial\dispatch.pyo", line 27, in run
File "mercurial\dispatch.pyo", line 64, in dispatch
File "mercurial\dispatch.pyo", line 87, in _runcatch
File "mercurial\dispatch.pyo", line 684, in _dispatch
File "mercurial\dispatch.pyo", line 466, in runcommand
File "mercurial\dispatch.pyo", line 738, in _runcommand
File "mercurial\dispatch.pyo", line 692, in checkargs
File "mercurial\dispatch.pyo", line 681, in <lambda>
File "mercurial\util.pyo", line 455, in check
File "mercurial\commands.pyo", line 1137, in clone
File "mercurial\hg.pyo", line 347, in clone
File "mercurial\localrepo.pyo", line 2056, in clone
File "mercurial\localrepo.pyo", line 1486, in pull
File "mercurial\localrepo.pyo", line 1871, in addchangegroup
File "mercurial\revlog.pyo", line 1157, in addgroup
File "mercurial\changegroup.pyo", line 187, in deltachunk
File "mercurial\changegroup.pyo", line 152, in chunklength
File "mercurial\changegroup.pyo", line 17, in readexactly
File "mercurial\util.pyo", line 863, in read
File "mercurial\util.pyo", line 841, in splitbig
File "mercurial\localrepo.pyo", line 1774, in gengroup
File "mercurial\revlog.pyo", line 1122, in group
File "mercurial\changegroup.pyo", line 244, in revchunk
File "mercurial\revlog.pyo", line 852, in revdiff
File "mercurial\revlog.pyo", line 831, in _chunk
File "mercurial\revlog.pyo", line 115, in decompress
zlib.error: Error -3 while decompressing data: invalid distance too far back 
```

有趣的是，并非所有开发人员都可能出现错误，例如当我可以毫无错误地进行拉/推时，CI 服务器出现错误。

当我们从其他副本重新创建中央仓库时，它又可以正常工作了。

如何解决此错误？

**

## 更新：

**

当它今天再次发生时，我运行`hg verify`它的混淆输出如下：

```
XXX> hg verify
checking changesets
checking manifests
hg.exe :  2355: reading manifest delta 2da8374dc3db: Error -3 while decompressing data: invalid distance too far back
    + CategoryInfo          : NotSpecified: ( 2355: reading ...ce too far back:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError

 2356: reading manifest delta 784e9c245c61: unknown compression type '\xfb'
 2357: reading manifest delta 5b147ce7d2a5: unknown compression type 'e'
 2358: reading manifest delta e1aa758953b2: unknown compression type '\xb3'
 2359: reading manifest delta 61dcc0da8106: unknown compression type 'F'
 2360: reading manifest delta 7579106dd2fe: unknown compression type '\xfa'
 2361: reading manifest delta b021c8e5ae34: unknown compression type '\xd2'
 2362: reading manifest delta 04e2a8673e61: unknown compression type '\x84'
crosschecking files in changesets and manifests
checking files
 XXX.csproj@2358: 564af8d2dcea not in manifests
 XXX.cs@2356: d1d2086e 9b69 not in manifests
.......... // here are more 'not in manifests errors'
20 integrity errors encountered!
(first damaged changeset appears to be 2355)
14811 files, 3040 changesets, 31214 total revisions 
```

# javascript - 如何在页面中捕获“正文”和“正文”事件[Jquery]

> ID：10550815
> 
> 赞同：0
> 
> 时间：2012-05-11T11:52:40.117
> 
> 标签：javascript, jquery-selectors, jquery

我当前的代码做什么：我有这个 HTML

```
 <li>
   <span>Logged in as</span>&nbsp;
   <a class="user" href="#"><?php echo $this->loggedas ?></a>&nbsp;
   <a id="loginarrow" href="javascript: void(0);"></a>
 </li> 
```

这是我上面登录箭头 id 的 JS

```
 $("#loginarrow").click(function() {
   $("#logindrop").toggle("slow");
   return false;
 }); 
```

它工作得很好，但我可以通过再次单击它来关闭它。我不想要所以我想要它，如果它打开并且我点击背景，那么它必须关闭。为此我这样做了

```
 $("#loginarrow,body").click(function() {
   $("#logindrop").toggle("slow");
   return false;
 }); 
```

现在它的工作很酷，但还有另一个问题。

1 = 我在页面（正文）中有许多其他 html 元素，其中还有其他事件要调用。所以在这种情况下，每当我单击页面中的其他元素时，它就会切换我的这个 div 登录箭头。

我想要相同的功能，但不是仅在背景上的其他元素上。任何提示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T11:58:51.223

仅在可见时关闭它。

```
$("body").click(function() { 
   if ($("#logindrop").is(":visible"))
      $("#logindrop").hide("slow");       
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T11:59:06.640

良好浏览器性能的基本设计原则是仅在您对事件感兴趣时捕获事件。

因此，将您的`.click()`处理程序放在`#loginarrow`元素上，但在该处理程序中注册一个*一次性*事件处理程序，该处理程序`body`将再次关闭它。类似（未经测试）：

```
$('#loginarrow').click(function() {
    $('#logindrop').show('slow');
    $('body').one('click', function() {
        $('#logindrop').hide('slow');
    });
    return false;
}); 
```

这将确保您不会不必要地拦截*每次*点击，`body`除非您确实需要。

​见[http://jsfiddle.net/alnitak/vPHaj/](http://jsfiddle.net/alnitak/vPHaj/)

# c# - C# 匿名递归和 Y-combinator 性能

> ID：10550817
> 
> 赞同：1
> 
> 时间：2012-05-11T11:52:54.480
> 
> 标签：c#, performance, functional-programming, anonymous-recursion

下面是匿名递归的函数和测试。第一个是真正的Y-combinator，看起来很简单，但是很慢。执行 100 万次迭代需要 1000 毫秒。由于 c(c,item) 的原因，第二个非常难看，但比第一个快两倍。

我需要让我的代码更简单、更灵活、更稳定（如果我需要递归调用，不要创建一组函数等）。

有没有更好的方法来组织匿名递归？

```
delegate Action<T> Continuation<T>(Continuation<T> r);

    [TestMethod]
    public void TestMethod()
    {
        IObject root = BuildComposite();

        Performance.Measure(1000000, () =>
                {
                    Apply(root, h => t =>
                    {
                        foreach (IObject item in t.Children)
                        {
                            //Console.WriteLine(item.Name);
                            h(item);
                        }
                    });
                }, "Time ");
    }

    private static void Apply(IObject root, Func<Action<IObject>, Action<IObject>> g)
    {
        Continuation<IObject> action = c => thing => { g(c(c))(thing); };

        Action<IObject> target = action(action);

        target(root);
    }

delegate void Continuation<T>(Continuation<T> r, T n);

    [TestMethod]
    public void TestMethod()
    {
        var root = BuildComposite();

        Performance.Measure(1000000, () =>
        {
            Apply(root, (c, thing) =>
            {
                foreach (var item in thing.Children)
                {
                    //Console.WriteLine(item.Name);
                    c(c, item);
                }
            });
        },"Time");
    }

    void Apply(IObject root, Continuation<IObject> f)
    {
        f(f, root);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T18:17:00.100

这引起了我昨天的兴趣。我做了一些测试，这是我的尝试，我有一些加速。委托越简单，它运行得越快，但是一些记忆就可以了。

```
Time test   1   542 69%
Time test   2   377 99%
Time test   3   558 67%
Time test   4   505 74%
Time test   5   372 100%
Time test   6   374 99%
Time test   7   452 82% 
```

LinqPad 的测试代码。

```
void Main()
{
    foreach(var t in typeof(test).Assembly.GetTypes().Where(t => t.IsSubclassOf(typeof(test))))
        ((test)(Activator.CreateInstance(t))).TestMethod();
}

private abstract class test
{
    public abstract void TestMethod();
}

private class test1 : test
{

    delegate Action<T> Continuation<T>(Continuation<T> r);

    //[TestMethod]
    //The fixed point operator, very slow also.
    public override void TestMethod()
    {
        IObject root = BuildComposite();

        Performance.Measure(1000000, () =>
        {
            Apply(root, h => t =>
            {
                foreach (IObject item in t.Children)
                {
                    //Console.WriteLine(item.Name);
                    h(item);
                }
            });
        }, "Time " + this.GetType().Name);
    }

    private static void Apply(IObject root, Func<Action<IObject>, Action<IObject>> g)
    {
        Continuation<IObject> action = c => thing => { g(c(c))(thing); };

        Action<IObject> target = action(action);

        target(root);
    }

}

private class test2 : test
{

    delegate void Continuation<T>(Continuation<T> r, T n);

    //[TestMethod]
    //Without curry, curring makes things go slow.
    public override void TestMethod()
    {
        var root = BuildComposite();

        Performance.Measure(1000000, () =>
        {
            Apply(root, (c, thing) =>
            {
                foreach (var item in thing.Children)
                {
                    //Console.WriteLine(item.Name);
                    c(c, item);
                }
            });
        }, "Time " + this.GetType().Name);
    }

    void Apply(IObject root, Continuation<IObject> f)
    {
        f(f, root);
    }

}

private class test3 : test
{

    //[TestMethod]
    //Another common definition found on web, this is worse of then all.
    //https://stackoverflow.com/questions/4763690/alternative-y-combinator-definition
    public override void TestMethod()
    {
        var root = BuildComposite();

        Performance.Measure(1000000, () =>
        {
            Y<IObject, int>(f => thing =>
            {
                foreach (var item in thing.Children)
                {
                    //Console.WriteLine(item.Name);
                    f(item);
                }
                return 0;
            })(root);
        }, "Time " + this.GetType().Name);
    }

    public delegate TResult SelfApplicable<TResult>(SelfApplicable<TResult> r);

    public static TResult U<TResult>(SelfApplicable<TResult> r)
    {
        return r(r);
    }

    public static Func<TArg1, TReturn> Y<TArg1, TReturn>(Func<Func<TArg1, TReturn>, Func<TArg1, TReturn>> f)
    {
        return U<Func<TArg1, TReturn>>(r => arg1 => f(U(r))(arg1));
    }

}

private class test4 : test
{

    //[TestMethod]
    //Simpler definition, taken from this SO.
    //This uses inherent compiler recursion, lets see if it speed things up.
    //https://stackoverflow.com/questions/4763690/alternative-y-combinator-definition
    public override void TestMethod()
    {
        var root = BuildComposite();

        Performance.Measure(1000000, () =>
        {
            Y<IObject, int>(f => thing =>
            {
                foreach (var item in thing.Children)
                {
                    //Console.WriteLine(item.Name);
                    f(item);
                }
                return 0;
            })(root);
        }, "Time " + this.GetType().Name);
    }

    public static Func<TArg1, TReturn> Y<TArg1, TReturn>(Func<Func<TArg1, TReturn>, Func<TArg1, TReturn>> f)
    {
        return f(n => Y(f)(n));
    }

}

private class test5 : test
{

    //[TestMethod]
    //Simple way to recurse, is also the fastest
    //but then its no more an anonymous lambda.
    //This defeats the game purpose.
    public override void TestMethod()
    {
        var root = BuildComposite();

        Action<IObject> a = null;
        a = thing =>
            {
                foreach (var item in thing.Children)
                {
                    //Console.WriteLine(item.Name);
                    a(item);
                }
            };

        Performance.Measure(1000000, () =>
        {
            a(root);
        }, "Time " + this.GetType().Name);
    }

}

private class test6 : test
{

    //[TestMethod]
    //Reference test, direct method call
    //There should be no way to get faster than this.
    public override void TestMethod()
    {
        var root = BuildComposite();

        Performance.Measure(1000000, () =>
        {
            a(root);
        }, "Time " + this.GetType().Name);
    }

    public static void a(IObject thing)
    {
        foreach (var item in thing.Children)
        {
            //Console.WriteLine(item.Name);
            a(item);
        }
    }

}

private class test7 : test
{

    //[TestMethod]
    //Lets try some memoization.
    public override void TestMethod()
    {
        var root = BuildComposite();

        Performance.Measure(1000000, () =>
        {
            Y<IObject, int>.Combinator(f => thing =>
            {
                foreach (var item in thing.Children)
                {
                    //Console.WriteLine(item.Name);
                    f(item);
                }
                return 0;
            })(root);
        }, "Time " + this.GetType().Name);
    }

    private class Y<TArg1, TReturn>
    {
        public static Func<TArg1, TReturn> Combinator(Func<Func<TArg1, TReturn>, Func<TArg1, TReturn>> f)
        {
            return f(n => 
                {
                    if (memoized == null) memoized = Combinator(f);
                    return memoized(n);
                });
        }
        private static Func<TArg1, TReturn> memoized;
    }

}

private interface IObject
{
    List<IObject> Children { get; }
}

private class CObject : IObject
{
    private int lvl;
    public CObject(int lvl)
    {
        this.lvl = lvl;
    }
    public List<IObject> Children 
    { 
        get
        {
            var l = new List<IObject>() { BuildComposite(lvl + 1) }; 
            if (lvl > 2) l.Clear();
            return l;
        }
    }
}

private static IObject BuildComposite()
{
    return new CObject(0);
}

private static IObject BuildComposite(int lvl)
{
    return new CObject(lvl);
}

private class Performance
{
    public static void Measure(int count, Action a, string msg)
    {
        using(new WallClock(msg))
            Enumerable.Range(1, count).ToList().ForEach(_ => a());
    }
}

private class WallClock : IDisposable
{   
    private string name;
    private Stopwatch w;
    public WallClock(string name)
    {
        this.name = name;
        w = Stopwatch.StartNew();
    }
    public void Dispose()
    {
        w.Stop();
        Console.WriteLine(name + " : " + w.ElapsedMilliseconds);
    }
} 
```

参考

[http://mikehadlow.blogspot.com.br/2009/03/recursive-linq-with-y-combinator.html](http://mikehadlow.blogspot.com.br/2009/03/recursive-linq-with-y-combinator.html)

[替代 Y 组合子定义](https://stackoverflow.com/questions/4763690/alternative-y-combinator-definition)

[http://blogs.msdn.com/b/wesdyer/archive/2007/02/02/anonymous-recursion-in-c.aspx](http://blogs.msdn.com/b/wesdyer/archive/2007/02/02/anonymous-recursion-in-c.aspx)

[http://www.justinshield.com/2011/06/recursive-lambda-expressions-in-c-using-ycombinator/](http://www.justinshield.com/2011/06/recursive-lambda-expressions-in-c-using-ycombinator/)

# c# - 在 ViewModel 上不使用 Java.Lang.Object 的自动完成 MVVM 和 Java 转换

> ID：10550829
> 
> 赞同：3
> 
> 时间：2012-05-11T11:53:54.407
> 
> 标签：c#, xamarin.android, mvvmcross

我有铸件问题。首先，我将举例说明如何在 Monodroid 中为没有 MVVM 的 AutoComplete 做一个自定义适配器：[https ://github.com/BitStab/Monodroid-Custom-Auto-Complete/blob/master/MonoAndroidApplication1/CustomerAdapter.cs](https://github.com/BitStab/Monodroid-Custom-Auto-Complete/blob/master/MonoAndroidApplication1/CustomerAdapter.cs)

现在我将在 MVVMCross 中尝试这个，但要做到这一点，我必须通过 Java.Lang.Object 扩展我的 ViewModel。这会破坏它的便携性。我现在正在寻找一种解决方法，因为我不是 mvvm 专家，我需要帮助。

我开始在 mvvmCross Bindigs 中做一些新的类，你可以在这里找到它：[https ://github.com/BitStab/MvvmCross/tree/master/Cirrious/Cirrious.MvvmCross.Binding/Android/Views](https://github.com/BitStab/MvvmCross/tree/master/Cirrious/Cirrious.MvvmCross.Binding/Android/Views)

我试图使其尽可能通用，但我需要一种方法将我的个人 C# 对象转换为 Java.Lang.Object。有没有一种方法可以在不扩展我的 ViewModel 的情况下做到这一点？如果有人有其他想法，我很乐意得到灵感！

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T00:35:30.510

如果您想要可移植的代码，那么您当然不希望在 ViewModel 附近有 Java.anything。

恐怕我无法真正遵循 CustomerAdapter 示例代码 - 您的过滤器和发布方法看起来不太正确。此外，在我发现的大多数 Java 示例之后，我遇到了一些问题——据我所见，我认为 AutoCompleteTextView 上的线程模型并不理想——它阻塞线程太久（恕我直言）。

但是，在对 Google Books API 示例进行了一些黑客攻击之后，我创建了一个示例 - 请参阅以下视频：

*   YouTube - [http://www.youtube.com/watch?v=l9JqlA_YZ4k](http://www.youtube.com/watch?v=l9JqlA_YZ4k)

![一](../Images/df38478df44bf62e308e2c9fd74b6b5e.png) ![二](../Images/bcc2f48e7dcbc30a00b1e74021b3c29a.png) ![三](../Images/58870b0630739a1dd348fb6179025e7f.png)

此示例使用MvvmCross 框架内的新*alpha数据绑定 Autocomplete 类和适配器工作。*可能这些类实际上从未成为全职框架成员 - 在这种情况下，它们可以改为存在于某些外部库中。

基本功能在 3 个新属性上使用数据绑定：

*   PartialText - 这是一个部分文本字符串 - 从 View 发送到 ViewModel
*   ItemsSource - 这是可用于提供的 PartialText 的当前项目集 - 从 ViewModel 发送到 View
*   SelectedObject - 这是当前选定的项目 - 从 View 发送到 ViewModel

您可以在绑定 xml 中看到这些设置：

```
<Mvx.MvxBindableAutoCompleteTextView
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  local:MvxItemTemplate="@layout/listitem_book"
  local:MvxBind="{'Text':{'Path':'EnteredText','Mode':'TwoWay'},
  'ItemsSource':{'Path':'AutoCompleteSuggestions'},
  'PartialText':{'Path':'CurrentTextHint'},
  'SelectedObject':{'Path':'CurrentBook'}}"
    /> 
```

请注意，由于 Android 线程模型，PartialText 中的每个更改都必须通过 ItemsSource 中的最终信号更改来满足 - 这应该是对象集合中的单个更改，而不是许多小的更改。

此初始示例的代码位于：[https ://github.com/slodge/MvvmCross/tree/master/Sample%20-%20SimpleDialogBinding/SimpleBinding/DroidAutoComplete](https://github.com/slodge/MvvmCross/tree/master/Sample%20-%20SimpleDialogBinding/SimpleBinding/DroidAutoComplete)

请注意，此示例使用“简单绑定”而不是完整的 Mvx 框架，因此在 ViewModel 中需要考虑更多线程。

绑定视图及其适配器不是简单的代码——绑定代码本质上是相当抽象的——但它们可以在以下位置找到：

*   [MvxBindableAutoCompleteTextView](https://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross.Binding/Android/Views/MvxBindableAutoCompleteTextView.cs)
*   [MvxFilteringBindableListAdapter](https://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross.Binding/Android/Views/MvxFilteringBindableListAdapter.cs)

* * *

如果您正在做任何与网络相关的事情，那么从长远来看，我相信实施新的自动完成视图可能比今天使用内置的 Android 更好！

# java - 覆盖类型参数

> ID：10550835
> 
> 赞同：1
> 
> 时间：2012-05-11T11:54:24.170
> 
> 标签：java, generics, inheritance, hierarchy, parameterized

我想用以下层次结构实现以下类：

```
public class DwellingPropertySetter
    extends AbstractPropertySetter<Dwelling>

public class HousePropertySetter
    extends DwellingPropertySetter<House>

public class SkyscrapperPropertySetter
    extends HousePropertySetter<Skyscrapper> 
```

不幸的是，这段代码无法编译。一种方法是：

```
public class DwellingPropertySetter<T extends Dwelling>
    extends AbstractPropertySetter<T>

public class HousePropertySetter<T extends House>
    extends DwellingPropertySetter<T>

public class SkyscrapperPropertySetter<T extends Skyscrapper>
    extends HousePropertySetter<T> 
```

但对我来说，这些`extends`关键字是不必要的。每当我想使用 a 时`SkyscrapperPropertySetter`，我都必须指定一个类型参数。这是没用的，然后看起来像`SkyscrapperPropertySetter<Skyscraper>`.

你知道我的出路吗？我知道实现我的第一个层次结构的唯一其他方法是使用接口和委托方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T12:16:06.527

我想你已经正确认识到拥有像 ChickenArrayList<Chicken> 这样的东西是没有意义的，所以你可以创建类似的东西

```
class ChickenArrayList extends ArrayList<Chicken> 
```

或者，如果您想重用 ChickenArrayList 中的某些功能，您可能必须使其抽象（和泛型）并在其上放置另一个具体的非泛型类：

```
class AbsChickenArrayList<T extends Chicken> extends ArrayList<T>
// and
class ChickenArrayList extends AbsChickenArrayList<Chicken>
class HenArrayList extends AbsChickenArrayList<Hen> 
```

我知道这很冗长，但这是你可以用这种~18 岁的语言做的最好的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T11:56:18.227

我认为你可以达到合理的程度。如果你有

```
public class DwellingPropertySetter
extends AbstractPropertySetter<Dwelling> 
```

这意味着您已经制作了`DwellingPropertySetter`非泛型，所有方法签名都将使用`Dwelling`. 如果你说

```
public class DwellingPropertySetter<T extends Dwelling>
extends AbstractPropertySetter<T> 
```

这意味着可以有各种各样`DwellingPropertySetter`的 s - 你真的想要不同的，所以我认为这是你真正想要保留的。或者是你的抱怨是你想要一个`DwellingPropertySetter`没有参数的a，`Dwelling`假设在哪里，`DwellingPropertySetter<T>`以及一个用不同扩展的子类`T`？Java 泛型无法做到这一点。

# c++ - 对 ostringstream 对象执行 .str().c_str() 操作，提供核心转储

> ID：10550840
> 
> 赞同：1
> 
> 时间：2012-05-11T11:55:06.680
> 
> 标签：c++, stringstream

我的代码如下

```
std::ostringstream tmpstr, tmpstr2;
for( /* something */ )
{
    //writting inside tmpstr
}

tmpstr2 << tmpstr.rdbuf();
cout << "assigned to tmpstr2"; 
out <<tmpstr2.str().c_str() ; // Where out is ostrstream& out 
```

这是转储中的最后一次堆栈调用：-

`std::basic_ostringstream<char,std::char_traits<char>,std::allocator<char> >::~basic_ostringstream`

执行时的最后一行给了我一个核心转储。我无法理解其背后的原因。有人可以让我知道我是否正在执行一个`invalid`不是编译错误的操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T12:07:58.237

你用另一个陈述破坏了你的记忆。没有看到实际代码很难猜测，但最好的猜测是你写的东西超出了 tmpstr 之前分配的范围或之后直接的堆栈数组。

无论哪种方式，实际上应该属于流对象的内存都会被覆盖，从而导致流对象中断。核心转储发生在实际虚线之后，因为它没有被检测到。您写了一些界限，但最终出现在程序的内存中而不是外部。特别是在 tmpstr 的内存中。

# php - 第二次使用相同的功能

> ID：10550841
> 
> 赞同：0
> 
> 时间：2012-05-11T11:55:07.963
> 
> 标签：php, image

我声明了以下函数来从目录中获取随机图像。我想在相同的代码中使用相同的函数从不同的目录中获取随机图像。现在的问题是我必须更改 $path 但我已经在声明中使用了它，而我想在第二次使用该函数时使用不同的路径

声明部分

```
function getImagesFromDir($path) { 
$images = array(); 
if ( $img_dir = @opendir($path) ) { 
    while ( false !== ($img_file = readdir($img_dir)) ) { 
        // checks for gif, jpg, png 
        if ( preg_match("/(\.gif|\.jpg|\.png)$/", $img_file) ) { 
            $images[] = $img_file; 
        } 
    } 
    closedir($img_dir); 
} 
return $images; 
} 
```

我第一次用这种方式

```
$root = ''; 

$path = 'frames/';

$imgList = getImagesFromDir($root . $path); 

$img = getRandomFromArray($imgList); 
```

我如何第二次使用它，以便它从不同的目录中选择图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:00:06.307

可能您不会两次*调用*该函数，而是两次*声明*它。

宣言：

```
function getImagesFromDir($path) { 
$images = array(); 
if ( $img_dir = @opendir($path) ) { 
    while ( false !== ($img_file = readdir($img_dir)) ) { 
        // checks for gif, jpg, png 
        if ( preg_match("/(\.gif|\.jpg|\.png)$/", $img_file) ) { 
            $images[] = $img_file; 
        } 
    } 
    closedir($img_dir); 
} 
return $images; 
} 
```

调用：

```
$images1 = getImagesFromDir("/var/www/images1");
$images2 = getImagesFromDir("/var/www/images2"); 
```

如果你写

```
function getImagesFromDir($path) .... 
```

再次在任何地方*重新声明*并且 PHP 不支持这个

如果您多次需要声明函数的文件，也会发生这种情况。

- 编辑 - -

```
$strRoot = '';

$astrImages = array();

$astrImages[] = array( 'path' => 'frames/', 'image' => '' );
$astrImages[] = array( 'path' => 'etc1/', 'image' => '' );
$astrImages[] = array( 'path' => 'etc2/', 'image' => '' );
$astrImages[] = array( 'path' => 'etc3/', 'image' => '' );

foreach( $astrImages as $nIndex => $astrImage )
{
  $imgList = getImagesFromDir($strRoot . $astrImage['path']); 

  $astrImages[$nIndex]['image'] = getRandomFromArray($imgList); 
} 
```

# java - RandomAccessFile.read() 返回的值大于读入字符串的字符数

> ID：10550843
> 
> 赞同：0
> 
> 时间：2012-05-11T11:55:14.373
> 
> 标签：java, java-io, file-read

我有一个`RandomAccessFile raFile`我正在以固定大小的块将数据读入缓冲区的方法：

```
byte[] fileBuffer = new byte[BUFFER_SIZE];

while((readBytes = raFile.read(fileBuffer) >= 0) {
    String bufferStr = new String(fileBuffer, 0, readBytes);
    String testerStr = new String(fileBuffer);

    System.out.println(readBytes+","+bufferStr.length()+","+testerStr.length());
} 
```

我所期望的是`raFile.read()`读取与 一样多的字节`BUFFER_SIZE`（文件末尾除外）并将相同的值复制到`readBytes`. 虽然这在很大程度上是正确的，但偶尔，我会得到以下`BUFFER_SIZE`4096 的输出：

`readBytes` `bufferStr` `testerStr`
 4096 4092 4092
 4096 4090 4090
 4096 4094 4094
 4096 4095 4095

如果正在读取 4096 字节，为什么即使不在文件末尾，长度`bufferStr`也`testerStr`小于该值？

参考：[这](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/RandomAccessFile.html#read%28byte%5b%5d%29)表示`read()`返回读入缓冲区的字节总数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T12:00:59.660

因为有些字符需要超过一个字节。bufferStr.lenght() 为您提供字符数，而不是字节数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T12:02:19.397

读取的字节数和由这些字节创建的字符串中的字符数之间存在差异。从流中读取的字节总是有 8 位。字符串的一个字符最多可以有 16 位 (Unicode)。因此，输入的两个字节可以在创建的字符串中产生一个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T12:04:24.773

巴勃罗的正确观点。尝试：

```
 System.out.println(readBytes+","+bufferStr.getBytes().length+
          +","+testerStr.getBytes().length); 
```

看看结果。

# ios - 如何获取 URL 的源代码

> ID：10550846
> 
> 赞同：2
> 
> 时间：2012-05-11T11:55:35.640
> 
> 标签：ios, nsurl, nsmutableurlrequest

当我尝试请求此 URL 时，我无法获取 HTML 源代码：[http ://www.google.co.in/search?q=search](http://www.google.co.in/search?q=search)

```
NSURL *url = [NSURL URLWithString:@"http://www.google.co.in/search?q=search"];

NSMutableURLRequest *urlRequest = [NSURLRequest requestWithURL:url];
NSData *data = [NSURLConnection sendSynchronousRequest:urlRequest returningResponse:nil error:nil];
NSLog(@"Webdata : %@", [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]); 
```

数据始终为 NULL。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T11:57:31.377

这有效：

```
NSURL *url = [NSURL URLWithString:@"http://www.google.co.in/search?q=search"]; 
NSString *webData= [NSString stringWithContentsOfURL:url]; 
NSLog(@"%@",webData); 
```

但是如果你需要使用 NSURLConnection ，你应该异步使用它并实现 willSendRequest 方法来处理重定向。

```
- (NSURLRequest *)connection:(NSURLConnection *)connection willSendRequest:(NSURLRequest *)request redirectResponse:(NSURLResponse *)response; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-27T09:13:58.640

简单版：

```
NSURL *TheUrl = [NSURL URLWithString:@"http://google.com"];

NSString *webData = [NSString stringWithContentsOfURL:TheUrl 
                              encoding:NSASCIIStringEncoding
                              error:nil];

NSLog(@"%@", webData); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T12:07:19.463

```
You can get the data in following ways :- 
```

1 .使用 NSUrlConnection 作为[异步请求](http://mobileorchard.com/tutorial-json-over-http-on-the-iphone/)

```
2\. Synchronous NSUrlConnection

NSURL *URL = [NSURL URLwithString:@"http://www.google.com"]; 
NSURLRequest *request = [NSURLRequest requestWithURL:URL]; 
NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil]; 

Simply to check
NSURL *URL = [NSURL URLwithString:@"http://google.com"]; 
NSString *webData= [NSString stringWithContentsOfURL:URL]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-07T20:08:31.233

使用 GCD 的简单异步解决方案：

```
- (void)htmlFromUrl:(NSString *)url handler:(void (^)(NSString *html, NSError *error))handler
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^(void){
        NSError *error;
        NSString *html = [NSString stringWithContentsOfURL:[NSURL URLWithString:url] encoding:NSASCIIStringEncoding error:&error];
        dispatch_async(dispatch_get_main_queue(), ^(void){
            if (handler)
                handler(html, error);
        });
    });
} 
```

然后

```
[self htmlFromUrl:@"http://stackoverflow.com" handler:^(NSString *html, NSError *error) {
    NSLog(@"ERROR: %@ HTML: %@", error, html);
}]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T09:24:44.087

对于 HTML 源代码的异步获取，我推荐你使用[AFNetworking](https://github.com/AFNetworking/)

1）然后子类AFHTTPCLient，例如：

```
//WebClientHelper.h
#import "AFHTTPClient.h"

@interface WebClientHelper : AFHTTPClient{

}

+(WebClientHelper *)sharedClient;

@end

//WebClientHelper.m
#import "WebClientHelper.h"
#import "AFHTTPRequestOperation.h"

NSString *const gWebBaseURL = @"http://dummyBaseURL.com/";

@implementation WebClientHelper

+(WebClientHelper *)sharedClient
{
    static WebClientHelper * _sharedClient = nil;
    static dispatch_once_t oncePredicate;
    dispatch_once(&oncePredicate, ^{
        _sharedClient = [[self alloc] initWithBaseURL:[NSURL URLWithString:gWebBaseURL]];
    });

    return _sharedClient;
}

- (id)initWithBaseURL:(NSURL *)url
{
    self = [super initWithBaseURL:url];
    if (!self) {
        return nil;
    }

    [self registerHTTPOperationClass:[AFHTTPRequestOperation class]];
    return self;
}
@end 
```

2) 异步请求 HTML 源代码，将此代码放在任何相关部分

```
NSString *testNewsURL = @"http://whatever.com";
    NSURL *url = [NSURL URLWithString:testNewsURL];
    NSURLRequest *request  = [NSURLRequest requestWithURL:url];

    AFHTTPRequestOperation *operationHttp =
    [[WebClientHelper sharedClient] HTTPRequestOperationWithRequest:request success:^(AFHTTPRequestOperation *operation, id responseObject)
     {
         NSString *szResponse = [[[NSString alloc] initWithData:responseObject encoding:NSUTF8StringEncoding] autorelease];
         NSLog(@"Response: %@", szResponse );
     }
     failure:^(AFHTTPRequestOperation *operation, NSError *error)
     {
         NSLog(@"Operation Error: %@", error.localizedDescription);
     }];

    [[WebClientHelper sharedClient] enqueueHTTPRequestOperation:operationHttp]; 
```

# android - Android Google Account Manager 基本登录

> ID：10550856
> 
> 赞同：1
> 
> 时间：2012-05-11T11:55:57.883
> 
> 标签：android, accountmanager, google-signin

我正在为 android 开发应用程序，我希望它可以通过保存在用户手机上的帐户登录。

我找到了这篇文章：[https ://developers.google.com/google-apps/tasks/oauth-and-tasks-on-android](https://developers.google.com/google-apps/tasks/oauth-and-tasks-on-android)

这很有帮助，但在这个例子中，我必须请求某种 API 的许可（任务、纬度......）。我所需要的只是简单地登录到我的服务，而无需重定向到某个网站并填写密码等...

你有什么建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:38:23.130

我取决于您所说的“登录”是什么意思。如果您真的想使用 Google 帐户进行身份验证，则需要在您的应用程序中集成 OAuth 或 OpenID，并在您的站点/webapp 中使用 Google 作为身份提供者（StackOverflow 这样做：您可以使用您的 Google 帐户登录）。如果只需要获取用户的GMail地址，可以通过账户管理器获取。由于他们需要至少验证一次才能显示在帐户列表中，因此您可以合理地确定这确实是他们的地址。

# python - 无法在 Linux 服务器上以编程方式写入文件

> ID：10550858
> 
> 赞同：1
> 
> 时间：2012-05-11T11:56:03.923
> 
> 标签：python, linux, cgi, subprocess

我有一个 python CGI 脚本，它接受表单输入`x`和`y`（整数）并将其传递给 C++ 可执行文件，程序使用`subprocess`其中将两个值的总和写入文本文件。

该代码在我的本地机器上运行良好。然而，经过大量测试，我发现每当我在我的服务器（in `/var/www`）上运行这个程序并尝试写入文件时，都会发生某种错误，因为我得到“内部服务器错误”页面。

服务器不是我的，所以我实际上没有 sudo 权限。但是从腻子，我可以手动运行可执行文件，它确实会写入文件。

我的猜测是我必须以某种方式从 python 脚本运行可执行文件并获得一定的权限，但我不确定。我将不胜感激任何建议！

编辑：
@gnibbler：有趣的是，我能够毫无问题地将文件写入 /tmp 目录。

所以我认为你的建议是正确的，从浏览器调用脚本时服务器根本不允许我写。

此外，我无法访问带有错误日志的目录，因此我将尝试获得许可。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:05:34.477

环境不同（可能它试图写入错误的目录）或更可能的是，cgi 没有以您登录的同一用户身份运行。

例如，cgi 脚本以“nobody”或“www”等形式执行是相当普遍的。

您可以尝试让 cgi 将文件写入`/tmp`. 那至少应该确认cgi正在运行的用户

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T12:11:07.527

正如其他人所说，您可能遇到了权限问题。但是除非查看错误日志，否则您无法确定发生了什么——内部服务器错误通常会掩盖实际错误。

要弄清楚实际错误是什么，您可以做以下两件事之一。你说你在做 CGI，所以我建议[`cgitb`](http://docs.python.org/library/cgitb.html)你在测试的时候看看；它会在您的浏览器中向您显示 Python 回溯（尽管这可能对您的子流程场景没有帮助。）

否则，您将需要查看 Web 服务器的错误日志，其中可能包含 Python 回溯，并希望向您展示发生了什么。保存这些文件的典型地方是`/var/log/httpd`. 如果您无权访问，或者在此处找不到日志，请询问您的服务器管理员在哪里可以找到它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T17:45:10.733

尝试`chmod 0666 filethatyouarewritingto.txt` 如果这不起作用，请确保您的 c++ 文件在“其他”组中具有可执行权限，请尝试`chmod 0755 yourprogram`.

[资源](http://docs.python.org/2/library/cgi.html#installing-your-cgi-script-on-a-unix-system)

# android - 需要警报对话框的帮助

> ID：10550860
> 
> 赞同：1
> 
> 时间：2012-05-11T11:56:09.897
> 
> 标签：android, listview, android-alertdialog, populate

我有一个 Activity，上面有一个 Button，现在我想要的是，当我点击按钮时，我想要一个 AlertDialog 来加载我制作的布局。我在布局中也有一个 ListView，并且我为 ListView 构建了一个适配器。但我无法用一些数据填充 ListView。

我希望我把问题说清楚了。

例如：布局名称：searchfood.xml 这个布局包含一个名为：listView1 的ListView 现在我需要在AlertDialog 中加载这个“searchfood.xml”，并用我已经为其制作了一个扩展BaseAdapter 的适配器的数据填充“listView1”。

适配器工作正常，因为当我将 searchfood.xml 作为具有必要配置的活动打开时，它工作正常......它只是不适用于 AlertDialog............ (

# android - 通过 Facebook 对话框添加朋友 - Android Facebook SDK

> ID：10550863
> 
> 赞同：1
> 
> 时间：2012-05-11T11:56:16.870
> 
> 标签：android, add, friend, facebook-android-sdk, fbdialogs

我目前正在使用 Facebook API 开发一个 Android 应用程序。我的应用程序的一个模块包括添加一个朋友（知道 ID），我想通过 FB Dialog 对象添加一个朋友。我将 Facebook 对象与对话框方法一起使用：http: [//developers.facebook.com/docs/reference/androidsdk/dialog/](http://developers.facebook.com/docs/reference/androidsdk/dialog/)。以及尝试通过对话框添加朋友的 FbDialog 类：http: [//developers.facebook.com/docs/reference/dialogs/friends/](http://developers.facebook.com/docs/reference/dialogs/friends/)。但是，正如文档中所写，此对话框仅支持 feed 和 oauth。因此，当我使用此对话框尝试添加朋友时，它要么将我重定向到我的浏览器和 AddFriend Web 对话框，要么成功打开一个对话框但显示不支持此功能的消息。

我的问题是：不管文档怎么说，是否可以让这个对话框与添加朋友机制一起使用？也许你们中的一个人找到了这样做的窍门。或者也许这是不可能的，我必须坚持使用这种方法（即打开 Web 浏览器），我发现它对我的应用程序不太友好。

提前致谢！

# python - 在 Python 中共享数据

> ID：10550870
> 
> 赞同：1
> 
> 时间：2012-05-11T11:56:50.440
> 
> 标签：python, performance, python-3.x, pickle

我有一些腌制数据，存储在磁盘上，大小约为 100 MB。

当我的 python 程序被执行时，选择的数据是使用`cPickle`模块加载的，一切正常。

例如，如果我多次执行 python `python main.py`，每个 python 进程将多次加载相同的数据，这是正确的行为。

我怎样才能做到这一点，所有新的python进程共享这些数据，所以它只加载一次到内存中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T12:08:44.493

如果您在 Unix 上，一种可能性是将数据加载到内存中，然后让脚本用于[`os.fork()`](http://docs.python.org/library/os.html#os.fork)创建一堆子进程。只要子进程不尝试*修改*数据，它们就会自动共享父进程的副本，而无需使用任何额外的内存。

不幸的是，这不适用于 Windows。

PS 我[曾经询问](https://stackoverflow.com/questions/6270849/placing-python-objects-in-shared-memory)过将 Python 对象放入共享内存中的问题，但这并没有产生任何简单的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T12:59:07.353

根据您解决此问题的严重程度，您可能需要查看 memcached，如果这不是矫枉过正的话。

# c# - 如何通过 3 个点计算循环弧并在 3d 中将其参数化为 0..1

> ID：10550874
> 
> 赞同：5
> 
> 时间：2012-05-11T11:57:03.003
> 
> 标签：c#, math, robotics

我如何通过 3d 中的 3 个点 A、B、C 计算弧线。从 A 到 C 传递 B（处理顺序）。

大多数机械臂都有这种移动命令。我需要模拟它并对它应用不同的速度动态，因此需要一个参数 0..1 将位置从 A 移动到 C。

编辑：

我所拥有的是圆弧的半径和中心，但是如果我知道开始和结束角度，我如何在 3d 中参数化圆？

编辑2：

越来越近。如果我在圆所在的平面上有两个单位长度的垂直向量 v1 和 v2，我可以进行如下参数化：**x** (t) = **c** + r * cos(t) * **v1** + r * sin(t) * **v2**

所以我取v1 = ac，我现在只需要找到v2。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:51:34.140

Martin Doms 最近写[了一篇关于样条曲线和贝塞尔曲线的博客文章](http://blog.martindoms.com/2012/04/25/splines-and-curves-part-i-bezier-curves/)，您可能会发现它们很有用。

他的部分文章描述了如何获得由三个控制点 P [0]、 P [1]和 P [2]定义的二维曲线。`t`该曲线由一个范围从 0 到 1的值参数化：

F(t) = (1-t) ² P [0] + 2t (1-t) P [1] + t ² P [2]

您似乎可以稍加思考就可以将其适应 3D。（当然，贝塞尔曲线不一定通过控制点。如果这对你来说是一个交易破坏者，这可能不起作用。）

顺便说一句，Jason Davies 制作了[一个不错的曲线插值小动画](http://www.jasondavies.com/animated-bezier/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-20T01:38:28.780

回到这个，这很棘手。代码尽可能短，但仍然比我想象的要多。

您可以创建此类的一个实例并调用`SolveArc`具有 3 个位置的方法（以正确的顺序）来设置该类。然后，该`Arc`方法将为您提供圆弧上从 0..1 开始的线速度位置。如果您找到更短的解决方案，请告诉我。

```
class ArcSolver
{
    public Vector3D Center { get; private set; }

    public double Radius { get; private set; }

    public double Angle { get; private set; }

    Vector3D FDirP1, FDirP2;

    //get arc position at t [0..1]
    public Vector3D Arc(double t)
    {
        var x = t*Angle;
        return Center + Radius * Math.Cos(x) * FDirP1 + Radius * Math.Sin(x) * FDirP2;
    }

    //Set the points, the arc will go from P1 to P3 though P2.
    public bool SolveArc(Vector3D P1, Vector3D P2, Vector3D P3)
    {
        //to read this code you need to know that the Vector3D struct has
        //many overloaded operators: 
        //~ normalize
        //| dot product
        //& cross product, left handed
        //! length

        Vector3D O = (P2 + P3) / 2;
        Vector3D C = (P1 + P3) / 2;
        Vector3D X = (P2 - P1) / -2;

        Vector3D N = (P3 - P1).CrossRH(P2 - P1);
        Vector3D D = ~N.CrossRH(P2 - O);
        Vector3D V = ~(P1 - C);

        double check = D|V;
        Angle = Math.PI;
        var exist = false;

        if (check != 0)
        {
            double t = (X|V) / check;
            Center = O + D*t;
            Radius = !(Center - P1);
            Vector3D V1 = ~(P1 - Center);

            //vector from center to P1
            FDirP1 = V1;
            Vector3D V2 = ~(P3 - Center);
            Angle = Math.Acos(V1|V2);

            if (Angle != 0)
            {
                exist = true;
                V1 = P2-P1;
                V2 = P2-P3;
                if ((V1|V2) > 0)
                {
                    Angle = Math.PI * 2 - Angle;
                }
            }
        }

        //vector from center to P2
        FDirP2 = ~(-N.CrossRH(P1 - Center));
        return exist;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T02:02:29.880

所以这个答案是故事的一部分，因为代码是在 Mathematica 而不是 C# 中，但当然所有的数学（可能有一个小例外）都应该相对容易翻译成任何语言。

提出的基本方法是：

1.  将三个点（**A**、**B**、**C**）投影到这些点所在的平面上。它应该有一个法线**AB** x **BC**。这将问题从三个维度减少到了两个维度。
2.  使用您最喜欢的技术来找到通过三个投影点的圆心。
3.  将圆心取消投影回三个维度。
4.  使用适当的球面插值策略（示例中使用了 slerp，但我相信使用四元数会更好）。

需要注意的一点是，您需要确定旋转的方向，我相信有更聪明的方法，但只有两种选择，拒绝测试就足够了。我正在使用`reduce`，但您可能需要在 C# 中做一些稍微不同的事情才能做到这一点

不能保证这是执行此操作的最稳定或最稳健的方法，或者有任何遗漏的极端情况。

```
(* Perpendicular vector in 2 dimensions *)
Perp2d[v_] := {-v[[2]], v[[1]]};

(* Spherical linear interpolation. From wikipedia \
http://en.wikipedia.org/wiki/Slerp *)
slerp[p0_, p1_, t_, rev_] :=
  Module[{\[CapitalOmega], v},
   \[CapitalOmega] = ArcCos[Dot[p0, p1]];
   \[CapitalOmega] = 
    If[rev == 0, 2 Pi - \[CapitalOmega], \[CapitalOmega]];
   v = (Sin[(1 - t) \[CapitalOmega]]/
        Sin[\[CapitalOmega]]) p0 + (Sin[t \[CapitalOmega]]/
        Sin[\[CapitalOmega]]) p1;
   Return[v]
   ];

(* Based on the expressions from mathworld \
http://mathworld.wolfram.com/Line-LineIntersection.html *)
IntersectionLineLine[{x1_, y1_}, {x2_, y2_}, {x3_, y3_}, {x4_, y4_}] :=
  Module[{x, y, A, B, C},
  A = Det[{{x1, y1}, {x2, y2}}];
  B = Det[{{x3, y3}, {x4, y4}}];
  C = Det[{{x1 - x2, y1 - y2}, {x3 - x4, y3 - y4}}];
  x = Det[{{A, x1 - x2}, {B, x3 - x4}}]/C;
  y = Det[{{A, y1 - y2}, {B, y3 - y4}}]/C;
  Return[{x, y}]
  ]

(* Based on Paul Bourke's Notes \
http://local.wasp.uwa.edu.au/~pbourke/geometry/circlefrom3/ *)
CircleFromThreePoints2D[v1_, v2_, v3_] :=
 Module[{v12, v23, mid12, mid23, v12perp, v23perp, c, r},
  v12 = v2 - v1;
  v23 = v3 - v2;
  mid12 = Mean[{v1, v2}];
  mid23 = Mean[{v2, v3}];
  c = IntersectionLineLine[
    mid12, mid12 + Perp2d[v12],
    mid23, mid23 + Perp2d[v23]
    ];
  r = Norm[c - v1];
  Assert[r == Norm[c - v2]];
  Assert[r == Norm[c - v3]];
  Return[{c, r}]
  ]

(* Projection from 3d to 2d *)
CircleFromThreePoints3D[v1_, v2_, v3_] :=
 Module[{v12, v23, vnorm, b1, b2, va, vb, vc, xc, xr, yc, yr},
  v12 = v2 - v1;
  v23 = v3 - v2;
  vnorm = Cross[v12, v23];
  b1 = Normalize[v12];
  b2 = Normalize[Cross[v12, vnorm]];
  va = {0, 0};
  vb = {Dot[v2, b1], Dot[v2, b2]};
  vc = {Dot[v3, b1], Dot[v3, b2]};
  {xc, xr} = CircleFromThreePoints2D[va, vb, vc];
  yc = xc[[1]] b1 + xc[[2]] b2;
  yr = Norm[v1 - yc];
  Return[{yc, yr, b1, b2}]
  ]

v1 = {0, 0, 0};
v2 = {5, 3, 7};
v3 = {6, 4, 2};

(* calculate the center of the circle, radius, and basis vectors b1 \
and b2 *)
{yc, yr, b1, b2} = CircleFromThreePoints3D[v1, v2, v3];

(* calculate the path of motion, given an arbitrary direction *)
path = Function[{t, d}, 
   yc + yr slerp[(v1 - yc)/yr, (v3 - yc)/yr, t, d]];

(* correct the direction of rotation if necessary *)
dirn = If[
  TrueQ[Reduce[{path[t, 1] == v2, t >= 0 && t <= 1}, t] == False], 0, 
  1]

(* Plot Results *)
gr1 = ParametricPlot3D[path[t, dirn], {t, 0.0, 1.0}];
gr2 = ParametricPlot3D[Circle3d[b1, b2, yc, yr][t], {t, 0, 2 Pi}];
Show[
 gr1,
 Graphics3D[Line[{v1, v1 + b1}]],
 Graphics3D[Line[{v1, v1 + b2}]],
 Graphics3D[Sphere[v1, 0.1]],
 Graphics3D[Sphere[v2, 0.1]],
 Graphics3D[{Green, Sphere[v3, 0.1]}],
 Graphics3D[Sphere[yc, 0.2]],
 PlotRange -> Transpose[{yc - 1.2 yr, yc + 1.2 yr}]
 ] 
```

看起来像这样：

![解决方案图片](../Images/ae3fee09be48367ba9a009b2b05b9144.png)

# ios - 有什么方法可以在 iOS 的 Twitter 应用程序中获取“关注者/关注者”和“消息”列表？

> ID：10550875
> 
> 赞同：0
> 
> 时间：2012-05-11T11:57:08.760
> 
> 标签：ios, ios5, twitter

我正在构建一个演示 Twitter 应用程序。我已经获取了搜索结果和时间线推文。有什么方法可以获取我关注的人和我的追随者的名单吗？而且，我的消息也可以获取吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:22:03.177

[https://dev.twitter.com/docs/api/1/get/users/lookup](https://dev.twitter.com/docs/api/1/get/users/lookup)

[https://dev.twitter.com/docs/api/1/get/users/show](https://dev.twitter.com/docs/api/1/get/users/show)

[https://dev.twitter.com/docs/api/1/get/friends/ids](https://dev.twitter.com/docs/api/1/get/friends/ids)

[https://dev.twitter.com/docs/api/1/get/followers/ids](https://dev.twitter.com/docs/api/1/get/followers/ids)

检查此链接以了解获取关注者列表的参数，并了解用于检索朋友和关注者的 REST API 链接。

# android - Android WebView 选中文本事件

> ID：10550877
> 
> 赞同：1
> 
> 时间：2012-05-11T11:57:12.383
> 
> 标签：android, webview

我必须实现 HighLight 文本逻辑：

![](../Images/9155d7f67bb3159349314fa586fb5b87.png)

但我不知道如何做到这一点（我说的不是快速操作栏），我不知道我必须检查什么事件才能显示这个栏。

而且我不知道如何从该 Webview 中获取选定的 HTML 以将其保存到文件中。

# windows - x86 intel 32 位程序集可以通过无线网络执行操作吗？

> ID：10550878
> 
> 赞同：-1
> 
> 时间：2012-05-11T11:57:13.253
> 
> 标签：windows, networking, assembly, x86, intel

我一直在搜索汇编文档，并在他们的处理器手册中看到了英特尔发布的文档，其中有一个与处理器的 I/O 方面有关的部分。这让我对组装是否可以访问更多内容产生了兴趣，例如通过无线网络或一般网络将信息发送到另一台计算机。我目前使用的是 Windows XP，问这个问题的原因是我想创建一个聊天室类型的程序，允许两个用户通过无线网络相互发送消息。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:00:52.920

例如，从您的汇编程序中，您可以调用一些网络库或调用系统调用来发送 TCP 数据包（使用 linux，您可以打开 /dev/tcp// 文件并作为文件写入/读取）。

或者，如果操作系统允许，您可以直接通过驱动程序进行交互

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T12:11:17.750

汇编语言只是一种人类可读的表示，表示 CPU 可以理解和可以做什么。如果 CPU 连接到 I/O 设备并且有所有必要的 I/O 驱动程序，CPU 就可以使用它们执行 I/O。当然，这些驱动程序是特定于硬件和操作系统的。

就措辞而言，汇编语言无能为力。这是一个抽象的东西。

# javascript - 可以根据输入的内容调整文本区域的大小

> ID：10550880
> 
> 赞同：0
> 
> 时间：2012-05-11T11:57:23.980
> 
> 标签：javascript

我在表单上有一个文本区域，其中填充了数据库查询中的文本，可供某人编辑。

我希望 textarea 无需滚动即可显示全部内容，但不想在只有少量文本的情况下放置大的 textarea。

文本可以是 5 到 300 个字符。

我已经看到了此类问题的解决方案，但仅限于 textarea 在 onkeyup 增长的地方，如下所示。

```
<script>
function textAreaAdjust(o) {
o.style.height = "1px";
o.style.height = (25+o.scrollHeight)+"px";
}
</script>
<textarea onkeyup="textAreaAdjust(this)" style="overflow:hidden"></textarea> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T12:00:50.900

您可以在页面加载时调用该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T12:10:38.917

将 textarea 的内容复制到一个不可见的 div 中，具有相同的宽度和影响大小的样式（字体大小、行高、填充等）。测量所述 div 的高度，并将您的 textarea 设置为相同的高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T12:12:19.287

首先，不要使用`onkeyup`. 它不适合检测文本输入。

我使用以下代码调整 textarea 的大小以不断调整`textarea`元素的大小以适应内容：

```
var tarea = document.getElementsByTagName("textarea")[0];

tarea.oninput = function () {
    tarea.style.height = tarea.scrollHeight + "px";
}
​ 
```

但是，`oninput`旧版本的 IE 不支持，因此`onpropertychange`如果您需要它在 IE 8 及更低版本中工作，则需要添加：

```
var tarea = document.getElementsByTagName("textarea")[0];

tarea.oninput = tarea.onpropertychange = function (evt) {
    evt = evt || window.evt;
    if (evt.type == "propertychange" && evt.propertyName != "value")
        return;

    tarea.style.height = tarea.scrollHeight + "px";
} 
```

**工作演示：http: [//jsfiddle.net/D5e8t/](http://jsfiddle.net/D5e8t/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T12:25:03.523

只需对上述代码稍作修改，即可使 textarea 自动调整大小。只需执行以下步骤

1) 将 id 添加到您的文本区域

`<textarea onkeyup="textAreaAdjust(this)" id="txt" runat="server" style="overflow:hidden"></textarea>`

2) 在关闭 bode 标记之前添加 javascript 代码以调用 testAreaAdjust 块

`<script type="text/javascript">`
`textAreaAdjust(document.getElementById('txt'));`
`</script>`

这将自动调整文本框的大小。希望对你有帮助

# iphone - 默认为文本字段焦点上的数字视图

> ID：10550884
> 
> 赞同：0
> 
> 时间：2012-05-11T11:57:36.547
> 
> 标签：iphone, ios, keyboard, titanium-mobile

我正在尝试`UITextField`将键盘的数字视图设为默认焦点，与 iPhone 联系人/地址簿应用程序中的“Zip”字段相同。我知道 Ti.UI 模块的 KEYBOARD_* 常量，但这些似乎都不起作用，因为我不想禁止字母字符

*   我只想让数字自动聚焦。

该字段将描述一个值，在大多数情况下将是一个货币值，因此是一个数字，但在某些情况下，它可能类似于“2 件”。

我在 OS X 10.7 上使用 Titanium SDK 2、iOS 5.1、iOS 模拟器。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T12:30:46.967

它实际上是键盘`UIKeyboardTypeNumbersAndPunctuation`。它不起作用的原因是我写`keyBoardType`的不是`keyboardType`. 我的错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:59:06.790

这里是

```
UIKeyboardTypeNumberPad 
```

在这里阅读更多关于它的信息

[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextInputTraits_Protocol/Reference/UITextInputTraits.html#//apple_ref/doc/c_ref/UIKeyboardType](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextInputTraits_Protocol/Reference/UITextInputTraits.html#//apple_ref/doc/c_ref/UIKeyboardType)

# binary-tree - 字符串的二叉搜索树

> ID：10550885
> 
> 赞同：0
> 
> 时间：2012-05-11T11:57:38.007
> 
> 标签：binary-tree, binary-search-tree

我一直在做一些研究，但我一生都无法确定这是否可能。是否可以对字符串使用二叉搜索树？我看到的方式是，如果我要对字符串使用二叉搜索树，我必须用数字表示这些字符串以验证比较。我知道使用后缀树可能会更好，但是如果我要对字符串使用二叉搜索树，那么比较字符串值（例如名称）的最佳方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T12:00:58.333

我认为除了你已经说过的之外没有其他方法，另一种方法是分解字符串并使用部分字符串作为键，这在数据库中很常见，虽然不是很推荐。

# api - 尝试从带有标签的用户那里获取推文时，“错误”：“未授权”

> ID：10550890
> 
> 赞同：3
> 
> 时间：2012-05-11T11:57:57.853
> 
> 标签：api, twitter, hashtag

我正在尝试获取带有主题标签的特定用户的所有推文。我使用的网址是：

[https://api.twitter.com/1/statuses/user_timeline.json?q=%23jdmr%2Bfrom%3ABarrySpang](https://api.twitter.com/1/statuses/user_timeline.json?q=%23jdmr%2Bfrom%3ABarrySpang)

没有 URL 编码的很简单：[https://api.twitter.com/1/statuses/user_timeline.json?q=#jdmr+from:BarrySpang](https://api.twitter.com/1/statuses/user_timeline.json?q=#jdmr+from:BarrySpang)

当我在 twitter 搜索中尝试它时（如 API 文档中所述）并显示所需的结果，但是当我尝试上面的 URL 时，我得到一个 401 响应，并显示以下错误消息：{"request":"/1/statuses/ user_timeline.json?q=%23jdmr%2Bfrom%3ABarrySpang","error":"未授权"}

请你给我建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T13:25:20.960

`statuses/user_timeline`没有`q`参数

您应该使用`search`：[https ://api.twitter.com/1/search.json?q=%23jdmr%2Bfrom%3ABarrySpang](https://api.twitter.com/1/search.json?q=%23jdmr%2Bfrom%3ABarrySpang)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-02T12:44:57.930

`GetFollowers()`在已暂停的用户帐户上运行 python-twitter 的方法时，我刚刚收到相同的错误。如果其他人收到相同的错误，则可能需要检查您尝试访问的帐户是否仍然存在。

# oracle - oracle数据库中如何保证主键和时间戳的顺序

> ID：10550892
> 
> 赞同：1
> 
> 时间：2012-05-11T11:58:00.563
> 
> 标签：oracle

我正在创建一些具有 id、ts 的记录...所以首先我调用 select 来获取 ts 和 id：

```
 select SEQ_table.nextval, CURRENT_TIMESTAMP from dual 
```

然后我调用插入

```
insert into table  ...id, ts ... 
```

这在 99% 中效果很好，但有时当负载很大时，记录的顺序很糟糕，因为我需要 record.id < (record+1).id 和 record.ts < (record+1).ts 但这个条件是遇见了。我该如何解决这个问题？我正在使用 oracle 数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T12:32:22.297

您不应使用序列的结果进行排序。这可能看起来很奇怪，但请考虑如何缓存序列并考虑 RAC。每个实例都有自己的序列缓存....为了性能，您需要大缓存。最好将序列称为随机唯一密钥生成器，它们在大多数时间都按顺序工作。

时间戳格式的时间分辨率高达微秒级。当硬件变得更快并且负载增加时，您可能会同时获得多行。在甲骨文再次采取决议之前，您对此无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T12:30:45.243

使用`INSERT`触发器填充`id`和`ts`列。

```
create table sotest
(
id number,
ts timestamp
);

create sequence soseq;

CREATE OR REPLACE TRIGGER SOTEST_BI_TRIG BEFORE
  INSERT ON SOTEST REFERENCING NEW AS NEW FOR EACH ROW   
  BEGIN
    :new.id := soseq.nextval;
    :new.ts := CURRENT_TIMESTAMP;
  END;
/

PHIL@PHILL11G2 > insert into sotest values (NULL,NULL);

1 row created.

PHIL@PHILL11G2 > select * from sotest;

    ID TS
---------- ----------------------------------
     1 11-MAY-12 13.29.33.771515

PHIL@PHILL11G2 > 
```

您还应该注意提供的其他答案。意味着是`id`一个无意义的主键（它通常在应用程序中 - 它只是一个加入的键）？

# ldap - 将 LDAP 组与 Wiki 同步

> ID：10550893
> 
> 赞同：-1
> 
> 时间：2012-05-11T11:58:02.483
> 
> 标签：ldap, wiki, mediawiki, mediawiki-api

如何将 LDAP 组与 Wiki 组同步？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:57:17.097

I used [Extension:LDAP Authentication](https://www.mediawiki.org/wiki/Extension%3aLDAP_Authentication). Features: Synchronization of LDAP groups to MediaWiki security groups (LDAP->MediaWiki only)

# php - PHP，从数组中删除？

> ID：10550894
> 
> 赞同：2
> 
> 时间：2012-05-11T11:58:03.983
> 
> 标签：php

我在一系列国家中搜索以查看是否与英国匹配，如果是，我将其拉出并将其放在下拉列表的顶部。

```
foreach($this->registry->stockistCountries as $value)
{
    if($value['country'] == 'UK'){
        $buffer .= '<option>UK</option>';
        $buffer .= '<option disabled>------------------</option>';
    }

} 
```

我想知道，如果找到 UK，有没有办法从数组 $this->registry->stockistCountries 中删除它？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T12:01:51.177

将循环更改为：

```
foreach($this->registry->stockistCountries as $i => $value)
{
    if($value['country'] == 'UK'){
        $buffer .= '<option>UK</option>';
        $buffer .= '<option disabled>------------------</option>';
        unset($this->registry->stockistCountries[$i]);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T12:01:07.973

只需更改您的[`foreach`](http://de2.php.net/manual/en/control-structures.foreach.php)-loop 以获取密钥，然后使用[`unset()`](http://de2.php.net/manual/en/function.unset.php)：

```
foreach($this->registry->stockistCountries as $key => $value){
                                  // add this ^^^^^^^^
  // do something
  if(/* whatever */){
    unset($this->registry->stockistCountries[$key]);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T12:02:53.437

就像是 `@unset($this->registry->stocklist['country']['UK']);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T12:05:31.953

```
$found = array_search('UK', $this->registry->stockistCountries); //search for UK

unset($this->registry->stockistCountries[$found]); // Remove from array 
```

# mapreduce - 是否可以通过编写单独的 mapreduce 程序并行执行 Hive 查询？

> ID：10550898
> 
> 赞同：6
> 
> 时间：2012-05-11T11:58:22.710
> 
> 标签：mapreduce, hive

我已经问了一些关于提高 Hive 查询性能的问题。一些答案与映射器和减速器的数量有关。我尝试了多个映射器和减速器，但我没有看到执行中有任何区别。不知道为什么，可能是我没有以正确的方式做到这一点，或者我错过了其他东西。

我想知道是否可以并行执行 Hive 查询？我的意思是，通常查询会在队列中执行。例如：查询1

查询2

查询3

. . . n

执行时间太长，我想减少执行时间。

我需要知道如果我们在 Hive JDBC 程序中使用 mapreduce 程序，那么是否可以并行执行它？不知道这是否可行，但这是我的目标？

我在下面恢复我的问题：

1）如果可以并行运行多个 Hive 查询，是否需要多个 Hive Thrift Server？

2) 是否可以打开多个 Hive Thrift 服务器？

3) 我认为不可能在同一个端口上打开多个 Hive Thrift Server？

4) 我们可以在不同的端口上打开多个 Hive Thrift Server 吗？

请为此建议我一些解决方案。如果您有其他选择，我也会尝试。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T14:59:04.257

您可能已经知道，Hive 是 Hadoop 和 Map-reduce 的类似 SQL 的前端。Hive 上的任何重要查询都被编译为 Map-Reduce 并在 Hadoop 上运行。Map-reduce 是一个并行处理框架，因此您的每个 Hive 查询都将并行运行和处理数据。Hive 默认使用 FIFO 调度程序来调度 Hadoop 上的作业，因此，在给定时间只能执行一个 Hive 查询，并且将在第一个查询完成后执行下一个查询。在大多数情况下，我建议人们优化单个 Hive 查询，而不是并行化多个 Hive 查询。如果您倾向于并行化 Hive 查询，则可能表明您的集群使用效率低下。要进一步分析 Hive 查询的性能和使用情况，您可以安装一个分布式监控系统，例如[Ganglia](http://ganglia.sourceforge.net/)用于监控集群的使用情况（Amazon EMR 也支持）。

长话短说，您不必编写 map-reduce 程序；这就是您首先使用 Hive 的目的。但是，如果您可能了解 Hive 可能不了解的数据，则可能会导致 Hive 查询的性能欠佳。例如，您的数据可能按某些列排序，而 Hive 可能不知道该信息。在这种情况下，如果您无法在 Hive 中设置额外的元信息，那么编写一个将额外信息考虑在内并可能为您提供更好性能的 map-reduce 作业可能是有意义的。在大多数情况下，我发现 Hive 性能与 Hive 查询对应的 Map-reduce 作业相当。

# java - org.w3c.dom.Node 的并发和复用

> ID：10550900
> 
> 赞同：5
> 
> 时间：2012-05-11T11:58:32.903
> 
> 标签：java, xml, multithreading, caching

从[这里](https://stackoverflow.com/questions/3439485/java-and-xml-jaxp-what-about-caching-and-thread-safety)我了解到`org.w3c.dom.Node`（以及同一包中的其他类）不是线程安全的。

**我在问自己是否以及如何缓存这些类？** 

*   有没有最好的方法？
*   不可变的包装类是否存在？
*   我应该使用/而不是每次`ThreadLocal`都 重新创建吗？`DocumentBuilder``DocumentBuilderFactory`
    `Node`
*   你做什么工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:28:15.213

您不想缓存 XML 文档。最好将其读取/解析为“配置”对象。根据您的配置的复杂程度或简单程度，它可能是一个简单的 Map 或更复杂的东西。

一个好处（除了从多个线程解析同一个文档的并发问题之外）是您不受配置的 XML 格式的约束。想想过去所有的配置是如何在属性文件中的，然后 XML 出现了，每个开源包都添加了对 XML 的支持。然后注释来了，当时也支持。Hibernate 就是一个很好的例子。

您要做的是解析配置文件并将生成的配置对象保存在缓存中，而不是源 XML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T17:21:11.910

您唯一的选择是同步对文档/节点的所有访问。如果封装得很好（DOM 对象由单个类维护，并且所有 DOM 操作都在该类中），那么您可以同步该入口点类。如果节点在其他对象之间传递，那么您将遇到重大问题。您基本上需要决定一个对象，该对象将是您的“锁定”类，并围绕对配置文件 Nodes.js 的*所有*访问进行同步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T16:57:10.017

抱歉，这不是一个真正的答案，但如果用例是要跨多个线程共享的配置文件模型。写入在哪里发生在配置上。如果是一次读取多次使用，就不需要同步了吧？我在这里错过了什么吗？

# css - 如何重叠两个div

> ID：10550901
> 
> 赞同：4
> 
> 时间：2012-05-11T11:58:38.070
> 
> 标签：css, html, styling

我正在设计一个新网站，但遇到了一个问题。我希望我的导航栏工作的方式是它融入标题（徽标栏）。

这是当前编码时的样子：

![在此处输入图像描述](../Images/77892d5f2e63768ec55f237173176d91.png)

这是我想要的样子：

![在此处输入图像描述](../Images/fa4bad12f77a6b10ee3ea8d6f65e034e.png)

目前这是我的 CSS：

```
#header {
margin: 0px auto;
width: 900px;
height: 170px;
background: #000;
}

#navigation {
margin: 0px auto;
width: 920px;
height: 60px;
background: url('images/nav.png');
} 
```

还有我的 HTML：

```
 <div id="header">

        </div>

        <div id="navigation">

        </div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T12:00:28.257

你可以这样写：

```
#header {
margin: 0 auto;
margin-bottom:-30px;
width: 900px;
height: 170px;
background: #000;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T12:02:44.760

否定`margin`或`position: absolute`将解决您的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T12:03:27.600

项目上可能有默认填充和边距，这可能意味着您必须像第一个显示负边距的答案一样覆盖它，指定边距：0；填充：0；或使用 CSS 重置来避免这种摆弄......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-11T12:07:20.303

添加以下内容： -

**`margin-top ; -30px;`**

# arrays - 有效合并相邻块

> ID：10550902
> 
> 赞同：1
> 
> 时间：2012-05-11T11:58:44.137
> 
> 标签：arrays, algorithm, data-structures, merge, theory

这就是我想要做的：我有一个名为 merge() 的例程，它经常被调用。它的任务是合并称为“Block”的数据结构，其内容是由“s_idx”和“e_idx”表示的整数范围，分别表示起始索引和结束索引。相邻块是其范围可以组合成一个新的连续范围的块。例如，范围为 (25,32) 的块 3 和范围为 (33,40) 的块 4 是相邻的，因此可以组合它们的范围以产生新的连续范围 (25,40)。所以最后，将只剩下一个块，将所有单独的块组合起来产生范围 (0,N-1)，其中 N 是块的总数。

我的问题是：是否有任何有效的算法来执行这样的操作？

当前的实现使用 O(N^2) 算法，随着块数的增加，该算法会显着减慢。

```
for( int i=0 ; i<_merge_list.max()-1 ; i++ )
    {
        for( int j=i+1 ; j<_merge_list.max() ; j++ )
        {
            if( _merge_list.exist(i) && _merge_list.exist(j) )
            {
                if( _merge_list[i]->get_end_idx() + 1 ==    _merge_list[j]->get_start_idx() )
                {
                    _merge_list[i]->set_end_idx( _merge_list[j]->get_end_idx() );
                    _merge_list[i]->set_link( _merge_list[j]->get_block_idx() );

                                    perform(_merge_list[i]);

                    _merge_list.remove(j);          
                }
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:29:34.957

您的所有块都保证是连续的吗？如果是这种情况，在 O(N) 时间内找到最小、最大索引然后创建一个最终块应该很简单，否则您可以先对块进行排序然后合并 O(NlogN) + O(N) = O(NlogN)

如果以排序的方式维护块，合并一个块只需要 O(N) 时间。如果你一次拥有它们，那么你首先对块数组进行排序，然后合并。如果您将它们零碎地获取，则以保持排序顺序的方式合并到块数组中。

# visual-studio - 调试时如何让 Visual Studio 自动搜索源代码

> ID：10550903
> 
> 赞同：7
> 
> 时间：2012-05-11T11:58:48.147
> 
> 标签：visual-studio, debugging, visual-studio-debugging

鉴于：

*   已在目录“A”中构建的 dll
*   带有源代码的调试 PC 放在目录“B”中

然后在调试时，VisualStudio 将在“A”中搜索源代码，但不会找到它（就像在“B”中一样），并会显示名为“Find Source”的对话框。然后您将浏览到源文件的正确位置，一切都会正常工作。

为了避免出现此对话框（及其相关浏览），是否有办法让 Visual Studio 自动在“B”中查找源代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T12:08:21.187

您似乎在项目中设置了一些与调试相关的配置。

此属性页指定调试器在调试解决方案时将在何处查找源文件。

要访问调试源文件属性页，请在解决方案资源管理器中右键单击您的解决方案，然后从快捷菜单中选择属性。展开 Common Properties 文件夹，然后单击 Debug Source Files 页面。

**包含源代码**
的目录 包含调试器在调试解决方案时搜索源文件的目录列表。

**不要查找这些源文件**
输入您不希望调试器读取的任何文件的名称。如果调试器在上面指定的目录之一中找到这些文件之一，它将忽略它。如果在调试时出现“查找源”对话框，并且单击“取消”，则正在搜索的文件将添加到此列表中，这样调试器就不会继续搜索该文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:19:41.320

可以使用 autoHotKey 脚本工具自动搜索源代码：它可以很好地打开正确的源代码，而无需任何用户输入。第一次搜索文件时，需要几秒钟，然后它会变成即时的。

下面提供了脚本代码。它与VS2010一起使用：

```
SourcesRoot = D:\MySourceCodeIsHere
Loop
{
  WinWait, Find Source:, 
  IfWinNotActive, Find Source: , , WinActivate, Find Source:, 
  WinWaitActive, Find Source:, 
  ControlGetText, Filename, Edit1,
  Loop, %SourcesRoot%\%Filename%, , 1  
  {
    ControlSetText, Edit1, %A_LoopFileFullPath%
    break  
  }
  ControlClick Button2
} 
```

# web-services - 如何计算网络服务调用？

> ID：10550905
> 
> 赞同：2
> 
> 时间：2012-05-11T11:58:55.170
> 
> 标签：web-services, glassfish-3, jmx

我想知道部署在 glassfish AS 3.1 上的 web 服务被调用（调用）多少次？是否可以使用 JMX 接口知道它？如果是这样，ObjectName 是什么？

除此之外，我可以使用以下命令语句从命令接口获取此值

> asadmin get -m "server.applications.hello-jaxws2*"
> server.applications.hello-jaxws2.2.server.Hello.requestcount-count = 14

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T16:48:06.850

# asadmin get -m "server.applications.hello-jaxws2*" server.applications.hello-jaxws2.2.server.Hello.requestcount-count = 14

我找不到如何获取 Web 服务调用调用计数。但是 AS 的 Restful 接口对我来说已经足够了。

# xml - Xmldoc.load 未将对象引用设置为对象的实例

> ID：10550906
> 
> 赞同：2
> 
> 时间：2012-05-11T11:58:57.303
> 
> 标签：xml, vb.net

我有一个包含 XML 的字符串。我想由此创建一个 XMLdocument。我正在使用这样的 Load 和 LoadXMl 方法：

```
 Dim doc As XmlDocument
            doc.LoadXml(applicationXml) 
```

但他们正在重新调整：

```
Object reference not set to an instance of an object. 
```

我的 XML 如下所示：

```
<gate.util.persistence.GateApplication>
  <urlList class="gate.util.persistence.CollectionPersistence">
    <localList>      
      <gate.util.persistence.PersistenceManager-URLHolder>
        <urlString>$gatehome$plugins/LingPipe/</urlString>
      </gate.util.persistence.PersistenceManager-URLHolder>
      <gate.util.persistence.PersistenceManager-URLHolder>
        <urlString>$gatehome$plugins/ANNIE/</urlString>
      </gate.util.persistence.PersistenceManager-URLHolder>
      <gate.util.persistence.PersistenceManager-URLHolder>
        <urlString>$gatehome$plugins/Stemmer_Snowball/</urlString>
      </gate.util.persistence.PersistenceManager-URLHolder>     
    </localList>
    <collectionType>java.util.ArrayList</collectionType>
  </urlList>
  <application class="gate.util.persistence.SerialAnalyserControllerPersistence">
    <prList class="gate.util.persistence.CollectionPersistence">
      <localList>
        <gate.util.persistence.PRPersistence>
          <runtimeParams class="gate.util.persistence.MapPersistence">
            <mapType>gate.util.SimpleFeatureMapImpl</mapType>
            <localMap>
              <entry>
                <string>setsToKeep</string>
                <null />
              </entry>
              <entry>
                <string>document</string>
                <null/>
              </entry>
              <entry>
                <string>annotationTypes</string>
                <null/>
              </entry>
              <entry>
                <string>corpus</string>
                <null/>
              </entry>
              <entry>
                <string>keepOriginalMarkupsAS</string>
                <boolean>true</boolean>
              </entry>
              <entry>
                <string>setsToRemove</string>
                <null/>
              </entry>
            </localMap>
          </runtimeParams>
          <resourceType>gate.creole.annotdelete.AnnotationDeletePR</resourceType>
          <resourceName>Document Reset PR</resourceName>
          <initParams class="gate.util.persistence.MapPersistence">
            <mapType>gate.util.SimpleFeatureMapImpl</mapType>
            <localMap/>
          </initParams>
          <features class="gate.util.persistence.MapPersistence">
            <mapType>gate.util.SimpleFeatureMapImpl</mapType>
            <localMap/>
          </features>
        </gate.util.persistence.PRPersistence>
        <gate.util.persistence.LanguageAnalyserPersistence>
          <runtimeParams class="gate.util.persistence.MapPersistence">
            <mapType>gate.util.SimpleFeatureMapImpl</mapType>
            <localMap>
              <entry>
                <string>annotationSetName</string>
                <null/>
              </entry>
              <entry>
                <string>document</string>
                <null/>
              </entry>
            </localMap>
          </runtimeParams>
          <resourceType>gate.creole.tokeniser.DefaultTokeniser</resourceType>
          <resourceName>ANNIE English Tokeniser</resourceName>
          <initParams class="gate.util.persistence.MapPersistence">
            <mapType>gate.util.SimpleFeatureMapImpl</mapType>
            <localMap>
              <entry>
                <string>tokeniserRulesURL</string>
                <gate.util.persistence.PersistenceManager-URLHolder>
                  <urlString>$gatehome$plugins/ANNIE/resources/tokeniser/DefaultTokeniser.rules</urlString>
                </gate.util.persistence.PersistenceManager-URLHolder>
              </entry>
              <entry>
                <string>transducerGrammarURL</string>
                <gate.util.persistence.PersistenceManager-URLHolder>
                  <urlString>$gatehome$plugins/ANNIE/resources/tokeniser/postprocess.jape</urlString>
                </gate.util.persistence.PersistenceManager-URLHolder>
              </entry>
              <entry>
                <string>encoding</string>
                <string>UTF-8</string>
              </entry>
            </localMap>
          </initParams>
          <features class="gate.util.persistence.MapPersistence">
            <mapType>gate.util.SimpleFeatureMapImpl</mapType>
            <localMap/>
          </features>
        </gate.util.persistence.LanguageAnalyserPersistence>
        <gate.util.persistence.LanguageAnalyserPersistence>
          <runtimeParams class="gate.util.persistence.MapPersistence">
            <mapType>gate.util.SimpleFeatureMapImpl</mapType>
            <localMap>
              <entry>
                <string>annotationSetName</string>
                <null/>
              </entry>
              <entry>
                <string>document</string>
                <null/>
              </entry>
            </localMap>
          </runtimeParams>
          <resourceType>com.ontotext.gate.gazetteer.HashGazetteer</resourceType>
          <resourceName>TCG Gazetteer</resourceName>
          <initParams class="gate.util.persistence.MapPersistence">
            <mapType>gate.util.SimpleFeatureMapImpl</mapType>
            <localMap>
              <entry>
                <string>listsURL</string>
                <gate.util.persistence.PersistenceManager-URLHolder>
                  <urlString>http://halo.dyndns-web.com:96/tcg/GATE/Gazetteers/MasterListsDef.def</urlString>
                </gate.util.persistence.PersistenceManager-URLHolder>
              </entry>
              <entry>
                <string>encoding</string>
                <string>UTF-8</string>
              </entry>
              <entry>
                <string>caseSensitive</string>
                <boolean>false</boolean>
              </entry>
            </localMap>
          </initParams>
          <features class="gate.util.persistence.MapPersistence">
            <mapType>gate.util.SimpleFeatureMapImpl</mapType>
            <localMap/>
          </features>
        </gate.util.persistence.LanguageAnalyserPersistence>
        <gate.util.persistence.LanguageAnalyserPersistence>
          <runtimeParams class="gate.util.persistence.MapPersistence">
            <mapType>gate.util.SimpleFeatureMapImpl</mapType>
            <localMap>
              <entry>
                <string>wholeWordsOnly</string>
                <boolean>true</boolean>
              </entry>
              <entry>
                <string>document</string>
                <null/>
              </entry>
              <entry>
                <string>longestMatchOnly</string>
                <boolean>true</boolean>
              </entry>
              <entry>
                <string>annotationSetName</string>
                <null/>
              </entry>
            </localMap>
          </runtimeParams>
          <resourceType>gate.creole.gazetteer.DefaultGazetteer</resourceType>
          <resourceName>ANNIE Gazetteer</resourceName>
          <initParams class="gate.util.persistence.MapPersistence">
            <mapType>gate.util.SimpleFeatureMapImpl</mapType>
            <localMap>
              <entry>
                <string>gazetteerFeatureSeparator</string>
                <null/>
              </entry>
              <entry>
                <string>listsURL</string>
                <gate.util.persistence.PersistenceManager-URLHolder>
                  <urlString>$gatehome$plugins/ANNIE/resources/gazetteer/lists.def</urlString>
                </gate.util.persistence.PersistenceManager-URLHolder>
              </entry>
              <entry>
                <string>caseSensitive</string>
                <boolean>true</boolean>
              </entry>
              <entry>
                <string>encoding</string>
                <string>UTF-8</string>
              </entry>
            </localMap>
          </initParams>
          <features class="gate.util.persistence.MapPersistence">
            <mapType>gate.util.SimpleFeatureMapImpl</mapType>
            <localMap/>
          </features>
        </gate.util.persistence.LanguageAnalyserPersistence>
        <gate.util.persistence.LanguageAnalyserPersistence>
          <runtimeParams class="gate.util.persistence.MapPersistence">
            <mapType>gate.util.SimpleFeatureMapImpl</mapType>
            <localMap>
              <entry>
                <string>outputASName</string>
                <null/>
              </entry>
              <entry>
                <string>document</string>
                <null/>
              </entry>
              <entry>
                <string>inputASName</string>
                <null/>
              </entry>
            </localMap>
          </runtimeParams>
          <resourceType>gate.creole.splitter.SentenceSplitter</resourceType>
          <resourceName>ANNIE Sentence Splitter</resourceName>
          <initParams class="gate.util.persistence.MapPersistence">
            <mapType>gate.util.SimpleFeatureMapImpl</mapType>
            <localMap>
              <entry>
                <string>encoding</string>
                <string>UTF-8</string>
              </entry>
              <entry>
                <string>gazetteerListsURL</string>
                <gate.util.persistence.PersistenceManager-URLHolder>
                  <urlString>$gatehome$plugins/ANNIE/resources/sentenceSplitter/gazetteer/lists.def</urlString>
                </gate.util.persistence.PersistenceManager-URLHolder>
              </entry>
              <entry>
                <string>transducerURL</string>
                <gate.util.persistence.PersistenceManager-URLHolder>
                  <urlString>$gatehome$plugins/ANNIE/resources/sentenceSplitter/grammar/main.jape</urlString>
                </gate.util.persistence.PersistenceManager-URLHolder>
              </entry>
            </localMap>
          </initParams>
          <features class="gate.util.persistence.MapPersistence">
            <mapType>gate.util.SimpleFeatureMapImpl</mapType>
            <localMap/>
          </features>
        </gate.util.persistence.LanguageAnalyserPersistence>
        <gate.util.persistence.LanguageAnalyserPersistence>
          <runtimeParams class="gate.util.persistence.MapPersistence">
            <mapType>gate.util.SimpleFeatureMapImpl</mapType>
            <localMap>
              <entry>
                <string>document</string>
                <null/>
              </entry>
              <entry>
                <string>corpus</string>
                <null/>
              </entry>
              <entry>
                <string>outputAnnotationType</string>
                <string>Token</string>
              </entry>
              <entry>
                <string>inputASName</string>
                <null/>
              </entry>
              <entry>
                <string>failOnMissingInputAnnotations</string>
                <boolean>true</boolean>
              </entry>
              <entry>
                <string>outputASName</string>
                <null/>
              </entry>
              <entry>
                <string>baseSentenceAnnotationType</string>
                <string>Sentence</string>
              </entry>
              <entry>
                <string>baseTokenAnnotationType</string>
                <string>Token</string>
              </entry>
            </localMap>
          </runtimeParams>
          <resourceType>gate.creole.POSTagger</resourceType>
          <resourceName>ANNIE POS Tagger</resourceName>
          <initParams class="gate.util.persistence.MapPersistence">
            <mapType>gate.util.SimpleFeatureMapImpl</mapType>
            <localMap>
              <entry>
                <string>encoding</string>
                <null/>
              </entry>
              <entry>
                <string>rulesURL</string>
                <gate.util.persistence.PersistenceManager-URLHolder>
                  <urlString>$gatehome$plugins/ANNIE/resources/heptag/ruleset</urlString>
                </gate.util.persistence.PersistenceManager-URLHolder>
              </entry>
              <entry>
                <string>lexiconURL</string>
                <gate.util.persistence.PersistenceManager-URLHolder>
                  <urlString>$gatehome$plugins/ANNIE/resources/heptag/lexicon</urlString>
                </gate.util.persistence.PersistenceManager-URLHolder>
              </entry>
            </localMap>
          </initParams>
          <features class="gate.util.persistence.MapPersistence">
            <mapType>gate.util.SimpleFeatureMapImpl</mapType>
            <localMap/>
          </features>
        </gate.util.persistence.LanguageAnalyserPersistence>
        <gate.util.persistence.LanguageAnalyserPersistence>
          <runtimeParams class="gate.util.persistence.MapPersistence">
            <mapType>gate.util.SimpleFeatureMapImpl</mapType>
            <localMap>
              <entry>
                <string>outputASName</string>
                <null/>
              </entry>
              <entry>
                <string>document</string>
                <null />
              </entry>
              <entry>
                <string>inputASName</string>
                <null/>
              </entry>
            </localMap>
          </runtimeParams>
          <resourceType>gate.creole.ANNIETransducer</resourceType>
          <resourceName>ANNIE NE Transducer</resourceName>
          <initParams class="gate.util.persistence.MapPersistence">
            <mapType>gate.util.SimpleFeatureMapImpl</mapType>
            <localMap>
              <entry>
                <string>encoding</string>
                <string>UTF-8</string>
              </entry>
              <entry>
                <string>annotationAccessors</string>
                <null/>
              </entry>
              <entry>
                <string>operators</string>
                <null/>
              </entry>
              <entry>
                <string>grammarURL</string>
                <gate.util.persistence.PersistenceManager-URLHolder>
                  <urlString>$gatehome$plugins/ANNIE/resources/NE/main.jape</urlString>
                </gate.util.persistence.PersistenceManager-URLHolder>
              </entry>
            </localMap>
          </initParams>
          <features class="gate.util.persistence.MapPersistence">
            <mapType>gate.util.SimpleFeatureMapImpl</mapType>
            <localMap/>
          </features>
        </gate.util.persistence.LanguageAnalyserPersistence>
        <gate.util.persistence.LanguageAnalyserPersistence>
          <runtimeParams class="gate.util.persistence.MapPersistence">
            <mapType>gate.util.SimpleFeatureMapImpl</mapType>
            <localMap>
              <entry>
                <string>annotationSetName</string>
                <null/>
              </entry>
              <entry>
                <string>document</string>
                <null/>
              </entry>
              <entry>
                <string>annotationTypes</string>
                <gate.util.persistence.CollectionPersistence>
                  <localList>
                    <string>Organization</string>
                    <string>Person</string>
                    <string>Location</string>
                    <string>Date</string>
                  </localList>
                  <collectionType>java.util.ArrayList</collectionType>
                </gate.util.persistence.CollectionPersistence>
              </entry>
            </localMap>
          </runtimeParams>
          <resourceType>gate.creole.orthomatcher.OrthoMatcher</resourceType>
          <resourceName>ANNIE OrthoMatcher</resourceName>
          <initParams class="gate.util.persistence.MapPersistence">
            <mapType>gate.util.SimpleFeatureMapImpl</mapType>
            <localMap>
              <entry>
                <string>definitionFileURL</string>
                <gate.util.persistence.PersistenceManager-URLHolder>
                  <urlString>$gatehome$plugins/ANNIE/resources/othomatcher/listsNM.def</urlString>
                </gate.util.persistence.PersistenceManager-URLHolder>
              </entry>
              <entry>
                <string>minimumNicknameLikelihood</string>
                <double>0.5</double>
              </entry>
              <entry>
                <string>extLists</string>
                <boolean>true</boolean>
              </entry>
              <entry>
                <string>encoding</string>
                <string>UTF-8</string>
              </entry>
              <entry>
                <string>caseSensitive</string>
                <boolean>false</boolean>
              </entry>
              <entry>
                <string>highPrecisionOrgs</string>
                <boolean>false</boolean>
              </entry>
              <entry>
                <string>personType</string>
                <string>Person</string>
              </entry>
              <entry>
                <string>processUnknown</string>
                <boolean>true</boolean>
              </entry>
              <entry>
                <string>organizationType</string>
                <string>Organization</string>
              </entry>
            </localMap>
          </initParams>
          <features class="gate.util.persistence.MapPersistence">
            <mapType>gate.util.SimpleFeatureMapImpl</mapType>
            <localMap/>
          </features>
        </gate.util.persistence.LanguageAnalyserPersistence>
        <gate.util.persistence.PRPersistence>
          <runtimeParams class="gate.util.persistence.MapPersistence">
            <mapType>gate.util.SimpleFeatureMapImpl</mapType>
            <localMap>
              <entry>
                <string>document</string>
                <null/>
              </entry>
              <entry>
                <string>annotationSetName</string>
                <null/>
              </entry>
              <entry>
                <string>annotationType</string>
                <string>Token</string>
              </entry>
              <entry>
                <string>annotationFeature</string>
                <string>string</string>
              </entry>
            </localMap>
          </runtimeParams>
          <resourceType>stemmer.SnowballStemmer</resourceType>
          <resourceName>Stemmer</resourceName>
          <initParams class="gate.util.persistence.MapPersistence">
            <mapType>gate.util.SimpleFeatureMapImpl</mapType>
            <localMap>
              <entry>
                <string>language</string>
                <string>english</string>
              </entry>
            </localMap>
          </initParams>
          <features class="gate.util.persistence.MapPersistence">
            <mapType>gate.util.SimpleFeatureMapImpl</mapType>
            <localMap/>
          </features>
        </gate.util.persistence.PRPersistence>
      </localList>
      <collectionType>java.util.ArrayList</collectionType>
    </prList>
    <resourceType>gate.creole.SerialAnalyserController</resourceType>
    <resourceName>ANNIE</resourceName>
    <initParams class="gate.util.persistence.MapPersistence">
      <mapType>gate.util.SimpleFeatureMapImpl</mapType>
      <localMap/>
    </initParams>
    <features class="gate.util.persistence.MapPersistence">
      <mapType>gate.util.SimpleFeatureMapImpl</mapType>
      <localMap/>
    </features>
  </application>
</gate.util.persistence.GateApplication> 
```

请提出解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T12:01:39.800

似乎您需要使用`New`关键字，因为`XmlDocument`它是引用类型：

```
 Dim doc as XmlDocument = new XmlDocument() 
```

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.loadxml.aspx#Y0 。](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.loadxml.aspx#Y0)

# artificial-intelligence - 在遗传算法中使用模式的具体目的是什么？

> ID：10550909
> 
> 赞同：2
> 
> 时间：2012-05-11T11:59:15.810
> 
> 标签：artificial-intelligence, genetic-algorithm, evolutionary-algorithm

图式究竟如何帮助遗传算法获得最优解？模式意味着模板这是否意味着人口中的每个人都将拥有相同的模式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T09:03:25.103

Schemata 与遗传算法无关。他们只是在那里说话。Holland 确定了它们的存在并将其与遗传算法的能力相关联，这就是它们与 GA 相关联的原因。

对于长度为 4 的任何位串，您可以识别多个模式：

```
****, 0***, 1***, *0**, *1**, 00**, 10**, 01**, 11**, etc. 
```

这些图式总是存在的。一个人同时是许多这样的图式的一部分。所有个人都将成为 4* 模式的一部分，但只有前面有 0 的人才会成为 0*** 模式的一部分。

现在是与遗传算法的关系。哪些类型的图式是活跃的，由整个群体中的所有个体决定。什么样的图式强取决于它们在多个个体中的存在。如果人口中的许多人在他们的第 4 位有一个“1”，那么这就是一个强模式，如果他们在开始时都有一个 0，那么强模式看起来像 0**1。匹配某个模式的人越多，它就越强。图式的适应度是与该图式匹配的所有个体的平均适应度。Holland 现在表示，使用适应度比例选择、单点交叉和高于平均水平的位翻转突变模式将在进化过程中呈指数级增长。为什么图式有必要变得更强？因为模式的顺序越高，它在搜索过程中被打乱的可能性就越大。然而，如果该图式存在于多个个体中，则在所有个体中概率再次降低。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T13:05:01.990

长答案：[http ://en.wikipedia.org/wiki/Holland%27s_schema_theorem](http://en.wikipedia.org/wiki/Holland%27s_schema_theorem)

简短的回答：

模式是应用于总体的“掩码”。您可以计算有多少人匹配该面具。因此，模式是解决方案的一部分的一种特征。

如果一个模式的适应度高于平均水平，那么越来越多的人将匹配该模式（如果我正确理解了 Holland）。

# django - 在 Django-cms 页面中添加注释

> ID：10550911
> 
> 赞同：0
> 
> 时间：2012-05-11T11:59:27.633
> 
> 标签：django, django-cms

我正在使用 Django-CMS，我正在寻找一种简单的方法来在每个页面的末尾添加用户评论。是扩展。插件和 apphook 能帮上忙吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:46:53.060

您可以使用`comments`此处记录的 Django 框架：- [https://docs.djangoproject.com/en/1.4/ref/contrib/comments/](https://docs.djangoproject.com/en/1.4/ref/contrib/comments/)

# xslt - XSL:FO Page-Number() 函数带前导零

> ID：10550915
> 
> 赞同：1
> 
> 时间：2012-05-11T11:59:32.497
> 
> 标签：xslt, xslt-2.0, xsl-fo

假设我想将页码“01”打印为两个单独的数字 0 和 1，从 1 到 9 0X-> 01,02,03.... 从 10 到 99 10,11,12

```
<fo:table-cell xsl:use-attribute-sets="TableCellBorder">
    <fo:block>
      <xsl:value-of select="substring(<fo:page-number/>, 1, 1)"/> //0 or first page-number digit
    </fo:block>
</fo:table-cell>
<fo:table-cell xsl:use-attribute-sets="TableCellBorder">
   <fo:block>
      <xsl:value-of select="substring(<fo:page-number/>, 2, 1)"/>//second page-number digit
    </fo:block>
</fo:table-cell> 
```

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T21:54:06.200

```
<fo:page-sequence master-reference="mymaster" format="01">
  ...
    <fo:page-number/>
  ...
</fo:page-sequence> 
```

描述[here](http://www.w3.org/TR/xslt#convert)，唯一的诀窍是找出放置它的位置。

抱歉，仅使用 XEP 进行了测试；不知道 FOP 是否支持它。

**升级版**。您是否考虑添加“前导零”字样以使文章更易于搜索？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:49:43.570

这是不可能的。

`<fo:page-number/>`是一个 XSL-FO 构造。在 XSL-FO 处理器运行之前，它不会获得值。它不能在生成 XSL-FO 标记的 XSLT 样式表中进行操作。

# python - Django-分页错误

> ID：10550921
> 
> 赞同：0
> 
> 时间：2012-05-11T12:00:00.703
> 
> 标签：python, django

我正在使用[django-pagination](http://pypi.python.org/pypi/django-pagination)包在 tweepy 中对用户推文进行分页。遵循所有必要的说明后，分页似乎不起作用。我想我错过了一些东西。不知道要使用哪个变量来替换“object_list”。我怎样才能让它分页？

错误：

```
 TemplateSyntaxError at /test/

       Caught VariableDoesNotExist while rendering: Failed lookup for key [object_list] in u'<tweepy.cursor.ItemIterator object at 0x0437DC10>'

        Request Method:     GET
        Request URL:    http://127.0.0.1:8000/test/
        Django Version:     1.3.1
        Exception Type:     TemplateSyntaxError
        Exception Value:    

      Caught VariableDoesNotExist while rendering: Failed lookup for key [object_list] in u'<tweepy.cursor.ItemIterator object at 0x0437DC10>'

       Exception Location:  C:\Python27\lib\site-packages\django\template\base.py in _resolve_lookup, line 692
       Python Executable:   C:\Python27\python.exe
       Python Version:  2.7.2 
```

模板：

```
 {% extends "base.html" %}

     {% load pagination_tags %} 

       {% block content %}

        {% autopaginate treats.object_list 10 %} 

          {% for treat in treats %}  

              <center> <p>  {{ treat.author.screen_name}} </p>
         <p>  {{ treat.text|safe }}  {{ treat.url }} </p>
         <p> {{ treat.created_at }}  Via: {{treat.source}} </p> </center>

         {% empty %} 

            <p> Sorry, No Update Could Be Loaded At This Time. </p>
        {% endfor %} 

         {% paginate %} 
          {% endblock %} 
```

意见：

```
 def testdat(request):
       if request.method=="GET":
          treats=Cursor(api.list_timeline, owner=request.user, slug="").items(20)
          for treat in treats:
              treat.__getstate__()
              top=Twet(text= treat.text, author_screen_name= treat.author.screen_name, created_at= treat.created_at, source= treat.source)
              top.save()
          treats=Cursor(api.list_timeline, owner=request.user, slug='').items(20)
          return render_to_response('dashy.html',{'treats': treats},context_instance=Requ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:20:35.627

那么基本问题是您传递给分页标记的内容不是可迭代的（如列表或查询集），因此它无法通过它进行分页。

您可以通过修改您的退货来解决这个问题`return render_to_response('dashy.html',{'treats': list(treats)}`

但是，tweepy 已经包含[分页](http://packages.python.org/tweepy/html/code_snippet.html#pagination)功能，因此您可以直接使用它。您的`treats`对象具有以下方法`.next()`, `.prev()`, `.current_page()`, `.count()`, `.page_iterator()`，`.page_index()`您可以使用它们直接实现分页。

有关公开的所有方法的图表，请参阅[此链接。](http://jsonbot.sourcearchive.com/documentation/0.6.1.2/classjsb_1_1contrib_1_1tweepy_1_1cursor_1_1ItemIterator.html)`ItemIterator`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T12:11:12.993

尝试：

```
 {% autopaginate treats 10 %} 
```

默认情况下，查询集（我相信的对待）不包含 object_list

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T12:37:06.227

我假设您的 Python 代码使用 iterator() 来返回 QuerySet，在这种情况下这是有道理的，因为查询集是可迭代的但没有长度。如果 iterator() 存在，也许你应该从返回的代码中删除 iterator()，或者至少做一个简单的查询。

```
treats = Treat.objects.filter(price__gt=100)
...
return {'treats':treats} 
```

那么你的模板是错误的，正如 Krzystof 所说，就这样做

```
{% autopaginate treats 10 %} 
```

因为我认为，当您遍历 yout 模板中的零食时，您必须对完全相同的可迭代变量进行分页。

# javascript - 我想使用 JavaScript 更改用户定义特殊字符的字符串

> ID：10550922
> 
> 赞同：-1
> 
> 时间：2012-05-11T12:00:05.090
> 
> 标签：javascript, jquery

我想`colormanagemnet`从用户定义的特殊字符中更改字符串，如下所示：

**c!o@l#o$r$m%a^n&a*g?e(m)e@n!t**

使用 JavaScript 或 jQuery。

```
<script type="text/javascript">
var sc = "!@#$%^&*()?"
var txt = "colormanagemnet";

// dont know how to concat like this 

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:07:19.063

首先，您可以拆分每个变量

```
sc.split("")

=> ["!", "@", "#", "$", "%", "^", "&", "*", "(", ")", "?"]

txt.split("")

=>["c", "o", "l", "o", "r", "m", "a", "n", "a", "g", "e", "m", "n", "e", "t"] 
```

现在您可以运行 . 的每个字符`txt`并与 . 的每个字符连接`sc`。如果您有不同数量的元素，您可以执行以下操作：

```
for(...){
   final = final + char_from_txt[i] + char_from_sc[i % sc_length];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T12:33:20.367

如果需要，这个可以处理不均匀的长度和垫子

[演示](http://jsfiddle.net/mplungjan/AGv7w/)

```
var sc = "!@#$%^&*()?"
var txt = "colormanagemnet";
var newstr =""; 
```

最优雅的是将 charAt 与 Tiago 的余数方法一起使用：

```
for (var i=0,n=txt.length; i< n; i++) {
  newstr += txt.charAt(i)+sc.charAt(i % sc.length);
} 
```

* * *

这是一个带有填充的，测试最长的字符串：

```
for (var i=0,n=Math.max(txt.length,sc.length); i< n; i++) {
  var char1 = txt.length>i?txt.charAt(i):"-"; // remove - if no padding
  var char2 = sc.length>i?sc.charAt(i):"~";  // remove ~ if no padding
  newstr += char1+char2;
}
alert(newstr); 
```

# symfony - Doctrine2.1：DiscriminatorColumn 查找导致“未知字段”异常

> ID：10550926
> 
> 赞同：6
> 
> 时间：2012-05-11T12:00:30.813
> 
> 标签：symfony, doctrine-orm

我试图寻找这个错误，但我没有找到任何东西的事实让我相信我在做一些愚蠢的事情。我将在下面包含相关代码，但基本上我使用的是多表继承（或[Class Table Inheritance](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/reference/inheritance-mapping.html#class-table-inheritance)）并尝试使用 Doctrine ORM findBy() 方法基于鉴别器列进行查询，这导致以下 ORMException 为抛出：“无法识别的字段：类型”。

下面是触发异常的代码：

```
 // $this->em is an instance of \Doctrine\ORM\EntityManager
    $repository = $this->em->getRepository('JoeCommentBundle:Thread');

    return $repository->findOneBy(array(
        'type' => $this->type,
        'related_id' => $id
    )); 
```

以下是“基础”抽象实体的相关代码：

```
<?php

namespace Joe\Bundle\CommentBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Gedmo\Mapping\Annotation as Gedmo;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * @ORM\Entity
 * @ORM\Table(name="comment_threads")
 * @ORM\InheritanceType("JOINED")
 * @ORM\DiscriminatorColumn(name="type", type="string")
 * @ORM\DiscriminatorMap( {"story" = "Joe\Bundle\StoryBundle\Entity\StoryThread"} )
 */
abstract class Thread
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\Column(name="related_id", type="integer")
     */
    protected $relatedId;

    /** MORE FIELDS BELOW.... **/ 
```

最后，这是具体线程实体的代码：

```
<?php

namespace Joe\Bundle\StoryBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Joe\Bundle\CommentBundle\Entity\Thread as AbstractThread;

/**
 * @ORM\Entity
 * @ORM\Table(name="story_comment_threads")
 */
class StoryThread extends AbstractThread
{
    /**
     * @ORM\OneToOne(targetEntity="Story")
     * @ORM\JoinColumn(name="story_id", referencedColumnName="id")
     */
    protected $story;
} 
```

我已经仔细检查了我的架构，并且该`type`列肯定存在，所以我不确定是什么原因造成的。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-11T15:09:39.807

Rob，在查询您实际使用父实体并尝试过滤鉴别器值时。相反，在与您要获取的子实体相关的存储库上工作。Doctrine 将为您完成剩下的工作。因此，在您的情况下，您想要获取**StoryThread**的存储库。

```
$repository = $this->em->getRepository('JoeCommentBundle:StoryThread');
return repository->find($id); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-11T15:09:55.743

您不能将鉴别器列用作标准实体属性。

相反，您可以执行以下操作：

```
$dql = 'SELECT e FROM JoeCommentBundle:Thread e 
    WHERE e.related_id = :related_id AND e INSTANCE OF :type';
$query = $em->createQuery($dql);
$query->setParameters(array(
    'type' => $this->type,
    'related_id' => $id
));
$record = $query->getSingleResult(); 
```

# entity-framework - AsEnumerable 与使用实体框架的存储过程

> ID：10550944
> 
> 赞同：0
> 
> 时间：2012-05-11T12:01:33.220
> 
> 标签：entity-framework, stored-procedures, asenumerable

我是使用 Microsoft Entity Framework 使用存储过程的新手。为了做一些练习，我使用了 Northwind 数据库，我成功地做了这样的事情：

```
var qry = (from row in dbContext.CustOrderHist("custID").AsEnumerable()
    select row).Skip(10).Take(10); 
```

然后我有自己的数据库，我正在使用它也有一些存储过程，我同样使用了“添加函数导入”；.Net 的功能来创建 ComplexType 以获取存储过程结果（我在 Northwind 模型中练习的方式）。

但是当我尝试做同样的事情时：

```
var qry = (from row in _dbContext.spComplianceReport("SomeID", null).AsEnumerable()
    select row).Skip(10).Take(10); 
```

它不起作用，并给出有关 AsEnumerable() 的错误。以下错误：

> System.Data.Objects.ObjectResult 不包含 AsEnumerable 的定义，并且找不到接受 System.Data.Objects.ObjectResult 类型的第一个参数的扩展方法 AsEnumerable（您是否缺少 using 指令或程序集引用？）

这个问题与我模型中的每个存储过程有关。我的模型与 Northwind 有什么不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T19:01:08.433

好的，执行以下操作解决了我的问题：

```
using System.Linq; 
```

# php - 检查文件是否存在，而不仅仅是 URL

> ID：10550947
> 
> 赞同：-1
> 
> 时间：2012-05-11T12:01:49.563
> 
> 标签：php

我已经在互联网上看到了这方面的教程，但我无法让它工作。

我在一个while循环中得到了这个，但这没关系：

```
while($row = mysql_fetch_object($result)){
$image_url = $deviceimg.($row->Image);
if(!file_exists($image_url))
{}
else {
$image_url = 'images/android.png';
} 
```

基本上，在我的数据库中，所有名为 Image 的行都已填充，但只有其中一些具有实际文件。我试图做的是检查图像文件是否真的存在于服务器上，如果它不使用默认图像（images/android.png）

不管我怎么做，它要么用默认值替换所有图像，要么只使用数据库中的 URL，而不管文件是否实际存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:03:36.117

`'$image_url'`不会被解析为变量的内容`$image_url`：它将保持相同的字符串文字。

删除引号。只有双引号 ( `"$image_url"`) 中的变量会被解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T12:03:43.000

你有问题的原因是你`$image_url`在传递给`file_exists()`. 这是检查是否存在字面上命名为 的文件文件`$image_url`，而不是使用变量的内容。

改变

```
if (!file_exists('$image_url')) 
```

到

```
if (!file_exists($image_url)) 
```

它会起作用。

# php - 无法保存图像php

> ID：10550948
> 
> 赞同：0
> 
> 时间：2012-05-11T12:01:50.210
> 
> 标签：php, gallery, image-uploading

我有一段代码用于将图像上传到我的画廊。一切似乎都有效，直到它到达代码的最后一部分。

```
if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "form1")) {
     $pubID = $_POST['pubID'];
     $size = 260; // the thumbnail height
     $filedir = '../images/gallery/'.$pubID.'/'; // the directory for the original image
     $thumbdir = '../images/gallery/'.$pubID.'/thumb/'; // the directory for the thumbnail image
     $maxfile = '2000000';
     $mode = '0777';
     $userfile_name = $_FILES['Gallimage']['name'];
     $userfile_tmp = $_FILES['Gallimage']['tmp_name'];
     $userfile_size = $_FILES['Gallimage']['size'];
     $userfile_type = $_FILES['Gallimage']['type'];
     if (isset($_FILES['Gallimage']['name']))
     {
         $prod_img = $filedir.$userfile_name;
         $prod_img_thumb = $thumbdir.$userfile_name;
         move_uploaded_file($userfile_tmp, $prod_img);
         chmod ($prod_img, octdec($mode));
         $sizes = getimagesize($prod_img);
         $aspect_ratio = $sizes[1]/$sizes[0]; 
         if ($sizes[1] <= $size)
         {
             $new_width = $sizes[0];
             $new_height = $sizes[1];
         }else{
             $new_height = $size;
             $new_width = abs($new_height/$aspect_ratio);
         }
         $destimg=ImageCreateTrueColor($new_width,$new_height)
             or die('Problem In Creating image');
         $srcimg=ImageCreateFromJPEG($prod_img)
             or die('Problem In opening Source Image');
         if(function_exists('imagecopyresampled'))
         {
             imagecopyresampled($destimg,$srcimg,0,0,0,0,$new_width,$new_height,ImageSX($srcimg),ImageSY($srcimg))
             or die('Problem In resizing');
         }else{
             Imagecopyresized($destimg,$srcimg,0,0,0,0,$new_width,$new_height,ImageSX($srcimg),ImageSY($srcimg))
             or die('Problem In resizing');
         }
         ImageJPEG($destimg,$prod_img_thumb,90)
             or die('Problem In saving');
         imagedestroy($destimg);
     } 
```

错误出现在这一行：ImageJPEG($destimg,$prod_img_thumb,90)。

这是第 84 行的错误代码：ImageJPEG($destimg,$prod_img_thumb,90)

```
Warning: imagejpeg() [function.imagejpeg]: Unable to open '../images/gallery/264/thumb/Hair-Salon-1.jpg' for writing: No such file or directory in /home/www/public_html/console/gallery.php on line 84\. Problem In saving 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:15:09.293

可以想象，该目录`'../images/gallery/'.$pubID.'/thumb/'`不存在。尝试使用`mkdir('../images/gallery/'.$pubID.'/thumb/', 0775, true)`，看看会发生什么。这应该沿着路径创建可写目录，直到`thumb`最后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T12:35:17.307

试试这个代码，进行更多的错误检查、一些更正和一些一般性的改进。全部评论，如果您不明白任何内容，请询问：

```
// Try not to over-use parenthesis, it makes code less readable. You only need them to group conditions.
if (isset($_POST["MM_insert"]) && $_POST["MM_insert"] == "form1") {

  // Pass through basename() for sanitization
  $pubID = basename($_POST['pubID']);

  $size = 260; // the thumbnail height
  $filedir = '../images/gallery/'.$pubID.'/'; // the directory for the original image
  $thumbdir = '../images/gallery/'.$pubID.'/thumb/'; // the directory for the thumbnail image
  $maxfile = '2000000';

  // PHP understands proper octal representations - no need to turn it into a string
  $mode = 0777;

  if (isset($_FILES['Gallimage']['name'])) {

    // Get upload info and create full paths
    $userfile_name = $_FILES['Gallimage']['name'];
    $userfile_tmp = $_FILES['Gallimage']['tmp_name'];
    $userfile_size = $_FILES['Gallimage']['size'];
    $userfile_type = $_FILES['Gallimage']['type'];
    $prod_img = $filedir.$userfile_name;
    $prod_img_thumb = $thumbdir.$userfile_name;

    // Create directories if they don't exist - this is the crux of your problem
    if (!is_dir($filedir)) {
      mkdir($filedir, $mode, TRUE)
        or die('Unable to create storage directory');
    }
    if (!is_dir($thumbdir)) {
      mkdir($thumbdir, $mode, TRUE))
        or die('Unable to create thumb directory');
    }

    // Move it to the correct location and set permissions
    move_uploaded_file($userfile_tmp, $prod_img)
      or die('Unable to move file to main storage directory');
    chmod($prod_img, $mode)
      or die('Unable to set permissions of file');

    // Get info about the image
    $sizes = getimagesize($prod_img);
    $aspect_ratio = $sizes[1] / $sizes[0]; 
    if ($sizes[1] <= $size) {
      $new_width = $sizes[0];
      $new_height = $sizes[1];
    } else {
      $new_height = $size;
      $new_width = abs($new_height / $aspect_ratio);
    }

    // Create image resources
    $destimg = imagecreatetruecolor($new_width, $new_height)
      or die('Problem in creating image');
    $srcimg = imagecreatefromjpeg($prod_img)
      or die('Problem in opening source Image');

    // Manipulate the image
    if (function_exists('imagecopyresampled')) {
      imagecopyresampled($destimg, $srcimg, 0, 0, 0, 0, $new_width, $new_height, imagesx($srcimg), imagesy($srcimg))
        or die('Problem in resizing');
    } else {
      imagecopyresized($destimg, $srcimg, 0, 0, 0, 0, $new_width, $new_height, imagesx($srcimg), imagesy($srcimg))
        or die('Problem in resizing');
    }

    // Save the thumbnail and destroy the resources
    imagejpeg($destimg, $prod_img_thumb, 90)
      or die('Problem in saving');
    imagedestroy($destimg);

  }

  // More code here? If not, merge all of this into a single if block      

} 
```

# sql - Oracle - 比较日期

> ID：10550952
> 
> 赞同：0
> 
> 时间：2012-05-11T12:02:18.773
> 
> 标签：sql, oracle, stored-procedures

我有这个 Oracle 程序：

```
CREATE OR REPLACE PROCEDURE xmas
IS
    CURSOR curUser IS SELECT userID, coins FROM Users;
    thisUser curUser%ROWTYPE;
    d VARCHAR(7);
    CURSOR curDate IS SELECT TO_CHAR(sysdate, 'DD-MON') FROM DUAL;
BEGIN
    OPEN curDate;
    FETCH curDate INTO d;
    CLOSE curDate;
    IF ((TO_DATE(d)) = (TO_DATE('25-DEC'))) THEN
        OPEN curUser;
        LOOP
            FETCH curUser INTO thisUser;
            EXIT WHEN (curUser%NOTFOUND);
            thisUser.coins := thisUser.coins + 5.00;
            UPDATE Users SET coins = thisUser.coins WHERE userID = thisUser.userID;
        END LOOP;
        CLOSE curUser;
    END IF;
END xmas; 
```

当我调用它时，我收到此错误：

ORA-01840: 输入值对于日期格式来说不够长。

尝试了几个小时的不同比较方法，但没有其他方法奏效。有什么问题？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T12:09:00.107

您需要为 Oracle 指定日期格式才能知道“25-DEC”的实际含义。

```
select TO_DATE('25-DEC', 'DD-MON') from dual; 
```

问题应该在这一行：

```
 IF ((TO_DATE(d)) = (TO_DATE('25-DEC'))) THEN 
```

作为说明，在我看来，您还进行了很多不必要的转换。我不知道这是否是一种教育尝试，但为什么不直接运行以下更新：

```
update USERS 
set
  coins = coins + 5
where
  to_char(sysdate, 'DD-MON') = '25-DEC'; 
```

# java - OSGI可以应用在哪里？

> ID：10550954
> 
> 赞同：1
> 
> 时间：2012-05-11T12:02:20.783
> 
> 标签：java, architecture, osgi

在[OSGI 联盟](http://www.osgi.org/About/WhyOSGi)网站上说“......在网络环境中集成多个设备......”“...... OSGi 组件系统实际上用于构建高度复杂的应用程序，如 IDE（Eclipse）、应用程序服务器......”“ ...工业自动化、住宅网关、电话等等。”

工业自动化？听起来不错。我可以想到一个监控系统，我发现了一些与汽车嵌入式系统相关的谷歌搜索结果

谁知道更多可以应用osgi的地方？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T08:52:06.757

OSGi 是一种将模块化应用到代码库的方法，几乎​​与目标应用程序无关，尽管代码库越大，模块化就越重要。非常紧凑的实时程序可能不是，但如果你对 Java 没问题并且在 JVM 上运行，那么 OSGi 应该是可行的。它更多的是关于你如何构建代码而不是它的用途。我推荐[Java Application Architecture: Modularity Patterns with Examples Using OSGi（敏捷软件开发系列）](https://rads.stackoverflow.com/amzn/click/com/0321247132)来了解 OSGi 的动机。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T13:24:25.727

OSGi 是一个专门的通用模块系统。它尽量不偏向某个领域。虽然它起源于嵌入式领域，但我认为现在使用 OSGi 的开发人员中只有极少数是在该领域。

我认为任何具有合理复杂性的代码都将受益于某种模块化框架，而 OSGi 是一个非常好的选择，尽管存在一些障碍：

*   OSGi 是基于 java 的，所以非 java 项目已经退出。（除非您喜欢冒险并想尝试类似[Apache Celix](http://incubator.apache.org/celix/)的东西）
*   某些执行某些类加载技巧的库可能无法与 OSGi 配合使用（例如 Hibernate）
*   OSGi 有一点学习曲线，所以要准备好投入一些时间和精力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T11:06:44.113

*   智能家居 - 用于设备控制、能耗控制、远程支持、远程软件配置、家庭自动化 - 有关已实施项目的示例，请参阅 [智能家居用例的 OSGi 页面](http://www.osgi.org/Markets/SmartHome)
*   手机 - 智能手机 - 示例 - 再次查看上面的链接
*   车辆——远程控制、支持、读取传感器、提供导航等服务
*   辅助生活 - 许多项目，因为远程管理非常重要
*   任何大型软件应用程序 - 用于添加插件的模块化和管理。示例 - Eclipse ;) ...

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-11T22:03:18.133

不，嵌入式车辆系统实际上是唯一可行的 OSGi 应用程序；-)

# hibernate - 在休眠中为会话或事务设置超时

> ID：10550958
> 
> 赞同：3
> 
> 时间：2012-05-11T12:02:40.037
> 
> 标签：hibernate, session, timeout, settimeout

下面是我的场景：我的应用程序开始一个事务，插入/更新，然后调用一个 Web 服务。Web 服务可能需要很长时间来处理请求。有没有办法在我的休眠层中为我的会话/事务配置超时，以便我可以优雅地关闭会话。PS - 或者，我也可以为我的 Web 服务调用配置超时。假设我没有这种自由。有什么我可以在 Hibernate 中做的，还是我需要编写自己的自定义逻辑（使用线程连接结构）来实现这些

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T13:21:40.277

您可以在特定查询级别[设置超时，或者如果您使用 JPA 的 EntityManager，您可以添加](http://docs.jboss.org/hibernate/core/3.5/api/org/hibernate/Query.html#setTimeout%28int%29)[查询提示](http://docs.jboss.org/hibernate/stable/entitymanager/reference/en/html/objectstate.html#d0e1215)。

理论是 Hibernate 默认使用乐观锁定（如果数据库事务隔离级别符合），因此记录永远不会被锁定反对写入或读取。因此，即使是持久的事务也不应该严重损害性能。

如果您使用悲观锁，您可以在 Hibernate Session 中为它们设置超时。看看[Session.LockRequest](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.LockRequest.html)。

# javascript - 在弹出窗口中丢失 asp.net 会话。仅在 IE 中且仅适用于某些用户

> ID：10550960
> 
> 赞同：0
> 
> 时间：2012-05-11T12:02:44.087
> 
> 标签：javascript, asp.net, session, iframe

我有一个带有集成 iframe 的 asp.net 网页。在这个 iframe 中，我调用 window.open 来打开一个弹出窗口。弹出 url 是绝对的，但在同一个域中。

对于使用 Internet Explorer（多个版本）的大约 1% 的用户，asp.net 会话对象在弹出窗口中丢失（空）。

我尝试收集设置信息以识别一组用户的模式，但没有结果。一种理论是他们都是 Citrix 客户，但事实并非如此。

有没有人经历过类似的事情并解决了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:36:24.497

对我们来说，[ASP.NET：弹出式浏览器窗口和会话 cookie](https://stackoverflow.com/questions/200890/asp-net-popup-browser-windows-and-session-cookies)有相关的答案。在我们的例子中，使用了一个 Jetty 网络服务器，所以要小心你过滤的内容。

从桌面上引用网站的“常规”快捷方式启动浏览器。用IE8。（我没有找到我的 MSDN 参考资料，但我认为它仅限于 Windows XP。） 注意：Citrix 用户经常被迫使用桌面上的链接。因此，这可能会解决 Citrix 部分的问题。

这里有更多非常相似的问题。您是否查看过 stackoverflow 上的所有帖子，包括：

1.  [IE8 在弹出窗口中丢失会话 cookie](https://stackoverflow.com/questions/1324181/ie8-losing-session-cookies-in-popup-windows) （这也被建议作为对有关 IE7 的类似问题的回答： [ASP.NET 2.0 Session variables lost in popup window in IE 7 when deploy on server](https://stackoverflow.com/questions/3689258/asp-net-2-0-session-variables-lost-in-pop-up-window-in-ie-7-when-deployed-on-ser)）
2.  [IE8 在重定向后打开新窗口时丢失 cookie](https://stackoverflow.com/questions/179260/ie8-loses-cookies-when-opening-a-new-window-after-a-redirect)（在第一个问题中也提到）是从模式弹出窗口或类似的弹出窗口打开的问题。IE 8 beta 版本，所以可能无关紧要。
3.  [IE8 丢失会话详细信息](https://stackoverflow.com/questions/1838555/ie8-losing-session-details)（Java 库中的错误，因此可能也不相关）

如果我不得不总结一下：

1.  有很多问题似乎与 asp.net 有共同点。尝试浏览它们。
2.  您说没有特定的 Internet Explorer 版本受到影响。这意味着您可能会针对不同版本的 IE 查看不同的问题。
3.  a）我认为stackoverflow应该有最多的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T12:10:49.327

我猜您的网站没有有效的[P3P](https://en.wikipedia.org/wiki/P3P)标头来定义您如何跟踪用户，因此 IE 不会将 [session] cookie 与 http 请求一起转发。

您可以通过在 web.config 中添加示例 P3P-header 来验证这一点。您将需要了解不同标记的含义，以及此示例标头是否与您的用例匹配，或者您是否需要创建自己的标头。

```
<system.webServer>
  <httpProtocol>
    <customHeaders>
      <add name="P3P" value="CP=&quot;NON COR CUR OUR BUS NAV&quot;" />
    </customHeaders>
  </httpProtocol>
</system.webServer> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T18:58:05.127

请遵循此处的指南：http: [//www.w3.org/P3P/details.html](http://www.w3.org/P3P/details.html)

您应该构建自己的 P3P 策略。

举个例子，如果你把它添加到你的 Global.asax 中，它可以在 IE8 中工作：

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
     HttpContext.Current.Response.AddHeader("p3p", "CP=\"IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT\"");
} 
```

**但！！！**不要只是复制上述示例，因为该政策必须在您的网站上反映您的实际隐私政策。否则，当浏览器验证您的内容/行为与您所说的相比时，这可能会产生影响。

没有人愿意被某些浏览器供应商列入黑名单，对吧？

# c++ - 查找 STL 队列中是否已存在项目

> ID：10550962
> 
> 赞同：6
> 
> 时间：2012-05-11T12:02:45.187
> 
> 标签：c++, algorithm, stl, find, queue

我正在使用 STL 队列在图上实现 BFS（广度优先搜索）。如果队列中不存在该节点，我需要将该节点推送到队列中。但是，STL 队列[不允许迭代其元素](http://www.sgi.com/tech/stl/queue.html#2)，因此我不能使用 STL 查找功能。

我可以在每个节点被访问时使用一个标志来标记它们，并且仅在标志为假时推送它们，但是，我需要多次运行 BFS 并且每次之后我都必须重置所有标志，所以我结束了使用计数器而不是标志，但我仍然想知道是否有在队列中查找项目的标准方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T12:06:14.217

我假设您正在 BFS 中实施“封闭集”的概念？这样做的标准方法是简单地维护一个单独的`std::set`或`std::unordered_set`已经遇到的元素。这样，您将获得 O(lg *n* ) 或 O(1) 查找，而在遍历队列时，如果支持，将花费 O( *n* ) 时间。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-10-21T13:54:47.757

接受的答案是愚蠢的。

BFS 搜索中的每个项目都将经历三种状态：未访问、已访问但未完成、已访问。出于搜索目的，您可以将其缩减为已访问或未访问...

你只需要使用一个标志...

旗帜只是交替出现。

好吧，随着树的第一次遍历，每个节点将从 false（未访问）开始，然后变为 true（已访问）。在第二次遍历时，它将切换为 true（未访问）并转到 false（已访问）。

所以你所要做的就是保留一个单独的标志，它只是在每次遍历时改变状态......

那么你的逻辑是

```
if ( visitedFlag ^ alternatingFlagStateOfTree )
{
    visitedFlag ^= 1;
} 
```

基本上，alternatingFlagStateOfTree 仅用于指示是否访问了 true 或访问了 false 状态。每次运行交替，所以我们只是交换它们。

这完全消除了对 set()、所有内存开销等的需要，并且消除了在运行之间重置标志值的任何需要。

这种技术可以用于更复杂的状态，只要遍历的所有项目都有一致的结束状态。您只需进行一些数学运算即可重置标志值以将状态返回到基本状态。

# php - 阻止列表离开页面底部

> ID：10550963
> 
> 赞同：0
> 
> 时间：2012-05-11T12:02:51.420
> 
> 标签：php, file, list, directory

我有一个 php foreach 脚本，它将遍历目录中的所有文件并将它们列出，并带有一个文件夹图标和一个文件图标。

由于列表一直到它检查了所有文件和文件夹，它才离开页面底部。

只是好奇人们认为最简单的方法是什么，让下面的代码在到达页面底部后进入另一列？

```
foreach (glob("$dir/*") as $filename) {
    //Set the full path and filename
    $path_parts = pathinfo($filename);
    //Set the filename to display
    $itemname = $path_parts['basename'];
    //Remove bullet points from the list
    echo "<ul style='list-style:none'>";
    //If it is a directory, list it. Else do nothing
    if(is_dir($filename)) {
        //Link points back to lister, with new directory
        echo "<li><a href='list.php?dir=".$filename."' style='font-size:18px;'>
        <img src='/site/images/files/folder.png' height='32px' width='32px' border='0' />&nbsp;".$itemname."</a></li>";
    }
    echo "</ul>";
} 
```

感谢人们可以提供的任何建议

编辑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:01:26.517

有很多方法可以实现你的目标，都取决于你想要如何呈现信息：有序、无序、按高度组织的列、按宽度组织的列等。

因此，作为起点，您可以按照以下方式进行操作：

**HTML**

```
<div>
    <ul>
        <li>
            <a href="#" style="font-size:18px;">
                <img src="path_to_image.png" height="32px" width="32px"> Name
            </a>
        </li>
        ...
        <li>
            <a href="#" style="font-size:18px;">
                <img src="path_to_image.png" height="32px" width="32px"> Name
            </a>
        </li>
    </ul>
    <br>
</div> 
```

**CSS**

```
/* what you need to pay attention to */
ul {
    list-style-type: none;
    width: 330px;
}
li {
    margin: 0;
    padding: 2px 10px 2px 0;
    width: 100px;
    float: left;
}

/* some styles to links */
a {
    text-decoration: none;
    color: #333;
}

/* clear float */
br {
  clear: left;
} 
```

这样做是为`LI`元素设置一个固定宽度，并将其浮动到左侧，因此只要它们并排放置，列就会不断堆积。

`UL`宽度限制了您想要的列数！

请参阅此处的小提琴[示例！](http://jsfiddle.net/zuul/FwtdJ/)

![在此处输入图像描述](../Images/6a57596bb40751c73ab4357385c71db4.png)

* * *

**现在，如果您打算防止出现垂直滚动**，则需要使用额外的 css 行：

CSS

```
ul {
    height: 100px;
} 
```

这样做是为了限制列表换行的高度，从而迫使项目继续向左移动。不要认为您应该`width`从中删除`UL`以允许列继续堆积到左侧。

在这里看到[小提琴！](http://jsfiddle.net/zuul/FwtdJ/7/)

![在此处输入图像描述](../Images/8050d474a7ca0a927f819d499da42a53.png)

# javascript - 如何让用户知道 Highcharts 图表是可点击的？

> ID：10550968
> 
> 赞同：2
> 
> 时间：2012-05-11T12:03:16.960
> 
> 标签：javascript, highcharts

我正在使用 Highcharts Javascript 库来生成图表。

我想制作一个可点击的图表，Highcharts 使用以下语法支持该图表：

```
var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'chart-container-revenue-per-purchaser',
        defaultSeriesType: 'line',
        events: {
            click : function() { location.href = '/revenue/purchaser' }
        }
    }, 
```

但是，当您将鼠标悬停在图表上时，并没有视觉上的变化（例如，图表的边框出现，光标改变形状）来向查看者表明图表是可点击的。

这是 Highcharts 支持的东西还是我必须使用 CSS 来实现它？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T12:17:27.100

尝试这个：

```
var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'chart-container-revenue-per-purchaser',
        defaultSeriesType: 'line',
        events: {
            click: function() {
                location.href = '/revenue/purchaser'
            }
        }
    },
    plotOptions: {
        series: {
            cursor: 'pointer',
            point: {
                events: {
                    click: function() {
                        alert('clicked');
                    }
                }
            },
            marker: {
                lineWidth: 1
            }
        }
    }
});​ 
```

取自[http://www.highcharts.com/demo/line-ajax](http://www.highcharts.com/demo/line-ajax)

这使用 plotOptions->serise 中的 'cursor' 选项

> *cursor* : **String**
> 如果您将单击事件附加到系列，您可以将光标设置为“指针”，以向用户发出可以单击点和线的信号。默认为“”。

[http://www.highcharts.com/ref/#plotOptions-series--cursor](http://www.highcharts.com/ref/#plotOptions-series--cursor)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T12:15:42.103

将此添加到对象

```
 plotOptions: {
            line: {
                allowPointSelect: true,
                cursor: 'pointer'           
            }
        }, 
```

# iis-7 - IIS 7.0 应用程序池每分钟回收一次

> ID：10550969
> 
> 赞同：5
> 
> 时间：2012-05-11T12:03:23.580
> 
> 标签：iis-7, application-pool

我有一个应用程序池，每分钟都在回收。私有内存设置为 1433600KB 虚拟内存设置为 2457600KB（是的，很多）。定期回收时间间隔保留为默认值 1740。据我所知，回收发生时内存限制尚未达到。我在服务器上也找不到任何可能导致此问题的内容。

有没有人知道这可能是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T08:09:33.913

我们有同样的问题。不知道是否适合您，但我们禁用了虚拟内存回收设置（保持启用私有内存）并且应用程序池停止回收。

查看[这篇关于大内存预留](https://web.archive.org/web/20150516090653/http://www.asprangers.com/post/2012/03/30/Look-who-is-reserving-large-amount-of-virtual-memory-on-64-bit-It-is-Net-GC-heaps.aspx)的文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T17:56:29.150

确保为所有可能的值打开了回收日志（右键单击应用程序池，选择“回收”，然后单击“下一步”以查看日志）。

然后，当它回收时，您应该在系统事件查看器中收到一个“WAS”来源的事件，具体告诉您它回收的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-27T14:29:48.617

我们有同样的问题。该问题已通过更改太低的 Ping 最大响应时间得到解决。

# c# - 如何正确反射基本接口方法

> ID：10550970
> 
> 赞同：15
> 
> 时间：2012-05-11T12:03:23.800
> 
> 标签：c#, inheritance, reflection, interface

我通过反射调查了 2 个接口和 2 个类：

*   父母
*   IChild - 派生自 IParent
*   家长
*   孩子 - 派生自父母

对我来说奇怪的是，当我通过对 IChild 类型的反思时，我没有找到 IParent 方法。

应用于 Child 类型的相同代码按预期工作 - 反射显示 Parent 方法。

```
interface IParent
{
     void ParentMethod();
}

interface IChild : IParent
{
     void ChildMethod();
}

class Parent 
{
     public void ParentMethod(){}
}

class Child : Parent
{
     public void ChildMethod(){}
}

void Main()
{
    //investigate derived interface
     Type t = typeof(IChild);
     var info = t.GetMethod("ChildMethod");//ok
     Console.WriteLine(info); 
     info = t.GetMethod("ParentMethod");//returns null!
     Console.WriteLine(info); 
     //investigate derived class
     t = typeof(Child);
     info = t.GetMethod("ChildMethod");//ok
     Console.WriteLine(info);
     info = t.GetMethod("ParentMethod");//ok
     Console.WriteLine(info);
} 
```

请解释这种行为？

是否有任何解决方法可以从派生接口的类型中反映基接口的方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-11T12:12:30.697

虽然，我们使用接口的方式与使用继承的方式相同（“：”）；接口不被继承；它们将得到执行。在这种情况下; 继承与实现混淆，因为它们是使用相同的运算符（“：”）定义的。

作为总结； `IA : IB`和`A:IA`手段；任何实现 IA 的类都应实现 IB。在这种情况下; A 应执行 IA 和 IB。

`A:B`表示A类继承B类；它没有实施。

这里的混乱源于使用相同的运算符（“：”）。

检查此页面[接口继承](http://www.roxolan.com/2009/04/interface-inheritance-in-c.html)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-11T12:37:05.650

如果您正在处理接口，请使用

```
t.GetInterfaces() 
```

然后您可以检查上面返回的类型的方法。

按名称查找接口成员是不可靠的，请注意，虽然在 C# 中接口成员不能在实现时重命名，但在 CLR 中，名称可能会被修改。（IDisposable.Dispose() 有时重命名为 Close）。在 il 中，有一条名为的指令`.implements`允许更改名称。我相信VB.Net也有这个功能。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-11T12:19:08.223

接口的*基*接口（在这种情况下`IParent`是 的基接口`IChild`）是*显式基接口*。继承对于接口来说是一个不幸的词，因为类、结构和其他接口永远不会从接口*继承*，它们只是实现基本接口定义的契约。

当你`IChild`从`IParent`（注意我没有说继承）派生时，它没有定义`ParentMethod`方法，它只是说*任何实现我的东西，也必须实现`IParent`*。

当您反映实际类型时，它起作用的原因是因为实现接口实际上确实在类型本身中定义了该方法签名，而接口并非如此。

这是由于编译器发生的称为*接口映射*的过程，该过程被定义为在实现类或结构中定位接口成员的过程，但接口本身不会发生这种情况。

*反射接口时，不会*发生接口映射，因此只反射接口本身。

```
Type t = typeof(IChild); 
```

类型信息将仅包含关于 的明确类型信息`IChild`。

```
Type t = typeof(Child); 
```

*这里确实*发生了接口映射的过程。当您考虑`Child`名为 的方法的类型时`ParentMethod`，会检查每个基本接口，直到找到匹配项。

这部分是语言设计。您可以在 C# Programming Language (Fourth Edition) 的第 13.1.4 节或 ECMA 规范的第 20.1.2 节中阅读更多相关信息。

*您可以通过重新实现接口*来解决它，但它需要一些额外的代码。

```
interface IParent
{
    void ParentMethod();
}

interface IChild
{
    new void ParentMethod(); // Reimplement IParent.ParentMethod()
    void ChildMethod();
} 
```

这会奏效。

```
Type t = typeof(IChild);
MethodInfo mi = t.GetMethod("ParentMethod"); 
```

由于接口重新实现，`IChild`现在包含`ParentMethod`.

# java - JavaFX 在 css 中使用“in jar”图像

> ID：10550971
> 
> 赞同：6
> 
> 时间：2012-05-11T12:03:26.043
> 
> 标签：java, css, user-interface, styles, javafx-2

我正在尝试将背景图像添加到我的 javafx 应用程序中的某个窗格中，该图像位于包 resources.img 内，而 css 位于包 resources.css 内

如果我像这个线程中建议的那样以编程方式 [设置背景图像：通过javafx代码设置背景图像（不是css）](https://stackoverflow.com/questions/9851200/setting-background-image-by-javafx-code-not-css)

它工作正常，但我想知道我是否可以从 css 文件本身设置背景图像。

我试过

```
-fx-background-image: url("@../img/myImage.png"); 
```

但后来 css 解释器没有找到图像文件。可以通过css做我想做的事吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T12:30:11.630

JavaFX CSS 解析器有一个限制，例如

> @-keyword 语句被忽略。

CSS 参考指南的“限制”部分中描述。这可能是你的问题的原因，虽然没有确认自己。你可以试试这样：`-fx-background-image: url("../img/myImage.png");`
或`-fx-background-image: url("resources/img/myImage.png");`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-16T11:37:42.323

也许有人会对它有用。如果您指定：`-fx-background-image: url("resources/img/myImage.png");`. 独立`.jar`文件可能会成功加载图像，而 IDE（如 Eclipse）不会。这是因为 IDE 会更改路径并会搜索类似：`C:/My_project/resources/css/resources/img/myImage.png`. 这意味着`root`对于指定的路径将文件夹与 css 文件而不是`.jar`包

# actionscript-3 - Flex Spark List LabelItemRenderer 在其他列表项进入关闭状态时删除选择

> ID：10550978
> 
> 赞同：0
> 
> 时间：2012-05-11T12:03:44.133
> 
> 标签：actionscript-3, apache-flex, mobile, flex4, itemrenderer

带有移动主题的 Spark 列表有一种奇怪的行为，我需要禁用它以支持上下文菜单。

该列表的默认行为是，只有当另一个项目进入选定状态时，一个项目才会失去其选择颜色。这意味着当用户在某个项目上保持向下状态（通过鼠标按下或点击并按住）时，两个项目显示选择颜色，一个仍处于选中状态，一个当前处于向下状态。

我需要的是一旦另一个项目进入向下状态，选定的项目就会失去它们的选择颜色/状态，所以基本上只要进入向下状态就需要设置选择状态。

为什么我需要这个你可能会问，让我解释一下；我的列表需要一个上下文菜单，该菜单将在长按时打开。并且由于在触发长按事件之前长按不包括鼠标向上事件，因此该项目不会被选中，因此其他项目不会失去其选择颜色。

我的 itemRenderer 是用 AS 编写的标准 LabelItemRenderer，在 ItemRenderer 中更改此功能会很棒，而不是在父组件中。

有没有人知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:33:06.633

由于您使用的是[LabelItemRenderer](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/LabelItemRenderer.html)，我假设您正在构建一个移动应用程序。这是一种猜测；但...

能否在 itemRenderer 中添加 Long Press 事件处理程序，并在事件处理程序中更改 itemRenderer 的[selected](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/LabelItemRenderer.html#selected)属性？

不过，我不确定 itemRenderer 中的此类更改是否也会更改实际列表。理论上不应该。

除此之外，如果您的 Long Press 事件从 itemRenderer 中弹出，您可以在 List 类上收听它并以这种方式更改 selectedItem，然后再弹出新菜单。

# android - 在 Android 上用数据加载煎茶商店的问题

> ID：10550980
> 
> 赞同：0
> 
> 时间：2012-05-11T12:03:50.063
> 
> 标签：android, sqlite, cordova, extjs, sencha-touch-2

在桌面浏览器和 ipad（使用 phonegap）上运行时，我能够将数据从 JSON 文件加载到 sencha 应用程序的存储中。

但是当我尝试在 android 设备上运行应用程序（使用 webView/phonegap）时，我看不到任何数据。我不确定它是否正在将数据加载到商店中。但它不显示任何类型的数据。

它甚至没有加载 sencha 提供的图标。

我在 Android 日志中发现了这条消息：

`I/SqliteDatabaseCpp(2855): sqlite returned: error code = 14, msg = cannot open file at line 27701 of [8609a15dfa], db=/data/data/com.app.ui/databases/webview.db`

以前，当应用程序甚至不显示屏幕时，我将“app.js”文件修改为如下所示（禁用“disableCaching”）。

```
Ext.Loader.setConfig({
enabled: true,
disableCaching: false });     Ext.Ajax.setDisableCaching(false); 
```

我正在使用 Sencha Touch 2.0.0、Phone Gap 1.7.0 和三星 Galaxy Tab 10.1 (Android 3.1)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:39:08.883

如果您使用的是 sencha 的缩小/压缩 js，请尝试使用普通的 sencha-touch js 运行。

我遇到了类似的问题，这是因为缩小 js，导致空白数据和浏览器崩溃。

不确定但可能对你有帮助，试试吧。

# sql - SQL“例外”仍然有问题

> ID：10550982
> 
> 赞同：1
> 
> 时间：2012-05-11T12:03:54.980
> 
> 标签：sql, sql-server

我有一个查询引擎历史数据的 SQL 数据库。其中一个特点是，存储过程每天都会在所有数据中搜索特定事件，如果找到该事件，它将把它插入到一个新表中。

问题是这些数据必须是唯一的......

表头如下：

```
ID / ID_Location / IDDown / IDUp / DtDown / DtUp / TimeDifference / IsExempt / Reason / Details / OrigDtUp 
```

SQL查询是：

```
insert into exempts(ID_Location, iddown, idup, dtdown, dtup, timedifference) 
select ID_Location, iddown, idup, dtdown, dtup, DATEDIFF(MINUTE, dtdown, dtup) as timedifference 
from @tmptbl 
except 
select ID_Location, iddown, idup, dtdown, dtup, timedifference from exempts 
```

用户可以对其中一些值进行调整，例如 DtUp（引擎重新上线的时间）。一旦 DtUp 值更改，原始 DtUp 值将存储在 OrigDtUp 字段中，并且 TimeDifference 根据 DtDown 和 DtUp 时间变化进行更新。

所以我真正需要的是：

```
insert into exempts(ID_Location, iddown, idup, dtdown, dtup, timedifference) 
select ID_Location, iddown, idup, dtdown, dtup, DATEDIFF(MINUTE, dtdown, dtup) as timedifference 
from @tmptbl 
except 
select ID_Location, iddown, idup OR OrigDtUp, dtdown, dtup from exempts 
```

`except`我们知道SQL中的函数不支持哪个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T12:10:17.603

你不能把它除两次吗？

```
insert into exempts(ID_Location, iddown, idup, dtdown, dtup, timedifference) 
select ID_Location, iddown, idup, dtdown, dtup, DATEDIFF(MINUTE, dtdown, dtup) as timedifference 
from tmptbl 
except 
select ID_Location, iddown, idup, dtdown, dtup 
from exempts
except 
select ID_Location, iddown, OrigDtUp, dtdown, dtup 
from exempts 
```

# android - Google+ 在自己的 Android 应用中推送通知

> ID：10550983
> 
> 赞同：3
> 
> 时间：2012-05-11T12:03:56.083
> 
> 标签：android, push-notification, google-plus, android-c2dm

是否可以注册我的应用以接收 Google+ 推送通知？

据我了解，应用程序由其包名称标识，以确保向正确的应用程序发送通知。是否可以通过更改包名称让 Android 通知我自己的应用在 Google+ 上发生了一些事情？或者有没有更简单的方法？Google 是否甚至想要基于 G+ 构建的第三方应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:11:43.603

第三方应用程序无法接收 Google+ 推送通知。请在此处向问题跟踪器提交新功能请求：[http ://code.google.com/p/google-plus-platform/issues/entry](http://code.google.com/p/google-plus-platform/issues/entry)

如果您对 Google+ API（提供对公共数据的只读访问权限）感兴趣，您将需要访问[https://developers.google.com/+/api/](https://developers.google.com/+/api/)。

# c++ - 显示 MessageBox 后子窗口失去焦点

> ID：10550987
> 
> 赞同：1
> 
> 时间：2012-05-11T12:04:15.630
> 
> 标签：c++, winapi

所以我创建了一个主窗口，在其中我创建了一个 2 个子窗口。他们都有不同的**WindowProcs**。在`WM_CREATE`主窗口的消息中，我将焦点放在其中一个带有`SetFocus(...)`. 在我`MessageBox`从子窗口过程中显示 a 后，焦点被设置回主窗口。如何保持对子窗口的关注？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T12:23:59.637

当消息框窗口被[销毁](http://msdn.microsoft.com/en-gb/library/ms632599.aspx#destruction "MSDN 库")时，Windows 使另一个*顶级*窗口成为[活动窗口](http://msdn.microsoft.com/en-gb/library/ms632599.aspx#active "MSDN 库")。如果这不是您想要的，则由您来响应[`WM_SETFOCUS`](http://msdn.microsoft.com/en-gb/library/ms646283.aspx "MSDN 库")您的主（顶级）窗口将接收并用于[`SetFocus()`](http://msdn.microsoft.com/en-gb/library/ms646312.aspx "MSDN 库")将焦点指向子级的消息。

# css - 每个 html 元素的 css 规则 VS 每个元素的几个简单的 css 规则？

> ID：10550992
> 
> 赞同：0
> 
> 时间：2012-05-11T12:04:34.187
> 
> 标签：css

外部 css 分配有 2 种方法。我使用第一种方法；大多数网站使用第二种方法。我想知道我是否做错了！

**第一种方法：**

为几乎每条 css 规则创建一个类并在任何地方使用它们。

```
<div class="f_left d_iblock">
   <span class="w_100 f_left">blah blah</span>
</div>

.f_left{
    float:left;
}
.f_right{
    float:right;
}
.d_block{
    display:block;
}
.w_100{
    width:100%;
}

....
.... 
```

**第二种方法：**

为每个元素创建 css 规则。

```
<div id="container">
   <span>blah blah</span>
</div>

#container{
   float:left;
   display:inline-block;
}

#container span{
   width:100%;
   float:left;
   font-weight:bold;
} 
```

一般来说，我使用第一种方法。我选择这种方法是因为它为我提供了以下内容。

*   小 css 文件因此提供更少的加载时间。
*   可重用的 CSS 规则。
*   清晰的代码因此 CSS 管理比第二种方法更容易。
*   我不需要创建 id 或 class 属性，只需要分配 css 规则。所以我不需要为每个元素想一个名字:)
*   我认为浏览器可以快速解释 css 规则，从而提高性能。

我看到大多数网站通常不会最常使用这种方法，我开始认为我需要努力提高性能，但我正在批量处理 html 文件而不是 css，并为每个元素写入 3 到 4 个 css 规则名称。

注意：我的英语很少。我希望你能理解我。如果你能写简单的句子，我会很高兴:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:45:14.217

不采用第一种方式的主要原因是它没有将表示与内容分开：您的 HTML 元素看起来像`<span class="f_left d_block w_100">`，而表示嵌入到 HTML 本身中。CSS 的全部意义在于从 HTML 中删除表示，以便您可以用`<span class="product-list-description">`HTML 编写，然后在 CSS 中定义样式。

第一种方法可能允许更少的 CSS 规则，这些规则可以在许多不同的元素上重复使用，但它会迫使您在想要更改表示时更改 HTML。例如，如果你有很多元素应用了相同的 CSS 规则，如果你想改变它们的外观，你就必须改变每一个元素的 HTML。这是很多工作并且容易出错。使用第二种方法，您将拥有适用于所有这些元素的 CSS 规则，并且要更改它们的呈现方式，您只需更改规则即可。在大多数项目中，这是一个显着的优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T12:11:32.853

你的这两种方法还不是很好。您可以像这样编写第二种方法：

```
#container{
   float:left;
}

#container span{
   display:block;
   font-weight:bold;
} 
```

但是你为每个属性创建一个单独的类的方法并不好。

您必须阅读一些关于检查这些的好文章

[https://developers.google.com/speed/docs/best-practices/rendering](https://developers.google.com/speed/docs/best-practices/rendering)

[https://developer.mozilla.org/en/Writing_Efficient_CSS](https://developer.mozilla.org/en/Writing_Efficient_CSS)

**更新**

为什么你的方法不好假设我有三个不同的元素，大多数属性相同但不同。

例如：

```
.one{
 float:left;
 font-family:"tahoma";
 font-weight:bold;
 font-size:15px;
 color:#000;
 line-height:1.5;
}
.two{
 float:left;
 font-family:"tahoma";
 font-weight:bold;
 font-size:18px;
 color:#000;
 line-height:1.5;
}
.three{
 float:left;
 font-family:"tahoma";
 font-weight:bold;
 font-size:13px;
 color:#000;
 line-height:1.5;
} 
```

您可以以更好的方式编写它，从而减小 CSS 文件的大小。像这样写：

```
.one, .two, .three{
     float:left;
     font-family:"tahoma";
     font-weight:bold;
     font-size:15px;
     color:#000;
     line-height:1.5;
    }
    .two{
     font-size:18px;
    }
    .three{
     font-size:13px;
    } 
```

所以，如果我通过你的方法，我必须分别定义每个属性，这也很耗时而且很重。

# git - 持续开发的 Git 工作流

> ID：10550994
> 
> 赞同：1
> 
> 时间：2012-05-11T12:05:00.570
> 
> 标签：git, version-control, branch

我们一直在将 Git 用于基于 node.js 的 Web 应用程序。我们的工作流程基于两个分支，`master`并且`stable`. 我们使用 master 作为主要开发线，当我们决定发布某些东西时，我们继续将 master 合并到 stable 中。

有两个服务器，“登台”和“生产”，每当我们推送时，一个 post 接收钩子部署`master`到登台服务器和`stable`生产。

问题是，主分支几乎总是有实验性或未完成的工作。我们需要推送，以便在实际服务器上测试功能，或者只是为了显示管理进度。现在，当我们需要合并到稳定版时，它变得复杂了。

最好的方法是什么？分期支线？我们如何从 staging 中挑选一些功能进入 master 或 stable？我们应该对所有东西都使用小功能分支吗？即使它是一个单一的提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:09:51.527

我认为，无需*为所有内容创建小功能分支*，您可以创建新分支并从 commit 中选择您想要的功能。

使用[Git Cherry-Pick](http://ariejan.net/2010/06/10/cherry-picking-specific-commits-from-another-branch)从 staging 中挑选一些功能进入 master 或 stable

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T13:36:10.440

通常功能跨越多个提交，在这种情况下，建议创建一个临时分支，将功能分支合并到该分支中（或在单个提交的情况下选择樱桃），然后与生产合并并测试临时分支并推入生产部门。

# iphone - 随时禁用推送通知声音

> ID：10550995
> 
> 赞同：0
> 
> 时间：2012-05-11T12:05:15.667
> 
> 标签：iphone, ios, push-notification, apple-push-notifications

有没有办法禁用推送通知声音 - 每当警报出现时。

目前我正在使用空白声音文件来执行此操作，但是有没有办法禁用声音。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:26:38.133

如果您不想播放声音，您可以再次注册远程通知，仅用于警报通知类型。如果您希望在收到警报通知时不播放声音，则不应在通知服务器发送的通知负载中发送声音值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T18:43:07.543

您在注册通知时指定通知类型的位掩码。如果您不想在收到通知时播放声音，请`UIRemoteNotificationTypeSound`从该位掩码中删除：

```
[[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeAlert|UIRemoteNotificationTypeBadge)]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-11T12:07:07.830

转到首选项应用程序并选择“通知”，选择您的应用程序并关闭声音。

# c++ - 如何为引用参数定义模板函数和为指针参数定义相同的函数

> ID：10550996
> 
> 赞同：0
> 
> 时间：2012-05-11T12:05:21.263
> 
> 标签：c++, templates, boost, stl

我想定义一个用于名称比较的模板仿函数，它接受引用和指针。我想将它用于元素容器上的普通 find_if 以及指针容器（不幸的是 ptr_vector 等不是一个选项）。

到目前为止，我发现的最佳解决方案如下。

```
template <typename U>
class by_name{
  public:
    by_name(U const& pName):mName(pName) {}

    template <class T>
    typename boost::disable_if_c<boost::is_pointer<T>::value, bool>::type
    operator()(T const& pX){ return pX.getName()== mName;}

    template <class T>
    typename boost::enable_if_c<boost::is_pointer<T>::value, bool>::type
    operator()(T pX){ return pX->getName()== mName;}

private:
    U mName;
}; 
```

对于不知道 enable_if 的人来说，这看起来很丑陋而且很难理解。有没有更简单的方法来编写这样一个带有指针和引用的仿函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T12:18:05.487

它可以很简单：

```
template <class T>
bool operator()(T const& rX) const { return rX.getName() == mName; }

template <class T>
bool operator()(T* const pX) const { return pX->getName() == mName; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T23:00:09.367

实现 getName 成员函数的类是否返回 std::string 以外的任何内容？如果没有，您可以去掉一个模板参数。

这就是我实现仿函数的方式：

```
class by_name
{
  public:
    by_name(const std::string& name) :
      Name(name) {}

    template <class T>
    bool operator()(T const& pX) const
    {
      return pX.getName() == Name;
    }

    template <class T>
    bool operator()(T* pX) const
    {
      if (!pX)  // how do you handle a null ptr?
        return false;
      (*this)(*pX); // @Luc Danton 
    }

  private:
    std::string Name;
}; 
```

如果指针版本实现为

```
bool operator(T const* pX) const {} 
```

gcc for some reason choose to instantiate

```
bool operator(T const& pX) const with [T = A*] 
```

The functor has been compiled and tested with gcc 4.6.1.

# flash - 如何构建 Flash 程序以始终启用右键单击>“显示全部”？

> ID：10550997
> 
> 赞同：0
> 
> 时间：2012-05-11T12:05:29.110
> 
> 标签：flash

我正在制作 FlashDevelop/Flixel 游戏，我需要它以全屏模式运行。一切都设置好了，唯一的问题是每次我运行它时，我都必须右键单击并单击“全部显示”。一定有办法在代码中设置这个属性/参数，但是我找不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:37:25.457

这就是我需要的：

```
import flash.display.StageScaleMode;    
stage.scaleMode = StageScaleMode.NO_BORDER; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:20:45.850

我遇到了同样的问题，现在正在寻找几个小时，直到我意识到，它与缩放无关，而是与缩放有关。然后我发现了这个帖子：

[http://www.webreference.com/js/tips/010605.html](http://www.webreference.com/js/tips/010605.html)

在尝试使用 Zoom() 后我发现，这`$("object#flash").Zoom(0)`与右键单击 -> 显示全部相同

希望我可以帮助其他有同样问题的人

**编辑：** 哦，重要的是，在加载闪光灯后执行缩放。因为 onload 不适用于对象或嵌入，所以使用这个：

```
<body onload="document.getElementById('flash').Zoom(0)> 
```