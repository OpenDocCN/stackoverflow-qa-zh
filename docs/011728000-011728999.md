# StackOverflow 问答 11728000-11728999

# jquery - 如何通过更改 css 来实现这样的滚动 div？

> ID：11728001
> 
> 赞同：1
> 
> 时间：2012-07-30T19:09:20.820
> 
> 标签：jquery, html, css

该[站点](http://www.builtbymoby.com/)的左侧有一个滚动 div。当您滚动页面时，div 也会有节奏地滚动，并且图像的颜色也会发生变化。`position:fixed`不是所有可以做到的。

那是什么技术呢？

**编辑：**

`position:fixed`是我可以用来将 div 固定在页面滚动的位置的所有方法。但是如何添加变化的div的节奏呢？我还需要展示哪些研究成果（负面排名）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:35:52.143

you can achieve this by using jquery.

```
var divs = $('.fademe');
$(window).on('scroll', function() {
    var st = $(this).scrollTop();
    if (st > 50 && st < 100) {
        $('.fademe').css({
            'color': '#fff'
        });
    }
    else {
        $('.fademe').css({
            'color': '#000'
        });
    }    
}); 
```

this function will change the color of the text in a div when the scroll bar position is between 50 and 100\. otherwise the text will be black

you can modify the jquery code above to alter any css you'd like.

try it yourself here [http://jsfiddle.net/J8XaX/29/](http://jsfiddle.net/J8XaX/29/)

added bounce with this one [http://jsfiddle.net/J8XaX/43/](http://jsfiddle.net/J8XaX/43/)

Hope this helps

# ios - 编写自定义对象数组

> ID：11728006
> 
> 赞同：1
> 
> 时间：2012-07-30T19:09:31.977
> 
> 标签：ios, xcode, file-io

我的代码中有一组自定义对象。

我想将此数组写入文档文件夹中的文件中。在这个答案[iPhone -](https://stackoverflow.com/questions/2814316/iphone-archiving-array-of-custom-objects)我看到我需要实现这个方法的自定义对象的归档数组中：

```
- (void)encodeWithCoder:(NSCoder *)aCoder;
- (id)initWithCoder:(NSCoder *)aDecoder; 
```

所以我实现了它们：

```
- (void)encodeWithCoder:(NSCoder *)encoder {
  [encoder encodeObject:self.data forKey:@"data"];
  [encoder encodeObject:self.nome forKey:@"nome"];
  [encoder encodeObject:self.celular forKey:@"celular"];
  [encoder encodeObject:self.endereco forKey:@"endereco"];
  [encoder encodeObject:self.horaConclusao forKey:@"horaConclusao"];
  [encoder encodeObject:self.horaAtendimento forKey:@"horaAtendimento"];
}

- (id)initWithCoder:(NSCoder *)decoder {
  self = [super init];
  if (self) {
    self.data = [decoder decodeObjectForKey:@"data"];
    self.nome = [decoder decodeObjectForKey:@"nome"];
    self.celular = [decoder decodeObjectForKey:@"celular"];
    self.endereco = [decoder decodeObjectForKey:@"endereco"];
    self.horaConclusao = [decoder decodeObjectForKey:@"horaConclusao"];
    self.horaAtendimento = [decoder decodeObjectForKey:@"horaAtendimento"];
  }

  return self;
} 
```

在我的代码中，我使用这种方法编写：

此代码用于删除旧文件

```
-(NSString *) plistHistoryFile {
  NSError *error;
  NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
  NSString *documentsDirectory = [paths objectAtIndex:0];
  NSString *path = [documentsDirectory stringByAppendingPathComponent:[nameFile stringByAppendingPathExtension:@"plist"]];

  NSFileManager *filemgr = [NSFileManager defaultManager];
  if ([filemgr fileExistsAtPath:path]) {
    [filemgr removeItemAtPath:path error:&error];
  }

  return path;
} 
```

我用这个方法调用 write：

```
-(void) writeArrayToHistoryFile:(NSArray *) array {
  NSString *path = [self plistHistoryFile];
  NSLog(@"%@", path);

  if ([array writeToFile:path atomically:NO]) {
    NSLog(@"YES");
  } else {
    NSLog(@"NO");
  }
} 
```

但我在日志上的回答总是“否”，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:19:11.313

您需要找出错误是什么，但您无法使用`-[NSArray writeToFile:atomically:]`. 相反，以这种方式编写文件：

```
NSError *error;

NSData *data = [NSPropertyListSerialization dataWithPropertyList:array
    format: NSPropertyListBinaryFormat_v1_0 options:0 error:&error];
if (!data) {
    NSLog(@"failed to convert array to data: %@", error);
    return;
}

if (![data writeToFile:path options:NSDataWritingAtomic error:&error]) {
    NSLog(@"failed to write data to file: %@", error);
    return;
}

NSLog(@"wrote data successfully"); 
```

# macos - 自定义视图使隐藏可见

> ID：11728007
> 
> 赞同：1
> 
> 时间：2012-07-30T19:09:35.987
> 
> 标签：macos, cocoa, hide, custom-view

我正在写一个可可应用程序。我有一个隐藏的自定义视图。我想通过单击使其可见`show`，我想通过单击隐藏它`hide`。我的想法是让它像在窗户里一样。我的代码：

```
- (IBAction)show:(id)sender {
    [customView makeKeyAndOrderFront:self];
}

- (IBAction)hide:(id)sender {
    [customView close];
} 
```

它对我不起作用。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:43:39.457

您正在使用 an 的 show 和 close 方法`NSWindow`- 这是错误的。也许您正在寻找`NSView`'s`-setHidden:YES`而`-setHidden:NO`不是，它隐藏了 NSView （在其窗口内）。

# c++ - 编写大量类型别名是一种不好的做法吗？

> ID：11728009
> 
> 赞同：5
> 
> 时间：2012-07-30T19:09:37.037
> 
> 标签：c++

我发现自己编写了很多类型别名（typedefs）以使代码更容易更改，但同时有些东西告诉我要避免这样做，因为它会给将要与我一起工作的人造成很多混乱。代码。

也许不是最好的例子，但看看[这里](https://github.com/zoopp/polynomial/blob/master/source/polynomial.h)。我还会举一个最近的例子；这些是我在构建 XML 解析器时摆弄的一些类：

```
namespace XML
{
    struct Attribute
    {
        typedef std::string name_t;
        typedef std::string value_t;

        Attribute(const name_t &name, const value_t &value = "");

        name_t name;
        value_t value;
    };
}

namespace XML
{
    class Element
    {
        private:
            typedef std::list<Attribute> attribute_container;
            typedef std::list<Element> element_container;

        public:
            typedef attribute_container::iterator attribute_iterator;
            typedef attribute_container::const_iterator const_attribute_iterator;

            typedef element_container::iterator element_iterator;
            typedef element_container::const_iterator const_element_iterator;

            typedef std::string name_t;
            typedef std::string data_t;
...
        private:
            name_t _name;
            data_t _data;

            attribute_container _attributes;
            element_container _child_elements; 
```

以这种方式做事使编写代码更容易，也许它有点直观，但这种做法的缺点是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T19:22:25.307

这是我的 5 美分。您只需在某些情况下创建这些 typedef。例如，如果您正在编写自己的迭代器类，则必须使其工作`iterator_traits`并提供嵌套类型定义等`difference_type`。在某些情况下，这同样适用于容器。例如，如果一些常用的函数是这样写的：

```
template <typename T>
void foo(T::iterator it); 
```

那么无论`T`指定为模板参数，它都必须`iterator`声明一个嵌套类型。您可以添加自己的额外模板接口约定，并在整个代码中遵循它们。

嵌套类型有用的另一种情况是为模板参数设置别名，以让代码的其他部分引用它。例如：

```
template <typename T>
class Foo {
  public:
    typedef T now_you_can_access_this_from_the_outside;
}; 
```

但除此之外——不需要类型定义。然后这是一个偏好问题，但我打赌我的房子 -`std::string`比`value_t`仅仅因为每个人都知道是什么而更具可读性`std::string`，并且`value_t`对自己一无所知。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T19:53:55.797

有效的编程就是你可以适应你的头脑。如果定义一种类型更容易融入你的头脑，那就去做吧。但是如果你做的太多，跟踪太多类型的认知负担会伤害你。

例如，我可能会为此使用一个：

```
typedef std::map<std::string, std::vector<std::string> > SynonymMap; 
```

得出结论，您将为程序中的每个变量发明一种新类型。那可读性如何？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-30T19:14:56.213

我的经验法则是，如果 typedef 被使用超过 2-3 次，那么它就值得存在。否则就是浪费墨水，不利于环境。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-30T19:13:53.593

主观上，如果做得对，这实际上会使代码更容易阅读和理解。同样在`std`扩展中，`boost`这也被广泛使用，因此您可能希望这样做只是为了保持一致。

# jquery - div内的Textarea，得到改变的值

> ID：11728010
> 
> 赞同：1
> 
> 时间：2012-07-30T19:09:41.237
> 
> 标签：jquery

我在一个 div 中有 textarea 和许多其他 HTML 元素，如下所示：

```
 <div id="holder">
 <textarea id="txt">Some text</textarea>
 <img src="/someurl/test.png" />
 <div class="test">Blah</div>
 </div> 
```

当我尝试在“持有人” div 中获取所有 html 时，使用下面的代码，它运行良好。但是，如果我更改 textarea 值，并尝试再次获取 html，则 textarea 的值仍然是“某些文本”，而不是新文本。如何获得新的、更新的文本？

这是我如何获得“持有人”的html：

```
 $("#submit").click(function(){
    alert($("#holder").html() ); 
 }); 
```

这是 jsfiddle 示例：

[http://jsfiddle.net/zmL7k/](http://jsfiddle.net/zmL7k/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T19:12:39.127

手动更新 textarea html：

```
$("#submit").click(function() {
    $("#txt").html(function() {
        return this.value;
    });
    alert($("#holder").html());
});​ 
```

# forms - Visual C++ 打开第二个表单

> ID：11728015
> 
> 赞同：0
> 
> 时间：2012-07-30T19:09:57.327
> 
> 标签：forms, visual-c++, button

我有一个项目，其中包含两种形式，Form1.h 和 Form2.h。

每个的.cpp 文件是test.cpp 和Form2.cpp。

我想通过单击按钮从第一个表单打开第二个表单，我已经有代码，放置在 button1_Click 方法中：

```
Form2 ^ form = gcnew Form2;
form->Show(); 
```

我还在 Form1.h (#include "Form2.h") 中放置了包含文件，但是我不断收到以下错误：

```
error C2065: 'Form2' : undeclared identifier

error C2065: 'form' : undeclared identifier

error C2061: syntax error : identifier 'Form2'

error C2065: 'form' : undeclared identifier

error C2227: left of '->Show' must point to class/struct/union/generic type

1>          type is ''unknown-type''

1>  Generating Code...

========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

几天来我一直在寻找解决方案……但都没有奏效。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:16:00.890

您是否在 test.cpp 中包含了 Form1.h？

# java - 如何设置 InternetExplorerDriver 以使其正常工作

> ID：11728016
> 
> 赞同：16
> 
> 时间：2012-07-30T19:10:06.750
> 
> 标签：java, eclipse, selenium, webdriver, testng

我正在使用 WebDriver 并且我已经下载了 InternetExplorerDriver 并且想知道下载后我会如何处理它？

[这](http://code.google.com/p/selenium/wiki/InternetExplorerDriver)说要把司机放在我的路上。不太确定他们到底在说什么。

有没有人用过这个，如果有的话，你能提供关于如何设置它的详细步骤，这样它就可以工作了吗？

我收到以下错误：

> 驱动程序可执行文件的路径必须由 webdriver.ie.driver 系统属性设置

我下载了 IE 和 Chrome 驱动程序的可执行文件。我在哪里设置它？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-30T19:30:12.963

打开包装并将其放在您可以找到的地方。在我的示例中，我假设您将其放置到 C:\Selenium\iexploredriver.exe

然后你必须在系统中设置它。这是从我的 Selenium 项目中粘贴的 Java 代码：

```
File file = new File("C:/Selenium/iexploredriver.exe");
System.setProperty("webdriver.ie.driver", file.getAbsolutePath());
WebDriver driver = new InternetExplorerDriver(); 
```

基本上，您必须在初始化驱动程序之前设置此属性

参考：

*   [驱动程序可执行文件必须由 webdriver.ie.driver 系统属性设置](https://stackoverflow.com/questions/10995314/driver-executable-must-be-set-by-the-webdriver-ie-driver-system-property)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-04-01T16:31:17.297

如果您使用的是 RemoteDriver，情况会有所不同。来自[http://element34.ca/blog/iedriverserver-webdriver-and-python](http://element34.ca/blog/iedriverserver-webdriver-and-python)：

您将需要使用类似的行启动服务器

```
java -jar selenium-server-standalone-2.26.0.jar -Dwebdriver.ie.driver=C:\Temp\IEDriverServer.exe 
```

我发现如果 IEDriverServer.exe 位于`C:\Windows\System32\`或其子文件夹中，则无法自动找到它（即使 System32 在 中`%PATH%`）或显式使用 -D 标志。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-23T21:56:12.887

解决此问题的另一种方法是：

让我们假设：

**path_to_driver_directory** = C:\Work\drivers\

**驱动程序**= IEDriverServer.exe

当收到有关路径的消息时，您始终可以将包含**驱动程序的****path_to_driver_directory**添加到 PATH 环境变量中。检查：http: [//java.com/en/download/help/path.xml](http://java.com/en/download/help/path.xml)

 **如果驱动程序可用，则只需检查 cmd 窗口 - 只需在任何位置运行 cmd 并键入驱动程序的名称。

如果一切正常，那么你会得到：

```
C:\Users\A>IEDriverServer.exe
Started InternetExplorerDriver server (32-bit)
2.28.0.0
Listening on port 5555 
```

就是这样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-31T08:16:37.127

这只是为了将来帮助某人。当我们在 java 项目中启动 InternetExplorerDriver() 实例时，它使用 IEDriver.exe（由个人下载），当它不在路径中时，它会尝试在用户的 TEMP 文件夹中提取临时文件，然后你就被破坏了。

最安全的方法是提供您自己的提取路径，如下所示

```
System.setProperty("webdriver.ie.driver.extractpath", "F:\\Study\\");
System.setProperty("webdriver.ie.driver", "F:\\Study\\IEDriverServer.exe");
System.setProperty("webdriver.ie.logfile", "F:\\Study\\IEDriverServer.log");
InternetExplorerDriver d = new InternetExplorerDriver();
d.get("http://www.google.com");
d.quit(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T05:42:55.233

```
public class NavigateUsingAllBrowsers {

public static void main(String[] args) {

WebDriver driverFF= new FirefoxDriver();
driverFF.navigate().to("http://www.firefox.com");

File file =new File("C:/Users/mkv/workspace/ServerDrivers/IEDriverServer.exe");
System.setProperty("webdriver.ie.driver", file.getAbsolutePath());
WebDriver driverIE=new InternetExplorerDriver();
driverIE.navigate().to("http://www.msn.com"); 
```

// 从[http://code.google.com/p/chromedriver/downloads/list下载 Chrome 驱动程序](http://code.google.com/p/chromedriver/downloads/list)

```
file =new File("C:/Users/mkv/workspace/ServerDrivers/ChromeDriver.exe");
System.setProperty("webdriver.chrome.driver", file.getAbsolutePath());
WebDriver driverChrome=new ChromeDriver();
driverChrome.navigate().to("http://www.chrome.com");

}

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T13:59:52.630

基本上，您需要从 Selenium HQ 网站下载 IEDriverServer.exe 而不执行任何操作，只需记住您想要它的位置，然后像这样将代码放在 Eclipse 上

```
System.setProperty("webdriver.ie.driver", "C:\\Users\\juan.torres\\Desktop\\QA stuff\\IEDriverServer_Win32_2.32.3\\IEDriverServer.exe");
WebDriver driver= new InternetExplorerDriver();

driver.navigate().to("http://www.youtube.com/"); 
```

路径使用双斜杠//

那行，玩得开心 ！！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-11T09:33:53.830

这是确切的解决方案，适用于我的情况：

1.  在 Windows Vista 或 Windows 7 上的 IE 7 或更高版本上，您必须将每个区域的保护模式设置设置为相同的值。该值可以打开或关闭，只要每个区域都相同。要设置保护模式设置，请从“工具”菜单中选择“Internet 选项...”，然后单击“安全”选项卡。对于每个区域，标签底部都会有一个标记为“启用保护模式”的复选框。此外，对于 IE 10 及更高版本，必须禁用“增强保护模式”。此选项位于 Internet 选项对话框的高级选项卡中。

2.  `System.setProperty("webdriver.ie.driver","C:\\Users\\ssin22\\Downloads\\IEDriverServer_x64_2.48.0\\IEDriverServer.exe");`

* * *

```
package Testing;

import java.io.File;

import org.openqa.selenium.WebDriver;
import org.openqa.selenium.ie.InternetExplorerDriver;

public class LaunchIE {

    public static void main(String[] args) {
        // TODO Auto-generated method stub

        System.setProperty("webdriver.ie.driver","C:\\Users\\ssin22\\Downloads\\IEDriverServer_x64_2.48.0\\IEDriverServer.exe");

    WebDriver driver=new InternetExplorerDriver();
    driver.get("http://google.com");

    }

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-09-19T19:20:24.130

```
 using System.Text;
    ...
    ..
    static void Main(String[] args){ 
    var driver =  new InternetExplorerDriver(@"C:\Users\PathToTheFolderContainingIEDriver.exe"); 
    driver.Navigate().GoToUrl("https://www.google.com/");
    Console.Read();
    } 
```

您不需要包含 .exe 文件。包含 .exe 的文件夹的路径对我有用

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-09-20T05:46:11.160

```
WebDriverManager allows to automate the management of the binary drivers (e.g. chromedriver, geckodriver, etc.) required by Selenium WebDriver.

Link: https://github.com/bonigarcia/webdrivermanager

you can use something link this: WebDriverManager.iedriver().setup();

add the following dependency for Maven:

<dependency>
    <groupId>io.github.bonigarcia</groupId>
    <artifactId>webdrivermanager</artifactId>
    <version>x.x.x</version>
    <scope>test</scope>
</dependency> 

or see: https://www.toolsqa.com/selenium-webdriver/webdrivermanager/ 
```**

# objective-c - iOS 应用后台位置（推送通知）

> ID：11728017
> 
> 赞同：1
> 
> 时间：2012-07-30T19:10:09.917
> 
> 标签：objective-c, ios, push-notification, core-location, cllocationmanager

我遇到了一个问题，即我的应用程序在后台运行时收到推送通知时需要用户位置。

在做了一些阅读之后，我的印象是这是不可能的，即：

1）后台应用

2) 收到推送通知

3）获取用户位置并执行代码块。

我[在这里找到了这篇文章](https://stackoverflow.com/questions/6347503/how-do-i-get-a-background-location-update-every-n-minutes-in-my-ios-application)，建议您可以每 N 分钟运行一次任务来获取用户的位置。所以使用这个我可以每十分钟检查一次，这会起作用，但如果我继续激活 GPS，这将浪费用户的电池。因此，我想知道如果用户有任何推送通知等待我的应用程序，我可以在后台任务中判断吗？这样我会检查他们是否每十分钟一次，如果他们这样做了，只激活 GPS。

也许我正在以错误的方式处理这一切，我真的很感激任何建议。很抱歉还没有后台任务的任何代码，因为我仍在努力让它工作。

**[更新]**

感谢达斯汀的建议。经过一番测试后，我决定采用更简单的选择。我现在正在使用 Apple 重大位置更改。我将更改存储在一个数组中，我将其设置为仅在最后一次更改大于 10 分钟前才更新。然后，当应用程序变为活动状态时，我将数组中最接近的时间与发送推送通知的时间相匹配并使用该位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T23:19:22.520

正如所讨论的，我使用了替代解决方案，这里是：

在 viewDidLoad 或 didFinishingLaunchingWithOptions 下添加：

```
locationsLogged = [[NSMutableArray alloc] init];
lastLocationTime = [[NSDate alloc] init]
locationManager = [[CLLocationManager alloc] init];
[locationManager setDelegate:self];
[locationManager setDesiredAccuracy:kCLLocationAccuracyBest]; 
```

在 applicationDidEnterBackground 添​​加：

```
[locationManager startMonitoringSignificantLocationChanges]; 
```

添加：

```
-(void) storeLocations:(CLLocation *)location
{
bgTask = [[UIApplication sharedApplication]
          beginBackgroundTaskWithExpirationHandler:
          ^{
              [[UIApplication sharedApplication] endBackgroundTask:bgTask];
               }];

[locationsLogged addObject:location];

if (bgTask != UIBackgroundTaskInvalid)
{
    [[UIApplication sharedApplication] endBackgroundTask:bgTask];
     bgTask = UIBackgroundTaskInvalid;
     }
}

 -(void) locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
BOOL isInBackground = NO;
if ([UIApplication sharedApplication].applicationState == UIApplicationStateBackground)
{
    isInBackground = YES;
} 

NSDate *now = [NSDate date];
NSTimeInterval diff = [now timeIntervalSinceDate:lastLocationTime];

if ((int)diff > 600) {

    if (isInBackground)
    {
        [lastLocationTime release];
        lastLocationTime = [[NSDate alloc] init];
        [self storeLocations:newLocation];
    }
    else
    {
        // ...
    }
}
} 
```

然后在 applicationDidBecomeActive 上，您可以使用应用位置信息所需的任何逻辑。

# sql - 根据 Distinct Column 值返回行数据

> ID：11728018
> 
> 赞同：2
> 
> 时间：2012-07-30T19:10:14.527
> 
> 标签：sql, tsql, asp-classic, azure, azure-sql-database

我将 SQL Azure 与 asp 脚本一起使用，并且在我的一生中，没有运气尝试让它工作。我正在运行查询的表有很多列，但我想查询 2 列（名称和电子邮件）上的不同值，我希望它从那里返回整行的值。

我的查询现在的样子：

```
SELECT DISTINCT quote_contact, quote_con_email 
FROM quote_headers 
WHERE quote_contact LIKE '"&query&"%' 
```

但我需要它返回整行，以便检索其他数据点。如果我在一年前很聪明，我会为联系人创建一个单独的表格，但那是一年前的事了。

在我实现 LiveSearch 功能之前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:15:54.213

一种方法是使用 CTE（通用表表达式）。使用此 CTE，您可以按某些标准（即您的`quote_contact`和）对数据进行分区，`quote_con_email`并让 SQL Server 为每个分区从 1 开始为您的所有行编号，并按其他标准排序（即可能是`SomeDateTimeStamp`.

所以尝试这样的事情：

```
;WITH DistinctContacts AS
(
   SELECT 
       quote_contact, quote_con_email, (other columns here),
       RN = ROW_NUMBER() OVER(PARTITION BY quote_contact, quote_con_email ORDER BY SomeDateTimeStamp DESC) 
   FROM 
       dbo.quote_headers
   WHERE
       quote_contact LIKE '"&query&"%'
)
SELECT 
   quote_contact, quote_con_email, (other columns here)
FROM 
   DistinctContacts
WHERE
   RowNum = 1 
```

在这里，我只为每个“分区”（即每对姓名/电子邮件）选择最后一个条目——按时间戳以降序排列。

这是否接近你正在寻找的东西？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:22:09.660

您需要提供更多详细信息。这就是没有他们我能想出的：

```
WITH dist as (
SELECT DISTINCT quote_contact, quote_con_email, RANK() OVER(ORDER BY quote_contact, quote_con_email) rankID
FROM quote_headers 
WHERE quote_contact LIKE '"&query&"%'
),
data as (
SELECT *, RANK() OVER(ORDER BY quote_contact, quote_con_email) rankID FROM quote_headers 
)
SELECT * FROM dist d INNER JOIN data src ON d.rankID = src.rankID 
```

# javascript - JQuery 在 Firefox 和 chrome 中无法正常工作

> ID：11728021
> 
> 赞同：1
> 
> 时间：2012-07-30T19:10:23.090
> 
> 标签：javascript, jquery, html, css, menu

我目前正在开发一个 ASP.NET 网页，我遇到了我遇到过的最烦人的问题。

过去三天我一直在研究这个问题，找不到任何人甚至遇到过这个问题，更不用说任何解决方案了。

我创建了一个带有 HTML/CSS 的菜单/子菜单，并且我正在向子菜单添加某种切换效果以使其向下滑动或淡入（我都尝试过，并且都产生相同的结果）。

在 Internet Explorer 中，它运行良好。我可以将鼠标悬停在菜单上，它会向下滑动或正确淡入，然后当我将鼠标移开时它会消失。

在 Chrome/Firefox 中，我就没那么幸运了。子菜单一开始是隐藏的，然后如果我将鼠标悬停在它上面一次，它就会出现。如果我将鼠标移开，它会立即关闭，然后自行重新打开。在这一点上，它已经一去不复返了。如果我将鼠标悬停在它上面，它就会消失，如果我再次将鼠标移开，它会重新出现。这将继续发生，直到页面重新加载。

这是HTML中的菜单...

```
<ul id="menu">
        <li><a href="Default.aspx">Home</a></li>
        <li><a href="Services.aspx">Services</a>
            <ul id="submenu">
                <li>Custom CRM</li>
                <li>Website Development</li>
            </ul>
        </li>
        <li><a href="About.aspx">About</a></li>
        <li><a href="Contact.aspx">Contact Us</a></li>
    </ul> 
```

至于与这个菜单有关的 CSS，就是这样……

```
#menu
{
    padding:0;
    text-align: center;
    margin: 0;
    width: 100%;
}

#menu li 
{
    height: 35px;
    float: left;
    list-style: none;   
    width: 25%;
    font-size: larger;
    cursor: pointer;
    position: relative;

}

#menu li a 
{
    display: block;
    height: 35px;
    text-decoration: none;
    color: White;
    font-weight: bold;
    padding-top: 5px;

}

#menu li:hover 
{
    background-color: #4CC417;
}

#menu li:hover ul 
{
    display: block;
}

#menu ul 
{
  margin: 0;
  padding: 0;
  position: absolute;
  z-index: 999;
  top: 36px;
  width: 140%;
  display: none;
  list-style: none;
  left: 0;
}

#menu ul li 
{
    text-align: left;
    font-size: medium;
    width: auto;
    float: none;
    background-color: #387C44;
    color: White;
    font-weight: bold;
    padding-left: 5px;

}

#submenu ul 
{
    display: none;
    z-index: 999;

}

#submenu 
{
    display: none;
} 
```

最后，这是我为此创建的 JQuery 代码......

```
<script type="text/javascript">

    $(document).ready(function () {
        $("#menu ul").parent().hover(function () {
            $("#submenu").stop(true, true).fadeToggle("slow");
        });
    });

</script> 
```

任何帮助是极大的赞赏。谢谢！

- 标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:27:03.147

首先，`hover`接受两个函数参数（一个用于鼠标悬停，一个用于鼠标移出）。其次，我将推荐使用`on`：

```
$('#menu > li').on({
  mouseover: function() {              
    $(this).children('ul').slideDown(300);
  },
  mouseout: function() {
    $(this).children('ul').stop(true, false).hide();
  }
}); 
```

通过 jQuery 的制衡，如果`li`没有 child就会返回`ul`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:24:25.763

[http://jsfiddle.net/9LEMZ/3/](http://jsfiddle.net/9LEMZ/3/)

这是你的追求吗？（如果没有，请随时指导我！）

我已经完全改变了 jquery 以淡入子元素，最初隐藏子菜单。还从 css 中删除了 display:none 以帮助解决此问题（因为它现在通过 .hide() 隐藏）

干杯，

# visual-studio-2010 - 使用 Visual Studio 2010 将 libexif 编译为静态库 - 然后从 Visual C++ 项目链接

> ID：11728027
> 
> 赞同：1
> 
> 时间：2012-07-30T19:10:50.827
> 
> 标签：visual-studio-2010, visual-c++, libexif

是否可以使用 Visual Studio 2010 编译 libexif？我一直在尝试这样做，并且遇到了一大堆问题。我找不到任何关于之前是否有人成功完成此操作的信息。我知道我可以使用 MinGW 编译库，但我需要使用 Visual Studio 编译它，然后需要从 Visual C++ 应用程序链接到它。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-09T12:08:57.773

回答你的问题：**是**的，这是可能的......但这有点像黑客。Libexif 使用 MSVC 选择不实现的功能。请参阅下面我的工作示例 VS2010 项目（如果您不喜欢下载文件，请跳到我对需要更改的内容的解释以使其在下面工作）：

[https://www.dropbox.com/s/l6wowl8pouux01a/libexif-0.6.21_CompiledInVS2010%2BExample.7z?dl=0](https://www.dropbox.com/s/l6wowl8pouux01a/libexif-0.6.21_CompiledInVS2010%2BExample.7z?dl=0)

详细地说，需要“破解”的问题（如 LibExif readme-win32.txt 文档中所暗示的）是：

*   Libexif在 VS for C 中没有定义的几个地方使用**内联，只有 C++ （见**[这个](https://msdn.microsoft.com/en-us/library/z8y1yy88.aspx)）

*   Libexif 在 VS 中未定义的代码中广泛使用 snprintf（参见[此处](https://stackoverflow.com/questions/2915672/snprintf-and-visual-studio-2010)）

*   您需要自己创建 config.h 而无需 ./configure 命令来帮助您。您可以通读该脚本，但其中大部分内容对于 Windows VS2010 没有意义。

*   您将需要定义 GETTEXT_PACKAGE 因为它可能已在配置文件中设置。我只是选择UTF-8，是否正确我不确定。

*   有一个随机的**无符号静态 ***需要从 .c 文件移动到 .h 文件，因为 VS 中的 C 不允许您以它们尝试执行的特定方式在函数内部创建新变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:55:03.913

阅读“readme-win32.txt”文件。建议是：

> 以某种方式破解自己的构建系统。
> 这似乎是 Windows 的做事方式。

不要抱太大希望。*nix 的做事方式是需要先运行的配置脚本。它自动生成源文件以将库与 *nix 的特定风格结合起来。配置脚本几乎是半兆字节。实际 .c 文件中的代码是实际 .c 文件的三倍 :) 如果没有 MinGW，您将无法合理地使其正常工作，因此您可以执行脚本。完成此操作后，您就可以使用 VS 解决方案更好地解决问题。只要它不使用过多的 C99 特定语法。

# symfony - Twig：根据当前语言环境显示月份的名称

> ID：11728028
> 
> 赞同：12
> 
> 时间：2012-07-30T19:10:54.263
> 
> 标签：symfony, twig

我只是想根据当前的语言环境显示月份的名称。

```
{{ event.date|date('F') }} 
```

但是月份总是用英文显示...

我在下面找到[了这里](https://github.com/fabpot/Twig/issues/378)的代码，但结果是一样的......

```
class Helper_Twig extends Twig_Extension
{
    public function getFilters()
    {
        return array(
            'datetime' => new Twig_Filter_Method($this, 'datetime')
        );
    }

    public function datetime($d, $format = "%B %e")
    {
        if ($d instanceof \DateTime) {
            $d = $d->getTimestamp();
        }

        return strftime($format, $d);
    }

    public function getName()
    {
        return 'Helper';
    }
} 
```

**注意：**在控制器中，我正在检查当前使用的语言环境`$request->getLocale`，它对应于我在 parameters.yml 中切换的语言环境参数。

问题是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T19:42:18.243

由于您定义`datetime`了 TwigFilter，因此您不必调用`{{ event.date|date('F') }}`

相反，你应该称之为`{{ event.date|datetime('%B') }}`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T21:56:02.140

您可以使用[SonataIntlBundle](https://github.com/sonata-project/SonataIntlBundle/blob/master/Resources/doc/reference/datetime.rst)来处理本地化的日期表示。`Intl`虽然需要安装库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T20:45:30.027

您可能尚未在 PHP`intl`中安装 PHP 库。[http://php.net/manual/de/book.intl.php](http://php.net/manual/de/book.intl.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-10-15T07:27:19.657

如果您已安装，则`IntlExtension`可以使用`format_datetime`自定义模式。

```
{{ event.date|format_datetime(pattern="MMMM") }} 
```

文档：

*   [https://twig.symfony.com/doc/3.x/filters/format_datetime.html](https://twig.symfony.com/doc/3.x/filters/format_datetime.html)
*   [https://unicode-org.github.io/icu/userguide/format_parse/datetime/#datetime-format-syntax](https://unicode-org.github.io/icu/userguide/format_parse/datetime/#datetime-format-syntax)

# css - CSS3 过渡

> ID：11728029
> 
> 赞同：0
> 
> 时间：2012-07-30T19:11:01.257
> 
> 标签：css, css-transitions

我在这里有这个页面（正在进行中）[http://kimwilddesigns.com/index_new.htm](http://kimwilddesigns.com/index_new.htm)

在本节中，我希望能够将鼠标悬停在 li 上，让背景图像淡出，让 h2 淡入。这可以通过转换实现吗？我可能没有正确设置它，但我想看看这种效果是否可能。

```
<div id="categories-wrapper">
    <ul>
        <li class="fine-art"><a href="#"><img src="pics/hp_icon_fine-art.jpg" alt="fine art" width="290" height="240" border="0"></a>
            <h2>fine art work</h2>
        </li>
        <li class="gd">graphic design work</li>
        <li class="students">my students' work</li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:29:39.500

是的，这与 CSS 过渡效果很好，如下所示：

```
#categories-wrapper li a {
    position:relative;
    display: block
}

#categories-wrapper li h2 {
    position: absolute;
    left: 20px;
    top: 20px;
    opacity: 0;
}

#categories-wrapper li h2,
#categories-wrapper li img {
    -webkit-transition: opacity .3s ease-in-out;
    -moz-transition: opacity .3s ease-in-out;
    -o-transition: opacity .3s ease-in-out;
    transition: opacity .3s ease-in-out;
}

#categories-wrapper li:hover h2 {
    opacity: 1
}

#categories-wrapper li:hover img {
    opacity: 0
} 
```

请参阅[Fiddle](http://jsfiddle.net/x9vPn/)，通过将 h2 放在标签内来稍微更改您的`a`标记。

# android - 我的申请失败，我不知道为什么

> ID：11728032
> 
> 赞同：0
> 
> 时间：2012-07-30T19:11:30.397
> 
> 标签：android, android-ndk

我正在按照本[教程](http://mobile.tutsplus.com/tutorials/android/ndk-tutorial/)中的指南编写一个非常简单的应用程序。

我尝试运行我的应用程序，但在打开时失败。编写的 C 代码已使用`ndk-build`.

这是Java代码：

```
package com.example.ndktest;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.support.v4.app.NavUtils;

public class MainActivity extends Activity {

    private Button button;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.i( "MainActivity", "beginning of onCreate()" );
        setContentView(R.layout.activity_main);

        button = (Button) findViewById( R.id.button1 );
        button.setOnClickListener( new OnClickListener( ) {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            helloLog( "This will log to LogCat" );
        }

        });
    }
    private native void helloLog( String logThis );

    static {
        System.loadLibrary( "ndk1" );
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }   
} 
```

这是C代码：

```
#include <jni.h>
#include <string.h>
#include <android/log.h>

#define DEBUG_TAG "NDK_AndroidNDK1SampleActivity"

void Java_com_example_ndktest_MainActivity_helloLog( JNIEnv * env, jobject this, jstring logThis )
{
    jboolean isCopy;
    const char * szLogThis = (*env)->GetStringUTFChars( env, logThis, &isCopy );

    __android_log_print( ANDROID_LOG_DEBUG, DEBUG_TAG, "NDK:LC: [%s]", szLogThis );

    (*env)->ReleaseStringUTFChars( env, logThis, szLogThis );
} 
```

这是MakeFile：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)  

LOCAL_LDLIBS := -llog  

LOCAL_MODULE    := ndk1  
LOCAL_SRC_FILES := native.c  

include $(BUILD_SHARED_LIBRARY) 
```

这是 XML 文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:padding="@dimen/padding_medium"
        android:text="@string/hello_world"
        tools:context=".MainActivity" />

    <Button
        android:id="@+id/button1"
        android:layout_width="fill_parent"
        android:text="Click Here to Log" />

</RelativeLayout> 
```

这是 AndroidManifest ：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.ndktest"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

这是我在 Eclipse 中的环境图片：

![在此处输入图像描述](../Images/b558bf6c8c45e49f14cfaca31354369e.png)

编辑 ：

发现 LogCat 确实显示了一些东西，但它们被过滤器隐藏了......仍然无法找出问题所在。这是 LogCat：

```
07-30 15:22:31.718: E/AndroidRuntime(2589): FATAL EXCEPTION: main
07-30 15:22:31.718: E/AndroidRuntime(2589): java.lang.ExceptionInInitializerError
07-30 15:22:31.718: E/AndroidRuntime(2589):     at java.lang.Class.newInstanceImpl(Native Method)
07-30 15:22:31.718: E/AndroidRuntime(2589):     at java.lang.Class.newInstance(Class.java:1409)
07-30 15:22:31.718: E/AndroidRuntime(2589):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
07-30 15:22:31.718: E/AndroidRuntime(2589):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
07-30 15:22:31.718: E/AndroidRuntime(2589):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
07-30 15:22:31.718: E/AndroidRuntime(2589):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
07-30 15:22:31.718: E/AndroidRuntime(2589):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
07-30 15:22:31.718: E/AndroidRuntime(2589):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-30 15:22:31.718: E/AndroidRuntime(2589):     at android.os.Looper.loop(Looper.java:130)
07-30 15:22:31.718: E/AndroidRuntime(2589):     at android.app.ActivityThread.main(ActivityThread.java:3683)
07-30 15:22:31.718: E/AndroidRuntime(2589):     at java.lang.reflect.Method.invokeNative(Native Method)
07-30 15:22:31.718: E/AndroidRuntime(2589):     at java.lang.reflect.Method.invoke(Method.java:507)
07-30 15:22:31.718: E/AndroidRuntime(2589):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-30 15:22:31.718: E/AndroidRuntime(2589):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-30 15:22:31.718: E/AndroidRuntime(2589):     at dalvik.system.NativeStart.main(Native Method)
07-30 15:22:31.718: E/AndroidRuntime(2589): Caused by: java.lang.UnsatisfiedLinkError: Couldn't load ndk1: findLibrary returned null
07-30 15:22:31.718: E/AndroidRuntime(2589):     at java.lang.Runtime.loadLibrary(Runtime.java:429)
07-30 15:22:31.718: E/AndroidRuntime(2589):     at java.lang.System.loadLibrary(System.java:554)
07-30 15:22:31.718: E/AndroidRuntime(2589):     at com.example.ndktest.MainActivity.<clinit>(MainActivity.java:38)
07-30 15:22:31.718: E/AndroidRuntime(2589):     ... 15 more
07-30 15:22:31.718: W/ActivityManager(1136):   Force finishing activity com.example.ndktest/.MainActivity 
```

编辑 2：

这是我调用 ndk-build 后我的 cygwin 终端的图片：

![在此处输入图像描述](../Images/9738ebd17caaf90fd74118584ac3569d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:33:52.727

很可能`libndk1.so`您的`Activity`. 你确定`libndk1.so`构建良好吗？

```
by: java.lang.UnsatisfiedLinkError: Couldn't load ndk1: findLibrary returned null 
```

# c++ - 我无法将 cstring 转换为 int

> ID：11728035
> 
> 赞同：1
> 
> 时间：2012-07-30T19:11:48.300
> 
> 标签：c++, http, mfc, dialog

我想从 cstring 中获取 int。这是代码。

* * *

```
CStringArray paramArray;
paramArray.Add((LPCSTR)"5");
paramArray.Add((LPCTSTR)"151");

pvarArguments = new CComVariant[2];
pvarArguments[0] = (LPCTSTR)paramArray[1];

CString str;
str = (CStringA)pvarArguments[0];
int nlen = _wtoi(str.GetBuffer()); 
```

* * *

当我运行我的程序时，我总是得到值 0，我不明白为什么会这样。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:14:19.440

来自[TFM](http://msdn.microsoft.com/en-us/library/yd5xkb5c%28v=vs.80%29.aspx)（重点是我的）：

> 每个函数都返回通过将输入字符解释为数字而产生的 int 值。**如果输入无法转换为该类型的值，则 atoi 和 _wtoi 的返回值为 0。**

打印字符串或使用调试器检查它。字符串中可能存在无效（包括不可打印的）字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T04:23:37.480

```
CStringArray paramArray;
paramArray.Add(_T("5"));
paramArray.Add(_T("151"));

CComVariant *pvarArguments = new CComVariant[2];
pvarArguments[0] = (LPCTSTR)paramArray[1];

CString str;
str = pvarArguments[0].bstrVal;
int nlen = _ttoi(LPCTSTR(str)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T22:22:28.773

甚至你想做什么也很难说。你知道 C++ 数组是从 0 开始的，对吧？我问是因为这行代码：

```
pvarArguments[0] = (LPCTSTR)paramArray[1]; 
```

完全搞砸了。我不明白为什么在尝试索引 CStringArray 中等于元素计数的元素时它不会引发异常。您只能索引到 count-1 ==>>，在这种情况下为“0”。

你的 pvarArguments[0] 里面会有垃圾——我不知道为什么没有抛出异常。

如果你想从一个变体中得到一个不同的类型，你可以使用 VariantChangeType() 而不要与 wcstoi 或 atoi 混淆。如果失败，它会给出一个错误代码，而不是只返回 0。如果你一心想在 CString 上使用 wcstoi 或 atoi，请使用 _tstoi()，无论你是否定义了 UNICODE，它都有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-05T23:25:50.613

根据上面的建议，这为我编译：

```
rs->GetFieldValueString(0).Left(1) == sBoroCode
    && (_ttoi(LPCTSTR(sLowHouseNo)) % 2) == (_ttoi(LPCTSTR(rs->GetFieldValueString(2))) % 2) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T19:46:17.683

`CStringA`暗示不需要 ANSI 字符串`atoi`类型`_wtoi`。

我建议：

```
CString str(pvarArguments[0]);
int nlen = atoi(str.GetString()); 
```

`GetBuffer()`不理想，因为你必须记住以后`ReleaseBuffer()`。

编辑：根据新信息，试试这个：

```
paramArray.Add(L"5");
paramArray.Add(L"151"); 
```

[L 宏](https://stackoverflow.com/questions/4086817/l-prefix-for-strings-in-c)使字符串 wchar_t 知道。如果 L 不起作用，请尝试`_T`。然后使用`_wtoi`or `_tstoi`。

# codeigniter - CodeIgniter 分页不起作用

> ID：11728037
> 
> 赞同：0
> 
> 时间：2012-07-30T19:12:05.057
> 
> 标签：codeigniter, pagination

我设置了 CodeIgniter 分页的属性，但出现错误。

```
1 2 3 4 5 > 
```

我的分页在第 2-5 页上工作，除了第 1 页。我不知道为什么会这样。这是我的控制器功能，其中控制器名称为`c_forum`.

```
function show_posts_by_chapter($id_chapter=false) {
    if($id_chapter==false)
        show_404();

    $config = array();
    $config["base_url"] = base_url() . "index.php/c_forum/show_posts_by_chapter/" . $id_chapter.'/';
    $config['total_rows'] = $this->m_forum->num_rows_by_chapter($id_chapter);

    $config['per_page'] = 2;
    $configp['uri_segment'] = 4;

    $choice = $config["total_rows"] / $config["per_page"];
    $config["num_links"] = round($choice);
    $this->pagination->initialize($config);
    $page = ($this->uri->segment(4)) ? $this->uri->segment(4) : 0;

    $data['chapter_id'] = $id_chapter;
    $data['allowed'] = $this->_get_level();
    $data['count_rows'] = $config['total_rows'];

    $data['posts_all'] = $this->m_forum->get_posts_by_chapter($config['per_page'], $page, $id_chapter);
    $data['links'] = $this->pagination->create_links();
    $this->load->view('forum/show_posts', $data);
} 
```

视图很简单：

```
 `<?php echo $links; ?>` 
```

得到了答案：我用过`$configp['uri_segment'] = 4;`，应该是`$config['uri_segment'] = 4;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-01T14:29:11.897

**$configp['uri_segment'] = 4;**
这应该是
**$config['uri_segment'] = 4;**

# eclipse - Eclipse“变量”窗口，更改值颜色

> ID：11728040
> 
> 赞同：10
> 
> 时间：2012-07-30T19:12:15.597
> 
> 标签：eclipse

我在“变量”窗口中找不到如何更改背景颜色。在调试时更改变量时，它会以可怕的黄色背景突出显示，在我的 zenburn 风格颜色集中，我无法清楚地看到线条。

我可以以某种方式改变那个背景吗？

谢谢，

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-24T18:02:57.187

今天我终于厌倦了这个自己并环顾四周。在`Preferences->Run/Debug`你可以设置`Changed value background color`任何你想要的。似乎`Changed value color`被忽略了。（事实上​​，如果它不被忽略，这首先不会是一个问题，因为文本将是黄色的红色而不是黄色的白色。;）

# objective-c - 在“默认”动画之后

> ID：11728046
> 
> 赞同：0
> 
> 时间：2012-07-30T19:12:41.257
> 
> 标签：objective-c, ios

我想在我的 Default.png 不再需要后添加一些动画。我知道我会这样做，`application didFinishLaunchingWithOptions`但我的问题是动画应该是什么格式以及如何加载它？

默认情况下，有很多应用程序带有漂亮的动画。但我无法弄清楚它是如何工作的。

例如： http: [//itunes.apple.com/us/app/bump/id305479724](http://itunes.apple.com/us/app/bump/id305479724?mt=8) ?mt=8这就是我想做的。第一个静态 png，但是当我的应用程序进入时，`didFinishLaunchingWithOptions`我想做一些动画的东西，比如在 Bump 中。我怎样才能做到这一点？

是的，我知道到目前为止我没有尝试任何东西，但我真的不知道从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:42:01.747

这将取决于您的要求。如果您想加载已经完成的视频，请查看[此处。](https://developer.apple.com/library/ios/#samplecode/MoviePlayer_iPhone/Introduction/Intro.html) 如果您只想从您的设计对象创建动画，您可以从[核心动画中学习一点。](https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/coreanimation_guide/introduction/introduction.html)我不会解释所有内容，因为正如您将看到的......它有很多文档。您甚至可以创建 OpenGL 动画并播放它。

`viewDidLoad`在初始屏幕消失后，您可以在第一个视图中开始您的视频。

编辑：一个不错的[教程](http://www.raywenderlich.com/2454/how-to-use-uiview-animation-tutorial)。

# java - 如何为使用 envers 的代码创建 Junit？

> ID：11728048
> 
> 赞同：1
> 
> 时间：2012-07-30T19:12:45.520
> 
> 标签：java, jpa, junit, ehcache, hibernate-envers

我要编写一个 JUnit 来检查是否正在维护版本（在事件中）。这是我使用 JUnit 所做的：

```
@Test
Public void testAudit() {
    try {
        //create Dao code
        dao.save();  //This will create entry in  AUD- and REVINFO-tables perfectly
        SomeObject obj = SomeHelper.getAuditData(dao));
        /*Method to be tested which generates audit message using envers i.e(dao created)*/
        //Some logic to check if output is as expected  
    }
    catch(Exception e) {
        Assert.fail();
    }
    finally {
        dao.delete();  //delete the data saved by JUnit (Problem starts here )
    }
} 
```

为 dao 调用 delete 会导致

> UnsupportedOperationException：无法写入只读对象

我使用 Ehcache 进行缓存。我搜索了这个问题并知道这可能是因为`CacheConcurrencyStrategy`我想删除的域对象设置错误。我检查了。

对于域对象，没有`CacheConcurrencyStrategy`. 但是嵌套对象已`CacheConcurrencyStrategy`设置为`READ_WRITE`（这可能是真正的罪魁祸首）。

但我不想更改现有域和现有代码。有没有办法绕过`CacheConcurrencyStrategy`JUnit？如果没有，是否有任何可能的出路而不更改现有代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-26T19:53:46.573

ENVERs 数据是在事务提交后写入的，因此您的代码将永远不会访问审计记录，因为它还不存在。如果你想测试 ENVER，你需要自己管理事务。这是一个例子；

```
@Before
public void setup() {
    // Envers audit information is written via post-event listeners and therefore the transaction needs to be
    // committed.
    PlatformTransactionManager txMgr = applicationContext.getBean(PlatformTransactionManager.class);
    TransactionStatus status = txMgr.getTransaction(new DefaultTransactionDefinition(TransactionDefinition.PROPAGATION_REQUIRES_NEW));
    Account account = accountDAO.getByUsername(UPDATE);
    if (account != null) {
        accountDAO.delete(account);
    }

    account = createAccount();
    account.setUsername(INITIAL);
    accountDAO.update(account);
    txMgr.commit(status);

    status = txMgr.getTransaction(new DefaultTransactionDefinition(TransactionDefinition.PROPAGATION_REQUIRES_NEW));
    account.setUsername(UPDATE);
    accountDAO.update(account);
    txMgr.commit(status);

} 
```

然后在您的测试中，您可以随意查询审计信息（原始 SQL、通过 AuditReader 等）。

# android - 清爽的画布？

> ID：11728051
> 
> 赞同：1
> 
> 时间：2012-07-30T19:13:03.720
> 
> 标签：android, image-processing, ondraw

我尝试在 onDraw 期间显示位图列表中的一个。
当我将列表传递到画布时，所有内容都显示并留在它们的位置。
当我传递一个随机位图时，它一直在重绘画布。
当我使用 public void drawEnemy(Canvas canvas) 时，所有工作都有效，但与使用 public void drawEn(Canvas canvas) 时不完全一样。
我想显示一个随机位图，然后几秒钟后，将其删除并显示其他位图。我认为问题在于我如何实现 onDrow() 方法。它一直在重绘画布。

活动：

```
public class NewGameActivity extends Activity{
NewGame newgame;
public void onCreate(Bundle savedInstanceState){
     super.onCreate(savedInstanceState);
        // Landscape mode
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
        // no title
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        // content Newgame.java
        newgame = new NewGame(this);
        setContentView(newgame);
 } 
```

线：

```
public class MainThread extends Thread{

private SurfaceHolder surfaceHolder;
private NewGame screen;

public MainThread(SurfaceHolder surfaceHolder, NewGame ekran) {
    super();
    this.surfaceHolder = surfaceHolder;
    this.screen= screen;
}

private boolean running;
public void setRunning(boolean running) {
    this.running = running;
}

@Override
public void run() {
    Canvas canvas;
    while (running) {
        canvas = null;
        try {
            canvas = this.surfaceHolder.lockCanvas();
            synchronized (surfaceHolder) {
                this.screen.onDraw(canvas);
            }
        } finally {
            if (canvas != null) {
                surfaceHolder.unlockCanvasAndPost(canvas);
            }
        }
    }

} 
```

}

表面视图：

```
public class NewGame extends SurfaceView implements SurfaceHolder.Callback{

private MainThread thread;
private EnemyManager manager;

public NewGame(Context context) {
    super(context);
     getHolder().addCallback(this);
     thread = new MainThread(getHolder(), this);
     manager = new EnemyManager();
    // TODO Auto-generated constructor stub
//adding enemy
     Enemy e1 = new Enemy(BitmapFactory.decodeResource(getResources(), R.drawable.card), 1);
     Enemy e2 = new Enemy(BitmapFactory.decodeResource(getResources(), R.drawable.horse), 2);
     EnemyLocation l1 = new EnemyLocation(60, 180);
     EnemyLocation l2 = new EnemyLocation(60, 50);
     manager.AddEnemy(e1, l1);
     manager.AddEnemy(e2, l2);
     setFocusable(true);
}

@Override
protected void onDraw(Canvas canvas) {
     canvas.drawBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.saloon), 0, 0, null);
        manager.drawEn(canvas);

}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
    // TODO Auto-generated method stub

}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    thread.setRunning(true);
    thread.start();
}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
     thread.setRunning(false);
     thread.stop();
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        manager.handleActionDown((int)event.getX(), (int)event.getY());
    }
    return true;
} 
```

}

敌人经理：

```
public class EnemyManager {
private ArrayList<Enemy> enemyList;
private ArrayList<Enemy> suspects;
private Enemy cow;
private String message;
private int suspectID;
private Random rnd;

public String getMessage() {
    return message;
}

public EnemyManager(){
    enemyList = new ArrayList<Enemy>();
    suspects = new ArrayList<Enemy>();
}

public void AddEnemy(Enemy enemy, EnemyLocation loc){
    // set x,y enemy localization
    enemy.setX(loc.getX());
    enemy.setY(loc.getY());
    enemyList.add(enemy);
}

public void clearEnemy() {
    enemyList.clear();
}

// message if enemy touched
public void handleActionDown(int x, int y) {
    for (Enemy enemy: enemyList) {
        if (enemy.wasTouched(x, y)) {
            message = enemy.getId();
            return;
        }
    }
}

public void PrepareEnemy(){
    suspectID = enemyList.get(rnd.nextInt(enemyList.size()+1)).getId();
    suspects = new ArrayList<Enemy>();
    suspects.add(getSuspectByID(suspectID));
}

private Enemy SingleEnemy(){
    Double i = 1 + Math.random() * ((enemyList.size()-1)+1);
    cow = getSuspectByID(i.intValue());
    return cow;
}

private Enemy getSuspectByID(int suspectID) {
    for (Enemy s: enemyList) {
        if (s.getId() == suspectID) {
            return s;
        }
    }
    return null;
}

public void drawEn(Canvas canvas){
    try {
        Enemy k = SingleEnemy();
        canvas.drawBitmap(cow.picture, cow.x, cow.y, null);
    } catch (Exception e) {
        // TODO: handle exception
    }
}

// draw enemy
public void drawEnemy(Canvas canvas) {
    try {
        for (Enemy enemy: enemyList) {
            canvas.drawBitmap(enemy.picture, enemy.x, enemy.y, null);
        }
    } catch (Exception e) {
        // TODO: handle exception
    }

} 
```

}

达斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:19:15.863

据了解，您正在尝试做这样的事情（如果不是，请纠正我）：这是用所有组件渲染画布：

*   绘制背景
*   绘制敌人

要“刷新”画布，您只需执行以下操作：

*   绘制背景

**更新**

要暂停渲染，您可以执行以下操作：

```
int lastUpdateTime;
int delayTime = 2000; 2 seconds

if(System.currenttimeMillis() > lastUpdateTime + delayTime) {
// Finished waiting
} 
```

您应该只定义`lastUpdateTime`您想要等待的时间，而不是在每次迭代中。

注意：不要在渲染线程中调用 Thread.sleep() ！

# sql-server - SQL Server 时区

> ID：11728057
> 
> 赞同：5
> 
> 时间：2012-07-30T19:13:31.207
> 
> 标签：sql-server, timezone

在 SQL Server 2008 R2 中，如果我这样做：

```
select SYSDATETIMEOFFSET() 
```

我回到格林威治标准时间-6。

运行 SQL Server 的 Windows 中的时区设置为 GMT -7。

任何想法为什么会有差异？我需要在 SQL Server 中的某个地方设置 TimeZone 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T15:01:15.397

我猜这是由于夏令时处于活动状态。您的时区正式命名为“GMT-7”，这意味着通常（不在一年中的夏令时部分）您的时间比 GMT 早 7 小时。但是在夏令时期间，该时间会被调整（通常是一个小时，但可能因时区而异）。因此，如果您当前处于夏令时，即使您处于“GMT-7”时区，您的时钟当前也只有 GMT-6（比 GMT 早 6 小时）。我怀疑 SYSDATETIMEOFFSET() 是在告诉您您目前与 GMT 的实际偏移量，而不是您的时区与 GMT 的“正常”偏移量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:18:20.890

[MSDN](http://msdn.microsoft.com/en-us/library/bb677334.aspx)说 SQL Server 使用 Windows 设置：

> SQL Server 2012 使用 GetSystemTimeAsFileTime() Windows API 获取日期和时间值。

也许您更改时区后必须重新启动 SQL Server 服务？

# javascript - 照片库的 Shadowbox 和 jQuery 冲突

> ID：11728061
> 
> 赞同：1
> 
> 时间：2012-07-30T19:13:54.573
> 
> 标签：javascript, jquery, html, shadowbox, rel

让我从几个限定词开始。我是 Javascript/jQuery 的初学者，所以所有这些都是一次很棒的学习体验，而且我发现 Stack Overflow 社区非常有帮助。

我通过 Google 和 Stack Overflow 的搜索功能进行了大量研究。

手头的问题是我有一个工作的 jQuery 脚本（由 Stack Overflow 的成员设计的单选按钮“切换器”），然后我尝试实现一个 Shadowbox 脚本来放大画廊中的图像......但是两个不在一起的时候好像不太喜欢。

我相信这与冲突的 rel 标签有关。大多数情况下，这两个脚本似乎都运行良好（没有发现错误），唯一的问题是单击时我的图像没有显示。通常图像所在的位置只有一个黑框（尽管图像丢失，但大小似乎正确）。

所有图像/js 文件都在正确的目录中，所以我已经排除了这一点。如果有人对为什么图像没有显示有任何建议，我将不胜感激。谢谢！

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<link rel="stylesheet" type="text/css" href="shadowbox/shadowbox.css">

<script type="text/javascript" src="shadowbox/shadowbox.js"></script>
<script type="text/javascript" src="jquery.js"></script>

<script type="text/javascript">
Shadowbox.init();
</script>

<script type="text/javascript">
jQuery.noConflict();

(function(jQuery){jQuery(function(){ 

jQuery('.chkbox-container :radio').on('change', function(){
  var me = jQuery(this);
  jQuery.each(jQuery('.img-container img'), function(i,v){
    var theShow = jQuery(v).attr('rel');
    theShow = theShow.split(' ');
    if(jQuery.inArray(me.val(), theShow)){
      jQuery(v).show();
    }else{
      jQuery(v).hide();
    }

  });        
});

 }); })(jQuery);

</script>

<style type="text/css">

.chkbox-container{
  float:left;
  width:95px;
}
.img-container{
  float:left;
  width:300px;
}
img{
  display:inline-block;
  width:90px;
  height:75px;
  padding:2px;
  border:1px solid black; 
  display:none;    
}​

</style>

</head>
<body>

<div class="chkbox-container">
  <input type="radio" name="THEfilter[]" value="all" checked="checked" /> All<br/>
  <input type="radio" name="THEfilter[]" value="category1" /> Category 1<br/>
  <input type="radio" name="THEfilter[]" value="category2" /> Category 2<br/>
  <input type="radio" name="THEfilter[]" value="category3" /> Category 3<br/>
</div>
<div class="img-container">
  <a href="images/rufus.jpg" rel="shadowbox[gallery]" title="June 15th - Dr. Hanna's         Office"> <img src="images/rufus-small.jpg" rel="category1" />
  <a href="images/york.jpg" rel="shadowbox[gallery]" title="June 20th - Jim's House"> <img src="images/york-small.jpg" rel="category2" />
  <a href="images/rufus2.jpg" rel="shadowbox[gallery]" title="June 3rd - Steve's Ranch"> <img src="images/rufus2-small.jpg" rel="category3" />
</div> 
```

​​​

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:21:11.093

所以我没有时间通读整篇文章，但看起来[这](https://stackoverflow.com/questions/9144577/shadowbox-stops-working-after-jquery-function-call?rq=1)可能涵盖与您面临的问题类似的内容。我从中收集到，在对 jQuery 的函数调用之后，您必须“重新初始化”shadowbox。同样，不知道这是否是您需要的，只是看起来相似并且有一个被接受且深入的答案的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:34:56.103

**使用类img**删除 CSS 的一部分就可以了。显然（显然，现在）覆盖放大图像的黑框是通过我自己的 CSS 放置的。

# javascript - 检索外部 JSON 数据

> ID：11728067
> 
> 赞同：0
> 
> 时间：2012-07-30T19:14:20.250
> 
> 标签：javascript, jquery, html, json

我需要能够为我正在制作的应用程序从网站检索和显示 JSON 数据。在将它实施到我的应用程序中之前，我认为我应该通过在其他地方测试它来确保我了解它是如何工作的。我制作了以下 HTML 和 JSON 代码来测试它，但是如果我运行应用程序，我会得到 Uncaught TypeError: Cannot read property '0' of undefined at file:///android_asset/www/projectName.html:11 我在做什么错误的？

HTML：

```
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
    </script>
<script type="text/javascript">
    $(document).ready(function(){
        $("button").click(function(){
            $.get('testData.json', function(data) {
                alert('get performed');
                var obj = eval ("(" + data + ")");
                $("p").html(obj.data_set[0].data1);
            });
        });
    });
</script>
</head>

<body>
<h2>Heading</h2>
<p>Display</p>
<button>Click me</button>
</body>
</html> 
```

JSON文件：

```
[{"data_set":{"data1":"string","data2":null,"data3":22.0}}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T07:55:01.790

看到这个jsFidle：http: [//jsfiddle.net/7Uxtg/](http://jsfiddle.net/7Uxtg/)

我包含了一些代码来遍历整个数据结构（不仅仅是一个可能的路径）。参加你需要的部分;-)

```
$(document).ready(function () {
    $("button").click(function () {
        $.ajax({
            url: '/gh/gist/response.json/37ab4c69a04628428ce2',
            dataType: 'json',
            success: function (json) {
                // to display everything
                /*$.each(json, function (k, v) {
                    $.each(v.data_set, function (key, value) {
                        $('p').append(value);
                    });
                });*/

                // to display just the string
                $('p').html(json[0].data_set.data1);
            }
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:41:39.710

您使用`eval`的是不必要的。我建议您阅读[JSON 是什么以及如何使用它](http://www.copterlabs.com/blog/json-what-it-is-how-it-works-how-to-use-it/.)。

你不需要使用`eval`on`data`因为它已经是一个 JSON 对象。您的代码的问题是您试图`data_set`作为`data`. 然而，`data`它实际上是一个数组，有一个未命名的对象。该对象具有 member `data_set`。反过来，`data_set`是一个对象，而不是一个数组，所以你不能使用`data_set[0]`. 你想要这样的东西：

```
$(document).ready(function(){
    $("button").click(function(){
        $.getJSON('testData.json', function(data) {
            alert('get performed');
            $("p").html(data[0].data_set.data1);
        });
    });
});​ 
```

看看[这个 jsfiddle](http://jsfiddle.net/jS3yW/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T19:18:26.993

更改`$.get`为`$.getJSON`或设置 $.get 中的数据类型，如下所示

**更新**

我也意识到你没有像这样正确地解析 json

```
 $.get('testData.json', function(data) {
     alert('get performed');
     $("p").html(obj[0].data_set.data1);
 },'json'); 
```

# delphi - 如何使用 TypInfo RTTI 方法为子属性项设置值？

> ID：11728068
> 
> 赞同：3
> 
> 时间：2012-07-30T19:14:21.153
> 
> 标签：delphi, rtti, delphi-2006

在我的问题中： [如何一次将“Sender”参数与“As”运算符一起用于一个以上的类](https://stackoverflow.com/questions/11335829/how-to-use-sender-parameter-with-as-operator-for-more-then-one-class-at-a-ti)

我选择 Remy Lebeau's Answer 是因为它是大多数情况下最具活力的技术。它使用 RTTI TypInfo 类。

但是当我在使用这个类时，另一个问题来了： **我们如何设置子属性值？**

```
function TRemote.UpdateQuery(DataSet: TDataSet; SQL: String): Boolean;
var
  PropInfo: PPropInfo;
begin
{ atualiza o código SQL padrão de um dataSet de consulta tipo View }
  PropInfo := GetPropInfo(DataSet, 'SQL', []);
  if not Assigned(PropInfo) then
  begin
    Result := False;
    Exit;
  end;
  try
    DataSet.Close;
    SetPropValue(DataSet, PropInfo, SQL);
    DataSet.Open;
    Result := True;
  except
    Result := False;
  end;
end; 
```

示例：我有一个 TIBQuery，我想更新 SQL 属性的文本。但是 SQL 属性是一个 TStrings 类，所以我必须使用 SQL.Text。在上面的代码中，它会引发错误“无效的属性类型”，因为我得到了一个 TStrings，后来我尝试设置一个普通的字符串。

**如何使用 GetPropInfo 访问 SQL.Text？** 是否存在具有 SQL 属性的 TIBQuery 和 TZQuery 的共同祖先，所以我可以更改为，而不是函数参数中的 TDataSet？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-30T19:39:57.487

在 Delphi 2006 中无法通过 RTTI 访问该`TStrings.Text`属性。即使是，您也不需要使用 RTTI 来访问它。由于您知道该`SQL`属性是一个`TStrings`对象，您可以简单地从该属性中检索实际的对象指针并将其类型转换为一个`TStrings`指针，然后您可以对该对象执行任何您需要执行的操作，例如：

```
function TRemote.UpdateQuery(DataSet: TDataSet; SQL: String): Boolean; 
var 
  PropInfo: PPropInfo; 
  SQLObj: TStrings;
begin 
  Result := False; 
  try 
    PropInfo := GetPropInfo(DataSet, 'SQL', [tkClass]); 
    if not Assigned(PropInfo) then Exit; 
    SQLObj := TStrings(GetObjectProp(DataSet, PropInfo, TStrings));
    if not Assigned(SQLObj) then Exit; 
    DataSet.Close; 
    SQLObj.Text := SQL; 
    DataSet.Open; 
    Result := True; 
  except 
  end; 
end; 
```

# c# - 隐藏调用函数

> ID：11728070
> 
> 赞同：0
> 
> 时间：2012-07-30T19:14:26.940
> 
> 标签：c#, .net

假设我有两个对象，`Master`并且`Slave`.

`Slave`有一个名为`Init();`. 问题`Init()`是，我需要它是虚拟的，因为它包含用户的初始化代码，但我还需要它在`Slave`添加到`Master`列表时自动调用。但是该方法不能被用户调用，它必须是自动的。

我尝试的第一件事是一个事件——创建`SlaveInitialized`一个`Slave`对象可以在其`OnSlaveInitialized`处理程序中处理的事件。但这行不通，因为有很多`Slave`对象，我无法控制它们的创建顺序和需要初始化的顺序。

我尝试的第二件事是内部方法——`internal Init()`当对象被添加到`Master`列表时会被调用，一切看起来都很好，直到我意识到这样做我不能在公共类中继承该方法。

所以我做的第三件事并且有效的是 - 我创建了一个名为的内部方法`_Init()`，它简单地调用 a `protected virtual Init()`，它解决了我的问题。

* * *

现在我想问 - 我是否只是因为我错过了这里明显的痛苦解决方案而感到愚蠢，或者这是通常的做法？什么是正确的方法？我希望我明白了我要问的问题，我尽力解释了这个问题。

谢谢你的帮助

* * *

这是我现在拥有的代码的要点。它的要点是当您通过 Master.AddSlave() 将任何 Slave 对象添加到 Master 的列表时，自动调用 Init()；

```
public class Master
{
    private List<Slave> _slaves;

    public void AddSlave(Slave slave)
    {
        // Call the "hidden" init
        slave._Init();
        _slaves.Add(slave);
    }
}

public class Slave
{        
    internal void _Init()
    {
        // Call the topmost overloaded method.
        Init();
    }

    protected virtual void Init()
    {

    }
}

public class SuperSlave : Slave
{        
    protected override void Init()
    {
        // Now this method gets called automatically
        // when Master.AddSlave adds this object.
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:25:49.337

据我所知，有两种基本方法可以做到这一点。

1.  就像您已经尝试过的那样，一个`internal InitInternal()`调用`protected virtual Init()`
2.  A `protected internal virtual Init()`，它在您的程序集之外自动成为一种`protected`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:39:54.013

虽然这并不能以您可能想要的方式回答问题，但我认为这可能是一个合适的解决方案。

如果该方法被多次调用，我建议抛出[InvalidOperationException 。](http://msdn.microsoft.com/en-us/library/system.invalidoperationexception.aspx)`Init`

描述：*当方法调用对于对象的当前状态无效时引发的异常。*

在我看来，保护你的对象不被滥用不应该是你的责任，只要文档编写得当，你的对象属性和方法名称描述了它们的作用，对于大多数使用你的代码的用户（开发人员）来说应该足够了了解它是如何工作的。

对于那些决定调用`Init`自己然后添加到`Master`对象的人，您可以抛出该异常，以便他们知道他们使用该类的方法不正确。

编辑：命名该方法`OnInit`可能是一个好主意，这样类的用户就可以指示它不应该由他们自己直接调用。

# android - Android SetInexactRepeating 根本没有触发

> ID：11728075
> 
> 赞同：4
> 
> 时间：2012-07-30T19:14:41.100
> 
> 标签：android, android-intent, alarmmanager, repeat, android-pendingintent

我有一个 android setInexactRepeating 放在我的 onCreate 里面，它永远不会触发。我在其中有一个日志，以确保它实际上正在执行，并且似乎没有触发，以及我为它计划的事件。我希望它每 10 秒熄灭一次，但即使是第一次，它似乎也不会熄灭。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Log.d("Restart", "First");
    Intent toRun = new Intent(this, AlarmRestart.class);
    PendingIntent pendingToRun = PendingIntent.getBroadcast(this, 0, toRun, 0);
    AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
    am.cancel(pendingToRun); 
    am.setInexactRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, System.currentTimeMillis(), 10000L, pendingToRun);

    Log.d("Restart", "Second");
} 
```

这是在另一个文件中：

```
public class AlarmRestart extends BroadcastReceiver {
    public void onReceive(Context context, Intent intent) {
        Log.d("Restart", "Third");
    }
} 
```

这就是“adb shell dumpsys 警报”所说的

```
com.packageName.restart
5715ms running, 64 wakeups
3 alarms: flg=0x14 cmp=com.packageName.restart/.AlarmRestart
61 alarms: flg=0x14 cmp=com.packageName.restart/.reciever.AlarmRestart 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T20:13:11.250

`AlarmRestart`是一个`BroadcastReceiver`。它不是一个`Service`. 但是您正在尝试使用`getService()` `PendingIntent`. 那不管用。更改`getService()`为`getBroadcast()`，您应该会有更好的运气。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T22:15:23.687

我发现了问题：/

```
 <reciever android:name="com.appName.restart.AlarmRestart" android:enabled="true" /> 
```

它拼写为receiver....不是receiver。说真的，XML 需要一个错误检查器。我仍然将 CommonWares 的答案标记为已接受的答案，因为他解决了我以后会遇到的其他几个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T14:44:53.010

您可以在 ELAPSED_REALTIME_WAKEUP 警报中使用 SystemClock.elapsedRealtime()，而不是 System.currentTimeMillis()

# php - 无法显示表单 - Codeigniter

> ID：11728076
> 
> 赞同：0
> 
> 时间：2012-07-30T19:14:42.383
> 
> 标签：php, codeigniter

我正在尝试这个链接上的教程来创建一个表单：

[http://codeigniter.com/user_guide/libraries/form_validation.html](http://codeigniter.com/user_guide/libraries/form_validation.html)

但是当我输入 url 时（在创建`form.php`,`formsuccess.php`和的文件之后`myform.php`）`localhost/codeigniter/index.php/form`，我得到`404 Page Not Found`.

我是 Codeigniter 的新手。有人可以帮我找出错误吗？谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:22:10.557

Codeigniter 是一个 MVC 框架，因此 url 层次结构的处理略有不同。

你可以访问 localhost/codeigniter/index.php 吗？

否：您是否有正确的 .htaccess 文件？

是的：在您的控制器文件夹中，您是否有一个名为 Form.php 的文件，其代码如下：

```
class Form extends CI_Controller {
    function index() {

    }
} 
```

# ms-access - Access 2000 数据库快速增长

> ID：11728078
> 
> 赞同：0
> 
> 时间：2012-07-30T19:14:48.270
> 
> 标签：ms-access, merge, ms-office

我们有一个在 Office Access 2003 中运行的 Access 2000 格式的数据库。

但是我们遇到了大小问题：当我合并数据库时，大小约为 250 mb。

2 天后，大小为 3 double 约 750 mb。

我怎样才能看到这种大小的增加来自哪里？我可以查看 Access 的幕后情况吗？该数据库正在为一家网球俱乐部运行，我们的员工整天都在使用该数据库。另一位程序员制作了数据库，并表示 Access 的大小增加是很常见的。

我怎样才能开始弄清楚这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T21:56:51.937

MS Access 数据库的大小可以增加。除其他外：

*   正常操作
*   导入数据
*   删除和重新创建表，而不是删除记录和重新填充
*   使用未拆分的数据库
*   使用 DAO 创建表 ( [http://support.microsoft.com/default.aspx?scid=kb%3Ben-us%3B197953](http://support.microsoft.com/default.aspx?scid=kb%3Ben-us%3B197953) )
*   设计工作

# javascript - jQuery UI 滑块 - 无法调用未定义的方法“addClass”

> ID：11728079
> 
> 赞同：19
> 
> 时间：2012-07-30T19:14:55.403
> 
> 标签：javascript, jquery-ui

几个月前我有一个旧的 jQuery UI 滑块，它工作得很好，但现在我似乎得到了一个异常读数：无法调用未定义的方法“addClass”。我检查了传递到滑块的值，它们是常规的 Javascript 日期。

```
 $('#dateFilter').click(function() {
    return $('#sliderContainer').slideToggle(200);
  });

  $(function() {
    var endFiling, startFiling;
    startFiling = Date.parse($('#startFiling').val());
    endFiling = Date.parse($('#endFiling').val());
    return $('#filingDateSlider').slider({
      range: true,
      min: startFiling,
      max: endFiling,
      step: 86400000,
      values: [startFiling, endFiling],
      slide: function(event, ui) {
        var eD, end, sD, start;
        sD = new Date(ui.values[0]);
        start = dateFormat(sD);
        eD = new Date(ui.values[1]);
        end = dateFormat(eD);
        $('#filingStartDate').text(start);
        return $('#filingEndDate').text(end);
      }
        }); 
```

我可能会收到这个新错误是否有特殊原因？

[http://i.imgur.com/xC2E6.jpg](https://i.imgur.com/xC2E6.jpg)

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-24T20:56:18.277

对于任何阅读此问题的人，如果您从 CDN 中提取，请尝试从最新的 jQuery UI 版本中提取。我也遇到了这个问题，通过使用更高版本的 jQuery UI 解决了这个问题。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-08-06T06:49:59.573

我通过在“min”、“max”和“values”中使用整数解决了这个错误。也许您正在设置空值。

jQuery Slider 规范说：

> *   最大数量 默认值：100
> *   最小值 默认值：0
> *   值 数字 默认值：0

所以“值”是一个数字数组。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-09T16:56:27.933

对于仍然遇到此问题的任何人，请确保您添加的值 ( `min`、`max`和`values`都是 NUMBERS 而不是 STRINGS！

一直在尝试诊断以下代码失败的问题：

```
t.slider({
  range : true,
  min   : t.attr('data-min'),
  max   : t.attr('data-max'),
  values: [t.attr('data-min'), t.attr('data-max')],
  step  : 1.00,
  slide : function (e, ui) {
    var
      v = (s == 'price') ? '&pound;' + ui.values[0] + ' - &pound;' + ui.values[1] : ui.values[0] + ' - ' + ui.values[1] + 'kg'
    $('#filter-' + s).html(v)
  },
  stop  : function () {
    Items.filter()
  }
}) 
```

在`t.attr()`返回 STRING 时，Slider 未能`valueMouse`在 jQuery UI 版本 1.10.1 的第 12843 行设置。它不是一个值，而是返回一个字符串（类似于`39.99549.21`(min value of `39.99`concatenated with `549.21`- a percent * max value)

希望对某人有所帮助！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-02T08:43:38.387

我的最新版本也有这个问题。解决方案很简单：使用**parseInt()**将动态值传递给滑块

jQuery ui 滑块的 Setter 示例：

```
 $("#mySlider").slider("option",{min: parseInt(value.min), max:parseInt(value.max),value: parseInt(value.active)}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-20T16:53:53.860

另一种可能性 - 如果滑块缺少最小值或最大值，则会出现此错误。如果您的 startFiling 或 endFiling 未计算日期，则滑块代码在尝试计算新句柄位置时会失败。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-09T11:17:45.217

使用未修改的 jQuery-UI.min.js 解决了这个问题。使用自定义脚本导致错误，即 jQuery-UI-custom.js

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-11T05:16:08.040

jQuery UI Slider 插件最小和最大**选项**只接受数字。因此，根据您的要求将它们解析为整数或浮点数。

有关详细信息，请访问链接 - [http://api.jqueryui.com/slider/](http://api.jqueryui.com/slider/)

# javascript - 网站内嵌登录页面

> ID：11728085
> 
> 赞同：0
> 
> 时间：2012-07-30T19:15:42.033
> 
> 标签：javascript, html, login, embed

我正在开发一个网站，该网站利用来自外部网站的信息并将其呈现在一个整洁的图表中。

问题是用户必须登录该网站才能查看信息（例如登录 facebook）。

我正在尝试开发一些东西，比如将该外部网站的登录页面嵌入到我的网站中，然后让用户以这种方式登录（见下文）

```
<object data=http://www.website.com  width="600" height="400"> <embed id="test" src=http://www.website.com  width="600" height="400"> </embed> Error: Embedded data could not be displayed. </object> 
```

我的问题是您如何知道用户是否已登录？在嵌入的窗口中，我可以登录并看到页面，但是我的网站不知道我已经登录了。有没有办法主动检查嵌入页面的URL，看看是否有变化（即你已经登录)?

我试过只是刷新页面，但嵌入对象的源链接是相同的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:30:05.267

出于安全/技术原因，您无法直接检索用户是否登录到其他页面，除非有大多数社交媒体网站都有的 API。如果您拥有该页面，您也可以构建一个。

否则，如果您有足够的可用流量，您还可以通过提交到服务器的表单请求登录数据，然后做一些事情让服务器登录到其他网站并检索您想要的信息。但是，由于多种原因，这在高负载环境（许多用户）中是不可行的：

*   服务器必须经常注销和登录，这将占用大量性能

*   这也会导致大量流量，因为除了请求一些网页并解析它之外，我看不到您登录后如何检索信息

*   最后，由于在短时间内来自同一 IP 的所有这些请求，您正在查看的任何网站的服务器最终都会拒绝您访问，因为您一直在向它发送垃圾邮件请求。

*   当然，您可以使用在用户登录后隐藏的 iframe（您可以检测它何时重新加载并通过隐藏它`display:none`），然后解析其内容，但我怀疑这会起作用，因为对 iframe 内容的访问受到限制出于安全原因。

# mapreduce - 你能得到一个*物理*本地的 Google Compute Engine 实例集群吗？

> ID：11728093
> 
> 赞同：3
> 
> 时间：2012-07-30T19:16:22.637
> 
> 标签：mapreduce, cluster-computing, google-compute-engine

Google Compute Engine 允许您获得一组*语义上*本地的实例，即只有它们可以相互通信，所有外部访问都必须通过防火墙等。如果我想运行 Map-Reduce 或其他类型的集群会导致高网络流量的作业，那么我还想要*物理上*本地的机器（例如，在同一个机架上）。查看 API 和初始文档，我看不到任何要求的方法；有人知道吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T19:39:08.697

GCE 目前不支持指定机架位置。但是，我们构建的系统可以在大量实例以完全连接的方式相互通信时运行良好，只要它们在同一个区域中。

这是允许 MapR 接近 hadoop terasort 记录的原因之一。您可以在 IO 的 Criag Mcluckie 演讲视频中看到这一点： [https ://developers.google.com/events/io/sessions/gooio2012/302/](https://developers.google.com/events/io/sessions/gooio2012/302/)

最好的查看方法是测试您的应用程序并查看它是如何工作的。

# objective-c - 对象未初始化

> ID：11728094
> 
> 赞同：1
> 
> 时间：2012-07-30T19:16:24.077
> 
> 标签：objective-c, xcode, ios4

所以我试图在Objective-C中创建一个Circle类。我知道 Java 和 OOP，以及一点 Objective-C，但我不知道为什么我的类不会初始化。这是Circle.h：

```
#import <Foundation/Foundation.h>
#import "Image.h"

@interface Circle : NSObject
{
    Image *img;
    CGPoint pos;
}

-(id) init;
-(void) draw;

@end 
```

这是 Circle.m 文件：

```
#import "Circle.h"

@implementation Circle

-(id) init{
    self = [super init];
    if (self != nil) {
        img = [[Image alloc] initWithImage:[UIImage imageNamed:@"circle.png"]];
        pos = CGPointMake((CGFloat)200, (CGFloat)200);
    }
    img = [[Image alloc] initWithImage:[UIImage imageNamed:@"circle.png"]];
    pos = CGPointMake((CGFloat)200, (CGFloat)200);
    return self;
}

-(void) draw{
    [img renderAtPoint: pos centerOfImage: YES];
}

@end 
```

然后在我的主要课程中，我调用：

```
//player is the name of the circle object (Circle *player;)
[player init]; 
```

在我的渲染方法中，我调用：

```
[player draw]; 
```

当我运行我的应用程序时，图像不会绘制，有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:38:17.080

你可能想说：

```
player = [[Circle alloc] init]; 
```

而不仅仅是`[player init]`，因为如果 player 为 nil （成员的默认值），后者将什么也不做。

# javascript - Mootools Element.prototype 错误

> ID：11728096
> 
> 赞同：1
> 
> 时间：2012-07-30T19:16:37.707
> 
> 标签：javascript, mootools

我想在 mootools 的 Element 成员中实现一些函数和变量。我有这样的东西

```
Element.prototype.currentChild = this.getFirst();
Element.prototype.scrollToNext = function(delta, tag){ .... } 
```

之后我创建一个新元素并将鼠标滚轮事件绑定到一个跨度并访问它的 currentChild。

```
body_container = new Element('div', {
events:{
            'mousewheel': function(e){
                var elem = new Element(this);
                elem.currentChild.setStyle('background-color', 'transparent');
                elem.scrollToNext(e.wheel);
                elem.currentChild.setStyle('background-color', '#C6E2FF');
                e.stop();
            }
        }
    }); 
```

问题是我收到以下错误：

> 未捕获的类型错误：对象 [对象窗口] 没有方法“getFirst”

你知道这可能是什么原因吗？

LE：是的，我期待“this”成为一个元素。但我不明白为什么它会是 Window 类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:26:14.787

使用 Implement 更改原型。并且您将需要一个函数，不能说它`something.prototype.method = this.somethingsMethod`没有绑定在方法的执行上下文之外。

```
Element.implement({
    currentChild: function() {
        return this.getFirst();
    },
    scrollToNext: function() {}
}); 
```

MooTools 也有别名。

```
Element.alias('currentChild', 'getFirst'); 
```

[https://github.com/mootools/mootools-core/blob/master/Source/Core/Core.js#L223-225](https://github.com/mootools/mootools-core/blob/master/Source/Core/Core.js#L223-225) - 当您不想重新实现时，类型方法的别名。

老实说，你为什么不能只使用元素存储呢？

```
'mousewheel': function(e) {
    var elem = document.id(this),
        first = elem.retrieve('currentChild');

    first || elem.store('currentChild', first = elem.getFirst());

    first.setStyle('background-color', 'transparent');
    elem.scrollToNext(e.wheel);
    first.setStyle('background-color', '#C6E2FF');
    e.stop();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:49:56.400

感谢您的快速回答。同时，我找到了一种基于 Dimitar first solution 的方法。它看起来像这样：

```
Element.implement({ 
    currentChild: function(){ 
        if(!this._currentChild) this._currentChild = this.getFirst(); 
        return this._currentChild; 
    }
 } 
```

# android - iOS/Objective-C 相当于 Android 的 AsyncTask

> ID：11728098
> 
> 赞同：69
> 
> 时间：2012-07-30T19:16:40.250
> 
> 标签：android, ios, asynchronous, android-asynctask

我熟悉`AsyncTask`在 Android 中使用：创建子类，调用子类`execute`的实例并`onPostExecute`在 UI 线程或主线程上调用。**iOS中的等价物是什么？**

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-07-30T19:19:26.387

## 回答原始问题：

Grand Central Dispatch (GCD) 提供了一种在后台执行任务的机制，尽管它的工作方式在结构上与 AsyncTask 不同。要异步执行某些操作，您只需要创建一个队列（如线程），然后传递一个块以`dispatch_async()`在后台执行。我发现它比 AsyncTask 更整洁，因为它不涉及子类化；无论您有想要在后台执行的代码，它或多或少都是即插即用的。一个例子：

```
dispatch_queue_t queue = dispatch_queue_create("com.yourdomain.yourappname", NULL);
dispatch_async(queue, ^{
    //code to be executed in the background
}); 
```

## 其他要点：

### 1) 回调

如果您想在后台执行任务并在后台任务完成时更新 UI（或在另一个线程上执行某些操作），您可以简单地嵌套调度调用：

```
dispatch_queue_t queue = dispatch_queue_create("com.yourdomain.yourappname", NULL);
dispatch_async(queue, ^{
    //code to be executed in the background
    dispatch_async(dispatch_get_main_queue(), ^{
        //code to be executed on the main thread when background task is finished
    });
}); 
```

### 2) 全局队列

在创建队列时，还可以使用该`dispatch_get_global_queue()`函数获取具有一定优先级（如`DISPATCH_QUEUE_PRIORITY_HIGH`）的全局调度队列。这些队列是普遍可访问的，并且在您想将多个任务分配给同一个线程/队列时很有用。请注意，内存完全由 iOS 为您管理。

### 3) 内存

有时关于内存管理和调度队列会有些混淆，因为它们有自己的`dispatch_retain`/`dispatch_release`功能。但是，请放心，ARC 将它们视为 Objective-C 对象，因此您无需担心调用这些函数。参考[rob mayoff](https://stackoverflow.com/a/8619055/791018)关于 GCD 和 ARC 的出色回答，您可以看到文档描述了 GCD 队列与 Objective-C 对象的等价性：

```
* By default, libSystem objects such as GCD and XPC objects are declared as
* Objective-C types when building with an Objective-C compiler. This allows
* them to participate in ARC, in RR management by the Blocks runtime and in
* leaks checking by the static analyzer, and enables them to be added to Cocoa
* collections.
*
* NOTE: this requires explicit cancellation of dispatch sources and xpc
*       connections whose handler blocks capture the source/connection object,
*       resp. ensuring that such captures do not form retain cycles (e.g. by
*       declaring the source as __weak).
*
* To opt-out of this default behavior, add -DOS_OBJECT_USE_OBJC=0 to your
* compiler flags.
*
* This mode requires a platform with the modern Objective-C runtime, the
* Objective-C GC compiler option to be disabled, and at least a Mac OS X 10.8
* or iOS 6.0 deployment target. 
```

### 4）多个任务/块

我要补充一点，如果一个任务在多个异步活动完成之前无法继续，GCD 有一个分组接口支持同步多个异步块。Jörn Eyrich 和 ɲeuroburɳ[在这里](https://stackoverflow.com/questions/11909629/waiting-until-two-async-blocks-are-executed-before-starting-another-block)对这个话题进行了详尽的解释。如果您需要此功能，我强烈建议您花几分钟时间仔细阅读他们的两个答案并了解它们之间的差异。

如果您愿意，该[文档会提供有关该主题的大量信息。](https://developer.apple.com/library/ios/documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html#//apple_ref/doc/uid/TP40008079)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-10-26T12:34:42.620

iOS 中没有相应的类，但您可以使用队列来模拟它。您可以致电：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    //Your code to execute in background...
}); 
```

对于异步任务并在您的异步代码中调用下一个队列以在视图中执行某些操作...：

```
dispatch_async(dispatch_get_main_queue(), ^{
    //Your code to execute on UIthread (main thread)
}); 
```

然后，使用这两个队列，您可以创建一个 asyncTask 类，将该类添加到您的项目中以实现它们：

* * *

```
//
//  AsyncTask.h
//
//  Created by Mansour Boutarbouch Mhaimeur on 25/10/13.
//

#import <Foundation/Foundation.h>

@interface AsyncTask : NSObject

- (void) executeParameters: (NSArray *) params;
- (void) preExecute;
- (NSInteger) doInBackground: (NSArray *) parameters;
- (void) postExecute: (NSInteger) result;
@end 
```

* * *

```
//
//  AsyncTask.m
//
//  Created by Mansour Boutarbouch Mhaimeur on 25/10/13.
//

#import "AsyncTask.h"

@implementation AsyncTask

- (void) executeParameters: (NSArray *) params{
    [self preExecute];
    __block NSInteger result;
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        result = [self doInBackground:params];
        dispatch_async(dispatch_get_main_queue(), ^{
            [self postExecute:result];
        });
    });
}

- (void) preExecute{
    //Method to override
    //Run on main thread (UIThread)
}

- (NSInteger) doInBackground: (NSArray *) parameters{
    //Method to override
    //Run on async thread (Background)
    return 0;
}

- (void) postExecute: (NSInteger) result{
    //Method to override
    //Run on main thread (UIThread)
}

@end 
```

* * *

这是我在项目中使用的一个示例：

* * *

```
#import "AsyncTask.h"
#import "Chat.h"

@interface SendChatTask : AsyncTask{
    NSArray * chatsNotSent;
}

@end 
```

* * *

```
#import "SendChatTask.h"

@implementation SendChatTask

- (void) preExecute{
    //Method to override
}

- (NSInteger) doInBackground: (NSArray *) parameters{
    //Method to override
    NSString *sendChatsURL = [NSString stringWithFormat:@"%@%@%@",HOST, NAMESPACE,URL_SEND_CHAT];
    chatsNotSent = [parameters objectAtIndex:0];

    NSString *response;
    NSMutableDictionary *params = [[NSMutableDictionary alloc] init];
    //...
    NSError *error;
    NSData *jsonData = [NSJSONSerialization dataWithJSONObject:[ChatJSONParser wrapChatArray: chatsNotSent] options:0 error:&error];
    NSString *JSONString = [[NSString alloc] initWithBytes:[jsonData bytes] length:[jsonData length] encoding:NSUTF8StringEncoding];

    [params setObject:JSONString forKey:@"chats"];

    response = [HTTPClient executePOST:sendChatsURL parameters:params];

    if([respuesta isEqualToString:@"true"]){
        return 1;
    }else{
        return -1;
    }
}

- (void) postExecute: (NSInteger) result{
    //Method to override
    if (result == 1) {
        for (Chat *chat in chatsNotSent) {
            chat.state = STATE_NOT_SENT;
            [chat save];
            AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
            [appDelegate refreshChat];
        }
    } else {

    }
}

@end 
```

* * *

以及以下调用：

```
[[[SendChatTask alloc] init] executeParameters:[NSArray arrayWithObjects: chatsNotSent, nil]]; 
```

您可以添加`publishProgress()`更新方法和相应的...我暂时不使用它，因为我在后台服务中调用我的异步任务。

我希望它会有所帮助。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-30T19:37:29.670

如果您的目标是较早的 iOS 版本（比 iOS 4 的 Grand Central Dispatch），您可以使用 NSObject performSelector 方法

*   **在后台**线程上执行[performSelectorInBackground:withObject:](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/performSelectorInBackground%3awithObject%3a)

*   并**在 MainThread** [performSelectorOnMainThread:withObject:waitUntilDone 上执行：](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/performSelectorOnMainThread%3awithObject%3awaitUntilDone%3a)

这是一个例子：

```
[self performSelectorInBackground:@selector(executeInBackground) withObject:nil];

-(void) executeInBackground
{
    NSLog(@"executeInBackground");

    [self performSelectorOnMainThread:@selector(executeOnMainThread) withObject:nil waitUntilDone:NO];
}

-(void) executeOnMainThread
{
    NSLog(@"executeOnMainThread");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-08T13:49:19.700

# 斯威夫特 3

在 Android 中，当我想在后台线程上运行任务并在完成后更新 UI 时，我使用了`AsyncTask`（[示例](https://stackoverflow.com/questions/25647881/android-asynctask-example-and-explanation/25647882#25647882)）。现在，当我制作我的应用程序的 iOS 版本时，我使用[Grand Central Dispatch](https://developer.apple.com/library/ios/documentation/Performance/Reference/GCD_libdispatch_Ref/) (GCD) 来做同样的事情。以下是使用 Swift 完成的方法：

```
DispatchQueue.global(qos: .background).async {

    // code to be run on a background task

    DispatchQueue.main.async {

        // code to be run on the main thread after the background task is finished
    }
} 
```

# 笔记

*   [Swift 的 Grand Central Dispatch 教程](https://www.raywenderlich.com/79149/grand-central-dispatch-tutorial-swift-part-1)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-05T08:53:41.107

这是带有 PusblishProgress 的 ac# Xamarin.iOS 版本：

```
internal abstract class AsyncTask : NSObject
{
    protected abstract nint DoInBackground(NSArray parameters);

    protected abstract void PostExecute(nint result);

    public void ExecuteParameters(NSArray @params)
    {
        this.PreExecute();

        DispatchQueue.GetGlobalQueue(DispatchQueuePriority.Default).DispatchAsync(() =>
        {
            //We're on a Background thread
            var result = this.DoInBackground(@params);
            DispatchQueue.MainQueue.DispatchAsync(() => {
                // We're on the main thread
                this.PostExecute(result);
            });
        });

    }

    protected abstract void PreExecute();

    protected void PublishProgress(NSArray parameters)
    {
        InvokeOnMainThread(() => {
            // We're on the main thread
            this.OnProgressUpdate(parameters);
        });
    }

    protected abstract void OnProgressUpdate(NSArray parameters);
} 
```

和实施：

```
internal class MyAsyncTask : AsyncTask
{
    protected override void OnProgressUpdate(NSArray parameters)
    {
        // This runs on the UI Thread
    }

    protected override nint DoInBackground(NSArray parameters)
    {
        // Do some background work
        // ....
        var progress = NSArray.FromObjects(1, "Done step 1");
        PublishProgress(progress);

        return 0;
     }

     protected override void PostExecute(nint result)
     {
         // This runs on the UI Thread

     }

     protected override void PreExecute()
     {
        // This runs on the UI Thread

     }
} 
```

# c# - WPF 中的集体事件处理程序

> ID：11728107
> 
> 赞同：0
> 
> 时间：2012-07-30T19:17:12.947
> 
> 标签：c#, wpf, textbox, event-handling

在我的 WPF 窗口中，当光标位于文本框上时，我希望文本框具有略带蓝色的背景。为此，我创建了两个简单的事件处理程序（GotFocus 和 LostFocus）。

```
private void textBox1_GotFocus(object sender, RoutedEventArgs e)
        {
            textBox1.Background = (Brush)new BrushConverter().ConvertFrom("#FFE6E6FF");
        }

        private void textBox1_LostFocus(object sender, RoutedEventArgs e)
        {
            textBox1.Background = Brushes.White;
        } 
```

有没有一种方法可以将每个文本框定向到一个事件处理程序，该事件处理程序为相应的文本框提供背景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:19:41.800

很简单。将事件挂钩放在所有文本框的最外层容器上：

```
<Window TextBox.GotFocus="textBox1_GotFocus" TextBox.LostFocus="textBox1_LostFocus">
   <TextBox ... >
   <TextBox ... >
   <TextBox ... >
</Window> 
```

要使其在正确的文本框上运行，请将“sender”参数转换为文本框：

```
private void textBox1_GotFocus(object sender, RoutedEventArgs e)
{
    ((TextBox)sender).Background = (Brush)new BrushConverter().ConvertFrom("#FFE6E6FF");
} 
```

# rdlc - SSRS 报告 - 按日期时间字段的日期部分分组

> ID：11728108
> 
> 赞同：0
> 
> 时间：2012-07-30T19:17:50.793
> 
> 标签：rdlc, reporting-services, rdl

我正在编写一份显示日期、时间和其他几列的 SSRS 报告。

我的 SP 只返回日期列（其中包含时间部分）和其他一些列。

在报告中，我想按日期部分分组并显示所有详细信息，包括详细信息组中的时间（我使用格式化选项“T”仅显示日期列中的时间）。

对于我使用的日期分组：

```
=FormatDateTime(Fields!TxDate.Value, DateFormat.ShortDate) 
```

这似乎工作。但是，如果我尝试对其他列进行排序，则它不起作用。对此有何想法/建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:13:34.513

如果您要在数据集中添加一个基于原始日期+时间列但仅包含日期的额外列，则可能会更容易。然后您可以使用它对该列进行简单的分组。

例如，如果数据集基于 SQL 查询，并且您的 date+time 列称为`[Date]`，则在查询中添加另一列 as`CONVERT(DATE, [Date]) AS DateOnly`或类似内容。

# html - 如何将字体安装到 Wordpress 网站？

> ID：11728109
> 
> 赞同：1
> 
> 时间：2012-07-30T19:17:50.450
> 
> 标签：html, wordpress, fonts, web, webfonts

我正在制作一个音乐博客，我希望能够在我的 Wordpress 网站上使用 BebasNeueRegular。显然，考虑到[Goldenscissors](http://goldenscissors.info/2012/07/27/telepopmusik-smile-natural-high-remix/)在他们的网站上执行此操作是可能的（侧面小部件的标题和帖子的标题都使用 BebasNeueRegular）。

我对此进行了谷歌搜索，只找到了如何将谷歌网络字体安装到 Wordpress，但 BebasNeueRegular 不是谷歌网络字体。有什么帮助吗？

[PS你可以在这里](http://theultralinx.com/2011/10/bebasneueregular-font-download.html)下载字体。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T19:22:48.823

阅读有关[font-face 的](http://sixrevisions.com/css/font-face-guide/)信息。

在您的示例中，您可以自己在 style.css 中看到这个片段：

```
@font-face {
    font-family: 'BebasNeueRegular';
    src: url('fonts/BebasNeue-webfont.eot');
    src: url('fonts/BebasNeue-webfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/BebasNeue-webfont.woff') format('woff'),
         url('fonts/BebasNeue-webfont.ttf') format('truetype'),
         url('fonts/BebasNeue-webfont.svg#BebasNeueRegular') format('svg');

} 
```

# selenium - 如何使用 Selenium 检查 URL 的参数

> ID：11728110
> 
> 赞同：0
> 
> 时间：2012-07-30T19:17:50.927
> 
> 标签：selenium, python-3.x

在使用 Selenium Python 检查 url 中的参数时，我需要帮助。

问题：我有一个网址，例如：[http ://www.test.com/hi13docs?layouttype=Hello&env=prod&id=16&sitename=US&vendorid=testing&plid=0ENG&os=windows](http://www.test.com/hi13docs?layouttype=Hello&env=prod&id=16&sitename=US&vendorid=testing&plid=0ENG&os=windows)

上面的网址是重定向后的。所以，我想检查上述参数，如 Sitename、id、Vendorid 值是否正确（假设上述值 US、16、测试是正确的）。

任何人请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:45:05.587

我相信你可以使用类似的东西

```
url = selenium.getLocation(); 
```

然后拆分字符串并将参数与字符串变量中的参数进行比较。

# javascript - 如何在不使用 express 的情况下为 node.js 和 socket.io 制作的 Web 工具创建基本身份验证、登录系统

> ID：11728111
> 
> 赞同：3
> 
> 时间：2012-07-30T19:18:00.780
> 
> 标签：javascript, node.js, express, passport.js

我开发了一个使用 node.js 和 socket.io 的网络工具。这是一个单页网站，使用 node.js 从社交媒体网站获取数据并显示在同一页面上。我想为网站添加一个特定于站点的登录系统，但不想使用“ [Express](http://expressjs.com/) ”或“ [Passport](http://passportjs.org/) ”，因为它在不需要时给网站增加了很多过载。

我是 node.js 的新手，想知道是否需要使用 node.js 制作登录系统来维护登录用户的会话？

注意：我需要维护会话来记录用户数据，例如登录时间、搜索查询，并且可能是热图。

提前致谢。如果需要，我可以详细解释问题的特定部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:38:43.973

从长远来看，使用 Express 或 Passport（或至少一些 connect 的中间件）肯定会更容易（如果您的应用程序增长），但如果您想走“手动”路线，这里有一些起点：

1.  Cookie 解析器：您不希望将每个请求的身份验证详细信息作为参数发送，因此您需要将会话详细信息放在 cookie 中。[您可以使用 headers](http://nodejs.org/api/http.html#http_response_setheader_name_value)手动设置 cookie ，或者使用整齐地[包装 API](https://github.com/jed/cookies)的节点模块。

2.  会话存储：您可以将所有“登录时间、查询和热图数据”放在 cookie 中，但在每个请求中仅在 cookie 中发送会话 id 并将其他数据服务器端保存在数据库中会更简洁。选项有[mongoose](https://github.com/LearnBoost/mongoose)、 redis 等。

由于阅读源代码非常有教育意义，因此请阅读 connect 的[cookieParser](http://www.senchalabs.org/connect/cookieParser.html)和[cookieSession](http://www.senchalabs.org/connect/cookieSession.html)。代码不多，API 文档包含实际源代码，因此很容易学习。享受！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:39:29.370

从你如何表达这个问题来看，我相信使用 Express 模块（Passport 或类似模块）的开销是你最不担心的;-)

首先，您需要弄清楚要使用哪些机制。

对于身份验证，您将使用用户名/密码组合，还是使用第三方服务，如 Google、Facebook、Twitter 等（“OAuth”之类）？除非您使用某些第三方服务，否则您还需要处理注册（可能还需要验证电子邮件地址等）。即使对于用户名/密码组合，您会自己推出还是使用基于浏览器的“基本身份验证”机制？

身份验证后，您需要一个会话机制来存储一些会话令牌以识别（并验证服务器端）您已通过身份验证。它们通常存储在浏览器 cookie 中，只要您需要，它们就可以轻松地持久化，并通过服务器端数据库中的令牌与每个相关请求进行验证。

最后，您需要一个注销机制和一个“我忘记密码”程序（最初很可能是手动的......）。

如果这一切对您来说相当新，我建议您先尝试使用现成的东西（您自己提到 Passport），然后当您掌握了基础知识后，请随时用您自己的东西替换它。使用 Passport 或 Everyauth 的“好处”是它们涵盖了更多选项，您实际上将能够自己编写，因此一旦您调整系统以使用其中之一，添加 Facebook 登录和类似内容将很多更容易（有人已经为你想出了大部分的东西）。

老实说，在 Node 生态系统中处理此类事情的大多数模块都是在您决定使用的任何解决方案之上的相当薄的包装器，因此开销很可能不会很大，您很可能需要很好地理解无论如何使用它们的问题。在光谱的另一端是现成的系统，如 Drupal 等，一切都可以正常工作，但是就制作自己的系统而言，您有些局限。

在某些用例中，绝对有必要从头开始编写自己的代码，但是没有什么可以阻止您稍后在必要时/如果需要（并且在您在其他人编写的代码的帮助下掌握了基础知识之后）这样做。

祝你好运！

# ruby - 编组和未定义的属性/类

> ID：11728120
> 
> 赞同：1
> 
> 时间：2012-07-30T19:18:36.247
> 
> 标签：ruby

我正在使用 ruby​​ 编组在两个客户端之间发送数据。每个客户端都有一组类定义，它们将用于帮助加载封送数据。定义存储在外部 ruby​​ 文件中，他们可以随时加载（但通常在启动时）

一个简单的用例是

*   客户端 A 编组转储数据并将其发送给客户端 B
*   客户端 B 编组加载数据，然后将其写入文件

但是，有时一个客户端发送的数据包含其他客户端定义中未定义的对象，在这种情况下，另一个客户端应相应地更新其定义。

它可能是一个新的实例变量，应该添加到类的定义中，`xyz`或者它可能完全是一个新的类。

`Marshal#Load`当前只是在遇到未定义的变量时抛出异常（例如：未定义的类/方法`abc`）。

有没有办法让我接受这个异常并相应地更新定义，以便客户端可以愉快地读取数据并将其写出？

所有类都将包含 Marshal 已经知道如何编码/解码的数据，例如字符串、数组、哈希、数字等。不会有任何需要自定义`dump`/`load`方法的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:20:21.270

My solution would be to automatically create the class (and constant hierarchy, i.e. `Foo::Bar::Baz`) and make the class autorespond to attribute access attempts.

```
class AutoObject
  def method_missing(*args,&b)
    if args.size == 1
      name = args[0]
      if instance_variable_defined? "@#{name}"
        self.class.send :attr_accessor, name
        send(*args)
      else
        super
      end
    elsif args.size == 2 && args[0].to_s[/=$/]
      name = args[0].to_s[0...-1]
      if instance_variable_defined? "@#{name}"
        self.class.send :attr_accessor, name
        send(*args)
      else
        super
      end
    end
  end
end

def Marshal.auto_load(data)
  Marshal.load(data)
rescue ArgumentError => e
  classname = e.message[%r(^undefined class/module (.+)$), 1]
  raise e unless classname

  classname.split("::").inject(Object) do |outer, inner|
    if !outer.const_defined? inner
      outer.const_set inner, Class.new(AutoObject)
    else
      outer.const_get inner
    end
  end
  retry
end 
```

This could easily be extended to log all classes created, and even to determine what instance variables they might have. Which could then aid you in updating the files, perhaps programatically.

# css - 悬停图像和文本更改

> ID：11728121
> 
> 赞同：0
> 
> 时间：2012-07-30T19:18:47.760
> 
> 标签：css, image, text, hover

我正在寻找的是一种方式，当图像悬停在文本上方时，文本会发生变化。我已经搜索了该站点，而所有解决方案似乎都不适合我。

这是我的代码。

```
 <div class="four columns full-height">
        <div class="projects"><a href="#">Collectif Neuf</a></div> 
        <a href="#"><img class="vertical" src="images/projects/c9.jpg"></a>
        </div> 
```

我也试过这个：[CSS image hover change color of text](https://stackoverflow.com/questions/8971133/css-image-hover-change-color-of-text)

它仅在 img 超过我的 .projects div 时才有效。但是我的 .projects div 需要超过 img 才能正确显示。

感谢您的帮助。

**编辑**

我刚刚意识到我没有很好地解释我在寻找什么。通过文本更改，我的意思是当图像悬停时，链接将带有下划线。现在链接只有在悬停时才会显示下划线。

对此真的很抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:37:19.747

没有jQuery：

```
<script>
function domover(el) {
    el.parentNode.parentNode.firstChild.firstChild.style. = 'Hi!';
el.parentNode.parentNode.firstChild.firstChild.style.textDecoration  = 'underline';
}

function domout(el) {
    el.parentNode.parentNode.firstChild.firstChild.innerHTML = 'Bye';
el.parentNode.parentNode.firstChild.firstChild.style.textDecoration  = 'none';
}
</script>

 <div class="four columns full-height"><div class="projects"><a href="#" style="text-decoration:none">Hi</a></div> 
    <a href="#"><img class="vertical" src="http://i.imgur.com/l5WLB.jpg" onmouseover="domover(this)" onmouseout="domout(this)"></a>
 </div> 
```

测试： http: [//pastehtml.com/view/c6kbpxrzp.html](http://pastehtml.com/view/c6kbpxrzp.html)

Notice that, for this to work, there must be no spaces (nor newlines) between the first elements.

# c - 在c中嵌入lua代码

> ID：11728128
> 
> 赞同：2
> 
> 时间：2012-07-30T19:19:01.900
> 
> 标签：c, lua

我正在尝试遵循[此处](http://heavycoder.com/tutorials/lua_embed.php)给出的关于将 lua 嵌入 C 的基本指南。我将代码逐字复制到我自己的 embed.c 文件中，并执行列出的确切编译器命令：

```
cc -o embed embed.c \
            -I/usr/local/include \
            -L/usr/local/lib \
            -llua -llualib 
```

我得到错误：

```
embed.c:19:14: error: invalid storage class for function ‘openlualibs’ 
```

之后，我将函数移到 之外`main`，再次编译，得到：

```
/usr/bin/ld: cannot find -llualib 
```

我不知道为什么我不能编译这个。lua 安装正确。有没有其他人遇到过这些问题？如果这是一个糟糕的教程，请随时简单地将我引向一个击球手。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T19:30:39.113

在某些 Linux 发行版上，您可能需要安装`lua-devel`（或类似名称的）包，以便获得针对该包编译和链接项目所需的正确头文件和库符号链接。`liblualib-<version>.so.<version>`例如，如果你确实有一个，`liblualib-5.so.5.0`你可能需要安装 devel 包。

从 lua 5.1 开始，`liblualib`不存在。以下是发布公告： http: [//lua-users.org/lists/lua-l/2005-05/msg00186.html](http://lua-users.org/lists/lua-l/2005-05/msg00186.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T20:04:08.187

嵌入 Lua 时，我遇到了一些类似的问题。我发现对我有用的是链接动态链接库（dl）和数学库（m）。如果您不使用 lmath 标准库，则可能不需要数学库。

```
cc -o embed embed.c -I/usr/local/include -L/usr/local/lib -llua -lm -ldl 
```

当然，这假设 /usr/local/ 是 Lua 文件的安装位置，这可能是正确的。

至于您链接到的教程，我认为它可能已经过时了。除了不再存在的 liblualib 之外，还有单独的函数可以打开每个标准库。这些是 luaopen_* 函数。[这是相关的 5.1 参考手册条目。](http://www.lua.org/manual/5.1/manual.html#5)（我假设您使用的是 5.1，因为这似乎是包中可用的版本） 至于更好的教程，我建议使用[Programming in Lua](http://www.lua.org/pil/24.html)书。不幸的是，它是为 Lua 5.0 编写的。它仍然主要相关，但我建议您也查看 5.1 参考手册的相关部分。

# mysql - 在 MySQL 中选择 outfile 时，如何将 ENUM 转换为整数值？

> ID：11728132
> 
> 赞同：1
> 
> 时间：2012-07-30T19:19:14.853
> 
> 标签：mysql, sql, csv, enums

描述基本上是问题。

我有一个 CSV 文件，我将其加载到数据库中的表中。然后我 (SELECT * FROM tablename into OUTFILE '...') 并检查两个 CSV 是否相等。我这样做是为了确保正确加载数据库。

我的问题是其中一个字段是 ENUM 类型。我用来加载表的 CSV 包含整数表示（出于我无法控制的原因），而输出文件 CSV 包含字符串表示。在创建输出文件时，我有什么办法可以将 ENUM 转换为其整数值？我觉得这应该是一件容易的事，但我无法在谷歌上找到答案。

注意：我必须为许多不同的表执行此操作，因此我很难单独处理每个表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:22:56.903

您需要使用数字上下文来获取枚举的整数值。尝试这个：

```
SELECT ..., enum_field+0, ... 
```

这将在数​​字上下文中评估 enum_field，这将返回索引值。

# facebook - Facebook 图形 API：发布到提要失败，并带有“链接”参数

> ID：11728135
> 
> 赞同：1
> 
> 时间：2012-07-30T19:19:28.693
> 
> 标签：facebook, facebook-graph-api

我正在使用 Graph API 发布指向页面提要的链接。上次我检查时，我的代码在几个月前就可以工作了。但是今天我发现相同的代码停止工作并返回错误。

基本上我所做的是：

```
$ curl -i -F 'access_token=my_application_token' -F 'link=http://www.foodnetwork.com/recipes/tyler-florence/parsnip-puree-recipe2/index.html' -F 'name=Parsnip Puree' -F 'picture=http://img.foodnetwork.com/FOOD/2009/02/25/TU0603-1_Parsnip-Puree_s4x3_tz.jpg' -F 'id=my_page_url' https://graph.facebook.com/feed 
```

它现在返回以下结果：

```
HTTP/1.1 500 Internal Server Error
Access-Control-Allow-Origin: *
Cache-Control: no-store
Content-Type: text/javascript; charset=UTF-8
Expires: Sat, 01 Jan 2000 00:00:00 GMT
Pragma: no-cache
WWW-Authenticate: OAuth "Facebook Platform" "unknown_error" "An unknown error has occurred."
X-FB-Rev: 600290
X-FB-Debug: mTeWwusHg5daIP2IMHlebi8fnLT9PO0CNJQeshMC+Hg=
Date: Mon, 30 Jul 2012 19:07:01 GMT
Connection: keep-alive
Content-Length: 87

{"error":{"message":"An unknown error has occurred.","type":"OAuthException","code":1}} 
```

如果我在没有“链接”参数的情况下尝试相同的帖子，那么它可以工作：

```
$ curl -i -F 'access_token=my_application_token' -F 'name=Parsnip Puree' -F 'picture=http://img.foodnetwork.com/FOOD/2009/02/25/TU0603-1_Parsnip-Puree_s4x3_tz.jpg' -F 'id=my_page_url' https://graph.facebook.com/feed 
```

这将返回以下内容，我可以在我的 Facebook 墙上看到该帖子（当然，没有所需的链接）：

```
HTTP/1.1 200 OK
Access-Control-Allow-Origin: *
Cache-Control: private, no-cache, no-store, must-revalidate
Content-Type: text/javascript; charset=UTF-8
Expires: Sat, 01 Jan 2000 00:00:00 GMT
Pragma: no-cache
X-FB-Rev: 600290
X-FB-Debug: iVVyk65AbEbnXNm0RyurLp/ZQA/oNXJ47w1UkLXXTfw=
Date: Mon, 30 Jul 2012 19:07:19 GMT
Connection: keep-alive
Content-Length: 40

{"id":"155190691260287_268086653304xxx"} 
```

令我困惑的是，带有“链接”参数的相同代码一直在工作。Facebook 文档并没有说明发布到提要的“链接”参数有任何变化。

知道出了什么问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-29T16:19:16.290

我最近遇到了类似的问题，通过链接发布到页面提要似乎因回复而失败，但是仍然创建了帖子。我拥有适当的权限，并且该应用程序是公开的。[目前在https://developers.facebook.com/bugs/726825557390253](https://developers.facebook.com/bugs/726825557390253)上打开了一个错误报告，如果 FB 开发人员做出回应，可能会对问题有所了解！

# asp.net - 未将 RadComboBoxItems 添加到多个 RadComboBoxes

> ID：11728136
> 
> 赞同：0
> 
> 时间：2012-07-30T19:19:32.610
> 
> 标签：asp.net, combobox, telerik

我真正想做的就是用相同的项目填充三个不同的组合框。当这段代码在下面执行时，只有一个组合框正在获取值。欢迎任何帮助。谢谢！

```
for (int i = 0; i < 100; i++)
        {
            RadComboBoxItem li = new RadComboBoxItem();
            li.Text = i.ToString();
            li.Value = i.ToString();
            InputPairThousandValueComboBox.Items.Add(li);
            InputUsertThousdandValueComboBox.Items.Add(li);
            InputCurrentlyListedThousdandComboBox.Items.Add(li);

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T23:30:29.300

我在 Telerik 文档中找不到任何明确说明这一点的内容，但似乎 a 的单个实例`RadComboBoxItem`只能包含在*单个* `RadComboBox`; 你不能`RadComboBoxItem`在控件之间共享。

[文档](http://www.telerik.com/help/aspnet-ajax/p_telerik_web_ui_radcomboboxitem_owner.html "Telerik 文档")确实暗示了这一点：`RadComboBoxItem`有一个“所有者”属性，它是对`RadComboBox`包含该项目的引用（暗示只能有 1 个所有者）

在幕后，第二个和第三个`Add(...)`调用很可能首先从组合框中删除它已经存在的项目。

因此，您必须`RadComboBoxItem`为每个`RadComboBox`. 这是您可以使用将`RadComboBoxItem`文本和值作为参数的构造函数的一种方法。

```
for (int i = 0; i < 100; i++)
{
   var val = i.ToString();
   InputPairThousandValueComboBox.Items.Add(new RadComboBoxItem(val, val));
   InputUsertThousdandValueComboBox.Items.Add(new RadComboBoxItem(val, val));
   InputCurrentlyListedThousdandComboBox.Items.Add(new RadComboBoxItem(val, val));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-18T15:03:15.830

对于那些仍然遇到这个问题的人，我发现的一种方法是将项目添加为字典，然后与数据源绑定。 [链接到 Telerik 表格](https://www.telerik.com/forums/add-items-with-value-and-display-into-comboboxes#sYg6UJrNhEmqdttYv7KUBQ/)

```
 Dictionary<string, string> comboSource = new Dictionary<string, string>();
    comboSource.Add("", "");
    comboSource.Add(user.Rs.GetString("txtDate"), "phDate");
    comboSource.Add(user.Rs.GetString("txtBranch"), "mhBranch");
    comboSource.Add(user.Rs.GetString("txtDepartmentCode"), "mhDepartmentCode");
    comboSource.Add(user.Rs.GetString("txtLocationCode"), "mhLocationCode");
    comboSource.Add(user.Rs.GetString("txtModelCode"), "mhModel");
    comboSource.Add(user.Rs.GetString("txtProductCode"), "phProductCode");
    comboSource.Add(user.Rs.GetString("txtShiftCode"),"shShiftCode");
    comboSource.Add(user.Rs.GetString("txtSubcategory"),"phSubcategory");

    cboSort1.DataSource = cboSort2.DataSource = cboSort3.DataSource = cboSort4.DataSource = comboSource;
    cboSort1.DataTextField = cboSort2.DataTextField = cboSort3.DataTextField = cboSort4.DataTextField = "Key";
    cboSort1.DataValueField = cboSort2.DataValueField = cboSort3.DataValueField = cboSort4.DataValueField = "Value";
    cboSort1.DataBind();
    cboSort2.DataBind();
    cboSort3.DataBind();
    cboSort4.DataBind(); 
```

# ios - 重定向 URI 不匹配 iOS soundcloud

> ID：11728139
> 
> 赞同：3
> 
> 时间：2012-07-30T19:19:47.860
> 
> 标签：ios, oauth, soundcloud

我正在开发一个使用 soundcloud API 的 iOS 应用程序。

我遵循了本教程：[https ://github.com/soundcloud/CocoaSoundCloudAPI](https://github.com/soundcloud/CocoaSoundCloudAPI)

在登录步骤之前一切都很好。我尝试上传一首歌曲（只是为了尝试不同的东西），但我得到了相同的结果......没有要登录的字段。

有时 soundcloud 弹出窗口会在 1 秒后消失，其他时候，没有任何附加内容，UI 保持此状态（微调器处于活动状态）。

在控制台中，我收到此错误消息：

> 糟糕，出了点问题：重定向 URI 不匹配

在soundcloud网站上，我放了一个类似myApp://oauth2的URI，我在initialize方法中也写了同样的内容。

我不确定它是否有效，因为当我刷新编辑页面时，重定向 URI 字段为空白......

任何想法 ？

我正在尝试使用以下代码登录 soundcloud：

```
[SCSoundCloud requestAccessWithPreparedAuthorizationURLHandler:^(NSURL *preparedURL){

    SCLoginViewController *loginViewController;
    loginViewController = [SCLoginViewController
                           loginViewControllerWithPreparedURL:preparedURL
                           completionHandler:^(NSError *error){

                               if (SC_CANCELED(error)) {
                                   NSLog(@"Canceled!");
                               } else if (error) {
                                   NSLog(@"Ooops, something went wrong: %@", [error localizedDescription]);
                               } else {
                                   NSLog(@"Done!");
                               }
                           }];

    [self presentModalViewController:loginViewController
                            animated:YES];

}]; 
```

谢谢 ！

# google-app-engine - 将数据从 gae 数据存储传输到 google docs 电子表格

> ID：11728147
> 
> 赞同：0
> 
> 时间：2012-07-30T19:20:16.067
> 
> 标签：google-app-engine, google-cloud-datastore, google-docs

我的 gae 应用程序收集了大量的数值数据。与其让用户下载它，是否可以创建一个谷歌文档电子表格并节省传出带宽？

这个想法是创建一个谷歌文档电子表格，其中包含用户可以访问的数据，如果他将数据下载到他的计算机，它不会算作我的应用程序使用的带宽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:53:51.160

要通过 Http 调用外部 API，您或您使用的库需要进行 URLFetch 调用，这将[计入传出配额](https://developers.google.com/appengine/docs/quotas#UrlFetch)。

因此，如果所有用户都下载相同的数据，例如没有每个用户生成的数据，您只会节省传出带宽成本。即便如此，Google Docs 的限制仍然适用：最大 20Mb 大小和最大 400k 单元格的电子表格。

此外，如果是一个共享电子表格，您将无法控制对它的访问。每个有 URL 的人都可以下载它。

# c# - 如何在文件夹更改时缓存页面并过期？

> ID：11728150
> 
> 赞同：0
> 
> 时间：2012-07-30T19:20:29.733
> 
> 标签：c#, .net, vb.net

我有一个要缓存的页面，目前我使用：

```
<%@ OutputCache Duration="60" VaryByParam="None" %> 
```

我了解对于 OutputCahe，可以根据到期时间或文件更改来缓存内容。但是，我希望缓存页面永不过期，除非文件夹中包含的文件数量发生变化。那可能吗？

因为缓存页面是一个文件夹树，所以我不希望它每次都加载，因为它需要很长时间才能加载（由于它的递归索引）。但是，如果文件夹树改变了它的结构，我确实希望它重新加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:33:08.200

您需要将缓存依赖添加到您的响应中，在您的 backcode 中的某处。还将您的持续时间从 60 增加到 int64 的最大可能最大值。

```
 Response.AddFileDependency("Your folder path"); 
```

# ruby-on-rails - ActiveAdmin 和 CanCan

> ID：11728152
> 
> 赞同：0
> 
> 时间：2012-07-30T19:20:40.690
> 
> 标签：ruby-on-rails, activeadmin, cancan

我正在使用 Active Admin 中的 AdminUsers 中的角色，并使用 CanCan 来定义跨不同资源的访问。

它在限制访问方面运行良好，但我在隐藏基于角色的菜单时遇到了麻烦。

根据 ActiveAdmin 文档，以下应该有效：

```
menu :if => proc{ can?(:manage, AdminUser) } 
```

在我的能力.rb 模型文件中，我有

```
case user.role      
  when "admin"
can :manage, :all
cannot :manage, Company
  when "manager"
    can :manage, Program
can :manage, Client 
```

我什至在 manager 下添加了 cannot :manage, AdminUser 以明确说明它。

以“经理”角色登录时，我试图隐藏 AdminUser 菜单。目前，它仍在向该用户显示它，但如果我点击它，它会正确地告诉我我没有被授权。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:29:53.677

我想通了。

我有两个菜单行如下： menu :if => proc{ can?(:manage, AdminUser) } menu :label => "Users"

第二行搞砸了第一行，我修改为：

```
 menu :if => proc{ can?(:manage, AdminUser) }, :label => "Users" 
```

它工作正常。

# jquery - 更改时提醒下拉选项

> ID：11728159
> 
> 赞同：0
> 
> 时间：2012-07-30T19:21:08.457
> 
> 标签：jquery, html

我试图在更改时保存选择下拉列表的表单值？

**HTML**

```
<select class="form_select" id="typeof_dwelling" name="typeof_dwelling">
  <option value="-1">All </option>
  <option value="APTU">Condos</option>
  <option value="HOUSE">Houses</option> 
  <option value="TWNHS">Townhouses</option>
  <option value="LOFTS">Lofts</option> 
  <option value="LND">Land</option>
</select> 
```

**脚本**

```
<script>
$(document).ready(function () {
    $('select#typeof_dwelling').change(function () {
        alert($(this).val());
     }
 });
</script> 
```

如何使用当前选项值显示此警报？

[实时代码](http://7061.a.hostable.me/hkumar/responsive%20wp/?page_id=31)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:24:35.530

修复你的代码，它会工作。您缺少右括号

```
$(document).ready(function () {
    $('select#typeof_dwelling').change(function () {
        alert($(this).val());
    }); // <-- here
});​ 
```

[http://jsfiddle.net/Py9su/](http://jsfiddle.net/Py9su/)

# sql-server - 如何使用 SQL Server 商业智能创建 Web 服务以创建报表并将其保存为服务器上的 pdf 文件

> ID：11728162
> 
> 赞同：0
> 
> 时间：2012-07-30T19:21:27.240
> 
> 标签：sql-server, web-services, business-intelligence

我不确定这是否可能，但我需要创建一个 Web 服务来在服务器上运行报告并将其保存在 pdf 文件中并发送文件名作为结果。我想知道是否可以使用 SQL Server 商业智能创建这样的服务。任何想法或建议将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:32:43.500

SQL Server 报告服务将执行此操作。它有一个网络界面，可以将报告保存为各种格式，包括 pdf - 它还可以自动通过电子邮件发送结果 - 所有这些都可以设置为计划或按需设置。

# asp.net - 按钮单击时从 0 计数到 100 的计数器

> ID：11728163
> 
> 赞同：0
> 
> 时间：2012-07-30T19:21:40.447
> 
> 标签：asp.net, postback

我有一个带有脚本管理器和更新面板的 asp.net 页面，以避免页面的回发事件（试图在此运行客户端）。我想在按钮单击事件中添加一个从 0 到 100 的计数器，并在完成时设置文本框的 txt 属性？这个怎么做？？

# javascript - Jquery - 来自选择框的数组操作

> ID：11728164
> 
> 赞同：0
> 
> 时间：2012-07-30T19:21:46.573
> 
> 标签：javascript, jquery, arrays

我正在根据类别创建标签建议功能。所以，我有一个带有一堆类别的选择框，当我选择一个类别时，我想在列表中显示子类别（显然使用数组）。这是我现在拥有的：

```
<select id="categorySelect">
   <option value="6">Animal</option> //the value here is the category id
   <option value="12">Music</option>
</select>

<ul id="suggestedTags">
</ul> 
```

我的 JSON 数组：

```
var tagsMakers= [
   { category: 'Animal', suggestedTags: [
        { name: 'cat'},
        { name: 'dog' },
        { name: 'rabbit'}
 ]},

 { category: 'Music', suggestedTags: [
        { name: 'rock' },
        { name: 'rap' }
   ]}
];

$("#categorySelect").change(function(){

}); 
```

我还在学习数组操作，我不知道从哪里开始！

用语言来说，逻辑是：

当我选择一个类别时，我想在下面的*li*中显示该类别的每个建议标签。我还希望能够选择多个类别，所以如果我选择两个类别，我希望同时显示建议的标签。

有人有时间帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T19:30:46.617

是的，首先将一个事件绑定到选择标签，并根据该值，显示列表。同时删除 JSON 结构，并改为构建哈希：

```
tagMakers = {'Animal': ['Cat','Dog','Rabbit'], 'Music': ['rock','rap']}
$("#categorySelect").change(function() {
   $("#suggestedTags").empty();
   $(this).find(":selected").each(function() {
   var selected = $(this).text();
   $.each(tagMakers[selected].function(i,n) {
     $("#suggestedTags").append("<li>"+n+"</li>");
     });
   });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:50:07.203

您的标签数组没有类别 ID，因此我将在此处使用类别名称。但是，作为一种好的做法，最好将类别 ID 放在类别数组中。如果您使用对象哈希而不是数组，那就更好了。

```
function getCategoryByName(name){
    //search in array.
    for(var i = 0, len = tagsMakers.length; i < len; i++)
    {
        if (tagsMakers[i].category === name)
        {
            // found.
            return tagsMakers[i];
        }
    }    
    // do not exists
    return;
}

$("#categorySelect").change(function(){
    // get the selected value 
    var current = $(this).val(), 
        suggestedTags = $("#suggestedTags"),
        category;

    // we do not have the category id on 'tagsMakers', so
    // we need the category name. 
    current = $("option[value="+current+"]", this).text();

    //search in array.
    category = getCategoryByName(current);

    //populate the suggested tags
    suggestedTags.empty()
    $.each(category.suggestedTags, function(i, tag) {
        $("<li>" + tag.name + "</li>").appendTo(suggestedTags);
    });
});​ 
```

jsFiddle：http: [//jsfiddle.net/vcZnu/](http://jsfiddle.net/vcZnu/)

**编辑：**如果您可以通过对象哈希更改您的类别数组（更好），那么您可以使用@CupidVogel 提供的解决方案，否则使用它，它可以解决您在问题中提出的问题。

# android - 监控在 Android 上下载应用程序/文件

> ID：11728166
> 
> 赞同：1
> 
> 时间：2012-07-30T19:21:59.260
> 
> 标签：android, monitoring

我正在尝试为 Android 编写代码，因此它就像一个侦听器/监视器，可以检查任何将要下载的应用程序并可能记录它（记录源 URL）

谁能帮我这个？任何教程或示例代码都会很棒。

谢谢。

# android - 我需要做一些特别的事情才能在我的 Strings.xml 中使用中文吗？

> ID：11728170
> 
> 赞同：4
> 
> 时间：2012-07-30T19:22:12.577
> 
> 标签：android, utf-8, character-encoding

我正在尝试将我的 Strings.xml 的中文版本添加到一个已经有英文和西班牙文版本的项目中，并且该应用程序在启动时只是崩溃，甚至无法扩展文件。我假设有某种我没有考虑到的编码问题，但我完全不熟悉这样做的要求，所以，我完全不知道我应该怎么做才能做到这一点工作。

我将我的语言设置为`ch`（也许这不正确？）并且 Strings.xml 所在的文件夹为`values-ch`. 文件中只有一个（测试）字符串，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="q2_sp">請選擇您的語言。（英語/繁體中文）&lt;/string> 
```

如果我不将语言设置为中文，一切都会继续正常工作（因此文件没有损坏），但是当我将语言设置为中文时，应用程序在启动时崩溃，并出现堆栈跟踪，抱怨无法膨胀文件。如果有帮助，我可以粘贴堆栈跟踪，但我希望我忽略了一些明显的东西。

所有帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T19:33:54.997

“ch”代表瑞士，中文使用“zh”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:32:25.577

是否可能缺少字节顺序标记？[一个字符用户来指示数据流是大端还是小端](http://en.wikipedia.org/wiki/Byte_order_mark)- 或者其他本地化数据是否具有指示数据是否应解释为 utf 8 或 16 的文档类型？- 对不起 - 没有看到你有文档类型

# javascript - 为 HighStocks 数据系列输入准备我的数据

> ID：11728171
> 
> 赞同：0
> 
> 时间：2012-07-30T19:22:14.963
> 
> 标签：javascript, jquery, date, highcharts, highstock

我正在尝试找到一种方法来解析我的数据格式，以便 HighStocks 可以识别它。我从服务器获取的数据格式如下：

```
var data = [
    {
        "dt":"2010-06-10 14:33:39",
        "val":98
    },
    {
        "dt":"2010-06-10 14:34:18",
        "val":99
    },
    {
        "dt":"2010-06-10 14:34:28",
        "val":93
    },
    {
        "dt":"2010-06-10 14:34:38",
        "val":79
    },
    {
        "dt":"2010-06-10 14:34:48",
        "val":87
    },
    {
        "dt":"2010-06-10 14:34:58",
        "val":86
    },
    {
        "dt":"2010-06-10 14:35:08",
        "val":79
    },
    {
        "dt":"2010-06-10 14:35:17",
        "val":90
    }] 
```

从 Highcharts 网站上的演示中，它接受如下格式：

```
var usdeur = [
[Date.UTC(2003,8,24),0.8709],
[Date.UTC(2003,8,25),0.872],
[Date.UTC(2003,8,26),0.8714],
[Date.UTC(2003,8,29),0.8638],
[Date.UTC(2003,8,30),0.8567],
[Date.UTC(2003,9,1),0.8536],
[Date.UTC(2003,9,2),0.8564],
[Date.UTC(2003,9,3),0.8639],
[Date.UTC(2003,9,6),0.8538],
[Date.UTC(2003,9,7),0.8489]] 
```

所以简单地说，我怎样才能将我的数据格式化`2010-06-10 14:33:39`为`Date.UTC(2010,06,10,14,33,39)`？任何 JavaScript/jQuery 方法或诸如 date.js/moment.js 之类的现有库都允许我轻松地做到这一点（例如，如果我不想`getUTC*()`用来获取日期时间信息然后放入`Date.UTC()`）

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:29:20.113

你为什么不在你的 sql 上格式化呢？这比格式化图表的每个点要好得多。
`UNIX_TIMESTAMP`应该可以帮助你。
**示例**：
`SELECT UNIX_TIMESTAMP(concat(dateColumn, timeColumn)) * 1000 AS 'dateUTC';`

# node.js - 断开连接事件在 2 分钟后触发

> ID：11728172
> 
> 赞同：3
> 
> 时间：2012-07-30T19:22:17.600
> 
> 标签：node.js, socket.io

我正在使用 Node.JS 和 Socket.IO 创建聊天，我使用持续时间为 10 的 XHR 轮询将其托管在 Heroku 上。

当我将页面留给客户端时，我想在服务器上自动调用 disconnect 方法，将其从其他客户端中删除。实际上已经完成了，但是......在客户端真正离开页面后2分钟，这很尴尬。

有没有办法在客户端不回复时立即调用断开方法？或者至少可以更快地知道客户何时不在？

我尝试使用 jQuery 在页面退出时关闭套接字客户端，但它不起作用。问题是使用`socket.disconnect()`是异步且非阻塞的，并且用户在请求完成之前离开......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:29:08.523

您可以使用`heartbeat timeout`,`heartbeat interval`和配置`close timeout`值`socket.io`。

在此页面中搜索`heartbeat`和： [https ://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO](https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO)`timeout`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-23T04:04:12.853

如果您将`'sync disconnect on unload'`socket.io 客户端上的选项设置为 true，它将在 onbeforeunload 中发送一个同步 xhr 断开请求，该请求将断开套接字。

# jquery - jQuery滚动菜单

> ID：11728174
> 
> 赞同：2
> 
> 时间：2012-07-30T19:22:28.020
> 
> 标签：jquery, jquery-plugins

我想要一个像这个网站一样的滚动菜单：[http](http://wearemanic.com/) ://wearemanic.com/ 。

我应该使用什么技术？是否有提供此功能的插件？你能向谷歌推荐一些关键词吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:32:14.917

我认为没有插件可以做他们所做的事情。如果您检查他们的网站，您会发现它是定制的。[rule-scroller.js](http://wearemanic.com/wp-content/themes/manic/js/ruler-scroller.js)是他们用来滚动匹配页面的标尺的类。他们使用 jQuery 和 jQuery.transform 来制作动画。

我建议您查看他们的代码并尝试制作自己的滚动条。不要从大做起，先从小事做起。例如，我将如何开始制作卷轴。

1.  首先通过鼠标单击使页面左侧的框向底部移动。
2.  使您可以调用以使标尺转到某个位置的函数
3.  尝试使标尺根据移动的页面移动。
4.  ETC

不要从大处着手，从小处着手，逐步添加功能。

# mysql - 缺少 mysql.sock 文件。phpMyAdmin - Fedora 17

> ID：11728176
> 
> 赞同：0
> 
> 时间：2012-07-30T19:22:38.843
> 
> 标签：mysql, linux, phpmyadmin, fedora, webmin

我使用“Webadmin”运行 Fedora 17。所以我尝试使用 webadmin 选项来更新上传到我的 MySQL 数据库的最大大小。现在，我无法重新启动 mysqld。我没有 GUI，所以在运行时`systemctl status mysqld.service`我给了我这个消息：

```
[root@localhost ~]# systemctl status mysqld.service
mysqld.service - MySQL database server
          Loaded: loaded (/usr/lib/systemd/system/mysqld.service; enabled)
          Active: failed (Result: exit-code) since Mon, 30 Jul 2012 15:08:26 -0400; 6min ago
         Process: 3560 ExecStartPost=/usr/libexec/mysqld-wait-ready $MAINPID (code=exited, status=1/FAILURE)
         Process: 3559 ExecStart=/usr/bin/mysqld_safe --basedir=/usr (code=exited, status=0/SUCCESS)
         Process: 3542 ExecStartPre=/usr/libexec/mysqld-prepare-db-dir (code=exited, status=0/SUCCESS)
          CGroup: name=systemd:/system/mysqld.service

Jul 30 15:08:23 localhost mysqld_safe[3559]: 120730 15:08:23 mysqld_safe Logging to '/var/log/mysqld.log'.
Jul 30 15:08:23 localhost mysqld_safe[3559]: 120730 15:08:23 mysqld_safe Starting mysqld daemon with databases from /var/lib/mysql 
```

或者当我尝试访问我的 phpmyadmin 屏幕时，我看到了这条消息：

```
phpMyAdmin - Error
#2002 - Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2)
The server is not responding (or the local server's socket is not correctly configured). 
```

当我在终端运行时，`locate mysql.sock`它显示了正确的路径`/var/lib/mysql/mysql.sock`。但是当我运行这个命令时`ls /var/lib/mysql`，我无法找到这个文件。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:55:51.307

在打了我的显示器并踢了我的服务器后，我找到了解决办法。不确定有多安全或擅长，但它对我有用。

在终端打开你的 my.cnf 文件`# nano /etc/my.cnf`

删除或仅使用“#”注释所有现有设置，然后粘贴我在[http://blog.mclaughlinsoftware.com/2011/12/07/fixing-my-cnf-on-fedora/上找到的代码](http://blog.mclaughlinsoftware.com/2011/12/07/fixing-my-cnf-on-fedora/)

```
[mysqld]
# Settings user and group are ignored when systemd is used.
# If you need to run mysqld under different user or group,
# customize your systemd unit file for mysqld according to the
# instructions in http://fedoraproject.org/wiki/Systemd

# Default directory.
datadir=/var/lib/mysql

# The TCP/IP Port the MySQL Server listens on.
port=3306

# The Linux Socket the MySQL Server uses when not using a listener.
# socket=/var/lib/mysql/mysql.sock

# Disabling symbolic-links is recommended to prevent assorted security risks
symbolic-links=0

# The default storage engine that will be used when creating new tables.
default-storage-engine=INNODB

# Set the SQL mode to strict.
sql-mode="STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION"

# Set the maximum number of connections.
max_connections=100

# Set the number of open tables for all threads.
table_cache=256

# Set the maximum size for internal (in-memory) temporary tables.
tmp_table_size=26M

# Set how many threads should be kept in a cache for reuse.
thread_cache_size=8

# MyISAM configuration.
myisam_max_sort_file_size=100G
myisam_sort_buffer_size=52M
key_buffer_size=36M
read_rnd_buffer_size=256K
sort_buffer_size=256K

# InnoDB configuration.
innodb_data_home_dir=/var/lib/mysql
innodb_additional_mem_pool_size=2M
innodb_flush_log_at_trx_commit=1
innodb_log_buffer_size=1M
innodb_buffer_pool_size=25M
innodb_log_file_size=5M
innodb_thread_concurrency=8

[mysqld_safe]
log-error=/var/log/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid 
```

打开任何意见或建议。谢谢你。

# iphone - 不包括需要该模式持续运行的功能（关键应用播放音频）

> ID：11728178
> 
> 赞同：0
> 
> 时间：2012-07-30T19:22:45.307
> 
> 标签：iphone, objective-c

我的应用程序（iphone）的 v 1.1 已被 Apple 拒绝。

拒绝理由：

* * *

> 2.16
> 
> 我们发现您的应用使用后台模式，但不包含需要该模式持续运行的功能。此行为不符合 App Store 审核指南。
> 
> 我们注意到您的应用在 Info.plist 的 UIBackgroundModes 键中声明支持音频，但当应用在后台时不会播放任何可听内容。虽然您的意图可能是提供此功能，但在审核时，我们无法为您的应用播放背景音频。
> 
> 如 iOS 应用程序编程指南中所述：“此密钥旨在供在后台向用户提供可听内容的应用程序使用，例如音乐播放器或流音频应用程序。” 因此，在应用程序处于后台时向用户提供可听内容或从 UIBackgroundModes 键中删除“音频”设置是合适的。

* * *

在已被接受的 v 1.0 中，已启用所需的后台模式“应用程序音频播放”。

当我启动我的应用程序的一种声音时，会播放声音，当我点击锁定屏幕时，声音会继续在后台播放。

在新版本（v1.1）中，我添加了当我按下 iPhone 的 Home 按钮时检测的功能。如果按下主页按钮，则声音会暂停。

当我在我的设备上尝试时，它运行正常且没有错误。

所以我不明白我的应用程序到底有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:33:14.147

如果您在按下主页按钮时暂停声音，那么您就不会在后台播放声音。要么更改你的应用程序，让它一直在后台播放声音，要么给 Apple 发送电子邮件并解释你的应用程序需要后台功能，以便它可以在手机锁定时播放。

我不确定，但您也许可以在没有音频背景模式的情况下在锁定屏幕期间播放声音。尝试删除它，看看您的应用程序是否表现相同。如果是这样，那么您应该删除密钥（没有理由拥有它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:32:06.200

如果您使用音频背景模式，您的应用程序必须播放连续音频（例如音乐应用程序或 Downcast）。那是你做的吗？还是只是短暂地播放声音？

您应该能够通过使用`beginBackgroundTaskWithExpirationHandler:`（我认为！）播放短声音（< 10 分钟）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-31T19:34:23.687

请参阅下面对我的 Apple 问题的回答：

2012 年 7 月 31 日上午 10:21。来自苹果。

**你好，**

**感谢您提供此信息。但是，为了确保正确实现音频背景功能，最好在启动音频后按下主页按钮。有关如何实现此功能的更多信息，请参阅 iOS 应用程序编程指南 请进行必要的更改以解决此问题。**

# php - 分页问题 [PHP & is_numeric]

> ID：11728183
> 
> 赞同：3
> 
> 时间：2012-07-30T19:23:02.320
> 
> 标签：php, pagination

我给出了一个分页问题：

```
$num_por_pagina = 5; 
$paginac = $_GET[paginac]; 
if (!$paginac) {
   $paginac = 1;
} 
```

我想只取整数以避免 PHP / SQL 注入

例如访问：

[http://www.mysite.com/index.php?paginac=3.3](http://www.mysite.com/index.php?paginac=3.3)或[http://www.mysite.com/index.php?paginac=3,3](http://www.mysite.com/index.php?paginac=3,3)

结果 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 7 行的 '4.6, 2' 附近使用正确的语法

从：

访问 www.mysite.com/index.php?paginac=3.3 或 www.mysite.com/index.php?paginac=3,3

结果错误，此页面未激活。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:27:23.853

缺少引号

```
$paginac = $_GET["paginac"]; 
```

还

```
www.mysite.com/index.php?page=3.3 
```

您将“page”作为获取参数传递，捕获该参数而不是“paginac”

```
$paginac = $_GET["page"]; 
```

如果您在 mysql 中遇到错误，请也发布该代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:28:13.650

如果您知道您将收到一个号码（或者应该收到），您可以将其作为第一道防线：

```
$paginac = (int) $_GET['page']; 
```

`page`代表一个常数。您应该使用引号作为键。

如果您收到非数字字符串，您只需请求第 0 页即可。

其次，您将需要阅读有关[如何](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)正确防止注射的信息，而不是在大多数情况下仅使用一些技巧来使其正确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T19:29:01.190

尝试

```
$paginac = intval($_GET[paginac]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T19:27:12.380

看起来您的测试似乎`is_numeric()`仍然允许编写和执行 SQL 语句，这会引发您的错误。

确保如果 GET 变量不是数字，则查询不会执行。

此外，在访问关联数组索引时使用引号。如果你通过 get 传递*paginac*：

```
$paginac = $_GET['paginac']; 
```

如果您通过 get传递*页面：*

```
$paginac = $_GET['page']; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-30T19:27:22.463

我会做这样的事情：

```
if ($paginac < 2)
{
    $paginac = 1;
} 
```

如果变量是字符串，PHP 会将其强制转换为 1，因此此方法会将任何文本强制转换为 1，并且还有助于防止出现负数

# javascript - Orchard CMS 和 javascript：Number.parseInvariant

> ID：11728184
> 
> 赞同：-1
> 
> 时间：2012-07-30T19:23:05.073
> 
> 标签：javascript, orchardcms

我无法在 Orchard 中获得某些 jscript 函数。此刻我正在与`Number.parseInvariant`功能作斗争。这在使用标准 ASP.Net mvc3 Web 应用程序时工作正常，但在将其移植到 Orchard 时无法使用此功能。我认为 Sys 对象也是如此。我的两分钱是在 ASP.net MVC 中使用了另一个脚本库实现，然后在 Orchard 中使用。

任何人都知道我如何绕过这个。或者也许这个特定功能的一些替代品？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T22:38:49.910

Number.parseInvariant 和 sys 是微软 Ajax 带来的扩展，不是标准的 JavaScript。Microsoft Ajax 是一个过时的库，您不应该使用它。请使用更标准的方法来做同样的事情，例如 parseInt。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-30T19:29:58.363

我已将 Microsoft.Ajax.js 添加到项目中并引用它。我不知道这是否是最好的方法。至少它现在对我有用。

# glassfish - Glassfish 3.1 远程客户端连接到集群中的 JMS 队列

> ID：11728185
> 
> 赞同：3
> 
> 时间：2012-07-30T19:23:05.923
> 
> 标签：glassfish, jms, cluster-computing, glassfish-3

Glassfish 3.1.2 Ubuntu 12.04

我创建了一个包含两个节点的集群并拥有一个 JMS 队列。我在尝试使用远程独立客户端连接到此 JMS 队列时遇到问题。集群 JMS 侦听器位于端口 27676 上，队列已部署到集群。

mq://Glassfish2:27676/,mq://Glassfish3:27676

当我使用用于连接到独立实例的代码进行连接时，集群不会收到消息。我相信它使用的是默认的 7676 端口。当 IIOP 端口更改为使用集群 (DAS) 正在使用的端口 23700 时，我在尝试连接到 localhost:27676 时收到连接被拒绝异常。至少它是正确的端口。

警告：[C4003]：连接创建时发生错误 [localhost:27676]。- 原因：java.net.ConnectException：连接被拒绝：连接

我还更新了节点配置文件 (domain.xml) 中的以下值以删除对 localhost 的引用。jms-host 和 node-host 值。

我之前在使用独立实例时遇到过这个问题，通过在 /etc/hosts 文件中添加条目来解决这个问题。但是，这似乎并不能解决问题。我在 hosts 文件中也有所有服务器实例 IP。

我在这里错过了一些非常基本的东西吗？任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-22T06:10:07.397

如果您查看下的日志文件

> ${glassfish_home}/glassfish/nodes/cluster-name/instance-name/imq/instances/instance-name/log

文件夹，你会看到

## **经纪人不匹配**

您的每个节点都有不同的主代理，可能**每个节点都知道自己的代理是主代理。**

我有同样的错误，几天后发现这个..

# iphone - 检测何时显示 MapView 瓦片

> ID：11728189
> 
> 赞同：7
> 
> 时间：2012-07-30T19:23:26.270
> 
> 标签：iphone, ios, mkmapview, mkmapviewdelegate

由于`- (void)mapViewDidFinishLoadingMap:(MKMapView *)mapView`从缓存加载切片时不会调用，有没有办法知道所有切片何时已加载（从缓存或映射服务器）并显示？

是否有任何代表团暗示已加载瓷砖？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T17:52:11.307

**这是我写的一些源代码：** [https ://github.com/jonathanlking/mapViewTest](https://github.com/jonathanlking/mapViewTest)

你为什么不考虑这样的问题；

当地图视图将发生变化时，`mapView:regionDidChangeAnimated:`将被调用。

从那里`mapViewWillStartLoadingMap:`将被调用。

如果已从服务器获取图块，则将调用Next`mapViewDidFailLoadingMap:withError:`或。`mapViewDidFinishLoadingMap:`

但是，如果两者都没有被调用，您可以假设切片是从缓存中加载的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T18:41:55.907

如前所述，`mapViewDidFinishLoadingMap`有时根本不调用，尤其是在地图切片已经缓存的情况下，有时它会被多次调用。

我注意到，当它在最后一次调用时被多次调用时，所有的图块都会被渲染。所以我认为如果你在地图开始改变后设置一个 2 秒的计时器，你可以让它工作。禁用交互以使地图不会继续更改，并在计时器关闭时启用用户交互。

如果`mapViewDidFinishLoadingMap`被调用，则在未来 2 秒内再次重置计时器。当计时器最终关闭时，您应该有一个完全渲染的地图。

您将需要考虑其他回调，例如`mapViewDidFailLoadingMap`. 还要在嘈杂的连接上进行测试，因为如果需要很长时间来获取瓷砖，2 秒可能不够长。

```
- (void)restartTimer
{
    [self.finishLoadingTimer invalidate];
    self.finishLoadingTimer = [NSTimer scheduledTimerWithTimeInterval:2.0
                                                               target:self
                                                             selector:@selector(mapLoadingIsFinished)
                                                             userInfo:nil
                                                              repeats:NO];
}

- (void)mapLoadingIsFinished
{
    self.finishLoadingTimer = nil;
    self.mapChanging = NO;
    self.view.userInteractionEnabled = YES;
}

- (void)mapViewDidFinishLoadingMap:(MKMapView *)mapView
{
    if (self.mapChanging) {
        [self restartTimer];
    }
}

- (void)startLookingForMapChange
{
    assert(self.mapChanging == NO);
    if (self.mapChanging == NO) {
        self.mapChanging = YES;
        assert(self.finishLoadingTimer == nil);
        self.view.userInteractionEnabled = NO;
        [self restartTimer];
    }
} 
```

# c++ - 如何创建一个返回无序二叉树最小值的函数

> ID：11728191
> 
> 赞同：-1
> 
> 时间：2012-07-30T19:23:31.640
> 
> 标签：c++, tree, binary-tree, tree-traversal

这似乎应该很容易，但我已经有很长一段时间了。正如标题所说，我只是想在二叉树（不是 BST！）中找到具有最小值的节点并返回它。我可以很容易地编写一个递归 void 函数，它至少可以分配函数中的最小值，但是一旦我到达一个 NULL 指针，我就会陷入如何回溯到以前的节点的问题。

我有一个节点类，它有一个指向左右子节点的指针，每个子节点都有自己的值。到目前为止，这是我的（失败的）尝试：

```
int preOrder(Node *node, int value, int count, int sizeOfTree)
{
  count++; //keeps track of whether or not we have traversed the whole tree

  if(value < node->getValue())
    value = node->getValue(); 

  if(count == sizeOfTree);
    return value;

  if(node == NULL)
    //Want to return to the previous function call
    //How do I do this for a non void function? 
    //for a void function, you could jsut type "return;" and the function
    //back tracks to your previous place in the tree
    //but since I'm returning a value, How would I go about doing this?

  //these 2 calls are incorrect but the idea is that I first traverse the left subtree
  //followed by a traversal of the right subtree.
  preOrder(node->getLeft(), value);

  preOrder(node->getRight(), value);

} 
```

如果可能的话，我想尝试在不跟踪“计数”的情况下执行此操作，以使代码更清晰。让我知道是否需要进一步澄清。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T19:31:48.320

我真的不明白为什么在您的原始代码中，您需要跟踪遍历的元素数量。这是我的解决方案：

```
int find_min(Node* node)
{
  int value = node->getValue()

  Node* left_node = node->getLeft();
  if (left_node != NULL)
  {
    int left_value = find_min(left_node);
    if (left_value < value)
      value = left_value;
  }

  Node* right_node = node->getRight();
  if (right_node != NULL)
  {
    int right_value = find_min(right_node);
    if (right_value < value)
      value = right_value;
  }

  return value;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:34:13.780

Basically what you need to do is just visit every node and keep track of the smallest value you've seen. This can actually be done fairly simply:

```
#include <algorithm>
#include <limits>

int preOrder(Node *node)
{
  if(node == NULL) return std::numeric_limits<int>::max();
  // this should never affect the calculation of the minimum
  // (What could possibly be bigger than INT_MAX? At worst it's equal)

  int value = std::min(
    node->getValue(),
    preOrder(node->getLeft())
    );

  value = std::min(
    value,
    preOrder(node->getRight())
    );

  return value;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T19:46:10.007

好的，所以你有一个无序的二叉树，你试图找到其中的最低元素。

由于树是无序的，最低的元素可以在树中的任何位置，所以你必须搜索整棵树。

搜索的特点如下：

*   彻底（搜索整棵树）
*   递归（而不是迭代，这真的很恶心）
*   基本情况：节点为 NULL
*   基本结果：保持当前值

那就写吧：

```
#include <algorithm>
using namespace std;

int searchLowest(Node * node, int value = INT_MAX)
{
    if (node == NULL) // base case
        return value; // base outcome

    // at this point, node must not be NULL

    value = min(value, preOrder(node->getRight(), value)); // thorough, always recurse
    value = min(value, preOrder(node->getLeft (), value)); // and check children
    value = min(value, node->getValue());
    return value;
} 
```

编辑彻底、公正和 OOness：

```
// Node.h
#include <algorithm>
using namespace std;

template <typename T>
class Node
{
public:
    Node(T item)
    {
        data = item;
    }

    T lowest()
    {
        T value = data;

        if (right != NULL)
            value = min(value, right->lowest());
        if (left  != NULL)
            value = min(value, left->lowest());

        return value;
    }

    Node<T> * getRight()
    {
        return right;
    }

    Node<T> * getLeft()
    {
        return left;
    }

private:
    T data;

    Node<T> * right;
    Node<T> * left;
};

// main.cpp
#include <iostream>
#include "Node.h"
using namespace std;

int main(int c, char * v[])
{
    Node<int> * tree = sycamore(); // makes a nice big tree

    cout << tree->lowest();
} 
```

[见吉米跑](http://ideone.com/l5ZNc)

# windows - 在远程机器上调用后台命令

> ID：11728192
> 
> 赞同：3
> 
> 时间：2012-07-30T19:23:39.457
> 
> 标签：windows, powershell, vmware

我想从 powershell 脚本在远程主机上生成一个进程，并在本地脚本退出后继续运行该进程。远程命令是`vmrun.exe`VMware Workstation 自带的程序，它启动一个虚拟机并立即退出。

我看到的行为是，一旦远程会话以脚本结束，vmware 进程就会被终止。我希望进程继续运行。这是我目前使用的：

```
function Start-VM {
    param( [String] $vmwareDir, [String] $vmDir, [String] $vm )
    [String] $command = "& `"$vmwareDir\vmrun.exe`" start `"$vmDir\$vm`" nogui"
    Invoke-Expression $command
}

[String] $hostname = "myhost.fqdn"
[String] $vmwareDir = "C:\Program Files (x86)\VMware\VMware Workstation"
[String] $vmDir = "C:\Path\To\VM"
[String] $vm = "my vm.vmx"

$session = New-PSSession -ComputerName $hostname
Invoke-Command -Session $session -AsJob -ScriptBlock ${function:Start-VM} -ArgumentList $vmwareDir, $vmDir, $vm
if( !$? ){
    Write-Host "Failed to start VM"
    exit
}
sleep 60 
```

使用此代码，VM 在 myhost.fqdn 上启动并运行直到 60 秒睡眠结束，之后它与本地脚本一起被杀死。在这种情况下，我只创建一个 PSSession 对象作为概念证明，即远程进程只与会话一样长。

提前致谢！

编辑：

如果有助于澄清我想做的事情，Linux 中的等效功能将类似于：

```
ssh myhost.fqdn "nohup my-command &>/dev/null &" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:59:31.273

在[这个答案](https://stackoverflow.com/a/8704945/608772)中，我分析了问题并给出了解决方法（见最后编辑）。我不确定你的问题真的是重复的。

# c - Webkit GTK：确定文档何时完成加载

> ID：11728195
> 
> 赞同：4
> 
> 时间：2012-07-30T19:23:56.910
> 
> 标签：c, webkit, gtk, webkitgtk

StackOverflow 上还有其他问题与我想知道的很*接近，例如*[Webkit GTK :: How to detect when a download has done?](https://stackoverflow.com/questions/5724088/webkit-gtk-how-to-detect-when-a-download-has-finished) ，但我想我在问一些不同的东西：

一般来说，在事件驱动的 C Webkit-GTK API 中有很多事件可能与某个文档何时完成“加载”的想法有关。问题是[文档](http://webkitgtk.org/reference/webkitgtk/stable/webkitgtk-webkitwebview.html)非常稀疏，“完成加载”的概念并不一定清楚，因为它可以引用很多东西。“完成加载”是否意味着文件已完成*下载*？它已经完成了 DOM 树的创建？它已完成下载，包括*所有*其他资源（如 CSS、JS 和图像文件？）

相关信号是`signal::notify::load-status`、`document-load-finished`和`resource-load-finished`。

每次负载状态发生变化时都会触发该`load-status`信号，因此您每次都需要手动调用`webkit_web_view_get_load_status`并检查状态。即便如此，当状态 finally 为 时`WEBKIT_LOAD_FINISHED`，我不确定这意味着什么——这是否意味着 WebKit 已经完成了资源的*下载*，或者它已经完成了 DOM 树的创建，还是什么？

问题：

各种“完成”信号之间有什么区别，是否有任何信号等效于标准 Javascript DOM 事件`window.onload`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T10:44:39.943

我相信该[`document-load-finished`信号](http://webkitgtk.org/reference/webkitgtk/stable/webkitgtk-webkitwebview.html#WebKitWebView-document-load-finished)是您正在寻找的信号，因为它似乎（在我看来）更接近于您要测试的信号。

测试哪种方法是正确的方法的一个想法是测试测试文档是否已手动“加载”的各种方法。即尝试我上面链接的那个，并在值为真时向终端输出一个字符串。如果该值在页面完全显示其所有内容之前为真，则很可能它不是您想要的。然后继续下一个，直到找到正确的。

除此之外，我不确定您还能做什么，因为正如您所提到的，定义不是很清楚。像这样的时候，我希望 Gtk 文档更冗长一些。

# java - 玩！框架。创建一个新视图

> ID：11728196
> 
> 赞同：6
> 
> 时间：2012-07-30T19:24:01.373
> 
> 标签：java, web, playframework-2.0, web-development-server

我现在使用播放控制台创建了一个新项目
，默认情况下我在视图目录中有两个文件：

```
main.scala.html   
index.scala.html 
```

我想添加一个新的视图文件。我现在称它为“forums.scala.html”
，我知道为了呈现视图，您需要这样做：

```
views.html.forums.render("Forums"); 
```

问题是智能感知不识别“论坛”
，但它确实识别索引和主。
我注意到这些文件：

> class_managed/views.html/index.class
> class_managed/views.html/main.class

但没有 forums.class 所以我怀疑这是问题所在。
我尝试构建该项目，但没有帮助。
那么，解决方案是什么？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-30T19:35:28.680

Your new views are compiled to managed sources after next browser hit if you are using `play run` for starting Play in dev mode.

If you'll use `play ~run` it will try to compile it as soon at it will recognize change in the file.

Finally if you started your app in production mode ie. via `play start` you have to stop it with `ctrl+c` and run again. Anyway, developing application in production mode is just a bad idea :)

Depending on your IDE most probably you'll need to refresh file structure to allow it find freshly created managed sources.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-21T11:09:17.717

右键单击该项目并单击刷新，这对我有用 - 在另一个线程中找到它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T10:00:37.063

找到了解决方案。
运行“编译”命令完成了这项工作。
我知道 IntelliJ 会自动执行，所以我可能会使用它而不是 eclipse。

干杯！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T20:38:26.513

如果你想在 scala 中编程，我的建议是忘记智能感知。Eclipses scala-ide 有很多 bug，不知道 netbeans。而且由于 play2 应用程序的非标准布局，非标准开发工具（游戏控制台），使用具有良好的旧的打开文件夹作为项目功能的简单文本编辑器（如 sublime 或 textmate）变得更加方便。

# delphi - 创建图像和彩色红外？

> ID：11728198
> 
> 赞同：1
> 
> 时间：2012-07-30T19:24:03.113
> 
> 标签：delphi, delphi-7

如何创建图像以及如何使用十六进制颜色代码逐像素着色？

例如。我想创建一个 100x100 像素的图像，我希望 1x1 区域的颜色是 '$002125'，2x2 区域的颜色是 '$125487'.... 我该怎么做？

谢谢您的回答..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T20:51:07.077

为您制作了一个简单的示例。使用 Canvas.Pixels 而不是扫描线。Scanline 虽然更快，但一开始我认为它很适合。颜色是随机生成的，所以你只需要替换这部分代码。

```
 procedure TForm1.GenerateImageWithRandomColors;
    var
      Bitmap: TBitmap;
      I, J: Integer;
      ColorHEX: string;

    begin
      Bitmap := TBitmap.Create;
      Randomize;

      try
        Bitmap.PixelFormat := pf24bit;
        Bitmap.Width := 100;
        Bitmap.Height := 100;

        for I := 0 to Pred(Bitmap.Width) do
        begin
          for J := 0 to Pred(Bitmap.Height) do
          begin
            Bitmap.Canvas.Pixels[I, J] := RGB(Random(256),
               Random(256),
               Random(256));

            // get the HEX value of color and do something with it
            ColorHEX := ColorToHex(Bitmap.Canvas.Pixels[I, J]);
          end;
        end;

        Bitmap.SaveToFile('test.bmp');
      finally
        Bitmap.Free;
      end;
    end;

function TForm1.ColorToHex(Color : TColor): string;
begin
  Result :=
     IntToHex(GetRValue(Color), 2) +
     IntToHex(GetGValue(Color), 2) +
     IntToHex(GetBValue(Color), 2);
end; 
```

# sql - 我怎样才能知道 MVC3 在幕后做了什么？

> ID：11728202
> 
> 赞同：0
> 
> 时间：2012-07-30T19:24:27.247
> 
> 标签：sql, asp.net-mvc-3

好的，我是一只老狗（慢慢地）学习新技巧，我需要看到齿轮转动才能了解发生了什么。

我使用 EF4.1 从现有数据库生成了一个 MVC3 应用程序，MVC3 视图中的列表（基于 SQL 视图）显示了与 SQL 管理器中查看的 SQL 视图不同的结果。具体来说，连接表中的字段似乎在主表上的多次点击之间没有得到更新。

有趣的是：如果我捕获智能感知为 db.myViewClass.ToList() 调用显示的 sql 并将其粘贴到 SQL 管理器中，它会给出正确的结果！

我还创建了一个迷你测试应用程序，效果很好。到目前为止，我看不出测试应用程序与失败的主应用程序有何不同。

我很沮丧，因为我无法进入代码查看 db.myViewClass 中发生了什么。

有什么好主意吗？

戴夫。

# replace - 在 ViewPager 中正确替换片段

> ID：11728203
> 
> 赞同：4
> 
> 时间：2012-07-30T19:24:28.687
> 
> 标签：replace, android-fragments, android-viewpager

我正在尝试替换视图中的片段，但还没有成功。

我有以下课程。首先是我的 PagerAdapter：

```
package com.example.tab1;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
public class SectionsPagerAdapter extends FragmentPagerAdapter {

static final int NUM_ITEMS = 3;
private final FragmentManager mFragmentManager;
private Fragment mFragmentAtPos0;

public SectionsPagerAdapter(FragmentManager fm) {
    super(fm);
    mFragmentManager = fm;
}

@Override
public Fragment getItem(int position) {

     Bundle args = new Bundle();

     mFragmentAtPos0= new testFragment();
     args.putInt(testFragment.ARG_SECTION_NUMBER, position + 1);
     mFragmentAtPos0.setArguments(args);

     return mFragmentAtPos0;
}

@Override
public int getItemPosition(Object object) {

    return 0;

}

@Override
// liefert die Anzahl der Tabs
public int getCount() {
    return NUM_ITEMS;
}

@Override

public CharSequence getPageTitle(int position) {
    switch (position) {
    case 0:

        // return getString(R.string.title_section1).toUpperCase();
        // return
        // Resources.getSystem().getString(R.string.title_section1).toUpperCase();

        return "Suche".toUpperCase();
    case 1:
        // return getString(R.string.title_section2).toUpperCase();
        // return
        // Resources.getSystem().getString(R.string.title_section2).toUpperCase();
        return "Ergebnis".toUpperCase();
    case 2:

        // return
        // Resources.getSystem().getString(R.string.title_section3).toUpperCase();
        return "Optionen".toUpperCase();
    }
    return null;
}

} 
```

其次是我的 DatePickerFragment：

```
package com.example.tab1;

import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class DatePickerFragment extends DialogFragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

      public static DatePickerFragment newInstance() {
          DatePickerFragment f = new DatePickerFragment();
          return f;
      }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        //Log.d("DEBUG", "onCreateView");
        return inflater.inflate(R.layout.datepickerfrag, container, false);

    }

} 
```

最后是我的 MainActivity，在这里我激活了方法的更改`onClickSearch`，这是我的第一个 Fragment 中的接口中的一个方法，它在应用程序启动时显示。

```
package com.example.tab1;

import android.app.ActionBar;
import android.app.FragmentTransaction;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.view.ViewPager;
import android.view.Menu;

public class MainActivity extends FragmentActivity implements
        ActionBar.TabListener,testFragment.ButtonListenerS{

    /**
     * The {@link android.support.v4.view.PagerAdapter} that will provide
     * fragments for each of the sections. We use a
     * {@link android.support.v4.app.FragmentPagerAdapter} derivative, which
     * will keep every loaded fragment in memory. If this becomes too memory
     * intensive, it may be best to switch to a
     * {@link android.support.v4.app.FragmentStatePagerAdapter}.
     */
    SectionsPagerAdapter mSectionsPagerAdapter;

    /**
     * The {@link ViewPager} that will host the section contents.
     */
    ViewPager mViewPager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        // Create the adapter that will return a fragment for each of the three
        // primary sections
        // of the app.
        mSectionsPagerAdapter = new SectionsPagerAdapter(
                getSupportFragmentManager());

        // Set up the action bar.
        final ActionBar actionBar = getActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        // Set up the ViewPager with the sections adapter.
        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mSectionsPagerAdapter);

        // When swiping between different sections, select the corresponding
        // tab.
        // We can also use ActionBar.Tab#select() to do this if we have a
        // reference to the
        // Tab.
        mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
                    @Override
                    public void onPageSelected(int position) {
                        actionBar.setSelectedNavigationItem(position);
                    }
                });

        // For each of the sections in the app, add a tab to the action bar.
        for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
            // Create a tab with text corresponding to the page title defined by
            // the adapter.
            // Also specify this Activity object, which implements the
            // TabListener interface, as the
            // listener for when this tab is selected.
            actionBar.addTab(actionBar.newTab()
                    .setText(mSectionsPagerAdapter.getPageTitle(i))
                    .setTabListener(this));
        }

        actionBar.selectTab(actionBar.getTabAt(0));
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    /*
     * Implementierung des "Suchbuttons" (non-Javadoc)
     * Interaktion zwischen testFragment und MainActivity
     */
    public void OnclickSearchS() {

          android.support.v4.app.FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
          ft.replace(R.id.pager,DatePickerFragment.newInstance());
          ft.commit();
        //mViewPager.setCurrentItem(1);
    }

    public void onTabUnselected(ActionBar.Tab tab,
            FragmentTransaction fragmentTransaction) {
    }

    public void onTabSelected(ActionBar.Tab tab,
            FragmentTransaction fragmentTransaction) {
        // When the given tab is selected, switch to the corresponding page in
        // the ViewPager.
        mViewPager.setCurrentItem(tab.getPosition());
    }

    public void onTabReselected(ActionBar.Tab tab,
            FragmentTransaction fragmentTransaction) {
    }

    /**
     * A {@link FragmentPagerAdapter} that returns a fragment corresponding to
     * one of the primary sections of the app.
     */

} 
```

当应用程序运行时，我第一次按下按钮并没有任何反应，当我再次这样做时，我看到一个空片段，然后出现错误：

```
07-30 21:20:17.800: W/dalvikvm(32553): threadid=1: thread exiting with uncaught exception (group=0x40c671f8)
07-30 21:20:17.805: E/AndroidRuntime(32553): FATAL EXCEPTION: main
07-30 21:20:17.805: E/AndroidRuntime(32553): java.lang.NullPointerException
07-30 21:20:17.805: E/AndroidRuntime(32553):    at android.support.v4.app.Fragment.setUserVisibleHint(Fragment.java:750)
07-30 21:20:17.805: E/AndroidRuntime(32553):    at android.support.v4.app.FragmentPagerAdapter.setPrimaryItem(FragmentPagerAdapter.java:130)
07-30 21:20:17.805: E/AndroidRuntime(32553):    at android.support.v4.view.ViewPager.populate(ViewPager.java:893)
07-30 21:20:17.805: E/AndroidRuntime(32553):    at android.support.v4.view.ViewPager.populate(ViewPager.java:772)
07-30 21:20:17.805: E/AndroidRuntime(32553):    at android.support.v4.view.ViewPager.completeScroll(ViewPager.java:1539)
07-30 21:20:17.805: E/AndroidRuntime(32553):    at android.support.v4.view.ViewPager.onInterceptTouchEvent(ViewPager.java:1663)
07-30 21:20:17.805: E/AndroidRuntime(32553):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1631)
07-30 21:20:17.805: E/AndroidRuntime(32553):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1963)
07-30 21:20:17.805: E/AndroidRuntime(32553):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1690)
07-30 21:20:17.805: E/AndroidRuntime(32553):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1963)
07-30 21:20:17.805: E/AndroidRuntime(32553):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1690)
07-30 21:20:17.805: E/AndroidRuntime(32553):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1963)
07-30 21:20:17.805: E/AndroidRuntime(32553):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1690)
07-30 21:20:17.805: E/AndroidRuntime(32553):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:2063)
07-30 21:20:17.805: E/AndroidRuntime(32553):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1399)
07-30 21:20:17.805: E/AndroidRuntime(32553):    at android.app.Activity.dispatchTouchEvent(Activity.java:2364)
07-30 21:20:17.805: E/AndroidRuntime(32553):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:2011)
07-30 21:20:17.805: E/AndroidRuntime(32553):    at android.view.View.dispatchPointerEvent(View.java:5861)
07-30 21:20:17.805: E/AndroidRuntime(32553):    at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3094)
07-30 21:20:17.805: E/AndroidRuntime(32553):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2614)
07-30 21:20:17.805: E/AndroidRuntime(32553):    at android.view.ViewRootImpl.processInputEvents(ViewRootImpl.java:978)
07-30 21:20:17.805: E/AndroidRuntime(32553):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:992)
07-30 21:20:17.805: E/AndroidRuntime(32553):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2585)
07-30 21:20:17.805: E/AndroidRuntime(32553):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-30 21:20:17.805: E/AndroidRuntime(32553):    at android.os.Looper.loop(Looper.java:137)
07-30 21:20:17.805: E/AndroidRuntime(32553):    at android.app.ActivityThread.main(ActivityThread.java:4507)
07-30 21:20:17.805: E/AndroidRuntime(32553):    at java.lang.reflect.Method.invokeNative(Native Method)
07-30 21:20:17.805: E/AndroidRuntime(32553):    at java.lang.reflect.Method.invoke(Method.java:511)
07-30 21:20:17.805: E/AndroidRuntime(32553):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
07-30 21:20:17.805: E/AndroidRuntime(32553):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
07-30 21:20:17.805: E/AndroidRuntime(32553):    at dalvik.system.NativeStart.main(Native Method) 
```

我不知道，发生了什么事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T18:21:24.643

*当我缺少getItemId(int position)*方法重新实现时，我遇到了这个异常，该方法为默认和替换片段返回不同的（唯一）ID。有关进一步说明和示例实现，请参阅[https://stackoverflow.com/a/11974777/685292 。](https://stackoverflow.com/a/11974777/685292)

# ios - 如何在叠加层上设置 UISwitch？

> ID：11728205
> 
> 赞同：0
> 
> 时间：2012-07-30T19:24:35.547
> 
> 标签：ios, uiswitch

我在我的叠加层上设置了一个开关，每次我的应用启动相机时都会出现这个开关。开关出现了，很好。但是如何创建 if 条件来命令开关在打开或关闭时执行操作？

```
//This is the overlay.
- (UIView*)CommomOverlay  {

UISwitch *mySwitch = [[UISwitch alloc] initWithFrame:CGRectMake (30,400,20,20)];
[mySwitch addTarget:self action:@selector(mySwitch)  
forControlEvents:UIControlEventAllTouchEvents];

[view addSubview:mySwitch];
return view;
} 
```

所以开关出现在叠加层上，但是我如何命令它在调用时执行某些操作？

我试过以下

```
-(void)mySwitch {
  if ([mySwitch.on]){
    execute this..

  }
 } 
```

但上述不起作用。我收到一条错误消息，提示“未声明的标识符，您的意思是 UISwitch 吗？”。然后我用 UISwitch.on 替换 mySwitch.on，然后它说“在 UISwitch 类型的对象上找不到属性”。

我只想正确执行我的 if else 方法。我做了覆盖，我做了开关代码，它看起来非常完美。但现在我希望它在 if/else 条件下做一些事情。我该如何纠正这个问题？

我做错什么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:51:28.100

很高兴您决定使用 UISwitch，在我看来，它是一个更直接的解决方案。至于您的问题是什么，它与范围界定有关。您在覆盖初始化中声明您的 UISwitch，然后函数结束，您将失去访问 UISwitch 的能力。

您需要做的是在您的 .h 中为它创建一个属性，然后将其设置为等于覆盖初始化内的属性。那应该可以解决您的问题。

**编辑：**通过您在评论中提到的问题：

1）我相信你的声明应该是，

```
@property (nonatomic, retain) UISwitch *mySwitch; 
```

之后，您需要`@synthesize mySwitch;`在 .m 文件中执行

2) 这样做的原因是因为您有 2 个同名变量，因为您似乎在几个地方重新声明了 mySwitch。我猜这些地方你的代码看起来像：

```
UISwitch *mySwitch = //Stuff; 
```

它应该看起来像：

```
mySwitch = //Stuff; 
```

原因是您已经在 .h 文件中声明了它，您只需要初始化或操作它。如果您再次声明它，您将用一个新实例覆盖它，该实例在您退出函数后将再次不存在。

3）您不需要设置 mySwitch = mySwitch 进行合成，请参见我上面的代码。还要确保您的函数名称与变量名称不同！

随时评论更新和更多问题。-卡罗利

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:47:18.380

在您的 mySwitch 方法中无法访问 mySwitch。为 mySwitch 创建一个属性并创建它的 getter 和 setter。然后你可以在你的 mySwitch 方法中访问它。

```
[..]
@property UISwitch *mySwitch;
[..]
@synthesize mySwitch = mySwitch;

-(void)mySwitch {
  if ([self.mySwitch.on]){
     [..]
  }
} 
```

# c# - 如何在 C# 中获取颜色的 RGB 值的同时获取颜色的名称？

> ID：11728209
> 
> 赞同：18
> 
> 时间：2012-07-30T19:24:57.593
> 
> 标签：c#

我正在创建一个应用程序来查找图像最常用的颜色，我正在获取颜色的 RGB 值，但是如何获取颜色名称，请帮助。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-30T19:39:48.580

如评论中所述，[`KnownColor`](https://msdn.microsoft.com/en-us/library/system.drawing.knowncolor)枚举可用于简化此操作：

```
using System;
using System.Collections.Generic;
using System.Drawing;
using System.Linq;
using System.Reflection;

class Test
{
    static void Main()
    {
        Color color = Color.FromArgb(255, 0, 0);
        Console.WriteLine(color.Name); // ffff0000

        var colorLookup = Enum.GetValues(typeof(KnownColor))
               .Cast<KnownColor>()
               .Select(Color.FromKnownColor)
               .ToLookup(c => c.ToArgb());

        // There are some colours with multiple entries...
        foreach (var namedColor in colorLookup[color.ToArgb()])
        {
            Console.WriteLine(namedColor.Name);
        }
    }
} 
```

* * *

**原始答案**

`Color.FromArgb`会给你一个`Color`，但它永远不会有一个名字。据我所知，您需要使用反射来获得命名的颜色。

这是科尔坎贝尔解决方案的另一个版本，我正在同时研究它......

```
using System;
using System.Collections.Generic;
using System.Drawing;
using System.Linq;
using System.Reflection;

class Test
{
    static void Main()
    {
        Color color = Color.FromArgb(255, 0, 0);
        Console.WriteLine(color.Name); // ffff0000

        var colorLookup = typeof(Color)
               .GetProperties(BindingFlags.Public | BindingFlags.Static)
               .Select(f => (Color) f.GetValue(null, null))
               .Where(c => c.IsNamedColor)
               .ToLookup(c => c.ToArgb());

        // There are some colours with multiple entries...
        foreach (var namedColor in colorLookup[color.ToArgb()])
        {
            Console.WriteLine(namedColor.Name);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-30T19:37:20.410

此方法使用反射来检查`Color`类上预定义的颜色，并将它们与作为参数传入的颜色进行比较。这可以进一步优化，但它应该让您了解一般技术。

```
private static String GetColorName(Color color)
{
    var predefined = typeof(Color).GetProperties(BindingFlags.Public | BindingFlags.Static);
    var match = (from p in predefined where ((Color)p.GetValue(null, null)).ToArgb() == color.ToArgb() select (Color)p.GetValue(null, null));
    if (match.Any())
       return match.First().Name;
    return String.Empty;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T19:29:54.777

您应该能够使用 System.Drawing 命名空间中的 Color 类，它有一个静态方法 FromARGB，它返回一个 Color 对象。它有几个重载，一个允许您输入 RGB 值，如下所示：

```
var color = Color.FromArgb(100, 5,5,5).Name; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-10T22:18:29.923

对于快速简单的事情，试试这个（在 WPF 中）：

```
public string GetNameOfColor(Color color) {
    var colorProperty = typeof(Colors).GetProperties().FirstOrDefault(p =>
        (Color)(p.GetValue(p, null)) == color);
    return (colorProperty != null) ? colorProperty.Name : color.ToString();
} 
```

在 Visual Studio 2010 中，`p.GetValue(p, null)`是必需的。在 Visual Studio 2013+ 中，您只需使用`p.GetValue(p)`.

除了简洁之外，这种技术的优点是它不需要引用`System.Drawing`或`System.Reflection`允许用户保留在`System.Windows`WPF 命名空间内。`System.Windows.Media`如果您在 WPF 中使用颜色，它确实需要您可能已经拥有的参考。如果您像我一样，请尽量不要在`System.Drawing`没有必要的情况下添加到您的 WPF 应用程序中。至于为什么要留在 WPF 命名空间内，这是一个偏好问题。例如，参见[WPF v/s System.Drawing](https://stackoverflow.com/questions/427848/wpf-v-s-system-drawing)中的讨论。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-18T05:11:16.937

我正在使用 .NETCF 3.5，并且“System.Drawing.KnowColor 枚举”不存在。仅用于调试，我使用此函数返回已知颜色；

```
public static string ColorName(System.Drawing.Color c)
{
    var colorName = string.Format("0x{0:X4}", c.ToArgb());
    var colorList = new List<System.Reflection.PropertyInfo>();
    var props = typeof(System.Drawing.Color).GetProperties();
    colorList.AddRange(props);
    props = typeof(System.Drawing.SystemColors).GetProperties();
    var prop = colorList.Where(p1 => (System.Drawing.Color)p1.GetValue(null, null) == c).FirstOrDefault();
    if (prop != null) System.Diagnostics.Debug.WriteLine(prop.Name);
    else System.Diagnostics.Debug.WriteLine("unkown name Color");
    foreach (var item in colorList)
    {
        var argb = (System.Drawing.Color)item.GetValue(null, null);
        System.Diagnostics.Debug.WriteLine(string.Format("ColorName {0} ARGB {1:X4}", item.Name, argb.ToArgb()));
        if (c == argb) return item.Name;
    }

    return colorName;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-16T20:01:11.057

`System.Drawing.KnownColor`因为我最近正在解决同样的问题，所以我编写了一个静态查找缓存，可以使用从系统枚举间接    派生的众所周知的 .NET Framework 颜色值预先填充该缓存。我反编译了 .NET，发现颜色属性调用了带有相关枚举状态的构造函数。我正在使用反射，但这是一次性交易，发生在我班级的静态初始化程序中。这不是一个线程安全的解决方案，但可以很容易地使其成为线程安全的，并且还可以在内存中维护一个永久缓存。

    我的方法可能有用的是，虽然它首先预先填充了 .NET 命名颜色列表，但您还可以添加应用程序运行时定义的众所周知的颜色 - 从 JSON 读取、从 Web 下载、从数据库解析等...这里的主要潜在缺点是，这是一个单例，由于是静态的，并且由于这种设计选择可能会产生不必要的副作用。让这个类在你认为合适的地方实例化。

    我使面向公众的界面尽可能简单——如果缓存未命中则`LookupName(Color)`返回`string.Empty`，否则返回颜色的字符串名称。`AddToCache(Color, string)`成功时返回 true，失败时返回 false（例如，已知值已经存在）。`ToNearestNamedColor(Color)`是一种成本适中的数值方法，源自颜色量化技术，使用毕达哥拉斯距离在静态缓存中选择最接近的“命名”颜色，它返回颜色名称的字符串、该名称的`System.Drawing.Color`结构，并作为最终奖金，表示最近已知/命名输入`double`的分数或适应度。`Color`

    使用毕达哥拉斯距离来选择最接近的命名颜色是次优的，但在使用不同的基线启发式算法来最大化近似相似性之前提供了一个不错的起点。

    最后，`ToRGB(Color)`是我编写的一个辅助函数，用于将 a 转换为`System.Drawing.Color`表示颜色的 RGB 值的整数，修剪（归零）前导 Alpha 分量，将 24 位字符串填充到 32 位 int 结构中。

`ToRGB(Color)`Helper（静态扩展）功能：

```
/// <summary>
/// Converts the specified <see cref="Color"/> to a 24-bitstring on an int, of 00000000RRRRRRRRGGGGGGGGBBBBBBBB.
/// </summary>
/// <param name="toRGB">The color to convert to rgb as a 24 bitstring. Ignores Alpha.</param>
/// <returns>an integer representation of the specified <see cref="Color"/>.</returns>
public static int ToRGB(this Color toRGB)
{
  return
    (toRGB.R << 16) |
    (toRGB.G << 8) |
    toRGB.B;
} 
```

    定义了这个辅助函数（可以是公共的，可以是内部的，由您决定），我现在展示我的 NamedColorStaticCache.cs（放置在您想要/需要的任何命名空间中）。

```
 // Using-statements:
  using System;
  using System.Collections.Generic;
  using System.Drawing;
  using System.Linq;
  using System.Reflection;

  /// <summary>
  /// Static class to assist with looking up known, named colors, by name.
  /// </summary>
  public static class NamedColorStaticCache
  {
    /// <summary>
    /// Stores the lookup cache of RGB colors to known names.
    /// </summary>
    private static Dictionary<int, string> rgbLookupCache;

    /// <summary>
    /// Initializes static members of the <see cref="NamedColorStaticCache"/> class.
    /// </summary>
    static NamedColorStaticCache()
    {
      rgbLookupCache = new Dictionary<int, string>();
      Type colorType = typeof(Color);
      PropertyInfo[] knownColorProperties = colorType
        .GetProperties(BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Static)
        .Where(t => t.PropertyType == typeof(Color))
        .ToArray();

      // Avoid treating "transparent" as "white".
      AddToCache(Color.White, "White");

      foreach (PropertyInfo pi in knownColorProperties)
      {
        Color asColor = (Color)pi.GetValue(null);
        AddToCache(asColor, pi.Name);
      }
    }

    /// <summary>
    /// Looks up the name of the specified <see cref="Color"/>.
    /// </summary>
    /// <param name="toLookup">The <see cref="Color"/> to lookup a name for.</param>
    /// <returns>A string of the associated name of the specified <see cref="Color"/>.</returns>
    public static string LookupName(this Color toLookup)
    {
      int rgb = toLookup.ToRGB();
      if (rgbLookupCache.ContainsKey(rgb))
      {
        return rgbLookupCache[rgb];
      }

      return string.Empty;
    }

    /// <summary>
    /// Adds the specified <see cref="Color"/> to a lookup cache of named colors.
    /// </summary>
    /// <param name="toAdd">The <see cref="Color"/> to add to the lookup cache.</param>
    /// <param name="name">The name of the <see cref="Color"/> to add to the lookup cache.</param>
    /// <returns>True if adding successful, else, false (the color was already in the cache).</returns>
    public static bool AddToCache(this Color toAdd, string name)
    {
      int rgb = toAdd.ToRGB();
      if (rgbLookupCache.ContainsKey(rgb))
      {
        return false;
      }

      rgbLookupCache.Add(rgb, name);
      return true;
    }

    /// <summary>
    /// Takes the specified input <see cref="Color"/>, and translates it to its nearest counterpart, using root square sum.
    /// </summary>
    /// <param name="toNearest">The <see cref="Color"/> to look up to the nearest named color.</param>
    /// <returns>A tuple structure of name, color, error.</returns>
    public static Tuple<string, Color, double> ToNearestNamedColor(this Color toNearest)
    {
      string foundName = string.Empty;
      Color foundColor = Color.Black;
      double error = double.MaxValue;

      int toNearestRGB = toNearest.ToRGB();
      if (rgbLookupCache.ContainsKey(toNearestRGB))
      {
        foundName = rgbLookupCache[toNearestRGB];
        foundColor = toNearest;
        error = 0;
      }
      else
      {
        foreach (KeyValuePair<int, string> pair in rgbLookupCache)
        {
          int rgb = pair.Key;
          byte r = (byte)(rgb >> 16);
          byte g = (byte)(rgb << 16 >> 24);
          byte b = (byte)(rgb << 24 >> 24);
          int dr = r - toNearest.R;
          int dg = g - toNearest.G;
          int db = b - toNearest.B;
          double newError =
            Math.Sqrt(
              (dr * dr) +
              (dg * dg) +
              (db * db));

          if (newError < error)
          {
            foundName = pair.Value;
            foundColor = Color.FromArgb(r, g, b);
            error = newError;
          }

          if (newError <= .0005)
          {
            break;
          }
        }
      }

      return Tuple.Create(foundName, foundColor, error);
    }
  } 
```

    注意：一小时后编辑以提供查找功能以获取最近的命名颜色。这不是*最好*的方法（转换为`CIEL*a*b*`“更好”），但这是使用 ToNearestColor 方法的坚实基础。这样，原始海报除了查找单独的颜色名称外，还可以给出最接近的近似颜色名称。

# facebook - 强制 Facebook 应用程序始终使用 https

> ID：11728210
> 
> 赞同：1
> 
> 时间：2012-07-30T19:25:03.853
> 
> 标签：facebook, https

有没有办法让应用程序页面的链接使用 HTTPS - 或另一种方式让页面以 https 方式加载整个 Facebook？目前应用页面只是加载一个空白，它必须运行 https。我还研究了您是否可以将画布 URL 设置为 https 以查看是否有帮助 - 但 facebook 似乎为您设置了它。

# android - android - 以编程方式在后台异步刷新（绘制、擦除和更新）自定义视图上的形状，而不会阻塞 UI

> ID：11728212
> 
> 赞同：1
> 
> 时间：2012-07-30T19:25:13.870
> 
> 标签：android, view, drawing, custom-view

下面是扩展**View类的****CustomView**类。静态效果很好。

 **我正在单击一个按钮，它显示了我要去的目标架子。然后我点击另一个按钮，它清除了目标架子，地图又回到了初始状态。

需要做的是，这个婴儿必须在*xx*秒后使用一些异步调用自行清除目标架子。以同样的方式，当我开始用“ **X** ”在地图上显示我的位置时，它必须在我行走时刷新那个“ **X ”。**

**AsyncTask**似乎不是解决这个问题的完美解决方案。你知道地图应该如何自我更新吗*？*

提前致谢。

自**定义视图**：

```
public class CustomView extends View {
    ShapeDrawable roomFrame, targetShelfFrame, me;
    int halfMe;
    ArrayList<ShapeDrawable> shelfFrames;
    //(...)

    @Override
    protected void onDraw(Canvas canvas){
        super.onDraw(canvas);
        if(roomFrame != null)
            roomFrame.draw(canvas);
        for (ShapeDrawable shelfFrame : shelfFrames)
            shelfFrame.draw(canvas);
        if(targetShelfFrame != null)
            targetShelfFrame.draw(canvas);
        if(me != null)
            me.draw(canvas);
    }

    public void setRoom(Room room){
        roomFrame = new ShapeDrawable(new RectShape());
        roomFrame.getPaint().setColor(0xff74AC23);
        roomFrame.getPaint().setStyle(Style.STROKE);
        roomFrame.setBounds(10, 10, room.getWidth(), room.getHeight());
        invalidate();
    }

    public void setShelves(ArrayList<Shelf> shelves){
        shelfFrames = new ArrayList<ShapeDrawable>();
        for(int i = 0; i<shelves.size(); i++){
            ShapeDrawable shelfFrame = new ShapeDrawable(new RectShape());
            shelfFrame.getPaint().setColor(0xff74AC23);
            shelfFrame.setBounds(shelves.get(i).getXPosition(), shelves.get(i).getYPosition(), shelves.get(i).getWidth(), shelves.get(i).getHeight());
            shelfFrames.add(shelfFrame);
        }
        invalidate();
    }

    public void setTargetShelf(Shelf shelf){
        targetShelfFrame = new ShapeDrawable(new RectShape());
        targetShelfFrame.getPaint().setColor(Color.RED);
        targetShelfFrame.setBounds((int)(shelf.getXPosition()), (int)(shelf.getYPosition()),
                (int)((shelf.getXPosition() + shelf.getWidth())), 
                (int)((shelf.getYPosition() + shelf.getHeight())));
        invalidate();
    }

    public void clearTargetShelf(){
        targetShelfFrame = null;
        invalidate();
    }

    public void updateMyPosition(Position position){
        me = new ShapeDrawable(new OvalShape());
        me.getPaint().setColor(Color.GREEN);
        me.setBounds(position.getX() - halfMe, position.getY() - halfMe, 
            position.getX() + halfMe, position.getY() + halfMe);
    }
} 
```

我怎么称呼它：

```
public void loadRoomPlan(Room room, ArrayList<Shelf> shelves){
    CustomView exampleView = (CustomView)findViewById(R.id.roomplan);
    exampleView.setRoom(room);
    exampleView.setShelves(shelves);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:38:53.600

实际上，解决问题的最简单方法（据我了解您的目标）是使用 Handler 在 UI 线程上执行延迟执行。所以你需要做的是：

*   创建处理程序（全局为您的自定义视图）
*   使用`postDelayed(Runnable, long)`界面以一定的延迟运行您的货架清理

您的代码如下所示：

**自定义视图：**

```
public class CustomView extends View {
    ShapeDrawable roomFrame, targetShelfFrame;
    ArrayList<ShapeDrawable> shelfFrames;
    Handler uiThread = new Handler();
    //(...)

    public void setTargetShelf(final Shelf shelf){
        targetShelfFrame = new ShapeDrawable(new RectShape());
        targetShelfFrame.getPaint().setColor(Color.RED);
        targetShelfFrame.setBounds((int)(shelf.getXPosition()), (int)(shelf.getYPosition()),
            (int)((shelf.getXPosition() + shelf.getWidth())), 
            (int)((shelf.getYPosition() + shelf.getHeight())));
        invalidate();
        uiThread.postDelayed(new Runnable()
        {
            @Override
            public void run()
            {
                clearTargetShelf(shelf);            
            }
        }, 10000); //10 secs delay
} 
```

关于你问题的第二部分（在地图上走“X”）我不太明白 - 你使用的是什么类型的地图？是谷歌地图吗？是你自己的地图吗？“行走”是什么意思？它是真正的移动，还是只是某种可以在地图上移动角色的游戏？请说清楚**

# c++ - C++：在堆上分配的对象

> ID：11728213
> 
> 赞同：0
> 
> 时间：2012-07-30T19:25:20.703
> 
> 标签：c++

*当我们使用new*创建一个对象时， 它被分配在堆上。但是，我们正在实例化的类的成员会发生什么？例如，

```
class foo {
 Bar x;
 Bar *y;

 foo() {
   x = 10;
   y = new Bar();
 }
} 
```

这里，x 是一个对象，而 y 是 Bar 的一个实例。它们都分配在堆上吗？所以如果 foo *F*的一个对象是在一个方法中本地创建的，那么当 F 超出范围时*y会发生什么？*

另外，如果*F*是在堆上创建的，我们什么时候可以得出*F*悬空的结论（没有人指向它）？因为，可能没有对 F 的引用，但可能对*Y*的引用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T19:28:19.893

它们与父对象一起骑行，即，它们是动态分配的或具有自动存储持续时间，具体取决于父对象的初始化方式。但这并不一定意味着您需要分别释放每个。

`x`在您的情况下，当父对象存在时将自动释放。但是，`y`是动态分配的。因此，它需要单独的释放。任何对 的调用`new`必须在某个时间点后跟对 的调用`delete`。这个基本规则将帮助你推理这些情况。

顺便说一句，应该使用称为 RAII（[资源分配即初始化](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)）的模式来管理动态分配对象的解除分配（不过不要忘记[三法则](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)！）。您还应该养成使用初始化列表而不是使用构造函数的主体来初始化对象的习惯，即

```
class foo {
 Bar x;
 Bar *y;

 foo() : x(10), y(new Bar()) { }

 // who deallocates y here?  Again, look into RAII
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T19:28:33.743

> 它们都分配在堆上吗？

是的。

> 所以如果 foo F 的一个对象是在一个方法中本地创建的，那么当 F 超出范围时 y 会发生什么？

什么都没有——“y”指向的实例将保持不变，因为您没有析构函数来提供清理。它实际上会成为内存泄漏，除非有其他东西引用它（并在以后清理它）。

> 另外，如果 F 是在堆上创建的，我们什么时候可以得出 F 悬空的结论（没有人指向它）？

只要没有任何东西直接指向它，它就会悬空。其他指向的东西`y`不会改变`F`不再可达的事实。

这就是为什么在这种情况下你真的应该使用正确的终结。如果没有调用`delete`匹配每个调用`new`，您将泄漏内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T19:40:17.357

`x`和都`y`分配在实例化器分配父对象的任何地方`foo`。如果`foo`被分配为本地，则两者都`x`将`y`在堆栈上分配。如果`foo`是通过 分配`new`的，那么两者都将在堆上分配。

对象`y`在构造函数中设置为指向`foo`将始终在堆上分配，因为它是通过`new`在默认构造函数中分配的。

由于没有为 定义析构函数`foo`，因此对象`y`总是会泄漏。应该创建一个析构函数，以便对象`foo`始终指向（当不为空时）以防止内存泄漏。尽管在实践中，通常使用智能指针代替裸指针来防止默认复制分配和克隆构造函数出现问题。`delete``y``y`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T19:40:25.230

术语有点混乱（可能是由于 Javaland ...）在 C++ 中，变量始终是“值”，而指针的“值”是“地址”。而已。与 C# 或 Java 完全不同，其中变量是*引用*，所有对象都是堆上的。

将指针视为“一个对象，其值是另一个对象的地址”。那时，`foo`只有两个使用它创建并留在其中的成员：

*   `x`，这是在实例本身`Bar`内部创建的，并且...`foo`
*   `y`，它驻留在 foo 实例中，并且是*bar 的地址*。

包含的地址`y`是什么，取决于它被初始化/分配的内容。

*   可以`nullptr`，
*   可以是另一个`Bar`已经存在的（堆或堆栈或什么的成员，取决于你）
*   可以是另一个新创建的 Bar （通过`new`，就像在您的示例中一样）
*   可以是……甚至 x 本身（通过`&x`）

# cmake - 如何使用 cmake 自动构建第三方库

> ID：11728216
> 
> 赞同：4
> 
> 时间：2012-07-30T19:25:32.090
> 
> 标签：cmake

我在找什么：下载库提取它应用自定义补丁运行配置运行构建命令我要构建的库是：

*   OpenSSL
*   促进
*   节约
*   战神
*   卷曲
*   聚合酶链反应
*   Nginx
*   重症监护室
*   JsonCPP

我想我可以使用外部模块来做这些事情：[http ://cmake.org/cmake/help/v2.8.8/cmake.html#module:ExternalProject](http://cmake.org/cmake/help/v2.8.8/cmake.html#module:ExternalProject)

但我有以下问题？

1.  我有不同类型的构建和不同的目录。它会为每个不同的目标构建所有这些库吗？如果是，那将是痛苦的，因为所有这些库都需要一个小时来构建。有没有办法我可以控制它并且它只构建一次。因为所有这些目标的库都保持不变。

2.  将目录切换到不同的名称。Cmake 强制重建所有内容。外部库是否相同。如果是？如何解决这个问题呢。如果我不更改它们并且想要在切换到不同分支而不构建它们的同时使用它们，我不想重建库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-02T01:12:34.170

是的，您可以使用 CMake 的 ExternalProject 功能来完成您想做的事情。

结合外部项目使用交叉编译时，每个工具链都会编译一次源代码。如果您将构建结果签入源代码控制系统，并在每个新人的机器上重新签出，您可以避免重新构建，但我不建议这样做。相反，让您的“设置新计算机”任务之一实际上允许编译在一夜之间运行，这也将作为机器实际可用的测试。该设置任务可以由系统管理员在新员工到来之前启动，或者您可以根据情况将其留给新员工。

我不完全确定您在第二个问题中要问什么，但是如果库未更改，CMake 将检测到它未更改并且不会重新编译它。通常，源代码将位于单个目录树中：每个编译版本都将构建在不同的位置。因此，开发人员只需切换目录即可随时访问任何编译后的版本。这特别有用，因为它允许您通过 NFS 将这些目录挂载到嵌入式硬件等。

# php - php不执行查询

> ID：11728220
> 
> 赞同：1
> 
> 时间：2012-07-30T19:25:52.537
> 
> 标签：php, mysql, execute

我有两个 mysql 表，这里是他们的 sql =>

我正在用它的子菜单制作动态菜单。所以我有想要执行这样一个查询的情况

```
DELETE FROM artinfo WHERE descName=(SELECT for_sub_url FROM menu WHERE menu_id=" . $_POST['main_menu_titles'] . ") 
```

其中**$_POST['main_menu_titles']**存在并且是 menu_id。我也没有编写 php 代码，因为它工作得很好而且值得注意的是，当我试图从 mysql shell 执行它时执行这个查询（当然直接使用 menu_id 的数字而不是 $_POST['m_num']）

任何想法发生了什么，如何从 php 脚本执行它？谢谢 ：）

**更新**

这是php脚本

```
if ($connection->query("DELETE FROM artinfo WHERE descName=(SELECT for_sub_url FROM menu WHERE menu_id=" . $_POST['main_menu_titles'] . ")") && $connection->query("DELETE FROM artinfo WHERE descName IS NULL AND cat_id=" . $_POST['main_menu_titles'] . "")){
                            $edit_res_fine = "DELETED";
                        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:34:05.497

If you say the query works just fine without $_POST, I would think the code in question is located in the form you submit to acquire $_POST['main_menu_titles']. To test the correct value is being sent, try echoing the value of $_POST['main_menu_titles'] right before the query.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-30T19:32:59.733

尝试这个。

```
$query = "DELETE FROM artinfo WHERE descName = (SELECT for_sub_url FROM menu 
WHERE menu_id = '" . $_POST['m_num'] . "')"; 
```

# powershell - Powershell Switch 语句设置多个变量

> ID：11728223
> 
> 赞同：6
> 
> 时间：2012-07-30T19:26:09.120
> 
> 标签：powershell

我正在将一些旧的 VB 脚本转换为 Powershell。我正在尝试使用 Switch 语句来设置多个变量。这在 Powershell 中可行吗？在 VBS 中，我的代码如下所示：

```
Select Case ENV
    Case "DEV"
        : SRCDRV  = "\\Server1" _
        : DESTDRV = "\\Server1\Folder1\"

    Case "TEST"
        : SRCDRV  = "F:" _
        : DESTDRV = "\\Server1\Folder2\"

    Case "PROD"
        : SRCDRV  = "F:" _
        : DESTDRV = "\\Server2\Folder2\"
End Select 
```

我在 PS 中尝试过类似的东西，但似乎没有设置变量。

```
switch ($cENV) {
    DEV { 
        $SRCDRV = "\\Server1"
        $DSTDRV = "\\Server2\Folder1\"
        break     
    }
    TEST {
        $SRCDRV = "\\Server1"
        $DSTDRV = "\\Server2\Folder2\"
        break
     }
    PROD {
        $SRCDRV = "\\Server1"
        $DSTDRV = "\\Server2\Folder2\"
        break
     }
} 
```

当我检查 DESTDRV 或 SRCDRV 的值时，我收到一条错误消息：无法检索变量“$SRCDRV”，因为它尚未设置。关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-30T19:37:54.053

当找到开关的情况时，您的代码将起作用。$cENV 的值可能与“DEV”、“TEST”或“PROD”不匹配。添加一个默认的 switch case 并在没有匹配项时执行某些操作，例如：

```
switch ($cENV) {
  DEV { 
    $SRCDRV = "\\Server1"
    $DSTDRV = "\\Server2\Folder1\"
    break     
  }
  TEST {
    $SRCDRV = "\\Server1"
    $DSTDRV = "\\Server2\Folder2\"
    break
  }
  PROD {
    $SRCDRV = "\\Server1"
    $DSTDRV = "\\Server2\Folder2\"
    break
  }
  default {
    throw "No matching environment for `$cENV: $cENV"
  }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-30T19:38:16.597

你是先设置 $cENV 吗？

我正在像这样运行上面的确切脚本：

```
$cENV = "DEV"
switch ($cENV) {
    DEV { 
        $SRCDRV = "\\Server1"
        $DSTDRV = "\\Server2\Folder1\"
    }
    TEST {
        $SRCDRV = "\\Server1"
        $DSTDRV = "\\Server2\Folder2\"
     }
    PROD {
        $SRCDRV = "\\Server1"
        $DSTDRV = "\\Server2\Folder2\"
     }
}
$SRCDRV 
```

它回来了

```
\\Server1 
```

# objective-c - 在 iOS 应用程序中将 UISearchBar 添加到 UIActionSheet

> ID：11728226
> 
> 赞同：1
> 
> 时间：2012-07-30T19:26:49.647
> 
> 标签：objective-c, ios, uisearchbar, uiactionsheet

我在为我正在构建的应用程序实施设计时遇到了一些麻烦。该设计显示了一个 UIActionSheet 菜单，顶部有一个搜索栏。当有人在搜索栏中输入文本时，菜单消失并被包含搜索结果的表格视图所取代。（搜索结果的显示方式与您在主屏幕上一直向左滑动以在 iPhone / iPod 上搜索时类似）

这基本上是我想要实现的目标：

![在此处输入图像描述](../Images/a1571906d538f09e487271a04d3ebc73.png)

这是我的代码：

```
// build menu
UIActionSheet* menu = [[UIActionSheet alloc] initWithTitle:@""
                      delegate:self
                      cancelButtonTitle:@"Cancel"
                      destructiveButtonTitle:nil
                      otherButtonTitles:@"Button 1",@"Button 2",@"Button 3",nil];

[menu showInView:self.view];

UISearchBar *searcher = [[UISearchBar alloc] initWithFrame: CGRectMake (0, -216, 320, 44)];
searcher.delegate = self;

// use transparent background  
[[searcher.subviews objectAtIndex:0] removeFromSuperview];

[menu addSubview:searcher]; 
```

当我运行它时，就好像搜索栏被禁用了。您无法单击它或打开键盘。如果我将搜索栏的垂直位置从 -216 更改为 0，我可以单击它并调出键盘，但我无法输入任何内容。

我对如何实现这一点有点困惑。有任何想法吗？我将 Xcode 4.4 与 ARC 和情节提要一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:34:27.877

这就是`UIActionSheet`对象的工作方式。而是做其他事情，例如向上滑动`UIView`.

来自 Apple iOS 人机界面指南：

> 使用操作表来：
> 
> *   提供完成任务的替代方法。操作表允许您提供一系列在当前任务的上下文中有意义的选择，而无需在用户界面中永久放置这些选择。
>     
>     
> *   在完成潜在危险任务之前获得确认。操作表会提示用户考虑他们将要采取的步骤的潜在危险影响，并为他们提供一些替代方案。这种类型的通信在基于 iOS 的设备上尤为重要，因为有时用户会无意中点击控件。

# django - Django 表单：在提交到 db 之前要求确认

> ID：11728227
> 
> 赞同：8
> 
> 时间：2012-07-30T19:26:51.570
> 
> 标签：django, django-forms

更新：解决方案可以作为单独的答案找到

我正在制作一个 Django 表单以允许用户将电视节目添加到我的数据库中。为此，我有一个`Tvshow`模型，`TvshowModelForm`并且我使用基于类的通用视图`CreateTvshowView`/`UpdateTvshowView`来生成表单。

现在我的问题来了：假设一个用户想要在数据库中添加一个节目，例如权力的游戏。如果该标题的节目已经存在，我想提示用户确认这确实是与数据库中的节目不同的节目，如果不存在类似的节目，我想将其提交给数据库。我如何最好地处理此确认？

我的一些实验显示在下面的代码中，但也许我做错了。我的解决方案的基础是包含一个隐藏字段`force`，如果用户收到提示是否确定要提交此数据，则应将其设置为 1，以便我可以读出此事物是否为 1 以决定用户是否再次单击提交，从而告诉我他想要存储它。

我很想听听你们对如何解决这个问题的看法。

视图.py

```
class TvshowModelForm(forms.ModelForm):
    force = forms.CharField(required=False, initial=0)
    def __init__(self, *args, **kwargs):
        super(TvshowModelForm, self).__init__(*args, **kwargs)

    class Meta:
        model = Tvshow
        exclude = ('user')

class UpdateTvshowView(UpdateView):
    form_class = TvshowModelForm
    model = Tvshow
    template_name = "tvshow_form.html"

    #Only the user who added it should be allowed to edit
    def form_valid(self, form):
        self.object = form.save(commit=False)
        #Check for duplicates and similar results, raise an error/warning if one is found     
        dup_list = get_object_duplicates(Tvshow, title = self.object.title)
        if dup_list:
            messages.add_message(self.request, messages.WARNING, 
'A tv show with this name already exists. Are you sure this is not the same one? Click submit again once you\'re sure this is new content'
               )
#            Experiment 1, I don't know why this doesn't work
#            form.fields['force'] = forms.CharField(required=False, initial=1)

#            Experiment 2, does not work: cleaned_data is not used to generate the new form
#            if form.is_valid():
#                form.cleaned_data['force'] = 1

#            Experiment 3, does not work: querydict is immutable
#            form.data['force'] = u'1'

        if self.object.user != self.request.user:
            messages.add_message(self.request, messages.ERROR, 'Only the user who added this content is allowed to edit it.')

        if not messages.get_messages(self.request):
            return super(UpdateTvshowView, self).form_valid(form)
        else:
            return super(UpdateTvshowView, self).form_invalid(form) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T12:17:49.003

## 解决方案

在此处作为答案发布的想法的帮助下解决了这个问题，特别是 Alexander Larikov 和 Chris Lawlor 的想法，我想发布我的最终解决方案，以便其他人可以从中受益。

事实证明，使用 CBV 可以做到这一点，我更喜欢它。（因为我喜欢保持一切面向对象）我还使表单尽可能通用。

首先，我制作了以下表格：

```
class BaseConfirmModelForm(BaseModelForm):
    force = forms.BooleanField(required=False, initial=0)

    def clean_force(self):
        data = self.cleaned_data['force']
        if data:
            return data
        else:
            raise forms.ValidationError('Please confirm that this {} is unique.'.format(ContentType.objects.get_for_model(self.Meta.model)))

class TvshowModelForm(BaseModelForm):            
    class Meta(BaseModelForm.Meta):
        model = Tvshow
        exclude = ('user')

"""
To ask for user confirmation in case of duplicate title
"""
class ConfirmTvshowModelForm(TvshowModelForm, BaseConfirmModelForm):
    pass 
```

现在制作合适的意见。这里的关键是发现 get_form_class 而不是使用 form_class 变量。

```
class EditTvshowView(FormView):       
    def dispatch(self, request, *args, **kwargs):
        try:
            dup_list = get_object_duplicates(self.model, title = request.POST['title'])  
            if dup_list:         
                self.duplicate = True
                messages.add_message(request, messages.ERROR, 'Please confirm that this show is unique.')
            else:
                self.duplicate = False
        except KeyError:
            self.duplicate = False
        return super(EditTvshowView, self).dispatch(request, *args, **kwargs)

    def get_form_class(self):
        return ConfirmTvshowModelForm if self.duplicate else TvshowModelForm

"""
Classes to create and update tvshow objects.
"""
class CreateTvshowView(CreateView, EditTvshowView):  
    pass

class UpdateTvshowView(EditTvshowView, UpdateObjectView):
    model = Tvshow 
```

我希望这将使其他有类似问题的人受益。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T08:10:56.283

我会将其发布为答案。在表单的`clean`方法中，您可以按照您想要的方式验证用户数据。它可能看起来像这样：

```
def clean(self):
    # check if 'force' checkbox is not set on the form
    if not self.cleaned_data.get('force'):
        dup_list = get_object_duplicates(Tvshow, title = self.object.title)
        if dup_list:
            raise forms.ValidationError("A tv show with this name already exists. "
                                        "Are you sure this is not the same one? "
                                        "Click submit again once you're sure this "
                                        "is new content") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T20:07:56.247

您可以将 POST 数据粘贴在用户会话中，重定向到包含简单确认/拒绝表单的确认页面，该表单将 POST 到另一个处理确认的视图。如果确认更新，则将 POST 数据拉出会话并正常处理。如果更新被取消，请从会话中删除数据并继续。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T12:06:53.823

我必须做一些类似的事情，我可以使用 Jquery Dialog（以显示表单数据是否会“重复”事物）和 Ajax（发布到进行所需验证的视图并在是否存在问题时返回）来实现。如果数据可能重复，则会在出现重复条目​​的位置显示一个对话框，并且它有 2 个按钮：确认或取消。如果有人点击“确认”，您可以继续原始提交（例如，使用 jquery 提交表单）。如果没有，您只需关闭对话框并让一切保持原样。

我希望它有所帮助，并且您理解我的描述....如果您需要帮助，请告诉我，以便我可以复制您的示例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-13T16:15:45.843

比使用 vaidationerror 更简洁的替代方法是使用 Django 的内置表单向导功能：[https](https://django-formtools.readthedocs.io/en/latest/wizard.html) ://django-formtools.readthedocs.io/en/latest/wizard.html 这使您可以将多个表单链接在一起并对其进行操作一旦它们都被验证。

# java - 是否可以命名使用机器人截取的屏幕截图？

> ID：11728228
> 
> 赞同：1
> 
> 时间：2012-07-30T19:27:01.687
> 
> 标签：java, testing, automation, robotium

我正在使用 android 进行一些测试，并且想给屏幕截图一个名称，而不是它们被拍摄的时间。查看代码，有一种方法可以通过将 a 传递给`String name`方法来执行此操作，但是当我尝试执行此操作时，出现错误。有谁知道这可能是为什么？

这是我使用的方法：

`solo.takeScreenshot("FileName");`

或者：

```
String fileName = "FileName";
solo.takeScreenshot(filename); 
```

都不工作。任何想法为什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:38:33.460

从这里查看javadocs：[http ://code.google.com/p/robotium/downloads/detail?name=robotium-solo-3.3-javadoc.jar](http://code.google.com/p/robotium/downloads/detail?name=robotium-solo-3.3-javadoc.jar)

我没有看到任何带有参数的 takeScreenshot() 方法。因此，在不了解您使用的版本以及遇到的错误的更多信息的情况下，我不确定是否可以提供帮助。

但是，如果您想扩展`Solo`类以添加您想要的方法，请尝试查看以下问题：[Android，Robotium - 截图问题](https://stackoverflow.com/questions/8819542/android-robotium-issue-taking-screenshot)

# python - 读取/计数行中的字符？

> ID：11728230
> 
> 赞同：-1
> 
> 时间：2012-07-30T19:27:07.290
> 
> 标签：python, count, character

我正在尝试读取/计算文件上的字符（位于第 2 行）

文件的所有偶数行都与此类似：

---------------LL---NE--HVKTHTEEK---PF-ICTVCR-KS----------

到目前为止，这是我的代码，但我收到错误消息：

对于 len [(line2)] 中的字符：TypeError：'builtin_function_or_method' 对象不可下标

```
 with open(filename) as f:
    for line, line2 in itertools.izip_longest(f, f, fillvalue=''):
        tokenizer=line.split()
        print line, line2
        print tokenizer[4]
        for character in len[(line2)]:
           print 't' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:28:22.963

问题是这`len`是一个内置函数（`len(mystring)`返回一个整数，它是字符串中的字符数）。您不能为其下标（即，使用方括号将导致您在问题中引用的 TypeError）。我不太确定你想在这里做什么，也许你想要：

```
 for character in line2:
     print character 
```

或者你可能想要：

```
 for i,character in enumerate(line2):
     print i,character 
```

从评论中，我仍然很难得到你想要的东西，但我认为你可能想要这样的东西：

```
tokenizer = line.replace('-',' ').split()[4]
idx = line.index(tokenizer)
count = line[:idx].count('-') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:38:23.163

`line2`是一个字符串，并且`len(line2)`是一个整数（ 中的字符数`line2`）。方括号用于索引（或切片）序列，因此例如您可以获取`line2`using的第一个字符`line2[0]`，或使用 .的最后一个字符`line2[-1]`。

`len`内置函数不是序列，这就是为什么在它之后使用方括号会导致您看到的错误。

您可以使用`for`循环进行迭代，但您必须遍历可迭代的内容。你不能迭代一个整数，所以`for character in len(line2):`也会失败。

请改用以下方法之一：

```
# loop over each character in the string
for character in line2:
    ...

# loop over [0, 1, ..., len(line2)-1]
for i in range(len(line2)):
    ...

# combination of above methods, i will be the index of character in the string
for i, character in enumerate(line2):
    ... 
```

# google-chrome-extension - 从 chrome webstore 扩展中删除受信任的测试人员

> ID：11728232
> 
> 赞同：2
> 
> 时间：2012-07-30T19:27:14.883
> 
> 标签：google-chrome-extension

我正在尝试将我的扩展发布给受信任的测试人员。（如此处所述：[https](https://developers.google.com/chrome/web-store/docs/publish#testaccounts) ://developers.google.com/chrome/web-store/docs/publish#testaccounts ）在发布页面中，我将受信任的测试人员下拉列表留空，然后单击“发布给受信任的测试人员”。现在如帮助中心所述，我添加了一个电子邮件 ID 作为受信任的测试人员。一切正常，用户可以通过直接 url 访问 webstore 中的扩展。但问题是，现在我从受信任的测试人员列表中删除了用户电子邮件 ID，但该用户仍然能够访问扩展程序。尝试注销登录，但用户仍然能够使用 URL 访问扩展程序。

如何阻止该用户访问我的扩展程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T21:26:45.057

你应该尝试`unpublish`你的扩展。然后使用不同的电子邮件 ID 再次“发布给受信任的测试人员”。

# mysql - sql group by 和行到列

> ID：11728233
> 
> 赞同：0
> 
> 时间：2012-07-30T19:27:16.353
> 
> 标签：mysql, sql, join, group-by

我需要一点关于 sql 的帮助。

所以现在我有一个类似的查询：

```
 SELECT  q.id, 
           q.approved, 
           up.username, 
           h1.name AS h_name1, 
           h2.name AS h_name2,
           s.title,
           v.points
     FROM  votes v, questionaries q
     JOIN  (heroes h1, heroes h2, skills s)  
       ON  (q.hero1=h1.id AND q.hero2=h2.id AND  q.hero1 = s.hero_id)
     JOIN  user_profiles up 
       ON  q.user_id = up.user_id
    WHERE  s.id = v.skill
      AND  q.approved = 2 
```

这样我得到下一个数据结构：

```
id appr username    h1    h2   skill points

32  2  username  hero1  hero2  skill1  42
32  2  username  hero1  hero2  skill2  35
32  2  username  hero1  hero2  skill3  43
32  2  username  hero1  hero2  skill4  23

...
and many rows 
```

但所需的结构是：

```
id appr username   h1     h2     s1    s2      s3     s4     p1   p2   p3   p4

32  2    username  hero1 hero2 skill1 skill2 skill3 skill4   42   35   43   23 
```

有没有办法像这样转换选择结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T23:51:23.847

Mysql 没有pivot，但是有group_concat。我认为以下内容可能会满足您的需求：

```
select id, approved, username, hero1, hero2,
       group_concat(title sep ',') as skills,
       group_concat(cast(points as varchar(255)) sep ',')
from (SELECT  q.id, 
              q.approved, 
              up.username, 
              h1.name AS h_name1, 
              h2.name AS h_name2,
              s.title,
              v.points
        FROM  votes v, questionaries q
        JOIN  (heroes h1, heroes h2, skills s)  
          ON  (q.hero1=h1.id AND q.hero2=h2.id AND  q.hero1 = s.hero_id)
        JOIN  user_profiles up 
          ON  q.user_id = up.user_id
       WHERE  s.id = v.skill
         AND  q.approved = 2
     ) t
group by id, approved, username, hero1, hero2 
```

这会将技能和点放在一个逗号分隔的列表中，每个列表都在自己的列中。

# javascript - 获取某个 JSON 对象字段的值

> ID：11728236
> 
> 赞同：0
> 
> 时间：2012-07-30T19:27:36.343
> 
> 标签：javascript, jquery, json

我有以下 JSON 对象：

```
var definitionsObject = {"company" : "Some information about company"}; 
```

这个对象实际上将包含很多定义，而不仅仅是一个。而且我还有一个链接点击的以下事件处理程序，它有一个包含术语“公司”的自定义“数据名称”属性：

```
$(".definitinOpener").click(function() {
      $this = $(this);
      var hintID = $this.attr("data-name");
      var hintText = definitionsObject.hintID;
}); 
```

所以，我要做的是获取单击链接的“数据名称”自定义属性的值，转到`definitionsObject`对象并获取等于“数据名称”属性值的字段值。然而，以这种方式，我总是得到“未定义”。

有人可以帮我弄清楚我到底做错了什么吗？

事先谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T19:29:53.137

您可以通过两种方式在对象中查找值。

```
var obj = { key : 'value' }
var lookup = 'key'

console.log( obj.lookup ) //undefined
console.log( obj.key ) //value
console.log( obj[lookup] ) //value 
```

你可能想要这个：

```
var hintText = definitionsObject[hintID]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:32:21.223

`definitionsObject.hintID`不回来`definitionsObject[hintId]`，就会回来`definitionsObject['hintId']`。

我相信你可以做到这一点

```
var hintText = definitionsObject[hintId]; 
```

代替

```
var hintText = definitionsObject.hintID; 
```

# ruby-on-rails - 如果为开发预编译，如何在开发期间访问资产

> ID：11728238
> 
> 赞同：0
> 
> 时间：2012-07-30T19:27:46.900
> 
> 标签：ruby-on-rails, configuration, asset-pipeline

我最近将一个项目的第一次迭代部署到 Heroku。因为我进行了预编译，所以我在开发过程中使用的所有资产现在都在 public/assets 和 public/system 文件夹中。

我[知道](https://stackoverflow.com/questions/8356251/rails-3-1-assets-strange-serving-in-development)在开发过程中访问我的资产有两种选择。默认选项似乎是允许 public/assets 文件覆盖我的 app/assets 文件。但是，如果我这样做，我在 app/assets 中所做的任何 CSS 更改都不会反映。

另一种选择是通过以下方式仅访问 app/assets 文件夹：

```
config.serve_static_assets = false 
```

但是，通过这样做，我在开发过程中看不到我的任何图像，因为它们已经被预编译并移动到 public/system

有没有办法从应用程序/资产访问我的 CSS/JS 文件，但仍然从公共/系统加载我的图像？

还是我应该在 public/assets 文件夹中完成我所有的 CSS/JS 开发？任何反馈将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:37:24.933

部署后我喜欢运行

```
rake assets:clean 
```

摆脱`public/assets`. 这让 Rails 在开发模式下回顾我的`app/assets`目录，因为我的资产`public/assets`不再存在。

`app/assets/images`此外，除非您的情况特殊，否则您应该将图像放入`public/system`. `rake assets:precompile`也将图像推入`public/assets`。执行此操作时，您需要`image_path(...)`在`___.css.scss`文件中使用以允许使用在预编译期间为图像资产生成的散列文件名正确更新路径。

最后，阅读**[这份 Rails 指南](http://guides.rubyonrails.org/asset_pipeline.html)**似乎对你有很大帮助。

# sql - 如何通过电子邮件将多个查询发送给多个用户

> ID：11728239
> 
> 赞同：0
> 
> 时间：2012-07-30T19:27:54.993
> 
> 标签：sql, vb.net, dataset, tableadapter

我有一个通过调度程序自动启动 Windows 的程序。它所做的是运行查询，然后通过电子邮件发送查询结果。这一切都有效。我想做的是将程序提升到一个新的水平。我们有 10 个地点。位置 DM 应每天收到此报告（仅收到他们的商店）。所以基本上我想做的是以不同的表格适配器的形式重复代码并通过电子邮件发送该信息。我的 C# 代码是：

```
Imports System.Net.Mail
Imports System.Linq

Public Class Form1

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

        Try
            Dim SmtpServer As New SmtpClient()
            Dim mail As New MailMessage()
            Me.Paid_Out_TbTableAdapter.Fill(Me.DataSet.Paid_Out_Tb)
            Dim payouts = _
            <html>
                <body>
                    <table border="1">
                        <tr><th>Store #</th><th>Date</th><th>Amount</th><th>User</th><th>Comment</th></tr>
                        <%= From paidOut In Me.DataSet.Paid_Out_Tb.AsEnumerable _
                            Select <tr><td><%= paidOut.Store_Id %></td>
                                       <td><%= Convert.ToDateTime(paidOut.Paid_Out_Datetime).ToString("M/d/yy") %>
                                       </td><td><%= "$" & paidOut.Paid_Out_Amount.ToString("0.00") %></td>
                                       <td><%= paidOut.Update_UserName %></td>
                                       <td><%= paidOut.Paid_Out_Comment %></td></tr> %>
                    </table>
                </body>

            </html>

            If (Me.DataSet.Paid_Out_Tb.Count = 0) Then 'This cheks to see if the dataset is Null.  We do not want to email if the set is Null

                Me.Close()

            Else

                SmtpServer.Credentials = New  _
                Net.NetworkCredential("*****", "****") 'Assign the network credentials
                SmtpServer.Port = 25 'Assign the SMTP Port
                SmtpServer.Host = "10.0.*.*" 'Assign the Server IP
                mail = New MailMessage() 'Starts a mail message
                mail.From = New MailAddress("***@***.com") 'Sets the "FROM" address
                mail.To.Add("****@****.com") 'Sets the "To" address
                'mail.CC.Add("****@****.com") 'set this if you would like to CC
                mail.Subject = "Paid Out Report for 1929"
                mail.IsBodyHtml = True
                mail.Body = payouts.ToString()
                SmtpServer.Send(mail)
                'MsgBox("mail send")
            End If

        Catch ex As Exception

            MsgBox(ex.ToString)

        End Try 
```

我的查询是：

```
SELECT        Store_Id, Paid_Out_Amount, Paid_Out_Comment, Paid_Out_Datetime, Update_UserName, Till_Number
FROM            Paid_Out_Tb
WHERE        (Store_Id = 1929) AND (Paid_Out_Datetime >= DATEADD(day, DATEDIFF(day, 0, GETDATE()) - 1, 0)) AND (Paid_Out_Datetime < DATEADD(day, DATEDIFF(day, 0, 
                         GETDATE()), 0)) AND (Paid_Out_Amount > 20) OR
                         (Store_Id = 1929) AND (Paid_Out_Datetime >= DATEADD(day, DATEDIFF(day, 0, GETDATE()) - 1, 0)) AND (Paid_Out_Datetime < DATEADD(day, DATEDIFF(day, 0, 
                         GETDATE()), 0)) AND (Paid_Out_Comment LIKE N'%' + 'Filter' + '%') 
```

同样，这一切都有效。但我的第二个查询将完全相同，只是我将用“112”替换 store_ID。然后，我需要将该查询结果通过电子邮件发送到与 1929 id 不同的地址......关于如何最好地完成此任务的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:31:20.047

```
Imports System.Net.Mail
Imports System.Linq

Public Class Form1

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        'TODO: This line of code loads data into the 'DataSet.Paid_Out_Tb' table. You can move, or remove it, as needed.

        Try
            Dim SmtpServer As New SmtpClient()
            Dim mail As New MailMessage()
            Me.Paid_Out_TbTableAdapter.Fill(Me.DataSet.Paid_Out_Tb)
            Me.DataTable1TableAdapter.Fill(Me.DataSet.DataTable1)
            Dim payouts = _
            <html>
                <body>
                    <table border="1">
                        <tr><th>Store #</th><th>Date</th><th>Amount</th><th>User</th><th>Comment</th></tr>
                        <%= From paidOut In Me.DataSet.Paid_Out_Tb.AsEnumerable _
                            Select <tr><td><%= paidOut.Store_Id %></td>
                                       <td><%= Convert.ToDateTime(paidOut.Paid_Out_Datetime).ToString("M/d/yy") %>
                                       </td><td><%= "$" & paidOut.Paid_Out_Amount.ToString("0.00") %></td>
                                       <td><%= paidOut.Update_UserName %></td>
                                       <td><%= paidOut.Paid_Out_Comment %></td></tr> %>
                    </table>
                </body>

            </html>
            Dim Payouts453 = _
            <html>
                <body>
                    <table border="1">
                        <tr><th>Store #</th><th>Date</th><th>Amount</th><th>User</th><th>Comment</th></tr>
                        <%= From paidOut In Me.DataSet.DataTable1.AsEnumerable _
                            Select <tr><td><%= paidOut.Store_Id %></td>
                                       <td><%= Convert.ToDateTime(paidOut.Paid_Out_Datetime).ToString("M/d/yy") %>
                                       </td><td><%= "$" & paidOut.Paid_Out_Amount.ToString("0.00") %></td>
                                       <td><%= paidOut.Update_UserName %></td>
                                       <td><%= paidOut.Paid_Out_Comment %></td></tr> %>
                    </table>
                </body>

            </html>
            If (Me.DataSet.Paid_Out_Tb.Count = 0) Then 'This cheks to see if the dataset is Null.  We do not want to email if the set is Null

                Me.Close()

            Else

                SmtpServer.Credentials = New  _
                Net.NetworkCredential("****", "****") 'Assign the network credentials
                SmtpServer.Port = 25 'Assign the SMTP Port
                SmtpServer.Host = "10.0.*.**" 'Assign the Server IP
                mail = New MailMessage() 'Starts a mail message
                mail.From = New MailAddress("*@**.com") 'Sets the "FROM" address
                mail.To.Add("**@**.com") 'Sets the "To" address
                'mail.CC.Add("**@**.com") 'set this if you would like to CC
                mail.Subject = "Paid Out Report for 1929"
                mail.IsBodyHtml = True
                mail.Body = payouts.ToString() & Payouts453.ToString() 'this is to add another chart  You would use a seperate dataset obviously
                SmtpServer.Send(mail)
                'MsgBox("mail send")
            End If

        Catch ex As Exception

            MsgBox(ex.ToString)

        End Try

        Me.Close() 'Closes the program when it's finished.

    End Sub 
```

完成此任务的最简单方法是添加另一个 tableadapter 并运行单独的查询......这可能不是最有效的，但对于正在传输的数据量......它可以工作......

# javascript - 使用 javascript 将值从 td 分配给 asp.net hiddenfield

> ID：11728242
> 
> 赞同：0
> 
> 时间：2012-07-30T19:28:19.137
> 
> 标签：javascript, asp.net, css, vb.net

我有与以前的海报相同的问题，我需要在页面加载之前设置会话变量。因为 pageload 在我的 gridview.RowCommand 之前触发，所以我尝试使用下面文章中的这个方法，它结合了隐藏字段的使用。我的最终目标是删除 onRowCommand 事件并使用文章中介绍的解决方案。我一直在使用 firebug 来调试我的 javascript，但是每次当我查看 this.parent 时出现“未定义”错误（这是一个 td，this.parent 应该是 tr）。根据萤火虫， this.parent.cells[2].textContent 是我得到我想要的 OID 值的方式。由于我花很少时间编写 javascript，任何帮助将不胜感激。

来自 JS 的问题代码行

```
this.parent.cells[2].textContent 
```

我的网格视图

```
<asp:GridView ID="gridViewOpenOrders" CssClass="gvOpenOrders" runat="server" AutoGenerateColumns="False"
            AllowPaging="True" RowStyle-BorderStyle="None"
            DataKeyNames="AccountNumber,OrderID"
            Width="802px" OnRowCommand="gridViewOpenOrders_RowCommand">
            <Columns>
                <asp:ButtonField Text="Select" HeaderStyle-Width="40px" ItemStyle-CssClass="assignOrderID"/>
                <asp:BoundField DataField="OrderDate" HeaderText="Date" SortExpression="OrderDate"
                    DataFormatString="{0:d}">
                    <HeaderStyle Width="100px" />
                </asp:BoundField>
                <asp:BoundField DataField="OrderID" HeaderText="OID" SortExpression="OrderID">
                    <HeaderStyle Width ="40px" />
                </asp:BoundField>             
            </Columns>
            <HeaderStyle CssClass="ColumnHeaders" />
            <RowStyle CssClass="ColumnRows" />
            <SelectedRowStyle BackColor="#D9D9FF" />
        </asp:GridView> 
```

我的Javascript：

```
<script type="text/javascript">
    $(document).ready(function() {
        $(".assignOrderID").click(function () {
            var testing = $(".assignOrderID")
            alert(this.parent)
            alert(this.parent.cells[2])
            alert(this.parent.cells[2]).textContent
            document.getElementById('ContentPlaceHolder1_formViewOrder_hiddenFieldOrderID').value = this.parent.cells[2].textContent
            alert('hi2');
        });
    });
</script> 
```

页面加载代码：

```
Dim t As HiddenField = formViewOrder.FindControl("hiddenFieldOrderID")
Session.Add("OrderID", t.Value) 
```

研究： [在 asp:Button 中触发 AutoPostBack 之前设置会话变量](https://stackoverflow.com/questions/11656345/setting-a-session-variable-before-autopostback-fires-in-an-aspbutton)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:37:51.283

首先，您的 HiddenField`ClientIdMode`属性应该是`static`. 然后你可以像这样得到 HiddenField：

```
HidddenField hdn = this.Page.FindControl("gridViewOpenOrders").FindControl("hiddenFieldOrderID") as HiddenField 
```

# objective-c - Objective C 如何获取 Facebook 访问令牌

> ID：11728248
> 
> 赞同：0
> 
> 时间：2012-07-30T19:29:00.390
> 
> 标签：objective-c, ios

我在从网络上为我正在编写的 Facebook Feed 应用程序提取 Facebook 访问令牌时遇到了一些问题。这个问题与获得 Facebook 令牌并不严格相关；这只是框架的问题。当我转到 https://graph.facebook.com/oauth/access_token?grant_type=client_credentials&client_id=[APP_ID]&client_secret=[APP_SECRET] 时，我在一个页面上返回了一个令牌，上面写着：

```
access_token=464483653570261|cY9NHFBWCDJ9hSQfswWFg0FDZvw 
```

如何将网页中的内容解析到我的应用程序中？我对Objective C比较陌生（而且我只有一年的基本编码经验），所以我尝试使用我在网上找到的一种方法来获取JSON提要，结合一个简单的解析方法，但是它没有用。代码如下：

```
 id getToken = [self objectWithUrl:[NSURL URLWithString:@"https://graph.facebook.com/
                           oauth/access_token?grant_type=client_credentials&
                           client_id=464483653570261&
                           client_secret=55bb8395ed0293bf37af695f6cdaa1fb"]];
    NSString *fullToken = (NSString *)getToken;
    NSLog(@"fullToken: %@", fullToken);
    NSArray *components = [fullToken componentsSeparatedByString:@"="];
    NSString *token = [components objectAtIndex:1];
    NSLog(@"token: %@", token); 
```

我的两个 NSLogs 都说各自的字符串指向（空）。我不确定我做错了什么，而且我在互联网上找到答案的运气并不好，因为我不知道该怎么称呼我正在尝试做的事情。如果您有任何帮助或替代方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T19:37:04.713

从外观上看，你得到的值不是 JSON，它只是一个字符串。

尝试这样的事情：

```
NSURL * url = [NSURL URLWithString:@"https://graph.facebook.com/
                       oauth/access_token?grant_type=client_credentials&
                       client_id=464483653570261&
                       client_secret=55bb8395ed0293bf37af695f6cdaa1fb"]];
NSString * fullToken = [NSString stringWithContentsOfUrl: url];
NSLog(@"fullToken: %@", fullToken);
NSArray *components = [fullToken componentsSeparatedByString:@"="];
NSString *token = [components objectAtIndex:1];
NSLog(@"token: %@", token); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-13T12:49:21.093

有一种更简单的方法可以使用 ACAccountStore 和 ACAccountType 获取用户的 access_token。检查下面的完整代码：

```
ACAccountStore *accountStore = [[ACAccountStore alloc] init];
ACAccountType *accountType =  [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
NSDictionary *FBOptions = [NSDictionary dictionaryWithObjectsAndKeys:FACEBOOK_APP_ID, ACFacebookAppIdKey,@[@"email"],ACFacebookPermissionsKey, nil];

[accountStore requestAccessToAccountsWithType:accountType options:FBOptions completion:
 ^(BOOL granted, NSError *error) {
     if (granted) {

         NSArray *facebookAccounts = [accountStore accountsWithAccountType:accountType];
         FBAccount = [facebookAccounts firstObject];
         NSLog(@"token :%@",[[FBAccount credential] oauthToken]);

     } else {
         NSLog(@"error getting permission %@",error);
         if([error code]== ACErrorAccountNotFound){
             NSLog(@"Account not found. Please setup your account in settings app"); 
         }
         else {
             NSLog(@"Account access denied");
         }

     }
 }]; 
```

# css - Drawing graphs with purely HTML5

> ID：11728250
> 
> 赞同：4
> 
> 时间：2012-07-30T19:29:07.040
> 
> 标签：css, html, html5-canvas

Can any one point me to any resources for making graphs in **HTML5**? Most of resources I have seen through Google use animated graphs, I just want a simple static graph in HTML5\. One more thing, I am really very weak in graphs, so a simple, easy to understand solution would be very helpful. I will be using this XML file to display data in graphical format. [US Canada Mortality](http://www-acad.sheridanc.on.ca/~joe/SYST35288/2012/assignments/uscanadamortality.xml "US Canada Mortality")

Thanks in advance :-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T19:35:47.360

Check out the new `canvas` tag. It allows you to draw shapes including rectangles and circles using javascript. [Canvas Tutorials](http://www.html5canvastutorials.com/)

If you're looking for just a standard bar chart, though, you can use the `div` tag with a specified width, height, and background color. This method avoids the use of javascript.

# python - urllib2.HTTPError：使用新的 Bing API 查询时出现 HTTP 错误 401（在 azure 市场中）

> ID：11728256
> 
> 赞同：4
> 
> 时间：2012-07-30T19:29:22.880
> 
> 标签：python, authentication, urllib2, http-status-code-401, bing-api

所以，我已经根据堆栈溢出的同一屋檐下的大多数答案进行了更正，我仍然无法解决这个问题。

```
queryBingFor = "Google Fibre"
quoted_query = urllib.quote(queryBingFor)
account_key = "dslfkslkdfhsehwekhrwkj2187iwekjfkwej3"

rootURL = "https://api.datamarket.azure.com/Bing/Search/v1/"
searchURL = rootURL + "Image?format=json&Query=" + quoted_query
cred = base64.encodestring(accountKey)

reqBing = urllib2.Request(url=searchURL)
author = "Basic %s" % cred
reqBing.add_header('Authorization',author)

readURL = urllib2.urlopen(reqBing) 
```

我知道我在上面的代码中遗漏了一些东西，这给了我一个：

```
urllib2.HTTPError: HTTP Error 401: The authorization type you provided is not supported.  Only Basic and OAuth are supported 
```

关于问题可能是什么的任何线索？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T14:47:56.637

所以，这是工作代码。我正在创建的问题是查询关键字的格式。

```
 queryBingFor = "'google fibre'" # the apostrophe's required as that is the format the API Url expects. 
 quoted_query = urllib.quote(queryBingFor)

 rootURL = "https://api.datamarket.azure.com/Bing/Search/"
 searchURL = rootURL + "Image?$format=json&Query=" + quoted_query

 password_mgr = urllib2.HTTPPasswordMgrWithDefaultRealm()
 password_mgr.add_password(None, searchURL,username,accountKey)

 handler = urllib2.HTTPBasicAuthHandler(password_mgr)
 opener = urllib2.build_opener(handler)
 urllib2.install_opener(opener)
 readURL = urllib2.urlopen(searchURL).read() 
```

这应该以相应的 JSON 格式给出结果。当我使用 urllib2 的 httpbasicauthhandler 时，我认为密码已隐式转换为 base64。

# r - ggplot：确定 geo_map() 调用中连续数据的中断

> ID：11728257
> 
> 赞同：2
> 
> 时间：2012-07-30T19:29:35.257
> 
> 标签：r, map, ggplot2

希望这很简单：我正在使用 ggplot 绘制等值线图。

我如何通过中断（分位数、jenks 等）来映射连续变量，而不是依赖默认梯度？理想情况下，我希望使用输出`classIntervals`并将其作为美学传递，但我尝试过，`scale_y_continuous`但这会缩放地图框本身而不是被映射的填充变量。

那么，如何通过休息，他们采取哪种形式？

# oracle - 如何使用 oracle 11g 数据库更新 Grails 中的 hibernate_sequence？

> ID：11728269
> 
> 赞同：1
> 
> 时间：2012-07-30T19:30:34.507
> 
> 标签：oracle, hibernate, grails, squirrel-sql

我将一些数据导入到我的模式中，并且我的所有表都有一个序列。在我的旧应用程序中，序列大约为 1000，但这个新序列从 4 开始，因此在尝试输入新行时我遇到了冲突。有没有办法更新序列，或者有没有办法在数据库创建期间将序列设置为某个数字？我不介意创建删除并再次导入数据。我基本上只是想将序列设置为从 1000 开始。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T19:55:37.913

您应该能够增加增量，访问序列，然后重置增量，例如：

```
alter sequence [sequence name]
increment by [desired value minus current value];

select [sequence name].nextval from dual;

alter sequence [sequence name]
increment by 1; 
```

我从以下网址得到这个语法：[http ://www.techonthenet.com/oracle/sequences.php](http://www.techonthenet.com/oracle/sequences.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:54:34.280

创建序列时，您始终可以设置序列的起始编号：

```
CREATE SEQUENCE my_sequence
    MINVALUE 1000
    START WITH 1000
    INCREMENT BY 1; 
```

# extjs - Extjs4，什么是lazyRender？

> ID：11728272
> 
> 赞同：2
> 
> 时间：2012-07-30T19:30:44.867
> 
> 标签：extjs, extjs4

Extjs 中的lazyRender 是什么？

我在 Extjs 文档中找不到这方面的内容，也找不到任何描述lazyRender 的网页。

我可以问一个很好的例子吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T19:35:44.613

`lazyRender`是一个配置选项。设置它以`true`防止组合框在请求之前呈现（在呈现到 Ext.Editor（例如网格）时应始终使用，默认为 false）。

这是来自 3.x 版，但用法与 4.x 版相同。

[http://docs.sencha.com/ext-js/3-4/#!/api/Ext.form.ComboBox-cfg-lazyRender](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.form.ComboBox-cfg-lazyRender)

# java - 一个简单的 Java 竞态条件

> ID：11728277
> 
> 赞同：2
> 
> 时间：2012-07-30T19:31:03.143
> 
> 标签：java, race-condition

我只是想写一个竞争条件的例子：

**MyParallelClass.java**：

```
public class MyParallelClass implements java.lang.Runnable {
    public int counter = 0;

    @Override
    public void run() {
        if (test.globalVar > 0) {
            for (int i = 0; i < 1000000; i++) {
                counter++;
            }
            test.globalVar--;
        }
    }
} 
```

**测试.java**：

```
public class test {
    public static int globalVar;

    public static void main(String[] args) {
        globalVar = 1;

        MyParallelClass a = new MyParallelClass();
        MyParallelClass b = new MyParallelClass();

        new Thread(a).start(); // Thread A
        new Thread(b).start(); // Thread B

        System.out.println(globalVar);
    }
} 
```

**我认为会发生的事情：**

我认为`0`如果线程 A 在线程 B 启动之前完全执行，这可能会输出。

该变量`test.globalVar`也可以像这样被操纵：

```
Thread A                     -  Thread B  
checks if (globalVar > 0)
      looping ...               checks if (globalVar > 0)
      looping ...               execute all four bytecode commands of "test.globalVar--;"
      execute test.globalVar--; 
```

所以 的值`test.globalVar`是`-1`。

因此，要么执行 if 语句之一，要么执行两者。

**实际发生了什么：**

我得到`0`和`1`作为主要方法的输出。为什么我得到`0`and`1`而不是`0`and `-1`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T19:37:54.840

您正在减少`globalVar`两次。最后的可能值为`globalVar`：

*   `-1`- 如果一切正常并且两个线程在打印之前正确地减少了值

*   `0`：

    *   如果只有一个线程设法减少变量，而第二个线程在打印之前没有完成

    *   如果`globalVar`同时减少

*   `1`：

    *   如果`System.out.println()`设法在两个线程完成之前执行（很可能）。`globalVar`确实被修改了，但是在它已经被打印出来之后

    *   由于可见性问题`main`线程看到原始`globalVar`值，而不是由不同线程修改的值。您需要某种同步或`volatile`关键字来立即（或永远）查看其他线程所做的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:39:15.793

这

```
System.out.println(globalVar); 
```

不等待线程完成。此时线程可能已完成，也可能未完成。因此，该值可以是`0`、`1`或`-1`取决于两个线程是否都已完成、一个已完成或两者均未完成。

为了进行更好的测试，
-`Thread.sleep()`在线程中使用以确保存在延迟
- 在不同线程中使用不同的延迟以更好地可视化竞争条件。
- 您可能还想在线程中打印变量的值。这样，您就拥有三个线程（A、B 和主线程）并获得更好的可视化效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T19:37:15.600

好问题。我认为您需要进行更多测试。:-)

您可以尝试将 Runnable 类中的循环更改为以随机数毫秒 (500-1000) 休眠。仅循环 10 次。看看您是否没有达到预期的比赛条件。

我认为大多数计算机都太快了。您的简单循环可能没有做足够的工作来导致线程切换。

我喜欢这类问题，因为我总是遇到这样的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T19:39:41.203

如果在任一线程递减该值之前打印该值，您可以获得 1。

# highcharts - Highcharts传奇项目悬停事件？

> ID：11728279
> 
> 赞同：5
> 
> 时间：2012-07-30T19:31:06.683
> 
> 标签：highcharts

我有一个图表，我希望某些系列在图例中不可点击，但其他系列可点击。这很容易，因为有一个 legendItemClick 事件，我无法根据系列进行任何操作。一个例子在这里：http: [//jsfiddle.net/9PqyG/3/](http://jsfiddle.net/9PqyG/3/)

我的问题是鼠标指针仍然从箭头变为可点击链接手指针，我不希望任何人认为这是可点击的。我知道我可以更改 itemHoverStyle 参数以使箭头出现在所有图例项中，但这会为每个系列更改它。我可以仅针对特定系列进行此操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:55:00.443

我会使用 CSS 选择器： .highcharts-legend-item:first-child:hover { cursor:crosshair; }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-30T23:26:53.883

我实际上是用带有鼠标悬停事件的模态来实现的，这就是你可以做到这一点的方法，请在你的图表函数中插入这个代码：

```
$('#chart_container').on('mouseenter','.highcharts-legend-item',function(event) {
    var seriesName = $(this).text();
    if (seriesName === "this_series_name") {
        $('#myModal').modal('toggle');
    }
}); 
```

然后你可以制作一个模态 div 来打开悬停事件，如下面的这个

```
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    ×
                </button>
                <h4 class="modal-title" id="myModalLabel">Note</h4>
            </div>
            <div class="modal-body">

                <div class="row">
                    <div class="col-md-12">
                        your message here
                    </div>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">
                    Ok
                </button>
            </div>
        </div>
    </div>
</div> 
```

这是一个[演示](https://jsfiddle.net/melsatar/1utnxo48/)

# django - 尽管 RequestContext Django 消息框架不显示消息

> ID：11728282
> 
> 赞同：3
> 
> 时间：2012-07-30T19:31:23.883
> 
> 标签：django, django-templates, django-middleware, django-messages

这是一个难题，

使用 Django 1.4，我无法通过消息中间件设置消息以显示在我的模板中。我梳理了[Django 文档](https://docs.djangoproject.com/en/1.4/ref/contrib/messages/)并确保我的 settings.py 文件引用了相关的应用程序、上下文处理器和中间件。**我已确保我的视图是使用 RequestContext 实例呈现的。** 然而，我仍然无法让任何消息出现在模板中。

**设置.py：**

```
MIDDLEWARE_CLASSES = (
'django.middleware.common.CommonMiddleware',
'django.contrib.sessions.middleware.SessionMiddleware',
'django.middleware.csrf.CsrfViewMiddleware',
'django.contrib.auth.middleware.AuthenticationMiddleware',
'django.contrib.messages.middleware.MessageMiddleware',
)
...
TEMPLATE_CONTEXT_PROCESSORS = (
'django.contrib.auth.context_processors.auth',
'django.core.context_processors.debug',
'django.core.context_processors.i18n',
'django.core.context_processors.request',
'django.core.context_processors.media',
'django.core.context_processors.static',
'django.contrib.messages.context_processors.messages',
'tekextensions.context_processors.admin_media_prefix',
)
...
INSTALLED_APPS = (
'django.contrib.auth',
'django.contrib.contenttypes',
'django.contrib.sessions',
'django.contrib.sites',
'django.contrib.messages',
'django.contrib.staticfiles',
'django.contrib.admin', #Admin interface
'django.contrib.admindocs', #Admin docs
... 
```

我的消息 error_level 设置为 20（即“信息”及以上）。我正在使用默认映射。

**视图.py：**

```
from django.contrib import messages

def index(request, *args, **kwargs):
    #Do some funky jazz which works like build the timeline & page vars
    ...
    messages.error = (request,"Horsey Bollox!")
    messages.add_message = (request, messages.ERROR,"Why won't this f***ing thing work?") #Attempting alternate method
    return render_to_response('funkyjazzdirectory/index.html',
                        {
                            'page': page, 
                            'timeline': timeline,
                        },
                        context_instance=RequestContext(request)) 
```

**模板：（funkyjazzdirectory/index.html）**

```
{% extends "base.html" %}
{% if messages.error %}
    <div class="messages-errors">
        Error:
        <ul>
            {% for msg in messages %}
                <li>{{msg}}</li>
            {% endfor %}
        </ul>
    </div>
{% endif %}
<p>
    Other stuff such as iterating through {{timeline}} which renders absolutely fine
</p> 
```

我也试过用 {{msg}} 代替：

```
<li>{{msg.message}}</li> 
```

没有成功。

页面的其余部分输出正常，Django 不会抛出错误。控制台不包含任何异常。生成的 HTML 代码不包含 div，也不包含任何地方的列表标签。这个扩展的模板（base.html）不使用 {{messages}} 变量，也不调用使用它的模板标签。

我尝试将 {{messages}} 传递到自定义模板标签中，以便在 index.html 模板的顶部进行测试。在这里我可以做到：

```
def __init__(self, messages):
    self.messages = messages
    def render(self, context):
    l = dir(context[self.messages])
        print(l) 
```

...它产生一个可能是消息对象的方法/属性列表。然而，我根本无法对此进行迭代，因为“for m in messages:”甚至不会运行一次。尝试通过以下方式发现该实体的大小：

```
print(len(context[self.messages])) 
```

在控制台中没有给我任何东西。

我让它真正输出任何东西的唯一一次是当我手动将消息对象传递到 render_to_response 标记内的模板中，然后迭代 messages.error ({% for msg in messages.error %}) 这产生了两个要点在正确的 div 中：第一个填充了看起来像 var dump:", POST:, COOKIES:{'csrftoken':"... 第二个要点仅包含最后一条错误消息：“为什么不这样他妈的事情有用吗？”。（显然这只是一个测试，我没有将消息保存在通过 render_to_response 传递的字典中，因为我知道它应该通过上下文到达模板）

那么，我哪里做错了？

为什么我在模板中看不到错误消息？为什么我什至无法让消息出现在控制台中？

任何比我聪明的人能散发的光都会非常有帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T19:44:06.917

您似乎使用了一种很奇怪的方式来添加消息：

```
messages.error = (request,"Horsey Bollox!")
messages.add_message = (request, messages.ERROR,"Why won't this f***ing thing work?") 
```

正确的语法是：

```
messages.error(request,"Horsey Bollox!")
messages.add_message(request, messages.ERROR,"Why won't this f***ing thing work?") 
```

然而，设置和模板很好。

# java - 在 Java Swing 中阻止鼠标输入

> ID：11728289
> 
> 赞同：1
> 
> 时间：2012-07-30T19:31:50.607
> 
> 标签：java, swing, awtrobot, mouse-cursor, fest

我有一个测试 FEST 应用程序，它使用 AWT 机器人在 Swing 界面上模拟某些动作。我的问题是，在机器人测试执行期间移动鼠标指针似乎会取消一些编程操作，比如按下列标题。如果您在执行过程中没有触摸任何东西，那么光标将单独移动到目标并击中它。

在测试完成之前，有没有办法阻止该应用程序的鼠标用户输入？

当然，也许不是一个障碍，而是一种忽略事件、强制 EDT 完成或屏蔽机器人的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:41:21.943

也许您可以使用本机终端命令禁用键盘和鼠标。即 Windows 的 cmd.exe 和 Linux 的终端（取决于应用程序是否必须是可移植的，只需[检查操作系统名称](https://stackoverflow.com/questions/228477/how-do-i-programmatically-determine-operating-system-in-java)，然后运行正确的命令）但是我不确定这是否会使`Robot`无用。我认为不是。

视窗：

> cmd.exe /c %Homedrive%\windows\rundll32.exe 鼠标，禁用
> 
> cmd.exe /c %Homedrive%\windows\rundll32.exe 键盘，禁用

对于 Linux，请参见[此处](http://wpkg.org/Disable_/_enable_keyboard_and_mouse_in_Linux)

**附录**：

据我所知，如果不使用 JNI 禁用用户的键盘和鼠标输入，纯 Java 是不可能的。

这是在 Java 中使用 JNI 禁用鼠标和键盘的一个很好的链接：[Java Global Keyboard / Mouse Hook - JNI](http://www.jotschi.de/?p=90)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:55:15.503

If you are hardy to evolve with end-to-end tests using AWT robot, then try to separate tests to able to run only part that checks touched functionality while all bunch of end-to-end tests should run on build server.

Here is result of end-to-end testing by AWT robot for Swing application that completes on head-less build-server: [http://travis-ci.org/#!/plokhotnyuk/calculator/jobs/1979904/L538](http://travis-ci.org/#!/plokhotnyuk/calculator/jobs/1979904/L538)

# c - 搜索文件并返回值 - 超快

> ID：11728290
> 
> 赞同：0
> 
> 时间：2012-07-30T19:31:54.967
> 
> 标签：c, search

我有一组数据，它有一个名称、一些子值和一个关联的数值。例如：

```
James Value1 Value2 "1.232323/1.232334"
Jim   Value1 Value2 "1.245454/1.232999"
Dave  Value1 Value2 "1.267623/1.277777" 
```

将有大约 100,000 个这样的条目存储在文件或数据库中。我想知道，能够返回与搜索匹配的结果及其相关数值的最快方法是什么。

例如，查询“J”将返回 James 和 Jim 结果，其中最后一列中的数值。

我听说有人提到二叉树搜索、字典搜索、索引搜索。我不知道哪个是阅读的好途径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:05:22.837

这是一个特征不佳的问题。与许多优化问题一样，在资源方面存在权衡。如果您确实想要尽可能快的响应，那么一种可能的方法是将所有可能的搜索编译到准备好的结果表中，这样，给定搜索键，您可以在表中查找搜索键并返回结果。

假设您的字符集仅限于 AZ 和 az，按照今天的标准，每个搜索关键字的条目从 0 到 4 个字符的表将使用适量的内存。每个表条目只需要有两个值：数值列表中的开始和结束位置。（以这种方式编译列表：按名称字段对记录进行排序。仅从记录中提取数值，保持顺序，将它们放入列表中。任何搜索键都必须从该列表返回连续记录的子列表。这是因为搜索的是名称字段的前缀字符串，所以任何匹配搜索键的记录在按名称字段排序时都是相邻的。）

因此，要创建一个表来查找 0 到 4 个字符的任何键，您需要在一个配对表中少于 53^(个 4)条目，其中配对的每个成员都包含一个记录号（32 位或更少）。所以 8•534 = 60.2 MiB 就足够了。（53 是因为您有 52 个字符加上一个标记字符来标记密钥的结尾。替代编码可以减少一些。）

要支持超过 4 个字符的键，您需要扩展它。对于典型数据，4个字符会大大缩小搜索范围，因此您可以将前4个字符表示的记录集进行修剪以获得最终结果。如果数据中存在 4 个字符并没有减少多少搜索量的病态情况，则可以修饰此技术。

那么，这真的是您想要做的，尽可能快地提高速度，而不考虑消耗其他资源（包括工程时间）吗？如果没有，你的实际目标是什么？

# php - 根据 Wordpress 中的自定义字段值批量重写帖子 slug

> ID：11728292
> 
> 赞同：5
> 
> 时间：2012-07-30T19:32:07.957
> 
> 标签：php, wordpress, custom-fields, custom-post-type, slug

基本上，我有一个名为“Parts”的自定义帖子类型设置，目前有超过 5,000 个帖子。每个部件都有许多自定义字段，包括“部件号”。目前，每个部分的 URL 为：

[http://site.com/parts/name-of-part/](http://site.com/parts/name-of-part/)

我宁愿拥有的是：

[http://site.com/parts/XXXX-608-AB/](http://site.com/parts/XXXX-608-AB/)（这是一个零件号，存储为自定义字段“partno”。）

我相信我需要做两件事：

1) 根据自定义字段“partno”，制作一个脚本来批量编辑每个现有部件的所有 slug。

2) 挂钩到 Wordpress 函数以触发它始终根据自定义字段“partno”为新零件创建 slug。

有没有人知道如何完成这些方面的一个或两个方面？

**更新：以下是我最终用于更改现有帖子的代码**

```
// Set max posts per query
$max = 500;
$total = 5000; 

for($i=0;$i<=$total;$i+=$max) {

$parts = get_posts(array('post_type' => 'parts', 'numberposts' => $max, 'offset' => $i));

    // loop through every part
    foreach ( $parts as $part ) {

    // get part number
    $partno = get_post_meta( $part->ID, 'partno', true );   

    $updated_post = array();
    $updated_post['ID'] = $part->ID;
    $updated_post['post_name'] = $partno;
    wp_update_post( $updated_post ); // update existing posts
    echo $part->ID;
    }
} 
```

**更新：下面是我在functions.php中用来更改正在进行的帖子的代码** （部分感谢[https://wordpress.stackexchange.com/questions/51363/how-to-avoid-infinite-loop-in-save-post -回调](https://wordpress.stackexchange.com/questions/51363/how-to-avoid-infinite-loop-in-save-post-callback)）

```
add_action('save_post', 'my_custom_slug');
function my_custom_slug($post_id) {
     //Check it's not an auto save routine
    if ( defined('DOING_AUTOSAVE') && DOING_AUTOSAVE ) 
        return;

 //Perform permission checks! For example:
    if ( !current_user_can('edit_post', $post_id) ) 
        return; 

    //If calling wp_update_post, unhook this function so it doesn't loop infinitely
    remove_action('save_post', 'my_custom_slug');

    //call wp_update_post update, which calls save_post again. E.g:
if($partno != '')
        wp_update_post(array('ID' => $post_id, 'post_name' =>get_post_meta($post_id,'partno',true)));

    // re-hook this function
    add_action('save_post', 'my_custom_slug');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T01:33:10.430

1）创建一个新页面并为其分配一个新的页面模板，比如说`site.com/update`和`update.php`。在 update.php 里面写给你批量机制：

```
<?php // grab all your posts
$parts = get_posts(array('post_type' => 'parts', 'numberposts' => -1,))

// loop through every part
foreach ( $parts as $part ) {

    // get part number
    $partno = get_post_meta( $part->ID, 'parto', true );

    $updated_post = array();
    $updated_post['ID'] = $part->ID;
    $updated_post['post_name'] = $partno;
    wp_update_post( $updated_post ); // update existing posts

} ?> 
```

您可以将它放在主题中的任何位置，但我喜欢为此创建一个页面，以便我可以轻松地使用它运行 cron 作业。

接下来是更改每个新创建帖子的 slug 的功能：

```
<?php function change_default_slug($id) {

    // get part number
    $partno = get_post_meta( $id, 'parto', true );
    $post_to_update = get_post( $id );

    // prevent empty slug, running at every post_type and infinite loop
    if ( $partno == '' || $post_to_update['post_type'] != 'parts' || $post_to_update['post_name'] == $partno )
        return;

    $updated_post = array();
    $updated_post['ID'] = $id;
    $updated_post['post_name'] = $partno;
    wp_update_post( $updated_post ); // update newly created post

}
add_action('save_post', 'change_default_slug'); ?> 
```

上面的代码在每次保存帖子时运行（例如，第一次发布时）并将新的 post_name 设置为部件号。

# plone - 在 Plone 中每 6 个月强制更改一次密码

> ID：11728296
> 
> 赞同：1
> 
> 时间：2012-07-30T19:32:30.627
> 
> 标签：plone, change-password

有没有办法强制所有用户每六个月更改一次密码？我在 linux 机器上使用 Plone 4.2。这主要是出于安全目的。帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T23:22:21.910

没有已经存在的插件可以做到这一点，但你可以自己写一个。Plone 的“可插入身份验证服务”的核心文档位于[http://collective-docs.readthedocs.org/en/latest/members/pluggable_authentication_service/index.html](http://collective-docs.readthedocs.org/en/latest/members/pluggable_authentication_service/index.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T04:06:00.670

PAS 插件的一个很好的起点是 Products.LoginLockout。它已经拦截了身份验证过程并处理了密码输入N次错误等方面。此外，它已经存储了有关登录时间等的信息……它应该不难扩展。

# hash - 将 BCrypt 与另一种哈希算法相结合

> ID：11728298
> 
> 赞同：0
> 
> 时间：2012-07-30T19:32:51.543
> 
> 标签：hash, bcrypt, pbkdf2, sha2

我们目前正在加强我们的密码保护。我们一直在对 SHA-2、Bcrypt、PBKDF2 和 Scrypt 进行大量阅读。话虽如此，我们不是安全专家或密码学家，主题的许多技术方面都超出了我们的想象。

在这一点上，我们倾向于实现 PBKDF2 或 Bcrypt。

但是，我们很好奇将 SHA-2 算法与 Bcrypt 结合使用是否有好处（看来 PBKDF2 已经必须指定散列算法）。我们看过帖子：

[https://security.stackexchange.com/questions/11552/would-it-make-sense-to-use-bcrypt-and-pbkdf2-together](https://security.stackexchange.com/questions/11552/would-it-make-sense-to-use-bcrypt-and-pbkdf2-together)

但这实际上更多是关于同时使用 Bcrypt 和 PBKDF2，而不是 SHA-2。

使用 Bcrypt 的 SHA-2 算法有什么好处？还是因为实际安全性没有明显提高而浪费了精力/性能？

提前感谢任何人可以提供的任何见解。

pbr

# google-bigquery - SQL 语法 JOIN google bigquery

> ID：11728300
> 
> 赞同：1
> 
> 时间：2012-07-30T19:32:57.490
> 
> 标签：google-bigquery

我在 Google BigQuery 中收到此错误：

```
Error: Ambiguous field reference in SELECT clause. (Remember to fully qualify all field names in the SELECT clause as <table.field>.) 
```

我的查询是

```
SELECT LoanPerf1.loankey, Loans.Key
FROM   prosperloans1.LoanPerf1
JOIN   prosperloans1.Loans
       ON LoanPerf1.loankey = Loans.Key 
```

`prosperloans1`是 2 个表名正确的数据集 ID。无论哪个字段名称首先出现在 select 子句中，都会返回错误。

Google SQL Syntax 上的文档说这是正确的：

```
// Simple JOIN of two tables
SELECT table1.id, table2.username
FROM   table1
JOIN   table2
       ON table1.name = table2.name AND table1.id = table2.customer_id; 
```

谢谢肖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:47:12.770

尝试在表名中添加 AS 子句：

`SELECT LoanPerf1.loankey, Loans.Key FROM prosperloans1.LoanPerf1 as LoanPerf1 JOIN prosperloans1.Loans as Loans ON LoanPerf1.loankey = Loans.Key`

# c# - 实现模型视图展示器的 Windows 窗体中的用户输入验证

> ID：11728304
> 
> 赞同：0
> 
> 时间：2012-07-30T19:33:03.500
> 
> 标签：c#, winforms, validation, mvp

我正在尝试验证 Windows 窗体应用程序中的用户输入（使用 MVP 设计模式）。由于这是我第一个使用 MVP 的项目，我不太清楚在哪里以及如何放置用户输入验证代码。具体来说，我有一个 Products 表单，其中包含两个文本框控件，即 ProductName 和 ProductPrice。

下面是我的 ProductForm、IProductView 和 ProductPresenter 的代码

IProductView.cs

```
 public interface IProductView
    {
        string ProductName { get; set; }
        int ProductPrice { get; set; }

        event EventHandler<EventArgs> Save; 
    } 
```

frmProduct.cs

```
public partial class frmProduct : Form,IProductView
    {
        ProductPresenter pPresenter;

        public frmProduct()
        {
            InitializeComponent();
            pPresenter = new ProductPresenter(this);
        }

        public new string ProductName
        {
            get
            {
                return txtName.Text;
            }
        }

        public int ProductPrice
        {
            get
            {
                return Convert.ToInt32(txtPrice.Text);
            }
        }

        public event EventHandler<EventArgs> Save;
    } 
```

ProductPresenter.cs

```
public class ProductPresenter
{
    private IProductView pView;

    public ProductPresenter(IProductView View)
    {
        this.pView = View;
        this.Initialize();
    }

    private void Initialize()
    {
        this.pView.Save += new EventHandler<EventArgs>(pView_Save);

    void pView_Save(object sender, EventArgs e)
    {
        throw new NotImplementedException();
    }
} 
```

我确实想使用 ErrorProvider(EP) Control + 因为我将在许多表单上使用 EP 控件，如果我可以通过将 EP 代码放入某种方法并将其传递给控件并适当地重用大部分代码，我真的很高兴信息。我应该把这个验证码放在哪里？

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:21:00.383

我使用了带有错误提供程序的基本表单，然后让其他表单继承自此。我还将视觉错误代码也放在了这种基本形式中。这意味着重复使用相同的代码。对于 Mvp，您可以使用基本表单和应用程序视图继承的接口执行类似的操作。然后，您的演示者将看到用于设置验证状态、消息等的统一界面。

# mysql - 我应该在这个查询中使用哪些 mysql 索引？

> ID：11728306
> 
> 赞同：3
> 
> 时间：2012-07-30T19:33:11.443
> 
> 标签：mysql, linux, indexing, key

```
SELECT * FROM items WHERE caption LIKE 'name%' AND type = 'private' OR owner LIKE 'name%' type = 'private' ORDER BY uses DESC LIMIT 40; 
```

可能的键：items_caption、items_owner、items_type 键：items_uses（通过使用说明命令获得这些）

执行该查询大约需要 1.8 秒，并且表中有超过百万条记录。我不知道如何为此查询创建索引，并且我无法控制源，因此我无法修改查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:35:18.143

You can do fulltext indexing on 'caption' and it will increase the query time significantly.

```
ALTER TABLE items ADD FULLTEXT(caption,owner); 
```

Mysql v 5.6 and above support fulltext search in innodb. [https://blogs.oracle.com/MySQL/entry/full_text_search_with_innodb](https://blogs.oracle.com/MySQL/entry/full_text_search_with_innodb)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:45:49.123

你需要先做一个[解释](http://dev.mysql.com/doc/refman/5.0/en/explain.html)查询，看看它是如何工作的。如果我们不知道查询是如何执行的以及您的表的结构，我们将无法帮助您。IE，@chheplo 说您可以在文本搜索中添加索引

```
ALTER TABLE items ADD FULLTEXT(caption,owner); 
```

但这取决于您的数据库设计，如果您使用的是 Mysql 5.6- 并且您的引擎是 Innodb 它将无法工作，您需要 engine = MyISAM，以便能够创建文本索引，您还需要执行说明以查看如果选择也在使用它。但是我认为，如果您避免使用“LIKE”，它会更快，[“%Query%”之类的性能与全文搜索包含查询](https://stackoverflow.com/questions/3213998/performance-of-like-query-vs-full-text-search-contains-query)

问候

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T19:46:10.317

由于您已经选择 *，因此您不能真正做一个覆盖索引，但您可以在 (caption,type) 和 (owner, type) 上做一对复合索引。

```
ALTER TABLE items ADD INDEX (caption, type);
ALTER TABLE items ADD INDEX (owner, type); 
```

这应该减少内部点查找。

我认为您不需要全文搜索，因为您与 LIKE 比较的值不以通配符 (%) 开头。与不以 % 开头的字符串进行比较的点赞可以使用传统的快速 B 树索引。如果你在 LIKE 的开头有一个 % ，就像在 '%name' 中一样，情况就不是这样了。

另外，不要忘记您的搜索条件：

> 标题 LIKE 'name%' AND type = 'private'

或者

> 所有者 LIKE 'name%' AND type = 'private'

因此，如果标题子句失败并且它尝试按所有者和类型查找，“添加全文（标题，所有者）”将无济于事。

# iphone - NSMutableAttributedString - NSForegroundColorAttributeName

> ID：11728307
> 
> 赞同：2
> 
> 时间：2012-07-30T19:33:12.837
> 
> 标签：iphone, objective-c, ios, ios5, ios4

我正在尝试设置数组中所有范围的颜色，但出现此错误。我不明白为什么。范围都是有效的。我什至尝试手动插入一个范围来测试它。谢谢你。

CGContextSetFillColorWithColor：无效的上下文 0x0

```
NSMutableAttributedString * string = [[NSMutableAttributedString alloc] initWithString:tv.text];

for (NSString * s in array) {
        [string addAttribute:NSForegroundColorAttributeName value:[UIColor redColor] range:NSRangeFromString(s)];
}

CATextLayer *textlayer = [[CATextLayer alloc]init];
textlayer.frame = CGRectMake(0, 0, 320, 480);
[self.view.layer addSublayer:textlayer];
textlayer.string = @"aString"; //works
textlayer.string = string; //does not work
tv.text = @""; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-30T20:29:07.477

代码示例与您尝试构建的代码完全相同吗？我很确定`NSForegroundColorAttributeName`仅在 Mac OS X SDK 和 iOS 6.0 及更高版本中可用，因此示例代码甚至不应该编译。

你想要的可能是`kCTForegroundColorAttributeName`传递 a`CGColorRef`而不是 a `NSColor`。

```
[string addAttribute:(id)kCTForegroundColorAttributeName
               value:(id)[UIColor redColor].CGColor
               range:NSRangeFromString(s)]; 
```

但我不确定这是否真的是无效上下文错误的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:48:11.833

您的上下文是错误的，而不是您的范围。您正在尝试设置没有颜色的东西的颜色。

# android - 为什么 CMake 报告 gcc 版本未知？

> ID：11728311
> 
> 赞同：1
> 
> 时间：2012-07-30T19:33:18.627
> 
> 标签：android, gcc, cmake, cross-compiling

我正在尝试使用 CMake 将程序交叉编译到 android 中。当我尝试使用 arm-gcc 编译时，它检查编译器没有问题，但是当它检查版本时，它给出了一个 gcc 版本未知错误。

代码片段在这里

```
if("${gcc_version_RESULT}" STREQUAL "0")
  if(NOT GCC_VERSION)
    execute_process(
      COMMAND "${CMAKE_BINARY_DIR}/${CMAKE_FILES_DIRECTORY}/config_tests/gcc_version"
      OUTPUT_VARIABLE GCC_VERSION)
  endif() 
```

我不确定问题出在哪里。我试过删除 CMakeCache，导出 CC。请帮我。

# teradata - Teradata：是否可以在不创建记录的情况下生成标识列值？

> ID：11728312
> 
> 赞同：0
> 
> 时间：2012-07-30T19:33:20.170
> 
> 标签：teradata, identity-column

在 Oracle 中，我曾经使用序列来为表的唯一标识符生成值。在存储过程中，我会调用 sequencename.nextval 并将该值分配给一个变量。之后，我将该变量用于过程的 insert 语句和过程的 out 参数，这样我就可以将新生成的 ID 传递给 .NET 客户端。

我想对 Teradata 做同样的事情，但我认为实现这一点的唯一方法是创建一个包含按顺序递增的值的表。然而，理想情况下，我真的希望能够获取将用于标识列的下一个值的值，而无需在数据库中实际创建新记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T21:02:06.297

不，Teradata 不可能，因为根据正在执行的操作类型，Identify 值在解析引擎 (PE) 或 AMP 级别缓存。我的理解是 DBC.IdCol 表显示了下一个值，该值将用于播种`IDENTITY`PE 或 AMP 所需的下一批值。

另一种解决方案是避免`IDENTITY`以这种方式为您的 UPI 使用。您始终可以使用`ROW_NUMBER()`由逻辑主键分区的窗口聚合函数来为您的代理键设置下一个值范围。

# git - Git：合并冲突和提交消息

> ID：11728314
> 
> 赞同：8
> 
> 时间：2012-07-30T19:33:28.180
> 
> 标签：git, merge

我与 Git 合并并发生冲突。解决冲突后，提交后我将看到一条自动生成的提交消息，其中包含有冲突的文件列表。最佳实践是什么 - 我应该出于充分的理由保留此冲突文件列表，还是可以删除这部分提交消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T20:29:20.743

不管它值多少钱，坚持。如果文件出现问题，这有助于您确定合并可能发生的位置，从而导致意外后果。

通常，“不冲突”涉及判断调用，其中合并者比另一个分支更了解一个分​​支（b/cs/他曾在此工作）或者根本不了解任何一个分支。相对不知情，即使是善意的，判断电话通常会带来麻烦。更容易 grep 与那里的那些行合并不冲突。

您的里程可能会有所不同，我不是律师。

# javascript - 脚本执行但代码隐藏不

> ID：11728316
> 
> 赞同：0
> 
> 时间：2012-07-30T19:33:39.630
> 
> 标签：javascript, asp.net

我的 aspx 页面上有一个按钮。使用此按钮，我将在选择元素中添加一个选项元素，并向页面上显示的 GridView 添加一些数据。我想先放置选项元素，而不是从此按钮执行我的代码隐藏。

我有按钮和评估的组合框：

```
<asp:DropDownList runat="server" ID="comboboxPeople" ... />
<asp:DropDownList runat="server" ID="comboboxOutput" />
<asp:Button runat="server" ID="buttonAdd" text="Add passanger" OnClick="buttonAdd_Click" OnClientClick="addOptionToSelectElement();" /> 
```

我有脚本：

```
function addOptionToSelectElement() {
    var cb = document.getElementById('<%=comboboxPeople.ClientID %>');
    var cbout = document.getElementById('<%=comboboxOutput.ClientID %>');
    var op = document.createElement("op");
    op.value = cb.options[cb.selectedIndex].value;
    op.text = cb.options[cb.selectedIndex].text;
    cbout.appendChild(op);
} 
```

我的代码隐藏：

```
protected void buttonAdd_Click(object sender, EventArgs e)
{
    DoSomething(...);
} 
```

这是我的问题：如果我将脚本函数附加到我的按钮，则代码隐藏不起作用。如果我不使用脚本，我的代码隐藏运行。

任何想法？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:47:53.813

comboboxOutput 来自哪里。我厌倦了没有下面的线条，它起作用了

```
var cbout = document.getElementById('<%=comboboxOutput.ClientID %>');

cbout.appendChild(op); 
```

# java - GWT - 使用 Canvas 时意外的滚动条出现在 GWT-DataGrid 中

> ID：11728317
> 
> 赞同：2
> 
> 时间：2012-07-30T19:33:41.927
> 
> 标签：java, gwt, canvas, datagrid, scrollbar

我发现在同一区域使用 Canvas 时，GWT-DataGrid 中会出现一些意外的滚动条的错误。不管我用Canvas的什么功能，哪怕只是用Canvas画一条线，都会出问题。场景很难描述清楚。我会尽力。希望你知道我在说什么。

在我的应用程序中，当用户单击按钮时，将显示包含 DataGrid 的弹出面板。在弹出面板下，在 RootLayoutPanel 中，我有一个画布，它可以绘制一些图形。如果 Canvas 和 DataGrid 出现在同一区域（它们“交错”），则会出现错误（出现一些意想不到的奇怪滚动条）。另一方面，如果它们没有出现在同一区域，或者如果它们交错，我只是不让 Canvas 开始绘制，那么完全没有问题。例如，如果我将 Canvas 从包含 DataGrid 的弹出面板下方移开，这样它们就不会交错，DataGrid 就没有问题。

![出现错误](../Images/01be73809500e5d2b995ed95f1d001c6.png)

![没有出现错误](../Images/cb31dfccd14aa0e058f7536e5624fcd0.png) 我发现有人在 Google 中也报告了这个错误。这正是我遇到的。但是没有人可以回答原因或提供一些解决方法。 [http://code.google.com/p/google-web-toolkit/issues/detail?id=7338](http://code.google.com/p/google-web-toolkit/issues/detail?id=7338)

如果您有任何解决方法。请告诉我。谢谢

# c++ - Why does this function work if called internally?

> ID：11728321
> 
> 赞同：1
> 
> 时间：2012-07-30T19:34:02.920
> 
> 标签：c++

If I call this function stringToUpper(str2) in the currencyConverter.cpp itself, its works and return upper case.

```
void currencyConverter::stringToUpper(string &s)
{
   for(unsigned int l = 0; l < s.length(); l++)
  {
    s[l] = toupper(s[l]);
  }
} 
```

However I have a file named `unitTest.cpp`, and it does this:

```
#include "unitTest.h"
#include "currencyConverter.h"

CPPUNIT_TEST_SUITE_REGISTRATION(unitTest);

unitTest::unitTest() {
}

unitTest::~unitTest() {
}

void unitTest::setUp() {
}

void unitTest::tearDown() {
}

void stringToUpper(string&);
void unitTest::testStringLowerToUpper()
{
string str = "ILOVECPLUSPLUS";
string str2 = "ilovecplusplus";

cout << "\nChecking if string 1 '" << str << "' equals string 2 '" << str2 << "'";
CPPUNIT_ASSERT_EQUAL(str,str2);

//this part i will use my stringToUpperFunction to test.
currencyConverter c;
c.stringToUpper(str2);

cout << str2 << endl;
} 
```

When I try to print `str2`, it remains as `ilovecplusplus` instead of being capitalized.

Whats wrong with my code or call?

# eclipse - Eclipse p2 mirrorApplication artifact filtering

> ID：11728322
> 
> 赞同：0
> 
> 时间：2012-07-30T19:34:03.523
> 
> 标签：eclipse, mirroring, p2

I am trying to mirror an update site under Windows with the following commands.

```
eclipsec -nosplash -verbose -application org.eclipse.equinox.p2.artifact.repository.mirrorApplication -writeMode clean -source http://download.eclipse.org/technology/m2e/releases/1.1/1.1.0.20120530-0009 -destination file:/C:/m2ecore
eclipsec -nosplash -verbose -application org.eclipse.equinox.p2.metadata.repository.mirrorApplication -writeMode clean -source http://download.eclipse.org/technology/m2e/releases/1.1/1.1.0.20120530-0009 -destination file:/C:/m2ecore 
```

That works, but it downloads all the artifacts twice, both in canonical form and packed form. For example:

```
Mirroring: osgi.bundle,org.eclipse.m2e.editor.source,1.1.0.20120530-0009 (Descriptor: packed: osgi.bundle,org.eclipse.m2e.editor.source,1.1.0.20120530-0009)
Mirroring: osgi.bundle,org.eclipse.m2e.editor.source,1.1.0.20120530-0009 (Descriptor: canonical: osgi.bundle,org.eclipse.m2e.editor.source,1.1.0.20120530-0009) 
```

**Is there a way to specify that I only want to mirror the canonical forms?**
Something like `-filter (!format=packed)`

I have noticed that there are filters in *artifacts.xml* and that the p2 application seems to support the *filter* switch, it's just poorly documented. It looks like an LDAP query but it is not being recognized from the command line.

If it's not possible to filter, how can I safely alter the local repo to remove the packed files from the metadata? Editing the XML by hand doesn't seem like a good idea.

**EDIT:** Did it the manual way. *Leaving the question open in case someone knows how to filter to avoid the unnecessary downloads*

Go to *C:\m2ecore*, unzip *artifacts.jar*, and then delete it.
Edit the *properties* section in *artifacts.xml*

```
Remove the line <property name='publishPackFilesAsSiblings' value='true'/>
Adjust the properties size parameter (e.g: from 3 to 2) 
```

Edit the *mappings* section in *artifacts.xml*

```
Remove the line <rule filter='(&amp; (classifier=osgi.bundle) (format=packed))' output='${repoUrl}/plugins/${id}_${version}.jar.pack.gz'/>
Remove the line <rule filter='(&amp; (classifier=org.eclipse.update.feature) (format=packed))' output='${repoUrl}/features/${id}_${version}.jar.pack.gz'/>
Adjust the mappings size parameter (e.g.: from 5 to 3) 
```

Remove all packed artifact metadata

```
Use an editor with regex support to clear all matches of:
<artifact[\s]+[^>]*>(.(?!<[/]?artifact>))+Pack200Unpacker(.(?!<[/]?artifact>))+[\s]*</artifact>

To clear the blank lines, first regex replace with empty strings the matches of:  
^[\s]*$
and then do an extended replace from \r\n\r\n to \r\n

Modify the total artifacts count by searching for matches of:
<artifact[\s]+[^>]*> 
```

Zip *artifacts.xml* into *artifacts.zip* and rename it to *artifacts.jar*
Delete all _*.pack.gz_ files from the tree.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T02:26:33.040

独立镜像应用能力有限，你可以使用[p2 ant task](https://help.eclipse.org/latest/topic/org.eclipse.platform.doc.isv/guide/p2_repositorytasks.htm)得到你想要的。

# configuration - 将运行时创建的部分配置与系统配置合并

> ID：11728324
> 
> 赞同：1
> 
> 时间：2012-07-30T19:34:10.450
> 
> 标签：configuration, app-config, enterprise-library

我在从解密专有配置文件的单独库调用中检索数据库连接字符串的环境中使用 EntLib。我对这种做法或配置文件的格式没有发言权。

我想在此设置中将 EntLib 异常记录到数据库中。因此，我需要使用数据库名称和连接字符串设置一个 EntLib 数据库配置实例。由于直到运行时我才能获得连接字符串，但 EntLib 确实允许运行时配置，所以我使用以下代码，如下[所述](http://msdn.microsoft.com/en-us/library/ff664363%28v=pandp.50%29)：

```
builder.ConfigureData()
               .ForDatabaseNamed("Ann")
                 .ThatIs.ASqlDatabase()
                 .WithConnectionString(connectionString)
                 .AsDefault(); 
```

该参数`connectionString`是我从单独的库中检索到的参数。

示例代码继续将创建的配置信息与空的 DictionaryConfigurationSource 合并。但是，我需要将它与 app.config 中的其余配置代码合并。所以我这样做：

```
 var configSource = new SystemConfigurationSource();
        builder.UpdateConfigurationWithReplace(configSource);
        EnterpriseLibraryContainer.Current
          = EnterpriseLibraryContainer.CreateDefaultContainer(configSource); 
```

...这非常基于示例代码。

但是：我在 Microsoft.Practices.EnterpriseLibrary.Common.Configuration.SystemConfigurationSource.Save 中遇到内部错误。失败的代码是这样的：

```
 var fileMap = new ExeConfigurationFileMap { ExeConfigFilename = ConfigurationFilePath };
        var config = ConfigurationManager.OpenMappedExeConfiguration(fileMap, ConfigurationUserLevel.None);

        config.Sections.Remove(section);
        config.Sections.Add(section, configurationSection);

        config.Save(); 
```

...其中“部分”是“connectionStrings”。代码在 Add 方法调用上失败，说您不能添加重复的部分。检查显示，即使在 Remove 之后，connectionStrings 部分仍然存在。

我从经验中知道，当实际读取和解释配置文件时，connectionStrings 下总是有一个默认条目，从 machine.config 继承。因此，也许您永远无法真正删除 connectionStrings 部分。

不过，这似乎让我很不走运，除非我想修改 EntLib 源代码，但我不想。

我或许可以在运行时使用 fluent API 构建 EntLib 的所有配置信息。但我宁愿不要。用户希望他们的操作人员能够对日志进行小的更改，而无需开发人员参与。

所以我的问题分为几个部分：是否有一个很好的简单解决方法？是否需要更改 EntLib 源？还是我错过了一些可以解决问题的非常简单的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:05:42.763

多亏了[这篇文章](http://entlib.codeplex.com/discussions/263521/)，我找到了解决方法。我没有获取系统配置源并尝试从构建器更新它，而是将我设置的部分复制`app.config`到构建器中，然后`UpdateConfigurationWithReplace`在一个空的虚拟配置源对象上执行操作以创建`ConfigurationSource`可用于创建的默认容器。

```
 var builder = new ConfigurationSourceBuilder();
        var configSource = new SystemConfigurationSource();

        CopyConfigSettings("loggingConfiguration", builder, configSource);
        CopyConfigSettings("exceptionHandling", builder, configSource);

        // Manually configure the database settings
        builder.ConfigureData()
               .ForDatabaseNamed("Ann")
                 .ThatIs.ASqlDatabase()
                 .WithConnectionString(connectionString)
                 .AsDefault();

        // Update a dummy, empty ConfigSource object with the settings we have built up.
        // Remember, this is a config settings object for the EntLib, not for the entire program.  
        // So it doesn't need all 24 sections or however many you can set in the app.config.  
        DictionaryConfigurationSource dummySource = new DictionaryConfigurationSource();
        builder.UpdateConfigurationWithReplace(dummySource);

        // Create the default container using our new ConfigurationSource object.  
        EnterpriseLibraryContainer.Current
          = EnterpriseLibraryContainer.CreateDefaultContainer(dummySource); 
```

关键是这个子程序：

```
 /// <summary>
    /// Copies a configuration section from the SystemConfigurationSource to the ConfigurationSourceBuilder.
    /// </summary>
    /// <param name="sectionName"></param>
    /// <param name="builder"></param>
    /// <param name="configSource"></param>
    private static void CopyConfigSettings(string sectionName, ConfigurationSourceBuilder builder, SystemConfigurationSource configSource)
    {
        ConfigurationSection section = configSource.GetSection(sectionName);
        builder.AddSection(sectionName, section);
    } 
```

# c# - Securing Desktop Application by adding logic to WebService

> ID：11728326
> 
> 赞同：0
> 
> 时间：2012-07-30T19:34:18.470
> 
> 标签：c#, web-services, c#-4.0, desktop-application, cracking

I recently launched my desktop application and it got cracked after a few days. I posted a question on stack overflow and people said that i cannot stop that. In the start of the software i cannot allow this to happen and i want a solution. So, following is what i am thinking.

Currently, I have desktop application that communicates with the web server to verify the user. Once the user is verified it saves the values in Registry. The hacker has bypassed the communication code and added fake values in registry and he can use my software now.

Now, i am planning to take some of my code from MAIN features of the software to a WEB SERVICE hosted somewhere else on a web server. Whenever the software needs to run that feature the software will give a call to the WEB SERVICE with the values in REGISTRY. I will verify those values and return the results. But if the values will not match my database then i will reject the call.

So, my questions is:
1- Do you think this solution is feasible ?
2- According to my thinking, it will make the software useless to the hacker. What do you think ?
3- Any flaws in this solution ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:24:01.013

你不必被破解。天哪，每个人都认为没有可用的解决方案来防止盗版，但确实有。[免责声明：我在一家防止软件盗版并提供许可证管理解决方案](http://www.wibusystemsusa.com)的公司 (Wibu Systems) 工作。

事情是这样的：这（就像所有安全问题一样）是一个高度专业化的关注领域，破解者在这方面比你更聪明。他们已经熟悉人们自己推出的不同的本土解决方案，并且可以快速破解这些解决方案。

商业解决方案（我们的解决方案是 CodeMeter；平心而论，其他公司也做出了很好的解决方案，例如 SafeNet 和 KeyLoc）依赖于具有多层保护以防止密钥发现的强加密。这些公司花费数年时间开发、改进和测试他们的解决方案。您不太可能靠自己接近这种解决方案的稳健性和质量。我几乎可以向您保证，您自己创建的任何解决方案都会很快被破解，除非您的产品对破解者不感兴趣。

我不想在这里制作广告；我只想澄清事实。传统上经常被破解的公司改用 CodeMeter 就不再被破解了。查看 Propellerhead 的 Record 产品就是一个很好的例子。

# c# - Send command to a process

> ID：11728327
> 
> 赞同：0
> 
> 时间：2012-07-30T19:34:22.720
> 
> 标签：c#, winforms, winapi

I have this program that several users on the same computer is using (windows 2008 server environment with remote desktop clients).

When the program is ended normally, it deletes a special file in its working directory. I need to be able to send all instances of this program a command to cleanly shut down (so that it deletes the file at exit).

What would be the best way to do this, and how? I assume getting the pids for each instance is a start, but then what? Anyone have any good ideas?

Edit: Forgot to mention, it's a WinForm (not a command line) program.

Edit2: My comment was too long, so I guess it's best to just edit the question instead...

The file it's deleting is actually a file containing it's pid. The reason for having this file is to make sure that the user doesn't attempt to start the program twice with the same arguments (login information).

The main program (control center) that is actually starting the client program is keeping track of the pidfile in the users directory. If it discovers the file it reads the pid and tries to see if the pid exists. If not, it actually does delete the file and is letting the user start the client window.

I guess by using that procedure, I simply could make it look for all pids asociated with my application and simply kill them, ut I'd prefere to be able to send a shutdown command, as that would also notify the user in an IM that the program is shutting down for whatever the reason given. (Client initiated, remote server initiated, or, as in this case "Local server initiated").

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:59:38.947

A`Mutex`是代表互斥的东西。在这种情况下，我认为这不是您真正想要的。它并没有真正建模你想要的东西。再加上一次只能关闭一个应用程序。我建议使用命名`EventWaitHandle`来模拟一个应用程序向其他应用程序发送事件（关闭事件）。如果您使用手动重置事件（通过`EventResetMode.ManualReset`在创建`EventWaitHandle`对象时使用。

您将在后台线程上执行此操作，当发出信号时，会将某些内容编组到 UI 线程（通过`Control.BeginInvoke`）以与需要关闭的主窗体进行通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:36:58.903

您可以使用[Mutex来使用系统范围的事件](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)

请参阅 MSDN 中链接页面上的示例

# computer-vision - 人体动作识别和人体活动识别有什么区别？

> ID：11728331
> 
> 赞同：2
> 
> 时间：2012-07-30T19:34:29.333
> 
> 标签：computer-vision, gesture-recognition, surveillance

我想知道人体动作识别和人体活动识别有什么区别？这些术语可以互换使用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T20:11:39.140

[Aggarwal 和 Ryoo](http://cvrc.ece.utexas.edu/mryoo/papers/review_ryoo_hdr.pdf)的一篇流行评论使用了一种分类法，其中一个动作被定义为一个人的活动，但一般来说，这些术语可以互换使用。

# python - How do I access Jinja2 for loop variables outside the loop?

> ID：11728332
> 
> 赞同：1
> 
> 时间：2012-07-30T19:34:30.963
> 
> 标签：python, jinja2

I have a Jinja2 template page which contains two separate `{% for %}` loops. If neither of these loops contain any items, I want the page to redirect.

I'm trying to do something like this (pseudo-code):

```
loop1 = loop.length (in first loop)
loop2 = loop.length (in second loop)

if loop1 + loop2 == 0: redirect # (outside both loops) 
```

Is this even possible? Is there a way to make the `loop.length` variables available outside their respective loops?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:45:52.497

您可以检查您的列表是否属实，在 Jinja2 中空列表是错误的。

```
{% if things %}
    {% for thing in things %} .... {% endfor %}
{% else %}
    <!-- redirect here -->
{% endif %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:48:29.950

简单的答案是“不”：您不能使用模板重新定向——它应该在控制器/服务器的视图逻辑中。

虽然在技术上可以，但对任何人都没有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-08T08:35:00.060

[您可以使用长度过滤器](http://jinja.pocoo.org/docs/dev/templates/#length)检查长度`things`对象（您正在循环的对象）：

```
{{things|length}} 
```

现在回答你的问题。让我们假设您循环的对象被命名为`t1`，`t2`您可以这样做：

```
{% if t1 | length == 0 and t2 | length == 0 %}
 //use javascript to redirect(assuming you have the link)
{% endif %} 
```

您可以在 JavaScript 块中执行此操作。我不知道这是否是最有效的方法，但是，它应该有效。

我发布这个答案，因为这个问题没有投票或接受的答案。
我希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T02:01:34.303

假设这两件事都是列表，您可以这样做：

```
{% set all_things = thing1 + thing2 %}
{% if all_things %}
    {# There is more than one thing in the two lists #}
{% else %}
    {# redirect #} 
```

话虽如此，这**不**属于模板级别 - 您正在生成另一个列表，其中包含所有内容，`thing1`并且`thing2`每次点击页面时都会花费资源。您将应用程序逻辑放在模板级别，这是不可维护的。最后，您正在解决更大的问题——更改后端代码的成本很高。（请理解，在所有这些情况下，“您”都是通用的“您”——就像在“您工作的公司”中一样）。

您（特别是）应该向那些要​​求您实施此 hack 的人提出这些问题，并尝试在此工具/产品/公司成为 FrankenCode 之前改变其所采取的方向。

祝你好运！

# c# - Select rows from datatable with distinct column values

> ID：11728335
> 
> 赞同：1
> 
> 时间：2012-07-30T19:34:42.993
> 
> 标签：c#, datatable

I have a datatable that has duplicate ID's.

```
1 data moredata  4354
1 data moredata  4354
2 data moredaaata  4asdfdsa4
3 dasata edaaata  42342fdsa4
2 data moredaaata  4asdfdsa4 
```

I want to get a datatable from that table with just row for each of the first column value like this: (does not need to be in order)

```
1 data moredata  4354
2 data moredaaata  4asdfdsa4
3 dasata edaaata  42342fdsa4 
```

How can I do this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T19:37:33.273

您可以使用 LINQ 来查询数据表。`ID`在字段上使用分组并`First`从结果集中进行选择。就像是..

```
var query = from t in dt.AsEnumerable()
            group t by t.Field<int>("ID") into g
            select g.First(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-24T11:13:09.767

```
List<string> tableColumns = new List<string>();
foreach (DataColumn column in currentTable.Columns)
    tableColumns.Add(column.ColumnName);
DataTable result = currentTable.DefaultView.ToTable(true, tableColumns.ToArray()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T21:56:00.547

SELECT DISTINCT Column1, Column 2 FROM Table1 WHERE ......

# git - git: how to rebase before HEAD

> ID：11728336
> 
> 赞同：1
> 
> 时间：2012-07-30T19:34:48.873
> 
> 标签：git, git-rebase

I don't know much how to use rebase, but it seems the rebase only change the starting point to a more recent commit

in my case I did stuff on branch *test* that was pushed, another person pulled the changes B to E In the mean time I changed slightly a commit, and I deleted (bad idea) my remote branch to recreate one with the same commits

so because of this now it looks after a merge:

```
A---B---C---D---E--F--G--H  master
 \--B'--C'--D'--E'/    test 
```

B and B' are the same, at same time, same commit message..., C, C' also, ..D and D' , E and E'

Is there other solution than git rebase -i, I tried it but you lose other branches merge history

I would actually like to remove B, C, D, E, Is it possible if the branches are already merged?

I have no right to push on remote master, only pulling

I tried pruning but those unecessary commits are not removed since they point to others I would really like to rebase master A onto master E', if it's possible

thx for tips

**edit** : else, how could a person with push right could fix permanently that situation?

I can fix this by

```
git reset --hard A
git pull repo1 test (where test still is at E')
git rebase --onto F A master 
```

but if the admin pulls it, I guess it will have no effect?, he should do this manip himself right before any other user pull from this mess?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T20:38:57.243

摆脱 F 处不需要的合并的最简单方法是[创建一个移植文件](https://git.wiki.kernel.org/index.php/GraftPoint)并在那里放一行`<hash of F> <hash of E'>`然后用 gitk 检查历史看起来像你想要的那样。如果一切看起来都是文件，下一步是通过重写最近的提交来使移植永久化：`git filter-branch --tag-name-filter cat -- <hash of A>..master`最后将重写的提交强制推送到存储库`git push -f`

# javascript - JQuery：如何计算要在容器中显示的行数

> ID：11728339
> 
> 赞同：0
> 
> 时间：2012-07-30T19:35:05.137
> 
> 标签：javascript, jquery

有点难以解释，但让我试一试：
我想把一张桌子放在一个容器里。这个容器有一个固定的高度，比如 500 像素，而桌子很长，比如 2100，每行的高度可以不同。

创建表时，所有行都是不可见的，现在我想根据容器的高度进行计算，以找出容器内应该出现多少行。它可能是前 15 行或前 17 行（因为某些行的高度更大）。

在我这样做之后，我让这些行在那里停留一段时间，然后再次隐藏它们，并进行另一个计算以获取下一页，等等......现在困难的部分是如何使用 jquery 进行计算？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:39:25.643

您可以使用`jQuery.innerHeight`和`jQuery.outerHeight`函数获取浏览器计算的高度。所以你可以先得到容器的计算高度。然后您可以遍历行并添加它们的计算高度，直到总和大于容器的计算高度等等。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T20:25:36.133

这并没有解决“停留一段时间并在一段时间后获取下一组行”部分，但这里有一个简单的高度计算，显示了适当的行。

[http://jsfiddle.net/yvAtW/](http://jsfiddle.net/yvAtW/)

JS

```
allowedHeight = $("div").height();
actualHeight = 0;

$("tr").each(function(){
    actualHeight += $(this).height();
    if(actualHeight < allowedHeight) {
        $(this).show();
    }
});
​ 
```

HTML

```
<div>
<table>
    <tr class="height0">
        <td>Row</td>
    </tr>
    <tr class="height1">
        <td>Row</td>
    </tr>
    <tr class="height2">
        <td>Row</td>
    </tr>
    <tr class="height1">
        <td>Row</td>
    </tr>
    <tr class="height0">
        <td>Row</td>
    </tr>
</table>
</div>​ 
```

CSS

```
div{
    height:100px; /* fixed height container */
    overflow:hidden; /* Ensures no overflowing content if JS doesn't work */
    padding:10px 15px;
    background:#777;
}
table{
    width:100%;
}
tr{
    display:none; /* all hidden by default */
}
/* different height trs */
.height0{
    height:20px;
    background:#900;
}
.height1{
    height:30px;
    background:#090;
}
.height2{
    height:40px;
    background:#009;
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T19:39:29.497

遍历行，求和它们的高度。一旦超过 500 行，就取除最后一行之外的行集。显示那些。使用某种标记（可能是变量或数据注释）来跟踪您所在的位置。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-30T19:39:54.897

也许你可以做这样的事情：

```
fits = true;
while(fits){
    $(table).append('<tr>...</tr>');

    if($(table).css('height') >= $('#container').css('height'))
        fits = false;
} 
```

# extjs - Extjs4，如何在组合编辑器中设置 displayField？

> ID：11728341
> 
> 赞同：3
> 
> 时间：2012-07-30T19:35:09.123
> 
> 标签：extjs, extjs4

在组合编辑器中，选择一个选项后，即使我设置了显示字段，它也会显示值。一旦我单击组合编辑器，它也会显示 displayField，但是在选择并单击其他（这意味着鼠标移出）之后，单元格值更改为 valueField。

我的组合编辑器代码，

```
{
   xtype : 'combo',
   editable : false,
   triggerAction : 'all',
   displayField : 'name',
   valueField : 'id',
   store : myStore
} 
```

我错过了什么？

有知道的请指教~

谢谢！

[编辑]

我在这里写测试代码：

[http://jsfiddle.net/ilovekanon/NQXw9/](http://jsfiddle.net/ilovekanon/NQXw9/)

更改名称并单击其他名称，然后名称将显示 ID，而不是名称 :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:24:25.150

您需要在`model`组合中添加一个（或模型配置）`store`，然后调用`.setValue()`

```
combo.store.add({id:3, name:'expert wanna-be'});
combo.setValue(3); 
```

例子：

[http://jsfiddle.net/y944g/](http://jsfiddle.net/y944g/)

当您加载组合的商店（通过单击触发器）时，模型将被覆盖，因此您不必担心重复或任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:07:20.620

您的 jsFiddle 代码没有错。

`displayField`in combo 表示组合中显示的数据字段名称。它不在网格中显示值。当在组合中选择选项时，网格显示选择的值。如果你想`name`在combo的商店中展示，`valueField`必须设置'name'，

因此，如果您需要在组合商店中标识，您可以设置新的隐藏网格列。当更改事件触发。

# jquery - 跨域登录后未设置 Set-Cookie 会话

> ID：11728343
> 
> 赞同：4
> 
> 时间：2012-07-30T19:35:17.040
> 
> 标签：jquery, ruby-on-rails, api, devise, cors

我有一个具有 2 个子域的 rails 应用程序：

*   **API** (CORS) =>`api.myapp.dev`
*   **网络应用程序**=>`myapp.dev`

我只能通过`auth_token`使用 Devise 进行用户身份验证后立即返回的 API 访问。但是，我的客户端（网络应用程序）没有设置这些 cookie。我错过了什么吗？

```
class Api::V1::SessionsController < Api::V1::BaseController

  def create
    @user = User.find_for_database_authentication(:email => params[:user][:email])

    if @user and @user.valid_password?(params[:user][:password])
      sign_in @user # Set-Cookie header response with the session
      render "api/v1/users/preview", :handlers => :rabl # return auth_token here
    else
      flash[:error] = I18n.t('devise.failure.invalid')
      render "api/v1/base/error", :handlers => :rabl, :status => :unprocessable_entity 
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:24:47.653

出于安全原因，您不能从跨域网站设置 cookie。但是，`jQuery.ajax`让我们通过显式设置以下选项来做到这一点：

```
$.ajax
  type: "POST"
  url: "api.mydomain.com/login"
  xhrFields:
    withCredentials: true 
```

此外，请确保`headers['Access-Control-Allow-Credentials'] = "true"`从您的 HTTP 响应中返回。

# c# - Detect/listen for service start and stop state changes

> ID：11728348
> 
> 赞同：4
> 
> 时间：2012-07-30T19:35:47.007
> 
> 标签：c#, asp.net, service, event-handling

I have a C# application that uses a Windows service that is not always on and I want to be able to send an email notification when the service starts and when it shuts down. I have the email script written, but I cannot seem to figure out how to detect the service status changes.

~~I have been reading up on the `ServiceController` class and I think that the `WaitForStatus()` method might be what I need, but I haven't been able to find an example with it being used on a service that is not yet started.~~ EDIT: Due to the fact that the `WaitForStatus()` method busy-waits and I need to be executing the rest of the program run by the service while listening for the service to start/stop, I don't think that this is the method for me, unless someone has a solution that uses this method combined with multithreading and is clean and efficient.

More:

*   the service will not be started by the application - the application user will be starting that directly from the Services window in the Administrative Tools.
*   the service used is not a default Windows service - it is a custom service designed for use with this application

Thanks for your help!

P.S. please note that I'm fairly new to C# and am learning as I go here.

UPDATE:

I have managed to get the alert email to send each time the service starts: As I continued to read through the code that I have (which I, unfortunately, cannot post here), I noticed that the class used to create the service was extending the `ServiceBase` class and that someone made a custom `OnStart()` method to override the default one. I added the necessary method calls to the new `OnStart()` method and it successfully sent the notifications.

I attempted to do the same thing for the `OnStop()` method, but that did not work out so well for me - before I continue, I would like to add that I have been programming in Java for several years, and I am very familiar with Java design patterns.

What I attempted to do, which would have worked in Java, was override the `ServiceBase` class's `OnStop()` method with one that calls the email notification, cast `MyService` to be of type `ServiceBase` and then re-call the `ServiceBase` class's `Stop()` method (NOTE: `OnStop()` is a protected method so it could not be called directly - the `Stop()` method calls `OnStop()` and then continues with the necessary code to stop the service). I thought that casting to type `ServiceBase` would force the default `OnStop()` method to be called, instead of my custom one.

As you may imagine, I ended up with just under 10,000 emails successfully sent to my inbox before I managed to force my computer into a hard shutdown.

What I need now is a way to either use my overridden `OnStop()` method and then have it call the default method, or another solution to this problem. Any and all help is much appreciated. Thanks so much.

FOR THOSE OF YOU WITH MULTITHREADING SOLUTIONS:

```
protected override void OnStart(string[] args) {
     string subject = "Notice: Service Started";
     string body = "This message is to notify you that the service " +
         "has been started. This message was generated automatically.";
     EmailNotification em = new EmailNotification(subject, body);
     em.SendNotification();

     ...INITIALIZE LISTENER FOR SERVICE STOPPING HERE...

     ...custom stuff to be run on start...
 } 
```

Also, remember that the class that this method is called in, let's call it `Service`, extends the `ServiceBase` class.

UPDATE TWO:

In regards the suggestion that I use `NotifyServerStatusChange` I have learned that it is not permitted for the solution to use system functions, due to various reasons. To clarify, only solutions that are purely within the scope of C# and .NET are viable. Thanks, again, for your help!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T16:15:18.827

这是解决方案以及我之前找不到的原因：正如我之前所说，我的类扩展了 ServiceBase 类。在我的第一次更新中，我发布了我试图以与使用 Java 解决它相同的方式来解决这个问题：通过强制转换。但是，在 C# 中，如果您在派生类中覆盖它，显然不允许您调用基方法。当我第一次发布这个问题和这个更新时，我不知道的一件事（显然是没有人想到的一件事）是 C# 包含`base`可用于从派生类。由于`base`构造函数可用于 C# 中的任何类，因此它不会出现在[ServiceBase 类文档](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.aspx)中。

一旦我了解了这一点，我就能够采用我原来的解决方案并将其修改为使用基类：

```
 protected override void OnStop() {
        string subject = "Notice: Service Stopped";
        string body = "This message is to notify you that the service has " +
            "been stopped. This message was generated automatically.";
        EmailNotification em = new EmailNotification(subject, body);
        em.SendNotification();
        base.OnStop();
    } 
```

当我在 Visual Studio 中玩代码并`base`在我的 IntelliSense 中注意到时，我发现了这一点。我点击转到它的定义，它把我送到了 ServiceBase（显然没有定义）。在注意到我的代码中没有定义 base 并且它是 ServiceBase 类的一个实例之后，我意识到它一定是某种构造函数。快速谷歌搜索后，我找到了我要找的东西。智能感知的好方法！

谢谢大家的帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-06-28T09:11:15.860

如果您想要一个没有 win32 api 的 .NET 解决方案，请查看下面的解决方案。我从 ServiceController 类继承并在 Task 内部使用 WaitForStatus() 使其成为非阻塞，然后在状态更改时引发事件。也许它需要更多测试但对我有用：

**类定义**

```
using System;
using System.Collections.Generic;
using System.Threading.Tasks;
using System.ServiceProcess; // not referenced by default

public class ExtendedServiceController: ServiceController
{
    public event EventHandler<ServiceStatusEventArgs> StatusChanged;
    private Dictionary<ServiceControllerStatus, Task> _tasks = new Dictionary<ServiceControllerStatus, Task>();

    new public ServiceControllerStatus Status
    {
        get
        {
            base.Refresh();
            return base.Status;
        }
    }

    public ExtendedServiceController(string ServiceName): base(ServiceName)
    {
        foreach (ServiceControllerStatus status in Enum.GetValues(typeof(ServiceControllerStatus)))
        {
            _tasks.Add(status, null);
        }
        StartListening();
    }

    private void StartListening()
    {
        foreach (ServiceControllerStatus status in Enum.GetValues(typeof(ServiceControllerStatus)))
        {
            if (this.Status != status && (_tasks[status] == null || _tasks[status].IsCompleted))
            {
                _tasks[status] = Task.Run(() =>
                {
                    try
                    {
                        base.WaitForStatus(status);
                        OnStatusChanged(new ServiceStatusEventArgs(status));
                        StartListening();
                    }
                    catch
                    {
                        // You can either raise another event here with the exception or ignore it since it most likely means the service was uninstalled/lost communication
                    }
                });
            }
        }
    }

    protected virtual void OnStatusChanged(ServiceStatusEventArgs e)
    {
        EventHandler<ServiceStatusEventArgs> handler = StatusChanged;
        handler?.Invoke(this, e);
    }
}

public class ServiceStatusEventArgs : EventArgs
{
    public ServiceControllerStatus Status { get; private set; }
    public ServiceStatusEventArgs(ServiceControllerStatus Status)
    {
        this.Status = Status;
    }
} 
```

**用法**

```
static void Main(string[] args)
{
    ExtendedServiceController xServiceController = new ExtendedServiceController("myService");
    xServiceController.StatusChanged += xServiceController_StatusChanged;
    Console.Read();

    // Added bonus since the class inherits from ServiceController, you can use it to control the service as well.
}

// This event handler will catch service status changes externally as well
private static void xServiceController_StatusChanged(object sender, ServiceStatusEventArgs e)
{
    Console.WriteLine("Status Changed: " + e.Status);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T13:35:11.850

您可以使用 wmi 来监控事件：[technet.microsoft.com/en-us/library/ff730927.aspx](http://technet.microsoft.com/en-us/library/ff730927.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T14:29:00.077

如果您不能 PInvoke NotifyServiceStatusChange，那么您将不得不轮询该服务。例如：

```
ServiceController sc = new ServiceController("Some Service");
Console.WriteLine("Status = " + sc.Status); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-30T21:16:05.613

[ServiceController](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicecontroller.aspx)类有一个`WaitForStatus`方法。不过，它在内部进行轮询。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-30T09:37:51.363

使用 NotifyServiceStatusChange() 时要非常小心，因为它仅在 Windows Vista/Windows 2008（及更高版本）上受支持。如果您针对以下任何平台，则无法使用该 API。（仍然有很多 XP/Windows 2000-2003 系统。）

更糟糕的是，在服务重新启动的情况下，轮询并不总是可靠的，因为如果您在非常快的系统（SSD 驱动器或虚拟机上的预缓冲 I/O）上轮询服务，服务可能会重新启动两次投票之间。

# git - git for development and svn on production server

> ID：11728352
> 
> 赞同：3
> 
> 时间：2012-07-30T19:36:01.970
> 
> 标签：git, svn, deployment, integration

I have an website on development using git as control version system, and the client insist in us to use svn to deploy the website (they don't believe that git is a stable tool to install on their server) so I'm looking for a way to continue developing using git, which my dev team already know better than svn, and just move the release code on to a svn repository, so the client can deploy on their production server.

Since this website will continually be update by my team, I don't belive in copying code, by hand, to an svn repo and than make an package on it.

I'm looking for a way to develop on git, and run a specific command that will send an git tag (which represents an version of the site) to an different svn repository, is this possible?

thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:16:45.180

您需要使用[git-svn](http://www.kernel.org/pub/software/scm/git/docs/git-svn.html)。

它允许您在 svn repo 和 git 之间进行操作。在本地使用 git 并提交到 svn。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:58:43.960

您可以将[SubGit](http://subgit.com)（专为这些目的而创建）安装到您的 SVN 服务器中。之后，它会为 SVN 服务器创建一个纯 Git 接口，因此这两个接口都可以使用。每次推送到 Git 存储库都会转换为 SVN 提交，反之亦然（转换由钩子驱动）。同时推送到 Git 和 SVN 不是问题。

要安装 SubGit，请运行

```
$ subgit configure path/to/svn/repository
$ #optionally edit path/to/svn/repository/conf/subgit.conf to setup different parameters (like path where to create Git repository) or path/to/svn/repository/conf/authors.txt to setup non-default Git<->SVN authors mapping
$ subgit install path/to/svn/repository 
```

默认情况下，链接的 Git 存储库将出现在 path/to/svn/repository/.git 中。

# java - Discarding array item once used

> ID：11728354
> 
> 赞同：2
> 
> 时间：2012-07-30T19:36:24.980
> 
> 标签：java

How can I make sure that a random number is only generated once?

For example:

```
for(int i = 0; i<len; i++)
    {
        while (rands.contains(rand = r.nextInt(len-2)+1));
        rands.add(rand);
        System.out.print ("Rand ___ " + rand + "___");
    } 
```

How can I make sure that if the number 2 is generated from rand, it wont be generated again?

I apologise if i am not making myself clear enough. Please comment if you require any more information.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:39:52.370

您必须存储您生成的所有数字，并检查新的数字。`HashSet`出于性能考虑使用 a ：

```
HashSet<Integer> rands = new HashSet<Integer>();
for(int i = 0; i<3; i++)
{
   int rand;
   while (rands.contains(rand = r.nextInt(3)))
       ;
   rands.add(rand);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:37:28.000

使用 Random API 时，您无法真正限制这一点。可能您需要保留已生成数字的列表，如果尚未生成，则返回该数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T19:44:07.763

您需要为此使用洗牌算法。从 1 开始。创建一个从 1 到 1000（任意大小）的整数数组。洗好阵列。继续从洗牌的数组中获取，直到你用完它们。当您通过 1000 时，使用 1000-2000 重新填充数组，随机播放并使用。根据需要多次重复该过程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T19:46:37.450

如果您只需要某个范围内的非重复随机数流，您可以执行以下操作：

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.Iterator;
import java.util.List;

public class RandomNumberStream {
    private Iterator<Integer> numbers;

    public RandomNumberStream(int range) {
        List<Integer> numbersList = new ArrayList<>(range);
        for(int i = 0; i < range; i++) {
            numbersList.add(i);
        }
        Collections.shuffle(numbersList);
        numbers = numbersList.iterator();
    }

    public int nextNumber() {
        if(!numbers.hasNext()) {
            throw new IllegalStateException("No more numbers...");  //you might want to handle this differently
        }
        return numbers.next();
    }

    public static void main(String[] args) {
        RandomNumberStream rand = new RandomNumberStream(5);

        for(int i = 0; i < 5; i++) {
            System.out.println(rand.nextNumber());
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T19:40:12.120

我假设您想以随机顺序创建一个从 0-2 的数字列表（如果我错了，请告诉我）

您真正想要的是创建这些数字的列表

```
ArrayList<Integer> randomNums = ArrayList<Integer>() {{ add(0); add(1); add(2); }} 
```

然后[`Collections`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)用来洗牌。

```
Collections.shuffle(randomNums) 
```

# php - APC restarts sometimes

> ID：11728355
> 
> 赞同：1
> 
> 时间：2012-07-30T19:36:25.957
> 
> 标签：php, apc

After installing APC, see the apc.php script, the uptime restart every one or two hours? why? How can I change that?

I set `apc.gc_ttl = 0`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:52:15.693

APC 缓存的生命周期与它们的托管进程一样长，可能是您的 apache 工作人员达到了[MaxConnectionsPerChild](http://httpd.apache.org/docs/current/mod/mpm_common.html#MaxConnectionsPerChild)限制，他们被杀死并重新生成，并用它清除缓存。这是一种防止泄漏过程的安全机制。

*   **mod_php** : [MaxConnectionsPerChild](http://httpd.apache.org/docs/current/mod/mpm_common.html#MaxConnectionsPerChild)
*   **mod_fcgid 或其他 fastcgi**：[FcgidMaxRequestsPerProcess](http://httpd.apache.org/mod_fcgid/mod/mod_fcgid.html#fcgidmaxrequestsperprocess)和[PHP_FCGI_MAX_REQUESTS](http://www.php.net/manual/en/install.unix.lighttpd-14.php#install.unix.lighttpd-14.spawn-php)（环境变量，示例适用于 lighttpd，但应考虑在任何地方`php -b`使用）
*   **php-fpm** : [pm.max_requests](http://www.php.net/manual/en/install.fpm.configuration.php#pm.max-requests)分别为每个池。

您可以尝试将您正在使用的选项设置为“无关紧要”的值（通常`0`）并使用简单的 hello world php 脚本和 apachebench `ab2 -n 10000 -c 10 http://localhost/hello.php`（根据需要调整值）运行测试设置以查看工作进程 pid 是否是改变与否。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:18:00.743

如果您使用 0 的 TTL，APC 将在内存不足时清除所有缓存槽。这是每 2 小时添加一次的内容。

TTL 绝不能设置为 0

只需阅读手册以了解如何使用 TTL：[http ://www.php.net/manual/en/apc.configuration.php#ini.apc.ttl](http://www.php.net/manual/en/apc.configuration.php#ini.apc.ttl)

使用[http://pecl.php.net/get/APC](http://pecl.php.net/get/APC)中的 apc.php，将其复制到您的网络服务器以检查内存使用情况。

您必须留出足够的内存，以便 APC 在运行几个小时后有 20% 的空闲空间。定期检查。如果您没有足够的可用内存，请使用过滤器选项来防止缓存很少访问的文件。

检查我的答案 [是什么导致PHP中的“无法为池分配内存”？](https://stackoverflow.com/questions/3723316/warning-require-once-function-require-once-unable-to-allocate-memory-for-p)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-10T14:26:40.250

我今天遇到了同样的问题，在这里找到了解决方案： [http ://www.itofy.com/linux/cpanel/apc-cache-reset-every-2-hours/](http://www.itofy.com/linux/cpanel/apc-cache-reset-every-2-hours/)

你需要去`AccesWHM > Apache Configuration > Piped Log Configuration`和`Enable Piped Apache Logs`。

# java - 为什么在 Java 中的类名周围使用括号？

> ID：11728356
> 
> 赞同：12
> 
> 时间：2012-07-30T19:36:51.980
> 
> 标签：java

尽管我进行了一些广泛的搜索，但我遇到了一些代码并且无法理解它的某个方面！

我的问题是：为什么类有时会像下面的代码一样在括号内声明？

```
public class Animal {

    public static void hide() {
        System.out.println("The hide method in Animal.");
    }

    public void override() {
        System.out.println("The override method in Animal.");
    }
}

public class Cat extends Animal {

    public static void hide() {
        System.out.println("The hide method in Cat.");
    }

    public void override() {
        System.out.println("The override method in Cat.");
    }

    public static void main(String[] args) {
        Cat myCat = new Cat();
        Animal myAnimal = (Animal)myCat;
        myAnimal.hide();
        myAnimal.override();
    }
} 
```

我的重点特别是这行代码：

```
 Animal myAnimal = (Animal)myCat; 
```

我相信这与一个类扩展另一个类的事实有关，但我不确定括号内定义的类意味着什么。

对此的任何帮助表示赞赏。先感谢您。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-30T19:42:41.203

您看到的是一个演员表，告诉编译器可以将 Cat 分配给 Animal。

强制转换适用于编译器无法安全地将一种类型转换为另一种类型的情况，或者因为它不知道所涉及的类型是什么，或者因为转换会丢失信息（例如，如果你有一个你想要的 double存储在浮点类型的变量中）。

在您的示例中，演员完全没有必要，因为 Cat 扩展了 Animal；因为所有的猫都是动物，编译器不需要显式转换来告诉它可以将猫分配给动物。

铸件应留作特殊场合使用。如果您经常使用显式强制转换，那么这可能意味着您没有从类型系统中获得最大的好处。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-30T19:38:28.153

这是一个强制转换——`myCat`类型的变量`Cat`被强制转换为基类`Animal`。

这意味着它可以被认为是一个`Animal`.

这是Java中[继承](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)的一个基本功能。

* * *

正如[@Sebastian Koppehel](https://stackoverflow.com/users/1542377/sebastian-koppehel) [评论](https://stackoverflow.com/questions/11728356/why-are-brackets-used-around-a-class-name-in-java/11728387#comment15562534_11728387)的那样，在这种情况下不需要强制转换 -`myAnimal`变量（类型`Animal`）可以接受任何实现的类型`Animal`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T20:04:13.023

即使代码产生正确的输出，如果您必须将对象强制转换为父类，然后调用父类的静态方法，则可能需要以更好的方式设计类。Java 中的继承应该提供对常用方法和字段的访问。如果需要在Parent类中编写一个静态方法并使用子类的对象调用它，那么父类和子类之间的关系就不是很清楚了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T19:41:35.843

您明确保证编译器/运行时您传递的 cat 引用类型是 Animal 类型。在 java 中，它被称为**cast**。

在运行时，如果不遵守此合同（这意味着 cat 和 Animal 之间没有定义关系），您将获得`ClassCastException`.

# mysql - char 字段可以保留尾随空格字符吗？

> ID：11728357
> 
> 赞同：1
> 
> 时间：2012-07-30T19:36:54.270
> 
> 标签：mysql, char

我有一个带有名为 PremiseID 的主键的数据库表。

它的 MySQL 列定义是 CHAR(10)。

进入该列的数据始终为 10 位数字，可以是 9 位数字后跟一个空格，例如“113091000”，也可以是一个 9 位数字后跟一个字母，例如“113091000A”。

我尝试将这些值之一写入测试 MySQL 数据库表 t1 中的表中。它有三列

```
mainid integer
parentid integer
premiseid char(10) 
```

如果我插入具有以下值的行：`1,1,'113091000 '`并尝试回读行，则“113991000”值将被截断，因此显示为“113091000”；那就是空间被删除了。如果我插入一个像“113091000A”这样的数字，该值将被保留。

如何让 CHAR(10) 字段保留空格字符？

我有一个解决这个问题的编程方式。它将采用 len('113091000')，实现它是 9 个字符，然后实现 9 的长度来推断该数字有一个空格后缀。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T19:48:22.247

引用[MySQL 参考](http://dev.mysql.com/doc/refman/5.0/en/char.html)：

> 列的长度`CHAR`固定为您在创建表时声明的长度。长度可以是 0 到 255 之间的任何值。`CHAR`存储值时，它们会用空格右填充到指定的长度。检索值时`CHAR`，将删除尾随空格。

所以没有办法解决它。如果您使用的是 MySQL 5.0.3 或更高版本，那么 using`VARCHAR`可能是最好的方法（开销只有 1 个额外字节）：

> `VARCHAR`值在存储时不会被填充。尾随空格的处理取决于版本。从 MySQL 5.0.3 开始，按照标准 SQL，在存储和检索值时保留尾随空格。`VARCHAR`在 MySQL 5.0.3 之前，当值存储到列中时，尾随空格会从值中删除；这意味着检索到的值中也没有空格。

如果您使用的是 MySQL < 5.0.3，那么我认为您只需要检查返回的长度，或者使用空格以外的字符。

可能最便携的解决方案是只使用`CHAR`并检查返回的长度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T21:20:36.933

**问：**如何让 CHAR(10) 字段保留空格字符？

实际上，该空间被保留和存储。这是删除空格的值的检索。（删除返回值的尾随空格是记录在案的“功能”。）

一种选择（作为一种解决方法）是修改您的 SQL 查询以将尾随空格附加到返回值，例如

```
SELECT RPAD(premiseid,10,' ') AS premiseid FROM t1 
```

这将返回您的值作为长度为 10 个字符的字符串，如果值短于 10 个字符，则用空格填充，如果值长则截断为 10 个字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T19:50:43.993

标准`CHAR(10)`列将始终有尾随空格以将字符串填充到所需的 10 个字符长度。因此，任何故意的尾随空格都将被混入，并且通常由您的数据库适配器剥离。

`VARCHAR(10)`如果可能，如果要保留尾随空格，请转换为列。您可以使用该`ALTER TABLE`语句执行此操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-29T17:22:04.283

尽管 Gordon 的回答本身可能仍然是正确的，但有比提到的解决方案更高的版本。
在您的代码中运行**SET sql_mode = 'PAD_CHAR_TO_FULL_LENGTH';**

使用此会话设置，您将检索完整长度的 CHAR(10) 列，而 VARCHAR 在没有预先输入尾随空格时不会。如果不需要空格，可以随时使用 rtrim()。

# css - 调整窗口大小时调整html元素的CSS技巧

> ID：11728359
> 
> 赞同：0
> 
> 时间：2012-07-30T19:36:59.793
> 
> 标签：css

我打算为移动开发一个网页。我需要调整具有屏幕宽度的窗口元素的大小。假设我创建了一个带有一些文本字段的表单。当屏幕宽度较宽时显示适合。但如果屏幕的高度较长且宽度较小，则表单元素（文本框、标签等）会重叠或隐藏，只有很少的角落部分。

如果我将屏幕大小调整为更小，然后显示 HTML 元素应该自动更小以适应屏幕大小，我该怎么做。

请提出您的建议。

谢谢，迪帕克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:41:09.463

最好的解决方案是使用[媒体查询](https://developer.mozilla.org/en/CSS/Media_queries/)

使用它们，您可以为不同的设备宽度应用单独的样式，并确保您的所有页面（和表单）在每个屏幕上看起来都很漂亮。

这也将有助于避免页面失真或使文本变得难以阅读，当您尝试将专为更宽屏幕设计的页面压缩到狭窄的移动设备时可能会发生这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:41:53.940

我建议您使用百分比尺寸和`box-sizing: border-box;`

# maven - 在 Windows 7 上安装 Maven 时出错

> ID：11728362
> 
> 赞同：0
> 
> 时间：2012-07-30T19:37:13.250
> 
> 标签：maven, windows-7

因此，按照此处[http://www.mkyong.com/maven/how-to-install-maven-in-windows/](http://www.mkyong.com/maven/how-to-install-maven-in-windows/)的说明，我尝试在 Windows 7 环境中设置 Maven。问题是，当我为此运行 mvn --version 或任何带有 mvn 的命令时，我收到一条错误消息：

```
Error: Could not find or load main class org.codehaus.plexus.classwords.launcher.Launcher 
```

关于可能导致此问题的原因以及如何解决的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:54:23.600

如果您查看[文档](http://docs.codehaus.org/display/MAVENUSER/FAQs-1)，您可以阅读以下内容：

> **当我尝试执行 Maven 时，为什么会出现 java.lang.NoClassDefFoundError: org/codehaus/classworlds/Launcher？**
> 
> 当 $M2_HOME 与您的 $PATH 不同时，有时会发生这种情况。也就是说，当 'which mvn' 不匹配 $M2_HOME/bin/mvn 时。

# django - 不使用 jquery / django 发送发布数据

> ID：11728363
> 
> 赞同：0
> 
> 时间：2012-07-30T19:37:14.337
> 
> 标签：django, jquery, post

我正在尝试向 django 执行一个简单的帖子，该帖子将接受一个变量，然后将用户重定向到另一个页面。现在，我的 javascript 看起来像这样：

```
$.ajax({ 
  type: "POST",
  url: "{% url unity.survey.views.post %}",
  data: {  // <-- error here?
    'order' : '1', 
    'csrfmiddlewaretoken': '{{ csrf_token }}' 
  },
  success: function(datas) {
    if (datas.redirect) {
      window.location.href = data.redirect;
    }

  }
  });
 }; 
```

我在 django 中的相应视图如下所示：

```
def post(request, *args, **kwargs):
  if 'order' in request.POST:
    order = request.POST['order']
  else:          
    return redirect('unity.survey.views.login')

  .... some calculations with order ....
  return render_to_response(
     'template.html', 
      some_dictionary, 
      context_instance=RequestContext(request)
  ) 
```

出于某种原因，似乎没有向视图发送任何内容。查看 Firefox 的 Web 控制台，我看到：

```
[07:31:12.414] POST http://127.0.0.1/unity/ survey/ [undefined 17ms]
[07:31:12.422] GET http://127.0.0.1/unity/survey/ [HTTP/1.1 302 FOUND 73ms]
[07:31:12.497] GET http://127.0.0.1/unity/survey/login [HTTP/1.1 200 OK 177ms] 
```

无论我做什么，它都会将我重定向到登录页面。我尝试使用 .post 而不是 .ajax，但结果相同。知道为什么会这样吗？我有一个类似的功能，它工作得很好，但由于某种原因，我无法让它工作。看起来好像没有发送 POST 数据。

# java - 我正在尝试写入已经包含信息的文件

> ID：11728368
> 
> 赞同：0
> 
> 时间：2012-07-30T19:37:23.523
> 
> 标签：java, file-io

很抱歉下面的代码很长，当用户输入选项“5”时，我的代码能够正常执行和运行。我已经从用户输入中获取了所有值并且没有错误，但它没有写入我的文件。

我的文件目前有数据：

```
Anthony Ducan;anthony;a123;55 Peter Street;3321444;VISA;3213504011223
Barry Blake;barry;a999;456 George Street;23239876;VISA;435677779876
Claire Rerg;clare;c678;925 Edward Lane;67893344;MASTERCARD;223344556677 
```

我正在尝试以与我的文本文件完全相同的方式存储。我的`void writeLinesToFile()`方法编码有问题还是`void newCust()`方法有问题？

仍然对我没有错误感到困惑，但它没有写入我的文件。

```
public MainPage1(){ //start of MainPage1()

        System.out.println("=====================================================");
        System.out.println("Kreg Hotel Booking System - Main Page");
        System.out.println("=====================================================");
        System.out.println("[1] General Information");
        System.out.println("[2] Make Booking");
        System.out.println("[3] Active Booking Summary");
        System.out.println("[4] Existing Customer");
        System.out.println("[5] New Customer");
        System.out.println("[6] Check Booking Status");
        System.out.println("[7] Promotions");
        System.out.println("[8] Exit\n");
        System.out.println("Note: You have to select option 2 & 3 before option 4 & 5\n");
        System.out.println("Please enter your selection: ");        

try{choice = input.nextInt();}//to try to see if user input integer

         catch (java.util.InputMismatchException e){//to catch if user didnt input integer  
            System.out.println("Invalid Input");
            return;
        }

        while(true){ //start of do-while loop

            if(choice==4||choice==5)
            {
                if(roomInfo.isEmpty()==true || addOns.isEmpty()== true){
                    System.out.println("Please enter option 2 or 3 before option 4 or 5");
                    choice=input.nextInt();
                }
                else if(choice == 4){existingCustomers();}
                else if(choice ==5){newCust();}
                else new MainPage1();               
            }

        switch(choice){

                case 1:break;
                case 2:break;
                case 3:break;
                case 4:break;
                case 5:newCust();
                        break;
                case 6:break;
                case 7:break;
                case 8:System.out.println("Thank you. See you again soon");//exit the menu
                        System.exit(0);break;
                default:System.out.println("Please enter number between 1 to 8");//prompts the user if they didnt enter between 1 to 8
                       choice = input.nextInt();
                       break;
            }

        }//while(choice!=1 || choice !=2 || choice!=3 ||choice!=4); // end of do-while loop

    }//end of MainPage1()

public static void main(String[] args){//start of main page

    new MainPage1();//to call the constructor

}//end of mainpage

public void writeLinesToFile(String filename,String[] linesToWrite,boolean appendToFile){

    PrintWriter pw = null;

    try {

      if (appendToFile) {

        //If the file already exists, start writing at the end of it.
        pw = new PrintWriter(new FileWriter(filename, true));

      }
      else {

        pw = new PrintWriter(new FileWriter(filename));
        //this is equal to:
        //pw = new PrintWriter(new FileWriter(filename, false));

      }

      for (int i = 0; i < linesToWrite.length; i++) {

        pw.println(linesToWrite[i]+";");

      }
      pw.flush();

    }
    catch (IOException e) {
      e.printStackTrace();
    }
    finally {

      //Close the PrintWriter
      if (pw != null)
        pw.close();

    }

  }

  public void newCust(){

    System.out.println("Welcome to Kreg Hotel Booking System");
    System.out.println("==============================================");
    System.out.println("Please enter your name: ");
    n = input.nextLine();
    n = input.nextLine();
    System.out.println("Please enter your login username: ");
    un = input.nextLine();
    System.out.println("Please enter your login password: ");
    pw = input.nextLine();
    System.out.println("Please enter your address: ");
    a = input.nextLine();
    System.out.println("Please enter your contact: ");
    con = input.nextLine();
    System.out.println("Please enter your credit card type: ");
    ct = input.nextLine();
    System.out.println("Please enter your credit card number: ");
    cn = input.nextLine();
    MainPage1 util = new MainPage1();
     util.writeLinesToFile("customerinfo.txt",new String[]{n,un,pw,a,con,ct,cn},true);
     new MainPage1();

  }
}//end of class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:11:02.117

查看[File](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)、[BufferedWriter](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedWriter.html)和[FileWriter](http://docs.oracle.com/javase/7/docs/api/java/io/FileWriter.html)文档。你应该能够用这两个类来完成这个。此代码应该可以帮助您入门。

```
String content = "Add this everytime";

File file =new File("example.txt");

//if file does not exists, then create it
if(!file.exists()){
   file.createNewFile();
}

//true = append file
FileWriter fileWritter = new FileWriter(file.getName(),true);
BufferedWriter bufferWritter = new BufferedWriter(fileWritter);
bufferWritter.write(content);
bufferWritter.close();

System.out.println("Done"); 
```

# c++ - 专门用于记录的 Functor

> ID：11728379
> 
> 赞同：2
> 
> 时间：2012-07-30T19:38:00.470
> 
> 标签：c++, functor

我一直潜伏在这里，试图弄清楚 Functor 是否可以做我需要它做的事情。

我想做的是包装对类方法的调用并以某种方式捕获函数返回的值。鉴于我的 Functor 类，我需要做什么才能将我的评论变成代码：

```
template < typename Func >
class MySpecializedFunctor
{
    Func t;
    MyObject& p;
public:

    MyFunctor( MyObject &obj, Func f )
    {
        p = obj;
        t = f;
    }

    void runFunc( ... )
    {
        // Can I use an ellipsis '...' to pass values into t->xxxx() ???

        // Assume the first param is always time, the others are never the same
        bool b = p->t( time( NULL ), /* first value of ... */, /* second value of ... */ );
        if ( !b )
        {
            // log error here
        }
    }
} 
```

因为这是一个 Functor，所以被包装的函数可以有 n 个参数。

这可能吗？

编辑：我不能使用 C++0X。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T19:40:17.813

使用可变参数模板：

```
template <typename... Args>
void runFunc(Args&&... args)
{
  bool b = p->t(time(NULL), std::forward<Args>(args)...);
  if ( !b )
  {
    // log error here
  }
} 
```

或者重载*runFunc*，如果您的编译器不支持可变参数模板或完美转发：

```
// this one support 3 const arguments, you will need to overload
// all variations of arguments count and constness
template <typename Arg1, typename Arg2, typename Arg3>
void runFunc(const Arg1& arg1, const Arg2& arg2, const Arg3& arg3)
{
  bool b = p->t(time(NULL), arg1, arg2, arg3);
  if ( !b )
  {
    // log error here
  }
} 
```

# pthreads - 线程析构函数运行时自动释放互斥锁

> ID：11728389
> 
> 赞同：0
> 
> 时间：2012-07-30T19:38:30.120
> 
> 标签：pthreads, mutex, unlock

当线程退出（在其析构函数中）时，是否有一种万无一失的方法来自动释放线程持有的互斥锁？

我一直在采取的方法是为每个互斥体创建一个结构，该结构体持有持有它的线程的身份，然后在析构函数中扫描这个列表，如果有任何互斥体与正在完成的线程匹配，然后释放它。但我认为这实际上有一个竞争条件：如果在我锁定互斥锁之后但在我设置数据结构之前调用析构函数会发生什么？

我还查看了 pthread_mutexattr_setrobust_np，但我的理解是 np 函数是不可移植的，我过去曾遇到过问题。

作为参考，每个线程都与一个 TCP/IP 连接相关联，并且锁定/解锁是响应此连接上的请求而发生的。如果连接异常关闭，我需要清理，即释放所有持有的锁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T22:24:14.130

我找到了一个似乎可行的解决方案。首先，我使用错误检查互斥锁（`PTHREAD_ERRORCHECK_MUTEX_INITIALIZER`或`PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP`）。

接下来，在析构函数中，我尝试解锁所有互斥锁，其想法是任何不属于线程的互斥锁都将被单独保留，但线程拥有的任何互斥锁都将被释放。

由于某种原因，即使线程拥有的互斥锁也会返回 EPERM，但随后尝试从另一个线程重新锁定互斥锁会成功，而如果不尝试解锁另一个尝试，则会死锁。相反，在析构函数运行后，仍然会发现不属于被析构线程的其他互斥锁被锁定。

# ios - 如何使用 appDidEnterBackground 的依赖项扩展 NSOperationQueue？

> ID：11728390
> 
> 赞同：1
> 
> 时间：2012-07-30T19:38:30.427
> 
> 标签：ios, objective-c, cocoa-touch, multitasking, nsoperationqueue

我知道如何在 iOS 应用程序进入后台后扩展任务以在后台运行

```
beginBackgroundTaskWithExpirationHandler
dispatch_async 
```

等等

但是，如果我有一个 NSOperationQueue 想要扩展为后台任务，又不会丢失 NSOperations 的相互依赖关系呢？说我有这个：

```
NSBlockOperation *op1 = [NSBlockOperation blockOperationWithBlock:^{
    // Do stuff
}];

NSBlockOperation *op2a = [NSBlockOperation blockOperationWithBlock:^{
    // Do stuff
}];
[op2a addDependency:op1];

NSBlockOperation *op2b = [NSBlockOperation blockOperationWithBlock:^{
    // Do stuff
}];
[op2b addDependency:op1];

NSBlockOperation *op3 = [NSBlockOperation blockOperationWithBlock:^{
    // Do stuff
}];
[op3 addDependency:op2a];
[op3 addDependency:op2b];

NSOperationQueue *queue = [[NSOperationQueue alloc] init];
[queue addOperations: @[op1, op2a, op2b, op3] ]; 
```

有没有一种优雅的方式让 NSOperationQueue 在后台完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T21:46:07.760

我意识到我并没有完全理解后台线程扩展的工作原理。

在调用 beginBackgroundTaskWithExpirationHandler 启动后台扩展后，我可以在后台为所欲为。我以为只是扩展了一个线程，但实际上是整个应用程序都在继续运行。

因此，我只需要在最后一个 NSOperation 结束时调用 endBackgroundTask 即可实现我想要的。

# android - Android画布搜索栏编辑

> ID：11728395
> 
> 赞同：0
> 
> 时间：2012-07-30T19:39:03.217
> 
> 标签：android, imageview, seekbar, hue

在我的应用程序中，用户使用图库导入了一张图片，然后在插入图片的图片视图中插入了两个搜索栏

第一个搜索栏控制图片亮度，另一个控制图片色调

当我使用它们时，它们正在工作，但问题是它们不像..那样保存

我导入了图片，然后让它的亮度很好，但是当我设置图片色调时，我制作的亮度消失了，色调开始了

不在那里

```
iv.save; 
```

或类似的东西？

笔记*

```
final ImageView iv = (ImageView) findViewById(R.id.picture); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T04:40:33.073

就在这里。

```
final ImageView iv = (ImageView) findViewById(R.id.picture);
 iv.setDrawingCacheEnabled(true);
Bitmap bmp=iv.getDrawingCache(); 
```

现在您可以将此位图以 jpg 或 png 格式保存到您的 sdcard 中。

# asp.net-web-api - ASP.NET Web API - 带有多个参数的 GET 请求

> ID：11728397
> 
> 赞同：5
> 
> 时间：2012-07-30T19:39:09.567
> 
> 标签：asp.net-web-api

我想要做的是有一个像 /api/calculator 这样的 api 请求？**1** =7.00& **2** =9.99& **3** =5.50& **4** =45.76 等我的控制器如何获取请求数据？查询字符串的键/代码是 1 到 1000 之间的整数。在查询字符串中，它们可以是1000 个代码中的**一部分**，不一定是全部。价值部分是双倍的。

我认为可行的一种方法是，如果我创建一个`StupidObject`具有 1000 个属性的模型对象（ex）（现在应该使用名为 p1、p2、..p1000 的属性作为代码，因为 int 不是允许的属性名称），用`ModelBinder`. 然后对于控制器，我可以有类似的东西`GetCalcResult(StupidObject obj){...}`但这似乎不是一个优雅的解决方案:)

我尝试过控制器，`GetCalcResult([FromURI]Dictionary<int, double> dict){...}`但 dict 始终为空。也没有`[FromURI]`我得到一个错误。也尝试`List<KeyValuePair<int, double>>`作为具有相同结果的控制器参数。

谁能指出我正确的方向或给我一个可行的例子？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-30T21:08:54.710

一种方法是避免尝试将值作为参数传递并简单地做

```
 var queryValues = Request.RequestUri.ParseQueryString(); 
```

在你的行动方法中。QueryValues 将是 NameValueCollection，您可以对其进行迭代以访问您的查询参数。

如果您真的想使用参数，则使用 [FromUri]FormDataCollection 类型的参数可能会起作用。

# javascript - 使用 JavaScript 事件模拟悬停

> ID：11728406
> 
> 赞同：5
> 
> 时间：2012-07-30T19:39:31.903
> 
> 标签：javascript, events, hover

是否可以使用 JavaScript 事件模拟悬停？我尝试在目标元素上注入鼠标悬停事件，但没有运气。

例如，如果有一个带有悬停选择器的链接，是否可以使用 JavaScript 事件“悬停”它？基本上，我想触发 CSS 悬停。你可以假设我不能使用 jQuery。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T19:52:04.523

jQuery 悬停事件只是使用`mouseenter`和`mouseleave`事件。这是jQuery悬停的来源：

```
function (fnOver, fnOut) {
    return this.mouseenter(fnOver).mouseleave(fnOut || fnOver);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:51:57.893

是的，您只需将 onMouseOver 和 onMouseOut 事件添加到相关元素

像这样：

```
<div class="something" onmouseover="hover(this);" onmouseout="unhover(this);"> 
```

然后让您的 javascript 更改元素的类（如果您想要两个不同的 CSS 类）或直接修改元素的样式。你可以做这样的事情。

```
<script>
function hover(element) {
    element.setAttribute('class', 'something hover');
}
function unhover(element) {
    element.setAttribute('class', 'something');
}
</script> 
```

请注意，您还可以使用像 jQuery 这样的库来更简单地处理这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-16T15:10:22.137

可以使用 JavaScript 事件模拟悬停。我创建了一个用于在悬停时交换图像的模块。您可以试验和调整模块以满足您的需求。例如，我将图像路径和 DOM 选择元素设为通用。

```
// module for swapping out images on hover 
var imageSwap = (function ModuleFactory() {

    "use strict";

    var imageContainer = document.getElementById("image-container"),
        image = document.getElementsByClassName("image")[0],
        imageSource1 = 'path/to/your/image1',
        imageSource2 = 'path/to/your/image2';

    function handleImageSwap(e) {
        if (e.target.id === "image-container") {
            image.setAttribute("src", imageSource2);

            e.target.addEventListener("mouseleave", function _handler_() {
                image.setAttribute("src", imageSource1);
                e.target.removeEventListener("mouseleave", _handler_, false);
            }, false);
        }
    }

    function init() {
        imageContainer.addEventListener("mouseenter", handleImageSwap, false);
    }

    var publicAPI = {
        init: init
    };

    return publicAPI;

})();

document.addEventListener("DOMContentLoaded", imageSwap.init(), false); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-02T04:04:32.637

实际上，CSS 悬停事件比仅仅绑定这两个事件`mouseenter`和`mouseleave`. 所以它需要更多的努力，它们是：

1.克隆元素

2.添加监听mouseenter事件

3.递归redo step `1`，`2`并在mouseleave上恢复克隆的元素

这是我的工作草稿。

```
function bindHoverEvent(element,listener){
    var originalElement = element.cloneNode(true);
    element.addEventListener('mouseenter',listener);
    element.addEventListener('mouseleave',function(){
        bindHoverEvent(originalElement,listener);
        this.parentNode.replaceChild(originalElement,this);
    });
} 
```

请注意，`cloneNode`不会复制事件侦听器，因此您需要自己手动将事件重新绑定到克隆的元素及其所有子元素。

# c++ - 如何为使用 Doxygen 的类提供示例代码？

> ID：11728407
> 
> 赞同：2
> 
> 时间：2012-07-30T19:39:38.280
> 
> 标签：c++, class, doxygen

我正在尝试记录嵌入在命名空间中的类，并且我想给出示例用法。我已经编写并包含了示例，它们显示在示例选项卡中。但是，它们没有在类本身中引用。例如，从[本页](http://www.doxygen.nl/manual/commands.html#cmdexample)的代码中，他们的 Doxygen 命令写成：

```
/** \example example_test.cpp
 * This is an example of how to use the Test class.
 * More details about this example.
 */ 
```

似乎 Doxygen 解析了命令和文件并识别出`Test`该类被引用。这对我来说似乎没有发生。此功能没有很好的文档记录，Google 几乎不可能。

这是我的代码的一般布局：

```
namespace exampleSpace
{
  ///Doxygen documentation

  class exampleClass {};

  ///@example example1.cpp
  ///  example1 description
  ///@example example2.cpp
  ///  example2 description
} 
```

示例描述为类命名，官方文档中的描述也是如此。然而，Doxygen 似乎认出了他们的而不是我的。

我的示例代码是完整的并且可以正确编译/运行。

那么放置这些命令的正确位置在哪里，以便 Doxygen 知道它们是这个特定类的示例？

编辑：似乎 Doxygen 实际上正在解析源代码，因为它成功链接到代码中的类和任何成员函数。但是，课程页面本身并没有链接到文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-04T18:10:02.517

我已经习惯`\snippet`了。您引用另一个文件，在该文件中，您可以用`[mytag]`区域包围代码块。然后显示在哪里`\snippet`使用。

另请参阅[https://stackoverflow.com/a/35759133/356726](https://stackoverflow.com/a/35759133/356726)和[https://stackoverflow.com/a/16034375/356726](https://stackoverflow.com/a/16034375/356726)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:43:08.847

在这一点上只是一个猜测，但我敢打赌，由于命名空间，Doxygen 不会匹配。

使链接发生的一些想法：

*   明确限定示例中所有名称的命名空间
*   将代码放在命名空间中的示例中

# forms - 如何将纯文本节点添加到 drupal 表单？

> ID：11728410
> 
> 赞同：2
> 
> 时间：2012-07-30T19:39:41.487
> 
> 标签：forms, drupal

我正在尝试以自定义 drupal 表单添加纯文本节点。目的是只显示一些静态文本。

问题是 - 我不知道有任何这样的方法。

我使用了“描述”，但必须附加到表单元素。

有没有办法简单地将一些文本显示为表单的一部分？

例如：

下面将测试你对某某的能力。. . .

ETC...

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T19:48:10.897

您应该能够使用[`markup`表单元素](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7#markup)添加文本。

> **描述**：生成用于显示在表单内的通用标记。

[文档](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7#markup)中的示例：

```
$form['contact_information'] = array(

  '#markup' => variable_get('contact_form_information',
t('You can leave us a message using the contact form
below.')),

); 
```

# r - 使用 CUT 和四分位数在 R 函数中生成中断

> ID：11728419
> 
> 赞同：27
> 
> 时间：2012-07-30T19:40:02.663
> 
> 标签：r, cut

根据[之前的一些很好的建议](https://stackoverflow.com/questions/11725238/properly-building-a-function-in-r)，我现在正在编写我的第二个 R 函数并使用类似的逻辑。但是，我正在尝试更多地自动化，并且可能对我自己的利益变得太聪明了。

我想根据订单数量将客户分成五等份。这是我的代码：

```
# sample data
clientID <- round(runif(200,min=2000, max=3000),0)
orders <- round(runif(200,min=1, max=50),0)

df <- df <- data.frame(cbind(clientID,orders))

#function to break them into quintiles
ApplyQuintiles <- function(x) {
  cut(x, breaks=c(quantile(df$orders, probs = seq(0, 1, by = 0.20))), 
      labels=c("0-20","20-40","40-60","60-80","80-100"))
}

#Add the quintile to the dataframe
df$Quintile <- sapply(df$orders, ApplyQuintiles) 
```

`table(df$Quintile)`

```
0-20   20-40   40-60    60-80   80-100 
40     39      44       38      36 
```

您会在此处看到，在我的示例数据中，我创建了 200 个观察值，但通过 列出的只有 197 个`table`。剩下的3个是`NA`

现在，有些客户端 ID 的五分位数为“NA”。似乎如果它们处于最低中断，在本例中为 1，那么它们不包含在 cut 函数中。

有没有办法`cut`包容所有的观察？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-30T19:49:06.113

尝试以下操作：

```
set.seed(700)

clientID <- round(runif(200,min=2000, max=3000),0)
orders <- round(runif(200,min=1, max=50),0)

df <- df <- data.frame(cbind(clientID,orders))

ApplyQuintiles <- function(x) {
  cut(x, breaks=c(quantile(df$orders, probs = seq(0, 1, by = 0.20))), 
      labels=c("0-20","20-40","40-60","60-80","80-100"), include.lowest=TRUE)
}
df$Quintile <- sapply(df$orders, ApplyQuintiles)
table(df$Quintile)

0-20  20-40  40-60  60-80 80-100 
  40     41     39     40     40 
```

我包含`include.lowest=TRUE`在您的剪切功能中，这似乎使它起作用。有关`?cut`更多详细信息，请参阅。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-01-21T19:49:40.107

古老的 Hmisc 包中还有[cut2](https://rdrr.io/cran/Hmisc/man/cut2.html)。它进行分位数切割。

从帮助：

> 函数类似于 cut 但左端点包含在内，标签的形式为 [lower, upper)，除了最后一个区间是 [lower,upper]。如果给出切割，默认情况下会确保切割包括 x 的整个范围。此外，如果未给出切割，则将 x 切割成分位数组（g 给定）或具有给定最小观察数（m）的组。cut 创建一个类别对象，而 cut2 创建一个因子对象。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-08-13T11:18:11.697

[您可以使用OneR 包](https://cran.r-project.org/web/packages/OneR/index.html)中的函数中的`content`方法非常轻松地自动完成此操作：`bin`

```
library(OneR)
set.seed(700)

clientID <- round(runif(200, min = 2000, max = 3000), 0)
orders <- round(runif(200, min = 1, max = 50), 0)
df <- data.frame(cbind(clientID, orders))

df$Quintiles <- bin(df$orders, method = "content")
table(df$Quintile)
## 
## (0.952,9.8]    (9.8,19]   (19,31.4] (31.4,38.2]   (38.2,49] 
##          40          41          39          40          40 
```

（完全披露：我是这个包的作者）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-13T22:49:36.650

我对我的数据使用了类似的函数，我很担心，因为我的五分之一箱有不同数量的观察：可以吗？谢谢！

```
jobs02.vq <- cut(meaneduc02v, breaks=c(quantile(meaneduc02v,  probs = seq(0,        1, by=0.20), 
                          na.rm=TRUE, names=TRUE, include.lowest=TRUE, right = TRUE, 
                          labels=c("1","2","3","4","5")))) # makes quintiles 
```

我得到的输出是：

```
 table(jobs02.vq, useNA='ifany')
 jobs02.vq
 [1.00,2.00) [2.00,2.51) [2.51,3.34) [3.34,4.45) [4.45,5.33]        <NA> 
     82          54          69          64          67         123 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-23T03:19:14.290

我想要一些可行的东西，`dplyr`并且`group_by`；我需要切割标签来指定范围。这是我得到的

```
Get.breaks <- function(f, cuts, digits = 2)
{
  x <- round(quantile(f, probs = seq(1/cuts, 1 - 1/cuts, 1/cuts), names = F), digits)
  x <- sort(unique(c(0, x, Inf)))
  rm(f, cuts, digits)
  return(x)
}

df <- data.frame(cbind(clientID = round(runif(200,min=2000, max=3000),0),
                       orders = round(runif(200,min=1, max=50),0)))

cut <- df %>%
        mutate(lower = cut(orders, right = F
                           , breaks = Get.breaks(orders, cuts = 10, digits = 0)
                           , labels = head(Get.breaks(orders, cuts = 10, digits = 0), -1)
                           )
               , lower = as.numeric(as.character(lower))
               ) %>% 
        group_by(lower) %>% 
        summarise(.groups = "drop", N = n()) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-02T14:12:36.173

适用于所有数据的简单函数：

```
 cutD <- function(x,n) {
  cut(x, breaks=c(quantile(x, probs = seq(0, 1, by = 1/n),na.rm = T)), 
      include.lowest=TRUE)
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-07-18T11:35:38.127

[来自 Hmisc 的cut2](https://www.rdocumentation.org/packages/Hmisc/versions/4.2-0/topics/cut2)确实有效（参数 g 定义了分位数组的数量）

```
set.seed(700)

clientID <- round(runif(200,min=2000, max=3000),0)
orders <- round(runif(200,min=1, max=50),0)

df <- data.frame(cbind(clientID,orders))

library(Hmisc)
df$Quintile <- cut2(df$orders, g =5)
levels(df$Quintile) <-  c("0-20", "20-40", "40-60", "60-80", "80-100")

table(df$Quintile)
##  0-20  20-40  40-60  60-80 80-100 
##    40     41     39     40     40 
```

# php - SHA512 哈希和随机盐对密码是否安全？

> ID：11728422
> 
> 赞同：2
> 
> 时间：2012-07-30T19:40:10.277
> 
> 标签：php, hash

> **可能重复：**
> [PHP 密码的安全哈希和盐](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords)

我使用以下代码来散列和存储密码：

```
$salt=uniqid(mt_rand(), false);
hash('sha512',$pass+$salt); 
```

在我们这个时代安全吗？如果不是，什么解决方案更好？`crypt()`对这个目的有好处还是太旧了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:00:17.063

为了使您的哈希更难暴力破解，请增加计算时间。`sha512`是一个密码散列函数，它针对速度进行了优化。在对用户进行身份验证时，您只需对密码进行一次哈希处理，因此不要害怕花时间。

既然攻击者会计算数百万个哈希值，为什么不让你的哈希函数取`0.1s`每个哈希值呢？您不会注意到任何显着的速度下降，但任何蛮力攻击都将是无效的。

话虽这么说，而不是出去编写自己的哈希函数来执行此操作：

```
hash = sha512(password)

for i in range(10000):
  hash = sha512(hash) + salt

return hash 
```

使用经过测试的解决方案[`phpass`](http://www.openwall.com/phpass/)，例如使用`bcrypt`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T19:42:35.000

用盐散列是好的。但是，您想多次应用散列算法（几百个是一个不错的选择）。

以这种方式“拉伸”散列函数不会产生更强的散列，而是减缓蛮力攻击。

[http://en.wikipedia.org/wiki/Key_stretching#Hash_based_key_stretching](http://en.wikipedia.org/wiki/Key_stretching#Hash_based_key_stretching)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T19:42:57.423

这取决于你对它的使用，它不足以存储信用卡详细信息或银行详细信息（不是你会散列它们！）但对于网站密码来说，IMO 已经足够了，特别是考虑到你正在使用一个盐，它是 512 哈希。

# c# - ASP.NET 页面生命周期中的自定义服务器控件和事件问题

> ID：11728428
> 
> 赞同：0
> 
> 时间：2012-07-30T19:40:24.923
> 
> 标签：c#, events, custom-controls

我开始对这个发疯了，“似乎”我不能让它以一种优雅的方式工作，我相信我应该能够做到。

在页面的右侧，我动态创建了自定义服务器控件，其中包含触发的事件，我已经证明这一点在测试中有效。

我在页面左侧有一个 Treeview，假设它不是回发，它会在页面加载时自动填充，如果是，那么它的视图状态可以很好地处理这个问题。当您单击树的其中一个分支时，它将回发，当事件触发时，它将使用新的自定义服务器控件填充右侧，这些控件包含与您单击的分支相关的信息。右侧面板始终填充正确的控件，但是当它们被单击时不会触发事件，因为新分支 ID 仅在 page_load 事件（当 treeview 事件触发时）之后才知道，这对于所有事件的聪明来说都太迟了注册我想。

我已经研究过使用 Response.Redirect，但后来我失去了 Treeview 上的视图状态，因此开始考虑强制回发 Javascript，但还没有走得太远。

我真的不敢相信这是一个不寻常的问题，所以希望有一个优雅的解决方案。如果它只是我正在以完全错误的方式去做，那么如果我们能让它工作，我很乐意改变所有的逻辑！

非常感谢！！

马特

*****更新* *******

 **我还不允许关闭它，所以将粘贴在下面

似乎把它打出来让我想到了 Javascript 路由以及 .NET 在哪里必须有什么。一点阅读，我想出了这个。

`PostBackOptions pbo = new PostBackOptions(pnlEvents); pbo.ActionUrl = Request.Url.AbsoluteUri; pbo.PerformValidation = false; string postback = ClientScript.GetPostBackEventReference(pbo); ClientScript.RegisterStartupScript(typeof(Page), "AutoPostBackScript", postback, true);`

如果您在从中获取信息的事件触发后运行此程序，这将导致另一个回发，只要您将值存储在视图状态或其另一个控件视图状态中，您就可以加载服​​务器控件 forn Init 或 Load。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:44:31.340

可以在 Page_Init 或 Page_Load 中注册事件。如果您仍然迷路，请查看[MSDN 上的 ASP.NET 页面生命周期概述](http://msdn.microsoft.com/en-us/library/ms178472.aspx)。

**更新：** 您可以简单地在 URL 中发送参数，然后在 Page_Load 中获取它，根本不使用回发机制。**

# windows - Perl：从 windows、SSH 到 linux 服务器？

> ID：11728429
> 
> 赞同：1
> 
> 时间：2012-07-30T19:40:28.840
> 
> 标签：windows, linux, perl, ssh

在 perl 中，你如何从 windows ssh 到 linux 服务器？不是从命令行。

我正在编写一个程序，它将从 Windows 机器 ssh 到 linux 服务器。

我知道这是一个非常小的描述，但我不知道任何其他方式来描述我在问什么。这很简单。

更新：如果有更简单和/或易于使用的语言，请告诉我。

# c# - 在 MonoDroid 中修改 XML 后如何防止项目重建？

> ID：11728431
> 
> 赞同：0
> 
> 时间：2012-07-30T19:40:30.680
> 
> 标签：c#, android, visual-studio-2010, xamarin.android

我目前在使用 Mono for Android 时遇到问题。

在我的应用程序中，我目前正在使用`SharedPreferences`.

现在，每当我自上次构建以来更改了任何 XML 或 AXML 文件时，编译器都会重新构建我的整个项目（clean->build）。因此，无论是在模拟器还是 Android 设备上，应用程序的部署总是首先执行“删除以前的版本”步骤。这也将删除 SharedPreferences 类中的所有变量，导致必须重新初始化这些数据，如果我正在处理 XML 文件，这将变得非常乏味。

如果 XML 文件被修改，有什么方法可以防止项目被重建。或者，如果重新安装应用程序，是否有任何方法可以防止 SharedPreference 数据被删除？

额外信息：

*   构建目标：API 10
*   Mono for Android 版本：4.2.3
*   IDE：Visual Studio 2010 Ultimate SP1
*   模拟器：API 10 Atom x86 默认模拟器
*   设备：三星 Galaxy Wonder (Android 2.3.3)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T20:43:52.040

当资源文件更改时，重建是必要的，因为它可能导致生成的资源类发生更改。也就是说，Android 的 Mono 确实提供了在部署之间保留应用程序数据的选项，以帮助解决此类情况。

如果您在 Options-> Mono for Android 下查看，您将看到一个标记为“在部署之间保留应用程序数据/缓存在设备上”的复选框以打开此功能。

# javascript - Javascript - 更改变量

> ID：11728433
> 
> 赞同：0
> 
> 时间：2012-07-30T19:40:36.307
> 
> 标签：javascript, jquery, variables, button, twitter

我正在尝试构建一个页面，该页面将具有 Twitter 搜索结果的滚动列表（使用 twitter.search for jQuery）。用户应该能够通过单击按钮来更改搜索词（因此，单击“Apple”会将搜索词更改为“Apple”。

我正在使用变量来设置搜索词。将该变量设置为文本字符串（即 searchText = "Pineapple";) 有效。但是当我尝试使用按钮更改变量时，什么也没有发生。

//edit - 按钮似乎没有改变变量。想法？谢谢。

```
<script type="text/javascript">
//set default value for searchText
    searchText = "Pineapple";

//this sets up our Twitter stream
    $(document).ready(function() {

        $('#twitter-stream').twitterSearch({ 
        term: searchText, 
        // no fade 
        animOut: { opacity: 1 }, 
        avatar:  false, 
        anchors: false, 
        bird:    false, 
        colorExterior: 'white', 
        colorInterior: 'white', 
        pause:   true, 
        time:    false, 
        timeout: 2000 
        });
    });
</script>

<script type="text/javascript">
    $("#button-container").on("button", "click", function( e ) {
        searchText = $(this).text();
    });
</script> 
```

```
<div id="twitter-stream" title="Mouse away to un-pause">
</div>

<div id="button-container">
<button class="button"> Apple </button>
</div>

<button onclick="alert(searchText);">Click me!
</button> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T19:47:57.603

这段代码效率很低，你可以使用 jQuery 定义一个函数来处理按钮的*所有*点击事件，而不是 4 个几乎相同的函数。

使用 jQuery 委派您的事件`.on`：

```
$("#someContainerDiv").on("button", "click", function( e ) {
    searchText = $(this).text();
}); 
```

这消除了对值数组的需要，因为您只需获取按钮本身的 innerText 。

**参考**

这是关于 jQuery 的一些信息[`on`](http://api.jquery.com/on/)，这里是关于[`delegate`](http://api.jquery.com/delegate/)它所替换的函数的一些信息。

# codeigniter - 在 PHP Codeigniter 中显示“时间前”而不是日期时间

> ID：11728438
> 
> 赞同：1
> 
> 时间：2012-07-30T19:40:48.127
> 
> 标签：codeigniter, date, time, timeago

我想显示像 twitter 和 FB 这样的时间格式（3 小时前发布，2 分钟前发布等等......）

我试过这段代码没有成功：

```
function format_interval($timestamp, $granularity = 2) {
  $units = array('1 year|@count years' => 31536000, '1 week|@count weeks' => 604800, '1 day|@count days' => 86400, '1 hour|@count hours' => 3600, '1 min|@count min' => 60, '1 sec|@count sec' => 1);
  $output = '';
  foreach ($units as $key => $value) {
    $key = explode('|', $key);
    if ($timestamp >= $value) {
      $floor = floor($timestamp / $value);
      $output .= ($output ? ' ' : '') . ($floor == 1 ? $key[0] : str_replace('@count', $floor, $key[1]));
      $timestamp %= $value;
      $granularity--;
    }

    if ($granularity == 0) {
      break;
    }
} 
```

我将此函数与回调一起使用到另一个函数中，例如： $this->format_interval(); 并将其传递给我的视图

我当前的格式日期是：**2012-07-26 09:31:pm**并且已经存储在我的数据库中

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-30T20:05:36.107

[Date Helper 的](https://ellislab.com/codeigniter/user-guide/helpers/date_helper.html) 方法`timespan()`就是这样做的：

> 此功能最常见的目的是显示从过去的某个时间点到现在已经过去了多少时间。

给定一个时间戳，它将以这种格式显示已经过去了多少时间：

> 1 年 10 个月 2 周 5 天 10 小时 16 分钟

因此，在您的示例中，您需要做的就是将日期转换为时间戳并执行以下操作：

```
$post_date = '13436714242';
$now = time();

// will echo "2 hours ago" (at the time of this post)
echo timespan($post_date, $now) . ' ago'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:46:46.223

在文件中尝试这样的事情`my_date_helper.php`（来源：[Codeigniter 论坛](http://codeigniter.com/forums/viewthread/106557/)）：

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

if( ! function_exists('relative_time'))
{
    function relative_time($datetime)
    {
        $CI =& get_instance();
        $CI->lang->load('date');

        if(!is_numeric($datetime))
        {
            $val = explode(" ",$datetime);
           $date = explode("-",$val[0]);
           $time = explode(":",$val[1]);
           $datetime = mktime($time[0],$time[1],$time[2],$date[1],$date[2],$date[0]);
        }

        $difference = time() - $datetime;
        $periods = array("second", "minute", "hour", "day", "week", "month", "year", "decade");
        $lengths = array("60","60","24","7","4.35","12","10");

        if ($difference > 0) 
        { 
            $ending = $CI->lang->line('date_ago');
        } 
        else 
        { 
            $difference = -$difference;
            $ending = $CI->lang->line('date_to_go');
        }
        for($j = 0; $difference >= $lengths[$j]; $j++)
        {
            $difference /= $lengths[$j];
        } 
        $difference = round($difference);

        if($difference != 1) 
        { 
            $period = strtolower($CI->lang->line('date_'.$periods[$j].'s'));
        } else {
            $period = strtolower($CI->lang->line('date_'.$periods[$j]));
        }

        return "$difference $period $ending";
    }

} 
```

该格式与您在数据库中使用的格式略有不同（为什么您使用 pm/am 标记时间，而不是仅使用 24 小时时间并转换为前端？）。无论哪种方式，都不应该花费太多的工作来让它工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T20:31:00.477

我有一个函数可以像这样解决这个问题：

```
$int_diff       =   (time() - $int_time);

$str_this_year  =   date('Y-01-01', $int_time);
$str_weekday    =   t('time_weekday_'.strtolower(date('l', $int_time)));
$str_month      =   t('time_month_'.strtolower(date('F', $int_time)));

$arr_time_formats   =   array(  '-90 seconds'   =>  t('time_a_minute_at_most'),
                                '-45 minutes'   =>  t('time_minutes_ago', ceil($int_diff / (60))),
                                '-70 minutes'   =>  t('time_an_hour_at_most'),
                                '-8 hours'      =>  t('time_hours_ago', ceil($int_diff / (60 * 60))),
                                'today'         =>  t('time_hours_ago', ceil($int_diff / (60 * 60))),
                                'yesterday'     =>  t('time_yesterday', date('H:i', $int_time)),
                                '-4 days'       =>  t('time_week_ago', $str_weekday, date('H:i', $int_time)),
                                $str_this_year  =>  t('time_date', date('j', $int_time), $str_month, date('H:i', $int_time)),
                                0               =>  t('time_date_year', date('j', $int_time), $str_month, date('Y', $int_time), date('H:i', $int_time)));

if ($boo_whole)
    return $arr_time_formats[0];

foreach(array_keys($arr_time_formats) as $h)
    if ($int_time >= strtotime($h))
        return $arr_time_formats[$h]; 
```

基本上是一个与和`t()`结合的函数。这里的想法是提供一直贯穿的密钥，直到您到达最近的时间，并作为后备。`$this->lang->line()``sprintf()``strtotime()``0`

这种方法非常好，因为您可以通过漂亮的概览轻松调整时间。我可以提供更多的代码，但感觉做的工作太多了 :) 基本上这只是你如何做到这一点的理论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-11T12:27:03.217

```
<?php 

    $this->load->helper('date');

    //client created date get from database
    $date=$client_list->created_date; 

    // Declare timestamps
    $last = new DateTime($date);
    $now = new DateTime( date( 'Y-m-d h:i:s', time() )) ; 

    // Find difference
    $interval = $last->diff($now);

    // Store in variable to be used for calculation etc
    $years = (int)$interval->format('%Y');
    $months = (int)$interval->format('%m');
    $days = (int)$interval->format('%d');
    $hours = (int)$interval->format('%H');
    $minutes = (int)$interval->format('%i');

                                 //   $now = date('Y-m-d H:i:s');

                                 if($years > 0)
                                 {
                                 echo $years.' Years '.$months.' Months '.$days.' Days '. $hours.' Hours '.$minutes.' minutes ago.' ;
                                 }
                                 else if($months > 0)
                                 {
                                 echo $months.' Months '.$days.' Days '. $hours.' Hours '.$minutes.' minutes ago.' ;
                                 }
                                 else if($days > 0)
                                 {
                                 echo $days.' Days '.$hours.' Hours '.$minutes.' minutes ago.' ;
                                 }
                                 else if($hours > 0)
                                 {
                                 echo  $hours.' Hours '.$minutes.' minutes ago.' ;
                                 }
                                 else
                                 {
                                 echo $minutes.' minutes ago.' ;
                                 }

                                 ?> 
```

# sql - 为 SQL Select 语句引用其他表

> ID：11728448
> 
> 赞同：0
> 
> 时间：2012-07-30T19:41:41.753
> 
> 标签：sql

我有两个表，它们通过'debt_key'连接这里是表结构

**备注**表：

```
Note_Key (numeric(9,0),not null)
Debtor_Key(numeric(9,0),not null)
Debt_Key(numeric(9,0),not null)
User_Key(numeric(5,0),not null)
Note_Date(datetime, not null)
Note_Time(char(8),not null)
Note_Text(Char(80),not null) 
```

**负债**表：

```
Debt_key
ACCT 
```

....等等，但我们只需要使用这两个字段。

所以我试图将带有日期和时间的新笔记添加到笔记表中。到目前为止，我一直没有成功。这是我所写内容的基本结果：

```
INSERT INTO NOTE (b.NOTE_DATE, b.NOTE_TIME, b.NOTE_TEXT)
VALUES('2012-07-11 00:00:00.000','00:00:00','ASSIGNED FOR PI CONTACT')
   SELECT NOTE_DATE, NOTE_TIME, NOTE_TEXT 
   FROM DEBT a JOIN NOTE B ON B.DEBT_KEY = A.DEBT_KEY AND A.DEBT_KEY = '5797071' 
```

当我执行它给我这个错误：

> 无法将值 NULL 插入到列“NOTE_KEY”、表“Ads_Mast.dbo.NOTE”中；列不允许空值。插入失败。该语句已终止。

我无法向 Note_key 列添加值，因为它是自动递增的。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:43:34.780

如果您正在尝试新笔记，那么如果您要加入第二个表格`INSERT`，则需要使用。`INSERT INTO SELECT FROM`您还需要在 Notes 表中包含每个字段的值：

```
INSERT INTO NOTE 
(
    Note_Key,
    Debtor_Key,
    Debt_Key,
    User_Key,
    NOTE_DATE, 
    NOTE_TIME, 
    NOTE_TEXT
)
SELECT b.Note_Key, a.Debtor_Key, a.Debt_Key, b.NOTE_DATE, a.User_Key, b.NOTE_TIME, b.NOTE_TEXT 
FROM DEBT a JOIN NOTE B 
    ON B.DEBT_KEY = A.DEBT_KEY 
WHERE A.DEBT_KEY = '5797071' 
```

如果您知道要提交的所有值，则需要执行以下操作：

```
INSERT INTO NOTE 
(
    Debtor_Key,
    Debt_Key,
    User_Key,
    NOTE_DATE, 
    NOTE_TIME, 
    NOTE_TEXT
)
VALUES
(
    0, -- the Debtor_Key value
    1, -- the Debt_Key value
    1, -- the User_Key value
    '2012-07-11 00:00:00.000',
    '00:00:00',
    'ASSIGNED FOR PI CONTACT'
) 
```

编辑：如果您有一些常量值和表中的一些值，请执行以下操作：

```
INSERT INTO NOTE 
(
    Debtor_Key,
    Debt_Key,
    User_Key,
    NOTE_DATE, 
    NOTE_TIME, 
    NOTE_TEXT
)
SELECT a.Debtor_Key
    , a.Debt_Key
    , '2012-07-11 00:00:00.000'
    , a.User_Key
    , '00:00:00'
    , 'ASSIGNED FOR PI CONTACT'
FROM DEBT a JOIN NOTE B 
    ON B.DEBT_KEY = A.DEBT_KEY 
WHERE A.DEBT_KEY = '5797071' 
```

但是，如果您只想指定`UPDATE`特定值，则可以使用`UPDATE`：

```
UPDATE b
SET NOTE_DATE = '2012-07-11 00:00:00.000'
    , NOTE_TIME = '00:00:00'
    , NOTE_TEXT = 'ASSIGNED FOR PI CONTACT'
FROM Note b
JOIN DEBT a
    ON B.DEBT_KEY = A.DEBT_KEY
WHERE  A.DEBT_KEY = '5797071' 
```

# bash - 这个shell命令有什么问题

> ID：11728463
> 
> 赞同：1
> 
> 时间：2012-07-30T19:43:22.460
> 
> 标签：bash, shell, rvm

我需要将此添加到`.bashrc`

```
echo '[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" # Load RVM function' >> ~/.bash_profile 
```

但我正在使用一个shell脚本，我需要在另一个用户下运行它所以我尝试了以下..

```
BASH_COMMAND='[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm"'
sudo su ${USER} -c "echo '${BASH_COMMAND}' >> ${HOME_BASE}${USER}/.bashrc" 
```

我期待看到

```
'[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" 
```

在我的`.bashrc`

但我看到了这个

```
sudo su ${USER} -c "echo echo 'sudo su ${USER} -c "echo '${BASH_COMMAND}' >> ${HOME_BASE}${USER}/.bashrc"' >> /home/deploy/.bashrc >> ${HOME_BASE}${USER}/.bashrc" 
```

我在做错什么脚本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:56:27.297

shell 有时会误解重定向，您可以通过以下方式解决此问题：

```
RVM_COMMAND='[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm"'
echo "${RVM_COMMAND}" | sudo su ${USER} -c 'tee -a "$HOME/.bashrc"' >/dev/null 
```

# entity-framework-4.1 - EF4.1 和左外连接查找空值？

> ID：11728465
> 
> 赞同：0
> 
> 时间：2012-07-30T19:43:26.933
> 
> 标签：entity-framework-4.1, outer-join

我有两张桌子，地址和人员。人们有 FK 要寻址。我试图找到没有人的地址：

```
select id from Address a 
left outer join person p on p.address_id = a.id
where p.address_id is null 
```

这可能使用 LINQ to Entities 吗？我尝试了一些变化

```
 var results = from addr in _context.Addresses
               from ppl in addr.People
               where ppl == null ... 
```

但似乎无法弄清楚如何返回没有人的地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:41:41.863

我提议：

```
var results = (from addr in _context.Addresses
               where !addr.People.Any()
               select addr).ToList(); 
```

# objective-c - 如何按字母顺序对 NSMutableOrderedSet 进行排序？

> ID：11728466
> 
> 赞同：1
> 
> 时间：2012-07-30T19:43:31.963
> 
> 标签：objective-c

我想按字母顺序对字符串的 NSMutableOrderedSet 进行排序。有方法吗？我已经搜索过，但找不到任何东西。

如果它是一个数组，则寻找这样的东西：

```
sortedArray = [originalArray sortedArrayUsingSelector:@selector
 (localizedCaseInsensitiveCompare:)]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T19:53:42.517

```
[nameOfSet sortUsingComparator:(NSComparator)^(id obj1, id obj2){
    return [obj1 localizedCaseInsensitiveCompare:obj2]; }];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-05T17:22:43.527

使用`localizedStandardCompare`代替`localizedCaseInsensitiveCompare`，假设你想要 1, 2, 3, 4, 5 ...., 100 或更多，那么在 9 之后`localizedCaseInsensitiveCompare`无法对你的集合进行排序，它会像 1,10,2... 一样打印。但`localizedStandardCompare`会准确排序。

```
[nameOfSet sortUsingComparator:(NSComparator)^(id obj1, id obj2){
        return [obj1 localizedStandardCompare:obj2]; }]; 
```

谢谢

# django - django中静态页面元素的最佳实践

> ID：11728469
> 
> 赞同：0
> 
> 时间：2012-07-30T19:43:41.910
> 
> 标签：django

我有一些不经常更改的页面元素，并且会显示在每个页面上，例如一些广告栏、页脚内容等。

我想在我的管理界面中更改这些元素的设置，所以我有它们的模型。

django 中是否有处理这些元素的最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:51:49.817

您可以使用[上下文处理器](https://docs.djangoproject.com/en/dev/ref/templates/api/#subclassing-context-requestcontext)将它们添加到上下文中并使用简单的缓存机制，这样您就不必每次都访问数据库，例如[http://eflorenzano.com/blog/2008/11/28/drop-死简单的django缓存/](http://eflorenzano.com/blog/2008/11/28/drop-dead-simple-django-caching/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:52:11.700

不是真的，不。您正在描述单例模式，因此您可能希望实现单例模型类型：

```
class SingletonModel(models.Model):
    class Meta:
        abstract = True

    def save(self, *args, **kwargs):
        self.id = 1
        super(SingletonModel, self).save(*args, **kwargs)

    def delete(self, *args, **kwargs):
        pass 
```

这将确保从该类继承的任何模型都只能有一个成员并且不能被删除。除此之外，我建议将所有内容组合成一个模型，称为类似于`SiteSettings`页眉、页脚等字段的模型，而不是每个模型都单独的模型。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-30T19:51:11.533

很难回答——你到底在问什么？

您可以在基本模板中显示这些模型。您可以使用缓存来减少数据库调用。

# ruby-on-rails - 如何在 Ruby 中构建 JSON 代码

> ID：11728472
> 
> 赞同：3
> 
> 时间：2012-07-30T19:43:55.977
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, json

我有一个新手问题。

下面的 Ruby 代码返回输出 1 中显示的 JSON。如何修改它以返回 Output2 中显示的 JSON，即每条记录都在客户记录中。

## 代码：

```
def index
    @customers = Customer.all
    respond_to do |format|
        format.html
        format.json {render json: @customers.to_json}
    end
end 
```

## 输出1：

```
[
    {
        "address":"123 Main Ave, Palo Alto, CA",
        "created_at":"2012-07-10T19:49:24Z",
        "id":1,
        "name":"ACME Software Inc.",
        "phone":"1-650-555-1500",
        "updated_at":"2012-07-10T19:49:24Z"
    },
    {
        "address":"555 Art Drive, Mountain View, CA",
        "created_at":"2012-07-10T19:50:19Z",
        "id":2,
        "name":"My Company",
        "phone":"1-415-555-1000",
        "updated_at":"2012-07-10T19:50:19Z"
    }
] 
```

## 输出2：

```
[
    {
        "customer":{
            "address":"123 Main Ave, Palo Alto, CA",
            "created_at":"2012-07-10T19:49:24Z",
            "id":1,
            "name":"ACME Software Inc.",
            "phone":"1-650-555-1500",
            "updated_at":"2012-07-10T19:49:24Z"
        }
    },
    {
        "customer":{
            "address":"555 Art Drive, Mountain View, CA",
            "created_at":"2012-07-10T19:50:19Z",
            "id":2,
            "name":"My Company",
            "phone":"1-415-555-1000",
            "updated_at":"2012-07-10T19:50:19Z"
        }
    }
] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T19:48:51.340

如果您希望所有模型都具有此行为，则可以执行

```
ActiveRecord::Base.include_root_in_json = true 
```

在初始化程序中。

对于单个模型，使用

```
self.include_root_in_json = true 
```

在模型本身。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T19:51:39.797

从 Rails 3.2 开始，您可以：

```
format.json {render json: @customers.to_json(:root => true)} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T19:46:34.730

好吧，我不知道你为什么想要这个，但这是一种简单的方法：

```
format.json {render json: @customers.map{ |x| {'customer' => x } }.to_json} 
```

# facebook - Facebook Graph API：{*actor*} 在 Caption 中不起作用

> ID：11728473
> 
> 赞同：2
> 
> 时间：2012-07-30T19:44:02.293
> 
> 标签：facebook, facebook-graph-api

我一直在使用 Facebook Graph API 发布到用户的墙上。我在帖子中包含了用户名，如下所示：

```
'caption': '{*actor*} is being referenced in this example'; 
```

（这是在 Python 中）。

上次我检查时一切正常。

直到今天：现在，当我使用相同的代码将消息发布到我的墙上时，我看到`'{*actor*}'`文字被单独留下，没有替换。

我知道 FB 因擅自更改 API 而臭名昭著。这是 API 更改吗？如果是，新政策是什么？

或者这只是他们的一个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T19:19:57.617

Facebook 已承认该漏洞并将其列为低优先级

[https://developers.facebook.com/bugs/339087982842639](https://developers.facebook.com/bugs/339087982842639)

# php - Twitter API - 相同的光标错误

> ID：11728480
> 
> 赞同：0
> 
> 时间：2012-07-30T19:44:19.710
> 
> 标签：php, rest, twitter

从 twitter 的 REST API 我用户获取/关注者功能。我在下面粘贴了一个代码片段。

我的问题是，我成功获得追随者身份的时间。但是当一个用户拥有超过 5000-6000 个关注者时，我的结果就会出错。

当我从用户的个人资料页面查看时，我看到该用户有 5500 个关注者，但是当我运行以下代码时，大多数时候会出现 5500 个 id，但有时会在 $ids 变量中出现 29994 个关注者。现在我正在记录拥有超过 29k 关注者的结果。我看到一些请求返回了 29994 个关注者，但我找不到答案。

我是否错过了获取 ids - 光标方法中的某些内容？谢谢

**编辑**：经过一些调试后，我记录了“$cursor_archieve”参数并发现了这一点：
* 有时 next_cursor 和 previous_cursor 相同：

```
Array
(
    [0] => -1
    [1] => 1400573121087317741
    [2] => 1400573121087317741
    [3] => 1400573121087317741
    [4] => 1400573121087317741
    [5] => 1400573121087317741
    [6] => 1400573121087317741
) 
```

所以在这种情况下，虽然用户有 7100 个关注者，但我只有 5000 个关注者

*   有时游标顺序相同：

    阵列
    （
    [0] => -1
    [1] => 1404335879106773348
    [2] => 1404341060469987526
    [3] => 1404338682006540390
    [4] => 1404341060469987526
    [5] => 1404335879106773348
    [6] => 1404338682006540390
    ）

我的代码是这样的：

```
public function getIds($user = "someuser"){
    $tmhOAuth = new tmhOAuth(array( 'consumer_key'    => YOUR_CONSUMER_KEY, 
              'consumer_secret' => YOUR_CONSUMER_SECRET,
              'user_token'      => $atoken1, 'user_secret'     => $atoken2, ));

    $cursor = '-1';
    $ids = array();
    $cursor_archieve = array();
    while(true):
        $code=$tmhOAuth->request('GET', $tmhOAuth->url('1/followers/ids'),
                array('screen_name' => $user, 'cursor' => $cursor));

        if ($code == 200) {
            $responseData = json_decode($tmhOAuth->response['response'],true);
            $ids = array_merge($ids, $responseData['ids']);
            $cursor = $responseData['next_cursor_str'];
                    $cursor_archieve[] = $cursor;
        } else {
            return 0;
        }
        if ( $cursor == '0' || count($ids) >= 29000 ) {
            break;
        }
    endwhile;

    return $ids;
} 
```

edit2：我应该使用“array_unique”来删除重复的 id，还是如果 previous_cursor=next cursor 或任何其他选项不使用下一个光标？在每种情况下，用户都有 5500-6500 个关注者。所以如果我只拿一个光标，我只能获得前 5000 个关注者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:08:19.290

原因是我的代码中存在程序错误。我在一周的调试会话后修复了它

# vba - VBA 使自定义函数的命名范围参数同时引用单个单元格和一系列单元格

> ID：11728482
> 
> 赞同：1
> 
> 时间：2012-07-30T19:44:27.030
> 
> 标签：vba, excel, excel-formula

percentrank 函数可以为其两个参数采用相同的命名范围，例如：

```
=percentrank(inputrange,inputrange) 
```

它将第一个参数视为用于计算截断百分比的单元格范围，并使用第二个参数返回单个单元格的值以在截断值中排名。单个单元格由输入/调用函数的行确定。

我想重新创建此功能并使用第二个范围引用来查找单个单元格值（基于输入函数的行）。这是我所拥有的：

```
Public Function QUARTILE_RANK(DataRange As Range, RefCell As Range)

If RefCell <> vbNullString Then

    q1 = Application.WorksheetFunction.Quartile(DataRange, 1)
    q2 = Application.WorksheetFunction.Quartile(DataRange, 2)
    q3 = Application.WorksheetFunction.Quartile(DataRange, 3)
    q4 = Application.WorksheetFunction.Quartile(DataRange, 4)

    If (RefCell <= q1) Then QUARTILE_RANK = 1
    If (RefCell > q1) And (RefCell <= q2) Then QUARTILE_RANK = 2
    If (RefCell > q2) And (RefCell <= q3) Then QUARTILE_RANK = 3
    If (RefCell > q3) Then QUARTILE_RANK = 4
Else
    QUARTILE_RANK = vbNullString
End If

End Function 
```

如果我为两个参数传递相同的命名范围，它会将两个范围视为单元格数组。我希望它以这种方式处理第一个参数，但使用第二个参数找到一个单元格值。也就是说，我希望它反映 PERCENTRANK 函数的功能。

编辑：

Sean Chesire 的意见帮助我让它发挥作用。我欢迎任何改进建议，因为我确信其他人已经编写了相同的功能。

这是最终形式：

```
Public Function QUARTILE_RANK(DataRange As Range, RefRange As Range)

Dim refCell As Range

If RefRange.Rows.Count > 1 Then
    Set refCell = RefRange.Cells(Application.Caller.Row, 1)
Else
    Set refCell = RefRange ' maybe they only passed a cell reference
End If

If refCell <> vbNullString Then

    q1 = Application.WorksheetFunction.Quartile(DataRange, 1)
    q2 = Application.WorksheetFunction.Quartile(DataRange, 2)
    q3 = Application.WorksheetFunction.Quartile(DataRange, 3)
    q4 = Application.WorksheetFunction.Quartile(DataRange, 4)

    If (refCell <= q1) Then QUARTILE_RANK = 1
    If (refCell > q1) And (refCell <= q2) Then QUARTILE_RANK = 2
    If (refCell > q2) And (refCell <= q3) Then QUARTILE_RANK = 3
    If (refCell > q3) Then QUARTILE_RANK = 4
Else
    QUARTILE_RANK = vbNullString
End If

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:56:15.597

`=LOOKUP(PERCENTRANK(vals,vals),{0,0.25,0.5,0.75},{1,2,3,4})`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:55:55.237

这将告诉您从哪个单元格调用公式：

```
Function testit() As String
testit = Application.Caller.Parent.Parent.Name & " " & Application.Caller.Parent.Name & " " & Application.Caller.Address
End Function 
```

然后，您应该能够测试给定的范围，并确定应该在另一个数组中引用哪个值

# oracle-apex - 我有 6 个相关的表。我想在一页上显示所有这些表格的信息

> ID：11728483
> 
> 赞同：1
> 
> 时间：2012-07-30T19:44:28.557
> 
> 标签：oracle-apex

```
Table 1 : Company Information 
Table 2 : Financial 
Table 3 : Media 
Table 4 : SWOT Analysis 
Table 5 : Events 
Table 6 : Interests 
```

我想创建**一个页面**来显示 Oracle Application Express 中的所有这些表。

但是，我不希望显示所有数据行。我只想在选择特定公司时查看相关数据。

例如，选择 Ansa Mcal（然后将显示与 ANSA Mcal 相关的表格中的所有信息）选择 Nedcom（然后将显示与 Nedcom 相关的表格中的所有信息）。

谢谢您的帮助。请尽可能详细，因为我是 APEX 的初学者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:19:17.160

第一步是新建一个名为 ABC 的空白页面。第二步是单击编辑，在同一页面中分别添加 6 个区域与您的表的名称。

为您的每个表创建报告，同时选择要显示的所需表的区域，即如果您想显示财务表的信息，那么您必须为该表选择财务区域。

问候，

# magento - 在 Magento 页脚（类别列表）中制作第三列

> ID：11728490
> 
> 赞同：0
> 
> 时间：2012-07-30T19:45:16.700
> 
> 标签：magento, magento-1.6

我的页脚中显示了一个子类别列表。目前该列表分为 2 列，但我希望它分为 3 列。

这是我目前正在使用的代码；

```
<li class='shop_online'>        
    <?php
            #########################################
            $temparray = array();
            $_helper = Mage::helper('catalog/category');
            $_categories = $_helper->getStoreCategories();
            $currentCategory = Mage::registry('current_category');
            if (count($_categories) > 0): 
                foreach($_categories as $_category):

                        $temparray[] = "<a href='".$_helper->getCategoryUrl($_category)."'>".$_category->getName()."</a>";
                    /*
                        $_category = Mage::getModel('catalog/category')->load($_category->getId());
                        $_subcategories = $_category->getChildrenCategories();
                    if (count($_subcategories) > 0):

                        foreach($_subcategories as $_subcategory):
                                $temparray[] = "<a href='".$_helper->getCategoryUrl($_subcategory)."'>".$_subcategory->getName()."</a>";

                                $_subsubcategory = Mage::getModel('catalog/category')->load($_subcategory->getId());
                                $_subsubcategories = $_subsubcategory->getChildrenCategories();
                                if (count($_subsubcategories) > 0):

                                    foreach($_subsubcategories as $_subsubcategory):        
                                        $temparray[] = "<a href='".$_helper->getCategoryUrl($_subsubcategory)."'>".$_subsubcategory->getName()."</a>";                                        
                                    endforeach;                                  
                                endif;                               
                        endforeach;                          
                    endif; 
                  */
                endforeach;

            endif;

    echo "<ul class='footer_links_list'>";
            if(count($temparray) > 0)
            {
                echo '<h3><a href="'.Mage::getBaseUrl().'shop-online'.'">SHOP ONLINE</a></h3>';
                for( $i=0; $i<count($temparray); $i++ )
                {
                    if(($i+1)%1==0 || ($i+1)%1==0)
                    echo "<li>".$temparray[$i]."</li>";
                }
            }
    echo "</ul>";
            #########################################
            ?>
  </li> 
```

我不知道如何将其分解为第三列以显示在页脚中。

formagdev1.com 是我正在开发的开发站点。

有任何想法吗？

谢谢，比尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:59:54.857

只需在第 1808 行的 styles.css 中将以下类的宽度更改为 33%（原始 50%），您就可以开始使用了。

`ul.footer_links_list li`

干杯!

# c# - 将数组添加到 web.config 中的键

> ID：11728491
> 
> 赞同：31
> 
> 时间：2012-07-30T19:45:32.673
> 
> 标签：c#, arrays, web-config

我想知道是否可以将数组作为键中的值...示例

```
<add key="email" value="emails["email1@email.com, email2@email.com"] /> 
```

这种语法会起作用吗？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-07-30T19:46:53.627

`ConfigurationManager.AppSettings`您只能检索标量值。对于您的示例，如果您用分号分隔电子邮件，您可以执行以下操作：

```
string[] emails = ConfigurationManager.AppSettings["email"].Split(';'); 
```

使用 web.config

```
<add key="email" value="email1@email.com;email2@email.com" /> 
```

# c# - System.LINQ.Dynamic: Select(“new classname (...)”) into a List （或任何其他可枚举的集合 )

> ID：11728492
> 
> 赞同：6
> 
> 时间：2012-07-30T19:45:36.690
> 
> 标签：c#, linq, select

[我想要什么](https://stackoverflow.com/questions/1465700/system-linq-dynamic-select-new-into-a-listt-or-any-other-enumerabl/1468357#1468357 "我想要的，但有自定义类")，而不是做什么

`var carsPartial = cars.Select("new(name, year)").ToList();`

我想做这个：

```
var carsPartial = cars.Select<car>("new car(name, year)").ToList<car>(); 
```

再次感谢并在需要时要求澄清。

车类：

```
 public class car
{
    public string name { get; set; }
    public int year { get; set; }
} 
```

汽车里有什么：一堆带有名称和年份的汽车数据，有点像数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:04:36.840

你知道编译时 Select 的通用部分吗？在您的示例中，是已知的，还是“动态的”？如果它是已知的，那么你应该能够做到（没有测试它）：

```
var carsPartial = cars.Select("new car(name, year)").Cast<car>().ToList(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-30T21:40:13.507

使用 LINQ 和类似的东西：

```
var carsPartial = (from c in cars
  select new car {
    name = c.name,
    year = c.year
    }).ToList(); 
```

没有完全测试...

# c# - 如果不为空，则 C# 解析值

> ID：11728498
> 
> 赞同：3
> 
> 时间：2012-07-30T19:46:08.387
> 
> 标签：c#, parsing, null

这不是一个真正的问题，如果这是一个愚蠢的问题，我很抱歉，但这只是我很好奇的事情。假设如果字符串不为空，我想将字符串参数解析为整数，否则将整数设置为-1。有没有更好的方法来写这个语句：

```
int id = context.Request["Id"] == null ? -1 : int.Parse(context.Request["Id"]); 
```

必须评估字符串以查看它是否为空，然后再次评估它以解析它，这似乎很麻烦。现在我想了想，这已经提出了对象并在它不为空时访问对象属性。所以像：

```
int id = person == null ? -1 : person.id; 
```

这是公认的做法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-30T19:47:13.547

对于您的第一个示例，您可以使用[空合并运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx)：

```
int id = int.Parse(context.Request["Id"] ?? "-1"); 
```

如果存在[null 安全解除引用运算符](https://stackoverflow.com/questions/4244225/c-sharp-if-null-then-null-expression)，则可以改进第二个示例， 但由于它在 C# 中不存在，因此您的方法很好：

```
int id = person == null ? -1 : person.Id; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T19:54:35.017

您没有说明`int.Parse()`非空值是否有可能失败，但如果您不确定非空输入字符串将始终是一个`int`值，您也可以使用以下`TryParse()`方法：

```
int id;
if (!int.TryParse(context.Request["Id"], out id)
    id = -1; 
```

如果`context.Request["Id"]`为 null 或无法解析为 ，则不会引发异常`int`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T19:51:30.253

就个人而言，我会发表以下两个声明：

```
string tmp = context.Request["Id"];
int id = String.IsNullOrWhitespace(tmp) ? -1 : int.Parse(tmp); 
```

这无需任何额外的解析即可处理此问题。在一行中执行此操作将需要额外查找上下文（您试图避免）或额外的解析。

# php - 让 Gmail 自动显示我嵌入 HTML 电子邮件的图像？

> ID：11728504
> 
> 赞同：5
> 
> 时间：2012-07-30T19:46:19.307
> 
> 标签：php, html, email, gmail

我正在使用 Zend_Mail 在 PHP 中构建 HTML 电子邮件，我想嵌入/附加/任何一些图像，这样 Gmail 会自动显示它们而不提示用户。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T07:00:32.983

Google 的[批量发件人指南](https://support.google.com/mail/bin/answer.py?hl=en&answer=81126)说，Gmail 会自动为已验证其域的发件人显示图像：

> 为确保 Gmail 可以识别您的身份：
> 
> *   使用一致的 IP 地址发送批量邮件。
> *   为您发送邮件的 IP 地址保留有效的反向 DNS 记录，并指向您的域。
> *   在您发送的每封批量邮件的“发件人：”标题中使用相同的地址。
> 
> 我们还建议发布 SPF 记录，并使用 DKIM 或 DomainKeys 进行签名。
> 
> **通过身份验证，您发送的内嵌图像将自动显示。收件人无需单击“在下方显示图像”链接。**

Google 提供了一个页面来了解有关[电子邮件身份验证](http://mail.google.com/support/bin/answer.py?hl=en&answer=180707)的更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T19:48:00.210

[你不能没有用户批准你的图像。](http://support.google.com/mail/bin/answer.py?hl=en&answer=145919)这是一种反垃圾邮件/反跟踪技术，默认情况下必须关闭才能工作。

您可以让 Gmail 显示图像（嵌入到内容中）并发送验证电子邮件。您只需确保您有正确的 SPF 记录，并且 1024 位 DKIM 对消息进行了签名。然后 gmail 在内容中显示嵌入的图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T19:48:20.693

据我所知，这是不可能的。Gmaill 最初会隐藏图像。如果使用启用（通过单击“ `Always display images from XXXXXX website`”），那么它将从下次开始可用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-28T21:09:49.480

如果您使用 Base 64，则始终可以显示图像。这样，图像作为代码嵌入到代码中，而不来自其他任何人的服务器，因此没有跟踪风险。只需谷歌如何将图像嵌入为 Base 64 即可完全解决您的问题。

# reporting-services - 如何在 Visual Studio 2005 中使用 SQL 报告服务重新定位行

> ID：11728505
> 
> 赞同：0
> 
> 时间：2012-07-30T19:46:27.383
> 
> 标签：reporting-services, visual-studio-2005

在处理报告方面，我几乎是个菜鸟，所以这可能有一个简单的答案。

当我尝试将新组插入表格时，它总是将其插入顶部，我不知道如何将其插入底行下方。我已经尝试了一切，包括编辑原始 XML。这是我目前拥有的图像：

![[桌子图片](http://imgur.com/sAAfn)](../Images/ed56504ada61ae948e45618c30712a87.png)

我正在寻找的理想结果是旁边带有“2”的行位于带有“订单类型”和“数量”列的标签行下方。关于我应该如何做到这一点的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:42:22.937

我想到了。最后一行实际上被标记为页脚，所以所有内容都被插入到上面。

# python - python函数返回函数

> ID：11728511
> 
> 赞同：1
> 
> 时间：2012-07-30T19:46:57.010
> 
> 标签：python, function, functional-programming

我知道 中的`partial`函数`functools`，但是在一般的 Python 程序（不是：Haskell、Erlang、Clojure 等）中编写函数以在 Python 中返回函数有多常见？

例如：

```
>>> def returnfunk(xs):
...     return lambda x: list(filter(lambda y: x == y, xs))
... 
>>> fn = returnfunk(["cat", "dog", "horse"])
>>> 
>>> (fn("cow") == []) == True
True
>>> (fn("cat") == ['cat']) == True
True
>>> 
>>> list(filter(fn, ["zebra", "elephant", "dog", "parrot", "cat"]))
['dog', 'cat'] 
```

它是为了`real (python) world`爱好，学术，兴趣而设计的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T19:49:58.283

装饰器`@classmethod`和`@staticmethod`是两个例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:51:57.900

它们非常有用。函数式编程一直都在使用这种东西，它可以极大地简化任务，例如`filter`您在上面使用的方式（尽管有更简单的方法可以完成您在其中尝试做的事情）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T19:53:42.630

它是为了灵活性。函数返回函数可以做很多事情，比如柯里化、组合和装饰。当然，它允许您玩弄闭包，这为您提供了极大的编码灵活性。您是否需要它很大程度上取决于您的应用程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T19:50:17.230

它在现实世界中非常常用。我首先想到的是具有可插拔接口的 API。大多数通过实现函数注册表然后在该注册表中进行查找来操作。

# c# - 在相等测试中使用字符串文字会创建新字符串吗？

> ID：11728517
> 
> 赞同：2
> 
> 时间：2012-07-30T19:47:24.867
> 
> 标签：c#, .net

每次调用该方法并将其评估为 true 时，以下代码是否会创建 3 个新字符串，或者编译是否足够聪明，可以将右侧的字符串编译为常量？

```
if (somestring == "Test" || someString == "Test1")
{
   ...
   NotifyPropertyChanged("Name");
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T19:50:08.160

它们是文字，这意味着它们加载了`ldstr`操作码，即

```
ldstr "Test1" 
```

这样做的影响是：任何经过的东西`ldstr`都会**自动被实习**，所以，你可以这样做：

```
string x = "abc";
string y = "abc";
bool sameInstance = ReferenceEquals(x,y); // true 
```

所以：是的，第一次使用该方法时，文字`"Test"`,`"Test1"`和`"Name"`可能会被创建，但**只能创建一次**。之后，使用相同的现有字符串实例。这是通过以下方式保证的[`ldstr`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.ldstr.aspx)：

> 公共语言基础结构 (CLI) 保证引用两个具有相同字符序列的元数据标记的 ldstr 指令的结果返回完全相同的字符串对象（称为“字符串实习”的过程）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-30T19:49:59.343

它将实习字符串。

> 公共语言运行时通过维护一个称为实习池的表来保存字符串存储，该表包含对程序中以编程方式声明或创建的每个唯一文字字符串的单个引用。因此，具有特定值的文字字符串的实例在系统中仅存在一次

[http://msdn.microsoft.com/en-us/library/system.string.intern.aspx](http://msdn.microsoft.com/en-us/library/system.string.intern.aspx)

[http://broadcast.oreilly.com/2010/08/understanding-c-stringintern-m.html](http://broadcast.oreilly.com/2010/08/understanding-c-stringintern-m.html)

# php - 您可以在禁用 XML-RPC 的情况下使用 cURL 发布到 Wordpress 吗？

> ID：11728520
> 
> 赞同：1
> 
> 时间：2012-07-30T19:47:32.733
> 
> 标签：php, wordpress, curl, xml-rpc

我有一堆 Wordpress 博客，出于安全原因，我想关闭所有这些博客上的 XML-RPC。问题是当我这样做时，我不能再使用我的自定义 WP 管理应用程序了。有没有其他方法可以使用 PHP 登录并发布到 Wordpress？cURL 或任何其他选项？有人试过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:00:03.423

如果您使用 cURL 或任何其他解决方案，最终与使用内置 XML-RPC 解决方案相同。因此，如果出于安全原因禁用 XML-RPC，那么任何其他解决方案都会给您带来相同的*风险*。

您可以限制 XML-RPC 仅接受来自特定主机/IP 的请求。可能从`localhost`然后通过 SSH 或 VPN 隧道到您的服务器以通过安全连接发布。

# c# - 无法从 NHibernate.Driver.OracleDataClientDriver 创建驱动程序（将本地复制设置为 true）

> ID：11728521
> 
> 赞同：3
> 
> 时间：2012-07-30T19:47:34.583
> 
> 标签：c#, .net, oracle, nhibernate

我什至在 app.config 中添加了一小段配置：

```
<qualifyAssembly partialName="Oracle.DataAccess"
             fullName="Oracle.DataAccess,
                            Version=2.112.2.0,
                           Culture=neutral,
                           PublicKeyToken=89b483f429c47342" />
    </assemblyBinding> 
```

...没有成功。有什么问题？另外，为了确保我的 app.config 是风水，这里是：

```
<?xml version="1.0"?>
<configuration>
  <configSections>
    <section name="hibernate-configuration"
    type="NHibernate.Cfg.ConfigurationSectionHandler, NHibernate"/>
  </configSections>
  <hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
    <session-factory>
      <property name="show_sql">true</property>
      <property name="dialect">NHibernate.Dialect.Oracle10gDialect</property>
      <property name="connection.driver_class">
        NHibernate.Driver.OracleDataClientDriver
      </property>
      <property name="connection.connection_string_name">
        GuitarStore2
      </property>
      <property name="connection.provider">
        NHibernate.Connection.DriverConnectionProvider
      </property>
    </session-factory>
  </hibernate-configuration>
  <connectionStrings>
    <add name="GuitarStore"
    connectionString="****************"/>
  <add name="GuitarStore2"
    connectionString="****************"/>
  </connectionStrings>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <qualifyAssembly partialName="Oracle.DataAccess"
             fullName="Oracle.DataAccess,
                            Version=2.112.2.0,
                           Culture=neutral,
                           PublicKeyToken=89b483f429c47342" />
    </assemblyBinding>
  </runtime>
</configuration> 
```

作为记录，我在 Windows 7 64 位下使用 .NET 3.5 上的最新 Nhibernate (3.3.1)。而且，对于完全相同的项目，我在另一台机器上没有遇到任何异常，但使用的是 Windows XP。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T20:02:25.707

问题不在于 NHibernate，而是 IL 在使用 32 位版本的 ODP 时生成 64 位代码这一事实，因此只需将“任何 CPU”选项更改为“x86”，我就摆脱了异常。

# perl - 在 perl 中以 0.1 秒的精度在准确的时间运行子程序

> ID：11728525
> 
> 赞同：3
> 
> 时间：2012-07-30T19:47:50.647
> 
> 标签：perl

需要每 5 秒运行一次子程序，但在系统时钟标记处测量。因此，需要每分钟在 0、5、10、15.... 45、50、55 秒（准确地说，以 0.1 秒的精度）**启动它。**

就像是：

```
for(;;) {
    do_sleep(); #time need to sleep to the next 5 second mark
    run_this();
} 
```

`run_this`潜艇可以快也可以慢（它的运行时间在 0.2 - 120 秒之间）。当它运行超过 5 秒时 - 无论它的运行时间如何，下一次运行都必须在准确的 5 秒标记处。

例如，当`run_this`

*   结束于 11:11:12.3 需要等待 2.7 秒才能在 11:11:15 进行下一次运行
*   当在 11:11:59.2 结束时只需要等待 0.8 秒到下一个在 11:12:00，依此类推...

问题是：如何写do_sleep？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T19:52:51.610

对于 0.1s 精度，您需要使用 Time::HiRes 模块。就像是：

```
#!/usr/bin/perl
use 5.014;
use warnings;
use Time::HiRes qw(tv_interval usleep gettimeofday);

for(;;) {
    do_sleep();
    run_this();
}

sub do_sleep {
    my $t = [gettimeofday];
    my $next = (int($t->[0]/5) + 1) * 5;
    my $delta = tv_interval ($t, [$next, 0]);
    usleep($delta * 1_000_000);
    return;
}

sub run_this {
    my $t = [gettimeofday];
    printf "Start is at: %s.%s\n",
        scalar localtime  $t->[0],
        $t->[1];
    usleep( rand 10_000_000 );  #simulating the runtime between 0-10 seconds (in microseconds)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T14:08:29.757

一个非常不同的方法是为此使用[IO::Async](http://search.cpan.org/dist/IO-Async/lib/IO/Async/Timer/Absolute.pm)。您可以在未来的特定时间安排活动。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T20:46:21.000

如果您有信号处理程序，这个也可以工作。它还处理闰秒。

```
use Time::HiRes qw( );

sub uninterruptible_sleep_until {
   my ($until) = @_;
   for (;;) {
      my $length = $until - Time::HiRes::time();
      last if $length <= 0;
      Time::HiRes::sleep($length);
   }
}

sub find_next_start {
   my $time = int(time());
   for (;;) {
      ++$time;
      my $secs = (localtime($time))[0];
      last if $secs % 5 == 0 && $secs != 60;
   }
   return $time;
}

uninterruptible_sleep_until(find_next_start()); 
```

请注意，系统可能不会在您需要时提供时间片，因此您实际上可能比请求的时间晚开始。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T19:52:41.440

您可以使用 Time::HiRes 并计算以这种方式等待多长时间：

```
use Time::HiRes;
my $t = time();
my $nextCallTime = int($t) / 5 * 5 + 5;
my $timeToWait = $nextCallTime - $t;
sleep($timeToWait); 
```

我没有测试代码，当调用恰好在 5 秒边界结束时可能存在一些边界条件。但我认为它给出了正确的想法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-30T19:50:58.837

使用 Time::HiRes 中的高精度计时器对循环计时

[http://perldoc.perl.org/Time/HiRes.html](http://perldoc.perl.org/Time/HiRes.html)

将您长期运行的作业放入后台进程

```
my $pid = fork;
die "fork failed" unless defined $pid;
if ($pid == 0) {
    # child process goes here
    run_this();
    exit;
}
# parent process continues here 
```

另请参阅 [在 Perl 中启动非等待后台进程](https://stackoverflow.com/questions/4431570/initiating-non-waiting-background-process-in-perl)

# django - 我的视图如何返回响应并行执行某些功能

> ID：11728530
> 
> 赞同：-1
> 
> 时间：2012-07-30T19:47:59.150
> 
> 标签：django, django-celery

视图.py

```
from registration.models import Registration
from django.core.context_processors import csrf
from registration import tasks
from django.shortcuts import render_to_response
def validate(request):
    state="notvalid"
    if request.method == 'POST':# If the form has been submitted...
        form = Registration(request.POST) # A form bound to the POST data
        state="notvalid"
        if form.is_valid(): 
            username = form.cleaned_data['username']
            first_name = form.cleaned_data['first_name']
            last_name = form.cleaned_data['last_name']
            email = form.cleaned_data['email']
            password = form.cleaned_data['password']
            from django.contrib.auth.models import User
            user = User.objects.create_user(username,email,password)
            user.first_name=first_name
            user.last_name=last_name        
            user.save() 
            state="added data"
        tasks.mail()
    else:
        form = Registration() # An unbound form

    return render_to_response('auth1.html', {
        'form': form,'state':state,
    }) 
```

任务.py

```
from celery import task
import celery

@celery.task()
def mail():
    from django.core.mail import send_mail
    for x in range(10000000):
        print x
    return True 
```

该任务必须在不影响视图响应时间的情况下并行执行。即在后台它必须运行邮件功能

但是在数据库添加它之后返回render_to_response

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T20:02:36.513

您触发`mail`任务的调用应该是：

```
tasks.mail.delay() 
```

如果没有`delay()`，任务将在与视图相同的进程中运行，而不是在 Celery worker 中，因此视图函数将阻塞直到`mail`完成。

有关更多信息，请参阅[http://docs.celeryproject.org/en/latest/django/first-steps-with-django.html#calling-our-task](http://docs.celeryproject.org/en/latest/django/first-steps-with-django.html#calling-our-task)。

# soundcloud - SoundCloud API：附件_uri 的文档？

> ID：11728531
> 
> 赞同：0
> 
> 时间：2012-07-30T19:48:04.100
> 
> 标签：soundcloud

SoundCloud API /tracks 文档 (http://developers.soundcloud.com/docs/api/reference#tracks) 中的示例轨道有一个字段“attachments_uri”，但我在文档中没有看到任何关于它的内容。有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:38:28.573

该`attachments_uri`字段被我们实际弃用的一些未记录的功能使用。它的存在是为了向后兼容一些较旧的应用程序。

简短的回答：你可以放心地忽略它:-)

# r - ROAuth握手

> ID：11728535
> 
> 赞同：1
> 
> 时间：2012-07-30T19:48:16.963
> 
> 标签：r, twitter, oauth, handshake, rcurl

我一直在尝试使用以下脚本通过 ROAuth 进行身份验证：

```
 library("ROAuth")
    library("RCurl")

requestURL <- "https://api.twitter.com/oauth/request_token"
accessURL = "https://api.twitter.com/oauth/access_token"
authURL = "https://api.twitter.com/oauth/authorize"

cKey<- "Key"
cSecret<- "Secret"

Cred <- OAuthFactory$new(consumerKey=cKey,
            consumerSecret=cSecret,
            requestURL=requestURL,
            accessURL=accessURL,
            authURL=authURL)

Cred$handshake(cainfo = system.file("CurlSSL", "cacert.pem", package = "RCurl")) 
```

每次输入此代码时，我都会收到错误消息：

```
Error in Cred$handshake(cainfo = system.file("CurlSSL", "cacert.pem",  : Invalid response from site, please check your consumerKey and consumerSecret and try again. 
```

我不确定我做错了什么。通过重新安装 ROauth 和 RCurl 并检查它们的版本信息（ROAuth 0.9.1 和 RCurl_1.91-1.1(?) ），我确保每个必要的包都是最新的。安装后，我重新启动了 R（作为另一篇文章建议的可能解决方案）。我复制粘贴并仔细检查了消费者密钥和消费者秘密，我确信它们是正确的。有没有人有任何其他想法？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T23:07:09.960

显然 ROauth 中的握手方法已损坏，但已修复。您发布的错误消息（与我现在收到的相同）与以下链接中引用的错误消息相同：

[http://lists.hexdump.org/pipermail/twitter-users-hexdump.org/2012-February/000059.html](http://lists.hexdump.org/pipermail/twitter-users-hexdump.org/2012-February/000059.html)

我猜还有一个问题，所以我会看看我是否能找到其他任何东西......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:17:33.333

我对 RCurl/ROAuth 无能为力——但你可以试试这个包 ‛httr‛ [https://github.com/hadley/httr/](https://github.com/hadley/httr/)。它带有一个演示如何访问 Twitter。

# sql - 协调相似的标识符以使其成为 SQL Server 2008 的主键

> ID：11728537
> 
> 赞同：0
> 
> 时间：2012-07-30T19:48:20.427
> 
> 标签：sql, sql-server, tsql

有关示例数据，请参阅下面的屏幕截图。规范化这些数据我发现这些相似的代码就我的数据而言意味着相同的事情。我正在尝试更新我的表格，以便`primarycode`将右侧的 s 更新为左侧的

![在此处输入图像描述](../Images/e46ddc8c2fef530c60dd96c255e1a830.png)

我用来查找这些值的查询：

```
select  *
from icd
inner join icd as i2 on i2.primarycodetext=icd.primarycodetext
and i2.primarycode <> icd.primarycode
where icd.primarycode like '%0' 
```

我试过的更新查询。

```
update icd
set icd.primarycode=i2.primarycode
from 
(

select  *
from icd
inner join icd as i2 on i2.primarycodetext=icd.primarycodetext
and i2.primarycode <> icd.primarycode
where icd.primarycode like '%0'
)t 
```

收到的错误：`Msg 8156, Level 16, State 1, Line 12 The column 'primarycode' was specified multiple times for 't'.` 编辑：此表中仅有的两列是 primarycode 和 primarycodetext

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:03:10.713

好的，对于您的问题，您应该执行以下操作：

```
UPDATE I1
SET I1.primarycode = I2.primarycode
FROM icd AS I1
INNER JOIN icd AS I2 
ON i2.primarycodetext = i1.primarycodetext
AND i2.primarycode <> I1.primarycode
WHERE I1.primarycode LIKE '%0' 
```

但是这样做之后你的桌子上会有重复的。考虑一下您真正想要获得的内容（这些值的唯一记录），那么您应该使用`DELETE`这些记录而不是更新它们：

```
DELETE I1
FROM icd AS I1
INNER JOIN icd AS I2 
ON i2.primarycodetext = i1.primarycodetext
AND i2.primarycode <> I1.primarycode
WHERE I1.primarycode LIKE '%0' 
```

# sql-server - 雪花模式：具有子维度外键的事实表？

> ID：11728539
> 
> 赞同：3
> 
> 时间：2012-07-30T19:48:29.407
> 
> 标签：sql-server, database-design, ssas, data-modeling, data-warehouse

使用来自维基百科的雪花模式图像：

[http://en.wikipedia.org/wiki/File:Snowflake-schema-example.png](http://en.wikipedia.org/wiki/File:Snowflake-schema-example.png)

像在 Dim_Product 中那样在 Fact_Sales 中使用“Brand_Id”外键是否有意义？销售/品牌之间存在多对一的关系，就像销售/产品或产品/品牌一样，那么有什么合乎逻辑的理由不这样做吗？您可能希望直接加入 Dim_Brand 表。

我可能没有看到明显的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:02:17.343

您正在查看的关系类型是[有](http://en.wikipedia.org/wiki/Has-a)关系。

一个产品有一个品牌。销售有产品；这是卖掉的东西。但是销售没有品牌。或者，更好的说法是，您不能出售品牌。（不要读得太深……）

所以，不，你不想在销售中增加品牌。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T15:19:37.980

如果您在维度模型中工作（您的问题中的星形/雪花模式注释使您认为您是），那么从绩效的角度来看，将 BRAND_ID 添加到销售事实是有意义的，如果企业试图回答的问题是“在此时间范围内，品牌 X 在所有产品中的销售额是多少”。

如果产品维度是 1 类 SCD，并且产品更改品牌，它也可能有用。您可能希望将之前的销售保留为“旧”品牌。

请记住，当您构建星形/雪花报告模式时，您*不是在进行实体关系建模。*is-a 或 has-a 的问题与维度模型无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T19:54:59.077

我认为这将是一种很好的缓存数据的方式......但老实说，你可能最好只依赖链接。

原因是您已经对该表的功能（商店销售）进行了定义。加上商店销售的这些产品是什么品牌，会混淆该表的“主题”或“主题”，记录商店的销售额。

现在，如果您通过某种方式拥有可以以不同品牌销售的产品（如果我知道一个包装如何具有分裂的个性......）那么是的，这在一定程度上是有道理的，但更合理的解决方案是然后给每个产品它自己的SKU代码。

# sql - 在时间子句等于的地方选择多个值

> ID：11728541
> 
> 赞同：0
> 
> 时间：2012-07-30T19:48:43.327
> 
> 标签：sql, sql-server, sql-server-2005, where-clause

我的表如下所示：

表 1：注意：这个表实际上非常大，有更多的列（20ish）和行（以百万计）

```
 |  Time      |  tmp   |  productionID  |
 |  10:00:00  |   2.2  |    5           |
 |  10:00:05  |   5.2  |    5           |
 |  10:00:11  |   7.4  |    5           |
 |  ......    |   3.2  |    5           |
 |  10:10:02  |   4.5  |    5           | 
```

注意：时间是一个 varchar，所以我假设我需要做这样的事情：

```
 CONVERT(VARCHAR(8), DATEADD(mi, 10, time), 114) 
```

我需要做的是：

```
 select time, tmp 
 from mytable
 where productionid = somevalue 
 and time = first_time_stamp associated to some productionID(ie. 10:00:00 table above)
     time = 10 minutes after the first_time_stamp with some productionID
     time = 20 minutes after the first_time_stamp with some productionID
     ...25, 30, 40, 60, 120, 180 minutes 
```

我希望这是有道理的。我不确定这样做的正确方法是什么。我的意思是我想到了以下过程：-选择第一个时间戳（带有一些生产ID）-在那个时间上加10分钟，-加20分钟等等。然后使用数据透视表并使用连接链接到表1必须成为一个更简单的方法。

提前感谢您的专业知识。

预期样本输出：

```
 |  Time    | tmp
    | 10:00:00 | 2.2 
    | 10:10:02 | 4.5
    | 10:20:54 | 2.3 
    | 10:30:22 | 5.3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:54:00.670

如果您即时创建间隔表并将其与每个 ProductionID 的开始时间交叉连接，您可以从 MyTable 中提取属于同一类别的记录并选择仅检索第一个。

```
; with timeSlots (startSlot, endSlot) as (
  select 0, 10
  union all
  select 10, 20
  union all
  select 25, 30
  union all
  select 30, 40
  union all
  select 40, 60
  union all
  select 60, 120
  union all
  select 120, 180
),
startTimes (ProductionID, minTime) as (
  select ProductionID, min([Time])
    from MyTable
   group by ProductionID
),
groupedTime (ProductionID, [Time], [Tmp], groupOrder) as (
  select myTable.ProductionID,
         myTable.Time,
         myTable.Tmp,
         row_number () over (partition by myTable.productionid, timeSlots.startSlot
                           order by mytable.Time) groupOrder
    from startTimes
   cross join timeslots
   inner join myTable
      on startTimes.ProductionID = myTable.ProductionID
     and convert(varchar(8), dateadd(minute, timeSlots.startSlot, convert(datetime, startTimes.MinTime, 114)), 114) <= mytable.Time
     and convert(varchar(8), dateadd(minute, timeSlots.endSlot, convert(datetime, startTimes.MinTime, 114)), 114) > myTable.Time
)
select ProductionID, [Time], [Tmp]
  from groupedTime
 where groupOrder = 1 
```

[Sql Fiddle 在这里](http://sqlfiddle.com/#!3/8b6de/12)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:57:02.887

如果时间没有丢失序列，这将起作用。我的意思是，如果每个 10 分钟的增量都有时间值，那么这将起作用。

```
create table times([Time] time,tmp float,productionID int)
INSERT INTO times
VALUES('10:10:00',2.2,5),
      ('10:00:05',5.2,5),         
      ('10:00:11',7.4,5),
      ('10:00:18',3.2,5),         
      ('10:10:02',4.5,5),
      ('10:20:22',5.3,5)

select * from times

Declare @min_time time
select @min_time = MIN(time) from times

;WITH times1 as (select row_number() over (order by (select 0)) as id,time, tmp from times where productionID = 5)
,times2 as(
select id,time,tmp from times1 where time=@min_time 
union all
select t1.id,t1.time,t1.tmp from times2 t2 inner join times1 t1 on cast(t1.time as varchar(5))=cast(DATEADD(mi,10,t2.Time) as varchar(5)) --where t1.id-1=t2.id
)

,result as (select MAX(time) as time from times2
group by CAST(time as varchar(5)))

select distinct t2.Time,t2.tmp from times2 t2,Result r where t2.Time =r.time order by 1 
```

# c# - 尝试更新字典类型中的值时防止双重哈希操作

> ID：11728546
> 
> 赞同：1
> 
> 时间：2012-07-30T19:48:52.987
> 
> 标签：c#, data-structures, chemistry

我正在开发大量处理化学公式的科学研究软件。我使用内部来跟踪化学式的内容，`Dictionary<Isotope, int>`其中`Isotope`是“Carbon-13”，“Nitrogen-14”之类的对象，并且`int`表示化学式中这些同位素的数量。所以公式 C2H3NO 会像这样存在：

```
{"C12", 2
"H1", 3
"N14", 1
"O16", 1} 
```

这一切都很好，但是当我想将两个化学式相加时，我最终不得不计算`Isotope`两次的哈希函数来更新一个值，请参见下面的代码示例。

```
public class ChemicalFormula {
    internal Dictionary<Isotope, int> _isotopes = new Dictionary<Isotope, int>();

    public void Add(Isotope isotope, int count)
    {
        if (count != 0)
        {
            int curValue = 0;
            if (_isotopes.TryGetValue(isotope, out curValue))
            {
                int newValue = curValue + count;
                if (newValue == 0)
                {
                    _isotopes.Remove(isotope);
                }
                else
                {
                    _isotopes[isotope] = newValue;
                }
            }
            else
            {
                _isotopes.Add(isotope, count);
            }
            _isDirty = true;
        }
    }
} 
```

虽然这看起来不会慢下来，但当我们将数十亿个化学式添加在一起时，这种方法始终是程序中最慢的部分（> 45% 的运行时间）。我正在处理像“H5921C3759N1023O1201S21”这样的大型化学式，这些化学式一直被较小的化学式添加。

我的问题是，有没有更好的数据结构来存储这样的数据？我尝试创建一个`IsotopeCount`包含 a 的简单对象，`int`这样我就可以访问引用类型（而不是值类型）中的值以避免双重哈希函数。然而，这似乎并没有什么好处。

**EDIT** `Isotope`是不可变的，在程序的生命周期内不应更改，因此我应该能够缓存哈希码。

我已链接到[源代码](https://github.com/dbaileychess/CSMSL/tree/master/CSMSL)，因此您可以更深入地查看这些类，而不是我在这里复制和粘贴它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:00:08.917

您实际上是否需要按类型随机访问同位素计数，或者您是否使用字典作为将键与值关联的手段？

我猜是后者。

我对您的建议不是使用字典，而是使用 IsotopeTuples 的排序数组（或列表），例如：

```
class IsotopeTuple{
   Isotope i;
   int count;
} 
```

按同位素*名称排序。*

为什么要排序？

因为那时，当您想将两个同位素“添加”在一起时，您可以通过遍历两个阵列在线性时间内完成此操作（希望这很清楚，如果需要我可以详细说明）。不需要哈希计算，只需超快速的顺序比较。

在处理维度为单词的向量乘法时，这是一种经典的方法。广泛用于文本挖掘。

权衡当然是初始向量的构造是 (n)log(n)，但我怀疑你是否会感受到影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:51:42.710

> 我尝试创建一个包含 int 的简单 IsotopeCount 对象，这样我就可以访问引用类型（而不是值类型）中的值以避免双重哈希函数。然而，这似乎并没有什么好处。

那么它会停止双重哈希......但显然它在空间方面更糟。您注意到什么性能差异*？*

如果您经常这样做，您应该强烈考虑的另一个选项是在`Isotope`类中缓存哈希，假设它是不可变的。（如果不是，那么将其用作字典键至少有点令人担忧。）

如果您可能将大多数`Isotope`值用作字典键（或候选），那么可能值得在初始化期间计算散列。否则，选择一个特别不可能的哈希值（在理想的世界中，这将是任何值）并将其用作“未缓存”值，并懒惰地计算它。

如果你有 45% 的运行时间`GetHashCode`，你考虑过优化吗？是真的`GetHashCode`，还是`Equals`问题出在哪里？（您谈论“散列”，但我怀疑您的意思是“一般的散列查找”。）

如果您可以发布该`Isotope`类型的相关位，我们也许可以提供更多帮助。

编辑：如果您使用.NET 4 ，另一个要*考虑*`ConcurrentDictionary`的选择是, 及其[`AddOrUpdate`](http://msdn.microsoft.com/en-us/library/ee378664)方法。你会这样使用它：

```
public void Add(Isotope isotope, int count)
{
    // I prefer early exit to lots of nesting :)
    if (count == 0)
    {
        return 0;
    }

    int newCount = _isotopes.AddOrUpdate(isotope, count, 
                                         (key, oldCount) => oldCount + count);
    if (newCount == 0)
    {
        _isotopes.Remove(isotope);
    }
    _isDirty = true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T20:01:21.787

`Isotope`我赞同应该使用预先计算的哈希值使其不可变的观点。这将使一切变得简单得多。

（事实上​​，面向函数的编程更适合这种类型的计算，它处理不可变对象）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T20:14:24.410

如果您的同位素数量有限且没有内存问题，您可以想到的另一种解决方案：

```
public struct Formula
{
   public int C12;
   public int H1;
   public int N14;
   public int O16;
} 
```

我猜你正在研究有机化学，所以你可能不必处理那么多同位素，如果查找是问题，这个会很快......

# css - 是否可以制作具有凸右边框和凹左边框的div？

> ID：11728550
> 
> 赞同：4
> 
> 时间：2012-07-30T19:49:39.320
> 
> 标签：css

我正在尝试使用 a`div`和 CSS3 创建以下效果。为了实现右侧，我使用了border-radius 属性。有没有办法让左边的边框凹进去？![在此处输入图像描述](../Images/e4d5a9827655277e7ff66777170957f8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-27T23:57:40.600

你在寻找这样的东西[吗](http://jsfiddle.net/brentonstrine/HVqXw/)？

基本上插入第二个 div`:before`并给它一个与 div 后面的背景相同的背景颜色。这是简化的代码，JSFiddle 会尝试匹配图像的形状。

```
div { 
    width: 100px;
    height: 80px;
    background: green;
    border-radius: 0 45px 45px 0;
}
div:before {
    content:"";
    width: 45px;
    height: 80px;
    background: #fff;
    border-radius: 0 45px 45px 0;
    position: absolute;
} 
```

# jquery - 使用 jQuery 使 TR 可从 TR 内的锚点 a 中单击

> ID：11728551
> 
> 赞同：0
> 
> 时间：2012-07-30T19:49:41.683
> 
> 标签：jquery

我有一个看起来像这样的表：

```
<table id=reportTbl>
  <tbody>
    <tr>
      <td>
        <table id=list>
          <tbody>
            <tr>
              <td>
                <a title="View Report" onclick="viewReport(123);"><img src="../images/report/icon_pdf.gif" border="0"></a>
              </td>
              <td>Customer Orders</td>
              <td>USA</td>
              <td>Jul 20 2012 3:32PM</td>
            </tr>
            .....

          </tbody>
        </table>
      </td>
    </tr>
  </tbody>
</table> 
```

我想让表格中的整个表格行都`#list`可以点击。我想添加

```
$('#reportTbl #list a').each( function() {
  // I have other code in this section 
  // ....
  // end other section     

  $(this).closest('tr').click( function() { $(this).find('a[title="View Report"]').click(); });
}); 
```

但是当我单击该行时，我只是不断打开`#list`表格中所有链接的窗口。我尝试了一堆不同类型的 jQuery 调用，它们都做同样的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T19:51:37.477

```
$('#list').on('click', 'tr', function(e) {

    if ( e.target.tagName.toLowerCase() !== 'a' ) {

        $('a[title="View Report"]', this).click();
    }
});​ 
```

# c# - C# 中的运行时错误

> ID：11728552
> 
> 赞同：-2
> 
> 时间：2012-07-30T19:49:48.487
> 
> 标签：c#, async-await, async-ctp, c#-5.0

我已安装 Async-CTP-v3 以使用 C# 5 的新功能，但是当我尝试使用 async 关键字/等待表达式运行**控制台应用程序时，出现此错误：**

“不能直接启动具有类库输出类型的项目。

为了调试这个项目，将一个可执行项目添加到这个引用库项目的解决方案中。将可执行项目设置为启动项目。”

有没有人可以帮助我？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T20:01:15.907

您的项目的输出类型几乎可以肯定设置为**"Class Library"**。

您可以通过右键单击解决方案资源管理器中的项目并在上下文菜单中选择属性来更改项目的输出类型。您可以在此处从下拉菜单中选择输出类型。**将项目的输出类型从“类库”更改为“控制台应用程序”**

如果这不起作用，请仔细检查您的启动项目并确保它是您认为（并且应该是）的项目。

# c++ - 如何使智能指针在exit（）时超出范围

> ID：11728553
> 
> 赞同：1
> 
> 时间：2012-07-30T19:49:56.590
> 
> 标签：c++, visual-studio-express, visual-studio-2010

我花了一些时间编写应用程序进行练习，并且我喜欢在整个过程中使用智能指针，以避免在我忘记删除某些内容时发生内存泄漏。同时，我也喜欢使用异常来报告构造函数中的失败并尝试处理它。但是，当它不能时，我希望它通过调用 assert() 或 exit() 退出该位置的程序。但是，使用 msvc 中的 crtdbg 库时，它会报告来自智能指针的内存泄漏，该智能指针具有动态分配给它们的任何内容。这对我来说意味着两件事之一。1) 智能指针永远不会超出分配它们的范围，也永远不会释放，从而导致一些内存泄漏，或者 2) crtdbg 没有捕获释放，因为它没有在 main 处退出。页面虽然，使用 _CrtSetDbgFlag ( _CRTDBG_ALLOC_MEM_DF | _CRTDBG_LEAK_CHECK_DF ); 在程序开始时将捕获来自任何出口点的泄漏，​​我仍然使用它得到内存泄漏错误。

所以我向你们提出的问题是，内存实际上会在退出或断言时被释放吗？如果没有，我是否可以从 std::shared_ptr 派生并实现我自己的解决方案来编目动态分配的对象，以便在调用之前释放退出或断言，还是对于更简单的解决方案来说工作量太大？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T19:53:24.563

当程序退出时，内存无论如何都会被操作系统回收，所以如果泄漏让你担心，它不应该。

但是，如果您的析构函数中有逻辑，并且必须销毁对象 -`exit`显式调用会绕过所有释放。一种解决方法是抛出一个异常，您将调用 exit，将其捕获`main`并返回。

```
#include "stdlib.h"

void foo()
{
   //exit(0);
   throw killException();
}

int main
{
   try
   {
      foo();
   }
   catch (killException& ex)
   {
      //exit program calling destructors
      return EXIT_FAILURE;
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T19:58:33.987

真正的问题不在于内存，而在于其他资源。操作系统将（在大多数情况下，除非您正在运行嵌入式系统）在进程终止时从进程中恢复内存，因此内存不会在操作系统中*泄漏。*实际问题可能与您的流程外部的其他资源有关，这些资源可能需要在您的流程完成之前释放......

无论如何，您为什么更愿意`abort`或`exit`不愿让异常传播？一般来说，您应该只处理您想要管理的异常并让其他异常通过。虽然您可能无法从中恢复，但您的呼叫者实际上可能能够恢复。通过捕获异常并当场退出程序，您将删除用户的处理选择。

# c# - C# Google Maps Api - 使用 API 并了解 A 和 B 之间是否有路

> ID：11728558
> 
> 赞同：1
> 
> 时间：2012-07-30T19:50:01.223
> 
> 标签：c#, asp.net, google-maps

我正在尝试使用 Google Maps Api 编写寻路算法。

该项目是一个 ASP.Net Web 应用程序，我必须在 A 和 B 之间找到最短的路径，但我的工作不是谷歌地图。

我只需要问谷歌地图“嘿谷歌 X 和 Y 之间有直接的道路吗？” 然后需要布尔类型的简单答案。（X 和 Y 之间总是有一条路，所以谷歌地图可以告诉我道路/路径的距离，这对我来说也是可以接受的）。

我的另一个问题是“.Net 是否有任何库不需要使用 javascript 或至少在 .cs 文件上使用 javascript 字符串而不是在 aspx 文件中？”

提前感谢并原谅我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:59:42.497

要计算两点之间的路线，您需要[Google Directions API](https://developers.google.com/maps/documentation/directions/)。这将返回一个带有距离和其他详细信息的结果 json/xml。

> Google Directions API 是一项使用 HTTP 请求计算位置之间路线的服务。您可以搜索多种交通方式的路线，包括公交、驾车、步行或骑自行车。方向可以将起点、目的地和航路点指定为文本字符串（例如“Chicago, IL”或“Darwin, NT, Australia”）或纬度/经度坐标。Directions API 可以使用一系列航路点返回多部分方向

请求将类似于

```
http://maps.googleapis.com/maps/api/directions/json?origin=Boston,MA&destination=Concord,MA&waypoints=Charlestown,MA|Lexington,MA&sensor=false 
```

您可能想在代码项目中看到这篇文章：[Google Maps API V3 for ASP.NET](http://www.codeproject.com/Articles/291499/Google-Maps-API-V3-for-ASP-NET)

对于您问题的第二部分，我不确定您在问什么。无论 JavaScript 是什么，您都可以在 .Net 中使用上述 API

# php - 增加我的 PHP 脚本的上传限制

> ID：11728559
> 
> 赞同：1
> 
> 时间：2012-07-30T19:50:03.260
> 
> 标签：php, mysql

我有一个简单的 PHP 脚本。它用于将用户上传到 joomla 表中。基本上它将用户上传到 joomla 三个主要表中。

当 CSV 大约为 80MB 到 100MB 时，PHP 上传器 sript 可以正常工作。

当文件大小为 500MB 或以上时，它不起作用或没有任何反应。

如何使 PHP 脚本能够上传超过 500 MB 的 CSV 文件？

我是否真的更改了我的 PHP.ini 设置中的某些内容，或者我可以在脚本本身中添加其他内容。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T19:54:19.823

在 .htcaccess 文件中添加以下内容：

```
php_value upload_max_filesize 500M
php_value post_max_size 500M 
```

在 php.ini 中添加：

```
upload_max_filesize = 500M
post_max_size = 500M 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:53:46.273

您必须更改 php.ini 中的 upload_max_filesize

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T19:57:23.320

我很久以前在rails和mysql上遇到过同样的问题，

上传文件时必须考虑 3 件事：

*   PHP中的最大上传文件
*   确保 MySQL 将保存一个大文件。
*   如果您的浏览器没有收到来自服务器的任何答复，您的浏览器将在将文件上传到数据库一段时间后断开连接。

我认为您处理了前 2 个，但要处理第 3 个，您可能需要一个上传进度条来保持会话处于活动状态。实际上，您需要一些 AJAX 来保持服务器和客户端“通话”，同时文件仍在上传。

# iphone - 如何在这个简单的 while 循环中使用 NSTimer？

> ID：11728570
> 
> 赞同：2
> 
> 时间：2012-07-30T19:50:43.657
> 
> 标签：iphone, objective-c, ios, nstimer

我有一个 -(void) 方法正在执行，并且在某一时刻它进入一个 while 循环，该循环在它要求它们的那一刻直接从加速度计获取值

我浏览了有关 NSTimer 类的文档，但我无法理解在我的案例中我应该如何使用这个对象：

例如

```
-(void) play
{
    ......
    ...

    if(accelerationOnYaxis >0 && accelerationOnYaxis < 0.9 )
    {
        startTimer;
    }

    while(accelerationOnYaxis >0 && accelerationOnYaxis < 0.9)
    {
        if(checkTimer >= 300msec)
        {

           printOut_AccelerationStayedBetweenThoseTwoValuesForAtLeast300msecs;
           break_Out_Of_This_Loop;
        }

    }

    stopTimerAndReSetTimerToZero;

    .....
    more code...
    ....
    ...
} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T20:04:01.860

您不能使用 来执行此操作`NSTimer`，因为它需要您的代码退出才能触发。`NSTimer`使用事件循环来决定何时给您回电；如果您的程序在其循环中保留控件`while`，则计时器无法触发，因为永远不会到达检查是否该触发的代码。

最重要的是，在忙碌的循环中停留近一秒半会耗尽你的电池。如果您只是需要等待`1.4s`，最好调用`sleepForTimeInterval:`，如下所示：

```
[NSThread sleepForTimeInterval:1.4]; 
```

您还可以使用[`clock()`](http://www.cplusplus.com/reference/clibrary/ctime/clock/)from`<time.h>`来测量较短的时间间隔，如下所示：

```
clock_t start = clock();
clock_t end = start + (3*CLOCKS_PER_SEC)/10; // 300 ms == 3/10 s
while(accelerationOnYaxis >0 && accelerationOnYaxis < 0.9)
{
    if(clock() >= end)
    {
       printOut_AccelerationStayedBetweenThoseTwoValuesForAtLeast300msecs;
       break_Out_Of_This_Loop;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T20:03:35.503

`NSTimer`工作方式与您想要的有所不同。您需要的是计时器的计数器，以获取它循环的次数。如果您的计数器变为 14（如果它是整数），您可以使其无效。

```
//start timer
NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:0.1
        target:self
        selector:@selector(play:)
        userInfo:nil
        repeats:YES];

//stop timer
[timer invalidate]; 
```

你可以在没有那个时间的情况下创建你的函数。

```
- (void)play {
    ......
    ...

    counter++; //declare it in your header

    if(counter < 14){
        x++; //your integer needs to be declared in your header to keep it's value
    } else {
        [timer invalidate];
    }

    useValueofX;
} 
```

看看[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html)。

# java - 如何动态加载scala模板

> ID：11728573
> 
> 赞同：1
> 
> 时间：2012-07-30T19:51:03.043
> 
> 标签：java, playframework-2.0

我想知道是否有任何方法可以使用 playframework2 动态加载模板，而 scala 使用反射。在 play 1.xi 曾经做过如下的事情：

```
 public static void template(String templateName) {
    renderTemplate("templateName");
} 
```

无论如何我可以使用play2.x实现同样的事情吗？

Java示例/解决方案将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:21:54.370

您可以通过反射获取模板对象，然后使用结构类型调用其应用方法。

```
val c = Class.forName(fullyQualifiedTemplateClassName + "$")
val template = c.getField("MODULE$").get(c).asInstanceOf[{def apply():Html}]

Ok(template()) 
```

# java - 在 JMenu 中居中文本

> ID：11728574
> 
> 赞同：3
> 
> 时间：2012-07-30T19:51:04.117
> 
> 标签：java, swing, jmenu

好吧，我一直在网上寻找一些帮助，但我尝试的任何方法似乎都不起作用。我想让所有的菜单文本都集中在他们的菜单按钮上。我用`setHorizontalTextPosition(JMenu.CENTER)`的时候没有变化。事实上，无论我使用什么常量，菜单文本都保持左对齐。

有任何想法吗？

***更新 1**

仍然没有运气。重新阅读 JMenu API 后，我意识到，`setHorizontalTextPosition(int)`只`setVerticalTextPosition(int)`设置与图标相关的文本，`setHorizontalAlignment(int)`并`setVerticalAlignment(int)`在 JMenu 中设置文本和图标的对齐方式。

与图标一起使用时，文本定位方法似乎像宣传的那样工作。

垂直对齐方法似乎适用于文本或图标或两者。

但是，水平对齐方法似乎根本不起作用。即使只是在文本或图标或两者上单独使用它，似乎也没有任何改变。我已将菜单大小增加到 150x50，无论组合如何，我都无法获得文本或图标，也无法水平居中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-20T08:21:40.487

继续 MadProgrammer 的 using 主题`HTML`，我曾经`CSS`在菜单中定位和设置文本样式。`style="text-align:center;"`用于`CSS`将文本定位在中心。就我而言，我将`JMenu`标题封装在元素`<p>`内的段落标签中`<html>`；

```
clientFilter = new JMenu("<html><p style='text-align:center;'>Client</p></html>");
siteFilter = new JMenu("<html><p style='text-align:center;'>Site</p></html>");
employeeFilter = new JMenu("<html><p style='text-align:center;'>Employee</p></html>");
jobtypeFilter = new JMenu("<html><p style='text-align:center;'>Job Type</p></html>"); 
```

看起来像这样；

![在此处输入图像描述](../Images/4ba77c3bf669bba90f875cb4f924ec46.png)

值得注意的是，在上图中我也使用`width:90px;color:blue;`了 style 属性，但为了简单起见，我从上面的代码示例中删除了这两种样式。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T19:59:06.383

尝试`setHorizontalTextPosition(SwingConstants.CENTER);`紧随其后`invalidate();`

或者使用[边距](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#setMargin%28java.awt.Insets%29)：

```
JMenu optionsMenu = new JMenu("Option");
optionsMenu.setMargin(new Insets(5, 50, 5, 5)); 
```

我做了一个简短的 SSCCE，看看我是否可以*重新制定*问题，但我的问题似乎从一开始就完全一致，不需要上述任何内容：

截图链接：http: [//img713.imageshack.us/img713/1489/67449235.jpg](http://img713.imageshack.us/img713/1489/67449235.jpg)

```
import java.awt.BorderLayout;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.SwingUtilities;

public class JMenuCenterTest extends JFrame {

    public JMenuCenterTest() {
        createUI();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new JMenuCenterTest().setVisible(true);
            }
        });
    }

    private void createUI() {
        setTitle("JMenu Center Test");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(300, 300);
        JMenuBar bar = new JMenuBar();
        JMenu menu1 = new JMenu("File");
        //menu1.setMargin(new Insets(5, 50, 5, 5));
        JMenu menu2 = new JMenu("Options");
        JMenu menu3 = new JMenu("Help");
        //menu1.setHorizontalTextPosition(SwingConstants.CENTER);
        // invalidate();
        bar.add(menu1);
        bar.add(menu2);
        bar.add(menu3);
        getContentPane().add(bar, BorderLayout.NORTH);
    }
} 
```

参考：

*   [在 JMenu 组件中设置标题文本的对齐方式](https://stackoverflow.com/questions/11712667/setting-alignment-of-title-text-in-a-jmenu-component)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T23:20:01.797

好的，我已经玩过了这个，我得出的结论是，我认为通过设置`JMenu`.

您所做的任何事情都会被 UI 委托覆盖。

尝试这个：

```
JMenu menu = new JMenu("<html><table width='100%'><tr><td halign='center' align='center' bgcolor='red'>File</td></tr></table></html>");

menuBar.add(menu); 
```

您会发现，无论您制作多宽的菜单，提供给文本的区域也足够大以呈现它。

![菜单文本示例](../Images/6d7c9ccb2262c41de97d4f1da9a5d648.png)

我能看到你剩下的唯一选择是提供你自己的 UI 代表，恕我直言，这是一个非常非常糟糕的主意，最终只会在你的脸上爆炸，但这只是我的意见：P

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T20:01:33.957

我认为`setHorizontalAlignment`应该做你想做的，同时`setHorizontalTextPosition`指定相对于图标的文本位置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-08T22:37:33.007

所以解决方案是：

```
private JMenuBar menu;
private JMenu file;

Dimension screenSize = java.awt.Toolkit.getDefaultToolkit().getScreenSize();
double height = (double)screenSize.getHeight();
double widht = (double)screenSize.getWidth();

double frameh = 0.3*height; int frameH =(int)Math.ceil(frameh);
double framew = 0.3*widht;  int frameW = (int)Math.ceil(framew);

double menuh = 0.1*frameh;      int menuH = (int)Math.ceil(menuh);
double menuw = framew;          int menuL = frameW;

double fileh = menuh;       int fileH = menuH;
double filew = 0.1*menuw;   int fileW = (int)Math.ceil(filew);

    int textPos= fileW-10; //at the start of the button you have a little margin and you must leave somme pixel to fixe the center.

Window(){

    initialisation();
    construction();

    this.setTitle("Tutoriel 1.3 HS");
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.setSize(frameW, frameH);
    this.setLocationRelativeTo(null);
    this.setVisible(true);
}

public void initialisation(){       
    file = new JMenu(("<html><table width='"+textPos+"'><tr><td align='center'>File</td></tr></table></html>"));// this is accept

    file.setPreferredSize(new Dimension(fileW, fileH));
    menu = new JMenuBar();
    menu.setPreferredSize(new Dimension(menuL, menuH));
    menu.add(file);     
}

public void construction(){
    this.setJMenuBar(menu);
} 
```

# java - Spring 安全性未过滤资源

> ID：11728575
> 
> 赞同：1
> 
> 时间：2012-07-30T19:51:04.983
> 
> 标签：java, spring, spring-security

我创建了这个简单的 AdminController：

```
@Controller
@RequestMapping("admin")
public class AdminController {
    @PreAuthorize("hasAuthority('ROLE_ADMIN')")
    @RequestMapping(value = "/", method = RequestMethod.GET)
    public @ResponseBody String welcomeAdmin() {
        return "Spring Security - ROLE_ADMIN";
    }   
    @PreAuthorize("hasAuthority('ROLE_ADMIN')")
    @RequestMapping(value = "/{query}", method = RequestMethod.GET)
    public @ResponseBody String welcomeAdmin(@PathVariable String query) {
        return query;
    }
} 
```

这是**security-context.xml**：

```
<http auto-config="true">
    <intercept-url pattern="/admin*" access="ROLE_ADMIN"/>
    <logout logout-success-url="/admin" />
</http>

<authentication-manager>
    <authentication-provider>
        <user-service>
            <user name="user" password="password" authorities="ROLE_USER" />
            <user name="admin" password="password" authorities="ROLE_ADMIN" />
        </user-service>
    </authentication-provider>
</authentication-manager> 
```

在**web.xml**中加载：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/spring/root-context.xml
        /WEB-INF/spring/appServlet/security-context.xml
    </param-value>
</context-param>
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
  <filter-name>springSecurityFilterChain</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping> 
```

没有错误，但是`/admin`任何人都可以访问资源，为什么资源没有被 Spring 安全过滤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T19:57:57.890

我认为这是因为

> ```
> <logout logout-success-url="/admin" /> 
> ```

根据该行，一旦用户注销，将显示该 URL。注销页面不安全，因为未经身份验证的用户必须可以访问它。它可能会覆盖第一个条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:57:16.337

你用的是什么版本的spring security？

在您需要的**security-context.xml中**

```
<global-method-security pre-post-annotations="enabled" >
</global-method-security> 
```

为了使用注释。

你也应该尝试：

```
<intercept-url pattern="/admin*" access="hasRole('ROLE_ADMIN')"/> 
```

# javascript - Twitter Bootstrap 模态淡化

> ID：11728577
> 
> 赞同：2
> 
> 时间：2012-07-30T19:51:11.637
> 
> 标签：javascript, jquery, twitter-bootstrap, modal-dialog

我正在使用 Twitter Bootstrap 作为设计新社交网络的框架，该社交网络显示工作并允许用户通过简单的一键式流程申请工作。当用户单击“应用”时，会出现一个模式窗口，并为他们提供选择简历的选项，然后单击“应用”。当单击应用按钮（打开模式并关闭模式）时，我希望模式淡入淡出。我已经下载并上传了所有引导 .js 文件，并且所有 CSS 都是正确的（我认为），我根本无法让它褪色。

这是单击的第一个应用按钮：

```
<div class="float-right"><button id="apply-btn" class="btn-primary" data-toggle="modal" data-target="#apply" style="height: 40px;">Apply</button></div> 
```

这是模态html：

```
<div id="apply" class="hide">
        <div class="modal fade in">
            <form class="modal-form" action="#thank-you" method="post" style="margin-bottom: 60px;">
                <div class="modal-header"><h2>Apply</h2></div>

                <div class="modal-body"> 

                    <img class="apply_img" src="images/temp/prof_pic_temp.jpg" style="display: inline;">
                    <div class="apply_info">
                        <span class="apply_name">Tyler Bailey</span>
                        <ul>
                            <li><a href="schools.php">Western Michigan University</a></li>
                            <li><a href="#">Film, Video & Media Studies</a></li>
                        </ul>
                        <form id="doc_select" method="get">
                            <select name="doc_select" style="margin-bottom: 0px;">
                                <option select="selected">Select a resume</option>
                                <option value="1">Resume 1</option>
                                <option value="2">Resume 2</option>
                                <option value="3">Resume 3</option>
                            </select>

                            <div class="control-group" style="margin-top: 25px;">
                                <label class="control-label" for="user_resume" style="font-weight: bold; margin-bottom: 0px;">Or upload new resume:</label>
                                <div class="control">
                                    <input type="file" id="user_resume" size="30" />
                                </div>
                            </div>
                        </form>
                    </div>

                </div>

                <div class="modal-footer">
                    <button type="submit" class="btn" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Apply</button>
                </div>
        </div>
    </div><!-- #apply --> 
```

这是模态淡入淡出的CSS：

```
 .modal {
  position: fixed;
  top: 50%;
  left: 50%;
  z-index: 1050;
  max-height: 800px;
  overflow: auto;
  width: 560px;
  margin: -200px 0 0 -280px;
  background-color: #ffffff;
  border: 1px solid #999;
  border: 1px solid rgba(0, 0, 0, 0.3);
  *border: 1px solid #999;
  /* IE6-7 */

  -webkit-border-radius: 6px;
  -moz-border-radius: 6px;
  border-radius: 6px;
  -webkit-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);
  -moz-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);
  box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);
  -webkit-background-clip: padding-box;
  -moz-background-clip: padding-box;
  background-clip: padding-box;
}
.modal.fade {
  -webkit-transition: opacity .3s linear, top .3s ease-out;
  -moz-transition: opacity .3s linear, top .3s ease-out;
  -ms-transition: opacity .3s linear, top .3s ease-out;
  -o-transition: opacity .3s linear, top .3s ease-out;
  transition: opacity .3s linear, top .3s ease-out;
}
.modal.fade.in {
  top: 50%;
} 
```

我已经研究了很长时间了，不能再浪费时间了。我知道我可以使用 jQuery 为淡入和淡出设置动画，但我想坚持使用引导框架并按预期使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:29:27.900

泰，你的代码有点好。您必须删除一些不必要的 div。

消除

```
<div id="apply" class="hide"> 
```

并在下面修改这个：

```
<div class="modal fade in"> 
```

最终产品应为：

```
<div id="apply" class="modal hide fade"> 
```

因此，它应该是您的打开 div，它包含了模态的整个主体。

我已经修改了您的代码并这样做了：

```
 <div id="apply" class="modal hide fade">
        <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h2>Apply</h2>
        </div>

        <div class="modal-body"> 
            <form class="modal-form" action="#thank-you" method="post" style="margin-bottom: 60px;">

            </form>
            <img class="apply_img" src="images/temp/prof_pic_temp.jpg" style="display: inline;">
            <div class="apply_info">
                <span class="apply_name">Tyler Bailey</span>
                <ul>
                    <li><a href="schools.php">Western Michigan University</a></li>
                    <li><a href="#">Film, Video & Media Studies</a></li>
                </ul>
                <form id="doc_select" method="get">
                    <select name="doc_select" style="margin-bottom: 0px;">
                        <option select="selected">Select a resume</option>
                        <option value="1">Resume 1</option>
                        <option value="2">Resume 2</option>
                        <option value="3">Resume 3</option>
                    </select>

                    <div class="control-group" style="margin-top: 25px;">
                        <label class="control-label" for="user_resume" style="font-weight: bold; margin-bottom: 0px;">Or upload new resume:</label>
                        <div class="control">
                            <input type="file" id="user_resume" size="30" />
                        </div>
                    </div>
                </form>
            </div>

        </div>

        <div class="modal-footer">
            <button type="submit" class="btn" data-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-primary">Apply</button>
        </div>
    </div> 
```

我已经在我的页面中测试了上面的代码，它加载正常。你可以用你的试试。我还注意到您的表单 (modal-form) 没有结束标记。

您不必将“in”添加为类。那个处理模态的向下滑动动画。

祝你有个美好的一天...

# c# - e.取消不起作用

> ID：11728578
> 
> 赞同：3
> 
> 时间：2012-07-30T19:51:19.860
> 
> 标签：c#

我有 VS 2010，想通过 Yes|No|Cancel 对话框取消表单关闭事件，但是当我将 e.Cancel 放入对话框的事件处理程序中时，我收到一条错误消息，显示“'System.EventArgs'不包含“取消”的定义，并且找不到接受“System.EventArgs”类型的第一个参数的扩展方法“取消”（您是否缺少 using 指令或程序集引用？）。此外，“取消”一词下方有一条红线。我在网上阅读的所有内容都说这是取消 FormClosing 事件的唯一方法。我在 VS2008 中测试了代码，它做了同样的事情。

事件处理程序的代码如下：

```
private void displayMessageBox(object sender, EventArgs e)
        {
        DialogResult result = MessageBox.Show("Do you want to save the changes to the document before closing it?", "MyNotepad",MessageBoxButtons.YesNoCancel, MessageBoxIcon.Warning);
        if (result == DialogResult.Yes)
        {
            saveToolStripMenuItem_Click(sender, e);
        }
        else if (result == DialogResult.No)
        {
            rtbMain.Clear();
            this.Text = "Untitled - MyNotepad"; 
        }
        else if (result == DialogResult.Cancel)
        {
            // Leave the window open.
            e.Cancel() = true;

        } 
```

以下是用途（如果它有所作为）：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T19:55:34.747

[Form.FormClosing](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formclosing.aspx)使用 a`FormClosingEventArgs`而不是 just `EventArgs`。

你需要使用：

```
private void displayMessageBox(object sender, FormClosingEventArgs e) 
```

如果您使用较旧的[Form.Closing](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.closing.aspx)事件，则将其定义为 a `CancelEventHandler`，它使用`CancelEventArgs`，而不是`EventArgs`。

```
private void displayMessageBox(object sender, CancelEventArgs e) 
```

使用其中任何一个，您可以执行以下操作：

```
 e.Cancel = true; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-30T19:56:51.663

FormClosing[事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formclosing.aspx)有[自己的 EventArgs 子类](http://msdn.microsoft.com/en-us/library/system.windows.forms.formclosingeventargs.aspx)，您应该将其作为事件处理程序的参数：

```
private void displayMessageBox(object sender, FormClosingEventArgs e)
{
    DialogResult result = MessageBox.Show("Do you want to save the changes to the document before closing it?", "MyNotepad", MessageBoxButtons.YesNoCancel, MessageBoxIcon.Warning);
    if (result == DialogResult.Yes)
    {
        saveToolStripMenuItem_Click(sender, e);
    }
    else if (result == DialogResult.No)
    {
        rtbMain.Clear();
        this.Text = "Untitled - MyNotepad"; 
    }
    else if (result == DialogResult.Cancel)
    {
        // Leave the window open.
        e.Cancel = true;
    }
} 
```

此外，`e.Cancel`是一个属性，您将其称为方法。括号需要去掉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T20:01:43.317

使用`FormClosingEventArgs`方法签名中的类型：

```
private void displayMessageBox(object sender, FormClosingEventArgs e) 
```

和：

```
e.Cancel = true; 
```

或者将引用转换为该类型来访问它：

```
((FormClosingEventArgs)e).Cancel = true; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T20:06:17.687

**这很容易>>**

**使用*FormClosing*事件：**

```
private void frmMain_FormClosing(object sender, FormClosingEventArgs e)
{
    displayMessageBox(this, e);
}

private void displayMessageBox(object sender, FormClosingEventArgs e)
{
    DialogResult result = MessageBox.Show("Do you want to save the changes to the document before closing it?",
                                            "MyNotepad", MessageBoxButtons.YesNoCancel, MessageBoxIcon.Warning);
    if (result == DialogResult.Yes)
    {
         saveToolStripMenuItem_Click(sender, e);
    }
    else if (result == DialogResult.No)
    {
           rtbMain.Clear();
        this.Text = "Untitled - MyNotepad";
    }
    else if (result == DialogResult.Cancel)
    {
        // Leave the window open.
        e.Cancel = true;

    }

} 
```

# ios - iPhone 应用拒绝 17.2：应用要求用户使用其 Facebook 帐户登录

> ID：11728585
> 
> 赞同：2
> 
> 时间：2012-07-30T19:51:45.543
> 
> 标签：ios, iphone, facebook, login, appstore-approval

我在这里遵循了我的原生 iOS 应用程序的登录说明[https://developers.facebook.com/docs/mobile/ios/build/](https://developers.facebook.com/docs/mobile/ios/build/)

我在应用程序中的 AppDelegate 中拥有 Facebook 的所有内容：didFinishLaunchingWithOptions：

```
facebook = [[Facebook alloc] initWithAppId:@"xyzabc" andDelegate:self];
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

if ([defaults objectForKey:@"FBAccessTokenKey"] 
    && [defaults objectForKey:@"FBExpirationDateKey"]) {
    facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
    facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
}

if (![facebook isSessionValid]) {
    NSArray *permissions = [[NSArray alloc] initWithObjects:
                            @"publish_stream", 
                            nil];
    [facebook authorize:permissions];

} 
```

问题是我的应用程序打开了，我要求人们登录到 Facebook 才能使用我的应用程序中的功能。苹果拒绝了我说 Facebook 功能应该是可选的而不是强制的（在拒绝原因 17.2 下列出）。

我只是想知道我是否可以将大部分内容保留在应用程序委托中，但是将

```
 if (![facebook isSessionValid]) {
        NSArray *permissions = [[NSArray alloc] initWithObjects:
                                @"publish_stream", 
                                nil];
        [facebook authorize:permissions];
} 
```

其他地方（比如按下登录 facebook 按钮时）。如果是这种情况，是否应该更新 facebook 文档，以免其他人被拒绝？或者，也许我错过了可以将其保留在应用程序委托中的某些内容，但调用其他内容以使登录成为可选？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:09:45.337

我为解决这个问题所做的是将所有 Facebook 代码从 -applicationDidFinishLaunching 移动到自定义方法 -createFBInstance ，每当按下 UIButton 时我从 UIViewController 调用该方法，因此现在用户仅在单击按钮和应用程序时登录 Facebook效果很好！只要确保你只在你的委托中使用来自 FBSessionDelegate 的方法，我永远无法让它在任何其他类中工作。我还在应用程序内的 Web 视图中打开了登录网页，所以它看起来好多了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T20:10:37.640

当然会被拒绝。17.2 表示**要求用户共享个人信息（例如电子邮件地址和出生日期）才能正常运行的应用程序将被拒绝。**用户在拥有 Facebook 帐户之前无法使用您的应用程序。相反，我建议您将其保留为可选，例如使用 facebook/Google 登录并拥有您的应用程序自己的注册程序。

# windows-phone-7 - 为 Windows 手机设计应用程序的滚动页面

> ID：11728592
> 
> 赞同：0
> 
> 时间：2012-07-30T19:52:02.573
> 
> 标签：windows-phone-7, scrollview

我正在visual studio中设计一个windows phone应用程序，它包含的数据是巨大的，这使得它占据了很大的页面空间。如何在设计视图中滚动页面，以便在底部添加控件等。我欢迎任何形式的帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:11:12.620

减少数据项的数量？

以使整个容器超出范围但在顶部而不是底部的方式设置上边距，然后在完成后将其重置。

# python - Python匿名管道设置超时

> ID：11728599
> 
> 赞同：3
> 
> 时间：2012-07-30T19:52:33.453
> 
> 标签：python, linux, ipc, pipe

我有一种感觉，这是不可能的；但是有没有办法在 Linux 上的 Python / C 中的匿名管道上设置读取超时？

有比设置和捕获 SIGALRM 更好的选择吗？

```
>>> import os
>>> output, input = os.pipe()
>>> outputfd = os.fdopen(output, 'r')
>>> dir(outputfd)
['__class__', '__delattr__', '__doc__', '__enter__', '__exit__', '__format__', '__getattribute__', '__hash__', '__init__', '__iter__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', 'close', 'closed', 'encoding', 'errors', 'fileno', 'flush', 'isatty', 'mode', 'name', 'newlines', 'next', 'read', 'readinto', 'readline', 'readlines', 'seek', 'softspace', 'tell', 'truncate', 'write', 'writelines', 'xreadlines']
>>> 
```

（没有`settimeout()`方法）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T19:57:04.747

您应该尝试使用该`select`模块，它允许您提供超时。将文件对象添加到选择集中，然后检查返回对象以查看它是否已更改：

```
r, w, x = select.select([output], [], [], timeout) 
```

然后检查 r 以查看对象是否可读。这可以扩展到您想要监控的任意数量的对象。如果对象在 r 中，则读取：`output.read()`.

此外，您可能希望使用`os.read`. 而不是 fdopen，因为它不会受到 Python 文件缓冲的异想天开的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:57:21.367

这不是直接设置，但您可以`select`在文件描述符上使用以等待输入。它是一个内置模块，支持 Unix 上的所有文件描述符，但仅支持 OpenVMS 和 Windows 上的套接字（来自 pydoc 页面`select`）。

# python - 在 Python 中的 msysgit 上询问用户名时获取输出（在 Windows 上）

> ID：11728600
> 
> 赞同：2
> 
> 时间：2012-07-30T19:52:36.220
> 
> 标签：python, git, io, msysgit

我在执行 git fetch 时尝试获取输出，但它停止询问用户名，我无法检测到这一点。

即：在我正在做的 Python 脚本中：

```
cmd = 'git fetch origin master'.split()
import subprocess
p = subprocess.Popen(cmd, cwd='.',stderr=subprocess.PIPE)
while p.poll() is None:
    r = p.stderr.read(1)
    print(r) 
```

它只是停止而不打印任何东西。如果我在没有管道 stderr 的情况下运行它，则会出现询问用户名的消息（因此，它正在写入但 stderr.read 没有检测到任何东西）。

```
[16:41:45 X:\]python test.py
Username for 'my.domain.com.br': 
```

我尝试过直接处理 stderr.fileno()、更改 Popen bufsize、写入 process.stdin、关闭 stdin 和许多不同的东西都无济于事。任何人都知道一种让它工作的方法吗？（我的感觉是 msysgit 只是在写请求用户名而不刷新或写一个新行，而 Python 无法正确处理，在这种情况下，它可能只能固定在 msysgit 上？——尽管它确实出现在 shell 中，如果我不要管它，这很奇怪）。

上下文：我正在做一个程序来帮助一次处理多个存储库（https://github.com/fabioz/mu-repo），所以，因为它可以一次为许多存储库执行它，而不是管道它不是一个真正的选项，因为太多的东西看起来是乱码（如果指定了 ssh 访问权限或密码已经通过其他方式设置，那么事情确实有效，但我想有办法告诉用户进程被卡住等待输入而不是仅仅挂在那里——如果有办法执行它，确保在询问密码时 git 会失败，这也足够了）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T23:57:34.687

为用户名和电子邮件设置全局配置。然后 git 不会提示这些。

```
git config --global user.name "Your Name"
git config --global user.email "your@email.address" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-08T23:58:07.137

我对子流程有类似的问题。当我在我的环境中多次运行您的代码时（Windows 7，git 不需要密码），我得到了一些但不是全部的输出，并且每次运行它时，我都会得到不同数量的输出。为了解决这个问题，我运行了命令并将输出保存到一个临时文件中，然后读回文件，每次都得到所有输出——如下所示：

```
#!/bin/python
import os
import subprocess

cmd = "git fetch origin master"
filename = "temp.txt"

if os.name == "posix":
    p=subprocess.Popen(['sh', '-c', cmd+' >> '+filename])
elif os.name == "nt":
    p=subprocess.Popen(['cmd.exe', '/c '+cmd+' >> '+filename])
while not os.path.isfile(filename):
    pass
fd = open(filename, 'r')
return_value = None
out = ""
while return_value == None:
    text = fd.readline()
    if text:
        out += text
    return_value = p.poll()
while text:
    text = fd.readline()
    if text:
        out += text
fd.close() 
```

# html - CSS限制缩放？

> ID：11728605
> 
> 赞同：0
> 
> 时间：2012-07-30T19:52:59.927
> 
> 标签：html, css, wrapper, margin

我的内容包装器将在正文中居中。我遇到的问题是我有一个特定的 div，它将使用 z-index 部分进入正文并从包装器中取出。这在使用某种解决方案时效果很好。如果用户最大化其桌面解决方案，内容包装器的框架将不再可见。即使那样，某些 div 也不再可见。那么有没有办法限制最大值。飞涨？

这是一个例子：[链接](http://jsfiddle.net/EKsyd/)

当您放大时，您可以看到红色 div 从某个点开始不再可见。如果可能的话，我想避免这种情况。多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:57:14.597

各种浏览器允许您定义定义允许缩放限制的视口元标记（例如基于 Web Kit 的浏览器）。如果您知道您的目标浏览器是什么，您可能需要对此进行调查。

# php - 带有 ajax 和 jexec 的 Joomla 模块

> ID：11728606
> 
> 赞同：1
> 
> 时间：2012-07-30T19:53:00.987
> 
> 标签：php, ajax, joomla

我使用 AJAX 开发了一个登录模块。其中一项功能是用户名可用性检查。当然，这使用了一个外部 PHP 文件，其中包含以下行：

```
defined('_JEXEC') or die; 
```

这造成了所有的麻烦。这条线必须在那里。如您所知，AJAX 无法调用此文件，访问被拒绝..

有人说我必须制作一个组件，但我更愿意避免这种情况。

我有哪些选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:55:08.530

对您自己的具有该行的 PHP 文件进行 AJAX 调用

```
define( '_JEXEC', 1 ); 
```

然后从另一个 PHP 文件中获取您需要的信息。

我使用XMLRPC调用远程Joomla机器上的文件，远程PHP文件都有这一行，运行正常。`define`注意和之间的区别`defined`。

# c# - WP7-Skydrive API 下载任何文件并保存隔离存储

> ID：11728608
> 
> 赞同：0
> 
> 时间：2012-07-30T19:53:04.193
> 
> 标签：c#, windows-phone-7, onedrive

我正在尝试在 skydrive 上下载文件，但它无法正常工作。

```
 LiveConnectClient client = new LiveConnectClient(session);
        client.DownloadCompleted += new EventHandler<LiveDownloadCompletedEventArgs>(DownloadCompleted);
        client.DownloadAsync(fileid);
        //-----------------------------------------------------------------
        void DownloadCompleted(object sender, LiveOperationCompletedEventArgs e)
        {
            StreamReader reader = new StreamReader(e.Result);
            string text = reader.ReadToEnd();
            IsolatedStorageFile Isofiles = IsolatedStorageFile.GetUserStoreForApplication();
            using (var isoFileStream = new IsolatedStorageFileStream("Testfile", FileMode.OpenOrCreate, Isofiles))
            {
                using (var isoFileWriter = new StreamWriter(isoFileStream))
                {
                    isoFileWriter.Write(text);
                }
            }
        } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T20:14:41.400

您只能通过此行获取元数据

```
client.DownloadAsync(fileid); 
```

像这样将 /content 添加到 fileid 以获取实际的文件内容。

```
client.DownloadAsync(fileid + "/content"); 
```

# node.js - 在 cassandra 中选择复合类型键

> ID：11728611
> 
> 赞同：1
> 
> 时间：2012-07-30T19:53:41.417
> 
> 标签：node.js, cassandra, cql, composite-types

所以我定义了一个使用复合 id 作为行键的列族。所以说复合键是`CompositeType(LongType,LongType)`. `SELECT`因此，我已经测试了使用这种类型存储项目，并且当我知道完整密钥时，它工作正常并且按预期工作。但是可以说我想要所有具有 0 作为第一个元素和任何作为第二个元素的键。到目前为止，我可以看到执行此查询的唯一方法如下：

如果我是 0:* 的所有键，那么`key >= 0:0 AND key < 1:0`只要有一个保留顺序的分区器，我就会执行一个 CQL 查询。

我的问题是：

1）这种奇怪的语法只是因为我使用的是 CQL 驱动程序（除了节俭之外，nodejs 的唯一选项）

2）这种类型的查询效率低下吗？本质上，我使用的是复合键而不是超级列，因为 CQL 不支持这些列。只要像这样使用它没有任何限制，我在代码中处理这个逻辑就没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T04:35:28.380

我建议你改变你的数据模型。使用 RandomPartitioner 并将第一个组件作为行键。将第二个组件推送到列名中，即使您的列名组合起来。

由于列名始终是排序的，因此您可以进行简单的切片操作。例如，

a）当您知道这两个组件时，对行键（第一个组件）和复合的第一个组件进行获取切片。

b）当您只知道第一个组件时，获取行键的完整行（第一个组件）

这是 CQL3 在您要求它创建具有多个主键的表时采用的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T22:15:49.330

您最好的选择是使用[CQL 3](http://www.datastax.com/dev/blog/schema-in-cassandra-1-1)。这将允许您在下面使用复合来优化查找，同时仍然允许您使用复合值的各个部分，就好像它们是单独的列一样。您当前在行键中使用复合，而 CQL 3 仅支持列名中的复合（[到目前为止](https://issues.apache.org/jira/browse/CASSANDRA-4179)），但这*可能*没问题。在许多这样的情况下，将合成从行键转移到列名不会对您的性能或数据分布产生不利影响，但如果您的行键没有足够的选择性，那么它可能会。

不过，无论哪种方式，您都应该关注 CQL 3。CQL 2 已被弃用。如果我对您的情况有更多了解，我可以告诉您更多有关如何使您的模型适应 CQL 3 的信息。

# r - R中的循环，找到一列的平均值取决于另一列

> ID：11728618
> 
> 赞同：0
> 
> 时间：2012-07-30T19:53:52.400
> 
> 标签：r, loops, mean

所以我的测试数据是这样的：

```
 structure(list(day = c(1L, 1L, 2L, 2L, 2L, 3L, 3L, 4L, 4L, 4L
), Left = c(0.25, 0.33, 0, 0, 0.25, 0.33, 0.5, 0.33, 0.5, 0), 
    Left1 = c(NA, NA, 0, 0.5, 0.25, 0.33, 0.1, 0.33, 0.5, 0), 
    Middle = c(0, 0, 0.3, 0, 0.25, 0, 0.3, 0.33, 0, 0), Right = c(0.25, 
    0.33, 0.3, 0.5, 0.25, 0.33, 0.1, 0, 0, 0.25), Right1 = c(0.5, 
    0.33, 0.3, 0, 0, 0, 0, 0, 0, 0.75), Side = structure(c(2L, 
    2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 2L), .Label = c("L", "R"), class = "factor")), .Names = c("day", 
"Left", "Left1", "Middle", "Right", "Right1", "Side"), class = "data.frame", row.names = c(NA, 
-10L)) 
```

或这个：

```
day Left Left1 Middle Right Right1 Side
   1 0.25    NA   0.00  0.25   0.50    R
   1 0.33    NA   0.00  0.33   0.33    R
   2 0.00  0.00   0.30  0.30   0.30    R
   2 0.00  0.50   0.00  0.50   0.00    R
   2 0.25  0.25   0.25  0.25   0.00    L
   3 0.33  0.33   0.00  0.33   0.00    L 
```

我想编写一个循环来查找所选一侧每天的标准误差和平均值。

好的..到目前为止我有这个代码：

```
td<-read.csv('test data.csv')

IDs<-unique(td$day)  

se<-function(x) sqrt(var(x)/length(x))

for (i in 1:length (IDs)) {

day.i<-which(td$day==IDs[i])   
td.i<-td[day.i,]

if(td$Side=='L'){ 
side<-cbind(td.i$Left + td.i$Left1)
}else{
side<-cbind(td.i$Right + td.i$Right1)
}

mean(side)
se(side)

print(mean)
print(se)

} 
```

但我收到这样的错误消息

错误：“}”中出现意外的“}”

显然，我也没有每天都打印出来。有谁知道为什么？

也在这里工作： [http](http://www.talkstats.com/showthread.php/27187-Writing-a-mean-loop..-(literally) ://www.talkstats.com/showthread.php/27187-Writing-a-mean-loop..-（字面意思）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:49:17.623

将您的数据转换为列表并使用它来代替：

首先，根据 将您的数据拆分为一个列表，`Side`并在此过程中对相关列进行子集化。

```
td = split(td, td$Side)
NAMES = names(td)
td = lapply(1:length(td),
            function(x) td[[x]][c(1, grep(NAMES[x],
                                          names(td[[x]])))])
names(td) = NAMES
td
# $L
#   day Left Left1
# 5   2 0.25  0.25
# 6   3 0.33  0.33
# 7   3 0.50  0.10
# 8   4 0.33  0.33
# 9   4 0.50  0.50
# 
# $R
#    day Right Right1
# 1    1  0.25   0.50
# 2    1  0.33   0.33
# 3    2  0.30   0.30
# 4    2  0.50   0.00
# 10   4  0.25   0.75 
```

然后，使用`lapply`并将`aggregate`您想要的任何功能应用于您的数据。

```
lapply(1:length(td), 
       function(x) aggregate(list(td[[x]][-1]), 
                             list(day = td[[x]]$day), mean))
# [[1]]
#   day  Left Left1
# 1   2 0.250 0.250
# 2   3 0.415 0.215
# 3   4 0.415 0.415
# 
# [[2]]
#   day Right Right1
# 1   1  0.29  0.415
# 2   2  0.40  0.150
# 3   4  0.25  0.750 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:13:47.347

仍然不完全确定我是否理解（也就是说，如果您想要 Left 和 Left 1 的均值和 SE 或类似 sum 的某种组合）。这就是我解释你的问题的方式：

```
FUN <- function(dat, side = "L") {
    DF <- split(dat, dat$Side)[[side]]
    ind <- if(side=="L") 2:3 else 5:6
    stderr <- function(x) sqrt(var(x)/length(x))
    meanNse <- function(x) c(mean=mean(x), se=stderr(x))
    OUT <- aggregate(DF[, ind], list(DF[, 1]),  meanNse)  
    names(OUT)[1] <- "day"
    return(OUT)
}

#test it
FUN(td)
FUN(td, "R") 
```

产生：

```
> FUN(td)
  day Left.mean Left.se Left1.mean Left1.se
1   2     0.250      NA      0.250       NA
2   3     0.415   0.085      0.215    0.115
3   4     0.415   0.085      0.415    0.085
> FUN(td, "R")
  day Right.mean Right.se Right1.mean Right1.se
1   1       0.29     0.04       0.415     0.085
2   2       0.40     0.10       0.150     0.150
3   4       0.25       NA       0.750        NA 
```

# database - 地理编码的数据库结构

> ID：11728622
> 
> 赞同：0
> 
> 时间：2012-07-30T19:54:02.820
> 
> 标签：database, sqlite, search

我想尝试做一个地理编码应用程序并访问存储在 SQLite 数据库中的数据。将提供邮政编码、城镇或城市，我想返回长/纬度。我希望它快速尖叫，但我不确定如何组织数据库中的数据。

这是我正在使用的数据：

> 城镇、城市、邮政编码、国家、经度、纬度

这可能很简单，但我对此很陌生，我会从一些建议中受益。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:01:39.430

人们会拼错您建议用作搜索条件的所有内容。因此，请勿在此数据库表中使用字符串表示 Town、City、Postcode 和 Country。

一个好的第一步是使用一个 Id，在一个单独的表（例如 Towns 表）中查找 Id。然后，用户可以使用 ID 的组合查找纬度和经度。如果省略一个或多个 Id，可能会返回多个结果。例如，如果他们只提供 Postcode 和 Country 的 Id，那将匹配多个 Cities/Towns。

专门查找纬度和经度的更有效方法是将特定地点 ID 分配给包含纬度和经度的表中的每个条目

```
PlaceId  Latitude  Longitude 
```

允许用户单独查找 PlaceId（通过使用 Town、City、Postcode、Country 的组合并从多个返回值中进行选择以获取特定的 Place）。使用该 PlaceId 来查找纬度和经度。

# windows-8 - 如何在 Metro 中创建适用于 WebView 的 AppBar？

> ID：11728623
> 
> 赞同：1
> 
> 时间：2012-07-30T19:54:14.990
> 
> 标签：windows-8, webview, windows-runtime, winrt-xaml, appbar

所以我有一个普通的 AppBar 可以在 C# Metro 应用程序中工作，但问题是我需要该应用程序来显示一个 html 页面。我创建了一个占页面宽度和高度 100% 的 WebView，通过这样做，AppBar 在右键单击和边缘滑动时不再显示。AppBar 有没有办法与这样的 WebView 一起工作？

- 解决 -

我最终做的是在 WebView 周围添加一个 1px 边框，以便可以检测到滑动。由于我在 WebView 中包含的内容会随时间动态变化，因此 WebViewBrush 对我来说并不适用。相反，我只是在打开 AppBar 时缩小了 WebView 的大小，然后在关闭时展开它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:47:49.650

不是试图窃取菲利普的答案，但我认为需要更多细节才能完全回答这个问题。

即使 WebView 全屏运行，AppBar 也会在您右键单击或滑动时尝试显示自己。您可以通过订阅**AppBar.Opened**事件来证明这一点。有趣的是，AppBar 似乎以某种方式知道它被遮挡并自动关闭。即使它没有自行关闭，您也无法看到它，因为它在 WebView 下被遮挡了。

Filip 在 AppBar 打开时隐藏 WebView 和使用 WebViewBrush 的想法是正确的。你可以在这里找到一个很好的例子：

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webviewbrush.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webviewbrush.aspx)

至于何时在 WebView 和 WebViewBrush 之间切换，我只需在 AppBar.Opened 上进行，然后在 AppBar.Closed 上进行反转。AppBar 是轻度关闭，这意味着只要您点击它的客户区域之外的任何地方，它就会关闭。

最后一句忠告：在我的测试中，滑动手势似乎有时会被吞没。当我在 WebView 的顶部和底部放置一个 1 像素边框时，这个问题似乎消失了。你的旅费可能会改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:09:14.177

您需要在其上显示 XAML UI 时隐藏 WebView，并改用 WebViewBrush。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T04:00:32.947

如上所述，1px 边框有助于确保 AppBar 支持顶部/底部滑动。但是，与@matthieu 类似，当使用鼠标和右键单击方法时，我仍然无法可靠地打开 AppBar。

问题是我将 XAML 元素包含为 WebView 的对等元素，而不是像[AppBar.Closed 的 MSDN 参考所](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.appbar.closed.aspx)建议的那样作为父元素：

```
<Border BorderBrush="Gray" BorderThickness="2" Margin="100,20,100,20">
    <Grid>
        <WebView x:Name="contentView" Source="http://www.contoso.com"/>
        <Rectangle x:Name="contentViewRect"/>
    </Grid>
</Border> 
```

如果我以这种方式应用边框，AppBar 也可以用鼠标可靠地打开。

最后要注意的一件事是使用 a`BorderBrush="Transparent"`也可以，因此您不必实际看到丑陋的边框。我最终的 XAML 类似于：

```
<Border BorderThickness="0,1,0,1" BorderBrush="Transparent">
    <Grid>
        <WebView x:Name="WebView"></WebView>
        <Rectangle x:Name="RectWebViewBrush"></Rectangle>
    </Grid>
</Border> 
```

# opengl - 无法理解 Haskell OpenGL 程序触发的“未知 OpenGL 扩展条目”错误

> ID：11728627
> 
> 赞同：0
> 
> 时间：2012-07-30T19:54:19.550
> 
> 标签：opengl, haskell

我使用 GHC 7.4.1 (Haskell Platform 2012.2.0.0) 在 Windows XP 上编写了以下程序：

```
mkVertexShader :: IO Bool
mkVertexShader = do
  shader <- glCreateShader gl_VERTEX_SHADER
  withCString vertexShader $ \ptr -> glShaderSource shader 1 (castPtr ptr) nullPtr
  glCompileShader shader
  status <- with 0 $ \ptr -> do
      glGetShaderiv shader gl_COMPILE_STATUS ptr
      peek ptr
  return $ status == fromIntegral gl_FALSE 
```

运行时，程序中止

```
*** Exception: user error (unknown OpenGL extension entry glCreateShader, check for OpenGL 3.1) 
```

我不确定这个错误是什么意思，或者如何解决它。谁能帮忙/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:02:05.197

您的计算机上没有 OpenGL 3.1 支持。[`Core31`](http://hackage.haskell.org/packages/archive/OpenGLRaw/latest/doc/html/Graphics-Rendering-OpenGL-Raw-Core31.html#v%3aglCreateShader)您已经从¹或²中导入了该函数。您需要在启动应用程序时检查您的显卡是否支持各种版本/扩展，尤其是您没有请求您不支持的 OpenGL 配置文件。~~[`Core21`](http://hackage.haskell.org/packages/archive/OpenGLRaw21/latest/doc/html/Graphics-Rendering-OpenGL-Raw-Core21.html#v%3aglCreateShader)~~^(~~[`ARB.ShaderObjects`](http://hackage.haskell.org/packages/archive/OpenGLRaw/latest/doc/html/Graphics-Rendering-OpenGL-Raw-ARB-ShaderObjects.html#v%3aglCreateShaderObject)~~)

如果您使用 Haskell`OpenGL`库而不是`OpenGLRaw`，则会自动为您处理这种区别。

¹嗯，功能没有改变`Core21`，`Core31`所以使用旧版本将无济于事

²你不应该使用`ARB_shader_objects`.

# rspec - 相当于 rspec 的 let in test::unit?

> ID：11728629
> 
> 赞同：1
> 
> 时间：2012-07-30T19:54:32.470
> 
> 标签：rspec, testunit

任何人都知道 test::unit 中与 rspec 的 :let 和 :let! 的等价物吗？例如

```
context "foo" do
  let(:user) { Factory(:user) }
  it "bar" do
    ...
  end
end 
```

在编写 test::unit 测试时，我很想使用这种方便的模式。
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T03:59:01.057

像这样的东西`let!`：

```
def user
  @user ||= Factory(:user)
end 
```

而对于`let`在测试之间不缓存的 for ，您将需要与上述相同的定义，以及在`setup`or中的以下内容`teardown`：

```
@user = nil 
```

# objective-c - Xcode 4.4 + OSX 10.5 作为开发目标 = Clang LLVM 1.0 错误

> ID：11728634
> 
> 赞同：0
> 
> 时间：2012-07-30T19:54:50.290
> 
> 标签：objective-c, xcode, cocoa, osx-leopard

在新的 Xcode 4.4 上试试这个：创建一个新项目，一个 Cocoa 应用程序，并将 Development Target 设置为 OSX 10.5。

如果你运行它，你会得到这个错误：

```
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

有人可以解释一下吗？我也想在我的项目中支持 Leopard，但如果我尝试执行它们，我会收到此错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T20:07:37.443

确保您的项目不使用 ARC。Leopard 不支持 ARC。

（Snow Leopard 支持，无弱引用）

顺便说一句，实际错误可能在您在问题中复制/粘贴的行之前。

我希望这会有所帮助。

# ruby - MongoDB中的多对多关系

> ID：11728637
> 
> 赞同：0
> 
> 时间：2012-07-30T19:55:01.777
> 
> 标签：ruby, mongodb

我正在用 Ruby ([这里](http://github.com/tekknolagi/indexer)) 编写一个小型 torrent 索引器，并且很想支持 MongoDB 作为数据库的一个选项。`tag`目前，我在数据库中设置了s 和`torrent`s之间的多对多关系。

如何格式化`torrent_id`从映射表中获取与给定列表中所有标签匹配的所有 s 的查询？

我在 SQL 中这样做是这样的：

`select torrent_id, count(*) num from tagmap where tag_id in (tag1, tag2, tag3, tag4) group by torrent_id having num = 4"`

编辑：我现在只处理带有`torrent_id`and的集合`tag_id`。这就是它的全部内容。所以我将ids映射到ids，仅此而已。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:58:51.150

最好创建一个集合来创建包含 tag_id 和 torrent_id 的映射。每当您添加种子时，还要将种子标签添加到 torrenttags 集合中。索引应该在 tag_id 上。

您可以使用以下查询语法来获取匹配多个标签的种子列表。

`db.tagmap.find({tag_id:{$in: ['tag1','tag2','tag3','tag4']}});`

对于[聚合](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Examples)（分组，计数），您需要使用 MapReduce

# c# - C#/Metro 实现后台服务

> ID：11728644
> 
> 赞同：0
> 
> 时间：2012-07-30T19:55:16.813
> 
> 标签：c#, .net, windows-runtime, windows-store-apps

是否可以仅使用 Metro WinRT 和 API 实现在启动时启动并监视用户活动的服务？我需要以某种方式找到一种方法来获取用户开始观看视频的信息。我知道可以在普通的 .NET 中实现它（通过内核函数），但我想知道这是否可以在 WinRT 平板电脑上实现。也许通过创建一些触发器。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:58:23.083

不，幸运的是，正如雷蒙德所说——这是不可能的。您只能使用随附的代码监控您自己创建的应用程序。或者，您可以创建一个库来执行您想要的监控，并要求应用程序开发人员使用它——基本上就是分析库供应商会做的事情。

# android - 这个元素的名称是什么？

> ID：11728646
> 
> 赞同：0
> 
> 时间：2012-07-30T19:55:24.863
> 
> 标签：android

我正在尝试为 android 制作我的第一个应用程序，我需要知道这个元素的名称：

![在此处输入图像描述](../Images/aa73aec8c7e7c90b42003d502208d5aa.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T19:57:26.297

这就是 Android 操作系统上所谓的小部件。

有关更多详细信息，请参阅 Android 开发者网站：http: [//developer.android.com/guide/topics/appwidgets/index.html](http://developer.android.com/guide/topics/appwidgets/index.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T20:01:06.733

它是一个小部件。这个特定的小部件在我的 Nexus S 上被简单命名为“powermanager”。如果你想了解更多关于小部件的信息，请阅读这个[文档](http://developer.android.com/reference/android/widget/package-summary.html)和这个[开发指南](http://developer.android.com/guide/topics/appwidgets/index.html)

# java - 修改 JAR 文件而不重建 JAR

> ID：11728647
> 
> 赞同：1
> 
> 时间：2012-07-30T19:55:30.393
> 
> 标签：java, inheritance, jar, overriding

我有一个正在使用的 JAR 文件，我想修改其中的一个文件。简而言之，我有

```
public class ClassB {
    public void printMethod(){
       ClassA A = new ClassA();
       A.printout();
    }   
}

public class ClassA {
  public void printout(){
    System.out.println("1234");
  }
} 
```

我想将 ClassA 的打印输出方法更改为

```
public class ClassA {
  public void printout(){
    System.out.println("abcd");
  }
} 
```

我知道你不能在不解压/重建 JAR 的情况下修改它，为此，假设我不能这样做。有没有办法在不实际触及当前 ClassA 的情况下对 ClassA 进行修改？我的方法是使用重写的方法从 ClassA 继承一个新类，然后从调用 Inherited ClassA 的 ClassB 继承一个新类

```
public class InheritedClassA extends ClassA{
  @Override
  public void printout(){
    System.out.println("abcd");
  }
}

public class InheritedClassB extends ClassB{
  @Override
  public void printMethod(){
    InheritedClassA A = new InheritedClassA();
    A.printout();
  }
} 
```

不过我不喜欢这种方法，因为在我的实际 JAR 中，有很多类都在使用 ClassA，以至于试图对所有类正确执行此操作是一场噩梦，然后所有这些类都需要对它们进行相同的处理。我知道你不能重载/覆盖整个类，这基本上是我想做的。还有另一种方法可以做到这一点吗？

**编辑** 更难，我不能下载任何新的框架或软件或任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T20:04:01.150

I can only provide pointers as I never felt the need for it.

What you are referring to is called "Bytecode enhancement", and yes there are several frameworks to achieve it.

BCEL - [http://commons.apache.org/bcel/](http://commons.apache.org/bcel/)

ASM - [http://asm.ow2.org/](http://asm.ow2.org/)

Usually, java developers prefer to use the inversion of control pattern. This allows the code to configure itself at runtime via a configuration file - See Spring IoC for more details.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T20:00:10.543

一种*可能*不可行的选择是创建一个新版本`ClassA`，将其打包到自己的 jar 文件中，然后将其放在类路径中的原始版本之前。

However, this is a pretty odd scenario - why can you not update the existing jar file? Even if that means a bit of extra work, it's likely to be *much* cleaner in the long run than any other approach.

# iphone - Xcode4：由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序

> ID：11728652
> 
> 赞同：0
> 
> 时间：2012-07-30T19:55:48.513
> 
> 标签：iphone, objective-c, ios5, xcode4

我在使用 iphone 模拟器的 xcode4 中得到了这个异常：

```
Terminating app due to uncaught exception 'NSInternalInconsistencyException' 
```

如果您在 cellForRowAtIndex 方法中没有返回任何对象（返回 0），这似乎是造成的。但我已经准备好归还牢房了。

谁能看到可能导致此错误的原因？这是一堆截图：

控制器配置： ![我的控制器配置](../Images/09d12106f1dd88e68b2b61f30e8a28fc.png)

原型细胞 ![原型单元 1](../Images/7bac08bb10ae7ed1e9851fb5e5a10cc0.png)

注意单元： ![在此处输入图像描述](../Images/214898ed42bea90f371cb4a7e6ec6c40.png)

故事板： ![故事板的完整视图](../Images/6bb7aaf432ae7952b58d68d598b8b13b.png)

完全错误：

```
**Assertion failure in -[UITableView 
_createPreparedCellForGlobalRow:withIndexPath:],           
/SourceCache/UIKit_Sim/UIKit-1914.84/UITableView.m:6061
2012-07-30 14:34:16.660 Simple Storyboard[263:f803] Terminating app due 
to uncaught exception 'NSInternalInconsistencyException', 
reason: 'UITableView dataSource must return a cell from 
tableView:cellForRowAtIndexPath:'** 
```

这是代码：

```
#import "LWWBidTaskListController.h"

@interface LWWBidTaskListController ()
@property (strong, nonatomic)NSArray *tasks;

@end

@implementation LWWBidTaskListController

@synthesize tasks;

- (id)initWithStyle:(UITableViewStyle)style
{
self = [super initWithStyle:style];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];

self.tasks = [NSArray arrayWithObjects: @"Walk the dog", @"URGENT:Buy milk", @"Clean     hidden lair", @"Invent miniature dolphins", @"Find new henchmen", @"Get revenge on do-gooder heroes", @"URGENT: Fold laundry", @"Hold entire hold hostage", @"Manicure", nil];

// Uncomment the following line to preserve selection between presentations.
// self.clearsSelectionOnViewWillAppear = NO;

// Uncomment the following line to display an Edit button in the navigation bar for this     view controller.
// self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
self.tasks = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:    (UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
//#warning Potentially incomplete method implementation.
// Return the number of sections.
//return 0;
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
//#warning Incomplete method implementation.
// Return the number of rows in the section.
//return 0;
return [tasks count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:    (NSIndexPath *)indexPath//populates each cell
{
//static NSString *CellIdentifier = @"Cell";
//UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

NSString *identifier = nil;
NSString *task = [self.tasks objectAtIndex:indexPath.row];
NSRange urgentRange = [task rangeOfString:@"URGENT"];
if (urgentRange.location == NSNotFound)
{
    identifier = @"plainCell";
}
else 
{
    identifier = @"attentionCell";
}
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:identifier];

// Configure the cell...

UILabel *cellLabel = (UILabel *)[cell viewWithTag:1];
cellLabel.text = task;

return cell;
} 
```

该错误是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:07:21.637

看起来好像您从未创建单元格。如果您从未分配和初始化单元格，则没有可出列的单元格。在 // 配置单元格.. 行之前，您需要检查一个可重用单元格是否已出列，如果没有，请创建一个像这样的：

```
if (cell == nil) {
  cell = [[UITableViewCell alloc]  initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

  // Configure common elements here

}

  // Now go on to configure specific elements for this row 
```

当您使用情节提要时，您可能没有正确设置原型单元格属性。标识符必须与上述方法中的标识符相匹配。

请参阅此图片，了解在哪里可以找到原型单元属性[Prototype cell setup](http://d1xzuxjlafny7l.cloudfront.net/wp-content/uploads/2012/11/Prototype-cell.png)。来自本教程的内容也可能对您有所帮助[Ray Wenderlich 和 Storyboards](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T23:34:21.410

我想你的第二个原型单元必须是故事板中 tableView 的一部分，现在它只是同一场景的一部分——可能这就是你得到 nil 的原因。

无论如何尝试：

```
NSLog(@"current cell: %@ -> %@", identifier, cell); 
```

并检查`dequeueReusableCellWithIdentifier:`返回的内容。

* * *

只需拖放`attentionCell`到表格视图中 ![..](../Images/19c23410dd00756a14b17a003073318c.png)

# python - Python：确定序列中的任何项目是否等于任何其他项目

> ID：11728662
> 
> 赞同：9
> 
> 时间：2012-07-30T19:56:53.147
> 
> 标签：python, comparison

我想比较多个对象并`True`仅在所有对象之间不相等时才返回。我尝试使用下面的代码，但它不起作用。如果 obj1 和 obj3 相等且 obj2 和 obj3 不相等，则结果为`True`。

```
obj1 != obj2 != obj3 
```

我有超过 3 个对象要比较。使用下面的代码是没有问题的：

```
all([obj1 != obj2, obj1 != obj3, obj2 != obj3]) 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-30T20:01:24.720

如果对象都是可散列的，@Michael Hoffman 的回答很好。如果没有，您可以使用[itertools.combinations](http://docs.python.org/library/itertools.html#itertools.combinations)：

```
>>> all(a != b for a, b in itertools.combinations(['a', 'b', 'c', 'd', 'a'], 2))
False
>>> all(a != b for a, b in itertools.combinations(['a', 'b', 'c', 'd'], 2))
True 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-30T19:59:23.600

如果对象都是可哈希的，那么您可以查看`frozenset`对象序列的 a 是否与序列本身具有相同的长度：

```
def all_different(objs):
    return len(frozenset(objs)) == len(objs) 
```

例子：

```
>>> all_different([3, 4, 5])
True
>>> all_different([3, 4, 5, 3])
False 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-30T21:02:05.487

如果对象是不可散列但可排序的（例如，列表），那么您可以`itertools`通过排序将解决方案从 O(n^2) 转换为 O(n log n)：

```
def all_different(*objs):
    s = sorted(objs)
    return all(x != y for x, y in zip(s[:-1], s[1:])) 
```

这是一个完整的实现：

```
def all_different(*objs):
    try:
        return len(frozenset(objs)) == len(objs)
    except TypeError:
        try:
            s = sorted(objs)
            return all(x != y for x, y in zip(s[:-1], s[1:]))
        except TypeError:
            return all(x != y for x, y in itertools.combinations(objs, 2)) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-30T20:02:51.977

```
from itertools import combinations
all(x != y for x, y in combinations(objs, 2)) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-30T20:00:24.130

您可以通过将列表转换为集合来检查列表中的所有项目是否唯一。

```
my_obs = [obj1, obj2, obj3]
all_not_equal = len(set(my_obs)) == len(my_obs) 
```

# asp.net-mvc - ASP.NET MVC、NHibernate 会话和 NHibernate 事件

> ID：11728663
> 
> 赞同：0
> 
> 时间：2012-07-30T19:56:55.923
> 
> 标签：asp.net-mvc, nhibernate, httpmodule

我在 ASP.NET MVC3 项目中使用（流利的）NHibernate。我正在使用通过实现自定义 HttpModule 为每个请求打开一个 NHibernate 会话的标准方法。会话在 BeginRequest 中打开并在 EndRequest 中关闭。

我正在连接 Pre/Post Insert/Update 事件来为我的实体编写历史日志。当我尝试将实体保存在这些事件处理程序中时，就会出现问题。似乎 EndRequest 已经在这些事件处理程序之前被调用，因此 NHibernate 会话已经关闭。

如何延迟会话的关闭以便保存历史实体？我已经查看了[rhino commons](http://ayende.com/wiki/HttpModules.ashx)上的一些 HttpModules ，但对于我的情况来说，这似乎有点矫枉过正。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T04:33:13.757

您可能想查看 Ayende 的[这篇文章](http://ayende.com/blog/3987/nhibernate-ipreupdateeventlistener-ipreinserteventlistener)。相信您会在 Revin Hart 的评论中找到答案。Ayende 和 Revin 谈到让子会话来处理保存更改日志实体。

```
ISession newSession = ev.Source.PersistenceContext.Session.GetSession();

foreach (ScheduleChangeLog changeLog in logs)
{
    changeLog.UpdatedBy = Username;
    newSession.Save(changeLog);
} 
```

# php - xmlrpc 使用 php 调用不受支持的方法

> ID：11728665
> 
> 赞同：0
> 
> 时间：2012-07-30T19:57:00.137
> 
> 标签：php, xmlhttprequest, xml-rpc

我在 somefile.ashx 的远程 IIS 服务器上有一个方法，我尝试调用的方法之一是“UserLogInReq”。

UserLogInReq 具有以下成员：

字符串：用户名
字符串：密码
字符串：ClientType

到目前为止，这是我的脚本：

```
$request = xmlrpc_encode_request('UserLogInReq', array("UserName" => '$username',"Password" =>'$password',"ClientType" => ''));

$context = stream_context_create(array('http' => array(
'method' => "POST",
'header' => "Content-Type: text/xml",
'content' => $request
)));

$file = file_get_contents("http://someserver/somepage.ashx", false, $context);

$response = xmlrpc_decode($file);

if ($response && xmlrpc_is_fault($response)) {
  trigger_error("xmlrpc: $response[faultString] ($response[faultCode])");
} else {
  print_r($response);
} 
```

当我导航到我的 web 服务页面时，在 somepage.ashx 中，列出了此方法以及所有这些成员。但是，当我运行此脚本时，我得到：

```
Notice: unsupported method called: UserLogInReq (0) 
```

我能找到的所有帮助都与通用 xml-rpc 连接/调用无关。

这是网络服务的权限问题吗？我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:53:19.183

这最终成为我的一个误解。XML-RPC requriers structs，相当于 php 中的嵌套数组。我只需要在 php 数组上降低几个级别。

# php - 如何生成随机范围以从 mysql 数据库中获取字段，给定记录数和范围限制

> ID：11728667
> 
> 赞同：0
> 
> 时间：2012-07-30T19:57:13.117
> 
> 标签：php, mysql, function

有一段时间没有编程了，我遇到了这个简单的问题，基本上我需要生成两个随机数，它们在最大限制内，但彼此之间有一定的距离，以便随机（每次）调用字段使用 mysql LIMIT 的数据库。

前任。假设有 95 个数据库字段 ($max)，返回的字段 = 20 ($fields)（应返回的字段数）或范围限制 20（即 min - max 之间的差异为 20）

```
SELECT...............  LIMIT $a, $fields
$a - $b = 20
$b < 95 
```

我只是用...

```
 $a = floor(mt_rand(0, ($max-$fields))); 
```

生成一个 $a 并使用 $fields 值，它为我提供了我需要的所有信息（即从哪里开始获取记录 ($a) 以及要获取多少记录 ($fields)）

关于如何做到这一点的另一种方式的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:02:02.910

如果您的表总是大于两个随机数的所需距离，您可以像这样进行：

```
// $row_count is the number of rows you have in the database 
$max = mt_rand($distance, $row_count);
$min = $max - $distance;
// now you can use these in sql like
$sql = "select ... offset {$min} limit {$distance}"; 
```

参考：[mt_rand](http://php.net/manual/en/function.mt-rand.php)

# wordpress - wordpress theme doesn't appear

> ID：11728674
> 
> 赞同：2
> 
> 时间：2012-07-30T19:57:24.043
> 
> 标签：wordpress, themes

I'm having a very basic problem: I'm trying to create a new theme for a wordpress installation locally on my computer.

I've created a styles.css and index.php file and put it in a folder in wp-content/themes. But it doesn't appear in the Wordpress themes page.

As a test, I made a change to the description of one of the existing themes (Twenty-Ten) in its style.css, and refresh the Wordpress themes page, but the old description continues to be shown. This suggests to me that I'm simply using the wrong folder, but that's not possible! Any ideas on this problem much appreciated.

UPDATE: In fact, even when I delete Twenty Ten from the Themes folder, it's still available as an option in the Wordpress backend, and I can activate it... Very strange...

G

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:21:25.210

I agree with your diagnosis. You are either looking at the wrong folder or in fact the wrong computer. There's no other way that you could change the theme to one that has been deleted.

I suggest that you confirm you are in the same universe you think you are in. Create a simple file localserver.txt in your WordPress directory and then confirm that you can access that file.

If you can't, you have your answer. You are somehow accessing a different location.

If you can access that text file, you need to go further and look to see if something like the site url setting is redirecting you to the live site, without you realizing it, when you access wp-admin.

Beyond that, I'd need to know more about your setup. Something like having www.example.com in your /etc/host file and not example.com can cause similar confusion...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T17:38:02.340

Are you using Wordpress Multisite? In that case you have to 'enable' that theme in the Network admin manager

# android - 如何杀死Android上的计时器？

> ID：11728676
> 
> 赞同：-2
> 
> 时间：2012-07-30T19:57:27.750
> 
> 标签：android, android-activity, timer, dialog

在一项活动中，我有 60 秒的倒数计时器，它会打开一个包含信息的对话框。我把它当作假会话。如何停止计时器，我在结束时间之前将时间传递给下一个活动，但出现有关对话框的错误。

我收到以下错误：

> 07-31 01:12:22.199: E/AndroidRuntime(1623): android.view.WindowManager$BadTokenException: 无法添加窗口——令牌 android.os.BinderProxy@41175260 无效；您的活动正在运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:51:41.087

这可能是因为您在 Activity 中打开了一个不再存在的对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:59:32.560

如果您使用的是[CountDownTimer](http://developer.android.com/reference/android/os/CountDownTimer.html)则有[cancel()](http://developer.android.com/reference/android/os/CountDownTimer.html#cancel%28%29)方法

# mongodb - 游标数据的操作

> ID：11728677
> 
> 赞同：0
> 
> 时间：2012-07-30T19:57:31.633
> 
> 标签：mongodb, php-5.3

我的 jason 对象现在有这些数据

```
{"":{"gid":102,
"names":{"firstName":"Stive",
"middleInitial":"Jr",
"lastName":"Martin"},
"job":{"departmentID":102,
"jobTitleID":100,
"hireDate":"1/02/2000",
"terminationDate":"1/12/2007"}, 
 "beeper":"5656",
 "email1":"info@soft-amis.com",
 "fax":"21-321-23223",
 "phoneMobile":"32-434-3433",
"phoneOffice":"82-900-8993"},
"login":{"employeeID":"eID102",
"password":"password",
"superUser":true,
"lastLoginDate":"1/12/2007",
"regexp":{},
 "date":{}},
"comment":{"PCDATA":"comment"},
"roles":[{"role":102},
{"role":103}]}} 
```

我想删除前 4 个字符，即**{"":**和最后一个字符**}**

有人可以帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:31:21.943

您将需要执行更新以指定每个字段是顶级字段并且不包含在嵌入文档中。

示例输入文档：

```
 {"":
       {
        "gid":102,
        "names":{"firstName":"Stive"}
       }
 } 
```

更新命令

```
db.collection.update({".gid":102},{gid:102, names: {firstName:"Stive"}}) 
```

[http://www.mongodb.org/display/DOCS/Updating/](http://www.mongodb.org/display/DOCS/Updating/)

# c# - 使用未定义标签的网页抓取

> ID：11728682
> 
> 赞同：0
> 
> 时间：2012-07-30T19:58:12.123
> 
> 标签：c#, web-scraping

**我正在尝试开发一种工具来进行一些网络抓取，我之前已经为使用HTML Agility Pack**的特定网站做过这个，但在这种情况下，我希望用户能够通过选择指定他想要抓取的信息网站上的文字。

我不知道的是，如果用户选择“产品 1”，我是否可以获取 HTML 标签或其他内容，以便我可以提供算法，以便在整个文档上搜索相同类型的标签？

**产品一**

产品描述

价格 $0.00

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T22:28:23.223

似乎您想通过特定标签查询您的 DOM，类似于 jquery 选择器。看看下面的项目，它可能就是你要找的。

[https://github.com/jamietre/csquery](https://github.com/jamietre/csquery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T04:19:05.860

将 HTML 加载到 HtmlDocument 对象中，然后选择出现文本输入的第一个节点。该节点具有您可能需要的一切：

```
 var doc = new HtmlDocument();
    string input = "Product 1";
    doc.LoadHtml("Your HTML here"); //Or doc.Load(), depends on how you're getting your HTML

    HtmlNode selectedNode = doc.DocumentNode.SelectSingleNode(string.Format("//*[contains(text(),'{0}')]", input));

    var tagName = selectedNode.Name;
    var tagClass = selectedNode.Attributes["class"].Value;
    //etc 
```

当然，这一切都取决于实际的页面结构，“产品 1”是否显示在其他任何地方，页面中的其他元素是否也使用包含“产品 1”的同一节点等。

# mysql - 如何将 varchar 字段作为数字排序？

> ID：11728683
> 
> 赞同：20
> 
> 时间：2012-07-30T19:58:14.113
> 
> 标签：mysql, sql

我对排序/排序有问题，不能像我需要的那样工作。

```
SELECT `proc` FROM `table` ORDER BY `proc` DESC; 
```

结果：

```
80.0 proc
70.0 proc
60.0 proc
50.0 proc
40.0 proc
200.0 proc
20.0 proc
190.0 proc
180.0 proc
170.0 proc
160.0 proc
150.0 proc
140.0 proc
130.0 proc
120.0 proc
110.0 proc
100.0 proc 
```

我需要的是：

```
200.0 proc
190.0 proc
180.0 proc
170.0 proc
160.0 proc
150.0 proc
140.0 proc
130.0 proc
120.0 proc
110.0 proc
100.0 proc
90.0 proc
80.0 proc
70.0 proc
60.0 proc
50.0 proc
40.0 proc
20.0 proc 
```

怎么做 ？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-30T20:02:55.673

看起来“proc”是一个字符串（`varchar`字段），所以它是按词法排序的。如果是这样，您可能可以通过以下方式订购

```
SELECT `proc` FROM `table` ORDER BY convert(`proc`, decimal) DESC; 
```

请注意，这样的查询会非常慢，对于任何严重的使用，最好使用数字列来存储数字数据。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-30T20:01:32.050

proc 的列字段是一个 VARCHAR 或 CHAR 并且它把它当作一个文字字符串——按字母顺序排序。

将列转换为 double 或 float 或强制转换值

```
SELECT `proc` FROM `table` ORDER BY CAST(`proc` AS decimal) DESC; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T20:11:08.950

你的桌子设计有一些根本性的问题。而不是使用列`'80.0 proc'`中的值`VARCHAR`，您应该只保留`80.0`一列类型`REAL`（或任何适合您的数据的合适的数字类型）。您可以进行动态转换，仅在`ORDER BY`表达式中使用，但这也可能会降低查询的性能。

~~在此处将“ *proc* ”添加到您的文本中似乎没有用，它还会阻止您进行简单的转换。~~

令人惊讶的是（见*che*的回答），显然，`convert(..., decimal)`能够忽略尾随的垃圾。不过，这不是您通常应该依赖的东西。

[关于转换这方面的文档](http://dev.mysql.com/doc/refman/5.5/en/type-conversion.html)不是特别清楚。值得阅读该部分以了解字符串/数字的限制（通常会发生），例如：

> ```
> mysql> SELECT '18015376320243459' = 18015376320243459;
>         -> 0 
> ```

* * *

如果这种行为发生了变化，您可能可以`replace()`在这种情况下使用，只是为了摆脱`' proc'`.

对于更复杂的事情，您可能会使用正则表达式替换从字符串中提取数值并在排序之前将其转换为数字，但这[在 MySQL 中不支持开箱即用](https://stackoverflow.com/q/986826/372643)，无论如何这将相当笨重（修复问题的根源：您的列数据类型）。

要处理您的遗留数据，您可以添加一个额外的列并使用外部程序（使用任何能够进行正则表达式替换的语言），这应该不会太难。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-03T08:57:50.980

如果你总是有相同的小数点数，我的方法是：

```
SELECT `proc` FROM `table` ORDER BY LENGTH(proc) DESC, proc DESC; 
```

# javascript - jQuery隐藏/显示问题

> ID：11728688
> 
> 赞同：0
> 
> 时间：2012-07-30T19:58:48.497
> 
> 标签：javascript, html

我在展示汽车时遇到问题，我希望用户能够更改汽车和轮辋的颜色。

```
 <script type="text/javascript">
            function showImage(image){
              var mainImage = document.getElementById('mainImage');
              mainImage.src = image; 
            }
            function toggleThumbnails(){
              var thumbnails = document.getElementById('color-options');
              if(thumbnails.style.display == 'block'){
                thumbnails.style.display = 'none'; 
              } else {
                thumbnails.style.display = 'block'; 
              }
            }

                function showImage(image){
              var mainImage = document.getElementById('mainwheelImage');
              mainImage.src = image; 
            }
            function toggleThumbnails(){
              var thumbnails = document.getElementById('wheel-options');
              if(thumbnails.style.display == 'block'){
                thumbnails.style.display = 'none'; 
              } else {
                thumbnails.style.display = 'block'; 
              }
            }
        </script>

<section id="footer-wrapper">
                <!-- Color Selector -->
                <div id="color-options">
                    <h1>Colors</h1>
                    <div class="color-container">
                        <div class="color-center">
                            <span><img src="img/colors/black.png" onclick="showImage('img/colors/cars/black.png')" /></span>
                            <span><img src="img/colors/white.png" onclick="showImage('img/colors/cars/white.png')" /></span>
                            <span><img src="img/colors/red.png" onclick="showImage('img/colors/cars/red.png')" /></span>
                            <span><img src="img/colors/silver.png" onclick="showImage('img/colors/cars/silver.png')" /></span>
                            <span><img src="img/colors/metalic_black.png" onclick="showImage('img/colors/cars/metalic_black.png')" /></span>
                            <span><img src="img/colors/metalic_grey.png" onclick="showImage('img/colors/cars/metalic_grey.png')" /></span>
                        </div>
                    </div>
                </div>
                <!-- /Color Selector -->
                <div class="divider"></div>
                <!-- Wheels Selector -->
                <div id="wheel-options">
                    <h1>Wheels</h1>
                    <div class="wheel-container">
                        <div class="wheel-center">
                            <span><img src="img/wheels/17.jpg" onclick="showImage('img/wheels/cars_overlay/17.png')" /></span>
                            <span><img src="img/wheels/18.jpg" onclick="showImage('img/wheels/cars_overlay/18_regular.png')"  /></span>
                            <span><img src="img/wheels/18_twin.jpg" onclick="showImage('img/wheels/cars_overlay/18_twin.png')" /></span>
                            <span><img src="img/wheels/18_twin_7spoke.jpg" /></span>
                        </div>
                    </div>
                </div>
                <!-- /Wheels Selector --> 
```

这样就可以切换汽车和轮辋的颜色。但是，如果我选择一种颜色，那么当我选择一个轮辋时，颜色会默认恢复为原始图像。选择轮辋时有什么方法可以保持选择的颜色吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:10:18.893

您为不同的功能使用了两次相同的功能名称，并混淆了浏览器。尝试将函数名称更改为：

```
function changeColor()
function toggleColorThumbnails() 
```

和

```
function changeRim()
function toggleRimThumbnails() 
```

# javascript - 如何通过 if/else 语句定位 div 的 x 坐标？

> ID：11728691
> 
> 赞同：0
> 
> 时间：2012-07-30T19:58:56.453
> 
> 标签：javascript, jquery, if-statement, statements

使用 if 语句时如何定位 div 的 X 坐标？

我想要做的是让一个 div 在屏幕上设置动画，但我只希望它在满足某些 x 坐标时移动，因此为什么使用 if/else 语句。

例如;

```
var firstXPos = -20px;
var secondXPos = -40px;
var thridXPos = -60px;

if (div's x pos?? == firstXPos){
$("#id").animate({"left" : secondXPos}, "slow");
} else (div's x pos?? == secondXPos?){
$("#id").animate({"left" : thridXPos}, "slow");
} 
```

那么如何编写代码，使其可以针对 div 当前的 x 位置，从而满足 if / else 语句呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:03:51.510

我使用以下代码使用 x 和 y 坐标检查项目的可见性

```
isVisible: function (node, doc, x, y) {
    var el = doc.elementFromPoint(x, y);
    if (node === el) return true;
    else return false;
} 
```

所以在你的 if 语句中，你可以使用上面的函数来检查它是否在那个位置

# linux - 使用 ssh 启用无密码身份验证

> ID：11728697
> 
> 赞同：0
> 
> 时间：2012-07-30T19:59:07.967
> 
> 标签：linux, authentication, ssh, public-key-encryption

如何使用 SSH 启用无密码身份验证。

这是我在寻找 /.ssh 文件夹时所拥有的。

```
bash-3.00$ cd ~/.ssh
bash-3.00$ pwd
/home/uname/.ssh
bash-3.00$ ls -lt
total 2
-rw-r--r--   1 uname   gid-uname     489 Jul 26 18:55 known_hosts 
```

我不知道接下来我要在这里做什么？我需要更改`known_hosts`文件夹的权限吗？或者是其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-28T05:11:43.380

要在远程和本地机器之间启用无密码 ssh，您必须在本地机器上执行以下步骤：-

第一步> root@localmachine:~> ssh-keygen -t rsa

注意 - 考虑到远程机器中已经存在 .ssh 目录，如果没有，那么执行此操作（ssh root@remotemachine mkdir -p .ssh）

第二步> cat .ssh/id_rsa.pub | ssh root@remotemachine 'cat >> .ssh/authorized_keys'

第三步> root@localmachine:~> ssh root@remotemachine

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T20:41:19.073

将您的公钥添加到名为`authorized_keys`.

确保没有设置 no`group`和`other`权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T21:10:15.770

[http://stromberg.dnsalias.org/~strombrg/ssh-keys.html](http://stromberg.dnsalias.org/~strombrg/ssh-keys.html)

高温高压

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T21:34:00.970

*   使用生成密钥`ssh-keygen`
*   使用 . 将您的 SSH 身份复制到主机（您需要无密码登录）`ssh-copy-id`。

`man ssh-keygen`并`man ssh-copy-id`在您的系统上寻求帮助。

# node.js - 在heroku上安装node-qrcode

> ID：11728698
> 
> 赞同：5
> 
> 时间：2012-07-30T19:59:12.717
> 
> 标签：node.js, heroku

我在heroku上安装这个包时遇到了问题。有没有办法做到这一点？

我看到这是画布模块的问题，但我不知道该怎么办。

这是heroku上的安装日志。我不知道如何获得更多：

```
npm ERR! canvas@0.12.1 preinstall: `node-waf configure build`
       npm ERR! `sh "-c" "node-waf configure build"` failed with 1
       npm ERR! 
       npm ERR! Failed at the canvas@0.12.1 preinstall script.
       npm ERR! This is most likely a problem with the canvas package,
       npm ERR! not with npm itself.
       npm ERR! Tell the author that this fails on your system:
       npm ERR!     node-waf configure build
       npm ERR! You can get their info via:
       npm ERR!     npm owner ls canvas
       npm ERR! There is likely additional logging output above.

       npm ERR! System Linux 2.6.32-343-ec2
       npm ERR! command "/tmp/node-node-La1F/bin/node" "/tmp/node-npm-6Xts/cli.js" "install" "--production"
       npm ERR! cwd /tmp/build_3ejt8evom1p0g
       npm ERR! node -v v0.6.18
       npm ERR! npm -v 1.1.41
       npm ERR! code ELIFECYCLE
       npm ERR! stack Error: canvas@0.12.1 preinstall: `node-waf configure build`
       npm ERR! stack `sh "-c" "node-waf configure build"` failed with 1
       npm ERR! stack     at ChildProcess.<anonymous> (/tmp/node-npm-6Xts/lib/utils/exec.js:56:20)
       npm ERR! stack     at ChildProcess.emit (events.js:70:17)
       npm ERR! stack     at maybeExit (child_process.js:362:16)
       npm ERR! stack     at Process.onexit (child_process.js:398:5) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-01T19:30:49.147

我成功使用了这个 Heroku 构建包： [https ://elements.heroku.com/buildpacks/mojodna/heroku-buildpack-cairo](https://elements.heroku.com/buildpacks/mojodna/heroku-buildpack-cairo)

但是在它的自述文件中，它告诉你使用*heroku-buildpack-multi*，这已经被弃用了。我所做的是，在命令行中使用 Heroku Toolbelt：

> heroku buildpacks:set --index 1 [https://github.com/mojodna/heroku-buildpack-cairo.git](https://github.com/mojodna/heroku-buildpack-cairo.git)
> 
> heroku buildpacks：添加 heroku/nodejs

然后推送到 Heroku，以便它可以再次构建包。

# android - .mov 文件将在浏览器中播放，但不会在本机 MediaPlayer 应用程序中播放

> ID：11728699
> 
> 赞同：1
> 
> 时间：2012-07-30T19:59:20.010
> 
> 标签：android, video, webview, media-player, mov

我正在启动 MediaPlayer 来播放一个 .mov 文件，该文件作为 Uri（这是标准的）传递到 MediaPlayer 中。但是，它告诉我它无法播放该文件。但是，如果我将相同的链接放在网络上，然后单击该链接以启动电影（在我的 Android 浏览器中），则视频播放没有问题。但是，尽管我付出了所有努力，但仍无法让 WebView 使用 Video 标签播放它。

所以这是我的问题，是什么魔力允许一个 android 浏览器应用程序获取一个 .html url，其中包含一个播放视频的链接并播放它？如果我在 WebView 中加载相同的 url，或者尝试将视频 url 传递到媒体播放器，那就不行了。视频格式为.mov。

在此先感谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:17:21.197

Android 浏览器和 WebView 非常不同，WebView 非常简单，因为它旨在让人们使用它来显示非常基本的 html 网页。WebView 默认没有启用插件，没有启用 javascript 等等。永远不要期望，因为某些东西在浏览器中可以在 WebView 中工作。

现在关于如何处理媒体。浏览器设置了额外的功能，可以从页面中剥离视频源并在大多数时间在本机播放器中启动它。此功能未内置在 WebView 中。原生播放器对于需要将什么作为 URI 传递给它才能播放它非常挑剔。

希望有帮助， Stevy888

# mysql - 在 MySQL 查询中使用 LIMIT 对结果进行分页

> ID：11728704
> 
> 赞同：7
> 
> 时间：2012-07-30T19:59:41.507
> 
> 标签：mysql, pagination, limit

我想一次获取我的结果一个“页面”；我希望页码是一个参数（在 JDBC 准备语句中）。考虑以下代码段

```
SELECT * FROM thread t ORDER BY t.id LIMIT ((? - 1) * 20), 20 
```

因此，理想情况下，对于第 1 页，这将导致`LIMIT 0, 20`.

当我测试

```
SELECT * FROM thread t ORDER BY t.id LIMIT ((1 - 1) * 20), 20 
```

我被告知我有一个语法错误。不过，我看不出它可能是什么——这只是一些简单的数学运算。它告诉我的只是

> ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '((1 - 1) * 20), 20' 附近使用正确的语法

我的`LIMIT`条款做错了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-30T20:06:37.797

这是无法做到的。

在此处查看解决方案： [MySQL Math and COUNT(*) in LIMIT](https://stackoverflow.com/questions/1396304/mysql-math-and-count-in-limit)

我建议使用 javascript 或其他东西来处理第一个参数（即偏移量），例如： `limit 0,20`在第一页和`limit 21,20`第二页...

例如，如果您的第一页在网址 www.example.com?page=1 中有一个 get 变量

```
offset = (page - 1)*20 ;
row_count = 20;
select * from table limit (offset, row_count); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-10-20T06:17:31.703

使用以下语法为查询定义偏移量

```
SELECT column FROM table 
LIMIT {someLimit} OFFSET {someOffset}; 
```

例如，要获取第 1 页（记录 1-10），请将偏移量设置为 0，将限制设置为 10；

```
SELECT column FROM table 
LIMIT 10 OFFSET 0; 
```

要获取第 2 页（记录 11-20），请将偏移量设置为 10，其中限制为 10

```
SELECT column FROM table 
LIMIT 10 OFFSET 10; 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-30T20:03:23.080

MySQL 需要该 LIMIT 语法的数字常量。

从[http://dev.mysql.com/doc/refman/5.7/en/select.html](http://dev.mysql.com/doc/refman/5.7/en/select.html)：

> LIMIT 子句可用于限制 SELECT 语句返回的行数。LIMIT 接受一个或两个数字参数，它们都必须是非负整数常量，但以下情况除外：
> 
> *   在准备好的语句中，可以使用 LIMIT 指定参数？占位符标记。
>     
>     
> *   在存储的程序中，可以使用整数值的例程参数或局部变量来指定 LIMIT 参数。

在 Java 端计算常量。

# javascript - RequireJS 和一个多语言网站

> ID：11728707
> 
> 赞同：0
> 
> 时间：2012-07-30T19:59:57.843
> 
> 标签：javascript, internationalization, requirejs

（警告：我是 require.js 的新手）

我正在使用 RequireJS 优化器将所有 require.js JS 文件合并到一个文件中，但我不知道为什么输出的 JS 文件*只*包含根包。我的 lang/nls/strings.js 文件是[http://pastie.org/private/7o6fa7sfrxvppu4lcunz0a](http://pastie.org/private/7o6fa7sfrxvppu4lcunz0a)

在运行 'node r.js' 之后，没有 'lang/nls/de/strings' 声明[http://pastie.org/private/dyktxwv4wgdywbj8mltw](http://pastie.org/private/dyktxwv4wgdywbj8mltw)，虽然我有一个 require/lang/nls/de/strings.js 文件

r.js 的构建示例[https://github.com/jrburke/r.js/blob/master/build/example.build.js](https://github.com/jrburke/r.js/blob/master/build/example.build.js)声明“只能内联一个语言环境进行构建”，但我希望有一种在优化文件中包含我的应用程序需要的所有语言字符串的方法。那么我该如何实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:31:11.503

当您阅读时，只能内联一个本地，这完全有意义，因为您不想加载所有本地，因为在大多数情况下，用户只需要一个。RequireJS 将自动检测浏览器本地的内容，并加载缺少的本地（如果存在）。如果您需要所有本地人，请不要使用 requireJS 并将它们内联为纯 JSON。

# cuda - CUDA - 为傻瓜使用 CURAND 库

> ID：11728714
> 
> 赞同：3
> 
> 时间：2012-07-30T20:00:20.417
> 
> 标签：cuda, gpu, gpgpu, prng

我正在阅读 CURAND 库 API，我是 CUDA 的新手，我想看看是否有人可以向我展示一个使用 CURAND 库生成随机数的简单代码。我正在研究生成大量用于离散事件模拟的数字。我的任务只是开发算法以使用 GPGPU 来加速随机数的生成。我已经在标准 C 语言编程中实现了 LCG、乘法和斐波那契方法。但是我想将这些代码“移植”到 CUDA 中，并利用线程和块来加速生成随机数的过程。

链接 1：[http ://adnanboz.wordpress.com/tag/nvidia-curand/](http://adnanboz.wordpress.com/tag/nvidia-curand/)

那个人有我需要的两种方法（LCG 和 Mersenne Twister），但代码没有提供太多细节。我想知道是否有人可以扩展这些初始实现，以真正为我指明如何正确使用它们的正确方向。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T09:38:22.223

您的问题具有误导性-您说“为傻瓜使用 cuRAND 库”，但您实际上并不想使用 cuRAND。如果我理解正确，您实际上想从头开始实现**自己的RNG，而不是使用 cuRAND 中可用的优化 RNG。**

1.  第一个建议是重新考虑使用自己的 RNG 的决定，为什么不使用 cuRAND？如果统计属性适合您的应用程序，那么您最好使用 cuRAND，因为它已针对所有代 GPU 进行了调整。它包括 Marsaglia 的 XORWOW、l'Ecuyer 的 MRG32k3a 和[MTGP32](http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/MTGP/index.html) Mersenne Twister（以及用于 Quasi-RNG 的 Sobol'）。
2.  您还可以查看[Thrust](http://thrust.github.com/)，它具有一些简单的 RNG，例如[Monte Carlo 示例](https://github.com/thrust/thrust/blob/master/examples/monte_carlo.cu)。
3.  如果您真的需要创建自己的生成器，那么[GPU Computing Gems](http://mkp.com/gpu-computing-gems)（翡翠版，第 16 章：随机数生成器的并行化技术）中有一些有用的技术。

作为旁注，请记住，虽然简单的 LCG 快速且易于跳过，但它们通常具有[相当差的统计特性](http://en.wikipedia.org/wiki/Linear_congruential_generator#Advantages_and_disadvantages_of_LCGs)，尤其是在使用大量平局时。当您说您将需要“Mersenne Twister”时，我假设您的意思是 MT19937。参考的 Gems 书中谈到了并行化 MT19937，但最初的开发人员创建了 MTGP 生成器（上面也提到过），因为 MT19937 实现跳过相当复杂。

另请注意，仅使用不同的种子来实现并行化通常是一个坏主意，从统计上讲，您不能保证独立性。您要么需要跳过或跳跃，要么使用其他一些技术（例如[DCMT](http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/DC/dc.html)）来确保序列之间没有相关性。

# ms-access - 搜索和替换不仅可以用空格分隔的整个单词

> ID：11728717
> 
> 赞同：3
> 
> 时间：2012-07-30T20:00:25.533
> 
> 标签：ms-access, replace, vba

我正在寻找一种搜索和替换整个单词的方法。整个单词不仅可以用空格分隔，还可以用 .,;:/? 等等

我想做这样的事情

```
replace([address], ***--list of separators, like .,;:/?--*** & [replacewhat] & ***--list of separators, like .,;:/?--*** ," " & [replacewith] & " ") 
```

我不知道如何传递分隔符列表，而不是为每个分隔符组合运行一次替换函数（与我要替换的 300 个单词相结合将构成疯狂数量的查询）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-30T21:23:54.710

您可以使用带有`\b`标记（用于单词边界）的模式在要替换的单词之前和之后使用正则表达式进行替换。

```
Public Function RegExpReplaceWord(ByVal strSource As String, _
    ByVal strFind As String, _
    ByVal strReplace As String) As String
' Purpose   : replace [strFind] with [strReplace] in [strSource]
' Comment   : [strFind] can be plain text or a regexp pattern;
'             all occurences of [strFind] are replaced
    ' early binding requires reference to Microsoft VBScript
    ' Regular Expressions:
    'Dim re As RegExp
    'Set re = New RegExp
    ' with late binding, no reference needed:
    Dim re As Object
    Set re = CreateObject("VBScript.RegExp")

    re.Global = True
    're.IgnoreCase = True ' <-- case insensitve
    re.pattern = "\b" & strFind & "\b"
    RegExpReplaceWord = re.Replace(strSource, strReplace)
    Set re = Nothing
End Function 
```

如所写，搜索区分大小写。如果您想要不区分大小写，请启用此行：

```
re.IgnoreCase = True 
```

在立即窗口中...

```
? RegExpReplaceWord("one too three", "too", "two")
one two three
? RegExpReplaceWord("one tool three", "too", "two")
one tool three
? RegExpReplaceWord("one too() three", "too", "two")
one two() three
? RegExpReplaceWord("one too three", "to", "two")
one too three
? RegExpReplaceWord("one too three", "t..", "two")
one two three 
```

...对于您的分隔符范围...

```
? RegExpReplaceWord("one.too.three", "too", "two")
one.two.three
? RegExpReplaceWord("one,too,three", "too", "two")
one,two,three
? RegExpReplaceWord("one;too;three", "too", "two")
one;two;three
? RegExpReplaceWord("one:too:three", "too", "two")
one:two:three
? RegExpReplaceWord("one/too/three", "too", "two")
one/two/three
? RegExpReplaceWord("one?too?three", "too", "two")
one?two?three
? RegExpReplaceWord("one--too--three", "too", "two")
one--two--three
? RegExpReplaceWord("one***too***three", "too", "two")
one***two***three 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-08T00:08:20.743

谢谢您的回答。这对我有很大帮助。

然而，由于我的数据量增加，这段代码的迭代次数增加了，我意识到这段代码正在减慢我的应用程序的速度。例如，此代码的 10,000 次迭代大约需要 20 秒。

我根据您的回答使用以下代码：

```
Function CleanString(ByVal InputString As String, Optional SplWords = "USP|BP|EP|IP|JP", _
                Optional Delim As String = "|") As String
Dim i As Integer
Dim ArrIsEmpty As Boolean
Dim ArrSplWords() As String
Dim Wrd As Variant
Dim RE As Object

CleanString = InputString
ArrSplWords = Split(SplWords, Delim)

Set RE = CreateObject("VBScript.RegExp")
RE.Global = True
RE.ignorecase = True
For Each Wrd In ArrSplWords
    RE.Pattern = "\b" & Wrd & "\b"
    If RE.test(CleanString) Then
        CleanString = RE.Replace(CleanString, "")
    End If
Next Wrd
CleanString = Application.WorksheetFunction.Trim(CleanString)
End Function 
```

为了解决缓慢的问题，我决定放弃 RegExp 方法并提出以下代码。根据我的评估，下面的函数大约快 25 倍（我使用定时器函数对每个代码进行了 1000 次迭代）。

```
Function CleanString(ByVal InputString As String, Optional SplWords As String = "USP|BP|EP|IP|JP", _
                Optional Delim As String = "|", Optional WordSeparator As String = " ", _
                Optional SplChar As String = "~|`|!|@|#|$|%|^|&|*|-|+|=|'|<|>|,|.|/|\|?|:|;") As String
Dim TestStr As String
Dim ArrSplChar() As String
Dim Char As Variant
Dim TestWords() As String
Dim Wrd As Variant
Dim Counter As Integer

TestStr = InputString
ArrSplChar = Split(SplChar, Delim, -1, vbTextCompare)

For Each Char In ArrSplChar
    TestStr = Replace(TestStr, Char, WordSeparator & Char & WordSeparator, 1, -1, vbTextCompare)
Next Char

TestWords = Split(TestStr, WordSeparator, -1, vbTextCompare)

For Each Wrd In TestWords
    Counter = IIf(Wrd = "", Counter + 1, Counter)
    If InStr(1, LCase(SplWords), LCase(Wrd), vbTextCompare) = 0 Then
        CleanString = CleanString & " " & Wrd
        Counter = Counter + 1
    End If
Next Wrd
CleanString = IIf(Counter - 1 = UBound(TestWords) - LBound(TestWords), _
                        Application.WorksheetFunction.Trim(InputString), _
                        Application.WorksheetFunction.Trim(CleanString))
End Function 
```

这个函数看起来比基于 regExp 的函数有点混乱，但它比基于 regExp 的函数更快。

上述两个函数都产生相同的输出，可以按如下方式调用：

```
Sub TestSub()
Debug.Print CleanString("Paracetamol USP")
End Sub 
```

这将在即时窗口中打印“扑热息痛”。

# javascript - 在 FireFox 中设置“文档”

> ID：11728718
> 
> 赞同：0
> 
> 时间：2012-07-30T20:00:26.530
> 
> 标签：javascript, firefox

较新版本的 FireFox 将不允许 javascript 修改“文档”变量。以下所有情况都将导致“访问属性‘文档’的权限被拒绝”错误：

```
document=top.document;
document=parent.document;
document=window.parent.document;
document=window.top.document; 
```

我发现自己正在寻找一种跨浏览器设置“文档”变量的解决方案。FireFox 是目前唯一不允许这样做的浏览器。这个问题有什么javascript解决方案吗？

在这种情况下，它被用作在 iframe 中显示 AdSense 广告的一种方法。谷歌授予某些公司特别许可，使其能够做到这一点。这是一些示例代码的链接：

[http://geoland.org/2007/01/adsense-in-iframe/](http://geoland.org/2007/01/adsense-in-iframe/)

在 iframe 中使用文档替换，以便与父引荐来源网址一起发送广告。这对 AdSense 很重要，否则所有收入对于不匹配的推荐人都将被视为无效。也许还有另一种在子 iframe 中使用父引用的方法？假设子 iframe 是跨域的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:20:30.093

Firefox 的行为是规范所要求的。请参阅 http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#the-window-object 上的注释`[Unforgeable]`和[http://dev.w3.org](http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#the-window-object)[上](http://dev.w3.org/2006/webapi/WebIDL/#Unforgeable)的定义[/2006/webapi/WebIDL/#Unforgeable](http://dev.w3.org/2006/webapi/WebIDL/#Unforgeable)`document``[Unforgeable]`

也就是说，adsense 如何确定“引荐来源”？您可以只修改 iframe 中文档对象的相关属性吗？

# sql - 在 CurrentAccountBalance 更新时避免 SQL 死锁

> ID：11728719
> 
> 赞同：2
> 
> 时间：2012-07-30T20:00:27.607
> 
> 标签：sql, postgresql, postgresql-9.1

我正在为一些个人项目评估 PostgreSQL。我受到它的多版本并发控制（MVCC）的启发

我模拟了一个基本需求——插入事务并同时使用许多线程执行供应商余额更新，运行如下 SQL 命令：

```
INSERT INTO 
VendorAccountTransactions (VendorId, BalanceBefore, BalanceAfter) 
VALUES (
   1, 
   (SELECT CurrentBalance FROM VendorAccounts WHERE VendorId = 1),  
   (SELECT CurrentBalance FROM VendorAccounts WHERE VendorId = 1) + 19.99
);

UPDATE VendorAccounts SET CurrentBalance = CurrentBalance + 19.99 WHERE VendorId = 1; 
```

任何想法如何在这种常见情况下避免死锁？

需要什么 - 只需使用“之前的余额”/“之后的余额”插入交易描述并更新余额。

它将用于高负载应用。如何针对这种简单的业务需求实现正确的结果？

谢谢你。

**更新：**

也许有任何其他解决方案来重新设计数据库以避免死锁或使用其他解决方案来解决业务需求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:56:46.573

将更新放在首位，并将两个语句都包含在事务中。更新将更新供应商行并阻止并发事务进入事务（他们将等到第一个 tran 完成，因为 updlock 不可用）。

这将有效地序列化对给定供应商的访问，从而确保一致性。

# c# - 如何全局处理“参数字典包含参数 x 的空条目”

> ID：11728721
> 
> 赞同：1
> 
> 时间：2012-07-30T20:00:44.520
> 
> 标签：c#, asp.net-mvc

我想知道全局处理“参数字典包含参数 x 的空条目”错误的最佳方法。

我意识到我总是可以将参数设置为`nullable type`并使用它们的`HasValue`属性来测试它们。

我宁愿找到更通用的方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:14:06.077

这不完全是一种全局方法，但是如果您的操作参数具有合理的默认值，为什么不尝试将它们设为可选参数呢？例如 ：

```
public ActionResult Index(int id = 0, string name = "user") { ... } 
```

# android - 需要从警报向数组列表添加一个值

> ID：11728722
> 
> 赞同：0
> 
> 时间：2012-07-30T20:00:47.377
> 
> 标签：android, alert, android-alertdialog

如果你看看我的代码。我希望在 ListActivity 中按下按钮时显示警报，在本例中为位置 0。当按下按钮时，我希望显示允许用户创建新类别的警报。我需要获取用户想要的字符串作为类别并将其添加到数组列表中。请帮助我已经尝试了几个小时T_T

```
 public class Data extends ListActivity {
ArrayList<String> items = new ArrayList<String>();
private Context show;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    items.add("+ Create New");
    setListAdapter(new ArrayAdapter<String>(Data.this,
            android.R.layout.simple_list_item_1, items));

}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
    if (position == 0) {
        items.add(getText());

    }

protected void getText() {

    AlertDialog.Builder alert = new AlertDialog.Builder(this);

    alert.setTitle("Title");
    // Set an EditText view to get user input
    final EditText input = new EditText(this);
    alert.setView(input);

    alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
            Editable value = input.getText();

            // Need to add value to arraylist!
        }
    });
    alert.setNegativeButton("Cancel",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                    // Canceled.
                }
            });

    alert.show();
} 
```

}

……

我想到了。

```
protected void setCategory() {
    AlertDialog.Builder alert = new AlertDialog.Builder(this); 
    alert.setTitle("New Category"); 
    // Set an EditText view to get user input
    final EditText input = new EditText(this);
    alert.setView(input);

    alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
        //create a button that says ok, and can be pressed
        public void onClick(DialogInterface dialog, int whichButton) {
            Editable value = input.getText();
            getValue(value);
            //getValue() allows the string to be taken out of this method
            items.add(output);//put the string into the global variable
   /*
     * I dont understand why this way works over making "value" a string and             then             adding it
     * as the global variable.
     */
        }
    });
    alert.setNegativeButton("Cancel",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                    //do nothing
                }
            });
    alert.show();
}
protected void getValue(Editable theInput) {
    String input = theInput.toString();
    output = input;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:16:32.090

```
private ArrayAdapter<String> adapter;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    items.add("+ Create New");
    adapter = new ArrayAdapter<String>(Data.this,
            android.R.layout.simple_list_item_1, items)
    setListAdapter(adapter);

}

alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
        String inputText = input.getText().toString()
        adapter.add(inputText);
        /* if need add to items
        items.add(inputText);
        */
        }
}); 
```

# c# - 通过元素列表计数查找方阵大小

> ID：11728723
> 
> 赞同：0
> 
> 时间：2012-07-30T20:00:51.040
> 
> 标签：c#

嗨，我需要通过计算数组中的元素来计算矩阵大小，例如，如果我在列表中有 25 个元素，我需要得到列 = 5 和矩阵中的第 5 行，如果 26 个元素 5 列 6 行等。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:08:13.983

我不知道您的确切要求是什么，但是如果您想生成一个不浪费太多空间的近方矩阵，

```
int x = Math.Floor(Math.Sqrt(num_elems));
int y;
if (x*x == num_elems)
{
    y = x;
} else {
    y = x+1;
    if (x*y < num_elems)
    {
        ++x;
    }
} 
```

产生最小矩阵的维度，其行数和列数最多相差一个，可以容纳`num_elems`元素.

# jboss-arquillian - arquillian-glassfish-embedded-3.1 1.0.0.CR3 配置 JDBC 数据源

> ID：11728724
> 
> 赞同：1
> 
> 时间：2012-07-30T20:00:52.193
> 
> 标签：jboss-arquillian

我试图使用 arquillian-glassfish-embedded-3.1 容器来测试和 EJB3 应用程序。我试图弄清楚如何设置一个简单的 JDBC 数据源，该数据源可以作为资源注入到无状态 ejb。

这是我所拥有的：

```
@Stateless
 public class HelloEJBBean implements HelloEJB {

      @Resource(name="myDataSource")
      private DataSource datasource;

      public String sayHelloEJB(String name) {
                return "Hello " + name;
      }
} 
```

还有 arquillian.xml 包含以下内容：

```
<?xml version="1.0"?>
<arquillian xmlns="http://jboss.com/arquillian"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:glassfish="urn:arq:org.jboss.arquillian.container.glassfish.embedded_3">
   <glassfish:container>
      <glassfish:bindHttpPort>9090</glassfish:bindHttpPort>
      <glassfish:instanceRoot>src/test/resources</glassfish:instanceRoot>
      <glassfish:autoDelete>false</glassfish:autoDelete>
   </glassfish:container>
</arquillian> 
```

和一个 domain.xml

```
<domain>
   <applications />
   <resources>
      <jdbc-resource pool-name="ArquillianEmbeddedOraclePool" jndi-name="myDataSource"
         object-type="user" enabled="true"/>

     <jdbc-connection-pool name="ArquillianEmbeddedOraclePool" res-type="javax.sql.DataSource"
        datasource-classname="oracle.jdbc.driver.OracleDriver">
        <property name="user" value="user"/>
        <property name="password" value="password"/>
        <property name="serverName" value="servername"/>
         <property name="DatabaseName" value="dbname"/>
        <property name="url" value="jdbc:oracle:thin:@servername:1521/dbname"/>
    </jdbc-connection-pool>
   </resources>
</domain> 
```

简单的测试如下所示：

```
@RunWith(Arquillian.class)
public class HelloEJBTest {

    @Deployment
    public static JavaArchive createTestArchive() {
        return ShrinkWrap.create(JavaArchive.class, "helloEJB.jar")
                .addClasses(HelloEJB.class, HelloEJBBean.class);
    }

    @EJB
    private HelloEJB helloEJB;

    @Test
    public void testHelloEJB() {
        String result = helloEJB.sayHelloEJB("Michael");
        assertEquals("Hello Michael", result);

    }
} 
```

我收到以下错误：

... 108 更多原因：com.sun.enterprise.container.common.spi.util.InjectionException：尝试注入 Res-Ref-Env-Property 的异常：myDataSource@javax.sql.DataSource@ 解析为：jndi：myDataSource @res 主体：null@mail：null 无运行时属性

... 108 更多原因：com.sun.enterprise.container.common.spi.util.InjectionException：尝试注入 Res-Ref-Env-Property 的异常：myDataSource@javax.sql.DataSource@ 解析为：jndi：myDataSource @res 主体：null@mail：null 无运行时属性

任何帮助表示赞赏。

谢谢

# asp.net - 表单身份验证未正确验证用户

> ID：11728726
> 
> 赞同：5
> 
> 时间：2012-07-30T20:00:58.560
> 
> 标签：asp.net, vb.net, forms-authentication

我在登录 User 时有此代码，该字符串 sUserData 已正确设置。

```
 Dim sUserData As String = HttpContext.Current.Request.Cookies("UserID").Value & "|" & HttpContext.Current.Request.Cookies("UserName").Value & "|" & HttpContext.Current.Request.Cookies("UserEmail").Value

  Dim fat As FormsAuthenticationTicket = New FormsAuthenticationTicket(1, _
     HttpContext.Current.Session("UserID"), DateTime.Now, _
     DateTime.Now.AddDays(6), True, sUserData, _
     FormsAuthentication.FormsCookiePath)
  HttpContext.Current.Response.Cookies.Add(New HttpCookie(FormsAuthentication.FormsCookieName, FormsAuthentication.Encrypt(fat))) 
```

然后我有代码检查用户是否在公共类中的共享（静态）方法中登录，如下所示：

```
 If HttpContext.Current.User.Identity.IsAuthenticated Then
 EndIf 
```

这很好用，但是如果我将同一行放在 Page_load 而不是类的共享方法中，它将永远不会进入这个 If 语句

```
 If HttpContext.Current.User.Identity.IsAuthenticated Then
  EndIf 
```

为什么会发生这种情况，是否有某种方法可以重新编写它以在代码隐藏的 Page_Load 中工作，而不必将其放在一个类中，该类用于标题中以允许访问某些页面 - 这样就可以了美好的。但是我需要另一种在默认页面上对用户进行身份验证的方式来根据用户是否登录的天气更改标签和按钮，而这不能在课堂上完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:38:24.847

您是否尝试过将页面事件覆盖放入实际的页面事件覆盖（即 OnLoad）而不是 Page_Load 事件挂钩实现中？更高的性能（更少的调用层），生命周期的细微差别可能适合您的需求，并可能提炼出这些症状的原因。

如果静态方法调用和 Page_Load 的上下文*可能*存在排序问题/竞争条件，我认为 Wiktor Zychla 已经为您指出了提琴手的方向。

# dos - 反编译 16 位 dos 应用程序

> ID：11728730
> 
> 赞同：5
> 
> 时间：2012-07-30T20:01:18.557
> 
> 标签：dos, decompiling, disassembly, 16-bit

我有一个大约 15 年前购买的非常古老的应用程序，它包含 5 个用于存储患者资料和信息的 .exe 文件。问题是这个应用程序被编程为在特定的计算机上工作。
而且因为我对破解知之甚少，我尝试使用 win32dasm 对其进行反汇编，但没有关于字符串引用的信息，尝试 Hiew 用 JNE 替换 JE，经过多次尝试，其中一个可执行文件有效，但我未能修补其它文件。
有什么办法可以找到确切的跳转并修补它吗？
谢谢 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-31T04:28:48.820

是的，有办法，*总是*有办法的。如果您可以运行代码，则可以对其进行修改。

但是，如果它被许可在特定计算机上运行，​​您实际上可能没有在另一台计算机上使用它的合法*权利。*你应该做的第一件事是弄清楚你正在尝试的合法性。

话虽如此，我过去曾使用 OllyDbg 来完成此类工作。这不是恶意的，只是代码在具有大量内存的机器上失败了——结果证明它使用了有符号的比较指令而不是无符号的比较指令。

基本的想法是当你在故障机器上运行它时记录字符串输出，然后在内存中定位该字符串并观察任何引用它的代码。然后，您应该能够从那里回溯以找到将您带到那里的条件跳转并对其进行修补以使其不会（例如，用字节替换整个`jCC`指令。`nop`

但是，我强调这一点，这将需要一些调查，这不是你可以通过按下按钮并让计算机解决的事情。您可能必须深入研究程序集才能了解它是如何工作的。

# html - 网站在 Firefox 中不显示，但在所有其他浏览器中都可以

> ID：11728733
> 
> 赞同：-5
> 
> 时间：2012-07-30T20:01:23.610
> 
> 标签：html, css, firefox, internet-explorer-9

由于某种原因，我的网页在 Firefox 中无法正确显示。在 IE9、Safari、chrome 中正确显示。

在 Firefox 中，如果我缩小或布局更改。但随后 YouTube 视频开始涂抹和像素化。我让一个朋友在他们的计算机上检查 Firefox，同样的事情发生了。

[http://www.streetstyles4all.co.uk/images/screen_shot.jpg](http://wwww.streetstyles4all.co.uk/images/screen_shot.jpg)

左上角的屏幕截图显示了页面的加载方式。放大或缩小后显示右上角，上下滚动后显示左下角。

HTML：

有问题的部分的 HTML 是：

```
 <div id="homewallcontainer">

                <div id="homesidenavcontainer">

                <script type="text/javascript" src="http://forms.aweber.com/form/23/850302323.js"></script>
                </div>

                <div id="newsletterblurb">
                <p>
                Learn everything you need to get yourself going in the world of street dance, tips, facts, what to wear, music, videos and more.  Just fill in the form above - simple!
                </p>
                </div>  

                <div id="contentcontainerhome2">
                   <h1>Street Styles 4 All is the place to be for street dance! With classes, DVD's that are sold worlwide, dancers for hire, streetwear...find out why you should choose Street Styles 4 All:
                   </h1>
                            <div id="homess4atrailer">
        <iframe width="466" height="302" src="http://www.youtube.com/embed/QyhgZ6I_DHo" frameborder="0" allowfullscreen></iframe>
        </div>

           </div>

    </div> 
```

CSS是：

```
#homewallcontainer {
background: url("images/wall.png") repeat scroll 0 0 transparent;
height: 542px;
margin-top: -1px;
width: 960px;
}

#homesidenavcontainer {
float: left;
margin-left: 41px;
margin-top: 110px;
width: 253px;
}

#homesidenavcontainer {
float: left;
margin-left: 41px;
margin-top: 110px;
width: 253px;
}

#contentcontainerhome2 {
float: right;
margin-right: 17px;
margin-top: 46px;
width: 528px;
}

#homess4atrailer {
margin-left: 56px;
padding: 38px 0 10px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:57:57.403

我在您的 html 片段中发现了 2 个错误。`</div>`末尾有一个额外的，带有一个奇怪的 ' 和`allowfullscreen`iframe 中的无效。您是否已经尝试过[验证](http://validator.w3.org/)您的代码？

# javascript - 如何使用表单输入来更新代码？

> ID：11728739
> 
> 赞同：-1
> 
> 时间：2012-07-30T20:01:37.847
> 
> 标签：javascript, jsp

我有一个页面，我需要根据文本字段中的用户输入过滤嵌入式小部件提供的某些值。我可以通过将某些参数附加到页面上嵌入的小部件代码并刷新页面来做到这一点

如何获取用户输入、替换小部件代码并刷新页面？

这是我可能需要附加到页面上已经存在的小部件代码的代码。%22过滤器%22:%7B%22关键字%22:%22用户提供的值%22%7D,

我正在使用jsp

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:59:19.580

您应该能够通过在输入字段上放置一个 onchange 并将其发送到从输入字段读取值的函数来处理它。或者，您可以让提交按钮调用一个函数，该函数首先从输入字段中读取值，然后执行您需要的任何逻辑，然后提交表单。

Jquery 通常有助于使这样的事情变得更容易和更直观，尽管它确实有一些学习曲线需要提升。

# emacs - MIME“文本/丰富”文件格式的正确文件扩展名？

> ID：11728742
> 
> 赞同：5
> 
> 时间：2012-07-30T20:01:50.400
> 
> 标签：emacs, mime, richtext, .doc

Emacs 提供了使用 MIME 标准`text/enriched`编写丰富文本的能力。这种格式的规范文件扩展名是什么。Emacs 似乎认为它是`.doc`（参见 参考资料`$EMACSDIR/24.1/etc/enriched.doc`），但这可能与更常见的 Microsoft Word`.doc`格式相混淆。有替代方案吗？

（我知道不是`.rtf`，这是一种不同于 Microsoft`.doc`和 MIME 格式的`text/enriched`格式）

编辑：

似乎`.etf`并且`.txte`是这种文件类型的一些可接受的扩展名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T02:36:49.530

`text/enriched`也称为`Enriched Text Format`或`.etf`。

[http://users.starpower.net/ksimler/eudora/etf.html](http://users.starpower.net/ksimler/eudora/etf.html)

[http://fileext.com/file-extension/ETF](http://filext.com/file-extension/ETF)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T01:23:25.670

由于它打算用作内联邮件格式，我认为它没有标准的文件扩展名。`.txte`似乎是另一个用于它的扩展，它与其他众所周知的格式不冲突。

# sql - 在存储过程中使用“with rollup”时出现语法错误

> ID：11728743
> 
> 赞同：0
> 
> 时间：2012-07-30T20:01:52.963
> 
> 标签：sql, sql-server-2008

我第一次尝试在 sql server 中编写存储过程，代码如下。在这里，当我在查询末尾添加“with rollup”时，它显示错误“**关键字 with 附近的语法不正确”**

```
DROP PROCEDURE FIRSTPROCEDURE
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE FIRSTPROCEDURE
@startdate nchar(8), @enddate nchar(8)
AS
BEGIN
SET NOCOUNT ON;
select Date, SUM(QT1), SUM(QTY2), SUM(qTY3) FROM dbo.TABLE1
where date between @startdate and @enddate 
group by Date
order by Date
WITH ROLLUP
END
GO 
```

并尝试执行如下程序：

```
exec firstprocedure '20120501', '20120525' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:04:55.470

`With rollup`需要在`order by`. 它与`group by`

```
select Date, SUM(QT1), SUM(QTY2), SUM(qTY3) FROM dbo.TABLE1 
where date between @startdate and @enddate  
group by Date WITH ROLLUP 
order by Date 
```

此外，如果您使用日期数据类型存储和查询日期，您将避免一大堆问题

# html - HTML CSS - 没有文件夹适用于不

> ID：11728753
> 
> 赞同：0
> 
> 时间：2012-07-30T20:02:36.377
> 
> 标签：html, css, hyperlink, href

编辑：我所做的与我在下面写的没有什么不同，但它现在有效。不知道为什么：-/谢谢你们的帮助：）

我正在尝试将我的文档链接到一个 css 文件。问题是这样的。

这有效：

```
<link rel="stylesheet" type="text/css" href="style.css"> 
```

此剂量：

```
<link rel="stylesheet" type="text/css" href="css/style.css"> 
```

当然，当我尝试链接到该文件时，该文件存在于子文件夹中。

:)

编辑：

HTML 文件

```
<link rel="stylesheet" type="text/css" href="/css/style.css">
</head>
<body>
<table id="menu">
<tr>
<td><a id="button">Home</a></td>
<td><a id="button">Education</a></td>
<td><a id="button">Experience</a></td>
<td><a id="button">Gallery</a></td>
<td><a id="button">Cantact Me</a></td></tr>

</table> 
```

它似乎只在我的 html 编辑器（Expression Web）中有效，但是当我在浏览器（chrome/firefox/ie）中打开它时它不起作用。

样式文件：

```
 body{ background-color: white;} 

 #menu { width:100%; background-image:url('BarBG.png'); border:0px;  }
 #button 
 { 
 color:white; 
 font-size:large; 
 line-height:45px; 
 vertical-align:middle; 
 text-align:center;
 display: block; 
 width: 100px; 
 height: 45px;
 margin-right:auto; 
 margin-left:auto;
   }
   #button:hover{

color:black; 
font-size:large; 
line-height:45px; 
vertical-align:middle; 
text-align:center;
display: block; 
width: 100px; 
height: 45px;
margin-right:auto; 
margin-left:auto;
background-image:url('BarBGHover2.png');
cursor:pointer;  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:04:03.783

Trey 建立相对于根的链接

```
<link rel="stylesheet" type="text/css" href="/css/style.css"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:10:20.690

或者试试这个：

```
<link rel="stylesheet" type="text/css" href="./css/style.css"> 
```

这`./`意味着从哪里调用它的相对位置。并不总是需要，但有时可以提供帮助。:)

# web2py - 决定什么将呈现控制器输出

> ID：11728756
> 
> 赞同：0
> 
> 时间：2012-07-30T20:03:01.460
> 
> 标签：web2py

在[此页面上](http://web2py.com/books/default/chapter/29/3#Startup)，我们阅读：

> 如果不写视图，字典由“views/generic.html”渲染

此评论是针对该文件做出的，`default/index.py`但问题是有一个 HTML 文件`default/index.html`，并且[在文本的前面](http://web2py.com/books/default/chapter/29/3#Say-my-name)部分说明了它：

> 当一个动作返回一个字典时，web2py 会寻找一个名称为`[controller]/[function].[extension]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:22:05.203

我不确定问题是什么，但第一个陈述不是关于 的`default/index.py`，它不存在。相反，它指的`index()`是位于 /controllers 文件夹中的 default.py 控制器中的函数。它只是说明*如果*没有 /views/default/index.html 视图，那么`index()`函数返回的字典将由 /views/generic.html 视图呈现。换句话说，web2py 将首先查找 /views/default/index.html 视图，如果该视图不存在，它将回退到 /views/generic.html（注意，这仅在 response.generic_patterns 为适当设置 - 更多信息请参见[此处](http://web2py.com/books/default/chapter/29/10#Generic-views)）。

# javascript - 为什么 JavaScript 中的“继续”语句不好？

> ID：11728757
> 
> 赞同：63
> 
> 时间：2012-07-30T20:03:04.273
> 
> 标签：javascript, readability, continue

在 Douglas Crockford 所著的*Javascript: The Good Parts*一书中，作者对 continue 语句的看法如下：

> 该`continue`语句跳转到循环的顶部。我从未见过没有通过重构删除`continue`语句来改进的代码。

这真的让我很困惑。我知道 Crockford 对 JavaScript 有一些非常固执的观点，但这对我来说听起来完全错误。

首先，`continue`不仅仅是跳到循环的顶部。默认情况下，它还会进行到下一次迭代。那么，克罗克福德的声明不只是完全错误的信息吗？

更重要的是，我不完全明白为什么`continue`甚至会被认为是坏的。这篇文章提供了似乎是一般假设： [为什么在循环内继续是一个坏主意？](https://stackoverflow.com/questions/4913981/why-is-continue-inside-a-loop-a-bad-idea)

尽管我了解`continue`在某些情况下可能会使代码难以阅读，但我认为它可能会使代码更具可读性。例如：

```
var someArray=['blah',5,'stuff',7];
for(var i=0;i<someArray.length;i++){
    if(typeof someArray[i]==='number'){
        for(var j=0;j<someArray[i];j++){
            console.log(j);
        }
    }
} 
```

这可以重构为：

```
var someArray=['blah',5,'stuff',7];
for(var i=0;i<someArray.length;i++){
    if(typeof someArray[i]!=='number'){
        continue;
    }
    for(var j=0;j<someArray[i];j++){
        console.log(j);
    }
} 
```

`continue`在这个特定示例中并不是特别有益，但它确实证明了它减少了嵌套深度的事实。在更复杂的代码中，这可能会增加可读性。

Crockford 没有解释为什么`continue`不应该被使用，那么我错过的这个观点背后是否有更深层次的意义？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-07-30T20:04:30.083

这种说法很荒谬。`continue`可以被滥用，但它通常*有助于*提高可读性。

典型用途：

```
for (somecondition)
{
    if (!firsttest) continue;

    some_provisional_work_that_is_almost_always_needed();

    if (!further_tests()) continue;

    do_expensive_operation();
} 
```

目标是避免“烤宽面条”代码，其中您有深度嵌套的条件。

**编辑添加：**

是的，这最终是主观的。[这是我的决定指标。](http://www.energizedwork.com/weblog/2008/08/wtfs-per-minute.html)

**上次编辑了一个：**

当然，这个例子太简单了，你总是可以用函数调用替换嵌套条件。但是随后您可能必须通过引用将数据传递到嵌套函数中，这可能会产生重构问题，至少与您试图避免的问题一样糟糕。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-30T21:53:55.247

我个人与这里的大多数人不同。问题通常不在于显示的`continue`模式，而在于更深的嵌套模式，可能的代码路径可能变得难以看到。

但是，`continue`在我看来，即使是你的例子也没有显示出改进是合理的。根据我的经验，一些`continue`语句是以后**重构的噩梦**（即使对于像 Java 这样更适合自动重构的静态语言，尤其是后来有人也放在那里的时候`break`）。

因此，我会在您给出的报价中添加评论：

> 重构以删除`continue`语句会提高您进一步重构的能力。

内部循环非常适合用于*提取功能*。当内部循环变得复杂并`continue`可能使其变得痛苦时，就会进行这种重构。

这些是我在团队中专业从事 JavaScript 项目工作后的诚实意见，Douglas Crockford 谈到的规则确实显示了它们的优点。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-07-27T01:10:44.677

Douglas Crockford 可能有这种感觉，因为他不相信条件式中的赋值。事实上，他的程序 JSlint 甚至不允许你这样做，尽管 Javascript 可以。他永远不会写：

**示例 1**

```
while (rec = getrec())
{   
    if (condition1(rec))
        continue;

    doSomething(rec);
} 
```

但是，我猜他*会*写这样的东西：

**示例 2**

```
rec = getrec();

while (rec)
{   
    if (!condition(rec))
        doSomething(rec);

    rec = getrec();
} 
```

这两种方法都有效，但如果你不小心混合了这些风格，你会得到一个无限循环：

**示例 3**

```
rec = getrec();

while (rec)
{   
    if (condition1(rec))
        continue;

    rec = getrec();
} 
```

这可能是他不喜欢继续的部分原因。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-30T20:14:03.740

Continue 是一个非常有用的工具，可以节省算法中的计算周期。当然，它可能会被不当使用，但其他关键字或方法也是如此。在追求性能时，使用条件语句对路径分歧采取逆向方法可能很有用。continue 可以通过允许在可能的情况下跳过效率较低的路径来促进逆向。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-05-04T09:19:34.503

实际上，从所有分析看来：

1.  如果您有浅循环 - 如果它提高了可读性，请随意使用 continue （另外，*可能*会有一些性能提升？）。
2.  如果你有很深的嵌套循环（这意味着你在重构时已经有一个毛球要解开），从代码可靠性的角度来看，避免 continue 可能会被证明是有益的。

在为 Douglas Crokford 辩护时，我觉得他的建议倾向于[防御性编程](http://en.wikipedia.org/wiki/Defensive_programming)，老实说，这似乎是在企业中“防止白痴”代码的好方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-30T20:07:16.493

就个人而言，我从未听说过使用 continue 语句有什么不好的地方。确实可以（大多数时候）很容易地避免使用它，但没有理由**不**使用它。我发现使用 continue 语句可以使循环看起来更清晰，可读性更高。

# .htaccess - 在 wordpress 中隐藏 wp-login.php

> ID：11728759
> 
> 赞同：0
> 
> 时间：2012-07-30T20:03:12.317
> 
> 标签：.htaccess, wordpress

我试图隐藏`wp-login.php`，所以当有人做 mysite/wp-login 时，他不应该被重定向到登录页面。我已经看到了几个类似的插件，`Lockdown WP`但`Stealth Locker`没有奏效，我用谷歌搜索发现我必须在.htaccess文件中进行更改，但这也没有成功，谁能告诉我如何做到这一点，如果我找到了一个很棒的插件。 [我将此链接用于 .htaccess](http://www.phpmagicbook.com/hide-wordpress-wp-admin-login-page/) 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:07:02.697

您要做的是在主题的 functions.php 中添加几行，或者添加一个必须使用的插件，其代码如下：

```
// Change the login url
add_filter( 'login_url', 'custom_login_url', 10, 2 );

function custom_login_url( $orig_url, $redirect ) {
    return '/newlocation/';
} 
```

应该这样做！

# grails - Grails 'false' 唯一错误

> ID：11728761
> 
> 赞同：1
> 
> 时间：2012-07-30T20:03:21.353
> 
> 标签：grails, groovy

我有以下域类（缩短版）

```
class TalkingThread {

    static hasMany = [comments:Comment]
    Set comments = []
    Long uniqueHash 
} 
```

和

```
class Comment {
    static belongsTo = [talkingThread:TalkingThread]
    static hasOne = [author:CommentAuthor]
    Long uniqueHash

    static constraints = {
        uniqueHash(unique:true)
    }
} 
```

和

```
class CommentAuthor {
    static hasMany = [comments:Comment]
    Long hash
    String name
    String webpage
} 
```

以下方法

```
public TalkingThread removeAllComments(TalkingThread thread){
    def commentsBuf = []
    commentsBuf += thread.comments
    commentsBuf.each{
        it.author.removeFromComments(it)
        thread.removeFromComments(it)
        it.delete()
    }
    if(!thread.save()){
        thread.errors.allErrors.each{
            println it
        }
        throw new RuntimeException("removeAllComments")
    }
    return post
}

public addComments(TalkingThread thread, def commentDetails){
    commentDetails.each{
        def comment = contructComment(it,thread)
        if(!comment.save()){
            comment.errors.allErrors.each{ println it}
            throw new RuntimeException("addComments")
         }
         thread.addToComments(comment)
    }
    return thread
} 
```

有时我需要从 TalkingThread 中删除所有评论并添加共享相同 uniqueHashes 的评论。所以我调用*removeAllComments(..)*方法，然后调用*addComments(..)*方法。这会导致

*Comment.uniqueHash.unique.error.uniqueHash*由据称已删除的评论和添加的“新”评论引起。

我应该冲洗吗？也许我的域类有问题？

**编辑**问题的扩展。

也许这是一个不同的问题，但我认为会话已删除所有关联和对象。因此会话状态知道所有`TalkingThread`评论都已被删除。当然，这并没有反映在数据库中。我还假设新评论的“保存”是有效的，因为这种“保存”与会话状态一致。然而，这种“保存”将与数据库状态不一致。因此，我对 grails 如何验证与会话和数据库状态相关的对象的理解是有缺陷的！任何有助于理解验证与会话和数据库状态有关的保存的过程也将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:39:25.403

如果`Comment`要从 a 中删除所有 s，`TalkingThread`则可以使用 Hibernate 的级联行为。

添加

```
static mapping = {
        comments cascade: 'all-delete-orphan'
    } 
```

到`TalkingThread`，然后您可以调用，`comments.clear()`然后`thread.save()`将删除关联中的评论。

这里有[一篇关于 Grails 一对多关系的好文章](http://johnrellis.blogspot.co.uk/2010/05/relationship-advice-grails-one-to-many.html)。关于它的[官方 Grails 文档在这里。](http://grails.org/doc/latest/ref/Database%20Mapping/cascade.html)

# php - 谷歌从数组中映射标记、折线和窗口信息

> ID：11728764
> 
> 赞同：1
> 
> 时间：2012-07-30T20:03:39.320
> 
> 标签：php, javascript, google-maps, google-maps-api-3

我想从数组点（来自 ajax 页面）显示带有标记和窗口信息的折线
***这是索引页面代码：***

```
var gmarkers = []; 
var map = null;
function initialize() {
  var myOptions = {
    zoom: 15,
    center: new google.maps.LatLng(27.332702, 53.177137),
    // mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }

  map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
  google.maps.event.addListener(map, 'click', function() {
        infowindow.close();
        });

}

var infowindow = new google.maps.InfoWindow(
  { 
    size: new google.maps.Size(150,50)
  });

function myclick(i) {
  google.maps.event.trigger(gmarkers[i], "click");
}

function createMarker(latlng, name, html) {
    var contentString = html;
    var marker = new google.maps.Marker({
        position: latlng,
        map: map,
        zIndex: Math.round(latlng.lat()*-100000)<<5
        });

    google.maps.event.addListener(marker, 'click', function() {
        infowindow.setContent(contentString); 
        infowindow.open(map,marker);
        });
    // save the info we need to use later for the side_bar
    gmarkers.push(marker);
} 
```

***我的 Ajax 页面：***

```
var polylines = [];

var beaches = [
    ['Bondi Beach',10,15, 4],
    ['Coogee Beach',11,16, 5],
    ['Cronulla Beach',13,15, 3],
    ['Manly Beach',13,17, 2],
    ['Maroubra Beach',12,10, 1]
];

for (var i = 0; i < beaches.length; i++) {
    var beach = beaches[i];
    var myLatLng = new google.maps.LatLng(beach[1], beach[2]);
    var polylines = new google.maps.LatLng(beach[1], beach[2]);

    var marker = createMarker(myLatLng,"This place",beach[0])
}

var routes = new google.maps.Polyline({
    path: polylines,
    strokeColor: "#FF0000",
    strokeOpacity: 0.6,
    strokeWeight: 4
});

routes.setMap(map); 
```

在我调用`Ajax Page`, 标记后添加了 window-info ，但路线折线不显示，问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:14:01.260

> 在我调用 Ajax 页面后，标记添加了 window-info ，但没有显示路由折线，问题出在哪里？

是的。折线在这里是一个数组：

```
var polylines = []; 
```

在这里你用一个 google.maps.LatLng 覆盖它：

```
var polylines = new google.maps.LatLng(beach[1], beach[2]); 
```

您可能想要这样做：

```
polylines.push(new google.maps.LatLng(beach[1], beach[2])); 
```

# javascript - javascript异常的这些神秘方法是什么？

> ID：11728775
> 
> 赞同：6
> 
> 时间：2012-07-30T20:04:26.340
> 
> 标签：javascript

我在 Google Chrome 中检查了一个 javascript 异常。

![在此处输入图像描述](../Images/3110b54bd14521eb52fade7a59d9d3b3.png)

我注意到函数`get message`, `get stack`,`set message`和`set stack`. 我试图捕捉这个异常并运行`alert(e.get_message());`只是得到一个错误。我也尝试运行`alert(e.get message());`，由于空间原因，它显然返回了另一个错误。

这些神秘的方法是什么，开发人员如何称呼它们？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T20:08:07.593

它们是属性访问器。它们是在您获取或设置属性时运行的有效函数。

```
e.message; // getter

e.message = "foobar"; // setter 
```

使用属性访问器，它们不仅仅是简单地获取和设置属性值。他们可以运行在对象的属性描述符中建立的代码，因此属性访问可能会产生副作用。

*例子：*

```
var o = Object.create(Object.prototype, {
    foobar: {
        get: function() { return "getter"; },
        set: function(val) { alert("setter " + val); }
    }
});

o.foobar;  // "getter"
o.foobar = "raboof";  // alerts "setter raboof" 
```

* * *

要查看为给定属性设置的属性描述符，请使用`Object.getOwnPropertyDescriptor`...

```
console.dir(Object.getOwnPropertyDescriptor(e, "message"));

Object
    configurable: true
    enumerable: false
    get: function getter() { [native code] }
    set: function setter() { [native code] } 
```

请注意，这些技术需要 ECMAScript 5 支持的实现。

# qt - Qt中List和Hash的结合

> ID：11728777
> 
> 赞同：1
> 
> 时间：2012-07-30T20:04:31.033
> 
> 标签：qt, list, data-structures, hash, model-view

我需要一个数据结构，其中每个元素都有一个特定的索引，但也可以使用一个键来检索。

我需要 Qt 中模型视图编程的数据结构。一方面，视图请求特定行中的元素。另一方面，模型想要插入和修改具有给定键的元素。这两个操作都应该在 O(1) 中运行。

这是我想要的一个例子：

视图看到以下内容：

```
list[0]: "Alice", aged 22
list[1]: "Carol", aged 15
list[2]: "Bob", aged 23 
```

模型看到：

```
hash["Alice"]: "Alice", aged 22
hash["Bob"]: "Bob", aged 23
hash["Carol"]: "Carol", aged 15 
```

我的想法如下：我有一个`QList<Value>`和一个`QHash<Key, Value*>`. 哈希指向列表中存储相应元素的位置。这是插入/编辑值的代码：

```
if (hash.contains(key))
    *hash[key] = value;
else
{
    int i = list.size();
    list << value;
    hash[key] = &list[i];
} 
```

问题是这段代码并不总是有效。有时它按预期工作，但碰巧数据结构不再一致。
我怀疑，这是因为 QList 通过内存移动它的内容，因为它分配了新的空间或类似的东西。

**重要的操作（应该在预期的 O(1) 中运行）：**

*   插入键/值对（将值附加到列表的末尾）
*   使用键查找和修改值
*   使用索引查找和修改值

**其他必须可能但不必在恒定运行时间内可能的操作：**

*   按索引删除元素
*   按键删除元素
*   在数组中间插入
*   交换数组/排序数组中的元素
*   获取键的索引

我的两个问题是：

*   是否有任何数据结构可以满足我的要求？
*   如果没有，我该如何解决这个问题或有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:16:46.477

**方法 1：**您可以将列表索引存储在哈希中，而不是指针。然后你还有一个间接（从哈希，你得到索引，然后你从列表中检索），但它仍然是 O(1)。速度差异不应太大。

**方法 2：**列表和哈希都使用指针进行操作。然后它们将保持有效。但是，基于索引或键的删除将变成 O(n)，因为您必须在不对应的容器中手动查找对象。

我也想知道你想如何解决索引删除或中间插入的问题。在这两种情况下，散列都会指向错误的条目（在您的方法和方法 1 中）。在这里，您将被迫采用方法 2。

# jquery - jQuery addClass 不动态应用样式

> ID：11728779
> 
> 赞同：5
> 
> 时间：2012-07-30T20:04:42.733
> 
> 标签：jquery, css, code-injection, addclass

我正在尝试将样式动态应用于页面中的几个下拉列表。使用 jQuery addClass 确实将类添加到所有“选择”元素，正如我可以从我的 Chrome 控制台看到的那样。但是，样式不适用于元素。

现在，如果我手动将类单独添加到每个选择元素，然后保存页面并刷新它，则样式将应用于元素。

知道为什么样式不适用于 jquery 类注入吗？

```
$("select").addClass("select js-select"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:14:03.900

这个例子有效：

```
<p><a href="#" id="clicker">Add Class</a></p>
<div id="select">Hello World</div> 
```

javascript

```
$("#clicker").click(function () {

    $("#select").addClass("select js-select");
}); 
```

通过查看您的代码，似乎 $("select") 上应该有一个 ID 或类选择器。通过拥有其中一个选择器，您的代码将知道应用样式的目标。否则，您的代码可以正常工作。

祝你好运，希望这能帮到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T20:33:50.493

您说没有应用样式，但是“select js-select”类是否添加到选择输入中？那么css或者浏览器一定有问题。

$("select").addClass(..) 应该可以工作，不需要您按 ID 或类指定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T20:47:28.110

如果将 onDomReady 更改为 onLoad，则可以正常工作。如[http://jsfiddle.net/gc3wQ/9/](http://jsfiddle.net/gc3wQ/9/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-18T08:26:45.460

**添加到 LazyTarget 的答案。**

您尝试使用类添加的样式被可能已经存在于元素中的 CSS 覆盖。

例如，这不起作用（不会隐藏 div）

```
$(function (argument) {

  function loaded(){
    $('.landing .scroll').addClass('hidden');
  }

  loaded();

})
```

```
.hidden{
  display: none;
  transition: all ease-in-out 0.3s;
}

.shown{
  display: block;
  transition: all ease-in-out 0.3s;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<div class="shown">
 <h1>Hello</h1>
</div>
```

# javascript - jQuery在重置之前不删除cookie

> ID：11728781
> 
> 赞同：4
> 
> 时间：2012-07-30T20:04:45.347
> 
> 标签：javascript, jquery, cookies

我正在尝试使用 Javascript 更新网站的一些 cookie。它应该查看现有 cookie 是否为某个值。如果是这样，请删除 cookie 并替换它。

相反，它在不删除原始 cookie 的情况下添加新 cookie。

这是我的代码

```
$(document).ready(function(){
if(getCookie('ref') == 'na') {
    $.cookie('ref', null, { path: '/', expires: -5 });
    $.cookie('ref', Base64.encode(document.referrer), { expires: 365 });
}

}); 
```

这是我正在使用的 cookie 库：[https ://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:07:06.313

要删除 cookie，您必须将其设置为与您要从中删除它完全相同的路径和域。`path`在两个`$.cookie()`调用中指定 ，如果在`domain`之前的任何代码中指定了 ，则必须在 jQuery 代码中将域指定为完全匹配。

```
$(document).ready(function() {
  if(getCookie('ref') == 'na') {
      $.cookie('ref', null, { path: '/', expires: -5 });
      $.cookie('ref', Base64.encode(document.referrer), {path: '/', expires: 365 });
  }
}); 
```

但是，如果您只是打算覆盖它，则没有真正需要删除它：

```
$(document).ready(function() {
  if(getCookie('ref') == 'na') {
    // Just write the new cookie over the old one...
    $.cookie('ref', Base64.encode(document.referrer), {path: '/', expires: 365 });
  }
 }); 
```

# php - 没有客户端混淆的 FLV 链接安全性

> ID：11728787
> 
> 赞同：1
> 
> 时间：2012-07-30T20:05:26.050
> 
> 标签：php, flash, security, video-streaming, obfuscation

假设：

1.  缺乏混淆
2.  散列的视频链接

有没有一种方法可以安全地呈现 Flash 视频播放器 (SWF)，而无需用户确定流式视频的直接链接（通过页面源或其他方式）？假设 Flash 视频播放器是非专有的并且完全可以更改。如果没有 SWF 混淆，是否有足够的安全性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:50:25.233

我看到了 3 种可能的解决方案

### 沃扎

我已经尝试过了，我认为这是迄今为止最好的流媒体解决方案。[Adobe Flash Media Streaming http://www.adobe.com/products/flash-media-streaming.html](http://www.adobe.com/products/flash-media-streaming.html)更便宜，而且它的架构更容易扩展。但这与您现有的 CDN 解决方案不兼容。Wowza 提供了一个基于令牌的安全插件，可以防止 Flash 客户端在未经允许的情况下流式传输视频：[http](http://www.wowza.com/forums/content.php?51) ://www.wowza.com/forums/content.php? 51 它是一个真正的流式传输环境，所以你会更少担心用户嗅探他们的浏览器连接并下载内容。尽管它不是完全防弹的，但它非常安全，因为您将使用流协议，例如 rtsp://

## Lighttpd + mod_sec 下载

它也是基于令牌的，需要您在 Lighttpd 网络服务器后面托管视频。[http://redmine.lighttpd.net/projects/lighttpd/wiki/Docs:ModSecDownload](http://redmine.lighttpd.net/projects/lighttpd/wiki/Docs:ModSecDownload)会使视频链接在一定时间后过期，这使得热链接不是不可能，而是更难维护，因为它需要'hot-linkers' 每次过期时更改链接。根据视频的长度，它可能会在 5 分钟后过期，这是非常安全的。

## CDN 令牌认证

我一直使用 EdgeCast 作为图像和视频的 CDN，它们提供与 Lighttpd + mod_secdownload 相同类型的保护。它被称为“基于令牌的身份验证”，它也可能在其他 CDN 服务中可用。使用 EdgeCast API，我可以请求特定 URL 的令牌，并带有过期时间。就像我对 mod_secdownload 所做的一样。有 5 分钟的过期时间，盗链变得毫无用处。

## 所以...

如果可以，使用流媒体服务器是防止内容下载和盗链的最佳方式。任何在浏览器中混淆 URL 的尝试最终都会失败，因为嗅探浏览器连接并重复相同的协议太容易了。出于同样的原因，Flash 客户端中的任何混淆都不起作用，因为浏览器会显示一个可下载的 URL。

# objective-c - Noob 需要帮助设计数据模型和控制器

> ID：11728789
> 
> 赞同：2
> 
> 时间：2012-07-30T20:05:32.067
> 
> 标签：objective-c, cocoa, nsdictionary

免责声明：我已经学习 Objective C/Cocoa 两个月左右，我向自己保证，我会一直尝试自己找到答案，而不是用愚蠢的菜鸟问题堵塞互联网。在这一点上，我只是一头雾水，我认为此时我会从提问中受益。我提前道歉。

问题：我正在尝试编写一个名为“My Dream Garage”的主从样式应用程序（这只是为了练习）。基本上我想存储汽车对象及其属性。我有一个看起来像这样的“汽车”类：

```
#import <Foundation/Foundation.h>

@interface Car : NSObject
@property (nonatomic, strong) NSString *brand, *model, *trimLevel;
@property (nonatomic, strong) NSNumber *modelYear, *engineSizeinL, *weight;
@property (nonatomic, strong) id image;
@end 
```

在我的主要 .XIB 文件中，我有一个 NSTableView 和一堆文本标签，它们将显示每个属性（以及图像的 imagewell）。

我的问题是如何存储这些数据？我了解 NSArray、NSDictionary、ArrayController 和 DictionaryController 分别是什么。我只是对如何让它们一起工作有点困惑。当我添加一个新的“汽车”时，我应该用它的属性实例化一个新的“汽车”对象吗？那时我是否将新对象添加到数组中，然后释放创建的“汽车”对象？我是否将表格视图和文本标签链接到 NSDictionary 控制器？我什至不确定此时我应该问什么。

也许我有点过头了。除了 Apple 的文档（非常好，但对于业余爱好者来说过于冗长）之外，还有什么值得推荐的来学习如何创建与此类似的应用程序？

任何帮助是极大的赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:34:23.610

这里有很多问题：

您想永久存储它们吗？如果是这样，您需要开始学习 Core Data。

Car 类的实现文件是什么样的？你（或者你正在）如何实例化和初始化一个新对象？

我的类对象通常看起来像这样：

界面：

```
@interface UserInfo : NSObject {
    NSString *_networkID;
    NSString *_displayName;
    NSString *_userDomain;
    BOOL _loggedIn;
}
@property(nonatomic,strong) NSString *networkID;
@property(nonatomic,strong) NSString *displayName;
@property(nonatomic,strong) NSString *userDomain;
@property(nonatomic) BOOL loggedIn;

-(id) initWithUserNetworkID:(NSString *)networkID 
                displayName:(NSString *)displayName  
                 userDomain:(NSString *)userDomain;

@end 
```

执行：

```
#import "UserInfo.h"

@implementation UserInfo

@synthesize networkID = _networkID;
@synthesize displayName = _displayName;
@synthesize loggedIn = _loggedIn;
@synthesize userDomain = _userDomain;

-(id) initWithUserNetworkID:(NSString *)networkID 
                displayName:(NSString *)displayName 
                 userDomain:(NSString *)userDomain {

    if ((self = [super init])) {
        _networkID = [networkID copy];
        _displayName = [displayName copy];
        _userDomain = [userDomain copy];
        _loggedIn = YES;
    }

    return self;
}

@end 
```

我将使用如下代码创建一个新的：

```
UserInfo *myUserInfo = [[UserInfo alloc] 
                                initWithUserNetworkID:[loginDictionary objectForKey:@"NetworkID"]  
                                displayName:[loginDictionary objectForKey:@"DisplayName"] 
                                userDomain:[loginDictionary objectForKey:@"UserDomain"]]; 
```

# php - Laravel 在 Doctype 之前显示一个空行

> ID：11728791
> 
> 赞同：3
> 
> 时间：2012-07-30T20:05:41.760
> 
> 标签：php, html, laravel

```
<!DOCTYPE html> 
```

这是代码。

我该如何解决？

在将代码与 Laravel 集成之前，我测试了 HTML/CSS/JavaScript。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T20:07:46.970

确保您的 PHP 文件没有结束标记 ( `?>`)。他们可能会在您的 HTML 中添加空格。

有关更多信息，[请参阅 PHP 文档](http://php.net/manual/en/language.basic-syntax.phptags.php)：

> 如果文件是纯 PHP 代码，最好在文件末尾省略 PHP 结束标记。这可以防止在 PHP 结束标记之后意外添加空格或新行，这可能会导致不必要的影响，因为当程序员无意在脚本中的该点发送任何输出时，PHP 将开始输出缓冲。

* * *

您可能还想看看这篇文章：[为什么要省略关闭标签？](https://stackoverflow.com/questions/4410704/php-closing-tag)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-06T05:25:33.103

我知道这已经晚了几年，但对其他人来说。

将页面编码更改为不带BOM的UTF-8即可解决。

# virtualhost - 如何设置权限，以便 Zend Server CE 虚拟主机可以访问 mac 上我的 /Users/me 目录下的文档根目录

> ID：11728792
> 
> 赞同：1
> 
> 时间：2012-07-30T20:05:45.597
> 
> 标签：virtualhost, zend-server-ce

我正在尝试在运行 OSX Snow Leopard 的 Mac 上设置 Zend Server CE 虚拟主机。

如果我将 vhost 文档根目录放入

/usr/local/zend/apache2/vhosts/site

一切正常。

如果我把它放进

/用户/我/文档/站点

我得到：

“禁止您无权访问此服务器上的/。”

/Users/me/Documents/site 的权限是：

drwxrwxrwx 3 me 员工 102 7 月 30 日 12:33 测试

如何让 zend 服务器守护进程为我的 Documents 目录中的文件提供服务？

# ios - 是否可以在 Phonegap 中生成设备令牌以使用用户定义的推送通知？

> ID：11728793
> 
> 赞同：0
> 
> 时间：2012-07-30T20:05:52.260
> 
> 标签：ios, cordova, phonegap-plugins

正如标题所说，我想开发 Web 应用程序并使用 Phonegap 将其编译为原生 iOS。应用程序应向特定用户发送特定的推送通知。

有办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:03:15.720

我建议使用带有远程 API 的第三方服务。

PushWoosh 已经有一个很棒的 PhoneGap 插件，专为轻松集成推送通知而设计。Urban Airship 仍在研究类似的东西。

[http://www.pushwoosh.com/programming-push-notification/push-notification-sdk-integration-for-phonegap/](http://www.pushwoosh.com/programming-push-notification/push-notification-sdk-integration-for-phonegap/)

另一个小而重要的事情：Remote API 是 PushWoosh 中的高级帐户功能，但是，您每年最多为他们的高级帐户支付 200 欧元，而 UA 的定价根本不合理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T03:50:41.197

取决于您的意思是什么类型的推送通知？

可以通过这样的插件设置本地通知（延迟）： [https ://github.com/phonegap/phonegap-plugins/tree/master/iOS/LocalNotifications](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/LocalNotifications)

如果您的意思是来自远程服务器的推送通知：phonegap wiki 可能会帮助您： [http ://wiki.phonegap.com/w/page/41670190/Push%20Notifications%20on%20IOS](http://wiki.phonegap.com/w/page/41670190/Push%20Notifications%20on%20IOS)

它使用称为飞艇的外部服务。

# java - 使用 .db 文件填充 JTable

> ID：11728796
> 
> 赞同：0
> 
> 时间：2012-07-30T20:05:58.640
> 
> 标签：java, swing, computer-forensics

我目前正在为我收到的一个项目制作一个移动取证工具包。我遇到了死胡同，希望有人能帮助我。

在 Android 上，短信、通话记录、联系人等都保存为`.db`文件，我希望我可以填充 JTable 以在按下特定按钮时显示结果。例如，您单击查看文本，JTable 将填充手机上的所有文本消息。此外，`.db`文件中充满了我不需要显示的列，所以有没有办法只选择我想要的列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T20:11:21.637

我会使用 SQLite JDBC 驱动程序来访问这些数据库文件。

[Java 和 SQLite](https://stackoverflow.com/questions/41233/java-and-sqlite)

然后将 JDBC 数据绑定到 JTable，如下所述：

[如何用数据库填充 JTable 中的数据？](https://stackoverflow.com/questions/2192764/how-to-fill-data-in-a-jtable-with-database)

另请参阅： [https ://stackoverflow.com/questions/2149438/tool-to-see-android-database-tables-and-data](https://stackoverflow.com/questions/2149438/tool-to-see-android-database-tables-and-data)

# r - abline 和对数 x 轴在图中给出水平回归线

> ID：11728799
> 
> 赞同：1
> 
> 时间：2012-07-30T20:06:14.110
> 
> 标签：r, math, graphics

首先，请从[http://alexandervanloon.nl/survey_oss.csv](http://alexandervanloon.nl/survey_oss.csv)下载我的数据集，然后执行以下脚本内容得到一些散点图：

```
# read data and attach it
survey <- read.table("survey_oss.csv", header=TRUE)
attach(survey)

# plot for inhabitants
png("scatterINHABT.png")
plot(INHABT, OSSADP, xlab="Inhabitants", ylab="Adoption of OSS", las=1)
abline(lm(OSSADP~INHABT)) # regression line (y~x)
dev.off()

# plot for inhabitants divided by 1000
png("scatterINHABT_divided.png")
plot(INHABT/1000, OSSADP, xlab="Inhabitants", ylab="Adoption of OSS", las=1)
abline(lm(OSSADP~INHABT)) # regression line (y~x)
dev.off()

# plot for inhabitants in logarithmic scale
png("scatterINHABT_log.png")
plot(INHABT, OSSADP, xlab="Inhabitants", ylab="Adoption of OSS", las=1, log="x")
abline(lm(OSSADP~INHABT)) # regression line (y~x)
dev.off()

# plot for inhabitants in logarithmic scale and divided by 1000
png("scatterINHABT_log_divided.png")
plot(INHABT/1000, OSSADP, xlab="Inhabitants", ylab="Adoption of OSS", las=1, log="x")
abline(lm(OSSADP~INHABT)) # regression line (y~x)
dev.off() 
```

如您所见，在第一个散点图中，问题在于`R`决定使用科学记数法，并且由于异常值，数据看起来很奇怪。这就是为什么我想让 x 轴上的居民数以千计，并且 x 轴也使用对数刻度。

问题是双重的。首先，我可以通过简单地将居民除以 1000 来摆脱科学记数法，但这会产生与第一个图不同的平坦水平回归线。我知道还有其他方法可以解决此问题，例如[不想在绘图轴上使用科学记数法，](https://stackoverflow.com/questions/5963047/do-not-want-scientific-notation-on-plot-axis)但我无法使那里的代码适应我的情况。

其次，将 x 轴切换为对数刻度也会使回归线变平。谷歌指向[https://stat.ethz.ch/pipermail/r-help/2006-January/086500.html](https://stat.ethz.ch/pipermail/r-help/2006-January/086500.html)作为可能解决方案的第一个结果，我尝试使用`abline(lm(OSSADP~log10(INHABT)))`那里建议的方法，但这会产生垂直回归线. 如果我将两者除以 1000 并使用对数刻度，这条线也是水平的。

我是一名社会科学家，没有任何数学和统计学背景，所以我担心我可能遗漏了一些明显的东西，如果是这样，我深表歉意。非常感谢大家的任何潜在帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:13:10.827

科学记数法曾[在 R 邮件列表中](https://stat.ethz.ch/pipermail/r-help/2005-September/079451.html)介绍过，但您可以控制 R 如何选择何时使用科学记数法`options()$scipen` 。

```
options(scipen=10)
plot(INHABT, OSSADP, xlab="Inhabitants", ylab="Adoption of OSS") 
```

`plot`其次，您除以 1000 的问题是您在和中都没有除以一千`abline`。这可以解决问题：

```
plot(INHABT/1000, OSSADP, xlab="Inhabitants", ylab="Adoption of OSS")
abline(lm(OSSADP~I(INHABT/1000))) # Fixed regression line. 
```

是必要的`I`，因为该`/`符号在 s 中具有不同的含义`formula`。

此外，您的`las`参数是不必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-23T02:11:24.467

我这样使用时解决了水平线的问题`log="x"`：

```
plot(INHABT, OSSADP, xlab="Inhabitants", ylab="Adoption of OSS", log="x")
abline(lm(OSSADP~log10(INHABT))) 
```

与`log10`而不只是`log`。

# jquery - 横向移动 CSS 栏不起作用

> ID：11728800
> 
> 赞同：0
> 
> 时间：2012-07-30T20:06:15.287
> 
> 标签：jquery

我的移动网页上有 CSS 条，而不是链接。它在纵向中工作正常，但默认为横向视图中的链接。我使用了一点 jQuery 来做到这一点，但我不知道为什么它在横向上不起作用。我简化了代码以强制它工作，但这并没有帮助。有人可以帮我解决这个问题。jQuery 代码如下。

```
if (window.innerWidth && window.innerWidth <= 600) 
{ 
    $(document).ready(function(){
        $('#header ul').addClass('show'); 
    }); 
}
else
{
   $(document).ready(function () {
    $('#header ul').addClass('show');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:10:07.643

你不能在 if-else 结构中使用 document.ready 函数。

$(document).ready(function() 在 dom 准备好或所有页面元素创建后立即调用。你确实应该这样做

```
$(document).ready(function(){
    if (window.innerWidth && window.innerWidth <= 600) { 
    $('#header ul').addClass('show'); 
    }
}); 
```

# java - 在我们的 Weblogic 10.3.3.0 中卡住了线程

> ID：11728802
> 
> 赞同：1
> 
> 时间：2012-07-30T20:06:17.120
> 
> 标签：java, weblogic

我们在 Weblogic 10.3.3.0 中遇到了一个卡住的线程。

```
Thread-465 "[STUCK] ExecuteThread: '33' for queue: 'weblogic.kernel.Default (self-tuning)'" <alive, suspended, priority=1, DAEMON> {
    java.util.HashMap$KeyIterator.next(HashMap.java:1012)
    java.util.HashMap.buildCache(HashMap.java:581)
    java.util.HashMap.resize(HashMap.java:557)
    java.util.HashMap.addEntry(HashMap.java:936)
    java.util.HashMap.put(HashMap.java:450)
    com.xyz.seeker.SpecialtyProvider.makeSpecialtyObjects(SpecialtyProvider.java:116)
    com.xyz.seeker.SpecialtyProvider.populateSpecialtyTree(SpecialtyProvider.java:91)
    com.xyz.seeker.SpecialtyProvider.getChildrenJson(SpecialtyProvider.java:74)
    com.xyz.seeker.SpecialtyProvider.doPost(SpecialtyProvider.java:42)
    com.xyz.seeker.SpecialtyProvider.doGet(SpecialtyProvider.java:36)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:700)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:815)
    weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:224)
    weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:108)
    weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:206)
    weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:26)
    weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:55)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:82)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:61)
    weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:55)
    weblogic.servlet.internal.RequestEventsFilter.doFilter(RequestEventsFilter.java:25)
    weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:55)
    weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.doIt(Unknown Source)
    weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(Unknown Source)
    weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:308)
    weblogic.security.service.SecurityManager.runAs(SecurityManager.java:117)
    weblogic.servlet.internal.WebAppServletContext.securedExecute(Unknown Source)
    weblogic.servlet.internal.WebAppServletContext.execute(Unknown Source)
    weblogic.servlet.internal.ServletRequestImpl.run(Unknown Source)
    weblogic.work.ExecuteThread.execute(ExecuteThread.java:198)
    weblogic.work.ExecuteThread.run(ExecuteThread.java:165) 
```

这是抛出这个的代码：

```
public Specialty makeSpecialtyObjects(final ResultSet rs) throws java.sql.SQLException{
    Specialty root = new Specialty();
    root.setId(ROOTID);
    root.setTitle("root");
    Specialty specialty;
    parentIdMap = new HashMap<String,String>();
    specialtiesMap = new HashMap<String, Specialty>();
    parentIdMap.put(""+ROOTID,null);
    specialtiesMap.put(""+ROOTID,root);  << I think the exception is coming here.
    while (rs.next()){
        int id  = rs.getInt(1);
        String name = rs.getString(2).trim();
        int disabled  = rs.getInt(3);
        int primId  = rs.getInt(4);
        String primName = rs.getString(5).trim();
        int depId  = rs.getInt(7);
        String depName = rs.getString(8).trim(); 
```

这是我们的专业课：

```
public class Specialty implements Serializable {
private String title;
private String id;
private List<Specialty> children;
private Specialty parent;
private boolean disabled; 
```

另一个人建议问题可能是布尔原语，但我认为这是可序列化的。我不确定接下来应该看哪里。我们只能在生产中解决这个问题。

# php - WordPress的adsense帐户

> ID：11728807
> 
> 赞同：-1
> 
> 时间：2012-07-30T20:06:43.930
> 
> 标签：php, wordpress, photo, adsense

我的网站是[垃圾邮件已删除]。我在 3-4 天前获得了 adsense 的首次批准，然后在我的网站上发布了脚本。谁能告诉我什么时候才能获得完全批准？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:29:37.107

官方回答是2-3天。 [http://support.google.com/adsense/bin/answer.py?hl=en&answer=76228](http://support.google.com/adsense/bin/answer.py?hl=en&answer=76228)

所以现在应该是任何时候。

实际上，时间是不同的。一周不会很特别。

情况比过去好很多。几年前，人们抱怨审批过程需要几个月的时间。

# azure - 使用旧配置的 Windows Azure 缓存服务

> ID：11728809
> 
> 赞同：1
> 
> 时间：2012-07-30T20:06:47.683
> 
> 标签：azure, azure-caching

最奇怪的事情。我正在切换到 SDK v1.7 和新的 ACS，成功登录后出现这个奇怪的错误。它似乎与 Azure 缓存服务的 SessionState 提供程序有关。

我没有使用预览版，但我使用的是 SDK 1.7，并且我使用的是启用了预览版功能的 Windows Azure 帐户。

就像 ACS/Cache Service SDK 深处的某些东西被搞砸了。

这是我的缓存配置：

```
 <dataCacheClients>
    <dataCacheClient name="default">
      <tracing sinkType="DiagnosticSink" traceLevel="Verbose" />
      <hosts>
        <host name="[[newCacheNamespace]].cache.windows.net" cachePort="22233" />
      </hosts>
      <securityProperties mode="Message">
        <messageSecurity authorizationInfo="[[secret]]">
        </messageSecurity>
      </securityProperties>
    </dataCacheClient>
    <dataCacheClient name="SslEndpoint">
      <tracing sinkType="DiagnosticSink" traceLevel="Verbose" />
      <hosts>
        <host name="[[newCacheNamespace]].cache.windows.net" cachePort="22243" />
      </hosts>
      <securityProperties mode="Message" sslEnabled="true">
        <messageSecurity authorizationInfo="[[secret]]">
        </messageSecurity>
      </securityProperties>
    </dataCacheClient>
  </dataCacheClients> 
```

这是我的会话状态提供程序配置：

```
<sessionState mode="Custom" customProvider="AppFabricCacheSessionStoreProvider">
  <providers>
    <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
    <add name="AppFabricCacheSessionStoreProvider" type="Microsoft.Web.DistributedCache.DistributedCacheSessionStateStoreProvider, Microsoft.Web.DistributedCache" cacheName="default" useBlobMode="true" dataCacheClientName="default" />
  </providers>
</sessionState> 
```

以下是我得到的错误：

```
Server Error in '/' Application.
--------------------------------------------------------------------------------

The remote name could not be resolved: '[[oldCacheNamespace]]-cache.accesscontrol.windows.net' 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Net.WebException: The remote name could not be resolved: '[[oldCacheNamespace]]-cache.accesscontrol.windows.net'

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  

Stack Trace: 

[WebException: The remote name could not be resolved: '[[oldCacheNamespace]]-cache.accesscontrol.windows.net']
   System.Net.WebClient.UploadValues(Uri address, String method, NameValueCollection data) +1243
   System.Net.WebClient.UploadValues(String address, String method, NameValueCollection data) +179
   Microsoft.ApplicationServer.Caching.AcsHelpers.GetToken(String serviceNamespace, String acsHostName, String issuerName, String issuerKey, String appliesTo) +523

[DataCacheException: ErrorCode<ERRCA0030>:SubStatus<ES0001>:ACS request for token failed. One of the reasons could be an invalid authorization token.]
   Microsoft.ApplicationServer.Caching.AcsHelpers.GetToken(String serviceNamespace, String acsHostName, String issuerName, String issuerKey, String appliesTo) +1875
   Microsoft.ApplicationServer.Caching.ClientAcsSecurity.get_Token() +242
   Microsoft.ApplicationServer.Caching.CacheResolverChannel..ctor(CacheResolverCommunicatorType communicatorType, IDuplexSessionChannel innerChannel, DataCacheSecurity dataCacheSecurity) +559

[CommunicationException: ErrorCode<ERRCA0030>:SubStatus<ES0001>:ACS request for token failed. One of the reasons could be an invalid authorization token.]
   Microsoft.ApplicationServer.Caching.CacheResolverChannel..ctor(CacheResolverCommunicatorType communicatorType, IDuplexSessionChannel innerChannel, DataCacheSecurity dataCacheSecurity) +833
   Microsoft.ApplicationServer.Caching.CacheResolverChannelFactory`1.System.ServiceModel.Channels.IChannelFactory<TChannel>.CreateChannel(EndpointAddress to) +274
   Microsoft.ApplicationServer.Caching.EndPointIdentityChannelFactory`1.System.ServiceModel.Channels.IChannelFactory<TChannel>.CreateChannel(EndpointAddress to) +186
   Microsoft.ApplicationServer.Caching.WcfClientChannel.CreateChannel(EndpointID endpoint) +557
   Microsoft.ApplicationServer.Caching.ChannelContainer.CreateChannel() +153

[DataCacheException: ErrorCode<ERRCA0017>:SubStatus<ES0006>:There is a temporary failure. Please retry later. (One or more specified cache servers are unavailable, which could be caused by busy network or servers. For on-premises cache clusters, also verify the following conditions. Ensure that security permission has been granted for this client account, and check that the AppFabric Caching Service is allowed through the firewall on all cache hosts. Also the MaxBufferSize on the server must be greater than or equal to the serialized object size sent from the client.)]
   Microsoft.ApplicationServer.Caching.DataCache.ThrowException(ResponseBody respBody) +693
   Microsoft.ApplicationServer.Caching.DataCacheFactory.GetCacheProperties(RequestBody request, SimpleSendReceiveModule sendRcvModule) +1194
   Microsoft.ApplicationServer.Caching.DataCacheFactory.GetCache(String cacheName) +701
   Microsoft.Web.DistributedCache.DataCacheFactoryWrapper.CreateDataCacheFromFactory(DataCacheFactory factory, String cacheName) +63
   Microsoft.Web.DistributedCache.CacheHelpers.RunCacheCreationHooks(CacheConnectingEventArgs fetchingEventArgs, IDataCacheFactory dataCacheFactory, Object sender, EventHandler`1 fetchingHandler, EventHandler`1 fetchedHandler) +356
   Microsoft.Web.DistributedCache.DistributedCacheSessionStateStoreProvider.CreateInternalProvider(IHttpRuntime httpRuntime, SessionInitializationData initData, IDataCacheFactory dataCacheFactory, EventHandler`1 cacheFetching, EventHandler`1 cacheFetched) +447
   Microsoft.Web.DistributedCache.DistributedCacheSessionStateStoreProvider.GetInternalProvider() +315
   Microsoft.Web.DistributedCache.DistributedCacheSessionStateStoreProvider.CreateNewStoreData(HttpContext context, Int32 timeout) +59
   System.Web.SessionState.SessionStateModule.InitStateStoreItem(Boolean addToContext) +182
   System.Web.SessionState.SessionStateModule.CompleteAcquireState() +374
   System.Web.SessionState.SessionStateModule.BeginAcquireState(Object source, EventArgs e, AsyncCallback cb, Object extraData) +2007
   System.Web.AsyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +477
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +312 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-12T12:39:24.857

这是一个老问题，但将来有人可能会遇到这个问题。

修复方法是：

1.  移除 <hosts> 元素。
2.  相反，添加此元素：

    < autoDiscover isEnabled="true" identifier="[[newCacheNamespace].cache.windows.net" />

而已

# r - R将数据框导出为条目列表

> ID：11728811
> 
> 赞同：0
> 
> 时间：2012-07-30T20:06:57.453
> 
> 标签：r, export, dataframe

我有一个数据框，其中包含起点和终点之间的距离。起点在行中，终点在列中。现在我想让它们一一打印（起点终点距离换行符）。应省略缺失值 (NA)。

这是我的数据框：

```
 EndPoint
    StartPoint TX001    TX002    TX003
         TX002  37.4       NA       NA
         TX003    NA 14.78704       NA
         TX005    NA       NA 60.78947 
```

我想要得到的是：

```
 TX002 TX001 37.4
    TX003 TX002 14.78704
    TX005 TX003 60.78947 
```

任何帮助是极大的赞赏。

杉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:11:30.143

如果我错过了标记，请使用`dput`提供您的数据样本。但是，假设您的数据如下所示：

```
dat <- structure(list(StartPoint = c("TX002", "TX003", "TX005"), TX001 = c(37.4, 
NA, NA), TX002 = c(NA, 14.78704, NA), TX003 = c(NA, NA, 60.78947
)), .Names = c("StartPoint", "TX001", "TX002", "TX003"), class = "data.frame", row.names = c(NA, 
-3L)) 
```

您可以`melt`从`reshape2`包中使用，然后使用`na.omit`.

```
> na.omit(melt(dat, 
               id.var='StartPoint', 
               variable.name='EndPoint', 
               value.name='Distance'))

  StartPoint EndPoint Distance
1      TX002    TX001 37.40000
5      TX003    TX002 14.78704
9      TX005    TX003 60.78947 
```

# c# - 需要帮助来创建 ac#bubblesort。我到目前为止有什么问题？

> ID：11728812
> 
> 赞同：0
> 
> 时间：2012-07-30T20:07:02.167
> 
> 标签：c#, sorting, quicksort, bubble-sort

我正在尝试使用冒泡排序，在 c# 中从最小到最大排序数字，到目前为止我有什么问题？

```
private void Order_Click(object sender, EventArgs e) {
  value1 = Convert.ToInt32(textBox1.Text);
  value2 = Convert.ToInt32(textBox2.Text);
  value3 = Convert.ToInt32(textBox3.Text);
  value4 = Convert.ToInt32(textBox4.Text);
  value5 = Convert.ToInt32(textBox5.Text);

  int[] myarray = { value1, value2, value3, value4, value5 };
  int n = 0;
  bool swapped = true;
  int j = 0;
  int tmp;
  while (swapped) {
    swapped = false;
    j++;
    for (int i = 0; i < n - j; i++)
    {
      if (myarray[i] > myarray[i + 1]) {
        tmp = myarray[i];
        myarray[i] = myarray[i + 1];
        myarray[i + 1] = tmp;
        swapped = true;
        order1.Text = Convert.ToString(myarray[0] + "," + 
                                       myarray[1] + "," + 
                                       myarray[2] + "," + 
                                       myarray[3] + "," + 
                                       myarray[4]);
       }
     }
   }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:22:47.587

您的代码有问题的第一件事是：

```
for (int i = 0; i < n - j; i++) 
```

您的检查`i < n - j`将永远不会让控件通过循环。因为您已将 n 初始化为 0 并且 j 为 1（在 j++ 之后），所以`i` 不会小于 then `-1`，因此您的循环将无法按预期工作。由于您将 swapped 设置为 false，因此控件将退出 while 循环，因此不会进行排序。

您需要将代码更改为：

```
 while (swapped)
            {
                swapped = false;
                for (int i = 0; i < myarray.Length - 1; i++)
                {
                    if (myarray[i] > myarray[i + 1])
                    {
                        int t = myarray[i];
                        myarray[i] = myarray[i + 1];
                        myarray[i + 1] = t;
                        swapped = true;
                        Console.WriteLine(Convert.ToString(myarray[0] + "," + myarray[1] + "," + myarray[2] + "," + myarray[3] + "," + myarray[4]));
                    }

                }

            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:20:12.553

`n`和`j` 变量似乎是不必要的。离开`n`和`j`退出你的程序，并在你的 for 循环中，执行以下操作：

```
 for (int i = 0; i < (array1.Length - 1); i++) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-30T20:15:36.547

**冒泡排序**

```
using System;  

class AscendingBubbleSort 
{     
    public static void Main()
    {
        int i = 0,j = 0,t = 0;
        int []c=new int[20];
        for(i=0;i<20;i++)
        {
            Console.WriteLine("Enter Value p[{0}]:", i);
            c[i]=int.Parse(Console.ReadLine());
        }
        // Sorting: Bubble Sort
        for(i=0;i<20;i++)
        {
            for(j=i+1;j<20;j++)
            {
                if(c[i]>c[j])
                {
                    Console.WriteLine("c[{0}]={1}, c[{2}]={3}", i, c[i], j, c[j]);
                    t=c[i];
                    c[i]=c[j];
                    c[j]=t;
                }
            }
        }
        Console.WriteLine("Here comes the sorted array:");
        // Print the contents of the sorted array
        for(i=0;i<20;i++)
        {
            Console.WriteLine ("c[{0}]={1}", i, c[i]);
        }
    }
} 
```

[资源](http://www.go4expert.com/forums/showthread.php?t=4461)

# java - 实现 IWorkbenchPreferencePage 在查看首选项页面时会提供 NPE

> ID：11728818
> 
> 赞同：0
> 
> 时间：2012-07-30T20:07:39.580
> 
> 标签：java, eclipse, swt, eclipse-rcp

我有一个需要一些首选项页面的 Eclipse RCP (3.6) 插件。目前我什至无法工作。我搜索了教程，但它们都使用不同版本的 IWorkbenchPreferencePage（似乎）。

这是堆栈跟踪：[http://codepad.org/tu2WTwAA](http://codepad.org/tu2WTwAA)，它有以下第一个异​​常：

```
java.lang.NullPointerException at org.eclipse.jface.preference.PreferenceDialog.showPage(PreferenceDialog.java:1282) 
```

以下是我的 plugin.xml 条目，这无关紧要，因为节点位于首选项视图中。

```
<extension
      point = "org.eclipse.ui.preferencePages">
      <page id="com.test.menuplugin.preferences.general"
           class="com.gdeb.menuplugin.preferences.GeneralPreferences"
           name="Helpers">
      </page>
</extension> 
```

以下是我的**GeneralPreferences**课程：[http ://dpaste.com/hold/778180/](http://dpaste.com/hold/778180/)

我浏览了 API ( [IWorkbenchPreferencePage@Eclipse](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/IWorkbenchPreferencePage.html) ) 仍然没有任何线索。我什至尝试查看 Vogelles 教程，但这与提供的界面太不同了。

我做错了什么，我应该实现某种偏好对象，如 PreferenceDialog （如果你想要独立于全局偏好的偏好）？

谢谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T05:41:35.167

对不起，那是一个错误的答案。

在 Eclipse 3.7 中，该行上的 NPE 可能是由`null`您的函数返回的结果引起的`computeSize`（而且看起来您的类字段`size`可能就`null`在此时）。查看`org.eclipse.jface.preference.PreferencePage.computeSize()`平台如何计算大小。

# postgresql - 如何使用 Python2.7 在 PostgreSQL 中组合行

> ID：11728825
> 
> 赞同：-1
> 
> 时间：2012-07-30T20:07:58.960
> 
> 标签：postgresql, python-2.7

我有以下格式的数据：

```
|------------------------|
| Product | Color | Year |
|------------------------|
|  Ball   | Blue  | 1999 |
|  Ball   | Blue  | 2000 |
|  Ball   | Blue  | 2001 |
|  Stick  | Green | 1984 |
|  Stick  | Green | 1985 |
|------------------------| 
```

如何将其转换为以下内容：

```
|-----------------------------|
| Product | Color | Year Range|
|-----------------------------|
|  Ball   | Blue  | 1999-2001 |
|  Stick  | Green | 1984-1985 |
|-----------------------------| 
```

数据位于 PostgreSQL 表中，包含 187,000 多行迫切需要以这种方式合并的行。我如何使用 Python 2.7 来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:21:21.907

> 数据位于 PostgreSQL 表中，包含 187,000 多行迫切需要以这种方式合并的行。

它可能迫切需要以这种方式合并以进行报告，但几乎可以肯定它*不需要*以这种方式合并以进行存储。在这里轻轻地走。

`GROUP BY`只需使用一个子句，您就可以获取大致该格式的数据。（我使用“product_color_years”作为表名。）

```
select product, color, min(year), max(year)
from product_color_years
group by product, color 
```

要将年份合并到单个列中，请使用连接运算符。

```
select product, color, min(year) || '-' || max(year) year_range
from product_color_years
group by product, color 
```

This works only as long as

*   there aren't any gaps in the year range, or
*   there are gaps, but you don't care.

If there are gaps that you'd like to see reported like this:

```
product  color  year_range
--
Ball     Blue   1999-2001
Ball     Blue   2003-2005
Stick    Mauve  2000, 2010 
```

then you're probably better off using a report writer. (For example, Google "python reports".) The SQL above will report these blue balls as `Ball Blue 1999-2005`, which might not be what you want.

# javascript - HTML5 Webworkers - 一个文件

> ID：11728829
> 
> 赞同：1
> 
> 时间：2012-07-30T20:08:17.173
> 
> 标签：javascript, multithreading, html, web-worker

目前我有以下代码：

这是在我的 HTML 文档中。

```
<script language="JavaScript" type="text/javascript" src="workerTest.js"></script> 
```

现在根据我的理解和研究，工人必须来自外部文件。

所以在我的workerTest.js中我有

```
var iWorker = new Worker('workerTest.js'); 
```

我更愿意在我的 workerTest.js 中声明我的所有作品和代码，并能够从外部文件中创建它们。

所以像

```
var iWorker2 = new Worker('scripttagid'); 
```

显然上面的代码是错误的，但我希望它能说明我的观点。

这可能吗？如果有人可以指出我正确的方向吗？可能是一些示例代码？

如果这不可能，那么避免大量工作文件的最佳方法是什么。因为会有很多作品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:12:14.030

嗯，有点：

```
<!-- won't be executed by browser because of the invalid type -->
<script type="text/worker" id="worker-code">
while(true) {

}
</script> 
```

Javascript：

```
var workerCode = document.getElementById("worker-code").innerHTML;
//Could also just be var workerCode = 'while(true){}';

var BlobBuilder = window.WebKitBlobBuilder || window.MozBlobBuilder || window.OBlobBuilder || window.BlobBuilder,
    blobBuilder = new BlobBuilder(),
    URL = window.webkitURL || window.URL,
    blob, workerURL;

blobBuilder.append(workerCode);
blob = blobBuilder.getBlob("text/javascript");

workerURL = URL.createObjectURL( blob );
var iWorker = new Worker(workerURL); 
```

请注意，您也不需要该元素，只是将代码存储在字符串`'while(true){}'`中很难维护。

演示： http: [//jsfiddle.net/pmSSf/](http://jsfiddle.net/pmSSf/)（处理器使用率会飙升，但您可以使用该页面，因为它不在 UI 线程中运行）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:21:27.537

此外，从[这些文档](http://www.html5rocks.com/en/tutorials/workers/basics/ "这些文档")中，我发现您可以加载外部脚本，或者实现 subworkers 或 inline workers。

内联工作者使用 Esailija 描述的 BlobBuilder 技术。

引用：

加载外部脚本

您可以使用 importScripts() 函数将外部脚本文件或库加载到工作程序中。该方法采用零个或多个字符串来表示要导入的资源的文件名。

此示例将 script1.js 和 script2.js 加载到 worker 中：

工人.js：

```
importScripts('script1.js');
importScripts('script2.js'); 
```

也可以写成一个单独的 import 语句：

```
importScripts('script1.js', 'script2.js'); 
```

子工

工人有能力产生童工。这对于在运行时进一步分解大型任务非常有用。但是，subworker 有一些注意事项：

子工作者必须托管在与父页面相同的源中。subworkers 中的 URI 是相对于其父 worker 的位置（而不是主页）进行解析的。请记住，大多数浏览器为每个工作人员生成单独的进程。在你去生成一个工人农场之前，要小心不要占用太多的用户系统资源。造成这种情况的一个原因是在主页面和工作人员之间传递的消息是复制的，而不是共享的。请参阅通过消息传递与工作人员通信。

有关如何生成 subworker 的示例，请参阅规范中的示例。

在线工人

如果您想即时创建工作脚本，或者创建一个独立的页面而不需要创建单独的工作文件，该怎么办？使用新的 BlobBuilder 接口，您可以通过创建 BlobBuilder 并将工作程序代码作为字符串附加到与主逻辑相同的 HTML 文件中“内联”工作程序：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-18T12:56:28.337

你可以使用我的小插件[https://github.com/zevero/worker-create](https://github.com/zevero/worker-create)

```
var worker_url = Worker.create(function(e){
  self.postMessage('Example post from Worker'); //your code here
});
var worker = new Worker(worker_url); 
```

# python - 有效地将函数并行应用于分组的 pandas DataFrame

> ID：11728836
> 
> 赞同：89
> 
> 时间：2012-07-30T20:08:57.407
> 
> 标签：python, pandas, multiprocessing, shared-memory

我经常需要将函数应用于非常大`DataFrame`（混合数据类型）的组，并希望利用多个内核。

我可以从组中创建一个迭代器并使用多处理模块，但它效率不高，因为每个组和函数的结果都必须为进程之间的消息传递进行腌制。

有什么办法可以避免酸洗甚至`DataFrame`完全复制？看起来多处理模块的共享内存功能仅限于`numpy`数组。还有其他选择吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-05-21T10:18:25.933

从上面的评论来看，这似乎是计划了一段时间（我刚刚注意到`pandas`还有一个看起来很有趣的[`rosetta`项目）。](https://pypi.python.org/pypi/rosetta/0.2.4)

[但是，在将每个](http://www.google.co.il/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CB0QFjAA&url=http%3A%2F%2Fwww.openmp.org%2F&ei=HKpdVfyVJcj8ULXHgcAF&usg=AFQjCNGlD5aZM8ZP3Qx7WXT74Y7C54jLNQ&bvm=bv.93756505,d.d24)`pandas`并行`pandas`功能[`cython`](http://cython.org/)都合并到.

这是一个编写并行 groupby-sum 的简短示例，其用法如下：

```
import pandas as pd
import para_group_demo

df = pd.DataFrame({'a': [1, 2, 1, 2, 1, 1, 0], 'b': range(7)})
print para_group_demo.sum(df.a, df.b) 
```

输出是：

```
 sum
key     
0      6
1      11
2      4 
```

* * *

**注意**毫无疑问，这个简单示例的功能最终将成为`pandas`. 然而，有些事情在 C++ 中并行化一段时间会更自然，重要的是要知道将其组合到`pandas`.

* * *

为此，我编写了一个简单的单源文件扩展名，其代码如下。

它从一些导入和类型定义开始

```
from libc.stdint cimport int64_t, uint64_t
from libcpp.vector cimport vector
from libcpp.unordered_map cimport unordered_map

cimport cython
from cython.operator cimport dereference as deref, preincrement as inc
from cython.parallel import prange

import pandas as pd

ctypedef unordered_map[int64_t, uint64_t] counts_t
ctypedef unordered_map[int64_t, uint64_t].iterator counts_it_t
ctypedef vector[counts_t] counts_vec_t 
```

C++`unordered_map`类型用于单线程求和， C++类型用于`vector`所有线程求和。

现在到函数`sum`。它从快速访问的[类型化内存视图开始：](http://docs.cython.org/src/userguide/memoryviews.html)

```
def sum(crit, vals):
    cdef int64_t[:] crit_view = crit.values
    cdef int64_t[:] vals_view = vals.values 
```

该函数继续通过将半等分到线程（这里硬编码为 4），并让每个线程将其范围内的条目相加：

```
 cdef uint64_t num_threads = 4
    cdef uint64_t l = len(crit)
    cdef uint64_t s = l / num_threads + 1
    cdef uint64_t i, j, e
    cdef counts_vec_t counts
    counts = counts_vec_t(num_threads)
    counts.resize(num_threads)
    with cython.boundscheck(False):
        for i in prange(num_threads, nogil=True): 
            j = i * s
            e = j + s
            if e > l:
                e = l
            while j < e:
                counts[i][crit_view[j]] += vals_view[j]
                inc(j) 
```

线程完成后，该函数将所有结果（来自不同范围）合并为一个`unordered_map`：

```
 cdef counts_t total
    cdef counts_it_t it, e_it
    for i in range(num_threads):
        it = counts[i].begin()
        e_it = counts[i].end()
        while it != e_it:
            total[deref(it).first] += deref(it).second
            inc(it) 
```

剩下的就是创建一个`DataFrame`并返回结果：

```
 key, sum_ = [], []
    it = total.begin()
    e_it = total.end()
    while it != e_it:
        key.append(deref(it).first)
        sum_.append(deref(it).second)
        inc(it)

    df = pd.DataFrame({'key': key, 'sum': sum_})
    df.set_index('key', inplace=True)
    return df 
```

# asp.net - 报告服务 - 数据集没有查询但可以工作...查询可以在哪里找到？

> ID：11728837
> 
> 赞同：0
> 
> 时间：2012-07-30T20:09:00.583
> 
> 标签：asp.net, .net, sql, reporting-services

我今天收到了一份包含普通嵌入式数据集（dataset1）和数据源（datasource1）的报告，但数据集查询只是一个数字：'1411'。以前的程序员手动将字段（不是计算字段）输入到字段选项卡中。

当我单击运行时，它可以工作。

**如果没有适当的查询，它是如何填充页面的？**

- 只有 1 个名为 (table1) 的 tablix。它也指向 dataset1。

- 在报告属性中没有 VB 代码。

-RDL XML：在 dataset1 的标签下：

```
<DataSourceName>datasource1</DataSourceName> 
<CommandText>=1411</CommandText> 
```

我没有看到列出的其他 SQL。服务器上可能有其他东西触发它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:08:31.673

“datasource1”是什么类型的数据源？

如果是RDBMS，请检查数据库中是否存在名称为“1411”的存储过程或函数。

例如，在 SQL Server 中，您可以想象有一个名为 [1411] 的存储过程，它返回一个数据集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T20:14:52.943

我假设我们正在谈论 RDL（报告定义语言）。您可以使用您最喜欢的文本编辑器打开此报告并查看 CommandText XML 标记以找到相关的查询。希望有帮助。

# sql - Oracle查找股东子查询

> ID：11728839
> 
> 赞同：0
> 
> 时间：2012-07-30T20:09:19.670
> 
> 标签：sql, oracle

试图在这里找到所有持有任何一家公司超过 0.5% 股份的股东是我的查询我相信我很接近也附上的图片有架构

```
![Select  Sh.Share_Holder_Id Shareholderid,
       Sh.First_Name||' '||Sh.Last_Name Shareholders, 
       c.name,
       sum(T.Share_Amount) ShareAmount
    From Trades T  
      Inner Join 
      Share_Holders Sh 
        On 
          T.Share_Holder_Id =Sh.Share_Holder_Id
      Inner Join
      Shares S
        On
      S.Share_Id =T.Share_Id
      Inner Join 
      Companies C
        on
      C.Company_Id=S.Company_Id
              Where exists (
          Select 
             sum(case when shs.amount IS NULL THEN 1 ELSE 0 END)/count (*)*100
   From Shares S1
      Inner Join Share_Holder_Shares shs
        On 
Shs.Share_Id=S1.Share_Id
        --   where  Shs.Amount/t.share_amount * 100 > 0.5
)
Group By Sh.Share_Holder_Id,Sh.First_Name||' '||Sh.Last_Name,C.Name
order by Shareholderid; 
```

![舍玛](../Images/bc14e16ebeb5b6ba7772d352118ea05f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:18:44.070

试试这个解决方案；它使用`RATIO_TO_REPORT`.

```
SELECT   y.share_holder_id
,        y.shareholders
,        y.portion_of_co
,        y.company_name
FROM    (SELECT x.share_holder_id
         ,      x.shareholders
         ,      RATIO_TO_REPORT(x.share_amount) 
                OVER (PARTITION BY x.company_id) portion_of_co
         ,      c.name                           company_name
         FROM  (SELECT  sh.share_holder_id
                ,       sh.first_name
                        || ' '
                        || sh.last_name     shareholders
                ,       s.company_id
                ,       SUM(t.share_amount) share_amount
                FROM    trades t
                INNER JOIN share_holders sh
                ON         t.share_holder_id = sh.share_holder_id
                INNER JOIN shares        s
                ON         s.share_id = t.share_id
                GROUP BY   sh.share_holder_id
                ,          sh.first_name 
                           || ' '
                           || sh.last_name
                ,          s.company_id
                ) x
         INNER JOIN companies c
         ON         x.company_id = c.company_id
         ) y
WHERE    y.portion_of_co > 0.005
ORDER BY y.share_holder_id
; 
```

# android - 更改可绘制名称后Android中的ClassCastException？

> ID：11728844
> 
> 赞同：3
> 
> 时间：2012-07-30T20:09:46.487
> 
> 标签：android, classcastexception, xml-drawable

我正在编写一个 Android 应用程序并且遇到了一个非常奇怪的情况。我有一个动画列表 xml 文件，该文件是为名为“loading.xml”的动画加载图形创建的，并且我将其设置为代码中 ImageView 的背景。它是这样的：

```
public void startLoading() {
   if(!isLoading) {
      loading.setBackgroundResource(R.drawable.loading);
      loading.post(new Runnable() {
         public void run() {
            anim = (AnimationDrawable) loading.getBackground();
            anim.start();
         }
      });

      flMask.setBackgroundResource(R.drawable.mask_loading);
      flMask.setVisibility(View.VISIBLE);
      flMask.bringToFront();

      isLoading = true;
   }
} 
```

这非常有效，没有任何问题。但是，如果我将 'loading.xml' 重命名为 'anim_loading.xml' （以使其与我通常的命名方案保持一致），我会得到一个接近的力量

`java.lang.ClassCastException: android.graphics.drawable.ColorDrawable`

在哪里

`anim = (AnimationDrawable)loading.getBackground();`

更改名称后，它会强制关闭，如果我将其更改回“loading.xml”，它会再次正常工作。

我真的被这个难住了。我尝试使用正确的名称创建一个全新的文件，各种清理/构建，关闭/重新打开 Eclipse，关闭/重新打开 AVD，擦除 AVD 并重新安装，我尝试将 xml 文件完全重命名为其他文件，然后没有其他同名资源。到目前为止，除了保留名为“loading.xml”的文件之外，没有任何效果，至少它可以工作，但很烦人。我找不到任何有相同类型问题的人，这与 SO 和互联网一样庞大，通常意味着我在某个地方错过了一些愚蠢的东西。

有没有人知道为什么它不允许更改此文件的名称？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T20:00:38.163

在放弃并让它独自呆了一会儿之后，我偶然发现了这个问题的答案！

显然，Android 存在某种错误，导致 res/drawable 目录中的第一个文件被视为 ColorDrawable，而不管它实际上是什么。之前，当我试图更改文件名时，新名称将它放在目录列表的顶部，这使得这个错误能够显示出来。如果没有更改名称，我的可绘制目录中的顶部项目恰好是 ColorDrawable，所以直到我尝试更改该名称之后，我才注意到这个奇怪的错误。

为了解决这个问题（或者更确切地说，解决这个问题），我在 res/drawable 目录中创建了一个名为 a.xml 的空虚拟文件。尽管听起来很奇怪，但它解决了所有问题！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-02-03T12:25:55.363

您应该保存在可绘制 res/drawable/rocket.xml

它会解决这个问题。

[![截屏](../Images/eb7d839b7bce0c582de7c4d90b7153e0.png)](https://i.stack.imgur.com/9suva.png)

# asp.net-mvc - URL 中的点导致 404 与 ASP.NET mvc 和 IIS

> ID：11728846
> 
> 赞同：316
> 
> 时间：2012-07-30T20:09:58.873
> 
> 标签：asp.net-mvc, iis, iis-7, iis-express, iis-8

我有一个项目要求我的 URL 在路径中有点。例如，我可能有一个 URL，例如 www.example.com/people/michael.phhelps

带有点的 URL 会生成 404。我的路由很好。如果我传入迈克尔菲尔普斯，没有点，那么一切正常。如果我添加点，我会收到 404 错误。示例站点在带有 IIS8 Express 的 Windows 7 上运行。URLScan 未运行。

我尝试将以下内容添加到我的 web.config 中：

```
<security>
  <requestFiltering allowDoubleEscaping="true"/>
</security> 
```

不幸的是，这并没有什么不同。我刚刚收到 404.0 Not Found 错误。

这是一个 MVC4 项目，但我认为这无关紧要。我的路由工作正常，并且我期望的参数在那里，直到它们包含一个点。

我需要配置什么才能在我的 URL 中添加点？

* * *

## 回答 #1

> 赞同：387
> 
> 时间：2012-08-28T01:01:06.993

我通过编辑我的网站的 HTTP 处理程序来完成这项工作。对于我的需要，这很好用并解决了我的问题。

我只是添加了一个新的 HTTP 处理程序来查找特定的路径条件。如果请求匹配，它会正确发送到 .NET 进行处理。我对 URLRewrite hack 或启用 RAMMFAR 的解决方案更满意。

例如，让 .NET 处理 URL **www.example.com/people/michael.phelps 将以**下行添加到您网站的 web.config`system.webServer / handlers`元素中：

```
<add name="ApiURIs-ISAPI-Integrated-4.0"
     path="/people/*"
     verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS"
     type="System.Web.Handlers.TransferRequestHandler"
     preCondition="integratedMode,runtimeVersionv4.0" /> 
```

**编辑**

还有其他帖子表明此问题的解决方案是`RAMMFAR`或`RunAllManagedModulesForAllRequests`。启用此选项将为所有请求启用所有托管模块。这意味着静态文件（如图像、PDF 和其他所有文件）将在不需要时由 .NET 处理。除非您有特定情况，否则最好不要使用此选项。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-08-21T23:19:01.197

经过一番摸索后，我发现 RelaxUrlToFileSystemMapping 对我根本不起作用，在我的情况下起作用的是将 RAMMFAR 设置为 true，同样适用于 (.net 4.0 + mvc3) 和 (.net 4.5 + mvc4)。

```
<system.webserver>
    <modules runAllManagedModulesForAllRequests="true"> 
```

设置 RAMMFAR 时请注意[有关 RAMMFAR 和性能的 Hanselman 帖子](http://www.hanselman.com/blog/BackToBasicsDynamicImageGenerationASPNETControllersRoutingIHttpHandlersAndRunAllManagedModulesForAllRequests.aspx)

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2012-07-30T21:39:09.997

我相信您必须在 web.config 中设置属性 RelaxUrlToFileSystemMapping。 [Haack](http://haacked.com/archive/2010/04/29/allowing-reserved-filenames-in-URLs.aspx)不久前写了一篇关于此的文章（还有一些其他[SO 帖子](https://stackoverflow.com/questions/9273987/asp-net-mvc-url-route-supporting-dot)提出了相同类型的问题）

```
<system.web>
<httpRuntime relaxedUrlToFileSystemMapping="true" /> 
```

**编辑** 从下面的评论中，.NET / IIS 的更高版本可能需要它在`system.WebServer`元素中。

```
<system.webServer>
<httpRuntime relaxedUrlToFileSystemMapping="true" /> 
```

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2015-05-30T15:41:12.203

在所有不同的补救措施之后，我在这个问题上停留了很长时间，但无济于事。

我注意到，当在包含点 [.] 的 URL 末尾添加正斜杠 [/] 时，它没有引发 404 错误并且它确实有效。

我终于解决了这个问题，使用像 IIS URL Rewrite 这样的 URL 重写器来观察特定模式并附加训练斜线。

我的 URL 如下所示：/Contact/~firstname.lastname 所以我的模式很简单：/Contact/~(.*[^/])$

我从 Scott Forsyth 那里得到了这个想法，请参见下面的链接： [http ://weblogs.asp.net/owscott/handing-mvc-paths-with-dots-in-the-path](http://weblogs.asp.net/owscott/handing-mvc-paths-with-dots-in-the-path)

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2013-05-17T11:18:49.320

只需将此部分添加到 Web.config 中，对 route/{*pathInfo} 的所有请求都将由指定的处理程序处理，即使 pathInfo 中有点。（取自 ServiceStack MVC Host Web.config 示例和这个答案[https://stackoverflow.com/a/12151501/801189](https://stackoverflow.com/a/12151501/801189)）

这应该适用于 IIS 6 和 7。您可以通过修改 'add' 元素中的 path="*" 将特定处理程序分配给 'route' 之后的不同路径

```
 <location path="route">
    <system.web>
      <httpHandlers>
        <add path="*" type="System.Web.Handlers.TransferRequestHandler" verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" />
      </httpHandlers>
    </system.web>
    <!-- Required for IIS 7.0 -->
    <system.webServer>
      <modules runAllManagedModulesForAllRequests="true" />
      <validation validateIntegratedModeConfiguration="false" />
      <handlers>
        <add name="ApiURIs-ISAPI-Integrated-4.0" path="*" type="System.Web.Handlers.TransferRequestHandler" verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" preCondition="integratedMode,runtimeVersionv4.0" />
      </handlers>
    </system.webServer>
  </location> 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-02-24T18:54:08.617

MVC 5.0 解决方法。

许多建议的答案似乎在 MVC 5.0 中不起作用。

由于上一节中的 404 点问题可以通过用斜杠结束该节来解决，所以这是我使用的小技巧，简洁明了。

在您的视图中保留一个方便的占位符：

```
@Html.ActionLink("Change your Town", "Manage", "GeoData", new { id = User.Identity.Name }, null) 
```

添加一点 jquery/javascript 来完成工作：

```
<script>
    $('a:contains("Change your Town")').on("click", function (event) {
        event.preventDefault();
        window.location.href = '@Url.Action("Manage", "GeoData", new { id = User.Identity.Name })' + "/";
    });</script> 
```

请注意尾随斜杠，它负责更改

```
http://localhost:51003/GeoData/Manage/user@foo.com 
```

进入

```
http://localhost:51003/GeoData/Manage/user@foo.com/ 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-11-29T18:00:54.547

对于那些只在一个网页上有这个的人来说，这是一个超级简单的答案。编辑您的操作链接并在其末尾添加一个 +“/”。

```
 @Html.ActionLink("Edit", "Edit", new { id = item.name + "/" }) | 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-08-01T18:08:55.873

Depending on how important it is for you to keep your URI without querystrings, you can also just pass the value with dots as part of the querystring, not the URI.

E.g. www.example.com/people?name=michael.phelps will work, without having to change any settings or anything.

You lose the elegance of having a clean URI, but this solution does not require changing or adding any settings or handlers.

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-08-29T16:43:33.920

您可能需要考虑使用破折号而不是句点。

在[Pro ASP MVC 3 框架](https://rads.stackoverflow.com/amzn/click/com/1430234040)中，他们建议关于制作友好的 URL：

> 避免使用符号、代码和字符序列。如果您需要单词分隔符，请使用破折号 (/my-great-article)。下划线不友好，URL 编码的空格很奇怪（/my+great+article）或恶心（/my%20great%20article）。

它还提到 URL 应该易于阅读和更改。也许考虑使用破折号而不是点的原因也来自同一本书：

> 不要对 HTML 页面使用文件扩展名（.aspx 或 .mvc），但应将它们用于专门的文件类型（.jpg、.pdf、.zip 等）。如果您适当地设置 MIME 类型，Web 浏览器不会关心文件扩展名，但人们仍然希望 PDF 文件以 .pdf 结尾

因此，虽然一个句点对人类来说仍然是可读的（尽管它的可读性不如破折号，IMO），但根据句点之后的内容，它可能仍然有点令人困惑/误导。如果某人的姓氏是 zip 怎么办？然后 URL 将是 /John.zip 而不是 /John-zip，这甚至可能对编写应用程序的开发人员产生误导。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-05-23T09:27:31.350

尝试了上述所有解决方案，但没有一个对我有用。起作用的是我卸载了 .NET 版本 > 4.5，包括它的所有多语言版本；最终，我逐个添加了更新的（仅限英文）版本。现在我系统上安装的版本是这样的：

*   2.0
*   3.0
*   3.5 4
*   4.5
*   4.5.1
*   4.5.2
*   4.6
*   4.6.1

它在这一点上仍然有效。我害怕安装 4.6.2，因为它可能会搞砸一切。

所以我只能推测 4.6.2 或所有那些非英语版本都搞乱了我的配置。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-06-13T08:49:20.083

作为解决方案，还可以考虑编码为不包含 symbol 的格式`.`，如 base64。

在js中应该添加

```
btoa(parameter); 
```

在控制器中

```
byte[] bytes = Convert.FromBase64String(parameter);
string parameter= Encoding.UTF8.GetString(bytes); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-02-21T09:35:01.283

就像更改 path=" 一样简单*。" 到路径=“* ”。只需在 web.config 中删除 ExensionlessUrlHandler-Integrated-4.0 路径中的点即可。

这是一篇不错的文章[https://weblog.west-wind.com/posts/2015/Nov/13/Serving-URLs-with-File-Extensions-in-an-ASPNET-MVC-Application](https://weblog.west-wind.com/posts/2015/Nov/13/Serving-URLs-with-File-Extensions-in-an-ASPNET-MVC-Application)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-10-16T17:30:56.010

是否可以更改您的 URL 结构？
对于我正在做的事情，我尝试了一条路线

```
url: "Download/{fileName}" 
```

但它失败了任何有 . 在里面。

我将路线切换到

```
 routes.MapRoute(
        name: "Download",
        url:  "{fileName}/Download",
        defaults: new { controller = "Home", action = "Download", }
    ); 
```

现在我可以放进去`localhost:xxxxx/File1.doc/Download`，它工作正常。

我在视图中的助手也接受了它

```
 @Html.ActionLink("click here", "Download", new { fileName = "File1.doc"}) 
```

这也链接到`localhost:xxxxx/File1.doc/Download`格式。

也许您可以在路线的末尾放置一个不需要的词，例如“/view”或操作，这样您的属性就可以以尾随之`/`类的结尾`/mike.smith/view`

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-02-12T18:47:57.960

[我能够使用https://stackoverflow.com/a/13082446/1454265](https://stackoverflow.com/a/13082446/1454265)上的解决方案和替换路径来解决我的这个问题的特定版本（必须使 /customer.html 路由到 /customer，不允许尾部斜杠）="*.html"。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-12-08T11:42:36.990

**这是我在 IIS 7.5 和 .NET Framework 4.5 环境中找到的错误 404 的最佳解决方案**，并且不使用：*runAllManagedModulesForAllRequests="true"*。

我关注了这个帖子：[https](https://forums.asp.net/t/2070064.aspx?Web+API+2+URL+routing+404+error+on+IIS+7+5+IIS+Express+works+fine) ://forums.asp.net/t/2070064.aspx?Web+API+2+URL+routing+404+error+on+IIS+7+5+IIS+Express+works+fine我已经相应地修改了我的 web.config，现在 MVC Web 应用程序在 IIS 7.5 和 .NET Framework 4.5 环境中运行良好。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-06-14T09:59:04.297

此外，（相关）检查处理程序映射的顺序。我们在它之后的路径中有一个 .ashx 和一个 .svc（例如 /foo.asmx/bar.svc/path）。.svc 映射首先是 .svc 路径的 404，它在 .asmx 之前匹配。没有想太多，但也许编码路径的 url 会解决这个问题。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-05-10T21:53:27.193

将 URL 重写规则添加到 Web.config 存档。您需要在 IIS 中已安装[URL 重写模块。](https://www.iis.net/downloads/microsoft/url-rewrite)使用以下重写规则作为您自己的灵感。

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>

<system.webServer>
  <rewrite>
    <rules>
      <rule name="Add trailing slash for some URLs" stopProcessing="true">
        <match url="^(.*(\.).+[^\/])$" />
          <conditions>
              <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
              <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
          </conditions>
          <action type="Redirect" url="{R:1}/" />
      </rule>
    </rules>
    </rewrite>
</system.webServer>

</configuration> 
```

* * *

## 回答 #18

> 赞同：-3
> 
> 时间：2015-12-20T16:12:27.177

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace WebApplication1.Controllers
{
    [RoutePrefix("File")]
    [Route("{action=index}")]
    public class FileController : Controller
    {
        // GET: File
        public ActionResult Index()
        {
            return View();
        }

        [AllowAnonymous]
        [Route("Image/{extension?}/{filename}")]
        public ActionResult Image(string extension, string filename)
        {
            var dir = Server.MapPath("/app_data/images");

            var path = Path.Combine(dir, filename+"."+ (extension!=null?    extension:"jpg"));
           // var extension = filename.Substring(0,filename.LastIndexOf("."));

            return base.File(path, "image/jpeg");
        }
    }
} 
```

# php - 使用 PHP 将 CSV 导入 mysql

> ID：11728854
> 
> 赞同：0
> 
> 时间：2012-07-30T20:10:36.160
> 
> 标签：php, mysql, zend-framework, csv

我已将我的 csv 文件插入 MYSQL。有时它会插入，但数据库中有一些特殊字符，例如 0、'Ã8。我正在使用 zend 框架。

```
public function indexAction() {
    $db = Zend_Db_Table::getDefaultAdapter();
    $path = 'c:/RAA/test.csv';
    $row = 1;
    $result = array();
    if (($handle = fopen("c:/RAA/test.csv", "r")) !== FALSE) {
        while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
            $num = count($data);
            $row++;
            for ($i=0; $i < $num; $i++) {
                $result = array(
                    'id' => $data[$i],
                    'name' => $data[$i],
                    'description' => $data[$i]
                );
            }
            $db->insert('test', $result);
        }
    }
    exit;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:12:22.553

你应该检查你的默认字符集！像这样强制它`application.ini`：

```
resources.db.params.charset = utf8 
```

`utf8`用您正在使用的字符集替换（如果需要）！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:39:19.557

您应该考虑使用 MySQL 的内置`LOAD DATA INFILE`语句将该 CSV 文件导入数据库。根据您要导入的行数，这将大大缩短导入时间，因为它是一个简单的查询，而不是数据库服务器上的一堆查询。查看[LOAD DATA INFILE 语法](http://dev.mysql.com/doc/refman/5.6/en/load-data.html)文档以获取更多信息，您将在其中找到有关如何在代码中应用它的示例。

# ruby-on-rails - Linux 中的 Shell 脚本被 rake 中止！未找到 Rakefile，但无法从 shell 运行

> ID：11728858
> 
> 赞同：0
> 
> 时间：2012-07-30T20:10:44.380
> 
> 标签：ruby-on-rails

所以我试图运行这个脚本，它在提示符下运行良好，但在 shell 脚本中失败：

```
rake redmine:email:receive_imap unknown_user=accept no_permission_check=1 RAILS_ENV="production" host=mail.domain.org port=993 username=helpdesk@domain.org password=XXXXXX ssl=1 move_on_success=Processed move_on_failure=Failed project=emailsupport tracker=Support subject=EmailSupport status=New 
```

这是我尝试使用 sh /opt/redmine/scripts/redmine-rake-email.sh 运行的 .sh 文件，并且正在中止 rake！没有找到 Rakefile，我正在 /opt/redmine 目录中运行它，该目录确实有一个 Rakefile。

*编辑*实际上我的脚本现在看起来像这样。还是不行。

```
SHELL=/bin/bash
PATH=$PATH:/opt/redmine:/usr/local/bin:/usr/local/rvm/gems/ruby-1.8.7-p334/bin
cd /opt/redmine 
rake redmine:email:receive_imap unknown_user=accept no_permission_check=1 RAILS_ENV="production" host=mail.domain.org port=993 username=helpdesk@domain.org password=XXXXXX ssl=1 move_on_success=Processed move_on_failure=Failed project=emailsupport tracker=Support subject=EmailSupport status=New 
```

这是我运行 echo $PATH 时的 PATH：

```
/usr/local/rvm/gems/ruby-1.8.7-p334/bin:/usr/local/rvm/gems/ruby-1.8.7-p334@global/bin:/usr/local/rvm/rubies/ruby-1.8.7-p334/bin:/usr/local/bin:/usr/kerberos/sbin:/usr/kerberos/bin:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin:/opt/redmine:/usr/local/bin:/usr/local/rvm/gems/ruby-1.8.7-p334/bin 
```

我被卡住了，不确定出了什么问题。感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:55:44.833

在 . 之后添加`-f /opt/redmine/Rakefile`到 rake 参数`rake`。

# r - R向量子集语法？

> ID：11728859
> 
> 赞同：0
> 
> 时间：2012-07-30T20:10:53.413
> 
> 标签：r

我在 R 中工作，发现了一个奇怪的行为。我可以解决它，但它看起来很奇怪，所以我想知道是否有人可以解释为什么我得到以下输出：

```
> xlabs <- 1:367
> i <- c(2:5)
> Date[xlabs == i]
character(0)
Warning message:
In xlabs == i :
  longer object length is not a multiple of shorter object length
> Date[xlabs = i]
[1] "2011-07-19" "2011-07-20" "2011-07-21" "2011-07-22" 
```

我不明白为什么逻辑等号不适用于这种情况，但简单的等号可以。我正在写一本关于如何在 R 中进行特定分析过程的快速手册，我不想为了我的读者而使用“仅仅因为”的解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T20:16:02.543

您想要的运算符是`%in%`：

```
Date[xlabs %in% i] 
```

`=`没有做你认为的那样。查看示例`xlabs` *的*最后一行；您正在设置`xlabs`为`i`好像您所做`xlabs <- i`的那样`=`几乎可以替代`<-`.

`==`不起作用，因为它进行比较的方式。考虑：

```
> 1:10 == 5:7
 [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
Warning message:
In 1:10 == 5:7 :
  longer object length is not a multiple of shorter object length 
```

那是在做：

```
> 1 == 5
[1] FALSE
> 2 == 6
[1] FALSE
> 3 == 7
[1] FALSE
> 4 == 5
[1] FALSE
> 5 == 6
[1] FALSE
> 6 == 7
[1] FALSE
> 7 == 5
[1] FALSE
> 8 == 6
[1] FALSE
> 9 == 7
[1] FALSE
> 10 == 5
[1] FALSE 
```

R 通过重复较短的向量以匹配较长向量的长度来回收较短的向量。因为`length(xlabs)`不是`length(i)`你得到警告的确切倍数，但比较本身没有选择任何东西

```
> 1[FALSE]
numeric(0) 
```

因此是空向量（在您的情况下是空字符向量）。

# ruby-on-rails - ActiveRecord::RecordNotFound:

> ID：11728879
> 
> 赞同：0
> 
> 时间：2012-07-30T20:12:32.657
> 
> 标签：ruby-on-rails, testing, rspec, record

我使用 rspec 使用下一个简单代码测试我的应用程序：

```
require 'spec_helper'

    describe CarsController do
    describe "GET 'new'" do
            it "should be successful" do
            visit new_user_car_path(:user_id=>"28")
            response.should be_success
            end
        end
    end 
```

当我运行它时，我收到了这条消息

```
Failure/Error: visit new_user_car_path(:user_id=>"28")
 ActiveRecord::RecordNotFound:
   Couldn't find User with id=28
 # ./app/controllers/cars_controller.rb:3:in `new'
 # ./spec/controllers/tanking_logs_controller_spec.rb:6:in `block (3 levels) in <top (required)>' 
```

我不知道这是怎么回事，在我的路线中出现了 new_user_car_path，看...

```
user_cars GET    /users/:user_id/cars(.:format)                               cars#index
                      POST   /users/:user_id/cars(.:format)                               cars#create
         new_user_car GET    /users/:user_id/cars/new(.:format)                           cars#new
        edit_user_car GET    /users/:user_id/cars/:id/edit(.:format)                      cars#edit
             user_car GET    /users/:user_id/cars/:id(.:format)                           cars#show
                      PUT    /users/:user_id/cars/:id(.:format)                           cars#update
                      DELETE /users/:user_id/cars/:id(.:format)                           cars#destroy 
```

如果需要，这是我的 routes.rb

```
Estaciones::Application.routes.draw do
root :to => "static_pages#home"
match '/contact', :to=>'static_pages#contact'
match '/about', :to=>'static_pages#about'
devise_for :users
resources :gas_stations
   resources :users do
      resources :cars do
      #resources :tanking_logs
      end
   end
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:29:22.540

```
new_user_car GET    /users/:user_id/cars/new(.:format) 
```

您的路径需要一个`:user_id`参数才能工作，而您没有提供一个。

**编辑**根据您的评论，如果您使用的是[Factory Girl Rails](https://github.com/thoughtbot/factory_girl_rails/)，您可以设置一个工厂来创建用户，然后执行以下操作：

```
user = Factory.create :user
visit new_user_car_path(:id => user.id) 
```

否则，您可以手动创建它们：

```
user = User.create!(:name => "Joe", ...)
visit new_user_car_path(:id => user.id) 
```

# windows - 如何让 Windows 上的 Git 忽略符号链接

> ID：11728882
> 
> 赞同：15
> 
> 时间：2012-07-30T20:13:01.477
> 
> 标签：windows, git, symlink, gitignore

我不能让它工作。

我克隆了一个存储库，其中包含一个虚拟文件（名为 src）`/path/src`：.

在 Windows 上，我创建了一个符号链接：（`mklink -d /path/src /otherplace/src`但我当然必须先删除虚拟 src 文件）。
在我`.gitignore`和`.git/info/exclude`我都有

```
/path/src/ 
/path/src 
path/src/
path/src 
```

我试过了

```
git ls-files -s | gawk '/120000/{print $4}'

git update-index path/src/ --assume-unchanged 
```

但我仍然得到：

```
error: readlink("path/src"): Function not implemented
error: unable to index file path/src   
fatal: updating files failed 
```

我已经尝试了[所有](https://stackoverflow.com/questions/3511312/ignore-symbolic-links-in-gitignore) [其他](https://stackoverflow.com/questions/11662868/what-happens-when-i-clone-a-repository-with-symlinks-on-windows) [建议](https://stackoverflow.com/questions/5556144/git-windows-how-do-i-stop-git-from-following-symbolic-links)。甚至[这也行不通](https://stackoverflow.com/questions/5917249/git-symlinks-in-windows)。
有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T20:11:24.333

您可以像这样忽略这个单个文件进行结帐：

```
git checkout HEAD . --no path/src 
```

该`.gitignore`文件仅适用于向索引添加内容。即使在将文件添加到之前提交的文件的修改`.gitignore`也不会被忽略。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-03-21T23:30:32.703

我知道这已经晚了，但我遇到了这个问题。

就我而言，我显然在某个时候检查了我的符号链接。所以无论我做什么，`.gitignore`都行不通（我认为这就是亚历山大的意思）。

**修理：**

1.  删除所有符号链接
2.  看看 git 现在是否认为有已删除的文件要提交。
3.  如果是这样，那么继续并提交删除。

现在您可以重新添加符号链接并且`.gitignore`应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-21T13:47:37.157

这是我针对此问题的步骤，类似，但与其他答案有些不同。

假设我有一个文件夹`.fvm`contains`file.json`并且`flutter_sdk(link)`之前都在 git 中提交，那么我想忽略 out `flutter_sdk`。

1.  添加`.fvm/flutter_sdk`并`.fvm/flutter_sdk/`在`.gitignore`.
2.  切`.fvm/flutter_sdk`出到存储库以外的其他地方。
3.  `git add .`和`git commit ....`
4.  粘贴回链接。

# python - 如何将轴刻度设置为仅在 python 上主要

> ID：11728883
> 
> 赞同：0
> 
> 时间：2012-07-30T20:13:06.390
> 
> 标签：python, matplotlib, contour

![在此处输入图像描述](../Images/1df46b4e7d56acabef906b6660be01f0.png)我正在使用等高线图来生成一个值表（我对案例之间的偏差感兴趣，而不是实际值）。Z 轴是一个规则的二维值数组。然而，X 和 Y 轴是 2d 向量，我使用以下公式将其转换为数字：

```
v = (x,y)
val = x*5 + y + 2 
```

哪里`0<=x<=2`和`-2<=y<=2`。

我希望轴包含所有向量对，所以我创建了一个数组 ( `xlabels`)，如下所示：

```
xlabel=[[0,-2], [0,-1], ..., [0,2], ... , [2,1], 2,2]] 
```

当我尝试将此应用于我的情节时，我只得到第一组设置主要刻度标签的值。我使用的线路是：

```
ax1.set_xticklabels(xlabels) 
```

和我得到的结果（顶部 xaxis）：

如何将 xaxis 标签设置为全部显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:41:05.027

解决方案是使用定位器：

```
from matplotlib.ticker import MultipleLocator
locator = MultipleLocator(1)
ax1.xaxis.set_major_locator(locator)
ax1.set_xticklabels(xlabels) 
```

# java - 如何在 Eclipse 中使用 Jsoup

> ID：11728884
> 
> 赞同：2
> 
> 时间：2012-07-30T20:13:09.620
> 
> 标签：java, eclipse, jar, jsoup

我刚刚下载了 Jsoup 以用于我在 Eclipse 中编写的程序。我的程序使用 Seam，但我不知道如何在我的程序中包含 Jsoup 的 JAR 文件。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T20:31:01.143

将 JAR 文件放到`/WEB-INF/lib`WAR 文件夹或`/lib`EAR 文件夹中。Eclipse 将完成剩余的必要魔法。不要摆弄项目的*构建路径*属性，否则事情可能会变得更糟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T19:15:20.620

我做了上面 BalusC 推荐的操作，但我还必须“刷新”Eclipse 才能识别 .jar 文件。要刷新，只需右键单击 Eclipse 中的左侧窗格并选择刷新。

日食版本：

*   面向 Web 开发人员的 Eclipse Java EE IDE
*   版本：开普勒服务版本 1
*   版本号：20130919-0819

操作系统：Fedora

# database - SSIS字符串转换错误

> ID：11728886
> 
> 赞同：0
> 
> 时间：2012-07-30T20:13:21.830
> 
> 标签：database, unicode, casting, ssis

在派生列中，我添加了一个带有默认字符串“Test”的新列。我需要将该字符串转换为 unicode 字符串，因此我将其转换为 - `(DT_STR,20,1252)"Test"`。

如果我将其保留为“测试”，则 SSIS 会抱怨，因为它无法将数据插入 unicode 字段 - char(20)。当我运行 SSIS 时，出现以下错误。

> 尝试执行类型转换时出错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:46:26.807

[集成服务数据类型](http://msdn.microsoft.com/en-us/library/ms141036.aspx)

*   DT_WSTR 是 unicode
*   DT_STR 是 ANSI 字符串

如果你想要一个非 unicode 字符串，你的表达式是 `(DT_STR,20,1252)"Test"`

Unicode 等价物是`(DT_WSTR,20)"Test"`

![在此处输入图像描述](../Images/71bdeef8f6d344ec7b057d11ed221dc5.png)

# ruby-on-rails - 如何删除 nginx？

> ID：11728887
> 
> 赞同：2
> 
> 时间：2012-07-30T20:13:22.943
> 
> 标签：ruby-on-rails, ruby, nginx, rvm, passenger

我使用以下命令安装了 nginx 和乘客：

```
rvmsudo passenger-install-nginx-module 
```

有什么巧妙的方法可以轻松删除它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T20:29:00.743

nginx 应该自包含在 /opt/nginx 或您在安装期间选择的任何路径中。

您可以删除该文件夹，一切都应该没问题。

编辑：或完全删除乘客：`gem uninstall passenger`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-20T20:17:51.590

[乘客的文档](https://www.phusionpassenger.com/documentation/Users%20guide%20Nginx.html#uninstalling)讨论了卸载：

> 要卸载 Phusion Passenger，请首先从您的 Web 服务器配置文件中删除所有 Phusion Passenger 配置指令。完成此操作后，您需要删除 Phusion 乘客文件。
> 
> *   如果您通过 Homebrew 安装了 Phusion Passenger，则运行`brew uninstall passenger`.
> *   如果您通过 Ruby gem 安装了 Phusion Passenger，则运行`gem uninstall passenger`（或者，如果您是 Phusion Passenger Enterprise 用户，则运行`gem uninstall passenger-enterprise-server`）。您可能必须以 root 身份运行它。
> *   如果您通过源 tarball 安装了 Phusion Passenger，则删除您放置提取的 Phusion Passenger 文件的目录。`PassengerRoot/passenger_root`该目录与 by配置指令指向的目录相同。
> *   如果您通过 APT 或 YUM 安装了 Phusion Passenger，则使用它们来卸载 Phusion Passenger。
> 
> 卸载 Phusion Passenger 后无需重新编译 Nginx。Altough Nginx 将包含 Phusion Passenger Nginx 模块，当所有 Phusion Passenger 配置指令被删除时，该模块将不会做任何事情。

换句话说，要禁用Passenger，只需从nginx配置文件中删除配置信息。那时 nginx 将在不调用Passenger 的情况下运行。好处是您不必重新安装 nginx。

# javascript - jQplot 线图从 x=0 开始

> ID：11728889
> 
> 赞同：1
> 
> 时间：2012-07-30T20:13:25.240
> 
> 标签：javascript, jquery, jqplot

我想为 y 值的向量创建一个线图。在默认情况下，x 应该从 1 开始。我想知道有没有办法让 x 值从 0 开始？下面是我的代码和[演示](http://jsfiddle.net/JWhmQ/389/)：

```
$(document).ready(function() {
        var s= [12, 45, 89, 181, 111, 147, 116]            
        $.jqplot('chart1', [s], {
            seriesDefaults: { 
            showMarker:false,
            pointLabels: { show:false } ,
              },

            axes: {
                  xaxis: {
                    label :'Time units',
                    pad: 0,
                      },
                  yaxis: {
                    label: 'Number of individuals',
                    pad: 0
                      }
            },
             legend: {
                  show: true,
                  location: 'nw',
                  placement: 'inside',
                fontSize: '11px'
            } 
        })   
    }) 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T01:53:34.490

***编辑：***还需要设置 x 的数据。

这是***[演示](http://jsfiddle.net/JWhmQ/393/)***。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-09T16:59:20.060

[在此链接](http://www.jqplot.com/examples/line-charts.php)的第一段中，作者提到，对于您要实现的目标，您需要一个 x,y 数据点数组（有序对本身也必须是数组）。因此，在您的特定情况下，这应该会产生预期的效果：

```
var s= [[0, 12], [1, 45], [2, 89], [3, 181], [4, 111], [5, 147], [6, 116]]; 
```

对于较大的有序对数组，您可以使用 for 循环来生成有序对数组。

# python - 如何使用 Python 在 telnet 会话中打开和搜索文件

> ID：11728890
> 
> 赞同：0
> 
> 时间：2012-07-30T20:13:25.377
> 
> 标签：python, telnet, telnetlib

我正在使用以下代码登录服务器并转到特定目录（我要搜索字符串的日志文件所在的位置）。我已经使用 Paramiko 模块 (ssh) 完成了这项工作，非常简单。但是 telnetlib 模块并没有我看到的很多功能来实现这一点。有谁知道我将如何打开文件并通过它搜索特定的字符串（有问题的服务器只允许 Telnet 登录 - 没有 ssh）......谢谢：

```
import sys
import telnetlib

HOST = "10.28.46.14"
user = raw_input("Enter your username: ")
password = ""

tn = telnetlib.Telnet(HOST)

tn.read_until("login: ")
tn.write(user + "\n")

if password == "":
    tn.read_until("Password: ")
    tn.write(password + "\n")
    #print "Login successful!"
else:
    print "Your password is incorrect."

tn.write("cd /var/opt/mylog/log\n")
tn.write("ls\n")
tn.read_until("\n")
#tn.write("exit\n")

my_ls = tn.read_until("my.log")

print my_ls 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:01:12.460

您是否与机器所有者核实过 ssh 与 telnet 的关系？现在已经没有多少操作系统提供开箱即用的 telnet，因为 telnet 容易受到重放攻击。

如果你告诉 tn 做一个 grep 怎么办？您可能会附加一个“回声$？” 在 grep 之后，获取退出代码 - 0 表示有一个或多个匹配项，其他任何内容都表示没有任何匹配项。

# c++ - 从文件描述符实例化套接字对象的不显眼方法

> ID：11728895
> 
> 赞同：4
> 
> 时间：2012-07-30T20:13:39.730
> 
> 标签：c++, python, sockets, dll, file-descriptor

Python 中目前存在一个套接字库：

**参考**：[http ://docs.python.org/library/socket.html](http://docs.python.org/library/socket.html)

但是，此库不包含基于文件描述符引用现有套接字的功能。我目前正在为 C++ 库开发 Python 绑定，该库首先打开一个套接字，并且需要一种事后在 Python 中引用这个打开的套接字的方法。**请记住，这是在 Windows 上**（我正在使用忽略文件句柄的跨平台抽象层）。

代码与此类似：

```
fd = connect(...) # file descriptor
os.read(fd, buffer)
os.close(fd) 
```

我正在寻找一种方法来实际定义基于文件描述符的套接字对象，而不会在`os.dup`and中找到按值重复`os.dup2`。

有人知道引用这个的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T02:08:42.740

由于这个问题似乎尚未得到回答（1 周），我将说明我的解决方案。

我实现了一个内部绑定，用于从库中检索套接字信息，`ctypes`将`pytuples`. 因为应用程序本身被包裹在 中`py2exe`，所以这种修改对最终用户来说是不显眼的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:57:54.887

这有帮助吗？您可以使用它来包装套接字和/或文件描述符，让它们感觉更像文件，同时提供对构建数据有用的操作，如 sock.readto('\0')：

```
http://stromberg.dnsalias.org/~strombrg/bufsock.html 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T20:26:24.417

请再检查一次：

[http://docs.python.org/library/socket.html#socket.fromfd](http://docs.python.org/library/socket.html#socket.fromfd)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T20:26:29.287

`socket.fromfd(fd, family, type[, proto])`似乎做你想做的事。不幸的是，它仅在类 Unix 平台上可用。

不幸的是，此功能似乎不适用于 Windows。[您可以考虑在http://bugs.python.org/](http://bugs.python.org/)上记录一个错误（我看不出为什么 windows 套接字对象不应该被包装在 Python 套接字对象中）。

# vba - 用户定义类型未定义 - 从 Excel 控制 Word

> ID：11728899
> 
> 赞同：8
> 
> 时间：2012-07-30T20:13:46.780
> 
> 标签：vba, excel, ms-word, excel-2007

我正在尝试从 Excel 2007 进行一些相对简单的复制和粘贴到 Word 2007。我已经浏览了这个网站和其他网站，并且一直挂在同一件事上——下面代码的第三行一直给我“用户类型注释定义”错误消息。我真的很困惑，因为我刚刚从另一个解决方案中解除了这个（并且与我试图解除的其他解决方案有类似的问题）。有人可以告诉我是什么导致了错误，为什么？

```
Sub ControlWord()
' **** The line below gives me the error ****
Dim appWD As Word.Application
' Create a new instance of Word & make it visible
Set appWD = CreateObject("Word.Application.12")
appWD.Visible = True

'Find the last row with data in the spreadsheet
FinalRow = Range("A9999").End(xlUp).Row
For i = 1 To FinalRow
    ' Copy the current row
    Worksheets("Sheet1").Rows(i).Copy
    ' Tell Word to create a new document
    appWD.Documents.Add
    ' Tell Word to paste the contents of the clipboard into the new document
    appWD.Selection.Paste
    ' Save the new document with a sequential file name
    appWD.ActiveDocument.SaveAs Filename:="File" & i
    ' Close this new word document
    appWD.ActiveDocument.Close
Next i
' Close the Word application
appWD.Quit
End Sub 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-01T19:24:32.677

*[Tim Williams](https://stackoverflow.com/users/478884/tim-williams)在评论中提到了这个答案。*

为了解决这个问题，您必须将 Word 对象库引用添加到您的项目中。

在 中`Visual Basic Editor`，选择`Tools`then`References`并向下滚动列表，直到看到`Microsoft Word 12.0 Object Library`。选中该框并点击`Ok`。

从那一刻起，您应该在键入`Word.`以确认参考设置正确时启用自动完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-01T17:27:26.587

根据[在 Excel VBA 中使用 New 关键字和调用 CreateObject 有什么区别？](https://stackoverflow.com/questions/170070/what-are-the-differences-between-using-the-new-keyword-and-calling-createobject)， 任何一个

*   使用无类型变量：

    ```
    Dim appWD as Object
    appWD = CreateObject("Word.Application") 
    ```

或者

*   通过添加`Microsoft Word <version> Object Library`对 VBA 项目的引用`Tools->References...`，然后创建一个类型化变量并[使用 VBA`New`运算符](https://stackoverflow.com/questions/21652671/what-does-the-keyword-new-do-in-vba)对其进行初始化：

    ```
    Dim appWD as New Word.Application 
    ```

    或者

    ```
    Dim appWD as Word.Application
    <...>
    Set appWd = New Word.Application 
    ```

    *   `CreateObject`相当于`New`这里，只是引入了代码冗余

类型化变量将为您提供自动完成功能。

# iphone - 尝试同时录制和播放音频，但很安静

> ID：11728904
> 
> 赞同：0
> 
> 时间：2012-07-30T20:14:07.583
> 
> 标签：iphone, objective-c, ios, ipad, audio

好的，所以我试图查找它，所以它不是重复的，但我可能错过了一些东西。无论如何，在我的应用程序中，我有一首歌曲应该在我录制时开始播放。所以当我点击录音时， AVAudioRecorder 开始录音，我已经初始化的 AVAudioPlayer 开始播放歌曲。然而这首歌的音量变得非常安静。我知道这不是歌曲，因为如果我只是播放歌曲而不尝试同时录制，它会以最大音量播放。有帮助吗？谢谢。

我如何初始化：

```
NSDictionary *recordSettings = [NSDictionary 
                                dictionaryWithObjectsAndKeys:
                                [NSNumber numberWithInt:AVAudioQualityMin],
                                AVEncoderAudioQualityKey,
                                [NSNumber numberWithInt:16], 
                                AVEncoderBitRateKey,
                                [NSNumber numberWithInt: 2], 
                                AVNumberOfChannelsKey,
                                [NSNumber numberWithFloat:44010.0], 
                                AVSampleRateKey,
                                nil];

NSError *error = nil;

audioRecorder = [[AVAudioRecorder alloc]
                 initWithURL:soundFileURL
                 settings:recordSettings
                 error:&error];

if (error)
{
    NSLog(@"error: %@", [error localizedDescription]);

} else {
    [audioRecorder prepareToRecord];
}

NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                     pathForResource:"Rang De"
                                     ofType:@"mp3"]];

audioPlayerForPreloadedMusic = [[AVAudioPlayer alloc]
                                initWithContentsOfURL:url
                                error:&error];
if (error)
{
    NSLog(@"Error in audioPlayer: %@", 
          [error localizedDescription]);
} else 
{
    audioPlayerForPreloadedMusic.delegate = self;
    [audioPlayerForPreloadedMusic prepareToPlay];
} 
```

我怎么玩：

```
-(void) recordAudio
{
    if (!audioRecorder.recording)
    {
        playButton.enabled = NO;
        stopButton.enabled = YES;
            [audioRecorder record];

        if(!audioPlayerForPreloadedMusic.playing)
            [audioPlayerForPreloadedMusic play];
        else {
            NSLog(@"music is playing, so won't play");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T03:36:41.060

当您开始录制时，您正在通过听筒播放歌曲，而不是通过扬声器播放歌曲。

有一个音频会话覆盖来防止这种自动切换。请参阅 Apple 的 iOS API 文档中的使用：kAudioSessionProperty_OverrideAudioRoute 和 kAudioSessionOverrideAudioRoute_Speaker。

# c++ - boost::function 和 std::tr1::function 之间是否有重要的区别？

> ID：11728905
> 
> 赞同：1
> 
> 时间：2012-07-30T20:14:09.953
> 
> 标签：c++, boost, tr1, boost-function

我在我的代码中使用了很多 boost，但到目前为止还没有使用`std::tr1`. 现在我需要一个更复杂的函数指针，就像这两个可以提供的那样。不幸的是，C+11 还不是一个选项。我读到`boost::function`某些编译器可能会很棘手，例如（7.1 之前的 Visual Studio 需要一种特殊的[可移植语法](http://www.boost.org/doc/libs/1_50_0/doc/html/function/tutorial.html)），但没有找到`std::tr1::function`有关此主题的任何信息。两者在内存使用、速度和兼容性方面有什么重要区别吗？

编辑：我目前使用的是 gcc 4.7，但代码也应该在 Visual Studio 上编译，最好也可以在 2005 等版本中编译

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T20:24:28.503

你读了什么？你说的棘手是什么意思？您是指一些仅支持`boost::function1<void, int>`形式而不支持形式的古代编译器`boost::function<void(int)>`吗？

`std::tr1::function`应该*由*你的编译器提供，所以如果你的编译器提供了它，那么它应该可以完美地工作，而不是“棘手”（不管你的意思是什么。）

询问 Boost 的具体实现和不是实现的接口规范之间是否存在差异是没有意义的。一种实现可能与 Boost 的类似并且没有实质性差异，而另一种实现可能完全不同。GCC`std::tr1::function`是由 Boost.Function 的作者贡献的，所以*非常*相似。

# java - WebSphere 自定义密码加密

> ID：11728907
> 
> 赞同：1
> 
> 时间：2012-07-30T20:14:11.337
> 
> 标签：java, jakarta-ee, encryption, websphere

尝试按照这些过程在 WebSphere 中启用密码加密，但我认为我并没有完全遵循该做什么：

[1.自定义密码加密插件点](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/csec_plugpoint_custpass_encrypt.html "自定义密码加密的插件点")

[2.为自定义密码加密启用插件](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/tsec_plugpoint_custpass_encrypt.html "为自定义密码加密启用插件点")

我的问题是：

1.  我是否需要一个单独的 CustomPasswordEncryption 项目来导出 jar 以放入链接 2 第 2 步中描述的 ${WAS_INSTALL_ROOT}/classes 目录中？
2.  如果是这样，我是否只需将链接 1 处的接口复制到该项目中并实现它？假设现在我在没有任何实际加密的情况下实现它，即通过它的密码被返回而没有任何更改。我现在只想看看这是如何工作的。
3.  链接 1，第 1 步，假设我的类名为 CustomPasswordEncryptionImpl，是否应该将此属性设置为属性 com.ibm.wsspi.security.crypto.CustomPasswordEncryptionImpl？
4.  链接 1，步骤 1，是否将 com.ibm.wsspi.security.crypto.customPasswordEncryptionEnabled 属性设置为`true`？
5.  链接 2，步骤 3。我不明白他们想说什么，我需要编辑类路径吗？
6.  一切完成后，我是否需要编辑 security.xml 文件，或者 {xor} 是否会自动替换为我的新别名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T20:35:15.593

为了回答你的问题...

1.  所有链接 2 第 2 步告诉您的是，您需要将实现的类放入 JAR 文件中，并将其放在正确的位置（在类路径上）。您如何打包/管理该文件（是否作为项目）取决于您。

2.  您无需复制提供的接口，而是在您自己的自定义对象中实现该接口（实现 CustomPasswordEncryption）。它已经是 WebSphere 的一部分。如果您的项目中引用了正确的 JAR 文件，编译器/ide/etc 将找到它。

3.  是的，您将这个 JVM 属性（通过 java -D）设置为指向您的接口实现。虽然我强烈建议您将实现放在您自己的 java 包中，而不是他们的。所以像 com.whatever.CustomPasswordEncryptionImpl 这样的东西。

4.  是的

5.  我没有尝试过，但它看起来像这样命名它避免了设置 JVM 属性的需要。所以他们只是提供它作为一种选择。不过，我仍然认为我更喜欢在自己的包装空间中使用它。

6.  您负责更新它们，因为除非您主动更改它们，否则 WebSphere 不会更新它们。

还有一件事要注意...如果您实现的插件失败，WebSphere 将默认使用 XOR。您会在日志中看到一个条目，但在其他任何地方都看不到任何指示。因此，请务必牢记这一点。

# jquery - IE9 中的动画问题。需要一个 jquery 后备

> ID：11728913
> 
> 赞同：0
> 
> 时间：2012-07-30T20:14:55.783
> 
> 标签：jquery, css, animation, fallback, vendor-prefix

我在让这个动画在 IE9 中工作时遇到问题。 [https://c9.io/aaronkahlhamer/notification-bar/workspace/index.html](https://c9.io/aaronkahlhamer/notification-bar/workspace/index.html)

这`-ms-animation: slideDown 2.5s 1.0s 1 ease forwards;`在 IE9 中不起作用。

```
@-webkit-keyframes slideDown {
    0%, 100% { -webkit-transform: translateY(-60px); }
    10%, 90% { -webkit-transform: translateY(0px); }
}
@-moz-keyframes slideDown {
    0%, 100% { -moz-transform: translateY(-60px); }
    10%, 90% { -moz-transform: translateY(0px); }
}
@-o-keyframes slideDown {
0%, 100% { -o-transform: translateY(-60px); }
    10%, 90% { -o-transform: translateY(0px); }
}
@-ms-keyframes slideDown {
    0%, 100% { -ms-transform: translateY(-60px); }
    10%, 90% { -ms-transform: translateY(0px); }
}

.notification {
    -webkit-transform: translateY(-60px);
    -webkit-animation: slideDown 2.5s 1.0s 1 ease forwards;

    -moz-transform:    translateY(-60px);
    -moz-animation:    slideDown 2.5s 1.0s 1 ease forwards;

    -o-transform:    translateY(-60px);
    -o-animation:    slideDown 2.5s 1.0s 1 ease forwards;

    -ms-transform:    translateY(-60px);
    -ms-animation:    slideDown 2.5s 1.0s 1 ease forwards;

    position:absolute;
    padding:7px 28px;
    background: rgb(253,243,214);
    font-size:14px;
    color:#6B644E;
    -webkit-border-radius: 2px;
    -moz-border-radius: 2px;
    border-radius: 2px;
    margin:20px 0 0 50%;
    text-align:center;
    white-space:nowrap;
    moz-box-shadow: 0px 0px 12px rgba(253,243,214,1.0);
    -webkit-box-shadow: 0px 0px 12px rgba(253,243,214,1.0);
box-shadow: 0px 0px 12px rgba(253,243,214,1.0);
    z-index:1;

}
.notification-draft-saved {left:-63px;}
.notification-draft-saved:after {content: "draft saved";} 
```

如果 CSS 无法实现，那么回退会很好；也许是 jQuery？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:23:02.963

我可以在....5 行或更少的时间内做到这一点！

```
$('.notification').css('top', '-60px').delay(1000).animate({
  top: '0px'
}, function(){
  $(this).delay(500).fadeTo(300, 0);   
}); 
```

# chef-infra - 通过代码在厨师中添加角色

> ID：11728914
> 
> 赞同：0
> 
> 时间：2012-07-30T20:15:04.570
> 
> 标签：chef-infra

我想做

```
knife role create <role-name> -y 
```

通过 ruby​​ 代码。我不想写另一个刀插件。我可以打印整个角色列表（见下面的代码）。但是现在我如何添加一个没有配方的简单角色？

```
require 'rubygems'
require 'chef' 

Chef::Config[:node_name]='client_name'
Chef::Config[:client_key]='path to client cert.pem'
Chef::Config[:chef_server_url]="http://ur chef server:4000"    

puts Chef::Role.list 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:46:30.450

通过`run_list`属性访问节点的运行列表。首先，您必须从 Chef 服务器加载节点。以下代码添加`role[foo]`到现有节点`n`：

```
require 'rubygems'
require 'chef' 

Chef::Config[:node_name]='client_name'
Chef::Config[:client_key]='path to client cert.pem'
Chef::Config[:chef_server_url]="http://ur chef server:4000"    

node = Chef::Node.load('n')
node.run_list << "role[foo]"
node.save 
```

为了帮助弄清楚 Chef Ruby 界面是如何工作的，我通常会执行“gem contents chef | xargs grep whatever”并仔细查看。

# python - python，迭代 subprocess.Popen() stdout/stderr

> ID：11728915
> 
> 赞同：7
> 
> 时间：2012-07-30T20:15:04.900
> 
> 标签：python, subprocess

有很多类似的帖子，但我没有找到答案。

`Python`在带有and模块的Gnu/Linux 上`subprocess`，我使用以下代码来迭代使用子进程启动的命令的 stdout/sdterr：

```
class Shell:
    """ 
    run a command and iterate over the stdout/stderr lines
    """

    def __init__(self):

        pass

    def __call__(self,args,cwd='./'):

        p = subprocess.Popen(args,
                cwd=cwd, 
                stdout = subprocess.PIPE,
                stderr = subprocess.STDOUT,
                )

        while True:

            line = p.stdout.readline()
            self.code = p.poll()

            if line == '':
                if self.code != None:
                    break
                else:
                    continue

            yield line

#example of use
args = ["./foo"]
shell = Shell()
for line in shell(args):
     #do something with line
     print line, 
```

这工作正常...除非执行的命令是`python`，例如 `args = ['python','foo.py']，在这种情况下，输出不会刷新，而是仅在命令完成时打印。

有解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:21:21.840

查看[如何刷新 Python 打印的输出？](https://stackoverflow.com/questions/230751/how-to-flush-output-of-python-print).

您需要使用 -u 选项运行 python 子进程：

> -u 强制标准输入、标准输出和标准错误完全无缓冲。在重要的系统上，也将 stdin、stdout 和 stderr 置于二进制模式。请注意，xreadlines()、readlines() 和文件对象迭代器（“for line in sys.stdin”）中有内部缓冲，不受此选项的影响。要解决此问题，您需要在“while 1:”循环中使用“sys.stdin.readline()”。

或者，如果您可以控制 python 子进程脚本，则可以在每次打印时使用 sys.stdout.flush() 刷新输出。

```
import sys
sys.stdout.flush() 
```

# php - 找不到 Phalanger PhpNetCore

> ID：11728920
> 
> 赞同：1
> 
> 时间：2012-07-30T20:15:44.940
> 
> 标签：php, iis, phalanger

我正在尝试将 Phalanger 设置为在远程 IIS 上运行

[http://www.php-compiler.net/?p=354](http://www.php-compiler.net/?p=354)

指导。因为我试图从 web.config 覆盖服务器配置，所以我添加了以下行：

```
<system.webServer>
  <handlers>
    <add name="PhalangerHandler" path="*.php" verb="*" type="PHP.Core.RequestHandler, PhpNetCore, Version=3.0.0.0, Culture=neutral, PublicKeyToken=0a8e8c4c76728c71" resourceType="Unspecified" preCondition="integratedMode" />
  </handlers>
</system.webServer> 
```

这使得 ISS 服务器能够识别 .php 扩展名。我遇到的问题是它找不到“PhpNetCore”。我猜这是因为它离开了我不需要的服务器的根位置。我有里面的dll

```
 /bin 
```

文件夹。关于如何使服务器在正确的目录中查找的任何想法？我试图将 bin/ 添加到文件名，但它不起作用。根据他们的文档，我需要添加

```
 <paths>
        <set name="DynamicWrappers" value=".\Dynamic"/>
        <set name="Libraries" value=".\Bin"/>
        <set name="ExtWrappers" value=".\Bin"/>
        <set name="ExtNatives" value=".\Bin\Extensions"/>
    </paths> 
```

我已经这样做了。但是，它仍然无法正确识别。知道发生了什么吗？任何帮助都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:44:56.703

[我在http://support.devsense.com/viewtopic.php?t=748](http://support.devsense.com/viewtopic.php?t=748)看到了类似的问题

尽量确保应用程序池设置为 ASP.NET 4.0 集成（不是 2.0，不是经典），并且虚拟目录配置为 IIS 应用程序。

# php - 在序列化字符串中发现 NULL 字符

> ID：11728925
> 
> 赞同：6
> 
> 时间：2012-07-30T20:16:19.200
> 
> 标签：php, serialization, deserialization

我无法`unserialize()`回溯`serialize()`并保存到文本文件中。我也不能复制粘贴字符串，它只复制 NULL 之前的数据，所以我无法在 PHP 中将其反序列化。

这是记事本++中的一小段内容

![在此处输入图像描述](../Images/9595ab91a355d61b8f0167b1e53c4451.png)

任何想法如何反序列化？

注意：我`error_log($backtrace, 3, 'file.log');`用来保存文件，然后只需在 Notepad++ 中打开即可复制粘贴，但我无法复制 NULL 字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-09T21:02:23.850

因此，序列化函数使用语法 null*null 标识成员变量，如您在此处显示的那样。

空字符编码在字符串中`\0`，通常不会显示在输出中。要反序列化，您需要将那些“空”文本转换回`\0`.

当我编写一个序列化数组时，我通过一个转换`\0`为`[NULL]`.

```
$string = str_replace("\0","[NULL]",$string); 
```

然后当你准备好反序列化时，你可以做相反的事情

```
$string = str_replace("[NULL]","\0",$string); 
```

# ruby-on-rails - 为 Rails form_for 设置 HTTP 标头

> ID：11728931
> 
> 赞同：0
> 
> 时间：2012-07-30T20:16:45.347
> 
> 标签：ruby-on-rails, upload, http-headers

我目前正在开发一个由 Rails 提供支持的头像应用程序，用户可以在其中为他们的用户个人资料上传头像。

我想使用自定义 HTTP 标头来阻止公共上传请求，并且只允许来自我的应用程序的请求。我将如何使用 Ruby on Rails 执行此操作？

我正在使用 AJAX 上传头像，所以这可能有点困难。此外，我不希望在公共 HTML 代码中显示标题，否则它会破坏添加它的对象！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:51:04.177

如果你添加

```
 protect_from_forgery 
```

到您的应用程序控制器，它将阻止来自 3rd 方链接的所有 NON Get 请求。它将使用身份验证令牌向每个表单添加一个隐藏的输入值，该身份验证令牌将用于检查发送到服务器的所有数据。

进一步阅读

[http://guides.rubyonrails.org/security.html#cross-site-request-forgery-csrf](http://guides.rubyonrails.org/security.html#cross-site-request-forgery-csrf)

[http://api.rubyonrails.org/classes/ActionController/RequestForgeryProtection.html](http://api.rubyonrails.org/classes/ActionController/RequestForgeryProtection.html)

[Rails 3.1 - 忽略 CSRF？](https://stackoverflow.com/questions/7270947/rails-3-1-csrf-ignored)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T21:55:19.877

您可以实现自定义 HTTP 标头（例如`X-Foobar-Validity-Status: valid`）并将其签入`before_filter`.

```
class YourController < ApplicationController
  before_filter :check_header

  def check_header
    unless request.headers['X-Foobar-Validity-Status'] == "valid"
      render json: {"error" => "You are an evil attacker. Go away"}
    end
  end
end 
```

但是，我认为这是一个坏主意。

*   攻击者可以读取您的 HTTP 请求的数据包转储并添加标头，即使使用 jQuery。请参阅[`jQuery.ajax`标题选项](http://api.jquery.com/jQuery.ajax/)。
*   我将`User-Agent`为此目的使用，而不是使用专有标头。

相反，我建议使用`protect_from_forgery`导轨机制。它使您的生活更轻松，更安全。只需在您的应用程序中通过 http 请求获取真实性令牌，然后将其与您的请求一起发回。这应该可以阻止入侵者。

# java - 我可以只使用输入在 iText 中生成 superscipt 吗？

> ID：11728932
> 
> 赞同：1
> 
> 时间：2012-07-30T20:17:04.160
> 
> 标签：java, pdf, itext

我参与了一个使用 iText 生成 pdf 文件的项目。我想生成上标文本，并且我知道存在将文本块转换为上标的方法，但是，我处于需要根据输入来决定一段文本是否应该是上标的情况。最佳解决方案类似于：`2<superscript>nd</superscript>`生成文本“2 ^(nd) ”。

这是可能的吗？

值得注意的是，我并没有直接针对 iText 编写代码，它们之间是有层的。这就是为什么我需要决定什么是上标而不是基于输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:14:42.943

如果您无法修改使用 iText 的代码，那么不，没有办法。iText 不会解析您放入`Chunk`.

为了获得与您想要实现的行为类似的行为，您需要将 HTML 转换为 PDF，例如使用 iText 的配套[XMLWorker](http://demo.itextsupport.com/xmlworker/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T07:16:02.687

当你找到一个`<superscript>`标签时，你可以简单地创建一个具有正确属性的块：

```
public Chunk addSuperscript(String text) {
  float leading = determineCurrentLeading();
  Font f = determineCurrentFont();
  Font supFont = new Font(f);
  supFont.setSize(f.getSize() / 2f);
  Chunk c = new Chunk(text, supFont);
  c.setTextRise(leading / 2f);
  return c;
} 
```

然后该块将被添加到一个段落、一个 PdfPCell、... 根据您的实现，您可以确定当前使用的前导和字体。

希望这会帮助你。

# c++ - O(N) 查找但 O(log(N)) 比较在排序列表上使用 upper_bound 时

> ID：11728936
> 
> 赞同：2
> 
> 时间：2012-07-30T20:17:27.263
> 
> 标签：c++, list

```
list<Person> lp;
...
lp.sort(PersonNameLess());

Person newPerson;
...
lp.insert(upper_bound(lp.begin(), lp.end(), 
          newPerson, PersonNameLess()), newPerson); 
```

在有效的 c++ 第 3 版，第 198 页，第 45 项中，它说如下：

> 查找需要线性时间，但它只执行对数比较

问题：*为什么它只执行对数比较？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T20:20:26.547

> 为什么它只执行对数比较？

因为列表已排序并且[upper_bound](http://www.cplusplus.com/reference/algorithm/upper_bound/)执行[二分查找](http://en.wikipedia.org/wiki/Binary_search_algorithm)。

# web-crawler - 如何查找任何给定实体的网址和图片？

> ID：11728941
> 
> 赞同：-1
> 
> 时间：2012-07-30T20:17:55.207
> 
> 标签：web-crawler, data-mining

我正在研究一些网络挖掘的东西，并试图找到某个特定实体的网络 URL（例如，维基百科页面和主页）。实体是指一些球员姓名、位置等。例如，如果我的输入是大卫贝克汉姆，我希望以下输出：

网址结果：

[http://www.davidbeckham.com/](http://www.davidbeckham.com/)

[http://en.wikipedia.org/wiki/David_Beckham](http://en.wikipedia.org/wiki/David_Beckham)

和图像结果为：

[http://upload.wikimedia.org/wikipedia/commons/2/21/WikiBex.jpg](http://upload.wikimedia.org/wikipedia/commons/2/21/WikiBex.jpg)

有人可以指出任何方法来实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:14:15.607

是的，这很容易：

你只需要实现一个搜索引擎，比如谷歌。然后你可以搜索名字，它会给你你想要的结果！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T17:15:15.043

我冒充是因为它可能对其他人有帮助。几个语义 Web 实现在查找有关实体的信息方面非常有用。我发现 dbpedia（这是维基百科的语义网络表示）非常有用，虽然有一些陡峭的学习曲线，例如 SPARQL、RDF，但它是值得的和令人兴奋的。

# java - 从 Android 应用程序中的 WebView 读取字段

> ID：11728943
> 
> 赞同：0
> 
> 时间：2012-07-30T20:18:12.963
> 
> 标签：java, android, jquery-mobile

我有一个原生的 android 应用程序，我在原生应用程序中使用 JQuery Mobile 显示一个网页，但是它有一个表单，我想从我的原生应用程序中读取字段并在用户单击提交时使用它们。我怎样才能做到这一点？是否有读取 WebView 上的表单字段的界面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:28:49.957

以下[文档](http://developer.android.com/guide/webapps/webview.html#BindingJavaScript)应该可以帮助您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T20:35:05.483

> 是否有读取 WebView 上的表单字段的界面？

不是直接的。但是，您可以使用一种笨拙的方法：

第 1 步：定义一个从表单接收数据的 Java 类，并通过`addJavascriptInterface()`. 不幸的是，这里的参数仅限于原语（包括`String`）。

第 2 步：调用（一些 JavaScript 源代码`loadUrl("javascript:...")`在哪里`...`）以从表单中读取数据并调用第 1 步中在您的类上公开的方法。

# wpf - WPF中对应控件到WinForms DropdownButton？

> ID：11728944
> 
> 赞同：0
> 
> 时间：2012-07-30T20:18:22.247
> 
> 标签：wpf, winforms, button

WPF中是否有与WinForms DropDownButton对应的控件？如果没有，关于相同类型功能的最佳解决方法的任何想法？我想在表单右侧底部有一个按钮，它提供两种不同但相关的功能类型，例如“制作馅饼”按钮：

```
MAKE PIE
     From Scratch
     From a Box 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:33:03.320

[WPF Toolkit](http://wpf.codeplex.com/releases/view/40535)有这个控件。

[这是](http://www.c-sharpcorner.com/UploadFile/mahesh/wpf-dropdownbutton-control/)使用它的指南。

# iphone - Objective-C 中的 PKCS5 填充

> ID：11728947
> 
> 赞同：5
> 
> 时间：2012-07-30T20:18:49.033
> 
> 标签：iphone, objective-c, pkcs#5

有没有办法在 Cocoa Touch 中获得实际的 PKCS5 填充？虽然我很清楚出于解密目的，PKCS7 和 PKCS5 是兼容的，但我需要匹配服务器使用的确切加密方法，因为加密的密码经过哈希处理并用作加密数据的解密密钥。这很复杂，但很安全。不幸的是，如果您之后对填充字符串进行散列处理，我认为 PKCS7 和 PKCS5 不能互换使用。谁能帮我？如果它与 NSData+CommonCrypto 或 RNCryptor 库配合得很好，则可以加分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T18:17:18.363

这是我的解决方案。像魅力一样工作。

```
NSString *password = @"YOUR PASSWORD HERE";
NSMutableData *passwordData = [[NSMutableData alloc] initWithData:[password dataUsingEncoding:NSUTF8StringEncoding]];
int blockSize = 16;
int charDiv = blockSize - ((passwordData.length + 1) % blockSize);

//PKCS5 Padding
NSMutableString *padding = [[NSMutableString alloc] initWithFormat:@"%c",(unichar)10];

for (int c = 0; c <charDiv; c++) {
    [padding appendFormat:@"%c",(unichar)charDiv];
}
[passwordData appendData:[padding dataUsingEncoding:NSUTF8StringEncoding]]; 
```

...您的填充数据将在密码数据中。

# c++ - 带有 ifstream 和 ofstream 的变量文件名

> ID：11728948
> 
> 赞同：0
> 
> 时间：2012-07-30T20:18:52.430
> 
> 标签：c++, date, filenames, ofstream

我想使用计算机上的系统日期并将其用作 .txt 文件的名称。这是我到目前为止所拥有的：

```
void idle_time()
{
LASTINPUTINFO last_info;
last_info.cbSize = sizeof(LASTINPUTINFO);
int tickCount = 0;
int minutes = 0;
int count = 0;
SYSTEMTIME a;

while(true)
{
    GetLastInputInfo(&last_info);
    tickCount = GetTickCount();
    int minutes = (tickCount - last_info.dwTime) / 60000;
    count++;

    string date;
    date += a.wMonth;
    date += "/";
    date += a.wDay;
    date += "/";
    date += a.wYear;

    if((minutes >= 1) && (count%3000==0))
    {
        //std::string filename = date;
        //filename += ".txt";
        ifstream in(string(date + ."txt").c_str());
        float sum;
        in >> sum;
        sum++;
        in.close();
        ofstream out(string(date + ".txt").c_str());
        out << sum;
        out.flush();
        out.close();

    } 
```

我为可怕的缩进感到抱歉。这位编辑不公正。但无论如何，我将如何使用日期作为文件名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:36:16.787

`date`您使用的字符串包含`/`用于分隔路径中目录的字符。您只需将它们替换为另一个（不是禁止的）字符。

我还建议您不要`m/d/Y`对文件名使用日期格式。他们分类不好。`Y-m-d`通常更好，因为文件将从最旧到最新排序。

*编辑*：啊，为了让我的最后一个陈述成立，你还需要用零到两位数填充月份和日期，即有类似`2011-08-05`.

* * *

啊，我看到时间附加也做错了。您不能将整数附加到这样的字符串。@hmjd 已经向您发布了一种解决此问题的方法；但我认为最好只使用专用的时间->字符串转换方法。

我不是 Windows 程序员，所以我不会在这`SYSTEMTIME`件事上帮助你太多。您可能需要使用[GetTimeFormat()](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318130%28v=vs.85%29.aspx)。但这里有一个简单的例子，如何使用标准 C/C++ [strftime()](http://www.cplusplus.com/reference/clibrary/ctime/strftime/)来解决它：

```
char date_buf[11];
time_t a = time(0);

strftime(date_buf, sizeof(buf), "%Y-%m-%d", gmtime(&t));

date += buf; 
```

如果您想要本地时区的日期而不是 UTC，请使用`localtime()`而不是`gmtime()`.

希望它可以帮助某人。我相信`GetTimeFormat()`类似的工作，所以也许这可以指导你一点。

# php - 我刚刚在 PHP 中编写了一个随机数生成器，您认为这可以如何改进？

> ID：11728949
> 
> 赞同：1
> 
> 时间：2012-07-30T20:18:57.223
> 
> 标签：php, performance, processing-efficiency, memory-efficient

我正在为一个客户工作，他希望生成格式为 [char][int][int] 的代码，如 T56、N78、J89 等...... char 必须为大写。

作为一个快速的人，我写了这个函数，因为我发现它最简单

```
function randomizer(){
    $chars = array("A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z");
    return $chars[array_rand($chars)].mt_rand(10, 99);
} 
```

但我一直在想，还会有许多其他有效的解决方案。上面这个只是工作，但我更注重效率，因为我需要生成大量这样的代码。

有什么更好的起点！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:29:20.433

```
echo chr(mt_rand(65,90)).str_pad((rand()%100),2,0,STR_PAD_LEFT); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:22:31.060

如果可以的话，您希望存储`$chars`在函数之外，因此不需要每次都创建它（例如，如果您想在循环中生成 1000 个代码）。

另外，这里给你一个捷径

`$chars = range("A","Z");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T20:24:30.283

```
function getRandStr()
{
    return sprintf("%s%02d", chr(mt_rand(65, 90)), mt_rand(0, 99));
} 
```

**编辑：**根据评论更改，感谢@DaveRandom。

# php - CodeIgniter MVC 数据操作最佳方法

> ID：11728950
> 
> 赞同：1
> 
> 时间：2012-07-30T20:18:59.637
> 
> 标签：php, codeigniter, view, model

我正在 CodeIgniter 中开发一个网站。这是一种基本的，除了它有一些巨大的形式（150个字段）一些动态创建/锁定/预定义/删除等。

我在表单和数据库之间进行转换时遇到了麻烦，这当然非常复杂。我的意思是表单的提交在某些表格中插入了不止一行，甚至没有保存一些数据。（一些单选按钮等）

我创建了一个非常大的对象，该对象具有尽可能多的以表单输入名称命名的属性，以便`$_POST`使用以下方法填充数据：

```
foreach ($largeObj as $key=>$value)
{
  if (isset($_POST[$key])){
    $largeObj[$key]=$value; //mind the data escaping 
  }
} 
```

当然，这只适用于一半的输入，对于其他我需要做这样的事情：

```
$largeObj['tanks']=Array();
for ($i=0;$i<$_POST['nbrTanks'];$i++){
    $tank=new Tank();
    // some if's in order to set some properties
    $largeObj['tanks'][]=$tank;
} 
```

然后我进行所有计算并准备我的 DTO 以在每个表中插入相应的数据。顺便说一句，我使用 PHPDAO 来映射数据库表，因为它们有点太大而无法编写整个 CRUD 操作。

有更好的方法吗？注释驱动或更有效的方式，因为我还需要用我的数据库中的数据填充整个表单。欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T22:12:00.177

如果您有用于任一方法的输入列表，则可以执行以下操作：

```
##Array of items to be checked with `isset()`
$array_isset = array('field1', 'field2', 'field3');
foreach ($array_isset as $line) {
   #.... same thing you did before
}

$array_tank = array('field4', 'field5', 'field6'); 
foreach ($array_tank as $line) {
   $tank = new Tank()
} 
```

如果我理解您的问题，上述方法将允许您按需要对其执行的操作对字段进行排序。

话虽如此，我有多个项目必须处理大量信息。我每次都发现，最好的方法是找到一种方法将原始数据放入数据库，并在以后执行计算。

这也很容易，因为在 CodeIgniter 中，您可以这样做：

```
$array = $this->input->post(NULL, True);
$this->db->insert('table', $array); 
```

如果您的表单字段与您的数据库列名匹配。

如果您有数据列表，则可以将数据存储为逗号分隔的列表，如下所示：

```
$array = array('value1', 'value2', 'value3');
$insert_string = implode(',', $array); 
```

并在您选择它时将其爆炸。

这可能不适用于您的情况，但在某些情况下确实有价值。

祝你的申请好运；我希望我有所帮助！

# opencv - gstreamer 插件库未链接到 opencv 共享对象库 - CentOS 上的“未定义符号”

> ID：11728951
> 
> 赞同：0
> 
> 时间：2012-07-30T20:19:03.293
> 
> 标签：opencv, centos, libraries, gstreamer

我有一个使用 OpenCV 的插件，它可以在 Kubuntu 上完美运行。现在我试图在 CentOS 上运行代码，但是当我运行管道时，我得到：

```
$ gst-launch videotestsrc ! opencvelement ! ximagesink 
WARNING: erroneous pipeline: no element "opencvelement" 
```

当我在 Kubuntu 运行 ldd 时，我得到：

```
 $ ldd .libs/libOPENCVELEMENT.so 
    linux-gate.so.1 =>  (0x0060f000) 
    libgstbase-0.10.so.0 => /usr/lib/libgstbase-0.10.so.0 (0x00a74000) 
    libgstreamer-0.10.so.0 => /usr/lib/libgstreamer-0.10.so.0 (0x00474000) 
    libgobject-2.0.so.0 => /usr/lib/i386-linux-gnu/libgobject-2.0.so.0 (0x006a2000) 
    libglib-2.0.so.0 => /lib/i386-linux-gnu/libglib-2.0.so.0 (0x00110000) 
    libopencv_core.so.2.3 => /usr/local/lib/libopencv_core.so.2.3 (0x00730000) 
    libstdc++.so.6 => /usr/lib/i386-linux-gnu/libstdc++.so.6 (0x00209000) 
    libm.so.6 => /lib/i386-linux-gnu/libm.so.6 (0x002f4000) 
    libc.so.6 => /lib/i386-linux-gnu/libc.so.6 (0x00acd000) 
    libgcc_s.so.1 => /lib/i386-linux-gnu/libgcc_s.so.1 (0x0031e000) 
    libpthread.so.0 => /lib/i386-linux-gnu/libpthread.so.0 (0x0033c000) 
    libgthread-2.0.so.0 => /usr/lib/i386-linux-gnu/libgthread-2.0.so.0 (0x00357000) 
    libgmodule-2.0.so.0 => /usr/lib/i386-linux-gnu/libgmodule-2.0.so.0 (0x0035d000) 
    libxml2.so.2 => /usr/lib/libxml2.so.2 (0x00c9c000) 
    librt.so.1 => /lib/i386-linux-gnu/librt.so.1 (0x00362000) 
    libdl.so.2 => /lib/i386-linux-gnu/libdl.so.2 (0x0036b000) 
    libffi.so.6 => /usr/lib/i386-linux-gnu/libffi.so.6 (0x00370000) 
    libpcre.so.3 => /lib/i386-linux-gnu/libpcre.so.3 (0x00e52000) 
    libz.so.1 => /lib/i386-linux-gnu/libz.so.1 (0x00377000) 
    /lib/ld-linux.so.2 (0x00a10000) 
```

但是当我在 CentOS 上运行它时，我没有看到 opencv

```
 $ ldd .libs/libOPENCVELEMENT.so 
    linux-vdso.so.1 =>  (0x00007fff7a1fd000) 
    libgstvideo-0.10.so.0 => /usr/lib64/libgstvideo-0.10.so.0 (0x00002ba0ac9b7000) 
    libgstcontroller-0.10.so.0 => /usr/lib64/libgstcontroller-0.10.so.0 (0x00002ba0acbc4000) 
    libgstbase-0.10.so.0 => /usr/lib64/libgstbase-0.10.so.0 (0x00002ba0acdeb000) 
    libgstreamer-0.10.so.0 => /usr/lib64/libgstreamer-0.10.so.0 (0x00002ba0ad03c000) 
    libgobject-2.0.so.0 => /lib64/libgobject-2.0.so.0 (0x00002ba0ad326000) 
    libgmodule-2.0.so.0 => /lib64/libgmodule-2.0.so.0 (0x00002ba0ad569000) 
    libgthread-2.0.so.0 => /lib64/libgthread-2.0.so.0 (0x00002ba0ad76c000) 
    librt.so.1 => /lib64/librt.so.1 (0x00002ba0ad970000) 
    libxml2.so.2 => /usr/lib64/libxml2.so.2 (0x00002ba0adb7a000) 
    libz.so.1 => /lib64/libz.so.1 (0x00002ba0adeb7000) 
    libglib-2.0.so.0 => /lib64/libglib-2.0.so.0 (0x00002ba0ae0cb000) 
    libstdc++.so.6 => /usr/lib64/libstdc++.so.6 (0x00002ba0ae3a8000) 
    libm.so.6 => /lib64/libm.so.6 (0x00002ba0ae6a8000) 
    libc.so.6 => /lib64/libc.so.6 (0x00002ba0ae92b000) 
    libgcc_s.so.1 => /lib64/libgcc_s.so.1 (0x00002ba0aec83000) 
    libpthread.so.0 => /lib64/libpthread.so.0 (0x00002ba0aee91000) 
    libdl.so.2 => /lib64/libdl.so.2 (0x00002ba0af0ac000) 
    /lib64/ld-linux-x86-64.so.2 (0x0000003f6c800000) 
```

这是我的 makefile.am，在两个操作系统上都是一样的

```
plugin_LTLIBRARIES = libOPENCVELEMENT.la 

# Plugin source files: 
libOPENCVELEMENT_la_SOURCES = opencv_chain.c opencv_chain.h datasetup.h 
libOPENCVELEMENT_la_CFLAGS = \ 
    $(GST_PLUGINS_BASE_CFLAGS) \ 
    $(GST_CFLAGS) \ 
    $(OPENCV_CFLAGS) 

libOPENCVELEMENT_la_CXXFLAGS = \ 
    $(GST_PLUGINS_BASE_CFLAGS) \ 
    $(GST_CFLAGS) \ 
    $(OPENCV_CFLAGS) 

libOPENCVELEMENT_la_LIBADD = \ 
    $(GST_PLUGINS_BASE_LIBS) \ 
    $(GST_LIBS) \ 
    $(OPENCV_LIBS) \ 
    -lopencv_core \ 
    -lopencv_highgui 

libOPENCVELEMENT_la_LDFLAGS = $(GST_PLUGIN_LDFLAGS) 
libOPENCVELEMENT_la_LIBTOOLFLAGS = --tag=disable-static 
```

如果您需要更多信息，请与我们联系。任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:37:15.137

你在centos上也安装了所有的opencv开发文件吗？运行一个：

```
grep  "OPENVC_" Makefile 
```

检查 Make 变量包含的内容。您还可以通过 c++filt 管道连接器（未定义的符号）输出，以查看真实的函数名称而不是损坏的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T18:38:45.557

我能够通过转到 /usr/lib64/pkgconfig 并修改 opencv.pc 以明确拥有所有库来解决这个问题。我还必须将插件从 /usr/lib/gstreamer-0.10 移动到 /usr/lib64/gstreamer-0.10

# java - 当组件被添加到 JAVA 的单独线程中时，如何立即重新绘制容器？

> ID：11728953
> 
> 赞同：2
> 
> 时间：2012-07-30T20:19:14.377
> 
> 标签：java, swing, user-interface, animation, event-dispatching

我正在使用java。我有一个单击事件，它在循环中将“正方形”添加到容器中。我希望每个方块在添加时都能正确显示。我尝试在单独的线程中运行“添加正方形”，但它不起作用。

这是我用于“公共类 GuiController 实现 ActionListener、MouseListener”的一些代码：

```
@Override
public void mouseClicked(MouseEvent e)
{
    //createBoardPane();
    new Thread
    (
        new Runnable() 
        {
            public void run() 
            {
                showAnimation();
            }
        }
    ).start();
}

public void showAnimation()
{   
    for(int i = 0; i < model.getAnimationList().size(); i++)
    {
        String coord = model.getAnimationList().get(i);
        int x = Integer.parseInt(coord.substring(0, coord.indexOf(',')));
        int y = Integer.parseInt(coord.substring(coord.indexOf(',') + 1, coord.length() - 2));
        boolean shouldPlacePiece = (coord.charAt(coord.length() - 1) == 'p');

        if(shouldPlacePiece)
        {
            model.getView().getBoardPane().getComponent(x + (y * model.getBoardSize())).setBackground(Color.BLACK);
        }
        else
        {
            model.getView().getBoardPane().getComponent(x + (y * model.getBoardSize())).setBackground(Color.WHITE);
        }

        model.getView().getBoardPane().repaint();

        long time = System.currentTimeMillis();
        while((System.currentTimeMillis() - time) < 250)
        {
            // wait loop
        }
    }
} 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T21:05:25.007

为这个长时间运行的任务创建一个单独`Thread`的运行是一个好主意——除非你想在做动画时锁定与 GUI 的交互。

现在，Swing GUI 对象不是线程安全的（除了少数例外），因此您不能从 Swing 的 Event Dispatch Loop 线程以外的线程使用它们。所以在你的 for 循环中获取所有的 GUI 更新代码，并用一个新的 Runnable 包装它（是的，另一个）。然后在循环的每次迭代中调用`SwingUtilities.invokeLater(Runnable doRun)`它。`Runnable`

然后，您的 GUI 更新代码将被安排在 Event Dispatch Loop 上尽快运行，这将在您的工作线程进入睡眠状态时发生（您有什么反对意见`Thread.sleep`吗？）。

## 替代方案：使用`SwingWorker`而不是`Thread`

[SwingWorker 将为您创建和管理一个新线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)，并发布它 (SwingWorker) 将导致在 Event Dispatch Loop 的线程上运行的数据。您将`doInBackground`使用您的代码覆盖。使用参数调用`publish`以推送到事件调度线程。使用代码覆盖`process`以处理这些参数并更新您的 GUI。

SwingWorker 的问题是它`publish`在大约 33 毫秒的时间内累积 ed 事件。如果您发布的频率高于此值，您可能每 33 毫秒左右将所有事件聚集在一起。在您的情况下，更新之间的 250 毫秒应该不是问题。

# python - python子进程删除和重命名文件

> ID：11728954
> 
> 赞同：0
> 
> 时间：2012-07-30T20:19:24.993
> 
> 标签：python, subprocess

我正在尝试删除一个文件，然后在 python 中将一个文件重命名为已删除的文件。

```
import sys
import subprocess
fileInput = sys.argv[1]
|
|
#code to create fileInput.tmp
|
|
ret=subprocess.Popen("rm "+fileInput,shell=True, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
print ret
ret1=subprocess.Popen("mv "+ fileInput+".tmp "+fileInput,shell=True, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
print ret1 
```

发生的事情有时（并非总是）fileInput 和 fileInput.tmp 都在`"ret="`step 中被删除并且`"ret1="`step 不执行。

有人可以建议为什么会这样。此代码在 MacOSx 上运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:32:14.510

好的，不直接回答问题，而是提供更好的选择。

在这里使用`subprocess`是一个*非常糟糕的*主意。在这里很容易做可怕的事情；您至少需要转义传递给 shell 的参数。

相反，使用 Python 为您提供的：

```
os.rename(fileInput + '.tmp', fileInput) 
```

这是原子移动/重命名操作。而且您不必`rm`在更换之前提交文件。此外，您通常不会这样做，因为在`rm`and`mv`调用之间不会有具有该名称的文件。如果您只使用`mv`，则替换将是原子的，并且某些文件将始终存在。

这就是所有的*短篇小说*，我想。

* * *

作为旁注，`os.rename()`不适用于跨文件系统。因此，虽然使用它来重命名文件是可以的（源和目标位于同一目录中），但如果您要跨不同目录移动文件，您宁愿使用：

```
import shutil

shutil.move(src, dst) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T20:24:27.973

第一个子流程未完成，请执行以下操作：

```
p = subprocess.Popen("...")
p.communicate() # waits until the subprocess completes 
```

# c# - 读取方法跳过节点

> ID：11728956
> 
> 赞同：0
> 
> 时间：2012-07-30T20:19:48.253
> 
> 标签：c#, xml

我在尝试解析 XML 文件时遇到问题，因为该`Read()`方法似乎跳过了一些行。首先，这是 XML 文件：

```
 <comments>
    <comment id="e2d6d918-0fbb-4434-9e43-6b028b872867" parentid="00000000-0000-0000-0000-000000000000" approved="True" spam="False" deleted="False">
      <date>2012-06-14 18:40:55</date>
      <author>*content here*</author>
      <email>*content here*</email>
      <country>*content here*</country>
      <ip>*content here*</ip>
      <moderatedby>*content here*</moderatedby>
      <content>*content here*</content>
    </comment>
    <comment id="7f74b8af-73e5-407f-abcb-c3cba5ffc611" parentid="e2d6d918-0fbb-4434-9e43-6b028b872867" approved="True" spam="False" deleted="False">
      <date>2012-06-15 01:59:34</date>
      <author>*content here*</author>
      <email>*content here*</email>
      <country>*content here*</country>
      <ip>*content here*</ip>
      <website>*content here*</website>
      <content>*content here*</content>
    </comment>
  </comments> 
```

并继续代码：

（我正在使用`XmlTextReader`）

```
 while (reader.Read())
            {
                if (reader.Name == "comment" && reader.NodeType == XmlNodeType.Element)
                {
                    Comment newComment = new Comment();

                    newComment.PostId = postId;

                    reader.MoveToAttribute("deleted");
                    newComment.IsDeleted = Convert.ToBoolean(reader.Value);
                    reader.MoveToAttribute("spam");
                    newComment.IsSpam = Convert.ToBoolean(reader.Value);
                    reader.MoveToAttribute("approved");
                    newComment.IsApproved = Convert.ToBoolean(reader.Value);
                    reader.MoveToAttribute("parentid");
                    newComment.ParentCommentId = new Guid(reader.Value);
                    reader.MoveToAttribute("id");
                    newComment.PostCommentId = new Guid(reader.Value);

                    reader.ReadToFollowing("date");
                    newComment.CommentDate = Convert.ToDateTime(reader.ReadString());

                    reader.ReadToFollowing("author");
                    newComment.Author = reader.ReadString();

                    reader.ReadToFollowing("email");
                    newComment.Email = reader.ReadString();

                    reader.ReadToFollowing("country");
                    newComment.Country = reader.ReadString();

                    reader.ReadToFollowing("ip");
                    newComment.Ip = reader.ReadString();

                    reader.ReadToFollowing("website");
                    newComment.Website = reader.ReadString();

                    //reader.ReadToFollowing("moderatedBy");
                    newComment.ModeratedBy = string.Empty;

                   //reader.ReadToFollowing("avatar");
                    newComment.Avatar = string.Empty;

                    reader.ReadToFollowing("content");
                    newComment.CommentContent = reader.ReadString();

                    comments.Add(newComment);
                }
            } 
```

编辑：我做了更多调试，发现我试图读取不存在的网站元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:31:14.623

问题是我试图阅读所有评论节点都不存在的“网站”元素。这导致读者继续搜索，直到找到一个（就像在上面显示的 XML 文件中通过转到第二条评论所做的那样）或到达文件末尾。

我删除了该检查，它现在可以工作了。

# asp.net - VB.net 和 SFTP 将文件下载到客户端

> ID：11728957
> 
> 赞同：0
> 
> 时间：2012-07-30T20:19:48.587
> 
> 标签：asp.net, vb.net, sftp

我正在开发一个用 VB.net 编写的 ASP.net Web 应用程序

我需要从托管 Web 应用程序的服务器将文件下载到 UNIX 客户端。

对我来说最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:25:32.170

我有一个类似的设置，我只是使用“wget”命令。我还有另一个系统，其中安全性更重要，所以我用 C++ 编写了一个客户端程序来连接套接字。

这些是你的两个主要途径......除非我错过了你没有提到的要求......

# python - pyflakes w804 是什么意思？

> ID：11728960
> 
> 赞同：2
> 
> 时间：2012-07-30T20:20:00.663
> 
> 标签：python, pyflakes

我正在开发一个装饰器，它将重试运行一个函数最多 N 次，如下所示：

```
def retry(exceptions, truncate=5, delay=0.25):                                     
      """Retry the decorated function using an exponential backoff strategy.         
      If the function does not complete successfully a TimeoutException is           
      raised."""                                                                     
      def wrapper(func):                                                             
          @wraps(func)                                                               
          def wrapped(*args, **kwargs):                                              
              tries = 0                                                              
              while tries < truncate:                                                
                  try:                                                               
                      return func(*args, **kwargs)                                   
                  except exceptions, e:                                              
                      print "%s, Retrying in %d seconds..." % (str(e), delay)        
                      time.sleep(delay)                                              
>>                    delay += delay                                                 
                      tries += 1                                                     
              else:                                                                  
                  raise TimeoutException()                                           
          return wrapped                                                             
      return wrapper 
```

对我来说，代码看起来很合理，但在突出显示的 pyflakes 抱怨的行上，报告：

> 赋值前引用的 W804 局部变量“延迟”（在第 x 行的封闭范围中定义）

这对我来说完全没有意义。`delay` *已经*被分配了一个值，我想我应该可以随意引用它。有人可以解释错误是什么，如果合理，我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T20:23:21.453

如果您尝试运行此代码，它实际上会崩溃。问题在于，在`wrapped`(and `wrapper`) 等嵌套范围内，您可以*读取*外部变量但不能*分配*给它们。

这就是3.x 中[的`nonlocal`关键字](http://docs.python.org/release/3.1.5/reference/simple_stmts.html#the-nonlocal-statement)的用途（这将增加从单个调用到`delay`的所有“实例” ）。要在 2.x 中复制它，您需要执行类似的操作并将其作为.`wrapped``retry``delay_lst = [delay]``delay_lst[0]`

如果您希望修改是本地的`wrapped`，只需创建一个新变量并使用 的值对其进行初始化`delay`。

# jquery - jquery读取并显示在文本字段中

> ID：11728961
> 
> 赞同：2
> 
> 时间：2012-07-30T20:20:07.543
> 
> 标签：jquery

我的网站上有一个价格计算器。我希望 jquery 选择一个盒子上的值并将其实时发送到另一个盒子。

```
<form>
How much do you want to spend <input type="text" id="pricein" /><br />
This is how much you will spend<input type="text" id="priceout"/>
</form> 
```

有人知道如何用 jquery 来完成吗？这听起来可能很容易，但我学的很慢，但我正在学习。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T20:22:30.083

```
$("#pricein").keyup(function() {
    $("#priceout").val($("#pricein").val());
});​ 
```

[**演示**](http://jsfiddle.net/Bumzd/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T20:21:08.993

你需要的`val()`功能：

```
var price = $('#pricein').val() 
```

并设置值：

```
$('#priceout').val(newValue); 
```

[您可以在此处](http://api.jquery.com/val/)阅读文档

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T20:26:39.483

使用键位

```
$('#pricein').bind('keyup', function() 
    { 
        $('#priceout').val($(this).val()); 
    });​ 
```

[JSFIDDLE](http://jsfiddle.net/SerL9/)

# git - 每个文件的 git log 提交计数

> ID：11728967
> 
> 赞同：3
> 
> 时间：2012-07-30T20:20:37.257
> 
> 标签：git

我正在尝试从以下内容中获取以下信息`git log`： 1- 存储库中每个文件的提交数（两个日期之间） 2- 编辑每个文件的贡献者数量（两个日期之间） 3- 编辑每个文件的不同贡献者的数量（两个日期之间）

我试过玩，`git log`但我没有那么成功。我也尝试搜索脚本，但没有运气。有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T20:28:59.147

（使用常用的 Unix 工具时）

repo 中给定文件的提交次数：

```
git log --oneline ${filename} | wc -l 
```

给定文件的贡献者数量：

```
git log --pretty=format:%ae ${filename} | sort -u | wc -l 
```

两个日期之间给定文件的贡献者数量：

```
git log --since=${date1} --until=${date2} --pretty=format:%ae ${filename} \
    | sort -u | wc -l 
```

现在，要对当前 repo 中的每个文件进行迭代，您需要执行以下操作：

```
find | grep -v '^\./\.git' | while read filename
do
    echo "${filename} has $(git log --oneline ${filename} | wc -l) commits"
done 
```

# html - HTML 元素语义

> ID：11728970
> 
> 赞同：1
> 
> 时间：2012-07-30T20:21:10.617
> 
> 标签：html

以下代码示例有什么区别？我很感激一些关于在哪里以及如何使用它们的例子。我知道肯定有一些不同...

`<b>`和+ /和- `<strong>` `<i>`_`<em>` `<center>``<b>``<strong>``<h1>``<h6>`

我也想知道是否有“替代方案” `<u>`...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T20:29:41.890

不鼓励使用`<b>`,`<i>`和`<center>`，因为它们不会给文档的结构增加任何意义。它们的表现效果可以用 CSS 重新创建。

`<strong>`并且`<em>`显然更具语义性，因为它们的名称暗示了*强调*的概念。请注意，默认情况下浏览器将呈现`<strong>`为粗体和`<em>`斜体，但这也可以通过 CSS 进行更改，因此它们不是`<b>`和的同义词`<i>`。

至于`<h1>`- `<h6>`，它们代表六个不同级别的标题，并用于给内容一些层次结构。因此，它们在语义上也很重要。

下面是如何`<u>`用 CSS 替换（例如，在所有带有 class 的元素上`underline`）：

```
.underline { text-decoration: underline; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T20:24:21.667

摘自以下链接：

> i - 严格来说是一个表现元素。如果您希望文本为斜体并且没有任何真正的语义含义，则将其包装在 i 标签中。
> 
> b - 严格来说是一个表现元素。如果您希望文本是粗体并且没有任何真正的语义含义，则将其包装在 b 标签中。
> 
> em - 严格来说是一个结构元素。如果您希望使用语音阅读器强调文本，请将其包装在 em 标签中。
> 
> strong - 严格来说是一个结构元素。如果您希望使用语音阅读器强调重点朗读文本，则将其包装在强标签中。

[来源链接](http://www.webmasterworld.com/forum21/9344.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T20:35:38.807

### 标题标签 <h1>

标题标签用于标题/标题。`<h1>`to的区别`<h6>`是标题的“重量”。`<h1>`很多人说，对于 SEO，最好每页只有一个来显示页面的内容。

### <b> 和 <i>

从布局的角度来看，两者都是一样的`<em>`，`<strong>`但它们不会向文档添加语义。它们在 HTML5 中也已弃用，您不应再使用它们。他们带来的所有风格都可以用 CSS 来实现，而他们缺乏语义的所有东西都被`<em>`和覆盖`<strong>`。

### <u>

很久以前就被弃用了（使用 XHTML1？），你应该使用这样的东西：

```
<span style="text-decoration: underline;">underline text</span> 
```

由于 a`<span>`是“语义中立的”，它不会为内容增加任何价值。

# javascript - 如何仅使用 Javascript/jQuery 将查询字符串中的信息传递到 Facebook 中的页面选项卡应用程序

> ID：11728973
> 
> 赞同：0
> 
> 时间：2012-07-30T20:21:22.923
> 
> 标签：javascript, jquery, facebook

我正在尝试将一条信息（使用查询字符串）传递给我的 Facebook 页面选项卡应用程序。

例如，如果用户单击此 URL：

- [http://apps.facebook.com/myappname/?app_data=mydata](http://apps.facebook.com/myappname/?app_data=mydata)

我希望能够在应用程序中访问“mydata”。

根据我所做的阅读，Facebook 不允许`GET`请求，但可以使用`app_data`and来做到这一点`signed_request`。

但是，我无法找到有关如何使用 javascript SDK（甚至可能吗？）和 .NET（理想情况下，我可以仅使用 JavaScript 来实现）的任何信息。我不知道如何使用 signed_request 设置和读取数据，而有关 signed_requests 的文档让我感到困惑，而不是帮助。我真的很想要有关如何实现此功能的简单说明。

编辑：

我想我几乎想通了。如果其他人正在寻找这个问题的答案，我把到目前为止我所做的放在下面。另外，如果您看到任何改进的空间，请告诉我。我不认为这是完美的，但它确实有效。

首先，网址需要是页面标签网址，而不是应用程序的直接网址（就像我在上面发布的那样）：- [http://www.facebook.com/pages/PageName/########? sk=app_#########&app_data=mydata](http://www.facebook.com/pages/PageName/########?sk=app_#########&app_data=mydata)

这是对我有用的javascript代码：

```
//get value of signed request and split it 
var signedRequest = $('#mainContent_hfSigned').val().split(".");

//decode json (this does not work on ie - needs to be replaced)
var decodedJson = window.atob(signedRequest[1]);

//parse json to gain access to parameters
var jsonParams = jQuery.parseJSON(decodedJson);

//append the app_data varible to ensure it's being read properly
$('.message').append('Your app_data param is "' + jsonParams.app_data + '"') 
```

在 jsfiddle 上：http: [//jsfiddle.net/C3xsm/1/](http://jsfiddle.net/C3xsm/1/)

我知道我仍然需要做的一件事是将 atob 替换为 javascript 的 base64url 解码器。我正在考虑使用这个：

[http://code.google.com/p/stringencoders/source/browse/trunk/javascript/base64.js](http://code.google.com/p/stringencoders/source/browse/trunk/javascript/base64.js)

如果效果好，我会在这里更新。或者如果有人知道更好的方法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:25:47.920

> 理想情况下，我可以只用 JavaScript 来实现它

这是不可能的，因为您已经发现 signed_request 参数已发布到您的页面，而 JavaScript 本身无法访问 POST 参数。

关于[signed_request 参数](https://developers.facebook.com/docs/authentication/signed_request/)的文档有关于如何在服务器端解析/解码的说明；该示例使用 PHP，但应该很容易将基本算法（如果您可以调用它的话）转移到您的 .NET 环境中。

# .htaccess - 如何拒绝访问 .htaccess 中的文件

> ID：11728976
> 
> 赞同：132
> 
> 时间：2012-07-30T20:21:29.257
> 
> 标签：.htaccess

我有以下 .htaccess 文件：

```
RewriteEngine On
RewriteBase /

# Protect the htaccess file
<Files .htaccess>
Order Allow,Deny
Deny from all
</Files>

# Protect log.txt
<Files ./inscription/log.txt>
Order Allow,Deny
Deny from all
</Files>

# Disable directory browsing
Options All -Indexes 
```

我试图禁止访问者访问以下文件：

```
domain.com/inscription/log.txt 
```

但我上面的内容不起作用：我仍然可以从浏览器远程访问文件。

* * *

## 回答 #1

> 赞同：223
> 
> 时间：2012-07-30T21:18:18.500

在 htaccess 文件中，`<Files>`指令的范围仅适用于该目录（我想是为了避免在子目录的 htaccess 中的规则/指令从父级应用取代规则/指令时产生混淆）。

所以你可以拥有：

```
<Files "log.txt">  
  Order Allow,Deny
  Deny from all
</Files> 
```

对于 Apache 2.4+，您可以使用：

```
<Files "log.txt">  
  Require all denied
</Files> 
```

在您`inscription`目录中的 htaccess 文件中。或者您可以使用 mod_rewrite 来处理这两种情况，拒绝访问 htaccess 文件以及 log.txt：

```
RewriteRule /?\.htaccess$ - [F,L]

RewriteRule ^/?inscription/log\.txt$ - [F,L] 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-03-07T13:38:32.067

**强模式匹配**——这是我在 Perishable Press 使用的方法。使用强模式匹配，此技术可防止外部访问任何包含“<strong>.hta”、“<strong>.HTA”或其任何不区分大小写的组合的文件。为了说明，此代码将阻止通过以下任何请求进行访问：

*   .htaccess
*   .HTACCESS
*   .hTaCcEsS
*   testFILE.htaccess
*   文件名.HTACCESS
*   FILEROOT.hTaCcEsS

..等等等等。显然，这种方法在保护您网站的 HTAccess 文件方面非常有效。此外，该技术还包括强化“<strong>满足所有”指令。请注意，此代码应放在您域的根 HTAccess 文件中：

```
# STRONG HTACCESS PROTECTION
<Files ~ "^.*\.([Hh][Tt][Aa])">
order allow,deny
deny from all
satisfy all
</Files> 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-04-09T21:12:26.980

我不相信当前接受的答案是正确的。例如，我`.htaccess`在虚拟服务器（apache 2.4）的根目录中有以下文件：

```
<Files "reminder.php">
require all denied
require host localhost
require ip 127.0.0.1
require ip xxx.yyy.zzz.aaa
</Files> 
```

这可以防止外部访问`reminder.php`位于子目录中的内容。`.htaccess`我的Apache 2.2 服务器上有一个类似的文件，效果相同：

```
<Files "reminder.php">
        Order Deny,Allow
        Deny from all
        Allow from localhost
        Allow from 127.0.0.1
     Allow from xxx.yyy.zzz.aaa
</Files> 
```

我不确定，但我怀疑这是试图在`.htaccess`文件中专门定义子目录，*即* `<Files ./inscription/log.txt>`导致它失败。将`.htaccess`文件放在与目录相同`log.txt`的目录中会更简单，`inscription`它会在那里工作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-20T09:21:16.977

将以下行放在您的 .htaccess 文件中，并根据需要替换文件名

```
RewriteRule ^(test\.php) - [F,L,NC] 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2017-01-24T02:51:23.357

那么你可以使用`<Directory>`标签，例如：

```
<Directory /inscription>
  <Files log.txt>
    Order allow,deny
    Deny from all
  </Files>
</Directory> 
```

不要使用`./`，因为如果您只是使用`/`它，它会查看您网站的根目录。

有关更详细的示例，请访问[http://httpd.apache.org/docs/2.2/sections.html](http://httpd.apache.org/docs/2.2/sections.html)

# javascript - JavaScript 中的正则表达式，当量词是模式的一部分时

> ID：11728978
> 
> 赞同：1
> 
> 时间：2012-07-30T20:21:39.100
> 
> 标签：javascript, regex

我一直在尝试使用匹配插入符号、小于和大于插入符号之间的任何文本的正则表达式。

所以它看起来像：^<我想要选择的文本>^

我已经尝试过这样的事情，但它不起作用：^<(.*?)>^

我假设这是可能的，对吧？我认为我一直处于艰难时期的原因是插入符号用作量词。感谢我得到的任何帮助！

**更新**

就让每个人都知道，他们追随我不是在工作

```
 /\^<(.*?)>\^/ 
```

但是，事实证明我正在获取 html 实体，因为我是通过使用 .innerHTML 属性获取字符串的。换句话说，

```
> ... &gt;
< ... &lt; 
```

为了解决这个问题，我的正则表达式实际上是这样的：

```
\^&lt;(.*?)((.|\n)*)&gt;\^ 
```

这包括中间的字符串应该是任何字符或换行符这一事实。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T20:23:50.910

您需要转义该`^`符号，因为它在 JavaScript 正则表达式中具有特殊含义。

```
 /\^<(.*?)>\^/ 
```

在 JavaScript 正则表达式中，`^`表示*string 的开头*，除非`m`使用了修饰符，在这种情况下，它表示*line 的开头*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:24:10.513

这应该有效：

```
\^<(.*?)>\^ 
```

在正则表达式中，如果要使用具有特殊含义的字符（插入符号、方括号、管道...），则必须使用反斜杠对其进行转义。例如，`(\w\b)*\w\.`将选择以点结尾的单词序列。

### 小心！

如果您必须将正则表达式模式作为字符串传递，即没有像 javascript 或 perl 中那样的正则表达式文字，您可能必须使用**双**反斜杠，编程语言会将其转义为单个反斜杠，然后由正则表达式引擎。
多种语言的相同正则表达式：

```
Python:
  import re
  myRegex=re.compile(r"\^<(.*?)>\^") # The r before the string prevents backslash escaping
PHP:
  $result=preg_match("/\\^<(.*?)>\\^/",$subject); // Notice the double backslashes here?
JavaScript:
  var myRegex=/\^<(.*?)>\^/,
      subject="^<blah example>^";
  subject.match(myRegex); 
```

如果您告诉我们您使用的是哪种编程语言，我们将能够为您提供一些完成的代码以供使用。

编辑：哎呀，甚至没有注意到这被标记为javascript。然后，您根本不必担心双反斜杠。

编辑2：`\b`表示一个[单词边界](http://www.regular-expressions.info/wordboundaries.html)。虽然我同意你的就是我自己会用的。

# c# - 导入特殊字符

> ID：11728979
> 
> 赞同：0
> 
> 时间：2012-07-30T20:21:50.203
> 
> 标签：c#

环境：ASP.NET 3.5 如何正确导入这些特殊字符？找出字符编码的最佳方法是什么？

```
System.IO.StreamReader sr = new System.IO.StreamReader(
                                           Request.Files[0].InputStream, 
                                           Encoding.GetEncoding("UTF-8"));

string csv = sr.ReadToEnd(); 
```

![在此处输入图像描述](../Images/c84a74bd2b9d067cf0e675df39cdbee7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:26:21.003

使用 CSV 解析库 - 有许多适用于 .NET 的免费和开源库，甚至在命名空间中也有[内置](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)`Microsoft.VisualBasic.FileIO`库。

该库可以负责解析 CSV，您将能够阅读内容。

# objective-c - 从 restkit 商店设置神奇的记录默认上下文

> ID：11728982
> 
> 赞同：0
> 
> 时间：2012-07-30T20:22:06.193
> 
> 标签：objective-c, ios, core-data, restkit, magicalrecord

我有问题让获取结果控制器（使用magicrecord）观察restkit映射结果的变化。只有当我使用来自 restkit 的上下文并更新到神奇记录的默认上下文（然后在获取结果控制器中使用它）时，新的插入或更改才会更新到表视图。

这是我所做的，不知道是否可以？

```
NSManagedObjectContext* context = [[RKObjectManager sharedManager].objectStore managedObjectContextForCurrentThread];
[NSManagedObjectContext MR_setRootSavingContext:context];
[NSManagedObjectContext MR_setDefaultContext:context]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:03:21.067

您不想设置根保存上下文。尝试将其设置为零。由于您基本上忽略了 MagicalRecord，因此我也建议您不要这样做。如何让 RestKit 托管对象上下文成为默认上下文或根保存上下文的子级......反之亦然？

# java - 计算器为Java中的计算方法产生空字符串错误

> ID：11728983
> 
> 赞同：2
> 
> 时间：2012-07-30T20:22:08.607
> 
> 标签：java, swing, methods, jtextfield, calculator

好的，我正在用 Java 编写一个计算器，并将 a 输入`String`到我的加法方法中。我`JButtons`用来将文本写入`JTextField`.

当用户单击等号按钮时，我找到了他们想要执行的相对操作（如果他们单击运算符按钮，我将 int 设置为特定数字（因此加法为 1））。我首先将 转换`String`为`char`数组，然后检查字符是数字还是运算符。

我计划为我要使计算器能够进行的所有计算（加法，减法等）编写几种方法。然后，我使用该`.append`方法将不是运算符的字符写入`StringBuffers`，然后将其转换为字符串，然后再转换为双精度值。然后我执行计算，并返回结果。

当我尝试使用计算器时，Eclipse`java.lang.NumberFormatException`会在我尝试将保存 的字符串`StringBuffer`转换为`double`. 异常是由空的`String`.

任何人都可以解释为什么会发生这种情况并提供解决方案吗？

以下是相关代码：

```
import java.awt.event.*;
import javax.swing.*;
import java.awt.GridLayout;

public class Calculator2012 extends JFrame implements ActionListener{

    public static double calculateAdd(String inputString)//this is my addition method
    {
        int s = 0;
        boolean g = true;
        StringBuffer num1 = new StringBuffer();
        StringBuffer num2 = new StringBuffer();
        char[] b = inputString.toCharArray();
        int i = 0;
        if(g==true)
        {
            for(int v = 0; v<b.length; v++)
            {
                if(b[i]!='+')
                {
                    num1.append(b[i]);
                }
                else 
                {
                    g = false;
                    s = ++i;
                    break;
                }
                i++;
            }
        }
        else
        {
            for(int a = 0; a<(b.length-s); a++)
            {
                num2.append(b[s]);
                s++;
            }
        }
        String c1 = num1.toString();
        String c2 = num2.toString();
        double x = Double.parseDouble(c1);
        double y = Double.parseDouble(c2);//this is the error producing line
        double z = x+y;
        return z;
    } 
```

这是我的方法调用：

```
public void actionPerformed(ActionEvent e)
{
    //omitted irrelevant code

    if(e.getSource()==equals)
    {
        s1 = tf1.getText();
        s2 = " = ";
        s3 = s1+s2;
        tf1.setText(s3);
        if(p==1)//p is my int that detects which operator  to use
        {
            s1 = tf1.getText();
            s2 = Double.toString(calculateAdd(s1));//I call the method here
            s3 = s1+s2;
            tf1.setText(s3); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T20:29:42.583

由于`g`is `true`，这部分永远不会执行：

```
 else
    {
        for(int a = 0; a<(b.length-s); a++)
        {
            num2.append(b[s]);
            s++;
        }
    } 
```

因此`num2`永远不会填充，并且您会遇到尝试解析空字符串的异常。

# ios - Apple MDM 推送错误，但仅限于某些 iOS 设备

> ID：11728984
> 
> 赞同：15
> 
> 时间：2012-07-30T20:22:10.370
> 
> 标签：ios, apple-push-notifications, mdm

我们在某些 iPhone 设备上遇到了 MDMpush 错误：

> 7 月 30 日 17:52:46 Mirnas-iPhone apsd[49] : : 发生流错误: Error Domain=NSPOSIXErrorDomain Code=54 "The operation could'-t -be -completed-. -Connection -reset -by -peer- " -UserInfo-=-0-x-1-4-3-5-4-0 -{-}

所有设备都是相同的，相同的 iOS 版本，但在 50% 的设备上我们有这个错误。在其他设备上，推送运行良好。有此问题的设备在 MDM 有效负载安装期间签入没有问题，但是当我们尝试推送某些内容时，会发生错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:46:02.577

我们很久以前就有类似的症状，是因为注册了一半的设备后有人更改了Apple MDM证书造成的。一些设备注册了新证书，其余设备注册了旧证书。苹果 MDM 服务器不喜欢这样。

您需要使用相同的证书注册所有设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T05:53:37.150

如果您对不同的设备使用相同的认证，我也会遇到这个问题。您必须进行清理，然后在设备上构建和运行应用程序。删除以前安装的使用相同认证的应用程序（相同的应用程序）。

# php - 按具有多个标志的节点的总标志计数对 Drupal 6 视图进行排序

> ID：11728986
> 
> 赞同：2
> 
> 时间：2012-07-30T20:22:24.340
> 
> 标签：php, sorting, drupal-6, drupal-modules, drupal-views

我正在使用 Drupal 6，并且在我的节点上有多个标志，每个标志都有一个值，例如：有趣、无聊、聪明、有趣、辱骂等。 Views 目前能够按每个单独标志的标志计数对结果进行排序，但我需要按每个音符上所有标志的总组合标志数对我的节点进行排序。'rate' 模块非常接近于这样做，但我需要使用 flag 模块，以便我可以使用 flag solr 模块来允许按标志搜索。我真的不知道从哪里开始......关于我可以采取的方法的任何建议？

这是当前的视图查询；

```
SELECT node.nid AS nid, 
flag_counts_node.count AS flag_counts_node_count,    
flag_counts_node_1.count AS flag_counts_node_1_count, 
flag_counts_node_2.count AS flag_counts_node_2_count, 
flag_counts_node_3.count AS flag_counts_node_3_count, 
flag_counts_node_4.count AS flag_counts_node_4_count FROM node node  
LEFT JOIN flag_counts flag_counts_node ON node.nid = flag_counts_node.content_id AND flag_counts_node.fid = 7 
LEFT JOIN flag_counts flag_counts_node_1 ON node.nid = flag_counts_node_1.content_id AND flag_counts_node_1.fid = 6 
LEFT JOIN flag_counts flag_counts_node_2 ON node.nid = flag_counts_node_2.content_id AND flag_counts_node_2.fid = 4 
LEFT JOIN flag_counts flag_counts_node_3 ON node.nid = flag_counts_node_3.content_id AND flag_counts_node_3.fid = 5 
LEFT JOIN flag_counts flag_counts_node_4 ON node.nid = flag_counts_node_4.content_id AND flag_counts_node_4.fid = 3 
WHERE (node.type in ('rpodcast', 'upodcast')) AND (node.status = 1) ORDER BY flag_counts_node_count ASC, flag_counts_node_1_count ASC, flag_counts_node_2_count ASC, flag_counts_node_3_count ASC, flag_counts_node_4_count ASC 
```

到目前为止的模块代码；

```
<?php
function flagcountview_views_pre_execute(&$view){
if ($view->name == 'audio') {
$sql = $view->build_info['query']; 
$flag_count = "flag_counts_node.count + flag_counts_node_1.count +  flag_counts_node_2.count + flag_counts_node_3.count"; 
$sql .= "ORDER BY $flag_count DESC"; 
$view->build_info['query'] = $sql;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T04:30:05.353

嗨，您似乎无法添加字段，因此我们可以尝试其他方法

```
function flagcountview_views_pre_execute(&$view){
  if ($view->name == 'audio') {
    $sql = $view->build_info['query']; 
    $search = "ORDER BY flag_counts_node_count ASC, flag_counts_node_1_count ASC, flag_counts_node_2_count ASC, flag_counts_node_3_count ASC, flag_counts_node_4_count ASC";
    $replace = "ORDER BY flag_counts_node.count + flag_counts_node_1.count +  flag_counts_node_2.count + flag_counts_node_3.count ASC"; 
    $sql = str_replace($search, $replace, $sql);; 
    $view->build_info['query'] = $sql;
  }
} 
```

确保您在视图中添加了所有标志计数 -> 排序标准 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T06:47:26.820

考虑到您已经在视图中添加了所有标志关系和标志计数，最好使用视图预执行来添加所有计数和排序

# 更新

希望您已经在关系和字段中添加了所有标志计数。现在在代码中添加'

```
function MODULENAME_views_pre_execute(&$view){
  $sql = $view->build_info['query']; 
  $flag_count = flag_counts_node_count + flag_counts_node_1_count + flag_counts_node_2_count + flag_counts_node_3_count + flag_counts_node_4_count; 
  $sql .= " ORDER BY $flag_count ASC"; 
  $view->build_info['query'] = $sql;
} 
```

**重要的**

*   确保您从“排序标准”中删除了所有内容
*   确保您在“字段”中添加了所有标志计数

# ios - 由于应用程序启动，Xcode iOS 测试覆盖率不正确

> ID：11728987
> 
> 赞同：2
> 
> 时间：2012-07-30T20:22:24.643
> 
> 标签：ios, xcode, unit-testing, code-coverage

我已经启用了测试覆盖率，使用and 和`Generate Test Coverage Files`hack`Instrument Program Flow`没有问题。`fopen$UNIX2003``fwrite$UNIX2003`

但问题是，当您使用 XCode 运行测试时，它最终会启动模拟器来启动您的应用程序。当发生这种情况时，测试覆盖率的输出并不真正正确，因为它认为代码的某些部分被触及是因为它们是在应用程序启动时执行的，**而不是**因为测试触及它们。

有没有更好的方法来查看**测试**实际触及了哪些代码？

**编辑：**

所以不是我的问题的真正答案，但可以在这里找到至少可以获得更好的覆盖率的某种“解决方案”：[在 Xcode 4 中运行逻辑测试而不启动模拟器](https://stackoverflow.com/questions/7274711/run-logic-tests-in-xcode-4-without-launching-the-simulator)

# dojo - 如何使用nodejs在windows中编译dojo主题？

> ID：11728992
> 
> 赞同：0
> 
> 时间：2012-07-30T20:22:54.637
> 
> 标签：dojo

我下载了带有主题和编译器的 dojo 源代码，并尝试使用 node.js 对其进行编译

并按照以下说明进行操作，但无法在 pc 环境中编译？

可以帮忙吗？

[http://davidwalsh.name/dijit-theme](http://davidwalsh.name/dijit-theme)

[http://nodejs.org/#](http://nodejs.org/#)

```
C:\Downloads\dojo-release-1.7.3-src\dojo-release-1.7.3-src\dijit\themes\claro>node compile.js

Error: require.paths is removed. Use node_modules folders, or the NODE_PATH environment variable instead.
    at Function.Module._compile.Object.defineProperty.get (module.js:386:11)
    at Object.<anonymous> (C:\Downloads\dojo-release-1.7.3-src\dojo-release-1.7.3-src\util\less\ind
ex.js:5:8)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (C:\Downloads\dojo-release-1.7.3-src\dojo-release-1.7.3-src\dijit\themes\
claro\compile.js:8:9)
    at Module._compile (module.js:449:26) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T02:58:07.750

看起来您正在使用旧版本的 LESS 和较新版本的节点。

dojo-release-1.7.3-src 与 2011 年初发布的 LESS 1.1.3 捆绑在一起。

替换`util/less`为[更新版本](https://github.com/cloudhead/less.js/archive/v1.3.3.zip)的 LESS。

* * *

或者，`compile.js` [所做](http://download.dojotoolkit.org/release-1.7.3/dojo-release-1.7.3/dijit/themes/claro/compile.js)的只是针对主题目录中的所有 LESS 文件运行 LESS 解析器。您可以安装 LESS 命令行工具 ( ) 并手动`npm install -g less`调用LESS 文件。[`lessc`](http://lesscss.org/#usage)

# ios - 从外围设备启动 CoreBluetooth 重新连接

> ID：11728993
> 
> 赞同：2
> 
> 时间：2012-07-30T20:22:56.790
> 
> 标签：ios, iphone, bluetooth-lowenergy, core-bluetooth

我有一部 iPhone，我有一个低功耗蓝牙（又名蓝牙 4.o）设备。两人过去曾有过联系。但现在他们分开了。发生了一些事情，说了无法收回的话，现在他们已经断开了联系。

现在他们又在同一个房间里。BTLE 设备想要再次连接。它不想等待 iPhone 调用它。它正在采取主动。它想与 iPhone 通话，并让他们曾经共享的应用程序再次启动。

如何设置 iPhone 代码以支持此功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T23:35:07.457

(Wow, corny.)

You have to leave the app connecting to the device, so when the device becomes available the app will connect to it (so long as the app is alive). Just call [centralManager connectPeripheral] on the CMPeripheral, so the phone will keep listening for the device and connect immediately when it sees it. That doesn't time out, so you can just leave it running forever.

If no app is to connect to the peripheral, there's nothing the peripheral can do to change that.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T00:35:45.160

这有点晚了，但这是我要做的事情：

*   当您的设备想要连接时，让它宣传一项特殊服务。
*   假设手机已经在扫描设备，它将看到该服务，您可以自动连接到它。
*   现在，您可以通过更新特征等来在中心上随意触发外围触发器。

当然，这依赖于您需要触发动作时的手机扫描，但这就是野兽的本性。