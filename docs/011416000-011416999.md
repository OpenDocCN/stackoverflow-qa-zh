# StackOverflow 问答 11416000-11416999

# android - 从操作系统或从 adb 启动应用程序有区别吗

> ID：11416004
> 
> 赞同：3
> 
> 时间：2012-07-10T14:50:51.963
> 
> 标签：android, android-intent

我的申请确实有一个奇怪的错误。当我直接从操作系统启动应用程序时，我的应用程序崩溃（不要介意崩溃，我大致知道原因 - 类加载器），然后通过任何任务杀手从后台杀死它（这是重现崩溃的少数方法之一一致 - >模拟操作系统释放内存并关闭应用程序）并尝试再次重新启动它。

问题是，如果我使用以下命令通过 adb shell 启动应用程序：

```
adb shell am start -a android.intent.action.MAIN -n com.my.packagename/myLaunchActivity 
```

我无法重现崩溃。

那么 Android 操作系统调用应用程序的方式与上述调用有什么不同吗？

编辑：添加清单（只是更改名称）

```
<?xml version="1.0" ?>
<manifest android:versionCode="5" android:versionName="1.05" package="com.my.sample" xmlns:android="http://schemas.android.com/apk/res/android">
<uses-sdk android:minSdkVersion="7"/>
<application android:icon="@drawable/square_my_logo" android:label="@string/app_name">
    <activity android:label="@string/app_name" android:name="com.my.InfoActivity" android:screenOrientation="landscape"></activity>

    <activity android:label="@string/app_name" android:name="com.my2.KickStart" android:screenOrientation="landscape"/>

    <activity android:label="@string/app_name" android:name="com.my2.Launcher" android:screenOrientation="landscape">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>

</application>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/></manifest> 
```

从 adb shell 启动 com.my2.Launcher

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:23:05.177

我可以看到的第一件事是，如果您从启动器图标启动应用程序，则 Intent 包含 CATEGORY “android.intent.category.LAUNCHER”，而使用`adb shell am`它则不包含。

此外，当您通过启动器图标启动时，会设置 Intent 标志`FLAG_ACTIVITY_RESET_TASK_IF_NEEDED`(0x200000)，`adb shell`如果没有设置。

不确定这是否会对您的崩溃行为产生影响，但它回答了这个问题。

# jquery - 发出重复请求的 Ajax 查询

> ID：11416015
> 
> 赞同：1
> 
> 时间：2012-07-10T14:51:36.033
> 
> 标签：jquery, ajax

```
 $('#dialog .join').click(function () {
            email = $.trim($(this).parent().find('.email').val());
            if (email != "Email Address" && email.length > 5) {
                $.ajax({
                    url:'/newsletter/join',
                    data:{ 'email':email, 'pid':$('#dialog .pid').html().trim() }
                });

                $("#dialog").dialog('destroy');
                if(link){
                $('.job .outbound').off('click');
                }

                return true;
            }
            return false;
        }); 
```

这是触发 ajax 请求的代码，在调试模式下，我看到对 servlet 的第一个请求是在

```
 $('#dialog .join').click(function () { 
```

然后它通过所有步骤最终发出第二个请求，

我仍然很困惑为什么第一个请求一进入身体就发出，

我可能有机会使用 flag 进行控制，但我正在将此实用程序用于其他形式，并且工作正常

以下是我正在使用的完整功能

```
function showDialog(link) {
$("#dialog").dialog({
    modal:true,
    height:'auto',
    width:'auto',
    resizable:false,
    closeOnEscape:false,
    dialogClass:'newsletter',
    open:function (event, ui) {

        $('#dialog .email').css("color", "#A9A9A9").val('Email Address').blur().one("focus", function () {
            $(this).val("").css("color", "black");
        });

        $('#dialog .join').click(function () {
            email = $.trim($(this).parent().find('.email').val());
            if (email != "Email Address" && email.length > 5) {
                $.ajax({
                    url:'/newsletter/join',
                    data:{ 'email':email, 'pid':$('#dialog .pid').html().trim() }
                });

                $("#dialog").dialog('destroy');
                if(link){
                $('.job .outbound').off('click');
                }

                return true;
            }
            return false;
        });
    }
}).keyup(function (e) {
        if (e.keyCode == 13) {
            return false;
        }
    }); 
```

}

# c# - PetaPoco 中同一类型的多个连接

> ID：11416019
> 
> 赞同：0
> 
> 时间：2012-07-10T14:51:49.133
> 
> 标签：c#, orm, petapoco

**问题：** 我正在尝试使用 PetaPoco 加入四个以上的表来填充一个类型为 A 的对象，其中包含五个 B 类型的成员（非常类似于这个问题：[https](https://stackoverflow.com/a/11275334/296296) ://stackoverflow.com/a/11275334/296296 ）。根据我的阅读，可以使用以下语法：

```
var result = db.Query<Investment>(new System.Type[] { typeof(Investment), typeof(Person), typeof(Person), typeof(Person), typeof(Person), typeof(Person) }, null, sql, null).FirstOrDefault(); 
```

sql在哪里：

```
 SELECT Investment.*, p1.*, p2.*, p3.*, p4.*, p5.* FROM Investment
        INNER JOIN People p1 ON Investment.OwnerID = p1.Id
        INNER JOIN People p2 ON Investment.ITOwnerID = p2.Id
        INNER JOIN People p3 ON Investment.InformationOwnerId = p3.Id
        INNER JOIN People p4 ON Investment.MaintenanceLeaderId = p4.Id
        INNER JOIN People p5 ON Investment.MaintenanceLeaderITId = p5.Id
        WHERE (Investment.Id = @0) 
```

但它只是给了我以下错误：

```
 Can't auto join Person as Investment has more than one property of type Person 
```

任何有同样问题或可以以任何方式提供帮助的人？

***背景：***

我有以下（简化的）数据库表：

```
Investment
--------------
Id
Name
OwnerId
ITOwnerId
InformationOwnerId
MaintenanceLeaderId
MaintenanceLeaderITId

People
--------------
Id
Name 
```

我想将这些数据库表映射到的类是：

```
 Public class Investment {
    public int Id 
    public string Name
    public Person Owner
    public Person ITOwner
    public Person InformationOwner
    public Person MaintenanceLeader
    public Person MaintenanceLeaderIT
 }

 Public class Person {
    public int Id 
    public string Name
 } 
```

为此，我需要为 Investment 类中的每个 Person 类型加入 People 表，并将它们作为 Person 类型的实例映射到相应的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:35:16.247

您可能这样做的唯一方法是创建自己的回调（而不是让它回退到当前正在调用的自我发现回调），您可以在其中连接 Investment 对象上的每个 Person 对象。

看看[http://www.toptensoftware.com/Articles/115/PetaPoco-Mapping-One-to-Many-and-Many-to-One-Relationships](http://www.toptensoftware.com/Articles/115/PetaPoco-Mapping-One-to-Many-and-Many-to-One-Relationships)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:12:16.707

你为什么不能这样做：

/////用于测试选择的 SQL 代码

```
DECLARE @People TABLE (Id INT,  Name VARCHAR(50))
        INSERT INTO @People (Id,Name)
            SELECT 1,' John Smith' UNION ALL
            SELECT 2,'Albert Lee' UNION ALL
            SELECT 3,'Christina Wetherbe' UNION ALL
            SELECT 4,'Alice Cany' UNION ALL
            SELECT 5,'Jim Blabery' UNION ALL
            SELECT 6,'Octaviose Mayflower' UNION ALL
            SELECT 7,'Sandra Lee M' UNION ALL
            SELECT 8,'Some test user' UNION ALL
            SELECT 9,'Some test user 2' UNION ALL
            SELECT 10,'Some test user 3' UNION ALL
            SELECT 11,'Some test user 4' 

    DECLARE @Investment TABLE (
                    Id INT,
                    Name VARCHAR(50),
                    OwnerId INT,
                    ITOwnerId  INT,
                    InformationOwnerId INT,
                    MaintenanceLeaderId INT,
                    MaintenanceLeaderITId INT
                )

    INSERT INTO @Investment(Id,Name,OwnerId,ITOwnerId,InformationOwnerId,MaintenanceLeaderId,MaintenanceLeaderITId)
    SELECT 1,'INVESTMENT 1',1,2,1,3,4 UNION ALL
    SELECT 2,'INVESTMENT 2',1,3,2,3,2 UNION ALL
    SELECT 3,'INVESTMENT 3',3,1,3,3,4 UNION ALL
    SELECT 4,'INVESTMENT 4',5,4,4,2,3 UNION ALL
    SELECT 5,'INVESTMENT 5',6,5,5,7,6 UNION ALL
    SELECT 6,'INVESTMENT 6',8,6,6,7,8 UNION ALL
    SELECT 7,'INVESTMENT 7',9,8,7,4,5 UNION ALL
    SELECT 8,'INVESTMENT 8',11,8,8,6,11 UNION ALL
    SELECT 9,'INVESTMENT 9',10,9,9,10,9

    --SELECT * FROM @People
    --SELECT * FROM @Investment

     -- THIS IS YOUR SELECT STATEMENT to be uses in PetaPoco call
    SELECT unpv.Id,unpv.Name, unpv.INVTYPE,unpv.PersonId,p.Name FROM @Investment
    UNPIVOT(PersonId for INVTYPE in    (OwnerId,ITOwnerId,InformationOwnerId,MaintenanceLeaderId,MaintenanceLeaderITId))unpv 
    join @People p on unpv.PersonId = p.Id
    order by INVTYPE, PersonId 
```

然后 C# 代码为

1 - 扩展您的投资 POCO 以增加 2 列，INVTYPE 和 PersonId。只需在相同的命名空间中创建新对象。像这样：

```
 public partial class Investment
    {
        [ResultColumn]
        public string INVTYPE { set; get; }
        [ResultColumn]
        public int PersonId { set; get; }
    } 
```

2 - 创建视图类 InvestmentView （您可以使用您的投资类，只需重命名它）

```
 var myInvestmentView = new InvestmentView
                            {
                              Id = result.Id,
                              Name = result.Name,
                              Owner = new Person{ Id = result.firstOrDefault(o => o.INVTYPE.Equals("OwnerId")).PersonId, Name =  result.firstOrDefault(o=> o.INVTYPE.Equals("OwnerId")).PersonName},
                              ITOwner  = new Person{ Id = result.firstOrDefault(o => o.INVTYPE.Equals("ITOwnerId")).PersonId, Name =  result.firstOrDefault(o=> o.INVTYPE.Equals("ITOwnerId")).PersonName},
                              InformationOwner  = new Person{ Id = result.firstOrDefault(o => o.INVTYPE.Equals("InformationOwnerId")).PersonId, Name =  result.firstOrDefault(o=> o.INVTYPE.Equals("InformationOwnerId")).PersonName},
                              MaintenanceLeader = new Person{ Id = result.firstOrDefault(o => o.INVTYPE.Equals("MaintenanceLeaderId")).PersonId, Name =  result.firstOrDefault(o=> o.INVTYPE.Equals("MaintenanceLeaderId")).PersonName},
                              MaintenanceLeaderIT = new Person{ Id = result.firstOrDefault(o => o.INVTYPE.Equals("MaintenanceLeaderITId")).PersonId, Name =  result.firstOrDefault(o=> o.INVTYPE.Equals("MaintenanceLeaderITId")).PersonName}
                            } 
```

3 - 使用返回列表中的数据填充类

```
 using (var data = new Database(Config.MainDbConnectionName))
    {
       var result = data.Fetch<Investment,People>(
                        Sql.Builder
                           .Append("SELECT unpv.Id,unpv.Name, unpv.INVTYPE,unpv.PersonId,p.name as PersonName FROM Investment")
                           .Append(" UNPIVOT(PersonId for INVTYPE in    (OwnerId,ITOwnerId,InformationOwnerId,MaintenanceLeaderId,MaintenanceLeaderITId)) unpv")
                           .Append(" JOIN People p on unpv.PersonId = p.Id")
                           .Append(" WHERE (Investment.Id = @0)",InvId)
                           .Append(" ORDER BY INVTYPE, PersonId")
                    );
    } 
```

这样，唯一需要特殊处理的类将是 Investment 类，因为您需要将数据从 InvestmentView 向后处理到 POCO 的平面结构中。

# python - 安装 python-snappy 时出错：snappy-ch：没有这样的文件或目录

> ID：11416024
> 
> 赞同：57
> 
> 时间：2012-07-10T14:52:07.627
> 
> 标签：python, gcc

我正在使用亚马逊 ec2 ubuntu 11.04 服务器

```
 sudo pip install python-snappy 
```

我也尝试下载包并输入“sudo python setup.py install”

我得到了错误：

```
 running build
  running build_ext
  building 'snappy' extension
  gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c snappymodule.cc -o build/temp.linux-x86_64-2.7/snappymodule.o
  cc1plus: warning: command line option ‘-Wstrict-prototypes’ is valid for Ada/C/ObjC but not for C++ [enabled by default]
  snappymodule.cc:31:22: fatal error: snappy-c.h: No such file or directory
  compilation terminated.
  error: command 'gcc' failed with exit status 1 
```

我怎样才能摆脱这个错误？

来源：[https ://github.com/andrix/python-snappy](https://github.com/andrix/python-snappy)

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2013-12-19T09:45:38.493

您可以使用以下命令安装 Snappy C 库：

**基于 DEB：** `sudo apt-get install libsnappy-dev`

**基于 RPM：** `sudo yum install libsnappy-devel`

**酿造：** `brew install snappy`

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2017-01-17T22:01:58.480

根据[回购](https://github.com/andrix/python-snappy)

**如何在 Mac OS X 上安装它？**

有几次报告（问题 #7 和 #23）无法在 Mac 中正确安装库。程序应该是，

```
$ brew install snappy # snappy library from Google 
$ CPPFLAGS="-I/usr/local/include -L/usr/local/lib" pip install python-snappy 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-07-10T15:33:27.433

你需要 Snappy C[库](http://google.github.io/snappy/)

然后你必须安装 python-snappy 包装器。

看来您没有安装 Snappy-C 库

试试吧..因为已经有一个人对你的帖子发表了评论

> 更新：请参阅下面更受好评的帖子，其中包括在基于 DEB、基于 RPM 和 Mac OS (Brew) 上的安装说明。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-15T10:05:35.910

1.  您可以在此处下载 snappy lib：[https ://code.google.com/p/snappy/](https://code.google.com/p/snappy/)
2.  提取它
3.  通过命令行安装如下： $: ./configure $: make $: make install
4.  安装 python-snappy: $: pip install python-snappy

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-10-24T09:59:32.207

我在安装时遇到了一些麻烦。[最后下载了https://www.lfd.uci.edu/~gohlke/pythonlibs/](https://www.lfd.uci.edu/~gohlke/pythonlibs/)提供的预构建内容，一切顺利。（用于 Python 扩展包的非官方 Windows 二进制文件）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-02-27T13:52:25.470

对于带有 Python 3.X 的 Oracle Linux：

您需要启用 optional_latest 存储库作为第一步，

1.  用于启用以下 repo

    `$ yum-config-manager --enable ol7_optional_latest`

    “ol7_optional_latest” repo 将启用 yum 查找。

2.  然后使用安装软件包，

    `$ yum -y install gcc gcc-c++ snappy snappy-devel`

3.  然后用 pip 安装 python-snappy 包，

    `$ pip3 install python-snappy`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-07-27T22:19:23.017

在 El Capitan 上安装时遇到很多问题，错误提示找不到 snappy-ch 文件。

[必须从 tar.gz 文件https://github.com/google/snappy/releases/download/1.1.3/snappy-1.1.3.tar.gz](https://github.com/google/snappy/releases/download/1.1.3/snappy-1.1.3.tar.gz)安装 snappy

解压并运行

```
./configure
make
make install 
```

它会将头文件放入 `/usr/local/include`

然后需要为cc编译器设置FLAGS来查找头文件：

```
export DYLD_LIBRARY_PATH=/usr/local/include
export CPPFLAGS="-I/usr/local/include/snappy-c.h"
export CFLAGS="-I/usr/local/include/snappy-c.h"
export CXXFLAGS="-I/usr/local/include/snappy-c.h"
export LDFLAGS="-L/usr/local/lib" 
```

然后我从 egg 文件 [https://pypi.python.org/packages/b1/fe/1d632cdac5dbb5ce84db778af7f733eb469130d8cf4c02f6cd9057a96768/snappy-2.4.1-py2.7-macosx-10.5-intel.egg#md15466fbfebfe373安装了python-snappy](https://pypi.python.org/packages/b1/fe/1d632cdac5dbb5ce84db778af7f733eb469130d8cf4c02f6cd9057a96768/snappy-2.4.1-py2.7-macosx-10.5-intel.egg#md5=b76558c71f1d97feeb8402c345e466bf)

你可以试试，`pip install python-snappy` 但它最初找不到头文件，所以我去找了鸡蛋文件

安装鸡蛋：

```
easy_install <eggfile>
python setup.py build
python setup.py install 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-09-20T07:21:37.080

您需要检查输出

```
rpm -q snappy-devel 
```

如果它不存在，则使用以下命令安装它：

```
yum install snappy-devel 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-03-03T01:36:01.057

如果你在**Mac OS X Catalina**上，你可以安装

```
brew install snappy
CPPFLAGS="-I/usr/local/include -L/usr/local/lib -stdlib=libc++ " pip install python-snappy 
```

正如[https://github.com/andrix/python-snappy](https://github.com/andrix/python-snappy)所建议的那样

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-12-07T08:48:57.610

修复 macOS M1。您必须定义 lib 的绝对路径并包含 snappy。

```
brew install snappy
pip install \                               
  --upgrade --ignore-installed \
  python-snappy==0.5.4 \
  --global-option=build_ext \
  --global-option="-I/opt/homebrew/Cellar/snappy/1.1.9/include" \
  --global-option="-L/opt/homebrew/Cellar/snappy/1.1.9/lib" 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-12-27T09:20:08.563

这解决了我的问题：

```
yum install gcc-c++ 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-09-09T01:18:18.740

我在这方面遇到了一段时间的麻烦。仅供参考，我正在尝试安装 Crossbar（[https://crossbar.io/docs/Installation-on-Linux/](https://crossbar.io/docs/Installation-on-Linux/)）

我做了一堆谷歌搜索并搞砸了很多。我正在使用 Python 3.7.4，我认为解决我的问题的是：

`sudo yum install python-devel`

如果那不起作用，请尝试

`sudo yum install python3-devel`

来源：

[https://github.com/giampaolo/psutil/issues/1143#issuecomment-475354786](https://github.com/giampaolo/psutil/issues/1143#issuecomment-475354786)

[https://github.com/giampaolo/psutil/issues/1143](https://github.com/giampaolo/psutil/issues/1143)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-06-06T21:45:58.527

**要在安装了 MacPorts 的 Mac OS X**中解决此问题，您可以执行以下操作：

```
$ sudo port install snappy
$ CPPFLAGS="-I/opt/local/include -L/opt/local/lib" pip install python-snappy 
```

# c++ - 如何在 OpenCV 中将图像蒙版部分中的所有内容“归零”

> ID：11416032
> 
> 赞同：13
> 
> 时间：2012-07-10T14:52:37.457
> 
> 标签：c++, opencv, mask

如果我有一个图像（IplImage 8 位）和一个二进制掩码（这也是一个相同大小的 8 位 IplImage，其中每个像素的值都是 0 或 255），我怎样才能使每个像素在与掩码中值为 0 的像素对应的图像的值为零，并且图像中与掩码中具有任何其他值（即 255）的像素对应的每个像素都具有与原始值相同的值图片？

换句话说，“在遮罩区域内”的任何东西都将保持其原始值，而遮罩区域之外的任何东西都将变为零。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-30T17:36:40.810

最简单的方法，使用“Mat img”（要屏蔽的图像，输入）和“Mat masked”（屏蔽的图像，输出）：

```
 img.copyTo(masked, mask) 
```

其中“Mat mask”是一个不一定是二进制的矩阵（copyTo 考虑具有零值的元素）。蒙面可以是任何大小和类型；如果需要，它会重新分配。

请参阅[文档](http://docs.opencv.org/modules/core/doc/basic_structures.html?highlight=copyto#void%20Mat::copyTo%28OutputArray%20m%29%20const)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-10T14:55:30.490

您可以简单地使用`bitwise_and()`函数。

[检查文档。](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html?highlight=bitwise_and#bitwise-and)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-10T14:56:19.693

与图像相乘或位和掩码。有一些 OpenCV 函数，但我不知道它们的 C 接口名称。

在 C++ 中：

```
Mat image, mask;

image = image * mask;
// or 
image = image & mask; 
```

# javascript - JQuery Mobile Append 新按钮的行为不符合预期

> ID：11416034
> 
> 赞同：1
> 
> 时间：2012-07-10T14:52:43.953
> 
> 标签：javascript, jquery, jquery-mobile

> **可能重复：**
> [jQuery Mobile 在动态添加内容后不应用样式](https://stackoverflow.com/questions/7999436/jquery-mobile-does-not-apply-styles-after-dynamically-adding-content)

我想知道我是否在这里遗漏了什么......

如果我写

```
<a onclick="deleteThis()" data-role="button" data-theme="a">Button text</a> 
```

在 HTML 页面的正文中，它可以正常工作。但是当我以编程方式尝试使用以下命令添加新按钮时：

```
$('.block').append('<a onclick="deleteThis()" data-role="button" data-theme="a">' + results[i].Title + '</a>'); 
```

该链接被很好地附加，只是没有 JQuery 移动样式， data-theme="a" 应该将特定的颜色样本 css 应用于相关元素。

我哪里错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T15:24:05.727

```
 $('.block').append(' <a onclick="deleteThis()" data-role="button" data-theme="a"> Text</a>').trigger( "create" ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:01:40.980

您可以使用`.buttonMarkup()`jQuery Mobile 提供的方法。此方法还允许您传递一些可选参数。

以下是该`.buttonMarkup()`方法的文档：http: [//jquerymobile.com/demos/1.1.0/docs/buttons/buttons-options.html](http://jquerymobile.com/demos/1.1.0/docs/buttons/buttons-options.html)

以下是使用此方法创建按钮的示例：

```
$('<a href="#" />').text('New Button').buttonMarkup({
    theme  : 'a',
    icon   : 'star',
    mini   : false,
    inline : false
});
//these are just a few of the options 
```

这是一个演示：http: [//jsfiddle.net/jasper/6BF6M/](http://jsfiddle.net/jasper/6BF6M/)

另外，我是否建议使用 jQuery 来进行事件绑定，例如：

```
$('.block').append(
    $('<a href="#" />').text('New Button').buttonMarkup().bind('click', deleteThis)
); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-10T15:06:36.870

尝试为页面触发刷新事件：

```
$('#pageId').trigger('pagecreate'); 
```

如果是列表视图：

```
$('#listId').listview('refresh'); 
```

# performance - 高效存储和评估大量布尔表达式

> ID：11416037
> 
> 赞同：3
> 
> 时间：2012-07-10T14:52:54.153
> 
> 标签：performance, algorithm, data-structures, boolean, scalability

我有一大堆（20000）布尔表达式。它们由`AND`,`OR`和`NOT`运算符以及大量的布尔变量`A1`, `A2`, `A3`... 组成（大约 1000 个）。大多数表达式只包含 5 个，也许是 20 个这些变量。

给定变量 ( `A1 = true, A2 = false, A3 = false ...`) 的赋值，我必须找到计算结果为 的那些表达式`false`。

将针对多个 (10-100) 分配评估同一组表达式

以此目的：

1.  我应该如何将表达式存储在磁盘上，以便我可以快速加载和解析它们（我目前将它们作为一些专门的 DSL 或作为或多或少标准化（并且非常慢）的关系数据结构，但我可以改变它）

2.  是否有一种快速算法/数据结构来评估我可以使用的此类表达式？

3.  JVM 上的实现是否存在？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T15:33:29.743

您可能需要考虑将表达式转换为[连接范式](http://en.wikipedia.org/wiki/Conjunctive_normal_form)并组合类似的术语。然后，您可以将表达式双向映射到一组术语，其中任何一个评估为 false 都意味着整个表达式评估为 false。对于变量的每个分配，从一组表达式开始，评估 CNF 项，直到一个评估为假。如果该术语为假，则涉及该术语的所有表达式也将为假，因此这些表达式也可以从集合中删除。

如果不查看表达式，就不能说这种方法是否适合您的情况 - 对于 1000 个变量和 20000 个表达式，它们可能没有许多共同的 CNF 术语。

在 Java 之外，对于大量的表达式，DNF 可能更有用，因为它在 GPU 上的实现是显而易见的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T15:00:14.477

对此的 SOP 答案是将表达式存储为 RPN（反向波兰表示法）中的字符串，然后编写一个简单的 Stack Machine 解析器来评估它们。

通常，RPN 字符串的评估速度几乎与内存中的 AST（抽象符号树）一样快。而且堆栈机器解析器非常容易编写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T20:54:08.567

您可以建立一个索引，在其中为每个变量记录两组表达式，变量出现正数的表达式和负数出现的变量。根据变量的值，您收集那些可能由于该变量而变为假的表达式（如果变量设置为假则为正，反之亦然）。**编辑：**这些只是候选人，你仍然需要评估他们，看看他们是否真的变成了假的。

与仅评估所有表达式相比，这是否有帮助取决于表达式的结构以及有多少评估为假。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-11T09:12:58.140

尝试将它们转换为 CNF 并使用 MiniSat 检查表达式的计算结果是真还是假

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T16:09:28.820

更新：以下站点的[代码](http://rosettacode.org/wiki/Truth_table "代码")可能会有所帮助。

将表达式列表转换为函数的源代码，当使用变量值调用该函数时，将评估所有函数并返回指示哪些表达式评估为假。编译该函数，然后为您的不同变量值调用它。

我做过类似的事情并使用了 Python。我必须编写的唯一解析和解释是将输入的布尔运算符“&”、“|”、“~”翻译成它们的 Python 等价物。

对于 Python 解决方案，您的问题大小似乎相当不错。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T15:47:03.550

您似乎很喜欢 Java，但您是否考虑过将这些东西提供给具有 eval() 函数的语言？它可能会减少将表达式保存在文件中并对其进行评估的问题。请注意，如果您不信任表达式的（来源），这会产生安全隐患！

Jython 浮现在脑海中，但可能有几个可以很短的完成这个工作。

如果你嫁给了java，你可能会为布尔代数实现一个递归下降解析器。但这涉及更多。

# .net - 如何在文件末尾仅使用 BinaryWriter 附加数据？

> ID：11416038
> 
> 赞同：1
> 
> 时间：2012-07-10T14:52:54.373
> 
> 标签：.net, append, delphi-prism, binaryreader, binarywriter

也许在 Stackoverflow 中提出了类似的问题，但我似乎无法找到解决问题的方法。

我只是想打开一个可写的二进制流，并能够使用相同的流将数据附加到文件中。显然，如果您打开一个文件进行写入，它将删除其中包含的所有数据并开始一个新数据。另外，如果你打开一个文件只是为了阅读，你不能写，只能读。人们确实在网上建议使用两个单独的流——一个用于阅读，另一个用于写作。我认为这在这种情况下行不通。

看看我的示例代码，我想做类似的事情：

```
fs:BinaryWriter;

fs := new BinaryWriter(File.Create('c:\test.dat'));

fs.seek(0,SeekOrigin.End);

fs.Write('test string');

fs.Close; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T14:56:37.447

如果你这样打开作家

```
Stream fs = new FileStream(filename, FileMode.Append);
BinaryWriter bw = new BinaryWriter(fs); 
```

它应该以附加模式打开。

# windows - 部署期间环境变量未更新

> ID：11416040
> 
> 赞同：4
> 
> 时间：2012-07-10T14:53:13.007
> 
> 标签：windows, deployment, batch-file, nolio

**我们在做什么：**

我们正在使用名为 Nolio 的工具进行自动化部署。我们需要做的步骤之一是为正在部署的应用程序设置一些环境变量——例如，`JAVA_HOME`指向我们首选的 java 安装目录。

我们正在使用该`SET`命令来永久设置环境变量 - 在大多数情况下，它都非常有效。如果我右键单击我的计算机并进入环境变量，它们都会完美显示。

**问题：**

不幸的是，在部署的后期，执行了一些依赖环境变量的命令行命令，并且环境变量似乎没有设置。不带参数使用`SET`通过显示所有当前可用的变量来验证这一点。

现在，如果我重新启动计算机，命令行命令可以正常工作。因此，问题在于，虽然变量是永久设置的并且确实出现在 GUI 中，但在我重新启动之前它们不会传播到命令提示符。

***另一个有趣的花絮：***如果我将命令放在一个 BAT 文件中并双击它，它运行良好，但如果我在命令提示符下执行它，变量在重新启动之前不会解析。

有谁知道解决这个问题的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T15:18:22.893

首先，您使用的是什么版本的 Nolio？

您设置值的环境变量在一个 Nolio 操作的上下文中保持在此操作的范围内。（这就像在每个动作上打开两个不同的外壳）

这种情况下的最佳实践是在 Nolio“运行命令行”操作中使用环境变量数组输入。您应该编写两个并行环境变量名称和值的数组，并将它们作为“运行命令行”操作的输入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T14:58:21.220

您的变量似乎不在命令提示符的范围内。您在部署过程中的哪个阶段使用该`SET`命令？有趣的是 GUI 可以识别这些值，但命令提示符直到您重新启动后才会识别。

另外，我不清楚为什么不希望使用 .bat 文件。我可以提出自己的理由，但你的理由是什么？

**编辑**

我发现[这篇](http://www2.hawaii.edu/~sdunan/study_guides/ics211/WindowsCommandLineCompiling.html)文章显示了你没有提到的一个步骤。你有没有尝试过：

```
rem Set the JAVA_HOME environment variable and insert it into the system path.
rem This will make the javac and java commands reachable from the command line.
set JAVA_HOME="C:\Program Files\Java\jdk1.5.0_14"
set PATH=%JAVA_HOME%\bin;%PATH% 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T15:02:42.277

我不完全确定为什么命令提示符不能识别命令而批处理文件会，但您可以使用[`SETX`](http://ss64.com/nt/setx.html)它`SET`来查看是否可以解决您的问题。

# javascript - Node.js - 该函数不从表中选择返回数据

> ID：11416045
> 
> 赞同：0
> 
> 时间：2012-07-10T14:53:18.450
> 
> 标签：javascript, node.js

我想从数据库中检索唯一 id 并将它们存储到对象 ( `userslist`) 中。

为什么我不能将数据检索到对象中？对象`userslist`为空{}

我在 Node.js 中有这个功能：

```
getOnlineUsers: function()
    {
        var userslist = {};

        client.query(
            'SELECT DISTINCT Aid FROM online',
            function selectCb(err, results, fields) {
                if (err) {
                    throw err;
                }

                if (results.length > 0) {

                    for (var i = 0; i < results.length; i++) {
                        var reader = results[i];                        
                        userslist[reader['Aid']] = {
                            fbid: reader['Aid']
                        }
                    }       
                }
            }
            );
        return userslist; 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:33:48.260

这是上面评论中讨论的一个例子。

将回调传递给`getOnlineUsers`...

```
my_obj.getOnlineUsers(function(u_list) {

    /* do something with the user list */

}); 
```

并`getOnlineUsers`收到回调参数，并调用它......

```
// receive the callback----v
getOnlineUsers: function(cb_func) {

    client.query(
        'SELECT DISTINCT Aid FROM online',
         function selectCb(err, results, fields) {
            if (err) {
                throw err;
            }

            var userslist = {}

            if (results.length > 0) {

                for (var i = 0; i < results.length; i++) {
                    var reader = results[i];                        
                    userslist[reader['Aid']] = {
                        fbid: reader['Aid']
                    }
                }       
            }
            cb_func(userslist); // <-- invoke the callback, passing the data
        });
} 
```

这是一种方法，但基本上说明了代码流的延续需要在传递给`client.query`.

# php - 这是PHP中的错误吗？

> ID：11416046
> 
> 赞同：2
> 
> 时间：2012-07-10T14:53:18.663
> 
> 标签：php

> **可能重复：**
> [php 数组在键值 07 和 08 上表现异常](https://stackoverflow.com/questions/4750781/php-array-behaving-strangely-with-key-value-07-08)

我在 PHP 中发现了一些奇怪的东西，如果我使用数字数组，第 8 个数组会被忽略，在这里，当我将“Cherry”放入 $fruit[08] 时，php 接缝会越过它。

这是怎么回事 ？这是一个错误还是其他什么。

```
<pre>
<?php

$fruit[01] = "Apples";
$fruit[02] = "Pears";
$fruit[03] = "Bananas";
$fruit[04] = "Grape";
$fruit[05] = "Orange";
$fruit[06] = "Peach";
$fruit[07] = "Lemon";
$fruit[08] = "Cherry";
$fruit[09] = "Mango";

print_r($fruit);

?>
</pre> 
```

输出：

```
Array
(
    [1] => Apples
    [2] => Pears
    [3] => Bananas
    [4] => Grape
    [5] => Orange
    [6] => Peach
    [7] => Lemon
    [0] => Mango
) 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-10T14:55:08.040

由于前导零，您的索引被视为八进制数。

`08`并且`09`都将被评估为零，因此您的最后一个条目（“Mango”）以数组索引 0 结束。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-10T14:55:30.067

`08`被视为八进制。

不要使用前导零。

就此而言，不要使用显式索引来创建数组：

```
$fruit = array(
           "Apples",
           "Pears",
           etc
         ); 
```

（或 PHP 5.4 及更新版本）：

```
$fruit = [
           "Apples",
           "Pears",
           etc
         ]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T15:00:32.497

因为您输入的是 08 而不是 8 PHP 认为您在谈论一个不存在的值。八进制数从 00 到 07。要让 PHP 处理您的值，请键入：

```
<pre>
<?php

$fruit[] = "Apples";
$fruit[] = "Pears";
$fruit[] = "Bananas";
$fruit[] = "Grape";
$fruit[] = "Orange";
$fruit[] = "Peach";
$fruit[] = "Lemon";
$fruit[] = "Cherry";
$fruit[] = "Mango";

print_r($fruit);

?>
</pre> 
```

简而言之，它不是一个错误，但如果你没有预料到它，它就是那些会让你失望的东西之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T14:59:15.633

由于前导 '0'，PHP 将您的数组索引视为八进制而不是十进制数字。删除这些，一切都应该正常工作！

此外，您可能很清楚这一点，但万一您不知道，数组索引从 0 开始，而不是 1。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T15:00:23.017

这是因为您使用的是 01、02、03 等（前导零）。对于 PHP，这些是八进制数。八进制数的范围是 0-7（所以 08 和 09 实际上是非法数字）。

切掉前导零，一切都很好；）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T14:55:48.007

您正在为数组索引使用八进制表示法。09 和 09 是无效的八进制数（十进制的 8 是八进制的 010，十进制的 9 是八进制的 011）。无效数字被评估为 0，因此“Cherry”将被“Mango”覆盖。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-10T14:55:48.987

数值数组不需要前导零。如果这给您带来了问题，请从索引中删除所有前导零。`$array[]`此外，您可以使用而不是实际给出索引将元素附加到数组。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-10T14:55:53.350

当整数以零开头时，PHP 将整数视为八进制而不是小数。尝试使用适当的索引，例如 1、2、3 而不是 01、02、03。

顺便说一句，在 PHP 数组中从 0 开始。

# jquery - Fancybox (v1.3.1) showActivity() 在 Chrome/Safari 中显示不一致

> ID：11416051
> 
> 赞同：0
> 
> 时间：2012-07-10T14:53:34.863
> 
> 标签：jquery, google-chrome, safari, webkit, fancybox

我正在对fancybox 使用以下调用： $.fancybox.showActivity(); 显示加载动画。它适用于 Firefox 和 IE。然而，Chrome 和 Safari 非常不一致。因此，为了测试调用是否有问题，我创建了一个按钮并通过 JS 函数附加调用。当我单击按钮（以验证呼叫本身是否有效）然后按下实际上是我正在对其进行编码的按钮时，它就会起作用。但是，如果我不按（验证测试）按钮，而只按实际代码按钮，则它不会显示。我也可以在调试器中看到 div。这种不一致的功能有什么原因吗？

代码片段：

验证测试按钮：

```
<button type="button" onclick="checkFancybox();">Check Fancybox</button>            
<script>
function checkFancybox(){
$.fancybox.showActivity();
alert("Fancybox call completed.");
}
</script> 
```

实际编码按钮：

```
<form id="video-upload-form" action="{url}?nexturl={nextUrl}" 
      method="post" enctype="multipart/form-data" >
<input name="file" type="file"/>
<input name="token" type="hidden" value=""/>
<input value="Upload Video File" type="button" name="submitVideoUpload" 
       onClick="checkFile()" class="button" />
</form>
<script> 
 function checkFile(){
    //RegEx for valid file name and extensions.
    var fileVal = document.forms["video-upload-form"].elements['file'].value;

    if(fileVal != ""){
      //notify user of activity
      $.fancybox.showActivity();
      document.getElementById('vintro-upload-form').submit();
    }else{alert('Please select the Video file.');}
 }
</script> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:57:35.337

只是为了正确......如果你在 HTML 中挂钩 js 函数，你最好使用

```
<input value="Upload Video File" type="button" name="submitVideoUpload" 
   onClick="javascript:checkFile();" class="button" /> 
```

“javascript:;” 很重要。这样您就可以确定它可以在 x-browser 上运行。

除此之外，您可能想以这种方式尝试：

```
<input id="mybutton" value="Upload Video File" type="button" name="submitVideoUpload" class="button" />
<script>
// Once the DOM is ready
$(function(){
    // bind your function
    $("#mybutton").click(function(){ checkFile(); });
});

// define your function
function checkFile(){
    //RegEx for valid file name and extensions.
    var fileVal = document.forms["video-upload-form"].elements['file'].value;

    if(fileVal != ""){
        //notify user of activity
        $.fancybox.showActivity();
        document.getElementById('vintro-upload-form').submit();
    }
    else { alert('Please select the Video file.'); }
}
</script> 
```

在 DOM 加载后绑定点击处理程序。这样，当处理程序实际找到要挂钩的 HTML 时，它就可以被挂钩。

# c++ - 如何在没有 .resize() 的情况下为 std::vector 提供有效的 .begin() 和 .end()？

> ID：11416054
> 
> 赞同：0
> 
> 时间：2012-07-10T14:54:01.277
> 
> 标签：c++, stl

我想为我的向量使用工厂函数，并且还使用迭代器而不调用调整大小，这会破坏我以前的值？

有可能还是我在 STL 设计中遗漏了一点？

```
#include <vector>
#include <algorithm>
#include <iostream>

struct A
{
    A():_x(42){}
    A(double x):_x(x){}
    double _x;
};

struct factory
{
    A operator()()
    {
        return A(3.14);
    }
};

int main()
{
    std::vector<A> v;
    int nbr = 3;
    v.reserve(nbr);
    std::generate_n(v.begin(), nbr, factory());

    std::cout << "Good values" << std::endl;
    for(int i = 0 ; i < nbr ; ++i)
        std::cout << v[i]._x << std::endl;

    v.resize(nbr); //How I can have the syntax below without the resize which blows my previous values ?

    std::cout << "resize has been called so values are bad (i.e default ctor)" << std::endl;
    for(std::vector<A>::iterator it = v.begin() ; it != v.end() ; ++it)
        std::cout << (*it)._x << std::endl;
} 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T14:59:07.740

要么我不太明白你的担心，要么你被误导了。`resize()`不会修改容器中的任何现有元素（如果您将大小调整为较小的尺寸，则移除的元素除外）。

现在，您的实际问题是您的程序中有未定义的行为。向量有`capacity() == nbr`but`size() == 0`当你调用时`generate_n`，它写在容器的末尾之外。有两种解决方案，首先您可以在调用*之前*`generate_n`调整大小：

```
std::vector<A> v;
int nbr = 3;
v.resize(nbr);
std::generate_n(v.begin(), nbr, factory()); 
```

或者你可以改变迭代器的类型：

```
std::vector<A> v;
int nbr = 3;
v.reserve(nbr);
std::generate_n(std::back_inserter(v), nbr, factory()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:00:12.917

您的代码的第一部分已经损坏。为了创建向量元素，您必须调用`resize`，而不是`reserve`. `reserve`只能通过分配原始内存来保留未来的向量容量，但它不会创建（构造）真正的向量元素。通常不允许您访问位于向量大小和向量容量之间的向量元素。

你打电话`reserve`，然后你试图使用你的向量，就好像元素已经被构造了一样：你给它们赋值，然后你尝试读取和打印这些值。在一般情况下这是非法的，它通常会导致未定义的行为。同时，你的向量的大小保持不变`0`，这是你试图通过`resize`稍后的奇怪调用来补偿的。

你需要`resize`在一开始就打电话。从一开始就创建一个具有适当数量元素的向量。（这也可以通过将初始大小传递给向量的构造函数来完成）。

例如，只是做

```
int nbr = 3;
std::vector<A> v(nbr);
std::generate_n(v.begin(), nbr, factory()); 
```

或者

```
std::vector<A> v;
int nbr = 3;
v.resize(nbr);
std::generate_n(v.begin(), nbr, factory()); 
```

你就完成了。忘了`reserve`- 在这种情况下你不需要它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:57:38.367

```
v.reserve(nbr);
std::generate_n(v.begin(), nbr, factory()); 
```

是错误。Reserve != resize，reserve 仅在需要时分配内存。为什么你使用调整大小来打印矢量？调整大小是调整向量大小的函数，开始/结束不依赖于调整大小......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T14:58:33.987

您`generate_n`没有正确地将值生成到向量中。向量的大小为 0，因此虽然它看起来可以正常工作，但在超出向量末尾的情况下，您只是运气好。你确实需要使用`resize`或类似的。或者（并且可能更高效）您可以使用`back_inserter`：`std::generate_n(std::back_inserter(v), nbr, factory());`

# javascript - 访问 jquery each() 迭代器函数中的 JS 对象

> ID：11416055
> 
> 赞同：1
> 
> 时间：2012-07-10T14:54:02.413
> 
> 标签：javascript, jquery, javascript-objects

```
$('input.ISSelectSearch').each(function(i) {
    var box = new Object;
    box.size = 80;
    box.width = 110;
    //CODE CODE CODE
}); 
```

如何访问`box`在上一次迭代中设置的值？或者，是否可以通过某种密钥访问它？

```
$('input.ISSelectSearch').each(function(i) {
    var box = new Object;
    box.size = 80;
    box.width = 110;
    prevsize = $(this).box[/* previous iteration element id or name */].size
    //CODE CODE CODE
}); 
```

问题是我需要知道与每个`'input.ISSelectSearch'`元素框关联的数据，以便我可以根据当前或前面的框对象的值来更改它们。换句话说，我需要元素框对象之间的连接，以便我可以根据另一个对象的值指定其中的某些更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T14:56:54.237

你可以做这样的事情

```
var pre = null;
$('input.ISSelectSearch').each(function(i) {
    var box = new Object;
    box.size = 80;
    box.width = 110;
    //condition so that first time it dosent shows an error
    if(pre!=null){
     //CODE

    }
    pre = this;
    //CODE CODE CODE
}); 
```

评论后编辑：-
可能您想使用 $.data() 方法
，这是您可以将数据与元素相关联，
因此您可以在循环内执行

```
$('input.ISSelectSearch').each(function(i) {
    var box = new Object;
    box.size = 80;
    box.width = 110;
    $('input.ISSelectSearch').data(i,box);
    //and now you can retrive the data whenevr you want
    var olderObject = $('input.ISSelectSearch').data(SOME_OLDER_INDEX)
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:48:38.703

如果你愿意，你可以用 index 来做

```
var $This = $('input.ISSelectSearch');
$This.each(function (index, value) {
  var Pre;
  var box = { size: 80, width: 110 };
  if (index > 0) {
    Pre = $This[index - 1];
    //Your code hear
  } else {
    //otherwise
  }
}); 
```

# facebook - 移动设备上的 facebook iframe 应用

> ID：11416064
> 
> 赞同：1
> 
> 时间：2012-07-10T14:54:26.410
> 
> 标签：facebook, mobile, iframe

之前关于这个主题的所有帖子似乎都有一年的历史了，所以我希望有新的建议或方向。

大约 12 到 18 个月前，我们将所有选项卡更改为 facebook 的 iframe 应用程序，但随着移动用户数量的增加，我们需要另一种选择： [https](https://www.facebook.com/gooseberrypatch/app_250295645026932) ://www.facebook.com/gooseberrypatch/app_250295645026932 。是否有用户或顾问可以指导我们重新创建此应用程序以供计算机和移动 facebook 使用？

# java - 使用 JAVA 通过套接字传输文件

> ID：11416065
> 
> 赞同：-1
> 
> 时间：2012-07-10T14:54:28.710
> 
> 标签：java, sockets, tcp, client, file-transfer

我在 java 中搜索用于通过套接字发送多个文件的代码，我发现这段代码由一个 TX 主、一个 RX 主和一个用于我假设的所有脏工作的类组成。代码运行没有错误，但我有一个问题要问专家，

用户在代码中的确切位置键入他/她想要发送到服务器的文件？在服务器主服务器中，服务器存储接收到的文件的位置是什么，名称是什么？

在这段代码（TX / RX / ByteStream）中的确切位置，我应该修改以指定要输入的文件吗？

我想自己在客户端 (TX) 端输入文件名，然后我将包括一个 JFileChooser 供用户以图形方式选择要发送的文件。

```
package file_rx;

import java.io.*;
import java.net.*;

public class File_RX implements Runnable 
{
    private static final int port = 4711;
    private Socket socket;

    public static void main(String[] _) 
    {
        try
        {
            ServerSocket listener = new ServerSocket(port);

            while (true)
            {
                File_RX file_rec = new File_RX();
                file_rec.socket = listener.accept();

                new Thread(file_rec).start();
            }
        }
        catch (java.lang.Exception e)
        {
            e.printStackTrace(System.out);
        }
    }

    public void run()
    {
        try
        {
            InputStream in = socket.getInputStream();
            int nof_files = ByteStream.toInt(in);

            for (int cur_file = 0; cur_file < nof_files; cur_file++)
            {
                String file_name = ByteStream.toString(in);
                File file = new File(file_name);
                ByteStream.toFile(in, file);
            }
        }
        catch (java.lang.Exception e)
        {
            e.printStackTrace(System.out);
        }
    }
}

package file_tx;

import java.io.*;
import java.net.*;

public class File_TX 
{
    private static final int    port = 4711;
    private static final String host = "localhost";

    public static void main(String[] args) 
    {
       try
       {
           Socket socket = new Socket(host, port);
           OutputStream os = socket.getOutputStream();

           int cnt_files = args.length;
           ByteStream.toStream(os, cnt_files);

           for (int cur_file = 0; cur_file < cnt_files; cur_file++)
           {
               ByteStream.toStream(os, args[cur_file]);
               ByteStream.toStream(os, new File(args[cur_file]));
           }
       }
       catch (Exception e)
       {
           e.printStackTrace();
       }
    }
}

package file_rx;

import java.io.*;

public class ByteStream 
{
    private static byte[] toByteArray(int in_int)
    {
        byte a[] = new byte[4];
        for (int i = 0; i < 4; i++)
        {
            int b_int = (in_int >> (i*8)) & 255;
            byte b = (byte) (b_int);
            a[i] = b;
        }
        return a;
    }

    private static int toInt(byte[] byte_array_4)
    {
        int ret = 0;
        for (int i = 0; i < 4; i++)
        {
            int b = (int) byte_array_4[i];
            if (i < 3 && b < 0)
            {
                b = 256 + b;
            }
            ret += b << (i * 8);
        }
        return ret;
    }

    public static int toInt(InputStream in) throws java.io.IOException
    {
        byte[] byte_array_4 = new byte[4];

        byte_array_4[0] = (byte)in.read();
        byte_array_4[1] = (byte)in.read();
        byte_array_4[2] = (byte)in.read();
        byte_array_4[3] = (byte)in.read();

        return toInt(byte_array_4);
    }

    public static String toString(InputStream ins) throws java.io.IOException
    {
        int len = toInt(ins);
        return toString(ins, len);
    }

    private static String toString(InputStream ins, int len) throws java.io.IOException
    {
        String ret = new String();
        for (int i = 0; i < len; i++)
        {
            ret += (char) ins.read();
        }
        return ret;
    }

    public static void toStream(OutputStream os, int i) throws java.io.IOException
    {
        byte [] byte_array_4 = toByteArray(i);
        os.write(byte_array_4);
    }

    public static void toStream(OutputStream os, String s) throws java.io.IOException
    {
        int len_s = s.length();
        toStream(os, len_s);
        for (int i = 0; i < len_s; i++)
        {
            os.write((byte) s.charAt(i));
        }
        os.flush();
    }

    private static byte[] toByteArray(InputStream ins, int an_int) throws java.io.IOException
    {
        byte[] ret = new byte[an_int];

        int offset      = 0;
        int numRead     = 0;
        int outstanding = an_int;

        while ((offset < an_int) && (numRead = ins.read(ret, offset, outstanding)) > 0)
        {
            offset += numRead;
            outstanding = an_int - offset;
        }
        if (offset < ret.length)
        {
            //throw new Exception("Could not completely read from stream, numRead =" + numRead + ", ret.lenght = " + ret.length);
        }
        return ret;
    }

    private static void toFile(InputStream ins, FileOutputStream fos, int len, int buf_size) throws java.io.IOException, java.io.FileNotFoundException
    {
        byte[] buffer = new byte[buf_size];

        int len_read = 0;
        int total_len_read = 0;

        while (total_len_read + buf_size <= len)
        {
            len_read = ins.read(buffer);
            total_len_read += len_read;
            fos.write(buffer, 0, len_read);
        }
        if (total_len_read < len)
        {
            toFile(ins, fos, len - total_len_read, buf_size / 2);
        }
    }

    private static void toFile(InputStream ins, File file, int len) throws java.io.IOException, java.io.FileNotFoundException
    {
        FileOutputStream fos = new FileOutputStream(file);
        toFile(ins, fos, len, 1024);
    }

    public static void toFile (InputStream ins, File file) throws java.io.IOException, java.io.FileNotFoundException
    {
        int len = toInt(ins);
        toFile(ins, file, len);
    }

    public static void toStream(OutputStream os, File file) throws java.io.IOException, java.io.FileNotFoundException
    {
        toStream(os, (int) file.length());

        byte b[] = new byte[1024];
        InputStream is = new FileInputStream(file);
        int numRead = 0;

        while ((numRead = is.read(b)) > 0)
        {
            os.write(b, 0, numRead);
        }
        os.flush();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:02:30.333

要传输的文件的名称（和路径）被指定为`File_TX`类中 main 方法的参数。在服务器端（`File_RX`类），文件将相对于`File_RX.class`文件的当前目录保存，与上面的输入参数具有相同的相对路径。

# vim - 用剪贴板和 xterm 编译 vim

> ID：11416069
> 
> 赞同：25
> 
> 时间：2012-07-10T14:54:39.230
> 
> 标签：vim, clipboard

我想编译当前版本的 vim：

```
+clipboard +xterm_clipboard and ruby support 
```

但是每次我编译它`clipboard`并且`xterm_clipboard`选项都没有启用。

是否需要 lib 或者我必须在配置步骤中添加任何其他选项？

```
./configure \
--enable-rubyinterp=dynamic \
--enable-cscope \
--enable-gui=auto \
--enable-gtk2-check \
--enable-gnome-check \
--with-features=huge \
--with-x 
 make && sudo make install 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-12T13:58:05.300

您可以通过检查（或滚动终端中`configure`的输出）来查看是否设法找到工作的 X 库：`configure`

```
$ grep X11 src/auto/config.h
#define HAVE_X11 
```

如果`configure`失败，您将看到：

```
$ grep X11 src/auto/config.h
/* #undef HAVE_X11 */ 
```

您需要安装适当的 X 开发库，例如`xlib`和`xtst`for`--with-x`才能工作。

在 ubuntu 上安装`libx11-dev`和`libxtst-dev`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-02-25T02:50:08.857

ubuntu18.04.4

> sudo apt install libx11-dev libxtst-dev libxt-dev libsm-dev libxpm-dev
> 
> ./configure --enable-python3interp=dynamic --prefix=$HOME/.local --enable-rubyinterp=dynamic --enable-gtk2-check --enable-gnome-check --with-features=huge --with -X
> 
> 进行安装
> 
> ./src/vim ---版本 | grep 剪辑

# android - 在调试模式下重新安装应用程序时，AlarmManager 是否清除先前设置的意图？

> ID：11416072
> 
> 赞同：1
> 
> 时间：2012-07-10T14:54:50.387
> 
> 标签：android, alarmmanager, android-pendingintent

我有一个通过 AlaramManager 设置 PendingIntent 的活动，但正如我有时看到的那样，当我更改意图时，接收器仍然会使用一些额外的数据获取旧的意图，这可能会导致问题。

有没有可能以及如何避免这种情况？

抱歉，找不到有关此案例的足够信息。提前致谢！

```
Intent intent = new Intent(context, PollingService.class);
    intent.setAction(PollingService.ACTION_POLL);

    pendingIntent = PendingIntent.getService(context, 0, intent, PendingIntent.FLAG_CANCEL_CURRENT);
    alarmManager.setInexactRepeating(AlarmManager.ELAPSED_REALTIME, Constants.ALARM_TRIGGER_AT_TIME, Constants.ALARM_INTERVAL, pendingIntent); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:05:09.113

这是一个很难的问题。据我了解，一些 Intent 对象可能是“粘性的”。允许他们以某种方式坚持下去。在这种情况下，我会假设它不会杀死它们，因为它们使用的是系统服务，而不是来自应用程序的活动或服务的东西。我会在命令提示符中使用 adb uninstall (package name) 命令从设备中完全删除您的应用程序。

# bash - 我可以制作一个 bash 或 shell 脚本来杀死应用程序中的所有广告吗？

> ID：11416077
> 
> 赞同：-3
> 
> 时间：2012-07-10T14:55:10.113
> 
> 标签：bash, shell

是否有我可以制作的 bash/shell 脚本来杀死应用程序中的所有广告，例如 Mobile Safari？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:00:05.340

Mobile Safari 没有可以通过 bash 或 sh 访问的 API，因此不能直接访问。

假设 UNIX 工具是可以接受的，您可以（理论上）[使用 bash 和 nc 编写服务器](http://www.linuxscrew.com/2007/09/06/web-server-on-bash-in-one-line/)。

该服务器可以充当代理服务器并在通过的过程中过滤掉广告。

然后，您可以配置移动 Safari 以使用它。

当然，这将要求代理暴露在您使用移动 safari 的任何网络上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:57:33.403

不，没有。bash/sh 脚本无法区分嵌入式广告、普通内容和其他嵌入式内容，因为这不是它的用途（具体来说，它不是专门处理 HTML 输出的）。你想要的是一个广告拦截器。

# ios - iOS：移动，返回“更多”选项卡，按钮进入我自己的导航栏

> ID：11416083
> 
> 赞同：0
> 
> 时间：2012-07-10T14:55:33.747
> 
> 标签：ios, xcode, tabs

我有超过 5 个选项卡，所以“更多”按钮出现并且工作正常。但是，当我从更多菜单中打开其中一个选项卡时，顶部会有一个额外的导航栏，这会缩小我的应用程序中的可用空间。

> 我想将“更多”按钮（位于页面顶部）移动或重新实现到每个选项卡的现有导航栏中。我该怎么做呢？

这是我现在拥有的图像，我想要将“更多”按钮移动到显示“这里”的空间中，这样我就可以隐藏上面的黑条。如果重要的话，我正在使用情节提要。

![在此处输入图像描述](../Images/c7e933336a1d4ab1e9087fdc54658546.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:57:59.757

您需要隐藏导航栏，然后在工具栏上创建自己的按钮，该按钮将弹出到根导航控制器。

要隐藏导航栏：

```
[myTabBarController.moreNavigationController setNavigationBarHidden:YES animated:NO]; 
```

看起来为了从工具栏中的导航栏中重新创建左箭头，您实际上必须使用图像并将其设置为工具栏项的视图。您可以[在此处](https://stackoverflow.com/questions/227078/creating-a-left-arrow-button-like-uinavigationbars-back-style-on-a-uitoolba)使用图像。

# iphone - 从 UIViewController 推送 Tabbarcontroller

> ID：11416089
> 
> 赞同：2
> 
> 时间：2012-07-10T14:55:54.323
> 
> 标签：iphone, objective-c, xcode

我想知道是否可以从 UIViewController 推送 TabbarController ？

我想要做的是：当用户打开应用程序时，它会显示一个带有两个按钮的视图来选择他想要的语言，这个视图除了两个按钮之外不包含任何内容，没有标签栏，没有导航栏。

选择首选语言后，它应该推送一个包含 5 个选项卡的选项卡栏视图。每个选项卡都包含一个 tableview 控制器。

是否可以 ？如果是，请解释如何做我对此有点新:)

先感谢您 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:56:45.490

好吧，您可以将其作为子视图添加到`UIWindow`您的应用程序委托中。您必须为您的 AppDelegate 类创建一个属性 UIWindow。

现在，当`UIViewController`按下按钮时，执行以下操作：

```
- (void) buttonPressed:(id)sender{
     AppDelegate *delegate = (AppDelegate *)[UIApplication sharedApplication].delegate;
     UITabBarController *tab = [UITabBarController youWayOfInitializingIt];
    [delegate.window addSubview: tab.view];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:10:23.300

当然，只需使用 UIViewController 提供一个 UITabBarController `presentModalViewController`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T15:32:03.050

我会尝试拖出两个不同的标签栏视图控制器，一个用于您的每种语言。按住 Ctrl 键将 UIViewController 上的每个按钮拖到其各自语言的选项卡栏视图控制器上，然后选择所需的过渡类型。但是，如果您想使用推送转换，我建议将原始 UIViewController 嵌入导航控制器中。您可以通过单击 UIViewController 然后...

编辑器 --> 嵌入 ---> 导航控制器

如果用户想要返回并更改语言，这将为您提供导航栏和返回按钮。

# windows-7 - 如何在 Windows 7 中删除日本语言环境并使用美国语言环境

> ID：11416093
> 
> 赞同：2
> 
> 时间：2012-07-10T14:56:12.023
> 
> 标签：windows-7, locale

以前，我将日语键盘语言添加到我的 Windows 7 中（通过控制面板）。但是，最近我删除了它，所以我只使用英语语言环境。但是我的命令提示符仍然使用日式风格，您可以在下面看到：
![在此处输入图像描述](../Images/5789262392cef3df856c24da070bc163.png)

在图片中，Get-Culture 只显示英语语言环境，没有日语。但是 '\' 字符被 'yen' 字符替换。如何从我的 Windows 7 中正确删除日语语言环境？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T08:54:24.777

我在 Windows 7 上试过这个，它工作......

[http://windows.microsoft.com/en-us/windows-vista/change-the-system-locale](http://windows.microsoft.com/en-us/windows-vista/change-the-system-locale)

# sharepoint - 使用 Internet Explorer 无法正确显示超过 20 个项目的 Sharepoint 下拉列表

> ID：11416099
> 
> 赞同：3
> 
> 时间：2012-07-10T14:56:24.153
> 
> 标签：sharepoint, drop-down-menu, internet-explorer-9

我在我的三个共享点站点上遇到了这个问题，我设法通过修改 CSS 代码来解决这个问题（参见[http://social.msdn.microsoft.com/Forums/en-US/sharepoint2010general/thread/64796605-bcbb-4a87- 9d8d-9d609579577f/](http://social.msdn.microsoft.com/Forums/en-US/sharepoint2010general/thread/64796605-bcbb-4a87-9d8d-9d609579577f/)）在其中两个上。

我不知道为什么这不适用于具有相同更新、相同 CSS 和相同 html 代码的第三个...我尝试了几种解决方案，例如添加 indesign="true"（这不能使用，因为列表有超过 75 列）。cf [http://www.codeproject.com/Articles/194254/Advanced-fixing-SharePoint-2010-large-lookup-dropd](http://www.codeproject.com/Articles/194254/Advanced-fixing-SharePoint-2010-large-lookup-dropd)

我发现的唯一解决方案需要javascript，但我真的不想使用它......

如果有人提出另一种解决方案，我将不胜感激。

编辑：感谢moontear，我发现了一些非常棒的东西。我将脚本的开头替换为： $(document).ready(function () {

```
$('.ms-lookuptypeintextbox').each(function(){
    OverrideDropDownList($(this).attr('title'));
});

// Main Function
function OverrideDropDownList(columnName) {
... 
```

通过这种方式，我只需要包含脚本而不关心哪些列有问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:43:36.620

这个脚本似乎很好地解决了这个问题......谢谢moontear的评论原始脚本来自：[http ://sharepointegg.blogspot.de/2010/10/fixing-sharepoint-2010-lookup-drop- down.html](http://sharepointegg.blogspot.de/2010/10/fixing-sharepoint-2010-lookup-drop-down.html)

```
$(document).ready(function () {

$('.ms-lookuptypeintextbox').each(function(){
    OverrideDropDownList($(this).attr('title'));
});

// Main Function
function OverrideDropDownList(columnName) {

// Construct a drop down list object
var lookupDDL = new DropDownList(columnName);

// Do this only in complex mode...
if (lookupDDL.Type == "C") {

// Hide the text box and drop down arrow
lookupDDL.Obj.css('display', 'none');
lookupDDL.Obj.next("img").css('display', 'none');

// Construct the simple drop down field with change trigger
var tempDDLName = "tempDDLName_" + columnName;
if (lookupDDL.Obj.parent().find("select[ID='" + tempDDLName + "']").length == 0) {
lookupDDL.Obj.parent().append("<select name='" + tempDDLName + "' id='" + tempDDLName + "' title='" + tempDDLName + "'></select>");

lookupDDL.Obj.parent().find("select[ID='" + tempDDLName + "']").bind("change", function () {
updateOriginalField(columnName, tempDDLName);
});
}

// Get all the options
var splittedChoices = lookupDDL.Obj.attr('choices').split("|");

// get selected value
var hiddenVal = $('input[name=' + lookupDDL.Obj.attr("optHid") + ']').val();
if (hiddenVal == "0") {
hiddenVal = lookupDDL.Obj.attr("value")
}

// Replacing the drop down object with the simple drop down list
lookupDDL = new DropDownList(tempDDLName);

// Populate the drop down list
for (var i = 0; i < splittedChoices.length; i++) {
var optionVal = splittedChoices[i];
i++;
var optionId = splittedChoices[i];

var selected = (optionId == hiddenVal) ? " selected='selected'" : "";
lookupDDL.Obj.append("<option" + selected + " value='" + optionId + "'>" + optionVal + "</option>");
}
}
}

// method to update the original and hidden field.
function updateOriginalField(child, temp) {
var childSelect = new DropDownList(child);
var tempSelect = new DropDownList(temp);

// Set the text box
childSelect.Obj.attr("value", tempSelect.Obj.find("option:selected").val());

// Get Hidden ID
var hiddenId = childSelect.Obj.attr("optHid");

// Update the hidden variable
$('input[name=' + hiddenId + ']').val(tempSelect.Obj.find("option:selected").val());
}

// just to construct a drop down box object. Idea token from SPServces
function DropDownList(colName) {
// Simple - when they are less than 20 items
if ((this.Obj = $("select[Title='" + colName + "']")).html() != null) {
this.Type = "S";
// Compound - when they are more than 20 items
} else if ((this.Obj = $("input[Title='" + colName + "']")).html() != null) {
this.Type = "C";
// Multi-select: This will find the multi-select column control on English and most other languages sites where the Title looks like 'Column Name possible values'
} else if ((this.Obj = $("select[ID$='SelectCandidate'][Title^='" + colName + " ']")).html() != null) {
this.Type = "M";
// Multi-select: This will find the multi-select column control on a Russian site (and perhaps others) where the Title looks like '????????? ????????: Column Name'
} else if ((this.Obj = $("select[ID$='SelectCandidate'][Title$=': " + colName + "']")).html() != null) {
this.Type = "M";
} else
this.Type = null;
} // End of function dropdownCtl
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T20:27:19.497

上面解决方案中的代码很棒，但它有两个主要缺点：

1) 不能很好地与必需的字段验证器配合使用 2) 不能很好地配合通过 SPServices 的级联下拉菜单。

我已经在工作中解决了这两个问题，并将我的解决方案放在这里： [http ://craigvsthemachine.blogspot.com/2013/04/fixing-complex-dropdown-bug-in.html](http://craigvsthemachine.blogspot.com/2013/04/fixing-complex-dropdown-bug-in.html)

# php - 以年/月格式组织上传

> ID：11416100
> 
> 赞同：-4
> 
> 时间：2012-07-10T14:56:25.043
> 
> 标签：php

我需要一点帮助。我是新手。我正在尝试创建一个用于上传文件的 php 脚本。目前我正在使用静态/固定位置进行上传。但我想根据年/月文件夹来组织它们。就像wordpress一样。这是我正在使用的代码

```
$config['baseurl']  =  'http://mysite.com';
$config['path'] = $config['basedir'].'/uploads'; 
```

**当前图像路径如下： http:** [//mysite.com/uploads/image.jpg](http://mysite.com/uploads/image.jpg)

**但我想要： http:** [//mysite.com/uploads/2012/07/image.jpg](http://mysite.com/uploads/2012/07/image.jpg)

如果有人让我编写一些 php 代码，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:00:47.193

您可以像这样将日期附加到路径中：

```
$config['path'] = $config['basedir'].'/uploads/' . date('Y') . '/' . date('M'); 
```

您还需要检查路径是否存在，如果不存在则创建它。

# javascript - 获取类中的全局变量

> ID：11416105
> 
> 赞同：0
> 
> 时间：2012-07-10T14:56:38.147
> 
> 标签：javascript

我创建了一个javascript类，我想每秒调用一个方法，这是我的代码：

```
var MyClass = Base.extend({
    myMethod: function() {
        setTimeout(function(){
            var mc = new MyClass();
            mc.myMethod();
        }, 1000);
    }
});
var myGlobalClass = new MyClass();

myGlobalClass.myMethod(); 
```

`new MyClass()`实际上这段代码有效，但我每次都需要做一个。
我本来希望使用`myGlobalClass`.

这可能吗 ？

如果您考虑到这一点，那么在这种情况下，仅精度`this.myMethod()`是行不通的。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:59:27.677

如果要引用该值，`myGlobalClass`则可以直接从函数中进行

```
setTimeout(function(){
  myGlobalClass.myMethod();
}, 1000); 
```

这是因为 Javascript 在解析名称时不只是查找当前范围内定义的本地变量。它还会查看所有父范围以解决它们。在这种情况下`myGlobalClass`是在全局范围内定义的。名称解析从`setTimeout`函数回调开始，它不会在函数中找到它，然后它会搜索`myMethod: function() {`并且不会在那里找到它，然后它会在全局范围内查找并发现`myGlobalClass`。它将名称解析为此值

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T15:04:33.073

而不是使用`setTimeout`递归调用方法。您可以使用`setInterval`，这使您的代码更清晰。

```
 var MyClass = Base.extend({
        myMethod: function() {
           //..
        }
    });
   var myGlobalClass = new MyClass();
   setInterval(myGlobalClass.myMethod, 1000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T15:03:05.007

如果你想每秒重复一个动作，你有没有想过使用`setInterval`代替`setTimeout`？然后`myMethod`不必在每次调用时都初始化超时。

你可以这样做：

```
var MyClass = Base.extend({
    myMethod: function() {
        // do stuff here
    }
});

var myGlobalClass = new MyClass();

setInterval(myGlobalClass.myMethod, 1000); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T15:01:20.310

如果您有多个实例，请为函数命名并递归调用它。

```
myMethod: function myMethod() {
    setTimeout(function(){
        myMethod();
    }, 1000);
} 
```

这是 IE8- 上的错误。

# objective-c - 是否可以在 iOS5 中确定 iPhone 4s 的网络类型（GSM/CDMA）

> ID：11416109
> 
> 赞同：2
> 
> 时间：2012-07-10T14:56:46.173
> 
> 标签：objective-c, ios, ios5, ios4

是否可以确定 iPhone 4s 的网络类型（GSM/CDMA）？有没有办法确定 iPhone 4s 的网络类型（GSM/CDMA）。如果可能的话，我想区分 GSM/WCDMA 和 CDMA。我使用以下代码来检测它。

```
 size_t size;
sysctlbyname("hw.machine", NULL, &size, NULL, 0);
char *machine = malloc(size);
sysctlbyname("hw.machine", machine, &size, NULL, 0);
NSString *platform = [NSString stringWithUTF8String:machine];
if ([platform isEqualToString:@"iPhone4,1"])    return @"iPhone 4S";
if ([platform isEqualToString:@"iPhone4,3"])    return @"iPhone 4S coma"; 
```

但我用我的 coma 和 wcdma iphone4s 测试它。它都返回 iPhone4,1。我无法区分它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:44:06.533

您可以使用正在用作指标的运营商。

```
NSString* networkType = nil;

// Setup the Network Info and create a CTCarrier object
// first check to ensure the developper linked the CoreTelephony framework
Class telephonyClass = NSClassFromString(@"CTTelephonyNetworkInfo");
if ( nil != telephonyClass ) {
    CTTelephonyNetworkInfo *networkInfo = [[[telephonyClass alloc] init] autorelease];

    if ( nil != networkInfo ) {
       // Get mobile network code
        NSString *mnc = [carrier mobileNetworkCode];
        if (mnc != nil) {   
             // set networkType based on carrier name
             // carrier name to network type mapping left as an exercise for the reader
             //
        }
    }
} 
```

# intellij-idea - 如何在 IntelliJ IDEA 项目工具窗口中自动导航到当前类？

> ID：11416111
> 
> 赞同：144
> 
> 时间：2012-07-10T14:56:51.433
> 
> 标签：intellij-idea

我想在 IntelliJ IDEA 中有一个键盘快捷键，它具有以下效果：项目工具窗口中的树展开以显示当前打开的类（或文件），并且该类在树中被选中。

这可能吗？

* * *

## 回答 #1

> 赞同：220
> 
> 时间：2012-07-10T15:18:08.363

`Navigate`（`View`在旧版本中）| `Select In...`( `Alt`+ `F1`)、**项目视图**( `Enter`)。

也可以启用**Autoscroll from Source**选项，`Project View`以便自动选择当前文件。

* * *

## 回答 #2

> 赞同：203
> 
> 时间：2014-10-10T13:07:45.750

## IntelliJ IDEA 2019

**左键单击**滚轮 >**始终选择打开的文件**

[![始终选择打开的文件](../Images/c3590198b434ef68775559638fe75109.png)](https://i.stack.imgur.com/3Sg4m.png)

还有：**单击打开文件**- 从树视图中选择的文件将在右侧打开。

* * *

## 旧 IntelliJ 版本

**右键单击**Project **/Packages**区域 > **Autoscroll from Source**

![在此处输入图像描述](../Images/33f935ca1aa7dc6cbd564e639fc905f7.png)

或者

**左键单击**滚轮 >**从源自动滚动**

![在此处输入图像描述](../Images/2b3ae59187bdb867f560659540826536.png)

还有：**自动滚动到源**- 从树视图中选择的文件将在右侧打开。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-07-10T15:18:06.200

尝试 `Alt F1`（`Select Target`对话）+ Enter。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-05-16T18:29:56.457

单击[![点击这个图标](../Images/d34ae5dd0c878d1e2f8fcb303d1d03f1.png)](https://i.stack.imgur.com/XVtxk.png)树形框顶部的此图标。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-23T12:46:02.833

您也可以使用为每个打开的文件更改的上部动态菜单来执行此操作。只需在最后一个文件夹上单击两次，文件将位于同一文件夹分支上

[![在此处输入图像描述](../Images/ec35666e6b2e28ecde840d787063f929.png)](https://i.stack.imgur.com/Kpl68.png)

也适用于 pycharm

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-27T11:01:22.317

您还可以通过首选项对“在树视图中选择”进行自己的组合键。我经常这样做： shift + cmd + a 然后只写 select in.. 然后按 enter。

# php - 如何从另一个网页修改一个网页的内容？

> ID：11416117
> 
> 赞同：1
> 
> 时间：2012-07-10T14:57:19.083
> 
> 标签：php, javascript, jquery, html

让我解释一下我的问题，我有一个包含文本区域的页面“A”。我的页面“A”上有一个调用脚本的按钮，该脚本会打开一个包含页面“B”的弹出窗口。

如何从“B”页更改“A”页上的某些内容？

例如检索 textarea 并在其中插入一些东西？（无数据库）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:22:38.437

这是一个很好的 SO 答案，非常相关（并使用 jQuery）。基本上，您想要操作子窗口（当前窗口打开的窗口）的 DOM：

[如何访问子窗口的dom树？](https://stackoverflow.com/questions/1258563/how-can-i-access-the-dom-tree-of-child-window)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:32:24.493

构建 2 个 html 页面：test.htm 和 popup.htm - test.htm 将打开 popup.htm，现在如果您在弹出窗口 (textarea) 中输入内容并按下按钮，文本将发送到 test.htm textarea ...：

测试.htm

```
<h1>Page A<h1>
<form name="frm">
    <textarea name="txt"></textarea>
    <button onclick="popup('popup.htm')">Open Popup</button>
</form>

<script type="text/javascript">
    function popup (url) {
        win = window.open(url, "window1", "width=600,height=400,status=yes,scrollbars=yes,resizable=yes");
        win.focus();
    }
</script> 
```

弹出.htm：

```
<h1>Page B</h1>

<form name="frm">
<textarea name="txt"></textarea>
<button onclick="window.opener.frm.txt.value=document.frm.txt.value">Update Site A</button>
</form> 
```

# javascript - 即使在引用之后也无法访问外部 Jscript 文件？

> ID：11416121
> 
> 赞同：1
> 
> 时间：2012-07-10T14:57:39.473
> 
> 标签：javascript, asp.net, jscript.net

我是一个初学者，尝试我的第一个程序在脚本标记的 scr 属性中添加外部 jscript 文件，按照我搜索的所有步骤进行操作，但它没有按应有的方式工作。有人可以帮我吗？

1.  我有一个 aspx 表单，一个按钮 onclick 调用内部 javascript 函数。我还有一个按钮 onclick 调用外部 .js 文件功能。

这是我的 aspx 代码

```
<head runat="server">
<script type="text/javascript" language="javascript" src="ExternalJScript.js">
function Myfunction()
{
    document.getElementById("htmlbutton").innerHTML = "This is Button from Javascript            function";
    alert("Hi Function Called from Javascript");   
}
</script>
<title></title>
</head>

<body>
<form id="form1" runat="server">
    <div>
    <button type="button" id="htmlbutton" onclick="Myfunction()">This is html button</button><br />
    <button type="button" id="Button1" onclick="ExternalJSFileFunction()" value="Call File">HI</button>
    </div>
</form> 
```

这是我的 .js 代码

```
ExternalJSFileFunction()
{
    alert("I m from external file");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:01:38.633

外部脚本的脚本标签之间不应有代码。尝试将其更改为：

```
<head runat="server">
    <script type="text/javascript" language="javascript" src="ExternalJScript.js"></script>
    <script type="text/javascript">
    function Myfunction()
    {
    document.getElementById("htmlbutton").innerHTML = "This is Button from Javascript            function";
    alert("Hi Function Called from Javascript");   
    }
    </script>
    <title></title>
    </head>

    <body>
    <form id="form1" runat="server">
<div>
<button type="button" id="htmlbutton" onclick="Myfunction()">This is html button</button><br />
<button type="button" id="Button1" onclick="ExternalJSFileFunction()" value="Call File">HI</button>
</div>
    </form> 
```

此外，不推荐使用 Language 属性并且不需要

**编辑**

这是因为您尝试调用的函数实际上不是函数，因为未使用 function 关键字。更改外部文件，使其为：

```
function ExternalJSFileFunction() 
{
    alert("I m from external file");
} 
```

然后它会工作

此外，还有一些其他提示：

如果你使用 HTML5 doctype，你也可以去掉`<script>`元素的 type 属性

还要让你的左大括号与函数或条件在同一行，所以这样做：

```
function ExternalJSFileFunction() { 
```

但不是：

```
function ExternalJSFileFunction()
{ 
```

您几乎应该总是将脚本添加到页面末尾，就在结束`</body>`标记之前以提高性能

使用`onclick`属性也不是附加事件处理程序的推荐方法，您应该使用正确的`addEventListener()`方法。如果您需要支持 <= IE8，则需要使用 IE 的旧事件 API。使用 JS 库。像 jQuery 一样，可以真正帮助解决这类问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:31:54.650

外部 JavaScript 文件中的函数未正确定义。

它应该看起来像这样（我添加了`function`关键字）。

```
function ExternalJSFileFunction()
{
    alert("I m from external file");
} 
```

您还需要做出 danwellman 在他的回答中建议的更改。

# ruby-on-rails - 有没有办法为整个 Rails 3 应用程序设置默认响应格式？

> ID：11416122
> 
> 赞同：0
> 
> 时间：2012-07-10T14:57:44.163
> 
> 标签：ruby-on-rails, ruby, json, routes

我不想为每个资源设置默认格式，而是一次性为所有资源设置它。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:00:39.283

在您的 中设置默认格式`ApplicationController`，所有其余的控制器都应该继承。

```
#ApplicationController
before_filter :set_format

def set_format
  request.format = 'xml'
end 
```

# c# - 图片正在使用中，拒绝访问无法删除

> ID：11416123
> 
> 赞同：0
> 
> 时间：2012-07-10T14:57:46.070
> 
> 标签：c#, asp.net

我正在开发一个处理图像的应用程序。

我有从字节数组创建新图像的代码。

当我创建一些与旧文件名同名的新图像时。

并尝试删除旧文件

它给了我一个例外，即文件正在使用，访问被拒绝。

我不确定哪个进程持有该图像以及如何释放它。

请帮助我.....删除该文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:19:03.830

如果您没有以相同的方式使用它，请使用以下代码。

```
using( FileStream stream = new FileStream( path, FileMode.Open, FileAccess.Read ) )
{
         image = Image.FromStream( stream );
} 
```

发布您自己的代码，但会有所帮助！

# ms-access - 转义不需要的字符，主要是单引号 --replace 函数及实现

> ID：11416125
> 
> 赞同：6
> 
> 时间：2012-07-10T14:57:49.283
> 
> 标签：ms-access, vba

`'`我只是在测试我的数据库，我意识到只要我的数据库中的文本条目包含一个字符（单引号），我就会遇到问题。我现在的解决方案是，在对字符串进行任何 .execute 操作之前，我调用`escape(string, "'", " "'" ")`.

总结示例如下：

```
qr = "INSERT INTO tblExample VALUES ( " & "'" & me.testparam & "'" & ");"
qr = Replace(qr, "'", " "'" ")
db.execute qr
'also tried  qr = "INSERT INTO tblExample VALUES ( " & "'" & replace(me.testparam,"'"," ") & "'" & ");" 
```

这是我认为正确的解决方法，以防止诸如`Tourette's`.

这有两个问题。首先，它不起作用。其次，我在整个应用程序中的代码中有 50 多个位置，我在其中调用语句 db.execute qr，其中 qr 是一个可能包含单引号的字符串。我需要表中的字段包含单引号，所以我不能只用空格或类似的东西替换它。

两部分问题：

1.  有没有比通过我的所有代码调用`Replace`每个要作为查询执行的字符串更好的解决方案？

2.  为什么我当前的实施失败了？- 即使将单引号转义到空格，我仍然在查询表达式中遇到语法错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T16:16:18.337

首先检查这两条线。

```
"VALUES ( " & "'" & me.testparam & "'" & ");"
"VALUES ( '" & me.testparam & "');" 
```

两者都会产生完全相同的字符串。对我来说不同的是，我的大脑更快地理解了第二个版本。

现在，这就是评论告诉你要做的事情......用两个单引号替换源字符串中的每个单引号。我添加了`Debug.Print`这样您就可以在立即窗口中查看完成的字符串（使用 Ctrl+g 转到那里）......然后您可以看到实际的字符串，而不是试图想象它的样子。

```
qr = "INSERT INTO tblExample VALUES ( '" & _
    Replace(Me.testparam, "'", "''" & "');"
Debug.Print qr
db.Execute qr, dbFailOnError 
```

由于我假设`db`是一个`DAO.Database`对象变量，因此我包含了该`dbFailOnError`选项。您应该在代码中包含一个错误处理程序来处理任何`dbFailOnError`暴露的问题。

当您在查询中遇到 VBA 函数问题时，请转到“立即”窗口并在那里测试您的函数表达式。这会触发编译错误，“*预期：列表分隔符或 )* ”：

```
? Replace("Tourette's", "'", " "'" ") 
```

但这一个有效：

```
? Replace("Tourette's", "'", "''")
Tourette''s 
```

我提到这一点是因为它通常很有用，还因为您的标题以“*转义不需要的字符，主要是单引号*”开头。因此，如果您想删除/替换其他字符，而不仅仅是单引号，请在“立即”窗口中进行试验，直到找到`Replace()`有效的表达式。然后在查询中使用该表达式。

例如，如果不需要的字符包括换行符...

```
MyString = "foo" & vbCrlf & "bar" : ? MyString
foo
bar
? Replace(MyString, Chr(13) & Chr(10), " ")
foo bar 
```

注意：我使用`Chr(13) & Chr(10)`而不是`vbCrlf`作为查找目标，因为 db 引擎可以使用该`Chr()`函数但不知道命名常量 ( `vbCrlf`)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T16:15:25.867

您的查询失败，因为您没有说在哪里插入：

```
Dim qd As QueryDef
qr = "INSERT INTO tblExample (AText) VALUES ( [avalue] );"

Set qd = CurrentDB.CreateQueryDef("",qr)
qd.Parameters("avalue").Value = me.testparam
qd.Execute dbFailOnError 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-30T04:20:11.607

另一种方法是将引号定义为常量 (Const Quote = """") 并使用它来构建 SQL 语句。不可能将引号定义为 Const Quote = Chr(34)，因为常量定义不能基于函数，因此必须连续使用四个双引号。第三个引号是您要保存的内容，第二个引号是为了排除第三个引号，第一个和最后一个引号是因为您分配的值是一个字符串。

然后，您将能够构建 SQL 语句，例如：

```
SQL = SELECT * FROM tblSyndromes
WHERE Syndrome = " & Quote & "Tourette's" & Quote & ";" 
```

您的数据中是否有单引号将不再重要。

我不使用参数，就好像我将我的数据库升级到 sql server 并将我的查询转换为传递查询一样，我不能使用参数。我很少升级，但我在这个假设下编写了所有代码。此外，如果您的查询未按预期工作，如何找出问题所在。如果我有一个名为 SQL 的变量，那么我总是可以打印 SQL 语句并在新查询中运行它以查看它的作用。

# sql - 如何检查记录是否存在于另一个表中，如果不存在则添加

> ID：11416130
> 
> 赞同：1
> 
> 时间：2012-07-10T14:58:02.403
> 
> 标签：sql, database, select, exists

> **可能的重复：**
> [在插入之前检查重复的插入语句](https://stackoverflow.com/questions/8312058/insert-statement-that-checks-for-duplicate-before-insert)

我想使用外键 b_id 检查问题日志表中是否存在建筑物 ID。如果它不存在，那么我想将它添加到问题日志表中。我有下面的代码，但这只会检查哪些建筑物不在问题日志表中......我该如何插入？非常感谢。我正在使用 SQL Server 2008。

```
select b.b_id from building 
where not exists(select b.b_id from issue_log as l where b._id = l.b_id) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T15:01:29.953

像这样的东西？

```
INSERT INTO issue_log(b_id)
SELECT b.b_id FROM building b
WHERE NOT EXISTS(SELECT l.b_id FROM issue_log AS l WHERE b.b_id = l.b_id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:01:24.227

使用`IF NOT EXISTS`或者如果您想潜在地进行更新使用`MERGE`，它将根据您在语句中设置的规则决定是否进行插入、更新或可选的删除。一旦你掌握了语法，它就非常有用

MSDN：[http ://technet.microsoft.com/en-us/library/bb510625(v=sql.105).aspx](http://technet.microsoft.com/en-us/library/bb510625(v=sql.105).aspx)

# javascript - 获取 JQuery UI 自动完成元素的索引

> ID：11416132
> 
> 赞同：1
> 
> 时间：2012-07-10T14:58:03.977
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-autocomplete

我正在使用带有文本框的 jQuery UI。当用户从可能匹配的下拉列表中选择时，我想从源数组中获取选择的索引，假设是一个 JavaScript 数组。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:06:06.230

你可以这样做：

```
select: function(event, ui) {
    console.log($.inArray(ui.item.value, availableTags));
} 
```

其中 availableTags 是自动完成的源数组。

**[jsFiddle 示例](http://jsfiddle.net/j08691/mf8vU/)**

# regex - 在 bash 脚本中使用正则表达式将 1 个参数拆分为 2 个参数

> ID：11416134
> 
> 赞同：9
> 
> 时间：2012-07-10T14:58:08.307
> 
> 标签：regex, bash

这是我的情况。目前，我有一个接受两个参数的脚本：书名和章节名。例如：

```
$ myscript book1 chap1 
```

现在，由于需要很长时间来解释的原因，我希望我的脚本能够采用以下格式的单个参数：{book name}.{chapter name}。例如：

```
$ myscript book1.chap1 
```

对我来说困难在于我不知道如何将字符串 $1=abc.xyz 转换为两个单独的变量，$var1=abc 和 $var2=xyz。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-10T15:02:09.767

如果只是两个标签，您可以使用 bash 表达式

```
arg=$1
beforedot=${arg%.*}
afterdot=${arg#*.} 
```

它比`cut`因为它是内置的 shell 更快。请注意，这会将~~第一个~~最后一个点之前的所有内容放入，然后将所有`beforedot`内容放入`afterdot`。

**编辑**：

如果您想按任意数量的标记进行拆分，还有一个替换/重新解释结构：

```
string=a.b.c.d.e
tokens=(${string//\./ }) 
```

您正在用空格替换点，然后由于它周围的括号而被解释为数组声明+定义。

但是，我发现这对于 bash 的兄弟姐妹和后代来说不太便携。例如，它在我最喜欢的 shell 中不起作用，`zsh`.

数组需要用大括号取消引用，并从 0 开始索引：

```
echo "Third token: ${tokens[2]}" 
```

您也可以通过使用 [@] 取消引用整个数组来遍历它们：

```
for i in ${tokens[@]}
do
    # do stuff
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T01:38:38.383

为了完整起见，并且由于您询问了正则表达式方法：

```
pattern='^([^.]*)\.(.*)'
[[ $1 =~ $pattern ]]
book=${BASH_REMATCH[1]}
chapter=${BASH_REMATCH[2]} 
```

捕获组是`BASH_REMATCH`数组中的元素。元素 0 包含整个匹配项。

此正则表达式将捕获第一个元素中的第一个点。第一个点之后的任何内容（包括后续点）都将位于第二个元素中。如果需要，可以轻松修改正则表达式以在最后一个点处中断。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T15:05:40.983

如果`$arg`包含`book.chap`

```
read BOOK CHAP<<<$(IFS="."; echo $arg) 
```

将相应地设置变量 BOOK 和 CHAP。这使用控制 bash 如何理解单词边界的 bash 内部字段分隔符 (IFS)。如果（比如说）您的原始文件中有多个分隔符，`$arg`那么只需指定更多变量来包含结果。

从[这里](http://tldp.org/LDP/abs/html/internalvariables.html)：

> $IFS 默认为空格（空格、制表符和换行符），但可以更改，例如，解析逗号分隔的数据文件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T15:00:32.683

您可以使用括号来捕获这两个部分；之后，您可以使用反向引用再次获取它们。不同语言的语法不同；检查[http://www.regular-expressions.info/brackets.html](http://www.regular-expressions.info/brackets.html)了解一般反向引用的课程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T15:04:07.490

```
#!/bin/bash

book=${1%.*}
chapter=${1#*.}

printf 'book: %s\nchapter: %s\n' "$book" "$chapter" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T15:27:48.950

### 带壳参数展开的模式替换

有很多方法可以完成你想做的事情。其他答案中未涵盖的一种方法是[模式替换](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)。

如果您知道该值将始终在一个句点上正确拆分，则可以将模式替换应用于该值，以便使用*IFS*轻松标记化。例如：

```
set -- foo.bar
myvar="${1/./ }"
echo $myvar 
```

这将产生`foo bar`.

# ruby-on-rails - 如何替换 Rails 控制台中的现有类？

> ID：11416135
> 
> 赞同：2
> 
> 时间：2012-07-10T14:58:10.250
> 
> 标签：ruby-on-rails, ruby, class

在控制台中：

```
class Logger
end
l = Logger.new 
```

抛出错误：`ArgumentError: wrong number of arguments (0 for 1) from /home/zzz/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/logger.rb:268:in 'initialize'`

为什么要使用 Logger in `/home/zzz/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/logger.rb`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T15:18:03.550

我会试着回答你的第二个问题。那么，为什么 Ruby 使用其他`Logger`类而不是您尝试定义的类呢？

Ruby 的基本特性之一是类的重新开放。假设您的应用程序中已经定义并加载了一些类：

```
class A
  def foo
    puts 'foo'
  end
end

A.new.foo
#=> foo 
```

如果在那之后 Ruby 解释器遇到类似的情况：

```
class A
  def bar
    puts 'bar'
  end
end 
```

它没有重新定义 class `A`，而只是将此定义附加到前一个定义中。在结果中已经定义的类`A`得到了新的实例方法`bar`：

```
A.new.foo # still works
#=> foo
A.new.bar # new method
#=> bar 
```

由于 Ruby 处理方法调用的方式，在类的第二次定义（实际上是重新打开）*之前*`A`初始化的类的所有实例也会获得这个新方法。因此，每次重新打开一个类时，都会向该类本身以及该类的所有先前初始化的实例添加新功能。*`A``bar`*

 *重新打开类还允许重写现有类的方法：

```
class A
  def foo
    puts 'new foo'
  end
end

A.new.foo
#=> new_foo 
```

考虑到这一特性以及 Rails 已经`Logger`为您加载了标准类这一事实，您的定义只会重新打开该类，但甚至不会更改任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T15:09:07.560

那个类已经被加载了，大概是因为 rails 正在使用它：你没有重新定义这个类，你只是重新打开它。

您可以删除现有的课程

```
Object.send(:remove_const, :Logger) 
```

在这种情况下，以前称为的类`Logger`仍然存在，只是不再绑定到常量`Logger`，所以当你这样做时

```
class Logger
end 
```

您将创建一个新课程，而不是重新打开旧课程。当然，您最终可能会破坏假设存在旧 Logger 类的代码。

如果您在测试中这样做，您可能会对rspec 2.11中的新[常量存根感兴趣](https://www.relishapp.com/rspec/rspec-mocks/v/2-11/docs/stubbing-constants)*

# image - 使用 css3 进行图像替换和过渡？

> ID：11416136
> 
> 赞同：3
> 
> 时间：2012-07-10T14:58:14.540
> 
> 标签：image, css, hover, css-transitions

我想知道是否有人知道如何在两个背景图像之间进行过渡的聪明而新的方法？我知道那里有多个教程，只是其中大多数都过时了。

我想知道是否有一种聪明而现代的 CSS3 方式来做这样的事情。

我有一个简单的 logo.png 设置为 a 的背景`div.logo`（我希望将其设置为背景图像，而不是 via `img src`）。当我将鼠标悬停在它上面时，我希望平滑过渡到“logo-hover.png”，这是同一个文件，只是颜色不同。

现在有什么想法吗？

我的方法是这样的： - 我围绕`div.logo`相对位置创建一个外部容器。我在其中放置两个 div，绝对位置彼此重叠。div.hover 设置为`display:none`，如果我悬停它，我会使用 css3 过渡来动画它的不透明度。

这是这样做的唯一方法吗？我实际上很喜欢使用纯 css 方式，我不必向 dom 本身添加具有悬停状态的额外 div。

关于这件事有什么想法吗？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T15:13:54.123

用这个

```
#home .stripes, #home .stripes:hover a {
    text-indent: -9999px;
    width: 116px;
    height: 128px;
    margin: 50px 0px 0px 56px;
    float:left;
    padding: 0;
    background:url('http://www.clipartpal.com/_thumbs/024/christmas/christmas_024_02_tns.png');
}
#home .stripes a {
    background:url('https://secure.10foldsolutions.com/ecommerce/images/9/products/29197.jpg');
    -webkit-transition: all .6s ease-in-out;
    -moz-transition: all .6s ease-in-out;
    -o-transition: all .6s ease-in-out;
    -ms-transition: all .6s ease-in-out;
    transition: all .6s ease-in-out;
}
#home .stripes a:hover, #home .stripes a:focus {
    background:url('https://secure.10foldsolutions.com/ecommerce/images/9/products/29197.jpg');
    opacity: 0;
} 
```

和

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T19:54:37.137

实际上，我自己只是想出了一个解决方案。

我想要一种让图像看起来像精灵一样工作的方法，但要保持超级简单。

HTML：

```
<div class="facebookicon">
    <a href="#!"><img src="http://example.com/some.png"></a>
</div> 
```

CSS：

```
.facebookicon img {
    background: #fff;
    transition:  background 400ms ease-out;
}

.facebookicon img:hover {
    background: #3CC;
    transition:  background 400ms ease-in;
}
/* you need to add various browser prefixes to transition */
/* stripped for brevity */ 
```

在这里你可以看到它：

[http://jsfiddle.net/mattmagi/MpxBd/](http://jsfiddle.net/mattmagi/MpxBd/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T15:03:11.613

我想这就是你想要的： [DEMO。](http://jsfiddle.net/luissanchezm86/nuwpG/3/)

基本上它使用你说的转换：

**CSS**标记：

```
.imagesTest {
    position:relative;
    height:200px;
    width:300px;
}
.imagesTest img {
    position:absolute;
    -webkit-transition: opacity 1s ease-in-out;
    -moz-transition: opacity 1s ease-in-out;
    -o-transition: opacity 1s ease-in-out;
    transition: opacity 1s ease-in-out;
}

.imagesTest img.top:hover {
    opacity:0;
}​ 
```

**HTML**标记：

```
<div class="imagesTest">
    <img class="bottom" src="some/image" />
    <img class="transition" src="some/image" />
</div>​ 
```

有关更多信息，请在此处查看更多[示例](http://css3.bradshawenterprises.com/cfimg/)

# haskell - 记录的应用构造函数

> ID：11416138
> 
> 赞同：5
> 
> 时间：2012-07-10T14:58:18.833
> 
> 标签：haskell, applicative

我想为 haskell 记录创建应用构造函数，以便为记录创建解析器。

考虑记录：

```
data Record = Record {i :: Int, f :: Float} 
```

我想要的构造函数：

```
Record <$> pInt <*> pFloat 
```

给出了基本类型的解析器：

```
class Parseable a where
  getParser :: Parser a

instance Parseable Int where
  getParser = pInt

instance Parseable Float where
  getParser = pFloat 
```

是否有任何图书馆已经可以做到这一点？是否可以为记录定义 getParser ？提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T15:54:38.220

这可以使用例如[常规](http://hackage.haskell.org/package/regular)库来完成。使用这个库通常需要一些语言扩展：

```
{-# LANGUAGE FlexibleContexts     #-}
{-# LANGUAGE FlexibleInstances    #-}
{-# LANGUAGE TypeFamilies         #-}
{-# LANGUAGE TypeOperators        #-}
{-# LANGUAGE UndecidableInstances #-}

import Control.Applicative
import Generics.Regular 
```

至少有两个最流行的解析器组合库带有一个应用函子接口：例如，[参见 uu-parsinglib](http://hackage.haskell.org/package/uu-parsinglib)和[parsec](http://hackage.haskell.org/package/parsec)，但是为了简单起见，让我们在这里使用简单的成功列表解析器。

```
newtype Parser a = Parser {runParser :: ReadS a}

instance Functor Parser where
  fmap f p = Parser $ \s -> [(f x, s') | (x, s') <- runParser p s]

instance Applicative Parser where
  pure x  = Parser $ \s -> [(x, s)]
  p <*> q = Parser $ \s ->
    [(f x, s'') | (f, s') <- runParser p s, (x, s'') <- runParser q s']

instance Alternative Parser where
  empty   = Parser $ \_ -> []
  p <|> q = Parser $ \s -> runParser p s ++ runParser q s 
```

（请注意`type ReadS a = String -> [(a, String)]`。）

```
pSym :: Char -> Parser Char
pSym c = Parser $ \s -> case s of
  (c' : s') | c == c' -> [(c', s')]
  _                   -> []

pInt :: Parser Int
pInt = Parser reads

pFloat :: Parser Float
pFloat = Parser reads 
```

直截了当，我们有：

```
class Parseable a where
  getParser :: Parser a

instance Parseable Int where
  getParser = pInt

instance Parseable Float where
  getParser = pFloat 
```

并且，对于您的记录类型，根据需要：

```
data Record = Record {i :: Int, f :: Float}

instance Parseable Record where
  getParser = Record <$> pInt <* pSym ' ' <*> pFloat 
```

现在，我们一般如何生成这样的解析器？

首先，我们定义所谓的模式函子（详见[正则](http://hackage.haskell.org/package/regular)`Record`的文档）：

```
type instance PF Record = K Int :*: K Float 
```

然后，我们创建`Record`一个类型类的实例`Regular`：

```
instance Regular Record where
  from (Record n r) = K n :*: K r
  to (K n :*: K r)  = Record n r 
```

接下来，我们定义一个通用解析器：

```
class ParseableF f where
  getParserF :: Parser a -> Parser (f a)

instance ParseableF (K Int) where
  getParserF _ = K <$> pInt

instance ParseableF (K Float) where
  getParserF _ = K <$> pFloat

instance (ParseableF f, ParseableF g) => ParseableF (f :*: g) where
  getParserF p = (:*:) <$> getParserF p <* pSym ' ' <*> getParserF p 
```

（要涵盖所有常规类型，您将必须提供更多实例，但这些将适用于您的示例。）

现在，我们可以证明类中的每种类型`Regular`（给定`ParseableF`其模式函子的实例）都带有一个解析器：

```
instance (Regular a, ParseableF (PF a)) => Parseable a where
  getParser = to <$> getParserF getParser 
```

让我们试一试。删除 的原始实例`Parseable`（即 、`Int`和`Float`当然`Record`的实例），只保留单个通用实例。开始了：

```
> runParser (getParser :: Parser Record) "42 3.14"
[(Record {i = 42, f = 3.14},"")] 
```

**注意：**这只是一个非常基本的示例，说明如何使用常规库派生通用解析器。库本身带有一个[通用的成功列表解析器](http://hackage.haskell.org/packages/archive/regular/0.3.4/doc/html/Generics-Regular-Functions-Read.html)，它对记录做了特别好的事情。您可能想先检查一下。此外，该库带有 Template Haskell 支持，因此`Regular`可以自动派生实例。这些实例包括记录标签的特殊结构类型，因此您可以让您的通用函数真正花哨地处理记录类型。查看文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T15:11:34.263

尽管我很喜欢这个`regular`包，但我想指出，由于`ghc-7.2`GHC 具有对派生泛型表示类型的内置支持，因此您不必依赖 Template Haskell 来执行此操作。

与 dblhelix 建议的解决方案相比的更改如下。您需要导入稍微不同的标志和模块：

```
{-# LANGUAGE DeriveGeneric #-}
{-# LANGUAGE DefaultSignatures #-}
{-# LANGUAGE FlexibleContexts #-}
{-# LANGUAGE TypeOperators #-}

import Control.Applicative
import GHC.Generics 
```

您仍然`Parser`如上所述定义及其实例。您需要`Generic`为您的`Record`类型派生类：

```
data Record = Record { i :: Int, f :: Float }
  deriving (Generic, Show) 
```

该类与该类`Generic`非常相似`Regular`。您不必现在定义`PF`或实例`Regular`。

取而代之的是`ParseableF`，我们定义了一个`Parseable'`风格非常相似但又略有不同的类：

```
class Parseable' f where
  getParser' :: Parser (f a)

-- covers base types such as Int and Float:
instance Parseable a => Parseable' (K1 m a) where
  getParser' = K1 <$> getParser

-- covers types with a sequence of fields (record types):
instance (Parseable' f, Parseable' g) => Parseable' (f :*: g) where
  getParser' = (:*:) <$> getParser' <* pSym ' ' <*> getParser'

-- ignores meta-information such as constructor names or field labels:
instance Parseable' f => Parseable' (M1 m l f) where
  getParser' = M1 <$> getParser' 
```

最后，对于`Parseable`，我们定义了一个通用的默认方法：

```
class Parseable a where
  getParser :: Parser a
  default getParser :: (Generic a, Parseable' (Rep a)) => Parser a
  getParser = to <$> getParser'

instance Parseable Int where
  getParser = pInt

instance Parseable Float where
  getParser = pFloat 
```

现在，使`Record`类型可解析就像提供一个空实例声明一样简单：

```
instance Parseable Record 
```

该示例与以前一样工作：

```
> runParser (getParser :: Parser Record) "42 3.14"
[(Record {i = 42, f = 3.14},"")] 
```

# android - 使用代码显示 android 键盘，而不使用 GUI 元素

> ID：11416143
> 
> 赞同：0
> 
> 时间：2012-07-10T14:58:36.703
> 
> 标签：android, keyboard

如何使用代码显示 Android 键盘。我不想将它与 GUI 元素一起使用，只是显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:55:47.403

试穿。[`showSoftInput()`](http://developer.android.com/reference/android/view/inputmethod/InputMethod.html#showSoftInput%28int,%20android.os.ResultReceiver%29)_`InputMethodManager`

# php - php在字符串中的某个单词之后直接获取单词

> ID：11416147
> 
> 赞同：2
> 
> 时间：2012-07-10T14:58:46.103
> 
> 标签：php, string

我正在尝试编写一个脚本来解析电子邮件并在某些字符串之后查找某些字符串。

例如，假设我有以下电子邮件正文。

```
$body = "Dear John Doe, your information is below
Check in date: 07/23/2012
Check out date: 07/26/2012

Alternate Check in date: 07/27/2012
Alternate Check out date: 07/29/2012"; 
```

我想在“签入日期：”的第一个实例之后直接获取“单词”，即“07/23/2012”。“单词”是下一组带有空格的字符。我包括了“替代”部分，因为某些电子邮件将具有文本版本和 html 版本。

我想我需要使用 strpos()、substr() 和 explode() 的组合，但我不确定如何使用。有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T15:03:38.440

正则表达式到底有什么好处：

```
preg_match('/(?<=Check in date: )\S+/i', $string, $match);
echo $match[0]; 
```

[http://www.regular-expressions.info](http://www.regular-expressions.info)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T15:02:02.810

这是正则表达式的一个很好的用例：

```
if (preg_match('#^Check in date: ([^\s]+)#m', $body, $match)) {
    $result = $match[1];
} 
```

在这里试试：http: [//codepad.viper-7.com/W4UW4P](http://codepad.viper-7.com/W4UW4P)

# linux - 如何将列中的值拆分为单独的列

> ID：11416148
> 
> 赞同：1
> 
> 时间：2012-07-10T14:58:46.437
> 
> 标签：linux, awk

我的制表符分隔文件如下所示：

```
 ID   Pop  snp1  snp2  snp3  snp4  snp5
  AD62  1  0/1   1/1   .    1/1   0/.
  AD75  1  0/0   1/1   .    ./0   1/0
  AD89  1  .     1/0   1/1  0/0   1/. 
```

我想分隔列（从第 3 列开始），以便将由“/”字符分隔的值分隔成自己的列。但是，也有一些列缺少值（它们仅包含“.”字符），我希望将其视为“./”。使两个“。” 然后将字符分成它们自己的列。例如：

```
 ID   Pop  snp1     snp2     snp3     snp4     snp5
  AD62  1    0    1   1    1   .    .   1    1   0    .
  AD75  1    0    0   1    1   .    .   .    0   1    0
  AD89  1    .    .   1    0   1    1   0    0   1    . 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:08:00.510

您可以使用 sed：

```
sed -e 's/ \. /\.\t\. /g' -e 's/\//\t/g' <your_file> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:04:29.053

试过这个并且效果很好，您可以根据您的要求进行调整。

假设数据在`data.txt`文件中。

```
cat data.txt | sed 1d | tr '/' '\t'| sed 's/\./.\t./g' 
```

这给出了输出，但是您需要解决被弄乱的空格和制表符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T06:57:35.340

一种相当健壮的方式，使用`awk`和一些`if`语句：

```
awk '{ for (i = 1; i <= NF; i++) if (i >= 3 && i < NF && NR == 1) printf "%s\t\t", $i; else if (i == NF && NR == 1) print $i; else if ($i == "." && NR >= 2) printf ".\t.\t", $i; else { sub ("/", "\t", $i); if (i == NF) printf "%s\n", $i; else { printf "%s\t", $i; } } }' file.txt 
```

分成多行：

```
awk '{ for (i = 1; i <= NF; i++)
   if (i >= 3 && i < NF && NR == 1) printf "%s\t\t", $i;
   else if (i == NF && NR == 1) print $i;
   else if ($i == "." && NR >= 2) printf ".\t.\t", $i;
   else {
      sub ("/", "\t", $i);
      if (i == NF) printf "%s\n", $i;
      else {
         printf "%s\t", $i;
      }
   }
}' file.txt 
```

高温高压

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T15:16:38.177

这可能对您有用（GNU sed）：

```
sed ''1s/\t/&&/3g;s/\t\.\t/\t.\t.\t/g;y/\//\t/' file 
```

# matlab - MatLab中复数乘法的困惑

> ID：11416152
> 
> 赞同：0
> 
> 时间：2012-07-10T14:58:55.437
> 
> 标签：matlab, matrix-multiplication, complex-numbers

我注意到在 Matlab 中复杂值乘法的计算很混乱。一个简单的例子如下：

```
syms x1 x2 x3 x4
s=[x1 x2]*[x3 x4]' 
```

s 的返回值是这样的：

```
s=x1*conj(x3) + x2*conj(x4) 
```

在我看来，s 应该等于 x1*x3+x2*x4。那么，这里有什么问题呢？

## 那么，如果我想得到两个复数向量的乘法，我该怎么做呢？

更新：我发现它会通过使用来解决。而不是 。像：

```
s=[x1 x2]*[x3 x4] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T15:16:13.237

算子在Matlab`'`中也称为**Complex conjugate transpose**`ctranspose`，基本意思是它应用`conj`and和and`transpose`函数。请注意，此运算符在数学中称为 Hermitian 运算符。

您真正想要的`transpose`是快捷方式的运算符`.'`

为了获得预期的输出，并且假设您只想相乘而不共轭第二个向量，您应该这样做：

```
>> syms x1 x2 x3 x4
>> s = [x1 x2]*[x3 x4].' 
```

所以你的输出将是：

```
x1*x3 + x2*x4 
```

有关更多信息，您可以查看`help .`, 查看运营商列表，`help transpose`以及`help ctranspose`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T15:17:08.897

请注意，`'`Matlab 中的运算符是[共轭转置](http://en.wikipedia.org/wiki/Conjugate_transpose)，即它既转置矩阵又采用复共轭：

```
>> (1+1i)'
ans =
   1.0000 - 1.0000i 
```

如果你想要[矩阵转置](http://en.wikipedia.org/wiki/Matrix_transpose)，那么你应该使用`.'`运算符：

```
>> (1+1i).'
ans =
   1.0000 + 1.0000i 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T15:14:30.743

也许这将有助于解释：

```
>> syms x1 x2 x3 x4
>> s=[x1 x2]*[x3 x4]'
s =
x1*conj(x3) + x2*conj(x4)

>> s=[x1 x2]*[x3; x4]
s =
x1*x3 + x2*x4

>> [x3 x4]'

ans =

 conj(x3)
 conj(x4) 
```

转置的`'`版本没有做你想要的。改用`transpose`：

```
>> transpose([x3 x4])
 ans =
 x3
 x4 
```

# android - Android：使用广播接收器运行服务。

> ID：11416153
> 
> 赞同：0
> 
> 时间：2012-07-10T14:58:57.100
> 
> 标签：android, service, broadcastreceiver

我有这个应用程序，我想在手机启动时运行（在 GUI 出现后），但我希望它在后台运行（如服务）

我知道这是可能的，因为大多数安卓系统都是这样的。

任何提示都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:01:13.813

在您的应用程序中创建服务。如果您愿意，可以将其绑定到 Activity。子类 BroadcastReceiver 监听 Android.BOOT_COMPLETED 系统广播。然后启动您的服务。

# c# - FileHelpers：搜索结果

> ID：11416155
> 
> 赞同：1
> 
> 时间：2012-07-10T14:59:07.577
> 
> 标签：c#, windows, parsing, filehelpers

我使用功能强大的[FileHelpers Library](http://www.filehelpers.net)。但是有没有一种内置的方法来搜索生成的对象。

```
var engine = new FileHelperEngine<Text>();
var res = engine.ReadFile("myfile.csv");
string result = res["key"].value; 
```

我的 csv 就像：key;value
我的意思是，是否可以不使用数组 [0]、[1]、[12] 访问对象......
也许就像在代码示例中一样。

非常感谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:19:27.143

您可以通过 LINQ 将结果数组转换为字典：

```
var dictionary = validRecords.ToDictionary(r => r.Key, r => r.Value); 
```

下面的完整程序演示了该方法。

```
[DelimitedRecord(",")]
public class ImportRecord
{
    public string Key;
    public string Value;
}

class Program
{
    static void Main(string[] args)
    {
        var engine = new FileHelperEngine<ImportRecord>();

        string fileAsString = @"Key1,Value1" + Environment.NewLine +
                              @"Key2,Value2" + Environment.NewLine;

        ImportRecord[] validRecords = engine.ReadString(fileAsString);

        var dictionary = validRecords.ToDictionary(r => r.Key, r => r.Value);

        Assert.AreEqual(dictionary["Key1"], "Value1");
        Assert.AreEqual(dictionary["Key2"], "Value2");

        Console.ReadKey();
    }
} 
```

# python - heroku 上的蟒蛇。获取 SIGHUP 错误

> ID：11416158
> 
> 赞同：0
> 
> 时间：2012-07-10T14:59:21.613
> 
> 标签：python, ruby, heroku

在通过 HEROKU 的指南让 Python 应用程序在 HEROKU 上运行，首先创建一个表面上使用 python 和烧瓶的 hello world 程序，并使用 Foreman 在本地运行它。我从 Ruby/Gems/foreman/engine 收到“不支持的信号 SIGHUP”。我正在运行Win7。还有其他人遇到这个问题或有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:22:00.423

如果您在本地运行，您也可以使用 python 从命令行运行烧瓶应用程序，完全跳过 Foreman。这就是我在 Windows 7 机器上本地运行的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:44:31.133

这与 Win7 上的一个已知问题有关：[https ://github.com/ddollar/foreman/pull/219](https://github.com/ddollar/foreman/pull/219)

Heroku 刚刚发布了一个新版本的[Foreman gem](http://rubygems.org/gems/foreman) (v0.48) 来解决这个问题。感谢您的输入。

# c# - 设置 32 英尺图书馆

> ID：11416160
> 
> 赞同：6
> 
> 时间：2012-07-10T14:59:22.527
> 
> 标签：c#, .net, exception-handling, bluetooth, 32feet

我正在尝试开始使用这个库：[32feet](http://32feet.codeplex.com/)

我有一个 Broadcomm 蓝牙堆栈，但无法弄清楚如何设置这个库。当我运行我的代码时，我得到：

> 未处理的异常：System.PlatformNotSupportedException：未找到支持的蓝牙协议栈。

在他们的网站上搜索后，我发现了这个：[安装说明](http://32feet.codeplex.com/wikipage?title=Broadcom&referringTitle=Documentation)

它说将适当的 DLL 复制到项目中，然后运行`Test32FeetWidcommWin32.exe`​​. 我尝试将文件放在我的 Visual Studio 项目中的每个文件夹中，然后运行该 EXE，但我仍然遇到相同的错误。最初，我尝试仅添加 InTheHand.Net.Personal.dll 文件作为对我的项目的引用，但这也不起作用。

我可能做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-01-13T11:37:56.093

也可能只是 Windows 中没有打开蓝牙。

我正在使用 .NET InTheHand 库，收到此消息只是因为蓝牙在 Windows 中已关闭，并通过激活蓝牙解决了它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T16:32:15.897

我刚刚解决了这个问题。我认为问题是我的项目中对 DLL 的 NETCF 版本的旧引用，当时我试图暴力破解解决方案，所以我擦干净了我的项目，然后再次开始添加所有内容，它工作了！

对于那些试图找出问题的人来说，一个有用的工具是将`app.config`文件复制并粘贴到`release`您正在创建的应用程序的目录中，并将名称更改为`<YOUREXENAME>.exe.config`. 当您然后运行您的 EXE 文件时，它应该创建一个更详细的跟踪文件。对于我来说，我发现这`coredll.dll`是未加载的罪魁祸首，并且被`Stack not supported`异常掩盖了。经过简单的 Google 搜索后，我发现问题出在 NETCF 上。

编辑：为了清楚起见，在我清理了我的项目之后，我重新添加了对*正确* `InTheHand.Net.Personal.dll`文件的引用，并将文件添加`32feetWidcomm.dll`到了我的 Release 文件夹中。

# .net - 如何访问 Windows 8(metro) 应用程序中的子元素

> ID：11416165
> 
> 赞同：0
> 
> 时间：2012-07-10T14:59:37.227
> 
> 标签：.net, xaml, microsoft-metro, windows-runtime, visual-studio-2012

我有一个包含 WebView 控件的用户控件。并且这个用户控件被放置在 MainPage.xaml[MyUserControl1] 中。如何通过 MyUserControl1 访问 WebView？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:55:47.790

你能和我们分享你的代码吗？这个答案完全基于我对您如何创建用户控件的假设:)

```
public class MyUserControl1: UserControl
{
    private WebView wb = new WebView();

    public MyControl()
    {
        this.Controls.Add( wb);
    }

    public WebView GetWebView
    {
        get { return wb; }
    }
 } 
```

# scala - akka调度程序的延迟如何？

> ID：11416172
> 
> 赞同：4
> 
> 时间：2012-07-10T14:59:51.200
> 
> 标签：scala, timestamp, akka

我写了一个演员，每 5 毫秒使用一个调度程序为一个字段分配一个时间戳。

在测试中，我发现结果`(System.currentTimeMillis() - timeField)`至少是 35

如果我使用`scheduleAtFixedRate()`Executors.scheduledThreadPool 中的方法，结果是正确的。

那么调度程序延迟是否有最小值？

答：默认滴答持续时间为 100 毫秒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T17:52:57.907

ScheduledThreadPoolExecutor 使用 System.nanoTime()： http: [//fuseyism.com/classpath/doc/java/util/concurrent/ScheduledThreadPoolExecutor-source.html](http://fuseyism.com/classpath/doc/java/util/concurrent/ScheduledThreadPoolExecutor-source.html)

在此处查看比较： [System.currentTimeMillis vs System.nanoTime](https://stackoverflow.com/questions/351565/system-currenttimemillis-vs-system-nanotime)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T14:17:53.550

Akka 有相当广泛的[文档](http://doc.akka.io/docs/akka/2.0.2/scala/scheduler.html)。

这是一段摘录：

“Akka 使用的 Scheduler 的默认实现是基于 Netty HashedWheelTimer。它不会在确切的时间执行任务，而是在每个滴答时，它会运行所有过期的东西。默认 Scheduler 的准确性可以由“ticks-per-wheel”和“tick-duration”配置属性。有关更多信息，请参阅：HashedWheelTimers。”

# javascript - Internet Explorer 跨域请求无法正常工作，并且 MS 没有给出错误推理

> ID：11416175
> 
> 赞同：0
> 
> 时间：2012-07-10T15:00:03.643
> 
> 标签：javascript, ajax, internet-explorer, cross-domain

**我根据下面的 Microsoft 标准在请求中添加了变量 var openRetVal 和 var sendRetVal...**

我正在处理一个 ajax 请求，和往常一样，IE 是一个难以使用的样本。我发现我可以做一个 XDR，而不是做一个 AJAX 请求。我在 chrome 中的代码可以工作，所以我知道目标服务器正在工作，并且在成功的请求下会发生假设发生的事情。下面是我的 XDR 代码段。

```
if ($.browser.msie && window.XDomainRequest) {
            var xdr = new XDomainRequest();
            //var webstring = location.protocol +"//"+ location.host +"/" + WEBSERVICE_URL + "/test";
            //WEBSERVICE_URL = "webservices/FormDesigner.svc";
            var webstring = WEBSERVICE_URL + "/test";
            var openRetVal = xdr.open("GET", webstring);  //added this var as it supposidly gets a return value from the function call.
            xdr.onload = function () {
                var JSON = $.parseJSON(xdr.responseText);
                if (JSON == null || typeof (JSON) == 'undefined') {
                    JSON = $.parseJSON(data.firstChild.textContent); 
                }
                //below is my onsuccess call which is called by both successes for IE and NON-IE processes allowing all stuff to be piped into 1 call.
                ajax_success(JSON);
            };
            xdr.ontimeout = function () {
                alert("XDR Error.  Timeout");
            }
            xdr.onerror = function () {
                alert("XDR Error.  Unable to do a Cross Domain Server Request.");
            };
            var sentRetVal = xdr.send();  //added this var as the function is suppose to return success or error as per microsoft.

        } 
```

它总是返回 onerror，这自然不是我的目标。出于测试目的，我暂时在同一域内 ping 一些东西，这就是为什么没有其他东西的原因。就像我说的，到目前为止，它可以与其他浏览器一起使用......是否存在我不知道的不正确格式？此测试请求也没有提交任何数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T16:01:54.097

如果您**已经在**使用 jQuery，只需将 jQuery 用于**ALL BROWSERS**，那么您在 IE 中应该没有任何问题。

# c# - 另一个面板中的面板

> ID：11416178
> 
> 赞同：0
> 
> 时间：2012-07-10T15:00:07.560
> 
> 标签：c#, winforms, panel

我有 2 个面板。每个都从相同的位置开始。（比如说 10,10）并且具有相同的大小。

我有 2 个按钮。一个显示第一个面板，另一个显示第二个面板。

**我的代码是：**

```
private void button1_Click(object sender, EventArgs e)
        {
            panel1.Visible = true;
            panel2.Visible = false;
        }

        private void button2_Click(object sender, EventArgs e)
        {
            panel1.Visible = false;
            panel2.Visible = true;
        } 
```

当我按下按钮一个时，第一个面板会出现，但是当我按下按钮 2 时，第二个面板不会出现。面板的可见属性最初是错误的..

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T15:04:30.450

确保 Panel2 不是 Panel1 的子窗口。

# javascript - Javascript中的自定义整数

> ID：11416187
> 
> 赞同：0
> 
> 时间：2012-07-10T15:00:33.183
> 
> 标签：javascript, jquery, math

我正在使用具有 2 个精度点的十进制数（即 1.38）。我想根据以下内容对数字进行四舍五入：

1）如果第二个精度点大于等于8（1.38或1.39），则将其四舍五入为1.4，否则不改变。

我怎样才能在 Javascript 中做到这一点。toFixed 效果不佳，因为它将 1.75 舍入到 1.8，这不是我想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T15:09:49.797

这是一种相当笨拙的方法：

```
var round = function(n) {
    var h = (n * 100) % 10;
    return h >= 8
        ? n + (10 - h) * .01
        : n;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-20T03:13:00.870

这是一个快速的方法：

```
function customRound(n){
  var r = (((n+.02)*10)>>>0)/10;
  return r>n?r:n;
}

console.log(customRound(1.38));// 1.4
console.log(customRound(1.37999999999));// 1.37999999999 
```

玩得开心~

# lightbox - rightjs 灯箱图片大小错误

> ID：11416188
> 
> 赞同：0
> 
> 时间：2012-07-10T15:00:33.577
> 
> 标签：lightbox, rightjs

这是问题的一个活生生的例子 - [http://marksportfolio.herokuapp.com/folio/](http://marksportfolio.herokuapp.com/folio/)

当 rightjs 灯箱加载时，它会将所有图像加载到它的最小尺寸默认正方形中并覆盖图像尺寸。现在起初我认为这是我的 css 造成的，我使用的是修改 img 标签的 flex 网格。所以我禁用了所有的css，但它仍然加载在那个小方块中，我已经为任何有类似问题的人阅读了互联网，但什么也没找到。

每个图像链接所做的只是插入 rel="lightbox"

帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:18:52.297

看了一圈，发现rightjs变成了lovely.io，找到了与lightboxjs等价的zoom形式。

[http://lovely.io/packages/zoom](http://lovely.io/packages/zoom)

# mysql - MySQL LEFT JOIN 重复结果

> ID：11416190
> 
> 赞同：7
> 
> 时间：2012-07-10T15:00:35.650
> 
> 标签：mysql, sql, left-join

我在实现一个`project`可以属于多个的模块时遇到问题`categories`。示例：项目“PHP Programmer”属于类别：编程、PHP。

假设以下查询（*选择属于类别 1,3,11 的项目*）：

```
SELECT projects.* FROM projects 
    LEFT JOIN pojects_category on projects.id = pojects_category.project_id 
    WHERE pojects_category.category_id IN (1,3,11) and projects.id='94'` 
```

我得到一个**相同的项目返回两次**，因为表中有**2 个**匹配=`project_category``project_id``94`

表`projects_category`架构：

```
CREATE TABLE IF NOT EXISTS `pojects_category` (
  `project_id` int(10) NOT NULL,
  `category_id` int(10) NOT NULL,
  KEY `category_id` (`category_id`),
  KEY `project_id` (`project_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

INSERT INTO `pojects_category` (`project_id`, `category_id`) VALUES
(94, 3),
(94, 1); 
```

我错过了什么吗？

**解决方案**：使用`GROUP BY`或`DISTINCT`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T15:08:00.880

不，这很好。这只是您想使用`DISTINCT`关键字删除重复项的极少数情况之一。

在这种情况下，查询的逻辑是正确的这一事实证明了这一点，即使它返回不止一行。很多时候可以看到`DISTINCT`实际查询逻辑错误时的用法。

边注：

*   您在`WHERE`子句中使用的表引用上的任何过滤器，除了`IS NULL/IS NOT NULL`会使`LEFT JOIN`同一个表引用上的任何过滤器转向 an `INNER JOIN`，至于最终结果集行为。（见：[https](https://stackoverflow.com/a/15483895/1291428) ://stackoverflow.com/a/15483895/1291428 ）
*   您不应该使用`GROUP BY`来模拟 的效果`DISTINCT`，原因有两个：

    1/ 这不是目的。的作用之一`GROUP BY`是消除重复，但其主要目的是根据一组标准对行进行分组，以便对其应用一些分析计算/操作。

    2/`GROUP BY`还有`ORDER BY`结果（在mysql中），这不一定是你想要的，在这种情况下会减慢执行速度。请确保正确使用引擎提供的内容，从前向兼容性的角度来看，这总是更好。（预计您包含的内容实际上不是）

问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:04:16.237

您还可以将其重写为“IN”以绕过重复项：

```
SELECT projects.*
FROM projects      
where projects.id in (select project_id
                      from projects_category
                      WHERE pojects_category.category_id IN (1,3,11)
                     ) and
      projects.id='94' 
```

当您使用连接过滤记录时，“in”可防止形成重复。

# c# - 将 MatchCollection 转换为字符串数组

> ID：11416191
> 
> 赞同：90
> 
> 时间：2012-07-10T15:00:35.943
> 
> 标签：c#, arrays, regex

有没有比这更好的方法将 MatchCollection 转换为字符串数组？

```
MatchCollection mc = Regex.Matches(strText, @"\b[A-Za-z-']+\b");
string[] strArray = new string[mc.Count];
for (int i = 0; i < mc.Count;i++ )
{
    strArray[i] = mc[i].Groups[0].Value;
} 
```

PS：`mc.CopyTo(strArray,0)`抛出异常：

> 源数组中的至少一个元素无法转换为目标数组类型。

* * *

## 回答 #1

> 赞同：185
> 
> 时间：2012-07-10T15:02:42.170

尝试：

```
var arr = Regex.Matches(strText, @"\b[A-Za-z-']+\b")
    .Cast<Match>()
    .Select(m => m.Value)
    .ToArray(); 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-07-10T15:28:18.980

Dave Bish 的回答很好并且工作正常。

值得注意的是，替换`Cast<Match>()`为`OfType<Match>()`会加快速度。

代码将变为：

```
var arr = Regex.Matches(strText, @"\b[A-Za-z-']+\b")
    .OfType<Match>()
    .Select(m => m.Groups[0].Value)
    .ToArray(); 
```

结果完全相同（并以完全相同的方式解决了 OP 的问题），但对于大字符串来说它更快。

测试代码：

```
// put it in a console application
static void Test()
{
    Stopwatch sw = new Stopwatch();
    StringBuilder sb = new StringBuilder();
    string strText = "this will become a very long string after my code has done appending it to the stringbuilder ";

    Enumerable.Range(1, 100000).ToList().ForEach(i => sb.Append(strText));
    strText = sb.ToString();

    sw.Start();
    var arr = Regex.Matches(strText, @"\b[A-Za-z-']+\b")
              .OfType<Match>()
              .Select(m => m.Groups[0].Value)
              .ToArray();
    sw.Stop();

    Console.WriteLine("OfType: " + sw.ElapsedMilliseconds.ToString());
    sw.Reset();

    sw.Start();
    var arr2 = Regex.Matches(strText, @"\b[A-Za-z-']+\b")
              .Cast<Match>()
              .Select(m => m.Groups[0].Value)
              .ToArray();
    sw.Stop();
    Console.WriteLine("Cast: " + sw.ElapsedMilliseconds.ToString());
} 
```

输出如下：

```
OfType: 6540
Cast: 8743 
```

因此对于*很长的*字符串 Cast() 比较慢。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-05-14T13:55:45.497

I ran the exact same benchmark that Alex has posted and found that sometimes `Cast` was faster and sometimes `OfType` was faster, but the difference between both was negligible. However, while ugly, the for loop is consistently faster than both of the other two.

```
Stopwatch sw = new Stopwatch();
StringBuilder sb = new StringBuilder();
string strText = "this will become a very long string after my code has done appending it to the stringbuilder ";
Enumerable.Range(1, 100000).ToList().ForEach(i => sb.Append(strText));
strText = sb.ToString();

//First two benchmarks

sw.Start();
MatchCollection mc = Regex.Matches(strText, @"\b[A-Za-z-']+\b");
var matches = new string[mc.Count];
for (int i = 0; i < matches.Length; i++)
{
    matches[i] = mc[i].ToString();
}
sw.Stop(); 
```

Results:

```
OfType: 3462
Cast: 3499
For: 2650 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-14T18:23:12.980

One could also make use of this extension method to deal with the annoyance of `MatchCollection` not being generic. Not that it's a big deal, but this is almost certainly more performant than `OfType` or `Cast`, because it's just enumerating, which both of those also have to do.

(Side note: I wonder if it would be possible for the .NET team to make `MatchCollection` inherit generic versions of `ICollection` and `IEnumerable` in the future? Then we wouldn't need this extra step to immediately have LINQ transforms available).

```
public static IEnumerable<Match> ToEnumerable(this MatchCollection mc)
{
    if (mc != null) {
        foreach (Match m in mc)
            yield return m;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-22T02:01:04.227

考虑以下代码...

```
var emailAddress = "joe@sad.com; joe@happy.com; joe@elated.com";
List<string> emails = new List<string>();
emails = Regex.Matches(emailAddress, @"([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})")
                .Cast<Match>()
                .Select(m => m.Groups[0].Value)
                .ToList(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-15T15:16:04.347

If you need a recursive capture, eg. **Tokenizing Math Equations:**

```
//INPUT (I need this tokenized to do math)
    string sTests = "(1234+5678)/ (56.78-   1234   )";

    Regex splitter = new Regex(@"([\d,\.]+|\D)+");
    Match match = splitter.Match(sTests.Replace(" ", ""));
    string[] captures = (from capture in match.Groups.Cast<Group>().Last().Captures.Cast<Capture>()
                         select capture.Value).ToArray(); 
```

...because you need to go after the last captures in the last group.

# javascript - 回调未在页面加载时触发 - jquery easy tab 插件

> ID：11416192
> 
> 赞同：0
> 
> 时间：2012-07-10T15:00:38.240
> 
> 标签：javascript, jquery, jquery-plugins

我将这个插件用于标签 - [https://github.com/JangoSteve/jQuery-EasyTabs](https://github.com/JangoSteve/jQuery-EasyTabs)

反过来，它使用此插件进行哈希更改 - [http://benalman.com/projects/jquery-hashchange-plugin/](http://benalman.com/projects/jquery-hashchange-plugin/)

我已经通过执行以下操作进行了设置 -

```
$('#tab-container').easytabs().bind('easytabs:after', function(evt, tab, panel, data) {
   alert('DO SOMETHING!')
}); 
```

这会导致在单击选项卡时调用警报。

我遇到的问题是回调没有在页面加载时触发。

如果我访问 - www.mitesite.com#mytabid - 插件将读取 url 中的哈希值并设置正确的选项卡，但不会触发回调。

知道我应该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:04:58.523

`onhashchange`您可以在页面加载时触发事件。这将确保绑定到您的 hashchange 事件的任何函数都将在页面加载时触发。

```
$(document).ready(function () {
    $(window).trigger("onhashchange");
}); 
```

# xml - 未知格式的打包数据，任何人都可以识别它吗？

> ID：11416197
> 
> 赞同：0
> 
> 时间：2012-07-10T15:00:50.033
> 
> 标签：xml, json, plaintext, identify, data-formats

我正在调试别人提供给我的程序，但没有它的源代码。它只是向我吐出以下一串打包数据：

```
FAILEDTOBUILD 002[AlternateOption [plain text data] re=[OPTION=YES] newValue[OPTION=NO]] 
```

我希望它是 XML，但除非 XML 格式在过去 2 小时内发生了巨大变化，否则这是另一回事。任何人都可以帮我识别它吗？

我做了一些谷歌搜索，但这就像试图从岩石中挤出水一样。

该软件是一个罐子，所以我试图反编译它以查看它在做什么。返回值以纯文本字符串的形式出现。

这真的是一种格式吗？出于保密原因，已对返回的确切数据进行了修改，但我已按其确切顺序保留了所有非字母数字字符，包括诸如“re”字段具有等号和 newValue 字段没有等号之类的差异。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:34:08.577

java 组件遇到某种错误。当它这样做时，它会返回一个纯文本字符串。所以它只是纯文本。

# servlets - Tar文件中的Jetty服务文件

> ID：11416199
> 
> 赞同：0
> 
> 时间：2012-07-10T15:00:56.817
> 
> 标签：servlets, jetty, tar

鉴于 Jetty/Tomcat 已配置并能够提供 tar 文件，是否有内置机制或可用插件来提供 tar 中的文件？

IE

http://localhost:8080/app/file.tar 将正常返回整个 tar 文件

但类似的东西

http:/localhost:8080/app/file.tar/path/to/file/in/archive.txt 将从存档中返回文件。

如果需要，我可以编写一个 servlet 来处理这个问题，只是想确保我没有遗漏一些已经存在的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:39:23.267

最终创建了一个利用[Apache Commons VFS](http://commons.apache.org/vfs/filesystems.html "Apache Commons VFS")的 Servlet，它实现了一个虚拟文件系统并且完全符合我的需要。

IE：

```
http://localhost:8080/files/file1.tar!/1/somefile.jar!/index.txt 
```

返回文件系统上 /files/file1.tar 中的 /1/somefile.jar 中的文件 index.txt。

# iphone - NSDateFormatter 返回空值 dateFromString: iPhone?

> ID：11416200
> 
> 赞同：1
> 
> 时间：2012-07-10T15:00:57.023
> 
> 标签：iphone, ios, nsstring, nsdate, nsdateformatter

我在 iPhone 应用程序中工作。我正在从网络服务响应中获取日期。当我收到我存储在 NSArray 中的日期时。当我将 NSString 更改为 NSDate 时，日期返回 null。这是我的代码，

```
 for (int k = 0; k<[dateArray count]; k++)  
 {
    NSString *dateStr = [dateArray objectAtIndex:k];
    NSDateFormatter *dateFormatter1 = [[NSDateFormatter alloc] init];
    [dateFormatter1 setDateFormat:@"yyyy-MM-dd hh:mm:ss"]; 
    [dateFormatter1 setFormatterBehavior:NSDateFormatterBehaviorDefault];
    [dateFormatter1 setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
    NSLog(@"DateStr : %@", dateStr); //Console Output is : 2012-07-09 13:50:07 [For 42nd and above values]
    NSDate *date = [dateFormatter1 dateFromString:dateStr];
    NSLog(@"Date : %@", date); // Console Output is : (null) [For 42nd and above values]
 } 
```

dateArray 包含来自 Webservice 的 43 个日期值。`NSDateFormatter returns correct NSDate from NSString til 41nd values`。_ 当`42nd string passing to the NSDateFormatter the output returns "(null)".`我尝试当日期再次返回 null 时，我再次转换 dateFromString`"(null)"`发生错误。谁能帮我解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T15:26:49.530

尝试使用大写字母“HH”而不是“hh”。hh 是 1-12 小时，HH 是 0-23 小时 - 也许 13:00 正在抛出它？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T15:29:22.413

尝试在`NSDateFormatter`任何地方使用相同的方法，并通过`forin`循环进行迭代。您正在以现在使用的方式泄漏大量内存。我不能保证这会解决你的问题，但至少它会清理你的代码。

```
NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
[dateFormatter setDateFormat:@"yyyy-MM-dd hh:mm:ss"]; 

for (NSString *dateString in dateArray) {
    NSLog (@"Date %@ and index %i: NSDate representation is %@", dateString, [dateArray indexOfObject:dateString], [dateFormatter dateFromString:dateString]);
} 
```

如果这不能解决您的问题，请记住以下几点：

1.  不要`timeZone`在您的日期格式化程序上设置。字符串不包含时区，因此它不会做任何事情。
2.  也不要设置`formatterBehavior`。它是自动的`NSDateFormatterBehaviorDefault`。
3.  确保前 41 个日期和其他日期没有本质上的不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-04T11:38:10.943

您使用“yyyy-MM-dd hh:mm:ss”格式而不是“yyyy-MM-dd HH:mm:ss”

hh 是 1-12 小时，HH 是 0-23 小时。您的小时数采用 0-23 格式。

[dateFormatter1 setDateFormat:@"yyyy-MM-dd HH:mm:ss"];

# javascript - 必须触发两次点击事件才能在 ipad 上触发全屏模式

> ID：11416203
> 
> 赞同：2
> 
> 时间：2012-07-10T15:01:03.887
> 
> 标签：javascript, jquery, ipad

我有一个调用以下代码的点击事件：

```
$('#video-overlay').on('click', '.media-thumb', function(e){
        $('.video-file')[0].play();
    $('.video-file')[0].webkitEnterFullscreen();
    e.preventDefault();
    }); 
```

在我的 chrome 浏览器中这工作正常，但在 ipad 上我必须单击 .media-thumb 两次才能真正进入全屏模式，在 ipad2 v:iOS5 上进行测试。谁能提供一些关于我如何解决这个问题的信息，以便将 .play() 和 .webkitFullscreen() 一起调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:04:58.777

您是否尝试过使用 touchstart？

```
$('#video-overlay').on('click touchstart', '.media-thumb', function(e) {
    e.preventDefault();
    $('.video-file')[0].play();
    $('.video-file')[0].webkitEnterFullscreen();
}); 
```

# sql - sql用自定义顺序查询一张表

> ID：11416207
> 
> 赞同：1
> 
> 时间：2012-07-10T15:01:13.337
> 
> 标签：sql, phpmyadmin

我有一张表，我希望在一个查询中按几个不同的条件/优先级排序。

例如，一个名为“用户”的表带有 5 列：

```
userID
userName
age
gender
birthday 
```

在年龄，性别和生日可能为空的情况下，我希望查询将按优先顺序返回表行：

```
1\. Age, gender and birthday is not null,
2\. Age, gender is not null,
3\. Age is not null,
4\. Then the rest of the rows 
```

我查看了 UNION、UNION ALL 和 ORDER BY IF，但没有达到结果（可能我查询错误）。

希望有人可以帮助我解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T15:14:20.270

你的问题不清楚每个优先级需要满足的条件，但你会从中得到这个想法：

```
select   *
from     mytable
order by 
         case when age is null and gender is null and birthday is null then 1
              when age is null and gender is null and birthday is not null then 2
              when age is null and gender is not null and birthday is not null then 3
              when age is not null and gender is not null and birthday is not null then 4
              else 5
         end 
```

编辑：我想我读错了你的问题，因为缺少格式，我把 NULL 和 NOT NULL 混在一起了，但你明白了......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:16:31.023

这是一个简单的命令问题：

```
order by (case when age is not null and birthday is not null and gender is not null then 1
               when age is not null and birthday is not null then 2
               when age is not null then 3
               else 4
          end) 
```

您也可以在之后添加其他排序条件（例如名称或其他）。

例如，在每种情况下按年龄降序排序：

```
order by (case when age is not null and birthday is not null and gender is not null then 1
               when age is not null and birthday is not null then 2
               when age is not null then 3
               else 4
          end),
         age desc 
```

# pdfsharp - Migradoc 和 PDfSharp 在文本之后添加行直到页面末尾

> ID：11416210
> 
> 赞同：2
> 
> 时间：2012-07-10T15:01:16.320
> 
> 标签：pdfsharp, migradoc

到目前为止我有这个：

```
Table table = CreateBaseTable();
Row row = table.AddRow();
    {
        row.Cells[0].AddParagraph().AddFormattedText(text, bold);
    } 
```

我想在这段文字之后有一行，例如：

这是一个标题---------------------------------------------------------- -------------------------------------------------- 但没有点缀。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:24:28.923

如果您想在文本右侧添加一行：使用带有一行的制表位作为填充（这就是您的问题中的样子，但我认为这不是您想要的）。

如果要在文本下方设置行：设置表格单元格（或表格行）的边框。在您的情况下，将底部边框宽度设置为所需宽度，将其他边框（顶部、左侧、右侧）的宽度设置为 0。

对于该行，尝试如下代码：

```
row.Borders.Bottom.Visible = true;
row.Borders.Bottom.Width = 1; 
```

编辑：这是制表位的示例代码：

```
paragraph = section.AddParagraph("Hello, World!");
paragraph.Format.TabStops.ClearAll();
paragraph.Format.TabStops.AddTabStop("16cm", TabAlignment.Right, TabLeader.Lines);
paragraph.AddTab(); 
```

在指出该选项之前，我应该对此进行测试。这条线是在底部绘制的，所以它看起来像
标题***_ _* __ *_* __ *_* __ *_* __ *_* __ *_* ____**

TabLeader 还提供破折号（您不想要）或 MiddleDots（您也没有要求）。所以恐怕没有简单的解决方案可以得到你想要的东西。

# jquery - 通过css形成顶部带有标签的水平布局

> ID：11416218
> 
> 赞同：-3
> 
> 时间：2012-07-10T15:01:42.667
> 
> 标签：jquery, css, forms, select, label

我想要一个表单，其中有几个水平选择控件（它们彼此相邻）布局，并且在每个选择的顶部都有标签。

像这样：

[带有标签的内联表单字段位于顶部](https://stackoverflow.com/questions/3041615/inline-form-fields-with-labels-placed-on-top)

如何使用 css 和 dform 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:06:56.257

我认为最好只使用无序列表。

将 LI 元素浮动到左侧并给它们一些margin-right 以分隔它们。

您需要在 UL 上使用 clearfixer 元素或其父元素以确保浮动有效。

```
<ul>

<li><label>Label #1</label>
<select>
<option></option>
</select>
</li>

<li><label>Label #1</label>
<select>
<option></option>
</select>
</li>

<li><label>Label #1</label>
<select>
<option></option>
</select>
</li>

</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T07:43:05.873

这是使用 dform 的答案。谢谢你的反对票。

跨度的 css... 显示：内联块标签和选择... 显示：块

`$('#myform').dform({ "action" : "dform.html", "method" : "get", "html" : [
{ "type": "span", "html": { "type": "select", "name": "Country", "caption": "Country", "class": "countries", "options": { "": "All", "USA": { "html": "USA", "class": "active" }, "Germany": { "html": "Germany", "class": "active" }, "France": { "html": "France", "class": "active" } }, "selected": null } } ] });`

# python - 如何更改我的 Django 项目正在使用的 Python？

> ID：11416219
> 
> 赞同：2
> 
> 时间：2012-07-10T15:01:43.230
> 
> 标签：python, django, mod-wsgi

我的服务器中安装了 2 个版本。我使用 virtualenv 安装 Python 2.7。

我正在使用 WSGI 来部署我的项目。

```
WSGIPythonPath /home/ENV/lib/python2.7/site-packages
WSGIScriptAlias / /var/www/html/my_project/wsgi.py 
```

我的 http.conf 就是这样。

python -V 给出

Python 2.7.3

但是在我的项目调试窗口中，它说 Django 使用的是 2.6.8。我哪里错了？

更新：这是我的 wsgi 文件

```
import os
import sys
sys.path.append('/var/www/html')
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "myproject.settings")
from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

Python 版本：2.6.8 Python 路径：
['/home/ENV/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg', '/home/ENV/lib/python2.7/site-packages/pip-1.1-py2 .7.egg', '/home/ENV/lib/python2.7/site-packages/Django-1.4-py2.7.egg', '/home/ENV/lib/python2.7/site-packages', '/usr/lib/python2.6/site-packages/pip-1.1-py2.6.egg', '/usr/lib/python2.6/site-packages/django_transmeta-0.6.7-py2.6.egg ', '/usr/lib/python2.6/site-packages/ipython-0.13-py2.6.egg', '/usr/lib/python2.6/site-packages/virtualenv-1.7.2-py2.6 .egg'、'/usr/lib64/python26.zip'、'/usr/lib64/python2.6'、'/usr/lib64/python2.6/plat-linux2'、'/usr/lib64/python2.6 /lib-tk'、'/usr/lib64/python2.6/lib-old'、'/usr/lib64/python2.6/lib-dynload'、'/usr/lib64/python2.6/site-packages' , '/usr/lib64/python2.6/site-packages/gtk-2.0', '/usr/lib/python2.6/site-packages', '/usr/lib/python2.6/site-packages/setuptools-0.6 c11-py2.6.egg-info', '/var/www/html']

在我的 httpd 的 error_log 中：

[2012 年 7 月 10 日星期二 20:51:29] [错误] python_init：Python 版本不匹配，预期为“2.6.7”，找到“2.6.8”。[2012 年 7 月 10 日星期二 20:51:29] [错误] python_init：找到 Python 可执行文件'/usr/bin/python'。[2012 年 7 月 10 日星期二 20:51:29] [错误] python_init: Python 路径正在使用 '/usr/lib64/python26.zip:/usr/lib64/python2.6/:/usr/lib64/python2.6/plat -linux2:/usr/lib64/python2.6/lib-tk:/usr/lib64/python2.6/lib-old:/usr/lib64/python2.6/lib-dynload'。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T15:11:50.860

如果我正确理解了这个问题，那么您正在尝试将应用程序的 wsgi 脚本配置为使用特定的 virtualenv。

如果是这种情况，请查看 modwsgi 的文档： [http ://code.google.com/p/modwsgi/wiki/VirtualEnvironments](http://code.google.com/p/modwsgi/wiki/VirtualEnvironments)

我会为你尝试 TLDR，但它在那个链接上写得很好，我无法做到公正。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T01:14:31.023

mod_wsgi 模块必须针对您要使用的特定 Python 主要/次要版本进行编译。您不能使用 WSGIPythonHome 强制针对 Python 2.6 编译的 mod_wsgi 使用使用 Python 2.7 构建的 Python 虚拟环境。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T21:13:18.113

如果您使用[Buildout](http://www.buildout.org/ "扩建")，您可以直接在配置文件中控制使用哪个版本的 python。

# javascript - 在 Samsung Galaxy Tab 2.0 7" 上查看浏览器 console.log 输出

> ID：11416223
> 
> 赞同：3
> 
> 时间：2012-07-10T15:02:02.283
> 
> 标签：javascript, android, adb

我觉得我一定做错了什么。在大多数 Android 设备上，我可以在浏览器窗口中使用`adb logcat`. 但是，三星 Galaxy Tab 2.0 7" 似乎并非如此。在此设备上，我根本看不到来自浏览器的任何日志，即使我没有过滤。我有什么为了记录该输出要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T10:14:19.243

我没有找到通过 adb logcat 查看日志消息的方法，但您始终可以使用 Weinre。这是您插入/注入的脚本，可让您从浏览器远程获取 WebKit 开发工具的轻量级版本。它不具备一切，但您可以获得控制台、检查和其他一些工具。在此处下载[http://people.apache.org/~pmuellr/weinre/docs/latest/](http://people.apache.org/~pmuellr/weinre/docs/latest/)或使用托管版本[http://debug.phonegap.com/](http://debug.phonegap.com/)

# extjs - 传递给 extjs 网格时转义引号

> ID：11416229
> 
> 赞同：1
> 
> 时间：2012-07-10T15:02:08.157
> 
> 标签：extjs, tcl

我将以下内容传递给我的 extjs 网格。如果变量中有任何引号，我该如何转义。

```
append rval "'description':'$description',"
append rval "'short_description':'$shortDescription'," 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:15:46.467

好吧，您可以使用[regsub](http://www.tcl.tk/man/tcl/TclCmd/regsub.htm)替换所有单引号，例如

```
regsub -all "\'" $rval "\\\'" rval  
regsub -all "\"" $rval "\\\"" rval 
```

第一行将在 rval 变量中的每个撇号前面放置一个反斜杠。第二行将在每个双引号前放置一个反斜杠。您也必须在 regsub 命令中转义撇号、双引号和反斜杠本身，因此 regsub 的最后一个参数中的三重反斜杠

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:00:18.820

[`string map`](http://www.tcl.tk/man/tcl8.5/TclCmd/string.htm#M39)是最简单的答案：

```
% string map {' \\'} aaa'bbb'ccc
aaa\'bbb\'ccc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T18:15:04.470

您可以使用简单的 javaScript 替换方法，像这样使用它并使用以下正则表达式。

```
var tempvariable = yourJsonString.replace(/(')/g, "&#39;"); 
```

将此临时变量传递给您的网格，它将正常工作。

# css - 使用带有类名的媒体查询来更改网站宽度

> ID：11416233
> 
> 赞同：8
> 
> 时间：2012-07-10T15:02:24.883
> 
> 标签：css, media-queries

我有一个移动应用程序，我想全屏炸毁。Twitter Bootstrap 为我提供了手机、平板电脑和所有这些信息的大小。我想要一个 CSS 类来处理所有不同类型的大小。我正在寻找这样的东西：

```
@media (max-width: 480px) classname

@media (max-width: 767px) classname 
```

ETC

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-10T16:46:28.073

像这样的东西？

```
@media (max-width: 767px) {
  .classname {
    width: 80%;
  }
}

@media (max-width: 480px) {
  .classname {
    width:100%;
  }
} 
```

请注意，具有较小的媒体查询`max-width`设置在最后，以允许它覆盖具有较大的媒体查询`max-width`。

有关使用媒体查询的更多信息，请参阅[本文](http://webdesignerwall.com/tutorials/css3-media-queries)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-23T10:25:41.430

你也可以根据html元素和id来改变css。`max-width`作品从 0 到最大**给定**宽度，或者如果`min-width`给出则从给定`min-width`到`max-width`。

例如：

```
@media screen and (max-width: 767px) {
    #YourElementId{
        width:100%;
    }
    YourElementName {
        width:80%;
    }
} 
```

上面的 css 将从 0 到媒体屏幕的**最大**给定**宽度工作。**

另一方面，`min-width`例如，适用于超过给定宽度

```
@media screen and (min-width: 768px) {
    #YourElementID {
        width:80%; 
    }
    body {
        width:75%; 
    }
} 
```

这仅在媒体屏幕**宽度**大于**768px**时才有效。

# ruby-on-rails-3.2 - 当前和以前页面的链接不起作用

> ID：11416235
> 
> 赞同：0
> 
> 时间：2012-07-10T15:02:32.390
> 
> 标签：ruby-on-rails-3.2

# 错误

```
undefined method `current' for nil:NilClass
Extracted source (around line #28): 
```

# 代码

```
 25: </tr>
 26: <% end %>
 27: </table>
 28: <%= link_to 'Previous page',{:page => @post_pages.current.previous } if    @post_pages.current.previous %>
 29: <%= link_to 'Next page',{:page => @post_pages.current.next } if @post_pages.current.next  %>
 30: <br /> 
```

# 控制器代码

```
 # GET /posts
  # GET /Posts.json
  def index
    @posts = Post.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render :json => @posts }
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:41:06.997

正如上述评论者之一所提到的，我建议使用 will paginate gem。

然后你会像这样实现它（这些是 gem 页面中的示例......）：

```
## perform a paginated query:
@posts = Post.paginate(:page => params[:page])

# or, use an explicit "per page" limit:
Post.paginate(:page => params[:page], :per_page => 30)

## render page links in the view:
<%= will_paginate @posts %> 
```

在您的具体示例中，它将是这样的：

```
def index
  @posts = Post.paginate(:page => params[:page])

  respond_to do |format|
    format.html # index.html.erb
    format.json { render :json => @posts }
  end
end 
```

你的观点会更简单：

```
<%= will_paginate @posts %> 
```

您需要处理一些细节，但这会使事情变得容易得多。

这里有 2 个 Railscasts 可以给你一些背景知识：

[http://railscasts.com/episodes/174-pagination-with-ajax/](http://railscasts.com/episodes/174-pagination-with-ajax/)

[http://railscasts.com/episodes/240-search-sort-paginate-with-ajax](http://railscasts.com/episodes/240-search-sort-paginate-with-ajax)

# xcode - Xcode4 上的 Phonegap Build 与 Phonegap？配置.xml？

> ID：11416237
> 
> 赞同：3
> 
> 时间：2012-07-10T15:02:40.383
> 
> 标签：xcode, cordova

拥有一个使用我已经使用[http://build.phonegap.com](http://build.phonegap.com)服务编译和测试的 phonegap 构建的应用程序。

我发现它与 XCode 的构建方式与在 Phonegap 网站上的构建方式不同。

在我的 config.xml 文件中找到的 phonegap 网站图标和启动屏幕上找到并使用。

在 XCode 上，应用程序最终使用默认图标和启动页面。

我的 config.xml 也使用

```
<access origin="*" /> 
```

这是我的应用程序工作所必需的。在 Phonegap 网站上这可以工作，但在 XCode 上它看不到并且应用程序不起作用。

带有 XCode 的 phonegap 不使用 config.xml 吗？如果不是，我该如何添加...

```
<access origin="*" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T17:11:54.157

更新自 CORDOVA 2.3.0 - 2013 年 2 月 24 日

IOS phonegap/cordova 使用 XCode 构建现在需要一个 config.xml

有关更多信息，请参阅[http://shazronatadobe.wordpress.com/tag/cordova-plist/](http://shazronatadobe.wordpress.com/tag/cordova-plist/)

* * *

如果在CORDOVA 2.3.0下使用任何东西，旧答案仍然相关

我现在 90% 确定没有使用 config.xml 文件。使用 XCode，您可以使用 GUI 轻松选择图标和启动页面。

而不是使用...

```
<access origin="*" /> 
```

在 config.xml 文件中。查看 Cordova.plist 的文件结构。当您单击它时，您会在主页中看到几个项目。查找名为“ExternalHosts”的选项，您必须在其中添加 * 作为项目。

像这样...

![在此处输入图像描述](../Images/007798387c6a5f732f143000d3546784.png)

在[http://samcroft.co.uk/2011/updated-loading-data-in-phonegap-using-jquery-1-5/找到的信息](http://samcroft.co.uk/2011/updated-loading-data-in-phonegap-using-jquery-1-5/)

# java - 如何在一定时间后重复调用函数

> ID：11416242
> 
> 赞同：7
> 
> 时间：2012-07-10T15:02:54.210
> 
> 标签：java

我想制作一个在一定时间后调用的函数。此外，这应该在相同的时间后重复。例如，该函数可能每 60 秒调用一次。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T15:04:19.287

使用`java.util.Timer.scheduleAtFixedRate()`and`java.util.TimerTask`是一种可能的解决方案：

```
Timer t = new Timer();

t.scheduleAtFixedRate(
    new TimerTask()
    {
        public void run()
        {
            System.out.println("hello");
        }
    },
    0,      // run first occurrence immediatetly
    2000)); // run every two seconds 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-10T15:15:46.853

为了重复调用一个方法，您需要使用某种形式的在后台运行的线程。我建议使用[ScheduledThreadPoolExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html)：

```
ScheduledThreadPoolExecutor exec = new ScheduledThreadPoolExecutor(1);
exec.scheduleAtFixedRate(new Runnable() {
           public void run() {
                // code to execute repeatedly
           }
       }, 0, 60, TimeUnit.SECONDS); // execute every 60 seconds 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-15T10:44:04.960

Swing Timer 也是实现重复函数调用的好主意。

```
Timer t = new Timer(0, null);

t.addActionListener(new ActionListener() {

    @Override
    public void actionPerformed(ActionEvent e) {
          //do something
    }
});

t.setRepeats(true);
t.setDelay(1000); //1 sec
t.start(); 
```

# windows - 适用于 OSX 和 Windows 的备份软件

> ID：11416243
> 
> 赞同：1
> 
> 时间：2012-07-10T15:02:58.313
> 
> 标签：windows, macos, backup

我正在寻找可以在 mac 和 windows 机器上使用的当前备份软件。我发现了很多旧工具。CrashPlan 看起来真的很像我要找的东西，但是硬盘备份是不可读的格式。这就是关键。我正在寻找一些东西，在那里我可以从 windows 和 osx 对我的网络中的硬盘进行人类可读的备份！

我在网上搜索了很多，但我找不到任何有前途的软件，它有一个吸引人的用户界面并且可以像我想要的那样工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:52:01.367

这对您来说可能是一个很好的解决方案：[http ://www.digistor.com/REWIND-Archiving-Software-for-PC-and-MAC](http://www.digistor.com/REWIND-Archiving-Software-for-PC-and-MAC)

具有漂亮 UI 的 PC 和 Mac 存档软件。文件系统在两个平台上都可供人类读取，并且它们还包括一个直接从存档启动的恢复实用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:21:45.333

通过“人类可读”，我假设您的意思是文件没有被压缩或加密，而只是被复制到它们在备份计算机上的相同目录层次结构中。如果是这样，这个要求与大多数人认为好的政策不一致，这就是为什么你找不到这样做的产品。

**压缩：**通常您需要多个备份副本。如果在您进行备份时磁盘出现故障怎么办？在这种情况下，备份和原始磁盘都值得怀疑？这就是为什么您需要至少 2 个备份副本的原因，如果用户发现他们丢弃了错误的文件并希望返回几天的历史记录，则可能需要更多备份副本。您不想为存储所有未压缩数据的硬盘空间付费，因此每个备份方案都包含某种压缩。大多数还执行增量备份，以便只备份每天的更改。这样可以节省空间和备份时间。聪明的甚至可以识别您网络中的重复文件，并且在使用它们的任何地方都只包含对它们的一个引用。

**加密：**您的备份是信息的金矿。整个网络的所有数据都存在于一个地方。您通常需要额外的保护层来确保只有受信任的用户才能读取它，因此大多数备份程序都会对其备份进行加密。

压缩和爆发的需求意味着大多数商业备份程序都不会在硬盘驱动器上为您提供无需帮助即可读取的文件。然而，好的那些确实提供了一个很好的用户界面来浏览你从他们的工具中备份的内容，并根据需要提取单个文件或备份。

如果您真正想要的是在备份计算机上保留目录的精确副本，您可能需要寻找磁盘或文件“同步”而不是备份的选项。我发现[了这篇](http://mac-sync-software-review.toptenreviews.com/)Mac 同步软件的评论。

[对于它的价值，我对Retrospect](http://www.retrospect.com/)的备份相当幸运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-18T10:00:36.357

你可以使用 Duplicati ( [https://www.duplicati.com](https://www.duplicati.com) ) 它是开源的，你仍然需要 duplicati 来读取备份，但至少它适用于 Windows 和 Mac。

# facebook - 黑莓 Facebook 权限接受按钮

> ID：11416244
> 
> 赞同：0
> 
> 时间：2012-07-10T15:03:04.310
> 
> 标签：facebook, blackberry

首先，对不起我的英语不好，我会尽量说清楚。我正在开发一个黑莓应用程序，它可以在 facebook 上发帖，创建相册，在相册中发布图片，并将图片发布到朋友的墙上......所有这些都很好，但我有一个大问题：

当用户第一次进入应用程序时，通过手机登录，然后将他带到一个设置的权限页面，该页面只有我的应用程序的名称、一个取消按钮和一个接受按钮。现在，当您尝试单击它们时，什么也没有发生；完全没有，就好像他们根本不存在一样。

代码

```
private final static String[] PERMISSION = Facebook.Permissions.ALL_PERMISSIONS;

private final static String NEXT_URL = "http://www.facebook.com/connect/login_success.html";
private final static String APPLICATION_ID = "my_id";
private final static String APPLICATION_SECRET = "my_secret";

public static ApplicationSettings as = new ApplicationSettings(NEXT_URL,
        APPLICATION_ID, APPLICATION_SECRET, PERMISSION);

public static Facebook fb = Facebook.getInstance(as); 
```

* * *

进一步的调查

* * *

使用一个名为 WireShark 的程序，我捕获了正在请求的 URL，并放置了 display=wap，但即使将其更改为 display=touch，问题仍然存在。使用显示页面或弹出窗口会使黑莓无法使用该网站。同样，我将此 URL 粘贴到 firefox 并使用 Firebug，我意识到这两个按钮在 onClick HTML 字段中没有方法，并且请求中没有 JavaScript。我在最新版本上使用 E. Baskoro 制作的 facebook sdk

* * *

facebook 开发者页面有一个关于这个问题的错误报告（不是我的）

* * *

[https://developers.facebook.com/bugs/320629631363983](https://developers.facebook.com/bugs/320629631363983)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:40:20.897

所以，正如我在上面的帖子中提到的，这是一个 facebook 错误。除非他们解决它，否则没有可能的解决方案。至于我，我最终做的是放置一个警报，告诉用户从他们的计算机授予应用程序的权限，并提供将 facebook 应用程序 URL 发送到他们的电子邮件的选项。一旦 facebook 错误被修复，我将改变这种行为。

# telerik - Telerik RadTabStrip + OWASP 安全异常

> ID：11416246
> 
> 赞同：0
> 
> 时间：2012-07-10T15:03:06.107
> 
> 标签：telerik, owasp

这里有一个加重的问题，任何帮助都会很棒。基本上，我们的一位客户加强了他们的安全性并实施了 OWASP (owasp.org)。现在，我们现有的一些网站功能在回发时返回了安全违规。我将主要问题之一缩小到 Telerik RadTabStrip。一旦包含 RadTabStrip 条带的页面回发，OWASP 就会返回安全违规。不幸的是，我们无法访问日志，并且客户端给了我们一些片段，但它们似乎与 SQL 注入相关，并且还与视图状态进行模式匹配。

然后我用一个 RadTabStrip 和 4 个 RadTab/RadPageViews 创建了一个空白页面，每个都包含一个字母和一个可以回传的按钮。单击按钮后，引发了安全违规。所以我有大约 99.99% 的肯定是，它返回的是 RadTab 发回的误报。然后我修改了我们现有的页面之一以实现 JQuery 选项卡而不是 RadTabs。这很成功，但问题是这将是一个有点冗长的大修，并且希望那里的人可能对我有一个想法。现在请注意，客户端拒绝在 OWASP 安全性中做出任何例外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:27:40.887

“OWASP”是什么意思？

我们有数百个项目。我猜你的意思是 .NET 的 ESAPI？

如果他们不打算调整 ESAPI 的配置，那么最好的前进方式很可能是查看您是否可以向 Telerik 拨打支持电话，并查看是否可以修改 RadTabStrip 以在 ESAPI 范围内执行此操作。

或者，您可以剪切并粘贴异常，看看我们是否可以弄清楚控件正在做什么，看看是否有可能起作用的调整？

谢谢安德鲁

（真的很懒散） ESAPI for PHP Lead，OWASP Developer Guide 2013 Lead，OWASP Top 10 2007 Lead and General Agent of chaos

# clipboard - 如何在 Vim 中将 yank 映射到操作系统的剪贴板？

> ID：11416253
> 
> 赞同：5
> 
> 时间：2012-07-10T15:03:18.377
> 
> 标签：clipboard, vim, yank

> **可能重复：**
> [vim：将选择复制到 OS X 剪贴板](https://stackoverflow.com/questions/677986/vim-copy-selection-to-os-x-clipboard)

虽然我成功地*`paste`从剪贴板*( ) 进行映射，但( `nmap <leader>p "*p`) 的相同操作似乎不起作用。实际上，它在 Vim 的剪贴板中拉出。`yank``nmap <leader>y "*y`

知道如何正确地做到这一点吗？我知道，`clipboard=unnamed`但我可能会保留旧的 yank/paste vim 的命令。

**编辑**：我的需求似乎有些混乱。

该命令`"*y` **有效**。所以`+clipboard`我的 Vim 环境中的东西没有错。什么不起作用是映射的东西。

我想添加如下内容：

```
nmap <leader>y "*y # Doesn't work as expected. It copies only in Vim's clipboard, ie I have to type `p` to paste the copied content instead of `"*p`.
nmap <leader>p "*p # Works as expected. 
```

我更清楚了吗？

第二次**编辑**：以防万一，因为我不知道什么可以帮助你帮助我，`vim --version`我的机器上有渲染：[https ://gist.github.com/3090385](https://gist.github.com/3090385)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T15:26:17.723

如果您在拉动之前进行视觉选择，那么您`vmap`不需要`nmap`. 否则， yank 是一个普通命令，并期待一个运动命令。

# java - 什么会加载 rt.jar 中的类？

> ID：11416254
> 
> 赞同：1
> 
> 时间：2012-07-10T15:03:18.863
> 
> 标签：java

我想知道是否可以指定一个替代 rt.jar 来加载而不是 rt.jar。所以我的问题是，什么会加载 rt.jar，是否可以指定要加载的替代 jar 而不是 rt.jar？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:07:01.923

您可能想看看[Java Extension Mechanism](http://docs.oracle.com/javase/tutorial/ext/index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:06:01.987

rt.jar 是 JRE 的核心运行时 jar。RT 代表运行时！

为什么要覆盖它？详细解释..

# ios - 如何停止将图像保存到手机相册？

> ID：11416256
> 
> 赞同：0
> 
> 时间：2012-07-10T15:03:21.047
> 
> 标签：ios

我使用 UIImageWriteToSavedPhotosAlbum 将照片保存到相册。但是如果照片太大，完成保存需要很长时间。所以我需要一个可以取消保存过程的取消按钮。但似乎没有办法做到这一点。有人知道该怎么做吗？

UIImage *tempImage = [[UIImage alloc] initWithContentsOfFile:pPath]; UIImageWriteToSavedPhotosAlbum(tempImage, self, @selector(finishedSavingImage:didFinishSavingWithError:contextInfo:), [文件保留]);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:35:10.773

就像您指出的那样，似乎没有记录在案的方法可以取消它。由于保存是在后台进行的，您真的需要一种方法来取消它吗？

您可以假设它最终会成功并让用户立即继续在您的应用程序中执行其他操作，可能同时在某处显示 UIActivityIndi​​cator 以便用户知道正在后台进行保存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:13:32.740

您应该在保存之前检查图像大小。

# apache-flex - 安装 AIR 应用程序时出错

> ID：11416258
> 
> 赞同：0
> 
> 时间：2012-07-10T15:03:24.087
> 
> 标签：apache-flex, air

我现在无法安装我的 AIR 应用程序；我认为这是因为我正在卸载它并在卸载中途退出。这是我目前看到的错误：

```
Bootstrapper begin with version 2.6.0.19120 on Win x86  
Installed runtime (3.3.0.3650) located at c:\Program Files (x86)\Common Files\Adobe AIR  
Launching subprocess with commandline "Adobe AIR Application Installer.exe" "C:\Users\a210693\AppData\Local\Temp\AIR7495.tmp\Transporter"  
Application Installer begin with version 3.3.0.3650 on Windows 7 x86  
Commandline is: C:\Users\a210693\AppData\Local\Temp\AIR7495.tmp\Transporter  
Installed runtime (3.3.0.3650) located at c:\Program Files (x86)\Common Files\Adobe AIR  
Validating app in folder C:\Users\a210693\AppData\Local\Temp\AIR7495.tmp\Transporter  
Application signature verified  
Unpackaging/validation complete  
No app located for appID 'transporter' and pubID ''  
Starting app installation to C:\Program Files (x86). Installing app transporter version 0.46 using the source file at file:///C:/Users/a210693/AppData/Local/Temp/AIR7495.tmp/Transporter  
Installing msi at C:\Users\a210693\AppData\Local\Temp\AIR7495.tmp\Transporter\setup.msi with guid {0ABBADCF-B729-C4A4-8D6E-2D2954077F1F}  

**Error occurred during msi install operation; beginning rollback:** [ErrorEvent type="error" bubbles=false cancelable=false eventPhase=2 text="1603" errorID=0]  
Rolling back install of C:\Users\a210693\AppData\Local\Temp\AIR7495.tmp\Transporter\setup.msi  
Rollback complete  
**Got an unexpected fatal error while in stateInstalling:** [ErrorEvent type="error" bubbles=false cancelable=false eventPhase=2 text="1603" errorID=0]  
Launching subprocess with commandline c:\Program Files (x86)\Common Files\Adobe AIR\Versions\1.0\Adobe AIR Application Installer -runtime "c:\Program Files (x86)\Common Files" -silent -logToStdout -url -location "C:\Program Files (x86)" -desktopShortcut -programMenu file:///C:/Users/a210693/AppData/Local/Temp/AIR7495.tmp/Transporter  
Relaunching with elevation  

Application Installer begin with version 3.3.0.3650 on Windows 7 x86  
Commandline is: -stdio \\.\pipe\AIR_4588_0 -runtime "c:\Program Files (x86)\Common Files" -silent -logToStdout -url -location "C:\Program Files (x86)" -desktopShortcut -programMenu file:///C:/Users/a210693/AppData/Local/Temp/AIR7495.tmp/Transporter  
Installed runtime (3.3.0.3650) located at c:\Program Files (x86)\Common Files\Adobe AIR
Validating app in folder C:\Users\a210693\AppData\Local\Temp\AIR7495.tmp\Transporter  
Application signature verified  
Unpackaging/validation complete  
No app located for appID 'transporter' and pubID ''  
Starting silent app installation to C:\Program Files (x86). Installing app transporter version 0.46 using the source file at file:///C:/Users/a210693/AppData/Local/Temp/AIR7495.tmp/Transporter  
Installing msi at C:\Users\a210693\AppData\Local\Temp\AIR7495.tmp\Transporter\setup.msi with guid {0ABBADCF-B729-C4A4-8D6E-2D2954077F1F}  
Error occurred during msi install operation; beginning rollback: [ErrorEvent type="error" bubbles=false cancelable=false eventPhase=2 text="1603" errorID=0]  
Rolling back install of C:\Users\a210693\AppData\Local\Temp\AIR7495.tmp\Transporter\setup.msi  
Rollback complete  
Got an unexpected fatal error while in stateInstalling: [ErrorEvent type="error" bubbles=false cancelable=false eventPhase=2 text="1603" errorID=0]  
Elevated install failed: error 0 1603  
Application Installer end with exit code 7  
Subprocess Application Installer failed (7)  
Bootstrapper end with exit code 7 
```

我已经浏览并删除了我的 AIR 应用程序的目录，包括 appDate 本地存储中的一个目录。我在 64 位机器上使用 Windows 7。

我不想重新映像我的计算机。任何有用的想法都会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T16:55:36.697

1.  在此处使用 Microsoft Cleanup 删除/卸载 Adob​​e AIR：http: [//support.microsoft.com/mats/Program_Install_and_Uninstall/en-us](http://support.microsoft.com/mats/Program_Install_and_Uninstall/en-us)
2.  在此处下载最新版本的 Adob​​e AIR：http: [//get.adobe.com/air/](http://get.adobe.com/air/)

# java - 使用两种模式 - 一种用于警告及以上。一个适用于以下所有内容

> ID：11416259
> 
> 赞同：4
> 
> 时间：2012-07-10T15:03:27.943
> 
> 标签：java, logging, log4j

*如何设置 log4j 以根据消息的日志记录级别使用两种不同的模式？*

例如，现在我正在使用适用于所有级别的以下内容：

```
log4j.appender.stdout.layout.ConversionPattern=%-5p %d{HH\:mm\:ss} - %m%n 
```

我想做的是对**WARN 及以上**的级别使用不同的模式。如：

```
%-5p %d{HH\:mm\:ss} - [%L:%C] %m%n 
```

输出发生警告或错误的行号和类。在发生警告或错误的情况下，提取调用者信息的额外成本是值得的。

这是可行的吗？

这是我的完整 log4j.properties 文件：

```
log4j.rootLogger=WARN, stdout1, stdout2
log4j.category.my.package=DEBUG

log4j.appender.stdout1=org.apache.log4j.ConsoleAppender
log4j.appender.stdout1.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout1.layout.ConversionPattern=%-5p %d{HH\:mm\:ss} - %m%n

log4j.appender.stdout2=org.apache.log4j.ConsoleAppender
log4j.appender.stdout2.threshold=WARN
log4j.appender.stdout2.target=System.err
log4j.appender.stdout2.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout2.layout.ConversionPattern=%-5p %d{HH\:mm\:ss} - [%t] [%L:%C] %m%n 
```

**编辑**

`threshold`看起来是我需要记录所有级别`WARN`和更高级别的东西。是否有类似的属性可以配置其他 appender 以记录所有级别`INFO` **和更低**级别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T07:40:49.573

这里我使用的属性：

```
log4j.rootLogger=WARN, CONSOLE, FICLOG

####### CONSOLE is set to be a ConsoleAppender.
log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender
####### CONSOLE uses PatternLayout.
log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout
log4j.appender.CONSOLE.layout.ConversionPattern=%-5r %-5p[%C{1}.%M]:%m%n

####### FICLOG is set to be a FileAppender à la racine du projet
log4j.appender.FICLOG=org.apache.log4j.RollingFileAppender
####### FIC uses PatternLayout.
####### ex:log4j.appender.dest2.File=${java.home}/log4j.log
log4j.appender.FICLOG.File=Appli_Info.log
log4j.appender.FICLOG.threshold=WARN
log4j.appender.FICLOG.MaxFileSize=5MB
log4j.appender.FICLOG.MaxBackupIndex=8
log4j.appender.FICLOG.layout=org.apache.log4j.PatternLayout
log4j.appender.FICLOG.layout.ConversionPattern=%d %-8r [%t] %-5p [%C{1}.%M] %x - %m%n
####### log4j.appender.FICLOG.layout.ConversionPattern=%d{HH:mm:ss} %-8r [%t] %-5p [%C{1}.%M] %x - %m%n 
```

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T17:16:01.523

在这里找到答案：[Logging error to stderr and debug, info to stdout with log4j](https://stackoverflow.com/questions/8489551/logging-error-to-stderr-and-debug-info-to-stdout-with-log4j)

我最终不得不使用 xml 文件而不是属性文件来获得我想要的结果。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
<log4j:configuration>
    <!-- STDERR - WARN and above -->
    <appender name="stderr" class="org.apache.log4j.ConsoleAppender">
        <param name="threshold" value="warn" />
        <param name="target" value="System.err"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%-5p %d{HH\:mm\:ss} - [%t][%L:%C] %m%n" />
        </layout>
    </appender>
    <!-- STDINFO - DEBUG & INFO -->
    <appender name="stdout" class="org.apache.log4j.ConsoleAppender">
        <param name="threshold" value="debug" />
        <param name="target" value="System.out"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%-5p %d{HH\:mm\:ss} - %m%n" />
        </layout>
        <filter class="org.apache.log4j.varia.LevelRangeFilter">
            <param name="LevelMin" value="debug" />
            <param name="LevelMax" value="info" />
        </filter>
    </appender>
    <category name="my.project.package">
        <!-- Display DEBUG and above for all log messages in My Project -->
        <param name="level" value="debug" />
    </category>
    <root>
        <!-- Global Setting - Display only WARN messages
             This surpresses other libraries from display DEBUG & INFO messages
             But the Category setting above for your project will override this 
             and display DEBUG & INFO messages (using STDOUT) as well as 
             WARN and above (using STDERR) -->
        <priority value="warn"></priority>
        <appender-ref ref="stderr" />
        <appender-ref ref="stdout" />
    </root>
</log4j:configuration> 
```

# javascript - 给定它的 id，我如何检查一个元素是下拉列表元素还是文本输入元素？

> ID：11416261
> 
> 赞同：25
> 
> 时间：2012-07-10T15:03:36.773
> 
> 标签：javascript, html

在 Javascript 中，给定`id`元素的 （`String`格式），我如何检查`id`元素的 是指下拉列表元素还是文本输入元素？

`true`如果`id`引用下拉列表 ( `<select>`) 元素或文本输入元素，则该函数应返回，`false`否则。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-10T15:05:41.140

尝试使用： `document.getElementById('idNameGoesHere').tagName`

所以函数可能是：

```
function isSelectOrTextField(idName) {
    var element = document.getElementById(idName);
    if(element.tagName === 'SELECT') {return true;}
    if(element.tagName === 'INPUT' && element.type === 'text') {return true;}
    return false;
} 
```

你也可以扩展它来检查`<textarea>`。

**编辑：** 或者选择 jbabey 的[答案](https://stackoverflow.com/a/11416455/206614)，因为它正在使用`nodeName`并且格式更好。

显然[`nodeName`有更广泛的浏览器支持。](http://www.quirksmode.org/dom/w3c_core.html#t23)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-07-10T15:05:27.487

如果您已经包含 jquery，则可以使用[is 函数](http://api.jquery.com/is/)：

```
$('#myid').is('input, select') 
```

或许

```
$('#myid').is('input, textarea, select') 
```

如果你还想包括 textarea

或者

```
$('#myid').is('input:not([type="button"]), textarea, select') 
```

（如果它是文本或下拉菜单或不是按钮的输入，则返回 true）。

您拥有[jquery 选择器](http://api.jquery.com/category/selectors/)的全部功能，可以使您的查询适应您的确切需求。

演示： http: [//jsfiddle.net/ELuEJ/](http://jsfiddle.net/ELuEJ/)（尝试更改html）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-10T15:14:09.910

您可以使用 DOM 元素的`nodeName`和`type`属性来确定这一点。不需要外部库。

```
var isSelectOrTextInput = function (element) {
    var nodeName = element.nodeName;

    return nodeName === 'SELECT' || 
        (nodeName === 'INPUT' && 
         element.type.toLowerCase() === 'text');
}; 
```

工作样本：http: [//jsfiddle.net/ytHQD/](http://jsfiddle.net/ytHQD/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T15:08:43.157

```
$('#myId')[0].tagName 
```

您可以检索 dom 元素，然后检查 tagName

# java - android在键盘出现时调整布局

> ID：11416263
> 
> 赞同：10
> 
> 时间：2012-07-10T15:03:39.920
> 
> 标签：java, android

我想在键盘出现时重新定位布局，例如在编辑文本字段时，以便获得焦点字段的可见性。我尝试了 windowSoftInputMode 但我没有任何区别。如何到达？谢谢你。

```
<activity 
            android:name="com.xxxx.projecte1.TabBar_Activity"      
            android:theme="@android:style/Theme.NoTitleBar"
            android:configChanges="keyboardHidden|orientation|screenSize"
            android:windowSoftInputMode="adjustResize"
           /> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-12-09T07:17:29.370

```
 <activity
        android:name=".WActivity"
        android:configChanges="orientation|keyboard|keyboardHidden|screenSize|screenLayout|uiMode"
        android:icon="@drawable/navigation_two"
        android:label="@string/app_name"
        android:screenOrientation="portrait"
        android:theme="@style/appTheme"
        android:windowSoftInputMode="adjustResize" /> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-05-13T13:36:00.977

### 对于其他可能有类似问题的人：

在我的情况下解决它的只是把

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE); 
```

进入我的活动`onCreate`方法。

没有任何 xml 更改，因为这些对我不起作用，但这就像一个魅力一样立即起作用。尽管 xml 解决方案对我来说似乎更好，但即使是相同的参数也不起作用。

分享它，因为我没有在网上找到快速简便的修复方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T15:17:04.997

我相信问题是这条线

`android:configChanges="keyboardHidden|orientation|screenSize"`

在你的代码中。此行告诉`Android`您`Activity`将自行处理这 3 个事件。如果你去掉这条线，我相信你会得到想要的效果。

有关属性，请参见[此处。](http://developer.android.com/reference/android/R.attr.html#configChanges)`configChanges`

# php - 向电子邮件表单添加附件：集成 PHPmailer 以处理附件

> ID：11416275
> 
> 赞同：0
> 
> 时间：2012-07-10T15:04:14.307
> 
> 标签：php, phpmailer

下面是我处理来自 HTML 表单的输入的 PHP 脚本。该脚本运行良好，但在尝试和尝试之后，我无法获得普通的旧 PHP 代码来处理表单中的附件。

在阅读了几天并测试了不同的代码之后，每个人都建议使用预制的应用程序来简化附件。（我选择了 PHPmailer。）

我试图让它工作，但我能找到的只是静态文件的例子：

**PHPmailer 自述文件中的示例：**

> $mail->AddAttachment("c:\temp\js-bak.sql"); // 添加附件
> 
> $mail->AddAttachment("c:/temp/11-10-00.zip");

我的问题是，是否可以使用 HTML 表单中的“文件”选择器附加文件？如果是这样，我可以将 PHPmailer 附件代码集成到我的生产脚本中而无需重新编码整个文件吗？

我需要什么代码来附加表单中的文件？

**我当前的脚本：**

```
<?php

require("phpmailer.inc.php");
$email = new phpmailer;
$uploaddir = 'uploads/';
$uploadfile = $uploaddir . basename($_FILES['userfile']['name']);

if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) {
    $email->AddAttachment($uploadfile);
} else {
    echo "File failed to attach. Maximum size of 5mb\n";    
}

if(isset($_POST['email'])) {

    // EDIT THE 2 LINES BELOW AS REQUIRED
    $email_to = "example@abc.com";
    $email_subject = "IT Request (Support)";  //Email Subject

    function died($error) {
        // your error code can go here
        echo "We are very sorry, but there were error(s) found with the form you submitted. ";
        echo "These errors appear below.<br /><br />";
        echo $error."<br /><br />";
        echo "Please go back and fix these errors.<br /><br />";
        die();
    }

    // validation: expected data already exists
    if(!isset($_POST['name']) ||
    !isset($_POST['datereg']) || 
    !isset($_POST['message']) || 
    !isset($_POST['email'])) {
        died('We are sorry, but there appears to be a problem with the form you submitted.');       
    }

    $name = $_POST['name'];                 //Required
    $request_date = $_POST['datereg'];      //Required
    $email_address = $_POST['email'];       //Required
    $message = $_POST['message'];           //Not required
    $error_message = "";    
    $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
    if(!preg_match($email_exp,$email_address)) {
        $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
    }
    $string_exp = "/^[\$A-Za-z0-9._%-]/";
    if(!preg_match($string_exp,$name)) {
        $error_message .= 'The Name you entered does not appear to be valid.<br />';
    }
    if(!preg_match($string_exp,$request_date)) {
        $error_message .= 'The Request Date you entered does not appear to be valid.<br />';
    } 
    if(!preg_match($string_exp,$message)) {
        $error_message .= 'You must list a description in order to submit the form.<br />';
    }     
    if(strlen($error_message) > 0) {
        died($error_message);
    }
    $email_message = "---IT Request Form Content---\n\n";

    function clean_string($string) {
        $bad = array("content-type","bcc:","to:","cc:","href");
        return str_replace($bad,"",$string);
    }

    //These fields are required per validation so they don't need to be tested.
    $email_message .= "Name: ".clean_string($name)."\n";
    $email_message .= "Email: ".clean_string($email_address)."\n";
    $email_message .= "Date of Request: ".clean_string($request_date)."\n";
    $email_message .= "Description: ".clean_string($message)."\n";  

    // create email headers
    $headers = 'From: '.$email_address."\r\n".
    'Reply-To: '.$email_address."\r\n" .
    'X-Mailer: PHP/' . phpversion();
    @mail($email_to, $email_subject, $email_message, $headers);  
?>

    <!-- include your own success html here -->

    Thank you for submitting an IT Support Request. Your information will be reviewed as soon as possible.
    <META HTTP-EQUIV="refresh" CONTENT="2;URL=http://getsupport/index.html">

<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:09:16.523

`$_FILES`您将在变量中找到临时文件的路径和文件名。看看[文档](http://www.php.net/manual/en/features.file-upload.post-method.php)。

# css - 顶部对齐div的正确方法

> ID：11416276
> 
> 赞同：0
> 
> 时间：2012-07-10T15:04:16.990
> 
> 标签：css, html, alignment

我正在使用以下内容将两张图片并排放置。图片尺寸不同（右边的比左边的高），但我希望它们在顶部对齐，而不是像现在这样在底部对齐。

关于顶部对齐第二个 div 的正确方法有什么建议吗？

谢谢

```
<div style="display: inline-block; margin-right: 10px">
<img src="right-side.jpg" alt="taller image">
</div>

<div style="display: inline-block; margin-right: 10px">
<img src="left-side.jpg" alt="shorter image">
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:07:16.393

一种方法是浮动容器 div，例如：

```
<div style="display:block; float: left; margin-right: 10px">
    <img src="right-side.jpg" alt="taller image" style="height: 150px;">
</div>

<div style="display:block; float:left; margin-right: 10px">
    <img src="left-side.jpg" alt="shorter image" style="height: 50px;">
</div>​ 
```

...在这种情况下您实际上不需要`display: block;`，因为它是该元素的默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:07:37.227

我不会使用内联块，而是将它们都向左浮动。

# windows-7 - 是否有批处理命令可以访问 chrome 中的 url 并全屏播放视频？

> ID：11416279
> 
> 赞同：0
> 
> 时间：2012-07-10T15:04:24.927
> 
> 标签：windows-7, batch-file

这是页面上的常规 swf 播放器，我希望批处理文件全屏显示视频（访问链接后）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:51:02.853

由于批处理无法识别窗口，因此我建议执行此任务，如果可以的话，您应该切换到 JScript/VBscript（可能发送击键）。否则，您可以使用第三方工具，例如 AutoHotKey（Windows 的免费开源实用程序），它能够发送击键并且可以从批处理脚本中轻松使用。

# java - 菱形算法中的伪影

> ID：11416286
> 
> 赞同：1
> 
> 时间：2012-07-10T15:04:45.697
> 
> 标签：java, algorithm, 3d, landscape

![示例图像](../Images/429c6cc3b6ed03aea21881b4b4adc810.png) 这是标准菱形正方形景观生成算法的结果示例（我在这里使用了一个 -[菱形正方形算法](https://stackoverflow.com/questions/2755750/diamond-square-algorithm)）。对算法进行了一些修改，以消除随机高度波动，以明确什么是伪影。看起来这种伪影是迭代中高度不成比例累积的结果，因此首先处理的点（最大正方形和菱形的角）具有较小的高度。可能有一种方法可以纠正这一点..

那么，有谁知道允许修复这个算法的优化（但不是模糊效果，我不想要第二遍优化）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T20:38:40.840

经过一番调查，我找到了一个解决方案——问题实际上在于算法应该在边缘之外取高度值。所以，只需使用虚拟值将地形大小增加 2 倍，由此产生的地形在其上具有完全相等的随机性分布。

# sql-server - 从 hiscore 表创建 hiscore 列表

> ID：11416287
> 
> 赞同：0
> 
> 时间：2012-07-10T15:04:49.800
> 
> 标签：sql-server

我想创建他的核心列表，但我做不到。这是我的 hiscore 表，对于每场比赛，我都会将用户得分写入此表。

这是我的 hiscore 表的样子：

```
id    user_id    user_name    score    entry_date
-----------------------------------------------------------
1      1         tom          500      2012-06-05 14:30:00
2      1         tom          500      2012-06-05 10:25:00
3      2         jim          300      2012-06-05 09:20:00
4      2         jim          500      2012-06-05 09:22:00
5      3         tony         650      2012-06-05 15:45:00 
```

我想获得前 3 个 MAX 分数，但我必须确保它们是否具有相同的分数，然后我应该获得第一次输入的分数（基于`entry_date`列）

返回的查询应该是这样的。

```
1\.  3      tony     650      2012-06-05 15:45:00     <- hi have to be first, because he have top score
2\.  2      jim      500      2012-06-05 09:22:00     <- jim have the same score as tom, but he make that score before tom did so he is in second place
3\.  1      tom      500      2012-06-05 10:25:00     <- tom have 2 entries with the same score, but we only take the one with smallest date 
```

这是我编写的 SQL 查询，但通过该查询，我得到了 hiscore 列表，但它不是按 entry_date 排序的，我不知道如何解决这个问题。

```
SELECT TOP 3
    hiscore.user_id,
    hiscore.user_name,
    MAX(hiscore.score) AS max_score,
FROM
    hiscore
GROUP BY
    hiscore.user_id, hiscore.user_name
ORDER BY
    max_score DESC 
```

## 更新：关于分数总和问题

关于分数总和，我需要在查询原始 hiscore 表时返回这个的查询：

```
user_id   user_name    score
--------------------------------
1          Tom        1000
2          Jim         800
3          Tony        650 
```

如果有两个用户的得分和相同，则排名较高的用户是 hiscore 表中条目较少的用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:31:02.113

试试这个 ：

```
;with cte as 
(Select id ,userID,score,entry_date,row_number() over(partition by userID
 order by score desc,entry_date) as row_num from Score
)
Select * from cte where row_num=1 ORDER BY Score DESC,entry_date 

// sum of score  for individual user 
Select  UserID,sum(Score) from Score
group by UserID 
```

结果在[SqlFiddle](http://sqlfiddle.com/#!3/6417f/1/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:09:56.143

**编辑：**这第一个查询是一个谎言，不会工作！:)，假设 sql 2005+ 使用第二个

只需将 EntryDate 添加到您的订单中

```
SELECT TOP 3 
    hiscore.user_id, 
    hiscore.user_name, 
    MAX(hiscore.score) AS max_score, 
FROM 
    hiscore 
GROUP BY 
    hiscore.user_id, hiscore.user_name 
ORDER BY 
    max_score DESC, entry_date DESC 
```

编辑：啊，我什至没有看到这个组——算了，等一下！

这个：P

```
SELECT * FROM (SELECT
    hiscore.user_id,
    hiscore.user_name,
    hiscore.score,
    hiscore.entry_date,
    ROW_NUMBER() OVER (PARTITION BY User_id ORDER BY Score DESC, entry_date) as scoreNo
FROM 
    hiscore 
) as highs WHERE ScoreNo = 1 ORDER BY Score DESC, entry_date 
```

假设 SQL 2005+

编辑：

为了获得按分数排序的最佳分数，然后按条目数，查询有点简单：

```
SELECT user_id, user_name, SUM(score) as Score from hiscore
GROUP BY user_id, user_name
ORDER BY sum(score) DESC, count(score) 
```

这将为您提供按“分数”总和降序排序的分数，然后按条目数升序排序，这应该会给你你想要的

# c - 为什么 printf(char[]) 会产生警告，而 printf("asdf") 不会

> ID：11416289
> 
> 赞同：5
> 
> 时间：2012-07-10T15:04:55.240
> 
> 标签：c, gcc, printf

> **可能重复：**
> [警告：格式不是字符串文字，也没有格式参数](https://stackoverflow.com/questions/4419293/warning-format-not-a-string-literal-and-no-format-arguments)

我有一个非常简单的问题：为什么当我`char[] s = "hi"; printf(s)`发出警告时：“警告：格式不是字符串文字并且没有格式参数”，同时`printf("aa")`没有。

我已经阅读了 char 数组和字符串文字（一个 is`const char const*`和另一个 is `char*`）之间的区别，但来自`printf()`签名：

[http://www.gnu.org/software/libc/manual/html_node/Formatted-Output-Functions.html#Formatted-Output-Functions](http://www.gnu.org/software/libc/manual/html_node/Formatted-Output-Functions.html#Formatted-Output-Functions)

我看到它适用于任何类型。所以我的问题是为什么`printf("aaa")`不发出任何警告（它是否以某种方式检查文字是否为 const，同时数组不是）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T15:08:40.437

如今，GNU 编译器和许多其他编译器确实`printf`会根据提供的参数检查 -family 的格式字符串。编译器警告它不能对非文字字符串执行此操作。

使用非文字格式字符串被认为是一种不好的做法。使用您无法控制的格式字符串会更糟。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T15:11:11.017

原因是大约 10 到 15 年前，人们假设在“s”有用户提供的输入时调用 printf(s) 是安全的，导致了一堆安全问题。许多编译器为此添加了警告以避免这些问题。如果您只想打印出一个字符串，请改用 puts()。如果您不能绝对确定要发送到 printf 的字符串不包含 '%' 字符，则应使用 printf("%s", s);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T15:07:52.500

我敢打赌，在第二种情况下，编译器会看到字符串中没有格式，因此并不危险：

```
/* "aa" is not dangerous, so do not display a warning */
printf("aa") 
```

在第一种情况下，编译器可能无法看到格式字符串的值，因此无法对其进行验证：

```
/* the compiler doesn't know the content of the memory region pointed by `s`, so
   he can't determine if it's dangerous or not. Then display a warning */
printf(s) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T15:10:59.513

**免责声明：**我不知道这是否是警告*的*原因，但这是*一个*原因。

由于参数的数量`prinrf`取决于转换说明符的数量，因此*不*使用字符串文字作为格式字符串是非常罕见的（即，可能是错误）。此外，如果格式字符串不是文字，它确实来自其他地方——例如用户或文件输入。在这种情况下，错误（或恶意）输入可能会使您的程序崩溃，或者更糟的是，注入代码（即安全漏洞）。

在任何情况下，如果你想打印一些不是文字的东西，并且没有格式参数，那么你很可能正在寻找`puts`，而不是`printf`无论如何。（恕我直言，`puts`是 C 库中使用最少的一个函数。你*见过*使用它的“hello, world”吗？）

# matlab - Matlab 将图形打印到 eps 一致地切割轴标签

> ID：11416290
> 
> 赞同：3
> 
> 时间：2012-07-10T15:04:56.853
> 
> 标签：matlab, plot

我正在尝试制作 Matlab，7.10.0.499（R2010a），使用 eps 写出一个图形，`print`但无论我将图形设置为何种纸张尺寸，它都会不断裁剪轴标签，除非我将其设为 A3。

这是一个 png 来说明问题（尽管我知道 png 来自不同的渲染管道）。

![在此处输入图像描述](../Images/1372746a102955d79a0777c8089d1836.png)

生成此图的代码是：

```
 figure, 
set(gcf, 'renderer', 'painters');

loglog(p_m_tt, p_fa_tt, 'k-', 'LineWidth', 2); hold on;
loglog(p_m_oo, p_fa_oo, 'k--', 'LineWidth', 2); hold on;
loglog(p_m_ot, p_fa_ot, 'k-.', 'LineWidth', 3); hold on;
fontSize = 9;

l = legend('Cam1-Cam1', 'Cam2-Cam2', 'Cam2-Cam1', ...
    'Location', 'NorthEast');

fontSize = 20;
xlabel('$P_{fa}$', 'fontsize', fontSize);
ylabel('$P_{m}$', 'fontsize', fontSize);

set(gca, 'XMinorTick', 'off', 'YMinorTick', 'off', 'YGrid', 'on', 'XGrid', 'on');
set(gcf, 'PaperPositionMode', 'auto');
set(gca, 'XTick', [0.00001 0.0001 0.001 0.01 0.1 1]);
set(gca, 'MinorGridLineStyle', 'none');

set(gca, 'FontSize', fontSize);
set(gcf, 'defaultAxesFontName', 'Times New Roman');

axis square;

X = 13;
Y = 13;
xMargin = 0.25;             %# left/right margins from page borders
yMargin = 0.25;             %# bottom/top margins from page borders
xSize = X - 2*xMargin;      %# figure size on paper (widht & height)
ySize = Y - 2*yMargin; 

set(gcf, 'PaperUnits', 'centimeters');
set(gcf, 'PaperSize', [X Y]);
set(gcf, 'PaperPosition', [0 0 xSize ySize]);
print('-depsc2', f); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:07:53.070

Use the `-loose` option with print so that matlab doesn't crop it. See the helpfile on print for details.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:00:29.787

我拿了你的代码并运行它（当然，替换变量以绘制虚拟数据）并在 illustrator 中加载 eps，结果很好。你用的是哪个版本的matlab？

另外，为了以防万一，我只是稍微修改了代码，因为它之前不会运行，因为没有定义变量“f”，我包含了代码和我得到的示例：

```
f=figure;
set(gcf, 'renderer', 'painters'); 

p_m_tt=10e-4*0:0.001:1;
p_m_oo=p_m_tt;
p_m_ot=p_m_oo;
p_fa_tt=rand(size(p_m_tt));
p_fa_oo=rand(size(p_m_tt));
p_fa_ot=rand(size(p_m_tt));
loglog(p_m_tt, p_fa_tt, 'k-', 'LineWidth', 2); hold on; 
loglog(p_m_oo, p_fa_oo, 'k--', 'LineWidth', 2); hold on; 
loglog(p_m_ot, p_fa_ot, 'k-.', 'LineWidth', 3); hold on; 

l = legend('Cam1-Cam1', 'Cam2-Cam2', 'Cam2-Cam1', ... 
    'Location', 'NorthEast'); 

fontSize = 20; 
xlabel('$P_{fa}$', 'fontsize', fontSize); 
ylabel('$P_{m}$', 'fontsize', fontSize); 

set(gca, 'XMinorTick', 'off', 'YMinorTick', 'off', 'YGrid', 'on', 'XGrid', 'on'); 
set(gcf, 'PaperPositionMode', 'auto'); 
set(gca, 'XTick', [0.00001 0.0001 0.001 0.01 0.1 1]); 
set(gca, 'MinorGridLineStyle', 'none'); 

set(gca, 'FontSize', fontSize); 
set(gcf, 'defaultAxesFontName', 'Times New Roman'); 

axis square; 

X = 13; 
Y = 13; 
xMargin = 0.25;             %# left/right margins from page borders 
yMargin = 0.25;             %# bottom/top margins from page borders 
xSize = X - 2*xMargin;      %# figure size on paper (widht & height) 
ySize = Y - 2*yMargin;  

set(gcf, 'PaperUnits', 'centimeters'); 
set(gcf, 'PaperSize', [X Y]); 
set(gcf, 'PaperPosition', [0 0 xSize ySize]); 
print('-depsc2', f,'figure2.eps'); 
```

![在此处输入图像描述](../Images/8d295ffe2a111dc38379b9af9d510d72.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-13T14:57:01.153

除了修改图形`PaperPosition`，还可以修改轴`position`属性。可以通过以下方式检索当前设置：

```
get(gca, 'position') 
```

答案=

```
0.1300    0.1300    0.7750    0.7750 
```

这些编纂为`[left bottom width height]`. 然后通过增加前两个数字并减少后两个数字来增加边距：

```
set(gca, 'position', [.15, .15, .74, .74]); 
```

# java - JDBC 和 JSP 数据库连接

> ID：11416292
> 
> 赞同：0
> 
> 时间：2012-07-10T15:05:05.147
> 
> 标签：java, sql, jsp, jdbc

嘿，所以我现在有点困惑。我在这里有一些 system.out.print 代码，以便找出问题所在。无论如何，这是我得到的错误，它在涉及实际 SQL 查询的 try/catch 中被捕获。

无论如何，这是我的代码。

JSP 页面

```
<%@ page import="webtest.*" %>
<%@ page import="java.sql.*" %>
<%@ page import="java.io.*" %>
<%@ page import="java.util.*"%>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>

<%String username = request.getParameter("username");
String password = request.getParameter("password");
UserNameCheck unc = new UserNameCheck();
%>
<H1>
<%=unc.LoginResults("select name,password from mattroepracticetable" +
        " where name='"+username+"' and password='"+password+"' ")%>

</H1>
</body>
</html> 
```

这是 UserNameCheck 类

```
package webtest;

import java.sql.*;
public class UserNameCheck{
DWConnect dwc = new DWConnect();

public String LoginResults(String sql){
Statement stmt;
ResultSet rslt;
System.out.println(sql);
String V=null;
try{
    stmt = dwc.conn.createStatement();
    System.out.print(sql);
    rslt = stmt.executeQuery(sql);
    if (rslt.next()){
         V = rslt.getString("username");
        System.out.print("hey");
    }
    else V = "Invalid UserName or Password";
    System.out.print("not hey");
}
catch (Exception e){System.out.print(e);}
return V;
}
} 
```

无论如何，我收到的错误如下

```
select name,password from mattroepracticetable where name='MattRoe' and password='MattRoe' java.sql.SQLException: Invalid column name 
```

但是，如果我直接将 SQL 表达式复制并粘贴到 SQLplus，它就可以正常工作。
我知道你应该在 jspinit 中初始化一个数据库连接，但我也认为你可以这样做。
如果有人能解释我哪里出错了，请告诉我如何通过 jspinit 进行设置，或者我一般如何进行设置，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T15:10:01.570

您的查询是：

```
select
   name,password from mattroepracticetable
where 
   name='"+username+"' and password='"+password+"'" 
```

但是从 ResultSet 你试图阅读：

```
V = rslt.getString( "username" ); 
```

您应该将其更改为：

```
V = rslt.getString( "name" ); 
```

# css - 使用 z-index 对 CSS 进行分层

> ID：11416293
> 
> 赞同：3
> 
> 时间：2012-07-10T15:05:08.177
> 
> 标签：css

我使用纯 CSS3 创建了一个 3 圆维恩图，每个圆都有一个 :hover 事件附加到它。我还有一个指向维恩图中心的箭头图像。我希望箭头在视觉上看起来位于圆圈的顶部，因此我将箭头上的 z-index 设置为高于圆圈。

现在的问题是 :hover 事件现在不会在维恩图的一半上触发，因为箭头图像在顶部，这导致悬停在箭头顶部而不是我希望它结束​​的圆圈. 那么是否有可能使一个元素在视觉上具有高 z-index 而不是以编程方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T15:07:28.943

假设您使用的是支持 WebKit 的浏览器（这不适用于任何版本的 IE 或 Opera），您可以使用`pointer-events: none;`相应地禁用悬停效果。

`.arrow { pointer-events: none; }`

享受和好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T15:28:48.473

CSS

```
 pointer-events:none; 
```

这将适用于所有 webkit 浏览器。但是，如果您希望它适用于所有内容，则可能值得一看 [http://www.vinyfox.com/forwarding-mouse-events-through-layers/](http://www.vinylfox.com/forwarding-mouse-events-through-layers/)

# html - VBA在不同的关键短语之前找到短语的最后一个实例？

> ID：11416301
> 
> 赞同：0
> 
> 时间：2012-07-10T15:05:50.373
> 
> 标签：html, vba, search, excel

我有一个来自 HTML 源代码的大字符串（大约 1,000,000 个字符长）。我正在使用 msinet.ocx 从适当的网站查看文本。我编写了一小段代码，以便找到出现在不同关键短语（“组件附件矩阵”）之前的关键短语（“pkid =”），但它无法正常工作。这是我现在拥有的：

```
workbench = Cells(columnNumber, 1).Value
myURL = "http://beams.us.yazaki.com/Beams/ViewDetails.aspx?topic=document&pkid=" _
& workbench
Dim inet1 As Inet
Dim mypage As String

Set inet1 = New Inet
With inet1
    .Protocol = icHTTP
    .URL = myURL
    mypage = .OpenURL(.URL, icString)
End With

CAMnum = InStr(mypage, "Component Accessory Matrix")
intStart = InStrRev(mypage, "pkid=", CAMnum) + 5
newnum = Mid(mypage, intStart, 6)
Cells(columnNumber, 2).Value = newnum 
```

问题似乎出在`mypage = .OpenURL(.URL, icString)`; 当我运行时`len(mypage)`，它返回大约 100,000 的值，而它应该返回大约一百万的值。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:18:38.800

使用 HTML DOM。

*   将文本加载到 HTML 文档中：

    ```
    Dim html As Object ' MSHTML.HTMLDocument  
    Set html = CreateObject("htmlfile")  
    html.body.innerHTML = "your HTML code here" 
    ```

*   使用[getElementsByTagName](http://msdn.microsoft.com/en-us/library/system.windows.forms.htmldocument.getelementsbytagname.aspx)获取`td`元素集合：

    ```
    Dim tdElements As Object ' MSHTML.IHTMLElementCollection  
    Set tdElements = html.getElementsByTagName("td") 
    ```

*   循环遍历它们，直到找到内部文本为“组件附件矩阵”的那个，然后获取前一个`td`元素的内部文本。

    ```
    Dim tdElement As Object ' MSHTML.IHTMLElement  
    Dim i As Long  
    Dim textToParse As String  
    For i = 1 to tdElements.Count  
      If tdElements.Item(i).innerText = "Component Accessory Matrix" Then  
        ' get previous <td>  
        Set tdElement = tdElements.Item(i - 1)  
        textToParse = tdElement.innerText  
        Exit For  
      End If  
    Next i 
    ```

*   使用传统方法解析字符串

我会拆分结果字符串`=`并获取第二个元素，然后拆分该字符串`"`并获取第一个元素。这给你留下了`300451`.

[如果您需要，这里还有一个示例](http://www.jpsoftwaretech.com/an-exploration-of-ie-browser-methods-part-iii/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:43:36.363

使用`InStr`and `InStrRev`，找到你的字符串，然后向后看。一旦你有了那个位置，从那里向前看，直到我们找到引号字符。最后，使用这些位置来获取字符串

```
pos1 = InStrRev(YourXMLString, "pkid=", InStr(YourXMLString, "Component Accessory Matrix")) + 5 ' length of "pkid="
pos2 = InStr(pos1, YourXMLString, Chr(34)) ' Chr(34)="
FoundString = Mid$(YourXMLString, pos1, pos2 - pos1) 
```

请注意，如果缺少*“组件附件矩阵”*，或者前面没有*“pkid=”*，或者引号不是分隔符，或者*pkid=*和引号之间有更多文本，则代码将失败和/或产生无意义的结果。

# javascript - jQuery中的通用动画队列？

> ID：11416302
> 
> 赞同：2
> 
> 时间：2012-07-10T15:05:52.983
> 
> 标签：javascript, jquery

我正在尝试创建这种滑动效果，但我遇到的唯一问题是排队。

```
$(this).animate({'left' : '0%'}, randTime, function() {
    $(this).animate({'boxShadow' : 'none'});
    setTimeout(function() {
        $container.children('.slice').addClass('noshadow');
        $('body > div:not(#'+container+') .slice').each(function() {
            restartAnimation($(this));
        });             
    $container.children('.content').fadeIn();   
    }, (aLength+100));
}); 
```

上面的容器变量是当前容器。我做了 :not(container) 所以当前容器会继续动画。这一切都在一个具有两个属性的函数中，即容器元素的 ID 和动画将要运行的方式（只是关键字通过 if 语句运行）。然后我将有一个菜单来激活这样的动画：

```
if($(this).attr('name') == 'home') {

    animation('home', 'top');

}
else if { ..... 
```

重新启动动画功能只是将所有其他动画元素重新启动到它们的原始位置，以便它们可以再次运行。现在，问题是，在重新启动功能运行之前存在延迟，因此如果您在延迟时间内单击两个菜单项，您最终会运行重新启动功能，然后一切都会变得很混乱。

我需要一种将动画重新启动到其原始位置的方法，以便它可以再次运行，但不会干扰和重新启动其他动画元素。否则我们最终会陷入巨大的混乱。我已经设置了一个快速的 jsFiddle，所以你可以试试效果。这段代码现在有点乱，我打算等我完成后把所有的东西都整理一下，但是这个排队问题真的让我卡住了。[http://jsfiddle.net/qe7dj/](http://jsfiddle.net/qe7dj/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:04:58.070

解决这个问题的一种方法是在第一个动画完成之前不允许另一个动画开始。

可能有几种方法可以做到这一点，但想到的一种方法是创建一个全局函数队列对象（我将在下面给出解释和代码）。

您需要一个全局变量来跟踪当前正在制作动画的幻灯片数量。

```
var animationsRunning = 0; 
```

每次幻灯片动画开始时，递增上述变量。当幻灯片动画结束时，将其递减。

现在，在开始一个全新的动画（多张幻灯片）之前，检查该变量。如果幻灯片当前正在制作动画，请将动画函数添加到全局函数队列中。如果没有，请继续像往常一样运行动画。

```
if ($(this).attr('name') == 'home') {
    if (animationsRunning < 1) {
        animation('home', 'top');
    }
    else {
        funqueue.push(wrapFunction(animation, this, ['home', 'top']));
    }
}
else if ($(this).attr('name') == 'about') {
    if (animationsRunning < 1) {
        animation('about', 'left');
    }
    else {
        funqueue.push(wrapFunction(animation, this, ['about', 'left']));
    }
}

else if ($(this).attr('name') == 'services') {
    if (animationsRunning < 1) {
        animation('services', 'hslide');
    }
    else {
        funqueue.push(wrapFunction(animation, this, ['services', 'hslide']));
    }
} 
```

每次所有幻灯片完成动画时，检查全局函数队列中是否有任何项目。如果有，执行第一个。

```
if (animationsRunning < 1 && funqueue.length > 0) {
    (funqueue.shift())();
} 
```

与函数队列相关的代码如下所示：

```
// Function wrapping code.
// fn - reference to function.
// context - what you want "this" to be.
// params - array of parameters to pass to function.
var wrapFunction = function(fn, context, params) {
    return function() {
        fn.apply(context, params);
    };
};

// Global function queue
var funqueue = []; 
```

这里的[Stack Overflow问题](https://stackoverflow.com/questions/899102/how-do-i-store-javascript-functions-in-a-queue-for-them-to-be-executed-eventuall)对全局函数队列的概念有很好的解释，这里就不详细解释了。

可以在[此处](http://jsfiddle.net/AlexSchimp/ZxPN9/6/)找到一个有效的 jsfiddle 示例。

编辑：

您可能希望防止等待动画的累积 - 如果是这种情况，您可以在添加最新项目之前简单地清除函数队列。显然，在这种情况下您实际上并不需要队列，但我将其保留为与第一个解决方案兼容。

更新的 jsFiddle 位于[此处](http://jsfiddle.net/AlexSchimp/ZxPN9/8/)。

# java - 添加/删除参数以请求 URL

> ID：11416304
> 
> 赞同：0
> 
> 时间：2012-07-10T15:05:58.487
> 
> 标签：java, url-routing, httprequest, atg, atg-dynamo

我有一个方法

```
public void service(DynamoHttpServletRequest request,DynamoHttpServletResponse response){} 
```

应要求调用。对此请求 url 正在尝试更改其参数。我可以用

```
request.setParameter() 
```

但是我有一个具有两个不同值的键。如果我使用`request.setParameter()` 第二个值将替换第一个值，如下所示。

```
URL-  ***"host/abc.jsp?extra=124&extra=12"***
suppose (extra,"124");
(extra,"12"); 
```

我将值**“124”更改为“abc”，将“12”更改为“cd”**。这里无法将第二个值添加到 url。方法完成后，将 url 获取为 ***“host/abc.jsp” ?extra=cd"***第一个值丢失。请提出一些解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T15:27:28.060

尝试将所有“额外”值放在一个数组中并将其设置为参数：

```
String[] extraArr = {"123","456"};
request.setParameter("extra",extraArr); 
```

# c# - 将多个网格视图导出到 excel 客户端。

> ID：11416305
> 
> 赞同：0
> 
> 时间：2012-07-10T15:06:00.730
> 
> 标签：c#, javascript, asp.net, excel, gridview

我想使用和导出按钮从我的网页导出数据。数据显示在 3 个不同的网格视图中，我想将它们分隔到 3 个不同的工作表“前 1、前 2、前 3”我想使用 c# 和 asp.net 做这个客户端我该怎么做？我可以使用java脚本吗？

这是我的代码

```
using System;
using System.Configuration;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;
using System.Data;
using System.Data.SqlClient;
using System.Collections;
using System.Text;
using System.IO;
using Excel = Microsoft.Office.Interop.Excel;
using System.Reflection;

public partial class _Default : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{
    DataSet dataSet = new DataSet();

    SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["ISALog1ConnectionString"].ToString());

    SqlCommand cmd = new SqlCommand("exec ProxyReport", conn);
    cmd.CommandTimeout = 200;

    SqlDataAdapter ad = new SqlDataAdapter(cmd);
    ad.Fill(dataSet);

    GridView1.DataSource = dataSet.Tables[0];
    GridView1.DataBind();
    GridView2.DataSource = dataSet.Tables[1];
    GridView2.DataBind();
    GridView3.DataSource = dataSet.Tables[2];
    GridView3.DataBind();

}
protected void Button1_Click(object sender, EventArgs e)
{
    string attachment = "attachment; filename=Top 1.xls";
    Response.ClearContent();
    Response.AddHeader("content-disposition", attachment);
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    Response.ContentType = "application/ms-excel";
    StringWriter sw = new StringWriter();
    HtmlTextWriter htw = new HtmlTextWriter(sw);
    GridView1.RenderControl(htw);
    GridView2.RenderControl(htw);
    GridView3.RenderControl(htw);
    Response.Write(sw.ToString());
    Response.End();
}
protected void GetExcel(object sender, EventArgs e)
{
    //3 gridviews each in 3 different worksheets
}

public override void VerifyRenderingInServerForm(Control control)
{

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:34:49.133

我建议为此使用[NPOI](http://npoi.codeplex.com/releases/view/38113)组件，它免费且易于使用。

用法：

```
 public static void GetExcel (DataTable sourceTable1,DataTable sourceTable2, DataTable sourceTable3, string fileName)
    {
        HSSFWorkbook workbook = new HSSFWorkbook();
        MemoryStream memoryStream = new MemoryStream();
        HSSFSheet sheet = workbook.CreateSheet("Sheet1") as HSSFSheet;
        HSSFSheet sheet2 = workbook.CreateSheet("Sheet2") as HSSFSheet;
        HSSFSheet sheet3 = workbook.CreateSheet("Sheet3") as HSSFSheet;
        HSSFRow headerRow = sheet.CreateRow(0) as HSSFRow;

        sheet.SetColumnWidth(0, 7000);
        sheet.SetColumnWidth(1, 7000);
        sheet.SetColumnWidth(2, 7000);
        sheet.SetColumnWidth(3, 10000);
        sheet.SetColumnWidth(4, 7000);

        sheet.DefaultRowHeight = 3000;

        HSSFPalette palette = workbook.GetCustomPalette();
        palette.SetColorAtIndex(HSSFColor.BLUE.index, 41, 113, 153);
        palette.SetColorAtIndex(HSSFColor.GREEN.index, 129, 179, 78);
        palette.SetColorAtIndex(HSSFColor.CORAL.index, 235, 235, 235);
        palette.SetColorAtIndex(HSSFColor.LIGHT_BLUE.index, 233, 241, 245);

        IFont headerFont = workbook.CreateFont();
        headerFont.FontHeightInPoints = 16;
        headerFont.FontName = "Palatino Linotype";
        headerFont.Boldweight = 5;
        headerFont.Color = HSSFColor.WHITE.index;

        IFont font = workbook.CreateFont();
        font.FontHeightInPoints = 14;
        font.FontName = "Palatino Linotype";
        font.Boldweight = 5;
        font.Color = HSSFColor.BLUE.index;

        HSSFCellStyle headerStyle = (HSSFCellStyle)workbook.CreateCellStyle();
        headerStyle.FillForegroundColor = HSSFColor.GREEN.index; ;
        headerStyle.FillPattern = NPOI.SS.UserModel.FillPatternType.SOLID_FOREGROUND;
        headerStyle.BorderBottom = BorderStyle.THIN;
        headerStyle.BottomBorderColor = HSSFColor.WHITE.index;
        headerStyle.BorderRight = BorderStyle.THIN;
        headerStyle.RightBorderColor = HSSFColor.WHITE.index;
        headerStyle.BorderLeft = BorderStyle.THIN;
        headerStyle.LeftBorderColor = HSSFColor.WHITE.index;
        headerStyle.BorderTop = BorderStyle.THIN;
        headerStyle.TopBorderColor = HSSFColor.WHITE.index;
        headerStyle.VerticalAlignment = VerticalAlignment.CENTER;
        headerStyle.Alignment = HorizontalAlignment.CENTER;
        headerStyle.SetFont(headerFont);

        HSSFCellStyle oddStyle = (HSSFCellStyle)workbook.CreateCellStyle();
        oddStyle.FillForegroundColor = HSSFColor.CORAL.index;
        oddStyle.FillPattern = NPOI.SS.UserModel.FillPatternType.SOLID_FOREGROUND;
        oddStyle.BorderBottom = BorderStyle.THIN;
        oddStyle.BottomBorderColor = HSSFColor.WHITE.index;
        oddStyle.BorderRight = BorderStyle.THIN;
        oddStyle.RightBorderColor = HSSFColor.WHITE.index;
        oddStyle.BorderLeft = BorderStyle.THIN;
        oddStyle.LeftBorderColor = HSSFColor.WHITE.index;
        oddStyle.BorderTop = BorderStyle.THIN;
        oddStyle.TopBorderColor = HSSFColor.WHITE.index;
        oddStyle.VerticalAlignment = VerticalAlignment.CENTER;
        oddStyle.Alignment = HorizontalAlignment.CENTER;
        oddStyle.SetFont(font);

        HSSFCellStyle evenStyle = (HSSFCellStyle)workbook.CreateCellStyle();
        evenStyle.FillForegroundColor = HSSFColor.LIGHT_BLUE.index;
        evenStyle.FillPattern = NPOI.SS.UserModel.FillPatternType.SOLID_FOREGROUND;
        evenStyle.BorderBottom = BorderStyle.THIN;
        evenStyle.BottomBorderColor = HSSFColor.WHITE.index;
        evenStyle.BorderRight = BorderStyle.THIN;
        evenStyle.RightBorderColor = HSSFColor.WHITE.index;
        evenStyle.BorderLeft = BorderStyle.THIN;
        evenStyle.LeftBorderColor = HSSFColor.WHITE.index;
        evenStyle.BorderTop = BorderStyle.THIN;
        evenStyle.TopBorderColor = HSSFColor.WHITE.index;
        evenStyle.VerticalAlignment = VerticalAlignment.CENTER;
        evenStyle.Alignment = HorizontalAlignment.CENTER;
        evenStyle.SetFont(font);

        // handling header.
        foreach (DataColumn column in sourceTable.Columns)
        {
            var headercell = headerRow.CreateCell(column.Ordinal);
            headercell.SetCellValue(column.ColumnName);
            headercell.CellStyle = headerStyle;
            headerRow.Height = 600;
        }

        // handling value.
        int rowIndex = 1;

        //Create 3 sheet, and fill them
        foreach (DataRow row in sourceTable.Rows)
        {
            HSSFRow dataRow = sheet.CreateRow(rowIndex) as HSSFRow;
            dataRow.Height = 600;
            foreach (DataColumn column in sourceTable.Columns)
            {
                var cell = dataRow.CreateCell(column.Ordinal);
                cell.SetCellValue(row[column].ToString());

                if (sourceTable.Rows.IndexOf(row) % 2 == 0)
                {
                    cell.CellStyle = evenStyle;
                }
                else
                {
                    cell.CellStyle = oddStyle;
                }
            }

            rowIndex++;
        }

        workbook.Write(memoryStream);
        memoryStream.Flush();

        HttpResponse response = HttpContext.Current.Response;
        response.ContentType = "application/vnd.ms-excel";
        response.AddHeader("Content-Disposition", string.Format("attachment;filename={0}", fileName));
        response.Clear();

        response.BinaryWrite(memoryStream.GetBuffer());
        response.End();
    } 
```

# mod-rewrite - 使用 modrewrite 忽略目录

> ID：11416309
> 
> 赞同：0
> 
> 时间：2012-07-10T15:06:15.073
> 
> 标签：mod-rewrite

所以我在 blog/ 有一个博客

我想防止 yii（框架）重写 blog/ 目录中的 url。

我如何使用 modrewrite 做到这一点？

这是我的 .htaccess 文件：

```
RewriteEngine on
#RewriteCond %{HTTP_HOST} ^[^.]+\.[^.]+$
#RewriteCond %{HTTPS}s ^on(s)|
#RewriteRule ^ http%1://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

RewriteCond %{HTTPS} off
RewriteCond %{HTTP_HOST} !^www\.(.*)$ [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# otherwise forward it to index.php
RewriteRule . index.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:41:11.993

添加这一行：

`RewriteCond %{REQUEST_URI} !blog`

例如：

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !blog
#RewriteCond %{HTTP_HOST} ^[^.]+\.[^.]+$
#RewriteCond %{HTTPS}s ^on(s)|
#RewriteRule ^ http%1://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

RewriteCond %{HTTPS} off
RewriteCond %{HTTP_HOST} !^www\.(.*)$ [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# otherwise forward it to index.php
RewriteRule . index.php 
```

这样，如果请求 url 与单词“blog”不匹配，则将应用所有后续规则。

# .net - 无法切换到 WinDbg 中的托管线程

> ID：11416313
> 
> 赞同：13
> 
> 时间：2012-07-10T15:06:21.370
> 
> 标签：.net, windbg, sos

我正在使用 SOS 探索一个带有 WinDbg 的 ASP.NET 进程的小型转储。如果我列出托管线程，我会看到一个正常的线程列表：

```
0:000> !threads
ThreadCount: 8
UnstartedThread: 0
BackgroundThread: 8
PendingThread: 0
DeadThread: 0
Hosted Runtime: no
                                              PreEmptive                                                Lock
       ID OSID        ThreadOBJ     State   GC     GC Alloc Context                  Domain           Count APT Exception
XXXX    1 12bc 00000000001441f0   1808220 Disabled 0000000140b10fc8:0000000140b12f20 000000000017f6e0     0 Ukn (Threadpool Worker)
XXXX    2 1334 0000000000152f90      b220 Enabled  0000000000000000:0000000000000000 0000000000121b90     0 Ukn (Finalizer)
XXXX    3 138c 000000000017b100    80a220 Enabled  0000000000000000:0000000000000000 0000000000121b90     0 Ukn (Threadpool Completion Port)
XXXX    4  81c 000000000017eb40      1220 Enabled  0000000000000000:0000000000000000 0000000000121b90     0 Ukn
XXXX    5  5e4 00000000001bccd0   880a220 Enabled  0000000000000000:0000000000000000 0000000000121b90     0 Ukn (Threadpool Completion Port)
XXXX    6 11e4 0000000004bee280   180b220 Disabled 0000000000000000:0000000000000000 0000000000121b90     0 Ukn (Threadpool Worker)
XXXX    7  73c 0000000004c267e0   180b220 Disabled 0000000140b0f158:0000000140b10f20 000000000017f6e0     3 Ukn (Threadpool Worker) System.StackOverflowException (000000007fff0138) (nested exceptions)
XXXX    8  21c 00000000001ad1c0   180b220 Enabled  0000000000000000:0000000000000000 0000000000121b90     0 Ukn (Threadpool Worker) 
```

但是，如果我尝试切换到线程 7（有例外的线程），我会得到：

```
0:000> ~7s
        ^ Illegal thread error in '~7s' 
```

尝试切换到任何托管线程时会发生这种情况。我不知道从哪里开始。我真正需要做的是查看该托管线程的堆栈跟踪。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T15:20:21.030

输出`!threads`显示线程的三个不同 ID（WinDbg 的 ID、托管 ID 和本机 ID）。您需要使用的是最左边的。如您所见，转储中的所有线程都被标记为`XXXX`它们不再可用。这是正常的，但我确实觉得奇怪的是所有线程都被标记为这样。进程关闭期间是否进行了转储？

更新基于评论

您绝对应该能够使用 获得有用的转储`adplus -crash`，但显然这里的一切都有些混乱，因为即使是终结器线程也被终止。我注意到其中一个线程有一个 StackoverflowException，这可能是你所追求的。要做到这一点，您可以在第一次机会异常上创建转储，看看您是否能以这种方式获得更有用的东西。Adplus 对此有一个`FullOnFirst`标志。

附加更新

好吧，这*很*奇怪。其他几件事要尝试。

*   附加到崩溃前的进程，让它`g`。这应该会在异常情况下进入调试器。如果需要，您可以设置一个事件以将任何异常打印到控制台。使用`sxe -c "!pe; !clrstack; gn" clr`.

*   Adplus 曾经是一个 vbs 脚本，但不久前它被重写为可执行文件。我已经看到新版本的一些小问题，但没有这样的。您可以尝试旧脚本，它仍然可以作为 adplus_old.vbs 使用。

*   从 sysinternals尝试[procdump 。](http://technet.microsoft.com/en-us/sysinternals/dd996900.aspx)它支持与 Adplus 相同类型的转储选项（加上更多）。

# php - 用 PHP 编写 Salesforce 应用程序并将其发布到市场

> ID：11416315
> 
> 赞同：0
> 
> 时间：2012-07-10T15:06:27.990
> 
> 标签：php, salesforce

如果可以用 PHP 编写 Salesforce 应用程序并将其发布到他们的市场，还是我必须使用 APEX？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:41:11.517

任何在 AppExchange 上发布并打算*在 Force.com 上运行的*东西都必须用 Apex 编写（并且可能是 Visualforce 的标记）。

但是，您可以发布作为复合应用程序的应用程序，在您的情况下，PHP 应用程序在 Force.com 外部执行，该应用程序使用 Web 服务或其他方式与 Force.com 平台通信。

但是，如果您将 Force.com 视为 Heroku 或 Azure 或其他 PaaS，它是相似的，但 Apex 是唯一受支持的语言。您还可以通过配置构建应用程序，而无需编写任何代码。

# javascript - jquery动画彩虹般的颜色变化

> ID：11416319
> 
> 赞同：4
> 
> 时间：2012-07-10T15:06:45.793
> 
> 标签：javascript, jquery, image, animation, gif

假设我有这张图片：

![动画线](../Images/363f25d014aa24cc3be6a749c6fbb264.png)

线条颜色是从黄色到紫色的渐变。现在我的问题是：有没有办法创建一个 gif 或使用 jquery 或其他形式的 javascript 来制作从左到右颜色变化的不间断动画？

感谢任何帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:10:57.413

您尝试做的事情可以使用精灵动画来完成。

基本上，您可以使用 jQuery 快速更改元素的背景位置，从而产生动画效果。

已经有一个简单的小插件，但也可以很容易地自己编写。

[http://spritely.net/documentation/](http://spritely.net/documentation/)

# javascript - rake-pipeline：如何在 jquery 之后附加咖啡脚本文件？

> ID：11416325
> 
> 赞同：1
> 
> 时间：2012-07-10T15:07:11.410
> 
> 标签：javascript, rake, assets, pipeline

考虑以下充满javascript的文件夹，我想使用以下方法将其编译成一个文件夹`rake-pipeline`：

*   jQuery.js
*   一些 jquery-plugin.js
*   又一个 jquery-plugin.js
*   图书馆-1.coffee
*   library-2.coffee

`library-1`并`library-2`依赖于 jQuery。

## 资产文件

```
require "rake-pipeline-web-filters"

output "dist"

input "js" do
  match "**/*.coffee" do
    filter Rake::Pipeline::Web::Filters::CoffeeScriptFilter
  end

  match "**/*.js" do
    filter Rake::Pipeline::Web::Filters::UglifyFilter
    filter Rake::Pipeline::OrderingConcatFilter, ["jquery.js", "libs/ufvalidator.js"], "application.js"
  end
end 
```

我注意到在连接所有内容时，用 Coffeescript 编写的脚本位于顶部。不会`OrderingConcatFilter`阻止这种情况发生吗？我应该修复什么以使 Coffeescript 源代码位于 jQuery 之后？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T20:33:51.077

UglifyFilter 重命名它处理的文件以添加`.min.js`后缀。`jquery.js`进入丑化，`jquery.min.js`出来。

我可能会将 UglifyFilter 放在最后，如下所示：

```
match "**/*.js" do
  concat ["jquery.js", "libs/ufvalidator.js"], "application.js"
  uglify
end 
```

但您也可以更改与 ConcatFilter 匹配的文件名：

```
match "**/*.js" do
  uglify
  concat ["jquery.min.js", "libs/ufvalidator.min.js"], "application.js"
end 
```

或告诉 UglifyFilter 不要重命名文件：

```
match "**/*.js" do
  uglify { |input| input }
  concat ["jquery.js", "libs/ufvalidator.js"], "application.js"
end 
```

# php - 数据库结构关系数据库

> ID：11416328
> 
> 赞同：-1
> 
> 时间：2012-07-10T15:07:22.470
> 
> 标签：php, mysql, database, database-design, relational-database

我正在为一个小型公寓管理网站创建数据库。

基本上会有一个用户登录表单，他们可以在其中插入他们的公寓，描述，照片。由于我将使用关系表，因此我想确保我正在创建正确的数据库。有人可以看看并发表意见吗？

```
USERS:
  - id_user;
  - username;
  - password;
  - email;

APARTMENTS:
  - id_apartment;
  - id_user;
  - title;
  - description;
  - map;
  - gallery;

GALLERY_IMAGES:
  - id_gallery;
  - id_apartment;
  - image; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:20:23.733

看起来您的设计仅允许“公寓”与单个用户相关。

我建议每个表的主键是一个名为`id`. 并且对该主键的任何外键引用都将被命名为`tablename_id`.

您需要查看关系的基数。一个“用户”可以与多个“公寓”相关联吗？一个“公寓”可以与多个“用户”相关吗？一个“图像”可以与多个“公寓”相关联吗？等等

当我们找到“多对多”关系时，我们通常使用关系表来解决它。

如果一个“公寓”可以与多个“用户”相关，给定...

```
apartment (id PK, ... )

user (id PK, ... ) 
```

我们将添加第三个表，外键的组合是唯一的

```
user_apartment ( user_id FK, apartment_id FK, UNIQUE KEY (user_id, apartment_id) ) 
```

* * *

您似乎有一个“画廊”的概念，这与您的“图像”概念不同。（考虑可以“唯一识别”并且您想要存储相关信息的实例。）

一张图片可以在多个画廊中吗？一个画廊可以有多个图像吗？画廊可以与多个公寓相关联吗？

如果一张图片只属于一个画廊，而一个画廊只与一个公寓相关，那么我将实现为......

```
gallery (id PK, apartment_id FK, ... )  
image (id PK, gallery_id FK, ...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:20:07.977

如果这确实是您的情况：（我猜）

公寓属于用户 公寓有 0 个或更多图像

那你为什么要引入画廊的概念？

```
USERS:
- id_user;
- username;
- password;
- email;

APARTMENTS:
- id_apartment;
- id_user;
- title;
- description;
- map;

IMAGES:
- id_image
- id_apartment;
- image_path; 
```

如果是这种情况，那么画廊实际上是公寓的图像，我的意思是在你的 GUI 上调用它...

一些用户是否拥有不止一套公寓？

# windows - 运行 cgi 程序时 Apache 服务是否存在连接/内存限制？

> ID：11416330
> 
> 赞同：1
> 
> 时间：2012-07-10T15:07:32.790
> 
> 标签：windows, perl, apache, process, windows-services

我正在尝试在 Apache 2.0/2.2/2.4 上同时运行数百个 cgi 程序（perl 或其他语言）。我的测试环境是具有 1GB RAM 的 Windows Server 2003 R2。

在程序中，我使用无限循环或“$_ = < STDIN >”来保持每个进程处于活动状态。在 Apache 配置中，我将所有足够大的相关配置，例如 ThreadPerChild 设置为 1000。然后我使用 JMeter 测试了 200 个请求。当我在控制台应用程序中运行 Apache 时，它​​工作正常并且所有 200 个 cgi 进程都在运行。但是，当我将 Apache 作为 Windows 服务运行时，只有 60-100 个进程会同时运行。除非我杀死任何正在运行的进程，否则其他人不会启动。我不知道是什么原因造成的。运行 cgi 程序时 Apache 服务是否存在连接/内存限制？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T20:05:22.333

`MaxClients`文件中的参数`httpd.conf`设置 apache 服务器的最大连接数限制。默认连接限制为 256。

`httpd.conf`您可以通过打开文件并搜索 MaxClients来检查您的服务器。

linux 中 httpd.conf 的默认位置是`/etc/httpd/conf/httpd.conf`.

在 windows 上，conf 文件的默认位置是`C:/Program Files/Apache Group/Apache/conf/httpd.conf`

它看起来像这样。

```
# StartServers: number of server processes to start
# MinSpareServers: minimum number of server processes which are kept spare
# MaxSpareServers: maximum number of server processes which are kept spare
# ServerLimit: maximum value for MaxClients for the lifetime of the server
# MaxClients: maximum number of server processes allowed to start
# MaxRequestsPerChild: maximum number of requests a server process serves
<IfModule prefork.c>
StartServers       8
MinSpareServers    5
MaxSpareServers   20
ServerLimit      256
MaxClients       256
MaxRequestsPerChild  4000
</IfModule> 
```

您可以将`MaxClients`值设置为所需的任何值，然后重新启动服务器以应用更改。

# ms-access-2003 - Access 2003 需要创建一个用户界面，用户可以在其中从字段列表中选择并返回不同的值

> ID：11416331
> 
> 赞同：2
> 
> 时间：2012-07-10T15:07:35.847
> 
> 标签：ms-access-2003

我仍在使用同一个数据库，其中表名保持不变，但每次使用的字段名都会不同。我想在主窗体上创建一个选项，用户单击命令按钮以显示表中的字段列表（名为“Scrubbed”），然后从列表中选择一个字段，然后立即打开一个窗口显示不同的字段值。这可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:08:00.117

您可以使用 VBA 做很多事情，包括动态创建查询。组合框和列表框有一个 RowSource 选项字段列表，它将列出表中的字段。

编辑

这是您的代码，有一些更改：

```
Private Sub Command206_Click()
Dim strSQL As String
Dim strScrubbedValue As String

   ''I suspect this is running in the form, so Me
   strScrubbedValue = Me.ComboListScrubbedFields

   ''Where the table is called Scrubbed
   strSQL = "SELECT DISTINCT " & strScrubbedValue & " FROM Scrubbed"

   ''No need to execute, it is just a row source
   ''DoCmd.RunSQL strSQL

   Me.Combo213.RowSource = strSQL
End Sub 
```

我建议你用有意义的名字来命名你的控件。

# cocoa - 在基于 Lion 文档的应用程序中未调用 dataOfType

> ID：11416333
> 
> 赞同：0
> 
> 时间：2012-07-10T15:07:38.747
> 
> 标签：cocoa, document-based

[与这个问题](https://stackoverflow.com/questions/11311101/why-is-my-dataoftype-not-called-when-saving)几乎相同。

我正在为 OS X Lion 创建一个基于文档的新应用程序。

[该文档](http://developer.apple.com/library/mac/#documentation/DataManagement/Conceptual/DocBasedAppProgrammingGuideForOSX/ManagingLifecycle/ManagingLifecycle.html)说，我必须重写`dataOfType:error:`并`readFromData:ofType:error:`在 NSDocument 的子类中读取/写入文件，所以我在我的文档类中添加了这些方法，但是当我选择打开或保存菜单项时它们从未被调用。

```
- (BOOL)readFromData:(NSData *)data ofType:(NSString *)typeName error:(NSError *__autoreleasing *)outError {
    NSLog(@"Read from data");
    return NO;
}
- (NSData *)dataOfType:(NSString *)typeName error:(NSError **)outError {
    NSLog(@"data of type");
    return [NSData data];
} 
```

我也尝试过覆盖`writeToFile:ofType:`，`readFromFile:ofType`但他们也从未被调用过。当我在 Snow Leopard 中创建基于文档的应用程序时调用了这些方法。

为什么这些方法没有被调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T01:16:29.213

问题解决了。似乎选中了“使用核心数据”选项。

# sql - SQL 查询以获取具有重复值但不属于同一组的所有行

> ID：11416335
> 
> 赞同：2
> 
> 时间：2012-07-10T15:07:40.613
> 
> 标签：sql, count, grouping, distinct

数据库模式组织如下：

```
ID | GroupID | VALUE
--------------------
 1 |    1    |   A
 2 |    1    |   A 
 3 |    2    |   B
 4 |    3    |   B 
```

在此示例中，我想获取具有重复 VALUE 的所有行，但不属于同一组。所以所需的结果集应该是 ID (3, 4)，因为它们不在同一个组 (2, 3) 中但仍然具有相同的 VALUE (B)。

我在编写 SQL 查询时遇到问题，希望得到任何指导。谢谢。

到目前为止，我正在使用 SQL Count，但无法弄清楚如何处理 GroupId。

```
SELECT * 
FROM TABLE T
HAVING COUNT(T.VALUE) > 1
GROUP BY ID, GroupId, VALUE 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T15:23:30.933

最简单的方法是使用`EXISTS`：

```
SELECT 
    ID 
FROM
    MyTable T1
WHERE
    EXISTS (SELECT 1
            FROM MyTable 
            WHERE Value = t1.Value
            AND GroupID <> t1.GroupID) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:20:41.970

这是一种方法。首先，您必须确定出现在多个组中的值，然后使用该信息在原始表中找到正确的行：

```
select *
from t
where value in (SELECT value
                FROM TABLE T
                GROUP BY VALUE 
                HAVING COUNT(distinct groupid) > 1
               )
order by value 
```

实际上，在这种情况下，我更喜欢稍微变体，通过更改 HAVING 子句：

```
HAVING min(groupid) <> max(groupid) 
```

这适用于您要查找多个组并且应该比 COUNT DISTINCT 版本更快的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T15:23:39.530

```
SELECT  ALL_.* 
FROM    (SELECT  *  
         FROM    TABLE_
         GROUP BY ID, GROUPID, VALUE
         ORDER BY ID) GROUPED,
         TABLE_ ALL_
WHERE    GROUPED.VALUE = ALL_.VALUE
AND      GROUPED.GROUPID <> ALL_.GROUPID 
```

# javascript - Java 的“TODO”出现在总览标尺中，但 JS 没有？

> ID：11416336
> 
> 赞同：2
> 
> 时间：2012-07-10T15:07:44.793
> 
> 标签：javascript, eclipse, configuration, annotations

如何使“TODO”标签 ( `// TODO: blah...`) 出现在 Eclipse 中 JS 的概览标尺中？

在 Java 中它们是可见的，但对于 JS 不可见。

它们显然在“任务标签”列表中，并且在“注释”下检查了“任务”的“概述标尺”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:12:28.530

与 Java 一样，这由相应的构建器处理，即“JavaScript 验证器”构建器（不要与“客户端 JavaScript 验证器”混淆），在项目的 JavaScript 包含路径上运行。如果未启用，文件不在包含路径上，或者您未构建，则不会显示。这一切都假设您使用的是 WTP 的 JavaScript 开发工具，而不是来自 Aptana 或 MyEclipse 的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:45:52.943

对于像我这样的新手和未来的参考：这是完整的答案：右键单击“项目资源管理器”中的项目：**属性**->**项目方面**-> 选中**JavaScript**复选框。

感谢@nitind 和[Konstantin Komissarchik](https://stackoverflow.com/a/4976747/587467)引导我走上正确的道路。

# c# - 同一 GAC 程序集 System.Web.Mvc 的两个不同版本中的重复类型

> ID：11416337
> 
> 赞同：1
> 
> 时间：2012-07-10T15:07:46.553
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-4

[![](../Images/d59d7938828fe41620c80049e6006ffb.png)](https://i.imgur.com/IyAkq.png)

这是我尝试在 IIS 上将 MVC 4 应用程序作为默认网站的虚拟目录运行时遇到的错误。如果我使用 IIS express 或在 IIS 中创建一个完整的网站，那么它运行良好。

我尝试从临时目录中删除临时 ASP.NET 文件，但它没有解决任何问题。我已经在4和4.5之间更改了目标框架，它没有任何效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T15:28:51.490

是的……它们不是同一个版本。如果你仔细看，你会发现一个版本是 4.0_3，另一个是 4.0_4。

我认为你必须[修复你的 Web.config 文件](http://blog.davidebbo.com/2011/03/using-custom-build-of-mvc-3.html)。

您的`Web.config`文件正在引用旧版本，`System.Web.Mvc`而在运行期间系统尝试使用更新的版本。

# c# - 如何从串口获取重量？

> ID：11416338
> 
> 赞同：0
> 
> 时间：2012-07-10T15:07:49.887
> 
> 标签：c#, serial-port

我有一个 WPF 应用程序，它有一个用于称重负载的模块。由于串行端口通信因地磅而异，因此我想将称重模块设为单独的 dll。

我正在创建一个类库，我在其中使用串行端口来称重负载。我需要将重量返回给主程序。

```
double GetWeights()
{

 spWeigh = new SerialPort("COM1", 2400, Parity.None, 8, StopBits.One);
            spWeigh.RtsEnable = false;
            spWeigh.DtrEnable = false;
            spWeigh.Handshake = Handshake.None;
            spWeigh.ReadTimeout = 10000;
            spWeigh.DataReceived +=spWeigh_DataReceived;

} 
```

但是收到的数据在不同的线程中。我将如何在我的主程序中恢复体重？

```
 void spWeigh_DataReceived(object sender, SerialDataReceivedEventArgs e)
    {
      // code here
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:16:52.093

您不能向您的主程序订阅的库添加一个事件，该事件由您的库引发，并传回所需的数据吗？

在您的图书馆中：

```
class YourLibrary
{
    public delegate void RawDataEventHandler(object sender, RawDataEventArgs e);
    public event RawDataEventHandler RawDataReceived;

    void _serialPort_DataReceived(object sender, SerialDataReceivedEventArgs e)
    {
        string ReceivedData = _serialPort.ReadExisting();
        if (RawDataReceived != null)
            RawDataReceived(this, new RawDataEventArgs(ReceivedData));
    }
}

class RawDataEventArgs : EventArgs
{
    public string Data { private set; get; }

    public RawDataEventArgs(string data)
    {
        Data = data;
    }
} 
```

在您的主程序中：

```
class MainProgram
{
    YourLibrary library = new YourLibrary();
    library.RawDataReceived += new YourLibrary.RawDataEventHandler(library_RawDataReceived);

    void library_RawDataReceived(object sender, RawDataEventArgs e)
    {
        // Your code here - the data passed back is in e.Data
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:15:41.030

如果数据不需要很快（即每秒少于一次），您可以在一个线程中写入文本文件并在主线程中读取

# php - 以base64导出图像

> ID：11416346
> 
> 赞同：0
> 
> 时间：2012-07-10T15:08:03.513
> 
> 标签：php

我想在 php 中创建一个图像，将数据编码为 base64 使用代码：`file_put_contents('export/MyFile.png', base64_decode($img));` 我在浏览器上阅读，但 7483 应该是一个更大的数字。如果我打开图像只创建了一半（另一半是透明的），如果变量 $img 包含一个短字符串，它就可以工作。如果它包含一个太长的字符串，则只会部分创建图像。为什么？

PS：如果我使用

```
$img = base64_decode($img);
$fp = fopen("export/MyFile.png", "w");
fwrite($fp, $img);
fclose($fp); 
```

我有完全相同的问题

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:15:51.360

```
file_put_contents('export/MyFile.png', base64_decode($img)); 
```

应该：

```
file_put_contents('export/MyFile.png', base64_encode($img)); 
```

如果要对图像进行编码，则不能使用 decode 功能。

# html - HTML5 图片上传到页面 Polyfill 演示

> ID：11416355
> 
> 赞同：4
> 
> 时间：2012-07-10T15:08:28.100
> 
> 标签：html, file-upload

我正在使用 HTML5 构建文件上传 - 它只被上传到页面，这是我想要的。

[https://github.com/Jahdrien/FileReader](https://github.com/Jahdrien/FileReader)这就是我发现的，我想要一些帮助来实现它。没有我能找到的演示，所以我什至不确定这是我想要的，那里有很多，我一直在做很多研究。

这是我得到的[http://jsfiddle.net/tara_irvine/CR3Q8/2/](http://jsfiddle.net/tara_irvine/CR3Q8/2/)我需要为 Safari 和 IE 添加一个后备。

谁能指出我正确的方向？如果这个 polyfill 可以工作，有人可以解释我是如何实现它的吗？

非常感谢，我意识到这可能是一个已经存在的问题的重复，但我发现的唯一答案是上传到服务器。我只希望图像显示在页面上，最终我会想要导出它，最初的想法是 HTML5 div > canvas 并导出为图像或其他东西......我也需要对此有一个后备。但首先要做的事！将图像放入页面。

感谢我收到的任何帮助

# php - PHP exec没有给出与cmd相同的结果

> ID：11416356
> 
> 赞同：2
> 
> 时间：2012-07-10T15:08:29.490
> 
> 标签：php, cmd, exec, sox

```
exec ("C:/Lame/sox \"C:/1/2.wav\" -t wav \"C:/1/2.rev\" reverse"); 
```

使用该代码使用音频后处理工具来反转声音文件。有输出，但文件大小约为应有大小的 1/5，我无法播放。基本上它会创建一个文件，但如果我在命令提示符下执行此操作，它不会是我得到的文件：

```
C:/Lame/sox "C:/1/2.wav" -t wav "C:/1/2.rev" reverse 
```

有了这个，我得到了我想要的结果，我可以播放 rev 文件。

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:34:34.837

发现了问题。这是一个许可问题。

所有其他后处理命令都有效，因为它写入该文件夹。反向在另一个文件夹中创建一个临时文件，当前用户没有写入权限，为什么它会在其中创建一个小文件，因为它稍后试图从一个不存在的文件中读取。

# c - C - 将结构设置为 null（分配中的类型不兼容）

> ID：11416359
> 
> 赞同：7
> 
> 时间：2012-07-10T15:08:37.140
> 
> 标签：c, pointers, struct, null

我有以下结构：

```
struct elem {
  int number;
  char character;
};

struct item {
  struct elem element;
}; 
```

和以下功能：

```
void init(struct item *wrapper) {
  assert(wrapper != NULL);
  wrapper->element = NULL;
} 
```

`item->element = NULL`产生一个`incompatible types in assignment`. 这是为什么？不应该将结构设置为 NULL 可以吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-10T15:12:32.223

在C`NULL`中一般定义如下

```
#define NULL ((void*)0) 
```

这意味着它是一个指针值。在这种情况下，您尝试将指针 ( `NULL`) 分配给非指针值`item::element`并获取适当的消息。似乎您的意图是在`element`这里有一个指针，所以请尝试以下操作

```
struct item {
  struct elem* element;
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T15:11:16.430

`NULL`是指针值，`wrapper->element`不是指针，因此您不能分配它`NULL`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-29T09:24:11.040

除了前面的答案，有时创建一个 NULL 结构是有意义的。 [http://en.wikipedia.org/wiki/Null_Object_pattern](http://en.wikipedia.org/wiki/Null_Object_pattern)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-10T15:14:28.840

1.  element 不是指针，因此不能分配 NULL。
2.  `main->element`是错误的用法。您不能使用其名称访问结构的元素。应该是`wrapper->element`。您应该使用变量名访问它。

# ruby-on-rails-3 - Rails 3：修改表单验证的错误消息前缀

> ID：11416361
> 
> 赞同：2
> 
> 时间：2012-07-10T15:08:42.960
> 
> 标签：ruby-on-rails-3, forms

嵌套表单很棒，但我注意到它有时会导致格式奇怪的错误消息。

举一个具体的例子：我有一个表单可以让某人创建一个新的**Account**。每个帐户都有一个或多个**用户**(has_many)。注册表单使用**Account**模型来创建表单，并且还包括许多用于创建第一个**用户**的字段（因为一个帐户必须至少有一个用户）。换句话说，它是一种嵌套形式。

因为一个帐户可以有很多用户，所以错误消息的前缀是“users”而不是“user”。此外，错误消息使用关系名称（用户）和属性名称（例如，“密码”）来构造错误消息。这会导致错误消息，例如*“用户电子邮件不能为空”。*而不是*“电子邮件不能为空”。*.

有没有办法自定义错误消息或从错误消息中省略“用户”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:02:30.900

在您的验证的 :message 参数中，您可以添加一个插入符号，它将删除默认消息。

```
 :message => "^ Email can't be blank" 
```

# c# - 如何获取数据绑定 ComboBox 以反映对 BindingList 数据源所做的更改

> ID：11416367
> 
> 赞同：2
> 
> 时间：2012-07-10T15:09:03.733
> 
> 标签：c#, winforms, data-binding, combobox

我有一个类，其中包含`String`一个名称和一个`int`ID 号：

```
public class Item
{
    public int IDNumber { get; set; }
    public String Name  { get; set; }
} 
```

我有一个`List<Item>`用于创建`BindingList<Item>`. 这`BindingList<Item>`是我有数据绑定`DataSource`的。`ComboBox`我有`Display Member`当前作为名称和`Value Member`当前作为 IDNumber。

我可以更改，`Name`但是当我这样做时，值`ComboBox.SelectedText`变为“”。更清楚地说，名字是“戴夫”。用户输入“约翰”。我希望将`SelectedText`其更改为“John”，但它却变成了“”。

我试过使用`INotifyPropertyChanged`：

```
public class Item : INotifyPropertyChanged
{
    private String name;

    public int IDNumber { get; set; }
    public String Name
    {
        get
        {
            return name;
        }
        set
        {
            this.name = value;
            if (this.PropertyChanged != null)
            {
                this.PropertyChanged(this, new PropertyChangedEventArgs("Name"));
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;
    }
} 
```

`ComboBox`只有在使用该字段之前单击一次后，这才会起作用，`SelectedText`而我希望在进行更改时对其进行更新。

有谁知道我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:48:31.377

使用[绑定源](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.aspx)

调用[重置绑定](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.resetbindings.aspx)

**示例**：

```
private BindingSource bs;

private SetupBinding()
{
    List<Item> data = new List<Item>();

    //Get Data 

    bs = new bindingsource();
    bs.datasource = data;
    combobox.datasource = bs;
    comboBox.DisplayMember="Name";
    comboBox.ValueMember="IDNumber";
}

private ShowMyMessage()
{
    MessageBox.Show(this, message, caption, buttons,
            MessageBoxIcon.Question, MessageBoxDefaultButton.Button1, 
            MessageBoxOptions.RightAlign);
 if (bs != null)
 {
   bs.resetbindings(false);
 }
} 
```

然后确保您的组合框选择了某些内容并尝试 selectedtext

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:23:39.580

使用 comboBox.SelectedValue

所以你必须设置它的 DisplayMember 和 ValueMember

像

```
comboBox.DisplayMember="Name";
comboBox.ValueMember="IDNumber"; 
```

最后设置你的数据源

# javascript - 如果选项值为“True”，则选择 List onChange 不起作用

> ID：11416368
> 
> 赞同：0
> 
> 时间：2012-07-10T15:09:06.523
> 
> 标签：javascript, jquery, asp.net-mvc

我正在使用 MVC.net 生成带有选择列表的表单。当用户更改选择列表时，我希望表单自动提交。我有以下代码：

```
<select OnChange="$(&#39;#FormID&#39;).submit();" id="LinkedToInvoice" name="LinkedToInvoice">
    <option value="">Select</option>
    <option value="True">Yes</option>
    <option selected value="False">No</option>
</select> 
```

哪个应该起作用，实际上它有时会起作用。如果我将下拉菜单更改为“选择”，它会提交表单，如果我更改为“否”，它会提交表单。但是，当我将下拉菜单更改为“是”（值 = true）时，表单不会提交。如果我将值从 True 更改为其他任何值，它会正确触发，但 value="True" 似乎会停止 onchange 事件。任何建议都将受到欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T20:16:03.813

好的，我的错误是 onchange 事件正确触发，但表单提交失败。我正在使用 jquery ajax 表单来提交表单，并且我没有包括任何故障检查。当将真实值传递给服务器时，我的代码在服务器上导致错误 500，但是网页上没有显示任何消息。在我的 ajax 表单调用中添加故障检查解决了这个问题，并允许我找到错误 500 的原因。

# coldfusion - CFHTTP 可以接受 TARGET 值吗？

> ID：11416371
> 
> 赞同：2
> 
> 时间：2012-07-10T15:09:11.673
> 
> 标签：coldfusion

我正在开发一个 Coldfusion 页面，该页面从表单中获取信息并将其发回同一页面。但是，我有一个 CFHTTP URL 字符串，我想将它发布到 PHP 页面，并且我也想在单独的页面中打开（仍然保持原始 POST 页面打开。我认为 CFHTTP 会接受“目标 - 空白”值但是不是。这是我的代码：

```
<cfhttp method="Post" url="https://www.foo.com/foocorp/restrict/fpdf/letter.php" result="adverseResponse">
            <cfhttpparam type="Header" name="Accept-Encoding" value="deflate;q=0"> 
            <cfhttpparam type="Header" name="TE" value="deflate;q=0">
                <cfoutput>

                <cfif isdefined( "b_firstname" )><cfhttpparam name="B_FIRSTNAME" type="formField" value="#B_FIRSTNAME#"></cfif>
                <cfif isdefined( "b_lastname" )><cfhttpparam name="B_LASTNAME" type="formField" value="#B_LASTNAME#"></cfif>
                <cfif isdefined( "prop_address" )><cfhttpparam name="PROP_ADDRESS" type="formField" value="#PROP_ADDRESS#"></cfif>
                <cfif isdefined( "prop_city" )><cfhttpparam name="PROP_CITY" type="formField" value="#PROP_CITY#"></cfif>
                <cfif isdefined( "prop_state" )><cfhttpparam name="PROP_STATE" type="formField" value="#PROP_STATE#"></cfif>
                <cfif isdefined( "prop_zip" )><cfhttpparam name="PROP_ZIP" type="formField" value="#PROP_ZIP#"></cfif>

                </cfoutput>
        </cfhttp> 
```

我应该使用另一个 CF 元素来代替 CFHTTP 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T15:15:06.593

这里有一些误解。CFHTTP*进行服务器到服务器的*通信。CF 中发生的任何事情都留在 CF 中（创造口号）。您所指的 target="_blank" 是在*客户端*上发生的事情- 在“浏览器”中打开了一个单独的“页面”。CFHTTP 不使用浏览器。它不呈现内容。它只是发出带有各种标头和参数的 HTTP 请求，然后将响应返回给您——所有这些都在您的 cf 代码中的服务器上。您必须对内容“做”一些事情才能将其发送回浏览器。

所以你需要做的是：

*   从 CF (adverseResponse.filecontent) 获取响应并使用弹出窗口或其他方式将其放置在您的单独页面中。这样，您就充当了浏览器的“代理”。
*   放弃 CFHTTP 路由和用户 jquery 或 Javascript 或任何暗示直接在浏览器中发布到 PHP 的行为。

希望这可以帮助。

# android - 如何查看所拨号码是否占线或无人接听？

> ID：11416374
> 
> 赞同：2
> 
> 时间：2012-07-10T15:09:33.583
> 
> 标签：android, phone-call, telephony, telephonymanager

我使用以下代码拨打了一个号码：

```
DataBaseHelper db;
db=new DataBaseHelper(PanicService.this);
try {

    db.createDataBase();

    } catch (IOException ioe) {

    throw new Error("Unable to create database");

    }

Map<String, String > map= db.TelephoneList();
String[] numbers = new String[]{"number1","number2","number3","number4","number5"};

Intent callIntent = new Intent(Intent.ACTION_CALL);
callIntent.setData(Uri.parse("tel:"+map.get(numbers[0])));
callIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(callIntent); 
```

这工作正常。现在我需要知道拨打的号码是占线还是无人接听，它是拨打列表中的下一个号码。我只是想知道是否有办法检测通话状态？

我已经检查了这个 URL [http://developer.android.com/reference/android/telephony/TelephonyManager.html](http://developer.android.com/reference/android/telephony/TelephonyManager.html)但除了 CALL_STATE_OFFHOOK 之外我找不到任何关于这个概念的东西，这不是我真正想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:35:47.673

您无法确定移动网络上的拨出电话是否已接听，因为此信息不是由移动网络提供给手机的，即使是，Android 也不提供接收它的方法。

虽然可以确定是否应答了拨出 Internet (SIP) 呼叫，但 Android 目前（从 Jelly Bean 开始）不提供执行此操作的方法，我可以通过快速查看源代码找到该方法。

# java - 正确的 java.util.ResourceBundle 组织

> ID：11416375
> 
> 赞同：0
> 
> 时间：2012-07-10T15:09:47.117
> 
> 标签：java, inheritance, internationalization, module, resourcebundle

我有一个包含许多模块的国际化项目。每个模块都有自己的一组捆绑包：

```
- database-module
    + com_naugler_project_database.properties
    + com_naugler_project_database_fr.properties
- mapping-module
    + com_naugler_project_mapping.properties
    + com_naugler_project_mapping_fr.properties 
```

但是，许多国际化术语是多余的（例如“OK”或“Cancel”），我希望将这些术语放在一个位置以便于维护和开发。

我发现[这个对 ResourceBundle 继承很有帮助的解释](http://java.sun.com/developer/technicalArticles/Intl/ResourceBundles/)，但看起来好像（不是？）共同祖先不会被正确国际化，因为：

```
- common-module
    + com_naugler_project.properties
    + com_naugler_project_fr.properties          <-- this is not an ancestor
- database-module
    + com_naugler_project_database.properties
    + com_naugler_project_database_fr.properties <-- of this 
```

我的捆绑组织是否离我们很远？提供一个共同的国际化祖先的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T14:36:35.173

您想要的似乎是 Resources 的层次结构，也就是说，您可能希望一个类从 over 派生（或由一些特定部分和一些公共部分组成）。

基本上，ResourceBundle 不是为它设计的，你只能靠你自己。

但我想你需要一些建议。

*   确保常用术语***确实很***常用。也就是说，“OK”、“Cancel”、“Next >”、“< Previous”、“Open”、“File”等内容在它们的上下文中会有共同的翻译。我的意思是这样的标准项目只翻译一次是相当安全的，但是如果你想在不同的上下文中使用它们，你仍然需要另一个条目。为什么？因为在很多语言中，“打开”按钮翻译与“打开”对话框标题翻译不同。

*   将所有 .properties 文件移动到一个位置（例如名为“resources”的目录）。当然，特定于模块的文件应该分开到不同的子目录...

    *   创建一个资源工厂，它将返回 ResourceBundle 类的一个实例（或您自己的 Facade - 这种方法实际上可以让您共享一些公共包）。
*   大型应用程序的良好做法是创建一些语言包，即将语言资源分离到它们自己的目录中（即/resources/en、/resources/fr、/resources/zh-Hans）。但是，这种方法的问题在于您需要自己实现资源回退（借助您在问题中提到的文章，层次结构实际上是资源加载层次结构）。这意味着一些特殊情况，例如从语言标签“nb”退回到“no”，但不会从“nn”退回；从“zh-CN”和“zh-SG”回落到“zh-Hans”，然后回落到“zh”，但从“zh-HK”和“zh-TW”和“zh-MO”回落到“zh” -Hant”，然后使用您的默认语言，而不是从“pt-BR”下降

好像工作量很大？好吧，但是之后的维护工作将是最小的。

一件事可能会派上用场[PropertyResourceBundle](http://docs.oracle.com/javase/7/docs/api/java/util/PropertyResourceBundle.html)有两个构造函数，可让您加载所需的任何属性文件，即：[PropertyResourceBundle(InputStream stream)](http://docs.oracle.com/javase/7/docs/api/java/util/PropertyResourceBundle.html#PropertyResourceBundle(java.io.InputStream))和[PropertyResourceBundle(Reader reader)](http://docs.oracle.com/javase/7/docs/api/java/util/PropertyResourceBundle.html#PropertyResourceBundle(java.io.Reader))。老实说，在大型项目中，标准的 ResourceBundle 机制有太多的限制，所以你真的需要自己的资源访问层......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-14T18:25:15.803

正如 Paweł Dyda 所指出的，资源包本身不支持类层次结构解析。然而，我公司刚刚发布的[Rincl](http://rincl.io/)项目应该可以满足您的需求——并且还可以处理 UTF-8`.properties`文件和 XML 属性文件。它甚至可以即时为您进行消息格式化。

如[Rincl 快速入门](http://rincl.io/#quick-start)中所述，您可以简单地实现`Rincled`然后调用`getResources()`；即使在父类或接口中声明，Rincl 也会加载您的资源包：

```
public class MyClass extends BaseClass implements Rincled {
  …

    final String userName = "Jane Doe";
    //Retrieve the formatted user label based upon the current locale.
    //en-US: "Settings for user Jane Doe."
    //pt-BR: "Definições para usuário Jane Doe."
    final String userLabel = getResources().getString("user-label", userName);
  … 
```

Rincl 可在[http://rincl.io/](http://rincl.io/)获得，其中包含有关 Java 国际化的[介绍](http://rincl.io/intro)甚至完整[课程。](http://rincl.io/learn)即将推出许多新功能，但最新版本应该已经适合您了。如果您有任何疑问或问题，请告诉我。

# php - 使用 PHP 在悬停时显示图像

> ID：11416380
> 
> 赞同：2
> 
> 时间：2012-07-10T15:10:10.137
> 
> 标签：php, image, hyperlink, hover, z-index

我的 PHP 代码有一个小问题，如果有人可以帮助我，那就太好了。我想在将鼠标悬停在链接上时显示图像。这是我现在拥有的 PHP 代码的链接：

```
<a href="<?php the_permalink(); ?>"><?php if ( has_post_thumbnail() ) {the_post_thumbnail();} else if ( has_post_video() ) {the_post_video_image();}?></a> 
```

此代码显示图像，但我想在将鼠标悬停在带有图像的链接上时执行此代码：

```
<?php echo print_image_function(); ?> 
```

该代码还显示了属于某个类别的图像。我不希望初始图像消失我只是想在将鼠标悬停在第一张图像上时在第一张图像的顶部显示第二张图像。

我不知道它是否有帮助，但我使用 Wordpress，而且我不是 PHP 专家。我什至不知道这是否会奏效。这就是为什么我要问是否有人可以帮助我。

提前致谢

**感谢大家**

我要感谢所有花时间阅读我的帖子并通过提供解决方案帮助我的人。我没有在这么快的时间内得到这么多的答案。在花了几个小时尝试让它与 PHP、CSS 和 Javacript 一起工作后，我偶然发现了这个网站上的以下问题[：](https://stackoverflow.com/questions/7179412/css-hover-over-on-thumbnails-in-wordpress)

这正是我正在寻找的地方，经过一些修改以满足我的需求，我让它工作了。有时，当你在寻找艰难的道路时，事情会变得如此简单。因此，对于遇到相同问题的每个人：您可以使用此处出色的人提供的解决方案之一，或查看上面的链接。

再次感谢！:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T15:24:15.977

您可以使用 CSS 执行此操作（如果您愿意，这适合您的整体架构） - 这是一个使用 :hover 条件和 :after 伪元素的示例。
**html**

```
<a href="#" class="foo"><img src="http://www.gravatar.com/avatar/e5b801f3e9b405c4feb5a4461aff73c2?s=32&d=identicon&r=PG" /></a>​ 
```

**css**

```
.foo {
    position: relative;
}
.foo:hover:after {
    content: ' ';
    background-image: url(http://www.gravatar.com/avatar/ca536e1d909e8d58cba0fdb55be0c6c5?s=32&d=identicon&r=PG);
    position: absolute;
    top: 10px;
    left: 10px;
    height: 32px;
    width: 32px;   
}​ 
```

[http://jsfiddle.net/rlemon/3kWhf/](http://jsfiddle.net/rlemon/3kWhf/)演示在这里

### 编辑：

在使用新的或实验性的 CSS 功能时，请始终参考兼容性图表[http://caniuse.com/](http://caniuse.com/)以确保您仍在受支持的浏览器中。例如，`:after`仅支持启动 IE8。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T15:12:03.467

您**不能**在客户端随机执行服务器端代码。

尝试改用 javascript AJAX 请求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T15:12:47.747

PHP 是一种服务器端语言；您无法在页面加载后执行 PHP（因为 PHP 在页面加载之前完全完成解析）。如果你想要悬停事件，你需要 JS。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T15:23:20.143

首先，您不需要`elseif`声明。An`else`将起到相同的作用，除非您打算使用既不存在缩略图也不存在视频图像的空白标签。

```
<a href="<?php the_permalink(); ?>">
    <?php 
        if ( has_post_thumbnail() ) 
        {
            the_post_thumbnail();
        } 
        else
        {
            the_post_video_image();
        }
    ?>
</a> 
```

您不能明确地将 PHP 用于客户端功能。您将需要使用 javascript 或 jquery 来提供悬停功能。

jQuery 示例：

```
$(function() {

    $('a').hover(function() {

        // Code to execute whenever the <a> is hovered over

        // Example: Whenever THIS <a> tag is hovered over, display
        //          the hidden image that has a class of .rollover

        $(this + ' .rollover').fadeIn(300);

    }, function() {

        // Execute this code when the mouse exits the hover area
        // Example (inline with above example)

        $(this + ' .rollover').fadeOut(300);

    });

}); 
```

要将图像放置在另一个图像之上，您需要确保您的 CSS`absolute`对图像使用定位，并且在悬停时覆盖另一个图像的图像的`z-index`值高于位于其下方的图像。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-10T15:15:06.463

您需要一些 JavaScript 和/或 CSS 来完成这项工作，因为 PHP 在服务器端，而不是在客户端浏览器中。

# logging - Jboss AS 7 自定义记录器问题

> ID：11416381
> 
> 赞同：0
> 
> 时间：2012-07-10T15:10:13.170
> 
> 标签：logging, jboss7.x

我的应用程序在 Jboss AS 7.1.1.final 上运行。我需要将日志写入数据库，所以我编写了一个自定义处理程序：`public class DataSourceHandler extends java.util.logging.Handler`.

一切正常，但我需要获取调用此日志的行号和类的名称，如果出现错误，还需要获取堆栈跟踪。

在我们升级到 Jboss 7 之前，我们使用了 log4j，并且我们设法使用：

```
org.apache.log4j.spi.LocationInfo locationInfo = new org.apache.log4j.spi.LocationInfo(event.getThrown(), event.getSourceClassName());
org.apache.log4j.spi.ThrowableInformation throwableInfo = new org.apache.log4j.spi.ThrowableInformation(event.getThrown());

if (locationInfo != null) {
    fileName = locationInfo.getFileName();
    lineNumber = locationInfo.getLineNumber();
}
if (throwableInfo != null) {
    String[] exceptionArray = throwableInfo.getThrowableStrRep();
    for (String line : exceptionArray) {
        exceptionBuffer.append(line).append(NEW_LINE);
}
info = extractInfo(exceptionBuffer);
} 
```

我现在该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:13:37.767

JUL 不提供该信息 如果您不介意对 jboss-logmanger 的依赖，您可以扩展[`org.jboss.logmanager.ExtHandler`](https://github.com/jboss-logging/jboss-logmanager/blob/master/src/main/java/org/jboss/logmanager/ExtHandler.java)而不是 JUL 处理程序。这将为您提供[`org.jboss.logmanager.ExtLogRecord`](https://github.com/jboss-logging/jboss-logmanager/blob/master/src/main/java/org/jboss/logmanager/ExtLogRecord.java)将提供该信息的 a。

您只需覆盖[`doPublish(ExtLogRecord)`](https://github.com/jboss-logging/jboss-logmanager/blob/master/src/main/java/org/jboss/logmanager/ExtHandler.java#L96)而不是 JUL 发布方法。

JBoss AS 7 使用 JBoss Logging 和 JBoss Log Manager，因此已经为您提供了依赖关系。

# jquery - 有没有更好的方法在 Coffeescript 中使用 => 在函数中调用 $(this)？

> ID：11416384
> 
> 赞同：1
> 
> 时间：2012-07-10T15:10:26.143
> 
> 标签：jquery, coffeescript

我注意到，如果我尝试像这样编译 Coffeescript 行：

```
$note.find('a.close').bind 'click', (event) =>
  $(this).parent().remove() 
```

`$(this)`编译为`$(_this)`，考虑到我使用的是`=>`. 问题是，我不想`->`在以后需要在这个范围内使用局部变量时使用。

我必须用反引号转义第二行才能`$this`正确编译，à la：

```
`$(this).parent().remove()` 
```

…或者，还有更好的方法？

**更新（2012 年 7 月 12 日）：**

我最终这样做了：

```
close = -> $note.remove()
$note.find('a.close').bind 'click', (event) ->
  close()
setTimeout close, duration 
```

我知道它`this`完全避免了使用，但这似乎是一个比使用`self = this`普通 JS 开发通常需要的相同技巧更清洁的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:11:45.977

要获取您单击的元素，您可以执行以下操作：

```
close_button = $(event.currentTarget) // equivalent to $(this) here
close_button.parent().remove() 
```

- - - 或者 - - -

```
that = @
$note.find('a.close').bind 'click', (event) ->
    $(this).parent().remove()
    that.anotherFunc() 
```

但这并不能真正回答您的问题，但它是一个不错的选择。如果可能，我会自己使用第一个解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T04:14:10.130

你真的想用`->`. *唯一*会改变的是该函数中( `this`or `@`) 的值。如果您希望能够同时使用`this`您当前拥有的和`this`您想要的，您需要以`this`不同的名称保持当前关闭

现在的代码：

```
$note.find('a.close').bind 'click', (event) ->
  $(this).parent().remove() 
```

如果您需要`this`来自外部范围的代码：

```
that = this
$note.find('a.close').bind 'click', (event) ->
  that.doSomething()
  $(this).parent().remove() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T19:57:32.623

据我了解，您只需要缓存变量

```
that = @

context.action (e) ->
  foo(that) 
```

# zk - 如何在客户端访问从服务器端发送的 AU 响应

> ID：11416386
> 
> 赞同：1
> 
> 时间：2012-07-10T15:10:36.807
> 
> 标签：zk

我想知道在客户端（即在 ZUL 中）在 ZK 中从服务器推送到客户端的 AU 响应。搜索了很多找不到任何提示:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-13T13:02:10.843

使用（全局）[客户端](http://www.zkoss.org/javadoc/latest/zk/org/zkoss/zk/ui/util/Clients.html)对象，您可以将响应从服务器发送到客户端。然后使用已经提到的 zAu.cmd0 和 zAu.cmd1 javacript 对象，您可以定义[处理这些响应](http://books.zkoss.org/wiki/ZK%20Client-side%20Reference/Communication/AU%20Responses)的函数。

在服务器端向服务器发送响应（Java）：

```
AuResponse response = new AuResponse("myClientHandler", new Object[]{"hello ","world"});
Clients.response(response); 
```

在客户端，您可以定义类似（Javascript）的内容：

```
zAu.cmd0.myClientHandler = function (greet, person) { 
    alert(greet + person);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:29:44.040

您可以根据需要使用 zAu.cmd0 或 zAu.cmd1。请参阅ZK 客户端参考指南的[处理 Au 响应](http://books.zkoss.org/wiki/ZK%20Client-side%20Reference/Communication/AU%20Responses)部分。

# python - 如何使用 TTX/fontTools 重命名 TrueType 字体中的字形？

> ID：11416388
> 
> 赞同：2
> 
> 时间：2012-07-10T15:10:49.857
> 
> 标签：python, fonts, truetype

我正在升级使用旧代码页创建的 TrueType 字体，以创建 Unicode 对应字体。我正在使用 Python TTX/fontTools 但还没有找到一种方法： 1\. 重命名字形 2\. 合并两个字体文件中的字形？

有人可以帮忙吗？

PS 我也试过 Robofab，但在创建 UFO 文件时出错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:43:47.703

[也许FontGeek 的](http://www.fontgeek.net/blog/?cat=7)这些博客条目可以帮助你？其中两个正在处理 TTX/fontttools ......

* * *

基本上，您需要分三步完成：

1.  运行`ttx`以将字体文件转换为（可编辑的）XML 表示。
2.  在 XML 文件中进行编辑。
3.  再次运行`ttx`以将 XML 转换回有效的字体文件。

# git - 当本地没有任何更改时，git 工作副本如何发生冲突？

> ID：11416389
> 
> 赞同：0
> 
> 时间：2012-07-10T15:10:51.383
> 
> 标签：git, continuous-integration, dev-to-production

我们使用 git 来管理我们的代码，并使用 CI 系统来构建、复制并将构建工件重新推送回 git。我们推送到主分支，CI 系统拉下更改、构建并推送到名为生产的分支。然后对该分支进行测试，并运行另一个 CI 任务以将生产分支下拉到我们的实时服务器上。

没有人会就地编辑实时服务器上的版本 - 该存储库的本地副本永远不会更改，它是使用 -b 生产修饰符克隆的。

但是，有时，当我们下拉到实时服务器时，会出现冲突。我确信我对 git 的理解存在一些问题，但是，如果服务器上没有任何变化，并且仅从该分支中​​提取，那么冲突怎么会出现？

我们的流程本质上是：

本地：

```
git push origin master 
```

CI：

```
git checkout <newest-changeset> 
```

CI：

```
test
git checkout -b local # to put the detatched-head CHECKOUT from above into a usable branch
git push origin local:production 
```

服务器：

```
git pull origin production
--CONFLICT-- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:31:00.957

看起来您的流程缺少围绕您的变更集的一些结构。我不会使用任意提交来标记变更集。看看我的每个功能分支的帖子来组织你的 CI 工作[http://dymitruk.com/blog/2012/02/05/branch-per-feature/](http://dymitruk.com/blog/2012/02/05/branch-per-feature/)。

通过这种方式，您可以轻松地将候选发布构建（可以在您需要时提升到生产环境）和集成构建（这是您经常想要的）用于让 CI 在您开发时运行健全性测试。

# c++ - push(ing)_back 循环内的对象指针

> ID：11416390
> 
> 赞同：0
> 
> 时间：2012-07-10T15:10:52.797
> 
> 标签：c++, stl

考虑以下内容：我有一个 CDevices 类，其中包含一个字符串成员

```
class CDevice
{
public:
   CDevice(void);
   ~CDevice(void);

   // device name
   std::string Device_Name;
   etc...
} 
```

在我的代码的其他地方，我定义了另一个类，其中包含指向 CDevices 的指针向量

```
class CDevice;
class CServers
{
public:
   CServers(void);
   ~CServers(void);

   // Devices vector
   vector<CDevice*> Devices;
   etc...
} 
```

问题出现在我的 main.c 中的以下几行中

```
pDevice = new CDevice;

pDevice->Device_Name = "de";
Devices.push_back(pDevice);

pDevice->Device_Name = " revolotiunibus";
Devices.push_back(pDevice);

pDevice->Device_Name = " orbium";
Devices.push_back(pDevice);

pDevice->Device_Name = " coelestium";
Devices.push_back(pDevice);

for(int i = 0; i < (int)Devices.size(); ++i)
    cout << "\nLoad name = " << Devices.at(i)->Device_Name << endl; 
```

我得到的输出是“coelestium”，重复了四次：每次我将一个新元素 push_back 到向量中，所有已经存在的元素都取刚刚添加的元素的值。我还尝试使用迭代器以相同的结果恢复向量中的每个元素。有人可以告诉我这里有什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T15:14:14.857

问题是您只创建了一个`CDevice`. 每次您向后推时，您都会将一个指针向后推到同一个实例。

每次更新时，`pDevice->Device_Name`您都会更改该`Device_Name`设备的。所以实际上你有四个指向同一事物的指针。你指向的东西是你分配给它的姓氏。

您需要`CDevice`为每个`push_back`.

此外，您还需要考虑谁拥有这些新的 CDevice 实例。它是你的 CServers 类吗？如果是这样，那么当 CServers 被删除时，它将需要删除每个已实例化的 CDevice。您可以通过替换指针向量免费获得此行为：

`std::vector<CDevice*>`

带有智能指针向量。例如：

`std::vector<boost::unique_ptr<CDevice> >`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:18:49.847

您将设备名称分配四次，但每次都分配给您拥有*的唯一*CDevice 实例的 Device_Name 成员。*最后，唯一的*CDevice 实例的 Device_Name 成员具有您分配的最后一个值，“coelestium”。

如果您需要四个 CDevice，则必须*创建*其中四个：

```
pDevice1 = new CDevice;
pDevice1->Device_Name = "de";

pDevice2 = new CDevice;
pDevice2->Device_Name = " revolotiunibus";

.... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T15:13:16.673

您将相同的实例推送到向量上，然后重置该实例的字符串。

如果要在向量中使用不同的对象，则必须创建一个新对象：

```
pDevice = new CDevice;
pDevice->Device_Name = "de";
Devices.push_back(pDevice);

pDevice2 = new CDevice;
pDevice2->Device_Name = " revolotiunibus";
Devices.push_back(pDevice2);

// ... 
```

您的示例只是一遍又一遍地重置同一对象中的字符串，并将同一指针推到向量上 4 次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T15:17:02.780

您将指针推入向量，然后更改 Device_Name 字段。

```
void push_back ( const T& x ); 
```

由于您使用指针，push_back 函数复制您的指针并将其推送到向量中，函数不复制指针所指的元素，因此，在代码中将一个指针推送到向量中 4 次。

# c - Linux C Socket：accept() 调用时出现“错误的文件描述符”

> ID：11416396
> 
> 赞同：1
> 
> 时间：2012-07-10T15:11:04.757
> 
> 标签：c, linux, sockets

我正在使用 linux/socket/tcp 编写一个发送/接收项目，我创建了一些线程来发送或接收消息，并使用全局队列来存储消息代码：

```
void EnQueue (M_queue queue,char * message,char * target_IP,char * target_IP_BAK)
{
    char a;
    char  * m=&a;
    strcpy(m,target_IP);
    M_element node=(M_element)malloc(sizeof(struct MessageNode ));
    node->message=message;
    node->target_IP=target_IP;
    node->next=NULL;
    if(IsQueueEmpty(queue))
    {
     queue->rear=queue->front=node;
    }
    else
    {
        queue->rear->next=node;
        queue->rear=node;
    }
}
M_queue messages;
void* receive_message();
void* send_message(void* args);
int main()
{

    pthread_t in_thread,out_thread;

    messages=(M_queue)malloc(sizeof(struct MessageQueue));
    init(messages);
    int ret=pthread_create(&in_thread,NULL,receive_message,NULL);
    if(ret==-1)

    {
        perror("thread receive:");
    }

    while(1)
    {
        if(!IsQueueEmpty(messages))
        {

            M_element message=DeQueue(messages);

            pthread_create(&out_thread,NULL,send_message,(void*)message);

        }

    }
    pthread_join(in_thread,NULL);
    return 0;

}
void*  send_message(void * args)
{
  struct sockaddr_in  sockaddr_out;
  M_element message=(M_element)args;
  int cfd=socket(AF_INET,SOCK_STREAM,0);
  if(cfd==-1)
  {
      perror("send_socket");

      exit(1);
  }
  sockaddr_out.sin_family=AF_INET;
  sockaddr_out.sin_port=htons(9734);
  printf("%s\n",message->target_IP);
  sockaddr_out.sin_addr.s_addr=inet_addr(message->target_IP);
  int ret=connect(cfd,(struct sockaddr *)&sockaddr_out,sizeof(sockaddr_out));
  if(ret==-1)
  {
      perror("connect");
      offline_message(message->target_IP,message->message); 
      exit(1);
  }
  if(write(cfd,message->message,strlen(message->message)+1)==-1)
  {
      perror("write");
      exit(1);
  }
  close(cfd);
}
void*  receive_message()
{
    char  buf[256];
    char IP[256];
    memset(IP,0,256);
    int first_socket=socket(AF_INET,SOCK_STREAM,0);
    if(first_socket==-1)
    {
        perror("socket");
        exit(1);
    }
    struct sockaddr_in in_socketaddr;
    in_socketaddr.sin_family=AF_INET;
    in_socketaddr.sin_port=htons(9999);
    in_socketaddr.sin_addr.s_addr=INADDR_ANY;
    int ret=bind(first_socket,(struct  sockaddr *)&in_socketaddr,sizeof(in_socketaddr));
    if (ret==-1)
    {
        perror("bind");
        exit(1);
    }
    ret=listen(first_socket,10);
    if(ret==-1)
    {
        perror("listen");
        exit(1);
    }

    int accept_socket;

    while(1)
    {
        **//error occurs**
        **accept_socket=accept(first_socket,NULL,NULL);**
        printf("%d!",first_socket);
        if(accept_socket==-1)
        {
            perror("accept");
            exit(1);
        }
        int ret=read(accept_socket,buf,sizeof(buf));
        close(accept_socket);
        if(ret==-1)
        {
            perror("read1");
            exit(1);
        }

        findIP(buf,IP);
        **EnQueue(messages,buf,IP,IP);**
        printf("%d!",first_socket);

    }
    close(first_socket);
} 
```

我向应用程序发送消息“test”，accecpt() 运行良好，但我发送消息“test111111”，“错误文件描述符”在 accept() 调用时发生；当 EnQueue() 调用时，我发现“first_socket”发生了变化，但我找不到解决方案..任何人都可以帮助我，THX

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T15:30:12.743

看起来你有内存溢出。4 字节的测试数据不会溢出这么多，但 10 字节的覆盖足以造成麻烦。

最有可能的受害者是`first_socket`变量。如果它被覆盖，那么第二个`accept`将得到错误的数字。
尝试`first_socket`在每次通话之前打印`accept`，看看我是否正确。

编辑：正如 mark40 评论，该`EnQueue`函数超出了它的`a`变量。

# javascript - 不同浏览器中表格行上的 mousedown 事件处理程序

> ID：11416397
> 
> 赞同：1
> 
> 时间：2012-07-10T15:11:04.903
> 
> 标签：javascript, dom, cross-browser

我希望能够通过在命名表的每一行上注册一个 mousedown 事件来从表中选择一行（参见代码）。我正在 Firefox 14.0、Chrome 20.0.1132.47 和 IE 8（用于测试）中进行测试。

在事件处理程序中，我将元素的类型（标签名称）写入控制台，期望`TR`每次都是。这在 Firefox 中按预期工作，但 Chrome 和 IE 返回`TD`，即使处理程序已在`TR`.

```
<script>
var myFuncs = {
   // generic stop event bubbling up any further (DOM level2 and IE)   
   stopProp: function (event){
      if (!event) var event = window.event;
      event.cancelBubble = true;
      if (event.stopPropagation) event.stopPropagation();
   },
   // generic add event listener   
   addListener : function(elt,evt,listener){
      if (document.attachEvent){
         elt.attachEvent ("on"+evt,listener);
      }
      else {
         elt.addEventListener (evt,listener,false);
      }
   },
   // the function that is supposed to handle mousedown events on <tr> tags
   handleMousedown : function(evt) {
      myFuncs.stopProp(evt);
      elt = (window.event) ? window.event.srcElement : evt.currentTarget;
      console.log(elt.tagName);
   },
   // attach/add event listener to <tr> elements in named table
   registerEvts : function(){
      var tab = document.getElementById("dataGrid");
      var rows = tab.getElementsByTagName("tr");
      for (var ix=0; ix < rows.length; ix++){
         myFuncs.addListener (rows[ix],"mousedown",myFuncs.handleMousedown);
      }
   }
}

window.onload = myFuncs.registerEvts;
</script> 
```

有没有其他人遇到过这个问题？它会导致问题，因为我随后必须测试它是否是我正在处理的行或单元格。

# c# - 将自定义类的集合绑定到 TreeView

> ID：11416398
> 
> 赞同：4
> 
> 时间：2012-07-10T15:11:05.107
> 
> 标签：c#, winforms, collections, treeview

我正在尝试确定将自定义类的集合绑定到 TreeView 的最佳方法。

我目前有两个自定义类，一个保存在 Collection 中，一个保存在第一个类中的 Collection 中：

```
Collection<Device> _devices = new Collection<Device>();

class Device
{
    public ulong DeviceID { get; private set; }

    private List<Capability> _capabilities = new List<Capability>();

    public string FriendlyName{ get; set; }

    public Capability AddCapability(Capability capability)
    {
        _capabilities.Add(capability);
        return capability;
    }

   public List<Capability> GetCapabilities()
   {
       // not safe yet
       return _capabilities;
   }
}

abstract class Capability
{
    public uint CapabilityIndex { get; private set; }
    public string FriendlyName{ get; set; }
} 
```

我正在尝试`TreeView`显示设备的集合，这些设备在展开时会列出功能。

我考虑过的选项包括：

*   循环并从我要显示的数据中创建 TreeNode 对象（但我不确定在选择时如何最好地引用原始对象）
*   从 TreeNode 类继承，但这感觉很难看，因为我将相同的数据存储在多个地方（而且大多数时候我不需要它们作为 TreeNodes，所以感觉像是在浪费资源）

有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T15:28:44.190

在处理 TreeView 时，我通常最终生成一个从 TreeNode 继承的包装类，它包含我作为节点显示的实际对象。这样我就可以绑定到 TreeView，获得我需要的层次结构，而且我的业务类实际上不必继承 UI 组件。它在处理 TreeView 事件时也能很好地工作，因为您可以检查节点的类型，并且可以以不同的方式处理不同类型的节点 - 显示不同的 UI 或其他。

```
private class FooNode : TreeNode
{
    public FooNode(Foo foo)
    {
        this.Text = foo.ToString(); //Or FriendlyName
        this.Foo = foo;
        this.Foo.Bars.ForEach(x => this.Nodes.Add(new BarNode(x)));
    }

    public Foo Foo
    {
        get;
        private set;
    }
}

private class BarNode : TreeNode
{
    public BarNode(Bar bar)
    {
        this.Text = bar.ToString(); //Or FriendlyName
        this.Bar = bar;
    }

    public Bar Bar
    {
        get;
        private set;
    }
} 
```

这个例子可能正是你所说的第二个选项的意思。在这种情况下，我投票给第二个选项！

# android - 特定的 android 处理器详细信息

> ID：11416402
> 
> 赞同：1
> 
> 时间：2012-07-10T15:11:21.630
> 
> 标签：android, android-layout, android-intent, android-emulator, android-hardware

我浏览了论坛并获得了一种将android处理器信息作为字符串获取的方法！好吧，它会返回许多与用户无关的信息。我只想得到具体的细节，比如

处理器名称或类型 可用内核 缓存大小 处理器版本

这是我找到的获取信息的方法！如果有人能告诉我一种获取具体细节的方法，请帮助我！:)

```
 private String getInfo() {
    StringBuffer sb = new StringBuffer();
    sb.append("abi: ").append(Build.CPU_ABI).append("\n");
    if (new File("/proc/cpuinfo").exists()) {
        try {
            BufferedReader br = new BufferedReader(new FileReader(new  File("/proc/cpuinfo")));
            String aLine;
            while ((aLine = br.readLine()) != null) {
                sb.append(aLine + "\n");
            }
            if (br != null) {
                br.close();
            }
        } catch (IOException e) {
            e.printStackTrace();
        } 
    }
    return sb.toString();
    } 
```

而且我对android应用程序开发有点陌生，所以请帮助我！:)（我的研究项目）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:39:20.047

我从可用的详细信息中获取处理器名称。你可以改变你想要的。

```
while ((aLine = br.readLine()) != null) {
                    if(aLine.contains("Processor"))
                    {
               String pro=aLine;
               Log.v("Processor>>>",pro);
                    }
                    sb.append(aLine + "\n");
                } 
```

# c++ - GCC 4.7.0 无法链接到 SDLmain 和 SDL

> ID：11416406
> 
> 赞同：0
> 
> 时间：2012-07-10T15:11:24.963
> 
> 标签：c++, gcc, sdl

我尝试使用 Lazy Foos 的教程配置 CodeBlocks（使用 gcc 4.4.1）以使用 SDL，它工作正常，所有内容都已编译、链接等。当我将编译器更改为 4.7.0 时出现问题。使用我得到的完全相同的设置：

```
ld.exe  cannot find -lSDLmain
ld.exe  cannot find -lSDL 
```

我怎样才能使这项工作？

PS：尝试使用完整路径链接库（不起作用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:15:30.727

不要忘记使用 -Lpath_to_your_library 指定 ld 在哪里找到库。

就像使用 -Iyour_path_to_your_headers 告诉 gcc 在哪里找到头文件一样。

# java - java中的回调案例

> ID：11416408
> 
> 赞同：-2
> 
> 时间：2012-07-10T15:11:39.253
> 
> 标签：java, callback

什么是回调，哪些情况确实存在？回调有不同的情况，但我无法在任何地方找到它们。每个回调的事件是什么？任何人都可以提供一些示例，指出产生事件的代码部分（如果存在）和处理事件的代码部分。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:13:38.840

我相信你在谈论事件监听器。查看 Java 教程页面：[http ://docs.oracle.com/javase/tutorial/uiswing/events/intro.html](http://docs.oracle.com/javase/tutorial/uiswing/events/intro.html)

# asp.net-web-api - 在Web API中，当一种方法包含可空值类型作为参数时，如何重载Get

> ID：11416418
> 
> 赞同：8
> 
> 时间：2012-07-10T15:12:00.917
> 
> 标签：asp.net-web-api, visual-studio-2012

**更新**

我最初的假设是可选参数是问题的原因。这似乎是不正确的。相反，当其中一个方法包含某些参数的可空值类型（例如 int? ）时，这似乎是多个操作方法的问题。

我正在使用 Visual Studio 2012 RC，并且刚刚开始使用 Web API。我遇到了一个问题并收到错误消息“在与请求匹配的控制器 'Bars' 上未找到任何操作。”

我有一个酒吧控制器。它有一个接收可选参数的 Get() 方法。

```
public IEnumerable<string> Get(string h, string w = "defaultWorld", int? z=null)
{
    if (z != 0)
        return new string[] { h, w, "this is z: " + z.ToString() };
    else
       return new string[] { h, w };
} 
```

因此，我使用以下网址对其进行了测试

*   /api/bars?h=你好
*   /api/bars?h=hello&w=world
*   /api/bars?h=hello&w=world&z=15

它适用于所有三个。

然后，我去添加另一个 Get() 方法，这次使用单个 id 参数

```
 public string Get(int id)
 {
     return "value";
 } 
```

我再次测试网址。这次 /api/bars?h=hello&w=world 和 api/bars?h=hello 失败了。错误消息是**“未在与请求匹配的控制器 'Bar' 上找到任何操作。”**

出于某种原因，这两种方法不能很好地结合在一起。如果我删除`Get(int id)`，它的工作原理。如果我改变int？z 到字符串 z，然后它可以工作（但是它需要在我的操作方法中转换对象！）。

为什么 Web API 会这样做？这是一个错误还是设计使然？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T15:07:58.007

我还没有找到这个问题的真正答案（为什么 Web API 会这样做），但我有一个解决方法允许重载 Get()。诀窍是将参数值包装在一个对象中。

```
public class Foo
{
    public string H { get; set; }
    public string W { get; set; }
    public int? Z { get; set; }
} 
```

并将 Bars 控制器修改为

```
public IEnumerable<string> Get([FromUri] Foo foo)
{
    if (foo.Z.HasValue)
        return new string[] { foo.H, foo.W, "this is z: " + foo.Z.ToString() };
    else
        return new string[] { foo.H, foo.W, "z does not have a value" };
} 
```

`[FromUri]`是必要的，因为默认情况下 WebAPI 不使用 URI 参数来形成“复杂”对象。一般的想法是复杂对象来自`<form>`动作，而不是 GET 请求。

我仍然会继续检查为什么 Web API 会以这种方式运行，以及这是否真的是一个错误或预期的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T17:40:48.130

您可以通过在路由中添加操作参数来重载 WEB API 控制器方法。

```
 routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new {action = "Get", id = RouteParameter.Optional }
        ); 
```

一旦您在路线中进行了此更改，您就可以调用您的方法，例如

```
/api/bars/get?id=1
/api/bars/get?h=hello&w=world&z=15 
```

希望这有帮助。

奥马尔

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T05:52:21.113

问题解决了，但是，它留下了一个额外的问题。问题似乎是重载的 Action 方法在可选参数方面存在问题。

所以新的问题是为什么会这样，但我会把它留给比我低级别的人；）

但这是个好消息。我不喜欢你报告的问题，并且走复杂类型的路线，虽然很高兴知道，但这只是一个 jerry rig 修复，并且会很差地反映 Web Api 中的某些东西是如何工作的。所以好消息是，如果你有这个问题，它可以通过简单地取消可选参数来解决，做好的 ol' 重载路线。好消息，因为这绝不是一个 jerry rig 修复，只是让你失去了一些可选参数的便利：

```
public class BarsController : ApiController
{
    public string Get(int id)
    {
        return "value";
    }

    public IEnumerable<string> Get(string h)
    {
        return Get(h, null, null);
    }

    public IEnumerable<string> Get(string h, string w)
    {
        return Get(h, w, null);
    }

    public IEnumerable<string> Get(string h, string w, int? z) 
    {
        if (z != 0)
            return new string[] { h, w, "this is z: " + z.ToString() };
        else
            return new string[] { h, w };
    }
} 
```

干杯

# javascript - 正则表达式 - 匹配

> ID：11416420
> 
> 赞同：0
> 
> 时间：2012-07-10T15:12:06.417
> 
> 标签：javascript, regex, backbone.js

**编辑：**我可能应该提到这是一个 Backbone.js 路由。拆分它不是一种选择。

使用以下字符串：

```
!/example/c/0/0/0/0 
```

我正在尝试使用“match()”来提取斜线之间的值。我的问题是最后一项（“/ 0”）可能并不总是在字符串中。这是我目前拥有的：

```
'!/example/c/0/0/0/0'.match(/^!(\/[A-z0-9\-_]+|)\/c\/([0-9]+)\/([0-9]+)\/([0-9]+/) 
```

这将返回一个数组，其中包含 'example'、'0'、'0'、'0' 如果示例存在，则返回 ''、'0'、'0'、'0' 如果示例不存在......所以在最后我想看到的结果是：

```
'example', '0', '0', '0', '' 
```

当最后一项不存在或：

```
'example', '0', '0', '0', '0' 
```

当它存在时。所以基本上是最后一个项目之前的斜线让我感到震惊！任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T15:15:27.993

更喜欢拆分，因为您知道分隔符，这会更容易！

```
var toSplit = "!/example/c/0/0/0/0";
var splitted = toSplit.split('/'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:36:28.000

该`.split()`函数可能足以满足您的要求，但您正在寻找的正则表达式如下：

```
/^!\/([A-z0-9\-_]+)\/c\/(\d+)\/(\d+)\/(\d+)\/(\d*)/

'!/example/c/0/0/0/'.match(/^!\/([A-z0-9\-_]+)\/c\/(\d+)\/(\d+)\/(\d+)\/(\d*)/)
["!/example/c/0/0/0/", "example", "0", "0", "0", ""]

'!/example/c/0/0/0/0'.match(/^!\/([A-z0-9\-_]+)\/c\/(\d+)\/(\d+)\/(\d+)\/(\d*)/)
["!/example/c/0/0/0/0", "example", "0", "0", "0", "0"] 
```

`\d`是 的快捷方式`[0-9]`，`*`表示*重复 0 次或多次*，而`+`表示*重复 1 次或多次。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T16:11:49.580

如果您不需要对值进行严格检查，则可以使用以下内容：

```
"!/example/c/0/0/0/0".match(/^!\/([^/]+)\/c\/([^/]+)\/([^/]+)\/([^/]+)\/([^/]*)/); 
```

请记住，据我所知，您无法仅使用您正在寻找的确切数组`match`：数组的第一个元素是整个匹配的字符串，而不是“示例”。

# javascript - Javascript/Jquery Super Scrollorama 导航问题

> ID：11416426
> 
> 赞同：3
> 
> 时间：2012-07-10T15:12:37.560
> 
> 标签：javascript, jquery, superscrollorama

在我目前正在开发的一个 Wordpress 网站上，我的客户希望首页的不同部分从底部向上滑动并覆盖前一部分，就像擦除或滑动过渡一样。[使用在这里找到的超级滚动条： http](http://johnpolacek.github.com/superscrollorama/) ://johnpolacek.github.com/superscrollorama/ ，我设法达到了预期的结果。

接下来，我只需要在首页创建一个导航菜单。我这样做了，并在页面上的各个不同点设置了锚点。当我单击导航菜单链接时，我还使用 scrollTo 库来滚动动画。但是，我遇到了一些问题：

*   当在顶部并单击“展示”时，它会将我带到展示部分，但产品部分（紧随其后的 div）与其重叠。
*   其他 div 似乎有以下 div 与当前 div 重叠的相同问题
*   我只能向前导航。当我尝试向后退时，它不会（“主页”除外）
*   我认为这可能与 div 的 CSS“top”属性有关，所以我尝试在每次单击功能启动时重置它们，但它不起作用。所以我暂时把它删了。
*   当前设置 javascript 以防止滚动到锚点的默认操作，而是将其设置为滚动到实际的 div 本身。但是，我仍然遇到同样的问题。

**编辑：**我解决了上述所有问题，但现在出现了一个新问题。如果您滚动浏览该站点，然后调整浏览器窗口的大小并向上滚动，您会注意到底部的一部分被切断了。我查看了 superscrollorama 页面，它也有同样的问题。我希望有人知道如何解决这个问题。

这是我目前正在开发的网站：http: [//breathe.simalam.ca/](http://breathe.simalam.ca/)

这是滚动的javascript：

```
$(document).ready(function() {
jQuery('.home-link').click(function(e){
    e.preventDefault();
    jQuery(window).scrollTo(0, 1000, {queue:true});
});
jQuery('.showcase-link').click(function(e){
    e.preventDefault();
    jQuery(window).scrollTo('#showcase_content', 1000, {queue:true});
});
jQuery('.products-link').click(function(e){
    e.preventDefault();
    jQuery(window).scrollTo('#products_content', 1000, {queue:true});

});
jQuery('.about-link').click(function(e){
    e.preventDefault();
    jQuery(window).scrollTo('#about_content', 1000, {queue:true});

});
jQuery('.locator-link').click(function(e){
    e.preventDefault();
    jQuery(window).scrollTo('#locator_content', 1000, {queue:true});

});
jQuery('.contact-link').click(function(e){
    e.preventDefault();
    jQuery(window).scrollTo('#contact_content', 1000, {queue:true});

}); }); 
```

滚动代码：

```
$(document).ready(function() {
    $('#wrapper').css('display','block');
    var controller = $.superscrollorama();
    var pinDur = 4000;  /* set duration of pin scroll in pixels */

    // create animation timeline for pinned element
    var pinAnimations = new TimelineLite();
    pinAnimations
    .append([
        TweenMax.to($('#showcase'), .5, {css:{top:0}})
    ], .5)
    .append([
        TweenMax.to($('#products'), .5, {css:{top:0}})
    ], .5)
    .append([
        TweenMax.to($('#about'), .5, {css:{top:0}})
    ], .5)
    .append([
        TweenMax.to($('#locator'), .5, {css:{top:0}})
    ], .5)
    .append([
        TweenMax.to($('#contact'), .5, {css:{top:0}})
    ], .5)
    .append(TweenMax.to($('#pin-frame-unpin'), .5, {css:{top:'100px'}}));

    controller.pin($('#examples-pin'), pinDur, {
        anim:pinAnimations, 
        onPin: function() {
            $('#examples-pin').css('height','100%');
        }, 
        onUnpin: function() {
            $('#examples-pin').css('height','2000px');
        }
    }); }); 
```

所有部分 div 都在父 div 内。部分 div 的高度、宽度和顶部均为 100%。

包含所有这些部分 div 的父 div 如下：

```
#examples-pin { 
 position: relative; /* relative positioning for transitions to work? */
 width: 101%; /* max width */
 height: 2000px; /* height of 2000px for now */
 overflow: hidden; /* hide the overflow for transitions to work */
 margin-bottom: -200px; /* negative bottom margin */
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T18:57:11.293

总而言之，pushFollowers: false 用于所有引脚并通过 div 手动间隔并在固定元素后填充是解决方案。

看起来这个问题将在下一个版本的 superscrollorama 中得到解决。我会看一下[https://github.com/johnpolacek/superscrollorama/issues](https://github.com/johnpolacek/superscrollorama/issues) 第 94 期，他们有新版本的演示代码。

# php - 如何判断加载了哪些 php.ini 文件？

> ID：11416428
> 
> 赞同：0
> 
> 时间：2012-07-10T15:12:39.727
> 
> 标签：php

看着我的`php.info`，它说的是“加载的配置文件：C:\xampp\php\php.ini”。

然而我在 PHP 文件夹中有两个 ini 文件，一个是“开发”，另一个是“生产”。

我在任何一个ini文件中都看不到“加载的配置文件”的值。

那么，我如何知道正在使用哪个以及在哪里管理它？

我的目标是只有一个ini文件并禁用另一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:15:23.463

只需将要保留的名称重命名为 C:\xampp\php\php.ini。您可以保留其他 ini 文件，php 将只使用 C:\xampp\php\php.ini 中的那个。

# c# - 将非 Blittable 结构从 C# 编组到 C++

> ID：11416433
> 
> 赞同：1
> 
> 时间：2012-07-10T15:13:02.047
> 
> 标签：c#, c++, string, pinvoke, marshalling

我正在重写我公司的库代码中的一个过度设计且无法维护的块，该库代码是 C# 和 C++ 之间的接口。我已经开始研究 P/Invoke，但似乎没有太多可访问的帮助。

我们将包含各种参数和设置的结构传递给非托管代码，因此我们定义了相同的结构。我们不需要在 C++ 端更改任何这些参数，但我们确实需要在 P/Invoked 函数返回后访问它们。

我的问题是：

1.  传递字符串的最佳方法是什么？有些很短（可以由我们设置的设备 ID），有些是文件路径（可能包含亚洲字符）
2.  我应该将 IntPtr 传递给 C# 结构，还是应该让 Marshaller 通过将结构类型放入函数签名中来处理它？
3.  我是否应该担心任何非指针数据类型，如 bool 或 enums（在其他相关结构中）？我们在 C++ 中设置了将警告视为错误标志，因此我们不能使用枚举的 Microsoft 扩展来强制数据类型。
4.  P / Invoke实际上是要走的路吗？有一些关于隐式 P/Invoke 的 Microsoft 文档说它更加类型安全和高性能。

作为参考，这是我迄今为止编写的一对结构体：

C++

```
/**
    Struct used for marshalling Scan parameters from managed to unmanaged code.
*/
struct ScanParameters
{
    LPSTR deviceID;
    LPSTR spdClock;
    LPSTR spdStartTrigger;
    double spinRpm;
    double startRadius;
    double endRadius;
    double trackSpacing;
    UINT64 numTracks;
    UINT32 nominalSampleCount;
    double gainLimit;
    double sampleRate;
    double scanHeight;
    LPWSTR qmoPath; //includes filename
    LPWSTR qzpPath; //includes filename
}; 
```

C＃

```
/// <summary>
/// Struct used for marshalling scan parameters between managed and unmanaged code.
/// </summary>
[StructLayout(LayoutKind.Sequential)]
public struct ScanParameters
{
    [MarshalAs(UnmanagedType.LPStr)]
    public string deviceID;
    [MarshalAs(UnmanagedType.LPStr)]
    public string spdClock;
    [MarshalAs(UnmanagedType.LPStr)]
    public string spdStartTrigger;
    public Double spinRpm;
    public Double startRadius;
    public Double endRadius;
    public Double trackSpacing;
    public UInt64 numTracks;
    public UInt32 nominalSampleCount;
    public Double gainLimit;
    public Double sampleRate;
    public Double scanHeight;
    [MarshalAs(UnmanagedType.LPWStr)]
    public string qmoPath;
    [MarshalAs(UnmanagedType.LPWStr)]
    public string qzpPath;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:19:57.203

blittable 类型是一种在托管代码和非托管代码之间具有共同表示的类型，因此可以在它们之间传递很少或没有问题，例如字节、int32 等。

非 blittable 类型没有通用表示，例如 System.Array、System.String、System.Boolean 等。

通过为非 blittable 类型指定 MarshalAs 属性，您可以告诉编组器应该将其转换为什么。有关更多信息，请参阅[有关 Blittable 和 Non-Blittable 类型的文章](http://msdn.microsoft.com/en-us/library/75dwhxf7%28v=VS.100%29.aspx)

> 1 - 传递字符串的最佳方式是什么？有些很短（可以由我们设置的设备 ID），有些是文件路径（可能包含亚洲字符）

StringBuilder 通常被推荐为最容易使用的，但我经常使用纯字节数组。

> 2 - 我应该将 IntPtr 传递给 C# 结构，还是应该让 Marshaller 通过将结构类型放在函数签名中来处理它？

如果该方法需要一个指针，则传递一个 IntPtr ，尽管在许多情况下您可能会摆脱一个 ref ，具体取决于它将用于什么。如果它需要在同一个地方停留很长时间，那么我将使用 Marshal 手动分配内存并传递生成的 IntPtr。

> 3 - 我是否应该担心任何非指针数据类型，如 bool 或 enums（在其他相关结构中）？我们在 C++ 中设置了将警告视为错误标志，因此我们不能使用枚举的 Microsoft 扩展来强制数据类型。

一旦你用正确的编组属性设置了所有东西，我不明白你为什么需要担心。如果对属性有疑问，如果该结构只被托管代码使用，那么该属性将不会被使用。

> 4 - P/Invoke 实际上是要走的路吗？有一些关于隐式 P/Invoke 的 Microsoft 文档说它更加类型安全和高性能。

无法对此发表评论，您已经进入了 Visual C++ 领域。

# macros - BeanShell 宏中的 exec() 导致 jEdit 在返回非零退出代码时挂起

> ID：11416434
> 
> 赞同：2
> 
> 时间：2012-07-10T15:13:07.453
> 
> 标签：macros, exec, beanshell, jedit

我有一个 jEdit BeanShell 宏，当我保存它们时，它通过 Maruku 运行我的 Markdown 文件：

```
if (buffer.getMode().toString().equals("markdown")) {
  cmd = "C:\\Ruby\\bin\\maruku.bat -o " + buffer.getDirectory() + buffer.getName().replaceAll("markdown$", "html") + " " + buffer.getPath(); 
  exec(cmd);
} 
```

当 Markdown 文件有效时，这很有效。但是如果我犯了一个错误，jEdit 就会永远等待`exec()`“成功”的调用，它永远不会。发生这种情况时，我必须终止 jEdit 的`javaw.exe`进程并从命令行手动运行 Maruku 以发现错误，例如：

```
E:\docs>maruku mydoc.markdown

 ___________________________________________________________________________
| Maruku tells you:
+---------------------------------------------------------------------------
| Could not find ref_id = "17" for md_link(["17"],"17")
| Available refs are []
+---------------------------------------------------------------------------
!C:/Ruby/lib/ruby/gems/1.8/gems/maruku-0.6.0/lib/maruku/errors_management.rb:49:in `maruku_error'
!C:/Ruby/lib/ruby/gems/1.8/gems/maruku-0.6.0/lib/maruku/output/to_html.rb:716:in `to_html_link'
!C:/Ruby/lib/ruby/gems/1.8/gems/maruku-0.6.0/lib/maruku/output/to_html.rb:970:in `send'
!C:/Ruby/lib/ruby/gems/1.8/gems/maruku-0.6.0/lib/maruku/output/to_html.rb:970:in `array_to_html'
!C:/Ruby/lib/ruby/gems/1.8/gems/maruku-0.6.0/lib/maruku/output/to_html.rb:961:in `each'
\___________________________________________________________________________
Not creating a link for ref_id = "17". 
```

然后我重新启动 jEdit，修复错误并重新保存文件，此时宏成功。

**我怎样才能让我的宏更有弹性地要么帮助地死去（显示 Maruku 的错误输出），要么至少默默地死去，这样我就不必杀死 jEdit？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T20:42:14.610

我在宏中使用了一个稍微不同的调用来执行系统命令：

```
Runtime.getRuntime().exec("asdf"); 
```

当我运行它时，Jedit 会给我一个弹出窗口： ![<code>exec</code> 失败时的 Jedit 弹出窗口](../Images/2a764b09f55c20753c879733f7d81a9b.png)

我正在使用 JDK 1.6.0_26 运行 Jedit 4.4.1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T06:30:55.853

这里可能`ErrorList`涉及插件并发生死锁。[该错误](https://sourceforge.net/tracker/index.php?func=detail&aid=3526070&group_id=588&atid=565475)已修复，尽管该修复尚未发布。无论如何，在错误跟踪器中，您可能会找到解决问题的方法。

# subdomain - 为什么高流量站点使用串行子域来获取数据？

> ID：11416435
> 
> 赞同：2
> 
> 时间：2012-07-10T15:13:11.850
> 
> 标签：subdomain

我见过很多网站，如 pinterest、G+ 等，它们使用不同的子域来获取所需的数据。他们为什么要那样做？一个静态子域与 pinterest 的子域之间是否有任何区别：

`media-cahce-ec0.pinterest.com
media-cahce-ec1.pinterest.com
media-cahce-ec2.pinterest.com
.
.
.
media-cahce-ec9.pinterest.com`

我提前感谢您的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:17:22.533

原因很简单：每个子域指的是不同的服务器。ping 它们，您会看到 IP 不同。这是一个**负载平衡器**，因此 Web 服务器不必处理图像和下载的流量。

![ping 两个不同的服务器](../Images/8dcd5896eadce0d968d6a749f4afee6c.png)

# actionscript-3 - SecurityError：错误 #2152：不允许全屏模式。

> ID：11416436
> 
> 赞同：4
> 
> 时间：2012-07-10T15:13:14.513
> 
> 标签：actionscript-3, flash, fullscreen

我有一个 Flash 播放器，它具有全屏功能。这在 FF 和 MAC Chrome 中不起作用。并引发如下错误。

```
SecurityError: Error #2152: Full screen mode is not allowed.
    at flash.display::Stage/set displayState()
    at com.IQMediaCorp.core::IQMediaCorpPlayer/ToggleFullScreen() 
```

我已经用谷歌搜索了这个问题，并且已经验证了以下几点

1.  我的播放器有`allowfullscreen = true`html 对象/编码元素。
2.  方法`ToggleFullScreen`是鼠标点击事件

下面是`ToggleFullScreen`方法的代码

```
public function ToggleFullScreen(e:MouseEvent)
        {

                if (stage.displayState == StageDisplayState.FULL_SCREEN_INTERACTIVE)
                {
                    bKnob.alpha=0;
                    bigScreen=true;                 
                    stage.displayState=StageDisplayState.NORMAL;
                }
                else
                {
                    bigScreen=false;
                    stage.displayState=StageDisplayState.FULL_SCREEN_INTERACTIVE;
                    bKnob.alpha=0;

                }
        } 
```

我不明白为什么它不起作用。有人可以帮忙吗？？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T16:04:23.723

是的，发生这种情况的原因是您`StageDisplayState.FULL_SCREEN_INTERACTIVE`在 Flash 中的版本不能低于 11.3

试试`StageDisplayState.FULL_SCREEN`吧！

因此，请检查您正在构建的 Flash 版本是来自[displayState 上的 Adob​​e 文档的摘录](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/StageDisplayState.html)

运行时版本：Flash Player 11.3、AIR 1.0、Flash Lite 4

指定舞台处于启用键盘交互的全屏模式。从 Flash Player 11.3 开始，AIR 应用程序和基于浏览器的应用程序都支持此功能。

# javascript - 切换 DIV 和 SPAN 文本 onclick

> ID：11416438
> 
> 赞同：0
> 
> 时间：2012-07-10T15:13:15.470
> 
> 标签：javascript, html, css

一段时间以来，我一直在尝试模仿这个网站[http://www.designrattan.co.uk/daybed/apple](http://www.designrattan.co.uk/daybed/apple)。

我需要创建一个页面，客户可以在其中单击“查看 360”，然后更改 DIV 以显示产品 360（我已经有代码）。

我还需要这样做，以便在单击跨度文本时更改为“返回图像”

我已经尝试了很多次，但未能让 Javascript 代码和 HTML 一起工作。我的努力可以在这里看到：http: [//designliving.tk/winchester-rattan-garden-round-table-set](http://designliving.tk/winchester-rattan-garden-round-table-set)

正如您所看到的，它完全失败了，因为它不会更改 DIV，它只是显示一个新的 DIV。此外，当您单击按钮时，它会变为文本而不是新按钮。

我当前的代码在这里：

```
<div id="product_images">
    <div id="product_image_preview_holder" class="clearfix">

<script language="javascript"> 
function toggle() {
   var ele = document.getElementById("toggleText");
   var text = document.getElementById("displayText");
   if(ele.style.display == "block") {
      ele.style.display = "none";
      text.innerHTML = "hello";
   }
   else {
      ele.style.display = "block";
      text.innerHTML = "hide";
   }
} 
</script>

         <a id="displayText" href="javascript:toggle();" class="s_button_1 s_main_color_bgr" style="<?php if ($tbData->is_mobile == '0'): ?>position: relative;<?php else: ?>position: absolute;<?php endif; ?> z-index:99999;">
         <span class="s_text s_icon_24"><span class="s_icon"></span> View 360</span></a>
         <div id="toggleText" style="display: none; position: relative; z-index:99998;" ><?php if ($tags): ?><link rel="stylesheet" type="text/css" href="magic360/magic360/magic360.css" /><script type="text/javascript"  src="magic360/magic360/magic360.js"></script><?php foreach ($tags as $tag): ?><center><a class="Magic360" href="#" onclick="return false;" rel="columns:15; filename:<?php echo $tag['tag']; ?>-{col}.jpg;" id="bar"><img src="magic360/images/apple/<?php echo $tag['tag']; ?>-01.jpg"/ ></a></center><?php endforeach; ?><?php else: ?><?php endif; ?>               
         </div>
    </div>
</div> 
```

虽然我觉得上面的代码相当混乱，因为我一直在摆弄它来尝试让它工作？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T15:21:21.387

你可以很容易地用 jQuery 做到这一点：

```
$('#toggleDiv').toggle(function() {
    $('#img360').hide();
    $('#imgNormal').show();
    $(this).html('View 360');
}, function() {
    $('#img360').show();
    $('#imgNormal').hide();
    $(this).html('Hide');
});​ 
```

**JSFiddle**
[http://jsfiddle.net/LDVun/](http://jsfiddle.net/LDVun/)

# codeigniter - codeigniter 中的新控制器目录服务于 404

> ID：11416442
> 
> 赞同：0
> 
> 时间：2012-07-10T15:13:36.103
> 
> 标签：codeigniter, controller, http-status-code-404

我的控制器目录下有目录可以完美地服务。但是，在该级别上创建任何新目录都会导致每次 404。我所做的只是回响你好世界。我相信这是一个目录问题。权限与正在工作的目录和文件相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:17:03.503

`.htaccess`CodeIgniter的目录中有一个`/application`阻止您直接访问该目录中的文件。

这样做是为了设计没有人可以直接访问您的代码。你应该考虑不偏离这一点。

# unit-testing - 单元测试，内置生产依赖项

> ID：11416443
> 
> 赞同：4
> 
> 时间：2012-07-10T15:13:36.563
> 
> 标签：unit-testing, c#-4.0

我正在阅读单元测试的艺术”，并且有一个特定的段落我不确定。

“您可能希望避免使用基类而不是接口的原因之一是生产代码中的基类可能已经（并且可能具有）您必须了解并覆盖的内置生产依赖项. 这使得实现派生类进行测试比实现一个接口更难，这让你确切地知道底层实现是什么，并让你完全控制它。

有人可以给我一个内置生产依赖的例子吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T15:20:28.250

我对此的解释基本上是任何你无法控制底层实现但仍然依赖它的地方。这可能在您自己的代码或第三方库中。

就像是：

```
class MyClass : BaseConfigurationProvider
{
}

abstract class BaseConfigurationProvider
{
    string connectionString;

    protected BaseConfigurationProvider()
    {
        connectionString = GetFromConfiguration();
    }
} 
```

这依赖于从哪里返回连接字符串，可能是配置文件，也可能是随机文本文件 - 无论哪种方式，对于`MyClass`.

而给定一个接口也是一样的：

```
class MyClass : IBaseConfigurationProvider
{ 
    string connectionString;

    public MyClass(IBaseConfigurationProvider provider)
    {
        connectionString = provider.GetConnectionString();
    }
}

interface IBaseConfigurationProvider
{
    string GetConnectionString();
} 
```

您至少可以完全控制实现，并且使用接口意味着可以在单元测试期间使用实现的测试版本，或者您可以将依赖项注入到消费类中（就像我在上面所做的那样）。在这种情况下，依赖于解析连接字符串的需要。测试可以提供不同的字符串或空字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:18:46.753

我能想到的一个例子是在 asp.net 中使用 Session 变量（我是一个 .net 人）
，因为你无法控制 asp.net 如何填充会话变量，你不能简单地通过制作一个测试用例来测试它将不得不以某种方式覆盖它或制作一个模拟对象

，这是因为在测试时所有上下文和 cookie 都不存在

# java - 基于 Java 的图标移动

> ID：11416446
> 
> 赞同：0
> 
> 时间：2012-07-10T15:13:38.980
> 
> 标签：java, game-physics

我有以下代码，它在java应用程序屏幕中围绕框的周边移动一个图标，首先向上移动屏幕19次然后向右转，直到它回到其原始起始位置之前的一步 -

```
public class MyClass {
public static void moveNTimes(MyObject main, int numberOfMoves) { 
for(int i = 0; i < numberOfMoves; i++) { 
    main.move(); 

    } 
}
public static void main(String[] args) {

    MyObject main = new MyObject();

   for (int i = 19; i >=0; i--){
       moveNTimes(main, i);
   main.turnRight(); 

   i = i + 1;

       }
   }
} 
```

我的问题是，当它到达盒子周边的尽头时，我需要它变成下一行，这将有 18 个位置围绕下一个周边移动，然后是 17 个等，直到图标在中心完成屏幕。

有没有办法对代码应用计数，以便知道何时提取原始数字集之一？我已经成功地做到了这一点，只需重复代码，每次手动设置的整数减一。现在，一旦完成第一个边界，图标就会停止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:17:22.467

以下情况如何：

```
for(int run=0 ; run<19 ; run++) {
    for(int lc1=0 ; lc1<19-run ; lc1++)
        main.move();
    main.turnRight();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:18:05.447

您可以创建一个将移动次数作为参数的方法：

```
public void moveNTimes(YourObject main, int numberOfMoves) {
    for(int i = 0; i < numberOfMoves; i++) {
        main.move();
    }
} 
```

并根据需要多次调用该方法，而无需复制代码：

```
for (int i = 19; i >=0; i--) {
    moveNTimes(main, i);
} 
```

或者

`moveNTimes(int numberOfMoves)`您可以向您的主要对象添加一个方法。

笔记：

*   您可以在 for 循环中声明一个变量
*   `i = i + 1`可以写`i++`

**编辑**

您的描述不是很清楚，但这可能是您要求的：

```
for (int i = 19; i >= 2; i--){
    for (int j = 0; j < 3; j++) {
        moveNTimes(main, i);
        main.turnRight(); 
    }
} 
```

这将向上移动 19 次，然后向右移动 19 次，向下移动 18 次，向左移动 18 次，向上移动 18 次，向右移动 18 次，向下移动 17 次等，并且应该在框的中间完成（最后你可能需要额外移动，不确定）。

# javascript - 从 Javascript 访问二维数组

> ID：11416447
> 
> 赞同：-5
> 
> 时间：2012-07-10T15:13:40.080
> 
> 标签：javascript, arrays, matrix

我有一个二维数组，其中存储了有关 NPC 的数据：

```
// id is just NPC number
NPC[id][x] = ; // here is stored the x coordinate
NPC[id][y] = ; // here is stored the y coordinate 
```

NPC矩阵中还存储了有关NPC的其他数据，我想访问它们，但我不知道要更改的NPC的ID。我只知道他的 x 和 y 坐标。怎么查到他的id？

PS我是菜鸟，我知道这种管理NPC的方式是蹩脚和糟糕的编程，但现在改变它为时已晚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:20:25.027

如果您不知道外部索引，则必须遍历数组中的每个元素并将它们的 x/y 坐标值与给定坐标进行比较，然后在找到匹配项或某个哨兵时返回 ID如果您在没有找到匹配项的情况下到达终点，则价值。

# rest - 骨干网发送 Post 数据编码为查询字符串

> ID：11416449
> 
> 赞同：6
> 
> 时间：2012-07-10T15:13:48.053
> 
> 标签：rest, backbone.js, http-post, url-encoding

我正在创建一个连接到 RESTful 后端的主干应用程序。当我在模型上调用 save() 时，它将发布数据作为字符串化 JSON 发送：

```
{"firstName":"first","lastName":"last","Email":"email@gmail.com"} 
```

但我的服务器希望它像查询字符串一样格式化：

```
firstName=first&lastName=last&Email=email@gmail.com 
```

有没有办法让主干以不同的方式发送它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T19:47:49.387

Backbone 没有提供任何开箱即用的东西。
但是很容易根据您的需要覆盖和定制它。

看看源代码： [http ://documentcloud.github.com/backbone/docs/backbone.html](http://documentcloud.github.com/backbone/docs/backbone.html)

并检查 call `save`，它将`sync`在后台触发呼叫。

所以你需要的是`Backbone.sync`用你自己的覆盖函数。

我会修改以下部分：

```
if (!options.data && model && (method == 'create' || method == 'update')) {
      params.contentType = 'application/json'; 
      params.data = JSON.stringify(model.toJSON());
} 
```

和

```
if (!options.data && model && (method == 'create' || method == 'update')) {
      params.contentType = 'application/json';
      params.data = $.param(model); // <-- CHANGED 
} 
```

注意我正在使用[jQuery 参数](http://api.jquery.com/jQuery.param/)

如果您想使用自定义函数，请检查以下问题： [Javascript 对象的查询字符串编码](https://stackoverflow.com/questions/1714786/querystring-encoding-of-a-javascript-object)

**[更新]**
无需直接修改。最好用您自己的函数“Backbone.sync”覆盖它检查主干存储库的“TODO”示例。它有一个`localStorage.js`覆盖 Backbone.sync 函数的文件[https://github.com/documentcloud/backbone/tree/master/examples](https://github.com/documentcloud/backbone/tree/master/examples)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-18T22:37:42.787

我在工作中遇到了这个问题，Backbone.emulateJSON 也对我不起作用。在一些帮助下，我能够想出这个解决方法。我们覆盖 Backbone.ajax 函数并将 contentType 更改为“application/x-www-form-urlencoded”并使用 $.param 正确序列化数据。

```
Backbone.ajax = function() {
    if(arguments[0].data && arguments[0].contentType == "application/json"){
        arguments[0].data = $.param(JSON.parse(arguments[0].data));
        arguments[0].contentType = "application/x-www-form-urlencoded";
    }
    return Backbone.$.ajax.apply(Backbone.$, arguments);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-17T13:33:43.233

Backbone.sync 使用[jQuery.ajax](http://api.jquery.com/jquery.ajax/)函数，因此我们可以修改 jqXHR 或发送到服务器的数据（通过 beforeSend）。

```
var oldSync = Backbone.Model.prototype.sync;
var SomeModel = Backbone.Model.extend({
    url: 'test.json',

    defaults: {
        id: 1,
        foo: 'test'
    },

    sync: function (method, model, options) {
        // options are passed to the jQuery.ajax
        _.extend(options, {
            emulateHTTP: true,
            emulateJSON: false,
            beforeSend: function(xhr, settings) {
                // settings.data is a body of our request.
                if (_.isString(settings.data)) {
                    // settings.data is a JSON-string like '{"id":1, "foo":"test"}'
                    settings.data = Backbone.$.parseJSON(settings.data);
                }

                settings.data = Backbone.$.param(settings.data);
                // settings.data is 'id=1&foo=test'
            }
        });

        oldSync.apply(this, arguments);
    }
});

var model = new SomeModel();
model.save(); 
```

实际上我们可以创建一个mixin！:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T11:47:30.580

我通过覆盖模型的同步功能来做到这一点：

```
var MyModel = Backbone.Model.extend({ 
    "sync": function(method, model, options) {
        if (method == "update" || method == "create") {
            options = options ? _.clone(options) : {};
            options['data'] = $.param(this['attributes']);
        }
        var arguments = [method, model, options];
        return Backbone.sync.apply(this, arguments);
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T15:44:26.297

也许这可以帮助你，试试： [http ://backbonejs.org/#Sync-emulateJSON](http://backbonejs.org/#Sync-emulateJSON)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-17T15:39:13.240

我找到解决方案，请参阅：

1.  我用

    Backbone.emulateJSON = true;

2.  我写了“更新”案例：

    ```
    options.url = "/user/"+Math.random(1, 1000);
    options.type = "POST";
    //.1/2 WORK
    //options.data = (model instanceof Backbone.Model)?model.toJSON():{};
    options.data = model.toJSON();
    break; 
    ```

# c++ - 在堆栈上分配对象时出现 C++ 继承错误

> ID：11416451
> 
> 赞同：5
> 
> 时间：2012-07-10T15:13:52.533
> 
> 标签：c++, inheritance, object

> **可能重复：**
> [为什么使用空括号调用不带参数的构造函数是错误的？](https://stackoverflow.com/questions/180172/why-is-it-an-error-to-use-an-empty-set-of-brackets-to-call-a-constructor-with-no)

我有小代码示例：

```
#include <iostream>

using namespace std;

class A
{
  public:

  void print()
  {
     cout << "Hello" << endl;
  }

};

class B: public A
{

  public:

  B() { cout << "Creating B" << endl;}

};

int main()
{

  B b();

  b.print(); // error: request for member ‘print’ in ‘b’, which is of non-class type ‘B ()()’

} 
```

但是，如果我更改为下面的那个，如果它有效，

```
B* b = new B();

b->print(); 
```

为什么我在堆栈上分配对象时它不起作用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T15:15:12.450

因为`B b();`声明了一个名为的函数，该函数`b`返回一个`B`. 只是使用`B b;`并指责 C++ 具有复杂语法的事实，这使得这种构造变得棘手。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T15:16:51.863

`B b();`声明一个名为的函数，该函数`b`不接受任何内容并返回`B`. 奇怪？尝试将您的类重命名`B`为`Int`，并命名您的“对象” `f`。现在看起来像

```
Int f(); 
```

看起来更像一个函数，不是吗？

要定义默认构造的对象，您需要：

```
B b; 
```

在`operator new`的情况下，可以使用或不使用括号调用默认构造函数：

```
B* b = new B;
B* b = new B(); 
```

# php - 如何在前端按帖子类型过滤搜索结果？

> ID：11416456
> 
> 赞同：0
> 
> 时间：2012-07-10T15:14:10.410
> 
> 标签：php, wordpress, filter, frontend, custom-post-type

**更新：**我可能已经更好地解释了这个问题，所以我在这里重写了 [如何将搜索结果拆分为前端的帖子类型选项卡？](https://stackoverflow.com/questions/11448872/how-can-i-split-search-results-into-post-types-tabs-on-frontend)

我有一个 Wordpress 网站，我有 4 个帖子类型。当我进行搜索时，所有 4 种帖子类型都会显示在结果中。

我希望用户能够按帖子类型过滤这些结果。

例如，假设我有 4 个帖子类型

我可以在结果上方有一组单选按钮来帮助过滤吗

*   所有结果（默认）
*   按帖子类型过滤 1
*   按帖子类型过滤 2
*   按帖子类型过滤 3
*   按帖子类型过滤 4

这样，用户可以轻松找到他们正在寻找的确切内容，而不是一直提供所有 POST TYPES 的内容，就是这样！

注意：我认为最好的方法是单选按钮，但我猜该字段也可能是下拉菜单。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:54:47.410

如果您想动态过滤结果，您将需要研究 AJAX 解决方案（如果您正在处理可能有数千个结果）或使用 Javascript/jQuery 来根据结果类型切换结果的可见性. 一个简单的解决方案就是使用 jQuery。

在您的 search.php 模板中：

```
<form action="" method="POST">
    <input class="radioToggle" type="radio" name="post_type" value="type1" />Filter 1<br/>
    <input class="radioToggle" type="radio" name="post_type" value="type2" />Filter 2<br/>
    <input class="radioToggle" type="radio" name="post_type" value="type3" />Filter 3<br/>
</form>
<div class="result type1">
    result of type 1....
</div>
<div class="result type2">
    result of type 2....
</div>
<div class="result type2">
    result of type 2....
</div>
<div class="result type3">
    result of type 3....
</div>
<div class="result type3">
    result of type 3....
</div>
<div class="result type3">
    result of type 3....
</div>
<script type="text/javascript">
    jQuery(document).ready(function($))
    {
        $(".radioToggle").click(function()
        {
            $(".result."+$(this).attr("value")).css("display", "block");
            $(".result:not(."+$(this).attr("value")+")").css("display", "none");
        });
    });
</script> 
```

这是未经测试的，我个人会完全避免这样做。我个人认为应该使用 PHP 预先过滤搜索结果，而不是之后使用 Javascript。但是，如果这对您的 UI 来说是必要的，那么这应该可以帮助您入门。

请记住，为了使用此方法，您的主题需要安装 jQuery 或将其加入队列。

# facebook - grails+spring-security-facebook 监听登录成功事件

> ID：11416463
> 
> 赞同：0
> 
> 时间：2012-07-10T15:14:37.557
> 
> 标签：facebook, spring, facebook-graph-api, grails, spring-security

我是 spring security 和 spring-security-facebook 的新手，在我们正在构建的应用程序中，我们必须将它们耦合起来。一切都运行良好，我需要知道收听 facebook 登录成功事件的方式。有没有人已经做了一件迫使他赶上Facebook活动成功的事情？我需要它，因为在应用程序开始时（在添加 spring -security-Facebook 插件之前）；我们在“grails.plugins.springsecurity.onInteractiveAuthenticationSuccessEvent”事件（在 config.groovy 文件中配置）附加了一个特殊行为，当用户连接到 facebook 帐户时，我们必须执行相同的特殊行为。是否有我们必须听的事件（扩展 springsecurity 类型的事件）？

任何想法 ？？

Ps：在寻找解决方案时，我们找到了一种方法来捕获 FB js 事件并解决问题以达到我们想要的结果，但我们尽可能不想那样......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:27:07.517

当前的 Spring Security Facebook 对每个请求的用户进行身份验证（通过透明地侦听 FB cookie）的问题，因此您将在每个请求上获得此事件。应该不是你想要的吧？这与对每个请求都有一个过滤器相同。

顺便说一句，您可以处理用户第一次登录您的应用程序但正在实施`onCreate(user, token)`或`afterCreate(user, token)`服务`FacebookAuthService`的情况（在这种情况下您必须创建此类服务）

* * *

例子：

文件`grails-app/services/FacebookAuthService.groovy`：

```
class FacebookAuthService {

    void afterCreate(def user, def token) {
        log.info("New user!") //or any code there
    }

} 
```

# ios - 从 UIViewAnimation 获取 UIImages

> ID：11416464
> 
> 赞同：0
> 
> 时间：2012-07-10T15:14:40.440
> 
> 标签：ios

我有一些简单的动画代码：

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:duration];
[UIView setAnimationCurve:curve];
[UIView setAnimationBeginsFromCurrentState:YES];

// The transform matrix
CGAffineTransform transform = CGAffineTransformMakeTranslation(x, y);
image.transform = transform;

// Commit the changes
[UIView commitAnimations]; 
```

是否可以将动画的每一帧都获取为uiimages？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:21:34.230

您不能将每一帧都作为 UIImages 获取（除非您`UIGraphicsGetCurrentContext`在动画视图的帧上以非常快的速度使用，而且我什至不确定这是否可行），但是使用核心动画，您可以访问的`presentationLayer`属性一个 CALayer，它（来自[CALayer 类参考](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CALayer_class/Introduction/Introduction.html)）：

> 返回包含当前事务开始时所有属性的图层副本，并应用任何活动动画。

希望这可以帮助！

# php - Smarty Postfilters / Prefilters 如何在输出前应用于模板

> ID：11416469
> 
> 赞同：0
> 
> 时间：2012-07-10T15:14:50.660
> 
> 标签：php, smarty, smarty3, smarty2

我对如何在 smarty 中使用 post/pre 过滤器感到很困惑。

我需要做的是在页面显示之前搜索和替换页面中的某些元素。我宁愿在调用 $smarty->display 之前执行此操作。这意味着，在它被保存到磁盘之前，但在它被编译之后（所以，后过滤器）。

示例后过滤函数：

```
function smarty_postfilter_replace($tpl_output, $search, $replace)
{
    return str_replace($search, $replace, $tpl_output);
} 
```

如何在 smarty 输出之前应用它。在查看 Smarty 文档（[http://www.smarty.net/docsv2/de/advanced.features.postfilters.tpl](http://www.smarty.net/docsv2/de/advanced.features.postfilters.tpl)）和其他一些示例后，我已经尝试过，但似乎没有一个有效。

有人可以给我一个示例代码，说明如何执行此操作，以及如何将参数传递给过滤器（$search，$replace）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:50:09.877

后置过滤器可能是最容易被误解的过滤器。虽然前置过滤器在未编译的模板源代码上运行，而输出过滤器在评估输出（你知道，生成的 HTML）上运行，但后置过滤器作为编译器的一部分运行 - 它被提供给 PHP 生成由编译器。我不确定有人会用这个做什么。无论如何，这不是你要找的。

使用输出过滤器替换您的内容。如果您使用缓存，如果您没有任何非缓存元素，它会在写入缓存*之前运行。*如果您有非缓存元素（如 {nocache} 或带有 nocache 标志的变量），则输出过滤器在缓存评估*后*运行（几乎在每个请求上）。

# android - 为什么我无法安装适用于 Android 库的 Google Cloud Messaging

> ID：11416473
> 
> 赞同：8
> 
> 时间：2012-07-10T15:15:20.437
> 
> 标签：android, sdk, cloud

我正在按照有关在此处使用 gcm 的说明[http://developer.android.com/guide/google/gcm/gs.html](http://developer.android.com/guide/google/gcm/gs.html)，我被困在以下步骤：

**安装帮助程序库** 要执行以下部分中描述的步骤，您必须首先安装帮助程序库（参考：客户端和服务器）。从 SDK 管理器中，**安装 Extras > Google Cloud Messaging for Android Library**。这会在 YOUR_SDK_ROOT/extras/google/ 下创建一个 gcm 目录，其中包含以下子目录：gcm-client、gcm-demo-appengine、gcm-demo-client、gcm-demo-server 和 gcm-server。

在我的 SDK 管理器中，我找不到选项：Google Cloud Messaging for Android Library，正如我在此屏幕截图中捕获的那样![在此处输入图像描述](../Images/7c59477282b59a9b05dd50f5055e45b9.png)，我应该怎么做才能解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T15:19:10.927

我有同样的问题。在 GCM 出现之前，您必须更新 Eclipse 插件中的所有其他内容。强制从 sdk 管理器进行更新，一旦版本是最新的，它就会显示出来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T08:16:17.767

使用*Android SDK Manager*将您的 SDK 更新到 r20，之后您还需要更新您的 Eclipse 插件。然后，您将在 SDK 管理器的 Extras 下找到*适用于 Android 的 Google Cloud Messaging 库以及其他所有内容。*只需选择您要安装的内容。

如果出现以下错误：- *android sdk manager 没有安装任何东西*

然后

1.  转到 android-sdk 所在的文件夹。
2.  右键单击 SDK Manager 并选择以管理员身份运行。
3.  重启日食。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T07:34:00.923

1.  运行 Eclipse
2.  转到 Eclipse 菜单 :: 帮助 >> 安装新软件
3.  在这样的安装窗口设置中如果您选择“使用”列表框 ADT 站点 :: 我的情况就像“ADT 站点 - [https://dl-ssl.google.com/android/eclipse](https://dl-ssl.google.com/android/eclipse) ” 检查所有

    *   开发工具
    *   NDK 插件和下一步并完成...
4.  现在转到“Android SDK Manager”窗口您将在“Extras”类别和“Google Cloud Messaging for Android Library”中看到

# java - 在开始另一个方法之前等待一个方法完成的简单方法

> ID：11416476
> 
> 赞同：4
> 
> 时间：2012-07-10T15:15:25.250
> 
> 标签：java, multithreading, user-interface

我对 Java 线程一点也不熟悉.

基本上结构是

```
public static void draw() {
    // draws stuff

    compare();
} 
```

问题是 drawGUI() 绘制的窗口在处理 (compare() ) 结束之前有一些主要的视觉伪影。

在 draw() 完成执行后，我可以实现启动 compare() 的最简单方法是什么？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T15:25:48.510

最*简单*的方法是将`draw()`代码放在`asyncExec()`最后的线程内部

> ```
> new Thread(new Runnable() {
> public void run() {
> 
>     //do long running blocking bg stuff here
>     Display.getDefault().asyncExec(new Runnable() {
>         public void run() {
>             draw();
>         }   
>     }
> }).start(); 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:26:51.460

假设您获得文物的原因是`draw()`没有机会返回，您可以使用`Thread`.

```
final T parent = this;
new Thread(new Runnable() {
    public void run() {
        parent.compare();
    }
}).start(); 
```

（其中 T 是具有您的 compare 方法的类的类型）。

# xml-serialization - 使用 Xquery 和递归函数将平面 xml 转换为嵌套 xml

> ID：11416481
> 
> 赞同：0
> 
> 时间：2012-07-10T15:15:31.127
> 
> 标签：xml-serialization, xquery

我对 Xquery 中递归函数的练习感到困扰。我需要仅使用 Xquery 将平面 XML 树转换为嵌套 XML 树。

平面 XML 如下所示：

```
 <?xml version="1.0"?>
    <tree>
      <node id="1" type="Folder">
        <child>2</child>
        <child>3</child>
      </node>
      <node id="2" type="Folder">
        <child>4</child>
      </node>
      <node id="3" type="Folder">
        <child>5</child>
        <child>6</child>
      </node>
      <node id="4" type="Item" />
      <node id="5" type="Folder">
        <child>7</child>
      </node>
      <node id="6" type="Item" />
      <node id="7" type="Item" />
    </tree> 
```

所需的嵌套 XML 如下所示：

```
 <?xml version="1.0"?>
    <tree>
      <node id="1" type="Folder" children="2 3">
        <node id="2" type="Folder">
          <node id="4" type="Item" />
        </node>
        <node id="3" type="Folder">
          <node id="5" type="Folder" children="7">
            <node id="7" type="Item" />
          </node>
          <node id="6" type="Item" />
        </node>
      </node>
    </tree> 
```

我尝试在没有递归函数的情况下对此进行 Xquery，但运气不佳。尤其是条件反射对我来说似乎很奇怪；新嵌套 XML 的根元素应该是 id="1" 的节点，因为它不作为任何其他元素的子元素存在。但是，如果我尝试将其指定为条件，例如下面，似乎不可能只选择该节点。

```
 for $node in /Tree/node[@id != /Tree/node/child]
    return
    <node id="{data($node/@id)}" type="{data($node/@type)}">

            (: Lower level subqueries.... :)

    </node> 
```

更新：我已经走得更远了，但是现在我在选择具有等于父节点内容的 id 的节点时遇到了 [condition]，即递归函数中的 for 语句没有给出返回任何节点，这是出乎意料的。

到目前为止，这是我的代码：

```
 declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
    declare namespace local = "localhost";
    declare option output:method "xml";
    declare option output:omit-xml-declaration "no";
    declare option output:indent "yes";
    declare option output:doctype-system "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd";

    declare function local:addSubNode($n)
    {
        for $subnode in doc("xml/flat-tree.xml")/tree/node[@id = $n]
            let $subnid:=data($subnode/@id)
            let $subtype:=data($subnode/@type)
        return <node id="{$subnid}" type="{$subtype}">
                {local:addSubNode($subnid)}
                </node>
        };

    <tree>

    {
    for $node in doc("xml/flat-tree.xml")/tree/node[not(@id = /tree/node/child)]
    let $nid:=data($node/@id)

    return <node id="{$nid}" type="{data($node/@type)}"> 
        {for $child in $node
        let $cid:=data($child)
        return local:addSubNode($cid)
        }

            </node>
    }

    </tree> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:57:58.267

只是一个部分答案 -`=`并且`!=`可以将原子值与序列进行比较，但它可以作为每个术语的逻辑或。那就是“a = b”的意思是“b中是否有一个等于a的值”，而“a！= b”的意思是“b中是否有一个不等于a的值”，这不是你要找的. 你想要“b中没有等于a的值”，即“not（a = b）”。

```
for $node in $d/node[not(@id = $d/node/child)] return
<node id="{$node/@id}" type="{$node/@type}">
    (: etc. :)
</node> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:21:49.897

好的，我知道了！最终，我将整个 $node 或 $child 元素提供给递归函数，而不仅仅是它的 id 属性，现在它可以工作了！

```
 declare namespace output = "http://www.w3.org/2010/xslt-xquery-serialization";
    declare namespace local = "localhost";
    declare option output:method "xml";
    declare option output:omit-xml-declaration "no";
    declare option output:indent "yes";
    declare option output:doctype-system "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd";

    (:lookupChildren function :)
    declare function local:lookupChildren($p)
    {
    for $child in $p/child
    return $child
    };

    declare function local:addSubNode($n)
    {
    for $subnode in doc("xml/flat-tree.xml")/tree/node
            let $subnid:=data($subnode/@id)
            let $subtype:=data($subnode/@type)
    where $subnode/@id = $n/child
        return 
        <node id="{$subnid}" type="{$subtype}" children="{local:lookupChildren($subnode)}">
               {local:addSubNode($subnode)}
                </node>
    };

    <tree>

    {
    for $node in doc("xml/flat-tree.xml")/tree/node[not(@id = /tree/node/child)]
    let $nid:=data($node/@id)
    let $ntype:=data($node/@type)

    return  <node id="{$nid}" type="{$ntype}" children="{local:lookupChildren($node)}"> 
            {local:addSubNode($node)}

            </node>
    }

    </tree> 
```

# javascript - 使用选项卡切换按钮

> ID：11416490
> 
> 赞同：1
> 
> 时间：2012-07-10T15:15:48.910
> 
> 标签：javascript, jquery, html

很简单。我在网页中有两个按钮。他们坐得很近。目前我使用鼠标单击其中一个然后做某事。我们可以只使用TAB之类的键盘吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T15:19:29.517

使用 tab 来按下按钮将完全破坏您网站上的可访问性，并将有效地将任何键盘用户赶出您的网站，这是一种*糟糕*的做法。

无论如何，您可能希望使用 jquery 捕获“*”的事件：

```
$('*').keydown(function(event) {
  if (event.keyCode == 9)
    //stuff
}) 
```

虽然我强烈建议不要这样做；永远不要覆盖诸如 tab 之类的键，你会产生巨大的可访问性问题。

[**编辑**]：添加事件`document`可能更有效：

> 如果需要捕获任意位置的按键（例如，在页面上实现全局快捷键），则将此行为附加到文档对象很有用。由于事件冒泡，除非明确停止，否则所有按键都会沿 DOM 向上到达文档对象。

[来源](http://api.jquery.com/keydown/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:32:41.850

jQuery 将是完美的，只需将键绑定到该按钮。像这样的东西。

```
$('your selector here').keyup(function(e){
    if(e.which == '9'){
     //do your stuff here
     }
}); 
```

我认为 9 是选项卡的正确字符代码，但您可能需要检查一下。并确保您在 $(document).ready(); 内部执行此操作

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-10T15:20:28.430

是`Tab`的，直到按钮有一个虚线边框表示焦点，然后你可以点击`Enter`或`Space`单击按钮。

例如，按钮 2 有焦点并按下`Space`或`Enter`将“点击”它：

![在此处输入图像描述](../Images/b8472df76283fe017fbc9ff75666b6c4.png)

# java - HTML单元下载一个kml格式文件

> ID：11416493
> 
> 赞同：-1
> 
> 时间：2012-07-10T15:15:52.293
> 
> 标签：java, htmlunit

这是html中的代码，它提供了href，我想通过java中的链接下载kml文件。我不知道如何通过这些代码获取kml文件以单击并保存文件。

HTML：

```
 <div class="section tab" style="display:block;" >
            <ul>
                <li>
                <a href="/trip/27887/download/?fileformat=gpx" class="trip_download_bg trip_down_icon">GPX格式文件下载</a>
                <div class="trip_down_content">
                    <div class="trip_down_content_part_1">需要银两：3</div>
                    <label class="trip_down_content_part_2">内容介绍：&lt;/label>
                    <p class="trip_down_p">
                    GPX格式轨迹文件是GPS数据文件通用格式，目前市面上大部分GPS设备都支持导出GPX文件格式。此文件是将作者原GPS轨迹文件经过格式转换和标准化后自动生成。
                    </p>
                    <div class="cleanFix"></div>
                </div>
                <div class="cleanFix"></div>
                </li>
                <li>
                <a href="/trip/27887/download/?fileformat=kml" class="trip_download_bg trip_down_icon" id="kml_icon">KML格式文件下载</a>
                <div class="trip_down_content">
                    <div class="trip_down_content_part_1">需要银两：3</div>
                    <label class="trip_down_content_part_2">内容介绍：&lt;/label>
                    <p class="trip_down_p">
                    KML格式轨迹文件是用于GoogleEarth客户端显示GPS轨迹路线和航点信息的文件格式。此文件是将作者原GPS轨迹文件经过格式转换和标准化后自动生成。
                    </p>
                    <div class="cleanFix"></div>
                </div>
                <div class="cleanFix"></div>
                </li> 
```

如何使用Java点击链接并保存KML文件？

```
<a href="/trip/27887/download/?fileformat=kml" class="trip_download_bg trip_down_icon" id="kml_icon">KML格式文件下载</a> 
```

Java代码：

```
List<HtmlElement> nlink = downloadPage.getElementsByIdAndOrName("kml_icon");
for(int k=0;k<nlink.size();k++) {
    String templink = nlink.get(k).getAttribute("href");    
    if(templink.contains("fileformat=kml")) { 
        System.out.println("href====>"+templink);
        downloadPage.getAnchorByHref(templink);
        //InputStream is = templink.click().getWebResponse().getContentAsStream();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:26:40.013

这个过程应该更容易：

```
 Page kmlPage = null;
    for (HtmlAnchor a : downloadPage.getAnchors()) {
        if (a.getHrefAttribute().contains("trip/27887/download/?fileformat=kml")) {
            String url = a.getHrefAttribute();
            if (!url.startsWith("http")) {
                url = "http://www.hostname.com" + url;

            }
            kmlPage = client.getPage(url);
            // you can also do it it simplier if this below works
            // kmlPage = a.click();

        }
    }

    String contentType = kmlPage.getWebResponse().getContentType();

    if (contentType.contains("kml")) {
        InputStream kmlStream = factPage.getWebResponse().getContentAsStream();
    } 
```

# jquery - 带有多个模型的 jQuery 可排序

> ID：11416501
> 
> 赞同：1
> 
> 时间：2012-07-10T15:16:13.080
> 
> 标签：jquery, ruby-on-rails, jquery-ui-sortable

我已经看到了许多使用一个模型进行 jQuery 排序的示例，但是我还没有找到任何对两个模型有用的东西。照这样说...

我有两个模型：文件夹和任务。

**这是可行的：**我可以对文件夹中包含的任务进行排序。

**这就是我想要**的：能够将任务从一个文件夹拖放到另一个文件夹中，并且新文件夹中的任务被正确排序（即，如果在任务 #1 和任务 #3 之间拖动，则新任务将被排序作为任务＃2）。任何人都可以提供有关如何执行此操作的帮助吗？

这是我到目前为止所拥有的：

**文件夹/index.html.erb....**

```
<ul id="folder">
  <% @folders.each_with_index do |folder, i| %>
  <li id="folder_<%= folder.id %>"> <%= folder.name %> </li>
  <% if !folder.tasks.blank? %>
      <ul id="task">
        <% folder.tasks.each do |task| %>
            <li id="task_<%= task.id %>"><%= task.name %></li>
        <% end %>
      </ul>
  <% end %>
 <% end %>
</ul>

<script type="text/javascript">
    // Sorting the list
    $(document).ready(function(){

        $(function() {
            $('#task').sortable(
                    {
                        opacity: 0.6,
                        cursor: 'move',
                        connectWith: '#folder',

                        receive: function(event, ui) {
                            $.ajax({
                                type: 'put',
                                data: {folder_id : '#{folder.id}' },
                                dataType: 'script',
                                complete: function(request){
                                    $('#task').effect('highlight');
                                }, url: '/tasks/change_folder'
                            })
                        },

                        update: function(){
                            $.ajax({
                                type: 'post',
                                data: $('#task').sortable('serialize') ,
                                dataType: 'script',
                                complete: function(request){
                                    $('#task').effect('highlight');
                                },
                                url: '/tasks/sort'
                            })
                        }
                    });
        });
    }); 
```

# php - 如何根据两个下拉菜单选择进行页面重定向？

> ID：11416505
> 
> 赞同：0
> 
> 时间：2012-07-10T15:16:31.817
> 
> 标签：php, javascript, jquery

我想从我的网站创建一个表单，其中用户有两个下拉框，其值为`body height`和`type of build`。根据他们的选择，他们将被引导到一个页面，其中包含有关其特定/所选构建的信息。

要了解我想要创建的内容，这是我希望显示的表格.. 用于 BMX 自行车指南

> 函数 goToPage() { var type = document.getElementById("type").value; var height = document.getElementById("height").value; if(type !== 0 && height !== 0) { window.location = "http://www.maltabmx.com/About.html?jtype=" + 1 + "&height=" + 1;
> 
> ```
>  window.location = "http://www.maltabmx.com/Footage.html?jtype=" + 
>         1 + "&height=" + 
>         2;
> 
>         window.location = "http://www.maltabmx.com?jtype=" + 
>         1 + "&height=" + 
>         3;
> 
>         window.location = "http://www.maltabmx.com/About.html?jtype=" + 
>         1 + "&height=" + 
>         4;
> 
>         window.location = "http://www.maltabmx.com/Footage.html?jtype=" + 
>         1 + "&height=" + 
>         5;
> 
>         window.location = "http://www.maltabmx.com?jtype=" + 
>         1 + "&height=" + 
>         6;   }  } 
> ```
> 
> ```
> <form>  <p> Type of Terrain: </p> 
> ```
> 
> 选择街头/公园越野赛
> 
> ```
> <p>Body Height</p>
> <select id="height">
> <option value="0" id="Select">Select</option>
> <option value="1" id="5ft">4ft</option>
> <option value="2" id="5.5ft">4.25ft</option>
> <option value="3" id="5.5ft">4.50ft</option>
> <option value="4" id="6ft">4.75ft</option>
> <option value="5" id="5ft">5ft</option>
> <option value="6" id="5.5ft">5.25ft</option>
> <option value="7" id="6ft">5.50ft</option>    <option value="8" id="5ft">5.75ft</option>
> <option value="9" id="5.5ft">6ft</option>
> <option value="10" id="6ft">6.25ft</option>
> </select>
> 
> <br /><br />
> 
> <input  onclick="goToPage();"  type="button" value="Submit" />
> 
> </form> 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:29:24.447

```
<html>
 <head>

  $(document).ready(function() {

      $('#submit').click(function(){ 

      var type= $("#type").val();
      var height = $("#height").val();

      window.location.href = 'http://www.someweb.com/page.php?type='+type+'&&height='+height;

    });

 });

  </head>
  <body>

 <form>
 <p> Type of Terrain: </p>

  <select id="type">
    <option value="1" id="Street">Street</option>
    <option value="2" id="Dirt">Dirt</option>
    <option value="3" id="Park">Park</option>
    <option value="4" id="Racing">Racing</option>
    </select>

    <p>Body Height</p>
    <select id="Height">
    <option value="1" id="5ft">5ft</option>
    <option value="2" id="5.5ft">5.5ft</option>
    <option value="3" id="6ft">6ft</option>

    </select>

    <br /><br />

    <input id="submit" type="submit" value="Submit" />

    </form>
  </body>
</html> 
```

所以，我改变了上面的代码。如果您还有一些问题，请告诉我。

PS：通常要重定向或将值传递到您想要使用 jquery $.post、$.get 或 $.ajax 方法而不是 windows.location.href 的其他页面。

看看这里[http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/)

已编辑 - 工作解决方案：http: [//jsfiddle.net/YXW7K/13/](http://jsfiddle.net/YXW7K/13/)

# c# - .NET DSACryptoServiceProvider 密钥大小

> ID：11416510
> 
> 赞同：2
> 
> 时间：2012-07-10T15:16:46.637
> 
> 标签：c#, .net, security, public-key-encryption, public-key

我想使用 2048 位 DSA 密钥，并且我使用的是 .NET `DSACryptoServiceProvider`。我在将关键参数加载到 .NET 对象时遇到问题`DSAParameters`，因此我编写了以下代码来输出 a 的有效密钥大小`DSACryptoServiceProvider`：

```
DSACryptoServiceProvider sampleDSA = new DSACryptoServiceProvider();
Console.Write("----- DSA LEGAL KEY SIZES -----\n");
foreach (KeySizes ks in sampleDSA.LegalKeySizes)
{
  Console.WriteLine("Min: " + ks.MinSize.ToString());
  Console.WriteLine("Max: " + ks.MaxSize.ToString());
} 
```

数组中只有一个`KeySizes`对象，输出如下：

```
----- DSA LEGAL KEY SIZES -----
Min: 512
Max: 1024 
```

有没有办法使用 2048 位密钥`DSACryptoServiceProvider`？不能使用 1024 位密钥。

**- - 编辑 - - -**

我列举了所有处理数字签名的`LegalKeySizes`.NET类。`CryptoServiceProvider`结果如下。

```
System.Security.Cryptography.DSACryptoServiceProvider
Min: 512
Max: 1024

System.Security.Cryptography.RSACryptoServiceProvider
Min: 384
Max: 16384

System.Security.Cryptography.ECDsaCng
Min: 256
Max: 384
Min: 521
Max: 521 
```

我的意思是：有没有办法调整它以使用 2048 位密钥`DSACryptoServiceProvider`，或者我是否锁定在 512-1024 位范围内？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-07-01T00:33:03.540

.NET 4.6.2 添加了 DSACng，它是 DSA 的 FIPS-186-3 兼容实现。DSACryptoServiceProvider 仅限于 FIPS-186-1（具有 1024 位密钥限制）。

除了构造对象之外，您应该避免依赖具体类型，而应仅使用 DSA 基类上的成员。

```
using (DSA dsaPublicPrivate = new DSACng(2048))
using (DSA dsaPublic = new DSACng())
{
    dsaPublic.ImportParameters(dsaPublicPrivate.ExportParameters(false));

    byte[] signature = dsaPublicPrivate.SignData(data, HashAlgorithmName.SHA256);
    bool isValid = dsaPublic.VerifyData(data, signature, HashAlgorithmName.SHA256);

    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T16:55:42.560

根据您发布的合法密钥大小输出，.NET 实现将无法使用超过 1024 位。

也许其他一些加密货币提供商会起作用？我之前使用过 Bouncycastle (www.bouncycastle.org) .NET 提供程序来处理 .NET 提供程序无法完成的事情。

# c# - 2 级连接 LINQ

> ID：11416521
> 
> 赞同：3
> 
> 时间：2012-07-10T15:17:11.050
> 
> 标签：c#, linq, entity-framework, .net-4.0

我有 3 个对象需要链接在一起

Parent: TblClients
这将有多个 TblBusinessLeads 类型的孩子，两者之间的键是 ClientID
类型 Lead 将有多个 TblFeeBreakouts 类型的孩子，两者之间的键是 LeadID

我已经编写了以下 LINQ 来获取数据，但它没有回来（内存不足异常）

```
from t0 in TblClients
join t1 in TblBusinessLeads on t0.ClientID equals t1.ClientID into t1_join
from t1 in t1_join.DefaultIfEmpty()
join t3 in TblFeeBreakouts on t1.LeadID equals t3.LeadID into t3_join
from t3 in t3_join.DefaultIfEmpty()
orderby
t0.ClientID,
t1.LeadID
select new {
            client_data = t0,
            business_lead_data = t1_join,
            fee_breakout_data = t3_join
} 
```

我不确定你是否能做到这一点，但这个想法似乎很普遍。任何帮助将不胜感激。谢谢

**编辑**：
哇很多评论。这是我的答案我正在尝试在 LinqPad 中运行查询，这就是发生内存不足的地方如果我查看生成的 SQL，它会给我

```
SELECT [t0].[ClientID], [t0].[ClientName], [t0].[ClientDesc], [t0].[EditedBy], [t0].[EditedDate], [t0].[CreatedBy], [t0].[CreatedDate], [t3].[LeadID], [t3].[InitiativeName], [t3].[Description], [t3].[NewBusNeeds], [t3].[CreativeNeeds], [t3].[IdeationNeeds], [t3].[Comments], [t3].[LossReasons], [t3].[OriginDate], [t3].[DateReceivedAssignment], [t3].[DueDate], [t3].[TimelineNotes], [t3].[PendingCode], [t3].[EstStartDate], [t3].[EstEndDate], [t3].[ExeStartDate], [t3].[ExeEndDate], [t3].[Probable80Total], [t3].[Possible50Total], [t3].[Emerging25Total], [t3].[NoBudget0Total], [t3].[TotalBudget], [t3].[FinancialNotes], [t3].[DollarsRecordFor], [t3].[BizDevContactUserID], [t3].[BizDevContact2UserID], [t3].[SVPContactUserID], [t3].[ClientMgmtContactUserID], [t3].[CMAdditionalContactUserID], [t3].[AdditionalContactUserID], [t3].[CreatorUserID], [t3].[OfficeID], [t3].[ClientID] AS [ClientID2], [t3].[LeadTypeID], [t3].[ActionNeeded], [t3].[ActionDate], [t3].[NewBusDeliveryDate], [t3].[NewBusDesc], [t3].[CreativeDeliveryDate], [t3].[CreativeDesc], [t3].[IdeationDeliveryDate], [t3].[IdeationDesc], [t3].[AltMediaDeliveryDate], [t3].[AltMediaDesc], [t3].[MobileOpsDeliveryDate], [t3].[MobileOpsDesc], [t3].[EventsDeliveryDate], [t3].[EventsDesc], [t3].[Routing], [t3].[RoutingDate], [t3].[Deleted], [t3].[LeadSourceID], [t3].[NatureofLeadID], [t3].[NatureofLeadNotes], [t3].[EditedBy] AS [EditedBy2], [t3].[EditedDate] AS [EditedDate2], [t3].[CreatedBy] AS [CreatedBy2], [t3].[CreatedDate] AS [CreatedDate2], [t3].[ClientContactName], [t3].[ClientContactTitle], [t3].[ReportingYear], (
SELECT COUNT(*)
FROM [tblBusinessLead] AS [t4]
WHERE [t0].[ClientID] = [t4].[ClientID]
) AS [value], [t1].[LeadID] AS [LeadID2]
 FROM [tblClient] AS [t0]
 LEFT OUTER JOIN [tblBusinessLead] AS [t1] ON [t0].[ClientID] = [t1].[ClientID]
LEFT OUTER JOIN [tblFeeBreakout] AS [t2] ON [t1].[LeadID] = [t2].[LeadID]
 LEFT OUTER JOIN [tblBusinessLead] AS [t3] ON [t0].[ClientID] = [t3].[ClientID]
 ORDER BY [t0].[ClientID], [t1].[LeadID], [t2].[LeadID], [t2].[FeeTypeID], [t3].    [LeadID] 
```

这将返回 120 万行

模型中没有映射，因为数据库没有关系（它们是推断出来的，没有外键或类似的东西）

我使用 t1_join 和 t3_join 的原因是因为如果我使用 t1 或 t3，我会得到单个实体，而不是对象的 IEnumerable，因此我不能循环它。

如果您有更多问题，请询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:28:02.617

如上所述，在这些表上设置关联可能是一个好主意，我这样做了......关联后结果的 LINQ 很简单

var clientList = (from a in tblClients select a).ToList();

从那里它只是访问属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:27:16.743

首先，客户对 120 万行有什么可能的用途？没有真正好的用例，所以你的第一步应该是弄清楚如何适当地过滤你的结果。

其次，我相信您的查询返回的原因`OutOfMemoryException`是因为 LinQPad 正在执行`ToList()`或类似的操作，以便我可以在底部窗格中显示查询结果。正在将`ToList()`所有 120 万行加载到内存中。如果您在常规 .Net 应用程序中运行查询，则以下内容将返回`IQueryable<>`不会加载到内存中的内容。

```
var query = 
from t0 in TblClients
join t1 in TblBusinessLeads on t0.ClientID equals t1.ClientID into t1_join
from t1 in t1_join.DefaultIfEmpty()
join t3 in TblFeeBreakouts on t1.LeadID equals t3.LeadID into t3_join
from t3 in t3_join.DefaultIfEmpty()
orderby
t0.ClientID,
t1.LeadID
select new {
            client_data = t0,
            business_lead_data = t1_join,
            fee_breakout_data = t3_join
}; 
```

# css - 如何使用 JQM 滑块/范围动态更改 .ui-slider-handle background-img

> ID：11416527
> 
> 赞同：0
> 
> 时间：2012-07-10T15:17:35.310
> 
> 标签：css, jquery-mobile, slider, range

我想根据范围/滑块的值更改 ui-slider-handle 的 background-image:url (JQuery Mobile)

大致像[http://jsfiddle.net/phillpafford/YgJ9P/2/](http://jsfiddle.net/phillpafford/YgJ9P/2/)但是，正如我所说，我希望看到滑块手柄的背景图像发生变化。

```
$("#slider").change(function() {
    sVal = $(this).val();

    if(sVal > 21 && sVal <= 40) {
        $('#theImage').attr('src', 'http://jquerymobile.com/demos/1.0b2/docs/toolbars/glyphish-icons/21-skull.png');
    }

    if(sVal > 41 && sVal <= 60) {
        $('#theImage').attr('src', 'http://jquerymobile.com/demos/1.0b2/docs/toolbars/glyphish-icons/18-envelope.png');
    }

    if(sVal > 61 && sVal <= 80) {
        $('#theImage').attr('src', 'http://jquerymobile.com/demos/1.0b2/docs/toolbars/glyphish-icons/100-coffee.png');
    }

    if(sVal > 81 && sVal <= 100) {
        $('#theImage').attr('src', 'http://jquerymobile.com/demos/1.0b2/docs/toolbars/glyphish-icons/88-beermug.png');
    }

});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:48:21.240

您只需要选择句柄元素而不是 Phill 在他的 JSFiddle 中选择的那个：

```
$("#slider").change(function() {
   var sVal = $(this).val(),
       $ele = $(this).next().children();

    if(sVal > 21 && sVal <= 40) {
        $ele.addClass('skull-class').removeClass('envelope-class coffee-class beermug-class');
    }

    if(sVal > 41 && sVal <= 60) {
        $ele.addClass('envelope-class').removeClass('skull-class coffee-class beermug-class');
    }

    if(sVal > 61 && sVal <= 80) {
        $ele.addClass('coffee-class').removeClass('envelope-class skull-class beermug-class');
    }

    if(sVal > 81 && sVal <= 100) {
        $ele.addClass('beermug-class').removeClass('envelope-class coffee-class skull-class');
    }

});​ 
```

这是一个演示：http: [//jsfiddle.net/jasper/YgJ9P/192/](http://jsfiddle.net/jasper/YgJ9P/192/)

我没有使用`.css()`给元素添加样式，而是设置了一些类来保持我的 JS 代码和我的 CSS 代码分开：

```
.ui-slider .skull-class {
    background : url(http://jquerymobile.com/demos/1.0b2/docs/toolbars/glyphish-icons/21-skull.png);
}
.ui-slider .envelope-class {
    background : url(http://jquerymobile.com/demos/1.0b2/docs/toolbars/glyphish-icons/18-envelope.png);
}
.ui-slider .coffee-class {
    background : url(http://jquerymobile.com/demos/1.0b2/docs/toolbars/glyphish-icons/100-coffee.png);
}
.ui-slider .beermug-class {
    background : url(http://jquerymobile.com/demos/1.0b2/docs/toolbars/glyphish-icons/88-beermug.png);
}​ 
```

你也可以稍微压缩一下JS：

```
var allClasses = 'skull-class envelope-class coffee-class beermug-class';
$("#slider").change(function() {

    //get the value of the slider as well as cache the slider handle element
    var sVal = $(this).val(),
        $ele = $(this).next().children();

    //remove the icon classes from the handle
    $ele.removeClass(allClasses);

    (sVal > 21 && sVal <= 40) ? $ele.addClass('skull-class') :
        (sVal > 41 && sVal <= 60) ? $ele.addClass('envelope-class') :
            (sVal > 61 && sVal <= 80) ? $ele.addClass('coffee-class') : 
                (sVal > 81 && sVal <= 100) ? $ele.addClass('beermug-class') : ''
});​ 
```

[http://jsfiddle.net/jasper/YgJ9P/195/](http://jsfiddle.net/jasper/YgJ9P/195/)

# objective-c - 一个文件中的多个接口声明

> ID：11416528
> 
> 赞同：0
> 
> 时间：2012-07-10T15:17:39.957
> 
> 标签：objective-c, interface, header-files

我真的很努力将变量从一个类传递到另一个类。我正在关注[这个](https://stackoverflow.com/questions/5210535/passing-data-between-view-controllers)问题的答案，并且能够成功实施第一部分（传递数据转发）。我的问题是当我进入第二部分（传回数据）时，我对`4)`需要为我的 second.h 文件声明一个接口的地方感到困惑。我已经在那个 .h 文件中声明了一个接口：

```
@interface RootViewController : UITableViewController <UISplitViewControllerDelegate>{ 
```

当我尝试声明另一个时，我遇到了很多错误。我读到这是可能的，我只是不确定我猜的确切语法。

这是完整的 .h 文件

```
#import <UIKit/UIKit.h>

@protocol SubstitutableDetailViewController
- (void)showRootPopoverButtonItem:(UIBarButtonItem *)barButtonItem;
- (void)invalidateRootPopoverButtonItem:(UIBarButtonItem *)barButtonItem;
@end

@interface RootViewController : UITableViewController <UISplitViewControllerDelegate>{

    UISplitViewController *splitViewController;

    UIPopoverController *popoverController;    
    UIBarButtonItem *rootPopoverButtonItem;

    NSMutableArray *logMessages;
}

@property (nonatomic, assign) IBOutlet UISplitViewController *splitViewController;

@property (nonatomic, retain) UIPopoverController *popoverController;
@property (nonatomic, retain) UIBarButtonItem *rootPopoverButtonItem;

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:01:58.323

要添加第二个（或第三个或第四个）接口，只需用逗号将其放入

你说的例子？我想我可以做一个。

```
@interface ViewController : UIViewController <DateControllerDelegate, TimeControllerDelegate, DivisionControllerDelegate, FormControllerDelegate, MemoryControllerDelegate, UIAlertViewDelegate, UITextFieldDelegate, UIActionSheetDelegate, UITableViewDelegate, UITableViewDataSource, NSFetchedResultsControllerDelegate, MFMailComposeViewControllerDelegate> { 
```

看起来您需要查找委托方法。这是我能想到的最简单的解释。

```
Delegates

//In parent .m file:
//assign the delegate
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([segue.identifier isEqualToString:@"segueName"])
    {
        childController *foo = segue.destinationViewController;
        foo.delegate = self;
    }

}

//implement protocol method(s):
- (void) methodName:(dataType*) dataName
{
    //An example of what you could do if your data was an NSDate
    buttonLabel.titleLabel.text = [[date description] substringToIndex:10];
}

//In parent .h file:
//import child header
#import "ChildName.h"

//indicate conformity with protocol
@interface ParentName : UIViewController <ChildNameDelegate>

//In child .h file
//declare protocol
@protocol ChildNameDelegate
- (void) methodName:(dataType*) dataName;
@end

//declare delegate
@property (unsafe_unretained, nonatomic) id<ChildNameDelegate> delegate;

//In child .m file
//synthesize delegate
@synthesize delegate; 

//use method
- (IBAction)actionName:(id)sender 
{
    [delegate methodName:assignedData];
} 
```

这里有一个很好的关于委托的答案，可能比我的要好得多： [如何在 Objective-C 中创建委托？](https://stackoverflow.com/q/626898/1487063)

# paperclip - 捆绑安装和红宝石版本？

> ID：11416529
> 
> 赞同：1
> 
> 时间：2012-07-10T15:17:41.130
> 
> 标签：paperclip, bundler, ruby-1.9.3, rbenv

我正在使用 rbenv 来设置 ruby​​ 版本。

`ruby -v`产生预期的 1.9.3

我可以`gem install paperclip`毫无问题地做。

但是，当我这样做时，`bundle install`它说：

```
Installing paperclip (3.1.2) 
Gem::InstallError: paperclip requires Ruby version >= 1.9.2.
An error occured while installing paperclip (3.1.2), and Bundler cannot continue.
Make sure that `gem install paperclip -v '3.1.2'` succeeds before bundling. 
```

但是， ruby​​ -v 说我正在运行 1.9.3。bundler 是作为 sudo 运行的吗？有没有人解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T01:26:27.180

问题是我的 rbenv 文件夹的权限问题。这修复了它：

`sudo chown ubuntu /usr/local/rbenv/rubies -R`

我在 AWS 上运行 ubuntu。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T00:16:51.483

我不知道对你们来说是否为时已晚，但是我今天遇到了这个问题，并且能够通过查看“回形针”官方 git 页面来解决它。

对我来说，解决的是将 gem 文件中的信息更改为：

宝石“回形针”，：git =>“git://github.com/thoughtbot/paperclip.git”

希望对大家有帮助！

问候

路易斯

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-17T20:17:05.623

答案是从源代码构建 ruby​​ 1.9.3。有关于手动执行此操作的说明，但总会有 RVM。如果您的机器上安装了 RVM，请使用它而不是 apt-get 用于 ruby​​ 版本大于 1.8

从源代码手动编译**（不推荐）** [http://excid3.com/blog/setting-up-ubuntu-12-04-with-ruby-1-9-3-nginx-passenger-and-postgresql-or-mysql /](http://excid3.com/blog/setting-up-ubuntu-12-04-with-ruby-1-9-3-nginx-passenger-and-postgresql-or-mysql/)

如果您不想从源代码构建，您可以按照一些关于[添加 repo 的](http://blog.brightbox.co.uk/posts/next-generation-ruby-packages-for-ubuntu)说明进行操作。[其他人](https://stackoverflow.com/questions/11078166/how-do-i-install-ruby-1-9-3-on-ubuntu-without-rvm)也遇到了同样的错误。

# python - Python 将 Google Docs 格式的 CSV 文件读取为 UTF-8

> ID：11416530
> 
> 赞同：0
> 
> 时间：2012-07-10T15:17:44.547
> 
> 标签：python, csv

我在谷歌文档中制作了一个电子表格，其中一行包含以下文本：“test æøå” 在谷歌文档中，我将其导出为 CSV。

使用 Python 2.6.5 我想阅读此文档，以便获得文本“test æøå”而不是“test √¶√∏√•”

我怎样才能做到这一点？

链接到 CSV 文件：[http](http://www.filedropper.com/googledocs) ://www.filedropper.com/googledocs 或 Hexdump：74 65 73 74 20 C3 A6 C3 B8 C3 A5

# java - JSP 读取器/写入器无法正常工作

> ID：11416531
> 
> 赞同：0
> 
> 时间：2012-07-10T15:17:45.373
> 
> 标签：java, jsp, bufferedreader, bufferedwriter

我正在尝试创建一个读取两个文本文件（dev.txt 和 BLTversion.txt）并让用户写入它们以更新其内容的 JavaServer Page。唯一的问题是用户尝试更新 BLTversion.txt 时，它会删除文件内容......所以我认为写作部分有问题？我将继续尝试得到这个，但只是想我会发布它，以防在我弄清楚之前有人能看到我哪里出错了。这是代码：

```
 <%

ArrayList list = new ArrayList();
ArrayList list2 = new ArrayList();
String line1 = "";
String line2 = "";
boolean error = false;
String errorString = "";

String original = request.getParameter("original");
String code = request.getParameter("code");
String prod = request.getParameter("prod");
String versions = request.getParameter("versions");
String engineer = request.getParameter("engineer");
String assignee = request.getParameter("assignee");
line1 = prod + "," + code + "," + engineer.toUpperCase() + "," + assignee.toUpperCase() + "," + versions;
line2 = code + " " + versions + ",";

if(code.matches("(?i),* ,*")){
    errorString = errorString + "Your product code contains a space and is not valid <br />";
    error = true;
}

if(versions.matches("(?i),* ,*")){
    errorString = errorString + "Your versions contains a space and are not valid <br />";
    error = true;
}

if(engineer.equals("")){
    errorString = errorString + "Please enter an Engineer<br />";
    error = true;
}

if(assignee.equals("")){
    errorString = errorString + "Please enter an Assignee<br />";
    error = true;
}

File f = new File(Properties + seperator + "dev.txt");
File f2 = new File(Properties + seperator + "BLTversion.txt");

if (error){
    out.println(errorString);
}
else{
   try{       
       FileInputStream fstream = new FileInputStream(f);

       DataInputStream in = new DataInputStream(fstream);
       BufferedReader br = new BufferedReader(new InputStreamReader(in));
       String strLine;

       while ((strLine = br.readLine()) != null)   {
           String[] langs = strLine.split(",");

           if (!langs[1].equals(original)){
               list.add(strLine);
           }
       }
       br.close();

   }
   catch (Exception e){//Catch exception if any
       System.err.println("Error: " + e.getMessage());
   }
   if (error){
     out.println(errorString);
   }
   else{
       list.add(line1);
       Collections.sort(list);
       try{
           Writer update = new BufferedWriter(new FileWriter(f));
           for (int i = 0; i < list.size(); i++) {
               if (i == (list.size() - 1)){
                   update.write((String) list.get(i));
               }
               else{
                   update.write((String) list.get(i) + newLineChar);
               }
           } 
           update.close();
       }
       catch (Exception e){//Catch exception if any
           System.err.println("Error: " + e.getMessage());
           out.println("Your Product was not correctly processed, Please try again");
       }
   }

   try{
       FileInputStream fstream2 = new FileInputStream(f2);

       DataInputStream in2 = new DataInputStream(fstream2);
       BufferedReader br2 = new BufferedReader(new InputStreamReader(in2));
       String strLine2;

       while ((strLine2 = br2.readLine()) != null)   {
           String[] langs = strLine2.split("\\s");

           if (!langs[1].equals(original)){
               list2.add(strLine2);
           }

       }
       br2.close();

   }
   catch (Exception e){//Catch exception if any
       System.err.println("Error: " + e.getMessage());
   }
   if (error){
       out.println(errorString);
   }
   else{
       list2.add(line2);
       Collections.sort(list2);

       try{
           Writer update2 = new BufferedWriter(new FileWriter(f2));

           for (int i = 0; i < list.size(); i++) {
               if (i == (list2.size() - 1)){
                   update2.write((String) list2.get(i));
               }
               else{
                   update2.write((String) list2.get(i) + newLineChar);
               }  
           } 

           update2.close();
       }
       catch (Exception e){//Catch exception if any
           System.err.println("Error: " + e.getMessage());
           out.println("Your Product was not correctly processed, Please try again");
       }
   }
}    
  %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:21:20.670

利用

```
new FileWriter( fileName, append ); 
```

其中 append 应该是`true`保留现有文件内容并附加新内容。

参考：

1.  [FileWriter(java.lang.String, boolean)](http://docs.oracle.com/javase/6/docs/api/java/io/FileWriter.html#FileWriter%28java.lang.String,%20boolean%29)
2.  [FileWriter(java.io.File, boolean)](http://docs.oracle.com/javase/6/docs/api/java/io/FileWriter.html#FileWriter%28java.io.File,%20boolean%29)

# android - 从右侧开始 GridView 元素

> ID：11416534
> 
> 赞同：8
> 
> 时间：2012-07-10T15:18:03.017
> 
> 标签：android, gridview

我正在制作一个应用程序，我希望从右到左填充gridview“以将其用于从右到左的语言”，我试图将gridView重力设置为右，但它没有用......我的gridview 布局如下。

提前致谢

```
<RelativeLayout
    android:id="@+id/grid_layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/show_info"
    android:gravity="right" >

    <GridView
        android:id="@+id/channel_grid"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_centerHorizontal="true"
        android:columnWidth="90dp"
        android:gravity="right"
        android:horizontalSpacing="10dp"
        android:numColumns="auto_fit"
        android:stretchMode="columnWidth"
        android:verticalSpacing="10dp" >
    </GridView>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-28T13:07:24.923

我认为您最好的猜测是从[GridView 源](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.3_r2.1/android/widget/GridView.java#GridView)代码复制代码并将测量/布局更改为从右到左使用。

**更新：**视图的布局方向仅在 API 级别 17 (4.2) 中引入。如果您比较[4.2](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.2_r1/android/widget/GridView.java#GridView.makeRow%28int%2Cint%2Cboolean%29)和[4.1](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.2_r1/android/widget/GridView.java#GridView.makeRow%28int%2Cint%2Cboolean%29)中的 GridView.java ，您可以看到，例如在方法`makeRow()`中，layoutDirection 从 4.2 开始就被考虑在内，所以应该可以工作！

您是否尝试`android:layoutDirection="rtl"`在 API 级别 17 上执行您的代码？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T15:22:37.820

我认为 GridView 在设计时并没有考虑到语言。它更多的是用于排列缩略图的视觉组件。

您可以通过修改适配器并让它反转每行每个项目的顺序来解决该问题。但是，您需要告诉适配器每行的项目数量才能使其正常工作。

最重要的是，如果最后一行的项目比可能的少，那么您需要引入空的虚拟项目来填充左侧。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-29T09:08:41.907

你可以试试这个。让布局文件中的 GridView 具有以下属性

```
android:layoutAnimation="@anim/layout_grid_right_to_left" 
```

创建一个`anim`文件夹，在其中添加`layout_grid_right_to_left.xml`内容

```
<gridLayoutAnimation xmlns:android="http://schemas.android.com/apk/res/android"
    android:columnDelay="0.5"
    android:directionPriority="row"
    android:direction="right_to_left"
    android:animation="@anim/fade" /> 
```

还要`fade.xml`在同一个`anim`文件夹中添加内容

```
<alpha xmlns:android="http://schemas.android.com/apk/res/android"
   android:interpolator="@android:anim/accelerate_interpolator"
   android:fromAlpha="0.0" android:toAlpha="1.0"
   android:duration="@android:integer/config_longAnimTime" /> 
```

这些仅供您参考。请随意添加/删除适合您的需要/要求的属性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-22T13:23:40.507

你可以试试

```
android:layoutDirection="rtl" 
```

它通常用于文本，我不知道对 gridView 有什么影响。（[参考](http://developer.android.com/reference/android/view/View.html#attr_android%3alayoutDirection)）

另一件要尝试的是

```
android:stackFromBottom="true" 
```

但是，如果您需要从上到下和从右到左（[ref](http://developer.android.com/reference/android/widget/AbsListView.html#attr_android%3astackFromBottom)）订购物品，它将不起作用

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-15T07:06:01.507

您可以为您的 gridview 及其 XML 中的所有项目尝试此操作：

```
 android:rotationY="180" 
```

您也可以使用`android:layoutDirection="rtl"`. 它可能会解决您的问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-27T11:08:08.050

有一种愚蠢的方法可以做到这一点，但它工作得很好。

只需`android:ScaleX=-1`在 gridview 和您的项目容器中制作（您的网格视图单元格的自定义视图），因此您的布局从右到左开始！

希望这有帮助

# inno-setup - Inno Setup 在安装期间启动可执行文件（以安装驱动程序）

> ID：11416536
> 
> 赞同：11
> 
> 时间：2012-07-10T15:18:03.573
> 
> 标签：inno-setup

我正在使用 Inno Setup 为我的应用程序创建安装程序。安装程序非常基本，只是复制一些文件。这很好用，我很满意。

我最近实现了 USB 支持，需要为此安装 IVI 基金会的 USB 驱动程序。它基本上是一个 exe 文件，必须在安装过程中的某个地方启动。到目前为止，用户必须单独安装驱动程序，这不是那么优雅。我的第一种方法是：

```
[Run]
Filename: "{app}\driver\IviSharedComponents_2.2.1.exe"; Description: "Install USB driver (IVI Foundation)"; Flags: postinstall skipifsilent
Filename: "{app}\driver\IviSharedComponents64_2.2.1.exe"; Description: "Install 64bit USB driver (IVI Foundation)"; Flags: postinstall skipifsilent
Filename: "{app}\{#MyAppExeName}"; Description: "{cm:LaunchProgram,{#StringChange(MyAppName, "&", "&&")}}"; Flags: postinstall skipifsilent 
```

这可行，但用户必须选择正确的位数。这里的优点是他可以选择不安装它（在这种情况下，应用程序会忽略 USB 功能，这很好）。我真正想要的是自动检测系统的位数并运行设置过程。这不必在该`[Run]`部分中，尽管我不会反对它（因为用户可以选择不安装它）。

我还找到了一些代码并尝试像这样运行它：

```
[Code]
procedure CurStepChanged (CurStep: TSetupStep);
var
   WorkingDir:   String;
   ReturnCode:   Integer;
begin    
   if (ssInstall = CurStep) then
     Log('Starting driver installation');
     WorkingDir := ExpandConstant ('{app}\driver');
     Exec ('IviSharedComponents_2.2.1.exe', '', WorkingDir, SW_SHOW, ewWaitUntilTerminated, ReturnCode);
end; 
```

但这不会开始安装（尽管我可以看到日志条目“开始驱动程序安装”）。我的路径有问题吗？我做错了什么，如何更改此脚本以根据位数自动选择正确的可执行文件？

`[Tasks]`编辑：我在条目中使用了建议的解决方案。实现如下所示（仅供参考）：

```
[Tasks]
Name: "install_usb"; Description: "Install USB drivers (IVI Foundation)"; GroupDescription: "External drivers:";

[Run]
Filename: "{app}\driver\IviSharedComponents_2.2.1.exe"; StatusMsg: "Installing USB driver (IVI Foundation)"; Check: Not IsWin64(); Tasks: install_usb; Flags: skipifsilent
Filename: "{app}\driver\IviSharedComponents64_2.2.1.exe"; StatusMsg: "Installing USB driver (IVI Foundation)"; Check: IsWin64(); Tasks: install_usb; Flags: skipifsilent 
```

这很好用，非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-10T16:17:14.590

在这种情况下，最好删除 postinstall 标志，以便它在安装过程结束时无条件运行（但在它说完成之前）并添加一个`Check:`参数以将其限制为正确的位数：

```
[Run]
Filename: "{app}\driver\IviSharedComponents_2.2.1.exe"; StatusMsg: "Installing USB driver (IVI Foundation)"; Check: Not IsWin64(); Flags: skipifsilent
Filename: "{app}\driver\IviSharedComponents64_2.2.1.exe"; StatusMsg: "Installing USB driver (IVI Foundation)"; Check: IsWin64(); Flags: skipifsilent 
```

如果您希望这是有条件的，您可以使用`[Tasks]`在设置开始之前提示的普通条目。

# node.js - 为什么这个函数不会返回结果？

> ID：11416540
> 
> 赞同：0
> 
> 时间：2012-07-10T15:18:11.860
> 
> 标签：node.js, mongodb, express

我正在编写自己的类来管理 express 框架内的 mongodb 查询。

这门课的样子

```
var PostModel = function(){};

PostModel.prototype.index = function(db){
  db.open(function(err,db){
    if(!err){

      db.collection('post',function(err,collection){

        collection.find().toArray(function(err,posts){
          if(!err){
            db.close();
            return posts;
          }
        });  
      });
    }
  });
}; 
```

当我调用这个函数时：

```
// GET /post index action
app.get('/post',function(req,res){

  postModel = new PostModel();
  var posts = postModel.index(db);
  res.json(posts); 

}); 
```

我不知道为什么函数索引似乎没有返回任何内容。

但是如果我像这样改变索引函数

```
var PostModel = function(){};

PostModel.prototype.index = function(db){
  db.open(function(err,db){
    if(!err){

      db.collection('post',function(err,collection){

        collection.find().toArray(function(err,posts){
          if(!err){
            db.close();
            console.log(posts);
          }
        });  
      });
    }
  });
}; 
```

注意console.log 而不是return。通过这些更改，我可以在终端中看到我想要的所有帖子。这是因为该函数按应有的方式检索所有帖子。

问题是它不返回帖子:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T15:22:11.080

您正在使用异步函数，它们都得到回调，因此您也需要使用回调：

```
var PostModel = function(){};

PostModel.prototype.index = function(db, callback){
  db.open(function(err,db){
    if(!err){

      db.collection('post',function(err,collection){

        collection.find().toArray(function(err,posts){
          if(!err){
            db.close();
            callback(posts);
          }
        });  
      });
    }
  });
}; 
```

# java - 休眠合并功能偶尔会出现主键冲突

> ID：11416541
> 
> 赞同：1
> 
> 时间：2012-07-10T15:18:11.890
> 
> 标签：java, database, hibernate, merge, indexing

我们在 Java 应用程序中使用 Hibernate。为了更新某条信息（及其所有相关的依赖项），我们使用了 Hibernate Merge 函数：

```
HibernateTemplate template = getHibernateTemplate();
template.deleteAll(toBeDeletedObjs);
Object mergedObj = template.merge(obj); 
```

正在更新的主表有 5 列，其中第一列（PK）是自动生成的值。

**有时，但并非总是如此**，合并的 Insert 会出现以下错误：

[插入表（COL1、COL2、COL3、COL4、COL5）值（默认值、?、?、?、?）

```
DuplicateKeyException: One or more values in the INSERT statement, UPDATE statement, or foreign key update caused by a DELETE statement are not valid because the primary key, unique constraint or unique index identified by "ID" constrains table "TABLE" from having duplicate values for the index key.. SQLCODE=-803, SQLSTATE=23505, DRIVER=3.53.95 
```

我假设“默认”是自动生成的 Hibernate 值，所以我没有检索前一个对象的 ID；这不可能是错误的原因。关于为什么 Hibernate 有时会在此合并中失败的任何想法？

# java - 如何为字符串分配内存？

> ID：11416542
> 
> 赞同：4
> 
> 时间：2012-07-10T15:18:12.050
> 
> 标签：java, c++, string, memory-management

如何为字符串分配内存，比如在 Java 或 C++ 中？这可能是愚蠢的，所以请原谅我。我想知道，因为字符串的大小未知。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T15:22:18.220

在 Java 中，是一个不可变对象，因此**必须**在分配时知道`String`其“大小” 。如果它是“静态的”（例如litteral，like ），它将最终分配在共享对象池中，如果使用.`String` **`String``"Hey, I'm a String litteral!"``new String(...)`**

 *** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T15:20:47.847

Java 字符串是不可变的对象。在某种程度上，每次您创建一个字符串时，都会分配一个 char[] 内存，其中分配有字符串中的字符数。如果您对该字符串进行任何操作，它将是全新的对象，并且随着字符的长度，将完成内存分配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T15:25:43.507

在内部，java`String`只不过是一个已知长度的 char 数组。以下是[String](http://www.docjar.com/html/api/java/lang/String.java.html)的类成员：

```
 110   public final class String
  111       implements java.io.Serializable, Comparable<String>, CharSequence
  112   {
  113       /** The value is used for character storage. */
  114       private final char value[];
  115   
  116       /** The offset is the first index of the storage that is used. */
  117       private final int offset;
  118   
  119       /** The count is the number of characters in the String. */
  120       private final int count;
  121   
  122       /** Cache the hash code for the string */
  123       private int hash; // Default to 0
  124   
  125       /** use serialVersionUID from JDK 1.0.2 for interoperability */
  126       private static final long serialVersionUID = -6849794470754667710L;
            ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T15:21:37.703

它像向量一样动态分配。当它变得太大时，它会通过内部方法（C++）自动调整大小。在 Java 中，正如 thinksteep 已经提到的，字符串是不可变的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T11:03:47.637

只是为了添加到以前的答案。
在 Java 中，字符串可以通过两种方式分配，具体取决于字符串的创建方式。例如，如果使用`String s = "some string";`JVM 创建字符串，则会将此字符串放入所谓的文字池中（内存出现问题时留下的东西），如果您使用`String s = new String("some string");`JVM 创建字符串，则会将其放入堆中......
唯一显着的区别是您可以如果字符串都在文字池中，则使用 operator == 比较字符串，但不推荐这样做。

问候

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T15:48:48.220

*您将variable size*与*unknown size*混淆了。任何语言中的具体字符串始终具有已知大小，只是字符串的每个实例可能具有不同的大小。语言处理可变长度的方式可能非常不同，并且是特定于实现的。**

# python - 匹配 UTF16-LE 文件中的文本行

> ID：11416543
> 
> 赞同：0
> 
> 时间：2012-07-10T15:18:16.120
> 
> 标签：python, utf-16

我正在解析一个用 UTF16-LE 编写的文件以进行相当简单的匹配，但它们似乎都没有触发。例如，我有以下代码。

```
with open(filepath) as f:
   for line in f:
      if 'TEST_CASE' in line:
         print(line) 
```

有没有一种好方法可以在不更改文件本身的情况下检查文件中的行是否匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:32:45.100

根据我的评论`codecs.open('filename', encoding='utf-16-le')`

# php - PHP - 使用带有希腊文本的 imagettftext 创建图像

> ID：11416546
> 
> 赞同：1
> 
> 时间：2012-07-10T15:18:21.707
> 
> 标签：php, internationalization, imagettftext

我正在尝试使用 imagettftext 使用此希腊文本“από τον/την”创建图像。

此文本是从 MySQL 数据库表中的排序规则设置为 utf8-unicode-ci 的字段中读取的。

文本从数据库中出来为“Î±Ï€ÏŒ Ï„Î¿Î½/Ï„Î·Î½”。

这是代码（来自 php.net）

```
header('Content-Type: image/png');
// Create the image
$im = imagecreatetruecolor(400, 30);

// Create some colors
$white = imagecolorallocate($im, 255, 255, 255);
$grey = imagecolorallocate($im, 128, 128, 128);
$black = imagecolorallocate($im, 0, 0, 0);
imagefilledrectangle($im, 0, 0, 399, 29, $white);

// The text to draw
$text = html_entity_decode('Î±Ï€ÏŒ Ï„Î¿Î½/Ï„Î·Î½', ENT_COMPAT, 'UTF-8');

// Replace path by your own font path
$font = '/Applications/MAMP/htdocs/test.localhost/libs/fonts/CustomFont.ttf';

// Add some shadow to the text
imagettftext($im, 20, 0, 11, 21, $grey, $font, $text);

// Add the text
imagettftext($im, 20, 0, 10, 20, $black, $font, $text);

// Using imagepng() results in clearer text compared with imagejpeg()
imagepng($im);
imagedestroy($im); 
```

这会生成一个带有“από τον/την”的图像，而不是“από τον/την”。

有任何想法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:15:43.840

使用其他字体，例如

```
$font = 'arial.ttf'; 
```

它工作得很好

# c# - TPL 的锁定替代方案

> ID：11416548
> 
> 赞同：0
> 
> 时间：2012-07-10T15:18:28.697
> 
> 标签：c#, task-parallel-library

我使用任务并行库，我需要同步对方法的访问，但由于任务不一定为异步操作创建线程，所以我不能依赖使用锁。

```
void Foo()
{
    lock(SyncRoot)
    {
        // Do stuff...
    }
} 
```

如果我想防止多个任务同时调用 Foo，我可以使用什么来代替锁定？我需要我的任务一一调用 Foo。

* * *

*   ContinueWith 不是一个选项。
*   我使用.NET 4。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T15:27:07.987

来自[MSDN](http://msdn.microsoft.com/en-us/library/dd537609.aspx)：

> 在幕后，任务排队到线程池，该线程池已通过算法（如爬山）进行了增强，该算法可确定并调整线程数以最大限度地提高吞吐量。

因此，您可以锁定或任何其他线程同步机制，如 ManualResetEvent 或内存屏障。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T15:26:58.903

正如其他答案中所述，您可以使用已有的工具做您想做的事情，这由线程池为您处理。但是，如果您设置了不同的方法，您是否[`ConcurrentCollection`](http://msdn.microsoft.com/en-us/library/system.collections.concurrent)专门查看了一个`BlockingCollection`可用于创建执行您想要的生产者/消费者队列的方法，类似以下内容可能对您有用

```
public class TaskQueue : IDisposable
{
    BlockingCollection<Action> taskX = new BlockingCollection<Action>();

    public TaskQueue(int taskCount)
    {
        // Create and start new Task for each consumer.
        for (int i = 0; i < taskCount; i++)
            Task.Factory.StartNew(Consumer);  
    }

    public void Dispose() { taskX.CompleteAdding(); }

    public void EnqueueTask (Action action) { taskX.Add(Action); }

    void Consumer()
    {
        // This seq. that we are enumerating will BLOCK when no elements
        // are avalible and will end when CompleteAdding is called.
        foreach (Action action in taskX.GetConsumingEnumerable())
            action(); // Perform your task.
    }
} 
```

我希望这有帮助。

# css - 无法将内容放在页面的最右侧

> ID：11416551
> 
> 赞同：0
> 
> 时间：2012-07-10T15:18:37.773
> 
> 标签：css, layout, twitter-bootstrap, html

我正在使用 Twitter Boostrap 和它附带的网格系统。对于我的#stories div，我想将它移动到页面的右侧，使其垂直平行于“欢迎”div。

我遵循了 Boostrap 参考（脚手架部分）中的嵌套规则，并根据他们的指南布置了我的代码，但无法让故事 div 的内容显示为右侧的列。

我可能做错了什么？

下面的代码，还有底部的链接到整页。

```
<div class="row">

        <!-- welcome container -->
        <div class="span8" id="welcome">
            <h1>Storify</h1>
            <div id="StoryActions">

            <div>

                <a href="#" class="btn btn-success .btn-large" id="BtnCreateStory">
                    <div id="NewStoryBtn">
                        <span id="create">CREATE</span><p id="newstory">New Story</p>
                    </div>
                </a>

                <a href="#" class="btn" id="BtnJoin">
                    <div id="JoinStoryBtn">
                        <span id="create">JOIN</span><p id="newstory">Existing Story</p>
                    </div>
                </a>

                <p id="registration">no registration required</p>

                <div id="StoryDescription">
                <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
                <p>Storify is a <strong>fun</strong>, group <strong>writing game</strong> 
                taking inspiration from the story writing game that you may have played at a party or at school with friends.</p>

                <p>Each person writes a random sentence to form part of a story.</p>

                <p>Once the story is complete, one person reads out the whole story, and usually everyone breaks into laughter.</p>
                <p>Storify is great for playing with your Internet friends or Co-workers.</p>
                </div>

            </div>

            </div>

    <div class="row">

        <div class="span6">

                <!-- Running Stories -->
                <div class="span3">&nbsp;</div>

                <div class="span3">
                    <div id="stories"> 
                    I want to write a really long story here and see how far it goes down the path
                    </div>
                </div>

        </div>

    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:54:53.327

Bootstrap 网格系统使用 12 列，这意味着在您设计的每一**行**中，最顶层行内*的列总和应**等于*或小于 12。嵌套行中的列总和应等于嵌套行的列的大小。

您的示例的简化方案是这样的：

```
<div class="row">
  <!-- welcome container -->
  <div class="span8" id="welcome">
    ...
  <div class="row">
  <div class="span6">
    <!-- Running Stories -->
      <div class="span3">&nbsp;</div>

      <div class="span3">
        <div id="stories"> 
          I want to write a really long story here and see how far it goes down the path
        </div>
      </div>
  </div>
</div> 
```

有几个错误。

1.  **span8** div 未正确关闭。代替它的结束标签，有一个多余的**行**div。
2.  最顶层的列总和为 14 ( **span8** + **span6** )，这太多了。
3.  两个嵌套列**span3**未在另一**行**中关闭。

这是固定版本，我将右列减少到**span4**，因此总和等于 12。同样，我减少了嵌套列的大小。

```
<div class="container">

    <div class="row">

        <!-- welcome container -->
        <div class="span8" id="welcome">
            <h1>Storify</h1>
            <div id="StoryActions">

            <div>

                <a href="#" class="btn btn-success .btn-large" id="BtnCreateStory">
                    <div id="NewStoryBtn">
                        <span id="create">CREATE</span><p id="newstory">New Story</p>
                    </div>
                </a>

                <a href="#" class="btn" id="BtnJoin">
                    <div id="JoinStoryBtn">
                        <span id="create">JOIN</span><p id="newstory">Existing Story</p>
                    </div>
                </a>

                <p id="registration">no registration required</p>

                <div id="StoryDescription">
                <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
                <p>Storify is a <strong>fun</strong>, group <strong>writing game</strong> 
                taking inspiration from the story writing game that you may have played at a party or at school with friends.</p>

                <p>Each person writes a random sentence to form part of a story.</p>

                <p>Once the story is complete, one person reads out the whole story, and usually everyone breaks into laughter.</p>
                <p>Storify is great for playing with your Internet friends or Co-workers.</p>
                </div>

            </div>

            </div>

        </div>

        <div class="span4">

           <div class="row">
                <!-- Running Stories -->
                <div class="span2">&nbsp;</div>

                <div class="span2">
                    <div id="stories"> 
                    I want to write a really long story here and see how far it goes down the path
                    </div>
                </div>
           </div>
        </div>

</div> 
```

# ios - iPhone所有应用程序动画都消失了，甚至键盘显示都没有动画

> ID：11416552
> 
> 赞同：0
> 
> 时间：2012-07-10T15:18:38.540
> 
> 标签：ios, animation, wait

我有一个奇怪的错误：wait_fences: failed to receive reply: 10004003 它发生在某些我无法检测到的情况下，我的应用程序中有一个注销按钮，它以模态方式呈现登录控制器，有时会在以模态方式呈现登录时发生，当控制台上出现上述错误时，所有应用程序动画都消失了，即使是那些你无法控制的动画，比如点击任何文本字段，这样键盘就会出现，它会显示但没有动画，一切都没有动画。

感谢您的帮助，谢谢。

# jquery-ui - jQuery UI 确认对话框不返回真/假

> ID：11416553
> 
> 赞同：3
> 
> 时间：2012-07-10T15:18:39.757
> 
> 标签：jquery-ui, jsf-2, jquery-ui-dialog

我有 jQuery UI 确认对话框：

```
function fnComfirm(title, content) {
    $("#dialog:ui-dialog").dialog("destroy");
    $("#dialog-confirm p").html(content);
    $("#dialog-confirm").dialog({
        title: title,
        resizable: false,
        height: 200,
        width: 486,
        modal: true,
        buttons: {
            "OK": function() {
                $( this ).dialog("close");
                return true;
            },
            Cancel: function() {
                $( this ).dialog("close");
                return false;
            }
        }
    });
} 
```

由 JSF2 html 调用：

```
<a4j:commandButton action="#{userBean.makeSomething()}"  type="button" onclick="if (fnValidateUsersList()) {return fnComfirm('Delete User', 'Bla bla')}" /> 
```

但我无法从此函数中获得真/假值。我在这个网站上看到了很多关于它的问题，尝试了所有这些问题，但仍然没有成功。

更新：输出`<a4j:commandButton>`：

```
<input type="button" value="Make Something" onclick="jsf.util.chain(this,event,&quot;if (fnValidateUsersList()) {return fnComfirm('Delete User', 'Bla bla')}&quot;,&quot;RichFaces.ajax(\&quot;frm:j_idt25\&quot;,event,{\&quot;incId\&quot;:\&quot;1\&quot;} )&quot;);return false;" name="frm:j_idt25" id="frm:j_idt25"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:30:13.923

这是我使用的一种方法（您可以将一般想法用于您的示例）

你需要两个按钮

**第**一个将被隐藏并在单击`Yes`确认对话框时被调用，该隐藏按钮将调用服务器端方法并`render`使用`f:ajax`

```
<h:commandButton id="myHiddenButtonID" value="DeleteHiddenButton" action="#{userBean.makeSomething()}" style="display:none">
    <f:ajax render="@form" ></f:ajax>
</h:commandButton> 
```

**第二个**按钮将打开对话框，此按钮还将提交表单到服务器`execute="@form"`（如果您在表中有选择列（选择表中的几列并单击按钮删除）您要在服务器 bean 中更新例子）

```
<h:commandButton value="Delete">
    <f:ajax execute="@form" onevent="openDialogFunc()"></f:ajax>
</h:commandButton> 
```

现在到js函数的实现

```
function openDialogFunc(data){
    if (data.status === 'success') {
        $('#dialog').dialog({
                    title: title,
                    resizable: false,
                    height: 200,
                     width: 486,
                     modal: true,
         buttons: {
                 "Ok": function() { 
                     $("#myHiddenButtonID").click();
                     $(this).dialog("close"); 
                 }, 
                 "Cancel": function() { 
                     $(this).dialog("close"); 
                 } 
             }
         });
    }
} 
```

请注意，只有在单击“确定”对话框按钮时，才会执行隐藏按钮，`$("#myHiddenButtonID").click();`否则不会发生任何事情......

从我过去回答过的类似问题中得到这个[如何用 JSF 实现 JQuery 确认对话框](https://stackoverflow.com/a/10683337/617373)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:27:36.317

```
function fnComfirm(title, content) {
    $("#dialog:ui-dialog").dialog("destroy");
    $("#dialog-confirm p").html(content);
    $("#dialog-confirm").dialog({
        title: title,
        resizable: false,
        height: 200,
        width: 486,
        modal: true,
        buttons: {
            "OK": function() {
                //do whatever you need here, i.e. form post
                alert('ok!');
            },
            Cancel: function() {
                $( this ).dialog("close");
                return false;
            }
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T15:27:49.573

发生这种情况是因为该函数执行并调用对话框插件并完成，而后者又被执行并且按钮上的返回不会影响事件。

克服它的最好方法是创建一个根据按下的按钮执行的回调函数：

```
function fnComfirm(title, content, callbackOK, callbackCancel) {  
    $("#dialog:ui-dialog").dialog("destroy");  
    $("#dialog-confirm p").html(content);  
    $("#dialog-confirm").dialog({  
        title: title,  
        resizable: false,  
        height: 200,  
        width: 486,  
        modal: true,  
        buttons: {  
            "OK": function() {  
                $( this ).dialog("close"); 
                if (typeof callbackOK == function) {
                    callbackOK();
                } else if (callbackOK) {
                    window.location.href = callbackOK;
                }
                return true;  
            },  
            Cancel: function() {  
                $( this ).dialog("close");
                if (typeof callbackCancel == function) {
                    callbackCancel();
                } else if (callbackCancel) {
                    window.location.href = callbackCancel;
                }

                return false;  
            }  
        }  
    });
    return false;
} 
```

然后你可以这样称呼它：

```
... onclick="if (fnValidateUsersList()) {return fnComfirm('Delete User', 'Bla bla', this.href)}" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T15:29:44.410

返回是在嵌套函数中的确定和取消按钮的上下文中，您可以尝试回调：

```
function fnComfirm(title, content,onSusses,onCancel) {
    $("#dialog:ui-dialog").dialog("destroy");
    $("#dialog-confirm p").html(content);
    $("#dialog-confirm").dialog({
        title: title,
        resizable: false,
        height: 200,
        width: 486,
        modal: true,
        buttons: {
            "OK": function() {
                $( this ).dialog("close");
                onSusses();
            },
            Cancel: function() {
                $( this ).dialog("close");
                onCancel();
            }
        }
    });
} 
```

然后打电话

```
fnComfirm(title,content,function(){alert('Ok')},function(){alert('cancel');}}) 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-10T15:23:40.670

我不太了解 JS，但我猜是`return false`在嵌套函数中返回？！你想做的是这个；

```
function fnComfirm(title, content) {
var returnVar;
$("#dialog:ui-dialog").dialog("destroy");
$("#dialog-confirm p").html(content);
$("#dialog-confirm").dialog({
    title: title,
    resizable: false,
    height: 200,
    width: 486,
    modal: true,
    buttons: {
        "OK": function() {
            $( this ).dialog("close");
            returnVar = true;
        },
        Cancel: function() {
            $( this ).dialog("close");
            returnVar = false;
        }
    }
});
return returnVar;
} 
```

就像我说的，我不是 Javascript 专家，但这就是我认为的问题:)

# javascript - 用不同颜色填充的 Highchart 数据系列

> ID：11416554
> 
> 赞同：5
> 
> 时间：2012-07-10T15:18:42.033
> 
> 标签：javascript, colors, highcharts

我需要弄清楚如何在 Highcharts 中用不同颜色为相同的数据系列点着色。例如，假设我有几天的数据系列，我想要一个折线图。在此行中，应区分特定日期（可能用某种颜色着色）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T15:39:24.387

在您的数据中，您可以指定特定点的颜色：

```
data: [{
    name: 'Point 1',
    color: '#00FF00',
    y: 0
}, {
    name: 'Point 2',
    color: '#FF00FF',
    y: 5
}] 
```

对于折线图，请使用“填充颜色”，如下面的答案所述。

有关 jsFiddle 中的示例，请参阅[http://jsfiddle.net/xqWp5/1/](http://jsfiddle.net/xqWp5/1/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-11T08:44:32.213

尝试使用该`fillColor`属性：

```
{
    name: 'xyz',
    x: 123,
    y: 456,
    fillColor: '#00FF00'
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-11T06:42:06.957

是的，您可以只使用 plotOptions.area.zones ：

[https://api.highcharts.com/highcharts/plotOptions.area.zones](https://api.highcharts.com/highcharts/plotOptions.area.zones)

看例子：

```
plotOptions: {
    series: {
        zoneAxis: "x",
        zones: [{
            value: 0,
            className: 'zone-0'
        }, {
            value: 10,
            className: 'zone-1'
        }, {
            className: 'zone-2'
        }],
        threshold: -10
    }
}, 
```

[http://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/highcharts/css/color-zones/](http://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/highcharts/css/color-zones/)

使用 ，`zoneAxis: "x"`您可以指定使用哪个轴来区分不同的颜色。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-16T14:38:54.040

您希望部分有彩色线条，您需要有与颜色一样多的系列。换句话说，每种颜色都应该是具有定义颜色的单独系列。

# batch-file - DOS批处理 - 重命名子目录中的所有文件以具有子目录名称前缀

> ID：11416556
> 
> 赞同：0
> 
> 时间：2012-07-10T15:18:47.930
> 
> 标签：batch-file, dos, rename, subdirectory

我基本上有这样的设置：

```
C:\Upload\A
C:\Upload\B
C:\Upload\C
C:\Upload\D
C:\Upload\E 
```

其中`A`, `B`, `C`, `D`,`E`总是不同的（产品 ID）并且总是不同的数量（它不会总是 5 个子目录）。这些子目录中的每一个都包含 24 个图像，编号为 01-24。

我需要创建一个查看 Upload 目录的批处理文件，获取每个子目录的名称并将该名称附加到该子目录中包含的每个图像文件的开头。

因此，`C:\Upload\A\01.jpg`将`C:\Upload\A\A-O1.jpg`与每个子目录中的其他 23 个图像一样。

批处理文件需要对上传目录中的每个子目录执行相同的操作。

这对我来说听起来非常复杂，我已经开始尝试写这个，我还没有任何值得在这篇文章中分享的东西。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T16:45:12.907

这将重命名“C:\Upload”子目录中的文件

```
@echo off
for /d %%D in (C:\Upload\*) do (
  for /f "eol=: delims=" %%F in ('dir /b /a-d "%%D" ^| findstr /vbic:"%%~nD-"') do (
    ren "%%D\%%F" "%%~nD-%%F"
  )
) 
```

我添加了额外的代码以防止两次重命名同一个文件。您应该能够安全地多次运行该脚本。

如果要递归地重命名每个子目录树中的文件，则需要对代码稍作更改。

```
@echo off
for /d /r "C:\Utils" %%D in (*) do (
  for /f "eol=: delims=" %%F in ('dir /b /a-d "%%D" ^| findstr /vbic:"%%~nD-"') do (
    ren "%%D\%%F" "%%~nD-%%F"
  )
) 
```

# c++ - 找到一个扇区内部的点

> ID：11416565
> 
> 赞同：0
> 
> 时间：2012-07-10T15:19:17.433
> 
> 标签：c++, geometry, trigonometry, sector

已解决：请参阅[我的答案](https://stackoverflow.com/a/11712660/421178)。

我试图找到一个位于弧内部的点，因此当发生洪水填充时，它不会意外填充弧外的区域。只要两个角之间距离的绝对值：start和end；小于 PI 这有效（有几个极端的边缘情况，其中绘制的线非常接近，以至于选择的点是这些线的一部分，但那是不同的一天......）。

我遇到的问题是，当开始角和结束角之间的距离的绝对值大于 PI 时，洪水发生在弧的外部而不是内部。许多例子之一是：如果弧从 0 开始并以 3PI/2 结束，则距离的绝对值为 3PI/2，泛光发生在角度之间，就好像绝对值距离为 PI/2 并泛滥整个屏幕除了吃豆人形的弧线。

编辑：

为避免混淆，这里是根据 allegro（以及一般的三角学）定义的弧：

> void arc(BITMAP *bmp, int x, y, fixed ang1, ang2, int r, int color);
> 
> 以逆时针 [sic] 方向绘制圆弧 [减去初始/终止边或中心点]，中心 [sic] x, y 和半径 r，从角度 a1 开始，在到达 a2 时结束......零位于中心 [sic] 点的右侧，较大的值从那里逆时针旋转 [sic]。

方括号是我的符号。

我已经处理了从 allegro 的（愚蠢的）使用`fixed integers`转换为正确的`radian`值。

结束编辑

```
void Arc::Draw(BITMAP* dest, int color, bool filled, bool showCenter, bool showSides) {

    if(showSides || filled) {
        Line initial(GetX(), GetY(), GetZ(), GetStartPoint().GetX(), GetStartPoint().GetY(), GetZ(), false);
        initial.SetColor(color);

        Line terminal(GetX(), GetY(), GetZ(), GetEndPoint().GetX(), GetEndPoint().GetY(), GetZ(), false);
        terminal.SetColor(color);

        initial.Draw(dest, initial.GetColor(), false);
        terminal.Draw(dest, terminal.GetColor(), false);

    } else if(showCenter) {
        putpixel(dest, GetX(), GetY(), color);
    }

    //Draw arc first to prevent flood overflow.
    arc(dest, GetX(), GetY(), AngleConverter::RadianToFixed(_startAngle), AngleConverter::RadianToFixed(_endAngle), _radius, color);

    if(filled) {

        double distance = std::fabs(this->_endAngle - this->_startAngle);
        if(distance < a2de::A2DE_PI) {

            Line displace(GetStartPoint(), GetEndPoint(), false);
            Point displacePoint(displace.GetCenter());
            floodfill(dest, displacePoint.GetX(), displacePoint.GetY(), color);

        } else if(distance > a2de::A2DE_PI) {

            Line displace(GetStartPoint(), GetEndPoint(), false);
            Vector2D center_of_displacement(displace.GetCenter());
            Vector2D center_point(this->_center);
            Vector2D direction_of_center(center_of_displacement - center_point);

            double angle = std::atan2(direction_of_center.GetY(), direction_of_center.GetX());
            Vector2D flood_point = center_point - direction_of_center;
            flood_point += angle;

            double x = flood_point.GetX() > 0.0 ? std::ceilf(flood_point.GetX()) : std::floorf(flood_point.GetX());
            double y = flood_point.GetY() > 0.0 ? std::ceilf(flood_point.GetY()) : std::floorf(flood_point.GetY());
            floodfill(dest, x, y, color);

        } else {

            if(_startAngle == 0.0 || _endAngle == a2de::A2DE_2PI) {
                floodfill(dest, GetX(), GetY() - 1, color);
            } else if(_endAngle == 0.0 || _startAngle == a2de::A2DE_PI) {
                floodfill(dest, GetX(), GetY() + 1, color);
            }

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:36:56.867

首先，关于您的“原文”评论。圆心点*通常*也称为圆心，逆时针*是*最常见的惯例。就像 x 轴指向右侧和 y 轴向上一样，角度从正 x 轴开始。

要确定点 x,y 是否在以极坐标 (r,eta) 定义的区域内，只需将点 x_point,y_point 转换为极坐标

```
r_point=sqrt((x_point-x_circle)^2 + (y_point-y_circle)^2 )
eta_point=atan2((y_point-y_circle) , (y_point-x_circle)) 
```

使用atan2，那么你就不需要考虑符号和pi-flips等[。c++中的atan和atan2有什么区别？](https://stackoverflow.com/questions/283406/what-is-the-difference-between-atan-and-atan2-in-c)

```
Now, is the radious within the 'sector' ?
if (r_point<r_sector) ... 
```

如果是这种情况，值得看一下角度部分：从 eta_point 和扇区的角度大小中减去星角

```
eta_point_new = eta_point - ang1
ang2_new = ang2 - ang1 
```

现在，ang2_new 是该扇区在旋转方向上的大小，而 eta_point_new 是该点的距离。如果 ang2_new 为负数，则表示该扇区越过了您的角坐标的边界，因此您需要向其添加 2pi。然后：

```
if (eta_point_new < ang2_new) 
   ... then the point is inside... 
```

很抱歉，我没有时间对此进行测试或用适当的 C++ 编写它，随心所欲地使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T21:00:25.197

正转方向为逆时针方向。我给出的是伪代码，而不是真正的 C++ 代码。

要确定旋转角度，请从结束角度减去开始角度。不要取绝对值。归一化到区间 [0, 2π)。

```
rot_angle = end_angle - start_angle;

while (rot_angle < 0)   
  rot_angle += TWO_PI; 
```

现在我们需要在圆弧的中心和起点之间取一个点，并围绕中心旋转我们刚刚找到的总旋转角度的一半：

```
start_point = rotate (point (center.x+r, center.y), center, start_angle);
interior_point = rotate (midpoint (center, start_point), center, rot_angle/2); 
```

`pt`将一个点绕原点旋转一个`o`角度`theta`：

```
point rotate (point pt, point o, double theta)
{
  return point(cos(theta) * (pt.x-o.x) - sin(theta) * (pt.y-o.y) + o.x,
               sin(theta) * (pt.x-o.x) + cos(theta) * (pt.y-o.y) + o.y);

} 
```

为了完整性：

```
point midpoint (point p1, point p2)
{
   return point((p1.x+p2.x)/2, (p1.y+p2.y)/2);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T20:29:08.543

解决了：

1）计算圆心：

```
double e = GetEndAngle();
double s = GetStartAngle();
double d = e - s;

double arc_center_x = 0.0;
double arc_center_y = 0.0;
double offset = 0.0;
if(d < 0.0) {
    offset = PI;
}
arc_center_x = (GetPosition().GetX() + std::cos(((s + e) / 2.0) + offset) * GetRadius());
arc_center_y = (GetPosition().GetY() + -std::sin(((s + e) / 2.0) + offset) * GetRadius());
_center = Vector2D(x, y); 
```

2）计算从该中心到扇区位置的线：

```
Line l(arc_center_x, arc_center_y, p_x, p_y); 
```

3）获取始终位于扇区角度内部的那条线的中点：

```
double x = l.GetCenter().GetX();
double y = l.GetCenter().GetY(); 
```

# javascript - 递归地将嵌套的xml转换为嵌套的html

> ID：11416568
> 
> 赞同：0
> 
> 时间：2012-07-10T15:19:24.467
> 
> 标签：javascript, jquery, html, css, xml

我想将嵌套的 xml 转换为嵌套的 ul li 结构。我已经编写了所有代码，但其中有一个错误。我花了一整天，但无法让它工作。错误可能非常简单。任何人都可以调查并回复我。

```
<html>
<head>
    <script type="text/javascript">
        var str = ""; var temp = "";
        function makeTree() {
            treeUL = createNestedTree($('root'));
            $("#tree").append(treeUL);
        }

        function createNestedTree(obj) {
            if($(obj).children().size() != 0) {
                str = str + "<li>" + $(obj).attr("name") + "</li><ul>";
                $(obj).children("item").each(function() {
                    returnValue = createNestedTree($(this));
                    str = str + returnValue;
                });

                return str + "</ul>";
            }
            else {
                temp = "<li>" + $(obj).attr("name") + "</li><ul></ul>";
                return temp;
            }
        }
    </script>
</head>

<body>
    <!-- xml structure start -->
    <root>
        <item name="a">
            <item name="d">
                <item name="d"></item>
                <item name="e"></item>     
                <item name="f"></item>
            </item>
            <item name="g"></item>
            <item name="h"></item>
        </item>
        <item name="b"></item>
        <item name="c"></item>
    </root>
    <!-- xml structure end -->

    <a href="javascript:makeTree()">Make Tree</a>
    <div id="tree"></div>
</body>
</html>​ 
```

小提琴在[这里](http://jsfiddle.net/ashwyn/b2eMe/28/)

我在 html 中创建了 xml，因为我不知道如何将外部 xml 引用到小提琴中。但是当传递给函数时，它的行为与 xml 完全一样，因此没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:39:29.940

尝试：

```
var makeTree = function makeTree(nodes) {
  var $result = $('<ul>');

  $.each(nodes, function (_, node) {
    var
      $li = $('<li>').text(node.getAttribute('name')).appendTo($result),
      $children = $(node).children('item');

    if ($children.length > 0) {
      makeTree($children).appendTo($li);
    }
  });

  return $result;
};

makeTree($('root').children('item')).appendTo('#tree'); 
```

演示：http: [//jsfiddle.net/8zeep/2/](http://jsfiddle.net/8zeep/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:41:59.610

Please take a look at the following fiddle which solves your problem - [http://jsfiddle.net/b2eMe/36/](http://jsfiddle.net/b2eMe/36/)

**CODE**

```
<html>
<head>
    <script type="text/javascript">
        var str = ""; var temp = "";
        function makeTree() {
            createNestedTree($('root'));
            $("#tree").append(str);
        }

        function createNestedTree(obj) {
            str += '<ul>'; 
            var children = obj.children();        
            if(children.size() != 0) {
                $.each(children, function (index, value) {
                    var $value = $(value);
                    str += '<li>' + $value.attr('name');
                    createNestedTree($value);
                    str += '</li>';
                })
            }
            str += '</ul>';     
        }
    </script>
</head>

<body>
    <!-- xml structure start -->
    <root>
        <item name="a">
            <item name="d">
                <item name="d"></item>
                <item name="e"></item>     
                <item name="f"></item>
            </item>
            <item name="g"></item>
            <item name="h"></item>
        </item>
        <item name="b"></item>
        <item name="c"></item>
    </root>
    <!-- xml structure end -->

    <a href="javascript:makeTree()">Make Tree</a>
    <div id="tree"></div>
</body>
</html>​ 
```

# linq-to-sql - 有没有办法从 Linq2Sql 数据库操作中获取操作反馈？

> ID：11416571
> 
> 赞同：0
> 
> 时间：2012-07-10T15:19:32.590
> 
> 标签：linq-to-sql, error-handling

这是试图澄清这个问题的尝试......

我之前使用 Linq2Sql 处理由存储过程执行的所有数据操作。在这些存储过程中，我可以返回各种（预设）错误代码来表示不同类型的错误，也可以返回任何 SQL 错误代码。在我的应用程序框架中，我有一个很好的方法来查找错误代码，获得对错误的有意义的描述，然后将有用的反馈传递给 UI。

我已经使用 Linq2Sql 开始了一个新项目，没有任何存储过程（例如，只是实体表）。我遇到的问题是在执行数据操作后我找不到任何方法从数据库访问 SQL 错误代码，更不用说我现在不存在的自定义错误代码（没有存储过程，没有自定义错误代码） .

所以我的问题是，'有没有办法在执行数据操作后从数据库中检索这种与错误相关的反馈？我真的需要知道数据操作是否成功进行。

提前谢谢了。

更新>>>

收到第一个答案后，我觉得我应该再补充一点，以进一步澄清事情。我遇到的情况是我的 Linq2Sql`DataContext`无法正常工作（现在已修复）并且数据库中没有更新任何数据，但没有抛出异常。因此，我需要找到一种方法来确认我的数据操作是否成功......必须有其他形式的确认，而不是“没有异常”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:43:10.863

正常的异常处理有什么问题。如果您在提交更改期间收到错误，则会引发异常

```
try
{
    db.SubmitChanges();
}
catch (Exception e)
{
    Console.WriteLine(e.Message);
    // Make some adjustments.
    // ...
    // Try again.
    db.SubmitChanges();
} 
```

# python - 如果一个单词在 Python 中以非字母数字字符开头，我如何匹配它？

> ID：11416572
> 
> 赞同：1
> 
> 时间：2012-07-10T15:19:35.573
> 
> 标签：python, regex

假设我有一个文本文件，其中每一行包含“1”或“-1”。如何搜索文件以检查文件是否包含至少一个“1”？

最初，我有以下内容。

```
if re.search(r'\b1', f.read()): return true
else: return false 
```

但是，这不起作用，因为“-”不被视为字母数字字符串，如果文件不包含单个“1”，则返回 true。确定文件是否包含“1”的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:22:45.217

使用该[`re.MULTILINE`](http://docs.python.org/library/re.html#re.MULTILINE)标志，`^`将匹配行的开头（而不是仅主题的开头）：

```
re.search(re.compile('^1', re.MULTILINE), f.read()) 
```

如果任何行以 . 开头，这将匹配`1`。

请参阅[http://docs.python.org/library/re.html#regular-expression-syntax](http://docs.python.org/library/re.html#regular-expression-syntax)

* * *

这种替代解决方案避免完全读取文件：

```
has_1 = any(line == "1" for line in f) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:37:50.123

`any('1' in line for line in file)` is one way without reading the entire file to memory.

**A convoluted but possibly efficient way**

```
fmap = mmap.mmap(open('file').fileno(), 0)
'1' in fmap 
```

You can also run a re against the mmap'd file.

```
re.search('^1', fmap, re.M) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T15:48:21.600

```
 f = open("textfile.txt", "rb")
lines = f.readlines()
new_lines = [line.replace("-1", "") for line in lines]
for line in new_lines:
    if "1" in line:
        print "Damn right!"
        break 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T22:39:30.813

只需使用列表理解：

```
>>> if not None in [ re.search( r"1", line ) for line in f.readlines() ] :
        pass # <your code here> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T11:37:09.487

如果“1”或“-1”总是出现在行首，那么您可以将正则表达式更改为：

```
 ^1 
```

如果它们总是出现在行的中间/末尾，则使用：

```
[^-]1 
```

如果它们有时出现在开头，有时出现在中间/结尾，那么您可以尝试以下操作：

```
^1|[^-]1 
```

我没有测试过这些。特别是最后一个，我不确定优先级是否正确。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T15:25:51.217

```
def thingy(contents):
    return any(line.strip() == "1" for line in contents.splitlines())

thingy("1\n-1\n-1") # True
thingy("-1\n-1\n-1") # False 
```

或者：

```
def thingy(contents):
    for line in contents.splitlines():
        if line.strip() == "1":
            return True

    return False 
```

# android - 带有 URL 提示的 Android WebView

> ID：11416574
> 
> 赞同：0
> 
> 时间：2012-07-10T15:19:40.880
> 
> 标签：android, url, android-webview, option

我正在尝试构建一个简单的应用程序，该应用程序在首次运行（或清除数据）时会提示用户设置 URL。然后将其保存并将 WebView 定向到该 URL。

我使用静态 URL 创建了应用程序，但无法弄清楚它的设置。

webview 基于此：[https](https://developer.android.com/reference/android/webkit/WebView.html) ://developer.android.com/reference/android/webkit/WebView.html只是进行了一些调整以使其以横向显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:29:32.457

您可以使用 LoadURL 方法转到用户指定的特定方向。为了这

```
webView.loadUrl (String url); 
```

其中，变量是实例化的 webView Class WebView。

例如：

```
WebView webView = (WebView) findViewById (R.id.webview); 
```

# python - 将 Hexa 数组转换为字符串

> ID：11416575
> 
> 赞同：1
> 
> 时间：2012-07-10T15:19:49.210
> 
> 标签：python

我需要转换这个数组

```
data = [
#SHO
0x56, 0x0d, 
#CMD
0x1, 0x00, 0x00, 0x00, 
#ARG
0x1, 0x0,
#SIZE
0x02, 0x00, 0x00, 0x00, 
#OPAQUE
0x01, 0x02,
#RESERVED
0x00, 0x00
] 
```

并产生一个字符串

```
# converted data into s
print s 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T15:27:08.520

你的意思是把它读成字节串吗？

```
print bytearray(data) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T15:21:50.237

```
In [16]: ''.join(str(i) for i in data)
Out[16]: '861310001020001200' 
```

或（可能根据@thg435 的建议）使用`chr()`代替`str()`：

```
In [25]: ''.join(chr(i) for i in data)
Out[25]: 'V\r\x01\x00\x00\x00\x01\x00\x02\x00\x00\x00\x01\x02\x00\x00' 
```

这是你想要的？如果没有，您能否提供所需的输出？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T15:26:56.100

（结合当前的帖子，因为问题不明确。）

以十六进制打印字节：

```
>>> ''.join(('%2s' % hex(d)[2:]).replace(' ', '0') for d in data)
'560d0100000001000200000001020000' 
```

将字节打印为十进制：

```
>>> ''.join(str(i) for i in data)
'861310001020001200' 
```

将字节打印为字符：

```
>>> print bytearray(data)
☺   ☺ ☻   ☺☻ 
```

或等效地：

```
>>> print ''.join(map(chr, data))
☺   ☺ ☻   ☺☻ 
```

# java - 从 JPA 实体生成 CRUD

> ID：11416576
> 
> 赞同：5
> 
> 时间：2012-07-10T15:19:50.427
> 
> 标签：java, spring, user-interface, crud

我有一个使用 spring mvc 开发的 Web 应用程序，并且为了持久性，我使用 JPA（Hibernate 实现），我想为该应用程序添加一个 CRUD GUI。

你知道一些允许我在我的项目中从 JPA 实体生成 CRUD GUI 的框架吗？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-13T21:57:01.547

您应该查看适用于 Java Web 应用程序的[LightAdmin 可插拔管理界面](http://lightadmin.org)。它提供了您正在寻找的内容，并且基于相同的技术堆栈。

您唯一需要做的就是下载 jar 或声明 Maven 依赖项，通过 web.xml 启用域管理（指向包含 JPA 实体的包）并为实体创建 @Administration 配置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T16:11:54.903

您可能想看看[grails](/questions/tagged/grails "显示标记为“grails”的问题")，不幸的是这意味着切换语言和整个堆栈。在 Java 土地上有[spring-roo](/questions/tagged/spring-roo "显示标记为“spring-roo”的问题")。最后查看项目的[spring-data](/questions/tagged/spring-data "显示标记为“弹簧数据”的问题")保护伞，特别是用于快速 DAO 生成[的 spring-data-jpa](/questions/tagged/spring-data-jpa "显示标记为“spring-data-jpa”的问题")和用于生成 REST 接口[的 spring-data-rest 。](/questions/tagged/spring-data-rest "显示标记为“spring-data-rest”的问题")

拥有 REST 接口后，请考虑[使用 jqgrid](/questions/tagged/jqgrid "显示标记为“jqgrid”的问题") JavaScript 库，用于基于 REST AJAX API 的集成列表/分页/完整 CRUD。例如，请参阅[我的文章](http://nurkiewicz.blogspot.no/2011/07/poor-mans-crud-jqgrid-rest-ajax-and.html)和[来源](https://github.com/nurkiewicz/books)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-30T15:46:48.197

Telosys Tools 代码生成器可以帮助您。

它生成带有**CRUD 屏幕的****Spring MVC** Web 应用程序

 **让我们看一下教程：[https ://sites.google.com/site/telosystutorial/](https://sites.google.com/site/telosystutorial/)

网址：[https ://sites.google.com/site/telosystools/](https://sites.google.com/site/telosystools/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T17:48:16.007

您可以尝试 Java 版本的 Play！框架：见[以下链接](http://www.playframework.org/documentation/1.0/guide7)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-10T19:34:03.787

您可以查看**[crud-rest-gen](https://github.com/yanndemel/crud-rest-gen)**项目，该项目解释了如何使用**[crud-maven-plugin](https://github.com/yanndemel/crud-rest-gen/tree/master/crud-maven-plugin)**生成：

*   CRUD 休息 API
*   API 的文档
*   HTML5/AngularJS CRUD 管理 UI
*   如果您使用 Hibernate Envers 审计您的实体，则用于检索审计信息和相关单元测试的 Rest API

您只需提供包含 JPA 实体的数据模型。

基于 Spring PetClinic 数据模型，提供了许多示例。**

# c# - 不接收来自 BeginGetResponse 的回调

> ID：11416579
> 
> 赞同：4
> 
> 时间：2012-07-10T15:19:58.803
> 
> 标签：c#, silverlight

我无法按照示例获取回调。

我有以下代码：

```
 private void startWebRequest(object sender, EventArgs e)
    {
        Uri url = new Uri("http://localhost.com/dummyGet");
        HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(url);
        request.BeginGetResponse(new AsyncCallback(ReadWebRequestCallback), request);
    }

    private void ReadWebRequestCallback(IAsyncResult callbackResult)
    { 
        Console.WriteLine("Don not get here");
        try
        {
            var req = (HttpWebRequest)callbackResult.AsyncState;
            using (var response = req.EndGetResponse(callbackResult))
            {
                Console.WriteLine("Code");
            }
        }
        catch
        {  }
    } 
```

我整天都在努力解决这个问题，我可以在浏览器中看到获取请求，或者在 fiddler/wireshark 中看到客户端。但是代码（ReadWebRequestCallback）没有被调用。

编辑：还要注意，如果我使用 WebClient 和 DownloadStringAsync 它可以工作，但我需要 404 和 200 以外的其他 HTTP 状态代码。：

```
_client.DownloadStringCompleted += new DownloadStringCompletedEventHandler(DownloadStringCompleted);
_client.DownloadStringAsync(_concurrentCheckUrl);
}

private void DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {// Works, gets here} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:28:05.143

我不确定这是否是解决方案，但是在调用回调之前是否已关闭拥有线程？作为silverlight，我对此表示怀疑，但我想我会提出来。

检查[http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.begingetresponse.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.begingetresponse.aspx) - 注意

```
ThreadPool.RegisterWaitForSingleObject (result.AsyncWaitHandle, new WaitOrTimerCallback(TimeoutCallback), myHttpWebRequest, DefaultTimeout, true);

  // The response came in the allowed time. The work processing will happen in the 
  // callback function.
  allDone.WaitOne(); 
```

这可能是您应该通过 Thread.Sleep 尝试的方法。如果这不是问题，为了安全起见，您能否通过添加断点或其他输出语句来确认代码永远不会触发？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T20:00:52.137

非常感谢所有的帮助！

我最终按照[Simplify Async network with Tasks in SL5](http://10rem.net/blog/2011/09/04/simplifying-async-networking-with-tasks-in-silverlight-5) with tasks 中的描述进行了操作。

```
HttpWebRequest _request;

private void doGetRequest()
  _request = WebRequestCreator.ClientHttp.Create(new Uri("http://localhost/getDummy")) as HttpWebRequest;
        var webTask = Task.Factory.FromAsync<WebResponse>
            (_request.BeginGetResponse, _request.EndGetResponse, null)
          .ContinueWith(
            task =>
            {
                var response = (HttpWebResponse)task.Result;
                // The reason I use HttpRequest, not WebRequest, to get statuscode.
                if (response.StatusCode == HttpStatusCode.ServiceUnavailable)
                {
                     //Do Stuff
                }
            }); 
```

但是，我确实认为问题在于我的日志记录在回调中时没有记录，这是我无法理解的。但是在把我的头撞到墙上一天之后，我会把它抛在脑后。但认为我的实际帖子会起作用。

# android - 在不使用 Android 提供的默认虚拟键盘的情况下创建数字键盘

> ID：11416580
> 
> 赞同：0
> 
> 时间：2012-07-10T15:19:58.943
> 
> 标签：android, android-widget

我想自己为我的应用程序创建一个数字键盘以输入价格，我有两个问题：

1）我不知道如何阻止EditText的虚拟垫。谁能帮我？2) 使用带有按钮的 TableRow 是制作数字键盘的最佳解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:35:18.250

1 你可以使用

```
edittext.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            return true;
        }
    }); 
```

并且在该活动文件的清单文件中，使用`android:windowSoftInputMode="stateHidden"`键盘将永远不会打开:)

为 2 是

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:25:04.540

您可以将 EditText 对象的输入模式更改为数字，并且它只会在触摸时显示数字键盘。没有理由创建自己的

# magento - Magento - 获取收集计数的最有效方法

> ID：11416582
> 
> 赞同：11
> 
> 时间：2012-07-10T15:20:00.123
> 
> 标签：magento

我在 Magento 中有一个辅助方法，它要求我计算几个不相关的集合。除此之外，我需要一个类别中每个产品的此信息，即产品列表视图中的每个产品。因此，我可能会在产品列表呈现期间重复创建大量集合。

获取集合计数的最有效方法是什么，也就是说，我不需要模型中的任何数据，只需要有多少模型。

是不是很简单：

```
Mage::getResourceModel('mymodule/mymodel_collection')->addFilter('myattribute', $value)->count() 
```

或者有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-08-08T15:55:43.413

要计算集合中的项目，请使用以下`getSize()`方法：

```
$collection->getSize(); 
```

**永远不要**像这样使用 php`count()`函数或`count()`集合的方法：

```
count($collection)
$collection->count() 
```

当您使用`count()`函数/方法时，Magento 从数据库中加载集合的所有项目。在大型集合中，您将使用大量内存，并且可能会出现诸如`Fatal error: Allowed memory size of 268435456 bytes exhausted (tried to allocate 71 bytes)`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:52:15.640

尝试如下：

```
$collection = Mage::getResourceModel('mymodule/mymodel_collection')->addFieldFilter('myattribute', $value);
$collection->count();
//or
$collection->getSize(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-22T17:29:55.347

这是使用内置 Magento 方法的最有效方法：

```
$ids = Mage::getModel('catalog/product')
                ->getCollection()
                ->addAttributeToSelect('entity_id')
                ->addFieldToFilter('status', array('eq'=>'1'))
                ->addFieldToFilter('visibility', array('eq'=>'4'))
                ->addFieldToFilter('type_id', array('in'=>array('simple')))
                ->getAllIds();
        var_dump(count($ids)); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-08-20T23:08:10.717

```
/**
     * Retrieve collection all items count
     *
     * @return int
     */
    public function getSize()
    {
        $this->load();
        if (is_null($this->_totalRecords)) {
            $this->_totalRecords = count($this->getItems());
        }
        return intval($this->_totalRecords);
    } 
```

所以 getSize() 效率并不高。

* * *

## 回答 #5

> 赞同：-14
> 
> 时间：2012-07-10T17:16:47.637

非常好的问题。从我在源代码中找到的内容来看，这是最快的选项，即使它在 Varien_Data_Collection 中执行以下操作：

```
public function count()
{
    $this->load();
    return count($this->_items);
} 
```

所以它会做它通常的事情并继续加载你指定的任何东西，就像你迭代单个项目一样。这里没有神奇的 SQL `COUNT()`。我发现与计数产品有关的唯一其他方法是`getSelectCountSql()`and `getProductCountSelect()`，但它们只返回 SQL 代码。

*但是：整个 EAV 和 Magento 的查询构建器都非常智能，所以*应该没什么大不了的。另外，我敢打赌 Magento 有各种各样的缓存。

**简而言之：是的，计算产品集合中的产品数量是最快的选择。**

# javascript - 数组中的工具提示/悬停文本

> ID：11416584
> 
> 赞同：1
> 
> 时间：2012-07-10T15:20:13.340
> 
> 标签：javascript, html, css

我正在尝试在列表菜单中显示工具提示或悬停文本，如果用户选择该值，则会提供额外的文本。是否可以 ？由于数据当前存储在硬编码数组中。

```
Code:
<select name="Interests" id="Interests">
 <?php $arr = array('', 'cycling', 'badminton', 'jetskiing', 'ice-skating');
 for($i = 0; $i < count($arr); $i++)
 {
    echo "<option value=\"{$arr[$i]}\" {$selected}>{$arr[$i]}</option>\n"; 
 }
?>
</select> 
```

因此，如果我选择循环，列表菜单上应该会出现文本。好心提醒。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:23:11.447

您尝试做的不是用 PHP 实现的，而是用 Javascript 实现的。PHP 涉及在 DOM 上运行的代码，`server-side`并且不处理 DOM 元素或`client-side`组件，例如您希望加载的悬停文本/工具提示。Javascript 在代码被压缩后由浏览器解析，`server-side`并在立即加载后处理对您的页面的其他更改。

我建议您研究学习（或使用，如果熟悉）`jQuery`，因为它将帮助您完成任务。它是一个带有简化绑定的 Javascript 库，易于使用。有很棒的文档和许多每天都在使用它的插件。

**参考**：http: [//jquery.com/](http://jquery.com/)

享受和好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:34:47.553

这是一个可能的解决方案。它使用 jQuery，因为您不能使用`title`-attribute 并且不能将另一个子元素放入`select`-Container，因此它不是有效的 HTML。

### 见演示：

[http://jsfiddle.net/DLyMG/](http://jsfiddle.net/DLyMG/)

### 这个怎么运作

诀窍是绑定悬停`interests.hover`。第一个功能在您越过`select`-box 时触发，第二个功能在您离开时触发。我`timeout`为此添加了一个：当用户选择某些东西时，他会移出元素（因为列表比元素本身长）。因此，当他选择某些东西时，他也会触发`mouseout`事件，因此我们有`timeout`.

第二件事是绑定`onchange`-event，它在下面完成。当用户选择一个值时，工具提示的内容会发生变化，您可以根据需要添加任何文本或 HTML。

### Javascript

```
<script>

$(document).ready(function () {

    var interests       = $('#Interests');
    var tooltip         = $('#tooltip');
    var tooltipInfo     = $('#tooltip_info');

    interests.hover(
        function() {
            tooltip.fadeIn(200);
        },
        function() {
            setTimeout ( function () {
                tooltip.fadeOut(200); tooltipInfo.html();
            }, 1000);
        }
    );

    interests.bind('change', function() {
        tooltipInfo.html('user has changed the value');
    });

});

</script> 
```

### CSS

```
<style>

aside.tooltip {
    display:        none;
    position:       absolute;
    top:            20px;
    left:           300px;
}

</style> 
```

### HTML

```
<select id="Interests">
    <option value="1">Value 1</option>
    <option value="2">Value 2</option>
    <option value="3">Value 3</option>
</select>

<aside id="tooltip" class="tooltip">
    Hey, I'm a Tooltip.
    <span id="tooltip_info"></span>
</aside> 
```

笔记

这当然需要一些进一步的改进。这只是一个例子。您需要在文档中包含 jQuery 库，例如：

```
<script src="src/js/com.jquery/1.7/jquery-1.7.min.js"></script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T15:51:41.777

您想让内容出现在选择框中的值更改上吗？使用 jQuery change() [http://jsfiddle.net/PxGEc/1/](http://jsfiddle.net/PxGEc/1/)

# c++ - 没有函数模板如何使用 mem_fun_ref？

> ID：11416586
> 
> 赞同：2
> 
> 时间：2012-07-10T15:20:16.997
> 
> 标签：c++

我正在尝试使用 mem_fun_ref 将对对象的成员函数的引用发送到另一个函数，但我得到了`error C2064: term does not evaluate to a function taking 0 arguments.`

我没有在示例中反映这一点，但我需要将 mem_fun_ref_t 发送到一个虚函数，这就是为什么我不只是让 Flip 成为一个接受简单函数对象的函数模板。

```
#include <iostream>
#include <string>
#include <functional>

class Coin
{
public:
    Coin() {}
    std::string Flip ()
    {
        srand(23);
        int side = rand() % 2 + 1;

        std::string result = "";
        if (side == 1)
            result = "heads.";
        else
            result = "tails.";
        return result;
    }
};

std::string Flip(std::mem_fun_ref_t<std::string, Coin> flip)
{
    return flip();
}

int main()
{
    std::cout << "Flipping a coin..." << std::endl;
    std::string output = Flip(std::mem_fun_ref<std::string, Coin>(&Coin::Flip));
    std::cout << "The coin came up " << output << std::endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T16:17:14.403

您应该阅读[静态成员函数](http://www.learncpp.com/cpp-tutorial/812-static-member-functions/)以及[成员函数指针](http://www.parashift.com/c++-faq-lite/pointers-to-members.html)。有三种方法可以解决您的问题。

首先是制作`Coin::Flip`一个静态成员函数：

```
#include <string>
#include <iostream>

typedef std::string (*Flipper)(); // Function pointer typedef

class Coin
{
public:
    Coin() {}

    // Static member function. A pointer to a static member function can be
    // held in a regular function pointer.
    static std::string Flip ()
    {
        srand(23);
        int side = rand() % 2 + 1;
        return (side == 1) ? "heads." : "tails.";
    }
};

std::string Flip(Flipper flipper)
{
    return flipper();
}

int main()
{
    std::cout << "Flipping a coin..." << std::endl;
    std::string output = Flip(&Coin::Flip);
    std::cout << "The coin came up " << output << std::endl;
    return 0;
} 
```

* * *

如果`Coin::Flip`需要是一个非静态成员函数，你可以传递一个`Coin`实例`Flip`，连同成员函数指针：

```
#include <functional>
#include <string>
#include <iostream>

class Coin
{
public:
    Coin() {}

    // Non-static member function.
    std::string Flip ()
    {
        srand(23);
        int side = rand() % 2 + 1;
        return (side == 1) ? "heads." : "tails.";
    }
};

typedef std::mem_fun_ref_t<std::string, Coin> Flipper;

// We need the Coin instance as well as the member function pointer.
std::string Flip(Coin& coin, Flipper flipper)
{
    // Invoke the flipper member function on the coin instance
    return flipper(coin);
}

int main()
{
    // Since we're using a non-static member function, we need an instance
    // of Coin.
    Coin coin;
    std::cout << "Flipping a coin..." << std::endl;
    std::string output = Flip(coin, mem_fun_ref(&Coin::Flip));
    std::cout << "The coin came up " << output << std::endl;
    return 0;
} 
```

* * *

最后，如果`Flipper`函子可以是来自任何类型对象（不仅是 Coin）的成员函数，并且您不希望`Flip`自由函数成为模板，那么您将需要[`std::function`](http://en.cppreference.com/w/cpp/utility/functional/function)并且[`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind)这是最近 C++11 的一部分标准。`std::function`是一个通用的多态函数包装器，适用于任何类型的可调用目标：自由函数、成员函数、函数对象等。如果你不能使用 C++11，Boost 库有等价物[`boost::function`](http://www.boost.org/doc/libs/release/doc/html/function.html)和[`boost::bind`](http://www.boost.org/doc/libs/release/libs/bind/bind.html).

```
#include <functional>
#include <string>
#include <iostream>

class Coin
{
public:
    Coin() {}

    // Non-static member function.
    std::string Flip ()
    {
        srand(23);
        int side = rand() % 2 + 1;
        return (side == 1) ? "heads." : "tails.";
    }

    // Static member function.
    static std::string StaticFlip()
    {
        srand(23);
        int side = rand() % 2 + 1;
        return (side == 1) ? "heads." : "tails.";
    }
};

// Flipper is a generic function object wrapper that works with free functions,
// function objects, static member functions, and non-static member functions.
typedef std::function<std::string ()> Flipper;

std::string Flip(Flipper flipper)
{
    return flipper();
}

int main()
{
    // Example with non-static member function
    Coin coin;

    // Bind a Coin instance along with a Coin::Flip member function pointer.
    Flipper flipper1 = std::bind(&Coin::Flip, &coin);

    std::cout << "Flipping a coin..." << std::endl;
    std::string output = Flip(flipper1);
    std::cout << "The coin came up " << output << std::endl;

    // Example with static member function
    Flipper flipper2 = &Coin::StaticFlip;
    std::cout << "Flipping a coin..." << std::endl;
    output = Flip(flipper2);
    std::cout << "The coin came up " << output << std::endl;

    return 0;
} 
```

# copy - 在同一个数据库 DB2 中创建表的副本

> ID：11416591
> 
> 赞同：36
> 
> 时间：2012-07-10T15:20:27.290
> 
> 标签：copy, db2, aix

有没有一种简单的方法可以将表复制到同一个数据库，当然名称不同。我尝试了下面列出的一些，

`db2 "CREATE TABLE SCHEMA.NEW_TB COPY AS SELECT * FROM SCHEMA.OLD_TB WHERE 1 = 2"`

`db2 "SELECT INTO SCHEMA.NEW_TB FROM SCHEMA.OLD_TB"`

`db2 "SELECT * FROM SCHEMA.OLD_TB INSERT INTO SCHEMA.NEW_TB"`

这些都不起作用我正在使用 db2 v9.5

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-11T06:26:09.810

您必须用括号括住选择部分。

```
CREATE TABLE SCHEMA.NEW_TB AS (
    SELECT *
    FROM SCHEMA.OLD_TB
) WITH NO DATA 
```

应该管用。注意@Gilbert 所说的所有不会被复制的东西。

我在这里假设 DB2 在 Linux/Unix/Windows 上，因为您说的是 DB2 v9.5。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-07-10T15:47:29.050

尝试这个：

```
CREATE TABLE SCHEMA.NEW_TB LIKE SCHEMA.OLD_TB;
INSERT INTO SCHEMA.NEW_TB (SELECT * FROM SCHEMA.OLD_TB); 
```

未复制的选项包括：

*   检查约束
*   列默认值
*   专栏评论
*   外键
*   BLOB 列上的记录和压缩选项
*   不同类型

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-24T10:40:31.020

两个步骤可以正常工作：

将表 bu_x 创建为（从 x 中选择 a、b、c、d）没有数据；

插入 bu_x (a,b,c,d) select select a,b,c,d from x ；

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-10-08T13:08:55.183

```
CREATE TABLE NEW_TABLENAME LIKE OLD_TABLENAME; 
```

适用于 DB2 V 9.7

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-10T13:39:35.840

我们可以将所有列从一个表复制到另一个现有表：

插入表 2 SELECT * FROM 表 1；

或者我们可以只将我们想要的列复制到另一个现有的表中：

INSERT INTO table2 (column_name(s)) SELECT column_name(s) FROM table1;

或从 TABLE1 中选择 * INTO BACKUP_TABLE1

# google-apps-script - 有没有办法在 Google Apps 脚本中的 ui 元素中自动完成？

> ID：11416594
> 
> 赞同：2
> 
> 时间：2012-07-10T15:20:30.567
> 
> 标签：google-apps-script

我想要一个列表框或类似的东西，用户可以在其中开始输入，列表框会根据已经输入的内容缩小选择范围，并在达到唯一选项后自动完成

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T18:30:01.167

尽管可行，但在 HtmlService 中相当容易，而在 UiApp 中则有点困难。这是一个 HtmlService 示例：

**代码文件**

```
function getGroup(group) {
  return GroupsApp.getGroupByEmail(group).getUsers().map(
    function(user){return user.getEmail(); });
}

function doGet() {
  return HtmlService.createHtmlOutputFromFile("ui");
} 
```

**名为“ui”的 HTML 文件**

```
<html>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
  <script>
    function refresh() {
      google.script.run.withSuccessHandler(function(tags) {$( "#tags" ).autocomplete({source: tags});})
        .getGroup(document.getElementById('group').value);
    }
  </script>

  Enter a group name in the first box. The second box will autocomplete
  group members using GroupApp.
  <br>
  <label for="group">Group: </label>
  <input id="group" onchange='refresh()'>
  <div class="ui-widget">
    <label for="tags">Members: </label>
    <input id="tags">
  </div>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T15:57:11.980

有关自动完成的示例，请参阅[http://googleappsdeveloper.blogspot.in/2011/05/autocomplete-email-addresses-in-apps.html](http://googleappsdeveloper.blogspot.in/2011/05/autocomplete-email-addresses-in-apps.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T03:51:55.057

[编辑] HtmlService 更快更高级。UiApp 可以工作，但由于网络原因很慢。

此处的**HtmlService**解决方案[使用 Google 电子表格中的值数组填充 jQuery 自动完成列表](https://stackoverflow.com/questions/17923402/populate-jquery-autocomplete-list-using-value-array-from-google-spreadsheet/17928216#17928216)要好得多。

UiApp版本： [https :](https://sites.google.com/site/scriptsexamples/learn-by-example/uiapp-examples-code-snippets/suggest-box) **//sites.google.com/site/scriptsexamples/learn-by-example/uiapp-examples-code-snippets/suggest-box**

或者我建立的这种方式：

要查看它的实际效果，请在以下位置输入机场名称： [http ://www.treesforlife.org.au/carbon-calculator](http://www.treesforlife.org.au/carbon-calculator)

但这是通过电子表格公式完成的，而不是 google-apps-script。见[http://www.cellmaster.com.au](http://www.cellmaster.com.au)

# java - Java：比较各种随机访问文件方法

> ID：11416595
> 
> 赞同：0
> 
> 时间：2012-07-10T15:20:33.280
> 
> 标签：java, file-io

我有某种以 HTML 格式报告的简单报告应用程序。每个报告都有一个状态（通过/失败），区别在于文本颜色（绿色/红色）。该报告还适用于层次结构，因此一些报告具有“父链接”。当儿子的状态更改为“失败”时，我设法将父链接颜色从“绿色”设置为“红色”，但目前它是通过读取文件、更改 html 中的颜色并重新写入来完成的。假设我可以“知道”颜色偏移，什么会更有效：旧方法还是使用 RandomAccessFile 类？还是你有别的想法？

提前10倍！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T04:41:10.893

过了一会儿，我为此实现了一个自己的测试——比较整个文件写入与随机访问。rando 访问速度比整个文件写入方法快 4 倍。（在同一台机器、同一应用程序上测试，10000 次迭代，每次迭代大约 50 次写入磁盘，结果的最高和最低 10% 下降）

# java - 连续executeUpdate() SQL语句的执行时间

> ID：11416600
> 
> 赞同：7
> 
> 时间：2012-07-10T15:20:58.913
> 
> 标签：java, sql, sql-server, tsql, sql-update

在 SQL 数据库上使用多个连续的 executeUpdate() 方法有多安全？

考虑2个陈述：

```
st.executeUpdate("INSERT table SELECT col1,col2 FROM table WHERE ID=" +var_id);
st.executeUpdate("DELETE FROM table WHERE ID=" +var_id); 
```

他们的行为如何？第二条语句是等待第一条语句的完成，还是我们应该检查返回值（受影响的行数）并根据第二条语句采取相应的行动？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T15:50:29.387

对的调用`executeUpdate`不是异步的，因此在服务器上执行语句之前它不会返回。换句话说：这两个语句将起作用并且它们不会干扰，因为它们一个接一个地执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:39:08.987

我不认为该语句可以作为*单个*实例同时执行多个查询。

第二个语句将等到第一个语句*完成并返回*。
第二个语句只会在第一个语句完成后使用新查询设置。

这也适用于读取 ResultSet 的情况。
文档说：

> > 默认情况下，每个 Statement 对象只能同时打开一个 ResultSet 对象。因此，如果一个 ResultSet 对象的读取与另一个 ResultSet 对象的读取交错，则每个对象都必须由不同的 Statement 对象生成。Statement 接口中的所有执行方法都会隐式关闭语句的当前 ResultSet 对象（如果存在打开的对象）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T15:42:24.590

The answer depends on whether or not you have autocommit turned on for your database.

If you have autocommit turned on, the second statement will wait for the first statement to complete and commit before executing.

If you have autocommit turned off, the second statement will execute after the first statement, but no changes will be applied to the database until a commit.

# web - 更改网址并下载 - 请告知

> ID：11416607
> 
> 赞同：1
> 
> 时间：2012-07-10T15:21:13.703
> 
> 标签：web, download

我是一个完全的新手，所以如果答案已经存在，请原谅 - 因为我没有足够的知识来进行准确的搜索。

我有一个项目，可以从 www.xxxxxx.com/xxDATEFORMAT 等网址访问我想要的 CSV 数据。我想知道我需要学习/做什么才能基本上自动化

更改该网址中的日期并将 csv 下载到文件名为 DATEFORMAT 的文件夹中，然后将所有日期重复该过程回到某个给定日期。

据我所知，这需要一个脚本和某种循环......但我真的不知道更多。我想它至少需要指定 2 个日期，而且它是交易数据，所以它会排除周末，所以我愿意在某个地方输入日期列表。

操作系统是 windows7，但如果可行的话，可以考虑通过 windows 虚拟机使用 linux 发行版。

任何指针都会非常感激，但很少。干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:26:07.180

如果你在 linux 上，你可以在`.sh`脚本中使用这样的东西：

```
DATE_PART=`date +%Y/%m/%d`
mkdir -p "/wheretostore/$DATE_PART"
cd "/wheretostore/$DATE_PART"
wget "http://www.xxxxxx.com/$DATE_PART/myfile.csv" 
```

你可以从[cron](http://en.wikipedia.org/wiki/Cron)调用这个脚本。

# browser - 集成在浏览器上的 emacs 编辑器

> ID：11416613
> 
> 赞同：2
> 
> 时间：2012-07-10T15:21:24.827
> 
> 标签：browser, emacs, editor, wysiwyg

我正在做一些研究，但我找不到教程或者如果可能的话。我可以像任何 java 脚本编辑器或所见即所得一样将 emacs 编辑器放在网上吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T15:24:38.797

[您可以嵌入 JavaScript SSH 客户端并在真机上运行 Emacs，但使用Ymacs](http://www.ymacs.org/)可能会更好——它是一个类似于 Emacs 的编辑器，但它是 Web 原生的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T16:31:02.710

这个 Firefox 扩展允许您使用您选择的外部编辑器编辑文本区域：

[https://addons.mozilla.org/en-US/firefox/addon/its-all-text/](https://addons.mozilla.org/en-US/firefox/addon/its-all-text/)

# c# - JSON.NET - 如果 JSON 数据与所需类型无关，则抛出异常

> ID：11416614
> 
> 赞同：0
> 
> 时间：2012-07-10T15:21:27.940
> 
> 标签：c#, .net, serialization, json.net, deserialization

我正在使用 JSON 网络服务。在任何 JSON 请求上，Web 服务都可以通过错误类型 JSON 或响应类型进行响应。例如：

```
{
    "response": "register",
    "error": {
        "@c" : "error",
        "code": "USER_EXISTS",
        "message": ""
    }
} 
```

或者

```
{
    "response": "register",
    "register": {
        "session": {
            "@c" : "session",
            "userId": "18",
            "sessionId": "ASFT23WETT234QQW"
        }
    }
} 
```

我试图反序列化为类型的任何响应，这与请求有关。例如，当请求为 RegisterRequest 时为 RegisterResponse。

如果响应是错误类型响应，代码

```
JsonConvert.DeserializeObject<RegisterResponse> (jsonResponse); 
```

使用所有空属性值创建了 RegisterResponse。

**如果 JSON 字符串和目标类型不兼容，如何建议 JSON.NET 抛出异常？**

类定义：

```
public class Response
{
    public string response { get; set; }

    public Response ()
    { }
}

public class Session
{
    public long userId;
    public string sessionId;

    public Session ()
    { }
}

public class RegisterResponse: Response
{
    public Session session { get; set; }

    public RegisterResponse ()
    {
        session = new Session();
    }
}

public class Error
{
    public string code;
    public string message;

    public Error ()
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:32:46.623

这不是直接 JSON.NET 的包，因为您给它的转换实际上在语义上是完全有效的，您只是给它提供了错误的数据。最好的办法就是先检查您的数据。创建一个`Error`类并通过

```
JsonConvert.DeserializeObject<Error> (jsonResponse); 
```

然后 test`Error`的属性以确保它们按照您希望的方式为空。

或者，您可以只解码您要查找的单个 Error 属性，看看它是否返回 null。

```
 JObject o = JObject.Parse(jsonResponse);
 string error = (string)o["Error"];
 if(string.IsNullOrEmpty(error) == false)
    // bad things going down
 // if you get here it's all good 
```

# qt - QStandardItem 以一种奇怪的方式插入行

> ID：11416615
> 
> 赞同：0
> 
> 时间：2012-07-10T15:21:28.133
> 
> 标签：qt, qtableview, qstandarditemmodel

我正在创建一个表并像这样在其中插入行。表中只插入了一行，这太有条件了，如果条件不满足，则会显示错误。问题是，当在满足条件的情况下插入一行时，另一行在再次满足条件时插入时不会重新写入该行，而是使用该行的下两列保持前两列为空。

例子

**第一个结果：**

2 你好

**第二个结果：**

```
 3 hello 
```

代码

```
void searchWindow::TextReturn()
{
        int id = (text->text()).toInt();
        map<int,QString>::iterator itt;
        itt = appWindow::dataa.find(id);
        if(itt != appWindow::dataa.end())           //returns 1 if we found something
        {
                m_mode1 = new QStandardItemModel(0,2,this);
                m_mode1->setHorizontalHeaderItem(0, new QStandardItem(QString("ID")));
                m_mode1->setHorizontalHeaderItem(1, new QStandardItem(QString("DATA")));

                m_items << new QStandardItem((QString("%1").arg(id)));
                m_items << new QStandardItem((*itt).second);
                m_mode1->appendRow(m_items);
                m_tablee->update();
                text->setText("");
                m_tablee->setModel(m_mode1);
        }
        else
        {
                m_mode1 = new QStandardItemModel(0,2,this);
                m_mode1->setHorizontalHeaderItem(0, new QStandardItem(QString("SEQUENCE")));
                m_mode1->setHorizontalHeaderItem(1, new QStandardItem(QString("MESSAGE")));

                m_msgBox = new QMessageBox();
                m_msgBox->setWindowTitle("Alert");
                m_msgBox->setText("INVALID  ID  ENTERED");
                m_msgBox->show();
                text->setText("");

                m_tablee->setModel(m_mode1);

        }
} 
```

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:48:36.543

我不知道这是否会解决您的问题，因为在此示例中您有很多模棱两可的成员引用，但是您确定之后每次都清除该 QList m_list 吗？可能你只是每次都在积累更多的项目。

尝试摆脱 QList+addRow 并执行以下操作：

```
m_model->setItem(0,0,item1)
m_model->setItem(0,1,item2) 
```

# winapi - LIFO Win32 消息循环？

> ID：11416616
> 
> 赞同：0
> 
> 时间：2012-07-10T15:21:32.330
> 
> 标签：winapi, stack, message-queue, getmessage

是否有可能巧妙地使用`PostMessage`,`GetMessage`等来排队[LIFO](http://en.wikipedia.org/wiki/LIFO_%28computing%29)消息（假设发送者和接收消息循环都合作），还是我需要推出自己的解决方案？

如果您想知道用例，那就是图标加载。您总是希望首先加载最近请求的图标。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:27:36.080

不，你需要自己动手——windows 消息队列有一个最大大小，如果它满了，从 COM、DDE 到用户交互，各种事情都会出错。

您应该使用受临界区保护的双端队列（或类似的），而不是使用线程队列。

*   [http://msdn.microsoft.com/en-us/library/windows/desktop/ms644944(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644944(v=vs.85).aspx)

    > 每个消息队列有 10,000 条已发布消息的限制。这个限制应该足够大。如果您的应用程序超出限制，则应重新设计它以避免消耗如此多的系统资源。

另请参阅可能出错的示例：

*   [0x80010100：系统调用失败”异常，ContextSwitchDeadlock](https://stackoverflow.com/questions/9376773/0x80010100-system-call-failed-exception-contextswitchdeadlock/9380256#9380256)

# oracle - Oracle 派生列基于表达式结果

> ID：11416617
> 
> 赞同：1
> 
> 时间：2012-07-10T15:21:36.807
> 
> 标签：oracle, plsql, oracle10g

有没有办法根据 10g 中的表达式结果创建派生列？

具体来说，我继承了一个表，其中包含 varchar2 字段中的字符数据和数字数据。显然，在尝试进行连接时，这会让人头疼不已，因为当 Oracle 重新排序我在字段上使用 to_number() 的查询时，我经常遇到“无效号码”错误。所以，我想做的是创建一个派生列，如果原始列的值是数字，则该列具有一个值，如果不是，则在连接中使用它而不是混合类型的字段。

请注意，我试图在查询中执行此操作，而不是在过程/函数中。

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T15:37:30.057

在 Oracle 11g 中，您可以定义[虚拟列](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_3001.htm#CIHCFDDJ)：

```
ALTER TABLE mytable ADD (new_column GENERATED ALWAYS AS (CASE WHEN id ...)); 
```

在 10g 之前，我建议使用视图：

```
CREATE VIEW myview AS SELECT t.*, CASE WHEN ... END id_number FROM mytable; 
```

您甚至可以使用基于函数的索引来索引您的表达式以提高性能（只要您只使用 SQL 标准函数和确定性自定义函数）：

```
CREATE INDEX idx ON mytable (CASE WHEN ...); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T15:37:24.103

10g 中最接近的是基于函数的索引。就像是

```
CREATE OR REPLACE FUNCTION my_to_number( p_str IN VARCHAR2 )
  RETURN NUMBER
  DETERMINISTIC
IS
  l_num NUMBER;
BEGIN
  l_num := to_number( p_str );
  RETURN l_num;
EXCEPTION
  WHEN OTHERS THEN
    RETURN NULL;
END;

CREATE INDEX idx_derived_column
    ON table_name( my_to_number( column_name ) ); 
```

这通常要求在您的查询中创建和引用一个函数，但基于函数的索引会预先计算结果，因此您实际上并没有在运行时调用该函数。如果您真的想避免使用该函数，您也可以在`CASE`语句上创建索引，然后在查询中引用相同`CASE`的语句，但这似乎会使情况复杂化，而不是使其更简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T15:32:25.013

可以使用正则表达式：

```
select * from table where varchar_field not like '%[0-9]%'; 
```

# jquery - 使用 AJAX 更快地创建包含重复数据的庞大列表

> ID：11416620
> 
> 赞同：0
> 
> 时间：2012-07-10T15:21:42.517
> 
> 标签：jquery, ajax, json, list, drilldown

我正在使用[Filamentgroup](http://filamentgroup.com/lab/jquery_ui_selectmenu_an_aria_accessible_plugin_for_styling_a_html_select/)的 jQuery UI Selectmenu从数据库中选择问题。该脚本基本上是一个使用列表和下拉功能的精美钻取菜单。经过几次调整（脚本是测试版）后，它运行得非常好，但是，我使用了很多重复数据，这使得脚本变得缓慢而缓慢。主要原因是我使用的是向下钻取菜单，而我应该使用链式选择菜单。

但如果我不喜欢钻孔菜单，我不会在这里发帖。对于未来的访问者来说，它使该过程非常直观和简单，并且只需要一个选择框而不是多个。

在脚本中，用户“深入研究”了 4 个类别，所有类别都包含多个选项。最后出现一个问题列表。但问题总是一样的。到目前为止，一个用户通过这个列表：

*性别（2个选项）>年龄（3个选项）>教育（3个选项）>类别（6个选项）>问题列表*

但是用户选择男性还是女性、低、中、高等都没有关系。问题保持不变。因为它是一个列表，所以我有一个超过 10.000 行的巨大列表。

理想的情况是，如果特别是最后一个列表的内容，将在它被选中时加载，而不是在页面加载时加载。我读到这样的东西可以用 Json 来完成。我读了一整天，但由于我对 javascript 和 jquery 的了解有限，我一无所获。

有人可以提出我能做什么的建议吗？我知道没有人会为我制作这个脚本，但也许现有的脚本只需要一些调整，对于专家来说很容易实现。或者也许有一个选项可以将某些内容“添加”到列表中，或者也许你们知道一个类似的脚本，其中已经内置了该函数。

该列表内置于 PHP 函数中。我非常了解 PHP，所以如果我可以在那里使用某些东西，那也是一种选择。例如，仅在列表中选择该函数时才加载/执行该函数。

**更新：**

*   [JSfiddle](http://jsfiddle.net/hdxbh/1/)
*   [脚本示例](http://jquery-ui.googlecode.com/svn/branches/labs/selectmenu/index.html)（没有 Ajax）
*   我正在使用的脚本：

    jQuery.ajax({ url: "questions.php", cache: false }).done(function( html ) { jQuery(".result").append(html); });

Questions.php 从 MySQL 数据库加载问题并将它们作为无序列表回显。问题出现在页面上的任何地方，除非我在列表本身应该在的地方使用它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:36:55.087

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

这将是您想要用来根据需要实现列表抓取的方法。我会做的是在某些事件上获取下一个需要的信息，在你的情况下是问题，然后按照你的意愿处理返回的数据。

用户选择下一个菜单 -> Ajax 调用您网站上的 Web 脚本 -> 获取返回的 JSON 字符串 -> 将 JSON 字符串呈现或操作到您的页面上。

# google-apps-script - 如何关闭对话框

> ID：11416624
> 
> 赞同：3
> 
> 时间：2012-07-10T15:21:49.197
> 
> 标签：google-apps-script

我在 UiApp 中创建了一个对话框，使用，

```
 app.createDialogBox(); 
```

我需要在查看详细信息后关闭它并返回主 UI。我在对话框中没有找到任何关闭按钮。

我在文档中看到了一个名为**addCloseHandler()**的函数。

我应该用它来关闭对话框，任何例子还是有其他方法？

对不起，如果我的问题太天真了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:56:36.240

我认为对话框实际上是“显示”和“隐藏”而不是“打开”和“关闭”。按照这个想法，`setVisible(false)`可能会如你所愿。您可能还想看看[setAutoHideEnabled](https://developers.google.com/apps-script/class_dialogbox#setAutoHideEnabled)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T00:15:20.383

After a few tests on this it seem there is an [issue 231](http://code.google.com/p/google-apps-script-issues/issues/detail?id=231&q=dialogbox&colspec=Stars%20Opened%20ID%20Type%20Status%20Summary%20Component%20Owner) and [676 (always classified 'New')](http://code.google.com/p/google-apps-script-issues/issues/detail?id=676&q=popuppanel&colspec=Stars%20Opened%20ID%20Type%20Status%20Summary%20Component%20Owner) concerning this method but it was open in september 2010 and july 2011 respectively and nothing seems to move...

*   [The doc says](https://developers.google.com/apps-script/class_dialogbox) *A form of popup that has a caption area at the top and can be dragged by the user*, but I cannot make it move... has anyone tried it already ?
*   Henrique's suggestion on autoHideEnabled that is [in the documentation](https://developers.google.com/apps-script/class_dialogbox) doesn't seem to be implemented either.

So up to now it seems to be a nice looking panel with a small shadow behind it and very shiny grey caption area that supports HTML... not so bad ;-) but that can just be set (in)Visible. The only major difference with other panels is that its place is kept free even if it's hidden. I used it [in a test app](https://script.google.com/macros/s/AKfycbw-3xYzR_kYDAvYUZ99040rCa8urhsTBjBFuYtxlpuCnzKZ3ss/exec) (use *choose a folder* to close / needs authorization on documents & mails, issue 676 has a simple test code)

# ruby-on-rails - 运行 rake assets:precompile 在没有表时失败（还）

> ID：11416626
> 
> 赞同：4
> 
> 时间：2012-07-10T15:21:58.797
> 
> 标签：ruby-on-rails, ruby, activeadmin, scopes

每当数据库是干净的，没有表时，这经常发生在测试和设置要部署到的新服务器时，许多 rake 任务，如 assets:precompile，都会失败并出现以下错误：

```
rake aborted!
PG::Error: ERROR:  relation "users" does not exist
LINE 4:              WHERE a.attrelid = '"users"'::regclass
                                        ^
:             SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
              FROM pg_attribute a LEFT JOIN pg_attrdef d
                ON a.attrelid = d.adrelid AND a.attnum = d.adnum
             WHERE a.attrelid = '"users"'::regclass
               AND a.attnum > 0 AND NOT a.attisdropped
             ORDER BY a.attnum 
```

任何想法为什么以及如何解决它？

如果我用 trace 运行它，我可以看到错误是从 staffer.rb:103 生成的，其中包含：

```
scope :visible, where(:deleted => false) 
```

如果我将其注释掉，至少 assets:precompile 有效。

似乎整个事情都是由 active_admin 触发的，admin/users.rb 的第一行看起来像：

```
# encoding: UTF-8
# 

ActiveAdmin.register User do
  menu :priority => 2

  filter :id
  filter :rid
  filter :tenant
  filter :type, :as => :check_boxes, :collection => %w{Manager Staffer}
  filter :state, :as => :check_boxes, :collection => Staffer::STATES
  filter :email
  filter :first_name
  filter :last_name 
```

整个错误如下所示：

```
1.9.3-p194@projectx root@b1:/var/nginx/projectx/releases/20120710151049# bundle exec rake RAILS_ENV=staging RAILS_GROUPS=assets assets:precompile --trace
** Invoke assets:precompile (first_time)
** Execute assets:precompile
** Invoke assets:precompile:all (first_time)
** Execute assets:precompile:all
** Invoke assets:precompile:primary (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke environment (first_time)
** Execute environment
Resolved collector.newrelic.com to 204.93.223.153
rake aborted!
PG::Error: ERROR:  relation "users" does not exist
LINE 4:              WHERE a.attrelid = '"users"'::regclass
                                        ^
:             SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
              FROM pg_attribute a LEFT JOIN pg_attrdef d
                ON a.attrelid = d.adrelid AND a.attnum = d.adnum
             WHERE a.attrelid = '"users"'::regclass
               AND a.attnum > 0 AND NOT a.attisdropped
             ORDER BY a.attnum
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:1151:in `async_exec'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:1151:in `exec_no_cache'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:664:in `block in exec_query'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract_adapter.rb:280:in `block in log'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract_adapter.rb:275:in `log'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:663:in `exec_query'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:1276:in `column_definitions'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/postgresql_adapter.rb:859:in `columns'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/connection_adapters/schema_cache.rb:12:in `block in initialize'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/model_schema.rb:228:in `yield'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/model_schema.rb:228:in `default'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/model_schema.rb:228:in `columns'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/model_schema.rb:237:in `columns_hash'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/inheritance.rb:19:in `descends_from_active_record?'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/inheritance.rb:25:in `finder_needs_type_condition?'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/base.rb:455:in `relation'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/scoping/named.rb:37:in `scoped'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.6/lib/active_record/querying.rb:9:in `where'
/var/nginx/projectx/releases/20120710151049/app/models/staffer.rb:103:in `<class:Staffer>'
/var/nginx/projectx/releases/20120710151049/app/models/staffer.rb:6:in `<top (required)>'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `block in require'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:236:in `load_dependency'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:359:in `require_or_load'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:502:in `load_missing_constant'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:192:in `block in const_missing'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:190:in `each'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:190:in `const_missing'
/var/nginx/projectx/releases/20120710151049/app/admin/users.rb:11:in `block in <top (required)>'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activeadmin-0.4.4/lib/active_admin/dsl.rb:13:in `instance_eval'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activeadmin-0.4.4/lib/active_admin/dsl.rb:13:in `run_registration_block'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activeadmin-0.4.4/lib/active_admin/namespace.rb:178:in `parse_registration_block'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activeadmin-0.4.4/lib/active_admin/namespace.rb:54:in `register'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activeadmin-0.4.4/lib/active_admin/application.rb:99:in `register'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activeadmin-0.4.4/lib/active_admin.rb:74:in `register'
/var/nginx/projectx/releases/20120710151049/app/admin/users.rb:4:in `<top (required)>'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:245:in `load'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:245:in `block in load'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:236:in `load_dependency'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:245:in `load'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activeadmin-0.4.4/lib/active_admin/application.rb:161:in `block in load!'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activeadmin-0.4.4/lib/active_admin/application.rb:161:in `each'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activeadmin-0.4.4/lib/active_admin/application.rb:161:in `load!'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activeadmin-0.4.4/lib/active_admin/application.rb:187:in `routes'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activeadmin-0.4.4/lib/active_admin.rb:78:in `routes'
/var/nginx/projectx/releases/20120710151049/config/routes.rb:114:in `block (2 levels) in <top (required)>'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/routing/mapper.rb:749:in `block in constraints'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/routing/mapper.rb:624:in `scope'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/routing/mapper.rb:749:in `constraints'
/var/nginx/projectx/releases/20120710151049/config/routes.rb:113:in `block in <top (required)>'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/routing/route_set.rb:282:in `instance_exec'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/routing/route_set.rb:282:in `eval_block'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/routing/route_set.rb:260:in `draw'
/var/nginx/projectx/releases/20120710151049/config/routes.rb:3:in `<top (required)>'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:245:in `load'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:245:in `block in load'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:236:in `load_dependency'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:245:in `load'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/application/routes_reloader.rb:40:in `each'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/application/routes_reloader.rb:40:in `load_paths'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/application/routes_reloader.rb:16:in `reload!'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:108:in `reload_routes!'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activeadmin-0.4.4/lib/active_admin/reloader.rb:34:in `reload!'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activeadmin-0.4.4/lib/active_admin/reloader.rb:61:in `block in attach!'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:429:in `_run__4352394538915700711__prepare__777820976777011506__callbacks'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:405:in `__run_callback'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:385:in `_run_prepare_callbacks'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/callbacks.rb:81:in `run_callbacks'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/reloader.rb:74:in `prepare!'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/reloader.rb:48:in `prepare!'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/application/finisher.rb:47:in `block in <module:Finisher>'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `instance_exec'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `run'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:55:in `block in run_initializers'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `each'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `run_initializers'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:136:in `initialize!'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/railtie/configurable.rb:30:in `method_missing'
/var/nginx/projectx/releases/20120710151049/config/environment.rb:5:in `<top (required)>'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `block in require'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:236:in `load_dependency'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in `require'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:103:in `require_environment!'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:292:in `block (2 levels) in initialize_tasks'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/sprockets/assets.rake:93:in `block (2 levels) in <top (required)>'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:176:in `block in invoke_prerequisites'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `each'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `invoke_prerequisites'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:157:in `block in invoke_with_call_chain'
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/sprockets/assets.rake:60:in `block (3 levels) in <top (required)>'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/sprockets/assets.rake:23:in `invoke_or_reboot_rake_task'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/sprockets/assets.rake:29:in `block (2 levels) in <top (required)>'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/bin/rake:23:in `load'
/var/nginx/projectx/shared/bundle/ruby/1.9.1/bin/rake:23:in `<main>'
Tasks: TOP => environment 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:59:32.683

使用`scope`with`where`子句将导致 ActiveRecord 尝试加载表的列和其他信息，以便它可以预先构建 ActiveRelation。一个简单的解决方案是将`where`部分包装在 a`Proc`或（我最喜欢的）不使用范围并改用类方法。这做同样的事情，随着你的范围变得更复杂，你会发现它比使用`scope`.

```
def self.visible
  where(:deleted => false)
end 
```

# ruby - 如何将 $ie 用于不同的页面级别 ($ie1...)

> ID：11416632
> 
> 赞同：0
> 
> 时间：2012-07-10T15:22:23.977
> 
> 标签：ruby, class, watir

我有一个检查页面标题是否存在的类。我需要执行几次。在每种情况下，我都在不同级别的 ie 中操作 - ie1、ie2。在我的代码中，我检查了 $ie，如何将其概括为 $ie1 等等？

```
class Text_neg
def initialize(text, object)
@text=text
@object=object
if $ie.contains_text(@text)
puts("Test for " + @object + " failed")
puts ($ie.link(:text => /Exception:/))
h= $ie.link(:text => /Exception:/)
$r.addtoReport($testReport, "check " + @object, "FAILED", h.text) 
else
puts("Test for " + @object + " passed")
$r.addtoReport($testReport, "check " + @object, "PASSED", "Test for " + @object + "    passed" )
end
end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:36:36.053

初始化 Text_neg 类时，应传入要使用的 ie 对象。然后 Text_neg 可以将它存储在它知道的变量中，并且不必为每个 ie 对象递增。

它看起来像：

```
class Text_neg
  def initialize(text, object, ie)
    @text=text
    @object=object
    @ie=ie

    if @ie.contains_text(@text)
      puts("Test for " + @object + " failed")
      puts (@ie.link(:text => /Exception:/))
      h= @ie.link(:text => /Exception:/)
      $r.addtoReport($testReport, "check " + @object, "FAILED", h.text) 
    else
      puts("Test for " + @object + " passed")
      $r.addtoReport($testReport, "check " + @object, "PASSED", "Test for " + @object + "    passed" )
    end
  end
end 
```

然后为每个 IE 对象运行它，你会这样做：

```
Text_neg(text, object, $ie1)
Text_neg(text, object, $ie2)
etc 
```

# c# - 在 C# 中访问 Outlook 2010 邮件文件夹

> ID：11416633
> 
> 赞同：5
> 
> 时间：2012-07-10T15:22:30.520
> 
> 标签：c#, outlook, add-in

我正在开发一个 Outlook 加载项，最近为了熟悉而改用 C#（我本质上是一个 Java 人）。此时，我只是尝试遍历邮件文件夹并将每条消息的主题打印到控制台，主要是为了确保到目前为止一切正常。但是，每当我运行它时，都会收到以下错误：

> *无法完成操作。一个或多个参数值无效。*

### 异常文本：

> System.ArgumentException：无法完成操作。一个或多个参数值无效。在 Microsoft.Office.Interop.Outlook.NameSpaceClass.GetFolderFromID(String EntryIDFolder, Object EntryIDStore) 在 OutlookAddIn2.ThisAddIn.ThisAddIn_Startup(Object sender, EventArgs e) 在 Microsoft.Office.Tools.AddInImpl.OnStartup() 在 Microsoft.Office.Tools .AddInImpl.AddInExtensionImpl.Microsoft.Office.Tools.EntryPoint.OnStartup() 在 Microsoft.Office.Tools.AddInBase.OnStartup() 在 OutlookAddIn2.ThisAddIn.FinishInitialization() 在 Microsoft.Office.Tools.AddInBase.Microsoft.Office.Tools .EntryPoint.FinishInitialization() 在 Microsoft.VisualStudio.Tools.Office.Runtime.DomainCreator.ExecuteCustomization.ExecutePhase(ExecutionPhases executionPhases) 在 Microsoft.VisualStudio.Tools.Office.Runtime。

### 加载程序集：

我对此感到有些困惑，因为这是微软在 MSDN 上推荐的让用户选择文件夹的精确方法。我已经包含了我的来源，如果您有任何想法，请告诉我。感谢您花时间阅读这篇文章，并愿意提供帮助！

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml.Linq;
using Outlook = Microsoft.Office.Interop.Outlook;
using Office = Microsoft.Office.Core;

namespace OutlookAddIn2
{
    public partial class ThisAddIn
    {
        private void ThisAddIn_Startup(object sender, System.EventArgs e)
        {
            //Get application namespace and grab the original folder object
            Outlook.Folder pickFolder = (Outlook.Folder)Application.Session.PickFolder();

            //Outlook.Folder mrFolder = Application.Session.GetFolderFromID(pickFolder.EntryID, pickFolder.StoreID) as Outlook.Folder;

            foreach (Outlook.MailItem oMailItem in pickFolder.Items)
            {
                Console.WriteLine(oMailItem.Subject);
            }
        }

        private void ThisAddIn_Shutdown(object sender, System.EventArgs e)
        {
        }

        #region VSTO generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InternalStartup()
        {
            this.Startup += new System.EventHandler(ThisAddIn_Startup);
            this.Shutdown += new System.EventHandler(ThisAddIn_Shutdown);
        }

        #endregion
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:49:57.277

托盘这个：

```
 public static Folder FOLDER_1;
 public static Folder FOLDER_2;
 public static Folder FOLDER_N;

/// <summary>
        /// Hilo que lee el archivo de datos PST del OUTLOOK
       private static void readPst()
        {
            try
            {
                Application app = new Application();
                NameSpace outlookNs = app.GetNamespace("MAPI");
                MAPIFolder mf = outlookNs.GetDefaultFolder(OlDefaultFolders.olFolderTasks);

                string names = mf.FolderPath.Split('\\')[2];

                Folder fMails = getFolder(fCarpetasPersonales.Folders, "Inbox");

                FOLDER_1= getFolder(fMails.Folders, "FOLDER_1");
                FOLDER_2= getFolder(fMails.Folders, "FOLDER_2");
                FOLDER_N= getFolder(fMails.Folders, "FOLDER_n");

//TO DO... For example:  foreach (object item in fMails.Items)

     private static Folder getFolder(Folders folders, string folder)
        {
            foreach (object item in folders)
            {
                if (item is Folder)
                {
                    Folder f = (Folder)item;
                    if (f.Name.Equals(folder))
                    {
                        return f;
                    }
                }
            }
            return null;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:14:34.857

正如@SilverNinja 指出的那样，尚不清楚您是否在调试器中单步执行了代码。确保 StoreID 和 EntryID 有效很重要。

还有几种可能：

您的 Outlook PST 略有损坏。试试scanPST，看看是否有帮助。

此外，您会认为 pickFolder 枚举足够聪明，可以跳过这些，但是除了文件夹之外，您在文件夹树的顶层还有其他项目吗？实际上，我在枚举联系人和在我的联系人文件夹中有非联系人项目时遇到了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T15:36:33.127

您应该调试或添加跟踪语句以查看 和 的`pickFolder.EntryID`值`pickFolder.StoreID`。没有有效的`EntryID`否则`StoreID`会抛出这个错误。

```
Trace.TraceInformation("EntryID: {0}\tStoreID: {1}", pickFolder.EntryID, pickFolder.StoreID); 
```

**如果用户单击取消**按钮，您应该检查是否`pickFolder`为 null 。

 **此外，如果您让用户选择一个文件夹，则无需再次选择该文件夹`GetFolderFromID`- 您已经有了对它的引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T15:36:50.093

你可以试试这个，当然，如果你想要收件箱文件夹：

```
Outlook.Application app = new Outlook.Application();

Outlook.NameSpace ns = app.GetNamespace("MAPI");

Outlook.Folder folder = app.Session.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderInbox) as Outlook.Folder; 
```**

# symfony - Symfony2：奏鸣曲管理包。什么是持久化服务？

> ID：11416637
> 
> 赞同：0
> 
> 时间：2012-07-10T15:22:35.137
> 
> 标签：symfony, admin, symfony-sonata, sonata-admin

我正在绝望地尝试制作 Admin Bundle 好几天了，我被困在某个时刻。我决定从头开始。

我已经正确安装了所有供应商，现在，我已经可以通过访问以下网址访问管理仪表板：[http://yoursite.local/admin/dashboard](http://yoursite.local/admin/dashboard)。（那里没什么有趣的，只有标题。）

所以在[第 2.2 步](http://sonata-project.org/bundles/admin/2-0/doc/reference/getting_started.html#)，他们希望我设置持久性服务（ORM、ODM、...），我不知道它是用来做什么的，上次，因为他们说“SonataAdminBundle 不强制执行持久性服务（服务用于处理和控制你的模型）”我已经跳过了这一步......但也许我不应该这样做......

谁能告诉我它是做什么用的吗？我应该使用它，为什么以及为什么？也许这就是我不能让它工作的原因。

谢谢你 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T01:08:17.807

你遗漏了那句话的重要部分......

> SonataAdminBundle 不会强加持久性服务（用于处理和控制模型的服务），**但是您的应用程序很可能会使用一些持久性服务（例如用于数据库和文档存储的 ORM 或 ODM）** ...

他们并不是说您不应该使用持久性服务，而是说选择*哪种*持久性服务取决于您（如果您的应用程序需要它，并且如果您的应用程序使用数据库，那么可以肯定地说它将需要它）。

> ...因此，您可以使用 Sonata Project 的管理包正式支持的以下包：
> - SonataDoctrineORMAdminBundle
> - SonataDoctrineMongoDBAdminBundle
> - SonataDoctrinePhpcrAdminBundle

我没有使用 Sonata Admin 包，但听起来你绝对不应该跳过这一步 :-)

# asp.net-mvc-3 - MVC3：我们应该为一个小的变化创建一个新的视图，还是在控制器中放置逻辑？

> ID：11416641
> 
> 赞同：2
> 
> 时间：2012-07-10T15:22:38.130
> 
> 标签：asp.net-mvc-3

我正在使用需要多次登录的 MVC3 构建应用程序。第一个是标准形式的身份验证。另一个是管理部分的障碍，过期会话有第三个登录。

我想尽可能多地重用代码，但每个页面都有一些细微的变化。例如，在过期会话上，我们希望将用户名从可编辑的文本框中更改为仅显示过期会话的用户名。我们还想更改一些文本，例如标题为“会话已过期”。

最佳做法是什么？

想法1：我是否应该通过向控制器添加一些参数字符串和布尔标志来重新使用视图，这些参数将设置标题以及是否可以编辑？这也将允许我重用控制器。

想法 2：每个都有一个单独的控制器/视图。由于这些页面彼此相似，但与应用程序的其余部分不同，我将创建一个新的布局模板，然后将每个视图分开。

提前谢谢你们，你们太棒了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:33:06.780

例如在过期会话中

使用相同的控制器并依赖于会话状态，构建正确的模型并返回特定的局部视图

```
public ActionResult sessionInfo() {

       if (sessionIsAlive){

          //build the model for the current user 
          return PartialView("logged", model);
       }

         //build the model for the session expired 
        return PartialView("expired", model);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:27:15.220

我认为这是个人喜好以及您想让代码变得多么复杂。

就个人而言，我看到这种情况发生最多的方式是在模型中设置一个带有某种可编辑标志的视图，该标志从控制器传递给视图（但是你通过视图或部分视图呈现它）。

！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T15:33:25.843

在我看来，必须直接为模型做决定，如果模型发生变化，在每个窗口上遵循标准我会尝试为每个模型做我的观点强类型。现在关于动作，在这里我将尝试调用相同的动作，然后根据收到的模型做出决策。

# javascript - JavaScript Popup Chrome“另存为”已停用？为什么？

> ID：11416646
> 
> 赞同：6
> 
> 时间：2012-07-10T15:22:58.367
> 
> 标签：javascript, google-chrome, popup, window.open

我正在用 Javascript 打开一个弹出窗口：

```
function popup(title,w,h,site) {
    x = screen.availWidth/2-w/2;
    y = screen.availHeight/2-h/2;

    var date = new Date()
    var ticks = date.getTime();

    var popupWindow = window.open(
        title,"popup"+ticks,'width='+w+',height='+h+',left='+x+',top='+y+',screenX='+x+',screenY='+y+',resizable=yes,scrollbars=yes,menubar=yes,toolbar=yes,titlebar=yes,hotkeys=yes,status=yes,dependent=no,location=1');
    popupWindow.document.write(site);
    return popupWindow;
  } 
```

当我右键单击新窗口时，“另存为”对话框在 chrome 中被停用。

我该如何启用它？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-10T15:29:39.840

属性`status`应该`1`不是`yes`。这应该是阻止 Chrome 将弹出窗口视为新窗口的原因。

此外，`open()`按以下顺序获取参数：

```
window.open(URL,name,specs,replace) 
```

所以试试：

```
window.open("about:blank", title, 'width='+w+',height='+h+',left='+x+',top='+y+',screenX='+x+',screenY='+y+'resizable=yes,scrollbars=yes,menubar=yes,toolbar=yes,titlebar=yes,hotkeys=yes,status=yes,dependent=no,location=1') 
```

# statistics - 计算预测值的准确性

> ID：11416647
> 
> 赞同：1
> 
> 时间：2012-07-10T15:23:04.617
> 
> 标签：statistics, neural-network, classification, prediction

我有一个基于多层神经网络的估计器，它输入车辆过去的到达时间并估计下一辆车的到达时间（使用反向传播算法）。基于某个阈值（例如，10 秒），估计器将预测时间分类为高或低（1 或 0）。我的问题是，根据观察和预测/估计的到达时间（1 和 0），我如何计算整体预测的准确性（或正确的预测率）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:16:49.623

您必须自己定义`high (1)`和的含义`low (0)`。例如，您可以说`high`到达时间等于或大于 5 分钟，而`low`到达时间小于 5 分钟。一旦你的神经网络给出了预测，那么你就可以在你的样本中检查下一辆车的到达时间是否确实是`high`或`low`（即分别超过 5 分钟或不到 5 分钟）。您可以使用它来计算预测的准确性。

# android - 某些对象不保存到 Android 内部存储器

> ID：11416650
> 
> 赞同：1
> 
> 时间：2012-07-10T15:23:13.383
> 
> 标签：android, object, save

我正在使用以下代码在 Android 内部存储器中保存和检索对象。我已经成功地使用字符串对象对其进行了测试。当我尝试保存位图时，我得到一个 IOException。（我发现我必须调用compress方法）所以我注意到我可以保存一些对象，保存对象有什么限制？

当我保存一个对象时，它是否只保存字段？我可以保存包含其他对象的对象吗？请把我清理干净。

代码：

```
 public Object readObjectFromMemory(String filename) {
        Object defautObject = null;
        FileInputStream fis;
        try {
            fis = game.openFileInput(filename);
            ObjectInputStream is = new ObjectInputStream(fis);
            defautObject = is.readObject();
            is.close();
            this.gameEngineLog.d(classTAG, "Object successfully read: " + filename);
        } 
        catch (FileNotFoundException e) {
            e.printStackTrace();
            this.gameEngineLog.d(classTAG, "FileNotFoundException");
            this.gameEngineLog.d(classTAG, "Object couldn't be opened: " + filename);

        } 
        catch (StreamCorruptedException e) {
            e.printStackTrace();
            this.gameEngineLog.d(classTAG, "StreamCorruptedException");
            this.gameEngineLog.d(classTAG, "Object couldn't be opened: " + filename);

        } 
        catch (IOException e) {
            e.printStackTrace();
            this.gameEngineLog.d(classTAG, "IOException");
            this.gameEngineLog.d(classTAG, "Object couldn't be opened: " + filename);

        } 
        catch (ClassNotFoundException e) {
            e.printStackTrace();
            this.gameEngineLog.d(classTAG, "ClassNotFoundException");
            this.gameEngineLog.d(classTAG, "Object couldn't be opened: " + filename);

        }

        return defautObject;

    }

public void writeObjectToMemory(String filename, Object object) {
        FileOutputStream fos;
        try {
            fos = game.openFileOutput(filename, Context.MODE_PRIVATE);
            ObjectOutputStream os = new ObjectOutputStream(fos);
            os.writeObject(object);
            os.close();
            this.gameEngineLog.d(classTAG, "Object successfully written: " + filename);
        } 
        catch (FileNotFoundException e) {
            e.printStackTrace();
            this.gameEngineLog.d(classTAG, "Object couldn't be written: " + filename);

        } 
        catch (IOException e) {
            e.printStackTrace();
            this.gameEngineLog.d(classTAG, "Object couldn't be written: " + filename);

        }

    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:27:21.890

限制是所有对象都必须是可序列化的（实现接口 Serializable）。如果对象的对象数据成员不可序列化，则必须将其标记为瞬态：

```
private transient SomeClass notSerializable; 
```

关于序列化不可序列化成员的编辑

这取决于您尝试序列化的不可序列化的内容。由于这是一个用 Android 标记的问题，因此它可能是一个 Context 对象。

上下文不可序列化是有充分理由的，它们与应用程序或活动的生命周期相关联。它的状态是不稳定的，即使你以后可以序列化和反序列化它，它的内部状态也没有意义，因为已经建立了一个新的上下文，一个新的线程甚至不同的进程现在可能正在运行。

对于像 Contexts 这样的数据成员，您需要将它们声明为瞬态并将新鲜且有效的当前 Context 重新分配给反序列化对象。

如果您尝试序列化不同类型的对象，这些对象一方面仅表示数据，如一堆字符串和/或数字，但另一方面不可序列化，您有两种选择：

*   如果这些是您的类，那么只需向它们添加 Serializable 接口
*   或者您可以在具有不可序列化数据成员的类中自定义序列化过程

自定义可以通过实现方法来完成

```
private void writeObject(ObjectOutputStream out) throws IOException;
private void readObject(ObjectInputStream in) throws IOException, ClassNotFoundException; 
```

这些方法在类的序列化/反序列化时调用。诀窍是获取不可序列化对象的数据/状态并将该数据打包到可序列化对象中。例如，您可以使用任何 Collection 对象（如 ArrayList）来顺序存储原始数据。

假设您要序列化 ​​Location 对象（用于地理位置坐标），并且还假设该对象不可序列化。但是您知道它由三个可以序列化的值组成：

*   双经度
*   双纬度
*   双高度
*   （以及其他人，如提供者、速度、时间......）

您可以将这三个值存储在 ArrayList 中，或者您可以创建自己的自定义、可序列化的类来存储这些值以用于序列化目的。将 ArrayList 或可序列化的中间对象放入自定义 writeObject 方法的 ObjectOutputStream 中。

在 readObject 中，您需要反转这些步骤并根据您序列化的原始数据重建不可序列化的数据成员。

我还建议阅读 Sun[关于序列化的文档](http://java.sun.com/developer/technicalArticles/Programming/serialization/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:29:53.037

是的，您可以将所有类型的数据保存在一个对象中，您只需要确保您在对象中定义了所有变量：

```
public class YourObject{
int yourInteger;
String yourString;
Bitmap yourBitmap;
float yourFloat;
...
} 
```

您还需要确保使用 set 方法设置这些对象的字段：

```
public class YourObject{
int yourInteger;
String yourString;
Bitmap yourBitmap;
float yourFloat;
...
//sets the value of yourInt
public void setYourInteger(int yourInt){
 this.yourInt = yourInt; 
```

}

```
} 
```

如果您没有明确设置字段，您将无法保存它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T15:30:53.643

来自 Oracle 的 Javadoc：

> ObjectOutputStream 将 Java 对象的原始数据类型和图形写入底层 OutputStream。然后可以使用 ObjectInputStream 读取（重构）对象和其他数据。对象的持久存储可以通过使用流的文件来实现。如果流是网络套接字流，则可以在另一个主机或另一个进程中重构对象。
> 
> 只有支持 java.io.Serializable 或 java.io.Externalizable 接口的对象才能序列化为输出流。每个可序列化对象的类都被编码，包括类的类名和签名，对象的非静态和非瞬态字段和数组的值，包括对象引用的任何其他对象（除了那些没有实现java.io.Serializable 接口本身）。对同一对象的多个引用使用引用共享机制进行编码，以便可以适当地恢复对象的图形。
> 
> 对象的默认序列化机制写入对象的类、类签名以及所有非瞬态和非静态字段的值。对其他对象的引用（瞬态或静态字段除外）也会导致这些对象被写入。

# ruby-on-rails - jruby on rails 与 tomcat 部署战争文件

> ID：11416654
> 
> 赞同：0
> 
> 时间：2012-07-10T15:23:26.917
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jruby, jrubyonrails

我正在使用带有rails的jruby，并想在tomcat7中部署一个小应用程序。我使用了莺 gem 来创建战争文件。应用程序是 relConnections，创建的 war 文件是 relConnections.war。我启动了运行startup.bat 文件的tomcat 服务器。

让我知道要遵循的步骤，以便我可以打开

```
htpp://localhost:8080/rconnections/modify 
```

`modify`是我的视图，`rconnections`是我的控制器，它位于`relConnections`文件夹和`relConnections.war`文件中。

我已经尝试将war文件复制到tomcat的webapps文件夹中。我无法理解发生了什么。我无法打开我的应用程序。网络中的任何类型的链接也会有所帮助。谢谢

# objective-c - 从核心数据中检索 NSDate 时的时区问题

> ID：11416659
> 
> 赞同：0
> 
> 时间：2012-07-10T15:23:36.460
> 
> 标签：objective-c, ios, ios5, nsdate, nsdatecomponents

我正在使用这种方法将月份和年份转换为等于给定年份月份的最后一天的日期。

```
+ (NSDate*)endOfMonthDateForMonth:(int)month year:(int)year
{
    NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSDateComponents *comps = [[NSDateComponents alloc] init];
    comps.year = year;
    comps.month = month;

    NSDate *monthYearDate = [calendar dateFromComponents:comps];

    // daysRange.length will contain the number of the last day of the endMonth:
    NSRange daysRange = [calendar rangeOfUnit:NSDayCalendarUnit inUnit:NSMonthCalendarUnit forDate:monthYearDate];
    comps.day = daysRange.length;
    comps.hour = 0;
    comps.minute = 0;
    comps.second = 0;
    [comps setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
    [calendar setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
    [calendar setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"]];
    NSDate *endDate = [calendar dateFromComponents:comps];
    return endDate;
} 
```

我希望日期的时间分量为 00:00:00，这就是为什么我将时区设置为 GMT 0 并将分钟、小时和秒的日期分量设置为 0。从该方法返回的日期是正确的并且具有从 00:00:00 开始的时间分量。

这就是我将日期保存到 Core Data 的方式：

```
NSDate *endDate = [IBEstPeriod endOfMonthDateForMonth:endMonth year:endCalYear];
[annualPeriod setEndDate:endDate]; 
```

在检索数据并将其 NSLogging 到调试器控制台后，我得到的日期类似于`2008-12-30 23:00:00 +0000`时间组件！= 0。

为什么现在组件发生了变化？它不应该停留在 00:00:00 吗？

我在这里写错了什么？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T16:07:17.473

您只需要在创建日历后设置日历时区。

将此添加为函数的第二行：

```
calendar.timeZone = [NSTimeZone timeZoneWithName:@"UTC"]; 
```

但是，更简单的方法是：

```
- (NSDate*)endOfMonthDateForMonth:(int)month year:(int)year
{
    NSCalendar *calendar    = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    calendar.timeZone       = [NSTimeZone timeZoneWithName:@"UTC"];

    NSDateComponents *comps = [[NSDateComponents alloc] init];
    comps.year              = year;
    comps.month             = month+1;
    comps.day               = 0;

    NSDate *monthYearDate   = [calendar dateFromComponents:comps];
    return monthYearDate;
} 
```

结果：

```
NSLog(@"%@",[self endOfMonthDateForMonth:12 year:2010]);
// Output: 2012-07-10 12:30:05.999 Testing App[16310:fb03] 2010-12-31 00:00:00 +0000 
```

这通过将日期设置为下个月的“第 0”天来工作，这与本月的最后一天相同。（这与从下个月的第一天减去一天的作用相同。）请注意，这是因为允许comps“溢出”（或在本例中为“underflow”）并`dateFromComponents:`自动进行数学运算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:37:12.497

有两件事要看：

1.  `comps`在设置时间组件之前尝试设置时区。我还没有测试过，但是当你设置时区时，NSDateComponents 可能会调整小时以保持相对于 GMT 的相同时间。

2.  看看当您从 Core Data 存储中读回日期时，您是如何解释日期的。

# php - YII 高级搜索页面

> ID：11416663
> 
> 赞同：0
> 
> 时间：2012-07-10T15:23:43.553
> 
> 标签：php, yii

我有高级搜索页面，其中所有字段都声明为搜索变量。我持有会话中的所有变量。

我只想知道单击提交视图页面字段将保存到会话变量中。因此，在使用会话变量进行网格分页和排序时，它将加载数据。

但是我想通过单击高级搜索页面的链接来清除会话？怎么做？

## 控制器.php

```
public function actionAdvance_search()
    {
        $modelAdvSearchFinder = new AdvSearchFinder;
        print_r($_GET);
        if(isset($_POST) && isset($_POST['AdvSearchFinder']['submit']))
        {
            $this->clearAdvSearchSessionVar();

            Yii::app()->session['id'] = ( $_POST['AdvSearchFinder']['id'])? Yii::app()->session['id'] = $_POST['AdvSearchFinder']['id']:"";
            Yii::app()->session['name'] = ( $_POST['AdvSearchFinder']['name'])? Yii::app()->session['name'] = $_POST['AdvSearchFinder']['name']:"";
            Yii::app()->session['age'] = ( $_POST['AdvSearchFinder']['age'])?Yii::app()->session['age'] = $_POST['AdvSearchFinder']['age']:"";
            Yii::app()->session['class'] = ( $_POST['AdvSearchFinder']['class'])? Yii::app()->session['class'] = $_POST['AdvSearchFinder']['class']:"";
            Yii::app()->session['section'] = ( $_POST['AdvSearchFinder']['section'])? Yii::app()->session['section'] = $_POST['AdvSearchFinder']['section']:"";
            Yii::app()->session['Email'] = ( $_POST['AdvSearchFinder']['Email'])? Yii::app()->session['Email'] = $_POST['AdvSearchFinder']['Email']:"";
            $modelAdvSearchFinder->attributes = $_POST['AdvSearchFinder'];

        }
        $id = Yii::app()->session['id'];
        $name = Yii::app()->session['name'];       
        $age = Yii::app()->session['age'];
        $class = Yii::app()->session['class'];  
        $section = Yii::app()->session['section'];  
        $Email = Yii::app()->session['Email'];    

        $criteria=new CDbCriteria(array('distinct'=>true,));          
        $criteria->compare('id',$id,true);
        $criteria->compare('name',$name,true);
        $criteria->compare('age',$age,true);
        $criteria->compare('class',$class,true);
        $criteria->compare('sectionPerson',$section,true);  
        $criteria->compare('Email',$Email,true);

        if($id != "" || $name != "" || $age  != "" || $class   != "" || $section    != "" || $Email      != "" || $TelePhone1  != "" || $TelePhone2  != "" || $Fax  != "" || $Address     != "" || $State       != "" || $Suburb      != "" || $PostCode   != "" || $Include_inactive != "F")
        {   
            $modelSearch= new CActiveDataProvider("tblClass", array(
                'criteria'=>$criteria,
            )); 
        }
        else
        {
            $modelSearch = "";
            $this->clearAdvSearchSessionVar();
        }
       $this->render('advance_search',array('modelSearch' => $modelSearch,'modelAdvSearchFinder'=>$modelAdvSearchFinder));
    } 
```

## 模型.php

```
class AdvSearchFinder extends CFormModel
{

    public $id;
    public $name;
    public $age;
    public $class;
    public $section;
    public $Email;

    public function rules()
    {
        return array(
            array('id,name,age,class,section,Email', 'safe'),
        );
    }    
    public function attributeLabels()
    {
        return array(
            'id'=>'ID',
            'name'=>'Name',
            'age'=>'AGE',
            'class'=>'Class',
            'section'=>'section',
            'Email'=>'Email'
        );
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:09:42.760

```
unset(Yii::app()->session['var']); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T18:40:47.893

基于 Orlymee 的回答，您可以将其包装在控制器中的检查中：

```
if(!Yii::app()->request->isAjaxRequest) { 
  unset(Yii::app()->session['var']);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T19:25:24.987

我有两个扩展可以帮助您保留网格过滤器：

[记住过滤器](http://www.yiiframework.com/extension/remember-filters-gridview/)扩展为 CActiveRecord/Model 实现的默认可能性添加了一些功能。

它将检测搜索场景并保存来自 GridView 的过滤器。当您需要在页面更改期间的导航之间记住它们时，这很方便。对于大量导航和重过滤，只需几行即可激活此功能。

它的一对是[清晰的过滤器](http://www.yiiframework.com/extension/clear-filters-gridview)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T08:47:34.143

您可以使用 jquery 创建一个 onclick 事件，该事件将像其他用户所说的那样清除此会话：

```
unset(Yii::app()->session['var']); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T16:52:18.200

我不明白您为什么要使用会话来存储请求变量，因为 YII CActiveDataProvider 已经可以选择设置可用于排序和分页的请求参数，如下所示：

```
$params=array('id'=>$_POST['AdvSearchFinder']['id'],'name'=>$_POST['AdvSearchFinder']['name'])
$dataProvider=new CActiveDataProvider($CmdbMaster,array(
                'criteria'=>$criteria,
                'pagination'=>array(
                        'params'=>$params,
                ),
                'sort'=>array(
                        'params'=>$params,
                ),

        )); 
```

# sql-server - 具有 Pub/Sub OnChange 的持久数据缓存

> ID：11416666
> 
> 赞同：4
> 
> 时间：2012-07-10T15:24:28.337
> 
> 标签：sql-server, caching, mongodb, memcached, redis

*（以下问题有点长，所以如果您对持续兑现和通知不感兴趣，请随时按浏览器中的 x 按钮！）*

我们的任务是实现一个持久的数据存储，它将保留大量的数字信息。

基本上用例是：

1.  您将获得包含需要在数据存储中传播的数据更新和插入的提要。

    1.1。**当前更新频率**范围为 1 到 10 秒的 1 个提要。但稍后我们可能会得到更多，因此可扩展性很重要。

    1.2\. **卷**。每个提要大约有 100K 行（即使一个值没有改变，它仍然会在提要中）

2.  这些值需要被持久化。一旦发生这种情况，则需要将事件通知 C# 服务器。理想情况下有一个事件。因为提要将包含理想情况下未更改的数据，所以服务器事件应该与增量一起出现，而不仅仅是`OnStuffChanged`.

**执行**

由于系统使用的是 SQL server，一些非技术人员已经签署了使用 sql server 的实施方案。这种味道对我来说很糟糕！但无论如何，做了一些研究，发现了关于[SqlDependency](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx) API 的 Wrapper。

然而，我看到该 appi 带有一个行李箱，以*一长串约束*( `http://msdn.microsoft.com/en-us/library/ms181122%28v=sql.105%29.aspx`) 的形式出现。我还看到 MS 说它在亚秒级性能方面效率不高（目前不是这种情况，但将来可能会如此）。

专门针对性能和可靠性 MS 说

> “当必须以亚秒级响应时间接收通知、网络基础设施不是既快速又可靠时，或者当通知量非常高时，查询通知可能不是应用程序的最佳选择。”

并建议[查询通知的替代方法，](http://msdn.microsoft.com/en-us/library/ms187528%28SQL.105%29.aspx)例如：

1.  **在受监视表上更新触发器**（我不是触发器的忠实粉丝）之后，其操作是使用 SQL Server 服务代理向需要通知的更新发送消息。
2.  实现存储和通知的**自定义中间件。**

*（伙计们，谢谢你们的耐心！）*

所以重点是我真的觉得除了自定义中间件这些想法都不好。

**问题**

*   *有没有人亲身体验过`SqlDependency`和`Service Broker`*？您是否认为我应该开始对 mgmt 进行讨伐以防止技术错误首先发生？
*   我有点想也许我应该使用类似`redis/memcached/mongo`数据缓存的东西。它们提供持久性。我确信我可以找到一种方法将它们与关系数据库连接起来，并将更改的/新的数字提供给服务器进行处理。这不是更有意义吗？
*   也许我只是过度设计了这件事。我是否应该尝试**其他建议**（建议的类似 stackoverflow 问题`）？

为冗长的帖子道歉！如果您到目前为止还费心阅读，请提前感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T15:47:31.177

不要使用 SqlDependency，它不适合它。SqlDependency 是监控很少变化的数据（例如参考数据）。使用 SqlDependency，您只会收到数据已更改的通知，不知道更改的内容，您必须自己查询。

作为将通知与消费分离的一种手段，Service Broker 本身会更好地满足要求。已经有[大规模部署](http://rusanu.com/2011/06/01/scale-out-sql-server-by-using-reliable-messaging/)这样做了。使用 SQL Server 2012，您可以进行[多播](http://rusanu.com/2011/07/20/how-to-multicast-messages-with-sql-server-service-broker/)。

但绝对不是通过触发。通知应该是您的应用程序中的一等公民，而不是附加到 atrigger ( [ughhh](http://en.wikipedia.org/wiki/Spam_%28Monty_Python%29) ) 中的数据模型的事后想法。有*明确*的程序来通知订阅者，并让您的应用程序明确地调用它们。不要混合你的数据模型和你的消息传递模式，你只会引入不必要的耦合。

如果您想采用 NoSQL 方式，那将是完全不同的讨论。[Redis 是通常的选择](http://marcgravell.blogspot.co.uk/2011/04/async-redis-await-booksleeve.html)。但不要忽视真正的发布/订阅消息传递产品，例如[ZeroMQ](http://en.wikipedia.org/wiki/ZeroMQ)。

顺便说一句，这种十字军东征（赞成或反对，我不在乎......）最好与*原型*作战。

# iphone - iPhone：如何知道音乐项目未同步？

> ID：11416670
> 
> 赞同：1
> 
> 时间：2012-07-10T15:24:35.560
> 
> 标签：iphone, ios, mpmusicplayercontroller

我正在创建一个音乐应用程序。

有没有办法知道 MPMediaItem 在我的应用程序正在播放或在表格视图上显示时是否未同步？

在表格视图中，现在我检查 MPMediaItem 是否为 nil。
是好方法吗？

未同步后正在播放的 MPMediaItem 不会变为 nil。
所以我不知道它是否不同步。

我以为有同步 iTunes 的通知。
但我找不到这样的通知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:36:06.223

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(notification_iPodLibraryDidChange:)
                                             name: MPMediaLibraryDidChangeNotification
                                           object:nil];

[[MPMediaLibrary defaultMediaLibrary] beginGeneratingLibraryChangeNotifications]; 
```

不确定如果您的图书馆在您的领导下发生变化会发生什么，但我想使用上述通知检查会很容易。

# android - Android 错误：无法在设备上安装 *.apk *: timeout No Check on the Target

> ID：11416672
> 
> 赞同：1
> 
> 时间：2012-07-10T15:24:49.047
> 
> 标签：android, timeout, apk

当我尝试在我的 android 设备上调试任何程序时出现错误

> > 在设备 * 上安装 *.apk 失败：超时

我尝试重新启动，并在 DDMS 中延长超时当我必须选择一个设备时，数字旁边的目标字段中有一个红色 X

我是 android 开发新手，我将不胜感激

# multithreading - 在 Scala 演员中集成自主和反应行为的最佳方式？

> ID：11416673
> 
> 赞同：4
> 
> 时间：2012-07-10T15:24:55.600
> 
> 标签：multithreading, scala, asynchronous, actor, event-based-programming

我是一位经验丰富的 Java 程序员，我开始开发基于 actor 的 Scala 应用程序。在我目前正在开发的应用程序中，我必须处理表现出自主和反应行为的 Sender Actor 的实现。场景如下（伪代码）：

```
Actor Sender{

        Active behavior (must be active once the actor boots):
            do-in-sequence{
                send to Stdout A
                send to Stdout B
                send to Stdout C
                send stop to Stdout and then exit
            }

        Reactive behavior (must be active once the actor boots):
            as soon as received stop from StopNotifier -> send stop to Stdout and then exit
    }
}

Actor Stdout{
    Purely reactive behavior (i.e. wait for msg){
        as soon as received A -> print A
        as soon as received B -> print B
        as soon as received C -> print C
        as soon as received stop from Sender -> exit
    }
}
Actor StopNotifier
    Purely active behavior {
        compute, and when some condition is met -> send stop to Sender
    } 
```

**我的问题是：对于需要集成自主性和反应性（如[本文](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.40.4979&rep=rep1&type=pdf)所述）的 Scala 演员来说，表达自主行为的最佳方式是什么？**

换句话说，在上面的示例中，对 Sender 演员进行编码的最佳方式/风格是什么？

我想出了一个解决方案（在下面报告），但由于我不是 scala 大师（还 :)）我想知道我所实施的是否可以在更好/更好的解决方案中得到改进。

```
case object START
case object A
case object B
case object C
case object SENT_A
case object SENT_B
case object ACK_A
case object ACK_B
case object ACK_C
case object STOP

class Sender(stdout: Stdout) extends Actor {
    def act() {
        self!START
        while (true){
            receive {
                case START =>
                    stdout!?A
                    self!SENT_A
                case SENT_A =>
                    stdout!?B
                    self!SENT_B
                case SENT_B =>
                    stdout!?C
                    stdout!?STOP
                    exit()
                case STOP => {
                    Console.println("[Sender:]Received STOP, terminating")
                    stdout!?STOP
                    exit()
                }
            }
        }
    }
}

class Stdout() extends Actor {
    def act() { 
        while (true) {
            receive{
                case A =>
                    Console.println("[Stdout:]A")
                    reply(ACK_A)
                case B =>
                    Console.println("[Stdout:]B")
                    reply(ACK_B)
              case C =>
                    Console.println("[Stdout:]C")
                    reply(ACK_C)
                    exit()
              case STOP =>
                    Console.println("[Stdout:]Received STOP, terminating")
                    exit()
            }
        }
    }
}

class StopNotifier(sender: Sender) extends Actor {
    def act() {
        /*
         * The idea is that the StopNotifier should send a STOP message to the Sender
         * when a certain condition is met.
         * The sleep used here is just a semplification, since the detection of such
         * a condition is not relevant for the example.
         */

        Thread.sleep(200)
        Console.println("[StopNotifier:]Sending STOP to sender")
        sender ! STOP
        exit()
   }
}

object app extends Application {
    val stdout = new Stdout
    stdout.start
    val sender = new Sender(stdout)
    sender.start
    val stopNotifier = new StopNotifier(sender)
    stopNotifier.start
} 
```

**特别是在我当前的实现中困扰我的是，为了能够对从 StopNotifier 接收到的 STOP 消息迅速做出反应，我需要在 Sender 的每个执行步骤**（即在将 A、B 发送到 Stdout 演员）。在我看来，做事情的正确方法太棘手了:)。

我还尝试使用其他 Scala 语言结构（例如异步发送、反应等）开发其他解决方案，但在我看来，它们似乎受到其他问题/技巧的影响。

有没有人有更好的解决方案来处理 scala 演员中自治和反应行为的整合？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T17:41:59.783

如果我理解正确，您应该改用 Akka 演员，特别是 Akka FSM，将发送者建模为状态机。Akka actor 有一个内置的停止机制，或者您始终可以使用自己的消息，这些消息可以通过处理程序从所有状态进行`whenUnhandled`处理。

见[http://doc.akka.io/docs/akka/snapshot/scala/fsm.html](http://doc.akka.io/docs/akka/snapshot/scala/fsm.html)

这显然是矫枉过正，但我​​假设你正在尝试做一些更复杂的事情。您还可以使用`Stdout`“watch” `Sender`，以便它在终止时`Sender`终止，而不是在收到特定消息时终止。请参阅[生命周期监控（又名 DeathWatch）](http://doc.akka.io/docs/akka/snapshot/scala/actors.html)。

```
package fsmTest

import akka.actor._
import akka.util.duration._

sealed trait Msg
case object A extends Msg
case object B extends Msg
case object C extends Msg

sealed trait SenderState
case object Started extends SenderState
case object SentA extends SenderState
case object SentB extends SenderState

case class SenderData()

class Sender(stdout: ActorRef) 
  extends Actor 
  with FSM[SenderState, SenderData] {

  case object GoNextState

  startWith(Started, SenderData())

  when(Started) {
    case Event(GoNextState, data) => {
      stdout ! A
      goto(SentA) using data
    }
  }

  when(SentA) {
    case Event(GoNextState, data) => {
      stdout ! B
      goto(SentB) using data
    }
  }

  when(SentB) {
    case Event(GoNextState, data) => {
      stdout ! C
      goto(Started) using data
    }
  }

//      //Handle messages which aren't explicitly handled in state here
//      whenUnhandled {
//        case Event(SomeCustomStop, data) => {
//          stop(FSM.Shutdown)
//        }
//      }

  setTimer("goNextState", GoNextState, 1 second, repeat = true)

  initialize
}

class Stdout() extends Actor {
  def receive = {
    case msg: Msg => {
      context.watch(sender) //Not sure if you're gonna want to do this here, but you get the point
      println(msg)
    }
    case Terminated(_) => context.stop(self)
  }
}

object FSMTest extends App {

  implicit val system = ActorSystem("Testing")
  val stdout = system.actorOf(Props[Stdout], "stdout")
  val sender = system.actorOf(Props(new Sender(stdout)), "sender")

  system.scheduler.scheduleOnce(5 seconds) {
    system.stop(sender)
    system.shutdown()
  }
  system.awaitTermination(10 seconds)
} 
```

无论您如何在发送者中实现状态，如果您想使用 Actors 对其进行建模，我相信您将需要“自我发送”消息，无论是在事件处理中还是使用上面的计时器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T18:52:35.577

从一个反应或接收块中的一个参与者按顺序发送的消息将按该顺序接收。（你可能穿插了来自其他参与者的其他消息，但你不会先发送 A 然后 B 并获得 B 然后 A。）

所以你可以

```
stdout ! A
stdout ! B
stdout ! C 
```

除非您还需要做其他事情。

# android - 用于更新用户位置的 Android 服务

> ID：11416674
> 
> 赞同：0
> 
> 时间：2012-07-10T15:25:04.013
> 
> 标签：android, eclipse, geocoding, ddms

我正在尝试创建一个 android 服务，它将每 5 分钟更新一次用户的位置。我正在使用 DDMS 将坐标发送到运行良好的模拟器。我需要转换这些坐标并获取位置，例如：纽约并使用 Toast，将其打印在屏幕上。我没有使用任何地图，我正在尝试使用地理编码器将 DDMS 提供的坐标转换为位置。我没有收到错误，但似乎坐标没有被转换为位置，屏幕上没有显示任何内容。请帮助已经为此苦苦挣扎了很长时间。这是我的代码。谢谢

```
public class GetLocationService extends Service {
protected LocationManager locationManager;
Button start;

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}
@Override
public int onStartCommand(Intent intent, int flags, int startId){
    LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
    LocationListener ll = new MyLocListener();
    Location location = new Location("abc");
    ll.onLocationChanged(location ); 
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 0, ll);
    return START_STICKY;
}

private class MyLocListener implements LocationListener {
public void onLocationChanged(Location location) {
     if (location != null) {
    Log.d("LOCATION CHANGED", location.getLatitude() + "");
    Log.d("LOCATION CHANGED", location.getLongitude() + "");
    }
    double latitude = location.getLatitude();
    double longitude = location.getLongitude();
    Toast.makeText(getApplicationContext(),
    location.getLatitude() + "" + location.getLongitude(),
    Toast.LENGTH_LONG).show();
    try{
         Geocoder geo = new Geocoder(GetLocationService.this.getApplicationContext(), Locale.getDefault());
         List<Address> addresses = geo.getFromLocation(latitude, longitude, 1);
             if (addresses.size() > 0) {       
                Log.d("TAG",addresses.get(0).getFeatureName() + ", " + addresses.get(0).getLocality() +"," + addresses.get(0).getAdminArea() + "," + addresses.get(0).getCountryName());
             }
             Toast.makeText(getApplicationContext(),
                     addresses.get(0).getFeatureName() + ", " + addresses.get(0).getLocality() +"," + addresses.get(0).getAdminArea() + "," + addresses.get(0).getCountryName(),
                        Toast.LENGTH_LONG).show();
          }

        catch (Exception e) {
            e.printStackTrace(); 
        }
        }
     }
   } 
```

////启动服务////

```
 public class MyService extends Activity {

 @Override
    protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.service);
    startService(new Intent(getBaseContext(), GetLocationService.class));

  }
} 
```

![在此处输入图像描述](../Images/18dc309c8f382ac3fca390524c18caa5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:02:57.840

好的，你的日志语句通过了吗？此外，您的 toast 不会显示，因为您传递给它的上下文是服务上下文。该服务不是用户界面的一部分。因此不会显示服务上下文。应用程序上下文可能工作......但你真的应该使用当前活动的上下文。

# javascript - 如何在创建选项时更改选项的背景图像？

> ID：11416688
> 
> 赞同：0
> 
> 时间：2012-07-10T15:25:50.627
> 
> 标签：javascript, html, background-image, html-select

我正在选择元素中创建一个选项并尝试更改背景图像。

```
nextItem = document.createElement('option');

nextItem.innerHTML = text;

nextItem.style.backgroundImage = "url(icons/add.png);";

nextItem.className = "class1"; 
```

但是，当我使用 firebug 时，我可以看到实际创建的是这样的：

```
<option class="class1" style="">text</option> 
```

为什么它创建样式属性但没有在其中放入任何信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:36:03.370

去掉网址中的分号。

改变：

```
nextItem.style.backgroundImage = "url(icons/add.png);"; 
```

到：

```
nextItem.style.backgroundImage = "url(icons/add.png)"; 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/Vwu8m/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:31:47.910

你会试试这个`nextItem.style.backgroundImage = "url('icons/add.png')";`

# sql - 对这个 SQL 查询使用这种蛮力方法是否可行？

> ID：11416690
> 
> 赞同：-1
> 
> 时间：2012-07-10T15:26:03.153
> 
> 标签：sql, sql-server-2008, csv

我有一个包含 6700 个 ID 的列表，存储在 Excel 文件中，我想在数据库中进行搜索。我有一个这样的查询：

```
select distinct RespondentID,  QuestionID,Condition
from RespondentProfiles (nolock) 
where RespondentID in (10286334,13988335, 18834444,26134155, 8658775)
and QuestionID in (113) 
```

我的 ID 是上面的 RespondentID，它们看起来像这样：

```
10286334,
13988335, 
18834444,
26134155,
 8658775,
 1616806,
 3470656,
30981782,
29302573,
29043779,
12899462,
 7420528,
17040183,
26129711,
19542507 
```

Excel 说它可以保存为逗号分隔的值。但我无法做到这一点（即我想要一个包含所有值的文本文件，以逗号分隔）然后我将剪切并粘贴到查询中。毫无疑问，这看起来有点难看，但我认为这是可行的，还是太慢了？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:32:18.080

好吧 - 对于 ID 列表，实际上没有其他方法可以挑选其中的一部分

如果问题是速度——那么它的速度将与索引允许的一样快。RespondentID 是聚集键/索引吗？

如果是这样，它应该不会太糟糕，因为它只是索引搜索的负载 - 并且聚集索引（如果它是一个）应该涵盖这个查询

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:41:10.067

在上面的查询中，如果您有 QuestionID 索引，服务器将使用索引查找 QuestionID 为 113 的行。然后它将扫描 QuestionID 为 113 的所有行，并使用二进制搜索查看 RespondentID 是否在 ID 列表中。

因此，如果有 100 行 QuestionID 为 113，它将扫描所有 100 行，但不会扫描整个数据集。

您可以使用覆盖索引来加速此操作，以便服务器使用索引扫描而不是表扫描。只需按顺序在 QuestionID、RespondentID 和 Condition 上创建复合“覆盖”索引。

There may be some limitation on the size of the covering index, depending on the size of the columns. If you post your schema, we can provide more detailed answers.

# plot - 在熊猫中绘制毫秒范围

> ID：11416692
> 
> 赞同：2
> 
> 时间：2012-07-10T15:26:15.500
> 
> 标签：plot, pandas

我正在尝试创建一个情节等待 x 范围为例如 500 毫秒。

```
rng = date_range(s,periods=500,freq="U")
df = DataFrame(randn(500),index=rng,columns=["A"])

to plot column A:

df["A"].plot() 
```

*由于 x 范围是从Jan-2011*到*Jul-2014*定义的，因此整个图将被压缩成一个峰值。

有没有办法改变这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:37:44.697

我针对您的问题提出了一个 github 问题：[https](https://github.com/pydata/pandas/issues/1599) ://github.com/pydata/pandas/issues/1599请在下周回来查看 Pandas 的错误修复版本。

此外，pandas 中毫秒频率的偏移别名是“L”。“U”是微秒频率别名。

# couchdb - CouchDB 复制器

> ID：11416699
> 
> 赞同：0
> 
> 时间：2012-07-10T15:26:42.733
> 
> 标签：couchdb, document

我正在尝试创建一个 couchdb 接口，其中多个操作系统的数据库包含具有相同键但不同语言的字符串的文档。我想在更新主文件时使用 Replicator 功能来通知我哪些文档没有更新以及需要创建或更新哪些密钥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:36:12.227

该`_rev`字段是通过对文档内容进行散列处理而成的，因此不可能有两个不同的文档并使用 Couch 的复制。

# android - 保存活动状态

> ID：11416701
> 
> 赞同：0
> 
> 时间：2012-07-10T15:26:48.490
> 
> 标签：android, android-layout, android-intent

我正在尝试制作一个简单的数独，但我的“继续”按钮有问题。当您第一次启动应用程序时，该按钮被禁用：

```
continueButton.setEnabled (false); 
```

从而导致用户不得不使用NewGame按钮。该按钮自动启用继续按钮：

```
continueButton.setEnabled (true); 
```

问题是，关闭应用程序，使用退出按钮或手机的后退按钮，我失去了继续按钮的状态，当重新启动应用程序时，它再次被禁用。

这是我的代码：

```
public class Sudoku extends Activity implements OnClickListener {
private static final String TAG = "Sudoku";
private static final String PROFILE = "stato";
boolean t = false;
SharedPreferences preferences;
int  a , b = 0, c = 0;
View continueButton;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

// Set up click listeners for all the buttons
continueButton = findViewById(R.id.continue_button);
continueButton.setOnClickListener(this);
View newButton = findViewById(R.id.new_button);
newButton.setOnClickListener(this);
View aboutButton = findViewById(R.id.about_button);
aboutButton.setOnClickListener(this);
View exitButton = findViewById(R.id.exit_button);
exitButton.setOnClickListener(this);

t = isFirstRun();
if (t == false){
continueButton.setEnabled(false);
}else{
continueButton.setEnabled(true);
}
}

@Override
protected void onResume() {
super.onResume();
Music.play(this, R.raw.main);
}

@Override
protected void onPause() {
super.onPause();
Music.stop(this);

}

public void savePreferences(){
SharedPreferences.Editor ed = preferences.edit();
ed.putBoolean("button", true);
ed.commit();
}

public boolean isFirstRun(){
preferences = PreferenceManager.getDefaultSharedPreferences(this);   
return preferences.getBoolean("button", t);

}

//onClick method

public void onClick(View v) {
switch (v.getId()) {
case R.id.continue_button:
a = 1;
startGame(Game.DIFFICULTY_CONTINUE);
break;
// ...
case R.id.about_button:
Intent i = new Intent(this, About.class);
startActivity(i);
break;
// More buttons go here (if any) ...
case R.id.new_button://button NewGame when pressed enable continueButton
continueButton.setEnabled(true);
a = 0;

openNewGameDialog();
break;
case R.id.exit_button: //exit button

finish();

break;
}
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event)
{
if ((keyCode == KeyEvent.KEYCODE_BACK))
{       
finish();

}

return super.onKeyDown(keyCode, event);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
super.onCreateOptionsMenu(menu);
MenuInflater inflater = getMenuInflater();
inflater.inflate(R.menu.menu, menu);
return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
switch (item.getItemId()) {
case R.id.settings:
startActivity(new Intent(this, Prefs.class));
return true;
// More items go here (if any) ...
}
return false;
}

/** Ask the user what difficulty level they want */
private void openNewGameDialog() {
new AlertDialog.Builder(this)
.setTitle(R.string.new_game_title)
.setItems(R.array.difficulty,
new DialogInterface.OnClickListener() {
public void onClick(DialogInterface dialoginterface,
int i) {
startGame(i);
}
})
.show();
}

/** Start a new game with the given difficulty level */
@SuppressLint("ParserError")
private void startGame(int i) {

Log.d(TAG, "clicked on " + i);
Intent intent = new Intent(this, Game.class);
intent.putExtra("blocca", a);
intent.putExtra(Game.KEY_DIFFICULTY, i);
startActivity(intent);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:31:43.503

看看 android 的[数据存储](http://developer.android.com/guide/topics/data/data-storage.html) 选项。我建议简单地保存一个布尔值`SharedPreferences`，然后在每次创建主要活动时检查它的值。

```
public class MainActivity extends Activity{

    //Class used to retain data
    private SharedPreferences preferences;
    private boolean isFirstRun;

    //initialize the preferences in onCreate()
    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        preferences = PreferenceManager.getDefaultSharedPreferences(this);
        isFirstRun = false;
    }

    //When your application gains the foreground, check to see if it is first time
    @Override
    public void onResume(){
        //if nothing has been stored, returns true since it is the first run.
        isFirstRun = preferences.getBoolean("first",true);
        if(isFirstRun)
            //disable continue button
        else
            //enable continue button
    }

    //Save preferences anytime your application loses the foreground
    @Override
    public void onPause(){
        SharedPreferences.Editor ed = preferences.edit();
            ed.putBoolean("first",isFirstRun);
            ed.commit();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:46:37.327

您可以使用 Shared Preference 并在 onResume 或 OnPause 方法中检查变量的状态

这些变量在不卸载或删除应用程序数据时保持活动状态

使用 SharedPreferences 创建变量

```
SharedPreferences getSharedPreferences prefs = (PROFILE, Context.MODE_PRIVATE);

SharedPreferences.Editor prefs.edit editor = ();
editor.putBoolean ("ContinueButtonValue", false);
editor.commit (); 
```

并在您的应用程序暂停后恢复其价值：

```
SharedPreferences prefs = getSharedPreferences (Settigns, Context.MODE_PRIVATE);          
prefs.getBoolean sConfiguration = prefs.getBoolean ("ContinueButtonValue", false); 
```

# html - 调整html中table td的内容

> ID：11416704
> 
> 赞同：0
> 
> 时间：2012-07-10T15:26:54.497
> 
> 标签：html

我像这样创建表。

```
<table border="1">
            <tr>
                <td width="250px" rowspan="2"><input type="image" src="dash.jpg"  name="image" style=width:50% height="100"> </td>
                <td width="1100px" align="center" valign ="top"><div id="head1" style="font-size: 55px;letter-spacing:3px">Sample programming html</div></td>
                <td width="300px" align="center" valign ="top"><span id="subhead1" style="font-size: 25px;letter-spacing:3px">Chap: <label id = "l1"  style = "color:white;font:normal 22px chalkdust;">1</label></span><br>
                    <span id="subhead2" style="font-size: 30px;letter-spacing:3px"> <input type="text" id="text2" disabled="disabled" value="0" style= "color: #fff; font-size: 18pt;"/> -  POINT</span>
                </td>
            </tr>
            <tr>
                <td  colspan="3" align="center" style="position: relative;" valign ="top">
                    <div id="head2" style="font-size: 25px;letter-spacing:4px">1-COORDINATE GRID</div></td>
            </tr>
            <tr><td colspan="3" align="center"><hr id="line" color="#fff" size="2" width="75%"></td></tr>
        </table> 
```

我希望内容“示例编程 html”在中心，而“1-COORDINATE GRID”正好是内容的中心。我使用了各种代码，但它并不完全与“示例编程 html”的中心对齐。任何人都可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:43:26.473

您的 td 单元格宽度不同，如果您想自己调整文本对齐方式，您可以使用左或右填充 css 属性。

```
<div id="head2" style="padding-left:250px..../> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:53:54.070

只需从行中删除 colspan="3" ，它就会对齐。

```
<tr>
            <td  align="center" style="position: relative;" valign ="top">
                <div id="head2" style="font-size: 25px;letter-spacing:4px">1-COORDINATE GRID</div></td>
</tr> 
```

# php - 密码发布的最佳做法是什么？

> ID：11416709
> 
> 赞同：2
> 
> 时间：2012-07-10T15:27:04.997
> 
> 标签：php, passwords, ldap

我目前正在开发一个需要登录的小型内部 PHP 应用程序。凭据将使用 LDAP 进行身份验证，但我想知道通过表单传递 AD 用户名和密码有多安全？

认证页面代码：

```
 <?php

// using ldap bind
$ldaprdn  = $_POST['username'];
$ldappass = $_POST['password'];
// connect to ldap server
$ldapconn = ldap_connect("SERVERNAME")
    or die("Could not connect to LDAP server.");

if ($ldapconn) {

    // binding to ldap server
    $ldapbind = ldap_bind($ldapconn, $ldaprdn, $ldappass);

    // verify binding
    if ($ldapbind) {
        echo "LDAP bind successful...";
    } else {
        echo "LDAP bind failed...";
    }

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:33:17.723

采用

*   https
*   发布/重定向/获取
*   确保您的实用程序未连接到 Internet，仅连接到您的 Intranet
*   CSRF 保护
*   不要将此信息存储在 cookie、文件等中。

# java - RMI 何时建立 TCP 连接？

> ID：11416710
> 
> 赞同：4
> 
> 时间：2012-07-10T15:27:05.283
> 
> 标签：java, rmi

我有一个测试程序**T**：

*   **从服务器S**`Remote`上的 RMI 注册表获取对象 O 的存根
***   在数百个并行线程中，调用此对象**O**上的方法。**

 **我可以看到服务器**S**有许多“RMI TCP 连接”线程。我原以为只有一个，因为**T**上只有一个**O**存根。这是如何运作的？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T00:45:05.663

RMI 需要每个线程的每个端点都有一个连接。它在客户端汇集它们，这反过来也会导致在服务器端汇集，所以它实际上并没有那么糟糕，但是如果你有 1000 个线程同时执行 RMI 调用，那么肯定会有 1000 个连接. 它们不是多路复用的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-10T17:38:34.307

如果可能，RMI 应该尝试重用服务器套接字和客户端套接字。

您的情况发生在服务器套接字工厂不相等时（执行 equals 时，结果为 false 并再次建立连接）。也许存根没有实现 hashCode 和 equals，所以没有确定的方法可以知道套接字是否可用。****

# php - jQuery 可排序 PHP

> ID：11416711
> 
> 赞同：0
> 
> 时间：2012-07-10T15:27:06.160
> 
> 标签：php, jquery, jquery-ui

我正在使用 jQuery sortable 来操作图像顺序并写入数据库。该功能运行良好。

**PHP**

```
 echo "<div class='revisionNum'>";
            echo "<ul id='sortable_" . $count ."'>";

            while($row = mysql_fetch_array($result)) {
                $sortImageName = $row['OrgImageName']; 
                $sortPath = "../data/gallery/" . $galleryID . "/images/album/" . $sortImageName;
                echo "<li class='sortPhotos' id='item_{$row['id']}' >";
                echo '<img class="sortImage" src="'. $sortPath .'"/>';
                echo "<p>" . $sortImageName . "</p>";
                echo "</li>";
            }
            echo "</ul>";
            echo "</div>"; 
```

**jQuery**

```
//make sortable
    $(".revisionNum").each(
        function(e) {
        num = e + 1;
        $("#sortable_" + num).sortable(
            {stop:function(i) {
                serial = $("#sortable_"  + num).sortable("serialize");
                $.ajax({
                    type: "GET",
                    url: "../albumUploader/queries/sort.php",
                    data: serial
                });
            },
            opacity:1.0,
            //cursor: move
        });    
    }); 
```

**MYSQL**

```
foreach($_GET['item'] as $key=>$value) {

    mysql_query("   UPDATE galleryimage
                    SET sort = '{$key}'
                    WHERE id = '{$value}'  
                "); 
```

问题是当我有多个时，如果 [.revisionNum]，`<div class=''revisionNum>`我只抓取 `serial = $("#sortable_" + num)`最后一个 UL，而不是我正在排序的实际 UL。感谢您对此的帮助。让我知道是否需要进一步澄清。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T22:15:03.970

我不确定我是否完全理解您的问题，但我认为您正在寻找以下内容：

该变量`num`将更改您在每个循环中创建的每个循环。但最后它将具有最后一个循环的值。因为`num`似乎是一个全局变量，所以不能在 stop 函数中调用它。然后它将只使用它拥有的最后一个值。最后一个循环的值。（解释你的问题）

为了解决这个问题，我建议将您的代码更改为：

```
$(".revisionNum").each(
    function(e) {
    $(this).children("ul").sortable(
        {stop:function(i) {
            num = $(this).children("ul").attr("id").replace("sortable_", "");
            serial = $(this).children("ul").sortable("serialize");
            ... 
```

`$(this)`指的是`$(".revisionNum")`你正在循环，它会被记住，也在停止功能中。

# c# - 处理 Epplus Excel 中的合并单元格转换为 HTML

> ID：11416716
> 
> 赞同：7
> 
> 时间：2012-07-10T15:27:08.703
> 
> 标签：c#, html, excel, epplus

我正在使用 Epplus 将 Excel 电子表格呈现为 HTML。到目前为止，它进展得非常非常好，除了一件事……跨越合并的单元格。我似乎无法正确理解逻辑。我想我会把它扔出去，看看社区会如何处理它。到目前为止，这是我的代码。

```
public String ParseExcelStamps(String FileName)
{
    FileInfo theFile = new FileInfo(FileName);
    String html = "";
    using (ExcelPackage xlPackage = new ExcelPackage(theFile))
    {
        var workbook = xlPackage.Workbook;
        if (workbook != null)
        {
            for (int j = 1; j <= workbook.Worksheets.Count; j++)
            {
                Tab tab = new Tab();
                html+= "<table style='border-collapse: collapse;font-family:arial;'><tbody>";
                var worksheet = workbook.Worksheets[j];
                tab.Title = worksheet.Name;
                if (worksheet.Dimension == null) { continue; }
                int rowCount = 0;
                int maxColumnNumber = worksheet.Dimension.End.Column;
                var convertedRecords = new List<List<string>>(worksheet.Dimension.End.Row);
                var excelRows = worksheet.Cells.GroupBy(c => c.Start.Row).ToList();
                excelRows.ForEach(r =>
                {
                    rowCount++;
                    html += String.Format("<tr>");
                    var currentRecord = new List<string>(maxColumnNumber);
                    var cells = r.OrderBy(cell => cell.Start.Column).ToList();
                    Double rowHeight = worksheet.Row(rowCount).Height;
                    for (int i = 1; i <= maxColumnNumber; i++)
                    {
                        var currentCell = cells.Where(c => c.Start.Column == i).FirstOrDefault();

                        //look aheads for colspan and rowspan
                        ExcelRangeBase previousCellAbove = null;
                        ExcelRangeBase previousCell = null;
                        ExcelRangeBase nextCell = null;
                        ExcelRangeBase nextCellBelow = null;
                        try { previousCellAbove = worksheet.Cells[rowCount-1, i]; }catch (Exception) { }
                        try { previousCell = worksheet.Cells[rowCount, (i - 1)]; }catch (Exception) { }
                        try { nextCell = worksheet.Cells[rowCount, (i + 1)]; }catch (Exception) { }
                        try { nextCellBelow = worksheet.Cells[rowCount+1, i]; }catch (Exception) { }

                        if ((previousCell != null) && (previousCell.Merge) && (currentCell != null) && (currentCell.Merge)){continue;}
                        if ((previousCellAbove != null) && (previousCellAbove.Merge) && (currentCell != null)) {continue; }

                        if (currentCell == null)
                        {
                            html += String.Format("<td>{0}</td>", String.Empty);
                        }
                        else
                        {
                            int colSpan = 1;
                            int rowSpan = 1;
                            if ((nextCell != null) && (nextCell.Merge) && (currentCell.Merge)) {
                                colSpan = 2;
                               // Console.WriteLine(String.Format("{0} - {1}", currentCell.Address, nextCell.Address));
                            }

                            if ((nextCellBelow != null) && (nextCellBelow.Merge) && (currentCell.Merge)) {
                                Console.WriteLine(String.Format("{0} - {1}", currentCell.Address, nextCellBelow.Address));
                            }

                            html += String.Format("<td colspan={0} rowspan={1}>{2}</td>", colSpan, rowSpan, currentCell.Value);
                        }
                    }
                    html += String.Format("</tr>");
                });
                html += "</tbody></table>";
            }//worksheet loop
        }
    }
    return html;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-12T19:21:59.793

据我所知，这正是您所需要的。您缺少的是`MergedCells`工作表上列出工作表中所有合并单元格的属性。

我的代码同时处理行跨度、列跨度以及两者。我使用包含行、列和行/列跨越的电子表格进行了一些测试。在所有情况下，它们都工作得很好。

***代码***

```
int colSpan = 1;
int rowSpan = 1;

//check if this is the start of a merged cell
ExcelAddress cellAddress = new ExcelAddress(currentCell.Address);

var mCellsResult = (from c in worksheet.MergedCells 
                let addr = new ExcelAddress(c)
                    where cellAddress.Start.Row >= addr.Start.Row &&
                    cellAddress.End.Row <= addr.End.Row &&
                    cellAddress.Start.Column >= addr.Start.Column &&
                    cellAddress.End.Column <= addr.End.Column 
                select addr);

if (mCellsResult.Count() >0)
{
    var mCells = mCellsResult.First();

    //if the cell and the merged cell do not share a common start address then skip this cell as it's already been covered by a previous item
    if (mCells.Start.Address != cellAddress.Start.Address)
        continue;

    if(mCells.Start.Column != mCells.End.Column) {
        colSpan += mCells.End.Column - mCells.Start.Column;
    }

    if (mCells.Start.Row != mCells.End.Row)
    {
        rowSpan += mCells.End.Row - mCells.Start.Row;
    }
}

//load up data
html += String.Format("<td colspan={0} rowspan={1}>{2}</td>", colSpan, rowSpan, currentCell.Value); 
```

# java - Java应用程序中非常慢的TCP握手

> ID：11416721
> 
> 赞同：2
> 
> 时间：2012-07-10T15:27:24.553
> 
> 标签：java, jakarta-ee, tcp, aix, apache-mina

我们的 Java 应用程序由客户端和服务器组成。在我们的生产环境中，建立连接需要很长时间（约 40 秒）。

我们使用 tcpdump 捕获了网络流量，在建立连接时可以看到以下数据包：

```
start                  client > server SYN
2 milliseconds later   server < client SYN,ACK
38 *seconds* later     client > server ACK 
```

在我们的其他环境中，所有三个数据包几乎都是瞬时发生的。

任何人都可以建议可能导致 38 秒延迟的原因，或建议诊断它的步骤吗？请注意，因为这是一个生产环境，所以我们很难更改诊断代码。

以下是有关我们环境的一些详细信息：

*   [客户端使用来自Apache Mina](http://mina.apache.org/) 1.0.1的 SocketConnector ，它在内部使用 java.nio.channel.SocketChannel.connect(..)。
*   客户端在 IBM WebSphere 7.0.0.17 中运行
*   Java 版本 = 1.6.0，Java 编译器 = j9jit24，Java VM 名称 = IBM J9 VM
*   操作系统是 AIX，版本 6.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:52:02.093

你是不是用完了描述符和/或你的 TCP 接受队列已满？

# jquery - 回车键上的 JQuery 自动完成操作

> ID：11416727
> 
> 赞同：3
> 
> 时间：2012-07-10T15:27:38.817
> 
> 标签：jquery

我希望自动完成功能像这样。

当用户在文本框中输入内容时，什么都不会发生。只有当用户在文本框中完成写入并按下回车键时，才会出现自动完成建议列表。

任何想法如何做到这一点..或者在哪里更改代码..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T10:41:31.847

***第1步***

通过更改具有以下签名的方法来更改**jquery.ui.autocomplete.js文件以接受回车键**

***.bind("keydown.autocomplete", 函数（事件）***

并将其更改为以下代码

```
 case keyCode.ENTER:
                case keyCode.NUMPAD_ENTER:
                    // when menu is open and has focus
                    if (self.menu.active) {
                        // #6055 - Opera still allows the keypress to occur
                        // which causes forms to submit
                        suppressKeyPress = true;
                        event.preventDefault();
                    }
                    //passthrough - ENTER and TAB both select the current element 
```

**到**

```
 case keyCode.ENTER:
                case keyCode.NUMPAD_ENTER:
                    // when menu is open and has focus
                    if (self.menu.active) {
                        // #6055 - Opera still allows the keypress to occur
                        // which causes forms to submit
                        suppressKeyPress = true;
                        event.preventDefault();
                    }
                    else {

                        clearTimeout(self.searching);
                        self.searching = setTimeout(function () {
                            // only search if the value has changed

                            self.selectedItem = null;
                            self.search(null, event);

                        }, self.options.delay);

                    }
                    //passthrough - ENTER and TAB both select the current element 
```

***STEP : 2*** 将自动完成绑定更改为

```
 $('.SearchAddresses').autocomplete({
  // Your bind code by setting required parameters

  search: function (event, ui) {
                var key = CheckBrowser(event);
                if (key == 13)
                    return true;
                else
                    return false;
            }
   });

 function CheckBrowser(e) {
        if (window.event)
            key = window.event.keyCode;     //IE
        else
            key = e.which;     //firefox
        return key;
    } 
```

***SETP : 3*** 如果您在 asp.net 表单控件中使用它

然后也包括它。

```
 $(document).ready(function () {

        $("form").keypress(function (e) {
            var key = CheckBrowser(e);
            if (key == 13) {
                e.preventDefault();
                return false;
            }
            else {
                return true;
            }
        });
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T16:49:29.153

我建议检查“输入键”的按键事件。当按下的键是“Enter”时，触发自动完成功能，如下所示。

```
$(#inputBoxId).keypress(function(e) {
    if(e.which == 13) {
       $( "#elementId" ).autocomplete({
        //............... bind autocomplete and write your code
       });
    }
}); 
```

试试这个。可能对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T15:31:12.240

也许动态绑定/取消绑定控件。例如，在按下回车键之前不要让它自动完成？要么只读源框，要么在文本更改之前删除，直到他们再次按下回车键？我很确定您可以手动触发自动完成事件，该事件将显示下拉菜单。

# jquery - jQuery / ajax，设置选择选项

> ID：11416728
> 
> 赞同：0
> 
> 时间：2012-07-10T15:27:41.357
> 
> 标签：jquery, ajax

我正在为我的选择下拉菜单设置选项，该下拉菜单已从数据库传回。

```
 "<td><select id=\"sel" + res.sku.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-') + "\"><option>True</option><option>False</option></select></td>" + 
```

我让它通过选项 true 或 false，我将如何在选项上设置它？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:32:59.933

请参阅文章：[.prop() 与 .attr()](https://stackoverflow.com/questions/5874652/prop-vs-attr)

```
 $('#sel').prop('checked', false) 
```

或者，您可以根据应用程序的逻辑将 false 更改为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:16:33.490

我同意 Sable 的观点，在这种情况下单选按钮可能是更好的选择，但如果您决定使用下拉列表，您可以尝试以下操作：

```
"<option" + (myValue === true ? " selected" : "") + ">True</option><option" + (myValue === false? " selected" : "") + ">False</option></select></td>" 
```

# apache - mod_rewrite 将 REQUEST_URI 添加到 URL 参数，使用 ColdFusion 处理

> ID：11416732
> 
> 赞同：0
> 
> 时间：2012-07-10T15:28:06.623
> 
> 标签：apache, mod-rewrite, coldfusion, jrun

mod_rewrite 与 ColdFusion 结合使用时有一个奇怪的问题：

我在我的虚拟主机配置中使用以下重写规则：

```
RewriteEngine On

RewriteRule ^$ index.cfm [L]

# Add trailing slash if missing
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-f
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !(?i)^[\\/]CFFileServlet
RewriteCond %{REQUEST_URI} !index.cfm
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ $1/ [L,R=301]

# Clean up multiple slashes in URL
RewriteCond %{HTTP_HOST} !=""
RewriteCond %{THE_REQUEST} ^[A-Z]+\s//+(.*)\sHTTP/[0-9.]+$ [OR]
RewriteCond %{THE_REQUEST} ^[A-Z]+\s(.*/)/+\sHTTP/[0-9.]+$
RewriteRule .* http://%{HTTP_HOST}/%1 [R=301,L]

# Pass all non physically existing files/folders to index.cfm in URL.original_url
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-f
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/cms/
RewriteRule ^(.*)$ /index.cfm?original_url=$1 [QSA,PT,L] 
```

一切正常，除了一件事：

如果我这样称呼`http://www.example.com/test/?asdf`我的`URL.original_url`阅读`original_url=/test/index.php&asdf`，我无法弄清楚为什么会有索引。**php**在里面。

我已经尝试省略了 PT 标志，但没有它就无法工作。所有页面，例如`http://www.example.com/test/`返回`403 - Forbidden`，并且在页面标题中显示“JRun Servlet 错误”。

感谢您对此的任何想法！

**编辑：** 好的，我错过了一些重要的事情：该文件夹`/test/`实际上存在于我的 documentroot 中！`/test/does_not_exist/`其他类似的URL**不受**上述问题的影响。

总结：

`http://www.example.com/test/`->`URL.original_url`得到`/test/index.php`

`http://www.example.com/test/does_not_exist/`->`URL.original_url`得到`/test/does_not_exist/`这是我的预期行为。

# scala - 如何使用 Scala 中的 playframework 将文件上传到数据库

> ID：11416735
> 
> 赞同：2
> 
> 时间：2012-07-10T15:28:09.200
> 
> 标签：scala, playframework, playframework-2.0

使用 Play!2 和 Scala 处理文件上传到数据库的推荐方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T09:15:50.560

根据您的具体要求，MongoDB 的 GridFS 将以比任何关系数据库和文件系统更高效和可扩展的方式为您存储文件。

[http://www.mongodb.org/display/DOCS/GridFS](http://www.mongodb.org/display/DOCS/GridFS)

Play 有很多支持 GridFS 的 MongoDB 插件。

# android - 有没有办法查看每个应用程序在手机内存/SD卡上存储的数据？

> ID：11416738
> 
> 赞同：0
> 
> 时间：2012-07-10T15:28:11.853
> 
> 标签：android

我想跟踪应用程序存储在手机内存/sd 卡中的所有内容，以便在卸载应用程序时将其删除。这可能吗？如果没有，我怎样才能从手机内存/SD卡中获取所有文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:40:38.423

我认为没有办法“跟踪”您的应用程序创建的内容.. 通常，该应用程序将数据存储在 Cache 目录中，即：

```
 "<storage directory>/data/<your package name>/" 
```

在支持外部存储的设备上，“存储目录”通常是“/mnt/sdcard”

您可以阅读[文档](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)以了解如何使用外部存储来保存您通过应用程序创建的文件。

我还想指出，您无法知道您的应用程序何时被卸载，因此您无法在手动卸载之前删除文件，如果您打算这样做的话。不过，android 系统本身会删除存储在缓存目录中的文件。

# c++ - Multiple definitions of a non-template class vs. a template class

> ID：11416747
> 
> 赞同：5
> 
> 时间：2012-07-10T15:28:51.780
> 
> 标签：c++, templates, compiler-construction, linker

Why do compilers complain about a non-template class defined in multiple .cpp files but are fine with a template class the definition of which is duplicated across various .cpp files (via inclusion of the .inl file of the class), even if the class is explicitly instantiated in even multiple .cpp files?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T15:39:39.583

The non-template case is because in that scenario your program violates the one definition rule so the linker (not compiler) will complain about multiple definitions.

For templates on the other hand, the language specifies that this must work and the linker sorts out what to do. I'm not 100% sure if an explicit template instantiation should be treated the same as a non-template function though.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:49:40.840

Do all compilers complain, always? I've never seen one which did, and the standard doesn't allow it: you're allowed to define a class or a template once in each translation unit, as long as all of the definitions are identical. In fact, you're required to define the class in every translation unit which uses it in a way that requires it to be a complete type. C++ does not have any mechanism for exporting class definitions to other translation units.

Are you sure you're not confusing classes with functions. You're not allowed to define a function more than once, unless it is inline. You still have to define a function template in each translation unit which uses it, and the same rules apply for function templates as for classes and class templates.

Note that if you violate these rules, by defining the function in more than one translation unit, or by the definitions of the classes or templates not being tokenwise identical (after preprocessing, and including name binding), then you have undefined behavior. The compiler (actually the linker) may complain about it, but it's not required: most complain about multiple definitions of a function, but I don't know of any which complain when the class or template definitions differ between translation units.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T15:53:06.630

Template functions are inline, and inline functions are allowed to be defined in multiple compilation units as long as each definition is identical.

# perl - Perl - HTTP::Proxy 捕获 XHR/JSON 通信

> ID：11416748
> 
> 赞同：6
> 
> 时间：2012-07-10T15:29:01.007
> 
> 标签：perl, forex

该站点[http://openbook.etoro.com/#/main/](http://openbook.etoro.com/#/main/)有一个实时提要，该提要由 javascript 通过 XHR 保持活动请求生成，并从服务器作为 gzip 压缩 JSON 字符串获取答案。

我想将提要捕获到文件中。

通常的方法（WWW::Mech..）（可能）不可行，因为需要对页面中的所有 Javascript 进行反向工程并模拟浏览器确实是一项艰巨的任务，因此，寻找替代解决方案。

我的想法是使用中间人策略，因此浏览器将完成他的工作，我想通过 perl 代理捕获通信 - 仅用于此任务。

我能够捕捉到最初的交流，但不能捕捉到提要本身。代理工作正常，因为在浏览器中，提要只运行我的文件管理器不起作用。

```
use HTTP::Proxy;
use HTTP::Proxy::HeaderFilter::simple;
use HTTP::Proxy::BodyFilter::simple;
use Data::Dumper;
use strict;
use warnings;

my $proxy = HTTP::Proxy->new(
     port => 3128, max_clients => 100, max_keep_alive_requests => 100
);

my $hfilter = HTTP::Proxy::HeaderFilter::simple->new(
    sub {
        my ( $self, $headers, $message ) = @_;
        print STDERR "headers", Dumper($headers);
    }
);

my $bfilter = HTTP::Proxy::BodyFilter::simple->new(
    filter => sub {
        my ( $self, $dataref, $message, $protocol, $buffer ) = @_;
        print STDERR "dataref", Dumper($dataref);
    }
);

$proxy->push_filter( response => $hfilter); #header dumper
$proxy->push_filter( response => $bfilter); #body dumper
$proxy->start; 
```

Firefox 使用上述代理配置所有通信。

提要在浏览器中运行，因此代理向其提供数据。（当我停止代理时，提要也停止了）。随机（不知道何时）我收到以下错误：

```
[Tue Jul 10 17:13:58 2012] (42289) ERROR: Getting request failed: Client closed 
```

**任何人都可以告诉我一种方法，如何为 Dumper 构建正确的 HTTP::Proxy 过滤器，无论 keep_alive XHR 是浏览器和服务器之间的所有通信吗？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T09:46:01.397

这是我认为你所追求的东西：

```
#!/usr/bin/perl

use 5.010;
use strict;
use warnings;

use HTTP::Proxy;
use HTTP::Proxy::BodyFilter::complete;
use HTTP::Proxy::BodyFilter::simple;
use JSON::XS     qw( decode_json );
use Data::Dumper qw( Dumper );

my $proxy = HTTP::Proxy->new(
    port                     => 3128,
    max_clients              => 100,
    max_keep_alive_requests  => 100,
);

my $filter = HTTP::Proxy::BodyFilter::simple->new(
    sub {
        my ( $self, $dataref, $message, $protocol, $buffer ) = @_;
        return unless $$dataref;
        my $content_type = $message->headers->content_type or return;
        say "\nContent-type: $content_type";
        my $data = decode_json( $$dataref );
        say Dumper( $data );
    }
);

$proxy->push_filter(
    method   => 'GET',
    mime     => 'application/json',
    response => HTTP::Proxy::BodyFilter::complete->new,
    response => $filter
);

$proxy->start; 
```

我认为您不需要单独的标题过滤器，因为您可以访问要`$message->headers`在正文过滤器中使用的任何标题。

你会注意到我将两个过滤器推到了管道上。第一个是类型`HTTP::Proxy::BodyFilter::complete`，它的工作是收集响应块，并确保后面的真正过滤器总是在`$dataref`. 但是对于接收和缓冲的 foreach 块，将调用以下过滤器并传递一个空的`$dataref`. 我的过滤器通过提前返回来忽略这些。

我还设置了过滤器管道以忽略除导致 JSON 响应的 GET 请求之外的所有内容——因为这些似乎是最有趣的。

感谢您提出这个问题 - 这是一个有趣的小问题，您似乎已经完成了大部分艰苦的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T09:05:24.453

Set the [`mime` parameter](http://p3rl.org/HTTP%3a%3aProxy#FILTERS), default is to filter text types only.

```
$proxy->push_filter(response => $hfilter, mime => 'application/json');
$proxy->push_filter(response => $bfilter, mime => 'application/json'); 
```

# r - 组合数据框行

> ID：11416750
> 
> 赞同：2
> 
> 时间：2012-07-10T15:29:11.057
> 
> 标签：r, dataframe, lapply

我有一个带有两个 Id 变量和一个 name 变量的数据框。这些变量的组合数量不等。

```
## dput'ed data.frame
df <- structure(list(V1 = structure(c(1L, 2L, 3L, 4L, 5L, 1L, 2L, 3L, 
4L, 5L, 1L, 2L, 3L, 4L, 5L, 1L, 2L, 3L, 4L, 5L), .Label = c("A", 
"B", "C", "D", "E"), class = "factor"), V2 = c(1L, 2L, 3L, 1L, 
2L, 3L, 2L, 2L, 1L, 3L, 1L, 2L, 1L, 3L, 2L, 1L, 1L, 3L, 1L, 1L
), V3 = structure(c(1L, 2L, 3L, 1L, 2L, 3L, 2L, 2L, 1L, 3L, 1L, 
2L, 1L, 3L, 2L, 1L, 1L, 3L, 1L, 1L), .Label = c("test1", "test2", 
"test3"), class = "factor")), .Names = c("V1", "V2", "V3"), class = "data.frame", row.names = c(NA, 
-20L))
>df
   V1 V2    V3
1   A  1 test1
2   B  2 test2
3   C  3 test3
4   D  1 test1
5   E  2 test2
6   A  3 test3
7   B  2 test2
8   C  2 test2
9   D  1 test1
10  E  3 test3
11  A  1 test1
12  B  2 test2
13  C  1 test1
14  D  3 test3
15  E  2 test2
16  A  1 test1
17  B  1 test1
18  C  3 test3
19  D  1 test1
20  E  1 test1 
```

我想组合这些行，以便结果每个 V1 只有一个条目，然后以逗号分隔的值列表作为第二个和第三个变量。像这样：

```
 f    V2            V3
1 A    1 ,3 ,1 ,1    test1 ,test3 ,test1 ,test1
2 B    2 ,2 ,2 ,1    test2 ,test2 ,test2 ,test1
3 C    3 ,2 ,1 ,3    test3 ,test2 ,test1 ,test3
4 D    1 ,1 ,3 ,1    test1 ,test1 ,test3 ,test1
5 E    2 ,3 ,2 ,1    test2 ,test3 ,test2 ,test1 
```

我已经用下面的代码试过了，如果有点慢的话也可以。对于更快的解决方案有什么建议吗？

```
df = lapply(levels(df$V1), function(f){
  cbind(f,
        paste(df$V2[df$V1==f],collapse=" ,"),
        paste(df$V3[df$V1==f],collapse=" ,"))
})
df = as.data.frame(do.call(rbind, df))
df 
```

编辑：更正的 dput(df)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T15:52:25.647

确保`V3`（或其他因素变量）处于模式`as.character`并使用`aggregate`：

```
df$V3 = as.character(df$V3)
aggregate(df[-1], by=list(df$V1), c, simplify=FALSE)
#   Group.1         V2                         V3
# 1       A 1, 3, 1, 1 test1, test3, test1, test1
# 2       B 2, 2, 2, 1 test2, test2, test2, test1
# 3       C 3, 2, 1, 3 test3, test2, test1, test3
# 4       D 1, 1, 3, 1 test1, test1, test3, test1
# 5       E 2, 3, 2, 1 test2, test3, test2, test1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:37:30.900

```
do.call("rbind", lapply(split(df[, 2:3], df[,1]), function(x) sapply(x, paste, collapse=",")))
  V2        V3                       
A "1,3,1,1" "test1,test3,test1,test1"
B "2,2,2,1" "test2,test2,test2,test1"
C "3,2,1,3" "test3,test2,test1,test3"
D "1,1,3,1" "test1,test1,test3,test1"
E "2,3,2,1" "test2,test3,test2,test1" 
```

# android - 移动应用程序响应，直到客户端与服务器建立连接

> ID：11416751
> 
> 赞同：0
> 
> 时间：2012-07-10T15:29:12.803
> 
> 标签：android, iphone, networking, mobile, user-interface

移动应用程序从启动点（更多是从挂起模式快速启动的情况）到与服务器建立连接并准备就绪的点之间，是否存在已知/常见的模式？

我将尝试解释，当应用程序处于挂起模式时，UI 会快速显示，但对于连接，通常需要更多时间重新连接服务器。更重要的是，应用程序需要大量时间重新登录服务器，因此需要更多时间。

我的问题是，当时应用程序的响应速度应该如何？
当然，阻止所有 UI 是一个坏主意，但是我是否应该阻止触发某些网络活动的按钮，直到登录阶段完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:36:02.347

我的应用程序有完全相同的问题。在程序员定义超时或用户选择退出后，必须 ping 服务器以获取登录凭据的安全应用程序。根据我非常有限的经验，我发现它更好地显示一个简单的进度对话框，通知用户应用程序正在连接到服务器以进行安全登录。我的 UI 没有被完全屏蔽。进度条会旋转，因为登录过程始终在 AsyncTask（异步任务）中。我希望这在某些方面适用于你。我选择使对话框完全模态，所以它下面的所有其他按钮都不是活动的。我还将对话框充气以完全填满屏幕，以阻止任何可能刚刚拿起他人电话的人在屏幕上看到敏感数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:46:58.067

您应该在其他线程上执行服务器连接或使用 GCD。这样，主线程将做出响应，并在与服务器建立连接时采取相应的行动。

# css - 100% 父 div，里面有浮动的左图像

> ID：11416758
> 
> 赞同：0
> 
> 时间：2012-07-10T15:29:25.083
> 
> 标签：css

我有一个父 div，里面有一堆子 div。我希望子 div 水平排列并排在一起。这意味着父 div 不能设置为精确的宽度量，因为图像量会一直变化。所以我假设将父 div 设置为宽度：100%，然后将其中的子 div 项设置为浮动：左。

只有当我给父 div 一个与其中所有子 div 的宽度相匹配的宽度时，它才会起作用。有没有办法让它 100% 并将子 div 并排放置在父级内部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:43:39.347

看看这个[例子小提琴](http://jsfiddle.net/poikl/k44Su/)- 这是你想要的吗？

本质上，您只需要在包装器 div 上声明以下内容，仅此而已

```
#wrapper{
 white-space:nowrap;  
 overflow:hidden; /* whatever suits you - could be scroll as well*/
} 
```

您不需要浮动图像，因为默认情况下它们不是块级元素。

# ios - NSURLConnection 在某些情况下挂起

> ID：11416764
> 
> 赞同：0
> 
> 时间：2012-07-10T15:29:45.770
> 
> 标签：ios, nsurlconnection, nsjsonserialization

我正在发布到 RESTful 网络服务并接收响应，如果我只取回几条记录，这很好用，但是有一个阈值 didReceiveData: 停止被调用（6 条记录）并且它只是挂起。（不管什么记录，只要数字）

我似乎无法弄清楚为什么。我在 didReceiveResponse 中收到 200 application/json 的状态消息：但这是我从连接中听到的最后一条消息。

从其他客户端，我可以获取包含任意数量记录的完整数据，因此它与我的 NSURLConnection 代码相关。

请参阅下面的完整 NSURLConnection Post 类。

.h

```
#import <Foundation/Foundation.h>
#import "MBProgressHUD.h"

@protocol PostJsonDelegate <NSObject, NSURLConnectionDelegate>
@optional
- (void) downloadFinished;
- (void) downloadReceivedData;
- (void) dataDownloadFailed: (NSString *) reason;
@end

@interface PostURLJson : NSObject {
    NSMutableData *receivedData;
    int expectedLength;
    MBProgressHUD *HUD;
}

@property (strong, nonatomic) NSMutableData *receivedData;
@property (weak) id <PostJsonDelegate> delegate;
@property (assign, nonatomic) int expectedLength;

+ (id)initWithURL:(NSString *)url dictionary:(NSDictionary *)dictionary withDelegate:(id <PostJsonDelegate>)delegate;

@end 
```

他们

```
#import "PostURLJson.h"
#define SAFE_PERFORM_WITH_ARG(THE_OBJECT, THE_SELECTOR, THE_ARG) (([THE_OBJECT respondsToSelector:THE_SELECTOR]) ? [THE_OBJECT performSelector:THE_SELECTOR withObject:THE_ARG] : nil)

@implementation PostURLJson

@synthesize delegate;

@synthesize receivedData;
@synthesize expectedLength;

+ (id)initWithURL:(NSString *)url dictionary:(NSDictionary *)dictionary withDelegate:(id <PostJsonDelegate>)delegate
{    
    if (!url)
    {
        NSLog(@"Error. No URL");
        return nil;
    }

    PostURLJson *postJson = [[self alloc] init];
    postJson.delegate = delegate;

    [postJson loadWithURL:url dictionary:dictionary];

    return postJson;
}

- (void)loadWithURL:(NSString *)url dictionary:(NSDictionary *)dictionary 
{
    [self setExpectedLength:0];

    receivedData = [[NSMutableData alloc] init];

    NSError* error;

    NSDictionary *tmp = [[NSDictionary alloc] initWithDictionary:dictionary];

    NSData *postdata = [NSJSONSerialization dataWithJSONObject:tmp options:0 error:&error];

    NSString *someString = [[NSString alloc] initWithData:postdata encoding:NSASCIIStringEncoding];
    NSLog(@"%@",someString);

    NSString *postLength = [NSString stringWithFormat:@"%d", [postdata length]];

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
    [request setURL:[NSURL URLWithString:url]];
    [request setHTTPMethod:@"POST"];
    [request setTimeoutInterval:10.0f];

    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:postdata];

    NSURLConnection *connection = [NSURLConnection connectionWithRequest:request delegate:self];
    [connection start];
    [self setLoadingModeEnabled:YES];
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    NSHTTPURLResponse * httpResponse = (NSHTTPURLResponse *) response;
    int errorCode = httpResponse.statusCode;
    NSString *fileMIMEType = [[httpResponse MIMEType] lowercaseString];

    NSLog(@"%d",errorCode);
    NSLog(@"%@",fileMIMEType);

    [receivedData setLength:0];

    // Check for bad connection
    expectedLength = [response expectedContentLength];
    if (expectedLength == NSURLResponseUnknownLength)
    {
        NSString *reason = [NSString stringWithFormat:@"Invalid URL"];
        SAFE_PERFORM_WITH_ARG(delegate, @selector(dataDownloadFailed:), reason);
        [connection cancel];
        return;
    }
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [receivedData appendData:data];
    SAFE_PERFORM_WITH_ARG(delegate, @selector(downloadReceivedData), nil);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    SAFE_PERFORM_WITH_ARG(delegate, @selector(downloadFinished), nil);
    [self setLoadingModeEnabled:NO];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    NSLog(@"Something went wrong...");
    HUD.labelText = @"Something went wrong...";
    [self performSelector:@selector(didFailHideHud) withObject:nil afterDelay:2];
}

- (void)setLoadingModeEnabled:(BOOL)isLoading
{
    //when network action, toggle network indicator and activity indicator
    if (isLoading) {
        [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;

        UIWindow *window = [UIApplication sharedApplication].keyWindow;
        HUD = [[MBProgressHUD alloc] initWithWindow:window];
        [window addSubview:HUD];
        HUD.labelText = @"Loading";
        [HUD show:YES];
    } else {
        [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

        [HUD hide:YES];
        [HUD removeFromSuperview];
    }

}

-(void)didFailHideHud
{
    [HUD hide:YES];
    [HUD removeFromSuperview];
}

@end 
```

**在触发 NSURLResponseUnknownLength 的特定大小后，**编辑服务器没有返回有效长度，我错误地没有记录，所以我没有在控制台中收到“无效 URL”消息。****

 **```
if (expectedLength == NSURLResponseUnknownLength)
    {
        NSString *reason = [NSString stringWithFormat:@"Invalid URL"];
        SAFE_PERFORM_WITH_ARG(delegate, @selector(dataDownloadFailed:), reason);
        [connection cancel];
        return;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T07:35:33.737

试试这个：</p>

```
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self  startImmediately:NO];
[connection scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];
[connection start]; 
```

因为如果你在 NSDefaultRunLoopMode 中运行连接并且有 UITableView 滚动，它会挂起连接委托。

但是你的问题是不同的。一些服务器会限制来自单个客户端的同时连接数。如果您是这种情况，那么第一个连接将成功，而其他连接将挂起，直到先前的连接完成。**

# php - 在 PHP 中实现 Vincenty 公式

> ID：11416767
> 
> 赞同：1
> 
> 时间：2012-07-10T15:29:54.350
> 
> 标签：php, math

我一直在尝试用以下方法实现文[森蒂的公式](http://en.wikipedia.org/wiki/Vincenty%27s_formulae)：

```
 /* Implemented using Vincenty's formulae from http://en.wikipedia.org/wiki/Vincenty%27s_formulae,
 * answers "Direct Problem".
 * $latlng is a ('lat'=>x1, 'lng'=>y1) array
 * $distance is in miles
 * $angle is in degrees
 */
function addDistance($latlng, $distance, $bearing) {
    //variables
    $bearing = deg2rad($bearing);
    $iterations = 20; //avoid too-early termination while avoiding the non-convergant case

    //knowns
    $f = EARTH_SPHEROID_FLATTENING; //1/298.257223563
    $a = EARTH_RADIUS_EQUATOR_MILES; //3963.185 mi
    $phi1 = deg2rad($latlng['lat']);
    $l1 = deg2rad($latlng['lng']);
    $b = (1 - $f) * $a;

    //first block
    $tanU1 = (1-$f)*tan($phi1);
    $U1 = atan($tanU1);
    $sigma1 = atan($tanU1 / cos($bearing));
    $sinalpha = cos($U1)*sin($bearing);
    $cos2alpha = (1 - $sinalpha) * (1 + $sinalpha);
    $usquared = $cos2alpha * (($a*$a - $b*$b) / 2);
    $A = 1 + ($usquared)/16384 * (4096+$usquared*(-768+$usquared*(320 - 175*$usquared)));
    $B = ($usquared / 1024)*(256*$usquared*(-128 + $usquared * (74 - 47*$usquared)));

    //the loop - determining our value
    $sigma = $distance / ($b * $A);
    for($i = 0; $i < $iterations; ++$i) {
        $twosigmam = 2*$sigma1 + $sigma;
        $delta_sigma = $B * sin($sigma) * (cos($twosigmam)+(1/4)*$B*(cos(-1 + 2*cos(cos($twosigmam))) - (1/6)*$B*cos($twosigmam)*(-3+4*sin(sin($sigma)))*(-3+4*cos(cos($twosigmam)))));
        $sigma = $distance / ($b * $A) + $delta_sigma;
    }

    //second block
    $phi2 = atan((sin($U1)*cos($sigma)+cos($U1)*sin($sigma)*cos($bearing)) / ((1-$f) * sqrt(sin($sinalpha) + pow(sin($U1)*sin($sigma) - cos($U1)*cos($sigma)*cos($bearing), 2))));
    $lambda = atan((sin($sigma) * sin($bearing)) / (cos($U1)*cos($sigma) - sin($U1)*sin($sigma)*cos($bearing)));
    $C = ($f / 16)* $cos2alpha * (4+$f*(4-3*$cos2alpha));
    $L = $lambda - (1 - $C) * $f * $sinalpha * ($sigma + $C*sin($sigma)*(cos($twosigmam)+$C*cos($sigma)*(-1+2*cos(cos($twosigmam)))));
    $alpha2 = atan($sinalpha / (-sin($U1)*sin($sigma) + cos($U1)*cos($sigma)*cos($bearing)));

    //and return our results
    return array('lat' => rad2deg($phi2), 'lng' => rad2deg($lambda));
}

    var_dump(addDistance(array('lat' => 93.129, 'lng' => -43.221), 20, 135); 
```

问题是结果不合理 - 我得到的纬度和经度差异高达 20 度，距离保持在 20 度。它不是以球体上的椭圆距离为单位吗？我误解了什么，还是我的实施有缺陷？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T08:24:10.103

[维基百科页面直接问题部分](http://en.wikipedia.org/wiki/Vincenty%27s_formulae#Direct_Problem)的转录存在许多错误：

*   您的`u`²表达式`2`在分母中应该有`b`²；
*   您的`A`和`B`表达式对于是否需要用括号括起来才能正确表示`a / b * c`为不一致`(a/b) * c`- 没有括号会发生什么是 php 语法问题，我不知道答案，但您应该更清楚；
*   您应该迭代“直到 sigma 没有显着变化”，这可能会或可能不会在您的固定迭代次数中发生；
*   您的 DELTA_sigma 公式中有错误：
    *   在维基百科页面上，方括号内的第一个词`[`是`cos sigma (-1`etc，而你有`cos (-1`etc，这是非常不同的；
    *   在相同的公式中以及稍后，请注意**`cos`² x**表示`(cos x)(cos x)`，**而不是** `cos cos x`！
*   你的 phi_2 公式有一个`sin($sinalpha)`它应该有一个`sin($sinalpha)*sin($sinalpha)`;

我想就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:43:01.220

你有没有试过这个：

[https://github.com/treffynnon/Geographic-Calculations-in-PHP](https://github.com/treffynnon/Geographic-Calculations-in-PHP)

# javascript - 为什么 jQuery UI Layout 在 Adob e AIR 中运行如此缓慢？

> ID：11416769
> 
> 赞同：1
> 
> 时间：2012-07-10T15:29:56.593
> 
> 标签：javascript, jquery-plugins, air

我一直在重新设计一个应用程序很长一段时间，我刚刚让它在 AIR 上工作。但是，常见的 UI 布局插件 ( [http://layout.jquery-dev.net/downloads.cfm](http://layout.jquery-dev.net/downloads.cfm) ) 会使应用程序减速到实际停止。

它有超过 5000 行，所以我不希望有人调试任何东西，但是有人遇到过这个吗？我将 AIR 用作带有指向我网站的 iframe 的包装器。奇怪的是，简单地从 iframe 运行它会使事情变得如此缓慢。

关闭插件后，应用程序显然看起来完全不正确，但一切又运行顺利了。即使是 CSS 悬停状态也很慢，所以有些东西正在破坏 AIR。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:47:37.490

CSS！是的，这就是答案。如果您使用高级 CSS（如 box-shadows）或其他昂贵的规则，则 AIR 引擎非常慢，会降低您的应用程序的速度。

使用布局使问题变得更糟，因为它在 mouseenter 和 leave 上添加和删除类。添加和删​​除这些类会强制重新渲染，这非常慢，并且使应用程序几乎停滞不前。

至少在我的示例中，我们能够在保留其他规则（如渐变）的情况下，只剪掉盒子阴影。

# python - 在 Python 中查找以 $ 符号开头的字符串中的所有单词

> ID：11416772
> 
> 赞同：12
> 
> 时间：2012-07-10T15:30:10.313
> 
> 标签：python, regex, dollar-sign

如何提取以 $ 符号开头的字符串中的所有单词？例如在字符串中

```
This $string is an $example 
```

我想提取单词`$string`and `$example`。

我尝试使用这个正则表达式`\b[$]\S*`，但只有当我使用普通字符而不是美元时它才能正常工作。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-10T15:34:01.617

```
>>> [word for word in mystring.split() if word.startswith('$')]
['$string', '$example'] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-10T15:34:15.183

您的 expr 的问题是`\b`空格和`$`. 如果删除它，一切正常：

```
z = 'This $string is an $example'
import re
print re.findall(r'[$]\S*', z) # ['$string', '$example'] 
```

为了避免匹配`words$like$this`，添加一个lookbehind断言：

```
z = 'This $string is an $example and this$not'
import re
print re.findall(r'(?<=\W)[$]\S*', z) # ['$string', '$example'] 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-10T15:31:24.167

转义符在`\b`单词边界匹配，但 $ 符号不被视为您可以匹配的单词的一部分。改为匹配开头或空格：

```
re.compile(r'(?:^|\s)(\$\w+)') 
```

我在这里为美元使用了反斜杠转义而不是字符类，并且`\w+`使用至少 1 个字符的单词字符类来更好地反映您的意图。

演示：

```
>>> import re
>>> dollaredwords = re.compile(r'(?:^|\s)(\$\w+)')
>>> dollaredwords.search('Here is an $example for you!')
<_sre.SRE_Match object at 0x100882a80> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-10T15:34:47.427

几种方法，具体取决于您想要定义为“单词”的内容以及是否全部用空格分隔：

```
>>> s='This $string is an $example $second$example'

>>> re.findall(r'(?<=\s)\$\w+',s)
['$string', '$example', '$second']

>>> re.findall(r'(?<=\s)\$\S+',s)
['$string', '$example', '$second$example']

>>> re.findall(r'\$\w+',s)
['$string', '$example', '$second', '$example'] 
```

如果您在一行的开头可能有一个“单词”：

```
>>> re.findall(r'(?:^|\s)(\$\w+)','$string is an $example $second$example')
['$string', '$example', '$second'] 
```

# sql - 你如何找到一个唯一的对值是否已经存在于一个 sql 表中？

> ID：11416774
> 
> 赞同：1
> 
> 时间：2012-07-10T15:30:17.117
> 
> 标签：sql, tsql

> **可能重复：**
> [在 SQL 表中查找重复值](https://stackoverflow.com/questions/2594829/finding-duplicate-values-in-a-sql-table)

一般来说，我对 T-Sql 和 Sql 编程完全陌生，所以我希望有人能引导我朝着正确的方向前进。这是我的问题.. 我有一个只有 2 列的表，AppliedBandwidthSourceKey 和 AppliedBandwithSource 为简单起见，我将分别称它们为 A 列和 B 列。

A 列和 B 列构成主键。当我尝试插入 A 列的值已经存在的记录时，我立即得到主键约束违规，如果 A 列不存在但 B 列存在，我得到唯一键约束违规。我的问题是如何检查表中是否已经存在“值对”？如果没有，那么什么都不做，否则插入。

我已经看到使用 tsql 的 merge 和 if not exists 语句来解决类似问题的几种解决方案，但我就是无法理解这个概念。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:33:37.963

你可以这样做：

```
IF NOT EXISTS (select * from yourtable where yourfield1 = 'field1' and yourfield2 = 'field2')
BEGIN
    INSERT INTO ...
END 
```

如果找不到数据，这只是将数据插入到您的表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:38:22.860

你实际上不必先做这项工作。. . 毕竟，这就是约束正在做的事情。

相反，了解 try/catch 块：

```
begin try
    insert into t(a, b) values('a', 'b')
end try
begin catch
    print 'Oops! There was a problem, maybe a constraint violation for example'
end catch; 
```

该语句尝试插入。如果出现故障，则进入“catch”部分，您可以做任何您想做的事情（包括忽略问题）。该文档相当清楚（http://msdn.microsoft.com/en-us/library/ms175976.aspx）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T15:34:22.527

使用计数语句，其中（A 和 B）如果计数返回 0，则该对不存在。如果它返回一个非 0 (X) 的数字，则条目对存在 (X) 次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T15:55:20.857

在某些情况下，您可以使用左/右连接，您可以在其中加入您的 PK：

```
insert into tableA (Id,AnotherId)
select b.Id, b.AnotherId
from tableB b
left join tableA a
    on b.Id = a.id
        and b.AnotherId = a.AnotherId
where a.Id is null 
```

另一个左连接版本：

```
insert into tableA (Id,AnotherId)
select b.Id, b.AnotherId
from (select Id = 5, AnotherId = 5) b
left join tableA a
    on b.Id = a.id
        and b.AnotherId = a.AnotherId
where a.Id is null
and a.Id is null 
```

# zend-framework - 使用 Zend_Config 构建 Zend_Form 的优缺点

> ID：11416775
> 
> 赞同：0
> 
> 时间：2012-07-10T15:30:28.003
> 
> 标签：zend-framework, zend-form, zend-config

有没有人用他们的配置文件构建他们的 Zend Form？我认为这不是一个坏主意，因为我可以让其他应用程序/语言解析/创建/修改表单（例如 zend 表单构建器应用程序）。我确信这有一些缺点。有没有人有这样做的经验？

-斯特里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:11:24.133

如果你使用 Zend_Config 来构造 Zend_Form 你将不得不解析 INI 文件；这是极其边际的性能下降。配置的清晰度和隔离性的增加超过了这些缺点。请记住，如果您曾经扩展 Zend_Form 以添加更多功能，您可能需要扩展 setOptions() 方法以支持您的更改。

# ember.js - 如何在 Ember.js / Handlebars 中显示视频的时间

> ID：11416776
> 
> 赞同：2
> 
> 时间：2012-07-10T15:30:34.937
> 
> 标签：ember.js

我正在开发一个带有 HTML5 视频的应用程序，我必须`video`在单独的标签中显示我的页面标签的当前时间。

我试图在我的视图中定义一个属性，它返回视频的格式化时间，比如

```
videoCounter: function() {
    return App.seconds2String(Math.floor(App.getCurrentVideoTime() + 0.5));
}.property().volatile() 
```

它将视频的当前时间返回为 mm:ss。

该函数`App.getCurrentVideoTime()`从页面中的视频元素获取当前时间（因此它不是 Ember 属性，因此不是绑定），如下所示：

```
getCurrentVideoTime: function() {
    var videoElement = document.getElementById('video');
    if (videoElement) {
        return Math.round(videoElement.currentTime * 10) / 10;
    }
    else {
        return 0;
    }
} 
```

车把视图包含

```
<label id="videoCounter">{{view.videoCounter}}</label> 
```

不幸的是，该值不会随着视频的播放而更新，即它一直显示`00:00`。

如何触发仅取决于视频标签当前时间的计算属性的更新？

我不需要高精度，计时器应该只以秒为单位显示视频的当前时间。

有任何想法吗？

太感谢了！

托马斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T09:32:15.887

从您声明是否使用自定义视图的代码中并不明显，但我会创建一个自定义`Video`视图并绑定到`timeupdate`事件，请参阅[http://jsfiddle.net/pangratz666/fzNMb/](http://jsfiddle.net/pangratz666/fzNMb/)：

**车把**：

```
<script type="text/x-handlebars" >
    {{view App.Video width="400px" controllerBinding="App.videoController"}}
    {{App.videoController.currentTimeFormatted}}
</script>​ 
```

**JavaScript**：

```
App.Video = Ember.View.extend({
    srcBinding: 'controller.src',
    controls: true,
    tagName: 'video',
    attributeBindings: 'src controls width height'.w(),

    didInsertElement: function() {
        this.$().on("timeupdate", {
            element: this
        }, this.timeupdateDidChange);
    },

    timeupdateDidChange: function(evt) {
        var video = evt.data.element;
        var currentTime = evt.target.currentTime;
        video.setPath('controller.currentTime', currentTime);
    }
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T21:16:40.967

根据我所说的以及@Zack 提到的 setInterval 的使用

jsfiddle：http: [//jsfiddle.net/Sly7/xgqkL/](http://jsfiddle.net/Sly7/xgqkL/)

```
App = Ember.Application.create({

          // computed property based on currentTime change
          videoCounter: function(){
              return this.get('currentTime');            
          }.property('currentTime'),

          currentTime: 0
});

// increment currentTime property every second
setInterval(function(){
    App.incrementProperty('currentTime');
}, 1000); 
```

# batch-file - 将参数传递给bat文件以安装windows服务

> ID：11416777
> 
> 赞同：0
> 
> 时间：2012-07-10T15:30:39.387
> 
> 标签：batch-file

我想创建将安装 Windows 服务的 bat 文件，作为参数传递。

这是正在运行的 bat 文件的内容：

```
installutil "D:\MVisum\MVisumCCS\Message Generator\MessageGenerator.exe" 
```

但这不是通用的。我试过了： installutil /i 1% 但它不工作。我想将要安装的服务路径作为参数传递给我的 bat 文件。

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:50:48.620

如果你的非通用的工作，那么试试这个通用的

```
installutil %1 
```

用法：

```
mybatchfile.bat "C:\myservice.exe" 
```

# excel - 使用 MS excel 将 MM:SS.ms 转换为秒

> ID：11416779
> 
> 赞同：16
> 
> 时间：2012-07-10T15:30:47.223
> 
> 标签：excel, time, string-formatting, data-conversion, seconds

我正在寻找一种将单元格从

`Minutes:Seconds.Milliseconds`至

`Seconds.Milliseconds`

IE

```
11.111    = 11.111
1:11.111  = 71.111 
```

我现在有一些东西，但它有点老套，我相信一定有一些不错的 excel 功能可以为我做到这一点：P

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-10T15:55:20.127

做这个：

将值`0:0:11.111`和分别`0:1:11.111`放在单元格`B3`中`B4`。

现在格式化它以考虑毫秒...选择单元格，`B3`然后`B4`右键单击并选择格式化单元格。在自定义中，将以下内容放入标记为 的文本框中`Type`：

```
[h]:mm:ss.000 
```

现在在单元格`C3`上输入以下公式：

```
=B3*86400 
```

填写`C4`相同的公式...

格式化列`C`，`Number`保留 3 个小数位。

你完成了！:)

这是我所做的尝试的屏幕截图并且有效：

![在此处输入图像描述](../Images/c9c90434d738fab2af7b0cefcfae5471.png)

**编辑：**

当您只想输入`MM:SS.ms`时，您可以使用自定义格式格式化整个`B`列，例如：`mm:ss.000`。现在您可以输入值 as `02:11.111`，它会相应地转换它给您`131.110`. 希望能帮助到你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-14T11:57:03.010

说你的时间在单元格中`A1`，把这个公式放在`B1`

```
=IF(LEN(A1)>5,VALUE(TEXT(A1,"[ss].00")),A1) 
```

如果时间小于一分钟，则输出未更改的时间，大于 1 分钟则将其转换为秒和毫秒（小数点后 2 位）。

这仅在您的时间`A1`为 10 秒或更长时才有效。

# php - 条件更新同一列中的单元格

> ID：11416780
> 
> 赞同：3
> 
> 时间：2012-07-10T15:30:51.263
> 
> 标签：php, mysql, phpmyadmin

我需要根据另一列中的 id 更新特定列中的单元格。列名是`Prod_ID`和：`Lang_ID``Descr`

```
Prod_ID | Lang_ID | Descr
--------+---------+------
A101    | 1       | TextA
A101    | 2       | TextB
A101    | 3       | TextC 
```

对于具有相同的一组行`Prod_ID`，我需要将所有后续描述（`Descr`列）替换为第一行的描述。具有正确描述的行总是`Lang_ID = 1`。此外，该表可能未按 Lang_ID 排序。

示例：`TextA`(Lang_ID = 1) 应该替换`TextB`并且`TextC`因为`Prod_IDs`行匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:45:19.910

您在其他地方的评论中提到“master” lang_id 始终为 1。这大大简化了事情，您可以通过简单的自联接来做到这一点（没有子查询 :-)

此查询选择所有 lang_1 行，然后将它们与具有相同 prod_id 的所有非 lang_1 行连接并更新它们。

# 如果 Lang_ID=1 始终是“第一个”

```
UPDATE products 
  LEFT JOIN products as duplicates
         ON products.Prod_ID=duplicates.Prod_ID 
        AND duplicates.Lang_ID != 1
SET duplicates.Descr = products.Descr
WHERE products.Lang_ID = 1 
```

# 编辑：如果 Lang_ID=1 可能不是“第一个”

您可以通过中间连接将表连接到自身，该连接会找到该行的最低 Lang_ID。我称中间连接为“lang_finder”。

```
UPDATE products 
  LEFT JOIN (SELECT Prod_ID, MIN(Lang_ID) as Lang_ID FROM products GROUP BY Prod_ID) as lang_finder
         ON products.prod_id=lang_finder.prod_id 
  LEFT JOIN products as cannonical_lang 
         ON products.Prod_ID = cannonical_lang.Prod_ID
        AND lang_finder.Lang_ID = cannonical_lang.Lang_ID
SET products.Descr = cannonical_lang.Descr 
```

请注意，虽然它确实使用了子查询，但它并没有嵌套它们。子查询实质上只是向 products 表（实际上）添加了一个具有最低 Lang_ID 值的列，然后允许自连接匹配该列。因此*，如果*存在具有 Lang_ID 3、4 和 5 的产品，这会将所有产品上的 Descr 设置为为 Lang_ID 3 设置的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:09:04.253

这个怎么样？

```
UPDATE myTable dt1, myTable dt2 
SET dt1.Descr = dt2.Descr
WHERE dt1.Prod_ID=dt2.Prod_ID; 
```

## [在 sqlfiddle 演示](http://sqlfiddle.com/#!2/3f8e6/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T16:11:13.857

假设正确的描述总是在一组具有相同 Prod_ID 的行中，其中 Lang_ID 具有最小值，这个 MySQL 查询应该可以工作：

```
UPDATE your_table AS t1
    JOIN (
        SELECT Prod_ID, Descr
        FROM (
            SELECT *
            FROM your_table
            ORDER BY Lang_ID
        ) AS t3
        GROUP BY Prod_ID
    ) AS t2
    ON t1.Prod_ID = t2.Prod_ID
SET t1.Descr = t2.Descr; 
```

例如，如果 Lang_ID 是主键或唯一键，则可以使用上述内容。如果相应的 Lang_ID 始终具有相同的最小值（例如 = 1），它也可以工作，但在这种情况下，可能会出现[像这样](https://stackoverflow.com/a/11427918/1337398)的不太复杂的查询。

# php - 如何使登录会话更安全？

> ID：11416781
> 
> 赞同：-2
> 
> 时间：2012-07-10T15:30:53.490
> 
> 标签：php, session

我正在为一个个人项目工作，我正在开发一个简单的登录系统，它具有简单的授权方法，例如 is_logged_in、login、register 和 logout。

我想知道如何使我的登录系统免受劫持、中间人和固定？

这是我的代码：

```
 class Auth extends Session
{
    public $ip_address;
    public $timestamp;
    public $user_agent;

    public function __construct()
    {
        $this->ip_address = $_SERVER['REMOTE_ADDR'];
        $this->user_agent = $_SERVER['HTTP_USER_AGENT'];
        $this->timestamp = date('Y-m-d H:i:s');
    }
    public function login($table = 'users',$username,$password,$username_column = 'username',$password_column = 'password')
    {
        if(!isset($username,$password))
        {
            return FALSE;
        } else {

            $username = mysql_real_escape_string($username);
            $password = md5(strip_tags($password));
            $query = "SELECT * FROM $table WHERE $username_column='$username' AND $password_column='$password'";
            if(mysql_num_rows($query) != 0)
            {
                $session_vars = array(
                    'session_id' => session_id(),
                    'username' => stripcslashes($username),
                    'ip_address' => $this->ip_address,
                    'user_agent' => $this->user_agent,
                    'timestamp' => $this->timestamp
                );
                $this->set_array($session_vars);
                $session_query = "INSERT INTO sessions(session_id,username,ip_address,user_agent,timestamp)";
                $session_query .= "VALUES('".implode(",'",$session_vars)."')";
                mysql_query($session_query) or die(mysql_error());
                return TRUE;

            }else{ 
                return FALSE;
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T22:39:06.047

劫持/固定：在每个请求上重新生成您的 SID。

中间人攻击：使用 SSL

看在上帝的份上，不要**通过**`GET`or接受会话信息`POST`。

# css - 如何使用 SASS 编写“任何作为标签子级的跨度都由 x 扩展，无论它是否具有类”？

> ID：11416784
> 
> 赞同：0
> 
> 时间：2012-07-10T15:30:59.990
> 
> 标签：css, sass

我希望每`span`一个都是接收扩展的孩子，`label`同时简化 SASS 并删除重复。

例如我想重写这个：

```
label > span {
  extend @informational;
}

label > span.info {
  extend @informational;
  /* other info stuff */
}

label > span.error {
  extend @informational;
  /* other error stuff */
} 
```

变成类似这样的东西：

```
label {
  span {
    extend @informational;
  }

  span.info {
    /* other info stuff */
    /* this also gets extended, but no explicit extension statement here */
  }
  span.error {
    /* other error stuff */
    /* this also gets extended, but no explicit extension statement here */
  }
} 
```

因为只是扩展 the`span`并不也扩展 a `span.xxx`（尽管我希望它）。

有办法吗？我尝试过的所有组合（包括上述组合）都失败了。

我也试过这个，但没有使用，而是通过在每个相关块`@extend`中重复 CSS ，达到同样的效果。`informational`这使它成为一个 CSS 问题（afaics），但如果它可以使用 SASS 解决，那也很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:15:05.087

您可能有其他样式规则，它们会覆盖您的`@informational`扩展中的任何`span`内容，以使用类。据我所知，这也是...

如果是这种情况，您必须保留您的类选择器，以便它们弥补不太具体的`span`选择器，但您可以像这样将它们组合在一起，这样您就不必重复该`extend @informational;`语句（您还需要使用`>`如果您专门只寻找孩子，而不仅仅是任何嵌套级别的后代）：

```
label {
  > span, > span.info, > span.error {
    extend @informational;
  }

  > span.info {
    /* other info stuff */
  }

  > span.error {
    /* other error stuff */
  }
} 
```

如果您对`span`元素具有哪些特定类不感兴趣，只要它们具有或不具有`class`属性，则可以使用属性选择器代替便宜的技巧：

```
label {
  > span, > span[class] {
    extend @informational;
  }

  /* ... */
} 
```

# image - gif 和 png 图像仅在 IE8 上消失

> ID：11416788
> 
> 赞同：0
> 
> 时间：2012-07-10T15:31:15.847
> 
> 标签：image, internet-explorer-8, onmouseover, onmouseout

我的 6 张图片（悬停时的 png 和动画 gif）无法仅在 IE8 上加载，我已经在 mac 和 windows 上的大多数浏览器上进行了测试，而 IE8 是唯一无法加载图片的浏览器。它们实际上出现在 IE7 上，我一直在网上查看解决方案或类似问题，但似乎找不到合适的解决方案。

这是该页面的链接：http: [//tinyurl.com/8ydbp6y](http://tinyurl.com/8ydbp6y)

继承人该特定部分的 html

```
 <ul class="about-icons">
         <li id="about-love"><a href="includes/content/content-love.html" target="content-load"><img src="images/about/icon-thankyou.png" onmouseover="this.src='images/about/icon-thankyou.gif'" onmouseout="this.src='images/about/icon-thankyou.png'"/></a></li>
          <li id="about-japan"><a href="includes/content/content-japan.html" target="content-load"><img src="images/about/icon-japan.png" onmouseover="this.src='images/about/icon-japan.gif'" onmouseout="this.src='images/about/icon-japan.png'"/></a></li>
       <li  id="about-icecream" class="no-margin-right"><a href="includes/content/content-icecream.html" target="content-load"><img src="images/about/icon-icecream.png" onmouseover="this.src='images/about/icon-icecream.gif'" onmouseout="this.src='images/about/icon-icecream.png'"/></a></li>
    </ul> 
    <br/>  
    <div id="about-whymochiko" ><img src="images/about/whymochiko.png" alt="Why Mochiko"/></div>
    <br/>
    <ul class="about-icons">
       <li id="about-flavors"><a href="includes/content/content-flavors.html" target="content-load"><img src="images/about/icon-flavors.png" onmouseover="this.src='images/about/icon-flavors.gif'" onmouseout="this.src='images/about/icon-flavors.png'"/></a></li>
       <li id="about-ingredients"><a href="includes/content/content-ingredients.html" target="content-load"><img src="images/about/icon-ingredients.png" onmouseover="this.src='images/about/icon-ingredients.gif'" onmouseout="this.src='images/about/icon-ingredients.png'"/></a></li>
       <li id="about-milk" class="no-margin-right"><a href="includes/content/content-milk.html" target="content-load"><img src="images/about/icon-milk.png" onmouseover="this.src='images/about/icon-milk.gif'" onmouseout="this.src='images/about/icon-milk.png'"/></a></li>
    </ul>` 
```

提前致谢！

*编辑* 我检查了 IE8 图像报告，显然它将我的图像的宽度和高度调整为 0px。我不知道为什么会这样：| 我不知道如何解决它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:52:01.577

我认为这可能是带有 JavaScript 的 IE 中的一个错误。一个可能的解决方案是加载图像然后使用 JavaScript 切换动画可见性？

# javascript - 按比例调整不断增长的 div 的大小？

> ID：11416789
> 
> 赞同：0
> 
> 时间：2012-07-10T15:31:19.300
> 
> 标签：javascript, jquery, html, css

我有一个 div 作为进度条，不断增长与浏览器宽度成比例的数量。`timerLength += $(window).width()/numSlides * .01;`当栏到达浏览器的边缘时，它的宽度设置为 0 并再次开始填充。

我希望它能够流畅地缩放，但我不知道如何在调整浏览器大小时使栏按比例调整大小。它在不同的浏览器尺寸下都能正常工作，但到目前为止，如果你调整浏览器的大小，栏的宽度保持不变，直到它到达浏览器的边缘并再次将自身设置为 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:34:41.553

考虑使用百分比宽度。计算它应该被填充的百分比，适当地调整 div 到窗口的大小（通过在 JS 中手动重新计算它的大小并更新它或纯 CSS）并让浏览器处理所有缩放。只是一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:35:03.057

在没有看到所有代码的情况下很难判断，但听起来你只需要使用 % 宽度而不是固定宽度。

让你 loader con 100% 宽度和 display:block; 这将使它流畅地调整到屏幕大小。然后，当您再次填充使用百分比时。

# php - 如何从 PHP 中的函数访问 while 循环中的变量？

> ID：11416790
> 
> 赞同：0
> 
> 时间：2012-07-10T15:31:22.450
> 
> 标签：php, variables, while-loop

我想`$name`在一个名为`sendMail`. 我是否必须以某种方式将函数合并到循环中？

```
<?php
while ($row = mysql_fetch_assoc($result))
{
    print_r($row); echo "<br><br>";
    $name = $row['Name'];
    $date = $row['sDate'];
    $time = $row['sTime'];
    $phone = $row['Phone'];

    $email = $row['Email'];
    sendMail($row['Email']);

    $company = $row['Company'];
    $course = $row['Course'];
    $ref = $row['Reference'];
    $optout = $row['optout'];

    echo "<tr bgcolor=#ABB5F6>
    <td>$name</td>
    <td>$date</td>
    <td>$time</td>
    <td>$phone</td>
    <td>$email</td>
    <td>$company</td>
    <td>$course</td>
    <td>$ref</td>
    <td>$optout</td>
    </tr>";
}

// Mail to $to and $emailarray recipients
function sendMail($to)
{
    $subject = 'Test mail';
    $message = 'Hello'.$name; // I want $name from the while loop
    $headers = array();
    $headers[] = "From:" . "myemail@email.com";
    $headerz = implode("\r\n", $headers);

    mail($to, $subject, $message, $headerz);
}

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T15:33:45.873

要么`sendMail()`接受一个数组（即`$row), or add another parameter to`sendMail() `which is called`$name` 并将其传入。

IE。

```
function sendMail($to, $name) 
```

称为：

```
sendMail($row['Email'], $row['Name']); 
```

该参数可能是最简单的，不要走全局路径。我建议也不要使用数组，因为格式是未定义的，并且如果您的表结构可以更改，则可能会更改。如果您要使用`mysql_fetch_object`强定义的类，那么这将是最可接受的解决方案（当然，也使用 PDO/MySQLi）......特别是如果您计划在`$row`未来扩展以使用更多数据.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T15:33:49.093

为什么不直接将 $name 传递给函数 sendMail：

```
// Mail to $to and $emailarray recipients
function sendMail($to, $name)
{
    $subject = 'Test mail';
    $message = 'Hello'.$name; // I want $name from the while loop
    $headers = array();
    $headers[] = "From:" . "myemail@email.com";
    $headerz = implode("\r\n", $headers);

    mail($to, $subject, $message, $headerz);
} 
```

然后用 name 变量调用 sendMail 函数？

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-10T15:34:04.547

为什么不直接通过呢？

```
function sendMail($to, $name); 
```

并打电话

```
sendMail($row['Email'], $row['name']); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T15:42:35.917

为了让您的代码正常工作，我已经进行了必要的更改。

```
<?php
            while ($row = mysql_fetch_assoc($result))
            {
                print_r($row); echo "<br><br>";
                $name = $row['Name'];
                $date = $row['sDate'];
                $time = $row['sTime'];
                $phone = $row['Phone'];

                $email = $row['Email'];

                // i added name as a parameter
                sendMail($row['Email'],$name);

                $company = $row['Company'];
                $course = $row['Course'];
                $ref = $row['Reference'];
                $optout = $row['optout'];

                echo "<tr bgcolor=#ABB5F6>
                <td>$name</td>
                <td>$date</td>
                <td>$time</td>
                <td>$phone</td>
                <td>$email</td>
                <td>$company</td>
                <td>$course</td>
                <td>$ref</td>
                <td>$optout</td>
                </tr>";

            }

            // Mail to $to and $emailarray recipients
            // i added name as a parameter
            function sendMail($to,$name)
            {
                $subject = 'Test mail';
                $message = 'Hello'.$name; // I want $name from the while loop
                $headers = array();
                $headers[] = "From:" . "myemail@email.com";
                $headerz = implode("\r\n", $headers);

                mail($to, $subject, $message, $headerz);
            }

            ?> 
```

# grails - 什么决定了 .grails 目录的位置？

> ID：11416792
> 
> 赞同：6
> 
> 时间：2012-07-10T15:31:27.263
> 
> 标签：grails

我想更改 .grails 目录的位置。我已阅读有关使用[工作目录](http://naleid.com/blog/2010/05/07/using-a-unique-grails-working-directory-for-each-mercurial-branch/)的信息，但这不是我想要的。由于某种原因，我的 .grails 目录被放入“管理员”用户文件夹而不是我的用户文件夹中。我该如何纠正？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T15:45:49.790

该`grailsWorkDir`属性控制位置。您可以更改**BuildConfig.groovy**文件中的值。

请参阅 Grails 文档第[5.5 节自定义构建](http://grails.org/doc/latest/guide/commandLine.html#buildCustomising)：

![Grails 构建属性](../Images/87cce7b468e8923c92a79b9075329949.png)

* * *

Java 和`user.home`Windows 中的属性存在问题。有关更多详细信息，请参阅此 SO 问题：

[Java user.home 被设置为 %userprofile% 并且没有被解析](https://stackoverflow.com/questions/2134338)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T10:58:29.690

尝试`user.home`在 Windows 环境中正确设置 JVM arg

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T20:49:39.530

在 Windows 7 上，注册表路径“HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer”中“Shell 文件夹”和“用户 Shell 文件夹”的注册表值会影响 user.home，进而影响“ .grails”文件夹。

# ruby-on-rails - 即使使用 gem update rails 命令也无法更新 rails 版本

> ID：11416793
> 
> 赞同：1
> 
> 时间：2012-07-10T15:31:29.270
> 
> 标签：ruby-on-rails, ruby, rubygems, ubuntu-12.04

我正在尝试构建我`rails fist_app`在终端中编写命令的 ROR 应用程序。我没有`gemfile`在文件夹中找到`fist_app`。戴上眼镜后，发现[Stackoverflow 回答](https://stackoverflow.com/questions/5896137/could-not-locate-gemfile-after-executing-bundle-install)了这个问题，建议更新 rails。

但是当我更新 rails 版本时，它没有显示任何更新。这是一个屏幕截图。![在此处输入图像描述](../Images/0fb254d3a063337b7d7d17d258574ac3.png)

请为此问题提出一些解决方案。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:45:17.990

您已将 rails 安装为 Ubuntu 软件包，而不是 gem，因此您无法对其进行更新。卸载 rails 包 ( `sudo apt-get remove rails`)，然后将其作为 gem 重新安装：`gem install rails`.

**更新：**我不是 100% 确定它会起作用，因为`gem`它也作为 Ubuntu 包安装。最好通过 RVM 设置所有内容（ruby、gem 和 rails）。这是一个教程：[http ://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/](http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/)

# asp.net - 电话号码上的自定义验证器及其更多信息

> ID：11416794
> 
> 赞同：1
> 
> 时间：2012-07-10T15:31:34.737
> 
> 标签：asp.net, vb.net, webforms, customvalidator

我正在寻找一个可以`CustomValidator`详细解释的好网站。如果有人有去请告诉我。以下代码检查结果中是否至少有 10 个数字。但是，我也希望它验证这些值是数字。使用`CustomValidator`in`vb.net`有没有办法将其作为“and if”语句来执行？

谢谢

```
Sub AtLeastTenNumbers_ServerValidate(ByVal source As Object, _
ByVal args As System.Web.UI.WebControls.ServerValidateEventArgs)

    If area_code.Text.Length + phone_1.Text.Length + phone_2.Text.Length > 9 Then
        args.IsValid = True
    Else
        args.IsValid = False
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T15:37:52.720

This is a bit of an old article, but Scott Mitchell knows his stuff:

[http://www.4guysfromrolla.com/articles/073102-1.aspx](http://www.4guysfromrolla.com/articles/073102-1.aspx)

> is there a way to do this as an "and if" statement?

You can always nest an if statement inside of your current statement.

```
If area_code.Text.Length + phone_1.Text.Length + phone_2.Text.Length > 9 Then 
    args.IsValid = True 
    'Check to see if this part is numeric
    If IsNumeric(phone_1.Text) Then
       ' Do Logic here
    End If
Else 
    args.IsValid = False 
End If 
```

# objective-c - 设备旋转后视图被压扁和扭曲

> ID：11416795
> 
> 赞同：2
> 
> 时间：2012-07-10T15:31:35.313
> 
> 标签：objective-c, ios, xcode, uiinterfaceorientation, cgrect

我已经阅读这些页面一段时间了，并且在`CGRect`正确加载我的页面时遇到了一些麻烦。我了解到这是因为我在`viewDidLoad`跑步后强制定位，并且我试图让`CGRect`之后再次绘制。基本上，这就是我正在查看的内容：

```
-(void)viewDidLoad
{
    //mybutton.frame = CGRectMake(...);
    //...
}

-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

当视图出现时`CGRect`，由于视图的旋转，它非常被挤压和扭曲。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:10:34.257

您可以从 viewDidLoad 中提取绘图代码并将其提取到它自己的函数中。然后，您可以从 shouldAutorotateToInterfaceOrientation 和 viewDidLoad 中调用该函数。

# encryption - 基于时间的加密算法？

> ID：11416803
> 
> 赞同：14
> 
> 时间：2012-07-10T15:31:51.873
> 
> 标签：encryption

我有一个想法，但我不知道在谷歌中使用什么神奇的词 - 我希望在这里描述这个想法，也许有人会知道我在寻找什么。

假设您有一个数据库。大量数据。它是加密的。我正在寻找的是一种加密，通过该加密进行解密，变量 N 必须在给定时间保持值 M（从第三方获得，如硬件令牌），否则无法解密。

所以想象一下 AES - 好吧，AES 只是一个单一的密钥。如果你有密钥，你就进去了。现在想象一下 AES 以这样一种方式修改，即算法本身需要一个额外的事实，在密钥之上和之外——这个来自外部源的额外数据，以及该数据随时间变化的地方。

这存在吗？它有名字吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-08-15T19:00:48.867

在受信任的第三方的帮助下，这很容易做到。是的，我知道，你可能想要一个不需要的解决方案，但请耐心等待——我们会达到这个目标，或者至少接近那个目标。

无论如何，如果您有合适的可信第三方，这很容易：使用 AES 加密您的文件后，您只需将您的 AES 密钥发送给第三方，让他们[用自己的密钥加密，然后](http://en.wikipedia.org/wiki/Key_wrap)将结果发送给您，并在未来的某个特定时间发布他们的密钥。到那时（但不久之后），任何拥有加密 AES 密钥的人现在都可以解密它并使用它来解密文件。

当然，第三方可能需要大量的密钥加密密钥，每个密钥在不同的时间发布。与其将它们全部存储在磁盘或其他东西上，更简单的方法是让它们根据秘密主密钥和指定的发布时间生成每个密钥加密密钥，例如通过对它们应用合适的[密钥派生函数](http://en.wikipedia.org/wiki/Key_derivation_function)。这样，可以为任何所需的发布日期或时间生成不同且（显然）独立的密钥。

在某些情况下，这种解决方案实际上可能是实用的。例如，“受信任的第三方”可能是具有内置实时时钟和安全外部接口的防篡改[硬件安全模块](http://en.wikipedia.org/wiki/Hardware_security_module)，允许在任何发布日期加密密钥，但仅在已经通过。

* * *

但是，如果受信任的第三方是提供全球服务的远程实体，则将每个 AES 密钥发送给他们进行加密可能是不切实际的，更不用说潜在的安全风险了。在这种情况下，[公钥密码学](http://en.wikipedia.org/wiki/Public-key_cryptography)可以提供一个解决方案：而不是使用[对称加密](http://en.wikipedia.org/wiki/Symmetric_encryption)为了加密文件加密密钥（这将要求他们知道文件加密密钥或发布密钥加密密钥），受信任的第三方可以为每个发布日期生成一个公钥/私钥对并发布公共一半立即删除密钥对，但在指定的发布日期之前拒绝透露私有一半。任何持有公钥的人都可以用它来加密自己的密钥，但在相应的私钥被披露之前，没有人可以解密它们。

（另一种部分解决方案是使用[秘密共享](http://en.wikipedia.org/wiki/Secret_sharing)将 AES 密钥拆分为多个份额，并仅将一个份额发送给第三方进行加密。就像上面描述的公钥解决方案一样，这将避免将 AES 密钥泄露给第三方方，但与公钥解决方案不同，它仍然需要加密器和受信任的第三方之间的双向通信。）

* * *

上述两种解决方案的一个明显问题是，您（以及其他所有相关人员）*确实*需要信任生成密钥的第三方：如果第三方不诚实或被攻击者破坏，他们可以轻松地提前泄露私钥时间。

然而，[Michael Rabin 和 Christopher Thorpe 在 2006 年发表了一种聪明的方法（作者之一](http://www.eecs.harvard.edu/~cat/tlc.pdf)[在 crypto.SE 上的这个答案](https://crypto.stackexchange.com/questions/3064/is-it-possible-to-make-time-locked-encrytion-algorithm/3072#3072)中提到过），至少部分解决了这个问题。诀窍是在由*几个*或多或少值得信赖的第三方组成的网络中[分配密钥生成](http://en.wikipedia.org/wiki/Distributed_key_generation)，即使有限数量的当事人不诚实或受到损害，他们也无法学习私钥，直到获得足够的多数各方同意，确实是释放他们的时候了。

 *Rabin & Thorpe 协议还可以防止受感染方的各种其他可能的攻击，例如试图阻止在指定时间泄露私钥或导致生成的私钥或公钥不匹配。我并没有声称完全理解他们的协议，但是，鉴于它是基于现有和深入研究的密码技术的组合，我认为它没有理由不符合其规定的安全规范。

当然，这里的主要困难在于，要使这些安全规范真正成为有用的东西，您确实*需要*一个足够大的分布式密钥生成器网络，以至于没有一个攻击者可以合理地破坏其中的足够多的密钥生成器。建立和维护这样一个网络[并非易事](https://crypto.stackexchange.com/questions/12580/why-is-time-lapse-cryptography-not-popular)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-22T14:52:04.600

是的，您正在寻找的那种加密存在。它被称为**定时发布加密**，或缩写为**TRE**。这是一篇关于它的论文： http: [//cs.brown.edu/~foteini/papers/MathTRE.pdf](http://cs.brown.edu/~foteini/papers/MathTRE.pdf)

以下是上述论文摘要的摘录：

*现在有各种电子商务应用，例如密封投标拍卖和电子投票，需要对加密数据进行延时解密。文献提供了至少三个主要类别的协议，它们提供了这种定时发布加密 (TRE)。它们要么依赖于强制消息的接收者在能够解密之前解决一些耗时、不可并行的问题，要么依赖于使用负责提供解密所需信息的受信任实体。*

我个人喜欢另一个名字，它是“时间胶囊密码学”，可能是在[crypto.stackoverflow.com 上创造的：时间胶囊密码学？](https://crypto.stackexchange.com/questions/606/time-capsule-cryptography).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-22T10:42:15.193

一个快速的答案是否定的：用于解密数据的密钥不能及时更改，除非您定期解密和重新加密所有数据库（我认为这是不可行的）。

@Ilmari Karonen 建议的解决方案是唯一可行的解​​决方案，但它需要受信任的第三方，此外，一旦获得主 AES 密钥，它就可以在未来重复使用：您不能在该解决方案中使用“一次性垫”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-22T06:18:52.520

如果您希望您的令牌是基于时间的，您可以使用[TOTP 算法](http://en.wikipedia.org/wiki/Time-based_One-time_Password_Algorithm)

TOTP 可以帮助您在给定时间 M 为变量 N（令牌）生成一个值。因此，请求访问您的数据库的服务将附加一个使用 TOTP 生成的令牌。在访问提供者端验证令牌期间，您将根据当前时间验证令牌是否持有正确的值。您需要在两端都有一个共享密钥才能生成相同的 TOTP。

TOTP 的优点是价值随时间变化，一个代币不能重复使用。

我已经为两因素身份验证实现了类似的东西。

“一次性密码”可能是您的谷歌词。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-22T12:39:47.463

我相信您正在寻找的是所谓的公钥加密或公钥加密。google 的另一个好词是“非对称密钥加密方案”。

谷歌那个，我很确定你会找到你要找的东西。欲了解更多信息，[维基百科的文章](http://en.wikipedia.org/wiki/Public-key_cryptography)

这方面的一个例子是：[Diffie-Hellman 密钥交换](http://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange)

编辑（透视） 第二个密钥可以由算法确定，该算法使用特定时间（例如在插入数据时）生成可以存储在另一个位置的第二个密钥。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-22T12:53:38.600

正如其他人指出的那样，一次性密码可能是您提出的方案的一个很好的解决方案。

有一个[用 C# 实现的 OTP](https://code.google.com/p/otpnet/)，您可以查看[https://code.google.com/p/otpnet/](https://code.google.com/p/otpnet/)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-18T11:06:35.323

理想情况下，我们想要一个依赖于时间的生成器，但我不知道今天有任何算法可以做到这一点。

更一般地说，如果 Alice 想让 Bob 在特定时间点知道某事，您可以考虑以下设置：

假设我们有一个公共算法，它有两个参数：一个非常大的随机种子数和算法将花费的预期秒数来找到问题的唯一解决方案。

*   Alice 生成一个大种子。
*   Alice 首先在她的计算机上运行它并计算问题的解决方案。这是关键。她使用此密钥加密消息并将其与种子一起发送给 Bob。
*   Bob 收到消息后，立即使用正确的种子运行算法并找到解决方案。然后他用这个密钥解密消息。

这种方法存在三个缺陷：

*   某些计算机可能比其他计算机更快，因此必须以最小化两台不同计算机之间的差异的方式制定算法。
*   它需要*工作量证明，*这在大多数情况下都可以（你好比特币！）。
*   如果 Bob 有一些延迟，那么他将需要更多时间才能看到这条消息。

但是，如果算法独立于运行它的机器，并且种子足够大，那么可以保证 Bob 在截止日期之前不会看到消息的内容。*

# java - RESTful 容器项模式 - 项 ejb 返回 null

> ID：11416819
> 
> 赞同：0
> 
> 时间：2012-07-10T15:32:54.437
> 
> 标签：java, rest, null, ejb, containers

我正在使用容器项目模式，我有：

**存储用户的**容器：****

 **```
@Path("/user")
@Stateless
public class UsersResource {

@Context
private UriInfo context;
@EJB
private UserBeanLocal userBean;

public UsersResource() {
}

@GET
@Produces("application/json")
public String getJson(@HeaderParam("authorization") String authorization) {
   return userBean.sampleJSON();
}

@Path("{id}")
public UserResource getUserResource(@PathParam("id") String id) {
    return UserResource.getInstance(id);
}
} 
```

**代表单个用户的项目**：

```
@Stateless
public class UserResource {
@EJB
private UserBeanLocal userBean;

private String id;

public UserResource() {
}

private UserResource(String id) {
    this.id = id;
}

public static UserResource getInstance(String id) {
    return new UserResource(id);
}

@GET
@Produces("application/json")
public String getJson() {
    //TODO return proper representation object
    return userBean.sampleJSON();
}
} 
```

**还有豆子。**它只有一种方法：

```
@Local
public interface UserBeanLocal {

String sampleJSON();

}

@Stateless
public class UserBean implements UserBeanLocal {

@Override
public String sampleJSON() {
    return "{\"Name\": \"Jan\", \"Lastname\": \"Węglarz\", \"PESEL\": \"47092412341\"}";
} 
} 
```

**容器中的 EJB 工作正常，但在项目中返回 null。为什么？**

我尝试在 getJson() 中返回其他内容，例如 id，并且没有问题。一切正常。但是当我使用 EJB 返回某些东西时，会出现空异常。

应用程序部署在 jboss 7 上没有任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:54:07.053

那是因为您正在自己创建 UserResource 的实例：

```
return UserResource.getInstance(id); 
```

因为它不是由容器通过 JNDI 查找或注入创建的，所以它不是容器管理的。依赖注入只能发生在容器管理的组件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:48:00.433

我在UsersResource中添加：

```
@EJB
private UserResource userResource; 
```

然后改变：

```
@Path("{id}")
public UserResource getUserResource(@PathParam("id") String id) {
    return userResource;
} 
```

现在它可以工作了。谢谢 ：）**

# android - 无法使用 PhoneGap 运行我的 Sencha Touch 2（Dispatcher.js 上的 FileNotFound）（白屏）

> ID：11416825
> 
> 赞同：0
> 
> 时间：2012-07-10T15:33:21.903
> 
> 标签：android, cordova, sencha-touch, sencha-touch-2

我已经使用 ST2 制作了一个试用应用程序，它在仅使用 ST2 时工作得很好，但是当我尝试使用 PhoneGap 在 android 模拟器上运行这个应用程序时，它似乎无法加载我的 html5/JS ST2 文件并抛出 java.io .FileNotFoundException: www/event/Dispatcher.js ...

结果 -> 白屏

堆栈跟踪：

```
07-10 12:15:52.701: I/CordovaLog(536): Changing log level to DEBUG(3)
07-10 12:15:52.701: I/CordovaLog(536): Found preference for useBrowserHistory=false
07-10 12:15:52.711: D/CordovaLog(536): Found preference for useBrowserHistory=false
07-10 12:15:52.721: D/DroidGap(536): DroidGap.init()
07-10 12:15:52.771: I/dalvikvm(536): threadid=3: reacting to signal 3
07-10 12:15:52.841: D/CordovaWebView(536): >>>loadUrl(file:///android_asset/www/index.html)
07-10 12:15:52.841: D/PluginManager(536): init()
07-10 12:15:52.871: I/dalvikvm(536): Wrote stack traces to '/data/anr/traces.txt'
07-10 12:15:52.891: D/CordovaWebView(536): >>> loadUrlNow()
07-10 12:15:52.921: D/SoftKeyboardDetect(536): Ignore this event
07-10 12:15:53.011: W/webcore(536): java.lang.Throwable: EventHub.removeMessages(int what = 107) is not supported before the WebViewCore is set up.
07-10 12:15:53.011: W/webcore(536):     at android.webkit.WebViewCore$EventHub.removeMessages(WebViewCore.java:1683)
07-10 12:15:53.011: W/webcore(536):     at android.webkit.WebViewCore$EventHub.access$7900(WebViewCore.java:926)
07-10 12:15:53.011: W/webcore(536):     at android.webkit.WebViewCore.removeMessages(WebViewCore.java:1795)
07-10 12:15:53.011: W/webcore(536):     at android.webkit.WebView.sendOurVisibleRect(WebView.java:2917)
07-10 12:15:53.011: W/webcore(536):     at android.webkit.ZoomManager.setZoomScale(ZoomManager.java:593)
07-10 12:15:53.011: W/webcore(536):     at android.webkit.ZoomManager.access$1700(ZoomManager.java:49)
07-10 12:15:53.011: W/webcore(536):     at android.webkit.ZoomManager$PostScale.run(ZoomManager.java:984)
07-10 12:15:53.011: W/webcore(536):     at android.os.Handler.handleCallback(Handler.java:605)
07-10 12:15:53.011: W/webcore(536):     at android.os.Handler.dispatchMessage(Handler.java:92)
07-10 12:15:53.011: W/webcore(536):     at android.os.Looper.loop(Looper.java:137)
07-10 12:15:53.011: W/webcore(536):     at android.app.ActivityThread.main(ActivityThread.java:4424)
07-10 12:15:53.011: W/webcore(536):     at java.lang.reflect.Method.invokeNative(Native Method)
07-10 12:15:53.011: W/webcore(536):     at java.lang.reflect.Method.invoke(Method.java:511)
07-10 12:15:53.011: W/webcore(536):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-10 12:15:53.011: W/webcore(536):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-10 12:15:53.011: W/webcore(536):     at dalvik.system.NativeStart.main(Native Method)
07-10 12:15:53.011: D/SoftKeyboardDetect(536): Ignore this event
07-10 12:15:53.041: D/gralloc_goldfish(536): Emulator without GPU emulation detected.
07-10 12:15:53.441: D/DroidGap(536): onMessage(onPageStarted,file:///android_asset/www/index.html)
07-10 12:15:53.631: D/dalvikvm(536): GC_CONCURRENT freed 181K, 4% free 9316K/9607K, paused 6ms+4ms
07-10 12:15:56.681: E/generateWebResourceResponse(536): www/event/Dispatcher.js
07-10 12:15:56.681: E/generateWebResourceResponse(536): java.io.FileNotFoundException: www/event/Dispatcher.js
07-10 12:15:56.681: E/generateWebResourceResponse(536):     at android.content.res.AssetManager.openAsset(Native Method)
07-10 12:15:56.681: E/generateWebResourceResponse(536):     at android.content.res.AssetManager.open(AssetManager.java:315)
07-10 12:15:56.681: E/generateWebResourceResponse(536):     at org.apache.cordova.CordovaWebViewClient.generateWebResourceResponse(CordovaWebViewClient.java:492)
07-10 12:15:56.681: E/generateWebResourceResponse(536):     at org.apache.cordova.CordovaWebViewClient.shouldInterceptRequest(CordovaWebViewClient.java:465)
07-10 12:15:56.681: E/generateWebResourceResponse(536):     at android.webkit.CallbackProxy.shouldInterceptRequest(CallbackProxy.java:1078)
07-10 12:15:56.681: E/generateWebResourceResponse(536):     at android.webkit.BrowserFrame.shouldInterceptRequest(BrowserFrame.java:951)
07-10 12:15:56.681: E/generateWebResourceResponse(536):     at android.webkit.JWebCoreJavaBridge.nativeServiceFuncPtrQueue(Native Method)
07-10 12:15:56.681: E/generateWebResourceResponse(536):     at android.webkit.JWebCoreJavaBridge.handleMessage(JWebCoreJavaBridge.java:113)
07-10 12:15:56.681: E/generateWebResourceResponse(536):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-10 12:15:56.681: E/generateWebResourceResponse(536):     at android.os.Looper.loop(Looper.java:137)
07-10 12:15:56.681: E/generateWebResourceResponse(536):     at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:728)
07-10 12:15:56.681: E/generateWebResourceResponse(536):     at java.lang.Thread.run(Thread.java:856)
07-10 12:15:56.721: E/generateWebResourceResponse(536): www/event/publisher/Dom.js
07-10 12:15:56.721: E/generateWebResourceResponse(536): java.io.FileNotFoundException: www/event/publisher/Dom.js
07-10 12:15:56.721: E/generateWebResourceResponse(536):     at android.content.res.AssetManager.openAsset(Native Method)
07-10 12:15:56.721: E/generateWebResourceResponse(536):     at android.content.res.AssetManager.open(AssetManager.java:315)
07-10 12:15:56.721: E/generateWebResourceResponse(536):     at org.apache.cordova.CordovaWebViewClient.generateWebResourceResponse(CordovaWebViewClient.java:492)
07-10 12:15:56.721: E/generateWebResourceResponse(536):     at org.apache.cordova.CordovaWebViewClient.shouldInterceptRequest(CordovaWebViewClient.java:465)
07-10 12:15:56.721: E/generateWebResourceResponse(536):     at android.webkit.CallbackProxy.shouldInterceptRequest(CallbackProxy.java:1078)
07-10 12:15:56.721: E/generateWebResourceResponse(536):     at android.webkit.BrowserFrame.shouldInterceptRequest(BrowserFrame.java:951)
07-10 12:15:56.721: E/generateWebResourceResponse(536):     at android.webkit.JWebCoreJavaBridge.nativeServiceFuncPtrQueue(Native Method)
07-10 12:15:56.721: E/generateWebResourceResponse(536):     at android.webkit.JWebCoreJavaBridge.handleMessage(JWebCoreJavaBridge.java:113)
07-10 12:15:56.721: E/generateWebResourceResponse(536):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-10 12:15:56.721: E/generateWebResourceResponse(536):     at android.os.Looper.loop(Looper.java:137)
07-10 12:15:56.721: E/generateWebResourceResponse(536):     at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:728)
07-10 12:15:56.721: E/generateWebResourceResponse(536):     at java.lang.Thread.run(Thread.java:856)
07-10 12:15:56.731: D/chromium(536): Unknown chromium error: -6
07-10 12:15:56.731: D/chromium(536): Unknown chromium error: -6
07-10 12:15:56.731: D/Cordova(536): onPageFinished(file:///android_asset/www/index.html)
07-10 12:15:56.731: D/CordovaWebView(536): >>> loadUrlNow()
07-10 12:15:56.731: D/DroidGap(536): onMessage(onNativeReady,null)
07-10 12:15:56.731: D/DroidGap(536): onMessage(onPageFinished,file:///android_asset/www/index.html)
07-10 12:15:56.911: I/SqliteDatabaseCpp(536): sqlite returned: error code = 14, msg = cannot open file at line 27701 of [8609a15dfa], db=/data/data/clearitm.mobility.hellosenchacordova/databases/webview.db
07-10 12:15:56.911: I/SqliteDatabaseCpp(536): sqlite returned: error code = 14, msg = os_unix.c: open() at line 27701 - "" errno=2 path=/CachedGeoposition.db, db=/data/data/clearitm.mobility.hellosenchacordova/databases/webview.db
07-10 12:15:57.042: D/DroidGap(536): onMessage(networkconnection,3g)
07-10 12:15:58.789: D/DroidGap(536): onMessage(spinner,stop) 
```

index.html 代码：

```
<!DOCTYPE html>
<html>
<header>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Sencha Touch 2 Teste</title>
      <link rel="stylesheet" href="sencha-touch.css" type="text/css">
      <script type="text/javascript" src="sencha-touch.js"></script>
      <script type="text/javascript" charset="utf-8" src="cordova-1.9.0.js"></script>
  <script type="text/javascript" charset="utf-8" src="app/app.js"></script>
</header>
<body>
</body>
</html> 
```

应用程序.js：

```
Ext.Loader.setConfig({
    enable: true
});

Ext.application({

    name:'Touch2Demo',

    views: [
        'ContatosList',
        'ContatosForm'
    ],

    models: [
        'Contato'
    ],

    controllers: [
        'Main'
],

stores: [
    'Contatos'
],

viewport:{
    layout:{
        type: 'card',
        animation: {
            type: 'slide',
            duration: 1000
        }
    }
},

launch: function(){

}

}); 
```

主要的java类：

```
import org.apache.cordova.DroidGap;
import android.os.Bundle;

public class HelloSenchaCordovaActivity extends DroidGap {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");
    }
} 
```

资产文件夹结构：

```
 assets>
           www>
               app>
                   app.js
                   controller
                   data
                   model
                   profile
                   store
                   view
               sencha>
                      resources>
                      sencha-touch.js
               cordova-1.9.0.js
               sencha-touch.js
               sencha-touch.css
               index.html 
```

我已经搜索了有关此类问题的其他问题，但这些解决方案都没有解决我的问题：/关于这里有什么问题的任何线索？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:11:26.743

设法让它工作，问题是我在使用 sencha-touch.js 时应该使用 sencha-touch-all.js :) 现在它的工作就像一个魅力，我希望这可以帮助其他人遇到这样的问题。

# wordpress - 如何使用 Blogger API 拉取 Wordpress 博客数据

> ID：11416830
> 
> 赞同：2
> 
> 时间：2012-07-10T15:33:30.277
> 
> 标签：wordpress, web-applications, google-api, blogger, google-data-api

Wordpress 提到它支持 Blogger API（[链接](http://codex.wordpress.org/XML-RPC_Blogger_API)）。那么，谁能告诉我如何使用 Blogger API（使用 python）v3 来提取 wordpress 公共博客数据。

或者，是否有任何 wordpress API 可以从其博客中提取公共数据？（语言：Python）。

任何清楚解释该程序的有用文档也将不胜感激。

# vba - 复制列中的所有单元格

> ID：11416831
> 
> 赞同：0
> 
> 时间：2012-07-10T15:33:32.350
> 
> 标签：vba, excel, excel-2007

我有一张有 200 行的表格，中间有一些空白。

我无法使用`End(xlDown)`或`End(xlUp)`获取整个范围，因为有空白行。

如何复制到最后一个在列中有数据的范围？

另外，我不想复制标题。

请建议我如何在 Excel VBA 中做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T16:03:20.277

复制它们的最佳方法是使用自动过滤器并在空白处过滤它们，然后复制可见范围

例如

```
Sub Sample()
    Dim ws As Worksheet
    Dim lRow As Long
    Dim rngToCopy As Range, rRange As Range

    Set ws = Sheets("Sheet1")

    With ws
        lRow = .Range("A" & .Rows.Count).End(xlUp).Row

        Set rRange = .Range("A1:A" & lRow)

        '~~> Remove any filters
        .AutoFilterMode = False

        With rRange 'Filter, offset(to exclude headers) and copy visible rows
            .AutoFilter Field:=1, Criteria1:="<>"
            Set rngToCopy = .Offset(1, 0).SpecialCells(xlCellTypeVisible).EntireRow
        End With

        '~~> Remove any filters
        .AutoFilterMode = False

        rngToCopy.Copy

        '
        '~~> Rest of the Code
        '
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T15:38:21.017

You can get the last used row in column A of the active sheet with the code below (it works also if you have blank cells in the middle of the column) - amend as required if you need to run it on a different sheet / column.

```
With ActiveSheet
    lastRow = .Range("A" & .Rows.Count).End(xlUp).Row
    .Range("A2:A" & lastRow).Copy 'copies column A used range, excluding header row
End With 
```

# csv - MS Access 2007：如何将 csv 文件及其 csv 数据导入到只有列标题的 mdb 表中？

> ID：11416832
> 
> 赞同：0
> 
> 时间：2012-07-10T15:33:36.130
> 
> 标签：csv, ms-access-2007

列标题在 db 中并与文件的 csv 列匹配的位置。在导入器向导结束时我收到 2 个错误消息弹出窗口：1) 压缩现有表 'table_name' 和一个是/否选择。我选择'是'，然后2）“不可能替换表'table_name'”

CSV 文件与列号中的表匹配，它只包含填充行的数据，不包含标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:18:57.597

使用excel解决问题。

抱歉，在下次发布之前，我会试着考虑一下我真正想要做什么——我真的只是想将 CSV 文件中的数据与 Access 表中的标题相匹配。感谢那些试图提供帮助的人，我能够将两者都导入到 excel 中以匹配它们。

# php - PHP mysql 刷新选择数据

> ID：11416835
> 
> 赞同：0
> 
> 时间：2012-07-10T15:33:43.270
> 
> 标签：php, mysql, if-statement

一些代码从选择数据开始，然后检查要插入的行号是否为 0，然后继续正常过程。问题是正常过程取决于`select`不存在的语句，因为它存储在`insert`. 如何在没有 ajax 或与 html 相关的任何内容的情况下刷新 PHP 内部的数据请求？下面是一个例子来解释：

```
$user = $_GET['user']; // not stored user
$select = mysql_query("SELECT * FROM `table` WHERE username = ".$user);
$row = mysql_fetch_array($select);
$rownum = mysql_num_rows($select);
if(!$rownum){
     mysql_query("INSERT INTO table (username, something) VALUES ('$user', 1)");
}

/* Here comes the problem */
if($row['something'] == 0){
   die("Not found !"); // THIS if returns true since it was not found at first place before inserting 
                      // i want it to refresh the $select data so it could be read as 1

} 
```

到目前为止，我如何解决它是通过重复使用语句下方的`$select`and代码`$row``insert`

```
if(!$rownum){
     mysql_query("INSERT INTO table (username, something) VALUES ('$user', 1)");
}
$select = mysql_query("SELECT * FROM `table` WHERE username = ".$user);
$row = mysql_fetch_array($select);
   [..] 
```

我想要一个更简单的方法来做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:56:50.363

如果您知道新创建的记录中有什么，您可以创建一个新数组 $row=array('username'->'bob', ...);

但是，如果您在表中有默认值，或者稍后添加其他内容，您将不得不进行第二次选择。

```
$user=urldecode($_GET['user']);
$result=mysql_query("SELECT * FROM `table` WHERE username='".mysql_real_escape_string($user)."'");
if(!$result) die("SQL ERROR");

if(mysql_num_rows($result)>0)
{
    $row = mysql_fetch_array($select);
}
else
{
    mysql_query("INSERT INTO table (username, something) VALUES ('".mysql_real_escape_string($user)."', 1)");

    $result=mysql_query("SELECT * FROM `table` WHERE username='".mysql_real_escape_string($user)."'");
    if(!$result) die("SQL ERROR");
    if(mysql_num_rows($result)==0) die("MAJOR ERRORS IN SQL");

    $row = mysql_fetch_array($result);
} 
```

我更喜欢使用 $result 因为这是您运行查询的结果。

# iphone - 我的应用程序在尝试获取 URL 内容时崩溃

> ID：11416841
> 
> 赞同：0
> 
> 时间：2012-07-10T15:33:54.197
> 
> 标签：iphone, objective-c, web, nsstring

当 nsstring 获取 URL 的内容时，我的应用程序崩溃了。

```
website = [NSString stringWithFormat:@"hidden."]; 
contents = [NSString stringWithContentsOfURL:[NSURL URLWithString:website] encoding:NSUTF8StringEncoding error:nil]; 
```

崩溃日志是：

```
void _WebThreadLockFromAnyThread(bool), 0x865cc40: Obtaining the web lock from a thread other than the main thread or the web thread. UIKit should not be called from a secondary thread.
2012-07-10 11:15:17.654 MyApplication[1505:19407] OK // some output
2012-07-10 11:15:17.660 MyApplication[1505:19407] bool _WebTryThreadLock(bool), 0x865cc40: Tried to obtain the web lock from a thread other than the main thread or the web thread. This may be a result of calling to UIKit from a secondary thread. Crashing now...
1   WebThreadLock
2   -[UITextRangeImpl isEmpty]
3   -[UITextRange(UITextSelectionAdditions) _isCaret]
4   -[UITextSelectionView setCaretBlinks:]
5   -[UIKeyboardImpl setCaretBlinks:]
6   -[UIKeyboardImpl setDelegate:force:]
7   -[UIKeyboardImpl setDelegate:]
8   -[UIPeripheralHost(UIKitInternal) _reloadInputViewsForResponder:]
9   -[UIResponder(UIResponderInputViewAdditions) reloadInputViews]
10  -[UIResponder(Internal) _windowBecameKey]
11  -[UITextField _windowBecameKey]
12  -[UIWindow makeKeyWindow]
13  -[UIWindow makeKeyAndVisible]
14  -[MyApplicationAppDelegate checkLogin]
15  -[NSThread main]
16  __NSThread__main__
17  _pthread_start
18  thread_start 
```

`[self performSelectorInBackground:@selector(checkLogin) withObject:nil];`使用from调用代码`IBAction`。我做错了什么？

（Xcode 4.3、Mac OS X Lion、iPhone 模拟器 5.1）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T15:37:12.530

根据该错误消息，您正在尝试`UIKit`从后台线程更新对象，而 UI 只能从主线程更新。

相反，使用`self performSelectorOnMainThread`回调到主线程以使用您在网络调用返回时收到的任何信息更新您的 UI。

从你的主线程：

```
[self performSelectorInBackground:@selector(checkLogin) withObject:nil]; 
```

在后台：

```
- (void)checkLogin {
    // Do web stuff
    ...

    [self performSelectorOnMainThread:@selector(updateUI) 
                           withObject:nil 
                        waitUntilDone:NO];
}

- (void)updateUI {
    [statusLabel setText:@"Done!"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:43:25.290

尝试使用

```
 - (id)performSelector:(SEL)aSelector withObject:(id)anObject. 
```

# c++ - 仅当 C++ 中的某些内容处于活动状态时才具有额外的数据成员

> ID：11416846
> 
> 赞同：1
> 
> 时间：2012-07-10T15:34:19.523
> 
> 标签：c++

我有一个队列的实现，类似于`template <typename T> queue<T>`a `struct QueueItem { T data;}`，并且我有一个单独的库，用于计算数据在不同位置的传递（包括通过这个队列从一个生产者线程到消费者线程）。为了做到这一点，我将该计时库中的代码插入到队列的推送和弹出函数中，这样当他们分配 a 时，`BufferItem.data`他们还分配了一个额外的成员，我添加的类型`void*`为该库中的一些计时元数据。即曾经是这样的：

```
void push(T t)
{
  QueueItem i;
  i.data = t;
  //insert i into queue
} 
```

变成了

```
void push(T t)
{
  QueueItem i;
  i.data = t;

  void* fox = timinglib.getMetadata();
  i.timingInfo = fox;
  //insert i into queue
} 
```

QueueItem 从

```
struct QueueItem
{
 T data;
} 
```

到

```
struct QueueItem
{
  T data;
  void* timingInfo;
} 
```

然而，我想要实现的是，当时序库未激活时，能够换出后一个结构以支持更轻量的结构。就像是：

```
if timingLib.isInactive()
 ;//use the smaller struct QueueItem
else
 ;//use the larger struct QueueItem 
```

尽可能便宜。什么是这样做的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:24:28.343

显然，您不能同时拥有一个既大又小的结构，因此您将不得不查看某种形式的继承或指针/引用或联合。

如果 T 中有可能被您的时间信息占用的“备用”数据，联合将是您的理想选择。如果不是，那么它将和原版一样“沉重”。

使用继承也可能和原来的一样大，因为它会在其中添加一个 vtable，这会过多地填充它。

因此，下一个选项是仅存储一个指针，并将该指针指向您要存储的数据，无论是数据还是数据+计时。这种模式被称为“[享](http://en.wikipedia.org/wiki/Flyweight_pattern)元”——公共数据与被操作的对象分开存储。这可能是您正在寻找的（取决于时间信息元数据是什么）。

另一种更复杂的替代方法是让 2 个队列保持同步。您将数据存储在一个中，另一个存储相关的时间信息（如果启用）。如果未启用，则忽略第二个队列。这样做的问题是确保两者保持同步，但这是一个组织问题，而不是技术挑战。也许在内部创建一个包含 2 个真实队列的新 Queue 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:48:38.560

我将首先确认我的假设，即这需要作为运行时选择，并且您不能只构建两个启用/禁用时间的不同二进制文件。这种方法尽可能多地消除任何方法的开销。

所以现在让我们假设我们想要不同的运行时行为。需要有运行时决策，所以有几个选项。如果您可以摆脱多态性的（相对较小的）成本，那么您可以使您的队列多态并在启动时创建适当的实例，然后`push`例如它会或不会添加额外的数据。

但是，如果这不是一个选项，我相信您可以使用模板来帮助完成您的任务，尽管可能会有一些前期工作，并且可能会通过额外的代码增加二进制文件的大小。

您从一个模板开始，为课程添加时间：

```
template <typename Timee>
struct Timed : public Timee
{
    void* timingInfo;
}; 
```

然后一个定时的 QueueItem 看起来像：

```
Timed<QueueItem> timed_item; 
```

对于任何不关心时间的东西，这个类看起来完全像一个`QueueItem`: 它会自动向上转换或切片到父级。如果一个方法需要知道计时信息，您要么创建一个知道要为 a 做什么的重载，要么进行`Timed<T>`运行时检查（对于“是否启用计时”标志）并向下转换为正确的类型。

接下来，您需要更改您的`Queue`实例化以了解它使用的是基础版本`QueueItem`还是`Timed`版本。例如，一个可能机制的非常非常粗略的草图：

```
template <typename Element>
void run()
{
    Queue<Element> queue;

    queue.setup();
    queue.process();
}

int main()
{
    if(do_timing)
    {
        run<Timed<QueueItem> >();
    }
    else
    {
        run<QueueItem>();
    }

    return 0;
} 
```

`Queue`当与项目一起使用时，您“可能”需要专门化，`Timed`除非获取元数据是无状态的，在这种情况下，`Timed`构造函数可以收集信息并在创建时自行填充。然后`Queue`保持不变并依赖于您使用的实例化。

# javascript - Javascript中的顺序动画

> ID：11416850
> 
> 赞同：1
> 
> 时间：2012-07-10T15:34:32.620
> 
> 标签：javascript, animation, sequential

我正在尝试使用 HTML5 画布和 Javascript 创建动画。我对Javascript的先验知识很少。动画的第一部分是让一个圆圈“长大”，直到边缘接触到一个十字。然后十字架沿着圆的边缘移动。单独地，这些部分工作正常，但是，当我使用`setInterval()`时，两个动画同时播放，而不是等待第一个完成后再开始第二个。

最简单的方法是什么？我很乐意使用 HTML 按钮，但`<button onclick="setInterval(aRot,30);">Next Step</button>`似乎不起作用。

[在http://jsfiddle.net/jtYkN/12/](http://jsfiddle.net/jtYkN/12/)可以查看我的“糟糕”的代码奇葩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:54:12.463

首先，您真的想使用[requestAnimationFrame](https://developer.mozilla.org/en/DOM/window.requestAnimationFrame)而不是 setInterval。它专为动画制作。[根据保罗爱尔兰](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)..

> **我为什么要使用它？**
> 
> 浏览器可以将并发动画一起优化为单个回流和重绘循环，从而获得更高保真度的动画。例如，与 CSS 过渡或 SVG SMIL 同步的基于 JS 的动画。此外，如果您在不可见的选项卡中运行动画循环，浏览器将不会继续运行，这意味着 CPU、GPU 和内存使用量减少，从而延长电池寿命。

以下是我将如何实现您所说的内容

```
// all credit to paul irish on this part
window.requestAnimFrame = (function(){
  return  window.requestAnimationFrame       || 
          window.webkitRequestAnimationFrame || 
          window.mozRequestAnimationFrame    || 
          window.oRequestAnimationFrame      || 
          window.msRequestAnimationFrame     || 
          function( callback ){
            window.setTimeout(callback, 1000 / 60);
          };
})();

function growCircle () {
  // code to make the circle bigger
}

function rotateCross() {
  // code to make the cross rotate
}

(function animate(){
  requestAnimFrame(animate);
  if ( /* code to tell if the circle has finished growing */ ) {
    rotateCross();
  } else {
    growCircle();
  }
})(); 
```

# java - eclipse android更新错误

> ID：11416858
> 
> 赞同：0
> 
> 时间：2012-07-10T15:34:54.390
> 
> 标签：java, android, eclipse

我昨天从 eclipse 更新了我的 android SDK，然后去进行 eclipse 更新并得到了这个错误：

在“更新软件”期间发生内部错误。

```
Profile SDKProfile is not current. Expected timestamp 1341934208292 but was 1341934208292. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:36:47.670

检查此[错误讨论](https://bugs.eclipse.org/bugs/show_bug.cgi?id=269468)是否可以帮助您。

# spring - JSR 303 为级联 @valid 设置自定义验证器

> ID：11416859
> 
> 赞同：1
> 
> 时间：2012-07-10T15:34:54.987
> 
> 标签：spring, hibernate, bean-validation, customvalidator

我想验证另一个表单对象中包含的表单对象。我有这样的事情：

```
@Controller
public class FormController {
    @RequestMapping(method = RequestMethod.POST)
    public void process(@ModelAttribute("form") @Valid FormObject formObject, 
                              BindingResult result) {
            ...
        @InitBinder("form")
        protected void initBinder(WebDataBinder binder) {
             binder.setValidator(customFormValidator);
        }
    }

public class FormObject {
    @Valid
    private FormObject2 formObject2;
}

// This is the class that needs to be validated.
public class FormObject2 {
    @NotEmpty
    private String name;
}
} 
```

我遇到的问题是我希望对象 formObject2 由另一个自定义验证器（例如“customFormValidator2”）验证，但我找不到如何注册它。如果我让它这样，spring 验证器将验证第二种形式。

我已经尝试在 customFormValidator 内部验证第二个表单，但是第二个表单中的错误路径与第一个表单无关，我无法在 jsp 页面中显示错误。

我已经像这样构造了我的表单对象，因为我可能需要在其他表单中使用第二个表单，通过这样做，我使它更加模块化。

我想做的事有可能吗？你有更好的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T06:33:54.773

您可以使用自定义验证器进行`form Object2`验证

```
 public void process(@ModelAttribute("form") @Valid FormObject formObject, 
                              BindingResult result) {
customFormValidator2.validate(formObject.getFormObject2(), result);  
} 
```

并删除`@Valid`以删除 JSR 验证

```
public class FormObject {
 //   @Valid REMOVE THIS
     private FormObject2 formObject2;
} 
```

您也可以将路径属性用于嵌套类，例如

```
<form:input path="formObject2.any_property_name"> 
```

您也可以对错误使用相同的路径而不会出现任何问题。
检查此[链接](http://forum.springsource.org/showthread.php?34357-form-tag-s-path-attribute)以获取更多详细信息。

# c - 在 C 中读取文件

> ID：11416864
> 
> 赞同：1
> 
> 时间：2012-07-10T15:35:05.760
> 
> 标签：c, file

我有这段代码可以从文件中读取整数。我使用相同的代码从另一个文件中读取双精度并完美运行，但这次循环变得无限。可能是什么？我正在阅读的文件是由程序编写的，可以吗？我不知道这是什么意思，但我的操作系统说该文件是二进制文件。好吧，任何帮助将不胜感激。谢谢。

```
i=1;
cadeia = malloc ( i * sizeof(int) );
if (!cadeia){ //Avalia se a alocação de memória foi bem sucedida
  printf("Problema na alocação de memória para cadeia.");
  exit(0);
}
while ( !feof( arq_cadeia ) ){ /*Fazendo leitura e alocação de memória da matriz de transição*/
   fscanf ( arq_cadeia , "%d" , ( cadeia+i-1 ) );
   i++;
   cadeia = realloc ( cadeia , i * sizeof( int ) );
   if (!cadeia){ //Avalia se a alocação de memória foi bem sucedida
  printf("Problema na alocação de memória para cadeia.");
  exit(0);
   }
   printf("%d\n", *( cadeia+i-1 ));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:40:32.437

您的预感是正确的，如果您的文件是二进制格式`scanf`，则无法读取它。如果您无法使用文本编辑器（例如记事本）查看数字，`scanf`也无法阅读它们。

顺便说一句，您的程序还有其他问题：每次读取数字时重新分配整个数组的效率非常低！最简单的事情是分配这么多的空间，你不会需要它（不要担心“浪费”，只要你不超过顶部）。第二个最简单的方法是测量文件的大小（你需要`stat`或一些这样的）并估计其中的整数数量。第三个最简单的方法，为 10000 个整数分配足够的空间，并仔细检查何时将用完并分配两倍于已有的整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:40:34.667

您正在读取整数，假设它们是以文本模式编写的。检查文件是文本文件还是二进制文件，正如您所怀疑的那样。如果你可以用文本编辑器打开它并阅读内容，那么它就是一个文本文件。否则，您需要调整程序才能读取二进制文件。

# android - 市场上的安卓应用程序

> ID：11416870
> 
> 赞同：2
> 
> 时间：2012-07-10T15:35:32.920
> 
> 标签：android, google-play

如果我从 android 市场（Play 商店）取消发布我的应用程序，我的应用程序会从用户设备上卸载吗？是否有可能从设备上卸载我的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:59:27.860

只有 Google 可以追溯性地从设备中删除安装应用程序（在恶意软件应用程序的情况下）。这不是您作为开发人员可以做的事情。即使使用您自己的应用程序。

如果您取消发布您的应用程序，它将不会从任何已安装它的设备上卸载。他们也无法从市场上重新安装它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:40:34.037

不可以。如果用户安装了您的应用程序，则可以自行决定是否卸载；即使您已从 Play 商店取消发布。

# projection - 点云：将城市广场投影到地平面

> ID：11416871
> 
> 赞同：0
> 
> 时间：2012-07-10T15:35:38.117
> 
> 标签：projection, point-cloud-library

我有一个城市广场，里面有 pcl 格式的人、汽车、树木和建筑物。我需要自动确定地平面并将这些对象投影到该地平面上，以获得包含被占用位置的 2D 地图。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:47:45.947

我认为最好的办法是熟悉以下两个 PCL 教程：

[http://pointclouds.org/documentation/tutorials/planar_segmentation.php](http://pointclouds.org/documentation/tutorials/planar_segmentation.php)

[http://pointclouds.org/documentation/tutorials/project_inliers.php](http://pointclouds.org/documentation/tutorials/project_inliers.php)

第一个教程使用 RANSAC 算法在场景中找到主平面。我用它来查找机器人场景中的桌子和地板。你会用它来找到你的主要地平面。

第二个教程展示了如何将点直接投影到平面上。这就是您将 3D 点云变成 2D 点云的方法。请注意，尽管有“inlier”关键字，但您可以将整个点云投影到平面上。

实际上，如果您在“被占用”的地方之后，您可能想要投影*不在*地平面中的所有点（即异常值），并且在其上方（您可以使用 PCL 过滤器，例如 PlaneClipper3D ，例如，或者只是平面分割操作中异常值的补充。

如果您最终得到的平面（包含所有投影点）不在您想要的坐标系中，您可能希望旋转整个地块，例如，与坐标轴对齐，以便所有 z 坐标为零. 参见 pcl::transformPointCloud （可以从平面分割返回的平面系数中获得变换）。

我希望这是有帮助的，而不是太基本的水平，尽管这个问题相当笼统，所以我想应该没问题。

# iphone - iOS 应用程序中的 Photoshop 魔术棒般的动作

> ID：11416872
> 
> 赞同：2
> 
> 时间：2012-07-10T15:35:42.557
> 
> 标签：iphone, xcode, ios5

有没有办法在 iPhone 的 Xcode 中使用魔术棒工具（比如在 Photoshop 中）？我想要做的是剪掉图像的背景（站在白色背景前的人）以使背景透明。

编辑：我认为我不够具体，抱歉。我希望 iPhone 或 iPad 应用程序能够自动删除刚刚用相机拍摄的图像的背景。因此，我不能为此使用 Photoshop，并且需要一个功能来做到这一点。我正在考虑类似于以下的“洪水填充”解决方案：

[http://www.codeproject.com/Articles/16405/Queue-Linear-Flood-Fill-A-Fast-Flood-Fill-Algorith](http://www.codeproject.com/Articles/16405/Queue-Linear-Flood-Fill-A-Fast-Flood-Fill-Algorith)

但希望有一个更方便的解决方案，特别是用于“剪切”图像的自定义形状区域。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:00:33.817

Floodfill 采用统一的背景颜色；在现实生活中的照片上，它永远不会是统一的。您需要的是 Chromakey 算法。看这里：

[绿屏/色度键 iOS](https://stackoverflow.com/questions/7561203/green-screen-chroma-key-ios)

# axapta - 更改父表单的焦点时如何刷新子表单

> ID：11416876
> 
> 赞同：2
> 
> 时间：2012-07-10T15:35:58.990
> 
> 标签：axapta, x++

基本上我想在父表单上更改焦点时刷新子表单。

任何人都可以提供实现这一目标的线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T21:06:42.107

看看[教程表单 Dynalink](http://www.axaptapedia.com/index.php?title=Tutorial_Form_Dynalink)。

简单的方法根本不需要代码，只要子表单中的表与父表单中的表有关系。父表单中的记录更改通知子表单，使其调用[linkActive](http://msdn.microsoft.com/en-us/library/aa582401%28v=ax.50%29.aspx)方法，然后该方法调用子表数据源上的[executeQuery方法。](http://msdn.microsoft.com/en-us/library/aa594986%28v=ax.50%29.aspx)

# php - SQL 查询在错误日志中显示错误，而代码执行完美无缺

> ID：11416880
> 
> 赞同：0
> 
> 时间：2012-07-10T15:36:15.317
> 
> 标签：php, sql, wordpress

我一直在浏览 WordPress Codex，似乎我的语法是正确的，但我似乎无法追查为什么我在`errors.text`与下面代码相关的文件中不断出现一行一行的错误，这是为了WordPress 简码：

```
function blahblah_display_referrer() {
    global $wpdb, $user_ID;

    // Logged in user
    if ( is_user_logged_in() == true ) {
        $sql = "SELECT display_name FROM " .$wpdb->prefix. "users WHERE ID=".$user_ID;
        $ref = $wpdb->get_var($wpdb->prepare($sql));
        return 'Welcome Back: '.$ref;
    }

    // Visitor message with cookie or without...
    $ref = $_COOKIE['ref'];         
    $sql = "SELECT display_name FROM " .$wpdb->prefix. "users WHERE ID=".$ref;
    $ref = $wpdb->get_var($wpdb->prepare($sql));
    if ( !isset($ref) ) {
        return 'Welcome Visitor';
    }

    return 'Referred By: '.$ref;
} 
```

正如我之前所说，这段代码可以完美执行，没有任何问题。它只显示以下错误：

```
[10-Jul-2012 15:10:45] WordPress database error You have an error in your SQL syntax; 
check the manual that corresponds to your MySQL server version for the right syntax to 
use near '' at line 1 for query SELECT display_name FROM wp_users WHERE ID= made by 
require('wp-blog-header.php'), require_once('wp-includes/template-loader.php'), 
include('/themes/kaboodle/index.php'), get_sidebar, locate_template, load_template, 
require_once('/themes/kaboodle/sidebar.php'), woo_sidebar, dynamic_sidebar, 
call_user_func_array, WP_Widget->display_callback, WP_Widget_Text->widget, 
apply_filters('widget_text'), call_user_func_array, do_shortcode, preg_replace_callback, 
do_shortcode_tag, call_user_func, blahblah_display_referrer 
```

这是我的服务器信息：

```
Apache version  2.2.21
PHP version     5.2.17
MySQL version   5.1.63-cll
Architecture    x86_64
Operating system    linux 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:18:01.887

我也遇到过同样的问题，答案在错误中，但并不明显。每当有人访问该页面时，无论他们是否有 cookie，您都会运行 Ref 查询。当您进行测试时，您很可能使用 cookie 进行测试，因此它不会产生错误。但是，当它在没有 cookie 的情况下运行时，它会搜索空白 ID。

我在下面修改了您的代码并评论了这些更改。

```
// Visitor message with cookie or without...
$ref = $_COOKIE['ref'];         
  /* This section should only run if there is a ref from the cookie
    $sql = "SELECT display_name FROM " .$wpdb->prefix. "users WHERE ID=".$ref;
    $ref = $wpdb->get_var($wpdb->prepare($sql)); */
if ( !isset($ref) || $ref == "" ) { //In case the cookie returns blank instead of null
    return 'Welcome Visitor';
} else { //added this section after the check for $ref so it only runs where there is a ref
    $sql = "SELECT display_name FROM " .$wpdb->prefix. "users WHERE ID=".$ref;
    $ref = $wpdb->get_var($wpdb->prepare($sql));
}    
return 'Referred By: '.$ref; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:44:54.617

It would seem that Wordpress's WPDB database module [suppresses SQL errors by default](http://codex.wordpress.org/Class_Reference/wpdb#Show_and_Hide_SQL_Errors).

> You can turn error echoing on and off with the show_errors and hide_errors, respectively.
> 
> ```
> <?php $wpdb->show_errors(); ?>
> <?php $wpdb->hide_errors(); ?> 
> ```
> 
> You can also print the error (if any) generated by the most recent query with print_error.
> 
> ```
> <?php $wpdb->print_error(); ?> 
> ```

Could that be the problem?

# asp.net - 如何在调试时停止自动托管 WCF 服务项目

> ID：11416882
> 
> 赞同：0
> 
> 时间：2012-07-10T15:36:15.997
> 
> 标签：asp.net, wcf, hosting, wcf-hosting

我有包含少量 WCF 服务项目的 Asp.Net 解决方案。每次我在调试模式下运行应用程序时，我都可以看到我的服务托管在 ASP.Net 开发服务器上。我刚开始时只有一个项目。

有没有办法在不从解决方案中删除这些 WCF 服务项目的情况下避免这种情况？

重现当时的情况。创建一个 ASP.Net 项目并添加几个 WCF 服务项目。按 F5，您将看到 WCF 服务项目托管在本地开发服务器上。

这是我到目前为止所尝试的：

1）`Project->Properties->Don't open a page. Wait for a request from an external application.`我选择了这个选项，但它仍然托管服务。

2) 未选中`ASP.NET in Debuggers`的选择。它仍然托管服务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T15:56:35.930

尝试右键单击 WCF 项目并转到**WCF 选项选项**卡。

![在此处输入图像描述](../Images/f71f3e45b0b95887e8954d1f9e39d013.png)

在同一解决方案中调试另一个项目时取消选中**启动 WCF 服务主机。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:57:38.470

这是你想要的： ![在此处输入图像描述](../Images/4d54a22990993c21c22e01ed5c55a24a.png)

# sql-server - 选择列并插入不同表的存储过程

> ID：11416883
> 
> 赞同：0
> 
> 时间：2012-07-10T15:36:16.410
> 
> 标签：sql-server, tsql, stored-procedures

我有 2 个表，例如：绿色（用户 ID、姓名、地址）、红色（用户 ID、姓名、临时地址）

我想要

```
select from Green table (Name) Where = userID 
AND 
INSERT INTO Red(userID,Name,TemproraryAddress) 
VALUES (@userID,@Name,@TemproraryAddress) 
```

我的主要问题是如何将选定的值分配给标量变量？

注意：此示例表是为了展示一个示例场景，而不是在现实世界中使用...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:38:37.317

你的意思是喜欢

```
insert into Red(userId, Name, TemporaryAddress
select userId, Name, Address
from Green
where userId = @userId 
```

或者

```
declare @userId int, @Name varchar(100), @address varchar(100)

select @userId = userId, @Name = Name, @address = Address from Green where userId = 12345

insert into Red (userId, Name, TemporaryAddress) values (@userId, @Name, @address) 
```

或者是其他东西？

...您的问题不清楚您到底想做什么。您现有的代码是什么样的，它没有做什么您希望它做的事情？

**编辑**

另一种选择是在 Green 表上使用插入触发器。我不确定你是否想基本上匹配表格，但如果你这样做了，那么这就是如何做到这一点：

```
create trigger green_InsToRed_TRG on Green for insert as

insert into Red (UserId, Name, TemporaryAddress)
select UserId, Name, Address from inserted 
```

# joomla - 从 Joomla 2.5 中的 URL 中删除 index.php

> ID：11416884
> 
> 赞同：2
> 
> 时间：2012-07-10T15:36:27.723
> 
> 标签：joomla

我正在使用 Joomla 2.5。问题是，每个链接都有'index.php'，比如：

www.mysite.com/index.php/contact

www.mysite.com/index.php/about-us

如何从我的 URL 中删除“.../index.php/...”？

我在全局配置下的 SEO 设置是：

```
==================================
Search Engine Friendly URLs Yes

Use Apache mod_rewrite Yes

Adds Suffix to URL No

Unicode Aliases No

Include Site Name in Page Titles No
================================== 
```

我已将 htaccess.txt 更改为 .htaccess。我已经尝试了所有方法，但仍然无法从 URL 中删除“index.php”。请帮我。如果这在其他地方存在，我深表歉意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T18:02:46.210

**进入您的 Joomla 管理面板。**

```
1\. Select Site > Global Configuration
2\. Under SEO Settings set Use URL Rewriting to Yes
3\. Click Save 
```

下一步是将安装附带的 htaccess.txt 文件重命名为 .htaccess

而已。希望这可以帮助 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T21:26:21.430

您是否更改了管理员后端的设置或实际的配置文件？有时，如果您直接修改 configuration.php，这将不起作用。如果您从后端面板执行此操作，请检查您的 configuration.php 以确保更改正在反映。

还要检查您的主机是否在 Apache 服务器上提供 mod_rewrite。

不太可能，但这可能是重命名 htaccess.txt 过程中的一个小错误，请仔细检查重命名的文件。

# php - 插入重复键更新返回值 0

> ID：11416887
> 
> 赞同：0
> 
> 时间：2012-07-10T15:36:35.103
> 
> 标签：php, mysql, insert-update

我正在创建一个网页，您可以在其中为客户编辑本地列表站点。我正在使用`INSERT ... ON DUPLICATE KEY UPDATE`mysql 和 php 中的语法。下面是代码：

编辑列表-exec.php

```
<?
    //Array to store validation errors
    $errmsg_arr = array();

    //Validation error flag
    $errflag = false;

    $member_id = $_SESSION['MEMBER_ID'];
    $userresult = mysqli_query($link, "SELECT   username 
                                    FROM        members 
                                    WHERE       member_id = '$member_id'");
    $row = mysqli_fetch_array($userresult);
    $username = $row['username'];

    //run a for loop to check for duplicates
    for ($i=1; $i < 10; $i++) {
        $selectbox = $_POST['listing'.$i];

        for ($j=1; $j < 10; $j++) {
            if ($j != $i) {
                if ($_POST['listing'.$j] === $selectbox && $_POST['listing'.$j] != "") {
                $errmsg_arr[] = "Duplicate listing source '$selectbox'";
                $errflag = true;
                break;
                }
            }
        }
    }

    //if there are input validations redirect back to main page
    if($errflag) {
        $_SESSION['ERRMSG_ARR'] = $errmsg_arr;
        session_write_close();
        header("location: edit-listings.php");
        exit();
    }

    //run loop to define post variables
    for ($k=1; $k < 10; $k++) {
        ${'listing'.$k} = mysqli_real_escape_string($link, $_POST['listing'.$k]);
        ${'listing'.$k.'_site'} = mysqli_real_escape_string($link, $_POST['listing'.$k.'_site']);
    }

    //insert listings into local_listings table for the user
    $qry = "INSERT INTO local_listings (
                        member_id,
                        username,
                        listing1,
                        listing1_site,
                        listing2,
                        listing2_site,
                        listing3,
                        listing3_site,
                        listing4,
                        listing4_site,
                        listing5,
                        listing5_site,
                        listing6,
                        listing6_site,
                        listing7,
                        listing7_site,
                        listing8,
                        listing8_site,
                        listing9,
                        listing9_site)
                VALUES (
                        '$member_id',
                        '$username',
                        '$listing1',
                        '$listing1_site',
                        '$listing2',
                        '$listing2_site',
                        '$listing3',
                        '$listing3_site',
                        '$listing4',
                        '$listing4_site',
                        '$listing5',
                        '$listing5_site',
                        '$listing6',
                        '$listing6_site',
                        '$listing7',
                        '$listing7_site',
                        '$listing8',
                        '$listing8_site',
                        '$listing9',
                        '$listing9_site')
                ON DUPLICATE KEY UPDATE
                        listing1        =   '$listing1',
                        listing1_site   =   '$listing1_site',
                        listing2        =   '$listing2',
                        listing2_site   =   '$listing2_site',
                        listing3        =   '$listing3',
                        listing3_site   =   '$listing3_site',
                        listing4        =   '$listing4',
                        listing4_site   =   '$listing4_site',
                        listing5        =   '$listing5',
                        listing5_site   =   '$listing5_site',
                        listing6        =   '$listing6',
                        listing6_site   =   '$listing6_site',
                        listing7        =   '$listing7',
                        listing7_site   =   '$listing7_site',
                        listing8        =   '$listing8',
                        listing8_site   =   '$listing8_site',
                        listing9        =   '$listing9',
                        listing9_site   =   '$listing9_site'";

    $result = mysqli_query($link, $qry);

    if (mysqli_affected_rows($result) < 1) {
        $errmsg_arr[] = "Unable to insert listings for $username";
        $_SESSION['ERRMSG_ARR'] = $errmsg_arr;
        header ("location: edit-listings.php");
    }
    elseif (mysqli_affected_rows($result) === 1) {
        $_SESSION['RESULT'] = "New listings for '$username' inserted successfully";
        header ("location: edit-listings-success.php");
    }
    elseif (mysqli_affected_rows($result) === 2) {
        $_SESSION['RESULT'] = "Listings for '$username' have been updated";
        header ("location: edit-listings-success.php");
    }

?> 
```

数据已成功插入`local_listings`表中，但`mysqli_affected_rows`始终返回`0`. `1`如果它插入一个新行或者`2`它只是更新，它应该返回一个值。任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:08:24.063

试试这个：

```
 if (mysqli_affected_rows($link) < 1) {
... your code
} 
```

看看[这里](http://www.php.net/manual/en/mysqli.affected-rows.php)

# tsql - SQL 中的动态 where 子句

> ID：11416904
> 
> 赞同：1
> 
> 时间：2012-07-10T15:37:41.933
> 
> 标签：tsql

我希望能够根据传递给它的参数值来更改存储过程中的 where 子句。

例如

这就是我认为它应该工作的方式，但我无法完全正确

```
Declare @param as int

set @param = 1

Select Productname
from product
where
 case @param = 1 then productname = 1
 else productname <> 1
 end 
```

我一直在看动态 SQL 等？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T15:39:45.540

试试这个 WHERE 子句：

```
WHERE (@param = 1 AND productname = 1)
OR    (@param <> 1 AND productname <> 1) 
```

括号在这里不是严格需要的，因为`AND`它的优先级高于`OR`但为了清楚起见我还是添加了它们。

# java - accessing variables from another form using javascript

> ID：11416907
> 
> 赞同：0
> 
> 时间：2012-07-10T15:37:54.000
> 
> 标签：java, forms, jsp, dom

in my current webpage (a JSP file which uses a form) i am interested in accessing variables that is autocalculated in the current webpage using a java class, from another form (also another JSP file) using javascript and DOM methods...is this possible?

Form A contains a link to Form B and i would like to put a javascript method in Form 2 to get variables/information in Form A.

EDIT 1: just updated...i'm trying at the moment to make context path URLs to each different web page and save them as strings in a database. And in the Form 2 webpage, i will retrieve the string URL context path of Form 1 from the database and then somehow try to access that...still figuring that part out..

EDIT 2: this is not involving Parent-Child window, but a relationship between 2 webpages that uses a FORM element

# c# - Working with Diff Image (Deltas) in Picturebox Control

> ID：11416909
> 
> 赞同：0
> 
> 时间：2012-07-10T15:38:03.110
> 
> 标签：c#, winforms, picturebox

I create a picture box and on the first request to my server retrieve the full desktop and display it. On every subsequent request, I'm only getting the diff'ed image which is transparent everywhere except where there are changes.

How can I "overlay" these two images together? Or otherwise combine them in my picture box?

Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:27:36.677

尝试这个：

```
for (var x = 0; x < sourceBitmap.Width; x++)
{
    for (var y = 0; y < sourceBitmap.Height; y++)
    {
        var pixelColor = sourceBitmap.GetPixel(x, y);

        // copy all non-transparent pixels
        if (pixelColor.A != Byte.MaxValue) 
        {
            destinationBitmap.SetPixel(x, y, pixelColor);
        }
    }
} 
```

我假设 sourceBitmap 和 destinationBitmap 都是 System.Drawing.Bitmap 对象。源位图将是您在图片框中显示的位图，但不要使用 pictureBox.Image 属性返回的位图，使用 Clone() 方法创建一个副本，然后进行交换，否则您将得到一个例外。

如果此方法太慢，您可以尝试使用直接内存访问来操作位图数据，对 Bitmap 对象使用 LockBits 和 UnlockBits 方法。

# java - Java - Creating a Calendar without a TimeZone

> ID：11416914
> 
> 赞同：4
> 
> 时间：2012-07-10T15:38:15.083
> 
> 标签：java, datetime, timezone

I would like to start by saying that I've read several threads similar to this one, but none of them really solved my problem. I would also like to state that I've tried to use `SimpleDateFormat` and `joda.DateTime` without any success.

The problem is the following:

I have a Calendar object that holds the information about a specific date: 2008-04-30T00:00:00Z When using the `calendar.getTime()` method I can get different results because I know that that method is looking for the local value

Thus:

```
UK: 2008-04-30T01:00:00.000+0100

US: 2008-04-30T20:00:00.000-0400 
```

But I would like to get a Date object that holds just the Date and Time values "2008-04-30T00:00:00" ignoring completely any timezone.

How can I do that?

As I mentioned before I tried to use `SimpleDateFormat sf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss")` but I always end up with the same results.

Any help would be really appreciated Cheers.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-11-10T04:13:04.837

发现您可以使用以下代码清除时区：

`Calendar cal = Calendar.getInstance(); cal.clear(Calendar.ZONE_OFFSET);`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T17:22:41.197

`Calendars``Dates`没有`TimeZone`. _

没有时区，日历和日期**就无法**存在。

你不能`ignore completely any timezone`。

您可以像这样为格林威治标准时间（偏移量为零）创建一个日历：

```
 TimeZone zone = TimeZone.getTimeZone("Etc/GMT");
    Calendar cal = Calendar.getInstance(zone); 
```

这表示仅在 GMT 时区有意义的日期/日历。

听起来你想要一个时间戳，它代表一个瞬间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T15:46:35.397

您是否使用标准构造函数来初始化日历？如果您使用允许指定时区和语言环境的构造函数怎么办？

```
protected Calendar(TimeZone zone, Locale aLocale) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-12T19:37:57.417

正如其他人所指出的，没有时区`Calendar`，`Date`对象就无法存在。

我相信您可能希望将Java 8 中引入的[LocalDateTime类与新的时间 API 一起使用：](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html)

```
LocalDateTime literal = LocalDateTime.of(2008, 4, 30, 0, 0, 0);
LocalDateTime parsed = LocalDateTime.parse("2008-04-30T00:00:00"); // ISO-8601 by default
Assert.assertEquals(literal, parsed); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-11T05:24:39.510

旧的，但仍然不正确。

> “使用 calendar.getTime() 方法时，我可以得到不同的结果，因为我知道该方法正在寻找本地值”

那是一种误解。getTime() 将仅获得毫秒。计数为 GMT。

只有在格式化输出时，时区才会变得相关。Sind 原贴没有显示代码，无法确定错误发生在哪里。

# java - 安装 sun-java6-jre 会出错

> ID：11416915
> 
> 赞同：6
> 
> 时间：2012-07-10T15:38:18.070
> 
> 标签：java, ubuntu, sdk, ubuntu-12.04

我在 ubuntu 12.04 上安装 sun-java6-jre，但出现以下错误，

```
The following packages have unmet dependencies:
 sun-java6-jdk : Depends: sun-java6-bin (= 6-06-0ubuntu1) but it is not going to be installed
 sun-java6-jre : Depends: sun-java6-bin (>= 6.30-2~precise1) but it is not going to be installed or
                      ia32-sun-java6-bin (>= 6.30-2~precise1) but it is not going to be installed
                 Recommends: gsfonts-x11 but it is not going to be installed
E: Unable to correct problems, you have held broken packages. 
```

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T15:54:27.807

Sun Java 不再以这种方式可用于 Ubuntu。

将要

```
sudo apt-get install openjdk-6-jdk 
```

满足你的需要？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-05T12:11:55.477

您可以按照以下详细程序进行操作：

**参考：**

[http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html) [http://hendrelouw73.wordpress.com/2012/06/01/how-to-install-oracle-java-6-0 -32-on-ubuntu-12-04-linux/](http://hendrelouw73.wordpress.com/2012/06/01/how-to-install-oracle-java-6-0-32-on-ubuntu-12-04-linux/)

**下载：**

[从http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html) JDK下载以下文件 ：jdk-6u37-linux-i586.bin（或 jdk-6u37-linux-x64.bin 用于 64 位系统）JRE：jre-6u37-linux-i586.bin

**安装程序：**

1.  确保安装文件夹存在：

    $ sudo mkdir -p /usr/lib/jvm

2.  cd 到包含 jre 和 jdk bin 文件的文件夹

3.  将下载的文件移动到安装文件夹

    $ sudo mv jdk-6u37-linux-i586.bin /usr/lib/jvm

    $ sudo mv jdk-6u37-linux-x64.bin /usr/lib/jvm（对于 64 位系统）

    $ sudo mv jre-6u37-linux-i586.bin /usr/lib/jvm （仅当您只安装 JRE 时）

4.  `$ cd /usr/lib/jvm`

5.  使下载的二进制文件可执行

    $ sudo chmod u+x jdk-6u37-linux-i586.bin

    $ sudo chmod u+x jre-6u37-linux-i586.bin （仅当您仅安装 JRE 时）

6.  提取两个压缩的二进制文件：

    $ sudo ./jdk-6u37-linux-i586.bin

    $ sudo ./jre-6u37-linux-i586.bin （仅当您仅安装 JRE 时）

7.  通知 Ubuntu 您的 Java 安装位置

    $ sudo update-alternatives --install "/usr/bin/javac" "javac" "/usr/lib/jvm/jdk1.6.0_37/bin/javac" 1

    $ sudo update-alternatives --install "/usr/bin/java" "java" "/usr/lib/jvm/jdk1.6.0_37/jre/bin/java" 1

    $ sudo update-alternatives --install "/usr/bin/javaws" "javaws" "/usr/lib/jvm/jdk1.6.0_37/bin/javaws" 1

    $ sudo update-alternatives --install "/usr/bin/java" "java" "/usr/lib/jvm/jre1.6.0_37/bin/java" 1 （仅当您只安装 JRE 时）

8.  通知 Ubuntu 这是您的默认 Java 安装：

    $ sudo update-alternatives --set javac /usr/lib/jvm/jdk1.6.0_37/bin/javac

    $ sudo update-alternatives --set java /usr/lib/jvm/jdk1.6.0_37/jre/bin/java

    $ sudo update-alternatives --set javaws /usr/lib/jvm/jdk1.6.0_37/bin/javaws

    $ sudo update-alternatives --set java /usr/lib/jvm/jre1.6.0_37/bin/java （仅当您仅安装 JRE 时）

9.  重新加载系统范围的 PATH

    $ . /etc/profile

10.  重启你的 Ubuntu 系统检查版本：

    $ java -版本

    $ javac-版本

    $ javaws -版本

**您应该能够看到：**

java版本“1.6.0_37”javac 1.6.0_37

**设置 JAVA_HOME：**

将以下代码添加到 ~/.bashrc 文件中：

```
# Setting JAVA_HOME manually 

JAVA_HOME=/usr/lib/jvm/jdk1.6.0_37

export PATH=$PATH:$JAVA_HOME 
```

现在，打开一个新终端：

```
$ echo $JAVA_HOME 
=> /usr/lib/jvm/jdk1.6.0_37/bin 
```

**Linux Java 插件的安装和注册：**

请参阅：[http](http://www.oracle.com/technetwork/java/javase/manual-plugin-install-linux-136395.html) ://www.oracle.com/technetwork/java/javase/manual-plugin-install-linux-136395.html 安装 Java 平台时，Java 插件文件包含在该安装中。如果您想在 Firefox 中使用 Java，您需要手动创建一个符号链接，从发行版中的插件文件到 Firefox 期望的位置之一。您可以在主目录的 ~/.mozilla/plugins 中创建符号链接。Linux 的插件文件位于：/lib/i386/libnpjp2.so

**要安装 Java 插件，请按照下列步骤操作：**

1.  退出火狐。
2.  $ cd ~/.mozilla/插件/
3.  卸载任何以前安装的 Java 插件。一次只能使用一个 Java 插件。当您想使用不同的插件或插件版本时，请删除指向任何其他版本的符号链接并创建指向新版本的新符号链接。删除现有的符号链接（或将它们移动到另一个目录）：

    $ rm libnpj*

4.  在 Firefox 插件目录中创建指向 Java 插件的符号链接。

    $ ln -s /usr/lib/jvm/jdk1.6.0_37/jre/lib/i386/libnpjp2.so ~/.mozilla/plugins/

    $ ln -s /usr/lib/jvm/jdk1.6.0_37/jre/lib/amd64/libnpjp2.so ~/.mozilla/plugins/（如果是 64 位系统）

    $ ln -s /usr/lib/jvm/jre1.6.0_37/lib/i386/libnpjp2.so ~/.mozilla/plugins/ （仅当您仅安装 JRE 时）

5.  Start the Firefox browser . Testing installed plugin: Type about:plugins in the Location bar to confirm that the Java Plugin is loaded. You can also click the Tools menu to confirm that Java Console is there.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T15:45:46.020

1.  打开一个终端。

2.  发出命令：`sudo synaptic`

3.  搜索 Sun JDK 包。

4.  标记安装包并应用更改。

# php - 寻找一个快速的库来用 PHP 渲染 PDF 的文件

> ID：11416920
> 
> 赞同：4
> 
> 时间：2012-07-10T15:38:28.270
> 
> 标签：php, pdf, dompdf

有谁知道使用 PHP 呈现 PDF 文件的快速库？

我正在尝试使用 dompdf，但它真的很慢，渲染 23 张 PDF 大约需要 5 分钟。

Dompdf 非常棒并且非常有用，但是当您必须渲染大型 pdf 文件时，它就毫无价值了。

我正在使用 dompdf 0.6.0 beta 3。

有没有人使用另一个库在 php 中尝试过大型 pdf？

我可以用 dompdf 改进它吗？这是 dompdf 呈现的 html 文件：

[http://dl.dropbox.com/u/15451865/pdf.html](http://dl.dropbox.com/u/15451865/pdf.html)

我正在考虑使用 openoffice 库编写服务，但我不喜欢仅为此使用其他技术。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T13:49:07.477

在性能方面，[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)似乎做得很好。

它不依赖 PHP 来完成繁重的工作，而是使用 webkit-engine 来呈现页面。

缺点是很久没更新了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T12:13:49.773

一些基准测试结果：

要在 Intel(R) Core(TM) i7-2600K CPU @ 3.40GHz、8 GB RAM 内存（[Ubuntu](http://dl.dropbox.com/u/15451865/notables_dompdf.html) 12.04):

Dompdf：35 秒，CPU 率为 100%

Google Chrome PDF 打印机：1 秒

所以我认为 DOMPDF 是一个了不起的库，但是对于需要高性能的服务，我需要另一个库（我会尝试 FPDF）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T15:43:45.273

你试过 FPDF 吗？

FPDF 是一个 PHP 类，它允许使用纯 PHP 生成 PDF 文件，也就是说不使用 PDFlib 库。FPDF 中的 F 代表 Free：您可以将其用于任何用途并根据您的需要进行修改。

[FPDF : 允许生成 PDF 文件的类](http://www.fpdf.org/?lang=en)

您还可以将[FPDI](http://www.setasign.de/support/manuals/fpdi/fpdi/)与 FPDF 一起使用。使用 FPDI，您将能够将现有 PDF 文档的单页导入模板。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T15:44:43.997

试试[http://www.fpdf.org/](http://www.fpdf.org/)

我使用它，它非常好，灵活，可以设置页面大小，也可以使用模板（[fpdi](http://www.setasign.de/support/manuals/fpdi/fpdi/) - 适用于 fpdf）。您可以放置​​图像，文本，设置每个元素的位置。

# java - 将多个地图序列化到一个文件

> ID：11416923
> 
> 赞同：0
> 
> 时间：2012-07-10T15:38:58.307
> 
> 标签：java, serialization, map

我正在尝试将多个映射序列化到一个文件中，以便以后可以检索它们并将所有值重建回其原始的不同映射。

这些映射是简单的键/值对。在实际使用中，只有大约 10 个不同的地图，每个地图大约有 20 个条目，因此性能并不是一个大问题。

我最初的想法是使用 java Properties 文件方法，尽管这似乎只适合将*一个*映射序列化到文件中。我需要做多张地图。有没有办法我仍然可以使用属性文件但为不同的地图值指定分隔符？

如果属性文件无法做到这一点，那么实现我想要的最方便的方法是什么？我希望有一些预定义的 Java 实用程序方法来处理这类事情，这样我就不必弄清楚我自己的文件格式和解析/编写代码。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:42:58.643

如果所有这些对象的类都实现了`Serializable`，您可以使用`ObjectOutputStream`将映射序列化为文件，然后稍后使用`ObjectInputStream`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:44:26.800

为了简单地存储地图，请使用内置 java 序列化（假设您的键和值确实实现了 java.io.Serializable）。使用 ObjectOutputStream/ObjectInputStream 您可以很容易地序列化数据，尽管数据将以二进制形式存储。

# asp.net-mvc-3 - ASP.NET MVC3 缓存对象

> ID：11416927
> 
> 赞同：1
> 
> 时间：2012-07-10T15:39:10.183
> 
> 标签：asp.net-mvc-3, caching

我有一个通过多个 xml 文件的 Util 类。由于可能有很多我想缓存他们的数据。那么，我如何（甚至可能）访问应用程序的 Cache 对象？我知道我可以通过 HttpContext.Cache 在我的控制器中使用它，但是在其他类中呢？

啊，当我尝试在我的 Util 类中构造 Cache 对象时，我得到 NullReferenceException ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:43:57.317

尝试使用 System.Web；

然后使用 HttpContext.Current.Cache

在你的 Util 类中。这就是我看到的工作。

# php - PHP中不可预测的短字符串的可预测ID

> ID：11416928
> 
> 赞同：-5
> 
> 时间：2012-07-10T15:39:18.133
> 
> 标签：php, decode, encode

> **可能重复：**
> [PHP 中的短“加密/散列”](https://stackoverflow.com/questions/11416128/short-encryption-hash-in-php)

对，

我需要制作一个ID，例如；100000001、100000002、100000003 使用 PHP（例如 PDKJ23HB43）转换为难以预测的字符串

*   它必须是字母数字。
*   （如果可能）长度需要为 5-15 个字符。
*   它需要是可逆的。
*   它必须是独一无二的。
*   它不需要是安全的[我没有用它来“加密”任何东西]
*   （如果可能）它不需要数据库来记录映射。
*   我想做的事有可能吗？

我认为这将类似于 URL 如何变成 TinyURL，但这只是一个模糊的猜测。

我尝试了一些不同的选项，例如 base64，但输出太长了（我知道原因，我只是找不到更好的解决方案，因为这是我第一次需要做这样的事情.

感谢您的帮助，任何人都非常感谢。对不起，如果我问得非常直接，但这是我实现目标的唯一方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T15:44:55.270

由于您需要这是可逆的，我建议使用[mcrypt](http://php.net/manual/en/book.mcrypt.php)。不过，这将带来间接费用。

如果您不想要可预测的 ID，那么为什么不更改您的系统以生成随机 ID 的使用[`uniqid()`](http://us3.php.net/manual/en/function.uniqid.php)呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:44:43.160

你可以使用这个：

```
echo base_convert(time(), 10, 34).base_convert(rand(), 10, 34); 
```

如果您想要可预测的（非安全）ID，请在某处存储一个计数并使用

```
echo base_convert(mycount, 10, 34); 
```

# javascript - 关于预加载的建议

> ID：11416930
> 
> 赞同：3
> 
> 时间：2012-07-10T15:39:22.623
> 
> 标签：javascript, jquery, preloader, custom-scrolling

问候和感谢您的时间。

我刚刚开始了一份新工作，为一家耳机公司建立了一个新的营销网站。我仍然是一名学生，还有一年的时间，我试图找出最好的方法来应对我为这个网站提供的挑战。

该站点是一个视差滚动站点，具有水平和垂直移动。

我需要建议的领域是该站点是一个滚动站点，因此没有自然的点来刷新页面。我们有近 25 种产品，每种产品都有多种变化，总共超过 250 张图片。我的老板希望网站尽可能无缝地滚动，即用户将向左/向右移动以查看产品，然后用户向上/向下移动以查看特定产品的变化。

加载这些图像的最有效方法是什么？

1.  我的第一个想法是让预加载器在主页加载后开始加载所有内容。这似乎是最简单的解决方案，但可能不太有效？

2.  我的下一个想法是让滚动触发额外的预加载事件？我已经对此进行了研究，我可以就如何最好地实现这一点提出一些建议？我试图在合理范围内避免用户看到加载 gif。

3.  还没有下一个想法？但请让我参与任何其他可能更好的过程。

我不是在寻找一个明确的答案，但如果你想提供一个......我真的只是在寻找建议，希望有一些文章可以让事情顺利进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:01:51.697

我也遇到了类似的情况，虽然我的视差网站只是为了实验/娱乐，但我发现[https://github.com/protonet/jquery.inview/](https://github.com/protonet/jquery.inview/)是一个可能的解决方案。第一个部分的加载器，然后在该视图之后将加载到滚动的下一个部分。

# sas - 是否可以根据人口密度在 SAS 中创建新行？

> ID：11416932
> 
> 赞同：0
> 
> 时间：2012-07-10T15:39:26.783
> 
> 标签：sas

是否可以创建一个新行与人口密度成比例的数据集？例如，如果我有某个州的人口密度，是否可以创建空行，其中行数与其人口密度成正比？

```
zip   density
75001 2551
75002 944
75006 2625
75007 4209
75009 51 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:58:27.150

我想你正在寻找这样的东西......

```
data dat;
input 
 zip 
 density;
cards; 
75001 2551
75002 944
75006 2625
75007 4209
75009 51
run; 

data new; 
  set dat; 
  by zip;
  if first.zip then do; 
    do i= 1 to density;
        output; 
    end; 
  end; 
Run; 
```

# php - 用 PHPExcel 添加新行？

> ID：11416934
> 
> 赞同：15
> 
> 时间：2012-07-10T15:39:29.637
> 
> 标签：php, phpexcel

如何使用 PHPExcel 向现有的 .xls 文件添加新行？

我是否必须计算已经存在的行数？

如果是这样，我该如何为excel文件做到这一点？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-10T15:45:17.257

假设这个设置：

```
$objPHPExcel = PHPExcel_IOFactory::load("foo.xlsx");
$objWorksheet = $objPHPExcel->getActiveSheet(); 
```

您可以像这样获得行数：

`$num_rows = $objPHPExcel->getActiveSheet()->getHighestRow();`

在此之后，您可以使用以下语句查看插入行：

`$objWorksheet->insertNewRowBefore($num_rows + 1, 1);`

这在之前添加了 1 个新行`$num_rows`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-14T02:48:05.537

上面的示例只添加了一个空白行。下面的示例添加来自表单的数据。

```
<?php

        require_once '../inc/phpexcel/Classes/PHPExcel.php';
        require_once '../inc/phpexcel/Classes/PHPExcel/IOFactory.php';
        $objPHPExcel = PHPExcel_IOFactory::load("myExcelFile.xlsx");
        $objWorksheet = $objPHPExcel->getActiveSheet();

        //add the new row
        $num_rows = $objPHPExcel->getActiveSheet()->getHighestRow();
        $objWorksheet->insertNewRowBefore($num_rows + 1, 1);
        $name = isset($_POST['name']) ? $_POST['name'] : '';
        if($submit){
    //SAVING THE NEW ROW - on the last position in the table
        $objWorksheet->setCellValueByColumnAndRow(0,$num_rows+1,$name);
        }

        //display the table
        echo '<table>'."\n";
        echo '<thead>
        <tr>
            <th>Company Name</th>
        </tr>
        </thead>'."\n";
        echo '<tbody>'."\n";
        foreach ($objWorksheet->getRowIterator() as $row) {
        echo '<tr>'."\n";
        $cellIterator = $row->getCellIterator();
        $cellIterator->setIterateOnlyExistingCells(false);
        foreach ($cellIterator as $cell) {
        echo '<td>'.$cell->getValue().'</td>'."\n";
        }
        echo '</tr>'."\n";
        }
        echo '</tbody>'."\n";
        echo '</table>'."\n";
        ?> 
```

# opengl - 什么是标准的 OpenGL 工具包？

> ID：11416938
> 
> 赞同：2
> 
> 时间：2012-07-10T15:39:44.320
> 
> 标签：opengl, glut, toolkit

我只是想掌握我可以从中构建的 OpenGL，所以我正在寻找的只是构建 Windows 等的基本知识。我在阅读教程时注意到的一件事就是它似乎就像很多信息已经过时了 - 例如很多教程（其中许多是几年前写的）提到使用 GLUT，但是 GLUT 已经超过 10 年没有更新了 - 计算机时间. 现在的人用什么？我知道 freeglut 就在那里，但没有很多关于它的信息 - 如何设置它等等......大多数人都做什么？启动并运行一个简单的窗口系统以便我可以开始使用 OpenGL 的最简单方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T16:15:06.810

您应该首先了解作为固定功能管道的 Legacy OpenGL 与完全由着色器驱动的管道的现代 OpenGL 之间的区别。大多数在线教程都教授旧版 OpenGL，因为它很容易上手并且已经存在了很长时间。旧版仍然可以正常工作，但您可能想进入现代 OpenGL（至少 3.0 版）。现代 OpenGL 更简洁、更灵活，但也更难上手，因此教程更少。它需要用户进行更多的设置和库，并且没有“一种方法”来做事情，这使得构建快速教程变得困难。

一些学习现代 OpenGL 的好资源是：

*   [http://www.opengl-tutorial.org/](http://www.opengl-tutorial.org/) - Stack Overflow 用户写的很棒的课程。
*   [http://opengles-book.com/](http://opengles-book.com/) - OpenGL ES 2.0 编程指南 - OpenGL ES 2.0 直接与 OpenGL 3.0 兼容，因此非常适合入门。即使您不想购买这本书，也可以下载非常棒的示例代码。
*   [http://www.swiftless.com/](http://www.swiftless.com/) - Swiftless 教程 - 很棒的 OpenGL 4.0 和 WebGL 教程。

对于您的主要问题，我知道用于创建跨平台 OpenGL 窗口的 3 个主要库。我会推荐 GLFW 作为跨平台工具包。您还可以通过直接在各自的平台中创建上下文（在 Windows 上创建 WGL 窗口，在 MacOS X 上创建 Cocoa 等）而不是使用窗口库来学到很多东西。

1.  [GLUT](http://www.opengl.org/resources/libraries/glut/) - 你是对的，它已经多年没有更新了。它仍然有效，特别是对于旧版 OpenGL，但我不确定现代支持有多好。
2.  [SDL](http://www.libsdl.org/) - 也是旧的和遗留的 OpenGL（我认为这在 2.0 中得到了解决），并且包括更多的跨平台特性，超出了 OpenGL 之类的线程。这是一个相当重量级的库，但我仍然更喜欢它而不是 GLUT。一个现代的、更新的 SDL 正在开发中，但我很长一段时间没有看到它的任何东西，可能已经停产了......它还有一个与之相关的令人讨厌的许可证，所以要小心。
3.  [GLFW](http://www.glfw.org/) - 我个人的最爱。它像 GLUT 一样干净且轻量级，允许您在大多数主要桌面平台上定位现代 OpenGL 上下文。

# vba - 意外的字符串结果

> ID：11416940
> 
> 赞同：3
> 
> 时间：2012-07-10T15:39:50.153
> 
> 标签：vba, excel

我有以下代码来检查输入到两个输入框中的值，如果两个值都为零，那么`MsgBox`应该显示“停止！” （我稍后将更改为退出子，但我使用 MsgBox 进行测试）

通过测试，我看到了这些结果：

*   两个字符串中的零都会产生预期的消息框。

*   第一个字符串中的非零后跟第二个字符串中的任何非零值什么都不做（如预期的那样）。

*   第一个字符串中的零后跟等于或大于 10 的第二个字符串值会生成消息框（意外）。

我还注意到，如果第二个字符串是 6-9，它会显示为`x.00000000000001%`. 我认为这是一个浮点问题，可能相关吗？`IF... InStr`没有该功能也会发生此行为。

```
Option Explicit
Sub Models()
    Dim MinPer As String, MaxPer As String, Frmula As String
    Dim Data As Worksheet, Results As Worksheet
    Set Data = Sheets("Data")
    Set Results = Sheets("Results")

    Application.ScreenUpdating = False

    MinPer = 1 - InputBox("Enter Minimum Threshold Percentage, do not include the % symbol", _
    "Minimum?") / 100
    MaxPer = 1 + InputBox("Enter Maximum Threshold Percentage, do not include the % symbol", _
    "Maximum?") / 100

    If (InStr(MinPer, "0") = 0) And (InStr(MaxPer, "0") = 0) Then
    MsgBox "STOP!"
    End If

    ' Remainder of code... 
```

这是迄今为止我在 VBA 中遇到的最有趣的问题，欢迎对此进行任何讨论。

**编辑：**我使用此代码在屏幕上显示参数供最终用户查看。因此，我如何注意到 .00000000001% 问题：

```
 .Range("D2").Value = "Min is " & 100 - MinPer * 100 & "%"
    .Range("D3").Value = "Max is " & MaxPer * 100 - 100 & "%" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T15:48:50.803

两件事情

**1）**在存储计算输出时声明`MinPer`, `MaxPer`as`Long`或 a`Double`而不是 a`String`

**2）**不要直接`InputBox`在计算中使用。将它们存储在变量中，然后如果输入有效，则在计算中使用它们

```
Dim MinPer As Double, MaxPer As Double, Frmula As String
Dim Data As Worksheet, Results As Worksheet
Dim n1 As Long, n2 As Long

Set Data = Sheets("Data")
Set Results = Sheets("Results")

Application.ScreenUpdating = False

On Error Resume Next
n1 = Application.InputBox(Prompt:="Enter Minimum Threshold Percentage, do not include the % symbol", _
Title:="Minimum?", Type:=1)
On Error GoTo 0

If n1 = False Then
    MsgBox "User cancelled"
    Exit Sub
End If

On Error Resume Next
n2 = Application.InputBox(Prompt:="Enter Maximum Threshold Percentage, do not include the % symbol", _
Title:="Maximum?", Type:=1)
On Error GoTo 0

If n2 = False Then
    MsgBox "User cancelled"
    Exit Sub
End If

If n1 = 0 And n2 = 0 Then
    MsgBox "STOP!"
End If

MinPer = 1 - (Val(n1) / 100)
MaxPer = 1 + (Val(n2) / 100) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:48:37.613

这是因为数字“10”在字符串（第二个字符）中有一个“0”，所以两者都评估为真。

试试这个：

```
If (MinPer = "0") And (MaxPer = "0") Then
    MsgBox "STOP!"
End If 
```

为了获得额外的控制，保存用户输入（MinPer，MaxPer），然后在对它们执行任何数学运算之前给它们发送文本以确保其有效性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T15:48:54.957

InStr(MinPer, "0") 只是检查字符串是否包含零字符。

您需要将字符串值转换为整数。使用 IsNumeric 和 CInt 函数来执行此操作。请参阅此网址：

[如果字符串是数字，vba将字符串转换为int](https://stackoverflow.com/questions/6202074/vba-convert-string-to-int-if-string-is-a-number)

```
Dim minPerINT as Integer
Dim maxPerINT as Integer

If IsNumeric(minPer) Then
    minPerINT = CInt(minPer)
Else
    minPerINT = 0
End If
If IsNumeric(maxPer) Then
    maxPerINT = CInt(maxPer)
Else
    maxPerINT = 0
End If

If minPerINT = 0 and maxPerINT=0 Then
    MsgBox "STOP!"
End If 
```

取决于可以输入的数据 使用 len() 函数检查数据的长度是否为零也是一个好主意。

# javascript - $.ajax 第一次不工作

> ID：11416941
> 
> 赞同：1
> 
> 时间：2012-07-10T15:40:01.580
> 
> 标签：javascript, jquery, ajax

我在 html 页面中有一个按钮。

```
<input type="image" src="images/login_button.png" id="imageButton" onclick="LoginButtonClick();" /> 
```

我在单击按钮时调用此方法：

```
LoginButtonClick = function() {
    alert ("Button click event raised");  // this alert msg raising every time when onclick event occurs.
    $.ajax({  
        alert ("Inside Ajax.");  // This alert not executing first 1 or 2 times.
        type: 'GET',
        url: 'http://URL/Service.svc/LoginValidation',
        dataType: 'json',
        error: pmamml.ajaxError,
        success: function(response, status, xhr) {
            if (response != "") {
                alert ("Response receive ");
                }
            else {
                alert("Invalid Data.");
            }
        }
    });
} 
```

正如我上面提到的，`$.ajax`首先 2 、 3 按钮单击尝试不起作用。

在 mozilla 中，它会抛出错误“[Exception...”组件返回失败代码：0x80004005 (NS_ERROR_FAILURE)”nsresult:“0x80004005 (NS_ERROR_FAILURE)”位置：“JS frame :: JQuery.js :: :: line 20”数据：不]”

有没有办法解决这个问题。。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T15:45:04.013

我不确定它为什么*稍后*执行。但这是交易 - 您将警报放置在定义 .ajax 方法的参数的对象文字中。它不属于那里。尝试将警报放入您的成功和/或错误处理程序中。

**更新**

你要等多久？当您发起一个 ajax 请求时，它不会挂起 UI。可能是您在第 3 次或第 4 次尝试时看到了第一次点击的结果，并认为您在第 3 次或第 4 次尝试时触发了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:05:45.773

**注意**-如果域不是当前域，则输入绝对路径不起作用-浏览器也遵守[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)-这可以解释为什么执行时没有任何反应-我建议您查看浏览器调试器核实。

您应该像这样绑定点击事件：

```
$(document).ready(function() {
  $('#imageButton').click(function() {
    // code here
  });
}); 
```

所以您的完整代码将如下所示：

HTML

```
<input type="image" src="images/login_button.png" id="imageButton" /> 
```

JavaScript

```
$(document).ready(function () {
  $('#imageButton').click(function () {
    alert("Button click event raised"); // this alert msg raising every time when onclick event occurs.
    $.ajax({
      type: 'GET',
      url: 'http://URL/Service.svc/LoginValidation',
      dataType: 'json',
      error: pmamml.ajaxError,
      success: function (response, status, xhr) {
        if (response != "") {
          alert("Response receive ");
        } else {
          alert("Invalid Data.");
        }
      }
    });
  });
}); 
```

我已经删除了该`alert ("Inside Ajax.");`行，因为这不会被执行 - 你传递一个`{}`参数对象而不是要执行的代码。如果要在发送 ajax 请求之前执行，请执行以下操作：

```
$.ajax({
   beforeSend: function() {
     alert('inside ajax');
   }
   // other options here
}); 
```

[该功能的文档在`$.ajax()`这里](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T19:14:24.760

我同意您将第二个警报放在错误的位置，并且不知道 pmamml.ajaxError 函数是什么，但可能是您的调用返回错误，因此您的成功警报没有触发。您可以检查错误和完成功能如下：

```
LoginButtonClick = function() {
alert ("Button click event raised");  // this alert msg raising every time when onclick event occurs.
$.ajax({  
    type: 'GET',
    url: 'http://URL/Service.svc/LoginValidation',
    dataType: 'json',
    error: function(jqXHR, textStatus, errorThrown){
          alert ("ajax call returns error: " + errorThrown);
    },
    success: function(response, status, xhr) {
        if (response != "") {
            alert ("Response receive ");
            }
        else {
            alert("Invalid Data.");
        }
    },
   complete:function(jqXHR, textStatus){
         alert('completed with either success or fail');
    }
}); 
```

}

如果发出并返回请求，您可以使用 Google Chrome 的开发者工具 -> 网络选项卡进行测试（https://developers.google.com/chrome-developer-tools/docs/network）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T15:46:43.430

该`$.ajax()`函数接收一组配置 Ajax 请求的键/值对作为参数。我不认为把它`alert()`放在那里语法是正确的。

# spring-mvc - Spring MVC 使用 @PathVariable 映射查询参数而不是 URI 模板值

> ID：11416942
> 
> 赞同：0
> 
> 时间：2012-07-10T15:40:02.307
> 
> 标签：spring-mvc

```
@RequestMapping(value = "/account/{id}", method = RequestMethod.GET)
public ModelAndView getAccount(@PathVariable String id)
        throws ProfileNotFoundException {
   System.out.println(id);
   return null;
} 
```

.../account/12345 结果为空

.../account/test?id=12345 '12345' 结果为 12345

不知道如何解决这个问题，但我希望第一个链接而不是第二个链接工作。这是我的 webmvc-config.xml

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
                        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd                 
                        http://www.springframework.org/schema/context 
                        http://www.springframework.org/schema/context/spring-context-3.1.xsd                 
                        http://www.springframework.org/schema/mvc 
                        http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">

    <context:component-scan base-package="com.twheys.lexika.web.**"
        use-default-filters="false">
        <context:include-filter expression="org.springframework.stereotype.Controller"
            type="annotation" />
    </context:component-scan>

    <mvc:annotation-driven/>

    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass"
            value="org.springframework.web.servlet.view.JstlView"></property>
        <property name="prefix" value="WEB-INF/views/"></property>
        <property name="suffix" value=".jsp"></property>
    </bean>
</beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:05:02.277

只需将其指定为`@PathVariable("id")`- 没有负责解析参数值的 HandlerMethodArgumentResolver 尝试通过参数名称找出参数值，但参数名称（id）在编译期间会丢失（除非调试符号在编译期间打开，这通常它不是）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T07:59:33.863

```
@RequestMapping(value = "/authors/{authorId}")
public ModelAndView getAuthorById(@PathVariable String authorId) {
    Author author = bookService.getAuthorById(authorId);
    ModelAndView mav = 
        new ModelAndView("bookXmlView", BindingResult.MODEL_KEY_PREFIX + "author", author);
    return mav;
} 
```

上面的代码对我来说很好。请以类似方式使用。

# vba - 库存的数量宏excel

> ID：11416944
> 
> 赞同：1
> 
> 时间：2012-07-10T15:40:05.713
> 
> 标签：vba, excel

我正在尝试让 Excel 用作库存扫描阅读器。我在扫描时遇到问题，因为它在我扫描时不断添加到 col A，即使它是重复的，我希望它能够识别出扫描的项目与最后一个相同并添加到 col QTY。如果有人可以帮助我如何编写代码，那就太好了！

图片 - 我不会放一张，但 COL A 是条形码，COL B 是说明，COL C 是数量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T17:16:04.597

将此代码放在工作表代码模块中（右键单击选项卡并选择“查看代码”）。

您的列表标题进入 A4（条形码）B4（描述）C4（计数）。选择单元格 A1 并开始扫描。如果它在列表中找到匹配项，它将更新计数，如果没有，则添加一个新行。我只通过输入值进行了测试，但只要每次扫描都发送 {enter} ，扫描仪的工作方式应该相同。

```
Private Sub Worksheet_Change(ByVal Target As Range)

    Const SCAN_CELL As String = "A1"
    Const RANGE_BC As String = "A5:A500"
    Dim val, f As Range, rngCodes As Range

    If Target.Cells.Count > 1 Then Exit Sub
    If Intersect(Target, Me.Range(SCAN_CELL)) Is Nothing Then Exit Sub

    val = Trim(Target.Value)
    If Len(val) = 0 Then Exit Sub

    Set rngCodes = Me.Range(RANGE_BC)

    Set f = rngCodes.Find(val, , xlValues, xlWhole)
    If Not f Is Nothing Then
        With f.Offset(0, 2)
            .Value = .Value + 1
        End With
    Else
        Set f = rngCodes.Cells(rngCodes.Cells.Count).End(xlUp).Offset(1, 0)
        f.Value = val
        f.Offset(0, 1).Value = "enter description"
        f.Offset(0, 2).Value = 1
    End If

    Application.EnableEvents = False
    Target.Value = ""
    Application.EnableEvents = True

    Target.Select

End Sub 
```

# android - 为什么使用 Jacksons ObjectMapper 会多次收集 Android 垃圾？

> ID：11416947
> 
> 赞同：6
> 
> 时间：2012-07-10T15:40:14.363
> 
> 标签：android, garbage-collection, jackson

我的 Android 应用程序有一个自定义 AsyncTask 来对对象列表进行休息调用。我正在使用 Jackson 将我的响应转换为 Java，当通过 ObjectMapper.readValue() 映射 Json 时，我看到大约 30 个垃圾收集调用。有趣的是，如果我第二次、第三次、第四次（通过选择刷新按钮）进行相同的调用，则只有一次 GC 调用。任何想法为什么每次我启动我的 Android 应用程序时都会在第一次通话时发生这种情况？

异步任务.java

```
doInBackground() {

HttpGet request = new HttpGet(url);
HttpClientUtil.setJsonAccept(request);
HttpResponse response = httpClient.execute(request);
HttpEntity responseEntity = new BufferedHttpEntity(response.getEntity());

// Call that garbage collect 30+ times the first exectution
ArrayList<MyObject> responseCollection = mapper.readValue(responseEntity.getContent(), new TypeReference<ArrayList<MyObject>>(){});

return responseCollection;
} 
```

LogCat 输出

```
07-10 11:05:13.484: D/dalvikvm(5518): GC_CONCURRENT freed 497K, 5% free 14030K/14727K, paused 3ms+4ms
07-10 11:05:13.484: D/dalvikvm(5518): GC_CONCURRENT freed 497K, 5% free 14030K/14727K, paused 3ms+4ms
07-10 11:05:13.484: D/dalvikvm(5518): GC_CONCURRENT freed 497K, 5% free 14030K/14727K, paused 3ms+4ms
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T00:23:30.507

Android 上的 GC 总体上是激进的，它不一定与杰克逊有任何关系。更多信息在这里：

[Android垃圾收集器的技术细节](https://stackoverflow.com/questions/4818869/technical-details-of-android-garbage-collector)

# android - Android 上的完整性测量架构

> ID：11416951
> 
> 赞同：-1
> 
> 时间：2012-07-10T15:40:35.487
> 
> 标签：android, mobile, architecture, measurement, integrity

我想详细了解 IMA（完整性测量架构）未包含在 Android 中的原因。任何论文或读物都受到高度赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T08:46:59.443

以下是一些关于该主题的论文的链接：

[超越内核级完整性测量：为 Android 平台启用远程证明](http://profsandhu.com/zhang/pub/trust10-android.pdf)

[Android 上的 TPM 模拟器、TrouSerS 和 IMA](http://csrdu.org/blog/2011/05/25/tpm-emulator-trousers-ima-on-android/)

[Jean-Pierre Seifert - 移动平台的高效完整性测量和证明](http://mobisec.org/2009/docs/1%20-%20Jean-Pierre%20Seifert%20-%20Efficient%20Integrity%20Measurement%20and%20Attestation%20for%20Mobile%20Platforms.pdf)

# c# - c# - 在 div id 上使用 FindControl 时出错

> ID：11416959
> 
> 赞同：8
> 
> 时间：2012-07-10T15:41:04.177
> 
> 标签：c#, asp.net, findcontrol

我有一个 ASP.NET 站点，我试图通过它们的 ID 从 C# 代码隐藏文件中访问 div 元素。本质上，我想查看是否存在 div 元素，如果存在，则更改其属性。

我发现许多资源指向十几种不同的解决方案，但它们似乎都不起作用。

**ASP.Net 页面上的 HTML：**

```
<div class="contentArea">
     <div class="block" id="button1" runat="server">
            Some Content Here
     </div>
     <div class="block" id="button2" runat="server">
            Some Content Here
     </div>
     <div class="block" id="button3" runat="server">
            Some Content Here
     </div>
</div> 
```

**C# 代码背后（我试过的例子）：**

```
System.Web.UI.HtmlControls.HtmlGenericControl div1 = (System.Web.UI.HtmlControls.HtmlGenericControl)this.FindControl("button1");
div1.Attributes["class"] = "classNameHere"; 
```

或者

```
Control div1 = this.FindControl("button1");
div1.GetType(); 
```

当代码到达上述每个示例的第二行时，我收到一个错误：

> 你调用的对象是空的。

如果我尝试以下操作：

```
if (div1 != null)
{
    // Do Something;
} 
```

什么都没有发生，因为 div1 始终设置为 null。具有讽刺意味的是，如果我查看 Locals 窗口并检查它，我可以在列表中看到 button# id，所以我知道它们在那里，但系统的行为就像它没有找到控件一样。

我的最终目标是找到按钮 div 的最大 id #（查看我的 html 示例，最大 id 为 3（button3）。也许有更好的方法来解决它，但无论哪种方式，一旦我有了我的max id，我希望能够触摸每个 div 并更改一些 css 属性。

虽然我可以通过 jQuery 轻松完成所有这些工作，但在这种情况下，我需要在 C# 中完成这些工作。

任何帮助深表感谢。如果您需要更多信息，请告诉我。

**更新** 我从头开始创建了一个新的 C# web 项目。添加母版页（而不是更改它）并使用母版页添加网络表单后，我只在 Content ID="Content2" 下的网络表单中添加了一行：

```
<div id="button1"></div> 
```

从后面的 c# 代码中，我仍然遇到与以前相同的问题。

**最终更新和答案** 我很震惊没有人（包括我自己）从上述更新中发现我的错误。当我在 div 下从头开始创建新项目时，我从来没有放 runat="server" 。以下是我从头开始在新项目下解决问题的方法：

将 runat="server" 添加到 div：

```
<div id="button1" runat="server"></div> 
```

然后我在 MasterPage 下的 ContentPlaceHolder 上做了一个 FindControl：

```
ContentPlaceHolder myPlaceHolder = (ContentPlaceHolder)Master.FindControl("ContentPlaceHolder1"); 
```

注意：这是默认创建的 Site.Master 页面上 ContentPlaceHolder 代码的样子：

```
<asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">

</asp:ContentPlaceHolder> 
```

在后面的代码中找到这个 ContentPlaceHolder 后，我在这个占位符中搜索了 button1：

```
using System.Web.UI.HtmlControls;
HtmlControl myControl = (HtmlControl)myPlaceHolder.FindControl("button1"); 
```

最后我检查一下 myControl 是否为空：

```
if (myControl != null)
{
    \\ Do Something
} 
```

当我运行这段代码时，它找到了我正在寻找的 div。这是所有放在一起的完整代码：

```
using System.Web.UI.HtmlControls;

ContentPlaceHolder myPlaceHolder = (ContentPlaceHolder)Master.FindControl("ContentPlaceHolder1");
HtmlControl myControl = (HtmlControl)myPlaceHolder.FindControl("button1");

if (myControl != null)
{
    // Do Something
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T16:23:02.320

如果您的页面使用 MasterPage，则 div 控件将不在主控件集合中。该集合仅包含指向 MasterPage 的 ContentPlaceholder 的 Content 控件。

有三个选项：

1.  `FindControl`在内容控件上使用：`contentControl.FindControl("button1");`
2.  进行递归`FindControl`，直到找到所需的控件
3.  通常，您的 div 控件的声明会添加到您的 Designer.cs 代码隐藏中，因此您可以通过其名称直接访问该控件：`button1.Attributes["class"] = "classNameHere";`

## 更新

我创建了一个 MasterPage，向其中添加了一个内容页面，并添加`<div id="button1" runat="server">Some text</div>`到了内容页面。

在我的内容页面的代码隐藏中，我添加了以下代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    var control = FindHtmlControlByIdInControl(this, "button1");

    if (control != null)
    {
        control.Attributes["class"] = "someCssClass";
    }
}

private HtmlControl FindHtmlControlByIdInControl(Control control, string id)
{
    foreach (Control childControl in control.Controls)
    {
        if (childControl.ID != null && childControl.ID.Equals(id, StringComparison.OrdinalIgnoreCase) && childControl is HtmlControl)
        {
            return (HtmlControl)childControl;
        }

        if (childControl.HasControls())
        {
            HtmlControl result = FindHtmlControlByIdInControl(childControl, id);
            if (result != null) return result;
        }
    }

    return null;
} 
```

这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:44:01.413

您需要将 runat=server 属性添加到要在后面的代码中访问的任何控件。有关更多帮助，请参阅本文。

[从 javascript 和代码隐藏访问 <div>](https://stackoverflow.com/questions/8228489/accessing-div-from-both-javascript-and-code-behind)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T15:44:39.547

我似乎无法重现您的问题，您的 DIV 是否有可能在 UpdatePanel、Repeater 或 Grid 等模板控件中？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-23T22:05:39.180

如果添加 `runat=server`，请在 div 的最后添加：

这将起作用

```
<div id="divBtn" class="mybuttonCass" runat="server"> 
```

然而，这不会

```
<div runat="server" id="divBtn" class="mybuttonCass"> 
```

通过这样做，您可以将代码隐藏中的任何属性修改为：

```
divBtn.Style["display"] = "none"; 
```

这甚至适用于母版页。div 不包含在母版页中。

# apache - .htaccess 如果文件存在则重定向，否则通过

> ID：11416966
> 
> 赞同：2
> 
> 时间：2012-07-10T15:41:18.437
> 
> 标签：apache, .htaccess, redirect

在我维护的网站上，曾经有一个重定向，它将请求重定向到相应的 .php 文件，如下所示： www.example.com/press-room -> www.example.com/press-room .php。但是，如果 php 文件不存在，它会将请求传递给 WordPress，然后它会查找带有 slug 'press-room' 的页面。

好吧，在过去的几天里，.htaccess 文件被重置，重定向不再存在。如何在不干扰 WordPress 的情况下重新实施此规则？也就是说，*只有*在php文件存在的情况下，我如何才能实现这个重定向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:41:43.177

在你的 wordpress 规则之上试试这个：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

首先，确保它*不是*目录。其次，检查是否将 附加`.php`到末尾会为您提供现有文件。最后，进行重写。

# tsql - Handle divisor 0 error when some divisors are NULL

> ID：11416970
> 
> 赞同：1
> 
> 时间：2012-07-10T15:41:40.963
> 
> 标签：tsql

I am getting dividing by 0 errors. I noticed that sometimes the field I'm dividing by is NULL.

```
(SUM(RentMonths * SQFT) / SUM(SQFT)) 
```

What's the proper way to handle this situation when SQFT can be null at times? I know it's probably bad data but that's besides the point; I can't fix that right now.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T15:43:06.133

Dividing by `NULL` is perfectly valid - the result is simply `NULL`. The problem is (as the error message states) when you try to divide by **zero**.

You can use [`NULLIF`](http://msdn.microsoft.com/en-us/library/ms177562.aspx) to solve this problem:

```
(SUM(RentMonths * SQFT) / NULLIF(SUM(SQFT), 0)) 
```

The result will be `NULL` if the divisor is `0` or if either operand is `NULL`.

* * *

As pointed out in the comments, a `CASE` statement could also be used:

```
CASE WHEN SUM(SQFT) <> 0 THEN (SUM(RentMonths * SQFT) / SUM(SQFT)) END 
```

The advantage is that this will work in almost any database, but a disadvantage is that it repeats the expression to calculate the divisor.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:47:10.263

IF 语句在这里似乎很合适，不是吗？

不知道这是否是正确的 TSQL 语法，但是：

```
IF @SQFT IS NOT NULL (SUM(RentMonths * SQFT) / SUM(SQFT)) 
```

# linq - 使用 EF "Include" 查询并在 Where 中包含相关表

> ID：11416972
> 
> 赞同：0
> 
> 时间：2012-07-10T15:41:48.847
> 
> 标签：linq, entity-framework-4.1

到目前为止，我认为我可以做到：

```
 var num = db.MyTable.Include(x => x.RelatedTable)
           .Count( x.idTenant == CurrentTenantID && x.Active &&
              x.RelatedTable.SomeProperty.Value == true); 
```

这总是返回零记录。我是否错误地假设包括 RelatedTable 我可以在 where 部分使用它？

顺便说一句......“SomeProperty”是可空的，这就是“.Value”的原因。

我正在使用实体框架 4.1。（数据库优先）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:51:54.290

`Include`如果您只想部分访问导航属性，则不需要使用`Where`。`Include`仅用于从数据库中获取（急切加载）相关记录以及主记录到您的应用程序，但如果您只想计算记录，则没有任何意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:51:59.540

您是否尝试获取记录数？如果是这样，你为什么还需要`Include`? `RelatedTable`Entity Framework在评估您的`Count`条件时将为您延迟加载实体集。此外，如果`SomeProperty`是 a `bool?`，您应该在检查值本身之前检查它是否有值。

```
var num = db.MyTable.Count(x => 
    x.idTenant == CurrentTenantID && 
    x.Active && 
    (x.RelatedTable.SomeProperty.HasValue && 
     x.RelatedTable.SomeProperty.Value)); 
```

# django - Django Custom Header Conversion

> ID：11416973
> 
> 赞同：1
> 
> 时间：2012-07-10T15:41:54.637
> 
> 标签：django, http

Django converts custom headers per the Django docs:

> With the exception of CONTENT_LENGTH and CONTENT_TYPE, as given above, any HTTP headers in the request are converted to META keys by converting all characters to uppercase, replacing any hyphens with underscores and adding an HTTP_ prefix to the name. So, for example, a header called X-Bender would be mapped to the META key HTTP_X_BENDER.

This works as expected on my development (Django Runserver + SQLite) instance. On my staging and production instance (Apache + MySQL), Django also replaces any periods (.) with underscores. Thus, com.example.api.token becomes HTTP_COM.EXAMPLE.API.TOKEN on my development instance. On my staging and production instance com.example.api.token becomes HTTP_COM_EXAMPLE_API_TOKEN.

Why the difference?

# javascript - 如何在 Javascript 中切换 html 元素的可见性？

> ID：11416979
> 
> 赞同：1
> 
> 时间：2012-07-10T15:42:32.290
> 
> 标签：javascript

我想知道是否有人能弄清楚为什么我的功能无法正常工作。我想要实现的是当一个按钮被点击时它会显示文本，当它再次被点击时它会隐藏它等等。

```
function hideshow (){
    var showhide=document.getElementById('text');
    if(showhide.style.display="none")
    {
        showhide.style.display="block";
    }
    else{
        showhide.style.display="none";
    }
} 
```

到目前为止，当我单击它一次时，我让它显示我的文本，但是一旦我再次单击它，它对文本没有影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:48:47.910

我认为应该是：

```
function hideshow (){
    var showhide = document.getElementById('text');
    if (showhide.style.display == "none")
    {
        showhide.style.display = "block";
    }
    else{
        showhide.style.display = "none";
    }
} 
```

因此，比较时使用“==”而不是“=”。'=' 运算符分配一个值。在 javascript 中还有 '===' 运算符。不同之处在于 '==' 将转换值，而 '===' 将严格比较。

例如：

```
0 == false; // will return true
0 === false; // will not 
```

所以你也可以使用

```
if (showhide.style.display === "none") 
```

[您可以在此处](https://stackoverflow.com/questions/523643/difference-between-and-in-javascript)阅读有关运算符的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:46:17.660

你应该`===`在你的`if`陈述中使用。`=`是赋值运算符：

```
function hideshow (){
    var showhide=document.getElementById('text');
    if(showhide.style.display==="none")
    {
        showhide.style.display="block";
    }
    else{
        showhide.style.display="none";
    }
} 
```

或者：

```
function hideshow (){
    var showhide=document.getElementById('text');

    showhide.style.display = showhide.style.display === "none" ? 
        "block" : 
        "none";  
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T16:01:02.993

您应该使用比较运算符`==`，而不是使用运算符分配值`=`。

尝试：

```
function hideshow() {
    var showhide = document.getElementById('text').style;
    (showhide.display = showhide.display == "none" ?  "block" : "none" )
} 
```

您可以使用以下语句在一个语句中分配和比较：

```
(showhide.display = showhide.display == "none" ?  "block" : "none" )
                  ^assign            ^comparison 
```

演示：http: [//jsfiddle.net/7Eaf2/](http://jsfiddle.net/7Eaf2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T15:47:51.183

```
function hideShow() {
    el.style.display != "none" ? "none" : "block";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T15:55:44.510

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript">
        function hideshow() {
            var showhide=document.getElementById('text');
            if(showhide.style.visibility=="hidden")
            {
                showhide.style.visibility="visible";
            }
            else{
                showhide.style.visibility="hidden";
            }
        }
    </script>
</head>
<body>
    <div id="text">Text</div>
    <button onclick="hideshow()">hideshow</button>
</body>
</html> 
```

# python - Least-Squares Regression of Matrices with Numpy

> ID：11416981
> 
> 赞同：1
> 
> 时间：2012-07-10T15:42:36.083
> 
> 标签：python, numpy, regression, linear-regression

I'm looking to calculate least squares linear regression from an N by M matrix and a set of known, ground-truth solutions, in a N-1 matrix. From there, I'd like to get the slope, intercept, and residual value of each regression. Basic idea being, I know the actual value of that should be predicted for each sample in a row of N, and I'd like to determine which set of predicted values in a column of M is most accurate using the residuals.

I don't describe matrices well, so here's a drawing:

```
(N,M) matrix with predicted values for each row N
 in each column of M...

##NOTE: Values of M and N are not actually 4 and 3, just examples
   4 columns in "M"
  [1, 1.1, 0.8, 1.3]
  [2, 1.9, 2.2, 1.7]  3 rows in "N"
  [3, 3.1, 2.8, 3.3]

(1,N) matrix with actual values of N

  [1]
  [2]   Actual value of each sample N, in a single column
  [3] 
```

So again, for clarity's sake, I'm looking to calculate the lstsq regression between each column of the (N,M) matrix and the (1,N) matrix.

For instance, the regression between

```
[1]   and [1]
[2]       [2]
[3]       [3] 
```

then the regression between

```
[1]   and  [1.1]
[2]        [1.9]
[3]        [3.1] 
```

and so on, outputting the slope, intercept, and standard error (average residual) for each regression calculated.

So far in the numpy/scipy documentation and around the 'net, I've only found examples computing one column at a time. I had thought numpy had the capability to compute regressions on each column in a set with the standard

```
np.linalg.lstsq(arrayA,arrayB) 
```

But that returns the error

```
ValueError: array dimensions must agree except for d_0 
```

Do I need to split the columns into their own arrays, then compute one at a time? Is there a parameter or matrix operation I need to use to have numpy calculate the regressions on each column independently?

I feel like it should be simpler? I've looked it all over, and I can't seem to find anyone doing something similar.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:33:02.173

也许你换了A和B？

以下对我有用：

```
A=np.random.rand(4)+np.arange(3)[:,None]
# A is now a (3,4) array
b=np.arange(3)
np.linalg.lstsq(A,b) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:52:39.083

arrayB 的第 0 维必须与 arrayA 的第 0 维相同（参考：np.linalg.lstsq 的官方文档 [）](http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.lstsq.html)。您需要具有维度的矩阵`(N, M) and (N, 1)`或`(N, M) and (N)`代替`(N,M) and (1,N)`您现在使用的矩阵。

请注意，矩阵`(N, 1)`和`N`维度矩阵将给出相同的结果——但数组的形状会有所不同。

我从你那里得到了一个稍微不同的例外，但这可能是由于不同的版本（我在 Windows 上使用 Python 2.7，Numpy 1.6）：

```
>>> A = np.arange(12).reshape(3, 4)
>>> b = np.arange(3).reshape(1, 3)

>>> np.linalg.lstsq(A,b)
# This gives "LinAlgError: Incompatible dimensions" exception

>>> np.linalg.lstsq(A,b.T)
# This works, note that I am using the transpose of b here 
```

# java - 联系 API Android，没有显示

> ID：11416983
> 
> 赞同：0
> 
> 时间：2012-07-10T15:42:39.667
> 
> 标签：java, android, api

> **可能重复：**
> [Android中的调用方法](https://stackoverflow.com/questions/11401385/calling-method-in-android)

我正在尝试联系 API。我还没有看到它是否有效……但我的测试信息甚至无效。

这是我的主要活动：

```
public class MainActivity extends Activity {

public final static String EXTRA_MESSAGE = "com.example.test.MESSAGE";

@SuppressLint("ParserError")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void sendIP(View view){
    Intent intent = new Intent(this, DisplayMessageActivity.class);
    startActivity(intent);

} 
```

这是 DisplayMessageActivity：-“hello”应该写在屏幕上，而不是空白。我想如果那没有出现，那么我的请求可能也没有在任何地方实现，所以关于这方面的建议也会有所帮助。

```
public class DisplayMessageActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);

        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://api.site/");

        try {
            // Add your data
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);

            // Execute HTTP Post Request
            HttpResponse response = httpclient.execute(httppost);

            String test = "hello";

            TextView textView = new TextView(this);
            textView.setTextSize(40);
            textView.setText(test);
            //TextView myTextView = (TextView) findViewById(R.id.myTextView);
           // myTextView.setText(test);

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
        } catch (IOException e) {
            // TODO Auto-generated catch block
        }

}
} 
```

而且我已经允许在清单中访问互联网！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:16:06.780

您需要 setContentView() 到 xml 布局或直接到 DisplayMessageActivity 的 onCreate() 中的 textview。

您还需要将网络操作移至 AsyncTask 或以其他方式将其从 UI 线程中移除。虽然一些旧的官方样本对此不好，但这从来都不是一个好主意，并且在更新的 Android 版本上会导致主动崩溃。

# .htaccess - htaccess 使用 Google 跟踪代码重写 URL

> ID：11416986
> 
> 赞同：1
> 
> 时间：2012-07-10T15:43:00.277
> 
> 标签：.htaccess, redirect, url-rewriting

首先，对不起我的英语......我希望你能理解我的问题:)

我的公司开展了一项电子邮件活动，其中包括指向我们网站的链接。此 URL 有一个 Google 跟踪代码来跟踪该广告系列。

不幸的是，网址是错误的：

```
http://www.mysite.fr/category/mypage.html/?utm_source=source&utm_medium=medium&utm_campaign=campaign 
```

但是“mypage.html”和指向不存在页面的跟踪代码之间有一个斜线。

我尝试了这些规则来重定向 url，而不向所有人发送新电子邮件，但它们不起作用：

```
RewriteRule ^/category/mypage\.html/\?utm_source\=source\&utm_medium\=medium\&utm_capaign\=campaign$ http://www.mysite.fr/category/mypage.html?utm_source=source&utm_medium=medium&utm_campaign=campaign [R=301,L] 
```

或者 ：

```
RedirectPermanent /category/mypage.html/ http://www.mysite.fr/category/mypage.html?utm_source=source&utm_medium=medium&utm_campaign=campaign 
```

我不知道如何写规则。有人能帮助我吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:47:26.470

您的`RewriteRule`. 如果您将其放入 .htaccess 文件中，则需要删除正则表达式中的前导斜杠（前缀），因为 apache 在将其放入 .htaccess 文件中的规则之前会将其从 URI 中删除。其次，您无法匹配a 中正则表达式中的查询字符串（以**?**`RewriteRule`开头的内容） 。

不知道你为什么`RedirectPermanent`不工作。这看起来很好，除了如果您将查询字符串排除在外，它们会自动附加。我认为这就是你想要的，所以删除目标中的查询字符串：

```
RedirectMatch 301 ^/category/mypage.html/$ http://www.mysite.fr/category/mypage.html 
```

# c++ - Using COM Interop to use a DLL

> ID：11416988
> 
> 赞同：3
> 
> 时间：2012-07-10T15:43:02.650
> 
> 标签：c++, dll, com, interop

I have to use a DLL in my project that is a .NET assembly. I have to use C++ for this project. I'm a relative beginner to programming, so my knowledge doesn't extend too far. I was told COM Interop is one way to get the DLL to work in my project (the other being C++/CLI). The problem is I have ZERO idea how to begin, as I've never done anything like this before, and the Microsoft documentation on the matter isn't really helping.

If anyone can even point me in the right direction, that would be much obliged.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:46:37.910

这里有一些很好的资源可以帮助您入门：

*   [COM简介](http://www.codeproject.com/Articles/633/Introduction-to-COM-What-It-Is-and-How-to-Use-It)
*   [COM from Scratch](http://www.codeproject.com/Articles/6726/COM-from-scratch-PART-ONE)（涵盖使用 C++ 中的 COM）
*   [MSDN 关于 COM 的部分](http://msdn.microsoft.com/en-us/library/ms694363%28VS.85%29.aspx)

话虽如此，您还需要确保您的 .NET 项目设置为通过 COM 公开类。确保`Register For COM Interop`在您的项目设置中打开，并使用标记适当的类型[`[ComVisible(true)]`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.comvisibleattribute.aspx)（除非您制作整个程序集`ComVisible`，在这种情况下，您将标记您不想公开的类型`[ComVisible(false)]`）

# java - where should i place bluecove-2.1.0 folder

> ID：11416989
> 
> 赞同：1
> 
> 时间：2012-07-10T15:43:04.380
> 
> 标签：java, eclipse, bluetooth, bluecove

I am trying to write a project that communicates with a Bluetooth device and receives information from it. I googled it and from what I understood I had to get a package named 'bluecove' which will contain all I need. I downloaded the jar file, and (in Eclipse) by right-clicking on 'my project>build path>jar file>bluecove', I added the jar file into my project. When I try to run some lines of code, it gives me an error that says that some content is unavailable:

```
Native Library intelbth_x64 not available
Native Library bluecove_x64 not available 
```

Then I went back to the bluecove website and i saw there another Windows file for download called 'bluecove-2.1.0-sources.tar.gz'

here is a link: [http://code.google.com/p/bluecove/downloads/list](http://code.google.com/p/bluecove/downloads/list)

When I downloaded it, there was a folder inside named 'bluecove-2.1.0' which I think I have to copy into one of the system's folders. What should I be doing here?

Thanks p.s i will need the answer as soon as possible - in the next 9 hours at most, please help me and again thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-27T11:37:09.953

如[here](https://code.google.com/p/bluecove/issues/detail?id=109)所述（由oxc评论），您需要下载指定的.jar：[http ://snapshot.bluecove.org/distribution/download/2.1.1-SNAPSHOT/2.1.1-SNAPSHOT.62/](http://snapshot.bluecove.org/distribution/download/2.1.1-SNAPSHOT/2.1.1-SNAPSHOT.62/)

# coffeescript - 从列表理解创建两个数组

> ID：11416993
> 
> 赞同：2
> 
> 时间：2012-07-10T15:43:24.740
> 
> 标签：coffeescript, list-comprehension

现在，我在 CoffeeScript 中这样做：

```
keys = (key for key of data)
values = (v for k,v of data) 
```

`data`对象（不是数组）在哪里。我正在尝试创建两个数组，其中键是属性名称的数组，值是值的数组。

这编译为：

```
var keys, values;
keys = (function() {
    var _results;
    _results = [];
    for (key in data) {
      _results.push(key);
    }
    return _results;
  })();
  values = (function() {
    var _results;
    _results = [];
    for (k in data) {
      v = data[k];
      _results.push(v);
    }
    return _results;
  })(); 
```

我希望能够将这两个循环组合成一个循环，并且无法弄清楚如何（或是否可能）使用列表理解来做到这一点。

我所做的另一个尝试是创建两个数组并自己将项目推送给它们：

```
keys = []
values = []
keys.push k for k,v of data 
```

这让我可以很好地按下键，但我也无法弄清楚要推送的语法`values`。

如何从单个列表理解创建两个数组？我最好自己编写循环吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:53:14.123

我认为最简单的方法是自己循环：

```
keys = []
values = []
for key, value of data
   keys.push key
   values.push value 
```

转换为

```
var key, keys, value, values;

keys = [];

values = [];

for (key in data) {
  value = data[key];
  keys.push(key);
  values.push(value);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:10:13.750

[如果您不使用外部库， @Jimmy 的答案](https://stackoverflow.com/a/11417185/581845)可能是最简单的，但是如果您已经在使用 Underscore，您可以生成一个数组`[key, value]`数组，然后将[`zip`](http://underscorejs.org/#zip)它们一起生成：

```
[keys, values] = _.zip ([k, v] for k, v of data)... 
```

splats 的用法和 do 一样`_.zip.apply(_, [k, v] for k, v of data)`。

# windows - 在终端服务器上使用程序期间的“Windows 正在配置”对话框

> ID：11416997
> 
> 赞同：0
> 
> 时间：2012-07-10T15:43:28.813
> 
> 标签：windows, remote-desktop, windows-installer, terminal-services

我在终端服务器环境中遇到了一个特别烦人的问题，当尝试在软件中执行功能时，Windows 会抛出类似于 Microsoft Office 的“Windows 正在配置”对话框。我怀疑它可能与程序的安装方式有关，但即使使用[http://technet.microsoft.com/en-us/library/cc742815%中描述的“在终端服务器上安装程序”功能28v=ws.10%29.aspx](http://technet.microsoft.com/en-us/library/cc742815%28v=ws.10%29.aspx)没有效果。我最后的想法是这可能与用户配置文件有关，但我无法为此确定任何事情。有没有人在其他程序中遇到过这个问题并想出了如何解决它？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T00:25:36.683

您很可能在每台机器安装中安装了一些每用户文件或注册表设置。对于每个用户，都必须修复这些并重新运行安装过程。

如果您查看事件日志，您将能够识别导致修复被触发的有问题的组件。此外，值得调查构建 MSI 时的日志文件 - 在 MSI 验证期间可能会触发有关此问题的警告。

# java - InnerClass 的 Java NoClassDefFoundError

> ID：11416999
> 
> 赞同：0
> 
> 时间：2012-07-10T15:43:38.580
> 
> 标签：java, ant, jar

我正在尝试从 ant 执行 Java 类。我首先为我的类创建一个 jar 文件，然后通过 ant 目标执行它。但它给我这个错误：

> 线程“主”java.lang.NoClassDefFoundError 中的异常：com/abc/utils/ClassName$InnerClass

我在构建文件中创建一个 jar，如下所示：

```
<jar destfile="${dist.dir}/../lib/jarFile.jar" basedir="${basedir}/classes" includes="com/abc/utils/ClassName.class" /> 
```

如果我在创建 jar 的过程中删除了“包含”，那么一切都很好，我可以执行 jar 文件，但我不想包含 jar 中的所有文件，因为我只需要这一类.

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T15:45:58.953

该内部类将是一个单独的文件（`ClassName$InnerClass.class`我认为称为 ），并且您在 jar 定义中明确将其*排除在外。*

内部类将在文件系统中表现为单独的类文件。因此，不幸的是，仅包含一个 .class 文件会破坏您的可部署文件，因为它缺少相应的内部类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T15:46:10.900

看起来您在 class 中使用了内部类`ClassName`。这将产生一个*单独*的类文件。

因为您正在使用该`includes`属性，所以该`jar`任务专门只包括一个类文件：`ClassName.class`. 删除`includes`, 所有类文件最终都会在你的 jar 中。

请注意，它`includes/excludes`也将接受逗号分隔或空格分隔的列表，例如：

```
<jar destfile="${dist.dir}/../lib/jarFile.jar" basedir="${basedir}/classes" includes="com/abc/utils/ClassName.class,com/abc/utils/ClassName$InnerClass.class" /> 
```

如果您只想`ClassName`在 jar 中包含任何内部类或其他依赖项，则此列表或类似列表应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T15:46:46.787

如果它是内部类，您可能需要这样做，`enclosingclass$className.class`因为您的内部类将在单独的文件中创建，并附加 $ 符号。

注意：如果另一个类依赖于这个类，运行时你可能会看到问题。