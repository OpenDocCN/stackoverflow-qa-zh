# StackOverflow 问答 11033000-11033999

# c# - 如何使用 Web.config 转换更改 appSettings 部分中的属性值

> ID：11033001
> 
> 赞同：279
> 
> 时间：2012-06-14T12:22:54.730
> 
> 标签：c#, asp.net, .net, web-config

是否可以转换以下 Web.config appSettings 文件：

```
<appSettings>
    <add key="developmentModeUserId" value="00297022" />
    <add key="developmentMode" value="true" />
    /* other settings here that should stay */
</appSettings> 
```

变成这样的东西：

```
<appSettings>
    <add key="developmentMode" value="false" />
    /* other settings here that should stay */
</appSettings> 
```

因此，我需要删除键**developmentModeUserId**，并且需要替换键**developmentMode**的值。

* * *

## 回答 #1

> 赞同：483
> 
> 时间：2012-06-14T15:19:22.367

你想要这样的东西：

```
<appSettings>
  <add key="developmentModeUserId" xdt:Transform="Remove" xdt:Locator="Match(key)"/>
  <add key="developmentMode" value="false" xdt:Transform="SetAttributes"
          xdt:Locator="Match(key)"/>
</appSettings> 
```

另请参阅：[Web 应用程序项目部署的 Web.config 转换语法](https://msdn.microsoft.com/en-us/library/dd465326)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-01-18T16:44:54.853

**替换所有 AppSettings**

这是您只想替换 web.config 的整个部分的过度杀伤情况。在这种情况下，我会将 web.config 中的所有 AppSettings 替换为 web.release.config 中的新设置。这是我的基线 web.config appSettings：

```
<appSettings>
  <add key="KeyA" value="ValA"/>
  <add key="KeyB" value="ValB"/>
</appSettings> 
```

现在在我的 web.release.config 文件中，我将创建一个 appSettings 部分，但我将包含属性 xdt:Transform=”Replace”，因为我只想替换整个元素。我不必使用 xdt:Locator，因为没有什么可定位的——我只想把石板擦干净并更换所有东西。

```
<appSettings xdt:Transform="Replace">
  <add key="ProdKeyA" value="ProdValA"/>
  <add key="ProdKeyB" value="ProdValB"/>
  <add key="ProdKeyC" value="ProdValC"/>
</appSettings> 
```

请注意，在 web.release.config 文件中，我的 appSettings 部分有三个键而不是两个键，而且键甚至都不相同。现在让我们看看生成的 web.config 文件在我们发布时会发生什么：

```
<appSettings>
   <add key="ProdKeyA" value="ProdValA"/>
   <add key="ProdKeyB" value="ProdValB"/>
   <add key="ProdKeyC" value="ProdValC"/>
 </appSettings> 
```

正如我们预期的那样——web.config appSettings 完全被 web.release 配置中的值所取代。那很简单！

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-05-01T12:31:44.437

如果您想将您的应用设置从 web 配置文件转换为 web.Release.config，您必须执行以下步骤。让你的 web.config 应用设置文件是这样的——

```
<appSettings>
     <add key ="K1" value="Debendra Dash"/>
  </appSettings> 
```

现在这里是用于转换的 web.Release.config。

```
<appSettings>
    <add key="K1" value="value dynamicly from Realease"
       xdt:Transform="SetAttributes"
          xdt:Locator="Match(key)"   
         />
  </appSettings> 
```

这会将 K1 的值转换为 realese 模式下的新值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-12-10T20:14:06.513

我不喜欢转换获得比需要更多的信息。因此，我没有重述密钥，而是简单地陈述**条件**和**意图**。这样做更容易看出意图，至少 IMO 是这样。另外，我尝试将所有`xdt`属性放在首位以向读者表明，这些是转换而不是定义的新事物。

```
<appSettings>
  <add xdt:Locator="Condition(@key='developmentModeUserId')" xdt:Transform="Remove" />
  <add xdt:Locator="Condition(@key='developmentMode')" xdt:Transform="SetAttributes"
       value="false"/>
</appSettings> 
```

在上面很容易看出第一个是删除元素。第二个是设置属性。它将设置/替换您在此处定义的任何属性。在这种情况下，它将简单地设置`value`为`false`。

# iphone - 如何获取 iphone ipod 播放列表图像并将其显示在图像视图中

> ID：11033003
> 
> 赞同：1
> 
> 时间：2012-06-14T12:23:01.783
> 
> 标签：iphone, audio-player

我正在使用 iphone ipod 阅读专辑和播放列表并在我的应用程序中播放。

我的问题是我从我选择的专辑中获得了图像。它在我的应用程序中也运行良好。

但是我从来没有从我选择的播放列表中获得图像，它们在我的播放列表中是不同的歌曲，并且这些歌曲也有不同的图像。对于这张专辑，我得到了代码，而且效果很好。我是新手，我找不到任何参考代码。

我正在使用 AVPlayer 播放歌曲。

所以请帮助我并提供一些示例代码。了解如何从播放列表中获取所有图像并将该图像转换为 iphone 中的数据。

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T13:00:00.627

你要找的是`MPMediaItemPropertyArtwork`for `MPMediaItem`。如文档中所述。获得艺术品属性后，您可以制作一个`MPMediaItemArtwork`对象，如文档中所述。

> MPMediaItemArtwork 对象或媒体项目插图表示与媒体项目相关联的图形图像，例如音乐专辑封面艺术。媒体项目在 MPMediaItem 类参考中进行了描述。

有了这个，你可以做这样的事情。假设`song`是`MPMediaItem`：

```
UIImage *image = nil;

MPMediaItemArtwork *itemArtwork = [song valueForProperty:
                                          MPMediaItemPropertyArtwork];
if(itemArtwork != nil)
     image = [itemArtwork imageWithSize:CGSizeMake(100,100)]; 
```

现在您已经`image`包含了您的`MPMediaItem`作品，将其设置为您的图像视图 ( `[myImageView setImage:image]`)。请记住，这只有在艺术品可用**时才**有效。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:41:45.487

您可以为此使用[VTM_AViPodReader](http://www.subfurther.com/blog/2010/12/13/from-ipod-library-to-pcm-samples-in-far-fewer-steps-than-were-previously-necessary/)演示。

# html - 替换水平尺 标签

> ID：11033014
> 
> 赞同：24
> 
> 时间：2012-06-14T12:23:41.997
> 
> 标签：html, css

我正在使用下面的代码来生成一个水平条。它适用于较旧的浏览器版本，但不适用于 Internet Explorer 9。在我单击“兼容性视图”之前，它不会可见。我们是否有替代品或已被替换？

```
<hr style="color:#F87431 ; height:7px "/> 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-14T12:27:02.527

尝试

```
<hr style="background:#F87431; border:0; height:7px" /> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-14T12:26:37.773

HR 的原始形式，如 STRIKE、B 等，过于以布局和演示为导向。

HTML 5 正在将标记移向更语义化的结构，更加强调将布局放在 CSS 和媒体元素上。

来自 W3C 文档：

```
In HTML 4.01, the <hr> tag represented a horizontal rule. 
In HTML5, the <hr> tag defines a thematic break. 
However, the <hr> tag may still be displayed as a horizontal rule in visual browsers, but is now defined in semantic terms, rather than presentational terms. 
```

所以你只需要很好地设计它。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-06-14T12:32:25.003

我也为此使用了 div，例如`<div style="width: 100%; height: 7px; background: #F87431; overflow: hidden;">`

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-06-14T12:27:56.697

尝试这样的事情：

```
<div style="color:#F87431;height:7px;">-------------------</div> 
```

不要使用 HR，因为它在这个阶段已被弃用，只使用内联 CSS 进行测试 ;-)

# c# - 选中另一个复选框时灰显

> ID：11033017
> 
> 赞同：5
> 
> 时间：2012-06-14T12:24:01.003
> 
> 标签：c#

基本上，我有一个交付复选框列表，一个用于交付到该地址，另一个用于交付到单独的地址，我基本上想这样做，所以一旦一个被检查过，另一个就不能被签出（也许通过将其变灰或类似的东西）

请注意，两个框使用相同的控件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T12:26:56.787

使用如下方法监听第一个 CheckBox 的 CheckedChanged 事件：

```
private void checkBox1_checkedChanged(object sender, EventArgs e)
{
    this.checkBox2.Enabled = !this.checkBox1.Checked;

    // If you want it to be unchecked as well as grayed out,
    // then have this code as well:
    if (!this.checkBox2.Enabled)
    {
        this.checkBox2.Checked = false;
    }
} 
```

但是，如果它在逻辑上符合您的需求，您应该考虑使用 RadioButtons 而不是 CheckBoxes。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:26:40.003

使用以下代码，

```
checkboxToBeGreyed.Enabled = false; 
```

您已经在其他复选框的选中事件中编写了此代码。希望这可以帮助。

# ios - 使用钥匙串存储高分和加电

> ID：11033020
> 
> 赞同：1
> 
> 时间：2012-06-14T12:24:06.793
> 
> 标签：ios, xcode, cocoa-touch, keychain

我想要一种比使用 UserDefaults（我相信最终用户可以更改）更安全的方式来存储高分和诸如星星/硬币之类的能量提升。我已经看到提到的钥匙串作为替代品，在阅读了一些关于它的信息后，我得到的印象是它的主要目的是存储密码。

1、可以用钥匙串做这个吗？2，你可以实际存储多少数据？3，是否可以非常快速地对其进行许多更改，例如。每秒几次？4，我相信有很多开源类来处理钥匙串。哪个最好用？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:01:04.423

与其将高分存储到不属于它们的地方，不如考虑对它们进行散列处理。如果您再次阅读高分，还将哈希与重新计算的哈希进行比较。如果他们不匹配，高分已被篡改，你可以责怪玩家试图作弊。散列算法可以是非常复杂的东西，比如 SHA，或者您可以自己想一个更简单的算法。我想对于游戏分数来说，它不必太防弹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:31:35.993

也许这个线程有帮助：[如何保护 NSUserDefaults？](https://stackoverflow.com/questions/1560801/how-to-secure-nsuserdefaults)

他们提到[Secure-NSUserDefaults ctagory](https://github.com/matthiasplappert/Secure-NSUserDefaults)但我还没有使用它。虽然感谢这个问题，但这也提醒我在我的应用程序中使用钥匙串！

# css - 如何使 ul 菜单居中？

> ID：11033022
> 
> 赞同：0
> 
> 时间：2012-06-14T12:24:12.687
> 
> 标签：css

我有这个 ul 菜单：

```
<ul id="superfish-1">
  <li class="active-trail"><a href="#" class="sf-depth-1  active">Inicio</a></li>
  <li class="trail"><a href="#" class="sf-depth-1">Quienes somos</a></li>
  <li class="trail"><a href="#" class="sf-depth-1">Contacto</a></li>

</ul> 
```

我需要水平对齐它。

我看到了这个[问题](https://stackoverflow.com/questions/2865380/how-do-i-center-align-horizontal-ul-menu)，但是将 ul 定位为`postion:relative;`和设置`left:50%`并没有成功。

我也发现了这个[问题](https://stackoverflow.com/questions/3436524/css-wont-center-the-ul-li-horizontal-menu)，但在我的情况下，我无法手动设置宽度，因为菜单会动态加载其内容，然后宽度一直在变化。

这就是我需要的：![捕获](../Images/a1a41070ac7a4ac30abde647a7d64feb.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:26:41.870

像这样写：

```
 #superfish-1{
     text-align:center;
    }
    li{
     display:inline-block;
     *display:inline;/*For IE7*/
     *zoom:1;/*For IE7*/
    } 
```

检查这个[http://jsfiddle.net/SdkKd/](http://jsfiddle.net/SdkKd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:25:23.727

添加`margin:0 auto;`到 ul 的 css。

检查这个小提琴：http: [//jsfiddle.net/dURBJ/1/](http://jsfiddle.net/dURBJ/1/)

# visual-studio-2012 - TFS / VS 2012 RC - VSSConverter.exe 在哪里？

> ID：11033027
> 
> 赞同：2
> 
> 时间：2012-06-14T12:24:23.760
> 
> 标签：visual-studio-2012, vssconverter

我正在使用刚刚发布的 RC 设置一个全新安装 TFS 2012 的 VM。这是我们公司第一次尝试使用 TFS，我需要升级一些 SourceSafe 数据库。我还为 Visual Studio 2012 Ultimate Edition 安装了 RC（除了 MFC 基础类），但我仍然找不到 VSSConverter.exe 工具。

根据谷歌的说法，它应该在 Common7\Ide 文件夹中，但无处可寻。诚然，我目前能找到的唯一互联网链接是 VS2010，所以它们可能已经过时了，但我已经扫描了整个 C 盘，仍然找不到 VSSConverter.exe

附言。我知道 TFS 管理控制台中有一个“下载并安装 VSS 转换器”链接，但这只是将我带到 Microsoft 主页！： http: [//www.microsoft.com/en-us/default.aspx](http://www.microsoft.com/en-us/default.aspx)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T12:32:37.320

VSSConverter 正在不再是一个独立的工具，并且 - 正如您所指出的 - 正在成为 TFS 管理控制台的一部分。

不幸的是，VSS -> TFS 转换体验并未作为 TFS 2012 RC 的一部分提供。相反，它将包含在已发布的 TFS 2012 中。

同时，作为 TFS 2010 一部分包含的 VSSConverter*将*正确迁移到 TFS 2012 实例。但是，您需要安装 2010 实例才能运行该工具。

如果您不需要完整的历史记录，您可以简单地检出您的 VSS 数据库，然后将它们检入 TFS。另一种选择是安装 TFS 2010 并使用 VSSConverter 到该数据库，然后执行就地升级到 TFS 2012。

# ios - 从横向开始时如何正确加载子视图

> ID：11033033
> 
> 赞同：0
> 
> 时间：2012-06-14T12:25:06.207
> 
> 标签：ios, uistoryboard

我正在构建一个 iPad 应用程序，其视图水平拆分并从顶部和底部动画化（想想下巴滑动关闭和打开以分别出现和消失）。

我的问题是**自定义颚子视图的布局仅在视图以横向加载时才被破坏**。（jaws-view 容器以适当的大小加载，但是上半部分和下半部分的后续子视图太高，并且超出了屏幕。但它们的宽度是正确的。）

我可以从纵向开始，然后旋转，一切都安排妥当。

我已经尝试在一堆地方将新视图的框架设置为原始视图的边界（正如许多对我不起作用的答案所建议的那样，根据要求提供链接），但要么没有找到正确的位置，或需要更多的东西。

我需要做任何特别的事情来获得传播的大小吗？有没有我不应该做动画的点？（我试图在我的新视图控制器的 viewDidLoad 中移动顶部和底部。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T06:51:29.967

解决这个问题需要 2 个部分。

第一个在此答案中进行了描述： [https](https://stackoverflow.com/a/8574519/1143123) : //stackoverflow.com/a/8574519/1143123 描述了使用 viewWillAppear 方法而不是 viewDidLoad （之前称为边界值和“不正确”值）。这解决了在横向加载视图（并传播到后续旋转）时视图布局正确的问题。

第二部分是，如果我开始对其进行动画处理，然后同时进行旋转，视图仍然会变得混乱。我将动画类更改为仅移动中心坐标（而不是滑动框架），这本来会更好，但这并没有解决问题。最后，我在 ViewController 中为表现出这些问题的类硬编码了以下内容：

```
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation {
    [super didRotateFromInterfaceOrientation:fromInterfaceOrientation];

    // The container view should match the size of the current view
    gameView.frame = self.view.bounds;

    CGFloat width = self.view.bounds.size.width;
    if(roundInProgress) {
         gameView.jawsTop.frame = CGRectMake(0, 0, width, self.view.bounds.size.height/2);
         gameView.jawsBottom.frame = CGRectMake(0, self.view.bounds.size.height/2, width, self.view.bounds.size.height/2);

    } else {
        // If round not in progress, game cards should be offscreen
        CGFloat height = self.view.bounds.size.height/2;
        gameView.jawsTop.frame = CGRectMake(0, -height, width, height);
        gameView.jawsBottom.frame = CGRectMake(0, self.view.bounds.size.height, width, height);

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:34:03.460

在没有看到您的代码的情况下，我的猜测是它与父视图的“自动调整子视图”属性和/或子视图的自动调整大小设置有关。尝试在 Interface Builder 中更改该属性以查看是否可以解决您的问题。

# ruby-on-rails - 什么宝石更好：jCheck 和 client_side_validations

> ID：11033034
> 
> 赞同：-1
> 
> 时间：2012-06-14T12:25:17.007
> 
> 标签：ruby-on-rails, client-side-validation

我想比较它们：两种宝石都有优点和缺点。

例如，在 client_side_validations 中更清晰和更多 Ruby 来创建自定义通知，但我在安装时遇到问题[Can't include js file for client slide validation](https://stackoverflow.com/questions/11029197/cant-include-js-file-for-client-slide-validation)。对我来说这是非常大的减号）

jCheck 更漂亮，但我需要使用更多的 jQuery 才能使用它。

还有一个：我无法获取所有通知（jCheck）的存储位置？

我想问：什么宝石更适合你？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:25:02.430

根据您使用的 Rails 版本，将决定您是否可以使用 ClientSideValidations。我没有空闲时间来完成 Rails 3.2 更新。很抱歉。

# c# - 如何将 Type 变量发送到泛型方法？

> ID：11033041
> 
> 赞同：3
> 
> 时间：2012-06-14T12:25:45.447
> 
> 标签：c#, generic-method, generics

我有这样的方法，

```
public List<T> Test<T>()
{
    // do something.
} 
```

我不知道什么是 T 并且没有。但我有 T 类型作为 TYPE。

例如：

```
class Person
{

}

var type = typeof(Person); 
```

我没有人。Person 保持在类型对象上。

如何使用测试方法？

```
var list = Test<type>(); // It gives an error like this. I must use the type object. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T12:29:28.333

您可以使用以下[`MakeGenericMethod`](http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.makegenericmethod.aspx)方法[`MethodInfo`](http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.aspx)：

```
MethodInfo info = this.GetType().GetMethod("Test").MakeGenericMethod(type);
object result = info.Invoke(this, null); 
```

这是假设您在定义的同一类型内调用该方法`Test`。如果您从其他地方调用它，请使用`typeof(ClassThatDefinesTest)`代替`this.GetType()`，并使用此类的实例代替`this`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:57:48.923

如果`typeof(T)`这是您真正需要的，那么您可以将其重构为：

```
public void Test(Type t)
{
    // do something.
} 
```

并称它为：

```
Test(type); 
```

如果这对您不起作用，我推荐使用`MakeGenericMethod`.

您可以同时公开两者`Test<T>()`，`Test(Type)`然后调用另一个（使用`MakeGenericMethod`或`typeof(T)`），具体取决于您需要静态类型还是仅需要运行时类型。这样，您的呼叫者就不需要知道您需要两者中的哪一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T12:29:15.930

您已将类名称传递给它。请参考以下MSDN，

[http://msdn.microsoft.com/en-us/library/twcad0zb(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/twcad0zb%28v=vs.100%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T12:42:28.493

正如*@Botz3000 所说，*您可以使用[MakeGenericMethod()](http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.makegenericmethod.aspx)方法。但另一种解决方案是使用[Activator](http://msdn.microsoft.com/en-us/library/system.activator)类中的[`dynamic`](http://msdn.microsoft.com/en-us/library/dd264741.aspx)关键字和[CreateInstance()](http://msdn.microsoft.com/en-us/library/system.activator.createinstance.aspx)方法：

```
public void Test(Type type)
{
    dynamic myVariable = Activator.CreateInstance(type);          
    // do something, like use myVariable and call a method: myVariable.MyMethod(); ...
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-14T12:28:20.310

你这样称呼它：

```
Test<Person>(); 
```

# android - 在 android eclipse 上的 tabhost 中显示结果

> ID：11033048
> 
> 赞同：1
> 
> 时间：2012-06-14T12:26:12.090
> 
> 标签：android, eclipse, android-tabhost

![模拟器的图片](../Images/5bb21559b37fa909169a92492edf0fce.png)

上图只是添加两个值并在下面的文本视图中显示结果。但我需要在下一个屏幕上的 tabhost 的第一个选项卡（即 Tab_1）上显示该答案。这该怎么做？

**.java 类**

```
 public class Demo_webserviceActivity extends Activity
{
/** Called when the activity is first created. */

   private static String NAMESPACE = "http://tempuri.org/";
   private static String METHOD_NAME = "FahrenheitToCelsius";
   private static String SOAP_ACTION = "http://tempuri.org/FahrenheitToCelsius";
   private static String URL = "http://www.w3schools.com/webservices/tempconvert.asmx?WSDL";

   Button btnFar;
   EditText txtFar;

   @Override
   public void onCreate(Bundle savedInstanceState)
   {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.main);

   btnFar = (Button)findViewById(R.id.btnFar);

   txtFar = (EditText)findViewById(R.id.txtFar);

   btnFar.setOnClickListener(new View.OnClickListener()
   {
   public void onClick(View v)
   {

       String b;

     //Initialize soap request + add parameters
     SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);       

     //Use this to add parameters
     request.addProperty("Fahrenheit",txtFar.getText().toString());

     //Declare the version of the SOAP request
     SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

     envelope.setOutputSoapObject(request);
     envelope.dotNet = true;

     try 
     {
         HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

         //this is the actual part that will call the webservice
         androidHttpTransport.call(SOAP_ACTION, envelope);

         // Get the SoapResult from the envelope body.

         SoapPrimitive result = (SoapPrimitive)envelope.getResponse();

         if(result != null)
         {
          //Get the first property and change the label text

            b = result.toString();

            Intent i = new Intent(getApplicationContext(),Activity2.class);
            i.putExtra("gotonextpage", b.toString());
            startActivity(i);
          }

         else
         {
           Toast.makeText(getApplicationContext(), "No Response",Toast.LENGTH_SHORT).show();
         }
    }
    catch (Exception e)
    {
       e.printStackTrace();
       }
     }
   });
   }
} 
```

*注意*：这个源实际上是从 android 使用 web 服务并通过 SOAP 方法显示结果

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:29:07.237

您可以使用共享首选项来存储值，然后您可以在项目的任何活动中访问它：

按照这个[链接](http://developer.android.com/reference/android/content/SharedPreferences.html)

# java - 是否可以用 Birt 或替代品填充模板（.xls、.pdf、ppt）？

> ID：11033050
> 
> 赞同：2
> 
> 时间：2012-06-14T12:26:18.253
> 
> 标签：java, report, reporting, birt

是否可以通过 birt 报告填充预定义的模板文件？

*   .xls 例如：模板应该定义了列标题（格式正确）和其他一些东西，比如创建日期、用户、一些法律声明，......

*   另一方面，.pdf 应该定义要填充数据的 id 字段

*   .ppt 作为最后一个并且可能是最棘手的一个理想情况下也应该可以用作 .pdf 但据我所知 .ppt 本身不提供其字段的 ID，因此必须使用一种解决方法来识别要填充的位置

是否有可能可以做到这一点的 birt 替代品？

我对答案很好奇:-)

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:40:48.870

[Templater](http://templater.info/)支持 docx 和 xlsx。从那里我们使用 LibreOffice 生成 PDF。

作为该工具的作者，我强烈推荐它:)

如果您有兴趣，网站上有很多示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T09:01:59.007

用于 BIRT 的 Spudsoft XLS 发射器（内置于 BIRT 4.3.1）支持 XLS。

我们正在使用这个功能，它就像一个魅力。

但是，BIRT 不支持“填充”文档或 ppt 文档。

模板引擎通常难以支持主从（或主从细节）关系。这是由于 MS Word 中表格的实现有些愚蠢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:00:14.827

使用本机 BIRT Excel 发射器达到预定义的 Excle 格式可能非常具有挑战性，有几种售后市场的 Excel 发射器可能会帮助您实现目标。

更简单的方法是设置您的 BIRT 报告以您想要的格式导出，然后保存报告并将其用作重新创建下一个报告的基础。您可以使用网格和母版页来获得您想要的布局，然后插入报告片段。

您还可以使用该库来保存您反复使用的网格、表格和数据集。

# asp.net-web-api - 如何在 ASP.NET WebAPI RC 中绑定一个简单的 POST 值？

> ID：11033052
> 
> 赞同：5
> 
> 时间：2012-06-14T12:26:20.593
> 
> 标签：asp.net-web-api

我的一个 API 控制器上有一个 POST 方法，它采用单个字符串值：

```
public string Post([FromBody] string foo) {
    return(fooOracle.ValidateFoo(foo) ? "success" : "failure");
} 
```

我将发布请求的正文发布到此：

```
foo=123412341234 
```

（即它是一个常规的 HTTP POST，您可以通过提交浏览器表单以及使用 HTTP 客户端来启动它）

在 WebAPI 的候选发布版本中，这已经悄然停止工作——它不再绑定 foo 了。为了使代码正常工作，我不得不用以下方法替换该方法：

```
public string Post(FormDataCollection form) {
    var foo = form.Get("foo");
    return(fooOracle.ValidateFoo(foo) ? "success" : "failure");
} 
```

这*行得通*，但它有点凌乱，并且比以前的版本涉及更多的管道测试。

我是否错过了一些细微的变化，或者 [FromBody] 绑定语法是否已被弃用，而转而支持这种相当冗长的绑定语法？该属性仍然存在，但目前还不清楚它在 RC 版本中的实际作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:27:10.937

它实际上有一个微妙的变化，它不能处理像'foo = 123412341234'这样的输入，但会处理'= 123412341234'作为输入。您可以让客户稍后发送吗？

如果不是，您可以如下创建一个包装器类，并使您的操作期望 stringwrapper 作为参数而不是 String 本身。

类 StringWrapper { public string Foo {get; 放;} }

# javascript - 垂直滚动与对齐/对齐到 div/元素/锚

> ID：11033053
> 
> 赞同：3
> 
> 时间：2012-06-14T12:26:24.187
> 
> 标签：javascript, jquery, html, scroll, vertical-scrolling

我发现了一些可爱的网站 - [http://www.mini.jp/event_campaign/big-point/](http://www.mini.jp/event_campaign/big-point/)、[http://www.twenty8twelve.com/](http://www.twenty8twelve.com/)和[http://www.scozzese.com](http://www.scozzese.com) - 都是垂直滚动的，所有当您滚动到一个新的“页面”时，使用一种将“页面”与浏览器顶部对齐的技术——即使您滚动到一半。

任何人都可以给我任何指示，例如我可以用来搜索更多信息的正确术语/单词，或者对这项技术背后的基础知识的简要介绍，或者如果存在任何 jQuery 等插件，我可以玩和学习吗？

我搜索了他们的代码，但没有跳出来如何去做，我的 Javascript 和 jQuery 仍然是新手级别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:44:26.917

Javascript 有一些本机方法，例如`scroll(), scrollTo(), scrollBy()`可以用来平滑滚动页面的（有一些技巧）。与`offsetTop(), offsetLeft()`您一起可以在这些网站上实现类似的效果。

还有很多 jQuery 插件（例如这个[google hit](http://flesler.blogspot.de/2007/10/jqueryscrollto.html)）可以为您节省大量工作。

只需搜索这些 Methodnames，我猜这应该会给您足够的点击率。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T13:16:21.577

基本滚动...

```
// Scroll
h = $(window).height();
t = $("mydiv").offset().top + $("mydiv").height();

if(t > h) {
    $(window).scrollTop(t - h);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T12:50:21.000

他们的滚动脚本不是很聪明。如果我通过反复单击向下箭头来向下滚动网页，则每次单击时，它都会向上滚动。所以不可避免地它不起作用。

# c# - pdf 和 .indd 文件的字体列表

> ID：11033059
> 
> 赞同：0
> 
> 时间：2012-06-14T12:26:44.793
> 
> 标签：c#, javascript, pdf

我必须制作一个应用程序，它可以在 Excel 表中获取 pdf 和 .indd 文件的字体列表。经过大量研究后，我知道使用 C# 是不可能的。我在 Visual Studio 中遇到了可以集成到 VS IDE 的 Indesign Navigator API。我知道 C#，javascript 有什么方法可以做到这一点，并且可以在 MAC 和 Windows 操作系统上运行。谢谢你！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T04:32:06.030

一种方法是使用字体信息从 InDesign 和 Acrobat 中保存一个文本文件。您可能可以使用extendscript 来执行此操作。然后可以将文本文件作为 csv 或文本文件（空格分隔）轻松导入 Excel。

您不是很清楚您的意图是什么，但这里有一个 javascript 示例，它可以从 InDesign 中提取字体信息以保存文档的字体列表。

```
var doc = app.activeDocument;

var docFonts = doc.fonts.everyItem().getElements();

var fileContents = "";
for (var i=0; i < docFonts.length; i++) {
   var font = docFonts[i];
   fileContents += font.name + "\n";
};

var newFilePath = doc.filePath + "/" + doc.name.replace(/\.indd/,'') + "_fonts.txt";
var newFile = File(newFilePath);

newFile.open('w')

newFile.write(fileContents); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T11:31:07.197

这是一种可能的方法...可以写出 InDesign 文件的 XML 表示...

要生成 IDML，`choose File > Export Format: InDesign Markup (INDML)`...

这是一个包含所有信息的 zip。

有一个文件夹`Resources`，其中包含`Fonts.xml`（资源：Fonts.xml）

这可以跨平台解析，因为它只是 XML ......

在这里您可以找到对 INDML InDesign 文档的解剖结构的描述... [http://www.indesignsecrets.com/downloads/Anatomy_of_IDML.pdf](http://www.indesignsecrets.com/downloads/Anatomy_of_IDML.pdf)

希望这可以帮助...

# android - 不使用片段的操作栏选项卡？

> ID：11033068
> 
> 赞同：8
> 
> 时间：2012-06-14T12:27:29.360
> 
> 标签：android, android-activity, android-fragments, android-actionbar

这可能是一个相当新手的问题，但无论如何。由于 Tabhost 已贬值，我尝试切换到操作栏选项卡，但我在使用片段时遇到了问题。是否有可能在操作栏选项卡中使用活动？

我将不胜感激任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:38:47.450

如果您打算使用活动而不是片段，则可以使用意图从您的`ActionBar.TabListener`

```
startActivity(new Intent(thisActivity(), thatActivity.class)); 
```

您还应该查看有关使用[Fragments over Activities 的评论](https://stackoverflow.com/a/10235536/1167780)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T13:04:05.457

> 是否有可能在操作栏选项卡中使用活动？

幸运的是，没有。

但这并不意味着您必须使用片段。你`TabListener`可以做任何事情来影响你的用户界面的变化。一个蛮力的解决方案是`setContentView()`再次调用，转储所有旧的小部件并放置一个全新的（可能不同的）集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T21:35:44.130

如果我的理解是正确的，您想使用操作栏来交换活动而不是片段。在这种情况下，请继续阅读。

从官方文档可以看到，actionbar特性定义了一组ui，position。如果您想用活动实现操作栏，最重要的是 1\. 将您的选项卡（位置）与您的活动相关联。2.添加tablistener回调（实例化你的新活动，停止当前活动）每次点击选项卡

最好的设计是让 tablistener 实现一个单独的类，这样你的每个活动都可以使用这个类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T08:42:40.963

可以将 an`Activity`与`ActionBar`. 请注意，这不是预期的行为，但这并不意味着它不能完美地工作。

```
import android.annotation.SuppressLint;
import android.app.ActionBar;
import android.app.ActionBar.Tab;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;

//@SuppressLint("NewApi")
public class ActionBarActivity extends Activity {

    private String TAG  = getClass().getName();
    private Intent i    = null;
    private ActionBar actionBar;
    private Tab one;
    private Tab two;
    private Tab three;

    // create a tab listener that is called when the user changes tabs
    ActionBar.TabListener tabListener = new ActionBar.TabListener() {
        @Override
        public void onTabSelected(Tab tab, android.app.FragmentTransaction ft) {
            if (tab.getTag().equals("one")){
                Log.d(TAG, "tab one selected");
                i = new Intent(getApplicationContext(), One.class);
                determineRun();
            }
            if (tab.getTag().equals("two")){
                Log.d(TAG, "tab two selected");
                i = new Intent(getApplicationContext(), Two.class);
                determineRun();
            }
            if (tab.getTag().equals("three")){
                Log.d(TAG, "tab three selected");
                i = new Intent(getApplicationContext(), Three.class);  
                determineRun();
            }           
        }

        @Override
        public void onTabUnselected(Tab tab, android.app.FragmentTransaction ft) {
            // TODO Auto-generated method stub          
        }

        @Override
        public void onTabReselected(Tab tab, android.app.FragmentTransaction ft) {
            // TODO Auto-generated method stub      
        }
    };  

    // we only need to start the Activity if it's not actually already the current Activity!
    void determineRun(){
        if (!TAG.equals(i.getComponent().getClassName())){
            startActivity(i);
        }   
        return;
    }//end method

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState); 

        actionBar = getActionBar();
        actionBar.setDisplayShowTitleEnabled(true);
        actionBar.setSubtitle(getResources().getString("subtitle"));        
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);    
        one = actionBar.newTab();
        one.setText("Tab 1").setTag("one");
        two = actionBar.newTab();
        two.setText("Tab 2").setTag("two");
        three = actionBar.newTab();
        three.setText("Tab 3").setTag("three");                
        one.setTabListener(tabListener);
        two.setTabListener(tabListener);
        three.setTabListener(tabListener);

        // You will have to set the selected Tab manually
        // A good idea would be to create a subclass for each Tab based on this code
        // Then, just create a new Activity which extends ActionBarActivity
        actionBar.addTab(one, 0, false);
        actionBar.addTab(two, 1, true); // selected Tab
        actionBar.addTab(three, 2, false);
    }//end method

    @Override
    public void onResume(){
        super.onResume();

        Log.d(TAG, "onResume()");
        Log.d(TAG, ""+i.getComponent().getClassName());
        // again, here you need to select the Tab manually
        if (!TAG.equals(i.getComponent().getClassName())){
            actionBar.selectTab(two); // selected Tab
        }   
    }//end method

    @Override
    public void onPause(){
        super.onPause();

        Log.d(TAG, "onPause()");
    }//end method

    @Override
    public void onBackPressed() {
        super.onBackPressed();

        overridePendingTransition(android.R.anim.slide_in_left, android.R.anim.slide_out_right);
    }//end method    
}//end class 
```

你可能想覆盖你的动画，`Activity`所以标签的变化是无缝的。为此，请修改扩展 ActionBarActivity的`onCreate()`方法`Activity`

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    overridePendingTransition(0, 0);
}//end method 
```

# transactions - EJB 3.1 事务传播

> ID：11033070
> 
> 赞同：0
> 
> 时间：2012-06-14T12:27:32.157
> 
> 标签：transactions, db2, ejb, locks, propagation

我有 3 个 EJB 无状态 bean。A - 在业务层上。B、C——持久层。

Bean A 调用 B 和 C 来更新数据库 (DB2) 中的一些数据。

但不幸的是，在调用 bean C 时，数据库锁定了。B 和 C 是否有可能在不同的事务中执行？否则我无法理解为什么 DB2 会锁定...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:36:03.177

我有 JBoss AS 7。我有两个实体 Employer 和 EMployee。员工与雇主有联系。

我有

```
@Stateless
EployerService {
 ....
 public void lockEmployer (long id) {
    Employer employer = employerDAO.findById(id);
    employer.setLocked(true);
    employerDAO.updateEmployer(employer);
    employeeDAO.updateEmployeesByEmployerId(id);
 }  
} 
```

在 EmployeeDAO

```
updateEmployeesByEmployerId (long empId) {
   em.createQuery("update Employee set locked = true where emplopyerId=:id").setParameter("id", empId).executeUpdate();

} 
```

在 EmployerDAO 中

```
udpateEmplopyer(Employer employer) {
  em.merge(employer);
} 
```

当我将两个 dao 的所有逻辑放在一个 DAO 中时 - 没有锁！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:49:42.293

如果您使用 hibernate 作为持久性提供程序，那么它会提供一个`@TransactionAttribute(REQUIRES_NEW)`在业务方法上调用的事务注释。此注释在单独的事务中运行该方法。所以我认为在 JPA 中应该有一个替代方案。但不确定。

# php - 使用 facebook connect 从 facebook 获取用户信息

> ID：11033074
> 
> 赞同：0
> 
> 时间：2012-06-14T12:27:42.213
> 
> 标签：php, facebook, codeigniter

我正在实施 facebook 连接，它对我来说部分工作得很好。当某些人使用 facebook 登录时，它成功地登录了用户。这是登录链接[http://beta-demo.info/party/users/loginByFacebook](http://beta-demo.info/party/users/loginByFacebook)但登录后，当我尝试从 Facebook 获取用户详细信息时，它现在显示任何内容。

这是 Fb_Connect.php 的代码 这个文件放在 Libraries 文件夹中

```
<?php
include(APPPATH.'libraries/facebook/facebook.php');
class Fb_connect extends Facebook{

    //declare public variables
    public  $user           = NULL;
    public  $user_id        = FALSE;

    public $fb          = FALSE;
    public $fbSession   = FALSE;
    public $appkey      = 0;

    //constructor method.
    public function __construct()
    {
                $CI = & get_instance();
                $CI->config->load("facebook",TRUE);
                $config = $CI->config->item('facebook');
                parent::__construct($config);
                $this->user_id = $this->getUser(); // New code

                $me = null;
                if ($this->user_id) {
                    try {
                        $me = $this->api('/me');
                        $this->user = $me;
                        } catch (FacebookApiException $e) {
                            error_log($e);
                        }
        }
    } 

} // end class 
```

这是记录功能

```
function loginByFacebook(){
            $this->load->library('fb_connect');
            $param['redirect_uri']=base_url();
            redirect($this->fb_connect->getLoginUrl($param));
    } 
```

这是我试图获取值的信息函数。

```
function facebook() {   
print('<pre>');
print_r($this->fb_connect);
        if (!$this->fb_connect->user_id) {
        echo 'No working ';
            //Handle not logged in,
        } else {
        echo   $fb_uid = $this->fb_connect->user_id;
         echo  $fb_usr = $this->fb_connect->user;
           //Hanlde user logged in, you can update your session with the available data
           //print_r($fb_usr) will help to see what is returned
        }
} 
```

信息页面的 URL [http://beta-demo.info/party/users/facebook](http://beta-demo.info/party/users/facebook)

我对 facebook 连接 API 不太了解。所以请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T07:15:43.290

我唯一能看到您缺少的是调用“/ me”时的字段。这是我用来从 facebook connect 获取信息的功能。工作示例： http: [//www.paravegetarianos.com](http://www.paravegetarianos.com)

```
function facebookConnect()
{
    $this->config->load('facebook', TRUE);
    $config = array(
        'appId'  => $this->config->item('facebook_api_id', 'facebook'),
        'secret' => $this->config->item('facebook_secret_key', 'facebook'),
        'fileUpload' => true,
    );
    $this->load->library('Facebook', $config);

    $user = $this->facebook->getUser();

    $profile = null;
    if($user):
        try {
            $profile = $this->facebook->api('/me?fields=id,username,email'); //<--- you are missing the fields
        } catch (FacebookApiException $e) {
            error_log($e);
            $user = null;
        }
    endif;

    if($profile != null):
        $profile['uid'] = $user;
        $data = $profile;
        var_dump($data); //<--------- Information
                    die();
    endif;  

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:29:54.137

这是我的工作代码

```
<?php
   function loginByFacebook()
   {
        $this->load->library('fb_connect');      
        $param = array( 
                        'scope' =>'email,user_location,user_birthday,offline_access',                                                   'redirect_uri' => base_url()
                       );
        redirect($this->fb_connect->getLoginUrl($param));                   

   }

   function facebook()
   {    

        if (!$this->fb_connect->user_id) {      

        } else {        
            $fb_uid = $this->fb_connect->user_id;
            $fb_usr = $this->fb_connect->user;  
            $firstname = $fb_usr['first_name'];
   }
?> 
```

# node.js - 如何将数据从我的代码传递到 node.js 中的沙箱

> ID：11033078
> 
> 赞同：0
> 
> 时间：2012-06-14T12:27:55.287
> 
> 标签：node.js

我正在使用[https://github.com/gf3/sandbox#readme](https://github.com/gf3/sandbox#readme)但我不知道如何通过此沙箱将一些数据从我的代码传递到 javascript 代码。例如

```
var s = new sandBox();
s.run("(function(name) { return 'Hi there, ' + name + '!'; })('Fabio')", function(output) {
    console.log("Example 2: " + output.result + "\n")
}) 
```

现在我想将一些数据传递给这个函数我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:40:12.347

它没有任何干净的方式来传递参数。但是，由于您将代码作为字符串传递，您可以简单地将参数直接添加到字符串中：

```
var arg = 'Hello';
var code = "(function(name) { return 'Hi there, ' + name + '!'; })("+ JSON.stringify(arg) +")"
s.run(code, ...); 
```

我`JSON.stringify`用来确保字符串是有效的 JS 表达式。

# c++ - 在 C++ 中包含来自单独文件夹的文件

> ID：11033084
> 
> 赞同：2
> 
> 时间：2012-06-14T12:28:22.047
> 
> 标签：c++, visual-c++

好吧，我试图在我的项目中包含一个头文件，而头文件实际上属于同一工作区中的另一个项目。我不想做类似 ../../folder_name/header_file_name 的事情。如果有帮助，我正在使用 VisualC++ 6.0。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:32:18.303

```
 1\. Right-click on the project, and select Properties.
 2\. Select Configuration Properties->C/C++->General.
 3\. Set the path under Additional Include Directories. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:30:44.730

将另一个文件夹作为包含目录添加到您的项目中，使其位于搜索路径中。

如果此标头具有相应的目标文件，您可能还需要添加库目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T12:33:10.683

您可以告诉编译器搜索头文件的路径。
查看您的项目配置。看看这里的第一张图片：http: [//www.steptools.com/support/stdev_docs/help/settings_vc6.html](http://www.steptools.com/support/stdev_docs/help/settings_vc6.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T16:30:54.437

对于 Visual C++ 6.0，转到工具/选项/目录/显示目录：包含文件，然后将完整路径添加到其他头文件所在的文件夹。

# php - 使用 htaccess 重定向问题

> ID：11033088
> 
> 赞同：-3
> 
> 时间：2012-06-14T12:28:36.927
> 
> 标签：php, .htaccess

我想使用 .htaccess 重定向`abc.com/test.php`到`abc.com/test`. 但它只会执行/显示 test.php 的内容。

我该怎么做？有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:32:33.357

试试看

```
RewriteRule ^test$ test.php [L] 
```

[更新]

完整的重定向

```
RewriteEngine On
RewriteCond %{SCRIPT_FILENAME}/ -d
RewriteCond %{SCRIPT_FILENAME}.php !-f
RewriteRule [^/]$ %{REQUEST_URI}/ [R=301,L]
RewriteCond %{ENV:REDIRECT_STATUS} ^$
RewriteRule ^(.+)\.php$ /$1 [R=301,L]
RewriteCond %{SCRIPT_FILENAME}.php -f
RewriteRule [^/]$ %{REQUEST_URI}.php [QSA,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:32:03.477

这是使用重写规则完成的，而不是重定向。像这样的东西：

```
RewriteEngine On
RewriteRule ^/test.php$ /test [L,QSA] 
```

# c# - asp.net ListView 按列排序

> ID：11033095
> 
> 赞同：0
> 
> 时间：2012-06-14T12:29:24.857
> 
> 标签：c#, asp.net, listview, sorting

我有一个绑定到数据源的列表视图。如何启用按列排序？

因此，当按升序排序后单击列标题时，再次单击它按降序排序。

向导中是否有任何可以设置的内容，或者都需要以编程方式完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T14:32:56.947

如果您使用的是数据源控件，则可以在 ListView 控件中实现排序，而无需编写一行代码——这一切都由 ListView 及其数据源控件自动处理。当然，在更高级的场景中，我们可能需要手动或以编程方式对数据进行排序。

在以下示例中，ListView 将按 ProductName 和 UnitPrice 排序。只需在 ListView 的 LayoutTemplate 中添加两个具有适当 CommandName 和 CommandArgument 属性值的 LinkBut​​ton。

```
 <asp:ListView ID="ProductList" runat="server" DataSourceID="ProductDataSource">
   <LayoutTemplate>
      <h3>Product Listing</h3>
       <asp:LinkButton runat="server" ID="SortByName" CommandName="Sort"
                     CommandArgument="ProductName">Sort by Name</asp:LinkButton>
      | <asp:LinkButton runat="server" ID="SortByPrice" CommandName="Sort"
                     CommandArgument="UnitPrice">Sort by Price</asp:LinkButton>

      <blockquote>
         <asp:PlaceHolder runat="server" ID="itemPlaceholder"></asp:PlaceHolder>
      </blockquote>
   </LayoutTemplate>

   ...
</asp:ListView> 
```

如果用户连续两次点击“按价格排序”链接，第一次产品将按升序排序（从最便宜到最贵），但第二次排序顺序会颠倒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:34:11.093

这取决于您使用的数据源。[如果数据源允许排序，则可以按照此处http://msdn.microsoft.com/en-us/library/sa88ktts.aspx](http://msdn.microsoft.com/en-us/library/sa88ktts.aspx)中描述的方式进行设置。否则，您必须以编程方式处理自己的排序。通常这比自动方法更容易。

# solr - SOLR中的索引加字符

> ID：11033100
> 
> 赞同：2
> 
> 时间：2012-06-14T12:29:28.707
> 
> 标签：solr, escaping, character, uri

我正在使用 UAX29URLEmailTokenizerFactory 标记器在 SOLR 中索引一些 URI。问题是我的一些 URI 包含加号字符，SOLR 将其解释为空格并拆分 URI。这个问题可以通过巧妙地转义“+”字符来解决吗？我在分析器中尝试了“+”，但得到了相同的结果。这是我对字段的确切配置：

```
<fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
    <analyzer type="index">
    <tokenizer class="solr.UAX29URLEmailTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.UAX29URLEmailTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
    <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
</fieldType> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T13:27:51.140

您可以在分析器之前使用 CharacterFilter（例如 PatternReplaceCharFilterFactory）。这个[链接](http://java.dzone.com/news/solr-filters)有一些很好的信息。我能想到的一种解决方案是将 + 字符替换为其他字符 - 然后当您提供此链接时，请记住将其替换回来。

另一个要研究的是，用加号（%2B）的 URL 编码值替换它，看看分析器是否将其视为空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T06:51:00.760

我想出的解决方案最终使用了上面建议的 CharacterFilter。诀窍是用编码的字符“%2B”替换它。这具有将 URI 保留为单个令牌并以正确状态将其返回到我的应用程序的效果 - 作为“+”。这是我想出的字段类型定义：

```
<fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">
    <charFilter class="solr.PatternReplaceCharFilterFactory" pattern="\+" replacement="%2B"/>
    <tokenizer class="solr.UAX29URLEmailTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
    <!-- in this example, we will only use synonyms at query time
    <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
    -->
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
  <analyzer type="query">
    <charFilter class="solr.PatternReplaceCharFilterFactory" pattern="\+" replacement="%2B"/>
    <tokenizer class="solr.UAX29URLEmailTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
    <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
</fieldType> 
```

# sql - 执行删除操作的过程

> ID：11033101
> 
> 赞同：0
> 
> 时间：2012-06-14T12:29:31.870
> 
> 标签：sql, stored-procedures, mybatis

我想编写一个程序来执行以下删除

```
i want to delete from x_table and y_table where id=select id from z_table where obj_id="1234" also at the same time i want to delete 
from user_table id = select id from z_table where obj_id="1234" and user_id != in (select user id from main_table)

in short i want to delete the rows from 3 tables x_table,y_table and user_table for the given obj_id and for user_table i want to alsocheck if user_id is not in other main_table 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:13:12.903

试试这个过程。请注意，这是记事本认证的版本 :) 我没有在 Oracle 上编译它，因为我的个人机器上没有它。看看有没有效果。。

```
CREATE
OR REPLACE PROCEDURE testproc(inputVar IN number)

AS

BEGIN

EXECUTE IMMEDIATE 'DELETE FROM TABLE_X WHERE ID = (SELECT ID FROM TABLE_Z WHERE OBJ_ID=:num)' USING IN inputVar;

EXECUTE IMMEDIATE 'DELETE FROM TABLE_Y WHERE ID = (SELECT ID FROM TABLE_Z WHERE OBJ_ID=:num)' USING IN inputVar;

EXECUTE IMMEDIATE 'DELETE FROM TABLE_USER WHERE ID = (SELECT ID FROM TABLE_Z WHERE OBJ_ID=:num) AND USER_ID NOT IN (SELECT USER_ID FROM MAIN_TABLE)' USING IN inputVar;

COMMIT;

EXCEPTION

WHEN
OTHERS

THEN

dbms_output.put_line
(SQLERRM);

END; 
```

# scripting-language - 应用程序代码不是以脚本语言作为底层处理器的目标代码交付的

> ID：11033103
> 
> 赞同：0
> 
> 时间：2012-06-14T12:29:35.833
> 
> 标签：scripting-language

源代码存在于生产系统的运行时（尽管出于性能原因，它可能被编译成字节码、本机目标代码或其他格式）。应用程序代码不作为底层处理器的目标代码交付（但是，一些稳定的系统库可能会以这种方式预编译）。[我从http://c2.com/cgi/wiki?ScriptingLanguage](http://c2.com/cgi/wiki?ScriptingLanguage)读到了这一行

而且我不理解“应用程序代码未作为底层处理器的目标代码交付”这一行，任何人都可以帮助我理解这一行，因为除非或直到目标代码尚未交付给系统，否则代码将不会被执行那么如何有可能有一个未交付给处理器的应用程序代码对我们有帮助，请帮我举个小例子谢谢......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:35:13.333

脚本语言（通常）是解释性的。这意味着有一个应用程序（解释器）读取源文件（文本格式）并在读取指令时执行指令 (*)。因此不需要目标代码（用于解释程序）

(*) 这可能不会导致实际“执行”代码，可能只是存储结构/类的定义等。

这与首先​​从源代码翻译为本机二进制/字节码/等的编译程序形成对比。由编译器。在这种情况下，执行程序不需要源代码（文本格式），只需要目标代码（翻译的结果）。

*注意*：该行与类似字节码的对象格式有点模糊。虽然它不是源代码，但它仍然必须由底层虚拟机解释才能在 CPU 上执行。除非您将虚拟机视为“执行”目标代码（以字节码形式）的机器

# php - 在 Ubuntu 上为 PHP 安装 Ingres 扩展

> ID：11033111
> 
> 赞同：2
> 
> 时间：2012-06-14T12:30:44.430
> 
> 标签：php, ubuntu, ingres

PHP Ingres 失败并显示消息：

```
/usr/bin/php: symbol lookup error: /opt/Ingres/IngresII/ingres/lib/libiiapi.1.so: undefined symbol: adg_srv_size 
```

我有一个有效的 Ingres 安装。

构建和链接不会抱怨，但在尝试运行或进行测试时会引发上述错误。

我有什么明显的遗漏吗？

尝试使用 Ingres：

```
ingres-10.0.0-132-NPTL-com-pc-linux-ingbuild-i386
and ingres-9.2.1-103-NPTL-com-pc-linux-ingbuild-i386

env...

    LD_LIBRARY_PATH=/lib:/usr/lib:/opt/Ingres/IngresII/ingres/lib
    PATH=/opt/Ingres/IngresII/ingres/bin:/opt/Ingres/IngresII/ingres/utility:/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games
    II_SYSTEM=/opt/Ingres/IngresII

DISTRIB_ID=Ubuntu
DISTRIB_RELEASE=12.04
DISTRIB_CODENAME=precise
DISTRIB_DESCRIPTION="Ubuntu 12.04 LTS"

$ phpize

    Configuring for:
    PHP Api Version:         20090626
    Zend Module Api No:      20090626
    Zend Extension Api No:   220090626

$ ./configure

    checking for grep that handles long lines and -e... /bin/grep
    checking for egrep... /bin/grep -E
    checking for a sed that does not truncate output... /bin/sed
    checking for cc... cc
    checking whether the C compiler works... yes
    checking for C compiler default output file name... a.out
    checking for suffix of executables...
    checking whether we are cross compiling... no
    checking for suffix of object files... o
    checking whether we are using the GNU C compiler... yes
    checking whether cc accepts -g... yes
    checking for cc option to accept ISO C89... none needed
    checking how to run the C preprocessor... cc -E
    checking for icc... no
    checking for suncc... no
    checking whether cc understands -c and -o together... yes
    checking for system library directory... lib
    checking if compiler supports -R... no
    checking if compiler supports -Wl,-rpath,... yes
    checking build system type... i686-pc-linux-gnu
    checking host system type... i686-pc-linux-gnu
    checking target system type... i686-pc-linux-gnu
    checking for PHP prefix... /usr
    checking for PHP includes... -I/usr/include/php5 -I/usr/include/php5/main -I/usr/include/php5/TSRM -I/usr/include/php5/Zend -I/usr/include/php5/ext -I/usr/include/php5/ext/date/lib -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64
    checking for PHP extension directory... /usr/lib/php5/20090626+lfs
    checking for PHP installed headers prefix... /usr/include/php5
    checking if debug is enabled... no
    checking if zts is enabled... no
    checking for re2c... re2c
    checking for re2c version... 0.13.5 (ok)
    checking for gawk... no
    checking for nawk... nawk
    checking if nawk is broken... no
    checking for improved Ingres support... yes, shared
    checking Use ingres2 as the extension name... no
    checking how to print strings... printf
    checking for a sed that does not truncate output... (cached) /bin/sed
    checking for fgrep... /bin/grep -F
    checking for ld used by cc... /usr/bin/ld
    checking if the linker (/usr/bin/ld) is GNU ld... yes
    checking for BSD- or MS-compatible name lister (nm)... /usr/bin/nm -B
    checking the name lister (/usr/bin/nm -B) interface... BSD nm
    checking whether ln -s works... yes
    checking the maximum length of command line arguments... 1572864
    checking whether the shell understands some XSI constructs... yes
    checking whether the shell understands "+="... yes
    checking how to convert i686-pc-linux-gnu file names to i686-pc-linux-gnu format... func_convert_file_noop
    checking how to convert i686-pc-linux-gnu file names to toolchain format... func_convert_file_noop
    checking for /usr/bin/ld option to reload object files... -r
    checking for objdump... objdump
    checking how to recognize dependent libraries... pass_all
    checking for dlltool... no
    checking how to associate runtime and link libraries... printf %s\n
    checking for ar... ar
    checking for archiver @FILE support... @
    checking for strip... strip
    checking for ranlib... ranlib
    checking for gawk... (cached) nawk
    checking command to parse /usr/bin/nm -B output from cc object... ok
    checking for sysroot... no
    checking for mt... mt
    checking if mt is a manifest tool... no
    checking for ANSI C header files... yes
    checking for sys/types.h... yes
    checking for sys/stat.h... yes
    checking for stdlib.h... yes
    checking for string.h... yes
    checking for memory.h... yes
    checking for strings.h... yes
    checking for inttypes.h... yes
    checking for stdint.h... yes
    checking for unistd.h... yes
    checking for dlfcn.h... yes
    checking for objdir... .libs
    checking if cc supports -fno-rtti -fno-exceptions... no
    checking for cc option to produce PIC... -fPIC -DPIC
    checking if cc PIC flag -fPIC -DPIC works... yes
    checking if cc static flag -static works... yes
    checking if cc supports -c -o file.o... yes
    checking if cc supports -c -o file.o... (cached) yes
    checking whether the cc linker (/usr/bin/ld) supports shared libraries... yes
    checking whether -lc should be explicitly linked in... no
    checking dynamic linker characteristics... GNU/Linux ld.so
    checking how to hardcode library paths into programs... immediate
    checking whether stripping libraries is possible... yes
    checking if libtool supports shared libraries... yes
    checking whether to build shared libraries... yes
    checking whether to build static libraries... no
    configure: creating ./config.status
    config.status: creating config.h
    config.status: executing libtool commands

    $ make
     /bin/sh /home/ingres/ingres-2.2.3/libtool --mode=compile cc  -I. -I/home/ingres  /ingres-2.2.3 -DPHP_ATOM_INC -I/home/ingres/ingres-2.2.3/include -I/home/ingres/ingres-2.2.3/main -I/home/ingres/ingres-2.2.3 -I/usr/include/php5 -I/usr/include/php5/main -I/usr/include/php5/TSRM -I/usr/include/php5/Zend -I/usr/include/php5/ext -I/usr/include/php5/ext/date/lib -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/opt/Ingres/IngresII/ingres/files  -DHAVE_CONFIG_H  -g -O2   -c /home/ingres/ingres-2.2.3/ingres.c -o ingres.lo
    libtool: compile:  cc -I. -I/home/ingres/ingres-2.2.3 -DPHP_ATOM_INC -I/home/ingres/ingres-2.2.3/include -I/home/ingres/ingres-2.2.3/main -I/home/ingres/ingres-2.2.3 -I/usr/include/php5 -I/usr/include/php5/main -I/usr/include/php5/TSRM -I/usr/include/php5/Zend -I/usr/include/php5/ext -I/usr/include/php5/ext/date/lib -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/opt/Ingres/IngresII/ingres/files -DHAVE_CONFIG_H -g -O2 -c /home/ingres/ingres-2.2.3/ingres.c  -fPIC -DPIC -o .libs/ingres.o
    /home/ingres/ingres-2.2.3/ingres.c: In function 'php_ii_gen_cursor_id':
    /home/ingres/ingres-2.2.3/ingres.c:2980:5: warning: format '%lu' expects argument of type 'long unsigned int', but argument 3 has type 'int' [-Wformat]
    /bin/sh /home/ingres/ingres-2.2.3/libtool --mode=compile cc  -I. -I/home/ingres/ingres-2.2.3 -DPHP_ATOM_INC -I/home/ingres/ingres-2.2.3/include -I/home/ingres/ingres-2.2.3/main -I/home/ingres/ingres-2.2.3 -I/usr/include/php5 -I/usr/include/php5/main -I/usr/include/php5/TSRM -I/usr/include/php5/Zend -I/usr/include/php5/ext -I/usr/include/php5/ext/date/lib -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/opt/Ingres/IngresII/ingres/files  -DHAVE_CONFIG_H  -g -O2   -c /home/ingres/ingres-2.2.3/convertUTF.c -o convertUTF.lo
    libtool: compile:  cc -I. -I/home/ingres/ingres-2.2.3 -DPHP_ATOM_INC -I/home/ingres/ingres-2.2.3/include -I/home/ingres/ingres-2.2.3/main -I/home/ingres/ingres-2.2.3 -I/usr/include/php5 -I/usr/include/php5/main -I/usr/include/php5/TSRM -I/usr/include/php5/Zend -I/usr/include/php5/ext -I/usr/include/php5/ext/date/lib -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/opt/Ingres/IngresII/ingres/files -DHAVE_CONFIG_H -g -O2 -c /home/ingres/ingres-2.2.3/convertUTF.c  -fPIC -DPIC -o .libs/convertUTF.o
    /bin/sh /home/ingres/ingres-2.2.3/libtool --mode=link cc -DPHP_ATOM_INC -I/home/ingres/ingres-2.2.3/include -I/home/ingres/ingres-2.2.3/main -I/home/ingres/ingres-2.2.3 -I/usr/include/php5 -I/usr/include/php5/main -I/usr/include/php5/TSRM -I/usr/include/php5/Zend -I/usr/include/php5/ext -I/usr/include/php5/ext/date/lib -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/opt/Ingres/IngresII/ingres/files  -DHAVE_CONFIG_H  -g -O2   -o ingres.la -export-dynamic -avoid-version -prefer-pic -module -rpath /home/ingres/ingres-2.2.3/modules  ingres.lo convertUTF.lo -Wl,-rpath,/opt/Ingres/IngresII/ingres/lib -L/opt/Ingres/IngresII/ingres/lib -lcompat.1 -Wl,-rpath,/opt/Ingres/IngresII/ingres/lib -L/opt/Ingres/IngresII/ingres/lib -lframe.1 -Wl,-rpath,/opt/Ingres/IngresII/ingres/lib -L/opt/Ingres/IngresII/ingres/lib -lq.1 -Wl,-rpath,/opt/Ingres/IngresII/ingres/lib -L/opt/Ingres/IngresII/ingres/lib -liiapi.1
    libtool: link: cc -shared  -fPIC -DPIC  .libs/ingres.o .libs/convertUTF.o   -L/opt/Ingres/IngresII/ingres/lib -lcompat.1 -lframe.1 -lq.1 -liiapi.1  -O2 -Wl,-rpath -Wl,/opt/Ingres/IngresII/ingres/lib -Wl,-rpath -Wl,/opt/Ingres/IngresII/ingres/lib -Wl,-rpath -Wl,/opt/Ingres/IngresII/ingres/lib -Wl,-rpath -Wl,/opt/Ingres/IngresII/ingres/lib   -Wl,-soname -Wl,ingres.so -o .libs/ingres.so
    libtool: link: ( cd ".libs" && rm -f "ingres.la" && ln -s "../ingres.la" "ingres.la" )
    /bin/sh /home/ingres/ingres-2.2.3/libtool --mode=install cp ./ingres.la /home/ingres/ingres-2.2.3/modules
    libtool: install: cp ./.libs/ingres.so /home/ingres/ingres-2.2.3/modules/ingres.so
    libtool: install: cp ./.libs/ingres.lai /home/ingres/ingres-2.2.3/modules/ingres.la
    libtool: finish: PATH="/opt/Ingres/IngresII/ingres/bin:/opt/Ingres/IngresII/ingres/utility:/opt/Ingres/IngresII/ingres/bin:/opt/Ingres/IngresII/ingres/utility:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games:/sbin" ldconfig -n /home/ingres/ingres-2.2.3/modules
    ----------------------------------------------------------------------
    Libraries have been installed in:
       /home/ingres/ingres-2.2.3/modules

    If you ever happen to want to link against installed libraries
    in a given directory, LIBDIR, you must either use libtool, and
    specify the full pathname of the library, or use the `-LLIBDIR'
    flag during linking and do at least one of the following:
       - add LIBDIR to the `LD_LIBRARY_PATH' environment variable
         during execution
       - add LIBDIR to the `LD_RUN_PATH' environment variable
         during linking
       - use the `-Wl,-rpath -Wl,LIBDIR' linker flag
       - have your system administrator add LIBDIR to `/etc/ld.so.conf'

    See any operating system documentation about shared libraries for
    more information, such as the ld(1) and ld.so(8) manual pages.
    ----------------------------------------------------------------------

    Build complete.
    Don't forget to run 'make test'.

    $ make test

    Build complete.
    Don't forget to run 'make test'.

    /usr/bin/php: symbol lookup error: /opt/Ingres/IngresII/ingres/lib/libiiapi.1.so: undefined symbol: adg_srv_size
    /usr/bin/php: symbol lookup error: /opt/Ingres/IngresII/ingres/lib/libiiapi.1.so: undefined symbol: adg_srv_size

    =====================================================================
    PHP         : /usr/bin/php 
    CWD         : /home/ingres/ingres-2.2.3
    Extra dirs  :
    VALGRIND    : Not used
    =====================================================================
    TIME START 2012-06-14 10:19:01
    =====================================================================
    FAIL Ingres: Bug #15586 - test for white space handling at the start of a query [tests/bug_15586.phpt]
    FAIL Ingres: Bug #15586 - test for a new line at the start of a query [tests/bug_15586_newlines.phpt]
    FAIL Ingres: Bug 16752 - Passing zero length strings based on PHP types [tests/bug_16752_1.phpt]
    FAIL Ingres: Bug 16752 - Passing zero length strings using parameter typing [tests/bug_16752_2.phpt]
    FAIL Ingres: Bug 16752 - Passing zero length strings based on DESCRIBE INPUT [tests/bug_16752_3.phpt]
    FAIL Ingres: Bug 16990 - SEGV when executing a procedure [tests/bug_16990_procedure_segv.phpt]
    FAIL Ingres: Bug #17302 - Test for closure of statements [tests/bug_17302.phpt]
    FAIL Ingres: Bug #17556 - test for error handling in non-result returning statements [tests/bug_17556.phpt]
    FAIL Ingres: Insert a boolean value using DESCRIBE INPUT. [tests/insert_boolean_1.phpt]
    FAIL Ingres: Insert a boolean value using a static query. [tests/insert_boolean_2.phpt]
    FAIL Ingres: connect to a database as current user [tests/test_001.phpt]
    FAIL Ingres: connect to a database with user+password [tests/test_002.phpt]
    FAIL Ingres: execute a simple select against default link - no results returned. [tests/test_003.phpt]
    FAIL Ingres: execute a simple select against default link - fetch object. [tests/test_
     /usr/bin/php: symbol lookup error: /opt/Ingres/IngresII/ingres/lib/libiiapi.1.so: undefined symbol: adg_srv_size

    Anything obvious that I am missing?

    here are the output from my installation.

    Your assistants is much appreciated.

    Tried with ingres:
    ingres-10.0.0-132-NPTL-com-pc-linux-ingbuild-i386
    and ingres-9.2.1-103-NPTL-com-pc-linux-ingbuild-i386

    DISTRIB_ID=Ubuntu
    DISTRIB_RELEASE=12.04
    DISTRIB_CODENAME=precise
    DISTRIB_DESCRIPTION="Ubuntu 12.04 LTS"

    $ phpize
    Configuring for:
    PHP Api Version:         20090626
    Zend Module Api No:      20090626
    Zend Extension Api No:   220090626

    $ ./configure
    checking for grep that handles long lines and -e... /bin/grep
    checking for egrep... /bin/grep -E
    checking for a sed that does not truncate output... /bin/sed
    checking for cc... cc
    checking whether the C compiler works... yes
    checking for C compiler default output file name... a.out
    checking for suffix of executables...
    checking whether we are cross compiling... no
    checking for suffix of object files... o
    checking whether we are using the GNU C compiler... yes
    checking whether cc accepts -g... yes
    checking for cc option to accept ISO C89... none needed
    checking how to run the C preprocessor... cc -E
    checking for icc... no
    checking for suncc... no
    checking whether cc understands -c and -o together... yes
    checking for system library directory... lib
    checking if compiler supports -R... no
    checking if compiler supports -Wl,-rpath,... yes
    checking build system type... i686-pc-linux-gnu
    checking host system type... i686-pc-linux-gnu
    checking target system type... i686-pc-linux-gnu
    checking for PHP prefix... /usr
    checking for PHP includes... -I/usr/include/php5 -I/usr/include/php5/main -I/usr/include/php5/TSRM -I/usr/include/php5/Zend -I/usr/include/php5/ext -I/usr/include/php5/ext/date/lib -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64
    checking for PHP extension directory... /usr/lib/php5/20090626+lfs
    checking for PHP installed headers prefix... /usr/include/php5
    checking if debug is enabled... no
    checking if zts is enabled... no
    checking for re2c... re2c
    checking for re2c version... 0.13.5 (ok)
    checking for gawk... no
    checking for nawk... nawk
    checking if nawk is broken... no
    checking for improved Ingres support... yes, shared
    checking Use ingres2 as the extension name... no
    checking how to print strings... printf
    checking for a sed that does not truncate output... (cached) /bin/sed
    checking for fgrep... /bin/grep -F
    checking for ld used by cc... /usr/bin/ld
    checking if the linker (/usr/bin/ld) is GNU ld... yes
    checking for BSD- or MS-compatible name lister (nm)... /usr/bin/nm -B
    checking the name lister (/usr/bin/nm -B) interface... BSD nm
    checking whether ln -s works... yes
    checking the maximum length of command line arguments... 1572864
    checking whether the shell understands some XSI constructs... yes
    checking whether the shell understands "+="... yes
    checking how to convert i686-pc-linux-gnu file names to i686-pc-linux-gnu format... func_convert_file_noop
    checking how to convert i686-pc-linux-gnu file names to toolchain format... func_convert_file_noop
    checking for /usr/bin/ld option to reload object files... -r
    checking for objdump... objdump
    checking how to recognize dependent libraries... pass_all
    checking for dlltool... no
    checking how to associate runtime and link libraries... printf %s\n
    checking for ar... ar
    checking for archiver @FILE support... @
    checking for strip... strip
    checking for ranlib... ranlib
    checking for gawk... (cached) nawk
    checking command to parse /usr/bin/nm -B output from cc object... ok
    checking for sysroot... no
    checking for mt... mt
    checking if mt is a manifest tool... no
    checking for ANSI C header files... yes
    checking for sys/types.h... yes
    checking for sys/stat.h... yes
    checking for stdlib.h... yes
    checking for string.h... yes
    checking for memory.h... yes
    checking for strings.h... yes
    checking for inttypes.h... yes
    checking for stdint.h... yes
    checking for unistd.h... yes
    checking for dlfcn.h... yes
    checking for objdir... .libs
    checking if cc supports -fno-rtti -fno-exceptions... no
    checking for cc option to produce PIC... -fPIC -DPIC
    checking if cc PIC flag -fPIC -DPIC works... yes
    checking if cc static flag -static works... yes
    checking if cc supports -c -o file.o... yes
    checking if cc supports -c -o file.o... (cached) yes
    checking whether the cc linker (/usr/bin/ld) supports shared libraries... yes
    checking whether -lc should be explicitly linked in... no
    checking dynamic linker characteristics... GNU/Linux ld.so
    checking how to hardcode library paths into programs... immediate
    checking whether stripping libraries is possible... yes
    checking if libtool supports shared libraries... yes
    checking whether to build shared libraries... yes
    checking whether to build static libraries... no
    configure: creating ./config.status
    config.status: creating config.h
    config.status: executing libtool commands

$ make

    /bin/sh /home/ingres/ingres-2.2.3/libtool --mode=compile cc  -I. -I/home/ingres/ingres-2.2.3 -DPHP_ATOM_INC -I/home/ingres/ingres-2.2.3/include -I/home/ingres/ingres-2.2.3/main -I/home/ingres/ingres-2.2.3 -I/usr/include/php5 -I/usr/include/php5/main -I/usr/include/php5/TSRM -I/usr/include/php5/Zend -I/usr/include/php5/ext -I/usr/include/php5/ext/date/lib -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/opt/Ingres/IngresII/ingres/files  -DHAVE_CONFIG_H  -g -O2   -c /home/ingres/ingres-2.2.3/ingres.c -o ingres.lo
    libtool: compile:  cc -I. -I/home/ingres/ingres-2.2.3 -DPHP_ATOM_INC -I/home/ingres/ingres-2.2.3/include -I/home/ingres/ingres-2.2.3/main -I/home/ingres/ingres-2.2.3 -I/usr/include/php5 -I/usr/include/php5/main -I/usr/include/php5/TSRM -I/usr/include/php5/Zend -I/usr/include/php5/ext -I/usr/include/php5/ext/date/lib -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/opt/Ingres/IngresII/ingres/files -DHAVE_CONFIG_H -g -O2 -c /home/ingres/ingres-2.2.3/ingres.c  -fPIC -DPIC -o .libs/ingres.o
    /home/ingres/ingres-2.2.3/ingres.c: In function 'php_ii_gen_cursor_id':
    /home/ingres/ingres-2.2.3/ingres.c:2980:5: warning: format '%lu' expects argument of type 'long unsigned int', but argument 3 has type 'int' [-Wformat]
    /bin/sh /home/ingres/ingres-2.2.3/libtool --mode=compile cc  -I. -I/home/ingres/ingres-2.2.3 -DPHP_ATOM_INC -I/home/ingres/ingres-2.2.3/include -I/home/ingres/ingres-2.2.3/main -I/home/ingres/ingres-2.2.3 -I/usr/include/php5 -I/usr/include/php5/main -I/usr/include/php5/TSRM -I/usr/include/php5/Zend -I/usr/include/php5/ext -I/usr/include/php5/ext/date/lib -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/opt/Ingres/IngresII/ingres/files  -DHAVE_CONFIG_H  -g -O2   -c /home/ingres/ingres-2.2.3/convertUTF.c -o convertUTF.lo
    libtool: compile:  cc -I. -I/home/ingres/ingres-2.2.3 -DPHP_ATOM_INC -I/home/ingres/ingres-2.2.3/include -I/home/ingres/ingres-2.2.3/main -I/home/ingres/ingres-2.2.3 -I/usr/include/php5 -I/usr/include/php5/main -I/usr/include/php5/TSRM -I/usr/include/php5/Zend -I/usr/include/php5/ext -I/usr/include/php5/ext/date/lib -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/opt/Ingres/IngresII/ingres/files -DHAVE_CONFIG_H -g -O2 -c /home/ingres/ingres-2.2.3/convertUTF.c  -fPIC -DPIC -o .libs/convertUTF.o
    /bin/sh /home/ingres/ingres-2.2.3/libtool --mode=link cc -DPHP_ATOM_INC -I/home/ingres/ingres-2.2.3/include -I/home/ingres/ingres-2.2.3/main -I/home/ingres/ingres-2.2.3 -I/usr/include/php5 -I/usr/include/php5/main -I/usr/include/php5/TSRM -I/usr/include/php5/Zend -I/usr/include/php5/ext -I/usr/include/php5/ext/date/lib -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/opt/Ingres/IngresII/ingres/files  -DHAVE_CONFIG_H  -g -O2   -o ingres.la -export-dynamic -avoid-version -prefer-pic -module -rpath /home/ingres/ingres-2.2.3/modules  ingres.lo convertUTF.lo -Wl,-rpath,/opt/Ingres/IngresII/ingres/lib -L/opt/Ingres/IngresII/ingres/lib -lcompat.1 -Wl,-rpath,/opt/Ingres/IngresII/ingres/lib -L/opt/Ingres/IngresII/ingres/lib -lframe.1 -Wl,-rpath,/opt/Ingres/IngresII/ingres/lib -L/opt/Ingres/IngresII/ingres/lib -lq.1 -Wl,-rpath,/opt/Ingres/IngresII/ingres/lib -L/opt/Ingres/IngresII/ingres/lib -liiapi.1
    libtool: link: cc -shared  -fPIC -DPIC  .libs/ingres.o .libs/convertUTF.o   -L/opt/Ingres/IngresII/ingres/lib -lcompat.1 -lframe.1 -lq.1 -liiapi.1  -O2 -Wl,-rpath -Wl,/opt/Ingres/IngresII/ingres/lib -Wl,-rpath -Wl,/opt/Ingres/IngresII/ingres/lib -Wl,-rpath -Wl,/opt/Ingres/IngresII/ingres/lib -Wl,-rpath -Wl,/opt/Ingres/IngresII/ingres/lib   -Wl,-soname -Wl,ingres.so -o .libs/ingres.so
    libtool: link: ( cd ".libs" && rm -f "ingres.la" && ln -s "../ingres.la" "ingres.la" )
    /bin/sh /home/ingres/ingres-2.2.3/libtool --mode=install cp ./ingres.la /home/ingres/ingres-2.2.3/modules
    libtool: install: cp ./.libs/ingres.so /home/ingres/ingres-2.2.3/modules/ingres.so
    libtool: install: cp ./.libs/ingres.lai /home/ingres/ingres-2.2.3/modules/ingres.la
    libtool: finish: PATH="/opt/Ingres/IngresII/ingres/bin:/opt/Ingres/IngresII/ingres/utility:/opt/Ingres/IngresII/ingres/bin:/opt/Ingres/IngresII/ingres/utility:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games:/sbin" ldconfig -n /home/ingres/ingres-2.2.3/modules
    ----------------------------------------------------------------------
    Libraries have been installed in:
       /home/ingres/ingres-2.2.3/modules

    If you ever happen to want to link against installed libraries
    in a given directory, LIBDIR, you must either use libtool, and
    specify the full pathname of the library, or use the `-LLIBDIR'
    flag during linking and do at least one of the following:
       - add LIBDIR to the `LD_LIBRARY_PATH' environment variable
         during execution
       - add LIBDIR to the `LD_RUN_PATH' environment variable
         during linking
       - use the `-Wl,-rpath -Wl,LIBDIR' linker flag
       - have your system administrator add LIBDIR to `/etc/ld.so.conf'

    See any operating system documentation about shared libraries for
    more information, such as the ld(1) and ld.so(8) manual pages.
    ----------------------------------------------------------------------

    Build complete.
    Don't forget to run 'make test'.

$ make test

Build complete.
Don't forget to run 'make test'.

/usr/bin/php: symbol lookup error: /opt/Ingres/IngresII/ingres/lib/libiiapi.1.so: undefined symbol: adg_srv_size
/usr/bin/php: symbol lookup error: /opt/Ingres/IngresII/ingres/lib/libiiapi.1.so: undefined symbol: adg_srv_size

=====================================================================
PHP         : /usr/bin/php 
CWD         : /home/ingres/ingres-2.2.3
Extra dirs  :
VALGRIND    : Not used
=====================================================================
TIME START 2012-06-14 10:19:01
=====================================================================

    enter code here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T07:23:36.660

这是一个现已在最新版本 2.2.4 中修复的错误 - 您可以通过[http://pecl.php.net/get/ingres](http://pecl.php.net/get/ingres)下载代码。用于与 Ingres 链接的库的顺序似乎已经改变或变得更加敏感。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T18:04:40.063

尝试`./configure --with-ingres=/opt/Ingres/IngresII`

# html - 充实 块充当链接

> ID：11033116
> 
> 赞同：1
> 
> 时间：2012-06-14T12:31:02.477
> 
> 标签：html, css

我有以下内容`<li>`，我希望整体`li`表现得像一个链接。目前，只有 span 中的文本充当链接。另外，是否可以在悬停时更改文本的颜色。当我将鼠标悬停在文本上时，我的代码只会更改文本的颜色，但当我将鼠标悬停在块中的其他位置时保持不变。任何帮助表示赞赏。

我把演示放在 jsfiddle 上：http: [//jsfiddle.net/noscirre/JtVGp/4/](http://jsfiddle.net/noscirre/JtVGp/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:35:39.747

试试这个

[http://jsfiddle.net/Bongs/JtVGp/5/](http://jsfiddle.net/Bongs/JtVGp/5/)

我已经在链接中添加了类，在链接中添加了一些 css `li`...

HTML

```
<li class="app1"> 
  <a title href="#" class="blocklink">
        <span>ANOTHER APP</span>
  </a> 
</li> 
```

CSS

```
.app1 {position:relative;}
.blocklink{position:absolute;top:0px;left:0px;width:100%;height:100%;}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:37:21.080

关于颜色的变化，将您的最后一个 CSS 条目从

```
#app-container ul.apps li:hover a:hover { color: #fff; } 
```

到

```
#app-container ul.apps li.app1:hover a { color: #fff; } 
```

为了使整个`<li>`盒子表现得像一个链接，你可以`onclick`通过 JavaScript 向它添加一个处理程序，例如，像这样：

```
var li = document.querySelector( '#app-container .app1' );

li.addEventListener( 'click', function(){
   window.location = 'your/new/url';
} ); 
```

并且可能使用`cursor: pointer`（[MDN 链接](https://developer.mozilla.org/en/CSS/cursor)）更改光标属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-29T19:59:02.650

只需将此样式添加到您的导航中：

```
ul.menu > li > a {
    display: block;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
} 
```

该解决方案不考虑内部的 span 标签。HTML 如下所示：

```
<ul class="menu">
    <li><a>Navigation Point 1</a></li>
    <li><a>Navigation Point 2</a></li>
</ul> 
```

# c++ - set_new_handler 和 errno

> ID：11033120
> 
> 赞同：3
> 
> 时间：2012-06-14T12:31:22.323
> 
> 标签：c++, memory, errno

如果你使用`set_new_handler`并且你的处理函数被调用，`errno`保证被设置，它是从 0 返回的方式`malloc`？还是更好用`strerror(ENOMEM)`？`errno`适用于 Microsoft C++ 和 GCC，但这仍然存在是否得到保证的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:49:35.880

没有要求`new`（或`malloc`就此而言）设置`errno`. 两者都有明确定义的错误报告语义（抛出`std::bad_alloc`或返回空指针），不涉及`errno`. （从实施质量的角度来看，我不希望`new`或被`malloc`允许修改`errno`。不符合 Posix 要求。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T12:50:14.340

我认为`errno`检测动态内存分配失败还不够好。查看 N3337，特别是*3.7.4.1 分配功能*：

> **2** [...] 即使请求的空间大小为零，请求也可能失败。如果请求成功，则返回的值应是一个非空指针值 (4.10) p0，不同于任何先前返回的值 p1，除非该值 p1 随后被传递给操作员删除。取消引用作为零大小请求返回的指针的效果是未定义的。^(35)
> 
> **3**分配存储失败的分配函数可以调用当前安装的新处理函数 (18.6.2.3)，如果有的话。[ 注意：程序提供的分配函数可以使用 std::get_new_handler 函数 (18.6.2.4) 获取当前安装的 new_handler 的地址。—尾注]如果使用非抛出异常规范（15.4）声明的分配函数未能分配存储，它应返回一个空指针。任何其他分配存储失败的分配函数只能通过抛出与 std::bad_alloc (18.6.2.1) 类型的处理程序 (15.3) 匹配的类型的异常来指示失败。

和脚注 35（这只是指示性和非规范性的）：

> ^(35))意图是通过调用 std::malloc() 或 std::calloc() 使 operator new() 可实现，因此规则基本相同。C++ 与 C 的不同之处在于要求零请求以返回非空指针。

现在，前往 C 标准草案 N1570 并查看*7.5 错误`<errno.h>`*：

> **3**程序启动时初始线程中errno的值为零（其他线程中errno的初始值为不确定值），但绝不会被任何库函数设置为零。202）errno的值可以设置为如果在本国际标准的函数描述中未记录 errno 的使用，则无论是否存在错误，库函数调用都为非零。

似乎`errno`可能由`malloc`失败设置，但这不是必需的。

另外*N1570的7.22.3内存管理功能*也没有规定`malloc`或者朋友需要设置`errno`。

我的建议是坚持标准保证并使用`std::bad_alloc`抛出的异常 ( ) `new`（即不使用 no-throw `new`）。

# android - Android检查wifi连接

> ID：11033121
> 
> 赞同：2
> 
> 时间：2012-06-14T12:31:33.733
> 
> 标签：android, httpurlconnection

我有一个关于 Android 中 wifi 连接的具体问题。我正在开发一个项目，该项目正在从网络服务器下载一些数据，并且每次在开始同步之前我都在检查互联网连接，如下所示：

```
 public static boolean isOnline(Context context) {
    ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();
    if (netInfo != null && netInfo.isConnectedOrConnecting()) {
        return true;
    }
    return false;
}

public static boolean chkNetworkStatus(Context context) {
    boolean result = false;
    new Thread() {
        @Override
        public void run() {

           for(int i=0;i<3;i++){
           HttpGet requestForTest = new HttpGet("http://m.google.com");
           try {
                  new DefaultHttpClient().execute(requestForTest);
                  responded = true;
                } catch (Exception e) {
                    responded = false;
                }
           }
        }
    }.start();
    boolean isOnline = isOnline(context);
    if(responded && isOnline){
        result = true;
    } else {
        result = false;
    }

    Log.e("","responded : "+responded);
    return result;
} 
```

但是在这种情况下，当我仍然连接到 wifi 并且我正在走路（失去连接）并按下同步按钮时，它仍然返回 true，因为我已连接，但实际上它什么也没做。

无论如何我可以检测到这一点，或者我应该在我正在使用`connectionTimeOut`的类中使用函数？`HttpURLConnection`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:38:38.807

尝试这样做：

```
public static void isNetworkAvailable(final Handler handler, final int timeout)
{

    // ask fo message '0' (not connected) or '1' (connected) on 'handler'
    // the answer must be send before before within the 'timeout' (in
    // milliseconds)

    new Thread()
    {

        private boolean responded = false;

        @Override
        public void run()
        {

            // set 'responded' to TRUE if is able to connect with google
            // mobile (responds fast)

            new Thread()
            {

                @Override
                public void run()
                {
                    HttpGet requestForTest = new HttpGet("http://m.google.com");
                    try
                    {
                        new DefaultHttpClient().execute(requestForTest); // can
                                                                            // last...
                        responded = true;
                    }
                    catch (Exception e)
                    {
                    }
                }

            }.start();

            try
            {
                int waited = 0;
                while (!responded && (waited < timeout))
                {
                    sleep(100);
                    if (!responded)
                    {
                        waited += 100;
                    }
                }
            }
            catch (InterruptedException e)
            {
            } // do nothing
            finally
            {
                if (!responded)
                {
                    handler.sendEmptyMessage(0);
                }
                else
                {
                    handler.sendEmptyMessage(1);
                }
            }

        }

    }.start();

}

Handler h = new Handler()
{

    @Override
    public void handleMessage(Message msg)
    {

        if (msg.what != 1)
        { // code if not connected

        }
        else
        { // code if connected

        }

    }
}; 
```

在你的活动中，这样称呼它：

```
 isNetworkAvailable(h, 2000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:42:53.687

`HttpGet`实际上，我不知道这是否解决了您的问题，但是您可以根据您的请求设置连接超时，

这适用于我的情况，所以我不需要检查互联网可用性..

```
try
  {

   HttpGet request = new HttpGet(url));
   HttpParams httpParameters = new BasicHttpParams();
   // Set the timeout in milliseconds until a connection is established.
   // The default value is zero, that means the timeout is not used. 
   int timeoutConnection = 60000;
   HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
   // Set the default socket timeout (SO_TIMEOUT) 
   // in milliseconds which is the timeout for waiting for data.
   int timeoutSocket = 60000;
   HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);
   // create object of DefaultHttpClient    
   DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
   request.addHeader("Content-Type", "application/json");
   HttpResponse response = httpClient.execute(request);
   // get response entity
   HttpEntity entity = response.getEntity();
   // convert entity response to string

     if (entity != null)
      {
         result = EntityUtils.toString(entity);
      }

   }
 catch (SocketException e)
  {
     return "-222" + e.toString();
  }
 catch (Exception e)
  {
     return "-333" + e.toString();
  } 
```

**注意：**在您的情况下，请求和其他代码可能会有所不同，这只是`HttpGet`参数如何用于设置连接超时的想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T12:43:40.943

基本上，如果您注册，您将在网络连接发生变化时收到广播。

```
android.net.conn.CONNECTIVITY_CHANGE 
```

**解决方案给你。**

您需要注册并处理 BroadCastReceiver`android.net.conn.CONNECTIVITY_CHANGE`

**第1步**

在清单中包含以下权限

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

**第2步**

让 Android 知道哪个类将注册广播接收器。

```
<receiver android:name="ConnectivityReceiver_package_name.ConnectivityReceiver">
   <intent-filter>
      <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
   </intent-filter>
</receiver> 
```

**第 3 步**

将您的逻辑用于各种网络状态。

```
public class ConnectivityReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {

     String action = intent.getAction();

    boolean noConnectivity = intent.getBooleanExtra(ConnectivityManager.EXTRA_NO_CONNECTIVITY,false);

     if(noConnectivity){

         //Show Warning Message
         //Take appropriate actions.
     }

    }

} 
```

# java - 观察应用程序中调用的所有函数

> ID：11033126
> 
> 赞同：-1
> 
> 时间：2012-06-14T12:31:54.493
> 
> 标签：java, rmi, xml-rpc, observer-pattern

我开始构建一个远程协作应用程序。

我想要的是在一个应用程序中进行的所有操作都可以完全复制到远程计算机上运行的应用程序中。

有点像远程桌面/teamviewer - 但我需要在远程计算机中**调用相同的函数**，而不是传输图像差异信息。

我需要修改现有应用程序并添加协作部分。

我研究了 XML-RPC 和 RMI 作为远程执行命令的方法。

**我想要的是一种捕获应用程序中进行的所有函数调用的方法。**

你能给我一些指示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T18:49:38.053

您可以使用面向方面的编程框架 (AOP)，例如 JBoss AOP、AspectJ 等。

[http://www.jboss.org/jbossaop](http://www.jboss.org/jbossaop)

[http://www.eclipse.org/aspectj](http://www.eclipse.org/aspectj)

因此，您不必修改现有源代码的任何内容。

# mysql - mysql LEFT JOIN 选择查询，结果有限

> ID：11033133
> 
> 赞同：1
> 
> 时间：2012-06-14T12:32:22.903
> 
> 标签：mysql, sql, join, where

我正面临一种情况，需要帮助。我有两张桌子：

**用户：**

*   `user_id`, `fname`, `lname`, `email`.

**用户时间表：**

*   `time_id`, `user_id`, `month`, `state`, `date`.

用户将时间添加到`user_time`表中，状态为 = 'no' 并在月底提交更改状态 = 'yes' 的时间，假设月份是 JUNE 我想编写一个查询，将带来所有用户根本没有添加时间的用户，以及添加了时间但未在 6 月提交的用户。

这是我的查询。

```
SELECT user_timesheet.time_id, user_timesheet.user_id, 
    user_timesheet.month, user_timesheet.`state`, 
    `user`.user_id, `user`.fname, `user`.lname,  
    `user`.email
FROM user LEFT JOIN  
     user_timesheet ON user.user_id=user_timesheet.user_id
WHERE (
    user_timesheet.state = 'no' OR 
    user_timesheet.state IS NULL) 
AND (
    user_timesheet.month = 'june' OR 
    user_timesheet.month IS NULL)
GROUP BY user.user_id 
```

结果将所有在 6 月添加时间但已提交的用户以及自加入后从未添加时间的用户带到系统。但是，它不会带来上个月添加时间或提交时间但根本没有添加 6 月时间的用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:42:55.967

首先，首先创建一个查询，该查询与在指定时间段内添加时间且状态为“YES”的所有用户的 userId 相匹配 => 您拥有所有“好”用户。那么您只需选择不在该列表中的所有用户。您可以在子查询或减号查询中使用不存在、不存在。

没有 in 的例子：

```
SELECT user_timesheet.time_id, user_timesheet.user_id, user_timesheet.month, user_timesheet.`state`, `user`.user_id, `user`.fname, `user`.lname,  `user`.email
  FROM user LEFT JOIN user_timesheet ON user.user_id=user_timesheet.user_id
where user.user_id not in (
  select user.user_id 
    from user inner join user_timesheet ON user.user_id=user_timesheet.user_id 
  where user_timesheet.state = 'yes' 
  AND user_timesheet.month = june
  )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:59:41.030

而不是 where 子句中的 (a = x or a is null) 将您的过滤器放在 ON 子句中。这将删除不匹配的记录，但保留左连接的性质。

要将“否”状态视为不存在的行，将其从左连接中过滤出来：

```
SELECT user_timesheet.time_id, user_timesheet.user_id, 
       user_timesheet.month, user_timesheet.`state`, 
       `user`.user_id, `user`.fname, `user`.lname,  
       `user`.email
  FROM user 
  LEFT JOIN user_timesheet
  -- Eliminate users who have submitted 'no'
  -- For June
    ON user.user_id=user_timesheet.user_id
    -- Turn 'no' status into null record
   AND user_timesheet.state <> 'no'
   AND user_timesheet.month = 'june'
  -- If there is no row in user_timesheet
  -- It means that
  --    a) There was not any
  --    b) There was a 'no' status
 WHERE user_timesheet.user_id is null
 GROUP BY user.user_id 
```

注意：我不知道 MySql 中的注释标记是什么。它是 -- 在 Sql Server 中，所以在尝试查询之前删除此行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:16:02.887

```
SELECT user_timesheet.time_id, user_timesheet.user_id, user_timesheet.month, user_timesheet.`state`, 
       `user`.user_id, `user`.fname, `user`.lname, `user`.email
  FROM user 
  LEFT JOIN user_timesheet
    ON user.user_id=user_timesheet.user_id
    AND user_timesheet.month = 'june' AND user_timesheet.state = 'no' 
```

# jquery - 使用 jquery 在弹出窗口中选择所有复选框列表

> ID：11033137
> 
> 赞同：0
> 
> 时间：2012-06-14T12:32:32.703
> 
> 标签：jquery, asp.net, checkbox

我在弹出窗口中有一个复选框列表。我在 jquery 中使用了 selectall checkboxlist items 函数。问题是当我检查全选复选框时，它会选择弹出窗口和网页中的所有复选框列表项。如何使其仅在弹出窗口中仅选择复选框列表项。我的代码为

```
 <td>   <div style="text-align: left; margin: auto;">
                    <asp:CheckBox ID="chkSelectReportAll" runat="server" Text="Select All" onclick="checkall()"/>
                    <asp:CheckBoxList ID="chkReportLst" runat="server">
                    </asp:CheckBoxList>
        </div>
 </td> 
```

我的脚本为

```
function checkall() {
   $('#MainContent_uscOptionsPOPUP_chkSelectReportAll').click(
    function () {
     if (document.getElementById('chkReportLst'))                    
   $("INPUT[type='checkbox']").attr('checked', $('#MainContent_uscOptionsPOPUP_chkSelectReportAll').is(':checked'));
            });
        } 
```

有什么建议么 ？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:38:55.250

当然是，但在这样做之前，您必须在弹出窗口内的复选框中添加 class="popupCheckbox"

## jQuery 1.6+

使用新的[.prop()](http://api.jquery.com/prop/)函数：

```
$(".popupCheckbox").prop("checked", true);
$(".popupCheckbox").prop("checked", false); 
```

## jQuery 1.5 及以下

.prop() 函数不可用，因此您需要使用[.attr()](http://api.jquery.com/attr/)。

要检查复选框（通过设置选中属性的值）做

```
$('.popupCheckbox').attr('checked','checked') 
```

和取消检查（通过完全删除属性）做

```
$('.popupCheckbox').removeAttr('checked') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:39:01.383

为您的 分配一个 ID `<div>`，这样您就可以将选择器缩小到其中的输入。

```
<div id="cntCheckBoxList" style="text-align: left; margin: auto;">
    <asp:CheckBox ID="chkSelectReportAll" runat="server" Text="Select All" onclick="checkall()"/>
    <asp:CheckBoxList ID="chkReportLst" runat="server"></asp:CheckBoxList>
</div> 
```

选择器变为：

```
$("#cntCheckBoxList INPUT[type='checkbox']").attr('checked',    $('#MainContent_uscOptionsPOPUP_chkSelectReportAll').is(':checked')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T12:36:53.863

更改此行

```
$("INPUT[type='checkbox']").attr('checked',
   $('#MainContent_uscOptionsPOPUP_chkSelectReportAll').is(':checked')); 
```

到

```
$("#any_parent_in_popup INPUT[type='checkbox']").attr('checked',
       $('#MainContent_uscOptionsPOPUP_chkSelectReportAll').is(':checked')); 
```

替换`#any_parent_in_popup`为弹出窗口内的任何父元素 ID，并包含所有复选框。如果您没有，您可以考虑添加一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T12:38:37.553

```
function checkall() {
   $('#MainContent_uscOptionsPOPUP_chkSelectReportAll').click(function () {
      $("#chkReportLst INPUT[type='checkbox']").attr('checked', $('#MainContent_uscOptionsPOPUP_chkSelectReportAll').is(':checked'));
   });
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T12:40:52.410

目前的问题是，当您使用 选择复选框时`$("INPUT[type='checkbox']")`，jQuery 正在查看整个页面上的所有复选框，正如您所提到的。

你想要的是属于的所有复选框`chkReportLst`。

为了可读性，我倾向于将其作为 jQquery 子选择器，使用该`.find()`函数。

因此，首先选择您的复选框列表，然后使用 .find() 选择作为该列表子元素的复选框：

`$("#chkReportLst").find("INPUT [type='checkbox']").attr('checked', $('#MainContent_uscOptionsPOPUP_chkSelectReportAll').is(':checked'));`

# cakephp - 在整个 cakePHP 网站中使用 find() 结果

> ID：11033154
> 
> 赞同：0
> 
> 时间：2012-06-14T12:33:51.523
> 
> 标签：cakephp

我制作了一个将在整个网站中显示的页脚元素。

此页面的内容需要填充来自某个模型的数据，在显示的每个页面上。

```
$sponsors = $this->Sponsor->find('all',
        array('条件' => array("NOT" => array("Sponsor.logo_id" => null))));

```

但是定义这个的最佳位置在哪里？我在 app_controler 中进行了思考，但我并不完全清楚如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:25:08.890

在你`AppController`的`beforeFilter`或可能`beforeRender`（我从来没有真正注意到差异）；确保您`AppController`可以访问`Sponsor`模型。

```
// app_controller.php
function beforeFilter() {
    parent::beforeFilter();
    $this->loadModel('Sponsor');
    $this->Sponsor->recursive = -1; // adjust to return more/less data
    $sponsors = $this->Sponsor->find('all',
        array('conditions' => array("NOT" => array("Sponsor.logo_id" => null))));
    $this->set('sponsors', $sponsors);
} 
```

您现在可以`$sponors`在任何视图中访问。

最好将数据放入一个元素中并将其缓存一段合适的时间，以避免不断地查询数据库（取决于其他因素，例如页面加载/其他密集查询等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:58:22.233

*   您可以在元素文件夹中创建一个元素，然后在那里创建一个 footer.ctp 文件。
*   现在，添加`<?php echo $this->element('footer'); ?>`您的 Layouts/default.ctp 文件

这样每个页面的页脚都会被加载。这是一种优雅的方式，您还可以将其他内容放入 Elements 文件夹中，例如标题、分页等。

# ios - NSTemporaryDirectory 子目录

> ID：11033157
> 
> 赞同：1
> 
> 时间：2012-06-14T12:34:12.203
> 
> 标签：ios, cocoa-touch, nsurl, nsfilemanager

我无法在 NSTemporaryDirectory 子文件夹中存储任何文件

rootDirectoryName 是 GUID subDirectoryName 也是 GUID

```
self.rootFolderPath=[NSTemporaryDirectory() stringByAppendingString:rootDirectoryName];
self.currentFolder=[self.rootFolderPath stringByAppendingPathComponent:subDirectoryName];
NSURL* url =[NSURL URLWithString:[self.currentFolder stringByAppendingPathComponent:path]];
[data writeToURL:url atomically:YES];
NSFileManager *fileMgr = [NSFileManager defaultManager];
NSArray* paths=[fileMgr contentsOfDirectoryAtPath:self.currentFolder error:nil]; 
```

其中路径也是一些 GUID.jpg 我正在尝试保存 jpg 数据。

每次路径数组为空。在此之前，我创建了一个 rootDirectoryName 和 subDirectoryName

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:04:29.860

解决了。刚换成`[data writeToURL:url atomically:YES]`。 `[data writeToFile:[url path] atomically:YES]`

# java - Hibernate 事务可以有多复杂

> ID：11033163
> 
> 赞同：0
> 
> 时间：2012-06-14T12:34:48.280
> 
> 标签：java, hibernate

这可能更像是一个“设计”或风格问题：我一直在考虑 Hibernate 事务应该或可能有多复杂。我正在使用一个使用 Hibernate 将消息持久保存到数据库的应用程序。

构建消息 POJO 涉及将消息中的一对多关系分解到它们各自的持久对象中。例如，消息包含“城市”字段。从消息中提取城市，数据库搜索等效的城市对象并将结果对象添加到消息 POJO。所有这些都在一个事务中完成：

*   开始交易
*   重复测试
*   检索城市对象
*   消息对象中的 setCity(cityObject)
*   检索国家对象
*   消息对象中的 setCountry(countryObject)
*   持久化消息对象
*   提交结束事务

事实上，实际交易要复杂得多。这是一个合理的结构还是应该在单个事务中完成每个任务（而不是在一个事务中完成所有任务）？我想第二个问题与在事务中设计任务的最佳实践有关。我了解某些任务需要为参照完整性进行分组，但情况并非总是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:38:15.550

事务应该根据业务需求进行分组，而不是技术复杂性。如果您有 N 个操作必须作为一个单元一起成功或失败，那么这就是代码应该支持的。它应该更多地是商业考虑而不是技术考虑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:39:11.897

无论您在外部事务边界内放置什么，问题是您是否可以成功回滚每个操作。

将相关操作捆绑在一个边界内，并使其尽可能简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T12:41:19.377

多个事务只有在数据库没有处于它们之间的愚蠢状态时才有意义，因为任何单个事务都可能失败。*如果任何活动块必须是原子的并且整个事务依赖于任何其他原子单元，则嵌套*事务可能是有意义的。

# java - 使用java将pdf文件上传到google docs？

> ID：11033168
> 
> 赞同：4
> 
> 时间：2012-06-14T12:35:08.457
> 
> 标签：java, google-drive-api, google-docs-api

我正在尝试将 pdf 文件上传到 Google Docs/Drive，为此我使用以下代码...

```
int MAX_CONCURRENT_UPLOADS = 10;
int PROGRESS_UPDATE_INTERVAL = 1000;
int DEFAULT_CHUNK_SIZE = 10485760;

ExecutorService executor = Executors.newFixedThreadPool(MAX_CONCURRENT_UPLOADS);
File file = new File(filePath);
String mimeType=DocumentListEntry.MediaType.fromFileName(file.getName()).getMimeType();
String contentType=DocumentListEntry.MediaType.fromFileName(file.getName()).getMimeType();
MediaFileSource mediaFile = new MediaFileSource(file, contentType);
URL createUploadUrl = new URL("https://drive.google.com/feeds/upload/create-session/default/private/full");
FileUploadProgressListener listener = new FileUploadProgressListener();
ResumableGDataFileUploader uploader=new ResumableGDataFileUploader(createUploadUrl,mediaFile,service, DEFAULT_CHUNK_SIZE, executor, listener, PROGRESS_UPDATE_INTERVAL); 
```

但是 FileUploadProgressListener 显示错误，它是一个 google api 还是一个类......？

请帮忙上传pdf文件有什么问题......

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T05:48:33.030

您正在使用 Google 的旧 API。试用新的 Google Drive API

**参考 ：**

[https://developers.google.com/drive/](https://developers.google.com/drive/)

[http://code.google.com/p/google-api-java-client/source/browse/drive-cmdline-sample/src/main/java/com/google/api/services/samples/drive/cmdline/ DriveSample.java?repo=samples&r=08555cd2a27be66dc97505e15c60853f47d84b5a](http://code.google.com/p/google-api-java-client/source/browse/drive-cmdline-sample/src/main/java/com/google/api/services/samples/drive/cmdline/DriveSample.java?repo=samples&r=08555cd2a27be66dc97505e15c60853f47d84b5a)

# android - 读取另一个应用程序创建的文件

> ID：11033169
> 
> 赞同：2
> 
> 时间：2012-06-14T12:35:09.603
> 
> 标签：android

有两个已发布的应用程序都使用相同的方法来编写作为应用内配置文件基础的文件。我想创建一个中心点，用户可以在其中阅读他们汇总的个人资料信息。我应该尝试访问什么目录以获取这些文件以在我的新应用程序中读取它们？这甚至可能吗，或者我应该让这两个应用程序使用带有内容提供程序的 sqlite 吗？或其他一些方法？

我已经阅读了[fos 文档](http://developer.android.com/reference/java/io/FileOutputStream.html)，但只有某些方法提供了路径，而有问题的方法没有

我不确定如何处理这个问题。感谢您的指导。

下面是写方法：

```
 public void write(Context ctx){

    try {

        FileOutputStream fos;
        fos = ctx.openFileOutput("profile", Context.MODE_WORLD_READABLE);
        ObjectOutputStream oos = new ObjectOutputStream(fos);

        oos.writeObject(profile);

        oos.close();
        fos.close();
    } catch (IOException e) {
        e.printStackTrace();
        Toast.makeText(ctx, "Error: Writing to file",
                Toast.LENGTH_SHORT).show();
    }
} 
```

# javascript - JavaScript 在 nodeJS 服务器上导致错误

> ID：11033171
> 
> 赞同：1
> 
> 时间：2012-06-14T12:35:24.253
> 
> 标签：javascript, node.js

我正在尝试使用 socket.io 运行 nodeJS 测试脚本，但是如果我尝试包含任何 javascript，我的服务器上部署的脚本会导致错误。

只需在我的本地主机上通过 nginx 调用 HTML 不会引发任何错误。

这是我的 index.html：

```
<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8" />
    <title>NodeJS Realtime Test</title>
    <script type="text/javascript" src="/client/app.js"></script>
</head>
<body>
    <p>Moin!</p>
</body>
</html> 
```

这是 app.js 的内容：

```
console.log("test"); 
```

Chrome 向我抛出了这个错误：

```
Uncaught SyntaxError: Unexpected token < app.js:1 
```

在 Opera 中，错误是：

```
Syntax error at line 1 while loading: expected expression, got '<'  Linked script compilation   app.js 
```

此外，调试器显示错误发生在我的 index.html 文件的字符之一上。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:54:20.347

感谢 Jani Hartikainen 的评论，我意识到这是 nodeJS 服务器的错误配置。

我在服务器上的任何请求上使用了 index.html 的示例。它使用此配置工作：[https ://gist.github.com/701407](https://gist.github.com/701407)

# css - 在带有 Symfony2 的 Twig 中使用 {% stylesheets %} 标签时通过 Twig 运行 CSS 文件

> ID：11033172
> 
> 赞同：11
> 
> 时间：2012-06-14T12:35:36.330
> 
> 标签：css, symfony, twig, assetic

我在我的模板中包含 CSS 样式表，如下所示：

```
{% stylesheets
    "@SomeBundle/Resources/assets/css/default.css.twig"
    "@SomeBundle/Resources/assets/css/global.css.twig"
%}
    <link rel="stylesheet" href="{{ asset_url }}" />
{% endstylesheets %} 
```

但是，我想通过 Twig 运行这些 CSS 文件，这在使用`{% stylesheets %}`标签时是否可能以任何方式进行，或者这是否需要其他方法。我已经尝试启用`twig`过滤器，但它不存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T16:04:05.217

如果您将 css 作为内部样式表加载，则可以这样做。像这样的东西：

```
{% block stylesheets %}
    {{ parent() }}
    {% include 'AcmeBundle:Bundle:mycss.css.twig' %}
{% endblock %} 
```

然后 mycss.css.twig 模板将包含：

```
<style type="text/css">
    /* */
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-03T20:33:46.437

使用 Twig 处理 CSS 最常见的事情应该可以使用[Sass](http://sass-lang.com/)、[LESS](http://lesscss.org/)或类似的东西来实现，它们可以用作 Assetic 过滤器。谷歌抛出的第一个教程是这个：[http ://alexandre-salome.fr/blog/Sass-Compass-Assetic-In-Ten-Minutes](http://alexandre-salome.fr/blog/Sass-Compass-Assetic-In-Ten-Minutes)

诚然，如果您无法在您正在开发的生产服务器上运行 Ruby/Node.js/whatever，这看起来并没有多大帮助，但是应该可以基于 PHP 之一创建一个 Assetic 过滤器如果是这样的话，Sass/LESS 的端口（假设它们很好）。

# php - 带有html代码的变量内的php代码

> ID：11033176
> 
> 赞同：2
> 
> 时间：2012-06-14T12:35:54.100
> 
> 标签：php, html, variables

例如，我想用 html 将代码 php 添加到变量中

```
$html = '<b></b> <?php echo $lang["text"] ?>'; 
```

但它不解释 php 代码。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T12:42:30.663

使用这样的字符串连接：

```
$html = '<b></b>' . $lang['text']; 
```

或在双引号字符串中插入变量，如下所示：

```
$html = "<b></b>${lang['text']}"; 
```

两个版本都是正确的，使用你喜欢的那个。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-14T12:42:40.487

你想要的是所谓的字符串插值（阅读[它是如何为 PHP 工作的](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing)）。

您的特定示例将使用

```
$html = "<b></b> {$lang['text']}"; 
```

字符串插值仅发生在双引号字符串 ( `"string here"`) 中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-14T14:02:09.063

逃避输出非常重要。（安全基础）

```
$html = sprintf('<b>%s</b>', htmlspecialchars($lang['text'])); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-14T12:37:22.083

**当您已经处于“运行 PHP 代码模式”时，不能在**字符串中间从“输出原始文本模式”切换到“运行 PHP 代码模式”

 **```
$html = "<b></b> ${lang['text']}"; 
```

......虽然你为什么想要一个空的粗体元素超出了我的范围。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T12:36:53.643

```
<?php

$html = '<b>'.$lang['text'].'</b>';

?> 
```

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2012-06-14T12:40:46.007

确保文件扩展名是 php。

```
<?php
     $html = '<b>' . $lang["text"] . '</b>';
?> 
```**

# delphi - Delphi Re-Raise Exception（作为参数传入过程）

> ID：11033177
> 
> 赞同：4
> 
> 时间：2012-06-14T12:36:01.570
> 
> 标签：delphi, exception, delphi-2010, customization, raise

这是重新引发异常并且运行良好的示例

```
 try
    raise Exception.Create('Exception msg');
  except
    on E: Exception do
    begin
      if not(e is EConvertError) then
        raise; // re-raise exception
    end;
  end; 
```

这是我的自定义方法

```
//    uses fib //fibplus  EFIBInterBaseError
    procedure CustomizeException(e: Exception);
    var
      s: String;
    begin
      if E is EFIBInterBaseError then
      begin
        if Pos('unique',e.Message)>0 then
        begin
          s := 'record';
          if Pos('CUSTOMMERS_IDX1',e.Message)>0 then
            s:= 'Custommer Number';

          raise TCustomizedException.CreateFmt('The %s is already exists.',[s]);
        end
        else
        if Pos('</CMSG>',e.Message)>0 then
        Begin
          raise TCustomizedException.CreateFmt('%s',
          [StrUtilsEx.GiveInTags(e.Message,'<CMSG>','</CMSG>')]
          );
        End
        else
          raise EFIBInterBaseError.CreateFmt('%s',[e.Message]);
      end
      else
        raise Exception.Create(e.Message);   //e;// e.Create(e.Message);
    end; 
```

但

```
 try
    raise EConvertError.Create('Error Message');
  except on e : exception do
    Begin
      ShowMessage(Format('%s -> %s',[e.ClassName , e.Message])); //(1)
      try
        CustomizeException(e);
      except on e2: Exception do
        ShowMessage(Format('%s -> %s',[e2.ClassName , e2.Message])); //(2)
      end;
    End;
  end; 
```

结果

(1)->EConvertError -> 错误信息

(2)->**异常**-> 错误信息

当我像这个代码一样更改最后一行时运行良好

```
 else
    raise e; 
```

(1)->EConvertError -> 错误信息

(2)-> **EConvertError** -> 错误信息

但我收到“模块'Test.exe'中地址00405F04的访问冲突。读取地址00000000。” 留言后

如何引发与基本异常相同的异常类型

解决方案是*raise TObject(AcquireExceptionObject); //<- 我想用“E:*

```
type
  ECustomizedException = class(Exception);
 uses 
  fib,SysUtils,System

class procedure SystemEx.CustomizeException(E : Exception);
var
  s: String;
begin
  if E is EFIBInterBaseError then
  begin
    if Pos('unique',e.Message)>0 then
    begin
      s := 'Record';
      if Pos('CUSTOMMER_IDX1',e.Message)>0 then
        s:= 'Custommer';

      raise ECustomizedException.CreateFmt('%s is already exists.',[s]);
    end
    else
    if Pos('</CMSG>',e.Message)>0 then
    Begin
      raise ECustomizedException.CreateFmt('%s',
      [StrUtilsEx.GiveInTags(e.Message,'<CMSG>','</CMSG>')]
      );
    End
    else
      raise EFIBInterBaseError.CreateFmt('%s',[e.Message]);
  end
  else
    raise TObject(AcquireExceptionObject); //<- I would like to solve with "E : Exception" param
//    raise Exception.Create(e.Message);   //e;// e.Create(e.Message);// Exception.Create(E.Message);
End. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T13:25:18.817

您面临的问题是，如果在 except 块中捕获异常，“结束”将释放您刚刚再次引发的异常实例。所以下一个 except 块将捕获已经释放的 Exception 实例。但是您可以通过调用 AcquireExceptionObject 来防止这种情况，这使您成为异常实例的所有者。

因为你“不能”使用`raise;`(System.@RaiseAgain) 你可以抛出相同的异常实例`raise AcquireExceptionObject;`

# c# - 如何异步调用方法？

> ID：11033180
> 
> 赞同：3
> 
> 时间：2012-06-14T12:36:16.970
> 
> 标签：c#, winforms

我已经以 Windows 形式创建了一个应用程序。一旦我提交申请，申请就会得到处理。我创建了一个类库来处理应用程序并将提交的应用程序移动到不同的工作流程。为此，我从提交按钮的单击事件中调用了类库。一切正常，但唯一的问题是，一旦我提交应用程序并调用类库，处理它需要一些时间。我希望应用程序应该关闭并异步调用库方法。下面是代码：

```
private void OnPASubmit_Click(object sender, EventArgs e)
{
    if ((ApplAcct.AcctID == 0) || CheckForChanges())
    {
        UIHelper.ShowMessage("Please Save Application first");
        return;
    }
    try
    {
        if (!AOTHelper.ValidateCheckOut(ApplAcct.AcctID))
        {
            return;
        }
        WorkflowTask.PutAccountWorkflowTask(ApplAcct.AcctID, AOTHelper.FindAcctGUID(Main.objAccountGUID, Acct.AcctID), Environment.UserName, 2);
        AOTHelper.checkInAccount(ApplAcct.AcctID);
        AOTHelper.AccountToProcess(Acct.AcctID);
        UIHelper.ShowMessage("Application has been submitted for processing.");
        this.Close();
    }
    catch (Exception ex)
    {
         AOTHelper.WriteLog(ex, "Can not submit application for processing ");
    }

    // ...
} 
```

AotHelper.AccountToProcess(Acct.AcctID), 方法调用类库，我想在异步调用的帮助下执行此操作，以便应用程序在提交后不必等待处理。

我将如何做。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:39:22.443

异步运行的多种方式，例如 TPL，启动自己的线程（在 4.5 框架中等待），但对于 winforms，可能最简单的方法是添加[BackGroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)组件。您只需从设计器的工具箱中拖放一个即可。

双击添加的组件，自动创建一个捕获后台工作程序的 DoWork 事件的方法，您可以将代码放在那里。然后在提交按钮中你只需要调用

```
 backgroundWorker.RunWorkerAsync(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T12:39:23.050

然后你应该使用 BackgroundWorker 类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T12:41:08.403

您可以使用 BackgroundWorker 线程...

**BackgroundWorker**使线程易于在`Windows Forms`. 密集型任务需要在另一个线程上完成，以便`UI doesn't freeze`. 有必要`post messages`并且`update the user interface`何时`task`完成。

使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)类时，可以在用户界面中指示操作进度、完成和取消。例如，您可以检查后台操作是否是`completed`或`canceled`与`display a message`用户。

[阅读一个简单的教程](http://www.dotnetperls.com/backgroundworker)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T12:43:27.760

这是一个很好的例子：

[http://www.ricky-dev.com/2012/05/throttled-processing-of-multiple-asynchronous-tasks/](http://www.ricky-dev.com/2012/05/throttled-processing-of-multiple-asynchronous-tasks/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T12:43:47.087

几种方式。您可以启动一个后台工作线程来调用该进程并在它完成时结束。您可以创建一个委托并使用 BeginInvoke。您可以发送一条消息，服务中的侦听器在派送进程以运行它时接收到该消息。有很多方法可以剥那只猫的皮。

这是一个旧但有用的 MSDN 参考[http://msdn.microsoft.com/en-us/magazine/cc301332.aspx](http://msdn.microsoft.com/en-us/magazine/cc301332.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-14T12:46:23.590

您只需在单独的线程上启动它。例如：

```
Thread thread = new Thread(new ParameterizedThreadStart(AOTHelper.AccountToProcess));
thread.Start(Acct.AcctID); 
```

但是，如果您要同时启动多个线程，则应该使用线程池。

不过，你需要小心。您在单独线程上调用的方法无法对 UI 执行任何操作，否则会引发异常。如果它需要对 UI 做一些事情，它将需要一个对表单或控件的引用，以便它可以调用该对象的 Invoke 方法以返回 UI 线程。此外，由于它是异步发生的，因此您将无法在调用它后立即显示该消息框，因为它将在工作完成之前立即显示。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-14T13:35:12.447

> 我希望应用程序应该关闭并异步调用库方法。

如果您想在应用程序关闭之前提交数据，请修改表单即将关闭时处理的事件。请理解此事件仅在用户关闭表单时发生。如果你想覆盖进程何时被迫退出，你必须订阅该事件等等类似的东西。

此外，还有一些方法可以关闭一个进程并且这些事件都不会发生。基本上，此解决方案仅在进程向 Windows 报告它正在关闭时才有效。

当然，如果您的程序进程即将结束，您不应该异步提交数据。

# jquery - 如何在$(this).children.append()中添加一个div标签而不丢失已有的动画效果

> ID：11033181
> 
> 赞同：1
> 
> 时间：2012-06-14T12:36:17.873
> 
> 标签：jquery

我希望每个页面都有一个导航栏。我没有在每个页面中声明它，而是使用了 .append() 函数，如下所示。

```
$(document).on('pageinit', '[data-role="page"]', function () {
$(this).children('[data-role="content"]').append('<div class="mainleft" datarole="collapsible-set"> <div data-role="collapsible" data-collapsed="true"><ul><li><a href="#">Hi</a></li><li><a href="#">Hello</a></li></ul></div></div>');
}); 
```

**当我直接在page-role="content"**部分添加导航栏时，动画效果完美。但是使用 .append() 函数，动画效果不起作用。它正常显示整个列表。还有一个问题是导航栏没有出现在第一页。只显示空白部分。

# html - 编写和发送基于 HTML 的电子邮件

> ID：11033184
> 
> 赞同：0
> 
> 时间：2012-06-14T12:36:32.957
> 
> 标签：html, email, html-email

我见过所有这些电子邮件，其中包括图片、div、段落和电子邮件中的其他内容。

我该怎么做呢？

谁能给我一个粗略的解释这些东西是如何工作的？我将我的 HTML 代码粘贴到我的电子邮件中，它只显示文本。有什么我应该启用/禁用的吗？

（我知道我需要一个邮件列表，但这可能是一个不同的主题。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:44:40.567

邮件正文应格式化为[Multipart](http://en.wikipedia.org/wiki/MIME#Multipart_messages) MIME（电子邮件标头说明其格式），至少包含两部分：文本/html 部分和文本/纯文本部分（适用于不支持的电子邮件客户端HTML 并减少给定电子邮件的“这是垃圾邮件发送者”标志的数量）。

大多数图形电子邮件客户端只允许使用其所见即所得工具输入 HTML。自定义 HTML 需要专业软件。

# android - Android 如何使用我们自己的图片 URL 打开图库？

> ID：11033188
> 
> 赞同：2
> 
> 时间：2012-06-14T12:37:09.777
> 
> 标签：android, image, gallery

我已经从 Github 下载了 Android 3D Gallery Source。我如果我在 Eclipse 中运行了该代码，它会打开移动设备中已经可用的图像。

我只想在我的示例应用程序中使用该图库源，并且还想要..如果我单击单击图库按钮意味着它应该打开我提供的图像（URL）或（来自内部存储器的图像）。

所以请帮助我。我已经搜索了很多并尝试了一些方法，但找不到合适的方法。所有的想法和提示总是受欢迎的。提前致谢。

Github 网址：[https ://github.com/CyanogenMod/android_packages_apps_Gallery3D](https://github.com/CyanogenMod/android_packages_apps_Gallery3D)

# regex - 正则表达式库基准

> ID：11033190
> 
> 赞同：5
> 
> 时间：2012-06-14T12:37:20.117
> 
> 标签：regex, benchmarking

是否有当代正则表达式库的最新基准？我对`re2`, `pcre`jit, `NSRegularExpression`,`Irregexp`等感兴趣。

我发现[http://lh3lh3.users.sourceforge.net/reb.shtml](http://lh3lh3.users.sourceforge.net/reb.shtml)和[正则表达式库基准测试](https://stackoverflow.com/questions/3544225/regular-expression-library-benchmarks)都已经过时了。

编辑：

我找到了另一个链接： [https](https://github.com/axiak/pyre2#id6) ://github.com/axiak/pyre2#id6 （“性能”一章）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:03:06.940

我在[http://sljit.sourceforge.net/regex_perf.html之前做了一些测量](http://sljit.sourceforge.net/regex_perf.html)

正则表达式引擎在过去几年中得到了很大改进，现在无论您的选择如何，您都可以获得高性能。尽管每个引擎都有弱点（在性能或内存消耗方面表现不佳的情况），但您在常见的正则表达式上获得了相似的性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-17T11:34:06.950

以下是基准列表：

*   [正则表达式引擎的比较——Rust Leipzig](https://rust-leipzig.github.io/regex/2017/03/28/comparison-of-regex-engines/)
*   [这只是不同编程语言的简单正则表达式基准。](https://github.com/mariomka/regex-benchmark)
*   [re2r 基准](https://qinwenfeng.com/re2r_doc/benchmark.html)
*   [正则表达式引擎匹配速度基准](http://openresty.org/misc/re/bench/)
*   [C++11](https://github.com/fish-shell/fish-shell/issues/4304#issuecomment-321431381)

# c# - 使用 LINQ 迭代类属性

> ID：11033198
> 
> 赞同：6
> 
> 时间：2012-06-14T12:37:43.787
> 
> 标签：c#, .net, linq, linq-to-objects

有一个 ParsedTemplate 类，它有 300 多个属性（类型为 Details 和 BlockDetails）。parsedTemplate 对象将由一个函数填充。填充此对象后，我需要一个 LINQ（或其他方式）来查找是否有任何属性，如 "body" 或 "img" where `IsExist=false`and `Priority="high"`.

```
public class Details
{
    public bool IsExist { get; set; }
    public string Priority { get; set; }
}

public class BlockDetails : Details
{
    public string Block { get; set; }
}

public class ParsedTemplate
{
    public BlockDetails body { get; set; }
    public BlockDetails a { get; set; }
    public Details img { get; set; }
    ...
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T12:46:17.900

您将需要编写自己的方法来使这个开胃。幸运的是，它不需要很长时间。就像是：

```
static IEnumerable<Details> GetDetails(ParsedTemplate parsedTemplate)
{
    return from p in typeof(ParsedTemplate).GetProperties()
           where typeof(Details).IsAssignableFrom(p.PropertyType)
           select (Details)p.GetValue(parsedTemplate, null);
} 
```

然后，如果您想检查`ParsedTemplate`对象上是否“存在”任何属性，例如，您可以使用 LINQ：

```
var existingDetails = from d in GetDetails(parsedTemplate)
                      where d.IsExist
                      select d; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T12:45:00.640

如果你真的想在这样做的时候使用 linq，你可以尝试这样的事情：

```
bool isMatching = (from prop in typeof(ParsedTemplate).GetProperties()
                   where typeof(Details).IsAssignableFrom(prop.PropertyType)
                   let val = (Details)prop.GetValue(parsedTemplate, null) 
                   where val != null && !val.IsExist && val.Priority == "high"
                   select val).Any(); 
```

在我的机器上工作。

或者在扩展方法语法中：

```
isMatching = typeof(ParsedTemplate).GetProperties()
                 .Where(prop => typeof(Details).IsAssignableFrom(prop.PropertyType))
                 .Select(prop => (Details)prop.GetValue(parsedTemplate, null))
                 .Where(val => val != null && !val.IsExist && val.Priority == "high")
                 .Any(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T12:46:00.100

使用 c# 反射。例如：

```
ParsedTemplate obj;
PropertyInfo pi = obj.GetType().GetProperty("img");
Details value = (Details)(pi.GetValue(obj, null));
if(value.IsExist)
{
   //Do something
} 
```

我还没有编译，但我认为它有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T12:49:41.153

```
 ParsedTemplate tpl = null;
        // tpl initialization
        typeof(ParsedTemplate).GetProperties()
            .Where(p => new [] { "name", "img" }.Contains(p.Name))
            .Where(p => 
                {
                    Details d = (Details)p.GetValue(tpl, null) as Details;
                    return d != null && !d.IsExist && d.Priority == "high"
                }); 
```

# java - eclipse中没有java项目选项

> ID：11033201
> 
> 赞同：13
> 
> 时间：2012-06-14T12:38:00.493
> 
> 标签：java, eclipse, ubuntu, wizard

对此可能有一个非常简单的答案，但是在谷歌上搜索了一个小时后，我求助于这里。

我只是想在 Ubuntu 12.04 上安装 eclipse Indigo(3.7.2) 并让它让我制作一个 java 应用程序。

我用过：

```
sudo apt-get install eclipse 
```

获取eclipse，它还安装了制作java项目所需的jdt包。

但是，当我导航到新 -> 项目时，我没有选择 java 项目向导（见截图）。

![新的eclipse项目](../Images/0ab291df66cef19031539d7e1ab67423.png)

有人知道怎么修这个东西吗？

编辑：我自己下载 .tar.gz 并解压它似乎工作正常。我不确定为什么 apt-get 不起作用。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-06-06T02:45:40.427

窗口 > 打开透视图 > Java

我花了多长时间才弄清楚这一点，我觉得自己像个白痴。现在不是很直观，是吗？>.<

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-01T21:10:13.113

我遇到了同样的问题。尝试这样做：

```
sudo apt-get update && sudo apt-get upgrade

sudo apt-get remove eclipse
sudo apt-get purge eclipse
rm -r ~/.eclipse
sudo apt-get install eclipse 
```

我不需要删除出现在*whereis eclipse*上的所有位置，就像 Steve Beer 说的那样。

此外，你也可以尝试做

```
sudo apt-get install --reinstall eclipse-jdt 
```

如果前面的命令不起作用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-04T12:27:24.163

我遇到了同样的问题，并且能够通过删除整个 ~/.eclipse 目录以及 eclipse 工作区中的所有内容来解决它。当我在此之后启动 eclipse 时，再次可以添加 java 项目。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-13T07:39:20.397

我遇到了同样的问题，发现这是因为我安装了另一个手动下载的 eclipse 版本。我只是再次删除了软件包（“sudo apt-get remove eclipse”）并删除了有关 eclipse 的所有内容：

*   ~/.eclipse
*   〜/工作区
*   出现在“whereis eclipse”上的所有内容

然后使用“sudo apt-get install eclipse”重新安装它。对我来说工作得很好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T12:47:13.887

确保已安装 JDK。`sudo apt-get install openjdk-7-jdk`

还要确保安装程序是最新的 : `sudo apt-get update`,`sudo apt-get upgrade`

你有另一个选择。尝试从 Eclipse 网站 www.eclipse.org 下载 eclipse

为您的机器下载适当的版本并尝试直接从命令行运行它 yourDownloadPath/eclipse

*   必要时不要忘记添加可执行权限（chmod +x）

祝你好运。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-25T08:32:46.687

与@thiagowfx 回答相同，只需在最后一个命令中添加 *

```
sudo apt-get remove eclipse*
sudo apt-get purge eclipse*
rm -r ~/.eclipse*
rm -r workspace* 
```

然后安装eclipse

```
sudo apt-get install eclipse 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-06-21T00:58:46.093

这两个命令完全解决了我的问题：

sudo apt-get install --reinstall eclipse-jdt

sudo apt-get 更新

# python - 等效于 grep，但不使用 open()

> ID：11033204
> 
> 赞同：0
> 
> 时间：2012-06-14T12:38:22.657
> 
> 标签：python, grep

我有以下脚本（见下文），它采用标准输入并处理成一些简单的文件。

```
# Import Modules for script
import os, sys, fileinput, platform, subprocess

# Global variables
hostsFile = "hosts.txt"
hostsLookFile = "hosts.csv"

# Determine platform
plat = platform.system()

if plat == "Windows":

# Define Variables based on Windows and process
    currentDir = os.getcwd()
    hostsFileLoc = currentDir + "\\" + hostsFile
    hostsLookFileLoc = currentDir + "\\" + hostsLookFile
    ipAddress = sys.argv[1]
    hostName = sys.argv[2]
    hostPlatform = sys.argv[3]
    hostModel = sys.argv[4]

    # Add ipAddress to the hosts file for python to process 
    with open(hostsFileLoc,"a") as hostsFilePython:
        for line in open(hostsFilePython, "r"):
            if ipAddress in line:
                print "ipAddress \(" + ipAddress + "\) already present in hosts file"
            else:
                print "Adding ipAddress: " + ipAddress + " to file"
                hostsFilePython.write(ipAddress + "\n")

    # Add all details to the lookup file for displaying on-screen and added value
    with open(hostsLookFileLoc,"a") as hostsLookFileCSV:
        for line in open(hostsLookFileCSV, "r"):
            if ipAddress in line:
                print "ipAddress \(" + ipAddress + "\) already present in lookup file"
            else:
                print "Adding details: " + ipAddress + "," + hostName + "," + hostPlatform + "," + hostModel + " to file"
                hostsLookFileCSV.write(ipAddress + "," + hostName + "," + hostPlatform + "," + hostModel + "\n")

if plat == "Linux":

# Define Variables based on Linux and process
    currentDir = os.getcwd()
    hostsFileLoc = currentDir + "/" + hostsFile
    hostsLookFileLoc = currentDir + "/" + hostsLookFile
    ipAddress = sys.argv[1]
    hostName = sys.argv[2]
    hostPlatform = sys.argv[3]
    hostModel = sys.argv[4]

    # Add ipAddress to the hosts file for python to process 
    with open(hostsFileLoc,"a") as hostsFilePython:
        print "Adding ipAddress: " + ipAddress + " to file"
        hostsFilePython.write(ipAddress + "\n")

    # Add all details to the lookup file for displaying on-screen and added value
    with open(hostsLookFileLoc,"a") as hostsLookFileCSV:
        print "Adding details: " + ipAddress + "," + hostName + "," + hostPlatform + "," + hostModel + " to file"
        hostsLookFileCSV.write(ipAddress + "," + hostName + "," + hostPlatform + "," + hostModel + "\n") 
```

这段代码显然不起作用，因为`for line in open(hostsFilePython, "r"):`语法错误......我不能使用带有“ `open()`”的当前文件对象。但是，这是我想要实现的，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:40:25.750

您想使用[该`a+`模式](https://stackoverflow.com/questions/1466000/python-open-built-in-function-difference-between-modes-a-a-w-w-and-r)打开文件，以便您可以读取和写入，然后只需使用现有的文件对象 ( `hostsFilePython`)。

但是，这仍然不起作用，因为您只能在文件用尽之前对其进行一次迭代。

值得注意的是，这不是很有效。更好的计划是将数据读入一个集合，用新值更新集合，然后将集合写入文件。（正如评论中指出的那样，集合不保留重复项（对您的目的有益）和顺序，这可能对您有用也可能不适用。如果没有，那么您可能需要使用一个列表，这会降低效率）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:44:18.727

```
with open(hostsFileLoc) as hostsFilePython:
    lines = hostsFilePython.readlines()

for filename in lines:
    with open(hostsFileLoc, 'a') as hostFilePython:
        with open(filename) as hostsFile:
            for line in hostsFile.readlines():
                if ipAddress in line:
                   print "ipAddress \(" + ipAddress + "\) already present in hosts file"
                else:
                   print "Adding ipAddress: " + ipAddress + " to file"
                   hostsFilePython.write(ipAddress + "\n") 
```

默认模式是读取，所以不需要`r`显式传入。

# javascript - 将 RequireJS 模块配置为仅在初始化时返回

> ID：11033206
> 
> 赞同：3
> 
> 时间：2012-06-14T12:38:27.403
> 
> 标签：javascript, jquery-plugins, requirejs

我正在使用 RequireJS 来构建我当前的 JS 项目，并且我有一些库/jQuery 插件需要在使用之前进行初始化。初始化是异步的，返回时将调用回调。因此，以下代码引入了竞争条件（依赖项是否已加载**和**初始化？）：

dep_that_needs_to_be_initialized_before_it_can_be_used.js：

```
define(
    ['raw_library_source'],
    function(){
        // this init call is async and will invoke the callback when done
        // $ is global
        $.plugin.init({
            //config
        },callback);
    }
); 
```

应用程序.js：

```
define(
    ['dep_that_needs_to_be_initialized_before_it_can_be_used'],
    function(){
        // the following line may fail in case the dependcy is not yet initialzed
        $.plugin.doSomething();
    }
); 
```

有谁知道我如何使依赖项“等待”（又名同步）直到库也被初始化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T16:22:01.433

我通常这样做的方式是从插件包装器模块返回一个包装器函数，然后使用回调调用返回的包装器函数。将其与模块闭包中的标志相结合，以指示插件是否已经初始化，我认为您有一个解决方案。

例子：

```
//pluginWrapper.js
define(
  ['jquery', 'plugins/jquery.plugin'],
  function($) {
    var isInitialized = false;
    return function (callback) {
      if (isInitialized) {
        callback();
      } else {
        $.plugin.init({}, function() {
          isInitialized = true;
          callback();
        });
      }
    };
  }
); 
```

然后，在您想要使用插件的任何模块中，您可以：

```
define( ['jquery', 'pluginWrapper'],
  function($, pluginWrapper) {
    pluginWrapper(function() {
      // use the plugin here.  it will be initialized.
    }
  }
); 
```

AMD 模块和 javascript 闭包很棒，但是当您刚刚掌握它们时，两者都可能会有点令人困惑。

# iphone - UIImagePickerController（sourceTypeCamera）没有填满顶部/状态栏上的屏幕

> ID：11033216
> 
> 赞同：5
> 
> 时间：2012-06-14T12:38:53.683
> 
> 标签：iphone, uiimagepickercontroller, uistatusbar

我从我的 MainViewController 调用 UIImagePickerController (sourceTypeCamera) 作为 modalViewController。但是，UIImagePickerController 并没有填满顶部的屏幕，如所附图像所示。 ![UIImagePickerController 奇怪的行为](../Images/6606ec2c76a161f12daca75f88b8823e.png) 知道是什么原因造成的，以及如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T08:37:08.057

`[[[[UIApplication sharedApplication] delegate] window] rootViewController]`经过多次尝试，我发现从解决问题的方法中调用 presentViewController 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:01:55.210

您应该更改 imagePickerController 的 frame 属性。初始化ie时

imagePickerController.view.frame.origin.y = 20;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:10:37.253

一些代码会有所帮助。

如果相关，请尝试设置`bounds`属性而不是`frame`属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T16:48:52.720

在我的应用程序中，它位于 navigationController 内部的视图控制器中 - 我正在做这样的事情：

```
UIImagePickerController* imagePickerController_;

imagePickerController_.sourceType =  UIImagePickerControllerSourceTypeCamera; 

[self presentModalViewController:imagePickerController_ animated:YES]; 
```

和

```
@interface CustomViewController : UIViewController <UIImagePickerControllerDelegate> 
```

工作没有问题。如果您仍然有问题，那么您可以分享一些代码吗？你的应用程序有什么样的导航结构（tabbarcontroller，navigationcontroller，..？）？，你如何呈现 imagepickercontroller？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T02:10:54.797

UIViewController 上有一个布尔值可能对您有用：`wantsFullScreenLayout`. 根据文档，这是：

> 一个布尔值，指示视图是否应在状态栏下方。

我遇到了几个问题，尤其是在 iOS 5 上，视图位于状态栏下方，尤其是在模态显示时。我发现最好的方法是将此值设置为`YES`，并在状态栏下方手动布置视图。仅供参考，状态栏的高度为 20。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-09T16:06:56.343

称呼

```
[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationNone]; 
```

打电话之前

```
[self presentModalViewController:picker animated:YES] 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-26T07:26:55.263

```
UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;

[self.view addSubview:imagePicker.view];

[imagePicker viewWillAppear:YES];
[imagePicker viewDidAppear:YES];

[[UIApplication sharedApplication] setStatusBarHidden:NO animated:NO]; 
```

# c# - 向 POCO 属性添加属性以映射 x,y 单元格

> ID：11033218
> 
> 赞同：1
> 
> 时间：2012-06-14T12:38:55.967
> 
> 标签：c#, mapping, poco

```
public class MyClass  {  public string MyProperty{ get; set; } 
```

现在，我想将每个属性映射为具有 [X, Y] 整数。

```
MyProperty = "Its string value.";  
MyProperty.X = 4;
MyProperty.Y = 10; 
```

我正在考虑这样做的几种方法，但不确定哪种方法最好。基本上将 POCO 映射到 Excel 电子表格。

我应该或可以装饰这些房产吗？我应该使用字典吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:00:00.140

正如@DavidHoerster 提到的，您需要一个更具描述性的类模型：

```
public class SpreadSheetCell
{
    public int X {get; set;}
    public int Y {get; set;}
    public string Contents {get; set;}
}

...
SpreadSheetCell[,] spreadSheet = new SpreadSheetCell[100,100];
spreadSheet[1, 2] = new SpreadSheetCell
                        {
                          X = 1,
                          Y = 2,
                          Contents = "Something goes here..."
                        }; 
```

# php - 系统日志消息“^@”表示服务器崩溃

> ID：11033221
> 
> 赞同：2
> 
> 时间：2012-06-14T12:39:06.687
> 
> 标签：php, linux, ubuntu, syslog

php-cgi 在我照看的 vps 上死了，唯一的 syslog 条目是这个，然后我重新启动了 VM：

^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@ ^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@ ^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@ ^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@ ^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@ ^@^@^@^@^@^@^@^@^@ ^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@ ^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@ ^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@ ^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@ ^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@ ^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@ ^@^@^@^@^@^@^@ ^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@ ^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@ ^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@ ^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@ ^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@ ^@^@ ^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@ ^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^ @^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^ @^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^ @^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^ @^@^@^@^@^@^@^@ ^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^ @^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^ @^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^ @^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^ @^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^ @^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@ ^@^@^@^@^@^@^@^@^ @^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^ @^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^ @^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^ @^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@Jun 13 22:00:34 VM syslogd 1.5。 0#5ubuntu4：重启。

之前的一切似乎都很好，并且 php 日志中没有任何内容，有什么想法可以调试吗？

谢谢，

乔恩

# regex - iOS RangeOfString NSRegularExpressionSearch

> ID：11033222
> 
> 赞同：2
> 
> 时间：2012-06-14T12:39:07.507
> 
> 标签：regex, nsrange

我有一个小问题，我正在使用一个代码片段从 iOS 字符串中删除 html 代码：

```
while ((r = [s rangeOfString:@"<[^>]+>" options:NSRegularExpressionSearch]).location != NSNotFound)
        s = [s stringByReplacingCharactersInRange:r withString:@""]; 
```

现在我需要删除一些块，比如 . 为什么此代码段不起作用：

```
while ((r = [s rangeOfString:@"<style[^>]+style>" options:NSRegularExpressionSearch]).location != NSNotFound)
    s = [s stringByReplacingCharactersInRange:r withString:@""]; 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:15:07.617

尝试这个：

```
while ((r = [s rangeOfString:@"<style[^>]+>[^>]+</style>" options:NSRegularExpressionSearch]).location != NSNotFound) {
   s = [s stringByReplacingCharactersInRange:r withString:@""]; 
```

}

# c# - 使用 HttpWebRequest 上传非拉丁文件名时文件名损坏

> ID：11033223
> 
> 赞同：0
> 
> 时间：2012-06-14T12:39:08.163
> 
> 标签：c#, .net, character-encoding, http-post

我正在使用 HttpWebRequest 将文件上传到在 tomcat 上运行的 HttpServlet，如果文件名包含非拉丁字符，则服务器上上传的文件有损坏的字符。

这是我的文件上传方法：

```
 public static void HttpUploadFileEx(string url, string file, string paramName, string contentType, NameValueCollection nvc, WebHeaderCollection collection, NetworkCredential networkCredential)
    {
        log.Debug(string.Format("Uploading {0} to {1}", file, url));
        string boundary = "---------------------------" + DateTime.Now.Ticks.ToString("x");
        byte[] boundarybytes = System.Text.Encoding.ASCII.GetBytes("\r\n--" + boundary + "\r\n");

        HttpWebRequest wr = (HttpWebRequest)WebRequest.Create(url);
        wr.ContentType = "multipart/form-data; boundary=" + boundary;

        wr.Method = "POST";
        wr.KeepAlive = true;
        wr.UseDefaultCredentials = false;
        wr.Credentials = networkCredential;
        wr.Timeout = Timeout.Infinite;
        foreach (string s in collection)
        {
            wr.Headers[s] = collection[s];
        }

        Stream rs = wr.GetRequestStream();

        string formdataTemplate = "Content-Disposition: form-data; name=\"{0}\"\r\n\r\n{1}";
        foreach (string key in nvc.Keys)
        {
            rs.Write(boundarybytes, 0, boundarybytes.Length);
            string formitem = string.Format(formdataTemplate, key, nvc[key]);
            byte[] formitembytes = System.Text.Encoding.UTF8.GetBytes(formitem);
            rs.Write(formitembytes, 0, formitembytes.Length);
        }
        rs.Write(boundarybytes, 0, boundarybytes.Length);

        string headerTemplate = "Content-Disposition: form-data; name=\"{0}\"; filename=\"{1}\"\r\nContent-Type: {2}\r\n\r\n";
        string header = string.Format(headerTemplate, paramName, Path.GetFileName(file), contentType);
        byte[] headerbytes = System.Text.Encoding.UTF8.GetBytes(header);
        rs.Write(headerbytes, 0, headerbytes.Length);

        FileStream fileStream = new FileStream(file, FileMode.Open, FileAccess.Read);
        byte[] buffer = new byte[4096];
        int bytesRead = 0;
        while ((bytesRead = fileStream.Read(buffer, 0, buffer.Length)) != 0)
        {
            rs.Write(buffer, 0, bytesRead);
        }
        fileStream.Close();

        byte[] trailer = System.Text.Encoding.ASCII.GetBytes("\r\n--" + boundary + "--\r\n");
        rs.Write(trailer, 0, trailer.Length);
        rs.Close();

        WebResponse wresp = null;
        try
        {
            wresp = wr.GetResponse();
            Stream stream2 = wresp.GetResponseStream();
            StreamReader reader2 = new StreamReader(stream2);
            log.Debug(string.Format("File uploaded, server response is: {0}", reader2.ReadToEnd()));
        }
        catch (Exception ex)
        {
            log.Error("Error uploading file", ex);
            if (wresp != null)
            {
                wresp.Close();
                wresp = null;
            }
        }
    } 
```

我需要更改什么以支持非拉丁文件名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T17:01:04.260

通过更改解决：

WR.ContentType =“多部分/表单数据；边界=”+边界；

至

wr.ContentType = "multipart/form-data; charset=UTF-8; 边界=" + 边界；

# jquery - 在 PJAX 加载后单击后退按钮时 jquery ui 手风琴损坏

> ID：11033225
> 
> 赞同：0
> 
> 时间：2012-06-14T12:39:14.393
> 
> 标签：jquery, jquery-ui, jquery-ui-accordion, pjax

我正在使用 PJAX (jquery-pjax) 和 pjax_rails 来导航 Rails 应用程序。

在第 1 页，我有一个 jquery ui 手风琴。

当我单击一些启用 pjax 的链接时，第 2 页内容正确加载了 pjax

当我单击后退按钮时，第 1 页内容被 pjax 加载，但手风琴似乎坏了，即当我单击打开另一个选项卡时，打开的选项卡保持打开状态，并调用 .accordion('option','active') activate 和 beforeActivate 事件处理程序返回 -1。

进一步单击已关闭的选项卡标题将打开它们，但最初打开的选项卡仍保持打开状态。

单击最初打开的选项卡的标题，然后单击另一个选项卡最终将使手风琴按预期呈现，但 .accordion('option','active') 仍然返回 -1。

我尝试使用 Firebug 与处于“损坏”状态的手风琴进行交互，但它对 .accordion('destroy') 没有响应。

使用 .accordion('option','active', 2) 会触发相关事件，但 UI 不会更新。请求 .accordion('option','active') 然后正确返回 2。

有没有人经历过类似的事情？关于如何解决这个问题的任何想法，即在 pjax 状态更新后按下后退按钮后有一个工作手风琴？

谢谢！

pjax_rails：[https](https://github.com/rails/pjax_rails) ://github.com/rails/pjax_rails jquery ui 手风琴：http: [//jqueryui.com/demos/accordion/](http://jqueryui.com/demos/accordion/)（我使用的是 1.9.0m8 版本）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T22:58:51.663

Pjax 在导航之前克隆当前页面的 HTML 状态，然后缓存它。当您单击返回时，它会再次将该克隆从缓存中拉出，但此时不会重新初始化任何 javascript。

我建议的一般规则是`$(document).on('pjax:start')`在`$(document).on('pjax:end')`.

# javascript - 如何清除多边形上的旧点

> ID：11033229
> 
> 赞同：0
> 
> 时间：2012-06-14T12:39:38.700
> 
> 标签：javascript, html5-canvas

我有在多边形内绘制一个点的代码。每次我在文本框上更改 x 和 y 的值时，它都会绘制一个新点并仍然在我的多边形上保留旧点，所以我想问一下如何清除所有旧点？

我已经尝试删除旧标签并在每次绘制新点时创建新标签，但这不行。如果您知道这一点，请提供帮助。谢谢

```
Canvas = function(){ //v1.0
    var o = this;
    (o.penPos = {x: 0, y: 0}, o.pixelSize = 10, o.pen = {style: "solid",
        size: 1, color: "#000"}, o.brush = {style: "solid", color: "#000"});
};
with({p: Canvas.prototype}){
    p.pixel = function(x, y, color) {
        var o = this, s = document.body.appendChild(document.createElement("div")).style;
//alert ("top"+(y * o.pixelSize) + "px");
        return (s.position = "absolute", s.width = (o.pen.size * o.pixelSize) + "px",
            s.height = (o.pen.size * o.pixelSize) + "px", s.fontSize = "1px",
            s.left = (x * o.pixelSize) + "px", s.top = (y * o.pixelSize) + "px",
            s.backgroundColor = color || o.pen.color, o);
    };
    p.line = function(x1, y1, x2, y2){
        if(Math.abs(x1 - x2) < Math.abs(y1 - y2))
            for(y = Math.min(y1, y2) - 1, x = Math.max(y1, y2); ++y <= x;
                this.pixel((y * (x1 - x2) - x1 * y2 + y1 * x2) / (y1 - y2), y));
        else
            for(x = Math.min(x1, x2) - 1, y = Math.max(x1, x2); ++x <= y;
                this.pixel(x, (x * (y1 - y2) - y1 * x2 + x1 * y2) / (x1 - x2)));
        return this;
    };
    p.arc = function(x, y, raio, startAngle, degrees) {
        for(degrees += startAngle; degrees --> startAngle;
            this.pixel(Math.cos(degrees * Math.PI / 180) * raio + x,
                Math.sin(degrees * Math.PI / 180) * raio + y)); return this;
    };
    p.rectangle = function(x, y, width, height, rotation){
        return this.moveTo(x, y).lineBy(0, height).lineBy(width, 0).lineBy(0, -height).lineBy(-width, 0);
    };
    p.moveTo = function(x, y){var o = this; return (o.penPos.x = x, o.penPos.y = y, o);};
    p.moveBy = function(x, y){var o = this; return o.moveTo(o.penPos.x + x, o.penPos.y + y);};
    p.lineTo = function(x, y){var o = this; return o.line(o.penPos.x, o.penPos.y, x, y).moveTo(x, y);};
    p.lineBy = function(x, y){var o = this; return o.lineTo(o.penPos.x + x, o.penPos.y + y);};
    p.curveTo = function(cx, cy, x, y){};
    p.polyBezier = function(points){};
    p.path = function(points){};
}
function isPointInPoly(poly, pt){
    for(var c = false, i = -1, l = poly.length, j = l - 1; ++i < l; j = i)
        ((poly[i].y <= pt.y && pt.y < poly[j].y) || (poly[j].y <= pt.y && pt.y < poly[i].y))
        && (pt.x < (poly[j].x - poly[i].x) * (pt.y - poly[i].y) / (poly[j].y - poly[i].y) + poly[i].x)
        && (c = !c);
    return c;
}
var length = 50,
points = [
    {x: 35, y:10422},
    {x: 36, y:32752},
    {x: 40, y:35752},
    {x: 55, y:27216},
    {x: 59, y:29319},
    {x: 58, y:10411}
];

var canvas = new Canvas;
canvas.pen.color = "#f00";
canvas.pixelSize = 1;

canvas.moveTo(getx(points[points.length-1].x) , gety(points[points.length-1].y));
for(var i = points.length; i--; canvas.lineTo(getx( points[i].x), gety(points[i].y)));

function draw(){
    var x=38; var y=10433;
    canvas.pixel(getx(x),gety(y));
    alert(isPointInPoly(points, {x: x,y: y}) ? "In" : "Out");
}
function getx(x){
    return Math.round(x*10);
}
function gety(y){
    return Math.round(400-y/250);
}
//]]> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T23:55:36.497

您可以使用 清除画布的矩形部分`context.clearRect(x,y,width,height)`。对于您的应用程序，我想每次您绘制多边形时，您都想清除我们的画布并重新开始。为此，只需调用`context.clearRect(0,0,canvas.width,canvas.height)`.

还有一个技巧可以清除[此 SO question](https://stackoverflow.com/questions/8445668/how-do-you-clear-a-polygon-shaped-region-in-a-canvas-element)中概述的任何多边形区域。

# haskell - 如何摆脱“约束中的歧义类型变量‘msg0’”

> ID：11033236
> 
> 赞同：2
> 
> 时间：2012-06-14T12:40:06.227
> 
> 标签：haskell, protocol-buffers

我对 Haskell 中的协议缓冲区有疑问。我正在编写一个简单的 UDP 接收器并得到错误：

```
src/Main.hs:39:25:
    Ambiguous type variable `msg0' in the constraints:
      (Wire msg0)
        arising from a use of `messageGet' at src/Main.hs:39:25-34
      (Text.ProtocolBuffers.Reflections.ReflectDescriptor msg0)
        arising from a use of `messageGet' at src/Main.hs:39:25-34
    Probable fix: add a type signature that fixes these type variable(s)
    In the expression: (messageGet (B.pack mesg))
    In the second argument of `($)', namely
      `case (messageGet (B.pack mesg)) of {
         Left person -> putStrLn $ show person
         Right err -> error $ "Failed to parse address book." }'
    In a stmt of a 'do' block:
      return
      $ case (messageGet (B.pack mesg)) of {
          Left person -> putStrLn $ show person
          Right err -> error $ "Failed to parse address book." } 
```

我怎样才能听从它的建议？（我只是在学习 Haskell。）

我的代码如下：

```
module Main where

import Data.Bits
import Network.Socket -- hiding (send, sendTo, recv, recvFrom)
-- import Network.Socket.ByteString
import Network.BSD
import Data.List
import qualified Data.ByteString.Lazy.Char8 as B
import Text.ProtocolBuffers.Header (defaultValue, uFromString)
import Text.ProtocolBuffers.WireMessage (messageGet, messagePut, Wire)

import Data.Sequence ((><), fromList)

import AddressBookProtos.AddressBook
import AddressBookProtos.Person
import AddressBookProtos.Person.PhoneNumber
import AddressBookProtos.Person.PhoneType

import Network.Socket
import System.Posix.Directory
import System.Posix.Files
import System.Posix.IO
import System.Posix.Process
import System.Exit

echoserver :: IO ()
echoserver = do
           withSocketsDo $ do
                   sock <- socket AF_INET Datagram 0
                   bindSocket sock (SockAddrInet 4567 iNADDR_ANY)
                   socketRx sock

socketRx :: Socket -> IO ()
socketRx sock = do

         (mesg, recv_count, client) <- recvFrom sock 1500

         return $ case (messageGet (B.pack mesg)) of
                       Left person -> putStrLn $ show person
                       Right err   -> error $ "Failed to parse address book."
         socketRx sock

main::IO()
main = echoserver 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T13:38:45.503

从[http://hackage.haskell.org/packages/archive/protocol-buffers/2.0.9/doc/html/Text-ProtocolBuffers-WireMessage.html#v:messageGet](http://hackage.haskell.org/packages/archive/protocol-buffers/2.0.9/doc/html/Text-ProtocolBuffers-WireMessage.html#v:messageGet)的文档中，类型签名`messageGet`是

```
messageGet :: (ReflectDescriptor msg, Wire msg) => ByteString -> Either String (msg, ByteString) 
```

返回值要么是`String`错误消息，要么是 a`msg`和一个残差`ByteString`。在您的代码中，您已经编写了

```
case messageGet (B.pack mesg) of
  Left person -> putStrLn $ show person
  Right err   -> error "Failed to parse address book." 
```

如果它返回 a `(msg, ByteString)`，则该值绑定到变量`err`。由于`err`被忽略，因此`msg`无法确定实际类型，这就是错误消息告诉您的内容。事实上，*任何*类型的实例都`Wire`可以`ReflectDescriptor`工作，但程序对于每种类型的行为都会有所不同！由于编译器不知道你想要什么类型，你必须指定它。您可以通过注释的返回类型来指定它`messageGet`。

```
case messageGet (B.pack mesg) :: Either String (X, ByteString) of -- Use the actual message type in place of 'X'
  Left person -> putStrLn $ show person
  Right err   -> error "Failed to parse address book." 
```

您可能还打算在代码中切换`Left`和`Right`情况。 `Right`是非错误情况（认为“错误”和“正确”）。切换案例不会自行消除错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:32:36.630

像这样添加类型注释：

```
return $ case messageGet (B.pack mesg) :: Either Something SomethingElse of 
```

（我不熟悉协议缓冲区，所以我不知道应该是什么类型——用你需要的实际类型替换它们。`Something`）`SomethingElse`

# delphi - Firemonkey 替代 VCL ShortCut() 函数

> ID：11033237
> 
> 赞同：4
> 
> 时间：2012-06-14T12:40:10.320
> 
> 标签：delphi, delphi-xe2, firemonkey

什么是 Vcl.Menus 中 VCL Shortcut() 函数的 firemonkey 替代品？在 FMX.Menus 或 FMX.Platform 中均未找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:14:19.623

没有其他选择，`FMX.Menus`但您可以从 unit 借用该[`ShortCut`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Menus.ShortCut)功能`Vcl.Menus`并将其添加到您的代码中。

# javascript - 如何在 prev() 中使用正则表达式？

> ID：11033243
> 
> 赞同：1
> 
> 时间：2012-06-14T12:40:26.843
> 
> 标签：javascript, jquery

如何在 prev() 中使用正则表达式？

```
<div class="aaa">aaa</div>
<div style="display: none" class="bbb">bbb</div>
<div style="display: none" class="ccc">ccc</div>
<div class="ddd">ddd</div> 
```

```
$(".ddd").click(function(){
    alert($(this).prev('display:visible').attr('class'));
}) 
```

这不起作用。如果我有：

这应该告诉我“aaa”。如果我从 prev() 中删除“显示：可见”，那么这会显示“ccc”。

[http://jsfiddle.net/WaVrw/](http://jsfiddle.net/WaVrw/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:47:04.387

试试这个 ：

```
$(".ddd").click(function(){
    alert($(this).prevAll("div:visible:eq(0)").attr("class"));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:50:46.697

您可以使用：

```
$(".ddd").click(function(){
    alert($(this).prevAll(':visible:eq(0)').attr('class'));
}) 
```

[演示](http://jsfiddle.net/WaVrw/3/)

[prevAll](http://api.jquery.com/prevAll/)获取匹配元素集中每个元素的所有前面的兄弟，可选地由选择器过滤。

[eq(0)](http://api.jquery.com/eq/)仅获取第一个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T12:41:38.747

试试这个：

```
$(".ddd").click(function(){
    alert($(this).prev(':visible').attr('class'));
}) 
```

这使用 jQuery [:visible](http://api.jquery.com/visible-selector/)选择器来查找可见的元素。

# r - 前 25 行中每一行的运行总和

> ID：11033244
> 
> 赞同：4
> 
> 时间：2012-06-14T12:40:29.400
> 
> 标签：r

我已经尝试了一段时间来生成一个代码，它为我带来一个原始向量的前 25 行总和的新向量。

因此，如果我们说我有一个包含 500 行的变量 Y，并且我想要一个运行总和，在一个新向量中，其中包含行的总和 [1:25] 然后 [2:26] 表示 Y 的长度，例如这：

```
y<-1:500
runsum<-function(x){
   cumsum(x)-cumsum(x[26:length(x)])
}

new<-runsum(y) 
```

我尝试在这里使用一些不同的功能，然后甚至使用顶部的应用功能，但似乎没有一个能产生正确的答案......

有人能帮忙吗？我意识到这对这里的许多社区来说可能很容易，但任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:56:49.440

此函数计算前面 24 个值和实际值的总和：

```
 movsum <- function(x,n=25){filter(x,rep(1,n), sides=1)} 
```

如果这是您真正想要的，则很容易适应仅对前面的值求和。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T13:01:47.817

除了 Roland 的回答，您还可以使用 zoo 库

```
library ( zoo )
y <- 1:500
rollapply ( zoo ( y ), 25, sum ) 
```

高温高压

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T13:03:46.707

我更喜欢 Roland 的答案，因为它依赖于时间序列函数，并且可能会很快。既然你提到你开始走上使用`apply()`和朋友的道路，这里有一种方法可以做到这一点：

```
y<-1:500
#How many to sum at a time?
n <- 25
#Create a matrix of the appropriate start and end points
mat <- cbind(start = head(y, -(n-1)), end = tail(y, -(n-1)))
#Check output
rbind(head(mat,3), tail(mat,3))
#-----
       start end
           1  25
           2  26
           3  27
[474,]   474 498
[475,]   475 499
[476,]   476 500

#add together
apply(mat, 1, function(x) sum(y[x[1]]:y[x[2]]))

#Is it the same as Roland's answer after removing the NA values it returns?
all.equal(apply(mat, 1, function(x) sum(y[x[1]]:y[x[2]])),
          movsum(y)[-c(1:n-1)])
#-----
[1] TRUE 
```

# php - 如何使用 Drupal 7 中的 l() 函数从备用语言链接到站点的默认语言

> ID：11033245
> 
> 赞同：3
> 
> 时间：2012-06-14T12:40:32.063
> 
> 标签：php, drupal, drupal-7

我正在使用 drupal 7 构建一个多语言网站。

现在，我正在手动添加一个链接，该链接从备用语言链接回网站的默认语言。

例如，从“mysite.com/fr”我想建立一个链接到“mysite.com/”的链接

如何使用 l() 函数做到这一点？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:47:04.993

好的，想通了。

我不得不在 l() 函数的 $options 数组中使用“语言”。

# java - android服务以特定的时间间隔连续执行任务

> ID：11033247
> 
> 赞同：2
> 
> 时间：2012-06-14T12:40:38.137
> 
> 标签：java, android, android-service

经过长时间的搜索后，我仍然对此感到困惑，尽管我找到了一些相关的帖子，但他们没有回答我正在寻找的内容。在我的场景中，我想每隔 5 分钟将用户的 lat long 发送到服务器。为此，我使用了一个具有自己进程的服务，以便在 Activity 销毁时它不会被杀死，并且在服务方法 onStartCommand 中我使用了一个条件始终为 true 的 while 循环，在该循环中我将位置更新到服务器并延迟thread.sleep 如下图所示

```
@Override
    public int onStartCommand(Intent intent, int flags, int startId) {
   While(true)
           {
            Location currentLocation = getLocation();
            updateLocationToServer(currentLocation);
            try
               {
                Thread.sleep(300000)
               }
            catch(Exception e)
               {
                e.printStackTrace()
               }
           }
return Service.START_STICKY; 
```

在这里我无法理解return语句无法访问，那么当服务被销毁时如何自动重新启动服务，其次使用thread.sleep导致ANR（应用程序无响应），而服务是后台进程，我发现它直接在UI中运行线程这些信息让我感到困惑，在这种情况下，获得所需功能的最佳方法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:44:52.707

你应该使用 and`AlertManager`代替！

```
AlarmManager mgr=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
Intent i=new Intent(context, OnAlarmReceiver.class);
PendingIntent pi=PendingIntent.getBroadcast(context, 0, i, 0);

mgr.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, SystemClock.elapsedRealtime(), PERIOD, pi); 
```

[http://justcallmebrian.com/?p=129](http://justcallmebrian.com/?p=129)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:44:41.253

```
secondly using thread.sleep causing ANR (Application Not Responding) while service is a background process 
```

来自 [http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

请注意，服务与其他应用程序对象一样，在其托管进程的主线程中运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T12:45:19.927

尝试使用警报管理器，请参阅此示例，[了解如何将其设置为每 5 分钟重复一次](https://stackoverflow.com/a/7687485/1167780)

# svn - 使用乌龟 SVN 提交

> ID：11033251
> 
> 赞同：0
> 
> 时间：2012-06-14T12:40:45.513
> 
> 标签：svn, merge, tortoisesvn, commit

我已经对我的存储库中的一个文件进行了更改，我想使用 tortoise svn 提交这些更改，所以我右键单击该文件夹，并尝试提交该文件，但它显示以下错误：-

'错误提交失败（详细信息如下）无法创建目录'/svnroot/db/transactions/31383-1.txt：权限被拒绝'

我使用 svn+ssh 协议，如果我没记错的话，我没有在任何地方输入我的密码，所以这可能是由于没有输入密码而导致的错误。您能告诉我如何摆脱错误/输入 ssh 密钥吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:08:21.180

我想这和[你昨天遇到的问题一样](https://stackoverflow.com/questions/11013729/svn-copy-command)。您需要这样做`svn+ssh://user@...`否则您使用的是只读的匿名访问。

尝试将您的工作副本重新定位到`svn+ssh://user@svn.example.com`. 在 Tortoise SVN 中，您可以这样做：右键单击您的工作副本 -> TortoiseSVN -> 重新定位。修改显示为`svn+ssh://user@svn.example.com`格式的 URL -> 确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:27:41.703

显然我必须在地址 svn+ssh://user@svn.example.com/svnroot / **branches** ...

svnroot 必须添加到地址中，

现在没有错误:)

# javascript - 原型 AJAX 响应文本缺少 javascript

> ID：11033254
> 
> 赞同：1
> 
> 时间：2012-06-14T12:40:53.283
> 
> 标签：javascript, prototypejs

我可以找到响应的 JS 和 HTML 代码`alert()`。但是我不能将 JS 从响应中附加到`body`标签，但是 HTML 可以很好地附加。

```
new Ajax.Request(product_url, {
    method: 'post',
    onSuccess: function(transport) {
         $$('body')[0].insert(transport.responseText);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:17:16.147

```
 new Ajax.Request(product_url, {
           method: 'post',
          onSuccess: function(transport) {

               $$('body')[0].insert(new Element("div",{id:"popup"}));
               $('popup').innerHTML = transport.responseText;
      }
    }); 
```

这给出了解决方案。

# android - 上传到 Google 文档的文件不显示

> ID：11033255
> 
> 赞同：1
> 
> 时间：2012-06-14T12:40:56.133
> 
> 标签：android, google-docs-api, google-drive-api

我正在尝试使用 Android 上的 Documents List API 将文件上传到 Google Docs/Drive。

问题是它似乎没问题（我得到状态代码 200，好），但是在查看我的文档时文件没有显示。上传到列出提要时得到的这个地址：[https ://docs.google.com/feeds/upload/create-session/default/private/full?convert=false](https://docs.google.com/feeds/upload/create-session/default/private/full?convert=false)

我尝试了几种方法，但没有任何运气，例如：

```
File file = new File(sFile); // Path to the file on the SD card

InputStreamContent content = new InputStreamContent("application/vnd.mymimetype",
                    new BufferedInputStream(new FileInputStream(file)));

content.setLength(file.length());
HttpRequest request = transport.createRequestFactory().buildPostRequest(new GoogleUrl(sURL), content); // Urls is https://docs.google.com/feeds/upload/create-session/default/private/full?convert=false

GoogleHeaders headers = getDefaultHeaders(); // Set version 3 and authentication

request.setHeaders(headers);
res = request.execute(); // Will have status code 200, not 201 as created and no entity returned? 
```

我也尝试过使用 MediaUploader，但结果相同（在此示例中，我设置了元数据，但我认为我收到了未设置 Content Lenght 的异常，因此在我的工作示例中，我没有设置元数据）：

```
StringBuilder sAtom = new StringBuilder()
                    .append("<?xml version='1.0' encoding='UTF-8'?>")
                    .append("<entry xmlns=\"http://www.w3.org/2005/Atom\" xmlns:docs=\"http://schemas.google.com/docs/2007\">")
                    .append("<title>THeFile</title>").append("</entry>");
 String sCmd = sAtom.toString();
 InputStream inStream = null;

 inStream = new ByteArrayInputStream(sCmd.getBytes("UTF-8"));

 final InputStreamContent oContent = new InputStreamContent("application/atom+xml", inStream);
 oContent.setLength(sCmd.length());

 InputStreamContent mediaContent = new InputStreamContent("application/vnd.mymimetype",
                    new BufferedInputStream(new FileInputStream(file)));
 mediaContent.setLength(file.length());

 MediaHttpUploader uploader = new MediaHttpUploader(mediaContent, transport, new HttpRequestInitializer() {

                @Override
                public void initialize(HttpRequest request) throws IOException {
                    GoogleHeaders headers = getDefaultHeaders();
                    headers.setSlug("thefile.mab");
                    request.setHeaders(headers);
                }
            });
 uploader.setMetadata(oContent);

 MediaHttpUploaderProgressListener listner = new CustomProgressListener();
 uploader.setProgressListener(listner);
 uploader.setDirectUploadEnabled(true);

 HttpResponse response = uploader.upload(new GoogleUrl(sURL));
 if (!response.isSuccessStatusCode()) { // Gets that the upload was successful
            throw new Exception("Error");
 } 
```

我错过了什么？？：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:54:58.447

我有同样的问题，你有。看来，MediaHttpUploader 没有设置有效的标头。

这里适用于我的代码

```
GoogleUrl url = new GoogleUrl("resumable upload link ");

GoogleHeaders headers = new GoogleHeaders();
headers.setSlugFromFileName("my image.jpg");
headers.set("X-Upload-Content-Type", "image/jpeg");
headers.set("X-Upload-Content-Length", content.getLength());
//without this I got the same error
headers.gdataVersion = "3";

MediaHttpUploader uploader = new MediaHttpUploader(content, getTransport(), getRequestFactory().getInitializer());
uploader.setInitiationMethod(HttpMethod.POST);
uploader.setInitiationHeaders(headers);
uploader.upload(url); 
```

# java - Eclipse中的重复.java文件

> ID：11033256
> 
> 赞同：11
> 
> 时间：2012-06-14T12:40:58.900
> 
> 标签：java, eclipse, swing

我正在寻找类似于 Eclipse 中的重构功能但用于复制文件的东西，即我想保留现有文件，但添加另一个文件（通常是枚举或类似文件）。

目前我通过手动复制文件系统中的文件，然后在项目资源管理器中刷新文件夹，然后通过项目资源管理器打开文件，然后搜索'n替换，然后我可以开始工作。这可能有点乏味，因为当我添加新的主要功能时，我经常为 10 多个文件执行此操作。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-14T12:43:43.660

在资源管理器视图中，选择一个文件，右键单击并选择`Copy`. 现在选择它所在的文件夹，右键单击并选择`Paste`. 你会得到一个对话框，询问一个新的名字，你就完成了。请注意，如果您对 Java 类执行此操作，则新名称也将用于重命名文件中的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:43:33.923

您可以在 Eclipse 的包资源管理器中复制和粘贴文件。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-14T12:43:40.273

您应该问您的问题是：“我应该复制文件并进行小改动以添加主要功能吗？”

不要重复自己是计算机科学的基本原则，不要轻易放弃。

当您发现自己在复制和调整块、方法或类时，您应该立即查看是否可以通过重构来消除重复。

我认为这比了解 Eclipse 中的特定技术更重要。

# vb.net - 查询数据表

> ID：11033261
> 
> 赞同：1
> 
> 时间：2012-06-14T12:41:11.303
> 
> 标签：vb.net, ado.net

我有一个数据表，其中包含保存的年度数据。例如

```
dtDate                      Value
2010-01-01 00:00:00.000     5.0000
2011-01-01 00:00:00.000     15.0000
2012-01-01 00:00:00.000     25.0000
2013-01-01 00:00:00.000     35.0000
2014-01-01 00:00:00.000     45.0000 
```

现在我想将此数据表用于每月处理。所以对于 2010 年的所有月份，我想使用 value=5。例如，如果我的日期是 2010 年 2 月 1 日 2010 年 2 月，它应该返回给我

如何使用`datatable.select`方法？我想要一些有效的过滤器表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:09:07.763

DataTable.Select(filterExpression) 重载方法包含参数 filterExpression，该参数使用与通过[Expression](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression.aspx)属性创建计算列相同的语法。

您可以使用此代码获取所需的行

```
Dim dt as DateTime dt = new DateTime(2010,1,1,0,0,0)
Dim r as DataRow() r = DataTable.Select("dtDate = #" + dt.ToString("yyyy-MM-dd") + "#"); 
```

如果您的意图是让 2010 年的记录通过 year = 2010 的任何日期，那么您可以使用此语法

```
' Supposing date passed is 1/May/2010 and you want the record with 2010 as year.
Dim dt as DateTime dt = new DateTime(2010,5,1,0,0,0)  
Dim r as DataRow() r = DataTable.Select("dtDate = #01/01/" + dt.Year.ToString()) + "#"); 
```

# php - 如何将 wordpress 集成到我的网站中并进行通用身份验证？

> ID：11033270
> 
> 赞同：3
> 
> 时间：2012-06-14T12:41:45.620
> 
> 标签：php, wordpress, authentication

一个网站是用核心 PHP 和 MySQL 数据库开发的。如果我们想以这样的方式将 Wordpress 与它集成，我们不必登录 wordpress 的 wp-login 页面。一旦我们登录核心网站，它应该会自动登录 wordpress。这种机制也应该应用于管理和前端。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T16:01:17.917

您可以使用 PHP 以编程方式执行此操作：

```
require_once( "wordpress/wp-config.php" );
$user = wp_signon( array(
    "user_login" => "username",
    "user_password" => "password",
    "remember" => true
), false );

// see if the call failed
if( get_class( $user ) == "WP_Error" ) {
    die( "oops- wrong user/pass?" );
} 
```

您可以将用户名和密码与您的其他系统同步或链接。

# asp.net-mvc - Linq 中的嵌套查询

> ID：11033275
> 
> 赞同：0
> 
> 时间：2012-06-14T12:42:22.067
> 
> 标签：asp.net-mvc, visual-studio-2010, linq

我有三张桌子。我必须使用 Linq 语句检索数据。我的三个表名是 A、B、C。我根据 id 连接了连接两个表 A 和 B 的连接，如下所示：

```
select ol, fN, LN, ci, co
from member
join details
on member_id = details_id
where details_id in
(select contacts_id from contacts where
contacts_id1 = 1 and contacts_usr_id = 1) 
```

我能够根据`where`条件编写查询，如何为内部 while 条件编写查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:59:35.493

你可以试试这个：

```
 var idlist = (from tbl in table3
                    where tbl.usr_id == 1 && tbl.contacts_id == 1
                    select tbl.contacts_id ).ToList();

     var x = from A in table1
              from B in table2 where A.user_id == B.user_id                
              && idlist.Contains(A.user_id)
              select new { a = A.a, b = A.b, c = A.c, d = B.d, e = B.e }; 
```

检查并让我知道这是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:37:09.927

尝试颠倒查询。以下情况如何：

```
var query = 
   from t3 in table3
   where t3.user_id = 1 && t3.contacts_id = 1
   join t2 in table2 on t3.contacts_id equals t2.usr_id
   join t1 in table1 on t2.usr_id equals t1.userid
   select new {t2.a, t2.b, t2.c, t1.d, t1.e}; 
```

# ruby-on-rails - Static_pages#home 中的 NoMethodError

> ID：11033276
> 
> 赞同：0
> 
> 时间：2012-06-14T12:42:25.403
> 
> 标签：ruby-on-rails, database, nomethoderror

我的 Static_pages#home 中出现无方法错误：

未定义的方法“存在吗？” 对于注册表

```
 The little code I'm using it in is:

 <% if user_signed_in? && current_user.registry.exists? %>

 <%= link_to "Show My Registry", current_user.registry %>

 <% else %>

 <%= link_to "Create a new registry", new_registry_path %>

 <% end %> 
```

我应该在家用控制器中添加一些东西吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:55:59.253

该`exists?`方法是一个类方法。你必须这样做：

```
Registry.exists?  # Is there any registery? 
```

或指定注册表的 id：

```
Registry.exist?(current_user.registry_id) 
```

这里有一些参考：

```
http://apidock.com/rails/ActiveRecord/Base/exists%3F/class 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:54:07.383

最后这奏效了：

```
<% if user_signed_in? && Registry.exists?(current_user.registry) %> 
```

# amazon-s3 - 关于云文件存储服务的查询-我可以将数据附加到现有文件吗

> ID：11033288
> 
> 赞同：0
> 
> 时间：2012-06-14T12:43:25.810
> 
> 标签：amazon-s3, rackspace

我正在创建一个应用程序，其中一些文件将存储在 Amazon S3/Rackspace 云文件/其他类似的云文件存储提供商中。

如果我可以将数据附加到现有文件中，有几种情况对我来说会更容易......这可能吗？还是我必须从 Amazon S3 下载文件，然后将数据附加到其中，最后将修改后的文件上传回 Amazon S3？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:50:59.487

无法将任何内容附加到 S3 中的现有文件。您必须在修改后重新下载并上传。

但是，如果您愿意，您可以随时上传带有标签（时间戳或计数器）的新数据，例如 file_201201011344。因此，在读取文件时，您会获得与您的模式匹配的所有文件并将它们附加到客户端。

# wpf - WPF：缩放网格而不缩放内容

> ID：11033294
> 
> 赞同：0
> 
> 时间：2012-06-14T12:43:41.693
> 
> 标签：wpf

是否可以在不缩放内容的情况下应用缩放转换网格的列和行？

我希望每个单元格的内容简单地调整大小以适应单元格而不被缩放（例如文本的字体大小保持不变）。

例如，在下面的 XAML 中，我希望按钮调整大小而不是缩放：

```
<Grid Name="grid1" RenderTransformOrigin="0.5, 0.5">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300" />
                <ColumnDefinition Width="300" />
                <ColumnDefinition Width="300" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="80"/>
                <RowDefinition Height="80"/>
            </Grid.RowDefinitions>
            <Grid.RenderTransform>
                <ScaleTransform ScaleX="{Binding Value, ElementName=slider1 }" ScaleY="{Binding Value, ElementName=slider1 }"
                                />
            </Grid.RenderTransform>
            <Button Content="Button3" Margin="6" Name="button3" />
            <Button Content="Button4" Grid.Column="1" Margin="6" Name="button4" />
            <Button Content="Button5" Grid.Column="2" Margin="6" Name="button5" />
            <Button Content="Button6" Grid.Column="0" Grid.Row="1" Margin="6" Name="button6" />
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:52:47.727

使用您正在应用的方法，这是不可能的，因为转换也将应用于所有子控件的呈现。

但是，从代码的外观来看，您希望根据滑块的位置调整网格列的大小。一种更简单的方法是将所有列设置为`Width="*"`（这将具有每列具有相等宽度的效果），删除您的变换，并将网格的宽度作为一个整体绑定到滑块（您可能需要调整适合您的滑块范围！）。

不过，这会对 RenderTransform 产生不同的影响，因为 RenderTransform 不会影响任何周围的布局，而更改 Width 会。如果这将是一个问题，请发表评论，也许还有另一种解决方案......

# java - 转换列表 反对

> ID：11033299
> 
> 赞同：0
> 
> 时间：2012-06-14T12:44:00.943
> 
> 标签：java

在我当前的项目中，我想转换 `List<String>`为 `RegionLabel`Object。

例如，User 依次输入 String 值 -- `center`, `floor`, `room`。我将用户的输入存储到列表中。

现在，我的内部数据结构在 `RegionLabel( String centerString, String floorString, String roomString);`

我的要求是将`List<String>`数据结构转换为`RegionLabel("center", floor", "room" );`数据结构。

注意：我的 RegionLabel 类是即时生成的。即时意味着在设计时，我不知道“RegionLabel 构造函数有多少参数？”

-潘克什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:47:04.730

也许你只是在追求

```
new RegionLabel(list.get(0), list.get(1), list.get(2)) 
```

> 我不知道“RegionLabel 构造函数有多少参数？”

然后你必须使用反射，或者提供一个接受 a`List<String>`作为参数的构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:47:02.253

创建一个新的构造函数，如`RegionLabel(List<String> list)`. 这应该做。

```
public RegionLabel(List<String> list) throws Exception{
     if( null == list || list.size() < 3 )
          throw new Exception("illegal parameter");
     this.centre = list.get(0);
      ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T12:47:37.227

```
RegionLabel label = new RegionLabel(inputList.get(0), inputList.get(1), inputList.get(2)); 
```

在没有任何错误处理或验证的情况下进行简化，但对“转换”没有任何限制，很难更通用。

# php - HTML“名称”属性中可以使用非西方字符吗？

> ID：11033300
> 
> 赞同：4
> 
> 时间：2012-06-14T12:44:08.240
> 
> 标签：php, html

在 HTML 中`<input>`：

是否有义务`name`用英文字符设置属性？

我想稍后使用它，在`$_POST['some_utf8_characters_and_not_english_characters']`.

以后有可能出问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T14:45:53.663

根据 RFC1866 第 3.2.4 章，属性的值可以是除值分隔符（单引号或双引号）之外的任何值，并且不应包含 HTML 标记分隔符（< 和 >）。

但是，当您尝试使用`name`as 引用访问 DOM 元素时，您必须测试 JavaScript 在所有浏览器上的行为方式（记住您的好朋友 MSIE...）。例如：`document.anElementWithPersianName`或`document.forms['aFormWithAPersianName']`。因此，如果您使用 JS 进行验证和/或 ajax 提交表单，您需要确保 JS 能够正确处理此字符集。

在任何情况下，您都必须确保：

1.  当涉及字符串操作时，您的 PHP 脚本使用基于 UTF-8 的函数（我认为某些函数需要将字符集作为参数传递）
2.  这些脚本本身保存在 UTF-8 文件中
3.  您在 HTML 标头和/或 PHP 的响应标头中正确设置了字符集

最好的办法：创建一个简单的表单，在上面做一些 JS 技巧，然后让 PHP 脚本解析提交的结果并打印出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:52:56.853

这在我的一个网站上成功运行。没问题。

```
<input name="UTF_word" />

$_POST['UTF_word'] 
```

两者都不会在客户端出现任何问题，包括 jquery（未在 IE 中检查）或服务器端。

# android - 如何在 Android 上支持多种屏幕尺寸

> ID：11033305
> 
> 赞同：0
> 
> 时间：2012-06-14T12:44:29.273
> 
> 标签：android, android-layout

我正在为手机和平板电脑开发一个应用程序，但问题是当我们在平板电脑上运行它时，我们在应用程序中使用的图像不会拉伸并且看起来不同。但我们想像在手机上一样开发它。有没有可能，如果是，那怎么办？我使用了图像 .jpg 和 .png。我认为问题出在图像上，java 代码是完美的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:46:48.677

请参阅[Android 开发人员：支持多个屏幕](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-29T08:26:40.493

您可以使用[sdp](https://github.com/intuit/sdp) sdk。它使您能够使用适合屏幕尺寸的 sdp 尺寸单位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T12:58:19.267

为了独立于屏幕大小，请在设计 xml 布局时使用，`dp (dip)`而不是。`px`并`sp`在定义文本大小时使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T23:06:40.997

您应该为不同的屏幕尺寸提供适当尺寸的图像资源。这可以在 Android 中使用内置的[资源](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)系统来完成。

# php - 没有数据库的 PHP 标记系统（纯文本文件）

> ID：11033311
> 
> 赞同：3
> 
> 时间：2012-06-14T12:44:49.270
> 
> 标签：php, tags, plaintext

我想在我的网站上实现一个标签系统。该网站是用 PHP 制作的，但不使用数据库 (sql) 系统。它从纯文本文件中读取文件并包含它们。

页面在文件中，如果请求页面，则读取该文件，并且如果页面在其中，则站点将其返回。如果页面不在其中，则会出现错误（因此没有路径遍历问题，我可以让页面“blablabla”转到“other-page.inc.php”）。

页面列表是一个大 case 语句，如下所示：

```
case "faq":
$s_inc_page= $s_contentdir .  "static/faq.php";
$s_pagetitle="FAQ";
$s_pagetype="none";
break; 
```

（$s_pageype 用于 css 主题）。

我想要的是这样的：

```
case "article-about-cars":
$s_inc_page= $s_contentdir .  "article/vehicles/about-cars.php";
$s_pagetitle="Article about Cars";
$s_pagetype="article";
$s_tags=array("car","mercedes","volvo","gmc");
break; 
```

一个标签页面将标签作为获取变量，检查 $s_tag 数组中哪些案例具有该标签，然后返回这些案例。

这是可能的，还是我想错了方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:58:22.683

我会通过将您的页面详细信息保存在一个数组中来做到这一点，例如：

```
$pages['faq']['s_inc_page'] = $s_contentdir .  "static/faq.php";
$pages['faq']['s_pagetitle'] = "FAQ";
$pages['faq']['s_pagetype'] = "none";
$pages['faq']['s_tags'] = array("car","mercedes","volvo","gmc"); 
```

然后，您可以使用`foreach`循环遍历此数组并拉出具有匹配标签的项目：

```
$tag = "car";

foreach($pages as $page) {
    if (in_array($tag, $page['s_tags'])) {
        //do whatever you want to do with the matches
        echo $page['s_pagetitle'];
    }   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:54:31.483

这是可能的，但您可能需要在当前结构之外进行思考。

像这样的东西会起作用：

```
$pages = array(
    "article-about-cars" => array ("car", "mercedes", "volvo"),
    "article-about-planes" => array ("757", "747", "737")
); //an array containing page names and tags

foreach ($pages as $key => $value) {
   if (in_array($_GET['tag'], $value)) {
       $found_pages[] =  $key;
   }
}

return $found_pages; //returns an array of pages that include the tag 
```

# c - C中的优先级与短路

> ID：11033313
> 
> 赞同：-7
> 
> 时间：2012-06-14T12:44:53.590
> 
> 标签：c, short, circuit

```
int i=-3, j=2, k=0, m; 
m = ++i || ++j && ++k; 
printf("%d, %d, %d, %d\n", i, j, k, m); 
```

由于在 C 中`++`比`||`和具有更高的优先级`&&`，因此首先对它们求值，因此表达式变为`m = -2 || 3 && 1`. 现在您可以应用短路，但这会产生错误的答案。这是为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T12:56:04.103

[优先级≠评估顺序。](http://blogs.msdn.com/b/ericlippert/archive/2008/05/23/precedence-vs-associativity-vs-order.aspx)

`||`和的短路行为`&&`意味着首先评估它们的左侧，并且

*   如果 LHS 的`||`计算结果为真（非零），则不计算 RHS（因为`true`无论 RHS 是什么，表达式都将是）
*   如果 LHS 的`&&`计算结果为假（或零），则不计算 RHS（因为`false`无论 RHS 是什么，表达式都将是）

在您的示例中，被评估，并且等于 -2，它是非零的，因此（即）`++i`的右侧永远不会被评估：并且永远不会增加。`||``++j && ++k``j``k`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:53:45.850

`++`s 不在表达式之前执行。仅`++i`执行，表示表达式的结果将为 1，因此不计算表达式的其余部分（短路）。

您的代码相当于：

```
if (++i)
    m = 1;
else
    if (!++j)
        m = 0;
    else if (!++i)
        m = 0;
    else
        m = 1; 
```

这意味着一旦`++i`评估为真，该`else`部分就永远不会执行。

# templates - templavoila 图像未在typo3 中显示

> ID：11033315
> 
> 赞同：0
> 
> 时间：2012-06-14T12:45:08.130
> 
> 标签：templates, typo3, templavoila

在我的模板中，我有一个图像场。它被映射为放在 div 标签内。

![在此处输入图像描述](../Images/562c48302d4be86f6d5dbf6c1ad9a700.png)

然后我将图像添加到我的页面：

![在此处输入图像描述](../Images/497d38ce8c03970b034c9848494c100f.png)

但是当页面被渲染时，我得到了这个 HTML：

```
<img width="" height="" border="0" alt="" src=""> 
```

任何想法为什么 src 属性没有被填充？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T16:09:48.380

也许映射是错误的。你可以试试这个：

![电视映射](../Images/a9f9c1779984565b4cf9898edced318c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T18:03:53.337

由于也没有生成缩略图，因此您的图像魔术设置可能是错误的。测试图像是否在那里正确生成？如果没有，也许更新您的[二进制文件](https://www.imagemagick.org/script/download.php)可以解决它。

# php - GET 值不完整

> ID：11033316
> 
> 赞同：1
> 
> 时间：2012-06-14T12:45:11.333
> 
> 标签：php, get

好的，所以我有我的 post.php 页面。如果您没有登录，您将被重定向到 login.php 所以这是我的代码

```
if($login == 0) {
    $url = 'http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];
    header("Location: login.php?r=".$url);
} 
```

在我的 login.php 页面中（如果用户名和密码正确，我将创建一个快捷方式）

```
if($accountmatch == 1) {
    // make sessions
    if(isset($_GET['r'])) {
        $r = $_GET['r'];
        header("Location: ".$r);
    } else {
        header("Location: index.php);
    }
} 
```

所以我的问题是，当我登录时，页面将我定向到我想要的页面，但 GET 值不完整。

例如 $r 的值是

```
localhost/mywebsite/post.php?mode=addtopic&f=1 
```

所以当我到达 login.php 页面时的 url 是

```
localhost/mywebsite/login.php?r=http://localhost/mywebsite/post.php?mode=addtopic&f=1 
```

因此，当我登录时，它会将我重定向到此页面。

```
localhost/mywebsite/post.php?mode=addtopic 
```

所以很明显，“&”符号结束了我的网址，使 f 在我的原始网址中分开。

我怎样才能附上它们？先感谢您！

## **编辑**

我知道我可以用这个

```
$f = $_GET['f'];

header("Location: ".$r."&f=".$f); 
```

但是有没有别的办法？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T12:48:06.247

看一下[`urlencode()`](http://php.net/manual/en/function.urlencode.php)功能。

请注意 XSRF，如果我将用户发送给他们，`http://yoursite/login.php?r=http://mysitethattotallylookslikeyours/pleaseLoginAgainAnErrorHasOccurred.php`他们可能会放弃他们的凭据。

为此，您只需将路径和查询字符串用作 的值`r`，然后重定向到`"http://yoursite/" . $r`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:50:16.727

如果您的表单使用 post 发送数据，您需要考虑如何传递 GET 数据，以便您的 URL 正确。

# curl - 使用 curl 或 file_get_contents 复制网页部分/段落

> ID：11033319
> 
> 赞同：0
> 
> 时间：2012-06-14T12:45:23.513
> 
> 标签：curl, web, copy

所以，伙计们，我简要地看了一下 curl 文档和 file_get_contents，但我找不到真正符合我需要的东西。我是 php 的新手，它是模块，所以我正在寻求帮助。现在所有的例子都展示了如何复制整个 url。如果我只需要复制网站的一段，该怎么办。只是文章标题或副标题我该怎么做？无论如何我可以指定一些参数来例如从给定的网页中获取这部分：

```
<div id="newscontent">
//text content
</div> 
```

非常感谢你们。我感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:44:44.263

我不认为 curl 可以处理 html 内容。您必须对其使用 XML 解析器，或者如果您知道元素 ID，则可以使用正则表达式（preg_match、preg_match_all 函数）来查找特定元素。

一个简单的正则表达式示例如下：

[http://hu2.php.net/manual/en/function.preg-match-all.php](http://hu2.php.net/manual/en/function.preg-match-all.php)

# testing - 如何在 Selenium IDE 中循环测试？

> ID：11033321
> 
> 赞同：48
> 
> 时间：2012-06-14T12:45:25.123
> 
> 标签：testing, selenium-ide

我一直在 Selenium IDE 中进行测试。它很容易使用，我已经用它创建了一些测试用例。我一直在搜索谷歌，试图找到一种方法来自动重复我的测试。我已经看到了带有 gotolabel、while 循环等的解决方案。但我无法让它们中的任何一个起作用。有人可以给我一个关于如何循环我的测试`n`时间或永远循环的提示。我很感激任何帮助。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-16T07:43:53.613

做这个：

1.  下载这个js文件：[https ://github.com/darrenderidder/sideflow/blob/master/sideflow.js](https://github.com/darrenderidder/sideflow/blob/master/sideflow.js)
2.  从 Firefox 启动 Selenium IDE 并打开选项菜单。
3.  将 .js 文件上传到“Selenium Core extensions (user-extensions.js)”字段。

js 文件在 Selenium IDE 中提供 goto、gotoIf 和 while 循环功能。下面的示例显示了一个简单的循环：

```
<tr>
    <td>getEval</td>
    <td>index = 0;</td>
    <td></td>
</tr>
<tr>
    <td>while</td>
    <td>index &lt; 10;</td>
    <td></td>
</tr>
<tr>
    <td>storeEval</td>
    <td>index</td>
    <td>value</td>
</tr>
<tr>
    <td>echo</td>
    <td>${value}</td>
    <td></td>
</tr>
<tr>
    <td>getEval</td>
    <td>index++;</td>
    <td></td>
</tr>
<tr>
    <td>endWhile</td>
    <td></td>
    <td></td>
</tr> 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2019-02-28T09:30:28.643

无需安装/下载任何东西，内置的[times](https://www.seleniumhq.org/selenium-ide/docs/en/introduction/control-flow/#times-selenium-ide-docs-en-api-commands-times)命令很容易做到这一点：

1.  在脚本的开头插入一个新行，选择`times`as its`Command`和`10`（例如）作为它的`Target`.
2.  向下滚动到脚本的底部，并添加一个新行`end`作为它的命令
3.  像往常一样按“运行”按钮。
4.  你的命令被执行了 10 次。

在这个例子中，我点击一个按钮 2000 次：

[![在此处输入图像描述](../Images/0cd6c40ad8a44de1523db5c380656b35.png)](https://i.stack.imgur.com/nOhUE.png)

要永远循环，只需`10`用一个非常大的数字替换，这将需要几个世纪才能执行，如果您正在运行 Selenium IDE，这可能与永远一样好。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-08-21T01:59:42.913

如上面的答案所述，安装用户扩展，它将向 Selenium IDE 测试添加循环功能。下面的示例显示了一个简单的循环：

```
<tr>
<td>getEval</td>
<td>index = 0;</td>
<td></td>
</tr>
<tr>
<td>while</td>
<td>index &lt; 10;</td>
<td></td>
</tr>
<tr>
<td>storeEval</td>
<td>index</td>
<td>value</td>
</tr>
<tr>
<td>echo</td>
<td>${value}</td>
<td></td>
</tr>
<tr>
<td>getEval</td>
<td>index++;</td>
<td></td>
</tr>
<tr>
<td>endWhile</td>
<td></td>
<td></td>
</tr> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-10-06T23:58:48.060

我是 Selenium 的新手（几分钟前才开始使用它）。在谷歌快速搜索“selenium loop”后，这个stackoverflow.com问题出现了。我立即跳入扩展程序并开始使用循环。接受的答案非常有帮助。但是，我想为其他刚接触 selenium 的人指出一些别的东西（并且偶然发现了这个页面）。

我为一个简单的网页创建了一个简单的测试。我添加了一个循环，以便测试可以无限期地运行（直到我暂停/停止它）。但是，我注意到通过这样做，Selenium GUI 中的 Runs/Failures 计数器不会随着每个循环而增加（我猜是因为单个测试用例从未运行到完成，它只是无限循环）。所以我挖得更远了。我的目标是让同一个测试运行很长时间（几个小时，或者可能是一夜之间），看看是否有任何故障（我现在正在寻找一个间歇性的错误）。

最简单的方法（对我来说，经过几分钟的搜索/实验）是执行以下操作（可能不需要插件，尽管如果您想在测试用例中运行一些小循环，附加的插件肯定很有帮助）：

*   将测试用例保存到文本文件
*   将测试套件保存到文本文件
*   在文本编辑器中打开测试套件文本文件
*   在测试套件中多次复制和粘贴测试用例（例如，一千次）
*   然后在 Selenium 中打开测试套件，并运行测试套件

现在，我有多次运行相同的简单测试套件，并且运行/失败计数器按预期递增（无需任何循环）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-02-13T00:17:46.277

使用[Firefox 的 Flow Control 插件](https://addons.mozilla.org/en-US/firefox/addon/flow-control/)。重新启动 Firefox 后，使用`label`命令在脚本中标记一个点，然后使用`gotolabel`命令跳转到那里。

例如：

![在此处输入图像描述](../Images/6bf720eb7f1144a17213cc57beca186e.png)

或者，如果您想查看源代码，这是一个标签：

```
<tr>
    <td>label</td>
    <td>start</td>  
    <td></td>
</tr> 
```

这会导致执行点跳回标签：

```
<tr>
    <td>gotolabel</td>
    <td>start</td>
    <td></td>
</tr> 
```

您可以在插件页面上看到其他命令，并记录在 [Selenium IDE：Flow Control GitHub 项目](https://github.com/davehunt/selenium-ide-flowcontrol)中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-02-25T06:02:02.117

Selenium IDE 现在具有流控制。这些控制流命令通过指定打开和关闭命令来表示一组（或块）命令来工作。

**可用命令**

以下是每个可用的控制流命令及其伴随和/或关闭命令。

if, else if, else, end times, end do, repeat if while, end

你可以在这里读更多关于它的内容：

[https://www.seleniumhq.org/selenium-ide/docs/en/introduction/control-flow/](https://www.seleniumhq.org/selenium-ide/docs/en/introduction/control-flow/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-05T18:18:09.617

这是 sampcop 用户的示例，用于使用 label 和 goto Label 命令自动进行垃圾邮件投诉：

第一次登录 spamcop.net

第二次使用报告垃圾邮件选项

第三次启动这个脚本

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://selenium-ide.openqa.org/profiles/test-case">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="selenium.base" href="http://www.spamcop.net/sc" />
<title>testecase</title>
</head>
<body>
<table cellpadding="1" cellspacing="1" border="1">
<thead>
<tr><td rowspan="1" colspan="3">testecase</td></tr>
</thead><tbody>

<tr>
    <td>label</td>
    <td>target1</td>
    <td></td>
</tr>
<tr>
    <td>clickAndWait</td>
    <td>link=Report Now</td>
    <td></td>
</tr>
<tr>
    <td>clickAndWait</td>
    <td>//input[@value='Send Spam Report(s) Now']</td>
    <td></td>
</tr>
<tr>
    <td>gotoLabel</td>
    <td>target1</td>
    <td></td>
</tr>
</tbody></table>
</body>
</html> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-31T12:03:22.683

您的测试套件文件只是一个 HTML 文件，因此只需执行以下操作：

```
<tr><td><a href="testCase1.html">testCase1</a></td></tr>
<tr><td><a href="sameStep.html">sameStep</a></td></tr>
<tr><td><a href="testCase2.html">testCase1</a></td></tr>
<tr><td><a href="sameStep.html">sameStep</a></td></tr>
```

# javascript - 如何使用jquery获取div的宽度

> ID：11033322
> 
> 赞同：3
> 
> 时间：2012-06-14T12:45:26.327
> 
> 标签：javascript, jquery, html, css

如何使用jquery获取div的宽度

`$("#window").width();`不管用

```
 <div id="widnow"></div> 
```

CSS：

```
#widnow{
  width:500px;
  border:solid 1px;
  float:left;
} 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-14T12:49:27.570

看起来你犯了一个简单的错误。

尝试改变

```
$('#window').width(); 
```

到

```
$('#widnow').width(); 
```

根据您在此处显示的内容，您将 window 拼错为*widnow*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T12:49:07.680

干得好...

> `var width = $("#window").width();`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T12:50:36.400

尝试：

```
$(document).ready(function(){
   alert($("#window").width());
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-11T02:20:47.563

将jquery Width命令与jcrop boxWidth一起使用，在图像周围创建一个div层，然后使用该命令找到宽度！

```
boxWidth: $("#cropwindow").width(), 
```

这将为您提供响应区域的宽度！

# mysql - MYSQL 触发器从表中选择 * 并检查每个值并更新其他表

> ID：11033323
> 
> 赞同：0
> 
> 时间：2012-06-14T12:45:29.737
> 
> 标签：mysql, triggers

我的一个表有一个触发器，该触发器将在更新表后执行，以检查更新的 id 值的字段值是否为真，如果任何值为假，则更新其他表为假，否则为真。

```
DELIMITER $$
CREATE
TRIGGER users_lookups
AFTER UPDATE ON UsersValidations
FOR EACH ROW
BEGIN
SELECT * FROM UsersValidations where id=New.id;
/* MY SCENARIO 
{   HOW to do this portion

  if(UsersValidations.value1 =="true" and UsersValidations.value2=="true" and UsersValidations.value3=="true")
    {
         update table2 set myvalue="true" where id=New.id;
    }
    else
    {
         update table2 set myvalue="false" where id=New.id;
    }

}*/

END$$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:09:09.760

您不需要查询表，因为触发器已经知道正在操作的行的值。只需使用触发器提供的 New 构造。

这是您的触发器的更新版本，虽然我在这台计算机上没有 mysql，所以我无法验证语法。考虑一下这种伪代码。

```
DELIMITER $$
CREATE
TRIGGER users_lookups
AFTER UPDATE ON UsersValidations
FOR EACH ROW
BEGIN

  if(New.value1 =="true" and New.value2=="true" and New.value3=="true")
    {
         update table2 set myvalue="true" where id=New.id;
    }
    else
    {
         update table2 set myvalue="false" where id=New.id;
    }

END$$ 
```

# java - 哪些摇摆容器可以设置为可聚焦的？

> ID：11033324
> 
> 赞同：1
> 
> 时间：2012-06-14T12:45:33.717
> 
> 标签：java, swing, focus, jpanel

我正在使用 a`JPanel`添加`JComponents`并尝试设置`JPanel`可聚焦，因此当用户单击 时`JPanel`，它将取消选择任何`JComponent`并调用它`JComponent`的侦听器。我已经阅读了几乎所有关于此问题的问答，但我找不到任何有效的方法。于是我想：还有其他可以使用的容器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:56:38.893

你试过了`panel.requestFocus();`吗？既然`JPanel`是它的子类，`Component`也可以调用这个方法。这将集中在特定时刻的任何事物上。

**编辑：**

这是一个显示它工作的代码示例。

```
import java.awt.Dimension;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class PanelOnClickGrabFocus {
    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame f = new JFrame();
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                final JPanel p = new JPanel();
                p.setPreferredSize(new Dimension(400, 400));
                JTextField tf = new JTextField(34);
                p.add(tf);
                f.setContentPane(p);
                f.pack();
                f.setVisible(true);
                p.addMouseListener(new MouseAdapter() {    
                    @Override
                    public void mousePressed(MouseEvent e) {
                        p.requestFocus();
                    }
                });
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T12:53:40.330

我想您可以使用任何实现该`FocusListener`接口的容器。创建您自己的或使用文档中描述的已知实现的接口。 [http://docs.oracle.com/javase/6/docs/api/java/awt/event/FocusListener.html](http://docs.oracle.com/javase/6/docs/api/java/awt/event/FocusListener.html)

# javascript - 使用 Javascript .click 插入 Css（为时已晚）

> ID：11033325
> 
> 赞同：1
> 
> 时间：2012-06-14T12:45:35.153
> 
> 标签：javascript, css

我正在处理我的代码，它的工作是，但动作（插入css）是迟到的动作。

```
jQuery(document).ready(function() {

     jQuery("#cal2tozindex").click(function() {
      jQuery("#cal2tozindex").css('z-index','1000');
      jQuery("#cal3tozindex").css('z-index','1');
     });

     jQuery("#cal3tozindex").click(function() {
      jQuery("#cal3tozindex").css('z-index','1000');
      jQuery("#cal2tozindex").css('z-index','1');
     });

}); 
```

有网址，您可以在该部分的右侧点击蓝色按钮，上面有一个名为“vols”的飞机。 [http://www.voyagesendirect.me/multisites/esther/](http://www.voyagesendirect.me/multisites/esther/)

**我想要的是 ：**

> 当你点击第一个字段时：'date de départ' (cal2tozindex) 他应该变成 z-index:1000; 另一个字段：'date de retour' (cal3tozindex) 应该是 z-index:1;
> 
> 与您单击第二个字段相同的模式。

**我的实际问题：**

css 的插入太晚了，javascript 在单击日期后放置 css，而不是在您先单击该字段时。我真的需要代码在第一次点击时（在现场）而不是在第二次点击时（在日期）。

感谢大家帮我解决这个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:38:36.670

```
jQuery(document).ready(function() {        
    jQuery("#date_dep_calFLT").focus(function() {
    jQuery("#cal2tozindex").css('z-index','1000');
    jQuery("#cal3tozindex").css('z-index','1');
});
jQuery("#bt-cal_FLT").click(function() {
    jQuery("#cal2tozindex").css('z-index','1000');
    jQuery("#cal3tozindex").css('z-index','1');
});

jQuery("#date_ret_calFLT").focus(function() {
    jQuery("#cal3tozindex").css('z-index','1000');
    jQuery("#cal2tozindex").css('z-index','1');
});

jQuery("#bt-cal_FLT_ret").click(function() {
    jQuery("#cal3tozindex").css('z-index','1000');
    jQuery("#cal2tozindex").css('z-index','1');
}); 
```

});

# netty - Netty 会是服务器多路复用器实现的好选择吗？

> ID：11033327
> 
> 赞同：0
> 
> 时间：2012-06-14T12:45:51.443
> 
> 标签：netty

服务器通常会执行以下操作：

-Netty 服务器在 tcp 端口上接收 clientX 绑定。（所有非常简单的文本协议）。

-Netty 接收认证请求。

-Netty 现在将创建一个名为 clientX 的通道组 - 在此通道组内，它将创建 4 个 tcp 连接（每个外部服务器一个）在服务器上为用户执行身份验证并将 1 个 ACK​​ 发送回 clientX。

- 接收来自 clientX 的下一个请求，它将路由/中继消息到 clientX 的通道组中的 connection1。

-在clientX的通道组中接收下一条消息和路由/中继请求到connection2。

- 接收注销请求，断开通道组，进而断开clientX通道组内的所有连接。

- 从任何外部服务器接收到的消息必须路由/中继回 clientx (mux)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T05:22:35.907

这样的事情可以用netty来完成。

我认为代理示例是一个很好的起点：

[https://github.com/netty/netty/tree/3/src/main/java/org/jboss/netty/example/proxy](https://github.com/netty/netty/tree/3/src/main/java/org/jboss/netty/example/proxy)

* * *

我已经修改了代理示例以实现如上所述的服务器。设计：使用netty-3.5.3

客户端<->|(s-soc)-MUX_NIO_server-(c-socks)|<->server1(lb)

```
 |<->server2
                                        |<->server3
                                        |<->server4 
```

pipeline=>framedecoder-->stringdecoder-->clienthandler-->framedecoder-->stringdecoder-->serverHandler--|

它运行 100% 直到达到 +/- 100 tps，然后来自客户端的相同消息一遍又一遍地发送到服务器，看起来像死锁情况。

在这两个处理程序中，我的 channelInterestChanged 事件如下所示：

//channelInterestChanged 同步 (trafficLock) {

```
 if (e.getChannel().isWritable()) {

        inboundChannel.setReadable(true);

          if (inboundChannel != null) {

             inboundChannel.setReadable(true);
         }

  } 
```

}

在两个处理程序消息 rx 中，我这样写：

同步（交通锁）{

```
final ChannelFutureListener writeListener =
                new ChannelFutureListener() {

                    @Override
                    public void operationComplete(final ChannelFuture future)
                            throws Exception {
                        if (Consts.DEBUG_ENABLED) {
                            log.debug("Finished Writing message);
                        }
                    }
                };

        /* if channel is write */
        if (inboundChannel.isWritable()) {
                inboundChannel.write(bufferMsg).addListener(writeListener);
        }
        // If inboundChannel is saturated, do not read until notified in
         if (!inboundChannel.isWritable()) {
            e.getChannel().setReadable(false);
        } 
```

}

知道可能出了什么问题以及在哪里解决这个问题吗？谢谢

# android - 安卓上的 db4o

> ID：11033331
> 
> 赞同：0
> 
> 时间：2012-06-14T12:45:58.930
> 
> 标签：android, database, android-emulator, db4o

我是 android 开发的新手。我在第一个项目中使用 db4o 数据库。但我收到以下代码错误：

```
 public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            //only want to get the configuration
       EmbeddedConfiguration configuration = Db4oEmbedded.newConfiguration();//This one will popup 
    } 
```

```
the error log :
06-14 20:15:30.249: W/dalvikvm(445): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
06-14 20:15:30.249: E/AndroidRuntime(445): Uncaught handler: thread main exiting due to uncaught exception
06-14 20:15:30.289: E/AndroidRuntime(445): java.lang.NoClassDefFoundError: com.db4o.Db4oEmbedded
06-14 20:15:30.289: E/AndroidRuntime(445):  at com.hlh.AtestActivity.onCreate(AtestActivity.java:34)
06-14 20:15:30.289: E/AndroidRuntime(445):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-14 20:15:30.289: E/AndroidRuntime(445):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459) 
```

我感到很困惑，为什么我在java项目中使用它时它可以工作，但它在android项目中不起作用Android中是否有一些限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:32:02.730

听起来您没有将库 .jar 放在正确的位置。

对于 android，它需要位于项目的子文件夹中，该子文件夹`libs`应该与 and 等处于同一级别`assets`（`res`如果您不记得以前必须这样做，这是最近的更改）。

只需创建该文件夹并将您的 jar 放入其中，Eclipse 将处理其余的工作。

# c# - 使用 BYTE* 输出导入 DLL 时出现问题

> ID：11033335
> 
> 赞同：4
> 
> 时间：2012-06-14T12:46:08.990
> 
> 标签：c#, pinvoke, marshalling, dllimport

我正在将一个非托管 DLL 中的函数导入 C#。C++函数签名如下

```
int RF_PowerOnEx(int nDev, int nCardType, DWORD* pdwRXSize, BYTE* lpbRXData) 
```

我按如下方式导入它

```
[DllImport("TP9000.dll")]
public static extern int RF_PowerOnEx(int nDev, int nCardType, out int pdwRXSize, out byte[] lpbRXData); 
```

但是这样做会给我一个 System.AccessViolationException。我已成功导入除此特定功能之外的其他功能。pdwRXSize 和 lpbRXData 都被视为输出。整数和缓冲区被初始化，然后传递给函数，然后填充缓冲区。帮助！！！！我似乎能够将输入参数传递到 DLL，但无法获取输出参数。我试过传递一个 Stringbuilder 对象无济于事。有谁能够帮我？谢谢！

编辑：错字

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:07:42.087

我建议您像这样声明托管签名

```
public static extern int RF_PowerOnEx(int nDev, int nCardType, out int pdwRXSize, [out] IntPtr lpbRXData); 
```

然后直接从非托管内存中“手动”编组字节数组，使用应该在`pdwRXSize`.

你真的需要了解更多关于函数实现的信息：特别是，调用者是否应该做一些事情来释放包含数据缓冲区的内存？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:45:07.217

不是`out byte[]`，这相当于 BYTE**。让它只是简单的字节[]。而 pdwRXSize 是`ref`，将其设置为数组的大小。像这样称呼它：

```
byte[] buffer = new byte[666];
int size = buffer.Length;
int retval = RF_PowerOnEx(device, cardtype, ref size, buffer);
if (retval == okay) processData(buffer, size); 
```

您必须对所需的数组大小做出有根据的猜测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T12:54:53.037

`EntryPointNotFoundException`被抛出是因为您的 .NET 声明的名称不符合非托管声明（因为有下划线）。

尝试：

```
 [DllImport("TP9000.dll", EntryPoint = "RF_PowerOnEx")]
    public static extern int RFPowerOnEx(int nDev, int nCardType, out int pdwRXSize, out byte[] lpbRXData); 
```

# asp.net - 在 Web 应用程序中存储自定义对象

> ID：11033336
> 
> 赞同：1
> 
> 时间：2012-06-14T12:46:09.020
> 
> 标签：asp.net, .net, vb.net, session, caching

我在一家新公司工作，正在为 Web 应用程序 (.Net/4.0) 构建一个向导。用户在向导过程中会转到几个单独的屏幕，并且必须在向导完成之前返回到原始屏幕。这与他们通常的做法不同。但这就是要做的事情。

一种选择是将每个面板的结果存储在数据库的主屏幕中。那么，当用户离开并重定向回来时。我可以检查查询字符串，然后调用数据读取器并适当地填充原始值。

我选择的选项：我创建了一个对象，并将用户输入的结果存储到其中。当用户离开并重定向回来时，通过查询字符串检查并通过 BO 填充控制值。

我将对象存储在其中`HttpContext.Current.Session.Item("BO")`并调用它。

我的问题是，这是一种不好的做法吗？如果这不是我想做的事情以确保从会话中删除该对象，无论用户何时退出向导。如果不好，你会怎么做？我不怕建设性的批评，我对此很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T15:59:32.300

我已经使用该`Session`对象做了类似的事情。至于性能（序列化）和类似的事情，我不得不根据具体情况说，如果您的自定义类很大并且包含多个其他自定义类，那么序列化可能会有所帮助，但如果它们相对较小并且只包含原始数据类型，那么序列化可能会过度杀戮，并且很快就会适得其反。

至于控制对象在会话中停留的时间，您已经说过，为了完成向导，他们必须返回到起始页面或控制器页面或任何您想要调用的页面。因此，我认为当他们单击“保存”或“完成”时，您可以在保存功能的末尾添加一行`Session("BO") = nothing`（或`Session.Remove("BO")`将完成相同的操作），这会从`Session`容器中释放对象。如果您想在完成向导之前在他们离开页面时清除会话，那么这可能会有点麻烦。至于失去连接和超时之类的事情，

但不必担心我过去所做的是确保每次向导启动时都会清除`Session`我计划使用的成员，如果它还没有`nothing`，然后使用新对象重新创建它。

该`Session`方法或该`viewstate`方法的唯一问题是两者都不是特别安全，因此如果您正在处理敏感数据，您可能希望加密存储在`Session`.

当我第一次开始使用缓存和会话对象时，这篇文章帮助了我。 [ASP.NET 中的缓存管理](http://www.codeproject.com/Articles/12097/Cache-Management-in-ASP-NET)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:01:17.890

如果向导都在同一个页面上，只是回发到向导的每个屏幕，您可以使用 viewstate 来实现这一点。这绕过了您提出的问题，即使用户离开向导，也可能使对象保持在会话中。

请参阅 msdn 上有关 viewstate 的以下文章： [ASP.NET View State Overview](http://msdn.microsoft.com/en-us/library/bb386448.aspx)

> 您还可以使用视图状态来存储特定于页面的应用程序数据。

不过，使用视图状态有一些注意事项。您不希望将大量数据通过管道传输到用户浏览器以进行状态管理。存储在视图状态中的类也必须是可序列化的。引用msdn文章：

> 视图状态信息被序列化为 XML，然后使用 base-64 编码进行编码，会产生大量数据。当页面发布到服务器时，视图状态的内容作为页面回发信息的一部分发送。如果视图状态包含大量信息，则会影响页面的性能。通过使用应用程序的典型数据来测试页面的性能，以确定视图状态的大小是否会导致性能问题。

和

> ...必须使用 Serializable 属性编译该类，以便可以序列化其值以用于视图状态。

有关使用 viewstate 的替代方法，请参阅 msdn 上的以下内容： [ASP.NET State Management Recommendations](http://msdn.microsoft.com/en-us/library/z1hkazw7.aspx)

# xpath - 不使用 HtmlUnit 返回值

> ID：11033337
> 
> 赞同：0
> 
> 时间：2012-06-14T12:46:10.750
> 
> 标签：xpath, htmlunit

当我尝试使用以下代码时...返回 td 标记而不是 td 标记的值。

```
List<?> byXPath = page2.getByXPath("//tr[@class='metadata odd']/td");
System.out.println(byXPath.get(0).toString()); 
```

例如：如果标签是

```
<td class='metadata odd'>Arun</td> 
```

结果是

```
<td class='metadata odd'> 
```

....我需要结果是 Arun。请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:04:30.257

尝试这个：

```
DomText domText = (DomText) form.getFirstByXPath("//tr[@class='metadata odd']/td/text()");
System.out.println(domText.getTextContent()); 
```

**编辑：**

如果您想获取所有元素，那么只需使用`getByXPath`而不是`getFirstByXPath`. 然后遍历返回的列表（在你的问题中没有必要，所以我没有添加）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:00:40.980

您正在寻找的实际上是`td`标记的文本子节点的字符串表示`td`，而不是您目前正在请求的元素本身的字符串表示。使用稍微不同的 XPath 表达式直接引用文本子节点，如下所示：

```
List<?> byXPath = page2.getByXPath("//tr[@class='metadata odd']/td/text()");
DomText textNode = (DomText)(byXPath.get(0));
System.out.println(textNode.toString()); 
```

另请参阅[此问题](https://stackoverflow.com/questions/5033955/xpath-select-text-node)。

# sql - 如何在 SQL Server 2005 中查找表中多个列的总和？

> ID：11033340
> 
> 赞同：78
> 
> 时间：2012-06-14T12:46:20.097
> 
> 标签：sql, sql-server, sql-server-2005

我有一个`Emp`包含这些行的表：

```
Emp_cd | Val1  | Val2  | Val3  | Total
-------+-------+-------+-------+-------
 1     | 1.23  | 2.23  | 3.43  | 
 2     | 23.03 | 12.23 | 2.92  |
 3     | 7.23  | 9.05  | 13.43 |
 4     | 03.21 | 78.23 | 9.43  | 
```

我想找到哪个将在列`SUM`中显示。`Val1, Val2, Val3``Total`

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-06-14T12:49:43.603

简单的：

```
SELECT 
   Val1,
   Val2,
   Val3,
   (Val1 + Val2 + Val3) as 'Total'
FROM Emp 
```

或者如果你只想要一行：

```
SELECT 
   SUM(Val1) as 'Val1',
   SUM(Val2) as 'Val2',
   SUM(Val3) as 'Val3',
   (SUM(Val1) + SUM(Val2) + SUM(Val3)) as 'Total'
FROM Emp 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2014-11-05T11:24:57.777

您还必须注意以下`null`记录：

```
SELECT  (ISNULL(Val1,0) + ISNULL(Val2,0) + ISNULL(Val3,0)) as 'Total'
FROM Emp 
```

用法`ISNULL`：

```
ISNULL(col_Name, replace value) 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2012-06-14T12:48:40.457

和普通人一样`SELECT`吗？

```
SELECT 
   Val1, Val2, Val3,
   Total = Val1 + Val2 + Val3
FROM dbo.Emp 
```

还是您想确定总数并使用这些值更新表格？

```
UPDATE dbo.Emp
SET Total = Val1 + Val2 + Val3 
```

如果你想让这个总数始终是最新的 - 你应该在你的表中有一个计算列：

```
ALTER TABLE dbo.Emp
ADD CurrentTotal AS Val1 + Val2 + Val3 PERSISTED 
```

然后您将*始终*获得当前总数 - 即使值发生变化：

```
SELECT 
   Val1, Val2, Val3, CurrentTotal
FROM dbo.Emp 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-07-29T12:01:31.713

试试这个：

```
select sum(num_tax_amount+num_total_amount) from table_name; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-02T18:25:12.567

另一个使用 COALESCE 的例子。[http://sqlmag.com/t-sql/coalesce-vs-isnull](http://sqlmag.com/t-sql/coalesce-vs-isnull)

```
SELECT (COALESCE(SUM(val1),0) + COALESCE(SUM(val2), 0)
+ COALESCE(SUM(val3), 0) + COALESCE(SUM(val4), 0)) AS 'TOTAL'
FROM Emp 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-10T12:39:23.833

您好，您可以使用一个简单的查询，

```
select emp_cd, val1, val2, val3,
(val1+val2+val3) as total 
from emp; 
```

如果您需要插入新行，

```
insert into emp select emp_cd, val1, val2, val3,
(val1+val2+val3) as total 
from emp; 
```

为了更新，

```
update emp set total = val1+val2+val3; 
```

这将为所有社区更新

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-25T07:58:21.983

需要对具有空值的 Postgres 数据库表执行类似的工作。最终创建了一个功能，因为还有太多`COALESCE`要添加的功能。

```
CREATE OR REPLACE FUNCTION array_sum_float(float[])
    RETURNS float
AS
$$
DECLARE
    arrInts ALIAS FOR $1;
    sum int DEFAULT 0;
BEGIN
    FOR I IN ARRAY_LOWER(arrInts, 1)..ARRAY_UPPER(arrInts, 1)
        LOOP
            sum = sum + COALESCE(arrInts[I], 0);
        END LOOP;
    RETURN sum;
END;
$$
    LANGUAGE plpgsql;

SELECT array_sum_float(ARRAY [6,8, null, 2]);
SELECT array_sum_float(ARRAY [Val1, Val2, Val3]) from Emp; 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2015-05-05T10:30:37.807

```
SELECT Emp_cd, Val1, Val2, Val3, SUM(Val1 + Val2 + Val3) AS TOTAL 
FROM Emp
GROUP BY Emp_cd, Val1, Val2, Val3 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2016-09-10T12:32:26.550

使用触发器它将起作用：-

**->在插入表名之前创建触发器触发器名**

**对于每一行集 NEW.column_name3 = NEW.column_name1 + NEW.column_name2;**

这仅在您将在表中**插入一行**时才有效，而不是当您为此目的更新表时创建另一个不同名称的触发器并在上述语法中使用**UPDATE**代替**INSERT**

# php - PHP邮件功能将x-msg添加到所有链接...？

> ID：11033342
> 
> 赞同：2
> 
> 时间：2012-06-14T12:46:40.380
> 
> 标签：php, email

邮件通过正常，但链接如下所示：**x-msg://63/'www.something.com/'**

```
$from_user = $_POST["fromuser"];
$subject = $_POST["subject"];

$headers = "From: $from_user <{$_POST['fromemail']}>\r\n". 
               "MIME-Version: 1.0" . "\r\n" . 
               "Content-type: text/html; charset=UTF-8" . "\r\n" .  "X-Mailer: PHP/" . phpversion();

     if(mail($_POST["toemail"], $_POST["subject"], wordwrap(urldecode($_POST["ebody"]),70), $headers)){
     ...
     } 
```

和服务器有关吗？

正文代码：

```
$this->ebody = "<html><head><title>" . $this->subject . "</title></head><body>
<img src='$imageurl' height='65px'><p><strong>AUTOMATED ORDER FORM.</strong>

</p>Please do not reply this message.<p>" . $body . "</p><hr>All Rights Reserved.<br><a href='http://www.something.com'>Company Name.</a></body></html>"; 
```

生成的电子邮件（原始来源）：

```
> To: ###@gmail.com Subject: New Order - 14/06/12 MIME-Version: 1.0
> Content-type: text/html; charset=utf-8 X-Priority: 3 X-Mailer:
> PHP5.2.9 From: KSONE <noreply.ksone@something.com> Reply-To: Sales
> <sales@something.com>
> 
> 
> <html><head><title></title></head><body><img
> src=\"http://www.something.com/imgs/logo.png\"
> height=\'65px\'><p><strong>AUTOMATED VENDOR ORDER
> FORM.</strong></p>Please do not reply this message 027777777<p>Hello
> World!</p><hr>1/76 All Rights Reserved 12120.<br><a
> href=\'http://www.something.com\'>Company Co., Ltd.</a></body></html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T12:51:18.787

AFAIK`x-msg://`是 Mail.app 预先添加到所有没有有效方案的链接的占位符方案。换句话说，您的链接可能看起来像`://foo/bar`或类似的东西，在这种情况下 Mail.app 插入`x-msg`以生成完整、有效的 URI。

修复应用中的链接以发送完整、有效的 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T17:21:08.907

已解决：这是因为我在问题中遗漏了一些东西。我在启用邮件的远程服务器上创建了一个 API，本地脚本通过 CURL 发出 POST 请求。认为 CURLs 请求顺利通过，输出电子邮件被错误地转义。这是因为我没有对我的 POST 变量执行 urlencode 导致疯狂的事情发生。

# entity-framework - 是否可以从集合中删除子项并解决 SaveChanges 上的问题？

> ID：11033348
> 
> 赞同：22
> 
> 时间：2012-06-14T12:47:02.767
> 
> 标签：entity-framework, entity-framework-4, persistence, repository-pattern

我们首先使用具有外键关系的实体框架代码。我们研究了在我们的应用程序中处理从实体 ICollection 中删除对象的方法。

当我们有一个具有子关系的实体时，我们可以使用 Add 方法将对象直接添加到它们的 ICollection 中。现在，当您使用 remove 时，您会收到错误消息

> System.InvalidOperationException 发生消息=操作失败：由于一个或多个外键属性不可为空，无法更改关系。当对关系进行更改时，相关的外键属性将设置为空值。如果外键不支持空值，则必须定义新关系，必须为外键属性分配另一个非空值，或者必须删除不相关的对象。

我理解这是因为集合上的 Remove 仅通过使外键为空来删除关系。我们想在实体中编写业务逻辑并允许删除。

因此，从它的存储库中获取根实体，例如从 OrderRepository 中的订单，然后调用实体的某些特定方法，例如，`Order.AddOrderline(Orderline orderline)`这会在订单中添加一个 OrderLine`virtual ICollection<OrderLine> OrderLines`

但是，我们不能编写这样的代码，`Order.CancelOrderline(int orderLineId)`因为简单地从 ICollection 中删除会导致储蓄更改出错。

无论如何，仅通过操作对象集合似乎无法实现这一目标。显然我们可以直接从 Context 中移除。但是我想让它成为实体的一部分。我们可以在实体框架的 SaveChanges 事件中清理某些没有外键的实体吗？显然需要告诉 EF 如果它们具有空外键，哪些实体可以被删除。

我们目前正在使用存储库模式，因此控制器无法访问上下文。我显然可以在 Order 存储库上使用 OrderLine 存储库或 remove OrderLine 方法。但是只是想知道是否可以在不引用持久性机制的情况下在实体上编写代码。

想法？我们做这一切都错了吗？其他 ORM 是否允许您从子集合中删除？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-14T13:21:14.637

我不知道以下是否适合您，但实体框架支持[识别关系](https://stackoverflow.com/a/762994/270591)。在这种关系中，子实体（从属）到父（主）实体的外键必须是子实体（复合）主键的一部分。例如 - 使用`DbContext`数据注释 - 您的模型类必须如下所示：

```
public class Order
{
    [Key]
    public int OrderId { get; set; }

    public ICollection<OrderLine> OrderLines { get; set; }
}

public class OrderLine
{
    [Key, ForeignKey("Order"), Column(Order = 1)]
    public int OrderId { get; set; }

    [Key, Column(Order = 2)]
    public int OrderLineId { get; set; }

    public Order Order { get; set; }
} 
```

如果需要，您可以制作`OrderLineId`自动生成的身份。重要的只是 FK`Order`是 PK 的一部分。

例如这样的代码......

```
using (var ctx = new MyContext())
{
    var order = ctx.Orders.Include("OrderLines").Single(o => o.OrderId == 1);
    var orderLineToDelete = order.OrderLines
        .FirstOrDefault(ol => ol.OrderLineId == 5);
    if (orderLineToDelete != null)
        order.OrderLines.Remove(orderLineToDelete);

    ctx.SaveChanges();
} 
```

...确实会从数据库中*删除。*`orderLineToDelete`

更多详细信息请参见[“](http://msdn.microsoft.com/en-us/library/ee373856.aspx)识别*和非识别关系的注意事项*”部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T13:09:33.667

正如您所发现的，如果您只是从集合中删除一个实体，则该实体会挂在附加到对象上下文中，并在您调用时给您一个错误`SaveChanges()`；我已经使用域事件启用了一种通过存储库从对象上下文中删除实体的整洁方式。

我在[对这个问题](https://stackoverflow.com/questions/8360239/ef-code-first-how-are-you-meant-to-delete-a-row-from-an-entitys-collection-whi/8360864#8360864)的回答中详细介绍了这种方法。

# ios - 图像不会从 iOS 缓存中加载

> ID：11033354
> 
> 赞同：0
> 
> 时间：2012-06-14T12:47:16.060
> 
> 标签：ios, caching, asynchronous, nsdata, grand-central-dispatch

因此，我正在尝试将最近访问的图像保存在缓存中，并在重新请求它们时将它们加载回来。问题是从缓存请求的图像没有显示，但从网络请求的图像却显示了。然而，经过大量的摆弄后，我发现将缓存数据功能与主队列上的请求结合起来似乎可以解决问题。谁能向我解释它为什么有效？我以为我会默认在主队列上？

```
if([self.fileManager fileExistsAtPath:fileName]){
    NSData *theData = [NSData dataWithContentsOfFile:fileName];

    dispatch_async(dispatch_get_main_queue(), ^{ // Why does it work now?
        [self setUpScrollViewWithImageData:theData];
    });

}else{
dispatch_queue_t downloadQueue = dispatch_queue_create("flickr download", NULL);
dispatch_async(downloadQueue, ^{

   NSData *imageData = [NSData dataWithContentsOfURL:image];

    dispatch_async(dispatch_get_main_queue(), ^{

        [self setUpScrollViewWithImageData:imageData];
        [self.fileManager createFileAtPath:fileName contents:imageData attributes:nil];
        [self checkCacheSize];
    });

});
dispatch_release(downloadQueue);
} 
```

这是滚动视图设置方法

```
-(void)setUpScrollViewWithImageData:(NSData *)imageDataToSetup{

UIImageView *myImage = [[UIImageView alloc] initWithImage:[UIImage imageWithData:imageDataToSetup]];

self.thisImage = myImage;
self.myScrollView.delegate =self;
self.myScrollView.contentSize = self.thisImage.bounds.size; 
self.navigationItem.rightBarButtonItem = nil;
[self.myScrollView addSubview:self.thisImage];
self.myScrollView.minimumZoomScale = 0.2;
self.myScrollView.maximumZoomScale = 5;
float w = self.view.bounds.size.width/self.thisImage.bounds.size.width;
float h = self.view.bounds.size.height/self.thisImage.bounds.size.height;

float zoomRatioMax = MAX(w , h );
float zoomRatioMin = MIN(w , h );

if(zoomRatioMax<1){
    [self.myScrollView setZoomScale:zoomRatioMax]; 
}
if(zoomRatioMin>1){   
    [self.myScrollView setZoomScale:zoomRatioMin];      
}

} 
```

# java - Android : 使用 ebay 中的条形码搜索项目

> ID：11033356
> 
> 赞同：0
> 
> 时间：2012-06-14T12:47:17.947
> 
> 标签：java, android

我的大学项目有一个项目想法，即开发一个 android 应用程序，该应用程序可以拍摄各种电子设备（如相机笔记本电脑）的条形码图像，然后使用该条形码读取它们的型号和品牌，然后搜索该型号和在 Ebay 中使用品牌将用户指向相关网页。我想知道这个项目可以做吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:01:01.427

[是的，有可能 - 从如何在 Android 上扫描条码的](https://stackoverflow.com/a/4955110/1167780)示例开始，然后查看[Ebay Java SDK](https://www.x.com/developers/ebay/documentation-tools/sdks/java)（具体请参阅本教程，标题为：[Finding API 入门：通过关键字查找项目](http://developer.ebay.com/DevZone/finding/HowTo/GettingStarted_JS_NV_JSON/GettingStarted_JS_NV_JSON.html)）

# asp.net - ASP.net MVC 全局授权过滤器强制登录 AllowAnonymous 操作

> ID：11033357
> 
> 赞同：10
> 
> 时间：2012-06-14T12:47:17.977
> 
> 标签：asp.net, asp.net-mvc, security, authentication, forms-authentication

**设置（使用 MVC 4）**

```
public class MyAuthorizeAttribute : AuthorizeAttribute {

    protected override bool AuthorizeCore(HttpContextBase httpContext) {

        var isAuthorised = base.AuthorizeCore(httpContext);

        if(isAuthorised) {
            // retrieve authentication ticket from cookie and
            // create custome principal and attach to 
            // httpContext.User
        }

        return isAuthorised;
    }
} 
```

Gloabl.asax.cs：

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    filters.Add(new HandleErrorAttribute());
    filters.Add(new MyAuthorizeAttribute());
} 
```

HomeController.cs：

```
using System.Web.Mvc;

public class HomeController : Controller
{
    [AllowAnonymous]
    public ActionResult Index()
    {
        return View();
    }
} 
```

**问题**

调用主页会强制加载登录页面。

**问题**

当 HomeController.Index() 动作用 [AllowAnonymous] 修饰时，为什么 ASP 将我重定向到登录视图？

我正在使用[这篇](http://weblogs.asp.net/jgalloway/archive/2012/04/18/asp-net-mvc-authentication-global-authentication-and-allow-anonymous.aspx)文章作为参考

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-15T07:51:50.323

根据我对原始问题的评论。问题是索引视图在返回部分视图的其他控制器上调用操作。只是遍历所有内容并删除旧的 [Authorize] 属性的情况。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-28T15:13:33.430

尽管原始发帖人已经在他的案例中找到了原因，但我想分享我的解决方案，因为我在遇到相同症状时遇到了这个问题。

在我的 web.config 文件中，遵循 webforms 的逻辑：

```
<authorization>
  <deny users="?" />
</authorization> 
```

你不能有这个，因为它会阻止请求在没有首先登录的情况下执行任何操作，除了发生重定向的登录操作。我只是在尝试添加第二个公共操作时才发现这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T13:19:32.507

我有类似的问题，最后我使用了错误的`AllowAnonymousAttribute`课程。有两个 AllowAnonymousAttribute 类：

*   一个来自`System.Web.Http` [命名空间](http://msdn.microsoft.com/en-us/library/system.web.http.allowanonymousattribute%28v=vs.108%29.aspx)
*   另一个来自 `System.Web.Mvc` [命名空间](http://msdn.microsoft.com/en-us/library/system.web.mvc.allowanonymousattribute%28v=vs.108%29.aspx)

在您的情况下，您当然必须使用来自`System.Web.Mvc`:)

我花了一个多小时在我的程序中弄清楚

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-14T13:12:16.757

虽然这不是一个答案，但..

尝试使用内置`Authorize`代码并确保`AllowAnonymous`工作正常。我在您尝试的自定义授权评论中看到

> 从 cookie 中检索身份验证票证并创建客户主体并附加到 httpContext.User

我建议您在此[线程](https://stackoverflow.com/questions/3273925/how-do-i-implement-custom-principal-and-identity-in-asp-net-mvc)`Application_AuthenticateRequest`中`Global.asax.cs`指定的早期执行该过程。

# wpf - 无法在datagrid WPF中编辑单元格

> ID：11033363
> 
> 赞同：0
> 
> 时间：2012-06-14T12:47:37.100
> 
> 标签：wpf, entity-framework, datagrid

`DataGrid`在我看来，我有一个绑定到一个`ObservableCollection<>`. 绑定有效。

问题是我无法编辑任何单元格，也不明白为什么......

这是我的 XAML：

```
<DataGrid ItemsSource="{Binding ClientSpecifications, Mode=TwoWay}" /> 
```

只有这个。而已。但它不起作用。我正在使用 WPF、.NET4、EF。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:57:36.397

根据这篇文章：[WPF DataGrid 中的编辑功能概述](http://blogs.msdn.com/b/vinsibal/archive/2008/10/01/overview-of-the-editing-features-in-the-wpf-datagrid.aspx)

数据网格使用`IEditableCollectionView<T>`（`ObservableCollection<T>`实现）-但为了使对象可编辑，您需要确保您的对象 T 已实现[`IEditableObject`Interface](http://msdn.microsoft.com/en-us/library/system.componentmodel.ieditableobject.aspx)。完成此操作后，Datagrid 会将集合项识别为可编辑的，并允许您在网格中更改它们。

# powershell - Powershell - 查找未定义的字符系列

> ID：11033365
> 
> 赞同：2
> 
> 时间：2012-06-14T12:47:40.253
> 
> 标签：powershell

我试图找到一系列未定义的字符，并通过 powershell 用定义的集合替换它们。特别麻烦的脚本行涉及更改 Android 项目的 xml 清单：

```
(get-content "AndroidManifest.xml") | 
   foreach { $_ -replace "@drawable/*_icon", "@drawable/$icon_icon"} | 
   set-content "AndroidManifest.xml" 
```

这一行的想法是它检索内容，搜索并替换图标字符串（将现有图标名称替换为 $icon 表示的名称），然后将其传递回文件中。

不幸的是，当执行时，这似乎并没有真正完成它的工作，并且字符串只是没有改变。现有字符串是可变的，因此不能输入任何值（因此是通配符）。

任何人都可以提出解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:36:37.007

我认为您使用的正则表达式不太正确。`*`修饰符匹配零个或多个前一个字符，因此匹配`/*_icon`零个或多个正斜杠后跟`_icon`.

其次，在您的替换字符串中，您匹配的内容将被替换为`$icon_icon`变量的值。您需要将`$icon`变量包装为表达式`$($icon)_icon`或字符串格式，`"@drawable/{0}_icon" -f $icon`. 我更喜欢字符串格式。

把它们放在一起，你会得到：

```
 $_ -replace "@drawable/(.*?)_icon", ("@drawable/{0}_icon" -f $icon) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:58:57.990

将脚本中的 $icon_icon 替换为 $($icon)_icon。

# android - 取决于屏幕尺寸的值

> ID：11033368
> 
> 赞同：1
> 
> 时间：2012-06-14T12:47:51.957
> 
> 标签：android

如果我需要`android:padding="120dip"`根据屏幕大小而有所不同，并且我不想创建其他几个 xml，该怎么办？

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/right_back"
    android:orientation="horizontal"
    android:padding="120dip" > 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T13:00:53.970

由于您希望一个字符串资源具有不同的值 - 基于不同的屏幕，您可以`values`像我们拥有文件夹一样创建不同的文件`drawable`夹：

![在此处输入图像描述](../Images/02fe8ceb1cf6ec6a717ef0958abc48a3.png)

在所有文件夹中，创建**dimens.xml**并确保在每个文件中提供相同的变量名称但不同的值。

## 例如：

我在**values文件夹中的****dimens.xml**如下：

 **```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <dimen name="padding_val">100dp</dimen>
</resources> 
```

所以现在，你只需要提及`android:padding="@dimen/padding_val"`.

但这仅适用于`values`文件夹，创建相同的 dimens.xml 文件并输入您想要的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:53:42.963

Dip（与密度无关的像素）与屏幕尺寸无关，这意味着，如果您定义边距 120dip，它将按比例在每个屏幕尺寸上保持相等的边距。

DIP 表示：px * 密度因子，例如，在 ldpi 上，该因子为 1.0，在 mdpi 1.5 和 hdpi 2.0 上

因此，如果您说您想要 100dip 的边距，它将在 ldpi 上为 100px，在 mdpi 上为 150px，在 hdpi 上为 200px，这在视觉上将是相同的大小。**

# java - java：接收UDP数据包以及如何保存它们

> ID：11033375
> 
> 赞同：0
> 
> 时间：2012-06-14T12:48:29.460
> 
> 标签：java, udp

我从 simulink udp block 收到数组中的 udp 数据（byte[] 数据）。数据被打包为 int32 ，所以首先我需要解压它。

我不知道如何保存这些数据才能使用它。这些数据是位置，我想使用 OpenGL ES 将它们可视化。我想将数据保存到一个数组中，并能够在下一次迭代中将下一个数据包添加到该数组中，而不是重写整个数组（因为循环）

目前数据大小为1200 * 96。数组是一个不错的选择吗？

```
 int j = 0 ;
  float[] bin1 = new float[(data.length/2)];
  while (j < data.length ) {
    if ( data[2*j+2] >= 0  ) {

      String unhx =(binary(data[2*j+3])+binary(data[2*j+2])+binary(data[2*j+1])+binary(data[2*j]));
      float unbin = ((float)unbinary(unhx)/100);
      bin1[j/2] = unbin;
      print(bin1[1]);
    }

    else if  ( data[2*j+2] < 0 && data[2*j+3] < 0 ) {
      data[2*j] = (byte)(-data[2*j]);
      data[2*j+1] = (byte)(-data[2*j+1]);
      String unhx =(binary(data[2*j+1])+binary(data[2*j]));
      float unbin = ((-1)*(float)unbinary(unhx)/100);
      bin1[j/2] = unbin;
      print(bin1[1]);
      }
      j = j + 2;
  } 
```

现在的问题是，每次新数据包到来时它都会重写整个 bin1 数组，我怎么能将新数据包添加到 bin1 而不是重写整个事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:50:31.550

再一次 Melisa，你必须在进入 while 循环之前声明你的数组。这样一旦您离开循环，它们就会保持在范围内。这意味着，离开循环后，您仍然可以访问该数组。：） 希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:09:17.680

回复您编辑的问题：

Melisa，您可能需要考虑使用浮点数列表而不是浮点数数组。否则，您可能会发现自己调整大小并复制数组以添加更多数据。列表/链接列表理论上具有无限长度（您实际上不必担心长度），您可以继续添加浮点数。

[列表](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:02:38.703

我在这里看到的一个问题是在`while`循环中您使用计数器作为变量`int j=0`，但没有在哪里增加`j`可能是问题的计数器变量。

```
j = 0 ;
while (j < data.length){
float[] array = new float[] {myData};
j++;
} 
```

# c# - 重新部署网站后强制客户端刷新

> ID：11033378
> 
> 赞同：0
> 
> 时间：2012-06-14T12:49:02.347
> 
> 标签：c#, asp.net, visual-studio-2010, webserver

场景：有一个网站在任何给定时间都有 700-900 个并发唯一访问者。该站点上的某些页面会自动刷新，更新显示的信息。这些页面的实现使会话永远不会超时，以允许用户始终打开这些页面。

问题：将更新部署到网站后，如果用户在更新之前打开了页面，他们仍然会看到旧标记。

问题：有没有办法强制刷新？我在想可能会在每个回调上检测版本/修订号，如果不同，则重定向到某个消息页面。但我希望有更简单的方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:53:47.053

我想你回答了你自己的问题。除了检测自上次应用程序重新启动以来的版本或时间戳之外，我认为没有什么好方法可以做到这一点。

# android - Notification.Builder 和 FLAG_INSISTENT

> ID：11033380
> 
> 赞同：3
> 
> 时间：2012-06-14T12:49:06.433
> 
> 标签：android

我喜欢它的易用性，`Notification.Builder`但它似乎不支持通知的坚持模式。

有没有办法从 设置`FLAG_INSISTENT`标志`Notification.Builder`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-14T13:13:36.763

不是直接的。有一个私有`setFlag()`方法`Notification.Builder`——我不知道他们为什么不公开它。

`Notification`但是，您可以通过 a配置其余部分`Builder`，然后调整已完成`Notification`对象上的标志。

或者，获取代码`Notification.Builder`并对其进行修改以创建您自己的公开`setFlag()`或添加`setInsistent()`等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-09T18:05:08.693

也许我的回答对其他人有用

您可以使用：

```
NotificationCompat.Builder builder = new NotificationCompat.Builder(getContext());

builder.setContentTitle("Title")
       .setContentText("Hello world")
       .setSmallIcon(R.mipmap.ic_launcher);

Notification notification = builder.build();
notification.flags = Notification.FLAG_INSISTENT;
final NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
mNotificationManager.notify(ID, notification) 
```

# apache - 添加到 /launchpad 目录时找不到 Apache Sling 资源

> ID：11033382
> 
> 赞同：1
> 
> 时间：2012-06-14T12:49:11.733
> 
> 标签：apache, exception, resources, sling

阅读有关 Sling 的手册[http://sling.apache.org/site/46-line-blog.html](http://sling.apache.org/site/46-line-blog.html)

将文件夹 blog 和 blog.html 添加到目的地：

```
\launchpad\content\src\main\resources\content\ 
```

但仍无法从 URL 访问它：

```
http://localhost:8080/blog/blog.html 
```

错误：

```
The requested URL /blog/blog.html resulted in an error in org.apache.sling.servlets.resolver.internal.defaults.DefaultErrorHandlerServlet.
Request Progress:

      0 (2012-06-14 15:12:32) TIMER_START{Request Processing}
      0 (2012-06-14 15:12:32) COMMENT timer_end format is {<elapsed msec>,<timer name>} <optional message>
      0 (2012-06-14 15:12:32) LOG Method=GET, PathInfo=/blog/blog.html
      0 (2012-06-14 15:12:32) TIMER_START{ResourceResolution}
     12 (2012-06-14 15:12:32) TIMER_END{12,ResourceResolution} URI=/blog/blog.html resolves to Resource=NonExistingResource, path=/blog/blog.html
... 
```

有人将内容添加到 Sling 启动板目录吗？

**更新：**

内容（blog.html 文件）已添加到本地文件夹：

```
d:\workspaceSling\sling\launchpad\content\src\main\resources\content\blog 
```

正如文章中所建议的那样（据我所知）

它是从完成`mvn clean install`的`d:\workspaceSling\sling\launchpad\content\pom.xml`，所以在目标中得到了结构：

```
d:\workspaceSling\sling\launchpad\content\target\classes\content\blog\blog.html 
```

反正`http://localhost:8080/blog/blog.html`不可用

**1.**此网址可用：

```
http://localhost:8080/index.html 
```

它对应于本地文件：

```
d:\workspaceSling\sling\launchpad\content\src\main\resources\content\index.html 
```

**2.**此 URL 也可用：

```
 http://localhost:8080/sling-test/sling/sling-test.html 
```

它对应于本地文件：

```
d:\workspaceSling\sling\launchpad\content\src\main\resources\content\sling-test\sling\sling-test.html 
```

因此，Apache Sling 服务器不显示我的自定义手动添加内容的核心问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:39:57.137

你说

> 内容（blog.html 文件）已添加到本地文件夹：
> 
> d:\workspaceSling\sling\launchpad\content\src\main\resources\content\blog
> 
> 正如文章中所建议的那样（据我所知）

[这是不正确的，您在http://sling.apache.org/site/46-line-blog.html](http://sling.apache.org/site/46-line-blog.html)上的教程所需的唯一文件是内容中 /apps/blog/blog.esp 脚本*中的脚本repository*，不在文件系统中。通过 WebDAV 挂载存储库是创建该文件的一种方法，或者您可以按照下面提到的“Sling in 15 minutes”教程中的描述使用 curl。

如果您返回教程并更严格地按照说明进行操作，IMO 应该没问题。[也许http://sling.apache.org/site/discover-sling-in-15-minutes.html](http://sling.apache.org/site/discover-sling-in-15-minutes.html)上的更基本的教程将有助于更好地掌握 Sling 基础知识。

# asp.net - Windows Azure 定价精度

> ID：11033383
> 
> 赞同：1
> 
> 时间：2012-06-14T12:49:19.863
> 
> 标签：asp.net, windows, azure

我正在尝试估算在 Windows Azure 上开发项目的成本。但有些数据有点模糊。以下是我的问题：

**存储**
您如何计算/估计您的存储交易数量。举个例子，如果一个用户下载一个1Mo的文件，有多少笔交易？

**Web 和 Worker 角色实例**
如果您有一个 Web 角色（暂存）并且您停用了它，我的意思是，他的状态已停止。你付钱吗？您是否只需要停止它或删除整个托管服务。

**带宽**
你如何估计你的带宽。

（也许后面还会有其他问题）

非常感谢你的回答 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:10:09.967

**存储**：http: [//blogs.msdn.com/b/windowsazurestorage/archive/2010/07/09/understanding-windows-azure-storage-billing-bandwidth-transactions-and-capacity.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/07/09/understanding-windows-azure-storage-billing-bandwidth-transactions-and-capacity.aspx)

*   上传大于 32 MB 的 blob 时，存储客户端库默认将其分成 4 MB 的块。可以通过设置 CloudBlobClient.WriteBlockSizeInBytes 字段来更改块大小。当上传大于 32MB 的 blob 时，客户端库会将每个块作为单独的 PutBlock REST 请求上传，然后在最后使用 PutBlockList 提交所有块。每个 PutBlock 将计为 1 笔交易，最终的 PutBlockList 也将计为 1 笔交易。
*   对 blob 服务的单个 GetBlob 请求 = 1 个事务
*   对 blob 服务有 1 个请求的 PutBlob = 1 个事务
*   大型 Blob 上传，通过 PutBlock 产生 100 个请求，然后是 1 个用于提交的 PutBlockList = 101 个事务
*   总共使用 5 个请求（由于 4 个继续标记）列出大量 blob = 5 个事务

**Web 和 Worker 角色实例**：即使这些实例停止，资源仍会为您保留，您将继续付费。要停止付款，您需要减少实例数量或删除托管服务。

**带宽**：估算总是很困难，但您需要考虑：

*   您将要传输的数据类型
*   数据是否压缩？
*   您有多少（活跃）用户？
*   你也转移到北美和欧洲吗？或到其他地方（这些更贵！）
*   入口是免费的，同一数据中心内的通信也是免费的。您只需为离开数据中心的数据付费。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T14:57:39.833

@Sandrino 的好回答。让我添加更多的兴趣点。

*   上周存储交易价格刚刚下降了 10 倍，现在是每 100,000 笔交易一美分。与计算和存储成本相比，交易成本真的微不足道。从这个角度来看：想象一个 100MB 的文件，每天每秒上传 4MB 块。文件上传有 4 笔交易：(4x60x60x24x30) / 100,000 = 103 美分。
*   关闭给定角色时：假设您有一个 Web 角色，以及一个执行夜间处理的特定工作人员角色，并且您只需要工作人员角色，例如一小时。在那一小时内，您可以扩展到一定数量的实例。在一小时结束时，您*不能*将该角色减少到零实例；最低限度是每个角色一个实例。如果你有这样的模式，你最好把你的夜间处理放到一个单独的部署中（基本上是它自己的服务）。然后每天晚上，您在“夜间服务”上创建一个新部署 - 让它运行直到所有工作完成，然后删除部署。
*   如果计算成本对您来说变得沉重，并且您有多个角色（例如我刚刚给出的 web + worker 示例），您可以将功能组合到一个角色中。这些*角色*本质上是 Windows 2008 服务器虚拟机，因此没有什么可以阻止您创建多个线程、启动进程等。在单个角色中运行所有内容有一些扩展限制（例如，您的后台处理可能会在一小时内使 cpu 网站饿死）处理），但将来您总是可以将代码拆分为单独的角色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T19:03:28.483

我还想补充一点，如果您运行的是虚拟机实例而不是服务实例，那么您的 VMS 托管在 blob 存储中。

这可能意味着正常的操作系统磁盘 i/o 可能会花钱。

> 计算时间不包括与在 Windows Azure 虚拟机中运行的映像相关的任何 Windows Azure 存储成本。这些费用单独计费。

参考： http: [//www.windowsazure.com/en-us/pricing/details/](http://www.windowsazure.com/en-us/pricing/details/)

不确定是否有任何 MS 人员会阅读此内容，但他们可以清除它。

**会添加它作为评论，但觉得它足够重要，可以单独作为一个答案

# postgresql - PostgreSQL中的位置（字符串中的子字符串）是否区分大小写

> ID：11033386
> 
> 赞同：0
> 
> 时间：2012-06-14T12:49:29.550
> 
> 标签：postgresql

如果没有，我认为`lower(string)`可以用来进行不区分大小写的比较，但我不确定是否需要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:52:54.910

是的，它在 Postgres 中区分大小写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T12:51:54.730

是的，它区分大小写。

```
psql (9.1.4)

postgres=> 选择位置('f' in 'foo');
 位置
----------
        1
(1 行)

时间：200,830 毫秒
postgres=> 选择位置('F' in 'foo');
 位置
----------
        0
(1 行)

时间：0,327 毫秒
postgres=>

```

# nhibernate - 对 SQL Server 2008 R2 的 FluentNhibernate 支持

> ID：11033395
> 
> 赞同：1
> 
> 时间：2012-06-14T12:50:12.483
> 
> 标签：nhibernate, fluent-nhibernate, sql-server-2008-r2

我想用 SQL Server 2008 R2 实现一个 Fluent Nhibernate 应用程序。

我对 Fluent Nhibernate 1.2 是否支持 SQL Server 2008 R2 感到困惑。

如果支持将是什么配置。它看起来像下面吗？

```
var config = Fluently.Configure()
                .Database(
                    MsSqlConfiguration
                    .MsSql2008R2
                    .ConnectionString(@"Data Source=.\SQLEXPRESS;AttachDbFilename='FNHLD.mdf';Integrated Security=True;User Instance=True"))
                    .Mappings(m => m.FluentMappings.AddFromAssemblyOf<NHibernateRepository<T>>())
                .BuildConfiguration(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T14:47:07.810

实际上，我使用此配置连接到 SQL Server 2008 R2 SP1 数据库没有问题：

```
 var nhConfig = Fluently.Configure()
            .Database(MsSqlConfiguration.MsSql2008
                          .ConnectionString(connstr => connstr.FromConnectionStringWithKey("DBConnectionString"))
                          .ShowSql())//<-I use this for debug
            .Cache(c => c
                            .UseQueryCache()
                            .UseMinimalPuts()
                            .ProviderClass<HashtableCacheProvider>())//<--Cache Level Two
            .Mappings(m => m.FluentMappings
                               .AddFromAssemblyOf<Avaruz.Artemisa.Domain.Apm>())
            .CurrentSessionContext<WebSessionContext>()
            .BuildConfiguration(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T21:00:28.493

事实上，即使是 MsSql2005 方言也可以在 SQL Server 2008 R2 上运行。

即，如果您在 SQL Server 2008 数据库上使用 MsSql2005 方言，NHibernate 将无法使用 SQL Server 2008 新增的一些关于日期/时间的其他类型。

只是为了好玩，这里是2000-2012 SQL Server方言源代码的链接：

[MsSql2000](https://github.com/nhibernate/nhibernate-core/blob/master/src/NHibernate/Dialect/MsSql2000Dialect.cs)
[MsSql2005](https://github.com/nhibernate/nhibernate-core/blob/master/src/NHibernate/Dialect/MsSql2005Dialect.cs)
[MsSql2008](https://github.com/nhibernate/nhibernate-core/blob/master/src/NHibernate/Dialect/MsSql2008Dialect.cs)
[MsSql2012](https://github.com/nhibernate/nhibernate-core/blob/master/src/NHibernate/Dialect/MsSql2012Dialect.cs)

你可以看到那里的模式。MsSql2000 是一种主要的方言。MsSql2005 继承自 MsSql2005 并有几个覆盖。MsSql2008 继承自 MsSql2005，也很少有覆盖。MsSql2012 继承自 MsSql2008。

SQL Server R2 有点像服务包。数据库引擎本身没有太大变化，因此不需要单独的方言。使用 2005 或 2008 方言，你会没事的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T14:52:02.393

我也使用 MsSqlConfiguration.MsSql2008。浏览 2008R2 的发行说明，我看不到任何需要不同方言的功能。

# actionscript-3 - Flash AS3 TLF 文本（无法访问空对象引用的属性或方法。）

> ID：11033397
> 
> 赞同：1
> 
> 时间：2012-06-14T12:50:16.040
> 
> 标签：actionscript-3, flash, tlf

我有一个程序，我在其中为舞台创建了一个单例类，这样我就可以在我的其他类中访问它。

我还有一些其他符号，其中包含文本，因此需要在代码中修改文本。

我的问题是，每当我使用 TLF 文本而不是经典文本时，我的任何引用单例阶段类的类都会得到一个“`TypeError: Error #1009: Cannot access a property or method of a null object reference."`

我以前的程序可以很好地处理 TLF 文本，但这是我第一次在舞台上使用单例类，所以我猜它以某种方式涉及到这一点。

我在其他帖子中尝试了一些解决相关问题（例如发布设置）的解决方案，但到目前为止没有任何效果。

下面是第一个错误发生的地方：

```
// Constructor
    public function Zoom(object:MovieClip) {
        // Set the stage
        stage = StageManager.instance.stage;

        // Set the zoom object
        zoomObject = object;            

        // Add event listener for the mouse wheel
        stage.addEventListener(MouseEvent.MOUSE_WHEEL, mouseZoom); // ERROR OCCURS HERE

        if (Controls.instance.controls.zoomInBtn && Controls.instance.controls.zoomOutBtn) {
            Controls.instance.controls.zoomInBtn.addEventListener(MouseEvent.CLICK, zoomIn);
            Controls.instance.controls.zoomOutBtn.addEventListener(MouseEvent.CLICK, zoomOut);
        }
    } 
```

这是单例类：

```
package {
import flash.display.Stage;

// Singleton class so any other classes can access the stage.
public class StageManager {

    // Publicly accessible singleton instance
    public static var instance:StageManager = new StageManager();

    private var m_stage:Stage;

    // Getters and Setters
    public function set stage(stg:Stage):void {
        m_stage = stg;
    }

    public function get stage():Stage {
        return m_stage;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:54:04.317

首先，将 API 方法/属性名称用于您自己的类的属性/方法名称确实是不正确的。这让人很困惑。

其次，如果它抛出空错误，那么您尝试访问的属性的对象（阶段）为空，现在可能有很多原因，例如在设置阶段属性之前调用这行代码或更简单的阶段不可用被分配到舞台（现在你明白我为什么要为自己的类道具使用相同的名称了吗？）同样，可能是你的代码在 DisplayObject 的舞台属性可用之前执行（内容未添加到舞台）并且你的类不检查它是否不为空。

您显示的代码示例写得不好，即使是“单例”类也不是正确的单例类。

现在解决方案：

*   查看您的代码设计并更改它阅读有关设计模式的信息（至少对于单例）
*   跟踪 StyleManager 中的阶段值，以便查看是否以及何时设置了属性，还可以在 Zoom 构造函数中跟踪
*   始终使用 try catch 块或至少测试您的代码所依赖的对象是否存在

如下：

```
if(stage) 
{
    stage.addEventListener(MouseEvent.MOUSE_WHEEL, mouseZoom);
}
else
{
    trace("[!] Expected stage but got null");
} 
```

或者

```
try
{
    stage.addEventListener(MouseEvent.MOUSE_WHEEL, mouseZoom);
}
catch(err:*)
{
    trace("[!] Expected stage but got null\n"+err);
} 
```

*   切勿在您自己的类中使用 ActionScript API 使用的相同名称，以避免混淆并使调试更容易:)
*   如果您依赖舞台属性不为空，请使用以下代码段：

这与 FlashDevelop 生成新的 Main 类完全相同，并且效果很好：

```
if (stage) init();
else addEventListener(Event.ADDED_TO_STAGE, init, false, int.MAX_VALUE, true); 
```

和初始化处理程序

```
protected function init(e:Event = null):void
{
    removeEventListener(Event.ADDED_TO_STAGE, init);
    //do here whatever is needed when stage proeprty is NOT null
} 
```

此致

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-10T20:34:54.073

这个问题可能很古老，但我最近遇到了类似的问题，由于我对 TLF 缺乏经验，这非常令人困惑，无论如何它已被弃用，但我仍然需要使用可以相互流入的文本字段 - 足够简单，除非您正在使用 Flash。所以我很高兴为此使用 CS6。

*无论如何，我的解决方案只是从我的构造函数中删除事件侦听器并将其放置在第一帧的时间线中；舞台加载，一切正常——只有我的自尊因为没有深入了解以使其正常工作而受到伤害。*

我一直认为构造函数首先运行 - 并且以前从未遇到过将事件分配到那里的问题，也许现在我知道得更好，但不是很多。

这可能是因为加载 TLF 组件会在加载阶段时产生延迟？当然，舞台是先来的，一切都是它的孩子吗？疯狂！

# java - JavaFx 2 使用单列创建 TableView

> ID：11033404
> 
> 赞同：7
> 
> 时间：2012-06-14T12:50:37.647
> 
> 标签：java, layout, tableview, javafx-2

我正在尝试使用以下代码创建一个包含单列的表：

```
TableView<String> table = new TableView<String>();
table.getColumns().clear();
table.getColumns().add(new TableColumn<String, String>("City Name"));
table.setItems(cityList); 
```

但是，我得到一个表，其中包含“城市名称”列，后跟一个空白列

我是 JavaFx 的新手，所以可能有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-14T13:39:40.060

我记得在过去没有运气的情况下，我自己试图通过使用 css 属性来“删除”空白列。解决方法是，
- 手动设置首选项宽度`cityColumn`以覆盖整个空间：

```
TableColumn<String, String> cityColumn = new TableColumn<String, String>("City Name");
cityColumn.setPrefWidth(table.getPrefWidth() - 2); 
```

`-2`对于边框宽度。您也可以直接将列宽属性绑定到表格宽度属性，从而在调整表格宽度时自动更新列宽。请参阅此答案[https://stackoverflow.com/a/10152992/682495](https://stackoverflow.com/a/10152992/682495)。
或者，
- 将列调整大小策略设置为`CONSTRAINED_RESIZE_POLICY`：

```
table.setColumnResizePolicy(TableView.CONSTRAINED_RESIZE_POLICY); 
```

# windows - 线程 ID 是否总是适合四位十进制数字？

> ID：11033406
> 
> 赞同：1
> 
> 时间：2012-06-14T12:50:42.563
> 
> 标签：windows, winapi

我正在将日志语句写入文件，并希望在每一行前面加上生成语句的线程 ID。

看来 GetCurrentThreadId 函数总是返回一个数字 <= 9999。所以，我可以假设我总是可以将线程 ID 格式化为四位数字字符串吗？我想保持 id 简短且长度一致，以使日志文件更易于阅读。

GetCurrentThreadId 返回一个显然可能包含大数字的 DWORD。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:54:17.437

为什么不把它写成十六进制，那么它会很好地适合 8 位数字呢？

//编辑（不能数！）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T12:57:28.520

GetCurrentThreadID 的 MSDN 页面说：

```
the thread identifier uniquely identifies the thread throughout the system. 
```

因此，线程 ID 在整个系统中是唯一的，而不仅仅是您的进程，其中很有可能在某个时候返回一个大于 4 位十进制数的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T12:56:02.217

简短的回答：**没有**。

实际上对于 32 位应用程序，（虚拟）限制大约是 2k 线程。对于 64 位应用程序，它大约有 14k 个线程。

阅读这篇文章作为快速参考：http: [//blogs.technet.com/b/markrussinovich/archive/2009/07/08/3261309.aspx](http://blogs.technet.com/b/markrussinovich/archive/2009/07/08/3261309.aspx)

这是线程总数的限制（这是主要的内存问题，因为每个线程的堆栈），但是没有任何关于如何分配线程 ID 的规则（如果您的应用程序创建了很多短暂的线程，那么您*可能会*超出这个假设）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T12:58:43.800

给它另一个字符空间。它不会杀死你，正如你提到的，线程 ID 是一个 DWORD，因此*可能*更大。

# javascript - 如何在javascript中将事件添加到浏览器“保存文件”对话框

> ID：11033415
> 
> 赞同：3
> 
> 时间：2012-06-14T12:51:04.540
> 
> 标签：javascript, file, browser, dialog, save

我有以下代码：

```
 <input type="button" onclick="if(confirm('you wanna download?')){                                                                                                                            
 document.getElementById('formId').action = '../export_csv.php';                                                                                                                                                       
 document.getElementById('formId').submit();
 this.disabled = true; }"   /> 
```

如果我单击“确定”，浏览器“保存文件”对话框将出现在屏幕上。当用户在该对话框上按“是”时，我想添加一个警报。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:55:26.617

您可以使用以下代码打开保存对话框。

```
javascript:document.execCommand('SaveAs','1','fileName.txt')" 
```

# java - 非商业用途的库依赖兼容性

> ID：11033418
> 
> 赞同：12
> 
> 时间：2012-06-14T12:51:27.190
> 
> 标签：java, licensing, dependencies

我目前正在攻读研究生，重点是研究背景下的数据分析/信息学，并为全球研究社区开发实用工具，我的绝大多数目标用户都是计算机新手。换句话说，我的大多数用户不会费心（或无法）收集必要的依赖项并将它们放在他们的类路径中。为了避免人们忽略我的软件，我一直将它作为“fat-jar”分发，所有依赖项都包含在一个可执行文件中。

我一直在阅读一些关于软件许可的内容，并意识到如果不关注库的单个许可，这样做在法律上可能会很棘手。我在 StackOverflow（下面是一个完整的集合）上解决了许多问题，但最终变得越来越困惑。**请注意，我完全意识到还有许多其他关于软件许可的问题，但不是在自包含软件包的背景下，我在下面列出了许多很好的问题，这些问题提供了一些难题，但在我的设想。**

如果对此事有更多经验/了解的开发人员可以通过确认或否认以下陈述来阐明此事，我将不胜感激。我认为这对于那些不是程序员而是专业但越来越多地进入编程的人来说可能很有用。我的理解是：

*   只要您不重新分发依赖项，与您为自己的项目选择的许可证相比，它们拥有什么许可证并不重要。[不幸的是，这样做也意味着我会疏远/恐吓我的大部分用户群]

*   如果您要重新分发所有依赖项，那么您的项目许可证应该与您的依赖项兼容。[因此，作为开发人员，我必须了解每个依赖项的许可证详细信息？？]

*   GPL 是目前最严格的开源许可证（来自普通许可证），因此如果我使用 GPL 许可证下的库，我自己的项目也必须遵循 GPL，这在理论上可能与其他一些许可证相矛盾依赖。

*   假设我的项目在 GPL 下，该项目是非商业的这一事实并不重要，它也必须是开源的。[这在我的情况下相当棘手，因为算法和计算方法需要“新颖”才能发表]

我是否误解了或只是错过了一些重要的事情，或者这是对情况的一个很好的总结？鉴于我的情况，我是否还有其他可能没有在这里提到/想到的选项，例如是否可以避免与我的依赖项的许可证有关的问题？

* * *

参考：

[我应该关心大量依赖项吗？](https://stackoverflow.com/q/4419358/328725)

[哪些许可证相互兼容？](https://stackoverflow.com/q/4775488/328725)

[我在哪里可以找到开源许可证的权威概述？](https://stackoverflow.com/questions/458479/where-can-i-find-an-authoritative-overview-of-open-source-licences)

[如何选择开源许可证？](https://stackoverflow.com/q/41898/328725)

[搜索源代码的非商业许可](https://stackoverflow.com/q/1874956/328725)

[通过插件在闭源应用程序中使用 GPL 代码是否合法？](https://stackoverflow.com/q/141605/328725)

[如何判断我是否可以在商业应用程序中重复使用“免费”软件库？[关闭]](https://stackoverflow.com/q/137048/328725)

[正确应用开源许可证](https://stackoverflow.com/q/2468566/328725)（特别是 @Michael Aaron Safyan 的[这个答案）](https://stackoverflow.com/a/2468663/328725)

[如何找到适合我的项目的开源许可证？](https://stackoverflow.com/q/2303136/328725)

[如何使用开源许可证](https://stackoverflow.com/q/241540/328725)

[如何选择开源许可证？](https://stackoverflow.com/q/41898/328725)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T15:49:56.663

> 只要您不重新分发依赖项，与您为自己的项目选择的许可证相比，它们拥有什么许可证并不重要。

是的，这是真的……对于具有主流许可证的开源依赖项。但：

*   它迫使您的用户下载所有依赖项，这是一个坏主意。
*   对于专有依赖项（以及具有“疯狂”许可证的开源依赖项），许可证可能会禁止这样做，或者通过禁止用户做事来使用户变得困难（-er *）*。

> 如果您要重新分发所有依赖项，那么您的项目许可证应该与您的依赖项兼容。

是的。但这通常并不难。有一些地方可以找出哪些许可证与其他许可证兼容；例如 FSF 的 GPL 页面。

> [因此，作为开发人员，我必须了解每个依赖项的许可证详细信息？？]

是的。但是您可以通过仅使用具有安全许可证的依赖项来简化此操作。（而且大多数开源许可证都是。）

> GPL 是最严格的开源许可证（从常见的许可证中），因此如果我使用 GPL 许可证下的库，我自己的项目也必须在 GPL 下......

是的。但是，请注意 GPL 和 LGPL 之间存在很大差异。LGPL 没有这个限制。

> ...从理论上讲，这可能与其他依赖项的许可相矛盾。

理论上是的。实际上，GPL 允许使用具有大多数其他开源许可证的库。唯一的问题是其他库的许可证是否需要 GPL 禁止的东西；即喜欢对下游用户、打包者等设置**额外条件。**

> 假设我的项目在 GPL 下，该项目是非商业的这一事实并不重要，它也必须是开源的。

那是对的。

> [这在我的情况下相当棘手，因为算法和计算方法需要“新颖”才能发表]

我认为您正在从根本不应该成为问题的事情中提出一个大问题：

*   如果您担心其他人在您发布之前窃取您的想法，请推迟发布您的代码，直到您发布。这是普通常识......而不是许可问题。

*   如果算法和方法包含在您以前分发的软件中，我认为编辑/审稿人不会拒绝您的作品发表。就出版媒体而言，您的出版物必须是新颖的......

> ...是否可以避免与我的依赖项的许可证有关的问题？

*   您可以从头开始编写所有自己的代码，或者聘请其他人为您编写代码。（不现实）

*   您可以为所有依赖项使用商业软件，并为重新分发的权利付费。

*   您可以联系依赖项的版权所有者，并协商替代许可协议。（假设他们是可以联系的，并且愿意谈判。）

但是你不能**忽视**这个问题。

最重要的是，当您使用开源依赖项构建代码时，您将免费获得一些东西，但*交换*条件是您必须遵守规则作为回报。如果您不喜欢这些规则，请找到不涉及开源的其他方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T03:55:28.297

最大的问题是，如果您正在处理不使用任何常见开源许可证的软件。简而言之，如果这些许可证禁止重新分发他们的软件，那几乎可以停止争论。

您可以以这样一种方式打包您的软件，如果用户自己获得了适当的许可证，那么您可以让用户轻松地将他们的许可库合并到您的系统中（通过适当地更新您的类路径，也许将文件复制到一个已知的地方等）。结合良好的文档或自动化脚本，这可以减少使用这些库安装软件的用户负担。

如果你只使用开源许可软件，事情就简单多了。

正如您所说，GPL 是最严格的，但大多数 OSS 许可证都与 GPLv3 兼容。阿帕奇、BSD、麻省理工学院、MPL、X11/麻省理工学院。

而且，是的，您确实需要了解所有许可证，尤其是 GPL。如果可行并且您可以避免 GPL，那么所有这些问题都几乎消失了。如前所述，LGPL 远没有 GPL 严格，许多确实走这条路的库因此选择了 LGPL，但也有一些使用纯 GPL。

美好的是，如今的 OSS 社区已经相当成熟，即使在许可方面仍然有点分散，但仍然可以互操作。大多数人甚至不问这些问题并继续他们快乐的方式，但仍然设法避免麻烦。

但是，归结为三个概念：

*   如果您使用的是专有库，则您的选择在分发方面非常有限。

*   如果您使用的是 GPL 库，那么您的软件也应该 GPL。

*   如果以上都不是，根本不用担心。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T05:43:02.437

许可**很**重要，但如果你制作的开源、非商业软件不与商业软件直接竞争，那么有人会抱怨你可能滥用其中一个库许可证的风险非常接近于零（这样的投诉不会在法庭上走得太远，尽管您的里程可能会因您的“原籍国”而异）。

所以，不要太担心，坚持游戏精神：

*   如果您使用商业图书馆，请获得许可证（其中*很多*实际上都有免费的可再分发许可证用于开源项目）

*   如果您使用 GPL 库，请将您的项目设为 GPL（这就是您正在做的事情）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T14:40:47.830

抱歉，如果您使用专有库，这没有解决方案。

如果您使用免费的专有库，则“除非您与作者达成协议”，否则您不能以任何方式将其包含在您的软件中，客户端必须从作者的网页或存储库下载它们，否则您将重新分发库和招致侵犯版权。

类似的案例还有几个，最近[Java的Oracle in Linux。](http://www.h-online.com/open/news/item/Oracle-retires-licence-for-distributing-its-Java-with-Linux-1332835.html).

* * *

GPL 问题：

您的算法的一个可能的解决方案可能是将它放在一个没有任何依赖关系的单独库中并将其添加到您的主要“GPL”项目中，这是大多数公司用来做的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T13:32:22.493

我认为你的四点是正确的。

即使您的项目使用在重新分发方面相互矛盾的依赖项，也可能发生的一件事是您不分发程序，而是将其（或使用相关依赖项的部分）作为您自己托管的（Web-）服务提供服务器。然后你可以使用几乎所有你想要的依赖，甚至不需要开源任何东西。但请注意，某些许可证（主要是商业许可证）可能会限制服务器的使用。

# objective-c - CVPixelBufferRef的优化

> ID：11033421
> 
> 赞同：7
> 
> 时间：2012-06-14T12:51:37.240
> 
> 标签：objective-c, ios, avassetwriter

我正在做一个项目，在该项目中我从 UIImage 生成一个视频，代码是我在这里找到的，我现在正在努力优化它几天（对于大约 300 张图像，在模拟器上大约需要 5 分钟，并且由于内存而简单地在设备上崩溃）。

我将从今天的工作代码开始（我使用 arc）：

```
-(void) writeImageAsMovie:(NSArray *)array toPath:(NSString*)path size:(CGSize)size duration:(int)duration 
{
    NSError *error = nil;
    AVAssetWriter *videoWriter = [[AVAssetWriter alloc] initWithURL:[NSURL fileURLWithPath:path] fileType:AVFileTypeQuickTimeMovie error:&error];
    NSParameterAssert(videoWriter);

    NSDictionary *videoSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                               AVVideoCodecH264, AVVideoCodecKey,
                               [NSNumber numberWithInt:size.width], AVVideoWidthKey,
                               [NSNumber numberWithInt:size.height], AVVideoHeightKey,
                               nil];
    AVAssetWriterInput* writerInput = [AVAssetWriterInput
                                   assetWriterInputWithMediaType:AVMediaTypeVideo
                                   outputSettings:videoSettings];

    AVAssetWriterInputPixelBufferAdaptor *adaptor = [AVAssetWriterInputPixelBufferAdaptor assetWriterInputPixelBufferAdaptorWithAssetWriterInput:writerInput sourcePixelBufferAttributes:nil];
    NSParameterAssert(writerInput);
    NSParameterAssert([videoWriter canAddInput:writerInput]);
    [videoWriter addInput:writerInput];

    //Start a session:
    [videoWriter startWriting];
    [videoWriter startSessionAtSourceTime:kCMTimeZero];

    CVPixelBufferRef buffer = NULL;
    buffer = [self newPixelBufferFromCGImage:[[self.frames objectAtIndex:0] CGImage]];

    CVPixelBufferPoolCreatePixelBuffer (NULL, adaptor.pixelBufferPool, &buffer);

    [adaptor appendPixelBuffer:buffer withPresentationTime:kCMTimeZero];

    dispatch_queue_t mediaInputQueue =  dispatch_queue_create("mediaInputQueue", NULL);
    int frameNumber = [self.frames count];

    [writerInput requestMediaDataWhenReadyOnQueue:mediaInputQueue usingBlock:^{
        NSLog(@"Entering block with frames: %i", [self.frames count]);
        if(!self.frames || [self.frames count] == 0)
        {
            return;
        }
        int i = 1;
        while (1)
        {
            if (i == frameNumber) 
            {
                break;
            }
            if ([writerInput isReadyForMoreMediaData]) 
            {
                freeMemory();
                NSLog(@"inside for loop %d (%i)",i, [self.frames count]);
                UIImage *image = [self.frames objectAtIndex:i];
                CGImageRef imageRef = [image CGImage];
                CVPixelBufferRef sampleBuffer = [self newPixelBufferFromCGImage:imageRef];
                CMTime frameTime = CMTimeMake(1, TIME_STEP);

                CMTime lastTime=CMTimeMake(i, TIME_STEP); 

                CMTime presentTime=CMTimeAdd(lastTime, frameTime);       

                if (sampleBuffer) 
                {
                    [adaptor appendPixelBuffer:sampleBuffer withPresentationTime:presentTime];
                    i++;
                    CVPixelBufferRelease(sampleBuffer);
                } 
                else 
                {
                    break;
                }
            }
        }

        [writerInput markAsFinished];
        [videoWriter finishWriting];
        self.frames = nil;

        CVPixelBufferPoolRelease(adaptor.pixelBufferPool);

    }];
} 
```

现在获取像素缓冲区的功能，我正在努力：

```
- (CVPixelBufferRef) newPixelBufferFromCGImage: (CGImageRef) image
{
    CVPixelBufferRef pxbuffer = NULL;

    int width = CGImageGetWidth(image)*2;
    int height = CGImageGetHeight(image)*2;

    NSMutableDictionary *attributes = [NSMutableDictionary dictionaryWithObjectsAndKeys:[NSNumber kCVPixelFormatType_32ARGB], kCVPixelBufferPixelFormatTypeKey, [NSNumber numberWithInt:width], kCVPixelBufferWidthKey, [NSNumber numberWithInt:height], kCVPixelBufferHeightKey, nil];
    CVPixelBufferPoolRef pixelBufferPool; 
    CVReturn theError = CVPixelBufferPoolCreate(kCFAllocatorDefault, NULL, (__bridge CFDictionaryRef) attributes, &pixelBufferPool);
    NSParameterAssert(theError == kCVReturnSuccess);
    CVReturn status = CVPixelBufferPoolCreatePixelBuffer(NULL, pixelBufferPool, &pxbuffer);
    NSParameterAssert(status == kCVReturnSuccess && pxbuffer != NULL);

    CVPixelBufferLockBaseAddress(pxbuffer, 0);
    void *pxdata = CVPixelBufferGetBaseAddress(pxbuffer);
    NSParameterAssert(pxdata != NULL);

    CGColorSpaceRef rgbColorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = CGBitmapContextCreate(pxdata, width,
                                             height, 8, width*4, rgbColorSpace, 
                                             kCGImageAlphaNoneSkipFirst);
    NSParameterAssert(context);
    CGContextDrawImage(context, CGRectMake(0, 0, width, 
                                       height), image);
    CGColorSpaceRelease(rgbColorSpace);
    CGContextRelease(context);

    CVPixelBufferUnlockBaseAddress(pxbuffer, 0);

    return pxbuffer;
} 
```

第一个奇怪的事情：正如你在这个函数中看到的，我必须将宽度和高度乘以 2，否则结果视频全乱了，我不明白为什么（如果有帮助，我可以发布截图；像素似乎来自我的图像，但宽度不正确，视频的半底部有一个大的黑色方块）。

另一个问题是它需要大量的内存。我认为像素缓冲区不能很好地释放，但我不明白为什么。

最后，它很慢，但是我有两个想法可以改进它，但我没有使用。

*   首先是避免使用 UIImage 来创建我的像素缓冲区，因为我自己使用 (uint8_t *) 数据生成 UIImage。我尝试使用“CVPixelBufferCreateWithBytes”，但它不起作用。这是我的尝试方法：

    ```
    OSType pixFmt = CVPixelBufferGetPixelFormatType(pxbuffer);
    CVPixelBufferCreateWithBytes(kCFAllocatorDefault, width, height, pixFmt, self.composition.srcImage.resultImageData, width*2, NULL, NULL, (__bridge CFDictionaryRef) attributes, &pxbuffer); 
    ```

（参数与上述函数相同；我的图像数据以每像素 16 位编码，我找不到一个好的 OSType 参数来提供给函数。）如果有人知道如何使用它（也许是16 位/像素数据不可能？），这将帮助我避免真正无用的转换。

*   第二件事是我想为我的视频避免 kCVPixelFormatType_32ARGB。我想使用更少位/像素的东西会更快，但是当我尝试它时（我已经尝试了所有 kCVPixelFormatType_16XXXXX 格式，使用 5 位/组件和 kCGImageAlphaNoneSkipFirst 创建的上下文），要么它崩溃，要么生成视频不包含任何内容（使用 kCVPixelFormatType_16BE555）。

我知道我只在一篇文章中问了很多问题，但我有点迷失在这段代码中，我尝试了很多组合，但没有一个能奏效......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-11T16:05:28.247

`I have to multiply the width and height by 2, otherwise, the result video is all messed up, and I can't understand why`

点与像素？高 dpi 视网膜屏幕每点的像素数是其两倍。

# audio - Windows 上的 Kinect 音频

> ID：11033425
> 
> 赞同：1
> 
> 时间：2012-06-14T12:51:57.540
> 
> 标签：audio, kinect

有没有办法在不使用官方 MS SDK 的情况下在 Windows 上访问 Kinect 的麦克风阵列？我知道它在 OpenNI 中不起作用，而且它似乎永远不会起作用。我还尝试了 OpenKinect/libfreenect 库，但我无法使用音频支持进行编译，只有没有它。

我还没有找到任何在 Windows 上使用 Kinect 录制音频的示例（当然 MS SDK 除外）。这甚至可能吗？也许有一些类似于从 OpenNI 控制 Kinect 电机的解决[方法](http://groups.google.com/group/openni-dev/browse_thread/thread/19bba04f8cb743db)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:14:55.880

据我了解，Kinect 只是显示为多通道音频输入设备，您应该能够直接使用[WASAPI](http://msdn.microsoft.com/en-us/library/windows/desktop/dd371455%28v=vs.85%29.aspx)或[DirectSound](http://msdn.microsoft.com/en-us/library/windows/desktop/ee416960%28v=vs.85%29.aspx)访问它，而无需 Kinect SDK。

您还可以使用像[PortAudio](http://www.portaudio.com/)这样的跨平台 API 。

# php - 文本计数问题

> ID：11033426
> 
> 赞同：2
> 
> 时间：2012-06-14T12:52:06.380
> 
> 标签：php, html

我在尝试使用按钮和文本文件来保存 PHP 时遇到问题。我在我的代码中看不到问题。

```
<!DOCTYPE html>
<html>
 <head>
 <meta charset="utf-8">
 <script src="http://code.jquery.com/jquery-latest.js"></script>
 </head>
 <body>
   <div id="p">Click here</div>
   <div id="results"></div>
<script>
$('#p').click(function()
{
   $('#results').load("count.php");
});
</script>
 </body>
</html> 
```

count.php 包含以下内容：

```
 <?php

    $clicks = file_get_contents("clicks.txt");
    $clicks++;

        $fp = fopen("clicks.txt", "w+");
        fwrite($fp, $clicks);
        fclose($fp);

//give the count to the user
echo "result: $clicks";

    ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T13:32:15.647

从 OP 看来，您希望为所有用户保留和累积这些数据，因此需要一个服务器端组件。

这是我的看法：
HTML

```
<html>
    <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    </head>
    <div id="p">Click here</div>
    <div id="results"></div>
    <script>
    $('#p').click(function()
    {
        $.ajax("count.php", {
                complete: function(jqXHR, status) {
                    $("#results").text(jqXHR.responseText);
                }
            })
    });
    </script>
    </body>
</html> 
```

PHP

```
<?php
   $clicks = intval(file_get_contents("clicks.txt"));
    $clicks++;

        $fp = fopen("clicks.txt", "w+");
        fwrite($fp, $clicks);
        fclose($fp);

//give the count to the user
echo "result: $clicks"; 
```

请注意 php 是相同的，但我现在从文件中获取 $clicks 值后将其更改为整数。

您还需要确保服务器的文件是读/写的……在 linux 中，您只需执行以下操作：

```
sudo chown -R www-data:www-data /var/www
sudo chmod -R g+rw /var/www 
```

使您的`www/`目录（或将其更改为您的 Apache（？）服务器使用的目录..）可由服务器读取/写入（这可能是矫枉过正，您可以使用相同的方法定位特定文件，只需删除`-R`（递归）标志）。

我在本地测试了这个设置，它对我有用，祝你好运！

编辑：只是很好......

这是 JS 的非 jQuery 解决方案（这不适用于所有浏览器，特别是较旧的 IE 版本，我会让你处理这些：P）

```
var p_btn = document.getElementById('p'),
    results = document.getElementById('results');
p_btn.addEventListener('click', function() {
    var xhr = new XMLHttpRequest();
    xhr.open('GET','count.php',false);
    xhr.onreadystatechange = function() {
        if( xhr.readyState === 4 && xhr.status === 200 ) {
            while(results.hasChildNodes()) {
                results.removeChild(results.lastChild);
            }
            results.appendChild(document.createTextNode(xhr.responseText));
        }
    }
    xhr.send();

}, false);
// enjoy! 
```

# [现场演示](http://rlemon.net63.net/)

*忽略从服务器吐出的添加代码....该死的免费主机*

# html - 是否可以使用html和css制作一个不是圆形或方形的div？

> ID：11033427
> 
> 赞同：1
> 
> 时间：2012-06-14T12:52:17.007
> 
> 标签：html, css

我收到了一个设计，我很确定它是一个 Flash 网站，但该公司确信它在 html 中是可行的，[设计](http://tinypic.com/r/zwmibl/6) 任何反馈都会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:55:24.260

这确实是可行的，但是如果您打算支持较旧的浏览器，例如 IE8，则必须使用透明的 PNG 图像作为元素的背景，以便在元素上创建倾斜效果。

如果您不需要支持较旧的浏览器，可以查看[CSS3 transform](https://developer.mozilla.org/en/CSS/transform)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:55:12.107

为这些背景制作图像，并将它们制作为您希望在其上呈现内容的 div 的背景图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:01:35.523

你能做这样的事情吗：

```
 #parallelogram {
      width: 130px; 
      height: 75px;
      background: pink;
      /* Skew */
      -webkit-transform: skew(20deg); 
      -moz-transform: skew(20deg); 
      -o-transform: skew(20deg);
      transform: skew(20deg);
   } 
```

==编辑==

好的，所以取消倾斜文本部分：

```
<div style="width: 130px; 
      height: 75px;
      background: pink;
      /* Skew */
      -webkit-transform: skew(20deg); 
      -moz-transform: skew(20deg); 
      -o-transform: skew(20deg);
      transform: skew(20deg);">
    <div style=" margin:2em;
      -webkit-transform: skew(-20deg); 
      -moz-transform: skew(-20deg); 
      -o-transform: skew(-20deg);
      transform: skew(-20deg);
    ">inner text</div>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T13:14:48.180

你也可以这样做：http: [//jsfiddle.net/vYU7N/2/](http://jsfiddle.net/vYU7N/2/)

它使用不同大小的边框来创建对角线。

```
#left{
  position:absolute;
  border-right:200px solid #0080bf;
  border-top:500px solid transparent;
  left:-200px;
  top:0;
}

#right{
  position:absolute;
  border-left:200px solid #0080bf;
  border-bottom:500px solid transparent;
  right:-200px;
  top:0;
}

#container{
  position:relative;
  width:400px;
  height:460px;
  margin-left:250px;
  background:#0080bf;
  padding:20px;
  color: white;
} 
```

这需要一点点调整。在 Chrome/IE8 中测试和工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T13:31:37.410

我会使用[http://raphaeljs.com/](http://raphaeljs.com/)非常通用，不应该给你的网站增加太多的“重量”

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-10-31T05:25:39.613

您可以使用“剪辑路径”来塑造特殊元素。查看更多：[https ://sarasoueidan.com/blog/css-shapes/](https://sarasoueidan.com/blog/css-shapes/)

# php - 尽管增加了内存限制，但内存不足

> ID：11033430
> 
> 赞同：0
> 
> 时间：2012-06-14T12:52:31.563
> 
> 标签：php, memory

当我使用 php 语言为大数据执行一些脚本时，例如导出数据、提取和打印数据，出现错误：

```
Fatal error: Out of memory (allocated 493617152) (tried to allocate 345571051 bytes) 
```

虽然我通过以下指令增加了脚本中的内存：

```
ini_set('memory_limit', '3072M'); 
```

为了更加放心，我什至将 php.ini 文件中 memory_limit 的值修改为 3072M：

```
memory_limit=3072M 
```

所用服务器上的 RAM 大小为 4GB。

那里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:56:29.737

`ini_set('memory_limit', '3072M');`被简单地忽略：没有脚本可以增加它自己的内存限制——对于任何共享的虚拟主机来说都是一个很好的攻击向量！

**编辑**

如果您从命令行运行它，请尝试 php -d memory_limit=3072M /path/to/file

如果您从网络服务器运行它，请编辑 php.ini、-htaccess 或安装所需的任何内容

# sql - 为什么 IDENTITY 优先于 GUID 作为数据仓库的主键？

> ID：11033435
> 
> 赞同：3
> 
> 时间：2012-06-14T12:52:40.903
> 
> 标签：sql, guid, data-warehouse

我爱我的 GUID。然而，最近我一直在做一些研究来了解主键的 IDENTITY 的实际优点/缺点，我发现[这篇文章](http://databases.aspfaq.com/database/what-should-i-choose-for-my-primary-key.html)很好地总结了它。

作者在文章中写道：

> *   对数据仓库非常有用；

作为使用 IDENTITY over GUID 的优点之一。

我会理解，对于特别大的数据库，就像数据仓库一样，大小确实很重要——但似乎还有其他原因，本文未能解释。所以我问：

*为什么 GUID 对日期仓储来说不是一个好主意？*

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-14T12:56:32.420

GUID 似乎是您的主键的自然选择 - 如果您真的必须，您可能会争辩将它用于表的 PRIMARY KEY。我强烈建议**不要**使用 GUID 列作为**clustering key**，SQL Server 默认会这样做，除非您明确告诉它不要这样做。

您确实需要将两个问题分开：

1)**主键**是一个逻辑构造 - 唯一且可靠地标识表中每一行的候选键之一。这可以是任何东西，真的 - 一个 INT、一个 GUID、一个字符串 - 选择对您的场景最有意义的东西。

2)**聚集键**（在表上定义“聚集索引”的一列或多列）——这是一个与*物理*存储相关的东西，在这里，一个小的、稳定的、不断增长的数据类型是你最好的选择——INT或 BIGINT 作为您的默认选项。

默认情况下，SQL Server 表上的主键也用作集群键——但不必这样！在将以前的基于 GUID 的主键/集群键分解为两个单独的键——GUID 上的主（逻辑）键和单独`INT IDENTITY(1,1)`列上的集群（排序）键时，我个人看到了巨大的性能提升。

正如金伯利·特里普（ [Kimberly Tripp](http://www.sqlskills.com/BLOGS/KIMBERLY/post/GUIDs-as-PRIMARY-KEYs-andor-the-clustering-key.aspx)）——索引女王——和其他人多次声明的那样——`GUID`因为集群键不是最优的，因为由于它的随机性，它会导致大量的页面和索引碎片，并且通常会导致性能不佳。

是的，我知道 -`newsequentialid()`在 SQL Server 2005 及更高版本中存在 - 但即使这样也不是真正的和完全顺序的，因此也会遇到与 - 一样的问题`GUID`- 只是稍微不那么突出。

然后还有另一个问题需要考虑：表上的集群键也将添加到**表上每个非聚集索引**的每个条目中 - 因此您真的希望确保它尽可能小。通常，具有 2 亿以上行的 INT 对于绝大多数表来说应该足够了 - 与作为集群键的 GUID 相比，您可以在磁盘和服务器内存中节省数百兆字节的存储空间。

快速计算 - 使用 INT 与 GUID 作为主键和聚类键：

*   具有 1'000'000 行的基表（3.8 MB 与 15.26 MB）
*   6 个非聚集索引（22.89 MB 与 91.55 MB）

**总计：25 MB 与 106 MB** - 这只是在一张桌子上！

更多值得深思的东西——金伯利·特里普（Kimberly Tripp）的优秀作品——读一读，再读一遍，消化一下！这是 SQL Server 索引的福音，真的。

*   [GUID 作为 PRIMARY KEY 和/或集群键](http://www.sqlskills.com/BLOGS/KIMBERLY/post/GUIDs-as-PRIMARY-KEYs-andor-the-clustering-key.aspx)
*   [聚集索引辩论仍在继续](http://sqlskills.com/BLOGS/KIMBERLY/post/The-Clustered-Index-Debate-Continues.aspx)
*   [不断增加的聚类键 - 聚类索引辩论............再次！](http://www.sqlskills.com/BLOGS/KIMBERLY/post/Ever-increasing-clustering-key-the-Clustered-Index-Debateagain!.aspx)
*   [磁盘空间很便宜——这**不是**重点！](http://www.sqlskills.com/BLOGS/KIMBERLY/post/Disk-space-is-cheap.aspx)

马克

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-14T13:03:47.563

IDENTITY 字段创建小而漂亮的索引。它们也是 SEQUENTIAL，这意味着为它们创建的索引比常规 GUID 键索引的碎片更少。使用 SEQUENTIAL GUID 将使您更接近这种行为，但它仍然有其缺点。GUID 的一个优点是即使在数据库中它也往往是唯一的，但它在大多数应用程序中会影响性能和空间。

GUID 优点 在每个表、每个数据库、每个服务器中都是唯一的 允许轻松合并来自不同数据库的记录 允许在多个服务器之间轻松分发数据库 您可以在任何地方生成 ID，而不必往返于数据库 大多数复制方案无论如何都需要 GUID 列

GUID 缺点 它比传统的 4 字节索引值大 4 倍；如果您不小心，这可能会对性能和存储产生严重影响 调试繁琐（其中 userid='{BAE7DF4-DDF-3RG-5TY3E3RF456AS10}'） 生成的 GUID 应该部分顺序以获得最佳性能（例如，newsequentialid() on SQL 2005) 并启用聚集索引

另外，要专门回答您的问题：我不认为您所引用的文章说“GUID 对于数据仓库来说是个坏主意”，而是说“身份”字段在数据仓库中比自然键更有用。但是，如果您在数据仓库中存储大量记录，由于上面的索引投诉，您将通过使用 IDENTITY 列而不是 GUID 获得更好的性能和更小的存储需求，我会说这是主要缺点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T12:54:04.153

使用 4 字节整数的主要原因是您尝试将行大小保持在最小。鉴于一个事实表可以包含 1 亿行，每行节省 12 个字节是一个可观的节省。

当然，这假设您的行数少于 2^31 - 1...

此外，插入标识列（使用默认聚集索引）不会导致页面拆分，而使用 GUID 列上的聚集索引插入会导致页面拆分。

参考：[SQL Server：可以使用唯一标识符（GUID）作为主键吗？](http://mitch-wheat.blogspot.com.au/2011/08/sql-server-is-it-ok-to-use.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T09:01:44.187

虽然严格来说代理/事实 ID 键应该是匿名且无意义的，但我发现，对于非常大的事实，报告基于大范围的日期，使日期的代理键成为表示日期的整数（例如 20120830）允许您可以在不实际加入日历维度的情况下运行查询。您将无法使用 GUID 执行此（有问题的）技巧。我还发现在维度中拥有一组未知成员很有用，例如在日历维度中，0 的代理表示“日期尚不可用”，-1 表示“未知”，-2 可能表示“迟到的日期” -即晚于日历范围内的最大日期。-3 可能表示“早期日期”等。使用 GUID 可能会出现问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T12:57:43.807

读了你的问题后，我有了一些想法

1.  GUID 主要用于 MS 世界.. 在我 12 多年的 DWH exp 中没有见过 GUID ......

2.  Identity 列很可能会成为表的代理键，让它们自动递增会更有意义...我不确定 GUID 是否可以为我们提供这种功能...

3.  索引数字列比索引字母数字列要快得多。基于数字列的索引更小，访问速度更快……

hth

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-14T12:58:58.463

因为在标识上的索引比在 GUID 上的效率更高。

# php - 从原始 mysql 文件创建一个 sql 文件

> ID：11033441
> 
> 赞同：0
> 
> 时间：2012-06-14T12:52:54.257
> 
> 标签：php, mysql, sql, database, phpmyadmin

我从数据库目录复制了我网站的原始 MySQL 文件，因为我的 phpmyadmin 不起作用。如何从所有 db 文件创建 sql 或 csv 文件，然后将它们导入旧服务器的 phpMyadmin？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:59:17.167

永远不要做这样的“备份”。

您将需要创建文件的 mysql 服务器的完全相同版本（或非常相似）。

安装 MySQL 服务器并将文件复制到数据目录下的文件夹中（**当 mysql 尚未运行或先停止它**）。

然后启动服务器并检查日志。如果里面没有致命错误，你赢了。

此外，如果表是由 InnoDB 引擎创建的，您还需要事务日志文件。也许您根本无法正确恢复它。

下一次，最好的方法是使用 mysqldump 来避免做一些魔术。

**更新：**

假设您的用户名是 dbuser，密码是 dbpass，您的数据库名为 mydb。然后您可以通过从运行 mysql 的服务器发出以下命令来创建完整的可靠备份：

```
mysqldump -udbuser -pdbpass mydb > /path/to/new/backupfile.sql 
```

在此之后，您可以通过发出以下命令将 sql 文件导入其他 mysql 服务器：

```
mysql -udbuser -pdbpass mydb <  /path/to/new/backupfile.sql 
```

一些详细的文章在[这里](http://www.mydigitallife.info/how-to-backup-and-restore-export-and-import-mysql-databases-tutorial/)

也看看这里：[https ://stackoverflow.com/questions/2707930/mysql-db-import-export-command-line-in-windows](https://stackoverflow.com/questions/2707930/mysql-db-import-export-command-line-in-windows)

一些进一步的阅读：

*   [http://dev.mysql.com/doc/refman/5.0/en/replication-howto-rawdata.html](http://dev.mysql.com/doc/refman/5.0/en/replication-howto-rawdata.html)
*   [http://www.igvita.com/2007/10/10/hands-on-mysql-backup-migration/](http://www.igvita.com/2007/10/10/hands-on-mysql-backup-migration/)

# c++ - 为什么我的程序设计为用完 RAM 和 CPU 不使用所有 RAM 和 CPU？

> ID：11033442
> 
> 赞同：2
> 
> 时间：2012-06-14T12:52:54.557
> 
> 标签：c++, windows

```
#include <iostream>
#include <cassert>
#include <vector>
#include <ctime>
#include <cstdlib>
#include <Windows.h>

using namespace std;

char randomLetter()
{
    srand(time(0));
    char rValue;

    while(1)
    if((rValue=(rand()/129)) > 31) 
        return rValue;
}

int main()
{       
    vector<char> meegaString;

    for(int i=0; i < 10000000000; i++)
    {   
        meegaString.push_back(randomLetter());

                if(!(i%10000000)) 
            cout<<"There are: " <<i+1<<" chars in the list"<<endl;

    }

    system("pause");
    return 0;
} 
```

运行此程序之前的 RAM 使用量约为 2500/8000 MB。当涉及到 3200 时，会抛出以下异常：

> 资源 gormandizer.exe 中 0x773c15de 处的未处理异常：Microsoft C++ 异常：内存位置 0x0045f864 处的 std::bad_alloc..

1) 为什么这个程序没有填满整个可用内存，尽管它是在 64 位操作系统上运行的？

2) 为什么只有 26% 的处理器（英特尔酷睿 i5）在使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T13:14:05.100

1.  如前所述，向量的元素是连续存储的。此外，根据您的实现中使用的内存分配算法`std::vector`，它可能会尝试提前预分配内存；分配比用于减少`malloc`/`new`调用次数更多的内存。因此，它可能会请求比 32 位操作系统支持更多的内存（这可以解释为什么 64 位进程可以工作，但 32 位进程不会，尽管有足够的内存可用的）。

2.  您的进程在 4 个内核中的一个上运行，并且非常繁忙，因此它占用了大约 25% 的 CPU 时间。其他过程将弥补其余部分。

另请参阅：[关于向量内存分配的智能](https://stackoverflow.com/questions/6804568/being-smart-about-vector-memory-allocation)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T15:41:12.197

anthony-arnold 的回答并没有错，如果我们对他的措辞采取一些自由，但仍然缺少一些东西。

正如其他人所提到的，如果您的 Core i5 是四核（i5 都是四核吗？），那么 25% 的人可能表明其中一个内核（即您的进程所在的内核）可能几乎 100% 忙，并且其他的大多是闲置的。与 anthony-arnold 的回答相反，25% 并不表示其他进程占用了另外 75%，而是说其他 75% 的可用 CPU 时间只是浪费了（空闲）。同样，如果您的 CPU 是四核，没有多线程测试应用程序，您的测试应用程序将无法消耗超过整体的 25%。

如果您正在寻找内存空间耗尽、折扣内存分配碎片和其他开销，那么您找到了。正如其他人所建议的那样，您的应用程序似乎已构建为 32 位应用程序。即使在 64 位操作系统上运行，您的应用程序也永远无法处理超过 32 位地址空间可以容纳的限制，即 4Gb。即便如此，还有很多其他开销，包括为操作系统保留的虚拟地址空间、程序和共享库空间、堆栈空间、分配给其他事物的堆空间以及堆空间开销。所以你的 meegaString 向量永远不会接近完整的 4Gb，甚至可能不会接近 2Gb（如果构建为大地址空间感知应用程序，它可能会超过 2Gb）。

现在关于 anthony-arnold 提到的“前向分配”点：所有 STL 容器都承诺摊销操作时间。std::vector 类承诺，平均而言（即摊销），push_back() 操作将是恒定时间（即 O(1)），这意味着随着其内容变得越来越大，执行 push_back() 将不需要更长的时间来做（如果确实如此，那将是 O(n)）。有时执行 push_back() 需要的时间远超过 O(1)，因为有时 push_back() 会导致容器的数据超出其当前分配的空间，它需要执行重新分配并将其当前内容移动到新位置，并删除其旧内容。在操作系统的配合下，一个良好实现的自定义编写的 STL 实现甚至可以做得更好，通过使用虚拟内存和 MMU 进行技巧，这样它就不必实际移动内容，它只是告诉操作系统告诉 MMU 制作数据虚拟内存页面映射到新位置，但这完全是另一个问题，无论如何您都不必担心，因为它会在幕后发生。在任何情况下，是的，std::vector 类必须“预分配”一个比它进行新分配时所需的更大的内存块，因为这是它可以承诺 O(1) push_back() 时间的唯一方法。如果每次执行 push_back() 时都必须将内容移动到新分配的缓冲区，那么 push_back() 的时间复杂度将是 O(n)，而不是 O(1)，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:56:04.207

[矢量](http://cplusplus.com/reference/stl/vector/)类模板实现了一个动态数组，它需要一块连续的内存。

关闭主题 - 为此目的， 可以使用[列表容器，但](http://cplusplus.com/reference/stl/list/)[堆栈](http://cplusplus.com/reference/stl/stack/)似乎是最好的解决方案。但是，无论是使用列表还是堆栈，它仍然会因相同的错误而崩溃（现在接近 4600 MB）。看起来很相似，但现在不是选择了无效数据结构的错。这是因为 32 位应用程序的可用内存非常有限，所以为了完全填满它，在 x64 平台上编译这个程序。

```
#include <iostream>
#include <stack>
#include <ctime>
#include <cstdlib>

using namespace std;

char randomLetter()
{
    srand(time(0));
    char rValue;

    while(1)
    if((rValue=(rand()/129)) > 31) 
        return rValue;
}

int main()
{       
    stack<char> meegaString;

    for(int i=0; i < 10000000000; i++)
    {   
        meegaString.push(randomLetter());

                if(!(i%10000000)) 
            cout<<"There are: " <<i+1<<" chars in the list"<<endl;

    }

    system("pause");
    return 0;
} 
```

# c# - 手柄鼠标右键双击形状

> ID：11033444
> 
> 赞同：5
> 
> 时间：2012-06-14T12:52:54.807
> 
> 标签：c#, wpf, mouseevent, shape, double-click

我如何处理`Mouse Right Button Double Click`a 的事件[`Shape`](http://msdn.microsoft.com/en-us/library/system.windows.shapes%28v=VS.95%29.aspx)？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T13:10:20.047

您是否正在寻找一种检测形状双击的方法？在这种情况下，您应该检查[MouseRightButtonDown](http://msdn.microsoft.com/en-us/library/system.windows.uielement.mouserightbuttondown)事件的[ClickCount](http://msdn.microsoft.com/en-us/library/system.windows.input.mousebuttoneventargs.clickcount)属性。此属性提供元素被单击的次数。文档页面上的示例检查单击、双击和三次单击：

```
private void OnMouseDownClickCount(object sender, MouseButtonEventArgs e)
{
    // Checks the number of clicks.
    if (e.ClickCount == 1)
    {
        // Single Click occurred.
        lblClickCount.Content = "Single Click";
    }
    if (e.ClickCount == 2)
    {
        // Double Click occurred.
        lblClickCount.Content = "Double Click";
    }
    if (e.ClickCount >= 3)
    {
        // Triple Click occurred.
        lblClickCount.Content = "Triple Click";
    }
} 
```

# php - Photoshop 中的 PHP 过滤器

> ID：11033445
> 
> 赞同：1
> 
> 时间：2012-06-14T12:53:02.577
> 
> 标签：php, image-processing, imagemagick

我的客户想要对用户上传到服务器的一些图片应用一个过滤器（她将其描述为 photoshop 中的粗糙柔和过滤器，但我相当确定她真的想要某种铅笔素描图片）。这里有一个限制：它需要与任何智能手机和计算机一起使用（所以这里没有闪光灯。真可惜）。好的部分是它可以完全在服务器上完成，而不向用户显示结果图片（因此它可以由外部应用程序处理，并且不需要“那么快”）。

服务器正在运行 linux，如果尚未安装 Imagemagick，我确信我可以安装它，并且可能运行其他自定义脚本（我的客户端尚未确认），例如 c++ 应用程序等。但是，当然，只使用 PHP 会是一个加分项（我闻到了共享服务器的味道）。

我不会要求任何人为我编写过滤器（当然，客户甚至不知道她想要哪个），但我实际上是在问您是否认为可以这样做，以及是否有任何包装库做所有的工作，或者我需要自己做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T14:21:31.847

Imagemagick 内置了很多过滤器等。我在我的网站上有一个大部分的例子：[http ://www.rubblewebs.co.uk/imagemagick/operator.php](http://www.rubblewebs.co.uk/imagemagick/operator.php)

php 中内置了一个名为 Imagick 的 API，目前我正在为它编写一些示例，但使用最少的文档会有点痛苦。这是在 Imagick 中使用草图运算符的示例：

![想象一下草图图像](../Images/8f8cb565e668e3e20b99df4178f9b4f1.png)

上述效果的 imagick 文档：http: [//php.net/manual/en/imagick.sketchimage.php](http://php.net/manual/en/imagick.sketchimage.php)

在我的 Imagemagick 示例中，我使用的是灰度版本，但它应该与上图类似。

现在有一些使用 GD 的过滤器，但我还没有尝试过： http: [//php.net/manual/en/function.imagefilter.php](http://php.net/manual/en/function.imagefilter.php)

# javascript - 锚点时书签不起作用

> ID：11033446
> 
> 赞同：-1
> 
> 时间：2012-06-14T12:53:05.710
> 
> 标签：javascript, html

我在创建 JS 小书签时遇到问题，

我有以下内容，当单击时效果很好，只有当我将它包装在锚标签中时它才不再起作用......

```
javascript:(function(){document.body.innerHTML += '<img src="http://www.dannemann.com/images/lensflarePhilosophy.png" style="position: fixed; left: 10px; bottom: 10px; z-index: 1000">';})(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:57:10.960

将括号向右移动：

```
javascript:(function(){
  document.body.innerHTML += 
   '<img src="http://www.dannemann.com/images/lensflarePhilosophy.png" '+
   'style="position: fixed; left: 10px; bottom: 10px; z-index: 1000">';}());
 //                                                                       ^moved 
```

# objective-c - 在 Xcode 中使用 NSURLConnection 发送 JSON 数据

> ID：11033448
> 
> 赞同：4
> 
> 时间：2012-06-14T12:53:18.863
> 
> 标签：objective-c, xcode, json

我正在尝试通过下面的代码将 JSON 数据发送到 Web 服务器。由于某种原因，该请求似乎没有发出。我好像错过了什么？NSURLConnection (retStr) 的结果也总是空的？

```
NSDictionary *data = [NSDictionary dictionaryWithObject:@"test sending ios" forKey:@"value1"];
NSError *error;
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:data options:kNilOptions error:&error];

    NSURL *url = [NSURL URLWithString:@"http://webserveraddress"];
NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url cachePolicy:nil timeoutInterval:60];
[req setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[req setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[req setValue:[NSString stringWithFormat:@"%d", [jsonData length]] forHTTPHeaderField:@"Content-Length"];
[req setHTTPMethod:@"POST"];
[req setHTTPBody:jsonData];
NSString *retStr = [[NSString alloc] initWithData:[NSURLConnection sendSynchronousRequest:req returningResponse:nil error:nil] encoding:NSUTF8StringEncoding]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T08:20:22.010

要将 post vars 中的简单数据发送到运行 php 的网络服务器，您只需在

**例子**

```
NSString * key = [NSString stringWithFormat:@"var1=%@&var2=%@&var3=%@",@"var1String" ,@"var2string" ,[NSnumber numberWithBool:YES]];

NSURL * url = [NSURL URLWithString:@"http://webserver.com/yourScriptPHP.php"];

NSMutableURLRequest * request = [NSMutableURLRequest requestWithURL:url];

[request setHTTPMethod:@"POST"];
[request setHTTPBody:[key dataUsingEncoding:NSUTF8StringEncoding]];

[[NSURLConnection alloc] initWithRequest:request delegate:self];
// this is for you to be able to get your server answer. 
// you will need to make your class a delegate of NSURLConnectionDelegate and NSURLConnectionDataDelegate
myClassPointerData = [[NSMutableData data] retain]; 
```

**实施**

```
-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [myClassPointerData appendData:data]
}

-(void)connection:(NSURLConnection *)connection DidFinishLoading {
    // do what you want with myClassPointerData the data that your server did send you back here
    // for info on your server php script you just need to do: echo json_encode(array('var1'=> $var1, 'var2'=>$var2...));
    // to get your server sending an answer
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:58:01.447

您可以简单地以正常方式发送它，而不是作为 JSON 发送 - 通过使用 POST 方法设置请求的 HTTPBody。

如果您需要拨打电话，例如 'http://abc.example.com/user_profile.json?user[first_name]=fdffdf&user[last_name]=dffdf'

就是，你需要让你的字典键有一个前缀。也就是说，'first_name=fdffdf' 需要更改为 'user[first_name]=fdffdf'。

尝试使用这段代码将您的参数字典更改为 JSON 所需的格式。

```
for (id key in [self allKeys]) {
NSString *newKey = [NSString stringWithFormat:@"%@[%@]", parent, key];
[result setObject:[self objectForKey:key] forKey:newKey];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:15:34.017

一旦像这样检查

ASIFormDataRequest *request=[ASIFormDataRequest requestWithURL:[NSURL URLWithString:@"ur url"]];

```
[request setPostValue:appdelegate.userid forKey:@"userid"];
[request setPostValue:self.nameLbl.text forKey:@"username"];
[request setPostValue:self.website.text forKey:@"website"];

NSLog(@"~~~~~~ request~~~~~ %@",request);

[request setTimeOutSeconds:5000];
[request startSynchronous]; 
```

# javascript - 使用javascript查找纬度和经度

> ID：11033451
> 
> 赞同：4
> 
> 时间：2012-06-14T12:53:27.320
> 
> 标签：javascript, latitude-longitude

我第一次使用javascript。实际上我想使用java脚本获取地址的纬度和经度。谁能指导我..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T12:55:10.437

如果您需要给定地址的纬度和经度，您可以使用谷歌地图 api [https://developers.google.com/maps/documentation/javascript/](https://developers.google.com/maps/documentation/javascript/)

这是一个示例： [https ://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-simple](https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-simple)

编辑：在警报弹出窗口中显示它：

```
var address = document.getElementById("address").value;
var geocoder = new google.maps.Geocoder();

geocoder.geocode( { 'address': address}, function(results, status) {
  var location = results[0].geometry.location;
  alert(location.lat() + '' + location.lng());
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-02T07:18:54.227

这是 JS+HTML 代码（基于 Jerome C. 的回答）：

```
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Geocoding service</title>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    <script>
        function codeAddress() {
        var address = document.getElementById("address").value;
        var geocoder = new google.maps.Geocoder();

        geocoder.geocode( { 'address': address}, function(results, status) {
          var location = results[0].geometry.location;
          alert('LAT: ' + location.lat() + ' LANG: ' + location.lng());
        });
        }
        google.maps.event.addDomListener(window, 'load', codeAddress);
    </script>
  </head>
  <body>
    <div id="panel">
      <input id="address" type="textbox" value="Tembhurkheda, Maharashtra, INDIA">
      <input type="button" value="Geocode" onclick="codeAddress()">
    </div>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T12:56:00.640

使用[Google maps api v3](https://developers.google.com/maps/)你可以研究这个例子的源代码：http:
[//universimmedia.pagesperso-orange.fr/geo/loc.htm](http://universimmedia.pagesperso-orange.fr/geo/loc.htm)

# android - 方向改变后的奇怪行为

> ID：11033452
> 
> 赞同：2
> 
> 时间：2012-06-14T12:53:28.533
> 
> 标签：android, android-viewpager, android-orientation

我希望有人能帮忙。

我有点难以解释 activtiy，它是一个经典的视图寻呼机，但在操作栏中有一个按钮，可以使视图向右移动并显示菜单（最初隐藏在屏幕之外）。这是一个类似于 facebook 的菜单。我有 2 个布局（菜单和寻呼机），我使用自定义 ScrollView 来获得我寻找的行为。

当我改变方向时，我希望菜单每次都出来。所以我创建了一个不同的布局，并在 onCreate 方法上测试了方向。

我尝试了几次：如果清单中没有 configChange，应用程序崩溃并出现“IllegalStateException：Activity 已被破坏”，指向“mPager.setAdapter(mAdapter);”行。

随着配置更改，应用程序在旋转时确实会出现问题，它不会将布局更改为 layout-land 中的布局..

随着配置更改和“onConfigurationChanged”上 onCreate 的内容，从纵向到横向都很好，但反过来会出错（视图应该很大，应该很大）......

我希望你们中的一个人不会那么困惑。

如果您愿意，我可以发布代码，但是代码很多，而且我不知道哪个特定部分会对您有所帮助（请问我）。

谢谢 ！

![当我使用 2de 尝试从纵向传递到横向时](../Images/fe262a1ca26ead2a6c7333b95ddc8702.png)

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_pager_layout);

    inflater = LayoutInflater.from(this);
    me = this;

    View v = findViewById(R.id.landscape);
    if (v == null) {
        isLand = false;

        scrollView = (MyHorizontalScrollView) inflater.inflate(
                R.layout.horz_scroll_layout, null);

        setContentView(scrollView);

        menu = inflater.inflate(R.layout.main_pager_menu_layout, null);
        app = inflater.inflate(R.layout.main_pager_layout, null);

        final View[] children = new View[] { menu, app };
        int scrollToViewIdx = 1;
        TextView tv = (TextView) app.findViewById(R.id.sizerTV);
        scrollView.initViews(children, scrollToViewIdx,
                new SizeCallbackForMenu(tv));

    } else {
        isLand = true;
        menu = findViewById(R.id.main_pager_land_menu);
        app = findViewById(R.id.main_pager_land_app);
        // scrollView = new MyHorizontalScrollView(null);
    }
    // Menu INIT
    new MenuBehaviour(me, menu, inflater);
    // AppBarInit
    initializeAppBar();

    // DAO
    controlDAO = new Controller(me);
    new Thread(new Runnable() {
        @Override
        public void run() {
            arrayEvent = controlDAO.ebdd.getAllEvent();
            if (arrayEvent != null) {
                runOnUiThread(onUiThread);
            } else {
                runOnUiThread(new Runnable() {
                    public void run() {
                        Toast.makeText(
                                me,
                                me.getResources().getString(
                                        R.string.error_no_database_yet),
                                Toast.LENGTH_LONG);
                    }
                });

            }
        }
    }).start();

    // WS
    final AQuery aq = new AQuery(me);
    aq.ajax(uriTest, JSONObject.class, new AjaxCallback<JSONObject>() {

        @Override
        public void callback(String url, JSONObject json, AjaxStatus status) {
            if (json != null) {
                // Toast.makeText(aq.getContext(), status.getCode() + ":" +
                // json.toString(), Toast.LENGTH_LONG).show();
                try {
                    JSONArray array = json.getJSONObject("events")
                            .getJSONArray("event");

                    controlDAO.ebdd.open();
                    // On met le nouveau flux dans la BDD
                    controlDAO.updateBDD(array);
                    // On récupere les event de la BDD (au cas ou on gererai
                    // les maj)
                    arrayEvent = controlDAO.ebdd.getAllEvent();
                    controlDAO.ebdd.close();
                    runOnUiThread(onUiThread);

                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            } else {
                Toast.makeText(
                        aq.getContext(),
                        "Error:"
                                + status.getCode()
                                + ", connectez vous pour acceder aux mis a jours",
                        Toast.LENGTH_LONG).show();
            }
        }
    });

}

Runnable onUiThread = new Runnable() {

    @Override
    public void run() {
        arrtype = new ArrayList<String>();

        arrtype.add("tout les evenements");
        arrtype.add("sport");
        arrtype.add("concert");
        arrtype.add("spectacle");
        arrtype.add("visite");
        controlDAO.ebdd.close();
        // On sépare les évenements en fonction de leurs type et on rempli
        // arrayOfEventByType
        arrayOfEventByType = new ArrayList<ArrayList<Event>>();
        // ajout d'une arraylist pour tout les evenements
        arrayOfEventByType.add(new ArrayList<Event>()); // tout les
                                                        // evenements
        arrayOfEventByType.add(new ArrayList<Event>()); // sport
        arrayOfEventByType.add(new ArrayList<Event>()); // concert
        arrayOfEventByType.add(new ArrayList<Event>()); // spectacle
        arrayOfEventByType.add(new ArrayList<Event>()); // visite
        for (int i = 0; i < arrayEvent.size(); i++) {
            if (!arrtype.contains(arrayEvent.get(i).type.toLowerCase())) {
                arrayOfEventByType.add(new ArrayList<Event>());
                arrtype.add(arrayEvent.get(i).type.toLowerCase());
            }

            Log.i("renaud", "arrtype.size() = " + arrtype.size());
            Log.i("renaud", "arrayOfEventByType.size() = "
                    + arrayOfEventByType.size());

            arrayOfEventByType.get(
                    arrtype.indexOf(arrayEvent.get(i).type.toLowerCase()))
                    .add(arrayEvent.get(i));
            arrayOfEventByType.get(0).add(arrayEvent.get(i));
        }
        // Test
        Log.i("renaud",
                "arrayOfEventByType.size() : " + arrayOfEventByType.size());
        for (int i = 0; i < arrayOfEventByType.size(); i++) {
            Log.i("renaud", "arrayOfEventByType.get(" + i + ").length() : "
                    + arrayOfEventByType.get(i).size());
        }

        for (int i = 0; i < arrayOfEventByType.size(); i++) {
            if (arrayOfEventByType.get(i).isEmpty()) {
                arrayOfEventByType.remove(i);
                arrtype.remove(i);
                i--;
            }
        }
        // ArrayList<Event> tous = arrayOfEventByType.remove(0);
        // Collections.sort(arrayOfEventByType, new EventSort());
        // arrayOfEventByType.add(0, tous);
        // // On crée un nombre de panneau en fonction des types

        mAdapter = new MyAdapter(getSupportFragmentManager(),
                arrayOfEventByType, arrtype);
        mPager = (ViewPager) findViewById(R.id.pager);
        try {
            mPager.setAdapter(mAdapter);

            // +pour rajouter un titre etc..
            mPager.setOnPageChangeListener(new OnPageChangeListener() {
                @Override
                public void onPageSelected(int arg0) {

                    // Omniture
                    if (arg0 == 0) {
                        StadeDeFranceActivity.s.pageName = "Main Pager all event";
                    } else if (!arrayOfEventByType.isEmpty()
                            && arrayOfEventByType.get(arg0) != null
                            && !arrayOfEventByType.get(arg0).isEmpty()
                            && arrayOfEventByType.get(arg0).get(0) != null
                            && arrayOfEventByType.get(arg0).get(0).type != null) {

                        StadeDeFranceActivity.s.pageName = "Main Pager number "
                                + arg0
                                + " category:"
                                + arrayOfEventByType.get(arg0).get(0).type;
                    } else {
                        StadeDeFranceActivity.s.pageName = "Main Pager number "
                                + arg0;
                    }
                    // StadeDeFranceActivity.s.track();

                    Log.i("renaud", "page " + arg0);

                };

                @Override
                public void onPageScrolled(int arg0, float arg1, int arg2) {
                    // TODO Auto-generated method stub
                }

                @Override
                public void onPageScrollStateChanged(int arg0) {
                    // TODO Auto-generated method stub
                }
            });
        } catch (Exception e) {
            e.printStackTrace();
        }

    }
};

public static class MyAdapter extends FragmentPagerAdapter {

    private ArrayList<ArrayList<Event>> arrayOfEventByType;
    private ArrayList<String> arrayOfname;

    public MyAdapter(FragmentManager fm,
            ArrayList<ArrayList<Event>> arrayOfEventByType,
            ArrayList<String> arrayOfname) {
        super(fm);
        this.arrayOfEventByType = arrayOfEventByType;
        this.arrayOfname = arrayOfname;
    }

    @Override
    public int getCount() {
        return arrayOfEventByType.size();
    }

    @Override
    public Fragment getItem(int position) {

        return MainPagerFragment.newInstance(
                arrayOfEventByType.get(position), arrtype.get(position));

    }

    // private ArrayList<Event> concatArray(
    // ArrayList<ArrayList<Event>> arrayOfEventByType2) {
    // ArrayList<Event> concatArray = new ArrayList<Event>();
    //
    // for (int i = 0; i < arrayOfEventByType2.size(); i++) {
    // concatArray.addAll(arrayOfEventByType2.get(i));
    // }
    //
    // return concatArray;
    // }

}

static class SizeCallbackForMenu implements SizeCallback {
    int btnWidth;
    View btnSlide;

    public SizeCallbackForMenu(View btnSlide) {
        super();
        this.btnSlide = btnSlide;
    }

    @Override
    public void onGlobalLayout() {
        btnWidth = btnSlide.getMeasuredWidth();
        System.out.println("btnWidth=" + btnWidth);
    }

    @Override
    public void getViewSize(int idx, int w, int h, int[] dims) {
        dims[0] = w;
        dims[1] = h;
        final int menuIdx = 0;
        if (idx == menuIdx) {
            dims[0] = w - btnWidth;
        }
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    return true;
}

@Override
public boolean onPrepareOptionsMenu(Menu menu2) {

    if (!isLand) {
        int menuWidth = menu.getMeasuredWidth();

        // Ensure menu is visible
        menu.setVisibility(View.VISIBLE);

        if (!menuDisplayed) {
            // Scroll to 0 to reveal menu
            int left = 0;
            scrollView.smoothScrollTo(left, 0);
        } else {
            // Scroll to menuWidth so menu isn't on screen.
            int left = menuWidth;
            scrollView.smoothScrollTo(left, 0);
        }
        menuDisplayed = !menuDisplayed;
    }
    return true;

}

public class EventSort implements Comparator<ArrayList<Event>> {
    ArrayList<String> cattab;

    public EventSort() {
        cattab = new ArrayList<String>();
        cattab.add("sport");
        cattab.add("rugby");
        cattab.add("concert");
        cattab.add("spectacle");
        cattab.add("visite");
    }

    @Override
    public int compare(ArrayList<Event> lhs, ArrayList<Event> rhs) {

        if (lhs.isEmpty()) {
            if (rhs.isEmpty()) {
                return 0;
            } else {
                return 1;
            }
        } else if (rhs.isEmpty()) {
            return -1;
        } else {
            String typelhs = lhs.get(0).type;
            String typerhs = rhs.get(0).type;
            if (cattab.indexOf(typelhs) < cattab.indexOf(typerhs)) {
                return 1;
            } else if (cattab.indexOf(typelhs) > cattab.indexOf(typerhs)) {
                return -1;
            } else {
                return 0;
            }
        }

    }

} 
```

那是清单中没有配置更改的代码，我捕捉到错误以使我的应用程序不会崩溃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:22:02.740

当屏幕方向改变时，Android 会销毁你的 Activity 并重新创建它。因此，如果您的 Adapter 持有对 Activity 的引用（例如片段管理器），则会导致错误。

# android - 线性布局不显示

> ID：11033453
> 
> 赞同：1
> 
> 时间：2012-06-14T12:53:36.320
> 
> 标签：android, android-layout, remoteview

我相信我的问题源于我使用权重和紧跟在 LinearLayout 之后的 RelativeLayout 不包含任何内容......但我无法让它工作。

这是我要完成的工作（使用背景图像关注中心区域）我通过将 LinearLayout 的背景作为图像来实现这一点......我不能用 RemoteViews 做到这一点）： ![在此处输入图像描述](../Images/b44cb5a3ef6723954b6de03850ebb255.png)

这是我使用以下 xml 得到的结果： ![在此处输入图像描述](../Images/80b4adbc63330d3968bf3df107848a1c.png)

```
<LinearLayout 
            android:id="@+id/forecast_ll"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:orientation="horizontal"
            android:background="@drawable/transparent"
            android:layout_weight="4.5"
            android:weightSum="2">
            <RelativeLayout 
                android:id="@+id/widget_bg_rl"
                android:layout_width="match_parent"
                android:layout_height="match_parent">
            <ImageView
                android:id="@+id/widget_bg"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:scaleType="centerCrop" />
            <LinearLayout 
                android:id="@+id/current_ll"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_marginTop="10dp"
                android:orientation="vertical"
                android:gravity="center_vertical"
                android:paddingLeft="10dp"
                android:layout_weight="1">
                <TextView
                    android:id="@+id/update_time_tv"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/at"
                    android:textSize="16dp"
                    android:textColor="@color/white"
                    />
                <TextView
                    android:id="@+id/current_temp_tv"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="-2dp"
                    android:text="35 F"
                    android:textSize="44dp"
                    android:textColor="@color/white"
                    android:includeFontPadding="false"
                    />
                <TextView
                    android:id="@+id/current_short_text_tv"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="-6dp"
                    android:text="partly cloudy"
                    android:textSize="16dp"
                    android:textColor="@color/white"
                    />
            </LinearLayout>
            <LinearLayout
                android:id="@+id/layout_divider"
                android:layout_width="1dip"
                android:layout_height="match_parent"
                android:layout_marginTop="10dp"
                android:layout_marginBottom="10dp"
                android:layout_gravity="center_vertical"
                android:background="@color/white"
                />
            <LinearLayout 
                android:id="@+id/extended_forecast_ll"
                android:layout_width="0dp"
                android:layout_height="match_parent"
                android:orientation="vertical"
                android:layout_weight="1"
                android:weightSum="2">
                <LinearLayout 
                    android:id="@+id/day_one_ll"
                    android:layout_width="match_parent"
                    android:layout_height="0dp"
                    android:orientation="horizontal"
                    android:layout_weight="1">
                    <LinearLayout
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center_vertical"
                        android:padding="8dp">
                        <ImageView
                            android:id="@+id/day_one_image"
                            android:layout_width="24dp"
                            android:layout_height="24dp"
                            android:src="@drawable/widget_icon"
                            android:layout_gravity="center_vertical"
                            android:layout_marginLeft="8dip"
                            />
                    </LinearLayout>
                   <LinearLayout
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:orientation="vertical"
                        android:layout_gravity="center_vertical">
                        <TextView
                            android:id="@+id/day_one_daytv"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="WED"
                            android:textColor="@drawable/white"
                            />
                        <TextView
                            android:id="@+id/day_one_hilo"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="155 / 125"
                            android:textColor="@drawable/white"
                            />
                    </LinearLayout>
                </LinearLayout>
                <LinearLayout
                    android:id="@+id/layout_divider"
                    android:layout_width="match_parent"
                    android:layout_height="1dp"
                    android:layout_marginLeft="10dp"
                    android:layout_marginRight="10dp"
                    android:layout_gravity="center_horizontal"
                    android:background="@color/white"
                    />
                <LinearLayout 
                    android:id="@+id/day_two_ll"
                    android:layout_width="match_parent"
                    android:layout_height="0dp"
                    android:orientation="horizontal"
                    android:layout_weight="1">
                    <LinearLayout
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center_vertical"
                        android:padding="8dp">
                        <ImageView
                            android:id="@+id/day_two_image"
                            android:layout_width="24dp"
                            android:layout_height="24dp"
                            android:src="@drawable/widget_icon"
                            android:layout_gravity="center_vertical"
                            android:layout_marginLeft="8dip"
                            />
                    </LinearLayout>
                   <LinearLayout
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:orientation="vertical"
                        android:layout_gravity="center_vertical">
                        <TextView
                            android:id="@+id/day_two_daytv"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="WED"
                            android:textColor="@drawable/white"
                            />
                        <TextView
                            android:id="@+id/day_two_hilo"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="55 / 25"
                            android:textColor="@drawable/white"
                            />
                    </LinearLayout>
                </LinearLayout>
            </LinearLayout>
            </RelativeLayout>
        </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:10:31.283

您没有将任何项目放置在 RelativeLayout 中，因此没有任何项目知道放置位置。与 LinearLayout 不同，您需要告诉每个项目您希望它相对于其中的其他视图和父级本身定位的位置。

您需要使用定位参数来完成此操作，例如：

```
android:layout_toRightOf="@id/aView"
android:layout_centerInParent="true"
android:layout_below="@id/aView" 
```

ETC...

您应该阅读其他 RelativeLayout 对齐规则：http: [//developer.android.com/reference/android/widget/RelativeLayout.html](http://developer.android.com/reference/android/widget/RelativeLayout.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T18:10:09.133

这是我调整后的 xml 布局...从最外面的 LinearLayout 中删除了 weightsum 和相关项目：

```
 <LinearLayout 
        android:id="@+id/forecast_ll"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:orientation="horizontal"
        android:background="@drawable/transparent"
        android:layout_weight="4.5"
        >
        <RelativeLayout 
            android:id="@+id/widget_bg_rl"
            android:layout_width="match_parent"
            android:layout_height="match_parent">
        <ImageView
            android:id="@+id/widget_bg"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:src="@drawable/al_widgetbg_01_05"
            android:scaleType="centerCrop" />
        <LinearLayout 
            android:id="@+id/current_ll"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:orientation="vertical"
            android:gravity="center_vertical"
            android:paddingLeft="10dp"
            >
            <TextView
                android:id="@+id/update_time_tv"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/at"
                android:textSize="16dp"
                android:textColor="@color/white"
                />
            <TextView
                android:id="@+id/current_temp_tv"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="-2dp"
                android:text="35 F"
                android:textSize="44dp"
                android:textColor="@color/white"
                android:includeFontPadding="false"
                />
            <TextView
                android:id="@+id/current_short_text_tv"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="-6dp"
                android:text="partly cloudy"
                android:textSize="16dp"
                android:textColor="@color/white"
                />
        </LinearLayout>
        <LinearLayout
            android:id="@+id/layout_divider"
            android:layout_width="1dip"
            android:layout_height="match_parent"
            android:layout_marginTop="10dp"
            android:layout_marginBottom="10dp"
            android:background="@color/white"
            android:layout_centerHorizontal="true"
            />
        <LinearLayout 
            android:id="@+id/extended_forecast_ll"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:orientation="vertical"
            android:layout_toRightOf="@id/layout_divider"
            android:weightSum="2">
            <LinearLayout 
                android:id="@+id/day_one_ll"
                android:layout_width="match_parent"
                android:layout_height="0dp"
                android:orientation="horizontal"
                android:layout_weight="1">
                <LinearLayout
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_vertical"
                    android:padding="8dp">
                    <ImageView
                        android:id="@+id/day_one_image"
                        android:layout_width="48dp"
                        android:layout_height="48dp"
                        android:src="@drawable/widget_icon"
                        android:layout_gravity="center_vertical"
                        android:layout_marginLeft="8dip"
                        />
                </LinearLayout>
               <LinearLayout
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:layout_gravity="center_vertical">
                    <TextView
                        android:id="@+id/day_one_daytv"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="WED"
                        android:textColor="@drawable/white"
                        />
                    <TextView
                        android:id="@+id/day_one_hilo"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="155 / 125"
                        android:textColor="@drawable/white"
                        />
                </LinearLayout>
            </LinearLayout>
            <LinearLayout
                android:id="@+id/layout_divider"
                android:layout_width="match_parent"
                android:layout_height="1dp"
                android:layout_marginLeft="10dp"
                android:layout_gravity="center_horizontal"
                android:background="@color/white"
                />
            <LinearLayout 
                android:id="@+id/day_two_ll"
                android:layout_width="match_parent"
                android:layout_height="0dp"
                android:orientation="horizontal"
                android:layout_weight="1">
                <LinearLayout
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_vertical"
                    android:padding="8dp">
                    <ImageView
                        android:id="@+id/day_two_image"
                        android:layout_width="48dp"
                        android:layout_height="48dp"
                        android:layout_gravity="center_vertical"
                        android:layout_marginLeft="8dip"
                        />
                </LinearLayout>
               <LinearLayout
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:layout_gravity="center_vertical">
                    <TextView
                        android:id="@+id/day_two_daytv"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="WED"
                        android:textColor="@drawable/white"
                        />
                    <TextView
                        android:id="@+id/day_two_hilo"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="55 / 25"
                        android:textColor="@drawable/white"
                        />
                </LinearLayout>
            </LinearLayout>
        </LinearLayout>
        </RelativeLayout>
    </LinearLayout> 
```

# android - 序列化 Parcelable 对象的集合

> ID：11033467
> 
> 赞同：0
> 
> 时间：2012-06-14T12:54:35.633
> 
> 标签：android

我的应用大量使用了 Parcelable 对象列表。我想提供一种很好的、​​简单的和面向未来的备份这些对象的方法。简单地序列化数据库（包含所有对象数据）似乎有风险，因为如果数据库结构发生变化，将来可能很难恢复。

在我看来，最简单的选择就是将集合序列化为文件。我尝试将 Serializable 添加到已实现接口的列表中，但是，由于我还使用 putExtra() 在 Intent 之间传递这些对象，因此编译器非常正确地声明了对 putExtra() 的模棱两可的调用。

是否有任何简单的方法可以序列化这个对象集合，或者是否有更好的解决方案？

# ruby - 如何在红宝石中打印双层哈希？

> ID：11033468
> 
> 赞同：0
> 
> 时间：2012-06-14T12:54:36.150
> 
> 标签：ruby, printing, hash

我遇到这样的哈希

```
{"num"=>"219", "id"=>"219", "name"=>"219", "key"=>"", "ps"=>["ˈɑ:bitrəri", "ˈɑrbɪˌtrɛri"], "sent"=>[{"orig"=>"\nHe makes unpredictable, decisions.\n", "trans"=>"\his decision is very hard to understand \n"}, {"orig"=>"\nYou can make an  choice.\n", "trans"=>"\n you can chose randomly。\n"}]} 
```

我只想打印这个哈希的一部分。

我的解决方案是

```
key = ['key','ps','sent']
key.each{|key| key == 'sent' ? (p server_config["sent"].to_s) : (p server_config[key])} 
```

它不好用。像这样的两级哈希打印

```
 [{\"orig\"=>\"\\nAs soon as he kicked the bucket, he started to become famous.\\n\", \"trans\"=>\"\\nhe die and he became famous \\n\"}, ]" 
```

如何很好地打印这两个级别的哈希

我想要的输出如下所示。

```
As soon as he kicked the bucket, he started to become famous.

he die and he became famous. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:28:10.153

您嵌入了 Array 和 Hashes。我向您展示了一种处理方法。应该让你开始。

```
my_hash = {"num"=>"219", "id"=>"219", "name"=>"219", "key"=>"", "ps"=>["a:bitreri", "arbitreri"], "sent"=>[{"orig"=>"\nHe makes unpredictable, decisions.\n", "trans"=>"\his decision is very hard to understand \n"}, {"orig"=>"\nYou can make an  choice.\n", "trans"=>"\n you can chose randomly.\n"}]}

my_hash["sent"].each{|item| item.each {|key, val| puts val}} 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:02:12.277

如果输出格式不是一个约束，您可以尝试[漂亮的打印](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/pp/rdoc/index.html)库：

```
require 'pp'

[ 'key','ps','sent' ].each do |key|
  PP.pp(data[key])
end 
```

# database - 在 Yii 中，我的模型可以在创建、更新和删除的同时从数据库视图中读取数据吗？

> ID：11033472
> 
> 赞同：0
> 
> 时间：2012-06-14T12:54:49.300
> 
> 标签：database, model, yii, isolation-level, dirtyread

在 Yii 中，我的模型可以在创建、更新和删除的同时从数据库视图中读取数据吗？

基本上，我希望将任何 SELECT 语句定向到特定的数据库视图（可能带有一些额外的聚合列，或者强制执行脏读）。

这可能吗，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:15:15.503

您可能对[这里的建议感兴趣](http://www.yiiframework.com/forum/index.php/topic/28688-reading-from-database-view-but-writing-to-table/)

也看看像[这样的链接帖子](http://www.yiiframework.com/forum/index.php/topic/12978-class-table-inheritance/page__p__135262#entry135262)

但是，无论如何，我也遇到了同样的问题，我想要的解决方法是提供一种代码成本低的可行解决方案。当然，考虑这一点需要大量的时间投入，但有结果总比尝试没有预期的事情要好。

在我的例子中，视图为读取场景提供了一些新属性，这些属性必须在更新或插入时删除（场景）。问题是验证过程，当下降到核心类（CActiveRecord / CModel）时，需要有可用的读取场景。这意味着重写完整的验证方法，或者同时处理两个场景。

我的解决方案是尽可能长时间地保留读取场景，然后在实际写入一些数据时更改上下文。

```
// At init time, it is supposed that read scenario reigns
public function init(){
    $this->_tableName = 'view_name';
}
...
// Cause I found no other solution as well,
// this is my way for avoiding Yii _md private scope
protected function setMetaDataForWriting(){
    $this->_tableName = 'table_name';                               
    $this->getMetaData()->tableSchema->name = $this->_tableName;
    $this->getMetaData()->tableSchema->rawName = $this->_tableName;
    $columns = &$this->getMetaData()->tableSchema->columns;
    $this->getMetaData()->tableSchema->columns = array_diff_key($columns,
                array_flip(array('View_Added_Field1',
                         'View_Added_Field2',
                         ..,
                         'View_Added_FieldN')));                
}

// Ensure that a field for acting like primary key is present in your SQL View
public function primaryKey()
{
    return 'id';                
}

public function beforeSave(){
    $this->setMetaDataForWriting();
    return parent::beforeSave();
}

public function afterSave(){
    $this->_tableName = 'view_name';
    $this->refreshMetaData();
    return parent::afterSave();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:08:22.837

您应该能够像对表一样生成或创建数据库视图的模型。只需使用视图名称而不是表名称。因此，当您要查看结果时只需调用数据库视图的模型，当您要编辑时调用表的模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:04:37.320

据我所知，没有办法做到这一点。您可以使用查询构建器，但您会丢失所有模型功能：[http ://www.yiiframework.com/doc/guide/1.1/en/database.query-builder](http://www.yiiframework.com/doc/guide/1.1/en/database.query-builder)

我在论坛中询问是否有机会为 Yii 2 定义一种方法来设置所有数据库操作在 Model 的 CRUD 中完成的方式。例如，要使用存储过程而不是标准提供的选择，插入更新删除。

# objective-c - 应用程序崩溃但没有调试错误 - 看起来不像是内存问题

> ID：11033474
> 
> 赞同：1
> 
> 时间：2012-06-14T12:54:51.587
> 
> 标签：objective-c, ios, ipad

我的应用程序崩溃时遇到问题，没有错误，调试器也没有发现任何问题。我检查了内存使用情况，它稳定在 3MB 左右。我收到内存警告，但当我的应用程序使用的内存量出现峰值时，它不会发生。

# facebook - Facebook OpenGraph 可以设置仅默认图像吗？

> ID：11033477
> 
> 赞同：0
> 
> 时间：2012-06-14T12:55:04.570
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph, facebook-sharer

我知道可以在网站上使用的 OpenGraph“og:image”元标记，但是当我在页面上指定图像时，它会显示为唯一的图像。我尝试了一些不同的更改，但到目前为止没有任何效果。

有没有办法通过 Facebook 的 OpenGraph（或不）指定将用作第一张图像但之后仍包含其他自动选择的图像的图像？我目前无法将所有需要的图像动态拉入页面标题。在所有页面的标题中指定“og：image”会导致只有一个图像在您共享任何 url 时显示为图像。

例如，我们有一个徽标，当有人在域 somespecifieddomain.com 下共享任何链接时，我们希望在默认（第一个）图像中使用该徽标。在标题中放置“og：image”标签后，其他自动选择的图像消失，只有指定的图像可供选择。所有路径也会发生这种情况，因此 somespecificdomain.com/path/to/somewhere 也使用指定的相同 ONE 图像。它可以用作第一个并且仍然包括自动拉取的图像作为可选图像2、3、4等吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:58:25.633

您可以为一个页面指定多个`og:image`标签。然后，用户可以选择在分享帖子时显示哪些图像。

请参阅[开放图形协议阵列文档](http://opengraphprotocol.org/#array)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T22:12:34.793

cpilko 是正确的。如果您指定一个 og:image，那就是所使用的。您必须定义多个 og:image 标签才能供用户选择。如果您不能这样做，请不要使用 og:image 。Facebook“应该”最终为您从您的页面中提取图像，但这些图像会被缓存并且可能不会更新为您的喜好。您可以尝试使用[http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)强制 Facebook 刷新这些内容。根据我们在meltedjoystick.com 上的经验，Facebook 拉取的图片与我们不符，我们必须自己定义。

尼克-meltedjoystick.com

# ruby-on-rails-3 - 发送 1 封电子邮件的平均时间（Heroku Rails 3 ActionMailer > Google Apps via SMTP）

> ID：11033483
> 
> 赞同：1
> 
> 时间：2012-06-14T12:55:26.897
> 
> 标签：ruby-on-rails-3, heroku, smtp, actionmailer, google-apps

我平均每封电子邮件大约 2000 毫秒。**这是正常的吗？**你能给我一些你的应用程序中的时间例子吗？电子邮件可以正常发送。我知道我可能应该使用 DelayedJob 或像 SendGrid 这样的 SMTP 中继，但我猜它的时间太长了，而且存在潜在的问题。

```
2012-06-13T21:28:55+00:00 app web.1 - - Sent mail to ... (7856ms)
2012-06-13T21:28:57+00:00 app web.1 - - Sent mail to ... (2003ms)
2012-06-13T22:24:42+00:00 app web.1 - - Sent mail to ... (3094ms)
2012-06-13T22:24:43+00:00 app web.1 - - Sent mail to ... (1722ms)
2012-06-14T02:20:37+00:00 app web.1 - - Sent mail to ... (5932ms)
2012-06-14T02:22:16+00:00 app web.1 - - Sent mail to ... (1830ms)
2012-06-14T02:22:18+00:00 app web.1 - - Sent mail to ... (1740ms) 
```

如果没有，**我该如何调试需要这么长时间的东西？**

（顺便说一句， [logentries](http://logentries.com)为收集这些数据而震惊）

我的后代 SMTP 设置：

```
ActionMailer::Base.smtp_settings = {
  :address => "smtp.gmail.com",
  :port => 587,
  :domain => "example.com",
  :authentication => "plain",
  :user_name => "mail@example.com",
  :password => "...",
  :enable_starttls_auto => true 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:16:46.293

不，这是平均水平。我有一个在强大的服务器、我自己的机器，甚至是一个简单的低端服务器上运行的应用程序，它们通常总是在大约同一时间运行以发送它。它与与 Google 或您发送信息的人交谈时的身份验证有关。

一旦用户点击我屏幕上的电子邮件按钮，我的应用程序就会发送电子邮件，然后需要一两秒钟的时间才能在屏幕上弹出警报，让我知道它已成功发送。我正在使用与我的业务相关联的 Google Apps Gmail 帐户，该帐户与我的 Rails 项目中的 ActionMailer::Base.smtp_settings 中列出的信息相同。

原因通常是因为它正在连接到谷歌，对其进行身份验证并让谷歌将其发送出去。

如果使用 Linux 或 Mac，从技术上讲，您可以在自己的服务器上使用 sendmail。Sendmail 工作得更快，因为它是从服务器本身发送的，而不是连接到谷歌然后进行身份验证。

在发送大量大量电子邮件（如新闻信函等）时，我已经为客户端机器完成了此操作。这种方法的问题在于，电子邮件的标头没有来自 Gmail、Hotmail 等真实邮件服务器的任何身份验证，证明发送它的人实际上是从 google/hotmail/etc 服务器发送的，有时可以被视为垃圾邮件，因为它不是真正的真实。有很多关于如何做到这一点的指南，比如我刚刚发现的这个：

[http://raflabs.com/blogs/silence-is-foo/2011/02/07/configuring-rails-3s-actionmailer-work-sendmail-debian/](http://raflabs.com/blogs/silence-is-foo/2011/02/07/configuring-rails-3s-actionmailer-work-sendmail-debian/)

您可以使用许多其他方法，这取决于您的工作方式。

请注意，如果您走这条路，您的邮件可能会被视为垃圾邮件。如果客户知道他们会得到它，它通常会通过就好了。

如果您仍想使用当前使用的方法发送邮件，我建议您让电子邮件由后台队列处理，这样会更快，并且在使用您的邮件时不会对用户造成任何延迟应用程序。

我希望这有助于并回答您的问题。

# jquery - 文本框中的光标出现在 IE8/9 的下拉菜单顶部

> ID：11033491
> 
> 赞同：2
> 
> 时间：2012-06-14T12:55:40.213
> 
> 标签：jquery, html, css

这是小提琴：http:
[//jsfiddle.net/simply_simpy/kkf3A/3/](http://jsfiddle.net/simply_simpy/kkf3A/3/)

1.  使用 IE 8/9 并单击输入文本框。
2.  将鼠标悬停在“行业”上
3.  请注意，光标出现在下拉菜单的顶部。
4.  如果您将鼠标悬停在业务/业务上，也会出现同样的问题。

我正在尝试找到一个 html/css 解决方案并避免使用 JS。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:49:07.713

这似乎是一个奇怪的错误。但是，尝试JS解决方案

1.  将“search”的#id 添加到输入文本框中。
2.  在“就绪”函数中添加以下内容到您的 jQuery 中。

    $('.dropdown a').hover(function(){ $("#search").blur(); });

# jquery - jQuery在某些页面上失败

> ID：11033497
> 
> 赞同：0
> 
> 时间：2012-06-14T12:55:59.907
> 
> 标签：jquery, wordpress

[任何人都知道为什么我的 jQuery 轮播在我的主页](http://www.brettgolding.com/planetpole/)底部运行良好，但在我的[研讨会和活动页面](http://www.brettgolding.com/planetpole/?page_id=10)上却没有？我试过 noConflict 但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:20:23.140

您使用 初始化插件，`jQuery('div#image_list ul.image_list').jj_ngg_shuffle();` 但似乎没有 id 为`image_list`.

我得到的 javascript 错误是：`Object has not method 'jj_ngg_shuffle'`这证实了这一点。

# sql - 用于日志的小型 SQL 数据库？

> ID：11033501
> 
> 赞同：0
> 
> 时间：2012-06-14T12:56:06.470
> 
> 标签：sql, database, logging

我正在考虑为我的日志使用数据库而不是普通的 txt 文件。为什么？在数据库中，我可以比使用 txt 文件更容易地处理它们。实际上我没有一个大的日志 txt，有一些例外，并且每一天：用户登录和什么客户端上传什么文件在哪里 - 但即使在这里，数据库还是有意义的？我应该尝试哪些免费（用于非商业和商业）小型数据库？我可以使用像 PostgreSQL 或 nosql 这样的“真实”数据库和带有 BaseX 的简单 XML 数据库，这就是我的想法。有什么建议么？谢谢你。

编辑：哦，对不起，我忘记了——我使用的是 .NET，但也许这不是那么重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:09:01.587

使用 SQLite。整个数据库和无服务器（http://www.sqlite.org）的真正占用空间小、跨平台、单个文件（http://www.sqlite.org）试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:13:31.333

您将如何处理您的日志信息？如果您要对其进行常规的复杂分析工作（性能、趋势等），那么数据库将非常有用。如果您只需要一个地方来转储最多不经常使用的“发生这种情况”类型的消息（崩溃后分析等），那么简单的文本或 XML 文件就足够了。（如果您这样做，请每天或每周循环文件 - 重命名当前文件，例如使用日期/时间，然后开始一个新的“当前”日志文件。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:16:18.963

使用包管理器，您可以安装在您的解决方案中工作的**SqlServerCompact**。

使用**包管理器控制台**并键入以下命令：

```
Install-Package SqlServerCompact 
```

# objective-c - 如何在 NSXMLParser 中处理另一个标签内的标签

> ID：11033502
> 
> 赞同：1
> 
> 时间：2012-06-14T12:56:08.190
> 
> 标签：objective-c, ios, nsxmlparser

我有一个文件：

```
<xml>
    <component>something
        <system>somethingDeeper
            <value>somethingDeepest</value>
        </system>
    </component>

    <component>somethinfDifferent
        <value>somethingDifferentDeeper</value>
    </component>

    <value>somethingNew</value>
</xml> 
```

所以我想区分另一个标签内的内容（例如`<system>`）什么不是。如何使用**NSXMLParser**做到这一点？我目前使用 BOOL ivar，但这是很多标签，这并不像我想要的那样优雅。我知道 NSXMLParser 是一个 SAX 解析器，我理解这一点。

在上面的例子中，我将进入`didEndElement`方法三次： `elementName`equal`value`有没有更优雅的方法来区分什么条目是从`<component>`上面的标签什么不是？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T11:55:52.630

您可以保留当前所在的标签名称数组

```
NSMutableArray *tagNameStack; 
```

每次输入新元素时，都会将其添加到此数组中。每次你离开你再次删除它。IE

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict {
    [tagNameStack addObject:elementName];

    // Your code here
} 
```

和

```
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {
    // Your code here

    [tagNameStack removeLastObject];
} 
```

所以，当你解析`somethingDeepest`你的 tagNameStack 数组时

```
@"xml", @"component", @"system", @"value" 
```

您可以使用此堆栈来决定您在 xml 中的位置，即

```
- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {

    if ([tagNameStack containsObject:@"system"]) {
        // Deal with the value inside the system tag
    } else if ([tagNameStack containsObject:@"component"]) {
        // Deal with the value inside the component tag
    } else {
        // This must be the value inside the XML tag
    }
} 
```

# tomcat - tomcat 配置不尊重证书的扩展密钥使用

> ID：11033503
> 
> 赞同：0
> 
> 时间：2012-06-14T12:56:10.920
> 
> 标签：tomcat, authentication, ssl, certificate

是否可以禁用 Tomcat 检查定义 SSL 证书用途（服务器、客户端）的扩展密钥用法？

在我的证书中，扩展密钥用法（用途）设置为 SSLServer，但我也需要此证书进行客户端身份验证。

我想知道是否可以在 Tomcat 中跳过此检查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:15:16.560

不，这是不可能的。

首先，任何“使用”证书的人（即必须验证和验证它的实体）都有责任检查属性。如果您想使用 Tomcat 服务器中的应用程序使用客户端身份验证连接到另一台服务器，那么就该连接而言，您在 Tomcat 中的应用程序就是客户端。由您连接的服务器决定它要检查的内容（如果此扩展存在并且它是否可以理解它，它确实会检查扩展的密钥使用情况）。

其次，从您这边更改扩展密钥使用扩展将意味着更改证书本身。从本质上讲，这应该只有在 CA 进行这些修改并相应地为您提供新证书的情况下才有可能。

话虽如此，许多 CA 似乎在他们为服务器颁发的证书中同时启用了 TLS Web 服务器身份验证 (1.3.6.1.5.5.7.3.1) 和 TLS Web 客户端身份验证 (1.3.6.1.5.5.7.3.2) ，没有任何额外的选项。

# c++ - STL 矢量擦除不起作用

> ID：11033506
> 
> 赞同：1
> 
> 时间：2012-06-14T12:56:16.723
> 
> 标签：c++, stl, vector

简而言之，我正在尝试编写一个例程，将文件中的逗号分隔值读取到 stl 向量中。这工作正常。csv 文件中的值也可能用双引号引起来，所以我也通过修剪它们来处理这个问题。但是，有一个问题是引号之间的值也可能包含逗号，这些逗号不能被视为分隔符。

如果我有一个包含该行的文件

```
"test1","te,st2","test3","test4" 
```

我的文件例程将其读入向量中

```
"test1"
"te
st2"
"test3"
"test4" 
```

我写了一个例程，我刚刚称之为 PostProcessing。这将通过向量并纠正此问题。它将获取每个元素，并检查第一个值是一个引号。如果是这样，它将删除它。然后它会在字符串的末尾寻找另一个引号。如果它找到一个，它将删除它并移动到下一个项目。如果没有找到，它将继续遍历向量，将以下所有项合并在一起，直到找到下一个引用。

但是，这可以将“te 和 st2”合并到元素 2（索引 1）中，但是当我尝试从向量中删除所需的元素时，它必须失败，因为结果向量输出如下：

```
test1
test2
st2"
test3
"test4" 
```

还要注意最后一个元素没有被处理，因为我减少了计数的大小，但是由于向量擦除失败，真正的计数实际上并没有改变。

后处理代码如下。我究竟做错了什么？

```
bool MyClass::PostProcessing()
{
bool bRet = false;

int nCount = m_vecFields.size();

for (int x = 0; x < nCount; x++)
{
    string sTemp = m_vecFields[x];

    if (sTemp[0] == '"')
    {
        sTemp.erase(0,1);

        if (sTemp[sTemp.size()-1] == '"')
        {
            sTemp.erase(sTemp.size()-1, 1);
            m_vecFields[x] = sTemp;
        }
        else
        {
            // find next double quote and merge these vector items
            int offset = 1;
            bool bFound = false;

            while (x+offset < nCount && !bFound)
            {
                sTemp = sTemp + m_vecFields[x+offset];

                if (sTemp[sTemp.size()-1] == '"')
                {
                    // found corresponding "
                    sTemp.erase(sTemp.size()-1,1);
                    bFound = true;
                }
                else
                {
                    offset++;
                }
            }

            if (bFound)
            {
                m_vecFields[x] = sTemp;

                // now remove required items from vector
                m_vecFields.erase(m_vecFields.begin()+x+1, m_vecFields.begin()+x+offset);

                nCount -= offset;
            }
        }
    }
}

return bRet;
} 
```

**编辑：我发现了一些我将要更正的代码问题，但它们不会影响所提出的问题。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:05:22.043

```
m_vecFields.erase(m_vecFields.begin()+x+1, m_vecFields.begin()+x+offset); 
```

此函数采用半封闭间隔，这意味着要擦除的间隔的“结束”应该指向要擦除的最后一个元素的过去。在您的情况下，它指向该元素。将第二个参数更改为`m_vecFields.begin()+x+offset+1`.

```
x += offset; 
```

由于您刚刚处理了一个项目并删除了直到下一个项目的所有内容，因此您不应`offset`在此处跳过项目。`x++`from 循环就可以了。

# java - 在 Openfire 中使用 openID 框架进行身份验证方法

> ID：11033507
> 
> 赞同：3
> 
> 时间：2012-06-14T12:56:18.143
> 
> 标签：java, authentication, openid, xmpp, openfire

我们都知道 openId 已经成为一种流行的用户身份验证方法，这就是为什么我在想 Openfire 聊天服务器是否也可以使用它。我知道 openId 在 XMPP 上使用 http 协议进行通信，但我想知道是否可以自定义 Openfire 授权模块以使用其中一个 openID java 库进行身份验证（用于基于 Web 浏览器的聊天客户端）。如果可能的话，对于有经验（不是很有经验）的人在 java 中进行网络编程需要付出多少努力？

PS我也在openfire社区发布了这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:04:47.703

如果您不想完全自定义 openfire，
一种方法是使用 openfire 用户服务插件创建帐户并制作自己的身份验证和消息发送插件。Openfire支持自定义插件
完全自定义openfire认证模块是第二个选项，但我不推荐它，因为更新openfire会很麻烦。

基于插件开发这样的东西可能需要 3-4 周的时间。

# ruby-on-rails - Rails 3 +Devise + RSpec：未定义的方法“访问”

> ID：11033508
> 
> 赞同：4
> 
> 时间：2012-06-14T12:56:24.400
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec, devise

我遇到了奇怪的问题。我以前从未使用过 Devise gem。所以，我尝试编写简单的 RSpec 测试：

```
require 'spec_helper'

describe "Admins" do
  before(:each) do
    @email = "test@test.ru"
    user = FactoryGirl.create(:user, :email => @email )
  end

  describe "sign in/out" do
    describe "success" do
      it "should sign a user in and out" do
        visit new_user_session_path
      end
    end
  end
end 
```

我收到这样的错误：

```
 1) Admins sign in/out success should sign a user in and out
     Failure/Error: visit new_user_session_path
     NoMethodError:
       undefined method `visit' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_1::Nested_1:0x007fb2b7e393d0>
     # ./spec/requests/admins_spec.rb:12:in `block (4 levels) in <top (required)>'

Finished in 0.05646 seconds 
```

我的工厂：

```
FactoryGirl.define do
  factory :user do |user|
    user.admin true
    user.password "qwerty"
    user.sequence(:email) { |n| "user#{n}@user.com" }
  end
end 
```

路线：

```
 new_user_session GET    /users/sign_in(.:format)       devise/sessions#new
            user_session POST   /users/sign_in(.:format)       devise/sessions#create
    destroy_user_session DELETE /users/sign_out(.:format)      devise/sessions#destroy
           user_password POST   /users/password(.:format)      devise/passwords#create
       new_user_password GET    /users/password/new(.:format)  devise/passwords#new
      edit_user_password GET    /users/password/edit(.:format) devise/passwords#edit
                         PUT    /users/password(.:format)      devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)        devise/registrations#cancel
       user_registration POST   /users(.:format)               devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)       devise/registrations#new
  edit_user_registration GET    /users/edit(.:format)          devise/registrations#edit
                         PUT    /users(.:format)               devise/registrations#update
                         DELETE /users(.:format)               devise/registrations#destroy 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-21T22:45:34.610

将任何使用 capybara 的测试从规范/请求移动到规范/功能。

[http://alindeman.github.com/2012/11/11/rspec-rails-and-capybara-2.0-what-you-need-to-know.html](http://alindeman.github.com/2012/11/11/rspec-rails-and-capybara-2.0-what-you-need-to-know.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T13:12:12.683

`visit`是水豚方法，而不是Rspec。就像 ArcaneRain 指出的那样，您必须将`capybara`gem 添加到您的 Gemfile、run和`bundle`spec_helper**中。**`require 'capybara/rspec'`

 *** * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-05T17:48:38.697

您必须将 Capybara DSL 添加到 spec_helper

```
.
.
.
RSpec.configure do |config|
  .
  .
  .
  config.include Capybara::DSL
end 
```**

# php - MAMP Pro 安全警告

> ID：11033513
> 
> 赞同：1
> 
> 时间：2012-06-14T12:56:40.110
> 
> 标签：php, apache, mamp

我使用了 MAMP，然后我购买了 MAMP PRO 的升级，然后几天后我开始觉得以 www/mysql 用户身份运行 apache/mysql 的选项只会因为令人讨厌的权限问题而减慢我的生产时间。到目前为止，最好的解决方案是以本地用户身份运行 apache/mysql，但你有一条可怕的消息说：

“出于安全原因，建议在 Mac 连接到 Internet 时将服务器作为 'www/mysql' 运行。”

我的电脑一直连接到互联网，所以我无法在工作时关闭 inet 连接。

我不知道的是：以本地用户身份运行 apache 的风险有多大？（我正在使用带有防火墙并安装了小飞贼的mac）

我搜索了他们的论坛，并没有从开发人员那里得到详细信息。我在他们的论坛上问过，也给他们发过支持邮件，他们几个月都没有回答

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-12T12:11:53.923

这是我刚刚从 appsolute 收到的支持电子邮件回复：

> “当你的 mac 连接到互联网时”意味着将你的 Mac 用作实时服务器，这可能是更好的措辞。只要您使用标准更新使您的 Mac 保持最新，您就无需担心使用用户名/用户名来运行 Apache 和 MySQL。使用权限要容易得多，我使用它们。

# sql-server - Binary Column 被转换为 null Java 类型

> ID：11033517
> 
> 赞同：1
> 
> 时间：2012-06-14T12:56:56.350
> 
> 标签：sql-server, jasper-reports, jasperserver

我在 JasperRreports Server 中创建了一个域。我有一个存储二进制数据的表。当我在我的域中使用它时，我收到以下错误：

> java.lang.IllegalArgumentException: getObjectType for javaType: null
> 返回 null

我导出了架构并发现了以下内容：

```
<field id="Id" type="java.lang.Integer" />
<field id="FileData" type="null" /> 
```

如您所见，在 type 字段中使用了 null。我尝试将其更改为 java.io.InputStream ，这是当我直接连接到数据源并得到相同错误时它映射到的类型：

> java.lang.IllegalArgumentException: getObjectType for javaType:
> java.io.InputStream 在
> com.jaspersoft.commons.dataset.expr.ObjectTypeMapper.getObjectType(ObjectTypeMapper.java:69)返回 null

在我删除 Binary 列之前，使用该域的任何报告都无法运行。当我尝试在*iReport*中创建域报告时，它无法检索域字段。当我尝试使用临时报告工具时，出现上述错误。

我使用的是*SQL Server 2005*，数据的类型是“图像”。在我看来，我将该列转换为 varbinary 以查看*JasperReports*是否会识别它，但我仍然有同样的错误。

*有没有人在JasperReports 服务器*域中 成功使用过二进制数据类型？

**更新：** 我在 applicationContext-semanticLayer.xml 中配置了 bean“jdbcMetaConfiguration”以将二进制列映射到 java.io.InputStream，但我仍然得到同样的错误。映射工作，当我查看 XML 文件“null”被替换为“java;io.InputStream”但我仍然得到 IllegalArgumentException。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T21:52:10.853

**编辑**：不，它不能完成。对不起。

**原始[过度乐观] 答案**：
Ad Hoc 编辑器无法处理图像（或其他二进制数据类型）。如果它更优雅地忽略它们会很好......但你不能在那里使用它们也就不足为奇了。

但是应该可以将字段定义为某种二进制（图像或字节数组或只是一个对象或类似的东西），然后在 iReport 中使用它。

# c# - 如何使用 Linq to SQL 将一行从一个表插入到另一个表

> ID：11033520
> 
> 赞同：0
> 
> 时间：2012-06-14T12:57:06.240
> 
> 标签：c#, asp.net, linq-to-sql

我有两个表`Data_Cust_Log`和。两个表`Data_Cust`的结构是相同的。当客户被授权时，该客户的数据行`Data_Cust_Log`需要被复制到`Data_Cust`。任何人都可以让我知道这是否可以使用`Linq to SQL`。欢迎任何建议。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T13:07:36.127

如果对象属于同一类型：

```
 using (DataClasses1DataContext context = new DataClasses1DataContext())
 {
    var data = context.Data_Cust_Log.Where(x => x.CustomerID == 12) Select(x => x).FirstOrDefault();
    context.Data_Cust.InsertOnSubmit(data);
    context.SubmitChanges();
 } 
```

如果它们不是同一类型：

```
using (DataClasses1DataContext context = new DataClasses1DataContext())
{
    var data = context.Data_Cust_Log.Where(x => x.CustomerID == 12) Select(x => x).FirstOrDefault();

    Data_Cust_Object = new Data_Cust_Object {CustomerID = data.CustomerID, Price = data.Price}; //and so on 

    context.Data_Cust.InsertOnSubmit(Data_Cust_Object);
    context.SubmitChanges();
} 
```

# php - 识别非人为生成的电子邮件

> ID：11033524
> 
> 赞同：-3
> 
> 时间：2012-06-14T12:57:11.857
> 
> 标签：php, email

我正在使用 imap_xxx 访问我的网站的电子邮件，我们需要丢弃所有非人为系统生成的电子邮件，例如不在办公室、自动回复、邮件退回、错误等。需要在 PHP 中为此编写代码。

代码指针将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:06:03.343

您可以将一些正则表达式应用于信封发件人（“Return-Path”标头）以检查自动发件人：

```
"^owner-",
"^request-",
"-request@",
"bounce.*@",
"-confirm@",
"-errors@",
"^no[\-]?reply",
"^donotreply",
"^postmaster@",
"^mailer[-_]daemon@",
"^mailer@",
"^listserv@",
"^majordom[o]?@",
"^mailman@",
"^nobody@",
"^bounce",
"^www(-data)?@",
"^mdaemon@",
"^root@",
"^webmaster@",
"^news(letter)?@",
"^administrator@", #role accounts, maybe you want these
"^support@", 
```

指示自动发件人（如果存在）的标头：

```
 "list-help",
 "list-unsubscribe", 
 "list-subscribe", 
 "list-owner", 
 "list-post", 
 "list-archive", 
 "list-id", 
 "mailing-List",
 "x-facebook-notify",
 "x-mailing-list",
 'x-cron-env',
 'x-autoresponse',
 'x-eBay-mailtracker' 
```

如果它们匹配某个正则表达式，则表明自动发件人的标头：

```
'x-spam-flag':'yes',
'x-spam-status':'yes',
'precedence':'(bulk|list|junk)',
'x-precedence':'(bulk|list|junk)',
'x-barracuda-spam-status':'yes',
'x-dspam-result':'(spam|bl[ao]cklisted)',
'X-Mailer':'^Mail$',
'auto-submitted':'auto-replied',
'X-Auto-Response-Suppress':'(AutoReply|OOF)', 
```

# ckeditor - 如何在ckeditor中添加印地语字体

> ID：11033526
> 
> 赞同：0
> 
> 时间：2012-06-14T12:57:21.327
> 
> 标签：ckeditor

我在我的网站上使用 ckeditor 并想通过从语言中选择选项来写印地语。但我不知道我该怎么做？或者如何用印地语书写或者我应该添加哪种字体来选择印地语字体，然后用印地语书写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:44:33.830

我添加了一个用印地语编写的代码，请告诉我它是否正确。我的字体文件是 Kruti.ttf config.js 的代码是：-

```
config.font_names = 'Hindi/Kruti;' + config.font_names; 
```

content.css 中的代码是：-

```
 @font-face {
    font-family: 'Kruti';
    src: url('Kruti.eot');
    src: local("Hindi"), url("Kruti.TTF") format("truetype");
    font-weight: normal;
    font-style: normal;
    } 
```

如果此代码错误，请纠正我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:16:36.827

您在 CKEditor 或任何在线或离线应用程序中输入时使用的字体取决于您在计算机中安装的语言包。这超出了我们（CKSource）的控制范围。您可以使用类似[这个应用程序](http://specials.msn.co.in/ilit/Bengali.aspx)的东西向您的网络浏览器添加语言工具，但我不知道它将如何与 CKEditor 交互。

# javascript - 函数根据 setinterval 循环，但参数不同

> ID：11033530
> 
> 赞同：1
> 
> 时间：2012-06-14T12:57:24.370
> 
> 标签：javascript, ajax, coldfusion, parameters, setinterval

我有一个简单的问题，有一个带有参数 emp_id 的函数可以打开一个具有不同属性的聊天表单，我希望它每 10 秒自动刷新一次，现在它工作有点错误，因为有一个参数 emp_id是可以更改的，一旦我更改它，与消息和表单的聊天会刷新两次或三次:) 取决于你更改 emp_id 的次数，我希望我很清楚））无论如何这里是 javascript 函数：

```
function load_chat(emp_id) {
        var url = "#request.self#?fuseaction=objects2.popup_list_chatform"
        url = url + "&employee_id=" + emp_id;
        document.getElementById('form_div').style.display = 'block';                            AjaxPageLoad(url,'form_div',1,'Yükleniyor');
        setInterval( function() { 
            load_chat(emp_id); 
        },10000);
} 
```

有一个名称列表，一旦我点击其中一个，这个表单就会被这个函数打开，但是如果我点击另一个用户，我的意思是如果我更改 emp_id，它会刷新以前和现在的表单。我如何更改它以使其仅刷新最后一个 emp_id，而不是我已更改的所有 id

谢谢大家的帮助，我真的很感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:17:08.183

这将很好地封装您正在做的事情。计时器 id ( `tid`) 保存在闭包内，因此当您调用`load_chat`它时，如果有一个正在运行，它将停止间隔。

设置新 url 后，它将再次启动间隔计时器。

```
var ChatModule = (function() {
    var tid,
    url;

    function refresh()
    {
        AjaxPageLoad(url, 'form_div', 1, 'Yükleniyor');
    }

    return {
        load_chat: function(emp_id) {
            if (tid) {
                clearInterval(tid);
            }
            // setup url
            url = "#request.self#?fuseaction=objects2.popup_list_chatform"
            url = url + "&employee_id=" + emp_id;
            document.getElementById('form_div').style.display = 'block';
            // load ajax
            refresh();
            // set timer
            tid = setInterval(refresh, 10000);
        }
    }
}());

ChatModule.load_chat(123); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:11:05.250

改为使用`setTimeout`。每次执行您的函数时，它将设置下一次执行（您也可以使其有条件）：

```
function load_chat(emp_id) {
    ... // do something
    if (condition_still_met)
        setTimeout(function() { 
            load_chat(emp_id); // with same id
        }, 10000);
}
load_chat("x"); // to start 
```

否则您将不得不在`load_chat`函数之外使用 setInterval。您可以在必要时清除间隔。

```
function get_chat_loader(emp_id) {
    return function() {
        ... // do something 
    };
}
var id = setInterval(get_chat_loader("x"), 10000); // start

// then, somewhen later:
clearInterval(id); 
```

# asp.net-mvc - 用于 ASP.net MVC 的 GIS 库

> ID：11033534
> 
> 赞同：0
> 
> 时间：2012-06-14T12:57:29.093
> 
> 标签：asp.net-mvc, gis

我正在尝试开发一个 ASP.net MVC 网站，我需要在其中显示一个地图（整个世界），其中包含多个标记和每个标记的附加信息。

有谁知道一个支持该功能的好库，并且（如果可能）还允许我使用存储在我自己的服务器上的“离线”地图（例如，开放的街道地图）。这将是一个 Intranet 应用程序，这意味着如果使用 google/bing，则必须每年支付许可费用。客户不希望这样，但通常该库可以是商业的（每台服务器一次和/或开发人员费用）。

我已经看过“ThinkGeo Map Suite”，还有其他任何建议或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:21:31.767

SharpMap，它灵活且易于实现，可以与形状或空间数据库一起使用。

详情... [http://sharpmap.codeplex.com/](http://sharpmap.codeplex.com/)

有几个例子可以满足你的需要，所以可以从这些开始

存在其他图书馆，但我不尝试，研究另一种选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:20:04.740

# 回答

Manifold 是一个非常便宜的系统，它有一个基本的互联网地图服务器框架：

[http://www.manifold.net/info/ims.shtml](http://www.manifold.net/info/ims.shtml)

你已经推荐了 ThinkGeo，我会把它和 Manifold 放在同一个篮子里。请务必评估这两个软件包的性能和限制。

# 讨论

您很难找到一个运行良好且不会超出预算的纯 NET 映射库（*请参阅 ESRI*）。根据您的技能水平和您对 GIS 系统的了解，我建议您创建自己的 Web 地图服务器并将其嵌入到您的 Web 应用程序中。

我可以推荐的一些好的环境是：

*   地图服务器
*   地理服务器

就地图的显示和交互而言，有几个基于 Web 的平台可用：

*   [用于 Web 应用的 GIS SDK](http://en.wikipedia.org/wiki/List_of_geographic_information_systems_software#Software_development_frameworks_and_libraries_.28for_web_applications.29)

# .net - EF 代码首先使用快捷方式进行多对多

> ID：11033535
> 
> 赞同：1
> 
> 时间：2012-06-14T12:57:29.843
> 
> 标签：.net, ef-code-first

我正在尝试使用关系一侧的快捷方式建立多对多关系。用一些代码来解释会更容易：

```
public class Product
{
    public int Id { get; set; }
    public string Description { get; set; }
    public virtual ICollection<Order> Orders { get; set; }
}

public class Order
{
    public int Id { get; set; }
    public string Customer { get; set; }
    public virtual ICollection<OrderDetail> Details { get; set; }
}

public class OrderDetail
{
    public int Id { get; set; }
    public Order Order { get; set; }
    public Product Product { get; set; }
    public int Quantity { get; set; }
} 
```

如您所见，我想在订单方面提供我的订单详细信息。但是，在产品方面，我只想有链接的订单。EF 在 Orders 表上添加 Producty_Id FK 时生成错误的数据库架构。

我试图给出特定的模型创建指令但没有成功，例如：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<Product>().HasMany(x => x.Orders);
} 
```

谢谢你的帮助！费边

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:16:04.627

> 我想在订单方面提供我的订单详细信息。但是，在产品方面，我只想有链接的订单。EF 在 Orders 表上添加 Producty_Id FK 时生成错误的数据库架构。

这在 EF 中是不可能的。您可以将其设为未映射的属性并手动实现属性内的逻辑。但这将是一个泄漏的抽象。

正确的方法是将`OrderDetail`集合属性映射到`Product`实体。

```
public class Product
{
    public int Id { get; set; }
    public string Description { get; set; }
    public virtual ICollection<OrderDetail> OrderDetails { get; set; }
} 
```

# c# - 从多个控件获取值的通用方法

> ID：11033536
> 
> 赞同：3
> 
> 时间：2012-06-14T12:57:33.283
> 
> 标签：c#, winforms, controls

我有一个`Form`带有多个不同控件的`ComboBox`,`TextBox`和`CheckBox`. 我正在寻找一种通用的方法来从这些控件中获取值，同时循环它们。

例如，像这样：

```
foreach(Control control in controls)
{
    values.Add(control.Value);
} 
```

有可能还是我需要分别对待每个`control`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:06:24.943

试试这个：

```
Panel myPanel = this.Panel1;

List<string> values = new List<string>();

foreach (Control control in myPanel.Controls)
{
    values.Add(control.Text);
} 
```

但请确保您只获得所需的控件。您可以像检查类型一样

```
if(control is ComboBox)
{
    // Do something
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T13:30:38.530

如果每个控件都是文本框，则文本解决方案是可以的，但是如果您有一些标签，那么您最终会在值中得到标签的文本，除非您使用 if 填充代码。更好的解决方案可能是定义一组委托，为每种控件返回被认为是值的内容（例如 TextBox 的 Text 和 CheckBox 的 Checked ），将它们放入字典中，并使用它们来获取值每个控件。代码可能是这样的：

```
 public delegate object GetControlValue(Control aCtrl);

    private static Dictionary<Type, GetControlValue> _valDelegates;

    public static Dictionary<Type, GetControlValue> ValDelegates
    {
        get 
        { 
            if (_valDelegates == null)
                InitializeValDelegates();
            return _valDelegates; 
        }
    }

    private static void InitializeValDelegates()
    {
        _valDelegates = new Dictionary<Type, GetControlValue>();
        _valDelegates[typeof(TextBox)] = new GetControlValue(delegate(Control aCtrl) 
        {
            return ((TextBox)aCtrl).Text;
        });
        _valDelegates[typeof(CheckBox)] = new GetControlValue(delegate(Control aCtrl)
        {
            return ((CheckBox)aCtrl).Checked;
        });
        // ... other controls
    }

    public static object GetValue(Control aCtrl)
    {
        GetControlValue aDel;
        if (ValDelegates.TryGetValue(aCtrl.GetType(), out aDel))
            return aDel(aCtrl);
        else
            return null;
    } 
```

然后你可以写：

```
 foreach (Control aCtrl in Controls)
        {
            object aVal = GetValue(aCtrl);
            if (aVal != null)
                values.Add(aVal);
        } 
```

# javascript - 我想在单元格上拖动鼠标，单元格下的任何内容都会被选中 javascript

> ID：11033542
> 
> 赞同：1
> 
> 时间：2012-06-14T12:57:56.333
> 
> 标签：javascript, mouseevent

![在此处输入图像描述](../Images/9c6052e462bfd469632ee13980866a6c.png)

我想将鼠标拖到单元格上，然后选择单元格下的任何内容。只有它下面的单元格被选中。如果用户以之字形方式移动鼠标，则不会发生选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-24T13:49:55.893

这是我在 Chrome 上测试的解决方案。我不确定您是否希望在开始拖动时选择第一个方格，因此我将其保留为未选择，以便在开始之字形之前不选择它。

```
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style>
td{padding: 100px;}
.selected{background-color: #f55;}
.deselected{background-color: #faa;}
</style>
<script>
var dragging = false
var reference
addEventListener("load", function(){
  var squares = document.querySelectorAll("td")
  for(var i = 0; i < squares.length; ++i){
    squares[i].draggable = true
    squares[i].className = "deselected"
    squares[i].addEventListener("dragstart", function(){
      reference = this
      dragging = true
    })
    squares[i].addEventListener("drop", function(){dragging = false})
    squares[i].addEventListener("dragenter", toggle)
  }
})
function toggle(){
  if(!dragging) return
  if(this == reference) return
  var rect = reference.getBoundingClientRect()
  if(this.getBoundingClientRect().top < rect.top){
    dragging = false
    return
  }
  if(this.getBoundingClientRect().left != rect.left){
    dragging = false
    return
  }
  if(this.className == "selected"){
    this.className = "deselected"
  }
  else{
    this.className = "selected"
  }
}
</script>
</head>
<body>
<table>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td></tr>
</table>
</body>
</html> 
```

# android - Android NDK 工具链内部编译错误

> ID：11033543
> 
> 赞同：2
> 
> 时间：2012-06-14T12:58:04.647
> 
> 标签：android, android-ndk, cross-compiling

我正在尝试使用 NDK 工具链来构建一些用于 ARM 的本机库。我还在我的部分代码中使用了 ARMv7 NEON 内在函数。不幸的是，我在代码中的几个地方收到以下类型的错误：

```
internal compiler error: in write_builtin_type, at cp/mangle.c:1855 
```

该错误似乎是通过使用中`float32_t`定义的类型触发的 `arm_neon.h`- 例如，我在使用`std::vector<float32_t>`.

对于 Android ARM，单精度浮点类型是内部编译器内置类型的 typedef，而对于 Linaro Linux，例如只是 C/C++ float 的 typedef - 请参阅`arm_neon.h`两种编译器的情况（我可以使用Linaro Linux 工具链没有任何问题）。

我还在 android NDK Google 小组中发现了一篇旧帖子，似乎描述了同样的问题，但不幸的是它没有提供任何解决方案： [一些旧帖子描述了相同的编译器崩溃](http://groups.google.com/group/android-ndk/browse_thread/thread/75dc24ee8307ff10/b15c526a1f154305 "一些与相同问题相关的旧帖子")

有人对如何克服上述问题有任何提示吗？是否有任何特殊原因使用内置编译器类型而不是像 Linaro 工具链那样的普通浮点数？如果我替换 typedef 我会导致不需要/未定义的行为吗？有谁知道 NDK 中包含的工具链是否基于 CodeSourcery 工具链，因为 CS 确实有问题，我们拥有的代码库在很多方面都破坏了它（就像信息一样，我知道我必须肯定地改变工具链） ?

我正在使用：

*   安卓 NDK 版本 r8

*   NDK 工具链 gcc (GCC) 4.4.3 - 按照 NDK 文档中的建议在 NDK 之外剥离

**更新：**

发现[这个其他 SO question](https://stackoverflow.com/questions/3288043/compiler-errors-while-building-a-project-which-uses-eigen-the-c-template-libr)说明了几乎相同的问题......可怕的是它来自 2010 年。

**更新 2：**

替换 typedef 不是一种选择，因为它会完全破坏 NEON 内在功能。所有浮点内在函数都依赖于期望`__builtin_neon_sf`（float32_t 的 typedef）类型作为其参数的内置编译器函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T13:44:28.823

你可以试试Dmitry Moskalchuk 的[Crystax NDK](http://www.crystax.net/en/android/ndk/7)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:59:03.830

这是一个编译器错误。我[在 Android 项目错误跟踪器中](https://code.google.com/p/android/issues/detail?id=34613&q=internal%20compiler%20error&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)打开了一个新问题。

不幸的是，为了克服它，我不得不重写导致它的整个代码部分。

# java - 如何为 JSlider 设置背景图片？

> ID：11033545
> 
> 赞同：4
> 
> 时间：2012-06-14T12:58:09.563
> 
> 标签：java, applet, jslider

我有一个小程序。我设置了它的图像背景。它工作正常。
现在我想将背景图像设置为`JSlider`.
我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T16:15:40.737

您将需要创建一个自定义 JSlider 类并覆盖 paintComponent 方法。请务必在滑块对象上调用 setOpaque(false)。

```
public class CustomSlider extends JSlider
{
    private Image img = null;

    public CustomSlider()
    {
        try
        {
            img = ImageIO.read(new File("background.jpg"));
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
    }

    @Override
    public void paintComponent(Graphics g)
    {
        // Draw the previously loaded image to Component
        g.drawImage(img, 0, 0, null);
        super.paintComponent(g);
    }
} 
```

# android - 如何使左侧元素的填充父级

> ID：11033547
> 
> 赞同：0
> 
> 时间：2012-06-14T12:58:15.890
> 
> 标签：android, android-layout

如何使微调器填充左侧的空白位置？
`android:layout_width="fill_parent"`没有帮助。

XML 布局：

```
<Spinner
    android:id="@+id/spn1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />
<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical">
    <TextView
        android:id="@+id/tv1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Text1" />
    <TextView
        android:id="@+id/tv2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Text2" />
</LinearLayout> 
```

![在此处输入图像描述](../Images/95182ad90a115e528827296b3416b24d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T13:05:24.150

我会使用相对布局和线性布局组合来实现这一点，

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <Spinner
        android:id="@+id/spinner"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_toLeftOf="@+id/lin_layout" />

    <LinearLayout
        android:id="@+id/lin_layout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:orientation="vertical" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="asd" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="fgdas" />
    </LinearLayout>

</RelativeLayout> 
```

输出，

![在此处输入图像描述](../Images/8d4bac4cfa63abd38b31acd82e43b4da.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:14:40.803

根据您的需要，Andro 解决方案是完美的.....

但如果文本视图中的数据是动态的并且可能太长，那么可以在这里尝试 android:weightSum="1"

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:weightSum="1" 
       >

        <Spinner
            android:id="@+id/spinner"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight=".8" />

        <LinearLayout
            android:id="@+id/lin_layout"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:orientation="vertical" 
           android:layout_weight=".2" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="text1" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="text2" />
        </LinearLayout>

    </LinearLayout> 
```

# html - 将文本与 a 标签的底部对齐

> ID：11033553
> 
> 赞同：1
> 
> 时间：2012-06-14T12:58:30.640
> 
> 标签：html, css

如何将文本放在 li 内的 a 标签底部。

这是我的代码

```
<div id="navigation">         
    <ul>
        <li><a href="#">ter</a></li>
        <li><a href="#">redg</a></li>
        <li><a href="#">ryer More</a></li>
        <li><a href="#">More</a></li>
    </ul>           
</div> ​ 
```

而CSS是

```
#navigation { 
    width: 100%;
    height: 50px;
    clear: both;
    color: #333;
    background: #2b2b2b; 
    background: -moz-linear-gradient(top,  #2b2b2b 0%, #171717 49%, #000000 50%, #000000 100%);
    background: -webkit-gradient(linear, left top, left bottom,
                color-stop(0%,#2b2b2b), color-stop(49%,#171717),
                color-stop(50%,#000000), color-stop(100%,#000000)); 
}
#navigation ul{
    margin:0 auto; width:auto;
    padding:0;
}
#navigation ul li{
    display:inline-block;
    color:#fff;
    font:12px Verdana, Geneva, sans-serif;
    padding:0 25px;
    background:url(images/nav_img.jpg) no-repeat center top;
    height:50px;
}
#navigation ul li a{
    display:inline-block;
    color:#fff;
    font:12px Verdana, Geneva, sans-serif;
    text-decoration:none;
    height:50px; 
}​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:04:13.053

检查这个[演示小提琴](http://jsfiddle.net/NNcVc/)。希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:11:35.267

也许...

*   不要明确设置你的“a”元素“高度”
*   将“显示”设置为“阻止”
*   将 padding-top 添加到您的“a”元素中，以将它们向下推到您需要它们的位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:15:55.460

您可以使用相对+绝对定位。

```
#navigation ul li{
    position: relative;
    display:inline-block;
    color:#fff;
    font:12px Verdana, Geneva, sans-serif;
    padding:0 25px;
    background:url(images/nav_img.jpg) no-repeat center top;
    width: 100px;
    height:50px;
}
#navigation ul li a{
    position: absolute;
    top: 30px;
    display:inline-block;
    color:#fff;
    font:12px Verdana, Geneva, sans-serif;
    text-decoration:none;
    height:50px;

}​ 
```

你可以在这里看到[演示](http://jsfiddle.net/eB7hq/)。

# html - HTML 电子邮件表格嵌套

> ID：11033558
> 
> 赞同：1
> 
> 时间：2012-06-14T12:58:45.913
> 
> 标签：html, email, html-table

我正在编写一些 html 代码来制作 html 电子邮件。我做了一些研究，发现使用老式 html，例如表格等是最好的方法。

我已经很久没有用过桌子了，但我的记忆力稍微恢复了一点，我觉得我做得很好。我将布局分成 4 个垂直行。页眉包装器、主包装器、calltoaction 和页脚。我把这些都放在了一个包装里。几乎一切正常，但我不明白为什么内容和图标 td 不对齐？正如我多次声明的那样，整个事物的最大宽度应该是 600px。我不希望它像现在这样用完。

出于某种原因，当我在浏览器中查看带有“检查元素”选项的页面时，它似乎在我告诉他们之前关闭了 td。我需要做什么才能让这两个 td 彼此对齐并使整个事物的最大宽度为 600px？

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="initial-scale=1.0">
    <style>
    body { margin:0; padding:0; width:100% !important; overflow-y:scroll; }
    p { margin:0 0 10px 0; line-height:1.4; clear:right; }
    code { font-size:1.2em; }
    .headerwrapper { background-color: #000000; margin:0px; padding:0px;}
    .header {text-align:center;}
    .wrapper {width:600px; background-color: #dbdadb; align:center;}
    .fixedwidth {width:600px !important;}
    .content {width:340px;}
    .icons {width:260px;}
    .devices {width:600px; height:310px;}
    </style>
    <title>email template</title>
</head>
<body>
    <table class="wrapper" width="556" align="center" border="0" cellpadding="0" cellspacing="0">
        <tbody class="headerwrapper">
                <tr class="header">
                    <td class="fixedwidth">
                        <img src="http://i49.tinypic.com/347i55g.png" border="0">
                    </td>
                </tr>
                <tr class="devices" style="width:600px; height:300px;">
                    <td>    
                        <img src="http://i47.tinypic.com/nujr9.png">
                    </td>
                </tr>   
        </tbody>
        <tr class="miniwrapper">
            <tr class="fixedwidth">
                <td class="content" align="left">
                    tekst
                </td>
                <td class="icons"align="left">
                    tekst
                </td>
            </tr>
        </tr>
        <tr>
            <td>
                calltoaction
            </td>
        </tr>
        <tr>
            <td>
                footer
            </td>
        </tr>
    </table>
</body>  

</html> 
```

所以在你的帮助下，我开始做剩下的工作，让布局在移动设备上易于阅读，这就是我现在所拥有的；

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="initial-scale=1.0">
<meta name="format-detection" content="telephone=yes">
    <style>
    body { margin:0; padding:0; width:100% !important; overflow-y:scroll; background-image: url(background.png); background-repeat: repeat-x; background-color: #dbdadb; -webkit-text-size-adjust:100%; -ms-text-size-adjust:100%;}
    p { margin:0 0 10px 26px; line-height:1.2; width:320px;  font-size:0.9em;}
    .contact {margin-left:5px; margin-top:15px; width:170px; font-size:0.9em; text-align:center;}
    h1 { margin:0 0 10px 26px; line-height:1.2; width:320px;  font-size:1.1em; font-weight:normal;}
    img {outline:none; text-decoration:none; -ms-interpolation-mode: bicubic; display:block;}
    a img {border:none;}
    .headerwrapper {width:600px; background-color: #000000; margin:0px; padding:0px;}
    .header {text-align:center;}
    .wrapper {width:600px; background-color: #dbdadb; align:center;}
    .fixedwidth {width:600px !important;}
    .content {width:340px;}
    .icons {width:260px;}
    .devices {width:600px; height:310px;}
    .miniwrapper {width:600px;}
    .footer { background-image: url(http://i49.tinypic.com/54f2ac.png); text-align:center; line-height:1.2; width:320px;  font-size:0.9em;}
    .footermobile {display:none;}
    .actiemobile {display:none;}
    .iconwrapper {margin:0; line-height:1.2; font-size:0.9em;}
    .iconwrapper p {margin-left: 0px; margin-bottom:10px;}
    .headermobile {display:none;}
    .devicesmobile {display:none;}

    @media all and (max-width: 400px) {
    body { margin:0; padding:0; width:100% !important; overflow-y:scroll; background-image: url(background.png); background-repeat: repeat-x; background-color: #dbdadb;}
    p { margin:0 0 10px 26px; line-height:1.2; width:320px;  font-size:0.9em;}
    .contactmobile {margin-left:50%; margin-top:15px; width:170px; font-size:1.1em; text-align:center; line-height:1.2em;}
    h1 { margin:0 0 10px 26px; line-height:1.2; width:320px;  font-size:1.1em; font-weight:normal;}
    .headerwrapper {width:600px; background-color: #000000; margin:0px; padding:0px;}
    .header {display:none;}
    .wrapper {width:100%; background-color: #dbdadb; align:center;}
    .fixedwidth {width:100% !important;}
    .content {width:340px; display:block;}
    .icons {width:260px; display:block;}
    .devices {display:none;}
    .miniwrapper {width:100%;}
    .footer {display:none;}
    .actie {display:none;}
    .footermobile {display:block; background-image: url(footermobile.png); text-align:center; line-height:1.2; width:320px; height:164px; font-size:0.9em;}
    .actiemobile {display:block;}
    .headermobile {display:block; text-align:center;}
    .devicesmobile {display:block;}
    }

    /* Client-specific Styles */
    #outlook a {padding:0;} /* Force Outlook to provide a "view in browser" menu link. */
    .ExternalClass {width:100%;} /* Force Hotmail to display emails at full width */  
    .ExternalClass, .ExternalClass p, .ExternalClass span, .ExternalClass font, .ExternalClass td, .ExternalClass div {line-height: 100%;} /* Force Hotmail to display normal line  spacing. */ 
    #backgroundTable {margin:0; padding:0; width:100% !important; line-height: 100% !important;}
    /* End reset */
    </style>
    <title>email template</title>
</head>
<body>
    <table class="wrapper" width="600" align="center" border="0" cellpadding="0" cellspacing="0" margin="0">
        <tbody class="headerwrapper">
                <tr class="header">
                    <td class="fixedwidth" colspan="2">
                        <img src="http://i49.tinypic.com/347i55g.png" border="0">
                    </td>
                </tr>
                <tr class="devices" style="width:600px; height:300px;">
                    <td colspan="2">    
                        <img src="http://i47.tinypic.com/nujr9.png">
                    </td>
                </tr>   

                <tr class="headermobile">
                    <td class="fixedwidth" colspan="2">
                        <img src="logomobile.png" border="0">
                    </td>
                </tr>
                <tr class="devicesmobile">
                    <td colspan="2">    
                        <img src="devicesmobile.png">
                    </td>
                </tr>   

        </tbody>
        <tr class="miniwrapper">
            <tr class="fixedwidth">
                <td class="content" align="left">
                    <h1>Werkt u al met apps?</h1>

<p>Het ontwikkelen van applicaties, oftewel apps, is namelijk booming! Steeds meer merken en 
bedrijven zien het gemak van een app in. Het is de ideale optie voor het versterken van uw merk, zowel extern als intern, of het opzetten van een geheel nieuw product. Ook de enorme groei in gebruik van mobiele apparaten zorgt er voor dat een sterk merk niet meer kan achter blijven.</p>

<p>Mocht u geïnteresseerd zijn in onze service, 
van op maat gemaakte applicaties en backend oplossingen, neem dan gerust contact met ons op.
U bent van harte welkom voor een kop koffie bij ons in de mediaBunker, tijdens een verkennend gesprek of een demonstratie van de 
mogelijkheden van mediaBunker als bedrijf.</p>

<p>Alvast bedankt en hopelijk tot ziens.</p>
                    </p>
                </td>
                <td class="icons">
                    <table>
                        <tr>
                            <td colspan="2">
                                No matter what device.<br>
                                We build natively.
                            </td>
                        </tr>
                        <tr>
                        <tbody class="iconwrapper">
                            <tr text-align="center">
                                <td><img src="apple.png"></td>
                                <td><p>Apple iOS is the operating<br>
                                    system that powers the <br>
                                    iPhone,  iPad and iPod touch.</p>
                                </td>
                            </tr>
                            <tr>
                                <td><img src="android.png"></td>
                                <td><p>With partners like Google,<br>
HTC and Motorola, Android is <br>
the fastest growing mobile OS.</p>
</td>
                            </tr>
                            <tr>
                                <td><img src="windows.png"></td>
                                <td><p>Together Microsoft and Nokia<br>
support conventional users <br>
with Windows Phone.</p>
</td>
                            </tr>
                            <tr>
                                <td><img src="html5.png"></td>
                                <td><p>Looking for other platforms<br>
like BlackBerry, Samsung <br>
Bada or HTML5 & CSS3?<br>
We can build it!</p>
</td>
                            </tr>
                        </tbody>
                        </tr>
                    </table>        
                </td>
            </tr>
        </tr>
        <tr>
            <td class="actie" colspan="2">
                <img src="http://i47.tinypic.com/11qi7pw.png">
            </td>
            <td class="actiemobile" colspan="2">
                <img src="actiemobile.png">
            </td>
        </tr>
        <tr>
            <td class="footer" colspan="2">
            <table>
                <tr cellspace="0">
                    <td width="200px" text-align="center"><p class="contact">Suikersilo-West 23 <br> 1165 MP Halfweg</p></td>
                    <td width="200px" text-align="center"><p class="contact"><a href="tel:0031238200140">Tel +31 23 820 0140</a><br> <a href="mailto:info@mediabunker.com">info@mediabunker.com</a></p></td>
                    <td width="200px" text-align="center"><p class="contact"><a href="http://mediabunker.com">www.mediabunker.com</a><br> <a href="http://twitter.com/mediabunker">twitter.com/mediabunker</a></p></td>
                </tr>
            </table>
            </td>

            <td class="footermobile" colspan="2">
            <table>
                <tr cellspace="0">
                    <td width="200px" text-align="center">
                        <p class="contactmobile">
                            Suikersilo-West 23<br>
                            1165 MP Halfweg<br>
                            <a href="tel:0031238200140">Tel +31 23 820 0140</a><br>
                            <a href="mailto:info@mediabunker.com">info@mediabunker.com</a><br>
                            <a href="http://mediabunker.com">www.mediabunker.com</a><br>
                            <a href="http://twitter.com/mediabunker">twitter.com/mediabunker</a><br>                        
                        </p>
                    </td>
                </tr>
            </table>
            </td>
        </tr>
    </table>
</body>  

</html> 
```

你可以在这里看到一个例子；[http://kellyvuijst.nl/email/email.html](http://kellyvuijst.nl/email/email.html)（带有图像和所有） 当屏幕缩放到小于 400 像素时，我希望图标 td 在内容下移动，但我似乎无法管理。我认为显示块可以解决问题，但事实并非如此。此外，还有这个奇怪的黑色/灰色空间，我不知道为什么会在那里。当我添加表格时它出现了，所以它必须以某种方式发生冲突。我发现桌子非常凌乱和混乱，所以我希望有人可以为我解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:04:28.923

您在标题和设备行中的 td 中缺少 colspan 属性：

```
 <tr class="header">
                <td class="fixedwidth" colspan="2">
                    <img src="http://i49.tinypic.com/347i55g.png" border="0">
                </td>
            </tr>
            <tr class="devices" style="width:600px; height:300px;">
                <td colspan="2">    
                    <img src="http://i47.tinypic.com/nujr9.png">
                </td>
            </tr> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:03:01.893

（按照您在评论中提供的 HTML 设计草图 - [http://i48.tinypic.com/1zp2m89.png](http://i48.tinypic.com/1zp2m89.png)）

为了实现这一点，请将`colspan="2"`( [colspan](http://www.w3schools.com/tags/att_td_colspan.asp) ) 设置为较大的行 TD。这将使它们跨越 2 列，并将第三行（内容和图标）保留为两列行。如果您以后不需要通过添加更多列来使设计复杂化，这将是一个很好的解决方案，因为使用 colspan 会非常混乱。如果在某些时候它变得过于混乱，您还可以在另一个表中使用一个表来实现相同的结果并提供一种微调设计的简单方法。

我已经使用您的代码设置了一个示例：http: [//jsfiddle.net/dvirazulay/TFweS/1/](http://jsfiddle.net/dvirazulay/TFweS/1/)

# git - GitBash - 在 Mac 上克隆

> ID：11033562
> 
> 赞同：-1
> 
> 时间：2012-06-14T12:58:52.370
> 
> 标签：git, git-bash

我试图在我的 Mac 上的 GitBash 中运行以下命令，但它不断给出以下错误：

致命：存储库路径不存在。

当我在 Windows 机器上运行它时效果很好，但我需要在我的 Mac 上运行它:(

有没有人有任何想法来解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:25:18.890

`Fatal: repository path does not exist.`意味着您正在尝试`git`在没有存储库的目录中运行命令，您需要`git clone`获取一个存储库或`git init`创建一个存储库，或者`cd`到一个已经签出的存储库目录。

所有存储库文件都在`.git`项目目录的根目录中。你可能缺少一个。

# javascript - 弹出窗口的属性在 Javascript 中没有改变

> ID：11033567
> 
> 赞同：0
> 
> 时间：2012-06-14T12:59:03.713
> 
> 标签：javascript, html, google-chrome, popupwindow

[我尝试了以下从此处](http://www.quackit.com/html/codes/html_popup_window_code.cfm)获得的简单弹出代码并稍作修改-

```
<!-- sample.html -->
<script type="text/javascript">
// Popup window code
function newPopup(url) {
    popupWindow = window.open(
        url,'popUpWindow','height=400,width=400,left=10,top=10,resizable=no,scrollbars=no,toolbar=no,menubar=no,location=no,directories=no,status=no')
}
</script>
<a href="JavaScript:newPopup('http://www.facebook.com/zuck');">Open a popup window</a> 
```

当我运行它时，会按预期出现一个弹出窗口。但是滚动条和 URL 都在那里，我可以轻松地调整窗口大小，即使我已经`resizable=no,scrollbars=no,location=no`

为什么这些属性的更改没有反映在结果弹出窗口中？

奇怪的是，这是`scrollbar`属性正确反映`Mozilla 10.0.4`而不是反映`Google Chrome 19.0.1084.56`

但其他 2 个属性在任一浏览器上显示相同的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:11:46.233

这里重要的是这些设置是对浏览器的*建议。*浏览器供应商可以选择让浏览器忽略它们。一些供应商（包括 Mozilla）让用户定义是否忽略某些设置（参见[MDN`window.open`页面](https://developer.mozilla.org/en/DOM/window.open)上的各种注释）。

您可以通过设置结果文档的样式来避免滚动条，[如此处其他答案](https://stackoverflow.com/a/1995823/157247)中所述（前提是[SOP](http://en.wikipedia.org/wiki/Same_origin_policy)没有发挥作用），但是如果浏览器在您告诉它不要提供位置和调整大小时，真的没有别的了你可以做 - 使用弹出窗口。

您可能会考虑在当前窗口中使用绝对定位的元素，这几乎是弹出窗口的现代方式。但是，您加载 Facebook 的具体示例可能需要您使用`iframe`（并且可能会尝试转义它）。

# c# - 无法在服务中看到 SQL Server 2008 实例

> ID：11033570
> 
> 赞同：0
> 
> 时间：2012-06-14T12:59:14.027
> 
> 标签：c#, sql-server-2008

我在本地机器上调用了一个 SQL Server 2008 的命名实例，`TEST`但我无法在`Services.msc`. 我只能看到名为 SQL Server ( `MSSQLSERVER`) 的服务。当我尝试使用我的 C# 应用程序使用连接字符串连接到这个实例时：

```
Server=localhost\\TEST;Database=TESTDB;Trusted_Connection=True; 
```

它向我抛出了这个异常：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

请帮助

# css - 在 django 虚拟服务器上使用静态文件

> ID：11033571
> 
> 赞同：3
> 
> 时间：2012-06-14T12:59:15.530
> 
> 标签：css, django, static-files, django-staticfiles

以前有人问过类似的问题，我已经阅读了所有这些问题并试图理解有关该主题的官方 django 文档，但我仍在努力在虚拟服务器上使用静态文件。更具体地说，我只是想让我的模板，，`Base.html`使用`base.css.`

我的文件夹结构如下所示：

```
manage.py
static/CSS/base.css
VergeGreenITEvent_Website/settings.py
VergeGreenITEvent_Website/views.py ect
VergeGreenITEvent_Website/Webpage_Templates/Base.html 
```

（目前没有应用程序文件夹，因为我正在关注“The django book”来学习并且还没有做到这一点！）

**完整的 settings.py 可以在这里查看：http: [//pastebin.com/JB3mKRcJ](http://pastebin.com/JB3mKRcJ)**

在我的 Base.html 模板中，我现在有了代码：

```
<head>
    <title>Verge Green IT</title>
    {% load static %}

    <link rel="stylesheet" href="{% static "CSS/base.css" %}" type="text/css" />
</head> 
```

CSS仍然没有被应用。![在此处输入图像描述](../Images/e91b06156a4e42d187e15ea5a787d805.png)你能帮我弄清楚我做错了什么吗？我会非常感激。

我正在使用最新版本的 Django。(1.4)

* * *

urls.py：

```
from django.conf.urls import patterns, include, url
from django.conf import settings
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
import views

urlpatterns = patterns('',

    url(r'^$', views.Home),

)

if settings.DEBUG:
    urlpatterns += staticfiles_urlpatterns() #this serves static files and media files.
    #in case media is not served correctly
    urlpatterns += patterns('',
        url(r'^media/(?P<path>.*)$', 'django.views.static.serve', {
            'document_root': settings.MEDIA_ROOT,
            }),
    ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T13:07:06.227

如果您使用的是 Django 1.4，那么我将使用静态标签：

```
{% load static %}

<link rel="stylesheet" href="{% static "CSS/base.css" %}" type="text/css" /> 
```

你可能在你的 url 中也需要这个，在开发文件中是通过 django 提供的

```
if settings.DEBUG:
    urlpatterns += staticfiles_urlpatterns() #this serves static files and media files.
    #in case media is not served correctly
    urlpatterns += patterns('',
        url(r'^media/(?P<path>.*)$', 'django.views.static.serve', {
            'document_root': settings.MEDIA_ROOT,
            }),
    ) 
```

同样在您的设置中，通常的做法是避免硬编码位置，这是一个示例（顺便说一下，您的设置中有静态文件查找器吗？

```
PROJECT_ROOT = path.dirname(path.abspath(__file__)) #gets directory settings is in

STATIC_ROOT = path.join(PROJECT_ROOT,'static-root')
# this folder is used to collect static files in production. not used in development

STATIC_URL =  "/static/"

STATICFILES_DIRS = (
    ('', path.join(PROJECT_ROOT,'static')), #store site-specific media here.
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
)

TEMPLATE_CONTEXT_PROCESSORS = (
    # other processors...
    "django.core.context_processors.static",
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:12:00.120

你应该`settings.py`这样写：

```
import os
PROJECT_ROOT = os.path.abspath(os.path.join(os.path.dirname(__file__), '..'))

STATIC_URL = '/static/'  # Should be root relative or absolute

STATICFILES_DIRS = (
    os.path.join(PROJECT_ROOT, 'static'),
)

# Where your static files will be collected with colletstatic command
# I use it only in deployed configuration with DEBUG=False
# Need to be outside STATICFILES_DIR
STATIC_ROOT = '/var/www/your.site' 
```

为了确定，请使用 Firebug 或 webkit 调试器检查 CSS 是否已加载。

请记住，如果`settings.DEBUG == False`.

# python - numpy dot() 和 inner() 之间的区别

> ID：11033573
> 
> 赞同：64
> 
> 时间：2012-06-14T12:59:21.730
> 
> 标签：python, matrix, numpy

和有什么区别

```
import numpy as np
np.dot(a,b) 
```

和

```
import numpy as np
np.inner(a,b) 
```

我尝试的所有示例都返回了相同的结果。[维基百科](http://en.wikipedia.org/wiki/Dot_product)对两者都有相同的文章？！在它[的描述](http://docs.scipy.org/doc/numpy/reference/generated/numpy.inner.html)中`inner()`说，它的行为在更高维度上是不同的，但我无法产生任何不同的输出。我应该使用哪一个？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-06-14T13:16:03.190

[`numpy.dot`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.dot.html#numpy.dot)：

> 对于二维数组，它相当于矩阵乘法，对于一维数组，它相当于向量的内积（没有复共轭）。对于 N 维，它是 a 的最后一个轴和b**的倒数第二个****轴**的和积：

 **[`numpy.inner`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.inner.html)：

> 一维数组（没有复共轭）的向量的普通内积，在更高维度上是**最后一个轴上**的和积。

（强调我的。）

作为一个例子，考虑这个带有二维数组的例子：

```
>>> a=np.array([[1,2],[3,4]])
>>> b=np.array([[11,12],[13,14]])
>>> np.dot(a,b)
array([[37, 40],
       [85, 92]])
>>> np.inner(a,b)
array([[35, 41],
       [81, 95]]) 
```

因此，您应该使用的那个是为您的应用程序提供正确行为的那个。

* * *

**性能测试**

（请注意，我只测试 1D 案例，因为这是唯一给出相同结果的情况`.dot`。`.inner`）

```
>>> import timeit
>>> setup = 'import numpy as np; a=np.random.random(1000); b = np.random.random(1000)'

>>> [timeit.timeit('np.dot(a,b)',setup,number=1000000) for _ in range(3)]
[2.6920320987701416, 2.676928997039795, 2.633111000061035]

>>> [timeit.timeit('np.inner(a,b)',setup,number=1000000) for _ in range(3)]
[2.588860034942627, 2.5845699310302734, 2.6556360721588135] 
```

所以也许`.inner`更快，但我的机器目前负载相当大，所以时间不一致，也不一定非常准确。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-14T13:35:25.130

`np.dot`并且`np.inner`对于一维数组是相同的，所以这可能就是您没有注意到任何差异的原因。对于 N 维数组，它们对应于常见的张量操作。

`np.inner`有时被称为高阶和低阶张量之间的“向量积”，特别是张量乘以向量，并且经常导致“张量收缩”。它包括矩阵向量乘法。

`np.dot`对应于“张量积”，包括维基百科页面底部提到的情况。它通常用于将两个相似的张量相乘以产生一个新的张量。它包括矩阵-矩阵乘法。

如果您不使用张量，则无需担心这些情况，它们的行为相同。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-09-26T11:06:13.627

对于 1 维和 2 维数组 numpy.inner 用作转置第二个矩阵然后相乘。因此对于：

```
A = [[a1,b1],[c1,d1]]
B = [[a2,b2],[c2,d2]]
numpy.inner(A,B)
array([[a1*a2 + b1*b2, a1*c2 + b1*d2],
       [c1*a2 + d1*b2, c1*c2 + d1*d2]) 
```

我使用以下示例解决了这个问题：

```
A=[[1  ,10], [100,1000]]
B=[[1,2], [3,4]]
numpy.inner(A,B)
array([[  21,   43],
       [2100, 4300]]) 
```

这也解释了一维的行为，`numpy.inner([a,b],[c,b]) = ac+bd`并且`numpy.inner([[a],[b]], [[c],[d]]) = [[ac,ad],[bc,bd]]`。这是我的知识范围，不知道它对更高维度有什么作用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-22T10:18:12.813

内部无法正常处理复杂的二维数组，尝试相乘

及其转置

```
array([[ 1.+1.j,  4.+4.j,  7.+7.j],
       [ 2.+2.j,  5.+5.j,  8.+8.j],
       [ 3.+3.j,  6.+6.j,  9.+9.j]]) 
```

你会得到

```
array([[ 0\. +60.j,  0\. +72.j,  0\. +84.j],
       [ 0.+132.j,  0.+162.j,  0.+192.j],
       [ 0.+204.j,  0.+252.j,  0.+300.j]]) 
```

有效地将行乘以行而不是行乘以列

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-08T06:12:22.103

在高维空间中，内积和点积有很大的不同。下面是 2x2 矩阵和 3x2 矩阵的示例 x = [[a1,b1],[c1,d1]] y= [[a2,b2].[c2,d2],[e2,f2]

np.inner(x,y)

输出 = [[a1xa2+b1xb2 ,a1xc2+b1xd2, a1xe2+b1f2],[c1xa2+d1xb2, c1xc2+d1xd2, c1xe2+d1xf2]]

但在点积的情况下，输出显示以下错误，因为您不能将 2x2 矩阵与 3x2 相乘。

ValueError：形状（2,2）和（3,2）未对齐：2（dim 1）！= 3（dim 0）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-19T20:27:38.277

我制作了一个快速脚本来练习内积和点积数学。它真的帮助我感受到了不同之处：

[![在此处输入图像描述](../Images/5d22bf0c2a94b296f589ac1ba7b3aca5.png)](https://i.stack.imgur.com/SqyfV.png)

你可以在这里找到代码：

[https://github.com/geofflangenderfer/practice_inner_dot](https://github.com/geofflangenderfer/practice_inner_dot)**

# html - iOS Webview 和 jFontSize

> ID：11033574
> 
> 赞同：0
> 
> 时间：2012-06-14T12:59:31.387
> 
> 标签：html, ios, webview, size

我正在尝试在本地 html 页面中使用[jFontSize](http://www.jfontsize.com/)以显示在 WebView 中。该脚本应允许用户更改文本大小，并且确实如此。
但是，当我添加到文本中时，情况不再如此。我尝试使用[另一个脚本](http://net.tutsplus.com/tutorials/javascript-ajax/use-the-jquery-ui-to-control-the-size-of-your-text/)，但同样的问题仍然存在。

**HTML：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html dir = "ltr" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Untitled Document</title>

        <script type="text/javascript" language="javascript" src="jquery-1.5.js"></script>
        <script type="text/javascript" language="javascript" src="jquery.jfontsize-1.0.js"></script>
        <script type="text/javascript" language="javascript" src="jquery.corner-2.09.js"></script>
        <script type="text/javascript" language="javascript" src="shCore.js"></script>
        <script type="text/javascript" language="javascript" src="shBrushJScript.js"></script>
        <script type="text/javascript" language="javascript" src="shBrushXml.js"></script>
        <script type="text/javascript" language="javascript" src="shBrushCss.js"></script>
        <script type="text/javascript" language="javascript" src="funcoes.js"></script>
        <link type="text/css" rel="stylesheet" href="style.css" />
        <link type="text/css" rel="stylesheet" href="jfontsize.css" />
        <link type="text/css" rel="stylesheet" href="shCoreDefault.css" />
    </head>

    <body>
        <a class="jfontsize-button" id="jfontsize-m2" href="#">A-</a>
        <a class="jfontsize-button" id="jfontsize-d2" href="#">A</a>
        <a class="jfontsize-button" id="jfontsize-p2" href="#">A+</a>
        <p class="some-class-name2" dir="rtl" align = "right">Hello<br>world</p>
        <script type="text/javascript" language="javascript">
    $('.some-class-name2').jfontsize({
            btnMinusClasseId: '#jfontsize-m2',
            btnDefaultClasseId: '#jfontsize-d2',
            btnPlusClasseId: '#jfontsize-p2',
            btnMinusMaxHits: 1,
            btnPlusMaxHits: 7,
            sizeChange: 7
                                         });
        </script>

    </body>
</html> 
```

该页面在 Firefox 上运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T18:42:10.490

您需要在文档加载中添加初始化代码 -

```
$(document).ready(function(){
    //jfontsize increase
     $('.some-class-name2').jfontsize({
            btnMinusClasseId: '#jfontsize-m2',
            btnDefaultClasseId: '#jfontsize-d2',
            btnPlusClasseId: '#jfontsize-p2',
            btnMinusMaxHits: 1,
            btnPlusMaxHits: 7,
            sizeChange: 7
         });
}); 
```

它应该可以正常工作。

# sql - 通过 IN SQL Server 查询仅查找 word 中的大写字母

> ID：11033577
> 
> 赞同：5
> 
> 时间：2012-06-14T12:59:39.347
> 
> 标签：sql, sql-server

我必须在 SQL Server 中执行此操作

我有数据，例如

```
Belo Horizonte , MG - Brazil
São Paulo , SP - Brazil
Barueri , SP - Brazil
Ferraz de Vasconcelos , SP - Brazil 
```

我需要选择与模式匹配的两个字母单词

```
Space Letter Letter 
```

我试过这个

```
SUBSTRING(ADDRESS_BLOCK,PatIndex('% [A-Z][A-Z] %',ADDRESS_BLOCK),3) 
```

但我只需要考虑这个（即）输出的大写字母必须是

```
MG SP SP SP 
```

并且不包括`de`示例最后一行中的内容`Ferraz de Vasconcelos , SP - Brazil`

清晰地看待问题

例如：vaishnava st northwind GH——结果必须是 GH

```
 somersert PM vailash hj  --Result has to be PM 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T20:58:30.420

试试这个：您需要整理列并指定大写字母。正则表达式 [AZ] 不区分大小写，即使您指定了排序规则。

```
SELECT    SUBSTRING(
            ADDRESS_BLOCK
            , PatIndex(    
                N'% [ABCDEFGHIJKLMNOPQRSTUVWXYZ][ABCDEFGHIJKLMNOPQRSTUVWXYZ] %'
                , ADDRESS_BLOCK COLLATE sql_latin1_general_cp1_cs_as
                )
            , 3
            ) 
FROM 
    (
        SELECT 'Belo Horizonte , MG - Brazil' ADDRESS_BLOCK
        UNION
        SELECT 'São Paulo , SP - Brazil' 
        UNION
        SELECT 'Barueri , SP - Brazil' 
        UNION
        SELECT 'Ferraz de Vasconcelos , SP - Brazil' 
    ) n 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T07:11:01.330

我认为这会做到......或满足您的需求的变化。在这种情况下，它将挑选出第一对大写字母。

```
with dataset as 
(
    select 'Belo Horizonte , MG - Brazil' as val union all
    select 'São Paulo , SP - Brazil' as val union all 
    select 'Ferraz de Vasconcelos , SP - Brazil'  
)
select Substring(val ,PatIndex('%[A-Z][A-Z] %' COLLATE LATIN1_gENERAL_BIN,val),3)
from dataset 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T08:48:11.453

你可以试试这个：

```
SUBSTRING([ADDRESS_BLOCK],PatIndex('%, [A-Z][A-Z] -%',[ADDRESS_BLOCK])+2,2) 
```

[例子](http://www.sqlfiddle.com/#!3/0266a/1/0)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T13:01:43.220

选择逗号后的 2 个字母：

```
select substring(columnname, charindex(',', columnname) + 2, 2)
from tablename 
```

或使用`-`：

```
select substring(columnname, charindex('-', columnname) - 3, 2)
from tablename 
```

* * *

最终的，不优雅的解决方案：

```
SUBSTRING(ADDRESS_BLOCK,PatIndex('% [ABCDEFGHIJKLMOPQWXYZ][ABCDEFGHIJKLMOPQWXYZ] %',ADDRESS_BLOCK),3) 
```

它选择两个大写字母。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-14T14:55:31.477

整理很重要。您需要添加`Collate`到查询中，例如：

```
Select * from table where exists (Select SUBSTRING(ADDRESS_BLOCK,PatIndex('% [A-Z][A-Z] %',ADDRESS_BLOCK),3) from table)
COLLATE Latin1_General_CS_AS_KS_WS ASC; 
```

您可能需要差异排序规则 - 您当前的排序规则显然不区分大小写。您可以找到当前排序规则，并替换`Latin1_General_CS_AS_KS_WS`为您需要的排序规则，将 替换为`CI`，`CS`以获得当前排序规则的区分大小写的版本。

请参阅：http: [//msdn.microsoft.com/en-us/library/ms184391.aspx](http://msdn.microsoft.com/en-us/library/ms184391.aspx)

# java - 文本的图形组件（如 Ellipse2D、Line2D 等）

> ID：11033580
> 
> 赞同：0
> 
> 时间：2012-06-14T12:59:44.973
> 
> 标签：java, text, textarea, awt, graphics2d

一切都在标题中，文本是否有图形（awt）组件作为 Ellispe2D 或 Rectangle2D？（最好可编辑为文本区域）。

感谢您的回答！

# java - 为什么 Java 中没有 ceil(float)？

> ID：11033581
> 
> 赞同：15
> 
> 时间：2012-06-14T12:59:45.037
> 
> 标签：java, floating-point, integer

假设我想四舍五入`float`到`int`in `Java`。
例如，

```
roundUp(0.2) = 1
roundUp(0.7) = 1
roundUp(1.3) = 2
... 
```

我想打电话`Math.ceil`并`Math.round`这样做，但`java.lang.Math`不提供`ceil(float)`。它只提供`ceil(double)`. 所以 my`float`被提升为`double`静默，`ceil(double)`返回`double`和`round(double)`返回`long`，而我需要四舍五入`float`到`int`(not `long`)。

现在我想知道为什么`java.lang.Math`只有`ceil(double)`和没有`ceil(float)`。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-14T13:05:17.080

你可以做：

```
value = (int) Math.ceil(value); 
```

如果您知道这`value`是一个浮点数，那么您可以将结果转换回`float`or `int`。

Java 库提供这两者是没有意义的`ceil(float)`，`ceil(double)`因为所有浮点参数都可以传递给`ceil(double)`具有相同结果的方法。

# python - 通过 Python 更改 CSV 文件中的特定值

> ID：11033590
> 
> 赞同：35
> 
> 时间：2012-06-14T13:00:07.427
> 
> 标签：python, csv

我需要一种方法来更改 CSV 文件的列的特定值。例如，我有这个 CSV 文件：

```
"Ip","Sites"
"127.0.0.1",10
"127.0.0.2",23
"127.0.0.3",50 
```

我需要将“127.0.0.2”行的值 23 更改为 30。

我使用 csv 库：`import csv`

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-06-14T13:15:59.633

这是打开 csv 文件，更改内存中的值，然后将更改写回磁盘的解决方案。

```
r = csv.reader(open('/tmp/test.csv')) # Here your csv file
lines = list(r) 
```

行内容：

```
[['Ip', 'Sites'],
 ['127.0.0.1', '10'],
 ['127.0.0.2', '23'],
 ['127.0.0.3', '50']] 
```

修改值：

```
lines[2][1] = '30' 
```

行内容：

```
[['Ip', 'Sites'],
 ['127.0.0.1', '10'],
 ['127.0.0.2', '30'],
 ['127.0.0.3', '50']] 
```

现在我们只需要将它写回文件

```
writer = csv.writer(open('/tmp/output.csv', 'w'))
writer.writerows(lines) 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2017-02-21T13:27:53.207

您可以使用名为 pandas 的非常强大的库。这是示例。

```
import pandas as pd
df = pd.read_csv("test.csv")
df.head(3) #prints 3 heading rows 
```

输出：

```
 Ip  Sites
0   127.0.0.1   10
1   127.0.0.2   23
2   127.0.0.3   50 
```

现在，如果要更改第一行“站点”列中的值，请运行：

```
df.set_value(1, "Sites", 30) 
```

如果要更改所有值，其中“Ip”等于 127.0.0.2，请运行：

```
df.loc[df["Ip"]=="127.0.0.2", "Sites"] = 30 
```

最后，保存值：

```
df.to_csv("test.csv", index=False) 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-06-14T13:15:39.173

您不能真正替换现有文件中的值。相反，您需要：

1.  读入现有文件
2.  修改内存中的文件
3.  写出新文件（覆盖现有文件）

您还可以做的是逐行读取现有文件，将其写入新文件，同时动态替换值。完成后，关闭两个文件，删除原始文件并重命名新文件。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2020-03-21T13:37:26.277

[接受的答案](https://stackoverflow.com/a/11033891/2745495)的替代方法是：

*   使用[`fileinput`](https://docs.python.org/3.8/library/fileinput.html#fileinput.input)with`inplace=True`就地修改文件
*   用于[`csv.DictReader`](https://docs.python.org/3.8/library/fileinput.html#fileinput.input)通过标题而不是索引访问列（**仅当 CSV 具有标题时才有效**）

测试 CSV：

```
Ip,Sites
127.0.0.1,10
127.0.0.2,23
127.0.0.3,50 
```

测试代码：

```
import fileinput

with fileinput.input(files=('test.csv'), inplace=True, mode='r') as f:
    reader = csv.DictReader(f)
    print(",".join(reader.fieldnames))  # print back the headers
    for row in reader:
        if row["Ip"] == "127.0.0.2":
            row["Sites"] = "30"
        print(",".join([row["Ip"], row["Sites"]])) 
```

主要区别在于您不必像`inplace=True`在幕后那样手动打开输入文件并创建输出文件：

> **可选的就地过滤**：如果关键字参数`inplace=True`被传递给`fileinput.input()`构造`FileInput`函数，则文件被移动到备份文件，标准输出被定向到输入文件（如果与备份文件同名的文件已经存在，它将被静默替换）。这使得编写一个过滤器来重写其输入文件成为可能。

循环逐行遍历 CSV（标题行除外），因此您可以对每一行进行所需的任何处理。

如果您仍想保留原始文件，您可以传入一个`backup=".backup"`以便`fileinput`创建一个*test.csv.backup*文件。

另外，请注意，通过就地编辑，“*标准输出被定向到输入文件*”，因此`print(..)`将其打印到文件而不是命令行。如果要实际打印到控制台，则需要指定`stderr`为 in `print(..., file=sys.stderr)`。

# solr - Solr 接口

> ID：11033591
> 
> 赞同：1
> 
> 时间：2012-06-14T13:00:11.013
> 
> 标签：solr

我有大量要索引和查询的文档（主要是 PDF）。

我想按年将所有这些文档存储在文件系统结构中。

我目前在 Solr 中有这个设置。但我必须运行脚本从 PDF 中提取元数据，然后更新索引。

有没有一种产品可以让我将一个新的 PDF 弹出到一个文件夹中，并由 Solr 自动索引。

我已经看到 Alfresco 这样做了，但它有一些缺点 - 在这些方面还有什么其他的吗？

或者我会使用 nutch 来抓取我的文件系统并将更新发布到 Solr？我不确定我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:18:04.093

Solr 是搜索服务器而不是爬虫。正如您所指出的，Nutch 可以做到这一点（我已经将它用于类似的用例，索引知识库转储）。

本质上，您将托管一个以文件夹结构的根为文档根的网络服务器。然后允许在此网络服务器上列出目录。然后，Nutch 可以抓取此文档转储的顶级 url。

一旦你有了这个 Nutch 创建的索引，[你也可以通过 solr 公开它](http://www.lucidimagination.com/blog/2009/03/09/nutch-solr/)。

# php - 访问在另一个类中创建的类

> ID：11033597
> 
> 赞同：1
> 
> 时间：2012-06-14T13:00:46.527
> 
> 标签：php, oop

`page`我的网页有一堂课。当它被调用时，它会创建一个新的`user`. 这使我可以检查是否有用户登录。这是`page`该类的构造方法：

```
public function __construct() {
    // check user is logged in
    require 'classes/user.class.php';
    $user = new user();
    if(!$user->isLoggedIn()) {
        // user is not logged in
        // load login page
    }
    else {
        // user is logged in
        // load requested page
    }
} 
```

整个用户验证工作正常，但我现在想访问`user`在构造过程中创建的对象`page`。这是否与我处理事情的方式有关，如果是这样，我如何访问该`user`对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T13:15:55.063

老实说，这是一个非常*没有实际意义*的设计。更好的是在页面上下文之外创建用户对象，然后在需要的地方“注入”它：

```
# page.php
class Page {
    # private $_user; # maybe ... probably not needed.
    public function __construct( User $user ) {
        if ( $user->isLoggedIn() ) { /* etc */ }
        # if this will be needed in other functions, save a copy of the
        # obj reference to as an object attribute:
        $this->_user = $user;
    }
}

# user.php
class User {
    public function isLoggedIn() { /* etc */ }
}

# request_controller.php
$user = new User();
$page = new Page( $user ); 
```

基本上，避免从对象方法内部启动类。这导致不可维护和不可测试的代码。特别是当您需要使用模拟服务“模拟”实例时。我建议您重新考虑设计，您拥有的设计只会随着时间的推移而变得更臭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:03:48.953

我可以把`user`它作为一个实例变量，然后用关键字访问它`$this->`

例子：

```
class Page {
    public $user; // private if you want to access it only within Page

    public function __contruct() {
        $this->user = new user();
        // rest of your code
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T13:07:31.760

```
<?php
require_once 'classes/user.class.php';
class page {
    private $myUser;

    public function __construct() {
        // check user is logged in

        $this->myUser = new user();
        if(!$this->myUser->isLoggedIn()) {
            // user is not logged in
            // load login page
        }
        else {
            // user is logged in
            // load requested page
        }       
    }

    public function getUser() {
        return $this->myUser;
    }
}

$p = new page();

$user = $p->getUser();
?> 
```

应该为您解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T13:05:34.087

您可以将对象存储在会话中，然后在任何地方访问它。

# c# - 在 sqldatasource 中编辑参数

> ID：11033598
> 
> 赞同：0
> 
> 时间：2012-06-14T13:00:51.483
> 
> 标签：c#, asp.net, parameters, sqldatasource

我想在 SQLDataSource 中创建一个动态选择命令。它应该从使用 get 发送的 URL 中读取一个值，抓取它并将其粘贴到 select 命令中。

我的 sqldatadource 在我的 aspx 页面中，看起来像这样

```
<asp:SqlDataSource ID="DS" Runat="server"

    SelectCommand="SELECT * FROM [dbo].[DS] WHERE [Install Process] = 'OCC' 
    AND [The Date] = @theDate"

    ConnectionString="<%$ ConnectionStrings:ApplicationServices %>">

</asp:SqlDataSource> 
```

我想更新 Date 参数。我猜你不能在 Page_Load 中更新它，因为页面还没有加载，但老实说我不确定。我可以从 sqldatasource 或其他东西中调用代码隐藏函数吗？

这是我的代码隐藏。它目前在 page_load 方法中，但我猜我需要移动它？任何帮助都会很棒。谢谢

```
protected void Page_Load(object sender, EventArgs e)
{
    string theDate = Request.QueryString["TheDate"];

    DS.SelectParameters.Add("@theDate", theDate);
    DS.SelectParameters["theDate"].DefaultValue = theDate.ToString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:10:06.490

您不能在[此处](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.querystringparameter.querystringfield.aspx)记录的 SqlDataSource 的 aspx 声明中使用 SelectParameters 集合的 QueryStringParmater吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:19:29.490

这是我用过的最好的示例之一，请检查页面中的 Assigning Parameter Values Programmatically。

[http://www.asp.net/web-forms/tutorials/data-access/accessing-the-database-directly-from-an-aspnet-page/using-parameterized-queries-with-the-sqldatasource-cs](http://www.asp.net/web-forms/tutorials/data-access/accessing-the-database-directly-from-an-aspnet-page/using-parameterized-queries-with-the-sqldatasource-cs)

# algorithm - 转义单个字符的最简单算法是什么？

> ID：11033602
> 
> 赞同：9
> 
> 时间：2012-06-14T13:01:06.020
> 
> 标签：algorithm, language-agnostic, escaping

我正在尝试编写两个函数`escape(text, delimiter)`并`unescape(text, delimiter)`具有以下属性：

1.  结果`escape`不包含`delimiter`。

2.  `unescape`是 的倒数`escape`，即

    ```
    unescape(escape(text, delimiter), delimiter) == text 
    ```

    `text`对于和的所有值`delimiter`

可以限制 的允许值`delimiter`。

* * *

**背景**：我想创建一个以分隔符分隔的值字符串。为了能够再次从字符串中提取相同的列表，我必须确保单独的分隔字符串不包含分隔符。

* * *

**我试过**的：我想出了一个简单的解决方案（伪代码）：

```
escape(text, delimiter):   return text.Replace("\", "\\").Replace(delimiter, "\d")
unescape(text, delimiter): return text.Replace("\d", delimiter).Replace("\\", "\") 
```

但发现属性 2 在测试字符串上失败`"\d<delimiter>"`。目前，我有以下工作解决方案

```
escape(text, delimiter):   return text.Replace("\", "\b").Replace(delimiter, "\d")
unescape(text, delimiter): return text.Replace("\d", delimiter).Replace("\b", "\") 
```

这似乎有效，只要`delimiter`is not `\`, `b`or `d`（这很好，我不想将它们用作分隔符）。但是，由于我还没有正式证明它的正确性，恐怕我错过了一些违反其中一个属性的情况。由于这是一个常见的问题，我假设已经有一个“众所周知的证明正确”的算法，因此我的问题（见标题）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T13:08:12.650

你的第一个算法是正确的。

错误在于 unescape() 的实现：您需要**在同一个 pass 中同时**替换`\d`by`delimiter`和`\\`by 。您不能像这样多次调用 Replace()。`\`

 **下面是一些用于安全引用分隔符分隔字符串的示例 C# 代码：

```
 static string QuoteSeparator(string str,
        char separator, char quoteChar, char otherChar) // "~" -> "~~"     ";" -> "~s"
    {
        var sb = new StringBuilder(str.Length);
        foreach (char c in str)
        {
            if (c == quoteChar)
            {
                sb.Append(quoteChar);
                sb.Append(quoteChar);
            }
            else if (c == separator)
            {
                sb.Append(quoteChar);
                sb.Append(otherChar);
            }
            else
            {
                sb.Append(c);
            }
        }
        return sb.ToString(); // no separator in the result -> Join/Split is safe
    }
    static string UnquoteSeparator(string str,
        char separator, char quoteChar, char otherChar) // "~~" -> "~"     "~s" -> ";"
    {
        var sb = new StringBuilder(str.Length);
        bool isQuoted = false;
        foreach (char c in str)
        {
            if (isQuoted)
            {
                if (c == otherChar)
                    sb.Append(separator);
                else
                    sb.Append(c);
                isQuoted = false;
            }
            else
            {
                if (c == quoteChar)
                    isQuoted = true;
                else
                    sb.Append(c);
            }
        }
        if (isQuoted)
            throw new ArgumentException("input string is not correctly quoted");
        return sb.ToString(); // ";" are restored
    }

    /// <summary>
    /// Encodes the given strings as a single string.
    /// </summary>
    /// <param name="input">The strings.</param>
    /// <param name="separator">The separator.</param>
    /// <param name="quoteChar">The quote char.</param>
    /// <param name="otherChar">The other char.</param>
    /// <returns></returns>
    public static string QuoteAndJoin(this IEnumerable<string> input,
        char separator = ';', char quoteChar = '~', char otherChar = 's')
    {
        CommonHelper.CheckNullReference(input, "input");
        if (separator == quoteChar || quoteChar == otherChar || separator == otherChar)
            throw new ArgumentException("cannot quote: ambiguous format");
        return string.Join(new string(separator, 1), (from str in input select QuoteSeparator(str, separator, quoteChar, otherChar)).ToArray());
    }

    /// <summary>
    /// Decodes the strings encoded in a single string.
    /// </summary>
    /// <param name="encoded">The encoded.</param>
    /// <param name="separator">The separator.</param>
    /// <param name="quoteChar">The quote char.</param>
    /// <param name="otherChar">The other char.</param>
    /// <returns></returns>
    public static IEnumerable<string> SplitAndUnquote(this string encoded,
        char separator = ';', char quoteChar = '~', char otherChar = 's')
    {
        CommonHelper.CheckNullReference(encoded, "encoded");
        if (separator == quoteChar || quoteChar == otherChar || separator == otherChar)
            throw new ArgumentException("cannot unquote: ambiguous format");
        return from s in encoded.Split(separator) select UnquoteSeparator(s, separator, quoteChar, otherChar);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:12:25.140

当分隔符*确实*以`\`,`b`或`d`. `unescape`在算法中也使用相同的替代替换**

# java - 如何使用 Eclipse 中包含的外部库创建 jar？

> ID：11033603
> 
> 赞同：98
> 
> 时间：2012-06-14T13:01:06.177
> 
> 标签：java, eclipse, jar

我完成了连接到数据库（MySQL）的项目。现在我想将项目导出为 jar。但是我不知道如何包含它的外部依赖项？有没有办法在 Eclipse 中做到这一点，或者我应该为此使用任何脚本？

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2012-06-14T13:04:59.293

当您将项目导出为“可运行 jar”（在项目上右键 -> 导出 -> 可运行 jar）时，您可以选择将所有依赖项打包到生成的 jar 中。它还有其他两种方法（见截图）来导出你的库，在决定你将使用哪种打包方法时要注意许可证。

![包库](../Images/6344e0f970b15d0788cc7f52df291a92.png)

“启动配置”下拉列表中填充了包含`main(String[])`方法的类。当您“运行” jar 时，将启动选定的类。

导出为可运行的 jar 使用构建路径上的依赖项（在项目上用鼠标右键 -> 构建路径 -> 配置构建路径...）。当您导出为“常规”（不可运行）jar 时，您可以选择项目中的任何文件。如果您的项目文件夹中有库，则可以包含它们，但不能包含外部依赖项，例如[maven](/questions/tagged/maven "显示标记为“maven”的问题")（对于 maven 项目，请[在此处搜索](https://stackoverflow.com/search?q=maven%20runnable%20jar%20with%20dependencies)）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-14T13:05:49.683

您可以使用 Export->Java->Runnable Jar 创建一个包含其依赖项的 jar

或者，您也可以使用[fatjar](http://fjep.sourceforge.net/) eclipse 插件将 jar 捆绑在一起

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-14T13:06:12.057

您可以右键单击项目，单击导出，输入“jar”，选择“可运行的 JAR 文件导出”。在那里，您可以选择“将所需的库提取到生成的 JAR 中”。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-16T18:03:36.080

亲自，

上面的答案都不适合我，我仍然不断收到 NoClassDefFound 错误（我正在使用 Maven 进行依赖）。我的解决方案是使用“mvn clean install”构建并使用该命令创建的“[project]-jar-with-dependencies.jar”。同样，在 Eclipse 中，您可以右键单击项目 -> 运行方式 -> Maven 安装，它将把 jars 放在目标文件夹中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-11-10T16:18:26.210

如果您想导出 Java web 项目的所有 JAR 文件，请使用 ZIP 工具（例如 7-Zip）打开最新生成的 WAR 文件，导航到 /WEB-INF/lib/ 文件夹。在这里，您将找到该项目所需的所有 JAR 文件（如“参考库”中所列）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-06-14T09:35:18.723

要在 Eclipse 中生成 jar 文件，请右键单击要为其生成的项目，选择 Export>Java>Runnable Jar File，

[![在此处输入图像描述](../Images/adffbfb63adc15c38275f2104ecda2c4.png)](https://i.stack.imgur.com/lKDJr.png)

[![在此处输入图像描述](../Images/5326eb33b7473839a7605b36306f8786.png)](https://i.stack.imgur.com/SkSOh.png)

它创建的 jar 包含来自 Pom.xml 的所有依赖项，但如果您为应用程序使用第三方依赖项，请确保许可证问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-31T05:44:50.820

将源代码导出到 jar 时，请确保从选项中选择可运行的 jar 选项。然后选择是否要打包所有依赖 jar 或直接将它们包含在 jar 文件中。这取决于您正在从事的项目。

然后直接通过 java -jar example.jar 运行 jar。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-13T16:05:25.367

如果它是一个独立的（主要方法）java项目然后没有任何特定路径将所有jar放在项目中而不是任何特定路径然后右键单击项目->导出->可运行jar->选择午餐配置和库处理然后选择单选按钮选项“将所需的库打包到生成的 jar 中”-> 完成。

或者

如果您有一个 Web 项目，则将所有 jar 放入 web-inf/lib 文件夹并执行相同的步骤。

# javascript - 为什么使用 JavaScript 拖动图像在 Firefox 中不起作用？

> ID：11033604
> 
> 赞同：0
> 
> 时间：2012-06-14T13:01:14.587
> 
> 标签：javascript, firefox, drag-and-drop, mouseevent, dom-events

我正在使用下面的代码来拖动图像 ( `#StndSoln1`)。它在 Chrome 和所有版本中都能完美运行，但在 Firefox 中却不行。这里 startDrag() 是我附加到 mousedown 事件侦听器的函数。任何人都可以帮助我。

```
function initialFunction(){

document.getElementById("StndSoln1").addEventListener('mousedown',startDrag,false);
document.getElementById("StndSoln1").addEventListener('mousemove',drag,false);
document.getElementById("StndSoln1").addEventListener('mouseup',stopDrag,false);

}

function startDrag()

{

if (!moveFlag){

currentTraget=document.getElementById("StndSoln1");

offsetX=currentTraget.offsetLeft;
offsetY=currentTraget.offsetTop;
ImgPlaced=false;    
moveFlag=true;

x=window.event.clientX;
y=window.event.clientY; 

event.preventDefault();
}
}

   // Fn for drag the current target object...
  function drag(){

if (moveFlag && !ImgPlaced){    
    currentTraget.style.left=(offsetX+window.event.clientX-x)+"px";
    currentTraget.style.top=(offsetY+window.event.clientY-y)+"px";
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:55:26.830

我实际上遇到了类似的问题，所以即使没有您使用的代码，我也可以尝试提供帮助。

看，Firefox 开发人员有一个绝妙的想法，这样当您拖动图像时，您可以“移动”它，并可能将其放到资源管理器窗口中以快速轻松地下载它，或者放到标签栏打开新标签中的图像。这样做的明显缺点是它会导致其他浏览器没有的默认行为。

简单的解决方案是确保您的所有事件都正确取消了默认操作（`event.preventDefault`, `return false`，那种事情）。如果这也失败了，那么您应该使用`<div>`带有 a 的元素`background-image`而不是`<img>`元素。

# php - 在 MySQL 中使用 XML 函数的示例。PHP

> ID：11033605
> 
> 赞同：0
> 
> 时间：2012-06-14T13:01:14.303
> 
> 标签：php, mysql, xml, function

有人可以提供一个如何存储xml数据并将xml数据读入MySQL的例子吗？我正在使用 php，并且我已阅读此文档：[http ://dev.mysql.com/doc/refman/5.6/en/xml-functions.html](http://dev.mysql.com/doc/refman/5.6/en/xml-functions.html)

但我根本无法得到我想要的结果。

非常感谢你。（我使用它是因为我对存储在 xml 中的数据有很多调用，并且我需要更快的函数。）

[编辑] 根据要求：

我目前有 30k .xml 文件，每个文件中有 25-50 个元素。我每秒数百次询问各种文件中的值。我发现这里执行的 I/O 操作存在巨大的瓶颈。

我认为将 .xml 文件中的数据存储到数据库中会使访问这些值的过程更快。

我正在寻求有关如何解决此问题的帮助/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:18:42.340

访问存储在数据库中的数据不会比访问磁盘上的数据快。数据库速度是通过能够索引数据来提供的，并且 XML 的内容（我假设）没有被索引。

因此，除非您可以从 XML 中取出关键字段，否则它不会对您有所帮助。

但是，在回答您的实际问题（而不是它是否是一个好主意）时，如果您使用的是 mysqli 连接和准备好的语句：

```
if ($stmt = $mysqli->prepare("INSERT INTO MY_DATA_TABLE (Id, Data) VALUES(?,?)")) 
{   
    $stmt->bind_param('ib', $id, $data);
    for($i = 0; $i < $numfiles; $i++)
    {
        $id= $row;
        $data=  readfile($id);
        $stmt->execute();
    }
 } 
```

类似的东西？（没试过）。

编辑：

但从您的回答来看，如果您只想从 XML 文件中读取元素，您可能需要查看简单的 XML： http: [//php.net/manual/en/book.simplexml.php](http://php.net/manual/en/book.simplexml.php)

# actionscript-3 - 将 Spark 元素添加到 MX 包装器时出现问题

> ID：11033607
> 
> 赞同：0
> 
> 时间：2012-06-14T13:01:30.280
> 
> 标签：actionscript-3, flash, apache-flex, flex4

所以我制作了我正在处理的代码的简化版本......我有一个具有以下结构的自定义 Flex 组件（基于`s:HGroup`）：

```
<s:HGroup xmlns:fx="http://ns.adobe.com/mxml/2009" 
      xmlns:s="library://ns.adobe.com/flex/spark" 
      xmlns:mx="library://ns.adobe.com/flex/mx" 
      width="100%" height="100%" >
<fx:Script>
    <![CDATA[           
        import spark.components.Button;                 
        public function addButton():void{               
            var myButton:Button = new Button(); 
            myButton.label = "New Button"; 
            buttonContent.addElement(myButton);
        }           
    ]]>
</fx:Script>        
<mx:HDividedBox width="100%" height="100%">
    <s:VGroup width="100%" height="100%" gap="5">
        <s:VGroup width="100%" height="100%">
        </s:VGroup>         
        <s:Group width="100%" height="100%">
            <s:Group left="5" top="15" bottom="5" right="5" id="buttonContent" />
        </s:Group>          
    </s:VGroup> 
    <s:VGroup width="100%" height="100%">
    </s:VGroup>
</mx:HDividedBox> 
```

在这个组件中，我使用了一个`mx:HDividedBox`组件，因为没有`Spark`其他选择......

因此，当我调用该函数时`addButton()`，我的意图是将自定义 Spark DataGrid（在此示例中是一个简单`s:Button`的代码制作）添加到`Spark Group`with id`buttonContent`中。我注意到此按钮未添加到`Group`with id`buttonContent`中。

当我注释掉按应有`mx:HDividedBox`的`Spark button`方式添加时...我想在`Spark`和`mx`显示格式之间存在一些冲突。

有没有人有同样的问题？或者知道一个可用的解决方案/解决方法？欢迎任何提示！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:05:45.110

你的例子适用于我的电脑。您使用的是哪个 flex SDK 版本？你真的在你的真实代码中使用“100%”的宽度和高度吗？（DividedBox 的大小很棘手，如果你没有将 resizeToContent 设置为 true，那么如果内容发生变化，dividedBox 将不会自行调整大小）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:05:34.493

尝试将“id”字段添加到 HDDividedBox。过去，当父母没有 id 时，Flex 遇到了无法识别元素的问题，这可能是回归问题？

（会添加为评论，但我还没有访问权限..）

# jakarta-ee - 使用 Java EE/EJB3 进行批处理

> ID：11033608
> 
> 赞同：0
> 
> 时间：2012-06-14T13:01:33.493
> 
> 标签：jakarta-ee, batch-file

我有如下要求。

已经有一个 Websphere 服务器和一个 MDB 模块，用于将消息保存在数据库表中。每行都将在列中标记为 INSERTED 状态。

现在我们需要开发另一个应用程序或批处理应用程序来提取这些消息并处理该数据库中的每一行，并在处理完成后将这些状态标记为 Completed。

最好的方法是什么？我们听说 EJB 3.1 Singleton Startup bean 对启动批处理应用程序很有用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:21:34.810

一种选择是创建第二个 JMS 队列来处理消息。作为将消息写入数据库的事务的一部分，将消息的 ID 添加到新队列中。

然后，您的处理应用程序可以作为附加到这个新队列的 MDB 完成。这将消息的接收与消息的处理分开，因此您可以相应地管理 MDB 池大小。也意味着无需轮询数据库来检查新消息。

# javascript - Android 浏览器上的滚动事件未触发。需要解决方法

> ID：11033613
> 
> 赞同：5
> 
> 时间：2012-06-14T13:01:47.447
> 
> 标签：javascript, android, events, dom

我创建了一个带有视差街景的网站。有关存档版本，请参见[此处](http://xandor.co.za/smartdevice)。

它适用于所有主要的桌面浏览器和 Safari Mobile。它也适用于 Mobile Firefox 和 Chrome for Android Beta。但是，默认的 Android 浏览器在滚动事件方面存在问题。让我说清楚。滚动不是问题。div 根据需要滚动。滚动**事件**不会触发。我在 Honeycomb 和 ICS 上遇到的这个问题。

我不关心其他移动浏览器，因为对于移动屏幕尺寸，通常看不到视差场景；媒体查询和条件 JavaScript 加载会处理这个问题。响应式设计和所有爵士乐。

基本上，我编写了一个 parallise() jQuery 插件，它根据每个图像的位置和“深度”定位每个图像。此函数绑定到滚动事件。

在 Android 浏览器上，此事件仅**在下一次 touch 开始时触发**，而不是连续触发。

好的，所以我想如果我将函数绑定到`touchstart`,`touchmove`和`touchend`events 我会解决我的问题。没有雪茄。[其他触摸事件也被窃听。](http://code.google.com/p/android/issues/detail?id=19827)应用建议的解决方法会导致事件触发，但正如我必须的那样`e.preventDefault()`，滚动（练习的重点）被禁用。

如果我只是轮询舞台 div 相对于窗口 div 的位置怎么办？原来，位置信息仅**在下一次触摸开始时**更新。

我已经走到了尽头。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-07T10:42:48.250

即使触摸事件在有漏洞的 Android 版本上正常工作，并且您随后能够在拖动过程中有效地跟踪本机滚动位置，这也容易出错。例如，它不会考虑在触摸完成后发生的动量动画。

iOS 和 Android 为提高滚动性能做出了牺牲。在这两个平台上，在滚动完成之前都无法获得准确的滚动位置。在动量动画完成之前，滚动事件（在 上`<body>`）不会触发。因此，虽然您最初的问题是关于溢出的滚动事件，`<div>`但无论如何解决这个问题可能对您没有完全帮助。

如果您希望动画随着滚动及时更新，那么您需要以编程方式执行滚动，而不是使用浏览器的本机滚动。最好的库是[iScroll](http://iscrolljs.com/)。如[本演示](http://lab.cubiq.org/iscroll5/demos/parallax/)所示，您可以非常轻松地实现视差效果。

如果您需要更复杂的效果（在您的示例中为行走角色），您可以选择 iScroll 的“探针”版本，它允许对滚动位置进行像素完美的轮询，以降低性能。

但是，使用 iScroll 有很多缺点：

*   您可能需要更改标记和样式
*   对于桌面浏览器来说这是不必要的开销，但由于标记更改可能难以仅用作后备
*   滚动不会感觉完美——在 iOS 上，滚动性能通常很出色——动量计算的细微差别会让人感到不和谐。在 Android 上，滚动可能会变得比平时更迟钝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T09:49:39.263

在 touchstart 上滑动不需要 preventdefault 的垫片：[https ://github.com/TNT-RoX/android-swipe-shim](https://github.com/TNT-RoX/android-swipe-shim)

# css - 使用 CSS3 插入边框半径

> ID：11033615
> 
> 赞同：37
> 
> 时间：2012-06-14T13:01:49.343
> 
> 标签：css, css-shapes

有没有办法用css3创建插入边框半径？（无图片）

我需要这样的边界半径：

![嵌入边界半径](../Images/8de0bea5cf977b5b274027509a7f78d6.png)

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-21T13:07:44.460

根据Lea Verou，我发现使用所有 CSS 和 HTML（无图像等）实现此目的的最佳方法是[使用 CSS3 渐变。](http://lea.verou.me/2011/03/beveled-corners-negative-border-radius-with-css3-gradients/)从她的解决方案：

```
div.round {
    background:
        -moz-radial-gradient(0 100%, circle, rgba(204,0,0,0) 14px, #c00 15px),
        -moz-radial-gradient(100% 100%, circle, rgba(204,0,0,0) 14px, #c00 15px),
        -moz-radial-gradient(100% 0, circle, rgba(204,0,0,0) 14px, #c00 15px),
        -moz-radial-gradient(0 0, circle, rgba(204,0,0,0) 14px, #c00 15px);
    background:
            -o-radial-gradient(0 100%, circle, rgba(204,0,0,0) 14px, #c00 15px),
            -o-radial-gradient(100% 100%, circle, rgba(204,0,0,0) 14px, #c00 15px),
            -o-radial-gradient(100% 0, circle, rgba(204,0,0,0) 14px, #c00 15px),
            -o-radial-gradient(0 0, circle, rgba(204,0,0,0) 14px, #c00 15px);
    background:
            -webkit-radial-gradient(0 100%, circle, rgba(204,0,0,0) 14px, #c00 15px),
            -webkit-radial-gradient(100% 100%, circle, rgba(204,0,0,0) 14px, #c00 15px),
            -webkit-radial-gradient(100% 0, circle, rgba(204,0,0,0) 14px, #c00 15px),
            -webkit-radial-gradient(0 0, circle, rgba(204,0,0,0) 14px, #c00 15px);
    background-position: bottom left, bottom right, top right, top left;
        -moz-background-size: 50% 50%;
        -webkit-background-size: 50% 50%;
    background-size: 50% 50%;
    background-repeat: no-repeat;
} 
```

最终结果是一组带有曲线的透明渐变。查看完整的[JSFiddle](http://jsfiddle.net/leaverou/EjE7c/light/)以获取演示并尝试使用它的外观。

显然，这取决于对`rgba`and的支持`gradient`，因此应该被视为渐进增强，或者如果它对设计至关重要，则应该为旧浏览器提供基于图像的回退（尤其是 IE，它`gradient`甚至不支持 IE9 ）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-03-17T17:39:39.457

您可以通过将透明圆形元素绝对定位在带有盒子阴影的角落中来实现这一点。我使用了一个`div`包含跨度、框阴影、边框和伪选择器的隐藏溢出 s 的组合。

看看我的[例子](http://jsfiddle.net/bretthayes/pLqv2/1/)。

这是您入门所需的基本 HTML 和 CSS：

```
a {
  display: inline-block;
  width: 250px;
  height: 100px;
  background: #ccc;
  border: 2px solid #000;
  position: relative;
  margin: 10px;
}

a div {
  position: absolute;
  top: 0;
  overflow: hidden;
  width: 15px;
  height: 100%;
}

a div:after {
  content: '';
  background: #000;
  width: 2px;
  height: 75px;
  position: absolute;
  top: 12.5px;
}

a div:first-of-type {
  left: -14px;
}

a div:first-of-type:after {
  left: 0;
}

a div:last-of-type {
  right: -14px;
}

a div:last-of-type:after {
  right: 0;
}

a span {
  display: block;
  width: 30px;
  height: 30px;
  background: transparent;
  position: absolute;
  bottom: -20px;
  right: -20px;
  border: 2px solid #000;
  border-radius: 25px;
  box-shadow: 0 0 0 60px #ccc;
}

a div:first-of-type span {
  left: -20px;
}

a div:first-of-type span:first-child {
  top: -20px;
}

a div:first-of-type span:last-child {
  bottom: -20px;
}

a div:last-of-type span {
  right: -20px;
}

a div:last-of-type span:first-child {
  top: -20px;
}

a div:last-of-type span:last-child {
  bottom: -20px;
}
```

```
<a href="">
  <div>
    <span></span>
    <span></span>
  </div>

  <div>
    <span></span>
    <span></span>
  </div>
</a>
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-14T13:19:04.467

我认为如果角落必须是透明的，这是不可能的，但是如果背景是已知的，您可以在每个角落创建一个带有圆形边框的 div。如果这些 div 被赋予与页面背景相同的背景颜色，则效果将起作用。

在此处查看我的示例[http://jsfiddle.net/TdDtX/](http://jsfiddle.net/TdDtX/)

```
#box {
    position: relative;
    margin: 30px;
    width: 200px;
    height: 100px;
    background: #ccc;
    border: 1px solid #333;
}

.corner {
    position: absolute;
    height: 10px;
    width: 10px;
    border: 1px solid #333;
    background-color: #fff;
}

.top-left {
    top: -1px;
    left: -1px;
    border-radius: 0 0 100% 0;
    border-width: 0 1px 1px 0;
}

.top-right {
    top: -1px;
    left: 190px;
    border-radius: 0 0 0 100%;
    border-width: 0 0 1px 1px;
}

.bottom-left {
    top: 90px;
    left: -1px;
    border-radius: 0 100% 0 0;
    border-width: 1px 1px 0 0;
}

.bottom-right {
    top: 90px;
    left: 190px;
    border-radius: 100% 0 0 0;
    border-width: 1px 0 0 1px;
}
```

```
<div id="box">
    <div class="corner top-left"></div>
    <div class="corner top-right"></div>
    <div class="corner bottom-left"></div>
    <div class="corner bottom-right"></div>
</div>
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-14T13:05:49.860

看起来这不可能。我尝试了一个负值的边界半径，只是为了看看会发生什么，但它没有效果。

**编辑：**

即使你将盒子分解成更小的部分，在某些时候你仍然需要创建一个透明的嵌入角。透明度是一个棘手的部分，它可能会在没有图像的情况下阻止这一点。基本上，您必须能够渲染一个带有不透明周围 bg 的透明圆圈（如果这在 CSS 中是可能的，我很想知道如何:)

如果你不需要透明度，有办法做到这一点。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-14T13:23:32.033

您可以使用新的 css3-Border-images 来实现这种效果（嗯，它是图像，但它可以毫无问题地缩放）。但这是相当新的，还没有得到广泛的支持（在所有像样的浏览器（带有前缀）中，除了 IE 是准确的；））。

一篇关于[csstricks](http://css-tricks.com/understanding-border-image/)上边框图像的好文章。

[浏览器支持](http://caniuse.com/#search=border-image)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-11-18T07:24:08.140

```
body {
    background: #fff;
}

.div{
 position:relative;
}
.box {
background: #f7f7f7;
height: 178px;
width: 409px;
margin: 25px;
/*padding: 20px;*/
position: relative;
overflow: hidden;
border: 1px solid #ccc;
border-left: 0px;
}
.box:before {
content: "";
display: block;
background: #fff;
position: absolute;
top: -33px;
left: -263px;
width: 300px;
height: 242px;
border-radius: 300px;
border: 1px solid #ccc;
}
```

```
<div class="div">
<div class="box"></div>
</div>

</body>
</html>
```

[这里的例子](http://jsfiddle.net/dVmX3/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-14T12:45:06.440

嗯，您可以在这里使用这个小技巧来创建[插入边框半径](http://jonmifsud.com/blog/inverse-border-radius-in-css/)

然后为了支持透明度，您可能必须在两者之间添加其他块。或多或少像过去的圆形图像的处理方式；透明图像的每个角落都有一个跨度。并跨越两侧和顶部以填补空白。除了使用图像，您可以使用这个技巧在 CSS 中执行此操作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-01-10T17:24:45.620

```
body {
    background: #fff;
}

.div{
 position:relative;
}
.box {
background: #f7f7f7;
height: 178px;
width: 409px;
margin: 25px;
/*padding: 20px;*/
position: relative;
overflow: hidden;
border: 1px solid #ccc;
border-left: 0px;
}
.box:before {
content: "";
display: block;
background: #fff;
position: absolute;
top: -33px;
left: -263px;
width: 300px;
height: 242px;
border-radius: 300px;
border: 1px solid #ccc;
}
```

```
<div class="div">
<div class="box"></div>
</div>

</body>
</html>
```

# asp.net - ~ 当网站托管在子目录中时，不解析为 Request.ApplicationPath

> ID：11033617
> 
> 赞同：2
> 
> 时间：2012-06-14T13:01:55.753
> 
> 标签：asp.net

我有一个 asp.net 网站，它位于根目录的子目录中。

示例：`http:localhost:6464/MyWebsite` 或`http://www.myDomain.com/MySite`

当我使用 ASP.Net Image 按钮并将其 ImageUrl 属性设置为`"~/images/myimage.png"`时，它不会解析为，`http:localhost:6464/MyWebsite/images/myimage.png`而是解析为 `http:localhost:6464/images/myimage.png`，并且我收到错误 200（找不到资源）。

我在某处读到，对于服务器控件，我必须使用“~”。

我目前使用的一种解决方案是，在 webconfig 中，我为 BaseURL 创建一个条目并将其设置为

```
http:localhost:6464/MyWebsite/ 
```

然后将其用作`<asp:ImageButton ID="imgButton2" ImageURL="<%=Context.Items["baseURL"]%>images/myimage.png" runat="server"/>`.

这可行，但我正在检查是否有更优雅的方式。

**更新：**

那么， **如何解析到应用程序/虚拟目录的根目录** 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:23:56.277

我有一个类似的问题以这种方式解决：

在 site.master 的代码后面的页面中，我添加了：

```
protected void Page_Load(object sender, EventArgs e) {
    this.Page.DataBind();
    ...
} 
```

所有服务器端控件都应该有“~/”。例如：

```
<asp:Image ID="ImageSpace" runat="server" ImageUrl="~/images/spacer.gif" />
<asp:HyperLink ID="LinkMenuXXX" runat="server" NavigateUrl="~/xxx.aspx"/> 
```

所需的客户端控件具有以下模型（例如）：

```
<script type="text/javascript" src='<%# ResolveUrl("~/")%>js/cookie/jquery.cookie.js'></script> 
```

我希望它有帮助

# mongodb - 如何在 MongoDB 中进行假联接？

> ID：11033622
> 
> 赞同：0
> 
> 时间：2012-06-14T13:02:08.187
> 
> 标签：mongodb

我正在使用 PHP 和 MongoDB 开发一个 webapp。在这个应用程序中，我保留了两个集合。一个用于保存有关文件的数据，另一个用于跟踪每个文件的下载事件。

我需要获取 10 个最新下载的文件，但我知道加入不是一个选项。事件文档仅存储文件 id，其他集合存储缩略图。

现在我首先获取最近下载的 10 个文件并按日期排序，顺序很好，但随后我使用这个文件数组（它们的 id）并进行 where_in 查询，在其中查找 ids 数组中存在的文件. 这也很好用（我得到了所选文件的缩略图），但我不能再保留订单了。最近下载的文件不再位于顶部。

如何在不循环遍历它们的情况下保持 id 的顺序，从而进行 10 个新查询而不是一个？

我无法更改架构，因为我有超过 40.000 个文档 :)

**更新**

简而言之，这就是我想要做的：

1.  获取最近下载的 10 个文件的所有 ID。按下载时间戳排序。
2.  使用这个 ID 数组并查询文件集合并获取每个文件的详细信息，如缩略图、说明等。

上述步骤工作正常，但我无法保持第一步的顺序，因此我无法获得最近下载的文件。我知道我可以查看 id 数组并获取每个文件的数据，但这将花费我 10 个查询而不是一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:08:04.367

我真的不明白你的问题。这是一些伪代码：

```
// get last N download events
events = get_latest_downloads() 

// retrieve associated file data
file_array = get_all_file_info_by_events(events)

display_data = []
for(e in events) {
  data = find_file_info_in_the_array(file_array, e.file_id)
  display_data.push(data)
}

// now display_data is contains full file info, sorted by download time. 
```

# javascript - 图像将整个身体向右移动

> ID：11033624
> 
> 赞同：1
> 
> 时间：2012-06-14T13:02:11.300
> 
> 标签：javascript, html, css

编辑：我是个白痴。我只是有一个垂直长的图像，所以它“移动”了，因为出现了滚动条。我知道... :O

我很难弄清楚为什么图像会移动整个身体，这是一个大问题。你可以在这里查看：http: [//needstackhelp.tumblr.com/](http://needstackhelp.tumblr.com/)

所以基本上，如果你点击右上角的“隐藏帖子”，它会收缩 div，从而隐藏图像。您还会注意到，每当您单击隐藏帖子，然后显示时，它会稍微左右移动整个身体。为什么这样？但是，如果我删除显示“这是图像”的图像，则身体会停留在一个地方！

我该如何解决这个问题？我计划在 div 中始终有一个图像，所以这对我来说是一个非常重要的问题。

另外，对于那些要诊断源代码的人，我很抱歉，我从没想过其他人会需要查看代码，而我只是一个非常懒惰的设计师。大多数情况下，只需使用 Chrome/Firefox 的检查元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:06:13.727

我看到的唯一变化仅仅是浏览器隐藏/显示其垂直滚动条，从而稍微改变了正文宽度并导致居中内容重新调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:06:52.710

您的图像比窗口浏览器高，因此，您的浏览器必须构建一个垂直滚动条。这就是为什么，你的身体宽度会受到影响。

# c# - 在 TreeView 中对对象进行分类？

> ID：11033632
> 
> 赞同：2
> 
> 时间：2012-06-14T13:02:46.973
> 
> 标签：c#, winforms, treeview

我想按类别组织一组`Object`（`MyPlugin`） 。`TreeView`实际上我正在`TreeView`使用以下方法将它们添加到：

```
 internal static TreeNode AddPluginNode(TreeView parent, AbstractEnvChecker plugin)
  {
      TreeNode created = new TreeNode(plugin.Name) { Tag = plugin };
      parent.Nodes.Add(created);
      return created;
  } 
```

// 我正在使用，`Tag`所以我可以`MyPlugin` `Type`为每个保存`Node`

这是我用来填充我`TreeView`的方法`List<MyPlugin>`：

```
internal static void FillTreeViewWithPlugins(TreeView p_TreeView, Type p_Type, IList<AbstractEnvChecker> p_List)
{
    TreeNode v_TreeNode;
    if (p_TreeView != null)
    {
        p_TreeView.Nodes.Clear();
        foreach (object p_Item in p_List)
        {
            if (p_Item.GetType().IsSubclassOf(p_Type))
            {
                v_TreeNode = null;
                v_TreeNode = AddPluginNode(p_TreeView, p_Item as AbstractEnvChecker);

            }
        }
    }
} 
```

一切正常，但问题是前面的方法显示了一个简单`TreeView`的包含然后列表的`MyPlugin`. 我想通过一个名为`Category`( `String MyPlugin.Category`) 的属性对它们进行分类。

所以我应该这样进行：

```
TreeNode testNodeA = new TreeNode("A"); 
TreeNode testNodeB = new TreeNode("B");
TreeNode testNodeC = new TreeNode("C");
TreeNode[] array = new TreeNode[] { testNodeA, testNodeB, testNodeC };
TreeNode cat = new TreeNode("Categorie X", array);
treeView1.Nodes.Add(cat); 
```

1.  如果我想保留我以前的代码，我不知道每个类别要添加多少插件，所以我不能使用`Array`固定尺寸的插件......
2.  我不能使用`List`，因为`TreeNode`构造函数只接受`Array`而`TreeView.Nodes.Add`方法只接受`TreeNode`......

我该怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:12:38.857

在创建节点时即时构建类别字典。稍后，仅将这些节点添加到树中。步骤如下：

声明这样的字典

```
Dictionary<string, TreeNode> categoryNodes = new ...; 
```

键是类别名称，值是`TreeNode`类别的。

在遍历`MyPlugin`列表中的所有 s 时，检查字典中是否存在类别节点，如果没有则创建一个：

```
if (!categoryNodes.ContainsKey(p_Item.Category))
    categoryNodes[p_Item.Category] = new TreeNode(p_Item.Category); 
```

`TreeNode`在相应的类别节点下为插件添加新的：

```
v_TreeNode = AddPluginNode(categoryNodes[p_Item.Category], p_Item as AbstractEnvChecker); 
```

最后，将字典的所有值添加到树中：

```
foreach (string key in categoryNodes.Keys)
{
    p_TreeView.Nodes.Add(categoryNodes[key]);
} 
```

您的代码应如下所示：

```
internal static void FillTreeViewWithPlugins(TreeView p_TreeView, Type p_Type, IList<AbstractEnvChecker> p_List)
{
    Dictionary<string, TreeNode> categoryNodes = new Dictionary<string, TreeNode>();
    TreeNode v_TreeNode;

    if (p_TreeView != null)
    {
        p_TreeView.Nodes.Clear();

        foreach (object p_Item in p_List)
        {
            if (p_Item.GetType().IsSubclassOf(p_Type))
            {
                if (!categoryNodes.ContainsKey(p_Item.Category))
                    categoryNodes[p_Item.Category] = new TreeNode(p_Item.Category);

                v_TreeNode = null;
                v_TreeNode = AddPluginNode(categoryNodes[p_Item.Category], p_Item as AbstractEnvChecker);    
            }
        }

        foreach (string cat in categoryNodes.Keys)
            p_TreeView.Nodes.Add(categoryNodes[cat]);
    }
} 
```

# java - 使用 JPA 连接刷新

> ID：11033633
> 
> 赞同：2
> 
> 时间：2012-06-14T13:03:07.940
> 
> 标签：java, jpa, orm, ejb-3.0

我正在使用 EJB3，但在刷新`EntityManager`.

问题是我的应用程序必须准备好供许多人使用，但是如果一个人更新同一日期，`EntityManager`则不会阻塞该行，并且它看不到其他人在 x 分钟后所做的更改。

`EntityManager`当我执行“选择”、“插入”、“更新”或“删除”时，有人知道如何刷新吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:20:43.820

尝试刷新实体。例如：

```
public void create(MyEntity entity) {
    getEntityManager().persist(entity);
    getEntityManager().flush();
    getEntityManager().refresh(entity);
}

public void edit(MyEntity entity) {
    getEntityManager().merge(entity);
    getEntityManager().flush();
    getEntityManager().refresh(entity);
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:27:14.933

这是一个并发问题，您应该阅读[JPA 规范](http://www.jcp.org/en/jsr/detail?id=317)第 3.4 节关于锁定和并发的内容。这包括乐观和悲观锁定以及版本化属性的使用。

此外，第 3.2.5 节还介绍了如何刷新实体实例。

# powershell - 我需要使用 powershell 修改 2008 域上的 DNS 记录

> ID：11033639
> 
> 赞同：1
> 
> 时间：2012-06-14T13:03:20.157
> 
> 标签：powershell, dns, wmi

其中 BRIVWTDC2 是我的 DC

```
$rec = [WmiClass]"\\BRIVWTDC2\root\MicrosoftDNS:MicrosoftDNS_ResourceRecord"
$rec | get-member -membertype method 
```

给我：

```
 TypeName: System.Management.ManagementClass#ROOT\MicrosoftDNS\MicrosoftDNS_ResourceRecord

Name                                 MemberType Definition
----                                 ---------- ----------
CreateInstanceFromTextRepresentation Method     System.Management.ManagementBaseObject CreateInstanceFromTextRepresentation(System.String DnsServe...
GetObjectByTextRepresentation        Method     System.Management.ManagementBaseObject GetObjectByTextRepresentation(System.String DnsServerName, ... 
```

和

```
$rec.CreateInstanceFromTextRepresentation 
```

给我：

```
PS C:\Windows\system32> $rec.CreateInstanceFromTextRepresentation

MemberType          : Method
OverloadDefinitions : {System.Management.ManagementBaseObject CreateInstanceFromTextRepresentation(System.String DnsServerName, System.String Contain
                      erName, System.String TextRepresentation)}
TypeNameOfValue     : System.Management.Automation.PSMethod
Value               : System.Management.ManagementBaseObject CreateInstanceFromTextRepresentation(System.String DnsServerName, System.String Containe
                      rName, System.String TextRepresentation)
Name                : CreateInstanceFromTextRepresentation
IsInstance          : True 
```

那为什么我不能

```
$rec.CreateInstanceFromTextRepresentation("BRIVWTDC2", "stage.testdmc.com", "SECARC in CNAME BRIVWTARC2.stage.testdmc.com") 
```

其中 arg 是 DC，arg 2 是区域，arg 3 是文本表示 = 让我成为 RIVWTARC2.stage.testdmc.com 的别名 SECARC

我只是得到：

```
Exception calling "CreateInstanceFromTextRepresentation" : "Generic failure "
At line:1 char:42
+ $rec.CreateInstanceFromTextRepresentation <<<< ("BRIVWTDC2", "stage.testdmc.com", "'SECARC' in CNAME 'BRIVWTARC2.stage.testdmc.com'")
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : WMIMethodException 
```

这说明我在做一些根本上愚蠢的事情......

帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:55:30.737

`SECARC`需要是 FQDN`SECARC.stage.testdmc.com`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:43:21.230

[看起来您在 . 上缺少第四个输出参数`CreateInstanceFromTextRepresentation`。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682714%28v=vs.85%29.aspx). 尝试：

```
$rr = $null
$rec.CreateInstanceFromTextRepresentation("BRIVWTDC2", 
                                          "stage.testdmc.com", 
                                          "SECARC in CNAME BRIVWTARC2.stage.testdmc.com", 
                                          [ref] $rr ) 
```

您可能必须将其实例`$rr`化为 MicrosoftDNS_ResourceRecord 的实例。我不知道该怎么做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T17:40:25.913

这是权限，我们需要是可以更改 DNS 的人（ Heads and Brick Walls :-( ) 以下示例创建 DNS 别名，必须以管理员或可以更改 DNS 的用户身份运行

```
# DnsChanger.ps1
# Change the DNS Entries for Arbitrary Servers
# version 0.1 15/08/2012
# Paddy Carroll 
# 2 arguments (1) physical server name (2) server alias
# 

# setup event source

if (! [System.Diagnostics.EventLog]::SourceExists("DnsManager"))
{
"Administrative script to create event source has not been run: DnsManager.ps1"
# which is just [System.Diagnostics.EventLog]::CreateEventSource("DnsManager", "Application")
throw 'error'
}

# initialise event

$evt=new-object System.Diagnostics.EventLog("Application")
$evt.Source="DnsManager"
$errevent=[System.Diagnostics.EventLogEntryType]::error
$infoevent=[System.Diagnostics.EventLogEntryType]::information

# set up variables

$domain = [System.DirectoryServices.ActiveDirectory.Domain]::GetCurrentDomain().Name  

# get arguments

if($args.count -lt 2)
{
   "Script requires two parameters, a physical server name and an alias. FDQN names will be truncated and the current domain will be appended"
   $evt.WriteEntry("Wrong number of arguments supplied to DnsManager " ,$errevent,2)
   throw 'error'
}

$phys = $args[0].split('.')[0]
$alias = $args[1].split('.')[0]
$filter = "ContainerName = " + [char]34 + $domain + [char]34 

$filter

# test for existence of CNAMEType alias

try{
   $rec = Get-WmiObject -Namespace 'root\MicrosoftDNS' -Class MicrosoftDNS_CNAMEType -filter $filter
   if (!$rec)
      {
    # if it doesnt exist, get all AType aliases
         $rec = Get-WmiObject -Namespace 'root\MicrosoftDNS' -Class MicrosoftDNS_AType -    filter $filter
      }
   }catch{
      $type = $_.Exception.getType().FullName
      $detail = $_.Exception.ErrorDetails().toString()
      $evt.WriteEntry("Problem getting DNS Namespace for " + $domain  ,$errevent,3)
      throw 'error'
   }

# create the alias

try{
$rec[0].CreateInstanceFromTextRepresentation($domain,$domain,$alias + '.' + $domain + ' IN     CNAME ' + $phys + '.'+$domain)
}catch{
    $type = $_.Exception.getType().FullName
    $detail = $_.Exception.ErrorDetails().toString()
    $evt.WriteEntry("Problem creating Alias for " + $phys + " as " + $alias + " : " +    $type + " : " + $detail,$errevent,1)
    throw 'error'
   }
$evt.WriteEntry("Alias created for " + $phys + " as " + $alias ,$infoevent,1) 
```

# android - Android 在更改模式时禁用 Activity 请求（纵向/横向）

> ID：11033640
> 
> 赞同：0
> 
> 时间：2012-06-14T13:03:27.660
> 
> 标签：android, android-activity

我有活动，它的 onCreate 方法在 Asynctask 中向远程服务器发出请求，获取数据并呈现它们。没关系，但是当我尝试将模式更改为横向时 - 大厅这个过程从一开始就开始了，我必须等到数据再次来自服务器。我不需要它。我只需要将相同的数据渲染为横向模式。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:33:54.663

> 大厅 这个过程从一开始就开始

发生这种情况是因为您的活动在定向后重新开始。

因此，为了防止重启，请执行以下操作。

**在清单中对您的活动进行以下更改。**

```
<activity android:name=".ActivityName" 
      android:configChanges="orientation|keyboardHidden|screensize" /> 
```

ScreenSize 属性似乎是在 4.0 中添加的，所以如果您在 4.0 以下运行，请不要提及它。

**然后将以下方法添加到您的活动中：**

```
 @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
    } 
```

它将阻止您的活动重新启动。

# symfony - Symfony2 控制器中是否有用于 Twig 模板的全局变量？

> ID：11033641
> 
> 赞同：6
> 
> 时间：2012-06-14T13:03:31.137
> 
> 标签：symfony, global-variables, twig

*Twig 模板*的**全局变量**可以在*Symfony2应用程序的***config.yml**中定义，如下所示：

 ****```
twig:                 
    globals:
      var_name: var_value 
```

因此，在每个 Twig 模板中，变量可以按如下方式使用：

```
{{var_name}} 
```

这将显示

```
var_value 
```

*你知道在 Symfony2 控制器中获取全局变量值的方法吗？*

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-14T16:59:02.947

似乎没有办法获取特定值。但是您可以从 twig 服务中获取完整的全局变量数组，然后获取它的偏移量。

```
$twig = $this->container->get('twig');
$globals = $twig->getGlobals();
echo $globals['var_name']; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-16T14:08:02.570

正确的做法是遵循[Symfony 的 Cookbook](http://symfony.com/doc/2.0/cookbook/templating/global_variables.html)中关于 Twig 全局变量的官方教程。在实践中，应该定义一个可以在控制器中使用的全局变量，例如：

```
 ; app/config/parameters.ini
  [parameters]
     my_global_var: HiAll 
```

然后将变量定义为 Twig 模板的全局变量

```
# app/config/config.yml
twig:
    globals:
        my_var: %my_global_var% 
```

因此，`{{my_var}}`将返回*HiAll*，但应该在`parameters.ini`文件中处理一次该值。

所以，这个问题的答案是否定的！或者准确地说，不是以一种有效的方式。MDrollette 画了一个可能的方法！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T15:53:41.057

我认为您最好使用捆绑配置或 DIC 参数作为您的值，然后将其添加到 twig 全局变量中（例如，通过您的捆绑扩展类），而不是试图做相反的事情。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-14T13:07:31.137

我不清楚您是想访问控制器中的 twig var，还是只从配置中访问全局 var。这是从配置文件访问全局变量的方法...

您可以将值放在配置的参数部分中。

```
parameters:
    var_name: some_value 
```

现在您可以从控制器访问它...

```
$value = $this->container->getParameter('var_name'); 
```****

# sql - tsql 在子查询中加入日期部分

> ID：11033643
> 
> 赞同：1
> 
> 时间：2012-06-14T13:03:47.270
> 
> 标签：sql, tsql, join

我有两个查询，其中包含我喜欢加入的日期部分的子查询。

```
SELECT  DateMonth, DateYear, Datestring,
    MAX(CouponTotalCount) NoOfCouponsViewed
FROM    (
        SELECT  *, DATEPART(MONTH, DateInsert) DateMonth, DATEPART(YEAR, DateInsert) DateYear, 
        CONVERT(CHAR(4), DateInsert, 100) + CONVERT(CHAR(4), DateInsert, 120) Datestring
        FROM FlurryCouponViewed
    ) sub
where couponID=249
GROUP BY DateMonth, DateYear, Datestring

SELECT  DateMonth, DateYear, Datestring,
    MAX(CouponTotalCount) NoOfCouponsRedeemed
FROM    (
        SELECT  *, DATEPART(MONTH, DateInsert) DateMonth, DATEPART(YEAR, DateInsert) DateYear, 
        CONVERT(CHAR(4), DateInsert, 100) + CONVERT(CHAR(4), DateInsert, 120) Datestring
        FROM FlurryCouponRedeemed
    ) sub

where couponID=249
GROUP BY DateMonth, DateYear, Datestring 
```

两个查询的输出是：

```
DateMonth   DateYear    Datestring NoOfCouponsViewed
----------- ----------- ---------- -----------------
2           2012        Feb 2012   5
3           2012        Mar 2012   12
4           2012        Apr 2012   25
5           2012        May 2012   25

DateMonth   DateYear    Datestring NoOfCouponsRedeemed
----------- ----------- ---------- -------------------
2           2012        Feb 2012   3
3           2012        Mar 2012   4
4           2012        Apr 2012   5
5           2012        May 2012   11 
```

我想要实现的是两个有一个连接的查询给我：

```
DateMonth   DateYear    Datestring NoOfCouponsViewed NoOfCouponsRedeemed
----------- ----------- ---------- ----------------- -------------------
2           2012        Feb 2012   5                 3
3           2012        Mar 2012   12                4
4           2012        Apr 2012   25                5
5           2012        May 2012   25                11 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:16:40.880

在两个查询之间进行内部连接，它应该可以工作：

```
SELECT  sub.DateMonth, sub.DateYear, sub.Datestring,
    MAX(sub.CouponTotalCount) NoOfCouponsViewed,
    MAX(sub2.CouponTotalCount) NoOfCouponsViewed
FROM    (
        SELECT  *, DATEPART(MONTH, DateInsert) DateMonth, DATEPART(YEAR, DateInsert) DateYear, 
        CONVERT(CHAR(4), DateInsert, 100) + CONVERT(CHAR(4), DateInsert, 120) Datestring
        FROM FlurryCouponViewed
    ) sub
INNER JOIN
    (   SELECT  *, DATEPART(MONTH, DateInsert) DateMonth, DATEPART(YEAR, DateInsert) DateYear, 
        CONVERT(CHAR(4), DateInsert, 100) + CONVERT(CHAR(4), DateInsert, 120) Datestring
        FROM FlurryCouponRedeemed
    ) sub2 on sub.DateMonth = sub2.DateMonth and sub.DateYear = sub2.DateYear and sub.Datestring = sub2.Datestring
where sub.couponID=249 and sub2.couponID=249
GROUP BY sub.DateMonth, sub.DateYear, sub.Datestring 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:21:05.560

或`UNION`：

```
 SELECT u.DateMonth, u.DateYear, u.Datestring, MAX(u.NoOfCouponsViewed), MAX(u.NoOfCouponsRedeemed)
    FROM (
        SELECT  DateMonth, DateYear, Datestring,
            MAX(CouponTotalCount) NoOfCouponsViewed, 0 AS NoOfCouponsRedeemed
        FROM    (
            SELECT  *, DATEPART(MONTH, DateInsert) DateMonth, DATEPART(YEAR, DateInsert) DateYear, 
            CONVERT(CHAR(4), DateInsert, 100) + CONVERT(CHAR(4), DateInsert, 120) Datestring
            FROM FlurryCouponViewed
            ) sub
        where couponID=249
        GROUP BY DateMonth, DateYear, Datestring
   UNION 
        SELECT  DateMonth, DateYear, Datestring, 0 AS NoOfCouponsViewed,
            MAX(CouponTotalCount) NoOfCouponsRedeemed
        FROM    (
            SELECT  *, DATEPART(MONTH, DateInsert) DateMonth, DATEPART(YEAR, DateInsert) DateYear, 
            CONVERT(CHAR(4), DateInsert, 100) + CONVERT(CHAR(4), DateInsert, 120) Datestring
            FROM FlurryCouponRedeemed
            ) sub

        where couponID=249
        GROUP BY DateMonth, DateYear, Datestring
    ) u
GROUP BY u.DateMonth, u.DateYear, u.Datestring 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:27:15.430

我会使用`UNION`而不是`JOIN`

```
SELECT  MonthInserted, 
        LEFT(DATENAME(MONTH, Datestring), 3) + ' ' + DATENAME(YEAR, MonthInserted) AS DateString
        MAX(Viewed) NoOfCouponsViewed,
        MAX(Redeemed) NoOfCouponsRedeemed
FROM    (   SELECT  CouponID, 
                    DATEADD(MONTH, DATEDIFF(MONTH, 0, DateInsert)) [MonthInserted], 
                    CouponTotalCount AS Viewed, 
                    0 AS Redeemed
            FROM    FlurryCouponViewed
            UNION ALL
            SELECT  CouponID, 
                    DATEADD(MONTH, DATEDIFF(MONTH, 0, DateInsert)), 
                    0, 
                    CouponTotalCount
            FROM    FlurryCouponRedeemed
        ) sub
WHERE   couponID = 249
GROUP BY MonthInserted 
```

我认为 a`UNION`会比`JOIN`接受的答案中的表现更好，因为这`MAX`意味着每月有多行，并且由于月份是唯一的公共字段，因此它将最终交叉连接查询（即，如果在 2012 年 6 月查看了 1000 张优惠券并且 500 被兑换了交叉连接意味着您将从 50,000 行中选择最大值，而不是 1500）。我不确定架构和逻辑，所以这可能是不可能的，但如果 FlurryCouponRedeemed 中有日期不在 FlurryCouponViewed 中，则这些日期不会显示。

我也喜欢尽可能长时间地保留日期，以帮助优化器完成它的工作，这就是我用`DATEPART(YEAR...`& `DATEPART(MONTH...`AND`CONVERT(VARCHAR(4), DateInsert...`替换的原因`DATEADD(MONTH, DATEDIFF(MONTH, 0, DateInsert))`

# java - 无调试信息编译的含义

> ID：11033647
> 
> 赞同：1
> 
> 时间：2012-06-14T13:03:53.187
> 
> 标签：java, spring, conceptual

在 LocalVariableTableParameterNameDiscoverer 的 JavaDoc [http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/core/LocalVariableTableParameterNameDiscoverer.html](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/core/LocalVariableTableParameterNameDiscoverer.html)

提到了以下行：

ParameterNameDiscover 的实现，它使用方法属性中的 LocalVariableTable 信息来发现参数名称。**如果类文件是在没有调试信息的情况下编译**的，则返回 null 。

 **我没有得到没有调试信息的编译的含义。

请解释是否有人对此有任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:06:36.237

为了允许调试，大多数编译器都有一个调试器友好标志。当设置该标志时，重新排序代码的优化不会完成，并且生成的可执行文件具有将机器代码链接回生成它的源代码行的信息。另一方面，可以使编译器创建一个调试不友好的可执行文件，其中所有这些都被删除，以便稍微加快程序速度。

您提到的类无法从名称中的类文件中获取参数名称已被编译器删除以节省空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-07T19:36:57.163

为了节省空间，java 编译器避免写出方法参数名称等，请参阅[this](http://docs.oracle.com/javase/tutorial/reflect/member/methodparameterreflection.html)。但是*要使 ParameterNameDiscover*工作，它需要将方法参数信息打印到 .class 文件中，这可以通过在 java 8 之前使用**-debug选项或 java 8 中的****-parameter**选项编译代码来完成。有关方法参数的更多信息在 .class 文件中看到[这个 stackover](https://stackoverflow.com/questions/939194/preserving-parameter-argument-names-in-compiled-java-classes)问题。**

# c# - 关系之间的内连接

> ID：11033650
> 
> 赞同：1
> 
> 时间：2012-06-14T13:04:03.257
> 
> 标签：c#, .net, sql, join

我想从三个表中获取数据：`role`、`permission`和`right`。我使用了内连接。

### 代码

```
SqlConnection con = Class3 .GetConnection();
public DataSet showoption1()
{
    string sql1 = "select  right.rightname,role.rolename
                   FROM permission
                   INNER JOIN ON right.rightid = permission.rightid
                   INNER JOIN role ON permission.roleid = role.roleid  ";
    SqlCommand cmd = new SqlCommand(sql1, con);
    SqlDataAdapter adptr = new SqlDataAdapter(cmd);
    DataSet ds = new DataSet();
    adptr.Fill(ds);
    DataTable table = ds.Tables[0];
    return ds;
} 
```

### 数据库表

**角色**

```
Role Id   Role name
  1       admin
  2       employee 
```

**正确的**

```
rifgtid    rightname
      1    view courses
      2    view assessmenttest 
```

**权限（关联）**

```
permissionid    rightid     roleid
   1             1           2
   2             1           1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T13:09:55.133

我不确定你在问什么，但你的 sql 语法有错误

```
SELECT      right.rightname,
            role.rolename 
FROM        permission 
INNER JOIN  right ON right.rightid = permission.rightid 
INNER JOIN  role ON permission.roleid = role.roleid 
```

我替换`INNER JOIN ON`为`INNER JOIN right ON`

附带说明一下，处理 ADO.NET 相关对象（SqlConnection、SqlCommand、SqlDataAdapter）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T14:34:21.100

如果表的名称是`RIGHT`，那么您需要分隔该名称，因为它是[保留字](http://msdn.microsoft.com/en-us/library/ms189822.aspx)，例如

```
SELECT      [right].rightname,
            role.rolename 
FROM        permission 
INNER JOIN  [right] ON [right].rightid = permission.rightid 
INNER JOIN  role ON permission.roleid = role.roleid 
```

（窃取@Claudio 的查询）。但我实际上建议您重新访问架构并为表选择一个不同的非保留名称。

# apache-flex - Flex循环遍历DataGrid，获取对象和索引

> ID：11033656
> 
> 赞同：0
> 
> 时间：2012-06-14T13:04:13.040
> 
> 标签：apache-flex, datagrid, dataprovider

我有一个代表图层的 DataGrid - 每行都是舞台上的一个图像。现在我想拖动一个图层，将更改舞台上该图像的 childIndex。

为了做到这一点，我需要在拖动后遍历 DataGrid 行，从 dataprovider 获取每行的图像并将该图像的 childIndex 更改为该行的索引。

我不知道如何遍历行，获取行索引和被行压制的图像。

请帮忙 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:39:07.687

我找到了解决方案：

```
private function layers_list_dragCompleteHandler(event:DragEvent):void
        {
            var idx:int = layers_list_box.calculateDropIndex(event);
            for (var i:int = 0; i < layers.length; i++)
            {
                var stageObject:StageObject = (layers.getItemAt(i) as AniBaniClip).GetFirstStageObject(0);
                AniBani.getEditor().editor_stage.setElementIndex(stageObject, i + 2);
            }
        } 
```

# android - 角度旋转检测器

> ID：11033664
> 
> 赞同：0
> 
> 时间：2012-06-14T13:04:32.243
> 
> 标签：android

我正在尝试制作一个应用程序，它可以向我显示我的设备正在旋转的角度，并且还有一个菜单可以让我选择以度数或弧度查看结果，但是在运行此代码后，仅出现显示布局的屏幕并且在旋转设备时什么都没有发生请提前告诉我我错在哪里谢谢

```
package com.example.directordetector;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mInitialized = false;
    mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
    mAccelerometer = mSensorManager
            .getDefaultSensor(Sensor.TYPE_LINEAR_ACCELERATION);
    mSensorManager.registerListener(this, mAccelerometer,
            SensorManager.SENSOR_DELAY_NORMAL);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menu_name, menu);
    return true;

}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.degree:
        m = 0;
        return true;
    case R.id.radian:
        m = 1;
        return true;
    default:
        return super.onOptionsItemSelected(item);

    }

}

protected void onResume() {
    super.onResume();
    mSensorManager.registerListener(this, mAccelerometer,
            SensorManager.SENSOR_DELAY_NORMAL);
}

protected void onPause() {
    super.onPause();
    mSensorManager.unregisterListener(this);
}

@Override
public void onAccuracyChanged(Sensor sensor, int accuracy) {
    // TODO Auto-generated method stub

}

@Override
public void onSensorChanged(SensorEvent event) {
    // TODO Auto-generated method stub
    TextView tvX = (TextView) findViewById(R.id.x_axis);
    TextView tvY = (TextView) findViewById(R.id.y_axis);
    TextView tvZ = (TextView) findViewById(R.id.z_axis);
    float x = event.values[0];
    float y = event.values[1];
    float z = event.values[2];
    if (!mInitialized) {
        mLastX = x;
        mLastY = y;
        mLastZ = z;
        tvX.setText("0.0");
        tvY.setText("0.0");
        tvZ.setText("0.0");
        mInitialized = true;
    } else {
        float deltaX = Math.abs(mLastX - x);
        float deltaY = Math.abs(mLastY - y);
        float deltaZ = Math.abs(mLastZ - z);
        if (deltaX < NOISE)
            deltaX = (float) 0.0;

        if (deltaY < NOISE)
            deltaY = (float) 0.0;

        if (deltaZ < NOISE)
            deltaZ = (float) 0.0;
        mLastX = x;
        mLastY = y;
        mLastZ = z;
        if (m == 1) {

            deltaX = (float) (deltaX * (3.18 / 180));
            deltaX = (float) (deltaX * (3.18 / 180));
            deltaX = (float) (deltaX * (3.18 / 180));
        }

        tvX.setText(Float.toString(deltaX));
        tvY.setText(Float.toString(deltaY));
        tvZ.setText(Float.toString(deltaZ));

    }

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:09:29.640

我不知道为什么它不起作用。但我建议您不要将 findViewById() 调用放在传感器侦听器回调中。这种方法相当昂贵，而且您的传感器回调会收到很多调用。

在活动中声明您的视图，并在 onCreate() 中实例化它们，如下所示：

```
TextView tvX;
TextView tvY;
TextView tvZ;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    tvX = (TextView) findViewById(R.id.x_axis);
    tvY = (TextView) findViewById(R.id.y_axis);
    tvZ = (TextView) findViewById(R.id.z_axis);
    ...
} 
```

这样，您只需调用一次 findViewById()，您将始终能够使用您的引用来更改 TextView 中的文本。

当你运行你现在拥有的东西时，究竟会发生什么？TextViews 是否设置为“0.0”并保持这种状态？或者他们根本没有得到设置？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:17:32.107

findViewById() 属于 onCreate() 方法（我还写了一个小库，它将为视图和其他一些东西执行依赖注入：[https](https://github.com/ko5tik/andject) ://github.com/ko5tik/andject ）

加速度计是错误的旋转传感器 - 您可以检测设备的移动或倾斜，但不能检测设备轴之一的旋转。为此使用磁场传感器

# c# - 检测到 ASP.NET 网页的冲突版本

> ID：11033669
> 
> 赞同：15
> 
> 时间：2012-06-14T13:04:56.907
> 
> 标签：c#, asp.net, asp.net-mvc-3, visual-studio-2010

我刚从 php 转到 asp.net。我正在尝试将一个非常基本的 mvc 3 应用程序部署到我的托管服务提供商。部署后，我访问该网站，它显示：

**检测到 ASP.NET 网页版本冲突：指定版本为“1.0.0.0”，但 bin 中的版本为“2.0.0.0”。要继续，请从应用程序的 bin 目录中删除文件或删除 web.config 中的版本规范。**

我不知道在哪里看。它是“开箱即用”的 mvc 3 应用程序，无需修改。我尝试使用这种方法，“http://stackoverflow.com/questions/10896878/conflicting-versions-of-asp-net-web-pages-detected-specified-version-is-1-0-0”但有没运气。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-19T15:37:26.467

您需要为 pages:Version appSettings 设置适当的值。在您的情况下，它必须是 2.0.0.0

```
<appSettings>
    <add key="webpages:Version" value="2.0.0.0"/>
</appSettings> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:09:08.733

请检查以下链接，您可能需要检查 bin 目录中的程序集版本

[http://www.britishdeveloper.co.uk/2011/11/conflicting-versions-of-aspnet-web.html](http://www.britishdeveloper.co.uk/2011/11/conflicting-versions-of-aspnet-web.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-31T06:48:36.863

如果您已经尝试了上述解决方案并且仍然遇到相同的问题，请尝试这个-> 转到您的项目文件夹并在其中找到*bin*文件夹 --> 删除*System.Web.Mvc.dll*和*System.Web.Mvc .xml*从那里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-17T14:57:19.540

我在 webmatrix 中遇到了这个错误，为了解决它，我必须去设置并将 ASP.NET 网页版本从 1.0 更新到 2.0

# javascript - onclick 操作后隐藏元素

> ID：11033671
> 
> 赞同：-2
> 
> 时间：2012-06-14T13:05:07.817
> 
> 标签：javascript, html, iframe, javascript-events

```
<p>
    <a href="#" onclick="showStuff('lol'); return false;">
    <img src='play.png'><br>
    <span id="lol" style="display: none;">
        <iframe src="http://google.com" scrolling="no"></iframe>
   </span>
 </p> 
```

使用此功能，当我单击“play.png”时，会在图像下方加载一个 iframe。

我正在寻找的是：

A) 如何在页面加载时“预加载”iframe？所以当你点击图片的时候，iframe的内容就准备好了。B）我如何只显示 iframe 而不是图像 + iframe？我的意思是：当我单击图像时，它应该加载 iframe - 所以隐藏原始图像。

太感谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:14:47.940

你可以有这样的东西：

通过将 display:none 添加到正文来隐藏 iframe 的所有内容。

单击时执行以下功能：

```
function showIframeContent(){
   $(document.frames[0]).find('body').show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:15:51.617

使用以下 javascript

```
<p><a href="#" onclick="showStuff('lol'); return false;"><img src='play.png'><br>
<span id="lol" style="display: none;">
    <iframe src="http://google.com" scrolling="no"></iframe>
</span>
</p>

function showStuff(key)
{
    if(document.getElementById(key).style.display == 'none')
    {
        document.getElementById(key).style.display="";
    }
    else
    {
        document.getElementById(key).style.display="none";
    }
} 
```

# android - 制作 Android 内核 - 模块准备

> ID：11033675
> 
> 赞同：0
> 
> 时间：2012-06-14T13:05:19.827
> 
> 标签：android, linux, linux-kernel, kernel-module

在某些情况下，我正在尝试构建和使用[LiME 取证工具](http://code.google.com/p/lime-forensics/)。本质上，这需要构建一个内核模块，以在不触及用户空间的情况下提取 RAM 的内容。按照他们页面上的[说明](http://code.google.com/p/lime-forensics/downloads/list)，我已经设置了环境，下载了内核源代码，并从手机上提取了配置文件。

现在，他们告诉我：

```
make ARCH=arm CROSS_COMPILE=$CC_PATH/arm-eabi- modules_prepare 
```

我的第一个问题是：modules_prepare 是什么，我为什么要制作它？但具体来说，当我运行它时，我得到了错误：

```
make: *** No rule to make target `modules_prepare'.  Stop. 
```

这是我所期望的，因为实际上在任何地方都没有提到 modules_prepare。那么他们为什么要让我成功呢？

对这里可能发生的事情有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-07T20:49:57.890

代替

> 使 ARCH=arm CROSS_COMPILE=$CC_PATH/arm-eabi-modules_prepare

采用

> 使 ARCH=arm CROSS_COMPILE=$CC_PATH/arm-eabi- 模块

如果你得到

> “当前的内核配置禁用了模块。键入'make config'并启用可加载模块支持。然后构建一个启用模块支持的内核 make: *** [modules] Error 1”

然后你必须通过添加来修改 .config

> CONFIG_MODULES=y
> CONFIG_MODULE_UNLOAD=y

此博客[http://sgros-students.blogspot.ca/2014/04/lime.html](http://sgros-students.blogspot.ca/2014/04/lime.html)广泛涵盖了 LiME 部署，并提供了大量有关常见错误的详细信息，包括这一错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:37:20.557

[Linux-Kernel-Documentation](http://www.mjmwired.net/kernel/Documentation/kbuild/modules.txt)可以帮助您理解`modules_prepare`

# ruby-on-rails - 列出要下载的文件，在 Rails 中的链接中添加了额外的路径

> ID：11033682
> 
> 赞同：0
> 
> 时间：2012-06-14T13:05:34.620
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-routing

我正在尝试显示目录​​中文本文件的链接列表（在 index.html 中），以下载文件。在有子目录的地方，我希望它的链接刷新索引页面并列出该子目录中的文件（作为下载链接）。

我的 file_transfers/index.html.erb 有：

```
<%- output_dir ||= 'outputs/' %>

<%- Dir.foreach(output_dir) do |f| %>
  <%= link_to f, output_dir + f %>
<%- end %> 
```

我在 config/routes.rb 中的最后一条路线是：

```
 match ':file_dir/:file_name' => 'file_transfers#show' 
```

控制器：

```
 def show
    file = params[:file_dir] + '/' + params[:file_name]
    file += ".#{params[:format]}" if params[:format]
    if File.directory?(file)
      render :index, :locals => {:output_dir => file + '/'}
    else
      send_file params[:file_dir] + '/' + params[:file_name], :type => "text/csv"
      render :index
    end
  end 
```

当我单击目录链接时，它确实会刷新列表及其文件，但是当我将鼠标悬停在链接上时，链接会在路径中显示一个额外的“输出/”目录，但 html 中的 href attr 没有额外的路径。就像额外的文件夹被视为根 0.0.0.0:3000 的一部分（如 0.0.0.0:3000/outputs 中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:23:42.703

使用`redirect_to :action => :index`而不是渲染是解决方案

# c# - C#程序员想开发第一个网站

> ID：11033684
> 
> 赞同：3
> 
> 时间：2012-06-14T13:05:39.437
> 
> 标签：c#, asp.net

我是一名 C# 程序员，我想开发我的第一个网站。

我有一个 C# 应用程序，我想在后端服务器上使用它的方法。

我认为我可以使用 ASP.NET 前端并将其连接到 C# 后端是否正确？

该网站的目标是在前端选择一个文件，将其传递给后端，对文件进行一些处理，然后将结果通过电子邮件发送给用户。

我不介意我在前端使用什么，但我热衷于使用 C# 后端（这会将数据发送到 SQL 服务器数据库）。

这可能吗？

就目前的知识而言，我有一个使用 cPanel 管理的基本网站，但这将是我的第一个“正确”的 Web 开发。

非常感谢任何指导或建议，谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T13:08:23.760

我可以建议点击教科书和网络资源吗？你有很多阅读要做。

从这个开始：

[http://www.asp.net/get-started](http://www.asp.net/get-started)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T13:14:50.463

您当然可以使用带有 C# 代码的 ASP.NET。我个人的偏好是 ASP.NET Web 表单。[http://www.asp.net/web-forms](http://www.asp.net/web-forms)上的复数教程对初学者非常有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T13:11:51.463

听起来你是从头开始的。

去下载 Visual Studio 的免费版本

[http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-web-developer-express](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-web-developer-express)

如果您从底层开始，我建议您从 Web 表单开始。

从那里，您可以在前端使用具有 C# 代码隐藏的 .aspx 页面创建项目。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-14T13:13:28.323

发送邮件示例[http://weblogs.asp.net/scottgu/archive/2005/12/10/432854.aspx](http://weblogs.asp.net/scottgu/archive/2005/12/10/432854.aspx)

文件上传示例

[http://asp.net-tutorials.com/controls/file-upload-control/](http://asp.net-tutorials.com/controls/file-upload-control/)

[http://msdn.microsoft.com/en-us/library/aa479405.aspx](http://msdn.microsoft.com/en-us/library/aa479405.aspx)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-14T13:18:22.423

这相当简单。在这种情况下，它可以像单个 aspx 页面一样简单（部分后面的代码是您的 C# - 但它也可以在 HTML 中交错）。这些天也有这个（显示层）的几个变体（WPF/Razor/等）

还有更复杂的场景：使用 Ajax 不必完全发布页面，只需根据需要上下发送文件即可。使用 Web 服务（嵌入为 MDX 文件或独立的 Web 服务 - WCF 等）。

我建议您从带有代码的基本 ASP.Net 开始，然后从那里开始。

# wcf - POST/PUT RESTful 服务的 URI 模板

> ID：11033687
> 
> 赞同：10
> 
> 时间：2012-06-14T13:05:54.520
> 
> 标签：wcf, api, c#-4.0, rest

我要编写一个restful API，我的要求是调用“Transaction”对象的方法，我想知道我应该如何使用适当的URI模板调用Post/PUT，这样我就可以在不使用“verbs”的情况下创建/更新事务资源在 Uri 映射中。

```
[OperationContract]
[WebInvoke(Method = "POST", UriTemplate = "/Transaction/{**What to write here ????**}", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
public Transaction AddTransaction(Transaction transaction)
{
    return AddTransactionToRepository(transaction);
}

[OperationContract]
[WebInvoke(Method = "PUT", UriTemplate = "/Transaction/{**What to write here ????**}", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)] 
public Transaction UpdateTransaction(Transaction transaction)
{
    return UpdateTransactionInRepository(transaction);
} 
```

请考虑我想对 uri 映射应用最佳实践，并且不希望其中包含“动词”，而只需要“名词”。还告诉我客户端如何使用唯一的 URI 访问 Post 和 Put 的这些方法。谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-14T16:24:57.330

您必须为`Transaction`.

*通过 ID 获取交易* - GET - **transaction/id**

*创建新交易* - POST -**交易**

*更新交易* - PUT -**交易/ID**

*删除交易* - DELETE - **transaction/id**

您的 URI 模板必须更改如下

```
[OperationContract]
[WebInvoke(Method = "POST", UriTemplate = "/Transaction", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
public Transaction AddTransaction(Transaction transaction)
{
    //
}

[OperationContract]
[WebInvoke(Method = "PUT", UriTemplate = "/Transaction/{id}", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)] 
public Transaction UpdateTransaction(int id, Transaction transaction)
{
    //
} 
```

> 客户端如何使用唯一的 URI 访问 Post 和 Put 的这些方法

POST 和 PUT 不需要唯一的 URI。URI 可以相同。

参考资料：[http ://www.asp.net/web-api/overview/creating-web-apis/creating-a-web-api-that-supports-crud-operations](http://www.asp.net/web-api/overview/creating-web-apis/creating-a-web-api-that-supports-crud-operations)

[http://msdn.microsoft.com/en-us/library/bb412172(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/bb412172(v=vs.90).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T13:59:01.237

PUT 用于创建或更新已知资源，例如：PUT /Transactions/1234

这将创建（或更新，如果它已经存在）具有 ID 1234 的事务。这意味着您只能在知道资源的 URL 时使用 PUT。

POST 创建一个新的子资源，例如：POST /Transactions/

这将创建一个新的事务资源。

请注意，我将 Transaction 复数化，因此它现在代表一个集合。

不是 C# 开发人员，我不知道这映射到 WCF 有多么容易，但这种方法与技术无关。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-01T16:02:20.703

为了制定正确的 url 和 api 设计原则......我发现这本电子书（不是我的！）必读： http: [//offers.apigee.com/api-design-ebook-rr/](http://offers.apigee.com/api-design-ebook-rr/)

# arm - i.MX53 中如何使用 Trustzone 组件？

> ID：11033696
> 
> 赞同：2
> 
> 时间：2012-06-14T13:06:13.083
> 
> 标签：arm, trust-zone

谁能解释一下 TZ 技术是如何在 I.MX53 中启用的？我很困惑，因为互联网上说 i.MX53 板启用了 Trustzone，但我能找到的只是其中的中断控制器。ARM trustzone 要求中给出的其余组件在哪里？（TZPC TZMA 等）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-13T00:22:13.693

基本上，Trustzone 内置在系统中，并以 TrustZone 模式启动。这之所以成为可能，是因为 HAB 机制（高保证引导引导链）——它总是首先引导到安全世界。

首先这是启动逻辑被烧入 eFUSE 的方式：

[![在此处输入图像描述](../Images/90782b5db43dd85b81287e35b75bc889.png)](https://i.stack.imgur.com/lJwNo.png)

接下来是启动顺序：

[![在此处输入图像描述](../Images/76db624e82fea67d32447529a41f53ee.png)](https://i.stack.imgur.com/k1D4Y.png)

[![在此处输入图像描述](../Images/385f8e26801d865a86678b3e300da3d1.png)](https://i.stack.imgur.com/L189N.png)

[https://www.nxp.com/docs/en/application-note/AN4581.pdf](https://www.nxp.com/docs/en/application-note/AN4581.pdf)

安全启动本身是通过 CSF 配置的：

[https://community.nxp.com/thread/428505](https://community.nxp.com/thread/428505)

对于中断处理，它总是先通过安全世界，然后再到达非安全世界，为此，它被称为“注入中断”到非安全世界。

[http://www.ic.unicamp.br/~edson/disciplinas/mc404/2012-2s/anexos/IMX53-tzic.pdf](http://www.ic.unicamp.br/~edson/disciplinas/mc404/2012-2s/anexos/IMX53-tzic.pdf)

有关更多信息，请阅读以下内容：

[http://genode.org/documentation/articles/trustzone](http://genode.org/documentation/articles/trustzone)

[https://www.nxp.com/docs/en/reference-manual/IMX53QSBRM.pdf](https://www.nxp.com/docs/en/reference-manual/IMX53QSBRM.pdf)

[https://www.nxp.com/docs/en/application-note/AN4581.pdf](https://www.nxp.com/docs/en/application-note/AN4581.pdf)

[https://www.nxp.com/docs/en/supporting-information/DWF13_AMF_IND_T0291.pdf](https://www.nxp.com/docs/en/supporting-information/DWF13_AMF_IND_T0291.pdf)

# css - CSS 侧边栏定位和横幅

> ID：11033698
> 
> 赞同：1
> 
> 时间：2012-06-14T13:06:16.317
> 
> 标签：css

我正在尝试在具有固定高度但使用剩余页面空间量的横幅旁边设置一个高度为 100% 的固定宽度侧边栏。我尝试了以下方法，但我似乎无法正确获得横幅的宽度......

提前感谢您的任何见解！

S。

```
<div id="main">
    <div id="sidebar"></div>
    <div id="banner"></div>
</div>

html, body {
    height: 100%;
}

body {
    padding: 0; 
    margin: 0;
}

div#main {
    width:100%;
    min-height: 100%;
}

div#sidebar {
    float:left;
    position:absolute;
    min-height: 100%;
    width:195px;
    height:100%;
    background-color: rgba(0, 0, 0, 0.8);
}

div#banner {
    position:absolute;
    margin-left:195px;
    top:80%;
    width:100%;
    height:126px;
    background-color: rgba(179, 179, 179, 0.8);
} 
```

**更新了截图**

下面是我试图用上面的代码完成的，但横幅占用的空间超过了剩余空间并延伸到页面之外，导致横向滚动。

![在此处输入图像描述](../Images/12a78aa69bd141df3351f00e93184c5b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:26:50.107

```
div#main {
    width:100%;
    min-height: 100%;
    position:relative;
    overflow:hidden;
} 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:17:39.103

主要问题是横幅的宽度为 100%，但宽度`margin-left`为 195 像素。

看看这个解决方案：http: [//jsfiddle.net/nW53u/](http://jsfiddle.net/nW53u/)

*   您可以将横幅`div`的内容包装在另一个中`div`，然后给它一些`padding-left`
*   您正在使用绝对定位，因此您可以使用`z-index`确保侧边栏位于顶部。

使用绝对定位，如果为您的布局调整浏览器大小，您可能会得到一些不需要的行为。

您可能需要考虑另一种方法。这也取决于还会布置什么。空白处是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:18:38.453

我相信，因为您将横幅设置为 100%，所以无论如何它都会将其自身设置为页面宽度，并且不会注意到侧边栏占用的空间。

之后您可以使用 javascript 脚本来计算页面的剩余大小。或者，如果您查看[http://www.alistapart.com/articles/holygrail](http://www.alistapart.com/articles/holygrail)，它们会创建类似于您使用 CSS 所做的事情。希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T13:19:11.153

添加两个属性

```
ul li a {
position:relative;
top:30px;
} 
```

[`Working DEMO`](http://jsfiddle.net/NNcVc/4/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T14:58:31.707

注意：如果您出于其他原因不需要绝对定位并且这只是两列，这将起作用。

还有其他解决方案：

*   您只希望水平滚动消失，这可以回到 ie5

    身体 { 溢出：-moz-scrollbars-vertical; 溢出-x：隐藏；溢出-y：滚动；}

*使用以下方法将使用自动值将块级元素（div）缩小到您的内容，同时保持您的固定宽度侧边栏、您的横幅以及添加更多和扩展的可能性。这是对最简单的两列 CSS 布局之一的轻微改动，不同之处在于大多数人将横幅扩展到整个内容区域的顶部。*

## 只读以理解术语嵌套

在以下情况下，嵌套 div 是 div 内的 div div2 是嵌套 div

```
<div class="div1"><div class="div2></div></div> 
```

## CSS

```
/* for centered page or disregard margin settings*/
.container{height: auto; margin: 0 auto;)
/* then nested inside .container have the following two: */
.sidebar(width: 195px; float: left; height: 100%;)
.col{width:  auto; height: 100%;}
/* All of your other elements at this row-level in your document flow should be contained either within .sidebar or .col to start a new row research the CSS clearfix  - not to say you couldn't place as many things as you want in the body column and align them by default relative to its container(.col) but I am saying for more advanced layouts and for layouts that REQUIRE absolute positioniong. Also note the auto width. I left the sidebar width at auto as well. The div will shrinkwrap to its contents. . . as long as they're square */
.banner{vertical-align: top; width: auto; height: auto;) 
```

## 以 div.container 开头的 HTML 标记

```
<div class="container">
    <div class="sidebar">
    sidebar contents
    </div>

    <div class="col">
        <div class="banner">
            <img src="path/to/banner.jpg" alt="what you want mouse-over to say" />
        </div>
    </div>
</div>
<!--- Research the CSS clearfix if your document requires the use of floats for a new row a content or if you must use absolute positioning. Absolute positioning is the future and there is specification in CSS3 to bring in an interesting feature that would eliminate grid framework systems. I wish I could find the link but it is basically you assign place-holders to a template and css uses the selectors and place holders using absolute positioning to style the page. In all reality abs positioning is the "ideal" way to do things. It is just not the practical way for most sites atm, nor does it have much to offer for simple layouts. --->
<div class="clearfix"></div> 
```

***有经验的人告诉你一些重要的事情。不要被所有这些漂浮的网格系统所包围。有些很酷，因为它们提供引导功能，例如预设的排版集，但是，归根结底，它们（不包括 java 脚本网格）通常是固定宽度的列，具有继承的左边距、容器和一个左边距类，用于移动对象以与任何网格列对齐。这些对学习很有好处，我认为应该使用标准，但是如果您希望在桌面上拥有巨大视口的人拥有大量精美的用户体验，请使用媒体查询。一般的规则应该是这样的：“你应该将你的网格缩放到你的内容，而不是你的内容到你的网格......但仍然使用某种类型的逻辑网格” 当元素不是像素完美时，它们看起来就不正确。网格确保了这一点，但是，可以根据自己的喜好对其进行自定义。这更像是一个原则，因为在设计中存在有吸引力的纵横比，如三分法则。以及其他令人赏心悦目的自然除数，因此您可能希望在设计决策时将它们实施到您的网格中。***

# python - 关于为什么 os.system() 可能失败的任何想法？

> ID：11033703
> 
> 赞同：4
> 
> 时间：2012-06-14T13:06:32.617
> 
> 标签：python, cmd, os.system

我最近在一台新计算机上安装了 python。我找不到`os.system()`失败或可能失败的原因。我在主脚本中尝试了`os.popen()`子进程，但这并不能解决问题。

最关心的是为什么这个简单的测试`os.system()`失败了。

在 cmd 提示符下：

```
>python
Python 2.7.2 (default, Jun 12 2011, 15:08:59) [MSC v. 1500 32 bit (Intel)] on win32
>>> import os
>>> os.system("dir")
-1
>>> os.system("cmd /c dir")
-1
>>> import subprocess
>>> subprocess.call("dir", shell=True)
Traceback ...
...
WindowsError: [Error 2] System could not locate file
>>> exit()
dir
(list of files) 
```

我以 dir 为例，但是当我调用系统路径中包含的任何其他程序时，也会发生同样的事情。它将直接从 cmd 行运行，而不是通过 os.system 或子进程运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T13:08:05.040

`dir`不是可执行文件，而是`cmd.exe`命令。

尝试：

```
os.system("cmd /c dir") 
```

或者

```
subprocess.call("dir", shell=True) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T21:46:22.930

我想到了。正如我怀疑这与环境变量有关。

虽然我添加了所有我需要的程序`Path`，但我从未看过 ComSpec 环境变量。

显然，我添加了

```
C:\Program Files (x86)\Java\jre7\bin 
```

除了`comspec`默认

```
%SystemRoot%\system32\cmd.exe 
```

我仍然不确定为什么，但是如果您想通过`os.system`or`subprocess`或调用文件，这会导致问题`os.popen`。

解决方案是要么添加从 Path 到的所有路径`ComSpec`，要么简单地删除 Java 二进制文件的路径。

完成后，一切正常，（甚至是目录）。

# iphone - 在gridview中解析和显示图像

> ID：11033705
> 
> 赞同：0
> 
> 时间：2012-06-14T13:07:05.757
> 
> 标签：iphone, ios, cocoa-touch

我有一个包含少量图像的 xml，我需要在网格视图中显示图像。我能够解析图像 url，但是在显示网格视图时，只显示 xml 的最后一个图像。我有下面的代码。

```
 - (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI 
qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict{
   if(nil != qualifiedName){
           elementName = qualifiedName;
   }
   if ([elementName isEqualToString:@"images"]) {
           self.ixml = [[ImageObj alloc]init];
   } 
   else if([elementName isEqualToString:@"image"] )

   {
           self.currentElement = [NSMutableString string];
   } else {
           self.currentElement = nil;
   }        
}

 - (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {
   if(nil != qName){
           elementName = qName;
   }
   if([elementName isEqualToString:@"image"]){
   self.ixml.imageName=self.currentElement;
           NSLog(@"data %@",self.currentElement);
   }
 else if([elementName isEqualToString:@"images"])    {
           [[self imagerssItems] addObject:self.ixml];
   NSLog(@"self ixml %@",self.ixml);
    NSLog(@"self  %@",imagerssItems);
   }
} 
```

所有网址都显示在登录中，`NSLog(@"data %@",self.currentElement);`但在以下几行中

`NSLog(@"self ixml %@",self.ixml); NSLog(@"self %@",imagerssItems);`

它显示只有一个元素被设置。

我在这里错过了什么吗？指导会有所帮助。

谢谢你。

**编辑**

我们有如下的xml格式-

```
<images>
<image>link here</image>
<image>link here</image>
<image>link here</image>
</images> 
```

解析过程对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:41:05.087

使用此委托存储在数组中。

```
//Receive string of current element
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
   {

   } 
```

然后在“didEndElement”委托中打印它

# clojure - Clojure / lein repl & Metadata - 这是一个错误，在哪里？

> ID：11033710
> 
> 赞同：2
> 
> 时间：2012-06-14T13:07:24.223
> 
> 标签：clojure, leiningen

我将 Leiningen 2 REPL 与 Clojure 1.3 一起使用。我的元数据行为不一致（或者我认为）。

如果这是应该的，请解释一下。如果没有 - 我应该在哪里提交错误？

这就是元数据应该如何工作，AFAIK。

```
main=> (def a ^:inited  [ 1 2 3])
main=> (meta a)
{:inited true} 
```

这就是我在引用引用的空序列时得到的。

```
main=> (def a ^:inited  '() )
main=> (meta a)
nil

main=> (def a ^{:inited (System/currentTimeMillis)} '())
main=> (meta a)
nil 
```

对于未引用的空序列，一切都很好。但是，好吧，我得到了行号。

```
main=> (def a ^{:inited (System/currentTimeMillis)} ())
main=> (meta a)
{:inited 1339678437612, :line 1}

main=> (def a ^:inited  () )
main=> (meta a)
{:inited true, :line 1} 
```

在这里我没有得到行号：

```
main=> (def a ^:inited  [ 1 2 3])
main=> (meta a)
{:inited true}

main=> (def a ^{:inited (System/currentTimeMillis)} [1 2 3])
main=> (meta a)
{:inited 1339678534644} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:09:09.943

是`'`一个阅读器宏，扩展为`(quote ...)`. 因此，您将元数据放在列表中。试试这个：

```
user=> (def a ' ^:inited [])
#'user/a
user=> (meta a)
{:tag :inited}
user=> (def a ^:inited '[])
#'user/a
user=> (meta a)
nil 
```

[无耻的自我推销。](http://kotka.de/blog/2009/12/with-meta_and_the_reader.html)

# php - 为要插入 mysql 的 html 中的 access/excel 网格中的数据输入创建一个表

> ID：11033721
> 
> 赞同：2
> 
> 时间：2012-06-14T13:07:53.620
> 
> 标签：php, mysql, html, datagrid

我希望在 html 中创建一个表格，用于插入 CD 专辑的曲目列表。这不是从数据库中提取信息，而是插入新数据。

我不想一张一张地用单一的形式，而是一次为那张专辑做所有事情

像这样的东西

![在此处输入图像描述](../Images/9707c5b40933b3a696cb304527b0b258.png)

如何将 HTML 和 php 插入到 mysql 数据库中

我知道如果我将信息放入 excel 文件并将其上传到服务器，可以做到这一点，但我希望它可以在服务器上完成

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T13:32:35.063

好吧，在敲了敲头之后，我发现我所追求的是一个 CRUD Datagrid。

我已经使用了 jqery 东 ui 网格，因为它正是我使用的东西

[http://www.jeasyui.com/tutorial/app/crud2.php](http://www.jeasyui.com/tutorial/app/crud2.php)

这个网格使用起来非常简单，所有的演示文件都可以从 jquery 获得，这使它变得更好。

A 感谢 PEM 为我指明了正确的方向

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:10:44.723

我建议查看 Dojo Toolkit DataGrid 或 dgrid，在 php 端使用存储（jsonRest 存储或 itemFileWriteStore），您只需在控制器中执行 fromJson（json_decode），然后填充一些模型对象（或直接放入一些清理后信息进入数据库以避免sql注入）。

# iphone - 如何获得uislider指向区域？

> ID：11033724
> 
> 赞同：0
> 
> 时间：2012-06-14T13:08:01.977
> 
> 标签：iphone, objective-c, ios, uislider

我在顶部有 6 个标签的 uislider，请参阅![图片](../Images/e60ee9d2854eac6334ec4491bce5d8eb.png).

现在我想获取滑块指向的选项卡。如果我们移动滑块。

所有选项卡都可以通过拖动和放置它们重新排列，因此如果 tab1 移动到 tab5 的位置并且滑块位于 tab5（倒数第二个位置），这是 tab1 的新位置，它应该显示 tab1 值而不是 tab5 值。

```
- (void)addTab:(UIViewController *)viewController {
if ([self.delegate respondsToSelector:@selector(willShowTab:)]) {
    [self.delegate willShowTab:viewController];
}

if (![self.childViewControllers containsObject:viewController] && self.count < self.maxCount - 1) {
    [self addChildViewController:viewController];
    viewController.view.frame = _contentFrame;

    if (_toobarVisible)
        [self.toolbar setItems:viewController.toolbarItems animated:YES];

    // Add tab selects automatically the new tab
    [UIView transitionWithView:self.view
                      duration:kAddTabDuration
                       options:UIViewAnimationOptionAllowAnimatedContent
                    animations:^{
                        [self.tabsView addTab:viewController.title];

                        if (self.currentViewController) {
                            [self.currentViewController viewWillDisappear:YES];
                            [self.currentViewController.view removeFromSuperview];
                            [self.currentViewController viewDidDisappear:YES];
                        }

                        [self.view addSubview:viewController.view];
                    }
                    completion:^(BOOL finished){
                        [viewController didMoveToParentViewController:self];
                        _currentViewController = viewController;
                    }];
} 
```

}

请提供我的代码段。

感谢你的帮助。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:11:40.607

理想情况下，如果所有选项卡的宽度相同，那么您只需要确定滑块当前位于总宽度的哪个部分，然后选择该索引处的选项卡。否则，您将不得不遍历选项卡以找到它们的水平边界，以确定滑块选择的是哪一个

# javascript - jquery在chrome中追加

> ID：11033727
> 
> 赞同：1
> 
> 时间：2012-06-14T13:08:12.193
> 
> 标签：javascript, jquery, google-chrome

我对 chrome 的 jquery 的 append() 函数有疑问。

我正在处理浏览器聊天，并正在从服务器上通过长轮询检索聊天消息。当客户端收到一条新消息时，该消息将附加到特定的聊天实例 div 中。

在追加之后，我想立即滚动设置scrollTop，即chat_session_text 的“滚动到底部”。这在大多数浏览器中都可以正常工作，但在 chrome 中却不行。经过一番研究，append() 在 chrome 中似乎不是同步的？

如果我在我的代码中记录 scrollHeight ，它会显示 div 的错误高度。但是，如果我将此代码粘贴到 chrome 控制台中，它的高度是正确的！所以，我怀疑 DOM 没有准备好附加的 div。

这是我的代码：

```
var strHtmlToAppend = $('<div class="chat_message"><img class="imgThumb2" style="float:left;" src="UserImage.aspx?alias=' + fromUserID + '" border="0" alt="">' + strMsg + '</div>');
$('#' + elm + ' .chat_session_text').append(strHtmlToAppend);
console.log($('#' + elm + ' .chat_session_text').prop("scrollHeight")); 
$('#' + elm + ' .chat_session_text').prop({ scrollTop: $('#' + elm + ' .chat_session_text')[0].scrollHeight }); 
```

有谁知道如何解决这个问题？DOM 准备好后，可能会为 append() 函数提供某种回调？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:31:34.523

Chome似乎`scrollHeight`不太支持（例如[http://code.google.com/p/chromium/issues/detail?id=34224](http://code.google.com/p/chromium/issues/detail?id=34224)）并且我发现 append() 是异步的声明不受支持。也许控制台打开的事实改变了整个页面的行为（不同的高度）？

我建议你使用 jQuery 提供的函数而不是直接访问属性，[http:](http://api.jquery.com/height/) //api.jquery.com/height/用于 getter，[http](http://api.jquery.com/scrollTop/) ://api.jquery.com/scrollTop/用于 setter。

# android - 在显示活动窗口之前完成布局

> ID：11033737
> 
> 赞同：1
> 
> 时间：2012-06-14T13:08:30.390
> 
> 标签：android, off-screen, start-activity

我有以下场景：在活动A中，当用户单击按钮时，应用程序向服务器发送请求以检索一些信息，然后将这些信息放入启动活动B的意图中。

在活动 B 中，在`onCreate`方法中，我这样做`setContentView(R.layout.activity_b)`（这个布局非常复杂，所以即使从 XML 中膨胀它也需要一段时间），然后进行一堆初始化。最后，在`onStart`我对组件进行一些最后的准备/安排。

在活动 A 中，当用户按下按钮时，我启动一个`AsyncTask`，它从服务器获取信息并启动活动 B，将所需的信息传递给意图。当我调用“startActivity”时，活动 B 的窗口会立即滑入到位，但是可能需要几秒钟才能完成初始化。在这几秒钟内，我看到一个黑屏。然后，最后，`onStart`执行，一切继续。

我想做的是在活动 B 滑入视图**之前在屏幕外完成所有这些初始化，这样当它“到达”时，所有布局都已经存在。**任何想法如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:14:13.667

我不认为你可以。就其性质而言，活动只有在屏幕上显示时才“活着”。

所以我认为没有办法让一个 Activity 开始工作（即实例化视图）而不是它在屏幕上的前景。

我想说，获得更好用户体验的最佳选择是使用某种进度指示器来显示用户正在加载的内容，然后在加载完成后隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:25:29.213

也许碎片可以帮助？将活动 A & B 更改为 Fragment A & B 并在后台加载 Fragment B 而不显示它。

# c# - 如何在不使用临时文件的情况下将 .NET 对象序列化到 Azure Blob 存储中？

> ID：11033739
> 
> 赞同：7
> 
> 时间：2012-06-14T13:08:32.900
> 
> 标签：c#, .net, serialization, azure, azure-storage

我想将 .NET 对象存储到 Azure Blob 存储中。

`TextWriter`目前我使用（`episodeList`是我想要序列化的对象）将其序列化为 XML 文件：

```
XmlAttributeOverrides overrides = new XmlAttributeOverrides();
XmlAttributes Xmlattr = new XmlAttributes();
Xmlattr.XmlRoot = new XmlRootAttribute("EPISODES");
overrides.Add(typeof(List<EpisodeData>), Xmlattr);
XmlSerializer serializer = new XmlSerializer(typeof(List<EpisodeData>), overrides);
TextWriter textWriter = new StreamWriter(@"C:\movie.xml");
serializer.Serialize(textWriter, episodeList);
textWriter.Close(); 
```

然后将文件上传到 Blob 存储中：

```
CloudBlobClient blobStorage = createOrGetReferenceOfBlobStorage(folderName);
string uniqueBlobName = string.Format("{0}/{1}", folderName, fileName);
CloudBlockBlob blob = clouBblockBlobPropertySetting(blobStorage, uniqueBlobName, ".txt");
using (StreamWriter writer = new StreamWriter(blob.OpenWrite()))
{
    writer.Write(content);
} 
```

是否可以以某种方式跳过临时文件，以便将 XML 直接上传到 Azure Blob 存储？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T06:15:31.507

您可以执行以下操作。创建一个`MemoryStream`实例并使用`XmlSerializer.Serialize(Stream stream)`将对象序列化到内存流中，然后将流“倒回”到开始使用`Seek()`. 然后调用`CloudBlob.UploadFromStream()`将流内容上传到 blob。

# node.js - 在 node.js http 响应结束时运行清理代码

> ID：11033740
> 
> 赞同：2
> 
> 时间：2012-06-14T13:08:46.710
> 
> 标签：node.js, express

```
 @app = express.createServer()
  @app.use express.bodyParser() 
```

在 HTTP 请求/响应结束时，我想执行一个操作（关闭数据库连接）。这最好在响应发送到客户端之后发生，这样客户端就不会等待它，但如果它内联发生，我总是可以做一个[process.nextTick](http://nodejs.org/docs/latest/api/process.html#process_process_nexttick_callback)。

如何在响应结束时注册回调？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-25T13:58:50.327

HTTP 响应是一个可写流。当流关闭时，会发出完成事件。因此，听它就可以了：

```
res.on('finish', function() {
    console.log(res._headers);
}); 
```

灵活得多。可以放在中间件或资源处理程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:31:08.410

所以你想在每个请求中打开/关闭/打开/关闭与数据库的连接？保持它打开并重用连接会更好。

如果您确实想在将响应发送回客户端（对于所有路由）之后做某事，您可以制作一个覆盖该`res.end()`函数的中间件（这是最后一个调用的，如下所示：

```
@app.use (req, res, next) ->
  var oldEnd = res.end;
  res.end = ->
    oldEnd.apply(res, arguments)
    # do stuff after sending the response back to the client 
```

# jquery - 谷歌地图 API。带有下一个和后退按钮的 infoWindow 可循环显示相同位置的标记信息

> ID：11033742
> 
> 赞同：0
> 
> 时间：2012-06-14T13:08:53.493
> 
> 标签：jquery, google-maps, google-maps-api-3, google-maps-markers, infowindow

我将标记从 XML 文件放置到我的 Google 地图上。然而，一些标记将在准确的位置（纬度和经度）位置，我不知道该怎么做：

这是我当前的 js，放置标记并创建 infoWindow

```
var customIcons = {
    been: {
        icon: 'http://labs.google.com/ridefinder/images/mm_20_blue.png',
        shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
    },
    going: {
        icon: 'http://labs.google.com/ridefinder/images/mm_20_red.png',
        shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
    }
};

function load() {
    var map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(47.6145, -122.3418),
        zoom: 3,
        mapTypeId: 'roadmap',
        mapTypeControl: false
    });
    var input = document.getElementById('searchTextField');
    var autocomplete = new google.maps.places.Autocomplete(input);
    autocomplete.bindTo('bounds', map);
    google.maps.event.addListener(autocomplete, 'place_changed', function () {
        infoWindow.close();
        var place = autocomplete.getPlace();
        if (place.geometry.viewport) {
            map.fitBounds(place.geometry.viewport);
        } else {
            map.setCenter(place.geometry.location);
            map.setZoom(17); 
        }
    });

    var infoWindow = new google.maps.InfoWindow;
    // Change this depending on the name of your PHP file
    downloadUrl("markers.php", function (data) {
        var xml = data.responseXML;
        var markers = xml.documentElement.getElementsByTagName("marker");
        for (var i = 0; i < markers.length; i++) {
            var name = markers[i].getAttribute("name");
            var address = markers[i].getAttribute("address");
            var customer = markers[i].getAttribute("customer");
            var type = markers[i].getAttribute("type");
            var visit_date = markers[i].getAttribute("visit_date");
            var comments = markers[i].getAttribute("comments");
            var image = markers[i].getAttribute("image");
            var point = new google.maps.LatLng(
            parseFloat(markers[i].getAttribute("lat")), parseFloat(markers[i].getAttribute("lng")));
            var html = "<div class=\"information\"><div class=\"thumb\"></div><span class=\"name\">" + name + "</span><span class=\"customer\"><b>Customer Name:</b> " + customer + "</span><br /><b>Address:</b> " + address + "<br /><span class=\"date\"><b>Visit Date:</b> " + visit_date + "</span><br /><span class=\"comments\"><img src=\"images/oq.png\" />" + comments + "<img src=\"images/cq.png\" /></span><img src=\'" + image + "'\" class=\"image\" /><div>";
            var icon = customIcons[type] || {};
            var marker = new google.maps.Marker({
                map: map,
                position: point,
                icon: icon.icon,
                shadow: icon.shadow
            });
            bindInfoWindow(marker, map, infoWindow, html);
        }
    });
}

function bindInfoWindow(marker, map, infoWindow, html) {
    google.maps.event.addListener(marker, 'click', function () {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
    });
}

function downloadUrl(url, callback) {
    var request = window.ActiveXObject ? new ActiveXObject('Microsoft.XMLHTTP') : new XMLHttpRequest;
    request.onreadystatechange = function () {
        if (request.readyState == 4) {
            request.onreadystatechange = doNothing;
            callback(request, request.status);
        }
    };
    request.open('GET', url, true);
    request.send(null);
}

function doNothing() {}
$(document).ready(function () {
    $(".date-pick").glDatePicker({
        onChange: function (target, newDate) {
            target.val(
            newDate.getFullYear() + "/" + (newDate.getMonth() + 1) + "/" + newDate.getDate());
        }
    });
}); 
```

有什么建议么？干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:25:17.247

试试这样

```
// these variables are global variables
 var infoWindow;
 var map;
// Change this depending on the name of your PHP file
    downloadUrl("markers.php", function (data) {
        var xml = data.responseXML;
        var markers = xml.documentElement.getElementsByTagName("marker");
        for (var i = 0; i < markers.length; i++) {
            var name = markers[i].getAttribute("name");
            var address = markers[i].getAttribute("address");
            var customer = markers[i].getAttribute("customer");
            var type = markers[i].getAttribute("type");
            var visit_date = markers[i].getAttribute("visit_date");
            var comments = markers[i].getAttribute("comments");
            var image = markers[i].getAttribute("image");
            var point = new google.maps.LatLng(
           markers[i].getAttribute("lat"),markers[i].getAttribute("lng"));
            var html = "<div class=\"information\"><div class=\"thumb\"></div><span class=\"name\">" + name + "</span><span class=\"customer\"><b>Customer Name:</b> " + customer + "</span><br /><b>Address:</b> " + address + "<br /><span class=\"date\"><b>Visit Date:</b> " + visit_date + "</span><br /><span class=\"comments\"><img src=\"images/oq.png\" />" + comments + "<img src=\"images/cq.png\" /></span><img src=\'" + image + "'\" class=\"image\" /><div>";
            var icon = customIcons[type] || {};
            var marker = new google.maps.Marker({
                map: map,
                position: point,
                icon: icon.icon,
                shadow: icon.shadow
            });
            bindInfoWindow(marker,   html);
        }
    });
}

function bindInfoWindow(marker,  html) {

    google.maps.event.addListener(marker, 'click', function () {

             if (infowindow) {

                infowindow.close();
            }

      infowindow = new google.maps.InfoWindow(
                        {
                            content: html                             

                        });

    infoWindow.open(map, marker);
});
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-24T07:58:46.573

不知道有没有人还在寻找这个问题的答案。这是我使用轮播的解决方案。

1.  将所有标记添加到全局变量
2.  绑定信息窗口时检查标记是否与任何现有标记重叠
3.  如果重叠，则单击标记将内容作为轮播附加到当前标记
4.  在标记关闭时将内容字符串重置为原始字符串

这是代码示例

```
var markers = [];
var markerContentString = null;
function load() {
var map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(47.6145, -122.3418),
    zoom: 3,
    mapTypeId: 'roadmap',
    mapTypeControl: false
});
var input = document.getElementById('searchTextField');
var autocomplete = new google.maps.places.Autocomplete(input);
autocomplete.bindTo('bounds', map);
google.maps.event.addListener(autocomplete, 'place_changed', function () {
    infoWindow.close();
    var place = autocomplete.getPlace();
    if (place.geometry.viewport) {
        map.fitBounds(place.geometry.viewport);
    } else {
        map.setCenter(place.geometry.location);
        map.setZoom(17);
    }
});

var infoWindow = new google.maps.InfoWindow;
// Change this depending on the name of your PHP file
downloadUrl("markers.php", function (data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
        var name = markers[i].getAttribute("name");
        var address = markers[i].getAttribute("address");
        var customer = markers[i].getAttribute("customer");
        var type = markers[i].getAttribute("type");
        var visit_date = markers[i].getAttribute("visit_date");
        var comments = markers[i].getAttribute("comments");
        var image = markers[i].getAttribute("image");
        var point = new google.maps.LatLng(
            parseFloat(markers[i].getAttribute("lat")), parseFloat(markers[i].getAttribute("lng")));
        var html = "<div class=\"information\"><div class=\"thumb\"></div><span class=\"name\">" + name + "</span><span class=\"customer\"><b>Customer Name:</b> " + customer + "</span><br /><b>Address:</b> " + address + "<br /><span class=\"date\"><b>Visit Date:</b> " + visit_date + "</span><br /><span class=\"comments\"><img src=\"images/oq.png\" />" + comments + "<img src=\"images/cq.png\" /></span><img src=\'" + image + "'\" class=\"image\" /><div>";
        var icon = customIcons[type] || {};
        var marker = new google.maps.Marker({
            map: map,
            position: point,
            icon: icon.icon,
            shadow: icon.shadow,
            _content: html //Add html content to _content
        });
        markers.push(marker); //Add markers to array
        bindInfoWindow(marker, map, infoWindow, html);
    }
});
}
function bindInfoWindow(marker, map, infoWindow, html) {
var overlappingMarkers = getOverlappingMarkers(marker); //Check if current marker overlps with any of the existing markers
if (overlappingMarkers.length > 0) {
    for (var i = 0; i < overlappingMarkers.length; i++) {
        overlappingMarkers[i].label = {
            text: overlappingMarkers.length,
            color: 'white'
        }; //Add count of marker at that ocation as label 
    }
}
google.maps.event.addListener(marker, 'click', function () {
    markerContentString = html; //Save content string of maker to a global variable
    var appentedContentString = null;
    if (overlappingMarkers.length > 1) {
        appentedContentString = '<div class="slideshow-container">';
        for (var i = overlappingMarkers.length - 1; i >= 0; i--) {
            var style = i === overlappingMarkers.length - 1 ? 'style="display:block;"' : "";
            appentedContentString += '<div class="mySlides fade" ' + style + '>' +
                overlappingMarkers[i]._content +
                '</div>';
        }
        appentedContentString += '<a class="prev" onclick="plusSlides(-1)">&#10094;</a>' +
            '<a class="next" onclick="plusSlides(1)">&#10095;</a>' +
            '</div>' +
            '<br>' +
            '<div style="text-align:center">';
        for (var i = 0; i < overlappingMarkers.length; i++) {
            var className = i === 0 ? "dot active" : "dot";
            var newSlide = i + 1;
            appentedContentString += '<span class="' + className + '" onclick="currentSlide(' + newSlide + ')"></span> ';
        }
        appentedContentString += '</div>';
    }
    var infoContent = appentedContentString == null ? markerContentString : appentedContentString;
    infowindow.setContent(infoContent);
    infowindow.open(map, marker);
    showSlides(1);

    //Resetting content on closing infowindow
    google.maps.event.addListener(infowindow, 'closeclick', function () {
        imageInfo.content = markerContentString;
        markerContentString = null;
    });
});
}

function currentSlide(n) {
showSlides(slideIndex = n);
}

function plusSlides(n) {
showSlides(slideIndex += n);
}

function showSlides(n) {
var i;
var slides = document.getElementsByClassName("mySlides");
if (!slides || slides.length < 1) return;
var dots = document.getElementsByClassName("dot");
if (n > slides.length) {
    slideIndex = 1
}
if (n < 1) {
    slideIndex = slides.length
}
for (i = 0; i < slides.length; i++) {
    slides[i].style.display = "none";
}
for (i = 0; i < dots.length; i++) {
    dots[i].className = dots[i].className.replace(" active", "");
}
slides[slideIndex - 1].style.display = "block";
dots[slideIndex - 1].className += " active";
}

function getOverlappingMarkers(marker) {
var overlappingMarkers = [];
for (i = 0; i < markers.length; i++) {
    if (markers[i].getPosition().lat() == marker.getPosition().lat() &&
        markers[i].getPosition().lng() == marker.getPosition().lng()) {
        overlappingMarkers.push(markers[i]);
    }
}
return overlappingMarkers;
} 
```

现在在样式部分添加以下内容

```
 * {
        box-sizing: border-box;
    }

    body {
        font-family: Verdana, sans-serif;
        margin: 0;
    }

    .mySlides {
        display: none;
    }

    img {
        vertical-align: middle;
    }
    /* Slideshow container */
    .slideshow-container {
        max-width: 1000px;
        position: relative;
        margin: auto;
    }
    /* Next & previous buttons */
    .prev, .next {
        cursor: pointer;
        position: absolute;
        top: 45%;
        width: auto;
        padding: 16px;
        margin-top: -22px;
        color: white;
        font-weight: bold;
        font-size: 18px;
        transition: 0.6s ease;
        border-radius: 0 3px 3px 0;
        user-select: none;
    }

    /* Position the "next button" to the right */
    .next {
        right: 0;
        border-radius: 3px 0 0 3px;
    }

        /* On hover, add a black background color with a little bit see-through */
        .prev:hover, .next:hover {
            background-color: rgba(0,0,0,0.8);
        }

    /* The dots/bullets/indicators */
    .dot {
        cursor: pointer;
        height: 10px;
        width: 10px;
        margin: 0 2px;
        background-color: #bbb;
        border-radius: 50%;
        display: inline-block;
        transition: background-color 0.6s ease;
    }

        .active, .dot:hover {
            background-color: #717171;
        }

    /* Fading animation */
    .fade {
        -webkit-animation-name: fade;
        -webkit-animation-duration: 1.5s;
        animation-name: fade;
        animation-duration: 1.5s;
    }
</style> 
```

# tomcat - nginx代理添加servlet路径

> ID：11033746
> 
> 赞同：0
> 
> 时间：2012-06-14T13:09:01.413
> 
> 标签：tomcat, nginx, spring-security

我有 Tomcat 6 在路径“be”上运行 Web 应用程序。Spring Security 用于登录过程。登录 URL 是`/console/login`，它在登录后重定向到`/console/customer`。我使用 https 作为`login`url，使用 http 作为`customer`URL。我没有在任何 spring 配置文件中指定 servlet 路径。一切正常，并在访问`/be/console/login`正确的重定向（到`/be/console/customer`）后收到。

现在我想要一个代理。我将 Nginx 配置为转发`https://localhost`到`https://<someip>:9443`http，从端口 80 转发到端口 9080。

问题是 Nginx 正在向浏览器返回无效的重定向。相反`/be/console/customer`，它返回`/be/be/console/customer`. Servlet 路径被添加到 URL 中两次。

那第二个“存在”怎么可能被删除？

谢谢。

Nginx 配置：

```
server {
    listen       443 ssl;
    server_name  localhost;

    ssl                  on;        
    ssl_certificate      C:\jc\\nginx\\tc\selfsigned.cer;
    ssl_certificate_key  C:\jc\\nginx\\tc\private.key;

    ssl_session_timeout  5m;

    ssl_protocols  SSLv2 SSLv3 TLSv1;
    ssl_ciphers  HIGH:!aNULL:!MD5;
    ssl_prefer_server_ciphers   on;

    location / {
            proxy_redirect          off;
            proxy_pass              https://<some ip>:9443;
            proxy_set_header        X-Real_IP $remote_addr;
            proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header        Host $http_host;
    } 

    location ~ /.+ {
            proxy_redirect          off;
            proxy_pass              https://<some ip>:9443;
            proxy_set_header        X-Real-IP $remote_addr;
            proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header        Host $http_host;
    }   
}
server {
    listen       80;
    server_name localhost;

    access_log  logs/access.log;
    error_log  logs/error.log;

    location / {                
            proxy_redirect          off;
            #server_name_in_redirect    off;
            proxy_pass              http://<some ip>:9080;              
            proxy_set_header        X-Real_IP $remote_addr;
            proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header        Host $http_host;
    } 

    location ~ /.+ {
            proxy_redirect          off;                
            proxy_pass              http://<some ip>:9080;
            proxy_set_header        X-Real-IP $remote_addr;
            proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header        Host $http_host;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T22:21:36.277

此配置正在生产中工作：

```
location /demo/ {
    proxy_pass  http://localhost:8080;
    proxy_redirect     off;

    proxy_set_header   Host             $host;
    proxy_set_header   X-Real-IP        $remote_addr;
    proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;
    proxy_pass_request_headers on;

    client_max_body_size       10m;
    client_body_buffer_size    128k;

    proxy_connect_timeout      90;
    proxy_send_timeout         90;
    proxy_read_timeout         90;

    proxy_buffer_size          4k;
    proxy_buffers              4 32k;
    proxy_busy_buffers_size    64k;
    proxy_temp_file_write_size 64k;
} 
```

# iphone - NSMutableDictionary 未正确初始化

> ID：11033752
> 
> 赞同：1
> 
> 时间：2012-06-14T13:09:12.910
> 
> 标签：iphone, objective-c, ios, nsarray, nsmutabledictionary

我今天遇到了一个意外错误。我有一个`NSArray`和一个`NSMutableDictionary`。问题是 my`NSMutableDictionary`变成了一个数组。这是代码：

标题：

```
NSArray *tableViewCellValues;
NSMutableDictionary *inputValues; 
```

执行：

```
- (void)viewDidLoad
{
  [super viewDidLoad];
  tableViewCellValues = [NSArray arrayWithObjects:@"First", @"Second", @"Third", nil];
  inputValues = [NSMutableDictionary dictionary];
  //other code...
} 
```

所以通常我应该得到一个以“First”、“Second”和“Third”作为对象和一个空的数组`NSMutableDictionary`。当我在初始化后立即在日志中打印它时，`NSMutableDictionary`我得到以下信息：

```
(lldb) po tableViewCellValues
(NSArray *) $1 = 0x00000000 <nil>
(lldb) po inputValues
(NSMutableDictionary *) $2 = 0x06a80420 <__NSArrayI 0x6a80420>(
First,
Second,
Third
)

(lldb) po [tableViewCellValues class]
error: Couldn't execute function; result was eExecutionDiscarded
(lldb) po [inputValues class]
(id) $4 = 0x01453b64 __NSArrayI 
```

我在那里有点困惑。我尝试清理并再次运行它，但没有任何反应。

如果重要的话，我正在使用 Mac OS X 10.7.3 和 Xcode 4.3。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:14:41.990

你真的想为你的字典分配内存，所以它应该是：

`self.inputValues = [[NSMutableDictionary alloc] init];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-04T10:48:13.300

新的文字语法更好：

```
self.myMutDict = [@{} mutableCopy] 
```

或没有属性的更长版本只是为了理解：

```
NSDictionary *emptyDict = @{};
NSMutableDictionary *myMutDict = [emptyDict mutableCopy]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-14T13:27:44.807

这是因为你没有分配你的字典

使用此代码

```
inputValues = [[NSMutableDictionary alloc] init]; 
```

# python - 跨不同 PC 传输 Python 设置

> ID：11033753
> 
> 赞同：24
> 
> 时间：2012-06-14T13:09:14.930
> 
> 标签：python

我的情况是我有两台笔记本电脑，`fresh installation`其中`windows`. 现在我将它们都用于编程。

因此，假设我在其中一台笔记本电脑中安装了各种 python 模块/包。那么有没有办法可以`clone`在我的另一台笔记本电脑上完成这个完整的 python 设置。原因是我的互联网连接目前非常慢，所以我不想下载相同的模块或软件包两次，然后再次安装它们。

我知道我可以下载 zip 文件中的模块，将它们转移到其他地方，然后运行`python setup.py install`，但我将使用它`pip`来安装模块。

无论如何，我想知道是否`cloning`可以进行 python 设置。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-14T13:47:15.863

这是一个完全不同的建议，如果您想在两台 PC 之间同步包而不是只克隆一次所有内容，建议您这样做。

仅当您使用[`pip`](http://www.pip-installer.org). 它不适用于无法使用 pip 安装/安装的软件包。

1.  将 pip 缓存设置为可从两台 PC 访问的网络存储/USB 记忆棒（有关说明，请参阅[https://stackoverflow.com/a/4806458/851737](https://stackoverflow.com/a/4806458/851737)）
2.  将您当前的包环境从源 PC 冻结到需求文件中：

    `$ pip freeze > req.txt`

3.  将 req 文件复制到目标 PC 并安装软件包：

    `$ pip install -r req.txt`

如果你把它放在`req.txt`VCS 下，你可以非常顺利地自动化和同步这个过程。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-14T13:14:19.780

如果两台 PC 上的 Python 版本相同，则只需将内容复制`Lib\site-packages`到`Scripts`新的 PC 上即可。但请注意，它必须是相同的次要版本（例如 2.6 不适用于 2.7）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-14T13:12:00.093

如果您使用`virtualenv`（[http://www.virtualenv.org](http://www.virtualenv.org)），您应该能够将其存储在 USB 记忆棒上并随身携带。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-19T13:42:00.647

我在我的 Windows 7 PC 上更新 Python 2.7.3 --> 2.7.9。通常这会很好，但是新安装不小心进入了 C:，而不是我以前版本的 python 所在的位置，在 D: 驱动器上。要使其正常工作，只需将新安装直接复制到旧安装的顶部即可。像魅力一样工作，我安装的所有旧模块都存在。

# coronasdk - 如何在 corona sdk 中为字体设置阴影

> ID：11033762
> 
> 赞同：2
> 
> 时间：2012-06-14T13:09:35.193
> 
> 标签：coronasdk

在我的应用程序中，我必须为字体设置阴影。如果可以为字体设置阴影。如何为字体设置外线、外发光。请帮我为字体设置轮廓或外发光或阴影。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T08:48:44.997

```
function YourPage:insertText(text, fontname, size, x, y)                        
  local offset = size / 10                                                      
  local label = display.newText(text, x, y, (fontname), size)
  local shadow = display.newText(text, x+offset, y+offset, (fontname), size)
  label:setTextColor( 255, 255, 255 )                                           
  shadow:setTextColor( 0, 0, 0, 128 )                                           
  self:insert(shadow)                                                           
  self:insert(label)                                                            
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-10T09:21:11.653

查看[display.newEmbossedText()](https://docs.coronalabs.com/api/library/display/newEmbossedText.html)它应该满足您的需要：

```
local myText = display.newEmbossedText( "hello", 200, 100, native.systemFont, 40 )
myText:setFillColor( 0.5 )
myText:setText( "Hello World!" )

local color = 
{
    highlight = { r=1, g=1, b=1 },
    shadow = { r=0.3, g=0.3, b=0.3 }
}
myText:setEmbossColor( color ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T14:05:44.577

我认为在 Corona 中不可能以任何有意义的方式做你想做的事。您可能会看看使用位图字体。查看[Corona 的 Text Candy](http://developer.anscamobile.com/forum/2011/03/19/new-candy-tool-text-candy-corona-50-coupon-inside)。您可以制作两个文本对象并让一个作为阴影，但它会是一个锐利的阴影。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T17:04:38.410

您可以使用 Paint.net 创建带有阴影的文本，然后将其保存到图像文件并在 Corona sdk 中使用。Paint.net 是免费的，并且有几个关于使用 Paint.net 创建文本效果（如阴影）的 YouTube 教程。

# ruby-on-rails - 如何使用 simple_form 在 Rails 中上传多个图像？

> ID：11033763
> 
> 赞同：4
> 
> 时间：2012-06-14T13:09:54.867
> 
> 标签：ruby-on-rails, carrierwave, polymorphic-associations, simple-form

我正在使用 Rails 3.2、Carrierwave 和 simple_form。

目前，使用以下代码上传一张图片一切正常：

```
<%  @product.images.build if @product.images.blank? %>
<%= f.simple_fields_for :images do |img| %>
  <% unless @product.images.first.file.blank? %>
      <div class="control-group">
         <label class="controls"><%= image_tag @product.images.first.file %></label>
      </div>   
      <%= img.input :_destroy, :label => "Remove", :as => :boolean %>
  <% end %>
      <%= img.input :file, :as => :file, :label => "Picture", input_html: { class: "input-hundredpercent" } %>
<% end %> 
```

但是，如何将这种嵌套表单用于多图像上传？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T13:20:53.467

您可以尝试 Ryan Bate 的 nested_form gem ( [https://github.com/ryanb/nested_form](https://github.com/ryanb/nested_form) )。

另请参阅他关于此主题的 railscast：[http ://railscasts.com/episodes/196-nested-model-form-revised](http://railscasts.com/episodes/196-nested-model-form-revised)

# c - 在 C 中重新分配数组

> ID：11033765
> 
> 赞同：2
> 
> 时间：2012-06-14T13:09:57.207
> 
> 标签：c, arrays, pointers, realloc

我正在尝试创建一个将两个向量附加在一起的函数，但是当我尝试将更多内存重新分配给第一个向量以便第二个向量适合时，我最终得到了一个段错误。这是代码

```
void vectorAppend(double** v1, size_t* s1, double const* v2, size_t s2){
  assert(v1 && v2 && *s1 > 0 && s2 > 0);
  (*v1) = realloc((*v1), (*s1 + s2)*sizeof(double));
  for (size_t i = 0; i < s2; i++){
    *v1[*s1+i]=v2[i];
  }
  *s1+=s2;
} 
```

这就是我从 main 中调用它的方式

```
double *v1 = vectorConstruct(3, 2);
double *v2 = vectorConstruct(3, 0);
unsigned int s = 3;
vectorAppend(&v1, &s, v2, 3); 
```

vectorConstruct 返回指向初始化为第二个参数的向量的指针。

```
double* vectorConstruct(size_t s, double val){
  assert(s>0);
  double *ret = malloc(s*sizeof(double));
  for(size_t i = 0; i < s;i++){
    ret[i]=val;
  }
  return ret;
} 
```

我似乎无法在这里找到问题，因此感谢任何答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T13:15:29.510

```
*v1[*s1+i]=v2[i]; 
```

应该

```
(*v1)[*s1+i]=v2[i]; 
```

一元`*`的优先级低得惊人。

# mysql - foreach 在一行中显示一个特定结果

> ID：11033770
> 
> 赞同：0
> 
> 时间：2012-06-14T13:10:25.390
> 
> 标签：mysql, arrays, foreach

我有一个 foreach 循环，但想在一个特定帖子旁边显示一个回声，而其余的则显示给每个循环元素。

我做到了：

```
$query = mysql_query ($query); (this also gets a post_id)

$data = array();
while($row = mysql_fetch_array($query)){
$data[] = $row;

foreach ($data as $row):

echo "Date", "post", "vote"; 
```

我现在不希望仅在一个特殊行中显示投票，如果

```
$row = $query_row[0]. 
```

我试过

```
$query_row= ( find the post_id of the row, where the user voted)

if ($row['post_id'] == $query_row[0]) {

echo 'u voted';}

else {

echo 'vote';
} 
```

不幸的是，这会出现在每个帖子下，而不仅仅是用户投票的帖子。任何想法，如何在这个 post_id 下回应“你投票”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:14:33.660

也许你的意思是说类似

```
if ($row->id == $query_row[0]->id) 
```

您提供的示例代码虽然不完整，所以不清楚是什么......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:15:21.047

您应该`==`用于相等检查，`=`用于值分配

```
if ($row == $query_row[0]) { 
```

# solr - 无法通过 Luke 编辑 Solr 字段

> ID：11033774
> 
> 赞同：0
> 
> 时间：2012-06-14T13:10:47.723
> 
> 标签：solr, lucene, editing, indexing, luke

我正在使用 Luke 浏览一些 Solr 索引，当我尝试“重建和编辑”文档中的浮点字段，然后“删除旧的并添加”时，出现异常：

```
java.lang.NullPointerException
at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:1106)
at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:1021)
at org.getopt.luke.Luke.actionEditAdd(Unknown Source)
at org.getopt.luke.Luke.actionEditReplace(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at thinlet.Thinlet.invokeImpl(Unknown Source)
at thinlet.Thinlet.invoke(Unknown Source)
at thinlet.Thinlet.handleMouseEvent(Unknown Source)
at thinlet.Thinlet.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Component.java:4651)
at java.awt.Container.dispatchEventImpl(Container.java:2099)
at java.awt.Component.dispatchEvent(Component.java:4481)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4577)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4238)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4168)
at java.awt.Container.dispatchEventImpl(Container.java:2085)
at java.awt.Window.dispatchEventImpl(Window.java:2478)
at java.awt.Component.dispatchEvent(Component.java:4481)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:643)
at java.awt.EventQueue.access$000(EventQueue.java:84)
at java.awt.EventQueue$1.run(EventQueue.java:602)
at java.awt.EventQueue$1.run(EventQueue.java:600)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)
at java.awt.EventQueue$2.run(EventQueue.java:616)
at java.awt.EventQueue$2.run(EventQueue.java:614)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:613)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

没有其他消息说明我为什么会收到 NullPointerException。我正在针对使用 Solr 3.4 创建的一些索引运行最新的 Luke 3.5。任何想法还有什么可能是错的......？

为了安全起见，我已经停止了 Tomcat，并确保可以从运行 Luke 的用户那里编辑索引文件（试图排除问题可能是索引文件上的用户权限问题的情况）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:18:14.473

我总是对 Solr/Lucene 和 Luke 使用完全相同的版本。这一点尤其重要，因为您正在尝试更改 Luke 中的索引。它可以写出 Solr/Lucene 无法读取的版本。

# objective-c - Objective C实例变量/属性的多重声明

> ID：11033775
> 
> 赞同：2
> 
> 时间：2012-06-14T13:10:49.913
> 
> 标签：objective-c, automatic-properties

我对 ObjC 还是很陌生。我注意到创建你的所有地方都是非常标准的

```
@interface myObj : NSObject {
    id delegate;
    NSDictionary *dict;
} 
```

进而

```
@property (nonatomic,retain) NSDictionary *dict;
@property (retain) id delegate; 
```

- 例如。我知道 @property 的自动代码生成 + 更清晰的定义是多么有用，这要归功于 Apple 的[Declared Properties](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)页面。然而，我不明白的是，为什么人们同时做这两个标准是标准的——声明他们的属性，然后将它们再次放在{大括号}中。

我的意思是，如果我有一个类，其中我希望某些变量具有自动 getter/setter 而有些不具有，那么我会理解为我的常规变量设置 {} 块，然后只创建 @property/@synthesize 语句只是那些我想要添加功能的特定变量；但是，为什么在您知道希望所有实例变量都具有 getter 和 setter 的情况下始终同时拥有这两种方法是标准的呢？我想我要跳闸了，因为我基本上在 100% 的时间里看到它像这样使用，而我觉得它真的没有必要……只需声明 @properties 并保留它。

想法？最佳编码实践建议？还是我在这里遗漏了一些信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T13:23:41.183

您所看到的在早期版本的 Objective-C 中是必需的，但现在不再需要了。

在 NeXT 使用的 Objective-C 的第一个版本中，直到引入新的运行时（在 Mac OS X 上使用 Objective-C 2.0），所有实例变量都必须在其`@interface`. 原因是如果你对一个类进行子类化，编译器需要知道类的实例变量布局，以便它可以看到放置子类的实例变量的偏移量。

当引入属性时，综合属性必须由类结构中的实例变量“支持”。因此，您必须同时声明实例变量和属性。

以上所有都不再正确。较新的 Objective-C 在查找实例变量偏移的方式上不那么脆弱，这意味着一些变化：

*   并非所有实例变量都需要在`@interface`. 它们现在可以在`@implementation`: 中定义，但由于可能发生冲突和其他问题而不能在类别中定义。
*   可以根据属性定义推断和创建合成属性的实例变量。
*   您可以以编程方式将实例变量添加到您在运行时创建的类（仅在您将类注册为系统可用之前）。

因此，重申一下，您只需要在旧版本的 Objective-C 语言中声明实例变量和综合属性。您所看到的内容是多余的，不应被视为“最佳实践”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:21:56.707

我倾向于将属性视为我的公共变量，而其他人则视为私有变量，但是当您说“真的没有必要”时，您是对的。

**如果省略 ivar，仍会创建 ivar**

我创建了两者，以便我所有的 ivars 都在一起，并且在接口声明之后的大括号内

```
@interface MyClass
{
    int variable1;
}
@end 
```

# c# - LINQ 和溢出异常？

> ID：11033777
> 
> 赞同：11
> 
> 时间：2012-06-14T13:10:50.920
> 
> 标签：c#, linq, exception, sum

我已经为 EventLogEntry 实现了一个自定义的 IEqualityComparer。

```
public class EventLogEntryListComparison :
    IEqualityComparer<List<EventLogEntry>>,
    IEqualityComparer<EventLogEntry> 
```

对于`IEqualityComparer<List<EventLogEntry>>`，GetHashCode 函数非常简单。

```
public int GetHashCode(List<EventLogEntry> obj)
{
    return obj.Sum(entry => 23 * GetHashCode(entry));
} 
```

但是，这会为某些条目引发 OverflowException。

```
"Arithmetic operation resulted in an overflow."
   at System.Linq.Enumerable.Sum(IEnumerable`1 source)
   at System.Linq.Enumerable.Sum[TSource](IEnumerable`1 source, Func`2 selector)
   at <snip>.Diagnostics.EventLogAnalysis.EventLogEntryListComparison.GetHashCode(List`1 obj) in C:\dev\<snip>Diagnostics.EventLogAnalysis\EventLogEntryListComparison.cs:line 112
   at System.Collections.Generic.Dictionary`2.Insert(TKey key, TValue value, Boolean add)
   at System.Collections.Generic.Dictionary`2.set_Item(TKey key, TValue value)
   at <snip>.Diagnostics.EventLogAnalysis.Program.AnalyseMachine(String validMachineName) in C:\dev\<snip>.Diagnostics.EventLogAnalysis\Program.cs:line 104
   at System.Threading.Tasks.Parallel.<>c__DisplayClass2d`2.<ForEachWorker>b__23(Int32 i)
   at System.Threading.Tasks.Parallel.<>c__DisplayClassf`1.<ForWorker>b__c() 
```

在尝试在调试时遇到相同的错误并且无法在即时窗口中出现之后，我将代码更改为此并再见 OverflowException？

```
int total = 0;
foreach (var eventLogEntry in obj)
{
    total += GetHashCode(eventLogEntry);
}

return total; 
```

LINQ 的 Sum 函数的行为有何不同？

**编辑 2**

感谢一些评论，更正和预期的 GetHashCode 函数现在如下所示，

```
public int GetHashCode(List<EventLogEntry> obj)
{
    return unchecked(obj.Aggregate(17,
        (accumulate, entry) =>
        accumulate * 23 + GetHashCode(entry)));
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T13:15:33.220

LINQ 的方法在块`Enumerable.Sum(...)`内执行加法。`checked`这意味着如果总和溢出，他们会故意抛出异常。

您的总和不在`checked`块内，因此它是否引发异常取决于...是从`checked`块内调用还是从我相信的程序集上的属性调用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-14T13:16:57.580

这是因为用 C# 编译的程序集的不同行为和`Enumerable.Sum`.

如果您在 C# 中编译程序集，默认情况下所有添加都在`unchecked`模式下执行，这就是您在上一个示例中没有出现溢出的原因。如果您希望运行时引发溢出，则需要使用`checked`块（当然对于您的哈希，您*不*希望这样，因此 C# 的默认行为很好）。

相比之下，`Enumerable.Sum`用于计算总和，通常，您不希望总和溢出。这就是为什么`Enumerable.Sum`在 mode 下执行计算，`checked`如果 sum 溢出则会引发异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T13:41:24.693

如果您正在计算哈希码，则可能无论如何都不想使用 Sum。使用 Xor ( `^`) 将提供相同的结果，甚至可能将您的哈希码分散到超过一个总和的范围内。试试这个方法：

```
public int GetHashCode(List<EventLogEntry> obj)
{
    int total = 0;
    foreach (var eventLogEntry in obj)
    {
        total ^= GetHashCode(eventLogEntry);
    }

    return total;
} 
```

# java - 模型映射器是否支持使用 bean 属性列表映射 bean？

> ID：11033780
> 
> 赞同：2
> 
> 时间：2012-06-14T13:10:57.527
> 
> 标签：java, modelmapper

我正在尝试映射两个 JavaBean 结构（此处简化）：

```
package foo;
public class Container {
    private List<Item> items;
    public List<Item> getItems() { return items; }
    public void setItems(List<Item> items) { this.items = items; }
}

public class Item {
    private String message;
    public String getMessage() { return message; }
    public void setMessage(String message) { this.message = message; }
} 
```

此外，我在包中有相同属性的相同 Bean，`bar`并在两者之间进行映射，例如

```
ModelMapper mapper = new ModelMapper();
bar.Container barContainer = mapper.map(fooContainer, bar.Container.class); 
```

其中源`fooContainer`包含一个项目列表，其中一些将属性`message`设置为 a `String`，其中一些具有`null`作为属性值。

在映射结果中，我发现列表`foo.Item`似乎已正确映射到第一个属性的列表`bar.Item`也正确映射。`message`但是，在具有属性值的第一项之后`null`，无论源属性的内容如何，​​后续项的`message`所有属性值都将映射到。`message``null`

通过调试，我发现了原因：一旦目标属性值是`null`消息属性路径，在 MappingEngineImpl:207 中被标记为阴影，然后在 MappingEngineImpl:142 中的后续项目中被忽略。

这是 moddelmapper 的错误还是我必须以另一种方式配置 modelmapper 才能启用 bean 属性列表的映射？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:10:38.113

在我看来，这绝对是一个错误。实际上，我自己使用 ModelMapper 时遇到了同样的问题，这就是我发现这个问题的方式。

为 null 的着色路径似乎很危险，因为相同的上下文用于映射其他对象。我已经取消了这个功能，它似乎可以按预期工作。

我在 ModelMapper 页面上围绕这个错误创建了一个问题： [http ://code.google.com/p/modelmapper/issues/detail?id=19](http://code.google.com/p/modelmapper/issues/detail?id=19)

另外，我修复了这个问题并将其发布到 GitHub。我已经提出了一个拉取请求，希望它将被合并到下一个版本的 ModelMapper 中： [https ://github.com/chrisdail/modelmapper](https://github.com/chrisdail/modelmapper)

# c# - 使用 linq 查询 XML 的异常

> ID：11033781
> 
> 赞同：0
> 
> 时间：2012-06-14T13:10:59.313
> 
> 标签：c#, asp.net, linq, linq-to-xml

我之前问过这个问题，我得到了非常快速和有用的回答：[Linq to XML query not pick up any values](https://stackoverflow.com/questions/11031640/linq-to-xml-query-not-picking-up-any-values#comment14424463_11031640)

我遵循了标记为正确的答案中给出的建议，该建议有效，并允许我选择“产品”标签。我现在正在那个“产品”标签中搜索，以便找到要导入我的数据库的值，但我又有点卡住了。

这是我的 XML 文件的结构：

```
<?xml version="1.0"?>
<!DOCTYPE ONIXMessage SYSTEM "http://www.editeur.org/onix/2.1/reference/onix-international.dtd">
<ONIXMessage xmlns="http://www.editeur.org/onix/2.1/reference" release="2.1">
  <Header>
    <FromCompany>MyCo</FromCompany>
    <FromPerson>Joe Bloggs</FromPerson>
    <FromEmail>joe@bloggs.com</FromEmail>
    <SentDate>20120522</SentDate>
  </Header>
  <Product>
    <ProductForm>DG</ProductForm>
    <Title>
      <TitleType>01</TitleType>
      <TitleText>Blogg</TitleText>
    </Title>
    <WorkIdentifier>
      <WorkIDType>15</WorkIDType>
      <IDValue>PI3564231</IDValue>
    </WorkIdentifier>
    <Language>
      <LanguageRole>01</LanguageRole>
      <LanguageCode>eng</LanguageCode>
    </Language>
  </Product>
</ONIXMessage> 
```

这是我的代码片段：

```
 XElement onix = XElement.Load(fs);

        // Get all the product information.
        //
        var products = onix.Descendants().Where(m => m.Name.LocalName == "Product").ToList();

        foreach (var p in products)
        {
            try
            {
                prod.Title = p.Elements("Title").First(t => (t.Element("TitleType").Value == "01")).Element("TitleText").Value;
                //further processing
            }
            catch (Exception exp)
            {
                throw new FileProcessingException("Unable to process product.", exp);
            }
        } 
```

当我搜索如上所示的标题文本时，异常被捕获。例外是“对象引用未设置为对象的实例”。该项目显然在 XML 文件中，只是没有正确提取它。

在 toda 之前我从未见过 .Descendants() ，我明白它的含义，但从我读到的内容来看，我应该也可以在这里使用 .Elements() 吗？

谁能看到可能出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:17:02.780

好吧，正如我回答您之前的问题一样，我想我可能会有所帮助...

您的文档有一个命名空间 (xmlns)。如果你想使用 Elements("tagName") 或 Element("tagName") 等，你必须在你所有的 TagName 前面加上命名空间。

因此，如果您这样做，您的查询将起作用（如 Habib.OSU 在您之前的问题中所述）

```
 XNamespace ns = onix.Attribute("xmlns").Value;
  var products2 = onix.Elements(ns + "Product").ToList();

  foreach (var p in products2)
  {
        var title = p.Elements(ns + "Title")
        .First(t => (t.Element(ns + "TitleType").Value == "01"))
        .Element(ns + "TitleText").Value;
  } 
```

如果您绝对不想使用命名空间，则必须使用 Descendants() 和 Name.LocalName。它会给你同样的，但是......它真的很难阅读。

```
 var products = onix.Descendants().Where(m => m.Name.LocalName == "Product").ToList();

 foreach (var p in products)
 {

      var title = p.Descendants().Where(m => m.Name.LocalName == "Title")
         .Descendants()
         .First(m => m.Name.LocalName == "TitleType" && m.Value == "01")
         .Parent
         .Descendants()
         .First(m => m.Name.LocalName == "TitleText")
         .Value;

 } 
```

我没有放任何 NULL Check，这当然是要做的事情。

另请注意，第二个查询的性能会降低，因为 Descendants() 会枚举元素的所有子元素，而不考虑层次结构。而 Elements() 将仅检索直接子节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:21:48.080

试试这个：

```
 XDocument doc = XDocument.Load(fs);
 var products= from elements in doc.Elements("ONIXMessage").Elements("Product");
   foreach (var p in products)
            {
                    var title  = (from items in p.Elements("Title")
                                 where items.Element("TitleType").Value == "01"
                                 select items.Element("TitleText").Value).FirstOrDefault();
            } 
```

# core-data - 我可以在 Core Data 中存储可执行代码吗

> ID：11033782
> 
> 赞同：0
> 
> 时间：2012-06-14T13:11:01.570
> 
> 标签：core-data

我有一个应用程序可以让用户与多个表单进行交互。我可以通过对远程服务器的请求轻松获得创建表单所需的一切。但是，每个表单都需要自己的类来处理输入、数据格式化和验证、显示和本地存储。我试图编写一个适用于任何形式的通用类，但我遇到了许多一次性的情况。此外，如果我将来根据自己的特殊情况更改或添加表单，我不想修改代码并发布更新。

是否可以序列化编译后的代码，将其发送到服务器请求中，并将其存储在 Core Data 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:28:01.777

虽然这当然是可能的，但它也肯定相当复杂。您必须处理许多低级别的考虑，例如动态链接您的代码片段。

据我了解，您不需要大量代码，也不需要过于复杂。使用可以嵌入到应用程序中的脚本语言（例如 JavaScript 或 Lua）可能要容易得多，但需要付出更多的努力。Lua 并不大，你可以很容易地使用预编译的片段。

# arbor.js - arbor.js 布局算法

> ID：11033783
> 
> 赞同：2
> 
> 时间：2012-06-14T13:11:01.367
> 
> 标签：arbor.js

如何添加我自己的布局算法，它可以与 arbor.js 框架的其余部分一起使用？我知道的任何地方都没有回答这个问题。但是我相信这是一个非常重要的功能，需要在那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:44:02.163

Arbor 是一个以渲染力导向图为主要目的构建的框架......如果您需要另一种布局算法，我建议您找到另一个可能更适合您需求的框架。

# asp.net-mvc-3 - ASP.Net MVC 3 Entity Framework 4.1 覆盖 SaveChanges

> ID：11033787
> 
> 赞同：3
> 
> 时间：2012-06-14T13:11:16.740
> 
> 标签：asp.net-mvc-3, entity-framework-4.1, overriding, edmx, savechanges

我正在使用 Entity Framework 4.1 构建一个 ASP.Net MVC 3 Web 应用程序。我正在使用数据库优先方法。

我还使用了**ADO.NET DbContext Generator**来创建 POCO 类，而不是使用自动生成的实体对象。当您使用**ADO.NET DbContext Generator**时，它将创建两个新项目，一个为每个实体生成 POCO 类的***.tt****文件，以及一个*****.Context.tt**文件，它生成派生的 DbContext 类（用于查询和持久化数据）。**

 **在我的应用程序中，我编写了代码来对特定实体执行审计，此代码在我创建的**覆盖 SaveChanges()方法中执行。**我已将此**覆盖 SaveChanges()**方法放在 Context.cs 类中，如下所示，它运行良好

```
public partial class LocumEntities : DbContext
{
    public LocumEntities()
        : base("name=LocumEntities")
    {
    }

    public override int SaveChanges()
    {
        //Audit Code Executes in Here
        return base.SaveChanges();
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        throw new UnintentionalCodeFirstException();
    }

    public DbSet<Audit> Audits { get; set; }
    public DbSet<Form> Forms { get; set; }
    //Other DbSets
} 
```

但是，只要我什至在**EDMX Diagram**中移动或更新实体，然后保存，我在 Context.cs 类中的自定义**SaveChanges()**方法就会被删除。有什么办法可以阻止这种情况发生，或者我应该把我的**SaveChanges()**方法放在别处？

有人可以建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T13:16:27.183

Context.cs 不是一个类，它是一个文件，里面有一个（或零个或多个）类。

只需添加一个新的 cs 文件，例如`CustomContext.cs`，

并添加

```
public partial class LocumEntities : DbContext {

    public override int SaveChanges()
    {
        //Audit Code Executes in Here
        return base.SaveChanges();
    }

    //other custom code (not generated by T4)
} 
```

由于它是部分的，如果需要，您可以在许多 .cs 文件中包含 LocumEntities 类的一部分，它们将被视为一个类。只要确保它们在同一个命名空间中。

永远不要在生成的文件中编写自己的代码...

生成的类通常是部分的，只是为了启用这种方式来处理自定义代码。**

# select - Chosen (by Harvest) ：是否可以在多选列表中允许不在列表中的元素？

> ID：11033789
> 
> 赞同：3
> 
> 时间：2012-06-14T13:11:26.333
> 
> 标签：select, multiple-select, jquery-chosen

我正在使用 Patrick Filler 开发的出色的 Chosen 插件。

但是我不允许用户在多选列表中添加不在列表中的元素。我收到消息“没有结果匹配“XXXX””。

如果不清楚：例如，如果我的列表中有元素 1、2 和 3 并且用户类型为 4，我让他使用 for，即使它不在列表中。我使用它是为了不强迫他在用户想要发送电子邮件时注册用户的电子邮件。他可以搜索已注册列表中的电子邮件，将电子邮件添加到列表中，或者直接在输入中写入电子邮件而不将其注册到列表中。

我可以使用 jquery ui 自动完成插件来做到这一点。由于我不想使用这两者，只是为了保持连贯性，有没有办法使用 Chosen 插件（无需繁重的工作）来实现我想要的东西？

谢谢巴斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T09:09:13.647

**在Github**上查看这个项目，让我知道它是否有帮助

**[阿贾克斯入选](https://github.com/meltingice/ajax-chosen)**

为了将项目添加到您的绑定列表，只需结合**Chosen**和**[KnockoutJs](http://knockoutjs.com/)**。当你的数据模型状态改变时使用**KncokoutJs**，你的 UI 会自动更新。

查看本教程以了解简单的**操作方法**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T14:23:50.113

有几个分支`Chosen`允许将选项添加到列表中。我使用维护良好的 [koenpunt fork](https://github.com/harvesthq/chosen/pull/166)。您将在该问题中找到指向其他实现的链接。

# linux - 如何在 Ubuntu 12.04 上安装 SimpleLESS？

> ID：11033790
> 
> 赞同：0
> 
> 时间：2012-06-14T13:11:28.313
> 
> 标签：linux, ubuntu, installation, less, ubuntu-12.04

我已经从其网站下载了适用于 Linux 的 Simpless。如何在 Ubuntu 12.04 上安装它？我无法在下载的文件夹中打开安装程序文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:26:25.083

您无需安装 Simpless 即可在 Ubuntu 12.04 上运行它。

下载 SimpLESS for Linux，解压并在控制台中启动 SimpLESS。如果您收到 SimpLESS 找不到 libnotify.so.1 的错误，请执行以下操作：

在 32 位上：

```
sudo ln -s /usr/lib/i386-linux-gnu/libnotify.so.4 /usr/lib/libnotify.so.1 
```

在 64 位上：

```
sudo ln -s /usr/lib/x86_64-linux-gnu/libnotify.so.4 /usr/lib/libnotify.so.1 
```

再次启动 SimpLESS，现在它应该运行了。

**编辑：** 如果您在拖放时遇到问题，请进入第 155 和 156 行的 app.js 并将“e.files”更改为“e.dataTransfer.files”。（[感谢帕拉特恩](https://github.com/Paratron/SimpLESS/issues/31)）

或者，您可以安装 less 以通过终端解析文件：

```
sudo apt-add-repository ppa:chris-lea/node.js
sudo apt-get update
sudo apt-get install nodejs npm
sudo npm install less -g 
```

现在您可以使用以下命令解析文件：

```
lessc source [destination] 
```

# netty - 有人可以解释一下 ProtobufVarint32FrameDecoder 代码吗

> ID：11033791
> 
> 赞同：0
> 
> 时间：2012-06-14T13:11:30.687
> 
> 标签：netty

我正在尝试编写自己的 Protobuf 帧解码器，并以此为基础：

[https://github.com/netty/netty/blob/master/codec/src/main/java/io/netty/handler/codec/protobuf/ProtobufVarint32FrameDecoder.java](https://github.com/netty/netty/blob/master/codec/src/main/java/io/netty/handler/codec/protobuf/ProtobufVarint32FrameDecoder.java)

我只是想知道为什么它会创建`new byte[5];`

它不只需要读取第一个字节即可获得长度。为什么需要for循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T01:44:04.007

因为长度表示为可变长度字段，如此[处](https://developers.google.com/protocol-buffers/docs/encoding#varints)所述。

# iphone - 未找到 SDWebImage/UIImageView+WebCache.h 文件

> ID：11033793
> 
> 赞同：10
> 
> 时间：2012-06-14T13:11:32.310
> 
> 标签：iphone, objective-c, ios, sdwebimage

我正在尝试在我的 iPhone 应用程序中使用 SDWebImage。我按照分步教程将 SDWebImage 安装到我的 Xcode 项目中。

当我尝试构建我的应用程序时，出现以下错误：

```
Lexical or Preprocessor Issue
'SDWebImage/UIImageView+WebCache.h' file not found 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-22T21:03:16.757

SDWebImage 的更干净的“安装”如下：

1.  将 SDWebImage 文件夹从 Finder 拖到 Xcode 的项目中
2.  在您希望使用它的任何 .m 文件上添加： `#import "UIImageView+WebCache.h"`

    （以及所需的任何其他 SD 组件）

    而不是你可能做了什么： `#import <SDWebImage/UIImageView+WebCache.h>`

这不需要任何项目标题操作，并且可以按原样工作。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-07-02T12:22:20.170

可能会发生以下情况：

解压这个框架，目录名可能如下：“SDWebImage-3.3.framework”

如果以这种方式导入工程，编译时会报错“framework SDWebImage not found”。

您需要重命名，删除“-3.3”。将是：“SDWebImage.framework”

强制从 Xcode 重命名，会导致意外关闭 IDE 的错误。从 Finder 重命名并再次添加框架。

我希望它有用...

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-10-25T16:12:49.480

我不希望我最大的敌人因为解决这个问题而不得不经历挫折，因为这些解决方案在我的特定情况下都没有帮助。如果您的项目较早编译，您回到它并且此错误突然出现，您可能已将其移动到某个新目录 - 所以转到框架搜索路径下的构建设置 > 搜索路径 > 删除过时的路径，创建一个新的并将其设置为“$（SRCROOT）”（不带引号）并将默认的“非递归”更改为“递归”。我希望这能减轻我所忍受的痛苦。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-20T20:26:47.163

@Lizard 的回答拯救了我的一天！

> $(SRCROOT)/SDWebImage 到标题搜索路径

更具体地说，您必须在目标中而不是在项目视图中添加该配置。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-09-09T03:35:39.843

我有 .xcodeproj 和 .xcworkspace 文件并使用 .xcodeproj 启动代码并收到此错误，但使用 .xcworkspace 它工作正常

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-12-07T04:38:39.030

使用`#import <SDWebImage/UIImageView+WebCache.h>`为我解决了这个问题，因为我使用 Cocoapods 作为框架（use_frameworks！）。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-14T13:21:07.977

检查您是否已正确链接文件及其是否在您的捆绑包中。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-06-04T15:11:09.993

利用

```
#import "UIImageView+WebCache.h" 
```

代替

```
#import <SDWebImage/UIImageView+WebCache.h> 
```

会解决的。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-02-21T05:52:56.047

我也遇到了这个问题。我的解决方案是添加 SDWebImage.framework，而不是在我的项目中添加所有文件。这是检查列表，以确保按照 auther [here](https://github.com/rs/SDWebImage)的建议设置所有内容。

**下载并添加框架**

第 1 步：在此处下载并解压缩最新版本： [https ://github.com/rs/SDWebImage/wiki/Download-Complied-Framework](https://github.com/rs/SDWebImage/wiki/Download-Complied-Framework)

第 2 步：右键单击项目导航器并选择“将文件添加到“您的项目”：在对话框中，选择 SDWebImage.framework，然后选中“将项目复制到目标组的文件夹（如果需要）”复选框

**添加依赖项**

在您的应用程序项目应用程序的目标设置中，找到“Build Phases”部分并打开“Link Binary With Libraries”块：再次单击“+”按钮并选择“ImageIO.framework”

**添加链接器标志**

打开“Build Settings”选项卡，在“Linking”部分，找到“Other Linker Flags”设置并添加“-ObjC”标志：

**在源文件中导入标头**

```
#import <SDWebImage/UIImageView+WebCache.h> 
```

它现在应该构建没有任何问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-02-15T09:45:43.097

当我在保持 XCode 打开的同时移除一些旧的未使用的 Pod 时出现此错误。我已经看到并读到，在执行任何 pod 操作时，您必须保持 XCode 关闭。完成 pod 操作后，您应该重新打开 xcworkspace 文件并构建。

是否同样关闭了 XCode，但我也删除了派生数据的内容，只是为了从新页面开始。有效 ！

# mysql - 在数据库中插入相似的行

> ID：11033798
> 
> 赞同：0
> 
> 时间：2012-06-14T13:11:48.340
> 
> 标签：mysql

我有一个具有下一个结构的表：

```
+---------+----------+------+
| 用户 ID | group_id | 关闭 |
+---------+----------+------+
| 1 | 3 | 1 |
+---------+----------+------+

```

这里有很多用户和很多组。目前最大组为 18。如何为表`group_id=19`中`onoff=1`的所有用户插入？（我的意思是插入一个查询）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T13:14:55.990

只需使用 subselect 子句插入您的值（[MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/insert-select.html)）。

```
INSERT INTO yourTable
  ( SELECT DISTINCT user_id, 19, 1 FROM yourTable ) 
```

示例可以在这个[sqlfiddle](http://sqlfiddle.com/#!2/4f408/1/0)中看到。

# java - 如何在没有 HTML 的情况下获得多行 JLabel（或看起来完全相同的 JTextArea）

> ID：11033800
> 
> 赞同：5
> 
> 时间：2012-06-14T13:11:52.400
> 
> 标签：java, swing, jlabel, jtextarea, multiline

我不敢相信多行 JLabel 的最快解决方案是以下一个（文本来自 var，所以我不想每个 x 字符手动放置 HTML 代码，它太丑了）：

```
public class JMultilineLabel extends JTextArea{
    private static final long serialVersionUID = 1L;
    public JMultilineLabel(String text){
        super(text);
        setEditable(false);  
        setCursor(null);  
        setOpaque(false);  
        setFocusable(false);  
        setFont(UIManager.getFont("Label.font"));      
        setWrapStyleWord(true);  
        setLineWrap(true);
    }
} 
```

...确定这不是更好的处理方法吗？？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T13:48:50.917

> 我需要自动换行，而不必解析传入的字符串并放置一个`<BR>`每个 x 字符

设置正文宽度（HTML）。Swing HTML 支持包括基本样式。

我有一些使用 CSS 来限制`JLabel`某处 SO 的宽度的示例。

* * *

啊，是的，[就是这样](https://stackoverflow.com/questions/7861724/is-there-some-word-wrap-property-of-jlabel-exist/7861833#7861833)：

```
import javax.swing.*;

class FixedWidthLabel {

    public static void main(String[] srgs) {
        String s = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean eu nulla urna. Donec sit amet risus nisl, a porta enim. Quisque luctus, ligula eu scelerisque gravida, tellus quam vestibulum urna, ut aliquet sapien purus sed erat. Pellentesque consequat vehicula magna, eu aliquam magna interdum porttitor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Sed sollicitudin sapien non leo tempus lobortis. Morbi semper auctor ipsum, a semper quam elementum a. Aliquam eget sem metus.";
        String html1 = "<html><body style='width: ";
        String html2 = "px'>";

        JOptionPane.showMessageDialog(null, new JLabel(html1+"200"+html2+s));
        JOptionPane.showMessageDialog(null, new JLabel(html1+"300"+html2+s));
    }
} 
```

![](../Images/5f0576146f15010e07fcec211f9e7510.png) ![](../Images/aa44d2619b9309a7ddae9f869fd00e5c.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T13:28:16.647

如果您想要一个多行标签，那么您只需`HTML`在其文本中使用，因为它们支持它的使用。因此，使用换行标记来换行或在段落标记`</br>`中放置单独的行。`<p></p>`

`JLabel`不要忘记通过使用标签开始其文本来标记您要使用 HTML `<html>`。

[更多可用在这里。](http://www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-JLabel.html)

**顺便说一句**，我忘了检查是否还有其他有关`JLabel`使用的问题，并且至少有一些，请检查[this](https://stackoverflow.com/q/1090098/613495)或[this](https://stackoverflow.com/q/1842223/613495)。:)

* * *

**编辑：**

对于工作示例，显示不同的方法，不设置样式并使用段落和标签占用可用空间，请参见下文：

```
import java.awt.BorderLayout;
import java.awt.Color;
import javax.swing.*;

public class LabelHTMLAutoResize {
    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame f = new JFrame();
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                JPanel p = new JPanel(new BorderLayout());
                JLabel l = new JLabel("<html><p> Some verrrry long text  Some verrrry long  Some verrrry long text dsa ads oiosi o</p>");
                l.setVerticalAlignment(SwingConstants.TOP);
                l.setOpaque(true);
                l.setBackground(Color.green);
                p.add(l);
                f.setContentPane(p);
                /* good practice is to use f.pack(); and let the size be automatically calculated but we want to show line wrapping thus frame size is set */
                f.setSize(200, 200);
                f.setVisible(true);
            }
        });
    }
} 
```

# javascript - 我的 HTA 应用程序中的 Javascript 错误 80004005

> ID：11033810
> 
> 赞同：0
> 
> 时间：2012-06-14T13:12:27.753
> 
> 标签：javascript, html, hta

```
function getWindowsUserName()
{
    var WinNetwork = new ActiveXObject("WScript.Network");
    var urlToSite = createCustomURL(WinNetwork.UserName);
    document.getElementById("psyncLink").src = urlToSite;       
    if(requestingPassword())
    {
        alert("password button screen");
    } else {
        alert("direct password required");
    }
}

function requestingPassword()
{       // <-- This is the line that is getting the error
                          // Unspecified error
                          // Code: 80004005
                          // Microsoft JScript Runtime error
    var btn = window.frames[1].document.getElementsByName("SUBMIT-password.pss");
    if (btn.length == 0) {
        return false;
    } else {
        return true;
    }
} 
```

我希望 requestingPassword 是一个 bool 方法，但后来我了解到 Javascript 不支持方法名称，例如

```
public bool nameofmethod() 
```

我认为语法是正确的。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:24:16.830

`requestingPassword()`在设置框架的 URL 后**立即**调用。`frames[1].document.....`调用该方法时页面没有完成加载的可能性很大。在这种情况下，`frames[1].document`is`null`会导致抛出错误。

要解决此问题，只需在事件中调用该`requestingPassword`函数。`onload`

```
var frame = document.getElementById("psyncLink");
frame.onload = function() {
    frame.onload = null;
    if (requestingPassword()) {
        alert("password button screen");
    } else {
        alert("direct password required");
    }
};
frame.src = urlToSite; 
```

*   注1：不是通过`window.frames[1]`（不容易维护）引用框架，而是使用`frame.contentWindow`（支持非常好，并且不依赖于框架位置的知识）
*   注意2：设置`onload`为属性不会绑定IE6-中的事件。如果必须支持 IE6，请使用`.attachEvent("onload", func..);`.

# java - 如何在 Android 中创建像 Real Calc 这样的科学计算器？

> ID：11033815
> 
> 赞同：0
> 
> 时间：2012-06-14T13:12:46.940
> 
> 标签：java, android, calculator

我是 Android 开发的新手。我对创建科学计算器没有任何想法。但我想创建它。所以请有人告诉我解决方案...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T13:15:35.223

看起来有一个可用的开源科学计算器示例。一探究竟。

[科学计算器](http://code.google.com/p/scientific-calculator-for-android/source/browse/#svn/trunk/src/com/google/calculator)

还有一个在 GitHub，[android--Scientific-Graphing-Calculator](https://github.com/sampullman/android--Scientific-Graphing-Calculator)

# apache-karaf - 如何在 karaf / jline 中使用条件运算符 shell:if

> ID：11033816
> 
> 赞同：1
> 
> 时间：2012-06-14T13:12:50.890
> 
> 标签：apache-karaf, jline

我正在尝试使用使用 jline 库的 apache karaf 命令行有条件地执行命令。

我在 shell:if 命令上找不到任何文档。

例如，在 linux shell 中这是有效的：

```
if [ "foo" = "foo" ]; then echo "good"; fi 
```

当我将 karaf 的语法更改为：

```
if [ "foo" = "foo" ] echo "good" 
```

我得到错误：

```
Error executing command shell:if: unable to convert argument condition with value '{foo=foo}' to type org.apache.felix.service.command.Function 
```

我尝试了一堆不同的语法，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T15:25:17.370

条件语法的工作方式如下：

```
>if {true} {echo yes} {echo no}
yes
> if {false} {echo yes} {echo no}
no 
```

此命令对每个部分使用闭包。例如，这允许您将 if 放在 each 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-17T14:43:52.960

我已经解决了这样的字符串比较问题：

```
if { $ENVIRONMENT equals "local" } {
    echo "*** Altering configuration for local deployment using mocks ***"
} {
    echo "*** Skipping ***"
} 
```

像魅力一样工作，但我必须同意该领域缺乏文档。（现在是 2014 年）

# matlab - matlab编码器+工具箱+拉普拉斯变换

> ID：11033819
> 
> 赞同：0
> 
> 时间：2012-06-14T13:13:02.980
> 
> 标签：matlab

我目前正在研究 matlab，尤其是 matlab 编码器。

我的理解是，matlab 编码器可以“仅”使用 matlab 语言特性的一个子集（控制结构、函数、矩阵运算）。

我是否正确地假设我不能从涉及某些工具箱（例如神经网络）的 matlab 代码生成 C 代码或更复杂的东西，例如拉普拉斯变换和/或使用/实现复杂的数值方法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:22:29.317

不幸的是，您对 matlab 编码器的局限性是正确的，这是我在为 C 构建控制算法时必须处理的问题

我知道目前不支持神经网络。至于其他数值方法，这取决于您要查找的内容。

查看： http: [//www.mathworks.com/help/toolbox/eml/ug/bq1h2z8-12.html](http://www.mathworks.com/help/toolbox/eml/ug/bq1h2z8-12.html)了解更多信息。

编辑：我不确定你为什么要做拉普拉斯变换，但它可以做一个 fft，对于大多数应用程序来说已经足够接近

# python - 如何调用方法？

> ID：11033820
> 
> 赞同：0
> 
> 时间：2012-06-14T13:13:03.877
> 
> 标签：python, user-interface, methods

我不确定如何制作一个通用实用程序文件并使用其中的方法。

这是一个在屏幕上居中显示窗口的示例实用程序文件：

```
class center():
    fg = self.frameGeometry()
    cs = QtGui.QDesktopWidget().availableGeometry().center()
    fg.moveCenter(cs)
    self.move(fg.topLeft()) 
```

这是一个示例用户界面：

```
import os, sys
import puppetUtils
from PyQt4 import QtCore, QtGui

class puppetUI(QtGui.QMainWindow):
    def __init__(self):
        QtGui.QMainWindow.__init__(self)

        self.setWindowTitle('Puppet')
        self.setObjectName('PuppetMainWindow')
        self.resize(1280, 720)

        puppetUtils.center(self)

        self.show()

app = QtGui.QApplication(sys.argv)
window = puppetUI()
sys.exit(app.exec_()) 
```

调用 puppetUtils.center 的正确方法是什么？我用谷歌搜索，尝试了很多方法，但它只是不起作用。这是一个例子——我用来拥有我的应用程序功能的众多示例之一，而无需在各种类等中复制/粘贴功能。

我需要实现的其他代码：

```
def mouseMoveEvent(self, event):
    #create the mouse 'Grab & Move'
    if self.moving: self.move(event.globalPos()-self.offset)

def mousePressEvent(self, event):
    if event.button() == QtCore.Qt.LeftButton:
        self.moving = True; self.offset = event.pos()

def mouseReleaseEvent(self, event):
    if event.button() == QtCore.Qt.LeftButton:
        self.moving = False 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:15:54.560

首先，从

```
class center(): 
```

至

```
def center(var): 
```

因为您实际上是在尝试定义一个实用函数，所以它应该是 a`def`而不是`class`.

然后在`center`函数内部，更改`self`为`var`（或任何您想要命名函数参数的名称）

# sql-server - 如何在 MS CRM 4.0 中加入营销活动和营销活动响应

> ID：11033821
> 
> 赞同：0
> 
> 时间：2012-06-14T13:13:07.723
> 
> 标签：sql-server, dynamics-crm-4

我尝试在 SQL 中加入 Campaign 和活动响应。我们正在将数据迁移到新的 CRM 以及我们可以获得的所有数据。关于女巫运动的唯一信息是女巫反应。

就像是

camapaing.id = id.x x.id =campaignresponse.id

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T01:56:40.777

CampaignResponse 是一种活动类型，与 Campaign 的关联是通过 ActivityPointer.RegardingObjectId*将*您指向活动的。

```
select cr.ActivityId, c.CampaignId from CampaignResponse cr 
inner join ActivityPointer ap on cr.ActivityId = ap.ActivityId
inner join Campaign c on c.CampaignId = ap.RegardingObjectId 
```

# gwt - GWT Grid 显示 2 行作为边界线，我如何用 1 行替换它

> ID：11033822
> 
> 赞同：0
> 
> 时间：2012-06-14T13:13:10.170
> 
> 标签：gwt

我正在 GWT 中创建一个简单的 DataGrid 它看起来很好并显示数据，但是行之间的线或边框线是双的，我们可以将它更改为单线边框宽度默认为 1，当我尝试将边框宽度设置为0，边界线完全消失，当我把它设为1时，它显示双边界线，没有办法让边界线变成单线吗？

附件是显示双边框的数据网格图像，请告诉我一种使其成为单边框的方法。![在此处输入图像描述](../Images/d4fdaa951f424b4b2e22a2a43b69ec72.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:36:35.973

您正在显示两条线，因为每个单元格和网格周围都有边框。

您应该[在此处](https://stackoverflow.com/q/7394151/405492)查看有关如何覆盖 GWT 中数据网格的默认 css 的说明。

[这](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/user/cellview/client/DataGrid.css)是您应该覆盖的 DataGrid 的默认 CSS。为避免出现双边框，您应该只在单元格上设置、`border-right`或属性。`border-left``border-top``border-bottom`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:40:00.687

```
<g:Grid borderWidth="1" cellSpacing="0"> 
```

应该这样做。要调整特定的边框 css：

```
grid.setStyleName("yourSpecialBorderStyleName"); 
```

使用 CSS 例如：

```
.yourSpecialBorderStyleName
{
    border-style:solid;
    border-color:#CCCCCC;
} 
```

# asp.net - 使用 AJAX 时 ASP.NET MVC 用户身份验证失败

> ID：11033824
> 
> 赞同：1
> 
> 时间：2012-06-14T13:13:15.460
> 
> 标签：asp.net, asp.net-mvc-3, authentication, jquery

我正在编写一个 ASP.NET MVC3 Web 应用程序，当我使用 Ajax 调用操作方法时，用户身份验证失败（用户未通过身份验证）。我的电话看起来像这样：

```
$(function () {
                $("#picture").makeAsyncUploader({
                    upload_url: '@Url.Action("AsyncUpload", "Profile")',
                    flash_url: '/Scripts/swfupload.swf',
                    button_image_url: '/Scripts/blankButton.png'
                });
            }); 
```

其中 makeAsyncUploader 是处理所有 AJAX 内容的单独 js 文件中的一个函数。我已经尝试调试该应用程序，看起来没有任何 cookie 随请求一起发送给我。有谁知道是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T19:49:57.093

我知道这是一个很老的问题，但我今天遇到了完全相同的问题，所以我会回答它。

Firefox 的 Flash plg 中有一个错误。上传文件时不发送cookie。我的解决方案：

1) 创建新的授权属性

```
 [AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, Inherited = true, AllowMultiple = true)]
    public class FlashAuthorizeAttribute : AuthorizeAttribute
    {
        private const string AUTH_TOKEN = "AuthenticationToken4Flash";
        protected override bool AuthorizeCore(System.Web.HttpContextBase httpContext)
        {
            string authToken = httpContext.Request.Params[AUTH_TOKEN];
            if (authToken != null)
            {
                FormsAuthenticationTicket authForm = FormsAuthentication.Decrypt(authToken);
                if (authForm != null)
                {
                    FormsIdentity formIdentity = new FormsIdentity(authForm);
                    string[] userRoles = System.Web.Security.Roles.GetRolesForUser(formIdentity.Name);
                    GenericPrincipal userPrincipal = new GenericPrincipal(formIdentity, userRoles);
                    httpContext.User = userPrincipal;
                }
            }
            return base.AuthorizeCore(httpContext);
        }
    } 
```

2) 控制器

```
 [FlashAuthorize]
    public ActionResult AsyncUpload()
    {
        HttpPostedFileBase file = Request.Files[0];
    } 
```

3）修改你的js（formData，scriptData对我不起作用，所以我添加了一个查询字符串）

```
 upload_url: '@Url.Action("AsyncUpload", "Profile")' +'?AuthenticationToken4Flash=' + '@(Request.Cookies[FormsAuthentication.FormsCookieName]==null ? string.Empty : Request.Cookies[FormsAuthentication.FormsCookieName].Value)', 
```

我希望它会帮助某人

# python - 在 Python 中退出函数的正确方法

> ID：11033825
> 
> 赞同：0
> 
> 时间：2012-06-14T13:13:25.983
> 
> 标签：python, function, quit

假设我有以下内容；

```
def test():
    while 1:
        a = b
        time.sleep(60)
        c = b
        if(c==a):
            do something
            then quit the function 
```

退出具有这种结构的函数的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T13:14:12.613

你可以只使用一个`return`语句。

这将是最直接的方法，只需将 放置`return`在您想要退出的位置（“然后退出函数”）。

```
 if(c==a):
     do something
     return 
```

您还可以使用它来将您拥有的任何结果返回给调用代码。

例如。，`return some_results`

[用于返回的 Python 文档](http://docs.python.org/reference/simple_stmts.html#the-return-statement)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T13:15:12.160

使用`return`语句：例如

```
def test():
    while 1:
        a = b
        time.sleep(60)
        c = b
        if c == a:
            print a
            return 
```

`break``while`通过离开循环也可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T13:15:13.097

只需使用该`return`语句退出函数调用。

```
def blah():
    return  # Returns None if nothing passed back with it
def blah():
    return some_value, some_value2 # Return some values with it if you want. 
```

# ios - 如何停止音频队列？

> ID：11033829
> 
> 赞同：0
> 
> 时间：2012-06-14T13:13:35.577
> 
> 标签：ios, core-audio, audiotoolbox, audioqueue

我正在使用文本到语音，开始音频工作正常，但我无法停止它。这是我如何开始音频：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, (unsigned long)NULL), ^(void) {
        [[self view] setNeedsDisplay];
        [self synthesizeInBackground];
        [queue waitUntilAllOperationsAreFinished];
        [self setIsSpeaking: false];
        [[self view] setNeedsDisplay];

    }); 
```

在后台合成

```
 - (void) synthesizeInBackground {
XLog(@"-----------------------------------entered");

queue = [[NSOperationQueue alloc] init];
XLog(@"queue: %@", queue);

operation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(synthesize) object:nil];
XLog(@"operation: %@", operation);

[queue addOperation: operation];

} 
```

合成

```
- (void)synthesize {
XLog(@"-----------------------------------entered");

NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

callback_userdata userdata;

NSError *error = nil;

self.paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
self.documentsDirectory = [self.paths objectAtIndex:0];
self.path = [self.documentsDirectory stringByAppendingPathComponent:@"readSearchresults.txt"];
IvonaStreamer *streamer = [[IvonaStreamer alloc] initWithVoice:voice withText:[NSString stringWithContentsOfFile:self.path encoding:NSUTF8StringEncoding error:&error] atSpeed:[NSNumber numberWithFloat:-1]];
//IvonaStreamer *streamer = [[IvonaStreamer alloc] initWithVoice:voice withText:@"Dies ist ein Testtext." atSpeed:[NSNumber numberWithFloat:-1]];

if (streamer == nil) {
    XLog(@"Cannot start streamer");
    [self setTtsError: @"Cannot start streamer"];
    return;
}

userdata.speak = &(self->isSpeaking);
userdata.streamer = streamer;

#define NUM_BUFFERS 3
#define BUFFER_SIZE 22050
OSStatus err;

AudioQueueRef audioQueue;
//XLog(@"audioQueue: %d", audioQueue);
XLog(@"[voice getSampleRate]: %i", [voice getSampleRate]);

AudioStreamBasicDescription deviceFormat;
deviceFormat.mSampleRate = [voice getSampleRate];
deviceFormat.mFormatID = kAudioFormatLinearPCM;
deviceFormat.mFormatFlags = kLinearPCMFormatFlagIsSignedInteger;
deviceFormat.mBytesPerPacket = 2;
deviceFormat.mFramesPerPacket = 1;
deviceFormat.mBytesPerFrame = 2;
deviceFormat.mChannelsPerFrame = 1;
deviceFormat.mBitsPerChannel = 16;
deviceFormat.mReserved = 0;

XLog(@"deviceFormat.mSampleRate: %f", deviceFormat.mSampleRate);
/*
 XLog(@"deviceFormat.mSampleRate: %f", deviceFormat.mSampleRate);
 XLog(@"deviceFormat.mFormatID: %lu", deviceFormat.mFormatID);
 XLog(@"deviceFormat.mFormatFlags: %lu", deviceFormat.mFormatFlags);
 XLog(@"deviceFormat.mBytesPerPacket %lu", deviceFormat.mBytesPerPacket);
 XLog(@"deviceFormat.mFramesPerPacket %lu", deviceFormat.mFramesPerPacket);
 XLog(@"deviceFormat.mBytesPerFrame %lu", deviceFormat.mBytesPerFrame);
 XLog(@"deviceFormat.mChannelsPerFrame %lu", deviceFormat.mChannelsPerFrame);
 XLog(@"deviceFormat.mBitsPerChannel %lu", deviceFormat.mBitsPerChannel);
 XLog(@"deviceFormat.mReserved %lu", deviceFormat.mReserved);
 */

err = AudioQueueNewOutput(&deviceFormat,
                          AudioQueueCallback,
                          &userdata,
                          CFRunLoopGetCurrent(),
                          kCFRunLoopCommonModes,
                          0,
                          &audioQueue);
if (err != noErr) {
    XLog(@"Cannot create audio output");
    [self setTtsError: @"Cannot create audio output"];
    [streamer stop];
    return;
}

AudioQueueAddPropertyListener(audioQueue, kAudioQueueProperty_IsRunning,
                              AudioQueuePropertyListener, NULL);

for (int i = 0; i < NUM_BUFFERS; i++) {
    AudioQueueBufferRef buffer;

    err = AudioQueueAllocateBuffer(audioQueue, BUFFER_SIZE, &buffer);
    if (err != noErr) {
        XLog(@"Cannot allocate audio buffer");
        [self setTtsError: @"Cannot allocate audio buffer"];
        [streamer stop];
        return;
    }

    AudioQueueCallback(&userdata, audioQueue, buffer);
}

err = AudioQueueStart(audioQueue, NULL);
if (err != noErr) {
    XLog(@"Cannot start audio");
    [self setTtsError: @"Cannot start audio"];
    [streamer stop];
    return;
}

CFRunLoopRun();

[streamer stop];
[pool release];
} 
```

音频队列回调

```
 void AudioQueueCallback(void *userData, AudioQueueRef audioQueue,
                    AudioQueueBufferRef buffer)
{
//XLog(@"-----------------------------------entered");

void *data = buffer->mAudioData;

UInt32 num_bytes = buffer->mAudioDataBytesCapacity;
//XLog(@"num_bytes: %lu", num_bytes);

UInt32 to_write = num_bytes / sizeof(short);
//XLog(@"to_write: %lu", to_write);

NSInteger num_samples;
//XLog(@"num_samples: %i", num_samples);

IvonaStreamer *streamer = ((callback_userdata*) userData)->streamer;
bool *enabled = ((callback_userdata*) userData)->speak;

//XLog(@"streamer.getWarnings: %@", streamer.getWarnings);

if(!*enabled) {
    XLog(@"!*enabled");
    AudioQueueStop(audioQueue, false);        
}

num_samples = [streamer synthSamples:to_write toCArray:data];
//XLog(@"num_samples: %i", num_samples);

if (num_samples > 0) {
    //XLog(@"num_samples > 0");
    buffer->mAudioDataByteSize = num_samples * sizeof(short);

    AudioQueueEnqueueBuffer(audioQueue, buffer, 0, NULL);

} else {
    //XLog(@"! (num_samples > 0)");
    AudioQueueStop(audioQueue, false);
    }
} 
```

AudioQueuePropertyListener

```
void AudioQueuePropertyListener(void *userData, AudioQueueRef audioQueue,
                            AudioQueuePropertyID id)
{  

    XLog(@"-----------------------------------entered");

UInt32 isRunning, size = sizeof(isRunning);
AudioQueueGetProperty(audioQueue, kAudioQueueProperty_IsRunning, &isRunning, &size);
if (isRunning == 0) {
    XLog(@"isRunning == 0");
    CFRunLoopStop(CFRunLoopGetCurrent());
}

if (isRunning != 0) {
    XLog(@"nicht null#######");

}

} 
```

我尝试停止其他方法（UIAlertView 委托方法）：

```
 if (alertView.tag == 997) {
    if (buttonIndex == 0) {
        XLog(@"vorlesen abbrechen geklickt.");
        [queue cancelAllOperations];
        AudioQueueRef audioQueue;
        //AudioQueueDispose(audioQueue, false);
         AudioQueueStop(audioQueue, false);
    } 
```

我正在取消所有操作并调用 AudioQueueDispose，也尝试使用 AudioQueueStop，但这里没有任何效果。

所以我的问题是，**我怎样才能在这里停止音频？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T09:00:19.120

AudioQueueStop 应该可以工作并且足够了。从 Apples 文档中，AudioQueueReset 是从 AudioQueueStop 调用的。AudioQueueDispose 如果您想稍后再启动它，那就有点过分了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T19:12:08.977

我相信您需要在调用 AudioQueueStop 之前调用 AudioQueueReset。

```
AudioQueueReset (audioQueue);
AudioQueueStop (audioQueue, YES);
AudioQueueDispose (audioQueue, YES); 
```

# php - php jquery联系表单不使用mail（）

> ID：11033831
> 
> 赞同：0
> 
> 时间：2012-06-14T13:13:45.190
> 
> 标签：php, contact-form

我一直在尝试按照教程制作联系表格 - [http://www.tutoww.com/htmlcss/create-a-simple-and-secure-contact-form-with-jquery-and-php/](http://www.tutwow.com/htmlcss/create-a-simple-and-secure-contact-form-with-jquery-and-php/)

唯一的问题是它使用了我的主机出于“安全原因”禁用的 mail() 。我试图在没有使用 smtp 的花哨验证的情况下制作自己的联系表格，效果很好，有没有简单的方法可以轻松地将本教程示例与 smtp 一起使用？

我对php一无所知，但我认为我需要从教程中更改它：

```
mail($to, $subject, $message, $headers); 
```

类似于：

```
$smtp = Mail::factory('smtp', 
        array ('host' => $host,
        'auth' => true,
        'username' => $username,
        'password' => $password));

 $mail = $smtp->send($to, $headers, $body); 
```

我什至接近吗？任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:23:50.643

如果要确保脚本完全运行，大多数 PHP 开发人员都会使用[PHPMailer 。](http://phpmailer.worxware.com/)
试试看 ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:39:58.863

您可以使用 Zend_Mail_* 类。您可以非常轻松地配置您的 SMTP。

设置 SMTP [http://framework.zend.com/manual/en/zend.mail.sending.html](http://framework.zend.com/manual/en/zend.mail.sending.html)

Zend_Mail 类的文档[http://framework.zend.com/manual/en/zend.mail.html](http://framework.zend.com/manual/en/zend.mail.html)

替代方案是 SwitfMailer [http://swiftmailer.org/](http://swiftmailer.org/)

# java - 如何在 JTable 中使用 glazedlist 的 UndoRedoSupport 或 undoSupport？

> ID：11033833
> 
> 赞同：1
> 
> 时间：2012-06-14T13:13:47.170
> 
> 标签：java, swing, undo-redo, glazedlists

我用 GlazedList eventList 创建了一个 JTable。我搜索了 API，但不知道如何向该表添加撤消/重做可能性。我在 API 中发现了以下类：

`UndoRedoSupport undoRedoSupport = new UndoRedoSupport<"what here?">("argument?"); UndoSupport undoSupport = new UndoSupport<"what to write here?">("argument?");`

**有没有人知道如何使用它？**

```
private void createComponents() {
    EventList<Dien> eventList = new BasicEventList<Dien>();
    actionList  = GenericsUtil.makeList();
    table  = new WebTable();
    searchField = new WebTextField(60);
    String[] headers = new String[]{"Code", "Name", "Number"};
    String[] properties = new String[]{"Code", "Name", "Number"};
    TextFilterator<Dien> dienFilterator = new TextFilterator<Dien>() {
        public void getFilterStrings(List baseList, Dien dien) {
            baseList.add(dien.getCode());
            baseList.add(dien.getName());
            baseList.add(dien.getNumber());
        }
    };
    MatcherEditor<Dien> textMatcherEditor = new TextComponentMatcherEditor<Dien>(searchField, dienFilterator);
    eventList = toolModel.getDiens();
    FilterList<Dien> filterList = new FilterList<Dien>(eventList, textMatcherEditor);
    TableFormat tableFormat = GlazedLists.tableFormat(properties, headers, new boolean[]{true,true,true});
    model = new EventTableModel<Dien>(filterList, tableFormat);
    model.addTableModelListener(new TableModelListener() {
        public void tableChanged(TableModelEvent e) {
            if(e.getType()==TableModelEvent.UPDATE){
                if(!panel.isPendingChanges())
                    panel.setPendingChange(true);
            }
        }
    });
    selectionModel = new EventSelectionModel<Dien>(filterList);

    table.setSelectionModel(selectionModel);
    table.setModel(model);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-18T14:30:49.620

GlazedLists 内置的 Undo/Redo 类不带有公共构造函数；相反，您通过静态方法*安装*对特定事件列表的支持。`UndoRedoSupport.install()`

当然，如果您使用的是 Swing，那么利用 Swing 的`UndoManager`类是有意义的，而 GlazedLists 为其`UndoSupport`类提供了一个简单的包装器。同样，这只是用它的`install()`方法初始化。

我创建了一个简单的 Swing 示例应用程序作为示例来说明如何使用这些类。在我的示例中，我使用了一个简单`EventList`的字符串和一个 JList。但它同样适用于任何 GlazedList 支持的组件——`UndoRedoSupport`适用于`EventList`自身而不是 Swing 组件。

```
import ca.odell.glazedlists.BasicEventList;
import ca.odell.glazedlists.EventList;
import ca.odell.glazedlists.swing.EventListModel;
import ca.odell.glazedlists.swing.UndoSupport;
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextField;
import javax.swing.undo.UndoManager;

public class GlazedListsUndoSample {

    private JFrame mainFrame;
    private JButton addItemButton;
    private JButton undoButton;
    private JButton redoButton;
    private UndoManager undoManager;

    private EventList<String> eventList = new BasicEventList<String>();

    public GlazedListsUndoSample() {
        //populateAvailableBooks();
        createGui();
        mainFrame.setVisible(true);

    }

    private void updateButtons() {        
        //addBookButton.setEnabled(!books.isEmpty());
        undoButton.setEnabled(undoManager.canUndo());
        redoButton.setEnabled(undoManager.canRedo());
    }

    private void createGui() {
        undoManager = new UndoManager();
        UndoSupport.install(undoManager, eventList);

        mainFrame = new JFrame("GlazedLists Undo Example");
        mainFrame.setSize(600, 400);
        mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        EventListModel model = new EventListModel(eventList);
        JList list = new JList(model);

        JPanel mainPanel = new JPanel(new BorderLayout());
        mainPanel.add(new JScrollPane(list), BorderLayout.CENTER);

        JPanel addBookPanel = new JPanel(new BorderLayout());
        addBookPanel.add(new JLabel("Item"), BorderLayout.WEST);
        final JTextField titleTextField = new JTextField(50);
        addBookPanel.add(titleTextField, BorderLayout.CENTER);

        addItemButton = new JButton("Add Item");
        addItemButton.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                eventList.add(titleTextField.getText());

                updateButtons();
            }
        });
        addBookPanel.add(addItemButton, BorderLayout.EAST);

        JPanel buttonPanel = new JPanel();

        undoButton = new JButton("Undo");
        undoButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                if (undoManager.canUndo()) {
                    undoManager.undo();
                }

                updateButtons();
            }
        });

        redoButton = new JButton("Redo");
        redoButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                if (undoManager.canRedo()) {
                    undoManager.redo();
                }

                updateButtons();
            }
        });

        updateButtons();

        buttonPanel.add(undoButton);
        buttonPanel.add(redoButton);

        mainPanel.add(addBookPanel, BorderLayout.NORTH);
        mainPanel.add(buttonPanel, BorderLayout.SOUTH);

        mainFrame.getContentPane().setLayout(new BorderLayout());
        mainFrame.getContentPane().add(mainPanel, BorderLayout.CENTER);
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
              new GlazedListsUndoSample();
            }
        });
    }
} 
```

值得注意的是，[文档](https://svn.java.net/svn/glazedlists~svn/tags/glazedlists-1_9_0/www/api/index.html)确实强烈暗示了它的功能限制：

> 并非 ListEvent 中描述的每个更改都会导致可撤消的编辑。具体来说，列表元素 IN PLACE 的突变不会产生可撤消的编辑。例如，观察元素变化的 ObservableElementList 或在该索引处使用相同对象调用 List.set(int, E) 会产生没有对应 UndoRedoSupport.Edit 对象的 ListEvent。这些 ListEvent 被忽略，因为它们缺乏足够的信息来撤消或重做更改。
> 
> 一般来说，UndoRedoSupport 仅适用于 BasicEventList 或 BasicEventList 周围的普通包装器，它不会影响元素的顺序或类型，例如 ObservableElementList。高级转换，例如 SortedList 或 FilterList 将无法按预期使用此 UndoRedoSupport 类，因为它们的内容由它们自身之外的信息（比较器和匹配器）控制。

# math - 如何在给定椭圆内找到非比例矩形的大小？

> ID：11033840
> 
> 赞同：0
> 
> 时间：2012-06-14T13:14:05.280
> 
> 标签：math

我了解如何计算可以在椭圆内绘制的最大可能矩形，但我的问题是：我有一个给定比例的矩形和一个给定大小的椭圆（比例不同），我需要知道有多大该矩形将在椭圆内居中并与所有四个角相交。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T13:24:15.473

如果矩形在椭圆内居中，并且所有 4 个角都位于椭圆上，则 4 个角必须是方程组的解：

**[1]**椭圆的隐式方程：x^2/a^2 + y^2/b^2 = 1

**[2]**矩形的比例（纵横比）x/y = c。

只需代入并求解 x 和 y 的方程。`2 * abs(x)`将是矩形的宽度和`2 * abs(y)`高度。

# javascript - 在私人浏览模式下，如何检查用户或浏览器是否允许存储本地共享对象？

> ID：11033841
> 
> 赞同：0
> 
> 时间：2012-06-14T13:14:08.060
> 
> 标签：javascript, actionscript-3, local-storage

我正在 Flex3 中开发一个 flex 组件，它需要在本地磁盘上存储一些数据以供将来使用

```
 var localData:Sharedobject=SharedObject.getLocal("localdata"); 
```

今天我在处理这个问题时，最终我以隐身模式打开了我的 chrome 浏览器，所以数据没有被存储，我无法恢复我之前保存的数据。

所以我想知道有没有办法检查是否允许本地存储；使用 JavaScript。Javascript，因为我想在我的组件加载之前检查它。请建议我一些方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:25:16.460

`SharedObject.getLocal()`创建 SO 失败时会引发错误，因此只需侦听此错误即可。

**编辑**

如果您需要 javascript 解决方案，您可以创建一个简单的 Flash/Flex 文件，该文件将尝试创建一个 SharedObject，然后它可以将结果（true/false）传递给 Javascript（使用`ExternalInterface`）。

然后你可以将结果传递给你的主要组件......

JS 无法访问 flash SharedObjects。

**编辑 2 **

有 HTML5 localStorage，所以你可能想使用那个，但从你的问题我知道你想检查 Flash 本地存储是否有效。

# wpf - Xaml 中不同程序集中的两个命名空间之间的歧义

> ID：11033842
> 
> 赞同：1
> 
> 时间：2012-06-14T13:14:10.230
> 
> 标签：wpf, xaml

我正在重新开发一个 WPF 应用程序，该应用程序使用以下 2 个程序集，因为它使用每个程序集的单独组件：

WPFToolkit 和 PresentationFramework。

在我的 Xaml.cs 中，我曾经`extern alias`使用过命名空间`System.Windows.TemplateVisualState`，这一切都很好，我的问题是在我的 Xaml.xaml 中，我将如何区分`WPFToolkit.System.Windows.TemplateVisualState`和`PresentationFramework.System.Windows.TemplateVisualState`？

下面是我的 Xaml 的顶部：

```
 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
 xmlns:toolkit="http://schemas.microsoft.com/wpf/2008/toolkit"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
 xmlns:local="clr-namespace:CAIS2"
 xmlns:CodeLib="clr-namespace:CodeLib;assembly=CodeLib"
 xmlns:CAISCommon="clr-namespace:CAISCommon;assembly=CAISCommon"  > 
```

这是 Resharper 抱怨的地方：

```
 <VisualStateManager.VisualStateGroups>
     <VisualStateGroup x:Name="LoginStates">
         <Windows:VisualState x:Name="LoggedOut">
             ...... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:36:47.563

看起来你已经为 WPF 工具包设置了一个命名空间，所以你能不能这样做：

```
<toolkit:VisualStateManager.VisualStateGroups>
    <toolkit:VisualStateGroup x:Name="LoginStates">
        <Windows:VisualState x:Name="LoggedOut"> 
```

我不太熟悉使用该`extern alias`方法的后果，所以我不知道这是否会使这一点无效。

# vb.net - Vb.Net 我想在我的函数中修复的东西 - 秒表

> ID：11033853
> 
> 赞同：0
> 
> 时间：2012-06-14T13:14:34.720
> 
> 标签：vb.net, stopwatch

我制作了将时间字符串 ("hh\:mm\:ss\,fff" - 例如："00:00:00,100") 转换为部分
strTime = "00:00:00,100" =
**h** int = 0
**m** int = 0
**sec** int = 0
**毫秒**int = 100

函数：

```
Public Function ShowInLabel(ByVal TEXT As String, ByVal time As String, ByVal startTime As Boolean) As Boolean
        On Error Resume Next
        Dim sss As String
        sss = time
        Dim start As String = StrReverse(sss)
        start = StrReverse(start.Substring(0, 3))
        Dim s As Integer
        s = Integer.Parse(start)
        Dim secstart As String = StrReverse(sss).Substring(0, 6)
        secstart = StrReverse(secstart)
        Dim secs As Integer = Integer.Parse(secstart.Substring(0, 2))
        Dim hurs As Integer = Integer.Parse(sss.Substring(0, 2))
        Dim mins As Integer = Integer.Parse(StrReverse(StrReverse(sss.Substring(0, 5)).Substring(0, 2)))

        Dim stopWatch As New Stopwatch()
        stopWatch.Start()
noh:
        If stopWatch.Elapsed.Hours = hurs Then
            GoTo yesh
        Else
            GoTo noh
        End If
yesh:
        If stopWatch.Elapsed.Minutes = mins Then
            GoTo yesm
        Else
            GoTo yesh
        End If
yesm:
        If stopWatch.Elapsed.Seconds = secs Then
            GoTo yess
        Else
            GoTo yesm
        End If
yess:

        If stopWatch.Elapsed.Milliseconds > s Or stopWatch.Elapsed.Milliseconds = s Then
            GoTo done
        Else
            GoTo yess
        End If
done:
        If startTime = False Then
            Label1.Text = ""
        Else
            Label1.Text = TEXT
        End If

        Return True

    End Function 
```

例子：

```
ShowInLabel("SubTitle", "00:00:00,100", True) 
```

函数 Works ，
但是当运行应用程序的函数被卡住**直到**函数返回 true
为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:38:06.923

您需要做的就是这样的：

```
 Dim time As Date = DateTime.ParseExact("00:01:02,123", "hh:mm:ss,fff", CultureInfo.InvariantCulture)
    Dim h As Integer = time.Hour
    Dim m As Integer = time.Minute
    Dim sec As Integer = time.Second
    Dim millisec As Integer = time.Millisecond 
```

但是，完全熟悉您要完成的工作:)，我怀疑您真正需要的是：

```
 Dim time As Date = DateTime.ParseExact("00:01:02,123", "hh:mm:ss,fff", CultureInfo.InvariantCulture)
    Dim startTime As Date = DateTime.ParseExact("00:00:00,000", "hh:mm:ss,fff", CultureInfo.InvariantCulture)
    Dim elapsed As TimeSpan = time - startTime
    Dim totalMilliseconds As Integer = CType(elapsed.TotalMilliseconds, Integer) 
```

您可以以同样的方式将每个字幕的开始时间和结束时间转换为总毫秒数，然后以这种方式进行比较。

正如其他人指出的那样，On Error Resume Next 仅在 VB.NET 中真正可用，以向后兼容 VB6 代码。您应该改用 Try/Catch 块。但是，即使在 VB6 中，只在整个方法的上方放置一个简历也从来没有被认为是好的做法，就像在整个方法周围放置一个 try/catch 块也被认为是一个坏主意一样。

同样，GoTo 几乎是任何程序员所能做的最糟糕的事情。您应该考虑其他选项，例如循环、if/else 块、将代码分解为单独的方法等，并不惜一切代价避免 GoTo。

# http - 在一个虚拟机上创建从多个源到另一个虚拟机的 http 流量的最简单方法是什么？

> ID：11033856
> 
> 赞同：0
> 
> 时间：2012-06-14T13:14:41.493
> 
> 标签：http, vmware

我正在考虑使用简单的 GET 请求创建自己的 http 客户端来生成流量，但是如何为每个套接字创建多个源 IP？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:16:54.533

创建大量 http 客户端的克隆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T18:18:57.697

如果您的客户端实际上并不位于您告诉目的地的 IP 地址 - 您的客户端[将不会收到来自服务器的响应](https://stackoverflow.com/a/1180938/573083)，这可能会导致您的测试出现问题。

因此，话虽如此 - 您可以快速编写**[CURL](http://en.wikipedia.org/wiki/CURL)****脚本来发出 HTTP 请求**。 [这篇文章](https://stackoverflow.com/a/5189126/573083)展示了如何让 CURL 在 HTTP 标头中设置源 IP 地址。

该解决方案的另一半是**将多个 IP 地址绑定到源计算机上的 NIC**。 [另一篇文章](https://stackoverflow.com/a/1309096/573083)解释了如何在 Windows 上执行此操作，而[这篇](http://www.xenocafe.com/tutorials/linux/redhat/bind_multiple_ip_addresses_to_single_nic/index.php)文章在 Linux 中进行了展示。

如果您准备编写自己的客户端，则可以将套接字绑定更改为您在上面创建的不同地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T15:16:13.270

在 Vsphere 5 中，每个 VM 可以有 10 个网卡。

但如上所述，从网络/路由的角度来看，创建多个克隆客户端可能更容易维护。

# java - 如何使单个应用程序在不同的 JVM 上运行？

> ID：11033868
> 
> 赞同：-2
> 
> 时间：2012-06-14T13:15:02.427
> 
> 标签：java

我想让一个 Java 应用程序同时在多个 JVM 上运行。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:24:23.420

Java VM 通常只是系统上的一个应用程序；例如，`java.exe`在 Windows 上。如果要运行多个 JVM，只需运行多个`java.exe`. 您可以根据需要同时运行任意数量的副本。

# c# - Excel文件的VBA代码中的文本替换

> ID：11033870
> 
> 赞同：6
> 
> 时间：2012-06-14T13:15:10.977
> 
> 标签：c#, .net, excel, vba, office-interop

我们有几十个启用宏的 excel 文件，每个都包含几个 VBA 模块，在每个模块中都有 SQL 服务器名称和 sql 登录的用户名/密码。

我想知道我是否可以编写某种 C# 实用程序来一个一个地加载这些文件，或者使用 .NET-Office Interop。或任何其他方法用其他东西替换这些字符串......只是因为我必须将所有这些 VBA 宏重新指向另一个服务器名称并使用另一个 sql 登录名和密码......我真的不想通过手 ：（ ：（ ：（

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-14T14:14:53.487

开始于

很抱歉花了一些时间来发帖，但我正在为它创建一个 UI，这样它不仅可以帮助您，还可以帮助其他任何寻求相同功能的人。

您需要先启用`Trust Access to the VBA project Object model`

打开 Excel 并单击文件选项卡 | 选项 | 信任中心 | 信任中心设置 | 宏设置

启用宏并单击`Trust access to Visual Basic projects`

![在此处输入图像描述](../Images/746a49c97c84266a6ed38e1de01fc8bf.png)

下一步 在 VBA 编辑器中

点击工具 | 选项并在“编辑器”选项卡下选中复选框`Require Variable Declaration`

![在此处输入图像描述](../Images/b782dfbef49de92aa2965c76579fd8af.png)

**接下来从[这里](http://wikisend.com/download/139946/Davide%20Piras%20Find%20And%20Replace%20Utility%20Ver%201.0.xlsm)下载示例文件，只需按下`Run`Sheet1 中的按钮即可启动用户表单，如下所示。**

简单地选择**只有**Excel 文件的文件夹。输入相关信息并点击`Start Replace`即可完成:)

![在此处输入图像描述](../Images/b53b25bb37f202dc81cee3c952ce4c2a.png)

**使用的代码**

**Sheet1 代码区**

```
Option Explicit

Private Sub CommandButton1_Click()
    UserForm1.Show
End Sub 
```

**用户表单代码区**

```
Option Explicit

Private Sub CommandButton1_Click()
    Dim Ret
    Ret = BrowseForFolder
    If Ret = False Then Exit Sub
    TextBox1.Text = Ret
End Sub

Private Sub CommandButton3_Click()
    On Error GoTo Whoa

    Dim wb As Workbook
    Dim strPath As String, strfile As String
    Dim strToReplaceWith As String, strToReplace As String
    Dim i As Long, j As Long

    Dim VBE As Object

    strPath = TextBox1.Text & "\"

    strfile = Dir(strPath)

    While strfile <> ""
        Set wb = Workbooks.Open(strPath & strfile)

        Set VBE = ActiveWorkbook.VBProject

        If VBE.VBComponents.Item(1).Properties("HasPassword").Value = False Then
            If VBE.VBComponents.Count > 0 Then
                For i = 1 To VBE.VBComponents.Count
                    VBE.VBComponents.Item(i).Activate

                    If VBE.VBE.CodePanes.Item(i).CodeModule.CountOfLines > 0 Then
                        For j = 1 To VBE.VBE.CodePanes.Item(i).CodeModule.CountOfLines
                            If InStr(1, VBE.VBE.CodePanes.Item(i).CodeModule.Lines(j, 1), TextBox2.Text, vbTextCompare) Then
                                strToReplace = VBE.VBE.CodePanes.Item(i).CodeModule.Lines(j, 1)
                                strToReplaceWith = Replace(strToReplace, TextBox2.Text, TextBox3.Text, 1, 1, vbTextCompare)
                                VBE.VBE.CodePanes.Item(i).CodeModule.ReplaceLine j, strToReplaceWith
                            End If
                        Next
                    End If
                Next i
            End If
        End If

        wb.Close True

        strfile = Dir
    Wend

LetsContinue:
    Application.ScreenUpdating = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub

'~~> Function to pop the browse folder dialog
Function BrowseForFolder(Optional OpenAt As Variant) As Variant
    Dim ShellApp As Object

    '~~> Create a file browser window at the default folder
    Set ShellApp = CreateObject("Shell.Application"). _
    BrowseForFolder(0, "Please choose a folder", 0, OpenAt)

    '~~> Set the folder to that selected.  (On error in case cancelled)
    On Error Resume Next
    BrowseForFolder = ShellApp.self.Path
    On Error GoTo 0

    '~~> Destroy the Shell Application
    Set ShellApp = Nothing

    Select Case Mid(BrowseForFolder, 2, 1)
    Case Is = ":"
        If Left(BrowseForFolder, 1) = ":" Then GoTo Invalid
    Case Is = "\"
        If Not Left(BrowseForFolder, 1) = "\" Then GoTo Invalid
    Case Else
        GoTo Invalid
    End Select

    Exit Function

Invalid:
    BrowseForFolder = False
End Function

Private Sub CommandButton4_Click()
    Unload Me
End Sub 
```

**更多快照**

![在此处输入图像描述](../Images/c04872e6e05e48af87ae3fce810ab039.png)

在宏运行之前需要替换其代码的文件

![在此处输入图像描述](../Images/ee5443874706e215181d5671dad32f0c.png)

宏运行后

![在此处输入图像描述](../Images/b20a65faa3a1e99e6991295befdc1263.png)

**编辑**

**替代文件下载位置**

如果上面的 wikisend 链接失效，可以从[这里下载文件](http://sdrv.ms/KEiGMT)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-14T13:53:14.770

我建议您创建一个配置文件，其中包含您的服务器名称和凭据。然后，您向每个 Excel 文件添加一个模块，该模块在启动时解析此配置文件并用它填充全局变量。您只需将所有 VBA 模块中的服务器名称等变量调整为新的全局变量。

这样，您可以随时更改访问数据，只需编辑或替换文本文件即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T14:15:54.253

我建议用这种方法来解决你的问题。您可以创建单独的 vba 或 vbscript 项目，它们将一一加载所有电子表格，将其 vba 项目的内容导出到单独的文本文件中。然后您可以加载这些文本文件并执行字符串替换。之后，您可以将文本文件作为 vba 项目组件导入回电子表格（通过简单还原导出过程）。

您可以使用这样的代码来导出组件：

```
Public Sub ExportAppSrcs(targetWb as Workbook)
Dim wb As Workbook, Component As Object, Suffix As String, fileName As String

Set wb = targetWb
    For Each Component In wb.VBProject.VBComponents

        Select Case Component.Type
            Case 1                  'modul
                Suffix = ".bas"
            Case 2                  'class modul
                Suffix = ".cls"
            Case 3                  'form
                Suffix = ".frm"
            Case 100                'dokument
                Suffix = ".xwk"
            Case Else
                Suffix = ""
        End Select

        If Suffix <> "" Then
            On Error Resume Next
            fileName = wb.Path & "\spreadsheet.xlsm.src\" & Component.name & Suffix
            Component.Export fileName
        End If
    Next 
End Sub 
```

# c# - 在 ASP.NET MVC 3 中缓存数据

> ID：11033877
> 
> 赞同：12
> 
> 时间：2012-06-14T13:15:28.767
> 
> 标签：c#, asp.net-mvc-3, caching

我有一个 ASP.NET MVC 3 应用程序，它基本上只是一组 Web 服务。这些 Web 服务由一组控制器操作公开。每个控制器操作都会查询我的数据库。因为我的数据很少改变，而且过时的数据不是问题，我想我会实现一些缓存来提高性能。我的目标是：

1.  永远不要缓存对用户的响应。
2.  将数据库记录缓存长达 24 小时。如果 24 小时过去了，请再次访问数据库。

那有意义吗？我知道如何防止响应缓存。我只使用以下内容：

```
HttpContext.Response.Cache.SetCacheability(cacheability) 
```

但是，我不确定如何将我的数据库记录缓存在内存中长达 24 小时。有人对如何做到这一点有任何建议吗？我什至不知道在哪里看。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T14:51:29.727

您可以使用`System.Runtime.Caching`命名空间（或 ASP.NET 缓存，但这是较旧的，只能在 Web 应用程序中使用）。

这是一个示例函数，您可以使用它来环绕您当前的数据检索机制。您可以更改 MemoryCache.Add 中的参数来控制它的缓存量，但您在上面要求 24 小时。

```
using System.Runtime.Caching;    // At top of file

public IEnumerable<MyDataObject> GetData() 
{
    IEnumerable<MyDataObject> data = MemoryCache.Default.Get(MYCACHEKEY) as IEnumerable<MyDataObject>;
    if (data == null)
    {
        data = // actually get your data from the database here
        MemoryCache.Default.Add(MYCACHEKEY, data, DateTimeOffset.Now.AddHours(24));
    }
    return data;
} 
```

正如@Bond 所提到的，如果您缓存的数据可能在 24 小时内发生变化，您可能还希望查看使用 SQL 缓存依赖项。如果它非常静态，这将按照您的要求进行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T13:49:50.680

MVC 框架与持久性无关。没有内置的方法来存储数据，因此没有内置的方法来缓存存储的数据。

该`OutputCache`属性可用于缓存服务器响应。但你明确表示这不是你想做的事情。

`OutputCache`但是，如果您想留在 MVC 框架内，您仍然可以使用内置的。考虑将要缓存的数据公开为 JSON 结果

```
[OutputCache(Duration = 86400)]
public JsonResult GetMyData() {
    var results = QueryResults();
    return Json(results);
} 
```

JSON 字符串 at`/ControllerName/GetMyData`将被缓存 24 小时，因此实际查询每天只运行一次。这意味着您必须在最终页面上实现 AJAX 调用，或者从服务器进行另一个 HTTP 调用。这些都不是理想的。

我会在 MVC 框架之外为您的问题寻找另一种解决方案。考虑一下[memcached](http://memcached.org/)，它正是为此目的而创建的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T14:44:01.177

你所说的不完全是 MVC 责任。ASP.Net 允许您仅访问它产生的东西（显然，它们是响应）。

如果你想缓存数据，最好将它缓存在它产生的地方——在 BL 或数据层的某个地方。

你可以这样做：

```
public class DataCacher
{
    private static String data;
    private static DateTime updateTime;

    private DataCacher() { }

    public static String Data
    {
        get
        {
            if (data == null || updateTime > DateTime.Now)
            {
                data = "Insert method that requests your data form DB here: GetData()";
                updateTime = DateTime.Now.AddDays(1);
            }
            return data;
        }
    }
} 
```

`String data`在此处显示您的实际数据。添加此类后，将您的`GetData()`方法替换为`DataCacher.Data`.

希望它可以帮助或至少引导您进行进一步的思考。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T13:58:26.173

如果您使用的是 MSSQL，您可能需要查看[SQL Cache Dependency](http://msdn.microsoft.com/en-us/library/ms178604.aspx)。

我不确定您是否可以将缓存到期配置为 24 小时，但您可能不需要缓存依赖项 - 只要数据库有更新，它就会使缓存失效（即应该比时间到期更有效战略）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T13:23:19.360

[这](http://leoncullens.nl/post/2011/12/24/Essential-guide-to-ASPNET-MVC3-performance.aspx)是一篇很好的文章，它讨论了 ASP.NET MVC 3 的几种与性能相关的实践，并提到了缓存。

# .htaccess - 使用 .htaccess 将某种文件类型从根目录重定向到子文件夹

> ID：11033885
> 
> 赞同：0
> 
> 时间：2012-06-14T13:15:50.623
> 
> 标签：.htaccess

我正在尝试将某个文件类型 (PDF) 从根目录重定向到子文件夹，但我不确定如何限制规则，以便仅重定向根目录中的 PDF 文件请求，而子目录中的文件请求被重定向文件夹保持不变。

示例：对 www.mydomain.com/myfile.pdf 的请求**应**重写为**www.mydomain.com/pdfs/myfile.pdf**，但不应重定向对**www.mydomain.com/other_folder/otherfile.pdf的请求。**

文件名可以不同，但​​它应该只适用于 PDF 文件。

我已经做到了这一点，这似乎适用于第一部分，但也意味着子文件夹中的 PDF 正在被重写......

```
RewriteRule ^(.*)\.pdf$ pdfs/$1.pdf [NC] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:43:33.270

```
RewriteRule ^([^/]+)\.pdf$ pdfs/$1.pdf [NC,L] 
```

PS：这是内部重定向，如果要外部重定向，请使用：

```
RewriteRule ^([^/]+)\.pdf$ pdfs/$1.pdf [NC,L,R=301] 
```

# wpf - 将两个 WPF 动画链接在一起

> ID：11033890
> 
> 赞同：2
> 
> 时间：2012-06-14T13:15:56.573
> 
> 标签：wpf, animation

我正在使用链接到按钮的单击事件的双动画来为图像旋转设置动画。动画具有缓入和缓出 + 10 秒的持续时间。

我想要做的是同时为另一个图像设置动画，以便在第一个动画的最后 3 秒内，第二个图像使用不透明动画淡入和淡出。

我没有故事板的经验，也不知道如何实现这种效果。

问候，

担

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:29:39.347

如果您要明确控制持续时间，那么最简单的方法可能是将`BeginTime`不透明度动画设置为从 7 秒开始并将 设置`Duration`为持续 3 秒。如果它们都在同一个情节提要中并且您启动情节提要，则将通过设置这些属性为您处理时间。

这是一个非常粗略的例子。

```
<!-- 10 second storyboard -->
<Storyboard Duration="00:00:10.000">
    <!-- 10 second animation -->
    <DoubleAnimation BeginTime="00:00:00.000" Duration="00:00:10.000"  />
    <!-- 3 second opacity animation that starts at 7 seconds -->
    <DoubleAnimation BeginTime="00:00:07.000" Duration="00:00:03.000" />
</Storyboard> 
```

显然，您还需要在这些动画上设置 To/From/Storyboard.TargetName/Storyboard.TargetProperty 属性。但这给了你这个概念的想法。

查看[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms742868.aspx)，了解有关 Storyboard 的更多信息。

# python - SQLAlchemy(Postgresql) - 竞争条件

> ID：11033892
> 
> 赞同：2
> 
> 时间：2012-06-14T13:15:59.820
> 
> 标签：python, postgresql, web-applications, sqlalchemy, turbogears2

我们正在编写一个库存系统，我对 sqlalchemy (postgresql) 和事务/会话有一些疑问。这是一个使用 TG2 的网络应用程序，不确定这是否重要，但对于很多信息来说从来都不是坏事。

1.  如何确保在更改库存数量时我不会遇到竞争条件。如果我理解正确，如果用户将减少某个项目的库存以说 0 并且用户 2 也试图将库存减少到 0，那么如果用户 1 的会话尚未提交，那么用户 2 的起始库存编号将会与用户相同，当两者都提交时导致竞争条件，一个覆盖另一个而不是产生复合效果。

2.  如果我想将 postgresql 序列用于订单/发票编号等内容，我如何从 sqlalchemy 获取/设置下一个值而不会遇到竞争条件？

编辑：我想我找到了我需要使用 with_lockmode 的解决方案，用于更新或共享。如果我弄错了，我将保留更多答案或让其他人纠正我。

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T13:31:54.010

如果两个事务尝试同时设置相同的值，其中一个将失败。丢失的将需要错误处理。对于您的特定示例，您将需要查询零件数量并更新同一事务中的零件数量。

序列号没有竞争条件。保存使用数据库将自动分配的序列号的记录。

编辑：

请注意，Limscoder 指出您需要将隔离级别设置为可重复读取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T16:09:12.857

设置您正在谈论的场景并查看您的配置如何处理它。只需打开两个单独的连接来测试它。

还阅读了 FOR UPDATE [For Update](http://www.postgresql.org/docs/9.1/static/sql-select.html#SQL-FOR-UPDATE-SHARE)以及事务隔离级别[Isolation Level](http://www.postgresql.org/docs/9.1/static/mvcc.html)

# java - 从 cmd 运行 pentaho 水壶。如何将源文件作为参数发送？

> ID：11033894
> 
> 赞同：1
> 
> 时间：2012-06-14T13:16:02.940
> 
> 标签：java, etl, pentaho, kettle

我正在使用 Pentaho Kettle 4.0.1。现在，我通过提供转换文件（XML 类型不是 KTR）从 Java 运行转换，并提供一些其他 XML 文件（在 src 文件夹中），这些文件旨在插入或更新到 DB 中。

我想要的是从 bat 或 shell 文件而不是 Java 中做这些事情。我对水壶并不完全熟悉......我已经看到了一些关于从 .bat 文件运行水壶转换的示例，但只有一个文件参数接收转换文件（ktr）。如何将我的 xml 数据文件所在的 src 目录（即将插入 DB 的数据）作为参数传递给 pan.bat/pan.sh？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:15:51.197

您可以对 sh 文件使用以下语法

sh pan.sh -file:Transformation1.ktr -param:parameter1=myname -param:parameter2=30

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:59:46.980

我认为您需要阅读以下内容： [http ://wiki.pentaho.com/display/EAI/Pan+User+Documentation](http://wiki.pentaho.com/display/EAI/Pan+User+Documentation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T14:23:51.490

您可以使用名为参数的转换来捕获 xml 文件路径

[在这里你可以看到一个例子](http://wiki.pentaho.com/display/EAI/Named+Parameters)，

[这是另一种方式](http://forums.pentaho.com/showthread.php?49116-can-we-pass-kettle-properties-as-parameter-to-spoon-pan-chef-kitchen)

# asp.net - 为子目录中的所有页面创建重定向

> ID：11033897
> 
> 赞同：0
> 
> 时间：2012-06-14T13:16:07.143
> 
> 标签：asp.net, url-rewriting, isapi-rewrite

到目前为止，我一直在使用 ISAPI_REWRITE 为我的 ASP.NET 站点上的单个页面设置重定向。这些工作得很好（下面的例子）：

```
# Redirect
RewriteCond %{HTTP:Host} ^(?:www\.)?example\.com$
RewriteRule ^/category-1/products\.aspx /category-2/products\.aspx [I, R=301] 
```

这将重定向`www.example.com/category-1/products.aspx`到`www.example.com/category-2/products.aspx`.

但是，现在我想重写它，以便对类别 1 中的页面的所有请求都重定向到类别 2 上的相同页面， `www.example.com/category-1/allpages.aspx`即 `www.example.com/category-1/allpages.aspx`.

我如何使用 RewriteRule 来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:18:37.957

试试这个

```
# Redirect
RewriteCond %{HTTP:Host} ^(?:www\.)?example\.com$
RewriteRule ^/category-1/(.*) /category-2/$1 [I, R=301] 
```

# tridion - 我们可以使用 SiteEdit 2009 在 Tridion 中编辑页面元数据吗？

> ID：11033904
> 
> 赞同：5
> 
> 时间：2012-06-14T13:16:27.753
> 
> 标签：tridion, siteedit

在 SDL Tridion 2009 SP1 中，我们将组件添加到结构组和页面元数据中，然后作为组件演示文稿在页面上输出。我们这样做是为了允许用户为每个站点部分设置全局内容，而无需将其添加到结构组中的每个页面。

当我们使用带有手动标签的组件模板输出组件时，我们会在 Presentation 周围看到一个红色框，并且 SiteEdit 框的工具提示显示“已删除”。当在 Component Presentations 选项卡中使用完全相同的 Component Template 并在页面上呈现该模板时，内容是可编辑的。

是否可以使用 SiteEdit 2009 内联编辑作为页面/结构组元数据添加的组件？

注意：我们注意到 SDL Tridion 2009 SP1 中的一个突出错误，当您打开添加到页面/结构组元数据的组件时，它总是以只读方式打开它。这会导致问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T16:06:42.267

可以这样做，但您必须确保您的标记是正确的。我之前通过将 SiteEdit 组件演示标记为 QueryBased 来完成此操作，这似乎使 SiteEdit 忽略了必须将组件添加到组件演示列表中的通常规则

```
<!-- Start SiteEdit Component Presentation: { 
"ID" : "CP1", 
"ComponentID" : tcm:32-204298", 
"ComponentTemplateID" : "tcm:32-204519-32", 
"Version" : "16", 
"IsQueryBased" : true} 
--> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T13:17:44.443

您需要：

*   使用正确的 SE 标记在页面的“可见”区域中公开页面的元数据
*   在 CME 中打开页面并在那里编辑元数据。

Tridion UI 2012 添加了一个具有“编辑元数据”功能的按钮，但这不适用于 SE 2009

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T13:18:04.640

不是通过内联编辑。您当然可以打开页面编辑弹出窗口并在那里编辑元数据。

当然，如果您想编辑您在页面元数据中链接的组件的字段，您可以将该组件表示呈现为 HTML，并按照 Nuno 的建议使用正确的 SiteEdit 命令对其进行标记。

# winforms - 如何使用 WinForms、MVP 和命令处理菜单

> ID：11033906
> 
> 赞同：2
> 
> 时间：2012-06-14T13:16:30.950
> 
> 标签：winforms, command, mvp, command-pattern

我有一个基于 WinForm 的解决方案，正在使用 MVP 实现。

我们有菜单，每个菜单都应该使用一个命令，并且还有其他机制可以调用命令。

现在.. 从视图的具体实现来看，视图元素（菜单、按钮等）使用 CommandBinder 绑定到命令。

我的问题是如何将 Presenter 链接到命令？

每个命令都应该调用 Presenter 各自的函数吗？每个 Presenter 都应该拥有命令并从那里被调用吗？

# linux - 作为 VM 运行的 Linux 是否会使用主机操作系统的驱动程序？

> ID：11033909
> 
> 赞同：0
> 
> 时间：2012-06-14T13:16:43.323
> 
> 标签：linux, driver, vmware, virtualization

我正在 Linux 中开发一些应用程序。这个 Linux 是在 Windows 中运行的虚拟机，在 VMWare 播放器的帮助下。当我的 Linux 应用程序访问外围设备（比如相机、网络 ..）时，访问会通过父主机的驱动程序（这里是 Windows）吗？

这个想法是要知道更改 Windows 驱动程序功能是否会影响我的 Linux 应用程序。

（问题不在于数据是否会流经windows。而是关于是否调用了相应的windows驱动程序-例如对于Linux Video，是否会调用相应的Windows视频驱动程序）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:21:11.703

虚拟机没有其他方法可以控制外围设备，只能通过驱动程序。请注意，您在 VM 中可能有一些设置比外部驱动程序的设置添加了更多限制，但可以肯定的是，您永远不会少。

# javascript - 如何使用 jquery 绑定添加通配符

> ID：11033922
> 
> 赞同：0
> 
> 时间：2012-06-14T13:17:28.017
> 
> 标签：javascript, jquery, dhtml

如何在此 jquery 绑定事件中添加通配符，以便忽略带有“PauNumber”的表单字段？为每个实体重复该字段。不幸的是，由于文本框是在服务器端创建的，因此我无法轻松地为其分配 css 类。

非常感谢

```
<div class="PassengerWrapper">
<input type="text" value="" name="PauNumber0" id="PauNumber0">
</div>

<div class="PassengerWrapper">
<input type="text" value="" name="PauNumber1" id="PauNumber1">
</div>

<div class="PassengerWrapper">
<input type="text" value="" name="PauNumber2" id="PauNumber2">
</div>

$('.PassengerWrapper input[type=text], .PassengerWrapper select').not(':hidden').each(function () { 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T13:27:56.070

您可以在 .not('selector') 中执行此操作以过滤您不想要的元素

```
$('.PassengerWrapper input[type=text], .PassengerWrapper select').not(':hidden,input[name*=PauNumber]').each(function () { 
```

您可以使用 [name*=PauNumber] 或 [id*=PauNumber]

这是为您提供的示例小提琴[http://jsfiddle.net/XQWm​​f/](http://jsfiddle.net/XQWmf/)

还链接到不同的[选择器](http://api.jquery.com/category/selectors/)

# reporting-services - 报告中的现场图像

> ID：11033923
> 
> 赞同：-1
> 
> 时间：2012-06-14T13:17:29.010
> 
> 标签：reporting-services

在表格中，我有一个字段 true 或 false，如果它是真的，我想显示一个图像，如果它是假的，我想显示另一个图像。会是什么表情

查看我的表：

![在此处输入图像描述](../Images/32e0bcb85adbcdfbdc06e30cb474fb5e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:41:22.930

假设您想在文本框中显示图像，并假设您使用的是嵌入在报告中的图像（即您已将图像插入到报告中并且没有使用外部参考或数据库图像），称为 image1 和image2，并假设 True/False 值的字段名称是 Mailing，选择文本框来保存图像，然后在属性窗口中找到 BackgroundImage 属性。展开它 - 将 source 设置为 Embedded 并将 Value 设置为以下表达式：

```
=iif(Fields!Mailing.Value = "True", image1, image2) 
```

如果您的字段值是位数据类型，您的表达式如下所示：

```
=iif(Fields!Mailing.Value = 1, image1, image2) 
```

# c# - NPOI 库在循环中使用时不会插入行/单元格数据

> ID：11033925
> 
> 赞同：0
> 
> 时间：2012-06-14T13:17:33.127
> 
> 标签：c#, .net, npoi

我在 ac# 控制台应用程序中使用 NPOI 库将一些信息写入 excel。我似乎面临的问题是代码不会从 aa for 循环中运行（如果我从 for 循环中取出相同的代码，它可以工作并更新电子表格）。

我已经单步执行了代码，所以我知道它在循环中命中了 createRow、SetCellValue 等，所以我知道它不是循环的问题，只是似乎不想在循环中执行它。有趣的是我有几乎相同的代码（VB.Net 不是 C#）可以工作吗？

示例 C# 代码

```
 using (var fs = new FileStream(templateName, FileMode.Open, FileAccess.Read))
        {
            var template = new HSSFWorkbook(fs, true);
            var sheet = template.GetSheet(sheetName);
            int rowCount = 1;
            int colCount = 0;

            colCount = 0;

            NPOI.SS.UserModel.Row rowIn = null;
            NPOI.SS.UserModel.Cell cellIn = null;

            //foreach (var item in items)
            for(int i = 0; i < items.Count; i++)
            {
                rowIn = sheet.CreateRow(i);
                cellIn = rowIn.CreateCell(1);
                cellIn.SetCellValue("A");
            }

//....rest of the code to save the file 
      } 
```

以下 VB.Net 代码有效，它与我试图更改它以查看它是否有效的 c# 代码不同，但以前这两者只是一个标准端口。

```
Using fs As New FileStream(Server.MapPath("/exporttemplates/tender-export-template.xls"), FileMode.Open, FileAccess.Read)

            Dim templateWorkbook As New HSSFWorkbook(fs, True)
            Dim sheet As HSSFSheet = templateWorkbook.GetSheet("Products")

            Dim productsBids As List(Of TenderProductBid) = TenderProductBid.GetTenderProductBids(tbid.id)
            Dim i As Integer = 1

            For Each pb As TenderProductBid In productsBids

                Dim rowIn As NPOI.SS.UserModel.Row = sheet.CreateRow(i)
                rowIn.CreateCell(0).SetCellValue(pb.product.productName)
                rowIn.CreateCell(1).SetCellValue(pb.quantity)
                rowIn.CreateCell(2).SetCellValue(pb.bid)

                i += 1
            Next

'....rest of the code to save the file 
End Using 
```

文档不清楚，因此当循环工作并且正在传递信息时，无法清楚地看到代码在循环之外工作但在其中没有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:00:06.233

似乎我的循环在某个地方存在问题，不确定在哪里遇到断点并且值在那里，由于某种原因，库似乎不喜欢 foreach。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:22:05.880

我不确定你在上面的代码中做了什么，你在 c# 示例中使用了一个名为“items”的变量，但我没有看到它在任何地方声明。

这是一个基本示例，说明如何使用名为“sheet1”的工作表读取 XLS 文件，其中包含 A 列中的值。

```
 FileStream fs = new FileStream(templateName, FileMode.Open, FileAccess.Read);
    HSSFWorkbook workbook = new HSSFWorkbook(fs);
    Sheet sheet1 = workbook.GetSheet("Sheet1");

    List<string> items = new List<string>();

    for (int i = 1; i <= sheet1.LastRowNum; i++)
    {
        string item = sheet1.GetRow(i).GetCell(0).ToString();
        items.Add(item);
    } 
```

确保正确处理流（Using 或 TryCatchFinally）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T05:44:14.733

尝试将 FileAccess 模式更改为“FileAccess.ReadWrite”

# c# - 使用 c# 将 shapfile(.shp) 转换为 SQL Server 2008？

> ID：11033927
> 
> 赞同：2
> 
> 时间：2012-06-14T13:17:43.143
> 
> 标签：c#, sql-server, geometry, gis, shapefile

.Net 中是否有任何库可以将 shapefile 转换为 SQL 服务器表？我需要从 c#.Net 以编程方式使用它。

有人能知道吗？请在这个问题上帮助我。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:22:09.753

这可能不会那么简单，因为您还需要阅读文件中可能存在或不存在的记录和特征。（DBF 文件）

如果您需要免费库来读取数据 - 请查看[http://shapefile.codeplex.com/](http://shapefile.codeplex.com/)

# php - 查询字符串如何工作

> ID：11033930
> 
> 赞同：0
> 
> 时间：2012-06-14T13:17:49.057
> 
> 标签：php, javascript, css

这不是有史以来最好的问题，但由于搜索引擎觉得有必要忽略符号，我不得不问某个地方。

在链接中，我有时会看到一个`?`，例如`[link]/file.extension?some_type_of_info`，甚至是 +、&、= 等（我的意思的“最佳示例”是 youtube 视频）。这些叫什么，它们做什么？一个好的网站会很棒:)

我最感兴趣是因为我有一个将内容加载到页面中的网站，而目前我允许“标记”页面（或更重要的是，能够返回“页面”）的方式是使用哈希值来表示我的页面'。

最终我不想刷新页面，这就是哈希值很好的原因，但如果有的话，我想要替代品（不是真正的哈希标记，但大多数不同的浏览器似乎以不同的方式处理在 jquery 中分配哈希值)

再次，抱歉，这主要只是一个“这是什么”问题，但如果有人能告诉我使用所讨论的方法与哈希值相比的优缺点，那也很好:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T13:22:02.873

请参阅[url 规范](https://www.rfc-editor.org/rfc/rfc3986)，特别是部分[语法组件](https://www.rfc-editor.org/rfc/rfc3986#page-16)：

```
 URI         = scheme ":" hier-part [ "?" query ] [ "#" fragment ] 
```

…以及[query](https://www.rfc-editor.org/rfc/rfc3986#section-3.4)的定义。

> 查询组件包含非分层数据，这些
> 数据与路径组件（第 3.3 节）中的数据一起用于标识URI 方案和命名权限 （如果有）
> 范围内的资源。
> 查询组件由第一个
> 问号 ("?") 字符指示，并以数字符号 ("#") 字符
> 或 URI 结尾终止。

* * *

> 最终我不想刷新页面

使用[历史 API](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history)。这与 URL 的结构无关（除了必须是同源的 URL）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:20:09.803

URL 中的`?`引入了[查询字符串](http://en.wikipedia.org/wiki/Query_string)，它是提供给服务器的数据。*之前*的所有内容都`?`指定了服务器上的资源（理论上），*之后*的所有内容都是附加数据。

例如：

```
http://example.com/foo/bar/page.php?data=one
http://example.com/foo/bar/page.php?data=two
```

这两个 URL`page.php`都会导致服务器检索该页面，并且由于它是一个 PHP 页面，因此正确配置的服务器将在其中运行 PHP 代码。该 PHP 代码可以通过 将查询字符串数据作为一个大字符串访问[`$_SERVER['QUERY_STRING']`](http://www.php.net/manual/en/reserved.variables.server.php)，或者作为一系列名称/值对（如果是这样，则不必*如此*）通过[`$_GET['paramname']`](http://www.php.net/manual/en/reserved.variables.get.php). 请注意，这是`_GET`因为查询字符串参数是`GET`参数；`POST`参数通过不同的机制发送（不适用于链接；您需要一个表单或类似的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T13:20:45.980

后面的部分`?`称为查询字符串。它用于将参数传递给网站。参数使用`&`符号分隔。例如，这会将参数传递给站点：

```
http://test.site.tld/index.php?parameter=value&another=anotherValue 
```

这会将参数“parameter”（值为“value”）和参数“another”（值为“anotherValue”）传递给脚本`index.php`。

该`+`符号有时用于表示空间。例如，“Hello World”可以表示为“Hello+World”或“Hello%20World”。

标志用于`#`直接跳转到页面内的锚点。例如

```
http://test.site.tld/index.php#docs 
```

将跳转到网站内的锚点“文档”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T13:22:59.117

url 末尾的东西是一个[querystring](http://en.wikipedia.org/wiki/Query_string)。`?`用于表示查询字符串的开头，它们使用以 .`key=value`分隔的对`&`。

为了解决您是否可以将其用于书签的问题，我相信您当前使用 URL 哈希 ( `#`) 的方法是正确的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T13:23:57.930

这 ？部分是查询字符串，GET 参数以这种方式发送。

您的问题中更有趣的部分是：如何在动态网站中为用户启用后退按钮/历史记录？查看这个库：[https ://github.com/browserstate/History.js/](https://github.com/browserstate/History.js/)

它使您（对于较新的浏览器）能够获取/设置历史状态。每个动态页面都有自己的地址。对于较旧的浏览器，有 hash-bang fallback (#/page/page)。

# xslt - xslt 匹配动态模板

> ID：11033931
> 
> 赞同：0
> 
> 时间：2012-06-14T13:17:53.237
> 
> 标签：xslt, matching

我遇到了一个似乎无法解决的 xslt 问题。现在我有这个模板匹配：`<xsl:template match="bodytext/p[position() = 4]">`

这很好用。当第 4 段呈现时，我包含了一些内容。问题是有时`<p>`元素可以有一个类`class="exclude"`

我正在尝试找到一种排除`<p>`具有该类属性的标签的好方法。问题在于，`<p class="exclude">`在第 4 段之前或第 4 段之前或在第 4 段之前可能有尽可能多的需要/需要，同时仍然呈现没有“排除”类的第 1、2 和 3 段。因此，如果文档如下所示：

```
<p></p>
<p class="exclude"></p>
<p class="exclude"></p>
<p class="exclude"></p>
<p></p>
<p class="exclude"></p>
<p></p>
<p></p> 
```

我只想匹配模板：

```
<p></p>
<p></p>
<p></p>
<p></p> 
```

另一个例子是输入：

```
<p></p>
<p></p>
<p></p>
<p class="exclude"></p>
<p class="exclude"></p>
<p class="exclude"></p>
<p class="exclude"></p>
<p class="exclude"></p>
<p class="exclude"></p>
<p></p> 
```

和输出：

```
<p></p>
<p></p>
<p></p>
<p></p> 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:26:56.113

你可以这样做：

```
<xsl:apply-templates 
    select="bodytext/p[not(@class = 'exclude')][position() = 4]"/> 
```

这是测试用例。应用以下变换：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="node() | @*">
        <xsl:copy>
            <xsl:apply-templates select="node() | @*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="/">
        <xsl:apply-templates 
            select="bodytext/p[not(@class = 'exclude')][position() = 4]"/>
    </xsl:template>

</xsl:stylesheet> 
```

至：

```
<bodytext>
    <p></p>
    <p class="exclude"></p>
    <p class="exclude"></p>
    <p class="exclude"></p>
    <p></p>
    <p class="exclude"></p>
    <p></p>
    <p>test</p>
</bodytext> 
```

产生：

```
<p>test</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:49:28.510

利用

```
<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="bodytext/p[@class = 'exclude']"/>

<xsl:template match="bodytext/p[not(@class = 'exclude')][4]">
  <xsl:copy>
    <!-- new content goes here -->
    <xsl:apply-templates/>
  </xsl:copy>
</xsl:template> 
```

# database - sql server 使用代码优先 MVC 审核表

> ID：11033935
> 
> 赞同：0
> 
> 时间：2012-06-14T13:18:04.517
> 
> 标签：database, entity-framework, database-design, ef-code-first

所以我仍然坚持我一直在处理的审计表。

这些是我的模型：

```
public interface Audit {
 int AuditById {get;set;}
 DateTime AuditOn {get;set;}

 User AuditBy {get;set;}
}
User {
 Id {get;set;}
 Email {get;set;}
 Password {get;set;}
}
Profile : Audit {
 public int Id {get;set;}
 public string Name {get;set;}
 public int AuditById {get;set;}
 public DateTime AuditOn {get;set;}

 public User AuditBy {get;set;}
 public User User {get;set;}
} 
```

这是在我的 dbase 上下文中，以确保用户将具有所需的配置文件，但配置文件没有所需的用户。

```
Dbase: DbContext{
   modelbuilder.Entity<Profile>()
    .hasoptional(e => e.User)
    .withrequired(u => u.Profile);
} 
```

在我的种子上，这是我为我的第一个用户/管理员所做的：

```
var admin = new User{
   Id = 1, 
   Email = 'email@email.com',
   Password = 'woop',
   Profile = new Profile {
           Name = 'admin name',
           AuditById = 1,
          AuditOne = DateTime.Now
   }
} 
```

所以，我收到了这个错误：

> “无法确定相关操作的有效排序。由于 fk 约束、模型要求或存储生成的值，可能存在依赖关系”

我知道 AuditById 导致它为 1，但保存时仍然不存在。有没有办法解决这个问题？或者关于我应该如何为用户和配置文件表建模的任何建议？即使没有用户，我也需要配置文件存在，而没有配置文件，用户就无法存在。

感谢您的帮助谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:12:07.677

尝试先创建配置文件记录，然后在创建用户记录时添加对它的引用。

```
dbContext.Profiles.Add(new Profile { Id = 1, ... });

var admin = new User{
   Id = 1, 
   Email = 'email@email.com',
   Password = 'woop',
   ProfileId = 1
   }
}

dbContext.Users.Add(admin);

dbContext.SaveChanges(); 
```

另外，我假设您在问题中包含的代码是伪代码，如果不是，您可能会遗漏一些重要的东西（例如[导航属性](http://msdn.microsoft.com/en-us/library/bb738520.aspx)），也许以下内容会有所帮助：

```
class User 
{
    [Key]
    protected int Id { get; set; }

    [ForeignKey("Profile")]
    protected int ProfileId { get; set; }

    protected Profile Profile { get; set; }

    ...

}

class Profile
{
    [Key]
    protected int Id { get; set; }

    [ForeignKey("User")]
    protected int? UserId { get; set; }

    protected User User { get; set; }

    ...
} 
```

# joomla2.5 - Joomla 2.5.4 插件未出现在主站点上

> ID：11033936
> 
> 赞同：0
> 
> 时间：2012-06-14T13:18:04.843
> 
> 标签：joomla2.5

我安装了**Joomla 2.5.4 插件系统 - Twitter Roll**并设置了我知道但它没有出现在主站点上的基本配置感染我安装的任何插件都没有出现在前端站点上并且安装的插件中​​没有额外的选项来定义一些在哪里显示它的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:31:07.193

好的，我需要添加

> {twitter_search}Joomla{/twitter_search}

在我的文章中。

# java - Knight Tour 使用深度优先搜索算法

> ID：11033939
> 
> 赞同：0
> 
> 时间：2012-06-14T13:18:30.590
> 
> 标签：java, depth-first-search, knights-tour

我正在尝试使用 DFS 制作程序骑士之旅，但我无法解决这个程序..因为我总是有这样的消息错误

KnightTour 的 java.util.ArrayList.get(ArrayList.java:384) 的 java.util.ArrayList.elementData(ArrayList.java:371) 的线程“AWT-EventQueue-0”中的异常 java.lang.ArrayIndexOutOfBoundsException: -1 .processKnightTour(KnightTour.java:82)

我希望有一个人可以帮助我..

```
public void processKnightTour(int indexX, int indexY){
    System.out.println(indexX);
    System.out.println(indexY);
    int[] x={2,2,-2,-2,1,1,-1,-1};
    int[] y={1,-1,1,-1,2,-2,2,-2};
    int countPath=0;
    workList = new ArrayList();
    node[indexX][indexY] = 1;
    workList.add(new Coordinate(indexX, indexY));
    current =(Coordinate) workList.get(workList.size()-1);
    boolean statusChild;
    while(node[current.row][current.column] != 64){
        statusChild = false;
        for(int loop=0; loop<8; loop++){
            if(current.row+x[loop]>=0 && current.row+x[loop]<=7 && current.column+y[loop]>=0 && current.column+y[loop]<=7){
                if(node[(current.row+x[loop])][(current.column+y[loop])]==0){
                    workList.add(new Coordinate(current.row+x[loop], current.column+y[loop], current));
                    statusChild = true;
                }                    
            }
        }
        if(statusChild == true){
            workList.remove(workList.indexOf(current));
        }else{
            if(workList.size()-2 >= 0){
                after = (Coordinate) workList.get(workList.size()-2);
                if(current.nodeParent.equals(after.nodeParent)){

                }else{
                    node[current.nodeParent.row][current.nodeParent.column] = 0;
                }
            }
            node[current.row][current.column] = 0;                
            workList.remove(workList.size()-1);
        }
        current = (Coordinate) workList.get(workList.size()-1);
        node[current.row][current.column] = (node[current.getParent().row][current.getParent().column])+1;
        countPath++;
        //System.out.println(countPath+", "+workList.size()+", "+node[current.column][current.row]);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:31:30.090

```
 workList.remove(workList.size()-1);
    }
    current = (Coordinate) workList.get(workList.size()-1); 
```

在此代码段中，几乎在您的代码末尾，您是：

*   首先在不知道的情况下删除一个元素，如果列表中甚至有一个元素。
*   其次，您尝试`get(worklist.size()-1)`从一个列表中提取，该列表可以（并且将是）大小为 0。

您的 while 循环中有一些不太正确的地方。我没有清楚地看到意图，但是您应该以某种方式确保`workList`正确使用它。

# java - 序列化 JavaFX 组件

> ID：11033943
> 
> 赞同：7
> 
> 时间：2012-06-14T13:18:48.877
> 
> 标签：java, serialization, user-interface, javafx

我正在尝试在 Java FX 下开发一个小拖放应用程序。用户将在某些位置放置 JFX 组件，如按钮、菜单、标签。完成后，他将保存此布局，稍后他将重新打开布局并再次使用它。

存储有关在某个位置放置的所有对象的信息很重要。

我决定为此目的使用序列化。但我无法序列化 JavaFX 组件。我尝试序列化按钮、场景、舞台、JFXPane，但似乎没有任何效果（我获得了 NotSerializableException）。

有什么建议如何保存所有组件然后检索它们？

PS：我试图用 FXML 找出一些方法，但没有成功。

非常感谢您的回答:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T17:58:15.530

你是对的，JavaFX（从 2.1 开始）不支持使用 Java [Serializable](http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html)接口对组件进行序列化——所以你不能使用这种机制。

[JavaFX 可以使用FXMLLoader.load()](http://docs.oracle.com/javafx/2/api/javafx/fxml/FXMLLoader.html#load%28java.net.URL%29)方法从 FXML 文档反序列化。

不过，诀窍是如何将现有组件和状态写入 FXML？

目前，执行 FXML 序列化的平台没有任何公开内容。显然，创建通用场景图 => FXML 序列化器是一项相当复杂的任务（据我所知，没有公开的第 3 方 API）。迭代场景图并为一组有限的组件和属性写出 FXML 并不难。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T15:57:42.940

如果在服务器端保存用户组件的主要目标 - 是有可能向用户显示相同的界面 - 为什么不保存您需要的关于用户组件的所有描述性信息，以及何时需要 - 只需重建用户界面再次，使用存储的描述性信息？这是原始示例：

```
/* That is the class for storing information, which you need from your components*/
 public class DropedComponentsCoordinates implements Serializable{
private String componentID;
private String x_coord;
private String y_coord;
//and so on, whatever you need to get from yor serializable objects;
//getters and setters are assumed but not typed here.
 }

 /* I assume a variant with using FXML. If you don't - the main idea does not change*/
 public class YourController implements Initializable {

List<DropedComponentsCoordinates> dropedComponentsCoordinates;

@Override
public void initialize(URL url, ResourceBundle rb) {
    dropedComponentsCoordinates = new ArrayList();
}

//This function will be fired, every time 
//a user has dropped a component on the place he/she wants
public void OnDropFired(ActionEvent event) {
    try {
        //getting the info we need from components
        String componentID = getComponentID(event);
        String component_xCoord = getComponent_xCoord(event);
        String component_yCoord = getComponent_yCoord(event);

        //putting this info to the list
        DropedComponentsCoordinates dcc = new DropedComponentsCoordinates();
        dcc.setX_Coord(component_xCoord);
        dcc.setY_Coord(component_yCoord);
        dcc.setComponentID(componentID);

    } catch (Exception e) {
        e.printStackTrace();
    }
}

private String getComponentID(ActionEvent event){
    String componentID;
    /*getting cpmponentID*/
    return componentID;
}
private String getComponent_xCoord(ActionEvent event){
    String component_xCoord;
    /*getting component_xCoord*/
    return component_xCoord;
}
private String getComponent_yCoord(ActionEvent event){
    String component_yCoord;
    /*getting component_yCoord*/
    return component_yCoord;
}
} 
```

# sql - 在 SQL Server 中批量更新 XML 记录

> ID：11033944
> 
> 赞同：0
> 
> 时间：2012-06-14T13:18:53.813
> 
> 标签：sql, xml, database, sql-server-2008, tsql

我正在尝试更新以 XML 形式存储在我的 SQL Server 2008 数据库中的大量记录，类似于此。

```
<products>
  <product>
    <name>Nike trainer 1</name>
    <description>Trainer 1</description>
    <price>10.99</price>
  </product>
  <product>
    <name>Nike trainer 2</name>
    <description>Trainer 2</description>
    <price>15.99</price>
  </product>
  <product>
    <name>Nike trainer 3</name>
    <description>Trainer 3</description>
    <price>16.99</price>
  </product>
</products> 
```

我想通过 1.50 批量更新我的所有价格，并且由于大约有 900 种产品，因此遍历每个产品将非常耗时，所以想知道是否有一种通过 SQL 语句快速执行此操作的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T06:22:23.077

是的，它可能，你应该使用 set XmlPart.modify() 像 -

设置@value = 'val2'

set @xml.modify('将 (/root/item/@value)[1] 的值替换为 "val2"')

# jquery - Jquery禁用HTML按钮不起作用

> ID：11033945
> 
> 赞同：5
> 
> 时间：2012-06-14T13:18:55.373
> 
> 标签：jquery

如果下拉列表是某个值，我正在尝试获取一些 jQuery 来禁用表单上的确认按钮，但它似乎不起作用。

我在这里阅读了很多帖子并尝试了各种不同的方法。

这是我目前的代码：

```
 <script>
       $(document).ready(function () {
       // Handler for .ready() called.
       $('#MoveToCompanyId').attr("disabled", true);

       $('#DeleteAll').live("click", function () {

           if ($(this).attr("value") == "True") {
                 $('#MoveToCompanyId').attr("disabled", true);
           } else {
                 $('#MoveToCompanyId').attr("disabled", false);
                 $('#confirm').attr("disabled", true);
                 $('#MoveToCompanyId').change(function () {
                     if ($("#MoveToCompanyId option:selected").text() != "---Select Company---") {
                    $('#confirm').removeAttr("disabled");
                    alert($("#MoveToCompanyId option:selected").text());
                }
                else {
                    $('#confirm').attr("disabled", true);
                    alert("I should be disabled!");
                }

            });
        }
        });
     });

    </script> 
```

任何人都可以看到它有什么问题吗？

澄清一下，我知道当我的警报工作时它会进入正确的代码块。它只是禁用按钮不起作用。

亲切的问候，

加雷斯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T13:33:06.643

你应该使用

```
prop('disabled',true)
prop('disabled',false) 
```

如果您使用的是 jQuery 1.6+，那么您应该使用 prop。

阅读更多关于[道具](http://api.jquery.com/prop/)

> 属性通常会影响 DOM 元素的动态状态，而不会更改序列化的 HTML 属性。示例包括输入元素的 value 属性、输入和按钮的 disabled 属性或复选框的 checked 属性。`.prop()`应该使用方法来设置禁用和检查而不是方法`.attr()`。该`.val()`方法应用于获取和设置值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T13:22:09.467

你应该使用

```
.attr('disabled', 'disabled') 
```

禁用控件和

```
.removeAttr('disabled') 
```

启用它。

[http://www.w3schools.com/tags/att_input_disabled.asp](http://www.w3schools.com/tags/att_input_disabled.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:24:25.793

尝试

```
 attr('disabled', 'disabled') 
```

代替

```
attr("disabled", true); 
```

# bmp - BMP 扫描线中的字节顺序

> ID：11033951
> 
> 赞同：0
> 
> 时间：2012-06-14T13:19:19.133
> 
> 标签：bmp, endianness, scanline

我不确定它是 BGR，然后是 NULL，还是 BGRBGR->，最后是 NULL，以将宽度填充为 4 的倍数？谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:43:40.010

在尝试找到可靠来源几个小时后发现。没想到维基百科描述了它，但它是 BGRBGRBGR-> 然后填充为 4 的倍数。

# delphi - 如何编写 TDBCtrlGrid VCL 样式自定义类？

> ID：11033956
> 
> 赞同：29
> 
> 时间：2012-06-14T13:19:41.923
> 
> 标签：delphi, delphi-xe2, vcl-styles

这里有很多关于 XE2 VCL 样式和按钮、面板、编辑等以及 VCL 样式的自定义颜色的问题。尽管我希望现有的问题涵盖它，但它们并没有……所以 DB Control Grids 似乎是又一个特例。

1.  在 DB Control Grid VCL 源中，它因此注册了一个样式挂钩： `TCustomStyleEngine.RegisterStyleHook( TDBCtrlGrid, TScrollingStyleHook);`

2.  但是，如果您想编写自己的 DB Control Grid VCL 风格的钩子，这不是您的后裔。如果这样做，您会将整个控件绘制成一个非常大的滚动条。

![在此处输入图像描述](../Images/29f8e11666b0a6caf92685593235477f.png)

3.  那么如何自定义主题数据库控制网格？当您完全禁用主题时，似乎仍然不允许自定义绘制活动行。所以我认为必须为此编写一个自定义子类并覆盖 Paint 方法，再加上编写一个 VCL 样式的钩子类。

4.  似乎一个人可能主要应该只是使用常规所有者绘制事件 OnPaintPanel 进行自定义，并且添加该事件，如果你没有，修复我看到的最大的 VCL 样式故障，`TDBCtrlGrid`即它从未使用SelectedColor 并仅将所有内容绘制为纯灰色或其他任何基本颜色。如果有人能证实这一点，或者告诉我，将不胜感激。

# jquery - JQuery Draggable Sortable 错误需要解决方法来显示：无；

> ID：11033958
> 
> 赞同：0
> 
> 时间：2012-06-14T13:19:50.927
> 
> 标签：jquery, jquery-ui, draggable, jquery-ui-sortable

我似乎在 jQuery UI 中发现了一个错误，当其中一个目标可排序对象被隐藏时，它会复制拖动的元素。我设法在一个非常简单的 jsfiddle 中复制了它。我正处于时间紧缩状态，所以我真的等不及补丁了。

这是 JSfiddle： http: [//jsfiddle.net/BpfGC/1/](http://jsfiddle.net/BpfGC/1/) 要复制错误，将绿色框上的一个字母拖到红色框上，然后切换蓝色框的内容。您将看到您拖动到红色的任何字母的副本。这是在 Firefox 和 Chrome 中。

谁能找出解决方法或为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:39:37.750

我认为这是使用助手时的错误：带有隐藏排序的“克隆”。我在上面回答了我自己的问题，当你隐藏容器时它工作正常。这对我来说似乎是一个错误。

所以： `<ul class="sortable" style="display:none;"></ul>` 将重现错误但 `<div style="display:none;"><ul class="sortable"></ul></div>` 按预期工作。

# c# - WebService SOAP 响应属性排序

> ID：11033960
> 
> 赞同：1
> 
> 时间：2012-06-14T13:19:58.820
> 
> 标签：c#, web-services, soap

WebService 属性排序的行为非常奇怪。

我有 WebService，它公开了下一个 WSDL：

```
 ...
<s:complexType name="WsProgramPackage">
        <s:sequence>
          <s:element minOccurs="1" maxOccurs="1" name="ProgramPackageID" nillable="true" type="s:int" />
          <s:element minOccurs="1" maxOccurs="1" name="ProgramID" nillable="true" type="s:int" />
          <s:element minOccurs="1" maxOccurs="1" name="PackageID" nillable="true" type="s:int" />
          <s:element minOccurs="1" maxOccurs="1" name="Layer" nillable="true" type="s:int" />
          <s:element minOccurs="1" maxOccurs="1" name="ProgramOffset" nillable="true" type="s:decimal" />
          <s:element minOccurs="1" maxOccurs="1" name="PackageOffset" nillable="true" type="s:decimal" />
          <s:element minOccurs="1" maxOccurs="1" name="Duration" nillable="true" type="s:int" />
          <s:element minOccurs="1" maxOccurs="1" name="IsDynamic" nillable="true" type="s:boolean" />
          <s:element minOccurs="1" maxOccurs="1" name="IsVisible" nillable="true" type="s:boolean" />
          <s:element minOccurs="1" maxOccurs="1" name="AllowSkip" nillable="true" type="s:boolean" />
          <s:element minOccurs="1" maxOccurs="1" name="ProgramUID" nillable="true" type="s1:guid" />
          <s:element minOccurs="1" maxOccurs="1" name="PackageUID" nillable="true" type="s1:guid" />
        </s:sequence>
      </s:complexType>
    ... 
```

它也应该返回下一个肥皂响应

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <GetProgramByIDResponse xmlns="ws.kitd.vx2.ws.cms">
      <GetProgramByIDResult>
        <ThumbnailURL>string</ThumbnailURL>
        <TrailerURL>string</TrailerURL>
        <ProgramPackages>
          <WsProgramPackage>
            <ProgramPackageID>int</ProgramPackageID>
            <ProgramID>int</ProgramID>
            <PackageID>int</PackageID>
            <Layer>int</Layer>
            <ProgramOffset>decimal</ProgramOffset>
            <PackageOffset>decimal</PackageOffset>
            <Duration>int</Duration>
            <IsDynamic>boolean</IsDynamic>
            <IsVisible>boolean</IsVisible>
            <AllowSkip>boolean</AllowSkip>
            <ProgramUID>guid</ProgramUID>
            <PackageUID>guid</PackageUID>
          </WsProgramPackage>
... 
```

当我尝试在 SOAP UI 中调用此方法时，响应中有不同的字段排序

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <soap:Body>
      <GetProgramByIDResponse xmlns="ws.kitd.vx2.ws.cms">
         <GetProgramByIDResult>
            <ThumbnailURL>http://origin.pmt.ovivo.ru/2f/59/2f59465e-7aa0-4188-9f2f-2904f92cced7.35557.203a5d20f56693df382b610354605ebf</ThumbnailURL>
            <ProgramPackages>
               <WsProgramPackage>
                  <ProgramPackageID>269310</ProgramPackageID>
                  <ProgramID>5190</ProgramID>
                  <PackageID>8855</PackageID>
                  <ProgramUID>ec62f0a5-c10e-4ac5-bb95-c5ab3ac6f150</ProgramUID>
                  <PackageUID>61d77ef1-495f-4ec8-9fac-3170a9705483</PackageUID>
                  <Layer>0</Layer>
                  <ProgramOffset>0.000</ProgramOffset>
                  <PackageOffset>0.000</PackageOffset>
                  <Duration>9469</Duration>
                  <IsDynamic>false</IsDynamic>
                  <IsVisible>false</IsVisible>
                  <AllowSkip>false</AllowSkip>
               </WsProgramPackage>
            </ProgramPackages>
... 
```

在 WSDL 中，ProgramUID 和 PackageUID 是最后一个字段，但在响应中它们位于第 3 和第 4 位。

怎么可能，该响应与 WSDL 中描述的不同，是否有可能以某种方式修复此排序。

PS 这是简单的旧 C# WebService，而不是 WCF。

# c# - 在多个页面中使用相同的 DataGridView

> ID：11033961
> 
> 赞同：1
> 
> 时间：2012-06-14T13:19:59.740
> 
> 标签：c#, asp.net, visual-studio-2010, datagridview

我有两个 aspx 页面：

1.  **DashboardPreview.aspx：**这是主页。它在 DataGridView 中显示**前 5 个仪表板。**它还显示其他信息。

2.  **DashboardList.aspx：**它在 DataGridView 中显示**所有带有分页的仪表板。**

每个仪表板（即 DataGridView 的每一行）都有多个控件可用。例如：仪表板可以“编辑”并与其他用户“共享”。

我只想对 DataGridView 进行编码**ONCE**。

然后，我想在两个页面中都使用该代码。我该怎么做？

*注意：我通过从 Visual Studio 的工具箱中拖放来创建 DataGridView，即我自己没有编写整个代码。但是，我自己确实创建了“共享”按钮之类的控件。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:24:27.897

如果要跨页面重用服务器控件，则需要创建用户控件。

创建用户控件：

1.  我会为用户控件创建一个特定的文件夹。
2.  右键单击该文件夹并选择“添加新项目”，然后选择用户控制。
3.  在该用户控件中输入 GridView

您的用户控件将如下所示：

```
<%@ Control Language="VB" AutoEventWireup="false" CodeFile="YourUserControlName.ascx.vb" Inherits="Controls_YourUserControlName" %>

<asp:GridView ID="GridView1">
    <!-- Do you grid view stuff here -->
</asp:GridView> 
```

要使用用户控件，您需要在要使用它的页面上注册它。代码如下所示：

```
<%@ Register Src="~/Controls/ucGrid.ascx" TagName="ucGrid" TagPrefix="uc" %> 
```

然后你会像使用服务器控件一样使用它。

```
<uc:ucGrid ID="GridView" runat="server" /> 
```

但是，在每个页面上注册用户控件可能会变得乏味，因此为了使事情更容易，您可以在 web.config 中注册它们。

```
<system.web>
  <pages>
    <controls>
      <add tagPrefix="uc" src="~/Controls/ucGrid.ascx" tagName="ucGrid"/>
    </controls>
  </pages>
</system.web> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:23:49.720

显而易见的解决方案是将网格放在 UserControl 中，然后在所有相关页面上包含 UserControl。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:24:28.643

您可以为此使用“网络用户控制”。将 webusercontrol 添加到您的解决方案中，将 datagridview 拖放到 webusercontrol 界面中，并根据您的需要更改 usercontrol 的代码隐藏文件。之后构建您的解决方案。构建解决方案后，您只需将用户控件拖放到要使用的任何页面即可。您不必一次又一次地对其进行编码。如果您需要更多详细信息，可以搜索“使用 Web 控件”。

# cakephp - CakePHP 关系超过一个模型/表

> ID：11033962
> 
> 赞同：0
> 
> 时间：2012-06-14T13:20:06.957
> 
> 标签：cakephp, relationship

我是学习 CakePHP 的新手。我完成了博客教程，现在正在尝试为帖子添加类别。我创建了类别和子类别模型以及 MySQL 数据库表，并将模型关联如下：

帖子 -> “belongsTo” -> 子类别 -> “belongsTo” -> 类别

Post -> Subcategory 工作正常，我可以通过以下方式解析视图中的 SubCategory 名称：

```
php echo $post['SubCategory']['name']; 
```

现在：我如何在关系中更进一步并在帖子视图中获取帖子的类别名称（通过子类别）？以下显然给了我类别 ID，但不是它的名称：

```
php echo $post['SubCategory']['category_id']; 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:16:47.350

您应该查看[`ContainableBehavior`](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)，这将帮助您仅获取您真正需要的结果。*我总是*建议的第一件事是改变`$recursive = -1`和使用 Containable。这也将极大地提高您的应用程序的性能，因为您将对您实际不使用的数据执行更少的调用。

使用您的示例：

```
$results = $this->Post->find('all', array(
  'contain' => array(
    'SubCategory' => array(
      'Category'
    )
  )
));

// in your view foreach loop
echo $post['SubCategory']['Category']['name']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:37:32.837

查看模型的[递归参数](http://book.cakephp.org/1.3/view/1063/recursive)并执行第 2 步（2 个深度级别）。如果您的定义正确，这将允许您使用该类别。请记住，它需要获取大量数据，这会影响网站的整体性能。

# api - 考虑到服务器无法访问或停机，如何使用 Groovy 编写 URL HTTP Get 代码？

> ID：11033963
> 
> 赞同：0
> 
> 时间：2012-06-14T13:20:07.213
> 
> 标签：api, http, groovy

我正在我的 Web 应用程序中实现对 MailChimp API 的 API 调用。但是这个问题对于任何接受简单 HTTP GET 的 API 调用都是有效的。

我想捕捉任何错误并允许我的应用程序继续运行，即使 API 调用失败、mailchimp 服务器关闭、缓慢或不可用也是如此。

[MailChimp API](http://apidocs.mailchimp.com/api/)返回一个序列化的 JSON 对象。这是我的代码。

```
def listSubscribe = { apiurl, apikey, listid, email ->
    def url = "${apiurl}?method=listSubscribe&apikey=${apikey}&id=${listid}&email_address=${email}"
}
try {
   def url =  new URL(listSubscribe(apiUrl,apiKey,listId,email))
   return (url.text == 'true') ? true : false
} catch (MalformedURLException e) {
        return false
} catch (java.net.UnknownHostException e) {
        return false
} 
```

我应该执行任何其他尝试/捕获吗？如何改进我的代码以使其更安全地处理不可访问的 API 调用？

# 解决方案

为了使调用异步，并且由于我在 Grails 应用程序中使用此代码，我创建了一个[Quartz 作业](http://grails-plugins.github.com/grails-quartz/guide/index.html)来执行包含 API 调用的服务。

```
class MailChimpListSubscribeJob {
    def mailChimpService 

    def execute(context) {
         mailChimpService.listSubscribe(context.mergedJobDataMap.get('email'))       
     }
} 
```

该服务现在使用超时并捕获通用异常：

```
class MailChimpService {
    def grailsApplication

    def listSubscribe(email_address) {
        def apiurl = grailsApplication.config.mailchimp.apiUrl
        def apikey = grailsApplication.config.mailchimp.apiKey
        def listid = grailsApplication.config.mailchimp.listId
        listSubscribe(apiurl, apikey, listid, email_address)
    }

    def listSubscribe(apiurl, apikey, listid, email) {
        try {
            def cmdurl = "${apiurl}?method=listSubscribe&apikey=${apikey}&id=${listid}&email_address=${email}"
            def url =  new URL(cmdurl)
            def response = url.getText(connectTimeout: 4 * 1000, readTimeout: 4  * 1000)
            return (response == 'true') ? true : false  
        } catch (MalformedURLException e) {
                return false
        } catch (java.net.UnknownHostException e) {
            return false
        } catch (Exception e) {
            return false
        }
    }
} 
```

在我的控制器内部：

```
MailChimpListSubscribeJob.triggerNow([email: 'myemail@example.com']) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:34:22.633

Sergio - 您可能还需要执行以下操作：

1.  启用此呼叫超时，以防您在几秒钟内没有从他们的系统得到任何响应。当他们的系统响应缓慢或离线时，这将处理事件。
2.  如果它不是决定您是否可以继续执行其余代码的关键调用，那么您还应该考虑使其异步。
3.  如果您想处理可能发生的任何不可预见的运行时异常，也可以捕获通用异常。

# mongodb - mongo 在 MAMP 上显示错误

> ID：11033965
> 
> 赞同：0
> 
> 时间：2012-06-14T13:20:14.117
> 
> 标签：mongodb, mamp

在 Mac 上安装 Mongo 后，我遵循[了这一点。](http://www.davidgolding.net/mongodb/installing-mongodb-on-mamp-1-9-5.html)

在 php.ini 上显示 mongo 详细信息。

```
mongo
MongoDB Support enabled
Version     1.0.11

Directive   Local Value Master Value
mongo.allow_empty_keys  0   0
mongo.allow_persistent  1   1
mongo.auto_reconnect    1   1
mongo.chunk_size    262144  262144
mongo.cmd   $   $
mongo.default_host  localhost   localhost
mongo.default_port  27017   27017
mongo.long_as_object    0   0
mongo.native_long   0   0
mongo.utf8  1   1 
```

但是当我在终端上输入 mongo 时，它会显示以下错误。

```
sokada-macbook:bin sokada$ mongo
MongoDB shell version: 2.0.6
connecting to: test
Thu Jun 14 21:54:47 Error: couldn't connect to server 127.0.0.1 shell/mongo.js:84
exception: connect failed 
```

我提前感谢您解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:42:46.703

我需要在终端中运行以下命令。

```
sudo mkdir -p /data/db
sudo chown `id -u` /data/db 
```

然后我运行 mongo 并给出以下内容。

```
sokada-macbook:~ sokada$ mongo
MongoDB shell version: 2.0.6
connecting to: test
> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:49:43.187

看起来您已经成功安装了对 PHP 的 Mongo 支持，但还没有启动实际的 mongod 服务器。

在您遵循的[教程](http://www.davidgolding.net/mongodb/installing-mongodb-on-mamp-1-9-5.html)中，这将是第 4 步。为 MAMP 创建启动例程。

# opencv - 我们可以在 opencv 中创建 n 通道图像吗，n 将在 20 左右

> ID：11033970
> 
> 赞同：4
> 
> 时间：2012-06-14T13:20:31.847
> 
> 标签：opencv, image-processing, mat

目前我正在寻找立体对的差异。我在创建 20 个通道数据集时遇到了一种情况，当我声明 3 维数组时它给出了错误，我可以创建 20 个通道的图像以便我可以存储数据。如果可以的话，我必须包括哪些附加条件才能获得结果，而不会出现任何内存分配错误或......。创建 20 个通道的图像对我来说甚至会很舒服......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-14T13:32:52.667

OpenCV 的 C++ 接口出现`cv::Mat`，替代并改进了`IplImage`C 接口的类型。这种新类型提供了几个构造函数，包括[下面的](http://docs.opencv.org/modules/core/doc/basic_structures.html#Mat::Mat%28int%20rows,%20int%20cols,%20int%20type%29)构造函数，它可用于通过 param 指定所需的通道数`type`：

```
Mat::Mat(int rows, int cols, int type) 
```

示例代码：

```
#include <cv.h>
#include <highgui.h>
#include <iostream>

void test_mat(cv::Mat mat)
{
    std::cout << "Channels: " << mat.channels() << std::endl;
}

int main(int argc, char* argv[])
{
    cv::Mat mat20(1024, 768, CV_8UC(20));
    test_mat(mat20);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T13:43:50.133

Opencv 为编译时已知类型和大小的小矩阵实现模板类：

```
template<typename _Tp, int m, int n> class Matx {...}; 
```

您可以创建 Matx 部分案例的指定模板，它是 cv::Vec，就像那些已经在 opencv 中为 1,2 或 3 个“通道”编写的模板一样：

```
typedef Vec<uchar, 3> Vec3b; // 3 channel -- written in opencv 
typedef Vec<uchar, 20> Vec20b; // the one you need 
```

然后，声明一个新的（20 个 uchar 通道）对象的矩阵：

```
cv::Mat_<Vec20b> myMat;
myMat.at<Vec20b>(i,j)(10) = .. // access to the 10 channel of pixel (i,j) 
```

# c++ - qt 线程与 movetothread

> ID：11033971
> 
> 赞同：23
> 
> 时间：2012-06-14T13:20:36.533
> 
> 标签：c++, multithreading, qt

我正在尝试使用线程创建一个程序：主要以循环开头。当测试返回 true 时，我创建一个对象，我希望该对象在另一个线程中工作，然后返回并开始测试。

```
QCoreApplication a(argc, argv);
while(true){
    Cmd cmd;
    cmd =db->select(cmd);
    if(cmd.isNull()){ 
        sleep(2);  
        continue ;
    }
    QThread *thread = new QThread( );
    process *class= new process ();
    class->moveToThread(thread);
    thread->start();

    qDebug() << " msg"; // this doesn't run until  class finish it's work 
}
return a.exec(); 
```

问题是当我启动新线程时，主线程停止并等待新线程完成。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-06-14T18:31:16.637

规范的 Qt 方式如下所示：

```
 QThread* thread = new QThread( );
 Task* task = new Task();

 // move the task object to the thread BEFORE connecting any signal/slots
 task->moveToThread(thread);

 connect(thread, SIGNAL(started()), task, SLOT(doWork()));
 connect(task, SIGNAL(workFinished()), thread, SLOT(quit()));

 // automatically delete thread and task object when work is done:
 connect(task, SIGNAL(workFinished()), task, SLOT(deleteLater()));
 connect(thread, SIGNAL(finished()), thread, SLOT(deleteLater()));

 thread->start(); 
```

如果你不熟悉信号/槽，Task 类看起来像这样：

```
class Task : public QObject
{
Q_OBJECT
public:
    Task();
    ~Task();
public slots:
    // doWork must emit workFinished when it is done.
    void doWork();
signals:
    void workFinished();
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:43:25.860

我不知道您是如何构建流程类的，但这并不是 moveToThread 的真正工作方式。moveToThread 函数告诉 QT 任何插槽都需要在新线程中执行，而不是在发出信号的线程中执行。（编辑：实际上，我现在记得它默认为创建对象的胎面）

此外，如果您从构造函数在进程类中执行工作，它也不会在新线程中运行。

让您的进程类在新线程中执行的最简单方法是从 QThread 派生它并覆盖 run 方法。然后，您根本不需要调用 move 到线程。

# javascript - 本机全屏 JavaScript API 切换按钮

> ID：11033973
> 
> 赞同：0
> 
> 时间：2012-06-14T13:20:44.367
> 
> 标签：javascript, dom-events, fullscreen

我不知道如何修改以下代码以包含切换按钮。在“正常”模式下，该按钮将使元素全屏显示，然后更改其功能以返回“正常”状态。

我修改了[John Dyer 的 Native Fullscreen JavaScript API](http://johndyer.name/lab/fullscreenapi/)示例中的代码：

```
var fsButton = document.getElementById('fsbutton'),
    fsElement = document.getElementById('specialstuff'),
    fsStatus = document.getElementById('fsstatus');

if (window.fullScreenApi.supportsFullScreen) {
    fsStatus.innerHTML = 'YES: Your browser supports FullScreen';
    fsStatus.className = 'fullScreenSupported';

    // handle button click
    fsButton.addEventListener('click', function() {
        window.fullScreenApi.requestFullScreen(fsElement);
    }, true);

    fsElement.addEventListener(fullScreenApi.fullScreenEventName, function() {
        if (fullScreenApi.isFullScreen()) {
            fsStatus.innerHTML = 'Whoa, you went fullscreen';
        } else {
            fsStatus.innerHTML = 'Back to normal';
        }
    }, true);

} else {
    fsStatus.innerHTML = 'SORRY: Your browser does not support FullScreen';
} 
```

对此：

```
var container = document.getElementById('canvas'),
fsButton = document.getElementById('fsbutton');

if (window.fullScreenApi.supportsFullScreen) { // fullscreen supported
    fsButton.style.display = 'block';

    container.addEventListener(fullScreenApi.fullScreenEventName, function() {
        fsButton.addEventListener('click', function() {
            if (fullScreenApi.isFullScreen()) { // fullscreen is on
                window.fullScreenApi.CancelFullScreen( container );
                fsButton.className = 'fs-off';
            } else { // fullscreen is off
                window.fullScreenApi.requestFullScreen( container );
                container.style.width = "100%";
                container.style.height = "100%";
                fsButton.className = 'fs-on';
            }
        }, true)

    }, true);

} else {
    // no fullscreen support - do nothing
} 
```

但它不起作用。任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:43:14.963

您将遇到的另一个问题是 Mozilla 希望您收听元素`fullscreenchange`上的事件`document`，而不是全屏显示的元素。

```
// which object can handle a fullscreen event
var fullscreenObj = (fullScreenApi.fullScreenEventName.indexOf('moz') > -1 : document : container;

fullscreenObj.addEventListener(fullScreenApi.fullScreenEventName, function() {
    if (fullScreenApi.isFullScreen()) {
        container.style.width = container.style.height = '100%';
        fsButton.className = 'fs-on';
    } else {
        fsButton.className = 'fs-off';
    }
}, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:30:22.710

首先，您不应该将 fsButton`click`事件侦听器嵌套到 fullScreenApi 的事件侦听器中，因为它`container`在全屏之前无法工作。fsButton`click`负责全屏，全屏**后**附加事件侦听器，因此该操作永远不会发生。

这是代码的修改版本，应该适合您的需要：

```
var fsButton = document.getElementById('fsbutton'),
    container = document.getElementById('canvas');

if (window.fullScreenApi.supportsFullScreen) {
    fsButton.style.display = 'block';

    fsButton.addEventListener('click', function() {
        if (fsButton.className == 'fs-off') {
            window.fullScreenApi.requestFullScreen(container);
        } else {
            window.fullScreenApi.cancelFullScreen(container);
        }
    }, true);

    container.addEventListener(fullScreenApi.fullScreenEventName, function() {
        if (fullScreenApi.isFullScreen()) {
            container.style.width = container.style.height = '100%';
            fsButton.className = 'fs-on';
        } else {
            fsButton.className = 'fs-off';
        }
    }, true);
} else {
    // no fullscreen support - do nothing
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-14T22:17:49.090

我建议使用类似[https://github.com/sindresorhus/screenfull.js/](https://github.com/sindresorhus/screenfull.js/)

这将大多数浏览器怪癖包装在一个更干净的界面中。

# ruby-on-rails - 制作我的第一颗宝石 - 我从哪里开始？

> ID：11033975
> 
> 赞同：2
> 
> 时间：2012-06-14T13:20:50.660
> 
> 标签：ruby-on-rails, ruby, rubygems, gem

所以我有一个 RubyGem 的想法，我认为这将是了解更多关于 Ruby 和 Rails 的绝佳体验，但是......我不知道从哪里开始。

我的想法是生成一个文件夹“文章”，您可以在其中放置降价文件。在此文件夹中，主博客页面仅将标题显示为文章本身的链接。

这听起来很简单，但老实说，我不知道从哪里开始。如果我想在 routes.rb 中插入行、生成文件夹并在 Rails 中显示 markdown，你推荐我阅读哪些文章？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T13:50:29.043

我会推荐这些教程之一来创建宝石：

*   [http://net.tutsplus.com/tutorials/ruby/gem-creation-with-bundler/](http://net.tutsplus.com/tutorials/ruby/gem-creation-with-bundler/)
*   [http://railscasts.com/episodes/245-new-gem-with-bundler](http://railscasts.com/episodes/245-new-gem-with-bundler)

要修改 routes.rb 文件，您只需要`File.open`读入行。使用正则表达式来确定要插入行的位置，然后将文件写回。

要创建文件夹，请查看[Dir.new的文档](http://ruby-doc.org/core-1.9.3/Dir.html#method-c-new)

对于 Ruby/Rails 中的 Markdown，我喜欢 rdiscount gem：[https ://github.com/rtomayko/rdiscount](https://github.com/rtomayko/rdiscount)

Railties 提供了一种很好的方式来做这样的某些事情。您可能会经常使用[http://api.rubyonrails.org](http://api.rubyonrails.org)。该网站上有一些 Railtie 文档：http: [//api.rubyonrails.org/classes/Rails/Railtie.html](http://api.rubyonrails.org/classes/Rails/Railtie.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T13:53:41.073

我建议阅读[RubyGems 指南](http://guides.rubygems.org/)——尤其是[`What is a gem?`](http://guides.rubygems.org/what-is-a-gem), [`Make your own gem`](http://guides.rubygems.org/make-your-own-gem/)和[`Patterns`](http://guides.rubygems.org/patterns).

由于您可能已经在使用[Bundler](http://gembundler.com/)，因此您可以运行[`bundle gem <name>`](http://gembundler.com/rubygems.html)以生成一个包含已有内容的 gem 项目。它确实可以节省工作，但如果您有不明白的地方，请参阅指南。

此外，[在 GitHub 上观看一些开源项目](https://github.com/languages/Ruby)——观察其他开发人员并注意他们的工作方式肯定会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T13:46:24.803

最简单的方法可能是阅读其他与您想要完成的任务类似的 gem。从他们的文件开始，这些`.gemspec`文件将列出 gem 工作所需的所有其他文件，以及 gem 依赖项列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T13:47:34.740

下面是关于如何开始创建 gems 的更多响应，以下是 2 个可以帮助您的流行的、记录在案的 gems。

1.  [https://github.com/seattlerb/hoe](https://github.com/seattlerb/hoe)
2.  [https://github.com/technicalpickles/jeweler](https://github.com/technicalpickles/jeweler)

此外，虽然它比您尝试使用您的 gem *（它是一个静态站点生成器）*所做的更多，但[https://github.com/mojombo/jekyll](https://github.com/mojombo/jekyll)是一个非常流行的 gem，您可以将`.markdown`文件放入一个`posts/`目录中转换通过 rake 到静态 HTML 页面。我想你至少可以在那里找到一些你想要的功能。

# java - 如何为 Maven 测试设置 logback

> ID：11033981
> 
> 赞同：0
> 
> 时间：2012-06-14T13:20:56.097
> 
> 标签：java, maven, jenkins

当我从 IntelliJ 环境运行 maven 测试时，我可以看到所有应用程序设置日志。我正在使用 logback。但是当我在 jenkins 上运行相同的 maven 测试时，应用程序日志没有输出。因此，我有一些在 linux 上失败的测试，我不知道为什么。

如何在运行时打印日志：

```
 mvn clean -DskipTests=false test 
```

# asp.net - 应用内可下载内容

> ID：11033982
> 
> 赞同：0
> 
> 时间：2012-06-14T13:20:56.823
> 
> 标签：asp.net, web-services, iis

我正在尝试为可能的 Web 应用程序实现一种私有“云存储”。让我解释一下，我有可以安装在客户端电脑上的“报告”（包含查询等的文件）。通常，每当我们创建新文件时，我们都会通过电子邮件将文件发送给最终用户，然后他们手动将它们导入应用程序（在任何浏览器中使用标准文件上传）。

现在我们想更进一步，创建一个页面，该页面将从我们的站点中提取文件列表，例如。www.me.com/reports。该应用程序将遍历列表，与已安装的进行比较并显示新的、更新的等。最终用户只需单击一个按钮，文件就会下载到服务器上并安装。

我试图避免编写任何 Web 服务器代码，我宁愿只创建一个经过 Windows 身份验证的虚拟目录，允许文件列表（或类似的东西）。我在想也许一些 javascript 会默默地将文件下载到客户端，然后将其上传回 In​​tranet iis 服务器。无需用户交互即可完成所有操作。这甚至可能吗？

我想了解任何人对如何实现这样的事情的想法，以及我应该注意哪些陷阱。

谢谢JK

# jquery - MVC3 POST 做 GET

> ID：11033990
> 
> 赞同：1
> 
> 时间：2012-06-14T13:21:33.687
> 
> 标签：jquery, asp.net-mvc-3, post, get

我在 MVC 中的 POST 有点问题。

**我有我的模型**

```
 [ScaffoldColumn(false)]
    public int Id { get; set; }

    [ScaffoldColumn(false)]
    public Guid UId { get; set; }

    [Required(ErrorMessage = "Indtast dato")]
    [DataType(DataType.Time)]
    public DateTime Date { get; set; }

    [Required(ErrorMessage = "Indtast overskrift")]
    public string Headline { get; set; }

    [Required(ErrorMessage = "Indtast text")]
    [AllowHtml]
    public string Text { get; set; } 
```

**我可以从我的模型中插入：**

```
@using (Html.BeginForm(ViewData["methode"].ToString(), "News", Model, FormMethod.Post))
{
    @Html.HiddenFor(n => n.Id)
    <table>
        <tr>
            <td style="width:65px">
              @Html.LabelFor(n => n.Date, "Dato")
            </td>
            <td style="width:100%">
              @Html.Telerik().DatePickerFor(n => n.Date).Value(@Model.Date)
            </td>
        </tr>
        <tr>
            <td>
              @Html.LabelFor(n => n.Headline, "Overskrift")
            </td>
            <td>
              @Html.TextBoxFor(n => n.Headline, new { @class = "form_smallbox" })
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td colspan="2">
            @(Html.Telerik().EditorFor(e => e.Text)
                            .Encode(false)
                            .Tools(tools => tools.Clear()
                                 .Bold()
                                 .Italic()
                                 .Underline()
                                 .Separator()
                                 .JustifyLeft()
                                 .JustifyCenter()
                                 .JustifyRight()
                                 .Separator()
                                 .FontSize()
                                 .FontColor()
                                 .FormatBlock()
                                 .Separator()
                                 .InsertUnorderedList()
                                 .InsertOrderedList()
                                 .CreateLink()
                            )
                            .Localizable("da-DK")
                            .HtmlAttributes(new { style = "height:350px;" })
            )
            </td>
        </tr>
    </table>
    @Html.ValidationSummary()

    <input type="image" src="../../Content/Image/btn_save.png" title="Gem nyhed" />
}

[HttpPost]
public ActionResult InsertNews(DisplayNews news)
{
    if (ModelState.IsValid)
    {
        news.Text = "<html><head></head><body>" + news.Text + "</body></html>";
        News newNews = new News
        {
            UId = Guid.NewGuid(),
            Date = news.Date,
            Headline = news.Headline,
            Text = MaterialeLagretLibrary.Helpers.StrToByteArray(news.Text)
        };
        MaterialeLagretLibrary.DBHandler.NewsDBHandler.InsertNews(newNews);
    }
    return RedirectToAction("News");
} 
```

这没有问题。但随后我会进行更新，我使用 ActionName`UpdateNews`而不是`InsertNews`.

**控制器看起来几乎相同：**

```
[HttpPost]
public ActionResult UpdateNews(Display news)
{
    if (ModelState.IsValid)
    {
        news.Text = "<html><head></head><body>" + news.Text + "</body></html>";
        MaterialeLagretLibrary.DBHandler.NewsDBHandler.UpdateNews(news);
    }
    return RedirectToAction("News");
} 
```

现在的问题是我收到一个错误：

"*此请求的查询字符串长度超过了配置的 maxQueryStringLength 值。* "

它使 QueryString 好像它是 GET 而不是 POST。

我究竟做错了什么？

渲染后的表单头：

```
<form method="post" action="/News/UpdateNews/0?UId=00000000-0000-0000-0000-000000000000&Date=06%2F13%2F2012%2000%3A00%3A00&Headline=Nyhedsbrev&Text=%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3Cp%3E%3Cspan%20style%3D%22color%3A%23ff7f27%3B%22%3EKATALOG%20NR%201037%3C%2Fspan%3E%3Cbr%20%2F%3E%3Cspan%20style%3D%22color%3A%23ff7f27%3B%22%3EHJ%C3%86LP%20%E2%80%93%20EN%20ELEV%20MED%20H%C3%98RETAB%20I%20MIN%20KLASSE!%3C%2Fspan%3E%3Cbr%20%2F%3E%3Cspan%20style%3D%22color%3A%23ff7f27%3B%22%3E%E2%80%9DHj%C3%A6lp%20-%20en%20elev%20med%20h%C3%B8...E-p%C3%A6dagoger%20og%20taleh%C3%B8rep%C3%A6dagoger%2C%20som%20i%20deres%20hverdag%20arbejder%20med%20b%C3%B8rn%20med%20h%C3%B8retab.%3C%2Fspan%3E%3Cbr%20%2F%3E%3Cspan%20style%3D%22color%3A%23ff7f27%3B%22%3EFor%20l%C3%A6rere%20og%20p%C3%A6dagoger%20i%20folkeskolen%2C%20som%20f%C3%A5r%20et%20inkluderet%20barn%20med%20h%C3%B8retab%2C%20vil%20denne%20bog%20v%C3%A6re%26nbsp%3B%3C%2Fspan%3E%3Cspan%20style%3D%22color%3A%23ff7f27%3B%22%3Een%20rigtig%20god%20guide.%3C%2Fspan%3E%3C%2Fp%3E%3C%2Fbody%3E%3C%2Fhtml%3E"> 
```

我看到我需要从操作中删除查询字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:53:36.183

如果它是 GET，它永远不会到达标记为 POST 的操作，因此无需发布。

您的模型应该是路线值吗？我会检查可用的 Html.BeginForm 重载，因为 FormMethod.Post 的参数值显然会指向其他参数。

* * *

## 更新：

在检查您确实想在模型中添加路由值之后，我想我知道您的问题是什么：

您实际上是将表单作为 POST 提交，但是由于路由值（您的模型），查询字符串无论如何都太长了。

加载您的页面并获取源代码，您会发现与此类似的内容：

```
<form action="/yourpage?too-many-parameters-here-which-make-your-query-string-too-long" method="post"> 
```

表单实际上是作为 POST 提交的，但 URL 太长。我不知道您在这里的目的，但您可以将模型数据作为隐藏字段包含在表单中，或者减少您要发送的值的数量。

# android - 安卓服务框架

> ID：11033996
> 
> 赞同：0
> 
> 时间：2012-06-14T13:21:59.763
> 
> 标签：android, android-service

我对 Android 提供的服务框架有两个疑问

1.  我从 Android 文档中阅读了以下内容

    > 客户端还可以使用 Context.bindService() 来获得到服务的持久连接。如果服务尚未运行（在执行此操作时调用 onCreate()），这同样会创建服务，但不会调用 onStartCommand()。客户端将接收服务从其 onBind(Intent) 方法返回的 IBinder 对象，然后允许客户端调用回服务。只要建立连接，服务就会保持运行（无论客户端是否保留对服务的 IBinder 的引用）。

    这是否意味着我需要在服务上手动调用 OnStartCommand？请如果我的理解是正确的。

2.  是否允许或来自 onStartCommand 的返回值例如，我可以返回这样的东西吗

    ```
    return START_FLAG_REDELIVERY | START_FLAG_RETRY 
    ```

    我不确定这是否有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:37:49.653

1.  您可以先调用`startService`以确保服务正在运行，然后绑定到它。

2.  onStartCommand 的返回值应为以下之一：START_STICKY、START_NOT_STICKY、START_REDELIVER_INTENT 或 START_STICKY_COMPATIBILITY。

在这里阅读它们：http: [//developer.android.com/reference/android/app/Service.html#START_NOT_STICKY](http://developer.android.com/reference/android/app/Service.html#START_NOT_STICKY)