# StackOverflow 问答 10637000-10637999

# ios - 如何在表格视图单元格中添加 12 个文本字段并通过其标记值访问每个文本字段的文本？

> ID：10637007
> 
> 赞同：2
> 
> 时间：2012-05-17T13:49:55.950
> 
> 标签：ios, uitableview, uitextfield

我想在 UITableViewCell（每行一个文本字段）中添加 12 个 UITextField，并使用它的标签访问每个 UITextField 的文本。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T13:52:36.803

```
UITextField *textField = (UITextField *)[cell viewWithTag:1];
// 1 is your tag, and use textField.text to get the text in the textField. 
```

你的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
//...
nameLabel.tag =1; // 1 is your nameLabel's tag
[tv setDelegate:self];
tv.tag = indexPath.row + 1; // set it to tv.tag = indexPath.row + 2; because 1 is your nameLabel's tag

UITextField *textField = (UITextField *)[cell viewWithTag:tv.tag];//
NSLog(@"%@",textField.text);

return cell; 
```

# windows-server-2008-r2 - 在 windows server 2008 r2 上停止端口 80

> ID：10637012
> 
> 赞同：2
> 
> 时间：2012-05-17T13:50:06.733
> 
> 标签：windows-server-2008-r2, port80

我有一个监听端口 80 的服务器应用程序。但是当我开始监听时，我遇到了这个错误：

在端口 80 上启动侦听器时出错：地址已在使用中：绑定

如何停止端口 80 以使用它？

注意：我已停止“万维网发布服务”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T07:43:52.767

“SQL Server Reporting Services”正在使用端口 80。我已将其停止，端口 80 现在可用。

# php - 在 IE7 和 IE8 中预填充 HTML 字段

> ID：10637014
> 
> 赞同：1
> 
> 时间：2012-05-17T13:50:16.313
> 
> 标签：php, html

刚刚在我们的网站上报告了有关出生日期注册表单的问题。表格中预先填写了样本值。这在 Firefox、Chrome（以及在一定程度上 IE9）中运行良好，但在 IE7 或 IE8 中运行良好。我可以进入这些字段，但不能点击它们。似乎预填充的值妨碍了选择框（在 IE9 中，如果我在值前面单击，我只能单击以选择输入字段）。

```
<div class="DobBack">
    <input name="dobD" id="dobD" type="text" value="" class="ab abReq abDob abNum" />
    <div class="abInputText">DD</div>
</div>

<div class="abDobBack">
    <input name="dobM" id="dobM" type="text" value="" class="ab abReq abDob abNum" maxlength=2 />
    <div class="abInputText">MM</div>
</div>

<div class="abDobBack">
    <input name="dobY" id="dobY" type="text" value="" class="ab abReq abDob abNum" maxlength=4 />
    <div class="abInputText">YYYY</div>
</div> ​ 
```

这是代码问题还是 IE 问题或两者都有问题？不知道这个问题持续了多久，几个月没有更新，只是突然收到问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:42:25.873

我要冒昧地假设这是 PHP。

```
 <div class="DobBack">
        <input name="dobD" id="dobD" type="text" value="<?php echo $dobD ?>" onfocus="value=\'\'" class="ab abReq abDob abNum"></input>
        <div class="abInputText">DD</div>
    </div>

    <div class="abDobBack">
        <input name="dobM" id="dobM" type="text" value="<?php echo $dobM ?>'" class="ab abReq abDob abNum" maxlength=2 />
        <div class="abInputText">MM</div>
    </div>

    <div class="abDobBack">
        <input name="dobY" id="dobY" type="text" value="<?php echo $dobY ?>" class="ab abReq abDob abNum" maxlength=4 />
        <div class="abInputText">YYYY</div>
    </div> 
```

如果不是，$dobM 是什么，这是什么语言，$dobM 是在哪里定义的，你能发布完整的代码吗？

### 第2部分

```
$html='<div class="DobBack">
    <input name="dobD" id="dobD" type="text" value="'.$dobD.'" onfocus="value=\'\'" class="ab abReq abDob abNum"></input>
    <div class="abInputText">DD</div>
</div>

<div class="abDobBack">
    <input name="dobM" id="dobM" type="text" value="'.$dobM.'" class="ab abReq abDob abNum" maxlength=2 />
    <div class="abInputText">MM</div>
</div>

<div class="abDobBack">
    <input name="dobY" id="dobY" type="text" value="'.$dobY.'" class="ab abReq abDob abNum" maxlength=4 />
    <div class="abInputText">YYYY</div>
</div> ​'; 
```

它应该是这样的。

转到查看源代码以查看该值是否显示。你应该看看 ($dobY == 1985)

另一个潜在问题是 onfocus 事件。尝试`onFocus="this.value=''; return false;"`

# java - 我应该如何为内部类编写切入点表达式？

> ID：10637017
> 
> 赞同：0
> 
> 时间：2012-05-17T13:50:34.780
> 
> 标签：java, spring, aop

我正在尝试使用 AOP 来分析数据访问类中的方法。简化后，它看起来像这样：

```
package com.example.dataservices.dao;

public class DaoImpl extends AbstractDao implements Dao
{
    protected static abstract class CallbackHandler
    {
        abstract void processRow(final ResultSet rset);

        abstract DataPayload getPayload();

        boolean isCompanyPermitted(final Long companyId)
        {
            return true;
        }

        boolean isUserPermitted(final Long userId)
        {
            return true;
        }
    }

    protected static class CompanyCallbackHandler extends CallbackHandler
    {
        DataPayload payload;

        void processRow(final ResultSet rset)
        {
            if (isUserPermitted(rset.getlong(1))) {
                // do stuff
            }
        }

        DataPayload getPayload(final Long companyId)
        {
            this.payload = new DataPayload();
            // query the database
            return this.payload;
        }
    }

    public DataPayload getCompanyPayload(final Long companyId)
    {

        final CallbackHandler handler = new CompanyCallbackHandler();
        return handler.getPayload(companyId);
    }
} 
```

我的切入点表达式如下所示：

> @Pointcut("执行(* com.example.dataservices.dao.. *(* ..))")

但是这个表达式只匹配 getCompanyPayload() 方法。我正在尝试匹配 CompanyCallbackHandler 从其父类 CallbackHandler 继承的 isUserPermitted() 等方法。

任何建议将不胜感激。

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:18:29.467

我假设您正在使用 AspectJ，而 Spring AOP 没有任何可能性。

在执行切入点，限定类型是声明方法的类型，所以

`execution(* com.example.dataservice.dao..*.*(..))`**如果在该类中声明** 或**覆盖**该方法，则将在类或内部类中的包 dao 上选择任何执行。继承是不够的。

# sql-server - NewID() - 是否有很高的机会暴露上一个/下一个 GUID

> ID：10637018
> 
> 赞同：3
> 
> 时间：2012-05-17T13:50:36.540
> 
> 标签：sql-server, guid, newid

我知道 GUID 在理论上是独一无二的，碰撞的可能性非常低。但是，如果我理解正确，一些唯一性是可用的，因为它是从用于生成它的计算机上的信息中播种的，具体取决于所使用的算法。

给定一个 GUID，用户猜测表中其他 GUID 的可能性有多大？

例如，如果您的时事通讯订阅者具有取消订阅功能，您可以将其发布到 example.com/subscriber/unsubscribe/{id}

对于整数身份，这显然是一个坏主意。ID 为 1000 的用户可以通过猜测 ID 在几秒钟内取消订阅您的整个数据库。

如果 ID 列是初始化为 newid() 的 GUID，您的用户在知道自己的 ID 的情况下猜出正确 ID 的可能性有多大？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:23:00.767

我会说这在理论上可能是可能的，但实际上非常非常不可能发生。

我已经阅读了 SLaks 在他的评论中链接的 Eric Lippert 的博客文章，以及 Stack Overflow 上的其他一些答案：

*   [如何从给定的 GUID 预测下一个 GUID？](https://stackoverflow.com/questions/816882/how-to-predict-the-next-guid-from-a-given-guid)
*   [您猜出可能生成的 GUID 有多容易？](https://stackoverflow.com/questions/643445/how-easily-can-you-guess-a-guid-that-might-be-generated)

据我了解：给定一组几个 GUID，有可能找出它们是否是在同一台机器上生成的。但这并不容易找到，而且对于普通用户来说肯定不是。

现在我猜如果只给定**一个**GUID（示例中的时事通讯订阅 ID），就**很难**猜出任何其他 GUID。
如果（且仅当）真的有可能，您可能需要一台快速的机器和对用于创建 GUID 的算法的深入了解。

最后，您必须查看上下文：
即使可以猜测 GUID（我也不确定是否 - 我确定**我**做不到），我无法想象有人真的会这样做，以便从您的时事通讯中取消订阅其他人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-24T12:05:41.360

NEWID() 生成一个版本 4 GUID，但它的实现是可以**猜测**的。[GUID 被设计为唯一的，而不是随机的。](https://blogs.msdn.microsoft.com/oldnewthing/20120523-00/?p=7553)

来自 RFC 4122 规范：

> **安全注意事项**
> 
> 不要假设 UUID 很难猜；例如，它们不应该用作安全功能（仅拥有授予
> 访问权限的标识符）。一个可预测的随机数源会
> 加剧这种情况。

正如@martin-smith 指出的那样，仅仅因为它是第 4 版投诉 GUID 并不能使其本质上是可猜测的，它取决于实现。[这篇 stackexchange 帖子](https://dba.stackexchange.com/questions/39239/securely-generate-a-uniqueidentifier-in-sql-server)展示了如何使用不可猜测的 SQL 创建投诉版本 4 GUID：

```
SELECT CAST(CRYPT_GEN_RANDOM(16) AS UNIQUEIDENTIFIER) 
```

**参考：**

*   [RFC 4122](https://www.rfc-editor.org/rfc/rfc4122#section-6)
*   [新ID()](https://msdn.microsoft.com/en-us/library/ms190348.aspx)
*   [CRYPT_GEN_RANDOM()](https://msdn.microsoft.com/en-us/library/cc627408.aspx)
*   [http://www.blackwasp.co.uk/SQLSelectRandom.aspx](http://www.blackwasp.co.uk/SQLSelectRandom.aspx)
*   [https://en.wikipedia.org/wiki/Universally_unique_identifier](https://en.wikipedia.org/wiki/Universally_unique_identifier)

# performance - 快速找到大型数字矩阵中的第 n 个最大乘积

> ID：10637026
> 
> 赞同：7
> 
> 时间：2012-05-17T13:50:57.293
> 
> 标签：performance, algorithm, search, sorting, language-agnostic

我正在研究一种适用于大量项目的排序/排名算法，我需要以有效的方式实现以下算法以使其工作：

* * *

有两个数字列表。它们同样长，大约 100-50 万条。从这里我需要找到这些列表之间的第 n 个最大的产品，即。如果您创建一个矩阵，其中顶部有一个列表，一侧有另一个列表，每个单元格都是上面数字和侧面数字的乘积。

示例：列表是`A=[1, 3, 4]`和`B=[2, 2, 5]`。然后是产品`[2, 2, 5, 6, 6, 15, 8, 8, 20]`。如果我想要第三大，那将是 8。

天真的解决方案是简单地生成这些数字，对它们进行排序，然后选择第 n 个最大的。但这就是`O(m^2 * log m^2)`m 是小列表中元素的数量的地方，这还不够快。

我想我需要的是首先对两个小列表进行排序。那就是`O(m * log m)`。然后我肯定知道最大的一个A[0]*B[0]。第二大的是 A[0]*B[1] 或 A[1]*B[0], ...

我觉得这可以分`O(f(n))`步完成，与矩阵的大小无关。但我想不出一种有效的方法来完成这部分。

* * *

编辑：有一个答案被删除，它建议记住两个排序集中的位置，然后查看 A[a]*B[b+1] 和 A[a+1]*B[b]，返回更大的一个并递增 a/b。我打算在它被删除之前发布这条评论：

> 这行不通。想象两个列表 A=B=[3,2,1]。这会给你像 [9,6,3 ; 6,4,2; 3,2,1]。所以你从 (0,0)=9 开始，到 (0,1)=6，然后选择是 (0,2)=3 或 (1,1)=4。但是，这将错过 (1,0)=6 比两者都大。所以你不能只看两个邻居，但你必须回溯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T15:24:39.227

我认为它可以在`O(n log n + n log m)`. 这是我的算法的草图，我*认为*它会起作用。这有点粗糙。

1.  对 A 进行降序排序。（采取`O(m log m)`）
2.  B 降序排序。（采取`O(m log m)`）
3.  让。`s`_ `min(m, n)`（采取`O(1)`）
4.  通过.创建`s`惰性序列迭代器。 将遍历值, , ..., . （采取）`L[0]``L[s-1]``L[i]``s``A[i]*B[0]``A[i]*B[1]``A[i]*B[s-1]``O(s)`
5.  将迭代器放入优先队列`q`中。迭代器将根据其当前值进行优先级排序。（`O(s)`因为最初它们已经按顺序排列）
6.  从 中提取`n`值`q`。拉出的最后一个值将是所需的结果。当一个迭代器被拉出时，它被重新插入，`q`使用它的下一个值作为新的优先级。如果迭代器已经用完，不要重新插入它。（采取`O(n log s)`）

总之，该算法将采用`O(m log m + (s + n)log s)`，但`s`等于`m`或`n`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:27:27.893

您无需对 500 000 个元素进行排序即可获得前 3 个元素。

只需取前 3 个，将它们放在 SortedList 中，然后遍历列表，用新值替换 3 个元素中最小的一个，如果新值更高，然后再使用结果列表。

对两个列表都执行此操作，您将得到一个 3*3 矩阵，在该矩阵中取第三个值应该很容易。

[这是 scala 中的一个实现](https://stackoverflow.com/a/5678400/312172)。

如果我们假设n小于m，并且A=[1, 3, 4] and B=[2, 2, 5]，n=2：

您将采用 (3, 4) => 对它们进行排序 (4,3)
然后采用 (2,5) => 对它们进行排序 (5, 2)

您现在可以进行压缩搜索。当然现在最大的产品是(5, 4)。但下一个是 (4*2) 或 (5*3)。对于更长的列表，您可以记住 4*2 的结果是什么，仅将其与下一个产品进行比较，反之亦然。这样一来，您只会过多地计算一种产品。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T15:08:36.197

我不认为有 O(f(n)) 的算法，它独立于 m。

但是有一个相对较快的 O(n*logm) 算法：

首先，我们对两个数组进行排序，我们得到 A[0] > A[1] > ... > A[m-1] 和 B[0] > B[1] > ... > B[m- 1]。（当然，这是 O(mlogm)。）

然后我们构建一个最大堆，其元素为 A[0]*B[0], A[0]*B[1], ... A[0]*B[m-1]。我们维护一个“指针数组”P[0], P[1], ... P[m-1]。P[i]=x 表示 B[i]*A[x] 当前在堆中。所有的 P[i] 最初都是零。

在每次迭代中，我们从堆中弹出最大元素，这是下一个最大的产品。假设它来自B[i]*A[P[i]]（我们可以记录堆中的元素来自哪个B[i]），然后我们将对应的指针向前移动：P[i] += 1，并将新的 B[i] * A[P[i]] 推入堆中。（如果 P[i] 移动到超出范围 (>=m)，我们只需将 -inf 推入堆中。）

在第 n 次迭代之后，我们得到第 n 个最大的乘积。

有n次迭代，每次都是O(logm)。

编辑：添加一些细节

# c - 使用 const 成员初始化嵌套结构

> ID：10637027
> 
> 赞同：4
> 
> 时间：2012-05-17T13:51:02.987
> 
> 标签：c

我有以下类型，用于说明：

```
struct outer {
  struct inner {
    const int c;
    int x;
  } i;
  int y;
}; 
```

我想 malloc `outer`，然后再初始化`inner`以获得正确的 const 行为`outer.i.c`。

例如，像

```
struct outer *o = malloc(sizeof *o);
o->y = find_y();
int cc = find_c();
int xx = find_x();
o->i = { .c = cc, .x = xx }; 
```

但这给了我一个关于 的错误`assignment of read-only member 'i'`，因为它是一个赋值，而不是一个初始化。

有没有办法在编译器前面做这样的事情？让我们考虑像在编译器周围偷偷摸摸地抛弃 const`*((int *) &o->i.c)`或使用 memcpy on之类的技巧。`&o.i`我可以在需要的地方找到它们，但我正在寻找最不偷偷摸摸的方法来做到这一点。

我没有使用 C++（我使用的是 C99）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:19:29.777

唯一真正不变的东西是驻留在只读存储器中的东西。Malloc/calloc 永远不会给你只读内存。所以说“const”是个谎言。好吧，这是对编译器和开发人员的提示。我不确定 C99 中是否有任何语法糖来解决对某人来说可能存在问题的问题，但我会这样做：

```
#include <stdio.h>
#include <stdlib.h>

struct outer {
    struct inner {
        const int c;
        int x;
    } i;
    int y;
};

int main(void)
{
    struct outer    *o;

    o      = calloc(1, sizeof(struct outer));

    printf("before: %d %d %d\n", o->i.c, o->i.x, o->y);

    *((int *)&o->i.c) = 1;
    o->i.x = 2;
    o->y = 3;

    printf("after: %d %d %d\n", o->i.c, o->i.x, o->y);

    return 0;
} 
```

请考虑到这是一个比学术更实用的解决方案，因此有些人可能想为此向我扔几个臭鸡蛋。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:21:47.627

我可能会这样做：

```
struct outer_init {
  struct inner_init {
    int c;
    int x;
  } i;
  int y;
};

struct outer_init *oi = malloc(sizeof *oi);
oi->y = find_y();
oi->i.c = find_c();
oi->i.x = find_x();

struct outer *o = (struct outer *)oi; 
```

我不完全确定它是绝对便携的。

# python - 用列表理解替换 while 循环

> ID：10637037
> 
> 赞同：2
> 
> 时间：2012-05-17T13:51:22.000
> 
> 标签：python, while-loop, list-comprehension

通常将 for 循环表示为列表推导：

```
mylist=[]
for i in range(30):
    mylist.append(i**2) 
```

这相当于：

```
mylist = [i**2 for i in range(30)] 
```

有没有什么机制可以通过while循环来完成这种迭代？

```
mylist=[]
i=0
while i<30:
    mylist.append(i**2)
    i+=1 
```

当然，通过这个简单的示例，很容易转换为`for`循环，然后转换为列表推导式，但如果不是那么容易怎么办？

例如

```
mylist = [i**2 while i=0;i<30;i++ ] 
```

（当然上面的伪代码不是合法的python）（`itertools`想到这种事情，但我不太了解那个模块。）

**编辑**

一个（非常简单的）我认为一段时间理解会很有用的例子是：

```
dt=0.05
t=0
mytimes=[]
while t<maxtime:
   mytimes.append(t)
   t+=dt 
```

这可以转化为：

```
dt=0.05
t=0
nsteps=maxtime/dt
mytimes=[]
for t in (i*dt for i in xrange(nsteps)):
    mytimes.append(t) 
```

可以写成（复合）列表理解：

```
nsteps=maxtime/dt
mytimes=[t for t in (i*dt for i in xrange(nsteps)] 
```

但是，我认为while循环*更*容易阅读（并且没有索引错误）另外，如果你的对象（dt）支持'+'但不支持'*'怎么办？`maxtime`如果循环的每次迭代都以某种方式发生变化，则可能会发生更复杂的示例......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T13:57:47.190

如果您的 while 循环仅检查正在递增的局部变量，则应将其转换为 for 循环或等效的列表理解。

仅当您**无法**将循环表示为迭代某些内容时，才应仅使用 while 循环。典型用例的一个示例是检查[Event](http://docs.python.org/library/threading.html#threading.Event.is_set)的状态，或调用本机代码的低级循环。因此（正确使用）while 循环很少见，最好直接写出来。一段时间的*理解*只会使它们更难阅读。

如果你只想返回多个值，你应该考虑编写一个[生成器](http://docs.python.org/tutorial/classes.html#generators)。

例如，您编辑的算法应写为（使用[`numpy.arange`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.arange.html#numpy-arange)）：

```
mytimes = numpy.arange(0, maxtime, 0.05) 
```

或者，使用生成器：

```
def calcTimes(maxtime):
  dt = 0.05
  t = 0
  while t < maxtime:
   yield t
   t += dt 
```

# linux - synch.h 的 Linux 等效标头

> ID：10637040
> 
> 赞同：2
> 
> 时间：2012-05-17T13:51:37.887
> 
> 标签：linux, shared-libraries, header-files

我有一个 C 代码，其中包含`#include<synch.h>`该代码在 solaris 中成功编译，但在 Linux 中我发现缺少标头。正如几个链接中所建议的那样，可以`"sync.h"`代替使用吗？或者 Linux 中是否有其他等效的 synch.h 头文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T14:46:16.867

Solaris 中的 synch.h 标头用于 Solaris 线程。除此之外，它还提供信号量和互斥量的声明。您可以使用此库 (http://sctl.sourceforge.net/sctl_v1.1_rn.html) 在 Linux 上为您提供与 Solaris 兼容的线程，或者更好的方法是重新编写代码以使用 POSIX 线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:02:13.463

我们无法确定，但一种可能的可能性是，这是[NACHOS](http://www.cs.washington.edu/homes/tom/nachos/)`synch.h`的一部分，通常用于教育环境。前往 NACHOS 项目页面并阅读它，然后决定您是否认为这可能是正确的；如果是这样，您可以免费下载并安装它。

# c# - C#——通过引用传递的设计思路

> ID：10637044
> 
> 赞同：1
> 
> 时间：2012-05-17T13:51:45.343
> 
> 标签：c#, algorithm, pass-by-reference

我有一个 C# Windows 服务，可以将传入的电子邮件和 twitter 评论路由到可用`Agents`（我真的不知道 - 但该应用程序做了非常相似的事情）。所以，我有一个列表`Agents`和逻辑，可以将这些电子邮件和推文路由到可用的代理。

我的代码看起来如何？

我有一`AgentManager`门课程可以跟踪哪些代理可用、他们的技能水平等。我有一`EmailManager`门课程可以路由`Emails`到`Agents`. 我有一个`TwitterManager`路由`Tweets`到`Agents`.

所以 - 与 相关的逻辑`Agents`，例如 的列表`Agents`，谁可用，谁有能力 a `Tweet`，谁有能力a`Email`等都在`AgentManager`.

现在，当`EmailManager`检测到有新电子邮件并需要将其分配给 时`Agent`，我想要

从中获取我的代理列表`AgentManager`（而不是返回数据库或在 中保留单独的代理列表`EmailManager`）。

我最初的想法是通过引用传递`AgentManager`给。`EmailManager`我想这样做的原因是代理更改状态、添加/删除等 -`EmailManager`将始终保持机智

h 最新的`AgentManager`（因此也是最新的代理列表）。不知何故 - 这感觉很脏。我知道通过 ref 传递是不合时宜的，但这似乎是处理这个问题的好方法。我做错了吗？

**编辑：** 我通过引用传递 AgentManager 进行存储，而不是在 EmailManager 类中更改它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:01:57.767

从你的描述来看，走另一条路似乎更合理。
AgentManager 处理电子邮件和推文并了解其代理的一切 -
因此它应该有一个方法来接收电子邮件/推文列表并处理它们。

因为我们说的是引用类型，所以关于通过 ref 传递的问题有点不清楚。

例如：

```
AgentManager ag = new AgentManager();
EMailManager eg = new EMailManager();
TweetManaget tg = new TweetManager();

eg.LoadEMail();
List<EMails> mails = eg.GetMailsList();

tg.LoadTweet();
List<Tweets> tws = tg.GetTweetsList();

ag.ProcessData(mails, tws); 
```

编辑：查看 OP 的评论，我想到了另一种策略
让 EMailManager 和 TweetManager 声明一个 AgentManager 订阅的事件-

```
eg.EmailReceived += ag.NotifyEmail;
tg.TweetPolled += ag.NotifyTweet;

public class EventManager
{
    public delegate void OnMailReceived(EMails m);
    public event MailReceived;

    ........

    private void GetMail()
    {
        EMails m;
        .....
        if(MailReceived != null) 
            MailReceived(m);
    }
}

public class AgentManager()
{
     public void NotifyEMail(EMails m)
     {
         .....
     }

} 
```

# spring - 在 Java EE 中使用持久性框架的原因？

> ID：10637050
> 
> 赞同：0
> 
> 时间：2012-05-17T13:51:55.963
> 
> 标签：spring, hibernate, jakarta-ee

我正在开发一个 Java EE 应用程序，我使用 Spring 作为框架。现在我看到人们谈论 ORM 框架（Hibernate/JPA/iBatis...），但我不知道使用这些框架的原因可能是什么？

我的意思是这些框架将在项目功能和性能方面发生什么变化？

如果你能给我一个清晰的例子，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:23:24.900

避免为所有内容编写自己的 SQL，并 [部分] 弥合对象-关系鸿沟（“深渊”）。

对于简单的需求，ORM 非常棒，并且可以消除对一些 DB 问题的思考——但需要注意的是，您仍然需要了解 DB 端实际发生的情况，以防止可能对性能产生严重影响。

对于复杂的需求，你将学会理解为什么他们将 ORM 称为“计算机科学的越南”……“我们已经吸取了越南的教训……不要去越南。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T21:14:18.050

因为你会厌倦为整个 java 对象编写 SQL 插入/更新/选择语句，并在对象更改时保持对象 <-> SQL 代码的形状。JPA 实际上是 Java EE 标准的一部分。

但是，除了非常简单的情况外，它**不会**提供任何方法来阻止您知道您正在使用数据库做什么。我的经验是，任何 JPA 框架都会为性能问题跟踪和调试增加另一层复杂性。

最后，您可能最终需要了解 JPQL（JPA 的 SQL ish 语法）如何为 JPA 提供程序（OpenJPA、HIbernate、eclipse 链接..）和数据库实现的每个组合转换为 SQL。这将是不平凡的。

如果您没有特定的性能要求并且只想要简单的对象持久性，那就去吧！休眠似乎是最先进的atm。

# iphone - CGAffineTransformMakeTranslation 运动

> ID：10637052
> 
> 赞同：0
> 
> 时间：2012-05-17T13:51:59.860
> 
> 标签：iphone, objective-c, uigesturerecognizer, cgaffinetransform, uipangesturerecognizer

我正在使用`CGAffineTransformMakeTranslation`with`UIPanGestureRecognizer`来平移 UIView。

`CGAffineTransformMakeTranslation`是取 delta x 和 delta y 还是新位置的绝对值？这是我所拥有的：

```
- (void)swipeDetected:(UIPanGestureRecognizer *)recognizer
{

    CGPoint newTranslation = [recognizer translationInView:self.view];
    self.navController.view.transform = CGAffineTransformMakeTranslation(newTranslation.x, 0);
    .....
} 
```

这从左到右起作用，但不是从右到左。我很确定“翻译”是指 delta x 和 delta y，而不是绝对值。

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:47:58.277

设置变换是一个即时操作，因为它只是视图位置的矩阵乘法。

*如果您需要从当前位置*恢复，可以将变换保存到 ivar，并使用逆变换，即：

`_currentTransform = CGAffineTransformMakeTranslation(newTranslation.x, 0);`

然后：

`CGAffineTransform inverse = CGAffineTransformInvert(_currentTransform);`

如果您想删除所有转换，您可以执行`self.transform = CGAffineTransformIdentity`

希望这可以帮助！

# python - 如何从 MZ 可执行文件中提取 Unicode 字符序列？

> ID：10637055
> 
> 赞同：3
> 
> 时间：2012-05-17T13:52:03.517
> 
> 标签：python, regex, perl, unicode

我想从二进制（“.exe”）文件中获取 Unicode 字符串。

[![](../Images/6614df98fdac74efa78df0bd050f1b92.png)](https://i.stack.imgur.com/saNxj.png)

当我使用这样的代码时：

```
 `unicode_str = re.compile( u'[\u0020-\u007e]{1,}',re.UNICODE )` 
```

它有效，但它只返回分隔符号，所以当我尝试将量词更改为 3 时：

Python： `unicode_str = re.compile( u'[\u0020-\u007e]{3,}',re.UNICODE )`

珀尔： `my @a = ( $file =~ /[\x{0020}-\x{007e}]{3,}/gs );`

我只得到 ASCII 符号，所有 Unicode 符号都消失了。

我在哪里犯了错误，或者我可能对Unicode一无所知？

* * *

评论中的代码：

Python：

```
File = open( sys.argv[1], "rb" )
FileData = File.read()
File.close()
unicode_str = re.compile( u'[\u0020-\u007e]{3,}',re.UNICODE )
myList = unicode_str.findall(FileData)
for p in myList:
    print p 
```

珀尔：

```
$/ = "newline separator";
my $input = shift;
open( File, $input );
my $file = <File>;
close( File );
my @a = ( $file =~ /[\x{0020}-\x{007e}]{3,}/gs );
foreach ( @a ) { print "$_\n"; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T00:04:08.377

有人已经编写了一个实用程序来满足您的需求：

[http://technet.microsoft.com/en-us/sysinternals/bb897439.aspx](http://technet.microsoft.com/en-us/sysinternals/bb897439.aspx)

```
usage: strings [-a] [-f offset] [-b bytes] [-n length] [-o] [-q] [-s] [-u] <file or directory>

Strings takes wild-card expressions for file names, and additional command line parameters are defined as follows:

-a  Ascii-only search (Unicode and Ascii is default)
-b  Bytes of file to scan
-f  File offset at which to start scanning.
-o  Print offset in file string was located
-n  Minimum string length (default is 3)
-q  Quiet (no banner)
-s  Recurse subdirectories
-u  Unicode-only search (Unicode and Ascii is default)  

To search one or more files for the presence of a particular string using strings use a command like this:

strings * | findstr /i TextToSearchFor 
```

**编辑：**

Try this if you want to implement it in Python, but you'll have to decide what range of Unicode characters you're looking for and search for it as UTF-16LE. Many pairs of characters look like valid printable Unicode. I don't know what algorithm `strings` uses

```
import re
data = open('c:/users/metolone/util/windiff.exe','rb').read()

# Search for printable ASCII characters encoded as UTF-16LE.
pat = re.compile(ur'(?:[\x20-\x7E][\x00]){3,}')
words = [w.decode('utf-16le') for w in pat.findall(data)]
for w in words:
    print w 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:46:26.260

```
use Win32::Exe;
my $exe = Win32::Exe->new('foo.exe');
my $inforef = $exe->get_version_info;
printf "%s: %s\n", $_, $inforef->{$_} for qw(Comments CompanyName
    FileDescription FileVersion InternalName LegalCopyright
    LegalTrademarks OriginalFilename ProductName ProductVersion); 
```

* * *

当您处理通用 UTF16-BE 数据时，请使用[Encode](http://p3rl.org/Encode)库：

```
use Encode qw(decode encode);
my $octets = # extracted from the exe
    "\x00\x73\x00\x6f\x00\x66\x00\x74\x00\x20\x00\x43\x00\x6f" .
    "\x00\x70\x00\x6f\x00\x72\x00\x61\x00\x74\x00\x69\x00\x6f";
my $characters = decode 'UTF16-BE', $octets, Encode::FB_CROAK;
# 'soft Coporatio' 
```

# php - 内置识别每个浏览器窗口的方法

> ID：10637058
> 
> 赞同：1
> 
> 时间：2012-05-17T13:52:11.053
> 
> 标签：php, html, http, cross-browser

是否存在跨浏览器唯一标识每个浏览器窗口的方法？
我需要存储一些窗口独有的值。
即使用户在同一个浏览器上打开同一个站点的两个窗口。

不涉及 Ajax，每次单击链接都会加载一个新页面。

我将如何从服务器访问该名称？（为此，假设我使用 php，但任何其他语言的示例也很好）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:55:46.320

您可以通过在所有 url 的查询字符串中放置和维护唯一参数来识别窗口。例如，如果当前 url 是，`/foo.php?windowid=abhn7y76g7hygy7yhnui98u8mc`那么该页面 html 中的*每个*url 将具有与 url 和文档中其他的 url 不同的 id。uniqid() 非常适合此操作，因为它使用时间，因此它们按字典顺序增加 id。

您需要处理的一个极端情况是有人打开完全相同的链接两次（可能是通过单击，或者可能是通过复制粘贴 url 并手动打开一个新窗口）。我认为唯一真正的解决方案是让服务器跟踪已使用的 id，如果它注意到对相同 id 的第二次请求，它会将请求重定向到相同的 url，但是是一个新的 id。这将在所有浏览器窗口中保持唯一的 ID。

再三考虑，甚至不必费心将 id 附加到 html 中的 url。如果没有 id，只需让服务器执行逻辑，使用新 id 重定向到相同的 url。如果 id，并且该 id 之前已被使用，则重定向到具有新 id 的相同 url。

确保不为 html 页面发送缓存标头，因为如果使用了后退按钮，您需要浏览器重新检查您的服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T14:09:51.757

`window.name`可以通过 JavaScript 设置。奇怪的是，它还可以保存几兆字节的字符串数据，有时用作客户端存储。

您必须在每个请求中将名称传递回服务器，以便知道调用者中的哪个窗口。

# symfony - FOSUserBundle 登录表单和 symfony2 架构

> ID：10637063
> 
> 赞同：0
> 
> 时间：2012-05-17T13:52:23.890
> 
> 标签：symfony, fosuserbundle

我有一个现有的数据库，并且正在使用 FosUserBundle 来登录我的用户。我必须添加 Salt 字段来编码我的实体的密码。但是在现有的数据库中，密码没有编码！如何对我拥有的所有用户密码进行编码？是否有任何 APP/控制台命令来生成 Salt 和编码密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:52:36.827

Mb 为时已晚，但我认为您忘记在 app/config/security.yml 中选择编码器，如果您使用 fosuserbundle 注册表单创建用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-27T23:45:34.890

You need create symfony console command,and create method for encode passwords, get all user, in foreach encode each password. [https://symfony.com/doc/current/security/password_encoding.html](https://symfony.com/doc/current/security/password_encoding.html)

Note, you need add in app/config/security.yml next code:

```
security:
    encoders:
        FOS\UserBundle\Model\UserInterface: bcrypt 
```

# c# - 创建 BitmapImage 并为其应用特定的颜色

> ID：10637064
> 
> 赞同：3
> 
> 时间：2012-05-17T13:52:26.340
> 
> 标签：c#, wpf

我被卡住了如何 `BitmapImage` 根据一些**颜色值**进行创建？

例如，我有字符串“ *Black* ”，所以我需要黑色**BitmapImage**。

怎么可能做到？

谢谢！

-- 更新（我把这段代码放在**@StephenChung 上**）

这个想法是用任何不透明度来做 Grid 并且不对其子应用不透明度。所以我用我需要的任何颜色创建图像并为其应用不透明度。

```
BitmapSource bs = CreateBitmapSource(GetBackgroundColorValue());
// and here I use method of @StaWho CreateBitmapSource()
ImageBrush ib2 = new ImageBrush(bs);
ib2.Opacity = Opacity;
ib2.Stretch = Stretch.Fill;
RootGrid.Background = ib2; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T14:18:57.113

您可以`ImageBrush`从以下位置创建`BitmapSource`：

```
 private BitmapSource CreateBitmapSource(System.Windows.Media.Color color)
    {
        int width = 128;
        int height = width;
        int stride = width / 8;
        byte[] pixels = new byte[height * stride];

        List<System.Windows.Media.Color> colors = new List<System.Windows.Media.Color>();
        colors.Add(color);
        BitmapPalette myPalette = new BitmapPalette(colors);

        BitmapSource image = BitmapSource.Create(
            width,
            height,
            96,
            96,
            PixelFormats.Indexed1,
            myPalette,
            pixels,
            stride);

        return image;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:15:18.963

例子：

```
System.Drawing.Bitmap flag = new System.Drawing.Bitmap(10, 10);
for( int x = 0; x <  flag.Height; ++x )
    for( int y = 0; y < flag.Width; ++y )
        flag.SetPixel(x, y, Color.Black);
for( int x = 0; x < flag.Height; ++x )
    flag.SetPixel(x, x, Color.Black); 
```

和转换：

```
private BitmapImage Bitmap2BitmapImage(Bitmap bitmap) 
{ 
    using (MemoryStream ms = new MemoryStream()) 
    { 
        bitmap.Save(ms, ImageFormat.Png); 
        ms.Position = 0; 
        BitmapImage bi = new BitmapImage(); 
        bi.BeginInit(); 
        bi.StreamSource = ms; 
        bi.EndInit(); 

        return bi; 
    } 
} 
```

# php - 如何在 PHP 中处理登录注销会话和 gcache？

> ID：10637073
> 
> 赞同：0
> 
> 时间：2012-05-17T13:53:18.413
> 
> 标签：php, session, caching

我使用 gcache 将整个网站页面缓存为 HTML，然后我只阅读它并向用户显示。它看起来像这样：

```
$enableCache = true; 
if ($enableCache)
{
    include("gcache.php");
    $cache = new gCache;
    $cache->folder = "temp/";
    $id = join("", $_GET);
    $id = ereg_replace("[^A-Za-z0-9]", "", $id);
    $cache->contentId=$id;
    $cache->timeout = 5; 
    /* its mean gCache cached the whole page */
    /* so, gcache, decide if he must response the compressed or */
    /* uncompressed cache*/
    $cache->isPage = true; 
    if ($cache->Valid()) {
        echo $cache->content;
        die;
    }
    $cache->capture();
} 
```

并且工作正常。现在我在网站的标题中添加了一个链接“登录”。当人们点击它时，它会将人重定向到他/她提供信用的子页面，设置会话参数（在调用 session_start 之前）：

```
 $_SESSION['theUser'] = $userId;
  header( "refresh:1;url=http://mysite.com"); 
```

并且人员被重定向到 mysite.com。但问题是他/她看到该站点是从缓存中获取的。所以在右上角再次出现“登录”，但我设置了当设置 $_SESSION['theUser'] 时它应该显示它并提供一个注销链接。但它不显示，因为它返回给用户未登录的网站版本。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:05:18.343

我假设，以这种方式使用缓存的原因是为了最小化服务器负载和响应时间。但这可以通过不使用第三方插件/类/东西的更简单的方法来实现：

```
<?php
    global $cachefile;
    //encode cache file name with sha1 
    $cachefilename = sha1($_SERVER['REQUEST_URI']);
    //remove trailing slash
    $cachefile = rtrim(sys_get_temp_dir (),'\\/').DIRECTORY_SEPARATOR.$cachefilename.'.cache';
     // How long to keep cache file?
    $cachetime = 60*5;    //5min
    // Is cache file still fresh? If so, serve it.   
    if (file_exists($cachefile) && filesize($cachefile)>100 && time() - $cachetime < filemtime($cachefile)  )  {
      readfile($cachefile);
      exit;
    }

    function cacheOutputtoFile()   {
     global $cachefile;
     $webpage = ob_get_contents();
     if ($fp = fopen($cachefile, 'w+'))
        {
            // Do an exclusive lock
            if (flock($fp, LOCK_EX))
            { 
               // Truncate file 
               ftruncate($fp, 0); 
               fwrite($fp, $webpage);
               fclose($fp);
            }
        }
    }

    ob_start();
    register_shutdown_function("cacheOutputtoFile"); 
```

**注意**：当调用回调函数时，您必须使用`register_shutdown_function()`而不是使用`cacheOutputtoFile()` as 参数，`ob_start()`因为套接字已经关闭，然后客户端不会得到回显`$webpage`输出。

**用法**：将此文件放在您的根服务器文件夹（或任何您想要的位置）中，并要求它位于您要缓存的每个页面的顶部。

```
require_once("cacheable.php"); 
```

# asp.net - 为什么我必须在 ASP.NET 中继器中单击按钮两次才能触发命令？

> ID：10637074
> 
> 赞同：1
> 
> 时间：2012-05-17T13:53:24.453
> 
> 标签：asp.net, repeater

我有一个 ASP.NET 页面，其中包含以下 3 个主要区域：

1 - 左侧用于过滤结果的复选框列表

2 - 在中间显示匹配结果的中继器（每个项目都有一个按钮）

3 - 在右侧显示所选项目的中继器

在初始页面加载时，页面将显示数据绑定复选框并将显示所有结果（因为在过滤器中没有检查任何内容）。当用户选中或取消选中复选框时，页面将重新加载并且匹配结果将发生变化。到目前为止，这部分效果很好。

在结果重复器中，每个项目都有一个按钮。当用户单击结果中某个项目的按钮时，想法是该项目将被添加到右侧的 Selected Repeater 中。发生的事情是，在我选中或取消选中过滤器复选框后 -我*第*一次尝试单击结果中继器中的按钮，没有任何反应。页面只是重新加载。然后，如果我再次单击该按钮，Repeater 命令将触发，并且该项目将被添加到右侧的 Repeater。然后，只要我不更改任何复选框，我就可以单击其中一个命令按钮，它会立即工作。但是，如果我选中过滤器区域中的复选框之一（这会导致结果重新绑定），那么我必须单击其中一个按钮两次才能触发它。

我有一种感觉，这与 ViewState 有关，但我不知道。有谁知道为什么会发生这种情况？

下面是我的 ASPX 页面代码和后面的代码。

ASPX 代码：

```
<h3>Filters</h3>
<asp:Repeater ID="rptTechnologies" runat="server" OnItemDataBound="rptFacet_ItemDataBound">
  <HeaderTemplate><h4>Technology</h4></HeaderTemplate>
  <ItemTemplate><asp:CheckBox ID="chkFacet" runat="server" AutoPostBack="true" OnCheckedChanged="chkFacet_Changed" /><br /></ItemTemplate>
</asp:Repeater>
<asp:Repeater ID="rptVerticals" runat="server" OnItemDataBound="rptFacet_ItemDataBound">
  <HeaderTemplate><h4>Vertical</h4></HeaderTemplate>
  <ItemTemplate><asp:CheckBox ID="chkFacet" runat="server" AutoPostBack="true" OnCheckedChanged="chkFacet_Changed" /><br /></ItemTemplate>
</asp:Repeater>
<asp:Repeater ID="rptIndustries" runat="server" OnItemDataBound="rptFacet_ItemDataBound">
  <HeaderTemplate><h4>Industry</h4></HeaderTemplate>
  <ItemTemplate><asp:CheckBox ID="chkFacet" runat="server" AutoPostBack="true" OnCheckedChanged="chkFacet_Changed" /><br /></ItemTemplate>
</asp:Repeater>
<asp:Repeater ID="rptSolutions" runat="server" OnItemDataBound="rptFacet_ItemDataBound">
  <HeaderTemplate><h4>Solution</h4></HeaderTemplate>
  <ItemTemplate><asp:CheckBox ID="chkFacet" runat="server" AutoPostBack="true" OnCheckedChanged="chkFacet_Changed" /><br /></ItemTemplate>
</asp:Repeater>

<h3>Results</h3>
<asp:Repeater ID="rptMatchingSlides" runat="server" OnItemDataBound="rptMatchingSlides_ItemDataBound" OnItemCommand="rptMatchingSlides_Command">
  <ItemTemplate>
    <h4><asp:Literal ID="litName" runat="server"></asp:Literal></h4>
    <asp:Button ID="btnSelect" runat="server" Text="Select" CommandName="Select" />
  </ItemTemplate>
  <SeparatorTemplate><hr /></SeparatorTemplate>
</asp:Repeater>

<h3>Selected</h3>
<asp:Repeater ID="rptSelectedSlides" runat="server" OnItemDataBound="rptSelectedSlides_ItemDataBound">
  <ItemTemplate>
    <h4><asp:Literal ID="litName" runat="server"></asp:Literal></h4>
  </ItemTemplate>
  <SeparatorTemplate><hr /></SeparatorTemplate>
</asp:Repeater> 
```

这是后面的代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            this.BindData();
        }
    }

    public List<string> SelectedSlides
    {
        get 
        {
            if (Session["SelectedIDs"] != null)
            {
                string[] _ids = Session["SelectedIDs"].ToString().Split(new char[] { '|' });
                List<String> _retVal = new List<string>();
                foreach (string _id in _ids)
                {
                    _retVal.Add(_id);
                }
                return _retVal;
            }
            else 
            {
                return new List<string>();
            }
        }
        set 
        {
            //Set the session value
            string _val = "";
            foreach (string _id in value)
            {
                if (_val == "")
                {
                    _val = _id;
                }
                else 
                {
                    _val += "|" + _id;
                }
            }
            Session["SelectedIDs"] = _val;
        }
    }

    protected void BindData()
    {
        //Filters
        rptTechnologies.DataSource = Repository.GetTaxonomyItems();
        rptTechnologies.DataBind();

        rptVerticals.DataSource = Repository.GetTaxonomyItems();
        rptVerticals.DataBind();

        rptIndustries.DataSource = Repository.GetTaxonomyItems();
        rptIndustries.DataBind();

        rptSolutions.DataSource = Repository.GetTaxonomyItems();
        rptSolutions.DataBind();

        this.BindMatchingSlides();
    }

    protected void BindMatchingSlides()
    {
    ...build list of ids from checkboxes...

        rptMatchingSlides.DataSource = Repository.GetMatchingSlides(_selectedIDs);
        rptMatchingSlides.DataBind();
    }

    protected void BindSelectedSlides()
    {
        if (this.SelectedSlides.Count > 0)
        {
            rptSelectedSlides.DataSource = this.SelectedSlides;
            rptSelectedSlides.DataBind();
        }
        else 
        {
            divSelectedSlides.Visible = false;
        }
    }

    protected void rptMatchingSlides_ItemDataBound(object sender, RepeaterItemEventArgs e)
    {
        if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
        {
            Literal _litName = (Literal)e.Item.FindControl("litName");
            Button _btnSelect = (Button)e.Item.FindControl("btnSelect");

            _litName.Text = ...set name here...

            _btnSelect.CommandArgument = ...use unique ID of item from database...
            _btnSelect.ID = "btnSelect_" + e.Item.ItemIndex;
        }
    }

    protected void rptMatchingSlides_Command(object sender, RepeaterCommandEventArgs e)
    {
        if (e.CommandName == "Select")
        {
            Item _slide = ...get data from database based on Command Argument...
            if (_slide != null)
            {
                List<string> _selectedSlides = this.SelectedSlides;
                _selectedSlides.Add(_slide.ID.ToString());
                this.SelectedSlides = _selectedSlides;
            }
            this.BindSelectedSlides();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:11:13.697

感谢 Jeremy - 删除我设置 ID 的代码行修复了它。嗬！在其他地方我读到您需要为中继器中按钮的 ID 设置唯一值。所以这一定是罪魁祸首。感谢杰里米。

# c# - URL 正则表达式 - 无法正常工作

> ID：10637075
> 
> 赞同：1
> 
> 时间：2012-05-17T13:53:27.380
> 
> 标签：c#, .net, regex

我正在使用以下正则表达式来查找文本中是否存在 url，但它似乎错过了一些 URL，例如：

*   `youtube.be/8P0BxJO`
*   `youtube.com/watch?v=VrmlFL`

还有一些 bit.ly 链接（但不是全部）

```
Match m = Regex.Match(nc[i].InnerText, 
   @"(http(s)?://)?([\w-]+\.)+[\w-]+(/\S\w[\w- ;,./?%&=]\S*)?");

if (m.Success)
{
    MessageBox.Show(nc[i].InnerText);
} 
```

任何想法如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T02:22:34.827

看到[这个](https://stackoverflow.com/questions/758135/c-sharp-code-to-linkify-urls-in-a-string)相关的问题，第一个答案应该可以帮助你。该建议既找到链接，然后替换它们，所以显然只需要你需要的。 [这篇](http://snipplr.com/view/13286/)文章和[这篇](http://www.digitalcoding.com/Code-Snippets/C-Sharp/C-Code-Snippet-Extract-URLs.html)文章是不同的方法，应该能得到或多或少相同的结果。

另一种（可能更可靠）非正则表达式方法是通过分割空格和标点符号来标记字符串，然后使用[Uri.IsWellFormedUriString](http://msdn.microsoft.com/en-us/library/system.uri.iswellformeduristring.aspx)检查标记以查看它们是否是有效的 uri （它仅适用于格式良好的 uri，如[这个](https://stackoverflow.com/questions/4835269/how-to-check-that-a-uri-string-is-valid)问题指出）。

# css - 下拉菜单 -> Firefox 在正文边距设置为 0 时显示线条

> ID：10637082
> 
> 赞同：0
> 
> 时间：2012-05-17T13:53:58.193
> 
> 标签：css, firefox

我正在实现一个下拉菜单，到目前为止只使用 css。一切都按预期工作，但是 Firefox 中有一个错误。

将鼠标悬停在父元素上时，下拉菜单会正确显示。然而，当下拉元素再次折叠时，firefox 会在整个身体上显示出奇怪的线条。第一次可能不会正确，但最终会显示这些线条，这让我抓狂。

奇怪的是，这个问题只发生在身体的边距设置为零时。

这里有一个演示：

```
http://78.46.130.4:8053/drop_menu_test/ 
```

有任何想法吗？

# c# - 使用 C# 官方驱动程序 MongoDB 插入嵌套数组

> ID：10637083
> 
> 赞同：1
> 
> 时间：2012-05-17T13:54:07.930
> 
> 标签：c#, mongodb, mongodb-.net-driver

这是我的确切架构：

```
{
  "_id" : ObjectId("4fb4fd04b748611ca8da0d48"),
  "Name" : "Categories",
  "categories" : [{
      "_id" : ObjectId("4fb4fd04b748611ca8da0d46"),
      "name" : "Naming_Conventions",
      "sub-categories" : [{
          "_id" : ObjectId("4fb4fd04b748611ca8da0d47"),
          "name" : "Namespace_Naming",
          "standards" : []
        }]
    }]
} 
```

如您所见，我有一个名为“standards”的数组嵌套在其中。我将如何使用 C# 驱动程序以编程方式插入其中？我已经尝试了我在网上找到的所有示例，但没有一个有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:52:58.040

像下面这样的东西。显然，如果其中任何一个在到达它的过程中不存在，您将得到一个空引用异常。

```
var doc = collection.FindOne(Query.EQ("_id", new ObjectId("4fb4fd04b748611ca8da0d48")));

var standards = doc["categories"]
    .AsBsonArray[0]
    .AsBsonDocument["sub-categories"]
    .AsBsonArray;

standards.Add(new BsonDocument());

collection.Save(doc); 
```

# django - 在 Django 的模板中显示数据的最佳方式是什么？

> ID：10637084
> 
> 赞同：0
> 
> 时间：2012-05-17T13:54:13.113
> 
> 标签：django, templates, model

鉴于以下模型和视图，对于任何给定的俱乐部，我试图在模板中显示该俱乐部的可用球场（“球场”）和可用时间（“avail_time”）。我很难做到这一点。

模型：

```
from django.db import models

class Club(models.Model):
    establishment = models.CharField(max_length=200)
    address = models.CharField(max_length=200)
    def __unicode__(self):
    return self.establishment

class Available(models.Model):
    club = models.ForeignKey(Club)
    court = models.CharField(max_length=200)
    avail_time = models.DateTimeField('available time')
    def __unicode__(self):
        return self.court

class Taken(models.Model):
    club = models.ForeignKey(Club)
    court = models.ForeignKey(Available)
    taken_time = models.DateTimeField('taken time')
    userid = models.EmailField(max_length = 75) 
```

看法：

```
def avail_times(request, club_id):
    p = get_object_or_404(Club,pk=club_id)
    return render_to_response('reserve/templates/avail_times.html', {'club':p}) 
```

模板：

```
{% for court in club.court_set.all %}
{{court.court }}
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:02:26.217

好吧，你似乎没有 Court 模型，所以我不确定你为什么要打电话给`court_set.all`。您可以`club.available_set.all`用来显示该俱乐部的可用实例列表，这可能就是您的意思。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:52:08.400

第一步是适当地设置你的模型。俱乐部有法庭，法庭有可用时间。俱乐部没有可用时间，这就是您现在设置的方式。此外，“已占用”是可用时间的*状态*；它不应该是模型本身。尝试类似：

```
class Club(models.Model):
    establishment = models.CharField(max_length=200)
    address = models.CharField(max_length=200)

    def __unicode__(self):
        return self.establishment

class Court(models.Model):
    club = models.ForeignKey(Club, related_name='courts')
    name = models.CharField(max_length=200)

class CourtTime(models.Model):
    AVAILABLE = 0
    TAKEN = 1
    STATUS_CHOICES = (
        (AVAILABLE, 'Available'),
        (TAKEN, 'Taken'),
    )

    court = models.ForeignKey(Club, related_name='times')
    time = models.DateTimeField('available time')
    status = models.PositiveSmallIntegerField(choices=STATUS_CHOICES, default=STATUS_CHOICES[AVAILABLE])

    def __unicode__(self):
        return self.court 
```

然后，我建议一个自定义管理器`CourtTime`返回可用/采用的查询集：

```
class CourtTimeQuerySet(models.query.QuerySet):
    def available(self):
        return self.filter(status=CourtTime.STATUS_CHOICES[CourtTime.AVAILABLE])

    def taken(self):
        return self.filter(status=CourtTime.STATUS_CHOICES[CourtTime.TAKEN])

class CourtTimeManager(models.Manager):
    use_for_related_fields = True

    def get_query_set(self, *args, **kwargs):
        return CourtTimeQuerySet(self.model)

    def available(self, *args, **kwargs):
        return self.get_query_set().available(*args, **kwargs)

    def taken(self, *args, **kwargs):
        return self.get_query_set().taken(*args, **kwargs) 
```

然后，将其添加到您的模型中：

```
class CourtTime(models.Model):
    ...
    objects = CourtTimeManager() 
```

一切就绪后，您只需在模板中执行以下操作：

```
{% for court in club.courts.all %}
    <h2>{{ court.name }}</h2>
    <ul>
        {% for time in court.times.available %}
        <li>{{ time|date:"m/d/Y g:i A" }}</li>
        {% endfor %}
    </ul>
{% endfor %} 
```

# c++ - 如何使用类模板完全专门化功能模板？

> ID：10637089
> 
> 赞同：0
> 
> 时间：2012-05-17T13:54:26.570
> 
> 标签：c++, template-specialization, explicit-specialization

```
template <typename T>
void foo(T t)
{
   ... // do stuff with type T
}

template <typename T>
class class_template
{
    // class body
};

template<>                       // failed attempt at full specialization
void foo(class_template<T> t)    // which doesn't work of course
{
    //full specialization for all classes of class_template
} 
```

在上面的代码中，我如何使用类模板明确地专门化函数 foo？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:56:31.830

> 在上面的代码中，我如何使用类模板明确地专门化函数 foo？

你不能。这就是部分专业化的重点。但它们不适用于功能。

你有两个解决方案：

*   重载函数。这通常有效。
*   将工作参考一个*可以*部分专业化的类模板。也就是说，在您的函数内部，调用类模板中的（静态）函数，并专门*化*.

# mysql - MySQL 创建表时出现错误 1005

> ID：10637090
> 
> 赞同：0
> 
> 时间：2012-05-17T13:54:31.153
> 
> 标签：mysql, sql, mysql-error-1005

我在 MySQL Workbench 上创建了一个新数据库，但出现了很多错误。所以我尝试手动创建。但是我也遇到了另一个错误，我不明白发生了什么。

这是我的 SQL 代码：

```
CREATE DATABASE data;

USE data;

CREATE  TABLE IF NOT EXISTS `TB_CHILD` (
 `ID` INT NOT NULL AUTO_INCREMENT ,
 `NAME` VARCHAR(250) NOT NULL ,
 `STATUS` ENUM('A','I') NOT NULL ,
 PRIMARY KEY (`ID`) )
ENGINE = InnoDB;

CREATE  TABLE IF NOT EXISTS `TB_PARENT` (
 `ID` INT NOT NULL AUTO_INCREMENT ,
 `TITLE` VARCHAR(250) NOT NULL ,
 `CHILD` INT NOT NULL ,
 `STATUS` ENUM('A','I') NOT NULL ,
 PRIMARY KEY (`ID`) ,
 INDEX `FK_PARENT_CHILD` (`CHILD` ASC) ,
 CONSTRAINT `FK_PARENT_CHILD`
   FOREIGN KEY (`CHILD` )
   REFERENCES `TB_CHILD` (`ID` ))
ENGINE = InnoDB; 
```

我总是收到错误代码 1005。我使用的是 Mysql Server 5.5。我的代码有什么问题？

编辑：使用代码 USE 数据更新；但我仍然得到同样的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:02:05.800

使用创建的数据库“数据”。

```
use data; 
```

您的数据库只需要创建一次，但每次开始mysql会话时都必须选择它使用。如果您没有选择数据库，则创建表失败。这样您就会收到错误 1005。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T14:27:59.193

您试图为尚不存在的字段创建索引：

```
INDEX `FK_PARENT_CHILD` (`CHILD` ASC) ,
 CONSTRAINT `FK_PARENT_CHILD`
   FOREIGN KEY (`CHILD` )
   REFERENCES `TB_CHILD` (`ID` )) 
```

尝试恢复订单：

```
CONSTRAINT `FK_PARENT_CHILD`
   FOREIGN KEY (`CHILD` )
   REFERENCES `TB_CHILD` (`ID` )),
INDEX `FK_PARENT_CHILD` (`CHILD` ASC) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T13:58:14.247

您创建了数据库，但没有选择它来创建表，请尝试：

```
CREATE DATABASE data;

use data;

CREATE  TABLE IF NOT EXISTS `TB_CHILD` (
... 
```

# javascript - Javascript计算函数大括号中的键

> ID：10637091
> 
> 赞同：0
> 
> 时间：2012-05-17T13:54:31.580
> 
> 标签：javascript, key, braces

我这样调用一个函数：

```
update_insert('information',{
    element_id: 1,
    type: 'menu',
    info: 'Hi how are ya?',
    new_window: ''
}); 
```

功能是：

```
function update_insert(table,data){
    alert(data.length);
} 
```

我试图获取插入函数的键的数量，并最终通过循环动态地获取键的名称。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T13:56:43.630

对象不像 JavaScript 中的数组那样具有 .length 属性。您需要使用一个函数来计算对象中的项目数：

```
getObjectLength = function(obj) {

    var size = 0, key;

    for (key in obj) {
        if (obj.hasOwnProperty(key))
            size++;
    }

    return size;
} 
```

**编辑：**

并从对象中获取密钥：

```
getObjectKeys = function(obj) {

    var keys = [];

    for (var key in obj) {
        keys.push(key);
    }

    return keys;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T13:56:33.563

您可以使用以下功能获取密钥（在旧浏览器中可以安全使用）...

```
var getObjectKeys = function(obj) {

    if (Object.keys && typeof Object.keys == "function") {
        return Object.keys(obj);
    }

    var prop, keys = [];

    for (prop in obj) {
        if (obj.hasOwnProperty(prop)) {
            keys.push(prop);
        }
    }

    return keys;
} 
```

[js小提琴](http://jsfiddle.net/wPcSn/)。

或者，使用和使用旧浏览器`Object.keys()`的等效项。`[shim][2]`

您可以检查`length`返回的属性`Array`以确定键的数量。

* * *

如果您想挖掘原型链上的所有可枚举属性，您可以使用...

```
var getObjectKeysIncludingInherited = function(obj) {
    var keys = [],
        i = 0;

    for (keys[i++] in obj);

    return keys;
} 
```

[js小提琴](http://jsfiddle.net/YCt4N/)。

* * *

或者，您可能*真的想*使用`length`对象的属性来执行此操作，但**请不要**。增加原生 JavaScript 对象被认为有些危险，而且有点令人困惑（`Object`s 没有`length`属性，但`Array`s 有）并且它在旧浏览器中不起作用......

```
Object.defineProperty(Object.prototype, "length", {
    get: function() {
        return Object.keys(this).length;
    }        
}); 
```

[js小提琴](http://jsfiddle.net/CDS7c/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T13:57:42.110

大概是这样的吧？

```
function update_insert(table,data){
    var dataLength = 0, keys = [];

    for(prop in data) {
        if(data.hasOwnProperty(prop)) {
            dataLength++;
            keys.push(prop);
        }
    }
} 
```

数组实际上是具有自定义`length`属性（和其他一些东西`:P`）的对象，因此并非所有对象都具有`length`属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T13:57:58.010

```
var names = new Array();

for(name in data)
{
  if(data.hasOwnProperty(name))
  {
    names.push(name); 
  }
}

names.length - will give you what you need. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T13:58:09.433

```
var keys = [];
for(var k in data) {
  if(Object.prototype.hasOwnProperty(data, k)) {
    keys.push(data[k]);
  }
}
k.length //size of keys 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-17T14:01:09.483

如果您是 jQuery 粉丝或潜在用户：

```
var size = 0;

$.each(obj, function(key, value) {
    alert('key = ' + key);
    alert('value = ' + value);
    size++;
});

alert(size); 
```

# java - 音频输入流不起作用

> ID：10637093
> 
> 赞同：1
> 
> 时间：2012-05-17T13:54:38.970
> 
> 标签：java, embedded-resource, javasound

当我嵌入我的资源并使用以下内容时：

```
 getClass().getResourceAsStream("sound.wav") 
```

我得到以下信息：

```
could not get audio input stream from input stream 
```

如果我直接链接到该文件，它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T02:46:35.540

> 如果我直接链接到该文件，它工作正常。

看来你的意思是`File`或者`URL`是那样。（如果是，您能否确认 & 您指的是哪一个？）在这种情况下，您经常会发现 Java Sound 需要一个 repositionable `InputStream`，这（奇怪地）不是`getResourceAsStream()`返回的。

该问题的解决方案是从`URL`. 使用以下方式获取 URL：

```
URL urlToClip = this.getClass().getResource("sound.wav");
// sanity check!
System.out.println("urlToClip: " + urlToClip); 
```

# jquery - jQuery UI 可排序容差选项未按预期工作

> ID：10637095
> 
> 赞同：14
> 
> 时间：2012-05-17T13:54:45.527
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

这是该选项[的 jQuery UI 文档中的部分](http://jqueryui.com/demos/sortable/)`tolerance`：

> 这是拖动期间重新排序的行为方式。可能的值：“相交”、“指针”。在某些设置中，“指针”更自然。
> 
> intersect: draggable 与 droppable 重叠至少 50%

默认值为`intersect`，但如果鼠标指针不在可排序项目上方，则不会发生排序，无论拖动的元素至少超过另一个可排序项目的 50%（我期望的功能）这发生在演示页面上好（上面链接）

这是 jQuery UI 中的错误，还是我理解错误？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-22T09:30:46.020

对于那些有同样问题的人，这是我使用的解决方法：

```
$('#sortable').sortable({
    axis: 'x',
    sort: function (event, ui) {
        var that = $(this),
            w = ui.helper.outerWidth();
        that.children().each(function () {
            if ($(this).hasClass('ui-sortable-helper') || $(this).hasClass('ui-sortable-placeholder')) 
                return true;
            // If overlap is more than half of the dragged item
            var dist = Math.abs(ui.position.left - $(this).position().left),
                before = ui.position.left > $(this).position().left;
            if ((w - dist) > (w / 2) && (dist < w)) {
                if (before)
                    $('.ui-sortable-placeholder', that).insertBefore($(this));
                else
                    $('.ui-sortable-placeholder', that).insertAfter($(this));
                return false;
            }
        });
    },
});​ 
```

这适用于水平排序，垂直变化到`outerWidth`任何地方。`outerHeight``position.left``position.top`

[这是一个完整的工作示例](http://jsfiddle.net/8hjhV/2/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-15T00:04:57.170

我有大小不均的可分类项目，这让事情变得更糟。我已经修改了 dioslaska 的代码，以在处理程序的底部通过孩子的底部（向下移动时）和顶部相同的情况下更改顺序......

```
sort: function (event, ui) {
    var that = $(this),
        draggedHeight = ui.helper.outerHeight(),
        originalTop = ui.originalPosition.top,
        draggedTop = ui.helper.position().top,
        draggedBottom = draggedTop + draggedHeight;
    that.children().each(function () {
        if ($(this).hasClass('ui-sortable-helper') || $(this).hasClass('ui-sortable-placeholder')) {
            return true;
        }
        var childTop = $(this).position().top,
            childHeight = $(this).outerHeight(),
            childBottom = childTop + childHeight,
            isChildAfter = originalTop < childTop,
            largeTop,largeBottom,smallTop,smallBottom;
        if (childHeight > draggedHeight) {
            largeTop = childTop;
            largeBottom = childTop + childHeight;
            smallTop = draggedTop;
            smallBottom = draggedBottom;
        } else {
            smallTop = childTop;
            smallBottom = childTop + childHeight;
            largeTop = draggedTop;
            largeBottom = draggedBottom;
        }
        if (smallBottom > largeTop || smallTop < largeBottom) {
            if (isChildAfter && draggedBottom >= childBottom) {
                $('.ui-sortable-placeholder', that).insertAfter($(this));
            } else if (!isChildAfter && draggedTop <= childTop) {
                $('.ui-sortable-placeholder', that).insertBefore($(this));
                return false;
            }
        }
    });
} 
```

您可以看到重叠检测比以前有点棘手，因为您可能将大项目拖到小项目上，反之亦然。

它并不完美，但它是对默认功能的巨大改进。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-14T14:13:23.953

这是@dioslaska 功能的补充。如果您需要在网格中排序（例如，您的元素是浮动的），您可以检查子元素的顶部位置，看看它是否在同一个“行”中，如下所示：

```
sort: function (event, ui) {
  var self = $(this),
      width = ui.helper.outerWidth(),
      top = ui.helper.position().top;//changed to ;

  self.children().each(function () {
    if ($(this).hasClass('ui-sortable-helper') || $(this).hasClass('ui-sortable-placeholder')) {
      return true;
    }
    // If overlap is more than half of the dragged item
    var distance = Math.abs(ui.position.left - $(this).position().left),
        before = ui.position.left > $(this).position().left;

    if ((width - distance) > (width / 2) && (distance < width) && $(this).position().top === top) {
      if (before) {
        $('.ui-sortable-placeholder', self).insertBefore($(this));
      } else {
        $('.ui-sortable-placeholder', self).insertAfter($(this));
      }
      return false;
    }
  });
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-08T21:29:58.060

这是我基于勾股定理和比较元素中心之间的距离的**网格布局**`sort`方法的实现：

 **```
$("#sortable").sortable({
    ...
    sort: sort_jQueryBug8342Fix
});

function sort_jQueryBug8342Fix(e, ui) {

    // ui-sortable-helper: element being dragged
    // ui-sortable-placeholder: invisible item on the original place of dragged item
    var container = $(this);
    var placeholder = container.children('.ui-sortable-placeholder');

    var draggedCenterX = ui.helper.position().left + ui.helper.outerWidth()/2;
    var draggedCenterY = ui.helper.position().top + ui.helper.outerHeight()/2;

    container.children().each(function () {
        var item = $(this);

        if(!item.hasClass( 'ui-sortable-helper' ) && !item.hasClass( 'ui-sortable-placeholder' ) ) {
            var itemCenterX = item.position().left + item.outerWidth()/2;
            var itemCenterY = item.position().top + item.outerHeight()/2;

            // Pythagorean theorem
            var distanceBetweenCenters = Math.sqrt(Math.pow(itemCenterX - draggedCenterX, 2) + Math.pow(itemCenterY - draggedCenterY, 2));

            var minDimension = Math.min(item.outerWidth(), item.outerHeight(), ui.helper.outerWidth(), ui.helper.outerHeight());
            var overlaps = distanceBetweenCenters < (minDimension / 2);

            if (overlaps) {
                if (placeholder.index() > item.index()) {
                    placeholder.insertBefore(item);
                } else {
                    placeholder.insertAfter(item);
                }
                container.sortable('refreshPositions');
                return false;
            }

        }
    });
} 
```

它适用于网格布局和宽度和高度尺寸接近的项目，例如 4:3 或 16:10 比例的图像缩略图。在这种情况下，它需要 50-60% 的重叠来触发排序。如果您有非常宽的元素，例如 300x50 像素（或不同大小的元素），那么我想它也可以，但是您必须将它们与 X 轴重叠更多，例如 90%。

注意：如果您正在对 Dropzone.js 元素进行排序，`&& item.hasClass('dz-preview')`则应将其添加到第一条`if`语句中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-17T14:28:30.643

这与您在 IE9、FF11 和 Chrome18 中描述的完全一样。

当鼠标至少高于 50% 时相交重叠。
我认为这是不正确的文档。

编辑：我在 JQuery Bugtracker 中没有发现与此相关的错误。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-03-18T04:14:09.240

稍微扩展 dioslaska 的答案。这是一个示例（我称之为）125% 重叠[http://jsfiddle.net/yj1wwtsd/4/](http://jsfiddle.net/yj1wwtsd/4/)。

这只会在您超过 25% 时翻转一个元素。在我的情况下，我结合了 droppable 和 sortable，当拖动的项目在翻转之前可以完全重叠另一个（以允许放置）时感觉更好。

特别值得注意的是最后一行的 jQueryUI hack。如果没有这个，它总是默认为相交容差，即使排序方法试图做一些不同的事情。这可能会与 jQueryUI 的未来版本（使用 1.11.2 测试）中断。

```
$('#sortable').sortable({
    axis: 'x',
    sort: function (event, ui) {
        var that = $(this);
        var w = ui.helper.outerWidth();
        var centreOfDraggedItem = ui.position.left + w/2;

        that.children().each(function () {
            if ($(this).hasClass('ui-sortable-helper') || $(this).hasClass('ui-sortable-placeholder')) 
                return true;
            var centreOfThisItem =  $(this).position().left + w/2;
            var dist = centreOfDraggedItem - centreOfThisItem;
            var before = centreOfDraggedItem > centreOfThisItem;
            if (Math.abs(dist) < w/2) {
                if (before && dist > w/4) { // moving right
                    $('.ui-sortable-placeholder').insertAfter($(this));
                    return false;
                }
                if (!before && dist < -(w/4)) { // moving left
                    $('.ui-sortable-placeholder').insertBefore($(this));
                    return false;
                }
            }
        });
    },
});
$('#sortable').data('ui-sortable')._intersectsWithPointer = function () {return false;}; 
```**

# math - 在屏幕上移动旋转的 3D 对象，使其在停止时朝向正确的方向

> ID：10637099
> 
> 赞同：1
> 
> 时间：2012-05-17T13:55:07.380
> 
> 标签：math, 3d, opengl-es-2.0, computational-geometry, pathgeometry

我想要实现的最好的例子就是这个 youtube 视频

[http://www.youtube.com/watch?v=53Tk-oGL2Uo](http://www.youtube.com/watch?v=53Tk-oGL2Uo)

组成“Atari”这个词的字母从屏幕边缘飞入旋转，然后排列成最后的单词。

我知道如何让一个对象在屏幕上移动，但是我如何计算旋转，以便当对象到达其最终位置时它面向正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:00:29.407

诀窍是让对象在特定时间（例如 t=5.0 秒）内实际处于正确位置，然后*向后*计算前一帧。

即在 5.0 秒之前，您将对象旋转`[angular velocity] * (5.0 - t)`并平移`[velocity] * (5.0 - t)`

如果你这样做，那么看起来物体会一起飞行并完美排列。但是您实际上所做的是将它们沿随机方向炸开并及时向后播放动画:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:11:15.317

这样做的正确方法是使用关键帧。您可以在任何 3D 编辑器中创建关键帧（我使用 MAX，但您可以使用 Blender）。您不一定需要使用实际的字符，即使是长方体就足够了。然后，您将需要导出这些动画帧（同样，在 MAX 中我将使用 ASE - [COLLADA](http://code.blender.org/index.php/2010/12/collada-importexport-team/)将与 Blender 一起使用）并在运行时加载它们或将它们转换为代码。

然后根据当前时间运行该动画就很简单了。

[这是](http://graffiti.codeplex.com/SourceControl/changeset/view/aa5018ffbecc#Graffiti.Core/Animation/IKeyframes.cs)我自己的库中的一个示例，它说明了这种技术。这样做一次会让你持续更长时间，从长远来看会给你带来更多的好处，而不是弄清楚如何在程序上做到这一点。

# java - ServletActionContext.getRequest().removeAttribute() 不工作

> ID：10637101
> 
> 赞同：0
> 
> 时间：2012-05-17T13:55:14.803
> 
> 标签：java, servlets

`ServletActionContext`稍后当我迭代这些属性时，我会从 bu 中删除一些`ServletActionContext`属性继续显示。

```
ServletActionContext.getRequest().removeAttribute("myCategory");
ServletActionContext.getRequest().removeAttribute("title");

for (Enumeration e = ServletActionContext.getRequest().getParameterNames();  e.hasMoreElements();) {
    parameterName = (String) e.nextElement();
    parameterValue = ServletActionContext.getRequest().getParameter(parameterName);
    System.out.println(parameterName +":"+ parameterValue); 
} 
```

控制台不断向我`myCategory:something`展示`title:otherthing`

任何人都可以看到有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:58:39.437

您删除的是`attribute`，但您正在显示`paramater`。这是两个不同的变量。

检查[ServletRequest.getParameterNames()](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletRequest.html#getParameterNames%28%29)和[ServletRequest.getAttributeNames()](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletRequest.html#getAttributeNames%28%29)

# iphone - 当唯一标识失败并且我有相同名字和姓氏的人时，如何消除多个 ABRecord 的冲突？

> ID：10637104
> 
> 赞同：2
> 
> 时间：2012-05-17T13:55:32.060
> 
> 标签：iphone, ios, xcode, addressbook

这可能在杂草中，但我想我会把它扔在那里问。所以我正在构建一个应用程序，我需要在其中引用地址簿中的信息，比如一个人的电话号码，但不想单独存储信息。基本上，每次用户加载应用程序时，我都会去查看地址簿并获取信息，以防万一他们更新了它。

无论如何，我在 iPhone Programming Doc 中读到了这个：

> “通讯簿数据库中的每条记录都有一个唯一的记录标识符。此标识符始终引用同一条记录，除非该记录被删除或 MobileMe 同步数据被重置。记录标识符可以在线程之间安全传递。它们不能保证跨设备保持不变。
> 
> 保持对特定记录的长期引用的推荐方法是存储名字和姓氏，或名字和姓氏的哈希值，以及标识符。当您按 ID 查找记录时，将记录的名称与您存储的名称进行比较。如果不匹配，则使用存储的名称查找记录，并存储记录的新 ID。”

所以我担心或好奇的是假设我已经存储了 uid 以及名字和姓氏。然后让我们说在同步或设备传输或任何我的 uid 被冲洗时。现在假设我的地址簿包含用户“Bob Smith”的两个条目。

鉴于 uid 不再匹配并且名字/姓氏相同，您如何解决此冲突？我的猜测是最终存储其他信息（例如电话号码、电子邮件等），但这让我回到了不想存储比必要信息更多的情况。我意识到这可能是一个 0.0001% 的时间问题，但我想我会把它扔出去看看大家的想法。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T00:10:22.197

我正在尝试解决同样的问题。但是通过我的解决方案，我可以（或实际上需要）存储多平台/多设备问题的所有内容。但是，如果您有能力购买一两个额外的属性来真正找到两个人之间的差异（比如说电子邮件地址和生日日期），那么您应该能够在大多数情况下识别它们。如果不是，我想知道他们是否真的不是同一个人（相同的名字，相同的电子邮件，相同的生日......像鸭子一样走路，像鸭子一样嘎嘎，鸭子就够了）。

我会说，这不是 0.0001 % 的时间，即。我和我父亲的名字非常相似（这发生在我国的很多人身上）。但我们绝对没有相同的电子邮件地址或生日日期。

# backbone.js - Backbone.js 中的 PATCH 请求方法

> ID：10637113
> 
> 赞同：19
> 
> 时间：2012-05-17T13:56:16.467
> 
> 标签：backbone.js, http-patch

`PATCH`在 Backbone.js 中保存模型属性时执行请求的正确方法是什么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-13T18:21:25.863

从 Backbone.js v0.9.9 开始，您可以简单地传递`{ patch: true }`给`save()`.

阅读更多：[http ://backbonejs.org/#changelog](http://backbonejs.org/#changelog)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-03-23T17:12:15.737

除了[James Cropchos 的回答](https://stackoverflow.com/a/14306652/2236166)之外，我还想添加以下内容，因为[这从我身上偷走了几个小时](https://stackoverflow.com/q/22566650/2236166)，也许可以帮助其他人：

如果您`model.save(attributesToPatchObject,{patch: true})`像 James Cropchos 回答中所述的自主干 v.0.9.9 以来可能使用的那样，您可能想知道如何确定自上次调用以来哪些属性发生了变化，`model.save()`将它们作为`attributesToPatchObject`第一个参数传入`model.save()`（或者`model.fetch()`如果你最近没有保存模型）。

Backbone 本身并没有跟踪这些属性。我认为该方法`model.changedAttributes()`可能适合，但正如[主干文档所说，](http://backbonejs.org/#Model-changedAttributes)该方法返回

> 仅包含自上次设置以来已更改的模型属性的哈希，如果没有，则为 false

所以这种方法不适合这种需要。经过一些研究，我发现主干本身并没有跟踪*未保存*的属性（我知道，如果我更仔细地阅读文档，这不是一个绝妙的发现）。

我发现[backbone.trackit](https://github.com/NYTimes/backbone.trackit)是一个骨干插件，它通过将方法添加`unsavedAttributes()`到模型中，将所需的功能准确地添加到骨干中。Backbone.trackit 的文档谈到了这种方法：

> 与 Backbone 的 model.changedAttributes() 对称，但它返回自上次保存以来已更改的模型属性的哈希，如果没有则返回 false。与 changedAttributes 一样，可以传入外部属性散列，返回该散列中与模型不同的属性。

它是这样工作的：

```
//fetch an existing model from server
model.fetch({
  success : function(model, respose, options) {
    //tell backbone.trackit to track unsaved Attributes
    model.startTracking();
  }
});

//now some changes to the model happen
model.set("someProperty", "someValue");

/* save the model to server using the PATCH-Method 
   and only send the unsaved Attributes; 
   in this case only "someProperty" is sent
*/
model.save(model.unsavedAttributes(), {patch: true}); 
```

由于如果没有未保存的属性则`unsavedAttributes()`返回*false*，因此您可以另外将`save()`语句包装在 if 条件中，该条件检查是否`unsavedAttributes()`返回*false*以外的内容，并且仅在需要时才执行 PATCH-Request（因为某些内容已更改）。

注意：您不必调用`fetch()`使用`startTracking()`，因此即使有新创建的模型（`model.isNew()`在该模型上返回 true），您也可以使用此方法，如果有一个用例的话。

希望这可以节省一些人的研究时间。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-17T14:39:03.150

您必须覆盖`Backbone.sync`和扩展现有的方法映射器

```
var methodMap = {
    'create': 'POST',
    'update': 'PUT',
    'delete': 'DELETE',
    'read':   'GET',
    'patch':  'PATCH'
}; 
```

你必须在像这样的模型上创建自己的补丁方法

```
Backbone.Model.prototype.patch = function(options) 
{
    // some code here that checks what attributes have changed since last save
    var xhr = (this.sync || Backbone.sync).call(this, 'patch', this, options);
    return xhr;  
} 
```

我相信您可以进一步扩展 Backbone 以包括`OPTIONS`，`HEAD`如果您需要

但请注意，即使 jQuery 支持 PATCH、OPTIONS 和 HEAD 方法，您的最终用户的浏览器也可能不支持。

# android - Html.imageGetter 在 Base64 android 中不显示 img

> ID：10637118
> 
> 赞同：2
> 
> 时间：2012-05-17T13:56:31.310
> 
> 标签：android, base64

我正在尝试使用 Html.fromHtml 在 Base64 中显示 img

我有一个带有 Base64 字符串的标签。

那是我的代码：

```
public class GlossaryAdapter extends BaseAdapter{

    ...
    private Resources res;

    public GlossaryAdapter(Context context, ...) {
        this.res = context.getResources();
        ...
    }

    public View getView(int position, View convertView, ViewGroup arg2) {
        ...
        holder.tvContent.setText(Html.fromHtml(glossary.getContent(), new Html.ImageGetter() {
        @Override
        public Drawable getDrawable(String source) {            
                try {
                     byte[] data;
                     data = Base64.decode(source,Base64.DECODE);
                     Bitmap bitmap = BitmapFactory.decodeByteArray(data, 0, data.length);    
                     return new BitmapDrawable(res, bitmap);
                } catch (IOException e) {
                    e.printStackTrace();
                    return null;
                }
            }
        }, null)); 
```

词汇表.getContent() 包含：

```
<img src="AAAY5671NF..." /> 
```

我在一个 html 页面中测试了这个字符串并且可以工作。显示图像。

我使用的是安卓 1.6。而这个 Base64 类：[http ://androidcodemonkey.blogspot.com/2010/03/how-to-base64-encode-decode-android.html](http://androidcodemonkey.blogspot.com/2010/03/how-to-base64-encode-decode-android.html)

我没有错误。但什么都没有显示。如果我将返回值更改为“null”，我会得到一个灰色的小方块。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T14:33:40.343

很长一段时间后......从数据库中获取imageBytes（BLOB）。Enconde 到 Base64 并传递给 src。解码并设置位图边界。作品！

```
@Override
    public Drawable getDrawable(String source) {            
            try {
                 byte[] data;
                 data = Base64.decode(source,Base64.DECODE);
                 Bitmap bitmap = BitmapFactory.decodeByteArray(data, 0, data.length);    
                 Drawable d = new BitmapDrawable(res, bitmap);
                 d.setBounds(0,0,72,72)   // <-----
                 return d;
            } catch (IOException e) {
                e.printStackTrace();
                return null;
            }
        } 
```

# android - 画布上的位图绘制问题

> ID：10637128
> 
> 赞同：0
> 
> 时间：2012-05-17T13:57:05.610
> 
> 标签：android, bitmap, android-canvas

我有几个地区。当我触摸他们每个人时，他们需要更改他们的图片（确切地说是一些矩形）所以，我的代码如下

```
 private void rePaint(Rect rect, int i, int j) {
      Canvas canvas = null;
      try {
        canvas = holder.lockCanvas(rect);
        String imageName = cards[i - 1][j - 1].getName();
        int id = getResources().getIdentifier(imageName, "drawable", getContext().getPackageName());
        Bitmap image = BitmapFactory.decodeResource(getResources(), id);
 //         Log.d("OLOLO", Integer.toString(id));
 //         Log.d("OLOLO", imageName + j + i);
        Log.d("OLOLO", rect.toString());

        canvas.drawBitmap(image, null, rect, null);
      } finally {
        if (canvas != null) {
          holder.unlockCanvasAndPost(canvas);
        }
      }
    } 
```

但。第一次触摸时，图片全屏显示。和 Log.d("OLOLO", rect.toString()); 返回矩形 (0, 0 - 800, 404)。但是这个矩形在 rePaint 返回 Rect(300, 0 - 400, 100)/ 之前检查过它如何改变他的大小？

PS：第二次触摸和其他工作正常。o_o

PSS：我找到了答案。[带有 SurfaceHolder.lockCanvas(Rect dirty) 双缓冲的 LiveWallpaper](https://stackoverflow.com/questions/5190789/livewallpaper-with-surfaceholder-lockcanvasrect-dirty) 导致了我的问题

# c# - 将 ListBox 绑定到 ObservableCollection 时使用 DisplayMemberPath 选择图像

> ID：10637130
> 
> 赞同：0
> 
> 时间：2012-05-17T13:57:16.640
> 
> 标签：c#, wpf, xaml, data-binding

我将 a 绑定`ListBox`到`ObservableCollection`具有属性的项目中，该`Image`属性返回一个`Image`. 但是，我没有得到图像列表，而是得到了这个：

![在此处输入图像描述](../Images/a23938a590355224934fced0c8112b48.png)

有什么建议么？

xml:

```
<Window x:Class="ObservableCollectionDirectoryListBox.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">

    <DockPanel>

        <ListBox DockPanel.Dock="Top"
                 Name="listBox"
                 ItemsSource="{Binding Source={StaticResource infos}}"
                 DisplayMemberPath="Image"/>

    </DockPanel>

</Window> 
```

C＃：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Collections.ObjectModel;
using System.IO;
using System.Threading;

namespace ObservableCollectionDirectoryListBox
{
    public class ImageFileInfo : FileSystemInfo
    {
        public Image Image
        {
            get
            {
                var image = new Image() { Width = 100 };

                var bitmapImage = new BitmapImage();
                bitmapImage.BeginInit();
                bitmapImage.UriSource = new Uri(this.FullName);
                bitmapImage.DecodePixelWidth = 100;
                bitmapImage.EndInit();

                image.Source = bitmapImage;

                return image;
            }
        }

        public ImageFileInfo(string path)
            : base()
        {
            FullPath = path;
        }

        public override void Delete()
        {
            throw new NotImplementedException();
        }

        public override bool Exists
        {
            get { throw new NotImplementedException(); }
        }

        public override string Name
        {
            get { throw new NotImplementedException(); }
        }
    }

    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            var infos = new ObservableCollection<ImageFileInfo>();

            Resources.Add("infos", infos);

            InitializeComponent();

            new DirectoryInfo(@"C:\Users\dharmatech\Pictures\From dharmatech\Camera roll")
            .GetFiles("*.jpg")
            .ToList()
            .ForEach(file => infos.Add(new ImageFileInfo(file.FullName)));

            var fileSystemWatcher =
                new FileSystemWatcher(@"C:\Users\dharmatech\Pictures\From dharmatech\Camera roll") 
                { EnableRaisingEvents = true };

            var context = SynchronizationContext.Current;

            fileSystemWatcher.Created += (s, e) =>
                context.Post(val =>
                {
                    if ((File.GetAttributes(e.FullPath) & FileAttributes.Normal) ==
                        FileAttributes.Normal)
                        infos.Add(new ImageFileInfo(e.Name));
                }, true);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:00:08.640

你不应该真的有一个集合，`Images`它是一个控件并且不属于那里，而是它应该是一个集合`ImageSource`，然后在 a `DataTemplate`( `ListBox.ItemTemplate`) 中可以绑定到`Source`an `Image`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T16:07:25.523

我能够使用`DataTemplate`. 下面是 Xaml 代码`ListBox`：

```
<ListBox DockPanel.Dock="Top"
         Name="listBox"
         ItemsSource="{Binding Source={StaticResource infos}}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Image Source="{Binding Path=FullName}" Height="35"/>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

# winapi - WM_REFLECT_NOTIFY 与 WM_NOTIFY

> ID：10637133
> 
> 赞同：1
> 
> 时间：2012-05-17T13:57:23.113
> 
> 标签：winapi, window-messages, windows-controls

[WM_NOTIFY](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775583%28v=vs.85%29.aspx)的文档很容易找到，但是我找到了大量引用的示例代码和文章，`WM_REFLECT_NOTIFY`但我找不到任何文档。

什么是`WM_REFLECT_NOTIFY`，我在哪里可以找到它的文档以及此消息与此有何不同`WM_NOTIFY`？

示例参考：

*   [使用ownerdraw和virtualmode在listview中闪烁](https://stackoverflow.com/questions/938896/flickering-in-listview-with-ownerdraw-and-virtualmode)
*   [ListViewSubItem.Bounds 几乎可以工作](http://objectlistview.sourceforge.net/cs/blog3.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:41:25.627

`WM_REFLECT_NOTIFY`被称为具有 的值`0x204E`，即`0x2000`+ `WM_NOTIFY`。消息反射的典型用途是将通知发送回其来源，以便所谓的子类控件可以自己处理通知。

因此，您可能缺少并查找文档的知识是控件`WM_NOTIFY`以常规方式发送给其父级。并且父级`SendMessage`使用消息号`0x2000`+ original将相同的消息参数返回给控件`Msg`。`wParam`参数的含义`lParam`应该与原始消息相同（`WM_NOTIFY`在您的情况下）。

该常量`0x2000`可能因框架而异，或者是控件和托管窗口之间的私有协议。

例如，MFC 和 ActiveX 控件反映`WM_NOTIFY`使它们成为`OCM_NOTIFY`消息的消息，其中 (olectl.h)：

```
#define OCM_NOTIFY            (OCM__BASE + WM_NOTIFY)
#define OCM__BASE           (WM_USER+0x1c00) 
```

最后（winuser.h）：

```
#define WM_USER                         0x0400 
```

也就是说，`OCM_NOTIFY`is `0x204E`，就像你的`WM_REFLECT_NOTIFY`. 来自此处的 MSDN 文档：[Reflected Window Message IDs](http://msdn.microsoft.com/en-us/library/a0h15f4z%28v=vs.71%29.aspx)。

# redmine - 安装插件后无法重启 Redmine Server

> ID：10637134
> 
> 赞同：1
> 
> 时间：2012-05-17T13:57:23.967
> 
> 标签：redmine, redmine-plugins, bitnami

我已经从 Bitnami 安装了 Redmine 服务器，版本 1.3.2。我正在尝试从 Redmine 的网站安装最新的 XLS 导出插件。我正在按照删除插件文件夹的步骤，将插件放入文件夹中，运行 rake，然后重新启动服务器。我的问题是当我重新启动 Redmine 服务器时，它不会重新联机。

这是Redmine的日志副本。当我查看它时，我没有看到任何为什么服务器不会重新启动

```
 ** Daemonized, any open files are closed.  Look at tmp/pids/mongrel.3001.pid and    log/mongrel.3001.log for info.
** Starting Mongrel listening at 0.0.0.0:3001
** Starting Rails with production environment...
** Mounting Rails at /redmine...
** Rails loaded.
** Loading any Rails specific GemPlugins
** Signals ready.  TERM => stop.  USR2 => restart.  INT => stop (no restart).
** Rails signals registered.  HUP => reload (without restart).  It might not work well.
** Mongrel 1.1.5 available at 0.0.0.0:3001
** Writing PID file to tmp/pids/mongrel.3001.pid
sh: darcs: command not found
sh: hg: command not found
sh: bzr: command not found
** TERM signal received.
** Daemonized, any open files are closed.  Look at tmp/pids/mongrel.3001.pid and  log/mongrel.3001.log for info.
** Starting Mongrel listening at 0.0.0.0:3001
** Starting Rails with production environment...
** Mounting Rails at /redmine...
/Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/activesupport- 2.3.14/lib/active_support/dependencies.rb:443:in `load_missing_constant': Object is not missing constant User! (ArgumentError)
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:106:in `const_missing'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:118:in `const_missing'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:124:in `send'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:124:in `const_missing'
from /Applications/redmine-1.3.2-1/apps/redmine/app/models/project.rb:30
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:184:in `require'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:291:in `require_or_load'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:451:in `load_missing_constant'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:106:in `const_missing'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:118:in `const_missing'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:463:in `load_missing_constant'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:122:in `const_missing'
from /Applications/redmine-1.3.2-1/apps/redmine/app/models/query.rb:137
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:184:in `require'
from /Applications/redmine-1.3.2-1/apps/redmine/vendor/plugins/redmine_xls_export/lib/xls_export.rb:2
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:184:in `require'
from /Applications/redmine-1.3.2-1/apps/redmine/vendor/plugins/redmine_xls_export/init.rb:5:in `evaluate_init_rb'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/rails-2.3.14/lib/rails/plugin.rb:158:in `evaluate_init_rb'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/activesupport-2.3.14/lib/active_support/core_ext/kernel/reporting.rb:11:in `silence_warnings'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/rails-2.3.14/lib/rails/plugin.rb:154:in `evaluate_init_rb'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/rails-2.3.14/lib/rails/plugin.rb:48:in `load'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/rails-2.3.14/lib/rails/plugin/loader.rb:38:in `load_plugins'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/rails-2.3.14/lib/rails/plugin/loader.rb:37:in `each'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/rails-2.3.14/lib/rails/plugin/loader.rb:37:in `load_plugins'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/rails-2.3.14/lib/initializer.rb:369:in `load_plugins'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/rails-2.3.14/lib/initializer.rb:165:in `process'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/rails-2.3.14/lib/initializer.rb:113:in `send'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/rails-2.3.14/lib/initializer.rb:113:in `run'
from /Applications/redmine-1.3.2-1/apps/redmine/config/environment.rb:24
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/rails.rb:147:in `rails'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/mongrel_rails:113:in `cloaker_'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/configurator.rb:149:in `call'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/configurator.rb:149:in `listener'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/mongrel_rails:99:in `cloaker_'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/configurator.rb:50:in `call'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/configurator.rb:50:in `initialize'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/mongrel_rails:84:in `new'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/mongrel_rails:84:in `run'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/command.rb:212:in `run'
from /Applications/redmine-1.3.2-1/ruby/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/mongrel_rails:281
from /Applications/redmine-1.3.2-1/ruby/bin/mongrel_rails:19:in `load'
from /Applications/redmine-1.3.2-1/ruby/bin/mongrel_rails:19 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-12T11:39:37.327

(sudo) gem 安装电子表格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:56:23.373

确保您已成功安装电子表格 gem。

```
gem list | grep spreadsheet 
```

如果未安装，则安装它。

```
(sudo) gem install spreadsheet 
```

# vb.net - 使用 vb.net 在 Excel 中显示饼图的数据表

> ID：10637135
> 
> 赞同：0
> 
> 时间：2012-05-17T13:57:29.483
> 
> 标签：vb.net, excel

我有一个 excel 数据并且能够从 vb.net 绘制一个饼图。

我应该可以在 vb.net 的饼图下方添加数据表

谢谢鲁佩什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:21:30.633

我不久前学到的一个**非常有用**的技巧是，如果你打开 Excel，记录宏然后单步执行，你通常可以看到如何编写代码或获得非常接近 .NET 所需的东西。例如，我创建了 4 个这样的列：

```
1   1   1   1
2   2   2   2
3   3   3   3
4   4   4   4
5   5   5   5
6   6   6   6 
```

我转到开发人员选项卡并点击“记录宏”，然后突出显示单元格并插入一个表格。然后我点击“停止录制”并通过从宏列表中选择它进入宏。它给了我这个代码：

```
Range("A1:D6").Select
ActiveSheet.ListObjects.Add(xlSrcRange, Range("$A$1:$D$6"), , xlYes).Name = "Table1" 
```

您应该能够使用互操作在 .NET 中执行非常类似的操作。.NET 中有范围和表格对象，您可以使用它们并将表格放置在您喜欢的位置。

希望这可以帮助。

# macos - 在 OSX 上关闭损坏的 SSH 管道的优雅方式？

> ID：10637137
> 
> 赞同：2
> 
> 时间：2012-05-17T13:57:32.667
> 
> 标签：macos

我听说 shift + tilda + period 应该关闭悬挂的 ssh 管道，但我不能简单地让它工作。所以我对 stackoverflow 的问题是，如何优雅地关闭 OSX 上损坏的 SSH 管道？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:09:57.237

当我键入时，`<enter> ~ .`我会离开 ssh 会话。这是在德语键盘上，我必须在其中键入`<alt>+n <space>`（其中`<alt>+n`意味着按住键`n`时按下`alt`）才能获得波浪号。所以关键序列对我来说是：`<enter> <alt>+n <space> .`.

# ajax - 将 JSON-P 与敏感信息一起使用

> ID：10637146
> 
> 赞同：1
> 
> 时间：2012-05-17T13:58:06.313
> 
> 标签：ajax, json, security, rest, jsonp

我有一个需要用户进行身份验证的安全网站，并且希望通过 JSON-P 从我的 API 向客户端返回敏感数据，以便我可以解决 ajax 跨域问题。我拥有客户端和服务器，所以我不关心客户端的安全性（即从服务器读取恶意 js）。

我一直在研究保护 JSON-P 以防止跨站点请求伪造的方法，但无法清楚地确定检查Referer 是否是保护数据的万无一失的方法。据我了解，在这种情况下无法欺骗Referer 标头，因为调用将来自javascript，并且标头无法更改。这是一个正确的假设吗？

我想要一些明确的例子，说明为什么或为什么不检查Referer 会/不会保护JSON-P。

谢谢！

编辑：

澄清一下——JSON-P 是通过 Spring Security 保护的，因此它不仅受 Referer 标头的保护。我在这里最关心的是会话劫持......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:06:54.430

可以使用普通 curl 代码调用 Jsonp url。Http 引用很容易被伪造。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T23:09:57.960

> 我想要一些明确的例子，说明为什么或为什么不检查Referer 会/不会保护JSON-P。

`Referer`不保证发送，所以：

*   如果您要求它存在并匹配受信任的站点，您将破坏浏览器或网络设置未发送它的每个人的应用程序；

*   如果你允许它不存在来绕过它，你就会打开自己的攻击，不仅针对那些用户，而且针对攻击者可以诱导不发送Referer的每个人（最值得注意的是，来自HTTPS页面；

*   此外，要正确处理代理，您必须对`no-cache`所有响应（或者`Vary: Referer`，但这在 IE 中无法正常工作）

推荐人检查是一种弱且有问题的方法，有时将使用视为绝望的最后措施......当您有选择时，您不应该构建它。如果您控制两台服务器，您可以轻松地在一个页面上包含一个请求令牌，该令牌被任一页面上的脚本识别。

# android - 覆盖 WebView 中的加载资源

> ID：10637149
> 
> 赞同：0
> 
> 时间：2012-05-17T13:58:14.647
> 
> 标签：android, webview, overriding, android-webview

我有一个包含`html files`和的 zip 文件`images`，如何在不将 zip 文件提取到文件的情况下`images`与`loaded html`in链接`WebView`，该 zip 文件被加载到 RAM 中，并且我可以访问图像数据`byte[]`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:41:26.287

> 如何在不将 zip 文件提取到 SD 卡的情况下将图像与 WebView 中加载的 html 链接

选项 #1：将 ZIP 文件提取到内部存储并使用`file://`指向您的文件的 URL

选项 #2：将 ZIP 文件解压缩到内部存储，创建一个`ContentProvider`以发布这些文件，并使用`content://`指向您的提供商的 URL

> zip 文件被加载到 RAM 中

这仅适用于小型 ZIP 文件。

# jquery - 使用 $.deferred 等待多个元素上的动画

> ID：10637153
> 
> 赞同：0
> 
> 时间：2012-05-17T13:58:34.380
> 
> 标签：jquery, animation, jquery-deferred

我有这样的代码：

```
for(i=0;i<somevalue;i++){
   $(".elem[order='"+i+"']").delay(i*duration).animate({opacity:0},duration);
} 
```

当最后一个项目动画完成时，我想执行

$(".elem").remove();

我目前正在这样做

```
$(".elem[order='"+i+"']").animate({opacity:0},duration,
function(){
    if(i==somevalue-1){
        $(".elem").remove();
    }
}); 
```

但是我怎么能用 $.Deferred 做到这一点？我正在学习 jQuery Deferred，但我无法解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:09:56.920

# 更新 2：

这是一个使用 $.Deferred 的工作示例：

```
<html>
    <head>
        <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                $.Deferred(function (defer) {
                    var i;
                    var duration = 1000;

                    var pipe = function(defer, index, duration) {
                        return defer.pipe(function () {
                            return $(".elem[order='" + index + "']").animate({opacity: 0}, duration);
                        });
                    };

                    defer.resolve();

                    for (i = 0; i < 5; i++) {
                        defer = pipe(defer, i, duration);
                    }

                    defer.done(function () {
                        console.log("Done, removing all .elem");
                        $(".elem").remove();
                    });
                });
            });
        </script>
        <style type="text/css">
            body { padding: 20px; }
            .elem { border: 1px solid #000; padding: 10px; opacity: 1.0; }
        </style>
    </head>
    <body>
        <div class="elem" order="0">elem 0</div>
        <div class="elem" order="1">elem 1</div>
        <div class="elem" order="2">elem 2</div>
        <div class="elem" order="3">elem 3</div>
        <div class="elem" order="4">elem 4</div>
    </body>
</html> 
```

* * *

## 更新 1，基于新引入的延迟

要在下面回答您的评论，我认为您最好的选择是简单地触发最后触发的动画的回调。由于您可以完全控制决定持续时间（即它不是随机生成的持续时间），因此您可以计算最后的持续时间并使用它来确定它是否是触发回调的正确迭代：

```
var i, callback, delay;
var onComplete = function () {
    console.log("Animations complete!");
};
for (i = 0; i < somevalue; i++) {
    delay = i * duration;
    callback = delay === ((somevalue - 1) * duration) ? onComplete : $.noop;
    //callback = i === somevalue - 1 ? onComplete : $.noop; //this can work too but doesn't check duration
    $(".elem[order='" + i + "']").delay(delay).animate({opacity:0}, duration, callback);
} 
```

* * *

### 原始答案

看起来您希望所有这些元素同时开始制作动画，并且具有相同的持续时间。基于此，我建议进行一次动画调用，并修改收集元素集合的方法。

例子：

```
var i, elements, selector;

for (i = 0; i < somevalue; i++) {
    selector = ".elem[order='" + i + "']";
    if (i === 0) {
        // Start the collection up with the first element
        elements = $(selector);
    } else {
        // Append element to the collection
        elements.add(selector);
    }
}

// Fire up the animation on all elements
elements.animate({opacity:0}, duration, function () {
    console.log("Animation complete!");
}); 
```

*我实际上并没有运行此代码，但我非常有信心它应该可以工作。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:01:55.740

您必须声明变量数据类型，如 var i。

```
for(var i=0;i<somevalue;i++){
   $(".elem[order='"+i+"']).animate({opacity:0},duration);
} 
```

# asp.net - ASP.NET 如何知道单击了哪个按钮以引发其事件

> ID：10637157
> 
> 赞同：5
> 
> 时间：2012-05-17T13:59:10.557
> 
> 标签：asp.net, webforms

使用 a 时[`LinkButton`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.aspx)，该`doPostBack()`功能会在页面中呈现，并且当单击按钮时，`doPostBack()`在客户端将表单提交到服务器并在两个隐藏字段中发送信息，称为`EVENTTARGET`和`EVENTARGUMENT`。`EVENTTARGET`保存导致回发的控件名称并保存`EVENTARGUMENT`任何信息。

使用此 ASP.NET 引擎从`EVENTTARGET`导致回发的参数中获取控件名称并调用`RaisePostBackEvent()`事件以调用正确的服务器端事件处理程序。我了解如何`doPostBack()`工作以及如何调用服务器端事件处理程序。

但是对于普通的服务器按钮，如何在服务器端单击正确的按钮？ASP.NET 如何在客户端单击的控件名称上得到通知？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T14:28:08.847

普通的 ASP.NET[`Button`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.aspx)呈现为`<input type="submit">`具有唯一`name`属性的 HTML 元素。默认情况下，此 HTML 元素将触发对与当前 ASPX 页面关联[的 HTML 表单的 HTTP POST 。](http://www.w3.org/TR/html4/interact/forms.html#h-17.13.3)

当 HTTP POST 发生时，一系列控件名称/当前值对，称为表单数据集，由表单内的[成功控件](http://www.w3.org/TR/html4/interact/forms.html#successful-controls)构造而成，例如，文本框中的文本值是这样传输的。带有触发提交的按钮名称的一对也被发送到服务器，这就是 ASP.NET 知道哪个按钮触发了 HTTP POST 的方式。

HTML 规范保证对于发布的表单数据集只考虑表单内的成功控件，因为成功控件的定义包含以下规则：

> 如果一个表单包含多个提交按钮，只有激活的提交按钮是成功的。

然后 ASP.NET 可以检查发布的表单数据集以检查是否触发了任何正常按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:27:56.307

一般来说，您永远不必担心按钮单击的内部结构。这就是 .Net 的美妙之处。

但是，要具体了解客户端调用的内容，您可以简单地查看页面的源代码并查看按钮调用的内容。

例子：

```
<input name="ctl00$MainContent$btnMyButton" id="ctl00_MainContent_btnMyButton" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions("ctl00$MainContent$btnMyButton", "", true, "", "", false, false))" type="submit" value="My Button"/> 
```

观察 .Net 注入以下 javascript 例程：

```
WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions("ctl00$MainContent$btnMyButton", "", true, "", "", false, false)) 
```

# cordova - 如何解决 fileentry.copyTo()、Cordova 1.6.1 的错误

> ID：10637160
> 
> 赞同：2
> 
> 时间：2012-05-17T13:59:25.723
> 
> 标签：cordova

我正在尝试在 FileEntry 上执行 copyTo 方法，但它失败了，错误代码为 1。我怀疑我没有给它它需要的东西。这是我提供给该方法的输入，其中哪个值不正确？在 android 上运行，但在 iOS 上也出现错误。我正在尝试按照 API 文档中的说明进行操作，但预期的输入尚不清楚。

```
var imageUri = 'file:///mnt/sdcard/Android/data/com.test.app/cache/resize.jpg?1337214925787';
var newFileName = 'test.jpg';
var directoryFullPath = 'file:///mnt/sdcard/App/Job';

window.resolveLocalFileSystemURI(
   imageUri,
   function (entry) {
    console.log("Get file entry success, copy file");
    var parentEntry = new DirectoryEntry({ fullPath: directoryFullPath});
    entry.copyTo(
        parentEntry,
        newFileName,
        function (newEntry) {
            console.log("FileEntry copy to done. New Path: " + newEntry.fullPath);
         },
         function (error) {
             console.log("FileEntry copy to fail. Error code: " + error.code);
         }
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T22:00:29.820

我按照本文中的示例构建了我的代码，并且能够成功执行。也许这是我没有看到的关闭问题，不确定，但下面的示例有效。

仅供参考，如果文件已经存在，这看起来会引发错误，所以我不得不修改我的代码以在文件名中添加时间戳以防止这种情况发生。

[Phonegap - 通过路径从相机胶卷中检索照片](https://stackoverflow.com/questions/9180731/phonegap-retrieve-photo-from-camera-roll-via-path)

# ruby-on-rails-3 - Rails db迁移相同的时间戳

> ID：10637168
> 
> 赞同：0
> 
> 时间：2012-05-17T14:00:01.227
> 
> 标签：ruby-on-rails-3, migration, timestamp

*我在 <>/db/migrate 中有 173 个迁移文件。*

当我尝试创建新迁移时，**生成的时间戳与先前生成的迁移相同**？

## 如何在 Rails 3 中管理此时间戳以进行迁移？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T03:50:49.780

我们有一个类似的问题，我们发现我们错误地添加了一个带有未来时间戳的迁移。我们正在测试取决于日期的应用程序部分。然后生成的所有迁移最后都具有相同的时间戳 + 1。

# android - SQLCipher CREATE TABLE android_metadata 失败

> ID：10637169
> 
> 赞同：0
> 
> 时间：2012-05-17T14:00:03.000
> 
> 标签：android, eclipse, string, sqlite, sqlcipher

我正在使用 SQLite Db 将 SQLCipher 集成到应用程序中。启动应用程序时，我收到“应用程序已意外停止”错误。当我查看 LogCat 时，我看到最初的错误是“CREATE TABLE android_metadata failed”。我对该应用程序所做的唯一更改是添加代码以集成 SQLCIpher。我确定我没有正确编码，但不确定我错过了什么。已完成以下工作：

1.java.io.file、info、guardianproject.database.sqlcipher.SQLiteDatabase、android.os.Bundle、android.app.activity已导入。2、在splash活动的onCreate方法中增加了InitializeSQLCipher()

```
private void InitializeSQLCipher() {
    SQLiteDatabase.loadLibs(this);
    File databaseFile = getDatabasePath ("mydatabase.db");
    databaseFile.mkdirs();
    databaseFile.delete();
    SQLiteDatabase database = SQLiteDatabase.openOrCreateDatabase(databaseFile, "password", null);
    database.execSQL("create table t1(a, b)");
    database.execSQL("insert into t1(a, b) values(?, ?)", new Object[]{"one for the money", "two for the show"});
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:01:37.787

删除了“。” 从 databasename.db (egdatabasedb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T00:12:26.683

CommonsWare 提供了说明该概念的示例代码。[**在这里**](https://github.com/commonsguy/cw-advandroid/tree/master/Database/ConstantsSecure)查看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T15:43:54.460

最可能的答案是您没有将 ICU 资源文件移动到资产目录中。确保将 icu*.zip 复制到您的资产文件夹中并将其包含在您的构建中。

# android - 与 twitter 集成的 Android 应用程序

> ID：10637171
> 
> 赞同：1
> 
> 时间：2012-05-17T14:00:07.597
> 
> 标签：android, twitter

我正在实现一个集成了 twitter 的应用程序。我引用了链接 [https://github.com/ddewaele/AndroidTwitterSample](https://github.com/ddewaele/AndroidTwitterSample)来实现。但问题是当我运行程序并单击推文按钮 logcat 显示错误“错误在 OAuth 检索请求令牌期间”。请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:38:03.847

检查下面的链接

[http://yarakambharathi.blogspot.in/2012/05/twitter-integration-in-android-first.html](http://yarakambharathi.blogspot.in/2012/05/twitter-integration-in-android-first.html)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:59:05.870

确保您正在编译的应用程序启用了网络权限。

看看我使用 Twitter4j 的方法。它只使用一个小的源代码[文件](https://github.com/RobertSzkutak/AndroidExamples/blob/master/TwitterExample/src/com/robertszkutak/androidexamples/twitterexample/AndroidTwitterExample.java)。[https://github.com/RobertSzkutak/AndroidExamples/tree/master/TwitterExample](https://github.com/RobertSzkutak/AndroidExamples/tree/master/TwitterExample)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T14:53:50.880

尝试 Twitter4j

[Github 链接](https://github.com/twitter/twitter4j)

这个链接也有例子

# ruby-on-rails - 基于用户输入的动态表单和模型创建

> ID：10637172
> 
> 赞同：3
> 
> 时间：2012-05-17T14:00:08.217
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, model-view-controller, mongoid

我希望有人可以帮助指导我以最好的方式做到这一点。我正在为人们设置一个注册表单，以列出他们在各种工作中的技能/证书

Schema 使用 Mongoid 和 Inheritance 遵循这些思路

```
class Person 
  include Mongoid::Document
  field :name, :type => String 
  field :education, :type => String 
end

class Accountant < Person
  field :cpa, :type => Boolean
  field :active_cpa, :type => Boolean  
end

class SoftwareDeveloper < Person
  field :full_stack, :type => Boolean
  field :language, :type => Array  
end 
```

因此，用户将来到一个注册页面 mysite.com/persons/new，其中将有一个表单来选择各种工作（按各个行业列出和分组：金融、工程、营销），并根据用户的选择，更多详细视图将显示特定于该工作职能。（例如，软件开发人员可以列出编程语言，而会计师可以列出他们是否有注册会计师）。

我的问题是，在控制器和视图层中处理这个问题的最佳方法是什么？我要涵盖大约 100 种不同的工作职能，所以我想将控制器和视图结合起来，而不是将用户重定向到 mysite.com/accountants/new 或 mysite.com/engineers/new 并为每个用户提供一个控制器/视图具体工作。

有人可以帮助指导我解决这个问题的最佳方法吗？我知道我将不得不使用 jQuery 和一些 ajax 调用来呈现详细的表单，但是我应该如何处理控制器，因为 form_for 最初与用户绑定，并且模型的属性有限，所以我不知道如何获取参数并将它们传递到参数哈希中，并对更具体的工作进行验证

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T22:08:00.957

我最近遇到了这样的问题。我最终使用 form_for 在基本类型上设置了我的表单，在你的情况下是 Person 。在表单中，我为基本字段和单独的字段集标签创建了一个字段集，以表示每个子类中可用的额外字段，如下所示：

```
<%= form_for @person do |f| %>

<fieldset id="base">
  <%= f.label :name %>
  <%= f.check_box :name %>
  <!-- ... -->
</fieldset>

<fieldset id="accountant">
  <%= fields_for :accountant do |f| %>
     <%= f.label :cpa %>
     <%= f.check_box :cpa %>
     <!-- ... -->
  <% end %>
</fieldset>

<fieldset id="software_developer">
  <%= fields_for :software_developer do |f| %>
     <%= f.label :full_stack %>
     <%= f.check_box :full_stack %>
     <!-- ... -->
  <% end %>
</fieldset> 
```

使用 fields_for 将导致表单 POST 在控制器中提供您的“create”方法，其参数如下：

```
params[:person] = { :name => "Joe Smith", ... }
params[:accountant] = { :cpa => true, ... }
params[:software_developer] = { :full_stack => false, ... } 
```

在您的表单中，您还需要某种方式来指定工作类型。就我而言，我使用了一个简单的选择标签：

```
<%= select_tag :job_type, options_for_select(@job_types) %> 
```

这将在您的控制器中为您提供 params[:job_type]。从那里，“创建”方法需要确定用户选择的作业类型，然后创建正确的子类并使用提供的参数。我为此使用了一个案例陈述：

```
case params[:job_type]
when :accountant
  @person = Accountant.new(params[:person].merge(params[:accountant]))
when :software_developer
  @person = SoftwareDeveloper.new(params[:person].merge(params[:software_developer]))
when ...
end 
```

如果你有很多子类，那可能不是很可扩展。因此，您可以安排 params[:job_type] 为您提供要创建的类的名称作为表单提交的值。然后你可以做类似的事情：

```
@person = params[:job_type].constantize.new(params[:person].merge(params[params[:job_type].underscore]) 
```

此代码使用作业类型字段转换为类名，然后再次为子类查找正确的字段。

最后，当用户选择不同的工作类型时，您需要使用一些 jQuery 来隐藏和显示不同的字段集。为此，将 .change() 处理程序附加到 select_tag 元素并让它隐藏所有字段集，然后显示一个具有与所选作业类型匹配的“id”的字段集。如果您需要此示例代码，请告诉我。

作为画龙点睛的一笔，您可能会考虑以部分形式呈现特定于作业的字段集，以便您的主窗体只有一系列调用来呈现所有不同类型的作业。

我不知道是否有更好的方法来做到这一点，但这种方法对我来说非常有用，并且允许我拥有一个控制器和一组视图来管理整个父/子子类树的创建和编辑。

# soap - 使用 JibXWS 1.2.3 的 SOAP 消息“无法解析 mediaType '*; q=.2'”中的 Http 标头错误

> ID：10637174
> 
> 赞同：1
> 
> 时间：2012-05-17T14:00:12.283
> 
> 标签：soap, jibx

我有一个使用 Tomcat 7.0.25 和 JibxWS 接受与 opentravel.org OTA 指定的 XML 消息相关的 SOAP 消息的 Web 服务。

我已经使用 SOAPUI 进行了测试，一切正常，但是现在一个真正的客户希望开始使用该服务，当他们连接时出现此错误：

```
May 17, 2012 2:05:55 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [siteminder] in context with path [/webservice]     threw exception [Error parsing media type in accept-type from request: text/xml, text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2] with root cause
java.text.ParseException: Unable to parse mediaType ' *; q=.2'
        at org.jibx.ws.codec.MediaType.<init>(MediaType.java:130)
    at org.jibx.ws.codec.CodecDirectory.parseAcceptString(CodecDirectory.java:244)
    at org.jibx.ws.codec.CodecDirectory.getAcceptableMediaType(CodecDirectory.java:217)
    at org.jibx.ws.http.servlet.WsServletDelegate.getAcceptableMediaType(WsServletDelegate.java:217)
    at org.jibx.ws.http.servlet.WsServletDelegate.doPost(WsServletDelegate.java:121)
    at org.jibx.ws.http.servlet.WsServlet.doPost(WsServlet.java:76)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1805)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

因此，在请求的 http 标头中，它们包含一个 Accept ，其值为：

```
text/xml, text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2 
```

当我将它添加到我的 SOAPUI 时，我可以重现该错误，它可以在没有 ", *; q=.2, */* ; q=.2" 位的情况下正常工作。

所以我一直在寻找一种能够接受接受标头的“，*；q=.2，*/*；q=.2”位的方法。

", *; q=.2, */* ; q=.2" 与什么有关？它与我知道 JibX WS 不支持的 SOAP 1.2 有关吗？尽管客户说他们正在使用带有 spring saaj13 实现的 SOAP 1.1。

我在想可能有一些配置文件，我只是将这些位添加到，说它们可以被处理，或者忽略它们。

我查看了属性文件中的 jibxWS jar 以及我的 Tomcat 服务器 web.xml mime 类型，现在我将尝试查看 JibX WSServlet 的源代码并调查更多关于 spring saaj13 的信息，看看我是否能找到答案。

任何建议都将受到欢迎。谢谢你的时间。

# asp.net-mvc - 如何将这个小代码片段从 aspx 转换为 MVC Razor

> ID：10637175
> 
> 赞同：2
> 
> 时间：2012-05-17T14:00:16.100
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

这是来源：

```
<% string[] roles = ViewData["Roles"] as string[]; 
                   if (roles != null && roles.Length > 0) {%>
            <p>
                <label for="roleName">
                    Role:</label>
                <% foreach (string role in roles) { %>
                <%: Html.RadioButtonFor(m => m.RoleName, role) %>&nbsp; <span>
                    <%: role%></span>
                <% } %>
            </p>
            <%} %> 
```

这是我的尝试：

```
 @{
        string[] roles = ViewData["Roles"] as string[]; 
        if (roles != null && roles.Length > 0) {
            <p>
                <label for="roleName">Role:</label>
                foreach (string role in roles) {    
                    @Html.RadioButtonFor(m => m.RoleName, @role)&nbsp; <span>@role</span>
                    }
            </p>
        }
    } 
```

问题是在运行时我收到以下错误消息：

```
Compiler Error Message: CS0103: The name 'role' does not exist in the current context

Source Error:

Line 41:                 <label for="roleName">Role:</label>
Line 42:                 foreach (string role in roles) {    
Line 43:                     @Html.RadioButtonFor(m => m.RoleName, @role)&nbsp; <span>@role</span>
Line 44:             </p>
Line 45:         } 
```

有人可以看看有什么问题。我试过了，但我的尝试似乎有问题。到目前为止，我还尝试将第 43 行更改为：

```
@Html.RadioButtonFor(m => m.RoleName, role)&nbsp; <span>@(role)</span>

@Html.RadioButtonFor(m => m.RoleName, role)&nbsp; <span>@role</span> 
```

两者仍然不起作用:-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:10:58.730

```
foreach (string role in roles) {    
    @Html.RadioButtonFor(m => m.RoleName, @role)&nbsp; <span>@role</span>
} 
```

应该

```
@foreach (string role in roles) {    
    @Html.RadioButtonFor(m => m.RoleName, role) <span>@role</span>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:08:02.713

```
@Html.RadioButtonFor(m => m.RoleName, @role)&nbsp; <span 
```

应该

```
@Html.RadioButtonFor(m => m.RoleName, role)&nbsp; 
```

@role 是正确的。但 RadioButtonFor(...) 调用中不需要 @ 符号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T14:19:41.017

尝试这个：

```
@{
    string[] roles = ViewData["Roles"] as string[]; 
    if (roles != null && roles.Length > 0) {
    <p>
        <label for="roleName">Role:</label>
        @foreach (string role in roles) {    
            @Html.RadioButtonFor(m => m.RoleName, @role)@:&nbsp;<span>@role</span>
        }
    </p>
    }
} 
```

或者您可以使用：

```
@{
    string[] roles = ViewData["Roles"] as string[]; 
}
@if (roles != null && roles.Length > 0) {
<p>
    <label for="roleName">Role:</label>
    @foreach (string role in roles) {    
        @Html.RadioButtonFor(m => m.RoleName, @role)@:&nbsp;<span>@role</span>
    }
</p>
} 
```

# jquery - jQuery：失去对元素的关注

> ID：10637176
> 
> 赞同：10
> 
> 时间：2012-05-17T14:00:18.657
> 
> 标签：jquery

`<select>`选择后需要以某种方式失去焦点`<option>`。

[http://jsfiddle.net/MnAdN/](http://jsfiddle.net/MnAdN/)

不删除此焦点检查。

```
if (... !$('#adm1n-toolbar form select').is(':focus')) 
```

用户选择时工具栏应该是可见的，选择完成后应该隐藏。

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-17T14:02:56.863

您可以使用该`blur()`方法，如下所示：

```
$("#adm1n-toolbar form select").change(function() {
    $(this).blur();
}); // after something has been selected 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T14:02:54.510

触发模糊事件：

```
$('#yourSelect').blur(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T14:03:26.803

只需将焦点从工具栏上移开：

```
$('#adm1n-toolbar select').trigger('blur'); 
```

使用你的 jsFiddle：

```
$('#adm1n-toolbar')
    .mouseenter(function() {
        var toolbarposition = $(this).position();
        if (toolbarposition.top < 0) {
            $(this).animate({top: '0'}, 300);
        }
    })
    .mouseleave(function() {
        var toolbarposition = $(this).position();
        if (toolbarposition.top >= 0 && !$('#adm1n-toolbar form select').is(':focus')) {
            $(this).animate({top: '-115'}, 300);
        }
    });

$('#adm1n-toolbar select').change(function(e) {
    e.preventDefault();
    $(this).trigger('blur');
}); 
```

​</p>

# php - Code Igniter + i18n 多语言库 -> 重定向和 SEO

> ID：10637180
> 
> 赞同：1
> 
> 时间：2012-05-17T14:00:31.293
> 
> 标签：php, .htaccess, codeigniter, internationalization

我正在制作一个带有代码点火器和 i18n 库的多语言网站：

*   [图书馆页面](http://codeigniter.com/wiki/CodeIgniter_2.1_internationalization_i18n)

*   [图书馆讨论帖](http://codeigniter.com/forums/viewthread/179036/)

让我和讨论线程上的许多其他人烦恼的是，查询是以这种方式重定向的：

```
base_url -> base_url/default_language/default_controller 
```

尽管

```
base_url/language -> base_url/language 
```

这很烦人，原因有两个：

1.  我的域的基本网址永远不会出现在浏览器地址栏上（奇怪），也不会被谷歌索引

2.  我也不希望 default_controller 出现在其他语言的地址栏上。所以我的主页应该是这样的：

base_url <-- 默认语言

base_url/fr/ <-- 法语版本

有人能帮我吗？代码在图书馆的主页上，前面提到过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T14:54:02.050

尝试使用 site_url('controller/function') 因为 i18n 改变了 CI 的行为，并且与 base_url()/controller/funciont 的链接不起作用。

# javascript - URL 编码从 JS 到 Drupal 的字符串

> ID：10637181
> 
> 赞同：4
> 
> 时间：2012-05-17T14:00:40.590
> 
> 标签：javascript, drupal, uri, url-encoding

我有一个使用 Ajax 的 Drupal Web 应用程序；Ajax 函数有时需要将字符串作为参数传递给 Drupal 函数

```
$.ajax({url: "index.php?q=get_value/"+encodeURIComponent(value), 
```

当值包含斜杠时，Drupal 函数无法识别它

```
 function get_value($value) {
       print urldecode($value); 
```

例如，如果传递的字符串是 ABC/123 ， get_value 只打印 ABC

我该如何解决这个问题，通过斜杠并从 PHP/Drupal 获取整个字符串？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T09:58:25.303

使用`%2f`而不是`/`：

```
$.ajax({url: "index.php?q=get_value" + "%2f" + encodeURIComponent(value), 
```

[[参考](http://rfc-ref.org/RFC-TEXTS/3986/chapter2.html)]，见第 2.2 节

或者，一个更具可读性的替代方案：

```
$.ajax({url: "index.php?q=" + encodeURIComponent("get_value/"+value), 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T21:45:23.817

您的问题是 Drupal 将斜杠解释为路径分隔符，因此它将 get_value/val1/val2/val3 中的第一个参数提取为 $value ...您可以让 Drupal 拆分参数，但您需要重新组合它们。以下是 Drupal7 的示例。

在您的菜单系统中，您必须确保 drupal 将使用所有参数回调您的 get_value 函数：

```
function mymodule_menu {
   $items['get_value'] = array(
      'page callback' => 'mymodule_get_value',
   );
   return $items;
} 
```

然后重新组合参数的动态数量：

```
function mymodule_get_value() {
   $args = func_get_args();
   $value = implode('/', $args);
   // do what you need with $value here
} 
```

希望这可以帮助 ！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T09:24:51.653

也许我在这里遗漏了一些东西，但你不能只是连接你的查询字符串并将它传递给`ajax`函数吗？也许你可以使用[parse_url()](http://php.net/manual/en/function.parse-url.php)。

你的`get_value()`可能是个问题。来自 PHP 的[urdecode()](http://php.net/manual/en/function.urldecode.php)手册：“超全局变量 $_GET 和 $_REQUEST 已经解码。在 $_GET 或 $_REQUEST 中的元素上使用 urldecode() 可能会产生意想不到的危险结果。”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T09:25:04.180

如果那是您的确切代码，那么您有语法错误（额外的引号），第一行应该是：

```
$.ajax({url: "index.php?q=get_value/" + encodeURIComponent(value), 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-24T09:58:19.497

您能否提供更多关于 PHP 函数在哪里的详细信息 - 它是否在 Drupal 自定义模块中？如果它在自定义模块中，您是否使用 menu_hook 作为 get_value 路径？另外，您使用的是哪个版本的 Drupal？另一件事是您可以将 encodeURIComponent 替换为 Drupal.encodeURIComponent (Drupal 6) 或 Drupal.encodePath (Drupal 7)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-27T04:29:16.300

了解您的路由系统在做什么会很有帮助，首先，您在调试时看到了什么？

```
 function get_value($value) {
   var_dump($value);
   print urldecode($value); 
```

您可以尝试的另一种选择是传递带有双引号的变量，因此它们被解释为字符串。

```
$.ajax({url: "index.php?q=get_value/\"" + encodeURIComponent(value) + "\"", 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-29T08:22:00.230

在 URL 解码之前，您应该检查 PHP 函数的 $value 参数是否有斜杠之后的部分。

解决此问题的一种方法是在对其进行编码之前替换字符串中的斜杠，然后在 PHP 中对其进行解码后将其替换回来。这是一个用回车符替换斜杠的示例：（您应该使用在字符串中找不到的字符）

```
$.ajax({url: "index.php?q=get_value/"+encodeURIComponent(value.replace("/", "\r")), 
```

和 PHP 代码来扭转这一点：

```
function get_value($value) {
    print str_replace("\r", "/", urldecode($value)); 
```

您可能需要尝试一些其他字符（您也可以使用字符序列而不是单个字符）并查看哪些有效。去除 URL 编码斜杠的逻辑也可能去除其他字符。

# google-maps - 如何将 Google Maps Places Library 的自动填充功能限制为仅推荐一个城市的地点？

> ID：10637183
> 
> 赞同：9
> 
> 时间：2012-05-17T14:01:01.040
> 
> 标签：google-maps, google-maps-api-3, autocomplete, google-places-api

我目前正在使用给定的代码，但这仅将建议限制在一个国家/地区。我见过一种实现，但它使用 jQuery，我想在不使用 jQuery 的情况下做到这一点。

```
var input = document.getElementById('searchTextField');
var options = {
    //types: ['(cities)'],
    componentRestrictions: { country: 'pk' }
};
var autocomplete = new google.maps.places.Autocomplete( input, options ); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-18T01:00:44.780

尝试向您传递给构造函数`bounds`的对象添加一个属性，如以下代码所示：`options``Autocomplete`

```
var southWest = new google.maps.LatLng( 25.341233, 68.289986 );
var northEast = new google.maps.LatLng( 25.450715, 68.428345 );
var hyderabadBounds = new google.maps.LatLngBounds( southWest, northEast );

var options = {
    bounds: hyderabadBounds,
    types:  ['establishment [or whatever fits your usage]'],
    componentRestrictions: { country: 'pk' }
}; 
```

如果您希望`Autocomplete`边界由地图的当前视口驱动，您可以将地图的边界绑定到`Autocomplete`以下方式：

```
autocomplete.bindTo('bounds', map); 
```

或者，如果它在您的应用程序中工作得更好，您还可以选择在必要时显式设置边界：

```
autocomplete.setBounds( someOtherBounds ); 
```

这可能意味着您创建了一个默认城市，就像我在上面的示例中对 Hyberabad 所做的那样。或者您允许您的用户从城市列表中选择开始，然后将地图视口设置为所选城市。如果您像您已经在做的那样从of开始，`Autocomplete`则会建议城市名称。您将知道什么最适合您的应用程序。`componentRestrictions``country 'PK'`

最后，这并没有真正完全地将其限制`Autocomplete`在城市中，但它会尽可能地达到您希望的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T04:32:28.867

我发现了使用 Autocomplete 类按国家/地区限制或限制搜索结果的绝佳示例，即有一个名为 setComponentRestrictions 的方法允许您设置国家/地区（属性），可在此处找到 -https://developers.google.com/maps/文档/javascript/reference#ComponentRestrictions

有关示例，请查看[https://code.google.com/p/gmaps-samples-v3/source/browse/trunk/places/2012-may-hangout/autocomplete.html?r=290](https://code.google.com/p/gmaps-samples-v3/source/browse/trunk/places/2012-may-hangout/autocomplete.html?r=290)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-02T12:50:59.433

对于多个国家/地区限制，您可以使用

```
var options = {
    types: ['(cities)'],
    componentRestrictions: {
        country: ['de','at','ch']
    }
}; 
```

# jquery - 清空表单后如何在jQuery中获取表单字段

> ID：10637185
> 
> 赞同：0
> 
> 时间：2012-05-17T14:01:03.993
> 
> 标签：jquery, forms

一旦表格被清空，我怎样才能再次获得所有字段？如果我使用`$('#id')`我得到表单但没有得到输入元素。

# iphone - DismissModalViewcontroller 是如何工作的，iphone

> ID：10637186
> 
> 赞同：0
> 
> 时间：2012-05-17T14:01:04.350
> 
> 标签：iphone

假设我有 ViewA 和 ViewB 并且我正在使用模态视图控制器，例如

```
[ViewA presentModalViewController:ViewB animated:YES] 
```

然后为了解除 ViewB，

```
[self dismissModalViewControllerAnimated:YES] 
```

被调用

**问题**：

**这里self**是什么意思。是ViewB还是ViewA。

我们应该把代码放在哪里？它应该在 ViewA 还是 ViewB 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:09:47.013

文档说：

> “呈现视图控制器负责关闭它呈现的视图控制器。但是，如果您在呈现的视图控制器本身上调用此方法，它会自动将消息转发到呈现视图控制器。”

因此，`self`任何对象是否包含您引用的代码，但无论哪种方式，消息最终都由 ViewA 处理。

（请注意，文档**还说**这是一种已弃用的方法。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:09:54.407

来自苹果文档“呈现视图控制器负责解除它呈现的视图控制器。但是，如果您在呈现的视图控制器本身上调用此方法，它会自动将消息转发到呈现视图控制器。”

很明显

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T14:07:03.287

ViewB 应该被解雇。它应该在 ViewB 的视图控制器中，因为那是模态视图控制器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T15:49:08.013

应将dismissModalViewController 放入您要关闭的模态视图控制器中。它负责解雇自己。

也就是说，您不应再使用模态函数。您应该使用presentViewController 和dismissViewController。模态函数已被弃用，可能很快就会被删除。

# php - DOM Challenge -> 获取不在任何元素中的文本

> ID：10637187
> 
> 赞同：0
> 
> 时间：2012-05-17T14:01:07.687
> 
> 标签：php, dom, html-parsing

这里我如何得到我的 dom 树：

```
$html = file_get_contents('somefile.html');
$dom = new DOMDocument();
@$dom->loadHTML($html);
$dom_document = new DomXPath($dom);
$dom_object = $dom_document->query('somePathHere'); 
```

$dom_object的html结构：

```
<div>
  <a href='something'>some text here</a>
  I want this
</div> 
```

这是我需要的：

```
foreach($dom_object as $value){
     echo $value->getElementsByTagName('a')->item(0)->nodeValue; //working properly
     echo 'I want this' // I don't know how to get that 'I want this' text
} 
```

精度：我想避免进行多个 xpath 查询。我想坚持我的……提前谢谢你。干杯。马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:20:30.323

使用 nodeType 获取文本节点：

```
foreach($nodes as $node) {
    if($node -> nodeType == 3) {
        echo $node -> nodeValue . "<br />";
    }
} 
```

解释：在 php DOMDocument 中，任何文本都在节点内。在您的情况下，它是一个文本节点，根据 PHP 的 XML_NODE_CONSTANTS 表示 3

详情：[http ://www.php.net/manual/en/class.domnode.php](http://www.php.net/manual/en/class.domnode.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:07:50.533

我不知道您的 xml 的预期结构，但这适用于您的特定请求：

```
/html/body/div/text() 
```

这仅选择具有相关 div 的直接父级的文本节点。您也可以使用 general `//div/text()`，但更具体的查询通常更好/更快。

# distributed-computing - 时间解耦交互？

> ID：10637191
> 
> 赞同：0
> 
> 时间：2012-05-17T14:01:20.063
> 
> 标签：distributed-computing

谁能向我解释一下“时间去耦”交互的含义？我不知道，也找不到合适的资源来解释它。

它取自直接消息交换架构的概念。该问题表明需要对两个客户端之间的交互进行时间解耦。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:49:35.540

如果两个进程是时间耦合的，那么一个进程在时间上的执行会受到另一个进程行为方式的影响。一个典型的例子是调用服务器进程上的方法的客户端进程。如果这个远程方法调用的实现使得客户端调用在服务器实际完成执行该方法之前不会返回，那么客户端和服务器是时间耦合的。如果服务器在调用方法的执行过程中碰巧出现问题并且需要很长时间才能完成它，那么客户端在执行期间就会停止。

两个进程之间的这种类型的依赖关系可以被认为是一种风险，并可能导致故障在整个分布式系统中传播。因此，时间解耦的交互通常是首选。回到客户端-服务器示例，时间解耦版本将是异步远程方法调用，其中客户端不会*阻塞*以等待来自服务器的响应。相反，来自服务器的响应在可用时异步传送给客户端。这样，客户端进程可以继续其自己的执行，而无需耦合到服务器进程的执行。

在您的问题的上下文中，据我所知，这表明参与该特定消息交换架构的进程以异步方式相互交互，您不必担心消息交换会停止一个进程，因为另一个（行为不端）的过程。

# java - 动态 XML 标记和 JAXB

> ID：10637192
> 
> 赞同：4
> 
> 时间：2012-05-17T14:01:24.363
> 
> 标签：java, xml, jaxb

我如何使用 JAXB 序列化和反序列化以下 XML，考虑到标签和不是必需的，并且 XML 可能`complement1`有, , ？`2``3``complement4``5``n`

我考虑过使用`@XmlAnyElement`注释，但我需要知道值“First”属于第一个补码，“Second”属于第二个补码，等等。

```
<resource>
    <id>Identifier</id>
    <name>Name</name>
    <complement1>First</complement1>
    <complement2>Second</complement2>
    <complement3>Third</complement3>
</resource> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T15:03:24.477

我相信您可以使用@XmlAnyElement，并且您确实可以访问元素名称。
您需要使用“任何列表”构造。
当 JAXB 解组 XML 时，您将拥有一个 DOM Element 对象列表，每个对象都包含元素名称和内容。
我认为您必须手动强制每个元素标签名称与“complementN”模式匹配。

例如，这是从 Oracle 示例之一修改的：

架构：

```
<xs:element name="person">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="firstname" type="xs:string"/>
      <xs:element name="lastname" type="xs:string"/>
      <xs:sequence>
          <xs:any minOccurs="0" maxOccurs="unbounded"/>
      </xs:sequence>
    </xs:sequence>
  </xs:complexType>
</xs:element> 
```

xjc 生成的 Person 类的片段：

```
...
@XmlRootElement(name = "person")
public class Person {

    @XmlElement(required = true)
    protected String firstname;
    @XmlElement(required = true)
    protected String lastname;
    @XmlAnyElement(lax = true)
    protected List<Object> any;
... 
```

测试 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<person>
  <firstname>David</firstname>
  <lastname>Francis</lastname>
  <anyItem1>anyItem1Value</anyItem1>
  <anyItem2>anyItem2Value</anyItem2>
</person> 
```

测试类：

```
JAXBContext jc = JAXBContext.newInstance( "generated" );
Unmarshaller u = jc.createUnmarshaller();
Person contents = (Person) u.unmarshal(Testit.class.getResource("./anysample_test1.xml"));
System.out.println("contents: " + contents);
System.out.println("  firstname: " + contents.getFirstname());
System.out.println("  lastname: " + contents.getLastname());
System.out.println("  any: ");
for (Object anyItem : contents.getAny()) {
    System.out.println("    any item: " + anyItem);
    Element ele = (Element) anyItem;
    System.out.println("      ele name: " + ele.getTagName());
    System.out.println("      ele text content: " + ele.getTextContent());
} 
```

输出：

```
contents: generated.Person@1bfc93a
  firstname: David
  lastname: Francis
  any: 
    any item: [anyItem1: null]
      ele name: anyItem1
      ele text content: anyItem1Value
    any item: [anyItem2: null]
      ele name: anyItem2
      ele text content: anyItem2Value 
```

# c++ - For循环不起作用？

> ID：10637195
> 
> 赞同：-1
> 
> 时间：2012-05-17T14:01:30.593
> 
> 标签：c++, arrays, for-loop

我为我的 C++ 类编写了这个函数，我尝试了 x <= 4 并且也尝试了 x >= 4，但是当我跟踪它时，我没有看到它像应有的那样循环。它所做的是获取一个包含 5 个数字的数组并对它们进行排序，然后检查该组合是否构成满堂彩。

```
bool isFullHouse(int)
    {
        int match = 0;
        BubbleSort(DiceHeld, 5);
        for ( int x=0; x <= 4; x++ )
        {
            if (((DiceHeld[1] == x+1) && (DiceHeld[2] == x+1) && (DiceHeld[3] == x+2) && (DiceHeld[4] == x+2) && (DiceHeld[5] == x+2)) ||
                ((DiceHeld[1] == x+1) && (DiceHeld[2] == x+1) && (DiceHeld[3] == x+1) && (DiceHeld[4] == x+2) && (DiceHeld[5] == x+2)) ||
                ((DiceHeld[1] == x+1) && (DiceHeld[2] == x+1) && (DiceHeld[3] == x+3) && (DiceHeld[4] == x+3) && (DiceHeld[5] == x+3)) ||
                ((DiceHeld[1] == x+1) && (DiceHeld[2] == x+1) && (DiceHeld[3] == x+1) && (DiceHeld[4] == x+3) && (DiceHeld[5] == x+3)) ||
                ((DiceHeld[1] == x+1) && (DiceHeld[2] == x+1) && (DiceHeld[3] == x+4) && (DiceHeld[4] == x+4) && (DiceHeld[5] == x+4)) ||
                ((DiceHeld[1] == x+1) && (DiceHeld[2] == x+1) && (DiceHeld[3] == x+1) && (DiceHeld[4] == x+4) && (DiceHeld[5] == x+4)) ||
                ((DiceHeld[1] == x+1) && (DiceHeld[2] == x+1) && (DiceHeld[3] == x+5) && (DiceHeld[4] == x+5) && (DiceHeld[5] == x+5)) ||
                ((DiceHeld[1] == x+1) && (DiceHeld[2] == x+1) && (DiceHeld[3] == x+6) && (DiceHeld[4] == x+2) && (DiceHeld[5] == x+2)) ||
                ((DiceHeld[1] == x+1) && (DiceHeld[2] == x+1) && (DiceHeld[3] == x+6) && (DiceHeld[4] == x+6) && (DiceHeld[5] == x+6)) ||
                ((DiceHeld[1] == x+1) && (DiceHeld[2] == x+1) && (DiceHeld[3] == x+1) && (DiceHeld[4] == x+6) && (DiceHeld[5] == x+6)))
            {
                match = 1;
            }
        }
        if (match == 1)
        {
            return true;
        }
        else
        {
            return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:24:07.930

您的索引`DiceHeld`应该可能从 0 到 4。根据您的编译器和调试器，内存错误可能不明显，但仍然会发生。

我还敢打赌，`match`退出循环后它不是 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:11:55.690

为了好玩，这是一个不需要如此繁重的逻辑或排序的版本：

```
 static const int kNumDice = 5;

bool isFullHouse()
{
    // There are only 2 possible patterns for full house on a set of numbers, sorted or not
    // Either the first 3 dice have the same value and the 4th and 5th dice are the same
    // or the first 2 dice match and the 3rd, 4th, 5th dice match 

    int currentMatch = DiceHeld[0];
    int uniqueValues = 1;
    int matchLength = 1;

    for(int i=1; i<kNumDice; i++)
    {
        // Start next match
        if(DiceHeld[i] != currentMatch)
        {
            if(matchLength < 2)
            {
                return false; 
            }

            if(++uniqueValues > 2)
            {
                return false;
            }

            currentMatch = DiceHeld[i];
            matchLength = 1;
        }
        else if(++matchLength > 3)
        {
            return false;
        }
    }

    return true;
} 
```

# java - 在informix中创建存储过程

> ID：10637203
> 
> 赞同：2
> 
> 时间：2012-05-17T14:02:12.007
> 
> 标签：java, stored-procedures, informix

我试图创建新的存储过程。下面是 sp 的代码段。

```
CREATE PROCEDURE abs_eq (arg1 INTEGER, arg2 INTEGER)
    RETURNS BOOLEAN
    WITH (NOT VARIANT)
    DEFINE ret BOOLEAN;
    IF (arg1 < 0 THEN)
        LET arg1 = -arg1;
    END IF
    IF(arg1 = arg2) THEN
        LET ret = "t";
    ELSE
        LET ret = "f";
    END IF;
    RETURN ret;
END PROCEDURE;
EXECUTE PROCEDURE abs_eq (3, 5); 
```

但是，我不知道该代码段放在哪里以及如何在远程数据库中编译。我将在java中这样调用这个函数：

```
public void callfunction() throws SQLException {

        CallableStatement proc = null;

        proc = conn.prepareCall("{ call abs_eq(?,?) }");
        proc.setInt(1, 3);
        proc.setInt(2, 5);
        boolean result = proc.execute();
        System.out.println(result);

    } 
```

我需要一个清晰的解释，逐步描述我需要做什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T07:07:43.293

您可以使用任何可以运行 sql 语句的工具将其“放入”数据库中。这可以通过 ISA（Informix Server Administrator）或使用 ODBC 或 JDBC 驱动程序的 SQL 编辑器来完成。当然你可以使用 JDBC 来完成这个任务：

```
stmt = conn.createStatement()
stmt.execute(FUN_BODY) 
```

我将它与 Informix JDBC 驱动程序和 Jython 一起使用（因此，行尾没有分号）。

你在程序上有一些错误。它应该是函数，如果我理解它的名称，它应该使用它们的绝对值比较两个整数。我会这样写：

```
FUN_BODY = """CREATE FUNCTION abs_eq (arg1 INTEGER, arg2 INTEGER) RETURNING BOOLEAN;
    IF (arg1 == arg2) THEN
        RETURN 't';
    END IF;
    IF (arg1 == -arg2) THEN
        RETURN 't';
    END IF;
    IF (-arg1 == arg2) THEN
        RETURN 't';
    END IF;
    RETURN 'f';
END FUNCTION;
""" 
```

我还要添加一些测试，有带有测试例程和测试的 Jython 代码：

```
def test_abs_eq(proc, arg1, arg2, expected):
    proc.setInt(1, arg1);
    proc.setInt(2, arg2);
    rs = proc.executeQuery();
    while (rs.next()):
        r = rs.getBoolean(1)
        ok = 'ok'
        if r != expected:
            ok = ' ERROR!!!'
        print('%d, %d: %s %s' % (arg1, arg2, r, ok))

def test_multi(db_url, usr, passwd):
    try:
        db = DriverManager.getConnection(db_url, usr, passwd)
        conn = db.createStatement()
        conn.execute(FUN_BODY)
        proc = db.prepareCall("{ call abs_eq(?,?) }");
        test_abs_eq(proc, 0, 0, True)
        test_abs_eq(proc, 3, 4, False)
        test_abs_eq(proc, 3, 3, True)
        test_abs_eq(proc, 20, 0, False)
        test_abs_eq(proc, -20, -20, True)
        test_abs_eq(proc, 20, -20, True)
        test_abs_eq(proc, -20, 20, True)
        test_abs_eq(proc, 20, 20, True)
        db.close()
    except:
        print("there were errors!")
        s = traceback.format_exc()
        sys.stderr.write("%s\n" % (s)) 
```

# java - 如何使用 javapns 从苹果的增强通知格式中获取错误响应数据包

> ID：10637212
> 
> 赞同：0
> 
> 时间：2012-05-17T14:02:42.117
> 
> 标签：java, ios, apple-push-notifications

ResponsePacket theErrorResponse = pushNotification.getResponse();我正在使用 javapns2.2 并试图从苹果的增强通知格式中捕获错误响应数据包。当我发送推送通知（例如使用无效令牌）时，代码

```
Exception theProblem = pushedNotification.getException();
theProblem.printStackTrace(); 
```

向控制台输出一些错误，但是

```
ResponsePacket theErrorResponse = pushedNotification.getResponse();
if (theErrorResponse != null && theErrorResponse.isErrorResponsePacket()) {
      System.out.println(theErrorResponse.getMessage());
      System.out.println(theErrorResponse.getStatus());
} 
```

总是返回*null。*如何使用 getResponse() 获取状态码？

这是我的代码的一部分：

```
List<PushedNotification> notifications = Push.payload(payload, keystore, password, production, devices);

        for (PushedNotification pushedNotification : notifications) {
            if(pushedNotification.isSuccessful())
            {
                System.out.println(pushedNotification.getDevice().getToken());                  
            }
            else
            {
                System.out.println(pushedNotification.getDevice().getToken());

                Exception theProblem = pushedNotification.getException();
                theProblem.printStackTrace();

                ResponsePacket theErrorResponse = pushedNotification.getResponse();
                if (theErrorResponse != null && theErrorResponse.isErrorResponsePacket()) {
                        System.out.println(theErrorResponse.getMessage());
                        System.out.println(theErrorResponse.getStatus());
                }

            }
        } 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:07:27.533

我想到了。

getResponse() 返回 null 因为异常机制阻止了对 APNs 的调用更有效。真正的错误包含在异常机制中。

一切都在这个链接上得到了超级解释： [http ://code.google.com/p/javapns/issues/detail?id=79&can=1](http://code.google.com/p/javapns/issues/detail?id=79&can=1)

# x86 - SSE指令：字节+短

> ID：10637214
> 
> 赞同：6
> 
> 时间：2012-05-17T14:02:45.800
> 
> 标签：x86, sse, instructions

我有很长的字节数组需要添加到类型`short`（或`int`）的目标数组中。是否存在这样的 SSE 指令？或者也许他们的设置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T14:18:35.340

您需要将每个 8 位值的向量解压缩为两个 16 位值的向量，然后将它们相加。

```
__m128i v = _mm_set_epi8(15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0);
__m128i vl = _mm_unpacklo_epi8(v, _mm_set1_epi8(0)); // vl = { 7, 6, 5, 4, 3, 2, 1, 0 }
__m128i vh = _mm_unpackhi_epi8(v, _mm_set1_epi8(0)); // vh = { 15, 14, 13, 12, 11, 10, 9, 8 } 
```

其中`v`是 16 x 8 位值的向量`vl`，`vh`是 8 x 16 位值的两个解包向量。

请注意，我假设 8 位值是无符号的，因此当解压缩为 16 位时，高字节设置为 0（即无符号扩展）。

如果你想对这些向量求和并得到一个 32 位的结果，那么一个有用的技巧是使用`_mm_madd_epi16`1 的乘数，例如

```
__m128i vsuml = _mm_set1_epi32(0);
__m128i vsumh = _mm_set1_epi32(0);
__m128i vsum;
int sum;

for (int i = 0; i < N; i += 16)
{
    __m128i v = _mm_load_si128(&x[i]);
    __m128i vl = _mm_unpacklo_epi8(v, _mm_set1_epi8(0));
    __m128i vh = _mm_unpackhi_epi8(v, _mm_set1_epi8(0));
    vsuml = _mm_add_epi32(vsuml, _mm_madd_epi16(vl, _mm_set1_epi16(1)));
    vsumh = _mm_add_epi32(vsumh, _mm_madd_epi16(vh, _mm_set1_epi16(1)));
}
// do horizontal sum of 4 partial sums and store in scalar int
vsum = _mm_add_epi32(vsuml, vsumh);
vsum = _mm_add_epi32(vsum, _mm_srli_si128(vsum, 8));
vsum = _mm_add_epi32(vsum, _mm_srli_si128(vsum, 4));
sum = _mm_cvtsi128_si32(vsum); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-29T13:17:23.383

如果您需要对字节向量进行符号扩展而不是零扩展，请使用[`pmovsxbw`( `_mm_cvtepi8_epi16`)](https://software.intel.com/sites/landingpage/IntrinsicsGuide/#techs=SSE,SSE2,SSE3,SSSE3,SSE4_1,SSE4_2,AVX,AVX2,Other&expand=138,140,3965,3962,3965,3962,3244,1317,1454,1454&text=pmovsx)。与 unpack hi/lo 指令不同，您只能从 src 寄存器的低半/四分之一/八分之一执行 pmovsx。

但是，您可以直接从内存中 pmovsx，即使内在函数使这非常笨拙。由于在大多数 CPU 上，shuffle 吞吐量比负载吞吐量更受限制，因此执行两个 load+pmovsx 可能比执行一个 load + 三个 shuffle 更可取。

# html - 将 display:block 应用于表格单元格 td 时表格布局不正确

> ID：10637215
> 
> 赞同：0
> 
> 时间：2012-05-17T14:02:48.327
> 
> 标签：html, css

我想在突出显示的表格单元格的角落添加一个三角形（使用 CSS 边框和 :before）。如果我使用默认的 display:table-cell，它不会正确添加到单元格的角落，而是添加到表格的角落。所以我使用 display:block 那个表格单元格。

这是代码：

```
.cell-highlighted-triangle {
    display: block;
    position: relative;
}

.cell-highlighted-triangle:after {
    content: "";
    position: absolute;
    top: 0; right: 0;
    border-width: 0 20px 20px 0;
    border-bottom-color: transparent;
    border-right-color: #510FAD;
    border-style: solid;
} 
```

为了突出显示一个表格单元格，我使用了这个： td class="cell-highlighted-triangle"

然而，这是结果，它表明突出显示的列单元格 2、3、4 都被夹在了列 2 中。

[https://lh5.googleusercontent.com/-wUJrlaeugAI/T7UEbCdbA2I/AAAAAAAAAJM/_iu9ZxHrwGc/s519/pic.png](https://lh5.googleusercontent.com/-wUJrlaeugAI/T7UEbCdbA2I/AAAAAAAAAJM/_iu9ZxHrwGc/s519/pic.png)

非常感谢你帮助我！任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:04:38.363

试试 display: inline-block; 应该像内联和块之间的混合！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:07:47.140

您必须在样式中添加属性：内容：“”；

```
.cell-highlighted-triangle:after {
    content: "";
    position: absolute;
    top: 0; right: 0;
    border-width: 0 20px 20px 0;
    border-bottom-color: transparent;
    border-right-color: #510FAD;
    border-style: solid;
} 
```

# vba - 执行 VBA 根据日历更改提醒时间

> ID：10637216
> 
> 赞同：0
> 
> 时间：2012-05-17T14:02:48.113
> 
> 标签：vba, outlook, ms-office

在 Outlook 2007 中创建的所有事件都具有相同的默认提醒时间。您似乎无法为单个日历更改此时间。

我在 Outlook 中使用了两个日历：我的正常“事件”日历和一个单独的日历，用于跟踪我想在特定时间处理的任务项目。我希望他们有不同的提醒时间（特别是任务一，0 分钟）。

我想在每次创建事件时执行一个宏：

*   检查日历名称
*   将属于 1 个日历的事件的提醒时间更改为 0 分钟

任何资源将不胜感激。我已经在 Excel 中完成了重要的 VBA 编程，但是 Outlook vba 上的文档（以及 Outlook 中缺少“记录宏”）使它变得很难，因为它对我来说真的不直观。

我正在尝试一些东西（基于大量搜索在黑暗中拍摄..）像这样（作为一个类模块）

```
Dim myOlApp As New Outlook.Application
Public WithEvents myOlItems As Outlook.Items

Public Sub Initialize_handler()
    Set myOlItems = myOlApp.GetNamespace("MAPI").GetDefaultFolder(olFolderCalendar).Items
End Sub

Private Sub myOlItems_ItemAdd(ByVal Item As Object)

Dim myCAlEntry As Outlook.MeetingItem

MsgBox ("test")

End Sub 
```

我应该澄清一下：我现在在创建日历事件时无法在消息框中看到“测试”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-14T19:47:13.280

在本期展望会议中：

```
Public Sub Application_Startup()
    Set myOlItems = myOlApp.GetNamespace("MAPI").GetDefaultFolder(olFolderCalendar).Items
End Sub 
```

您不需要 Dim myOlApp As New Outlook.Application：

```
Public Sub Application_Startup()
    Set myOlItems = Application.GetNamespace("MAPI").GetDefaultFolder(olFolderCalendar).Items
End Sub 
```

原始设置应适用于：

```
Public Sub Application_Startup()
    Initialize_handler
End Sub 
```

# c++ - 具有默认参数的 C++ 模板

> ID：10637220
> 
> 赞同：0
> 
> 时间：2012-05-17T14:02:58.723
> 
> 标签：c++, templates

我尝试在我的模板中使用默认参数，就像这样

```
#include <iostream>

using namespace std;

template <typename S, typename T=int> 
S myadd(T a, T b)
{
    S tmp = a + b;
    return tmp;
}

int main()
{
    int a = 1, b = 2;
    float i = 5.1, j = 5.2;

    cout << myadd<int, int>(i, j);
    cout << myadd<float>(a, b);

    return 0;
} 
```

然后 g++ myadd.cpp

它显示错误：

> 默认模板参数不能在没有 -std=c++0x 或 -std=gnu++0x 的函数模板中使用

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:17:45.253

我从 Stack Overflow 问题*[Default template arguments for function templates](https://stackoverflow.com/questions/2447458)*中提取了这个答案：

引用 C++ 模板：完整指南（第 207 页）：

> 最初将模板添加到 C++ 语言时，显式函数模板参数不是有效的构造。函数模板参数必须始终可以从调用表达式中推导出来。结果，似乎没有令人信服的理由允许默认函数模板参数，因为默认值总是会被​​推导的值覆盖。

阅读[Stack Overflow 问题](https://stackoverflow.com/questions/2447458)以了解更多信息。注意：函数模板 C++ 中的默认参数是 gnu++0x 中的一个新特性。

# php - 按日期对数组进行排序

> ID：10637223
> 
> 赞同：1
> 
> 时间：2012-05-17T14:03:23.583
> 
> 标签：php, date, sorting

我知道人们可以找到很多关于按日期排序数组的帖子。我挣扎了好几个小时试图对我的（'$MyArray'）进行排序但没有任何成功（而且我是 PHP 的新手，所以如果答案很明显，请原谅我）：

```
array(9) { 

    [0]=> array(1) {["13 March 2012"]=> string(32) "Commandes Anticorps et Kits 2012" }

    [1]=> array(1) {["4 May 2012"]=> string(23) "Prix de la Chancellerie" } 

    [2]=> array(1) { ["17 April 2012"]=> string(23) "MàJ antivirus Kapersky" }

    [3]=> array(1) { ["14 May 2012"]=> string(24) "Atelier Formation INSERM" }

    [4]=> array(1) { ["14 March 2012"]=> string(13) "Webzine AP-HP" }

    [5]=> array(1) { ["11 April 2011"]=> string(32) "Nouvelle Charte des Publications" }

    [6]=> array(1) { ["23 April 2012"]=> string(28) "BiblioINSERM: Nouveaux Codes" }

    [7]=> array(1) { ["7 March 2012"]=> string(39) "Springer : Protocols également en test" }

    [8]=> array(1) { ["4 October 2011"]=> string(48) "[info.biblioinserm] Archives des titres Springer" } 

    } 
```

所以我想按日期排序。

在我找到的各种解决方案中，我尝试过：

```
function date_compare($a, $b)
{
    $t1 = strtotime($a['datetime']);
    $t2 = strtotime($b['datetime']);

return $t1 - $t2;
} 
```

然后调用函数：

```
usort($MyArray, 'date_compare'); 
```

但它不起作用...... :-(

任何帮助都感激不尽！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:08:19.327

在您的内部数组中，日期字符串实际上是数组键。所以你需要自己调用`strtotime()`键。这用于`array_keys()`从两个比较数组中提取键，并`array_shift()`检索其中的第一个（尽管只有一个）。

```
function date_compare($a, $b)
{
    // Remove the first array key (though there should be only one)
    // from both the $a and $b values:
    $akeys = array_keys($a);
    $akey = array_shift($akeys);
    // Could also use
    // $akey = akeys[0];

    $bkeys = array_keys($b);
    $bkey = array_shift($bkeys);
    // Could also use
    // $bkey = bkeys[0];

    // And call strtotime() on the key date values
    $t1 = strtotime($akey);
    $t2 = strtotime($bkey);

    return $t1 - $t2;
}

usort($MyArray, 'date_compare'); 
```

# java - 时区日期解析

> ID：10637225
> 
> 赞同：0
> 
> 时间：2012-05-17T14:03:31.027
> 
> 标签：java, date, utc

我正在使用 SimpleDateFormat 解析 UTC 日期字符串，并将其解析为上一个日期。

```
DateFormat df = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss z"); 
```

此字符串“Fri, 06 Apr 2012 04:00:00 GMT”被解析为 2012 年 4 月 5 日。为什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:15:54.453

以下是日期转换的示例...

**对于您的程序，请进行相应的更改，并让我知道您得到了什么输出。**

```
 String dateStr = "Thu Jan 19 2012 01:00 PM";
    DateFormat readFormat = new SimpleDateFormat( "EEE MMM dd yyyy hh:mm aaa");

    DateFormat writeFormat = new SimpleDateFormat( "yyyy-MM-dd HH:mm:ss");
    Date date = null;
    try {
       date = readFormat.parse( dateStr );
    } catch ( ParseException e ) {
        e.printStackTrace();
    }

    String formattedDate = "";
    if( date != null ) {
    formattedDate = writeFormat.format( date );
    }

    System.out.println(formattedDate); 
```

输出是`2012-01-19 13:00:00`

## 根据您期望的输出进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T14:51:18.267

当心 JDK 1.5.0_22 (linux)。产生不正确的日期。切换到JDK 1.6 问题就没有了。

# mysql - 如何使用日期时间字段作为期间范围？有其他选择吗？

> ID：10637226
> 
> 赞同：1
> 
> 时间：2012-05-17T14:03:33.160
> 
> 标签：mysql, sql, datetime

我正在写一些关于我数据库中一些事件的字段，我想我可以这样做：

```
rangeType (varchar) (may be: daily, weekly, monthly, yearly)
rangeStart (datetime)
rangeEnd (datetime) 
```

我想`NOW()`在时间范围内匹配记录：

*   何时`rangeType`是`'yearly'`，如果日期`NOW()`介于 和 的月+日`rangeStart`之间`rangeEnd`

*   如果在和之间是`rangeType`什么时候`'monthly'``NOW()``rangeStart``rangeEnd`

*   什么时候如果`rangeType`是......`'weekly'``NOW()`

*   如果`rangeType`是`'daily'`的时间`NOW()`是什么时候......

我觉得这里每周需要特殊对待，整体结构不是那么灵活……

那我需要更多的领域！但我想要一些易于阅读和维护的东西……用 MySQL 做这件事的最好方法是什么？是否有一些功能可以让我在不编写和维护 SQL 行和行的情况下做到这一点？

那么 ISO8601 周期规范呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:11:41.740

像这样的东西？

```
SELECT ...
WHERE CASE rangeType
  WHEN 'daily'   THEN TIME(      NOW()) BETWEEN TIME(      rangeStart) AND TIME(      rangeEnd)
  WHEN 'weekly'  THEN DAYOFWEEK( NOW()) BETWEEN DAYOFWEEK( rangeStart) AND DAYOFWEEK( rangeEnd)
  WHEN 'monthly' THEN DAYOFMONTH(NOW()) BETWEEN DAYOFMONTH(rangeStart) AND DAYOFMONTH(rangeEnd)
  WHEN 'yearly'  THEN DAYOFYEAR( NOW()) BETWEEN DAYOFYEAR( rangeStart) AND DAYOFYEAR( rangeEnd)
END 
```

# apache - 如何设置 apache 在文件扩展为文件名本身后重写任何内容？

> ID：10637227
> 
> 赞同：1
> 
> 时间：2012-05-17T14:03:37.703
> 
> 标签：apache, .htaccess, redirect, trailing-slash

如何在 httpd.conf 中进行设置，以便对任何 filename.php/xyz 的任何请求都应重定向到 filename.php 或至少发送 404 错误。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:11:48.277

```
AcceptPathInfo Off 
```

[http://httpd.apache.org/docs/2.0/mod/core.html#acceptpathinfo](http://httpd.apache.org/docs/2.0/mod/core.html#acceptpathinfo)

# php - 无法打开输入文件应用程序/控制台

> ID：10637230
> 
> 赞同：20
> 
> 时间：2012-05-17T14:03:53.350
> 
> 标签：php, symfony

我安装了 wamp 服务器和 Symfony2 框架的副本。我正在尝试使用以下命令创建一个 Bundle：

```
php app/console generate:bundle --nampespace=IDP/IDP_Bundle --format=yml 
```

我的 PHP 在`C:/wamp/bin/php/php5.3.10`

但是当我运行命令时它说：

```
could  not open input file app/console 
```

谁能告诉我出了什么问题？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2014-06-16T10:44:31.410

要执行命令，您应该移动到终端/CMD 中项目的根目录。

请注意，`version 2.5`已经进行了一些更改，因此命令将无法使用`app/console`

**注意：**从 2.5`app/console`替换为`bin/console`.

请[在此处](https://github.com/symfony/symfony/blob/master/UPGRADE-3.0.md)查看更改。另请检查[此](https://stackoverflow.com/a/23994473/631652)以获取有关差异的更多详细信息。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-05-20T13:28:46.017

不要从 php 路径运行命令。

将 php 添加到路径环境变量中

然后 cd 到项目

```
C:/wamp/www/yourproject 
```

然后运行命令

```
php app/console generate:bundle --nampespace=IDP/IDP_Bundle --format=yml 
```

它会工作

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-06-07T20:45:34.480

对于较新版本的 Symfony（2.4.x 或更新版本），在 windows 上使用此方法来解决问题：

1.  转到项目目录，例如 d:/xampp/symfony2-project/ 并打开 composer.json 并将其放在 requires array 下`"symfony/console": "2.4.*@dev"`。并保存文件。
2.  打开命令行并 cd 到项目目录。
3.  使用此命令让下载和安装依赖项：`php path/to/composer.phar install`. 请记住，您应该在项目目录中，并且 path/to/composer.phar 是 composer.phar 文件的实际路径。
4.  现在你已经完成了，只需使用`php bin/console generate:bundle --namespace=Test/PrintBundle --format=yml`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-17T23:53:39.830

实际上，您需要在项目根目录中运行此命令，并且必须将 php 目录添加到系统环境路径变量中。

1.  将您的 php 目录添加到系统路径变量
2.  cd 到项目的根目录

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-05-19T17:23:15.093

我正在使用 Symfony 3 和 Bundle 日历包。此错误出现在以下文档中：Bundle: [https://github.com/adesigns/calendar-bundle](https://github.com/adesigns/calendar-bundle)

正确的形式是：

```
php bin/console assets:install web 
```

问候

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-18T04:33:53.747

首先检查高级系统设置中的环境变量->设置路径，`C:/wamp/www/bin/php`然后

运行 cmd-> 使用 cd 转到 www 文件夹中的项目目录`C:/wamp/www/yourproject`

然后使用`php app/console`显示所有命令的用户。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-17T17:12:55.903

听起来您（即您的用户）无权访问 read/execute `console`。我从来没有使用过 WAMP 堆栈上的文件权限，所以我不确定你需要做什么来修复它们。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-23T11:51:21.283

你也有可能有这条线：

```
//umask(0000); 
```

在您的`/web`文件中，`app_dev.php`.

如果在做之后：

```
php app/console generate:bundle --nampespace=IDP/IDP_Bundle --format=yml 
```

在您的项目路径中，您仍然无法生成捆绑包，请尝试取消注释 unmask 行。它对我有用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-08-08T11:27:58.147

我在安装 pear 库时遇到了同样的问题

我的问题是，下载**go-pear.phar 文件时，它下载为**我没有看到的 (.txt) 扩展名。

jst 将文件扩展名更改为 .phar 并运行代码

# javascript - 可以用javascript动态设置给定元素本身的aria-live属性吗？

> ID：10637231
> 
> 赞同：2
> 
> 时间：2012-05-17T14:03:55.463
> 
> 标签：javascript, html, wai-aria

更具体地说，如果使用 javascript 设置它，屏幕阅读器/AT 软件是否仍会拾取该属性并正确地向用户宣布元素内的任何更改，即使它在页面加载时不存在？

如果有人对此有任何经验，我将不胜感激您的任何细节。

这是我想要实现的一个例子......

在javascript调用之前：

```
<body> 
```

使用 jQuery（或其他）设置属性...

```
$('body').attr('aria-live', 'polite'); 
```

通话后：

```
<body aria-live="polite"> 
```

提前感谢任何有任何补充的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:57:21.890

是的，根据上下文，读者将获取属性的更改并向用户宣布更新。这使读者可以作为聊天或电子邮件客户端使用，这也是 aria-live 属性的目的。一个用例是“aria-selected”属性，它可以分配给导航元素，并且可以用来指示“活动”导航项。

[Mozilla 开发者网络 ARIA 实时区域](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Live_Regions)

# java - 如何使用 BigDecimal 正确划分

> ID：10637232
> 
> 赞同：57
> 
> 时间：2012-05-17T14:03:58.060
> 
> 标签：java, bigdecimal

我的代码示例：

```
import java.math.*; 

public class x
{
  public static void main(String[] args)
  {
    BigDecimal a = new BigDecimal("1");
    BigDecimal b = new BigDecimal("3");
    BigDecimal c = a.divide(b, BigDecimal.ROUND_HALF_UP);
    System.out.println(a+"/"+b+" = "+c);
  }
} 
```

结果是： `1/3 = 0`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-05-17T14:12:17.327

您尚未为结果指定比例。请试试这个

2019 年编辑：更新了 JDK 13 的答案。因为希望您现在已经迁移出 JDK 1.5。

```
import java.math.BigDecimal;
import java.math.RoundingMode;

public class Main {

    public static void main(String[] args) {
        BigDecimal a = new BigDecimal("1");
        BigDecimal b = new BigDecimal("3");
        BigDecimal c = a.divide(b, 2, RoundingMode.HALF_UP);
        System.out.println(a + "/" + b + " = " + c);
    }

} 
```

请阅读[JDK 13](https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/math/BigDecimal.html#divide(java.math.BigDecimal,int,java.math.RoundingMode))文档。

*JDK 1.5 的旧答案*：

```
import java.math.*; 

    public class x
    {
      public static void main(String[] args)
      {
        BigDecimal a = new BigDecimal("1");
        BigDecimal b = new BigDecimal("3");
        BigDecimal c = a.divide(b,2, BigDecimal.ROUND_HALF_UP);
        System.out.println(a+"/"+b+" = "+c);
      }
    } 
```

这将使结果为 0.33。请阅读[API](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html#divide%28java.math.BigDecimal,%20int,%20int%29)

# php - PHP：为什么当我打印会话内容时忽略前导零？

> ID：10637234
> 
> 赞同：0
> 
> 时间：2012-05-17T14:04:04.787
> 
> 标签：php, javascript, jquery, session

打印内容会话时出现问题，因为创建会话时，变量是字符串（从 mysql 字段获取的 varchar）：

初始变量：09680040

打印带有警报或在 div 中显示：9680040

？？？

```
PHP CODE

$query = "SELECT nombre, apellidop, apellidom, tUser FROM users WHERE ncontrol = '$numeroControl'";
$result = mysql_query($query) or die (mysql_error());
$no_of_rows = mysql_num_rows($result);
if ($no_of_rows > 0) {
    $result = mysql_fetch_array($result);
    $_SESSION['n_control'] = $user['ncontrol'];
}

JS CODE
........
alert <?php echo $_SESSION['n_control'];?>;

JQuery CODE

('#div').html(<?php echo $_SESSION['n_control']; ?>); 
```

**编辑：**问题仅在显示警报时，以及在 jquery 中将内容放在 div 上时

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T14:19:36.013

```
('#div').html(<?php echo $_SESSION['n_control']; ?>); 
```

这会产生以下行，发送到您的浏览器：

```
('#div').html(09680040); 
```

这将被您的 Javascript 解析器解释为整数。只需在其周围加上引号即可使其成为字符串：

```
('#div').html('<?php echo $_SESSION['n_control']; ?>'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T14:20:20.973

这是一个[javascript](/questions/tagged/javascript "显示标记为“javascript”的问题")问题。[`$_SESSION`](http://php.net/_SESSION)它与或[`mysql_query`](http://php.net/mysql_query)部分无关。

本质上，您最终的 JS 代码将变为：

```
alert 09680040; 
```

忽略明显的语法错误，Javascript 会将其视为数字常量。

您必须在 PHP 代码中创建一个 Javascript 字符串以保留所有内容。使用[`json_encode`](http://php.net/json_encode).

```
alert(<?php echo json_encode($_SESSION['n_control']);?>); 
```

（无论哪种方式，您对问题的描述都不正确，示例代码当然不是您的实际代码。所以这是我的猜测答案..）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T14:11:41.933

尝试：

```
 $_SESSION['n_control'] = strval($user['ncontrol']); 
```

# ruby - Nokogiri xpath 查询结果为 String 而不是 NodeSet

> ID：10637237
> 
> 赞同：-1
> 
> 时间：2012-05-17T14:04:09.847
> 
> 标签：ruby, xpath, nokogiri

我有一个 Nokogiri 节点，我正在执行一个 xpath 查询，它应该返回一个 NodeSet。相反，它返回一个字符串。我检查了xml源，发现数据只包含一个元素而不是多个元素。

**它不应该返回一个只有一个值的 NodeSet，而不是一个字符串吗？我该如何处理？**

这是正确返回具有 2 个条目的 NodeSet的*伪xml：*

```
<root>
    <products>
        <product>
            <productID>1</productID>
        </product>
        <product>
            <productID>2</productID>
        </product>
    </product>
</root> 
```

这是*伪*xpath 查询：

```
//root/products/product 
```

如果 xml 只包含一个产品，我会得到一个 String 而不是一个带有 1 个条目的 NodeSet

```
<root>
    <products>
        <product>
            <productID>1</productID>
        </product>
    </product>
</root> 
```

**2012 年 6 月 12 日更新：**我仍然认为这是 Nokogiri 中的一个错误。上面的伪 xml 没有重现这种情况，但是我有几个来自客户端的 xml 示例，它们确实重现了这个问题。我可能会发布 xml 的混淆版本。无论如何，我已将代码更改为使用[XmlSimple](http://xml-simple.rubyforge.org/)而不是 Nokogiri。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:49:00.497

为我工作：

```
require 'nokogiri'

xml = "<root><products>
  <product><productID>1</productID></products>
</product></root>"

p Nokogiri.XML(xml).xpath('//root/products/product').class,
  #=> Nokogiri::XML::NodeSet

  Nokogiri::VERSION,
  #=> "1.5.2"

  RUBY_DESCRIPTION
  #=> "ruby 1.9.3p125 (2012-02-16) [x86_64-darwin11.3.0]" 
```

要么是您的 Nokogiri 版本不好（可能是依赖坏的 libxml2 版本），要么是您的代码完全不同，您需要为我们提供重现问题的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T22:05:14.987

我也遇到了这个“问题”，但是经过一番挠头后，我发现我做错了什么......我试图通过打印结果来调试 xpath

```
product_element = Nokogiri.XML(xml).xpath('//root/products/product')
print "product_element is - #{product_element}\n" 
```

打印出元素的字符串版本，但是当我使用

```
product_element = Nokogiri.XML(xml).xpath('//root/products/product')
p product_element 
```

正确地将其显示为 NodeSet。

...这可能不是发生在你身上的事情，但是

# python - 输入的最短代码

> ID：10637238
> 
> 赞同：3
> 
> 时间：2012-05-17T14:04:17.797
> 
> 标签：python, optimization, input, python-3.x

我正在尝试尽可能地为输入条件制作最短的代码。
**条件：**该数字应大于0。
**输入：**第一个数字确定下一个输入的数量。
例如：

```
4
1
-2
3
-4 
```

所以我只想附加到 list() 1 和 3。

这是我的代码：

```
n=int(input())
t=[]
for i in range(n):
    x = int(input())
    if(x>0):
        t.append(x)
print(t) 
```

我想知道它是否可以更短
我有想法，但它没有按我预期的那样工作 - “语法错误”：

```
n=int(input())
t=[x=int(input()) for x in range(n) if(x)>0)]
print(t) 
```

**编辑：**忘记了。我正在使用python3.1 ...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T14:09:01.187

这是一种方法：

```
[x for x in (int(input()) for _ in range(int(input()))) if x > 0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:08:27.017

```
filter(lambda x: x > 0, (int(input()) for i in range(int(input())))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T14:51:42.783

呃……打高尔夫球。:)

您在最短的尝试中放错了括号。您还可以通过使用嵌套列表推导来缩短一点（虽然不多），如下所示：

```
t = [ x for x in [int(input()) for y in range(input())] if x > 0]
print t 
```

该`range(input())`调用不需要强制转换为`int`，因为如果`range`没有传递`int`.

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-07-15T19:33:55.323

```
print sum(max(0,input())for _ in range(input())) 
```

# javascript - 刷新jquery数据表

> ID：10637243
> 
> 赞同：1
> 
> 时间：2012-05-17T14:04:32.510
> 
> 标签：javascript, jquery, jquery-datatables

我有两个分别具有 ids Tab1 和 Tab2 的表。

我通过代码在做什么：

在按钮的 onclick 事件中，Tab2 的一行被删除并添加到 Tab1。最初 Tab1 不包含任何数据，这就是为什么在 Tab1 表中我们使用以下代码显示“无可用数据”消息：

```
 this.oLanguage = {
            "sProcessing": "Processing...",
            "sLengthMenu": "Show _MENU_ entries",
            "sZeroRecords": "No matching records found",
            "sEmptyTable": "No Data Available",
            "sLoadingRecords": "Loading...",
            "sInfo": "Showing _START_ to _END_ of _TOTAL_ entries",
            "sInfoEmpty": "Showing 0 to 0 of 0 entries",
            "sInfoFiltered": "(filtered from _MAX_ total entries)",
            "sInfoPostFix": "",
            "sInfoThousands": ",",
            "sSearch": "Search:",
            "sUrl": "",
            "oPaginate": {
                "sFirst":    "First",
                "sPrevious": "Previous",
                "sNext":     "Next",
                "sLast":     "Last"
            },
            "fnInfoCallback": null
        }; 
```

但是当将一行添加到 Tab1 时，它很好，但它仍然显示消息“无可用数据”。这意味着表不会被刷新。

我在javascript中有以下代码：

```
var oTable1=null;
    var oTable2=null;
    $(document).ready(function() {
    oTable1 =$('#tab1').dataTable( {
    "bPaginate": false,
    "bInfo": false,
    "aSort": false
    }); 

     oTable2 =$('#tab').dataTable( {
    "bPaginate": false,
    "bInfo": false
} );

    }); 
```

我应该怎么做才能刷新表格，以便在添加数据后它不应该显示消息“无可用数据”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:29:44.480

使用`oTable.fnAddData`方法添加新行。

使用`oTable.fnDraw`方法调用重绘方法。

# java - 一次附加一个Java字符串

> ID：10637251
> 
> 赞同：0
> 
> 时间：2012-05-17T14:04:54.273
> 
> 标签：java, string

我有一个非常简单的问题，事实上我有点沮丧，因为我无法自己解决这个问题，但这里是：

```
strBuffer += arg.charAt( i ); 
```

通过这一行，我试图解析一个值并将其逐个字符地添加到新字符串中。我这样做是为了将一个长字符串分成一个较小的字符串数组。

例如，这个字符串

```
-time delayed -run auto -mode go_n_run 
```

会变成这个数组

```
strBuffer [0] = -time 
strBuffer [1] = delayed 
strBuffer [2] = -run 
strBuffer [3] = auto 
strBuffer [4] = -mode 
strBuffer [5] = go_n_run 
```

所以带有'+='的代码行不起作用，我的strBuffer中没有任何东西。所以我尝试了一些在论坛上发现的更“复杂”的东西：

```
strBuffer.concat( new String( new char[]{arg.charAt( i )} ) ); 
```

但同样的结果，strBuffer 中没有放入任何内容，

所以，任何提示将不胜感激

谢谢

编辑：这是完整的方法

```
String[] args = new String[2 * ARG_LIMIT];
        int index = 0;

        for( int i = 0; i < arg.length(); i++ )
        {
            String strBuffer = new String();

            if( arg.charAt( i ) != ' ' )
            {   

                            // The two methods I've tried
                strBuffer.concat( new String( new char[]{arg.charAt( i )} ) );

                strBuffer += arg.charAt( i );

            }
            else if( arg.charAt( i ) == ' ' )
            {
                args[index] = strBuffer;
                index++;
                strBuffer = "";
            }
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T14:07:14.007

我将假设这`strBuffer`是 java 的一个实例`StringBuffer`；如果是这样 - 你应该使用`strBuffer.append()`.

但是有一种更简单的方法可以做你想做的事情：

> String[] strBuff = arg.split(" "); //按空格分割

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:15:22.440

您应该使用 StringTokenizer。这是代码：

```
// the first parameter is the string to be parsed, the second parameter is the delimiters
StringTokenizer st = new StringTokenizer("-time delayed -run auto -mode go_n_run", " ");
while (st.hasMoreTokens()) {
    String s = st.nextToken();
    // append s to your strBuffer
    // ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T14:20:34.847

看起来你正在尝试重写[`String.split()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)

更具体地说，您正在以艰难的方式做到这一点：

```
String[] args = arg.split(" ",2*ARG_LIMIT); 
```

您尝试的方法无效，因为 strBuffer 无法生存到 for 循环的下一次迭代。这段代码可以工作：

```
 String[] args = new String[2 * ARG_LIMIT];

    int index = 0;
    String strBuffer = new String();

    for( int i = 0; i < arg.length(); i++ )
    {

        if( arg.charAt( i ) != ' ' )
        {   

            strBuffer += arg.charAt( i );

        }
        else if( arg.charAt( i ) == ' ' )
        {
            args[index] = strBuffer;
            index++;
            strBuffer = "";
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T14:08:07.863

试着打印出你从那行最后得到的字符本身。如果你没有得到任何字符，那么你显然没有得到你在参数数组中寻找的东西。

# c# - 读取和写入文本文件时出现意外输出

> ID：10637267
> 
> 赞同：4
> 
> 时间：2012-05-17T14:06:08.513
> 
> 标签：c#, file, io, streamwriter

我对 C# 中的文件有点陌生并且遇到了问题。从一个文件读取并复制到另一个文件时，最后一块文本没有被写入。下面是我的代码：

```
StringBuilder sb = new StringBuilder(8192);
string fileName = "C:...rest of path...inputFile.txt";
string outputFile = "C:...rest of path...outputFile.txt";

using (StreamReader reader = File.OpenText(fileName))
{
   char[] buffer = new char[8192];
   while ((reader.ReadBlock(buffer, 0, buffer.Length)) != 0)
   {
      foreach (char c in buffer)
      {
         //do some function on char c... 
         sb.Append(c);
      }

      using (StreamWriter writer = File.CreateText(outputFile))
      {
         writer.Write(sb.ToString());
      }
   }
} 
```

我的目标是以缓冲的方式读取和写入文本文件。在 Java 中，我可以通过以下方式实现：

```
public void encrypt(File inputFile, File outputFile) throws IOException
{
   BufferedReader infromfile = null;
   BufferedWriter outtofile = null;

   try
   {
      String key = getKeyfromFile(keyFile);
      if (key != null)
      {
         infromfile = new BufferedReader(new FileReader(inputFile));
         outtofile = new BufferedWriter(new FileWriter(outputFile));
         char[] buffer = new char[8192];
         while ((infromfile.read(buffer, 0, buffer.length)) != -1)
         {
            String temptext = String.valueOf(buffer);
            //some changes to temptext are done
            outtofile.write(temptext);
         }
      }
   }
   catch (FileNotFoundException exc)
   {
   } // and all other possible exceptions
} 
```

你能帮我找出问题的根源吗？

如果您认为可能有更好的方法来使用文本文件实现缓冲 i/o，我将非常感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:18:12.570

有几个“陷阱”：

1.  `c`无法更改（它是 foreach 迭代变量），您需要复制它以便在编写之前进行处理
2.  您必须跟踪缓冲区的大小，`ReadBlock`用会使输出变脏的字符填充它

像这样更改代码看起来很有效：

```
//extracted from your code
foreach (char c in buffer)
{
    if (c == (char)0) break; //GOTCHA #2: maybe you don't want NULL (ascii 0) characters in your output

    char d = c; //GOTCHA #1: you can't change 'c'

    // d = SomeProcessingHere();

    sb.Append(d);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:23:46.803

尝试这个：

```
 string fileName = @"";
        string outputfile = @"";

        StreamReader reader = File.OpenText(fileName);
        string texto = reader.ReadToEnd();

        StreamWriter writer = new StreamWriter(outputfile);
        writer.Write(texto);

        writer.Flush();
        writer.Close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T14:39:24.520

除非我遗漏了什么，否则您的问题似乎是您在每次块读取迭代时都覆盖了输出文件的现有内容。

你打电话：

```
 using (StreamWriter writer = File.CreateText(outputFile))
  {
     writer.Write(sb.ToString());
  } 
```

对于每个 ReadBlock 迭代。文件的输出只是被读取的最后一块数据。

来自File.CreateText 上的[MSDN文档：](http://msdn.microsoft.com/en-us/library/system.io.file.createtext.aspx)

> 如果 path 指定的文件不存在，则创建该文件。如果文件确实存在，则其内容将被覆盖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T14:20:35.373

如果你不关心carraign return，你可以使用[`File.ReadAllText`](http://msdn.microsoft.com/en-us/library/ms143368.aspx)

> 此方法打开一个文件，读取文件的每一行，然后将每一行添加为字符串的一个元素。然后它关闭文件。行定义为字符序列后跟回车符 ('\r')、换行符 ('\n') 或回车符后紧跟换行符。结果字符串不包含终止回车和/或换行。

```
StringBuilder sb = new StringBuilder(8192);
string fileName = "C:...rest of path...inputFile.txt";
string outputFile = "C:...rest of path...outputFile.txt";

// Open the file to read from.
string readText = File.ReadAllText(fileName );
foreach (char c in readText)
{
   // do something to c
   sb.Append(new_c);
}

// This text is added only once to the file, overwrite it if it exists
File.WriteAllText(outputFile, sb.ToString()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T14:23:34.513

这对你有用吗？

```
 using (StreamReader reader = File.OpenText(fileName))
       {
            char[] buffer = new char[8192];
            bool eof = false;

            while (!eof)
            {
                int numBytes = (reader.ReadBlock(buffer, 0, buffer.Length));
                if (numBytes>0)
                {
                    using (StreamWriter writer = File.CreateText(outputFile))
                    {
                        writer.Write(buffer, 0, numBytes);
                    }
                } else {
                    eof = true;
                }

            }
        } 
```

不过，您仍然必须注意字符编码！

# c++ - 使用 cv::waitKey 无需先调用 cv::namedWindow 或 cv::imshow

> ID：10637269
> 
> 赞同：3
> 
> 时间：2012-05-17T14:06:14.343
> 
> 标签：c++, qt, opencv

我正在使用 Qt 编写一个 GUI 程序并使用 OpenCV 进行一些视频处理。我在主 GUI 线程的标签中显示 OpenCV 进程的结果（在单独的线程中）。

我遇到的问题是 cv::waitKey 不起作用，除非我打开使用 cv::namedWindow 或 cv::imshow 打开的本机 OpenCV 窗口。有谁知道如何解决这个问题？

简短的例子：

```
void Thread::run()
{
    //needed variables
    cv::VideoCapture capture(0);
    cv::Mat image;

    //main loop
    //cv::namedWindow("test");
    forever
    {
        capture>> image;
        if(!image.data)
            break;
        emit paintToDisplay(convertToQImage(image));
        cv::waitKey(40);
    }
} 
```

带有`//cv::namedWindow("test");`ie 注释，程序因访问冲突错误而崩溃。

没有注释，程序显示完美，但有`cv::namedWindow("test");`一个窗口（名为测试）我不想要或不需要。有人吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T14:35:41.977

`cv::waitKey()`仅适用于 OpenCV 窗口，这不是您现在使用的。

我建议您调查一个 QT 替代方案，很可能`qSleep()`是由[QTest](http://doc.qt.nokia.com/4.7-snapshot/qtest.html)模块提供的：

```
QTest::qSleep(40); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T14:18:51.367

cv::waitkey 是 opencv 用于显示窗口的 gui 循环的一部分

如果您只是想等待按键，请参阅[QWaitcondition](http://qt-project.org/doc/qt-4.8/qwaitcondition.html)。

或者，您可以显示另一个没有图像的命名窗口，或者显示一个 1,1 像素的小图像而忽略该窗口

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T22:51:25.540

我找到了使用的解决方案`msleep()`。它很容易使用，因为它是类的成员`QThread`。

只是想我会更新这个，以防有类似问题的人找到这个线程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-28T17:59:59.840

你可以打电话

```
qApp->processEvents(); 
```

代替

```
cv::waitKey(40); 
```

在循环中使您的应用程序响应并让循环的其余部分完成他们的工作。

# c# - IScrollProvider 的自动化对等体始终为空

> ID：10637271
> 
> 赞同：1
> 
> 时间：2012-05-17T14:06:17.197
> 
> 标签：c#, wpf, silverlight, automation, scroll

我正在尝试实现一种方法将数据网格的滚动条移回此示例之后的先前位置[http://www.codeproject.com/Articles/109531/Controlling-and-Viewing-the-ScrollBar-Positions-的，](http://www.codeproject.com/Articles/109531/Controlling-and-Viewing-the-ScrollBar-Positions-of)但此方法始终返回 null，因此无法创建自动化。有谁知道为什么这总是返回null？

```
 public static IScrollProvider GetScrollProvider(DataGrid grid)
    {
        var p = FrameworkElementAutomationPeer.FromElement(grid)
            ?? FrameworkElementAutomationPeer.CreatePeerForElement(grid);
        return p.GetPattern(PatternInterface.Scroll) as IScrollProvider;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-29T16:23:54.043

古代历史，但至少当前版本似乎在所有情况下都具有魅力。

```
//p.GetPattern(PatternInterface.Scroll) as IScrollProvider;
{System.Windows.Automation.Peers.DataGridAutomationPeer}
    [System.Windows.Automation.Peers.DataGridAutomationPeer]: 
        {System.Windows.Automation.Peers.DataGridAutomationPeer}
    HorizontallyScrollable: true
    HorizontalScrollPercent: 0.0
    HorizontalViewSize: 81.44329896907216
    VerticallyScrollable: true
    VerticalScrollPercent: 29.062733871459486
    VerticalViewSize: 2.9625 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-19T17:21:39.237

我知道它是一个旧帖子，但如果有人遇到同样的问题，（像我一样），这就是我解决它的方法：

出于某种原因，当您使用 DataGrid 的滚动条时，如果用户还没有滚动，它会通知最大位置为 0，即使它不是。所以我在更新之前保存了最大值并在之后恢复它：

首先，我创建一个类来保存这些值。它可能是变量，但一个类似乎更有条理：

```
public class ScrollInfo
{
    public double HorizontalPosition;
    public double HorizontalMaximum;
    public double VerticalPosition;
    public double VerticalMaximum;
} 
```

在更新 ItemSource 属性之前，我使用此方法保存滚动信息：

```
public static ScrollInfo GetScrollInfo(this DataGrid grid)
{
    ScrollInfo oInfo = new ScrollInfo();

    ScrollBar sbHorizontal = grid.GetScrollbar(ScrollMode.Horizontal);
    oInfo.HorizontalMaximum = sbHorizontal.Maximum;
    oInfo.HorizontalPosition = sbHorizontal.Value;

    ScrollBar sbVertical = grid.GetScrollbar(ScrollMode.Vertical);
    oInfo.VerticalMaximum = sbVertical.Maximum;
    oInfo.VerticalPosition = sbVertical.Value;

    return oInfo;
} 
```

然后我调用此方法在更新后将此信息设置回网格：

```
public static void SetScrollPosition(this DataGrid grid, ScrollInfo info)
{
    if (info.HorizontalPosition > 0)
    {
        ScrollBar sbHorizontal = grid.GetScrollbar(ScrollMode.Horizontal);
        sbHorizontal.Maximum = info.HorizontalMaximum;
        grid.Scroll(ScrollMode.Horizontal, info.HorizontalPosition);
    }

    if (info.VerticalPosition > 0)
    {
        ScrollBar sbVertical = grid.GetScrollbar(ScrollMode.Vertical);
        sbVertical.Maximum = info.VerticalMaximum;            
        grid.Scroll(ScrollMode.Vertical, info.VerticalPosition);
    }
} 
```

我什至创建了一个 UpdateItemSource 方法来使事情变得更容易：

```
public static void UpdateItemSource(this DataGrid grid, IEnumerable itemSource)
{
    ScrollInfo oInfo = grid.GetScrollInfo();
    grid.ItemsSource = itemSource;
    grid.SetScrollPosition(oInfo);
} 
```

我使用的其他方法，我想我从发布问题的用户所做的同一个帖子中获取：

```
public static void Scroll(this DataGrid grid, ScrollMode mode, double position)
{
    // Get the scrollbar and convert the position to percent.
    var scrollBar = grid.GetScrollbar(mode);
    double positionPct = ((position / scrollBar.Maximum) * 100);

    // Scroll to a specfic percentage of the scrollbar.
    grid.ScrollToPercent(mode, positionPct);
}

public static void ScrollToPercent(this DataGrid grid, ScrollMode mode, double percent)
{
    // Fix the percentage.
    if (percent < 0)
        percent = 0;
    else if (percent > 100)
        percent = 100;

    // Get the scroll provider.
    var scrollProvider = GetScrollProvider(grid);

    // Scroll.
    switch (mode)
    {
        case ScrollMode.Vertical:                        
            scrollProvider.SetScrollPercent( System.Windows.Automation.ScrollPatternIdentifiers.NoScroll, percent);
            break;
        case ScrollMode.Horizontal:
            scrollProvider.SetScrollPercent(percent, System.Windows.Automation.ScrollPatternIdentifiers.NoScroll);
            break;
    }
} 
```

# android - 如何将 Imageview 图像发布到服务器？

> ID：10637272
> 
> 赞同：0
> 
> 时间：2012-05-17T14:06:23.760
> 
> 标签：android

我有一个图像视图，我在其中设置图像，然后单击该图像发送到服务器。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-22T18:12:44.550

添加库ٰVolley

```
compile 'com.android.volley:volley:1.0.0' 
```

和 AndroidManifest.xml 中的权限网

```
<uses-permission android:name="android.permission.INTERNET"/>   
<uses-permission android:name="android.permission.READ_PROFILE"/>
<uses-permission android:name="android.permission.READ_CONTACTS"/> 
```

拍摄imageview的照片并将其转换为字符串

```
 ImageView   ivImage1 = (ImageView ) findViewById(R.id.img_add1_send );

  String mmm=getStringImage( ( ( BitmapDrawable ) ivImage1.getDrawable( ) ).getBitmap( ) ); 
```

将照片功能转换为字符串

```
public String getStringImage(Bitmap bm){
    ByteArrayOutputStream ba=new ByteArrayOutputStream(  );
    bm.compress( Bitmap.CompressFormat.PNG,90,ba );
    byte[] by=ba.toByteArray();
    String encod= Base64.encodeToString( by,Base64.DEFAULT );
    return encod;
} 
```

并将字符串转换为 JSON

```
JSONObject requestJsonObject = new JSONObject( );
requestJsonObject.put( "image", mmm ); 
```

我们使用以下函数将 JSON 发送到服务器

```
 JsonObjectRequest jjj = new JsonObjectRequest( Request.Method.POST,
            "http://192.168.16.1/dashbDoard/wDaryounes/GetDShopDDDBojId.php", requestJsonObject,
            new Response.Listener< JSONObject >( ) {
                @Override
                public void onResponse( JSONObject response ) {

                    if ( response == 1 ) {

                        Toast.makeText( getApplication(), "yessss", Toast.LENGTH_SHORT ).show( );
                    } else {

                            Toast.makeText( getApplication(), "no", Toast.LENGTH_SHORT ).show( );

                        }
                    },new Response.ErrorListener( ) {
                        @Override
                        public void onErrorResponse( VolleyError error ) {

                        }
                    } );
                    jjj.setRetryPolicy( new DefaultRetryPolicy( 18000, DefaultRetryPolicy.DEFAULT_MAX_RETRIES, DefaultRetryPolicy.DEFAULT_BACKOFF_MULT ) );
                    Volley.newRequestQueue( G.context ).add( jjj );

            } 
```

在服务器上，很容易把这个字符串变成照片

代码 php

```
$image = $_POST['image'];

$decodedImage = base64_decode($image);

$location = "img/" . $title . "_" . rand(rand(5, 50), rand(500, 900)) .
            "_" . date("i") . "_" . date("d-m-Y") . ".jpg";

$resultOfCreatingImage = file_put_contents($location, $decodedImage);

if ($resultOfCreatingImage == false) {
    $error['error'] = "failure_creating_image";
} else {
    $q = "INSERT INTO ads( image) VALUES(?)";
    $res = $connect->prepare($q);
    $res->execute([$location]);
    if ($res->rowCount() > 0) {
        return 1;
    } else {
        return 0;
    }
} 
```

# c# - 搜索自定义类列表的属性

> ID：10637274
> 
> 赞同：0
> 
> 时间：2012-05-17T14:06:38.890
> 
> 标签：c#, list, if-statement, iteration, distinct

我有一个名为 CustomClass 的自定义类。它包含一个名为“Name”的变量和一个值列表（为了简单起见，我们将其设为一个 int - 实际上它是另一个自定义类，但原理应该相同）。

所以 ：

```
public class CustomClass {
   string name;

} 
```

我有一个`List<CustomClass>`.

当我尝试向这个 List 添加一个值时，我想要的逻辑是让这个 List 检查它是否包含一个与我要添加的值同名的 CustomClass。

如果是，则执行 x，否则执行 y。

我认为 listOfCustomClass.Contains(customClassToAdd.name) 在这种情况下不起作用，但这是我需要的功能。

这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:12:15.483

我认为您可以尝试类似 var x = MyList.Where(C=> C.Name == InsertedName) 并检查结果（未测试）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:15:32.407

您必须创建一个新类，我们称之为 CustomList，它继承自 IList<>，您可以在其中覆盖 add 方法，进行检查，然后将其添加到基础中。像这样的东西：

```
public class CustomList<T> : IList<T> where T : CustomClass
{
    private List<T> innerlist;
    public void Add(T item)
    {
        if(innerlist.Any(a => a.Name == item.Name)))
            innerlist.Add(item);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T14:16:39.043

您可以按如下方式使用 linq 执行此操作，但您必须公开 name 字段。

```
 List<CustomClass> list = new List<CustomClass>();
        CustomClass toCheck = new CustomClass();

        if (list.Any(p => p.name.Equals(toCheck)))
        {
            //do x here
        }
        else
        {
            //do y here
        } 
```

但是，如果您不想使用 linq，那么请在 CustomClass 中进行一些更改，如下所示

```
public class CustomClass
{
    string name;
    List<int> intLost = new List<int>();

    public override bool Equals(object obj)
    {
        return this.Equals(obj as CustomClass);
    }

    public override int GetHashCode()
    {
        return 0;
    }

    public bool Equals(CustomClass cc)
    {
        if (cc == null) return false;
        return this.name.Equals(cc.name);
    }
} 
```

然后你可以这样做。

```
 List<CustomClass> list = new List<CustomClass>();

        CustomClass toCheck = new CustomClass();
        if (list.Contains(toCheck))
        {
            //do x here
        }
        else
        {
            //do y here
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T14:20:31.357

在我看来，您想覆盖 List<CustomClass> 的 .Add() 行为。虽然您可以使用扩展方法，但我认为更好的解决方案是发明一个以某种方式扩展 List 的类。如果您需要对添加操作进行那种级别的控制，我建议您在集合类中实现 IList...

```
 public class CustomClassList : IList<CustomClass>
    {
        public void Add (CustomClass item)
        {
            if(this.Select(t => t.Name).Contains(item.Name))
                // Do whatever here...
            else
                // Do whatever else here...
        }

        // ... other IList implementations here ...
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-17T14:48:28.323

试试这个：

```
IList<CustomClass> list = new List<CustomClass>();

CustomClass customClass = new CustomClass();
customClass.name = "Lucas";

if((list.Tolist().Find(x => x.name == customClass.name)) == null)
{
    list.Add(customClass);
}
else
{
    //do y;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-17T14:14:08.077

您可以在 CustomClass 中覆盖 Equals(object o) 函数，这样如果两个 CustomClass 的名称相同，则它们被视为相等。然后

```
listOfCustomClass.Contains(customClassToAdd); 
```

应该管用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-17T14:15:59.757

另一种方法是在您的 CustomClass 上覆盖 Equals 方法，然后调用 List.Contains()

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-17T14:16:10.227

如果该`name`属性唯一标识了 CustomClass，那么您应该重载`Equals`和`GetHashCode()`。`List.Contains`不起作用的原因是在 HashCodes 下进行了比较。所以你需要重载`GetHashCode`和`Equals`类似这样的东西：

```
public override int GetHashCode()
{
    return this.name.GetHashCode();
}

public override bool Equals(object obj)
{
    var other = obj as CustomClass;

    if (other != null)
    {
        if (other.Name == this.Name)
        {
             return true;
        }
    }
    return false;
} 
```

# javascript - 为什么要在书签中检查 !document.xmlVersion？

> ID：10637275
> 
> 赞同：2
> 
> 时间：2012-05-17T14:06:42.900
> 
> 标签：javascript, dom, bookmarklet

我看到了一个[非常常见](http://www.google.com/webhp?q=b%26%26!document.xmlVersion)的小书签代码样板模式：

```
javascript:var%20b=document.body;if(b&&!document.xmlVersion){void(/*do_something_AWESOME_here*/);}else{} 
```

包含 !document.xmlVersion 检查的原因是什么？这仅仅是排除旧浏览器的问题吗？验证我们在 HTML 文档中，而不是在 XML 文档中？该[文档](https://developer.mozilla.org/en/DOM/document.xmlVersion)并没有完全澄清问题......我无法找到任何解释性陈述 - 它主要看起来像是复制和粘贴的情况。

更新于 2012 年 5 月 21 日，包括指向 Google 搜索模式的链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:10:58.627

正如文档所暗示的，旧版本需要检查文档是否被呈现为 xml 而不是 html。现在它在最新版本的浏览器中没有用。最新版本的浏览器中未使用 IT。

# c# - 按星期几标记 x 轴

> ID：10637277
> 
> 赞同：0
> 
> 时间：2012-05-17T14:06:50.360
> 
> 标签：c#, .net, winforms, charts

我正在尝试用图表可视化数据。我已经做了几个小时，需要做几天和几周来比较。这是我如何每小时可视化的示例代码，在周一，周二到周日的时间间隔内做同样的事情时遇到问题。我怎样才能做到这一点？

```
chart1.ChartAreas.Add("area");
chart1.ChartAreas["area"].AxisX.Minimum = 0;
chart1.ChartAreas["area"].AxisX.Maximum = 24;
chart1.ChartAreas["area"].AxisX.Interval = 1;
chart1.ChartAreas["area"].AxisY.Minimum = 0;
chart1.ChartAreas["area"].AxisY.Maximum = intYAxisMax;
chart1.ChartAreas["area"].AxisY.Interval= 10;

chart1.Series.Add("Electric");
chart1.Series.Add("Gas");

chart1.Series["Electric"].Color = Color.Red;
chart1.Series["Gas"].Color = Color.Green;

chart1.ChartAreas["area"].AxisX.Title = "Hours";
chart1.ChartAreas["area"].AxisY.Title = "KW/H";

Title objTest = new Title("Daily Data Usage");
chart1.Titles.Add(objTest);

Legend objLegend = new Legend("Testing");
chart1.Legends.Add(objLegend);

//chart1.Series["Electric"].Points.AddXY(20 , 203);
//chart1.Series["Gas"].Points.AddXY(11, 70); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:15:36.527

尝试这个：

```
chart1.Series["Electric"].IsXValueIndexed = true;

//Add data
chart1.Series["Electric"].Points.AddXY(1, 203);
chart1.Series["Electric"].Points.AddXY(2, 70);

//X-axis labels
chart1.Series["Electric"].Points[0].AxisLabel = "Sunday";
chart1.Series["Electric"].Points[1].AxisLabel = "Monday"; 
```

ETC...

# r - 将字符包名传递给帮助函数

> ID：10637281
> 
> 赞同：6
> 
> 时间：2012-05-17T14:07:01.150
> 
> 标签：r

这有效：

```
help(package="ggplot2") 
```

这不会：

```
x <-"ggplot2"
help(package=x)

# Error in find.package(pkgName, lib.loc, verbose = verbose) : 
#   there is no package called ‘x’ 
```

我怎样才能使我可以通过 x 来帮助打开帮助页面？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T14:09:41.197

将变量放在括号中：

```
x <-"ggplot2"
help(package=(x)) 
```

`?help`包参数的相当神秘状态的帮助文件：

> 为避免名称被解析，请使用例如 (pkg_ref)（参见示例）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T15:38:14.150

Both `help` and `library` calls for interpreting "character" class input can be constructed with `do.call`

```
 x <-"ggplot2"
 do.call(library, list(x))
 do.call(help, list(package=x)) 
```

# mysql - 检查等效行是否已存在的 INSERT 语句

> ID：10637286
> 
> 赞同：2
> 
> 时间：2012-05-17T14:07:19.850
> 
> 标签：mysql, sql

在 MySQL 数据库中，我有一个`test`包含两列`foo`和`bar`. 我正在尝试编写**一个单独的 SQL 语句**，仅当这样的行不存在时才插入一行。我尝试了以下方法，但如果表为空，则它不起作用：

```
INSERT INTO test (foo, bar) 
SELECT 'foo', 'bar'
FROM test
WHERE NOT EXISTS  
(SELECT 1 FROM test WHERE foo = 'foo' AND bar = 'bar')
LIMIT 1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:10:22.163

测试表是空的，所以 Select 中不会有任何记录。所以使用`Dual`table with `Select`。

```
 INSERT INTO test (foo, bar) 
    SELECT 'foo', 
           'bar' 
    From DUAL
    WHERE  NOT EXISTS (SELECT 1 
                       FROM   test  
                       WHERE  foo = 'foo' 
                              AND bar = 'bar') 
```

`DUAL`纯粹是为了方便那些要求所有`SELECT`语句都应该有`FROM`可能还有其他子句的人。MySQL 可能会忽略这些子句。`FROM DUAL`如果没有引用表，MySQL 不需要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T14:36:53.217

子句不必`EXISTS`引用您从中选择的表，并且由于您仅在`SELECT`for insert 语句中使用外部引用，您可以使用任何表进行选择，实际上您甚至不需要使用混凝土表，例如

```
INSERT INTO Test
SELECT  'foo', 'bar'
FROM    DUAL
WHERE   NOT EXISTS (SELECT 1 FROM test WHERE foo = 'foo' AND bar = 'bar'); 
```

[示例 SQL 小提琴](http://sqlfiddle.com/#!2/6c215/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T14:39:03.360

您是否尝试过类似的方法：

```
SELECT      'foo'
            , 'bar'
WHERE       1 NOT IN  (
                SELECT  CASE WHEN COUNT(*) < 1
                            THEN 0
                            ELSE 1
                        END
                FROM    test
                WHERE   foo = 'foo'
                        AND bar = 'bar'
            ) 
```

请注意删除`LIMIT 1`（我认为这`LIMIT 1`没有伤害，但我认为它也没有帮助，因为该子句在子查询之外）。

请注意，上述内容经过测试，适用于空表。

此外，对于上述`IN`内容，不是仅在返回非空集（或`EXISTS`为`EXISTS`的空集）时才返回 true `NOT EXISTS`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T14:15:13.803

我认为您不能从要插入的同一个表中插入结果集并检查该行是否存在。

无论如何，如果没有，我想这是一个解决方法：

```
INSERT INTO test t1 (foo, bar) 
ON DUPLICATE KEY update t1.foo=t2.foo; 
```

编辑：在您的原始查询中，我认为您正在从 select 语句中插入。显然你只想插入一个给定的手动元组，所以我改变了我的建议。即使桌子是空的，它也应该工作。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-17T14:11:52.113

可能使用`REPLACE INTO`which 将替换现有记录或创建新记录（如果不存在）。取决于您的内容的具体情况，但这种方法是否可行。

# linux - RCHAR 是否包括 READ_BYTES (proc/ /io)?

> ID：10637290
> 
> 赞同：6
> 
> 时间：2012-05-17T14:07:41.497
> 
> 标签：linux, io, linux-kernel, procfs, monetdb

我阅读`proc/<pid>/io`以测量 SQL 查询的 IO 活动，其中`<pid>`是数据库服务器的 PID。我在每个查询之前和之后读取值以计算差异并获取请求导致读取和/或写入的字节数。

据我所知，该字段`READ_BYTES`计算实际的磁盘 IO，同时`RCHAR`包括更多，例如 linux 页面缓存可以满足的读取（请参阅[了解 /proc/[pid]/io 中的计数器以](https://stackoverflow.com/questions/3633286/understanding-the-counters-in-proc-pid-io) 进行澄清）。这导致了一个假设，即`RCHAR`应该得出一个等于或大于 的值`READ_BYTES`，但我的结果与这个假设相矛盾。

我可以想象为 Infobright ICE 获得的结果会产生一些小的块或页面开销（值为 MB）：

```
 Query        RCHAR   READ_BYTES
tpch_q01.sql|    34.44180|    34.89453|
tpch_q02.sql|     2.89191|     3.64453|
tpch_q03.sql|    32.58994|    33.19531|
tpch_q04.sql|    17.78325|    18.27344| 
```

但我完全无法理解 MonetDB 的 IO 计数器（值为 MB）：

```
 Query        RCHAR   READ_BYTES
tpch_q01.sql|     0.07501|   220.58203|
tpch_q02.sql|     1.37840|    18.16016|
tpch_q03.sql|     0.08272|   162.38281|
tpch_q04.sql|     0.06604|    83.25391| 
```

我对包含的假设有误`RCHAR`吗`READ_BYTES`？有没有办法欺骗 MonetDB 可以使用的内核计数器？这里发生了什么？

我可能会补充一点，我会在每次查询之前清除页面缓存并重新启动数据库服务器。我在 Ubuntu 11.10 上，运行内核 3.0.0-15-generic。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T20:47:06.727

我只能想到两点：

[http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=blob;f=Documentation/filesystems/proc.txt;hb=HEAD#l1305](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=blob;f=Documentation/filesystems/proc.txt;hb=HEAD#l1305)

1：

```
1446 read_bytes
1447 ----------
1448
1449 I/O counter: bytes read
1450 Attempt to count the number of bytes which this process really did cause to
1451 be fetched from the storage layer. 
```

我读了“导致从存储层获取”以包括预读，无论如何。

2：

```
1411 rchar
1412 -----
1413
1414 I/O counter: chars read
1415 The number of bytes which this task has caused to be read from storage. This
1416 is simply the sum of bytes which this process passed to read() and pread().
1417 It includes things like tty IO and it is unaffected by whether or not actual
1418 physical disk IO was required (the read might have been satisfied from
1419 pagecache) 
```

请注意，这没有说明“通过内存映射文件访问磁盘”。我认为这是更可能的原因，并且您的 MonetDB 可能会映射出它的数据库文件，然后对它们执行所有操作。

由于其性质，我不太确定如何检查 mmap 上使用的带宽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-23T07:25:34.973

你也可以阅读Linux内核源代码文件：[/include/linux/task_io_accounting.h](http://lxr.free-electrons.com/source/include/linux/task_io_accounting.h?v=3.4)

```
struct task_io_accounting {
#ifdef CONFIG_TASK_XACCT
  /* bytes read */
  u64 rchar;
  /*  bytes written */
  u64 wchar;
  /* # of read syscalls */
  u64 syscr;
  /* # of write syscalls */
  u64 syscw;
#endif /* CONFIG_TASK_XACCT */

#ifdef CONFIG_TASK_IO_ACCOUNTING
  /*
   * The number of bytes which this task has caused to be read from
   * storage.
   */
  u64 read_bytes;

  /*
   * The number of bytes which this task has caused, or shall cause to be
   * written to disk.
   */
  u64 write_bytes;

  /*
   * A task can cause "negative" IO too.  If this task truncates some
   * dirty pagecache, some IO which another task has been accounted for
   * (in its write_bytes) will not be happening.  We _could_ just
   * subtract that from the truncating task's write_bytes, but there is
   * information loss in doing that.
   */
  u64 cancelled_write_bytes;
#endif /* CONFIG_TASK_IO_ACCOUNTING */
}; 
```

# dynamics-crm - 插件 CRM 2011 插件中的事件表单上的只读错误

> ID：10637292
> 
> 赞同：0
> 
> 时间：2012-05-17T14:07:43.450
> 
> 标签：dynamics-crm, dynamics-crm-2011, crm, dynamics-crm-4

我有一个问题，我真的想弄清楚如何最好地解决这个问题。我已经阅读了有关此错误的各种帖子，并且您似乎可以通过使用 JavaScript 来避免这种情况：

```
Xrm.Page.getAttribute("name").setSubmitMode("always"); 
```

这对我或插件内部不起作用。现在我的问题是，我的事件表单上有一个更新插件触发，它更新了一些字段。但是，当我尝试解决此案例或取消它时，我从更新插件中收到错误“该对象无法更新，因为它是只读的”我尝试了以下操作，如果有人能告诉我我在做什么，我将不胜感激错误的。我在针对事件表单进行预操作时注册为 SetState 的插件代码：

```
SetStateRequest setState = new SetStateRequest(); 
setState.EntityMoniker = new EntityReference(); 
setState.EntityMoniker.Id = incidentId; //Id which needs to be resolved/canceld 
setState.EntityMoniker.Name = "statecode"; 
setState.EntityMoniker.LogicalName = "incident"; 
setState.State = new OptionSetValue(); 
setState.Status = new OptionSetValue(); 
 SetStateResponse setStateResponse = (SetStateResponse)service.Execute(setState); } 
```

关于状态和状态，我很困惑我必须将其设置为什么值。当我的事件处于活动状态并且我正在尝试解决并取消该案例时，我只是收到了一个错误。如果有人可以在这里帮助我，我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T15:39:34.683

I think there are a few areas of confusion in your post...

```
Xrm.Page.getAttribute("name").setSubmitMode("always"); 
```

This is clientside code and will never have any bearing on the behaviour of your (serverside) plugin. It merely forces an attribute on the form to be submitted whether it has changed or not, during a save. If the record is in a read-only state, it will not change that fact.

I'm not at all clear what you are trying to acheive in your code. You mention that an update plugin is failing; you have posted code which would attempt to set the state of the incident to something (as @glosrob suggests, you are not providing any values in the `OptionSetValue` objects for `State` and `Status` so as you might already know, the code you have posted is invalid); you then state that you have registered your plugin on the `SetState` request. This means that it would fire if the user tries to set the state of the `incident`. Given that your code is itself trying to set the status of the `incident`, I'm not sure that it makes sense...

It sounds like what you want to do is, on update of an `incident`, set certain values. If the incident is in a read-only state, make it readable first, and then update the values. Do you then need to restore the state of the entity to it's former state? It sounds awkward and might perhaps suggest that there is a better way to meet your core requirement.

Maybe start with what you are trying to achieve and we can work from there :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T06:31:51.317

你应该删除

```
setState.EntityMoniker.Name = "statecode"; 
```

从你的代码。该字段`Name`有其他用途。

另外，您应该添加

```
setState.State.Value = 1;
setState.Status.Value = -1; 
```

# android - 如何将图像添加到图像视图

> ID：10637293
> 
> 赞同：0
> 
> 时间：2012-05-17T14:07:44.943
> 
> 标签：android, android-view

我想将自定义视图添加到我尝试过的图像视图中，但我没有得到。请任何人都可以帮助我。

代码：

```
View view = stduiesAdapter.getView(arg2, arg1, arg0);                   
view.setDrawingCacheEnabled(true);
view.buildDrawingCache();
Bitmap bm = view.getDrawingCache();
ivImageDrag.setImageBitmap(bm);//Here ivImageDrag is the Image View 
```

**问题：**这里我得到的位图值为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:27:17.027

这样做，

分配一个全局变量，

```
View view=null; 
```

将此添加到您的 onCreate()

```
view = stduiesAdapter.getView(arg2, arg1, arg0);                   
view.setDrawingCacheEnabled(true);
view.buildDrawingCache(); 
```

现在重写这个方法，

```
@Override 
public void onWindowFocusChanged(boolean hasFocus) 
{ 
     // TODO Auto-generated method stub 
     super.onWindowFocusChanged(hasFocus);
     Bitmap bm = view.getDrawingCache();
ivImageDrag.setImageBitmap(bm);
} 
```

这是您的视图被绘制的地方。因此，只有在这一点上，您才会获得 Bitmap 的值。

# android - 查找在 ScrollView 中单击的坐标

> ID：10637294
> 
> 赞同：2
> 
> 时间：2012-05-17T14:07:45.377
> 
> 标签：android, android-layout

是否可以找到我单击布局的位置？我有一个很大的 ScrollView，我想知道我点击了哪里。我的屏幕尺寸是 854x480，但 ScrollView 有 2000x480。如何找到我点击的坐标位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:16:39.523

在活动课上。

```
import android.view.MotionEvent;

...

@Override
public boolean onTouchEvent(MotionEvent e)
    {

    switch (e.getAction()) 
            {

    case MotionEvent.ACTION_DOWN: 
        float cordinate_X = e.getRawX(); 
        float cordinate_Y = e.getRawY();
        break;
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-07T06:53:48.797

你为什么不创建自定义监听器我下面的代码可以帮助你

```
import android.content.Context;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.widget.ScrollView;

public class ObservableScrollView extends ScrollView {

    private ScrollViewListener scrollViewListener = null;

    public ObservableScrollView(Context context) {
        super(context);
    }

    public ObservableScrollView(Context context, AttributeSet attrs,
            int defStyle) {
        super(context, attrs, defStyle);
    }

    public ObservableScrollView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public void setScrollViewListener(ScrollViewListener scrollViewListener) {
        this.scrollViewListener = scrollViewListener;
    }

    @Override
    protected void onScrollChanged(int x, int y, int oldx, int oldy) {
        super.onScrollChanged(x, y, oldx, oldy);
        // if (scrollViewListener != null) {
        // scrollViewListener.onScrollChanged(this, x, y, oldx, oldy);
        // }
    }

    private boolean mScrollable = true;

    public void setScrollingEnabled(boolean enabled) {
        mScrollable = enabled;
    }

    public boolean isScrollable() {
        return mScrollable;
    }

    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        switch (ev.getAction()) {
        case MotionEvent.ACTION_UP:
        case MotionEvent.ACTION_MOVE:
            // if we can scroll pass the event to the superclass
            if (mScrollable)
                return super.onTouchEvent(ev);
            // only continue to handle the touch event if scrolling enabled
            return mScrollable; // mScrollable is always false at this point
        default:
            return super.onTouchEvent(ev);
        }
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        // Don't do anything with intercepted touch events if
        // we are not scrollable
        if (!mScrollable)
            return false;
        else
            return super.onInterceptTouchEvent(ev);
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-03T07:19:49.287

我使用以下方法建立了在细长滚动视图上单击的坐标。

```
float yScrollPosition = event.getY();
DisplayMetrics metrics = new DisplayMetrics();
float logicalDensity = metrics.density;
float yPosition = yScrollPosition / logicalDensity; 
```

# javascript - 单击该链接时替换链接的文本区域

> ID：10637296
> 
> 赞同：0
> 
> 时间：2012-05-17T14:07:50.667
> 
> 标签：javascript, html, css

我想做与stackoverflow上的“添加评论”效果完全相同的事情。当用户单击链接（或按钮）时，我发现了很多关于如何打开文本区域（但它是弹出窗口）的信息，但我找不到这样做的方法：

当用户点击“Inscription by email”时

```
<div class="end-right-zone">
    <p>Inscription by e-mail</p>
</div> 
```

该区域被通过电子邮件注册所需的各种信息所取代：

```
<div class="inscription-by-email-deployed">
    <p>first name</p>
    <p>last name</p>
    <p>email</p>
</div> 
```

我没有开发太多示例，因为它与stackoverflow上的“添加评论”效果完全相同。先感谢您

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T14:10:26.847

你想要这样的东西，也许（使用jQuery）？

```
$(".end-right-zone p").click(function() {
    $(".end-right-zone").html($(".inscription-by-email-deployed").html());
}); 
```

或者，如果您想完全*替换* `.end-right-zone`，请尝试以下操作：

```
$(".end-right-zone p").click(function() {
    $(".end-right-zone").replaceWith($(".inscription-by-email-deployed"));
}); 
```

# foursquare - Foursquare 场地：梳理结果：这种方法是否允许丢失结果？

> ID：10637301
> 
> 赞同：0
> 
> 时间：2012-05-17T14:08:04.790
> 
> 标签：foursquare

我计划使用 Foursquare Venues 帮助用户填写一份关于他们将在我们网站上创建的活动地点的表格。

但是，有时事件位置在foursquare 的数据库中不存在或不准确。在这种情况下，我们计划要求用户手动输入我们将保存在我们自己的数据库中的事件位置信息。

下次用户输入一个位置时，我们会结合我们的数据库和 Foursquares 的结果来给他们建议。

我的问题是：**Foursquare api 使用政策是否允许和接受**？谢谢。

-- 我目前如何使用 Foursquare 场地的演示：http: [//karanverma.info/Ingressos/venues.html](http://karanverma.info/Ingressos/venues.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:59:17.470

是的，这是允许的。有关详细信息，请参阅[foursquare 政策](https://developer.foursquare.com/overview/community)页面。

它们**不允许**合并来自其数据库和 google 的数据，但它们允许您使用自己的数据进行扩展。

该链接包含所有不同的使用政策信息，不仅针对场地数据库，而且通常如果您有更具体的问题，您应该直接询问他们（[他们的支持页面的链接](https://developer.foursquare.com/overview/support)）

# regex - 使用正则表达式练习改进

> ID：10637303
> 
> 赞同：13
> 
> 时间：2012-05-17T14:08:11.940
> 
> 标签：regex

目前我正在读一本书正则表达式。书非常非常详细。尽管它在解释主题时给出了示例，但如果不进行大量练习/练习，就很难学习。

那么，你能推荐一个网站、一本书、一个正则表达式练习的地方，这样我就可以解决它们并帮助自己在阅读这本书时吸收正则表达式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T18:19:32.803

看看 Zed Shaw 的[Learn Regex the Hard Way](http://regex.learncodethehardway.org/book/)。它是免费的，作者提供了一种通过练习逐步学习该主题的方法。

之后，如果您想深入了解更多细节，您可以返回当前阅读或继续阅读[精通正则表达式，或者阅读](https://rads.stackoverflow.com/amzn/click/com/0596528124)[正则表达式食谱](https://rads.stackoverflow.com/amzn/click/com/0596520689)以了解问题和解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T19:03:40.543

[您可以使用http://regexpal.com](http://regexpal.com)和[http://www.regextester.com](http://www.regextester.com)上的工具以交互方式修改正则表达式。正则表达式库 ( [http://www.regexlib.com](http://www.regexlib.com) ) 中的用户贡献的正则表达式在某种程度上有点像策展人的鸡蛋，但您可以使用它来查看其他人如何解决特定问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-17T14:12:03.847

如果你使用[Python 试试这个](http://pythex.org/ "Python试试这个")

或[通用正则表达式](http://gskinner.com/RegExr/ "这个是通用的")。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T14:19:00.070

类似的问题已经在[这里](https://stackoverflow.com/questions/386325/where-can-i-find-a-collection-regular-expression-exercises-for-perl)和[这里](https://stackoverflow.com/questions/3856804/exercises-for-regular-expressions)发布，谷歌搜索把我带到了[这个](http://regex.sketchengine.co.uk/extra_regexps.html)页面。我个人建议你挑战自己。例如; 随便找一个网站，查看源代码并尝试编写一个返回元素所有`src`属性的正则表达式。`img`只需创造性地应对无用的挑战，我相信您可以想出足够多的挑战。

当我想提高我的正则表达式技能时，我编写了一个聊天机器人，它能够以不同的方式解释你的答案以找到它想要的信息。我还为脚本语言编写了一个解释器，它由诸如`Create a new confirm dialog, with the text "Are you sure you want to do this?".`. 勇于创新，挑战自我。

在 stackoverflow 上查看有关正则表达式的问题也是一个好主意。您可以尝试解决问题，如果问题已经得到解答，您可以查看答案并将其与您的答案进行比较。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-17T14:18:11.713

我可以推荐[正则表达式食谱](http://shop.oreilly.com/product/9780596520694.do)。它包含许多典型的、实用的正则表达式任务，并解释了这些任务的建议解决方案。

因此，如果您不立即阅读解决方案，您可以看看您能想出什么，并将您的结果与大师（Jan Goyvaerts 和 Steven Levithan）会做的比较。

# xamarin.ios - 在 monodevelop 中未启用发布到 TestFlight 菜单

> ID：10637306
> 
> 赞同：1
> 
> 时间：2012-05-17T14:08:16.687
> 
> 标签：xamarin.ios, monodevelop, adhoc, ipa, testflight

我正在使用 Monodevelop v3.0 和 Monotouch v5.2.11。当我尝试将我的应用发布到 testflight 时，未启用“发布到 TestFlight”菜单。我在网上搜索发现很少有人要求检查 iPhone IPA 选项中的“构建临时/企业包”并构建应用程序。

我尝试了所有的可能性。仍然没有启用菜单“发布到 TestFlight”菜单。我想我错过了一些基本步骤。任何人都可以帮助我吗？

我正在使用 Monotouch 评估版。testflight 会在评估版中工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:15:08.603

Testflight 服务仅适用于为**设备**构建的应用程序。

MonoTouch 评估版仅适用于**模拟器**。

您需要完整的许可证（以及为设备构建的应用程序）来测试 MonoDevelop 中的 Testflight 集成。

# opencart - opencart 会员跟踪不起作用

> ID：10637311
> 
> 赞同：0
> 
> 时间：2012-05-17T14:08:21.823
> 
> 标签：opencart, affiliate

我想跟踪从附属网站到我的购物车的访问者。我看到他们有附属跟踪，但我似乎找不到文档。我尝试将 ?tracking=idhere 添加到 URL，但它不起作用。我添加了一个会员并设置了佣金率，但仍然没有。

**更新：**使用版本 1.5.2.1。我基本上需要一个关于会员跟踪的方法。我从来没有使用过它或 opencart 很长时间。我可以看到任何体面的文档。会员跟踪是内置的，还是我需要第三方扩展来满足我的需求。

**更新 2：**我在购物车页面上转储了 $_SESSION 变量，但跟踪代码不存在。

```
Array
(
    [language] => en
    [currency] => USD
    [cart] => Array
        (
            [51] => 1
        )

    [captcha] => 93e639
    [vouchers] => Array
        (
        )

) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:49:37.980

跟踪不是通过会话完成的，而是通过 cookie 完成的。您可以在 index.php 文件中看到 cookie 代码

```
if (isset($request->get['tracking']) && !isset($request->cookie['tracking'])) {
    setcookie('tracking', $request->get['tracking'], time() + 3600 * 24 * 1000, '/');
} 
```

然后在结帐过程中捕获，您可以在

`/catalog/controller/checkout/confirm.php`

如果这不起作用，那么您要么没有为会员输入正确的 ID，要么由于某种原因没有正确保存/读取 cookie

# actionscript-3 - 如何避免在 Flex 中的警报消息中禁用背景

> ID：10637313
> 
> 赞同：0
> 
> 时间：2012-05-17T14:08:32.257
> 
> 标签：actionscript-3, apache-flex

请让我知道如何在 flex 中显示警报消息时避免禁用背景。我希望在显示警报框时能够输入，即单击或击键？是否可以？如何？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:59:31.097

调用 Alert.show 时，将 NONMODAL 标志添加到 flags 参数。所以是这样的：

```
Alert.show('Alert Text', 'Alert Title', Alert.YES|Alert.NO|Alert.NONMODAL); 
```

奇怪，但它应该工作。

[来源](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/Alert.html#show%28%29)

# ios - 如何在 iOS 5 中创建可以向任何方向滚动的视图，例如地图？

> ID：10637317
> 
> 赞同：0
> 
> 时间：2012-05-17T14:09:03.337
> 
> 标签：ios, uiview, uiviewcontroller, uiscrollview

如何在 iOS 5 上构建可自由滚动的视图？我的意思是，我需要构建一个可以从左到右和自上而下（任何方向）滚动的视图，它会留在那里。在这个视图中，我需要放置不同种类的对象。

（想象像地图一样滚动。-我正在使用 Storyboard。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T14:17:18.990

是的，UIScrollView。

并且不要忘记设置内容大小！（每个菜鸟——包括我在内——总是问同样的问题，*为什么我的 scrollView 不起作用？*）

=> `[scrollView setContentSize:CGSizeMake(1000, 2000)]`，例如。

**编辑 ：**

我刚看到你的评论。我不明白你所说的“在上面”。

我用自定义地图制作了一个应用程序，并使用 UIScrollView 来完成这项工作：它非常擅长。

您只需将每个可滚动元素添加为UIScrollView 的**子视图**。当然，将**contentSize**设置为适合子视图的框架。

# ios - MapView 上的活动指示器

> ID：10637318
> 
> 赞同：0
> 
> 时间：2012-05-17T14:09:07.973
> 
> 标签：ios, mkmapview, uiactivityindicatorview

我有一个奇怪的行为，我在 MAPVIEW 中间有一个活动指示器，在我在动画检查时显示的 XIB 中。

我有一个调用，它基本上会加载注释并将它们显示在视图上。

在这次通话中，我有活动指示器 startAnimating 和 stopAnimating。

问题是指示器只显示，第一次发生此加载调用时，所有后续调用都不会出现指示器。

我怀疑，一旦由 XIB 设置触发而不停止时被隐藏隐藏，它会以某种方式放在地图视图后面。所以当下一次 startAnimating 发生时，它正在动画但不可见.. 有意义吗？

我试图在 startAnimating 调用之前添加一个 [[self view] bringViewToFront:indicatorView] ，但它会随着bringViewToFront 而不是 VIEW 上的函数而死，我也不完全理解，因为 view 是 UIView 并且文档说这应该可以工作。

有任何想法吗？

# mongodb - 如何在 mongodb 中提取数组元素（即文档）？

> ID：10637320
> 
> 赞同：3
> 
> 时间：2012-05-17T14:09:18.547
> 
> 标签：mongodb

假设集合是这样的：

```
db.mytests.find()
{ "_id" : ObjectId("4fb277b89b8295a790efde44"), 
"mylist": [ 
    { "foo1" :"bar1", "foo2" : "bar2" }, 
    {"foo1" : "bar3", "foo2" : "bar4" } 
], 
"nonlist" : "nonlistVal" } 
```

在阅读[有关更新的 mongodb 文档](http://www.mongodb.org/display/DOCS/Updating)后，我想删除一个等于`mylist`的文档，我使用了这个：`foo1``bar1`

```
db.mytests.update({},{$pull:{'mylist':{'mylist.$.foo1':'bar1'}}}) 
```

但它失败了。为了找出问题，我插入了一个新数组来`mytests`使用它：

```
db.mytests.update({},{$set:{'anotherList':[1,2,3,4]}}) 
```

然后使用`db.mytests.update({},{$pull:{'anotherList':{$gt:3}}})`拉取 `4`数组中的元素`anotherList`，它成功了。

我想问题出在`mylist.$.foo1`? 你能告诉我删除数组中文档元素的正确方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T16:53:13.210

尝试改变：

```
db.mytests.update({},{$pull:{'mylist':{'mylist.$.foo1':'bar1'}}}) 
```

到：

```
db.mytests.update({},{$pull:{'mylist':{'foo1':'bar1'}}}) 
```

# java - 结束行字符阻止java从字符串中删除子字符串

> ID：10637323
> 
> 赞同：0
> 
> 时间：2012-05-17T14:09:29.150
> 
> 标签：java

我想从java中的字符串中删除以特定文本开头并以特定文本结尾的所有子字符串（示例）

所以我想删除

```
<tag> And everything in between  </endTag> 
```

我在标签之间有结束行字符。我想删除多项内容，但其中一项以

```
WHAT DO YOU WANT TO KNOW ? 
```

并以

```
<end> 
```

我努力了

```
text = text.replaceAll("WHAT DO YOU WANT TO KNOW \\?.*?<end>", ""); 
```

但它没有用

```
text = text.replaceAll("CHAPTER 18" , ""); works 
```

这是我要替换的一大块文本（只是一个示例，还有更多示例）（这是一本人类性行为书籍的作品，所以如果您感到不舒服，请不要阅读它，但我觉得里面没有任何东西这是不合适的）

```
 (Tons of text here) WHAT DO YOU WANT TO KNOW ?
    Most kids today know all about sex at an early 
    age. So why are people so uptight about 
    showing nudity on television? What do they 
    think it will do to their kids?
    Even in a society like ours, which has begun to discuss sex 
    more openly, it is still a diffi cult subject for children to 
    understand. Many parents believe that it is their job to 
    introduce the topic to their children, to explain it to them, 
    and to teach their children whatever values the parents 
    believe are appropriate. This may be undermined when 
    children see fairly uncensored sexuality on television, which 
    is usually shown without any discussion of values and 
    without any way to address the children’s questions about 
    what they are seeing. In the accompanying Sex in Real Life, 
    “Generation M,” we talk about research on the media 
    consumption habits of children and teenagers.
    REALResearch > Studies have shown that people are less 
    likely to remember the brand name of a product in an ad with sex 
    and violence than in an ad without (BUSHMAN & BONACCI, 2002).
    <end> (tons of text here) 
```

可能是我的文本格式器不允许 replaceAll 工作的方式吗？

**更新：**

它绝对是我删除它们的结束行字符并且它有效。但是我仍然想保留我的结束行字符有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:10:31.703

```
String s = "text that needs WHAT DO YOU WANT TO KNOW ? " +
        "more text that needs deletion <end>to stay";
System.out.println(s.replaceAll("(?s)WHAT DO YOU WANT TO KNOW \\?.*?<end>", "")); 
```

输出：

```
text that needs to stay 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:13:26.507

您可以在 Java 中使用正则表达式。使用正则表达式的方法之一是 String 的`replaceAll`方法：

```
String s2= s.replaceAll("<b>.*?</b>", ""); 
```

# ruby - 想知道请求是由 heroku 的哪个 dyno 提供的

> ID：10637324
> 
> 赞同：2
> 
> 时间：2012-05-17T14:09:38.480
> 
> 标签：ruby, heroku

我在 heroku 部署了一个 sinatra 应用程序，并且我已经将 web 工作扩展到 3 个 dyno，因此 web.1 web.2 和 web.3 分别为请求提供服务。我想在 ruby​​ 中从控制器操作中知道当前请求由哪个测功机提供服务，然后想将其保存在数据库中。我做了一些谷歌，但没有找到任何令人满意的答案。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:09:38.933

使用工作进程在启动时执行此操作可能有一种非常hacky的方法。

1.  您需要能够监视来自的输出`heroku logs --tail`，请参阅[https://github.com/dblock/heroku-commander](https://github.com/dblock/heroku-commander)以获取示例。工人阅读日志。
2.  工作人员向应用程序发出 HTTP 请求，例如。获取应用程序/dyno?id=uuid1。响应是响应的测功机的 MAC 地址，例如。麦克1。
3.  工作人员可以在日志中看到 uuid1 访问了 web.5，该 web.5 以它的 mac 响应。宾果游戏，工人现在知道了。
4.  PUT app/dyno?mac1=web.5&mac2=web.6 等。收到此消息的每个 dyno 都会将其 mac 与其中一个 mac 进行比较，并响应真/假，它现在知道自己是谁。
5.  重复直到工人已经到达所有测功机并且所有测功机都知道。
6.  定期注意测功机重新启动。

你必须想知道为什么你需要知道你是“web.1”。为什么不能是唯一的 UUID，比如机器的 MAC 地址？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:14:43.303

这真的没有办法知道。您没有从 Heroku 获得任何 HTTP 标头来指定哪个 Dyno 正在处理请求，因此无法判断。您能做的最好的事情就是让 Heroku 在某处流式传输您的所有日志（[syslog drain](https://devcenter.heroku.com/articles/logging#syslog-drains)），以便您可以解析日志文件并将请求 URI 匹配到 Dynos。

# java - 无法让基本的 Hello World Spring MVC 项目工作

> ID：10637327
> 
> 赞同：0
> 
> 时间：2012-05-17T14:09:41.667
> 
> 标签：java, spring, maven, spring-mvc

我下载并解压缩了 STS。然后我开始按照这里的教程创建一个简单的 Spring MVC 应用程序 - [http://www.javapassion.com/rebels/spring3_sts/](http://www.javapassion.com/rebels/spring3_sts/)

我去 File->New Spring Template Project->Spring MVC Project->(enter project name & package)->Finish

然后我右键单击我的项目->运行方式->在服务器上运行->完成

我得到以下信息 - ![在此处输入图像描述](../Images/6df6ad513f3fb384d62d86d9363b3d84.png)

然后我打开了 pom.xml 文件，它似乎包含错误，这是它包含的错误 -![在此处输入图像描述](../Images/72b2d9789a6534e7e860323af2ac057c.png)

那么有人知道出了什么问题以及如何解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T06:24:12.793

它非常简单的吉姆。不要恐慌。

只需右键单击您的项目，然后在**Run As**中单击**Maven Install**选项并享用一些茶点。过一段时间你回来的时候。检查您的控制台。如果它已停止，则意味着运行此示例项目所需的所有库都已由 maven 成功下载。

之后再次右键单击项目并转到**运行方式**并单击应该构建您的项目并为您创建战争文件的**Maven Clean 。**并且不要忘记检查应该显示**Build Success**的控制台。

在此之后只需检查您的项目结构。这不应该在项目的任何地方显示任何红色星号。

你去吧。现在您可以成功运行您的项目。

希望这对您有所帮助。

干杯。

# php - Mongo 或 MySQL 中的高级查询

> ID：10637333
> 
> 赞同：-1
> 
> 时间：2012-05-17T14:10:03.243
> 
> 标签：php, mysql, json, mongodb

我正在为它开发一个小型应用程序，我为使用 MongoDB 或 MySQL 进行内容存储而苦恼。

我有大约 2000 个 DB 内容片段，其中包含大量描述内容的元数据（id、名称、类型、描述性标签、颜色等、日期、视图等），现在我们需要返回一个匹配的对象数组某些标准，例如：

我们需要根据搜索或过滤器返回 30 个对象...

*   30% 的物体必须是动物
*   其中 30% 需要是图像
*   20% 需要是视频
*   15% 需要是产品
*   5% 需要是游戏

**但此外，在返回的 30% 的动物中，假设 X 数量必须是恐龙，X 必须是猴子，X 必须是鸟类。**

*对于图像也可以这样说，从 30% 的图像中，返回的对象必须是不同子类别（可爱、设计、时尚、食物、音乐等）的相同部分。*

如果这对任何人都有意义，那么您建议使用什么路径来获取返回这些对象的内容数据库，有些事情告诉我这使用 MongoDB 更容易完成，但我不完全确定。

Mongo 或 MySQL 中的任何建议和查询示例都将非常有帮助和赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:05:04.913

百分比部分可能是最难的。我想不出在 MongoDB 或 SQL 查询中表达这些百分比的好方法。您可能必须在应用程序端处理这个问题。

除了这个限制，MongoDB 应该更适合你。我假设元数据可能会有所不同，因此没有固定的架构。如果元数据属性始终相同，则关系数据库会更好。

我确实看到您的一些元数据是分层的。动物可以是恐龙，所以那里也有遗传。SQL 和 MongoDB 都不能很好地处理继承。

还有其他 NoSQL 选项。[4store](http://4store.org/)是一个三重存储，旨在存储 RDF 数据。RDF 可以很好地处理层次结构、继承、松散模式和查询。[Neo4j](http://neo4j.org/)等图形数据库也特别擅长这一点（尽管 4store 也可以处理图形）。

多个引擎的示例查询：

```
SELECT 
    *
FROM
    content
INNER JOIN
    classification
ON
    classification.content_id = content.id
INNER JOIN
    classification as classification2
ON
    classification2.content_id = content.id
WHERE
    classification.name = 'animal'
AND
    classification2.name = 'bird' 
```

您可以为更多分类过滤器进行更多连接。还有其他实现类似目标的方法，但这取决于您的数据将如何建模。

MongoDB 查询可能是这样的：

```
db.content.insert( { data: "foobar", classification: ["animal", "bird", "page"] } );
db.content.find( { classification: { $all: [ "animal", "bird" ] } } ); 
```

或者可能是这样的：

```
db.content.insert( { data: "foobar", type: { main: "animal", sub: "bird" } } );
db.content.find( { type: { $elemMatch: { main : "animal", sub: "bird" } } } ); 
```

使用 4store 的 SPARQL 查询可能类似于：

```
SELECT
    ?s ?p ?o
WHERE {
    ?s <rdfs:type> <myvocab:bird>
} 
```

您能详细介绍一下您的数据吗？

# asp.net-mvc - MVC 忽略路由

> ID：10637334
> 
> 赞同：0
> 
> 时间：2012-05-17T14:10:11.103
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

如何在我的 ASP.Net MVC 网站中创建到虚拟目录的忽略路由？

我的网站是 IT02:8069，我创建了一个虚拟目录 IT02:8069/AVR01，因为在此目录中我有具有此路径 IT02:8069/AVR01/2012/05/14/09/10/59000c00412.spx 的文件，但如果我尝试在这条路径上连接我得到错误 500.19。此路径内的所有文件都是 *.spx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:16:42.393

更新：试试这个：`routes.IgnoreRoute("AVR01/{*pathInfo}");`

# git - Capistrano 忽略 netrc 文件

> ID：10637336
> 
> 赞同：1
> 
> 时间：2012-05-17T14:10:22.473
> 
> 标签：git, github, capistrano, .netrc

我有一个使用 Capistrano 部署的 PHP Web 应用程序。我的公司从使用本地 git 存储库转移到将我们的代码存储在 Github 上。

由于一些我们无法控制的问题，我们无法使用 SSH 克隆我们的 Github 存储库。相反，我们必须使用 https。我们已经在我们的 Github 帐户上设置了一个只读用户，这样我们就可以使用 netrc 文件通过 HTTPS 从 Github 中提取，而无需提示输入用户名和密码。

这在命令行上可以正常工作，但是，从 Capistrano 脚本中，它仍然提示输入用户名和密码。这是我的 Capistrano 脚本的 deploy.rb：

```
require 'capistrano/php'

set :application, "app"
set :repository,  "https://github.com/mycompany/app.git"
set :deploy_to, "/var/www/html/app"

set :scm, :git
set :deploy_via, :remote_cache
set :copy_exclude, %w(.git)
set :git_enable_submodules, true
default_run_options[:pty] = true
set :use_sudo, true

role :web, "webbox01"
role :app, "webbox01" 
```

同样，`git clone https://github.com/mycompany/app.git`直接从命令行执行 a 可以正常工作，但在 deploy.rb 中它会失败。如果我像这样在 URL 中手动输入用户的用户名和密码，`https://rouser:password@github.com/mycompany/app.git`Capistrano 脚本就可以正常工作。

如果可以避免的话，我不想在文件中硬编码用户名和密码，但如果我必须这样做，我必须这样做。

提前感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T14:48:41.927

转到您之前使用 capistrano 部署的服务器，并在共享 capistrano 目录中编辑缓存的 git 配置文件。

共享/缓存复制/.git/config

删除原始部分中的任何剩余用户名，以便您的 url 看起来像：[https ://github.com/mycompany/app.git](https://github.com/mycompany/app.git)

# mysql - 用 LIKE 和 CONCAT % 比较两个表

> ID：10637339
> 
> 赞同：1
> 
> 时间：2012-05-17T14:10:38.813
> 
> 标签：mysql, pattern-matching, sql-like, concat

我有两张桌子

**USERS** 包含用户数据

手机
447777744444
447777755555
7777755555
7777766666

**MOBILEPHONES**包含手机号码

电话号码
7777744444
7777733333
7777755555
7777766666

如果我运行以下 SQL，它只返回完全匹配的数字并且不执行通配符搜索。

```
SELECT MobilePhones.*, users.FirstName FROM MobilePhones
LEFT JOIN users
ON (users.MobilePhone= MobilePhones.`Telephone No`)
WHERE users.MobilePhone LIKE CONCAT('%', MobilePhones.`Telephone No`, '%') 
```

我被退回

7777755555
7777766666

我想要的是

7777755555
7777766666
447777755555
447777744444

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:13:23.507

我认为您可能希望将您`WHERE`的子句移动到`ON`联接子句中，替换现有的`ON`子句，该子句正在执行完全匹配：

```
SELECT MobilePhones.*, users.FirstName 
FROM MobilePhones
LEFT JOIN users ON users.MobilePhone LIKE CONCAT('%', MobilePhones.`Telephone No`, '%') 
```

# objective-c - 我们可以将 .mp3 文件从音乐库上传到远程服务器吗？

> ID：10637341
> 
> 赞同：0
> 
> 时间：2012-05-17T14:10:49.960
> 
> 标签：objective-c, iphone

我正在尝试将`.mp3`文件（从**音乐库**）上传到远程服务器，并且我已经成功完成了。

现在我只想知道 Apple 是否会批准我的应用程序。我在某处读到音乐库中的文件受保护（受版权保护）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:54:29.643

只要不共享音乐，就允许复制——它必须保留在个人空间中。显然，您必须将所有事情都通知用户。

但是对于 Apple，只有尝试过才能知道。:-p

无论如何，祝你好运！看起来很有趣，所以回来报告！:-D

# mobile - 直接运营商计费提供商

> ID：10637344
> 
> 赞同：2
> 
> 时间：2012-05-17T14:10:51.670
> 
> 标签：mobile, payment-processing, billing

我一直在对支持美国直接运营商计费的应用内计费支付提供商进行一些研究。到目前为止，我发现 Google Play 支持运营商 AT&T、Sprint 和 T-Mobile。WAC 支持 AT&T。

任何人一直在与任何其他支付提供商合作或知道吗？

条件：

*   在美国支持运营商计费
*   不要使用高级短信
*   并支持多个运营商。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:44:13.690

我建议[http://bango.com/mobilebillingcoverage/](http://bango.com/mobilebillingcoverage/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T17:42:37.717

丛林支付。

另见：[http ://www.quora.com/Michael-Wel/answers](http://www.quora.com/Michael-Whel/answers)

# jqplot - jqPlot - 如何捕捉双击事件

> ID：10637347
> 
> 赞同：1
> 
> 时间：2012-05-17T14:10:59.247
> 
> 标签：jqplot

我正在使用最新版本的 jqPlot (v1.0.0b2_r1012) 来绘制我的直方图。

为了捕捉单击事件，我使用了“jqplotDataClick”，如下所示：

```
$('#myHistogram').bind('jqplotDataClick', function(ev, seriesIndex, pointIndex, data) {
    // Do something
}); 
```

是否可以捕获双击事件？

不幸的是，我一直无法在 jqplot.barRenderer.js 中找到这样的事件。

**更新：**

我对 jqplot.barRenderer.js 文件进行了以下两项更改：

**注册 jqplotDblClick 事件**

```
$.jqplot.BarRenderer.prototype.init = function(options, plot) {
    ...
    ...
    plot.postInitHooks.addOnce(postInit);
    plot.postDrawHooks.addOnce(postPlotDraw);
    plot.eventListenerHooks.addOnce('jqplotMouseMove', handleMove);
    plot.eventListenerHooks.addOnce('jqplotMouseDown', handleMouseDown);
    plot.eventListenerHooks.addOnce('jqplotMouseUp', handleMouseUp);
    plot.eventListenerHooks.addOnce('jqplotClick', handleClick);
    plot.eventListenerHooks.addOnce('jqplotDblClick', handleDblClick);
    //$.jqplot.eventListenerHooks.push(['jqplotDblClick', handleDblClick]); I've also tried this but without any luck
    plot.eventListenerHooks.addOnce('jqplotRightClick', handleRightClick); 
}; 
```

**实现handleDblClick函数**

```
function handleDblClick(ev, gridpos, datapos, neighbor, plot) {
    if (neighbor) {
        var ins = [neighbor.seriesIndex, neighbor.pointIndex, neighbor.data];
        var evt = jQuery.Event('jqplotDataDblClick');
        evt.pageX = ev.pageX;
        evt.pageY = ev.pageY;
        plot.target.trigger(evt, ins);
    }
} 
```

然后我在我的 JavaScript 文件中绑定 jqplotDataDblClick，如下所示：

```
$('#myHistogram').bind('jqplotDataDblClick', function(ev, seriesIndex, pointIndex, data) {
    alert("Ohayo!"); // Good morning in Japanese
}); 
```

但是，当我双击我的一个垂直条形图时，不会触发双击事件。我试过绑定“jqplotRightClick”，但这也不起作用。 **如果我使用“jqplotClick”，那么一切都按预期工作。**

有谁知道我在这里做错了什么？

**更新 2：**

**RE：我试过绑定“jqplotRightClick”，但这也不起作用。（看上面）**

我刚刚发现，为了捕捉这个事件，你必须设置以下内容：

```
captureRightClick: true, 
```

请参阅：[如何捕获右键单击事件](http://www.jqplot.com/deploy/dist/examples/barTest.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:27:48.953

[从“光标”插件](http://www.jqplot.com/src/plugins/jqplot.cursor.js)，他们处理它是这样的：

```
if (c.dblClickReset) {
  $.jqplot.eventListenerHooks.push(['jqplotDblClick', handleDblClick]);
} 
```

**编辑**

我可以通过绑定'jqplotDblClick'来捕获双击。我不必推动事件。抱歉误导，我上面的回答是为了表明该事件已经存在。[请参阅此处](http://jsfiddle.net/larsenmtl/WAA28/)的工作小提琴。我添加的唯一附加内容是使 div 不可选择的 CSS 规则，因为双击会选择它。

HTML：

```
<div id="chart1" style="margin-top:20px; margin-left:20px; width:300px; height:300px; -moz-user-select: -moz-none;-khtml-user-select: none;-webkit-user-select: none;-ms-user-select: none;user-select: none;"></div>​ 
```

JS：

```
$(document).ready(function(){
        $.jqplot.config.enablePlugins = true;
        var s1 = [2, 6, 7, 10];
        var ticks = ['a', 'b', 'c', 'd'];

        plot1 = $.jqplot('chart1', [s1], {

            seriesDefaults:{
                renderer:$.jqplot.BarRenderer
            },
            axes: {
                xaxis: {
                    renderer: $.jqplot.CategoryAxisRenderer,
                    ticks: ticks
                }
            }
        });

        $('#chart1').bind('jqplotDblClick', 
            function (ev, seriesIndex, pointIndex, data) {
                alert('hi');
            });
}); 
```

# python - Flask：保存上传文件时出现IOError

> ID：10637352
> 
> 赞同：11
> 
> 时间：2012-05-17T14:11:16.940
> 
> 标签：python, flask

我正在学习 Flask，并试图通过此处记录的上传文件模式进行工作：http: [//flask.pocoo.org/docs/patterns/fileuploads/](http://flask.pocoo.org/docs/patterns/fileuploads/)。我在 Windows 7 上的 Firefox 12 中工作，并在我的本地机器上以调试模式运行我的应用程序。

我正在逐字复制示例，除了 UPLOAD_FOLDER 变量的值，我已将其定义为`UPLOAD_FOLDER = '/uploads'`并创建了一个名为“uploads”的目录，该目录存在于应用程序根目录中（以及静态和模板目录）。

上传文件后，我收到错误：`IOError: [Errno 2] No such file or directory: '/uploads\\u.png'`

有趣的是，如果我为 uploads 文件夹指定一个原始字符串，该字符串直接指向我的机器上的上传文件，例如`UPLOAD_FOLDER = r'C:\Python27\projects\Flask\myproject\uploads'`，一切正常。

我没有以正确的方式指定目录吗？上传目录应该放在其他地方吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-11-28T04:29:01.157

为什么不试试这个，它对我有用。

```
APP_ROOT = os.path.dirname(os.path.abspath(__file__))
UPLOAD_FOLDER = os.path.join(APP_ROOT, 'static/uploads')
app.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-17T14:51:10.553

'/uploads' 开头的斜杠使路径规范成为绝对路径：前导斜杠代表文件系统层次结构的根。虽然这可能不是 Windows 上的确切工作方式，但 Python 以这种方式理解它是有意义的，因为它的路径处理函数是跨平台的。

'uploads/' 和 './uploads/' 形式是等价的，它们是相对的。

请注意，相对路径是相对于您不一定要控制的当前目录的，因此您可能需要为 UPLOAD_FOLDER 指定绝对路径。

# java - 我的 .exe 文件被视为对其他计算机的威胁.. 为什么？

> ID：10637354
> 
> 赞同：1
> 
> 时间：2012-05-17T14:11:28.753
> 
> 标签：java, exe, antivirus

我的网站上有一个 Java 程序 .exe ..

这是一个简单的程序，可以提问和回答..如果有人下载它是安全的

但是如果我的朋友尝试下载它，他们的防病毒软件会说“已检测到威胁”

有什么办法可以让下载更安全吗？

谢谢，

编辑：这是我的程序的截图..

实际上它是用 Jess 编写的，从具有 main 方法的 Java 类运行

[http://img706.imageshack.us/img706/1710/quizj.png](http://img706.imageshack.us/img706/1710/quizj.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:16:02.340

也许您可以尝试将文件上传到[https://www.virustotal.com/](https://www.virustotal.com/)。如果许多病毒扫描程序都说它已被感染，那么它肯定是，您应该通过硬（！）关闭电源来搜索您的计算机是否感染（因此不能执行病毒关闭挂钩），然后使用 live cd 扫描您的硬盘。

否则只是虚惊一场。你的应用程序是做什么的？你能提供截图或详细的错误信息吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:18:22.617

我正在反应

> 有什么办法可以让下载更安全吗

您可以使用小程序或更好地使用 Java Web Start 来分发您的 Java 应用程序，请查看[Webstart 教程](http://docs.oracle.com/javase/tutorial/deployment/webstart/index.html)

# c++ - 创建链表，模板化 Stack

> ID：10637355
> 
> 赞同：1
> 
> 时间：2012-05-17T14:11:30.430
> 
> 标签：c++

我正在尝试编译我的导师给我们的代码（不得不重新输入，但我找不到任何拼写错误）并且它不会编译。我们将在以后的任务中使用此代码，所以我想在我们到达那里之前让它工作。

它应该简单地创建一个基于链表的堆栈。我了解代码是如何工作的，我之前也做过模板，但我不知道为什么它不会编译。

第一个堆栈.h

```
#ifndef STACK_H
#define STACK_H
//Stack definition file
//Stack.h

template<class ItemType>
struct NodeType<ItemType>; //Line 9

template<class ItemType>
class StackType {
public:
    StackType();
    ~StackType();
    void MakeEmpty();
    void Push(ItemType);
    void Pop(ItemType &);
    bool IsEmpty() const;
    bool IsFull() const;
    ItemType Top();

private:
    NodeType* topPtr;
};

template<class ItemType>
struct NodeType<ItemType> {
    int info;
    NodeType<ItemType>* next;
}; //Line 34

#include "Stack.cpp"

#endif 
```

堆栈.cpp

```
//Stack implemenation
#include <iostream>

template<class ItemType>
StackType<ItemType>::StackType() { //Line 5
    topPtr=NULL;
}

template <class ItemType>
StackType<ItemType>::~StackType() { //Line 11
    MakeEmpty();
}

template <class ItemType>
void StackType<ItemType>::MakeEmpty() {
    NodeType<ItemType>* tempPtr;

    while (topPtr != NULL) {
        tempPtr = topPtr;
        topPtr = topPtr->next;
        delete tempPtr;
    }
}

template <class ItemType>
void StackType<ItemType>::Pop(ItemType & item) {

    NodeType<ItemType>* tempPtr;
    item = topPtr->info;
    tempPtr = topPtr;
    topPtr = topPtr->next;
    delete tempPtr;
}

template<class ItemType>
void StackType<ItemType>::Push(ItemType item) {
    NodeType<ItemType>* location;
    location = new NodeType<ItemType>;
    location->info = newItem;
    location->next = topPtr;
    topPtr = location;
}

template <class ItemType>
bool StackType<ItemType>::IsEmpty() const {
    return (topPtr=NULL);
}

template <class ItemType>
bool StackType<ItemType>::IsFull() const {
    return (false);
}

template<class ItemType>
ItemType StackType<ItemType>::Top() {
        return topPtr->info;
} 
```

和 main.cpp

```
#include <iostream>
#include "Stack.h"
using namespace std;

int main () {

    int whatever;
    StackType<int> s;
    s.Push(10);
    s.Push(1);
    s.Pop(whatever);
    return 0;

} 
```

我得到的错误是

> c:\users\geldhart\dropbox\cs210\stack\stack.h(9)：
> 错误 C2143：语法错误：缺少 ';' 在 '<'
> c:\users\geldhart\dropbox\cs210\stack\stack.h(9) 之前：
> 错误 C2059：语法错误：'<'
> c:\users\geldhart\dropbox\cs210\stack\stack.h( 34):
> 错误 C2753: 'NodeType': 部分特化不能匹配主模板
> Stack.cpp的参数列表
> c:\users\geldhart\dropbox\cs210\stack\stack.cpp(5):
> 错误 C2143: 语法错误: 缺少' ;' 在 '<'
> c:\users\geldhart\dropbox\cs210\stack\stack.cpp(5) 之前：
> 错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数
> c:\users\geldhart\dropbox\cs210\stack\stack。
> 错误 C2988：无法识别的模板声明/定义
> c:\users\geldhart\dropbox\cs210\stack\stack.cpp(5)：
> 错误 C2059：语法错误：'<'
> c:\users\geldhart\dropbox\cs210\stack\ stack.cpp(11):
> error C2588: '::~StackType': 非法全局析构函数
> c:\users\geldhart\dropbox\cs210\stack\stack.cpp(11):
> 致命错误 C1903: 无法从先前的错误中恢复(s)；停止编译

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:34:18.157

这种语法

```
template<class ItemType>
struct NodeType<ItemType>; //Line 9 
```

可能是为了部分专门化一些现有的`NodeType`.

要（转发）声明类型，您只需要

```
template<class ItemType>
struct NodeType; 
```

# xcode - 我可以在到达某个位置时发送短信吗-XCODE

> ID：10637357
> 
> 赞同：2
> 
> 时间：2012-05-17T14:11:33.430
> 
> 标签：xcode, gps, sms

我读过自动短信是不可能的，如果你通过应用程序发送短信，你需要用户交互，比如按下按钮。

但是，如果我的手机基于 gps 和具有该 gps 信息的存储记录显示在特定位置，那不是我需要的用户交互并且只是发送短信吗？

从我看到的代码中，如果按下按钮运行此代码并发送短信。

我要做的基本上是

如果我到达这个位置发送短信。在我看来，这不完全是自动短信，它的短信基于某些变量但没有用户交互。

这可能吗，我有什么意义吗哈哈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:22:33.700

作为一种解决方法，您可以使用一种可用的 SMS 服务来发送 SMS。如果您想要免费的解决方案，您可以使用运营商 email-sms 发送短信。此时您只需在代码中发送一封电子邮件。

# google-drive-api - 通过api获取文件信息

> ID：10637358
> 
> 赞同：0
> 
> 时间：2012-05-17T14:11:34.930
> 
> 标签：google-drive-api

我无法获取有关文件的信息。

这是我的情况：

*   我已登录谷歌云端硬盘
*   通过谷歌选择器我得到文件ID
*   然后我输入网址`https://www.googleapis.com/drive/v1/files/[file ID]`

但我收到以下错误：

```
{
 "error": {
  "errors": [
   {
    "domain": "usageLimits",
    "reason": "dailyLimitExceededUnreg",
    "message": "Daily Limit Exceeded. Please sign up",
    "extendedHelp": "https://code.google.com/apis/console"
   }
  ],
  "code": 403,
  "message": "Daily Limit Exceeded. Please sign up"
 }
} 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:28:57.060

您无法通过在浏览器中键入 url 来检索文件元数据。

相反，您需要使用有效的 OAuth 2.0 令牌发送授权请求。了解更多信息：

[https://developers.google.com/drive/about_auth](https://developers.google.com/drive/about_auth)

# mysql - 如何完成此查询？

> ID：10637359
> 
> 赞同：2
> 
> 时间：2012-05-17T14:11:35.600
> 
> 标签：mysql, sql

```
select * from workers where id = uid and age = uage`   -- sql1
select uid,uage from users where uage>20`              -- sql2 
```

我想`sql2`用作 的条件`sql1`，即`uid`and`uage`中使用的`sql1`来自`sql2`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T14:15:12.083

您可以加入两个表：

```
SELECT w.*
FROM workers w
INNER JOIN users u
ON w.id = u.uid AND w.age = u.uage
WHERE u.uage > 20 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:19:42.580

您可以使用临时表进行嵌套查询。Thr 第一个查询创建一个临时表，第二个查询。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-17T14:21:05.247

您可以使用子查询。
代码：

```
select * from workers where (id,age) =(select uid,uage from users where uage>20); 
```

# c++ - 类型不完整的模板的 typedef

> ID：10637363
> 
> 赞同：1
> 
> 时间：2012-05-17T14:11:43.610
> 
> 标签：c++

> **可能的重复：**
> [typedef 和不完整的类型](https://stackoverflow.com/questions/3074872/typedef-and-incomplete-type)

如果我做

```
class foo;
typedef list<foo> myList;
typedef myList::iterator myListIter;

class foo{}; 
```

如果代码编译，那么我可以假设程序在运行时不会导致未定义的行为吗？我相信代码应该可以工作，因为如果模板实例化尝试使用模板参数类型来实例化该类型的对象，编译器会在编译时捕获它。如果模板代码将它用作指针或引用，那么它肯定会在定义类型时获得定义；否则第一次使用 myList 会导致编译器错误。

请让我知道你的想法。请注意，这里的问题是关于代码何时编译的，而不是关于在模板实例化中使用不完整类型的标准。

# iphone - ALAssetsLibrary - 收到 ALAssetsLibraryChangedNotification 后崩溃

> ID：10637368
> 
> 赞同：10
> 
> 时间：2012-05-17T14:11:57.877
> 
> 标签：iphone, ios, alassetslibrary, alasset

我的应用程序的一部分有一个照片浏览器，有点类似于 Apple 的照片应用程序，带有一个用于浏览照片缩略图的初始视图控制器和一个在您点击照片时显示的详细视图。

我正在使用 ALAssetsLibrary 访问照片，并将 ALAsset URL 数组传递给我的详细视图控制器，以便您可以从一张照片滑动到下一张照片。

一切正常，直到我在从一张照片滑动到另一张照片时收到 ALAssetsLibraryChangedNotification（在细节视图控制器中），这通常会导致崩溃：

> 通知：资产库已更改 // 我自己的 NSLog 用于通知发生时
> 
> loading assets... // 当我开始在缩略图浏览器中重新加载资源时，我自己的 NSLog
> 
> 断言失败：（大小 == bytesRead），函数 -[ALAssetRepresentation _imageData]，文件 /SourceCache/AssetsLibrary/MobileSlideShow-1373.58.1/Sources/ALAssetRepresentation.m，第 224 行。

它崩溃的特定代码行是调用 [currentRep metadata] ，如下所示：

```
- (void)someMethod {
        NSURL *assetURL = [self.assetURLsArray objectAtIndex:index];
        ALAsset *currentAsset;

        [self.assetsLibrary assetForURL:assetURL resultBlock:^(ALAsset *asset) {

            [self performSelectorInBackground:@selector(configureDetailViewForAsset:) withObject:asset];

            } failureBlock:^(NSError *error) {
                    NSLog(@"failed to retrieve asset: %@", error);
        }];
}

- (void)configureDetailViewForAsset:(ALAsset *)currentAsset {
    ALAssetRepresentation *currentRep = [currentAsset defaultRepresentation];

    if (currentAsset != nil) {
        // do some stuff
    }
    else {
        NSLog(@"ERROR: currentAsset is nil");
    }

    NSDictionary *metaDictionary;
    if (currentRep != nil) {
        metaDictionary = [currentRep metadata];

        // do some other stuff
    }
    else {
        NSLog(@"ERROR: currentRep is nil");
    }
} 
```

我知道一旦收到通知，它会使对 ALAsset 和 ALAssetRepresentation 对象的任何引用无效......但是我应该如何处理它在尝试访问它的过程中使某些东西无效的情况？

我已经尝试设置一个 BOOL，就在收到通知以完全中止并防止 [currentRep metadata] 被调用时，但即使这样也不会每次都捕捉到它：

```
if (self.receivedLibraryChangeNotification) {
    NSLog(@"received library change notification, need to abort");
}
else {
    metaDictionary = [currentRep metadata];
} 
```

有什么我可以做的吗？在这一点上，我几乎准备放弃使用 ALAssetsLibrary 框架。

（请注意 Apple 开发论坛上描述相同问题的未解决线程：[https](https://devforums.apple.com/message/604430) ://devforums.apple.com/message/604430 ）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T11:09:15.337

似乎问题就在这里：

```
[self.assetsLibrary assetForURL:nextURL 

    resultBlock:^(ALAsset *asset) {
        // You should do some stuff with asset at this scope
        ALAssetRepresentation *currentRep = [asset defaultRepresentation];
        // Assume we have a property for that
        self.assetRepresentationMetadata = [currentRep metadata];
        ...
        // assume we have a method for that
        [self updateAssetDetailsView];
    } 

    failureBlock:^(NSError *error) {
        NSLog(@"failed to retrieve asset: %@", error);
    }]; 
```

获得用户资产后，最好通过向详细信息控制器子视图提供必要的数据或缓存以供以后使用来复制资产信息。它有助于避免 ALAsset 失效问题。当通知 ALAssetsLibraryChangedNotification 发送时，您可能需要丢弃详细信息控制器并从头开始查询库内容。

# java - 创建番石榴多图的紧凑方法？

> ID：10637369
> 
> 赞同：40
> 
> 时间：2012-05-17T14:12:03.533
> 
> 标签：java, generics, guava

如果我想`Multimap`用简单的默认值创建一个新的，我现在需要做一些类似的事情：

```
private final Multimap<Key, Value> providersToClasses = Multimaps
        .newListMultimap(
                new HashMap<Key, Collection<Value>>(),
                new Supplier<List<Value>>() {
                    @Override
                    public List<Value> get() {
                        return Lists.newArrayList();
                    }
                }); 
```

`Maps.newHashMap`...因为如果用于支持映射，Java 无法推断出正确的类型。当然，这可以重构为一个单独的方法，但是有没有办法写得更简洁呢？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-05-17T14:25:36.087

[`ArrayListMultimap.create()`](https://google.github.io/guava/releases/19.0/api/docs/com/google/common/collect/ArrayListMultimap.html#create())这么简单的案子为什么不用呢？这是创建简单 HashMap/ArrayList 的默认方法，这可能是最常用的多图。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-08-05T19:14:24.660

我在编写客户端和构建查询参数映射时遇到了这个问题。我喜欢构建多地图的一个简洁的模式是使用[`ImmutableMultiMap#builder`](https://google.github.io/guava/releases/19.0/api/docs/com/google/common/collect/ImmutableMultimap.html#builder())

```
Multimap<String, String> queryParams = 
  ImmutableMultimap.<String, String>builder()
    .put("key-1", "value-1")
    .put("key-1", "value-2")
    .build(); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2017-05-14T12:15:30.213

[Guava 文档](http://google.github.io/guava/releases/24.0-jre/api/docs/com/google/common/collect/ArrayListMultimap.html#create--)指出，`create`其他一些答案所倡导的方法“**将很快被弃用”**，有利于下面介绍的不同形式，因此应该避免。

从**Guava 21.0 开始**，推荐的创建`Multimap`值存储在`ArrayList`集合中的对象的方法如下：

```
MultimapBuilder.hashKeys().arrayListValues().build(); 
```

如果要指定映射中的预期键数和每个键的预期值数，还可以使用参数：

```
MultimapBuilder.hashKeys(expectedKeys).arrayListValues(expectedValuesPerKey).build(); 
```

最后，您可以`Multimap`使用以下构造从现有的创建一个新的：

```
MultimapBuilder.hashKeys().arrayListValues().build(multimap); 
```

如果你想使用你的数据结构以外`ArrayLists`的数据结构`Multimap`，你可以用其他一些数据结构替换调用，[这里](https://google.github.io/guava/releases/24.0-jre/api/docs/com/google/common/collect/MultimapBuilder.MultimapBuilderWithKeys.html)`arrayListValues()`列出。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-10-28T05:44:23.237

这是紧凑的解决方案：

```
Multimap<Integer, String> multi = HashMultimap.create(); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-09-16T08:22:50.487

在 Java 8 中，这对于各种多图来说要好得多。这有两个原因：

*   因为编译器使用[目标类型进行类型推断](https://docs.oracle.com/javase/tutorial/java/generics/genTypeInference.html)，所以您不必为构造函数提供显式类型参数`HashMap`。
*   [构造方法引用](https://docs.oracle.com/javase/tutorial/java/generics/genTypeInference.html)可用于创建`ArrayList`工厂。

它看起来像这样：

```
Multimap<Key, Value> providersToClasses =
    Multimaps.newListMultimap(new HashMap<>(), ArrayList::new); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-21T09:13:02.687

不过，要回答原始类型推断问题，您还可以使用 指定静态方法上的泛型类型`Maps.<Key, Collection<Value>>newHashMap()`，但肯定不会比`new HashMap<Key, Collection<Value>>()`（它可能更一致）更简洁。

# ant - Ant 构建文件来编译 NSIS 脚本

> ID：10637373
> 
> 赞同：0
> 
> 时间：2012-05-17T14:12:10.950
> 
> 标签：ant, nsis

我是 ANT 脚本的新手。我需要开发一个 Ant 脚本来编译 .nsi 脚本，该脚本是使用 NSIS 2.46 版本开发的。

我不知道如何开始。

有人可以建议如何执行此操作或在此处发布示例 Ant 脚本，该脚本执行编译放置在本地计算机驱动器上的脚本的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:04:57.553

除了将 makensis 作为[exec](http://ant.apache.org/manual/Tasks/exec.html)任务运行之外，还有一个[NSIS 插件](http://danielreese.com/nsis-ant/)下载此插件并将插件放入 lib 文件夹后，您可以像这样激活它：

```
<taskdef name="nsis" classname="net.sf.nsisant.Task">
  <classpath location="nsisant-{version}.jar">
</taskdef> 
```

完成后，您可以像这样运行 nsis 脚本：

```
<nsis script="some_script_path\build_me.nsi">
  <!-- eventually some defines here for controlling the nsis script -->     
</nsis> 
```

# python - 导入错误 - 没有名为 numpyio 的模块

> ID：10637376
> 
> 赞同：4
> 
> 时间：2012-05-17T14:12:17.313
> 
> 标签：python, import, numpy

有谁知道如何解决这个错误？

```
Exception Type: ImportError
Exception Value: No module named numpyio 
```

查看我的 python 代码，我的导入：

```
from scipy.io.numpyio import fwrite, fread 
```

你能帮助我吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T14:24:18.380

这是因为该`scipy.io.numpyio`模块在 SciPy 0.7 之后的某个时间被删除（例如，参见这个[线程](http://mail.scipy.org/pipermail/scipy-user/2011-June/029802.html)）。在 SciPy [Input/Output Cookbook 页面](http://www.scipy.org/Cookbook/InputOutput)中，您可以改用函数[`numpy.fromfile`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.fromfile.html)和[`numpy.nadarray.tofile`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.tofile.html)（参见“原始二进制”标题下）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T07:15:01.017

虽然`numpy.ndarray.fromfile()`允许您指定要读取的二进制格式（例如，'f' 表示浮点数），但该`.tofile()`函数没有这样的二进制选项。对于我们这些需要以特定格式编写二进制文件以供其他软件读取的人来说，这是一个非常不方便的不一致。不幸的是，开发社区似乎忽略了这个问题，因为似乎没有公开票。

我使用数组模块创建了一个简单的替换函数。基本代码如下所示：

```
def fwrite(filename, formatstring, ndarray):
    arr = array.array(formatstring, ndarray.flatten())
    f = open(filename, 'w')
    arr.tofile(f)
    f.close() 
```

到目前为止，这似乎有效。显然，这可以/应该用错误检查等来修饰。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T14:24:11.487

从[档案](http://article.gmane.org/gmane.comp.python.scientific.user/28056/match=fwrite)：

> numpy 数组的 I/O 函数已移至 numpy 所在的位置，或在提供重复功能时删除。使用 numpy.load 和 numpy.save 读取 numpy 自己的 .npy 格式的写入数组，loadtxt/savetxt 用于 ascii。

# git - 如何将裸 git 存储库转换为普通存储库（就地）？

> ID：10637378
> 
> 赞同：86
> 
> 时间：2012-05-17T14:12:31.773
> 
> 标签：git, git-bare

我有一个裸 git 存储库，但需要通过 ssh 访问和浏览其内容（在像用户体验这样的文件管理器中）。

我想我可以克隆它：

```
git clone -l <path_to_bare_repo> <new_normal_repo> 
```

但是，我的存储库大小约为 20GB，我没有空间来复制它。有没有办法将裸存储库就地转换为最终得到一个工作副本？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-05-17T14:39:39.837

**注意**：我在一个*非常简单*的 1-commit 存储库上对此进行了测试。仔细检查这一点，阅读[手册页](https://www.kernel.org/pub/software/scm/git/docs/git-config.html)，并且在遵循您在 StackOverflow 上找到的建议之前，总是很高兴您已备份。（你确实备份了，对吧？）

要将`--bare`存储库转换为非裸存储库：

1.  `.git`在存储库的顶层创建一个文件夹。
2.  将存储库管理事物（`HEAD branches config description hooks info objects refs`等）移动到`.git`您刚刚创建的内容中。
3.  运行`git config --local --bool core.bare false`以将本地 git-repository 转换为非裸机。
4.  *（通过[Tamás Pap](https://stackoverflow.com/users/240324/tam%c3%a1s-pap)的评论）*在第 3 步之后，您将看到您在分支`master`（或无论您的主分支是哪个）上，并且您的所有文件都被删除并且删除是分阶段的。这很正常。只需手动结帐`master`，或做一个`git reset --hard`，你就完成了。
5.  *（解决[Royi](https://stackoverflow.com/users/195787/royi)报告的问题）* 编辑`.git/config`文件在部分`fetch = +refs/heads/*:refs/remotes/origin/*`后添加行。否则将看不到和其他起源的分支。`url = <...>``[remote "origin"]``git fetch``origin/master`

[这些步骤与这个问题](https://stackoverflow.com/questions/2199897/git-convert-normal-to-bare-repository)的方向相反，“git-convert normal to bare repository” - 特别注意[这个答案](https://stackoverflow.com/a/2199939/1084945)，它指出上述步骤（我认为是任一方向）*与*执行`git-clone`. 不过，不确定这是否与您有关，但您`git clone`在问题中提到了。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-05-16T08:50:16.390

我有一个稍微不同的场景：

*   非回购（[从 gi​​thub 获取 tarball](https://stackoverflow.com/a/5746376/6309)）
*   从该内容恢复完整回购的需要。

解决方案：

*   在目录中克隆该内容中的裸仓库`.git`：
    `git clone --bare https://github.com/user/project .git`
*   将其标记为非裸回购：
    `git config --local --bool core.bare false`
*   重置索引（否则，它认为所有内容都已删除，因为`.git` *裸*仓库不包含文件“ `index`”。）
    `git reset HEAD -- .`
    恢复`.git/index`.

我已经有效地将一个裸仓库变成了一个非裸仓库，同时保留了我之前获得的内容。我多年来一直使用
的[完整脚本包括以下步骤：](https://github.com/VonC/compileEverything/blob/3fb31b840b6d03e28125ffccb69122c07cd63837/git/update-repo-git.sh#L3-L21)

```
cd /path/to/current/worktree

# That creates a .git directly at the right place
git clone --bare /url/of/repo .git

# restore the link between the local repo and its upstream remote repo
git config --local --bool core.bare false
git config --local remote.origin.fetch +refs/heads/*:refs/remotes/origin/*
git fetch origin
git branch -u origin/master master

# reset the index (not the working tree)
git reset HEAD -- . 
```

但我确实侦察了[公认的解决方案](https://stackoverflow.com/a/10637882/6309)（通过[ADTC添加的](https://stackoverflow.com/users/1134080/adtc)[有用`git reset`步骤](https://stackoverflow.com/posts/10637882/revisions)）更简单。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-04-25T15:06:51.343

为了简化和组合答案中的信息：

裸仓库与普通的 .git 文件夹存在三个不同之处：

*   core.bare 在配置文件中设置为 true
*   索引文件和工作树不存在
*   未生成“origin”遥控器的默认 refspec

因此，您可以简单地将裸仓库移动到新文件夹的 .git 子文件夹中，

```
mkdir clone
mv bare.git clone/.git 
```

更改 core.bare：

```
cd clone
git config --local --bool core.bare false 
```

添加一个默认的 origin refspec 来制作`git fetch`和`git push`选择与往常一样的默认值：

```
git config remote.origin.fetch '+refs/heads/*:refs/remotes/origin/*' 
```

并生成索引文件和工作树：

```
git checkout master 
```

我建议`git checkout`不要`git reset`生成文件，以防意外输入错误的位置。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-01-26T20:45:38.773

原始发帖人的问题是没有足够的空间以简单的方式做事。对于那些确实有足够空间的人来说，答案要简单得多：

```
git clone foo.git foo 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-05-17T14:49:56.157

如果您的磁盘空间不足，通过转换为普通存储库来扩展工作树将是一个问题，但您可以浏览裸存储库的内容而无需转换它。在任何提交上使用`git cat-file -p <commit-sha>`以查看它所引用的树。用于`git cat-file -p <blob-sha>`查看 blob 引用的文件的内容。使用`git show <sha>:path`where sha 是提交或树来查看路径中 blob 的内容。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-01-31T03:41:10.420

`cd`进入裸回购并做

1.  任何一个：

```
git config core.bare false
git reset --hard 
```

2.  或者

```
git clone X.git X 
```

（将为您提供名为 X 的常规 git 存储库）

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-08-28T12:30:04.227

如果您不介意在不同的工作树上工作，那么

```
git worktree add ../repo2
cd ..
git status # now works fine 
```

请注意，这不是克隆。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-31T18:06:02.200

**推送部署**

您可以使用 hooks 目录中的 post-receive 脚本将存储库扩展为部署目录，而不是将裸远程转换为标准存储库。

[这是设置 Push-to-Deploy 的一个很好的示例](http://krisjordan.com/essays/setting-up-push-to-deploy-with-git)

为便于参考，这是来自上述链接的脚本内容示例。它只会将推送从“master”分支部署到名为“deploy”的目录，该目录与存储库的父目录处于同一级别：

```
#!/usr/bin/env ruby
# post-receive

# 1\. Read STDIN (Format: "from_commit to_commit branch_name")
from, to, branch = ARGF.read.split " "

# 2\. Only deploy if master branch was pushed
if (branch =~ /master$/) == nil
    puts "Received branch #{branch}, not deploying."
    exit
end

# 3\. Copy files to deploy directory
deploy_to_dir = File.expand_path('../deploy')
`GIT_WORK_TREE="#{deploy_to_dir}" git checkout -f master`
puts "DEPLOY: master(#{to}) copied to '#{deploy_to_dir}'" 
```

# jquery - 使用 POST 将页面加载到 iframe

> ID：10637382
> 
> 赞同：2
> 
> 时间：2012-05-17T14:12:38.790
> 
> 标签：jquery, ajax, iframe

我想创建一个内部可见其他页面的 iframe。该页面在我的域之外。通常我会这样做：

```
$('<iframe />').attr('src','www.thepage.com?data=1').appendTo('body') 
```

但是如果`www.thepage.com`可以通过 POST 而不是 GET 访问，我应该如何加载它？`$.ajax( type:'POST',...)`由于失败`Origin null is not allowed by Access-Control-Allow-Origin.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:22:05.603

加载一个临时页面，该页面包含一个包含您需要（隐藏）的字段的表单，并使用 Javascript 提交表单。

这恰好是我之前提出的问题。 [Response.Redirect 使用 POST 而不是 Get？](https://stackoverflow.com/questions/46582/response-redirect-with-post-instead-of-get)

看看帕夫洛的回答。您可以看到他如何创建一个带有在加载正文时提交的表单的 html 页面。

# c++ - 一个快速的 C++ 查询

> ID：10637385
> 
> 赞同：1
> 
> 时间：2012-05-17T14:12:54.953
> 
> 标签：c++, string, class, function, polymorphism

> **可能重复：**
> [按返回类型重载](https://stackoverflow.com/questions/9568852/overloading-by-return-type)

为什么我不能像这样声明三个成员函数：

```
 void x(int a);
  void x(String a); 
  int x(String a); 
```

?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T14:14:07.347

因为你不能通过返回类型重载。

```
void x(string a) 
```

和

```
int x(string a) 
```

有相同的签名。签名由以下部分组成：

*   函数名
*   参数
*   cv 限定词

在您的情况下，它们是相同的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T14:14:27.190

C++ 不允许您根据返回类型重载函数。仅根据参数的类型允许函数重载。这意味着就重载规则而言，`void x(String a)`和`int x(String a)`被视为相同的功能。

一种可能令人困惑（但经常使用）的重要情况是将 when`const`放在成员函数的末尾。那看起来像`int number_of_peanuts(bool tasty_only) const`. `const`最后意味着这个成员函数所属的类不能被这个函数修改。

然而，这实际上只是参数类型重载的一个特例。当您有一个未声明的成员函数时，您的函数中`static`会隐式添加一个额外的参数，即 this`this`指针。这意味着我给出的示例函数大致相当于`int number_of_peanuts(Class const * this, bool tasty_only)`. 如果你在函数的末尾没有`const`，那么它会像`int number_of_peanuts(Class * this, bool tasty_only)`.

所以总而言之，参数的类型和数量是唯一允许你重载的东西。如果你按值传递，如`void x(int a)`，那么`const`不会给你超载的机会，因为外界无法分辨你是否修改副本。如果你通过引用传递或传递一个指针，那么你可以使用`const`他们所指的东西作为重载选项，所以`void x(std::string & a)`和`void x(std::string const & a)`不同，因为世界可以判断你是否修改了 a 。放在`const`函数的末尾是另一个过载机会的来源。最后，也是最明显的，`void x(int a)`and`void x(int a, int b)`是一个合法的过载，因为你有不同数量的参数。

# memory - java.lang.OutOfMemoryError：我的 ant junit 任务上的 Java 堆空间，即使我设置了 maxmemory="1024m"

> ID：10637386
> 
> 赞同：2
> 
> 时间：2012-05-17T14:12:57.643
> 
> 标签：memory, junit, ant, heap-memory

我的 junit 任务有问题。当我从 Eclipse 运行它时，它与 -Xmx1000m 参数配合得很好。它在我的 ant 任务中也有效，但突然停止工作，抛出这个内存异常。我已经在 ant 任务上配置了 maxmemory="1024m" 但没有成功。

这是堆栈跟踪：

```
 [junit] java.lang.IllegalStateException: Failed to load ApplicationContext
    [junit]     at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:308)
    [junit]     at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    [junit]     at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    [junit]     at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    [junit]     at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    [junit]     at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:287)
    [junit]     at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    [junit]     at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:289)
    [junit]     at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    [junit]     at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    [junit]     at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    [junit]     at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    [junit]     at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    [junit]     at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    [junit]     at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    [junit]     at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    [junit]     at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
    [junit]     at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    [junit]     at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    [junit]     at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:39)
    [junit]     at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:420)
    [junit]     at org.apache.tools.ant.taskdefs.optional.junit.JUnitTask.executeInVM(JUnitTask.java:1339)
    [junit]     at org.apache.tools.ant.taskdefs.optional.junit.JUnitTask.execute(JUnitTask.java:831)
    [junit]     at org.apache.tools.ant.taskdefs.optional.junit.JUnitTask.executeOrQueue(JUnitTask.java:1785)
    [junit]     at org.apache.tools.ant.taskdefs.optional.junit.JUnitTask.execute(JUnitTask.java:785)
    [junit]     at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:288)
    [junit]     at sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source)
    [junit]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    [junit]     at java.lang.reflect.Method.invoke(Method.java:597)
    [junit]     at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    [junit]     at org.apache.tools.ant.Task.perform(Task.java:348)
    [junit]     at org.apache.tools.ant.Target.execute(Target.java:357)
    [junit]     at org.apache.tools.ant.Target.performTasks(Target.java:385)
    [junit]     at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1337)
    [junit]     at org.apache.tools.ant.Project.executeTarget(Project.java:1306)
    [junit]     at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    [junit]     at org.eclipse.ant.internal.launching.remote.EclipseDefaultExecutor.executeTargets(EclipseDefaultExecutor.java:32)
    [junit]     at org.apache.tools.ant.Project.executeTargets(Project.java:1189)
    [junit]     at org.eclipse.ant.internal.launching.remote.InternalAntRunner.run(InternalAntRunner.java:423)
    [junit]     at org.eclipse.ant.internal.launching.remote.InternalAntRunner.main(InternalAntRunner.java:137)
    [junit] Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'streamingCotizacionesDAO' defined in class path resource [applicationContext-core-Dao.xml]: Cannot resolve reference to bean 'hibernateTemplateSeguro' while setting bean property 'hibernateTemplateSeguro'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hibernateTemplateSeguro' defined in class path resource [applicationContext-dataAccess.xml]: Cannot resolve reference to bean 'sessionFactorySeguro' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactorySeguro' defined in class path resource [applicationContext-dataAccess.xml]: Invocation of init method failed; nested exception is java.lang.OutOfMemoryError: Java heap space
    [junit]     at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
    [junit]     at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
    [junit]     at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1325)
    [junit]     at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)
    [junit]     at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    [junit]     at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    [junit]     at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
    [junit]     at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    [junit]     at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
    [junit]     at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
    [junit]     at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    [junit]     at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    [junit]     at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    [junit]     at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:84)
    [junit]     at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    [junit]     at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:280)
    [junit]     at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:304)
    [junit]     ... 39 more
    [junit] Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hibernateTemplateSeguro' defined in class path resource [applicationContext-dataAccess.xml]: Cannot resolve reference to bean 'sessionFactorySeguro' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactorySeguro' defined in class path resource [applicationContext-dataAccess.xml]: Invocation of init method failed; nested exception is java.lang.OutOfMemoryError: Java heap space
    [junit]     at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
    [junit]     at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
    [junit]     at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1325)
    [junit]     at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)
    [junit]     at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    [junit]     at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    [junit]     at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
    [junit]     at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    [junit]     at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
    [junit]     at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
    [junit]     at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
    [junit]     ... 55 more
    [junit] Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactorySeguro' defined in class path resource [applicationContext-dataAccess.xml]: Invocation of init method failed; nested exception is java.lang.OutOfMemoryError: Java heap space
    [junit]     at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)
    [junit]     at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    [junit]     at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    [junit]     at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
    [junit]     at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    [junit]     at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
    [junit]     at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
    [junit]     at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
    [junit]     ... 65 more
    [junit] Caused by: java.lang.OutOfMemoryError: Java heap space
    [junit]     at java.util.Arrays.copyOf(Arrays.java:2882)
    [junit]     at java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:100)
    [junit]     at java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:390)
    [junit]     at java.lang.StringBuffer.append(StringBuffer.java:224)
    [junit]     at org.hibernate.sql.Select.toStatementString(Select.java:68)
    [junit]     at org.hibernate.loader.collection.BasicCollectionJoinWalker.initStatementString(BasicCollectionJoinWalker.java:128)
    [junit]     at org.hibernate.loader.collection.BasicCollectionJoinWalker.<init>(BasicCollectionJoinWalker.java:62)
    [junit]     at org.hibernate.loader.collection.BasicCollectionLoader.<init>(BasicCollectionLoader.java:53)
    [junit]     at org.hibernate.loader.collection.BasicCollectionLoader.<init>(BasicCollectionLoader.java:40)
    [junit]     at org.hibernate.loader.collection.BasicCollectionLoader.<init>(BasicCollectionLoader.java:31)
    [junit]     at org.hibernate.loader.collection.BatchingCollectionInitializer.createBatchingCollectionInitializer(BatchingCollectionInitializer.java:92)
    [junit]     at org.hibernate.persister.collection.BasicCollectionPersister.createCollectionInitializer(BasicCollectionPersister.java:297)
    [junit]     at org.hibernate.persister.collection.AbstractCollectionPersister.postInstantiate(AbstractCollectionPersister.java:541)
    [junit]     at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:294)
    [junit]     at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1300)
    [junit]     at org.springframework.orm.hibernate3.LocalSessionFactoryBean.newSessionFactory(LocalSessionFactoryBean.java:860)
    [junit]     at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:779)
    [junit]     at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:211)
    [junit]     at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$5.run(AbstractAutowireCapableBeanFactory.java:1467)
    [junit]     at java.security.AccessController.doPrivileged(Native Method)
    [junit]     at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1465)
    [junit]     at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
    [junit]     at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    [junit]     at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    [junit]     at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
    [junit]     at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    [junit]     at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
    [junit]     at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
    [junit]     at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
    [junit]     at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
    [junit]     at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1325)
    [junit]     at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086) 
```

# java - 为 ListView 设置背景图像

> ID：10637391
> 
> 赞同：2
> 
> 时间：2012-05-17T14:13:28.313
> 
> 标签：java, android, android-listview

嘿，伙计们在我的 ListView 上设置背景图像时遇到问题。代码如下

**历史.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

<ListView android:id="@id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:cacheColorHint="#00000000"
    android:layout_weight="1"
    android:drawSelectorOnTop="false"
    android:src="@drawable/back">
    </ListView>

<TextView  android:id="@id/android:empty"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:background="#FFff00"
    android:text="No data"
    android:cacheColorHint="#00000000"
    />
</LinearLayout> 
```

**行布局.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical">

<TextView android:id="@+id/ProductName"       
    android:textSize="25sp"         
    android:textColor="#FFFF00"        
    android:layout_width="fill_parent"         
    android:layout_height="wrap_content"
    />

</LinearLayout> 
```

Java 代码

...

```
setListAdapter(new ArrayAdapter<String>(this, R.layout.rowlayout,R.id.ProductName,Names)); 
```

...

我不知道我在这里做什么，但背景没有出现。全身黑色。如果我将背景放在 rowlayout.xml 中的文本视图上，那么它会出现，但它就像整个屏幕一样带有 ListView 的一个条目。尝试了很多教程。也许会犯一些菜鸟错误..请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:18:06.627

使用 android:background="@drawable/icon" 作为列表视图

```
 <ListView android:id="@id/android:list"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:cacheColorHint="#00000000"
android:layout_weight="1"
android:drawSelectorOnTop="false"
android:background="@drawable/icon">
</ListView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:21:11.750

我相信你所经历的描述在这里：[http ://android-developers.blogspot.com/2009/01/why-is-my-list-black-android.html](http://android-developers.blogspot.com/2009/01/why-is-my-list-black-android.html)

由于名为“缓存颜色提示”的优化，列表的背景默认设置为窗口的背景颜色，在 Android 的深色主题中 #191919。

如果你在每一行设置一个背景，我想你会明白我的意思。尝试设置以下背景形状：

```
<?xml version="1.0" encoding="utf-8"?>
<shape
    xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle"
>
<stroke
    android:color="@color/mid_gray"
    android:width="1dp"
/>

<padding
    android:left="7dp"
    android:top="7dp"
    android:right="7dp"
    android:bottom="3dp"
/>

<corners android:radius="10dp" />

<solid android:color="@android:color/white" />
</shape> 
```

像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:background="@drawable/shape_data_background">

<TextView android:id="@+id/ProductName"       
android:textSize="25sp"         
android:textColor="#FFFF00"        
android:layout_width="fill_parent"         
android:layout_height="wrap_content"
/>

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T14:55:17.803

在您的列表视图项目上使用 android:background="#00000000" ，然后将父表单背景设置为您的图像

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T15:16:36.857

正如我正确理解您的代码概念一样，您希望在`View`s 上实现两个 s `LinearLayout`，其中一个（`TextView`在您的情况下）具有背景的封面布局，另一个是透明的。`ListView`因此，除了为您的布局设置背景并使您的透明化之外，别无他法，您`android:background="#00000000"`还应该设置`android:cacheColorHint="#00000000"`避免`ListView`在滚动过程中用黑色填充背景

# android - Android VideoView RTSP 延迟

> ID：10637392
> 
> 赞同：3
> 
> 时间：2012-05-17T14:13:29.687
> 
> 标签：android, video-streaming, rtsp, android-videoview, rtmp

我正在通过 VideoView 在我的 Android 应用程序中打开 IP 摄像机的 RTSP 流。有个问题是延迟很大，达到20多秒！虽然通过浏览器从普通 PC 上查看相机，但没有这样的延迟。请问有什么想法吗？

我的代码：

```
 String path="rtsp://192.168.1.20/3gpp";
        myVideoView.setVideoURI(Uri.parse(path));
        myVideoView.setMediaController(new MediaController(this));
        myVideoView.requestFocus();
        myVideoView.start(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T05:50:46.853

使用 MJPEG 流，而不是 RTSP。经过大量研究，我发现了一个 MJPEG 查看器类，可以近乎实时地播放实时流（取决于您的网络连接）。

[这是Android和MJPEG](https://stackoverflow.com/questions/3205191/android-and-mjpeg)的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T09:09:11.550

您可以为此执行以下操作

MjpegSample 类

```
package de.mjpegsample;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;
import android.view.Window;
import android.view.WindowManager;
import de.mjpegsample.MjpegView.MjpegInputStream;
import de.mjpegsample.MjpegView.MjpegView;

public class MjpegSample extends Activity {

private MjpegView mv;
private static final int MENU_QUIT = 1;

/* Creates the menu items */
public boolean onCreateOptionsMenu(Menu menu) {    
menu.add(0, MENU_QUIT, 0, "Quit");
return true;
}

/* Handles item selections */
public boolean onOptionsItemSelected(MenuItem item) {    
    switch (item.getItemId()) {
        case MENU_QUIT:
            finish();
            return true;    
        }    
    return false;
}

public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    //sample public cam
    String URL = "http://gamic.dnsalias.net:7001/img/video.mjpeg";

    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN, WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
    mv = new MjpegView(this);
    setContentView(mv);        
    mv.setSource(MjpegInputStream.read(URL));
    mv.setDisplayMode(MjpegView.SIZE_BEST_FIT);
    mv.showFps(false);
}

public void onPause() {
    super.onPause();
    mv.stopPlayback();
}
} 
```

MjepgView

```
import java.io.IOException;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.PorterDuff;
import android.graphics.PorterDuffXfermode;
import android.graphics.Rect;
import android.graphics.Typeface;
import android.util.AttributeSet;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public class MjpegView extends SurfaceView implements SurfaceHolder.Callback {
public final static int POSITION_UPPER_LEFT  = 9;
public final static int POSITION_UPPER_RIGHT = 3;
public final static int POSITION_LOWER_LEFT  = 12;
public final static int POSITION_LOWER_RIGHT = 6;

public final static int SIZE_STANDARD   = 1; 
public final static int SIZE_BEST_FIT   = 4;
public final static int SIZE_FULLSCREEN = 8;

private MjpegViewThread thread;
private MjpegInputStream mIn = null;    
private boolean showFps = false;
private boolean mRun = false;
private boolean surfaceDone = false;    
private Paint overlayPaint;
private int overlayTextColor;
private int overlayBackgroundColor;
private int ovlPos;
private int dispWidth;
private int dispHeight;
private int displayMode;

public class MjpegViewThread extends Thread {
    private SurfaceHolder mSurfaceHolder;
    private int frameCounter = 0;
    private long start;
    private Bitmap ovl;

    public MjpegViewThread(SurfaceHolder surfaceHolder, Context context) { mSurfaceHolder = surfaceHolder; }

    private Rect destRect(int bmw, int bmh) {
        int tempx;
        int tempy;
        if (displayMode == MjpegView.SIZE_STANDARD) {
            tempx = (dispWidth / 2) - (bmw / 2);
            tempy = (dispHeight / 2) - (bmh / 2);
            return new Rect(tempx, tempy, bmw + tempx, bmh + tempy);
        }
        if (displayMode == MjpegView.SIZE_BEST_FIT) {
            float bmasp = (float) bmw / (float) bmh;
            bmw = dispWidth;
            bmh = (int) (dispWidth / bmasp);
            if (bmh > dispHeight) {
                bmh = dispHeight;
                bmw = (int) (dispHeight * bmasp);
            }
            tempx = (dispWidth / 2) - (bmw / 2);
            tempy = (dispHeight / 2) - (bmh / 2);
            return new Rect(tempx, tempy, bmw + tempx, bmh + tempy);
        }
        if (displayMode == MjpegView.SIZE_FULLSCREEN) return new Rect(0, 0, dispWidth, dispHeight);
        return null;
    }

    public void setSurfaceSize(int width, int height) {
        synchronized(mSurfaceHolder) {
            dispWidth = width;
            dispHeight = height;
        }
    }

    private Bitmap makeFpsOverlay(Paint p, String text) {
        Rect b = new Rect();
        p.getTextBounds(text, 0, text.length(), b);
        int bwidth  = b.width()+2;
        int bheight = b.height()+2;
        Bitmap bm = Bitmap.createBitmap(bwidth, bheight, Bitmap.Config.ARGB_8888);
        Canvas c = new Canvas(bm);
        p.setColor(overlayBackgroundColor);
        c.drawRect(0, 0, bwidth, bheight, p);
        p.setColor(overlayTextColor);
        c.drawText(text, -b.left+1, (bheight/2)-((p.ascent()+p.descent())/2)+1, p);
        return bm;           
    }

    public void run() {
        start = System.currentTimeMillis();
        PorterDuffXfermode mode = new PorterDuffXfermode(PorterDuff.Mode.DST_OVER);
        Bitmap bm;
        int width;
        int height;
        Rect destRect;
        Canvas c = null;
        Paint p = new Paint();
        String fps = "";
        while (mRun) {
            if(surfaceDone) {
                try {
                    c = mSurfaceHolder.lockCanvas();
                    synchronized (mSurfaceHolder) {
                        try {
                            bm = mIn.readMjpegFrame();
                            destRect = destRect(bm.getWidth(),bm.getHeight());
                            c.drawColor(Color.BLACK);
                            c.drawBitmap(bm, null, destRect, p);
                            if(showFps) {
                                p.setXfermode(mode);
                                if(ovl != null) {
                                    height = ((ovlPos & 1) == 1) ? destRect.top : destRect.bottom-ovl.getHeight();
                                    width  = ((ovlPos & 8) == 8) ? destRect.left : destRect.right -ovl.getWidth();
                                    c.drawBitmap(ovl, width, height, null);
                                }
                                p.setXfermode(null);
                                frameCounter++;
                                if((System.currentTimeMillis() - start) >= 1000) {
                                    fps = String.valueOf(frameCounter)+"fps";
                                    frameCounter = 0; 
                                    start = System.currentTimeMillis();
                                    ovl = makeFpsOverlay(overlayPaint, fps);
                                }
                            }
                        } catch (IOException e) {}
                    }
                } finally { if (c != null) mSurfaceHolder.unlockCanvasAndPost(c); }
            }
        }
    }
}

private void init(Context context) {
    SurfaceHolder holder = getHolder();
    holder.addCallback(this);
    thread = new MjpegViewThread(holder, context);
    setFocusable(true);
    overlayPaint = new Paint();
    overlayPaint.setTextAlign(Paint.Align.LEFT);
    overlayPaint.setTextSize(12);
    overlayPaint.setTypeface(Typeface.DEFAULT);
    overlayTextColor = Color.WHITE;
    overlayBackgroundColor = Color.BLACK;
    ovlPos = MjpegView.POSITION_LOWER_RIGHT;
    displayMode = MjpegView.SIZE_STANDARD;
    dispWidth = getWidth();
    dispHeight = getHeight();
}

public void startPlayback() { 
    if(mIn != null) {
        mRun = true;
        thread.start();         
    }
}

public void stopPlayback() { 
    mRun = false;
    boolean retry = true;
    while(retry) {
        try {
            thread.join();
            retry = false;
        } catch (InterruptedException e) {}
    }
}

public MjpegView(Context context, AttributeSet attrs) { super(context, attrs); init(context); }
public void surfaceChanged(SurfaceHolder holder, int f, int w, int h) { thread.setSurfaceSize(w, h); }

public void surfaceDestroyed(SurfaceHolder holder) { 
    surfaceDone = false; 
    stopPlayback(); 
}

public MjpegView(Context context) { 
    super(context); 
    init(context); 
    }    
public void surfaceCreated(SurfaceHolder holder) { 
    surfaceDone = true; 
    }
public void showFps(boolean b) { 
    showFps = b; 
    }
public void setSource(MjpegInputStream source) { 
    mIn = source; 
    startPlayback();
    }
public void setOverlayPaint(Paint p) { 
    overlayPaint = p; 
    }
public void setOverlayTextColor(int c) { 
    overlayTextColor = c; 
    }
public void setOverlayBackgroundColor(int c) { 
    overlayBackgroundColor = c; 
    }
public void setOverlayPosition(int p) { 
    ovlPos = p; 
    }
public void setDisplayMode(int s) { 
    displayMode = s; 
    }
} 
```

MjpegInputStream

```
package de.mjpegsample.MjpegView;

import java.io.BufferedInputStream;
import java.io.ByteArrayInputStream;
import java.io.DataInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.URI;
import java.util.Properties;

import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;

public class MjpegInputStream extends DataInputStream {
private final byte[] SOI_MARKER = { (byte) 0xFF, (byte) 0xD8 };
private final byte[] EOF_MARKER = { (byte) 0xFF, (byte) 0xD9 };
private final String CONTENT_LENGTH = "Content-Length";
private final static int HEADER_MAX_LENGTH = 100;
private final static int FRAME_MAX_LENGTH = 40000 + HEADER_MAX_LENGTH;
private int mContentLength = -1;

public static MjpegInputStream read(String url) {
    HttpResponse res;
    DefaultHttpClient httpclient = new DefaultHttpClient();     
    try {
        res = httpclient.execute(new HttpGet(URI.create(url)));
        return new MjpegInputStream(res.getEntity().getContent());              
    } catch (ClientProtocolException e) {
    } catch (IOException e) {}
    return null;
}

public MjpegInputStream(InputStream in) { super(new BufferedInputStream(in, FRAME_MAX_LENGTH)); }

private int getEndOfSeqeunce(DataInputStream in, byte[] sequence) throws IOException {
    int seqIndex = 0;
    byte c;
    for(int i=0; i < FRAME_MAX_LENGTH; i++) {
        c = (byte) in.readUnsignedByte();
        if(c == sequence[seqIndex]) {
            seqIndex++;
            if(seqIndex == sequence.length) return i + 1;
        } else seqIndex = 0;
    }
    return -1;
}

private int getStartOfSequence(DataInputStream in, byte[] sequence) throws IOException {
    int end = getEndOfSeqeunce(in, sequence);
    return (end < 0) ? (-1) : (end - sequence.length);
}

private int parseContentLength(byte[] headerBytes) throws IOException, NumberFormatException {
    ByteArrayInputStream headerIn = new ByteArrayInputStream(headerBytes);
    Properties props = new Properties();
    props.load(headerIn);
    return Integer.parseInt(props.getProperty(CONTENT_LENGTH));
}   

public Bitmap readMjpegFrame() throws IOException {
    mark(FRAME_MAX_LENGTH);
    int headerLen = getStartOfSequence(this, SOI_MARKER);
    reset();
    byte[] header = new byte[headerLen];
    readFully(header);
    try {
        mContentLength = parseContentLength(header);
    } catch (NumberFormatException nfe) { 
        mContentLength = getEndOfSeqeunce(this, EOF_MARKER); 
    }
    reset();
    byte[] frameData = new byte[mContentLength];
    skipBytes(headerLen);
    readFully(frameData);
    return BitmapFactory.decodeStream(new ByteArrayInputStream(frameData));
}
} 
```

# .net - 将 'System::Drawing::PointF* 转换为 'System::Drawing::PointF 错误

> ID：10637393
> 
> 赞同：0
> 
> 时间：2012-05-17T14:13:33.157
> 
> 标签：.net, visual-studio, managed-c++

我正在编写一个涉及 Visual Studio 2010 中的表单的 C++.NET 4.0 程序。我正在向表单添加一个 GraphicsPath。这是我的代码的一部分：

```
GraphicsPath^ gp=gcnew GraphicsPath();
gp->AddString("Hello world!", gcnew FontFamily("Arial"), (int) FontStyle::Italic, 26, (new PointF(100,100)), StringFormat::GenericDefault); 
```

编译，我得到一个错误

```
 void System::Drawing::Drawing2D::GraphicsPath::AddString(System::String ^,System::Drawing::FontFamily ^,int,float,System::Drawing::PointF,System::Drawing::StringFormat ^)' : cannot convert parameter 5 from 'System::Drawing::PointF *' to 'System::Drawing::PointF' 
```

所以我把它改成

```
 GraphicsPath^ gp=gcnew GraphicsPath();
gp->AddString("Hello world!", gcnew FontFamily("Arial"), (int) FontStyle::Italic, 26, *(new PointF(100,100)), StringFormat::GenericDefault); 
```

并得到更多错误

> 1>LINK：错误 LNK2034：元数据与 COFF 符号表不一致：符号 '??3@$$FYAXPAX@Z' (060000A7) 的元数据与 MSVCURTD.lib(delete2.obj) 中的 (0A00001A) 不一致
> 1>LINK：错误LNK2034：元数据与 COFF 符号表不一致：符号 '??3@$$FYAXPAX@Z' (060000A7) 的元数据与 MSVCURTD.lib(ti_inst.obj)
> 1>MSVCURTD.lib(delete2.obj)中的 (0A000029) 不一致：错误LNK2020：未解析的令牌（0A00001A）“void __cdecl operator delete（void *）”（？？3@$$FYAXPAX@Z）
> 1>MSVCURTD.lib（ti_inst.obj）：错误LNK2020：未解析的令牌（0A000029）“ void __cdecl operator delete(void *)" (??3@$$FYAXPAX@Z)
> 1>D:\Projects\SmartProjector\scratch\VS\Debug\CPPHelloWorld.exe : 致命错误 LNK1120: 2 unresolved externals

它应该很简单，只需将指针转换为它实际指向的 PointF，但由于某种我不知道的原因，事情变得复杂了。

你能告诉我使用 System::Drawing::Drawing2D::GraphicsPath::AddString() 函数的正确方法吗？请记住我使用的是 C++，而不是 C#

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:18:41.473

你有没有尝试过：

```
gp->AddString("Hello world!", gcnew FontFamily("Arial"), (int) FontStyle::Italic, 26,  PointF(100,100), StringFormat::GenericDefault); 
```

这至少是正确的方法签名

# assembly - 确保跳转的字母数字 Shellcode

> ID：10637394
> 
> 赞同：6
> 
> 时间：2012-05-17T14:13:38.810
> 
> 标签：assembly, x86, shellcode

我正在尝试编写一些最终以英文段落形式出现的 shellcode。这意味着我主要限于具有评估为字母数字字符或标点符号的操作码的指令。这实际上给我留下了许多不同的跳转指令，包括：、、、、、、、、、、、、、`jo`和（对应于字母）。这些跳跃中的每一个在决定是否跳跃之前都会执行一次测试。在大多数情况下，我可以结合跳转加上它的逆来确保在 shellcode 中发生跳转（例如使用then或then ），但在. 测试为`jno``jb``jae``je``jne``jbe``ja``js``jns``jp``p-z``jo``jno``je``jne``jb``jb`是`CF=1`。

我的问题是，是否有任何一系列字母数字指令在功能上是 NOP，但也确保了这一点`CF=1`？ `CF`是进位标志，因此任何保证设置进位标志的操作就足够了。

还保证了`jae`，反正是保证了`CF=0`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T19:34:01.540

您可以使用**“4444”**设置`CF`为 0。

**“44”**是`XOR AL, 0x34`。

2`XORs`具有相同值的结果没有变化`AL`。

但是，应该注意的是，这`XOR`会影响几乎所有的算术标志（影响`AF`未定义）。所以，它不完全是“NOP”。

在 32 位模式下，您可以使用**“PhohohX7X”**设置`CF`为 1。

**“P”**是`PUSH EAX`。
**“呵呵”**是`PUSH 0x686F686F`。
**“X”**是`POP EAX`。
**“7”**是`AAA`。
**“X”**是`POP EAX`。

也有一个警告`AAA`。它对大多数算术标志的影响是未定义的（`CF`并且`AF`例外，它们变得相等）。所以，它也不完全是“NOP”。

# iphone - 当数组的计数已知时，以顺序方式用数字初始化 NSArray

> ID：10637402
> 
> 赞同：0
> 
> 时间：2012-05-17T14:14:20.263
> 
> 标签：iphone, objective-c, ios, nsarray

我想`NSArray`从`0,1,2,3...`我知道数组的计数开始用数字初始化一个。例如：

我有一个需要用`5`（计数）作为容量初始化的数组。现在我想用初始化这个数组，`0,1,2,3,4`我需要动态初始化它。

如果数组的计数是`10`，我需要`0,1,2,3,4,5,6,7,8,9`在相应的索引处初始化数组。问题是数组的计数是动态变化的，我需要相应地对其进行初始化。

有人可以建议我如何实现这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:18:07.587

```
NSMutableArray* arrOfObject = [[NSMutableArray alloc] init];
for(int i=0; i< [arr count]; i++)
{
    arrOfObject addObject:[NSNumber numberWithInt:i];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T14:16:44.177

初始化一个可变数组。然后循环添加数字。可以选择使用可变数组初始化一个新的非可变数组`arrayWithArray:`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T14:18:07.940

```
 int count = 5;//suppose this you want
 NSMutableArray *array = [NSMutableArray array];
 for(int i=0 ; i< count; i++) {
     [array addObject:[NSNumber numberWithInt:i];
 } 
```

你只需要从你想要的地方传递计数，它就会动态生成你想要的数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T14:18:34.107

然后使用`NSMutableArray`，只需添加您需要的数量

```
int count = 10;

NSMutableArray *array = [[NSMutableArray alloc] init];

for (int i=0;i<count;i++) {
    [array addObject:[NSNumber numberWithInt:i]];
} 
```

# python - GQL 查询的意外空结果

> ID：10637404
> 
> 赞同：0
> 
> 时间：2012-05-17T14:14:22.940
> 
> 标签：python, google-app-engine, gql, gqlquery

令人惊讶的是，在做了很多查询之后没有问题。我遇到了第一个奇怪的 GQL 问题。

以下是称为反馈的模型的属性：

```
content  date    title   type    votes_count     written_by 
```

在 index.yaml 中配置了以下内容：

```
- kind: Feedback
  properties:
  - name: type
  - name: date
   direction: desc 
```

当我查询所有按日期排序的反馈数据时，它会返回所有结果：

```
query = GqlQuery("SELECT __key__ FROM Feedback ORDER BY date DESC") 
```

type属性存储在type = db.IntegerProperty(default=1, required=False, indexed=True)中，共有8行Feedback数据，类型为整数1。

但是，当我查询时：

```
query = GqlQuery("SELECT __key__ FROM Feedback WHERE type = :1 ORDER BY date DESC", type) 
```

它一直给我返回空的结果。出了什么问题？

**更新**

```
def get_keys_by_feedback_type(type_type):
    if type_type == FeedbackCode.ALL:
        query = GqlQuery("SELECT __key__ FROM Feedback ORDER BY date DESC")
    else:
        query = GqlQuery("SELECT __key__ FROM Feedback WHERE type = :1 ORDER BY date DESC", type_type)    
    return query

results = Feedback.get_keys_by_feedback_type(int(feedback_type_filter))
for feedback_key in results:
# iterate the query results 
```

该索引正在服务：

```
Feedback 
type ▲ , date ▼ Serving 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T12:23:21.003

一开始没有清楚地描述是我的坏事。如果其他人遇到同样的问题，我将分享解决方案以防万一。

造成这种情况的根本原因是我对 App Engine 索引的了解不足。早些时候，'type' 属性没有被索引，因为我不打算在最近的需求更改之前过滤它。

因此，我从属性定义模型中索引了“类型”属性，如问题所示。然而，'type' 属性仍未被索引，原因解释如下，[索引以前未索引的属性：](https://developers.google.com/appengine/docs/python/datastore/queries#Introduction_to_Indexes)

> 如果您有使用未索引属性创建的现有记录，则即使您更改实体（类）定义以使属性再次被索引，该属性仍会继续为这些记录未索引。因此，这些记录将不会由对该属性进行过滤的查询返回。

所以，解决方案是：

使以前未编入索引的属性被编入索引

1.  在 Property 构造函数中设置 indexed=True：

    ```
    class Person(db.Model):
        name = db.StringProperty()
        age = db.IntegerProperty(indexed=True) 
    ```

2.  获取每条记录。

3.  放每条记录。（您可能需要在放入之前更改记录中的某些内容，例如时间戳，以便写入发生。）

所以，我的 GQL 没有任何问题。这完全是因为“类型”属性仍未被索引。无论如何，仍然非常感谢@Adam Crossland 的一些见解和建议。

# facebook - 创建一个简单的静态应用程序 [facebook 应用程序]

> ID：10637408
> 
> 赞同：0
> 
> 时间：2012-05-17T14:14:27.417
> 
> 标签：facebook, facebook-apps

我想为 facebook 创建一个简单的应用程序，比如[axa 保险](https://www.facebook.com/axainsurance)

他们有一个文件夹竞赛，您单击该文件夹，然后显示您可以共享的图像。任何想法如何做到这一点？我不知道从哪里开始。任何人都可以提供任何帮助或任何教程吗？将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:16:58.373

您首先需要在这里创建*页面标签应用程序*：http : [//developers.facebook.com/](http://developers.facebook.com/) Facebook 应用程序现在是一个简单的 iframe，指向您想要的任何内容！

几个细节：

*   你应该有一个 https 用户的 ssl 证书（否则当用户在你的标签应用程序上时它会发出警告）
*   将应用程序添加到您的页面并不是很直观，请看这里：http: [//developers.facebook.com/docs/reference/dialogs/add_to_page/](http://developers.facebook.com/docs/reference/dialogs/add_to_page/) - 在*直接 URL 示例*下知道如何操作！

**这是一个关于它的教程**

[http://query2arijeet.com/2012/02/16/installing-your-iframe-application-on-your-fan-page-2012-iframe-facebook-apps/](http://query2arijeet.com/2012/02/16/installing-your-iframe-application-on-your-fan-page-2012-iframe-facebook-apps/)

您可以在“为粉丝页面 2012 创建 facebook 应用程序”或类似的东西上搜索！

# jquery - 如果这个但不是那个，那么如果那个但不是这个……逻辑

> ID：10637410
> 
> 赞同：0
> 
> 时间：2012-05-17T14:14:31.600
> 
> 标签：jquery, logic

每次提交表单时，我都试图获取一个按钮（输入字段或按钮字段）值。我认为我有一些逻辑问题，因为第二个不起作用。

这是在 jsFiddle [http://jsfiddle.net/uqj88/23/](http://jsfiddle.net/uqj88/23/)

这就是无法正常工作的部分。如果它没有找到类型是提交的输入，它甚至似乎都没有寻找按钮元素。

```
 $('form').submit(function () {
        if ($(this).children("input[type='submit']") != "") {
            submitButton = $(this).children("input[type='submit']");
            if (submitButton.attr("value") != ""){
                  linkText = submitButton.attr("value") + " - Button";
            }
            else if ((submitButton.attr("value") === "") && (submitButton.prop("id") != "")) {
                  linkText = submitButton.prop("id") + " - Button";
            }
            else if ((submitButton.attr("value") === "") && (submitButton.prop("class") != "")) {
                  linkText = submitButton.prop("class") + " - Button";
            }
            else {
                  linkText = "Form Submitted - Button";  
            }
        }
        else if ($(this).children("button") != "") {
            submitButton = $(this).children("button");
            linkText = submitButton.text() + " - Button";
        }
        window.alert(linkText);
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:21:00.947

这一行：

```
$(this).children("input[type='submit']") != "" 
```

应该：

```
$(this).children("input[type='submit']").length 
```

jQuery 对象始终是对象，无论它们是否包含元素。一个对象永远不会等于`""`。

对 else if 语句重复相同的更改。

# node.js - socket.io 502 错误

> ID：10637413
> 
> 赞同：1
> 
> 时间：2012-05-17T14:14:34.103
> 
> 标签：node.js, ssl, socket.io

我一直在尝试设置我的第一个 SOCKET.IO 服务器，它只是将通知推送到客户端。

Apache 和 socket.io 当前运行在同一个物理服务器上（相同的 IP）

在不同的端口。[ WEB- 443(SSL), SOCKET - 8989 ]

我设置了一个 apache 代理服务器（虚拟主机），引导[http://www.EXAMPLE.me:1433](http://www.EXAMPLE.me:1433)到

http:// 本地主机：8989。

**阿帕契特**

< 虚拟主机 *:1433 >

```
 ServerName www.example.me:1433
    ProxyPass / http://localhost:8989/
    ProxyPassReverse / http://localhot:8989/

    SSLProxyEngine on
    SSLEngine on
    SSLCertificateFile /root/ssl/xxx.crt
    SSLCertificateKeyFile /root/ssl/ssl_xxxx.key 
```

</虚拟主机>

**服务器**

var io = require('socket.io').listen(8989);

**客户**

var XXXX = io.connect('https://www.example.me:1443');

浏览器给我 502 错误和 socket.io '警告 - websocket 连接无效'。

如果我将服务器 ip 设置为端口号 8989 但 SSL 不允许它，它工作正常。

我究竟做错了什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T05:26:31.643

没有人回答，我已经有了自己的解决方案。我最终为 SOCKET.IO 构建了一个单独的服务器。还在使用 SSL 的页面上禁用了与 SOCKET.IO 的任何连接。

# linux - 'git clone' 尊重 umask，除了顶级项目目录

> ID：10637416
> 
> 赞同：9
> 
> 时间：2012-05-17T14:14:46.917
> 
> 标签：linux, git, permissions

我想克隆一个 git 项目（比如来自 github），并让顶级目录可以按组写入。

我尝试了几件不同的事情。首先，只需在克隆前设置 umask。

```
$ umask
0002 
```

然后我创建的文件可以按组写入

```
$ touch test
$ ls -l test
-rw-rw-r-- 1 user group 0 2012-05-17 09:32 test 
```

现在我尝试`git clone`

```
$ git clone git@github.com:user/repo.git
Cloning into repo... [succeeds] 
```

但克隆目录不可按组写入。

```
$ ls -ld repo
drwxr-xr-x 11 user group 4096 2012-05-17 09:32 repo 
```

`git init --shared=umask`我在具有 775 权限的目录中使用（应该已经是默认值）创建的 repo 尝试了同样的事情。推送到 github 后`git clone`得到相同的结果。

这没什么大不了的，我可以在我的结帐脚本中 chmod。但是，如果有正确/内置的方法可以做到这一点，那就更好了。Git 是 Ubuntu 11.04 上的 1.7.4.1 版本。

任何想法或链接表示赞赏。我看到了[这篇文章，但它使用 chmod](https://serverfault.com/questions/26954/how-do-i-share-a-git-repository-with-multiple-users-on-a-machine)，我在这方面找不到太多其他内容。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T20:17:10.780

尝试为克隆命令设置全局“core.sharedRepository=group”：

```
git -c "core.sharedRepository=group" clone git@github.com:user/repo.git
ls -ld repo/.git
drwxrwsr-x 8 user user 4096 Jul  4 22:16 repo/.git/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-12T01:24:40.780

这是由于一个错误，已在 git >= v1.7.11.3 中修复

见： [https ://github.com/git/git/commit/45d4fdc2dc74c657a9c2e95bf04aed539fdcb0a4](https://github.com/git/git/commit/45d4fdc2dc74c657a9c2e95bf04aed539fdcb0a4)

# lua - lua tshark 侦听器的 pinfo 参数中可以使用哪些信息？

> ID：10637417
> 
> 赞同：1
> 
> 时间：2012-05-17T14:14:46.843
> 
> 标签：lua, wireshark, wireshark-dissector

所以我正在研究监听器水龙头是如何工作的。我现在想出的是：

```
my_tap = Listener.new(nil, "myfilter")
myvar = Field.new("something to look at")

-- then the callback
function my_tap.packet(pinfo)
   -- format the time like os.date("%c", pinfo.abs_ts)
   -- what else is in pinfo.???
   -- lots of stuff
end 
```

我一直无法找到任何关于通过包回调的 pinfo 参数暴露给 lua 的内容的完整文档。到目前为止，我已经找到了 *pinfo.abs_ts*。这很好，因为*tcp.options.timestamp.tsval*似乎一直为空或包含不正确/不完整的信息。

通过 pinfo 究竟暴露了什么？除了 pinfo.abs_ts 之外，是否有我可以在其他地方提取的信息列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T23:52:51.507

[wireshark.org/docs/wsug_html_chunked/lua_module_Pinfo.html](https://www.wireshark.org/docs/wsdg_html_chunked/lua_module_Pinfo.html#lua_class_Pinfo)似乎描述了我正在寻找的几乎所有东西

# node.js - Nodejs 事件处理

> ID：10637418
> 
> 赞同：4
> 
> 时间：2012-05-17T14:14:52.323
> 
> 标签：node.js, eventemitter

以下是我的nodejs代码

```
var emitter = require('events'),
    eventEmitter = new emitter.EventEmitter();
eventEmitter.on('data', function (result) { console.log('Im From Data'); });

eventEmitter.on('error', function (result) { console.log('Im Error'); });

require('http').createServer(function (req, res) {
    res.end('Response');
    var start = new Date().getTime();
    eventEmitter.emit('data', true);
    eventEmitter.emit('error', false);
    while(new Date().getTime() - start < 5000) {
        //Let me sleep
    }

    process.nextTick(function () {
        console.log('This is event loop');
    });
}).listen(8090); 
```

Nodejs 是单线程的，它在事件循环中运行，并且同一个线程为事件提供服务。因此，在上面对我的 localhost:8090 节点的请求的代码中，节点线程应该一直忙于为请求提供服务[有 5 秒的睡眠]。

同时有两个事件被 eventEmitter 发出。因此，一旦请求得到处理，这两个事件都必须在事件循环中排队等待处理。

但这并没有发生，我可以看到事件在发出时被同步服务。

这是预期的吗？我知道如果它按我的预期工作，那么扩展事件模块就没有用了。但是 eventEmitter 发出的事件是如何处理的呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T15:28:40.063

只有需要异步处理的东西才会被推送到事件循环中。node 中的标准事件发射器将立即分派一个事件。只有使用`process.nextTick`, `setTimeout`,之类`setInterval`的代码或在 C++ 中显式添加的代码会影响事件循环，例如节点的库。

例如，当您将节点的`fs`库用于类似的东西`createReadStream`时，它会返回一个流，但会在后台打开文件。当它打开时，节点添加到事件循环中，当循环中的函数被调用时，它将触发流对象上的“打开”事件。然后，节点将在后台从文件中加载块，并添加到事件循环中以触发`data`流上的事件。

如果您希望这些事件在 5 秒后发出，您可能希望在忙碌循环之后使用`setTimeout`或`emit`发出呼叫。

我还想明确一点，你不应该在 Node 代码中出现这样的繁忙循环。我不知道您是否只是为了测试事件循环，或者它是否是某些真实代码的一部分。如果您需要更多信息，请扩展您希望实现的功能。

# jquery - 使用 .not() 和 :has() jquery 的问题

> ID：10637423
> 
> 赞同：0
> 
> 时间：2012-05-17T14:15:16.763
> 
> 标签：jquery, jquery-selectors

如果 $("#s4-searcharea") 没有 .ms-sbrow 类，我正在尝试执行几行代码。请帮忙！我究竟做错了什么？

一个演示将不胜感激。

========HTML========

```
<div class="s4-search s4-rp" id="s4-searcharea" style="display: block;">
  <table width="100%" cellspacing="0" cellpadding="0" border="0" class="s4-wpTopTable">
    <tr class="ms-sbrow">
      <td class="ms-sbcell"><input type="text"></td>
    </tr>
  </table>
</div> 
```

========jQuery========

```
 $('#s4-searcharea').not(':has(".ms-sbrow")', function () {
    $('#explore').addClass('minimal');
    $('#header-home-icon').css('left','3px');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:20:45.143

您可以在#s4 div 中检查“.ms-sbrow”子项的长度。

```
if( $('.ms-sbrow','#s4-searcharea').length == 0 ){
    $('#explore').addClass('minimal');
    $('#header-home-icon').css('left','3px');
} 
```

或者，更易读（使用 children()）

```
if( $('#s4-searcharea').children('.ms-sbrow').length == 0 )
   [...] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:18:23.673

鉴于[jQuery API](http://api.jquery.com/not/)，您似乎使用 .not() 不正确。请尝试使用`!`运算符。

# jdo - JDO - 数据核 - HSQL 错误

> ID：10637433
> 
> 赞同：0
> 
> 时间：2012-05-17T14:15:53.720
> 
> 标签：jdo, hsqldb, datanucleus

对于我当前的项目，我必须使用 HSQL-JDO。我正在编写示例应用程序来检查它是如何工作的。如果我将 HSQL 与 jdbc（没有任何 orm）一起使用，我的代码运行良好。但是使用 JDO 我收到“套接字创建错误”

`[Server@187a84e4]: [Thread[main,5,main]]: checkRunning(false) entered [Server@187a84e4]: [Thread[main,5,main]]: checkRunning(false) exited [Server@187a84e4]: [Thread[main,5,main]]: checkRunning(false) entered [Server@187a84e4]: [Thread[main,5,main]]: checkRunning(false) exited [Server@187a84e4]: [Thread[main,5,main]]: checkRunning(false) entered [Server@187a84e4]: [Thread[main,5,main]]: checkRunning(false) exited [Server@187a84e4]: [Thread[main,5,main]]: checkRunning(false) entered [Server@187a84e4]: [Thread[main,5,main]]: checkRunning(false) exited JdbcOdbcDriver class loaded registerDriver: driver[className=sun.jdbc.odbc.JdbcOdbcDriver,sun.jdbc.odbc.JdbcOdbcDriver@a13f991] DriverManager.initialize: jdbc.drivers = null JDBC DriverManager initialized registerDriver: driver[className=org.hsqldb.jdbcDriver,org.hsqldb.jdbcDriver@44e06940] DriverManager.getConnection("jdbc:hsqldb:hsql://localhost:8974/test_db") trying driver[className=sun.jdbc.odbc.JdbcOdbcDriver,sun.jdbc.odbc.JdbcOdbcDriver@a13f991] *Driver.connect (jdbc:hsqldb:hsql://localhost:8974/test_db) trying driver[className=org.hsqldb.jdbcDriver,org.hsqldb.jdbcDriver@44e06940] SQLState(08000) vendor code(-80) java.sql.SQLException: socket creation error at org.hsqldb.jdbc.Util.sqlException(Unknown Source) at org.hsqldb.jdbc.jdbcConnection.(Unknown Source) at org.hsqldb.jdbcDriver.getConnection(Unknown Source) at org.hsqldb.jdbcDriver.connect(Unknown Source) at java.sql.DriverManager.getConnection(Unknown Source) at java.sql.DriverManager.getConnection(Unknown Source) at org.apache.commons.dbcp.DriverManagerConnectionFactory.createConnection(DriverManagerConnectionFactory.java:78) at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:582) at org.apache.commons.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:1158) at org.apache.commons.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:106) at org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl.getConnection(ConnectionFactoryImpl.java:444) at org.datanucleus.store.rdbms.RDBMSStoreManager.(RDBMSStoreManager.java:264)`

这是main中的代码 `Server server = new Server(); server.setAddress("localhost"); server.setDatabaseName(0, "test_db"); server.setDatabasePath(0, "test_db"); server.setPort(8974); server.setTrace(true);`

 ````
 Properties properties = new Properties();
    properties.setProperty("javax.jdo.PersistenceManagerFactoryClass","org.datanucleus.api.jdo.JDOPersistenceManagerFactory");
    properties.setProperty("javax.jdo.option.ConnectionDriverName","org.hsqldb.jdbcDriver");
    properties.setProperty("javax.jdo.option.ConnectionURL","jdbc:hsqldb:hsql://localhost:8974/test_db");
    properties.setProperty("javax.jdo.option.ConnectionUserName","SA");
    properties.setProperty("javax.jdo.option.ConnectionPassword","");
    properties.setProperty("javax.jdo.option.ConnectionPassword","");

    properties.setProperty("datanucleus.autoCreateSchema","true");
    properties.setProperty("datanucleus.validateTables","false");
    properties.setProperty("datanucleus.validateConstraints","false");

    PersistenceManagerFactory pmf = JDOHelper.getPersistenceManagerFactory(properties);

    PersistenceManager pm = pmf.getPersistenceManager();
    Transaction tx=pm.currentTransaction();

    tx.begin();
    pm.makePersistent(new Session("aniruddha"));
    tx.commit();

    Query q = pm.newQuery("SELECT FROM "+Session.class.getName());

    List<Session> sessions = (List<Session>)q.execute();
    //Iterator<Session> iter = sessions.iterator();

    for(Session s : sessions){
        System.out.println(s.getSESSION_ID()+" : "+s.getSESSION_USERNAME());
    } 
````  `这是我要坚持的豆

`@PersistenceCapable public class Session { private Session(){ // Default constructor required by jdo } public Session(String session_username){ SESSION_USERNAME = session_username; }`

 ````
public long getSESSION_ID() {
    return SESSION_ID;
}
public String getSESSION_USERNAME() {
    return SESSION_USERNAME;
}
public void setSESSION_ID(long sESSION_ID) {
    SESSION_ID = sESSION_ID;
}
public void setSESSION_USERNAME(String sESSION_USERNAME) {
    SESSION_USERNAME = sESSION_USERNAME;
}

@PrimaryKey
@Persistent(valueStrategy=IdGeneratorStrategy.INCREMENT)
private long SESSION_ID;
private String SESSION_USERNAME; 
```` 

`}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:18:56.363

如果服务器模式不起作用，那么您还没有启动 HSQLDB 服务器。无论是 URL 还是文件，都适用于我。我完全按照 HSQLDB 文档从命令行启动服务器。

通过对服务器的 API 调用，您似乎缺少调用“server.start()”。无论哪种方式，问题都在于 HSQLDB 服务器启动，而不是 DataNucleus 访问。`

# php - 用于检索产品信息的 amazon api

> ID：10637443
> 
> 赞同：1
> 
> 时间：2012-05-17T14:16:26.310
> 
> 标签：php, amazon

我刚刚查看了亚马逊网络服务，但他们为此收费:(。

我正在寻找的是一个从亚马逊检索产品的 api。结果也可以按类别和子类别进行排序。

你知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:26:14.827

亚马逊产品 API 是免费的。

[https://affiliate-program.amazon.com/gp/advertising/api/detail/main.html](https://affiliate-program.amazon.com/gp/advertising/api/detail/main.html)

许多语言/平台中都有客户端实现。

[http://aws.amazon.com/code/Product%20Advertising%20API?_encoding=UTF8&jiveRedirect=1](http://aws.amazon.com/code/Product%20Advertising%20API?_encoding=UTF8&jiveRedirect=1)

# javascript - 在javascript的if语句中，==和===有什么区别？

> ID：10637445
> 
> 赞同：-2
> 
> 时间：2012-05-17T14:16:28.703
> 
> 标签：javascript, jquery, if-statement, conditional-statements

> **可能重复：**
> [JavaScript === vs ==：我使用哪个“相等”运算符有关系吗？](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)

在一些 JavaScript`if`语句中，我看到`===`了`==`.

这些有什么区别？我应该使用其中一个而不是另一个吗？

例如

```
if (variable == 'string') {
 return;
} 
```

相比：

```
if (variable === 'string') {
 return;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T14:17:43.103

=== 还检查类型是否相等

例如`1=="1"`为真但`1==="1"`为假

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T14:17:19.687

这`===`是一个严格的比较（也检查类型），而`==`是一个更宽松的比较。

例如：

```
var a = 'test';
if (a == true) {
   // this will be true
}

if ( a === true) {
   // this will not be true
} 
```

另一个例子：

```
var b = '0';
if ( b == 0){
    // this will be true
}

if ( b === 0 ){
    // this will not be true
} 
```

特别是在比较*虚假*值时非常重要。在 Javascript 中，以下所有内容都将被视为 false 并进行轻松比较：

```
* false
* null
* undefined
* empty string ''
* number 0
* NaN 
```

# linux - Linux bash - 重印用户的输入

> ID：10637446
> 
> 赞同：3
> 
> 时间：2012-05-17T14:16:36.743
> 
> 标签：linux, bash

我有一个旧的 shell 脚本需要移动到 bash。此脚本打印某些活动的进度并等待用户的命令。如果用户在 15 秒内没有采取任何行动，屏幕将重新绘制新进度并重新启动计时器。这是我的问题：

我正在尝试使用`read -t 15 myVar`- 这样等待循环 15 秒后将重新启动。然而，有一个场景给我带来了一个问题：

*   屏幕重绘和脚本等待输入（打印' `Enter command:`'）
*   用户输入`foo`但不按`enter`
*   15 秒后屏幕再次重绘，脚本等待输入 - 注意，`foo`屏幕上的任何位置都没有显示（打印“ `Enter command:`”）
*   用户输入`bar`并按下`enter`

此时变量`$myVar`持有' `foobar`'。

我需要什么？我正在寻找一种方法来查找用户键入的第一个字符串，以便在刷新状态后重新显示它。这样用户将看到： `Enter command: foo`

在 Solaris 上，我可以使用`stty -pendin`将输入保存到某种缓冲区中，并在刷新运行后`stty pendin`从缓冲区获取此输入并将其打印在屏幕上。

是否有与`stty pendin`功能等效的 Linux？或者，也许你知道我的问题的一些 bash 解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:53:57.757

我想一种方法是手动累积用户输入......使用`read`with`-n1`以便它在每个字符之后返回，然后你可以将它添加到你的字符串中。为防止过度绘图，您必须计算 15 秒时钟上剩余的秒数......

* * *

附录：

对于您对空格/返回的评论-您基本上想使用没有所需字符的 IFS，例如空格

例子：

```
XIFS="${IFS}"  # backup IFS
IFS=$'\r'      # use a character your user is not likely to enter (or just the same but w/o the space)

# Enter will look like en empty string
$ read -n1 X; echo --; echo -n "${X}" | od -tx1

--
0000000

# space will be presented as a character
$ read -n1 X; echo --; echo -n "${X}" | od -tx1
 --
0000000 20
0000001

# after you are all done, you probably wantto restore the IFS
IFS="${XIFS}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T17:51:23.577

扩展@nhed 所说的内容，可能是这样的：

```
#!/bin/bash

limit=5

draw_screen () {
    clear;
    echo "Elapsed time: $SECONDS" # simulate progress indicator
    printf 'Enter command: %s' "$1"
}

increment=$limit
str=
end=0
while ! [ $end -eq 1 ] ; do
    draw_screen "$str"
    while [ $SECONDS -lt $limit ] && [ $end -eq 0 ] ; do
            c=
            IFS= read -t $limit -r -n 1 -d '' c
            if [ "$c" = $'\n' ] ; then
                    end=1
            fi
            str="${str}${c}"
    done
    let limit+=increment
done
str="${str%$'\n'}" # strip trailing newline

echo "input was: '$str'" 
```

解决方案并不理想：

*   您有时可能会在循环中间输入并弄乱输入
*   你不能很好地编辑任何东西（但这可以通过更多的工作来解决）

但也许对你来说已经足够了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T02:00:58.380

如果你有 Bash 4：

```
read -p 'Enter something here: ' -r -t 15 -e -i "$myVar" myVar 
```

`-e`打开对用户文本输入的 readline 支持。使用`-i`以下文本作为向用户显示的输入缓冲区的默认内容。在这种情况下，以下文本是您正在读入的变量的先前内容。

示范：

```
$ myVar='this is some text'    # simulate previous entry
$ read -p 'Enter something here: ' -r -t 15 -e -i "$myVar" myVar
Enter something here: this is some text[] 
```

where`[]`代表光标。如果需要，用户将能够退格并更正先前的文本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T05:48:39.863

好的，我想我有解决方案。我接受了 nhed 的提议并做了一些工作:)

主代码打印一些状态并等待输入：

```
while :
do
    # print the progress on the screen
    echo -n "Enter command: "
    tput sc # save the cursor position
    echo -n "$tmpBuffer" # this is buffer which holds typed text (no 'ENTER' key yet)
    waitForUserInput
    read arguments <<< $(echo $mainBuffer) # this buffer is set when user presses 'ENTER'
    mainBuffer="" # don't forget to clear it after reading
    # now do the action requested in $arguments
done 
```

函数 waitForUserInput 等待 10 秒等待按键。如果没有输入 - 退出，但已经输入的键被保存在缓冲区中。如果按键被按下，它会被解析（添加到缓冲区，或者在退格的情况下从缓冲区中删除）。On Enter 缓冲区被保存到另一个缓冲区，从中读取它以进行进一步处理：

```
function waitForUserInput {
    saveIFS=$IFS # save current IFS
    IFS="" # change IFS to empty string, so 'ENTER' key can be read

    while :
    do
        read -t10 -n1 char
        if (( $? == 0 ))
        then
            # user pressed something, so parse it
            case $char in
                $'\b')
                    # remove last char from string with sed or perl
                    # move cursor to saved position with 'tput rc'
                    echo -n "$tmpBuffer"
                    ;;
                "")
                    # empty string is 'ENTER'
                    # so copy tmpBuffer to mainBuffer
                    # clear tmpBuffer and return to main loop
                    IFS=$saveIFS
                    return 0
                    ;;
                 *)
                    # any other char - add it to buffer
                    tmpBuffer=$tmpBuffer$char
                    ;;
            esac
        else
            # timeout occured, so return to main function
            IFS=$saveIFS
            return 1
        fi
    done
} 
```

感谢大家的帮助！

# python - 如何在 Windows 上使用 Popen 隐藏控制台？

> ID：10637450
> 
> 赞同：1
> 
> 时间：2012-05-17T14:16:44.010
> 
> 标签：python, windows, console, hide, popen

我找到了这个主题，我发现这是一个解决方案：

[模块子进程没有属性“STARTF_USESHOWWINDOW”](https://stackoverflow.com/questions/4703983/module-subprocess-has-no-attribute-startf-useshowwindow)

但是当我运行代码时，实际情况有所不同。：/

1.  运行我的代码：

    ```
    # Get the environment variables from OO-Python using subprocess
    oo_py_exec = os.path.join(oo_dir, r'program\python.exe')
    python_oo_script = ' ;'.join([
        "-cimport os",
        "print(os.environ['URE_BOOTSTRAP'])",
        "print(os.environ['UNO_PATH'])",
        "print(os.environ['PATH'])",
    ])

    subprocess.STARTF_USESHOWWINDOW
    info = subprocess.STARTUPINFO()
    info.dwFlags = subprocess.STARTF_USESHOWWINDOW
    info.wShowWindow = subprocess.SW_HIDE
    process = subprocess.Popen([oo_py_exec, python_oo_script],
        stdout=subprocess.PIPE, startupinfo=info)
    result = process.communicate() 
    ```

显示控制台。

2.  从链接运行代码：

    ```
    kwargs = {}
    if subprocess.mswindows:
         su = subprocess.STARTUPINFO()
         su.dwFlags |= subprocess.STARTF_USESHOWWINDOW
         su.wShowWindow = subprocess.SW_HIDE
         kwargs['startupinfo'] = su 
    subprocess.Popen("cmd.exe", **kwargs) 
    ```

控制台也显示了！

赢 xp, py 2.6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:20:12.647

您不应该使用`python.exe`，而是`pythonw.exe`-它们是相同的，除了一个确实显示控制台，另一个没有（`w`虽然不知道它代表什么）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-15T22:22:29.800

尝试添加以下行： **info.wShowWindow=11** 这隐藏了控制台窗口。剩下的问题：焦点改变了。不知道为什么，但是假设你运行这个 python 代码，调用一个 .exe 同时编辑一个文档。不好玩，因为你的输入很多时候会误入歧途

# php - PHP：带小数的字符串在转换为浮点数时会去除小数

> ID：10637457
> 
> 赞同：0
> 
> 时间：2012-05-17T14:17:17.857
> 
> 标签：php, string, floating-point, decimal

使用函数 floatval() 我尝试将带小数的字符串转换为浮点数，但它并没有给我想要的结果。这是代码：

```
    $price_calc = str_replace(',','.',$price);
    $reduction_calc = str_replace(',','',$reduction);
    $reduction_calc = '1.'.$reduction;      

    $price_calc = floatval($price_calc);
    $reduction_calc = floatval($reduction_calc);

    $oldprice = $price_calc * $reduction_calc;

```

这段代码来自我正在构建的获取价格（$price）和减少百分比（$reduction）的刮板。从那个价格和减少我试图计算旧价格。

在能够进行计算之前，我必须将 $price 和 $reduction 都转换为浮动。这就是它出错的地方

问题是，例如当 $reduction 是 51 时，值 $reduction_calc 应该是 1.51 。由于某些奇怪的原因，在应用 floatval() 后，变量 $reduction_calc 变为 1。

有人知道为什么吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:26:31.907

尝试这个：

```
$reduction_calc = floatval($reduction_calc); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:39:03.893

您的`$reduction`或`$price`字符串中可能有前导/尾随空格在脚本之前添加此代码

```
$reduction = trim($reduction);
$price = trim($price); 
```

# python - 无法通用导入 Python 包

> ID：10637458
> 
> 赞同：2
> 
> 时间：2012-05-17T14:17:18.847
> 
> 标签：python

假设我有以下目录结构：

```
workspace/
  __init__.py
  ys_manage/
    __init__.py
    manage.py
  ys_utils/
    __init__.py
    project_dicts.py 
```

现在，假设我需要访问`project_dicts.py`in `manage.py`。另外，我的`$PATH`包括`/home/rico/workspace/ys_manage`.

我需要能够`manage.py`从我机器上的任何目录运行并且仍然能够访问`project_dicts.py`.

我`$PYTHONPATH`唯一的`/home/rico/workspace`。

如果我在其中包含以下内容，我可以从但不能从其他任何地方`manage.py`运行该文件。`~/workspace/ys_manage`

```
import sys
sys.path.append('..')
from ys_utils import project_dicts 
```

似乎`'..'`给出了文件运行目录的相对路径，而不是文件所在的位置。它是否正确？

我想尝试使用`ys_manage/__init__.py`来导入`project_dicts.py`，以便它可以`manage.py`普遍使用。这是一个好主意吗？

`__init__.py`除了“包创建者”之外，我从未使用过其他任何东西。也就是说，我从未将它用于初始化目的。也许我做错了。

内容`ys_manage/__init__.py`：

```
import sys
sys.path.append('..')
from ys_utils import project_dicts 
```

我应该包括一些东西`manage.py`来寻找这个进口吗？

当我尝试运行时`manage.py`，出现以下错误：

```
NameError: global name 'project_dicts' is not defined 
```

作为第二个问题，我需要有`workspace/__init__.py`吗？我真的宁愿没有它，因为`ys_manage`和`ys_utils`（以及大约十几个其他包）都处于修订控制之下并被其他几个开发人员使用......`workspace`不是。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:25:33.153

通常，我发现尝试使用相对路径进行导入很危险并且很容易出错。我建议将工作区放在您的 PYTHONPATH 上（或以编程方式将其添加到 中`__init__.py`）并导入与该静态位置相关的所有内容。它也将使您的代码更易于阅读，因为您将能够更快、更清晰地跟踪导入的来源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:29:12.840

试试这个而不是`sys.path.append('..')`：

```
sys.path.append(os.path.join(os.path.dirname(__file__), '..')) 
```

（您需要同时导入 sys 和 os）。

# java - Android - 带有弹出窗口的 NullPointerException

> ID：10637463
> 
> 赞同：3
> 
> 时间：2012-05-17T14:17:42.080
> 
> 标签：java, android, android-widget

我的应用程序中有一个弹出窗口，一旦我`NullPointerException`在测试时得到以下信息。但是我的代码不在堆栈跟踪中。

```
/dalvikvm(15212): threadid=1: thread exiting with uncaught exception (group=0x409f71f8)
E/AndroidRuntime(15212): FATAL EXCEPTION: main
E/AndroidRuntime(15212): java.lang.NullPointerException
E/AndroidRuntime(15212):    at android.view.View.onDetachedFromWindow(View.java:9709)
E/AndroidRuntime(15212):    at android.widget.TextView.onDetachedFromWindow(TextView.java:4492)
E/AndroidRuntime(15212):    at android.view.View.dispatchDetachedFromWindow(View.java:9818)
E/AndroidRuntime(15212):    at android.view.ViewGroup.dispatchDetachedFromWindow(ViewGroup.java:2266)
E/AndroidRuntime(15212):    at android.view.ViewGroup.dispatchDetachedFromWindow(ViewGroup.java:2266)
E/AndroidRuntime(15212):    at android.view.ViewRootImpl.dispatchDetachedFromWindow(ViewRootImpl.java:2248)
E/AndroidRuntime(15212):    at android.view.ViewRootImpl.doDie(ViewRootImpl.java:3707)
E/AndroidRuntime(15212):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2584)
E/AndroidRuntime(15212):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(15212):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(15212):    at android.app.ActivityThread.main(ActivityThread.java:4424)
E/AndroidRuntime(15212):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(15212):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(15212):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
E/AndroidRuntime(15212):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
E/AndroidRuntime(15212):    at dalvik.system.NativeStart.main(Native Method)
W/ActivityManager( 1195):   Force finishing activity com.android.contacts/.activities.PeopleActivity 
```

谁能帮我找到根本原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:53:32.213

您可能会在弹出窗口显示之前调用finish()，即在它附加到您的窗口之前。交叉检查您为 PeopleActivity 调用 finish() 的位置。

# windows-phone-7 - 以固定的自定义间隔播放背景声音？

> ID：10637464
> 
> 赞同：0
> 
> 时间：2012-05-17T14:17:42.360
> 
> 标签：windows-phone-7, background-process

我正在开发一款 WP7 游戏，只要游戏正在运行，它就会每分钟发出一次声音通知用户。

即使应用程序关闭，我也希望发生这种情况。我尝试了一些不同的调度程序（例如 PeriodicTask），但它们都非常受限并且不允许如此小的间隔 - 最小值通常是 30 分钟。

我也尝试过允许背景音频播放的 AudioPlayerAgent，但我不知道如何运行每分钟播放一次声音的 AudioPlayerAgent？

我是否可以有一个后台线程来跟踪游戏并每分钟播放一次声音？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:18:02.073

您可以通过后台音频代理播放曲目，每个声音之间有一分钟（左右）的静音，然后循环播放。

这似乎是一种老生常谈的方式，我不能 100% 确定您的确切要求，或者您为什么真的想要这样做。

# javascript - 当 xml 具有空节点值时，防止 javascript 中断

> ID：10637467
> 
> 赞同：3
> 
> 时间：2012-05-17T14:17:52.923
> 
> 标签：javascript, xml

我有以下xml的示例：

```
<LOCAL_AUTHORITY>
     <NAME>Derby</NAME>
     <REGION></REGION>
     <IRD>22%</IRD>
<LOCAL_AUTHORITY> 
```

我有以下 javascript：

```
localAuthorities=xmlDoc.getElementsByTagName("LOCAL_AUTHORITY");
alert(localAuthorities[0].getElementsByTagName("REGION")[0].childNodes[0].nodeValue);
alert('This get triggered so javascript is not broken'); 
```

我的问题是除非你在 xml 中给 region 一个值，否则 javascript 会中断。对任何响应者表示友好。我如何防止它破裂？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:22:25.843

在阅读之前，您需要确保其中有内容。基本思想：

```
var nodes = localAuthorities[0].getElementsByTagName("REGION")[0].childNodes;
var value = nodes.length===1 ? nodes[0].nodeValue : "";
alert(value); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-17T14:21:05.793

你可以做 ：

```
localAuthorities=xmlDoc.getElementsByTagName("LOCAL_AUTHORITY");
// validate if there is region or not
if (localAuthorities[0].getElementsByTagName("REGION")[0].val()){
  alert(localAuthorities[0].getElementsByTagName("REGION")[0].childNodes[0].nodeValue);
  alert('This get triggered so javascript is not broken');
} 
```

# java - 如何在谷歌地图中的两个点范围之间进行选择

> ID：10637471
> 
> 赞同：1
> 
> 时间：2012-05-17T14:18:07.743
> 
> 标签：java, android

如何在谷歌地图中的两个点范围之间进行选择。例如：50m 或 100m

我正在使用此代码来计算距离。

```
 public class DistanceCalculator {

       public static final double Radius = 6378.1;

       public double CalculationByDistance(GeoPoint startp, GeoPoint endp) {
          double lat1 = startp.getLatitudeE6()/1E6;
          double lat2 = endp.getLatitudeE6()/1E6;
          double lon1 = startp.getLongitudeE6()/1E6;
          double lon2 = endp.getLongitudeE6()/1E6;
          double dLat = Math.toRadians(lat2-lat1);
          double dLon = Math.toRadians(lon2-lon1);
          double a = Math.sin(dLat/2) * Math.sin(dLat/2) +
          Math.cos(Math.toRadians(lat1)) * Math.cos(Math.toRadians(lat2)) *
          Math.sin(dLon/2) * Math.sin(dLon/2);
          double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
          return Radius * c;

       }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:28:03.823

MapViewController 有一个名为 zoomToSpan(int, int) 的方法。所以你需要做的就是找到两个点的中心，然后放大到它们之间的跨度。这是文档：

```
public void zoomToSpan(int latSpanE6,int lonSpanE6) 
```

> 尝试调整地图的缩放比例，以便显示给定的纬度和经度跨度。因为缩放只能实现离散级别，并且由于地图的纵横比可能与给定的比例不匹配，所以拟合的质量可能会有所不同。我们唯一保证的是，在缩放之后，新纬度或新经度中的至少一个将在相应参数的 2 倍范围内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:32:35.840

您尝试通过将度数转换为距离（例如从 1 度纬度到海里）来计算使用纬度和经度。

# numpy - 如何有效地删除部分数组

> ID：10637483
> 
> 赞同：1
> 
> 时间：2012-05-17T14:18:36.667
> 
> 标签：numpy, scipy, cython

我正在编写一个 numpy/cython 程序来计算小矩阵（很多）的小数。

我当前的函数看起来像（将 mat wrt. 的小数计算到第 ii 行，col jj）：

```
cdef float minor(np.ndarray[DTYPE_t, ndim = 2] mat,int ii,int jj): 
    rows = range(mat.shape[0])
    col = range(mat.shape[0])
    del rows[ii]
    del col[jj]

    cdef np.ndarray[DTYPE_t, ndim = 2] rM = (mat[rows])[:,col]

    cdef float val =  (-1)**(ii+jj) * np.linalg.det(rM)

    return val 
```

经过一些基准测试后，这条线

```
cdef np.ndarray[DTYPE_t, ndim = 2] rM = (mat[rows])[:,col] 
```

比较费时间。有没有更好的方法从二维数组中删除一行和一列？

你的，

cp3028

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:14:23.980

看起来您正在从 复制内存`(mat[rows])[:,col]`，分配和复制是一个缓慢的过程。难道不能简单地`np.linalg.deg`对原地块进行函数调用`mat`，而不是复制它并计算副本上的行列式吗？

# javascript - 无法从 FB.api 响应块调用 javascript 类方法

> ID：10637484
> 
> 赞同：0
> 
> 时间：2012-05-17T14:18:37.587
> 
> 标签：javascript, facebook, oop, facebook-javascript-sdk

我在javascript中定义了两个类，如下所示。

```
function ParentClass(){
    this.one = function(){
      alert('inside one of parent');
    };

    this.two = function(){
       alert('inside two of parent');
       //this is just a skeleton of the actual FB.api implementation in my code
       FB.api('/me', 'post', function(response){
        this.one();
      });

    };

}

function ChildClass(){
    ParentClass.call(this);

    //overriding the one() in ParentClass
    this.one = function(){
      alert('inside one of child');
    };
}

ChildClass.prototype = new ParentClass();
ChildClass.prototype.constructor = ChildClass;
var c = new ChildClass();
c.two(); 
```

`the last line calls the ParentClass's two() method which then calls the one() method overriden by the ChildCLass.`

我收到一条错误消息，提示“this.one() 未定义”。但是当我将 this.one() 方法放在 FB.api 响应块之外时，该函数会被完美地调用。我认为问题可能是 this.one() 中的“this”指的是 FB.api 回调函数而不是 ChildClass。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:22:00.167

只需将副本存储`this`在 FB 调用之外的另一个变量中。

```
this.two = function(){
   alert('inside two of parent');
   //this is just a skeleton of the actual FB.api implementation in my code
   var self = this;
   FB.api('/me', 'post', function(response){
    self.one();
  });

}; 
```

# php - 如何获取 cURL 获取的最后一个 URL？

> ID：10637493
> 
> 赞同：8
> 
> 时间：2012-05-17T14:19:03.050
> 
> 标签：php, curl

如果给定的 URL 被重定向到另一个 URL，`cURL`将通过

```
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); 
```

但是如何记录 cURL 获取的最后一个 URL 是什么？

和

```
curl_setopt($ch, CURLOPT_URL, $link);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); 
```

我们不知道 获取的实际 url 是什么`cURL`，因为`$link`它已被重定向到最终位置。如何记录字符串中的最后一个位置？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-17T14:20:04.830

您可以使用`curl_getinfo()`.

[http://php.net/manual/en/function.curl-getinfo.php](http://php.net/manual/en/function.curl-getinfo.php)

```
echo curl_getinfo($ch, CURLINFO_EFFECTIVE_URL); 
```

# sql - 将html数据库导出到excel

> ID：10637496
> 
> 赞同：0
> 
> 时间：2012-05-17T14:19:06.377
> 
> 标签：sql, excel

我有一个产品数据库及其描述。我需要为翻译服务导出描述/产品名称。问题是描述以 html 格式存储在数据库中。

当我将数据导出到 excel 时，单元格中也包含所有 html 语法。

有什么办法可以删除语法吗？我在想可能在导出时不一定在 excel 中。

我也可以将所有单元格数据复制到一个常规的 html 文件中，然后在我的浏览器中打开它并复制粘贴，但这不会保留单元格结构。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:18:20.260

如果可以将其保存为 html 文件，则应该可以使用 Excel 的内置功能。在 Excel 2007 及更高版本中，转到数据选项卡，然后选择“来自 Web”。

在出现的浏览器窗口中，将其指向 html 文件 C:\yourfile.html

它应该打开具有所有格式等的文件，并且如果数据是表格格式，您应该可以单击黄色框将其导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:14:04.677

在 TSQL 中去除 HTML

[http://cosier.wordpress.com/2008/10/22/tsql-strip-html-function/](http://cosier.wordpress.com/2008/10/22/tsql-strip-html-function/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T17:11:40.173

这可能对您有用（添加对“Microsoft HTML 对象库”的引用）

```
 Function HtmlToText(html As String) As String

    Static el As New MSHTML.HTMLDocument
    Static div As Object

    If div Is Nothing Then
        Set el = New MSHTML.HTMLDocument
        Set div = el.createElement("div")
        el.appendChild div
        Debug.Print "created"
    End If

    div.innerHTML = html
    HtmlToText = div.innerText

End Function 
```

# spring - Spring Security 会话管理会话固定保护不起作用

> ID：10637497
> 
> 赞同：1
> 
> 时间：2012-05-17T14:19:09.777
> 
> 标签：spring, spring-security

我正在使用 Spring 3.1 安全性。以下是我的“spring-security.xml”的一部分

```
<session-management session-fixation-protection="migrateSession">
<concurrency-control max-sessions="1" expired-url="/Login.html"/>
</session-management> 
```

虽然`session-fixation-protection="migrateSession"`如果我使用“Chrome 浏览器”登录然后复制 cookie 值并打开“Firefox 浏览器”并转到登录页面然后编辑 cookie 并从“Chrome 浏览器”粘贴值，我仍然设置，然后我看到我已登录进入我的应用程序。这意味着“会话固定攻击”是可能的！

我错过了春季安全配置中的任何内容吗？

这只是我的以下配置文件

```
<http auto-config="false" access-denied-page="/" disable-url-rewriting="true">

<intercept-url pattern="/test01*" access="ROLE_USER" requires-channel="https"/>
<intercept-url pattern="/test02*" access="ROLE_USER" requires-channel="https"/>

<form-login login-page="/Login.html"/>
<logout invalidate-session="true"
        logout-success-url="/"
        logout-url="/logout"/>

<session-management session-fixation-protection="migrateSession">        
    <concurrency-control max-sessions="1" expired-url="/Login.html"/>
</session-management>

</http>

<authentication-manager>
<authentication-provider>
<user-service>    
<user name="a" password="a" authorities="ROLE_USER" />
</user-service>
</authentication-provider>
</authentication-manager> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T14:37:21.947

如果您在登录*后*复制了 cookie （如您所说），那么这不是会话固定攻击（至少不是我们所防范的那种）。关键是当您登录时 cookie 会发生变化，因此其他人无法访问您的帐户。如果您想阻止某人修复已经登录到其帐户的会话，那么这是另一回事，并且不是可以通过这种方式轻松保护的东西。

此外，您不需要设置此属性，因为它默认启用。并且只使用一个`<session-management>`元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:36:10.020

这是因为您提供了，`session-fixation-protection="migrateSession"`. 即来自 Chrome 浏览器的会话被复制到 Firefox 浏览器的会话中。此外，它不应该同时登录第二次。这可能是因为，如果您提供了自己的类`UserPrincipal`和`UserPrincipalImpl`类，则必须覆盖对象的`equals()`和`hashCode()`方法。尝试使并发控制工作。

另请参阅[我的问题](https://stackoverflow.com/questions/8586824/spring-security-concurrency-control)。

# cakephp - cakephp find 返回西班牙字符的空数组

> ID：10637498
> 
> 赞同：0
> 
> 时间：2012-05-17T14:19:12.357
> 
> 标签：cakephp, find, special-characters, cakephp-2.1

我正在使用最新的 CakePHP (2.1.x)，当我进行如下查找时，当`Model.name`字段包含西班牙语字符时，它会返回一个空数组：

```
$this->Model->find(
        'list', 
        array(
            'conditions' => array(
                'LOWER(Model.name) LIKE' => '%'.$keyword.'%'
            ),
            'fields' => array(
                'Model.id', 
                'Model.name'
            )
        )
    ); 
```

当我显示`sql_dump`元素时，查询很好，它显示 0 `Error`、 1`Affected`和 1 `Num Rows`；另外，当我尝试查询时，它在 phpMyAdmin 上也能正常工作。

整个网站都是英文的，内容类型是UTF-8。我试图更改编码但没有成功。

该字段存储在数据库（MySQL）上，就`name varchar(255) latin1_swedish_ci`好像这可以提供任何帮助一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:56:02.163

也许您也需要在数据库连接上指定 utf-8 编码

看看[这个](http://www.missingfeatures.com/2008/10/23/using-utf8-in-your-cakephp-app/)，希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-23T15:17:12.513

实际上，您需要为数据库指定 utf-8：

转到**ROOT/app/config/database.php**

在 DATABASE_CONFIG 类中更改**编码**

```
'encoding' => 'utf8', 
```

# facebook - 回退到虚拟货币或通过 FB 积分赠送免费物品？

> ID：10637500
> 
> 赞同：1
> 
> 时间：2012-05-17T14:19:16.657
> 
> 标签：facebook, payment, facebook-canvas, facebook-credits, x-facebook-platform

有没有办法为购买收取“0”Facebook 积分（例如免费赠送它以教用户如何使用积分按钮）？

我们希望在游戏中的检查点为我们的用户播种物品，但同时告诉他们他们可以使用 FB 积分购买更多物品。我们使用 FB 积分作为我们的货币（对于传统用户和多平台用户而言，对我们的虚拟货币的抽象程度最低）。

将价格设置为“0”积分会返回错误。

另一个用例是，我们的用户在游戏中拥有物品价值一半的积分，但需要为其余部分补足。因此，如果他们有 3 个游戏内积分且物品为 6，我们将收取 3 个游戏内积分和 3 个 fb 积分。但我们希望一步到位，而不是购买 3 个游戏内积分然后将它们花在物品上。很容易用 FB 积分设置价格.. 除非最终为 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:48:07.613

我只是围绕它构建了自己的包装器，首先 ping 我的服务器以尝试使用虚拟货币购买，然后如果他们没有足够的 VC 来完成购买，则回退到 FB 积分。

# ios - 关于如何使用 libXml2 解析的参考

> ID：10637501
> 
> 赞同：1
> 
> 时间：2012-05-17T14:19:17.630
> 
> 标签：ios, libxml2

我是苹果 iphone 应用程序开发的新手。任何人都可以帮助我理解 libxml2 解析。我有苹果提供的用于nsxml和libxml2解析性能测试的示例代码。是否有任何其他样品可用于客观 c??..

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:30:31.183

请访问这些链接可能会为您提供一些帮助

*   [libxml2](http://cocoawithlove.com/2008/10/using-libxml2-for-parsing-and-xpath.html)
*   [libxml2](http://cocoasamurai.blogspot.in/2008/10/getting-some-xml-love-with-libxml2.html)
*   [nsxml](http://www.xcode-tutorials.com/parsing-xml-files/)
*   [nsxml](http://iphonebyradix.blogspot.in/2011/08/parsing-xml-using-nsxmlparser.html)

在google上简单搜索NSXML和libxml2

享受编码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:19:19.030

很好的示例代码和很好的解释： [http ://bill.dudney.net/roller/objc/entry/libxml2_push_parsing](http://bill.dudney.net/roller/objc/entry/libxml2_push_parsing)

# image - 通过链接在 WebBrowser 中显示图像（适合图像！）

> ID：10637509
> 
> 赞同：1
> 
> 时间：2012-05-17T14:19:41.677
> 
> 标签：image, windows-phone-7, browser

我有一个图片链接（它不是直接链接，例如“image.png”，因为我认为该图片是自动创建的）。

我设法下载并显示图像并且它工作，但是捏到缩放和拖动它有点错误..

如果我在 WebBrowser 中打开此链接，则拖动和缩放是完美的，但我得到了整个页面（即空白......）。这就像在左上角有一个带有小图像的白页，而不是我希望 WebBrowser 包装图像。我认为是由于身体宽度。

我确切地知道图像的尺寸，有没有办法用我的图像填充 WebBrowser？

这是[图像](http://chart.finance.yahoo.com/b?s=USDEUR=X "关联")的地址，您可以看到没有 .png 或 .jpg 或其他任何内容。我还尝试为 WebBrowser 提供一个 html 字符串，例如：

```
string html = "<html style=\"width:512px;height:288px;\"><body style=\"height:288px;\"><img src=\"" + source + "\"></body></html>"; 
```

但它没有用..

任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:27:37.193

听起来您正在将 HTML 直接传递给浏览器控件。我还没有机会用那种特殊的方法来尝试这个，但你要考虑的是视口元标记。

尝试将此添加到您的`<Head>`标签中：

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

# java - 在 objectdb 中查询

> ID：10637513
> 
> 赞同：0
> 
> 时间：2012-05-17T14:19:59.690
> 
> 标签：java, sql, database, objectdb

我必须在 objectdb 中实现一个查询并且几乎没有什么想法。

问题是写一个查询

```
Returns the collection of all laptops each of which has at least one
          other laptop preinstalled with the same processor. 
```

我的笔记本电脑课是

```
public class Laptop {

    String modelName; // key
    int price;        // in dollars
    boolean hasHDScreen; // has a HD Screen ?
    int hardDriveCapacity; // in GB

    Processor processor;  // the preinstalled processor
    Memory memory; // the preinstalled memory
    Company madeBy; // the inverse of company.makeLaptops
} 
```

我的处理器类是

```
public class Processor {

    String modelName; // key 
    float clockSpeed; // in gigahertz (GHz)

    Company madeBy; // the inverse of Company.makeProcessors
} 
```

我的函数定义也如下所示

```
public static Collection<Laptop> sameProcessor(Query q) {
        /* Returns the collection of all laptops each of which has at least one
         * other laptop preinstalled with the same processor.
         */
        q.setClass(Laptop.class);
        q.setFilter("this.processor == ");

    } 
```

我怎样才能实现它？SQL 也可以。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T19:40:48.237

终于熬过了这一关。这是解决方案

```
public static Collection<Laptop> sameProcessor(Query q) {
        /* Returns the collection of all laptops each of which has at least one
         * other laptop preinstalled with the same processor.
         */

        Collection result = new HashSet<Laptop>();
        q.setClass(Laptop.class);

        Collection allLaptops = (Collection) q.execute();

        Iterator it = allLaptops.iterator();

        while(it.hasNext()) {
            Laptop currentLaptop = ((Laptop)it.next());
            Processor p = currentLaptop.processor;
            if(p.installedOn(q).size()>=2) {

                result.add(currentLaptop);
            }
        }

        return (Collection<Laptop>)result;       
    } 
```

使用的方法`installedOn`定义如下：

```
public Collection<Laptop> installedOn(Query q) {

     /* Returns the collection of all laptops on which the target memory 
        is preinstalled. Represents the inverse of Laptop.memory.
     */
        Memory memory = this;
        q.setClass(Laptop.class);
        q.declareParameters("Memory m");
        q.setFilter("this.memory == m");
        Collection result = (Collection)q.execute(memory);
        return (Collection<Laptop>) result;

    } 
```

谢谢。希望能帮助到你。

# c++ - 泛型在 C++/CX 中的工作原理

> ID：10637514
> 
> 赞同：8
> 
> 时间：2012-05-17T14:20:01.890
> 
> 标签：c++, windows-runtime, c++-cx

我在 Internet 上找不到任何关于此的内容，因此我正在寻找对 C++/CX 实施方式有深入了解的人。关于 C++/CX的[Wikipedia 文章](http://en.wikipedia.org/wiki/C%2B%2B/CX)说它支持基于运行时的泛型，这意味着您不需要具有完整实现的头文件来实例化泛型类型。我了解这对 .NET 是如何工作的（程序集包含 IL 代码，JIT 可以在其中插入具体类型并在有新实例时对其进行编译），但是在 C++/CX（它是本机编译的）中没有 JIT 可以编辑运行时的代码（我认为这对于 x86 机器代码来说非常困难）

那么这里的诀窍是什么，是用拳击进行类型擦除还是一些新的人为方案？

（我知道关于类型的元数据是以 .NET 格式存储的，我在关注方法中的代码）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T17:15:30.253

在此处查看本文，最后一行对泛型的引用指定泛型在 C++/CX 中与接口和委托一起使用。

[http://msdn.microsoft.com/en-us/library/windows/apps/br212455(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br212455(v=vs.110).aspx)

这是有道理的，因为它被定义为允许 C++/CX 编译器为实际对象编译本机代码函数的接口，然后以类似于 C++ 模板的方式使用通用接口。函数的本机代码被编译，通用接口用于处理不同的类型。

对于编译器来说，这似乎是 C++/CLR 和 C++/CX 之间的区别。/clr：允许泛型类、接口和委托。/ZW：仅限通用接口和委托。

如果您在这里查看[http://msdn.microsoft.com/en-us/library/windows/apps/hh699870(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh699870%28v=vs.110%29.aspx)，您会注意到这些类没有通用规则。

但是，如果您阅读此主题[http://msdn.microsoft.com/en-us/library/windows/apps/hh755792(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh755792%28v=vs.110%29.aspx)，您会注意到泛型被用作接口。

C++/CX 中的“通用类”是通过使用标准 C++ 模板实现的。实例化或编译器生成的特定类型的泛型被导出到元数据，而不是模板本身。因此，您可以从元数据中看到 MyClass 和 MyClass，但看不到原始 MyClass。对于作为泛型类型导出到元数据的泛型接口情况，情况并非如此。

可以在此处找到更多信息[http://en.wikipedia.org/wiki/Windows_Runtime](http://en.wikipedia.org/wiki/Windows_Runtime)

因此，为了完全回答这个问题，到目前为止，方法中的代码是输出 dll 或 exe 中预编译的本机代码，并附加到实际的非泛型类。但是可以通过使用通用接口来通用地使用代码。因此，十个不同的类可以实现 IMyInterface，然后可以使用 IMyInterface 类型的变量来处理例如十种不同类型的实例。

因此，简短的回答是 C++/CX 中没有像 C++/CLR 中那样完整的泛型类。在 C++/CX 应用程序中使用模板获得相同的效果。如果您必须拥有 C++ 泛型，则使用使用 C++/CLI 制作的 dll，并从编译为 C++/CX 的程序中处理该代码。

笔记！我从检查各种文章中收集了很多信息，其中一些在 msdn 似乎说它们可能会发生变化。

现在将 C++/CX 中的通用接口与模板一起使用可能是他们的意图。因此，您创建了一个名为 MyClass 的模板，然后它实现了名为 MyInterface 的通用接口，因此如果您随后创建了一个 MyClass 模板实例化，新类型将自动实现 MyInterface，然后该接口可以在任何地方使用。因此，在编译的 dll 和头文件之外，其他 C++/CX 模块和文件可以在不需要头文件的情况下使用 MyInterface 等类型，因为模板实例化在编译的 dll 中，但是使用元数据的 c++ 文件知道如何创建 MyInterface 类型，因为它具有 MyInterface 的元数据，但没有 MyClass 的元数据。

简而言之，没有泛型类，C++/CX 中的泛型接口和委托支持实际上就像 C++/CLI 中的泛型一样工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T18:32:44.073

据我所知，不支持任意 C++/CX 泛型。C++/CX 可以使用 winrt 参数化接口，这些接口显示为 C++ 模板特化，但不能导出任意泛型。

您可以从 Windows::Foundation 命名空间创建参数化接口的特化，但不能创建原始参数化接口（公共引用模板）。

# ssl - SSL 认证

> ID：10637517
> 
> 赞同：1
> 
> 时间：2012-05-17T14:20:05.720
> 
> 标签：ssl, handshake

是否有一种简单的方法可以检查两个 .p12 文件，一个用于服务器，一个用于客户端，对于双方都需要授权（包括客户端授权）的 SSL 握手是否应该相互接受？这些 .p12 文件中的每一个都包含信任管理器和密钥管理器。

特别是，什么会在服务器端导致这样的错误？

```
SEND TLSv1 ALERT:  fatal, description = bad_certificate
WRITE: TLSv1 Alert, length = 2
called closeSocket()
handling exception: javax.net.ssl.SSLHandshakeException: null cert chain 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:09:58.840

在 TLS 握手中，首先客户端验证收到的服务器证书，然后根据证书算法和其他参数发送自己的证书。在您的情况下，服务器似乎收到了客户端的证书并拒绝了它，可能是因为空的证书链（即客户端的证书是自签名的？）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T16:32:21.593

No, there's no easy way, because mutual acceptability depends on the configuration of the client and server, and that goes way beyond the certificates they use.

For example, certificates have a "policy" which identifies the practices and policies under which they were issued. Each party can have local configuration that includes a set of acceptable policies. There are many other examples.

# php - 存储过程仅部分从 PHP 执行

> ID：10637521
> 
> 赞同：1
> 
> 时间：2012-05-17T14:20:19.253
> 
> 标签：php, sql, sql-server-2008, stored-procedures

我有一个在 MS SQL 2008 R2 中运行的存储过程，它在 SQL Management Studio 中运行良好。但是，如果我从 PHP 运行它，它似乎在完成之前停止执行。SQL 中没有返回错误，PHP 错误日志中也没有返回错误。该过程只是使用第二个存储过程多次写入错误日志。我已将代码缩减为一个简单的循环，以演示重现问题。这是主要的存储过程。

```
ALTER PROCEDURE [dbo].[usp_failure_test]

AS
DECLARE
@counter int,
@message nvarchar(100)

SET @counter = 0;
WHILE @counter < 100
  BEGIN
    SET @message = 'COUNT: ' + CAST(@counter AS nvarchar);
    EXEC usp_log 0, 'TEST', @message;
    SET @counter += 1;
  END
EXEC usp_log 0, 'TEST', 'Finished'; 
```

这调用了过程 usp_log

```
ALTER PROCEDURE [dbo].[usp_log]
@engine_id int,
@type nvarchar(15),
@message text
AS
DECLARE
@last int,
@log_size int

INSERT INTO [dbo].[log] (engine_id, timestamp, type, message) VALUES (@engine_id, getdate(), @type, @message);
SET @log_size = CONVERT(int, (dbo.get_setting('log_size')))
SET @last = (SELECT TOP 1 id FROM log ORDER BY id DESC)
DELETE FROM log WHERE id < (@last - @log_size)
return 
```

如果我从 SSMS 执行 usp_failure 测试，它会写入所有预期的日志条目，然后成功停止。但是，如果我从 PHP 执行它（使用以下代码），它只会达到 52，然后停止而没有任何关于原因的线索。

```
<?php
$servername = "localhost\sqlexpress";
$connectionInfo = array("UID" => "xxx", "PWD" => "xxx", "Database"=>"xxx", "ReturnDatesAsStrings"=>true, "CharacterSet" =>"UTF-8");
$conn = @sqlsrv_connect($servername, $connectionInfo);
$query = "usp_failure_test";
$params = array();
$result = sqlsrv_query($conn, $query, $params);
?> 
```

我尝试添加额外的代码行，这使得它在更少的迭代后失败。我确保 PHP 有足够的内存可以使用，并且我还检查了 PHP 和 SQL 日志，但无济于事。我们还使用了 SQL 分析器，它也没有出现任何问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T14:27:19.960

尝试`SET NOCOUNT ON`在您的存储过程中使用。您可能会遇到可以从 sql server PHP 驱动程序返回到 PHP 的结果数量的限制。

# grails - 没有表连接的 Grails“一对多”关系

> ID：10637523
> 
> 赞同：3
> 
> 时间：2012-05-17T14:20:24.327
> 
> 标签：grails, grails-orm, grails-domain-class

我是 Grails 和 GORM 的新手，我尝试实现“一对多”关系。我尝试了文档中的示例：

```
class Book {
    String title
}
class Author {
    static hasMany = [books: Book]
    String name 
} 
```

以下是生成的表：

```
AUTHOR
- Id (PK)
- Name

BOOK
- Id (PK)
- Title

AUTHOR_BOOK
- Author_Books_Id
- Book_Id 
```

我期待更多类似的东西：

```
AUTHOR
- Id (PK)
- Name

BOOK
- Author_Id (PK)
- Book_Index (PK)
- Title 
```

有没有办法实现这一点（摆脱连接表）？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-17T14:24:51.453

你应该声明这本书属于作者。使用 belongsTo 可以声明 Book 表中有一个外键，它保持对 Author 的 id 列的引用。像这样：

```
class Book {
    String title
    static belongsTo = [author: Author]
}

class Author {
    static hasMany = [books: Book]
    String name 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:28:16.997

只是反过来做。

一本书有一个作者。

```
class Book {
    String title
    Author author
}

class Author {
    String name 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-06T16:19:38.717

class Book { String title static belongsTo = [作者：作者] }

类作者 { static hasMany = [books: Book] String name }

# sql - 星期几之间的 PL/SQL

> ID：10637524
> 
> 赞同：1
> 
> 时间：2012-05-17T14:20:25.290
> 
> 标签：sql, oracle, plsql, oracle11g

我需要编写一个触发器来防止在周五下午 5 点到周一上午 9 点之间插入。

我是否走在正确的轨道上，认为我需要从 sysdate 中提取日期/时间并按照以下方式做一些事情

```
if
extract (day from sysdate) =>5 
AND extract (hour from sysdate) =>17 
AND extract (day from sysdate) =< 1 
AND extract (hour from sysdate) =<9
THEN
... 
```

请让我知道这是否可怕地走上了错误的轨道。

我对“指定星期几”的搜索毫无结果感到沮丧，也许有人可以提出更好的搜索方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T14:32:45.537

我会尝试：

```
IF TO_NUMBER( TO_CHAR( SYSDATE, 'DHH24' ) ) > 516 OR
   TO_NUMBER( TO_CHAR( SYSDATE, 'DHH24' ) ) < 109 THEN 
```

甚至只是

```
IF NOT TO_NUMBER( TO_CHAR( SYSDATE, 'DHH24' ) ) BETWEEN 109 AND 516 THEN 
```

您需要注意，`D`星期几的值取决于当地日历，例如，一周的第一天可能是星期日或星期一。检查您的 NLS 设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:31:26.350

就个人而言，我可能会将其分解为三个更易于编码的跨度。

```
if(      -- Disallow all day Sat & Sun
         to_char( sysdate, 'fmDay' ) in ('Saturday', 'Sunday') )  
    or  (    to_char( sysdate, 'fmDay' ) = 'Friday'
         and extract( hour from sysdate ) >= 17) -- Disallow on Friday after 5
    or  (    to_char( sysdate, 'fmDay' ) = 'Monday'
         and extract( hour from sysdate ) < 9) -- Disallow on Monday before 9
   )
then 
```

这假定您的 NLS 设置始终设置为英语。你可以让它更通用，但它开始变得更复杂，因为不同的国家在不同的日子开始一周，所以 1 可能是星期一或星期日。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-01T15:23:45.493

这是一个完成这项工作且不依赖于 NLS 设置的触发器：

```
create or replace trigger no_we
before insert or update or delete on dylans_table
for each row
when (sysdate between trunc(sysdate-9/24,'IW')+4+17/24 /*Friday 5pm*/ 
                  and trunc(sysdate-9/24,'IW')+7+ 9/24 /*Monday 9am*/)
begin
  raise_application_error(-20001, 'No working on weekends. Go live your life!');
end;
/ 
```

如果有人想知道，格式说明符“IW”是[ISO 8601 周](https://en.wikipedia.org/wiki/ISO_8601#Week_dates)- 一种总是从星期一开始的星期。

# c++ - 如何使用 C++ 引用对象

> ID：10637532
> 
> 赞同：0
> 
> 时间：2012-05-17T14:20:48.263
> 
> 标签：c++, oop

就像我有一些课程一样

```
class B {
public:
    int a;
};

class C {
    B reference;
}

B Test;
C Test2;

C.reference = Test;

B.a = 2; 
```

现在我还需要从 C.reference.a 获得 2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:25:40.953

像这样：

```
class C {
public:
    B& reference; // notice use of '&' to denote a reference

    C(B& ref) : reference(ref)
    {
    }
}; 
```

它会像这样使用：

```
C Test2 = C(Test); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:24:26.337

```
class C {
public:
    C(B & ref)
        :reference(ref)
    {}

    B & reference;
};

B Test;
C Test2(Test); 
```

请注意，如果您有引用成员，编译器不会为您生成赋值运算符，因此您不能这样做：

```
B b1, b2;
C c1(b1), c2(b2);
c1 = c2; // can't do this 
```

当然，您仍然可以提供自己的。如果您希望能够重新分配引用，那么您可以使用指针，您可能应该将其设为私有并使用访问器来读取和修改数据。

# entity-framework - fluent api如何定义复杂（1到0|n）的实体框架关系？

> ID：10637533
> 
> 赞同：0
> 
> 时间：2012-05-17T14:20:49.830
> 
> 标签：entity-framework

我有以下（简化的）类：

```
public class Person
{
   public string Id {get; set;}  //Ignore the fact that the Id is string -- legacy system
   public string Firstname {get; set;}
   public ICollection<Member> Memberships {get; set;}
   ...
}

public class Account
{
   public string Id {get; set;}
   public string AccountType {get; set;}
   ...
}

public class Member
{
   public string AccountNumber {get; set;}
   public string PersonNumber {get; set;}
   public Account Account {get; set;}
   public Person Person {get; set;}
   ...
 } 
```

以及以下 EF 配置：

```
//In Accounts configuration class
ToTable("missacct");
HasKey(a => a.Id);

//In Members Configuration class
ToTable("members");
HasKey(a => new { a.AccountNumber, a.PersonNumber});
HasRequired(a => a.Person).WithMany().HasForeignKey(p => p.PersonNumber);
HasRequired(a => a.Account).WithMany().HasForeignKey(a => a.AccountNumber);

//In Persons Configuration Class
ToTable("person");
HasKey(p => p.Id);
HasMany(p => p.Memberships).WithOptional().HasForeignKey(p => p.PersonNumber); 
```

这里的意图是存在人员和帐户。没有成员就不能存在帐户，并且成员始终是一个人。但是，一个人可以在没有成为帐户成员的情况下存在。

这个想法是我希望能够查询以下内容：

1.  给定一个特定的帐号，我想找到该帐户上的所有人。
2.  给定一个名字/姓氏组合，我想找到所有名称匹配的人以及他们可能是其成员的任何帐户。

我所拥有的目前似乎不起作用。我收到一个循环引用错误，但我不太确定哪里出错了。

谢谢你的尽心帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:19:26.077

您正在定义两个单独的关系，而不是一个双向关系。试试这个：

```
//In Accounts configuration class
ToTable("missacct");
HasKey(a => a.Id);

//In Members Configuration class
ToTable("members");
HasKey(a => new { a.AccountNumber, a.PersonNumber});
HasRequired(m => m.Person).WithMany(p => p.Memberships).HasForeignKey(p => p.PersonNumber);
HasRequired(m => m.Account).WithMany().HasForeignKey(a => a.AccountNumber);

//In Persons Configuration Class
ToTable("person");
HasKey(p => p.Id);
HasMany(p => p.Memberships).WithOptional(m => m.Person).HasForeignKey(p => p.PersonNumber); 
```

> 没有成员就不能存在帐户...

您必须在应用程序逻辑中强制执行这部分。在关系级别，您只能说成员必须有一个帐户。

# visual-studio-2008 - XP for Win7打包VS2008安装工程

> ID：10637534
> 
> 赞同：0
> 
> 时间：2012-05-17T14:20:53.323
> 
> 标签：visual-studio-2008, windows-7, .net-3.5, windows-xp, setup-deployment

我正在使用 VS2008 Pro 在 WinXP Pro 32bit 上进行开发。我是否需要以任何特殊方式创建安装/部署项目才能在 Win7 Pro 64 位计算机上安装我的应用程序？

目前，我在项目中设置的部署设置项目似乎只安装在 WinXP 上，而在 Win7 上失败。

在为 WinXP 设置安装项目时，我将其设置为自动安装 .NET 3.5、Windows Report Writer、SQL Server Compact 和 Windows Installer（如果计算机上不可用）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:30:08.033

您需要在部署项目属性中设置[`TargetPlatform`](http://msdn.microsoft.com/en-us/library/w1behyzx%28v=vs.90%29.aspx)为。`x64`

# coldfusion - Coldfusion CFDOCUMENT 创建一个红色 X

> ID：10637542
> 
> 赞同：1
> 
> 时间：2012-05-17T14:21:08.177
> 
> 标签：coldfusion, cfdocument, cfimage

我在使用 ColdFusion 进行服务器到服务器调用时遇到问题。

假设我有两台服务器，每台都有一个文件：
www.Content.com/webpage.cfm
www.Badge.com/badge.jpg

我的源代码如下所示：

```
<cfdocument format="pdf" pagewidth="11" pageheight="8.5">

This is a simple PDF that was created to show issues with content generation on the server. This PDF uses an http:// reference to the badge server to show an image of a badged team member.

<BR />
<BR />

<img src="https://www.badge.com/badge.jpg" />

</cfdocument> 
```

如果我删除 CFDOCUMENT 标记，页面将完美呈现，并且 JPG 图像完全按照应有的方式显示。但是，当我将页面呈现为 PDF 时，文档不包含 JPG 文件，并且在图像原本应该出现的位置出现了一个又大又难看的红色 X。

我的网络管理员建议，尽管用户可以对徽章和内容进行身份验证，但徽章服务器可能不会对内容进行身份验证，反之亦然。如何指示coldfusion从当前登录的用户那里获取用户权限并拉取图像？

我研究了使用 CFIMAGE 并将图像文件保存到内容 RAM 中，然后在 PDF 呈现之前将图像写入变量。这似乎产生了一个错误。

预先感谢您的反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:07:12.167

图像总是不同的吗？否则，您可能希望将图像保存在本地服务器上，并使用属性`localURL`

[http://www.ravenglass.com/blog/index.cfm/2010/6/9/Including-Images-in-a-PDF-created-in-CFDOCUMENT](http://www.ravenglass.com/blog/index.cfm/2010/6/9/Including-Images-in-a-PDF-created-in-CFDOCUMENT)

另一种可能性可能是 CF 不“信任”SSL。您可以尝试使用 CFHTTP 获取该图像 URL，您将知道是否是这种情况。请参阅：[Coldfusion：带有 SSL 加密页面的 CFHTTP (https://) - 出现错误](https://stackoverflow.com/questions/1938913/coldfusion-cfhttp-with-ssl-encrypted-page-https-got-an-error)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T19:44:26.147

CFHTTP 无需通过 URL 抓取图像并将其保存在本地。尝试这个：

```
<cfscript>
myImg = imageRead("http://i.mycommentspace.com/23/2371.jpg") ;
imageWrite(myImg,"c:\myimage.jpg",0.8);
</cfscript> 
```

顺便说一句——当你使用本地路径时，CFDOCUMENT 中的图像往往效果最好，所以一旦你抓住了图像，试试，例如`<img src="c:/myimage.jpg" />`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-27T23:31:17.253

`localUrl="yes"`（或`=true`）对于 CF 生成 pdf 非常挑剔的 https 失败。

```
<img src="file:\\\#replace(getCurrentTemplatePath(),"my.cfm")#images\my.png"> 
```

您必须注意上下遍历目录才能到达您的 \images 文件夹。

# delphi - 使用 TEmbeddedWB 或 TWebBrowser 检测外部内容

> ID：10637550
> 
> 赞同：4
> 
> 时间：2012-05-17T14:21:46.560
> 
> 标签：delphi, webbrowser-control, c++builder, twebbrowser

我试图阻止由 TEmbeddedWB 或 TWebBrowser（或 TCppWebBrowser）加载的任何外部内容。我想阻止从 Internet 加载的任何内容，包括图像、javascript、外部 CSS、外部 [embed] 或 [object] 或 [applet] 或 [frame] 或 [iframe]，执行可以加载外部内容的 JavaScript 等。

这个问题由两部分组成：

*   将网络浏览器设置为“全部限制”（除了没有图像的基本 HTML）并检测是否存在此类内容
*   如果外部内容不存在，则显示“下载栏”，单击后将网络浏览器置于“全部下载”模式并获取所有内容。

第一项有问题。在 TEmbeddedWB 中，您可以使用 DownloadOptions 开关阻止几乎任何东西，最重要的是 ForceOffline 开关，但即使所有这些都关闭，它仍然会通过一些东西，如`[object]`或`[iframe]`标签。我知道是这种情况，因为我实现了 OnBeforeNavigate2 事件，它触发了这些标签中包含的 URL，并且它还在本地服务器的日志中创建了一个条目。在 TEmbeddedWB 中设置`OfflineMode`和`ForceOfflineMode`对这些项目没有帮助。

那么我怎样才能真正阻止所有呢？因此，它需要从包含脚本和 CSS 在内的被阻止的外部元素的基本 HTML 开始。有没有办法在每次想要下载任何内容时触发事件，以便可以阻止它或通过阻止所有外部下载来避免首先触发此类事件？我需要摆弄 Internet Explorer 区域和安全性吗？任何指向正确方向的指针都会有所帮助。

第二项也很棘手，因为我需要检测是否存在有问题的标签（例如“applet”、“script”、“link”等。这种检测不需要完美，但至少必须足以覆盖大多数这样的标签。我是这样做的：

```
//----------------------------------------------------------------------
// Check for external content (images, scripts, ActiveX, frames...)
//----------------------------------------------------------------------
try
    {    
    bool                                HasExternalContent = false;
    DelphiInterface<IHTMLDocument2>     diDoc;                              // Smart pointer wrapper - should automatically call release() and do reference counting
    diDoc = TEmbeddedWB->Document;

    DelphiInterface<IHTMLElementCollection>     diColApplets;           DelphiInterface<IDispatch>          diDispApplets;      DelphiInterface<IHTMLObjectElement> diObj;
    DelphiInterface<IHTMLElementCollection>     diColEmbeds;            DelphiInterface<IDispatch>          diDispEmbeds;
    DelphiInterface<IHTMLFramesCollection2>     diColFrames;            DelphiInterface<IDispatch>          diDispFrames;
    DelphiInterface<IHTMLElementCollection>     diColImages;            DelphiInterface<IDispatch>          diDispImages;       DelphiInterface<IHTMLImgElement>    diImg;
    DelphiInterface<IHTMLElementCollection>     diColLinks;             DelphiInterface<IDispatch>          diDispLinks;
    DelphiInterface<IHTMLElementCollection>     diColPlugins;           DelphiInterface<IDispatch>          diDispPlugins;
    DelphiInterface<IHTMLElementCollection>     diColScripts;           DelphiInterface<IDispatch>          diDispScripts;
    DelphiInterface<IHTMLStyleSheetsCollection> diColStyleSheets;       DelphiInterface<IDispatch>          diDispStyleSheets;

    OleCheck(diDoc->Get_applets     (diColApplets));
    OleCheck(diDoc->Get_embeds      (diColEmbeds));
    OleCheck(diDoc->Get_frames      (diColFrames));
    OleCheck(diDoc->Get_images      (diColImages));
    OleCheck(diDoc->Get_links       (diColLinks));
    OleCheck(diDoc->Get_plugins     (diColPlugins));
    OleCheck(diDoc->Get_scripts     (diColScripts));
    OleCheck(diDoc->Get_styleSheets (diColStyleSheets));

    // Scan for applets external links
    for (int i = 0; i < diColApplets->length; i++)
        {
        OleCheck(diColApplets->item(i,i,diDispApplets));
        if (diDispApplets != NULL)
            {
            diDispApplets->QueryInterface(IID_IHTMLObjectElement, (void**)&diObj);
            if (diObj != NULL)
                {
                UnicodeString s1 = Sysutils::Trim(diObj->data),
                              s2 = Sysutils::Trim(diObj->codeBase),
                              s3 = Sysutils::Trim(diObj->classid);

                if (StartsText("http", s1) || StartsText("http", s2) || StartsText("http", s3))
                    {
                    HasExternalContent = true;
                    break;                                                  // At least 1 found, bar will be shown, no further search needed
                    }
                }
            }
        }

    // Scan for images external links
    for (int i = 0; i < diColImages->length; i++)
        {
        OleCheck(diColImages->item(i,i,diDispImages));
        if (diDispImages != NULL)                                           // Unnecessary? OleCheck throws exception if this applies?
            {
            diDispImages->QueryInterface(IID_IHTMLImgElement, (void**)&diImg);
            if (diImg != NULL)
                {
                UnicodeString s1 = Sysutils::Trim(diImg->src);

                // Case insensitive check
                if (StartsText("http", s1))
                    {
                    HasExternalContent = true;
                    break;                                                  // At least 1 found, bar will be shown, no further search needed
                    }
                }
            }
        }
    }
catch (Exception &e)
    {
    // triggered by OleCheck
    ShowMessage(e.Message);
    } 
```

是否有一种更简单的方法来扫描它，或者唯一的一种是使用类似于上面代码的其他接口函数（例如，等）运行几个`Get_applets`循环`Get_embeds`？`Get_stylesheets`到目前为止，我发现我必须调用以下函数来涵盖所有这些：

```
 OleCheck(diDoc->Get_applets     (diColApplets));
    OleCheck(diDoc->Get_embeds      (diColEmbeds));
    OleCheck(diDoc->Get_frames      (diColFrames));
    OleCheck(diDoc->Get_images      (diColImages));
    OleCheck(diDoc->Get_links       (diColLinks));
    OleCheck(diDoc->Get_plugins     (diColPlugins));
    OleCheck(diDoc->Get_scripts     (diColScripts));
    OleCheck(diDoc->Get_styleSheets (diColStyleSheets)); 
```

但是，如果可以更轻松地处理，我宁愿不实现那么多循环。它可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T06:15:24.400

我建议你这个解决方案：

```
#include "html.h"
THTMLDocument doc;
void __fastcall TForm1::CppWebBrowser1DocumentComplete(TObject *Sender, LPDISPATCH pDisp,
          Variant *URL)
{
    doc.documentFromVariant(CppWebBrowser1->Document);

    bool HasExternalContent = false;
    for (int i=0; i<doc.images.length; i++) {
        if(doc.images[i].src.SubString(1, 4) == "http")
        {
            HasExternalContent = true;
            break;
        }
    }
    for (int i=0; i<doc.applets.length; i++) {
        THTMLObjectElement obj = doc.applets[i];
        if(obj.data.SubString(1, 4) == "http")
            HasExternalContent = true;
        if(obj.codeBase.SubString(1, 4) == "http")
            HasExternalContent = true;
        if(obj.classid.SubString(1, 4) == "http")
            HasExternalContent = true;
    }
} 
```

这个很棒的包装类可以从[这里](http://doxy.phphost.biz/html.rar)下载。

# macos - OS X 安装程序的自动集成测试？

> ID：10637551
> 
> 赞同：1
> 
> 时间：2012-05-17T14:21:59.237
> 
> 标签：macos, continuous-integration, packagemaker

我想自动化我们的 OS X 安装程序的集成测试。安装程序需要管理员身份验证。现在，我们进行手动测试（启动一个干净的虚拟机，下载安装程序，运行它并检查已安装的产品），但我想至少自动化安装程序的初始测试。我们使用 Jenkins 作为我们的 CI 服务器。

Jenkins 构建奴隶可以调用

```
sudo installer -pkg <my package> -target / 
```

但是 Jenkins 构建奴隶（正确地）似乎以非特权用户的身份运行构建作业。

我如何 (1) 通过 Jenkins 运行安装程序或 (2) 在不运行的情况下验证安装程序的内容和功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T02:20:30.520

对于这种情况，我在我的 sudoers 文件中添加了一个 ALL=NOPASSWD 行，它允许 jenkins 用户在不提供密码的情况下运行 /usr/sbin/installer。

在这个例子中，用户名是 'qa' - 步骤是：

1.  须藤 visudo

2.  添加 /usr/sbin/installer 行（将“qa”替换为您的 jenkins 用户）

    qa ALL=NOPASSWD: /usr/sbin/installer

之后，假设 jenkins 以该用户身份运行，它应该能够在没有密码的情况下运行安装程序。

# algorithm - 我可以使用什么算法在图像上应用鱼眼失真？

> ID：10637553
> 
> 赞同：3
> 
> 时间：2012-05-17T14:22:02.173
> 
> 标签：algorithm, filter, video-processing

任何人都可以指导我开发用于视频处理的过滤器算法的最佳方式吗？

例如，我想在图像上应用鱼眼镜头滤镜，我将如何处理像素以模仿这种效果？

如果我想让图片看起来更红，那么我会从每个像素的蓝色和绿色分量中减去值，只留下红色分量。

这种失真不仅仅是颜色处理，所以我想知道如何以正确的方式操纵像素来模仿鱼眼镜头滤镜，或者说捏合滤镜等等。

**编辑：**

视频处理的过滤算法*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T17:38:55.733

正如 Martin 所说，要对图像应用失真，而不仅仅是颜色校正，您需要以某种方式置换该图像中的像素。您通常从输出图像开始，并确定要从哪个输入像素位置抓取以填充输出中的每个位置。

例如，为了生成我在[这个答案](https://stackoverflow.com/a/9896856/19679)中显示的捏合失真，我使用如下所示的 OpenGL ES 片段着色器：

```
 varying highp vec2 textureCoordinate;

 uniform sampler2D inputImageTexture;

 uniform highp vec2 center;
 uniform highp float radius;
 uniform highp float scale;

 void main()
 {
     highp vec2 textureCoordinateToUse = textureCoordinate;
     highp float dist = distance(center, textureCoordinate);
     textureCoordinateToUse -= center;
     if (dist < radius)
     {
         highp float percent = 1.0 + ((0.5 - dist) / 0.5) * scale;

         textureCoordinateToUse = textureCoordinateToUse * percent;
     }
     textureCoordinateToUse += center;

     gl_FragColor = texture2D(inputImageTexture, textureCoordinateToUse );

 } 
```

此 GLSL 代码应用于输出图像中的每个像素。它的作用是计算从被挤压区域的中心到当前像素坐标的距离。然后，它采用输入距离并根据输入`scale`参数进行缩放。这个新的缩放距离用于替换输入图像中将从其中读取输出颜色的坐标。

在每个输出像素的位移坐标处从输入图像中采样颜色是产生输入图像的失真版本的原因。正如您在我的链接答案中所看到的，用于计算此位移的稍微不同的函数可能会导致非常不同的失真。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T14:32:46.100

您应用图像扭曲。基本上对于转换后的输出图像中的每个点，您都有一个数学公式来计算该点在原始图像中的来源，然后您只需复制这些坐标处的像素 - [opencv 具有](http://opencv.willowgarage.com/documentation/geometric_image_transformations.html)执行此操作的功能。

通常，您当然会尝试消除像鱼眼这样的光学效果，但原理是一样的。

附言。考虑从结果开始并返回源有点令人困惑，但您这样做是因为源图像中的许多点可能都到结果中的同一点，并且您想要结果像素的均匀网格。

# java - 如何将 XmlAdapter 全局应用于 JAXB 程序？

> ID：10637555
> 
> 赞同：9
> 
> 时间：2012-05-17T14:22:10.860
> 
> 标签：java, jaxb

我正在使用 JAXB（通过一堆 JaxWS 和 CXF）并尝试将 BigDecimal 类型编组为字符串（数字）和 int（指数），因为由于语言环境问题，我们现在有一个无法解释 BigDecimal 的前端。

我正在尝试使用 XmlAdapter 将 BigDecimal 转换为我自己的类型 BigDecimalUnScaled。只要我将我的 @XmlJavaTypeAdapter 注释直接放在字段上，它就可以正常工作。但是，我真正想做的是将它放在我的 Web 服务实现中，并让它全局应用于所有 BigDecimal，而不必单独编组每个返回对象。有什么办法可以做到这一点吗？

例如

```
Interface DummyWebService
-- Get Return Object (Return object is a POJO with say an ID and a BigDecimal value)

Implementation default
-- No type annotation, uses default BigDecimal marshaller

Marshalled Implementation
-- XmlTypeAdapters implementation, should globally use BigDecimal 
```

我试过把适配器放在实现上，但它不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T14:52:37.217

您可以`XmlAdapter`在包级别注册您的并将其应用于该包中该类型的所有字段/属性：

**com/example/package-info.java**

```
@XmlJavaTypeAdapters({
    @XmlJavaTypeAdapter(value=BigDecimalAdapter.class, type=BigDecimal.class)
})
package com.example;

import javax.xml.bind.annotation.adapters.*; 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2012/02/jaxb-and-package-level-xmladapters.html](http://blog.bdoughan.com/2012/02/jaxb-and-package-level-xmladapters.html)

# ios - 设计这个核心数据数据库的好方法是什么？

> ID：10637556
> 
> 赞同：1
> 
> 时间：2012-05-17T14:22:11.767
> 
> 标签：ios, core-data

我正在开发一个使用核心数据的 iphone 应用程序。数据包括大量人员。每个人都会有某些相同的属性。名字，姓氏，年龄等等。然后将这些人分为几类。我遇到不同类别的人的问题将具有不同的属性。

例如

人 A 将属于 A 类，并具有属性 a、b、c

人 B 将属于 B 类，并将具有属性 b、c、d

人 C 将属于类别 b 和 c，并将具有属性 c、d、e

我想拥有实体人

实体类别

实体personattributes 将存储所有一次的属性，不适用于此人将只是空。

在代码中，我会知道该人是否属于 a 类，他将只有属性 a、b、c

这会是一个好的设计，还是我需要为每个类别设置一个单独的属性实体

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:21:35.473

那么每个类别都有自己的一组属性吗？创建一个 CategoryAttributeSet 类可能是有意义的，它可以作为 CategoryAttributeSetA、CategoryAttributeSetB 等的基础......名字、姓氏和所有 Person 共有的所有属性都可以是 Person 类的实例数据，然后可以通过让每个 Person 维护一个 CategoryAttributeSet 类型的数组来存储依赖于类别的属性，其中属性集对应于 Person 所属的每个 Category。

只是一个建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T16:59:19.593

在没有其他设计考虑的情况下，我将使用单个 Person 实体，具有类别的属性以及属性 a、b、c、d 和 e。

如果您想更进一步并要求不支持的属性为零，我会查看属性验证。实现`validateA:error:`根据对象的类别返回 YES 或 NO，依此类推。

# ios - popViewController 动画：YES 不动画

> ID：10637557
> 
> 赞同：0
> 
> 时间：2012-05-17T14:22:13.593
> 
> 标签：ios, animation, viewwillappear

我的视图中有一个下载按钮，当单击该按钮时，应用程序会打开应用程序商店，`[[UIApplication sharedApplication] openURL]` 但是当我切换回我的应用程序时，我发现`[popViewController animated:YES]`我的应用程序中没有动画。我调试了几天并解决了问题，原因是在我的`applicationWillEnterForeground`方法中，我这样做了：

```
[tabBarController.selectedViewController viewWillAppear:YES]; 
```

我有这个错误。我的问题是，为什么在我调用此方法后，我的一切都`[popViewController animated:YES]`不起作用......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:44:33.380

我不知道你为什么会有这个错误，但作为 Apple 文档，你**不应该**调用该`- (void)viewWillAppear:(BOOL)animated`方法。

[UIViewController 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

它是一种通知方法，可以被**覆盖**，并且永远不会被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:35:58.137

我没有很好地理解你的问题，但请注意弹出 viewncontroller 的正确方法是这样的：

[self.navigationController popViewControllerAnimated:YES];

幸运的

# sql - 将两个表连接在一起并将多行压缩为一行

> ID：10637559
> 
> 赞同：1
> 
> 时间：2012-05-17T14:22:19.260
> 
> 标签：sql, sql-server, join

我有两个表如下：

TableOne
- RawDataId int (pk)
- TimeStamp DateTime
- BuildingID int

TableTwo
- RawDataId int (pk/fk)
- MeterId int (pk)
- 实际值

MeterId 不是唯一的并且重复多次（但总是相同的数量）。两张表连接在一起没有问题。我可以选择前 15 行并按时间戳排序，为我提供每个仪表的最新值（总共 15 个，每个都有时间戳）。但是，我还需要从以前的时间（正好 1440 和 1439 分钟前）获取每个仪表的值 - 如果这有任何意义的话。

因此，在运行查询后，我需要一个包含 TableOne 和 TableTwo 列的表，但还有两个附加列用于 ValueB 和 ValueC（B 是 1440 分钟前的值，C 是 1439 分钟前的值）。我整天和昨晚的大部分时间都在和他玩耍，我正在慢慢失去这个情节。

任何帮助，将不胜感激。谢谢窥视。

- - 更新

我在下面包含了实际的表架构，以及一些示例数据。

```
CREATE TABLE [dbo].[TableOne](
[RawDataId] [bigint] IDENTITY(1,1) NOT NULL,
[TimeStamp] [datetime] NOT NULL,
[BuildingId] [int] NULL,
CONSTRAINT [TableOne_PK] PRIMARY KEY CLUSTERED 

CREATE TABLE [dbo].[TableTwo](
[MeterId] [bigint] NOT NULL,
[RawDataId] [bigint] NOT NULL,
[Value] [real] NULL,
 CONSTRAINT [TableTwo_PK] PRIMARY KEY CLUSTERED 
```

TableOne 中最后 30 条记录的示例数据：

```
RawDataId, TimeStamp, BuildingId
21677   2012-05-16 00:03:00.000 1
21678   2012-05-16 00:03:00.000 1
21679   2012-05-16 00:03:00.000 1
21680   2012-05-16 00:03:00.000 1
21681   2012-05-16 00:03:00.000 1
21682   2012-05-16 00:03:00.000 1
21683   2012-05-16 00:03:00.000 1
21684   2012-05-16 00:03:00.000 1
21685   2012-05-16 00:03:00.000 1
21686   2012-05-16 00:03:00.000 1
21687   2012-05-16 00:03:00.000 1
21688   2012-05-16 00:03:00.000 1
21689   2012-05-16 00:03:00.000 1
21690   2012-05-16 00:03:00.000 1
21691   2012-05-16 00:03:00.000 1
21662   2012-05-16 00:02:00.000 1
21663   2012-05-16 00:02:00.000 1
21664   2012-05-16 00:02:00.000 1
21665   2012-05-16 00:02:00.000 1
21666   2012-05-16 00:02:00.000 1
21667   2012-05-16 00:02:00.000 1
21668   2012-05-16 00:02:00.000 1
21669   2012-05-16 00:02:00.000 1
21670   2012-05-16 00:02:00.000 1
21671   2012-05-16 00:02:00.000 1
21672   2012-05-16 00:02:00.000 1
21673   2012-05-16 00:02:00.000 1
21674   2012-05-16 00:02:00.000 1
21675   2012-05-16 00:02:00.000 1
21676   2012-05-16 00:02:00.000 1 
```

表二示例：

```
MeterId, RawDataId, Value
15  21691   7722613
14  21690   908944
13  21689   4982947
12  21688   3821899
11  21687   6
10  21686   0
9   21685   0
8   21684   5761656
7   21683   4240048
6   21682   1541372
5   21681   283223
4   21680   1.298603E+07
3   21679   388137
2   21678   876121
1   21677   0
15  21676   7722615
14  21675   908944
13  21674   4982947
12  21673   3821899
11  21672   5
10  21671   0
9   21670   0
8   21669   5761656
7   21668   4240052
6   21667   1541372
5   21666   283223
4   21665   1.298604E+07
3   21664   388137
2   21663   876122
1   21662   0 
```

每 1 次将仪表读数写入表中（因此有时间戳）。When select the top 15 records (sorted by TimeStamp, to give me the latest values), I also need to get the values of that meter 1440 and 1439 minutes ago (relative to the latest TimeStamp). 我希望这能让它更清楚。

到目前为止，我的 SQL 查询如下所示：

```
SELECT TOP 15 * FROM (Select TableOne.[RawDataId], 
[TimeStamp], BuildingId, MeterId, `enter code here`Value 
FROM [TableOne]
INNER JOIN TableTwo ON
TableOne = TableTwo) as PS
ORDER BY [TimeStamp]; 
```

该查询为我提供了以下信息，但我需要另外两列，其值相对于时间戳记为 1440 分钟和 1439 分钟前：

```
RawDataId, TimeStamp, BuildingId, MeterId, Value
21677   2012-05-16 00:03:00.000 1   1   0
21678   2012-05-16 00:03:00.000 1   2   876121
21679   2012-05-16 00:03:00.000 1   3   388137
21680   2012-05-16 00:03:00.000 1   4   1.298603E+07
21681   2012-05-16 00:03:00.000 1   5   283223
21682   2012-05-16 00:03:00.000 1   6   1541372
21683   2012-05-16 00:03:00.000 1   7   4240048
21684   2012-05-16 00:03:00.000 1   8   5761656
21685   2012-05-16 00:03:00.000 1   9   0
21686   2012-05-16 00:03:00.000 1   10  0
21687   2012-05-16 00:03:00.000 1   11  6
21688   2012-05-16 00:03:00.000 1   12  3821899
21689   2012-05-16 00:03:00.000 1   13  4982947
21690   2012-05-16 00:03:00.000 1   14  908944
21691   2012-05-16 00:03:00.000 1   15  7722613 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:01:12.603

如果您总是要获得 1440 分钟和 1439 分钟之前的值，那么这样的事情可能会起作用：

```
SELECT TOP 15 
      TableOne.BuildingID
    , TableOne.RawDataID
    , TableOne.TimeStamp
    , TableTwo.MeterID
    , TableTwo.Value
    , TableTwo1439.Value AS ValueB
    , TableTwo1440.Value AS ValueC
FROM TableOne
JOIN TableTwo ON TableOne.RawDataID=TableTwo.RawDataID
JOIN TableTwo TableTwo1439 ON TableTwo.MeterID=TableTwo1439.MeterID
JOIN TableOne TableOne1439 ON TableTwo1439.RawDataID=TableOne1439.RawDataID AND TableOne.TimeStamp=DATEADD(MINUTE,-1439,TableOne1439.TimeStamp)
JOIN TableTwo TableTwo1440 ON TableTwo.MeterID=TableTwo1440.MeterID
JOIN TableOne TableOne1440 ON TableTwo1440.RawDataID=TableOne1440.RawDataID AND TableOne.TimeStamp=DATEADD(MINUTE,-1440,TableOne1440.TimeStamp)
ORDER BY TableOne.Timestamp DESC 
```

否则，您仍然可以使用相同的方法，但可能需要对其进行调整以使用 OUTER JOIN...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:56:43.847

如果没有看到数据（可能还有查询）样本，真的很难理解这个问题。如果我理解正确，这应该有效：

```
SELECT
(
SELECT TOP 1 Value
FROM TableOne t1 join TableTwo t2 ON t1.RawDataId = t2.RawDataId
WHERE t1.RawDataId IN (
SELECT RawDataId FROM TableTwo WHERE MeterId = tbl.MeterId
) and TimeStamp = DATEADD(mi, -1440, tbl.TimeStamp)
) as ValueB,
(
SELECT TOP 1 Value
FROM TableOne t1 join TableTwo t2 ON t1.RawDataId = t2.RawDataId
WHERE t1.RawDataId IN (
SELECT RawDataId FROM TableTwo WHERE MeterId = tbl.MeterId
) and TimeStamp = DATEADD(mi, -1439, tbl.TimeStamp)
) as ValueC
FROM TableTwo tbl 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T07:49:31.400

If you are using SQL Server 2005 or later version, you could try something like this:

```
WITH data AS (
  SELECT
    t1.RawDataId,
    t1.TimeStamp,
    t1.BuildingId,
    t2.MeterId,
    t2.Value,
    x.Diff AS TimeStampId
  FROM (SELECT BuildingId, MAX(TimeStamp) AS TimeStamp FROM TableOne GROUP BY BuildingId) t
    CROSS JOIN (SELECT 0 UNION ALL SELECT 1440 UNION ALL SELECT 1439) x (Diff)
    INNER JOIN TableOne t1 ON t.BuildingId = t1.BuildingId
                          AND t1.TimeStamp = DATEADD(MINUTE, -x.Diff, t.TimeStamp)
    INNER JOIN TableTwo t2 ON t2.RawDataId = t1.RawDataId
)
SELECT
  RawDataId,
  TimeStamp,
  BuildingId,
  MeterId,
  Value           = [0],
  Value1440MinAgo = [1440],
  Value1439MinAgo = [1439]
FROM data
PIVOT (
  MAX(Value) FOR TimeStampId IN ([0], [1440], [1439])
) p 
```

That is, I'm assuming here you want to account for various BuildingIds, since that column is present in your output. If you only want a specific one, you could rewrite the `t` subselect like this:

```
(SELECT TOP 1 * FROM TableOne WHERE BuildingId = @Id ORDER BY TimeStamp DESC) t 
```

# php - facebook graph API 给出的点赞数与 facebook 不同

> ID：10637562
> 
> 赞同：0
> 
> 时间：2012-05-17T14:22:32.263
> 
> 标签：php, facebook-graph-api

我正在尝试从 Graph API 获取照片的点赞数，但点赞总数与 facebook.com 本身显示的点赞总数不同

我正在访问的图片来自一个页面，我是该页面的管理员。获取访问令牌还包括“manage_pages”范围。

```
The number of likes from facebook.com is 2,755 
```

**

```
Accessing at the graph api using my access token
https://graph.facebook.com/10150710493857xxx/likes?limit=999999&access_token=...
The number likes is 2731 
```

**

```
Accessing at the graph api using the page's access token
https://graph.facebook.com/10150710493857xxx/likes?limit=999999&access_token=...
The number likes is also 2731 
```

**

```
And accessing at the graph api with no access token
https://graph.facebook.com/10150710493857xxx/likes?limit=999999
The number likes is  2734 
```

有没有办法让来自 facebook graph api 请求的点赞数与 facebook 页面指示的点赞数相同？

facebook graph api 查询中是否有任何错误？

# maven-2 - 多模块 maven-soapUI 项目问题

> ID：10637564
> 
> 赞同：1
> 
> 时间：2012-05-17T14:22:35.183
> 
> 标签：maven-2, soapui, multi-module

我正在使用soapUI maven 插件来创建一个多模块maven-soapUi 项目。我有几个子 maven 项目，每个项目都有自己的 project.xml 和 pom.xml 文件。当我单独运行每个子项目时，它工作正常。但是当我运行父项目时，它会在父根目录而不是子目录中查找 project.xml 文件，因此失败了，有没有解决方案？

子 POM

```
 <project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
   <modelVersion>4.0.0</modelVersion>

   <parent>
         <groupId>com.project</groupId>
         <artifactId>project-test</artifactId>
         <version>1.0-SNAPSHOT</version>
         <relativePath>../pom.xml</relativePath>
   </parent>

   <name>submodule SoapUI tests</name>
   <groupId>com.prject</groupId>
   <artifactId>project-submodule-test</artifactId>
   <version>1.0-SNAPSHOT</version>
   <packaging>jar</packaging>
   <description>Submodule SoapUI tests</description>    
   <pluginRepositories>   
        <pluginRepository>      
            <id>eviwarePluginRepository</id>      
            <url>http://www.eviware.com/repository/maven2/</url>   
        </pluginRepository>
   </pluginRepositories> 
   <build>
      <plugins> 
         <plugin>
            <groupId>eviware</groupId>
            <artifactId>maven-soapui-pro-plugin</artifactId>
            <version>4.5.0</version>
            <dependencies>
            <dependency>
                <groupId>com.microsoft.sqlserver</groupId>               
                <artifactId>sqljdbc4</artifactId>               
                <version>3.0</version>   
            </dependency>
          </dependencies>
        <executions>
               <execution>
                  <id>soapUI</id>
                  <goals>
                     <goal>test</goal> 
                  </goals>
                  <phase>test</phase>           
               </execution>
            </executions>                       
            <configuration>
               <projectFile>submodule.xml</projectFile>
               <outputFolder>Reports</outputFolder>
               <junitReport>true</junitReport>
               <printReport>false</printReport>
               <projectProperties/>
            </configuration>
         </plugin>   
      </plugins>
   </build>          
</project> 
```

父 POM

```
 <?xml version="1.0" encoding="UTF-8"?>
    <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <groupId>com.project</groupId>
    <artifactId>project-test</artifactId>
    <packaging>pom</packaging>
    <version>1.0-SNAPSHOT</version>
    <name>SoapUI tests</name>

    <modules>
            <module>submodule</module>
    </modules>
</project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:48:00.200

子 pom.xml 中的一个小改动解决了这个问题。

更改项目文件路径

```
<projectFile>submodule.xml</projectFile> 
```

到

```
<projectFile>{basedir}/submodule.xml</projectFile> 
```

如果有人来这里寻找类似的解决方案......

# android - Android 定位服务的默认精度是多少？

> ID：10637565
> 
> 赞同：0
> 
> 时间：2012-05-17T14:22:44.280
> 
> 标签：android, gps, location

如果我们不指定android中定位服务的精度，那么我们必须使用的默认值是多少？是否需要同时指定这两个权限？

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:30:01.077

如果您不指定准确性，您只会得到最好的。所以这取决于它使用的是 AGPS 还是 GPS，以及 GPS 是否有良好、可靠的修复。

# oracle - Oracle：多列“最接近匹配”自动完成策略

> ID：10637570
> 
> 赞同：1
> 
> 时间：2012-05-17T14:23:00.733
> 
> 标签：oracle, autocomplete

我正在实现一个自动完成功能，允许用户输入部分文本，然后将其与表中的 4 个不同列进行匹配。这是一个基本示例：

```
+------------+-----------+--------+-----------------+
| first_name | last_name | login  | email           |
+------------+-----------+--------+-----------------+
| John       | Smith     | jsmith | jsmith@foo.bar  |
| Johnny     | Ringo     | ringo  | ringer@hmm.okay |
| Bob        | Jones     | bjones | j1234@xyz.abc   |
| Jane       | Doe       | doej   | doedoe@blah.umm |
+------------+-----------+--------+-----------------+ 
```

当用户输入“jo”时，我想匹配该表中的记录，其中这四列中至少有一个与模式“jo%”匹配。对于此示例，由于其`first_name`列值，只有前两个会匹配。如果搜索是“js”，那么由于它的值`login`和`email`列值，只有第一条记录会匹配。等等。我还想返回按相似度排序的结果，其中第一个结果是“最接近的匹配”，依此类推（标准自动完成行为）。

我目前一直在尝试使用[`UTL_MATCH`](http://pbarut.blogspot.com/2006/12/utlmatch-string-similarity-in-oracle.html), 和产生以下查询的代码来解决这个问题：

```
SELECT first_name,
  last_name,
  login,
  email,
      (  utl_match.jaro_winkler_similarity(first_name, 'js')
       + utl_match.jaro_winkler_similarity(last_name, 'js')
       + utl_match.jaro_winkler_similarity(login, 'js')
       + utl_match.jaro_winkler_similarity(email, 'js')) similarity
FROM users
WHERE LOWER(first_name) LIKE LOWER('js%')
OR LOWER(last_name) LIKE LOWER('js%')
OR LOWER(login) LIKE LOWER('js%')
OR LOWER(email) LIKE LOWER('js%')
ORDER BY similarity DESC 
```

结果并不像我希望的那样准确，而且我已经看到野外的自动完成功能以我希望的方式工作，但不知道它们是如何在后面实现的-结尾。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T02:03:45.370

搜索总是很有趣。你已经开始了一个非常好的基本方法。我通常做的是创建一个通过触发器加载的辅助表。触发器从您的用户表中加载主键，第二列是“搜索”列。在您的示例中，每一行将产生 4 行。确保以大写形式存储结果，以便您可以索引列，Oracle 将使用该索引，因为您坚持使用类似的语法。它需要一个额外的表，但是可以通过触发器维护该表。

```
 create table searcher
    (
    user_id  number, --FK back to users
    search_column  varchar2(50) -- or whatever size column is appropriate
    );

    select u.first_name, u.last_name, u.login. u.email,
utl_match.jaro_winkler_similarity(search_column, 'js')
    from users u
    join
    searcher s
    on (u.user_id = s.user_id)
    where s.search_column like upper('js%')
    order by 5; 
```

# css - Bootstrap 脚手架：某行中的表一个在另一个之下

> ID：10637579
> 
> 赞同：0
> 
> 时间：2012-05-17T14:23:41.237
> 
> 标签：css, twitter-bootstrap

我正在尝试使引导脚手架工作。我有两个`table`s，一个左，一个右，都在 a 内`row`。请看[这个小提琴](http://jsfiddle.net/D2RLR/83/)。

由于某种原因，这些表格出现在另一个*之下*。我怎样才能让两张桌子处于相同的高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:38:16.687

你不需要`offset 8`与你的第二张桌子一起使用，那是 12。如果一张桌子是 a`span4`而另一张桌子是 a他们将与剩下的桌子`span4`并排坐...`span4`

每行占用 12 列，第一个表中有 4 个，表之间有 8 个，第二个表有 4 个 .. 制作 16 列，因此，两行 (16/12)

如果你使用`span4`加号`offset3 span4`，你会得到 11 列！完全在 12 列默认限制内:)

因此，如果您愿意，可以`offset2`在它们之间留出一些空间

[http://jsfiddle.net/D2RLR/84/](http://jsfiddle.net/D2RLR/84/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:33:22.447

菜鸟在这里回答，但我认为`<div class="span2">`如果您已经在使用`row`div 标签，则需要将两个表放在单独的标签中。

编辑：等等，开枪，弄错了。是不是最后有`diV`一个大写V的错字？

# asp.net - 使用sql查询公司的前五个请求

> ID：10637580
> 
> 赞同：0
> 
> 时间：2012-05-17T14:23:43.217
> 
> 标签：asp.net, sql, sql-server, sql-server-2008

我只需要从我的数据库中列出对公司的前五个请求。我有两个名为 Request 和 Company 的表。对于给定的公司，可能有任何数量的请求。但是，我只需要查询并列出数据库中所有公司的前 5 个请求。

```
select top 5 *
from Request as r 
    INNER JOIN Company c
    ON r.Company_id=c.Company_ID 
```

我已经完成了上述查询，但它只返回表中的前五个而不是所有成员的前五个。如何更正我的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:29:17.003

```
 With r 
    as
    (select  *, row_number() over(partition by Company_id order by RequestDate) as rown
    from Request as)
    Select *
from r join Company c on c.Company_id=r.Company_id
    Where rown<=5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:32:19.597

我*认为*您正在为您的公司表中存在的每家公司寻找前 5 个请求。在这种情况下，您可以`rank()`在子选择中按公司提出每个请求，然后选择排名在哪里`<= 5`：

```
select company_id, request_id
from
    ( select c.company_id, r.request_id, rank() over (partition by c.company_id order by request_id) as Rank
    from request r
    inner join company c on
        r.company_id = c.company_id
    ) ranked
where rank <= 5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T14:30:56.697

您需要按确定“第一”的字段排序。大概是这样的：

ORDER BY r.RequestDate

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T14:31:24.913

```
;WITH companyrecords 
     AS (SELECT Company.*, 
                Row_number() OVER (partition BY r.Company_id ORDER BY 
                r.Company_id 
                ASC) 
                   AS 
                RowNumber 
         FROM   Request AS r 
                INNER JOIN Company c 
                  ON r.Company_id = c.Company_ID) 
SELECT * 
FROM   companyrecords 
WHERE  RowNumber <= 5 
```

# mysql - MySQL日期格式DD/MM/YYYY选择查询？

> ID：10637581
> 
> 赞同：183
> 
> 时间：2012-05-17T14:23:45.353
> 
> 标签：mysql

我对如何按日期格式排序有点困惑。

对于格式`YYYY-MM-DD`，您可以这样做：`...ORDER BY date DESC...`

你会如何订购`DD/MM/YYYY`？

这不起作用：

```
SELECT * FROM $table ORDER BY DATE_FORMAT(Date, '%Y%m%d') DESC LIMIT 14 
```

* * *

## 回答 #1

> 赞同：232
> 
> 时间：2012-05-17T14:29:18.970

猜你可能只是想格式化输出日期？那么这就是你所追求的

```
SELECT *, DATE_FORMAT(date,'%d/%m/%Y') AS niceDate 
FROM table 
ORDER BY date DESC 
LIMIT 0,14 
```

还是您真的想按年前月前日排序？

* * *

## 回答 #2

> 赞同：175
> 
> 时间：2012-05-17T14:28:23.323

您可以使用[`STR_TO_DATE()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_str-to-date)将字符串转换为 MySQL 日期值和`ORDER BY`结果：

```
ORDER BY STR_TO_DATE(datestring, '%d/%m/%Y') 
```

但是，最好将列转换为`DATE`数据类型，而不是使用字符串。

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2012-05-17T14:28:36.913

```
SELECT DATE_FORMAT(somedate, "%d/%m/%Y") AS formatted_date
..........
ORDER BY formatted_date DESC 
```

* * *

## 回答 #4

> 赞同：41
> 
> 时间：2015-01-20T19:49:33.190

利用：

```
SELECT DATE_FORMAT(NAME_COLUMN, "%d/%l/%Y") AS 'NAME'
SELECT DATE_FORMAT(NAME_COLUMN, "%d/%l/%Y %H:%i:%s") AS 'NAME' 
```

参考：[https ://dev.mysql.com/doc/refman/5.7/en/date-and-time-functions.html](https://dev.mysql.com/doc/refman/5.7/en/date-and-time-functions.html)

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2019-10-11T06:47:50.503

```
SELECT DATE_FORMAT(COLUMN_NAME, "%d/%m/%Y %h:%i %p"); 
```

或者

```
SELECT DATE_FORMAT("2019-05-10 19:30:10", "%d/%m/%Y %h:%i %p"); 
```

> 输出为**2019 年 10 月 5 日下午 7:30**

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-10-06T09:26:51.097

就我而言，这有效

```
str_to_date(date, '%e/%m/%Y' ) 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2016-09-14T18:54:33.140

如果小时很重要，我使用`str_to_date(date, '%d/%m/%Y %T' )`，`%T`以格式显示小时`hh:mm:ss`。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2012-05-17T14:27:03.857

ORDER BY 日期类型不依赖于日期格式，日期格式仅用于显示，在数据库中，它们是相同的数据。

# c# - 有一个不允许自定义文本的自动完成组合框

> ID：10637582
> 
> 赞同：7
> 
> 时间：2012-05-17T14:23:45.280
> 
> 标签：c#, winforms

C# WinForms：我使用了具有以下属性的组合框： DropDownStyle：DropDown AutoCompleteSource：ListItems AutoCompleteMode：SuggestAppend

所以现在当我输入组合框时，它会从它的 items.Good 列表中建议项目。但问题是我不想输入我想要的任何内容，我只想能够从其列表中的有效项目中输入。我该如何修复这部分？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T14:29:19.960

您必须使用您的值（手动或通过数据绑定）填充**Items列表，然后将****DropDownStyle**设置为`DropDownList`.

组合框看起来不像文本框，但是当它有焦点时，输入它会自动从项目列表中选择最佳匹配。

（这是将组合框设置为不允许自定义文本的推荐方法。）

或者，如果您希望样式为 DropDown，请捕获`KeyPress`控件的事件，并快速检查控件的文本 plus `e.KeyChar`，如果在列表中找不到，请设置`e.Handled = True`。这将阻止所有会导致不在列表中的单词的按键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:34:31.237

它与自动完成不完全一样，但如果将 DropDownStyle 设置为 DropDownList，它将只允许 Items 集合中的条目。但是，此模式的默认行为是您键入的每个字母都会跳转到以该字母开头的第一个匹配项。因此，如果您想让他们在第一个字母之后继续输入其他字符，您可以将 AutoCompleteSource 设置为 ListItems ，然后将 AutoCompleteMode 设置为 Append 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-06T13:52:55.553

这与组合框中的字符串匹配。

```
int index = combobox1.FindString(combobox1.Text);
  if (index < 0)
  {
  MessageBox.Show("Invalid Record");
  combobox1.Focus();
  return;
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T14:38:19.890

其他选项可能是注册到`TextChanged`or`TextUpdated`事件，如果已经输入的文本不符合您的条件，请适当地更改它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T14:34:25.160

组合框控件不直接支持这一点。

您需要编写处理程序来验证列表中的项目是否已输入，如果没有则提示用户。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-17T04:39:53.420

您可以尝试在离开或清除选择时设置默认值。

```
private void comboBox1_Leave(object sender, EventArgs e)
{
       if (comboBox1.SelectedIndex == -1)
       {
            if (comboBox1.Items.Count > 0)
            {
                comboBox1.SelectedIndex = 0;
            }
            else
            {
                comboBox1.Text = "";
            }
        }
} 
```

# git - 如何对未签出的分支进行非快进 git 合并？

> ID：10637584
> 
> 赞同：11
> 
> 时间：2012-05-17T14:23:57.817
> 
> 标签：git

我在分支上`a`。我想将分支合并`b`到分支`c`中。合并不是快进，但也不需要手动解决。（即，这不是最简单的情况，但也不是最困难的情况，因此它是 Git 无需人工即可自行完成的合并。）

有没有办法让我在不检查任何分支的情况下进行这种`b`合并`c`？如何？

**更新：**如果您知道可以做到这一点的替代 Git 实现，那也是一个有效的解决方案。但是编写一个以编程方式执行结帐的脚本并不是一个好的解决方案，因为它仍然需要我有一个干净的工作目录。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T16:22:42.087

如果合并不涉及两个分支上涉及的文件，那么我认为您想要`git read-tree`并`git write-tree`带有边带 GIT_INDEX_FILE。这应该这样做：

```
#!/bin/sh
export GIT_INDEX_FILE=.git/aux-merge-index
trap 'rm -f '"'$GIT_INDEX_FILE'" 0 1 2 3 15
set -e
git read-tree -im `git merge-base $2 $1` $2 $1
git write-tree \
| xargs -i@ git commit-tree @ -p $2 -p $1 -m "Merge $1 into $2" \
| xargs git update-ref -m"Merge $1 into $2" refs/heads/$2 
```

您也可以使用`git mktree </dev/null`代替`merge-base`来将`b`和`c`视为完全不相关的分支，并使生成的合并合并每个中的文件，而不是将其中任何一个中丢失的文件视为删除。

你说你的合并不是快进，所以你需要阅读`read-tree`文档以使上面的序列完全符合你的要求。 `--aggressive`看起来可能是对的，这取决于您的分支之间的实际差异是什么。

**编辑**添加了空树基础来处理不相关的树 **编辑 2**提升我说过的一些有效负载或在评论中隐含

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-19T19:08:14.323

鉴于您不必清理工作目录的要求，我假设您的意思是您不想清理工作树或索引，即使通过一些脚本也是如此。在这种情况下，您将无法在当前本地存储库的范围内找到解决方案。Git 在合并时广泛使用索引。如果没有冲突，我不确定工作树，但总的来说，合并与当前签出的分支密不可分。

但是，还有另一种方法，它不需要您更改当前存储库中的任何内容。但是，它确实要求您拥有或创建您的 repo 的克隆。基本上，只需克隆您的存储库，然后在克隆中进行合并，然后将其推回原始存储库。这是它如何工作的一个简短示例。

首先，我们需要一个示例 repo 来使用。以下命令序列将创建一个。您最终将获得`master`当前分支和其他两个分支，其中的更改已准备好合并，命名为`change-foo`和`change-bar`.

```
mkdir background-merge-example
cd background-merge-example
git init
echo 'from master' > foo
echo 'from master' > bar
git add .
git commit -m "add foo and bar in master" 
git checkout -b change-foo
echo 'from foo branch' >> foo
git commit -am "update foo in foo branch"
git checkout -b change-bar master
echo 'from bar branch' >> bar
git commit -am "update bar in bar branch"
git checkout master 
```

现在，假设您正在研究`master`，并且想要合并`change-bar`到`change-foo`. 这是我们所处位置的半图形描述：

```
$ git log --oneline --graph --all
* c60fd41 update bar in bar branch
| * e007aff update foo in foo branch
|/  
* 77484e1 add foo and bar in master 
```

以下序列将在不干扰当前 master 分支的情况下完成合并。把它打包成一个脚本，你就有了一个不错的“背景合并”命令：

```
# clone with absolute instead of relative path, or the remote in the clone will
# be wrong
git clone file://`realpath .` tmp
cd tmp
# this checkout auto-creates a remote-tracking branch in newer versions of git
# older versions will have to do it manually
git checkout change-foo
# creating a tracking branch for the other remote branch is optional
# it just makes the commit message look nicer
git branch --track change-bar origin/change-bar
git merge change-bar
git push origin change-foo
cd ..
rm -rf tmp 
```

简而言之，这会将当前存储库克隆到子目录，进入该目录，进行合并，然后将其推送回原始存储库。完成后它会删除子目录。在大型项目中，您可能希望拥有一个保持最新状态的专用克隆，而不是每次都制作新的克隆。在合并和推送之后，我们最终得到：

```
$ git log --oneline --graph --all
*   24f1916 Merge branch 'change-bar' into change-foo
|\  
| * d7375ac update bar in bar branch
* | fed4757 update foo in foo branch
|/  
* 6880cd8 add foo and bar in master 
```

问题？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-12-20T21:24:08.563

`git read-tree`除了@jthill的非常复杂的答案之外，还有（现在）恕我直言，使用`git worktree`. 这是基本方法：

```
$ git worktree add /tmp/wt c
$ git -C /tmp/wt merge b
$ git worktree remove /tmp/wt 
```

下面是一个小*Bash*脚本，您可以像这样调用它：

```
$ worktree-merge c b 
```

### 脚本`worktree-merge`：

```
#!/usr/bin/env bash

log() {
    echo -n "LOG: "
    echo "$@" >&2
}

escape() {
    local string="$1"
    echo "${string//[. \/]/-}"
}

cleanup() {
    trap "" SIGINT
    log "Removing temporary worktree '$1' ..."
    git worktree remove --force "$1"
}

prepare_worktree() {
    local reference="$1"
    local worktree="/tmp/MERGE-INTO-`escape "$reference"`"

    log "Creating temporary worktree '$worktree' ..."
    trap "cleanup $worktree" EXIT
    git worktree add --force "$worktree" "$reference"
}

do_merge() {
    local reference="$1"
    local worktree="/tmp/MERGE-INTO-`escape "$reference"`"
    shift

    log "Merging ${@@Q} into ${reference@Q} ..."
    git -C "$worktree" merge "$@"
}

prepare_worktree "$1" &&
do_merge "$@" &&
true 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T17:25:25.580

即使您的工作目录很脏，您*也可以编写脚本。*您必须先存储您的更改。

```
git stash
git checkout c
git merge b
git checkout a
git stash pop 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-25T02:32:29.353

此[答案](https://stackoverflow.com/a/4157106/800917)解释了您可以尝试的解决方法。

> 不，那里没有。必须检查目标分支才能解决冲突等问题（如果 Git 无法自动合并它们）。
> 
> 但是，如果合并是快进的，您不需要检查目标分支，因为您实际上不需要合并任何东西 - 您所要做的就是更新分支以指向新的首席裁判。您可以使用 git branch -f 执行此操作：
> 
> `git branch -f branch-b branch-a`
> 将更新分支 b 以指向分支 a 的头部。

# java - 本机库 sqljdbc_auth.dll 已在另一个类加载器中加载

> ID：10637585
> 
> 赞同：24
> 
> 时间：2012-05-17T14:24:00.440
> 
> 标签：java, sql-server, tomcat, jdbc, windows-authentication

我有 2 个需要使用 Windows 集成身份验证连接到 SQL Server 数据库的 Java Web 应用程序。

加载的第一个工作正常，但第二个抛出异常：

```
Native Library sqljdbc_auth.dll already loaded in another classloader 
```

当我将 sqljdbc_auth.dll 放在其中一个文件夹中时，会发生上述错误：

*   C:\WINDOWS\system32\
*   C:\Program Files\Apache Software Foundation\Tomcat 7.0\bin\

如果我将 sqljdbc_auth.dll 放在以下文件夹之一中：

*   /WEB-INF/lib 每个 Web 应用程序的目录
*   C:\Program Files\Apache Software Foundation\Tomcat 7.0\lib\

两个应用程序都抛出异常：

```
Failed to load the sqljdbc_auth.dll cause :- no sqljdbc_auth in java.library.path 
```

我正在使用此代码加载驱动程序：

```
Class.forName("jdbc:sqlserver://<HOST>;databaseName=<DBNAME>;integratedSecurity=true;"); 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-17T23:54:06.073

每个 Web 应用程序都有自己的 Classloader（隔离它们）。当您调用 Class.forName() 方法时，有一个静态块正在尝试加载共享库（dll 文件）-因此您的两个 Web 应用程序都在尝试加载共享库，因此第二个时出现错误消息尝试加载。

您为 sqlserver 拥有的 JDBC jar 应该从与您的战争捆绑在一起移动到`tomcat 7.0/lib`文件夹并将 sqljdbc_auth.dll 复制到 tomcat/bin 文件夹 - 这样它将在 tomcat 父类加载器中，并且只会加载该类一次。

```
|----------------------------------|
| sqljdbc*.jar     --> tomcat*/lib |
|----------------------------------|
| sqljdbc_auth.dll --> tomcat*/bin |
|----------------------------------| 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:30:30.393

我认为你在正确的轨道上。

对于命令行启动，您可以通过设置环境变量轻松解决**java.library.path 中 no sqljdbc_auth问题**

```
CATALINA_OPTS=-Djava.library.path=/path/to/dll 
```

如果您将 tomcat 作为服务运行，请更改下的**Options**参数

`HKEY_LOCAL_MACHINE\SOFTWARE\Apache Software Foundation\Procrun 2.0\Tomcat7\Parameters\Java`

包括：

```
-Djava.library.path=/path/to/dll 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-24T06:16:23.523

Jasper Studio 中也会出现同样的错误。

可能不是最好的解决方案，但将 sqljdbc4.jar 放在 C:\Program Files (x86)\TIBCO\Jaspersoft Studio-6.1.0.final\features\jre.win32.win32.x86.feature_1.7.0.u80\jre\ lib\ext 和 C:\Program Files (x86)\TIBCO\Jaspersoft Studio-6.1.0.final\features\jre.win32.win32.x86.feature_1.7.0.u80\jre\bin 中的 sqljdbc_auth.dll

它会起作用。

# java - jsch session.connect() 问题

> ID：10637586
> 
> 赞同：3
> 
> 时间：2012-05-17T14:24:04.810
> 
> 标签：java, sftp, jsch

我是 Jsch 的新手，我正在尝试通过 sftp 连接到第三方。我可以通过 ssh 连接，所以我知道我有正确的用户、主机、端口和私钥文件，但是当我尝试通过 Jsch 连接时，我收到异常消息“Auth failed”，这几乎但不是很有帮助。这是我从在线示例中拼凑的代码：

```
String pvtkey = "{unixpath}/id_dsa";
ChannelSftp sftp = null;
JSch jsch = new JSch();
Session session = null;

try {
    jsch.setKnownHosts("{unixpath}/known_hosts");
    jsch.addIdentity(pvtkey);
    session = jsch.getSession(user, connectionURL, 22);
    Properties config = new Properties();
    config.put("StrictHostKeyChecking", "no");
    session.setConfig(config);
    session.connect();
    // ...some other code that never gets called
} catch (JSchException e) {
    log.info(e.getMessage());
    log.error(e.getCause());
} 
```

我添加了一些日志，所以我知道失败是在 session.connect() 中发生的。我已经抓住了用户和 connectionURL 并验证了它们是否被正确传递。pvtkey 和 known_hosts 的路径是我保存密钥和主机文件的完整 unix 路径，我已将其移动到包含启动此过程的脚本的目录。我对 sftp 还是有点陌生​​，我的公钥是否必须在同一个目录中，即使我没有将它添加到 Jsch 连接中？有什么方法可以获取有关我失败的更多信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T18:34:17.503

是的，如果您使用公钥身份验证，JSch 期望公钥文件与`.pub`您作为参数传递给[`addIdentity()`](http://epaul.github.com/jsch-documentation/simple.javadoc/com/jcraft/jsch/JSch.html#addIdentity%28java.lang.String%29). 或者，您可以使用[将两个文件名都作为参数的方法变体](http://epaul.github.com/jsch-documentation/simple.javadoc/com/jcraft/jsch/JSch.html#addIdentity%28java.lang.String,%20java.lang.String,%20byte%5B%5D%29)，或者将它们作为字节数组传递。

原因是在 SSH 公钥认证协议中，客户端首先向服务器发送一个可用公钥列表，服务器从中选择一个合适的——只有这样才需要私钥（并将被解密，如有必要）。虽然它（取决于算法和密钥表示）可能可以从私钥计算公钥，但 JSch 本身并不这样做，因此您必须提供两个密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:23:41.633

因为你正在使用

```
config.put("StrictHostKeyChecking", "no"); 
```

你不需要任何密钥文件。它禁用主机密钥检查。你能在执行程序后显示日志有什么吗？以便我们可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-18T09:17:48.960

> 为我使用下面的代码它的工作人员：`try { Properties config = new Properties(); config.put("StrictHostKeyChecking", "no"); config.put("PreferredAuthentications", "publickey,keyboard-interactive,password"); jsch.addIdentity(); System.out.println("identity added "); session = jsch.getSession(user, host, 22); // session.setPassword("123"); session.setConfig(config); session.connect(); Channel channel = session.openChannel("sftp"); channel.connect(); } catch (JSchException e) { e.printStackTrace();
> } catch (SftpException e) { e.printStackTrace(); }`

# crystal-reports - Crystal Reports：不同的标题行

> ID：10637590
> 
> 赞同：0
> 
> 时间：2012-05-17T14:24:13.230
> 
> 标签：crystal-reports

我有连接父表和详细表的数据源，因此每个详细记录的父数据都是重复的，如下所示：

```
ParentCol   DetailCol-1   DetailCol-2
    A           Orange          15
    A           Pinaple         10
    A           Grape            8
    B           Orange          10
    B           Grape            7 
```

我需要使用主报表在主报表上显示父列，并使用子报表将其与相同数据链接到使用“ParentCol”列的子报表。我会将相同的数据源传递给主报表和子报表，因为我不会进行两次查询，并且我们希望通过这个想法来提高性能。请注意，我不能使用分组来实现这一点。

* * *

第 1 页 - 主要报告

```
 ParentCol:  "A" 
```

* * *

子报表

```
 Orange        15
                  Pinaple       10
                  Grape          8 
```

* * *

* * *

第 2 页 - 主要报告

```
 ParentCol:  "B" 
```

* * *

子报表

```
 Orange        10
                  Grape          7 
```

* * *

我怎样才能做到这一点？

## 编辑：

@Ryan 是对的，问题是我试图在不同的信息上下文中使用相同的数据源。我当然可以仅使用主/详细模式来可视化所需的数据，并且主列不会重复，但会根据需要显示详细信息。

如果我使用与主报告中使用的数据相同的子报告，即使我使用子报告链接，我也可能会生成详细信息中显示的笛卡尔积。它行不通。

因此，我将避免对主报表和子报表使用相同的查询

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:47:14.363

右键单击您已经拍摄的水晶报表。

选择插入选项并选择子报表以插入子报表。

然后右键单击子报表并选择编辑子报表并使用您想要的字段绑定到子报表。

然后来到主报告。

再次右键单击子报表并选择更改子报表链接选项卡以在主报表字段和子报表字段之间建立关系。

现在点击预览。您将获得所需的输出。

# java - 计算十进制值的双邻居

> ID：10637594
> 
> 赞同：1
> 
> 时间：2012-05-17T14:24:27.897
> 
> 标签：java, floating-point, bigdecimal

编码：

```
import java.math.*; 

public class x
{
  public static void main(String[] args)
  {
    BigDecimal a = new BigDecimal(0.1);
    BigDecimal b = new BigDecimal(0.7);
    System.out.println(a);
    System.out.println(b);
  }
} 
```

输出：

`0.1000000000000000055511151231257827021181583404541015625` `0.6999999999999999555910790149937383830547332763671875`

这很好，因为它可以让我找到`double`最接近给定值的值。但是`0.1`对于价值大于实际价值和`0.7`价值小于实际价值。

如何获得任何十进制数的两个值（最接近的较大和最接近的较小）？

假设我从 开始`BigDecimal`，然后将其转换为 a ，然后再转换`double`回十进制。我会得到更大或更小的价值。我怎么能得到另一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:44:10.347

使用[nextAfter(double start, double direction)](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#nextAfter%28float,%20double%29)：

```
import java.math.*;

public class a
{
  public static void printNeighbours(BigDecimal start)
  {
    double result1 = start.doubleValue();
    double result2;

    BigDecimal r1 = new BigDecimal(result1);

    int com = start.compareTo(r1);

    if(com != 0)
      result2 = Math.nextAfter(result1, com * Double.MAX_VALUE);
    else
    {
      result2 = Math.nextAfter(result1, Double.MAX_VALUE);
      result1 = Math.nextAfter(result1, -Double.MAX_VALUE);
      r1 = new BigDecimal(result1);
    }

    BigDecimal r2 = new BigDecimal(result2);

    System.out.println("starting:\t"+start);

    if(com<0)
    {
      System.out.println("smaller:\t" + r2);        
      System.out.println("bigger:\t\t"+r1);
    }
    else
    {
      System.out.println("smaller:\t" + r1);        
      System.out.println("bigger:\t\t"+r2);
    }

    System.out.println();
  }

  public static void main(String[] args)
  {
    printNeighbours(new BigDecimal("0.25"));
    printNeighbours(new BigDecimal("0.1"));
    printNeighbours(new BigDecimal("0.7"));
  }
} 
```

打印：

```
starting:   0.25
smaller:    0.2499999999999999722444243843710864894092082977294921875
bigger:     0.250000000000000055511151231257827021181583404541015625

starting:   0.1
smaller:    0.09999999999999999167332731531132594682276248931884765625
bigger:     0.1000000000000000055511151231257827021181583404541015625

starting:   0.7
smaller:    0.6999999999999999555910790149937383830547332763671875
bigger:     0.70000000000000006661338147750939242541790008544921875 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:53:35.767

该[`Math.ulp(double)`](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#ulp%28double%29)方法可能对此有用，它返回类似于给定值的可能浮点精度：

> 返回参数的 ulp 的大小。双精度值的 ulp 是该浮点值与幅度下一个更大的双精度值之间的正距离。请注意，对于非 NaN x，ulp(-x) == ulp(x)。

这是一个例子：

```
System.out.println(new BigDecimal(0.1).subtract(new BigDecimal(Math.ulp(0.1))));
System.out.println(new BigDecimal(0.7).add(new BigDecimal(Math.ulp(0.7)))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T14:49:10.430

基于 Integer 或 String 创建 BigDecimal：

```
// String:
BigDecimal a = new BigDecimal("0.1");

// Integer
BigDecimal b = (new BigDecimal(7)).movePointLeft(1); 
```

它不会给你这样的结果。

# javascript - 防止回发按钮单击和多个客户端功能

> ID：10637596
> 
> 赞同：0
> 
> 时间：2012-05-17T14:24:27.883
> 
> 标签：javascript, jquery, asp.net, json, postback

我有一个 asp.net 按钮来更新数据库

```
<asp:Button ID="btnSave" runat="server" Text="SaveChanges" OnClick="btnSave_Click"
        CssClass="saveButton" ValidationGroup="answer" OnClientClick="return ValidateUserNameBeforeSubmitting();" />

<script type="text/javascript">
    $(document).ready(function () {
        $("#<%=TextUserName.ClientID%>").blur(function () {
            ValidateUserNameAfterBlur();
        });
    });

    function ValidateUserName() {
        var returnValue;
        $.ajax({ type: "POST",
            url: "../UserNameWebService.asmx/ValidateUserName",
            data: JSON.stringify({ strUsername: $("#<%=TextUserName.ClientID%>").val() }), 
            contentType: "application/json; charset=utf-8",
            dataType: "json",

            async: false,
            success: function (data) {
                returnValue=data.d;
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert(xhr.status);
                alert(thrownError);
            }
        });
        return returnValue;
    }
    // to prevent postback when click save button. 
    function ValidateUserNameBeforeSubmitting() {
        var isValid = ValidateUserName();
        return isValid;
    }

    function ValidateUserNameAfterBlur() {
        var isValid = ValidateUserName();
        $('#TextUserNameError').toggle(!isValid);
    }
</script> 
```

该功能是验证用户名的文本框。但我有几个文本框需要验证。每一个都会显示不同的错误。我可以在按钮上进行多个客户端调用吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:27:29.297

当然，您可以拥有多个客户端功能：

```
$("#<%=TextUserName.ClientID%>").blur(function () {
    ValidateUserNameAfterBlur();
    ValidatePasswordAfterBlur();
    ValidateFoo();
    PhoneYourWife();
    ...
}); 
```

* * *

如果您只想在它们都有效时提交：

```
$("#<%=btnSave.ClientID%>").click(function () {
    if (ValidateUserNameAfterBlur() &&
        ValidatePasswordAfterBlur() &&
        ValidateFoo()               &&
        PhoneYourWife())

    submitTheData();
}); 
```

# ruby - Ruby 没有 isalpha 吗？

> ID：10637606
> 
> 赞同：15
> 
> 时间：2012-05-17T14:25:13.563
> 
> 标签：ruby

像 Python 一样？我正在尝试检查字符串中的每个字符是否是字母数字？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-17T14:30:16.520

为此有一个特殊的字符类：

```
char.match(/^[[:alpha:]]$/) 
```

那应该匹配单个字母字符。它似乎也适用于 UTF-8。

要测试整个字符串：

```
string.match(/^[[:alpha:]]+$/) 
```

请记住，这不包括空格或标点符号。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-17T14:32:35.723

您可以自己滚动 :)如果您只想匹配字母而不匹配数字，请`alnum`替换为。`alpha`

```
class String
  def alpha?
    !!match(/^[[:alnum:]]+$/)
  end
end

'asdf234'.alpha? # => true
'asdf@#$'.alpha? # => false 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-17T15:11:11.620

python 函数仅适用于 ASCII 字符；[[:alnum]] 正则表达式会做“tëst”.alpha 之类的事情吗？=> 真的。 `match/\w/`匹配下划线，所以留下

```
def isalpha(str)
  return false if str.empty?
  !str.match(/[^A-Za-z]/)
end 
```

重现 Python 行为。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-03-16T18:28:36.883

如果您无法记住正则表达式（像我一样！），这是一种无需正则表达式的方法：

```
def alpha?(char)
  char.upcase != char.downcase
end 
```

对于除字母之外的任何其他字符，`#upcase`并且`#downcase`工作但没有效果，因此我们可以断言 char 的大写和小写值不相等来确定它是一个字母。

# java - 为什么在构造函数中调用具有接口作为参数的类时出现“找不到源”错误？

> ID：10637607
> 
> 赞同：1
> 
> 时间：2012-05-17T14:25:18.100
> 
> 标签：java, eclipse, debugging, interface, constructor

我正在尝试使用接口创建一些字符串排序方法。Application 驱动程序类调用主 SimplePriorityQueue 对象类，但它在进行此调用时传入一个实现接口的类作为参数。有几个实现接口的类（一个按长度比较，一个按字母顺序（按值），一个按反向长度等），这就是为什么我被告知 SimplePriorityQueue 类中的一个构造函数应该能够处理所有这些的原因。

使用 Eclipse 调试器时，只要 Application 类执行 pq = new SimplePriorityQueue(new StringByLength()); 就会弹出“找不到源”错误。如代码注释中所示。

这是我所拥有的：

* * *

```
//the Interface
package cs15200.review.srijitag;

public interface Comparator {
    public int compare(Object o1, Object o2);

} 
```

* * *

这是排序类之一。还有几个，但几乎都是这样的

```
//StringByLength class, which sorts by length
package example.cs151xx;

import java.util.Comparator;

public class StringByLength implements Comparator {

  public int compare(Object o1, Object o2)
  {
    String s1 = (String)o1;
    String s2 = (String)o2;
    return s2.length() - s1.length();
  }

  public boolean equals(Object o)
  {return (o instanceof StringByLength);}
} 
```

* * *

```
//the relevant portion of the Application class

import example.cs151xx.Prompt;
import cs15200.review.srijitag.SimplePriorityQueue;

import example.cs151xx.StringByLength;
import cs15200.review.srijitag.StringByLengthReverse;
import cs15200.review.srijitag.StringByValue;
import cs15200.review.srijitag.StringByValueIgnoreCase;
import cs15200.review.srijitag.IntegerIncreasing;

import java.util.Comparator;

public class Application {

  ////////////////
  //Driver Program
  ////////////////

    public static void main(String[] args)
    {
    //Construct object to test; let the user specify what Comparator
    //  object to construct to order the priority queue

      SimplePriorityQueue pq;
      char howPrioritize = Prompt.forChar("Enter how to prioritize queue\n  v (by value)\n  i (value ignore case)\n  l (by length)\n  r (by reverse length)\n\nChoice","virl");
      if (howPrioritize == 'v')
        pq = new SimplePriorityQueue(new StringByValue());
      else if (howPrioritize == 'i')
        pq = new SimplePriorityQueue(new StringByValueIgnoreCase());
      else if (howPrioritize == 'l')
        pq = new SimplePriorityQueue(new StringByLength()); //ERROR THROWN
      else
        pq = new SimplePriorityQueue(new StringByLengthReverse());

[...more code to finish up rest of driver class] 
```

* * *

```
//The relevant parts SimplePriorityQueue class which has the constructors, accessors, and methods

package cs15200.review.srijitag;

import example.cs151xx.StringByLength;
import java.util.Comparator;

public class SimplePriorityQueue{
    public SimplePriorityQueue(Comparator whatever){
        check = whatever;
    }

    public void enqueue(Object item){

        if(list.length==rear+1)
            doubleSize();
        if (rear==-1)
            list[0]=item;
        else{
            for(int i=rear;i>=0;i--){
                int z = check.compare(item,list[i]);
                if(z<=0){
                    list[i+1]=list[i];
                    list[i]=item;                       }
                else{
                    list[i+1]=item;
                }
            }
        }
        rear++;
    }

[...more accessors and mutators]

          //instance variables
    private Object[] list=new Object[1];
    private int rear=-1;
    private Comparator check;

} 
```

* * *

我知道这种基本格式（将实现接口的对象作为参数传入，并将该接口类型的对象用作参数）应该可以工作，因为我成功地尝试了以下简单示例：

```
package  cs15200.review.srijitag;
import example.cs151xx.StringByLength;
import java.util.Comparator;

public class temp {

    public static void main(String[] args) {
        Comparator z = new StringByLength();
        System.out.println( z.compare("hi", "what's up"));
        Comparator y = new StringByValue();
        System.out.println(y.compare("hi", "what's up"));

        System.out.println( lookee(new StringByLength())); //should return the same result as z.compare(...)
        System.out.println(lookee(new StringByValue())); //should return the same result as y.compare(...)
    }

    public static int lookee(Comparator test){
        return test.compare("hi", "what's up");

    }
} 
```

* * *

那么我在 SimplePriorityQueue 类的构造函数中做错了什么？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:27:46.570

您实现`java.util.Comparator`而不是在调试时找不到`cs15200.review.srijitag.Comparator`哪个源。`java.util.Comparator`

# ios - CoreData 跨模型访问对象

> ID：10637608
> 
> 赞同：2
> 
> 时间：2012-05-17T14:25:18.073
> 
> 标签：ios, core-data

目前，我有两个核心数据模型，模型 A 和模型 B。

模型 A 需要来自模型 B 的值。（模型 A -> Entity1 -> valueFromModelB）

目前，我正在执行一个获取请求并在模型 A 的 NSObject 子类中进行过滤。但是，这似乎不是很有效，因为我需要经常更新这个值。

实现这一目标的最佳方法是什么？合并模型 A 和模型 B 中的实体并在两者之间建立关系会更好吗？理想情况下，我希望将它们分开，但如果合并更容易、更有效，那么我可能会走那条路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:53:53.170

From your question, was not sure if you have already looked at the option of prefetching to save some over-head. According to Core Data Documentation, here is a code snippet for prefetching.

```
NSManagedObjectContext *context = /* get the context */;
NSEntityDescription *employeeEntity = [NSEntityDescription
entityForName:@"Employee" inManagedObjectContext:context];
NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:employeeEntity];
[request setRelationshipKeyPathsForPrefetching:
[NSArray arrayWithObject:@"department"]]; 
```

The code fetches employee and department information, but what I was not sure was if Department is in a different data model, can it be put to use using something like a NSPersistentStoreCoordinator.

One other note from Apple's Core Data preformance recommendation is

> Each round trip to the persistent store (each fetch) incurs an overhead, both in accessing the store and in merging the returned objects into the persistence stack. You should avoid executing multiple requests if you can instead combine them into a single request that will return all the objects you require. You can also minimize the number of objects you have in memory.

So if ideally if you can merge two different Core Data models, that is going to save memory and round-trips to fetch data.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-17T14:41:10.210

在同一个数据模型中创建不同的实体并创建实体之间的关系。那会更快更容易。:)

# c# - System.Reflection.Emit 中的缓慢类型创建

> ID：10637609
> 
> 赞同：2
> 
> 时间：2012-05-17T14:25:19.037
> 
> 标签：c#, .net, .net-2.0, system.reflection

我正在开发一个需要大量使用 System.Reflection.Emit 来发出源代码的编译版本的项目，但是，当我发出整个东西时，我注意到速度很慢（我只发出了一部分用于测试）。也就是说，为 946 种类型调用“TypeBuilder.CreateType()”方法需要超过 75 秒，我会将其部分归结为我发出的大量数据，它是一个 3.01mb 的 dll，在反编译时会扩展为一个 60mb 的文件与 ILDasm。

现在，这个数据的其余发射过程总共只需要大约 40 秒，（这 40 秒包括发射相当多的调试数据）所以我想知道为什么这个单独的方法需要这么多时间。有人知道吗？有什么方法可以减少这个时间吗？

# javascript - jQuery下拉菜单反复

> ID：10637610
> 
> 赞同：1
> 
> 时间：2012-05-17T14:25:19.957
> 
> 标签：javascript, jquery, html

我用 jQuery 制作了一个小的下拉菜单，并在 mouseover/mouseout 事件上绑定了“显示”和“隐藏”动画。问题是，当我将鼠标悬停在下拉菜单中的菜单列表项上时，会触发事件并且我的菜单会消失！

我也尝试过`stopPropagation()`，但也失败了：

```
$('nav>div.dropTrigger').mouseover(function(e)
{
    console.log("enter");
    $(this).find('div').stop(true,true).animate({ opacity: 'show', height: 'show' },"fast");        
}); 

$('nav>div.dropTrigger').mouseout(function(e)
{   
    console.log("out");
    $(this).find('div').stop(true,true).animate({ opacity: 'hide', height: 'hide' },"fast");        
});

$('.dropdown').mouseover(function(e)
{
    e.stopPropagation();
});

$('.dropdown').mouseout(function(e)
{
    e.stopPropagation();
}); 
```

我的标记：

```
<nav>
   <div class="dropTrigger">
      <a href="potatoes">some menu</a>
       <div class="dropdown">
          <ul>[drop menu goes here]
       </div>
 ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:28:30.257

尝试这个：

```
$('nav>div.dropTrigger').mouseover(function(e)
{
console.log("enter");
$(this).find('div:hidden').stop(true,true).animate({ opacity: 'show', height: 'show'         },"fast");        
}); 

$('nav>div.dropTrigger').mouseout(function(e)
{   
console.log("out");
$(this).find('div:visible').stop(true,true).animate({ opacity: 'hide', height: 'hide'   },"fast");        
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:28:37.770

使用 mouseenter/mouseleave 代替 mouseover/mouseout

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T14:31:49.780

```
$('nav>div.dropTrigger').on({
            mouseenter : function(){ 
                 console.log("enter");
                 $(this).find('div').stop(true,true).animate({ opacity: 'show', height: 'show' },"fast");
            },
            mouseleave : function(){ 
                console.log("out");
                $(this).find('div').stop(true,true).animate({ opacity: 'hide', height: 'hide' },"fast"); 
            }
        }); 
```

而是将事件绑定到 mouseenter 和 mouseleave。它们是处理您描述的问题的“神奇”jquery 事件。另外 - 现在首选的绑定方法是 via `$.on()`（从 jq 1.7 开始）

# android - Android模拟器无法连接互联网

> ID：10637611
> 
> 赞同：1
> 
> 时间：2012-05-17T14:25:26.743
> 
> 标签：android, emulation

我已在 android 中将最新的 SDK 更新到 4.0 并安装 ADT 插件 18.0.0。但安装后无法连接互联网。我需要设置其他东西。即使我重新启动了我的 adb，也创建了新的 AVD 和其他一些。但我不明白这是什么问题。请帮助我

# c# - 如何遍历 GroupBox 中的 10 个 TextBox？

> ID：10637615
> 
> 赞同：0
> 
> 时间：2012-05-17T14:25:38.540
> 
> 标签：c#, textbox, tabs, controls, groupbox

我在一个 GroupBox 中有 10 个 TextBox，在一个 Tab 控件中。如何在所有文本框上实现剪切、复制和粘贴而不单独访问每个文本框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:39:39.977

只需使用阻止或替换剪切、复制、粘贴命令的自定义文本框：

```
public class MyTextBox : TextBox
{
    private const int WM_CUT   = 0x0300;
    private const int WM_COPY  = 0x0301;
    private const int WM_PASTE = 0x0302;

    protected override void WndProc(ref Message m)
    {
        switch(m.Msg)
        {
            case WM_CUT:
                // Handle Cut
                return;

            case WM_COPY:  
                // handle copy 
                return;

            case WM_PASTE:
                // handle paste
                return;
        }

        base.WndProc(ref m);
    }
} 
```

# java - 如何从设备获取最后一条短信？

> ID：10637619
> 
> 赞同：1
> 
> 时间：2012-05-17T14:25:52.283
> 
> 标签：java, android

我一直在开发必须识别 SMS 命令的应用程序。所以，我需要知道如何才能获得最后的短信。我知道我需要使用 BroadcastReceiver（并且我使用它），但我不知道如何才能获得此类中的最后一条短信。请帮帮我，我希望你能做到。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:49:59.880

感谢博提供我博客的链接。

要从您的嵌入式 android 数据库 (sqlite) 中获取最后一条消息，您首先需要创建一个游标实例。

```
Cursor cursor = context.getContentResolver().query("content://sms", null, null, null, null); 
```

然后移动到第一个短信（第一个是最后一个接收者;））

```
cursor.moveToFirst(); 
```

看看我的博客，我是如何按照 Bo 告诉你的 ;)

// 删除链接

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:58:21.773

请参阅下面的代码，它可能会对您有所帮助。

```
 Uri myMessage = Uri.parse("content://sms/");

                    ContentResolver cr = con.getContentResolver();
                    Cursor c = cr.query(myMessage, new String[] { "_id",
                            "address", "date", "body", "read" }, null,
                            null, null);

                    startManagingCursor(c);
                    Main_calss.getSmsLogs(c, con); 
```

* * *

```
public static final ArrayList<String> sms_num = new ArrayList<String>();
public static final ArrayList<String> sms_body = new ArrayList<String>();

public static void getSmsLogs(Cursor c, Context con) {

    if (sms_num.size() > 0) {
        sms_num.clear();
        sms_body.clear();
    }

    try {

        if (c.moveToFirst()) {
            do {
                Log.d("error",
                        ""
                                + c.getString(c
                                        .getColumnIndexOrThrow("address")));
                if (c.getString(c.getColumnIndexOrThrow("address")) == null) {
                    c.moveToNext();
                    continue;
                }

                String Number = c.getString(
                        c.getColumnIndexOrThrow("address")).toString();
                String Body = c.getString(c.getColumnIndexOrThrow("body"))
                        .toString();

                sms_num.add(Number);

                sms_body.add(Body);
            } while (c.moveToNext());
        }
        c.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

现在得到最后一次按摩你必须这样做。

```
sms_num.get(sms_num.size()-1);
sms_body.get(sms_num.size()-1); 
```

如果它是正确的，那么让它正确。

# java - java中的雅虎财务API

> ID：10637620
> 
> 赞同：0
> 
> 时间：2012-05-17T14:25:53.077
> 
> 标签：java, jsf, jakarta-ee, yahoo-api, yahoo-finance

我必须从 yahoo Finance api 获取股票报价 n 在我的应用程序中使用它我是否需要包含任何 jar 才能使用 yahoo Finance api？我提到

[http://developer.yahoo.com/forum/General-Discussion-at-YDN/Re-Using-Yahoo-Finance-API-Not/1250246255000-0b82f8f0-7f48-3af2-8fe2-e73a138cbfaa](http://developer.yahoo.com/forum/General-Discussion-at-YDN/Re-Using-Yahoo-Finance-API-Not/1250246255000-0b82f8f0-7f48-3af2-8fe2-e73a138cbfaa)

它有一个代码来获取股票报价，但它没有使用 api...

我还提到了以下网站，如

[https://stackoverflow.com/questions/10635616/how-to-use-yahoo-finance-api-in-java#comment13787113_10635616](https://stackoverflow.com/questions/10635616/how-to-use-yahoo-finance-api-in-java#comment13787113_10635616)

但我想在编码方面抢占先机……我需要在我的 java 应用程序中包含这个 api 的任何 jar 吗？通过参考上述网站，我知道引号出现在 excel 表中，那么如何通过代码将 excel 表存储在特定位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:46:20.453

您是否阅读了该链接上的代码？

从您提供的链接：

```
url = new URL("http://finance.yahoo.com/d/quotes.csv?s=RHT+MSFT&f=sb2b3jk"); 
```

页面本身的代码提供了解决方案。

不，您不需要添加任何外部 jar 来使用它。

存储文件的代码也在同一个链接中提到。

# ms-access - 与 OLE 服务器或 ActiveX 控件通信

> ID：10637622
> 
> 赞同：13
> 
> 时间：2012-05-17T14:25:56.857
> 
> 标签：ms-access, activex, ole

*MS Access 2010，Win 7 以常规形式显示*
我没有故意放置任何 ActiveX 或 OLE 东西.. 甚至不确定它们是什么。但无论如何，每当我在特定表单的代码中输入内容时，它都会
**显示“您作为事件属性设置输入的表达式 XXXXX 产生了以下错误：MyDB 与 OLE 服务器或 Active X 控件通信时出现问题**

嗯？无论我在表单的代码中输入什么，都会发生这种情况。我有一个空的 Form_Current() ONLY，它仍然跳闸。表单中有很多格式和工作，我宁愿不废弃它。如果我将代码窗口完全留空（只有选项比较数据库），它不会出错；但是我的表格没用。

我已经看到这是一个语言问题，但我的其他形式（运行相同的代码技术和大部分相同的代码）很好，它是带有英语 PC 的英语 Access。想法？

代码设置错误：

```
Private Sub Form_Current()
End Sub 
```

严重地。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2015-03-30T20:12:49.587

我遇到了同样的问题，我尝试了很多事情，唯一（也是最快的）有效的解决方案是执行以下操作：1）关闭导致错误的表单。2) 重命名此表单。3）复制它：复制，然后粘贴，系统会提示您为新表单设置名称。给它原来的名字。4) 删除导致错误的原始表单。5）打开粘贴的表格，它可以正常工作。该解决方案适用于我的数据库...问候...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T14:31:01.860

检查缺少的参考。进行备份、反编译、压缩和修复，如果不起作用，请将所有内容复制到新数据库 ( [http://www.granite.ab.ca/access/corruptmdbs.htm](http://www.granite.ab.ca/access/corruptmdbs.htm) ) 您可能需要跳过复制问题形式。有时值得创建一个新表单，从旧表单中选择所有控件并粘贴到新表单中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-20T02:54:21.967

你可以更改语言设置试试，步骤如下： 1、打开窗口命令，运行“intl.cpl” 2、选择管理项，更改系统区域设置。

希望能帮到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-23T06:35:35.670

我已经多次遇到这个问题。错误声明很可怕，因为它基本上没有提供有用的信息。我发现 Abu Hassan 的解决方案通常效果最好（复制表格并删除原始表格），但有一次对我不起作用，我不得不删除我最近添加的导入语句：

```
imports system.collections 
```

一旦我删除了该导入语句，一切都会再次起作用。因此，如果复制表单不起作用，请尝试撤消您最近所做的事情。它可能是这个 import 声明或类似的声明。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-17T12:45:42.410

非常奇怪的错误，有时也会出现在我的数据库中。它似乎主要在 UNBOUND FORMS 上出错（未绑定的表单没有 RECORDSOURCE）。我最近做的是：

1.  临时将“一些”表（例如，只有一条记录的配置表）定义为 RecordSource，
2.  编译程序（请注意，这通常没问题，甚至在修复之前！）
3.  保存表格。
4.  打开表格。现在应该可以正常工作了！
5.  删除 RecordSource，重新编译并再次保存。
6.  大多数时候，我的表格在那之后又可以正常工作了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-26T11:19:39.780

根据我的经验，由于您在 VBA 语句中使用本地语言，因此您必须将本地语言调整为系统语言，从控制平庸>>语言或区域>>管理>>更改系统本地，然后选择本地语言

或者在 vba 中找到这个词不是英文的，然后用英文重新输入

# java - 变量可能尚未初始化？

> ID：10637623
> 
> 赞同：1
> 
> 时间：2012-05-17T14:26:05.590
> 
> 标签：java, string, types, methods

我有以下转换程序的代码：

```
private void convertButtonActionPerformed(java.awt.event.ActionEvent evt) {

    int type, value;
    double conversion;
    String output;

    type = Integer.parseInt(conversionchoiceInput.getText());
    value = Integer.parseInt(valueInput.getText());

    if (type == 1)
    {
    conversion = inchesToCentimetres(value);
    output = value + " inches = " + Math.round(conversion) + " centimetres";
    }
    else if (type == 2)
    {

    }
    else if (type == 3)
    {

    }
    else if (type == 4)
    {

    }
    outputLabel.setText(output); 
} 
```

当我已经拥有时，它说“变量输出可能尚未启动”？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T14:28:33.903

问题是`output`无论程序采用何种执行路径都需要初始化。它仅在`if`路径中初始化。因此，您需要在开头（空字符串或其他内容）给它一个默认值或在所有分支中设置它。

```
String output = ""; 
```

或者

```
if (type == 1)
{
    conversion = inchesToCentimetres(value);
    output = value + " inches = " + Math.round(conversion) + " centimetres";
}
else if (type == 2)
{
    output = "";
}
else if (type == 3)
{
    output = "";
}
else if (type == 4)
{
    output = "";
} 
```

当然，第一个选项是最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:29:33.250

如果 type != 1，则输出未初始化。即使你在每个 if 分支 (1, 2, 3, 4) 中给输出一个值，输出也可能没有被初始化，好像 type < 1 或 > 4 它仍然没有值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T14:31:06.943

您刚刚在那里声明了与初始化不同的变量。

# iphone - 如何更改第一个加载视图

> ID：10637636
> 
> 赞同：0
> 
> 时间：2012-05-17T14:26:58.833
> 
> 标签：iphone, objective-c, ios, xcode

我在 didFinishLaunching 上获得了此代码，但我不知道如何自定义它以从打开应用程序时打开 menuViewController。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:    (NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
// Override point for customization after application launch.
self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];

self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible];
// At the end of applicationDidFinishLaunching, right before 
// the return YES
[[GCTurnBasedMatchHelper sharedInstance] authenticateLocalUser];
return YES;
} 
```

希望有人可以帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:31:54.043

更改以下行

```
self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease]; 
```

到

```
self.viewController = [[[menuViewController alloc] initWithNibName:@"menuViewController" bundle:nil] autorelease]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:34:42.760

您需要更改的行是

```
self.window.rootViewController = self.viewController; 
```

到

```
MenuViewController *menuViewController = [[[MenuViewController alloc] init] autorelease];
self.window.rootViewController = menuViewController; 
```

这是假设您有一个名为 MenuViewController 的自定义视图控制器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T14:34:46.353

创建`menuViewController`将此控制器分配给的对象`rootViewController`。

```
self.viewController = [[[MenuViewController alloc] initWithNibName:@"menuViewController" bundle:nil] autorelease];  

self.window.rootViewController = self.viewController; 
[self.window makeKeyAndVisible]; 
```

# python - 通过 Google App Engine 创建 KhanAcademy 克隆 - app.yaml 中的应用程序名称存在问题

> ID：10637637
> 
> 赞同：2
> 
> 时间：2012-05-17T14:27:01.063
> 
> 标签：python, google-app-engine, clone

我正在尝试在 Google App Engine (GAE) 上创建 KhanAcademy (KA) 克隆。我下载了适用于 Mac 的离线版 KA (http://code.google.com/p/khanacademy/downloads/list)，并使用 GoogleAppEngineLauncher (https://developers.google.com/appengine/) 进行了设置。因为 KA 是在 Python 2.5 上生成的，所以我在 KA 离线版本下载中包含通过 Python 2.5 运行的设置，并且我在应用程序中添加了这些额外的标志（基本上复制了包含的运行文件的功能）：

--datastore_path=/Users/Tadas/KhanAcademy/code/datastore --use_sqlite

照原样，GAELauncher 能够在本地主机上启动并完美运行。但是，要在我的 Google apppot 域上安装它，我需要在 app.yaml 中更改应用程序名称。当我将 app.yaml 中的“应用程序：khan-academy”更改为新名称并尝试通过 GAELauncher（或包含的运行文件）运行本地版本时，该站点出现但所有内容（练习等）都有消失了（基本上，该网站失去了大部分功能）。如果我尝试在这种状态下“部署”应用程序，当我尝试访问 apppot 网站时会收到 500 服务器错误。关于可能出现什么问题的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:45:39.560

问题是您的“克隆”应用程序无权访问可汗学院的 AppEngine 数据存储区，因此没有可显示的内容。即使您确实为他们的应用程序使用了所有代码，您仍然必须生成您自己的所有内容。

即使您也打算“克隆”他们的内容，您也将不得不做很多可能的手动工作才能将其放入应用程序的数据存储中。

# jquery - Jquery附加对象乘法问题

> ID：10637639
> 
> 赞同：0
> 
> 时间：2012-05-17T14:27:08.070
> 
> 标签：jquery, appendto

我正在开发一个允许用户从对象生成对象的系统。类似于Win7的便签系统；便笺可以制作新的便笺，并自行删除。我正在尝试使用 jquery 来实现这一点，但是当我尝试添加新对象时存在重复问题。

在 jquery 中，我告诉代码创建第二个“对象”，它是一个变量，用于保存包含添加和删除按钮的对象的 html。如果您查看html页面，则更有意义。当我告诉 jquery 制作对象时，它做得很完美。除了它制造的物体没有制造更多的物体！jquery 由于某种原因无法识别它刚刚创建的新对象的存在。作为一种解决方案，我尝试重述 .click() 函数来监听用户单击添加或删除按钮。这只会使每当我添加一个新对象时它的数量就会增加，而这整个过程中删除按钮都没有正常工作。

有人可以修复我的代码吗？

```
<html>
    <head>
        <style type="text/css">
            .environment {height:500px; width:500px; border:1px solid black;background:lightyellow;text-align:center;overflow:auto;}
            .object {height:50px; width:40%;border:1px solid black;background:#F0F0F0;padding:5px;margin:5px;float:left;}
            .delObject {float:right;}
        </style>
        <script type="text/javascript" src="jquery-1.7.2.js"></script>
        <script type="text/javascript">
            var object = "<div class='object'>object<br /><button class='addObject'>addObject()</button><button class='delObject'>delObject()</button></div>";
            $(function() {
                $(".addObject").click(function(){addObject()});
            });
            $(function() {
                $(".delObject").click(function(){
                    $(this).parent().remove();
                });
            });
            function addObject() {
                $(object).appendTo(".environment");
                $(function() {
                    $(".addObject").click(function(){addObject()});
                });
                $(function() {
                    $(".delObject").click(function(){
                        $(this).parent().remove();
                    });
                });
            }
        </script>
    </head>
    <body>
        <div class="environment">environment<br />
            <div class="object">object<br />
            <button class="addObject">addObject()</button>
            <button class="delObject">delObject()</button>
        </div>
        </div>
    </body>
</html> 
```

如果这一切看起来太复杂了，有人可以告诉我一种方法，我可以在 jquery 中制作 html 对象，这些对象能够在不使用 .clone() 函数的情况下制作和删除更多自己。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T14:31:26.230

事件委托。

```
$(function(){
    var object = "<div class='object'>object<br /><button class='addObject'>addObject()</button><button class='delObject'>delObject()</button></div>";
    $( ".environment" )
        .on( "click", ".addObject", function () {
            $( object ).appendTo( ".environment" );
        })
        .on( "click", ".delObject", function () {
            $( this ).parent().remove();
        });        
}); 
```

您的代码在每次单击时成倍增加的原因是，每次添加新元素时，您都在向具有所述类的所有现有元素添加一个额外的单击事件。使用事件委托，您不再需要将事件绑定到每个元素，而是由祖先元素 (.environment) 处理事件。

# java - 用于存储对象的并发集合

> ID：10637640
> 
> 赞同：4
> 
> 时间：2012-05-17T14:27:12.020
> 
> 标签：java, caching, collections

我需要找到一个匹配的合适的集合：

*   一位作家，许多读者（集合应该是线程安全的）
*   廉价的迭代
*   应该保留插入记录的顺序
*   尺寸限制：
    *   固定大小 - 每次插入新记录时达到阈值时，应删除最旧的记录
    *   或时间阈值 - 应保留“仅记录不超过 5 小时的记录”

我很确定这个问题不是什么新问题，可能一些缓存可以用于这些目的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:35:03.010

考虑使用[Guava 的缓存](http://docs.guava-libraries.googlecode.com/git-history/v12.0/javadoc/com/google/common/cache/package-summary.html)包。如果您查看[`CacheBuilder`](http://docs.guava-libraries.googlecode.com/git-history/v12.0/javadoc/com/google/common/cache/CacheBuilder.html)，它包含您指定的大部分功能。我不知道订购保存（你为什么想要那个？）

基础集合（如果您正在寻找完整的缓存实现或支持它的集合，则无法从您的问题/标题中看出）可能是[ConcurrentHashMap](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html?is-external=true)。

# bash - bash 脚本中的单引号问题

> ID：10637643
> 
> 赞同：2
> 
> 时间：2012-05-17T14:27:18.847
> 
> 标签：bash

我正在尝试从 bash 脚本运行命令。该命令本身有单引号，但我无法让它们工作，因为单引号内有需要扩展的变量。这是 bash 脚本：

```
#!/bin/bash

if [ "$2" == "PracSci" ];
then
    echo "Running tabulate.science.r"
    R CMD BATCH --no-save --no-restore --slave '--args $1 $2 $3' tabulate.science.r /dev/tty
else
    echo "Running tabulate.r"
    R CMD BATCH --no-save --no-restore --slave '--args $1 $2 $3' tabulate.r /dev/tty
fi 
```

`./script.sh 2 Vocab May12`例如，当运行时，命令本身在没有变量值的情况下运行。

如何在仍然运行命令的同时扩展变量？

为了清楚起见，我要运行的命令是：（ `R CMD BATCH --no-save --no-restore --slave '--args $1 $2 $3' tabulate.r /dev/tty`包括命令中的单引号）。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T21:45:01.670

简短的回答：使用双引号而不是单引号（正如@Pavel 建议的那样）。如果有疑问，请使用`set -x`它来了解 shell 如何解析您的命令。

长答案：引号不会传递给命令；相反，它们在将参数传递给命令之前由 shell 解析（并删除）。他们所做的是改变shell解析引号内的内容的方式（通常通过抑制某些字符的特殊含义），这意味着您需要选择适当的引号以允许您想要解析的特殊字符，并抑制那些您希望将其视为普通字符。例如，考虑以下命令：

```
R CMD BATCH --no-save --no-restore --slave '--args 2 Vocab May12' tabulate.r /dev/tty 
```

shell 将忽略命令的单引号部分中所有字符的特殊含义。唯一具有特殊含义的字符是空格，通常用作参数之间的分隔符；在这种情况下，单引号使 shell 将它们视为单个参数的一部分。这些其他命令：

```
R CMD BATCH --no-save --no-restore --slave "--args 2 Vocab May12" tabulate.r /dev/tty
R CMD BATCH --no-save --no-restore --slave --args' '2' 'Vocab' 'May12 tabulate.r /dev/tty
R CMD BATCH --no-save --no-restore --slave --args\ 2\ Vocab\ May12 tabulate.r /dev/tty 
```

...都做同样的事情，因为它们都（以一种或另一种方式）让 shell 将空格视为参数的一部分，而不是参数之间的分隔符。

现在，让我们看看对您不起作用的命令：

```
R CMD BATCH --no-save --no-restore --slave '--args $1 $2 $3' tabulate.r /dev/tty 
```

问题是，虽然单引号抑制了空格的特殊含义（如您所愿），但它们也抑制了`$`s 的特殊含义（您不想要）。所以你需要一些更有选择性的东西。一种选择是引用/转义空格，但不引用`$1`等：

```
R CMD BATCH --no-save --no-restore --slave --args' '$1' '$2' '$3 tabulate.r /dev/tty
R CMD BATCH --no-save --no-restore --slave --args\ $1\ $2\ $3 tabulate.r /dev/tty 
```

（请注意，这两个命令的作用完全相同。）这些命令大部分都可以工作，但有一点潜在的麻烦：shell 会将`$1`etc 替换为脚本的参数，但随后会对它们进行一些额外的解析：寻找用作参数分隔符的空格、用于进行文件名匹配的通配符等。我很确定你不想要的所有东西——尽管因为参数可能不包含任何特殊字符，所以这可能不会成为一个问题。大概。

我看到的最好的选择是简单地使用双引号：

```
R CMD BATCH --no-save --no-restore --slave "--args $1 $2 $3" tabulate.r /dev/tty 
```

双引号抑制空格的特殊含义（如您所愿），允许`$`触发变量扩展（也如您所愿），但一旦变量已扩展（也可能是您想要的），则阻止任何进一步的解析。参数中的空格或其他有趣的字符可能仍然会在 R 脚本中造成麻烦，但这至少可以防止它们在 R 脚本启动之前造成麻烦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T14:32:18.100

使用双引号 - 还是我错过了重点？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T14:32:24.210

您可以使用 "(双引号) 代替或关闭 ' 与 ' 即

```
#!/bin/bash

if [ "$2" == "PracSci" ];
then
    echo "Running tabulate.science.r"
    R CMD BATCH --no-save --no-restore --slave '--args '$1' '$2' '$3 tabulate.science.r /dev/tty
else
    echo "Running tabulate.r"
    R CMD BATCH --no-save --no-restore --slave '--args '$1' '$2' '$3 tabulate.r /dev/tty
fi 
```

或者，如果您需要*args ...*再次在单引号中，则只需编写

```
#!/bin/bash

if [ "$2" == "PracSci" ];
then
    echo "Running tabulate.science.r"
    R CMD BATCH --no-save --no-restore --slave "'--args $1 $2 $3'" tabulate.science.r /dev/tty
else
    echo "Running tabulate.r"
    R CMD BATCH --no-save --no-restore --slave "'--args $1 $2 $3'" tabulate.r /dev/tty
fi 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T14:33:48.627

如果我理解正确，你想要 `" '--args $1 $2 $3' "`而不是 plain `'--args $1 $2 $3'`。由于顶级标记是双引号字符串，因此变量将被扩展，并且`'`将保留在标记中，以便 R 可以使用它们。

# sql-server - SQL Server 2008 中用于在列表的每个元素周围放置单引号的函数

> ID：10637651
> 
> 赞同：1
> 
> 时间：2012-05-17T14:27:36.787
> 
> 标签：sql-server, sql-server-2008

我有一个存储过程，它作为参数接收要包含在查询中的值列表。例如`NY, NJ, CT, PA`

在存储过程中的动态 SQL 查询中，我想选择记录

```
WHERE state IN ('NY', 'NJ', 'CT', 'PA'). 
```

如果我在参数到达 SP 时使用它，我会这样做

```
WHERE state IN 'NY, NJ, CT, PA'. 
```

因此，我需要转换

```
'NY, NJ, CT, PA' 
```

到

```
('NY','NJ','CT','PA'). 
```

有这样做的功能吗？

谢谢！

嘿，我认为凯文在这里指出了正确的方向。我需要做的就是：

```
WHERE state IN REPLACE(('NY, NJ, CT, PA'), ',' , ''',''') 
```

或者，因为我真的把它放在一个变量中......

```
WHERE state IN REPLACE ((@StateList), ',' , ''',''') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:30:04.217

有很多方法可以做到这一点。一种简单的方法是将它们插入临时表（例如@temp_states）并执行以下操作：

```
WHERE state in (SELECT state from @temp_states) 
```

您可以使用像[这样](https://stackoverflow.com/questions/314824/t-sql-opposite-to-string-concatenation-how-to-split-string-into-multiple-reco)的函数来为您生成表，而不是将它们插入到表中：

```
WHERE state in (SELECT * from dbo.Split(',', 'NY,NJ,CT,PA')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:37:58.223

一个非常简单的选择是：

```
WHERE CHARINDEX ( CONCAT (', ', state,',') ,  CONCAT (', ', @PARAM,',')) > 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T14:40:01.287

这是一个没有函数的有趣方法：

```
DECLARE @StateList VARCHAR(50)='NY, NJ, CT, PA' --(substitute for your parameter)
SELECT * FROM Table WHERE ',' + REPLACE(@StateList,' ','') + ',' LIKE '%,' + State + ',%' 
```

# php - 遍历结果 MongoDB 和 GridFS (PHP)

> ID：10637653
> 
> 赞同：0
> 
> 时间：2012-05-17T14:27:40.547
> 
> 标签：php, sql, mongodb, gridfs, database

我正在使用 GridFS，我目前已经让它使用 findOne 显示单个图像，尽管我希望它遍历网格中的所有结果并将它们全部回显到屏幕，这是我正在使用的代码：

```
<?php
try {
  // open connection to MongoDB server
  $conn = new Mongo;

  // access database
  $db = $conn->database;

  // get GridFS files collection
  $grid = $db->getGridFS();

  // retrieve file from collection
  header('Content-type: image/png');
  $file = $grid->findOne(array('_id' => new MongoId('4fb437dbee3c471b1f000001')));

  // send headers and file data

  echo $file->getBytes();
  exit;  

  // disconnect from server
  $conn->close();
} catch (MongoConnectionException $e) {
  die('Error connecting to MongoDB server');
} catch (MongoException $e) {
  die('Error: ' . $e->getMessage());
}
?> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T22:21:04.827

您将标题设置为 image/png，因此浏览器只需要一张图片。

您可以做的是将其更改为 text/html 文档并使用数据 URI 方案嵌入图像（请参阅[http://en.wikipedia.org/wiki/Data_URI_scheme](http://en.wikipedia.org/wiki/Data_URI_scheme)），然后以一系列图像标签输出图像。

```
<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>My images</title>
    <head>
    <body>
    <?php
    /* ... db connection/init code ... */

    $files = $grid->find({});

    foreach($files as $file) { 
       $encodedData = base64_encode($file->getBytes());
       echo "<img src=\"data:image/png;base64,{$encodedData}\">";
       echo "<br>";
    }
    ?>
    </body>
</html> 
```

请注意，您可能想要检测图像的 mime 类型并相应地更改并使用文件的元数据设置 alt、width 和 height 属性。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:48:09.450

使用“find”与“findOne”，它将返回一个结果集，您可以使用 foreach 循环，例如：

> $files = $grid->find({});
> 
> foreach($files as $file) { echo $file->someData; }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T15:54:22.097

通常，如果您在网页上显示图像，您希望有一堆标签`<img src="someUrl" />`，然后让每个*someUrl*处理获取单个图像。

# functional-programming - 哪种 FP 语言最接近 lambda 演算？

> ID：10637670
> 
> 赞同：4
> 
> 时间：2012-05-17T14:28:23.450
> 
> 标签：functional-programming, lambda-calculus

哪种 FP 语言在代码外观、感觉和行为上与 lambda 演算抽象最接近？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T16:11:37.990

这可能不是一个真正的答案，它更多的是对你真正想要什么的猜测。

一般来说，lambda 演算中几乎没有什么——你基本上需要（一等）函数、函数应用程序和变量。这些天来，您将很难找到一种*不*为您提供这些东西的语言……但是，当您尝试学习它时，事情可能会变得混乱-例如，仅使用纯数字就很容易然后把它们和教堂数字混在一起。（我已经看到很多学生都发生过这种情况，适应这种材料所需的正式思维已经够难了，以至于将编码扔到一堆并没有真正帮助......）

正如 Don 所说，Scheme 非常接近于“普通”的无类型 lambda 演算，如果您正在阅读 The Little Schemer，它可能非常适合您的情况。如果你真的想使用“正确”的 LC，你需要确保你*只*使用函数（问题如上）；但是您会遇到一些额外的问题，尤其是当您阅读有关该主题的各种其他文本时。首先，大多数文本将使用您在 Scheme 中*没有的惰性求值。*其次，由于 LC 只有一元函数，因此缩短术语并使用例如`λxyz.zxy`代替“真实”形式（在这种情况下是`λx.(λy.(λz.((z x) y)))`或`(lambda (x) (lambda (y) (lambda (z) ((z x) y))))`在 Scheme 中）是很常见的。（这称为[柯里化](http://en.wikipedia.org/wiki/Currying)。）

所以是的，Scheme 非常接近 LC，但对于所有这些问题来说，这并没有什么意义。Haskell 可以说是一个更好的候选者，因为它既懒惰，又对函数的多个参数进行这种柯里化。OTOH，你正在处理一种类型化的语言，这是一个相当大的包袱带入这个游戏——如果你尝试做 TLS 风格的例子，你会陷入一些严重的泥潭......

如果你确实想要得到所有东西（懒惰、速记、无类型、足够接近 Scheme），那么[Racket](http://racket-lang.org/)还有一点需要考虑。在高层次上，它非常接近 Scheme，但它更进一步，因为您可以快速推出一种将 Racket 语言限制为仅`lambda`表达式和函数应用程序的语言。做更多的工作，你也可以让它做咖喱，你甚至可以让它变得懒惰。这不是你现在应该尝试自己做的练习——但如果这听起来像你想要的，那么我可以给你指点[我的课程](http://pl.barzilay.org/resources.html)（在课堂笔记中寻找“Schlac”），我们使用的语言正在执行上述所有操作，并且受到极大限制，因此您得到的只是基本的 LC 构造。（例如，`3`*在你*定义它之前是一个未绑定的标识符。）请注意，这不是一些解释器——它被编译成 Racket 代码，这意味着它运行得足够快，你甚至可以编写使用数字的代码。你也可以在那里获得该语言的实现，一旦你安装了它，如果你以`#lang pl schlac`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T14:36:42.063

Lambda 演算是一个非常非常受限的编程模型。你只有功能。没有文字，没有内置的算术运算符，没有数据结构。一切都被编码为函数。因此，大多数函数式语言都试图以更方便日常编程的方式扩展 lambda 演算。

Haskell 使用 lambda 演算的现代扩展作为其核心语言：[System F](http://en.wikipedia.org/wiki/System_F)，扩展了数据类型。（GHC 已将其进一步扩展到[System Fc](http://hackage.haskell.org/trac/ghc/wiki/Commentary/Compiler/FC)，支持类型平等强制）。

由于所有 Haskell 都可以直接用其核心语言编写，并且其核心语言是类型化 lambda 演算（特别是二阶 lambda 演算）的扩展，因此可以说 Haskell 紧密遵循 lambda 演算，取模其内置的并发运算符; 并行性；和记忆副作用（和 FFI）。这使得新编译器优化的开发变得更加容易，也使得给定程序的语义更易于理解。

另一方面，Scheme 是无类型 lambda 演算的变体，扩展了副作用和其他非 lambda 演算概念（例如并发原语）。可以说紧跟无类型 lambda 演算。

唯一重要的人是：学习 lambda 演算的人；和编译器作者。

# cruisecontrol - 为什么 Cruisecontrol 在构建过程中重新启动？

> ID：10637685
> 
> 赞同：0
> 
> 时间：2012-05-17T14:29:19.207
> 
> 标签：cruisecontrol

我们在虚拟测试机上运行长时间构建时遇到了巡航控制问题。日志表明 Cruisecontrol 在构建期间正在重新启动。这就是 Cruisecontrol.log 显示的内容。

```
...
2012-05-17 08:09:30,719 [Thread-30] INFO  ScriptRunner     - ccAnt..
2012-05-17 08:09:31,202 [Thread-30] INFO  ScriptRunner     - ccAnt..
2012-05-17 08:09:32,042 [Thread-30] INFO  ScriptRunner     - ccAnt..
2012-05-17 08:03:49,674 [WrapperSimpleAppMain] INFO  Main             - CruiseControl     Version 2.8.4 Compiled on January 5 2012 0831
2012-05-17 08:03:49,674 [WrapperSimpleAppMain] INFO  XMLConfigManager - reading     settings from config file [C:\systest\cruisecontrol\systest-cc-config.xml]
2012-05-17 08:03:50,328 [WrapperSimpleAppMain] FATAL PluginXMLHelper  - Error configuring plugin.
java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
... 
```

Cruisecontrol 正在运行 ant 任务，然后它似乎突然重新启动，由第四行日志记录指示。有时构建会一直完成，有时会发生重新启动。

此问题出现在从 7 64 到 xp32 的不同版本的 Windows 上。虚拟机具有 5 GB 内存和双核处理器。构建可能需要 500 到 600 分钟，一些单独的 ant 任务可能需要 150 分钟。

请注意，我们有一台独立的 Windows 7 64 机器，它在巡航控制下运行相同的任务集，并且没有出现此问题。它运行构建的时间大约是虚拟机时间的 1/7。

有人对此有任何想法吗？我最好的猜测是在包装进程或父 java 进程中触发了超时。wrapper.conf 没有用于控制超时的变量。

我们正在使用 CruiseControl 2.8.4。

新的：

我刚刚在事件查看器中发现了以下两个事件，它们对应于 Cruisecontrol 在构建过程中重新启动时 Cruisecontrol 日志中的时间。

> JVM 出现挂起：等待来自 JVM 的信号超时。
> 
> JVM 未按请求退出，已终止

**如何增加 JVM 的超时时间？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:50:14.457

问题是 CruiseControl 包装器认为 JVM 已挂起。包装器 ping JVM 的超时时间为 30 秒。我现在把它增加到一个小时。这个[页面解释了它](http://wrapper.tanukisoftware.com/doc/english/prop-ping-timeout.html)。

# java - 推迟 try-catch 的执行

> ID：10637698
> 
> 赞同：2
> 
> 时间：2012-05-17T14:30:10.063
> 
> 标签：java, blackberry, blackberry-jde

是否可以推迟在按钮单击时触发的 try-catch 的执行。我厌倦了尝试各种方法来做到这一点。没有成功。

假设我有一个按钮。在按钮单击字段更改侦听器时，将执行这些 try catch 语句。

```
 ButtonField showInputButton = new ButtonField(" Search ",ButtonField.FIELD_HCENTER | ButtonField.CONSUME_CLICK);
      showInputButton.setChangeListener(new FieldChangeListener() 
      {

            public void fieldChanged(Field field,int context) 
            {
                    Dialog.alert(TextField1.getText());
                //Here there are some code snippets for jumping to another form
                  try
                  {   
                    //Some statements that filter data from database
                  }
                  catch( Exception e ) 
                    {         
                        System.out.println( e.getMessage() );
                        e.printStackTrace();
                    }
            }
        }

                    );

      add(showInputButton); 
```

这并不是说我根本不希望执行这些语句。而是我希望在遇到该 try-catch 块之前的一些操作之后执行它们。

这种事情可能吗？请指导。

![在此处输入图像描述](../Images/dabdf531c3c6e7f9cd1d1a2231649c32.png)

我首先要感谢所有回复他们建议的人。对于我无法清楚地解释我的问题，即我在这些 try-catch 语句中到底做了什么以及是什么让我推迟了 try-catch 块，我深表歉意。请根据我的确切要求找到所附图片。

重新编辑

在通过建议增强了推荐的代码后，我添加了下图，并展示了我以编程方式尝试过的内容。如果图像不清楚，请交流。

![在此处输入图像描述](../Images/329cc4b2b2d40808032a6b0b7e652fef.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:47:08.030

好吧，您可以将异常保存为变量以供以后使用...

```
Exception savedException;
try {   
   //Some statements that filter data from database
}
catch( Exception e ) {         
  savedException = e;
}

// do more stuff then deal with exception afterward
throw savedException; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:32:12.733

您可以启动一个线程并等待您正在寻找的条件发生（您可能必须在满足条件时明确地向线程发出信号）

伪代码：

```
static boolean isConditionMet = false;

public void fieldChanged(Field field,int context)  // inside the ButtonField
{
  Thread thread - new Thread() {
    public void run() {
      // TODO: wait for condition using isConditionMet
      // TODO: perform desired actions when condition happens
      // TODO: reset isConditionMet
    }
  };
  thread.start(); 
} 
```

您当然需要在`isConditionMet`某个地方设置一个可以测试/识别您正在寻找的条件是否正确的地方。您还需要`isConditionMet`使用某种锁定/信号量/监视器来保护访问，以防止同时访问。

# php - MySQL 到 Excel 字符集问题

> ID：10637700
> 
> 赞同：0
> 
> 时间：2012-05-17T14:30:24.890
> 
> 标签：php, mysql, excel, export, mysqli

我有一个接受用户注册及其详细信息等的数据库设置。我希望使用 php 将数据库导出到 excel 文件。

我遇到的问题是一些参赛者输入了外国字符，例如土耳其语，它已“错误地”写入数据库 - 据我所知，字符集可能在第一次时设置不正确制作。

我已经编写了将数据库导出到 excel 中的代码（如下），但是无论我如何尝试对数据进行编码，我都无法正确显示 Excel 文档

```
<?php 

require_once('../php/db.php');

header("Content-type: application/octet-stream");
header("Content-Disposition: attachment; filename=Download.xls");
header("Pragma: no-cache");
header("Expires: 0");

$query =    "SELECT * FROM users";

$result = mysqli_query($link, $query);
if($result) {
    $count = mysqli_num_rows($result);
    for($i=0; $i<$count; $i++) {
        $field = mysqli_fetch_field($result);
        $header .= $field->name."\t";
        while($row = mysqli_fetch_row($result)) {
            $line = '';
            foreach($row as $value) {
                if((!isset($value)) OR ($value == "")) {
                    $value = "\t";
                } else {
                    $value = str_replace('"', '""', $value);
                    $value = '"'.$value.'"'."\t";
                }
                $line .= $value;
            }
            $data .= trim($line)."\n";
        }
        $data = str_replace("\r", "", $data);
        if($data == "") {
            $data = "\n(0) Records Found!\n";
        }
    }
    print mb_convert_encoding("$header\n$data", 'UTF-16LE', 'UTF-8');
} else die(mysqli_error());
?> 
```

当我这样做时，它在打开它时出现错误，说 Excel 无法识别文件类型，它会打开文档，但它在它试图写入的所有土耳其语字符周围绘制了框。

我不是 PHP 专家，这只是我拼凑的信息。

谁能帮我一把？

非常感激

莫兹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:56:24.373

1.  首先，您似乎正在创建一个制表符分隔的文本文件，然后使用 MIME 类型`application/octet-stream`和文件扩展名将其返回给浏览器`.xls`。Excel 可能会发现它是制表符分隔的（但从你的错误中听起来好像没有），但无论如何你真的应该使用`text/tab-separated-values`MIME 类型和`.txt`文件扩展名，以便一切都知道数据是什么。

2.  其次，要创建制表符分隔的文件，您最好直接从 MySQL 导出数据（使用[`SELECT ... INTO OUTFILE`](http://dev.mysql.com/doc/en/select-into.html)），因为当您尝试自己进行转义分隔符等时，会出现各种痛苦。例如：

    ```
    SELECT * FROM users INTO OUFILE '/tmp/users.txt' FIELDS TERMINATED BY '\t' 
    ```

    然后，您只需要使用[`readfile()`](http://php.net/manual/en/function.readfile.php).

    如果您绝对*必须*从 PHP 中创建分隔文件，请考虑使用它的[`fputscsv()`](http://uk3.php.net/manual/en/function.fputcsv.php)函数（您仍然可以指定您希望使用制表符分隔符）。

3.  始终使用`.txt`文件扩展名，而不是`.csv` *即使您的文件以逗号分隔*，因为某些版本的 Excel 假定*所有*具有`.csv`扩展名的文件都使用`Windows-1252`.

4.  As far as character encodings go, you will need to inspect the contents of your database to determine whether data is stored correctly or not: the best way to do this is to `SELECT HEX(column) ...` in order that you can inspect the underlying bytes. Once that has been determined, you can `UPDATE` the records if conversions are required.

# asp.net - MVC3 中的路由

> ID：10637701
> 
> 赞同：0
> 
> 时间：2012-05-17T14:30:24.997
> 
> 标签：asp.net, asp.net-mvc-3, entity-framework-4

我只是在学习 MVC，并且有一个问题我敢肯定除了我之外的每个人都很明显;-)。我将 MVC3 与 EF4 和 DbContext 一起使用，并且在理解大多数基本功能方面取得了成功。这是我的问题：

假设我有 2 个表（公司和用户）以及它们之间的一对多关系（外键公司 ID）。

我的问题是：在 MVC 中执行一对多关系的最佳方式是什么？我不希望任何公司中的任何人编辑任何用户。我只希望 X 公司的人修改他们自己的用户。

我正在尝试在特定公司中创建新用户。我不想在用户视图中使用标准 EF 模板（它为您提供公司下拉列表，因为它是外键）。我想确保我在 /Company/123456 中，然后才能从该公司内创建用户。

我查看了 ASP.NET 路由，看看是否有可能：/Company/123456/User/Create/ - 它看起来不像。（看起来我只能有一个 Controller/Action/Id）。我只是不确定在创建新对象时我是如何“记住”我们目前在公司 123456 中的。

查询字符串？（/用户/创建/？公司=123456）。我应该创建另一个类（CompanyUser）吗？如果是这样，我不确定路由的外观（CompanyUser/Create/123456）？

提前感谢您的建议。

麦克风

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:36:21.073

对于 /Company/123456/User/Create/ 应配置为：

```
routes.MapRoute(
            "CreateCompanyUsers",                                                                    
            "/Company/{companyId}/User/Create",                           
            new { controller = "User", action = "Create" }
        ); 
```

在这种情况下，/Company/123456/User/Create/ 将执行如下操作

```
public class UserController : Controller {
   ...
   public ActionResult Create(int companyId){
       ...
   }
} 
```

# eclipse - Eclipse：快速搜索文件名

> ID：10637702
> 
> 赞同：109
> 
> 时间：2012-05-17T14:30:26.027
> 
> 标签：eclipse, search, eclipse-plugin, usability

在 Eclipse 中工作时，我经常意识到我记得类名，但忘记了这个类在哪个包中。使用搜索不是很方便。太多的点击和按键。我想知道，有没有插件可以简化这个过程？例如，如果包资源管理器顶部有一个文本编辑框，可以根据输入的文本过滤显示包和 .java 文件，那就太好了。有人知道这样的事情吗？

* * *

## 回答 #1

> 赞同：213
> 
> 时间：2012-05-17T14:37:48.390

Eclipse 确实提供了类似的功能：

Open Resource `Shift`++用于所有资源文件（包括 Java 文件`Ctrl`）`R`

为类路径中的所有 Java 类打开 Type ++ `Shift`。`Ctrl``T`

它们还会在您键入时过滤列表。

*请注意，它们会搜索当前工作区中所有已打开项目的所有文件。*

# python - Python：For循环未按预期迭代

> ID：10637705
> 
> 赞同：0
> 
> 时间：2012-05-17T14:30:37.350
> 
> 标签：python, loops, for-loop, calendar

我试着写一个日历。但是 for 循环只会打印出第一个月的天数。如果我尝试打印循环后的几天，它将起作用。有谁知道发生了什么？

```
cal_year = input('Enter a year (YYYY): ')

def not_common(year):
    if (year % 4 == 0):
        if (year % 100 == 0):
            if (year % 400 == 0):
                return 1
            else:
                return 0
        else:
            return 1
    else:
        return 0

leap = not_common(cal_year)

if leap == 0:
    print 'This is not a leap year'

elif leap == 1:
    print 'This is a leap year'

else:
    print 'unexpected calculation error'

y1900=1

day = ((cal_year-1900)*365)%7

month = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec']
calendar = [range(1,32), range(1,29), range(1,32), range(1,31), range(1,32), range(1,31),\
         range(1,32),range(1,32),range(1,31),range(1,32),range(1,31),range(1,32)]

if (leap == 1):
    calendar[1] = range(1,30)

week = ['su','mo','tu','we','th','fr','sa']
r = 0
for i in range(0,12):
    print month[i]
    print ' '.join(str(y) for y in week)
    for j in range (1, (len(calendar[i])/7)+2):
        #cal =' '.join(str(x).zfill(2) for x in calendar[i][r*7:7*(r+1)])
            print ' '.join(str(x).zfill(2) for x in calendar[i][r*7:7*(r+1)])
            r += 1   
    print

print calendar[1]
print calendar[11] 
```

故障线被认为是：' '.join(str(x).zfill(2) for x in calendar[i][r*7:7*(r+1)])

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:47:10.290

`r`每次开始新的一个月时，您都需要重新开始您的价值。

但是，您的代码还有其他问题，您假设每个月都从星期日开始，并且正好是 7 天的倍数。

# php - 如何让搜索引擎显示我网站上的产品？

> ID：10637706
> 
> 赞同：0
> 
> 时间：2012-05-17T14:30:37.753
> 
> 标签：php, mysql, seo, query-string, search-engine

我不是在谈论像 about.html、services.html 这样的静态页面的搜索引擎索引。假设我销售产品，每个产品都通过链接显示：domain.com/product.php?id=343。

有什么我必须在编码方面做的事情来实现这一点，还是它更像是一个搜索引擎特定的东西？我使用 PHP/MYSQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:32:07.410

搜索引擎可以很好地抓取和索引带有查询字符串的页面，因此您不必为它们做任何特别的事情。只要确保他们可以通过 HTML 链接或[XML 站点地图](http://www.sitemaps.org/)找到这些页面。

[有关SEO 和查询字符串的更多信息，](https://webmasters.stackexchange.com/search?q=%5Bseo%5D%20query%20strings)请参阅我们的姊妹网站Pro Webmasters

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:32:35.083

一般来说，搜索引擎*（好吧，做索引的蜘蛛）*会倾向于跟随你网站页面内的链接——实际上就像一个真实的用户会做的那样。

因此，如果您有一个链接到多个类别页面的主页，每个类别页面都包含指向产品页面的链接，搜索引擎将能够找到这些页面的 URL——并将它们编入索引。

为了帮助他们，您还可以构建[**站点地图**](http://www.sitemaps.org/)文件——基本上，该文件将包含您网站所有页面的 URL。

# facebook - 我可以将“转到应用程序”按钮添加到我的 Facebook 页面，或将我的页面迁移到应用程序社区页面吗？

> ID：10637707
> 
> 赞同：1
> 
> 时间：2012-05-17T14:30:39.583
> 
> 标签：facebook

我想为我的 Facebook 应用程序创建一个带有“转到应用程序”按钮的 Facebook 页面。问题是，我们现有的页面没有这样的按钮。

一种选择是将按钮添加到页面。有没有办法做到这一点？

另一种选择是通过开发者应用创建应用社区，并从旧页面迁移喜欢和 URL。有没有办法做到这一点？

# java - 使用 ArrayList 中的引用来调用方法，并更改被引用对象的当前状态？

> ID：10637709
> 
> 赞同：0
> 
> 时间：2012-05-17T14:30:44.290
> 
> 标签：java, reference, arraylist

也许这是不可能的，但我想要做的是同时使用 ArrayList 来动态地更改 GUI 中多个元素的可见性。对象是由它们自己以另一种方法创建的。

oldScreen.setVisible **(false);** 和**oldScreen<1>.setVisible(false);** 语句会导致错误。我有一种预感，我的想法不会那么顺利。

这基本上就是我所拥有的，我可以通过什么方式实现这一目标？

```
private void initScreens() {
// I create some ArrayLists as "screensets" of sorts and put some GUI elements in there
    ArrayList startScreen = new ArrayList();
    ArrayList lostScreen = new ArrayList();
    ArrayList playScreen = new ArrayList();
    startScreen.add(startB);
    startScreen.add(exitB);

    lostScreen.add(yl1);
    lostScreen.add(yl2);
    lostScreen.add(yl3);
    lostScreen.add(yl4);
    lostScreen.add(yl5);

}
private void changeScreen(ArrayList oldScreen,ArrayList newScreen) {
// now i try to create a handy method to handle the length of the arrays itself, so if
i need to make changes to screens I just add them to there array. They are then easily
displayed, and hidden when told.

    int os = oldScreen.size();
    int ns = newScreen.size();

    for (int i = os; i > 0; i--){
        oldScreen<i>.setVisible(false);
        oldScreen<1>.setVisible(false);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:31:53.757

那是无效的语法。

你正在尝试写

```
oldScreen.get(i) 
```

您还应该使用泛型 ( `ArrayList<Screen>`) 来避免强制转换。

# mysql - 添加额外的列以减少复杂的查询

> ID：10637710
> 
> 赞同：0
> 
> 时间：2012-05-17T14:30:48.333
> 
> 标签：mysql, join

我们来看两张表，例如表 `Post`和表`User`
中`Post`，列*user_id*是外键。

**表** `Post`
*-id*
*-user_id*
*-post*

**表** `User`
*-userID*
*-username*

如果我们想获取海报的用户名，我们必须使用`join`查询并从`User`表中获取它。

`Post`我们在表中添加额外的列来存储海报的用户名以简化 SQL 查询不是更容易吗？在这种情况下，`Post`表将具有*user_id*和*username*列（*username*列是多余的），但这将消除`join`捕获海报用户名的查询。

最好的选择是什么，将用户名存储在`Post`表中与否

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:40:14.633

创建视图是一种选择：并且我们需要查询该视图。然而，msql 中的视图在性能方面并没有像以前那样提供那么多好处。

可能只是运行连接就可以了。根据您最终将存储的数据量，您可能需要考虑其他提高性能的方法，例如分区表等 - 但这是为了下线

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:35:43.123

向数据库添加冗余数据不是一个好的选择。

如果您确实必须简化您的选择查询，请为该案例创建一个视图。这样，数据就在一个地方，您不需要每次都加入。但是一个简单的连接实际上并没有什么大不了的。

# ruby-on-rails-3 - 为什么我的 Rails 模型自定义 setter/getter 方法失败？

> ID：10637711
> 
> 赞同：1
> 
> 时间：2012-05-17T14:30:51.577
> 
> 标签：ruby-on-rails-3

我在这里做错了什么？

我有一个我正在编写的应用程序的模型，称为页面。这些属性是：title pagetype page_url

title 和 pagetype 可以正常设置，但我为 page_url 使用了自定义 getter/setter。这是逻辑/模型：

```
class Page < ActiveRecord::Base

def page_url=()
    temp = self[:title]
    pageUrl = temp.gsub(" ", "_").downcase  
if self[:pagetype] == "home"
        pageUrl = "/"
    end
    self[:page_url] = pageUrl
end

def page_url
    self[:page_url]
end

end 
```

这相当简单 -> page_url 基于标题，所有空格都替换为除非 page_type == "home"，然后将其设置为 "/"。作为记录，我不想将 page_url 设为虚拟，因为我需要它可以搜索并保存在数据库中。

所以不幸的是，无论是在 Rails 控制台还是我的应用程序中，这都失败了。这是我在控制台中调用 setter 方法的方式；

```
page1 = Page.new
page1.pagetype = "home"
page1.title = "this is a test"

page2 = Page.new
pager2.pagetype = "content"
page2.title = "this is another test"

#expected results should be
page1.page_url() 
=> "/"
page2.page_url() 
```

但是我不断得到这个：

```
page1.page_url()
=> nil 
```

我到底做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:48:47.947

这些自定义的 setter 和 getter 不会持久化到数据库中。如果您的数据库中有列，则可以使用[回调](http://guides.rubyonrails.org/active_record_validations_callbacks.html#callbacks-overview)`page_url`设置值。例如：`before_save`

```
class Page < ActiveRecord::Base
  before_save :set_page_url

  def set_page_url
    if self[:pagetype] == "home"
      self.page_url = "/"
    else
      self.page_url = self[:title].gsub(" ", "_").downcase
    end
  end
end 
```

# c - 打捞好手机学习嵌入式编程？

> ID：10637715
> 
> 赞同：0
> 
> 时间：2012-05-17T14:31:08.550
> 
> 标签：c, operating-system, embedded, arm

我有一个屏幕损坏的 Galaxy S II。我想知道是否可以将内部部件作为自学嵌入式编程的工具。我知道 C 和足够的 x86_64 ASM，我会很乐意接受 ARM 汇编。

开发环境/设置是什么样的？

我会使用 USB 连接还是有更直接的方法将手机连接到计算机？

我需要以某种方式准备手机吗？

假设我想为它编写一个引导加载程序，有没有什么好的资源可以从哪里开始？

手机是不是太像个黑匣子了，我应该得到一个包含更多文档的电路板吗？

或者，为什么这是一个糟糕的主意。如果我想使用相机之类的东西，所有驱动程序都很难处理吗？

谢谢您的帮助。我不知道从哪里开始这样的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:57:27.473

如果打开了 ADB（“USB 调试”），您应该能够通过（错误）使用 adb 和 android ndk 来编写独立的可执行文件来进行一些开发。您还可以在 chroot 中安装更完整的 arm linux（debian 等）运行时。理论上你可以编写 android 应用程序，并且有一些方法可以从 adb 命令行而不是 gui 来触发它们，但是太多的 android 都是以 gui 为中心的，以至于你与它们的交互会受到限制。不过，应用程序可以打开网络套接字并为您提供 telnet/ssh 交互。

如果您没有启用 ADB，您可能可以将设备快速启动（或任何三星使用的设备）到启用它的自定义系统映像，甚至是非 android linux 构建，但这取决于是否拥有未锁定的引导加载程序.

根据屏幕损坏的方式，您可能能够看到足以打开 ADB，例如背光问题可能通过以正确的角度照明来解决，通过旋转设备以获得所需的菜单选项以可见的方式部分破裂区域，甚至从可见部分的内容和菜单应该是什么样子的知识中推断出屏幕不可见部分的内容。

# sql - 正则表达式匹配文件名

> ID：10637716
> 
> 赞同：0
> 
> 时间：2012-05-17T14:31:08.833
> 
> 标签：sql, regex, vbscript

我有一个较小的 SSIS 包，我正在尝试将文件名与 VB 正则表达式匹配并删除“所说”文件。我的正则表达式看起来像这样，`^RegZStmntAdj.[A-z0-9_].\.txt$`我试图弄清楚为什么它不匹配目录中的任何文件。如果我的想法正确，这是有效的语法。

```
RegZStmntAdj2_07272011.txt
RegZStmntAdj1_07272011.txt
RegZStmntAdj2_07272011.txxt
New Text Document.txt 
```

如果我使用 运行正则表达式`^RegZStmntAdj.*.\.txt$`，它会匹配正确的文件并删除它们。我知道 * 有效，但我想学习制作更精确的正则表达式。

```
RegZStmntAdj2_07272011.txt
RegZStmntAdj1_07272011.txt 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:43:40.800

`"^RegZStmntAdj.[A-z0-9_].\.txt$"`火柴

*   BOS 上的文字 RegZStmntAdj
*   **一个**字符（\n 除外）
*   **Az、0-9 和 _ 集合中的**一个字符****
***   **一个**字符（\n 除外）*   一个点*   EOS 上的文字 txt**

 **但是您的典型中缀“2_07272011”肯定有超过 3 个字符。试试 `"^RegZStmntAdj[A-Za-z0-9_]+\.txt$"`吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:37:28.670

尝试以下正则表达式：

```
^RegZStmntAdj.[\w_]{9}\.txt$ 
```

我使用`\w`了 ，它与 相同`A-Za-z0-9`，并告诉它匹配 9 个字符，以便它匹配`_<date>`您的文件名部分。您只匹配那里的第一个字符（即下划线）。

使用 Powershell 验证：

```
PS> $test = "^RegZStmntAdj.[\w_]{9}\.txt$"
PS> "RegZStmntAdj2_07272011.txt" -match $test
    True
PS> "RegZStmntAdj1_07272011.txt" -match $test
    True
PS> "RegZStmntAdj2_07272011.txxt" -match $test
    False  # (Correct as contains 2 "xx"s in extension)
PS> "New Text Document.txt" -match $test
    False  # (Correct as nowhere near a match!!) 
```

为了使您的正则表达式更加精确，您可以使用`^RegZStmntAdj\d_[\d]{8}\.txt$`，它转换为：

> 以“RegZStmntAdj”开头的字符串，然后是数字，然后是下划线，然后是 8 位数字，然后以“.txt”结尾

我相信这就是您正在寻找的。**

# apache-flex - 使用 Flash Builder 4.6 连接相机

> ID：10637718
> 
> 赞同：1
> 
> 时间：2012-05-17T14:31:19.613
> 
> 标签：apache-flex, web-applications, camera, flash-builder

我只想启动我的网络摄像头来显示视频，为此我编写了这段代码，但它不起作用。知道为什么它一定不起作用吗？我可能会犯什么错误？

请这里是代码，

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;
            import mx.controls.Alert;

            protected function video_d_creationCompleteHandler(event:FlexEvent):void
            {
                // TODO Auto-generated method stub
                var camera:Camera = Camera.getCamera();
                if (camera) {
                    video_d.videoObject.attachCamera(camera);
                } else {
                    Alert.show("You don't seem to have a camera.");
                }
            }

        ]]>
    </fx:Script>
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <s:VideoDisplay x="15" y="23" id="video_d" creationComplete="video_d_creationCompleteHandler(event)" />
</s:Application> 
```

相反，我看到弹出错误：

TypeError：错误 #1009：无法访问空对象引用的属性或方法。在 vv/video_d_creationCompleteHandler()[C:\Users\Malik\Adobe Flash Builder 4.6\vv\src\vv.mxml:15] 在 vv/__video_d_creationComplete()[C:\Users\Malik\Adobe Flash Builder 4.6\vv\ src\vv.mxml:26] 在 flash.events::EventDispatcher/dispatchEventFunction() 在 flash.events::EventDispatcher/dispatchEvent() 在 mx.core::UIComponent/dispatchEvent()[E:\dev\4.y \frameworks\projects\framework\src\mx\core\UIComponent.as:13152] 在 mx.core::UIComponent/set initialized()[E:\dev\4.y\frameworks\projects\framework\src\mx \core\UIComponent.as:1818] 在 mx.managers::LayoutManager/doPhasedInstantiation()[E:\dev\4.y\frameworks\projects\framework\src\mx\managers\LayoutManager.as:842] 在 mx .managers::LayoutManager/doPhasedInstantiationCallback()[E:\dev\4.

非常感谢您的回答。谢谢比拉尔·艾哈迈德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T19:30:50.283

你`VideoDisplay.videoObject`的是`null`。AFAIK 它可以像[这里](https://stackoverflow.com/a/4767042/645918)一样修复。如果您不喜欢这种方法，可以执行以下操作：

```
<s:VideoDisplay  x="15" y="23" id="video_d" creationComplete="video_d_creationCompleteHandler(event)">
    <s:source>
        <s:DynamicStreamingVideoSource host="" streamType="{StreamType.LIVE}">
            <s:DynamicStreamingVideoItem  />
        </s:DynamicStreamingVideoSource>
    </s:source>
</s:VideoDisplay> 
```

还是用好旧的`mx:VideoDisplay`。

# asp.net-mvc-3 - ASP.Net MVC 3 RadioButton 没有默认选择

> ID：10637719
> 
> 赞同：3
> 
> 时间：2012-05-17T14:31:21.500
> 
> 标签：asp.net-mvc-3, razor, radio-button, radiobuttonfor

我正在使用 Razor 视图开发 ASP.Net MVC 3 Web 应用程序。在视图中，我想问用户一个只能有是/否答案的问题，因此，我计划使用两个单选按钮。

我有一个 ViewModel 传递给我的 View，它看起来像这样

```
public class ViewModelFormImmigration
{
    public int immigrationID { get; set; }
    public int formID { get; set; }

    [Required(ErrorMessage = "Please select Yes or No.")]
    public bool euNational { get; set; }
} 
```

在我的视图中，我有以下代码行来显示是和否选项的单选按钮

```
@Html.RadioButtonFor(model => model.euNational, true) <text>Yes</text>
@Html.RadioButtonFor(model => model.euNational, false) <text>No</text> 
```

我的问题是，当用户第一次来到这个视图时，我不想选择是或否选项。目前，当我创建我的 ViewModel 的实例（见上文）时，属性**euNational**默认为**false**，当 ViewModel 传递给我的视图时，这意味着自动选择了选项 No。

无论如何，当用户第一次看到视图时，默认情况下没有选择任何选项？

谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T14:35:11.870

尝试改变：

```
[Required(ErrorMessage = "Please select Yes or No.")]
public bool euNational { get; set; } 
```

至：

```
[Required(ErrorMessage = "Please select Yes or No.")]
public bool? euNational { get; set; } 
```

这样，当您第一次加载没有设置值的视图时，`euNational`它不会设置为 true 或 false。在它没有设置值的那一刻，它默认为`false`

# javascript - JSF 页面中的 JQuery 对话框

> ID：10637720
> 
> 赞同：0
> 
> 时间：2012-05-17T14:31:24.557
> 
> 标签：javascript, jquery, jsf, jquery-ui-dialog

我想在 JSF 页面中实现问题对话框。简单解释一下，我希望用户在将一行删除到 JSF 表中之前确认（是或否）。我试图实现这个 JavaScript 对话框，但出了点问题。

```
function questiondialog(){
    $('#dialog').dialog({
        autoOpen: false,
        width: 600,
        buttons: {
            "Yes": function() { 
                $(this).dialog("close"); 
            }, 
            "No": function() { 
                $(this).dialog("close"); 
            } 
        }
    }); 
}  

<h:commandButton value="Delete" action="#{beam.deleterow}"
                    onclick="questiondialog()"  >
    <f:ajax render="@form" execute="@form"></f:ajax>
</h:commandButton> 
```

当我单击按钮时，没有对话框。

**编辑** 花了半天时间逐片切割代码后，我发现了问题：这是有效的代码：

```
<html>
    <head>
        <title>jQuery UI Example Page</title>
        <link type="text/css" href="css/custom-theme/jquery-ui-1.8.18.custom.css" rel="stylesheet" />   
        <script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
        <script type="text/javascript" src="js/jquery-ui-1.8.18.custom.min.js"></script>
        <script type="text/javascript">
            $(function(){

                // Accordion
                $("#accordion").accordion({ header: "h3" });

                // Tabs
                $('#tabs').tabs();

                // Dialog           
                $('#dialog').dialog({
                    autoOpen: false,
                    width: 600,
                    buttons: {
                        "Ok": function() { 
                            $(this).dialog("close"); 
                        }, 
                        "Cancel": function() { 
                            $(this).dialog("close"); 
                        } 
                    }
                });

                // Dialog Link
                $('#dialog_link').click(function(){
                    $('#dialog').dialog('open');
                    return false;
                });

                // Datepicker
                $('#datepicker').datepicker({
                    inline: true
                });

                // Slider
                $('#slider').slider({
                    range: true,
                    values: [17, 67]
                });

                // Progressbar
                $("#progressbar").progressbar({
                    value: 20 
                });

                //hover states on the static widgets
                $('#dialog_link, ul#icons li').hover(
                    function() { $(this).addClass('ui-state-hover'); }, 
                    function() { $(this).removeClass('ui-state-hover'); }
                );

            });
        </script>
        <style type="text/css">
            /*demo page css*/
            body{ font: 62.5% "Trebuchet MS", sans-serif; margin: 50px;}
            .demoHeaders { margin-top: 2em; }
            #dialog_link {padding: .4em 1em .4em 20px;text-decoration: none;position: relative;}
            #dialog_link span.ui-icon {margin: 0 5px 0 0;position: absolute;left: .2em;top: 50%;margin-top: -8px;}
            ul#icons {margin: 0; padding: 0;}
            ul#icons li {margin: 2px; position: relative; padding: 4px 0; cursor: pointer; float: left;  list-style: none;}
            ul#icons span.ui-icon {float: left; margin: 0 4px;}
        </style>    
    </head>
    <body>

        <!-- Dialog NOTE: Dialog is not generated by UI in this demo so it can be visually styled in themeroller-->
        <h2 class="demoHeaders">Dialog</h2>
        <p><a href="#" id="dialog_link" class="ui-state-default ui-corner-all"><span class="ui-icon ui-icon-newwin"></span>Open Dialog</a></p>

        <!-- ui-dialog -->
        <div id="dialog" title="Dialog Title">
            <p>Dialog Test</p>
        </div>

    </body>
</html> 
```

我发现我还需要 div 层来显示对话框。如何将此代码与此 AJAX JSF 按钮一起使用？

```
<h:commandButton value="Delete" action="#{SessionsController.deleteSelectedIDs}" >
    <f:ajax render="@form" execute="@form"></f:ajax>
</h:commandButton> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:40:31.553

更改`autoOpen: false`为`autoOpen: true`。

jQuery-UI-Dialog 文档 (http://jqueryui.com/demos/dialog/) 清楚地说，

> 当 autoOpen 为 true 时，对话框将在调用对话框时自动打开。如果为 false，它将一直隐藏，直到 .dialog("open") 被调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T14:43:26.783

添加

```
$('#dialog').dialog('open'); 
```

前

```
$('#dialog').dialog({.... 
```

`autoOpen`INMO 你最好完全删除

也知道你不能像这样确认对话框......我的意思是，如果你想通过打开的对话框停止工作流并继续它或放弃它，你应该改变你的对话框`Yes`和`No`按钮的行为......但这是一个差异问题。 ..

> 简而言之：您应该从按钮打开对话框（但不要使用该按钮操作来删除行，而是使用 jquery 执行另一个隐藏按钮单击，并且该按钮将是具有操作属性设置为调用删除该 bean 方法的按钮行...）导致通过鼠标单击打开对话框与调用 js 内置确认功能不同，导致确认功能停止工作流程，而打开对话框不会...

**看看这个** [完整的 jQuery 对话框 + JSF2 示例](https://stackoverflow.com/a/9439565/617373)

**编辑**

```
<h:commandButton value="Delete" action="#{SessionsController.deleteSelectedIDs}" >
    <f:ajax render="@form" execute="@form" oneven="function(data){if(data.status==='success'){openDialogFunc();}}"></f:ajax>
</h:commandButton> 
```

# sql - 如何测试 SQL 脚本？（数据完整性/迁移测试）

> ID：10637722
> 
> 赞同：2
> 
> 时间：2012-05-17T14:31:25.090
> 
> 标签：sql, sql-server-2008, testing, data-migration, data-integrity

我们的团队 (QA) 面临以下问题：

我们有一个数据库，只能由我们的应用程序访问，该应用`Core`程序是一个`WCF services`应用程序。我们的客户端应用程序正在使用`Core`访问数据库。

在某些时候，我们获得了我们的新版本`Core application`和我们的`Database`. 该`Dev`部门还给了我们一个 sql 脚本，它改变了我们的`database Core data`. `core data`用于描述我们系统的`Core Application`逻辑，因此对该数据的每次更改都可能影响我们客户端应用程序的任何功能。

我的问题是：

*   我们应该再次测试我们所有的应用程序（即使它们已经完全测试）还是有更有效的方法来测试 SQL 脚本？
*   **是否有用于数据完整性/迁移测试的测试技术/工具？**

* * *

在运行迁移脚本后，我正在寻找对数据库的快速有效性/完整性测试。这将防止我们通过应用程序对其进行测试而浪费时间。如果有效性/完整性测试成功，那么我们可以测试应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:45:17.063

有可用于 T-SQL 的单元测试框架。[TSQLUnit](http://sourceforge.net/apps/trac/tsqlunit/)项目就是这样一个框架。您可以使用它来设置自动化测试，就像在应用程序中一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T07:23:43.213

正如@Tim Lentine 已经发布的那样，我建议测试完整的应用程序。正如您所评论的，根据您的描述，您的团队收到的新 sql 脚本在结构和数据本身方面对数据库开发的核心进行了重要更改。因此，为了确保一切都在一块，我最好做一个完整的应用程序测试。至于工具或技术，我可以推荐名为“SQL 测试”的 SSMS 上的新 RedGate（不，我不为他们工作）插件。它使用单元测试[开源 tSQLt](http://tsqlt.org/user-guide/)来实现其目的。它唯一的缺点是有人需要首先学习如何使用 tSQLt，但它很简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T09:11:32.827

显示以下链接：

[http://www.simple-talk.com/sql/t-sql-programming/sql-server-unit-testing-with-tsqlt/](http://www.simple-talk.com/sql/t-sql-programming/sql-server-unit-testing-with-tsqlt/)

[http://www.red-gate.com/products/sql-development/sql-test/](http://www.red-gate.com/products/sql-development/sql-test/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T20:27:03.420

根据您给出的描述：

> 我们有一个只能由我们的核心应用程序访问的数据库......我们获得了一个新版本的核心应用程序和我们的数据库......

告诉我单独测试数据库不是您的团队的责任，但您*可以*从客户的角度测试核心服务，因此假设数据库是正确的。

将 Core 应用程序*和*数据库视为[黑盒](http://en.wikipedia.org/wiki/Black-box_testing)并使用单元测试进行测试。这些测试不应该要求您在数据库中四处寻找，因为任何使用您的核心应用程序的应用程序都不知道也不应该关心信息实际上存储在数据库中的所有意图和目的。您的开发团队可能会在 6 个月内决定将数据存储在云中，在这种情况下，您的所有数据库测试都将被破坏。

如果您*确实*必须查看数据库以检查数据是否已正确存储，那么您的核心服务接口存在问题，因为您输入的任何数据都应该可以通过相同的接口检索（我只知道有人会评论他们的应用程序确实存储了无法回读的数据，但如果没有更详细的应用程序描述，则更容易概括）。

回到现实世界，我假设您是 QA 团队的一员，除非数据库开发人员正在进行一些测试（他们是，不是吗？），否则您很可能必须验证数据库更改。

最后，您可能有兴趣阅读我在 DBA Stack Exchage 站点上发布的关于[在两个不同模式之间执行数据比较](https://dba.stackexchange.com/questions/3289/are-there-tools-to-perform-data-comparison-between-two-different-schemas)的问题。剧透：没有简单的答案。

# php - 如何在服务器的文件系统中正确存储图像（带有数字名称）

> ID：10637726
> 
> 赞同：2
> 
> 时间：2012-05-17T14:31:28.720
> 
> 标签：php, filesystems

我在数据库中有很多记录，每条记录都会有一个图像，我对如何存储图像感到很困惑。

我希望访问路线类似于`/img/record-id.jpg`（即`/img/15178.jpg`）。

好吧，将所有图像存储在 /img/ 中并不是一件好事，因为会有很多。

在[这个问题](https://stackoverflow.com/questions/191845/how-to-store-images-in-your-filesystem)中，建议颠倒图像的名称，因此上面的示例将存储在`/img/78/51/15178.jpg`. 该建议不会提供有关其他情况的更多信息（对我来说这并不明显）。如果 id 是像 5、15、128、1517 这样的低数字，会发生什么（在最后一条评论中询问答案）？

撇开这些不谈，让我们记住我想要的路径是`/img/15178.jpg`. 我会使用 Apache 重定向请求，但为此我必须为不同的 ID 号键入至少 3 个或更多规则：

*   `^/img/(\d)(\.jpg)$`/img/$1$2
*   `^/img/(\d\d)(\.jpg)$`/img/$1/$1$2
*   `^/img/(\d\d)(\d\d)(\.jpg)$`/img/$1/$2/$3
*   等等？

这似乎不是一个好的解决方案，尽管它可以正常工作。

我可以想到其他选项：获取图像的 MD5，将其存储在相应的记录中，将请求重定向到 PHP 脚本并让它处理输出。

该脚本将在 MD5 中查找数据库中的 id，从散列中构建实际路由并输出图像。这个方案比较简洁，但是输出图片需要用到数据库和PHP，听起来有点过头了。

我真的不知道在这里做什么。介意给我一些建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:03:03.047

你已经写出了完美的答案！专业人员使用它的方式与您（或链接问题中的人）说的完全一样：构建适合您需求的深层目录结构。我已经用 1600 万张图片做到了这一点，而且效果很好。

我是这样做的：

/第一个字符/第二个字符/...

具有短名称的文件，例如 5.jpg，将位于 /5/5.jpg

编辑：为了保持性能领先，我完全反对任何进一步的 php 操作，如 salt、md5 等。保持简单明了。

# vba - 将联系人添加到 Outlook 分发列表

> ID：10637729
> 
> 赞同：3
> 
> 时间：2012-05-17T14:31:53.247
> 
> 标签：vba, outlook

我有 1000 多个联系人，每个联系人都有一系列常见的职位。我想以编程方式将每个职位组（例如，职位名称为“总经理”的所有联系人）添加到分发列表（例如“总经理”）中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T15:33:36.937

好的，这是仅默认联系人文件夹的示例。同样，您必须转到可能存在 DL 的每个文件夹，从默认的 Contacts 文件夹开始检查 Dist List 是否存在，然后再创建它。

**尝试和测试（在 OUTLOOK VBA 中）**

```
Option Explicit

Sub GetJobList()
    Dim olApp As Outlook.Application
    Dim olNmspc As Outlook.NameSpace
    Dim olAdLst As Outlook.AddressList
    Dim olAdLstEntry As Outlook.AddressEntry
    Dim olDLst As Outlook.DistListItem, olDLstItem As Outlook.DistListItem
    Dim olMailItem As Outlook.MailItem
    Dim olRecipients As Outlook.Recipients

    Dim jobT() As String, JobTitle As String
    Dim i As Long

    Set olApp = New Outlook.Application
    Set olNmspc = olApp.GetNamespace("MAPI")

    i = 0

    '~~> Loop through the address entries
    For Each olAdLst In olNmspc.AddressLists
        Select Case UCase(olAdLst.Name)
            Case "CONTACTS"
                '~~> Get the Job Title
                For Each olAdLstEntry In olAdLst.AddressEntries
                    On Error Resume Next
                    JobTitle = Trim(olAdLstEntry.GetContact.JobTitle)
                    On Error GoTo 0

                    If JobTitle <> "" Then
                        ReDim Preserve jobT(i)
                        jobT(i) = olAdLstEntry.GetContact.JobTitle
                        i = i + 1
                    End If
                Next
        End Select
    Next

    '~~> Loop through the job title to create the distribution lists
    For i = LBound(jobT) To UBound(jobT)
        '~~> Check if the DL List exists
        On Error Resume Next
        Set olDLst = olNmspc.GetDefaultFolder(olFolderContacts).Items(jobT(i))
        On Error GoTo 0

        '~~> If not then create it
        If olDLst Is Nothing Then
            Set olDLst = olApp.CreateItem(7)
            olDLst.DLName = jobT(i)
            olDLst.Save
        End If
    Next i

    '~~> Loop through the address entries to add contact to relevant Distribution list
    For Each olAdLst In olNmspc.AddressLists
        Select Case UCase(olAdLst.Name)
            Case "CONTACTS"
                '~~> Get the Job Title
                For Each olAdLstEntry In olAdLst.AddressEntries
                    On Error Resume Next
                    JobTitle = Trim(olAdLstEntry.GetContact.JobTitle)
                    On Error GoTo 0

                    If JobTitle <> "" Then
                        On Error Resume Next
                        Set olDLst = olNmspc.GetDefaultFolder(olFolderContacts).Items(JobTitle)
                        On Error GoTo 0

                        '~~> Create a mail item
                        Set olMailItem = olApp.CreateItem(0)
                        Set olRecipients = olMailItem.Recipients
                        olRecipients.Add olAdLstEntry.GetContact.Email1Address

                        '~~> Add to distribution list
                        With olDLst
                            .AddMembers olRecipients
                            .Close olSave
                        End With

                        Set olMailItem = Nothing
                        Set olRecipients = Nothing
                    End If
                Next
        End Select
    Next

    Set olNmspc = Nothing
    Set olApp = Nothing
    Set olDLst = Nothing

End Sub 
```

# asp.net-mvc-3 - MVC3 中的 URL 重写

> ID：10637732
> 
> 赞同：1
> 
> 时间：2012-05-17T14:31:54.587
> 
> 标签：asp.net-mvc-3, url-rewriting

我正在使用 MVC3 为当地大学做一个项目。我遇到了一个要求，我被卡住了，找不到任何出路。
假设我的 URL 是 www.abc.com
要求是，如果我们在 URL 后键入教师姓名，我们将获得教师的详细视图，例如：
www.abc.com/john
www.abc.com/smith
我要求像 www.abc.com/teacher=john 这样的选项，但它已被拒绝。
这是否与 URL 重写或其他方式相关，因为数据库中可能有很多教师，所以我不能在控制器中为每个教师创建方法。谁能指导我这个场景？
亲切的问候

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T14:33:28.017

MVC 本身就是这样做的。

只需为它创建一条路线：

```
routes.MapRoute(
    "Teacher route",
    "/{teacher}",
    new { controller = "SomeController", action = "SomeAction" }
) 
```

请注意，这将与任何其他`/Whatever`URL 冲突（例如，`/About`）；为避免这种情况，您可以使用[我的`MapDefaultController()`扩展](http://blog.slaks.net/2011/09/using-default-controller-in-aspnet-mvc.html)在此之前为特定控制器映射路由。

# php - 自定义表上的 Magento SQL 死锁

> ID：10637733
> 
> 赞同：1
> 
> 时间：2012-05-17T14:31:56.660
> 
> 标签：php, sql, magento, deadlock, magento-1.5

我正在寻找一些关于如何在以下情况下最好地避免死锁的提示。我为我们的 Magento 网站设置了一个自定义表格，其中存储了有关订购商品的一些详细信息以及利润率是多少。我监听**sales_order_invoice_save_after**事件并根据发票中的信息将行插入表中。我还根据每个产品的**actual_shipping_costs**字段计算估计利润。由于这只是一个估计值，我们会定期导入包含订单号和我们为运送订单支付的实际成本的 CSV。我的代码抓取导入的数据，重新计算 CSV 中每个订单中商品的利润，并更新数据库表。我最初在**sales_flat_order中添加了几列**和**sales_flat_order_items**表，并在其中存储所有内容，而不是拥有自己的自定义表。我们开始看到一些客户在结帐后出现了一些问题（尽管我们无法正式将它们归咎于我的代码），此外还有一些可配置产品的不可预见的问题，因此我转而使用自定义表格。这给了我所需的灵活性，并解决了可配置产品的问题。结帐后似乎也不会引起任何问题。

这很棒，直到我第一次尝试导入包含大约 3000 个订单号的 CSV 文件以及运费。我进行导入的方式有点贫民窟，但这是我能找到的最佳方式。在系统配置下我的扩展有一些设置，其中之一是文件导入字段。如果您选择该字段并选择一个 CSV 文件并单击配置页面上的“保存”，它会抓取该文件，对其进行解析，然后在我的自定义表中添加/更新必要的行。如果您认为这是问题的一部分，并且如果您对我应该做什么有建议，请告诉我（即我是否应该使用 Dataflow 类并为此创建高级配置文件？）。这需要大量的时间... 比我将数据添加到 sales_flat_order 和 sales_flat_order_items 表时花费的时间要长得多。这可能是由于额外的计算和定位任何子产品的父级......不确定为什么它更慢，但确实如此。在此导入运行期间，如果客户下订单，他们可能（并且可能会）收到 SQL 死锁错误。

我的问题（如果您仍在关注这一切）是如何最好地避免这种情况。对于新订单，它们只是插入到表中，而导入正在更新现有行。他们不应该发生冲突。我唯一能想到的是，在我插入新行的代码中，我确实尝试加载记录以确保它不在表中......这可能是它被锁定的原因吗？我无论如何都不是 SQL 专家，但我确实在网上找到了一些关于不同类型的锁和设置优先级的信息。这是否可以通过 Magento 或 Zend 框架实现，这会有所帮助吗？

很抱歉这个冗长的问题。我希望你能跟随它。如果您需要更多信息，我会尽力而为。发布代码很困难，因为它位于许多不同的文件中，但请告诉我您需要什么，我会尽我所能提供。

谢谢！

# javascript - Javascript 函数没有正确接收参数

> ID：10637738
> 
> 赞同：1
> 
> 时间：2012-05-17T14:32:11.687
> 
> 标签：javascript, function, arguments

> **可能重复：**
> [JavaScript 闭包和变量范围](https://stackoverflow.com/questions/2314175/javascript-closures-and-variable-scope)
> [在 for 循环中分配点击处理程序](https://stackoverflow.com/questions/4091765/assign-click-handlers-in-for-loop)

我有这个脚本：

```
var MyClass = {
    MyArray: new Array(0, 1, 2, 3, 4),

    MyFunc1: function() {
        var i = 0;
        for (i = MyClass.MyArray.length - 1; i>=0; i--) {
            var cen = document.getElementById("cen_" + i); // It is an img element
                cen.src = "col.png";
                cen.className = "cen_act";
                cen.onclick = function() { MyClass.MyFunc1(i); };
            } else {
                cen.src = "no.png";
                cen.className = "cen";
                cen.onclick = null;
            }
        }
    },

    MyFunc2: function(id) {
        alert(id);
    }
} 
```

我的问题是，在这一行：`cen.onclick = function() { MyClass.MyFunc1(i); };`发送到的参数`MyFunc2`始终是**-1**。该`MyFunc1`函数应该创建四个图像，每个图像都有一个*onclick*事件。当您单击每个图像时，MyFunc2 函数应显示相应的 *i*值。看起来*i*值不是为每个创建的事件和图像元素“保存”的，而只是它的“指针”。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:37:09.137

您应该熟悉[JavaScript 闭包](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)的概念才能理解为什么会发生这种情况。如果你是，那么你应该记住

```
function() { MyClass.MyFunc1(i); }; 
```

函数闭包包含`i`的值`-1`（因为它是整个循环完成执行后此变量的**最终**值。）为避免这种情况，您可以使用`bind`：

```
cen.onclick = (function(i) { MyClass.MyFunc1(i); }).bind(null, i); 
```

或使用具有适当`i`值的显式创建的闭包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:36:49.357

**这是一个正常的情况和对闭包**的误解，看到[这个线程](https://stackoverflow.com/questions/10594897/why-the-closures-dont-get-correct-outer-values-with-async/10594943#10594943)，你可能会得到一些线索，解决这个问题的简单方法是用**立即调用函数表达式包装你的****for**循环体

 **```
MyFunc1: function() {
    var i = 0;
    for (i = MyClass.MyArray.length - 1; i>=0; i--) {
        (function(i) {
            var cen = document.getElementById("cen_" + i); // An img element
                cen.src = "col.png";
                cen.className = "cen_act";
                cen.onclick = function() { MyClass.MyFunc2(i); };
            } else {
                cen.src = "no.png";
                cen.className = "cen";
                cen.onclick = null;
            }
        }(i));
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T14:37:48.247

您正在捕获一个在循环内发生变化的变量，因此您总是得到 i 的最后一个值。

您可以通过创建闭包轻松解决此问题：

```
MyFunc1: function() {
    var i = 0;
    for (i = MyClass.MyArray.length - 1; i>=0; i--) {
        (function(i) {

        var cen = document.getElementById("cen_" + i); // An img element
            cen.src = "col.png";
            cen.className = "cen_act";
            cen.onclick = function() { MyClass.MyFunc2(i); };
        } else {
            cen.src = "no.png";
            cen.className = "cen";
            cen.onclick = null;
        }
       })(i);
    }
}, 
```**

# cordova - 通过Phonegap谷歌Oauth2？

> ID：10637740
> 
> 赞同：2
> 
> 时间：2012-05-17T14:32:13.663
> 
> 标签：cordova, oauth-2.0

我已经阅读了很多关于此的内容，但没有找到一个像样的答案。我只能找到本教程：[http ://www.mobiledevelopersolutions.com/home/start/twominutetutorials/tmt5p1](http://www.mobiledevelopersolutions.com/home/start/twominutetutorials/tmt5p1)

这是通过 jsOauth 进行的，用于通过 Twitter 进行身份验证。这对谷歌也有可能吗？因为我想用 Oauth2 登录..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T17:25:34.000

我知道这对你来说已经晚了，但可能会帮助其他人。

我们使用 phonegap 和 google oauth2 制作了一个非常简单的应用程序。*（它使用cordova `2.0.0`，但任何较新的版本都可以使用，请参阅cordova 发行说明。）*

以下是有关如何实现它的详细信息：[http ://www.itsalif.info/content/oauth-google-api-gapi-phonegap-childbrowser-jquery](http://www.itsalif.info/content/oauth-google-api-gapi-phonegap-childbrowser-jquery)

该项目托管在 github 上：[https ://github.com/liquidlabs/phonegap-oauth-google-api-mobile](https://github.com/liquidlabs/phonegap-oauth-google-api-mobile)

# xpath - 如何在 xpath 中通过键入的文本选择文本输入？

> ID：10637741
> 
> 赞同：3
> 
> 时间：2012-05-17T14:32:15.613
> 
> 标签：xpath, selenium

使用 selenium 创建自动化测试时，当我尝试通过其中的文本定位文本输入时，我遇到了过期问题。我使用 Xpath 和 FirePath 插件来检查它的结果。

我的 xpath 是：

```
//input[@context='@name' and contains(@class, 'edit-string') and contains(@value, 'testSection')] 
```

它什么都不返回，而当我删除最后一个条件时：

```
//input[@context='@name' and contains(@class, 'edit-string')] 
```

我找到了所需的 div。

正如我所理解的，问题在于 value 属性不包含键入的文本。Firebug 控制台证明了这一理论（页面上存在 jQuery 库）：

```
>>>> $("input.edit-string")[0].getAttribute("value")
null
>>>> $("input.edit-string")[0].value
"testSection"
>>>> $("input.edit-string")[0].getAttribute("context")
"@name" 
```

任何想法如何在 xpath 表达式中使用键入的文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:36:11.230

请按照以下说明尝试..

Command ---> Target ---> Value
focus --->class=edit-string
typeKeys --->class=edit-string--->any text

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T06:39:34.120

Approach: From the Given Info the XPath is //input[@context='@name' and contains(@class, 'edit-string')]

Step 1:

So the Input is having the Class Name that contains the string "edit-string". We can convert the above XPath into CSS selector

```
css=.edit-string 
```

Step 2:

Try getting the Text

```
$(".edit-string").getText(); 
```

# python - 如何撤消 Python 日志模块中的 logging.disable() 命令？

> ID：10637743
> 
> 赞同：4
> 
> 时间：2012-05-17T14:32:18.067
> 
> 标签：python, logging

在 Python 强大的日志记录内置模块中，可以通过调用来禁用某个级别以下的所有日志，例如`logging.disable(logging.INFO)`.

我没有在[文档](http://docs.python.org/library/logging.html)中找到如何重置或撤消此设置。

我的目的是在进行单元测试时禁用和重新启用信息和调试级别日志，方法是调用 logging.disable in `setUp()`，然后调用（什么？） in `tearDown()`。

`logger`注意：如果我有一个给定的实例，我知道该怎么做： keep `logger.level`，将级别设置得更高，然后将其重新设置为`tearDown()`。我更喜欢一种在不明确选择它们的情况下使所有记录器静音的方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T15:10:51.353

看起来答案是调用 logging.disable(logging.NOTSET)

```
import logging

logger = logging.getLogger('testlog')
handler = logging.FileHandler('\\path\\to\\testlog.log')
formatter = logging.Formatter('%(asctime)s %(levelname)s %(message)s')
handler.setFormatter(formatter)
logger.addHandler(handler)
logger.setLevel(logging.INFO)

logger.error("some error occurred")
logger.info('some info msg')
logging.disable(logging.ERROR)
logger.info('another info msg')
logging.disable(logging.NOTSET)
logger.info('last info msg') 
```

生成带有此输出的日志文件：

```
2012-05-17 11:09:24,441 ERROR some error occurred
2012-05-17 11:09:24,443 INFO some info msg
2012-05-17 11:09:24,443 INFO last info msg 
```

# html - CSS - 允许 div 突出其父级

> ID：10637745
> 
> 赞同：9
> 
> 时间：2012-05-17T14:32:22.867
> 
> 标签：html, css

我一直在寻找一种让 div 脱离其父级的方法。

父元素有 float:right ，我试图点击它来切换显示/隐藏子元素，但子元素在 div 之后显示/隐藏。我想让它“突出”父 div。

谢谢！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T14:40:51.637

您的解释不是很清楚，但这里有一个右对齐的父 div 和一个突出的子 div 的演示。我希望这就是你要找的:)

```
#parent {
  width: 200px;
  height: 200px;
  background-color: #FF0000;
  float: right;
  position: relative;
}
#child {
  width: 300px;
  height: 100px;
  background-color: #00FF00;
  position: absolute;
  right: 0;
}
```

```
<div id="parent">
  Parent
  <div id="child">
    Child
  </div>
</div>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T14:36:12.513

溢出：可见；父母应该做的伎俩 - 如果你有和尺寸要小心！

# php - 将数据从数据库回显到 ajax 时 PHP 损坏

> ID：10637747
> 
> 赞同：-2
> 
> 时间：2012-05-17T14:32:26.900
> 
> 标签：php, ajax, database

我有这个问题，不知道是什么原因造成的。当我从 www.something.tld/index.html 加载数据到 ajax 我的 ajax 脚本时，它们没问题。但是当我从 script.php 加载数据时，它首先从 db 中检索数据，然后回显这些数据，我的 ajax 以错误结束。但是数据输出是一样的！怎么了？

示例：index.html 输出为“XXX” script.php 输出为“XXX”，但在我的脚本中我生成数据：

```
echo $data[0]->var; 
```

知道为什么会这样吗？当我从 db 检索数据然后将其回显时会发生这种情况。

Internet Explorer 说：语法错误第 281 行，ttm/canvas.1.03.jgz 中的字符 163 这里是 jgz [http://www.freefilehosting.net/canvas103的链接](http://www.freefilehosting.net/canvas103)

我发现当我在 php ajax 中使用 anz 函数时将无法正确解析输出！这可以解析：

```
$from ='05/17/2012 10:15:00';
  $to ='05/17/2012 10:30:00';
  $day ='5/17/2012';
echo '{ "dtstart": "'.$from.'", "dtend": "'.$to.'", "day": "'.$day.'" },'; 
```

这未正确解析：

```
$from= preg_replace('/[\x00-\x1F\x80-\xFF]/', '',$data[0]->time_from);
$to  = preg_replace('/[\x00-\x1F\x80-\xFF]/', '',$data[0]->time_to);
$day = preg_replace('/[\x00-\x1F\x80-\xFF]/', '',$data[0]->day);
$from ='05/17/2012 10:15:00';
  $to ='05/17/2012 10:30:00';
  $day ='5/17/2012';
echo '{ "dtstart": "'.$from.'", "dtend": "'.$to.'", "day": "'.$day.'" },'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:57:45.347

如果您使用[`json_encode()`](http://php.net/json-encode)（就像您应该使用的那样），那么 PHP 会为您处理所有的编码怪癖。例如转义那些不可打印的字符和超过 0x7F 的东西。

```
echo json_encode(Array(
    "dtstart"=>$from,
    "dtend"=>$to,
    "day"=>$day
)); 
```

根据文件的编码，您可能需要先运行这些值[`utf8_encode()`](http://php.net/utf8-encode)，但这是您必须先测试然后尝试的东西。

# bash - 遍历 bash 数组，动态替换数组名，这可能吗？

> ID：10637758
> 
> 赞同：5
> 
> 时间：2012-05-17T14:32:59.953
> 
> 标签：bash

我有一个迭代值数组的脚本，就像这样（为了这个问题的目的而简化）：

```
COUNTRIES=( ENGLAND SCOTLAND WALES )

for i in ${COUNTRIES[@]}
do                  
    echo "Country is $i "
done 
```

我的问题是，是否可以动态替换数组？例如，我希望能够传入数组以在运行时进行迭代。我尝试了以下方法，但我认为我的语法可能是错误的

```
COUNTRIES=( ENGLAND SCOTLAND WALES )
ANIMALS=( COW SHEEP DOG )

loopOverSomething()
{
    for i in ${$1[@]}
    do                  
        echo "value is $i "
    done
}

loopOverSomething $ANIMALS 
```

我越来越`line 22: ${$2[@]}: bad substitution`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T15:16:09.493

您可以为此使用 bash 的间接扩展：

```
loopOverSomething()
{
    looparray="$1[@]"
    for i in "${!looparray}"
    do
        echo "value is $i"
    done
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:18:38.230

您可以通过以下方式将数组用作参数：

```
COUNTRIES=( ENGLAND SCOTLAND "NEW WALES" )
ANIMALS=( COW SHEEP DOG )

loopOverSomething()
{
    for i in "$@"
    do                  
        echo "value is $i "
    done
}

loopOverSomething "${ANIMALS[@]}"
loopOverSomething "${COUNTRIES[@]}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T15:42:42.670

[BashFAQ #006](http://mywiki.wooledge.org/BashFAQ/006)涵盖了这一点：

> 我们不知道有任何技巧可以在 POSIX 或 Bourne shell 中复制该功能（没有使用 eval，这很难安全地完成）。Bash 几乎可以做到——一些间接数组技巧有效，而另一些则无效，而且我们不知道所涉及的语法在未来的版本中是否会保持稳定。因此，请考虑这是一种使用风险自负的黑客攻击。
> 
> ```
> # Bash -- trick #1\.  Seems to work in bash 2 and up.
> realarray=(...) ref=realarray; index=2
> tmp="$ref[$index]"
> echo "${!tmp}"            # gives array element [2]
> 
> # Bash -- trick #2\.  Seems to work in bash 3 and up.
> # Does NOT work in bash 2.05b.
> tmp="$ref[@]"
> printf "<%s> " "${!tmp}"; echo    # Iterate whole array. 
> ```

# c# - MVC 中的字段验证

> ID：10637759
> 
> 赞同：2
> 
> 时间：2012-05-17T14:33:01.457
> 
> 标签：c#, javascript, jquery, asp.net-mvc

我想在我正在处理的 MVC 应用程序中对我的视图强制执行字段验证。例如 -

*   将字段长度限制为 40
*   确保只有字母数字和特殊字符 @#$%&*()-_+][';:?.,! 可以输入。

我使用以下内容来限制字段长度：

```
<div>
<%= Html.TextBoxFor(c => c.CompanyName, new { style = "width:300px", maxlength = "40" })%></div> 
```

如何确保只能在文本框中输入字母数字和特殊字符？

**编辑：** 我将模型中的属性更改为

```
 [DataMember(EmitDefaultValue = false)]
        [Required(ErrorMessage="CompanyName is Required")]
        [StringLength(40, ErrorMessage = "Must be under 40 characters")]
        public string CompanyName { get; set; } 
```

为了测试，我尝试保存一个空白的 CompanyName，希望得到一个服务器错误，因为它是必需的。但是，它会保存空白的公司名称。有什么想法可能会丢失吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:38:24.407

只需像这样创建一个 ViewModel 对象：

```
class Company
{
    [Required]
    [StringLength(40)]
    [RegularExpression(@"someregexhere")]
    public string CompanyName { get; set; }
} 
```

并将您的视图绑定到该模型。通过这种方式，您将拥有服务器端和客户端验证。这真的很容易。

```
@model Company

@using (Html.BeginForm()) {
    Html.EditorFor(x => x.CompanyName)

    <input type="submit" value="Save" />
} 
```

哦，这个例子使用 Razor (MVC3)，据我所知，顺便说一句 MVC2 的工作原理几乎相同。

然后只需通过检查 ModelState.IsValid 来验证控制器中传入的 ViewModel。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T14:35:04.363

这是 MVC 2.0，但同样适用于 3.0 [http://weblogs.asp.net/scottgu/archive/2010/01/15/asp-net-mvc-2-model-validation.aspx](http://weblogs.asp.net/scottgu/archive/2010/01/15/asp-net-mvc-2-model-validation.aspx)

只需查看数据注释，并进行一些模型验证

编辑：

您的控制器操作将需要类似

```
if(ModelState.IsValid)
{
//success logic
}
//failure logic
//return to view 
```

你还需要

```
@Html.ErrorMessageFor(model => model.YourProperty) 
```

为了查看被抛出的错误消息。

阅读这篇文章，它比其他任何人都能更好地解释这一点。

# c# - LINQ Group By 和选择集合

> ID：10637760
> 
> 赞同：89
> 
> 时间：2012-05-17T14:33:04.240
> 
> 标签：c#, linq, group-by

我有这个结构

```
Customer
 - has many Orders
  - has many OrderItems 
```

`CustomerItems`给定以下子集，我想通过 LINQ 生成一个列表`OrderItems`：

```
List of new { Customer, List<OrderItem> Items } 
```

这是客户从商品子集中订购的所有商品的分组

我如何使用 LINQ 回溯订单并按客户分组以生成此对象？

到目前为止，我正在做类似的事情

```
items
 .GroupBy(i => i, i => i.Order.Customer, (i, customer) => new {customer, i}) 
```

但这显然不是一个列表。我猜我在某处需要一个 SelectMany，但可以使用一些指针。

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2012-05-17T14:38:36.133

我想你想要：

```
items.GroupBy(item => item.Order.Customer)
     .Select(group => new { Customer = group.Key, Items = group.ToList() })
     .ToList() 
```

如果你想继续使用`GroupBy`你当前使用的重载，你可以这样做：

```
items.GroupBy(item => item.Order.Customer, 
              (key, group) =>  new { Customer = key, Items = group.ToList() })
     .ToList() 
```

...但我个人觉得不太清楚。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-08-08T15:26:53.900

你可能也喜欢这个

```
var Grp = Model.GroupBy(item => item.Order.Customer)
      .Select(group => new 
        { 
             Customer = Model.First().Customer, 
             CustomerId= group.Key,  
             Orders= group.ToList() 
       })
      .ToList(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-11-21T09:57:36.167

您可以通过群组加入来实现它

```
var result = (from c in Customers
          join oi in OrderItems on c.Id equals oi.Order.Customer.Id into g
          Select new { customer = c, orderItems = g}); 
```

c 是客户，g 是客户订购的商品。

# sql - 将表从 Access 导入 SQL

> ID：10637761
> 
> 赞同：-1
> 
> 时间：2012-05-17T14:33:06.370
> 
> 标签：sql, ms-access

我在 Microsoft Access 2010 中有很多表，我尝试将所有这些表导入 SQL 2010，我想知道我该怎么做？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:35:49.050

使用 DTS 导入

[http://www.online-tech-tips.com/ms-office-tips/ms-access-to-sql-database/](http://www.online-tech-tips.com/ms-office-tips/ms-access-to-sql-database/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:35:26.487

我认为解决方案是创建一个执行导入的 SSIS 包

# c++ - 更改时Make不会重建标题

> ID：10637762
> 
> 赞同：8
> 
> 时间：2012-05-17T14:33:13.727
> 
> 标签：c++, qt, compilation, makefile, header-files

我有一个项目，我经常修改标题，当我这样做时，忘记了`make clean`，`make`我得到了各种奇怪的行为。我目前正在使用 Qt Creator 作为我的 IDE，但我已经看到这种情况发生在一个独立于 Qt 的项目中。我的项目变得相当大，每次更改标题时都必须重新构建，这变得没有效率。有什么想法吗？

备查：

如果使用 QMake 系统：

```
依赖路径 += 。\
    页眉位置1/\
    页眉位置2/\
    页眉位置 2/页眉子位置 1/\
    标头位置 2/标头子位置 2/\
    页眉位置2/页眉子位置3/\
    页眉位置 2/页眉子位置 4/\
    页眉位置 2/页眉子位置 5/\
    页眉位置3/\
    页眉位置 3/页眉子位置 1/\
    页眉位置 3/页眉子位置 2/\

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T23:59:37.690

**重新运行`qmake`**。这将生成一个新的 Makefile，它将具有适当的依赖关系。

*例子：*

如下所示的文件`file.h`：

```
#include "some.h"
#include "header.h"
#include "files.h"
... 
```

`file.cpp`看起来像下面这样：

```
#include "file.h"
... 
```

并在您的`.pro`：

```
HEADERS += file.h some.h header.h files.h
SOURCES += file.cpp 
```

将在结果中产生以下内容`Makefile`：

```
file.o: ../src/file.cpp ../src/file.h \
        ../src/some.h \
        ../src/header.h \
        ../src/files.h
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o file.o ../src/file.cpp 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T14:45:05.810

对您的 IDE 一无所知，也不确定它是否相关，并且由于您没有包含您的 makefile - 我只是说明显而易见的 - 您是否使用任何自动生成的依赖项？

对于 g++，我使用`-MD`标志，然后在 makefile 中包含`$(wildcard bin/*.d)`（取决于您的目标文件的创建位置，我的目标文件是在“bin”中创建的）

还要确保在干净的构建上删除 dep 文件

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T14:47:09.700

解决方案是在您的 makefile 中具有适当的头文件依赖项。

1) 使用 makedepend 生成依赖文件。您将在生成依赖文件的 makefile 中添加一个目标，并且您希望在实际进行编译之前调用它。2) 仅 GCC：在 .c/.cpp 文件的编译行上使用“-MMD”和“-MP”选项。这会导致 GCC 为输入文件生成一个依赖文件。然后，您可以将它们包含在您的 makefile 中。这里的优点是，使用这两个选项，当您添加和删除标头时，它的行为应该符合您的预期。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T14:39:42.717

这主要是由文件之间的依赖关系引起的。因此，如果您更改包含在另一个文件中的 .h 文件，则该文件也需要重新编译。因此，您要么需要减少包含，要么尽可能以 .h/.cpp 形式进行编码，以使 .cpp 比 .h 更频繁地进行更改。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-17T14:58:53.857

这是我自己的 makefile 的摘录，它生成和使用在编译期间自动创建的依赖文件。您必须为 cpp 文件添加一个额外的条目

```
%.o : %.c
    $(CC) -M $(CFLAGS) -o $*.P $<
    @cp $*.P $*.d; \
            sed -e 's/#.*//' -e 's/^[^:]*: *//' -e 's/ *\\$$//' \
                -e '/^$$/ d' -e 's/$$/ :/' < $*.P >> $*.d; \
            rm -f $*.P
    $(CC) $(CFLAGS) -c $< -o $@

-include *.d 
```

不要忘记在干净的构建上添加删除 *.d 文件

# delphi - TVirtualStringTree - 如何更改 [-] / [+] 按钮？

> ID：10637764
> 
> 赞同：6
> 
> 时间：2012-05-17T14:33:20.503
> 
> 标签：delphi, virtualtreeview, tvirtualstringtree

如何使用我自己的自定义按钮（图像）来替换VST 中的默认`[-]`/按钮？ 我想使用箭头代替（, ），但也支持 RTL 双向模式（, ）。`[+]`
![在此处输入图像描述](../Images/41c0eb596470659537344800b6ca1720.png)![在此处输入图像描述](../Images/be563e5b86a1e536420e34f827badfed.png)![在此处输入图像描述](../Images/64544dad67b05435fc57edee35e6e4ca.png)![在此处输入图像描述](../Images/e7855f7e5884c3a36d81bd9ead9f220d.png)

编辑：我知道`bsTriangle`样式（ButtonStyle）。它不尊重 RTL。我想使用我自己的自定义图像。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T14:59:26.990

这些图像通常不是在 Windows Vista 和 Windows 7 中吗？当您启用主题时，树控件应在这些系统上自动获取它们。

获得接近它的简单方法是将`ButtonStyle`属性设置为`bsTriangle`. 不过，它不会完全是问题中显示的图像。“减号”箭头将指向直下而不是对角线，“加号”箭头将是实心而不是轮廓。

您可以提供自己的位图。将 VT_XPBUTTONMINUS 和 VT_XPBUTTONPLUS 资源更改为您想要的任何图像，并将`ButtonFillMode`属性设置为`fmShaded`.

不过，我看不到基于双向模式更改图像的工具。您可以创建一个覆盖的后代类，`PaintNodeButton`然后绘制您想要的任何内容。从父类复制放置代码。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-17T17:59:50.203

IIRC 你可以通过在 PaintOptions 中包含 toUseExplorerTheme 来获得它。然而，这也改变了选择的外观（更好的 IMNSHO），可能更多。

例如，如果我将 a`TVirtualStringTree`放在表单上并添加以下事件处理程序：

```
procedure TForm1.FormCreate(Sender: TObject);
begin
  VT.RootNodeCount := 10;
  VT.TreeOptions.PaintOptions := VT.TreeOptions.PaintOptions + [toUseExplorerTheme];
  VT.OnInitNode := VTInitNode;
  VT.OnInitChildren := VTInitChildren;
end;

procedure TForm1.VTInitChildren(Sender: TBaseVirtualTree;
  Node: PVirtualNode; var ChildCount: Cardinal);
begin
  ChildCount := 3;
end;

procedure TForm1.VTInitNode(Sender: TBaseVirtualTree;
  ParentNode, Node: PVirtualNode; var InitialStates: TVirtualNodeInitStates);
begin
  Include(InitialStates, ivsHasChildren);
end; 
```

我明白了 ![带有三角形标记的屏幕截图](../Images/0f3d6dea673929beb50b7cb0d0e02909.png)

**编辑：**不幸的是，在我的德语 Windows 7 上设置`Form1.BiDiMode`为`bdRightToLeft`产量 ![带有错误三角形标记的屏幕截图](../Images/31b09a9722030481908b6b14d9630894.png) 。我不知道这在阿拉伯语或希伯来语系统上是否效果更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T14:53:13.810

见`ButtonStyle`物业。不确定它是否尊重 RTL 比迪模式思想。

# javascript - 如何在javascript中禁用表格和iframe

> ID：10637778
> 
> 赞同：0
> 
> 时间：2012-05-17T14:34:21.743
> 
> 标签：javascript

`iFrame.document.getElementById('Formname').disabled = true;` 这不适用于 Netscape 浏览器（FF、Chrome 和 Safari）。有人可以帮忙吗？

或单击按钮时如何禁用整个页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:36:51.590

只能禁用交互式元素，例如表单域和按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:02:44.623

显然 IE 递归地应用 disabled 属性；很好，我不知道。对于其他浏览器，请尝试以下操作：

```
 var formInputs = iFrame.document.getElementById('Formname').getElementsByTagName("INPUT");
   for (var input in formInputs) {
      input.disabled = true;
   } 
```

此代码未经测试，不会禁用表单中的任何 TEXTAREA，添加它们留作练习。

# jquery - 使用可排序时禁用 li 中的部分选择

> ID：10637779
> 
> 赞同：1
> 
> 时间：2012-05-17T14:34:22.937
> 
> 标签：jquery, css

我有以下代码：

```
<style>
    .header { height:20px; width:100px; }
    .content { height:100px; width:100px; }
</style>

<script>
    $(function () {
        $("#sortable").sortable({
            axis: "y", 
            cursor: "move",
            update: function (event, ui) {
                //dosomething
            }
        });
    });
</script>

<ul class="sortable"> 
    <li class="ui-state-default” > <p class=”header”&gt;A</p> <p class=”content”&gt;a content</p> </li> 
    <li class="ui-state-default” ><p class=”header”&gt;B</p> <p class=”content”&gt;b content</p> </li> 
    <li class="ui-state-default” ><p class=”header”&gt;C</p> <p class=”content”&gt;c content</p> </li> 
</ul> 
```

我希望能够在仅`li`拖动`.header`框时进行排序。内容框也应该一起移动。内容框应禁用拖动。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:37:15.893

使用`handle`属性：

```
$("#sortable").sortable({
    axis: "y", 
    cursor: "move",
    handle: ".header",
    update: function (event, ui) {
        //dosomething
    }
}); 
```

# c# - 修改传递给自定义 HtmlHelper 扩展的 HTML 属性

> ID：10637782
> 
> 赞同：2
> 
> 时间：2012-05-17T14:34:32.033
> 
> 标签：c#, asp.net-mvc-3, razor, html-helper

我正在尝试创建一个自定义 HTML 帮助程序扩展方法，该方法接受一个`object htmlAttributes`然后获取传入的值（通过反射）并将它们添加到一个`Dictionary<string, object>`. 不幸的是，尽管[InputExtensions](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.inputextensions.aspx)类中有一个将 a`Dictionary<string, object> htmlAttributes`作为参数的重载，但这不起作用。

问题是剃须刀引擎内部某处没有正确处理该字典（我猜......）。以下是它作为 HTML 输出的方式：

```
<input name="FirstName" id="FirstName" type="text" Values="System.Collections.Generic.Dictionary`2+ValueCollection[System.String,System.Object]" Keys="System.Collections.Generic.Dictionary`2+KeyCollection[System.String,System.Object]" Count="3" Comparer="System.Collections.Generic.GenericEqualityComparer`1[System.String]"/> 
```

这是我的代码：

```
 Dictionary<String, Object> attributes = new Dictionary<String, Object>();
    attributes.Add("readonly", "readonly");
    PropertyInfo[] properties = htmlAttributes.GetType().GetProperties();
    foreach (PropertyInfo propertyInfo in properties)
    {                                        
        if (propertyInfo.Name.Equals("class"))
        {
            attributes.Add("class", String.Format("{0} {1}", "readOnly", propertyInfo.GetValue(htmlAttributes, null)));
        }
        else
        {
            attributes.Add(propertyInfo.Name, propertyInfo.GetValue(htmlAttributes, null));
        }
    }

    genericMethod = methodInfo.MakeGenericMethod(new[] { typeof(TModel), typeof(TProperty) });
    result = genericMethod.Invoke(null, new object[] { helper, expression, (Dictionary<String, Object>)attributes }) as MvcHtmlString; 
```

[PS：这是对这个问题](https://stackoverflow.com/questions/10634988/invoke-an-overloaded-generic-method-on-a-static-class)的跟进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:59:45.780

您应该能够直接调用 TextBoxFor 方法并传入表达式和新的 html 属性。

```
public static IHtmlString Test<TModel, TProperty>(this HtmlHelper<TModel> helper, Expression<Func<TModel, TProperty>> expression, object htmlAttributes)
{
    Dictionary<String, Object> attributes = new Dictionary<String, Object>();
    attributes.Add("readonly", "readonly");
    PropertyInfo[] properties = htmlAttributes.GetType().GetProperties();
    foreach (PropertyInfo propertyInfo in properties)
    {
        if (propertyInfo.Name.Equals("class"))
        {
            attributes.Add("class", String.Format("{0} {1}", "readOnly", propertyInfo.GetValue(htmlAttributes, null)));
        }
        else
        {
            attributes.Add(propertyInfo.Name, propertyInfo.GetValue(htmlAttributes, null));
        }
    }

    //call the input tag
    return helper.TextBoxFor(expression, htmlAttributes);
} 
```

# image - 是否可以使用 Magento Soap API V2 链接到现有产品图像？

> ID：10637786
> 
> 赞同：1
> 
> 时间：2012-05-17T14:34:50.590
> 
> 标签：image, api, magento, soap

我正在使用 Magento 提供课程注册。我正在使用 SOAP API V2 将类“克隆”到新日期。

我想重新使用现有的类图像，因为重新上传相同的图像数百次似乎很愚蠢。

是否可以通过 API V2 链接到现有图像？

*catalogProductAttributeMediaCreate* () 似乎不想用我试过的方法来做。 *catalogProductAttributeMediaUpdate* () 也不起作用，因为尚未为该产品创建图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T08:42:55.697

试试这个。

```
$proxy = new SoapClient('http://magentohost/api/v2_soap/?wsdl'); // TODO : change url
$sessionId = $proxy->login('apiUser', 'apiKey'); // TODO : change login and pwd if necessary

$result = $proxy->catalogProductAttributeMediaInfo($sessionId, '2', '/b/l/blackberry8100_2.jpg');
var_dump($result); 
```

响应 ：

```
array
  'file' => string '/b/l/blackberry8100_2.jpg' (length=25)
  'label' => string '' (length=0)
  'position' => string '1' (length=1)
  'exclude' => string '0' (length=1)
  'url' => string 'http://magentohost/media/catalog/product/b/l/blackberry8100_2.jpg' (length=71)
  'types' =>
    array
      0 => string 'image' (length=5)
      1 => string 'small_image' (length=11)
      2 => string 'thumbnail' (length=9) 
```

# objective-c - 使用 imageView.animationImages 属性为 UIButton 设置动画

> ID：10637787
> 
> 赞同：1
> 
> 时间：2012-05-17T14:34:51.930
> 
> 标签：objective-c, animation, uibutton, core-animation

我正在尝试做一个简单的 2 帧动画`UIButton`。我知道使用该`UIButton's` `imageView.animationImages`属性可以做到这一点-将其设置为数组并为其设置动画。但是当我这样做时，什么都没有出现。仅供参考，我已经检查了 buttonImages 数组，它确实包含我想要显示的图像。有什么想法我哪里出错了吗？

```
NSArray *buttonImages = bookDoc.book.buttonImages;
UIImage *bookImage = bookDoc.thumbImage;
UIButton *bookButton = [UIButton buttonWithType:UIButtonTypeCustom];
bookButton.frame = CGRectMake(0, 0, bookImage.size.width, bookImage.size.height);
//[bookButton setBackgroundImage:bookImage forState:UIControlStateNormal];
bookButton.imageView.animationImages = buttonImages;
bookButton.imageView.animationDuration = 0.5;
bookButton.imageView.animationRepeatCount = INFINITY;
[bookButton addTarget:self action:@selector(bookButtonPressed:) forControlEvents:UIControlEventTouchUpInside];
[bookButton.imageView startAnimating]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T12:10:16.640

的用 (0,0,0,0)`imageView`的`UIButton`帧初始化，即它是不可见的（实际上它也被隐藏了）。

您可以自己配置`frame`和`hidden`属性：

```
bookButton.imageView.frame = CGRectMake(0, 0, 20, 20);
bookButton.imageView.hidden = NO; 
```

或者，更简单的是使用动画的第一张图片

```
[bookButton setImage:buttonImages[0] forState:UIControlStateNormal]; 
```

这将取消隐藏 imageView 并设置其正确的框架。

一旦 imageView 可见，它就会动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T19:21:46.390

我认为我从未尝试将图像保存到按钮的 imageView 属性。我一直使用 setImage:forState 或 setBackgroundImage:forState。

我的猜测是按钮正在设置它的图像视图本身的图像属性，使用（nil）图像作为默认图像状态。

您是否尝试将 button.imageView.image 属性设置为静态图像以查看是否有效？正如我所说，我的猜测是该按钮将覆盖您使用 setImage:forState 中提供的设置提供的任何图像（或 nil，如果您从未为当前状态提供图像。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-18T02:23:13.390

我刚刚写了这个，它有效。它的缺点是我在 IB 中设置的突出显示的图像似乎不起作用。Xcode 5\. 也许禁用的图像等也不起作用。如果你不在乎，这行得通。

```
+(void)animatemjad:(UIButton*)button offimagenames:(NSArray*)imagenames startdelay:(const NSTimeInterval)STARTDELAY {
    UIImageView* imageview = [button imageView];
    NSMutableArray* images = [NSMutableArray array];
    for (NSString* imagename in imagenames) {
        UIImage* image = [UIImage imageNamed:imagename];
        NSAssert(image != nil, @"Failed loading imagename: %@", imagename);
        if (image == nil)
            return; // return out here... whatever
        [images addObject:image];
    }
    imageview = [[UIImageView alloc] initWithImage:images.firstObject];
    [button addSubview:imageview];
    imageview.animationImages = images;
    imageview.animationDuration = 5;
    imageview.animationRepeatCount = 0;
    [imageview performSelector:@selector(startAnimating) withObject:nil afterDelay:STARTDELAY]; // [imageview startAnimating];
} 
```

# java - JFrame中的JPanel

> ID：10637788
> 
> 赞同：1
> 
> 时间：2012-05-17T14:34:53.383
> 
> 标签：java, swing, jframe, jpanel, tetris

我刚刚开始学习 Java，现在我正在为俄罗斯方块制作 GUI。我想要这样的东西： [1 http://desmond.imageshack.us/Himg846/scaled.php?server=846&filename=tetrisf.png&res=landing](http://desmond.imageshack.us/Himg846/scaled.php?server=846&filename=tetrisf.png&res=landing)

但我得到：
[![2](../Images/143f37409ca66c523f4ff6fab3e4a406.png)](https://i.stack.imgur.com/ohSd3.png)

编辑：有人可以告诉我如何解决这个问题吗？

它是 TetrisFrame（扩展 JFrame）构造函数的一部分：

```
setLayout(new BorderLayout());

/* adding a panel of the left side */
left = new TetrisPanel(Constants.WIDTH, Constants.HEIGHT);
getContentPane().add(BorderLayout.LINE_START, left);
left.setSize(Constants.WIDTH * Constants.BLOCK_SIZE,
             Constants.HEIGHT * Constants.BLOCK_SIZE);

/* adding a panel on the right side */
JPanel right = new JPanel();
getContentPane().add(BorderLayout.LINE_END, right);

nextPiecePreview = new TetrisPanel(4 , 4);
points = new JLabel("0");

right.add(nextPiecePreview);

setSize(Constants.WIDTH * Constants.BLOCK_SIZE + Constants.RIGHT_MENU_SIZE,
        Constants.HEIGHT * Constants.BLOCK_SIZE + Constants.BOTTOM_MARGIN);

setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
setResizable(false);
setVisible(true); 
```

它是我的 TetrisPanel 课程的一部分：

```
public void paintComponent(Graphics g) { 
  super.paintComponent(g);
  setBounds(0, 0, Constants.BLOCK_SIZE * width ,
            Constants.BLOCK_SIZE * height);

  for(int i = 0; i < width; ++i) {
    for(int j = 0; j < height; ++j) {
      drawSquare(g, i, j, colorsMap.get(BlocksType.Z_SHAPED));
    }
  }
}

private void drawSquare (Graphics g, int x_temp, int y_temp, Color color) {
  int x = x_temp * Constants.BLOCK_SIZE;
  int y = y_temp * Constants.BLOCK_SIZE;

  g.setColor(color);
  g.fillRect(x + 1,  y + 1, Constants.BLOCK_SIZE - 2, Constants.BLOCK_SIZE - 2);

  g.setColor(color.brighter());

  g.drawLine(x, y + Constants.BLOCK_SIZE - 1, x, y);
  g.drawLine(x, y, x + Constants.BLOCK_SIZE - 1, y);

  g.setColor(color.darker());
  g.drawLine(x + 1, y + Constants.BLOCK_SIZE - 1,
         x + Constants.BLOCK_SIZE - 1, y + Constants.BLOCK_SIZE - 1);

  g.drawLine(x + Constants.BLOCK_SIZE - 1, y + Constants.BLOCK_SIZE - 1,
             x + Constants.BLOCK_SIZE - 1, y + 1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T16:27:01.133

`TetrisPanel`是主*面板*，那么您应该使用`BorderLayout.CENTER`而不是添加它`BorderLayout.LINE_START`。

并且，参数正确的顺序是`getContentPane(component, layoutOrientation)`；

下面是一个布局示例：

```
public class GuiExample extends JPanel {
    public GuiExample() {
        JPanel gamePanel = new JPanel();
        gamePanel.setBackground(Color.GREEN);
        gamePanel.setPreferredSize(new Dimension(300, 400));

        JPanel infoPanel = new JPanel();
        infoPanel.setBackground(Color.WHITE);

        JPanel previewPanel = new JPanel();
        previewPanel.setBackground(Color.BLUE);
        previewPanel.setPreferredSize(new Dimension(100, 100));

        JPanel pointsPanel = new JPanel();
        pointsPanel.setBackground(Color.RED);
        pointsPanel.setPreferredSize(new Dimension(100, 50));

        infoPanel.setLayout(new BoxLayout(infoPanel, BoxLayout.Y_AXIS));
        infoPanel.setPreferredSize(new Dimension(100, 400));
        infoPanel.add(previewPanel);
        infoPanel.add(pointsPanel);

        add(gamePanel, BorderLayout.CENTER);
        add(infoPanel, BorderLayout.EAST);
    }
    public static void main(String s[]) {
        JFrame frame = new JFrame("Java Rules");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setContentPane(new GuiExample());
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

![代码生成的JFrame](../Images/106a5ae9bfddb95f461331d04257d68c.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T15:39:45.350

Just a side note, when you override `paintComponent(...)` method of the said `JPanel/JComponent` make it a customary habbit of overriding it's `getPreferredSize()` as well. When using a Layout Manager, prefer not to use any `setXxXSize()` methods of any sorts. Let Layout Manager handles that aspect. Is this what you looking for :

```
import java.awt.*;
import javax.swing.*;

public class Tetris extends JFrame
{
    private void createAndDisplayGUI()
    {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        GamePanel gp = new GamePanel();
        gp.createGUI();

        JPanel rightPanel = new JPanel();
        rightPanel.setLayout(new BorderLayout());
        PreviewPanel pp = new PreviewPanel();
        pp.createGUI();

        JPanel pointsPanel = new JPanel();
        pointsPanel.setOpaque(true);
        pointsPanel.setBackground(Color.DARK_GRAY);
        JLabel pointsLabel = new JLabel("Points");
        pointsPanel.add(pointsLabel);
        rightPanel.add(pp, BorderLayout.PAGE_START);
        rightPanel.add(pointsPanel, BorderLayout.CENTER);

        getContentPane().add(gp, BorderLayout.CENTER);
        getContentPane().add(rightPanel, BorderLayout.LINE_END);

        pack();
        setLocationByPlatform(true);
        setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new Tetris().createAndDisplayGUI();
            }
        });
    }
}

class GamePanel extends JPanel
{
    public Dimension getPreferredSize()
    {
        return (new Dimension(500, 500));
    }

    protected void createGUI()
    {
        setOpaque(true);
        setBackground(Color.BLUE);
    }
}

class PreviewPanel extends JPanel
{
    public Dimension getPreferredSize()
    {
        return (new Dimension(200, 200));
    }

    protected void createGUI()
    {
        setOpaque(true);
        setBackground(Color.WHITE);
        JLabel label = new JLabel("Preview of the next Block.");
    }
} 
```

And the output is :

![TETRIS OUTPUT](../Images/b1a20ec4dafa515c2ffc13188a436923.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T14:39:09.067

我真的没有在任何地方看到任何问题，但我认为您的问题是，“为什么我的 GUI 看起来不像我期望的那样？” 或类似于“如何修复布局？”的内容。

您可以做的是获得一个 GUI Builder，例如 NetBeans，并在其中制作您的 GUI。然后像上面那样使用您的代码操作组件。至少这样你就可以保证你想要的 GUI 布局。剩下的就是功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T14:45:24.810

`BorderLayout.LINE_START`不要使用and添加左右面板，而是`BorderLayout.LINE_END`尝试使用`BorderLayout.CENTER`and `BorderLayout.EAST`（分别）。

# facebook - 在某些情况下，自定义 facebook 应用程序无法在具有 IE 9 的 PC 上运行

> ID：10637789
> 
> 赞同：-4
> 
> 时间：2012-05-17T14:34:53.700
> 
> 标签：facebook, internet-explorer, internet-explorer-9, facebook-apps

我为 Facebook 开发了一个应用程序，这是一个非常简单的竞赛。但是由于某些奇怪的原因，它适用于所有浏览器的mac，但至少不适用于PC IE 9，但更奇怪的是，在某些PC上它确实适用于IE 9。我只是无法解决这个问题，我找不到类似的问题。

有没有人遇到过同样的问题，你是如何解决的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:36:24.360

也许与http和https有关。对于页面选项卡应用程序，您还需要为启用了 https 的用户指定 url。

# facebook - 从 facebook api 或使用 socialauth-net 获取用户电子邮件

> ID：10637790
> 
> 赞同：0
> 
> 时间：2012-05-17T14:34:55.387
> 
> 标签：facebook, facebook-graph-api

我在[这里](http://code.google.com/p/socialauth-net/)使用 socialauth-net来允许用户登录我的网站。除了最重要的事情......电子邮件之外，我得到了所有数据。我有用户令牌和用户名，有没有办法也可以获取电子邮件地址？我将用户和朋友权限设置为允许在 facebook 上发送电子邮件。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T23:17:44.593

老问题，只是想我还是会回答。

我认为您的设置并不重要。这是您的联系人是否允许显示和导出他们的地址。

会是这样吗？如今，传播电子邮件地址是一个非常敏感的话题，大多数提供商都避免将它们暴露给第三方应用程序。

# export - 如何将内部动画映射到 Flash 文件中的图层？

> ID：10637792
> 
> 赞同：0
> 
> 时间：2012-05-17T14:35:00.907
> 
> 标签：export, flash, layer

问题是我在其他一些 MC（如**head**或**body**）`Flash MovieClips`中制作了这些电影的某些部分并制作了动画（如眨眼动画） 现在当我尝试将它们导出为 PNG 序列时，它不适用......因为在主阶段只有一帧，当我导出为 PNG 序列时，它只导出一帧...... 有没有办法将所有动画映射到主时间线中的某些图层或任何其他方式将它们导出为 Image as它播放正常吗？

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:44:52.323

[是的，您可以使用Google Swiffy](http://www.google.com/doubleclick/studio/swiffy/)转换嵌套动画

我制作了一个只有一帧长但有一个嵌套的 MovieClip 来证明这一点：

查看[示例 html 输出](http://swiffypreviews.googleusercontent.com/view/o/62f199c7-2599-463b-9acb-c210ca5c7ece/test.html)****

# c# - 通过 CSV 查找具有特定标题的列

> ID：10637797
> 
> 赞同：2
> 
> 时间：2012-05-17T14:35:12.217
> 
> 标签：c#, csv, filestream, seek

我正在开发一个程序，您可以从 csv 文件中选择一个标题（它最初会解析标题）并且我希望用户能够获取列的数据而无需读取整个文件。（制作一个列表字符串数组并提取字符串数组索引以获取信息，这是简单易行的事情）。

有没有办法我可以使用 seek 来做到这一点？也许搜索一个字符串（这将是标题）并在其列中获取信息。

这是 getHeader 功能，以防万一它有帮助......

```
private string[] getHeader(string path)//gets the headers from the file path specified.
    {          
        List<string> row = new List<string>();

        using (StreamReader readFile = new StreamReader(path))
        {          
            row = (readFile.ReadLine().Split(',').ToList());                
        }

        return row.ToArray();

    } 
```

（列表和数组只是为了绕过最初为数组设置大小......）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:43:06.397

### 不可能的。

搜索可以到文件中的一个确定位置。如果您有一个具有巨大记录长度和少量记录的固定长度记录 (SDF/COBOL) 文件，这将是一个不错的主意。

不幸的是，.csv 根据定义是可变长度记录。您只能根据在记录末尾点击 cr/lf 来判断一条记录在哪里停止和开始。

即使对于大多数固定记录格式，这也不是一个好主意。由于缓冲，操作系统无论如何都会读取整个文件，因为您将寻求比操作系统预加载更小的数量。

我明白你为什么要这样做；直觉上，听起来会更快。虽然您应该始终牢记速度设计您的代码，但这已经足够低级，可以称为“过早的优化” - 谷歌。基本上，您必须通过编写它来向自己证明它运行缓慢，然后，当您看到它对功能造成巨大障碍时，您可以进行优化。

## 不要自己解析！

MS对此有一个总成。`Microsoft.VisualBasic.FileIO.TextFieldParser`. 是的，您可以将它与 C# 一起使用（即使下面的示例是在 VB 中，您也可以弄清楚您需要做什么）。不要为包含对 VB 的引用而感到自豪。口袋里的时间和金钱很重要，不能说“我不会用 10 英尺长的杆子碰任何 VB”。更改是程序集已经在您的目标 PC 上。唯一需要注意的是您是否有程序安装包下载大小问题，或者正在部署到非 PC 平台。

```
 Using Reader As New Microsoft.VisualBasic.FileIO.TextFieldParser(CSVPath)

        Reader.TextFieldType = Microsoft.VisualBasic.FileIO.FieldType.Delimited
        Reader.Delimiters = New String() {","}
        Reader.TrimWhiteSpace = True
        Reader.HasFieldsEnclosedInQuotes = True

        While Not Reader.EndOfData
            Try
                Dim st2 As New List(Of String)
                st2.addrange(Reader.ReadFields())
                If iCount > 0 Then ' ignore first row = field names
                    Dim p As New clsPerson
                    p.CSVLine = st2
                    While p.CSVLine.Count < 15
                        p.CSVLine.Add("")
                    End While
                    p.FirstName = st2(1).Trim
                    If st2.Count > 2 Then
                        p.MiddleName = st2(2).Trim
                    Else
                        p.MiddleName = ""
                    End If
                    p.LastNameSuffix = st2(0).Trim
                    If st2.Count >= 6 Then
                        p.TestCase = st2(5).Trim
                    End If
                    If st2(3) > "" Then
                        p.CertsFromCase.Add(st2(3))
                    End If
                    cases.Add(p)
                Else
                    stFirstRow = CatLine(st2.ToArray)
                    Dim st3(6) As String
                    For kk As Integer = 0 To Math.Min(st2.Count - 1, 5)
                        st3(kk) = st2(kk)
                    Next
                    If 0 = InStr(st3(0), "Last Name", CompareMethod.Text) Or _
                     0 = InStr(st3(1), "First Name", CompareMethod.Text) Or _
                     0 = InStr(st3(2), "Middle Name", CompareMethod.Text) Or _
                     0 = InStr(st3(3), "Policy", CompareMethod.Text) Or _
                     0 = InStr(st3(5), "Test Case", CompareMethod.Text) Then
                        stFirstRow = "Last Name,First Name,Middle Name,Policy,,Test Case #" & vbCrLf & stFirstRow
                    End If
                End If
            Catch ex As Microsoft.VisualBasic.FileIO.MalformedLineException
                MsgBox("Line " & ex.Message & " is not valid and will be skipped.")
            End Try
            iCount += 1
        End While
    End Using 
```

# c# - 返回 var 类型的变量

> ID：10637798
> 
> 赞同：2
> 
> 时间：2012-05-17T14:35:14.647
> 
> 标签：c#

我有一些方法，例如：

```
 public VAR GetAllPosts()
    {
        var post = from p in _db.Posts  select p;
        return post;
    } 
```

如何返回 var 类型的变量？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T14:36:24.367

您可以拥有它`object`，但是您仍然必须强制转换它才能正确使用它。`dynamic`是另一种选择，但可能比它的价值更麻烦。

我想你可能想要`IQueryable<T>`的`T`是`Posts`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-17T14:38:59.307

根据您的代码，您知道它将是 Posts 的枚举，所以返回

```
public IEnumerable<Posts> GetAllPosts()
    {
        var post = from p in _db.Posts  select p;
        return post;
    } 
```

或者

```
public IEnumerable<Posts> GetAllPosts()
    {
        return from p in _db.Posts  select p;
    } 
```

如果你想硬核，你可以使用这样的东西，这是 T 的泛型类型，你必须调用具有所需类型的方法，并在其中验证类型并做你喜欢的事情。

```
 public List<T> GetData<T>()
  {
      //Validate the type and do something
      if (typeof(T) == typeof(MyClass))
      {
         List<MyClass> lst = new List<MyClass>();
         lst.Add(new MyClass { ClassProperty = "Value" });

         return lst as List<T>;
     }
     else // do something else
     {
       return null;
     }
   } 
```

要调用此方法，您需要传递正确的类型

```
List<MyClass> list = GetData<MyClass>(); 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-17T14:38:27.543

`var`不是类型，所以不能返回。

如果您不确定返回类型，请返回`object`（如 Daniel 建议的那样），如果它可以多于一种类型，请返回其基本类型（如果有）。

在您的具体情况下，您*似乎*正试图`IEnumerable<T>`返回`_db.Posts`

# asp.net - Ninject 程序集与引用的程序集不匹配

> ID：10637799
> 
> 赞同：9
> 
> 时间：2012-05-17T14:35:15.413
> 
> 标签：asp.net, ninject, nuget, project-reference, assembly-references

**设置：**

*   ASP.NET MVC3
*   忍者 v2.2.1.4
*   忍者 v3.0.0.15
*   Ninject.MVC3 v3.0.0.6
*   Ninject.Web.Common v3.0.0.7

使用 NuGet，我的 UnitTest 项目引用了 Ninject v2.2.1.4

我的 Web 项目引用了 Ninject v3.0.0.15、Ninject.MVC3 和 Ninject.Web.Common

**问题：**

在我的 web 项目的 bin 文件夹中打开 win explorer，我构建了我的解决方案，我可以看到 Ninject v2.2.1.4 已复制到我的 web 项目的 bin 目录中。然后被 Ninject v3.0.0.15 取代。

当我按 F5 进行调试时，Ninject.dll v3.0.0.15 被 Ninject v2.2.1.4 替换，导致以下错误：

*无法加载文件或程序集 'Ninject, Version=3.0.0.0, Culture=neutral, PublicKeyToken=c7192dc5380945e7' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）*

是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T05:03:05.353

一些想法：

1.  只有在您的调试版本中，您才间接引用了 v2 Ninject 版本。举个例子，我猜当您进行调试构建时，您会构建您的测试项目，而发布构建不会构建您的测试项目。
2.  当你在构建时，你有没有注意到当 v2 DLL 被放入 bin 时正在构建什么项目？然后，您将能够找出引用 v2 构建的项目并能够缩小搜索范围（即，如果*不是*测试项目，答案会变得更加明显）。
3.  在不同项目中引用多个版本绝不是一个好主意。
4.  您是否检查了您的 Web.config 和 App.config 引用所指向的内容？

# javascript - jQuery Deferred，无法在链中获取值

> ID：10637800
> 
> 赞同：0
> 
> 时间：2012-05-17T14:35:17.800
> 
> 标签：javascript, jquery, jquery-deferred

buildMyUrl 的结果在调用函数中始终未定义。我不确定链接这些函数我做错了什么：

```
var buildMyUrl = function (callback)
{   
    var param;

    var addParams = function (domainUrl)
    {
        domainUrl += "page.aspx?";
        domainUrl += "Param1=";
    };

    $.when(self.buildDomainUrl()).then(addParams);
}; 
```

`buildDomainUrl`返回一个 JQuery 承诺并添加参数工作正常。现在我有一个想要使用结果的函数`buildMyUrl`：

```
 var buildAPageUrl  = function ()
    {
        var dfd = $.Deferred();

        var addCalendarPage = function (domainUrl)
        {
             dfd.resolve(domainUrl += "/Calendar.aspx?");
        };

   // Here lies the problem (buildMyUrl is undefined)
        $.when(buildMyUrl()).then(addCalendarPage);

        return dfd.promise();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:39:41.780

以下作品基于 Kevin B 的评论：

```
var buildMyUrl = function (callback)
{   
    var dfd = $.Deferred();
    var param;

    var addParams = function (domainUrl)
    {
        domainUrl += "page.aspx?";
        domainUrl += "Param1=";
        dfd.resolve();
    };

    $.when(self.buildDomainUrl()).then(addParams);
    return dfd.promise();
}; 
```

# javascript - 在 input.checked=true/false _without_ jQuery 上触发事件

> ID：10637801
> 
> 赞同：11
> 
> 时间：2012-05-17T14:35:22.560
> 
> 标签：javascript, html

考虑以下代码（[http://jsfiddle.net/FW36F/1/](http://jsfiddle.net/FW36F/1/)）：

```
<input type="checkbox" onchange="alert(this.checked)">
<button onclick="document.getElementsByTagName('input')[0].checked=!document.getElementsByTagName('input')[0].checked;">toggle</button> 
```

如果您单击复选框，您会收到一条警报，告诉您它是否已被选中。伟大的。但是，如果单击切换按钮，复选框会更改为选中状态，但不会触发 onchange 事件。

本质上，复选框的 onchange 仅在用户实际单击复选框时触发，*而不是*在通过 JavaScript 更改复选框时触发。在 IE、FF 和 Chrome 中都是如此。看来这种行为也符合规范。

但是，如果由于某种原因复选框的选中状态发生更改，我真的需要某种事件来触发。这可能吗？

哦，是的，而且**jQuery 是不允许**的。请不要使用基于 setTimeout/setInterval 的解决方案...

**更新：**另外，我应该明确一点，上面的代码仅用于说明。在实际代码中，我们需要确保复选框的状态是选中或未选中——而不仅仅是切换它。也许这将是更好的代码来说明：

```
<input type="checkbox" onchange="alert(this.checked)">
<button onclick="document.getElementsByTagName('input')[0].checked=true;">check</button> 
<button onclick="document.getElementsByTagName('input')[0].checked=false;">un check</button> 
```

此外，在我们无法完全控制的其他区域中可能存在代码，这可能会执行简单的 .checked=true/false —— 我们希望确保我们也能看到这一点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T14:46:09.513

*即使使用您的update*，现有答案也可以正常工作。只是要聪明一点，如果不需要，不要调用 click 。另外，请不要使用内联 JS。10年前还可以。

```
<input type="checkbox" onchange="alert(this.checked)">
<button id='check'>check</button> 
<button id='uncheck'>uncheck</button>

document.getElementById('check').onclick = function() {
   if (!this.checked) {
      this.click();
   }
} 
```

如果需要在脚本更改值时进行修改，在 Firefox 中，可以使用[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/watch](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/watch)

这里的例子[http://jsfiddle.net/PPuZ8/](http://jsfiddle.net/PPuZ8/)

```
// In FF $ is a shortcut for document.getElementById
// It doesn't fire when set from the UI, you have to use a regular handler for that
$('cb').watch("checked", function(){
   console.log('Checked state changed from script', arguments);
   return true;
}); 
```

对于 IE，您可以使用`onpropertychange` [http://msdn.microsoft.com/en-us/library/ie/ms536956(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms536956(v=vs.85).aspx) （感谢 jivings 的提醒）

示例：http: [//jsfiddle.net/PPuZ8/1/](http://jsfiddle.net/PPuZ8/1/)

```
document.getElementById('cb').onpropertychange = function() {    
    if (event.propertyName == 'checked') {
       console.log('Checked state changed onproperty change');    
    }
}; 
```

对于其他浏览器，您必须使用 setInterval/setTimeout 进行轮询

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T14:38:23.677

让切换按钮实际*单击*复选框：

```
<input type="checkbox" onchange="alert(this.checked)">
<button onclick="document.getElementsByTagName('input')[0].click()">
  toggle
</button> 
```

如果您希望对复选框进行任何更改以通知您其新位置，那么我将创建一个用于更改复选框值的全局方法，并将其作为代理处理：

```
<script>
function toggleCB( state ) {
  var cb = document.getElementById("cb");
  arguments.length ? cb.checked = state : cb.click() ;
  return cb.checked;
}
</script>
<input id="cb" type="checkbox" />
<input type="button" onClick="alert( toggleCB(true) )" value="Check" />
<input type="button" onClick="alert( toggleCB(false) )" value="Uncheck" />
<input type="button" onClick="alert( toggleCB() )" value="Toggle" />​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

现在，只要您设置或切换复选框，您就会恢复选中状态。

最后一件事，我会避免使用该`onClick`属性，而是从您的 JavaScript 中绑定点击事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T14:38:15.223

采用[`click()`](https://developer.mozilla.org/en/DOM/element.click)

```
<button onclick="document.getElementsByTagName('input')[0].checked=!document.getElementsByTagName('input')[0].click();">toggle</button> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-17T14:46:54.017

oninput 是您需要处理的事件... [https://developer.mozilla.org/en/DOM/DOM_event_reference/input](https://developer.mozilla.org/en/DOM/DOM_event_reference/input)

# php - PHP复选框邮件程序foreach错误

> ID：10637804
> 
> 赞同：0
> 
> 时间：2012-05-17T14:35:34.803
> 
> 标签：php, javascript, html

我已经制作了一个表格，它从 xml 文件中获取其中的复选框信息。现在我想用 php 邮寄该表单，但我收到“警告：第 8 行的 mailer.php 中为 foreach() 提供的参数无效”错误。这是我表单中的复选框部分，用 javascript 编写：

```
if (window.XMLHttpRequest)
        {// IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp=new XMLHttpRequest();
        }
    else
        {// IE6, IE5
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
xmlhttp.open("GET","dehoek.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML; 
x=xmlDoc.getElementsByTagName("product");

for (var i=0;i<x.length;i++)
{ 
document.write('<input name="check[]" id="checkbox'+i+'" type="checkbox" value="'+(x[i].getElementsByTagName("naam")[0].childNodes[0].nodeValue)+'" /><label for="checkbox'+i+'">'+(x[i].getElementsByTagName("naam")[0].childNodes[0].nodeValue)+' &nbsp; €'+(x[i].getElementsByTagName("prijs")[0].childNodes[0].nodeValue)+' </label>');
} 
```

这是我的php：

```
$aan =  $_POST['to']; 
$onderwerp =  "Bestelling"; 
$naam =  $_POST['naam']; 
$email =  $_POST['email']; 
$message =  "Producten:"; 

foreach($_POST['check'] as $value) { 
$check_msg .= "$value\n";
} 

$body =  "From: $naam\n E-Mail: $email\n Message:\n $message\n $check_msg"; 

echo  "Uw bestelling is succesvol verstuurd."; 
mail($aan,  $onderwerp, $body); 
```

我希望你们当中有人知道我的代码有什么问题，因为我真的不明白。

在此先感谢 Jan Thiemen

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:36:55.580

您目前正在您的 PHP 脚本中尝试从以下内容读取`$_POST`：

```
foreach($_POST['check'] as $value) 
```

[**但是您的页面正在使用HTTP GET**](http://en.wikipedia.org/wiki/GET_%28HTTP%29#Request_methods)方法进行请求：

```
xmlhttp.open("GET","dehoek.xml",false); 
```

因此，没有这样的东西`$_POST['check']`——因为仅在使用[**HTTP POST**](http://en.wikipedia.org/wiki/POST_%28HTTP%29)而不是 GET`$_POST`请求页面时包含数据。[](http://en.wikipedia.org/wiki/POST_%28HTTP%29)

 **如果您使用 HTTP GET 请求您的页面，您必须在 PHP 脚本中从 读取[**`$_GET`**](http://fr.php.net/manual/en/reserved.variables.get.php)，而不是从[**`$_POST`**](http://fr.php.net/manual/en/reserved.variables.post.php).**

# javascript - 如何使用 JavaScript 或 jQuery 查找 .swf 文件的持续时间

> ID：10637805
> 
> 赞同：0
> 
> 时间：2012-05-17T14:35:39.810
> 
> 标签：javascript, jquery

我在网页中嵌入了一个 .swf 文件，我想在 .swf 文件播放完毕时引发一个事件。搜索谷歌后，我知道直接在 JavaScript 中是不可能的。但我假设计算 .swf 文件的持续时间并根据时间设置计时器可能会给我大致的结果。
但我不知道有任何可用的 API。您能否告诉我是否有任何 api 可用，并建议我是否有更好的替代解决方案来实现相同的目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:37:48.280

您对 swf 代码有任何控制权吗？如果是这样，ExternalInterface 可以帮助您。否则，我不相信您可以从 swf 文件中获取持续时间，因为它们不是特定于线性的格式。

# python - python三引号字符串中的替换字符串突出显示

> ID：10637811
> 
> 赞同：-1
> 
> 时间：2012-05-17T14:35:49.420
> 
> 标签：python, notepad++

我在某些项目中使用基于 python 的 Google App Engine，为了编写 Webapps，我必须使用 % 运算符大量使用 python 的字符串替换功能。

我使用 Notepad++ 作为我的编辑器。我需要一些在“””三引号字符串中突出显示替换标签的机制，以便我可以轻松地跟踪它们，如果它们嵌入在字符串中。例如，下面是一个 python 三引号字符串，我正在使用：

```
form    =   """
        <form   method="post"   >
            When is you Birthday?
            <br>
            <label> Day     <input  type="text" name="dd" value = "%(day)s">    </label>
            <label> Month   <input  type="text" name="mm" value = "%(month)s">  </label>
            <label> Year    <input  type="text" name="yy" value = "%(year)s">   </label>
            <div    style="color: red"> %(error)s </div>
            <br>
            <br>
            <input  type="submit"   value="Submit"  >
        </form> 
```

"""

现在，如果没有正确突出显示该字符串中嵌入的所有 %()s 模式，我很难判断。这个三引号字符串中总共嵌入了 4 个这样的模式。（日、月、年和错误）

如果有人知道此问题的解决方法，请告诉我。

问候 Vaid，阿布舍克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:48:08.613

您将需要尝试调整您的记事本++ 样式/“语言”以满足您的需求。

您可以在 langs.xml 和 style.xml 中找到基础知识，然后您还可以查看[用户定义](http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=User_Defined_Language_Files)的语言文件，并且可能有人已经为另一种语言完成了它。我不确定 Notepad++ 是否可以像这样动态地执行正则表达式来检查匹配 %(*)s 的模式，例如，所以你需要修补一些并用谷歌搜索一些。

# javascript - Extjs 菜单使用覆盖插入新项目

> ID：10637813
> 
> 赞同：2
> 
> 时间：2012-05-17T14:35:57.250
> 
> 标签：javascript, extjs, menu, items

我有一个这样定义的菜单：

```
Ext.define('MyApp.FileBrowserContextMenu', {
    extend: 'Ext.menu.Menu',

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'menuitem',
                    text: 'Edit',
                    listeners: {
                        click: {
                            fn: me.onMenuitemClick,
                            scope: me
                        }
                    }
                },
            ]
        });

        me.callParent(arguments);
    },

    onMenuitemClick: function(item, e, options) {
        var server = this.record;
        var win = Ext.create('widget.ServerWindow', {
            record: server
        });
        win.show();
    }

}); 
```

我想在定义之后添加新项目，所以我尝试这样：

首先我定义了新的 MenuItem：

```
Ext.define('MyApp.GitMenuItem', {
    extend: 'Ext.menu.Item',
    alias: 'widget.gitmenuitem',

    text: 'Git',

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            menu: {
                xtype: 'menu',
                items: [
                    {
                        xtype: 'menuitem',
                        text: 'Commit',
                        listeners: {
                            click: {
                                fn: me.onMenuitemClick,
                                scope: me
                            }
                        }
                    },
                ]
            }
        });

        me.callParent(arguments);
    },

    onMenuitemClick: function(item, e, options) {

    },

}); 
```

然后我尝试附加新的菜单项：

```
Ext.override(MyApp.FileBrowserContextMenu, {
    initComponent: function () {
        var me = this;
        this.callParent();
        me.items.items.push(Ext.create('widget.gitmenuitem'));
    }
}); 
```

它似乎有效，因为出现了新的 MenuItem，但是当我过去时，应该出现新的项目，但我收到此错误：

未捕获的类型错误：无法设置未定义的属性“activeChild”

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T16:06:49.987

通常的方法是 add 方法：`menu.add(menuItem)`.

# winforms - 绑定到组合框 SelectedItem 时，仅在失去焦点时才通知更改。选择更改时如何通知？

> ID：10637815
> 
> 赞同：7
> 
> 时间：2012-05-17T14:36:08.470
> 
> 标签：winforms, binding

我已经使用

```
cmbPeriod.DataBindings.Add("SelectedItem", Presenter, "SelectedDate", true, DataSourceUpdateMode.OnPropertyChanged); 
```

但它只会在我退出控件时触发绑定模型，我希望它在用户做出新选择时触发。

**编辑：**好的，所以我尝试使用`SelectedValue`而不是绑定并保留`ValueMember`as `null`。这具有在组合框使用正确对象更改时立即更新源的效果，但是现在组合框忽略来自源的更新！

我看到它在运行时请求绑定，并且我的源属性返回正确的对象，该对象与组合框将在更改时更新源的类型相同。啊! 很近：（

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-23T08:16:36.310

```
cmbPeriod.DataBindings.Add("SelectedValue", Presenter, "SelectedDate", true, DataSourceUpdateMode.OnPropertyChanged); 
```

绑定到 SelectedValue 对更改起作用

# python - lxml有离线安装程序吗？

> ID：10637818
> 
> 赞同：1
> 
> 时间：2012-05-17T14:36:14.010
> 
> 标签：python, windows, lxml

我有一台 Windows 7 机器连接到没有 Internet 访问的专用网络。对于我正在编写的一些脚本，我需要在这台机器上安装 lxml。lxml有离线安装程序吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T14:45:44.413

[lxml-2.3](http://pypi.python.org/pypi/lxml/2.3)具有`egg`适用于 32 位和 64 位的 Windows 以及 Python 2.6、2.7、3.1 和 3.2 的可下载包。

如果您想要最新的`lxml-2.3.4`，您可以从[加州大学尔湾分校的下载页面](http://www.lfd.uci.edu/~gohlke/pythonlibs/#lxml)获得它们。有适用于 32 位和 64 位版本的 Python 2.5 - 3.2 的鸡蛋和普通 Windows 安装程序。

如果您下载文件，您可以使用[from](http://pypi.python.org/pypi/distribute)`egg`安装它们。[`easy_install`](http://pypi.python.org/pypi/distribute)

```
easy_install /path/to/eggfile 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T14:51:35.167

为 windows 编译 python 库的最佳位置

[http://www.lfd.uci.edu/~gohlke/pythonlibs/#lxml](http://www.lfd.uci.edu/~gohlke/pythonlibs/#lxml)

你不会找到更好的

# python - 定义自定义字符串方法

> ID：10637819
> 
> 赞同：0
> 
> 时间：2012-05-17T14:36:18.153
> 
> 标签：python, string

“字符串方法”如图所示，例如：

```
teststring = "[Syllabus]Sociology.131.AC.Race.and.Ethnicity.in.the.United.States (Spring 2012).docx"
print teststring.replace('.', ' ') 
```

“[教学大纲]美国社会学 131 AC 种族和民族（2012 年春季）docx”

太棒了，我正在编写的脚本涉及大量文本操作，这是我正在做的很多事情，并且随着我添加功能，它仍然很重要。

我正在做的常见操作之一是：

```
teststring = "[Syllabus]Sociology.131.AC.Race.and.Ethnicity.in.the.United.States (Spring 2012).docx"
def f_type(f): return f.split('/')[-1] if os.path.isdir(f) else re.split(r'(\[Syllabus\]|\[Syllabus \d+\]|\[Video\]|)(.*?)( \(Fall \d+\)| \(Spring \d+\)| \(Summer \d+\)|)(\.part\d+\.rar$|\.\w+$)', f.split('/')[-1])[1]
def f_name(f): return f.split('/')[-1] if os.path.isdir(f) else re.split(r'(\[Syllabus\]|\[Syllabus \d+\]|\[Video\]|)(.*?)( \(Fall \d+\)| \(Spring \d+\)| \(Summer \d+\)|)(\.part\d+\.rar$|\.\w+$)', f.split('/')[-1])[2]
def f_term(f): return f.split('/')[-1] if os.path.isdir(f) else re.split(r'(\[Syllabus\]|\[Syllabus \d+\]|\[Video\]|)(.*?)( \(Fall \d+\)| \(Spring \d+\)| \(Summer \d+\)|)(\.part\d+\.rar$|\.\w+$)', f.split('/')[-1])[3]
def f_ext(f): return f.split('/')[-1] if os.path.isdir(f) else re.split(r'(\[Syllabus\]|\[Syllabus \d+\]|\[Video\]|)(.*?)( \(Fall \d+\)| \(Spring \d+\)| \(Summer \d+\)|)(\.part\d+\.rar$|\.\w+$)', f.split('/')[-1])[4]
print f_type(teststring)
print f_name(teststring)
print f_term(teststring)
print f_ext(teststring) 
```

[教学大纲] Sociology.131.AC.Race.and.Ethnicity.in.the.United.States（2012 年春季）.​​docx

但我希望能够添加：“.ftype()”、“.fname()”、“.fterm()”和“.fext()”方法（对应于我拥有的这些函数）。我不知道该怎么做。

我希望在脚本中的一堆不同函数中使用它（所以它不会是类绑定或任何东西）。

我什至无法弄清楚我应该用谷歌搜索什么。但是我怎样才能添加这些方法呢？

PS 方法的名称并不重要——所以如果我必须更改这些名称以避免与内置方法或其他方法发生冲突，那也没关系。

**编辑**：我希望能够将此方法用于以下方面：

```
def testfunction(f1, f2): print 'y' if f1.ftype()==f2.ftype() else 'n' 
```

所以我不希望它被绑定到一个字符串或任何东西，我希望能够将它用于不同的字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T14:39:59.403

您不能将方法添加到内置类型，例如`str`.

但是，您可以创建一个子类`str`并添加您想要的方法。作为奖励，添加`@property`这样您就不需要调用该方法来获取值。

```
class MyString(str):
    @property
    def f_type(f):
        return f.split('/')[-1] if os.path.isdir(f) else re.split(r'(\[Syllabus\]|\[Syllabus \d+\]|\[Video\]|)(.*?)( \(Fall \d+\)| \(Spring \d+\)| \(Summer \d+\)|)(\.part\d+\.rar$|\.\w+$)', f.split('/')[-1])[1]

s = MyString(teststring)
s.f_type 
```

通常，您将`self`用作方法参数列表中第一个参数的名称（接收对该方法附加到的实例的引用）。在这种情况下，我只是使用了`f`，因为您的表达式已经被编写为使用它。

# objective-c - UI 主题的 iOS/Objective-C 设计模式

> ID：10637823
> 
> 赞同：4
> 
> 时间：2012-05-17T14:36:30.940
> 
> 标签：objective-c, ios, oop, design-patterns, user-interface

我需要编写一个支持主题的 iOS Objective-C 应用程序。这个想法是，通过一些配置控制面板，用户可以根据以下模式选择在我的应用程序中预定义的三个假设主题 {redTheme、greenTheme 或 blackTheme} 之一：

[1主题 http://www.timotteo.com.ar/ThemeChart.png](http://www.timotteo.com.ar/ThemeChart.png)

用户甚至可以在查看视图时选择新主题，并且视图会自动重绘（尽管这不是基本功能）。我还希望有一个基本主题（例如 whiteTheme）。主题不仅会自定义视图的背景颜色，还会自定义 UIButtons、UISlider 等的图像。我的问题是：有没有设计模式可以帮助我解决这个问题？或者至少是一些 OOP 概念？任何方向表示赞赏。提前发送

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:41:49.507

基本上，您可以考虑 WinterBoard 用于主题的方法。使您的 UI 元素图像名称统一（例如 buttonBackground.png、statusBar.png 等）并将非图像（纯色）信息存储在 PLIST 文件中，并为每个 UI 控件提供键，例如

```
<plist>
<dict>
    <key>ButtonBackgroundColor</key>
    <string>#00ff00</string>
    <key>LabelBackgroundColor</key>
    <string>#007fcc</string>
</dict>
</plist> 
```

等等。然后，根据这个模式制作你的主题，在你的应用程序中使用相同的图像名称/颜色键来加载 UI 数据，但基于当前设置（大概存储在 NSUserDefaults 中），从不同的目录加载资源文件.

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T14:42:08.840

从您准备的漂亮图表来看，它看起来很像策略模式（或任何数量的类似模式）。查看更多信息：[http ://en.wikipedia.org/wiki/Strategy_pattern](http://en.wikipedia.org/wiki/Strategy_pattern)

亲切的问候，
博

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-27T10:53:34.870

UIAppearance 框架使导航栏和 UIControl 对象的这项工作更容易

[https://developer.apple.com/library/prerelease/ios/documentation/UIKit/Reference/UIAppearance_Protocol/index.html](https://developer.apple.com/library/prerelease/ios/documentation/UIKit/Reference/UIAppearance_Protocol/index.html)

# facebook - Facebook Graph 基本根信息返回 false（喜欢）

> ID：10637826
> 
> 赞同：0
> 
> 时间：2012-05-17T14:36:41.337
> 
> 标签：facebook, facebook-graph-api, facebook-like

我正在尝试从以下 facebook 页面访问“喜欢”：

[http://graph.facebook.com/EncuentrodeNoviosMexico](http://graph.facebook.com/EncuentrodeNoviosMexico)

我得到以下回复：

“错误的”

尝试访问其他页面，我确实得到了信息。

这个想法是通过 php 或 jquery/javascript 获得“喜欢”（我会通过 JSON 来考虑）。

问题： 1\. 为什么返回“false”？（原因） 2\. 是否有解决方案或替代方法可以从页面中获得“喜欢”？（可能的解决方案）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:44:47.360

出于某种原因，您需要访问令牌来获取页面信息。[对于其他一些页面，例如https://graph.facebook.com/cocacola](https://graph.facebook.com/cocacola)，情况并非如此。

您可以通过附加`&access_token=...`到 URL 的末尾来执行此操作。

您可能需要访问页面的管理部分并编辑设置以使其公开可见。我猜如果你的页面有国家或年龄限制，Facebook 不会向任何人展示它，除了经过身份验证的用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:31:58.680

Graph API Explorer 返回以下内容，其中包含“喜欢”。您能否修改您的问题以包含无法正常工作的代码？

```
{
"id": "147931875220982",
"name": "Encuentro de Novios México",
"picture": "http://profile.ak.fbcdn.net/hprofile-ak-snc4/203568_147931875220982_3653853_s.jpg",
"link": "http://www.facebook.com/EncuentrodeNoviosMexico",
"likes": 1135,
"category": "Education",
"is_published": true,
"website": "www.encuentrodenovios.org",
"username": "EncuentrodeNoviosMexico",
"about": "El ENCUENTRO DE NOVIOS es un Movimiento Católico que ofrece la experiencia de un Fin de Semana, para todas aquellas parejas de novios que deseen tener una preparación pre y post matrimonial, para vivir su relación como pareja sacramentada.",
"can_post": true,
"talking_about_count": 4,
"type": "page"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T17:25:44.547

有国家限制；当我消除它们时，我可以完全访问图形 API。谢谢大家。如果他们不授予我访问该页面的权限，我将不得不按照 cpilko 的建议进行操作。（感谢 cpilko）

# c# - 序列化/反序列化派生类

> ID：10637833
> 
> 赞同：0
> 
> 时间：2012-05-17T14:36:58.550
> 
> 标签：c#, serialization, xml-serialization, deserialization, xml-deserialization

我有一个基类和另一个派生自它。假设，基类有 20 个成员，派生类有 5 个成员。只有派生类是可序列化的。

在我实例化之后，派生类的对象拥有全部 25 个成员。现在我怎样才能只序列化派生类的 5 个成员？当我使用“this”进行序列化或反序列化时，整个类（所有 25 个成员）都被序列化然后反序列化。

这是一个代码片段（不完整）：

```
// Base class definition.
public abstract class baseMyClass
{
// declaration of members
}

...

// Derived class definition.
[Serializable]
public sealed class MyDerivedClass : baseMyClass
{
// declaration of members
}

...

// Serializing the object.
StringWriter writer = new StringWriter();
XmlSerializer xs = new XmlSerializer(typeof(MyDerivedClass));
xs.Serialize(writer, this);

...

// Deserializing the object.
StringReader reader = new StringReader(System.Text.Encoding.UTF8.GetString(data));
XmlSerializer xs = new XmlSerializer(typeof(MyDerivedClass));
MyDerivedClass objMyDerivedClass = (MyDerivedClass)(xs.Deserialize(reader)); 
```

我找不到任何类似的例子。如果你知道一个，请指点我。

感谢所有的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T14:43:16.697

在您不想序列化的每个字段上使用 [NonSerializedAttribute] 属性。

或者实现ISerializsable接口，在派生类上手动序列化你需要的字段。

[http://msdn.microsoft.com/en-US/library/axwwbcs6(v=vs.80](http://msdn.microsoft.com/en-US/library/axwwbcs6(v=vs.80) )

[http://msdn.microsoft.com/en-us/library/ty01x675(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ty01x675(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:01:21.450

我没有继承，而是使类（可以序列化）成为父类的成员。父类不再是父类。我将只实例化这个类的对象，它会有一个可以序列化的成员对象。

# algorithm - 高度优化的算法对仅由 0s n 1s 组成的数组进行排序

> ID：10637834
> 
> 赞同：7
> 
> 时间：2012-05-17T14:37:00.653
> 
> 标签：algorithm, sorting

我需要找到一个高度优化的算法来对仅由 0s n 1s 组成的数组进行排序。

我的解决方案是数数。零（比如 x）和一（比如 y）。一旦你这样做了，在数组中放置 x 个零，然后是 y 1s。这使它成为 O(n)。

任何比这运行得更好的算法？？？我在面试中被问到这个问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T14:44:33.523

由于您必须检查每个`n`输入元素，因此您无法改进`O(n)`.

此外，由于您的算法需要`O(1)`内存，因此您也无法对此进行改进（没有什么比 渐近更好了`O(1)`）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-17T22:50:02.263

我们不能比 O(n) 做得更好，但看起来我们可以一次性完成

```
low = 0; 
high = arr.length - 1;

while (low < high) {
    while (arr[low] == 0) {
        low ++;
    }
    while (arr[high] == 1) {
        high --;
    }
    if (low < high) {
    //swap arr[low], arr[high]
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-17T14:39:52.253

如果对数组求和，则可以得到 1 的数量，效率稍高，但仍为 O(n)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-17T14:39:59.123

你不能比 O(N) 更有效率，因为每个项目都需要检查。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-17T14:50:22.317

我们在谈论什么样的“阵列”？如果我们要对 16 位无符号整数中的位进行计数，那么已经开发了几种 O(1) 时间算法：请参阅[快速位计数例程](http://gurmeet.net/puzzles/fast-bit-counting-routines/)。

这是那里提出的算法之一；他们称之为 Nifty Parallel Count：

```
#define MASK_01010101 (((unsigned int)(-1))/3)
#define MASK_00110011 (((unsigned int)(-1))/5)
#define MASK_00001111 (((unsigned int)(-1))/17)
int bitcount (unsigned int n) {
   n = (n & MASK_01010101) + ((n >> 1) & MASK_01010101);
   n = (n & MASK_00110011) + ((n >> 2) & MASK_00110011);
   n = (n & MASK_00001111) + ((n >> 4) & MASK_00001111);
   return n % 255 ;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-21T22:06:28.203

这听起来像是单杆算盘排序。现在我很好奇你的面试官是谁。

[http://www.dangermouse.net/esoteric/abacussort.html](http://www.dangermouse.net/esoteric/abacussort.html)

# c# - 如何根据应用条件取消线程任务

> ID：10637840
> 
> 赞同：1
> 
> 时间：2012-05-17T14:37:29.443
> 
> 标签：c#, .net, multithreading, task

我在Task中很新，也许我的问题会很愚蠢，但我真的需要帮助。

我想根据应用情况取消任务。

好吧，我们开始：

```
 static void Main(string[] args)
    {
    var tokenSource = new CancellationTokenSource();
    var token = tokenSource.Token;

    // Request cancellation from the UI thread.
    if (Console.ReadKey().KeyChar == 'x')
    {
    tokenSource.Cancel();
    }
    Task.Factory.StartNew(() => DoSomeWork(token), token);
    } 
```

这里是我们的 DoSomeWork 方法：

```
 static void DoSomeWork(CancellationToken ct)
    {
    // Was cancellation already requested?
    if (ct.IsCancellationRequested)
    {
     Console.WriteLine("We were cancelled before we got started.");
     Console.WriteLine("DoSomeWork() - Not Executed");
     return;
    }
    Console.WriteLine("DoSomeWork() - Executed");
    Console.ReadLine();
    } 
```

所以，我希望当我调用 tokenSource.Cancel();

这种情况将是真实的：

```
 if (ct.IsCancellationRequested)
    {
     Console.WriteLine("We were cancelled before we got started.");
     Console.WriteLine("DoSomeWork() - Not Executed");
     return;
    } 
```

我将在 if 语句中执行代码。

我确实做错了，需要如何达到上述目标的确切步骤。

先感谢您。朱利安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:45:34.130

我认为你需要类似的东西：

```
 while (!ct.IsCancellationRequested /* or all work is done*/)
{
    Console.WriteLine("DoSomeWork");
}
Console.WriteLine("We were cancelled."); 
```

# c - 值预处理器宏的 C 中值

> ID：10637843
> 
> 赞同：2
> 
> 时间：2012-05-17T14:37:44.620
> 
> 标签：c, macros

我的任务是定义一个宏以将三个数字作为参数并返回它们的中位数

`#define MEDIAN(x,y,z) (??)`

如果没有长序列的 if 语句来确定中间元素，我想不出一种简单的方法来做到这一点，因为我也不能使用库函数。

有什么提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T14:39:02.713

使用条件表达式来缩短内容。这是一个用于查找两个值的最小值的方法。

```
#define MIN(x,y)    (((x) < (y)) ? (x) : (y)) 
```

但是，通常不赞成有很多嵌套的条件表达式。

注意：当您编写宏而不是函数时，如果用户传入例如`i++`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-08-30T20:35:02.873

```
/* May not be the best implementation but it covers all corner cases of three 
different numbers.  */  
#define MEDIAN(x,y,z) \  
    (((x) > (y) && (x) < (z)) || ((x) < (y) && (x) > (z))) ?  \  
            ((x)) : \  
            ((x) < (y) ? ((y) < (z) ? (y) : (z)) : ((y) > (z) ? (y) : (z))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-17T16:43:47.850

我试过这个，它对我有用：

```
#define MAXVAL(val1,val2)  ((val1>val2) ?  (val1):(val2) )
#define MINVAL(val1,val2)  ((val1<val2) ?  (val1):(val2) )
#define MEDIAN3(val1,val2,val3) MINVAL(MINVAL(MAXVAL(val1,val2),MAXVAL(val2,val3)),MAXVAL(val3,val1)) 
```

但是由于您需要对值进行排序以获得中位数，我认为针对 3 个值的某种简单冒泡排序算法（[http://de.wikipedia.org/wiki/Bubblesort](http://de.wikipedia.org/wiki/Bubblesort)）应该是最好的解决方案。

- 编辑 -

这是一个更好的解决方案：

```
#define MEDIAN3(val1,val2,val3) MAXVAL(MINVAL(MAXVAL(val1,val2),val3),MINVAL(val1,val2)) 
```

最小的 3 个值宏：

```
#define MIN3(x,y,z) ( ( y ) <= ( z ) ? ((x) <= (y) ? (x) : (y)) : ((x) <= (z) ? (x) : (z))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-15T21:41:12.633

我有两个宏（或至少找到两个）给你：

```
#define MEDIAN(a,b,c) ((a > b) ? (b > c) ? b : (a > c) ? c : a : \
                       (b > c) ? (a > c) ? a : c : b) 
```

和

```
#define MEDIAN(a,b,c) ((a-b)*(b-c) > 1 ? b : ((a-b)*(a-c) < -1 ? a : c)) 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-17T16:42:18.930

那里。它检查查找 MEDIAN 的所有六个条件。我很快就做到了，我相信可以进一步改进。

```
#define MEDIAN(x, y, z) (x <= y ? (z < x ? x : \
        (z > y ? y : z)) : (z < y ? y : (z > x ? x : z))) 
```

# asp.net-mvc-3 - 单击链接时将值传递给编辑器

> ID：10637844
> 
> 赞同：0
> 
> 时间：2012-05-17T14:37:47.670
> 
> 标签：asp.net-mvc-3

我创建了一个页面，其中包含以下链接，其值在后面。

例如：

这里是[654465465](http://www.example.com/)！以及指向 [a panda][1] 的参考样式链接。

当用户点击链接时，网址将被提取到 [http://www.example.com/654465465](http://www.example.com/654465465)

在此刻。

如何允许值 654465465 保留在 @html.EditorFor(model => model.Value) 中

这是我的控制器：

`public ActionResult index() { var model = new myModel(); return View(model); }`

和

感谢您的帮助，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:53:36.260

您是说，您的 url 中的路由将有一个值，并且您希望将该值传递给 EditorFor？

根据您的路由，您可以指定要从 url 获取的值，例如默认路由：

```
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

在末尾指定一个 id。因此，例如，如果您有一个像“/myController/myAction/654465465”这样的 url，那么 654465465 就是这个例子中的 id。

然后你会把它传递给你的模型

```
public ActionResult Index(int id)
{ 
    var model = new myModel();
    model.Value = id;
    return View(model); 
} 
```

然后当你打电话

```
@Html.EditorFor(m => m.Value) 
```

它将在 editorfor 创建的输入中包含 654465465。

# wpf - 无法为图像设置动画，似乎情节提要没有启动

> ID：10637848
> 
> 赞同：0
> 
> 时间：2012-05-17T14:37:51.613
> 
> 标签：wpf

我的代码发布在下面。我正在创建一个图像，并尝试向它添加动画。我确信它在某个时候有效，我做了一个小改动，它失败了我撤消了更改（字面意思是撤消），现在它继续失败。我正在尝试将图像每半秒更改为另一个图像，然后再过半秒再变回来。

```
<Image Height="30" HorizontalAlignment="Left" Margin="198,90,0,0" Name="OldMan" Stretch="Fill" VerticalAlignment="Top" Width="30" Source="/TestingWpF;component/Images/Old1.png" >
    <Image.Triggers>
        <EventTrigger RoutedEvent="Window.Loaded">
            <BeginStoryboard>
                <Storyboard >
                    <ObjectAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="OldMan" Storyboard.TargetProperty="(Image.Source)" RepeatBehavior="Forever">
                        <DiscreteObjectKeyFrame KeyTime="00:00:00.5000000">
                            <DiscreteObjectKeyFrame.Value>
                                <BitmapImage UriSource="/TestingWpF;component/Images/Old1.png" />
                            </DiscreteObjectKeyFrame.Value>
                        </DiscreteObjectKeyFrame>
                        <DiscreteObjectKeyFrame KeyTime="00:00:01.0000000">
                            <DiscreteObjectKeyFrame.Value>
                                <BitmapImage UriSource="/TestingWpF;component/Images/Old2.png" />
                            </DiscreteObjectKeyFrame.Value>
                        </DiscreteObjectKeyFrame>
                    </ObjectAnimationUsingKeyFrames>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </Image.Triggers>
</Image> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:44:06.903

问题是您没有设置持续时间。你只会得到第一个关键帧，而不是下一个。`Duration="00:00:01.5"`尝试添加类似`ObjectAnimationUsingKeyFrames`

# php - zend 子域身份验证不会延续

> ID：10637857
> 
> 赞同：0
> 
> 时间：2012-05-17T14:38:18.810
> 
> 标签：php, zend-framework, session, routing, zend-auth

我最近向我的网站引入了两种语言，并且最初从 URL 中隐藏。但是，在阅读了更多内容之后，似乎将它们放在 url 中似乎对 SEO 更友好。所以我将它们添加为子域。我现在有 en.site.com 和 ja.site.com。

我的问题是，当我通过 en.site.com 登录该站点，然后切换到 ja.site.com 时，我的 Zend_Auth 似乎没有身份。

我可以提供代码，但我不知道在哪里寻找这个问题。

任何见解将不胜感激！

谢谢！

编辑：

```
 ini_set('session.cookie_domain', '.site.com' ); 
```

那是我的 /public/index.php 文件的第一行，但仍然没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:05:40.093

在您的 public/index.php 之上执行此操作

```
ini_set('session.cookie_domain', '.site.com' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:35:50.660

或者在 application.ini

```
session.cookie_domain = ".example.com" 
```

我认为这更好，因为它更灵活。

# java - Hadoop-1.0.1 中的 java.lang.NoClassDefFoundError

> ID：10637861
> 
> 赞同：-1
> 
> 时间：2012-05-17T14:38:24.437
> 
> 标签：java, hadoop

我在 Eclipse 中使用 Hadoop-1.0.1。我正在尝试运行[wordcount](http://hadoop.apache.org/common/docs/current/mapred_tutorial.html#Example%3a+WordCount+v1.0)应用程序，但是当我运行 WordCount.java 时，Eclipse 显示以下错误

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory
    at org.apache.hadoop.conf.Configuration.<clinit>(Configuration.java:143)
    at test.WordCount.main(WordCount.java:56)
Caused by: java.lang.ClassNotFoundException: org.apache.commons.logging.LogFactory
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    ... 2 more 
```

我的`classpath`. 如果应用程序需要更多 jar

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T22:42:36.540

您似乎收到此错误，因为与常见日志记录相关的两个重要日志记录类 commons-logging-1.1.1.jar 和 commons-logging-api-1.0.4.jar 要么无法从您的类路径中获得，要么您只是没有。

在大多数情况下，这些文件与其他 Hadoop Jar 位于 \lib 文件夹中，因此当您设置类路径时，可以访问这些 jar。请确认您的机器中确实有这些文件，并且在您的类路径中进行了设置，以便可以访问它们。

此外，当您运行“hadoop 版本”时，结果会出现版本，相同的 hadoop-core--SNAPSHOT.jar 必须位于您的 $HADOOP_HOME 位置。

您提到您正在运行*WordCount.java*，而应该说您正在运行 WordCount 作业，因为您始终将编译后的应用程序用作 jar 而不是 java。

$ bin/hadoop jar /usr/jboss/wordcount.jar org.myhadoop.WordCount /usr/jboss/wordcount/input /usr/jboss/wordcount/output

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:42:56.967

`hadoop-core-1.0.1`可能不在您的类路径中：`commons-logging`实际上在 hadoop jar 中多次包含！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-22T05:08:41.410

看来你没有包含 common-logging jar 文件所以[在这里下载](http://commons.apache.org/proper/commons-logging/download_logging.cgi)jar 文件取决于版本，然后将它包含在你的程序中并运行它谢谢你

# java - Java/Xpath——在相似实体中拉取特定值

> ID：10637866
> 
> 赞同：1
> 
> 时间：2012-05-17T14:38:36.287
> 
> 标签：java, xml, parsing, xpath

所以我有一个格式如下的xml文件

```
<TopXmlTree>
    <IndentedItem1>
        <subvalue1>
        <subvalue2>
        <subvalue3>
    <IndentedItem1> (Same name as above but a different subset)
        <subvalue1>
        <subvalue2>
        <subvalue3> <<-- I want to get this value 
```

假设我想获得上面的值，有什么方法可以用 Xpath 做到这一点？通常我的 Xpath 代码很简单，比如

```
XPathExpression expr = xpath.compile("/TopXmlTree/IndentedItem1/Subvalue1/text()"); 
```

鉴于这种情况，我显然无法做到。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:59:48.130

您需要获取第二个 IndentedItem1 子集的 subvalue3 值，因此它看起来像这样：

XPathExpression expr = xpath.compile("//TopXmlTree/IndentedItem1[2]/subvalue3/text()");

# ruby-on-rails-3 - 无法在资产索引页面上显示用户名

> ID：10637880
> 
> 赞同：0
> 
> 时间：2012-05-17T14:39:17.330
> 
> 标签：ruby-on-rails-3

我正在尝试创建一个索引页面，其中显示所有资产，包括指向分配给他们的用户的链接，但是当我使用

```
def index
 @assets = Asset.paginate(page: params[:page])
 @user = User.find(params[:id])
end 
```

它返回 - 找不到没有 ID 的用户。

index.html.erb - 资产

```
<%= provide(:title, 'Assets') %>
<h1>All assets</h1>
<%= will_paginate @assets %>
<ol class="assets">
    <%= render @assets %>
</ol>
<%= will_paginate @assets %> 
```

_asset.html.erb 部分

```
<li>
<span class="id">JTC<%= asset.id %></span>
<span class="serial"><%= asset.serial_no %></span>
<span class="status">Status: <%= asset.status %></span>
<span class="type">Type: <%= asset.asset_type %><br/></span>
<span class="description">Description: <%= asset.asset_description %><br /></span>
<span class="comment"><em><%= asset.comment %></em></span>
<span class="timestamp">
    <br />Added <%= time_ago_in_words(asset.created_at) %> ago. <br /> Assigned to: <%= link_to 
    @user.name %>
    <br />Date Purchased: <%= asset.date_purchased %> 
</span>
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:45:37.620

`@user = User.find(params[:id])`期待一个 URL `/assets/40`，其中 40 是 id（即使这样也没有意义，因为 40 应该是资产的 id，而不是用户）。当您只是访问`/assets`时，没有 id 参数，因此它尝试基本上 do `User.find(nil)`，这会给您带来该错误。

假设资产属于用户，您应该摆脱`@user = User.find(params[:id])`控制器中的行，并将您的部分更改为使用`asset.user.name`而不是`@user.name`.

为避免用户出现 N+1 查询情况，您可以更新控制器以使用此功能：

```
@assets = Asset.includes(:user).paginate(page: params[:page]) 
```

# jquery - 使用 Html.BeginForm 中的启动按钮加载带有部分视图的 jQuery 对话框

> ID：10637885
> 
> 赞同：3
> 
> 时间：2012-05-17T14:39:44.673
> 
> 标签：jquery, asp.net-mvc, razor, asp.net-mvc-4

我有一个域聚合，它使用普通的“编辑”视图中的视图模型显示。根对象是，它有一个类型为`Client`的嵌套属性。推荐人的名字和姓氏显示在客户端编辑视图中，但如果推荐联系人不在系统中，我需要用户能够生成“创建联系人”对话框。我正在尝试在带有 Contact 对象的部分视图的 jQuery 对话框中执行此操作。问题是，如果我将生成“创建联系人”对话框的按钮放在对象的字段集中，则该对话框不起作用。简化代码：`Referrer``Contact``Client`

剃刀：

```
@using(Html.BeginForm()){
    @Html.ValidationSummary(true)
    <fieldset>
        <table>
            <tr>
                <td>
                    Client Name: 
                    @Html.TextBoxFor(m => m.ClientName)
                </td>
                <td>
                    Referred By: 
                    @Html.TextBoxFor(m => m.ReferrerName)
                    <button id="createContact">New...</button>
                </td>
            </tr>
        </table>
        <div class="lower-right-button">
            <input type="submit" value="Save" />
        </div>
    </fieldset>
}
<div id="createContactDialog" title="Create Contact" style="overflow: hidden;"></div> 
```

jQuery：

```
$(document).ready(function() {
    $("#createContactDialog").dialog({
        autoOpen: false,
        resizable: false,
        width: 400,
        title: "Create Contact",
        modal: true,
        open: function(event, ui){
            $(this).load("@Url.Action("CreateContactPartial", "Contact")");
        },
        buttons: {
            "Cancel": function() {
                $(this).dialog("close");
            }
        }
    });
    $("#createContact")
        .button()
        .click(function() {
            $("#createContactDialog").dialog("open");
        });
}); 
```

如果我将`createContact`按钮移出 的范围`Html.BeginForm`，则对话框会正确显示，但按钮的位置并不靠近我需要的位置。如果我在上面的示例中保留按钮，则对话框会显示一秒钟，然后自行关闭。有什么方法可以让我在里面有按钮来启动“创建联系人”对话框`Html.BeginForm`？如果没有，是否有其他选项可以在不破坏 DOM 的情况下将按钮放在我想要的位置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T15:37:42.543

按钮事件导致表单消失。更改点击功能以防止这种情况发生。

```
 $("#createContact")
        .button()
        .click(function (e) {
            $("#createContactDialog").dialog("open");
            e.preventDefault();
        }); 
```

# java - 为什么 Hibernate 会忽略 package-info.java？

> ID：10637887
> 
> 赞同：3
> 
> 时间：2012-05-17T14:39:53.667
> 
> 标签：java, hibernate, annotations, usertype

我正在尝试在包级别上使用 Hibernate @TypeDef 注释，就像在[Hibernate 文档](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#d0e2794)中描述的那样。我正在使用`Hibernate 3.6`和`Spring 3.0.7`。代码编译并`package-info.class`在类路径中，但 Hibernate 仍然看不到它。

如果我放入`@TypeDef`班级级别，它可以工作，但如果我放入`package-info`. 我试图谷歌但找不到任何有用的东西。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T16:56:14.610

您可能需要添加一个

```
<resource package="com.foo.bar.thepackage"/> 
```

到您的 Hibernate 配置文件，或调用[configuration.addPackage("com.foo.bar.thepackage")](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/cfg/Configuration.html#addPackage%28java.lang.String%29)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T22:12:11.177

对于 Hibernate 4，您必须添加

```
<mapping package="com.foo.bar.thepackage"> 
```

到你的 Hibernate 配置文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-27T22:22:29.143

如果使用 JPA，则使用

```
<class>com.foo.bar.thepackage</class>
```

在persistence.xml 中也应该可以工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-20T18:14:56.723

我相信这是由于 Spring 中的一个错误，它不会扫描 package-info 中的注释，而只会扫描带有 @Entity、@Embeddable 或 @MappedSuperclass 注释的类上的注释。请参阅[https://jira.springsource.org/browse/SPR-8589](https://jira.springsource.org/browse/SPR-8589)。

# objective-c - 设置其他类变量

> ID：10637889
> 
> 赞同：2
> 
> 时间：2012-05-17T14:39:54.977
> 
> 标签：objective-c, xcode, cocoa

我有 2 个班级，ClassA 和 ClassB

ClassA 有一个 BOOL 变量设置为 No。

我正在尝试将此变量从 ClassB 设置为 Yes，但似乎无法弄清楚如何设置。

下面是我正在使用的代码，它不起作用，这只是我认为会起作用的代码，我已经删除了不必要的信息：

A类：

```
ClassA.h

@interface AppDelegate : NSObject <NSApplicationDelegate> {
    BOOL boolean;
}

- (id) init;

ClassA.m

- (id) init {
    boolean = NO;
} 
```

B类：

```
ClassB.h

#import "ClassA.h"

- (IBAction) setBoolean: (id)sender;

ClassB.m

- (id) init {
    ClassA * theClassA = [[ClassA alloc] init];
    return self;
}

- (IBAction) setBoolean: (id)sender {
    [theClassA boolean] = YES;
} 
```

我希望这是有道理的。我只是想将 ClassA 中的 BOOL 布尔值设置为 ClassB 中的 YES。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T14:44:01.503

您不能分配这样的属性 ( `[object property] = value`)。正确的语法是`[object setProperty:value]`or `object.property = value`。

我不会调用变量布尔值。可能会产生误导。尽管它不是 Objective-C 中布尔变量的关键字，但它在许多其他语言中也是如此。

而且你必须在你的 init 方法中返回初始化的对象（self）（你有一个 id 返回类型，而不是 void）：

```
- (id) init {
    self = [super init];
    if (self) {
        boolean = NO;
    }
    return self;
} 
```

此外，您没有在 ClassB 实现中为 theClassA 指定实例变量。您只需创建一个本地对象，然后泄漏它（您不释放它）。相反，在 ClassB.h 中声明它：

```
@class ClassA;
@interface ClassB : NSObject {
    ClassA *theClassA;
}
- (IBAction)setBoolean:(id)sender;
@end 
```

然后像这样初始化它：

```
- (id) init {
    self = [super init];
    if (self) {
         theClassA = [[ClassA alloc] init];
    }
    return self;
} 
```

并且不要忘记在 dealloc 中释放它：

```
- (void)dealloc {
    [theClassA release];
    [super dealloc];
} 
```

最后一件事。在 ClassB 中有一个方法`- (IBAction) setBoolean: (id)sender`意味着 ClassB 有一个名为 的属性`boolean`，但事实并非如此。我建议重命名该方法和/或重新考虑您的课程设计。

# javascript - 回调完成时从父函数返回

> ID：10637890
> 
> 赞同：1
> 
> 时间：2012-05-17T14:39:56.453
> 
> 标签：javascript, jquery, function

在 JavaScript 中，是否可以从 jquery 回调函数中从父函数返回值？

```
function thingsLoaded() {
 $("#loadingSplash").fadeOut( 1000, function() { //return thingsLoaded here    });
} 
```

我在这里阅读了一些关于 AJAX 回调的异步与同步的问题？这同样适用吗？

另外，我不需要传递任何变量，它只是一个在fadeOut 完成后从 thingsLoaded 函数返回的时间。

**编辑：**澄清：我想延迟从 thingsLoaded 函数返回，直到 fadeOut 回调函数完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:43:23.100

假设我已经正确理解了您的问题，（我认为您想*从* `thingsLoaded`回调中返回，而不是实际返回`thingsLoaded`自身）然后不。

该`thingsLoaded`函数将`undefined`在回调执行之前返回。如果您的代码依赖于正在完成的动画，则它必须进入回调内部。这是因为`fadeOut`是异步的。

# javascript - Onclick 事件以删除文本输入字段中的默认值

> ID：10637900
> 
> 赞同：16
> 
> 时间：2012-05-17T14:40:28.840
> 
> 标签：javascript, html

我有一个输入字段：

```
<input name="Name" value="Enter Your Name"> 
```

当用户单击该框时，我将如何删除预定义的文本（输入您的姓名）。

据我所知，Javascript 是最好的方法。如果说错了请通知我。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-17T14:42:37.840

### HTML5 占位符属性

您可能需要`placeholder`以下功能：

```
<input name="Name" placeholder="Enter Your Name" /> 
```

### 旧浏览器的 Polyfill

这在某些较旧的浏览器中不起作用，但[存在 polyfills](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)（有些需要 jQuery，有些不需要）来修补该功能。

### “去死吧，我自己来。”

如果您想推出自己的解决方案，您可以使用元素的`onfocus`和`onblur`事件来确定它的值应该是什么：

```
<input name="Name" value="Enter Your Name"
       onfocus="(this.value == 'Enter Your Name') && (this.value = '')"
       onblur="(this.value == '') && (this.value = 'Enter Your Name')" /> 
```

### 避免将 HTML 与 JavaScript 混合使用

你会发现我们大多数人都不是从属性评估 JavaScript 的忠实拥护者，比如`onblur`和`onfocus`. 相反，更普遍地鼓励将此逻辑纯粹与 JavaScript 绑定。当然，它有点冗长，但它在你的逻辑和你的标记之间保持了很好的分离：

```
var nameElement = document.forms.myForm.Name;

function nameFocus( e ) {
  var element = e.target || window.event.srcElement;
  if (element.value == "Enter Your Name") element.value = "";
}

function nameBlur( e ) {
  var element = e.target || window.event.srcElement;
  if (element.value == "") element.value = "Enter Your Name";
}

if ( nameElement.addEventListener ) {
  nameElement.addEventListener("focus", nameFocus, false);
  nameElement.addEventListener("blur", nameBlur, false);
} else if ( nameElement.attachEvent ) {
  nameElement.attachEvent("onfocus", nameFocus);
  nameElement.attachEvent("onblur", nameBlur);
} 
```

演示：http: [//jsbin.com/azehum/2/edit](http://jsbin.com/azehum/2/edit)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T14:44:56.503

这是正确的跨浏览器方式：

```
<input type="text" value="Enter Your Name" onfocus="if(this.value  == 'Enter Your Name') { this.value = ''; } " onblur="if(this.value == '') { this.value = 'Enter Your Name'; } " /> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-19T10:10:44.353

使用`onclick="this.value=''"`：

```
<input name="Name" value="Enter Your Name" onclick="this.value=''"> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-17T14:51:52.723

如前所述，我什至看到这个问题`placeholder`就是答案。HTML5 的胜利！但是对于那些不能依赖该功能的可怜的不幸灵魂，也可以将 jquery 插件视为一种增强。[HTML5 占位符 jQuery 插件](https://github.com/mathiasbynens/jquery-placeholder)

```
<input name="Name" placeholder="Enter Your Name"> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-07-16T00:23:03.907

您可以使用占位符，当您在​​搜索框上写文字时，占位符将隐藏。谢谢

```
<input placeholder="Search" type="text" /> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-17T14:41:19.217

这应该这样做：

***HTML***

```
<input name="Name" value="Enter Your Name" onClick="blankDefault('Enter Your Name', this)"> 
```

***JavaScript***

```
function blankDefault(_text, _this) {
    if(_text == _this.value)
        _this.value = '';
} 
```

虽然有更好/不那么突兀的方法，但这将完成工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-17T14:42:26.137

你实际上想显示一个占位符，HTML 5 提供了这个功能，它非常棒！

试试这个：

```
<input name="Name" placeholder="Enter Your Name"> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-17T16:13:25.053

```
<input name="Name" value="Enter Your Name" onfocus="freez(this)" onblur="freez(this)">

function freez(obj)
{
 if(obj.value=='')
 {
   obj.value='Enter Your Name';
 }else if(obj.value=='Enter Your Name')
 {
   obj.value='';
 }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-08-04T16:57:08.977

除了`placeholder="your text"`你还可以做`onclick="this.value='';`

所以它看起来像：

```
<input name="Name" value="Enter Your Name" onclick="this.value='';> 
```

# haskell - 泛化函数时编译错误 - 复杂的错误消息

> ID：10637904
> 
> 赞同：2
> 
> 时间：2012-05-17T14:40:37.137
> 
> 标签：haskell, ghc

我有一个在 IO monad 中运行的函数：

```
withDB :: (forall c. IConnection c => c -> IO b) -> IO b
withDB fn = bracket (connectSqlite3 "int/db.sqlite3") disconnect fn 
```

现在我决定将它概括为在一些`MonadIO m`. 我是按照以下方式进行的，`bracket`用我的`scope`（你知道图书馆里的一些吗？）重新发明：

```
scope :: MonadIO m => m a -> (a -> m b) -> (a -> m c) -> m c
scope before after action = do
    x <- before
    r <- action x
    _ <- after x
    return r

withDB :: MonadIO m => (forall c. IConnection c => c -> m b) -> m b
withDB fn = liftIO $ scope
                       (liftIO $ connectSqlite3 "int/db.sqlite3")
                       (\x -> liftIO $ disconnect x) fn 
```

我得到了错误：

```
Could not deduce (m ~ IO)
from the context (MonadIO m)
  bound by the type signature for
    withDB :: MonadIO m => (forall c. IConnection c => c -> m b) -> m b
  at src\...
  'm' is a rigid type variable bound by
    the signature for
      withDB :: MonadIO m => (forall c. IConnection c => c -> m b) -> m b
Expected type: IO b
  Actual type: m b
In the third argument of 'scope' namely 'fn'
In the second argument of '($)', namely
  'scope
    (liftIO $ connectSqlite3 "int/db.sqlite3")
    (\x -> liftIO $ disconnect x)
    fn' 
```

现在我的问题：

1.  m~IO是什么意思？前两行错误说明了什么？另外，我在haskell代码中看到了这个〜构造，但找不到它是什么。扩大？什么是刚性类型变量？

2.  我发现了错误并修复了它。`liftIO $`之前删除就够了`scope`。但这只是尝试重新编译循环。此错误消息中的*何处说明了错误的位置？*我看到'fn'有问题。好的，我想了想，有了一个猜测：GHC 从上到下推断类型。`liftIO`它从使用中推断`m`应该是`IO`但`fn`具有一般类型`m`，所以它是错误的。是否有*任何*haskell 编译器从上到下进行推断？而且（更重要的是）我可以看到 GHC 为输出中的子表达式推断出的类型吗？

感谢您阅读这个长长的问题！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T14:58:08.557

`liftIO :: (MonadIO m) => IO a -> m a`采取`IO`行动，所以说`liftIO $ scope ...`，你是说`scope ...`必须有 type `IO b`。这意味着 to 的参数`scope`必须使用`IO`monad。由于您使用了`scope`ensure that `m`must be `IO`，因此您可以`scope`将这种类型视为在上下文中：

```
scope :: IO a -> (a -> IO b) -> (a -> IO c) -> IO b 
```

因此，调用中的*s*什么`liftIO`都不做；他们只是从to转换，你不能使用，因为它适用于，而不是。移除固定它，因为它直接在内部运行，而不是在内部运行（不可能，因为在内部运行）并将该动作提升到.*`scope``IO a``IO a``fn``m``IO``liftIO``scope``m``IO``fn``m``m`*

# c# - 在 Metro Style App 中模拟按钮点击

> ID：10637909
> 
> 赞同：2
> 
> 时间：2012-05-17T14:40:56.843
> 
> 标签：c#, windows-8, windows-runtime, visual-studio-2012, winrt-xaml

我正在构建一个地铁风格的应用程序，我需要知道是否有办法以编程方式触发按钮点击。

我的 xaml 中有这个 PasswordBox 和按钮：

```
<PasswordBox IsPasswordRevealButtonEnabled="True" KeyDown="On_text_KeyDown" x:Name="SomePW" FontSize="50" KeyDown="On_text_KeyDown" Margin="0,0,0,190" Height="67" Width="363"/>
<Button Background="White" x:Name="Button_Go" Foreground="Black" Margin="20,0,0,190" Content="Go" FontSize="20" Click="Go_click" Height="67" Width="60"/> 
```

在我的 C# 代码中，这是处理 PasswordBox 中的按键的函数：

```
private void On_text_KeyDown(object sender, RoutedEventArgs e)
    {
        KeyEventArgs K = (KeyEventArgs)e;

        if (K.Key == Windows.System.VirtualKey.Enter)
        {
            //<TO-DO> Simulate Button Click Here
        }

    } 
```

问题是我似乎找不到模拟按钮点击的方法......有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T16:13:02.767

简单地调用它是否有问题，或者您是否正在寻找一种通用方法来调用任何按钮上的 Click 事件，也许是为了自动化它？

```
Go_click(this, new RoutedEventArgs()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T15:56:29.397

你可以试试这个：

```
ButtonAutomationPeer peer = new ButtonAutomationPeer( someButton );
IInvokeProvider invokeProv =  peer.GetPattern( PatternInterface.Invoke ) as InvokeProvider;
invokeProv.Invoke(); 
```

另一种选择如下：

```
SomeButton.RaiseEvent(new RoutedEventArgs(Button.ClickEvent)); 
```

希望这可以帮助！！

# biztalk - 没有编排的两种方式接收端口

> ID：10637912
> 
> 赞同：0
> 
> 时间：2012-05-17T14:41:18.967
> 
> 标签：biztalk, biztalk-2010, biztalk-2009

是否可以在不使用编排的情况下创建提交类型的双向接收端口。

即，我想向消息框数据库提交一条消息，并将相同的消息返回给我的 C# 程序。

请指导我。

提前致谢，

丹妮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:09:00.760

恐怕只有提交适配器是一种方式。为什么您需要返回完全相同的消息？

# c# - 如何使用 OleDb 创建 Excel 数据库

> ID：10637918
> 
> 赞同：0
> 
> 时间：2012-05-17T14:41:34.843
> 
> 标签：c#, excel, oledb, oledbconnection

我的任务是获取一个 Access 数据库并创建一个 Excel 文件，但我似乎无法**创建**OleDb 将使用的 Excel 文件。

Excel 文件名将由运行该工具的工程师提供。Access 数据库中的每个数据表都将成为 Excel 文件中的工作表。

现在，我有一个无法克服的问题：如果 Excel 文件不存在，我将无法创建它！

```
internal const string XL_FMT = "Provider=Microsoft.{0}.OLEDB.{1};Data Source={2};Mode=ReadWrite;Extended Properties=\"Excel {1};HDR={3};IMEX=1;\"";
internal DataTable tableNames;
internal OleDbConnection oleCon;
private string conStr;

public OleBase(string connectionString) {
  conStr = connectionString;
  // Using the debugger, conStr is:
  // "Provider=Microsoft.ACE.OLEDB.12.0;" +
  // "Data Source=C:\\Users\\cp-jpool\\Documents\\Ecat5.xlsx;" +
  // "Mode=ReadWrite;Extended Properties=\"Excel 12.0;HDR=Yes;IMEX=1;\""
  object[] param = new object[] { null, null, null, "TABLE" };
  oleCon = new OleDbConnection(conStr);
  oleCon.Open();
  tableNames = oleCon.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, param);
} 
```

如果 Excel 文件不存在，每当我调用时，`Open()`我都会收到以下 OleDbException：

> " *Microsoft Access 数据库引擎找不到对象 'C:\Users\cp-jpool\Documents\Ecat5.xlsx'。确保该对象存在并且正确拼写其名称和路径名。如果 'C:\ Users\cp-jpool\Documents\Ecat5.xlsx' 不是本地对象，请检查您的网络连接或联系服务器管理员。* "

所以，该文件不存在，对吧？好吧，我尝试通过修改 my`CTor()`来创建它：

```
public OleBase(string connectionString) {
  conStr = connectionString;
  object[] param = new object[] { null, null, null, "TABLE" };
  oleCon = new OleDbConnection(conStr);
  if (-1 < conStr.IndexOf(";IMEX=1;")) {
    string dsString = "Data Source=";
    int dsIndex = conStr.IndexOf(dsString);
    string conSub = conStr.Substring(dsIndex + dsString.Length);
    int firstCol = conSub.IndexOf(';');
    string xlPath = conSub.Substring(0, firstCol);
    if (!File.Exists(xlPath)) {
      File.Create(xlPath);
    }
  }
  oleCon.Open();
  tableNames = oleCon.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, param);
} 
```

现在，每当这段代码尝试调用`Open()`OleDbConnection 的方法时，我都会得到这个不同的 OleDbException：

> *“Microsoft Access 数据库引擎无法打开或写入文件 ''。它已被其他用户以独占方式打开，或者您需要权限才能查看和写入其数据。”*

我什至尝试使用**StreamWriter**创建 Excel 文件以使用基本标题填充它：

```
public OleBase(string connectionString) {
  conStr = connectionString;
  object[] param = new object[] { null, null, null, "TABLE" };
  oleCon = new OleDbConnection(conStr);
  if (-1 < conStr.IndexOf(";IMEX=1;")) {
    string dsString = "Data Source=";
    int dsIndex = conStr.IndexOf(dsString);
    string conSub = conStr.Substring(dsIndex + dsString.Length);
    int firstCol = conSub.IndexOf(';');
    string xlPath = conSub.Substring(0, firstCol);
    using (StreamWriter xls = new StreamWriter(xlPath, false, Encoding.UTF8)) {
      xls.WriteLine("<?xml version=\"1.0\"?><?mso-application progid=\"Excel.Sheet\"?>");
      xls.WriteLine("<ss:Workbook xmlns:ss=\"urn:schemas-microsoft-com:office:spreadsheet\" ");
      xls.WriteLine("xmlns:o=\"urn:schemas-microsoft-com:office:office\" ");
      xls.WriteLine("xmlns:x=\"urn:schemas-microsoft-com:office:excel\" ");
      xls.WriteLine("xmlns:ss=\"urn:schemas-microsoft-com:office:spreadsheet\">");
      xls.WriteLine("<ss:Styles>");
      xls.WriteLine("<ss:Style ss:ID=\"Default\" ss:Name=\"Normal\"><ss:Alignment ss:Vertical=\"Bottom\"/><ss:Borders/><ss:Font/><ss:Interior/><ss:NumberFormat/><ss:Protection/></ss:Style>");
      xls.WriteLine("<ss:Style ss:ID=\"BoldColumn\"><ss:Font x:Family=\"Swiss\" ss:Bold=\"1\"/></ss:Style>");
      xls.WriteLine("<ss:Style ss:ID=\"StringLiteral\"><ss:NumberFormat ss:Format=\"@\"/></ss:Style>");
      xls.WriteLine("<ss:Style ss:ID=\"Decimal\"><ss:NumberFormat ss:Format=\"0.0000\"/></ss:Style>");
      xls.WriteLine("<ss:Style ss:ID=\"Integer\"><ss:NumberFormat ss:Format=\"0\"/></ss:Style>");
      xls.WriteLine("<ss:Style ss:ID=\"DateLiteral\"><ss:NumberFormat ss:Format=\"mm/dd/yyyy;@\"/></ss:Style>");
      xls.WriteLine("</ss:Styles>");
      xls.WriteLine("</ss:Workbook>");
      xls.Flush();
      xls.Close();
    }
  }
  oleCon.Open();
  tableNames = oleCon.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, param);
} 
```

此代码生成了另一个 OleDbException 消息：

> *“外部表不是预期的格式。”*

我可以看到，OleDbConnection 没有创建文件的方法，那么如何**创建**这个 Excel 文件以便我可以使用它呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T13:34:22.520

我查看了各种网站上发布的大量代码，最终选择了一个非常适合我需要的版本。

我希望我为链接添加了书签，这样我就可以在这里发布它，但是在尝试了这么多失败之后，我似乎停止了跟踪。

无论如何，如果它对其他人有帮助，这是`ExcelWriter`我最终学习的课程（如何使用课程紧随其后）：

```
public class ExcelWriter : IDisposable {

  private XmlWriter writer;
  private static readonly DateTime NODATE = new DateTime(1900, 1, 1);

  public enum CellStyle { General, Number, Currency, DateTime, ShortDate };

  public ExcelWriter(string outputFileName) {
    if (!String.IsNullOrEmpty(outputFileName)) {
      XmlWriterSettings settings = new XmlWriterSettings();
      settings.Indent = true;
      writer = XmlWriter.Create(outputFileName, settings);
    } else {
      throw new Exception("Output path not supplied.");
    }
  }

  public void Close() {
    if (writer != null) {
      writer.Close();
      writer = null;
    } else {
      throw new NotSupportedException("Already closed.");
    }
  }

  public static bool HasValue(object obj) {
    if (obj != null) {
      if (obj != DBNull.Value) {
        string txt = obj.ToString();
        return (0 < txt.Length);
      }
    }
    return false;
  }

  public void WriteStartDocument() {
    if (writer != null) {
      writer.WriteProcessingInstruction("mso-application", "progid=\"Excel.Sheet\"");
      writer.WriteStartElement("ss", "Workbook", "urn:schemas-microsoft-com:office:spreadsheet");
      WriteExcelStyles();
    } else {
      throw new NotSupportedException("Cannot write after closing.");
    }
  }

  public void WriteEndDocument() {
    if (writer != null) {
      writer.WriteEndElement();
    } else {
      throw new NotSupportedException("Cannot write after closing.");
    }
  }

  private void WriteExcelStyleElement(CellStyle style) {
    if (writer != null) {
      writer.WriteStartElement("Style", "urn:schemas-microsoft-com:office:spreadsheet");
      writer.WriteAttributeString("ID", "urn:schemas-microsoft-com:office:spreadsheet", style.ToString());
      writer.WriteEndElement();
    }
  }

  private void WriteExcelStyleElement(CellStyle style, string NumberFormat) {
    if (writer != null) {
      writer.WriteStartElement("Style", "urn:schemas-microsoft-com:office:spreadsheet");
      writer.WriteAttributeString("ID", "urn:schemas-microsoft-com:office:spreadsheet", style.ToString());
      writer.WriteStartElement("NumberFormat", "urn:schemas-microsoft-com:office:spreadsheet");
      writer.WriteAttributeString("Format", "urn:schemas-microsoft-com:office:spreadsheet", NumberFormat);
      writer.WriteEndElement();
      writer.WriteEndElement();
    }
  }

  private void WriteExcelStyles() {
    if (writer != null) {
      writer.WriteStartElement("Styles", "urn:schemas-microsoft-com:office:spreadsheet");
      WriteExcelStyleElement(CellStyle.General);
      WriteExcelStyleElement(CellStyle.Number, "General Number");
      WriteExcelStyleElement(CellStyle.DateTime, "General Date");
      WriteExcelStyleElement(CellStyle.Currency, "Currency");
      WriteExcelStyleElement(CellStyle.ShortDate, "Short Date");
      writer.WriteEndElement();
    }
  }

  public void WriteStartWorksheet(string name) {
    if (writer != null) {
      writer.WriteStartElement("Worksheet", "urn:schemas-microsoft-com:office:spreadsheet");
      writer.WriteAttributeString("Name", "urn:schemas-microsoft-com:office:spreadsheet", name);
      writer.WriteStartElement("Table", "urn:schemas-microsoft-com:office:spreadsheet");
    } else {
      throw new NotSupportedException("Cannot write after closing.");
    }
  }

  public void WriteEndWorksheet() {
    if (writer != null) {
      writer.WriteEndElement();
      writer.WriteEndElement();
    } else {
      throw new NotSupportedException("Cannot write after closing.");
    }
  }

  public void WriteExcelColumnDefinition(int columnWidth) {
    if (writer != null) {
      writer.WriteStartElement("Column", "urn:schemas-microsoft-com:office:spreadsheet");
      writer.WriteStartAttribute("Width", "urn:schemas-microsoft-com:office:spreadsheet");
      writer.WriteValue(columnWidth);
      writer.WriteEndAttribute();
      writer.WriteEndElement();
    } else {
      throw new NotSupportedException("Cannot write after closing.");
    }
  }

  public void WriteExcelUnstyledCell(string value) {
    if (writer != null) {
      writer.WriteStartElement("Cell", "urn:schemas-microsoft-com:office:spreadsheet");
      writer.WriteStartElement("Data", "urn:schemas-microsoft-com:office:spreadsheet");
      writer.WriteAttributeString("Type", "urn:schemas-microsoft-com:office:spreadsheet", "String");
      writer.WriteValue(value);
      writer.WriteEndElement();
      writer.WriteEndElement();
    } else {
      throw new NotSupportedException("Cannot write after closing.");
    }
  }

  public void WriteStartRow() {
    if (writer != null) {
      writer.WriteStartElement("Row", "urn:schemas-microsoft-com:office:spreadsheet");
    } else {
      throw new NotSupportedException("Cannot write after closing.");
    }
  }

  public void WriteEndRow() {
    if (writer != null) {
      writer.WriteEndElement();
    } else {
      throw new NotSupportedException("Cannot write after closing.");
    }
  }

  public void WriteExcelStyledCell(object value, CellStyle style) {
    if (writer != null) {
      writer.WriteStartElement("Cell", "urn:schemas-microsoft-com:office:spreadsheet");
      writer.WriteAttributeString("StyleID", "urn:schemas-microsoft-com:office:spreadsheet", style.ToString());
      writer.WriteStartElement("Data", "urn:schemas-microsoft-com:office:spreadsheet");
      switch (style) {
        case CellStyle.General:
          writer.WriteAttributeString("Type", "urn:schemas-microsoft-com:office:spreadsheet", "String");
          if (!HasValue(value)) {
            value = String.Empty; // DBNull.Value causes issues in an Excel cell.
          }
          break;
        case CellStyle.Number:
        case CellStyle.Currency:
          writer.WriteAttributeString("Type", "urn:schemas-microsoft-com:office:spreadsheet", "Number");
          if (!HasValue(value)) {
            value = 0;
          }
          break;
        case CellStyle.ShortDate:
        case CellStyle.DateTime:
          writer.WriteAttributeString("Type", "urn:schemas-microsoft-com:office:spreadsheet", "DateTime");
          if (!HasValue(value)) {
            value = NODATE;
          }
          break;
      }
      writer.WriteValue(value);
      writer.WriteEndElement();
      writer.WriteEndElement();
    } else {
      throw new NotSupportedException("Cannot write after closing.");
    }
  }

  public void WriteExcelAutoStyledCell(object value) {
    if (writer != null) { //write the <ss:Cell> and <ss:Data> tags for something
      if (value is Int16 || value is Int32 || value is Int64 || value is SByte ||
          value is UInt16 || value is UInt32 || value is UInt64 || value is Byte) {
        WriteExcelStyledCell(value, CellStyle.Number);
      } else if (value is Single || value is Double || value is Decimal) { //we'll assume it's a currency
        WriteExcelStyledCell(value, CellStyle.Currency);
      } else if (value is DateTime) { //check if there's no time information and use the appropriate style
        WriteExcelStyledCell(value, ((DateTime)value).TimeOfDay.CompareTo(new TimeSpan(0, 0, 0, 0, 0)) == 0 ? CellStyle.ShortDate : CellStyle.DateTime);
      } else {
        WriteExcelStyledCell(value, CellStyle.General);
      }
    } else {
      throw new NotSupportedException("Cannot write after closing.");
    }
  }

  #region IDisposable Members

  public void Dispose() {
    if (writer != null) {
      writer.Close();
      writer = null;
    }
  }

  #endregion

} 
```

**例子：**

以下是如何使用此类将整个 DataSet 写入 Excel 工作簿：

```
 /// <summary>
  /// Saves data to the Access database to the Excel file specified by the filename
  /// </summary>
  public void Save(string excelFile) {
    using (ExcelWriter writer = new ExcelWriter(excelFile)) {
      writer.WriteStartDocument();
      foreach (DataTable table in Dataset.Tables) {
        writer.WriteStartWorksheet(string.Format("{0}", SafeName(table.TableName))); // Write the worksheet contents
        writer.WriteStartRow(); //Write header row
        foreach (DataColumn col in table.Columns) {
          writer.WriteExcelUnstyledCell(col.Caption);
        }
        writer.WriteEndRow();
        foreach (DataRow row in table.Rows) { //write data
          writer.WriteStartRow();
          foreach (object o in row.ItemArray) {
            writer.WriteExcelAutoStyledCell(o);
          }
          writer.WriteEndRow();
        }
        writer.WriteEndWorksheet(); // Close up the document
      }
      writer.WriteEndDocument();
      writer.Close();
    }
  } 
```

我希望其他人能从中得到很多使用！

~乔普

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T14:58:06.993

我找到了一个可行的解决方案，只需像这样删除 IMEX 参数：

```
string connString = String.Format(
    "Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};" + 
    "Extended Properties=\"Excel 8.0;HDR={1}\"",
    file,
    (containsHeader ? "Yes" : "No")
); 
```

当我尝试 Excel 12.0 时，它会创建一个文件，但我无法在 Excel 应用程序中打开它。

无论如何，这些东西适用于 XLS 文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T02:52:29.107

使用模板（已经存在的空 excel 文件）将该文件复制到具有所需名称的新 excel 文件中。那是你的创造！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-03T07:21:52.687

要对文件启用读写，您可以使用属性：模式

```
Provider=Microsoft.ACE.OLEDB.12.0;Data Source=EXCELFILENAME;Mode=ReadWrite;Extended Properties='Excel 12.0 Macro;HDR=YES;' 
```

# iphone - NSMutableArray UIButtons 动作？

> ID：10637919
> 
> 赞同：0
> 
> 时间：2012-05-17T14:41:44.287
> 
> 标签：iphone, objective-c, ios, uibutton, nsmutablearray

我正在以`UIButtons`编程方式创建，然后将它们存储`UIButtons`在`NSMutableArray`. 所有这些`UIButtons`都有一些文本作为标题。我没有这些的出口`UIButtons`。现在我想在我触摸或单击某些时分配`UIButton`to的标题。但对我来说问题是这样的：我怎样才能在这些. 因为我以编程方式创建，而且这些也没有插座。这是我创建按钮的代码：`UIlabel``UIButton``UIButtons``UIButtons``UIButtons`

```
 saveBtn = [[NSMutableArray alloc] init];

    for (int i=0; i<30; i++) {

        if (btnn>8) {
             UIButton *btn = [UIButton   
            buttonWithType:UIButtonTypeRoundedRect];
            btn.frame = CGRectMake(200.0 , spacey, 30.0, 30.0);
            int idx;
            idx = arc4random()%[arr count];
            NSString* titre1 = [arr objectAtIndex:idx];
            [btn setTitle:titre1 forState:UIControlStateNormal];      
            spacey=spacey+30;
            spacex = 80;
            btnn = 0;
            }
        else {
            btnn++ ;
            UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
            btn.frame = CGRectMake(spacex, spacey, 30.0, 30.0);
            int idx;
            idx = arc4random()%[arr count];
            NSString* titre1 = [arr objectAtIndex:idx];
            [btn setTitle:titre1 forState:UIControlStateNormal];   
            spacex = spacex + 30;
            [saveBtn addObject:btn];
            [self.view addSubview:btn];

        }
    } 
```

请任何人都可以指导我如何为这些执行操作`NSMutableArray` `UIButtons`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:46:25.650

您可以使用以下方式以编程方式向 UIButton 添加操作：

```
[button addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];

- (void)buttonClicked:(UIButton *)btn
{
    [btn setTitle:@"UnAutreTitre" forState:UIControlStateNormal];
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:51:20.243

为操作创建`UIButton`操作，您将在其中将 发送`(id)sender`到`actionButtonFunction`.

将发件人分配给`UIButton`，然后在 中获取按钮标题`NSString`。

```
-(UIAction)buttonAction:(id)sender
{
    UIButton *button = (UIButton *)sender;
    NSString *buttonTitle = button.text;

    // further code goes here
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T14:49:39.213

只需设置标签并将目标添加到按钮。稍后，您可以获取点击了哪个按钮。

# java - 哪些版本的 Android SDK 支持在哪些 Java 版本中进行编码？

> ID：10637921
> 
> 赞同：10
> 
> 时间：2012-05-17T14:41:55.827
> 
> 标签：java, android, version, android-2.2-froyo, android-sdk-2.3

我正在为 Android SDK 2.3.3 编写一个 Android 应用程序，但后来我被要求在运行 Android 2.2.1 的设备上对其进行测试。所以我将目标设置为 8 而不是 10。但是 java.util.concurrent.TimeUnit 只有 Java 1.5 功能集，而不是 java.util.concurrent.TimeUnit 的 Java 1.6/1.7 功能集。因此，我将 TimeUnit 的 openjdk 6 实现放入我的 Android 应用程序包中，一切正常。

有谁知道我在哪里可以获得一些文档，这些文档给了我一个图表，告诉我，例如，当使用官方 SDK 时，Android 2.2 必须使用 Java 1.5 关键字/语法/API 进行编码，Android 2.3.3 可以编码使用 Java 1.6 关键字/语法/API 等...？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T14:57:02.193

您正试图将 Android 视为 Java 的一个子集，而事实并非如此。它们是完全分开的。尽管 Android 来自 Java，但它与 Java 相差甚远，两者之间不再存在“版本方面”的相关性。

您可以查看的是 Android 文档。对于每条指令/命令/方法/属性，在右上角，您会找到可以访问所述属性的 api 级别。

单击 api 级别将带您进入一个页面，该页面包含一个将 api 级别转换为 Android 版本的表格。

确定是否允许使用属性的简单方法是使用 eclipse 并执行您刚才所做的操作：更改目标 api 级别。然后，任何对您不可用的方法或属性的调用都会产生致命错误。

# performance - 添加索引会降低执行时间

> ID：10637922
> 
> 赞同：1
> 
> 时间：2012-05-17T14:42:03.000
> 
> 标签：performance, oracle, oracle10g

我有一张这样的桌子：

```
myTable (id, group_id, run_date, table2_id, description) 
```

我也有这样的索引：

```
index myTable_grp_i on myTable (group_id) 
```

我曾经运行过这样的查询：

```
select * from myTable t where t.group_id=3 and t.run_date='20120512'; 
```

它运行良好，每个人都很高兴。直到我添加了另一个索引：

```
index myTable_tab2_i on myTable (table2_id) 
```

我的生活变得悲惨……运行时间几乎是原来的 5 倍！！！执行计划看起来相同（有或没有新索引）：

```
--------------------------------------------------------------------------------
| Id  | Operation                   | Name               | Rows  | Bytes | Cost
--------------------------------------------------------------------------------
|   0 | SELECT STATEMENT            |                    |     1 |   220 | 17019
|*  1 |  TABLE ACCESS BY INDEX ROWID| MYTABLE            |     1 |   220 | 17019
|*  2 |   INDEX RANGE SCAN          | MYTABLE_GRP_I      | 17056 |       |    61
--------------------------------------------------------------------------------
Predicate Information (identified by operation id):
---------------------------------------------------
   1 - filter("T"."RUN_DATE"='20120512')
   2 - access("T"."GROUP_ID"=3) 
```

我的头上几乎没有头发，为什么要在不在 where 子句中的列上使用另一个未使用的索引会有所作为...

* * *

我将更新我检查的内容
：我删除了新索引，它运行得更快
b. 我在另外 2 个不同的环境中添加了新索引，同样的事情发生了
c。我将 MYTABLE_GRP_I 更改为在 run_date 和 group_id 列上 - 这使它像闪电一样快速运行！

但是为什么会发生呢？

# c++ - 从 2D 图像堆栈渲染 3D 体积

> ID：10637935
> 
> 赞同：1
> 
> 时间：2012-05-17T14:42:43.127
> 
> 标签：c++, opengl, volumes

我参与了一个项目，我需要从体积的一系列图像中渲染 3D 体积。这些图像是通过几种技术创建的，因此它们是所讨论对象的垂直切片。

数据集与[this question](https://stackoverflow.com/questions/6891154/creating-3d-volume-from-2d-slice-set-of-grayscale-images)类似，但提问者正在寻找Matlab解决方案。

目标是让这个绘图接近实时（>1Hz 更新率），从我的研究来看，openGL 似乎是最快的绘图选项。除了以下伪代码算法之外，openGL 中是否有内置函数在 openGL 中渲染音量。

```
foreach(Image in Folder)
     foreach(Pixel in Image)
        pointColour(pixelColour)
        pointLocation(Pixel.X,Pixel.Y,Image.Z)
        drawPoint 
```

我不关心图像之间的插值，当前间距足够小，不需要它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:09:10.997

恐怕如果您正在考虑体绘制，则需要首先了[解体绘制积分](http://www.cs.unm.edu/~kmorel/documents/dissertation/thesis_full/node9.html)，因为屏幕上像素的合成颜色是当前视角下与其对齐的所有体素的函数.

使用传统图形硬件实时渲染体积有两种方法。

1.  将体积渲染为一组与 3D 纹理（代理几何）相交的 2D 视图对齐切片。[在这里](http://http.developer.nvidia.com/GPUGems/gpugems_ch39.html)解释。
2.  使用使用可编程图形硬件的光线投射器，教程[在这里](http://www.daimi.au.dk/~trier/?page_id=98)。

这不是一个容易解决的问题 - 但根据您需要做的事情可能会更简单一些。例如：您是否关心拥有交互式传输功能？你想要透视图，还是正交投影就足够了？你在渲染等值面吗？您是否仅将其用于[MPR 类型的](http://en.wikipedia.org/wiki/X-ray_computed_tomography#Multiplanar_reconstruction)视图？

# excel - 将冒号插入字符串中的数字

> ID：10637938
> 
> 赞同：2
> 
> 时间：2012-05-17T14:43:01.490
> 
> 标签：excel, vba

我在 Excel 电子表格中有大约 300 个字符串。

每个都有不同的长度，但都采用相同的形式：

```
0033",@"0103",@"0133",@"0203",@"0233", nil 
```

我需要在每个数字的中心添加冒号，例如上面的示例将变为：

```
00:33",@"01:03",@"01:33",@"02:03",@"02:33", nil 
```

我研究了各种 VBA 函数，但找不到任何可以将字符添加到字符串的函数。也许在 Excel 中有更简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T15:27:40.927

在模块中添加此功能。

```
Function InsertColon(ByVal original As String) As String
    Dim re As Object
    Set re = CreateObject("vbscript.regexp")
    re.Pattern = "(\d\d)(\d\d)"
    re.Global = True
    InsertColon = re.Replace(original, "$1:$2")
End Function 
```

现在您可以轻松地将其用作公式。例如，如果单元格 A1 包含您的原始字符串，并且您想在单元格 A2 中显示格式化的值，则在单元格 A2 中输入以下公式：

```
=InsertColon(A1) 
```

# ios - UIWebView 仅在必要时清除缓存

> ID：10637939
> 
> 赞同：2
> 
> 时间：2012-05-17T14:43:01.783
> 
> 标签：ios, caching, uiwebview, nsurlconnection

如何`UIWebView`仅在必要时删除缓存，例如当响应状态代码为 304 时？我用：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response 
```

from`NSURLConnectionDelegate`从响应中获取状态码：

```
int code = [(NSHTTPURLResponse*)response statusCode]; 
```

但代码始终为 200（OK）。如何获取代码 304（未更改）以知道何时需要清除缓存？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:25:53.013

> > 如何获取代码 304。但代码始终为 200（确定）

我不明白你的问题 - 它是发送 http 代码的服务器，你是在问如何更改服务器以使其发送 304？

不管怎样，你的 UIWebView 和 NSURLConnection 之间有什么联系。您是否出于某种原因在 shouldStartLoadWithRequest: 内部使用 NSURLConnection？

# jquery - CSS 或 jQuery 高度继承问题

> ID：10637940
> 
> 赞同：0
> 
> 时间：2012-05-17T14:43:06.240
> 
> 标签：jquery, css, inheritance, height

我在用作边框的框内的内容高度有问题。我基本上有一个内部内容框和一个背景框顶部的侧边栏。背景框从内部内容框继承它的高度，它从内容本身继承它的高度。问题在于，由于侧边栏与内部内容框的内容量不同，所以侧边栏的高度与内部内容框的高度不匹配。我在 jQuery 中编写了一个小脚本来修复它，但它不兼容跨浏览器。

```
jQuery(function(){
  var pageHeight = jQuery('div#internalcontent').height();
  jQuery('div#sidebar').css('height', pageHeight);
}); 
```

此代码有时在 Chrome 中有效，但在 Firefox 中通常会失败。我认为它与页面加载方式有关 - 例如，在分配页面高度时不会加载所有元素。

有谁知道在 CSS 中执行此操作或在 javascript 中修复它的方法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:47:40.747

在 $(document).ready() 之后调用该代码

```
$(document).ready(function(){
  var pageHeight = $('div#internalcontent').height();
  $('div#sidebar').css('height', pageHeight);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:50:10.910

据我所知， @Adam`jQuery(function(){});`应该产生与文档就绪处理程序相同的行为。[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

# android - 在状态 0 中调用暂停

> ID：10637942
> 
> 赞同：1
> 
> 时间：2012-05-17T14:43:07.640
> 
> 标签：android, android-mediaplayer

这是我的代码：

* * *

```
 playbtn.setOnClickListener(new OnClickListener() 
            {
                    public void onClick(View arg0) 
                    {    
                     if(play==false)
                  {
                     playbtn.setBackgroundResource(R.drawable.pausebutton); 
                     play=true;
                     tb_tan.setClickable(false);
                     mp.start();
                  }
                  else
                 {
                      playbtn.setBackgroundResource(R.drawable.playbutton); 
                      play=false;
                      mp.pause();
                      if(mp1.isPlaying())
                      {
                      mp1.pause();
                      }
                      tb_tan.setClickable(true);        
                  }         
                     }                              
                }); 
```

* * *

每当我单击**PAUSE**按钮时，我都会收到此错误“ **PAUSE CALLED IN STATE 0** ”。有人可以帮忙吗？

# arrays - JavaCV矩阵运算的任何例子？

> ID：10637943
> 
> 赞同：0
> 
> 时间：2012-05-17T14:43:09.433
> 
> 标签：arrays, opencv, matrix, javacv

`imadd`我需要将图像转换为矩阵以对其进行数学运算，就像使用 Matlab ( , `imsubtract`, `immultiply`, )所做的那样`imdivide`。

我只能做到这一点：

```
CvMat mtx = new CvMat(iplUltima);
opencv_core.cvTranspose(mtx,mtx);

iplUltima = new IplImage(mtx);        
pbxImagenTransformada.setIcon(new ImageIcon(iplUltima.getBufferedImage())); 
```

但是当我尝试做同样的事情时，`cvSum`或者`cvAdd`我得到了错误。你能给我一个使用的例子吗？我试图替换`cvTranspose`为，`cvAdd`但这是一个错误。

# c# - 使用 Linq 在字符串上运行正则表达式

> ID：10637944
> 
> 赞同：5
> 
> 时间：2012-05-17T14:43:12.180
> 
> 标签：c#, regex, string, linq

我有一个字符串，我希望使用 Linq 运行一个正则表达式来将我的字符串缩减为一个与我的 reg ex 匹配的较小的子字符串。

我目前的代码给出了错误

> “char”不包含“Name”的定义，并且找不到接受“char”类型的第一个参数的扩展方法“Name”

我的代码：

```
string variable = result.Name.Select(r => regEx.Match(r.Name).Groups[2].ToString()); 
```

`Result.Name`是自定义类中包含的字符串。

我做错了什么？我的语法/理解有什么问题？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-17T14:51:01.153

你在寻找这样的东西吗？

```
string[] result = Regex.Matches(input, pattern)
                       .Cast<Match>()
                       .Select(match => match.Groups[2].Value)
                       .ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T14:47:43.820

您正在调用`Select`单个字符串。`Select`将您的字符串视为一系列字符，因此`r`您的 lambda 表达式中的`char`.

如果您只想将一个字符串传递给正则表达式，并且只需要一个匹配项，那么您根本不需要 LINQ。打电话

```
string variable = regEx.Match(result.Name).Groups[2].ToString(); 
```

（我假设`result.Name`是您的单个字符串，基于您的示例代码。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T14:48:09.673

难道不应该

```
string variable = result.Select(r => regEx.Match(r.Name).Groups[2].ToString()); 
```

如果您在 Name 字段上运行 Select，您将在一个字符串上运行它，该字符串是一个 char 数组

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-22T10:36:12.270

这应该工作...

```
string result = result.Name.Select(@regEx => Regex.Match(match.Groups[2].ToString(), @regEx)); 
```

# c++ - 使用Boost datetime，我如何创建一个用零填充的月份字符串？

> ID：10637947
> 
> 赞同：0
> 
> 时间：2012-05-17T14:43:16.780
> 
> 标签：c++, boost, boost-date-time

使用Boost datetime，我如何创建一个前9个月用零填充的月份字符串？

所以我需要“05”而不是“5”。

```
date Date(2012,05,1);

string monthStringAsNumber = lexical_cast<string>(date.Month().as_number()); 
// returns "5"

string monthStringAsNumberTwo = date.Month().as_short_string();
// returns "Aug" 
```

我想要“05”。我该怎么做呢？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T15:25:04.000

你真的不需要`lexical_cast`以下应该工作：

```
stringstream ss;
ss << setw(2) << setfill('0') << date.Month().as_number());
string monthStringAsNumber = ss.str(); 
```

或者你可以去这个咆哮：

```
const string mn[] ={ "01", "02", "03", "04", "05", "06",
                     "07", "08", "09", "10", "11", "12" };
const string& monthStringAsNumber = mn[ date.Month().as_number() ]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:45:48.797

一般来说，如果您想以某种自定义格式获取日期时间，您可以查看[http://www.boost.org/doc/libs/1_49_0/doc/html/date_time/date_time_io.html](http://www.boost.org/doc/libs/1_49_0/doc/html/date_time/date_time_io.html)，例如

```
#include <boost/date_time.hpp>
#include <iostream>
#include <sstream>
#include <string>

int main(int argc, char** argv)
{
    boost::gregorian::date date (2012,5,1);
    boost::gregorian::date_facet* facet = 
            new boost::gregorian::date_facet("%Y %m %d");
    // ^ yes raw pointer here, and don't delete it.
    std::ostringstream ss;
    ss.imbue(std::locale(std::locale(), facet));
    ss << date;
    std::string s = ss.str();

    std::cout << s << std::endl;   // 2012 05 01
    return 0;
} 
```

# ajax - 如何阻止外部http请求？（保护 AJAX 调用）

> ID：10637951
> 
> 赞同：6
> 
> 时间：2012-05-17T14:43:27.380
> 
> 标签：ajax, security, http, ring

我想使用 post 来更新数据库并且不希望人们手动执行它，即它应该只能通过客户端中的 AJAX 来实现。在这种情况下是否有一些众所周知的加密技巧可以使用？

假设我正在发出一个 GET 请求，将一个新用户插入到我的数据库中`site.com/adduser/<userid>`。有人可以通过发出虚假请求来过度填充我的数据库。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T20:18:10.230

在这种情况下，无法避免伪造请求，因为客户端浏览器已经拥有发出请求所需的一切；恶意用户只需进行一些调试即可弄清楚如何向您的后端发出任意请求，甚至可能使用您自己的代码使其更容易。你不需要“加密技巧”，你只需要混淆，这只会让伪造有点不方便，但仍然不是不可能的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T22:54:03.740

这是可以实现的。
每当您呈现应该发出此类请求的页面时。生成一个随机令牌并将其存储在会话（用于经过身份验证的用户）或数据库中（如果此请求被公开允许）。 如果令牌有效或无效（来自会话或数据库）
，而不是在收到此类请求时调用`site.com/adduser/<userid>`call如果 令牌正确，则处理请求并从会话/数据库中删除使用的令牌 如果令牌不正确，则拒绝请求。`site.com/adduser/<userid>/<token>`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-26T18:24:04.953

> 我真的不需要限制对服务器的访问（虽然那会很棒），我正在寻找一种加密技巧，它可以让服务器知道什么时候来自应用程序而不是由用户使用嗅探令牌。

你不可以做这个。这几乎是客户端/服务器应用程序的基本问题之一。这就是它不起作用的原因：假设您有一种方法可以让您的客户端应用程序向服务器验证自己的身份 - 无论是秘密密码还是其他方法。应用程序需要的信息必须是应用程序可以访问的（密码隐藏在某处或其他地方）。但是因为它在用户的计算机上运行，​​这意味着他们也可以访问这些信息：他们所需要的只是查看源代码、二进制文件或应用程序与服务器之间的网络流量，最终他们会弄清楚您的应用程序验证和复制它的机制。也许他们甚至会复制它。也许他们' 我会编写一个巧妙的 hack 来让你的应用完成繁重的工作（你总是可以向应用发送虚假的用户输入）。但无论如何，他们已经获得了所需的所有信息，并且无法阻止他们拥有它也不会阻止您的应用程序拥有它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T08:04:51.430

[防止直接访问由 ajax 函数调用的文件](https://stackoverflow.com/questions/1756591/prevent-direct-access-to-file-called-by-ajax-function)似乎解决了这个问题。

你可以（在其他解决方案中，我敢肯定）......

*   使用会话管理（登录创建会话）；
*   向客户端发送一个唯一的密钥，该密钥需要在过期之前返回（不能重复使用，也不能存储以供以后使用）；
*   和/或在链接的答案中设置标题。

但是，如果人们足够努力，任何事情都可能被欺骗。唯一完全安全的系统是任何人都无法访问的系统。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-21T08:25:17.847

这是与 CSRF 相同的问题 - 解决方案是相同的：在 AJAX 请求中使用一个令牌，该令牌您以前存储在 eslewhere （或可以重新生成，例如通过使用 sessin id 作为密钥加密参数）。[Chriss Shiflett](http://shiflett.org/articles/cross-site-request-forgeries)对此有一些明智的说明，并且有一个[OWASP 项目](https://www.owasp.org/index.php/Category%3aOWASP_CSRFGuard_Project)用于使用 PHP 检测 CSRF

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-26T18:44:18.060

这是一些授权问题：只有授权请求才会导致创建新用户。因此，当收到这样的请求时，您的服务器需要检查它是否来自被授权创建新用户的客户端。

现在主要的问题是如何决定什么请求被授权。在大多数情况下，这是通过用户角色和/或一些票务系统完成的。使用用户角色，您将需要解决其他问题，例如用户识别和用户身份验证。但如果这已经解决，您可以轻松地将用户映射到角色，例如*Alice 是管理员*，*Bob 是普通用户*，只有管理员有权创建新用户。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-17T18:46:51.817

它像任何其他网页一样工作：登录身份验证，检查推荐人。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-23T23:11:14.063

解决方案是将粗线添加到 ajax 请求中。此外，您应该查看基本身份验证，这不会是唯一的保护者。您可以使用 ajax 页面中的这些代码获取收入

阿贾克斯调用

```
function callit()
{
 if(window.XMLHttpRequest){xmlhttp=new XMLHttpRequest();}else{xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}
 xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4&&xmlhttp.status==200){document.getElementById('alp').innerHTML=xmlhttp.responseText;}}
 xmlhttp.open("get", "call.asp", true);
 **xmlhttp.setRequestHeader("X-Requested-With","XMLHttpRequest");**
 xmlhttp.send();
} 
```

PHP/ASP 请求的页面答案

ASP

```
If Request.ServerVariables("HTTP_X-Requested-With") = "XMLHttpRequest" Then
 'Do stuff
Else
 'Kill it
End If 
```

PHP

```
if( isset( $_SERVER['HTTP_X_REQUESTED_WITH'] ) && ( $_SERVER['HTTP_X_REQUESTED_WITH'] == 'XMLHttpRequest' ) )
{
 //Do stuff
} else {
 //Kill it
} 
```

# .net - Windows CE 5.0 及更高版本的系统事件日志

> ID：10637957
> 
> 赞同：2
> 
> 时间：2012-05-17T14:43:43.627
> 
> 标签：.net, compact-framework, windows-ce

我正在调查 WinCE 上的 .net 应用程序崩溃之一。应用程序突然崩溃，没有抛出异常。我知道在桌面环境中有事件查看器，我们可以在其中了解错误代码或任何其他信息。我的问题是，Windows CE 中是否有任何类似的机制可用？

谢谢， 奥姆基

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:55:59.090

不，Windows CE 没有系统事件日志，因此也没有关联的查看器。您必须将日志记录添加到您自己的应用程序中。您是否添加了[UnhandledException 处理程序](http://www.danielmoth.com/Blog/appdomainunhandledexception-part-1.aspx)？

# sql - 如何将 .bak 文件导入 Microsoft SQL Server 2012？

> ID：10637958
> 
> 赞同：29
> 
> 时间：2012-05-17T14:43:44.550
> 
> 标签：sql, sql-server, sql-server-2012

谷歌搜索了一段时间，没有答案....有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-17T15:52:40.543

对于 SQL Server 2008，我想这个过程是相似的......？

*   打开 SQL Server 管理工作室
*   登录到 SQL Server 实例，右键单击“数据库”，选择“还原数据库”
*   向导出现，你想要“从设备”，它允许你选择一个 .bak 文件

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-17T14:45:23.320

最有可能使用该`RESTORE DATABASE`命令。`bak`是用于数据库备份文件的通用扩展名。您可以[在 MSDN 上](http://msdn.microsoft.com/en-us/library/ms186858.aspx)找到此命令的文档。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-26T22:05:07.173

不知道为什么他们删除了像在 SQL Server Management Studio 2008 及更早版本中一样右键单击数据库并恢复的选项，但如上所述，您可以从`.BAK`文件中恢复：

```
RESTORE DATABASE YourDB FROM DISK = 'D:BackUpYourBaackUpFile.bak' WITH REPLACE 
```

但是你会想要`WITH REPLACE`而不是`WITH RESTORE`将它从一台服务器移动到另一台服务器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-13T12:47:02.400

如果您不想使用向导，可以使用以下脚本；

```
RESTORE DATABASE myDB
FROM  DISK = N'C:\BackupDB.bak' 
WITH  REPLACE,RECOVERY,  
MOVE N'HRNET' TO N'C:\MSSQL\Data\myDB.mdf',  
MOVE N'HRNET_LOG' TO N'C:\MSSQL\Data\myDB.ldf' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-18T07:03:34.443

`.bak`是在 SQL Server 中生成的备份文件。

备份文件导入是指恢复数据库，可以在SQL Server 2012创建的数据库上恢复，但备份文件应来自SQL Server 2005、2008、2008 R2、2012数据库。

您可以使用以下命令恢复数据库...

```
RESTORE DATABASE YourDB FROM DISK = 'D:BackUpYourBaackUpFile.bak' WITH Recovery 
```

您想了解如何恢复`.bak`文件，请点击以下链接：

[http://msdn.microsoft.com/en-us/library/ms186858(v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms186858(v=sql.90).aspx)

# extjs - 如何在 store.sync() 之后更新所有属性？

> ID：10637959
> 
> 赞同：2
> 
> 时间：2012-05-17T14:43:48.960
> 
> 标签：extjs, extjs4.1

在 sync() 仅更新已更改但并非全部来自响应的那一行之后。

**模型：**

```
Ext.define('Exp.model.ProfileChannel', {
    extend: 'Ext.data.Model',
    fields: ['id', 'channel', 'server', 'profile'],

    proxy: {
        type: 'ajax',
        api: {
            read: '/profilechannel/list',
            update: '/profilechannel/save'
        },
        reader: {
            type: 'json',
            root: 'data'
        }
    }
}); 
```

店铺：

```
Ext.define('Exp.store.ProfileChannels', {
    extend: 'Ext.data.Store',
    model: 'Exp.model.ProfileChannel',
    autoSync: true
}); 
```

可以说在商店我有这样的记录：

```
{
    id: '1',
    profile: 'profile id',
    channel: '',
    server: ''
} 
```

然后：`record.set('channel', 'channel id');`

**回应**：

```
{
    "success":true,
    "data":[
        {
            id: '1',
            profile: 'profile id',
            channel: 'channel id',
            server: 'server id added on backend'
        }
    ]
} 
```

最后我有这样的**记录**：

```
{
    id: '1',
    profile: 'profile id',
    channel: 'channel id',
    server: ''
} 
```

所以问题是如何更新和服务器值我有新的响应值..这是一个错误吗？还是我做错了？如果 extjs 忽略它们，我为什么要放置所有属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:07:59.410

它的行为应该完全符合您的预期。更新过程后从商店返回的所有记录都应替换您可能已经在商店中拥有的本地副本。您可能想检查 ExtJs 代码并对其进行调试以查看问题所在。

我绝对使用与 ExtJs 4.0.7 相同的逻辑。4.1 版本可能出现问题，或者您可能需要调整商店/代理中的某些配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T18:24:34.230

i also had the some problem that records didnt updated on 4.1\. after some debugging i found out that **all extjs model fields need to return** in the server response!

extjs didnt throw any error, only the failure callback on store.sync() and record.save() throw me an error. it was hard to find...

# ruby - Ruby for 循环中的两个索引

> ID：10637960
> 
> 赞同：1
> 
> 时间：2012-05-17T14:43:50.213
> 
> 标签：ruby, for-loop

你能有一个有两个索引的 ruby​​ for 循环吗？IE：

```
 for i,j in 0..100
     do something
 end 
```

在谷歌中找不到任何东西

编辑：添加更多细节

我需要像这样比较两个不同的数组

```
Index:  Array1:  Array2:

   0       a        a
   1       a        b
   2       a        b 
   3       a        b
   4       b        b
   5       c        b
   6       d        b
   7       d        b
   8       e        c
   9       e        d
   10      e        d
   11               e
   12               e 
```

但是知道它们都有相同的项目（abcde）这是我的伪逻辑，让我们假设整个事情都在一个循环中

```
#tese two if states are for handling end-of-array cases
If Array1[index_a1] == nil
    Errors += Array1[index_a1-1]
    break
If Array2[index_a1] == nil
    Errors += Array2[index_a2-1]
    break

#this is for handling mismach
If Array1[index_a1] != Array2[index_a2]

    Errors += Array1[index_a1-1] #of course, first entry of array will always be same

    if Array1[index_a1] != Array1[index_a1 - 1]
         index_a2++ until Array1[index_a1] == Array2[index_a2]
         index_a2 -=1 (these two lines are for the loop's sake in next iteration)
         index_a1 -=1

    if Array2[index_a2] != Array2[index_a2 - 1]
         index_a1++ until Array1[index_a1] == Array2[index_a2]
         index_a2 -=1 (these two lines are for the loop's sake in next iteration)
         index_a1 -=1 
```

简而言之，在上面的示例中，

```
 Errors looks like this
 a,b,e 
```

因为 c 和 d 都很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:07:30.233

您可以使用枚举器而不是数字索引来迭代两个数组。此示例同时迭代`a1`，`a2`回显以 in`a2`对应字母开头的第一个单词`a1`，跳过 in 中的重复项`a2`：

```
a1 = ["a", "b", "c", "d"]
a2 = ["apple", "angst", "banana", "clipper", "crazy", "dizzy"]

e2 = a2.each
a1.each do |letter|
  puts e2.next
  e2.next while e2.peek.start_with?(letter) rescue nil
end 
```

（它假设所有字母`a1`都至少有一个单词，`a2`并且都已排序——但你明白了。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T17:20:47.683

for 循环不是在 Ruby 中遍历数组的最佳方法。随着你的问题的澄清，我认为你有一些可能的策略。

你有两个数组，a 和 b。如果两个数组的长度相同：

```
a.each_index do |index|
 if a[index] == b[index]
   do something
 else
   do something else
 end
end 
```

如果 A 比 B 短，这也有效。

如果你不知道哪个更短，你可以这样写：

`controlArray = a.length < b.length ? a : b`要分配 controlArray，请使用 controlArray.each_index。或者你可以`(0..[a.length, b.length].min).each{|index| ...}`用来完成同样的事情。

* * *

查看您对问题的编辑，我想我可以这样改写：给定一个包含重复项的数组，我如何获得每个数组中每个项目的计数并比较计数？在你的情况下，我认为最简单的方法是这样的：

```
a = [:a,:a,:a,:b,:b,:c,:c,:d,:e,:e,:e]
b = [:a,:a,:b,:b,:b,:c,:c,:c,:d,:e,:e,:e]
not_alike = []
a.uniq.each{|value| not_alike << value if a.count(value) != b.count(value)}
not_alike 
```

运行该代码给了我`[:a,:b,:c]`.

如果 a 可能不包含每个符号，那么您将需要一个仅包含符号的数组并使用它而不是 a.uniq，并且`and`条件中的另一个语句可以处理 nil 或 0 计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T17:23:28.977

> *这两个数组实际上是相同的，除了我必须偶尔/或每隔一段时间跳过一些元素*

您可以预先选择不可跳过的，而不是在迭代期间跳过吗？

```
a.select{ ... }.zip( b.select{ ... } ).each do |a1,b1|
  # a1 is an entry from a's subset
  # b1 is the paired entry bfrom b's subset
end 
```

# iphone - ios iphone app - 在init函数中将值设置为变量

> ID：10637961
> 
> 赞同：0
> 
> 时间：2012-05-17T14:43:57.187
> 
> 标签：iphone, ios, init, setvalue, sdwebimage

我将 sdwebimage 和 ktphotobrowser 用于我的缩略图库。因为我有不同的画廊，所以我需要很多资源。但我无法更改 SDWebImageDataSource.m 文件中的数据源

我创建了一个名为的变量`myStr`，现在我想在 SDWebImageDataSource 的`init`函数中获取它，这样我就可以从另一个源获取数据

是否有可能或者我是否可以更改创建另一个名为`initWithString`然后将我的路径传递给该函数的函数？

在我的视图控制器中，我初始化 SDWebImageDataSource， `SDWebImageDataSource *sd = [[SDWebImageDataSource alloc]init];` 然后设置变量 `sd.myStr=@"http://mypath.com";`

但我无法在SDWebImageDataSource.m 文件`myStr`的函数中获取值`init`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:55:48.903

在 Init 方法中，通过设置一个空字符串来初始化您的字符串。这将解决您的问题。或者，如果您可以设法创建自定义方法 [[SDWebImageDataSource alloc]initWithString:@"SOMESTRING"]; 也可以。

# php - 定期打开 URL，无需网络浏览器

> ID：10637963
> 
> 赞同：0
> 
> 时间：2012-05-17T14:44:01.793
> 
> 标签：php, apache, crontab, lynx

我有 PHP Web 脚本，必须使用 Web 浏览器定期执行。我的想法是在预定的时间执行 Lynx 网络浏览器，但问题是放置此脚本的服务器没有安装 Lynx。

还有其他方法可以实现这一目标吗？

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T14:45:57.807

如果能够获取网页的简单用户代理就足够了，您可以使用[**curl**](http://curl.haxx.se/)或[**wget**](http://en.wikipedia.org/wiki/Wget)从服务器的[**crontab**](http://en.wikipedia.org/wiki/Cron)请求您的 URL 。

已经安装 curl 或 wget 的可能性非常高。

如果这两个工具都不可用，另一种解决方案是编写一个 PHP 脚本来执行获取*（通常使用[`file_get_contents`](http://fr.php.net/file_get_contents)或[`curl`](http://fr.php.net/curl)）*，然后从 crontab 调用该脚本。

当然，如果您不需要发送/接收实际的 HTTP 请求，那么正确的做法是直接从 crontab 执行 PHP 脚本，而不是使用任何类型的用户代理。

# c# - 使用 C# 创建自定义 NANT 文件

> ID：10637964
> 
> 赞同：2
> 
> 时间：2012-05-17T14:44:05.433
> 
> 标签：c#, build, nant

我想创建自定义 NANT 文件。为此，我使用 C# 使用来自用户的输入创建一个“.build”文件，我希望创建一个自定义构建。我已经有一个构建文件，但是每次我创建一个新项目时，我都必须创建一个新的构建文件，所以我只想将一些信息输入到 C# 表单中，然后该文件将自动生成。

我尝试使用 XmlTextWriter 女巫适用于我的构建文件的标题，但是当我进入这样的行时遇到问题：

```
<property name= "name" value = "test"/> . 
```

使用 XmlTextWriter 行是这样的：

```
<description>This is a test.</description> . 
```

所以我想知道如何编写我的 NANT 脚本。

它不必与 XmlTextWrite ...

*   编辑 -

我找到了一个方法：

```
textWriter.WriteRaw("<property name = \"project.name\" value=\"" + projectName + "\" />"); 
```

结果 ：

```
<property name = "project.name" value="test" /> 
```

我必须输入“原始”，但总比没有好。我仍然愿意以更好的方式做到这一点！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:45:41.210

我强烈建议不要通过非 XML 特定的文本编写器手工制作自己的 XML。除其他外，这将导致转义字符的痛苦。

我可能遗漏了一些东西，但你应该可以使用`XmlTextWriter`它。这是未经测试的，但你应该得到一般的想法：

```
XmlTextWriter writer = new XmlTextWriter(...);

writer.StartDocument();

writer.WriteStartElement("property");
writer.WriteAttributeString("name", "project.name");
writer.WriteAttributeString("value", projectName);
writer.WriteEndElement();

writer.EndDocument();
writer.Close(); 
```

# sql-server-2008 - TRY/CATCH 中的 DROP CONSTRAINT 语法错误

> ID：10637969
> 
> 赞同：0
> 
> 时间：2012-05-17T14:44:25.233
> 
> 标签：sql-server-2008, tsql

我有以下 T-SQL：

```
USE [MYDB]
GO
SET XACT_ABORT, NOCOUNT ON
GO
BEGIN TRANSACTION;
BEGIN TRY
        ALTER TABLE [dbo].[ContactRole] 
        DROP CONSTRAINT [FK_8bff7074914bc29885004c0a323] 
        GO
END TRY
BEGIN CATCH
    SELECT 
        ERROR_NUMBER() AS ErrorNumber ,ERROR_SEVERITY() AS ErrorSeverity
        ,ERROR_STATE() AS ErrorState ,ERROR_PROCEDURE() AS ErrorProcedure
        ,ERROR_LINE() AS ErrorLine ,ERROR_MESSAGE() AS ErrorMessage;

    IF @@TRANCOUNT > 0
        ROLLBACK TRANSACTION;
END CATCH

IF @@TRANCOUNT > 0
    COMMIT TRANSACTION; 
```

解析时给我这个错误：

> 消息 102，级别 15，状态 1，第 9 行
> “FK_8bff7074914bc29885004c0a323”附近的语法不正确。

单独或仅在事务中时，没有解析错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:51:31.113

删除行`GO`后`ALTER TABLE ... DROP CONSTRAINT ..`

```
....
BEGIN TRANSACTION;
BEGIN TRY
    ALTER TABLE [dbo].[ContactRole] 
    DROP CONSTRAINT [FK_8bff7074914bc29885004c0a323] 

    COMMIT TRANSACTION;
END TRY
BEGIN CATCH
    SELECT 
        ERROR_NUMBER() AS ErrorNumber ,ERROR_SEVERITY() AS ErrorSeverity
        ,ERROR_STATE() AS ErrorState ,ERROR_PROCEDURE() AS ErrorProcedure
        ,ERROR_LINE() AS ErrorLine ,ERROR_MESSAGE() AS ErrorMessage;

    IF @@TRANCOUNT > 0
        ROLLBACK TRANSACTION;
END CATCH 
```

`GO`不是SQL 关键字 - 它仅被 SQL Server Management Studio 理解为“批处理分隔符” *。*

另外：将您的`COMMIT TRANSACTION`语句放在`ALTER TABLE`命令之后 - 毕竟，如果确实出现问题 - 代码执行将立即跳转到 catch 块，因此只有在一切正常时才会执行该行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:58:32.003

你不应该有，`Go`因为它表示批处理的结束，并且你的提交应该在 alter table 之后。

也没有必要检查一个事务是否正在运行，因为在这种情况下，它总是有

```
USE [MYDB]
GO
SET XACT_ABORT, NOCOUNT ON
GO
BEGIN TRANSACTION;
BEGIN TRY
        ALTER TABLE [dbo].[ContactRole] 
        DROP CONSTRAINT [FK_8bff7074914bc29885004c0a323] 

        COMMIT TRANSACTION; 
END TRY
BEGIN CATCH
    SELECT 
        ERROR_NUMBER() AS ErrorNumber ,ERROR_SEVERITY() AS ErrorSeverity
        ,ERROR_STATE() AS ErrorState ,ERROR_PROCEDURE() AS ErrorProcedure
        ,ERROR_LINE() AS ErrorLine ,ERROR_MESSAGE() AS ErrorMessage;

        ROLLBACK TRANSACTION;
END CATCH 
```

# sql - 如何检查 SQL Server 中的 IDENTITY_INSERT 是否设置为 ON 或 OFF？

> ID：10637976
> 
> 赞同：83
> 
> 时间：2012-05-17T14:45:03.383
> 
> 标签：sql, sql-server, identity-insert

我已经搜索过这个，但出现它的线程往往会从不理解这个问题的人那里得到答案。

采用以下语法：

```
SET IDENTITY_INSERT Table1 ON 
```

你如何做更多这样的事情：

```
GET IDENTITY_INSERT Table1 
```

我不想对数据库中的数据或设置做任何事情来获取这些信息。谢谢！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-17T14:55:43.000

由于`SET IDENTITY_INSERT`是会话敏感的，因此它在缓冲区级别进行管理，而无需存储在某处。这意味着我们不需要检查`IDENTITY_INSERT`状态，因为我们从未在当前会话中使用此关键字。

抱歉，对此没有帮助。

不过很好的问题:)

来源：[这里](http://social.msdn.microsoft.com/Forums/en/transactsql/thread/1a6ba2bb-5e82-47e8-a1a0-16fc044b951e)

**更新** 可能有办法做到这一点，也可以在我链接的网站上看到，IMO，太费劲了。

```
if

(select max(id) from MyTable) < (select max(id) from inserted)

--Then you may be inserting a record normally

BEGIN
    set @I = 1 --SQL wants something to happen in the "IF" side of an IF/ELSE
END

ELSE --You definitely have IDENTITY_INSERT on.  Done as ELSE instead of the other way around so that if there is no inserted table, it will run anyway

BEGIN
.... Code that shouldn't run with IDENTITY_INSERT on
END 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-11-22T10:16:03.140

总之：

*   [Nathan 的解决方案](https://stackoverflow.com/a/14696778/1501497)是最快的：

    ```
    SELECT OBJECTPROPERTY(OBJECT_ID('MyTable'), 'TableHasIdentity'); 
    ```

    *   使用 API 包装器时，可以将整个检查减少为仅检查行。例如，当使用 C# 的`SqlDataReaders` 属性`HasRows`和查询构造时，例如：

        ```
        SELECT CASE OBJECTPROPERTY(OBJECT_ID('MyTable'), 'TableHasIdentity')
               WHEN 1 THEN '1' ELSE NULL END 
        ```

*   [Ricardo 的解决方案](https://stackoverflow.com/a/12377081/1501497)允许更大的灵活性，但需要 Column 的身份名称

    ```
    SELECT * FROM sys.columns WHERE object_id = OBJECT_ID('MyTable', 'U') 
                            AND name = 'MyTableIdentityColumnName'; 
    ```

*   Bogdan Bodanov 解决方案，使用`try`/`catch`也可以，但额外的检查应该将异常处理限制在以下情况 `IDENTITY_INSERT is already ON for table 'MyTable'. Cannot perform SET operation for table 'MyTable';`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-12-07T17:51:37.210

您可以使用下面的代码发现 identity_insert 是否打开，如果是，则用于哪个表。

```
declare @tableWithIdentity varchar(max) = '';
SET IDENTITY_INSERT ExampleTable ON

begin try
  create table #identityCheck (id int identity(1,1))
  SET IDENTITY_INSERT #identityCheck ON
  drop table #identityCheck
end try
begin catch
  declare @msg varchar(max) = error_message()
  set @tableWithIdentity= @msg;
  set @tableWithIdentity = 
  SUBSTRING(@tableWithIdentity,charindex('''',@tableWithIdentity,1)+1, 10000)

  set @tableWithIdentity = SUBSTRING(@tableWithIdentity,1, charindex('''',@tableWithIdentity,1)-1)

  print @msg;
  drop table #identityCheck
end catch

if @tableWithIdentity<>''
begin
  print ('Name of table with Identity_Insert set to ON: ' + @tableWithIdentity)
end
else
begin
  print 'No table currently has Identity Insert Set to ON'
end 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-06-03T18:07:32.840

如果您尝试关闭其他表的 IDENTITY_INSERT 以避免在您想要设置 IDENTITY_INSERT 时出现错误，以下可能也适用于您。正如其他人在这个线程上所说的那样 IDENTITY_INSERT 是一个没有直接可见性的会话设置。但是，我发现 SET IDENTITY_INSERT OFF 不会为任何具有标识的表出错，无论该表的 IDENTITY_INSERT 是否为 ON。所以我突然想到，我可以为数据库中具有标识的每个表调用 SET IDENTITY_INSERT ... OFF。感觉有点像蛮力解决方案，但我发现下面的动态 SQL 块做得非常好。

```
---- make sure IDENTITY_INSERT is OFF ----
DECLARE @cmd NVARCHAR(MAX)
SET @cmd = CAST((SELECT 'SET IDENTITY_INSERT ' + 
             QUOTENAME(OBJECT_SCHEMA_NAME(t.object_id)) + '.' + 
             QUOTENAME(t.name) + ' OFF' + CHAR(10)
             FROM sys.columns c 
             JOIN sys.tables t ON t.object_id = c.object_id
             WHERE c.is_identity = 1 
             ORDER BY 1 FOR XML PATH('')) AS NVARCHAR(MAX))
EXEC sp_executesql @cmd 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-11T14:31:34.440

非常好的问题。我有同样的问题。也许您可以尝试使用 TRY/CATCH 重置 IDENTITY_INSERT？例如，您完成了作业，但不确定作业是否完成并且 IDENTITY_INSERT 设置为 OFF。

为什么你不尝试：

```
BEGIN TRY 
...
END TRY 
BEGIN CATCH
SET IDENTITY_INSERT table OFF;
END CATCH; 
```

另外我不确定这是否正常工作，但我看到仅添加`SET IDENTITY_INSERT ... OFF`没有返回错误。所以你可以设置以防万一`SET IDENTITY_INSERT ... OFF`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-11T20:04:49.287

如果您想了解会话变量...好问题，但我看不出这些信息在哪里有用。在正常执行中检查对插入的正常表响应，这应该有效！

-- 如果您只想知道给定表上是否有标识插入：

```
select is_identity
from sys.columns
where object_id = OBJECT_ID('MyTable', 'U') and name = 'column_Name' 
```

-- 或者... 如果您想根据结果执行某些操作，请使用此选项：

```
if exists (select *
from sys.columns
where object_id = OBJECT_ID('MyTable', 'U') and is_identity = 1)
... your code considering identity insert
else
... code that should not run with identity insert 
```

玩得开心！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-29T15:27:48.837

这是我的解决方案。这与@jmoreno 的回答非常相似。

你会这样称呼它

```
DECLARE @IdentityInsert VARCHAR(20)
EXEC dbo.GetIdentityInsert 'YourDb', 'YourSchema', 'YourTable', @IdentityInsert OUT
SELECT @IdentityInsert 
```

这将返回一个列名为 IDENTITY_INSERT 的 1 行记录集，它可以是 ON、OFF 或 NO_IDENTITY（如果给定的表没有标识列）。它还设置输出参数@IdentityInsert。因此，您可以将代码调整为您喜欢的任何方法。

将它放入用户定义的函数会很好，但不幸的是我找不到避免 TRY..CATCH 块的方法，您不能在用户定义的函数中使用它。

```
-- ================================================================================
-- Check whether the table specified has its IDENTITY_INSERT set to ON or OFF.
-- If the table does not have an identity column, NO_IDENTITY is returned.
-- Tested on SQL 2008.
-- ================================================================================
CREATE PROCEDURE dbo.GetIdentityInsert

      @dbname sysname
    , @schemaname sysname
    , @table sysname
    , @IdentityInsert VARCHAR(20) OUTPUT

AS

BEGIN

    SET NOCOUNT ON

    DECLARE @OtherTable nvarchar(max)
    DECLARE @DbSchemaTable nvarchar(max)

    DECLARE @ErrorMessage NVARCHAR(4000);
    DECLARE @ErrorSeverity INT;
    DECLARE @ErrorState INT;
    DECLARE @ErrorNumber INT;
    DECLARE @object_id INT;

    SET @DbSchemaTable = @dbname + '.' + @schemaname + '.' + @table

    SET @object_id = OBJECT_ID(@DbSchemaTable)
    IF @object_id IS NULL
    BEGIN
        RAISERROR('table %s doesn''t exist', 16, 1, @DbSchemaTable)
        RETURN
    END

    BEGIN TRY

        SET @object_id = OBJECT_ID(@DbSchemaTable)

        IF OBJECTPROPERTY(@object_id,'TableHasIdentity') = 0
        BEGIN
            SET @IdentityInsert = 'NO_IDENTITY'
        END
        ELSE
        BEGIN
            -- Attempt to set IDENTITY_INSERT on a temp table. This will fail if any other table
            -- has IDENTITY_INSERT set to ON, and we'll process that in the CATCH
            CREATE TABLE #GetIdentityInsert(ID INT IDENTITY)
            SET IDENTITY_INSERT #GetIdentityInsert ON
            SET IDENTITY_INSERT #GetIdentityInsert OFF
            DROP TABLE #GetIdentityInsert

            -- It didn't fail, so IDENTITY_INSERT on @table must set to OFF
            SET @IdentityInsert = 'OFF'
        END
    END TRY

    BEGIN CATCH

        SELECT 
            @ErrorMessage = ERROR_MESSAGE(),
            @ErrorSeverity = ERROR_SEVERITY(),
            @ErrorState = ERROR_STATE(),
            @ErrorNumber = ERROR_NUMBER();

        IF @ErrorNumber = 8107  --IDENTITY_INSERT is already set on a table
        BEGIN
            SET @OtherTable = SUBSTRING(@ErrorMessage, CHARINDEX(char(39), @ErrorMessage)+1, 2000)
            SET @OtherTable = SUBSTRING(@OtherTable, 1, CHARINDEX(char(39), @OtherTable)-1)

            IF @OtherTable = @DbSchemaTable 
            BEGIN
                -- If the table name is the same, then IDENTITY_INSERT on @table must be ON
                SET @IdentityInsert = 'ON'
            END
            ELSE
            BEGIN
                -- If the table name is different, then IDENTITY_INSERT on @table must be OFF
                SET @IdentityInsert =  'OFF'
            END
        END
        ELSE
        BEGIN
            RAISERROR (@ErrorNumber, @ErrorMessage, @ErrorSeverity, @ErrorState);
            --THROW     Use this if SQL 2012 or higher
        END

    END CATCH

    SELECT [IDENTITY_INSERT] = @IdentityInsert
END
GO 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-02-04T22:19:37.850

您还可以使用 ObjectProperty 方法来确定表是否具有标识：

```
DECLARE @MyTableName nvarchar(200)
SET @MyTableName = 'TestTable'
SELECT CASE OBJECTPROPERTY(OBJECT_ID(@MyTableName), 'TableHasIdentity') 
WHEN 1 THEN 'has identity' 
ELSE 'no identity columns' 
END as HasIdentity 
```

# android - Android WebView 宽度与其 html 内容不对应

> ID：10637979
> 
> 赞同：1
> 
> 时间：2012-05-17T14:45:14.340
> 
> 标签：android, android-webview

我正在尝试在 WebView 中使用 img html 标签显示图像。图像大小为 120x90px，我尝试将 webview 大小设置为该大小，甚至将 px 转换为 dp，但 webview 始终在图像周围显示一个白框，并且它具有水平和垂直滚动。这是我最后一次尝试，图像和 webview 大小似乎相同，但白框使 webview 滚动。

```
WebView thumb = new WebView(this);
        thumb.setPadding(0, 0, 0,0);

        DisplayMetrics metrics = new DisplayMetrics();

        getWindowManager().getDefaultDisplay().getMetrics(metrics);
        float logicalDensity = metrics.densityDpi;
        double dp = (int) 120/(logicalDensity/160);

        String summary = "<html><body><img src='"+video_thumb+"' width="+dp+" style='margin:0;padding:0'/></body></html>";
        thumb.loadData(summary, "text/html", null);

        //thumb.loadUrl(video_thumb);
        main.addView(thumb,120,90); 
```

# ms-access - 访问记录集中的字段值——访问 VBA

> ID：10637981
> 
> 赞同：1
> 
> 时间：2012-05-17T14:45:20.577
> 
> 标签：ms-access, automation, vba

这就是我正在尝试做的事情，如果我走错了方向，我深表歉意。我正在尝试遍历存储在表 t_Directory 中的文件路径，如果文件扩展名是“xlsx”，则打开 Excel 文件并使用 Excel 工作表的 FileID 和工作表计数以及工作表名称更新另一个名为 t_SheetInfo 的表。如果有更有效的方法，有人会花一分钟时间检查我到目前为止所做的事情或引导我朝着正确的方向前进吗？我不是 100% 确定我知道自己在做什么。与往常一样，提前感谢您的帮助！！

```
Dim db As DAO.Database
Dim xlApp As Excel.Application
Dim xlWB As Excel.Workbook
Dim xlWS As Excel.Worksheet

Private Sub CycleThroughWorkSheets()
Dim rs As DAO.Recordset
Dim rs2 As DAO.Recordset
Dim sSQL1 As String
Dim sSQL2 As String
Dim sSQL3 As String
Dim rsFilePath As String
Dim rsWSName As String

Set db = CurrentDB

sSQL1 = "SELECT t_Directory.FileID, t_Directory.FilePath FROM t_Directory " & _
        "WHERE (((t_Directory.FileExtension)=""'xlsx'""))"
Set rs = db.OpenRecordset("sSQL1", dbOpenDynaset)
    With rs
        rs.MoveFirst
            Do While Not rs.EOF
                rsFilePath = rs.Fields("[FilePath]")
                OpenWorkBook (rsFilePath)
Set rs2 = db.OpenRecordset("t_SheetInfo", dbOpenDynaset)
    With rs2
        rs2.MoveFirst
            Do While Not rs2.EOF
                rs2.AddNew
                rs2.Fields("FileID") = rs.Fields(1)
                rs2.Fields("[SheetIndex]") = WorkSheetCount(rsFilePath)
                rs2.Fields("[SheetName]") = WorkSheetName(WorkSheetCount)
                rs2.Update
            Next
            Loop
    End With
    End With
Set rs = Nothing
Set rs2 = Nothing
End Sub

Public Function WorkSheetCount(rsFilePath As String) As Integer
Set xlWB = xlApp.Workbooks.Open(rsFilePath)
      WorkSheetCount = xlWB.Sheets.Count(rsFilePath)
      Debug.Print "WorkSheetCount : " & WorkSheetCount
End Function

Public Function WorkSheetName(WorkSheetCount As Integer) As String
Set xlWB = xlApp.Workbooks.Open(rsFilePath)
      WorkSheetName = Worksheets(WorkSheetCount).Name
      Debug.Print "WorkSheetName : " & WorkSheetName
End Function 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T15:39:28.183

Try something on these lines. Step through.

```
Dim xlApp As New Excel.Application
Dim xlWB As Excel.Workbook
Dim sh As Object ''Some sheets may be charts
Dim rs As DAO.Recordset
Dim rs2 As DAO.Recordset
Dim sSQL1 As String
Dim sSQL2 As String
Dim sSQL3 As String
Dim rsFilePath As String
Dim rsWSName As String

Set db = CurrentDb
xlApp.Visible = True

sSQL1 = "SELECT t_Directory.FileID, t_Directory.FilePath FROM t_Directory " & _
        "WHERE t_Directory.FileExtension='.xlsx'"
Set rs2 = db.OpenRecordset("t_SheetInfo", dbOpenDynaset)

Set rs = db.OpenRecordset(sSQL1, dbOpenDynaset)
Do While Not rs.EOF
    rsFilePath = rs.Fields("[FilePath]")
    Set xlWB = xlApp.Workbooks.Open(rsFilePath)

    For Each sh In xlWB.Sheets
        rs2.AddNew
        rs2.Fields("FileID") = rs.Fields("FileID")
        rs2.Fields("[SheetIndex]") = sh.Index
        rs2.Fields("[SheetName]") = sh.Name
        rs2.Update
    Next
    rs.MoveNext
    xlWB.Close False
Loop
Set rs = Nothing
Set rs2 = Nothing
xlApp.Quit 
```

# rest - 如何从 Grails 获取 JSON（或 XML）响应？

> ID：10637986
> 
> 赞同：2
> 
> 时间：2012-05-17T14:45:32.880
> 
> 标签：rest, grails

我有 1 个域类、1 个控制器、1 个 URL 映射（见下文）。我想发送请求，并接收 JSON 响应。

但目前我的请求已正确映射到对应的控制器方法，该方法已成功执行，然后我收到一条错误消息，提示 jsp-file 不可用。

如何解释 Grails，我不需要 jsp 文件：我想接收/解析 JSON 请求，并直接从我的控制器发送 JSON 响应？

```
class Brand {

    String name
    String description
    String logoImageURL

    static constraints = {
        name(blank: false)
    }
}

---------------------------
class UrlMappings {
     static mappings = {
        "/brands"(controller: "brand", parseRequest: true, action: "list")
     }
}

---------------------------
import grails.converters.JSON

class BrandController {

    def list = {
        return Brand.list() as JSON
    }

    def show = {
        return Brand.get(params.id) as JSON
    }

    def save = {
        def brand = new Brand(name: params.name, description: params.description, logoImageURL: params.logoURL)
        if (brand.save()) {
            render brand as JSON
        } else {
            render brand.errors
        }
    }
}

============== Error message ===============
Request URL: http://localhost:8080/ShoesShop/brands

message /ShoesShop/WEB-INF/grails-app/views/brand/list.jsp

description The requested resource (/ShoesShop/WEB-INF/grails-app/views/brand/list.jsp) is not available. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:48:07.607

如果您[改为](http://grails.org/doc/2.0.x/ref/Controllers/render.html)这样做，它应该可以工作：

```
def list = {
    render Brand.list() as JSON
} 
```

# cognos - Cognos Planning 10 -- 设置用户安全性

> ID：10637987
> 
> 赞同：0
> 
> 时间：2012-05-17T14:45:33.690
> 
> 标签：cognos

我正在编辑用户安全性并试图让用户访问 e.List 项目。我使用 [...] 按钮选择用户，并通过在我们的 AD 域中搜索成功找到该用户。

在我选择用户并按 OK 后，该用户不会进入 CAC，只是这个错误过滤器将只接受组和角色。用户不会被添加到过滤器中。我在这里根本看不到任何过滤器。

您以前见过这种情况吗？是否可以由用户设置安全性？

谢谢你，我们 ![电脑加载信？](../Images/fe7f8aae782234e73e424df363693ff7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:21:11.377

来自 ericlfg 在[http://www.cognoise.com/community/index.php/board,15.0.html](http://www.cognoise.com/community/index.php/board,15.0.html)上的回答：

嗨威廉，

您收到的消息是设计使然。为了添加特定用户，而不是组或角色，该用户需要成为安全提供程序中某种层次结构的成员。

例如：如果您将 cognos 组和角色与名为“Test”的角色一起使用。您将使用命名空间中的成员填充此测试角色。在 CAC 中，当您单击省略号时，您将选择测试组，然后您可以选择您的个人用户（或测试角色）。

如果您尝试直接从您的第 3 方身份验证提供商添加成员，情况也是如此。个人用户需要是汇总角色或组的一部分，才能将该汇总角色或组添加到过滤器。添加到过滤器后，您可以选择单个用户。

希望这可以帮助。

# c - X86 程序集 - 处理数组类型参数

> ID：10637989
> 
> 赞同：2
> 
> 时间：2012-05-17T14:45:35.187
> 
> 标签：c, assembly, compiler-construction, x86

我目前正在编写一个简单的 C 编译器，它将 .c 文件作为输入并生成汇编代码（X86、AT&T 语法）。我很难传递数组类型参数并为其生成正确的汇编代码。这是我的输入：

```
int getIndexOne(int tab[]){
  return tab[1];
}

int main_test(void){
  int t[3];
  t[0] = 0;
  t[1] = 1;
  t[2] = 2;
  return getIndexOne(t);
} 
```

一个相当简单的测试。这是我的输出：

```
getIndexOne:
.LFB0:
    .cfi_startproc
    pushl   %ebp
    .cfi_def_cfa_offset 16
    movl    %esp, %ebp
    .cfi_offset 6, -16
    .cfi_def_cfa_register 6
    movl    %edi, -24(%ebp)
    movl    $1, %eax
    movl    -24(%ebp, %eax, 8), %eax    #trouble over here
    leave
    .cfi_def_cfa 7, 8
    ret
    .cfi_endproc
.LFE0:
    .size getIndexOne, .-getIndexOne

falsemain:
.LFB1:
    .cfi_startproc
    pushl   %ebp
    .cfi_def_cfa_offset 16
    movl    %esp, %ebp
    .cfi_offset 6, -16
    .cfi_def_cfa_register 6
    pushl   %ebx
    subl    $120, %esp
    movl    $2, -32(%ebp)
    movl    $0, %eax
    movl    $0, -24(%ebp, %eax, 8)
    movl    $1, %eax
    movl    $1, -24(%ebp, %eax, 8)
    movl    $2, %eax
    movl    $2, -24(%ebp, %eax, 8)
    leal    -24(%ebp, %eax, 8), %eax
    movl    %eax, %edi
    call    getIndexOne
    addl    $120, %esp
    popl    %ebx
    leave
    .cfi_def_cfa 7, 8
    ret
    .cfi_endproc
.LFE1:
    .size main_test, .-main_test 
```

我无法访问传递地址的内容（leal 指令）。任何帮助将非常感激。PS：不要担心我的整数的大小，由于其他原因，它们被设置为 8 而不是 4 字节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:00:08.547

有两个问题，第一个是当您为调用设置堆栈时`getIndexOne`：

```
movl    $2, %eax
movl    $2, -24(%ebp, %eax, 8)
leal    -24(%ebp, %eax, 8), %eax   ##<== EAX still holds value of 2!
movl    %eax, %edi                 ##<== wrong address for start of array 
```

您没有`EAX`在命令之后清除寄存器的内容`MOV`，因此您为函数调用放入`EDI`寄存器的地址不是指向数组的开头，而是数组的最后一个元素（即第二个元素值为`2`) 的索引。

第二个问题出现在您的`getIndexOne`函数中：

```
movl    %edi, -24(%ebp)
movl    $1, %eax
movl    -24(%ebp, %eax, 8), %eax 
```

您已将地址存储在堆栈中。这很好，但这也意味着当您从堆栈中检索值时，您将获得一个指针，然后必须再次取消引用该*指针*。您现在正在做的只是从堆栈上的帧指针读回一个值偏移量......这不是数组中的值，因为您没有取消引用存储在堆栈中的指针。换句话说，如果必须将指针存储在堆栈上，则应将其更改为以下内容（我认为这不是最有效的方法，因为值已经在 中`EDI`，但无论如何）：

```
movl    %edi, -24(%ebp)           ##<== store pointer to the array on the stack
movl    $1, %eax
movl    -24(%ebp), %ecx           ##<== get the pointer back from the stack
movl    (%ecx, %eax, 8), %eax     ##<== dereference the pointer 
```

附带说明一下，虽然我不确定您的编译器是如何工作的，但我确实认为您使用加载到数组元素中的值来索引数组有点可怕......如果值是加载的与数组索引不匹配，这会造成相当多的破坏……我猜这是你在两个值匹配时尝试做的某种优化？

# .net - 混淆与非托管程序集

> ID：10637993
> 
> 赞同：2
> 
> 时间：2012-05-17T14:45:45.217
> 
> 标签：.net, encryption, obfuscation, .net-assembly

我最近参加了一个演示，其中有人展示了 .NET 混淆代码可以被破解。他建议获得真正安全性的更好方法是加密混淆程序集，或者更好地将您的知识产权放在非托管程序集中。非托管程序集路径的明显缺点是程序集将是特定于平台的。以上两种方法是否有任何优点或缺点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T14:51:41.133

**您对这种级别的代码安全性的动机是什么？**

如果您的代码本身确实是足够有价值的 IP，那么也许您应该考虑根本不分发它，而是将其隐藏在某种 SaaS 产品后面。混淆正是它所说的，它不是加密，并且由于运行时必须能够读取您的代码才能运行它，所以它不可避免地必须是可读的。即使是非托管的 DLL 也可以被反编译，即使只是汇编代码，所以你的 IP 在那里并不完全安全。

顺便说一句，非托管代码的明显缺点不是您所说的，恕我直言，而是您在从托管语言迁移到非托管语言时所牺牲的一切。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T15:03:33.437

两种模型都有优点和缺点。但这些主要取决于您的特定[威胁模型](https://stackoverflow.com/questions/3774128/how-to-ensure-a-net-application-is-genuine)，我建议您从这里开始。哪些人群对您的产品构成安全威胁，这些威胁是什么？

一般来说，使用托管代码的优势是上市速度快，但它更容易受到某些攻击和 IP 盗窃。使用本机代码的优势在于它不太容易受到某些攻击，但上市速度较慢。这些是非常普遍的优点和缺点，应根据您的威胁模型进行调整。

编辑以回答您的评论。如果您确实有需要保护的 IP，我会（在一般情况下）选择本机代码可执行文件，而不是加密的混淆程序集。本机代码比加密的混淆托管代码更难破解，加密和混淆的额外复杂性将为您的产品增加大量的设计和测试。

再次编辑指出还有另一种选择：您可以使用像[MPress](http://www.matcode.com/mpress.htm)这样的打包程序。这没有混淆和/或加密的性能和复杂性影响，但仍提供合理的保护，防止非专业破解者盗窃 IP。如果您使用 Reflector 查看打包的 .NET 程序集，您只会看到一个 Main 调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T15:31:42.520

第三种选择是加密您的可执行文件。我最熟悉的选项将加密代码放在一个包装器中，只有在存在加密狗时才能解密它。

加密狗和加密理论上更强大，因为在可执行文件被解密之前，人们甚至无法开始对程序进行探索。也就是说，每次程序运行时都必须对其进行解密，因此您真正需要做的就是运行程序并从内存中提取清晰的代码。但是，无法访问您的加密狗之一的人将无法使用该选项，因此您有机会判断您愿意将加密狗运送给谁。

缺点是成本支持麻烦。软件不能以电子方式交付，因为现在有一块客户需要的物理硬件。一些国家/地区可能有关于进口或出口加密狗的规定，因为它们是加密设备。并且一些管理程序系统不支持 USB 直通，虽然一些加密狗制造商仍然提供并行端口加密狗，但现在计算机硬件不一定配备并行端口。如果客户需要在虚拟服务器上运行您的软件，您可能会发现自己陷入了困境。而且它们出奇地容易折断。你的客户**会**破坏他们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T21:11:52.790

与机器代码相比，.NET 代码的结构更加结构化，转换的灵活性更低。因此，保护​​ .NET 代码的一项技术挑战是充分打乱代码（使用混淆、加密或其他技术），同时又不破坏 .NET 运行时强加的可验证性。

也就是说，您仍然可以做很多事情来保护 .NET 代码（除了已经提到的技术）：

*   应用反反汇编技巧，使代码难以正确反汇编
*   加密代码中使用的字符串文字
*   将函数和数据符号重命名为无意义的名称
*   故意在文件级别损坏部分代码，但只在运行时修复
*   校验和重要逻辑，以防止篡改
*   分层应用保护（例如，校验和并修复混淆代码和其他保护逻辑），因此更难从整体上破坏保护

当然，手工做这些是困难的并且容易出错。但是，您可以使用商业、专业级的工具来自动执行此类保护。

# python - 为什么这个模块没有显示在 django 1.4 管理界面中？

> ID：10637996
> 
> 赞同：0
> 
> 时间：2012-05-17T14:45:59.277
> 
> 标签：python, django

目录结构

```
tutorial/tutorials
turotial/tutorial 
```

教程/settings.py

```
 INSTALLED_APPS = (
'django.contrib.auth',
'django.contrib.contenttypes',
'django.contrib.sessions',
'django.contrib.sites',
'django.contrib.messages',
'django.contrib.staticfiles',
# Uncomment the next line to enable the admin:
'django.contrib.admin',
# Uncomment the next line to enable admin documentation:
# 'django.contrib.admindocs',
#'domains'
'tutorials'    
) 
```

教程/admin.py

```
from tutorials.models import Tutorial
from django.contrib import admin

admin.site.register(Tutorial)
# Create your views here. 
```

教程/models.py

```
from django.db import models

class Tutorial(models.Model):
    name = models.CharField(max_length=200)
    url = models.CharField(max_length=200)

    def __unicode__(self):
        return self.name

class User(models.Model):
    name = models.CharField(max_length=200)

    def __unicode__(self):
        return self.name

class Country(models.Model):
    name = models.CharField(max_length=200)

    def __unicode__(self):
        return self.name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:16:56.940

有几件事可以帮助找到问题：

*   你有没有`admin.autodiscover()`在你的 urls.py
*   你有没有运行syncdb
*   您是否尝试过打开`manage.py shell`并导入模型，看看是否有错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:50:23.070

您的 INSTALLED_APPS 设置中可能没有此应用程序的条目。

# uml - 规范的 UML

> ID：10637997
> 
> 赞同：1
> 
> 时间：2012-05-17T14:46:00.803
> 
> 标签：uml

我们在理解这个类图案例研究时遇到了一些问题，它是唯一的修订版，所以它不是家庭作业或任何类似的东西，我们有一些可能的解决方案，但希望对可能的答案有一些想法。

需要一个新的软件系统来随机安排公交车。公共汽车沿着不同的路线行驶。每条路线由任意数量的链接组成，每个链接由两个点定义 - 一个起点和一个终点。

有四种类型的链接——时间链接、网络链接、旅程定义链接和路由链接。点被区分为停靠点（乘客进入或离开的地方）、救援点（司机停止或开始他们的旅程）和停车点（车辆停放的地方）。停车点可以进一步区分为车库点或储备点。

这个场景将如何在类图中显示？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T19:08:19.607

创建类图时，您必须问自己构成您的域的实体是什么。这些是您的类图的基础：`Bus`、`Route`、`Link`等……这些是您的类。您的描述还表明有些地方可以使用继承。

确定类后，定义它们的关系：a`Bus`沿着 a 移动`Route`，a`Route`由 组成`Links`，等等。这些关系可以首先定义为抽象关系，然后细化为更具体的关系（聚合/组合）。

然后你必须问自己需要哪些其他类来执行你的问题的业务逻辑——在这种情况下，是公交车调度。因此，您可能需要一个`Scheduler`类（至少）和一些辅助类，具体取决于您要解决的问题。