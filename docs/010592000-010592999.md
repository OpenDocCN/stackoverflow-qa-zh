# StackOverflow 问答 10592000-10592999

# java - 按值对并发哈希映射进行排序

> ID：10592002
> 
> 赞同：-1
> 
> 时间：2012-05-14T22:42:40.867
> 
> 标签：java, concurrency, hash, map

我是java新手。我想按值对并发哈希映射进行排序。我在这里找到了一种方法 - [按值对并发映射条目进行排序](https://stackoverflow.com/questions/5942474/sort-concurrent-map-entries-by-value)

有没有更简单的方法呢？有人可以用一个例子来解释吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T01:10:43.707

另一种解决方案是切换到使用[`ConcurrentSkipListMap`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentSkipListMap.html)Java 6 中添加的。引用 Javadocs：

> 此类实现 SkipLists 的并发变体，为 containsKey、get、put 和 remove 操作及其变体提供预期的平均 log(n) 时间成本。插入、删除、更新和访问操作由多个线程安全地并发执行。迭代器是弱一致的，返回的元素反映了在迭代器创建时或之后的某个时刻映射的状态。它们不会抛出 ConcurrentModificationException，并且可以与其他操作同时进行。升序键排序视图及其迭代器比降序视图更快。

SkipLists 是平衡树的概率替换。它们与`O`树相同，但通常它们的实现要简单得多。如果您的大多数操作都是哈希表查找（`O(1)`根据定义），那么您会看到对于合适的表大小的性能有所不同，但如果您需要经常进行排序，这可能是一个更好的解决方案。

我只希望 Java 提供这种出色数据结构的非并发版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T23:08:31.640

根据您的用例，我将创建另一个表示您的数据结构的类，该类由哈希图和一个列表组成，用于维护值的顺序。

更多细节在这里：
[按值排序 Map<Key, Value> (Java)](https://stackoverflow.com/questions/109383/how-to-sort-a-mapkey-value-on-the-values-in-java)
[按值排序 HashMap](https://stackoverflow.com/questions/8119366/sorting-hashmap-by-values)
[http://www.coderanch.com/t/382750/java/java/Sorting-HashMap-values](http://www.coderanch.com/t/382750/java/java/Sorting-HashMap-values)

您还可以扩展 ConcurrentHashMap 以覆盖 entrySet 和 keySet 方法，以按值的顺序返回条目/键。

```
public class OrderedValueHashMap<K,V extends Comparable<V>> extends ConcurrentHashMap<K, V> {

@Override
public Set<Map.Entry<K, V>> entrySet() {
    Set<Map.Entry<K, V>> orderedValueEntrySet = new TreeSet<Map.Entry<K,V>>(new Comparator<Map.Entry<K,V>>() {

        @Override
        public int compare(java.util.Map.Entry<K, V> o1,
                java.util.Map.Entry<K, V> o2) {
            return o1.getValue().compareTo(o2.getValue());
        }
    });
    orderedValueEntrySet.addAll(super.entrySet());
    return orderedValueEntrySet;
}

@Override
public Set<K> keySet() {
    Set<K> orderedKeySet = new LinkedHashSet<K>();
    for(Map.Entry<K, V> e : entrySet()) {
        orderedKeySet.add(e.getKey());
    }
    return orderedKeySet;
} 
```

}

如果您经常调用方法 keySet/entrySet ，则上述解决方案**不是最佳的，因为它会在每次调用时对条目进行排序。**您可能希望缓存这些结果以避免在地图的内部状态未更改时重新计算。

上面的示例运行如下：

```
public static void main(String[] args) {
    ConcurrentHashMap<String,Integer> map = new OrderedValueHashMap<String,Integer>();
    map.put("a", 3);
    map.put("b", 7);
    map.put("c", 1);
    map.put("q", 2);

    for (Map.Entry<String, Integer> entry : map.entrySet()) {
        System.out.println(entry);
    }

    for (String key : map.keySet()) {
        System.out.println(key);
    }

} 
```

输出：

```
c=1
q=2
a=3
b=7
c
q
a
b 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T22:58:37.913

> 有没有更简单的方法呢？

据我所知，没有。

当然，没有办法对并发哈希映射进行就地排序。CHM 本质上是无序的，因此您必须将条目放入不同的数据结构中以表示条目的有序性。

如果您告诉我们您的要求是什么，也许我们可以提出替代策略。

# ruby-on-rails - 轮胎宝石：未定义的方法“检测”

> ID：10592005
> 
> 赞同：1
> 
> 时间：2012-05-14T22:43:20.957
> 
> 标签：ruby-on-rails, ruby, elasticsearch, tire

我在我的 Rails 应用程序中使用了一些持久的轮胎模型。搜索一直工作正常，使用`Tire.search ['index1','index2'], :load => true do ...`但我现在创建了一个新的索引和模型，尝试将其包含在搜索中并访问其结果时出现以下错误：

```
undefined method `detect' for #<AuthoredHistory:0x000001013d6a88> 
```

我看到它来自 Tyre::Results::Collection#results，在最后一行：

```
@response['hits']['hits'].map { |item| records[item['_type']].detect { |record| record.id.to_s == item['_id'].to_s } } 
```

出于某种原因`records[item['_type']]`，我的其他模型返回了一个 Tire::Results::Collection 对象，但是对于新类，它返回了一个 AuthoredHistory 对象，这是我的实际模型类。我在 gem 的 github 页面上看到了一些关于这个的东西，但是我没有对 Tire.configuration.wrapper 做任何事情。我在所有索引模型中都包含持久性、搜索和回调模块。

我错过了什么吗？有人可以指出我正确的方向吗？（karmi，我希望你能在这里救我！）

[更新]

现在我到了某个地方......当结果只返回来自特定索引的 1 个结果时发生错误。如果一个索引有 2 个或更多结果，它会将其包装在 Tire::Results::Collection 中。现在要找破解...

[再次更新]

哈克解决方案找到了！看看下面的答案...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T22:53:15.623

我认为您在检测之前缺少地图的花括号。应该是这样的：

```
@response['hits']['hits'].map { |item| records[item['_type']] }.detect { |record| record.id.to_s == item['_id'].to_s } 
```

我不太了解代码库，无法确定这一点，但我认为`records[item['_type']]`将返回其中一个`AuthoredHistory`没有`detect`方法的对象。

该`detect`方法用于`Enumerable`Ruby 的集合中，这是一种`map`返回（它会返回一个`Array`）对象的对象。因此，花括号的位置错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:41:32.910

我发现了一个我认为有效的黑客...不是一个漂亮的，但这就是黑客的本质。如果特定模型只有一个结果，则记录不会返回`Tire::Results::Collection`对象，而只会返回实际模型的对象，这在`detect`. 所以，我必须检查我们是否有一个 Collection，如果没有，只需将它包装在一个数组中。它现在似乎有效，希望在路上没有不良影响......

这是黑客......这取代了我在问题中发布的有问题的行：

```
@response['hits']['hits'].map do |item|
  collection = records[item['_type']].is_a?(Tire::Results::Collection) ?
    records[item['_type']] :
    [records[item['_type']]]
  collection.detect { |record| record.id.to_s == item['_id'].to_s }
end 
```

还！我之前做过一次黑客攻击，以解释整个搜索结果何时只返回一个项目。我必须在上面同样有问题的行之前插入这一行：

```
return [records[@response['hits']['hits'].first['_type']]] if @response['hits']['hits'].size == 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-12T09:33:29.683

这现在应该在 commit 中修复[`44eda24`](https://github.com/karmi/tire/commit/44eda24)。另见问题[#725](https://github.com/karmi/tire/pull/725)。

# iphone - 如何确保在选项卡栏控制器上的切换选项卡之间检索核心数据？

> ID：10592006
> 
> 赞同：0
> 
> 时间：2012-05-14T22:43:34.287
> 
> 标签：iphone, core-data, tabbarcontroller

有人可以帮我吗？？

好的.....我的项目进展顺利。有一个屏幕/数据更新的小问题。

我有标准的 5 选项卡 TabBarController 工作正常。我的一个选项卡将文本字段中的数据输入核心数据中的实体属性。到目前为止一切都很好。

当我切换到另一个选项卡时，我会从数据库中读取属性并输入到选择器中。

代码工作正常，但问题是在读取时发生。

在标签 3 上输入数据并写入数据后，我切换到标签 1 并且选择器没有更新。直到我停止模拟器并再次运行时，数据显示在选项卡 1 的选择器中。

目前，我有读取数据库中的属性并更新 viewDidLoad 方法中的选择器数组的代码。

在此之前是否有另一种方法可以在选项卡切换和选择器显示之前读取我保存的数据？

我还尝试将数据库检索代码放在 viewWillAppear 方法中，认为它会在视图出现之前触发，读取我的数据，更新选择器数组然后显示但没有！！！

正如我所说，正在写入和检索数据......只是我必须停止模拟器并启动它来填充选择器。

有什么想法吗？

干杯，

天然气。

英国布里斯托尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T06:30:45.503

每次视图出现时都会调用 viewWillAppear 方法。所以这是检索数据的正确位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T00:00:50.340

`viewWillAppear:`（或`viewDidAppear:`）可能是这种行为的正确位置，请调查并解释为什么在这种情况下看不到预期的行为。

`viewDidLoad`在构造视图控制器的视图时调用（内置`loadView`或从 nib 文件“加载”）。由于必须先加载视图才能显示它，因此您可以指望在`viewDidLoad`视图首次出现之前被调用，而不是在每次出现之前调用。如果视图已经加载，则不需要再次加载。但是，如果应用程序在视图不可见时收到内存警告，它将被卸载，然后在需要重新显示时再次加载。因此`viewDidLoad`，在控制器的生命周期中可能会被多次调用，但你不能依赖它在视图出现的时候被调用，这就是`viewWillAppear`/`viewDidAppear`的用途。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T21:33:06.647

.....本着其他新手使用搜索引擎查找与他们遇到的问题相关的线程的精神，我想我会发布这个最后的条目来帮助将来可能会找到这个的任何人！！！

在听从了这些人的建议后，我设置了断点并逐行逐行执行代码以确定正在执行的代码以及何时执行。

我发现选择器调用的重要方法仅在应用程序启动时被触发。当我在选项卡之间切换时，即使将数据输入到选择器数据数组中，选择器也不会重新加载。

它确实具有讽刺意味，因为我在此之后改进了我的搜索，搜索“重新加载选择器视图数据”。

第一次搜索让我回到了这里的一个旧线程，一个论坛成员也遇到了同样的问题。

一小行代码让我做了侧手翻！！！

我听从了他的建议并放置了线路.....self.picker.delegate=self; 在 viewWillAppear 方法中......现在所有内容都在选项卡切换之间更新！

我可能不得不向这里的一位大师鞠躬，以解释为什么这条线会产生重大影响……知道这对我来说很重要，因为这对我来说是一个启示。

（我用我的选择器名称替换了选择器）

谁能解释一下为什么这个声明以新手可以理解的方式更新了选择器？...我真的很感激.....

天然气。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T20:50:46.527

......好吧......关于这个问题的更新！

更新我在 viewWillAppear 方法中使用的选择器的方法是使用

```
[self.projectPicker reloadAllComponents]; 
```

（其中 projectPicker 是您的选择器的名称。

确保在更新选择器数组后将它放在 viewWillAppear 方法的末尾！

天然气。

# c - 请批评 C 中的错误报告方法

> ID：10592010
> 
> 赞同：2
> 
> 时间：2012-05-14T22:43:53.547
> 
> 标签：c, idioms

今天在工作中编写相对简单的 C 代码时，我开始做一些白日梦，并编写了以下库以有效地生成错误消息。陪审团仍然没有结果——至少在我看来——这是否是一种比简单地适应你的目的更有效的方法`perror`......`errno`它甚至根本不需要成为一个“图书馆”，而只是一组宏。

现在，我正在调用图书馆`elib`：

# elib.h

```
#ifndef _ELIB_H_
#define _ELIB_H_

struct ErrorMap {
    void (*fp);
    int errorCode;
    char * message;
};

#define eperror(...) fprintf(stderr,  ##__VA_ARGS__)
char * getErrorMsg(struct ErrorMap *, void (*fp), int);

#endif /* _ELIB_H_ */ 
```

# elib.c

```
#include <stdlib.h>
#include "elib.h"

char * getErrorMsg(struct ErrorMap * errorMap, void (*fp), int code)
{
    int i;
    // TODO: Replace naive search
    for (i=0; errorMap[i].fp != NULL; i++)
    {
        if (errorMap[i].fp == fp && errorMap[i].errorCode == code)
        {
            return errorMap[i].message;
        }
    }
    return NULL;
} 
```

# test.c（示例应用程序“xyzlib”）

```
#include <stdio.h>
#include <string.h>

#include "elib.h"

int xyzlib_openFile(int);
int xyzlib_putStuff(char *);

static struct ErrorMap xyzlib_ErrorMap [] = {
    {xyzlib_openFile, -1, "Argument is less than 3"},
    {xyzlib_putStuff, -1, "Argument is NULL"},
    {xyzlib_putStuff, -2, "Length of argument is 0"},
    {xyzlib_putStuff, -3, "Stuff is too long"},
    {NULL, 0, NULL}
};

int xyzlib_openFile(int fd)
{
    if (fd > 3)
    {
        return (-1);
    }

    // open a file.. or something.

    return 0;
}

int xyzlib_putStuff(char * stuff)
{
    if (stuff == NULL)
    {
        return (-1);
    }

    if (strlen(stuff) == 0)
    {
        return (-2);
    }

    if (strlen(stuff) > 3)
    {
        return (-3);
    }

    // do something ...

    return (0);
}

int main(int argc, char ** argv)
{
    int code;

    if (argc != 2)
    {
        printf("Usage: %s <arg>\n", argv[0]);
        return 1;
    }

    code = xyzlib_putStuff(argv[1]);

    if (code < 0)
    {
        eperror("Error: %s\n", getErrorMsg(xyzlib_ErrorMap, xyzlib_openFile, code));    
    }
} 
```

基本上，您在 ErrorMap 表中定义/注册返回代码，如果您收到错误指示（响应值 < 0），则将`getErrorMsg`通过注册表查找相应的代码和函数以获取正确的消息。我认为价值在于，对于采用这种错误报告方法的给定库，可以按函数（而不是全局）定义错误代码 - 简化所有代码的管理。

但是，除了查找适当消息的少量开销外，所有采用这种方法的 C 代码都需要每个函数（不返回非负整数）返回`int`s，然后使用第一个参数作为指向返回值——稍微不习惯但常用。

假设目标市场是用于高可靠性嵌入式设备的软件（但不是非常受资源限制）。

有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T04:35:37.070

我真的没有看到这一点，对不起。也许那是因为我在 C 中处理错误代码的方式。基本上我将错误值定义为单个模块接口的一部分。模块之间的错误*值*确实会发生冲突，即我不在乎两个模块是否具有相同的数值，因为它们的不同错误代码。为了对不同的枚举进行强类型检查，我通常将它们包装到一个结构中。但我从不真正关心为每个函数制作唯一的错误代码，这就是你的方法似乎是关于的。

同样，这是我的具体情况，但我从来没有真正觉得有必要这样做。为整个模块定义的错误代码通常适合在实现该模块的过程之间传递。现在，如果您的方法实际上可以映射到模块边界而不是函数上呢？:)

# sql - 查询colmns有相似数据的数据库

> ID：10592011
> 
> 赞同：0
> 
> 时间：2012-05-14T22:44:03.390
> 
> 标签：sql, database

我有 20 列具有相同的数据。Dept_1，dept_2，dept_3 .... 我想查询数据库，其中每个列都匹配（伪代码：），而不必在子句`where dept_1, dept_2, dept_3... = 'ACCOUNTING'`中实际写出所有 20 个列。`WHERE`有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T22:47:15.623

我严重质疑数据库的设计......但也许这就是你要找的？

```
WHERE Dept_1 = 'ACCOUNTING'
  AND Dept_2 = 'ACCOUNTING'
  AND Dept_3 = 'ACCOUNTING'
  ... ad nauseum
  AND Dept_19 = 'ACCOUNTING'
  AND Dept_20 = 'ACCOUNTING' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T01:49:25.050

I think it is easier to user the shorter version:

```
select *
from table
where 'ACCOUNTING' in (dept_1, dept_2, dept_3, . . . ) 
```

If you need for all the fields to be the same, then use a where clause with ANDs.

However, you might want to redesign the database to have a table with a separate row for each department.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T22:52:40.630

最简单的方法可能是执行以下操作：

```
SELECT * FROM table
 WHERE dept_1 = 'ACCOUNTING'
   AND dept_2 = 'ACCOUNTING'
   AND dept_3 = 'ACCOUNTING' 
```

或者

```
SELECT * FROM table
 WHERE dept_1 = 'ACCOUNTING'
    OR dept_2 = 'ACCOUNTING'
    OR dept_3 = 'ACCOUNTING' 
```

这取决于您是要抓取所有 3 个字段都具有相同值的数据，还是要在至少 1 个字段匹配时抓取数据。

# css - CSS中重叠div的问题

> ID：10592016
> 
> 赞同：0
> 
> 时间：2012-05-14T22:44:34.013
> 
> 标签：css, image, layout, html, hyperlink

我现在正在开发一个使用图像进行导航的网站；您单击图像的不同组件，它们将充当指向其他页面的链接。我查看了一个教程，该教程解释了如何使用 3 个单独的 div 来获得我想要的效果；一个包含主图片的 div，一个使用相对定位的重叠 div，以及一个使用绝对定位具有链接图像的 div。到目前为止，这种方法对我来说效果很好，并且给了我想要的效果，但是有一个小问题。在我的浏览器中，我总是在页面右侧获得额外的空间。这个问题对我来说有点难以用语言表达，所以我有一张关于堆叠 div 在 Dreamweaver 中的显示方式以及它在我的浏览器中出现的问题的图像。

![在此处输入图像描述](../Images/751f51e001998755fd883871439fcc33.png)

![在此处输入图像描述](../Images/a97132a3d2d4174b7afedcf462a68ccc.png)

您可以查看第一张图片中的两个车库门并查看问题所在。最右侧的车库门在 Web 浏览器中正确显示，完美地覆盖了左侧的车库门。但是，正如您在 Dreamweaver 中看到的那样，它超出了背景图像，并且额外的空白区域出现在浏览器中。这是下面的代码。

CSS：

```
<style type="text/css">
            .body
            {
                height:100%;
                margin:0px auto;
                padding:0px;
            }
            .backgroundcontainer
            {
                width:100%;
                height:600px;
                background-image:url(backgroundstripe.png);
                background-repeat:repeat-x;
            }
            .background 
            {
                margin:0px auto;
                padding:0px;
                width:720px;
                height:600px;       
            }
            .textarea
            {
                margin:0px auto;
                padding:0px;
                background-color:#339900;   
            }
        </style> 
```

还有身体：

```
<body class="body">
        <center>
        <div class="backgroundcontainer">
            <div class="background" style="z-index:0">
                <!--House door link-->
                <div style="position:relative;top:449px;left:270px;z-index:1">
                    <div style="position:absolute">
                        <a href="[Link goes here]">
                            <img src="housedoor.png" height="151px" width="96px">
                        </a>
                    </div>
                </div>
                <!--Garage door link-->
                <div style="position:relative;top:451px;left:503px;z-index:1">
                    <div style="position:absolute">
                        <a href="[Link goes here]">
                            <img src="garagedoor.png" height="149px" width="130px">
                        </a>
                    </div>
                </div>
                <!--Window link-->
                <div style="position:relative;top:449px;left:375px;z-index:1">
                    <div style="position:absolute">
                        <a href="[Link goes here]">
                            <img src="window.png" height="97px" width="96px">
                        </a>
                    </div>
                </div>
                <img src="navigation.png" width="720px" height="600px">
            </div>
        </div>
        </center>
    </body> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T00:13:36.487

您需要查看您的 CSS（内联或非内联）。你还必须清理你的代码......

*   `<center>`已弃用，但不会导致您的问题；但是，您已将其应用于许多 100% 宽度的元素……因此无论如何它都无法居中。（[w3c 参考](http://www.w3.org/wiki/HTML/Elements/center)）
*   `<img>`默认情况下将测量值传递给`px`- 添加“px”可能会导致浏览器忽略它们。`height = "149" width = "130"`是你想要的，如果你要使用这种方法。（[w3c 参考](http://www.w3.org/wiki/Images_in_HTML#The_img_element_and_its_attributes)）
*   `z-index`只能用于`position`应用于它们的元素（即：`position:absolute/fixed/static/relative`）——首先`z-index`是什么都不做，从代码和你的意图来看，是不需要的。（[w3c 参考](http://www.w3.org/TR/CSS2/visuren.html#propdef-z-index)）
*   你得到重叠是因为你没有为任何东西分配宽度。默认情况下，块元素是 100% 宽（到它们的父级）。您的浏览器正在欺骗您的眼睛。这些元素并没有真正按照您真正想要的方式行事。（[w3c 参考](http://www.w3.org/TR/html401/struct/global.html#h-7.5.3)）

我可以为您提供的最佳解决方案：

*   将所有 3 个`position:absolute`div 放入一个`position:relative`容器中（拥有多个 div 会产生阶梯效果）。然后给他们每个高度/宽度，和`z-index`（如果仍然需要）。你应该开始看到事情很快就融合在一起了。

高温高压

# flash - 当前流式传输视频的最佳方式是什么？

> ID：10592019
> 
> 赞同：1
> 
> 时间：2012-05-14T22:44:46.967
> 
> 标签：flash, node.js, streaming, websocket, http-live-streaming

截至今天（2012 年 5 月），我正试图找出将视频流式传输到多个客户端的最实用方法是什么。我需要从一个源获取输入流，在服务器上对其进行处理，然后将其流式传输回多个源。

我一直在尝试使用 websockets，但我认为这不会奏效。我必须对所有数据进行 Base64 编码，因为显然有很多浏览器不支持 websockets 中的二进制传输。这增加了太多开销，并且（据我所知）没有办法在没有插件的情况下将 UDP 数据包发送到浏览器，这对我的设置来说会更好，因为我正在直播。

我不想使用 Flash，因为我希望能够流式传输到 iPhone 和 iPad，而且我也没有 Adob​​e Flash 软件，这意味着我必须找到一些开源方式来生成 .swf 文件.

所以我有点想我必须接受它，无论如何都要为网络浏览器使用 Flash，并为不支持 Flash 的平台使用 Apple 的实时 http 流。我相信有人知道更好的东西，我很感激帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T00:07:15.090

> 我不想使用 Flash，因为我希望能够流式传输到 iPhone 和 iPad，而且我也没有 Adob​​e Flash 软件，这意味着我必须找到一些开源方式来生成 .swf 文件.

flex sdk 是免费的并且仍然存在，您可以使用 eclipse 或 flash develop 来生成 swf 文件。现在我确信有流媒体服务可以为你完成所有工作，你只需要关心在 Flash 的 html5 中开发客户端。例如，您检查过 ustream 吗？不知道他们是否适用于苹果设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T00:14:47.340

您可以只使用 Apple 的 Live HTTP Streaming，它需要一个 Web 服务器（使用 Apache 或 Nginx）和一个分段器（Apple 提供的一种工具）。

以下是相关资源：[https ://developer.apple.com/streaming/](https://developer.apple.com/streaming/)

# javascript - 如何在这个中传递 json 数组

> ID：10592023
> 
> 赞同：0
> 
> 时间：2012-05-14T22:45:07.777
> 
> 标签：javascript, jquery, javascript-events

我的 jData 实际上是一个 json 数组但是当我尝试传递它时它给了我一个错误

这下面的作品

```
$test.pass = {
    lines:{ID:'ID', Date:'Date'},
    data:{}
}; 
```

但是当我想传递一个我从ajax返回的json数组时，我得到一个错误

```
$.ajax({
    type: 'POST',
    url: 'someurl',
    dataType: 'json',    
    success: function(data){ 
       $test.pass = {
          lines:{ID:'ID', Date:'Date'},
          data:data
       };   
    }                 
}); 
```

它给了我一个错误`TypeError: Cannot read property 'data' undefined`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T22:53:25.307

$test 是一个“全局”变量吗？如果在success函数的第一行下断点，data的值是多少？

# objective-c - 如何在 NSString 中反转字母大写（Objective-C）

> ID：10592025
> 
> 赞同：2
> 
> 时间：2012-05-14T22:45:19.700
> 
> 标签：objective-c, nsstring

我想知道如何在 NSString 或 NSMutableString 中反转字符的大小写，忽略非字母字符。例如，“HeLLO jIM66”将变为“hEllo Jim66”。

我知道大写字符串、小写字符串和大写字符串，但我无法弄清楚如何反转字符串中所有字母的大写。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T22:55:59.127

只需遍历字符串中的所有字符。如果一个字符是大写的，用小写字母代替；如果是小写字母，则替换为大写字母；否则，别管它。例如：

```
+ (NSString *) reverseCase:(NSString *)str
{
    int length = [str length];
    NSMutableString *result = [NSMutableString stringWithCapacity:length];

    for (int i = 0; i < length; i++)
    {
        unichar ch = [str characterAtIndex:i];
        if (islower(ch))
            ch = toupper(ch);
        else if (isupper(ch))
            ch = tolower(ch);
        [result appendString:[NSString stringWithCharacters:&ch length:1]];
    }

    return result;
} 
```

# c# - 信箱不可用。服务器响应为：此位置没有此类域

> ID：10592026
> 
> 赞同：4
> 
> 时间：2012-05-14T22:45:30.083
> 
> 标签：c#, smtp

我正在使用以下基本代码：

```
System.Net.Mail.MailMessage msg = new System.Net.Mail.MailMessage();

msg.to.add("someone@hotmail.com");
msg.to.add("someone@gmail.com");
msg.to.add("someone@myDomain.com");

msg.From = new MailAddress("me@myDomain.com", "myDomain", System.Text.Encoding.UTF8);
msg.Subject = "subject";
msg.SubjectEncoding = System.Text.Encoding.UTF8;
msg.Body = "body";
msg.BodyEncoding = System.Text.Encoding.UTF8;
msg.IsBodyHtml = false;

//Add the Creddentials
SmtpClient client = new SmtpClient();
client.Host = "192.168.0.24"; 
client.Credentials = new System.Net.NetworkCredential("me@myDomain.com", "password");
client.Port = 25;

try
{
   client.Send(msg);
}
catch (System.Net.Mail.SmtpException ex)
{
    sw.WriteLine(string.Format("ERROR MAIL: {0}. Inner exception: {1}", ex.Message,  ex.InnerException.Message));
} 
```

问题是邮件仅发送到我的域中的地址（someone@mydomain.com），并且我得到以下 2 个其他地址的异常：

System.Net.Mail.SmtpFailedRecipientException：邮箱不可用。服务器响应为：此位置没有此类域

我怀疑这与阻止我的 smtp 客户端有关，但不知道如何解决这个问题。任何的想法？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T04:03:45.243

Ron 是对的，只要使用 587 端口，它就会如你所愿。

检查此代码，看看它是否有效：

```
using System;
using System.Windows.Forms;
using System.Net.Mail;

namespace WindowsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            try
            {
                MailMessage mail = new MailMessage();
                SmtpClient SmtpServer = new SmtpClient("smtp.gmail.com");

                mail.From = new MailAddress("your_email_address@gmail.com");
                mail.To.Add("to_address@mfc.ae");
                mail.Subject = "Test Mail";
                mail.Body = "This is for testing SMTP mail from GMAIL";

                SmtpServer.Port = 587;
                SmtpServer.Credentials = new System.Net.NetworkCredential("username", "password");
                SmtpServer.EnableSsl = true;

                SmtpServer.Send(mail);
                MessageBox.Show("mail Send");
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.ToString());
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T22:56:45.133

尝试使用端口 = 587。这是有用的相关链接： http: [//mostlygeek.com/tech/smtp-on-port-587/comment-page-1/](http://mostlygeek.com/tech/smtp-on-port-587/comment-page-1/)

# c# - 将页眉和页脚信息添加到 Web 浏览器的打印输出中，而无需接触注册表

> ID：10592027
> 
> 赞同：0
> 
> 时间：2012-05-14T22:45:33.100
> 
> 标签：c#, html, css, windows, browser

背景信息：C#，Visual Studio 2010，目标：Windows XP 及以上

我需要将分类信息添加到从`System.Windows.Forms.WebBrowser`对象打印的每一页的顶部和底部。目前我们有一个 HTML 文档，它被加载到 a`WebBrowser`中，然后使用该`WebBrowser.ShowPrintDialog()`函数打印。**我需要以某种方式在每个**打印页面的顶部和底部添加横幅，并以分类类型为中心。

我已经看到提到一种涉及修改注册表设置的方法，但在我的情况下这不是一个选项。我也尝试过使用以下 CSS 代码，但似乎`WebBrowser`不适用于`position: fixed`.

CSS：

```
@media screen
{
    div#ClassificationTop
    {
        display: none;
    }
    div#ClassificationBottom
    {
        display: none;
    }
}
@media print
{
    div#ClassificationTop
    {
        display: block;
        position: fixed;
        top: 0;
    }
    div#ClassificationBottom
    {
        display: block;
        position: fixed;
        bottom: 0;
    }
} 
```

并在`<body>`：

```
<div id="ClassificationTop">UNCLASSIFIED
</div>
<div id="ClassificationBottom">UNCLASSIFIED
</div> 
```

所以，既然这些方法都不起作用（注册表解决方法或 CSS `position: fixed`），有没有人知道我可以尝试的其他方法？

如果问题不清楚或需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T23:36:36.577

从 webbrowser 控件打印的 API 在技术上可以支持这一点，如果你能弄清楚 C# 的语法来做到这一点。Microsoft 有一篇知识库文章“[如何在 Internet Explorer 中为 WebBrowser 控件打印自定义页眉和页脚](http://support.microsoft.com/kb/267240)”

在那篇文章中，阐明了可以将 ExecWB 方法的第三个参数指定为包含一个包含自定义页眉和页脚的 SAFEARRAY。

这是从知识库文章转换为 C# 语法的代码示例的选定部分。它不是完全有效的代码，但它应该有助于为您指明正确的方向：

```
 SAFEARRAYBOUND[] psabBounds = Arrays.InitializeWithDefaultInstances<SAFEARRAYBOUND>(1);
    SAFEARRAY psaHeadFoot;

    // Initialize header and footer parameters to send to ExecWB().
    psabBounds[0].lLbound = 0;
    psabBounds[0].cElements = 3;
    psaHeadFoot = SafeArrayCreate(VT_VARIANT, 1, psabBounds);

    VARIANT vHeadStr = new VARIANT();
    VARIANT vFootStr = new VARIANT();
    VARIANT vHeadTxtStream = new VARIANT();
    int rgIndices;

    VariantInit(vHeadStr);
    VariantInit(vFootStr);
    VariantInit(vHeadTxtStream);

    // Argument 1: Header
    vHeadStr.vt = VT_BSTR;
    vHeadStr.bstrVal = SysAllocString("This is my header string.");

    // Argument 2: Footer
    vFootStr.vt = VT_BSTR;
    vFootStr.bstrVal = SysAllocString("This is my footer string.");

    // Argument 3: IStream containing header text. Outlook and Outlook 
    // Express use this to print out the mail header.   
    if ((sMem = (string)CoTaskMemAlloc(512)) == null)
    {
        goto cleanup;
    }
    // We must pass in a full HTML file here, otherwise this 
         // becomes corrupted when we print.
    sMem = "<html><body><strong>Printed By:</strong> Custom WebBrowser Host 1.0<p></body></html>\0";

    rgIndices = 0;
    SafeArrayPutElement(psaHeadFoot, rgIndices, (object)(vHeadStr));
    rgIndices = 1;
    SafeArrayPutElement(psaHeadFoot, rgIndices, (object)(vFootStr));
    rgIndices = 2;
    SafeArrayPutElement(psaHeadFoot, rgIndices, (object)(vHeadTxtStream));

    //NOTE: Currently, the SAFEARRAY variant must be passed by using
            // the VT_BYREF vartype when you call the ExecWeb method.
    VARIANT vArg = new VARIANT();
    VariantInit(vArg);
    vArg.vt = VT_ARRAY | VT_BYREF;
    vArg.parray = psaHeadFoot;
    hr = webOC.ExecWB(OLECMDID_PRINT, OLECMDEXECOPT_DONTPROMPTUSER, vArg, null); 
```

# weblogic - WebLogic 10.3 上的自定义 MBean SNMP 发布。

> ID：10592029
> 
> 赞同：0
> 
> 时间：2012-05-14T22:45:35.267
> 
> 标签：weblogic, jmx, snmp, weblogic-10.x, mbeans

我目前遇到了 WebLogic 10.3 提供的自定义 mbean SNMP 发布功能的问题。
基本上，问题是当我向代理发出 SNMP 请求时，某些属性，它们都是不同的数字基元类型（long 和 double）都为 null，但是，String 属性很好。这是一个例子：

```
OID:       
1.3.6.1.4.1.140.625.50.1.109.111.110.105.116.111.114.2.1.1.3.16.21.18.124.43.0.250.193.169.164.9.128.13.10.219.116.151 
Value: 

OID:
1.3.6.1.4.1.140.625.50.1.109.111.110.105.116.111.114.2.1.1.2.16.21.18.124.43.0.250.193.169.164.9.128.13.10.219.116.151 
Value: com.test.application:Location=app,MyTestBean=Name 
```

我已经在 WebLogic 12.1c 中对此进行了测试，它运行良好，并且我可以确认 MBean 正在 WL10 上正确发布，因为如果我直接查询它们，所有 MBean 属性都会成功显示。

如果您需要更多信息或有任何疑问，请告诉我。

提前非常感谢！

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T20:43:02.097

我们已经能够通过禁用 SNMP 代理上的 MBean 发布功能并重新启用它来解决这个问题，这会导致 MIB 表被重置，因为在尝试插入 MBean 的值时显然存在一些关键约束。

谢谢！

问候。

# selenium - 使用 selenium 自动验证显示的数据

> ID：10592037
> 
> 赞同：0
> 
> 时间：2012-05-14T22:47:01.507
> 
> 标签：selenium, selenium-rc, selenium-webdriver, selenium-ide

我目前正在处理一个项目，该项目在第一个屏幕中几乎没有 Id，根据选择的 Id，用户被导航到显示相应 Id 信息的第二页。显示的所有信息都是从 SQL 数据库中检索的。

这是我的问题，如何使用 Selenium 自动执行此操作。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T23:48:19.323

如果您有编码背景，我建议您使用 Selenium WebDriver 编写一些基本的自动化测试。这将允许您通过它们的 id 在页面上查找元素，从文本字段中获取文本，单击链接，并验证另一个页面是否已加载（听起来像您希望执行的任务？）。您可以构建您的测试，使其通过主要功能路径运行（例如，从登录到主屏幕，再到另一个屏幕，一路测试所有功能），然后您只需要编写一些测试。如果您想要完全自动化，通常最好对您的应用程序有特定要求并为每个要求编写单独的测试。Selenium 主页有一些很好的[文档](http://seleniumhq.org/docs/)使用代码片段帮助您入门，一个简单的谷歌搜索应该为您提供几个教程。祝你好运 ：）

# python - 在 Python 中同时执行 QThread 或 QRunnable 对象

> ID：10592043
> 
> 赞同：1
> 
> 时间：2012-05-14T22:47:32.647
> 
> 标签：python, multithreading, qt, thread-safety, pyqt

我有以下代码：

```
from PySide.QtCore import *
import time

class GUI(object):

    IDLIST = [i for i in xrange(20)]
    UNUSEDIDS = [i for i in xrange(20)]

    def __init__(self):
        print "GUI CLASS INITIALIZED!"

        worker = Worker()
        worker2 = Worker2()

        threadpool = QThreadPool()
        threadpool.setMaxThreadCount(10)

        for i in xrange(5):
            #Alternate between the two
            #threadpool.start(worker)
            #worker2.start()

    @classmethod
    def delegator(self):
        """Irrelevant to the question, I need this method for something else"""
        USEDIDS = []

        toUse = self.UNUSEDIDS[0]
        USEDIDS.append(toUse)
        self.UNUSEDIDS.pop(0)

        return toUse

class Worker(QRunnable):

    def __init__(self, parent=None):
        super(Worker, self).__init__(parent)

    def run(self):
        #idInUse = getattr(GUI, "delegator")
        idInUse = GUI.delegator()
        print "Hello world from QRunnable", idInUse
        #time.sleep(5)

class Worker2(QThread):

    def __init__(self, parent=None):
        super(Worker2, self).__init__(parent)

    def run(self):
        idInUse = GUI.delegator()
        print "Hello world from QThread", idInUse    

s = time.time()
GUI()
print "Done in %s" % ((time.time()-s) * 1000) 
```

我认为从代码中可以明显看出预期的效果。我希望显示“来自 QThread/QRunnable 的 Hello world”。由于我正在编写一个多线程应用程序，因此在我的 GUI`__init__`部分中，我有一个启动并发线程的循环。

问题是，使用 QRunnable 它工作得很好。我指定的所有 5 个线程同时执行。然而，对于 QThread，情况并非如此。相反，我收到以下错误：

> QThread：在线程仍在运行时被销毁

它根本没有执行。

通常我完全不介意使用 QRunnable，但是，它不是从 QObject 派生的（所以我不能直接发出信号，尽管我可以`QObject()`在其中构造一个），而且它也没有`.stop()`我急需的方法。谷歌搜索显示没有办法阻止 QRunnable 执行？另一方面，QThread 具有我需要的这两种方法。

所以我想我的问题是如何让多个相同的 QThreads 同时运行，或者如何终止 QRunnable 的执行？

（也请记住，python 的内置线程模块是不可能的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:41:38.543

发生-exception`QThread: Destroyed while thread is still running`是因为您从不等待线程完成，并且您没有保留对它们的任何引用（无论是`worker`还是`worker2`，`threadpool`所以当您`__init__`完成时它会被破坏。

如果您保留对此对象的引用，则应该可以：

```
def __init__(self):
    print "GUI CLASS INITIALIZED!"

    self.worker = Worker()
    self.worker2 = Worker2()

    self.threadpool = QThreadPool()
    self.threadpool.setMaxThreadCount(10)

    for i in xrange(5):
        #Alternate between the two
        self.threadpool.start(worker)
        # this is wrong, by the way!
        # you should create 5 workers, not call start 5 times...
        self.worker2.start() 
```

并且在线程/池上调用`wait`/`waitForDone`方法会更好。
因为[当它的（C++）析构函数被调用时，](http://qt-project.org/doc/qthreadpool.html#dtor.QThreadPool)`QThreadPool`这隐含地发生了。如果不是这种情况，那么您的程序首先不会与s 一起使用 eiter。对于[这样的事情没有发生](http://qt-project.org/doc/qthread.html#dtor.QThread)，甚至提到它可能会导致崩溃。所以最好明确地等待线程完成......`QRunnable``QThread`

另外，我希望你已经知道[了](http://qt-project.org/doc/thread-basics.html)

# iphone - 在 Xcode 中分配随机标签

> ID：10592046
> 
> 赞同：0
> 
> 时间：2012-05-14T22:47:51.847
> 
> 标签：iphone, objective-c, xcode, debugging

当我运行以下代码时，调试器将所有标签的值记录为零。有谁知道为什么？

```
int placeHolderRandom = arc4random() % 13; 

self.cardOne.tag = 5; 

placeHolderRandom = arc4random() % 13; 

self.cardTwo.tag = placeHolderRandom; 

placeHolderRandom = arc4random() % 13; 

self.cardThree.tag = placeHolderRandom; 

placeHolderRandom = arc4random() % 13; 

self.cardFour.tag = placeHolderRandom; 

NSLog(@"%d , %d , %d , %d" , self.cardOne.tag , self.cardTwo.tag , self.cardThree.tag , self.cardFour.tag); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T22:55:40.503

我希望它是因为`self.cardOne`你的其他属性是`nil`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T00:15:18.187

你的属性是否被实例化并不重要。重要的是，您是否正确连接了插座？代码应该可以工作但不能工作的最常见原因是未连接的插座。检查这些插座属性是否为零。我打赌他们是零。

# drupal - Drupal 7 更改按格式提交

> ID：10592047
> 
> 赞同：5
> 
> 时间：2012-05-14T22:48:10.867
> 
> 标签：drupal, drupal-7, drupal-theming

我是drupal的新手，但学习很快。我有 drupal 7，我正在创建一个基于 Zen 的 starterkit 子主题的主题。我正在尝试找到可以自定义“提交者”行的位置。

默认如下所示：

`Submitted by kenny on Sun, 05/13/2012 - 18:33`

我想改变它，让它简单地以一种很好的格式表示日期（没有用户名，没有时间）。

`Sunday, May 13th, 2012`

我如何以及在哪里可以改变这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-15T00:26:41.633

在你的 template.php 文件（Zen 子主题）中，放这个。

```
function mytheme_preprocess_node(&$vars, $hook) {
$vars['submitted'] = date("l, M jS, Y", $vars['created']);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-29T09:20:52.937

如果您想设置“提交者”并更改特定内容类型的日期格式，那么您还可以更改您的 tpl 文件，例如

如果您的内容类型是“博客”

然后创建`node--blog.tpl.php`

```
<?php if ($display_submitted): ?>    
  <p class="submitted">
    <?php $user = user_load($node->uid); ?>
            <?php $username=$user->name; ?>
    <?php print t("Written"); ?>
    <?php print $username ?>
    <time pubdate datetime="<?php print $submitted_pubdate; ?>">
    <?php $date = date("d.n.Y", $node->created); ?>
    <?php print "<br>".$date; ?>
    </time>
  </p>
  <?php endif; ?> 
```

# c# - 我可以从通用委托中获取方法属性吗？

> ID：10592048
> 
> 赞同：4
> 
> 时间：2012-05-14T22:48:31.927
> 
> 标签：c#, reflection, delegates, attributes

我敢肯定论坛上某个地方已经有答案了，但到目前为止我还没有找到。根据[此示例](https://stackoverflow.com/questions/377217/c-sharp-delegate-for-two-methods-with-different-parameters)，我将匿名方法与委托结合使用，以便使用具有不同参数但返回类型相同的不同方法都用作函数参数：

```
public delegate TestCaseResult Action();
...

[TestDescription("Test whether the target computer has teaming configured")]
public TestCaseResult TargetHasOneTeam()
{
  // do some logic here and return
  // TestCaseResult
}

[TestDescription("Test whether the target computer has the named team configured")]
public TestCaseResult TargetHasNamedTeam(string teamName)
{
  // do some logic here and return
  // TestCaseResult
}
...

public static void TestThat(TestCaseBase.Action action)
{
  TestCaseResult result = action.Invoke();

  // I want to get the value of the TestDescription attribute here
}
...

// usage
TestThat(() => TargetHasOneTeam());

TestThat(() => TargetHasNamedTeam("Adapter5")); 
```

从示例中可以看出，我真的很希望能够从 TestThat() 函数中获取 TestDescriptionAttribute 属性。我已经浏览了包含我的方法的 Action 参数，但无法“找到”我的 TargetHasOneTeam() 方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T22:54:11.660

在这种特殊情况下，它基本上是不可访问的。您正在创建一个执行相关方法的 lambda。该 lambda 最终会生成一个新方法，该方法最终是`Action`委托的参数。该方法与身体中的 IL 指令无关，`TargetHasOneTeam`而且显然只有当您深入研究身体中的 IL 指令时。

您可以跳过 lambda 并在此处进行方法组转换。

```
TestThat(TargetHasOneTeam); 
```

现在`TargetHasOneTeam`被直接分配给委托实例，并且在`Delegate::MethodInfo`属性中可见。

注意：总的来说，尽管这对于您遇到的问题来说是个坏主意。方法的属性不应影响其满足委托实例化的能力。如果可能的话，我会避免这种类型的检查。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T23:07:12.957

如果您更改`TestThat(() => TargetHasOneTeam())`（将您的委托包装到另一个操作中）为 TestThat(TargetHasOneTeam) 并像这样更改 TestThat：

```
public static void TestThat(TestCaseBase.Action action)
{
  TestCaseResult result = action.Invoke();
  var attrs = action.GetInvocationList()[0].Method.GetCustomAttributes(true);

  // I want to get the value of the TestDescription attribute here
} 
```

会给你你需要的。

用表达式：

```
public static void TestThat(Expression<Func<TestResult>> action)
{
    var attrs = ((MethodCallExpression)action.Body).Method.GetCustomAttributes(true);

    var result = action.Compile()();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T23:03:27.297

您可以使用 获取任何成员的属性`Attribute.GetCustomAttribute`。首先检查该属性是否已定义。例如：

```
public static void TestThat(TestCaseBase.Action action)
{
    TestCaseResult result = action.Invoke();
    if(System.Attribute.IsDefined(action.Method, typeof(TestDescriptionAttribute)))
    {
        var attribute = (TestDescriptionAttribute)System.Attribute.GetCustomAttribute(action.Method,
            typeof(TestDescriptionAttribute));
        Console.WriteLine(attribute.TestDescription);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T23:35:24.350

请参阅[MSDN](http://msdn.microsoft.com/en-us/library/z919e8tw.aspx)上的此示例。

```
class TestAuthorAttribute
{
  static void Test()
  {
    PrintAuthorInfo(typeof(FirstClass));
    PrintAuthorInfo(typeof(SecondClass));
    PrintAuthorInfo(typeof(ThirdClass));
  }

  private static void PrintAuthorInfo(System.Type t)
 {
    System.Console.WriteLine("Author information for {0}", t);

    // Using reflection.
    System.Attribute[] attrs = System.Attribute.GetCustomAttributes(t);  // Reflection.

    // Displaying output.
    foreach (System.Attribute attr in attrs)
    {
        if (attr is Author)
        {
            Author a = (Author)attr;
            System.Console.WriteLine("   {0}, version {1:f}", a.GetName(), a.version);
        }
      }
  } 
```

# shell - 我想同时在多个浏览器中打开一个链接进行测试

> ID：10592052
> 
> 赞同：2
> 
> 时间：2012-05-14T22:48:52.753
> 
> 标签：shell, browser, powershell, batch-file, cmd

例如，我想在 IE9、Chrome、Firefox、Opera 和 Safari 中同时打开“localhost/MySite”以进行 QA 测试。

我在想某种批处理文件将是一种有效的方法。

即双击“test.bat”，命令行会出现一个查询“要测试的网站：”。我输入“localhost/MySite”，批处理文件打开所有这些浏览器并转到该站点。

我不确定这是否可能，因为我没有找到任何关于该主题的内容，但这对我来说非常有用！总是好节省一点时间。:)

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T23:41:05.427

尝试

```
setlocal
set /p url=Website to test:
start chrome %url%
start firefox %url%
start iexplore %url%
start opera %url%
start safari %url% 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:19:45.477

这最终工作得很好：

```
set /p url= [Desired URL to test?]

if exist "%ProgramFiles(x86)%\Internet Explorer\iexplore.exe" start "" "%ProgramFiles(x86)%\Internet Explorer\iexplore.exe" %url%&
if exist "%ProgramFiles(x86)%\Mozilla Firefox\firefox.exe" start "" "%ProgramFiles(x86)%\Mozilla Firefox\firefox.exe" %url%&
if exist "%ProgramFiles(x86)%\Opera\opera.exe" start "" "%ProgramFiles(x86)%\Opera\opera.exe" %url%&
if exist "%ProgramFiles(x86)%\Safari\Safari.exe" start "" "%ProgramFiles(x86)%\Safari\Safari.exe" %url%&
if exist "%USERPROFILE%\AppData\Local\Google\Chrome\Application\chrome.exe" start "" "%USERPROFILE%\AppData\Local\Google\Chrome\Application\chrome.exe" %url%& 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T22:55:40.333

你可以在批处理脚本中做这样的事情：

```
cd "/path/to/file1"
start program1.exe

cd "/path/to/file2"
start program2.exe 
```

# regex - 如何删除电子邮件正文的历史记录部分？

> ID：10592055
> 
> 赞同：0
> 
> 时间：2012-05-14T22:49:06.420
> 
> 标签：regex, string, text, email

我正在构建一个可以发送、阅读和回复电子邮件的应用程序。问题是，如果电子邮件是线程的一部分，它很可能包含历史信息。不幸的是，历史信息的显示方式并不一致（有时用箭头标记 >>>> 有时用规则等），因此不容易通过正则表达式找到。

我目前正在使用几个解决许多情况的正则表达式，并在它们出现时添加新的。这是处理问题的最佳方法吗？

有没有人有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T22:53:41.967

老实说，没有很好的方法来处理这个问题。大多数电子邮件系统都有执行此操作的默认方式。为最常见的设置使用正则表达式会让你走得很远，因为大多数电子邮件系统都在默认设置下运行。但是您必须了解，这可以很容易地从一个电子邮件服务器定制到另一个电子邮件服务器，这意味着没有一种万能的解决方案。

但是......如果足够好就足够好了，继续做你正在做的事情或者不要使用转发/回复。

# java - 获取相机和精确物体之间的距离

> ID：10592056
> 
> 赞同：0
> 
> 时间：2012-05-14T22:49:22.533
> 
> 标签：java, opengl

当我们需要在我们指向的女巫上获取相机和 3D 对象之间的距离时，我们使用`GL11.GL_DEPTH_COMPONENT`. 问题是我想获得相机和离相机最近的物体后面的物体之间的距离。有可能这样做吗？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T04:40:39.007

*这是我最常写的 OpenGL 说明：*

**OpenGL 不是场景图。它只是将点、线和三角形绘制到 2D 帧缓冲区**。OpenGL 中没有对象或相机之类的东西。只有几何图元，OpenGL 在光栅化它们的那一刻忘记了它，以及这个过程在帧缓冲区中的结果。OpenGL 没有“前面”或“后面”的概念。

您要问的内容完全超出了 OpenGL 的范围。你想要的是一个实现射线 - 三角形交叉点拾取的场景图。

我只能重申尼可波拉斯已经回答的内容：

> OpenGL用于渲染；是用来画东西的。它的深度缓冲区就是为此目的而存在的。**并且深度缓冲区只存储到相机 Z 平面的**距离，***而不是三角形上该点到该点的径向距离***。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T23:02:59.933

如果您想要两点之间的距离（例如相机和对象的中心点），那么您将不得不使用常规向量数学来计算它：`sqrt(dot(pt1 - pt2, pt1 - pt2))`

OpenGL用于渲染；是用来画东西的。它的深度缓冲区就是为此目的而存在的。并且深度缓冲区只存储到相机 Z 平面的距离，而不是三角形上该点到该点的径向距离。

# javascript - Javascript RegEx 未按预期返回 false

> ID：10592067
> 
> 赞同：1
> 
> 时间：2012-05-14T22:50:51.347
> 
> 标签：javascript, regex

不是 RegEx 的大用户——从来没有真正理解过它们！但是，我认为检查用户名字段输入的最佳方法是使用仅允许字母（大写或小写）、数字和 _ 字符的输入，并且必须根据站点政策以字母开头。My RegEx 和代码是这样的：

```
var theCheck = /[a-zA-Z]|\d|_$/g;
alert(theCheck.test(theUsername)); 
```

尽管尝试了各种组合，但一切都返回“真实”。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T22:56:42.443

您的正则表达式是说“确实`theUsername`包含字母、数字或以下划线结尾”。

试试这个：

```
var theCheck = /^[a-z]([a-z_\d]*)$/i; // the "i" is "ignore case" 
```

这表示“`theUsername`以字母开头，仅包含字母、数字或下划线”。

注意：我认为这里不需要“g”，这意味着“所有匹配项”。我们只想测试整个字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T22:57:17.290

像这样的东西怎么样：

```
^([a-zA-Z][a-zA-Z0-9_]{3,})$ 
```

解释整个模式：

```
^ = Makes sure that the first pattern in brackets is at the beginning
() = puts the entire pattern in a group in case you need to pull it out and not just validate
a-zA-Z0-9_ = matches your character allowances
$ = Makes sure that this must be the entire line
{3,} = Makes sure there are a minimum of 3 characters. 
    You can add a number after the comma for a character limit max
    You could also use a +, which would merely enforce at least one character match the second pattern. A * would not enforce any lengths 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T22:56:13.330

使用它作为你的正则表达式：

```
^[A-Za-z][a-zA-Z0-9_]*$ 
```

# google-chrome - chrome新的垂直时间线中的空白是什么？

> ID：10592070
> 
> 赞同：6
> 
> 时间：2012-05-14T22:51:01.677
> 
> 标签：google-chrome, timeline, requestanimationframe

![在此处输入图像描述](../Images/19d8521241d7989df09873a93dc83cfb.png)

我正在使用 chrome 中的 requestAnimationFrame 在 raphael 中运行一个简单的视图框动画。我注意到所有脚本和渲染任务都已完成，但我仍然看到 30 到 60 毫秒之间的“死区”，看起来浏览器坐在那里无所事事。对此有任何见解吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-27T13:57:37.997

我继续这个问题寻找相同的答案，但似乎没有人提供回应，这就是我发现的。

根据[有关 Clear and Light Gray Frame 的 Chrome DevTools 文档](https://developers.google.com/chrome-developer-tools/docs/timeline#about_clear_or_light-gray_frames)，空白区域是您的浏览器空闲的时间。

**为什么闲置？**

简短的版本是空心框架意味着两件事之一：您的 javascript 主线程正忙于做 Chrome 开发团队忘记在 DevTools 中显示的其他事情，或者您的 GPU 遇到瓶颈。

为了区分，你可以在 DevTools 的设置中启用“时间线：在标尺上显示 CPU 活动”（你知道，右下角的齿轮）。

![在此处输入图像描述](../Images/8fece8a7fc53ea58745dc8180d69bf68.png)

你会以这样的方式结束：

![在此处输入图像描述](../Images/4348314165e364a42620584fb625cda5.png)

看到“记录”行上的深灰色小块了吗？当渲染器线程忙时，这些是黑暗的。如果渲染器线程大部分是空闲的，例如没有暗块，就像我为这篇文章截取的屏幕截图一样，这是一个很好的信号，表明您受 GPU 限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-12T18:29:21.397

这是 Chrome 工程师 Nat Duca 的完整解释。

[https://plus.google.com/+NatDuca/posts/BvMgvdnBvaQ](https://plus.google.com/+NatDuca/posts/BvMgvdnBvaQ)

# jquery - 循环数组并基于日期显示标题

> ID：10592073
> 
> 赞同：1
> 
> 时间：2012-05-14T22:51:39.820
> 
> 标签：jquery

我正在尝试遍历一些日期，并根据日期仅显示`$titles`它是否具有今天的日期。我怀疑我的 if 语句已关闭，但我不确定。检查控制台我没有收到任何错误。控制台中也不会返回任何标题。所以我不确定从这里去哪里？

```
$('<ul></ul>').insertAfter('h1');
    $.get('http://website.com/rss.php', function(data) {
        var $items = $(data).find('item');
        $items.each(function() {
            var $item = $(this);
            var $pubdate = $item.find('pubDate').text();

            if ($pubdate == "Mon, 14 May 2012 19:40:40 UT") {
                var $title = $item.find('title').text();
                var html = '<li>' + $title + '</li>';
                $(html).appendTo('ul');
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T23:06:13.433

该`$pubdate`字符串包含换行符，因此您必须将其包含在比较中：

```
if ($pubdate == "Mon, 14 May 2012 19:40:40 UT\n") 
```

[http://jsfiddle.net/AlienWebguy/Y5dNc/6/](http://jsfiddle.net/AlienWebguy/Y5dNc/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T23:05:30.483

改用这个，它更失败。

```
if ($pubdate.trim().match(/Mon, 14 May 2012 19:40:40 UT/)) {
    console.log("yes");
} 
```

见[http://jsfiddle.net/8q6Pe/](http://jsfiddle.net/8q6Pe/)

# wcf - 使用 WCF 或 ASP.Net Web Api 实现 RESTful API 的版本控制

> ID：10592078
> 
> 赞同：6
> 
> 时间：2012-05-14T22:52:11.473
> 
> 标签：wcf, rest, asp.net-web-api

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:40:46.133

# java - 更改颜色设置启用

> ID：10592080
> 
> 赞同：3
> 
> 时间：2012-05-14T22:52:28.087
> 
> 标签：java, swing, colors, jtextfield, uimanager

我的问题是这样的：默认更改颜色以提供 JTextField setEnabled (false) 例如为黑色，并通过 UIManager 结果证明，但没有任何建议。

问候。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T23:53:19.330

要更改禁用的背景颜色，请尝试以下操作：

```
UIManager.put("TextField.disabledBackground", Color.GRAY); 
```

[您可以使用setDisabledTextColor](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/JTextComponent.html#setDisabledTextColor%28java.awt.Color%29)更改禁用的文本颜色，即：

```
textField.setDisabledTextColor(Color.GRAY); 
```

***编辑：包括 SSCCE***

```
import java.awt.Color;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.UIManager;

public class TestDisabledTextField {

    public static void main(String[] args) {
        UIManager.put("TextField.disabledBackground", Color.YELLOW);

        JTextField textField = new JTextField("Disabled text field", 15);
        textField.setEnabled(false);
        textField.setDisabledTextColor(Color.RED);

        JPanel panel = new JPanel();
        panel.add(textField);

        JOptionPane.showMessageDialog(null, panel);
    }
} 
```

# permissions - 共享 1and1 主机中受保护的 moodledata 文件夹（用于安装 moodle 2.2）

> ID：10592083
> 
> 赞同：1
> 
> 时间：2012-05-14T22:52:47.620
> 
> 标签：permissions, hosting, directory, moodle

我正在尝试在共享的 linux 1and1 服务器上安装 Moodle 2.2。在网络安装之后，我进入了询问**moodledata**文件夹路径的步骤。我读过我需要把它放在没有公共访问权限的地方，我相信这意味着在公共网络根文件夹之上的一个级别。

因此，如果公共 Web 根文件夹是：/homepages/44/d* ******* /htdocs

文件夹路径应该是：/homepages/44/d* ******* /moodledata

问题是，当我想在那里创建一个文件夹（使用 ssh 连接）时，我收到“权限被拒绝”错误。

我联系了 1and1，他们告诉我，使用我的托管包（双重无限制）无法在公共 Web 文件夹上方的级别创建文件夹，我应该升级托管包。

这是唯一的方法吗？我可以在无需升级托管包的情况下获得像穆德尔需求这样的受保护文件夹吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:07:47.987

如果你知道你在做什么，你可以执行以下步骤在 Moodle 目录中安装 moodledata。

这些修改将关闭有关moodledata安全要求的moodle验证。

您必须编辑在moodle 文件夹install.php 的根目录中调用的文件。

在第 230 行附近，围绕以下代码添加注释：

```
/*
    while(is_dataroot_insecure()) {
        $parrent = dirname($CFG->dataroot);
        $i++;
        if ($parrent == '/' or $parrent == '.' or preg_match('/^[a-z]:\\\?$/i', $parrent) or ($i > 100)) {
            $CFG->dataroot = ''; //can not find secure location for dataroot
            break;
        }
        $CFG->dataroot = dirname($parrent).DIRECTORY_SEPARATOR.'moodledata';
    }
*/ 
```

在第 300 行附近，围绕以下代码添加注释：

```
/*
 else if (is_dataroot_insecure()) {
        $hint_dataroot = get_string('pathsunsecuredataroot', 'install');
        $config->stage = INSTALL_PATHS;

    }
*/ 
```

# javascript - 如何让 fadeToggle() 通过一个按键触发多个 DOM 元素

> ID：10592085
> 
> 赞同：0
> 
> 时间：2012-05-14T22:53:11.850
> 
> 标签：javascript, jquery

我正在为一个游戏编写一些代码，以更好地学习 JS，但我遇到了一个问题。我正在使用 jQuery 库来执行动画。

**我正在尝试做**的事情（参见 //Fade out text 注释）：

当玩家按下空格键时，我想隐藏 3 个`<p>`具有唯一 ID 的标签。我目前拥有的代码（有点）但问题是我必须按一次空格键，`<p>`而我想按一下我想删除的每个标签。如果我使用 text() 方法，那么我只需要按一次空格键即可删除`<p>`标签中的所有文本。

这是我的代码：

```
$(document).ready(function() {
    $("body").keypress(
    function(event) {
        if (event.which == 32) {
            if (operator === "+") {
                result = parseInt(firstTerm) + parseInt(secondTerm);
            }
            else if (operator === "-") {
                result = parseInt(firstTerm) - parseInt(secondTerm);
            }
            //reset the player's current expression
            firstTerm = "";
            operator = "";
            secondTerm = "";
            //Fade out the text
            $("p#term1, p#operator, p#term2 ").fadeToggle("slow");
            //$("p#term1, p#operator, p#term2 ").text("");

            //clear the board of any selections
            for (var i = 0; i < tilesSelected.length; i++) {
                $("div#" + tilesSelected[i]).removeClass("tileselected");

            }
            //check to see if the player has scored a point
            if (result === goalNum) {
                alert("You just scored 1 point!");
                score++;
                goalNum = randNumXtoY(1, 30);
                $("div#targetnum").text(goalNum);
            }
            alert(result);
        }
    });
});​ 
```

html代码在这里：

```
 <body>
            <h1>This is my game. Yay!</h1>
            <div id="container">

                <div id="currentnum" class="currentstatus">
                    <p id="term1" class="x"></p>
                    <p id="operator" class="x"></p>
                    <p id="term2" class="x"></p>
                </div>

                <div id="targetnum" class="currentstatus">
                    <script type="text/javascript">
                        document.write("<p>" + goalNum +"</p>")
                    </script>
                </div>

            </div>

            </body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T22:55:51.583

HTML 标准不允许具有相同 ID 的多个元素。

您可以通过为元素提供相同的`class`属性并通过以下方式查询来解决问题`class`：

```
$("p.term1, p.operator, p.term2 ").fadeToggle("slow"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T23:32:21.387

您可能会考虑将您想要响应键事件的所有元素赋予*相同*的类，然后像这样简单地调用您的函数：

```
// Apply effect to all elements with class "space-listener"
$('.space-listener').fadeToggle('slow'); 
```

干杯

# objective-c - OOP 和 Objective-C 的新手，对如何在另一个类中实例化一个类感到困惑

> ID：10592088
> 
> 赞同：1
> 
> 时间：2012-05-14T22:53:21.270
> 
> 标签：objective-c, oop, libpcap, geoip

我编写 C 代码已经有一段时间了，但对 Objective-C 和 OO 程序设计还是很陌生。我在如何设计我的程序和它的类上遇到了麻烦——我的备用过程编程范式将一个不透明的指针传递给所有东西，只是不会安静地死去。我正在用 Objective-C 的 Xcode4 编写一个简单的程序，我对设计和约定有一些疑问。我设计了两个类“PacketCapture”和“IPGeo”。第一个是 libpcap 的轻量级包装器，添加了一些解析逻辑，第二个是 MaxMind 的 GeoIP C API 的轻量级包装器。在我的主模块中，我实例化了 PacketCapture 类并将控制权传递给数据包捕获循环：

```
int main(int argc, const char *argv[])
{
    @autoreleasepool
    {
        PacketCapture *_PacketCapture = [[PacketCapture alloc] init:"en1" withFilter:""];
        if (_PacketCapture == nil)
        {
            NSLog(@"Can't instantiate PacketCapture class");
            return (-1);
        }
        IPGeo *_IPGeo = [[IPGeo alloc] init:"/usr/local/share/GeoIP/GeoIPCity.dat"];
        if (_IPGeo == nil)
        {
            NSLog(@"Can't instantiate IPGeo class");
            return (-1);
        }

        NSLog(@"entering packet loop...");
        [_PacketCapture packetCapture];
    }
    return (0);
} 
```

在该`packetCapture`方法内部调用了一个解析函数，该函数将数据包切碎并显示出来。我需要在解析代码中使用 GeoIP 逻辑来针对地理数据库查找 IP 地址。这就是我的问题和普遍的困惑。

我的问题：

*   我应该在哪里实例化 GeoIP 类？

*   在类糟糕的 OO 设计中，对象内部是否存在无限循环？感觉还可以。也许如果我重组这个问题会很容易解决？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T23:39:37.190

这段代码有几个问题：

1.  您正在使用*保留标识符*（任何以两个下划线或一个下划线后跟一个大写字母开头的标识符都是保留的）。正如我在评论中提到的，它不太可能引起任何实际问题，但这是需要考虑的问题。

2.  对于初始化方法，一种更“可可”的方法是接受文件名或`NSData`包含文件内容的对象。后者的好处是数据不一定必须来自磁盘上的文件。例如：

    ```
    NSData *geoData = [NSData dataWithContentsOfFile:@"/path/to/file"];
    IPGeo *ipGeo = [[IPGeo alloc] initWithData:geoData]; 
    ```

    在该`initWithData:`方法中，您可以将数据解析为原始字节，或者将其转换为字符串并解析，等等。无论如何，`init:`这对于方法来说不是一个很好的名称，因为不清楚该方法期望什么。如果您仍然希望它接受文件名，则可能是一个好名称`initWithContentsOfFile:`（并让它接受 an`NSString`而不仅仅是 a `const char *`）。

    同样，使用您的`PacketCapture`初始化方法。Objective-C 为您提供了能够命名参数的好处，这允许半自文档化代码，因此方法命名在 Objective-C 中非常重要，即使只是为了与所有其他常用框架保持一致。

3.  在方法中实现无限循环并没有错，这或多或少是`NSApplication`对其`run`方法的作用。*对此有*替代方案，例如线程化或使用运行循环等，但对于小型命令行实用程序而言，很少有任何好处。我建议稍微扩展和重命名您的方法：

    ```
    // Methods are usually named as if you are telling the object what to do
    [packetCapture capturePackets];

    // or, if you think this might be of some benefit:
    NSDate *stopTime = /* specify a time to stop */;
    [packetCapture capturePacketsUntilDate:stopTime];

    // This could also allows for indefinite running with:
    [packetCapture capturePacketsUntilDate:[NSDate distantFuture]]; 
    ```

4.  如果`PacketCapture`需要一个实例`IPGeo`来运行，那么`PacketCapture`应该接受`IPGeo`它作为其初始化程序的一部分（再次，我将方法重命名为我认为应该是的）：

    ```
    PacketCapture *packetCapture = [[PacketCapture alloc] initWithIPGeo:ipGeo interface:@"en1"]; 
    ```

    或者，`PacketCapture`该类可以分配和初始化`IPGeo`该类本身，但这会在两个类之间创建紧密的耦合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T23:01:53.887

你说的“`GeoIP`类”是什么意思`IPGeo`？在哪里实例化它取决于几个因素。如果您只需要在`IPGeo`类中的一个解析方法中使用它，请在此处实例化它。如果您在对象的整个生命周期中都需要它，请`IPGeo`在指定的初始化程序中对其进行实例化，并将其保存在实例变量中。

无限循环本质上并不是一件坏事，但通常有更好的方法。你在开发什么平台？

顺便说一句，`NSString`文字有一个`@`前缀，例如：`@"foo"`。您正在使用纯 C 字符串，如果您将它们传递到任何期望`NSString`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T23:08:20.667

> 我应该在哪里实例化 GeoIP 类？

如果`PacketCapture`需要一个`IPGeo`对象来运行，我建议在`PacketCapture`'s`-init`方法中实例化它。如果您需要在使用`IPGeo`对象之前配置对象（例如，通过在初始化时传递不同的路径）`PacketCapture`，并且使用的路径以`PacketCapture`不应该知道的方式确定，则让类负责管理这两者（或者，在您的情况下，程序的主循环）创建一个实例并将其作为参数传递给`PacketCapture`该类的自定义初始化方法。

有点吹毛求疵——你的初始化`IPGeo`器不遵循表达方法名称的 Objective-C 约定。`-initWithPathToDatabase:`在我看来会看起来好多了。

类似地，您可以向您的类添加一个`-initWithIPGeo:`方法。`PacketCapture`

> 在类糟糕的 OO 设计中，对象内部是否存在无限循环？

如果这是一个 iOS 或 Cocoa 应用程序，那么肯定是的。如果它是一个命令行工具，那么也许。此外，如果该无限循环正在主线程上运行，它将阻塞所有 UI 元素，这将使您的程序看起来没有响应。

更好的选择是使用协议/委托模式，这是 Objective-C 程序的主要部分。使用以下方法创建协议：

```
- (void)packetCapture:(PacketCapture *)packetCapture didReceiveDataFromIPAddress:(NSString *)ipAddress; 
```

然后创建一个实现此协议并在接收数据包时执行操作的委托对象。如果您正在制作命令行工具，则可以实例化该委托并等待接收消息。

# android - 壁纸更换事件

> ID：10592091
> 
> 赞同：3
> 
> 时间：2012-05-14T22:53:39.080
> 
> 标签：android, broadcastreceiver, wallpaper

我可以在广播接收器中获得壁纸更改事件吗？我需要检测用户是否更改了墙纸。我怎么能做到？

我正在做的是：我有一个可以自动更改壁纸的应用程序。如果用户使用不同的应用程序手动更改它，我想注意它并询问用户他/她是否想将该新壁纸添加到我的应用程序的列表中

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T19:31:00.253

壁纸图像更改时只有广播：http: [//developer.android.com/reference/android/content/Intent.html#ACTION_WALLPAPER_CHANGED](http://developer.android.com/reference/android/content/Intent.html#ACTION_WALLPAPER_CHANGED)

为了做你想做的事，你需要有更多的逻辑来使用它来确定壁纸是否已更改为除图像之外的其他内容：http: [//developer.android.com/reference/android/app/WallpaperManager.html#获取壁纸信息](http://developer.android.com/reference/android/app/WallpaperManager.html#getWallpaperInfo)()

老实说，如果你正在制作一张会改变的壁纸，你真的应该考虑只写一张动态壁纸。这将更舒适地融入系统：您可以随时更改显示的内容，并且当用户选择不同的壁纸时很清楚，因为您的动态壁纸将停止。

此外，您需要非常小心地使用 ACTION_WALLPAPER_CHANGED，因为它会使您与其他应用程序进行不良交互。下面是它的文档，它将出现在下一个 API 中：

```
/**
 * Broadcast Action:  The current system wallpaper has changed.  See
 * {@link android.app.WallpaperManager} for retrieving the new wallpaper.
 * This should <em>only</em> be used to determine when the wallpaper
 * has changed to show the new wallpaper to the user.  You should certainly
 * never, in response to this, change the wallpaper or other attributes of
 * it such as the suggested size.  That would be crazy, right?  You'd cause
 * all kinds of loops, especially if other apps are doing similar things,
 * right?  Of course.  So please don't do this.
 *
 * @deprecated Modern applications should use
 * {@link android.view.WindowManager.LayoutParams#FLAG_SHOW_WALLPAPER
 * WindowManager.LayoutParams.FLAG_SHOW_WALLPAPER} to have the wallpaper
 * shown behind their UI, rather than watching for this broadcast and
 * rendering the wallpaper on their own.
 */ 
```

真实的故事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T00:02:25.850

我不相信任何东西都会被广播。

[WallpaperManager](http://developer.android.com/reference/android/app/WallpaperManager.html)确实有一些 getter 可以将当前壁纸作为可绘制对象返回给您。也许您可以将当前副本与存储的副本进行比较，以确定它是否已更改。但是，如果您使用此功能通过在用户设置壁纸后更改壁纸来欺骗用户，请知道，我希望您在黑暗中赤脚踩上乐高积木。

# inno-setup - 如何从 InitializeWizard 中更改向导页面的名称和描述？

> ID：10592095
> 
> 赞同：1
> 
> 时间：2012-05-14T22:53:55.407
> 
> 标签：inno-setup

我正在将代码`CurPageChanged`从`InitializeWizard`. 如果`CurPageChanged`Inno 已更改为我想要修改名称和描述的页面，我可以这样做：

```
WizardForm.PageNameLabel.Caption := 'A message about your license';
WizardForm.PageDescriptionLabel.Caption := 'The message here'; 
```

`InitializeWizard`但是如果不指定要更改标题的页面，我就无法做类似的事情。我查看了 Inno Setup 源，但我无法弄清楚我需要访问什么。如何更改向导页面的名称和描述？

我会想到类似的东西，`WizardForm.LicensePage.PageNameLabel.Caption`但那是行不通的。也许我对这一切都错了。有没有更简单的方法？我可能还需要为名称和描述添加翻译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T00:21:30.817

`Messages`在脚本中包含一个部分：

```
[Messages]
WizardLicense = A message about your license
LicenseLabel = The message here 
```

它应该支持多种语言的方式是这样的：

```
[Languages]
Name: en; MessagesFile: "compiler:Default.isl"
Name: de; MessagesFile: "compiler:Languages\German.isl"

[Messages]
en.WizardLicense = A message about your license
en.LicenseLabel = The message here
de.WizardLicense = (German translation)
de.LicenseLabel = (Another translation..) 
```

您当然可以修改相应 .isl 文件的副本并改用它。

# c# - MSChart DateTime 仅显示为 OLE-Automation

> ID：10592097
> 
> 赞同：0
> 
> 时间：2012-05-14T22:54:07.447
> 
> 标签：c#, datetime, ole, mschart

我在 1 个图表中有 3 个 ChartAreas，每个都以相同的方式初始化（​​只有其他名称）。每个 ChartArea 都有自己的系列（仍然以相同的方式初始化），填充如下：

```
DateTime Datum = Pair.Key;
                    if (Datum1_gewählt.Contains(Datum))
                    {
                        foreach (Tuple<DateTime, int> t in Pair.Value)
                        {
                            //Füge Messwert mit Zeit der aufzeichnung hinzu
                            mySeriesHRM1.Points.AddXY(t.Item1, t.Item2);
                        }
                    }
                    if (Datum2_gewählt.Contains(Datum))
                    {
                        foreach (Tuple<DateTime, int> t in Pair.Value)
                        {
                            //Füge Messwert mit Zeit der aufzeichnung hinzu
                            DataPoint pt = new DataPoint(t.Item1, t.Item2);
                            mySeriesHRM2.Points.Add(pt);
                        }
                    }
                    if (Datum3_gewählt.Contains(Datum))
                    {
                        foreach (Tuple<DateTime, int> t in Pair.Value)
                        {
                            //Füge Messwert mit Zeit der aufzeichnung hinzu
                            mySeriesHRM3.Points.AddXY(t.Item1, t.Item2);
                        }
                    } 
```

如您所见，每个系列都充满了实际日期（x 轴）和双精度值（y 轴）。 **我的问题是在 Chartarea 1 中所有日期都正确显示，但在其他区域中显示为 OLE 自动化。**有谁知道为什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T23:21:33.080

尝试将 Chart.Series.XValueType 属性设置为“DateTime”、“Date”或“Time”，

更多信息：http: [//support2.dundas.com/Default.aspx ?article=761](http://support2.dundas.com/Default.aspx?article=761)

# .htaccess - seo 友好的 url 和重定向

> ID：10592107
> 
> 赞同：0
> 
> 时间：2012-05-14T22:55:39.320
> 
> 标签：.htaccess, url, seo

我终于找到了一种从我的网址中删除获取参数的方法，我有类似 **/s.com/file.php?name=somthing的网址**

使用此代码，我将它们更改为**s.com/file/somthing**

选项 +FollowSymLinks RewriteEngine On

RewriteRule ^file/(.*?)$ [http://s.com/file.php?name=](http://s.com/file.php?name=) $1

到目前为止一切正常

在我的本地主机中，当我单击**s.com/file/somthing**之类的 url 时，它会完全指向 url

但在我的服务器中，它重定向到旧网址并显示旧网址

我不想显示我的旧网址

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T23:00:27.813

http 重定向始终是外部的 => 在浏览器中可见。试试看：

```
RewriteRule ^file/(.*?)$ /file.php?name=$1 
```

# android - c# windows mobile 应用在其他平台上？

> ID：10592108
> 
> 赞同：0
> 
> 时间：2012-05-14T22:55:39.797
> 
> 标签：android, ios, windows-phone-7, windows-phone-7.1

用 C# 编程的 windows phone 应用程序能否与 Symbian、android、IOS 一起工作；如果是，如何？我也在应用程序中使用了本地数据库

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T23:19:44.207

塞班，一点也不。对于 Android 和 iOS，[Xamarin 的 Mono 产品](http://xamarin.com/)可能允许您为这些平台重新编译应用程序，但必须重写 UI 代码。没有办法让 Phone 二进制文件按原样在其他平台上运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T23:24:19.240

只是稍微不同意@ctacke 的回答。

从技术上讲，Symbian 有一个旧的 Microsoft Silverlight 2 端口：http: [//www.microsoft.com/en-us/download/details.aspx? displaylang=en&id=7890](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=7890)

但它已经很长时间没有更新了——而且我真的不认为它对未来的开发有用。

# c# - SQL 的表设计

> ID：10592128
> 
> 赞同：5
> 
> 时间：2012-05-14T22:57:57.260
> 
> 标签：c#, sql, database-design

我希望你能在这里帮助我——我有一个关于设计 SQL 表的问题。我知道如何使用 C# 写入数据库并执行查询，但我从来没有真正需要设计一个。所以我想我会试一试只是我们感兴趣的。

假设我有一个名为family_surname 的表。在该表中，可能有 x 个family_members，例如从 2 人到 22 人不等。我如何根据family_surname引用family_members？

所以我会有姓氏史密斯、琼斯、布朗、泰勒等。

然后史密斯可能有 5 个成员，我想记录年龄、身高、体重等等。琼斯可能有 8 名成员 - 它可能因家庭而异。

我真的不想为每个成员列出 8 次“姓氏”——理想情况下，姓氏行会引用（或以某种方式指向）另一个表中的相应行。这就是我遇到麻烦的地方！

我希望我说得通；就像我说的，我只是感兴趣，但我想知道如何用两张桌子做到这一点。

无论如何，谢谢你的帮助，我很感激。

编辑感谢所有评论的人 - 当然这里有一些有用的信息，我很感激。我正在阅读和研究一些 SQL 代码，到目前为止它还不错。再次感谢各位！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T23:04:35.907

您要问的是关于标准化的问题。该表如下所示：

```
Create table surname (
    SurnameID int,
    Surname varchar(255)
) 
```

其他表将使用 I'd 引用姓氏。此外，您可能希望 surnameid 是唯一的、主键和自动递增。这些是更高级的主题。

也就是说，我不确定姓氏是否适合像这样拆分。规范化数据的一个原因是维护关系完整性。在这种情况下，这意味着当您将“Smith”更改为“Jones”时，所有 Smiths 都会同时更改。我认为这不是你的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T23:19:46.710

是的，之前关于学习数据库规范化的答案可能是准确的，但对于初学者来说......

分解这个人的名字（名字和姓氏）可能有点多。除非您假设每个名为“琼斯”的人都是相关的。将每个表视为一个实体/对象，并尝试将它们尽可能地连接到现实世界的“对象”。由于一个人需要名字和姓氏（最小）来唯一标识他们，因此不应以这种方式对其进行规范化。

在您绘制的场景中，您应该有一个包含 PersonId、FirstName、LastName 的 Persons 表。如果需要，一个单独的表来存储其他信息。然而，由于这个人只能是一个身高、体重、年龄等......这些应该存储在 Persons 表中。

因此，您实际上只需要一张桌子。除非你开始输入电话号码、地址等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T23:21:42.313

分解可以如下进行

1.  创建表姓氏（INT ID，姓氏 VARCHAR2（200））
2.  创建表详细信息（INT ID，外键（SURNAME_ID）参考姓氏（ID），PARAM1，PARAM2 .....）

分解的粗略草图是

获取属性列表（SURNAME、PARAM1、PARAM2、....）。根据属性列表，可以推断出以下键： 1\. (SURNAME) 2.(PARAM1,PARAM2...) 为每组键创建一个单独的表

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T19:06:43.510

> 我真的不想为每个成员列出 8 次“姓氏”

为什么？您是否**测量**了真实的数据量并确定它实际上是一个问题？

**除非**您计划拥有特定于姓氏的其他数据（并且独立于拥有该姓氏的人），否则姓氏**不在**自己的表中并没有错。你没有打破任何正常的形式。

事实上，您提出的建议可能是一个非常糟糕的主意，原因如下：

*   首先，你需要一个 JOIN 来找出人的姓氏——这对性能不利。
*   它使人员的插入/修改/删除变得复杂（并减慢了速度）。
    *   插入新人时，您必须搜索 surname 表以决定是否可以“重用”现有人或插入新人。
    *   修改（例如，当妻子采用丈夫的姓氏时）是删除（见下文）和插入的组合。
    *   一个姓氏可以在没有任何人的情况下存在吗？如果不是，则没有良好的声明完整性来强制执行此操作。充其量你需要编写一些触发器。
*   毕竟，您最终可能不会节省太多空间 - 额外的表将有自己的存储开销（例如主键“下方”的索引），这可能会“吃掉”大部分预期的存储节省。

# c - 知道如何在正确的时间定义函数

> ID：10592130
> 
> 赞同：4
> 
> 时间：2012-05-14T22:58:13.230
> 
> 标签：c, function, parameters

这是一个“奇怪”的问题，因为它让我感到困惑。我一直在学习 C，我意识到我的 C 书中没有一个问题。

当启动一个函数时，比如`int main()`or `void name()`，我怎么知道在括号里放什么……比如`int main(int argc, char *argv[])`or `int main()`。

这是一个愚蠢的问题，但我不知道在编程时何时使用什么。在线链接资源会有所帮助。

谢谢，对愚蠢感到抱歉。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T23:02:44.550

您传递给函数的变量是它的输入或（有时）它的输出。例如，如果您想编写一个将两个整数相加并返回其和的函数，您可以定义

```
int sum(int m, int n) {
  return m + n;
} 
```

该`main()`函数是一种特殊情况，因为它对提供给程序的命令行参数进行操作。在大多数语言中，`main()`采用一个字符串数组，每个字符串中有一个来自命令行的单词。在 C 中，它还接受一个整数，表示在命令行中输入的单词数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T23:02:26.657

在您关于 的具体问题`main()`中，当您想要引用传入的命令行参数时，您将需要括号内的参数。您可能会对声明函数的不同方式感到困惑。作为初级 C 程序员，您应该始终`int func(int a, int b)`在同一行声明返回类型、函数名称、参数和参数类型。不要让其他语法让您感到困惑——大多数是出于历史原因而存在的，当您知道足以回答知道它们为什么存在时，您就会知道足以自己回答这个问题:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T00:12:22.743

即使正确的签名是`main(int argc, char *argv[])`，也很常见`int main()`。这是有效的，因为*C 在检查外部函数的签名方面并不是特别严格*（不可能；当你在 C 中调用外部函数时，你只是给出了一个指向函数的指针和一个参数列表；没有办法它可以真正检查您是否按照最初定义的方式使用该功能。）

所以这也可以：

```
int main(int argc) { return 0; } 
```

即使这样也会：

```
int main(int argc, char *argv[], int foo) { return 0; } 
```

只是不要期望任何有意义的值会出现在`foo`.

# ruby - 用黄瓜测试 EventMachine

> ID：10592131
> 
> 赞同：4
> 
> 时间：2012-05-14T22:58:23.353
> 
> 标签：ruby, cucumber, eventmachine

我正在尝试为我的应用程序编写一个黄瓜功能和 rspec 测试，以使用 twitter-stream 访问 twitter 流 api。我有以下代码：

```
Then /^I should see the latest (\d+) tweets from my timeline$/ do |num|
  timeline = Starling::Timeline::Mine.new(@store)

  EventMachine::run {
    tweets = timeline.latest
    timeline.stop
  }

  tweets.length.should == num.to_i
end 
```

该方法的代码是：

```
def latest
  token = @token.get_token

  @stream = Twitter::JSONStream.connect(options)

  items = []
  @stream.each_item do |item|
    items << item
  end

  items
end 
```

但是，可以预见的是，它在timeline.latest 调用上停滞不前。如何正确测试`latest`方法中的逻辑？

# r - 在数据框中选择相似且唯一的值

> ID：10592135
> 
> 赞同：1
> 
> 时间：2012-05-14T22:58:41.810
> 
> 标签：r

我有以下数据。

```
df = data.frame(email_one=c("one@gkn.com","two@wern.com","three@fu.cin",
        "four@huo.com","five@hoi.com"), email_two=c("ten@hoinse.com",
        "four@huo.com","two@wern.com","five@hoi.com","six@ihoio.com")) 
```

我想知道是否可以使用 R 来选择出现在两列中的值、仅出现在第一列中的唯一值以及仅出现在第二列中的唯一值。

我最初试图在 excel 中解决这个问题，但我假设 R 中有一个更优雅的解决方案，甚至可能使用 sqldf 包。最好使用内置函数，而不是充满各种条件语句的用户定义函数（df$email_one == df$email_two）

谁能帮我指出正确的方向。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T23:03:24.630

您怀疑这些操作会有内置函数是正确的。在这种情况下，您需要功能`intersect()`和，以及帮助页面`setdiff()`上的一些相关功能。[`?intersect`](http://stat.ethz.ch/R-manual/R-devel/library/base/html/sets.html)

```
# Elements present in both columns
intersect(df[[1]], df[[2]])
[1] "two@wern.com" "four@huo.com" "five@hoi.com"

# Elements of column 1 that are not in column 2 
setdiff(df[[1]], df[[2]])
[1] "one@gkn.com"  "three@fu.cin"

# Elements of column _2_ that are not in column _1_
setdiff(df[[2]], df[[1]])
[1] "ten@hoinse.com" "six@ihoio.com" 
```

# javascript - 为什么 KML 无法在 Google 地图中加载？

> ID：10592139
> 
> 赞同：2
> 
> 时间：2012-05-14T22:59:07.177
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3, kml

我有一个要加载到 Google 地图中的 KML 文件。它在水中的某处放大，没有路线痕迹。这是我正在尝试的代码：

```
 var kmlLayer = new google.maps.KmlLayer(kml);
    kmlLayer.setMap(this.googlemap); 
```

“this.googlemap”有一个谷歌地图对象。这是一个非常简单的例子，但也许我遗漏了一些东西，或者我的 KML 格式不正确。我的 KML 文件可以在这里下载：http: [//temp-share.com/show/gFHKdyG0Y](http://temp-share.com/show/gFHKdyG0Y)。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T23:13:44.203

Google Map 需要能够直接访问此 KML 文件，换句话说，您的 KML 文件必须是公开可用的，并且必须以 .kml 或 .kmz 扩展名结尾（我相信）。

为了确保 KML 文件本身是正确的，您可以随时访问 maps.google.com 并将 URL 放在搜索栏中，它应该会被自动识别和呈现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T05:53:04.667

正如比尔所说，KML 文件需要可公开下载，但是您在上述问题中链接到的 URL 并不直接链接到文件本身，它链接到您可以访问以下载文件的 HTML 页面。您可能必须尝试其他服务，因为您似乎无法直接从该位置下载而无需通过中间页面。

当您将链接粘贴到浏览器中时，您将知道您使用的是正确的链接，它会立即提示您下载文件。

如果您仍然有问题，请确保发布更多代码。

# mysql - 同一输入表上的 SQL 约束

> ID：10592140
> 
> 赞同：1
> 
> 时间：2012-05-14T22:59:07.857
> 
> 标签：mysql, key

我正在使用工作台，但我碰壁了。我四处搜索，到目前为止我发现的每个例子都是简单的例子。这是我的问题。是否有可能有一个表有 2 个外键但其中一个自检？我会更改名称以使其更有趣。这是示例表 1：系统组（2 列，id 和名称）表包含：1 sega，2 snes

表 2：世嘉游戏（2 列，id 和名称）表包含：1 sonic，2 street of rage

表 3：snes 游戏（2 列，id 和名称）表包含：1 个马里奥世界，2 个俄罗斯方块攻击

表 4：玩家（4 列，名称、lname、系统、游戏）示例：carlos munoz snes sonic

如果我点击应用，我想失败，因为约束应该检查表 1 中的 snes 并基于表 2 上的检查 sonic。外键适用于系统检查，但我如何根据系统答案为游戏添加检查? 我现在正在使用mysql。我必须说我对此很陌生，所以如果这是简单的事情，请随意给我发火。我知道如何使用一个简单的表来做到这一点（一切都在一起而不是分开），但现在我试图把它组织起来。谢谢。

# javascript - 如果您使用 Backbone.js 或 Spine.js，您应该将 MVC 用于视图的所有动态部分，还是仅用于更复杂的部分？

> ID：10592144
> 
> 赞同：1
> 
> 时间：2012-05-14T22:59:30.160
> 
> 标签：javascript, backbone.js, spine.js

我刚刚开始使用 Spine.js。我喜欢。

但有时我只需要对后端进行一个简单的调用以获取 JSON 数据来填充，例如，一个导航栏在填充后不会改变。在这里，让前端模型和控制器看起来有点矫枉过正，当我可以使用一个简单的 jQuery 调用并将 JSON 响应推送到模板中并将结果注入 DOM 时。

这种混合方法有什么缺点吗，其中一些视图由 JavaScript MVC 管理，而另一些视图则由简单的 jQuery Ajax 代码注入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T23:15:03.900

MVC 背后的整个想法是关注点分离。模型处理数据，视图处理显示，控制器处理流程，在某些情况下处理业务逻辑。当然，您可以轻松地在视图中进行 jQuery 调用；毕竟，JavaScript 是完全开放的，只要你能得到参考，你就可以自由地做你想做的事。但是这样做会破坏模式并使您的观点所扮演的角色变得混乱。总而言之，如果您采用设计模式，请坚持下去。它将使管理您的应用程序几个月甚至几年后变得更加容易，因为您不必考虑组件的角色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T23:03:53.927

我说你应该为所有人做这件事。

我认为你的选择不应该是这样做的难易程度，如果你建立了一个标准，那就坚持下去。这样做通常最终会节省时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T23:47:18.980

好吧，当我遇到一次性注入的 JS 时，我总是问的第一个问题是，这是否不应该首先发生在后端。

至于一致性的问题，如果只需很少的努力就可以以“错误”的方式进行操作，请继续看看会发生什么。如果需要，以后更改它并不需要大量的工作，我真的不明白为什么你会为了保持一致而花费时间和/或不必要的开销到你的应用程序。

重要的是，您要清楚地表明您没有通过 MVC 方法在您的代码中为下一个开发人员处理该问题。但归根结底，该工具可以帮助您，而不是阻碍您。我们都在涉及 css、html 和 JavaScript 的关注点分离上做了一些例外。重要的是要了解规则的真正价值，这样当你打破它时，你就会知道权衡是什么。在这种情况下，我看不到太多。

# hadoop - 无法在 Hadoop map-reduce 作业中加载 OpenNLP 句子模型

> ID：10592147
> 
> 赞同：3
> 
> 时间：2012-05-14T22:59:51.417
> 
> 标签：hadoop, mapreduce, opennlp

我正在尝试将 OpenNLP 集成到 Hadoop 上的 map-reduce 作业中，从一些基本的句子拆分开始。在 map 函数中，运行以下代码：

```
public AnalysisFile analyze(String content) {
    InputStream modelIn = null;
    String[] sentences = null;

    // references an absolute path to en-sent.bin
    logger.info("sentenceModelPath: " + sentenceModelPath);

    try {
        modelIn = getClass().getResourceAsStream(sentenceModelPath);
        SentenceModel model = new SentenceModel(modelIn);
        SentenceDetectorME sentenceBreaker = new SentenceDetectorME(model);
        sentences = sentenceBreaker.sentDetect(content);
    } catch (FileNotFoundException e) {
        logger.error("Unable to locate sentence model.");
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        if (modelIn != null) {
            try {
                modelIn.close();
            } catch (IOException e) {
            }
        }
    }

    logger.info("number of sentences: " + sentences.length);

    <snip>
} 
```

当我运行我的工作时，我在日志中收到一条错误消息，提示“in must not be null！” [（类抛出错误的来源）](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.opennlp/opennlp-tools/1.5.2-incubating/opennlp/tools/util/model/BaseModel.java)，这意味着我无法以某种方式打开模型的 InputStream。其他花絮：

*   我已经验证模型文件存在于`sentenceModelPath`所指的位置。
*   我为 opennlp-maxent:3.0.2-incubating、opennlp-tools:1.5.2-incubating 和 opennlp-uima:1.5.2-incubating 添加了 Maven 依赖项。
*   Hadoop 只是在我的本地机器上运行。

其中大部分是来自[OpenNLP 文档](http://opennlp.apache.org/documentation/1.5.2-incubating/manual/opennlp.html#tools.sentdetect.detection.api)的样板。在 Hadoop 端或 OpenNLP 端有什么我遗漏的东西会导致我无法从模型中读取吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T23:51:52.723

你的问题是`getClass().getResourceAsStream(sentenceModelPath)`线路。这将尝试从类路径加载文件 - HDFS 和客户端本地文件系统中的文件都不是映射器/减速器运行时类路径的一部分，所以这就是您看到 Null 错误的原因（getResourceAsStream()如果找不到资源，则返回 null）。

要解决此问题，您有多种选择：

*   修改代码以从 HDFS 加载文件：

    > ```
    > modelIn = FileSystem.get(context.getConfiguration()).open(
    >                  new Path("/sandbox/corpus-analysis/nlp/en-sent.bin")); 
    > ```

*   修改代码以从本地目录加载文件，并使用`-files`GenericOptionsParser 选项（将文件从本地文件系统复制到 HDFS，然后返回到正在运行的映射器/reducer 的本地目录）：

    > ```
    > modelIn = new FileInputStream("en-sent.bin"); 
    > ```

*   将文件硬烘焙到作业 jar 中（在 jar 的根目录中），并修改代码以包含前导斜杠：

    > ```
    > modelIn = getClass().getResourceAsStream("/en-sent.bin");</li> 
    > ```

# r - 比较 R 中的两个数据框对象是否相等？

> ID：10592148
> 
> 赞同：58
> 
> 时间：2012-05-14T22:59:53.467
> 
> 标签：r, dataframe, compare, equality

如何检查两个对象（例如数据帧）在 R 中的值是否相等？

通过值相等，我的意思是一个数据帧的每一列的每一行的值等于第二个数据帧中相应行和列的值。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-05-14T23:50:01.553

目前尚不清楚测试两个数据帧是否“值相等”是什么意思，但要测试值是否相同，以下是两个值相等的不同数据帧的示例：

```
a <- data.frame(x = 1:10)
b <- data.frame(y = 1:10) 
```

要测试所有值是否相等：

```
all(a == b) # TRUE 
```

要测试对象是否相同（它们不是，它们具有不同的列名）：

```
identical(a,b) # FALSE: class, colnames, rownames must all match. 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-02-27T04:09:19.823

此外，相同仍然有用并支持实际目标：

```
identical(a[, "x"], b[, "y"]) # TRUE 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-06-17T03:43:27.297

我们可以使用 R 包`compare`来测试对象的名称和值是否相同，只需一步。

```
a <- data.frame(x = 1:10)
b <- data.frame(y = 1:10)

library(compare)
compare(a, b)
#FALSE [TRUE]#objects are not identical (different names), but values are the same. 
```

如果我们只关心值的相等性，我们可以设置`ignoreNames=TRUE`

```
compare(a, b, ignoreNames=T)
#TRUE
#  dropped names 
```

该软件包具有其他有趣的功能，例如`compareEqual`和`compareIdentical`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-11T12:37:27.947

无需依赖另一个包，而是比较两个数据集的结构（类和属性）：

```
structure_df1 <- sapply(df1, function(x) paste(class(x), attributes(x), collapse = ""))
structure_df2 <- sapply(df2, function(x) paste(class(x), attributes(x), collapse = ""))

all(structure_df1 == structure_df2) 
```

# spring - 在类型 java.lang.String 上找不到属性“0”

> ID：10592156
> 
> 赞同：1
> 
> 时间：2012-05-14T23:02:30.487
> 
> 标签：spring, jsp, spring-mvc, tags, jsp-tags

我正在开发一个 SpringMVC 3 和 Roo 项目。现在有一个网络层死胡同。基本上这是一个类型转换问题，让我发疯

我尝试在迭代表行列表时传递记录计数器（这里是 SystemSettings 表，然后每一行都是系统设置）。在 jspx 文件中，我进行了以下循环：

```
<form:form action="${form_url}" method="post" modelAttribute="formSettings">
        <c:forEach items="${settings}" var="item" varStatus="status">
            <c:set value="${item.actionType}" var="type"/>
            <c:set value="${item.name}" var="name"/>
            <c:set value="${item.setting}" var="value"/>
            <!--  -->
            <field:complex field="setting" id="l_com_transoftinc_vlm_carrierweb_domain_systemsetting_${name}" object="${item}" setting="${value}" type="${type}" cnt="${status.count-1}" formBacking="formSettings" z="user-managed"/>
        </c:forEach> 
```

这样状态计数就可以将计数器值传递给“complex.tagx”。这里简化如下：

```
<jsp:directive.attribute name="cnt" type="java.lang.Integer" required="false" rtexprvalue="true" description="counter variable" /> 
<c:choose>
      <c:when test="${fn:toLowerCase(type) eq 'checkbox'}">
        <input type="checkbox" name="${formBacking[cnt].field}" value="TRUE" checked="${fn:toLowerCase(setting) eq 'true' ? 'checked' : ''}"/>
      </c:when>
      <c:when test="${fn:toLowerCase(type) eq 'inputbox'}">
        <input type="input" name="${formBacking[cnt].field}" value="${setting}"/>
      </c:when>
    </c:choose> 
```

我没有把所有的属性都放在这里以使代码部分过于冗长。但是我得到一个非常讨厌的异常告诉我计数器（当然在第一次循环中返回 0）不是字符串类型？我认为JSTL可以自动转换它。但是，我知道我使用三个变量来组成组件名称可能不是一个好主意，但是我不明白这个异常，在这里，请帮助，非常感谢！

2012 年 5 月 14 日下午 6:39:59 org.apache.catalina.core.StandardWrapperValve 调用严重：Servlet.service() 用于 servlet [OptiVLM-CarrierWeb] 在上下文中与路径 [/OptiVLM-CarrierWeb] 引发异常 [请求处理失败; 嵌套异常是 org.apache.tiles.impl.CannotRenderException: ServletException 包括路径'/WEB-INF/layouts/default.jspx'。] 根本原因 javax.el.PropertyNotFoundException: 在类型 java.lang 上找不到属性'0' .String at javax.el.BeanELResolver$BeanProperties.get(BeanELResolver.java:237) at javax.el.BeanELResolver$BeanProperties.access$400(BeanELResolver.java:214) at javax.el.BeanELResolver.property(BeanELResolver.java: 325) 在 javax.el.BeanELResolver.getValue(BeanELResolver.java:85) 在 javax.el.CompositeELResolver.getValue(CompositeELResolver.java:67)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T03:28:16.000

此异常表明它`${formBacking}`实际上*是*a `java.lang.String`，而不是数组或 a `List`，通过大括号表示法的索引访问将在其上起作用。

实际上，您将其指定为标签上的普通字符串：

```
<field:complex ... formBacking="formSettings" /> 
```

可能你的意思是它是一个 EL 表达式：

```
<field:complex ... formBacking="${formSettings}" /> 
```

您只需要确保它确实是一个数组或一个`List`.

# ruby-on-rails - Rails - 试图理解一段代码

> ID：10592160
> 
> 赞同：0
> 
> 时间：2012-05-14T23:02:57.320
> 
> 标签：ruby-on-rails, ruby

我正在使用我在网上找到的一些代码：

```
def person_path(options)
  # This is where the path of the query is constructed.

  path = "/people/"     # For this section of the LinkedIn API
  if id = options.delete(:id)
    path += "id=#{id}"
  elsif url = options.delete(:url)
    path += "url=#{CGI.escape(url)}"
  else
    path += "~"
  end
end 
```

我不完全确定它的作用。我想做的是让它构造一个类似这样的字符串：[http](http://api.linkedin.com/v1/people/~:(current-status) ://api.linkedin.com/v1/people/~:(current-status )，我从LinkedIn开发人员文档中获得：[https：/ /developer.linkedin.com/documents/profile-api](https://developer.linkedin.com/documents/profile-api)

关于我应该通过什么功能以及它如何完成它的功能的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T23:14:35.233

虽然没有说明“选项”是什么，但在 Ruby 中将选项作为键值对的哈希传递给方法是非常常见的，所以我想说选项就是这样（99% 的确定性）。这是理解其余代码的关键部分。

我相信使用哈希上的#delete 方法是为了拉出键值对并一次性分配值，同时利用返回对象的“真实性”。

[http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-delete](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-delete)

我所说的“真实性”是指在 Ruby 中，除了“nil”和“false”之外，所有对象都评估为“true”。

其余的是简单的 if-else 控制流逻辑，您将在任何其他语言中看到，所以我希望这是有道理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T23:12:46.577

如果在选项中找到 id 或 url，这只会创建一个形式为“/people/id=foo”或“/people/url=foo_with_%_escapes”的路径。作为副作用，它会删除从选项中找到的那个。如果它没有找到任何一个，它会给出“/people/~”

# unicode - 为什么 MSDN 建议在 winsock 调用中使用 unicode 函数而不是 ansi 函数？

> ID：10592168
> 
> 赞同：1
> 
> 时间：2012-05-14T23:03:40.073
> 
> 标签：unicode, winsock, ansi, msdn

[MSDN 建议](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738520%28v=vs.85%29.aspx)：

> getaddrinfo 函数是提供从主机名到地址的独立于协议的转换的函数的 ANSI 版本。此函数的 Unicode 版本是 GetAddrInfoW。鼓励开发人员使用 GetAddrInfoW Unicode 函数而不是 getaddrinfo ANSI 函数。

鼓励是好的，但有什么理由这样做吗？我的意思是，主机名可以包含非 ansi 字符吗？如果是这样，这是 IPv6 独有的功能，还是 IPv4 主机名也可以包含 unicode 字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T23:24:38.227

微软只是试图让所有人远离 Ansi，仅此而已。他们建议对所有事情都使用 Unicode，尤其是因为 Windows 本身是基于 Unicode 的（并且已经使用了很长时间）。但是是的，正如 Jason 所说，主机名可以通过 Punycode 编码包含 Unicode 字符，这与现有的基于 Ansi 的 DNS 系统向后兼容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T23:06:43.553

DNS通过称为 Punycode 的编码方案支持所谓的“[国际化域名”。](http://en.wikipedia.org/wiki/Internationalized_domain_name)所以是的，主机名可以包含 Unicode 字符。它与 IPv4 或 IPv6 无关，因为那是完全不同的网络协议。

# android - Android 4.0 Api 禁用 Apk

> ID：10592174
> 
> 赞同：2
> 
> 时间：2012-05-14T23:04:44.130
> 
> 标签：android

我在 OEM 工作，想知道如何停用“禁用选项”，以便我们的设备用户无法删除预加载的应用程序，这是一个安全应用程序。SDK 4.0 中是否有 AndroidManifest 属性。如果是这样，请告诉我。非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T23:30:18.960

不，没有办法阻止用户禁用预安装的应用程序，这在很大程度上是设计使然。这样做的理念是，如果禁用应用程序不会阻止用户进入设置并重新启用它，那么他们应该被允许禁用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T09:50:47.530

我检查了包含以下功能[的设置应用程序的源代码。](https://github.com/android/platform_packages_apps_settings/blob/master/src/com/android/settings/applications/InstalledAppDetails.java)

这`SUPPORT_DISABLE_APPS`是一个系统范围的标志。如果您想防止任何（！）应用程序被禁用，您可以将此标志设置为`false`.

简而言之，评论说明了一切：唯一无法禁用的应用程序是：

*   **（主屏幕-）发射器**。这些是通过实现带有 action`ACTION_MAIN`和 category的 Intent 来识别的`CATEGORY_HOME`。
*   **使用系统证书签名的应用程序**。由于您可以在系统映像的构建过程中修改和创建此证书，因此应该可以使用此密钥对您的应用程序进行签名，从而防止禁用。

    ```
     if (SUPPORT_DISABLE_APPS) {
                try {
                    // Try to prevent the user from bricking their phone
                    // by not allowing disabling of apps signed with the
                    // system cert and any launcher app in the system.
                    PackageInfo sys = mPm.getPackageInfo("android",
                            PackageManager.GET_SIGNATURES);
                    Intent intent = new Intent(Intent.ACTION_MAIN);
                    intent.addCategory(Intent.CATEGORY_HOME);
                    intent.setPackage(mAppEntry.info.packageName);
                    List<ResolveInfo> homes = mPm.queryIntentActivities(intent, 0);
                    if ((homes != null && homes.size() > 0) ||
                            (mPackageInfo != null && mPackageInfo.signatures != null &&
                                    sys.signatures[0].equals(mPackageInfo.signatures[0]))) {
                        // Disable button for core system applications.
                        mUninstallButton.setText(R.string.disable_text);
                    } else if (mAppEntry.info.enabled) {
                        mUninstallButton.setText(R.string.disable_text);
                        enabled = true;
                    } else {
                        mUninstallButton.setText(R.string.enable_text);
                        enabled = true;
                    }
                } catch (PackageManager.NameNotFoundException e) {
                    Log.w(TAG, "Unable to get package info", e);
                } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T23:09:21.743

SDK 中对此没有任何内容。但是，用户无法卸载您放入固件中的应用程序，除非他们根植他们的设备。

# ruby-on-rails - 在将 expired_date 与当前日期进行比较后，将对象过期字段设置为 true

> ID：10592175
> 
> 赞同：0
> 
> 时间：2012-05-14T23:04:50.230
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rake-task

我正在为我的 rails 项目编写我的第一个 rake 任务，我对如何实现它有一个非常模糊的想法。

基本上，我的目标是拥有一个每天运行一次这个 rake 任务的自动化流程（Cron+Whenever）。

该任务将遍历每个 Traveldeal 实例并将其 expired_date 字段与当前日期进行比较，如果 Traveldeal 已过期，它将把 expired 布尔值设置为 true。

这是我根据我在网上找到的其他一些 raketask 编写的任务。

```
namespace :traveldeal do
  desc "Expire Old Traveldeals"
  task :expired_traveldeals => :environment do
    Traveldeal.transaction do
      Traveldeal.all.each { |deal|
        if(deal.expired_date <= Date.today)
           deal.expired = 't'
           deal.save!
        end   
      }
    end
  end
end 
```

我的 raketasks 似乎正在运行，但看起来我的过期字段没有设置为“t”。

有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T23:17:28.593

您将需要引用命名空间

```
rake traveldeal:expired_traveldeals 
```

# android - 带有 CheckBox 的 TableLayout 将其移动到列的一侧

> ID：10592176
> 
> 赞同：0
> 
> 时间：2012-05-14T23:04:57.063
> 
> 标签：android, checkbox, tablelayout

我有一个包含两列的 TableLayout。左列中的文本和右列中的复选框。CheckBox 不会像我认为的那样响应重力。减去 15dp 填充后，它不会移到屏幕右侧。仍然有一些“填充”阻止它一直向右移动。

除此之外，这看起来就像我想要的一样。

这是最有效的方法吗？

以及如何推动 CheckBox？

![有趣][1]

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:background="#FFFFFF"
    android:padding="15dp"
    android:weightSum="100" >

    <TableRow>

        <TextView
            android:id="@+id/textView1"
            android:layout_weight="75"
            android:text="Label textbox here"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#000000" />

        <EditText
            android:id="@+id/editText1"
            android:layout_weight="25"
            android:hint="0.00"
            android:textColor="#000000" >
        </EditText>
    </TableRow>

    <TableRow>

        <TextView
            android:id="@+id/textView1"
            android:layout_weight="80"
            android:text="Touch for option 2"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#000000" />

        <CheckBox
            android:id="@+id/checkBox1"
            android:layout_weight="20"
            android:textColor="#000000" />
    </TableRow>

    <TableRow>

        <TextView
            android:id="@+id/textView1"
            android:layout_weight="80"
            android:text="Touch for option 3"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#000000" />

        <CheckBox
            android:id="@+id/checkBox1"
            android:layout_weight="20"
            android:textColor="#000000" />
    </TableRow>

    <TableRow>

        <TextView
            android:id="@+id/textView1"
            android:layout_weight="80"
            android:text="Touch for option 4"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#000000" />

        <CheckBox
            android:id="@+id/checkBox1"
            android:layout_weight="20"
            android:textColor="#000000" />
    </TableRow>

    <TableRow>

        <TextView
            android:id="@+id/textView1"
            android:layout_weight="80"
            android:text="Touch for option 5"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#000000" />

        <CheckBox
            android:id="@+id/checkBox1"
            android:layout_weight="20"
            android:textColor="#000000" />
    </TableRow>

    <TableRow>

        <TextView
            android:id="@+id/textView1"
            android:layout_weight="80"
            android:text="Touch for option 6"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#000000" />

        <CheckBox
            android:id="@+id/checkBox1"
            android:layout_weight="20"
            android:textColor="#000000" />
    </TableRow>

    <TableRow>

        <TextView
            android:id="@+id/textView1"
            android:layout_weight="80"
            android:text="Touch for option 7"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#000000" />

        <CheckBox
            android:id="@+id/checkBox1"
            android:layout_weight="20"
            android:textColor="#000000" />
    </TableRow>

    <TableRow>

        <TextView
            android:id="@+id/textView1"
            android:layout_weight="80"
            android:text="Touch for option 8"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#000000" />

        <CheckBox
            android:id="@+id/checkBox1"
            android:layout_weight="20"
            android:textColor="#000000" />
    </TableRow>

    <TableRow>

        <TextView
            android:id="@+id/textView1"
            android:layout_weight="80"
            android:text="Touch for option 9"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#000000" />

        <CheckBox
            android:id="@+id/checkBox1"
            android:layout_weight="20"
            android:textColor="#000000" />
    </TableRow>

</TableLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T23:54:44.770

检查 TableLayout 的以下属性：

```
机器人：收缩列
机器人：拉伸列

```

并检查您用作列的组件的以下属性（在您的情况下为复选框和文本视图）：

```
android:layout_column
安卓：布局跨度

```

# cakephp-2.1 - cakephp211 保存数据错误（关联表）

> ID：10592177
> 
> 赞同：0
> 
> 时间：2012-05-14T23:04:59.503
> 
> 标签：cakephp-2.1

我有两个关联的表（客户有很多命令），这是我的表格：

```
<?php echo $this->Form->create('Customer');?>
echo $this->Form->input('Client.name', array('disabled' => true,'value' =>  'francis')); 
echo $this->Form->input('Command.0.the_date');
echo $this->Form->end(__('save'));?> 
```

这是我的功能：

```
public function add() {
    if (!empty($this->request->data)) {
        unset($this->Customer->Command->validate['customers_id']);
        $this->Customer->saveAssociated($this->request->data);    
    }
} 
```

但是当我处理保存数据时，什么也没有发生！为什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-14T14:14:59.160

请在您的控制器上使用此行

```
var $uses = array('Customer','Command');

public function add() {
    if (!empty($this->request->data)) {
        unset($this->Customer->Command->validate['customers_id']);
        $this->Customer->saveall($this->request->data);    
    }
} 
```

# android - 我真的希望这里有一个例外

> ID：10592181
> 
> 赞同：0
> 
> 时间：2012-05-14T23:06:05.470
> 
> 标签：android, sockets, exception

我正在为 Android 4.03 开发一个应用程序。相关代码是这样的：

```
public void startConnection() {
    new Thread(new Runnable() {
        @Override
        public void run() {
            try {
                Log.i(LOG_TAG, "Beginning");

                _socket = new Socket(_server, _port);
                _socket.setSoTimeout(DEFAULT_SOCKET_TIMEOUT);

                _writer = new BufferedWriter(new OutputStreamWriter(_socket.getOutputStream()));
                _reader = new BufferedReader(new InputStreamReader(_socket.getInputStream()));

                _in = new InputThread(_reader, new InputThreadObserver());
                _in.start();

                Log.i(LOG_TAG, "End");
            } catch (UnknownHostException e) {
                Log.i(LOG_TAG, "UnknownHostException");
            } catch (IOException e) {
                Log.i(LOG_TAG, "IOException");
            }
        }
    }).start();
} 
```

套接字的创建在一个新线程中执行，否则执行会冻结几秒钟。

如果我将变量设置`_server`为现有主机（例如`www.google.com`），一切都会好起来的。但是，如果我将`_server`变量设置为不存在的主机（例如`asd.asd`），我真的希望在记录器中打印“UnknownHostException”。这不会发生（但`_socket`变量是`null`）。它只打印“开始”（而不是“结束”）。任何的想法？

## 编辑：

变量声明如下：

```
private String _server;
private Socket _socket;
private int _port;
private BufferedWriter _writer;
private BufferedReader _reader;
private InputThread _in; 
```

## 编辑：

我正在尝试这个：

```
public void startConnection() {
    new Thread(new Runnable() {
        @Override
        public void run() {
            try {
                Log.i(LOG_TAG, "Beginning");

                _socket = new Socket(_server, _port);

                if (_socket == null)
                    Log.i(LOG_TAG, "NULL SOCKET! (test 1)");                        

            } catch (Exception e) {
                Log.i(LOG_TAG, "EXCEPTION!");
            }

            if (_socket == null)
                Log.i(LOG_TAG, "NULL SOCKET! (test 2)");
        }
    }).start();
} 
```

不知道为什么，但输出只是：

```
Beginning 
```

## 编辑：

经过 3 分 13 秒的等待，我终于得到：

```
EXCEPTION!
NULL SOCKET! (test 2) 
```

这正常吗？不应该立即抛出 UnknownHostException 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T23:15:52.030

查看[API 文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/Socket.html#Socket%28java.lang.String,%20int%29)，如果 _server 是一个字符串，那么你会得到一个 UnknownHost 异常。如果它是任何其他可能性，你不会。特别是此签名将创建异常：

```
Socket(String host,
          int port)
   throws UnknownHostException,
          IOException 
```

# google-play - google play如何切换语言？

> ID：10592187
> 
> 赞同：94
> 
> 时间：2012-05-14T23:06:45.850
> 
> 标签：google-play

我正在对 Google Play 进行一些统计分析，比较不同的语言。每次我访问该网站 ( [http://play.google.com/store](http://play.google.com/store) ) 时，它总是以我的语言打开。我想更改页面上显示的语言，并将显示的应用程序更改为不同国家的市场。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2012-05-14T23:13:53.033

下面虚线下方的答案是现在已经过时的原件。

这是最新信息（谢谢@deadfish）：

添加`&hl=<language>`喜欢`&hl=pl`或`&hl=en`

示例： [https](https://play.google.com/store/apps/details?id=com.example.xxx&hl=en) ://play.google.com/store/apps/details?id=com.example.xxx&hl=en或[https://play.google.com/store/apps/details?id=com.example。 xxx&hl=pl](https://play.google.com/store/apps/details?id=com.example.xxx&hl=pl)

所有可用的语言和缩写都可以在这里查找： [https ://support.google.com/googleplay/android-developer/table/4419860?hl=en](https://support.google.com/googleplay/android-developer/table/4419860?hl=en)

..................................................... .....................

要更改实际的本地市场：

基本上市场是根据您的 IP 自动确定的。您可以从您的 Gmail 帐户设置中更改一些本地国家/地区设置，但您正在浏览的国家/地区的 IP 仍然更为重要。要绕过它，您必须代理作弊。查看一些方式/网站： [http ://www.affilorama.com/forum/market-research/how-to-change-country-search-settings-in-google-t4160.html](http://www.affilorama.com/forum/market-research/how-to-change-country-search-settings-in-google-t4160.html)

要从 Android 手机执行此操作，您需要找到一个应用程序。我没有我的 Droid，但试试看： http: [//forum.xda-developers.com/showthread.php?t=694720](http://forum.xda-developers.com/showthread.php?t=694720)

# ios - iOS 取消某些地区的触摸事件

> ID：10592188
> 
> 赞同：0
> 
> 时间：2012-05-14T23:07:05.047
> 
> 标签：ios, uitouch

有没有办法在视图的某些区域取消触摸事件？我有一个自定义 UIView，我只想处理距离屏幕边缘 100 像素的触摸事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T23:34:12.170

假设您使用的是 Interface Builder，只需使用另一个 UIView。调整它的大小，并将其放置在您希望发生触摸事件的位置。然后，让自定义视图能够被触摸激活。以编程方式，我个人不知道该怎么做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T00:08:40.780

正如贾斯汀所说，在界面构建器中（或以编程方式）添加一个自定义 UIView 并将其添加到视图中。我们称该视图为 touchArea。然后在您的 Viewcontroller.m 文件中，实现

```
-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
-(void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
-(void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event 
```

方法（取决于您要执行的操作），并且在这些方法中：

```
 UITouch *touch = [touches anyObject];
    CGPoint location = [touch locationInView:self.view];
if (CGRectContainsPoint(touchArea.frame, location)) {

//code to execute

} 
```

实际上，我认为即使将 CGRect 作为放置在视图上的实例变量也可以工作，但以上是我实现它的方式。

# c# - 我如何安排 MDI 子级，使它们完全包含在父级中？

> ID：10592190
> 
> 赞同：0
> 
> 时间：2012-05-14T23:07:21.293
> 
> 标签：c#, .net, winforms, mdi

我需要以“矩形”形式订购窗户。这意味着当我有六个窗口时，它以 2x3 矩形排列，当我有 5 个窗口时，它以 2x3 排列，但没有最后一个窗口，当我有 9 个窗口时，它以 3x3 排列。但是我在坐标方面遇到了一些麻烦 - 子窗口超出了 mdiparent 窗口的范围。（img）

我使用的算法与我在 java 上的 mdi 应用程序中使用的算法相同

```
for(int i=0;i<a;i++)
    for(int j=0;j<b;j++)
         try{
             indfr.get(counter).setLocation(i*theDesktop.getWidth()/a,j*theDesktop.getHeight()/b);
             indfr.get(counter).setSize(theDesktop.getWidth()/a,theDesktop.getHeight()/b);
             counter++;
            }catch (IndexOutOfBoundsException exc){ break;} 
```

`indfr - arralist of JInternalFrames`和_`theDesktop - JDesktopPane`

c#中的算法

```
for (int i = 0; i < a; i++)
    for (int j = 0; j < b; j++)
            try
            {
                list[counter].SetDesktopLocation(i*list[counter].MdiParent.Width/a, j*list[counter].MdiParent.Height/b);
                list[counter].Size = new Size(list[counter].MdiParent.Width/a, list[counter].MdiParent.Height/b);
                counter++;
            }
            catch (IndexOutOfRangeException)
            {
                break;
            } 
```

在哪里列出 -`Form[] list = this.MdiChildern;`

坐标有什么问题？（PS 这不是整个算法，但它是窗口排序的主循环）

![在此处输入图像描述](../Images/f2db5707d3ebf7d7c5e4b766b52b8426.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T23:16:25.170

问题行是您的`try`块内的行：

```
list[counter].SetDesktopLocation(i*list[counter].MdiParent.Width/a, j*list[counter].MdiParent.Height/b);
list[counter].Size = new Size(list[counter].MdiParent.Width/a, list[counter].MdiParent.Height/b);
counter++; 
```

您正在检查`Form.Width`and `Form.Height`，它返回屏幕上表单的*总*大小，包括所有边框。您只能将子窗口放置在父窗体的*客户区域*内，因此您需要查询[`ClientSize`属性](http://msdn.microsoft.com/en-us/library/9278sfx2.aspx)。即定义为表单的大小，减去边框和标题栏；换句话说，可以放置孩子的表单区域。

将您的块重写`try`为此，而不是：

```
list[counter].SetDesktopLocation(i*list[counter].MdiParent.ClientSize.Width/a, j*list[counter].MdiParent.ClientSize.Height/b);
list[counter].Size = new Size(list[counter].MdiParent.ClientSize.Width/a, list[counter].MdiParent.ClientSize.Height/b);
counter++; 
```

然后摆脱那个愚蠢的空`catch`块。如果抛出异常时您*所做*`break`的只是ing，那么捕获异常是没有意义的。它将冒泡到下一个异常处理程序，必要时一直到全局处理程序。仅捕获您专门知道如何处理的异常。你不应该得到一个`IndexOutOfRangeException`，如果你得到了，那是你的代码中的一个错误——你想知道它以便你可以修复它。这意味着不要吞下异常。

* * *

![Clippy，Office 助手，现在在 Stack Overflow 上！](../Images/03d4f5b485148c763d0714ff9f60e939.png)但是，如果我可以在这里引导 Clippy，看起来您正在尝试**平铺您的 MDI 孩子**。

在这种情况下，有一种比编写一堆`for`循环并手动设置孩子的大小和位置更简单的方法。相反，只需调用父 MDI 表单上的[`Form.LayoutMdi`方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.layoutmdi.aspx)，并指定[`MdiLayout`枚举值](http://msdn.microsoft.com/en-us/library/system.windows.forms.mdilayout.aspx)之一。在这种情况下，您可能需要`MdiLayout.TileHorizontal`或`MdiLayout.TileVertical`。

WinForms 会按照您的要求自动安排您的子窗口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T23:26:02.473

您指定要为 5 个“没有最后一个窗口”的表单布局 2x3，我认为这意味着您想要一个空白空间，最后一个表单通常会出现？如果是这种情况，这对你没有帮助，但如果这对你来说不是很重要，你可以使用 Form.LayoutMDI 方法，它是 .NET Windows 窗体的标准部分：

```
LayoutMdi(MdiLayout.TileVertical); 
```

不同之处在于它不会在上述场景中留下空白空间 - 2 个窗口会显得更大以利用空白空间。无论如何尝试一下，看看它是否对你有用。

# php - PHP - 绘制为菱形的小圆圈

> ID：10592191
> 
> 赞同：1
> 
> 时间：2012-05-14T23:07:40.570
> 
> 标签：php, drawing

我有一个使用 imagefilledellipse 方法（http://php.net/manual/en/function.imagefilledellipse.php）在图像上绘制绘图点（圆圈）的应用程序。为了准确起见，这些应该是相对较小的。但是，一旦我将半径降至 6px 以下，它们就会变成菱形。这是因为根本不可能（从像素角度）画出这么小的圆圈吗？是否有任何解决方法可以使情节点看起来更圆？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T04:25:22.070

抗锯齿效果不佳。正如 deceze 所提到的，手册上的评论者在评论中提供了解决方案。

# c++ - 转型积累

> ID：10592193
> 
> 赞同：8
> 
> 时间：2012-05-14T23:07:59.197
> 
> 标签：c++, algorithm, stl, transform, accumulate

有没有人写过一个符合 C++ STL 的算法，它结合`std::transform`并`std::accumulate`成为一个支持一元、二元甚至（n 元！）变体的单通道算法，比如说`std::transformed_accumulate`？我想要这个，因为我发现这种模式在线性代数中高度可重用，例如在 (l1-) 范数计算中。l1-范数计算元素绝对值的总和。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-14T23:24:19.697

嗯...我敢打赌，您可以通过将转换嵌入到二元谓词中来做到这一点，转换元素并在转换后累积。

```
struct times2accumulator {
   int operator()( int oldvalue, int newvalue ) const {
      return oldvalue + 2*newvalue;
   }
};
int r = std::accumulate( v.begin(), v.end(), 2, times2accumulator() ); 
```

该函子相当于：

```
struct times2 {
   int operator()( int x ) {
      return 2*x;
   }
};
std::vector<int> tmp; tmp.reserve( v.size() );
std::transform( v.begin(), v.end(), std::back_inserter(tmp), times2 );
int r = std::accumulate( tmp.begin(), tmp.end(), 0 ); 
```

当然这可以是通用的，只需将转换函子传递给一个通用的基本函子：

```
template <typename Transform>
struct transform_accumulator_t {
    Transform t;
    transform_accumulator_t( Transform t ) : t(t) {}
    int operator()( int oldvalue, int newvalue ) const {
        return oldvalue + t(newvalue);
    }
};
// syntactic sugar:
template <typename T>
transform_accumulator_t<T> transform_accumulator( T t ) {
    return transform_accumulator_t<T>(t);
}
int r = std::accumulate(v.begin(), v.end(), 0, transform_accumulator(times2)); 
```

您还可以概括容器中的类型......甚至创建一个更通用的 transform_accumulator ，它同时采用累加器和转换函子并按顺序应用它们。实际的实现留给读者作为练习。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T00:23:46.657

虽然它可能不完全符合最初的意图，但`std::inner_product`基本上是你的二进制版本。您将一个初始值、两个范围和两个函子传递给它，并将它们应用为：

```
T acc = initial_value;
while (begin1 != end1) {
    acc = binary_op1(acc, binary_op2(begin1, begin2);
    ++begin1;
    ++begin2;
return acc; 
```

所以，对于你的 L1，你会按照这个一般顺序做一些事情：

```
norm = std::inner_product(input1.begin(), input1.end(), 
                          input2.begin(), input2.end(), 
                          std::plus<int>(), std::abs); 
```

只是这不太奏效——现在，它试图传递`std::abs`你真正需要一个组合两个输入的二进制函数的地方，但我不确定这两个输入应该如何组合。

`std::partial_sum`与您的一元版本相当接近，除了在累积结果的同时，它（尝试）写出每个中间结果，而不仅仅是最终结果。为了获得最终结果，您必须编写（并传递一个实例）一种只保存一个值的无操作迭代器：

```
template<class T, class Dist=size_t, class Ptr = T*, class Ref = T&>
class unique_it : public std::iterator<std::random_access_iterator_tag, T, Dist, Ptr, Ref> { 
   T &value;
public:
   unique_it(T &v) : value(v) {}
   T &operator*() { return value; }
   unique_it &operator++() { return *this; }
   unique_it &operator+(size_t) { return *this; }
   unique_it &operator++(int) { return *this; }
};

template <class T>
unique_it<T> make_res(T &v) { return unique_it<T>(v); } 
```

有了这个，你的 L1 标准化看起来像这样：

```
int main(){ 
    double result=0.0;
    double inputs[] = {1, -2, 3, -4, 5, -6};

    std::partial_sum(
        inputs, inputs+6, 
        make_res(result),
        [](double acc, double v) {return acc + std::abs(v);});

    std::cout << result << "\t";
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-09T21:40:36.823

我很惊讶没有人说如何用 Boost.Range 做到这一点：

```
accumulate(v | transformed((int(*)(int))&std::abs), 0); 
```

其中 v 是单[通范围](http://www.boost.org/doc/libs/1_55_0/libs/range/doc/html/range/concepts/single_pass_range.html)（即任何 STL 容器）。必须指定 abs 重载，否则这将与 Haskell 一样优雅。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-19T08:19:48.493

如果您想使用一些并行性，我使用 OpenMP 制作了一个快速版本：

```
template <class T, 
          class InputIterator, 
          class MapFunction, 
          class ReductionFunction>
T MapReduce_n(InputIterator in, 
              unsigned int size, 
              T baseval, 
              MapFunction mapper, 
              ReductionFunction reducer)
{
    T val = baseval;

    #pragma omp parallel
    {
        T map_val = baseval;

        #pragma omp for nowait
        for (auto i = 0U; i < size; ++i)
        {
            map_val = reducer(map_val, mapper(*(in + i)));
        }

        #pragma omp critical
        val = reducer(val, map_val);
    }

    return val;
} 
```

它很快，但肯定有优化的空间，尤其是`for (auto i = 0U; i < size; ++i)`我认为。（但我不知道如何使用 OpenMP 制作仅限迭代器的版本，任何帮助将不胜感激！）。

在对 1000000 个元素数组的快速测试中，计算迭代 1000 次以获得平均值，我进行了一些比较。

**版本 1：**

```
for (auto i = 0U; i < size; ++i)
    val += std::pow(in[i][0], 2) + std::pow(in[i][1], 2); 
```

编译时得分：

*   `g++`： 30秒
*   `g++ -O3`: 2.6 秒

**版本 2：**

我认为这个版本是最优化这个计算的。（它给出了最好的结果）。

```
#pragma omp parallel reduction( + : val )
{
    double map_val = 0.0;

    #pragma omp for
    for (int i=0; i < size; ++i)
    {
        map_val += std::pow(in[i][0], 2) + std::pow(in[i][1], 2);
    }

    val += map_val;
} 
```

*   `g++ -O3`: 0.2 秒 (这是最好的)

**版本 3**

这个版本使用了我之前展示的 MapReduce_n 函数模板：

```
double val = MapReduce_n(in, size, 0.0, [] (fftw_complex val)
    {
        return std::pow(val[0], 2.0) + std::pow(val[1], 2.0);
    }, std::plus<double>()); 
```

*   `g++ -O3`: 0.4 秒，所以不直接使用 OMP reduce 会有一点开销。然而，它不允许自定义操作符，所以在某一时刻，你（遗憾地）不得不以速度换取通用性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-11T03:06:51.440

从 C++17 开始，还有`std::transform_reduce`，它还具有可并行化的优点。

[https://en.cppreference.com/w/cpp/algorithm/transform_reduce](https://en.cppreference.com/w/cpp/algorithm/transform_reduce)

# php - 使用 PHP 创建交互式产品选择器

> ID：10592194
> 
> 赞同：3
> 
> 时间：2012-05-14T23:07:59.387
> 
> 标签：php, mysql, logic

我想做类似的事情： [http ://www.dimarzio.com/pickup-picker](http://www.dimarzio.com/pickup-picker)

我的问题涉及概念，而不是有关如何执行此操作的任何特定代码。

例如，我们正在销售小提琴，我们希望用户输入有关他们演奏风格的信息，并根据他们的输入为他们提供三把最好的小提琴。这是我得到的数据：

因此，如果用户输入 Expert、Hard、Rock 和 Dark，我将获得小提琴的数据集，包括：Cannon、Soil、Ysaye、K.Joseph、Heifetz // Cannon、Kreisler、Soil、Heifetz // Kreisler、Diable、Vieuxtemps // Cannon, Diable, Plowden

在这些中，我需要向用户输出三个最佳选择。Cannon 在 4 个中列 3 个，所以它必须是 #1。现在又有三把小提琴符合四个标准中的两个。土壤，Kriesler 和 Diable。为了将其细化为两个选择，我认为这些问题必须根据重要性进行排序。例如，音调是最重要的，其次是鞠躬风格、音乐类型和技能水平。根据该排名，程序应选择 Diable 和 Kreisler。

我不完全确定如何解决这个问题。既然这些数据不会经常变化，这是否应该涉及到数据库？信息是否应该存储在多维数组中？一旦数据在数组中，无论是否来自数据库，我应该如何编写逻辑以按重要性顺序检查数组并获取最相关的小提琴？

任何帮助深表感谢！我认为这很容易，直到我真正开始考虑它！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T00:56:57.290

对我来说，这听起来像是一个排序问题。我对小提琴一无所知，所以我无法从你的例子中吸收太多，但无论如何......

您可能熟悉数据库如何跨多个列进行排序。如果我说 order by`firstname, lastname, phone`它会比较名字，并且只有在有平局时才会比较姓氏，如果有平局，它会比较电话号码。

排序后，您选择前 N 个条目并显示。

您也可以在 php 代码中进行这样的自定义排序。例如，您希望通过以下方式订购`num occurances in a list, tone, bowing style, etc...`

这就是它的要点。我将它存储在数据库中仅仅是因为它的数据，而且在大多数情况下，它是保存它的好地方。大量的导入导出和其他数据管理、查看、编辑和其他功能免费赠品使用数据库。

如果您需要一些模仿数据库 order by 子句的示例代码，我可以挖掘一些我知道我有的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:39:46.627

我们有一家初创公司，可以解决您概述的问题。基本上，我们创建了一个支持语义的产品选择器，它引导用户通过选择过程来找到产品或解决方案。

尽管我们为不同的市场部门（不是 vioins）设计了我们的产品，但我认为这将有助于解决您描述的问题。

数据托管在 Amazon AWS 上，我们构建了一个 API，因此产品选择器可以整合到 iPhone 应用程序、Android 应用程序、网站等中。

如果您愿意，请访问我们的网站 www.productworld.com，您将在其中获得我的联系方式。

# sql - 在分配值之前添加对函数的调用

> ID：10592205
> 
> 赞同：0
> 
> 时间：2012-05-14T23:09:55.407
> 
> 标签：sql, coldfusion, ide, grep, text-editor

添加了清理功能以通过剥离某些字符来防止 SQL 注入。确实很难手动浏览所有文件并找到应该添加功能的位置。有没有办法自动化这个过程或使用查找/替换？我目前正在做的是寻找`SELECT`, `UPDATE`or `INSERT`statements 并在其中寻找`#...#`并替换它，`#sanitize(...)#`但如果表中有多个列正在更新，它可能会更复杂。

编辑：可以使用 grep 吗？如果您不知道答案，请考虑对此问题进行投票。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T23:22:27.973

sql 注入可以发生在 SELECT 调用以及任何其他 sql 调用中。不仅仅是更新和插入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T03:09:13.303

还要查看 cfqueryparam。这不仅有助于防止 SQL 注入，还可以略微提升性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T13:20:21.720

您可以在 Application.cfm 或 Application.cfc 文件中全局执行此操作。

```
<cfloop collection="#form#" item="fItem">
   <cfset form[fItem] = SanitizeFunction(form[fItem])/>
</cfloop> 
```

为 URL、CGI 和 Cookie 添加一个循环，您已经有效地检查了每个用户提供的变量。这是“Web 应用程序防火墙”背后的概念——它检查每个用户输入并清理或验证它以确保它是它声称的那样。

以超级大师 Pete Freitag 的产品[Foundeo](http://foundeo.com/)为例。他还有很多其他资源。WAF 通常会寻找其他可能的漏洞，而不仅仅是 SQLi - 因此它们值得您花时间。

正如 Scott 所说 - 您确实应该检查每个查询并添加 cfqueryparam 以进行深度防御。

# python - 使用Python重命名同一目录中的文件

> ID：10592206
> 
> 赞同：0
> 
> 时间：2012-05-14T23:09:58.680
> 
> 标签：python

所以我试图遍历一个名为的子文件夹中的文件列表，`eachjpgfile`并将文件更改为包含文件名`doc`的子文件夹`eachjpgfile`，但是当我这样做时，它会将文件添加到之前的目录中，`eachjpgfile`而不是将其保留在其中。看看下面的代码，你能明白它为什么会这样吗？我怎样才能把它保存在`eachjpgfile`目录中？

这是代码：

```
for eachjpgfile in filelist:
    os.chdir(eachjpgfile)
    newdirectorypath = os.curdir
    list_of_files = os.listdir(newdirectorypath)
    for eachfile in list_of_files:
         onlyfilename = os.path.splitext(eachfile)[0]
         if onlyfilename == 'doc':
            newjpgfilename = eachfile.replace(onlyfilename,eachjpgfile)
            os.rename(eachfile, newjpgfilename) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T23:58:40.593

试试这个：

```
import os

path = '.'
recursive = False   # do not descent into subdirs

for root,dirs,files in os.walk( path ) :
    for name in files :
        new_name = name.replace( 'aaa', 'bbb' )

        if name != new_name :
            print name, "->", new_name
            os.rename( os.path.join( root, name),
                   os.path.join( root, new_name ) )

    if not recursive :
        break 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T00:14:34.230

这里发生了很多奇怪的事情，但我认为导致您的特定问题的原因是在“eachfile.replace”中使用“eachjpgfile”。
据我所知，您传入的“每个jpgfile”是一个完整路径，因此您将文件名中的“doc”替换为“/full/path/to/eachjpgfile”，这使其与'eachjpgfile' 目录，无论您当前的工作目录如何。

您可以在替换之前添加一行来拆分路径/文件名：

```
for eachjpgfile in filelist:
    os.chdir(eachjpgfile)
    newdirectorypath = os.curdir
    list_of_files = os.listdir(newdirectorypath)
    for eachfile in list_of_files:
         onlyfilename = os.path.splitext(eachfile)[0]
         if onlyfilename == 'doc':
            root, pathName= os.path.split(eachjpgfile) #split out dir name
            newjpgfilename = eachfile.replace(onlyfilename,pathName)
            os.rename(eachfile, newjpgfilename) 
```

对于一个非常脏的脚本来说，这是一个非常脏的修复。:)

# audio - Windows SOX MP4/FFMPEG 支持

> ID：10592208
> 
> 赞同：0
> 
> 时间：2012-05-14T23:10:06.397
> 
> 标签：audio, ffmpeg, fadein, fadeout, sox

我正在尝试使用 SOX 剪切某些 mp3，将它们转换为不同的格式并为文件添加淡入淡出。

它适用于 mp3 到 mp3，但是当我尝试将其从 MP3 转换为 m4r 时，我收到错误消息：“sox FAIL 格式：文件扩展名‘m4r’没有处理程序”。

我在 Windows 中使用 SOX，所以我如何在 SOX 上安装 ffmpeg 包，以便它知道如何处理 m4r 格式？

在同一台机器上，我可以使用 ffmpeg 从 mp3 转换为 m4r 就好了。ffmpeg 不提供 FADE 音频，这很糟糕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T19:56:14.777

您可以下载并安装 ffmpeg 库 for audacity，然后将 avcodec-52.dll avformat-52.dll avutil-50.dll swscale-0.dll 复制到 sox 安装目录。因此，您可以将 sox 用作：

```
sox -t ffmpeg youFile.wma yourFile.wav 
```

# php - PHP中的foreach循环，键分配错误

> ID：10592211
> 
> 赞同：0
> 
> 时间：2012-05-14T23:10:23.570
> 
> 标签：php, foreach

好的，我承认这是一个无聊的问题，但我找不到错误。

所以我的代码：

```
$this->table = array (
          "š" => "&scaron;",
          "Š" => "&Scaron;",
          "ý" => "&yacute;",
          "Ý" => "&Yacute;",
          "á" => "&aacute;",
          "Á" => "&Aacute;",
          "í" => "&iacute;",
          "Í" => "&Iacute;",
          "ú" => "&uacute;",
          "Ú" => "&Uacute;"
        );

$this->keyword = "š Č ú";

foreach ($this->table as $key => $value) {
                echo "key: ".$key." value ".$value." ";
                $this->keyword = str_replace($key, $value, $this->keyword);
            } 
```

所以我想根据数组中的值替换 var 关键字中的特殊字符，但这不起作用。这部分脚本的输出是：

键： š 值 š 键： Š 值 Š 键： ý 值 ý ...

我究竟做错了什么？为什么值`$key` 与 相同`$value`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T23:14:41.300

使用[`htmlentities`](http://uk.php.net/manual/en/function.htmlentities.php)on `$value`，否则实体（例如`&uacute;`）将由浏览器呈现。

```
...
echo "key: ".$key." value ".htmlentities($value)." ";
... 
```

# linux - 如何为各种系统编写多个 ssh 和 scp 命令脚本

> ID：10592212
> 
> 赞同：1
> 
> 时间：2012-05-14T23:10:36.567
> 
> 标签：linux, bash, ssh, scp

我想编写一系列涉及多个 ssh 和 scp 调用的命令。每天，我发现自己手动执行此任务：

从 LOCAL 系统，ssh 到 SYSTEM1
mkdir /tmp/data on SYSTEM1
从 SYSTEM1，ssh 到 SYSTEM2
mkdir /tmp/data on SYSTEM2
从 SYSTEM2，SSH 到 SYSTEM3

scp 文件从 SYSTEM3:/data 到 SYSTEM2:/tmp/data
退出到 SYSTEM2
scp 文件从 SYSTEM2:/data 和 SYSTEM2:/tmp/data 到 SYSTEM1:/tmp/data
rm -fr SYSTEM2:/tmp/data
退出到 SYSTEM1
scp 文件从 SYSTEM1:/data 和 SYSTEM1:/tmp/data 到 LOCAL:/data
rm -fr SYSTEM1:/tmp/data

我每天至少执行一次此过程，在不同系统之间切换大约需要 5-10 分钟，然后进行清理。我真的很想在 bash 脚本中自动执行此操作，但到目前为止我的业余尝试都没有成功。您可能会怀疑，系统通信受到限制，这意味着 LOCAL 只能看到 System1，System2 只能看到 System1 和 System3，system3 只能看到 system2，等等。你明白了。做这个的最好方式是什么？此外，System1 是许多其他系统的集线器，因此 SYSTEM2 必须由用户指定（与任何 SYSTEM2 相比，System3 将始终具有相同的相对 IP/主机名）。

我尝试将命令以正确的顺序放入 shell 脚本中，然后在出现提示时手动输入密码（这已经大大提高了效率），但要么该方法不起作用，要么我的脚本执行错误. 此外，我希望脚本有一个命令行参数，该参数将采用“system2”连接到的模式、要复制的数据模式以及本地系统上数据的目标位置。

如

```
./grab_data system2 *05-14* ~/grabbed-data 
```

我进行了一些搜索，我认为下一步是在每个系统上安装脚本来执行本地任务，然后通过来自相应远程系统的 ssh 命令执行脚本。有没有更好的办法？我应该使用哪些命令？自动化这种嵌套的 ssh 和 scp 问题的一般方法是什么？

我意识到我的描述可能有点令人费解，所以请要求澄清我没有正确描述的任何领域。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T04:40:42.613

您可以通过在其他 ssh 连接上建立隧道 ssh 连接来大大简化此过程（请参阅[this previous answer](https://superuser.com/questions/262926/must-i-sftp-to-an-intermediate-server/262940#262940)）。我这样做的方法是在 LOCAL 系统上创建一个 .ssh/config 文件，其中包含以下条目：

```
Host SYSTEM3
        ProxyCommand    ssh -e none SYSTEM2 exec /usr/bin/nc %h %p 2>/dev/null
        HostName        SYSTEM3.full.domain
        User            system3user

Host SYSTEM2
        ProxyCommand    ssh -e none SYSTEM1 exec /usr/bin/nc %h %p 2>/dev/null
        HostName        SYSTEM2.full.domain
        User            system2user

Host SYSTEM1
        HostName        SYSTEM1.full.domain
        User            system1user 
```

（假设两个中间主机都将 netcat 安装为 /usr/bin/nc - 如果没有，您可能必须找到/安装一些等效的方式将 stdin&stdout 网关连接到 TCP 会话中。）

有了这个设置，您可以`scp SYSTEM3:/data /data`在 LOCAL 上使用，它会自动通过 SYSTEM1 和 SYSTEM2 隧道（并按顺序询问三个 SYSTEMn 的密码——这可能有点令人困惑，尤其是如果您输错了一个）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T00:08:11.293

如果您要连接到多个系统，特别是如果您必须通过中间主机转发连接，您将需要使用启用了 ssh-agent 转发的公钥身份验证。这样，您只需验证一次。

如果您需要做的只是检查远程命令的退出状态，那么带有代理转发的脚本 SSH 可能就足够了，但是如果您要做任何复杂的事情，您最好使用 expect 或 expect-lite 来驱动 SSH/SCP以更灵活的方式进行会话。特别是 Expect 旨在成为交互式会话的强大替代品。

如果你坚持使用 shell 脚本，并且你的文件名发生了很大变化，你总是可以像这样围绕 SSH 或 SCP 创建一个包装器：

```
# usage: my_ssh [remote_host] [command_line]
# returns: exit status of remote command, or 255 on SSH error
my_ssh () {
    local host="$1"
    shift
    ssh -A "$host" "$@"
} 
```

在 ssh-agent 和 wrapper 函数之间，您应该有一个合理的起点来进行自己的努力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T05:25:48.863

另一种方法是使用 rsync，它会自动创建任何需要的目录，如果需要，可以删除复制的源文件。

在您的情况下，您可以使用命令

```
home:~$ ssh system1
system1:~$ ssh system2
system2:~$ rsync -aPSHiv system3:/data /tmp/data
system2:~$ exit
system1:~$ rsync -aPSHiv --remove-source-files system2:/tmp/data /tmp/data
system1:~$ rsync -aPSHiv system2:/data /tmp/data
system1:~$ exit
home:~$ rsync -aPSHiv --remove-source-files system1:/tmp/data /tmp/data
home:~$ rsync -aPSHiv system1:/data /data 
```

如果将其与[Gordon 的方法](https://stackoverflow.com/a/10594218/296974)相结合，您甚至可以将其减少到

```
home:~$ rsync -aPSHiv system1:/data/ system2:/data/ system3:/data/ /data/ 
```

请注意，`rsync`和`...data`-`...data/`前者表示目录及其内容，后者只是内容。如果你把它们混在一起，你最终可能会得到`data`另一个目录中的一个目录`data`。

此外，如果您使用公共 SSH 密钥而不是密码，则可以简化事情。

# javascript - 什么是原型组合或继承？

> ID：10592213
> 
> 赞同：0
> 
> 时间：2012-05-14T23:10:42.587
> 
> 标签：javascript

原型的目的是全局创建方法和属性吗？那么这意味着所有实例都可以访问它吗？上述方法和属性不在构造函数中，这是否意味着它们不是每次创建对象时都创建的？

**原型是 TheClass 中的对象吗？**

```
TheClass.prototype.someProperty = "hello"; 
```

那么在上面的陈述中，是在原型对象内部创建属性吗？如果是这样，那么如果一个类是在原型对象中创建的，那么它如何访问该属性？

**这些是访问属性的方法**

```
var obj = new TheClass();
alert(obj.someProperty); 
```

**不是这个**

```
alert(obj.prototype.someProperty); 
```

**toString()**也在原型对象内部，您通过调用 toString 所属的对象来调用**toString( )，但是****toString()**属于原型对象，对吗？

怎么会通过调用**对象**而不是对象内部的**原型来调用它。**我熟悉 java 这称为**COMPOSITION**。

那么为什么这个工作呢？我知道它的**继承**但不是**COMPOSITION**并且我们没有编写将原型的**toString()方法****委托**给对象的语句。

 **```
alert(theClass); 
```

**不是**

```
alert(prototype); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T23:14:53.253

从特定类继承的类可以访问该类原型上的方法。这构成`prototype`了一个基于继承的构造。

> 原型的目的是全局创建方法和属性吗？

是的。Prototype 允许您提供可以从该类继承的类方法和属性的实例。

> 那么这意味着所有实例都可以访问它吗？

是的。

> 原型是 TheClass 中的对象吗？

不。原型是一组属性，从 TheClass 继承的类也被授予访问权限。如果在特定对象上找不到属性，它将在原型链中搜索该属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T23:15:05.003

使用原型链查找 JS 中的属性

[https://developer.mozilla.org/en/JavaScript/Guide/Inheritance_constructor_prototype](https://developer.mozilla.org/en/JavaScript/Guide/Inheritance_constructor_prototype)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T23:15:21.987

> 原型的目的是全局创建方法和属性吗？

*是的，您向原型添加属性和方法，以便函数的所有**实例**都可以访问相同的方法和属性。对函数原型中方法/属性的任何更改都会影响该函数的所有实例*

> 那么这意味着所有实例都可以访问它吗？

*是的。*

> 上述方法和属性不在构造函数中，这是否意味着它们不是每次创建对象时都创建的？

*是的，它们不是在每次初始化时都重新创建的——这是主要目的之一。***

# php - PHP OOP 与内联

> ID：10592214
> 
> 赞同：0
> 
> 时间：2012-05-14T23:10:46.393
> 
> 标签：php, jquery, oop

我正在拼命地朝着 OOP 方向发展，但我不知道什么时候使用它。我得到了机制，但何时使用它们只是不点击。我很好奇我目前的情况是否适合 OOP 方法。

我有 3 页。Details.php 显示两个并排的 div。一个用户可以添加注释，另一个可以查看存储在 MySQL 中的以前的注释。他们可以通过 Details.php 中的 AJAX 功能添加注释和提取注释。javascript 函数调用 add_notes.php 向数据库添加注释，并调用 load_notes.php 通过 Jquery .load() 在页面上加载注释以及提交新注释以刷新 div 时。

我是一个新手，但我觉得有更好的方法来组织这段代码。我会研究一个框架，但我已经深入到这个项目中，所以正在寻找关于如何更好地分解它的 OOP 想法或验证我正在以尽可能简化的方式进行操作。所有评论都有帮助！

详情.PHP

```
<script type="text/javascript">
$(document).ready(function(){
//When loading page load notes/messages tables and then reload when ajax is done        
$('#note_holder').load('load_notes.php?subcat=<? echo $subcat;?>'); 
    //onclick handler send message btn
    $("#notes_submit").click(function(){
        $(this).closest('form').submit(function(){
            return false;
        });
        var frm = $(this).closest('form');              
        var data = $(frm).serialize();
             if($(frm).valid()){                                
                    $.post( 
                            "../php/add_notes_ajax.php", 
                            data, 
                            function(data){                             
                                $('#note_holder').load('load_notes.php?subcat=<? echo $subcat;?>');
                            } 
                    );
             }
    });           
});
</script>  

<div style="float:left; margin-left:15px;">
    <form  name="messages1" class="form" id="myforma" method="post" action="#" enctype="multipart/form-data">
        <fieldset style="width:500px; height:400px; overflow:auto; font-size:11px;">
            <legend>Click to View Previous Notes / Messages</legend>            
            <div style="height:350px; overflow:auto;" class="note_holder" id="note_holder">
             <!--This div is being called from the ajax script to load add_notes_ajax.php-->              
            </div>           
        </fieldset>
        <div style="margin-top:20px;"></div>
    </form>    
</div>

<div style=" float:right;">
  <form  name="notes" class="notes" id="notes" method="post" action="#" enctype="multipart/form-data">
    <fieldset style="width:300px; height:400px;">
      <legend>Enter a Note</legend>
      <div style="margin-top:00px;"></div>
      <div>
     <textarea rows="20" cols="20" style="height:300px; width:290px;" name="notes"></textarea>
     <input type="submit" name="notes_submit" id="notes_submit" value="Submit Note" class="button"  />
     <input type="hidden" name="subcat" value= "<?php echo $subcat; ?>" />
      </div>
    </fieldset>
    <div style="margin-top:20px;"></div>
  </form>
</div> 
```

添加注释 AJAX.PHP

```
<?php
include_once('../bootstrap.php');
include_once('../site_globals/common_functions.php');
include_once('../site_globals/common_queries.php');
include_once('../php/gump.class.php');
page_protect();
error_reporting(0); 

$firstname = filter($_SESSION['user_name']);
$myid      = filter($_SESSION['user_id']);

// All the variables from the submission form 
$notes     = filter($_POST['notes']);
$subcat    = filter($_POST['subcat']);

//Insert Notes into the database

    $stmt = $dbh->prepare('
        INSERT INTO `notes` 
            (date  , sub_cat_id , notes) 
        VALUES 
            (:date , :subcat    , :notes )
            ');
    $stmt->bindValue('subcat',    $subcat);
    $stmt->bindValue('date',    date('Y-m-d H:i:s'));
    $stmt->bindValue('notes',    $notes);
    $stmt->execute();       

echo "This note was added successfully";
exit;

?> 
```

. 加载注释.PHP

```
<table width="100%">
  <thead style="text-align:left; ">
    <tr style="font-size:14px; font-weight:bold;"> 
      <!-- <th><input class="check-all" type="checkbox" /></th>-->
      <th>Date</th>
      <th >Contents</th>
      <th>Preview / Print</th>
    </tr>
  </thead>
  <?php while ($messages_row = mysql_fetch_object($messages_res)):?>
  <tr>
    <td><a target="_blank" href="../site_hospital_files/thread.php?question_id=<?php echo $messages_row->question_id;?>"><?php echo substr($messages_row->reply, 0, 20) . '...';?></a></td>
    <td><?php echo date('Y-m-d', strtotime($messages_row->date_added));?></td>
    <td><a href="../site_hospital_files/pdf_messages_notes.php?msg_id=<?php echo $messages_row->question_id;?>&amp;var1=<?php echo $subcat;?>">Create PDF</a></td>
  </tr>
  <?php endwhile;?>
  <?php while($notes_row = $notes_res->fetch(PDO::FETCH_ASSOC)):?>
  <tr>
    <td><?php echo $notes_row[date]; ?></td>
    <td><?php echo substr($notes_row[notes], 0, 50).'...';?></td>
    <td><a href="pdf_messages_notes.php?note_id=<?php  echo $notes_row->sub_cat_id; ?>&var1=<?php echo $subcat;?>">View</a></td>
  </tr>
  <?php endwhile;?>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T23:24:31.270

绝对是。鉴于 MySQL 和其他关系数据库的关系性质，很容易定义 PHP 对象和 mysql 表的代码表示。考虑这个过于简单的类：

```
<?php
    class Note {
        private $id
        private $text;
        private $insert_dt;
        private $update_dt;
    }
?> 
```

这允许您做的是更好地组织和重用功能，而无需重复代码或在代码库中搜寻。例如，假设我想开始以特定方式在所有页面上打印出每条笔记的插入日期。我该怎么做？我可能不得不更改网站上的每个页面。

如果我们正确定义了 setter 和 getter，这将成为一项非常简单的任务。我应该只需要在 1 个（非常明显的）位置替换格式化的返回字符串：

```
<?php
    class Note {
        // ...
        public function getFormattedInsertDate() {
            return date( "M, Y", $this->insert_dt );
        }
    }
?> 
```

诚然，这一切在小范围内似乎都非常过度且耗时。我记得当我有丰富的 OO 经验时，我在大学里为自己建立了一个个人网站。当时我正在学习 PHP，对于这个网站，我倾向于使用内联代码来提高速度。它运行良好，非常快速且轻巧。我不理解网络框架上的喧嚣，因为它们感觉过于“沉重”。

这些问题是在维护过程中事后出现的。当您在 6 个月或几年后返回代码时，您会尝试找出此调用在哪里，或者为什么您必须在 8 个地方更改它以修复错误。这些是由于代码库中的不良耦合 - 内聚引起的感觉。

幸运的是，多年来涌现出许多框架，不仅支持而且鼓励和强制执行这种行为。如果您还没有，我强烈建议您研究 CakePHP 或 Code Igniter。它们都是非常容易精益的框架，可以很好地确定这些概念，并提供出色的介绍性教程来引导您创建博客网站。

我希望这有帮助。如果我遗漏了什么，请告诉我，我会根据需要进行更新。

# crystal-reports - 水晶报表 - 组总计

> ID：10592215
> 
> 赞同：1
> 
> 时间：2012-05-14T23:10:48.220
> 
> 标签：crystal-reports

我有一份我写的报告，我了解如何创建运行总计等，但需要帮助创建自定义评估公式。

我有两个级别的组，第一组基于某个用户，下一个组基于用户参与的交易。我隐藏了细节，只对特定活动的总数感兴趣。这很好用，总计工作正常，但问题是，每个活动都有一个“行号”，它基本上可以与另一个活动相同（即：两个活动可以包含第 1、2、3 行），因此，根据一组数据进行独特的总计是不准确的，因为我只希望它根据每个单独的记录集而不是全局的不同。

示例如下...如果我对此数据集的每条记录进行计数，则结果为 18，因为每个记录上都有重复的行号...但如果我确实不同，则由于重复行而仅变为 9跨多个活动的数字。

我想我需要知道的是如何获取每个详细信息组的总数，并将它们正确地放在我的第二个页脚中。我假设它会带我编译一个包含活动编号和行号的字符串，然后比较它们？

![记录示例](../Images/caa3cbb77c1bb359dee4e735d0a3741a.png)

以下是总分组中包含的数据示例：

![数据示例](../Images/e71957e477fa89411da4fb5265642755.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:58:18.993

我自己想通了……原来这很简单。我将我的数值转换为文本，并包含一个事务 ID 和行 ID 的副本作为我的测试值，并且对此做了不同的处理......有时它只是有助于不盯着问题。

# javascript - 如何从 .POST ajax 调用中获取返回对象的类型？

> ID：10592216
> 
> 赞同：0
> 
> 时间：2012-05-14T23:10:58.797
> 
> 标签：javascript, ajax, jquery

我使用 ajax .POST 来运行假设返回 true/false 的 php 脚本。我在脚本中使用“echo”返回真/假。但是在我将结果返回给 JS 之后，我会在一个 IF 语句中比较接收到的文本，但它永远不会起作用！这是我的代码

```
 $.ajax({ url: 'admin_checkuser.php',
     data: {action: window.myId},
     type: 'post',
     success: function(output) {

if (output == "true"){ 
```

这是被调用的php脚本

```
include_once('class.MySQL.php');

$userid = $_POST['action'];

$oMySQL = new MySQL();
$query = "Select * FROM videotable WHERE uid = '$userid'";
$oMySQL->ExecuteSQL($query);
$bb = $oMySQL->iRecords;
$aa = $oMySQL->aResult;

if ($bb == 0){
    $query = "INSERT INTO videotable VALUES ('','$userid','true')";
    $oMySQL->ExecuteSQL($query);
    echo 'true';
    exit();
}else{
    $sharing = mysql_result($aa,0,"share");
    echo $sharing;
    exit();
} 
```

我通过执行“alert(output)”确保我收到 true\false，它总是显示 true\false，所以我真的不明白为什么即使 alert(output) 显示为 true，我的 IF 语句也会失败

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T23:20:08.783

根据我的经验，尝试解析 ajax 响应的类型往往是非常不可靠的。

出于这个原因，我（现在）确保每当我编写一个用于返回 ajax 数据的服务器端函数时，我都会让它完全符合我自己设置的响应“标准”，然后在ajax 方法到 JSON。

这样做可以使处理错误更加可预测。

*标准化*响应的一个示例是：

```
$ajaxResponse = array(
  'data' => $someData,
  'result' => true,
  'message' => 'your yadayada was succesful',
  'timestamp' => time()
);
print json_encode($ajaxResponse); 
```

在 ajax 中，您的响应将是：

```
success: function( response ) {
   if(response.result) {
      alert(response.message);
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T23:17:32.760

抱歉，如果这没有太大帮助，但您可以尝试：

```
$.ajax({ url: 'admin_checkuser.php',
     data: {action: window.myId},
     type: 'post',
     dataType: 'json',
     success: function(output) {

if (output) { ... } 
```

和

```
echo json_encode(true);

// echo json_encode($sharing); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T23:20:39.077

jQuery 文档提供了有关此调用返回内容的更多详细信息：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)。

> 成功（数据，文本状态，jqXHR）函数，数组
> 
> 请求成功时调用的函数。该函数获得三个参数： 从服务器返回的数据，根据 dataType 参数格式化；描述状态的字符串；和 jqXHR（在 jQuery 1.4.x 中，XMLHttpRequest）对象。从 jQuery 1.5 开始，success 设置可以接受一个函数数组。每个函数都会被依次调用。这是一个 Ajax 事件。

看起来您期望从 AJAX 调用返回的数据是`"true"`您的测试中的字符串，所以如果这没有通过，那么您一定是返回的不是这个确切的字符串。

我建议在 Firefox 中使用 Firebug 的 net 选项卡来查看 XHR 请求并检查您返回的响应，看看它是否与您期望的不同。

# ruby-on-rails - 为什么 Warden/Devise 在登录身份验证失败时附加资源名称？

> ID：10592218
> 
> 赞同：1
> 
> 时间：2012-05-14T23:11:37.387
> 
> 标签：ruby-on-rails, authentication, devise, ruby-on-rails-3.2, warden

我一直在疯狂地搜索这个，到目前为止还没有运气。

到目前为止 sign_in 和 sign_out 工作正常。他们重定向到正确的行动。我的问题是登录失败时。我被发送到一个看起来像空白的 html 页面，显示“无效的登录名或密码”。由**create 操作呈现或由 create****操作**呈现的文本。AFAIK**创建**应该只在失败时重定向或呈现。我有一个自定义控制器，我拥有此处列出的设计代码的唯一原因是查看行为发生的位置。我现在真的只需要继承行为，因为我不想在身份验证后重定向到自定义路径。

日志内容如下：

```
Started POST "/login.user" for 127.0.0.1 at 2012-05-14 15:50:02 -0700
Processing by Users::SessionsController#create as 
Parameters: {"utf8"=>"✓",   "authenticity_token"=>"Pf2+YBqmb5+231nbuD/MeDlz6H7/qOjV4N50WnlJ0rc=", "user"=>{"login"=>"qwdwqqd", "password"=>"[FILTERED]", "remember_me"=>"0"}, "x"=>"40", "y"=>"8"}
Completed 401 Unauthorized in 32ms 
```

这是我的控制器：

```
Users::SessionsController < ::Devise::SessionsController

def create
  resource = warden.authenticate!(auth_options)
  set_flash_message(:notice, :signed_in) if is_navigational_format?
  sign_in(resource_name, resource)
  respond_with resource, :location => after_sign_in_path_for(resource)
end 
```

我的路线如下：

```
devise_for :users, :controllers => {:sessions => "users/sessions", :registrations => "users/registrations"}, :path => '', :path_names => { :sign_in => 'login', :sign_out => 'logout' }
.
.
root :to => 'root#index' 
```

我确定它没有通过

```
resource = warden.authenticate!(auth_options) 
```

身份验证失败时的线路

资源名称似乎在监狱长失败时以某种方式附加到登录路径。例如 /login.user 而不是 /login

任何帮助将不胜感激，在此先感谢。

Rails 3.2、Devise 2.0.4、机架 (1.4.1)、ruby 1.9.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T16:58:53.343

以防万一其他人仍然想知道。我删除了 create_user_session 表单中的资源参数。换句话说，我从这个出发：

```
<%= form_for(resource, :as => resource_name, :url => user_session_path(resource)) do |f| %> 
```

对此：

```
<%= form_for(resource, :as => resource_name, :url => user_session_path) do |f| %> 
```

那成功了。不早点看这里，我觉得很愚蠢。

# ruby-on-rails - Rails 和 Postgres Hstore：可以在迁移中添加索引吗？

> ID：10592221
> 
> 赞同：12
> 
> 时间：2012-05-14T23:11:55.967
> 
> 标签：ruby-on-rails, postgresql, indexing, migration, hstore

我有一个迁移，我像这样创建一个产品表

```
class CreateProducts < ActiveRecord::Migration
  def change
    create_table :products do |t|
      t.string :name
      t.hstore :data

      t.timestamps
    end
  end
end 
```

在[activerecord-postgres-hstore 页面上](https://github.com/softa/activerecord-postgres-hstore)，他们向表（在 SQL 中）添加索引

```
CREATE INDEX products_gin_data ON products USING GIN(data); 
```

但是迁移不会跟踪这种变化（我猜是因为它是 Postgres 特定的？），有没有办法从迁移中创建索引？

谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-05-18T03:45:34.460

在 Rails 4 中，您现在可以在迁移中执行以下操作：

```
 add_index :products, :data, using: :gin 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-15T00:12:41.397

是的！您可以进行另一次迁移并使用“执行”方法...如下所示：

```
class IndexProductsGinData < ActiveRecord::Migration
  def up
    execute "CREATE INDEX products_gin_data ON products USING GIN(data)"
  end

  def down
    execute "DROP INDEX products_gin_data"
  end
end 
```

**更新：**您可能还想在 config/application.rb 中指定这一行：

```
config.active_record.schema_format = :sql 
```

你可以在这里阅读：http: [//apidock.com/rails/ActiveRecord/Base/schema_format/class](http://apidock.com/rails/ActiveRecord/Base/schema_format/class)

# vim - Vim 和 Quickfix - 双输出 - rails.vim 需要帮助

> ID：10592222
> 
> 赞同：1
> 
> 时间：2012-05-14T23:12:27.450
> 
> 标签：vim, terminal, zsh, rails.vim

我已经使用 Vim 2 天了——所以我是新手。我真的被这个问题困住了。

当我运行一些命令时，输出会显示两次：首先在终端中，然后在 Quickfix 窗口中（它叫那个吗？）。

例如：我输入':make'。看起来 Vim 关闭了。然后列出了一些输出。我按了“输入”。输出再次在 Quickfix 窗口中列出。我再次按下“Enter”。

对于 rails.vim，我输入 ':Rgenerate model person name'。看起来 Vim 关闭了。然后列出了一些输出。我按了“输入”。我又回到了 Vim。当然，我希望 Vim 在 Quickfix 窗口中列出输出。

':ls' 之类的命令工作得很好——它在 Quickfix 窗口中列出了输出。

我已经制作了这个问题的视频并将其发布在 YouTube 上：http: [//youtu.be/KvmulO4L4hc](http://youtu.be/KvmulO4L4hc)

关于我的设置：

*   我正在使用 Mac OS X 10.7 (Lion)
*   我没有使用 MacVim
*   我已经使用 Homebrew 安装了 Vim（使用[https://raw.github.com/Homebrew/homebrew-dupes/master/vim.rb](https://raw.github.com/Homebrew/homebrew-dupes/master/vim.rb)）
*   我正在使用 Zsh（带有 oh-my-zsh）
*   我正在使用 Pathogen.vim 安装我的插件（我只安装了 rails.vim 和 NERDTree）

我的 ~/.vimrc 文件如下所示：

```
" pathogen.vim
call pathogen#infect()

" Settings
set shell=/bin/sh
set expandtab shiftwidth=2 softtabstop=2 tabstop=2
set autoindent
set number numberwidth=5
set backspace=start,eol,indent
set noswapfile

" Colors
colorscheme railscasts
syntax on

" Remove all trailing whitespace on save
autocmd BufWritePre * :%s/\s\+$//e

" Unmap arrow keys
nnoremap <Left> :echoe "Use h"<CR>
nnoremap <Right> :echoe "Use l"<CR>
nnoremap <Up> :echoe "Use k"<CR>
nnoremap <Down> :echoe "Use j"<CR> 
```

我的 ~/.zshrc 文件如下所示：

```
# Path to your oh-my-zsh configuration.
ZSH=$HOME/.oh-my-zsh

# Set name of the theme to load.
# Look in ~/.oh-my-zsh/themes/
# Optionally, if you set this to "random", it'll load a random theme each
# time that oh-my-zsh is loaded.
ZSH_THEME="highcode"

# Example aliases
# alias zshconfig="mate ~/.zshrc"
# alias ohmyzsh="mate ~/.oh-my-zsh"

# Set to this to use case-sensitive completion
# CASE_SENSITIVE="true"

# Comment this out to disable weekly auto-update checks
# DISABLE_AUTO_UPDATE="true"

# Uncomment following line if you want to disable colors in ls
# DISABLE_LS_COLORS="true"

# Uncomment following line if you want to disable autosetting terminal title.
# DISABLE_AUTO_TITLE="true"

# Uncomment following line if you want red dots to be displayed while waiting for completion
# COMPLETION_WAITING_DOTS="true"

# Which plugins would you like to load? (plugins can be found in ~/.oh-my-zsh/plugins/*)
# Custom plugins may be added to ~/.oh-my-zsh/custom/plugins/
# Example format: plugins=(rails git textmate ruby lighthouse)
plugins=(git)

source $ZSH/oh-my-zsh.sh

# Homebrew
export PATH="/usr/local/bin:$PATH"

# rbenv
eval "$(rbenv init -)" 
```

我希望你能帮帮我！

干杯! :-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-14T18:14:35.393

请参阅上面 romainl 的[评论：](https://stackoverflow.com/questions/10592222/vim-and-quickfix-double-output-rails-vim-help-needed#comment13726697_10592222)

> 这不是快速修复窗口：只有命令行扩展以显示外部命令的输出。使用 :copen （实际上包含 make 的输出）打开 quickfix 窗口。在您的链接中，他似乎使用的是 GVim，而不是 CLI Vim，因此行为有所不同。

# ruby - 从Ruby中的String对象获取括号之间的内容

> ID：10592223
> 
> 赞同：17
> 
> 时间：2012-05-14T23:12:37.317
> 
> 标签：ruby, regex, string

我有一个这样的字符串：

`Hi my name is John (aka Johnator)`.

获取括号（包括括号）之间的内容的最佳方法是什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-14T23:18:18.157

您可以将[String#[]](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-5B-5D)与正则表达式一起使用：

```
a = "Hi my name is John (aka Johnator)"
a[/\(.*?\)/]
# => "(aka Johnator)" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T11:23:22.523

用于`[^()]*?`选择括号中的文本：

```
a = "Hi (a(b)c) ((d)"
# => "Hi (a(b)c) ((d)"
a.gsub(/\([^()]*?\)/) { |x| p x[1..-2]; "w"}
"b"
"d"
# => "Hi (awc) (w" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T23:48:54.873

试试这个：

```
str1 = ""
text = "Hi my name is John (aka Johnator)"

text.sub(/(\(.*?\))/) { str1 = $1 }

puts str1 
```

编辑：没有读到离开括号！

# mysql - MySQL按不使用列排序

> ID：10592224
> 
> 赞同：1
> 
> 时间：2012-05-14T23:12:43.900
> 
> 标签：mysql, sql-order-by

我在下面有一个查询，它是按`'ProgramName'`使用排序的`lp.name`排序。最高值`'Science - IN'`之后是`'Science - FL'`，但不`'Science - FL'`应该高于另一个？我需要做一些特别的事情吗？

```
SELECT 
    lp.name AS 'program_name'
FROM customer_order co
JOIN customer c on co.customer_id = c.id
JOIN license_program lp ON co.license_program_id = lp.id
ORDER BY 
    CASE lower(sort_direction) WHEN 'asc' THEN
        CASE lower(sort_order)
            WHEN 'programname' THEN lower(lp.name)
            ELSE (entry_date)
        END
    END ASC,
    CASE lower(sort_direction) WHEN 'desc' THEN
        CASE lower(sort_order)
            WHEN 'programname' THEN lower(lp.name)
            ELSE (entry_date)
        END
    END DESC
LIMIT start_page, page_size; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T23:39:26.520

正如波西米亚所说，你不能像这样动态排序。它目前正在编写，您基本上是在告诉数据库先按升序排序，然后再添加次要降序排序。您需要将动态排序逻辑编码到查询或表中，并按顺序引用。

# android - SQLite Android 查询不返回带有 where 的结果

> ID：10592226
> 
> 赞同：0
> 
> 时间：2012-05-14T23:13:22.797
> 
> 标签：android, sqlite

我有一个问题，当我使用 WHERE 子句执行查询时，它不会返回任何结果，但如果我将 WHERE 保留为 null，它将执行我的所有记录并找到匹配项。谁能告诉我我的查询有什么问题？

在我的代码中可以说contactURI等于“content://com.android.contacts/contacts/lookup/953i7d73a639091bc5b6/164”并且contactUriId等于“164”

```
 // Put data in the contactURI
                contactURI = data.getData();

                // get the contact id from the URI
                contactUriId = contactURI.getLastPathSegment();

                //TEST TODO Fix URI Issue
                String [] PROJECTION = new String [] {  Data.CONTACT_ID, Data.LOOKUP_KEY };

                Cursor cursor = this.managedQuery(Data.CONTENT_URI, PROJECTION, Data.CONTACT_ID + "=?" + " AND "
                        + Data.MIMETYPE + "='*'",
                new String[] { String.valueOf(contactUriId) }, null);

                Log.e(DEBUG_TAG, contactUriId+"-164-");
                for(cursor.moveToFirst(); cursor.moveToNext(); cursor.isAfterLast()) {
                     Log.v(DEBUG_TAG, "lookupKey for contact: " + cursor.getString(1) + " is: -" + cursor.getString(0) + "-");
                     if(cursor.getString(0).equals("164")){
                         Log.e(DEBUG_TAG, "WE HAVE A MATCH");
                     }
                } 
```

这是我的日志...

```
05-14 19:08:40.764: D/OpenGLRenderer(21559): Flushing caches (mode 0)
05-14 19:08:46.944: E/MyDebug(22269): 164-164- 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T23:19:35.830

问题在于：

```
Data.MIMETYPE + "='*'" 
```

那就是搜索`MIMETYPE`字面上命名的 s `*`。如果你想选择所有`MIMETYPE`的s，不要做任何事情。默认情况下，查询会返回所有这些行。

**此外，**这个循环似乎可以执行，但并不完全正确：

```
for(cursor.moveToFirst(); cursor.moveToNext(); cursor.isAfterLast()) { 
```

因为`cursor` **没有**从索引-1 移动。这将安全地从头开始并迭代到最后一行：

```
while(cursor.moveToNext()) { 
```

如果您**已经**搬家`cursor`并想从头开始，您可以使用：

```
for(cursor.moveToFirst(); cursor.moveToNext(); ) { 
```

**详细解释为什么：** `cursor.isAfterLast()`不移动光标，它只是检查光标是否仍在引用有效数据。`cursor.moveToNext()`将光标移动到下一行**，**`true`如果光标仍在边界内则返回。（换句话说，如果`cursor.isAfterLast()`是`true`则`cursor.moveToNext()`返回`false`。）

# c++ - 如何在 Qt 中使用 .NET Framework 中的 System 命名空间？

> ID：10592232
> 
> 赞同：0
> 
> 时间：2012-05-14T23:13:59.493
> 
> 标签：c++, .net, qt, serial-port

具体来说，我正在尝试使用[System.IO.Ports](http://msdn.microsoft.com/en-us/library/system.io.ports.aspx)类来控制串行端口。我不确定这是否有任何用处：http: [//qt-project.org/doc/qt-4.8/activeqt-dotnet.html](http://qt-project.org/doc/qt-4.8/activeqt-dotnet.html)

我在这里有点迷路，任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T00:46:25.423

[MSDN](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.aspx)有一个很好的使用 SerialPort 类的例子。试试这个样本。我相信这会让你走上正轨。

# c++ - 统一调节程序执行率 [Windows C++]

> ID：10592233
> 
> 赞同：2
> 
> 时间：2012-05-14T23:13:59.747
> 
> 标签：c++, windows, sleep

首先，我发现了很多关于这个主题的信息，但不幸的是没有解决这个问题的解决方案。

我只是想调节我的 C++ 程序以每秒 60 次迭代运行。我已经尝试了从 GetClockTicks() 到 GetLocalTime() 的所有方法来帮助调节，但每次我在 Windows Server 2008 机器上运行程序时，它的运行速度都比在本地机器上慢，我不知道为什么！

我知道基于“时钟”的函数调用会返回执行时花费的 CPU 时间，所以我去了 GetLocalTime，然后尝试区分开始时间和停止时间，然后调用 Sleep((FPS / 1000) - millisecondExecutionTime)

我的本地机器比服务器 CPU 快得多，所以很明显，我的想法是它正在关闭 CPU 滴答声，但这并不能解释为什么 GetLocalTime 不起作用。我一直基于[http://www.lazyfoo.net/SDL_tutorials/lesson14/index.php](http://www.lazyfoo.net/SDL_tutorials/lesson14/index.php)更改 get_ticks() 并始终返回我可以在网络上找到的函数的这种方法。

例如采取以下代码：

```
#include <Windows.h>
#include <time.h>
#include <string>
#include <iostream>

using namespace std;

int main() {
    int tFps = 60;
    int counter = 0;

    SYSTEMTIME gStart, gEnd, start_time, end_time;

    GetLocalTime( &gStart );

    bool done = false;
    while(!done) {
        GetLocalTime( &start_time );

        Sleep(10);
        counter++;

        GetLocalTime( &end_time );

        int startTimeMilli = (start_time.wSecond * 1000 + start_time.wMilliseconds);
        int endTimeMilli = (end_time.wSecond * 1000 + end_time.wMilliseconds);

        int time_to_sleep = (1000 / tFps) - (endTimeMilli - startTimeMilli);

        if (counter > 240)
            done = true;

        if (time_to_sleep > 0)
            Sleep(time_to_sleep);
    }

    GetLocalTime( &gEnd );

    cout << "Total Time: " << (gEnd.wSecond*1000 + gEnd.wMilliseconds) - (gStart.wSecond*1000 + gStart.wMilliseconds) << endl;
    cin.get();
} 
```

对于此代码片段，在我的计算机 (3.06 GHz) 上运行，总时间 (ms) 为 3856，而在我的服务器 (2.53 GHz) 上，我得到 6256。因此它可能是处理器的速度，尽管比率为 2.53 /3.06 仅为 0.826797386，而 3856/6271 为 0.614893956。

我不知道睡眠功能是否正在做一些与预期完全不同的事情，尽管我不明白为什么会这样做，或者它是否是我获取时间的方法（即使它应该是世界时间（毫秒）而不是时钟周期时间。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T23:22:21.650

一方面，睡眠的默认分辨率是计算机的配额长度——通常是 10 毫秒或 15 毫秒，具体取决于 Windows 版本。例如，要获得 1 毫秒的分辨率，您必须发出 timeBeginPeriod(1)，它将定时器硬件重新编程为（大约）每毫秒触发一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:19:53.693

在你的主循环中，你可以

```
int main() 
{
    // Timers
    LONGLONG curTime = NULL;
    LONGLONG nextTime = NULL;

    Timers::GameClock::GetInstance()->GetTime(&nextTime);
    while (true) {    
        Timers::GameClock::GetInstance()->GetTime(&curTime);
        if ( curTime > nextTime  && loops <= MAX_FRAMESKIP ) { 
            nextTime += Timers::GameClock::GetInstance()->timeCount;

            // Business logic goes here and occurr based on the specified framerate
        }
    }
} 
```

使用这个时间库

```
include "stdafx.h"

LONGLONG cacheTime;

Timers::SWGameClock* Timers::SWGameClock::pInstance = NULL;

Timers::SWGameClock* Timers::SWGameClock::GetInstance ( ) { 
    if (pInstance == NULL) { 
        pInstance = new SWGameClock();
    }
    return pInstance;
}

Timers::SWGameClock::SWGameClock(void) {
    this->Initialize ( );
}

void Timers::SWGameClock::GetTime ( LONGLONG * t ) { 
    // Use timeGetTime() if queryperformancecounter is not supported 
    if (!QueryPerformanceCounter( (LARGE_INTEGER *) t)) { 
        *t = timeGetTime();
    }

    cacheTime = *t;
}

LONGLONG Timers::SWGameClock::GetTimeElapsed ( void ) { 
    LONGLONG t; 

    // Use timeGetTime() if queryperformancecounter is not supported
    if (!QueryPerformanceCounter( (LARGE_INTEGER *) &t )) { 
        t = timeGetTime();
    }

    return (t - cacheTime);
}

void Timers::SWGameClock::Initialize ( void ) { 
    if ( !QueryPerformanceFrequency((LARGE_INTEGER *) &this->frequency) ) { 
        this->frequency = 1000; // 1000ms to one second 
    }
    this->timeCount = DWORD(this->frequency / TICKS_PER_SECOND);
}

Timers::SWGameClock::~SWGameClock(void)
{
} 
```

带有一个包含以下内容的头文件：

```
// Required for rendering stuff on time
#pragma once
#define TICKS_PER_SECOND 60
#define MAX_FRAMESKIP 5

namespace Timers { 
    class SWGameClock
    {
    public:
        static SWGameClock* GetInstance();
        void Initialize ( void );
        DWORD timeCount;

        void GetTime ( LONGLONG* t );
        LONGLONG GetTimeElapsed ( void );
        LONGLONG frequency; 

        ~SWGameClock(void);
    protected:
        SWGameClock(void);

    private:
        static SWGameClock* pInstance;
    }; // SWGameClock
} // Timers 
```

这将确保您的代码以 60FPS（或您输入的任何内容）运行，尽管您可能会转储 MAX_FRAMESKIP，因为这在本示例中并未真正实现！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T01:20:18.657

您可以尝试一个`WinMain`函数并使用该`SetTimer`函数和一个常规消息循环（您也可以利用 的过滤器机制`GetMessage( ... )`），您可以在其中使用请求的时间测试`WM_TIMER`消息，并且当您的计数器达到限制时执行`PostQuitMessage(0)`终止消息环形。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T18:36:04.473

基于每帧渲染之间经过的时间渲染（迭代）呢？考虑创建一个`void render(double timePassed)`函数并根据`timePassed`参数进行渲染，而不是让程序进入睡眠状态。

例如，想象一下，您想要渲染一个球落下或弹跳。你会知道它是你需要的速度、加速度和所有其他物理。根据`timePassed`和所有其他物理参数（速度、加速度等）计算球的位置。

`render()`或者，如果您愿意，如果传递的时间值很小，您可以跳过函数执行，而不是让程序进入睡眠状态。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T18:21:15.090

对于如此快的占空比，您可以使用高精度计时器（如 QueryPerformanceTimer）和忙等待循环。

如果你有一个低得多的占空比，但仍然需要精度，那么你可以休眠一部分时间，然后用忙等待循环消耗剩余的时间。

另一种选择是使用 DirectX 之类的东西将自己同步到 VSync 中断（几乎总是 60 Hz）。如果您正在编写游戏或 a/v 演示文稿，这可能很有意义。

Windows 不是实时操作系统，因此永远不会有完美的方法来执行此类操作，因为无法保证您的线程将被安排在您需要的时候准确运行。

请注意，在[Sleep](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686298%28v=vs.85%29.aspx)的注释中，实际时间量将至少比您在线程计划再次运行之前请求的延迟长一个“滴答”，并且可能长一整个“滴答”（然后我们必须假设线程已安排）。根据硬件和 Windows 版本的不同，“tick”可能会有很大差异。它通常在 10-15 毫秒的范围内，我看到它和 19 毫秒一样糟糕。对于 60 Hz，每次迭代需要 16.666 ms，因此这显然不够精确，无法满足您的需求。

# java - 如何使用读写锁

> ID：10592234
> 
> 赞同：0
> 
> 时间：2012-05-14T23:14:28.577
> 
> 标签：java, concurrency, locking

我有一个存储大量对象的缓冲池。为了防止不同的线程写入同一个对象，同时为了提高效率，我使用`ReadWriteLock`. 但我不太确定它是如何工作的。找到我要访问的对象后，

```
if(perm.equals(Permissions.READ_ONLY)) {                    
  readLock.lock();
} else if(Permissions.READ_WRITE) {                 
  writeLock.lock(); 
}
return the object I want to access 
```

系统如何知道程序试图访问和锁定哪个对象？或者我这里的语法是错误的？帮助！！！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T00:08:06.643

系统不知道您要锁定什么。如果您想为一系列项目使用锁定对象，则必须为每个项目设置一个锁，或者为整个对象集使用一个锁（这可能是一个很大的瓶颈）。这是一个使用单个锁来同步访问的示例。

```
// You'll need to create this somewhere else, in your constructor
// or some other routine that gets called once.
ReentrantLock lock = new ReentrantLock(); 

// Then when you want to access:
lock.lock();
try {
 ... // do stuff with the data
}
finally {
  lock.unlock();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T23:29:08.647

我儿子不知道java中有任何WriteReadLock，所以我假设你在谈论ReadWriteLock，首先ReadWriteLock只是一个接口。您需要在某处声明像 ReentrantReadWriteLock 这样的实现。正是这个实例维护了非独占读锁和独占写锁。

锁定实例是运行时获取监视器的对象。看看它的实现，它只是在常规旧`wait()`的`notify()`, 和`notifyall()`. 您调用以获取锁实例。`lock()`当你开始和完成时你打电话`unlock()`。

除此之外，最好的做法是在 try-catch-finally 和 finally 中使用锁，`unlock`以确保无论如何它都会被解锁。

# javascript - 如何删除 IE7 的 javascript 函数

> ID：10592237
> 
> 赞同：1
> 
> 时间：2012-05-14T23:14:45.247
> 
> 标签：javascript, jquery, joomla, internet-explorer-7

我有一个菜单系统，可以在除 IE7 之外的所有主浏览器中完美运行，动画效果有效但定位关闭，认为它与数学以及 IE7 如何处理边距/填充等有关。

我已经为 IE7 设置了一个“静态”菜单，我想将它换成 javascript 菜单。

这是我的菜单代码：

```
<div id="topmenu">
    <jdoc:include type="modules" name="top" />
    <div id="ie-cont">
    <script type="text/javascript" src="/templates/beez5/javascript/script.js">       </script>
    <div id="slide"></div>      
    </div>
  </div>
  <!-- IE7 static menu -->
  <!--[if IE 7]>
<script type='text/javascript'>
$('#ie-cont').remove();
</script>
  <div id="highlight"></div>
    <?php  
switch ($parentmenu) {
case 101 : echo "<script type='text/javascript'>document.getElementById('highlight').className = 'home';</script>";
break;
case 103 : echo "<script type='text/javascript'>document.getElementById('highlight').className = 'about';</script>";
break;
case 106 :
case 165 :
case 166 :
case 167 :
case 168 : 
echo "<script type='text/javascript'>document.getElementById('highlight').className = 'services';</script>";
break;
case 161 : echo "<script type='text/javascript'>document.getElementById('highlight').className = 'test';</script>";
break;
case 104 :
case 102 : 
echo "<script type='text/javascript'>document.getElementById('highlight').className = 'contact';</script>";
}
?>  
<![endif]--> 
```

我可以删除 #slide div 或附加它，但 javascript 文件在寻找 #slide div 时不断出现错误，但甚至将其移动到带有 #slide div 的 div 中并删除它似乎不起作用。关于当访问者在 IE7 中查看时如何卸载 javascript 文件的任何建议（我知道不会有太多关于但合同上我必须支持它的建议！）

我在下面添加了 javascript 代码：

```
var menuSlider=function(){
var m,e,g,s,q,i; e=[]; q=8; i=8;
return{
    init:function(j,k){
        m=document.getElementById(j); e=m.getElementsByTagName('li');
        var i,l,w,p; i=0; l=e.length;
        for(i;i<l;i++){
            var c,v; c=e[i]; v=c.value; if(v==1){s=c; w=c.offsetWidth; p=c.offsetLeft}
            c.onmouseover=function(){menuSlider.mo(this)}; c.onmouseout=function(){menuSlider.mo(s)};
        }
        g=document.getElementById(k); g.style.width=w+'px'; g.style.left=p+'px';
    },
    mo:function(d){
        clearInterval(m.tm);
        var el,ew; el=parseInt(d.offsetLeft); ew=parseInt(d.offsetWidth);
        m.tm=setInterval(function(){menuSlider.mv(el,ew)},i);
    },
    mv:function(el,ew){
        var l,w; l=parseInt(g.offsetLeft); w=parseInt(g.offsetWidth);
        if(l!=el||w!=ew){
            if(l!=el){var ld,lr,li; ld=(l>el)?-1:1; lr=Math.abs(el-l);     li=(lr<q)?ld*lr:ld*q; g.style.left=(l+li)+'px'}
            if(w!=ew){var wd,wr,wi; wd=(w>ew)?-1:1; wr=Math.abs(ew-w);     wi=(wr<q)?wd*wr:wd*q; g.style.width=(w+wi)+'px'}
        }else{clearInterval(m.tm)}
}};}(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T23:23:27.543

如果您的 script.js 引用了#slide，它将出错。您没有显示 script.js 的内容，因此很难说...如果您在 $(document).ready(function(){...}) 或 $(function(){ 中进行了初始化。 ..}) 应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T01:06:56.823

有条件的评论是要走的路。确保您的菜单初始化也落在条件注释的正确一侧。

# facebook - 评论插件查询

> ID：10592246
> 
> 赞同：0
> 
> 时间：2012-05-14T23:15:40.517
> 
> 标签：facebook, web, facebook-fql, facebook-social-plugins, facebook-comments

我正在开发一个连接到 Facebook 的网站。该网站使用评论社交插件来允许用户评论网站每个页面的内容。现在我正在寻找一种方法来查询评论最多的页面，但是查看 FQL 文档我没有找到任何计数记录的方法，也没有从我的网站获得最受欢迎的 url。

如果有人有一些线索来完成这项任务，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T23:38:13.430

两种选择

**选项1**

FQL 评论表：http: [//developers.facebook.com/docs/reference/fql/comment/](http://developers.facebook.com/docs/reference/fql/comment/)

```
SELECT post_fbid, fromid, object_id, text, time \
FROM comment \
WHERE object_id IN \
  (SELECT comments_fbid \
   FROM link_stat \
   WHERE url ='http://developers.facebook.com/docs/reference/fql/comment/') 
```

要一次处理多个 URL，您可以运行 FQL 多查询。

**选项 2**

另一种选择是保持数据库中评论数量的运行计数。评论插件允许您捕捉某人发表评论的时间。然后，您可以在数据库中为该 url 增加一个计数器。

来自：[https ://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/)

> **我怎么知道有人在我的网站上发表评论？**
> 
> 您可以通过 FB.Event.subscribe 订阅 'comment.create' 和 'comment.remove' 事件。

# php - simplexml 对象是否有类似“array_search”的函数

> ID：10592247
> 
> 赞同：0
> 
> 时间：2012-05-14T23:15:41.723
> 
> 标签：php, codeigniter, simplexml

我有一个 codeigniter 应用程序，它查询一个 api 并获取一个 simplexml 对象。我从 simplexml 对象中硬编码了我想要的值，但后来发现对象的结构并不总是相同的，所以我不能使用强制转换来获得我需要的值。

是否有一个类似 array_search 的函数可以用于此，所以我可以使用“classid”来获取值？以下是 simplexml 对象的示例：

```
 [Package] => SimpleXMLElement Object
    (
        [@attributes] => Array
            (
                [ID] => e981b9a72cd305c7d97cc530ef9b3015
            )

        [Postage] => Array
            (
                [0] => SimpleXMLElement Object
                    (
                        [@attributes] => Array
                            (
                                [CLASSID] => 3
                            )

                        [MailService] => Express Mail<sup>&reg;</sup>
                        [Rate] => 57.60
                    )

                [1] => SimpleXMLElement Object
                    (
                        [@attributes] => Array
                            (
                                [CLASSID] => 2
                            )

                        [MailService] => Express Mail<sup>&reg;</sup> Hold For Pickup
                        [Rate] => 57.60
                    )

                [2] => SimpleXMLElement Object
                    (
                        [@attributes] => Array
                            (
                                [CLASSID] => 55
                            )

                        [MailService] => Express Mail<sup>&reg;</sup> Flat Rate Boxes
                        [Rate] => 39.95
                    ) 
```

我正在使用它来获取 [Rate] 值：

```
$usps->Package->Postage[0]->Rate 
```

问题是我需要使用 [CLASSID] 因为这与数字键（？）中的数据发生变化的地方是一致的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T23:29:05.183

这应该可以，但是如果没有原始 XML，我无法对其进行测试：

```
$rates = array();

foreach ($usps->Package->Postage as $postage)
    $rates[$postage->attributes()->CLASSID] = $postage->Rate; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T00:11:51.683

使用[XPath](http://us3.php.net/manual/en/simplexmlelement.xpath.php)

您不仅可以搜索特定元素，还可以使用各种轴进行各种疯狂搜索。

# java - KeyListeners 还是 KeyBindings？

> ID：10592256
> 
> 赞同：2
> 
> 时间：2012-05-14T23:16:43.770
> 
> 标签：java, swing, key-bindings, keylistener

> **可能重复：**
> [KeyListeners vs Keybindings？](https://stackoverflow.com/questions/10035980/keylisteners-vs-keybindings)

我有一个 java 程序，我可以使用 asdw 键和箭头键移动椭圆。

在这个例子中我应该使用 keyListener 还是应该使用 keyBindings？为什么？

（我应该使用 keyListener 来捕获所有八个键还是使用八个单独的 keyBindings？）

# java - SwingUtilities.invokeLater 在 AWT 事件调度线程中

> ID：10592284
> 
> 赞同：6
> 
> 时间：2012-05-14T23:20:29.113
> 
> 标签：java, swing, thread-safety

`SwingUtilities.invokeLater(Runnable)`如果您正在修改 GUI 并且您在 AWT 事件调度线程中，您是否应该使用`ActionListener`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T23:25:02.253

您必须始终在事件调度线程 (EDT) 中进行 GUI 更新。然而，正如 Jeffrey 在评论中指出的那样，`ActionListener.actionPerformed`Swing 对象上的方法*已经*从 EDT 调用。

如果您只是想让`JButton`看起来启用/未启用或从 中添加/删除项目`JList`，并且您通过 Swing 组件上的 进行这些更改`ActionListener`，那么您不必`SwingUtilities.invokeLater`显式调用。

# iphone - 在 AFNetworking 中取消批处理请求

> ID：10592289
> 
> 赞同：1
> 
> 时间：2012-05-14T23:21:27.053
> 
> 标签：iphone, objective-c, ios, ipad, afnetworking

所以我有一个批处理请求，它是以下代码：

```
[[AHClient sharedClient] enqueueBatchOfHTTPRequestOperationsWithRequests:requestArray progressBlock:^(NSUInteger numberOfCompletedOperations, NSUInteger totalNumberOfOperations) {

    } completionBlock:^(NSArray * operations){

        dispatch_async(dispatch_get_main_queue(), ^(void){
           //update the UI
        });
    }]; 
```

我尝试通过将 url 的路径保存在数组中来取消请求并执行以下操作：

```
for (NSString * urlPath in self.currentRequestArray_){
        [[AHClient sharedClient] cancelAllHTTPOperationsWithMethod:@"GET" path:urlPath];
    } 
```

但似乎它仍然进入完成的块，即：更新 UI。想法或建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T03:56:11.953

在批处理完成块中，检查组件操作是否未被取消，并且仅在其中任何一个成功完成时才执行操作。

```
    完成块：^（NSArray * 操作）{
      if ([[操作过滤数组UsingPredicate:[NSPredicate predicateWithFormat:@"isCancelled == NO"]] count] > 0) {
        dispatch_async(dispatch_get_main_queue(), ^(void){
           //更新用户界面
        });
      }
    }

```

# ruby-on-rails - 在 OSX 上安装 Ruby 1.9.2 时遇到问题 - Readline 和 Make 错误

> ID：10592291
> 
> 赞同：1
> 
> 时间：2012-05-14T23:21:33.800
> 
> 标签：ruby-on-rails, ruby, error-handling, makefile, installation

我不断收到这些错误：

运行“make”时出错，请阅读 /Users/jason* **/.rvm/log/ruby-1.9.2-p320/make.log 运行 make 时出错。停止安装。ls: /Users/jason*** /.rvm/rubies/*/bin/ruby: 没有那个文件或目录

我已经尝试安装 readline 并确保我拥有最新的 GCC 版本。这是错误日志。

```
/usr/bin/gcc-4.2 -dynamic -bundle -o ../../../.ext/x86_64-darwin11.3.0/racc/cparse.bundle cparse.o -L. -L../../.. -L/Users/jasonvdm/.rvm/usr/lib -L. -L/usr/local/lib -Wl,-undefined,dynamic_lookup -Wl,-multiply_defined,suppress -Wl,-flat_namespace  -lruby.1.9.1  -lpthread -ldl -lobjc 
compiling readline
/usr/bin/gcc-4.2 -I. -I../../.ext/include/x86_64-darwin11.3.0 -I../.././include -I../.././ext/readline -DRUBY_EXTCONF_H=\"extconf.h\" -I/Users/jasonvdm/.rvm/usr/include -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -fno-common -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wshorten-64-to-32 -Wno-long-long  -fno-common -pipe  -o readline.o -c readline.c
readline.c: In function ‘username_completion_proc_call’:
readline.c:1386: error: ‘username_completion_function’ undeclared (first use in this function)
readline.c:1386: error: (Each undeclared identifier is reported only once
readline.c:1386: error: for each function it appears in.)
make[1]: *** [readline.o] Error 1
make: *** [mkmain.sh] Error 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T23:25:10.220

你是从源代码编译 Readline 吗？假设您的系统上至少有一个工作版本的 Ruby，通过[**Homebrew编译和安装 Readline 可能会不那么痛苦。**](https://brew.sh/)

完成后，您可以再次尝试安装 Ruby 1.9.2 的 RVM，它应该会跳过 Readline 编译步骤。

**更新以回应评论：**

所以你*使用*的是 Homebrew 安装的 Readline。在这种情况下，找出新的（较少损坏的）Readline 库的安装位置，并尝试*将该*版本的 Readline 的位置传递给 RVM 安装过程。就像是：

> rvm install ruby​​-1.9.2-p320 -C --with-readline-dir=/usr/local/Cellar/readline/6.2.1

显然，您的目录将与我的示例中的目录略有不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T00:04:21.797

如果您使用的是 RVM，请阅读[此问答](https://stackoverflow.com/questions/9651670/issue-updating-ruby-on-mac-with-xcode-4-3-1/9651747#9651747)中的过程。

您最好使用`rvm pkg`命令安装 readline 库。

# c++ - sqlite via c++，打开多个sqlite文件

> ID：10592292
> 
> 赞同：2
> 
> 时间：2012-05-14T23:21:38.887
> 
> 标签：c++, c, sqlite

如何在 C/C++ 中将多个 sqlite 文件连接到一个 sqlite3* 句柄中？我认为有可能考虑到有一个名为 ATTACH 的命令，但不知道如何在 C++ 中这样做。提前致谢。

回答（感谢罗伯特）

```
sqlite3_exec(db, "ATTACH 'C:/tmp/tmp.sqlite' as mytmp"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T23:25:00.240

执行`ATTACH DATABASE`SQL 命令：

```
ATTACH path_to_database AS database-name 
```

然后，您可以将附加数据库中的表称为：

```
database-name.table-name 
```

[http://www.sqlite.org/lang_attach.html](http://www.sqlite.org/lang_attach.html)

# linux - 路由器上的 NodeJs 通过 DD-WRT 还是 OpenWRT？

> ID：10592294
> 
> 赞同：5
> 
> 时间：2012-05-14T23:21:50.883
> 
> 标签：linux, node.js, openwrt, dd-wrt

认识任何人，我如何在 dd-wrt、openwrt 或 freewrt 系统上安装 NodeJS？

或者也许在这些系统上的任何路由器上：[http ://en.wikipedia.org/wiki/List_of_router_or_firewall_distributions](http://en.wikipedia.org/wiki/List_of_router_or_firewall_distributions)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T06:09:15.633

我在 Twitter 上偶然发现了一位自称早在 2011 年 4 月[就这样做的人，并](https://twitter.com/revin/status/55276069082759168)[提供了对该过程的高级概述](https://twitter.com/revin/status/223166695479590912)。我的研究表明，这只能在小端芯片组（例如“mipsel”，如在华硕 RT-N16 上）上实现，因为即使是 MIPS 版本的 v8[也不支持该架构的大端](https://github.com/paul99/v8m-rb/issues/3#issuecomment-4500448)实现（例如 Atheros Buffalo WZR-HP-AG300H 上的芯片组正在使用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T14:59:20.337

抱歉，找不到任何表明已完成的参考。我建议检查 Node.js 的依赖项。

您至少需要以下内容：

*   gcc4-g++
*   混帐
*   制作
*   包配置
*   zlib-开发
*   openssl-开发
*   openssl
*   Python

请注意，这是来自较旧的[Cygwin 编译指令](https://github.com/joyent/node/wiki/Building-node.js-on-Cygwin-%28Windows%29)，因此它们可能并不完全正确。

如果您可以为您的路由器操作系统找到所有这些，那么它应该是可能的。请注意，编译需要很长时间。

由于大多数路由器严重缺乏，您可能还会遇到内存问题。[谷歌上的这个问题](https://groups.google.com/forum/?fromgroups#!topic/nodejs/MnQmSwZkh3k)有一些信息。

# android - 改变换行行为

> ID：10592298
> 
> 赞同：14
> 
> 时间：2012-05-14T23:22:28.193
> 
> 标签：android, textview, word-wrap

我可以在 TextViews 中使用 Spannable 来创建具有不同外观、下划线、删除线等的跨度。我如何做同样的事情来改变换行行为？特别是，我不希望电子邮件地址包含在中间，我希望它表现得像一个单词。

我试过[WrapTogetherSpan](http://developer.android.com/reference/android/text/style/WrapTogetherSpan.html)，但我无法让它工作。看起来它仅由 DynamicLayout 使用，我无法强制 TextView 使用 DynamicLayout。

```
<TextView
  android:id="@+id/merchant_email_field"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:textSize="@dimen/account_setting_email"
  android:gravity="center"
  android:bufferType="spannable"
  android:maxLines="2"
  android:ellipsize="end"
  /> 
```

我如何设置spannable：

```
WrapTogetherSpan TOGETHER_SPAN = new WrapTogetherSpan() {};
String collectedString = getString(R.string.email_sentence, userEmail);
int emailOffset = collectedString.indexOf(userEmail);
Spannable emailSpannable = Spannable.Factory.getInstance()
    .newSpannable(collectedString);
emailSpannable.setSpan(TOGETHER_SPAN, emailOffset,
    emailOffset + userEmail.length(),
    Spanned.SPAN_INCLUSIVE_EXCLUSIVE);
textView.setText(emailSpannable) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-09T06:08:06.227

不知道您是否找到了答案，但您可以使用 unicode 来帮助您。

有一个不间断的空格字符，所以你需要用这个字符替换所有你想牢不可破的空格（\u00A0）

举个例子

```
String text = "Hello World";
text.replace(' ', '\u00A0');
textView.setText(text); 
```

顺便说一句，我一直在寻找一个跨度解决方案但找不到， **WrapTogetherSpan**只是一个接口，所以它不会工作......

但是通过这种方法，我相信如果你愿意，你可以制作一个自定义的牢不可破的跨度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-14T08:58:38.857

如果您正在实施更底层的解决方案（即绘制自己的文本并自己处理换行），请参阅[`BreakIterator`](https://developer.android.com/reference/java/text/BreakIterator.html). 工厂方法将`BreakIterator.getLineInstance()`电子邮件地址视为一个单元。

```
String text = "My email is me@example.com.";
BreakIterator boundary = BreakIterator.getLineInstance();
boundary.setText(text);
int start = boundary.first();
for (int end = boundary.next(); end != BreakIterator.DONE; end = boundary.next()) {
    System.out.println(start + " " + text.substring(start, end));
    start = end;
} 
```

输出显示可以接受换行符的边界开始索引。

```
0 My 
3 email 
9 is 
12 me@example.com. 
```

**也可以看看**

*   [`BreakIterator`在 Android 中如何工作？](https://stackoverflow.com/a/42219474/3681880)
*   [`StaticLayout`在安卓中是如何使用的？](https://stackoverflow.com/a/41779935/3681880)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T04:02:58.293

您是否尝试过添加`android:singleLine="true"`到您的 XML 中？

# r - 在 R 数据框中设置一个虚拟变量，以便在 ggplot2 中按组绘制

> ID：10592304
> 
> 赞同：0
> 
> 时间：2012-05-14T23:23:03.177
> 
> 标签：r, pattern-matching, ggplot2, dataframe

我在 R 中有一个数据框，我想添加虚拟变量以绘制不同颜色的不同项目。

我的数据框`df <-`是这样的：

```
UID CategoryA  count
  1       AAA      2
  2       AAA      2
  3       BBB      1
  4       CCC      1
  5       DDD      1 
```

我还有一个清单，`special <- c("AAA", "DDD")`

我想最终得到类似的`df`东西：

```
UID CategoryA  count dummy
  1       AAA      2     1
  2       AAA      2     1
  3       BBB      1     0
  4       CCC      1     0
  5       DDD      1     1 
```

所以`dummy = 1`无论在哪里`CategoryA == special`

我尝试搜索这个，但我怀疑它需要`%in%`很难用谷歌搜索。

我这样做可能是出于误导的原因，所以也许你可以帮我解决这个问题——我创建这个虚拟变量的目的是创建一个条形图，它是一种横向直方图，按计数列出所有类别。我希望这个变量提供 a`group`以便将 dummy==1 的那些着色为红色，将 dummy==0 的那些着色为绿色。我将使用ggplot2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T23:33:07.947

以下是一些可能的结构：

```
categoryA <- c("AAA", "AAA", "BBB", "CCC", "DDD")
special <- c("AAA", "DDD")

# Create a dummy variable
as.integer(categoryA %in% special)
# [1] 1 1 0 0 1

# Create a color vector (2 methods shown)
c("green", "red")[categoryA %in% special + 1]
# [1] "red"   "red"   "green" "green" "red"  
ifelse(categoryA %in% special, "red", "green")
# [1] "red"   "red"   "green" "green" "red" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T23:34:47.253

呃，就在发布之后，我从回答我之前的问题的人那里知道了这一点......

```
df$dummy <- ifelse(df$categoryA %in% special,1,0) 
```

为了完整起见，我还必须将其添加到我的 ggplot 代码中......

```
scale_fill_manual(values=c("#00FFAA","#FF0000"), 
                       name="Legend",
                       breaks=c("TRUE", "FALSE"),
                       labels=c("Dummy", "No Dummy")) + 
```

# sql-server - Oracle 中的稀疏列

> ID：10592309
> 
> 赞同：1
> 
> 时间：2012-05-14T23:23:41.827
> 
> 标签：sql-server, oracle

Oracle 数据库是否有类似 SQL Server 2008 稀疏列的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T05:36:11.037

在 SQL Server 中，稀疏列有效地管理数据库中的空数据，因为它们使 NULL 数据不占用物理空间。

我猜 Oracle 中的等价物是 Trailing Null，其中表中的尾随空列消耗零字节的存储空间。

# api - 如何使用 Photobucket REST API？

> ID：10592310
> 
> 赞同：1
> 
> 时间：2012-05-14T23:24:06.983
> 
> 标签：api, oauth, photobucket

有没有人成功使用过 Photobucket REST API？根据可悲的[文档](http://pic.pbsrc.com/dev_help/PB_Developer_API_Guide.pdf)，它需要 OAuth 授权，这需要消费者密钥*和*秘密，但注册应用程序只会给你一个开发人员密钥，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T03:40:30.970

如果您进入 photobucket 并转到您的应用程序并查看详细信息，您将看到有一个开发人员密钥以及他们所谓的“私人”密钥。我认为这是您正在寻找的秘密。如果您设法成功调用 photobucket API，如果您能提供您使用的 URL，我将不胜感激（当然，匿名化任何私有的东西，如签名）

# c# - 序列化 JSON 字典

> ID：10592311
> 
> 赞同：3
> 
> 时间：2012-05-14T23:24:09.097
> 
> 标签：c#, asp.net, jquery-autocomplete, json.net

我有以下代码，我希望结尾是 JQuery 自动完成可以读取的 JSON。

```
[System.Web.Script.Services.ScriptMethod()]
[System.Web.Services.WebMethod]
public static string GetNames(string prefixText, int count)
{        
     Trie ArtistTrie = (Trie)HttpContext.Current.Cache["CustomersTrie"];

     List<string> list = ArtistTrie.GetCompletionList(prefixText, 10);
     Dictionary<string, string> dic = new Dictionary<string, string>();
     foreach (string a in list)
     {
         dic.Add(a, "name");
     }
    string json = JsonConvert.SerializeObject(dic, Formatting.Indented);
    return json;

 } 
```

JSON 看起来像这样：

```
 {
     "the album leaf": "name",
     "the all-american rejects": "name",
     "the allman brothers band": "name",
     "the animals": "name",
     "the antlers": "name",
     "the asteroids galaxy tour": "name",
     "the avett brothers": "name",
     "the band": "name",
     "the beach boys": "name",
     "the beatles": "name"
  } 
```

这是倒退，我想要

```
 "name" : "the allman brothers" 
```

但是....字典需要一个唯一的键，相同的值是可以的，

对此有什么简单的解决方法，这也可以从 JQuery 中读取吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T23:30:27.503

你不能有一个包含多个键的字典使用相同的字符串“name”，因为第二个会覆盖第一个的值。相反，您需要创建一个对象数组，例如：

```
[
  {"name": "the allman brothers"},
  {"name": "the beach boys"}
] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T23:31:58.237

一个简单的解决方法是不使用字典，而是使用自定义数据对象，可能具有一个属性：

```
class Album
{
  public string Name{get;set;}
} 
```

现在您可以序列化/反序列化此自定义类的列表。

```
 string json = JsonConvert.SerializeObject(YourListOfAlbum, Formatting.Indented); 
```

# iphone - 提取部分 NSString

> ID：10592317
> 
> 赞同：0
> 
> 时间：2012-05-14T23:24:32.843
> 
> 标签：iphone, ios, xcode, substring, href

我的应用程序从预览图像的 RSS 提要中获取字符串。它以这种格式显示：

```
<p><a href="http://316apps.com/LakesideNews/wp-content/uploads/2012/05/144x1443.png"><img class="alignnone size-full wp-image-22" title="144x144" src="http://316apps.com/LakesideNews/wp-content/uploads/2012/05/144x1443.png" alt="" width="144" height="144" /></a></p> 
```

你好

我正在使用 Ray Wenderlich 的博客中的 GDATAXML 和教程解析 rss。我将 NSString 设置为 RSS 中为图像提供的值。然后我用那个字符串设置了一个 NSLog。NSLog 返回的内容是我在原始帖子中的内容。有没有办法对它进行 subString 以获得“”之间的部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T23:43:35.297

查看Apple 文档中的[NSXMLParser](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)。您应该能够将字符串用作 NSData 并使用该对象对其进行解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:14:40.693

使用 NSRange，但您需要确定起点和长度（两个引号的位置）

```
[untested code]

int idStart = 0;
int idEnd = 0;

for (int f = 0; f < [initialString length]; f++) {
    NSRange myRangeStart;
    myRangeStart.location = f;
    myRangeStart.length = 1;
    substr = [urlStr substringWithRange:myRangeStart];
    if ( idStart == 0) {
        if ([substr isEqualToString:@"\""]) {
            idStart = f;
        }
    } else {
        if ([substr isEqualToString:@"\""] && f > idStart) {
            idEnd = f;
        }
    }
}

NSString* substring = @"";
NSRange myRange;
myRange.location = idStart+1;
myRange.length = idEnd-idStart-1;
substring = [initialString substringWithRange:myRange];

[/untested code] 
```

# portfolio - 从财务账户构建类似 Mint.com 的数据提取系统

> ID：10592320
> 
> 赞同：0
> 
> 时间：2012-05-14T23:24:43.753
> 
> 标签：portfolio

Mint.com 在注册期间从用户那里获取财务信息并从这些财务账户中获取数据。对于我的投资组合网站，我想建立类似 Mint.com 的数据拉取系统，可以让我获得他们的股票和基金详细信息。最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T00:28:29.607

看看约德利。Mint 在被 Intuit 收购之前曾使用 Yodlee。此外，Personalcapital、FutureAdvisor 使用 Yodlee 获取金融交易信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:15:43.123

您可能必须一次与每家公司进行此操作。如果有最简单的 API 可用，请先查看。如果没有，那么您可能不得不抓取信息，这将是一个艰难的过程，因为有这么多的金融机构，他们方面的任何变化都可能会破坏您的下载过程。

# tomcat6 - 强制 Tomcat 6 在 Windows 上停止

> ID：10592323
> 
> 赞同：4
> 
> 时间：2012-05-14T23:25:04.860
> 
> 标签：tomcat6, war, continuous-deployment

我们正在使用 tomcat 6 为我们的应用程序提供基于 activeMQ 的 Java 后端。最近，我一直在研究如何为该产品的服务器端组件实施持续部署解决方案。

我想要做的是拥有我们的持续集成服务器：
1\. 将 MSI 安装程序扔到虚拟机上
2.**停止 Tomcat**
3\. 运行安装程序
4\. 启动 Tomcat
5\. 测试服务器是否正在运行

除了关闭 Tomcat 步骤之外，我可以执行所有这些操作。我面临的问题是 Tomcat 在关闭时并不总是很优雅。所以我需要能够强制服务器关闭。我对天气或不将 Tomcat 作为服务运行持开放态度。
有没有人有关于如何在 Windows 上关闭 Tomcat 6 的任何信息？我看过一些关于使用该`-force`参数的文档，但这是不完整的并且针对的是 Unix 系统。

您可以提供的任何信息将不胜感激。

* * *

编辑：Tomcat 可能不是机器上运行的唯一 Java 进程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T07:38:01.027

如果您不将它作为服务运行并且 Tomcat 是唯一运行的 Java 应用程序，那么您可以使用 taskkill。类似的东西`taskkill /F /IM java.exe`应该可以解决问题。

请注意，就 Tomcat 而言，强制终止 Tomcat 进程是安全的。运行的任何应用程序可能都不会那么宽容，但由于它是您的应用程序，您会知道什么是安全的，什么不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-14T20:43:07.113

另一个答案（使用 taskkill）很好，但是要通过“sc queryex”的输出来搜索您感兴趣的服务名称的 PID，然后获取它的 pid。

然后是 taskkill /f /pid {pid} 而不是仅仅寻找 java 任务。

我不得不使用一个 groovy 脚本来做到这一点，如果你擅长 powershell，你可能会得到更好的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-13T19:48:51.870

以下批处理命令适用于在我们的 Windows 服务器上在端口 8080 上运行的 tomcat。

```
@echo off

FOR /F "tokens=5 delims= " %%P IN ('netstat -a -n -o ^| findstr :8080') DO @ECHO Unable to stop Tomcat timely..Kill process %%P
FOR /F "tokens=5 delims= " %%P IN ('netstat -a -n -o ^| findstr :8080') DO call TaskKill.exe /f /PID %%P 
```

# c# - 从视频服务器c#流式传输音频

> ID：10592325
> 
> 赞同：3
> 
> 时间：2012-05-14T23:25:22.003
> 
> 标签：c#, streaming, rtsp, rtp

我有一个 IP:192.168.1.XX 的视频服务器它有 3 种可能的格式 JPEG、MPEG-4 或 H.264

视频服务器正在实时播放视频（带音频）

使用 AFORGE lib 流式传输视频没有问题，但我还需要流式传输音频

视频服务器有几种协议：HTTP、RTSP、RTP、RTCP

根据用户手册，RTSP 是我应该用来获取 MPEG-4（音频和视频）的协议，但我还没有找到任何可以在 C# 上通过 RTSP 流式传输的内容，所以我尝试将音频和视频分开传输

端口是：

RTSP：554 RTP（视频）：5556 RTP（音频）：5558 RTCP（视频）：5557 RTCP（音频）：5559

有谁知道 RTP 是如何工作的，或者我如何从视频服务器获取声音？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T01:37:39.630

我会学习gstreamer。我假设您使用的是 Windows，因为您是在 C# 中执行此操作的。它有一个相当稳定的 Windows 端口和一个不错的 .net 包装器。如果您不使用 Windows，那么 gstreamer 无疑是您的最佳选择。

在 gstreamer 中，您很可能会使用如下管道：

```
your video src -> x264enc or ffenc_mpv4 -> rtph264pay or rtpmp4vpay -> udpsink

your audio src  -> ffenc_aac or preferably a lower latency codec like mULaw -> rtppay -> udpsink 
```

等等。这是非常容易使用。如果您想实际管理 rtp 会话，他们甚至有一个不错的 rtpbin 供您使用。

更多信息可以在这里找到：

[http://gstreamer.freedesktop.org/](http://gstreamer.freedesktop.org/)

这是如何执行 rtp 的一个很好的示例：

[http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gst-plugins-good-plugins/html/gst-plugins-good-plugins-gstrtpbin.html](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gst-plugins-good-plugins/html/gst-plugins-good-plugins-gstrtpbin.html)

我已经用直接显示过滤器完成了这种事情，但它涉及的更多。您通常必须手动处理 rtp 负载和传输（更不用说处理 COM），而 GStreamer 为您提供了开箱即用的这些机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T18:38:00.330

您可以使用[https://net7mma.codeplex.com/](https://net7mma.codeplex.com/)

它是一个 C# 媒体服务器，它会为您获取每个 RtpPacket，然后您可以从那里将它们发送到您选择的解码器等等，而不会陷入源流。

# ruby-on-rails-3 - Evernote/Ruby on Rails：如何创建新的 NoteFilter 和 NotesMetadataResultSpec？

> ID：10592326
> 
> 赞同：1
> 
> 时间：2012-05-14T23:25:23.423
> 
> 标签：ruby-on-rails-3, evernote

嗨，我正在尝试使用[https://github.com/cgs/evernote](https://github.com/cgs/evernote)从我的 Evernote 笔记本中为我的 Rails 应用程序获取笔记。我可以很好地获取单个笔记，但我在使用 findNotesMetadata 时遇到了问题，因为我不知道如何使用这个 gem 或 ruby​​ 包装器创建一个新的**NoteFilter**或**NotesMetadataResultSpec 。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T21:16:41.730

这很简单

```
noteFilter = Evernote::EDAM::NoteStore::NoteFilter.new 
```

然后，您可以像这样填充属性

```
noteFilter.tagGuids = ["<tag guid>"] 
```

# ruby-on-rails - 加入包含大量记录的 rails 表 - 导致我的应用程序挂起

> ID：10592332
> 
> 赞同：0
> 
> 时间：2012-05-14T23:26:15.823
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, scalability, scaling

我有`actions`一张包含超过 450,000 条记录的表。我想在`actions`表上加入`users`表（它实际上是在加入表之前加入另外两个表，其中一个在另一个上加入，另一个在`users`表上加入`actions`。）sql查询如下所示：

```
SELECT "users".* FROM "users" INNER JOIN "campaigns" ON "campaigns"."user_id" = "users"."id" INNER JOIN "books" ON "books"."campaign_id" = "campaigns"."id" INNER JOIN "actions" ON "actions"."book_id" = "books"."id" AND "actions"."type" IN ('Impression') 
```

但是，由于表中有大量记录，rails 中的此查询导致我的应用程序挂起`actions`。

我应该如何处理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:54:01.350

这种方法有几个问题：

1.  您多次获取相同的用户（用户乘以操作数）
2.  您正在一次获取**所有**具有相应操作的用户。这意味着大量的内存消耗和频繁的垃圾收集
3.  您正在获取用户的**所有**属性。我想，你不需要所有这些
4.  您已对按订单数量对用户进行排序发表评论。你在 Ruby 代码中这样做吗？如果是，那么这是第四个问题。大问题，确实

所以我建议使用 group() 方法对记录进行分组，或者只是简单的 SQL

```
 SELECT "users".id, count(*) as actions_cnt
    FROM "users" 
        INNER JOIN "campaigns" ON "campaigns"."user_id" = "users"."id" 
        INNER JOIN "books" ON "books"."campaign_id" = "campaigns"."id" 
        INNER JOIN "actions" ON "actions"."book_id" = "books"."id" AND "actions"."type" IN ('Impression')
    GROUP BY
        "users".id 
```

如果您的应用中有很多用户，那么我建议添加“OFFSET #{offset} LIMIT #{limit}”来批量获取记录。

最后，您可以直接指定您需要的列，这样内存占用就不会那么大。

# c++ - 递增指针时带或不带星号

> ID：10592338
> 
> 赞同：0
> 
> 时间：2012-05-14T23:28:08.490
> 
> 标签：c++, pointers, void-pointers

在[cplusplus.com](http://www.cplusplus.com/doc/tutorial/pointers/)教程中的“空指针”示例中，我尝试进行如下比较。为什么我们还需要`*`括号？没有时会发生什么`*`？

```
void increase(void* data, int psize) {
    if (psize == sizeof(char)) {
        char* pchar;
        pchar = (char*) data;
        cout << "pchar=" << pchar << endl;
        cout << "*pchar=" << *pchar << endl;
        //++(*pchar);   // increases the value pointed to, as expected
        ++(pchar);      // the value pointed to doesn't change 
    } else if (psize == sizeof(int)) {
        int* pint;
        pint = (int*) data;
        //++(*pint);   // increases the value pointed to, as expected
        ++(pint);      // the value pointed to doesn't change 
    }
}

int main() {
    char a = 'x';
    int b = 1602;
    increase(&a, sizeof(a));
    increase(&b, sizeof(b));
    cout << a << ", " << b << endl;
    return 0;
} 
```

* * *

接受解决方案后更新）根据@Cody Gray的回答，我试图弄清楚我没有得到什么。的地址`pchar`递增以指向无意义的位置。但是因为变量`a`in`main`是`cout`ted 而不是`pchar`，这`cout`仍然会打印出一个有意义的值（在本例中为“x”）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T23:31:01.963

**`*`运算符*取消引用*指针。**

因此，这段代码：

```
++(*pint) 
```

递增*指向* `pint`的值。

相比之下，这段代码：

```
++(pint) 
```

增加*指针本身*，`pint`. 这就是为什么指针指向的值不会改变的原因。您不会更改指针指向的值，而是更改指针本身的值。

递增指针将导致它指向内存中完全不同的值。在这种情况下，由于您只为单个整数分配空间，它将指向一个无意义的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T23:35:05.573

当您从指针转换到其他指针时

```
char* pchar;
pchar = (char*) data; 
```

您告诉编译器将此内存作为 char 指针处理，您可以在其中对该变量执行指针运算。因此，您不是仅使用指针来处理指针的值，而是在其中进行算术运算的内存地址。

要使用该值，您需要使用“*”或通过字符访问内存指针。

# c# - MVC 3 razor 使用会话通过 Windows 身份验证存储访问者的用户名

> ID：10592340
> 
> 赞同：1
> 
> 时间：2012-05-14T23:28:35.027
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我试图在 mvc 中设置一个会话来存储访问该站点的当前用户。例如：

用户访问该站点。它作为登录名记录到数据库中。当用户关闭他的浏览器时。会议结束。

使用 Windows 身份验证，我可以使用此获取用户名 `User.Identity.Name`

在 _layout 我希望我能做到这一点：

```
@{
    var Data = HttpContext.Current.Session["UserSession"];
    Data["UserSession"] = User.Identity.Name; 
} 
```

但我不能。设置会话变量并将其作为我的用户身份的值的正确语法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T23:44:07.813

```
HttpContext.Current.Session["MySessionVariable"] = User.Identity.Name; 
```

如果那不是您所需要的，那么我需要进一步说明您的要求

# macos - 无法在 Mac 上升级 gcc

> ID：10592341
> 
> 赞同：2
> 
> 时间：2012-05-14T23:28:45.900
> 
> 标签：macos, gcc, qt-creator

所以这是在为 Mac OS 10.7 降价 30 美元并下载 XCode 4.3.2 之后。安装命令行工具后，安装的gcc版本*还是*4.2.4。我需要4.7。我已经安装了它并设置了它的`g++`链接`/usr/bin`。但是当我尝试通过 QtCreator 编译任何程序时，我得到

> 无法识别的命令行选项`-Xarch_x86_64`

我在一个 3 年前的错误报告中发现了这[一点](https://trac.macports.org/ticket/22924)，但我真的无法遵循所有不同的 shell 命令等，并且我尝试安装 liblastfm 失败并出现同样的错误。[这里](http://groups.google.com/group/capybara-webkit/browse_thread/thread/356ab5ac895346c7)的评论，

> 问题是通常用于在 Mac 上编译东西的 GCC/G++ 实际上只是一个包装器。
> 
> 并且这个包装器具有 Mac-Only 参数，例如 -Xarch_x86_64，然后将其转换为正确的参数。

似乎它可能会击中头上的钉子。啊！当然必须有某种方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:24:43.683

我创建了一个自定义 makespec - 在 QtSDK/Desktop/Qt/4.8.1/gcc/mkspecs 中，我将 macx-g++ 文件夹复制到 macx-g++47。然后，我从中删除了“include(../common/g++macx.conf)”并包含了它的内容，除了生成错误的部分（即-X ...事物）。

我也完成了

```
QMAKE_CC         = gcc-mp-4.7
QMAKE_CXX        = g++-mp-4.7

QMAKE_LINK       = $$QMAKE_CXX
QMAKE_LINK_SHLIB = $$QMAKE_CXX
QMAKE_LINK_C       = $$QMAKE_CC
QMAKE_LINK_C_SHLIB = $$QMAKE_CC 
```

...这类似于 macx-g++42 的规范。

现在，如果我将 '-spec macx-g++47' 添加到 qmake args，它就可以工作。

为简单的事情付出了很多努力……很想知道更好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T01:42:54.100

OSX 的新 gcc 版本有几个来源。这是一个小选择：

[http://hpc.sourceforge.net/](http://hpc.sourceforge.net/)（目前 gcc 4.8，以前的版本可能也可用）

[http://gcc.gnu.org/wiki/GFortranBinaries](http://gcc.gnu.org/wiki/GFortranBinaries)（有 gcc 4.7.0 二进制安装程序）

我假设您确实从 Xcode 中安装了命令行工具。Apple/Xcode 并不总是与 gcc 保持同步，稳定性在这里比前沿更重要。

# java - 如果存在两级软引用对象，GC 会做什么

> ID：10592342
> 
> 赞同：3
> 
> 时间：2012-05-14T23:29:01.237
> 
> 标签：java, garbage-collection, soft-references

我知道在 Java 中我们有软引用的概念。如果：

1）有一个软引用“sf”指的是一个对象A

2）在对象A中，有强引用指向对象B

3) 对象 A 和 B 未在其他任何地方引用。

根据定义，对象 A 和对象 B 都是“可轻松访问的”，对吗？

然后说我们现在内存快用完了，GC就开始了。GC是否有可能回收对象B而不回收对象A？

如果是这样的话，以后如果我们想通过“sf”访问对象B，它将为null。java如何避免这种情况发生？

我在 java doc 中没有看到任何解释。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T23:39:19.443

> 然后说我们现在内存快用完了，GC就开始了。GC是否有可能回收对象B而不回收对象A？

不会。GC 不会破坏可访问对象中的强引用。（作为回收过程的一部分，它当然会破坏无法访问的对象中的引用。但是您无法观察到这种情况的发生……因为要观察它，您需要该对象仍然可以访问。）

这是包的 javadoc 中此语句的结果`java.lang.ref`。

*“最后，当一个对象无法通过上述任何方式到达时，它是无法访问的，**因此有资格进行回收。”***

...其中“上述方式”包括强、软、弱和幻影可达性。

两个突出显示的词表示回收资格是处于无法到达状态的结果。由于其他州都没有提到回收资格，我们得出结论，不可到达性是回收的先决条件。

这当然符合常识。如果（假设地）允许 GC 将可访问对象中的强引用“清空”，则应用程序将不可能在对象进入此状态后安全地使用它们。（考虑空引用在库类的实例中的情况......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T00:18:08.480

我认为关于跟踪 GC 的基本工作原理的简短介绍应该可以澄清问题。

跟踪 GC（Java 和 .NET 中使用的都属于该类别）有一组所谓的 GC `root pointers`，它们是全局变量（在 java 中表示类的静态变量）和堆栈帧中的所有活动变量。GC 遍历这些对象并标记所有活动的对象，即可以通过来自至少一个根指针的引用到达。完成后，所有活动变量都已被标记，其余的可以被垃圾收集。

现在可以通过两种不同的方式处理软引用：a）我们遵循软引用并标记其中的所有对象，或者 b）我们不这样做。究竟发生了什么取决于给定的 JVM 实现，但在确定之后就没有其他区别了。

因此有两种可能的情况：

*   GC 遵循对 A 的软引用，在这种情况下，两个对象都不会被 GC。
*   GC 不遵循对 A 的软引用（并且没有对它的硬引用）。A 是 GCed，B 是 GCed 如果没有活动对象引用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T23:51:26.220

从文档：

“如果一个对象不是强可达但可以通过遍历软引用来达到，那么它就是软可达的。”

“如果某个对象可以在不遍历任何引用对象的情况下被某个线程访问，则该对象是强可达的”

我认为那很清楚。B 是软可达的，因为它只能通过遍历软引用来达到。

[说文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ref/package-summary.html#reachability)

# c++ - 多重继承钻石

> ID：10592343
> 
> 赞同：0
> 
> 时间：2012-05-14T23:29:01.520
> 
> 标签：c++, virtual-inheritance

这是代码：

```
 class Vehicle {
     public :
       Vehicle () { 
              cout << " Vehicle Constructor " << endl ;
                  }
       virtual ~ Vehicle () {
              cout << " Vehicle Destructor " << endl ;
                             }

       virtual void accelerate () {
              cout << " Vehicle Accelerating " << endl ;
                                   }   

       void setAcceleration ( double a ) {
              acceleration = a;
                                         }
       double getAcceleration () {
              return acceleration ;
                                  }
       protected :
              double acceleration ;
      };
      class Car : public Vehicle {
       public :

       Car () {
              cout << " Car Constructor " << endl ;
               }

       virtual ~ Car () {
              cout << " Car Destructor " << endl ;
                         }

       virtual void accelerate () {
             cout << " Car Accelerating " << endl ;
                                  }

       virtual void drive () {
             cout << " Car Driving " << endl ;
                             }

       };
      class Jet : public Vehicle {
      public :

       Jet () {
             cout << " Jet Constructor " << endl ;
               }

       virtual ~ Jet () {
              cout << " Jet Destructor " << endl ;
                        }

       virtual void fly () const {
             cout << " Jet flying " << endl ;
                       }

                };
       class JetCar : public Car , public Jet {
       public :

       JetCar () {
              cout << " JetCar Constructor " << endl ;
               }

       virtual ~ JetCar () {
              cout << " JetCar Destructor " << endl ;
                    }

       virtual void drive () {
              cout << " JetCar driving " << endl ;
                             }

       virtual void fly () {
              cout << " JetCar flying " << endl ;
                           }

       };
       void analyzeCarPerformance ( Car * testVehicle ) {
              testVehicle -> drive () ;
                 }

       void analyzeJetPerformance ( Jet * testVehicle ) {
                testVehicle -> fly () ;
                  }

     int main () {
       Car myCar ;

       Jet myJet ;

       JetCar myJetCar ;

       cout << endl << endl ;

       cout << " Car testing in progress " << endl ;

       analyzeCarPerformance (& myCar );

       analyzeCarPerformance (& myJetCar ) ;

       cout << " Jet testing in progress " << endl ;

       analyzeJetPerformance (& myJet );

       analyzeJetPerformance (& myJetCar ) ;

       cout << endl << endl ;

       return 0;
      } 
```

总的来说，当我调用该函数时`analyzeJetPerformance (& myJetCar )`，编译器给我的`Jat flying`不是`JetCar flying`我所期望的。这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T23:34:30.703

在 Jet 中，您有以下内容：

```
 virtual void fly () const {
         cout << " Jet flying " << endl ;
                   } 
```

在 JetCar 中，您拥有：

```
 virtual void fly () {
          cout << " JetCar flying " << endl ;
                       } 
```

这些不是同一个功能。使函数声明相同，它应该可以工作。

# ios - 第四代 ipod Tocuh 上的 openGL ES 1.0 不兼容

> ID：10592348
> 
> 赞同：0
> 
> 时间：2012-05-14T23:29:39.960
> 
> 标签：ios, ios5, opengl-es, opengl-es-1.1

刚刚发现我的应用程序只是在第四代 ipod touch 上显示黑屏。它适用于我测试过的大多数其他苹果设备，例如运行良好的 iphone 3gs。这是生成我的 GLView 的样板代码，有人知道可能是什么问题吗？或者更现代的样板用于opengl es 1.0？

GLView.m:

```
//
//  GLView.m
//  Part6Project
//
//  Created by jeff on 5/31/09.
//  Copyright Jeff LaMarche 2009\. All rights reserved.
//

#import <QuartzCore/QuartzCore.h>
#import <OpenGLES/EAGLDrawable.h>
#import "GLView.h"
#import "GLViewController.h"

@interface GLView (private)

- (id)initGLES;
- (BOOL)createFramebuffer;
- (void)destroyFramebuffer;

@end

@implementation GLView

@synthesize animationInterval;
+ (Class) layerClass
{
    return [CAEAGLLayer class];
}
-(id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if(self != nil)
    {
        self = [self initGLES];
    }
    return self;
}

- (id)initWithCoder:(NSCoder*)coder
{
    if((self = [super initWithCoder:coder]))
    {
        self = [self initGLES];
    }   
    return self;
}

-(id)initGLES
{
    NSLog(@"created");
    CAEAGLLayer *eaglLayer = (CAEAGLLayer*) self.layer;

    if ([self respondsToSelector:@selector(contentScaleFactor)])
    {
        self.contentScaleFactor = [[UIScreen mainScreen] scale]; 
        // scale value should be 1.0 on 3G and 3GS, and 2.0 on iPhone 4.
        self.contentMode = UIViewContentModeScaleToFill;
    }

    // Configure it so that it is opaque, does not retain the contents of the backbuffer when displayed, and uses RGBA8888 color.
    eaglLayer.opaque = YES;
    eaglLayer.drawableProperties = [NSDictionary dictionaryWithObjectsAndKeys:
                                    [NSNumber numberWithBool:FALSE], kEAGLDrawablePropertyRetainedBacking,
                                    kEAGLColorFormatRGBA8, kEAGLDrawablePropertyColorFormat,
                                    nil];

    // Create our EAGLContext, and if successful make it current and create our framebuffer.
    context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES1];
    if(!context || ![EAGLContext setCurrentContext:context] || ![self createFramebuffer])
    {
//      [self release];
        return nil;
    }

    // Default the animation interval to 1/60th of a second.
    animationInterval = 1.0 / kRenderingFrequency;
    return self;
}

-(GLViewController *)controller
{
    return controller;
}

-(void)setController:(GLViewController *)d
{
    controller = d;
    controllerSetup = ![controller respondsToSelector:@selector(setupView:)];
}

// If our view is resized, we'll be asked to layout subviews.
// This is the perfect opportunity to also update the framebuffer so that it is
// the same size as our display area.
-(void)layoutSubviews
{

    [EAGLContext setCurrentContext:context];
    [self destroyFramebuffer];
    [self createFramebuffer];
    [self drawView];
}

- (BOOL)createFramebuffer
{
        // Generate IDs for a framebuffer object and a color renderbuffer
    glGenFramebuffersOES(1, &viewFramebuffer);
    glGenRenderbuffersOES(1, &viewRenderbuffer);

    glBindFramebufferOES(GL_FRAMEBUFFER_OES, viewFramebuffer);
    glBindRenderbufferOES(GL_RENDERBUFFER_OES, viewRenderbuffer);
    // This call associates the storage for the current render buffer with the EAGLDrawable (our CAEAGLLayer)
    // allowing us to draw into a buffer that will later be rendered to screen whereever the layer is (which corresponds with our view).
    [context renderbufferStorage:GL_RENDERBUFFER_OES fromDrawable:(id<EAGLDrawable>)self.layer];
    glFramebufferRenderbufferOES(GL_FRAMEBUFFER_OES, GL_COLOR_ATTACHMENT0_OES, GL_RENDERBUFFER_OES, viewRenderbuffer);

    glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_WIDTH_OES, &backingWidth);
    glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_HEIGHT_OES, &backingHeight);

    // For this sample, we also need a depth buffer, so we'll create and attach one via another renderbuffer.
    glGenRenderbuffersOES(1, &depthRenderbuffer);
    glBindRenderbufferOES(GL_RENDERBUFFER_OES, depthRenderbuffer);
    glRenderbufferStorageOES(GL_RENDERBUFFER_OES, GL_DEPTH_COMPONENT16_OES, backingWidth, backingHeight);
    glFramebufferRenderbufferOES(GL_FRAMEBUFFER_OES, GL_DEPTH_ATTACHMENT_OES, GL_RENDERBUFFER_OES, depthRenderbuffer);

    if(glCheckFramebufferStatusOES(GL_FRAMEBUFFER_OES) != GL_FRAMEBUFFER_COMPLETE_OES)
    {
        NSLog(@"failed to make complete framebuffer object %x", glCheckFramebufferStatusOES(GL_FRAMEBUFFER_OES));
        return NO;
    }

    return YES;
}

// Clean up any buffers we have allocated.
- (void)destroyFramebuffer
{
    glDeleteFramebuffersOES(1, &viewFramebuffer);
    viewFramebuffer = 0;
    glDeleteRenderbuffersOES(1, &viewRenderbuffer);
    viewRenderbuffer = 0;

    if(depthRenderbuffer)
    {
        glDeleteRenderbuffersOES(1, &depthRenderbuffer);
        depthRenderbuffer = 0;
    }
}

- (void)startAnimation
{
    animationTimer = [NSTimer scheduledTimerWithTimeInterval:animationInterval target:self selector:@selector(drawView) userInfo:nil repeats:YES];
}

- (void)stopAnimation
{
    [animationTimer invalidate];
    animationTimer = nil;
}

- (void)setAnimationInterval:(NSTimeInterval)interval
{
    animationInterval = interval;

    if(animationTimer)
    {
        [self stopAnimation];
        [self startAnimation];
    }
}

// Updates the OpenGL view when the timer fires
- (void)drawView
{
    // Make sure that you are drawing to the current context
    [EAGLContext setCurrentContext:context];

    // If our drawing delegate needs to have the view setup, then call -setupView: and flag that it won't need to be called again.
    if(!controllerSetup)
    {
        [controller setupView:self];
        controllerSetup = YES;
    }

    glBindFramebufferOES(GL_FRAMEBUFFER_OES, viewFramebuffer);

    [controller drawView:self];

    glBindRenderbufferOES(GL_RENDERBUFFER_OES, viewRenderbuffer);
    [context presentRenderbuffer:GL_RENDERBUFFER_OES];

    GLenum err = glGetError();
    if(err)
        NSLog(@"%x error", err);
}

// Stop animating and release resources when they are no longer needed.
- (void)dealloc
{
    [self stopAnimation];

    if([EAGLContext currentContext] == context)
    {
        [EAGLContext setCurrentContext:nil];
    }

    context = nil;

}

@end 
```

GLView.h：

```
//
//  GLView.h
//  Part6Project
//
//  Created by jeff on 5/31/09.
//  Copyright Jeff LaMarche 2009\. All rights reserved.
//

#import <UIKit/UIKit.h>
#import <OpenGLES/EAGL.h>
#import <OpenGLES/ES1/gl.h>
#import <OpenGLES/ES1/glext.h>
#import "ConstantsAndMacros.h"
#import "OpenGLCommon.h"
@class GLViewController;
@interface GLView : UIView
{
@private
    // The pixel dimensions of the backbuffer
    GLint backingWidth;
    GLint backingHeight;

    EAGLContext *context;
    GLuint viewRenderbuffer, viewFramebuffer;
    GLuint depthRenderbuffer;
    NSTimer *animationTimer;
    NSTimeInterval animationInterval;

    GLViewController *controller;
    BOOL controllerSetup;
}

@property(nonatomic, weak) GLViewController *controller;
@property NSTimeInterval animationInterval;

-(void)startAnimation;
-(void)stopAnimation;
-(void)drawView;

@end 
```

# windows - 我可以使用 Windows DDK 构建标准 DLL（不是驱动程序）吗？

> ID：10592349
> 
> 赞同：0
> 
> 时间：2012-05-14T23:29:42.440
> 
> 标签：windows, msvcrt, wdk

用 Windows DDK 编译标准 DLL 可以吗？我的主要目标是链接到`msvcrt.dll`; 我知道有一些方法可以`msvcrt.obj`从 DDK 链接，但也可以使用 Visual Studio 进行编译，但我只使用命令行工具，而 DDK 似乎拥有所有这些工具。调试有什么不同，也许？

# javascript - 在使用 javascript 打开的页面上自动提交输入

> ID：10592352
> 
> 赞同：0
> 
> 时间：2012-05-14T23:30:07.757
> 
> 标签：javascript, html, ajax, forms

我有这个代码

```
var file = getUrlVars()["file"];
    if(file){
            document.getElementById('search').value = file; 
    }
    function getUrlVars() {
    var vars = {};
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
        vars[key] = value;
    });
    return vars;
} 
```

它从 url 读取参数文件，然后将值放在搜索字段中。搜索字段由 ajax 驱动，当用户输入一个字母时，它开始搜索并输出结果。问题是，当脚本将值放在搜索字段中时，什么也没有发生，我该如何启动搜索？

这是我的搜索栏

```
<input type="text" id="search" class='search_input' /> 
```

**更新：** 我的 Ajax 搜索代码是这样的

```
// Search
$(document).ready(function()
    {
        $(".search_input").focus();
        $(".search_input").keyup(function() 
    { 
    var search_input = $(this).val();
    var keyword= encodeURIComponent(search_input); 
    var yt_url='http://domain.com/search.php?q='+keyword;  
    $.ajax({
        type: "GET",
        url: yt_url,

        success: function(response)
    {
        $("#result").html('');
        if(response.length)
        { 
            $("#result").append(response); 
        }
        else
        {
            $("#result").html("<div id='no'>No results</div>");
        }
    }   

    }); 
    });
}   ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T23:35:41.197

只有在触发了启动 AJAX 功能的事件时，您的搜索才会“*触发”。*因此，您需要触发事件。我的疯狂猜测是该事件必然会发生：

```
 - keyup
 - click
 - blur 
```

您尚未发布相关代码，但这应该足以回答...

* * *

**更新后**

一个快速的解决方案是`keyup`在搜索字段上启动事件：

```
$(".search_input").keyup(function() { ... }).keyup(); 
```

或者，您可以重构代码：

```
function searchlogic() { ... };

$(".search_input").keyup(searchlogic);

searchlogic(); 
```

# ruby-on-rails - Rails：如何在内部发布到另一个控制器操作？

> ID：10592353
> 
> 赞同：6
> 
> 时间：2012-05-14T23:30:14.680
> 
> 标签：ruby-on-rails

这听起来很奇怪，但请听我说……我需要能够向我的其他控制器之一发出等效的 POST 请求。这`SimpleController`基本上是一个更详细的控制器的简化版本。我怎样才能适当地做到这一点？

```
class VerboseController < ApplicationController
  def create
    # lots of required params
  end
end

class SimpleController < ApplicationController
  def create
    # prepare the params required for VerboseController.create
    # now call the VerboseController.create with the new params
  end
end 
```

也许我想太多了，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T23:54:19.713

Rails 应用程序（或任何遵循相同模型-适配器-视图模式的 Web 应用程序）中的控制器间通信是您应该积极避免的。当您想这样做时，请认为这表明您正在与构建应用程序的模式和框架作斗争，并且您所依赖的逻辑已在应用程序的错误层实现。

正如@ismaelga 在评论中建议的那样；两个控制器都应该调用一些通用组件来处理这种共享行为并保持你的控制器“瘦”。在 Rails 中，这通常是模型对象上的一种方法，尤其是对于在这种情况下您似乎担心的那种创建行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T23:55:42.890

你不应该这样做。你在创建一个模型吗？然后在模型上有两个类方法会好得多。它还可以更好地分离代码。然后，您不仅可以在控制器中使用这些方法，而且将来还可以在后台作业（等）中使用这些方法。

例如，如果您正在创建一个人：

```
class VerboseController < ApplicationController
  def create
    Person.verbose_create(params)
  end
end

class SimpleController < ApplicationController
  def create
    Person.simple_create(params)
  end
end 
```

然后在 Person-model 中你可以这样：

```
class Person
  def self.verbose_create(options)
    # ... do the creating stuff here
  end

  def self.simple_create(options)
    # Prepare the options as you were trying to do in the controller...
    prepared_options = options.merge(some: "option")
    # ... and pass them to the verbose_create method
    verbose_create(prepared_options)
  end
end 
```

我希望这能有所帮助。:-)

# objective-c - Obj-C 中的图像处理

> ID：10592356
> 
> 赞同：1
> 
> 时间：2012-05-14T23:30:37.210
> 
> 标签：objective-c, image, image-processing

我想在 Obj-C 或 C 中的 iOS 上做一些科学的图像处理，我需要做的就是获取所有像素 RGBA 的位值的 3D 数组。 `UIImage`似乎没有内置功能。你们中的任何人都知道如何获取像素值，或者更确切地说是一个包含这些函数的预定义库吗？提前致谢， 杰姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T23:38:29.373

您通常会创建一个[`CGBitmapContext`](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGBitmapContext/Reference/reference.html)，告诉它使用您自己分配的一些内存（因此，您知道它在哪里以及如何访问它）或者让 Core Graphics 为您解决这个问题并`CGBitmapContextGetData`在您仅定位时调用iOS 4/OS X 10.6 及更高版本，然后绘制您想要检查的任何内容。

例如（为简洁起见，故意省略了错误检查和一些设置步骤；查找我使用的变量，尽管没有定义并检查函数文档）

```
CGBitmapInfo bitmapInfo =
              kCGImageAlphaPremultipliedFirst | kCGBitmapByteOrder32Host;

context =
       CGBitmapContextCreate(
                NULL,
                width, height,
                8,
                width * 4,
                rgbColourSpace,
                bitmapInfo);

CGContextDrawImage(
        context,
        CGRectMake(0.0f, 0.0f, (CGFloat)width, (CGFloat)height),
        [image CGImage]);

uint8_t *pixelPointer = CGBitmapContextGetData(context);

for(size_t y = 0; y < height; y++)
{
    for(size_t x = 0u; x < width; x++)
    {
        if((bitmapInfo & kCGBitmapByteOrder32Little))
        {
            NSLog(@"rgba: %02x %02x %02x %02x",
                 pixelPointer[2], pixelPointer[1],
                 pixelPointer[0], pixelPointer[3]);
        }
        else
        {
            NSLog(@"rgba: %02x %02x %02x %02x",
                 pixelPointer[1], pixelPointer[2],
                 pixelPointer[3], pixelPointer[0]);
        }

        pixelPointer += 4;
    }
} 
```

# graph - 在 Wolfram Mathematica 中为图形上的边缘着色

> ID：10592357
> 
> 赞同：4
> 
> 时间：2012-05-14T23:30:41.580
> 
> 标签：graph, wolfram-mathematica

是否可以使用颜色函数在 Wolfram Mathematica 中为图形的边缘着色，这取决于边缘上的坐标？就像在 Plot[] 中使用 ColorFunction 选项一样。

我在图的边缘指定了一个函数，具体取决于边缘的坐标。是否可以在边缘绘制此功能的密度？感谢您的回复。

PS：第一个想法——在EdgeRenderingFunction中使用Inset[]插入图形彩色对象，但似乎很不自然。有没有简单的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T03:18:14.237

`ColorFunction`在图表中为边缘着色的 一种方法是：

```
 ClearAll[colorededge];
  colorededge[pts_, colorfunc_: Function[{x, y}, ColorData["TemperatureMap"][y]]] := 
  ListPlot[pts, Joined -> True, PlotStyle -> Thick, Axes -> False, 
  ColorFunction -> colorfunc, ColorFunctionScaling -> True];
  edgshpfnc = (If[Last[#2] == "B", First@colorededge[#1], 
  First@colorededge[#1, Function[{x, y}, Blend[{Yellow, Red}, x]]]] &);
  Graph[{"A" -> "B", "B" -> "C", "C" -> "A"}, 
  VertexCoordinates -> {"A" -> {0, 0}, "B" -> {1, 1}, "C" -> {2, 0}}, 
  EdgeShapeFunction -> edgshpfnc, VertexLabels -> "Name",  ImagePadding -> 10] 
```

给

![在此处输入图像描述](../Images/879678d85601b50e5900fea065846612.png)

和

```
 GraphPlot[{"A" -> "B", "B" -> "C", "C" -> "A"},
 EdgeRenderingFunction -> edgshpfnc, VertexLabeling -> True] 
```

给

![在此处输入图像描述](../Images/505318aaba61ed2d43ec32069b1c6c04.png)

# orchardcms - 将页面标题添加到菜单时，Orchard CMS 删除主菜单链接

> ID：10592366
> 
> 赞同：0
> 
> 时间：2012-05-14T23:33:02.513
> 
> 标签：orchardcms

我刚刚创建了一个新的 Orchard 网站。我添加了 5 篇文章，完成后，我有 6 个菜单链接。

![在此处输入图像描述](../Images/cab0f8f134e36718410c2371478ad40d.png) 见： http: [//www.where-to-find-gold.org/](http://www.where-to-find-gold.org/)。Home 和 A Quick Look 是相同的页面和相同的 url。这是我添加的第一篇文章，我只是覆盖了现有 hello world 页面的内容。我希望链接文本是“A Quick Look”而不是“Home”，所以我点击了主菜单上的显示：

![在此处输入图像描述](../Images/dff5e6461d9d1f2fef584ed6f16ee111.png)

如何删除“主页”链接？

我曾考虑先删除 hello world 页面，然后添加我的内容，但 Orchard 似乎仍然有点粗糙，并且不想冒任何可能导致应用程序崩溃的风险，就像我经常看到的那样。就像，不要在表前缀中放一个点，否则网站会崩溃。创建租户站点时，请勿在 url 中添加“http://”，崩溃时同上。无论如何，任何建议都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:55:20.437

您可以通过 Orchard 仪表板中的导航链接管理您的菜单。只需从那里的菜单中删除额外的项目，您的菜单应该看起来像您想要的样子。

当然，如果您想安全起见，请在这样做之前进行数据库备份，即使我认为这没有必要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T01:17:13.583

先做个备份再试试。这样，你就安全了。

# mysql - SQL UPDATE 做字符串替换

> ID：10592367
> 
> 赞同：0
> 
> 时间：2012-05-14T23:33:02.890
> 
> 标签：mysql, sql

我有一些列，例如：

```
Provider            url                                                       id       
Apple               https://s3.amazonaws.com/my-bin/APPLE_MAY2011.xls         1
HP                  https://s3.amazonaws.com/my-bin/HP_MAY2011.xls            2 
```

我更改了其中一个 S3 箱，现在需要将所有行的 url 更改为：

```
Apple               https://s3.amazonaws.com/mybin/APPLE_MAY2011.xls         1
HP                  https://s3.amazonaws.com/mybin/HP_MAY2011.xls            2 
```

换句话说，我需要更改`my-bin`为`mybin`. 我将如何直接在 SQL 中执行此操作（而不是选择所有内容并迭代并为每一行执行插入操作？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T23:38:29.640

您可以使用：

```
update TABLE_NAME set url = replace(url, 'my-bin', 'mybin'); 
```

# iphone - 在文本字段中模仿 Twitter/G+ 标记功能

> ID：10592371
> 
> 赞同：0
> 
> 时间：2012-05-14T23:33:34.723
> 
> 标签：iphone, objective-c, ios, ipad

我想做一些类似于 twitter 和 g+ 在他们的应用中“标记”人时所做的事情。我不知道如何获得修饰符（如`@`或`+`）来像在这些应用程序中那样显示“自动完成”搜索。

我想用来`!`从我的数据库中提取项目列表，并允许用户只需单击这些自动完成选项之一（或继续输入）并在我的用户选择其中一个自动完成选项时创建一个“链接”。关于从哪里开始的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T02:03:06.570

虽然我不使用 G+ 或 Twitter，但有一个[控件](http://cocoacontrols.com/platforms/ios/controls/autocompletiontableview)至少提供了您希望实现的自动更正功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T01:49:29.837

这是一个理论，即未经测试，但也许您可以通过在填充有数组的光标位置周围动画视图来做到这一点......由特殊字符`@`或其他触发......然后使用字符后面的字符串进行搜索。

# service - 如何在 cloudfoundry 客户端中使用 VMC 读取 VCAP_SERVICES？

> ID：10592384
> 
> 赞同：1
> 
> 时间：2012-05-14T23:34:57.570
> 
> 标签：service, cloud-foundry, vmc

在 Cloud Foundry 中创建新服务时，我可以使用 VMC 读取凭据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:36:42.247

不，vmc（或任何其他 cloudfoundry 部署工具）中没有这样的功能。您可以做的是在服务器启动侦听器中记录环境变量的内容（取决于您使用的技术），然后使用**logs**或**files**命令读取日志

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:12:04.787

如果您使用的是 Micro Cloud Foundry，那么您可以通过 SSH 连接到实例。然后您可以看到凭据。我发现这在开发过程中很有用（即使最终目标是 cloudfoundry.com）。

例如：

```
less /var/vcap/data/dea/apps/JASPERREPORTS-SERVER-CE-0-f8799b0219bcd5e34a623c42bb5d23d8/env.log:
VMC_APP_HOST=127.0.0.1
VMC_APP_NAME=JASPERREPORTS-SERVER-CE
...
HOME=/var/vcap/data/dea/apps/JS-CE-0-f8799b0219bcd5e34a623c42bb5d23d8
no_proxy=.jaspersoft.cloudfoundry.me,127.0.0.1/8,localhost
HTTP_PROXY=
VMC_SERVICES=[{"name":"JasperServerDatabase","type":"database","vendor":"mysql","version":"5.1","tier":"free","options":{"name":"d4114c574d54145779f1e5575c306d4c7","hostname":"127.0.0.1","host":"127.0.0.1","port":3306,"user":"uxGQbYtPse5yE","username":"uxGQbYtPse5yE","password":"dOolhjtW7ZA4t"}}]
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-15T15:55:51.467

我能够使用“cf 隧道”命令来获取有关新创建服务的信息。

# javascript - 在元素的样式属性中使用 Javascript 变量

> ID：10592386
> 
> 赞同：0
> 
> 时间：2012-05-14T23:35:02.933
> 
> 标签：javascript

```
function move(direction, el) {
    el.style.direction = (el.style.direction+10)+'px';
} 
```

我有一个非常简单的函数，可以将元素在指定方向上移动 10 个像素。现在如果我使用它会出错，我想在这种情况下我不能使用方向作为变量。这是正确的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T23:37:37.917

您需要像这样访问样式属性：

```
function move(direction, el) {
    el.style[direction] = (el.style.direction+10)+'px';
} 
```

只要`direction`是一个字符串。

# syntax - 是否有类似于 Matlab 的 mlint 和 checkcode 的 Octave 语法检查器？

> ID：10592390
> 
> 赞同：11
> 
> 时间：2012-05-14T23:35:47.650
> 
> 标签：syntax, octave

我希望这样的野兽拥有与 Octave 本身相同的许可证。我查看了 Octave 选项解析器，看起来这个功能不在核心 Octave 中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T15:27:10.697

没有。截至 2012 年 9 月 23 日，它仍在项目的未来功能列表中。

[http://wiki.octave.org/Projects](http://wiki.octave.org/Projects)

“口译员”下的第十项。

# uml - 如何表示抽象类的用法？

> ID：10592393
> 
> 赞同：0
> 
> 时间：2012-05-14T23:36:53.200
> 
> 标签：uml

我有 A 类调用抽象类 B 并且 B 类返回一个对象。我如何在 UML 中表示这一点？此外，是否有显示源代码和等效 UML 图的资源？这对我有很大帮助！如果没有实际代码作为示例，我很难理解关联、聚合等的定义。

例如，

```
Class A {
    constructor {
        B = B.hello();
    }
}

Abstract Class B {
    public static hello() {
        return new C();
    }
}

Class C extends B {

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T06:32:27.907

您可以使用两个图表来展示这一点：

1.  类图：`A`与 相关`B`，并`C`扩展`B`。没有其他的。
2.  序列图：显示调用流程：有人调用`A.constructor`，然后从`A.constructor`显示调用到`B.hello`，然后创建一个新的`C`.

可以在[此处](http://www.uml-diagrams.org/)找到这些图的特定 UML 语法。

关于代码和 UML，这是有问题的，因为：

1.  并非所有 UML 元素都可以在代码中建模（多对多关系没有精确的代码转换）
2.  对于可以直接转换为代码的 UML 元素，有许多不同的实现，它们都是正确的。

我不知道有这样的网站，但它可能是一个有趣的项目......

# azure - 我们可以在代理后面使用 Azure 服务总线授权工具 (sbaztool.exe) 吗？

> ID：10592397
> 
> 赞同：0
> 
> 时间：2012-05-14T23:37:20.257
> 
> 标签：azure, servicebus

如果答案是肯定的，如何传递凭据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T06:06:38.093

答案是肯定的。它实际上是在代理之后开发的。使用 -n 设置命名空间名称，使用 -k 设置键。密钥是命名空间的管理密钥。

[http://code.msdn.microsoft.com/windowsazure/Authorization-SBAzTool-6fd76d93](http://code.msdn.microsoft.com/windowsazure/Authorization-SBAzTool-6fd76d93)

使用 storeoptions 您可以保存密钥和命名空间，这样您就不必每次都输入它们。

# java - 播放框架 2.0 中的 Cron Job

> ID：10592398
> 
> 赞同：10
> 
> 时间：2012-05-14T23:37:28.457
> 
> 标签：java, playframework, playframework-2.0

Play Framework 2.0 中如何通过 cron 表达式调度任务？

相当于Play 1的`@On("<enter cron expression here>")`注解

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-15T03:19:56.897

在 Play 2.0 中，作业调度是使用 Akka 完成的：

[http://www.playframework.org/documentation/2.0.1/JavaAkka](http://www.playframework.org/documentation/2.0.1/JavaAkka)参见**调度异步任务部分**

您还可以在应用程序启动/停止时使用全局对象执行您的操作

[http://www.playframework.org/documentation/2.0.1/JavaGlobal](http://www.playframework.org/documentation/2.0.1/JavaGlobal)

# svg - 不可见 SVG 元素上的工具提示

> ID：10592400
> 
> 赞同：2
> 
> 时间：2012-05-14T23:37:36.270
> 
> 标签：svg, d3.js, tooltip

我正在使用 d3.svg.line 在多个数据点之间画一条线。我不想显示任何东西来代表单个数据点——只是裸线——但我希望能够将鼠标悬停在线段相交的拐点上，以查看有关每个数据点的工具提示信息。

我`<g>`在每个数据点添加了一个元素`<title>`，只要我有一些可见的东西，该元素就可以很好地用于工具提示，比如`<circle>`作为`<title>`. 但如果我`<title>`直接在 下使用`<g>`，它不会显示任何内容。如果我将填充/描边设置`<circle>`为“无”，则不再出现工具提示。

有没有一种简单的方法可以让工具提示出现在特定点上而不存在任何可见元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:44:28.790

画一个透明的矩形并将工具提示放在上面吗？填充=“透明”

# c# - c# return 语句中的空引用错误

> ID：10592403
> 
> 赞同：-2
> 
> 时间：2012-05-14T23:38:04.203
> 
> 标签：c#

```
public override bool Equals(object obj)
{
    var c = obj as myObj;
    if (c == null) return false;

    return   this.Id.Equals(c.Id)
        && this.Email.Equals(c.Email)
        && this.code.Equals(c.code)
        && (this.myVal == null) ? true : (this.myVal.Equals(c.myVal))
} 
```

如图所示，这个方法应该返回一个布尔值。当“this.myVal”中的值为空时，我只想返回 true（我在上面做的）。相反，我在检查 this.myVal 时得到“对象引用未设置为对象的实例”。此错误表明 C# 编译器不关心我的“空”检查？为什么要抱怨空引用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T23:54:41.107

这个问题是由操作顺序引起的。你期待这个：

```
x && y && z && (foo == null ? true : foo.Whatever()) 
```

但你实际上得到的是：

```
(x && y && z && foo == null) ? true : foo.Whatever() 
```

将三元运算符放在括号内，以确保它以您期望的方式执行。

# android - 在所有移动设备中禁用滚动

> ID：10592411
> 
> 赞同：75
> 
> 时间：2012-05-14T23:39:13.167
> 
> 标签：android, iphone, css, mobile, scroll

这听起来应该在整个互联网上都有解决方案，但我不确定为什么我找不到它。我想在移动设备上禁用水平滚动。基本上试图实现这一点：

```
body{
   overflow-x:hidden  // disable horizontal scrolling.
} 
```

这可能是相关信息：我的 head 标签中也有这个，因为我也不希望用户能够缩放：

```
<meta content='width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;' name='viewport' />
<meta name="viewport" content="width=device-width" /> 
```

谢谢

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2014-06-24T16:54:53.897

```
html, body {
  overflow-x: hidden;
}
body {
  position: relative;
} 
```

相对位置很重要，我只是偶然发现了它。没有它就无法工作。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-05-24T14:03:03.440

cgvector 答案对我不起作用，但这确实：

```
document.body.addEventListener('touchstart', function(e){ e.preventDefault(); }); 
```

我不会就这样离开它，需要更智能的逻辑来选择何时阻止滚动，但这是一个好的开始。

取自这里： [禁用 iPhone Web 应用程序中的滚动？](https://stackoverflow.com/questions/2890361/disable-scrolling-in-an-iphone-web-application)

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-11-26T12:45:52.100

对于后代：

要防止滚动但保留上下文菜单，请尝试

```
document.body.addEventListener('touchmove', function(e){ e.preventDefault(); }); 
```

它仍然阻止的方式比某些人可能喜欢的要多，但是对于大多数浏览器来说，唯一阻止的默认行为应该是滚动。

要获得更复杂的解决方案，允许在不可滚动的主体中使用可滚动元素并防止橡皮筋，请在此处查看我的答案：

[https://stackoverflow.com/a/20250111/1431156](https://stackoverflow.com/a/20250111/1431156)

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2016-02-03T07:43:08.417

我怀疑大多数人真的想禁用缩放/滚动，以提供更像应用程序的体验；因为答案似乎包含缩放和滚动解决方案的元素，但没有人真正确定其中任何一个。

# 滚动

要回答 OP，要禁用滚动，您似乎唯一需要做的就是拦截窗口`scroll`和事件并`touchmove`调用它们生成的事件；像这样`preventDefault``stopPropagation`

```
window.addEventListener("scroll", preventMotion, false);
window.addEventListener("touchmove", preventMotion, false);

function preventMotion(event)
{
    window.scrollTo(0, 0);
    event.preventDefault();
    event.stopPropagation();
} 
```

在您的样式表中，确保您的`body`和`html`标签包括以下内容：

```
html:
{
    overflow: hidden;
}

body
{
    overflow: hidden;
    position: relative;
    margin: 0;
    padding: 0;
} 
```

# 缩放

但是，滚动是一回事，但您可能还想禁用缩放。您对标记中的元标记执行的操作：

```
<meta name="viewport" content="user-scalable=no" /> 
```

所有这些放在一起为您提供类似应用程序的体验，可能最适合画布。

（如果您使用画布，请注意某些人的建议，即在元标记中添加`initial-scale`和之类的属性，因为与块元素不同，画布会*缩放*其内容，并且您通常会得到一个丑陋的画布）。`width`

 ** * *

## 回答 #5

> 赞同：14
> 
> 时间：2013-10-21T14:06:54.503

尝试添加

```
html {
  overflow-x: hidden;
} 
```

也

```
body {
  overflow-x: hidden;
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-05-15T06:25:47.567

在风格上使用它

```
body
{
overflow:hidden;
width:100%;
} 
```

在 head 标签中使用它

```
<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0" />
<meta name="apple-mobile-web-app-capable" content="yes" /> 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2015-10-05T19:15:56.350

在页眉中，添加

```
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"> 
```

在页面样式表中，添加

```
html, body {
  overflow-x: hidden;
  overflow-y: hidden;
} 
```

它既是 html 又是正文！

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-06-13T18:20:05.463

CSS 属性**[touch-action](https://developer.mozilla.org/en-US/docs/Web/CSS/touch-action)**可能会为您提供所需的内容，尽管它[可能不适](https://caniuse.com/#feat=css-touch-action)用于所有目标浏览器。

```
html, body {
    width: 100%; height: 100%;
    overflow: hidden;
    touch-action: none;
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-11-14T01:02:52.260

将**位置**设置为相对对我不起作用。仅当我将 body 的位置设置为**fixed**时才有效：

```
document.body.style.position = "fixed";
document.body.style.overflowY = "hidden";
document.body.addEventListener('touchstart', function(e){ e.preventDefault()}); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-10-29T22:40:18.177

这对我有用：

```
window.addEventListener("touchstart", function(event){
             if(event.target.tagName=="HTML" || event.target.tagName=="BODY"){
                     event.preventDefault();
             }
} ,false); 
```

它不能 100% 工作，我还添加了这个：

```
window.addEventListener("scroll",function(){
    window.scrollTo(0,0)
},false) 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-08-08T12:22:35.680

在尝试所有答案都没有成功后，我设法通过简单地添加以下内容来关闭我的移动滚动：

```
html,
body {
  overflow-x: hidden;
  height: 100%;
}

body {
  position: relative;
} 
```

重要的是`%`不要`vh`为此使用。这`height: 100%`是我一直想念的东西，疯了。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-06-02T05:08:14.193

对于 Apple 设备`position: relative`不起作用。以下代码适用于所有设备：

```
html, body {
  overflow: hidden;
  position: fixed;
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-07-29T03:09:45.273

我参加聚会迟到了，但我添加了这个答案，因为我尝试过的其他任何事情都没有在我的特定情况下起作用。捕获 touchmove、scroll 等事件的组合没有任何效果，并且 position: relative 在身体上使一切都消失了。

我发现我必须在 HTML 和 BODY 元素上添加 height: 100% 。可能并非所有以下规则都是必需的，但我花了足够长的时间才偶然发现这个神奇的组合并且它似乎有效。

```
html {
    height: 100%;
    overflow: hidden;
}
body{
    margin: 0;
    overflow: hidden;
    height: 100%;
    position: relative;
} 
```

除此之外，我在 HTML 头中还有以下内容：

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

我的应用大量使用了绝对位置元素，其中一些元素在不同的时间部分在屏幕外，因为它们滑出视野。结果，body 元素中没有任何内容可以给 body 任何区域/大小。

我发现移动设备上发生的“滚动”是由于浏览器不知道页面大小的范围，以便进行视口（缩放到设备宽度）计算。似乎高度为 0px 的主体无法向浏览器传达页面的高度或宽度，因此将主体的高度设置为 100% 是解决方案的关键。

编辑：找到我的解决方案后再次查看答案，我意识到“Toms Codery”的另一个答案与我的解决方案基本相同，尽管他只是在 x 方向。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-02-22T22:08:10.653

最**简单的方法，***仅使用 CSS*代码就非常简单：

```
body, html {
    overflow-x: hidden;
    position: relative;
}
```

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2015-08-31T13:55:04.867

以下对我有用，尽管我没有测试要测试的每一个设备:-)

```
$('body, html').css('overflow-y', 'hidden');
$('html, body').animate({
    scrollTop:0
}, 0); 
```*

# google-sheets - 如何访问运行嵌入在共享电子表格中的脚本的用户的名称？

> ID：10592416
> 
> 赞同：1
> 
> 时间：2012-05-14T23:39:37.677
> 
> 标签：google-sheets, google-apps-script

我有一个包含我编写的脚本的 Google 电子表格。该脚本会更新以登录用户命名的每人工作表，如果还没有，则创建一个新工作表。

我以“可以编辑”模式与其他人共享它，期望访问用户名的代码能够像我的情况一样工作，但显然它没有。

Google Apps Script 似乎包含三种获取当前用户名称的方法：

*   `Session.getActiveUser()`
*   `Session.getEffectiveUser()`
*   `Session.getUser()`

当我不是运行脚本的用户时，它们都返回空字符串。

（顺便说一句，我很难说出它们之间的区别......）

考虑到我以读/写模式共享此电子表格，如果这是一种预期的安全方法，我会有点惊讶……这并不是说我不知道​​访问电子表格的人的电子邮件我已经明确与他们共享...另外，谷歌无论如何都在请求许可，难道它也不能请求访问用户名的许可吗？

有没有解决的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T00:02:03.330

> 有没有解决的办法？

仅当您使用 Google Apps 帐户并且您与用户位于同一域中时，这些方法才有效。如果没有，则无法获取用户 ID。AFAIK Google 为普通帐户完全删除了此功能。你可以试着和他们争论，[在这里](http://code.google.com/p/google-apps-script-issues/issues/list)打开一个问题。

# c# - SignalR 长轮询默默地死了

> ID：10592417
> 
> 赞同：0
> 
> 时间：2012-05-14T23:39:54.157
> 
> 标签：c#, signalr

我在 SignalR 中开发了一个聊天类型的应用程序，但我遇到了 MSIE 问题。

通常 SignalR 保持与服务器的长轮询连接打开，并大约每两分钟刷新一次。我所看到的是，这个 XHR 调用只是死掉并且不会重新连接——仅在 MSIE 上。FireFox 和 Chrome 运行良好。

我尝试在客户端实现断开连接事件以解决该问题，但它永远不会触发（在任何浏览器上），即使我强制断开连接条件也是如此。("$.connection.hub.disconnected = function() { alert('bye!'); };")

那里的任何 SignalR 大师都可以告诉我在哪里看吗？在这一点上，我的选择是从系统中重构 SignalR 或花大量时间处理源代码......这两种选择都不是一个好的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T16:56:38.310

如果您阻止在 Javascript SignalR 中运行的单个线程，则无法继续进行长轮询（如果选择了该传输）。不要阻塞事件循环:)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T10:50:11.090

您是在 Visual Studio 中还是在 IIS 上运行您的应用程序？我在 Cassini 上运行时遇到了类似的问题，但在 IIS 上运行正常。

# c++ - 模板内的 C++ 初始值设定项列表

> ID：10592418
> 
> 赞同：4
> 
> 时间：2012-05-14T23:39:57.910
> 
> 标签：c++, templates, c++11, initializer-list

我想更多地了解 C++11，所以我编写了我所知道的最简单的 initializer_list 测试，但是在模板内部，这是一个“免费”函数，每次编译时都会出现此错误（clang++ 用于漂亮的格式化）

```
/home/alex/repo/mine/mlcppl/test/utiltest1.cc:16:3: error: no matching function for call to 'makevec'
mlcppl::makevec<string> ({"alex", "herrmann"}); 
```

这是代码：

```
namespace mlcppl{
 template<typename Tp> vector<Tp> makevec (initializer_list<Tp> initlist)
 {
   vector<Tp> vt;
   for(Tp x : initlist)
     {
       vt.insert(vt.end(), x);
     }
  return vt;
  }
 } 
```

这就是它的名字：

```
#include <util.hh>
int main()
{
  vector<string> vc;
  vc = makevec<string> ({"alex", "herrmann"});
  return 0;
} 
```

我不知道为什么会发生这种情况，有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T23:50:42.653

这适用于 g++（Ideone）：

```
#include <vector>
#include <string>

template<typename Tp> std::vector<Tp> makevec (std::initializer_list<Tp> initlist) { return initlist; }

int main() { makevec<std::string> ({"alex", "herrmann"}); } 
```

哪个铿锵++？

# javascript - 原型是否在不使用 var 的情况下创建了变量？

> ID：10592419
> 
> 赞同：0
> 
> 时间：2012-05-14T23:40:09.040
> 
> 标签：javascript

```
Blog.prototype.signature = "TEXT" 
```

这里的语句是否创建了一个签名变量？

因为该语句中没有**var 关键字**。

**还有附加问题**

为什么需要使用函数字面量或函数引用在对象的原型中创建函数？

前任。这行不通....

```
obj.prototype.toString{

    return "dfasdfa";

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T23:44:23.880

> 这里的语句是否创建了一个签名变量？

不，它在类的原型上设置了一个属性`Blog`。

> 为什么需要使用函数字面量或函数引用在对象的原型中创建函数？

因为您需要为属性分配一些东西`obj.prototype.toString`。您必须将其设置为等于某些东西（在本例中为函数），而您没有对显示的代码片段执行此操作。

**例子：**

```
obj.prototype.toString = function() {
    return "dfasdfa";
} 
```

请注意，您实际上是在使用该`= function`位为该属性分配一个值。然后您稍后继续声明该函数。

# user-interface - GUI 布局问题 [仍然需要帮助]

> ID：10592421
> 
> 赞同：0
> 
> 时间：2012-05-14T23:40:21.057
> 
> 标签：user-interface, layout, jpanel, grid-layout

我不知道如何进行如下布局： ![在此处输入图像描述](../Images/8de8251df53648d48541ba1a2e55132b.png)

原谅我写的很烂。我的平板电脑无处可寻，所以我不得不使用鼠标。无论如何，我只是想知道如何用我的井字游戏正确地做类似的事情。

我已经得到了应该在的网格，但我这辈子也无法在屏幕上获得标题。我也想知道如何做一个简单的纯色条，如图所示。我也尝试过，但它不会总是出现。有时它会闪烁，有时它会闪烁然后消失，或者根本不出现。

我会说这可能与我设置布局的方式有关，但我不知道如何做网格。哦！我还想，如果我弄清楚整个面板添加到框架的事情出了什么问题，我可能会弄清楚为什么当您尝试单击已占用的按钮时应该显示的红色错误文本没有出现。我很确定这是同样的问题。

这是我的代码：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Code implements ActionListener {

JFrame frame = new JFrame ("Tic-Tac-Toe");

JLabel title = new JLabel ("Tic-Tac-Toe"); //displayed title of the program
JLabel error = new JLabel (""); //label that says error if you make a move on a
//non-blank button

JPanel titlestrip = new JPanel (); //the strip behind the title
JPanel bgpanel = new JPanel (); //the background panel that fills up the window
JPanel bgpanel2 = new JPanel (); //second bg panel with no layout 
JPanel buttonpanel = new JPanel(); //the panel that holds the nine buttons

JButton one = new JButton ("");
JButton two = new JButton ("");
JButton three = new JButton ("");
JButton four = new JButton ("");
JButton five = new JButton (""); 
JButton six = new JButton ("");
JButton seven = new JButton ("");
JButton eight = new JButton ("");
JButton nine = new JButton ("");

GridBagConstraints x = new GridBagConstraints ();

static String symbol = ""; //stores either an X or an O when the game begins
static int count = 0; //hidden counter; even for one player & odd for the other

public Code() {
    Code();
}

private void Code(){
    titlestrip.setLayout(null);
    titlestrip.setBackground(new Color (0x553EA5)); //color of the strip behind                                        title
    titlestrip.setLocation (98,5);
    titlestrip.setSize (400, 50);

    title.setFont(new Font("Rockwell Extra Bold", Font.PLAIN, 48)); //font settings
    title.setForeground(new Color (0x10CDC6)); //title color

    bgpanel.setBackground(new Color(0x433F3F)); //background color
    bgpanel.setLayout(FlowLayout());

    bgpanel2.setBackground(new Color(0x433F3F)); 

    frame.setVisible (true);
    frame.setSize (500,500);
    frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);

    buttonpanel.setLayout (new GridLayout(3,3));
    buttonpanel.add(one);
    buttonpanel.add(two);
    buttonpanel.add(three);
    buttonpanel.add(four);
    buttonpanel.add(five);
    buttonpanel.add(six);
    buttonpanel.add(seven);
    buttonpanel.add(eight);
    buttonpanel.add(nine);
    buttonpanel.setSize (200,200);
    buttonpanel.setLocation(150, 150);

    one.addActionListener(this);
    two.addActionListener(this);
    three.addActionListener(this);
    four.addActionListener(this);
    five.addActionListener(this);
    six.addActionListener(this);
    seven.addActionListener(this);
    eight.addActionListener(this);
    nine.addActionListener(this);

    bgpanel.add(buttonpanel);
    bgpanel2.add(title);

    x.gridx = 150;
    x.gridy = 400;
    bgpanel2.add(error, x);

    frame.add(bgpanel2);
    frame.add(bgpanel); 
}
private LayoutManager FlowLayout() {
    // TODO Auto-generated method stub
    return null;
}
//- - - - - - - - - - - - - - - - - - [ END ] - - - - - - - - - - - - - - - - - - - //
//- - - - - - - - - - - - - - - - - -[ LAYOUT ] - - - - - - - - - - - - - - - - - - - //
public static void main(String[] args) {
    new SummativeCode();
}
//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - //
//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - //
public void actionPerformed(ActionEvent e){
    count = count + 1;
    String text = (String)e.getActionCommand(); //stores the kind of text in the button pressed
    //Checks which player is making a move
    if (count %2 == 0){
        symbol = "X";
    }
    else {
        symbol = "O";
    }

    //- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - //
    //- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - //
    //sets the text in the button with an X or an O depending on whose turn it is
    if (e.getSource() == one){
        if (text.equals("")){ //if text is blank, do the following
            one.setText(symbol);
        }
        else { //if it's not blank, display error
            error.setText("This is an occupied button. Please choose again.");
            error.setForeground(Color.red);
        }
    }
    if (e.getSource() == two){
        if (text.equals("")){
            two.setText(symbol);
        }
        else {
            error.setText("This is an occupied button. Please choose again.");
            error.setForeground(Color.red);
        }
    }
    if (e.getSource() == three){
        if (text.equals("")){
            three.setText(symbol);
        }
        else {
            error.setText("This is an occupied button. Please choose again.");
            error.setForeground(Color.red);
        }
    }
    if (e.getSource() == four){
        if (text.equals("")){
            four.setText(symbol);
        }
        else {
            error.setText("This is an occupied button. Please choose again.");
            error.setForeground(Color.red);
        }
    }
    if (e.getSource() == five){
        if (text.equals("")){
            five.setText(symbol);
        }
        else {
            error.setText("This is an occupied button. Please choose again.");
            error.setForeground(Color.red);
        }
    }
    if (e.getSource() == six){
        if (text.equals("")){
            six.setText(symbol);
        }
        else {
            error.setText("This is an occupied button. Please choose again.");
            error.setForeground(Color.red);
        }
    }
    if (e.getSource() == seven){
        if (text.equals("")){
            seven.setText(symbol);
        }
        else {
            error.setText("This is an occupied button. Please choose again.");
            error.setForeground(Color.red);
        }
    }
    if (e.getSource() == eight){
        if (text.equals("")){
            eight.setText(symbol);
        }
        else {
            error.setText("This is an occupied button. Please choose again.");
            error.setForeground(Color.red);
        }
    }
    if (e.getSource() == nine){
        if (text.equals("")){
            nine.setText(symbol);
        }
        else {
            error.setText("This is an occupied button. Please choose again.");
            error.setForeground(Color.red);
        }
    }
}   
} 
```

感谢您的帮助并原谅我可能糟糕的编码逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T02:43:13.340

您发布的代码有几个问题：

*   Swing 组件只能从 Event Dispatch Thread 访问。请参阅[初始线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)和[事件调度 Thead](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)
*   没有设置布局`frame`，所以默认为 BorderLayout。您应该添加`bgpanel`and`bgpanel2`和`add(bgpanel, BorderLayout.CENTER)`and `add(bgpanel2, BorderLayout.NORTH)`。`add(component)`默认为`CENTER`so`bgpanel`替换，`bgpanel2`第二个面板永远不会渲染。
*   在`actionPerformed`您为每个按钮重复相同的操作序列时。这通常表明您应该引入一个功能来完成重复性工作。

话虽如此，你在这里所拥有的对于新手代码来说实际上是相当不错的。继续努力，欢迎来到 Java！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T23:54:53.987

对于游戏，通常最好覆盖绘画（图形）。

在方法中使用以下伪代码：

```
setColor(backColor);
drawRect(0,0,width,height);
setColor(foreColor);
drawRect(0,0,width,150); // I'm just guessing that your top is 150 pixels
drawImage(bufferedTTT,Op,width/2-bufferedTTT.width/2, 15) // to center the heading, you can use drawText, but it would be a lot harder for the same effect
setColor(black)
drawLine(...)
... // draw Lines for TTT board. 
```

![图片加载失败。](../Images/e7bd9a15c12d3be0352e2af012289f3f.png)

# javascript - 如何检测 Firefox 中的当前页面是否以“无样式”视图呈现？

> ID：10592422
> 
> 赞同：0
> 
> 时间：2012-05-14T23:40:59.077
> 
> 标签：javascript, firefox

Firefox 支持“无样式”视图模式，该模式去除网页中的所有 CSS 样式。有什么方法可以检测当前页面是否使用“无样式”模式呈现？最好在 JavaScript 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T23:46:02.143

不，但是您可以通过将元素的样式设置为某个已知值，然后在页面加载后使用 JavaScript 检查该值来实现梦想。如果这不是您所期望的，那么您*可能*处于您提到的场景中。

```
<div id="no-style"></div> 
```

...CSS：

```
#no-style { z-index:100; } 
```

然后检查页面加载时的 z-index 值。等于100吗？

干杯

# jquery - 运行 jquery 时出现可点击链接的问题

> ID：10592428
> 
> 赞同：2
> 
> 时间：2012-05-14T23:42:14.457
> 
> 标签：jquery

我们在两个地方设置了一些有趣的 jquery 添加： [http://artsygeek.com.s141242.gridserver.com/565（404](http://artsygeek.com.s141242.gridserver.com/565) 错误页面） [http://artsygeek.com.s141242.gridserver.com/services/魔法](http://artsygeek.com.s141242.gridserver.com/services/magic)

顶部菜单仍然正常运行，但内容和页脚中的链接未显示为可点击！

魔法页面最后一句是链接，404错误页面的ul应该都是可点击的链接。

我们完全感到困惑。任何帮助，将不胜感激！

谢谢，詹妮弗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T23:46:48.967

你有一个 div 覆盖你的内容。将此添加到您的代码中，在第`style.css`85 行的文件中：

```
#lefthalf {
   z-index: -1;
} 
```

在此之后它将正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T23:48:49.683

这个问题是`<div id="lefthalf"></div>`覆盖链接。如果您更改该元素的 CSS 样式（z-index、大小等），使其不再与其他项目重叠，则所有链接都将再次可点击。本质上，DIV 位于它们的顶部，因此它们*似乎*只是不可点击的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T23:53:34.877

您的页脚与 重叠`lefthalf div`。

您可以添加它`#colophon`来解决问题

```
#colophon {
      position:relative;
      z-index:199;

} 
```

# c# - 如何检测用户何时切换到登录屏幕？

> ID：10592431
> 
> 赞同：3
> 
> 时间：2012-05-14T23:42:46.763
> 
> 标签：c#, wpf, windows-7, login

我需要知道用户何时切换到登录屏幕（由 ctrl-alt-del 触发）[以规避 WPF 中的一个讨厌的错误](https://connect.microsoft.com/VisualStudio/feedback/details/602232/when-using-cachemode-bitmapcache-upon-waking-up-from-sleep-wpf-rendering-thread-consumes-40-cpu#tabs)。我想通过在从登录屏幕返回后重新初始化我的 GUI 来解决这个错误。目前它可以工作，但我必须手动触发它。

我找到[了 SystemEvents.SessionSwitch](https://stackoverflow.com/a/652574/590790)，但不幸的是，这仅在注销时触发。

如何通过形成 ctrl-alt-del 来检测登录屏幕何时显示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T23:52:33.170

棘手的是，这不是会话更改，而只是桌面更改。特别是，Ctrl+Alt+Del 切换到与 Winlogon 关联的安全桌面。

我不认为你真的*应该*检测到这种事情（也就是说，毕竟，拥有“安全桌面”的全部意义），但你可能可以使用 Active Accessibility 钩子来做到这一点。调用该[`SetWinEventHook`函数](http://msdn.microsoft.com/en-us/library/windows/desktop/dd373640.aspx)为事件安装事件挂钩[`EVENT_SYSTEM_DESKTOPSWITCH`并](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318066.aspx)查看您收到的通知。

为此，您需要执行以下操作：

*   确保您在客户端线程上发送消息循环以接收事件通知。对于标准的 WPF 应用程序，这应该不是问题。
*   `WINEVENT_OUTOFCONTEXT`考虑到您正在使用托管代码，请确保指定标志。您不希望系统尝试将包含回调函数的 DLL 注入每个进程。相反，这将导致回调函数从队列中异步调用；从托管代码的土地上安全得多。
*   一点点 P/Invoke 魔法。为了让你开始……

    ```
    const uint WINEVENT_OUTOFCONTEXT = 0x0;
    const uint EVENT_SYSTEM_DESKTOPSWITCH = 0x0020;

    [DllImport("user32.dll")]
    static extern IntPtr SetWinEventHook(uint eventMin,
                                         uint eventMax,
                                         IntPtr hmodWinEventProc,
                                         WinEventDelegate lpfnWinEventProc,
                                         uint idProcess,
                                         uint idThread,
                                         uint dwFlags);

    delegate void WinEventDelegate(IntPtr hWinEventHook,
                                   uint event,
                                   IntPtr hwnd,
                                   int idObject,
                                   int idChild,
                                   uint dwEventThread,
                                   uint dwmsEventTime);

    [DllImport("user32.dll")]
    static extern bool UnhookWinEvent(IntPtr hWinEventHook); 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T18:55:27.877

似乎调用了开始显示登录屏幕的过程`LogonUI.exe`。

使用[Windows Management Instrumentation (WMI) 基础](http://msdn.microsoft.com/en-us/library/system.management.aspx)结构，您可以侦听启动和关闭的进程。您将需要引用`System.Management`程序集。

```
var interval = new TimeSpan( 0, 0, 1 );
const string isWin32Process = "TargetInstance isa \"Win32_Process\"";

// Listen for started processes.
WqlEventQuery startQuery
    = new WqlEventQuery( "__InstanceCreationEvent", interval, isWin32Process );
_startWatcher = new ManagementEventWatcher( startQuery );
_startWatcher.Start();
_startWatcher.EventArrived += OnStartEventArrived;

// Listen for closed processes.
WqlEventQuery stopQuery
    = new WqlEventQuery( "__InstanceDeletionEvent", interval, isWin32Process );
_stopWatcher = new ManagementEventWatcher( stopQuery );
_stopWatcher.Start();
_stopWatcher.EventArrived += OnStopEventArrived; 
```

处理这些事件，您可以获得有关已启动或已关闭进程的信息。通过这种方式，您可以验证何时`LogonUI.exe`关闭，并随后触发所需的操作。

```
void OnStopEventArrived( object sender, EventArrivedEventArgs e )
{
    var o = (ManagementBaseObject)e.NewEvent[ "TargetInstance" ];
    string name = (string)o[ "Name" ];

    ...
} 
```

# java - 子目录中的 JSP 标记文件，使用单个 taglib 前缀。那可能吗？

> ID：10592434
> 
> 赞同：12
> 
> 时间：2012-05-14T23:43:32.370
> 
> 标签：java, jsp, jsp-tags, taglib

我目前有我的 .tag 文件声明：

```
<%@taglib prefix="t" tagdir="/WEB-INF/tags" %> 
```

标记文件的路径示例：

```
/WEB-INF/tags/test.tag 
```

我像这样使用它们：

```
<t:test oneAttributeKey="oneAttributeValue">
   some content...
</t:test> 
```

**我的问题**：我不想将所有标签文件放在*一个*文件夹“/WEB-INF/tags”中。

我希望将它们放在不同的子目录中：

/WEB-INF/标签/用户/

/WEB-INF/tags/widgetsA/

/WEB-INF/tags/widgetsB/

(...)

这是否可能，*无需为每个人创建不同的 taglib 前缀*？

我想避免的例子：

```
<%@taglib prefix="t_users" tagdir="/WEB-INF/tags/users" %>
<%@taglib prefix="t_widgetsA" tagdir="/WEB-INF/tags/widgetsA" %>
<%@taglib prefix="t_widgetsB" tagdir="/WEB-INF/tags/widgetsB" %> 
```

我想要的示例，使用单个“t”前缀：

```
<t:users/onetag oneAttributeKey="oneAttributeValue">
   some content...
</t:users/onetag> 
```

是否存在类似的解决方案？

**更新**：BalusC 表明，通过在单个 .tld 中定义所有标记文件，可以只使用一个前缀。我想我的问题还不够清楚：我想知道是否可以在多个子目录中使用标签文件，而不必在*任何地方*指定每个标签文件的路径，除了在使用它们的元素中（例如：“ <t:users/onetag")!

我不喜欢 JSP 标记的一点是，它们的行为与常规 JSP 文件非常不同，即使它们实际上共享非常相似的内容。事实上，我什至决定将我所有的 jsp 文件放在 /WEB-INF/tags/ 文件夹中，这样它们就与标签文件并排（我必须为此选择 /WEB-INF/tags/，因为这出于某种原因，标签文件的文件夹是必需的）！我不明白为什么我的一些包含 HTML 的文件会进入 /WEB-INF/jsp/ 而其他一些文件会进入 /WEB-INF/tags/！！

我希望能够将 jsp 和标记文件*分组*到目录中，具体取决于它们的相关内容！例子 ：

```
 /WEB-INF/tags/users/userProfileLayout.tag
 /WEB-INF/tags/users/employeeProfile.jsp
 /WEB-INF/tags/users/employerProfile.jsp

 /WEB-INF/tags/widgetsA/widgetALayout.tag
 /WEB-INF/tags/widgetsA/oldWidgetA.jsp
 /WEB-INF/tags/widgetsA/newWidgetA.jsp 
```

但这迫使我在多个@tablib 或.tld 中声明每个子目录的路径，我觉得这有点不方便。我会忍受它，但我认为它可以改进。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-15T02:38:25.150

将它们定义为放在文件夹`<tag-file>`中的单个`.tld`文件中`/WEB-INF`。

例如`/WEB-INF/my-tags.tld`

```
<?xml version="1.0" encoding="UTF-8" ?>
<taglib 
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-jsptaglibrary_2_1.xsd"
    version="2.1"
>    
    <display-name>My custom tags</display-name>    
    <tlib-version>1.0</tlib-version>
    <short-name>my</short-name>
    <uri>http://example.com/tags</uri>

    <tag-file>
        <name>foo</name>
        <path>/WEB-INF/tags/users/foo.tag</path>
    </tag-file>

    <tag-file>
        <name>bar</name>
        <path>/WEB-INF/tags/widgetsA/bar.tag</path>
    </tag-file>

    <tag-file>
        <name>baz</name>
        <path>/WEB-INF/tags/widgetsB/baz.tag</path>
    </tag-file>
</taglib> 
```

在您的 JSP 中使用它，如下所示

```
<%@taglib prefix="my" uri="http://example.com/tags" %>
...
<my:foo />
<my:bar />
<my:baz /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-16T15:56:06.640

我遵循的一种模式，即使没有直接解决 OP 的问题，我发现它使整个情况变得不那么痛苦，它创建了一个 JSP 片段，我在其中定义了所有标记库：

**/WEB-INF/views/taglibs.jspf**

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>

<%@ taglib prefix="layout" tagdir="/WEB-INF/tags/layout" %>
<%@ taglib prefix="t_users" tagdir="/WEB-INF/tags/users" %>
<%@ taglib prefix="t_widgetsA" tagdir="/WEB-INF/tags/widgetsA" %>
<%@ taglib prefix="t_widgetsB" tagdir="/WEB-INF/tags/widgetsB" %> 
```

然后在每个 JSP 文件的顶部包含这个 JSP 片段：

**/WEB-INF/views/users/employeeProfile.jsp**

```
<%@ include file="/WEB-INF/views/taglibs.jspf" %>

<layout:main>
    <h1>Employee Profile</h1>
    ...
</layout:main> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-25T06:49:56.140

应该管用。指定 tag-dir 值下的文件夹名称成为您将使用的标签名称的连字符分隔部分。

# ssas - ssas 多维数据集中的百万行维度

> ID：10592439
> 
> 赞同：2
> 
> 时间：2012-05-14T23:44:12.400
> 
> 标签：ssas, olap, cube, ssas-2008, cube-dimension

我的多维数据集中有一个大维度，有 500 万行。当我在 excel 中拖动该维度列以查看指标值时，它会超时。有什么方法可以动态限制数据或在 excel 中提取大尺寸时仅选择前 10K 行？或任何其他最好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T12:44:50.943

您不应该允许浏览该属性。想一想，谁会在 500 万其他人中寻找特定的一行？

在这种情况下的最佳实践，并不是我说我从 Microsoft MVP 那里听到的，它是将属性添加到层次结构并将`AttributeHierarchyVisible`属性设置为 false。它将对最终用户隐藏属性。你仍然可以在 MDX 上使用它，它仍然出现在层次结构中，你只是不能单独浏览它。

# javascript - Safari 中的 float64array

> ID：10592444
> 
> 赞同：2
> 
> 时间：2012-05-14T23:44:43.703
> 
> 标签：javascript, jquery, safari

我在[我的 webapp和 chrome 和 firefox 中使用](http://sw.webcrumpet.com)[speakjs](https://github.com/kripken/speak.js) ，它运行时没有错误，但是在 safari 中尝试运行 speakjs 客户端时，我收到以下错误：

```
ReferenceError: Can't find variable: Float64Array 
```

我试图通过 js 搜索并替换`Float64Array`为`Float32Array`但无济于事。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T05:26:07.813

将 Safari 更新到当前版本。它实现`Float64Array`.

我没有让 Safari 5.x 与使用它的代码一起工作的答案。我目前正在为此苦苦挣扎。

更新：幸运的是，我的 Float64Array 用例来自 emscripten box2d 构建。简单地替换`Float64Array`为`Float32Array`我对 Safari 5 的诀窍！它也适用于旧版本的 Firefox（我测试了 10 版）。

# google-app-engine - Google App Engine 应用程序中的 META-INF 文件夹

> ID：10592445
> 
> 赞同：0
> 
> 时间：2012-05-14T23:44:48.143
> 
> 标签：google-app-engine, jpa, struts2

我在 Google App Engine 的 Struts 2 中使用 Java Persistence API 做了一个项目。persistence.xml 文件应该在 META-INF 文件夹中。我在哪里可以找到 META-INF 文件夹？我应该在哪里保存 persistence.xml 文件。我使用 Eclipse 作为我的开发环境。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T23:52:15.013

META-INF 文件夹应该位于 MyProject/src 目录下，例如：

```
MyProject/
  src/
    META-INF/
      jdoconfig.xml
    log4j.properties
    logging.properties
  war/
    WEB-INF/
      lib/
        ...App Engine JARs...
      appengine-web.xml
      web.xml
    index.html 
```

# jquery - jQuery 模态表单内容到 mysql 列不能为空

> ID：10592446
> 
> 赞同：0
> 
> 时间：2012-05-14T23:44:56.107
> 
> 标签：jquery, mysql, ajax

我收到此错误：“用户名”列不能为空。

首先，我使用的是 jQuery UI。我制作了一个用于注册用户的模态表单。这是从我的 JS 中提取的：

```
if ( bValid ) {
    var form = $('#register_form');  
    var data = form.serialize();  
    $.post('index.php?section=register', data, function(response) { 
            alert(response);
            $( "#dialog_create_user_ok" ).dialog( "open" );
    });  
    $( this ).dialog( "close" );
} 
```

这似乎运作良好。用萤火虫检查了它，我得到了正确的帖子值。用户名=...&密码=...

现在从我的 register.php 中提取，它由 section=register 定义（使用教程）：

```
if ('POST' == $_SERVER['REQUEST_METHOD']) {
    if (!isset($_POST['Username'], $_POST['Password'])) {
        return INVALID_FORM;
    }
    //Check for already existing User
    $sql = 'SELECT
                ID
            FROM
                User
            WHERE
                Username = ?
            LIMIT
                1';
    $stmt = $db->prepare($sql);
    if (!$stmt) {
        return $db->error;
    }
    $stmt->bind_param('s', $Username);
    $stmt->execute();
    $stmt->store_result();
        if ($stmt->num_rows) {
        return 'User already exists.';
    }
    $stmt->close();
    //Add User
    $sql = 'INSERT INTO
                User(Username)
            VALUES
                (?)';
    $stmt = $db->prepare($sql);
    if (!$stmt) {
        echo "hier bin ich";
        return $db->error;
    }
    $stmt->bind_param('s', $Username);
    if (!$stmt->execute()) {
        return $stmt->error;
    }
    $UserID = $stmt->insert_id;
    //Update password for User
    $sql = 'UPDATE
                User
            SET
                Password = ?
            WHERE
                ID = ?';
    $stmt = $db->prepare($sql);
    if (!$stmt) {
        return $db->error;
    }
    $Hash = md5(md5($UserID).$Password);
    $stmt->bind_param('si', $Hash, $UserID);
    if (!$stmt->execute()) {
        return $stmt->error;
    }
    return showInfo('Added user.');
}
return $ret; 
```

这真的很奇怪。这段代码今天对我有用。然后我不得不更改文件夹以获得更好的结构，现在这个。

顺便提一句。这是我的表用户（ID = 主键）：！ [http://imageshack.us/photo/my-images/823/unbenanntjfz.jpg/](http://imageshack.us/photo/my-images/823/unbenanntjfz.jpg/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T01:48:03.833

看起来您的代码绑定`$Username`到您的 MySQL 语句，从提供的代码中未定义。

也许你的意思是绑定`$_POST['Username']`？稍后`$Password`在脚本中也是如此。

# c# - 我可以在运行时更改 Silverlight 的浏览器外设置吗？

> ID：10592447
> 
> 赞同：7
> 
> 时间：2012-05-14T23:44:58.487
> 
> 标签：c#, silverlight, silverlight-oob

我有一个可以以各种配置安装 OOB SL5 应用程序的代码库。根据运行时的配置（由初始化参数选择），我想在执行安装之前更新 OOB 设置（标题、窗口标题）。似乎唯一的方法是在编译时通过 OutOfBrowserSettings.xml 文件（或项目设置 UI）。我错过了什么还是这就是它的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:46:08.887

根据 MSDN，您可以做到这一点。

> 要在不重新编译的情况下为现有应用程序配置浏览器外支持，请将配置 XML 添加到现有 .xap 文件中的清单中。为此，请将以下示例代码中的 Deployment.OutOfBrowserSettings 属性元素复制到清单文件中，然后更新值。
> 
> 作为设计器的替代方案，您可以通过填充清单模板（Properties 或 My Project 文件夹中的 AppManifest.xml）来指定浏览器外设置，如下例所示。默认情况下，构建使用清单模板来生成应用程序清单。但是，模板 XML 在 Visual Studio 中使用起来更简单。

来源： http: [//msdn.microsoft.com/en-us/library/dd833073 (v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/dd833073(v=vs.95).aspx)

请记住，*.xap 文件是一个简单的 zip。因此，您可以将其提取、修改，然后再次压缩。自动化似乎很简单。

您还可以通过实现自己的 chrome 窗口在运行时更改应用程序的标题（我不知道如何更改图标或描述，但我认为这无论如何都没有意义）。对于示例实现，请遵循[此](http://www.codeproject.com/Articles/68955/Silverlight-4-How-Can-I-Create-a-Customized-OOB-Wi)

要本地化标题，您必须将标题的值更改为绑定，并将其绑定到您的资源（所有代码都是来自上面链接的示例项目的一些自定义）：

MainPage.xaml：

```
<UserControl
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:local="clr-namespace:Silverlight4.OOB.ChromelessWindow.Demo" x:Class="Silverlight4.OOB.ChromelessWindow.Demo.MainPage"
mc:Ignorable="d"
d:DesignHeight="300" d:DesignWidth="400" MinWidth="400" MinHeight="300">
<Grid x:Name="LayoutRoot" Background="White">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition/>
    </Grid.RowDefinitions>        
    <Border BorderBrush="Black" BorderThickness="1" Margin="0,-25,0,0" Grid.Row="1"/>
    <local:ControlBar x:Name="ucControlBar" VerticalAlignment="Top" Title="{Binding Source={StaticResource resxWrapper}, Path=Title}"></local:ControlBar>
    <Border BorderBrush="Black" BorderThickness="1" CornerRadius="10" Grid.Row="1" Margin="10">
        <Border.Background>
            <LinearGradientBrush EndPoint="0.5,1" MappingMode="RelativeToBoundingBox" StartPoint="0.5,0">
                <GradientStop Color="#FFFDC97A"/>
                <GradientStop Color="White" Offset="0.5"/>
                <GradientStop Color="#FFFDC97A" Offset="1"/>
            </LinearGradientBrush>
        </Border.Background>

    </Border>
    <ComboBox SelectionChanged="ComboBox_SelectionChanged" Grid.Row="1" Height="20">
        <ComboBoxItem Content="pl-PL" />
        <ComboBoxItem Content="en-GB" />
    </ComboBox>
    <TextBlock x:Name="txtTitle" HorizontalAlignment="Center" Grid.Row="1" TextWrapping="Wrap" VerticalAlignment="Top" FontSize="32" Text="Silverlight 4 Custom Out-Of-Browser Window Demo" Margin="10" TextAlignment="Center" Foreground="#FF5A098F"/>
    <TextBlock x:Name="txtInfo" HorizontalAlignment="Center" Grid.Row="1" TextWrapping="Wrap" Text="You are running inside Browser Window" VerticalAlignment="Bottom" Margin="10" FontSize="24" TextAlignment="Center"/>        
</Grid> 
```

添加文件 ResourceMock.cs：

```
 public class ResourceMock:INotifyPropertyChanged
{
    public string Title
    {
        get
        {
            MessageBox.Show(Thread.CurrentThread.CurrentCulture.Name);
            switch (Thread.CurrentThread.CurrentCulture.Name)
            {
                case "en-GB": return "English"; break;
                case "pl-PL": return "Polish"; break;
                default: return "default";
                    break;
            }
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
    public void firePropertyChanged(string property)
    {
        OnPropertyChanged(property);
    }
} 
```

MainPage.xaml.cs：

```
public partial class MainPage : UserControl
{
    public MainPage()
    {
        InitializeComponent();

        if (App.IsRunningOOBWithPermission)
        {
            txtInfo.Text = "You are running outside Browser Window.";
        }
        else
        {
            txtInfo.Text = "You are running inside Browser Window.";
        }
    }

    private void ComboBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        var cultrue = (e.AddedItems[0] as ComboBoxItem).Content.ToString();
        try
        {
            Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo(cultrue);
            var res = App.Current.Resources["resxWrapper"] as ResourceMock;
            res.firePropertyChanged("Title");
        }
        catch(Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }
    }

} 
```

应用程序.xaml：

```
<Application xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
         x:Class="Silverlight4.OOB.ChromelessWindow.Demo.App"
         xmlns:loc="clr-namespace:Silverlight4.OOB.ChromelessWindow.Demo"
         >
    <Application.Resources>
       <loc:ResourceMock x:Key="resxWrapper"></loc:ResourceMock>
    </Application.Resources>
</Application> 
```

这是一个非常简单的示例，显示您可以在运行时更改标题。我假设，如果您将标题公开为可绑定属性，那么您将知道如何实现自己的本地化。

要使上述示例正常工作，您需要在项目文件 (*.csproj) 中的 SupportedCultrues 标记中添加“en-GB;pl-PL”。

# c# - 从每个线程内部打开新表单？

> ID：10592449
> 
> 赞同：-1
> 
> 时间：2012-05-14T23:45:17.590
> 
> 标签：c#, multithreading

我正在使用以下代码在我的函数中打开一个新表单（用于用户输入）：

```
Form4 f4 = new Form4();
f4.mainform = this;
f4.get_Text(matchString);
f4.ShowDialog(); 
```

它在没有线程时工作得很好，但是当我尝试在两个线程上运行该函数时，我只得到 1 个表单弹出窗口。如何调整它以使其支持多个线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T01:37:44.647

您可以从任何线程打开一个表单，您只需要在新线程上启动一个消息循环，例如：

```
Application.Run(f4) 
```

在表单关闭之前，该`Run`方法不会返回。但是，它可能会导致问题，因此您需要小心并知道自己在做什么。除非这样做真的很痛苦，否则我会尽快考虑重新设计您的代码以使其更加异步。例如，您可以创建一个事件处理程序方法来侦听表单的关闭事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T01:04:28.753

WIN32 消息泵在一个线程上运行——GUI 线程。只要您`.ShowDialog()`，c# 就会停止，直到用户关闭对话框。即使您使用`.Show()`避免“停止并等待用户推送 ok”，您仍然必须通过`.Invoke()`ing 到 GUI 线程来处理 GUI 线程上的所有 GUI 事件。

支持多线程的方法是在备用线程上进行非 GUI 工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T02:13:55.800

`ShowDialog`确实会泵送消息，因此它在技术上可以在单独的线程上工作，而无需专用的消息循环。但是，您当前拥有的内容看起来像是灾难的秘诀，因为该表单似乎包含对另一个表单的引用 via`f4.mainform = this`并且它可能正在尝试访问它。如果不使用一堆`Invoke`or`BeginInvoke`调用乱扔垃圾（我的意思是字面意思）你的代码，你根本无法做到这一点。

此外，在主 UI 线程以外的线程上运行 UI 表单通常效果不佳。您可能会遇到一些晦涩难懂的问题。例如，由于有两个 UI 线程在运行，因此可以打开 2 个活动模式对话框。一个可能隐藏在另一个后面，最终用户看不到它。这也是为什么通常不建议使用多个 UI 线程的原因。

我的建议是想办法让这个工作与单个 UI 线程一起工作。如果你这样做，你的生活会更简单。

# ios - 取消第一个提示游戏中心后验证用户

> ID：10592450
> 
> 赞同：0
> 
> 时间：2012-05-14T23:45:32.863
> 
> 标签：ios, xcode, game-center

我正在使用[http://www.raywenderlich.com/5480/beginning-turn-based-gaming-with-ios-5-part-1上的教程](http://www.raywenderlich.com/5480/beginning-turn-based-gaming-with-ios-5-part-1)

我有两个问题一直在努力解决。如果用户已登录，该应用程序可以正常工作。我想知道如果他们决定取消初始请求，如何重新检查/询问有关登录的信息。

这是在 appDelegate

```
 // At the top of the file
  #import "GCTurnBasedMatchHelper.h"

  // At the end of applicationDidFinishLaunching, right before 
  // the return YES
  [[GCTurnBasedMatchHelper sharedInstance] authenticateLocalUser]; 
```

我想在应用程序中这样做......

```
 if([GKLocalPlayer localPlayer].playerID]==nil)
    {
    [[GCTurnBasedMatchHelper sharedInstance] authenticateLocalUser];
    NSLog(@“Log them in!\n”);
    }
    else
    {
    NSLog(@“All set\n”);
    } 
```

显然这不是要走的路……我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T01:49:40.230

I would make a function like that :

```
-(void)autentificateAgain{
    [[GCTurnBasedMatchHelper sharedInstance] authenticateLocalUser];
} 
```

Now call it from a button... That should do the trick.

I hope it helps :-)

Greetings

Anselm

# search - 更改 SOLR 默认连接

> ID：10592452
> 
> 赞同：3
> 
> 时间：2012-05-14T23:45:34.220
> 
> 标签：search, solr, lucene

我正在使用嵌入 SOLR 的应用程序。SOLR 在 Tomcat 的 webapps 区域中作为战争运行。是否有 SOLR 配置允许我将搜索的默认 SOLR 行为切换为假设“AND”而不是“OR”作为连接运算符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T23:49:15.080

在您的架构文件中添加（或修改 h/t @Madbreaks）这一行（通常`schema.xml`）

```
<solrQueryParser defaultOperator="AND"/> 
```

# ruby-on-rails - 如何更改值在视图中的显示方式？

> ID：10592453
> 
> 赞同：2
> 
> 时间：2012-05-14T23:45:38.743
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的应用程序中，我将网站保存到一个名为的字段`website`中，您可以输入`www.website.com`或使用`http://www.website.com`. 我不确定您如何使视图中的 `http://www.website.com`始终看起来像`www.website.com`。

如果我的模型是`Store`并且它的表列是`t.string :website`. 我会在我的 StoreHelper 中放入什么并查看？是否可以更改这样的字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T23:48:26.717

您可以制作一个助手来执行以下操作：

```
def website_pretty_display(url)
  # strip out the http, etc
  new_url
end 
```

然后在视图中，您可以执行以下操作：

```
link_to website_pretty_display(store.website), store.website 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T23:53:38.730

您可以使用正则表达式来摆脱该`http://`部分：

```
@store.website.downcase.sub(/https?:\/\//, '') 
```

就个人而言，我不会在助手中这样做，而是在我的模型中添加一个方法：

```
class Store < ActiveRecord::Base
  def website_without_http
    self.website.downcase.sub(/https?:\/\//, '')
  end
end 
```

有了这个，你可以这样做：

```
<%= link_to @store.website_without_http, @store.website %> 
```

# mysql - mysql选择多个组多个where

> ID：10592455
> 
> 赞同：0
> 
> 时间：2012-05-14T23:45:48.790
> 
> 标签：mysql

我有一个表格存储活动，希望根据日期（unixtime）生成概览选择总和（总计）

喜欢从列表中选择 SUM(total)，其中日期在 123456789 和 2000000 之间，类似这样..

但我想通过一个查询获得更多的日期范围

有一个可列出的结果，比如

*   2天前的总和
*   昨天的总和
*   今天的总和（总计）

等等 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T23:56:13.797

你不需要一个`UNION`. 像这样的东西应该工作：

```
select SUM(total) as Total,
    SUM(
        case when date >= DATE_SUB(CONCAT(CURDATE(), ' 00:00:00'), INTERVAL 2 DAY) 
            and date < DATE_SUB(CONCAT(CURDATE(), ' 00:00:00'), INTERVAL 1 DAY) then total end
    ) TwoDaysAgoTotal,
    SUM(
        case when date >= DATE_SUB(CONCAT(CURDATE(), ' 00:00:00'), INTERVAL 1 DAY) 
            and date < CONCAT(CURDATE(), ' 00:00:00') then total end
    ) as OneDayAgoTotal,
    SUM(
        case when date >= CONCAT(CURDATE(), ' 00:00:00') then total end
    ) as TodayTotal
from list
where date between 123456789 and 2000000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T23:48:50.590

工会声明不能解决你的问题？[http://dev.mysql.com/doc/refman/4.1/pt/union.html](http://dev.mysql.com/doc/refman/4.1/pt/union.html)

# javascript - 如何使用青蛙将 javascript 转换为飞镖？

> ID：10592458
> 
> 赞同：4
> 
> 时间：2012-05-14T23:45:56.457
> 
> 标签：javascript, dart

这个网站上有人提到可以使用 frog 将 javascript 转换为 dart。我试了一下，但没有成功。

用青蛙将javascript转换为飞镖的详细过程是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T20:21:00.637

Florian Loitsch（来自 Google Dart 团队）在最近的伦敦 Dart Hackathon 上创建了一个 JavaScript to Dart 解析器。

代码： [http ://code.google.com/p/jsparser/](http://code.google.com/p/jsparser/)

公告（引用如下）： [https ://groups.google.com/a/dartlang.org/group/misc/browse_frm/thread/4d7af7aec81f2ac4#](https://groups.google.com/a/dartlang.org/group/misc/browse_frm/thread/4d7af7aec81f2ac4#)

> 我在这个周末花了一点时间让它更完整和可用，但不要指望一个抛光的产品。例如，还没有测试。
> 
> 也就是说：我确实认为图书馆处于可用状态。我还尝试使代码保持简单（即使有时这意味着牺牲一些速度），我希望仅此一点就可以使库变得有价值。
> 
> 我对解析器的动机是帮助从 JavaScript 到 Dart 的（半）自动翻译。目前我没有时间继续走这条路，但也许其他人想尝试一下？
> 
> ——弗洛里安·洛伊奇

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T16:00:46.710

更新：来自 Google Dart 团队的 Florian[证明](http://code.google.com/p/jsparser/)了 JavaScript 到 Dart 转换器的概念。

这是不可能的。Dart JavaScript 编译器可以（或即将实现）自行托管，这意味着您可以将编译器编译为 JavaScript，将其嵌入到网页中，然后动态地将 Dart 编译为 JavaScript。这也将使[DartBoard](http://try.dartlang.org/)更具交互性，不像当前版本执行你的 Dart 代码服务器端。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T17:24:37.400

只是想我会提到 [Google 自己发布了一个官方的[JavaScript-to-Dart 应用程序/库](http://googlecode.blogspot.co.uk/2012/01/translating-javascript-to-dart.html)，称为“ [**dart-synonym**](http://synonym.dartlang.org) ”。[GitHub 上](https://github.com/dart-lang/dart-synonym)提供了AppEngine[代码和核心 JavaScript 库](https://github.com/dart-lang/dart-synonym)

Google 的 Aaron Wheeler 和 Marcin Wichary 在这篇[博](http://googlecode.blogspot.co.uk/2012/01/translating-javascript-to-dart.html)文中对其进行了概述。

# mobile - 如何使用 Sencha 将数据从列表视图发送到详细视图？

> ID：10592460
> 
> 赞同：0
> 
> 时间：2012-05-14T23:46:15.090
> 
> 标签：mobile, sencha-touch, extjs, sencha-2

我有一个扩展 Ext.dataview.List 的通用类，它目前列出了我拥有的一组博客：

```
Ext.define('Blog.view.BlogList',{
extend: 'Ext.dataview.List',
xtype: 'blogList',

config: {
    cls: 'blogList',
    emptyText: 'No blogs found...',
    itemCls: 'blogListItem',
    itemTpl: [
        '<div class="blogThumb"><img src="{image.medium}" /></div>',
        '<div class="blogTitle">{title}</div>',
    ].join(''),
    loadingText: 'Loading blogs...'
    }
}); 
```

当有人点击列表中的一项时，我的控制器当前运行方法`showBlog`. 这是我当前的控制器：

```
Ext.define('Blog.controller.Main',{
extend: 'Ext.app.Controller',

config: {
    refs: {
                    blogContainer: 'blogContainer',
        blogList: 'blogList'
    },
    control: {
        blogList: {
            itemtap: 'showBlog'
        }
    }
},

slideLeftTransition: { type: 'slide', direction: 'left'},

init: function() {
    console.log('Blog.controller.Main init');
},

launch: function() {
    console.log('Blog.controller.Main launch');
},

showBlog: function(list, index, element, record) {
    console.log('showing blog #'+record.data.id);

    var blogContainer = this.getBlogContainer();
    blogContainer.setData(record.data);
    Ext.Viewport.animateActiveItem(blogContainer, this.slideLeftTransition);
}

}); 
```

到目前为止，一切都运行良好，但是，我不知道如何使用来自点击记录的新信息更新我的 blogContainer 中的所有组件？

我不能使用创建面板的简单概念，因为当点击博客时，我希望出现一个相当复杂的新容器......带有子组件等。

如何告诉这个新容器`blog`显示哪个详细信息，然后更新其信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T04:45:57.337

你可以试试这个。注释掉的行是如何访问数据并将其值设置为组件的另一个示例。

```
showBlog: function(view, record, item, index, e) {

    console.log('showing blog #'+index.data.id);

   // console.log('showing blog #'+index.data.example);

    var blogContainer = this.getBlogContainer();

    blogContainer.setData(index.data.id);

   // Ext.getCmp('idoftextfield').setValue(index.data.example);

    Ext.Viewport.animateActiveItem(blogContainer, this.slideLeftTransition); 
```

希望有帮助

# python - 用 BeautifulSoup 解析 xml：同名的多个标签 - 如何找到正确的 ID

> ID：10592462
> 
> 赞同：0
> 
> 时间：2012-05-14T23:46:42.477
> 
> 标签：python, xml-parsing, beautifulsoup

我有一些xml：

```
<sporsmal_liste>
    <sporsmal>
        <versjon>1.0</versjon>
        <besvart_av>
            <versjon>1.0</versjon>
            <doedsdato>0001-01-01T00:00:00</doedsdato>
            <etternavn>Giske</etternavn>
            <foedselsdato>1966-11-07T00:00:00</foedselsdato>
            <fornavn>Trond</fornavn>
            <id>TG</id>
            <kjoenn>mann</kjoenn>
        </besvart_av>
       <besvart_av_minister_id>NHD</besvart_av_minister_id>
       <besvart_av_minister_tittel>nærings- og handelsministeren</besvart_av_minister_tittel>
       <besvart_dato>2010-10-11T00:00:00</besvart_dato>
       <besvart_pa_vegne_av i:nil="true"/>
       <besvart_pa_vegne_av_minister_id i:nil="true"/>
       <besvart_pa_vegne_av_minister_tittel i:nil="true"/>
       <datert_dato>2010-09-30T00:00:00</datert_dato>
       <emne_liste/>
       <flyttet_til>ikke_spesifisert</flyttet_til>
       <fremsatt_av_annen i:nil="true"/>
       <id>47703</id>
       <rette_vedkommende i:nil="true"/>
       <rette_vedkommende_minister_id i:nil="true"/>
       <rette_vedkommende_minister_tittel i:nil="true"/>
       <sendt_dato>2010-10-01T00:00:00</sendt_dato>
       <sesjon_id>2009-2010</sesjon_id>
       <sporsmal_fra>
           <versjon>1.0</versjon>
           <doedsdato>0001-01-01T00:00:00</doedsdato>
           <etternavn>Nørve</etternavn>
           <foedselsdato>1951-03-29T00:00:00</foedselsdato>
           <fornavn>Elisabeth Røbekk</fornavn>
           <id>ELN</id>
           <kjoenn>kvinne</kjoenn>
           <fylke>
               <versjon>1.0</versjon>
               <id>MR</id>
               <navn>Møre og Romsdal</navn>
          </fylke>
          <parti>
              <versjon>1.0</versjon>
              <id>H</id>
              <navn>Høyre</navn>
          </parti>
     </sporsmal_fra>
     <sporsmal_nummer>1808</sporsmal_nummer>
     <sporsmal_til>
         <versjon>1.0</versjon>
         <doedsdato>0001-01-01T00:00:00</doedsdato>
         <etternavn>Giske</etternavn>
         <foedselsdato>1966-11-07T00:00:00</foedselsdato>
         <fornavn>Trond</fornavn>
         <id>TG</id>
         <kjoenn>mann</kjoenn>
     </sporsmal_til>
     <sporsmal_til_minister_id>NHD</sporsmal_til_minister_id>
     <sporsmal_til_minister_tittel>nærings- og handelsministeren</sporsmal_til_minister_tittel>
     <status>besvart</status>
     <tittel>Jeg viser til ... [longer text a have shortend..]</tittel>
     <type>skriftlig_sporsmal</type>
</sporsmal>
<sporsmal>   ... another sporsmal (question) </sporsmal>
<sporsmal> en the next one.... </sporsmal>
..more of these..
</sporsmal_liste> 
```

到目前为止，我已经处理了这个问题：

```
from bs4 import BeautifulSoup

soup = BeautifulSoup(r.content) # where r.content is the xml (result from requests.get(url))

for question in soup.find_all('sporsmal'):
    # to get the id of the person this is a question to (sporsmal_til) I would:
    print question.sporsmal_fra.id.text 
```

这行得通。它返回**ELN**，即提出问题的人的 ID。问题在于项目本身的 id (< sporsmal >)，它是**47703**，但我似乎无法以“正常方式”得到它：

```
for question in soup.find_all('sporsmal'):
    print question.id.text  #this returns **TG** 
```

和“TG”应该是

```
question.besvart_av.id.text 
# answered by 
```

或者

```
question.sporsmal_til.id.text 
# question for
# it's the same dude that is asked to answer, and who answers the question 
```

它是。这两个都返回**TG**但是：

```
question.id.text 
```

应该返回**47703**，但事实并非如此。（或者我怎样才能获得 id 47703？）

那么我在这里做错了什么？

PS：由于我这里的 xml 可能会让非挪威人感到有些困惑，因此我在示例中编辑并选择了名称不那么容易混淆的其他字段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T00:23:31.303

我从这个问题中学到了一些东西。当您这样做时`soup.<something>`，与您期望的不同，这是一个递归调用。这就是为什么它给你ID“TG”，因为递归地它是第一个遇到的。

因此，据我了解，您可以像这样在同一级别上进行搜索：

```
>>> for q in soup.find_all("sporsmal"):
...     print q.find("id", recursive=False).text
... 
47703
>>> for q in soup.find_all("sporsmal"):
...     print q.find("id", recursive=True).text
... 
TG
>>> for q in soup.find_all("sporsmal"):
...     print q.find("id").text # By default, the recursive call is true.
... 
TG 
```

我认为它是递归的一些原因：

```
>>> soup.id
<id>TG</id> 
```

如果它不是递归的，那么以下将失败，因为`sporsmal`没有带有 tag 的孩子`kjoenn`。这证明它是递归的。

```
>>> soup.sporsmal.kjoenn
<kjoenn>mann</kjoenn> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T00:28:10.193

这是第一个问题：您正在使用 HTML 解析器来解析 XML。由于这不是定义良好的 HTML，因此对结构感到困惑。要[使用 BeautifulSoup 解析 XML](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#parsing-xml)，您需要安装 lxml，并像这样初始化汤：

```
soup = BeautifulSoup(r.content, "xml") 
```

However, there is at least one more issue since this isn't parsing it properly either. Will update if I figure it out.

# user-interface - Python 3.x 网站和应用程序 GUI

> ID：10592467
> 
> 赞同：1
> 
> 时间：2012-05-14T23:47:34.910
> 
> 标签：user-interface, web, python-3.x, cjk

我刚刚开始学习编程，目前使用 Python 3.2，并且正在寻找构建一些简单的应用程序和可能的网站，也很简单。我想知道一个好的 GUI 库来启动它：

1.  简单且控制良好（不是主要问题，无论如何我都计划尽可能地推进）；
2.  是跨平台的，具有原生的感觉；
3.  在某处有很好的教程（请发布链接）；
4.  我可以用来销售应用程序/从网站获利，几乎没有许可问题（必须）；
5.  可以使用汉字作为字符串（不是必须的，但肯定会改变游戏规则）。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:27:03.870

Python 3 中的跨平台 GUI 有两个主要选项：

*   Tkinter 很简单，并附带 Python，但应用程序可能看起来有点难看。我喜欢[这个](http://effbot.org/tkinterbook/)学习它的网站，虽然它有点旧。

*   Qt 更大、更复杂，但可以生成功能强大、外观漂亮的应用程序。如果你想用它制作专有软件，你需要使用`PySide`，而不是`PyQt`，但你使用它们的方式几乎是相同的。网上有很多教程（主要是针对 PyQt，它的使用时间更长，但如果您使用 PySide，它们就可以了）。

两者都应该处理任何字符，包括普通话，只要系统有带有这些字符的字体来显示它们。

两者的大部分教程都将基于 Python 2，因此您必须进行一些更改。`print "foo"`变成`print("foo")`,`Tkinter`变成`tkinter`, 例如.

# ravendb - RavenDB Patch API：更新嵌套集合

> ID：10592470
> 
> 赞同：7
> 
> 时间：2012-05-14T23:48:33.083
> 
> 标签：ravendb, patch

我正在尝试使用 Patch API 更新嵌套集合。更具体地说，考虑以下示例 - 一个 Posts 集合：

```
{
  "Title": "Hello RavenDB",
  "Category": "RavenDB",
  "Content": "This is a blog about RavenDB",
  "Comments": [
    {
      "Title": "Unrealistic",
      "Content": "This example is unrealistic"
    },
    {
      "Title": "Nice",
      "Content": "This example is nice"
    }
  ]
} 
```

[我在http://ravendb.net/docs/client-api/partial-document-updates](http://ravendb.net/docs/client-api/partial-document-updates)和[http://ravendb.net/docs/client-api/set-based-](http://ravendb.net/docs/client-api/set-based-operations)使用了 Patch API 和基于集合的操作文档[操作](http://ravendb.net/docs/client-api/set-based-operations)以及几个 stackoverflow 问题作为使用集合操作和静态索引进行批量更新的资源。一个要求是仅当先前的值为“Nice”时才更新评论的“Title”，如果是，则将其更新为“Bad”。

静态索引“NicePosts”定义为：

```
Map = posts => from post in posts    
               where post.Comments.Any(comment => comment.Title == "Nice")
               select new {post.Title, post.Category} 
```

批量补丁更新命令是：

```
 documentStore.DatabaseCommands.UpdateByIndex("NicePosts",   
                    new IndexQuery(),                                               
           new[] { new PatchRequest 
                    {   Type = PatchCommandType.Modify,                          
                    Name = "Comments",  
                      PrevVal = RavenJObject.Parse(@"{ ""Title"": ""Nice""}"),
                      Nested = new[]
                              {
                                new PatchRequest {Type = PatchCommandType.Set, Name = "Title", Value = new RavenJValue("Bad") },
                       }  }, allowStale: true); 
```

我对此有一些疑问：

1) 我的更新命令的结构/语法是否正确？

2) 我希望对集合中的所有记录执行更新。因此，我没有在 IndexQuery 查询中定义查询过滤器，因为“NicePosts”索引已经返回了适当的集合。但是，运行此命令不会更新集合。

3）如果我设置“allowStale：false”，我会收到“stale index”错误。在打开我的文档存储会话之前，我实例化了索引类并执行它以将其持久化到 ravenDB 实例。任何想法这里出了什么问题？

谢谢，

编辑：

根据 ayende 的建议，将 Patch 命令更改为：

```
 documentStore.DatabaseCommands.UpdateByIndex("NicePosts",
                                         new IndexQuery(),
                                         new[] {
                                                   new PatchRequest {
                                                     Type = PatchCommandType.Modify,
                                                     Name = "Comments",
                                                     Position = 0,
                                                     Nested = new[] {
                                                       new PatchRequest {Type = PatchCommandType.Set, Name = "Title", Value = new RavenJValue("Bad")},
                                                     }
                                                   }
                                                 }, allowStale: false); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-26T02:08:05.483

现在可以使用[脚本化补丁请求](http://ayende.com/blog/157185/awesome-ravendb-feature-of-the-day-evil-patching)来完成：

```
string oldTitle = "Nice";
string newTitle = "Bad";

documentStore.DatabaseCommands.UpdateByIndex("NicePosts",   
    new IndexQuery(),                                               
    new ScriptedPatchRequest 
    {                       
        Script = @"for (var i = 0; i < this.Comments.length; i++)
                       if (this.Comments[i].Title == oldTitle)
                           this.Comments[i].Title = newTitle;",
        Values =
        {
            { "oldTitle", oldTitle },
            { "newTitle", newTitle },
        },
    }
); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T05:58:40.347

您不能使用 patch 命令根据数组中的现有值更新值。您需要指定实际位置。

# java - BufferedReader 不接收来自 LXSocket 的字符串

> ID：10592474
> 
> 赞同：0
> 
> 时间：2012-05-14T23:49:14.467
> 
> 标签：java, objective-c, client, exc-bad-access

我正在开发一个简单的测试来通过套接字连接一个带有objective-c客户端的java服务器应用程序。

这是java端：

```
BufferedReader dis = new BufferedReader(new InputStreamReader(socket.getInputStream())); 
String message = dis.readLine();
System.out.println("Message Received: " + message);
dis.close();
socket.close(); 
```

这是objective-c方面：

```
- (IBAction)click:(id)sender{
    @try {   
        [socket sendString:[NSString stringWithFormat:@"%@",[toSend text]]];
    }
    @catch (NSException * e) {
        NSLog(@"Unable to send data");
    }
    [toSend resignFirstResponder];
} 
```

有很多问题：

这样服务器的输出是：

```
Message Received: null 
```

我读到[这个](https://stackoverflow.com/questions/6975410/serversocket-java-not-reading-inputstream)需要`readLine()`接收一个带有`"\n"`结尾字符串的字符串，所以我在添加时编辑该行`\n`：

```
[socket sendString:[NSString stringWithFormat:@"%@\n",[toSend text]]]; 
```

但我在这一行检索到一个错误：EXC_BAD_ACCESS 就像在屏幕截图中一样

![EXC_BAD_ACCESS](../Images/c5d453e934969bd22b4035fd70c7c1e9.png)

可能是什么问题呢？有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T01:11:52.677

我在 Java 端做了一个原型，我没有 Objective-C/iOS 或 Apple 产品。我怀疑问题可能出在 iOS 或 Java 方面。所以我希望你能正确地从 iOS 发送文本。

建议代码：

```
BufferedReader dis = new BufferedReader(new InputStreamReader(socket.getInputStream(), Charset.defaultCharset())); 
```

InputStreamReader 类需要一个已定义的字符集。字符集应该是必需的，而不是可选的！根据 Sun 文档。

为方便起见，请在下次干净编译时包含更多代码。谢谢。

祝你好运，试试吧！

汤米奎

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T22:25:22.720

根据您修改后的帖子/问题，您从 Objective-C 方面得到了一个例外。所以问题可能不在Java方面。出于调试目的，我建议使 C 代码更简单，例如...

```
BOOL success;
success = [socket SendString: @"Hello World!"];
if (success != YES) {
  NSLog(@"Fail to send")
} 
```

笔记：

*   我不熟悉 Objective-C，也找不到 Apple 提供的相关文档。如果你知道，请告诉我/我们。

*   我没有使用代码“[toSend text]”，因为我没有找到任何参考。

*   其他 iOS 开发人员说“%@”是指对象。代码 [toSend text] 是一个对象吗？

最后，建立套接字连接并实现通信应该是可能的，而且不是那么难，最终我们会到达那里。所以让我们开始吧！

# python - Sort a dictionary of dictionaries python

> ID：10592480
> 
> 赞同：0
> 
> 时间：2012-05-14T23:50:01.990
> 
> 标签：python

I have a dictionary of dictionaries like the following

```
d = {
  'hain': {'facet': 1, 'wrapp': 1, 'chinoiserie': 1}, 
  'library': {'sconc': 1, 'floor': 1, 'wall': 2, 'lamp': 6, 'desk': 1, 'table': 1, 'maine': 1} 
} 
```

So, I want to reverse sort this dictionary based on the ultimate value:

so what I am expecting is to print out something like this:

```
 key_1,   key_2 , value
 library   lamp      6
 library   wall      2 
```

and so on...

How do i get this?

Thanks

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T23:57:29.103

Here is how you could get the sorted list you are looking for:

```
items = ((k, k2, v) for k in d for k2, v in d[k].items())
ordered = sorted(items, key=lambda x: x[-1], reverse=True) 
```

This first converts your dictionary into a generator that yields the tuples `(key_1, key_2, value)`, and then sorts this based on the value. The `reverse=True` makes it sort highest to lowest.

Here is the result:

```
>>> pprint.pprint(ordered)
[('library', 'lamp', 6),
 ('library', 'wall', 2),
 ('hain', 'facet', 1),
 ('hain', 'wrapp', 1),
 ('hain', 'chinoiserie', 1),
 ('library', 'sconc', 1),
 ('library', 'floor', 1),
 ('library', 'desk', 1),
 ('library', 'table', 1),
 ('library', 'maine', 1)] 
```

Note that when the values match exactly, the order is arbitrary (except that items will always be grouped by `key_1`), if you would like some other behavior just edit your question with what you expect in these scenarios.

After obtaining this list, you could print it out by iterating over it like this:

```
for key_1, key_2, value in ordered:
    print key_1, key2, value         # add whatever formatting you want to here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T00:10:17.670

If you want it sorted first be reverse sorted by `value` then ascending sorted by `key` then `key_2`:

```
dout={}
for e in d:
    for es in d[e]:
        lineOut='%s %s %i' % (e, es, d[e][es])
        key= d[e][es]
        dout.setdefault(key, []).append(lineOut)  

for e in sorted(dout, reverse=True):
    for ea in sorted(dout[e], reverse=False):
        print ea 
```

prints:

```
library lamp 6
library wall 2
hain chinoiserie 1
hain facet 1
hain wrapp 1
library desk 1
library floor 1
library maine 1
library sconc 1
library table 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T23:55:47.830

I'm not sure exactly how you want the output sorted, but this should get you started:

```
>>> for key in d:
        for key2 in d[key]:
            print key, key2, d[key][key2] 
```

# c# - mysql中SUM()的返回类型是什么？

> ID：10592481
> 
> 赞同：7
> 
> 时间：2012-05-14T23:50:10.453
> 
> 标签：c#, mysql

我正在用 C#.NET 编写程序我想收集一个类的总频率（假设每个类都有很多单词，每个单词在相应的类中都有自己的频率）

所以我在mysql中使用了sum()函数。但是有一个错误说我的演员表是错误的。

```
 public void average_each_type()
        {
            MySqlDataReader result;
            int total_freq = 0;
            string type = "";

            command.CommandText = "select class_name ,SUM(frequency) as sum_of_freq from training_set group by class_name ";

                result = command.ExecuteReader();
                while (result.Read())
                {

                    total_freq = (int)result["sum_of_freq"]; //error happened here
                    type = result["class_name"].ToString();
                    //.....then so on...// 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-14T23:56:08.243

MySql 中的 SUM 将返回一个小数或双精度值，具体取决于“频率”内的类型。从[SUM 的文档中](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)：

> SUM() 和 AVG() 函数为精确值参数（整数或 DECIMAL）返回一个 DECIMAL 值，为近似值参数（FLOAT 或 DOUBLE）返回一个 DOUBLE 值。（在 MySQL 5.0.3 之前，SUM() 和 AVG() 为所有数字参数返回 DOUBLE。）

如果您想要一个整数，`Convert`无论​​源类型是什么，您都可以使用它来获取：

```
total_freq = Convert.ToInt32(result["sum_of_freq"]); 
```

这里的优点是无论从数据库返回什么类型的值， [Convert.ToInt32都可以工作，只要它是数字类型。](http://msdn.microsoft.com/en-us/library/ffdk7eyz)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T12:13:55.227

除了 Reed 所说的之外，您还可以在 SQL 中进行整数转换：

```
CAST(SUM(frequency) as INT) as sum_of_freq 
```

# jquery - 在 ckeditor 中为 Rails 应用程序添加表中的类

> ID：10592482
> 
> 赞同：0
> 
> 时间：2012-05-14T23:50:15.750
> 
> 标签：jquery, ruby-on-rails, ckeditor

我想在默认创建的表中添加一个名为“table”的类。我还想从ckeditor的表格对话框中更改边框的值。我有大麻烦了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T19:54:12.667

我得到了答案：

```
CKEDITOR.on('dialogDefinition', function (ev) {
  var dialogName = ev.data.name;
  var dialogDefinition = ev.data.definition;

  if (dialogName === 'table') {
    var addCssClass = dialogDefinition.getContents('advanced').get('advCSSClasses');
    addCssClass['default'] = 'table-class';
  }
}); 
```

# c++ - TBB 是否适用于不断变化的工作负载？

> ID：10592485
> 
> 赞同：0
> 
> 时间：2012-05-14T23:50:58.343
> 
> 标签：c++, multithreading, tbb

很抱歉，我似乎没有得到[英特尔的 TBB](http://threadingbuildingblocks.org/)，它看起来很棒且受支持，但我无法理解如何使用它，因为我想我不习惯在任务方面考虑并行性，而是看到它作为线程。

我当前的工作负载有一项将工作发送到队列以继续处理的作业（考虑递归，但不是调用自身，而是将工作发送到队列）。我在 Java 中进行这项工作的方式是创建一个并发队列（非阻塞队列）和线程池执行器，用于处理队列/将工作发送回它。但是现在我正在尝试在 C++ 中做类似的事情，我发现 TBB 可以创建池，但它的方法非常不同（Java 线程似乎只要它们在队列中工作就可以继续工作，但 TBB 似乎打破了任务开头）。

这是我所做的一个简单的Java示例（在此之前我设置了我想要的线程数等）：

```
static class DoWork implements Callable<Void> {
    // queue with contexts to process
    private Queue<int> contexts;

    DoWork(Context request) {
        contexts = new ArrayDeque<int>();
        contexts.add(request);
    }

    public Void call() {
        while(!contexts.isEmpty()) {
            //do work 
            contexts.add(new int(data)); //if needs to be send back to the queue to do more work
        }
    }
} 
```

我确信它可以在 TBB 中做到这一点，但我只是不确定如何，因为它似乎在我发送它时破坏了我的工作。因此，如果队列中有 2 个项目，它可能只会启动 2 个线程，但不会随着更多工作的进入而增长（即使我有 8 个内核）。

有人可以帮助我了解如何完成我的任务，还可以建议一种更好的方式来思考来自使用 Java 的线程环境的 TBB（我也不忠于 TBB，所以如果有更容易/更好的东西，那么我很乐意学习它。我只是不喜欢 c++ 线程池，因为它似乎没有积极开发）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T21:00:06.167

基于具有用于并行处理的项目队列的方法，其中每个线程仅从队列中弹出一个项目并继续（并可能在某个时刻将新项目添加到队列的末尾）从根本上是错误的，因为它限制了并行性应用程序。队列成为单点同步，线程需要等待才能访问下一个要处理的项目。在实践中，当任务（每个项目的处理作业）非常大并且需要不同的时间来完成时，这种方法有效，与（大多数）线程同时完成并进入队列时相比，允许队列较少竞争以便他们处理下一个项目。

如果您正在编写一段可重用的代码，则无法保证任务足够大或大小不同（执行时间）。

我假设您的应用程序可以扩展，这意味着您从队列中的大量项目（远大于线程数）开始，而线程进行处理时，它们会在最后添加足够的任务，以便有足够的工作所有人，直到申请完成。

如果是这种情况，我宁愿建议您保留项目的两个线程安全向量（例如 TBB 的 concurrent_vectors）以实现互换性。您从一个向量（您的初始项目集）开始，然后 enque() 一个任务（我认为它在 TBB 参考手册的第 12 章中的某处进行了描述），它在项目的初始向量上执行 parallel_for。在处理第一批时，您会将新项目 push_back 到第二个 concurrent_vector 上，当您完成第一个时，您 enque() 在第二个向量上使用 parallel_for 的任务并开始将新项目推回第一个. 您可以尝试更好地重叠项目的并行处理，方法是使用三个向量而不是两个向量，并在它们之间逐渐移动，同时仍有足够的工作让所有线程保持忙碌。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T23:02:47.360

您正在尝试做的正是 TBB 的`parallel_do`设计目的。调用的“body”`parallel_do`传递了一个“feeder”参数，您可以在处理任务时执行该参数以在当前完成`feeder.add(...some new task...)`之前创建新任务以执行。`parallel_do`

# facebook - 使用 Prime31 iOS Facebook 插件邀请朋友时第一次尝试失败

> ID：10592486
> 
> 赞同：1
> 
> 时间：2012-05-14T23:51:19.200
> 
> 标签：facebook, unity3d, prime31

我正在尝试使用 Prime31 社交网络插件打开一个邀请框。问题是对话框总是第一次加载失败。在第一次失败后，对话框将从此工作。重新启动应用程序，它再次第一次失败。我正在使用以下代码打开对话框。

```
var options = new Dictionary<string, string>();
options["message"] = message;
FacebookAccess.showDialog("apprequests", options); 
```

当我尝试这个时，这就是我在错误日志中得到的

```
2012-05-14 17:47:30.790 heroescall[158:707] error description: Error Domain=NSURLErrorDomain Code=-999 "The operation couldn‚Äôt be completed. (NSURLErrorDomain error -999.)" UserInfo=0xec7c890 {NSErrorFailingURLKey=https://m.facebook.com/dialog/apprequests?access_token=[TOKEN]&message=I%27ve%20answered%20the%20call%2C%20will%20you%3F%20Play%20Heroes%20Call%20for%20free%21&exclude_ids=&app_id=YYYY&api_key=YYYY&redirect_uri=fbconnect%3A%2F%2Fsuccess&sdk=2&display=touch, NSErrorFailingURLStringKey=https://m.facebook.com/dialog/apprequests?access_token=[TOKEN]&message=I%27ve%20answered%20the%20call%2C%20will%20you%3F%20Play%20Heroes%20Call%20for%20free%21&exclude_ids=&app_id=YYYY&api_key=YYYY&redirect_uri=fbconnect%3A%2F%2Fsuccess&sdk=2&display=touch}
2012-05-14 17:47:30.793 heroescall[158:707] error userInfo: {
    NSErrorFailingURLKey = "https://m.facebook.com/dialog/apprequests?access_token=[TOKEN]&message=I%27ve%20answered%20the%20call%2C%20will%20you%3F%20Play%20Heroes%20Call%20for%20free%21&exclude_ids=&app_id=YYYY&api_key=YYYY&redirect_uri=fbconnect%3A%2F%2Fsuccess&sdk=2&display=touch";
    NSErrorFailingURLStringKey = "https://m.facebook.com/dialog/apprequests?access_token=[TOKEN]&message=I%27ve%20answered%20the%20call%2C%20will%20you%3F%20Play%20Heroes%20Call%20for%20free%21&exclude_ids=&app_id=YYYY&api_key=YYYY&redirect_uri=fbconnect%3A%2F%2Fsuccess&sdk=2&display=touch";
}
14/05/12 05:47:30.860 (4.029738s) - Facebook Dialog failed - The operation couldn‚Äôt be completed. (NSURLErrorDomain error -999.) 
```

有什么建议么？看起来这是在 Prime31 下的 FB 库中发生的事情，但我不确定到底是什么。

# ruby-on-rails - 自定义记录详细信息页面（显示页面？）

> ID：10592487
> 
> 赞同：0
> 
> 时间：2012-05-14T23:51:21.197
> 
> 标签：ruby-on-rails, activeadmin

我是 Rails 的新手，并且继承了我正在尝试修改的应用程序；它使用 activeadmin - 这看起来不错，但目前对我来说有点不透明。

显示页面 - 显示详细的单一记录的页面 - 似乎不是由我能找到的任何东西生成的。我找到了处理所有记录列表的文件，但找不到实际生成详细信息的文件。

我需要向这个页面添加一些自定义信息，这些信息不直接链接到数据库本身的记录，基本上是一组相关资源。

我在找什么文件？还是我需要在某个地方创建一个？列表页面在 admin/users.rb

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T23:54:09.870

您要编辑`admin/users.rb`.

[http://activeadmin.info/docs/6-show-screens.html](http://activeadmin.info/docs/6-show-screens.html)

上面的链接记录了如何自定义显示页面。

# eclipse-plugin - 如何使用“org.eclipse.debug.ui.launchShortcuts”？

> ID：10592493
> 
> 赞同：5
> 
> 时间：2012-05-14T23:52:05.487
> 
> 标签：eclipse-plugin, eclipse-pde

我在 Eclipse 中编写了一个自定义启动器，我可以通过工具栏上的“运行方式”和“调试方式”菜单选项访问它。我还希望能够通过包资源管理器和右键单击要启动的文件的编辑器来启动。[我按照这里](http://www.eclipse.org/articles/Article-Launch-Framework/launch.html)的教程添加了快捷方式，但没有任何反应，它没有输入我的处理代码，也没有抱怨扩展点的配置。

这是我的一个片段`plugin.xml`

```
<extension point="org.eclipse.debug.ui.launchShortcuts">
  <shortcut
        id     = "org.mylauncher.launchCalcShortcut"
        class  = "org.mylauncher.LaunchCalcShortcut"
        description="Execute calculations"
        icon="icons/launch_16_16.png"
        label="Calculate"
        modes="run, debug" >
        <configurationType id="org.mylauncher.launchCalc"/>
  </shortcut> 
```

我还尝试删除（可选）图标属性，并分别验证了图标的路径。

我已经修改这个配置好几个小时了，没有好的结果，也无法调试，因为它根本没有在我自己的代码中运行。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T19:48:07.467

看来这个问题的正确答案是指定一个上下文启动快捷方式。这是我的工作配置：

```
 <extension
     point="org.eclipse.debug.ui.launchShortcuts">

  <shortcut
        class="com.xxxx.CalcLaunchShortcut"
        icon="calc.png"
        id="com.xxxx.CalcLaunchShortcut"
        label="Calc"
        modes="run, debug">
    <contextualLaunch>
         <contextLabel mode="run" label="Run Calculator" />
         <contextLabel mode="debug" label="Debug Calculator" />
         <enablement >
           <with variable="selection">
           <count value="1"/>
          <iterate>
            <adapt type="org.eclipse.core.resources.IResource">
                <and>
                <test property="org.eclipse.core.resources.name" value="*.calc"/>
            </and>
        </adapt>
          </iterate>
           </with>
       </enablement>
     </contextualLaunch>
  </shortcut> 
```

# regex - 使用 preg_match 进行简单的电子邮件地址检查

> ID：10592494
> 
> 赞同：1
> 
> 时间：2012-05-14T23:52:09.413
> 
> 标签：regex

我有一个用于在文本中查找电子邮件地址的简单正则表达式，但即使我没有看到错误，它也不起作用。

```
$addr=array();
$t='Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean fermentum risus id tortor. Morbi leo mi, nonummy eget tristique non, rhoncus non leo. Donec quis nibh at felis congue commodo. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos hymenaeos aaa@bbb.com. Aliquam ccc@ddd.net ornare wisi eu metus.';
if(preg_match_all('~[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}~',$t,$addr, PREG_SET_ORDER)){
  echo 'found';
} 
```

我也试过我找到的这个版本，但它也没有工作：

```
if(preg_match_all('/^[A-Z0-9._%-]+@[A-Z0-9._%-]+\.[A-Z]{2,4}$/',$t,$addr, PREG_SET_ORDER)){ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T00:20:33.787

这也适用于匹配模式并且是最短的：

`[0-z.%-]+@[0-z.-]+\.[A-z]{2,4}`

这是有效的，因为`0-z`涵盖`A-Z`, `a-z`,`0-9`和`_`, Az 也涵盖了 AZ 和 az

[我用 ruby​​ 开发，你可以在http://rubular.com/r/PdbH1BjWMs](http://rubular.com/r/PdbH1BjWMs)看到这个“在行动”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T00:01:40.230

您正在匹配全部大写的电子邮件。您需要做`[A-Za-z]`，或者设置不区分大小写的标志`preg_match`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T00:04:51.230

包括小写字母类：

```
if(preg_match_all('~[a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\.[A-Z]{2,4}~',$t,$addr, PREG_SET_ORDER)){
  echo 'found';
} 
```

...注意*az*。

# jquery - 无法将 mousemove 与 pageX 和 pageY 解除绑定

> ID：10592498
> 
> 赞同：4
> 
> 时间：2012-05-14T23:52:30.463
> 
> 标签：jquery, mousemove, mousedown, mouseup

```
var mouseStillDown = false;
$(".grab").mousedown(function(e) {
        mouseStillDown=true;
        getLocation();
    }).mouseup(function(e) {
        mouseStillDown = false;
        getLocation();
    });

if(mouseStillDown) {
$("#image_360").bind("mousemove", function(e){
     $("#location").text("e.pageX: " + e.pageX + ", e.pageY: " + e.pageY);
});
}

else if(!mouseStillDown) {
    $("#image_360").unbind("mousemove", function(e){
     $("#location").text("removed location");
    });
} 
```

即使我有未绑定的鼠标移动，我仍然会在我的 div 上显示带有 pageX 和 pageY 的文本`id=location`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T00:05:10.153

它应该是`$("#image_360").unbind("mousemove");`

[http://api.jquery.com/unbind/](http://api.jquery.com/unbind/)

# php - iframe 仅在点击时加载

> ID：10592500
> 
> 赞同：1
> 
> 时间：2012-05-14T23:52:53.520
> 
> 标签：php, javascript, jquery, iframe, embed

有没有办法使用 jQuery 让 iframe 在点击时加载，我想要这个，因为 iframe 隐藏在一个 div 中，直到点击才可见，所以绝大多数用户不会查看 iframe，并且我不希望加载时间受到 iframe 的影响。

这是我尝试过的少数几件事之一，iframe 不加载：

```
$(function() {
var emba=1;
var embget = 1;
    $(".custemba").click(function(event) {
    event.preventDefault(event);
    if(emba == 1) {
        emba = 2;
        $('.custemb').slideDown();
        if(embget == 2) {
            $('.appendi').append('<iframe src="/player_i.php?aid=12" height="170px" width="100%" scrolling="no"  frameborder="0"></iframe>');
            embget = 2;
        }
    }
    else if(emba == 2) {
        emba = 1;
        $('.custemb').slideUp();
    }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T00:06:32.470

好像

> 如果（嵌入 == 2）

应该

> 如果（嵌入 == 1）

而且你不需要那个额外的事件

> event.preventDefault();

这是一个简化版本：

```
var appendIFrame = true;
$(".custemba").click(function(event) {
    event.preventDefault();
    $('.custemb').slideToggle();
    if(appendIFrame) {
        $('.appendi').append('<iframe src="/player_i.php?aid=12" height="170px" width="100%" scrolling="no"  frameborder="0"></iframe>');
        appendIFrame = false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T00:51:49.087

以下对我有用，有点清洁，在附加之前创建对象：

### HTML：

```
<div>
    <a href="#" class="showframe">Show iFrame</a>
</div>
<div class="framebox"></div>​ 
```

### JS：

```
var frame_loaded = false;
$(".showframe").click(function(event) {
    event.preventDefault();
    if (frame_loaded === false) {
        var frame_element = $('<iframe>');
        frame_element.attr({
            src: "http://eatabagofdicks.com",
            height: "170px",
            width: "100%",
            scrolling: "no",
            frameborder: "0"
        });
        $(".framebox").append(frame_element);
        frame_loaded = true;
    }
    $(".framebox").slideToggle();
});​ 
```

# javascript - 使用 JS 或 jQuery 替换部分 URL

> ID：10592502
> 
> 赞同：0
> 
> 时间：2012-05-14T23:53:29.663
> 
> 标签：javascript, jquery, regex

好的，我不确定我出了什么问题，但我正在尝试查找和替换多个 URL 的一部分。

基本上，我有一些被动态添加到我的网站的 URL。都有一类“newsLink”，一些链接正在拉起 google.docs 查看器，我需要删除它。

到目前为止，这是我的代码：

```
$('a.newsLink').each(function(){
var lnk = $('a.newsLink').attr();
var re = new RegExp("http://docs.google.com/viewer?url=","g");
lnk.replace(re, "");
}); 
```

链接看起来像：

```
<a href='http://docs.google.com/viewer?url=myHomePage.pdf' class='newsLink' target='_blank'> 
```

我想删除第一部分，使链接看起来像：

```
<a href='http://myHomePage.pdf' class='newsLink' target='_blank'> 
```

无论如何，到目前为止没有运气......任何人都可以帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T23:57:53.750

首先，您将再次在循环中获取所有链接。然后，您尝试获取一个属性，但没有说是哪个。最后，您尝试使用`replace`而不将返回值分配给任何东西。

这就是你的代码应该是：

```
$('a.newsLink').each(function(){
    var lnk = this.href;
    this.href = lnk.replace("http://docs.google.com/viewer?url=", "");
}); 
```

注意：我假设您希望链接成为 eg `myHomePage.pdf`，没有协议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T00:03:52.667

你想要的正则表达式是。

```
http:\/\/docs\.google\.com\/viewer\?url=(.+) 
```

首先，这会转义所有正则表达式字符。在这种情况下`\`,`.`和`?`。我们正在使用与每个字符 ( `(.+)`) 匹配的组来捕获文档。

所以到目前为止，我们的代码看起来像这样。

```
$('a.newsLink').each(function(){
    var lnk = this.href;
    var re = /http:\/\/docs\.google\.com\/viewer\?url=(.+)/g
    this.href = lnk.replace(re, "");
}); 
```

现在我们得到这样的组。

```
var match = re.exec(lnk); 
```

这将返回匹配的数组。我们的文档现在存储在`match[1]`. 这样我们的最终代码就出来了。

```
$('a.newsLink').each(function(){
    var lnk = this.href;
    var re = /http:\/\/docs\.google\.com\/viewer\?url=(.+)/g
    this.href = (re.exec(lnk))[1];
}); 
```

# c# - C#：从字符串中提取数字，然后将逗号（，）更改为点（。）

> ID：10592510
> 
> 赞同：0
> 
> 时间：2012-05-14T23:54:34.193
> 
> 标签：c#, regex, numbers, comma

我正在使用 Visual Web Ripper 提取网站上产品的名称和价格。

当我从表格中提取价格时，它以如下形式出现：

> 氪。129,30

我需要提取 129,30，然后将逗号变为点 (129.30)。

Visual Web Ripper 可以使用脚本来修改提取的内容。它可以使用标准的 Regex、C# 和 VB.NET。

在 Regex 选项卡中，我发现

```
(\d+.)?(\d+)(.\d+)? 
```

给我 129,30，但是我不能把逗号变成点。

因此我必须使用 C#。它带有这个标准脚本：

```
using System;
using VisualWebRipper.Internal.SimpleHtmlParser;
using VisualWebRipper;
public class Script
{
    //See help for a definition of WrContentTransformationArguments.
    public static string TransformContent(WrContentTransformationArguments args)
    {
        try
        {
            //Place your transformation code here.
            //This example just returns the input data
            return args.Content;
        }
        catch(Exception exp)
        {
            //Place error handling here
            args.WriteDebug("Custom script error: " + exp.Message);
            return "Custom script error";
        }
    }
} 
```

如何修改它以提取数字然后用点替换逗号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T23:58:07.800

String.Replace 是一个选项 ( `text.Replace(",", ".")`)。

最好用正确的 CultureInfo 正确解析数字，而不是用 InvariantCulture 重新格式化它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T00:19:08.323

这显然是[克朗](http://en.wikipedia.org/wiki/Swedish_krona)，所以我们应该使用瑞典文化信息来翻译它。首先我们从输入开始：

```
var original = "Kr. 129,30"; 
```

获取文化：

```
using System.Globalization;
var culture = CultureInfo.GetCultureInfo("sv-SE"); 
```

这种文化期望货币字符串`kr`（不区分大小写），但我们有`Kr.`. 所以让我们更新它：

```
var format = (NumberFormatInfo)culture.NumberFormat.Clone();    
format.CurrencySymbol = "Kr."; 
```

现在文化意识解析：

```
var number = Decimal.Parse(original, NumberStyles.Currency, format); 
```

现在`number`包含已正确解析的小数。

# ios - 保护我的应用程序中的图像不被复制

> ID：10592515
> 
> 赞同：0
> 
> 时间：2012-05-14T23:54:50.197
> 
> 标签：ios, xcode, app-store

我有一个应用程序使用我有权使用的受版权保护的图像。如果用户使用 iTunes 将我的应用程序下载到他们的计算机上，他们基本上可以解压缩应用程序文件（更改文件名以添加 .zip，解压缩然后显示包内容）并查看图像。

有没有办法防止这种情况？还是我错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T00:01:29.833

据我所知，没有办法阻止这种访问图像的方法。我能想到的唯一选择是加密图像并将加密文件存储在应用程序中。然后在运行时解密图像。

这不会阻止最坚定的对手，但会阻止人们在不付出任何努力的情况下访问图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T02:55:50.270

一个坚定的对手可能会在他们拥有的设备上获取应用程序使用的任何文件。

要击败一个懒惰的对手，您可能只需将文件名更改为他们不会识别为图像文件的名称。或者在每个文件的开头更改包含文件类型签名的几个字节，从而使文件损坏。您的应用可以将它们复制到临时文件中并修复要显示的签名。

据报道，Apple 加密了 App Store 分发的应用程序的编译 C 代码。因此，另一种可能性可能是将受版权保护的图像（部分）作为十六进制数据嵌入到源代码中。

# java - 优化新的BufferedReader（输入流）

> ID：10592519
> 
> 赞同：0
> 
> 时间：2012-05-14T23:55:00.197
> 
> 标签：java, parsing, url, inputstream, bufferedreader

```
long start = System.currentTimeMillis();
URL link = (any url);
BufferedReader read = new BufferedReader(new InputStreamReader(link.openStream()));
System.out.println("Took: " + (System.currentTimeMillis()-start)); 
```

这将打印出大约 800-1200ms，网页本身不是太大，但大约是 300 行代码。

我想知道是否有任何方法可以优化或加快打开流的过程，以便我可以读取页面源的行，因为虽然这 1 秒还不错，但如果您在程序中打开其中的 30 个，那么你有一个问题，因为它需要 30 秒。也许我应该传递 BufferedReader 或 InputStreamReader 以便它不会每次都制作一个新的？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T23:56:56.320

您看到的 99.9% 的时间是网络延迟和传输时间。阅读器的创建是微秒级的。除了获得更快的网络和访问具有通往 Internet 的粗管道的站点之外，您无能为力。

# gcc - GDB 错误消息 (GCC 4.7) (来自 macports)

> ID：10592521
> 
> 赞同：0
> 
> 时间：2012-05-14T23:55:13.587
> 
> 标签：gcc, gdb, macports, libstdc++

当我启动 gdb 时，我有这样的消息：

```
$ gdb a.out 
GNU gdb 6.3.50-20050815 (Apple version gdb-1708) (Thu Nov  3 21:59:02 UTC 2011)
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "x86_64-apple-darwin"...Reading symbols for shared libraries .
warning: Could not find object file "/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_tarballs_ports_lang_gcc47/gcc47/work/build/x86_64-apple-darwin11/libstdc++-v3/src/../libsupc++/.libs/libsupc++convenience.a(array_type_info.o)" - no debug information available for "../../../../gcc-4.7.0/libstdc++-v3/libsupc++/array_type_info.cc".

warning: Could not find object file "/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_tarballs_ports_lang_gcc47/gcc47/work/build/x86_64-apple-darwin11/libstdc++-v3/src/../libsupc++/.libs/libsupc++convenience.a(bad_alloc.o)" - no debug information available for "../../../../gcc-4.7.0/libstdc++-v3/libsupc++/bad_alloc.cc". 
```

看来我需要再次获取 libstdc++ 但如何使用 macports？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-05T16:45:44.493

这是由 Apple 作为 Xcode 的一部分安装的特殊 Unix 环境引起的几个问题之一。如果您需要比 Xcode 安装的版本更新的 gcc，请确保您还安装了更新版本的 gdb，否则您将遇到上述问题。您还需要确保您的环境实际上调用了两者的 macport 版本，而不是默认的 Xcode 版本。

仅从 macports 安装 gcc 不会使命令“gcc”调用 macports 安装的 gcc 版本。同样，'gdb' 不会调用 macports 安装的 gdb 版本。macports 安装的版本具有路径“/opt/local/bin/gcc-mp-4.6”和“/opt/local/ggdb”或类似的路径，具体取决于 gcc 的版本号。请注意，它是“ggdb”而不是“gdb”。

一种解决方案是始终通过提供整个路径来显式调用正确的版本。另一种方法是用指向 macports 版本的链接替换默认的 gcc 和 gdb 位置（这可能会导致 Xcode 出现问题）。默认位置是“/usr/local/bin/gcc”和“/usr/bin/gdb”。无论您的路径设置如何，默认的 bash shell 都会在这些位置查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T22:33:11.453

[http://gcc.gnu.org/gcc-4.5/changes.html](http://gcc.gnu.org/gcc-4.5/changes.html)说

> GCC 现在也为结语生成展开信息。由 GCC 生成的 DWARF 调试信息现在比以前使用了更多 DWARF3 的特性，以及一些 DWARF4 特性。早于 7.0 的 GDB 无法处理其中任何一个，因此要调试 GCC 4.5 生成的二进制文件或库，需要 GDB 7.0 或更高版本。您可以通过选项禁用 DWARF4 功能`-gdwarf-3 -gstrict-dwarf`，或使用`-gdwarf-2 -gstrict-dwarf`将 GCC 限制为仅 DWARF2，但无论何时发出展开信息，都会无条件地发出结尾展开信息。

所以你应该看看macports中是否有更新的GDB。

# jquery-ui - 在 Firefox 中使用 JQuery UI 的选项卡下的间隙

> ID：10592525
> 
> 赞同：5
> 
> 时间：2012-05-14T23:55:54.893
> 
> 标签：jquery-ui, tabs

我一直在为我的网站的各个方面使用 JQueryUI，并且一个小的选项卡式菜单集运行良好，除了在 Firefox 中。下图显示了在 Firefox 顶部和 IE9 中呈现的相同代码。注意选项卡下的间隙和（可能？）选项卡内填充的增加。我已经从站点（第二张图片）中删除了我的所有样式表，只留下了基本的 JQuery UI 一个，但仍然存在差距，而且只在 Firefox 中出现。

js 调用尽可能基本：

```
 $("#menuTabs").tabs(); 
```

在 IE 比 firefox 更好的情况下，我并不经常遇到显示问题......删除了我生成的所有 CSS，并确保没有应用任何样式，我不知道下一步该往哪里看！

如果您可以就可能导致它的原因提供任何建议，我会很高兴！

![IE 和 Firefox 呈现相同的菜单](../Images/9d4dfa7d520942101cdabc680ab7716b.png) ![IE 和 Firefox 渲染没有我的样式表](../Images/74d7391dbb695116dba1f7c29d124ba2.png)

[编辑] 在尽可能地缩减代码并仅使用“已知良好”库后，事实证明这是由于它位于表格单元格中！

这里有一些你可以玩的代码！[http://jsfiddle.net/XVHTk/](http://jsfiddle.net/XVHTk/) 但是，当检查“规范化 CSS”时它确实有效，所以它可能是从单元格继承的填充？

[编辑#2]

正确的。

所以。

事实证明，将 CSS 样式应用于表格以删除填充、边距和边框等是不够的。您必须在表定义中包含 cellpadding="0" 和 cellspacing="0" 否则 jQuery 选项卡周围有一些额外的填充。

奇怪的。

带表格的 jsFiddle，没有其他功能：http: [//jsfiddle.net/XVHTk/1/](http://jsfiddle.net/XVHTk/1/)

jsFiddle与表间距/填充剥离：http: [//jsfiddle.net/XVHTk/2/](http://jsfiddle.net/XVHTk/2/)

为什么将 HTML 单元格属性转移到选项卡中，我不知道。我很高兴能修复它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:08:44.167

这是由`ui-helper-clearfix`类中的错误引起的。请参阅[票证 #8442](http://bugs.jqueryui.com/ticket/8442)和[相关的修复](https://github.com/jquery/jquery-ui/commit/cb42ee7ccdf6e32be14341a34a037c7f4508c157)。从票证中可以看出，这已在 1.10.1 中修复。我创建了一个小提琴，显示它[在 1.10.1 中正常工作，](http://jsfiddle.net/XVHTk/9/)并[使用 1.8.x 和额外的 CSS 来解决这个问题](http://jsfiddle.net/XVHTk/10/)。后者表明，如果你现在不能升级到 1.10.1+，你可以只包含以下 CSS：

```
.ui-helper-clearfix:after {
    border-collapse: collapse;
} 
```

# javascript - 如何找到 js 循环中的最后一项，以便向其中添加类？

> ID：10592528
> 
> 赞同：3
> 
> 时间：2012-05-14T23:56:08.530
> 
> 标签：javascript, jquery

我想建立一个列表。没问题。

```
for (i = 0; i < 7; i++) {
    $('#domid').append(variable.clone());
} 
```

如何获取列表中的最后一项（在本例中为 i.7）并向其添加类？

```
for (i = 0; i < 7; i++) {
    $('#domid').append(variable.clone());

    if (i===7) {
        $('.domclass').addClass('last');
    };

} 
```

但这行不通。当计数器达到 7 时，这只会使所有 .todo 项目都具有类。

关于如何找到这个的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T23:57:32.457

```
$('.domclass:last').addClass('last'); 
```

或者，如果您想在循环中执行此操作（因此，正如评论者指出的那样，您不必遍历 DOM 即可再次访问该元素）：

```
var newElement;

for(var i = 0; i < 7; i++){
    newElement = variable.clone();
    $('#domid').append(newElement);
    if(i === 6) {
        $(newElement).addClass('last');
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T01:01:21.070

`i`从不等于`7`，因为循环运行 while`i < 7`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T00:00:15.450

`eq()`反向索引计数。

```
$('.domclass:eq(-1)'); 
```

[http://api.jquery.com/eq/](http://api.jquery.com/eq/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T00:05:12.220

一种方法是在循环中存储对克隆项目的引用：

```
var i,
    $item,
    $domid = $('#domid');

for (i = 0; i < 7; i++) {
    $item = variable.clone();
    $domid.append($item);
}

$item.addClass('last'); 
```

当循环结束`$item`时将是最后一个添加的。当然，这假设循环将始终运行至少一次迭代 - 如果迭代次数是可变的并且可能为零，您可以说：

```
if ($item) $item.addClass('last'); 
```

（请注意，我还存储了对`#domid`元素的引用，而不是在每次迭代时重新选择它。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T00:34:56.777

这是他我会怎么做的：

```
var $domid = $( '#domid' );

for ( var i = 0; i < 7; i+= 1 ) {
    $domid.append( variable.clone() );
}

$domid.children( ':last' ).addClass( 'last' ); 
```

# c# - 签署自动下载的exe

> ID：10592533
> 
> 赞同：1
> 
> 时间：2012-05-14T23:56:47.417
> 
> 标签：c#, .net, certificate, exe, auto-update

我有一个应用程序，最初将由用户下载和安装。要更新应用程序，应用程序本身将

1.  检查是否存在新版本
2.  如果是，请下载新版本（由 installshield le 创建的 setup.exe 文件与 vs2010 捆绑）
3.  然后应用程序启动一个新的 System.Diagnostics.Process 以安装新软件（当前运行的软件已关闭、卸载并由 Installshield 安装新版本）

我希望能够确保该 exe 受信任以防止任何 Web 服务黑客攻击。
实现这一目标的最佳方法是什么？我需要在我的 c# .net wpf 应用程序中进行验证。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T00:58:42.520

您需要从受信任的权威机构购买验证码代码签名证书（我们使用了 godaddy，但还有很多其他的），并使用它来签署[安装程序中的所有可执行文件](http://msdn.microsoft.com/en-us/library/ms537364%28v=vs.85%29.aspx) ~~（作为使用 signtool.exe 的构建后任务）~~（有关详细信息，[请参阅此处](http://kb.flexerasoftware.com/selfservice/microsites/search.do?cmd=displayKC&docType=kc&externalId=InstallShield2011Express-DigitalSignaturehtm&sliceId=&docTypeID=DT_MACROVISIONHELPNET_1_1&dialogID=128262273&stateId=0%200%20128254886)）和[installshield 生成的安装程序](http://kb.flexerasoftware.com/selfservice/microsites/search.do?cmd=displayKC&docType=kc&externalId=InstallShield2011Express-DigitalSignaturehtm&sliceId=&docTypeID=DT_MACROVISIONHELPNET_1_1&dialogID=128262273&stateId=0%200%20128254886)，当您构建安装包时。

当您的更新过程下载新的安装程序包时，您可能会选择在部署之前[检查签名是否受信任。](http://geekswithblogs.net/robp/archive/2007/05/04/112250.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T23:59:55.060

有关签署程序集的信息，请参阅[http://msdn.microsoft.com/en-us/library/xc31ft41.aspx 。](http://msdn.microsoft.com/en-us/library/xc31ft41.aspx)

这篇文章对你也很有用：[http ://www.c-sharpcorner.com/uploadfile/puranindia/signing-an-assembly-in-C-Sharp/](http://www.c-sharpcorner.com/uploadfile/puranindia/signing-an-assembly-in-C-Sharp/)

确保您用于签署程序集的私钥安全。另请参阅[C#：为什么要签署程序集？](https://stackoverflow.com/questions/3975723/c-why-sign-an-assembly).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T00:02:37.440

从已知的 HTTPS 位置下载可能就足够了。您可以检查服务器证书以确保您正在与正确的证书交谈。

考虑使用[ClickOnce 部署](http://msdn.microsoft.com/en-US/library/t71a733d%28v=vs.100%29.aspx)而不是定制部署...

# jquery - jQuery 设置值取决于 tagName

> ID：10592537
> 
> 赞同：1
> 
> 时间：2012-05-14T23:57:31.690
> 
> 标签：jquery

# 原始问题

是否有一个 jQuery 方法可以检查选择类型并适当地设置值？例如，使用 .html() 或 .val()。

我已经制定了自己的方法来为我完成这项工作，但是我不确定这是否是执行这项任务的最佳方式。

```
$.fn.data = function(value) {
    if(this.is("input")){
        this.val(value);
    }else if(... other type ...){
        this.val(value);
    }else{
        this.html(value);
    }
}; 
```

我也看过使用 tagName 属性。var type = this.prop("tagName").toLowerCase();

**编辑：**

# 基准测试

对于任何感兴趣的人，我在 this.tagName; 之间做了一些基准测试。和 $(this).is("input"); 有 10,000 条记录。

`this.tagName.toLowerCase();`x 10,000 条记录 = 185 毫秒

`$(this).is("input");`x 10,000 条记录 = 1676 毫秒

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T00:04:48.023

在这里，您可以使用插件格式：

```
$.fn.setVal = function(value) {

    return this.each(function() {

        if ($.inArray( this.tagName.toLowerCase(), ['input', 'textarea', 'select'] ) != -1) {
            $(this).val( value );
        } else {
            $(this).text( value );
        }       
    });
}; 
```

按如下方式使用它：

```
$('input, span').setVal('Some Value'); 
```

* * *

在这里查看它的实际效果：http: [//jsfiddle.net/fkHLc/](http://jsfiddle.net/fkHLc/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T23:59:57.123

由于`.val`主要用于元素，您可以使用[选择器](http://api.jquery.com/input-selector/)`input`编写一些内容：[`:input`](http://api.jquery.com/input-selector/)

```
if (this.is(":input")) {
   this.val(value);
} else { 
   this.html(value);
} 
```

或者，如果您想更具体，可以使用[多重选择器](http://api.jquery.com/multiple-selector/)：

```
if (this.is("input, textarea, select" /*, etc. */) {
    this.val(value);
} else {
    this.html(value);
} 
```

# amazon-s3 - 用于只读和一次写入访问的 Amazon S3 ACL

> ID：10592541
> 
> 赞同：62
> 
> 时间：2012-05-14T23:58:15.363
> 
> 标签：amazon-s3, acl

我正在开发一个 Web 应用程序，我目前已将以下 ACL 分配给它用于访问其数据的 AWS 账户：

```
{
  "Statement": [
    {
      "Sid": "xxxxxxxxx", // don't know if this is supposed to be confidential
      "Action": [
        "s3:*"
      ],
      "Effect": "Allow",
      "Resource": [
        "arn:aws:s3:::cdn.crayze.com/*"
      ]
    }
  ]
} 
```

但是，我想让这更具限制性，这样如果我们的 AWS 凭证被泄露，攻击者就无法破坏任何数据。

从文档来看，我似乎只想允许以下操作：`s3:GetObject`and `s3:PutObject`，但我特别希望该帐户只能创建尚不存在的对象 - 即应拒绝对现有对象的 PUT 请求。这可能吗？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-05-15T01:04:27.390

[这在Amazon S3](http://aws.amazon.com/s3/)中是不可能的，就像您想象的那样；[但是，您可以通过使用版本控制](http://docs.amazonwebservices.com/AmazonS3/latest/dev/Versioning.html)来解决这个限制，这*是一种将对象的多个变体保留在同一个存储桶中的方法*，并且在开发时考虑了这样的用例：

> 您可以启用版本控制以防止对象被错误地删除或覆盖，或者存档对象以便您可以检索它们的先前版本。

还有一些相关的常见问题解答，例如：

*   [什么是版本控制？](http://aws.amazon.com/s3/faqs/#What_is_Versioning)-*版本控制允许您保留、检索和恢复存储在 Amazon S3 存储桶中的每个对象的每个版本。为存储桶启用版本控制后，只要您对现有对象执行 PUT、POST、COPY 或 DELETE 操作，Amazon S3 就会保留它们。默认情况下，GET 请求将检索最近写入的版本。可以通过在请求中指定版本来检索被覆盖或删除的对象的旧版本。*

*   [为什么要使用版本控制？](http://aws.amazon.com/s3/faqs/#Why_should_I_use_Versioning)- *Amazon S3 为客户提供高度耐用的存储基础设施。版本控制通过在客户意外覆盖或删除对象时提供一种恢复方式来提供额外的保护。**这使您可以轻松地从意外的用户操作和应用程序故障中恢复**。您还可以使用版本控制来保留和归档数据。[强调我的]*

*   [版本控制如何防止我的对象被意外删除？](http://aws.amazon.com/s3/faqs/#How_does_Versioning_protect_me_from_accidental_deletion_of_my_objects)-*当用户对对象执行 DELETE 操作时，后续的默认请求将不再检索该对象。但是，该对象的所有版本将继续保留在您的 Amazon S3 存储桶中，并且可以检索或恢复。**只有 Amazon S3 存储桶的所有者可以永久删除版本。**[强调我的]*

如果您真的非常重视存储桶所有者的 AWS 凭证（当然，他们可能与访问用户不同），您甚至可以更进一步，请参阅[如何确保最大程度地保护我的保留版本？](http://aws.amazon.com/s3/faqs/#How_can_I_ensure_maximum_protection_of_my_preserved_versions)：

> 版本控制的 MFA 删除功能使用[多重身份验证](http://aws.amazon.com/mfa/)，可用于提供额外的安全层。[...] 如果您在 Amazon S3 存储桶上启用带有 MFA 删除的版本控制，则需要两种形式的身份验证才能永久删除对象的版本：您的 AWS 账户凭证和来自身份验证的有效六位数代码和序列号您实际拥有的设备。[...]

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-06-30T11:56:29.337

如果这是您试图避免的意外覆盖，并且您的业务需求允许在短时间内出现不一致，您可以在 Lambda 函数中执行回滚：

1.  制定“没有同名新对象”的政策。大多数时候它不会发生。要执行它：
2.  [在AWS Lambda 函数](http://docs.aws.amazon.com/lambda/latest/dg/with-s3.html)中侦听 S3:PutObject 事件。
3.  触发事件时，检查是否存在多个版本。
4.  如果存在多个版本，请删除除最新版本之外的所有版本。
5.  通知上传者发生了什么（让原始上传者进入对象很有用`x-amz-meta-*`。更多信息[在这里](http://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectGET.html)）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-12-03T19:01:09.053

您现在可以使用 S3 对象锁定来锁定对象的版本。它是按桶设置的，允许您放置两种 WORM 锁中的一种。

*   “保留期” - 无法更改
*   “合法保留” - 可以由存储桶所有者随时更改

[https://docs.aws.amazon.com/AmazonS3/latest/dev/object-lock.html](https://docs.aws.amazon.com/AmazonS3/latest/dev/object-lock.html)

正如下面@Kijana Woodard 所提到的，这不会阻止创建新版本的对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-14T17:14:30.173

编辑：如果您从这个[问题](https://stackoverflow.com/questions/18157414/amazon-s3-policy-allowing-only-upload-not-overwrite)来到这里，则适用。

对象锁仅适用于版本化存储桶。如果您**不能**为您的存储桶启用版本控制，但可以容忍短暂的不一致，即假定文件存在，而 DELETE 仍在进行中（S3 仅最终一致）可能导致 PUT-after-DELETE 间歇性失败，如果在紧密循环中使用，或者相反，连续的 PUT 间歇性地错误地成功，则以下解决方案可能是合适的。

给定对象路径，读取对象的 Content-Length 标头（来自元数据，[HeadObject](https://docs.aws.amazon.com/AmazonS3/latest/API/API_HeadObject.html)请求）。仅当请求成功时写入对象，并且在适用的情况下，如果长度大于[零](https://aws.amazon.com/s3/faqs/#:%7E:text=Individual%20Amazon%20S3%20objects%20can%20range%20in%20size%20from%20a%20minimum%20of%200%20bytes)。

# php - 格式错误的 url php mysql

> ID：10592542
> 
> 赞同：1
> 
> 时间：2012-05-14T23:58:25.563
> 
> 标签：php, sql, malformed

我正在将 4 件事上传到我的网站。对于文件类型 3 和文件类型 4，我使用的是 dd_folder；但是当我尝试调用它时，我得到了类似的东西

url/dd_folder/dd_folder/(文件名)

这只发生在文件类型 4 上；这是我认为负责的代码

```
 else if (!empty($variables_array['item_file_url_' . $file_type]))
    {
        $file_name = $variables_array['item_file_url_' . $file_type];
        $embedded_code = ($this->setts['enable_embedded_media'] && $file_type == 2) ? $variables_array['embedded_code'] : 0;

        if ($create_row)
        {
            $this->upload_create_row($upload_item_id, $file_type, $file_name, $embedded_code);
        }
    }

    if ($file_type == 1) /* image */
    {
        $nb_uploads = $this->count_contents($variables_array['ad_image']);
        $variables_array['ad_image'][$nb_uploads] = $file_name;
    }
    else if ($file_type == 2) /* video */
    {
        $nb_uploads = $this->count_contents($variables_array['ad_video']);
        $variables_array['ad_video'][$nb_uploads] = $file_name;
    }
    else if ($file_type == 3) /* digital media */
    {
        $nb_uploads = $this->count_contents($variables_array['ad_dd']);
        $variables_array['ad_dd'][$nb_uploads] = str_replace($this->setts['dd_folder'], '', $file_name);
    }
    else if ($file_type == 4) /* 4.18.2012 torrent support */
    {
        $nb_uploads = $this->count_contents($variables_array['ad_torrent']);
        $variables_array['ad_torrent'][$nb_uploads] = str_replace($this->setts['dd_folder'], '', $file_name);
    } 
```

我认为正在发生的事情是在其他 3 个不同的文件上传期间，第一个 dd_folder 位被删除。然而，当我为文件类型 4 尝试它时，它出于某种原因保留它。任何人都可以帮助解决这个问题吗？

# c - 这是做什么的？

> ID：10592547
> 
> 赞同：2
> 
> 时间：2012-05-14T23:59:20.317
> 
> 标签：c, binary

> **可能重复：**
> [C 中的三元（条件）运算符](https://stackoverflow.com/questions/758849/the-ternary-conditional-operator-in-c)

这是我的老师帮助下的代码示例。我不知道是什么`total = total*2+ (n=='1'? 1:0);`。我认为它将总数乘以 2，但问号和`1:0`比率是什么？

```
int bcvt(FILE *infile){
  char n;
  int i, total=0;
  for(i=0; i<32; i++){    
    fscanf(infile, "%c", &n);
    total = total*2+ (n=='1'? 1:0);
  }
  char dummy;
  fscanf(infile, "%c", &dummy);
  return total;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T00:03:46.840

该声明

```
(n=='1'? 1:0) 
```

相当于

```
if ( n == '1' ) return 1
else return 0 
```

因此，如果 n 为“1”，则返回 1，否则返回 0。

格式为：

```
( expression ? if-true-return-this-value : else-return-this-value ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T00:03:26.917

它类似于 if 语句。视情况是否

`n=='1'`

是真或假，操作将返回 (1:0) 的左侧为真，右侧为假。

这些值可以是任何东西。1 和 0 在这里是随机的。

```
if (n == '1') {
   return 1;
}
else {
   return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T00:03:31.987

这里的条件运算符是这样做的：“如果 n 等于 1，则使用 1，否则使用 0”。因此它将根据 n 的值将 1 或 0 添加到第一个表达式。

这是编写 if/else 语句的另一种方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T00:04:19.333

这个表达式 "(n=='1'? 1:0)" 等价于`if ( n == '1') return 1; else return 0;` 如前所述，它是 C 中的三元（条件）运算符。

我猜你的代码正在加载，然后将二进制字符串“0001010”转换为整数。

# python - Python 摄取带有 IP 的文本文件来进行 LAN 网络管理

> ID：10592553
> 
> 赞同：2
> 
> 时间：2012-05-14T23:59:57.370
> 
> 标签：python

我正在尝试管理我控制的网络中的多个 cisco 交换机。我只是想使用 pexpect 登录每个设备以检查正常运行时间，只是为了每天早上留意设备没有重新启动。

我有 pexpect 部分工作，但我想在一个文本文件中列出设备的所有 IP，然后使用 python 脚本，让它摄取这些 IP，然后一个接一个地登录到设备并显示版本命令。也许，如果我将 pexpect 命令定义为一个模块，这将起作用，但不知道如何做到这一点。我是 python 新手并试图找到答案，但经过多次谷歌搜索后，空无一物，所以想在这里尝试。

下面是我尝试自动执行此操作，但它不起作用。

这是我到目前为止所拥有的。

```
import pexexpect
list=raw_input('Type in name of text file:' )
fo=file(list, 'r')
tt=fo.readlines()
fo.close()

for ip in tt:
    load(ip) 

child=pexpect.spawn("telnet ip") 
child.expect("password:*")
child.sendline("mypassword") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T00:27:09.963

```
for ip in tt:
    child = pexpect.spawn("telnet %s" % ip)
    ... 
```

除此之外，使用`open`not `file`，您不需要阅读这些行，您可以简单地迭代文件对象。好的是将 pexpect 的东西提取到一个函数中：

```
def inspect_ip(ip):
    .... 
```

# mysql - 如何将 NOT IN 子查询重写为连接

> ID：10592554
> 
> 赞同：2
> 
> 时间：2012-05-15T00:00:00.660
> 
> 标签：mysql, sql, join, subquery

假设 MySQL 中的以下表格描述了文件夹中包含的文档。

```
mysql> select * from folder;
+----+----------------+
| ID | PATH           |
+----+----------------+
|  1 | matches/1      |
|  2 | matches/2      |
|  3 | shared/3       |
|  4 | no/match/4     |
|  5 | unreferenced/5 |
+----+----------------+

mysql> select * from DOC;
+----+------+------------+
| ID | F_ID | DATE       |
+----+------+------------+
|  1 |    1 | 2000-01-01 |
|  2 |    2 | 2000-01-02 |
|  3 |    2 | 2000-01-03 |
|  4 |    3 | 2000-01-04 |
|  5 |    3 | 2000-01-05 |
|  6 |    3 | 2000-01-06 |
|  7 |    4 | 2000-01-07 |
|  8 |    4 | 2000-01-08 |
|  9 |    4 | 2000-01-09 |
| 10 |    4 | 2000-01-10 |
+----+------+------------+ 
```

列 ID 是主键，表 DOC 的列 F_ID 是引用表 FOLDER 主键的非空外键。通过在 where 子句中使用文档的“日期”，我想查找哪些文件夹仅包含选定的文档。对于早于 2000-01-05 的文档，可以这样写：

```
SELECT DISTINCT d1.F_ID 
FROM DOC d1 
WHERE d1.DATE < '2000-01-05' 
AND d1.F_ID NOT IN (
    SELECT d2.F_ID 
    FROM DOC d2 WHERE NOT (d2.DATE < '2000-01-05')
); 
```

它正确返回“1”和“2”。通过阅读 [http://dev.mysql.com/doc/refman/5.5/en/rewriting-subqueries.html](http://dev.mysql.com/doc/refman/5.5/en/rewriting-subqueries.html) ，如果将子查询替换为连接，则可以提高大表的性能。我已经找到了与 NOT IN 和 JOINS 相关的问题，但并不是我想要的。那么，关于如何用 joins 编写它的任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T00:03:25.583

一般的答案是：

```
select t.*
from t
where t.id not in (select id from s) 
```

可以改写为：

```
select t.*
from t left outer join
     (select distinct id from s) s
     on t.id = s.id
where s.id is null 
```

我认为您可以将此应用于您的情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T00:02:47.787

```
select distinct d1.F_ID
from DOC d1
left outer join (
    select F_ID
    from DOC 
    where date >= '2000-01-05'
) d2 on d1.F_ID = d2.F_ID
where d1.date < '2000-01-05' 
    and d2.F_ID is null 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T00:22:27.967

如果我正确理解您的问题，您想找到代表仅包含“2000-01-05”之前的文档的文件夹的 F_ID，那么只需

```
SELECT F_ID 
FROM DOC 
GROUP BY F_ID 
HAVING MAX(DATE) < '2000-01-05' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-30T14:26:06.350

示例表和插入语句

```
CREATE TABLE `tleft` (
  `id` int(2) NOT NULL,
  `name` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8

CREATE TABLE `tright` (
  `id` int(2) NOT NULL,
  `t_left_id` int(2) DEFAULT NULL,
  `description` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8

INSERT INTO `tleft` (`id`, `name`)
VALUES
    (1, 'henry'),
    (2, 'steve'),
    (3, 'jeff'),
    (4, 'richards'),
    (5, 'elon');

INSERT INTO `tright` (`id`, `t_left_id`, `description`)
VALUES
    (1, 1, 'sample'),
    (2, 2, 'sample'); 
```

**左连接：** `SELECT l.id,l.name FROM tleft l LEFT JOIN tright r ON l.id = r.t_left_id ;`

返回 ID：1、2、3、4、5

**右加入：** `SELECT l.id,l.name FROM tleft l RIGHT JOIN tright r ON l.id = r.t_left_id ;`

返回编号：1,2

**子查询不正确：** `select id from tleft where id not in ( select t_left_id from tright);`

返回 ID : 3,4,5

**等效连接对于上述子查询：**

```
SELECT l.id,l.name FROM tleft l LEFT JOIN tright r ON l.id = r.t_left_id WHERE r.t_left_id IS NULL; 
```

`AND`子句将在 JOIN 期间应用，`WHERE`子句将在 JOIN 之后应用。

**例子 ：** `SELECT l.id,l.name FROM tleft l LEFT JOIN tright r ON l.id = r.t_left_id AND r.description ='hello' WHERE r.t_left_id IS NULL ;`

希望这可以帮助

# iphone - 在 UIButton 中开始单击，但在主视图中使用 touchesEnded

> ID：10592559
> 
> 赞同：3
> 
> 时间：2012-05-15T00:00:40.460
> 
> 标签：iphone, objective-c, interface-builder, uibutton

例如，我有一个`UIButton`放在 IB 中的。

这`UIButton`有两个功能，具体取决于它是只是在内部修饰还是拖到外部 - 至少保持它在内部修饰的功能会很好。

我想点击我的按钮并“拖到外面”，但是`-touchesEnded`当我最终释放我的点击时，我会在一个矩形上使用。

我知道一种选择是放弃`UIButton`并使用`-touchesBegan`遮罩，但这需要付出更多的努力，并且需要进行很大的重写（考虑到 96 个按钮）。

所以稍微改一下 - 我点击了一个按钮并按住鼠标，同时将光标（/finger）拖动到我视图中的不同点，我希望我的视图`-touchesEnded`在我最终放手时能够识别a。问题是初始点击被绑定在按钮中，所以`-touchesEnded`在我的主视图中不会发生......

我试图以错误的方式做到这一点吗？另外，我说清楚了吗？

编辑：@Heckman 在下面很好地表达了这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T00:59:39.280

如果我正确理解您的问题，您正在触摸一个按钮，该按钮包含在某个 UIView 中，并且希望能够将您的手指拖出并识别按钮超级视图中的点。

在我看来，您应该从按钮检测按钮按下，然后调用`[UIButton superview]`, 告诉超级视图有关按下按钮的开始，然后在视图中处理触摸结束。

要通知按下的按钮的超级视图，请调用类似（来自您的 UIButton）：

```
-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    [self.superview buttonPressed:self]
}
-(void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    [self.superview touchesEnded:touches withEvent:event];
} 
```

在您的超级视图代码中（如果您有属性 buttonPressed）：

```
-(void) buttonPressed:(UIButton *) button {
    _buttonPressed = button;
}
-(void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    if(self.buttonPressed) {
         //Process the release from your drag here. 
         for(UITouch * touch in touches) {
         //Use either of these to get the release position that you care about.
             CGPoint releaseLocationInCurrentView = [touch locationInView:self];
             CGPoint releaseLocationInButtonView = [touch locationInView:[self.buttonPressed]];
         }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T00:30:51.333

您也许可以在您的 UIView 上使用[UIPanGestureRecognizer 。](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIPanGestureRecognizer_Class/Reference/Reference.html)

下面是一些关于如何实现手势识别器的[示例代码。](http://www.icodeblog.com/2010/10/14/working-with-uigesturerecognizers/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T05:59:54.043

如果您正在寻找与 iphone 主屏幕图标相同的可拖动项目，那么您可以查看 Three20 框架中的 TTLauncherView 示例。[http://three20.info/showcase/launcher](http://three20.info/showcase/launcher)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-23T16:02:11.870

所以，这就是我最终做的事情，而且效果很好：

我在 touchdragexit 上的 UIButton 被分配给 IBAction

```
-(IBAction)dragPoint:(id)sender {

//Do Something Useful in here - I assign the value to an Array that I can recall when I touch up inside one of 16 buttons

//Now pass the button touch on as a touch up outside

[myButton addTarget:self action:@selector(dragBegan:withEvent:) forControlEvents: UIControlEventTouchUpOutside];
} 
```

所以现在我像这样得到我的dragBegan：

```
- (void)dragBegan:(UIControl *)c withEvent:ev {

UITouch *touch = [[ev allTouches] anyObject];
CGPoint touchPoint = [touch locationInView:self.view]; // Get location of the moment I release the touch (touch up outside)

//now some long convoluted code to give me the location of a row of 16 buttons, of which I would like to know which one I touched up inside

UIButton *posButton;
int pos;

if(628.00<(touchPoint.y) && (touchPoint.y)<664.00){
    if ((39.00<touchPoint.x && touchPoint.x<91.00) || (92.00<touchPoint.x && touchPoint.x<144.00) || (145.00<touchPoint.x && touchPoint.x<197.00) || (198.00<touchPoint.x && touchPoint.x<250.00)||(264.00<(touchPoint.x) && touchPoint.x<314.00)||(317.00<(touchPoint.x) && touchPoint.x<367.00)||(370.00<(touchPoint.x) && touchPoint.x<420.00)||(423.00<(touchPoint.x) && touchPoint.x<473.00)||(488.00<(touchPoint.x) && touchPoint.x<538.00) || (541.00<(touchPoint.x) && touchPoint.x<591.00) || (594.00<(touchPoint.x) && touchPoint.x<644.00) || (647.00<(touchPoint.x) && touchPoint.x<697.00)||(712.00<(touchPoint.x) && touchPoint.x<762.00)||(765.00<(touchPoint.x) && touchPoint.x<815.00)||(818.00<(touchPoint.x) && touchPoint.x<868.00)||(871.00<(touchPoint.x) && touchPoint.x<921.00)){

    if(39.00<(touchPoint.x) && touchPoint.x<91.00){
        posButton = SeqA;
        pos=0;

    }
    else if(92.00<(touchPoint.x) && touchPoint.x<144.00){
        posButton = SeqB;
        pos=1;

    }
    else if(145.00<(touchPoint.x) && touchPoint.x<197.00){
        posButton = SeqC;
        pos=2;

    }
    else if(198.00<(touchPoint.x) && touchPoint.x<250.00){
        posButton = SeqD;
        pos=3;

    }
        else if(264.00<(touchPoint.x) && touchPoint.x<314.00){
            posButton = SeqE;
            pos=4;

        }
        else if(317.00<(touchPoint.x) && touchPoint.x<367.00){
            posButton = SeqF;
            pos=5;

        }
        else if(370.00<(touchPoint.x) && touchPoint.x<420.00){
            posButton = SeqG;
            pos=6;

        }
        else if(423.00<(touchPoint.x) && touchPoint.x<473.00){
            posButton = SeqH;
            pos=7;

        }

        else if(488.00<(touchPoint.x) && touchPoint.x<538.00){
            posButton = SeqI;
            pos=8;

        }
        else if(541.00<(touchPoint.x) && touchPoint.x<591.00){
            posButton = SeqJ;
            pos=9;

        }
        else if(594.00<(touchPoint.x) && touchPoint.x<644.00){
            posButton = SeqK;
            pos=10;

        }
        else if(647.00<(touchPoint.x) && touchPoint.x<697.00){
            posButton = SeqL;
            pos=11;

        }

        else if(712.00<(touchPoint.x) && touchPoint.x<762.00){
            posButton = SeqM;
            pos=12;

        }
        else if(765.00<(touchPoint.x) && touchPoint.x<815.00){
            posButton = SeqN;
            pos=13;

        }
        else if(818.00<(touchPoint.x) && touchPoint.x<868.00){
            posButton = SeqO;
            pos=14;

        }
        else if(871.00<(touchPoint.x) && touchPoint.x<921.00){
            posButton = SeqP;
            pos=15;

        } 
```

现在根据你在里面触摸的按钮做一些事情

我做的其他事情 - 我创建了一个原始 UIButton 的掩码作为 UIImageView 我在 touchdragoutside 事件中取消隐藏（并在上面的 touchupinside 上重新出价）所以我有一个可以拖动的按钮

# css - CSS Sprite 导航问题

> ID：10592566
> 
> 赞同：0
> 
> 时间：2012-05-15T00:01:32.563
> 
> 标签：css, html-lists, sprite

我已经建立了一个 CSS Sprite Navigation。导航功能正常，除非您的 UL 列表与样式表的顺序不同，或者不使用所有 li 元素。您可以在此处查看示例： [http](http://www.reneebuller.com/_temp/navigation.html) ://www.reneebuller.com/_temp/navigation.html （有效） [http://www.reneebuller.com/_temp/navigation1.html](http://www.reneebuller.com/_temp/navigation1.html)（nav2和nav3切换）（然后去到 nagvigation2.html nav 2 被删除...抱歉我不能发布另一个链接，因为我是新手并且仅限于两个）

您将在后面的两个示例中看到文本发生了一些事情。我不知道发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T00:06:19.863

您还需要更改 ID 的名称。这是错误的：

```
<li id="navThree"><a class="" href="#">Two</a></li> 
```

即使倒置，这也可以正常工作：

```
<li id="navThree"><a class="" href="#">Three</a></li>
<li id="navTwo"><a class="" href="#">Two</a></li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T00:09:04.337

在第一个示例中使用的第二个示例中没有任何 CSS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T05:02:58.320

嗨，我已经看到您已经制作了完全基于图像的导航，我认为您可以通过纯 css 轻松进行此导航，而不是您可以在 css 导航中轻松进行更改。

请检查我已经制作了类似于您的导航的纯 css 导航我希望这会对您有所帮助：- [http://jsfiddle.net/YRjE8/10/](http://jsfiddle.net/YRjE8/10/)

# c++ - 捕获异常时可以使用 gdb 进行回溯吗？

> ID：10592568
> 
> 赞同：23
> 
> 时间：2012-05-15T00:01:42.110
> 
> 标签：c++, exception, exception-handling, gdb

我刚刚开始使用 c++ 异常，并且想把它弄好。我的想法是在捕获异常时生成某种回溯信息。[最初我对C++ 中的异常](https://stackoverflow.com/questions/3222890/call-stack-for-exceptions-in-c)有类似于 Call-stack 的想法，但最终发现这不是很好。

我还阅读[了如何在我的 gcc C++ 应用程序崩溃](https://stackoverflow.com/questions/77005/how-to-generate-a-stacktrace-when-my-gcc-c-app-crashes)但不想为我当前的项目增加更多复杂性时生成堆栈跟踪。因为，我只需要在调试模式下进行回溯，我希望我可以为此目的使用 gdb。

我的策略是在`catch`块中插入断点，然后向上通过调用堆栈来准确查明首先引发异常的原因（或导致异常的原因）？不幸的是，我似乎无法做到这一点，因为当 gdb 到达断点时，它会清除调用堆栈，我只能看到 main （这就是我捕获的地方）。这应该发生还是我在这里做错了什么？

**编辑：** 我只是想在这里为其他人总结一下方法：

第一种方法（通过 paulsm4）。通过设置一个`catch throw`接球点来接球或`catch catch`接球！然后打电话`backtrace`

第二种方法（通过 aschepler）设置断点`__cxa_throw`，然后`backtrace`

第三种方法（在 Qt Creator 中——如果您碰巧使用）您可以轻松地在 throw 或 catch 上设置断点！

**Edit_2：**使用Qt Creator调试器，似乎设置断点`__cxa_begin_catch`也相当于`catch catch`:)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-15T00:04:36.223

这个：

> [http://sourceware.org/gdb/onlinedocs/gdb/Set-Catchpoints.html](http://sourceware.org/gdb/onlinedocs/gdb/Set-Catchpoints.html)
> 
> 您可以使用捕获点使调试器停止某些类型的程序事件，例如 C++ 异常或共享库的加载。使用 catch 命令设置一个捕获点。

所以答案应该是“是”，它应该避免你引用的两个链接的问题。

如果有帮助请回帖！就个人而言，我自己从未尝试过这个 GDB 功能 :)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-11T20:34:59.727

评论中的答案摘要：

第一种方法（通过 paulsm4）。通过设置一个`catch throw`接球点来接球或`catch catch`接球！然后打电话`backtrace`

第二种方法（通过 aschepler）设置断点`__cxa_throw`，然后`backtrace`

第三种方法（在 Qt Creator 中——如果您碰巧使用）您可以轻松地在 throw 或 catch 上设置断点！

使用 Qt Creator 调试器，似乎设置断点 on`__cxa_begin_catch`也相当于`catch catch`

# windows - 如何在 win32 汇编程序（特别是 nasm）中获得脉冲？

> ID：10592572
> 
> 赞同：2
> 
> 时间：2012-05-15T00:02:33.133
> 
> 标签：windows, assembly, nasm

我打算做一个时钟。一个真正的时钟，不是 Windows 的东西。但是，我希望现在能够编写大部分代码。我将使用 PIC16F628A 来驱动时钟，它有一个我可以访问的计时器（实际上，除了它内置的时钟之外，它还有 3 个）。但是，Windows 似乎没有此功能。这使得制作时钟有点困难，因为我需要知道它已经过了多长时间，这样我才能更新当前时间。因此，我需要知道如何在 Windows 中获得脉冲（1Hz、1KHz，只要我知道它有多快，这并不重要）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T02:09:52.293

Windows 中有许多可用的计时器对象。可能最容易用于您的目的是多媒体计时器，但已被弃用。它仍然可以工作，但 Microsoft 建议使用其中一种新的计时器类型。

如果您知道您的应用程序将在 Windows Vista、Server 2008 或更高版本下运行，我建议您使用[线程池计时器。](http://msdn.microsoft.com/en-us/library/ms682466%28v=VS.85%29.aspx)如果您必须支持 Windows XP，请使用[Timer Queue timer](http://msdn.microsoft.com/en-us/library/ms686796%28v=VS.85%29.aspx)。

这些 API 有很多，但一般用途非常简单。我在文章[Using the Windows Timer Queue API](http://www.informit.com/guides/content.aspx?g=dotnet&seqNum=817)中展示了如何使用它们（在 C# 中） 。代码主要是 API 调用，所以我认为您理解和转换它不会有问题。

[LARGE_INTEGER](http://msdn.microsoft.com/en-us/library/aa383713%28v=vs.85%29.aspx)只是一个 8 字节的内存块，分为高部分和低部分。在汇编中，您可以将其定义为：

```
MyLargeInt equ $
MyLargeIntLow dd 0
MyLargeIntHigh dd 0 
```

如果您想学习 ASM，只需在 Google 上搜索 [x86 汇编语言教程]。这会给你带来很多很好的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T00:16:43.410

您可以使用可等待的[计时器对象](http://msdn.microsoft.com/en-us/library/ms687008%28v=vs.85%29)。由于 Windows 不是实时操作系统，因此您需要确保将周期设置得足够长，以免错过脉冲。大多数时候十分之一秒应该是安全的。

*额外的：*

您需要传递给 SetWaitableTimer在`const LARGE_INTEGER`NASM 中很容易实现，它只是一个八字节常量：

```
period:   dq 100    ; 100ms = ten times a second 
```

将地址`period`作为第二个参数传递给 SetWaitableTimer。

# css - 指南针精灵生成过多的 CSS 类

> ID：10592574
> 
> 赞同：7
> 
> 时间：2012-05-15T00:02:42.590
> 
> 标签：css, sass, sprite, compass-sass

我正在使用指南针生成精灵图像。而且我有很多精灵图标，它生成了太多的 CSS 代码（背景图像的类选择器太多）。那么让我们分析一下指南针精灵代码：

正如你在这里看到的[http://compass-style.org/help/tutorials/spriting/](http://compass-style.org/help/tutorials/spriting/)

```
@import "my-icons/*.png";
@include all-my-icons-sprites; 
```

会产生：

```
.my-icons-sprite,
.my-icons-delete,
.my-icons-edit,
.my-icons-new,
.my-icons-save   { background: url('/images/my-icons-s34fe0604ab.png') no-repeat; }

.my-icons-delete { background-position: 0 0; }
.my-icons-edit   { background-position: 0 -32px; }
.my-icons-new    { background-position: 0 -64px; }
.my-icons-save   { background-position: 0 -96px; } 
```

如果你看到我用这种方式：`<div class="my-icons-sprite my-icons-delete"></div>`

我希望 Compass 生成此代码：

```
.my-icons-sprite { background: url('/images/my-icons-s34fe0604ab.png') no-repeat; }

.my-icons-delete { background-position: 0 0; }
.my-icons-edit   { background-position: 0 -32px; }
.my-icons-new    { background-position: 0 -64px; }
.my-icons-save   { background-position: 0 -96px; } 
```

否则每个新图像，它将添加背景和背景位置。导致选择器过多。

有没有这样的配置？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T14:51:53.670

您是否尝试过 Compass 的此代码段？

```
$icons: sprite-map("icons/*.png");

i{
    background: $icons;
    display: inline-block; // or block
}

@each $i in sprite_names($icons){
    .icn-#{$i}{
        background-position: sprite-position($icons, $i);
        @include sprite-dimensions($icons, $i);
    }
} 
```

此示例将`<i></i>`-tag 与包含前缀`icn-`与图标文件夹中单独 .png 文件的文件名组合的类一起使用。像这样：

```
<i class="icn-delete"></i> 
```

生成的 CSS 如下所示：

```
i {
    background: url('/path/to/generated/spritemap/my-icons-xxxxxxxxxxx.png');
    display: inline-block;
}
.icn-delete {
     background-position: 0 0;
     height: 32px; // assuming the width is 32px
     width: 32px; // assuming the height is 32px
}
.icn-edit{
     background-position: 0 -32px;
     height: 32px; // assuming the width is 32px
     width: 32px; // assuming the height is 32px
}
.icn-new {
     background-position: 0 -64px;
     height: 32px; // assuming the width is 32px
     width: 32px; // assuming the height is 32px
}
...
..
. 
```

尽管如此，我还没有完全弄清楚如何将它与[Compass 的 Magic Selectors](http://compass-style.org/help/tutorials/spriting/magic-selectors/)结合使用。

当您需要不同的状态（:hover、:active、:target）时，Magic Selectors 非常有用。您所要做的就是像这样命名您的文件：filename_state.png（delete_hover.png、delete_active.png 等）。Compass 的魔法选择器会自动为 :hover、:active 和 :target 生成 css（delete:hover、delete_hover 和 delete-hover）。这样，您就可以完全自由地选择如何表示状态更改。

在我的第一个示例中，如果您的文件名带有悬停/活动状态的后缀，则该代码段仅会像这样编写 CSS：

```
.icn-edit_hover {
    background-position: -32px -32px;
    height: 32px;
    width: 32px;
} 
```

我真的很想让它打印这个：

```
.icn-edit:hover, .icn-edit_hover, .icn-edit-hover{
    background-position: 0 -32px;
    height: 32px;
    width: 32px;
} 
```

就像传统[指南针的魔术选择器](http://compass-style.org/help/tutorials/spriting/magic-selectors/)一样。任何想法？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T02:12:40.560

在我看来，两全其美（更少的 HTML 和 CSS）似乎是拥有这段代码（使用图像的属性选择器）：

**HTML**

```
<div class="my-icons-delete"></div> 
```

**CSS**

```
[class^="my-icons-"] { background: url('/images/my-icons-s34fe0604ab.png') no-repeat; }

.my-icons-delete { background-position: 0 0; }
.my-icons-edit   { background-position: 0 -32px; }
.my-icons-new    { background-position: 0 -64px; }
.my-icons-save   { background-position: 0 -96px; } 
```

不幸的是，我不知道如何让 Compass 像那样导出。但是，除非您动态使用 Compass 而不仅仅是构建后端静态 css，否则您可以在生成后更改它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-01T18:48:21.997

对于任何希望回答 ScottS 问题的人。如何将 css 选择器用于以基类开头的任何内容

试试这个： [http ://codepen.io/Acts7/pen/nwsEb](http://codepen.io/Acts7/pen/nwsEb)

我正在粘贴下面的代码。

spriteGen mixin 需要两个参数 1) 您要使用的基类（在 ScottS 的情况下 --- "myicons" 2）第二个参数是文件夹位置

也不要忘记“。” #{$mySpriteBaseClass} 之前。否则你会得到 >> myicons-home_icon{background-position:...} （注意没有 . 用于类名选择器）

```
// _custom.scss
// ---------------------------------------------------------
//  Sprite Generation
    --------------------- */
    @include spriteGen('sprites','sprites');

// _mixins.scss
// ---------------------------------------------------------
// Sprite Generation Mixin with options
@mixin spriteGen($mySpriteBaseClass:'.spritebc',$mySpriteFolder:'sprites'){
    $mySprites:$mySpriteFolder + "/*.png";
    $spritefoldername-map: sprite-map($mySprites,
        $spacing: 10px, 
        $layout: vertical
    );
    //  if using base class as starter for sprite name class
    [class^="#{$mySpriteBaseClass}"]{
    /*//    if using a separate base class
    .#{$mySpriteBaseClass}{*/
        //      TODO: 
        //      Add if/else to set width globally 
        //      or let spriting assign it per each
        //width: 48px;
        //height: 48px;
        display: inline-block;
        vertical-align: middle;
        background: $spritefoldername-map no-repeat;
    }

    @each $sprite in sprite_names($spritefoldername-map) {
        //  if using sprite base class as prefix to full sprite class name
        .#{$mySpriteBaseClass}-#{$sprite} {
        /*//    if using separate base class and sprite name class
        .#{$sprite} {*/
            background-position: sprite-position($spritefoldername-map, $sprite);
            @include sprite-dimensions($spritefoldername-map, $sprite);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-03T04:27:31.710

这就是我目前正在做的事情，但它需要 Sass 3.3：

```
$icons: sprite-map('icons/*.png');

.icon {
    background: $icons;
    display: inline-block;
    vertical-align: middle;
}

@each $i in sprite_names($icons) {

    $underscore: str-index($i, _);

    @if ($underscore < 1) {
        .icon--#{$i} {
            background-position: sprite-position($icons, $i);
            @include sprite-dimensions($icons, $i);
        }
    } @else {
        $prefix: str-slice($i, 0, $underscore - 1);
        $postfix: str-slice($i, $underscore + 1);

        .icon--#{$prefix}:#{$postfix} {
            background-position: sprite-position($icons, $i);
        }
    }

} 
```

我在这里使用 BEM，所以它假设你会使用这个 like `<i class="icon icon--star></i>`，所以如果你有一个“star.png”和“star_hover.png”图像，它会生成`.icon--star`和`.icon--star:hover`类名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-03T17:40:40.663

当前输出有什么问题？您已经可以只分配 my-icons-delete/edit/new/save，这已经足够语义化了 - 它已经说它是一个图标并且它是一个删除图标。

# grails - Bcrypt 密码编码器 - grails

> ID：10592577
> 
> 赞同：0
> 
> 时间：2012-05-15T00:03:06.107
> 
> 标签：grails, bcrypt, password-encryption

我在这里阅读了有关密码编码器的帖子，并看到了以下语法：

```
passwordEncoder.isPasswordValid(user.password, params.password, null) 
```

我已经在我的 grails 项目中使用了它，它有 bcrypt 密码加密插件并且效果很好。我只是好奇第三个参数的*值为空*是什么？感谢你的分享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T00:12:59.407

如果您使用盐，那是为了传递盐。

# java - 有没有一种简单的方法可以使用 RestEasy 通过 JSON 传递对象集合？

> ID：10592586
> 
> 赞同：1
> 
> 时间：2012-05-15T00:04:10.280
> 
> 标签：java, json, rest, jax-rs, resteasy

我目前正在使用 RestEasy 和 Angular.js。我正在尝试返回具有 json 中所有属性的对象集合或数组。但是当我执行下面的方法时，它只返回字符串格式的文件名的 JSON 结果。但我希望返回 File 类的所有属性。有没有一种简单的方法可以用 RestEasy 在 JSON 中做到这一点？

```
@GET
@Produces("application/json")
@Path("/details/{location}")
public File[] getFolderDetails(@PathParam("location") String location) {
    //List<File> folders = new ArrayList<File>();
    File folder = new File(DIRECTORY_LOCATION + "/" + location);
    File[] listOfFiles = folder.listFiles();
    File folders[] = new File[listOfFiles.length];
    int index = 0;
    for (File listOfFile : listOfFiles) {
        folders[index] = listOfFile;
        index++;
    }
    return folders;
} 
```

目前，此方法返回如下内容：

> ["C:\jboss-4.2.2.GA\server\all","C:\jboss-4.2.2.GA\server\default","C:\jboss-4.2.2.GA\server\minimal ","C:\jboss-4.2.2.GA\server\plu"]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T00:18:02.117

RESTEasy 可以处理基本的 java 对象，所以我会尝试一个 Map：

```
@GET
@Produces("application/json")
@Path("/details/{location}")
public List<Map<String, Object>> getFolderDetails(@PathParam("location") String location) {
    File folder = new File(DIRECTORY_LOCATION + "/" + location);
    File[] listOfFiles = folder.listFiles();
    List<Map<String, Object>> folders = new ArrayList<Map<String, Object>>();
    for (File file : listOfFiles) {
        Map<String, Object> item = new LinkedHashMap<String, Object>();
        item.put("name", file.getName());
        item.put("size", file.length());
        item.put("lastModified", file.lastModified());
        // etc, adding things that have values from java.lang.* package
        folders.add(folder);
    }
    return folders;
} 
```

# r - 如何强制显示带有 ggplot2 方面的空图？

> ID：10592591
> 
> 赞同：3
> 
> 时间：2012-05-15T00:04:38.227
> 
> 标签：r, ggplot2, facets

我正在为 R + ggplot2 中的两个数据集制作箱形图，并且我正在使用*构面*来打印基于两个因素的图网格。到目前为止一切都很好，关键是两个数据集之一完全缺少一个因子水平之一的值，因此我得到一个 5 x 5 的网格和一个 5 x 4 的网格，但这些网格是指进行比较，因此我想显示缺失值的空白图。那可能吗？

谢谢，托马索

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T00:13:39.480

引用文档`?facet_grid`：

> **drop**：如果为 TRUE，默认值，所有未在数据中使用的因子级别将被自动删除。如果为 FALSE，将显示所有因子水平，无论它们是否出现在数据中。

所以也许`drop = FALSE`？

# c# - 在 asp.net 应用程序的 web.config 文件中将编译调试更改为 false 导致页面无法正确重定向

> ID：10592594
> 
> 赞同：0
> 
> 时间：2012-05-15T00:04:48.663
> 
> 标签：c#, asp.net, web-config

我将编译调试从 true 更改为 false，现在当我尝试访问该站点时，我得到错误页面未正确重定向。该站点采用 SSL 封装，并使用 debug = true 进行部署，并且工作正常，但经过一些研究后，我了解到它应该是 debug = false。

错误描述是网页在无限循环中重定向您。我要去主页，我不知道无限循环是从哪里来的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T01:14:08.453

当您更改托管 Web 应用程序中的任何文件时，IIS 会丢弃应用程序池以及所有会话状态。因此，如果您在会话中存储某些内容，则当您依赖会话变量时，您的更改可能会触发应用程序中的某些逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T01:27:14.583

很难说出根本原因，但您应该尝试设置部署 retail=true 这使您不必更改 web.config 并进行其他“生产”更改。

[http://msdn.microsoft.com/en-us/library/ms228298(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms228298(v=vs.80).aspx)

# iphone - “变形”以查看 iPhone iOS

> ID：10592597
> 
> 赞同：0
> 
> 时间：2012-05-15T00:04:54.647
> 
> 标签：iphone, ios, uinavigationcontroller, logout

我目前正在开发基于导航控制器的应用程序。但是，当用户注销时，我想转到初始屏幕并销毁所有其他堆叠的视图。最好的方法是什么？

编辑：

我已经尝试按照两个答案的建议进行操作，但我得到了`nil` `navigationViewController`. 因此，我将添加另一个我认为以前没用的细节。实际上，我正在尝试从嵌入在 NavigationController 中的 TabViewController 执行此操作。如果这改变了任何事情，我深表歉意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T00:08:46.880

[self.navigationController popToRootViewControllerAnimated:YES];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T00:08:29.827

向导航控制器发送 popToRootViewControllerAnimated 消息

# java - 如何减少 Google App Engine Java 上 Appstats 的内存使用量

> ID：10592598
> 
> 赞同：0
> 
> 时间：2012-05-15T00:04:58.377
> 
> 标签：java, google-app-engine, objectify, siena, appstats

这与问题[Java Appengine APPSTATS 导致 java out of memory 错误有关](https://stackoverflow.com/questions/2663890/java-appengine-appstats-causing-java-out-of-memory-error)。

Appstats 似乎在 128MB 实例上导致 java.lang.OutOfMemoryError，我想知道是否有办法减少日志记录量。有没有办法从堆栈跟踪中过滤一些包名？

GAE API：

```
 @14ms memcache.Get real=7ms api=0ms
Stack:
  com.google.appengine.tools.appstats.Recorder:290 makeAsyncCall()
  com.google.apphosting.api.ApiProxy:184 makeAsyncCall()
  com.google.apphosting.api.ApiProxy:123 makeAsyncCall()
  com.google.appengine.api.memcache.MemcacheServiceApiHelper:104 makeAsyncCall()
  com.google.appengine.api.memcache.AsyncMemcacheServiceImpl:372 doGetAll()
  com.google.appengine.api.memcache.AsyncMemcacheServiceImpl:333 getIdentifiables()
  com.google.appengine.api.memcache.MemcacheServiceImpl:61 getIdentifiables() 
```

我的应用程序 API：

```
 com.googlecode.objectify.cache.EntityMemcache:215 getAll()
  com.googlecode.objectify.cache.CachingAsyncDatastoreService:253 get()
  com.googlecode.objectify.cache.CachingDatastoreService:161 get()
  com.googlecode.objectify.cache.CachingDatastoreService:147 get()
  com.googlecode.objectify.cache.CachingDatastoreService:128 get()
  siena.gae.GaePersistenceManager:231 getByKey()
  siena.Model:106 getByKey()
  com.sirtrack.iridium.model.GroupEntity:147 getByKey()
  com.sirtrack.iridium.task.ProjectUpdateTask:49 doPost() 
```

无关：

```
 javax.servlet.http.HttpServlet:637 service()
  javax.servlet.http.HttpServlet:717 service()
  org.mortbay.jetty.servlet.ServletHolder:511 handle()
  org.mortbay.jetty.servlet.ServletHandler$CachedChain:1166 doFilter()
  com.google.appengine.tools.appstats.AppstatsFilter:141 doFilter()
  org.mortbay.jetty.servlet.ServletHandler$CachedChain:1157 doFilter()
  org.vosao.filter.SiteFilter:106 doFilter()
  org.mortbay.jetty.servlet.ServletHandler$CachedChain:1157 doFilter()
  org.vosao.filter.RewriteFilter:79 doFilter()
  org.mortbay.jetty.servlet.ServletHandler$CachedChain:1157 doFilter()
  org.vosao.filter.AuthenticationFilter:83 doFilter()
  org.mortbay.jetty.servlet.ServletHandler$CachedChain:1157 doFilter()
  org.vosao.filter.PluginCronFilter:78 doFilter()
  org.mortbay.jetty.servlet.ServletHandler$CachedChain:1157 doFilter()
  org.vosao.filter.LanguageFilter:66 doFilter()
  org.mortbay.jetty.servlet.ServletHandler$CachedChain:1157 doFilter()
  org.vosao.filter.UpdateFilter:78 doFilter()
  org.mortbay.jetty.servlet.ServletHandler$CachedChain:1157 doFilter()
  org.vosao.filter.InitFilter:80 doFilter()
  org.mortbay.jetty.servlet.ServletHandler$CachedChain:1157 doFilter()
  org.vosao.filter.ContextFilter:74 doFilter()
  org.mortbay.jetty.servlet.ServletHandler$CachedChain:1157 doFilter()
  com.google.apphosting.utils.servlet.ParseBlobUploadFilter:102 doFilter()
  org.mortbay.jetty.servlet.ServletHandler$CachedChain:1157 doFilter()
  com.google.apphosting.runtime.jetty.SaveSessionFilter:35 doFilter()
  org.mortbay.jetty.servlet.ServletHandler$CachedChain:1157 doFilter()
  com.google.apphosting.utils.servlet.TransactionCleanupFilter:43 doFilter()
  org.mortbay.jetty.servlet.ServletHandler$CachedChain:1157 doFilter()
  org.mortbay.jetty.servlet.ServletHandler:388 handle()
  org.mortbay.jetty.security.SecurityHandler:216 handle()
  org.mortbay.jetty.servlet.SessionHandler:182 handle()
  org.mortbay.jetty.handler.ContextHandler:765 handle()
  org.mortbay.jetty.webapp.WebAppContext:418 handle()
  com.google.apphosting.runtime.jetty.AppVersionHandlerMap:249 handle()
  org.mortbay.jetty.handler.HandlerWrapper:152 handle()
  org.mortbay.jetty.Server:326 handle()
  org.mortbay.jetty.HttpConnection:542 handleRequest()
  org.mortbay.jetty.HttpConnection$RequestHandler:923 headerComplete()
  com.google.apphosting.runtime.jetty.RpcRequestParser:76 parseAvailable()
  org.mortbay.jetty.HttpConnection:404 handle()
  com.google.apphosting.runtime.jetty.JettyServletEngineAdapter:135 serviceRequest()
  com.google.apphosting.runtime.JavaRuntime$RequestRunnable:446 run()
  com.google.tracing.TraceContext$TraceContextRunnable:449 runInContext()
  com.google.tracing.TraceContext$TraceContextRunnable$1:455 run()
  com.google.tracing.TraceContext:695 runInContext()
  com.google.tracing.TraceContext$AbstractTraceContextCallback:333 runInInheritedContextNoUnref()
  com.google.tracing.TraceContext$AbstractTraceContextCallback:325 runInInheritedContext()
  com.google.tracing.TraceContext$TraceContextRunnable:453 run()
  com.google.apphosting.runtime.ThreadGroupPool$PoolEntry:251 run()
  java.lang.Thread:679 run() 
```

这是可能由堆栈跟踪 OutOfMemoryError 引起的堆栈跟踪：

```
Error for /_ah/queue/projectupdate
java.lang.OutOfMemoryError: Java heap space
    at java.util.Arrays.copyOf(Arrays.java:3057)
    at java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:117)
    at java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:407)
    at java.lang.StringBuffer.append(StringBuffer.java:241)
    at java.io.StringWriter.write(StringWriter.java:112)
    at java.io.PrintWriter.write(PrintWriter.java:429)
    at java.io.PrintWriter.write(PrintWriter.java:446)
    at java.io.PrintWriter.print(PrintWriter.java:576)
    at java.io.PrintWriter.println(PrintWriter.java:712)
    at java.lang.Throwable.printStackTrace(Throwable.java:529)
    at com.google.appengine.tools.appstats.Recorder.createStackTrace(Recorder.java:160)
    at com.google.appengine.tools.appstats.Recorder.initializeIntermediary(Recorder.java:271)
    at com.google.appengine.tools.appstats.Recorder.makeAsyncCall(Recorder.java:290)
    at com.googlecode.objectify.cache.TriggerFutureHook.makeAsyncCall(TriggerFutureHook.java:144)
    at com.google.apphosting.api.ApiProxy.makeAsyncCall(ApiProxy.java:184) 
```

对于 Google 工程师，这是指向这些错误[的链接](https://appengine.google.com/logs?app_id=s~sirtrackwms&version_id=2.358908698144112823&severity_level_override=0&severity_level=3&tz=Pacific/Auckland&filter=OutOfMemoryError&filter_type=regex&date_type=now&date=2012-05-15&time=15:10:26&limit=20&view=Search)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T22:37:25.343

我在 com.google.appengine.tools.appstats.Recorder.java 类中发现了一个名为“maxLinesOfStackTrace”的未记录 (AFAIK) 参数。

在 web.xml 中：

```
<filter>
  <filter-name>appstats</filter-name>
    <filter-class>com.google.appengine.tools.appstats.AppstatsFilter</filter-class>
    <init-param>
      <param-name>maxLinesOfStackTrace</param-name>
      <param-value>16</param-value>
    </init-param>
</filter> 
```

它似乎在本地工作，我会让你知道它是否也有助于避免 OutOfMemoryError。

# iphone - Apple LLVM 编译器 3.1 错误 - iOS 5；Xcode 4.3

> ID：10592601
> 
> 赞同：4
> 
> 时间：2012-05-15T00:05:18.593
> 
> 标签：iphone, ios, xcode, llvm-3.0

我已经收到这个错误很长时间了，我不知道该怎么办。

为了使问题简短，我已将错误写入 .rtf 文件并将其放入 CloudApp。这是链接：[http ://cl.ly/0T3n1Q123u352T372t0m](http://cl.ly/0T3n1Q123u352T372t0m)

我认为这与“CLAPIDeserializer.m”有关。

我将不胜感激。谢谢你。

**错误：**

> CompileC /Users/juniorpond/Library/Developer/Xcode/DerivedData/Test-fqacaiejputxwicubwhguzleizde/Build/Intermediates/Test.build/Debug-iphoneos/Test.build/Objects-normal/armv7/CLAPIDeserializer.o "Cloud/API Parsing/CLAPIDeserializer .m" 正常 armv7 目标-c com.apple.compilers.llvm.clang.1_0.compiler cd "/Users/juniorpond/Documents/Dropbox/Triple J Studios/Applications/Applications/CloudSend/Test/Test" setenv LANG en_US。 US-ASCII setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/ bin:/usr/sbin:/sbin" /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault。xctoolchain/usr/bin/clang -x objective-c -arch armv7 -fmessage-length=0 -std=gnu99 -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wno-missing-prototypes - Wreturn-type -Wno-implicit-atomic-properties -Wformat -Wno-missing-braces -W括号 -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value - Wuninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-sign-compare -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector - Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -DDEBUG=1 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1。 sdk -Wprotocol -Wdeprecated-declarations -g -Wno-conversion -Wno-sign-conversion -mthumb "-DIBOutlet=-DIBOutlet=-DIBOutlet=-DIBOutlet=-DIBOutlet=-DIBOutlet=-DIBOutlet=app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk -Wprotocol -Wdeprecated-declarations -g -Wno-conversion -Wno-sign-conversion -mthumb "-DIBOutlet=app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk -Wprotocol -Wdeprecated-declarations -g -Wno-conversion -Wno-sign-conversion -mthumb "-DIBOutlet=**属性**((iboutlet))" "-DIBOutletCollection(ClassName)=**属性**((iboutletcollection(ClassName)))" "-DIBAction=void)**属性**((ibaction)" -miphoneos-version-min=5.1 -iquote /Users/juniorpond/Library/Developer/Xcode/DerivedData/Test-fqacaiejputxwicubwhguzleizde/Build/Intermediates/Test.build/Debug-iphoneos/Test.build/Test-生成文件.hmap -I/Users/juniorpond/Library/Developer/Xcode/DerivedData/Test-fqacaiejputxwicubwhguzleizde/Build/Intermediates/Test.build/Debug-iphoneos/Test.build/Test-own-target-headers.hmap - I/Users/juniorpond/Library/Developer/Xcode/DerivedData/Test-fqacaiejputxwicubwhguzleizde/Build/Intermediates/Test.build/Debug-iphoneos/Test.build/Test-all-target-headers.hmap -iquote /Users/juniorpond/库/开发人员/Xcode/DerivedData/Test-fqacaiejputxwicubwhguzleizde/Build/Intermediates/Test.build/Debug-iphoneos/Test.build/Test-project-headers。hmap -I/Users/juniorpond/Library/Developer/Xcode/DerivedData/Test-fqacaiejputxwicubwhguzleizde/Build/Products/Debug-iphoneos/include -I/Users/juniorpond/Library/Developer/Xcode/DerivedData/Test-fqacaiejputxwicubwhguzleizde/Build/中间体/Test.build/Debug-iphoneos/Test.build/DerivedSources/armv7 -I/Users/juniorpond/Library/Developer/Xcode/DerivedData/Test-fqacaiejputxwicubwhguzleizde/Build/Intermediates/Test.build/Debug-iphoneos/Test。 build/DerivedSources -F/Users/juniorpond/Library/Developer/Xcode/DerivedData/Test-fqacaiejputxwicubwhguzleizde/Build/Products/Debug-iphoneos -include /Users/juniorpond/Library/Developer/Xcode/DerivedData/Test-fqacaiejputxwicubwhguzleizde/Build/中间体/PrecompiledHeaders/Test-Prefix-clsydhfesjzmtrbgszvgmeofhzfq/Test-Prefix。pch -MMD -MT 依赖项-MF /Users/juniorpond/Library/Developer/Xcode/DerivedData/Test-fqacaiejputxwicubwhguzleizde/Build/Intermediates/Test.build/Debug-iphoneos/Test.build/Objects-normal/armv7/CLAPIDeserializer.d --serialize-diagnostics /Users/juniorpond/Library/Developer/Xcode/DerivedData/Test-fqacaiejputxwicubwhguzleizde/Build/Intermediates/Test.build/Debug-iphoneos/Test.build/Objects-normal/armv7/CLAPIDeserializer.dia -c " /Users/juniorpond/Documents/Dropbox/Triple J Studios/Applications/Applications/CloudSend/Test/Test/Cloud/API Parsing/CLAPIDeserializer.m" -o /Users/juniorpond/Library/Developer/Xcode/DerivedData/Test-fqacaiejputxwicubwhguzleizde /Build/Intermediates/Test.build/Debug-iphoneos/Test.build/Objects-normal/armv7/CLAPIDeserializer.obuild/Debug-iphoneos/Test.build/Objects-normal/armv7/CLAPIDeserializer.d --serialize-diagnostics /Users/juniorpond/Library/Developer/Xcode/DerivedData/Test-fqacaiejputxwicubwhguzleizde/Build/Intermediates/Test.build/Debug -iphoneos/Test.build/Objects-normal/armv7/CLAPIDeserializer.dia -c "/Users/juniorpond/Documents/Dropbox/Triple J Studios/Applications/Applications/CloudSend/Test/Test/Cloud/API Parsing/CLAPIDeserializer.m " -o /Users/juniorpond/Library/Developer/Xcode/DerivedData/Test-fqacaiejputxwicubwhguzleizde/Build/Intermediates/Test.build/Debug-iphoneos/Test.build/Objects-normal/armv7/CLAPIDeserializer.obuild/Debug-iphoneos/Test.build/Objects-normal/armv7/CLAPIDeserializer.d --serialize-diagnostics /Users/juniorpond/Library/Developer/Xcode/DerivedData/Test-fqacaiejputxwicubwhguzleizde/Build/Intermediates/Test.build/Debug -iphoneos/Test.build/Objects-normal/armv7/CLAPIDeserializer.dia -c "/Users/juniorpond/Documents/Dropbox/Triple J Studios/Applications/Applications/CloudSend/Test/Test/Cloud/API Parsing/CLAPIDeserializer.m " -o /Users/juniorpond/Library/Developer/Xcode/DerivedData/Test-fqacaiejputxwicubwhguzleizde/Build/Intermediates/Test.build/Debug-iphoneos/Test.build/Objects-normal/armv7/CLAPIDeserializer.obuild/Objects-normal/armv7/CLAPIDeserializer.dia -c "/Users/juniorpond/Documents/Dropbox/Triple J Studios/Applications/Applications/CloudSend/Test/Test/Cloud/API Parsing/CLAPIDeserializer.m" -o /Users /juniorpond/Library/Developer/Xcode/DerivedData/Test-fqacaiejputxwicubwhguzleizde/Build/Intermediates/Test.build/Debug-iphoneos/Test.build/Objects-normal/armv7/CLAPIDeserializer.obuild/Objects-normal/armv7/CLAPIDeserializer.dia -c "/Users/juniorpond/Documents/Dropbox/Triple J Studios/Applications/Applications/CloudSend/Test/Test/Cloud/API Parsing/CLAPIDeserializer.m" -o /Users /juniorpond/Library/Developer/Xcode/DerivedData/Test-fqacaiejputxwicubwhguzleizde/Build/Intermediates/Test.build/Debug-iphoneos/Test.build/Objects-normal/armv7/CLAPIDeserializer.o
> 
> clang：错误：无法执行命令：posix_spawn failed：资源暂时不可用 clang：错误：clang 前端命令由于信号 1 失败（使用 -v 查看调用） clang：注意：诊断消息：请向 [http：提交错误报告： //developer.apple.com/bugreporter/](http://developer.apple.com/bugreporter/)并包含命令行参数和所有诊断信息。clang：错误：无法执行命令：posix_spawn 失败：资源暂时不可用 clang：注意：诊断消息：生成预处理源时出错。命令 /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang 失败，退出代码为 255

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-01T11:59:04.163

发生这种情况时，关闭 xcode 并在终端中发出“purge”命令，然后重新启动 xcode。这为我解决了这个错误。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-04T17:41:21.220

这意味着您的 OS X 内核无法为您的用户 ID 生成更多进程。每个用户的最大进程数：

要查看您的进程限制：

```
sysctl kern.maxprocperuid 
```

要检查您运行了多少进程：

```
ps aux | grep username | wc -l 
```

查看有多少僵尸进程：

```
ps -v -u username | grep -v grep | awk '{print $2}' | grep Z | wc -l 
```

要查看它们是什么：

```
for pid in `ps -v -u username | grep -v grep | awk '{print $1, $2}' | grep Z  | awk '{print $1}'`
do
  ps -o command="" -p $pid >> zombies.txt
done 
```

这些进程都不能被杀死，并且 purge 在我的 mac 10.8.2 上不起作用。

您可以暂时增加最大用户进程数：

```
sudo sysctl -w kern.maxprocperuid=1024 
```

然后在您的 .bash_profile 或 .bashrc 添加：

```
ulimit -u 1024 
```

并更改 Finder 的限制：

```
sudo launchctl limit maxproc 1024 
```

但实际上，是时候喝杯咖啡了，重启一下你的 Mac。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T23:16:22.877

我和我的一些团队在 GIT 下的一个项目遇到了同样的问题，问题是我的一些团队忘记提交一些新添加的文件。

因此，它自己的 .xcodeproj 项目考虑到它有一些 ViewController，但它们实际上并不存在。

一旦我添加了缺少的视图控制器，项目就正确构建了。

希望这可以帮助你的情况。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-06T05:08:36.150

去做就对了！！

1.关闭你的mac电脑。

2.打开mac电脑。

3.运行XCode

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-17T05:46:56.727

我必须做一个清洁来解决这个问题。产品>从 xcode 清理。重新启动和清除没有帮助，清理修复了它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-26T23:21:27.037

消息说

> 由于信号 1，clang 前端命令失败（使用 -v 查看调用）

尝试在项目的“构建设置”下的“其他 C 标志”中添加“-v”，看看它会吐出什么......

# robotium - Robotium ListView with Buttons，无法点击列表中的按钮

> ID：10592602
> 
> 赞同：1
> 
> 时间：2012-05-15T00:05:48.833
> 
> 标签：robotium

我有一个可拖动列表视图，每个项目都有一个标题和图像按钮来删除该项目。如何单击图像视图？

clickInList(int , int) 不起作用（除非我做错了？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T22:44:33.203

尝试 clickOnText(String) 或 clickOnImage(int) clickOnImageButton(int) 代替

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T07:10:21.060

尝试获取列表项的视图，如下所示：

```
//get the list view
ListView myList = (ListView)solo.getView(R.id.list);
//get the list element at the position you want
View listElement = myLyst.getChildAt(position);
//click on imageView inside that list element
solo.clickOnView(solo.getView(listEelement.findViewById(R.id.image_button))); 
```

# python - 在 scikit-learn 中将分类器保存到磁盘

> ID：10592605
> 
> 赞同：235
> 
> 时间：2012-05-15T00:06:11.843
> 
> 标签：python, machine-learning, scikit-learn, classification

如何将训练有素的**朴素贝叶斯分类器**保存到**磁盘**并使用它来**预测**数据？

我有以下来自 scikit-learn 网站的示例程序：

```
from sklearn import datasets
iris = datasets.load_iris()
from sklearn.naive_bayes import GaussianNB
gnb = GaussianNB()
y_pred = gnb.fit(iris.data, iris.target).predict(iris.data)
print "Number of mislabeled points : %d" % (iris.target != y_pred).sum() 
```

* * *

## 回答 #1

> 赞同：238
> 
> 时间：2012-05-15T01:41:50.943

分类器只是可以像其他任何东西一样被腌制和倾倒的对象。继续你的例子：

```
import cPickle
# save the classifier
with open('my_dumped_classifier.pkl', 'wb') as fid:
    cPickle.dump(gnb, fid)    

# load it again
with open('my_dumped_classifier.pkl', 'rb') as fid:
    gnb_loaded = cPickle.load(fid) 
```

编辑：如果您使用的是[sklearn 管道](https://stackoverflow.com/questions/33091376/python-what-is-exactly-sklearn-pipeline-pipeline)，其中您的自定义转换器无法通过 pickle （也[不能通过 joblib](https://stackoverflow.com/a/11169797/2476920)）序列化，那么使用 Neuraxle 的自[定义 ML 管道保存](https://www.neuraxle.org/stable/step_saving_and_lifecycle.html#Saving-Example)是一种解决方案，您可以在其中定义自己的自定义[步骤保护程序](https://www.neuraxle.org/stable/step_saving_and_lifecycle.html#Custom-Saver-Example)步骤基础。如果在保存时定义了每个步骤，则调用保存器，否则将 joblib 用作没有保存器的步骤的默认值。

* * *

## 回答 #2

> 赞同：231
> 
> 时间：2012-06-23T13:16:28.960

您还可以使用[joblib.dump](http://packages.python.org/joblib/generated/joblib.dump.html)和[joblib.load](http://packages.python.org/joblib/generated/joblib.load.html)，它们在处理数值数组方面比默认的 python pickler 更有效。

Joblib 包含在 scikit-learn 中：

```
>>> import joblib
>>> from sklearn.datasets import load_digits
>>> from sklearn.linear_model import SGDClassifier

>>> digits = load_digits()
>>> clf = SGDClassifier().fit(digits.data, digits.target)
>>> clf.score(digits.data, digits.target)  # evaluate training error
0.9526989426822482

>>> filename = '/tmp/digits_classifier.joblib.pkl'
>>> _ = joblib.dump(clf, filename, compress=9)

>>> clf2 = joblib.load(filename)
>>> clf2
SGDClassifier(alpha=0.0001, class_weight=None, epsilon=0.1, eta0=0.0,
       fit_intercept=True, learning_rate='optimal', loss='hinge', n_iter=5,
       n_jobs=1, penalty='l2', power_t=0.5, rho=0.85, seed=0,
       shuffle=False, verbose=0, warm_start=False)
>>> clf2.score(digits.data, digits.target)
0.9526989426822482 
```

编辑：在 Python 3.8+ 中，如果您使用 pickle 协议 5（这不是默认设置），现在可以使用 pickle 对具有大数值数组作为属性的对象进行有效的酸洗。

* * *

## 回答 #3

> 赞同：128
> 
> 时间：2015-08-24T04:17:11.437

您正在寻找的是sklearn 单词中的**模型持久性**，它记录在[介绍](http://scikit-learn.org/stable/tutorial/basic/tutorial.html#model-persistence)和[模型持久性](http://scikit-learn.org/stable/modules/model_persistence.html)部分中。

因此，您已经初始化了分类器并对其进行了很长时间的训练

```
clf = some.classifier()
clf.fit(X, y) 
```

在此之后，您有两个选择：

**1）使用泡菜**

```
import pickle
# now you can save it to a file
with open('filename.pkl', 'wb') as f:
    pickle.dump(clf, f)

# and later you can load it
with open('filename.pkl', 'rb') as f:
    clf = pickle.load(f) 
```

**2) 使用 Joblib**

```
from sklearn.externals import joblib
# now you can save it to a file
joblib.dump(clf, 'filename.pkl') 
# and later you can load it
clf = joblib.load('filename.pkl') 
```

再一次阅读上述链接会有所帮助

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2016-11-23T03:24:22.207

在许多情况下，特别是对于文本分类，仅存储分类器是不够的，但您还需要存储矢量化器，以便将来可以矢量化输入。

```
import pickle
with open('model.pkl', 'wb') as fout:
  pickle.dump((vectorizer, clf), fout) 
```

未来用例：

```
with open('model.pkl', 'rb') as fin:
  vectorizer, clf = pickle.load(fin)

X_new = vectorizer.transform(new_samples)
X_new_preds = clf.predict(X_new) 
```

在转储矢量化器之前，可以通过以下方式删除矢量化器的 stop_words_ 属性：

```
vectorizer.stop_words_ = None 
```

使倾销更有效率。此外，如果您的分类器参数是稀疏的（如在大多数文本分类示例中），您可以将参数从密集转换为稀疏，这将在内存消耗、加载和转储方面产生巨大差异。[通过以下方式稀疏](http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.SGDClassifier.html#sklearn.linear_model.SGDClassifier.sparsify)化模型：

```
clf.sparsify() 
```

这将自动适用于[SGDClassifier](http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.SGDClassifier.html)但如果您知道您的模型是稀疏的（clf.coef_ 中有很多零），那么您可以通过以下方式手动将 clf.coef_ 转换为[csr scipy 稀疏矩阵](https://docs.scipy.org/doc/scipy-0.18.1/reference/sparse.html)：

```
clf.coef_ = scipy.sparse.csr_matrix(clf.coef_) 
```

然后您可以更有效地存储它。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-11-07T11:53:23.630

`sklearn`估计器实现的方法使您可以轻松地保存估计器的相关训练属性。一些估计器`__getstate__`自己实现方法，但其他估计器，比如`GMM`只使用简单地保存对象内部字典的[基本实现：](https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/base.py)

```
def __getstate__(self):
    try:
        state = super(BaseEstimator, self).__getstate__()
    except AttributeError:
        state = self.__dict__.copy()

    if type(self).__module__.startswith('sklearn.'):
        return dict(state.items(), _sklearn_version=__version__)
    else:
        return state 
```

将模型保存到光盘的推荐方法是使用[`pickle`](https://docs.python.org/3/library/pickle.html)模块：

```
from sklearn import datasets
from sklearn.svm import SVC
iris = datasets.load_iris()
X = iris.data[:100, :2]
y = iris.target[:100]
model = SVC()
model.fit(X,y)
import pickle
with open('mymodel','wb') as f:
    pickle.dump(model,f) 
```

但是，您应该保存额外的数据，以便将来重新训练您的模型，否则会遭受可怕的后果**（例如被锁定到旧版本的 sklearn）**。

从[文档](http://scikit-learn.org/stable/modules/model_persistence.html)中：

> 为了用未来版本的 scikit-learn 重建一个类似的模型，应该在 pickle 模型中保存额外的元数据：
> 
> 训练数据，例如对不可变快照的引用
> 
> 用于生成模型的python源代码
> 
> scikit-learn 的版本及其依赖项
> 
> 在训练数据上获得的交叉验证分数

**对于依赖于[`tree.pyx`](https://github.com/scikit-learn/scikit-learn/blob/f3320a6f1ab2d060fd49c94a6e3386291a684ec7/sklearn/tree/_tree.pyx)用 Cython 编写的模块（例如）**的 Ensemble 估计器尤其如此**`IsolationForest`，因为它创建了与实现的耦合，不能保证在 sklearn 版本之间保持稳定。它在过去看到了向后不兼容的变化。**

 **如果您的模型变得非常大并且加载变得很麻烦，您还可以使用更高效的`joblib`. 从文档中：

> `pickle`在 scikit 的特定情况下，使用 joblib 替换( `joblib.dump`& )可能更有趣`joblib.load`，这对于内部携带大型 numpy 数组的对象更有效，就像拟合 scikit-learn 估计器的情况一样，但只能腌制到磁盘而不是字符串：

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-02-21T16:51:23.277

**`sklearn.externals.joblib`**此后**已被弃用**`0.21`，并将在以下位置删除`v0.23`：

> /usr/local/lib/python3.7/site-packages/sklearn/externals/joblib/init .py:15： **FutureWarning**：sklearn.externals.joblib 在 0.21 中已弃用，将在 0.23 中删除。请直接从joblib中导入这个功能，可以通过pip install joblib来安装。如果在加载腌制模型时出现此警告，您可能需要使用 scikit-learn 0.21+ 重新序列化这些模型。
> warnings.warn（味精，类别=FutureWarning）

* * *

因此，您需要安装`joblib`：

```
pip install joblib 
```

最后将模型写入磁盘：

```
import joblib
from sklearn.datasets import load_digits
from sklearn.linear_model import SGDClassifier

digits = load_digits()
clf = SGDClassifier().fit(digits.data, digits.target)

with open('myClassifier.joblib.pkl', 'wb') as f:
    joblib.dump(clf, f, compress=9) 
```

现在为了读取转储文件，您需要运行的是：

```
with open('myClassifier.joblib.pkl', 'rb') as f:
    my_clf = joblib.load(f) 
```**

# verilog - Verilog 总是在 time = 0 时阻塞

> ID：10592607
> 
> 赞同：1
> 
> 时间：2012-05-15T00:06:24.727
> 
> 标签：verilog

我目前正在编写 Verilog 代码来构建“拔河”游戏。下面的模块代表代表比赛场地的 15 个 LED 的中央 LED。中央灯必须一直亮着，直到游戏开始，例如当它接收到某种输入时（输入由 L 和 R 给出，其中 L 是向左移动，而 R 是向右移动）。

但是，我遇到了一个奇怪的错误。虽然我`enabled`在构造时给出了 1 的值，并且 L 和 R 在构造时为 0（或应该是），但当我运行代码时`enabled`立即变为 0。

我的问题是，为什么会发生这种情况？在看到输入之前，我将如何使变量保持值 1？

```
module centerLight(Clock, reset, L, R, NL, NR, lightOn);
    input Clock, reset, L, R, NL, NR;
    output reg lightOn;

    reg gameStart = 0;
    reg enabled = 1;

    always@(L or R)
    if (L | R) begin
        gameStart = 1;
        enabled = 0;
    end
    else if (enabled)
        gameStart = 0;
    wire PS;
    reg NS;

    always@(PS or L or R or NL or NR)
    if((NL && R) || (NR && L)) NS = ~PS;
    else               NS = PS;

    always@(PS or gameStart)
    case(PS || !gameStart)
        0: lightOn = 0;
        1: lightOn = 1;
    endcase

    D_FF cl (PS, NS, reset, Clock);

endmodule

module D_FF (q, d, reset, clk);
    input d, reset, clk;
    output reg q;

    always@(posedge clk or posedge reset)
    if (reset)
        q = 0;
    else
        q = d;

endmodule 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:59:49.467

在您的设计`enable`中是一个锁存器，如果在最短的时间内处于高电平（或可能浮动），`L`则将打开。`R``enable`

最好使整个设计顺序化，然后使用复位来确保`gameStart`低电平。

这就是我的做法：

```
module centerLight(Clock, reset, L, R, NL, NR, lightOn);
    input Clock, reset, L, R, NL, NR;
    output reg lightOn;

    reg lightOn_d;
    reg gameStart, gameStart_d;
    reg PN, NS;

    always @ (posedge Clock or posedge reset)
        if(reset)
            begin
                gameStart <= 1'b0;
                PS        <= 1'b0;
                lightOn   <= 1'b0;
            end
        else
            begin
                gameStart <= gameStart_d;
                PS        <= NS;
                lightOn   <= lightOn_d;
            end

    always @ *
        begin
            if(L || R)
                gameStart_d = 1'b1;
            else
                gameStart_d = gameStart;

            if((NL && R) || (NR && L))
                NS = ~PS;
            else
                NS = PS;

            if(PS || !gameStart)
                lightOn_d = 1'b1;
            else
                lightOn_d = 1'b0;
        end

endmodule 
```

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:32:12.303

这可能是由于编译器开关造成的。

您的默认启用设置实际上是一个初始块，因为初始块是不可综合的（可以指示 Altera 的 Quartus 读取它们以设置上电条件，但根据 Doulos 的官方说法，它们不支持综合）那么它不应该影响FPGA逻辑的结果。

不过，这应该可以模拟为 RTL。但是我知道对于 Altera 设备，例如，所有逻辑在启动时上电为零，除非“Powerup don't care”开关设置为打开，在这种情况下，它将查看逻辑并将寄存器设置为可以最小化逻辑的值.

在这种情况下，它会将 enabled 设置为逻辑 0，因为这会产生最小的逻辑，因此不需要（因为您的代码在任何地方都不会设置 enabled 为 1，除非在技术上应该被忽略的初始构造中，即使它正在读取初始构造然后用那个开关它可能是）。

我确实尝试通过添加一个总是添加一个重置启用并将所有分配放在那里启用（保持它作为一个锁存器）

always@(reset) if (reset) enabled <= 1'b1; 否则如果 (L | R) 启用 <= 1'b0;

通过这样做，我可以看到启用的功能保留在逻辑上。

另一方面，我建议采用同步注册方法而不是闩锁。

还建议 Verilog 在整个代码中与大小写保持一致，因为最终您会遇到麻烦（经典错误是将模块连接起来，如果不使用语句 `default_nettype none ，编译器会推断出连线（我会查看代码）像 Sunburst 技术公司的 Clifford Cummin 或 Doulos 的灵感）。

我希望这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:38:26.190

当 L|R=1 时，代码中的启用值被分配为 0。如果您的测试台中 L 和 R 的初始值或 FPGS 上这些引脚的值最初为 1，则启用将切换为 0。悬空的 L 和 R 引脚也可能被评估为 1。

Modelsim 等模拟器允许您在“enabled = 0;”时在该行设置断点。

# php - Cakephp HasMany + SaveAll 不起作用

> ID：10592610
> 
> 赞同：1
> 
> 时间：2012-05-15T00:06:33.653
> 
> 标签：php, cakephp, cakephp-2.0, cakephp-model

我试图做一个 hasmany saveall() 但它不起作用。

我有一个 Model Carmodel hasMany CarmodelsImage 当我尝试保存时，传递的数组是：

```
[CarmodelsImage] => Array
    (
        [0] => Array
            (
                [name] => teste
                [carmodel_id] => 1
            )
    ) 
```

在控制器中我有 $this->Carmodel->saveAll($this->request->data) 但它不起作用。

我需要一些帮助。

我知道这个问题已经发布，但我阅读了所有答案，但它不起作用。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T05:45:05.300

您请求的数据需要是如下代码中的数组：

```
Array
(
   [Carmodel] => Array
                 (
                       //Carmodel fields here
                 )
   [CarmodelsImage] => Array
                      (
                       [0] => Array
                             (
                               [name] => teste
                               [carmodel_id] => 1
                             )

                       [1] => Array
                             (
                               [name] => abc
                               [carmodel_id] => 2
                             )
                       ..........
                     )
)

$this->Carmodel->saveAll($this->request->data, array('deep' => true)); 
```

您必须`'deep' => true`在保存关联模型详细信息时使用带有 saveAll() 方法的选项。

# google-chrome - Google 扩展程序 - 在后台运行

> ID：10592611
> 
> 赞同：1
> 
> 时间：2012-05-15T00:07:00.997
> 
> 标签：google-chrome, google-chrome-extension

我正在尝试制作一个播放音乐的谷歌扩展程序。当我关闭扩展程序并浏览其他网站时，我希望扩展程序也能播放。我是否必须更改 manifest.json、background.html 或 main.html（我的索引/弹出文件）的代码？这是我的 manifest.json 的代码：

```
{
    "name": "SpeedSongz.fm",
    "description": "Instantly listen to your favorite music and radios.",
    "version": "1.0",
    "browser_action": {
        "default_icon": "icon.png",
        "default_title": "SpeedSongz.fm",
        "popup": "main.html"
    },
    "background_page" : "background.html"
} 
```

那么，即使实际的扩展程序已关闭，我该如何编写代码以使音乐继续在后台运行呢？是否可以？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T20:00:36.380

> 附加功能可能是，在 bakcround 页面中创建两个功能，一个停止音乐，另一个重新启动它：
> 
> ```
> function stop(){
> 
> }
> 
> function start(){
> 
> } 
> ```
> 
> 因此，当用户打开 main.html 时，可能会有两个图标，上面有两个监听器，每个监听器都可以调用后台页面函数，例如：
> 
> ```
> var backgroundpage = chrome.extension.getBackgroundPage();
> $("start_button").click(function(){
> backgroundpage.start();
> });
> 
> $("stop_button").click(function(){
> backgroundpage.stop();
> }); 
> ```
> 
> :)

编辑：

**popup.html：**

```
<html><head><script type="text/javascript" src="jquery.js"></script> 
<script>
$(document).ready(function(){
    var bgp = chrome.extension.getBackgroundPage();
    $("#start_btn").click(function(){
        bgp.start();
    });

    $("#stop_btn").click(function(){
        bgp.stop();
    });
});
</script>
</head><body>
<div>
    <button type="button" id="start_btn">Start</button>
    <button type="button" id="stop_btn">Stop</button>
</div>
</body></html> 
```

**背景.html：**

```
<html><head><script type="text/javascript" src="jquery.js"></script> 
<script>
var audio = new Audio('guitar.mp3');
audio.loop="loop";
audio.play();

function start(){
    audio.play();
}

function stop(){
    audio.pause();
}

</script>
</head><body></body></html> 
```

就是这样:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T03:31:37.170

[背景页面](http://code.google.com/chrome/extensions/background_pages.html)正是为此目的。它们的行为类似于常规页面，但不可见（当然，除非您访问开发者模式）。在加载扩展程序的整个过程中，背景页面都是活动的。

为了与您站点的背景页面进行通信，您将使用内容脚本并向页面发送消息。

# linux - 设置网络接口指标

> ID：10592612
> 
> 赞同：11
> 
> 时间：2012-05-15T00:07:06.557
> 
> 标签：linux, networking, archlinux

如今，设置网络接口指标的正确方法是什么？

我正在寻找执行此操作的命令行方式。我目前正在使用 Arch Linux，但最好使用与发行版无关的方法。

这是我失败的尝试：

```
$ sudo ifconfig wlan0 metric 1
SIOCSIFMETRIC: Operation not supported 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-06T03:06:20.813

如**man ifconfig**中所述， metric 不是Linux 系统上**ifconfig**命令支持的选项，因为在处理**ifconfig**命令时，它不会创建路由表条目。

```
 metric N
          This parameter sets the interface metric. It is not available under GNU/Linux. 
```

要回答您的问题，您必须使用**route**命令添加具有所需指标的路由并删除旧条目。例如：

```
sudo route add -net default gw 10.10.0.1 netmask 0.0.0.0 dev wlan0 metric 1
sudo route del -net default gw 10.10.0.1 netmask 0.0.0.0 dev wlan0 metric 0 
```

# c# - JSON.NET 在数据不可用时使用空字符串

> ID：10592615
> 
> 赞同：1
> 
> 时间：2012-05-15T00:07:19.297
> 
> 标签：c#, linq, json.net

我正在查询 Google Books API，我正在将这些书籍解析为一个自定义对象，如下所示：

```
foreach (JToken item in items)
{
    try
    {
        FoundBookViewModel viewModel = new FoundBookViewModel
        {
            Title = item.SelectToken("volumeInfo.title").ToString(),
            Isbn13 = item.SelectToken("volumeInfo.industryIdentifiers[1].identifier").ToString(),
            Authors = item.SelectToken("volumeInfo.authors").Select(x => x.ToString()).ToList().Aggregate((i, j) => i + ", " + j),
            Pages = item.SelectToken("volumeInfo.pageCount").ToString(),
            ImageUri = item.SelectToken("volumeInfo.imageLinks.smallThumbnail").ToString()
        };

        newList.Add(viewModel);
    }
    catch (Exception)
    {
        newList.Add(new FoundBookViewModel());
    }
} 
```

但是，有时并非所有数据都可用。有时没有“pageCount”，有时没有“ISBN13”等。在这些情况下，ToString() 部分会引发异常。

所以我想要的是：当某个属性抛出异常时，我只希望它是一个空字符串。但我不知道一个干净的方法来完成这个。

我尝试了多种方法：

*   我将整个东西包裹在一个 try catch 中，但是我不知道什么属性是空的，所以我不能用空字符串“填充”它。
*   我尝试使用安全转换（'as string'），但该操作在 SelectToken() 上不可用。
*   其他几件无论如何都不起作用的事情。

当然，我可以将每个操作放在它自己的 try catch 中，但是在这种情况下会导致 5 个 try catch 块，所以这不是我想要的。

谁知道解决这个问题的干净方法？顺便提一句。我选择使用 LINQ to JSON 而不是直接实现它，因为 Google Books API 不能巧妙地映射到简单实体（JSON 包含大量嵌套）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T00:11:02.867

如果您不想抛出异常 - 不要...

即您可以更改`item.SelectToken("volumeInfo.pageCount").ToString()`为：

```
item.SelectToken("volumeInfo.pageCount") == null? 
   String.Empty : item.SelectToken("volumeInfo.pageCount").ToString() 
```

# android - 在具有相同背景的多个视图上调用 setCompoundDrawablesWithIntrinsicBounds 会产生不一致的大小

> ID：10592621
> 
> 赞同：3
> 
> 时间：2012-05-15T00:08:09.047
> 
> 标签：android, drawable

我有`LinearLayout`两个`EditText`后代（不是直系子女）。我呼吁每个人在每个s`EditText.setCompoundDrawablesWithIntrinsicBounds(0,0,R.drawable.xyz,0)`的右侧放置一个可绘制对象（相同的可绘制对象） 。`EditText`这两个编辑文本是相同的，除了它们在`ListView`. 但是，`EditText`添加可绘制对象后，第一个可绘制对象的大小变得大于第二个。具体来说，第一个`EditText`调整大小以适应可绘制对象的固有大小，而第二个`EditText`则没有（尽管它确实增长了一些）。

为什么两个相同的可绘制对象在两个几乎相同的视图中显示不同？

另外，我可以通过弄清楚如何使可绘制对象不强制`EditText to resize`. 如您所见，我已按照[https://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList](https://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList)关于制作背景比例的说明进行操作，但这似乎并没有诡计。

编码：

```
<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:paddingLeft="10dp"
    android:paddingRight="10dp">

    <TextView 
        style="@style/fieldLabel"
        android:text="phone number"/>
    <EditText
        android:id="@+id/contactPhoneField" 
        android:inputType="phone"
        android:layout_width="fill_parent"
        style="@style/editableField"/>

</LinearLayout>

<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:paddingLeft="10dp"
    android:paddingRight="10dp">

    <TextView 
        style="@style/fieldLabel"
        android:text="e-mail address"/>
    <EditText
        android:id="@+id/contactEmailField" 
        android:inputType="textEmailAddress"
        android:layout_width="fill_parent"
        style="@style/editableField"/>

</LinearLayout> 
```

可绘制的：

```
 <?xml version="1.0" encoding="utf-8"?>
<layer-list
    xmlns:android="http://schemas.android.com/apk/res/android" >
    <item>

        <shape android:shape="rectangle">

            <gradient 
                android:startColor="#FFD060" 
                android:endColor="#FFBB33"
                android:angle="270"/>
            <padding android:left="5dp" android:top="5dp"
                android:right="5dp" android:bottom="5dp" />
            <corners android:radius="5dp" />
            <stroke android:width="2dp" android:color="#FF8800"/>
        </shape>

    </item>
    <item android:drawable="@drawable/warn"/><!-- a 35x35 px png which is taller than the native height of an EditText-->
</layer-list> 
```

然后在某个时候我打电话给：

```
contactPhoneField.setCompoundDrawablesWithIntrinsicBounds(0, 0, R.drawable.error_background, 0);
contactEmailField.setCompoundDrawablesWithIntrinsicBounds(0, 0, R.drawable.error_background, 0); 
```

此外，我以后每次调用`EditText.setCompoundDrawablesWithIntrinsicBounds(0,0,R.drawable.xyz,0)`（第一次调用它之后）都会导致 first的大小在匹配第二个和匹配可绘制大小`EditText`之间切换！`EditText`

# php - 如何显示（测试）.php 文件

> ID：10592623
> 
> 赞同：0
> 
> 时间：2012-05-15T00:08:28.070
> 
> 标签：php, html

我开始自学php，例如我有这个代码，假设显示“Hello World”

```
<html>
 <head>
  <title>PHP Test</title>
 </head>
 <body>
 <?php echo '<p>Hello World</p>'; ?> 
 </body>
</html> 
```

我将它保存为 hello.php，但是当我用 Firefox 打开它时，它会显示如下：

```
Hello World

'; ?> 
```

有人可以为我解释一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T00:10:08.610

Firefox 无法自行解释 PHP 代码。您必须设置一个本地 Web 服务器来运行您的代码，并生成可供 Firefox 读取的 HTML。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T00:14:45.257

恭喜你开始使用 php。您将需要一个 Web 服务器来运行 PHP。Firefox 可以处理 HTML、CSS 和 Javascript 标记/代码以输出网页，但无法处理。这是一种服务器端语言，你需要某种服务器来做到这一点。

如果您有一台 Windows PC，至少对我而言，最简单的方法是 XAMPP/WAMP 或类似软件。您可以在 Wikipedia 中找到一个很好的比较图表。

您可以使用以下语法使代码干净。

```
<html>
 <head>
  <title>PHP Test</title>
 </head>
 <body>
   <p><?php echo 'Hello World'; ?></p> 
 </body>
</html> 
```

我觉得看起来很整洁:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T00:25:39.600

恭喜您选择了 PHP！仔细使用它会给你多年的编码乐趣。

设置 WAMP (Windows-Apache-MySQL-PHP) 服务器“堆栈”是一种很好的入门方式 - 您实际上是在自己的 Windows 机器上运行网站。

设置很容易，但我想你会带着后续的配置问题回到这里——这不是问题。

我会推荐[WampServer](http://www.wampserver.com/en/)或[Xampp](http://www.apachefriends.org/en/xampp-windows.html) - WampServer 可能更容易设置。

# iis - 即使模式匹配，也会跳过 IIS 重写规则

> ID：10592629
> 
> 赞同：0
> 
> 时间：2012-05-15T00:09:05.943
> 
> 标签：iis, redirect, url-rewriting

抱歉标题含糊，问题太复杂，无法用一句话概括……

我正在尝试设置以下重定向规则：

1.  `blog.mydomain.net/en/something`: 重定向到`www.mydomain.com/something`
2.  `blog.mydomain.net/fr/something`: 重定向到`www.mydomain.fr/something`
3.  `blog.mydomain.net/*`: 重定向到`www.mydomain.com`

规则 3 有效，但似乎跳过了规则 1 和 2，因此始终应用规则 3。这是我的 web.config 规则：

```
<!-- Canonicalize mydomain.com to www.mydomain.com -->
<rule name="CanonicalHostNameRule_en" stopProcessing="true">
    <match url="(.*)" />
    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
        <add input="{HTTP_HOST}" pattern="^mydomain\.com$" />
    </conditions>
    <action type="Redirect" url="http://www.mydomain.com/{R:1}" />
</rule>

<!-- Canonicalize mydomain.fr to www.mydomain.fr -->
<rule name="CanonicalHostNameRule_fr" enabled="true" stopProcessing="true">
    <match url="(.*)" />
    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
        <add input="{HTTP_HOST}" pattern="^mydomain\.fr$" />
    </conditions>
    <action type="Redirect" url="http://www.mydomain.fr/{R:1}" />
</rule>

<!-- Redirect blog.mydomain.net/en/something to www.mydomain.com/something -->
<rule name="RedirectBlog_en" enabled="true" stopProcessing="true">
    <match url="^/en(/.*)?$" />
    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
        <add input="{HTTP_HOST}" pattern="^blog\.mydomain\.net$" />
    </conditions>
    <action type="Redirect" url="http://www.mydomain.com/{R:1}" />
</rule>
<!-- Redirect blog.mydomain.net/fr/something to www.mydomain.fr/something -->
<rule name="RedirectBlog_fr" enabled="true" stopProcessing="true">
    <match url="^/fr(/.*)?$" />
    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
        <add input="{HTTP_HOST}" pattern="^blog\.mydomain\.net$" />
    </conditions>
    <action type="Redirect" url="http://www.mydomain.fr/{R:1}" />
</rule>

<!-- Redirect blog.mydomain.net/* to www.mydomain.com -->
<rule name="RedirectBlog_other" enabled="true" stopProcessing="true">
    <match url="(.*)" />
    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
        <add input="{HTTP_HOST}" pattern="^blog\.mydomain\.net$" />
    </conditions>
    <action type="Redirect" url="http://www.mydomain.com/" />
</rule>

<!-- Wordpress-specific rules -->
... 
```

我不明白为什么规则`RedirectBlog_en`和`RedirectBlog_fr`被跳过；我测试了正则表达式，它们工作正常。

谁能发现问题？

* * *

编辑：如果我禁用第三条规则（RedirectBlog_other），那么规则 1 和 2 可以正常工作......这怎么可能，因为规则 1 和 2 在规则 3 之前执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T19:49:49.673

好，我知道了！

首先，事情并没有像我想象的那样发生；当我禁用规则 3 时，规则 1 和 2*不起作用*：我仍然被重定向到我的实际域，但这是由 Wordpress 完成的，而不是我的规则。

其次，我匹配 URL 的模式是错误的：输入中*不*包含前导“/”，所以我的规则根本不匹配。

# php - 如何添加第二个查询作为条件？

> ID：10592631
> 
> 赞同：1
> 
> 时间：2012-05-15T00:09:10.500
> 
> 标签：php

请在下面查看我的查询。现在它从 system_id = '$sid' 的联系人中查找 system_id 但我希望查询也从 system_id = '$sid' 的联系人中查找friend_id

```
$tre = mysql_query("SELECT System_id, Full_name FROM accounts 
WHERE Full_name LIKE '". mysql_real_escape_string($_GET['q'])."%' LIMIT 5");
while($re=mysql_fetch_array($tre))
{
   $qry=mysql_query("SELECT System_id FROM contacts WHERE 
   System_id='". $sid ."' AND Friend_id='". $re['System_id'] ."'");
   if(mysql_num_rows($qry)>0){
      if($sid!=$re['user_id']){
         $obx['id']=$re['System_id'];
         $obx['name']=$re['Full_name'];
         $arr[]=$obx;
      }
   } 
```

我该如何调整它？

谢谢！

更新：

在查找下面的一些评论后，我构建了这个按预期工作的查询：

```
SELECT DISTINCT contacts.friend_id, accounts.full_name, 
accounts.system_id
FROM contacts, accounts
WHERE (contacts.system_id = '$sid' AND contacts.friend_id 
= accounts.system_id) OR (contacts.friend_id = '$sid' 
AND contacts.system_id = accounts.system_id) 
```

唯一的问题是如何从这里更改 SELECT 查询：

```
$tre = mysql_query("SELECT System_id, Full_name FROM accounts 
WHERE Full_name LIKE '". mysql_real_escape_string($_GET['q'])."%' LIMIT 5"); 
```

到$tre：

```
SELECT DISTINCT contacts.friend_id, accounts.full_name, 
accounts.system_id
FROM contacts, accounts
WHERE (contacts.system_id = '$sid' AND contacts.friend_id 
= accounts.system_id) OR (contacts.friend_id = '$sid' 
AND contacts.system_id = accounts.system_id) 
```

# javascript - 从 iFrame 获取元素返回 Null/未定义？

> ID：10592632
> 
> 赞同：2
> 
> 时间：2012-05-15T00:09:35.127
> 
> 标签：javascript, iframe

我已经按照其他人所说的让其他人去做，但我得到的是“null”或“undefined”。

```
var frame=win.getElementsByTagName("iframe")[0];
var innerDoc = (frame.contentDocument)
 ? frame.contentDocument
 : frame.contentWindow.document;
alert(innerDoc.getElementById("input")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T00:46:01.577

试试这个例子

```
<html>
<head>
    <title>Iframe Test</title>
    <script type="text/javascript">
    window.onload= function(){
        var frame=document.getElementsByTagName("iframe")[0]; 
        var innerDoc = (frame.contentDocument)  ? frame.contentDocument  : frame.contentWindow.document; 
        alert(innerDoc.getElementById("input")); 
    }
    </script>

</head>
<body>
    <div>
        <iframe src="test.htm" />
    </div>
</body>
</html> 
```

以及test.htm的来源

```
<html>
<head>
    <title>A test Page</title>
</head>
<body>
    <div id="input">
    </div>
</body>
</html> 
```

它在我的本地机器上工作。

# php - php picasa api 显示大图

> ID：10592633
> 
> 赞同：2
> 
> 时间：2012-05-15T00:09:40.687
> 
> 标签：php, image, api, feed, picasa

好的，到目前为止，我已经能够使用谷歌提要显示来自用户/相册的缩略图。一切都显示正常，除非我想显示更大的缩略图。我似乎无法显示大图像，不知道在这里使用什么......这是我的代码：

```
<?php
$user = '100483307985144997386';
$albumid = '5092093264124561713';
$picasaURL = "http://picasaweb.google.com/$user/";
$albumfeedURL = "http://picasaweb.google.com/data/feed/api/user/$user/albumid/$albumid";

$sxml_album = simplexml_load_file($albumfeedURL);
echo '<table cellpadding="3" cellspacing="3">';
echo "<tr>";
$i = 0;
foreach( $sxml_album->entry as $album_photo )
{   

   //$title = $album_photo->title;
    $summary = $album_photo->summary;
    // Write thumbnail to file
    $media = $album_photo->children('http://search.yahoo.com/mrss/');
    $thumbnail = $media->group->thumbnail[1];

    $gphoto = $album_photo->children('http://schemas.google.com/photos/2007/');
    $linkName = $gphoto->group->attributes()->{'url'};    
    // Direct address to thumbnail
    $thumbAddy = $thumbnail->attributes()->{'url'};    
    if($i%4==0) { echo '</tr><tr>'; } 

    echo '<td style="width:90px; overflow:hidden; word-wrap:break-word; font-size:12px;">';
    echo '<a class="fancybox-buttons" data-fancybox-group="button" href="'. $linkName . '"><img src="'. $thumbAddy . '" /></a>';         
    echo '<p>'. $summary . '</p></td>';
    $i++; 
}

echo '</tr></table>'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T03:11:00.470

每张照片的 feed/api 包含 3 个拇指和一张大图片，可在以下本地 http rest api 上访问：

```
"media$thumbnail":[
{
"url":"https://lh3.googleusercontent.com/-_FFMNGPU1TQ/TtukXyN4eCI/AAAAAAAACso/EzPmut2iKVQ/s72/DSC01612.JPG",
"height":72,
"width":48
},
{
"url":"https://lh3.googleusercontent.com/-_FFMNGPU1TQ/TtukXyN4eCI/AAAAAAAACso/EzPmut2iKVQ/s144/DSC01612.JPG",
"height":144,
"width":96
},
{
"url":"https://lh3.googleusercontent.com/-_FFMNGPU1TQ/TtukXyN4eCI/AAAAAAAACso/EzPmut2iKVQ/s288/DSC01612.JPG",
"height":288,
"width":192
}
],

LARGE ONE:

"media$group":{
"media$content":[
{
"url":"https://lh3.googleusercontent.com/-_FFMNGPU1TQ/TtukXyN4eCI/AAAAAAAACso/EzPmut2iKVQ/DSC01612.JPG",
"height":512,
"width":341,
"type":"image/jpeg",
"medium":"image"
} 
```

[类似的参考](https://stackoverflow.com/questions/9935814/where-is-the-full-size-image-in-gdata-photos-query/10033029#10033029)

在将客户端编码到底层 REST api 时，通常有助于很好地掌握本机协议以及在线上的字符流（请求/响应）。然后将 PHP/Curl 调整为 http 协议中的内容。

google oauth playground 是一个很好的工具，用于针对任何 gdata api（包括 picasa）测试开发中涉及的来回对话框......

[操场](https://code.google.com/oauthplayground/)

这是获得给定专辑/照片的拇指和大图片的游乐场请求代码...

```
GET //data/entry/api/user/rowntreerob/albumid/5682316071017984417/photoid/5682316083381958690?fields=media%3Agroup%2Fmedia%3Athumbnail%5B%40url%5D%2Cmedia%3Agroup%2Fmedia%3Acontent%5B%40url%5D&alt=json HTTP/1.1

Host: picasaweb.google.com
Authorization: OAuth ya29.AHES6ZT123y3Y5Cy3rILYg4Ah4q....
HTTP/1.1 200 OK
status: 200
gdata-version: 1.0
content-length: 756
x-xss-protection: 1; mode=block
content-location: https://picasaweb.google.com//data/entry/api/user/rowntreerob/albumid/5682316071017984417/photoid/5682316083381958690?fields=media%3Agroup%2Fmedia%3Athumbnail%5B%40url%5D%2Cmedia%3Agroup%2Fmedia%3Acontent%5B%40url%5D&alt=json
x-content-type-options: nosniff
set-cookie: _rtok=a1p2m3PiHFkc; Path=/; Secure; HttpOnly, S=photos_html=sX3EHuLxGEre_OMvR0LTPg; Domain=.google.com; Path=/; Secure; HttpOnly
expires: Wed, 16 May 2012 03:23:51 GMT
vary: Accept, X-GData-Authorization, GData-Version, Cookie
x-google-cache-control: remote-fetch
-content-encoding: gzip
server: GSE
last-modified: Fri, 06 Jan 2012 17:57:33 GMT
via: HTTP/1.1 GWA
cache-control: private, max-age=0, must-revalidate, no-transform
date: Wed, 16 May 2012 03:23:51 GMT
access-control-allow-origin: *
content-type: application/json; charset=UTF-8
x-frame-options: SAMEORIGIN 
```

并且通过漂亮的打印对上述内容的响应......

```
"version":"1.0",
"encoding":"UTF-8",
"entry":{
"xmlns":"http://www.w3.org/2005/Atom",
"xmlns$media":"http://search.yahoo.com/mrss/",
"media$group":{
"media$content":[
{
"url":"https://lh3.googleusercontent.com/-_FFMNGPU1TQ/TtukXyN4eCI/AAAAAAAACso/EzPmut2iKVQ/DSC01612.JPG",
"height":512,
"width":341,
"type":"image/jpeg",
"medium":"image"
}
],
"media$thumbnail":[
{
"url":"https://lh3.googleusercontent.com/-_FFMNGPU1TQ/TtukXyN4eCI/AAAAAAAACso/EzPmut2iKVQ/s72/DSC01612.JPG",
"height":72,
"width":48
},
{
"url":"https://lh3.googleusercontent.com/-_FFMNGPU1TQ/TtukXyN4eCI/AAAAAAAACso/EzPmut2iKVQ/s144/DSC01612.JPG",
"height":144,
"width":96
},
{
"url":"https://lh3.googleusercontent.com/-_FFMNGPU1TQ/TtukXyN4eCI/AAAAAAAACso/EzPmut2iKVQ/s288/DSC01612.JPG",
"height":288,
"width":192 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-28T14:42:38.003

You can specify the size by using imgmax parameter (imgmax=d means original image). [https://developers.google.com/picasa-web/docs/2.0/reference#Parameters](https://developers.google.com/picasa-web/docs/2.0/reference#Parameters)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T00:16:23.747

您是否尝试过 print_r( $album_photo ) 来检查对象的确切格式及其包含的内容？

我很确定您可以在该 API 中指定许多其他参数来访问不同大小的图片和缩略图。检查文档。

不久前，我使用 json-script 格式访问了这个 API，从内存中可以指定很多选项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-12T22:27:45.803

我搜索了整个互联网，试图找到这个问题的答案。没有人真正回答这个问题。为了将来参考其他任何阅读者或我未来的自己，以获得大图像，请执行以下操作：

```
echo $album_photo->content->attributes()->{'src'}; 
```

那是 WAAAAYY 比它应该的更复杂，普通的 XML 用户可能已经知道如何做到这一点。：/

# asp.net-mvc-3 - HTML.CheckBox MVC3 的同名

> ID：10592634
> 
> 赞同：4
> 
> 时间：2012-05-15T00:09:49.483
> 
> 标签：asp.net-mvc-3

我需要以某种方式为 Html.CheckBox 放置相同的 NAME 标记。

我该怎么做？这是我的代码...谢谢！

```
foreach (var answer in @question.Answers)
{
@Html.CheckBox("answer_CheckBox_" + answer.ID.ToString(), false, new { Value = answer.ID });  
<label style="margin-left: 0.5em;">@answer.Title</label>
<br />                                                                                                         
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T00:13:53.153

您正在使用递增值作为[方法](http://msdn.microsoft.com/en-us/library/gg538490.aspx)`name`参数[的`CheckBox()`](http://msdn.microsoft.com/en-us/library/gg538490.aspx)一部分（第一个参数），因此它们自然会在呈现的 HTML 中使用不同的名称。

如果您需要它们都具有相同的`name`属性值，请使用静态值：

```
@Html.CheckBox("answer_CheckBox", false, new { Value = answer.ID }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T00:12:22.077

这行得通吗？

```
@Html.CheckBox("answer", false, new { name="answer", value = answer.ID }); 
```

# macos - 使用现有 CA 颁发的证书签署 OS X 应用程序并让 Gatekeeper 满意

> ID：10592638
> 
> 赞同：1
> 
> 时间：2012-05-15T00:10:13.810
> 
> 标签：macos, code-signing, osx-gatekeeper

[我构建了一个 OSX 应用程序，它作为 DMG 在 Mac App Store 之外分发，一旦Gatekeeper](http://www.apple.com/macosx/mountain-lion/security.html)开始执行，我希望继续保持这种状态。

从研究代码签名文档看来，推荐的方法是获取“开发人员 ID”证书并使用它进行代码签名。但是，您必须是注册的 OSX 开发人员并每年向 Apple 支付 99 美元。我已经拥有来自公认 CA 的证书，我想将它与`codesign`. 我找到了有关如何执行此操作的文档，但我无法确定 Gatekeeper 是否允许使用其他 CA 而非 Apple 颁发的证书签署应用程序。

有人知道吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T06:30:05.773

Gatekeeper 仅识别使用 Developer ID 签名的应用程序，而不仅仅是任何签名。请参阅[this](https://developer.apple.com/resources/developer-id/Developer-ID-Tutorial.pdf)，它还解释了如何在 Lion 下测试 Gatekeeper 功能。

关键是，如果 Apple 拥有证书颁发机构，如果您的应用程序被证明是木马或其他东西，他们可以撤销证书。

# vba - 将事件处理程序分配给在 VBA 中动态创建的用户表单上的控件

> ID：10592641
> 
> 赞同：11
> 
> 时间：2012-05-15T00:10:26.070
> 
> 标签：vba, excel, excel-2007

我在互联网上找到了很多资源，*几乎*可以完成我想做的事情，但并不完全。我有一个命名范围“日程表”。对于 dayList 中的每一天，我想在用户表单上创建一个按钮，该按钮将运行当天的宏。我能够[动态添加按钮](https://stackoverflow.com/questions/10224511/assign-code-to-a-button-created-dynamically-using-vba-on-excel)，但不知道如何将 daycell.text 从命名范围传递到按钮、事件处理程序、宏：S 这是我必须创建用户表单的代码：

```
Sub addLabel()
ReadingsLauncher.Show vbModeless
Dim theLabel As Object
Dim labelCounter As Long
Dim daycell As Range
Dim btn As CommandButton
Dim btnCaption As String

For Each daycell In Range("daylist")
    btnCaption = daycell.Text
    Set theLabel = ReadingsLauncher.Controls.Add("Forms.Label.1", btnCaption, True)
    With theLabel
        .Caption = btnCaption
        .Left = 10
        .Width = 50
        .Top = 20 * labelCounter
    End With

    Set btn = ReadingsLauncher.Controls.Add("Forms.CommandButton.1", "runButton", True)
    With btn
        .Caption = "Run Macro for " & btnCaption
        .Left = 80
        .Width = 80
        .Top = 20 * labelCounter
    '   .OnAction = "btnPressed"
    End With

    labelCounter = labelCounter + 1
Next daycell

End Sub 
```

为了解决上述问题，我目前提示用户输入他们想要运行的日期（例如 Day1）并将其传递给宏并且它可以工作：

```
Sub B45runJoinTransactionAndFMMS()

loadDayNumber = InputBox("Please type the day you would like to load:", Title:="Enter Day", Default:="Day1")

Call JoinTransactionAndFMMS(loadDayNumber)

End Sub

Sub JoinTransactionAndFMMS(loadDayNumber As String)
xDayNumber = loadDayNumber

Sheets(xDayNumber).Activate
-Do stuff

End Sub 
```

因此，对于我的每个 runButtons，它需要显示 daycell.text，并运行一个宏，该宏使用相同的文本作为参数来选择工作表来执行其操作。

任何帮助都是极好的。我已经看到动态编写 vba 代码以处理宏的响应，但我相信必须有某种方式可以通过传递参数更优雅地完成，只是不知道如何。提前谢谢了！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-15T08:27:54.937

我知道您现在已经接受了一个适合您的解决方案，并且比下面的要简单得多，但是如果您有兴趣，这将是您问题的更直接答案。

您需要创建一个类来处理按钮单击，因此每次单击按钮时，它都会使用类中的事件，您只需执行一次，然后为每个按钮创建一个新实例。为了阻止这些类超出范围并丢失，它们需要存储在类级别声明中。在下面，我稍微移动了您的代码。

在类模块中（我称之为 cButtonHandler）

```
Public WithEvents btn As MSForms.CommandButton

Private Sub btn_Click()
    MsgBox btn.Caption
End Sub 
```

使用事件是因为它允许您将大多数事件用于控件。我已将按钮生成代码移动到用户表单中，如下所示：

```
Dim collBtns As Collection

Private Sub UserForm_Initialize()

Dim theLabel As Object
Dim labelCounter As Long
Dim daycell As Range
Dim btn As CommandButton
Dim btnCaption As String
'Create a variable of our events class
Dim btnH As cButtonHandler
'Create a new collection to hold the classes
Set collBtns = New Collection

For Each daycell In Range("daylist")
    btnCaption = daycell.Text
    Set theLabel = ReadingsLauncher.Controls.Add("Forms.Label.1", btnCaption, True)
    With theLabel
        .Caption = btnCaption
        .Left = 10
        .Width = 50
        .Top = 20 * labelCounter
    End With

    Set btn = ReadingsLauncher.Controls.Add("Forms.CommandButton.1", "runButton", True)
    With btn
        .Caption = "Run Macro for " & btnCaption
        .Left = 80
        .Width = 80
        .Top = 20 * labelCounter
        'Create a new instance of our events class
        Set btnH = New cButtonHandler
        'Set the button we have created as the button in the class
        Set btnH.btn = btn
        'Add the class to the collection so it is not lost
        'when this procedure finishes
        collBtns.Add btnH
    End With

    labelCounter = labelCounter + 1
Next daycell

End Sub 
```

然后我们可以从一个单独的例程中调用 useform：

```
Sub addLabel()
ReadingsLauncher.Show vbModeless

End Sub 
```

VBA 中的类在许多 VBA 书籍中并没有得到很好的介绍（通常你需要阅读 VB6 书籍才能理解），但是一旦你理解了它们以及它们是如何工作的，它们就会变得非常有用:)

希望这可以帮助

编辑 - 解决其他查询

要引用集合中的对象，可以通过键或索引来完成。要使用密钥，您需要在将项目添加到集合时添加它，因此：

```
collBtns.Add btnH 
```

会成为

```
collBtns.Add btnH, btnCaption 
```

因此，密钥必须是唯一的。然后你可以参考如下：

```
'We refer to objects in a collection via the collection's key
'Or by it's place in the collection
'So either:
MsgBox collBtns("Monday").btn.Caption
'or:
MsgBox collBtns(1).btn.Caption
'We can then access it's properties and methods
'N.B you won't get any intellisense
collBtns("Monday").btn.Enabled = False 
```

如果需要，您还可以向您的类添加其他属性/方法，例如：

```
Public WithEvents btn As MSForms.CommandButton

Private Sub btn_Click()
    MsgBox btn.Caption
End Sub

Public Property Let Enabled(value As Boolean)
    btn.Enabled = value
End Property 
```

然后将被访问：

```
collBtns("Monday").Enabled = False 
```

这有帮助吗？如需进一步阅读，我会将您指向 Chip Pearson 的网站，他在大多数主题上都有很棒的东西[http://www.cpearson.com/excel/Events.aspx](http://www.cpearson.com/excel/Events.aspx)

请记住，VBA 是基于 VB6 的，因此不是完全成熟的 OO 语言，例如，它不支持通常意义上的继承，仅支持接口继承

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T02:02:10.037

捕获单击工作表的示例。把它放在工作表模块中：

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
  ' e.g., range(A1:E1) is clicked
  If Not Application.Intersect(Target, Range("A1:E1")) Is Nothing Then
    MsgBox "You clicked " & Target.Address
  End If
End Sub 
```

# php - php会话ID无缘无故更改

> ID：10592643
> 
> 赞同：0
> 
> 时间：2012-05-15T00:10:46.517
> 
> 标签：php, session

我目前在 Wamp 上使用 Valum 的文件上传器，到目前为止一切都很顺利。在上传者的 php 文件中，我通过读取会话数据以获取当前用户，将上传的文件保存到当前用户的文件夹中。但是，每次我出于某种未知原因调用它时，它都会创建一个新会话。我检查了 cookie，它们返回了正确的会话。我还检查了`session_id()`它，它也返回了正确的会话。但是，由于某种原因，它总是会创建一个新会话。我什至使用该`session_id()`函数显式设置会话 ID。但是，由于某种原因，这些都不起作用。它返回正确的 id，但没有保存到正确的 id。有谁知道为什么会这样？

下面是修改后的 Uploader.php 代码。

```
<?php
//if (!empty($_COOKIE['PHPSESSID'])){
session_id($_COOKIE['PHPSESSID']);
session_start();
//}
if(isset($_SESSION['id'])){
/**
 * Handle file uploads via XMLHttpRequest
 */

class qqUploadedFileXhr {
    /**
     * Save the file to the specified path
     * @return boolean TRUE on success
     */
    function save($path) {    
        $input = fopen("php://input", "r");
        $temp = tmpfile();
        $realSize = stream_copy_to_stream($input, $temp);
        fclose($input);

        if ($realSize != $this->getSize()){            
            return false;
        }

        $target = fopen($path, "w");        
        fseek($temp, 0, SEEK_SET);
        stream_copy_to_stream($temp, $target);
        fclose($target);

        return true;
    }
    function getName() {
        return $_GET['qqfile'];
    }
    function getSize() {
        if (isset($_SERVER["CONTENT_LENGTH"])){
            return (int)$_SERVER["CONTENT_LENGTH"];            
        } else {
            throw new Exception('Getting content length is not supported.');
        }      
    }   
}

/**
 * Handle file uploads via regular form post (uses the $_FILES array)
 */
class qqUploadedFileForm {  
    /**
     * Save the file to the specified path
     * @return boolean TRUE on success
     */
    function save($path) {

        if(!move_uploaded_file($_FILES['qqfile']['tmp_name'], $path)){
            return false;
        }
        return true;
    }
    function getName() {
        return $_FILES['qqfile']['name'];
    }
    function getSize() {
        return $_FILES['qqfile']['size'];
    }
}

class qqFileUploader {
    private $allowedExtensions = array();
    private $sizeLimit = 10485760;
    private $file;
    function __construct(array $allowedExtensions = array(), $sizeLimit = 10485760){        
        $allowedExtensions = array_map("strtolower", $allowedExtensions);

        $this->allowedExtensions = $allowedExtensions;        
        $this->sizeLimit = $sizeLimit;

        $this->checkServerSettings();       

        if (isset($_GET['qqfile'])) {
            $this->file = new qqUploadedFileXhr();
        } elseif (isset($_FILES['qqfile'])) {
            $this->file = new qqUploadedFileForm();
        } else {
            $this->file = false; 
        }
    }

    private function checkServerSettings(){        
        $postSize = $this->toBytes(ini_get('post_max_size'));
        $uploadSize = $this->toBytes(ini_get('upload_max_filesize'));        

        if ($postSize < $this->sizeLimit || $uploadSize < $this->sizeLimit){
            $size = max(1, $this->sizeLimit / 1024 / 1024) . 'M';             
            die("{'error':'increase post_max_size and upload_max_filesize to $size - Upload size: $uploadSize, postSize: $postSize, sizeLimit: $this->sizeLimit'}");    
        }        
    }

    private function toBytes($str){
        $val = trim($str);
        $last = strtolower($str[strlen($str)-1]);
        switch($last) {
            case 'g': $val *= 1024;
            case 'm': $val *= 1024;
            case 'k': $val *= 1024;        
        }
        return $val;
    }

    /**
     * Returns array('success'=>true) or array('error'=>'error message')
     */
    function handleUpload($uploadDirectory, $replaceOldFile = FALSE){
        if (!is_writable($uploadDirectory)){
            return array('error' => "Server error. Upload directory isn't writable.");
        }

        if (!$this->file){
            return array('error' => 'No files were uploaded.');
        }

        $size = $this->file->getSize();

        if ($size == 0) {
            return array('error' => 'File is empty');
        }

        if ($size > $this->sizeLimit) {
            return array('error' => 'File is too large');
        }

        $pathinfo = pathinfo($this->file->getName());
        $filename = $pathinfo['filename'];
        //$filename = md5(uniqid());
        $ext = $pathinfo['extension'];

        if($this->allowedExtensions && !in_array(strtolower($ext), $this->allowedExtensions)){
            $these = implode(', ', $this->allowedExtensions);
            return array('error' => 'File has an invalid extension, it should be one of '. $these . '.');
        }

        if(!$replaceOldFile){
            /// don't overwrite previous files that were uploaded
            while (file_exists($uploadDirectory . $filename . '.' . $ext)) {
                $filename .= rand(10, 99);
            }
        }

        if ($this->file->save($uploadDirectory . $filename . '.' . $ext)){
            return array('success'=>true,'file'=>$filename . '.' . $ext);
        } else {
            return array('error'=> 'Could not save uploaded file.' .
                'The upload was cancelled, or server error encountered');
        }

    }    
}

// list of valid extensions, ex. array("jpeg", "xml", "bmp")
$allowedExtensions = array();
// max file size in bytes
$sizeLimit = 8 * 1024 * 1024;

$uploader = new qqFileUploader($allowedExtensions, $sizeLimit);
$result = $uploader->handleUpload("../users/".$_SESSION['id']."/uploads/");
// to pass data through iframe you will need to encode all html tags
echo htmlspecialchars(json_encode($result), ENT_NOQUOTES);
}else{
    echo json_encode(array('error'=>session_id()));
    //echo '{"error":"You are not logged in. Please log in to upload files."}';
}
?> 
```

**更新** 我现在看到一些不寻常的东西。似乎它正在复制会话并留下旧的会话文件 - 就像所做的`session_regnerate_id()`那样。但是，我的代码中没有任何地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-13T22:45:43.647

我有同样的问题，在我的情况下插入这条线......

```
ini_set('session.use_strict_mode', 0); 
```

...就在`session_start()`解决它之前。

# scala - 同时在多台（集群）机器上运行 SBT (Scala)

> ID：10592646
> 
> 赞同：2
> 
> 时间：2012-05-15T00:11:32.310
> 
> 标签：scala, sbt, actor, akka

所以我一直在使用 Akka Actors 一段时间，并且编写了一些可以在集群中的多台机器上分布计算的代码。在我运行“主”代码之前，我需要`ActorSystem`在将要部署的每台机器上等待，我通常通过一个 Python 脚本来执行此操作，该脚本将 SSH 连接到所有机器，并通过执行类似`cd /into/the/proper/folder/`then的操作来启动该过程`sbt 'run-main ActorSystemCode'`。

我在其中一台机器上运行这个 Python 脚本（称之为“Machine X”），所以我将在我的 Machine X SSH 会话中看到 SSH'ing 到所有其他机器的输出。每当我运行脚本时，似乎所有机器在实际运行之前都在重新编译整个代码，这让我在做任何有用的事情之前坐了几分钟。

我的问题是这样的：

1.  为什么他们需要重新编译？所有机器上都可以使用相同的 JVM，所以它不应该立即运行吗？

2.  如何解决让每台机器编译“它自己的副本”的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T01:07:57.237

sbt 是一个构建工具，而不是一个应用程序运行器。使用 sbt-assembly 构建一个 jar 中的所有内容并将 jar 放在每台机器上并使用`scala`or`java`命令运行它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T05:28:26.640

集群通常在每个节点上安装一个分区（通过 NFS 或 samba）。您只需要复制该分区上的工件，它们就可以在每个节点中直接访问。如果不是这种情况，您应该让您的系统管理员安装它。

然后，您将需要启动该应用程序。同样，大多数集群都带有 MPI。这些工具`mpirun`（或`mpiexec`）不限于真正的 MPI 应用程序，并且会在多个节点上启动您想要的任何脚本。

# mysql - SQL 同列减法

> ID：10592650
> 
> 赞同：1
> 
> 时间：2012-05-15T00:12:30.873
> 
> 标签：mysql, sql

我怎样才能让这个查询使用正确的语法？(MySQL)

谢谢你。

```
SELECT (count(a) WHERE a = 1)-(count(a) WHERE a = 0) FROM table 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T00:15:31.153

试试这个。

```
SELECT SUM(CASE WHEN a=1  THEN 1 ELSE 0 END)- SUM(CASE WHEN a=0  THEN 1 ELSE 0 END) AS Result FROM table 
```

# android - 安卓sdk。startActivity() 移动 prog。背景

> ID：10592654
> 
> 赞同：0
> 
> 时间：2012-05-15T00:12:51.357
> 
> 标签：android, android-intent, android-2.2-froyo, android-view

我只是想在 xml 文件/布局之间进行更改。

在我的主要活动中，我有`startActivityForResult(new Intent(this,playlist.class), 0);`

我已将类添加到清单中，创建了包为 com.site.mainactivity 的类，超类为 android.app.Activity。

我没有在我的主要活动中“扩展播放列表”

我的 logcat 只显示“非活动 InputConnection 上的 showStatusIcon”、“InputConnection = android.view.imputmethod.BaseInputConnection@40532b90, active client = false”

当我尝试启动新的活动/切换布局时，我的主屏幕显示，但我的应用程序仍在后台运行。当我回到它时，该应用程序将我带回主屏幕。

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:46:35.210

我绕过这个障碍所做的只是`getLayoutInflater().inflate(R.layout.main, null);`用作视图，然后`setContentView(v)`

我只需要重新初始化事件、视图等，以便程序像更改视图之前那样运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T00:29:20.020

这听起来像是如何维护 Activity 堆栈的问题。具体来说，这是因为基于 Manifest 属性，一个 Activity 可以具有不同的属性，这些属性指定清单应如何处理 Activity，即。如果它是否包含在 Activity 堆栈中和/或这也可能包括应用程序的主入口在哪里，以及外部意图是否可以转到应用程序中的特定屏幕。

通过操纵这一点，很容易控制。查看 ActivityManager 以及如何检索和维护任务并分析应用程序的设计流程。您必须完全了解您希望它如何工作以完全解决您的问题。流程图将帮助您进行此诊断。

**学会正确控制你的流量。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T01:04:10.767

如果您只想更改布局，您可以：

1.  再次调用 setContentView
2.  使用 singleTop 并启动​​相同的活动，但布局不同
3.  在启动第二个 Activity 后使用 finish() 关闭第一个 Activity

# css - 滚动条样式表

> ID：10592657
> 
> 赞同：0
> 
> 时间：2012-05-15T00:13:34.463
> 
> 标签：css

我有以下样式表，它改变了网络浏览器滚动条的颜色。但问题是它改变了所有滚动条，包括浏览器的主滚动条。

我只想将此应用于溢出区域。谢谢

例如，

```
<div style="overflow: scroll">this area</div> 
```

* * *

```
/* Turn on a 13x13 scrollbar */
::-webkit-scrollbar {
    width: 13px;
    height: 13px;
}

::-webkit-scrollbar-button:vertical {
    background-color: red;
    border: 1px dashed blue;
}

/* Turn on single button up on top, and down on bottom */
::-webkit-scrollbar-button:start:decrement,
::-webkit-scrollbar-button:end:increment {
    display: block;
}

/* Turn off the down area up on top, and up area on bottom */
::-webkit-scrollbar-button:vertical:start:increment,
::-webkit-scrollbar-button:vertical:end:decrement {
    display: none;
}

/* Place The scroll down button at the bottom */
::-webkit-scrollbar-button:vertical:increment {
    background-color: black;
    border: 1px dashed blue;
}

/* Place The scroll up button at the up */
::-webkit-scrollbar-button:vertical:decrement {
    background-color: purple;
    border: 1px dashed blue;
}

::-webkit-scrollbar-track:vertical {
    background-color: blue;
    border: 1px dashed pink;
}

/* Top area above thumb and below up button */
::-webkit-scrollbar-track-piece:vertical:start {
    border: 1px solid #000;
}

/* Bottom area below thumb and down button */
::-webkit-scrollbar-track-piece:vertical:end {
    border: 1px dashed pink;
}

/* Track below and above */
::-webkit-scrollbar-track-piece {
    background-color: green;
}

/* The thumb itself */
::-webkit-scrollbar-thumb:vertical {
    height: 50px;
    background-color: yellow;
}

/* Corner */
::-webkit-scrollbar-corner:vertical {
    background-color: black;
}

/* Resizer */
::-webkit-scrollbar-resizer:vertical {
    background-color: gray;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T00:24:59.363

见[http://jsfiddle.net/Bghcr/1/](http://jsfiddle.net/Bghcr/1/)

*   给要应用样式的元素一个类名
*   使用类名缩小滚动条选择器的范围

## HTML

```
<div class="custom-scroll">this area</div>​ 
```

## CSS

```
.custom-scroll {
    width: 300px;
    height: 300px;
    overflow: scroll;
    border: 1px solid silver;
}

.custom-scroll::-webkit-scrollbar {
    width: 13px;
    height: 13px;
}

.custom-scroll::-webkit-scrollbar-button:vertical {
    background-color: red;
    border: 1px dashed blue;
}

/* ETC */ 
```

## 其他注意事项

*   `<div class="overflow: scroll">`是无效的——也许你的意思是`<div style="overflow:scroll">`？
*   CSS 选择器参考 - [http://www.w3.org/TR/selectors/](http://www.w3.org/TR/selectors/)

# python - 如何将具有可变长度的列表列表展平为单个列表？Python

> ID：10592662
> 
> 赞同：-1
> 
> 时间：2012-05-15T00:14:12.947
> 
> 标签：python, list, flatten, sublist

前段时间我问过如何从这里给定分隔符的字符串制作子列表（甚至更多子列表）。 [如何将字符串处理成子列表层](https://stackoverflow.com/questions/10415752/how-to-process-a-string-into-layer-of-sublists)

现在，我需要将它们重新组合在一起，但我不确定如何。我试图在这里查看 [Python：Recursively flatten a list](https://stackoverflow.com/questions/5409224/python-recursively-flatten-a-list) and [Flatten a list in python](https://stackoverflow.com/questions/10126983/flatten-a-list-in-python)

但是，在我的情况下，这些答案都不起作用，因为链将我的字符串（单个项目“列表”）拆分为字符，因此无法与“\n”连接，并且 reduce 不会连接 str 和列表对象。

在某些时候，我可能需要遍历子列表（及其子列表）。有没有办法遍历子列表的每一级？（我可以把这个作为一个单独的问题，一次一步..但只是想知道这个过程是否有意义还是我应该尝试一种全新的方法。我认为从逻辑上讲这是最有意义的，我只是有导航它的麻烦。）

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T00:22:51.693

除非您另有说明，否则我将假设我在评论中所说的是正确的。

从您链接的帖子中，您有：

```
import collections

def flatten(l):
    for el in l:
        if isinstance(el, collections.Iterable) and not isinstance(el, basestring):
            for sub in flatten(el):
                yield sub
        else:
            yield el 
```

递归地[展平不规则的列表列表](https://stackoverflow.com/a/2158532/500584)，以及

```
def go(it):
    for x in it:
        if x == 'b':
            yield [x] + list(go(it))
        else:
            yield x
            if x == 'c':
                break 
```

从迭代器[创建不规则的列表列表](https://stackoverflow.com/a/10416064/500584)。

`go`is的倒数就是is`flatten(output_of_go)`的倒数。您可以通过以下测试代码看到：`go(iter(string))``''.join(flatten(output_of_go))`

```
lst = "aaabaabacabaacaca"
assert ''.join(flatten(go(iter(lst)))) == lst 
```

# javascript - 如何使用 jQuery 获取 cookie 列表？

> ID：10592663
> 
> 赞同：1
> 
> 时间：2012-05-15T00:14:23.097
> 
> 标签：javascript, jquery, object, cookies

我正在使用外部库，`jquery.cookies.2.2.0.min.js`并且根据[文档](http://code.google.com/p/cookies/wiki/Documentation#Get_Filtered_list_of_cookies)，您将获得所有 cookie 的列表，如下所示。

```
jaaulde.utils.cookies.filter( /^site/ ); 
```

> 返回名称以“site”开头的 cookie 列表

我的代码如下。

```
var all_cookies = $.cookies.filter( /^mark/ );
$('aside').html(''+all_cookies+''); 
```

但是，当我执行上面的代码时，内部 HTML`aside`是`[object Object]`. 我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T00:20:47.790

这是因为 Jaaulde 返回一个对象，其中键是 cookie 的名称，值是 cookie 的值。所以 Jaaulde 正在返回这样的东西。

```
{ site_one: 'one',
  site_two: 'two' } 
```

您不能将对象转换为这样的字符串。您需要遍历每个键值对并单独附加它们。可以这样做。

```
$.each(all_cookies, function(key, value) {
    $('aside').append('Key: ' + key + '; Value: ' + value);
}); 
```

# facebook - 创建 facebook 评论 - 不使用社交插件

> ID：10592664
> 
> 赞同：0
> 
> 时间：2012-05-15T00:14:23.790
> 
> 标签：facebook

我有任何方法可以创建和发布评论，而根本不使用评论插件。

Facebook graph api允许我获取特定帖子下的所有评论，但无论如何都找不到创建新评论:(

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:37:19.457

不幸的是，尽管 OG 对象具有 /comments 连接，但 Facebook 对这种事情并不友好，因此要么文档不准确，要么这是一个适当的错误。很想相信是后者，但我怀疑这是文档错误。

无论如何，我已经在[Posting to Comments Social Plugin 上创建了一个错误报告，但它无法正常工作](https://developers.facebook.com/bugs/273472902762482)，希望它能够得到解决，请参与该报告，以便我们对这个问题有所了解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T00:21:04.453

它就在[Post 对象](http://developers.facebook.com/docs/reference/api/post/#comments)的文档中：

> **创造**
> 
> 您可以通过发出具有 publish_stream 权限和以下参数的 HTTP POST 请求写入 POST_ID/comments 连接以向帖子发布评论。

# javascript - 实现一个遍历数组的运行器

> ID：10592666
> 
> 赞同：2
> 
> 时间：2012-05-15T00:14:36.373
> 
> 标签：javascript, jquery, asynchronous

**BOLD**表示更新。

我有一个数组 ，`steps`其内容是具有与之关联的动作和元素的对象。像这样：

```
steps = [{action: 'click', element: <jQuery element>}, 
         {action: 'click', element: <jQuery element>}, ., ., N] 
```

我想实现一个跑步者，他的工作是遍历数组中的每个元素并对元素执行特定的操作。每个步骤都必须按顺序执行。例如，如果您有：

```
 steps = [{action: 'click', element: <jQuery element representing a button>},
          {action: 'click', element: <jQuery element representing an anchor tag>}] 
```

运行, `run(steps, timeout)`, 将贯穿每一步。step[0].action 将在 step[0].element 上执行。由于 step[0] 可以创建要在 step[1] 中交互的 dom 元素（**通过 AJAX**），因此运行器需要等待特定的时间段（因此，超时），轮询 dom 以获取step[1].element 的存在。

这是我到目前为止的粗略看法：

```
var run = function() { 
    $.each(steps, function(i, v) { 
        var interval = 25, 
            start = 0, 
            timeout = 3000; 
        var i = setInterval(function(timeout) { 
            start = start + interval; 
            console.log(start); 
            if ($(v).is(':visible')) { 
                v.click(); 
                console.log('clicked', v); 
                clearInterval(i);
            }   
        }, interval);
    }); 
}; 
```

请注意，在上面的示例中，`steps`它只是一个 jquery 对象数组。它还不是所需的格式：

```
steps = [{action: 'click', element: <jQuery element>}, 
         {action: 'click', element: <jQuery element>}, ., ., N] 
```

可以说，我需要遵循的“模式”是什么？我需要使用延迟对象来解决这个问题吗？它是用 setTimeout、setInterval 实现的吗？谢谢！

**最终实施**

```
var run = function(steps, interval, timeout) {
    var timer,
        time = 0,
        i = 0;

    runSingle(steps[0]);

    function abort() {
        console.log("Run aborted");
    }

    function runSingle(step) {
        timer = setInterval(function() {
            time += interval;
            if ($(step.element).is(':visible') === true) {
                clearInterval(timer);
                time = 0;
                $(step.element).trigger(step.action);
                (i < (steps.length - 1)) && runSingle(steps[++i]);
            } else if (time >= timeout) {
                clearInterval(timer);
                abort();
            }
        }, interval);
        console.log("Performed: ", step.action, "on", step.element) 
        if (i === (steps.length - 1)) console.log("Run successful");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T00:56:02.973

首先，请注意，在您的示例中，变量将代表数组中的一个对象，因此说or`v`没有意义- 你想说or 。`v.click()``$(v).is(':visible')``v.element.click()``v.element.is(':visible')`

如果你的意思`action`是一个字符串，它是一个 jQuery 方法的名称，并且`element`是一个 jQuery 对象，那么你可以这样做：

```
$.each(steps, function(i, obj) { 
    obj.element[obj.action]();
}); 
```

如果`element`是一个字符串，表示应该用于创建 jQuery 对象的选择器，那么：

```
$.each(steps, function(i, obj) { 
    $(obj.element)[obj.action]();
}); 
```

您不需要引入轮询概念，除非它`action`可能会异步执行某些操作，例如，如果它执行淡入或通过 Ajax 添加元素。

在您的示例中，您似乎申请是否继续当前步骤的唯一标准是当前元素是否可见。如果是这种情况，您可以执行以下操作：

```
var run = function(steps, delay, timeout) {
             var i = 0,
                 nextStep = function() {
                    if (i < steps.length) {
                       var step = steps[i],
                           retryDelay = 25,
                           retryTotal = 0,
                           intervalId = setInterval(function() {
                              retryTotal += retryDelay;
                              var $el = $(step.element);
                              if ($el.is(':visible')) { 
                                $el[step.action](); 
                                clearInterval(intervalId);
                                i++;
                                setTimeout(nextStep, delay);
                              } else if (retryTotal >= timeout) {
                                clearInterval(intervalId);
                              }
                           }, retryDelay);
                    };
                 }
             nextStep();
};

run(steps, 50, 3000); 
```

该`run()`函数定义了一个`nextStep()`用于`setInterval`不断检查当前元素是否可见的函数。一旦它是，它执行动作，清除间隔，并通过调用自身移动到下一个元素`setTimeout`。

我不确定如何在轮询中使用超时概念，因为如果在指定的时间后当前元素不可见，你会怎么做？您不能真正继续下一个元素，因为它也可能取决于前面的步骤。*我想你可以通过清除间隔而不*再次调用来中止整个事情`nextStep()`。**编辑：**我已经更新了代码以按照最后一句话工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T02:24:19.410

这里有一些东西。我还没有彻底测试过：

```
var run = function(steps, interval)
{
    var timer,
        time = 0, timeout = 10000,
        ciel = steps.length - 1,
        i = 0;

    run_single(steps[0]);

    function run_single(item)
    {
        timer = setInterval(function()
        {
            var $el = $(item.selector);

            time += interval;

            if ( $el.length )
            {
                clearInterval( timer );
                time = 0;

                $el.trigger( item.action );

                i < ciel && run_single( step[ ++i ] );
            }
            else
            {
                if ( time >= timeout ) clearInterval( timer );
            }

        }, interval);
    }
};

var steps = [
    {action: 'click', selector: '#first'},
    {action: 'hover', selector: '#second'},
    {action: 'change', selector: '#third'}
    // and so on...
];

run(steps, 100); 
```

在这里查看它的实际效果：http: [//jsfiddle.net/myaeh/](http://jsfiddle.net/myaeh/)

# c# - word interop onpreview关闭事件

> ID：10592669
> 
> 赞同：0
> 
> 时间：2012-05-15T00:15:06.093
> 
> 标签：c#, winforms, ms-word

场景：使用 dsoframer 嵌入 word 的现有 winforms 应用程序

问题：当用户点击预览并退出预览时，字段显示的代码如“{FORMTEXT}”而不是实际值。当我在打印预览上单击打印选项时，“显示域代码而不是它们的值”选项被禁用。不知道为什么。

我希望实现 previewclose 事件，以便我可以遍历字段并将 field.ShowCodes 设置为 false。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-08T09:06:59.910

打印选项与退出打印预览时用户看到的内容无关。Word 没有触发打印预览的事件。但是您不需要遍历字段以确保不显示字段代码。利用：

```
Document.ActiveWindow.View.ShowFieldCodes = False 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-05T20:52:35.390

有没有办法覆盖预览退出的功能？然后您可以在退出预览之前发送回调。

# iphone - iPhone“无法播放电影 - 服务器配置不正确”

> ID：10592671
> 
> 赞同：1
> 
> 时间：2012-05-15T00:15:25.883
> 
> 标签：iphone, ios, video-streaming, h.264, mp4

我读到的关于这个错误的所有内容都表明我需要确保服务器接受字节范围。然而，它似乎是。当我直接在 Chrome 中点击 mp4 时，这些是标题：

初始响应标头：

```
Accept-Ranges:bytes
Connection:keep-alive
Content-Encoding:gzip
Content-Length:11268167
Content-Type:video/mp4
Date:Mon, 14 May 2012 23:33:53 GMT
ETag:W/"46044b-afe121-4c0076fd1068e"
Last-Modified:Mon, 14 May 2012 23:28:00 GMT
Server:Apache
Vary:Accept-Encoding
X-Cnection:close 
```

收到响应后的请求（下面的字节范围请求看起来很奇怪）：

```
Accept-Encoding:identity;q=1, *;q=0
Range:bytes=0-
Referer:http://www.zebra.com/content/dam/zebra/videos/en-us/mobile/Manual-Calibration-ZT210_640X360-A.mp4
User-Agent:Mozilla/5.0 (Windows NT 5.1) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.168 Safari/535.19 
```

最后回应：

```
Connection:keep-alive, Transfer-Encoding
Content-Type:video/mp4
Date:Mon, 14 May 2012 23:33:53 GMT
ETag:W/"46044b-afe121-4c0076fd1068e"
Last-Modified:Mon, 14 May 2012 23:28:00 GMT
Server:Apache
Transfer-Encoding:chunked
Vary:Accept-Encoding
X-Cnection:close 
```

这是 mp4 文件的链接： [http ://www.zebra.com/content/dam/zebra/videos/en-us/mobile/Manual-Calibration-ZT210_640X360-A.mp4](http://www.zebra.com/content/dam/zebra/videos/en-us/mobile/Manual-Calibration-ZT210_640X360-A.mp4)

# c++ - PathCombine 功能无法正常工作

> ID：10592673
> 
> 赞同：0
> 
> 时间：2012-05-15T00:15:55.413
> 
> 标签：c++, windows, winapi, file-management, path-combine

我在使用 PathCombine 功能时遇到了一些困难。它似乎不能与 SHFileOperation() 一起正常工作。我的代码如下：

```
 //beginning of method
    TCHAR* root = new TCHAR[MAX_PATH];
    root = L"C:\\Users\\jhow\\Desktop\\\0";

    //later on in the method
    TCHAR* t1Dir = new TCHAR[MAX_PATH]; //root
    TCHAR* t2Dir = new TCHAR[MAX_PATH]; //temp
    PathCombine(t1Dir,root,L"Folder1\\%REPLACE_THIS%\\\0");
    PathCombine(t2Dir,root,L"Folder1\\temp\0");

    sf.pFrom = t1Dir;
    //sf.pFrom = L"C:\\Users\\jhow\\Desktop\\Folder1\\%REPLACE_THIS%";
    sf.pTo = temporaryDir;

    //Copy files
    int n = SHFileOperation(&sf); 
```

当我像上面那样拥有它时，该方法会看到 sf.pTo，但由于某种原因它看不到 sf.pFrom（即使在路径名末尾使用了 \ 和 \0 的不同组合之后）。n 变为 2，我认为这意味着找不到文件...但是例如，当我注释掉时。

```
 sf.pFrom = t1Dir; 
```

并将其替换为：

```
 sf.pFrom = L"C:\\Users\\jhow\\Desktop\\Folder1\\%REPLACE_THIS%"; 
```

SHFileOperation() 有效...它返回零，我可以看到所有文件都已复制到目录中。我发现这很奇怪，因为它们似乎是相同的字符串（即使我调试并将鼠标悬停在变量上）......有人碰巧知道为什么会这样吗？我的语法或逻辑有问题吗？因为我看不到。我正在使用 Visual Studio 2008。非常感谢您抽出宝贵的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T00:35:21.173

您正在为`root`变量分配堆上的缓冲区，但随后立即将该变量指向只读字符串文字，从而泄漏分配的缓冲区。

更重要的是，您没有考虑`SHFileOperation()`对双空终止字符串进行操作，而是`PathCombine()`返回一个单空终止字符串。您正在尝试在对 的输入中包含一个额外的空值`PathCombine()`，但这不起作用，因为`PathCombine()`将单空终止字符串作为输入，因此它永远不会看到您的额外空值。您需要在输出缓冲区中分配足够的空间来保存额外的空终止符，然后确保在将这些缓冲区传递给`SHFileOperation()`.

试试这个：

```
LPTSTR root = TEXT("C:\\Users\\jhow\\Desktop\\"); 

TCHAR t1Dir[MAX_PATH+2] = {0};
TCHAR t2Dir[MAX_PATH+2] = {0};
PathCombine(t1Dir, root, TEXT("Folder1\\%REPLACE_THIS%\\")); 
PathCombine(t2Dir, root, TEXT("Folder1\\temp")); 

sf.pFrom = t1Dir; 
sf.pTo = t2Dir; 

int n = SHFileOperation(&sf); 
```

# python - 使用另一个列表中的键、值对更新 python 字典列表

> ID：10592674
> 
> 赞同：12
> 
> 时间：2012-05-15T00:15:58.503
> 
> 标签：python, list, dictionary

假设我有以下 python 字典列表：

```
dict1 = [{'domain':'Ratios'},{'domain':'Geometry'}] 
```

和一个类似的列表：

```
list1 = [3, 6] 
```

我想更新`dict1`或创建另一个列表，如下所示：

```
dict1 = [{'domain':'Ratios', 'count':3}, {'domain':'Geometry', 'count':6}] 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-15T00:23:58.513

```
>>> l1 = [{'domain':'Ratios'},{'domain':'Geometry'}]
>>> l2 = [3, 6]
>>> for d,num in zip(l1,l2):
        d['count'] = num

>>> l1
[{'count': 3, 'domain': 'Ratios'}, {'count': 6, 'domain': 'Geometry'}] 
```

另一种方法，这次使用不会改变原始列表的列表理解：

```
>>> [dict(d, count=n) for d, n in zip(l1, l2)]
[{'count': 3, 'domain': 'Ratios'}, {'count': 6, 'domain': 'Geometry'}] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-15T00:22:16.887

你可以这样做：

```
for i, d in enumerate(dict1):
    d['count'] = list1[i] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-15T00:41:03.200

你可以这样做：

```
# list index
l_index=0

# iterate over all dictionary objects in dict1 list
for d in dict1:

    # add a field "count" to each dictionary object with
    # the appropriate value from the list
    d["count"]=list1[l_index]

    # increase list index by one
    l_index+=1 
```

* * *

此解决方案不会创建新列表。相反，它会更新现有`dict1`列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T18:25:46.103

使用列表推导将是 Pythonic 的方式。

```
[data.update({'count': list1[index]}) for index, data in enumerate(dict1)] 
```

将`dict1`使用来自 的相应值进行更新`list1`。

# iphone - 使用 UIPanGestureRecognizer 进行多点触控

> ID：10592677
> 
> 赞同：2
> 
> 时间：2012-05-15T00:16:40.157
> 
> 标签：iphone, ios, ipad, touch, multi-touch

我正在尝试为我的视图实现 UIPanGestureRecognizer。如何添加多点触控？下面是我认为的代码（UIView 的子类）。我希望能够同时知道所有触摸的位置和速度。当前代码仅打印出一次触摸的位置和速度。更改属性 minimumNumberOfTouches 和 maximumNumberOfTouches 不起作用。非常感谢您的帮助。

```
UIPanGestureRecognizer *panGestureRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePanGesture:)];
panGestureRecognizer.cancelsTouchesInView = NO;
[self addGestureRecognizer:panGestureRecognizer];

- (void)handlePanGesture:(UIPanGestureRecognizer *)panGestureRecognizer
{
    CGPoint location = [panGestureRecognizer locationInView:panGestureRecognizer.view];
    CGPoint velocity = [panGestureRecognizer velocityInView:panGestureRecognizer.view];

    NSLog(@"Location: %@",  NSStringFromCGPoint(location));
    NSLog(@"Velocity: %@",  NSStringFromCGPoint(velocity));

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T00:37:48.490

[来自UIGestureRecogniser](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIGestureRecognizer_Class/Reference/Reference.html)的苹果文档

> **(CGPoint)locationOfTouch:(NSUInteger)touchIndex inView:(UIView *)view** 参数 touchIndex UITouch 对象在接收者维护的私有数组中的索引。这个触摸对象代表当前手势的触摸。手势发生在其上的 UIView 对象。指定 nil 表示窗口。返回值 本地视图坐标系中的一个点，用于标识触摸的位置。如果为视图指定 nil，则该方法返回窗口基本坐标系中的触摸位置。
> 
> **(NSUInteger)numberOfTouches** 返回值 接收者维护的私有数组中 UITouch 对象的数量。这些对象中的每一个都代表当前手势中的触摸。
> 
> 讨论 **在循环中使用此方法返回的值，您可以使用 locationOfTouch:inView: 方法询问各个触摸的位置。**

例如：

（目标-C）

```
 for(int i=0; i<[panGestureRecogniser numberOfTouches]; i++)
    {
         CGPoint pt = [panGestureRecogniser locationOfTouch:i inView:self];
    } 
```

（迅速）

```
 for i in 0..<panGestureRecogniser.numberOfTouches {
         let pt = recognizer.location(ofTouch: i, in: panGestureRecognizer.view)
    } 
```

至于速度，我相信它只有一个值，如果不编写一个自定义方法来计算一系列调用中每次触摸之间的差异，就无法获得每次触摸的速度。但是，不能保证每次触摸都在相同的索引处。

注意：至于最小和最大触摸次数，需要相应设置以获得多次触摸。

# ruby-on-rails - 为什么我的 mongo rails 应用程序中的 elasticsearch 索引没有更新？

> ID：10592678
> 
> 赞同：2
> 
> 时间：2012-05-15T00:16:40.943
> 
> 标签：ruby-on-rails, mongodb, mongoid, elasticsearch, tire

我在我的 rails 3.2 mongo 应用程序中使用了轮胎 gem，但我遇到了 elasticsearch 没有更新的问题。我在下面包括了我的问题模型。

```
class Question

  include Mongoid::Document
  include Mongoid::Timestamps
  include Mongoid::Paranoia

  field :question,  :type => String
  field :answer,    :type => Array
  field :tags,      :type => Array
  field :views,     :type => Integer, :default => 0

  include Tire::Model::Search
  include Tire::Model::Callbacks

  mapping do
    indexes :question,  :analyzer => 'snowball', :boost => 100
    indexes :tags,      :analyzer => 'keyword'
  end

end 
```

我通过运行创建新问题， `Question.create(:question => "What day is it?", :answer => "Monday")`但在搜索时不会出现`Question.tire.search( "What day is it?" )`。较旧的问题出现了，但似乎没有一个新问题被添加到索引中。

**更新**

日志中显示以下错误消息：

```
[2012-05-14 19:42:41,725][DEBUG][action.index             ] [Century, Turner] [questions][4], node[JKD6HjRKQuqgwuQyJTl1qA], [P], s[STARTED]: 
Failed to execute [index {[questions][question][4fb1a677e0f5754d2e000004], source[_id=4fb1a677e0f5754d2e000004&answer[]=Monday&created_at=2012-05-14%2019%3A42%3A31%20-0500&deleted_at=&question=What%20day%20is%20it%3F&tags=&updated_at=2012-05-14%2019%3A42%3A31%20-0500&views=0]}]
org.elasticsearch.ElasticSearchParseException: Failed to derive xcontent from (offset=0, length=193): [95, 105, 100, 61, 52, 102, 98, 49, 97, 54, 55, 55, 101, 48, 102, 53, 55, 53, 52, 100, 50, 101, 48, 48, 48, 48, 48, 52, 38, 97, 110, 115, 119, 101, 114, 91, 93, 61, 77, 111, 110, 100, 97, 121, 38, 99, 114, 101, 97, 116, 101, 100, 95, 97, 116, 61, 50, 48, 49, 50, 45, 48, 53, 45, 49, 52, 37, 50, 48, 49, 57, 37, 51, 65, 52, 50, 37, 51, 65, 51, 49, 37, 50, 48, 45, 48, 53, 48, 48, 38, 100, 101, 108, 101, 116, 101, 100, 95, 97, 116, 61, 38, 113, 117, 101, 115, 116, 105, 111, 110, 61, 87, 104, 97, 116, 37, 50, 48, 100, 97, 121, 37, 50, 48, 105, 115, 37, 50, 48, 105, 116, 37, 51, 70, 38, 116, 97, 103, 115, 61, 38, 117, 112, 100, 97, 116, 101, 100, 95, 97, 116, 61, 50, 48, 49, 50, 45, 48, 53, 45, 49, 52, 37, 50, 48, 49, 57, 37, 51, 65, 52, 50, 37, 51, 65, 51, 49, 37, 50, 48, 45, 48, 53, 48, 48, 38, 118, 105, 101, 119, 115, 61, 48]
  at org.elasticsearch.common.xcontent.XContentFactory.xContent(XContentFactory.java:147)
  at org.elasticsearch.common.xcontent.XContentHelper.createParser(XContentHelper.java:49)
  at org.elasticsearch.index.mapper.DocumentMapper.parse(DocumentMapper.java:431)
  at org.elasticsearch.index.mapper.DocumentMapper.parse(DocumentMapper.java:417)
  at org.elasticsearch.index.shard.service.InternalIndexShard.prepareIndex(InternalIndexShard.java:311)
  at org.elasticsearch.action.index.TransportIndexAction.shardOperationOnPrimary(TransportIndexAction.java:202)
  at org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction.performOnPrimary(TransportShardReplicationOperationAction.java:529)
  at org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction$1.run(TransportShardReplicationOperationAction.java:427)
  at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
  at java.lang.Thread.run(Thread.java:680) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T20:38:54.403

*您是否提供了轮胎*自述文件`to_indexed_json`中所述的兼容实现？

 *```
class Article
  include Mongoid::Document
  field :title, :type => String
  field :content, :type => String

  include Tire::Model::Search
  include Tire::Model::Callbacks

  # These Mongo guys sure do get funky with their IDs in +serializable_hash+, let's fix it.
  #
  def to_indexed_json
    self.to_json
  end

end 
```*

# c++ - 将读取内存过程存储在缓冲区中，然后搜索它

> ID：10592681
> 
> 赞同：0
> 
> 时间：2012-05-15T00:17:12.897
> 
> 标签：c++, winapi, memory

我想从一个进程中读取 16 MB (FFFFFF) 的内存并将其存储在一个数组中，这样当我在数组中搜索时，例如：array[i]，i 将是真正的内存地址。

假设我想从 000000 搜索到 FFFFFF，我想进行 sizeof(value) 跳转，从该地址获取地址并将其存储在 var 中。

然后 if(var==value) 返回地址。

我有这个：ReadProcessMemory(phandle,(void*)address,buffer,0xFFFFFF,0);

编辑：

我有这个（由 BlueWanderer 回答）：

> ```
> class offset_buffer{
> private:
>         char *buf;
>         int offset;
> 
> public:
>         offset_buffer(char *in_buf, int in_offset)
>                 : buf(in_buf), offset(in_offset){
>         }
> 
>         char & operator[](int in_index){
>                 return buf[in_index - offset];
>         }
> 
>         void setOffset(int off){
>                 offset=off;
>         }
> 
>         void ReadMemory(){
>                 LPBYTE point;
>                 DWORD primeiroAddress = 0x000000;
>                 DWORD finalAddress = 0xFFFFFF;
>                 //LPBYTE buffer = new BYTE[finalAddress-primeiroAddress];
>                 HANDLE phandle = OpenProcess(PROCESS_VM_READ,0,TargetPID);
>                 ReadProcessMemory(phandle,(void*)primeiroAddress, buf, sizeof(buf), 0);
>                 CloseHandle(phandle);
>         }
> };
> 
> main(){
> char *buffer = new char[0xFFFFFFF-0x0000000];
> int address = 0x0000000;
> offset_buffer b(buffer,address);
> std::ostringstream ss;
> int i=0;
> TListItem *ListIt;
> b.ReadMemory();
> for(address=0x0000000;address<0xFFFFFFF;address+=sizeof(int)){
>         if(b[address]==StrToInt(Edit1->Text.c_str())){
>                  ss << std::hex << address;
>                  showValue();
>                  ss.str(std::string());
>         }
> } 
> ```

怎么了？？有人能帮我吗？为什么它不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T06:51:13.377

你想要这样的东西吗？

```
class offset_buffer
{
private: 
    char *buf;
    int offset;

public:
    offset_buffer(char *in_buf, int in_offset)
        : buf(in_buf), offset(in_offset)
    {
    }

    char & operator[](int in_index)
    {
        return buf[in_index - offset];
    }
}; 
```

它会将您映射`real address`到数组中的索引

```
offset_buffer b(buffer, address);

if (b[0x0C2F8E3] == 123) return 0x0C2F8E3; 
```

# mysql - 比较 sql 表中的散列值

> ID：10592682
> 
> 赞同：2
> 
> 时间：2012-05-15T00:17:19.780
> 
> 标签：mysql, select, md5

我有一个 md5 哈希，我需要与 mysql 表中的值进行比较。

存储在表中的某个字段是某个值。传递的字符串是某个值的 md5。

有没有mysql命令

```
select * from table
where md5 value of somefiled = md5string 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T00:19:07.007

```
SELECT * FROM table WHERE md5(somefield)='16t1gu6g216g21g...' 
```

# java - 什么是前端类和后端类？

> ID：10592683
> 
> 赞同：0
> 
> 时间：2012-05-15T00:17:30.237
> 
> 标签：java

伙计们正在寻找组合和继承之间的区别，然后我在某个地方找到了这篇文章。

根据post组合在代码重用方面优于继承。

```
class Fruit {

    // Return int number of pieces of peel that
    // resulted from the peeling activity.
    public int peel() {

        System.out.println("Peeling is appealing.");
        return 1;
    }
}

class Apple {

    private Fruit fruit = new Fruit();

    public int peel() {
        return fruit.peel();
    }
}

class Example2 {

    public static void main(String[] args) {

        Apple apple = new Apple();
        int pieces = apple.peel();
    }
} 
```

更改后端类

```
class Peel {

    private int peelCount;

    public Peel(int peelCount) {
        this.peelCount = peelCount;
    }

    public int getPeelCount() {

        return peelCount;
    }
    //...
}

class Fruit {

    // Return int number of pieces of peel that
    // resulted from the peeling activity.
    public Peel peel() {

        System.out.println("Peeling is appealing.");
        return new Peel(1);
    }
} 
```

// Apple 必须更改以适应 // 对 Fruit 的更改

```
class Apple {

    private Fruit fruit = new Fruit();

    public int peel() {

        Peel peel = fruit.peel();
        return peel.getPeelCount();
    }
} 
```

// Example2 的旧实现 // 仍然可以正常工作。

```
class Example1 {

    public static void main(String[] args) {

        Apple apple = new Apple();
        int pieces = apple.peel();
    }
} 
```

这是我没有根据帖子所说的**“如果后端类的接口发生变化，前端类的实现也会发生变化，但它的接口不会发生变化”**。

这里的**接口**是什么**实现**是什么？

这只是我的假设，如果我错了，请告诉我？？（也许一切都错了）。

**后端**类是接口，因为**前端**类依赖于它吗？
前端类的**实现**是前端类内部的实现代码吗？**前端**
类 是否也是一个**接口**，因为 Example 中的代码**依赖**于它？

 ******它们是否因为更改**后端接口**没有更改**前端接口****而耦合得很糟糕**？所以依赖**前端接口**的代码还是可以的。

 ******如果我使用继承而不是子类在超类中紧密耦合？因为对超类的更改也会更改为子类，因此依赖于子类的代码可能无法正常工作。

Wny 继承是弱封装。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T01:18:58.157

[这](http://yuml.me/50f06bed)就是Apple 和 Fruit 之间*应该*存在的直观继承关系。然而，这*不是*上面的例子所做的。

![在此处输入图像描述](../Images/42b3d5f1022d2a627053d7005e75b2b7.png)

上面的例子是使用组合，这意味着它`Fruit`是（见 uml [here](http://yuml.me/6efd59d1)）的*一部分。* 这很违反直觉！在这种情况下，两者都有剥离的单独实现。in的实现使用.`Apple``Fruit``Apple``peel()``Apple``Fruit.peel()`

![在此处输入图像描述](../Images/ac5754af9e29fb04844f5698d014e613.png)

我认为要提出的观点是，如果`Apple`使用与 的组合关系`Fruit`，那么它的实现*可以*独立于 Fruit。例如，我可以使用其他实现，而不是使用`Fruit.peel()`来获取计数。`Apple.peel()`但如果`Apple`继承自剥离`Fruit`，那么一变`Fruit`也变`Apple`。因此`Apple`不是独立的`Fruit`，所以我们说它是紧耦合的。

从几个方面来看，这是一个不好的例子，1）我们都知道苹果*是* 水果，所以继承似乎是最正确的实现。2）继承似乎是实现事物的最*干燥*的方式，因为使用组合需要您更正类以执行与更改时`Apple`相同的事情。`Fruit``Fruit.peel()`

编辑：阅读了这篇文章后，我觉得重点是概述使用继承的陷阱。*适当地*使用继承并没有错。*如果子类没有真正*从超类继承行为，仅仅为了代码重用而使用它可能会导致问题。

**来回答你的问题！**

> 后端类是接口，因为前端类依赖于它吗？

足够接近。所有类都有一个“接口”。这并不意味着它们`implements IFruit`在类声明中确实有，它只是指对象的*形状*- 对象具有哪些方法，无论这些方法如何工作。

> 前端类的实现是前端类内部的实现代码吗？

大致，是的。构成类中方法主体的代码的实际逻辑是该类的实现。

> 前端类是否也是一个接口，因为 Example 中的代码依赖于它？

差不多。`Apple`隐含地有一个接口，就像任何其他类一样。如果`Example`使用`Apple`该类，那么它只能通过使用作为接口一部分的方法来实现。

> 它们是否因为更改后端接口并没有更改前端接口而耦合得很糟糕？

是的，这是使用“松散耦合”这个短语的一种方式。

> 如果我使用继承而不是子类在超类中紧密耦合？因为对超类的更改也会更改为子类，因此依赖于子类的代码可能无法正常工作。

是的，这是正确的。这两个类是紧密耦合的，因为它们的行为没有完全封装在每个单独的类中。这并不总是错误的，这取决于情况。

> Wny 继承是弱封装。[原文如此]

因为行为是在超类和子类之间共享的。************

# java - 如何使用java程序在tomcat webserver中创建一个文件夹？

> ID：10592685
> 
> 赞同：0
> 
> 时间：2012-05-15T00:17:42.370
> 
> 标签：java, jsp, tomcat7

我想知道如何在 java 中的 webserver(tomcat 7.0) 中创建一个文件夹。

我最近开始了一个项目。在那个项目中，我需要从客户端机器将文件上传到服务器。在这个服务器中，每个客户端都有自己的文件夹并将文件上传到其中。

在每个用户文件夹中，我们有两个以上的 jsp 文件。当用户使用该文件请求服务器通过 url（例如：ipaddress:portnumber/userid/index.jsp）显示其内容时，我想显示他上传的数据。

可能吗。？

请指导我解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T03:56:15.410

好的，我们开始吧。

```
try {
  File f = new File("file/path/name/.ext");
  if(!f.isDirectory()) {
     boolean success = (new File(f)).mkdirs();
  }
  if(success) {
     System.out.println("Success")
  }
} catch(Exception e) {} 
```

而已。我希望在功能上。再见

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T02:49:42.087

您可以像任何其他 Java 应用程序一样从 Web 应用程序访问文件和文件夹：使用[java.io.File](http://docs.oracle.com/javase/6/docs/api/java/io/File.html)或者[JDK7 的新文件 I/O 机制](http://docs.oracle.com/javase/tutorial/essential/io/fileio.html)。另请参阅[Java I/O 教程](http://docs.oracle.com/javase/tutorial/essential/io/)和[Apache Commons IO](http://commons.apache.org/io/api-release/index.html)的文件相关实用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T03:21:47.470

至于您的具体问题，就像在普通 Java 应用程序中一样。

```
File root = new File("/path/to/all/uploads");
File newfolder = new File(root, "/userid");
newfolder.mkdir();
// ... 
```

至于您在所有文件夹中复制粘贴的 JSP 文件的想法，请不要这样做。例如，只需有一个映射到的 servlet`/files/*`并读取特定于当前登录用户的文件夹，最后转发到 JSP 以呈现结果。或者，如果您的意图是让每个人都公开上传，以便每个用户都可以看到彼此的上传，那么在请求 URL 中提供所需的用户 ID 作为参数或路径信息，如下所示`http://localhost:8080/context/files/userid`。

请注意，您不应将文件存储在扩展的 WAR 文件夹中，否则每次重新部署 webapp 时它们都会丢失。`/webapps`将它们存储在 Tomcat文件夹之外的固定路径上。

# google-maps - 获取谷歌地图的标记内容

> ID：10592686
> 
> 赞同：0
> 
> 时间：2012-05-15T00:17:47.147
> 
> 标签：google-maps

当我使用[本](https://developers.google.com/maps/documentation/javascript/overlays#AddingOverlays)教程添加 Google 地图标记时，我可以将自己的内容添加到标记的正文中。我不想添加自己的内容，而是想使用 Google 存储的关于我的业务的内容。我想知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T00:34:02.690

据我所知，如果我错了，我相信有人会否决或评论纠正我，没有办法让谷歌为你填充标记。在我的网站上，当单击标记时，我使用 Google Places API 在工具提示上显示信息。

您可以使用 Google 参考号查询地点 API。 [这是指向 Google部分](https://developers.google.com/maps/documentation/javascript/reference#PlaceDetailsRequest)[的直接链接`PlaceDetailsRequest`](https://developers.google.com/maps/documentation/javascript/reference#PlaceDetailsRequest)。向下滚动，您将看到`PlaceResult`为您提供 Google 拥有的关于该特定地点的所有数据的对象。

如果您只想为您的业务显示信息，最好将内容静态放入标记中。否则，如果数据需要是动态的，您需要自己从某个地方提取数据，如果您没有自己的数据，Google Places 会很好。

# uiscrollview - 在应用程序启动时使用 OrientationDidChange 处理分页 UIScrollView 时如何避免“特殊情况”

> ID：10592687
> 
> 赞同：0
> 
> 时间：2012-05-15T00:17:53.653
> 
> 标签：uiscrollview, paging

因此，为了处理方向变化（在视图中，而不是控制器中），我们注册了 UIDeviceOrientationDidChange 通知。都好。

它在应用程序启动时被调用，报告正确的尺寸，但错误地表示发生了某些变化（由于具有横向视图或其他软件原因，这可能会被触发）。

在几条不必要的消息之后，它将开始发送合法消息。设备将报告正确的“到”方向，但仍会给出当前帧（和边界），这是无效的。

要将页面向右滚动，其他 SO 问题让我记得手动设置 contentOffset，它有我需要的大部分内容。currentPage = 当前 Y 偏移量/滚动视图的宽度。基础数学，不错

这解决了我的大部分问题。对于正确的 OO，我为滚动视图提供了一个重新布局功能，它不是 iPad 的大小，因为它是一个子视图，并且在其中我这样做：

```
float currentDeviceWidth = 768;
float currentHeight = 949; //logging the frame from portrait, landscape = 1024 w, 693 h
UIDeviceOrientation o = [[UIDevice currentDevice] orientation];
if (!UIDeviceOrientationIsPortrait(o)) {
    //landscape
    currentDeviceWidth = 1024;
    currentHeight = 693;
}
else
    NSLog(@"Moving to port, unless on startup, then its staying as"); 
```

它处理orientationDidChange：消息，但是当应用程序启动时，滚动视图现在比它应该的要小，因为它设置它的大小就好像它得到的边界是“即将改变”，而实际上它们不是。

可能的解决方案： a) [self performSelector:@selector(relayout) withObject:nil afterDelay:delayNum];

b）在设置/取消设置诸如“BOOL dontIgnoreLayout”之类的内容之前给出时间延迟

c) 寻找另一种测试方向的方法

d）手动进入并找出导致所有消息最初发送的原因，删除所有原因 - 此选项仅在系统启动时未创建时才可用。我可以在几秒钟内用一个新项目来测试它，虽然它是一个企业应用程序，如果是这样的话可能需要一些时间。

想知道有没有人解决这个问题。如果没有，我必须输入“特殊情况”或“基于时间”的代码，它们都不是 OO 风格，至少不是我喜欢的方式（也不是我的同事）。

如果我错过了 SO，请告诉我，但如您所见，到目前为止，我已经找到了一些答案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:34:38.930

我通过测试状态栏方向来遵循其他人的示例，它似乎总是正确的，并且显示与 UIDevice currentOrientation 冲突的消息......我知道这已经被发现，但解决问题的具体原因是：

根据其他线程的建议，我在 ViewDidAppear 而不是 viewDidLoad 中注册了通知，这种组合似乎是胜利。

# math - 查找四面体内具有整数坐标的所有点

> ID：10592700
> 
> 赞同：5
> 
> 时间：2012-05-15T00:19:57.360
> 
> 标签：math, 3d, coordinates, interpolation

我试图找到位于四面体内部的整数坐标的所有点（我希望能够以某种方式遍历它们）。我知道定义四面体的四个点（A、B、C、D）的坐标。

我目前正在做的是找到四面体的边界框（A、B、C、D 的最小和最大 x、y、z 坐标），然后循环遍历边界框内的所有点。对于每个这样的点，我计算重心坐标（使用[Wikipedia 中的方程式](http://en.wikipedia.org/wiki/Barycentric_coordinate_system_%28mathematics%29#Barycentric_coordinates_on_tetrahedra)）并检查该点是否在四面体内部（如果任何重心坐标为负或大于 1，则该点不在内部）。

有一个更好的方法吗？目前，我正在测试的点（从边界框）有大约 1/6 的机会确实位于四面体内部，所以我认为我做了太多不必要的计算。

我正在处理通过对更大体积进行三角剖分生成的四面体列表（我正在扩展体积并希望使用四面体插值法对缺失值进行插值）。我没有使用任何外部库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T01:01:53.927

你的方法是正确的。有一些可能的优化，取决于要求可能值得或不值得。例如：

有一种更简单的方法可以检查给定点是在四面体内部还是外部。它相当于检查该点相对于四面体的 4 个边中的每一个属于哪个半空间：

每边由 3 个点定义（比如 A、B、C）。那么平面法线是（CA）x（BA）（这是平面中向量的叉积）。如果该坐标为 (a,b,c)，则平面方程为`F(x,y,z) = ax+by+cz = 0`。对于给定的点 (x0, y0, z0)，F(x0,y0,z0) 的符号决定了这些点属于哪个半平面。

关键是您可以预先计算四面体每一侧的平面方程以及对应于“外部”的符号，然后对给定点的检查最多进行 4 次评估（每侧一个），每次取3 次乘法和 2 次加法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T03:24:35.067

另一个改进的想法：

检查平行于 z 轴（即 x=4，y=6）的“杆”是否穿过四面体。如果不是，则 (x=4, y=5, z) 不能在里面。

否则，找出杆与四面体边缘的相交位置（通过找出构成四面体边缘的平面与其相交的位置）。

假设这些平面在 z=1.3 和 z=10.04 处相交。然后你知道所有点 (4,5, 2) 到 (4,5,10) 都在里面。

对 x 和 y 的所有值重复此操作。

这在实践中应该更快，因为它会为您节省 1 个循环。

# iphone - 我收到此崩溃消息“已发送到已释放实例的消息”

> ID：10592704
> 
> 赞同：-2
> 
> 时间：2012-05-15T00:20:35.747
> 
> 标签：iphone, objective-c

我的应用程序崩溃了。

```
*** -[MyItem respondsToSelector:]: message sent to deallocated instance 0x18bc9f0 
```

有没有办法知道释放和保留消息的位置？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T00:36:08.377

是的。**Instruments**会告诉你每次调用的保留和释放。由你来平衡它们。

# php - PHP模型/控制器方法

> ID：10592705
> 
> 赞同：-2
> 
> 时间：2012-05-15T00:20:46.327
> 
> 标签：php, model-view-controller

我对 PHP 情况提出了一些建议。

目前我有一个包含两个用户名和密码字段的 HTML 页面。当按下“提交”按钮时，通过 Action 加载 PHP 文件，如果用户名和密码正确，则游戏启动。游戏与用户检查位于同一个 PHP 文件中。用户可以回答许多问题并根据他们的结果进行评分。用户完成后，他们可以按下一个注销按钮来保存他们当前的分数和级别。

我被要求使用模型/视图/控制器设置。我可以就将我的一个 PHP 游戏文件修改为这种设置的过程提供一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T00:31:07.503

我排除了游戏本身的功能，并以您的身份验证为例。

**控制器**

在您的情况下，控制器是接收表单提交的某个页面。它将验证任何输入，并决定调用什么服务来获得响应。然后它会将该响应（它应该只包括将要在页面上显示的数据，而不是关于格式或其他信息的任何内容）传递给视图。

**模型**

在这种情况下，模型是提供身份验证的服务。这应该是一组函数，例如：

```
//returns 1 if successful, 0 otherwise
function authenticate(&$username, &$password) { ... } 
```

通常这些被封装在一个可以从任何地方调用的类中。这是您的“模型”，因为它与问题域的数据交互。

**看法**

在这种情况下，一旦控制器将来自身份验证服务的响应传递给视图，视图就会将其解包并用 html 和 css 标记它。在这种情况下，它可能意味着显示用户的登录名并获取游戏信息。或者，如果登录失败，视图应该显示所有关于失败的信息；错误信息等。注意这是两种不同的视图：认证成功和失败。

# function - Uploadify 不是函数 v3.1

> ID：10592706
> 
> 赞同：0
> 
> 时间：2012-05-15T00:20:46.773
> 
> 标签：function, uploadify

Uploadify 在我的测试服务器（本地主机）上工作得很好，但是一旦我将它部署到远程服务器上，它就说它不是一个函数。我读过这可能是由于 jquery 库被导入两次，但在我的情况下并非如此。两台服务器上的一切看起来都一样。唯一的区别是我的测试服务器是windows，我的远程服务器是linux。

这是我正在使用的简单测试页面：

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="http://www.uploadify.com/wp-content/themes/uploadify/style.css">
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="http://www.uploadify.com/wp-content/themes/uploadify/js/jquery.uploadify.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {

    $("#file_upload").uploadify({
        swf             : 'uploadify/uploadify.swf',
        uploader        : 'uploadify/uploadify.php'
    });

});
</script>
</head>
<body>
<input type="file" name="file_upload" id="file_upload" />
</body>
</html> 
```

所有 Uploadify 文件都在一个名为`uploadify`. 谢谢您的帮助。

编辑

我查看了他们的演示页面并尝试以相同的方式链接到 .js 文件：

```
<script type="text/javascript" src="http://www.uploadify.com/wp-content/themes/uploadify/js/jquery.uploadify.min.js"></script> 
```

错误消失了，但我仍然无法单击按钮。我看到的只是文字：选择文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T03:20:10.690

问题是即使目录和所有文件都显示在 FireFTP 中，该目录甚至都不存在。当我尝试导航到uploadify 文件夹中的.js 文件并得到内部服务器错误500 时，我发现了这个问题。当我使用godaddy 的FTP 管理器时，我看到uploadify 文件夹中只有一个文件：`.htaccess`. 我相信那个文件是罪魁祸首。我删除了它，然后尝试再次上传所有文件。之后它起作用了。

# xml - 我的条件结束时出错：TypeError: Error #2007: Parameter text must be non-null

> ID：10592713
> 
> 赞同：0
> 
> 时间：2012-05-15T00:22:10.820
> 
> 标签：xml, actionscript-3, conditional

好的，我正在尝试访问由章节组成的本地 XML 文档，每个章节都有几页文本。我有一个条件，可以监听按钮点击并“翻页”。“如果”工作正常：它循环浏览页面直到它到达末尾。但是“其他”条件不起作用。它甚至不会追踪任何东西。我知道这是因为这个错误：

TypeError：错误 #2007：参数文本必须为非空。在 flash.text::TextField/set text() at thisArray/textLoader()

...但不知道如何解决它。我是否需要完全放弃循环阅读文本的方法，或者我只是错过了一些小事？抱歉，如果其中一些代码草率...我已经对其进行了相当多的调整以使其正常工作。谢谢您的帮助。

这是相关的代码：

```
package  {

import as3101.ui.formatA;
    import flash.display.*;
    import flash.text.*;
    import flash.display.Sprite;
    import flash.display.MovieClip;
    import flash.events.*;
    import flash.utils.Dictionary;
    import flash.events.*;
    import flash.display.Loader;
    import flash.net.URLLoader;
    import flash.net.URLRequest;

public class thisArray extends MovieClip {

        //XML Vars
        private var xml:XML;
        private var storyKeys:Dictionary = new Dictionary();    
        private var xmlLoader:URLLoader = new URLLoader();
        private var url:URLRequest = new URLRequest("storyXML.xml");
        //Text and Button Vars 
        private var formatting:formatA;
        private var txta:TextField = new TextField();
        private var storyBox:Sprite = new Sprite();
        private var count:uint = 0;
        private var storyText:XMLList;
        private var nxtBtn:Sprite = new Sprite();

    public function thisArray() {

            addChild(storyBox);
            storyBox.addChild(txta);
            storyBox.x = 0;
            storyBox.y = 0;
            txta.x = 0;
            txta.y = 0;
            storyBox.width = 500
            storyBox.height = 400;
            storyBox.buttonMode = true;
            storyBox.mouseChildren = false;
            xmlLoader.load(url);
            xmlLoader.addEventListener(Event.COMPLETE, onXmlLoad);
//external class formatA sets my text for size, font, etc...
            formatting = new formatA();
            formatting.defField = txta;
            txta.defaultTextFormat = formatting.myFormat;
            txta.wordWrap = true;

        trace ("class loaded: " + this);

    }

    private function onXmlLoad(e:Event):void {

        xml = new XML(xmlLoader.data);
        trace("XML Loaded");
        storyText = xml.chapters.chapter.page;
        txta.text = storyText[count];
        buttonMaker();

        }

    public function textLoader(e:MouseEvent):void {

                count++;
                if(count < txta.length)
                {
                trace("hi");
                txta.text = storyText[count];
                } else if (count == storyText.length) {
                    trace("bye");
                    removeChild(nxtBtn);

                }
    }

    public function buttonMaker() {

                    nxtBtn.graphics.lineStyle(3,333333);
                    nxtBtn.graphics.beginFill(0x333333);
                    nxtBtn.graphics.drawRect(0,0,50,30);
                    nxtBtn.graphics.endFill();
                    nxtBtn.x = 480;
                    nxtBtn.y = 220;
                    addChild(nxtBtn);
                    nxtBtn.buttonMode = true;
                    nxtBtn.name = ("nextButton");
                    nxtBtn.addEventListener(MouseEvent.CLICK, textLoader);

    } 
```

这是我的 XML 文档：

< ?xml 版本="1.0" 编码="utf-8"? >

<故事文本>

<章节>

< 章节 id="0" 名称="一个" >

```
 < page num="0" > Text Block A < /page >

       < page num="1" > Text Block B < /page >

       < page num="2" > Text Block C < /page >

      < page num="3" > Text Block D < /page > 
```

</章节>

<章节id="1" name="两个" > </chapter >

<章节id="2" name="三" > </chapter >

</storyAnswers>

< /章节 >

</故事文本>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:50:54.463

我认为应该是

```
if(count < txta.text.length) 
```

您需要获取 textarea 中文本的长度，而不是 textarea 本身的长度:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T04:42:05.573

`if(count < txta.length) { trace("hi"); txta.text = storyText[count]; }`

第一行应该是`if(count < storyText.length)`. 现在它正在比较文本字段中关联的字符串的长度，`txta`并将其与需要保持在数组`storyText`范围内的递增整数进行比较。

另一件事是，如果不发布加载的 XML，很难判断它发生了什么。加载它并`storyText = xml.chapters.chapter.page;`在 storyText.length 上运行跟踪以确保您实际上正在使用不返回 null 的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T00:38:32.657

好的！！我刚刚弄清楚我的问题是什么。卡尔你是对的......我需要将我的计数变量与storyText.length进行比较。我的问题是这样输入：

```
if(count < storyText.length) 
```

当我应该这样输入时：

```
if(count < storyText.length()) 
```

那么谁能告诉我为什么这有效？我想说添加 () 可以防止它为空，但我认为这是不正确的。再次感谢您帮助我解决这个问题。

# vim - VIM 中的 ANSI 颜色代码

> ID：10592715
> 
> 赞同：47
> 
> 时间：2012-05-15T00:22:21.993
> 
> 标签：vim, ansi, color-codes

我有一个脚本可以生成一个带有 ANSI 颜色代码的日志文件，如下所示：

```
[2012-05-14 18:00:02] ^[[0mINF: -- Starting update script --^[[0m
[2012-05-14 18:00:29] ^[[91mERR: Improper date, entry being ignored.^[[0m 
```

有没有办法让 Vim 理解这些颜色代码？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-05-15T00:44:43.847

我不确定 vim，但如果您只是查看日志文件（即您不需要能够编辑），您可以使用更少：

```
less -R 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-05-15T00:48:24.113

使用 Charles Campbell 的 (Dr Chip) AnsiEsc 插件：

[http://www.vim.org/scripts/script.php?script_id=302](http://www.vim.org/scripts/script.php?script_id=302)

前：

![前](../Images/402eda82b72f38dd8becca90ab41b475.png)

`:AnsiEsc<CR>`

![后](../Images/34ea56e58ad08aca91cbc84e524d1169.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-07-13T16:51:11.583

由于接受的答案中的链接似乎不起作用，我找到了这个链接：[https ://github.com/vim-scripts/AnsiEsc.vim](https://github.com/vim-scripts/AnsiEsc.vim)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-12-08T14:23:54.003

`AnsiEsc`适用于基本的 ANSI 颜色代码，但不适用于其他代码。问题是除了 basic 之外还有*很多*[ANSI_escape_code](https://en.wikipedia.org/wiki/ANSI_escape_code#Colors)`\033[31m red \033[0m`；什么是`AnsiEsc`，有什么程序，有什么关系`\033[... unrecognized`？似乎`AnsiEsc`只留下了这样的问题，但在 Vim 和 mvim 中有所不同。

欢迎提供更好的文档`AnsiEsc`；欢迎链接到 python 中的小型 ANSI 转义代码解析器。

来自 gnu ls 和 grep 的彩色输出的测试用例，`TERM xterm-256color` 以及 macosx 终端版本 2.3：

```
#!/bin/bash
# test https://en.wikipedia.org/wiki/ANSI_escape_code#Colors from gnu ls and grep

mkdir bluedir  2> /dev/null
ls -d --color=always  bluedir  > ls.out

echo red-hot | grep --color=always  red  > grep.out

od -c ls.out
# 0000000  033   [   0   m 033   [   3   4   m   b   l   u   e   d   i   r
# 0000020  033   [   0   m  \n                                            
# Vim 7.3 :AnsiEsc "bluedir" blue, \033[0m as is
# mvim 8.0 :AnsiEsc "bluedir" works

od -c grep.out
# 0000000  033   [   0   1   ;   3   1   m 033   [   K   r   e   d 033   [
# 0000020    m 033   [   K   -   h   o   t  \n                            
# both Vim and mvim display as is 
```

另请参阅可爱的 bash 脚本[colors256](http://mywiki.wooledge.org/BashFAQ/037?highlight=(color))。

# css - 奇怪的 webkit 背景问题

> ID：10592721
> 
> 赞同：0
> 
> 时间：2012-05-15T00:23:27.937
> 
> 标签：css, google-chrome, safari, webkit

[根据我老板的要求删除了 URL] - 请查看第一条评论中的屏幕截图以查看正在发生的错误。

检查那个网站。出于某种原因，有时在加载登录页面时，我会在登录框后面看到一条深色条纹（这只显示在 Chrome 和 Safari 中）。如果您没有看到它，请尝试 Shift + Refresh 几次。在表单内的任意位置单击或尝试检查元素似乎会删除这个黑框（通常，并非总是如此）。我认为这是因为我在尝试登录时在页面上显示了一个叠加层。但是，覆盖设置为显示：无，因此应该看不到它。这使得页面在加载时看起来非常难看，所以如果我可以删除它会很棒。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T01:27:20.083

所以我复制了你的 CSS 和 HTML 并制作了一个本地版本来解决这个问题。

这是我为解决您的问题所做的。

答：我在您的身体标签上设置了 100% 的明确高度（以防止任何裁剪或内容）

B：您的 Section 元素的页边距顶部正在被您的 Body 元素合并或继承（不太确定该术语是什么）。所以我设置了 margin-top:0; 在您的 section.login-form 上并将其设置为“padding-top:45px;” 直接在身体上。

总之这是我使用的CSS

```
 body {
      background: url("login-bg.jpg") repeat-x scroll center top #2b87ae;
      color: #5c5e5e;
      font-family: 'OpenSansBold', sans-serif;
      height: 100%;
      padding-top: 45px;
    }

    body section.login-box {
      margin: 0 auto;
    } 
```

我没有包括你所有的 .login-box CSS，但相关的行是 210。

让我知道这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T02:17:24.610

我拆除了网站并隔离了问题：

```
<!doctype html>
<html>
    <head>
    <style>
      @-webkit-keyframes spin {
        100% { -webkit-transform:rotate(100deg); }
      } 

      body {
        background-image: url("login-bg.jpg");
      }

      div {
        z-index: -1;
        position: absolute;
        -webkit-animation: spin 0.7s linear infinite; 
      }

      </style>
    </head>
    <body>
      <div></div>
    </body>
</html> 
```

在您的页面中，动画将应用于 div `class="loading dead-center"`。我最好的建议是尝试使用`display: none;`而不是`z-index: -1;`隐藏动画。

# c++ - 将球体移动到平面永远不会预测未来的碰撞

> ID：10592729
> 
> 赞同：0
> 
> 时间：2012-05-15T00:24:02.740
> 
> 标签：c++, algorithm, physics, game-physics

精简版：

如何正确地将重力添加到我的物理更新中？

详细版本：

我遇到了一个问题，即用于移动球体到平面的通用碰撞算法（在下面发布以供参考）永远不会达到检测到未来碰撞的点。我相信这是由于我的物理更新方式。

我进行了设置，以便只有在确定将来会发生碰撞时，才会将重力应用于对象。因此，在将重力应用于对象之前，首先要进行碰撞检查。但是，由于始终假定未来不会发生任何碰撞，因此永远不会应用重力。想象一个场景，其值为

```
spherePosition = (0, 5, 0)
sphereVelocity = (2, 0, 0)
sphereRadius = 1
planeOrigin = (0, 0, 0)
planeNormal = (0, 1, 0) 
```

这总是假设球体平行于平面移动。结果，将永远不会应用重力。

我的更新比较简单，比如

```
mAcceleration = mTotalForces / mMass;
Vector3 translation = (mVelocity * fElapsedTime) + 0.5 * mAcceleration * pow(fElapsedTime, 2);
mVelocity += mAcceleration * fElapsedTime; 
```

所以操作的顺序大致是

```
int collisionResult = checkCollision(sphere, plane);
if(collisionResult == 2)
{
    sphere.applyGravity(); // Just sets "mAcceleration" to (0, -9.81, 0). Which is then removed by my physics update.
}
sphere.update(timeSlice); 
```

说了这么多，我应该什么时候在物理更新循环中对我的对象应用重力以及如何？如果我在碰撞检查之前应用它，那么在碰撞检查期间就没有关系，如果我在之后做，如果将来会有碰撞，我应该如何调整我的更新？

碰撞检查参考：

```
int IntersectMovingSpherePlane(float sphereRadius, const Vector3& sphereCenter, const Vector3& sphereVelocity, const Vector3& planeNormal,
    const Vector3& planeOrigin, float planeD, float &t, Vector3 &q)
{
    // Compute distance of sphere center to plane
    float dist = Vec3Dot(&planeNormal, &sphereCenter) - planeD;
    if (fabs(dist) <= sphereRadius) {
        // The sphere is already overlapping the plane. Set time of
        // intersection to zero and q to sphere center
        t = 0.0f;
        q = sphereCenter;
        return 0;
    } else {
        float denom = Vec3Dot(&planeNormal, &sphereVelocity);
        if (denom * dist >= 0.0f) {
            // No intersection as sphere moving parallel to or away from plane
            return 1;
        } else {
            // Sphere is moving towards the plane

            // Use +r in computations if sphere in front of plane, else -r
            float r = dist > 0.0f ? sphereRadius : -sphereRadius;
            t = (r - dist) / denom;
            q = sphereCenter + t * sphereVelocity - sphereRadius * planeNormal;
            return 2;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:32:29.283

将物理添加到系统中的正确方法是使用迭代过程，称为[runge-kutta 方法](http://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods)（或牛顿，一阶 runge-kutta）。

基本上，您的模型将具有质量随时间演变的粒子。您必须“建模”的唯一内容是在每个刻度上施加在每个粒子上的力。这样，您就可以计算加速度。

如果这个世界有引力，你必须说在每个粒子上，加速度是-g（指向下方的负数，在这种情况下与质量无关）。

例如，一阶 runge-kutta 是：

```
newVelocity = oldVelocity + tickAcceleration*dt
newPosition = oldPosition + newVelocity*dt 
```

其中 dt 是您为刻度选择的时间步长。

通常，为了避免对象通过其他对象，您实际上不会计算 new*。你计算一个提议的位置：

```
proposedVelocity = oldVelocity + tickAcceleration*dt
proposedPosition = oldPosition + proposedVelocity*dt 
```

然后计算碰撞条件（您测试每个粒子与其他粒子）。如果粒子发生碰撞，则应用碰撞方程（例如[弹性碰撞](http://en.wikipedia.org/wiki/Elastic_collision)），并相应地更新 newPositions/velocity。如果它们没有碰撞，则使用建议的*值更新新的*，

```
newVelocity = proposedVelocity
newPosition = proposedPosition 
```

编辑：

在 1º 近似值上，您使用哪一个来进行碰撞并不重要。然而，2º 近似值可能是首先计算建议的速度和位置。然后检查旧位置和新位置是否发生碰撞，并计算碰撞时间，我称之为dtCol。然后我们可以将时间步分为两部分：碰撞前 dtCol 和碰撞后 dt-dtCol。第一部分是将建议数量设置为

```
proposedVelocityBeforeCollision = oldVelocity + tickAcceleration*dtCol
proposedPositionBeforeCollision = oldPosition + proposedVelocityBeforeCollision*dtCol 
```

这个数量正好在碰撞之前。您现在可以使用 then 到 then 来使用碰撞方程 (proposedPositionAfterCollision =providedPosition) 计算提出的VelocityAfterCollision。

之后，您更新新的*数量：

```
newVelocity = proposedVelocityAfterCollision + tickAcceleration*(dt-dtCol)
newPosition = proposedPosition + newVelocity*(dt-dtCol) 
```

请注意，此过程不考虑一次以上的滴答碰撞。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T06:30:09.127

可能这里最简单的方法是让重力成为`mTotalForces`.

更物理的方法是使重力成为单独的加速度。然后添加到“mTotalForces / mMass”以获得最终的加速度值。

**编辑**

`Vector3 translation = (mVelocity * fElapsedTime) + 0.5 * mAcceleration * pow(fElapsedTime, 2);`

看来您的代码用于匀速运动。但是如果你想让一个球在落地后停止下落，它是不均匀的。

对于这样的非均匀运动，通常我们只是细分时间范围，在很短的时间内进行均匀计算，可以认为运动是均匀的，而忽略累积误差。

# android - 在 Eclipse 编辑器中更改 java 关键字的颜色

> ID：10592731
> 
> 赞同：6
> 
> 时间：2012-05-15T00:24:39.840
> 
> 标签：android, eclipse

如何在 Eclipse Java 编辑器中更改“包”“公共”“类”等 Java 关键字的颜色？我讨厌默认的紫色，谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-15T00:55:29.857

在 Eclipse 中：Window > Preferences > Java > Editor > Syntax Coloring > "Keyword 'return'" 和 "Keywords exclude 'return'"

# sql-server - 相关子查询应该抛出异常

> ID：10592732
> 
> 赞同：0
> 
> 时间：2012-05-15T00:24:42.500
> 
> 标签：sql-server

抱歉标题不好-我想不出更好的标题。

从本质上讲，SQL Server 2008 正在处理一个我预计会失败的子查询。

这是一个简单的例子：

```
CREATE TABLE UserDemographics
(
    UserID      INT,
    UserName    NVARCHAR(500)
)

CREATE TABLE UserAddresses
(
    UserAddressID   INT,
    Address     NVARCHAR(500)
)

INSERT INTO UserDemographics(UserID, UserName) VALUES(1, 'Joe'), (2, 'Sam'), (3, 'Ed')

INSERT INTO UserAddresses(UserAddressID, Address) VALUES(1, '1st Street'), (2, 'Old Address 1'), (3, 'Old Address 2')

DELETE FROM UserDemographics
WHERE UserID IN
(
    SELECT UserID FROM UserAddresses
) 
```

这就是有趣的原因：`UserAddresses`没有名为`UserID`. 相关子查询正在选择它正在查询的表中不存在的列。

显然，它与相关子查询有关 -`UserID`是表中的一列`UserDemographics`，出于某种原因，数据库正在进行该引用。

也许该`UserDemographics`表隐含在子查询的 from-list 中。

谁能解释一下？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T00:42:48.310

是的。相关子查询采用 UserDemographics.Userid，因为这是范围内唯一的 UserId。

假设您在人口统计表中有 AddressId 并且做了：

```
DELETE FROM UserDemographics
WHERE AddressID IN ( SELECT AddressId FROM UserAddresses ) 
```

在这种情况下，子查询中的 AddressId 将来自 UserAddresses。

这个故事的寓意是： ***在引用子查询中的列时，总是使用表名或别名。*** 以下得到您期望的错误：

```
DELETE FROM UserDemographics
WHERE UserID IN ( SELECT ua.UserId FROM UserAddresses ua) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:24:37.147

表 UserAddresses 的 UserAddressID 实际上是 tableUserDemographics 的 UserID 的外键

因为你提出的价值观

所以你应该使用 UserAddressID

```
DELETE FROM UserDemographics
WHERE UserID IN
(
    SELECT UserAddressID FROM UserAddresses
) 
```

但我的意思是这个脚本将删除所有在 UserAddresses 表中有地址的用户

在这种情况下，您应该添加一个 where 子句

```
DELETE FROM UserDemographics
WHERE UserID IN
(
    SELECT UserAddressID FROM UserAddresses where ???
) 
```

除非您打算删除在 UserAddresses 表中有引用的任何用户

# java - Java - 读取文件的问题

> ID：10592734
> 
> 赞同：1
> 
> 时间：2012-05-15T00:25:13.987
> 
> 标签：java, io

我有这个功能：

```
public static int checkRank(String lineToCompare){
    int rank = 0;
    try{
        // Open the file that is the first 
        // command line parameter
        FileInputStream fstream = new FileInputStream("ranks.txt");

        // Get the object of DataInputStream
        DataInputStream in = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));

        String strLine;
        //Read File Line By Line
        System.out.println("SPOT 0");
        while ((strLine = br.readLine()) != null)   {
            //Compare the line with the line to compare (string)
            System.out.println("SPOT 1");
            if(strLine.trim().equals(lineToCompare)) {
                //I found it!  Read the next line...
                final String lineAfter = br.readLine();
                rank = Integer.parseInt(lineAfter);  
                System.out.println("SPOT 2");
            }else{
                rank = 0;
                System.out.println("SPOT 3");
            }
        }

        //Close the input stream
        in.close();
    }catch (Exception e){//Catch exception if any
        System.err.println("Error: " + e.getMessage());
    }

    System.out.println("Username: " + lineToCompare + " | Rank: " + rank);
    return rank;
} 
```

我的`ranks.txt`文件如下：

```
test1
2
test2
1 
```

控制台输出（“SPOT”仅用于调试）：

```
[Commands] SPOT 0
[Commands] SPOT 1
[Commands] SPOT 2
[Commands] SPOT 1
[Commands] SPOT 3
[Commands] SPOT 1
[Commands] SPOT 3
[Commands] Username: test1 | Rank: 0 
```

如您所见，如果它工作正常，它会说 test1 的排名为 2。有人可以帮我确定问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T00:37:51.407

您在最后一个循环迭代中`rank`覆盖。`0`

`break;`击中时使用跳出循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T00:39:59.533

您应该添加一个休息时间；在打印出“SPOT 2”以结束 while 循环的行之后的语句。

如果没有中断，则在读取“test2”行时将排名设置为 0，然后在读取“1”行时将排名设置为 0（while 循环一直持续到文件末尾）。

# javascript - jQuery webcam/flash：如何检测网络摄像头是否处于活动状态？

> ID：10592738
> 
> 赞同：5
> 
> 时间：2012-05-15T00:26:17.947
> 
> 标签：javascript, jquery, flash, webcam

我在我正在开发的网站中使用[这个 jQuery 网络摄像头插件](http://www.xarg.org/project/jquery-webcam-plugin/)。如果您访问该网站，您会注意到它使用 Flash，您必须单击“接受”才能使其正常工作。

我想确定网络摄像头是否处于活动状态（打开）。如何使用 javascript/jquery 执行此操作？

换句话说，我在这里的 if 语句中替换了什么？

```
function capture_image(){
    if(webcam.muted == true) {alert("hey");} 
```

我远不是 javascript 和 jquery 的专业人士，所以非常感谢真正的代码。

此外，如果有人能告诉我如何捕捉网络摄像头被激活的事件，我将不胜感激。如果您无法弄清楚，请不要担心。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T15:21:20.160

将以下功能添加到`debug`网络摄像头的选项中。

```
$("#camera").webcam({
    width: 320,
    // other options etc.
    debug: function(type, message) { 
        if (message === "Camera started") { window.webcam.started = true; } 
    }
}); 
```

我们无法测试不活动是否为真（即`muted === true`），但现在我们可以测试是否`webcam.started`为`true`或`undefined`/ `false`：

```
function capture_image(){
    if( !webcam.started ) { alert("hey, camera not started"); }
} 
```

**如何捕捉事件**

除了事件之外，没有事件本身`debug`。你可以做一个...

*首先执行以下操作：*

```
$("#camera").webcam({
    width: 320,
    // other options etc.
    debug: function(type, string) { 
        if (string === "Camera started") { 
            window.webcam.started = true; 
            if (window.webcam.onStarted) { window.webcam.onStarted(); } 
        } 
    }
}); 
```

*接下来为我们的新事件添加一个函数`webcam.onStarted`：*

```
window.webcam.onStarted = function () {
    alert("Whey, the webcam started");
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T07:22:29.917

您可以使用该方法`.getCameraList()`获取所有可用的相机。

> onLoad 一旦接口注册完成，就会调用 onLoad 回调。在上面的示例中，我使用回调来获取所有可用摄像机的列表：

```
onLoad: function() {
    var cams = webcam.getCameraList();
    for(var i in cams) {
        jQuery("#cams").append("<li>" + cams[i] + "</li>");
    } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T07:01:26.150

我认为您需要使用[ExternalInterface API](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)来告诉您页面上的 JavaScript 何时同意隐私设置。

但是我不知道你是否能够得到你想要的“图像信息”，因为 flash 可以控制相机，所以 JavaScript 只能通过 ExternalInterface 告诉 flash 去“捕获”和图像，你在页面上的 javascript 可以对其进行任何操作之前，可能必须使用 flash (ActionScript) 将图像数据发送到 Web 服务。

HTML5 有一个[`<input type="file" accept="image/*" capture="camera" id="capture">`](http://www.w3.org/TR/html-media-capture/)可能就足够了，而不是 flash 实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-03T14:29:25.827

不确定所有这些插件等。这对我有用，尽管我们仍在测试：

```
webcamActive = false;
webcamActive = $("#video").attr('src'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-26T15:46:36.097

如果有人在这里找到检测网络摄像头何时加载的解决方案并且他正在使用[webcam.js](https://github.com/jhuckaby/webcamjs)，那么这里是检测网络摄像头何时加载的方法：

```
Webcam.on( 'live', function() {
    // camera is live, showing preview image
    // (and user has allowed access)
} ); 
```

# javascript - Javascript 代码格式化程序不起作用（Indigo SR2 Java EE - 64 位）

> ID：10592739
> 
> 赞同：1
> 
> 时间：2012-05-15T00:26:19.743
> 
> 标签：javascript, eclipse, formatting

我不知道为什么 Indigo 不想格式化我的 javascript 页面。我可以在 Preferences > Javascript > code style > formater 中看到格式属性，但没有任何反应（菜单：Source > format 或 CTRL+F）。

任何想法？

# php - 类的 PHP 变量不起作用

> ID：10592740
> 
> 赞同：-3
> 
> 时间：2012-05-15T00:26:31.923
> 
> 标签：php, php-5.3

我需要 php 方面的帮助。我有一个脚本，我需要它来包含一个文件。这是我想做的

```
class example{
var $firstname = file_get_contents("myfirstname.txt");
var $lastname = file_get_contents("lastname.txt");
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T00:32:36.340

您不能`file_get_contents`在类内的变量声明中使用函数。您可以在构造函数中分配值：

```
class Example{
    public $firstname;
    public $lastname;

    function Example() {
        $this->firstname = file_get_contents("myfirstname.txt");
        $this->lastname = file_get_contents("lastname.txt");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T00:38:49.597

或者在 PHP > 5

```
class Example{
    public $firstname;
    public $lastname;

    function __construct() {
        $this->firstname = file_get_contents("myfirstname.txt");
        $this->lastname = file_get_contents("lastname.txt");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T00:31:54.577

您不能以这种方式初始化类成员。

查看手册： http: [//pt2.php.net/manual/en/language.oop5.properties.php](http://pt2.php.net/manual/en/language.oop5.properties.php)

您只能使用常量值初始化类成员。

# ruby - Ruby Block：将proc每一行的结果存储到变量中？

> ID：10592745
> 
> 赞同：0
> 
> 时间：2012-05-15T00:27:32.147
> 
> 标签：ruby, eval, block, proc

我想知道是否有人（比如我自己=]）可以创建一些方法来做这样的事情：

```
x = magic_method do
  create_string "some_string" # a method that returns "This is <some string>\n "
  create_string "other_string"
  create_string "third_string"
end 
```

然后会返回

```
puts x #=> This is some_string\n This is other_string\n This is third_string 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T00:50:08.393

几个选项。最简单的方法是改变原始字符串：

```
def create_string(str)
  str.sub!(/\A/, "This is ") << "\n"
end 
```

# python - 最好将所有内容放在 m/v/c 文件夹下，或者将模块文件夹与 m、v、c 文件分开？

> ID：10592746
> 
> 赞同：2
> 
> 时间：2012-05-15T00:28:10.503
> 
> 标签：python, model-view-controller, flask, directory-structure

在这个 wiki ( [https://github.com/mitsuhiko/flask/wiki/Large-app-how-to](https://github.com/mitsuhiko/flask/wiki/Large-app-how-to) ) 中，flask 的创建者（或任何编写 wiki 的人）推荐了带有模型、视图的单独模块文件夹的目录结构，它下的控制器文件。我在大多数其他地方看到了模型、视图、控制器、表单文件夹，所有模块都集中在它们下面。是否有充分的理由选择一种方式而不是另一种方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:20:50.860

我会说这取决于应用程序的大小。

*   对于小型到小型应用程序，您可以拥有一个平面包甚至一个文件。
*   如果您的应用程序是中型的，则可以使用一级分组（模型、视图、表单）。
*   如果应用程序要更大，两个级别会更好。如果应用程序的模块紧密互连，那么也许您可以先拆分为模型/视图，然后按模块，但通常模块化就是使它们独立，因此按模块拆分是合乎逻辑的，然后对于大模块，拆分为模型/视图。

# redis - redis 从集合中删除特定成员

> ID：10592749
> 
> 赞同：3
> 
> 时间：2012-05-15T00:28:40.157
> 
> 标签：redis, set, members

我有一组成员。例如一个名为“college”的集合，其中包含 20 个学院的名称。

现在我如何从集合中只删除一个子集，例如一组选定的 10 所大学？

我正在运行 v2.4.5 的 redis 服务器

在这里找到的文档[http://redis.io/commands/srem](http://redis.io/commands/srem)说我们可以删除 redis >= 2.4 的多个键，但仍然无法弄清楚如何实现这一点。

我正在使用 RubyonRails，我在我的 rails 控制台中完成了它

```
> $redis
    #<Redis client v2.2.2 connected to redis://localhost:6379/0 (Redis v2.4.5)>
> ruby-1.9.3-p0 :011 > $redis.sadd("college","champion1")
 => true 
ruby-1.9.3-p0 :012 > $redis.sadd("college","champion2")
 => true 
ruby-1.9.3-p0 :013 > $redis.sadd("college","champion3")
 => true 
ruby-1.9.3-p0 :014 > $redis.sadd("college","champion4")
 => true 
ruby-1.9.3-p0 :015 > $redis.sadd("college","champion5")
 => true
ruby-1.9.3-p0 :016 > $redis.smembers("college")
 => ["champion1", "champion2", "champion3", "champion4", "champion5"
ruby-1.9.3-p0 :017 > $redis.srem("college","champion1" "champion2")
 => false
ruby-1.9.3-p0 :018 > $redis.smembers("college")
 => ["champion1", "champion2", "champion3", "champion4", "champion5"] 
```

成员“champion1”和“champion2”不会从集合中移除。

我已经安装了 redis (2.2.2 ruby​​) gem。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T01:12:50.380

抱歉，这是 Rails 特有的问题。

我已经安装了 redis gem 2.2.2 版，它不支持删除多个键。但是，但是进入 redis-cli for redis server >=2.4 我们可以实现它。

```
gagan@gagan-desktop:~/projects/test_proj [master]$ redis-cli
redis 127.0.0.1:6379> smembers "college"
1) "champion1"
2) "champion2"
3) "champion3"
4) "champion4"
5) "champion5"
redis 127.0.0.1:6379> srem "college" "champion1" "champion2"
(integer) 2
redis 127.0.0.1:6379> smembers "college"
1) "champion3"
2) "champion4"
3) "champion5"
redis 127.0.0.1:6379> exit 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T00:33:40.910

```
% telnet localhost 6379
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.

...

sadd myset 1 2 3      
:3
srem myset 1 3
:2 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-15T02:42:19.357

鉴于您的客户端库不支持执行此操作的简单方法，您可以使用 [sdiff](http://redis.io/commands/sdiff)或[sdiffstore](http://redis.io/commands/sdiffstore)。创建一组要移除的成员并获取集合的差异，并将结果存储回原始集合。

它可能有点复杂，但它应该可以工作。

# c++ - 带纹理的 glDrawElement

> ID：10592750
> 
> 赞同：0
> 
> 时间：2012-05-15T00:28:40.523
> 
> 标签：c++, opengl, vertex-attributes

我无法让我的 3D 模型纹理化，我只是深入研究 3D 模型，因为我一直在使用基本原语进行测试，并且一直在处理更多引擎特定的代码。但是我在使用 glDrawElements 函数时遇到了问题，我知道我的纹理已正确加载，因为我能够将其绘制到四边形（请注意注释中的 glBegin）。但是，当使用 glDrawElements 时，我没有绘制纹理。它确实显示了部分纹理的颜色（黄色），当我删除纹理代码时，它会将 3D 模型返回到最后设置的颜色，所以它正在做一些事情。我在想这可能与我的 glVertexAttributePointer 有关，我得到了这些函数的作用。

```
glMatrixMode(GL_MODELVIEW);
    glMultMatrixf(m_Props.WorldMatrix.data);

    glEnableVertexAttribArray(0);
    glEnableVertexAttribArray(1);
    glEnableVertexAttribArray(2);

    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, sizeof(VertexPTN), 0);
    glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, sizeof(VertexPTN), (const GLvoid*)12);
    glVertexAttribPointer(2, 3, GL_FLOAT, GL_FALSE, sizeof(VertexPTN), (const GLvoid*)20);

    glBindBuffer(GL_ARRAY_BUFFER, pExtra->GetVB());
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, pExtra->GetIB());

    glScalef(0.05, 0.05, 0.05);

    glEnable(GL_TEXTURE_2D);
    glActiveTexture(GL_TEXTURE0);
    glBindTexture(GL_TEXTURE_2D, pTexExtra->GetTexture());

     glDrawElements(GL_TRIANGLES, pExtra->GetIndexCount(), GL_UNSIGNED_INT, 0); 
     /*glBegin(GL_QUADS);
        glTexCoord2f(0, 0); glVertex3f(0.0f, 0.0f, 0.0f);
        glTexCoord2f(0, 1); glVertex3f(10.0f, 0.0f, 0.0f);
        glTexCoord2f(1, 1); glVertex3f(10.0f, 10.0f, 0.0f);
        glTexCoord2f(1, 0); glVertex3f(0.0f, 10.0f, 0.0f);
     glEnd();*/

    glDisable(GL_TEXTURE_2D);

    glDisableVertexAttribArray(2);
    glDisableVertexAttribArray(1);
    glDisableVertexAttribArray(0); 
```

我的 VertexPTN 类只是位置、纹理坐标和法线的容器。所以我假设我的向量在班级中的定位是这样的；Vector3f、Vector2f、Vector3f，我会将 glVertexAttributePointer 的最后一个参数设置为 0、12、20。

对我遗漏的任何东西有任何误解吗？我真的不是 openGL 专家，但我确实了解相当多的设置和基本渲染。是什么导致我的纹理不渲染到我的网格，未设置的 GL 状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T01:16:23.350

一些想法：

你在使用着色器吗？glVertexAttribPointer 仅适用于着色器

*   **如果是**：您确定您的输入是 0、1 和 2？如果在着色器与 glBindAttribLocation 链接之前没有设置这些，则不能保证它们是任何特定值。
*   **如果否**：您应该使用 glVertexPointer、glTexCoordPointer 等而不是 AttribPointer

此外，如果您使用着色器，则启用/禁用 GL_TEXTURE_2D 是多余的，它不会做任何事情。

# java - 在 XSL FO 文件中查找特定页面

> ID：10592751
> 
> 赞同：2
> 
> 时间：2012-05-15T00:28:47.370
> 
> 标签：java, pdf, xsl-fo

我有一本相当大的 DocBook 书，它被转换成 XSL FO 文件。此 FO 文件正在生成一个

`java.lang.UnsupportedOperationException: readRaster not supported!`

当我尝试将其编译为 PDF 时出错。我可以从输出中看出这是在特定页面上发生的，但是我看不到任何方法来实际确定该页面上放置了哪些内容。我需要的是某种方法来确定哪些内容实际上构成了引发错误的页面，因此我可以向后工作并修复原始来源。

是否有任何我可以计算的每页出现一次的 FO 标签，或者以其他方式访问特定页面？

# javascript - 如何在原型上定义 setter/getter

> ID：10592753
> 
> 赞同：86
> 
> 时间：2012-05-15T00:29:14.867
> 
> 标签：javascript, getter, gjs

**编辑 2016 年 10 月**：请注意这个问题是在 2012 年提出的。每个月左右都会有人添加一个新的答案或评论来反驳一个答案，但这样做并没有任何意义，因为这个问题可能已经过时了（记住，是让**Gnome Javascript**编写 gnome-shell 扩展，而不是浏览器的东西，这是非常具体的）。

在[我之前](https://stackoverflow.com/questions/10580158/making-subclass-with-prototype-and-proto)关于如何在 Javascript 中进行子类化的问题之后，我正在制作一个超类的子类，如下所示：

```
function inherits(Child,Parent) {
    var Tmp = function {};
    Tmp.prototype = Parent.prototype;
    Child.prototype = new Tmp();
    Child.prototype.constructor = Child;
}
/* Define subclass */
function Subclass() {
    Superclass.apply(this,arguments);
    /* other initialisation */
}
/* Set up inheritance */
inherits(Subclass,Superclass);
/* Add other methods */
Subclass.prototype.method1 = function ... // and so on. 
```

我的问题是，**如何使用这种语法在原型上定义 setter/getter？**

我曾经做：

```
Subclass.prototype = {
    __proto__: Superclass.prototype,
    /* other methods here ... */

    get myProperty() {
        // code.
    }
} 
```

但显然以下方法不起作用：

```
Subclass.prototype.get myProperty() { /* code */ } 
```

我正在使用 GJS（GNOME Javascript），该引擎与 Mozilla Spidermonkey 引擎大致相同。我的代码不适用于浏览器，只要 GJS 支持它（我猜这意味着 Spidermonkey？），我不介意它是否不交叉兼容。

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-05-15T00:39:57.983

[`Object.defineProperty()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/defineProperty)上使用`Subclass.prototype`。在某些浏览器上也有[`__defineGetter__`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/DefineGetter) 并且[`__defineSetter__`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/DefineSetter)可用，但它们已被弃用。对于您的示例，它将是：

```
Object.defineProperty(Subclass.prototype, "myProperty", {
    get: function myProperty() {
        // code
    }
}); 
```

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2012-05-15T00:41:41.420

使用对象文字声明（最简单的方法）：

```
var o = {
    a: 7,
    get b() {
        return this.a + 1;
    },
    set c(x) {
        this.a = x / 2
    }
}; 
```

使用[`Object.defineProperty`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/defineProperty)（在支持 ES5 的现代浏览器上）：

```
Object.defineProperty(o, "myProperty", {
    get: function myProperty() {
        // code
    }
}); 
```

或使用`__defineGetter__`和`__defineSetter__`（**已弃用**）：

```
var d = Date.prototype;
d.__defineGetter__("year", function() { return this.getFullYear(); });
d.__defineSetter__("year", function(y) { this.setFullYear(y); }); 
```

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2016-02-21T22:51:54.430

我想你想这样做：

```
function Unit() {
   	this._data; // just temp value
}
Unit.prototype = {
 	get accreation() {
   		return this._data;
   	},
   	set accreation(value) {
   		this._data = value
   	},
}
Unit.prototype.edit = function(data) {
   	this.accreation = data; // setting
   	this.out();
};

Unit.prototype.out = function() {
    alert(this.accreation); // getting
};

var unit = new Unit();
unit.edit('setting and getting');

function Field() {
    // children
}

Field.prototype = Object.create(Unit.prototype);

Field.prototype.add = function(data) {
  this.accreation = data; // setting
   	this.out();
}

var field1 = new Field();
field1.add('new value for getter&setter');

var field2 = new Field();
field2.out();// because field2 object has no setting
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-12-11T00:13:40.943

要在“对象的原型内”定义 setter 和 getter，您必须执行以下操作：

```
Object.defineProperties(obj.__proto__, {"property_name": {get: getfn, set: setfn}}) 
```

您可以使用实用功能缩短它：

```
//creates get/set properties inside an object's proto
function prop (propname, getfn, setfn) {
    var obj = {};
    obj[propname] = { get: getfn, set: setfn };
    Object.defineProperties(this, obj);        
}

function Product () {
     this.name =  "Product";
     this.amount =  10;
     this.price =  1;
     this.discount =  0;
}

//how to use prop function
prop.apply(Product.prototype, ["total", function(){ return this.amount * this.price}]);

pr = new Product();
console.log(pr.total); 
```

这里我们使用 prop.apply 将上下文 Product.prototype 设置为“this”，当我们调用它时。

使用此代码，您将以对象原型中的 get/set 属性结束，而不是问题所问的实例。

（已测试 Firefox 42、Chrome 45）

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-10-25T14:22:11.190

通过 Object.defineProperty() 方法在构造函数中指定 getter 或 setter。此方法接受三个参数：第一个参数是要添加属性的对象，第二个是属性的名称，第三个是属性的描述符。例如，我们可以为我们的 person 对象定义构造函数，如下所示：

```
var Employee = (function() {
    function EmployeeConstructor() {
        this.first = "";
        this.last = "";
        Object.defineProperty(
            this,
            "fullName", {
                get: function() {
                    return this.first + " " +
                        this.last;
                },
                set: function(value) {
                    var parts = value.toString().split(" ");
                    this.name = parts[0] || "";
                    this.last = parts[1] || "";
                }
            });
    }
    return
    EmployeeConstructor;
}()); 
```

使用 Object.defineProperty() 可以更好地控制我们的属性定义。例如，我们可以指定我们正在描述的属性是否可以动态删除或重新定义，它的值是否可以更改等等。

我们可以通过设置描述符对象的以下属性来进行此类约束：

*   writable：这是一个布尔值，表示属性的值是否可以更改；它的默认值为 false
*   可配置的：这是一个布尔值，表示是否可以更改属性的描述符或可以删除​​属性本身；它的默认值为 false
*   enumerable：这是一个布尔值，指示是否可以在对象属性的循环中访问该属性；它的默认值为 false
*   value：这表示与属性关联的值；它的默认值是未定义的

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-10-23T09:56:54.517

这是一个简单的`Animal → Dog`继承示例，`Animal`具有*getter*和*setter*：

```
//////////////////////////////////////////
// General Animal constructor
function Animal({age, name}) {
  // if-statements prevent triggering the setter on initialization
  if(name) this.name = name
  if(age) this.age = age
}

// an alias "age" must be used, so the setter & getter can use an
// alternative variable, to avoid using "this.age", which will cause
// a stack overflow of "infinite" call stack when setting the value.
Object.defineProperty(Animal.prototype, "age", {
  get(){
    console.log("Get age:", this.name, this._age) // getting
    return this._age
  },
  set(value){
    this._age = value
    console.log("Set age:", this.name, this._age) // setting
  }
})

//////////////////////////////////////////
// Specific Animal (Dog) constructor
function Dog({age = 0, name = 'dog'}) {
  this.name = name
  this.age = age
}

// first, defined inheritance
Dog.prototype = new Animal({});

// add whatever additional methods to the prototype of Dog
Object.assign(Dog.prototype, {
  bark(woff){
    console.log(woff)
  }
})

//////////////////////////////////////////
// Instanciating
var koko = new Animal({age:300, name:'koko'})
var dog1 = new Dog({age:1, name:'blacky'})
var dog2 = new Dog({age:5, name:'shorty'})

console.log(dog1)
koko.age
dog1.age = 3;
dog1.age
dog2.age
```

# wcf - WCF。流式绑定是否默认为没有流参数的缓冲？

> ID：10592754
> 
> 赞同：0
> 
> 时间：2012-05-15T00:29:18.550
> 
> 标签：wcf, streaming

我有一个 WCF RESTful 服务，它具有作为流公开的众多资源之一。我需要将绑定 transferMode 设置为 Stream 但不想仅为该一个蒸汽资源创建额外的绑定。我是否可以只为所有人设置 1 个绑定并将其 transferMode 设置为 Stream，而对于我的其他资源（没有 Streaming 类型），WCF 应该在该绑定上默认为 Buffered 吗？它是这样工作的吗？谢谢。

# ruby - 是否有一个红宝石函数来检查一个数字是否在一个数组中？

> ID：10592758
> 
> 赞同：-2
> 
> 时间：2012-05-15T00:29:59.803
> 
> 标签：ruby

是否有一个红宝石函数来检查一个数字是否在一个数组中？

就像是：

```
some_number in?(array) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T00:32:06.137

数组#[包括？](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-include-3F)

```
my_array.include? 25 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T00:32:03.500

您可以[`include?`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-include-3F)在数组上使用该方法。

一个例子：

```
[1, 2, 3, 4, 5, 6].include?(4)

=> true 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T03:23:54.280

没有`in`算子或`#in?`方法，但以前有人提出过，特别是由ruby​​-core 的顶级成员[Yusuke Endoh提出的。](http://bugs.ruby-lang.org/issues/3845)

正如其他人所指出的，对于包括, , ,在内[`include?`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-include-3F)的所有`Enumerable`s都存在相反的方法：`Array``Hash``Set``Range`

```
[1, 2, 3].include?(42) # => false 
```

请注意，如果您的数组中有许多值，它们将一个接一个地检查（即`O(n)`），而查找散列将是恒定时间（即`O(1)`）。因此，例如，如果您的数组是常量，那么使用 a 是一个好主意`Set`。例如：

```
require 'set'
ALLOWED_METHODS = Set[:to_s, :to_i, :upcase, :downcase
                       # etc
                     ]

def foo(what)
  raise "Not allowed" unless ALLOWED_METHODS.include?(what.to_sym)
  bar.send(what)
end 
```

[快速测试](http://pastie.org/3913273)表明，调用`include?`10 个元素比`Set`调用等效`Array`元素（如果未找到该元素）快大约 3.5 倍。

最后的结束语：`include?`在 a 上使用时要小心`Range`，有一些微妙之处，所以请参阅[文档](http://ruby-doc.org/core-1.9.3/Range.html#method-i-include-3F)并与[`cover?`](http://ruby-doc.org/core-1.9.3/Range.html#method-i-cover-3F)...进行比较

# php - 解析 PHP Soap 调用

> ID：10592764
> 
> 赞同：0
> 
> 时间：2012-05-15T00:30:46.920
> 
> 标签：php, arrays, parsing, soap, wsdl

我已经阅读了关于这个主题的多篇文章，但没有一篇文章能具体到我的案例来解决这个问题。

基本上，我正在对返回一组信息的 wsdl 服务进行肥皂调用。我需要做的是将这些信息解析为几个变量。

这是我实例化soap客户端然后调用传入SSN的wsdl服务的代码。现在 $result 包含服务传回的所有信息。我可以做一个 var_dump($result); 查看所有返回的值，这意味着我的问题不在于肥皂客户端或调用。

```
$client = new nusoap_client($url, array('soap_version' =>    SOAP_1_1, 'response_timeout' => 10 ));

$result = $client->call('getWSDL_element', array('SSN' => $SSN)); 
```

但是我需要知道如何使用循环将结果转换为变量。我尝试了以下但没有成功：

```
 foreach ($result["fullName"] as $fullName){
        $first = $fullName["firstName"];
        $last = $fullName["lastName"];
    } 
```

现在我期望 $first 和 $last 变量包含 wsdl 服务提供的名字和姓氏。但是我的语法一定是错误的。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T00:34:45.217

没有看到我不能确定，但​​我猜这就是你要找的`var_dump`：`$result`

```
$first = $result['fullName']['firstName'];
$last = $result['fullName']['lastName']; 
```

# java - 从 CUBRID 数据库中的类 java 文件加载 jar

> ID：10592768
> 
> 赞同：-2
> 
> 时间：2012-05-15T00:30:56.760
> 
> 标签：java, cubrid

我有一个 java 类，我想在外部 jar 中加载一个类。

jar 是 xstream-1.4.2.jar 类是 com.thoughtworks.xstream.XStream

我在谷歌搜索，但我无法插入对我的项目（jar）的外部引用

这是我的代码：

```
File file  = new File("c:\\cubrid\\bin\\xstream-1.4.2.jar");
URL url = file.toURL();  
URL[] urls = new URL[]{url};
ClassLoader cl = new URLClassLoader(urls);
Class cls = cl.loadClass("com.thoughtworks.xstream.XStream");
cadena = cls.toXML(objeto); 
```

我不知道如何调用方法，我在 google 中阅读了一些文档，但很抱歉是我在 Java 上编程的第二天。

我想生成一个 .class 库。这是为另一个应用程序加载的。为此，我需要使用某种方法从外部加载 jar。

此类文件将作为 java 存储过程加载到 CUBRID 数据库服务器中。

我的问题是错误：java.lang.reflect.InvocationTargetException

我的代码

```
import java.io.File;
import java.net.URL;
import java.net.URLClassLoader;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;

import javax.xml.parsers.DocumentBuilderFactory;

public class jp2 {

    static ResultSet resultado = null;
    static String cadena = null;
    static Statement statement = null;
    static DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();   

public static String Validar(String tblUsuariosLogin,String tblUsuariosPassword)
{

    try {
        Class.forName("cubrid.jdbc.driver.CUBRIDDriver");
        Connection con = DriverManager.getConnection("jdbc:default:connection:"); 

            File file  = new File("c:\\cubrid\\bin\\xstream-1.4.2.jar");
            URL url = file.toURL();  
            URL[] urls = new URL[]{url};
            ClassLoader cl = new URLClassLoader(urls);

            Class cls = cl.loadClass("com.thoughtworks.xstream.XStream");

               // XStream xstream = new XStream();
                cadena = cls.toXML(objeto); 

            return cadena;

        } catch (Exception e) {
            // TODO: handle exception
        }
        return cadena;

    }

} 
```

CUBRID 数据库允许您加载 .class 文件并在存储过程中使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T00:39:58.890

看一下[`URLClassLoader`](http://docs.oracle.com/javase/7/docs/api/java/net/URLClassLoader.html)，它允许您从外部 JAR 文件加载类。

/edit
你的问题是你试图调用一个`Class`对象的方法，而不是对象本身。如果要调用该方法，则需要创建一个[新实例](https://stackoverflow.com/a/5104630/758280)（参见提供的第二个方法）`Class`，并在结果上调用该方法。

你确定你不只是想在你的类路径上拥有那个 JAR 文件并直接处理类而不是使用反射来加载和实例化你需要的类吗？

# charts - Google Charts - 更改单个条形颜色

> ID：10592776
> 
> 赞同：29
> 
> 时间：2012-05-15T00:32:04.233
> 
> 标签：charts, google-visualization

使用 Google Charts 条形图，是否可以更改一个条形的颜色。例如，我想将 2006 年的数据设为红色（其他条为蓝色）。

```
 function drawVisualization() {
            // Create and populate the data table.
            var data = new google.visualization.DataTable();
            data.addColumn('string', 'Year');
            data.addColumn('number', 'Sales');

            data.addRows(4);
            data.setValue(0, 0, '2004');
            data.setValue(0, 1, 1000);

            data.setValue(1, 0, '2005');
            data.setValue(1, 1, 1170);

  /* NEED TO MAKE THIS BAR RED? */
            data.setValue(2, 0, '2006');
            data.setValue(2, 1, 1400);

            data.setValue(3, 0, '2007');
            data.setValue(3, 1, 1030);

            chart = new google.visualization.BarChart(document.getElementById('visualization'));
            chart.draw(data, {width: 400, height: 240, title: 'Company Performance',
                              vAxis: {title: 'Year', titleTextStyle: {color: 'red'}}
                             });
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-09T07:00:53.060

这是一个更改颜色的代码示例。请注意，“颜色”选项接受字符串数组。

```
var options = {
      title: 'Company Performance',
      hAxis: {title: 'Year', titleTextStyle: {color: 'red'}},
      colors: ['red','green'],
      is3D:true
}; 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-07-05T15:12:13.700

请参阅[https://developers.google.com/chart/interactive/docs/gallery/columnchart#Colors](https://developers.google.com/chart/interactive/docs/gallery/columnchart#Colors)

您可以将 { role: 'style' } 添加到数据表中。对于您希望具有相同颜色的所有列，只需指定一个空样式 ''。然后，在您想要红色的列上，您可以指定“红色”或“#ff0000”或“颜色：红色”等。

```
// example from Google
var data = google.visualization.arrayToDataTable([
    ['Element', 'Density', { role: 'style' }],
    ['Copper', 8.94, '#b87333'],            // RGB value
    ['Silver', 10.49, 'silver'],            // English color name
    ['Gold', 19.30, 'gold'],
    ['Platinum', 21.45, 'color: #e5e4e2' ], // CSS-style declaration
]); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-31T15:24:23.940

正如 Naveen 建议的那样，您应该添加另一个系列以使其使用不同的颜色，但是如果您添加`isStacked: true`到您的选项中，它将在彼此之上而不是彼此相邻地绘制条，并且不会改变它们的宽度或对齐方式，所以看起来不错。试试这个：

```
function drawVisualization() {
  // Create and populate the data table.
  var data = new google.visualization.DataTable();
            data.addColumn('string', 'Year');
            data.addColumn('number', 'Sales');
            data.addColumn('number', 'SalesMax');

            data.addRows(4);
            data.setValue(0, 0, '2004');
            data.setValue(0, 1, 1000);
            data.setValue(0, 2, 0);

            data.setValue(1, 0, '2005');
            data.setValue(1, 1, 1170);
            data.setValue(1, 2, 0);

  /* NEED TO MAKE THIS BAR RED? */
            data.setValue(2, 0, '2006');
            data.setValue(2, 1, 0);
            data.setValue(2, 2, 1400);

            data.setValue(3, 0, '2007');
            data.setValue(3, 1, 1030);
            data.setValue(3, 2, 0);

            var chart = new google.visualization.BarChart(document.getElementById('visualization'));
  chart.draw(data, {isStacked: true, width: 400, height: 240, title: 'Company Performance',
                              vAxis: {title: 'Year', titleTextStyle: {color: 'red'}},
                              series: [{color: 'blue', visibleInLegend: true}, {color: 'red', visibleInLegend: false}]
                             });
} ​ 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-11-03T12:32:25.140

```
var options = {

      colors: ['red','green', 'purple']

}; 
```

如果我们使用它，颜色参数将只接受数组，我们必须确保为所有元素添加颜色。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-15T01:08:44.343

你总是可以插入一个额外的列，所以它会有不同的颜色。我想这就是所有可以做的。

```
function drawVisualization() {
  // Create and populate the data table.
  var data = new google.visualization.DataTable();
            data.addColumn('string', 'Year');
            data.addColumn('number', 'Sales');
            data.addColumn('number', 'SalesMax');

            data.addRows(4);
            data.setValue(0, 0, '2004');
            data.setValue(0, 1, 1000);
            data.setValue(0, 2, 0);

            data.setValue(1, 0, '2005');
            data.setValue(1, 1, 1170);
            data.setValue(1, 2, 0);

  /* NEED TO MAKE THIS BAR RED? */
            data.setValue(2, 0, '2006');
            data.setValue(2, 1, 0);
            data.setValue(2, 2, 1400);

            data.setValue(3, 0, '2007');
            data.setValue(3, 1, 1030);
            data.setValue(3, 2, 0);

            var chart = new google.visualization.BarChart(document.getElementById('visualization'));
            chart.draw(data, {width: 400, height: 240, title: 'Company Performance',
                              vAxis: {title: 'Year', titleTextStyle: {color: 'red'}},
                              series: [{color: 'blue', visibleInLegend: true}, {color: 'red', visibleInLegend: false}]
                             });
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-19T03:00:47.833

**series** 对象数组，或具有嵌套对象的对象

一组对象，每个对象描述图表中相应系列的格式。要为系列使用默认值，请指定一个空对象 {}。如果未指定系列或值，则将使用全局值。每个对象都支持以下属性：

**color** - 用于此系列的颜色。指定一个有效的 HTML 颜色字符串。targetAxisIndex - 将此系列分配给哪个轴，其中 0 是默认轴，1 是相反轴。默认值为 0；设置为 1 以定义一个图表，其中针对不同的轴呈现不同的系列。至少一个系列被分配给默认轴。您可以为不同的轴定义不同的比例。

**visibleInLegend** - 一个布尔值，其中 true 表示该系列应该有一个图例条目，而 false 表示它不应该。默认为真。您可以指定一个对象数组，每个对象都按给定顺序应用于系列，或者您可以指定一个对象，其中每个孩子都有一个数字键，指示它适用于哪个系列。例如，以下两个声明是相同的，将第一个系列声明为黑色且不包含在图例中，第四个系列声明为红色且不包含在图例中：

```
series: {0:{color: 'black', visibleInLegend: false}, 3:{color: 'red', visibleInLegend: false}} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-04T13:29:04.220

我现在使用角色样式技术解决了这个问题，用于生成动态数据的图表我使用随机函数来生成颜色

```
 function random_color_part() {
return str_pad( dechex( mt_rand( 0, 255 ) ), 2, '0', STR_PAD_LEFT);
}

function random_color() {
return random_color_part() . random_color_part() . random_color_part();
}
then simply
$color=random_color();
print "['$rows[1]',$rows[2],'#$color'],\n"; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-06-13T21:45:30.387

这是上述提示的示例

```
google.charts.load('current', { packages: ['corechart', 'bar'] })
google.charts.setOnLoadCallback(drawStacked)

function mt_rand (min, max) {
  var argc = arguments.length
  if (argc === 0) {
    min = 0
    max = 2147483647
  } else if (argc === 1) {
    throw new Error('Warning: mt_rand() expects exactly 2 parameters, 1 given')
  }
  return Math.floor(Math.random() * (max - min + 1)) + min
}

function dechex (d) {
  var hex = Number(d).toString(16)
  hex = '000000'.substr(0, 6 - hex.length) + hex
  return hex
}

function str_pad (str) {
  str += ''
  while (str.length < 3) {
    str = str + str
  }
  return str
}

function random_color_part () {
  // return str_pad( dechex( mt_rand( 0, 255 ) ), 2, '0', 1);
  return mt_rand(0, 255)
}

function random_color () {
  return 'rgb(' + random_color_part() + ',' + random_color_part() + ',' + random_color_part() + ')'
}

let $color = random_color()
// alert($color);

function drawStacked () {
  // var data = new google.visualization.DataTable();

  var data = google.visualization.arrayToDataTable([
    ['Element', 'Density', { role: 'style' }],
    ['cor-glenio-aleatoria', 8.94, random_color()], // RGB value
    ['cor-arlei-aleatoria', 10.49, random_color()], // English color name
    ['outra cor', 19.30, random_color()],

    ['outra cor fixa', 21.45, 'color: #e5e4e2' ] // CSS-style declaration
  ])

  var options = {
    title: 'Motivation and Energy Level Throughout the Day',
    isStacked: true,
    hAxis: {
      title: 'Time of Day',
      format: 'h:mm a',
      viewWindow: {
        min: [7, 30, 0],
        max: [17, 30, 0]
      }
    },
    vAxis: {
      title: 'Rating (scale of 1-10)'
    }
  }

  var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'))
  chart.draw(data, options)
} 
```

```
https://jsfiddle.net/zeh3pn6d/2 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-09-03T08:33:35.067

把这个留在这里，以防其他人遇到和我一样的问题：

我有一个类似的问题，我无法更改条形图中特定条形的颜色。我按照文档所说的做了，并在这里尝试了一些答案，但没有任何效果。

结果，我只需要更改`google.charts.Bar`为`google.visualization.ColumnChart`.

# silverlight-5.0 - Silverlight5 PivotViewer 排序有bug？

> ID：10592786
> 
> 赞同：0
> 
> 时间：2012-05-15T00:34:06.923
> 
> 标签：silverlight-5.0, pivotviewer

我在一个主要工作的 MVC4 项目中有一个 Silverlight5 PivotViewer，但是有一个问题。模型中的一些属性被定义为 List。

```
[DataContract]
public class PTE_Test
{
    [DataMember]
    public string Name { get; set; }
    [DataMember]
    public string Description { get; set; }
    //...
    [DataMember]
    public List<string> Tags { get; set; }
    [DataMember]
    public List<string> Practices { get; set; }
    [DataMember]
    public List<string> SpecificAreas { get; set; }
} 
```

我希望它们用于过滤和搜索，这实际上效果很好。但是基于它们进行排序是没有意义的（您对列表中的哪个字符串进行排序？）。但是，它们不仅出现在排序列表中，而且如果用户选择其中之一，则会引发 ManagedRuntimeError 异常。

有谁知道控制哪些属性出现在排序列表中的方法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T04:16:32.857

不幸的是，您无法将排序与过滤器分开。要么全有，要么全无。

您至少可以通过获取您的 List 并将其更改为自定义对象并实现 IComparable 接口来解决用户遇到的错误。我在这里发布了一篇关于这个主题的博客文章：http: [//tonychampion.net/blog/index.php/2012/02/pivotviewer-multi-valued-properties/](http://tonychampion.net/blog/index.php/2012/02/pivotviewer-multi-valued-properties/)

# java - @ModelAttribute 对象字段未返回到控制器

> ID：10592796
> 
> 赞同：0
> 
> 时间：2012-05-15T00:37:34.043
> 
> 标签：java, spring-mvc

我有一个非常简单的控制器，它 1）加载要由表单（视图）使用的对象，2）接受通过该表单提交的对该对象的更改。控制器（“PersonController”）如下所示：

```
@RequestMapping(value="/accountsettings/{personid}")
public String loadAccountSettings(@PathVariable("personid") int personid,
                              ModelMap model){
    Person person = personService.find(personid);
    model.addAttribute("person",person);
    return "account-settings-form";
}

@RequestMapping(value="/saveaccountsettings")
public String saveSettings(@ModelAttribute("person") Person person){
    personService.update(person);
    return "account-settings-form";
} 
```

“人” pojo 看起来像这样：

```
public class Person {

    private id int;
    private String name;
    private String username;
    private String phoneNumber;

    //getters and setters follow   

} 
```

我的表单（account-settings-form.jsp）具有以下内容：

```
<form:form commandName="person" action="/saveaccountsettings">
   <form:input path="name" /><br />
   <form:input path="username" /><br />
   <form:input path="phoneNumber" /><br />
   <input type="submit" />
</form:form> 
```

我遇到的问题是，当表单加载数据（loadAccountSettings）时，所有字段都按预期填充（姓名、用户名和电话号码）。然而，当我去处理更新时，电话号码字段被视为空，即使数据在表单中并且（在使用 Firebug 进行检查时），我看到该值作为参数传回。

有谁知道为什么控制器会缺少此字段的 (person.phoneNumber) 值？

提前致谢。

-e

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T23:13:53.147

我发现了问题，这是我在上面的描述中遗漏的 Controller 的一部分，忘记了我几个月前添加的一个 InitBinder 方法。最近添加了电话号码字段，但没有添加到 @InitBinder 的 allowedFields 数组中：

```
@InitBinder
public void initBinder(WebDataBinder binder){
    binder.setAllowedFields(new String[]{
        "name", "username", "phoneNumber"
    });
} 
```

# mysql - Ruby on Rails - 尝试连接到 mysql2 数据库时遇到问题

> ID：10592797
> 
> 赞同：1
> 
> 时间：2012-05-15T00:37:34.580
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, dotcloud

**基本信息**

我有一个 Rails 应用程序**A**，它连接到托管在 dotcloud.com 上的 mysql 数据库。下面是我的 database.yml 文件的样子，

```
production:
  adapter: mysql2
  host: <host>
  port: <port>
  database: <database_name>
  username: <username>
  password: <password> 
```

直到这里它工作正常，我可以从**A**访问数据库中的记录，做查询和其他东西。

现在我有另一个 Rails 应用程序**B**需要连接到与**A**相同的数据库，所以我只需将上面完全相同的详细信息复制并粘贴到**B**中的 database.yml 文件中。但是，当我尝试在生产环境中进入 rails 控制台时，我似乎无法访问数据库。例如，如果我有一个用户表，它只会说`NameError: uninitialized constant User`.

这是访问控制问题吗？我应该如何去调试这个问题？

感谢任何建议。

* * *

**更新**

所以我将 .rb 和模式文件从**A**复制并粘贴到**B**。`uninitialized constant ActiveRecord (NameError)`但是，当我尝试在 Rails 控制台中访问数据库时，我得到了。有谁知道怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:41:46.510

我最终创建了一个新的 rails 应用程序，并重新设置了所有内容。复制相同的 database.yml 配置，然后 rake db:migrate，然后包含必要的模型文件，进入 rails 控制台，它现在可以工作了。

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T00:44:50.063

您是否为应用程序 B 运行了迁移？当然，数据库已经建立，但 App B 没有模式的副本。因此，您可以在 App B 中运行迁移，也可以将架构从 App A 复制到 App B。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T01:09:20.087

尝试使用以下方法列出您的表格：

```
ActiveRecord::Base.connection.tables 
```

这应该表明您是否至少可以正确访问数据库。

# android - 具有不同字体的子字符串的TextView？只有 TextView 的文本字符串中的子字符串是粗体

> ID：10592802
> 
> 赞同：2
> 
> 时间：2012-05-15T00:38:23.483
> 
> 标签：android

我需要显示只有子字符串为粗体的文本。无论如何要格式化，以便只有子字符串（日期字段）以粗体显示并且它也有不同的文本大小？我想我可以使用 3 个 TextView 并将其分解，但我宁愿不这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T00:51:52.337

您可以在 Android TextViews 中使用粗体和斜体标签。对于更高级的格式化，你可以使用[SpannableStringBuilder](http://developer.android.com/reference/android/text/SpannableStringBuilder.html)来构建你的格式化字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T02:42:57.363

如果您只需要您描述的简单格式，您可以使用 HTML 标签来实现它。

例如

```
tv.setText(Html.fromHtml("sample <big>sample</big> <big><big><big><b>sample</b></big></big></big>")); 
```

# shell - 在 linux bourne shell 中：如何计算文件中特定单词的出现次数

> ID：10592803
> 
> 赞同：3
> 
> 时间：2012-05-15T00:38:26.900
> 
> 标签：shell, unix, awk, grep

*word*是指任何以空格分隔的字符串。

假设文件`test.txt`有以下由空格分隔的单词：

```
hello hello hello hell osd
hello
hello 
hello
hellojames beroo helloooohellool axnber hello
way
how 
```

我想计算单词*hello*在每一行中出现的次数。

我使用该命令显示每行`awk -F "hello" '{print NF-1}' test.txt`中单词*hello的出现次数：*

```
3
1
1
1
4
0
0 
```

所以它总共找到 3+1+1+1+4 = 10 次出现。

问题出在第四行：*hello*作为一个单独的词只出现了 1 次；*hellojames*和*hellooohellool*等词不应被计算在内，因为*hello*不是由空格分隔的。

所以我希望它找到 7 次出现的*hello*作为单独的单词。

你能帮我写一个返回正确总数 7 次的命令吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T00:56:34.923

```
awk '{ for(i=1; i<=NF; i++) if($i=="hello") c++ } END{ print c }' file.txt 
```

如果您需要它打印每一行：

```
awk '{ c=1; for(i=0; i<=NF; i++) if($i=="hello") c++; print c }' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T02:14:25.117

```
grep -o '\<hello\>' filename | wc -l 
```

和位是字边界模式`\<`，`\>`因此表达式不会找到`foohello`or `hellobar`。

你也可以使用`awk -F '\\<hello\\>' ...`来达到同样的效果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T01:52:41.087

**Solution:**

```
sed 's/\s\+/\n/g' test.txt | grep -w hello  | wc -l 
```

**Explanation:**

```
sed 's/\s\+/\n/g' text.txt 
```

This replaces every span of whitespace with a newline, effectively reformatting the file `test.txt` so it has one word per line. The command `sed 's/FIND/REPLACE/g'` replaces the `FIND` pattern with `REPLACE` everywhere it appears. The pattern `\s\+` means "one or more whitespace characters", and `\n` is a newline.

```
grep -w hello 
```

This extracts only those lines that contain `hello` as a complete word.

```
wc -l 
```

This counts the number of lines.

* * *

If you want to count the number of occurrences per line, you can use the same technique, but process one line at a time:

```
while read line; do
  echo $line | sed 's/\s\+/\n/g' | grep -w hello  | wc -l
done < test.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-06T13:07:35.817

```
cat $FileName | tr '[\040]' '[\012]' | grep $word | wc -l 
```

此命令将更改新行中的空格，然后您可以轻松地 grep 该单词并计算包含给定单词的行数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T01:39:16.123

```
a=$(printf "\01")
b=hello
sed -e "s/\<$b\>/ $a /g" -e "s/[^$a]//g" -e "s/$a/ $b /g" file | wc -w 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-15T01:30:15.040

```
for word in `cat test.txt`; do
  if [[ ${word} == hello ]]; then
    helloCount=$(( ${helloCount} + 1));
  fi;
done;

echo ${helloCount} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-15T16:17:44.143

只改变“针”和“文件”

```
#!/usr/bin/env sh

needle="|"
file="file_example.txt"

IFS=$'\n'

counter=0
for line in `cat $file`
do
    counter=$[$counter+1]
    echo $counter"|"`echo $line | grep -o "$needle" | wc -l`
done 
```

它将打印行号和出现次数，由管道字符分隔

# javascript - 如何在下面指出这不是一个函数时修复此错误

> ID：10592804
> 
> 赞同：-2
> 
> 时间：2012-05-15T00:38:44.973
> 
> 标签：javascript, jquery, dom

我`$("<div/>").text(value).html is not a function is not a function`在下面的代码中收到错误：

```
function htmlEncode(value) { 
    return $('<div/>').text(value).html(); 
}

function startImageUpload(imageuploadform, imagefilename){

    $('.imagef1_cancel').eq(window.lastUploadImageIndex).html(
        '<div>' + 
        htmlEncode(imagefilename) + 
        '<button type="button" class="imageCancel" cancel_image_file_name="' + 
        imagefilename + 
        '">CANCEL</button><br/><hr/></div>'
    );

    $('.imagef1_cancel').eq(window.lastUploadImageIndex)
        .find(".imageCancel")
        .on("click", function(event) {
            var cancel_image_file_name = $(this).attr('cancel_image_file_name');
            console.log(cancel_image_file_name) 
            jQuery.ajax("cancelimage.php?imagefilename=" + cancel_image_file_name)
            return stopImageUpload(2, cancel_image_file_name);
    });       
    return true;
} 
```

但我不明白的是，它与下面的代码非常相似。

```
function htmlEncode(value) { 
    return $('<div/>').text(value).html(); 
}

function stopImageUpload(success, imagefilename) {
    imagecounter++;
    $('.listImage').eq(window.lastUploadImageIndex).append(
        '<div>' + 
        htmlEncode(imagefilename) +
        '<button type="button" class="deletefileimage" image_file_name="' +
        imagefilename + 
        '">Remove</button><br/><hr/></div>'
    ); 

    var _imagecounter = imagecounter;

    $('.listImage').eq(window.lastUploadImageIndex)
        .find(".deletefileimage")
        .on("click", function(event) {

            var image_file_name = $(this).attr('image_file_name');

            jQuery.ajax("deleteimage.php?imagefilename=" + image_file_name)
                .done(function(data) {
                    $(".imagemsg" + _imagecounter).html(data);
                }
            );
            $(this).parent().remove();
        }
    );    
    return true;   
} 
```

为什么会这样以及如何修复错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T02:13:47.830

我猜测，从那个错误中，你在某个时候将一个 jQuery 对象传递到你的方法 htmlEncode() 中。

使用jquery的text方法时，需要是文本或者可以解释为文本的东西。（例如，将输入一个 HTML 字符串并将其解释为普通字符串）

看看这个[jsFiddle](http://jsfiddle.net/gtmpf/1/)

或者只是把它放到你的控制台中：

```
$('<div/>').text($('<div/>')).html() 
```

我认为您的错误实际上来自您调用“startImageUpload”的位置以及您传递给它的内容。我必须查看您的其余代码才能确定。

# c++ - 为什么 AVIStreamRead 什么也不读？

> ID：10592806
> 
> 赞同：0
> 
> 时间：2012-05-15T00:39:25.113
> 
> 标签：c++, avi, vfw

我正在编写一个简单的 AVI 加载器来从 AVI 文件中获取每一帧并将其保存到 OpenGL 纹理中。我正在使用 VFW，并且`AVIStreamRead`没有返回任何东西。这是我抓取每一帧的代码：

```
void CVideoControl::SetFrame(long frame)
{
    HRESULT result;
    long bytes, samples;

    //Update variables
    m_currentFrame = frame;
    m_lastFrameChangeMS = gGlobalData->GetLastFrame();

    //Get the frame
    result = AVIStreamRead(m_aviStream, m_currentFrame, 1, m_inputTexture, m_videoAdjustedWidth * m_videoAdjustedHeight * 3, &bytes, &samples);
    if(FAILED(result))
        return;

    //Decompress the stream
    if(ICDecompress(m_decompressor, 0, m_inFormat, m_inputTexture, m_outFormat, m_outputTexture) != ICERR_OK)
        return;

    //Draw it to the OpenGL texture
    glBindTexture(GL_TEXTURE_2D, m_videoOutputTexture);
    glTexSubImage2D(GL_TEXTURE_2D, 0, 0, 0, m_videoAdjustedWidth, m_videoAdjustedHeight, GL_BGR_EXT, GL_UNSIGNED_BYTE, m_outputTexture);
} 
```

该变量`bytes`的值为 2740，`samples`为 1。但是，`m_inputTexture`为空。这不是一个坏指针或任何东西，它只是......空的。`AVIStreamRead`不返回任何错误。在[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/dd756849%28v=vs.85%29.aspx)中，唯一提到未读取数据的是：

> 如果 lpBuffer 为 NULL，则该函数不读取任何数据；

但`lpBuffer`不是NULL。我会发布更多代码，但它到处都是乱码。其他任何地方都没有其他明显错误，调试器显示所有正确信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T06:17:54.220

不同的 AVI 文件使用不同的编解码器进行编码。也许您尝试解码的文件没有 vfw 可以处理的编解码器。

此外，我将从一些工作示例代码开始，然后慢慢修改它以满足我的需要。当涉及到视频时，细节太多了，这使得纯文档几乎无用。

# iphone - 在 MKMapView 上绘制/理解 MKOverlayView 的大问题

> ID：10592808
> 
> 赞同：0
> 
> 时间：2012-05-15T00:39:44.353
> 
> 标签：iphone, ios, map, overlay

我正在尝试使用叠加层在 MKMapView 上绘制路线。这是我的代码：

创建视图（在按下按钮时调用）：

```
NSArray *route = [UCGeoConverter generateCoordinatesFromKML:self.kmlResponse];
    if (!self.routeView) {
        NSLog(@"create route");
        self.routeView = [[UCRouteView alloc] initWithRoute:route mapView:self.mapview];
        [self.mapview addOverlay:self.routeView];
    } 
```

现在这是我的 UCRouteView.h 文件。它继承自 MKOverlayView 并实现了 MKOverlay。

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>
#import "UCLocation.h"

@interface UCRouteView : MKOverlayView <MKOverlay>
{
    MKMapView* _mapView;
    NSArray* _points;
    UIColor* _lineColor;
}

-(id) initWithRoute:(NSArray*)routePoints mapView:(MKMapView*)mapView;

@property (strong, nonatomic) id delegate;
@property (nonatomic) MKCoordinateRegion region;
@property (nonatomic, retain) NSArray* points;
@property (nonatomic, retain) MKMapView* mapView;
@property (nonatomic, retain) UIColor* lineColor;
@end 
```

现在进行实施。在这里我有很大的麻烦。首先，似乎委托不起作用，因为没有调用任何方法（除了 init .. 显然）我将委托设置为 self。我很难理解这是如何工作的，所以如果你们能在这里帮助我，我将不胜感激，这非常重要！非常感谢

```
#import "UCRouteView.h"

@implementation UCRouteView

@synthesize mapView     = _mapView;
@synthesize points      = _points;
@synthesize lineColor   = _lineColor; 
@synthesize delegate    = _delegate;
@synthesize region      = _region;

-(id) initWithRoute:(NSArray*)routePoints mapView:(MKMapView*)mapView
{
    self.delegate = self;
    self = [super initWithFrame:CGRectMake(0, 0, mapView.frame.size.width, mapView.frame.size.height)];

    [self setMapView:mapView];
    [self setPoints:routePoints];

    // determine the extents of the route points and zoom to that area. 
    CLLocationDegrees maxLat = -90;
    CLLocationDegrees maxLon = -180;
    CLLocationDegrees minLat = 90;
    CLLocationDegrees minLon = 180;

    for(int idx = 0; idx < self.points.count; idx++)
    {
        UCLocation* currentLocation = [self.points objectAtIndex:idx];
        if(currentLocation.coordinates.latitude > maxLat)
            maxLat = currentLocation.coordinates.latitude;
        if(currentLocation.coordinates.latitude < minLat)
            minLat = currentLocation.coordinates.latitude;
        if(currentLocation.coordinates.longitude > maxLon)
            maxLon = currentLocation.coordinates.longitude;
        if(currentLocation.coordinates.longitude < minLon)
            minLon = currentLocation.coordinates.longitude;
    }

    _region.center.latitude     = (maxLat + minLat) / 2;
    _region.center.longitude    = (maxLon + minLon) / 2;
    _region.span.latitudeDelta  = maxLat - minLat;
    _region.span.longitudeDelta = maxLon - minLon;

    [self.mapView setRegion:_region];
    return self;
}
- (MKMapRect)boundingMapRect
{
    // 1\. Problem: this returns the MapRect where the overlay is in, right? 
    // So why not just return the MapRect which is visible right now?
    return self.mapView.visibleMapRect;
}

-(BOOL)canDrawMapRect:(MKMapRect)mapRect zoomScale:(MKZoomScale)zoomScale
{
   // 2\. just return YES to make sure it draws
    return YES;
}

-(MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id<MKOverlay>)overlay
{
    // 3\. this never gets called? what's wrong?
    NSLog(@"mapview viewForOverlay");
    return self;
}

-(void)drawMapRect:(MKMapRect)mapRect zoomScale:(MKZoomScale)zoomScale inContext:(CGContextRef)context
{    
    // does not get called either. I know the drawing code as is works to draw a route,
    // but I think I'm missing something here aswell..
    NSLog(@"draw route");
    // only draw lines if not in the middle of a transition and we 
    // acutally have some points to draw. 
    if(self.points && self.points.count > 0)
    {
        // set the color to draw the route
        if(nil == self.lineColor)
            self.lineColor = [UIColor blueColor];

        CGContextSetStrokeColorWithColor(context, self.lineColor.CGColor);
        CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 1.0);

        // Draw them with a 2.0 stroke width
        CGContextSetLineWidth(context, 2.0);

        for(int idx = 0; idx < self.points.count; idx++)
        {
            UCLocation* location = [self.points objectAtIndex:idx];
            CGPoint point = [_mapView convertCoordinate:location.coordinates toPointToView:self];

            // set starting point and 'move' to it
            if(idx == 0)
            {
                // TODO: set special annotation for start/endpoint
                CGContextMoveToPoint(context, point.x, point.y);
            }
            else
            {
                CGContextAddLineToPoint(context, point.x, point.y);
            }
        }
        CGContextStrokePath(context);
    }
}
    @end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T00:57:46.370

首先，您试图在设置`self`之前调用设置器（即您的`self.delegate = self`来*之前* `[super init...]`）。这在任何对象的任何地方都不起作用。

不过，更重要的是，`delegate`您打算设置哪个？您的`UCRouteView`类是 的子类`MKOverlayView`，它没有`delegate`属性（也没有它的超类）。实际上，您的方法来自`<MKMapViewDelegate>`，表明您*打算*设置`mapView`' 委托。所以正确的调用应该是`[[self mapView] setDelegate:self]`（或者，如果你更喜欢点语法，`self.mapView.delegate = self`.

我还没有详细浏览您的其余代码......看看进行上述更改是否至少会导致您的方法被调用。（我不完全确定你的类架构在这里是最优的，但我们在这个阶段不需要处理这个问题。）

# java - Java-将JSP中的html表中的数据导入EXCEL和pdf

> ID：10592813
> 
> 赞同：1
> 
> 时间：2012-05-15T00:40:05.567
> 
> 标签：java, javascript, excel, html-table

我正在开发一个 jsp 项目，但我很少有 jsp 以 HTML 格式显示搜索到的数据。当我在摇摆的窗口中做同样的事情时，Jtable 让构建函数和 IO 变得非常容易，但我不知道如何通过单击按钮将 jsp 中的 html 表格数据转换为 excel 和 pdf。

在这种情况下，任何人都可以帮助我，从 javascript 到核心 IO 代码都可以，因为如果你有一个有用的链接，我在任何地方都找不到任何有用的东西。

html表格的基本结构在某些列中与href一起使用

# python - 检查 SQLAlchemy 列的属性？

> ID：10592816
> 
> 赞同：1
> 
> 时间：2012-05-15T00:42:18.957
> 
> 标签：python, sqlalchemy

我希望函数接受一个继承了 SQLAlchemy 的 declarative_base 的类，它会根据其列的属性返回不同的结果。这是一些代码来说明我的概念。

```
def my_func(sql_class):
    result = 0

    for col in sql_class.__table__.colomns:
         if col.type == INTEGER:
             if col.type.unsigned:
                 result += 5
             else:
                 result += 10
         else:
             result += 1

   return result 
```

我遇到的问题是我不知道如何访问每列的属性。我知道有一个 '.type' 属性，但我不确定如何与它进行比较。即便如此，它也没有给我有符号或无符号之类的值。

我会很感激任何帮助，谢谢。

*   使用 MySQL（如果重要的话）
*   SQLAlchemy 版本 0.7.6
*   Python 版本 2.7.x

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T05:30:07.300

`col.type`是 SQLAlchemy 类型类的实例。有关SQLAlchemy 支持的类型列表，请参阅[http://docs.sqlalchemy.org/en/rel_0_7/core/types.html#generic-types 。](http://docs.sqlalchemy.org/en/rel_0_7/core/types.html#generic-types)

# java - 如何创建一副纸牌构造函数

> ID：10592817
> 
> 赞同：2
> 
> 时间：2012-05-15T00:42:20.720
> 
> 标签：java

到目前为止，这就是我所拥有的

```
import java.util.Random;
public class DeckOfCards
{
public static final int DECK_SIZE = 52;

//Instance Variables
private boolean[] deck; //An implicit set of 52 Playing-Cards
private int cardsInDeck;//Number of cards currently in the deck
private Random dealer;  //Used to rendomly select a card to be dealt

//Constructor
public DeckOfCards()
{
        deck = new boolean[52];
        for (int j = 0; j<deck.length ; j ++)
            deck [j] = false; 
```

我是否朝着正确的方向前进？...在​​此之后我该怎么办？我对布尔数组不是很熟悉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T00:43:14.503

我自己，我会为我的甲板变量使用一组 Card 对象，而不是一组布尔值。原始布尔变量只能处于两种状态之一，真或假，而卡片必须同时具有花色（4 种状态中的一种）和等级（13 种状态中的一种）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T00:56:34.770

考虑到分配，您应该存储`true`而不是`false`在`deck`数组中。此外，我会将其设为布尔值的二维数组 - 套件的维度和等级的维度。

```
private boolean deck[][] = new boolean[13][4];

public DeckOfCards() {
    for (int rank = 0 ; rank != 13 ; rank++)
        for (int suite = 0 ; suite != 4 ; suite++)
            deck[rank][suite] = true;
}

boolean containsCard(int rank, int suite) {
    return deck[rank][suite];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T01:00:36.843

根据您的评论，您必须使用一个布尔数组来`true`指示卡片在那里。

第一点：

所以当你建造甲板时，它是满的还是空的？

我会假设它会是满的，那么每个单元格的值应该是多少？

第二点：

在您使用的构造函数中：

```
deck = new boolean[52]; 
```

这是完全有效的，但你也有

```
public static final int DECK_SIZE = 52; 
```

声明所以我会假设你应该`DECK_SIZE`在适用的地方使用。

第三点：

您有两个字段：

```
private int cardsInDeck;//Number of cards currently in the deck
private Random dealer;  //Used to rendomly select a card to be dealt 
```

哪些没有在您的构造函数中初始化（至少在您发布的部分中没有）

最后一点：

除了设置本地字段之外，构造函数方法不应该做任何事情。因此，如果您修复`deck`初始化并初始化其他字段，那么您应该对构造函数有好处。在这种情况下，大部分工作将在抓牌函数中完成。

编辑：

要抽卡，您必须

1.  创建一个函数`drawACard()`来打印或返回抽出的卡片
2.  从牌组中随机选择一张牌（使用随机发生器`dealer`）（保存索引）
3.  检查卡片是否仍在牌组中（牌组中的`true`/`false`在这里应该有帮助）
4.  一旦你有一张仍在牌组中的卡片，你必须通过`deck`适当地设置位置来更新该卡片的位置
5.  您还必须适当地更新 cardInDeck 变量
6.  现在您有了卡片的索引，您可以从中生成卡片的索引。
7.  由于您现在可以确定牌组中卡片的顺序，因此您可以仅从索引中确定您抽出的卡片
8.  一旦你有了相应的字符串，`"Ace of Clubs"`你就可以用它做任何你需要的事情

因此，您实现的主要部分将是如何将您拥有的内容更改`index=5`为`String` `"Six of Clubs"`.

# php - 旧数组中的 PHP 新数组

> ID：10592819
> 
> 赞同：0
> 
> 时间：2012-05-15T00:42:24.527
> 
> 标签：php

这是有问题的代码：

```
$countries = array("New Zealand", "Australia", "United Kingdom", "New Zealand"); 
```

我正在寻找一些代码，这些代码可以让我从之前的数组中声明一个新数组，并指定数组中有多少项。

例如：

如果我做了这样的事情：

```
$newArray = $countries[1], $newArray will hold "New Zealand" and "Australia"
$newArray = $countries[2], $newArray will hold "New Zealand", "Australia" and "United Kingdom" 
```

目前我正在通过使用 for 循环来做到这一点。有没有更简单/更有效的方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T00:47:59.343

采用[`array_slice()`](http://us3.php.net/manual/en/function.array-slice.php)

```
$array1 = array_slice($input, 0, 2);
$array2 = array_slice($input, 0, 3); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T00:47:46.170

array_slice() 是你要找的：

```
$countries = array("New Zealand", "Australia", "United Kingdom", "New Zealand");
$length = 3;
$newArray = array_slice($countries, 0, $length);
// $newArray == array("New Zealand", "Australia", "United Kingdom") 
```

[http://php.net/array_slice](http://php.net/array_slice)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T00:48:37.643

你可以使用[array_slice](http://www.php.net/array_slice)来提取它

# java - 想要：带有“可折叠”部分的 rtf 编辑器；思考：在java的swing系统中使用StyledEditorKit

> ID：10592820
> 
> 赞同：0
> 
> 时间：2012-05-15T00:42:39.580
> 
> 标签：java

这是我想要的产品（供我自己使用）：
- RTF 编辑器，（很像 wordpad 或我使用的非常好的、免费的 RTF 编辑器，称为 PolyEdit Lite）
-但能够折叠文本部分 [和嵌套这些东西的能力]，就像在许多用于编程的文本编辑器中如何做到这一点一样。（即，许多此类 Java 或 C 编辑器将让您选择折叠或展开包含在 { 和 } 字符中的源代码的任何部分）

我在互联网上寻找这样的应用程序，但我找不到。
但我发现java的swing系统有一个内置的RTF编辑器。不过，浏览 Java 教程 (http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html) 表明这是一项非常大的工作！

在阅读这些教程时，我得到的最远的想法是使用 StyledEditorKit，它（据说）可以改变数据（“文档”）在屏幕上的显示方式（即“视图”）。但是如何实际控制该视图（即，如何制作我可以点击的小 + 或 - 符号等）是我不知道是否有可能做到的事情！

不过，对我来说学习会很酷。我有一些java经验，但对swing一无所知。

（如果我能学会做我想做的这个想法，那么我也会实施其他想法
。` [我想要这个“带有可折叠部分的 RTF 编辑器”应用程序的原因是帮助我进行创意头脑风暴和组织想法的过程。如果可以的话，我还想添加其他功能，这将有助于头脑风暴等，例如能够设置我可以输入的文档的额外矩形区域（很像 Microsoft OneNote 或 Microsoft Publisher），也许您可​​以如何在文档中放入矩形图片，除非在这种情况下您可以实际在此矩形区域中输入]。）

所以我的问题是：
1) 你认为甚至可以使用java 的swing 能力创建我想要的应用程序（即带有可折叠部分的RTF 编辑器）吗？
2）如果是这样，您对我可以在互联网上的哪个位置查看有任何指导，以便我可以学习我必须学习的内容吗？

感谢您的任何想法。我已经考虑这样做一年多了，但现在才问:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:33:08.197

Have a look at [jedit](http://www.jedit.org/). It is a general open source editor in java. They list folding and rtf as its features.

If you want to look at a simpler but still powerful editor in java see [RText](http://fifesoft.com/rtext/index.php). I don't know whether it can fold or handle RTF but it is an actively developed editor with emphasizes easy to read code.

To your questions:

1.  of course it is possible
2.  have a look a the source of one of these editors for ideas.

# css - 如何对 webkit matrix3d 变换进行逆向工程

> ID：10592823
> 
> 赞同：6
> 
> 时间：2012-05-15T00:42:57.200
> 
> 标签：css, matrix, webkit, css-transforms

我有一个立方体元素在 3d 空间中旋转和平移。

我想在给定时间找出*这个*变换的rotateY部分。这可能吗？

我有：

```
var cube = document.getElementById("cube");
var transform = getComputedStyle(cube).webkitTransform;

//the value of transform is:
// matrix3d(-1, 0, 0.00000000000000012246467991473532, 0, 
//           0, 1, 0, 0, 
//          -0.00000000000000012246467991473532, 0, -1, 0, 
//           0, 0, 0, 1) 
```

帮助？:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T15:07:29.160

如果您的对象仅围绕 Y 旋转，那么是的，旋转很容易计算 - 它是[矩阵元素 1,1](https://www.google.com/search?q=arccos%28-1%29&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a#hl=en&safe=active&client=firefox-a&hs=a9e&rls=org.mozilla:en-US%3Aofficial&sclient=psy-ab&q=arccos%28-1%29+in+degrees&oq=arccos%28-1%29+in+degrees&aq=f&aqi=&aql=1&gs_l=serp.3...5527.7297.0.7423.12.12.0.0.0.0.413.2485.0j7j3j1j1.12.0.eqn%2Crate_low%3D0-015%2Crate_high%3D0-015%2Cmin_length%3D2%2Ccconf%3D0-6.1.0.0.V15oX2ePmt8&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=61fe8c406b329c8c&biw=1680&bih=830)或 3,3 的 arccos 或 -(element 3,1) 的arsin 或元素 1 的 arcsin， 3\. 在您的具体示例中，大约是 180 度。如果旋转不仅仅是 y 轴，那么您必须开始跟踪以前的旋转，它会变得更加混乱。

您的翻译将只是输出矩阵的底行，在这种情况下为 0,0,0。

请参阅 [http://www.inversereality.org/tutorials/graphics%20programming/3dwmatrices.html上的示例](http://www.inversereality.org/tutorials/graphics%20programming/3dwmatrices.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T09:03:32.637

您可以使用“new WebKitCSSMatrix”功能检索转换信息。例如 ：

```
var matrix = new WebKitCSSMatrix($('#element').css('-webkit-transform'));
var translateZ = matrix.m43; 
```

矩阵的每个部分都在这里解释：http: [//9elements.com/html5demos/matrix3d/](http://9elements.com/html5demos/matrix3d/) 您可以检索更复杂的属性，如rotationX，用于带有数学混乱的3d矩阵：

```
var rotationX = Math.acos(matrix.a) * (180/Math.PI);
var rotationY = Math.asin(matrix.b) * (180/Math.PI); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-06T12:38:56.880

给定函数确定`rotation*`，`transform*`并且`scale`对于给定的 DOM 元素**跨浏览器**。

如果你想要更多的东西，或者发现数学中的错误，可以在[math.stackexchange.com上进行讨论](https://math.stackexchange.com/questions/489298/inverse-3d-transforms-from-matrix-given-end-formula-needed)

[在http://caniuse.com/transforms3d](http://caniuse.com/transforms3d)中列出的浏览器上测试：

```
var reverseEngineerTransform3d = function (domElement, parameterName) {

        parameterName = parameterName.toLowerCase();

        var computedStyle = window.getComputedStyle(domElement),
            matrixStyle = computedStyle.transform || computedStyle.WebkitTransform || computedStyle.MozTransform || computedStyle.msTransform || computedStyle.OTransform;

        if (matrixStyle) {
            matrixStyle = matrixStyle.trim();
        }

        if (matrixStyle === 'none') {
            if (parameterName.indexOf('rotate') === 0) {
                return '0deg';
            } else if (parameterName.indexOf('translate') === 0) {
                return '0px';
            } else if (parameterName === 'scale') {
                return 1;
            } else {
                throw "Unsupported 3D parameter " + parameterName;
            }
        }

        else if (!matrixStyle || matrixStyle.substr(0, 9) !== 'matrix3d(') {
            //return something or die ?????
            throw "Something is wrong with 3D transform style. Probably no style applied at all OR unknown CSS3 vendor OR unknown/unsupported 3D matrix representation string OR CSS3 3D transform is not fully supported in this browser";
        }

        var matrix = window.WebKitCSSMatrix && (new WebKitCSSMatrix(matrixStyle)) ||
                window.MozCSSMatrix && (new MozCSSMatrix(matrixStyle)) ||
                window.MsCSSMatrix && (new MsCSSMatrix(matrixStyle)) ||
                window.OCSSMatrix && (new OCSSMatrix(matrixStyle)) ||
                window.CSSMatrix && (new CSSMatrix(matrixStyle)); // sorry 4 copy-paste my friends

        if (!matrix || isNaN(matrix.a) || isNaN(matrix.b) || isNaN(matrix.c) || isNaN(matrix.m41) || isNaN(matrix.m42) || isNaN(matrix.m43) || isNaN(matrix.m11)) {
            throw "Could not catch CSSMatrix constructor for current browser, OR the constructor has returned a non-standard matrix object (need .a, .b, .c and mXX numerical properties to work)";
        }

        // todo: giving a parameters array (and returning an array) is a good idea, or we could return everything if no parameters given

        switch (parameterName) {

            case 'rotatey':  // in degrees
                return Math.acos(matrix.m11)*180/Math.PI * (matrix.m13 > 0 ? -1 : 1) + 'deg';

            case 'rotatex':  // in degrees
                return Math.asin(matrix.m22)*180/Math.PI + 'deg';

            case 'rotatez':  // in degrees
                throw "TODO: Sorry, math people. I really need help here! Please implement this case for me. This will help you: http://9elements.com/html5demos/matrix3d/";

            case 'translatex': // in pixels
                return matrix.m41 + 'px';

            case 'translatey': // in pixels
                return matrix.m42 + 'px';

            case 'translatez': // in pixels
                return matrix.m43 + 'px';

            case 'scale': // no units
                if (matrix.m11 === matrix.m22 && matrix.m22 === matrix.m33) {
                    return matrix.m11;
                } else {
                    throw "I'm not so smart to calculate scale from this matrix";
                }

           // todo: anything else? skew ????

            default:
                throw "This function accepts 3d-parameter name (case-insensitive string) as the second argument. Currently supported: 'rotate[xyz]', 'translate[xyz]', 'scale'. This parameter is unsupported: " + parameterName;
        }
    }; 
```

# java - Tomcat 上的 JSF - 为什么会这样？

> ID：10592825
> 
> 赞同：14
> 
> 时间：2012-05-15T00:43:51.790
> 
> 标签：java, jsf, jakarta-ee, tomcat, ejb

我有一个简单的问题（而且很愚蠢 - 让我感到羞耻:)

据我了解，Tomcat 是一个实现 Servlet/JSP 规范的 Web 容器。Tomcat 不是功能齐全的 Java EE 应用服务器 - 因此，我无法在 Tomcat 上部署和运行基于 EJB 的应用程序。

到目前为止，一切都很好。

但是...我能够在 Tomcat 上部署和运行 JSF 应用程序。JSF - 据我了解 - 它是 Java EE 的一部分，由 EJB“支持”（例如，您使用无状态/有状态 bean）。

底线：为什么我能够运行由 EJB 支持的 JSF 应用程序而不能部署“常规”EJB 应用程序（即非 JSF）。

提前感谢=）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T01:20:52.637

正如其他人所澄清的那样，EJB！= JSF。也就是说，您可以通过[Apache TomEE](http://tomee.apache.org)让 EJB 与 Tomcat 和 JSF 一起工作。您可以将其放入 Tomcat 7 安装中，或者仅使用已设置的二进制文件。TomEE 正是为了回答“我在 Tomcat 上使用谁”的问题而构建的。

这也是一个[入门视频](http://www.youtube.com/watch?v=Lr8pxEACVRI)，它显示了 EJB、在 Tomcat 上工作的 CDI 连接到 Eclipse。

# javascript - 谷歌闭包编译器和历史 API

> ID：10592826
> 
> 赞同：0
> 
> 时间：2012-05-15T00:44:05.103
> 
> 标签：javascript, google-closure-compiler, html5-history

我有这段代码，我在高级编译模式下通过 GCC：

```
window.addEventListener('popstate', function (event) { .... } 
```

我收到这条消息：

```
 JSC_WRONG_ARGUMENT_COUNT: Function Window.prototype.addEventListener: called 
 with 2 argument(s). Function requires at least 3 argument(s) and no more than
 3 argument(s). at line 3601 character 0
 window.addEventListener('popstate', function (event) { 
```

我需要在我的代码中进行哪些更改才能使其在没有警告的情况下通过？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T01:01:20.647

您必须设置 addEventListener 的 useCapture 变量。

这可能是你想要的：

```
window.addEventListener('popstate', function(event) {...}, false); 
```

# wpf - 将 Parallel.ForEach 与 WPF Dispatcher 一起使用...如何让这两者相互配合？

> ID：10592828
> 
> 赞同：1
> 
> 时间：2012-05-15T00:44:22.770
> 
> 标签：wpf, progress-bar, parallel-processing, dispatcher, ui-thread

我可以在 ViewModel 类中执行以下操作：

```
var inc = 100.0d / total;

Parallel.ForEach(enumeration, new ParallelOptions { MaxDegreeOfParallelism = 8 },
    item =>
    {
        //Do Parallel Tasks

        lock (ProgressLock)
        {
            WorkProgress += inc; //This raises a PropertyChanged event (binding).
        }
    }); 
```

我遇到的麻烦是让每个并行任务都响应 UI。任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T00:52:56.533

您不能`Parallel.ForEach`在调度程序线程上运行。它将阻塞线程，直到整个过程完成，此时，您的绑定将更新。

如果您需要在执行此操作时更新绑定，您可以将整个过程包装到后台任务中。只要`WorkProgress`是一个简单的数字，如果绑定是在后台线程中设置的，它就应该表现属性。

这可能很简单：

```
Task.Factory.StartNew( () =>
{
  Parallel.ForEach(enumeration, new ParallelOptions { MaxDegreeOfParallelism = 8 },
   item =>
   {
    //Do Parallel Tasks

    lock (ProgressLock)
    {
        WorkProgress += inc; //This raises a PropertyChanged event (binding).
    }
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T00:52:53.100

您不能使用多线程同时也停留在一个线程上。

相反，您可以使用 Dispatcher 在 UI 线程上调用属性设置器。

# ruby-on-rails-3 - Rails - 没有要加载的文件 - 浏览器 [gem]

> ID：10592837
> 
> 赞同：0
> 
> 时间：2012-05-15T00:45:58.387
> 
> 标签：ruby-on-rails-3

我正在运行 Rails 3.1.4 并包含了[浏览器 gem](https://github.com/fnando/browser/tree/318fbd808a5f909380606c166c711182bb1d33ee)，这样我就可以为 Internet Explorer 更改网站的外观。但是，当我输入：

```
require 'rubygems'
require 'browser' 
```

在我的控制器顶部，我收到了消息`no such file to load -- browser`。

当我运行“bundle show browser”时，它说它已安装。此外，当我使用 Windows 资源管理器查看本地目录时，我可以看到它已安装。

我不确定我做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T17:44:00.167

事实证明，我不必`require 'browser'`让它工作。

相反，在应用程序控制器中，我只需要这样做：

```
before_filter :current_browser

def current_browser
  @browser = Browser.new(:ua => request.user_agent)
end 
```

# jquery - 在选项卡之间切换时如何保留表单数据？

> ID：10592839
> 
> 赞同：2
> 
> 时间：2012-05-15T00:46:07.013
> 
> 标签：jquery, jquery-tabs

**设置：**

主页上有 2 个选项卡：

*   选项卡 1 有一个用户填写的表单。
*   然后他点击选项卡 2。
*   然后他回到 Tab 1。

**问题：**

当用户返回 Tab 1 时，他填写的所有数据都丢失了。

有没有办法保存表单数据？

附带说明一下，选项卡 1 有一个“提交”按钮。单击提交按钮后，它也会清除表单，但有一个选项 -`preventDefault()`通过它我们可以控制其默认行为并在单击后保留用户输入的数据。只是想知道标签是否有类似的东西？

**更新1：**

我可以通过简单地引用选项卡 1 上的字段名称来访问选项卡 2 上的用户输入数据。所以我猜数据不会丢失。

**更新 2：**

代码： http: [//www.jsfiddle.net/pnuJT](http://www.jsfiddle.net/pnuJT)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T03:42:46.277

您需要`cache`在设置选项卡时指定选项。

```
$( ".selector" ).tabs({ cache: true }); 
```

每次在它们之间切换时，它将阻止选项卡插件重新加载选项卡内容。

[jQuery UI 选项卡选项](http://docs.jquery.com/UI/Tabs#options)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T03:39:58.183

您提到您在评论中使用了 jQuery 选项卡，但 jsfiddle 没有包含该选项卡。你确定你正在使用这个：

[http://jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)

使用这样的插件可以很容易地解决您的问题。主要问题是您正在重新加载页面。

# hibernate - Grails 和 Hibernate - 大量具有大量属性的域对象

> ID：10592840
> 
> 赞同：0
> 
> 时间：2012-05-15T00:46:09.063
> 
> 标签：hibernate, grails, sts-springsourcetoolsuite

我有一个问题，我在另一个问题中解决了，但这是一个更大的问题：

使用 STS 的默认 Grails 项目具有 Spring/Hibernate。当 Grails 应用程序加载时，我的包含 100,000 多个域对象的数据库似乎已加载到内存中。这是否在 Hiberate/ORM 层，我不知道。

```
Pre DB domain object load (400 MB start up)
Post DB domain object load (900 MB start up) 
```

这没有任何引导数据。没有开箱即用的应用程序性能。只是一个干净的启动和我的域对象。

我可以使用显示器，但我得到相同的答案。这似乎是配置。如何在 Grails 中设置 Hibernate 以不将这些对象加载到内存中？

这是 datasource.groovy 文件：

```
dataSource {
pooled = true
driverClassName = "com.mysql.jdbc.Driver"
username = "xxx"
password = "xxx"
}
hibernate {
cache.use_second_level_cache = false
cache.use_query_cache = true
cache.region.factory_class = 'net.sf.ehcache.hibernate.EhCacheRegionFactory'
}
// environment specific settings
environments {
development {
    dataSource {
        dbCreate = "update"
        url = "jdbc:mysql://localhost/mydb"
    }
}
test {
    dataSource {
        dbCreate = "update"
        url = "jdbc:mysql://localhost/mydb"
    }
}
production {
    dataSource {
        dbCreate = "update"
        url = "jdbc:mysql://localhost/mydb"
    }
}
} 
```

这让我很生气，因为我尝试了所有类型的调整来启动文件（引导、数据源/休眠、配置等——我什至不记得我尝试过的每一种不同的东西）。

*** 编辑 *** 我没有对我的对象使用渴望获取。只是默认懒惰。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T04:32:57.403

你是如何得到你的前/后记忆数字的？除非你的 BootStrap.groovy 文件中有一个非常奇怪的插件或额外的东西，否则我觉得你的整个域对象集都不会被加载到内存中。

可能查看这是否真的发生的最简单方法是只为休眠打开跟踪级别日志记录：

```
trace 'org.hibernate.SQL' 
```

如果它真的是从数据库中将所有内容加载到内存中，那么当应用程序启动时，您会看到大量的 SQL 查询正在进行。

为了进行更多调查，我可能会查看打开[hibernate 的 JMX Monitoring](http://grails.org/MBean+export+the+Groovy+way)，然后连接`jconsole`到您正在运行的 grails 实例以深入了解已加载和未加载的详细信息。

# c++ - 使用模板制作类型安全的 C++“组件管理器”

> ID：10592849
> 
> 赞同：0
> 
> 时间：2012-05-15T00:47:52.257
> 
> 标签：c++, templates, generics

我正在尝试在 C++ 中创建一个类似于 Unity3d 中的“组件管理器”类。我想要的是一个容器类，它可以保存某个类的派生类型，比如 BaseComponent。在统一中，可以通过以下方式以类型安全的方式请求使用泛型的组件

manager.GetComponent() 返回类型为 DerivedComponentType&

我想要 C++ 中的相同接口。这样，只要通过 AddComponent 函数添加组件，就可以保证整个过程从使用角度来看是类型安全的。

我在这里试图避免使用字符串识别之类的事情。我意识到我也可以通过给每个派生类型一个同名的静态成员函数并使用它的地址作为类实例的映射索引来做到这一点。我宁愿不这样做，以便组件管理器的用户在他们选择派生自己的组件时不必确保此功能存在。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T02:42:35.730

一种方法是使用 dynamic_cast。

```
template <typename Derived>
Derived* GetComponent (void)
{
  // componentlist is a std::vector<BaseClass*>
  for (unsigned i = 0; i < componentlist.size(); ++i)
  {
    Derived* val = dynamic_cast<Derived*>(componentlist[i]);
    if (val != 0)
      return val;
  }
  return 0;
} 
```

如果类型与模板给出的不匹配，dynamic_cast 将给出一个空指针。当然，这是必须在运行时完成的事情。在现代机器上，这不会是一个巨大的打击，除非你经常这样做。还有一些其他方法可以做到这一点，这将涉及更多。

您还可以考虑编写一个反射系统，它可以更快地查找类型信息，这样您就有了这样的东西：

```
Derived* GetComponent (MetaData *TypeIWant)
{
  if (componentlist[i]->Type() == TypeIWant)
  //...
} 
```

从长远来看，这将是更多的工作，并且需要您进行一些研究，但这可能是我所知道的唯一一个不需要使用字符串查找和“可怕的”dynamic_cast 的 c++ 选项这么多人们往往讨厌。

# xml - Coldfusion/xml - 通过 xmlName 获取值，而不是通过 xmlchildren 数组位置

> ID：10592854
> 
> 赞同：0
> 
> 时间：2012-05-15T00:49:10.137
> 
> 标签：xml, coldfusion

给定以下 XML“thisXML”：

![在此处输入图像描述](../Images/4afe91eb37e077742a2938be7545bad6.png)

我可以通过以下方式获取产品名称

```
<cfset vProduct = thisXML.xmlchildren[1].xmltext> 
```

但是，如何通过 xmlName 获取值，而不是通过 xmlChildren 数组位置，即在伪代码中：

```
<cfset vProduct = thisXML.xmlchildren[xmlName='product'].xmltext> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T01:17:12.227

你应该能够得到它`thisXML.Product`- 它对我有用。

--xmltest.xml

```
<table1>
    <product>KiaOra</product>
    <SubscriberCode>2232481600</SubscriberCode>
</table1> 
```

--xmltest.cfm

```
<cfscript>
    // this is setup stuff
    f = FileRead(expandPath("xmltest.xml"));
    x = XmlParse(f);
    xDetail = XmlSearch(x,"/table1")[1]; // this gets the exact result your cfdump image has

    // here is the important part
    writeOutput(xDetail.product.xmlText);
</cfscript> 
```

- 输出

```
KiaOra 
```

您只需要意识到，即使您的 XML 在详细视图中打印出来，它仍然像标准 cfdump 视图中的 XML 一样工作。

# java - 如何在不下载的情况下在 Java 中获取网站图像的尺寸？

> ID：10592859
> 
> 赞同：3
> 
> 时间：2012-05-15T00:50:31.213
> 
> 标签：java, image, height, width, dimension

我正在寻找一些代码来获取Java网站上图像的尺寸，而无需先下载它。这个想法是，如果图像太大，我不会下载文件并返回错误消息，因此用户不会输入导致文件太大的 URL。它会占用图像的高度和宽度。

我知道这个代码，来自 StackOverflow 上的另一个用户，当你在系统上有一个文件时会这样做：

```
private Dimension getImageDim(final String path) {
Dimension result = null;
String suffix = this.getFileSuffix(path);
Iterator<ImageReader> iter = ImageIO.getImageReadersBySuffix(suffix);
if (iter.hasNext()) {
    ImageReader reader = iter.next();
    try {
        ImageInputStream stream = new FileImageInputStream(new File(path));
        reader.setInput(stream);
        int width = reader.getWidth(reader.getMinIndex());
        int height = reader.getHeight(reader.getMinIndex());
        result = new Dimension(width, height);
    } catch (IOException e) {
        log(e.getMessage());
    } finally {
        reader.dispose();
    }
} else {
    log("No reader found for given format: " + suffix));
}
return result; } 
```

但是，我不知道如何将其转换为可用于 URL 对象的内容。

编辑：我对像素宽度和像素高度感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T01:08:27.540

抱歉，我没有可向您展示的代码，但我可以提供一般性建议。您是否对图像的大小（宽度 * 高度像素）或文件的大小（您需要下载的字节数）感兴趣？

要获取文件大小，您可以尝试向远程服务器发出 HTTP HEAD 请求。这将在不下载文件的情况下返回标头 - ContentLength 标头*可能*包含文件的大小。或者它可能不是，它是可选的。

获取像素的宽度和高度需要下载文件的至少一部分。这些值以 JPEG 文件格式存储在 SOI（图像开始）记录中，该记录应位于文件开头附近。您可以下载图像的第一部分并解析返回的字节以查找 SOI 标记 (0xFFD8)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T00:58:13.783

您需要的信息在您需要下载的文件中。

如果没有服务器端的东西告诉你图像的尺寸，我认为你不能这样做。这让我觉得服务器相当昂贵。可能比仅发送图像文件更昂贵......除非您可以找到某种方法来提取图像的大小元数据，而无需将其完全读入服务器端的内存中。

# bash - 如何将符合某些条件的行排序到单独的文件中？

> ID：10592864
> 
> 赞同：1
> 
> 时间：2012-05-15T00:51:35.487
> 
> 标签：bash, sorting, grep

我有一个 CSV 文件，`file1.csv`它具有自定义格式，包含三列，如下所示：

```
This is some data. [text] This is some more data. 
```

*   第一个之前的所有内容都`[`在第一列中。
*   第一组方括号之间的所有内容都在第二列中。
*   第一个之后的所有内容都`]`在第三列中，无论后面是什么内容。

例如：

```
First. [second] Third.
      ^        ^ 
```

我想将文件的行排序为两个文件，`withnumbers.csv`并且`withoutnumbers.csv`本质上是由第三列中包含数字的行和第三列中不包含数字的行排序。

后面的方括号可能会出现，但它们不被视为新列，它们仍然是第三列数据的一部分，例如：

```
First. [second] Third. [some more text] This is still in the third column.
      ^        ^ 
```

包含数字的行可以匹配它们，如`*0*`, `*1*`,`*2*`等。这些都包含数字：

```
Water is H20.
The bear ate 2,120 fish.
The Wright Flyer flew in 1903. 
```

在第三列的一对方括号中的任何位置找到的数字都不算作匹配，例如，这些行将被发送到`withoutnumbers.csv`：

```
First. [second] Some text. [This has the number 1.]
First. [second] Some more text. [The Wright Flyer flew in 1903.] 
```

这些将被发送到`withnumbers.csv`，因为它们在方括号之外仍然有一个数字，但在第三列内：

```
First. [second] Some text with 1\. [This has the number 1.]
First. [second] Some more text with the number 3\. [The Wright Flyer flew in 1903.] 
```

如何将文件的行排序为第三列中包含数字的行，而不考虑方括号中的那些数字，以及那些不包含数字的行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T01:34:39.607

好吧，我不会撒谎，我不喜欢我想出的解决方案。然而，你的问题是相当特殊的，绝望的时候需要绝望的措施。所以，试试这个：

```
awk -F'\[[^\]]*\]' '{
  printed = 0
  for (i = 2; i <= NF; i++) {
    if ($i ~ /[0-9]+/) {
      print $0 >> "withNumbers"
      printed = 1
      break
    }
  }

  if (! printed) {
    print $0 >> "withoutNumbers"
  }
}' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T02:10:07.130

这是一个去

```
shopt -s extglob
rm withnumbers.csv withoutnumbers.csv
touch withnumbers.csv withoutnumbers.csv

while IFS= read -r line; do
  col3=${line#*\]}            # remove everything before and including the first ]
  col3=${col3//\[*([^]])\]/}  # remove all bracketed items
  if [[ $col3 == *[[:digit:]]* ]]; then
    printf "%s\n" "$line" >> withnumbers.csv
  else
    printf "%s\n" "$line" >> withoutnumbers.csv
   fi
done < file1.csv 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T05:58:14.467

这将在第一个右方括号上拆分，并检查第一个右方括号之后的行部分中方括号内的数字，或者该部分是否仅由非数字组成。它将这些行写入 withoutnumbers.csv。否则，它将该行写入 withnumbers.csv。

```
perl -lne 'BEGIN {open ND, ">", withoutnumbers.csv; open D, ">", withnumbers.csv} @fields = split(/]/,$_,2); $fields[1] =~ /\[.*?\d.*?\]|^\D+$/ ? print ND $_ : print D $_' file1.csv 
```

# android - android opengl es 2.0 纹理切换

> ID：10592867
> 
> 赞同：1
> 
> 时间：2012-05-15T00:51:50.307
> 
> 标签：android, opengl-es-2.0, textures

我有以下代码可以加载和绑定 3 个纹理：

```
 // Load the texture
 mTextureDataHandle[0] = TextureHelper.loadTexture(mActivityContext, R.drawable.bricks);

 mTextureDataHandle[1] = TextureHelper.loadTexture(mActivityContext, R.drawable.grass);

 mTextureDataHandle[2] = TextureHelper.loadTexture(mActivityContext, R.drawable.steel);

 // Set the active texture unit to texture unit 0 and bind to the texture data.
 GLES20.glActiveTexture(GLES20.GL_TEXTURE1);
 GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, mTextureDataHandle[0]);

 GLES20.glActiveTexture(GLES20.GL_TEXTURE2);
 GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, mTextureDataHandle[1]);

 GLES20.glActiveTexture(GLES20.GL_TEXTURE3);
 GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, mTextureDataHandle[2]); 
```

然后我想独立使用每个纹理：

```
GLES20.glUseProgram(mPerVertexTexturedProgramHandle);

GLES20.glUniform1f(mTextureUniformHandle, 2);
drawStuff();

GLES20.glUseProgram(mPerVertexProgramHandle);

//Draw some smooth shapes

GLES20.glUseProgram(mPerVertexTexturedProgramHandle);

GLES20.glUniform1f(mTextureUniformHandle, 3);

drawOtherStuff();

GLES20.glUseProgram(mPerVertexProgramHandle); 
```

我原以为 Stuff 会用草绘制，OtherStuff 会用钢绘制，但我发现这两种形状都是用钢绘制的。如果我在绑定时更改纹理的索引（glActiveTexture 使用 TEXTURE0、TEXTURE1、TEXTURE2 而不是 1、2、3），则两个形状都以砖块绘制。将什么值传递给 glUniform1f 似乎并不重要。

我在这里不知所措，我正在遵循[Android OpenGL ES2.0 Texture Swapping](https://stackoverflow.com/questions/9363936/android-opengl-es2-0-texture-swapping)的方法，但除了不使用他正在使用的统一普通句柄（据我所知它们不是必需的？），我'我不确定为什么它不起作用。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T01:09:09.947

我看到您正在调用`glUniform1f`您的采样器而不是`glUniform1i`. 我不知道这是否一定会导致错误，但这似乎有点奇怪，我不确定如果你尝试设置一个带有浮点数的采样器会发生什么。

你在任何地方都有 glGetError 吗？

# c++ - 用于发送多个字符串的消息协议？

> ID：10592873
> 
> 赞同：0
> 
> 时间：2012-05-15T00:53:02.397
> 
> 标签：c++, networking, protocols

我正在制作一个简单的客户端服务器聊天应用程序。我希望能够发送此人的用户名，然后发送他们的消息。

有没有一些我不知道的标准化方式比类似的方式更好：

```
2:9:11:John Korn:Hello World 
```

我正在发送 UTF-8 字符串。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T01:01:35.227

您可能希望读取[协议缓冲区。](http://code.google.com/p/protobuf/ "协议缓冲区")协议缓冲区字符串默认为[UTF-8 编码](https://developers.google.com/protocol-buffers/docs/proto#scalar)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T01:05:01.970

考虑节俭

[http://thrift.apache.org/](http://thrift.apache.org/)

看这篇文章：

[http://stuartsierra.com/2008/07/10/thrift-vs-protocol-buffers](http://stuartsierra.com/2008/07/10/thrift-vs-protocol-buffers)

# delphi - Firemonkey (FMX) 位图和颜色

> ID：10592874
> 
> 赞同：35
> 
> 时间：2012-05-15T00:53:12.913
> 
> 标签：delphi, delphi-xe2, firemonkey

假设我在 Firemonkey 中有一个小位图（比如 32x24 像素）。所以我把一个 TImage 放到一个表单上，在构造函数中有这个代码：

```
 Image1.Bitmap.Create(32, 24);
  if Image1.Bitmap.Canvas.BeginScene then
  try
    Image1.Bitmap.Canvas.Fill.Color := claBlack;
    Image1.Bitmap.Canvas.Stroke.Color := claYellow;
    Image1.Bitmap.Canvas.FillRect(RectF(0,0,32,24), 0, 0, AllCorners, $FF);
    Image1.Bitmap.Canvas.DrawLine(PointF(1,1), PointF(10,10), $FF);
  finally
    Image1.Bitmap.Canvas.EndScene;
    Image1.Bitmap.BitmapChanged;
  end; 
```

这在黑地上画了一条漂亮的对角线。

我现在要做的是解析位图以确定受线条绘制影响的像素。如果我使用以下方法进行基本逐像素检查：

```
 for y := 0 to 23 do
    for x := 0 to 31 do
      if Image1.Bitmap.Pixels[x,y] <> claBlack then
        memo1.Lines.Add(Format('x=%d. y=%d. c=%x', [x,y,Image1.Bitmap.Pixels[x,y]])); 
```

我的备忘录的输出是：

```
x=0\. y=0\. c=FF3C3C00
x=1\. y=0\. c=FF3C3C00
x=0\. y=1\. c=FF3C3C00
x=1\. y=1\. c=FFE7E700
x=2\. y=1\. c=FF3C3C00
x=1\. y=2\. c=FF3C3C00
x=2\. y=2\. c=FFE7E700
x=3\. y=2\. c=FF3C3C00
x=2\. y=3\. c=FF3C3C00
x=3\. y=3\. c=FFE7E700
x=4\. y=3\. c=FF3C3C00
x=3\. y=4\. c=FF3C3C00
x=4\. y=4\. c=FFE7E700
x=5\. y=4\. c=FF3C3C00
x=4\. y=5\. c=FF3C3C00
x=5\. y=5\. c=FFE7E700
x=6\. y=5\. c=FF3C3C00
x=5\. y=6\. c=FF3C3C00
x=6\. y=6\. c=FFE7E700
x=7\. y=6\. c=FF3C3C00
x=6\. y=7\. c=FF3C3C00
x=7\. y=7\. c=FFE7E700
x=8\. y=7\. c=FF3C3C00
x=7\. y=8\. c=FF3C3C00
x=8\. y=8\. c=FFE7E700
x=9\. y=8\. c=FF3C3C00
x=8\. y=9\. c=FF3C3C00
x=9\. y=9\. c=FFE7E700
x=10\. y=9\. c=FF3C3C00
x=9\. y=10\. c=FF3C3C00
x=10\. y=10\. c=FF3C3C00 
```

所以它在解释和“模糊”？我的线作为颜色（由上面的 c 表示）不等于 claYellow ($FFFF00)。如果我画一条水平线或垂直线，效果是一样的。如果我将笔画粗细更改为 2 并绘制一条非对角线，它会在 claYellow 中绘制，但它覆盖 2 个像素。

那么如何确定我绘制的“真实”像素。在上面的示例中，我将（可以）查找 $FFE7E700 但我怎么知道要查找该值（假设我以不同的颜色绘制线，该值会有所不同）。我试图查看我绘制的颜色与渲染的实际颜色之间是否存在一致的“差异”，但找不到。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-16T13:07:28.870

FMX 使用抗锯齿进行绘图。如果您想绘制没有模糊效果的线条，您应该使用特殊功能进行像素对齐：

*   **TCanvas.AlignToPixel**
*   **TCanvas.AlignToPixelVertically**
*   **TCanvas.AlignToPixelHorizo​​ntally**

此功能会自动计算像素位置以进行无模糊绘制。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T18:16:42.587

示例中的颜色是抗锯齿的，这意味着它们是您设置的颜色的一部分，也是背景颜色的一部分。精确的比率基于幕后所做的许多考虑。

不熟悉 FireMonkey（或 delphi），所以我不能告诉你是否有办法解决它，但如果你想知道某种颜色的位置，你可以做的是测试 RGB 值之间的比率，假设你画黑色背景上只有一条线（否则，比率必须是一个范围才能捕获具有大量噪声的像素）

示例：黄色（#ffff00）

> 红/绿=1
> 
> 红/蓝=绿/蓝=#inf（或者如果你愿意，255/1=255）

采样像素可以是#fcfc00 保持比率

带有噪声的采样像素可能是#fcff09

> 红/绿=0.988
> 
> 红/蓝=28
> 
> 绿色/蓝色=28.33

红色和绿色仍然非常接近，并且都比蓝色高得多。

# php - 登录后在页面上显示全名

> ID：10592882
> 
> 赞同：0
> 
> 时间：2012-05-15T00:55:51.153
> 
> 标签：php, javascript

用户登录后，我需要在网页的某处显示用户的全名（最好在同一个侧边栏中）。到处都看过，并且对从 javascript 和 html 开始的地方感到困惑。这是我到目前为止的登录表单的代码。

```
<div id="sidebar-wrapper">
     <div id="sidebar">
     <h3>Login</h3>
     <form name="form1" action="#">
     <ul id="sidenotes">
     <form name="form1" action="tryjsref_form_onsubmit.htm" onsubmit="return allnumeric(uage);greeting()" method="post">

First Name: <input type="text" name="fname" size="25"/><br/>
Last Name: <input type="text" name="lname" size="25" value= ""/><br/>
Age: <input type="text" name="text1" size="25" value=""/><br/>
     <p><input type="submit"name="submit"value="Submit"onclick="allnumeric(document.form1.text1); greeting()"/> 
 </p>
</form>
       </ul>
      </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T01:05:48.580

我不知道如何使用 Java 作为预处理器，但基本的想法是这样的：

1.  使用 Java 从 POST 中获取信息
2.  将它持久存储在某个地方（在 PHP 中我会使用会话信息，Java 可能会有类似的东西）
3.  每次用户访问另一个页面时，从持久存储中提取他们的名字并将其插入到侧边栏中。

如果您的意思是 Javascript 而不是 Java，那么情况会有所不同（我不确定Javascript 中*是否*存在持久存储），但我希望这会有所帮助。如果你是用 PHP 做的，我可以写一个快速的脚本来演示。如果你愿意，我仍然可以，它可能会有一些用处。

**编辑：**

我会把这个添加到评论中，但我没有空间。无论如何，我编写了 PHP 脚本（花了很多时间想知道为什么我得到一个 500 错误，结果我忘记了一个右括号）。这不是 javascript，但它有望帮助您编写代码，因为它是相同的基本思想。[您可以在此处](http://vps.demize95.com/test.php)找到生产中的脚本。来源：

```
<?php
session_start(); // Start the session so we can use session variables

if(isset($_POST['first_name'])) // Assume that if the user filled out their first name they filled out everything
{
    // Assign values based off the POST values
    $_SESSION['first_name'] = $_POST['first_name'];
    $_SESSION['last_name'] = $_POST['last_name'];
    $_SESSION['age'] = $_POST['age'];
    $_SESSION['loggedin'] = true; // Used to tell if the user's logged in or not
}

$first_name = $_SESSION['first_name']; // Read the first name from session data
$last_name = $_SESSION['last_name']; // Read the last name from session data
$age = $_SESSION['age']; // Read the age from session data
$loggedin = $_SESSION['loggedin'];

if(!$loggedin) // If the user isn't logged in, display the login form
{
?>
<html>
<head>
<title>Test script</title>
</head>
<body>
<form action="test.php" method="post">
First Name: <input type="text" name="first_name" />
Last Name: <input type="text" name="last_name" />
Age: <input type="text" name="age" />
<input type="submit" />
</form>
<?php
}
else // Otherwise, say hello!
{
    echo "Hello, " . $first_name . " " . $last_name . "! You are " . $age . " years old!";
}
?>
</body>
</html> 
```

它的作用是在 PHP 中启动一个会话并将值存储在那里。您似乎很熟悉 POST 是什么，所以我只说 $_POST 存储通过 POST 发送的值。$_SESSION 是会话数据的数组。这两个都是关联数组，所以它们存储基于键而不是位置（即$a['hello'] vs $a[2]）。启动会话后，它会从 POST 读取值到会话数据，然后从会话数据读取到局部变量（这不是做事的最佳方式，但它适用于演示）。然后它会根据用户是否登录显示问候语或登录表单。

同样的想法也可以应用于带有 cookie 的 Javascript。我真的不熟悉 Javascript，所以我不知道代码会有多大帮助，所以我会将您链接到有关 cookie的[本教程。](http://www.w3schools.com/js/js_cookies.asp)这个想法是在页面加载时检查cookie，如果未设置则设置它，如果设置则从其中加载数据。做起来应该不会太难，特别是如果你可以使用我的代码来帮助你。

# c# - 模型对象也作为 DataContract 对象？

> ID：10592883
> 
> 赞同：1
> 
> 时间：2012-05-15T00:55:59.817
> 
> 标签：c#, wcf, entity-framework

我有一个商业类型的模型 obj，它有几个道具，这个 obj 主要用于我的数据访问，使用 EF 以及用于我的验证和东西的所有注释。

现在我的问题是，是否有关于如何正确使用相同模型对象作为我的 wcf 相关操作的数据合同对象的指南。即，如果我使用相同的模型对象，它将看起来像这样。

```
[DataContract]
public class Business
{
    public int Id { get; set; }
    [Required]
    [DataMember]
    public string Name { get; set; }
} 
```

有人对此有任何想法，最好的方法是什么，甚至不这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T01:23:47.527

我会说这不是最好的主意。

WCF DataContracts 不允许使用部分类，因此如果每次刷新架构时都添加 DataContract 所需的注释，注释将会消失。

Web 服务的最佳实践是使 DataContract 尽可能的精简。最好只发送绝对必要的数据。我建议制作新对象并将 EF 对象映射到新创建的苗条对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T04:21:42.480

如果您使用 Entity Framework 4.1 Code First 或[POCO](http://blogs.msdn.com/b/adonet/archive/2009/05/21/poco-in-the-entity-framework-part-1-the-experience.aspx) ，则可以这样做。在这种情况下，实体不会自动生成，您将不会面临刷新实体的问题。

# rhino - 为什么要向所有 Sagas 发送消息？

> ID：10592885
> 
> 赞同：0
> 
> 时间：2012-05-15T00:56:12.413
> 
> 标签：rhino, rhino-servicebus, rhino-esb

我正在使用 Rhino 服务总线，我有两个 saga，SaveCustomerSaga 和 ProcessReceiptSaga，这两个操作都将 UpdateInvoicesCommand 发送到标准消息使用者。在更新发票之前，两个传奇都没有完成。两个 sagas 都实现了 Orchestrates<'InvoicesUpdated> 来完成。相同的 CorrelationId 用于所有消息。

然而，当 UpdateInvoicesCommand 的消费者回复消息 InvoicesUpdated 时，它被分派给两个 Sagas！事件虽然其中一个尚未启动并且 CorrelationId 属于另一个已经启动的 Saga。

它不应该只将它发送到具有匹配 CorrelationId 的适当 Saga 吗？是否有解决方法或拦截我可以执行此行为？

（使用 v2.3.0，但是快速查看提交历史似乎不是与此相关的新更改。）

# slideshow - 将 SlideshowPro Director 类与 CDN 集成

> ID：10592886
> 
> 赞同：1
> 
> 时间：2012-05-15T00:56:22.937
> 
> 标签：slideshow, cdn

我目前正在开发一个[网站](http://anuragdesign.com/test/mbv/events/wedding_gallery)，它使用[SlideShowPro Director 类](http://wiki.slideshowpro.net/SSPdir/API-DirPHP-Getting-Started)从 SlideShowPro Director 安装中提取图像并将它们提供给各种 jQuery 幻灯片。

实际图像最初存储在我的网络服务器上，SlideShowPro Director 用于管理和发布它们。

现在，我想知道是否可以将该设置与 CDN 集成。Director 类提供的图像 URL 如下所示：

```
http://mydomain/directorinstallation/p.php?a=WXNnc3ZkJkwpSWNwencsOzEkfHduJzswPiowMTI+MiEiPjE/OzsjKDsnNyMoNDsuOjo3JT4mNzc=&amp;m=1335621206 
```

提供的字符串似乎是一个随机字符串，最后一个数字也是如此。有没有办法将该设置与 CDN 集成？我该怎么办？

# php - 关于静态成员、方法、上下文和关键字以及范围解析的好教程

> ID：10592887
> 
> 赞同：1
> 
> 时间：2012-05-15T00:56:28.090
> 
> 标签：php, static

我很难理解“静态”的东西在 PHP 中是如何工作的。有人可以指点我一个很好的教程吗？一个全面涵盖该主题的？

我了解在函数中使用静态变量以及在类中使用静态成员。然而，除此之外，它变得有点朦胧。

例如：我看到可以在不实例化类的情况下调用静态方法。不知道为什么这很重要，因为您可以以完全相同的方式调用非静态方法，只要它不引用 $this

后期静态绑定是另一个令人困惑的领域，以及何时何地可以使用范围解析运算符。（看来我可以用它来调用父方法，而不管它们是否是静态的......）

我是唯一一个为此苦苦挣扎的人吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T01:00:20.007

虽然您可以在没有实例的情况下调用非静态方法，但这会触发`E_STRICT`警告。静态方法的全部意义在于访问类上的静态变量，但许多人将其用作对实用函数进行逻辑分组的一种方式，而不是定义一堆全局函数。

当您使用类的名称调用静态方法时，例如`Class::foo()`，没有实例，因此没有多态性。直接调用`foo`定义的 by 。`Class`如果它没有定义这样的方法，则搜索它的超类，直到找到一个。

```
class Parent {
    static function foo() {
        echo "Parent::foo";
    }
    static function bar() {
        echo "Parent::bar";
    }
}

class Child extends Parent {
    static function foo() {
        echo "Child::foo";
    }
}

Parent::foo();   // Parent::foo
Parent::bar();   // Parent::bar

Child::foo();    // Child::foo
Child::bar();    // Parent::bar 
```

`self`当您使用类方法中的关键字调用静态方法时，例如`self::foo()`，它的工作方式就像您要替换`self`为包含调用代码的类的名称一样。

```
class Parent {
    static function foo() {
        echo "Parent::foo";
    }
    static function callFoo() {
        self::foo();    // equivalent to Parent::foo()
    }
}

class Child extends Parent {
    static function foo() {
        echo "Child::foo";
    }
}

Parent::callFoo();   // Parent::foo
Child::callFoo();    // Parent::foo 
```

当您使用`static`类方法中的关键字调用静态方法时，例如`static::foo()`，您正在调用[后期静态绑定](http://php.net/manual/en/language.oop5.late-static-bindings.php)。它不是在当前类中开始搜索`foo`，而是从当前类上下文开始，即最初静态引用的类。

```
class Parent {
    static function foo() {
        echo "Parent::foo";
    }
    static function callFoo() {
        static::foo();         // late static binding
    }
}

class Child extends Parent {
    static function foo() {
        echo "Child::foo";
    }
    static function callParentCallFoo() {
        Parent::callFoo();    // resets static context to Parent
    }
}

Parent::callFoo();             // Parent::foo
Child::callFoo();              // Child::foo
Child::callParentCallFoo();    // Parent::foo 
```

后期静态绑定与静态类属性类似，但该属性必须在子类本身中定义。将新属性分配给类（例如`Child::$foo = 'foo'`）不会使其可用于父级的 LSB。

# c# - .NET 访问 802.15.4 无线收发器

> ID：10592891
> 
> 赞同：8
> 
> 时间：2012-05-15T00:56:58.950
> 
> 标签：c#, c++, python

亲爱的 Stack Overflow 社区，

我写信是希望您能帮助我使用 C# 或 C++ 连接到 802.15.4 无线收发器。让我解释一下我的项目。这个学期，我花了一些时间开发一个无线传感器板，它可以每 8 秒将光、温度、湿度和运动检测水平传输到 USB 无线收发器。现在，我没有开发 USB 收发器。该课程的一位助教做到了，他在整个传感器板的开发过程中帮助了我（这是我的第一个真正的 PCB）。

现在，我已经对传感器板进行了编程，我知道它正在将数据发送到收发器。我知道这是因为这个 TA 编写了一个简单的 python 模块，它会从收发器中提取最新的信息包（无论何时收到），解包十六进制消息，并将一些传感器数据转换为工作单位（如度摄氏度、相对湿度百分比等）

问题是python模块在他的电脑（Mac）上工作，但在我的电脑（Windows 7）上不工作。基本上，他使用名为 zigboard 的库来解压传感器消息，以及草图中的 pyusb 和 pyserial 库。802.15.4 无线收发器在 Mac 上自动枚举自身，但在 PC 上运行时会遇到更大的问题。基本上，我认为问题在于缺乏签名的驱动程序。我正在使用 libusb 为这个特定设备生成 .inf 文件......我知道它在我的机器上工作，因为我的传感器板上和收发器上有一个 LED，当发送/接收消息时它会闪烁。但是，当我运行这个 TA 在他的机器上运行的相同 python 模块时，我收到一条关于缺少一些 Windows 后端二进制文件的错误消息，因此，

但是，更大的问题不在于这个 python 模块。更大的问题是我不想使用 Python。这个传感器板将成为一个更大的项目的一部分，在这个项目中，我将用 C# 或 C++ 设计一个软件接口来做许多不同的事情（其中一些是处理这个传感器数据）。所以，最终我希望能够在 .NET 中工作，以便从这个收发器访问数据。然而，我所要做的就是这个 python 草图（它甚至不会在我的机器上运行）。我知道最容易做的事情是问这个 TA 更多关于如何让它在我的机器上工作的问题......但是我已经在这个学期垄断了他大量的时间来处理这个项目，而且他目前不在镇。此外，他的偏好是蟒蛇，而我 我最擅长 C# 或 C++，并希望在该项目中使用该环境。现在，我想说我能胜任电子和编程（但肯定不是专家……我的背景实际上是建筑学）。但是，如果有人可以帮助我开发一些代码，以便我可以解开从板上发送的传感器消息，我们将不胜感激。我附上了下面的 Python 草图，这是 TA 用来在他的机器上解压他的传感器消息的工具（但就像我说的......我的 Windows 机器上有问题）。有没有人有什么建议？如果有人可以帮助我开发一些代码，以便我可以解开从船上发送的传感器消息，我们将不胜感激。我附上了下面的 Python 草图，这是 TA 用来在他的机器上解压他的传感器消息的工具（但就像我说的......我的 Windows 机器上有问题）。有没有人有什么建议？如果有人可以帮助我开发一些代码，以便我可以解开从船上发送的传感器消息，我们将不胜感激。我附上了下面的 Python 草图，这是 TA 用来在他的机器上解压他的传感器消息的工具（但就像我说的......我的 Windows 机器上有问题）。有没有人有什么建议？

再次感谢。

```
from zigboard import ZigBoard
from struct import unpack
from time import sleep, time

zb = ZigBoard()
lasttime = time()

while True:
    pkt = zb.receive()
    if pkt is None:
        sleep(0.01)
        continue
    if len(pkt.data) < 10:
        print "short packet"
        sleep(0.01)
        continue

    data = pkt.data[:10]
    cmd, bat, light, SOt, SOrh, pir = unpack("<BBHHHH", data)
    lasttime = time()

    d1 = -39.6
    d2 = 0.01 

    c1 = -2.0468
    c2 = 0.0367
    c3 = -1.5955E-6

    t1 = 0.01 
    t2 = 0.00008

    sht15_tmp = d1 + d2 * float(SOt);
    RHL = c1 + c2 * SOrh + c3 * float(SOrh)**2
    sht15_rh = (sht15_tmp - 25.0) * (t1 + t2 * float(SOrh)) + RHL

    print "address: 0x%04x" % pkt.src_addr
    print "temperature:", sht15_tmp
    print "humidity:", sht15_rh
    print "light:", light
    print "motion:", pir
    print 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:54:25.137

感谢大家的帮助。一切的关键是使用[LibUSBDotNet](http://sourceforge.net/projects/libusbdotnet/)。一旦我将其安装并引用到我的项目中......我就能够创建一个可以处理传入传感器数据的控制台窗口。我确实需要从原始 Zigboard 库中移植一些功能......但是在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:24:08.837

我不是 100% 确定到底如何做到这一点，但在快速浏览后我可以看到问题的核心是你需要在 C# 中实现类似 ZigBoard 库的东西。

ZigBoard 库使用 python USB 库使用 API 与 USB 设备进行通信，您应该能够使用[LibUsbDotNet](http://sourceforge.net/projects/libusbdotnet/)在 C# 中复制它，如果您阅读 ZigBoard 库代码，您应该能够计算出 API。

# java - 跨不同线程和服务器维护同步数据库

> ID：10592900
> 
> 赞同：1
> 
> 时间：2012-05-15T00:59:03.427
> 
> 标签：java, synchronization, singleton

我想我有点筋疲力尽了，所以如果这是一个愚蠢的问题，我深表歉意。假设我有以下代码：

```
 public void updatePrices()
    {
        synchronized (singleton_price_db)
        {

            singleton_price_db.modifyPrices();

            singleton_propagator.propagatePricesToOtherServers();
        }
    } 
```

现在，当执行线程运行此代码时，它将锁定价格数据库（singleton_price_db），然后提醒单例文件传播器将更新的价格传播到其他服务器。但是，当单例传播器正在运行时，我将不再拥有同步锁，对吗？如何处理？（我需要同步 RAM 上的修改价格，因为它正在传播到其他服务器。我不能让执行线程调用propagatePricesToOtherServers() 方法，因为这会导致许多其他同步问题。）

编辑：我可以进一步详细说明我想要做的事情，但是使用我的设计可能不存在解决方案。本质上，我有两个线程需要围绕数据结构有一个同步块。当第一个线程完成其任务时，它需要将同步块传递给传播者线程（第二个），而没有机会从任何其他线程进行修改。如果不添加大量额外的机器，比如上层的管理器线程，我看不到立即的解决方案，所以这可能是处理这个问题的方法。

# android - Android：未在 ListFragment 内调用 MultiChoiceModeListener

> ID：10592902
> 
> 赞同：3
> 
> 时间：2012-05-15T00:59:33.793
> 
> 标签：android, android-fragments, baseadapter, android-listfragment

对于基于 ICS 的应用程序，我创建了一个 ListFragment，它又使用 BaseAdapter 实现。我已启用 MultiChoiceModeListener() 以显示上下文操作栏。但这里的问题是，每当我检查 CheckBox 或长按标签（两者都在 BaseAdapter 中的视图集中）时，根本不会调用 MultiChoiceModeListener 实现。任何形式的帮助都非常感谢，因为我在尝试了很多选择后完全被卡住了！！！

```
public class ActivitiesFragment extends ListFragment {

public void onActivityCreated(Bundle savedInstanceState) {
    Log.d(TAG, "Entering onActivityCreated()");
    super.onActivityCreated(savedInstanceState);

    this.setAdapter();
    this.setHasOptionsMenu(true);
}

private void setAdapter() {

    HashMap<String, String> activities = DBAdapter
            .getInstance(this.context).getActivities();
    setListAdapter(new ActivitiesList(Util.sortByComparator(activities)));

    ListView listView = getListView();
    listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE_MODAL);
    listView.setMultiChoiceModeListener(new MultiSelectionListener());

}

private class ActivitiesList extends BaseAdapter {
    // Other functions declared
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ActivityView view = null;
        String activityName = this.activityList.get(position);
        String colour = this.activities.get(activityName);

        if (convertView == null) {
            // ActivityView is a LinearLayout with CheckBox, Label and a Button
            view = new ActivityView(context, activityName, colour);

        } else {
            view = (ActivityView) convertView;
            view.setActivityName(activityName);
        }
        return view;
    }
}

private class MultiSelectionListener implements MultiChoiceModeListener {
    // implementation
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T01:24:21.133

您需要使用`ActionMode.Callback`. [您应该通读这些文档](http://developer.android.com/guide/topics/ui/menus.html#CAB)，它实际上非常易于使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-02T16:11:04.683

您应该检查列表中是否没有任何内容具有 onLongClickListener 。我和你有同样的问题，我意识到我的 ViewHolder 调用了长按，所以 MultiChoiceListener 从未被调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-14T15:04:02.710

我有一个类似的问题，即使列出的项目`ListView`有一个`CheckBox`，检查它们也不会调用`MultiChoiceModeListener`. 通过一些研究和查看名为的示例（您可以从->`CustomChoiceList`导入 Android Studio ），我发现绑定到的 s必须实现 interface 。直接引用 CustomChoiceList 示例`File``Import Sample``View``ListView``Checkable`

> 当 ListView 设置了 choiceMode 时，它​​将允许用户“选择”一个或多个项目。该框架提供了默认的列表项布局，在单行文本旁边显示标准单选按钮或复选框：
> 
> android.R.layout.simple_list_item_single_choice 和 android.R.layout.simple_list_item_multiple_choice。
> 
> 在某些情况下，您可能想要自定义此布局。这样做时，根视图必须实现 Checkable 接口。

我知道[文档](http://developer.android.com/guide/topics/ui/menus.html#CAB)可能更清楚地说明了实现 Checkable 接口的必要性。它在最后一段中说

> 当用户选中复选框时，您可以通过使用 setItemChecked() 将相应的列表项设置为选中状态来调用上下文操作模式。

您不必担心，`ActionMode.Callback`因为它由`MultipleChoiceModeListener`

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-01-31T14:21:11.267

您的 MultiChoiceModeListener 实现中可能存在错误。这对我来说可以。

# python - 如何将 Python 程序转换为可运行的 .exe Windows 程序？

> ID：10592913
> 
> 赞同：44
> 
> 时间：2012-05-15T01:01:51.073
> 
> 标签：python, exe

我正在寻找一种不使用 py2exe 将 Python 程序转换为 .exe 文件的方法。py2exe 说它需要 Python 2.6，它已经过时了。有没有办法让我可以分发我的 Python 程序而无需最终用户安装 Python？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-15T01:48:06.387

了解 Python 的每个“冻结”应用程序都不会以任何方式真正保护您的代码。独立可执行 Python“程序”的每个打包系统都将包含许多 Python 库和解释器，这将使您的程序变得非常大。

也就是说，[PyInstaller](http://www.pyinstaller.org/)对我所做的一切都做了几乎完美的工作。目前它只支持 Python 2.7，但 Pyinstaller 对各种大大小小的库的支持在其他 Python 的“冻结”类型程序中是无与伦比的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-05-28T12:41:50.670

我使用 cx_Freeze。适用于 Python 2 和 3，我已经对其在 Windows、Mac 和 Linux 上的工作进行了测试。

cx_Freeze：[http ://cx-freeze.sourceforge.net/](http://cx-freeze.sourceforge.net/)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-15T01:08:56.427

有些人对 PyInstaller 的评价很好

[http://www.pyinstaller.org/](http://www.pyinstaller.org/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-15T01:08:05.610

我在 Python 3.2 中使用了[cx-freeze ，效果很好](http://cx-freeze.sourceforge.net/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-12-12T16:12:28.107

如果它是一个简单的 py 脚本，请参考[这里](https://stackoverflow.com/a/34241563/3133727)

其他的 GUI ：

$ pip3 安装 cx_Freeze

1) 创建一个 setup.py 文件并将其放在与要转换的 .py 文件相同的目录中。

2）将以下行复制粘贴到 setup.py 中，并将“filename.py”更改为您指定的文件名。

```
from cx_Freeze import setup, Executable
setup(
    name="GUI PROGRAM",
    version="0.1",
    description="MyEXE",
    executables=[Executable("filename.py", base="Win32GUI")],
    ) 
```

3) 运行 setup.py "$python setup.py build"

4）那里会有一个名为“build”的新目录。在其中，您将准备好直接启动您的 .exe 文件。（确保将图像文件和其他外部文件复制粘贴到构建目录中）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-15T01:30:38.330

py2exe 适用于 Python 2.7（以及其他版本）。你只需要`MSVCR90.dll`

[http://www.py2exe.org/index.cgi/Tutorial](http://www.py2exe.org/index.cgi/Tutorial)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-15T01:20:21.133

我过去使用过[py2exe](http://py2exe.org/)并且对它非常满意。不过，我并不是特别喜欢使用[cx-freeze](http://cx-freeze.sourceforge.net/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-09T17:53:33.327

为此，您有两种选择：

*   降级到 python 2.6。这通常是不可取的，因为它是回溯并且可能会使您的一小部分脚本无效
*   您的第二个选择是使用某种形式的`exe`转换器。我推荐`pyinstaller`，因为它似乎有最好的结果。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-06-11T04:51:02.927

还有另一种将 Python 脚本转换为 .exe 文件的方法。您可以将[Python 程序编译成 C++ 程序](https://stackoverflow.com/questions/4650243/convert-python-program-to-c-c-code)，它可以像任何其他 C++ 程序一样进行本地编译。

# jquery - JQuery 验证不适用于 IE

> ID：10592917
> 
> 赞同：3
> 
> 时间：2012-05-15T01:02:00.837
> 
> 标签：jquery, internet-explorer, jquery-validate, validation

我正在这个网站上工作：

[http://aimmgm.goexpo.mx/index.php/registro/generales](http://aimmgm.goexpo.mx/index.php/registro/generales)

这基本上是一个表单，我想做的是使用 jquery 插件对其进行验证。它在 Chrome 和 Firefox 中运行良好。但 IE 似乎有问题，因为它不验证字段。

那么，有什么暗示可能是错的吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:06:06.177

```
$('#formId').submit(function(){
    if(!$(this).valid()){
       return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:11:01.160

对不起大家。我正在使用旧版本的 JQuery Validate。我将它更新到最新版本，它运行良好。对不起这个问题。不管怎么说，还是要谢谢你

# algorithm - Haskell：展平二叉树

> ID：10592920
> 
> 赞同：14
> 
> 时间：2012-05-15T01:02:37.380
> 
> 标签：algorithm, haskell, tree, binary-tree, difference-lists

我正在考虑将二叉树展平为列表，以供以后处理。

我首先想到了使用`(++)`来连接左右分支，但后来认为在最坏的情况下需要`O(n^2)`时间。

然后我想到了向后构建列表，使用`(:)`以线性时间追加到前面。但是，然后我想如果我将此列表发送到类似折叠的函数，它必须等到整个树被遍历才能开始折叠，因此不能使用[list fusion](http://www.haskell.org/ghc/docs/7.4.1/html/users_guide/rewrite-rules.html#id3189202)。

然后我想出了[以下内容](http://ideone.com/1oCjH)：

```
data Tree a = Node a (Tree a) (Tree a) | Tip

flatten :: Tree a -> [a]
flatten x = (flatten' x) []

flatten' :: Tree a -> [a] -> [a]
flatten' (Node x left right) l = (flatten' left (x:(flatten' right l)))
flatten' Tip l = l

main = 
  putStrLn $ show $ flatten $ 
    (Node 2 (Node 1 Tip Tip) (Node 4 (Node 3 Tip Tip) Tip)) 
```

这是否会`O(n)`及时工作，占用的“堆栈空间”不超过树的最大深度，并且可以与消耗函数融合（即消除中间列表）？这是压平树的“正确”方法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-15T04:32:02.820

我对融合了解不多，但我认为递归函数一般不能融合。但是请记住，当您在 Haskell 中处理列表时，中间列表通常不会同时作为一个整体存在——您将知道开始而不计算结束，然后您将丢弃开始并知道结束（在与列表元素一样多的步骤中）。这不是融合，这更像是“流的良好行为”，意味着如果增量消耗输出，空间需求会更好。

无论如何，是的，我认为这是压平一棵树的最佳方法。当算法的输出是一个列表，但该列表未经检查，并且正在进行连接时，[差异列表](http://www.haskell.org/haskellwiki/Difference_list)（`DList`s）通常是最好的方法。它们将列表表示为“前置函数”，这消除了追加时遍历的需要，因为追加只是函数组合。

```
type DList a = [a] -> [a]

fromList :: [a] -> DList a
fromList xs = \l -> xs ++ l

append :: DList a -> DList a -> DList a
append xs ys = xs . ys

toList :: DList a -> [a]
toList xs = xs [] 
```

这些是实现的要领，其余的可以从中派生。s 中的朴素扁平化算法`DList`是：

```
flatten :: Tree a -> DList a
flatten (Node x left right) = flatten left `append` fromList [x] `append` flatten right
flatten Tip = fromList [] 
```

让我们做一点扩展。从第二个等式开始：

```
flatten Tip = fromList []
            = \l -> [] ++ l
            = \l -> l
flatten Tip l = l 
```

看看这是怎么回事？现在第一个方程：

```
flatten (Node x left right) 
    = flatten left `append` fromList [x] `append` flatten right
    = flatten left . fromList [x] . flatten right
    = flatten left . (\l -> [x] ++ l) . flatten right
    = flatten left . (x:) . flatten right
flatten (Node x) left right l
    = (flatten left . (x:) . flatten right) l
    = flatten left ((x:) (flatten right l))
    = flatten left (x : flatten right l) 
```

这显示了`DList`公式如何等于您的功能！

```
flatten' :: Tree a -> [a] -> [a]
flatten' (Node x left right) l = (flatten' left (x:(flatten' right l)))
flatten' Tip l = l 
```

我没有任何证据证明为什么`DList`它比其他方法更好（最终取决于你如何使用你的输出），但这`DList`是有效地做到这一点的规范方法，这就是你所做的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T04:40:27.983

`flatten'`是尾递归的，所以它不应该占用任何堆栈空间。然而，它会沿着树的左侧向下走，在堆中吐出一堆 thunk。如果您在示例树上调用它，并将其简化为 WHNF，您应该得到如下所示的内容：

```
 :
 / \
1  flatten' Tip :
               / \
              2   flatten' (Node 4) []
                           /      \
                         (Node 3) Tip
                        /       \
                       Tip      Tip 
```

该算法是`O(N)`，但它必须检查`Tip`s 以及`Node`s。

这看起来是按顺序展平树的最有效方法。该`Data.Tree`模块在[这里](http://hackage.haskell.org/packages/archive/containers/0.2.0.0/doc/html/src/Data-Tree.html#flatten)`flatten`有一个函数，它做很多相同的事情，除了它更喜欢前序遍历。

**更新：**

在图形缩减引擎中，`flatten`in`main`将生成如下图：

```
 @
              / \
             @  []
            / \
           /   \
          /     \
       flatten' Node 2
                /    \
               /      \
              /        \
           Node 1    Node 4
           /   \     /   \
          Tip  Tip  /     \
                   /       \
                Node 3     Tip
                /   \
               Tip  Tip 
```

为了将其简化为 WHNF，图形缩减引擎将展开脊椎，将`[]`和推`Node 2`到堆栈上。然后它将调用该`flatten'`函数，该函数会将图形重写为：

```
 @
                / \
               /   \
              /     \
             @       :
            / \     / \
           /   \   2   \
          /     \       \
       flatten' Node 1   \
                /   \     \
               Tip  Tip    @
                          / \
                         @  []
                        / \
                       /   \
                      /     \
                   flatten' Node 4
                            /   \
                           /     \
                          /       \
                       Node 3     Tip
                       /   \
                      Tip  Tip 
```

并将从堆栈中弹出两个参数。根节点仍然不在 WHNF 中，因此图形缩减引擎将展开脊椎，将`2:...`和`Node 1`推入堆栈。然后它将调用该`flatten'`函数，该函数会将图形重写为：

```
 @
                / \
               /   \
              /     \
             @       :
            / \     / \
           /   \   1   \
          /     \       \
       flatten' Tip      @
                        / \
                       /   \
                      /     :
                     @     / \
                    / \   2   \
                   /  Tip      @
                  /           / \
               flatten'      @  []
                            / \
                           /   \
                          /     \
                       flatten' Node 4
                                /   \
                               /     \
                              /       \
                           Node 3     Tip
                           /   \
                          Tip  Tip 
```

并将从堆栈中弹出两个参数。根节点*仍然*不在 WHNF 中，因此图形缩减引擎将展开脊椎，将`1:...`和`Tip`推入堆栈。然后它将调用该`flatten'`函数，该函数会将图形重写为：

```
 :
                / \
               1   \
                    \
                     @
                    / \
                   /   \
                  /     :
                 @     / \
                / \   2   \
               /  Tip      @
              /           / \
           flatten'      @  []
                        / \
                       /   \
                      /     \
                   flatten' Node 4
                            /   \
                           /     \
                          /       \
                       Node 3     Tip
                       /   \
                      Tip  Tip 
```

并将从堆栈中弹出两个参数。我们现在处于 WHNF 中，最多消耗了两个堆栈条目（假设`Tree`节点不是需要额外堆栈空间来评估的 thunk）。

所以，`flatten'` *是*尾递归的。它无需评估额外的嵌套 redexes 即可替换自身。第二个`flatten'`仍然是堆中的一个 thunk，而不是堆栈。

# c - 如何监控在linux中运行的两个服务，并在一个崩溃后重新启动它们

> ID：10592921
> 
> 赞同：0
> 
> 时间：2012-05-15T01:02:53.593
> 
> 标签：c, linux

我有两个在 linux 中运行的服务，分别调用它们`A`和`B`. 每个都依赖于另一个，因此如果一个崩溃并重新启动，另一个必须立即重新启动。

我写了一个监控程序，分别启动和监控这两个服务，程序崩溃时可以重启一个服务。

我想改进监控程序，以便当它发现一个服务崩溃时，它会获取另一个服务的 PID 并杀死它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T01:06:47.277

有一些很棒的解决方案可以让您对不同事件的特定响应进行编程。

daemontools - [http://cr.yp.to/daemontools.html](http://cr.yp.to/daemontools.html)

新贵（如果你使用 ubuntu）- [http://upstart.ubuntu.com/](http://upstart.ubuntu.com/)

主管 - [http://supervisord.org/](http://supervisord.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T10:07:27.397

[监控进程将使用fork(2)](http://linux.die.net/man/2/fork)生成两个孩子，对吗？如果是这样，父母将取回孩子的PID，它可以为每个孩子保存在一个变量中。

在生成两个进程之后，父监视器可以坐在一个循环中，等待[waitpid(2)](http://linux.die.net/man/2/waitpid)调用。使用正确的选项，此调用可以阻塞，直到其中一个子进程终止，然后您将返回子进程的 PID 及其退出状态。基于此，您可以对另一个孩子执行[kill(2)](http://linux.die.net/man/2/kill)，然后重新执行分叉序列以生成两个孩子的新实例。

请注意，在杀死第二个孩子之后，您的下一个 waitpid 调用将返回那个的 PID，而不是新的一对孩子中的一个。因此，您需要对照当前孩子的 PID 检查返回的 PID *，*如果不匹配则忽略它。

# objective-c - NSData 内存未释放 - ARC

> ID：10592922
> 
> 赞同：4
> 
> 时间：2012-05-15T01:02:57.977
> 
> 标签：objective-c, ios, memory, automatic-ref-counting, nsdata

我有一个我似乎无法弄清楚的问题。做了大量的搜索，尝试了大约 50 种不同的变体，到目前为止还没有骰子。这是我的困境。

我有3种方法。一个在我的 PageView 对象加载时调用，另一个在用户进行更改时调用，最后一个在用户离开页面时调用。

第一种方法：

```
- (void)captureInitialLinesTexture {
@autoreleasepool {
    self.initialLinesTextureCaptured = TRUE;
    GLubyte *buffer =(GLubyte *) malloc (1024 * 1024 * 4 * sizeof(GLubyte));
    glPixelStorei(GL_PACK_ALIGNMENT,1) ;
    glReadPixels(0, 0, 1024, 1024, GL_RGBA, GL_UNSIGNED_BYTE, buffer);
    glBindTexture(GL_TEXTURE_2D, [pageTexture name]);
    glTexSubImage2D(GL_TEXTURE_2D, 0, 0, 0, 1024, 1024, GL_RGBA, GL_UNSIGNED_BYTE, buffer);
    NSData __autoreleasing  *tempData = [NSData dataWithBytes:buffer length:1024*1024*4*sizeof(GLubyte)];
    if (textureData == nil) {
        textureData = [self.pageController.notebookDoc newTextureInPage:self.page];
    }

    [pageTextures addObject:tempData];
    if ([pageTextures count] > 5) {
        [pageTextures removeObjectAtIndex:0];
    }
    textureData.textureData = tempData;
    textureData.page = self.page;
    self.page.texture = textureData;
    self.page.lastLineId = [NSNumber numberWithInt:self.pageController.newLineId - 1];
    [self.pageController saveNotebookWithUndo:FALSE];
    free((GLubyte*)buffer);
  }
} 
```

第二种方法：

```
-(void)capturePageTexture {
@autoreleasepool {
    GLubyte *buffer =(GLubyte *) malloc (1024 * 1024 * 4 * sizeof(GLubyte));
    glPixelStorei(GL_PACK_ALIGNMENT,1) ;
    glReadPixels(0, 0, 1024, 1024, GL_RGBA, GL_UNSIGNED_BYTE, buffer);
    NSData __autoreleasing  *tempData = [NSData dataWithBytes:buffer length:1024*1024*4*sizeof(GLubyte)];
    [pageTextures addObject:tempData];
    if ([pageTextures count] > 5) {
        [pageTextures removeObjectAtIndex:0];
    }
    free((GLubyte*)buffer);
  }
} 
```

最后一种方法：

```
-(void)attemptInstantPageTextureCapture {
  if ([pageTextures count] > 0) {
      self.page.texture.textureData = [pageTextures lastObject];
      self.page.lastLineId = [NSNumber numberWithInt:self.pageController.newLineId - 1];
      [self.pageController saveNotebookWithUndo:FALSE];
  }
  [pageTextures removeAllObjects];
  pageTextures = [NSMutableArray arrayWithCapacity:0];
} 
```

我的问题是那些 NSData *tempData 变量。由于某种原因，其中一个在我的 PageView 消失后随机挂起（通过分配工具发现）。

如果我加载 PageView，captureInitialLinesTexture 会触发。然后，我可以添加大量笔触并在每次笔触后触发 capturePageTexture，在 NSMutableArray 名称 pageTextures 中最多保留 5 个 NSData 变量。当我离开 PageView 时， NSMutableArray 被清空。

现在这是它让人头疼的地方。NSData 的分配总是相同的大小，在这种情况下为 4mb。当页面加载时，我有 1 个 4mb 分配。如果我画笔画，我最多可以再画 5 个。然后，当我离开 PageView 时，最多有 5 个 4mb 分配（NSData）被释放，但我总是得到 1 个。如果我然后去仪器上的调用树，它会从第一种方法或第二种方法中随机说出它方法。为什么转储存储在数组中的 5 个 NSData 没有问题，但由于某种原因，1 个 NSData 在某处仍然存在。此外，这个神秘的 NSData 随机来自任一方法。

就像我说的，我已经搜索和搜索，找不到解决这个问题的方法。4MB 的内存显然是巨大的，因此任何此类泄漏都会随着时间的推移杀死应用程序。

一次尝试的分配： ![一次尝试分配](../Images/d609632c25cfd24e7fac207b6778ddd9.png)

调用 Tree 进行该尝试： ![为该尝试调用树](../Images/8204b74c664a7addbdba74866e87f25f.png)

分配给另一次尝试： ![分配给另一次尝试](../Images/07ac7cbd42ab5a672a263de743e11553.png)

调用 Tree 进行其他尝试： ![调用 Tree 进行其他尝试](../Images/284f79b4e02c432d9c832582b2c2ba65.png)

每次都会触发相同的确切代码，并且每次 NSData 保持活动状态都是随机的。有人知道我做错了什么吗？如果您想知道，“page”和“textureData”变量是 NSManagedObjects。就我尝试过的事情而言：

在 NSData 对象上分配，然后调用 initWithBytes:length:

initWithBytesNoCopy:Length: - 没有调用 free((GLubyte*)buffer);

initWithBytesNoCopy:Length:freeWhenDone: - 没有调用 free((GLubyte*)buffer);

以上两种尝试的NSData类方法版本

不使用@autoreleasepool

不使用 __autoreleasing 进行 var 声明

使 NSMutableArray pageTextures 成为 PageView 的属性

在从 NavigationController 堆栈弹出之前将 PageView 设置为 nil

使用 __strong 遍历 pageTextures 可变数组并将所有 NSData 设置为 nil 或 null。

如上所述，这一切都发生在 PageView 类中，该类是 PageViewController 中的许多此类之一，该类被推送到导航控制器上然后从导航控制器中弹出。一旦 PageViewController（PageView 的唯一超级视图）从导航堆栈中弹出，一个随机的 NSData 分配仍然有效。

任何建议都将不胜感激！就上面提到的核心数据元素而言，代码完全按计划工作。唯一的问题是偷偷摸摸的实时 NSData 分配...... :(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T14:50:33.837

不久前解决了这个问题，但我想我会发布发生的事情，以防其他人有同样的问题。基本上，问题在于分配给核心数据实体的 NSData 对象，并且核心数据可以控制何时释放自己的内存。因此，虽然代码看起来不错，但核心数据仍然保留在 NSData 对象上，在它们超出范围并且运行循环完成之后（ARC 通常会启动）。

为了解决这个问题，我们只是将 NSData 保存到一个文件中，并更改了模型，以便核心数据实体只包含文件路径的字符串 (NSString) 而不是布尔数据 (NSData)。

问题解决了 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-05T15:59:53.240

`malloc`当它在一个线程上分配的任何内容在另一个线程上被释放时，它不会释放。将您的代码包装在此：

```
dispatch_async(dispatch_get_main_queue(), ^{
    // malloc and whatever other code goes here...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T01:05:16.467

__autoreleasing 关键字并不像您认为的那样做。它用于将包含未初始化指针的指针传递给初始化它们的方法。然后这些方法知道不保留它们初始化的值，因为它的唯一目的是返回以在调用方法中使用。在这种情况下你不需要它（默认的 strong 会很好，当它超出范围时会被释放）。删除该关键字时错误是否完全相同？

# ruby-on-rails - 服务层和控制器

> ID：10592933
> 
> 赞同：0
> 
> 时间：2012-05-15T01:05:07.590
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我是 Rails 的新手。我正在使用服务层来保持我的控制器纤薄。我所有的服务层文件都位于`app/services/domain`, `app/services/application`, `app/services/infrastructure`. 例如这里是我的公司服务：

```
class CompanyService

  def self.create(params)
    company = Company.new(params)
    rst = true
    ActiveRecord::Base.transaction do
      begin
        company.save!
      rescue ActiveRecord::RecordInvalid
        rst = false
      rescue ActiveRecord::StatementInvalid
        rst = nil
      end
    end
    return company, rst
  end

  def self.update(params)
    company = get_company(params[:id])
    rst = true
    ActiveRecord::Base.transaction do
      begin
        company.old_category_ids = company.category_ids
        company.assign_attributes(params[:company])

        decrease_category_ids = company.old_category_ids-company.category_ids
        decrease_counters(decrease_category_ids)

        increase_category_ids = company.category_ids-company.old_category_ids
        increase_counters(increase_category_ids)

        company.save!
      rescue ActiveRecord::RecordInvalid
        rst = false
      rescue ActiveRecord::StatementInvalid
        rst = nil
      end
    end
    return company, rst
  end # end update 
```

这是公司控制器：

```
 def create
      @company, rst = CompanyService.create(params[:company])
      if rst == true
        redirect_to(admin_companies_url, notice: "Company was successfully created.")
      elsif rst == false
        render active_admin_template('new.html.erb')
      else
        redirect_to admin_companies_url, notice: "Something went wrong. Please try again."
      end
    end

    def update
      @company, rst = CompanyService.update(params)
      if rst
        redirect_to admin_company_url(company), notice: "Company was successfully updated."
      elsif rst == false
        render active_admin_template('edit.html.erb')
      elsif rst == nil
        redirect_to admin_companies_url, notice: "Something went wrong. Please try again."
      end
    end

    def destroy
      CompanyService.destroy(params[:id])
      redirect_to admin_companies_url
    end 
```

所以我有两个问题：

1.  我知道我的控制器代码不好。如何改进它？
2.  我的服务不会自动加载到生产和开发环境中。为什么？

抱歉英语不好。感谢您的每一个建议和帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T01:16:52.773

您是否有理由不想使用模型并通过服务抽象模型交互？

要自动加载服务，您应该在 config/application.rb 中的 autoload config.autoload_paths 中包含服务路径

您还对不良记录（无效记录或无效语句）进行了双重检查，无论为什么不保存记录，您的用户体验都将是相同的，因此没有理由嵌套 ifs。您的控制器应该只知道操作是否成功

# objective-c - 如何动态加载对象和设置属性？

> ID：10592939
> 
> 赞同：0
> 
> 时间：2012-05-15T01:05:34.790
> 
> 标签：objective-c, ios, dynamic

我有几个要动态管理的 UIImageView 实例。我想将每个加载到一个可变数组中，然后设置每个实例的 animationImages 属性。我的问题：如何将 UIImageViews 加载到可变数组中，然后如何动态设置属性？以下是我创建动画对象的方法：

`for (int i = 1; i <= 20; i++) {[myAnimation addObject:[UIImage imageNamed: [NSString stringWithFormat:@"frame-%i.png", i]]]; }`

这是我添加对象的方式（非动态）：

```
NSMutableArray *collection = [[NSMutableArray alloc]initWithObjects:imageView1,imageView2,...nil]; 
```

我不确定如何设置属性。我认为它应该类似于以下内容：

```
for (id xxx in collection) {
    xxx.animationImages=someAnimation;      
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:09:42.783

只需在您这样使用`UIImageView *imageView = (UIImageView *) xxx;`的循环中的行之前添加`for`

```
for (id xxx in collection) {
// Here add the line    
xxx.animationImages=someAnimation;      
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T03:00:24.360

如果您想使用快速枚举 for 循环样式，则需要使用：

```
for (UIImageView * xxx in collection) {
    xxx.animationImages=someAnimation;      
} 
```

根据您的操作，您似乎应该考虑将这些添加到某些包含视图中，并从`layoutSubviews:`管理视图中的适当调用中布置它们。你会在哪里做类似的事情（从包含你的图像视图的视图中）：

```
for (UIImageView * view in [self subviews]) {
    // move the image view around as needed.
} 
```

如果这与您尝试完成的内容一致，将提供更多详细信息，但仍不清楚您尝试使用此代码“管理”什么。

# c# - 事务回滚错误

> ID：10592942
> 
> 赞同：0
> 
> 时间：2012-05-15T01:06:01.890
> 
> 标签：c#, ado.net

我正在使用 Here 的 ado.net 助手[类](http://www.blackbeltcoder.com/Articles/ado/an-ado-net-sql-helper-class)。我不知道如何使用助手使用事务。下面是我尝试过的代码。我在做正确的事吗？我总是遇到`This SqlTransaction has completed; it is no longer usable.`错误。

```
 Adodb.ConnectionString = "...";

            Adodb db = new Adodb(); 
            SqlTransaction trans = db.BeginTransaction();

            try
            {
                string qry = "UPDATE PSCHCounter SET SeqNo = '0' WHERE CountID = 'PCSTL'";
                db.ExecNonQuery(qry);
                string qry1 = "UPDATE PSCHCounter SET SeqNo = '1' WHERE CountID = 'GJNLP'";
                db.ExecNonQuery(qry1);

                // Commit 
                trans.Commit();
            }
            catch (Exception ex)
            {
                try
                {
                    // Rollback
                    trans.Rollback();
                    // Log exception
                }
                catch (Exception ex2)
                {
                    // Log exception
                }
            }
            finally
            {
                // Close db connection
                db.Dispose();
            } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T01:16:01.693

问题是你打电话`trans.Commit()`而不是`db.Commit()`. 这对我有用：

```
 AdoHelper.ConnectionString = "...";

    using (AdoHelper db = new AdoHelper())
    {
        // Start the transaction
        db.BeginTransaction();

        try
        {
            db.ExecNonQuery("UPDATE FeedItems SET Title = 'Test3' WHERE Id = 456");
            db.ExecNonQuery("UPDATE FeedItems SET Title = 'Test4' WHERE Id = 457");

            // Commit  
            db.Commit();
        }
        catch (Exception ex)
        {
            db.Rollback();
        }
    } 
```

# objective-c - 谷歌放置 API“参考”密钥使 iPhone 应用程序崩溃

> ID：10592943
> 
> 赞同：0
> 
> 时间：2012-05-15T01:06:06.757
> 
> 标签：objective-c, xcode, ios5, google-places-api

我对目标 c 有点陌生，遇到了一个有趣的问题。我使用 JSON 从 google places api 获取搜索结果，效果很好。找到该地点后，我想加载显示业务详细信息的第二个屏幕。我计划通过地点 API 使用地点详细信息搜索来做到这一点。为了在两个视图之间传递信息，我创建了一个数据类来保存变量。

数据类.h

```
#import <Foundation/Foundation.h>

@interface DataClass : NSObject {    

    NSString *Lat;
    NSString *Long;
    NSString *barLat;
    NSString *barLong;
    NSString *Ref;
    NSString *barName;

}    
@property(nonatomic,retain)NSString *Lat;   
@property(nonatomic,retain)NSString *Long;  
@property(nonatomic,retain)NSString *barLat;  
@property(nonatomic,retain)NSString *barLong;  
@property(nonatomic,retain)NSString *Ref;
@property(nonatomic,retain)NSString *barName;
+(DataClass*)getInstance; 

@end 
```

数据类.m

```
#import "DataClass.h"

@implementation DataClass
@synthesize Lat;
@synthesize Long;
@synthesize barLat;
@synthesize barLong;
@synthesize Ref;
@synthesize barName;
static DataClass *instance =nil;    
+(DataClass *)getInstance    
{    
    @synchronized(self)    
    {    
        if(instance==nil)    
        {    

            instance= [DataClass new];    
        }    
    }    
    return instance;    
}   
@end 
```

在我的第一个视图中，我添加了这样的参考值：

```
DataClass *obj=[DataClass getInstance];  
NSString *barRef = [NSString stringWithFormat:@"%@", searchResult.reference];
obj.Ref = barRef; 
```

searchResult.reference 是有效的，当我将它放入 barRef 并使用 NSLog 时，它会正确输出，但是当我尝试将它添加到 obj 对象时，它会使应用程序崩溃。字符串看起来像这样

"CnRrAAAABX_U5FcybhlJgmWGAv19Fhemk_Bu7ytKKuL33201sKfce2aIzeZ2P8cWdKPV8hCsbUbAzYcoA9QDmbMPeYqCX8idypsQH4LXvGwxW_qtW4jBod2bufelyxeLaBlS1DoNfDtaH4evksVluW9gsqCGcRIQkJXwM_RcSewilknJowaghhoUFoR64jZTUDCsrXvmOqg4eqJx5uU"

即使我使用

NSString *barRef = @"CnRrAAAABX_U5FcybhlJgmWGAv19Fhemk_Bu7ytKKuL33201sKfce2aIzeZ2P8cWdKPV8hCsbUbAzYcoA9QDmbMPeYqCX8idypsQH4LXvGwxW_qtW4jBod2bufelyxeLaBlS1DoNfDtaH4evksVluW9gsqCGcRIQkJXwM_RcSewilknJowaghhoUFoR64jZTUDCsrXvmOqg4eqJx5uU";

然后 obj.Ref = barRef; 它崩溃了。知道为什么会发生这种情况或解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:04:21.820

看来，您的字典对象不是字典，而是字符串。

可能的解决方案：

1) 使用调试器检查您的字典中是否有 @"formatted_phone_number" 键。调试您的代码并检查您的字典是否不错。你也可以使用 NSLog 来输出你的字典内容，看看好不好。

2）如果您的字典不好，请检查您是否有类似的东西。这就是我解析来自 Google API 的 JSON 格式的 HTML 响应的方式：

```
NSDictionary *dic;
SBJsonParser *jsonParser = [SBJsonParser new];
NSError *error = NULL;
NSURLResponse *response;
NSHTTPURLResponse *httpResponse;

    //Create a URL object.
    NSURL *url = [NSURL URLWithString:urlString];

    //URL Request Object
    NSURLRequest *request = [NSURLRequest requestWithURL:url cachePolicy:NSURLCacheStorageAllowed timeoutInterval:userWaitTime];

    NSData *data = [NSURLConnection sendSynchronousRequest:request 
                                         returningResponse:&response error:&error];

    NSString *htmlString = [[NSString alloc]  initWithBytes:[data bytes]
                                                     length:[data length] encoding: NSUTF8StringEncoding];

    //NSLog (@"htmlString: %@", htmlString);

    dic = [jsonParser objectWithString:htmlString error:nil]; 
```

# postgresql - PostgreSQL 中的 RIGHT() 函数报错

> ID：10592944
> 
> 赞同：5
> 
> 时间：2012-05-15T01:06:11.280
> 
> 标签：postgresql

我正在尝试使用它的`RIGHT()`功能，因此它只会显示从客户表中提取的信用卡号的最后 4 位数字。这是我到目前为止所拥有的：

```
create function get_customer(text) returns setof cusinfo as

$$

select upper(first_name)||' '||upper(last_name) as full_name, upper(address), upper(city)||', '||upper(state)||' '||zip as citystatezip, email, '************'||right(cc_number,4), cc_name

from customer

where customer_id = $1;

$$ language sql; 
```

我得到的错误是：

> psql:finalproject.sql:273：错误：函数正确（文本，整数）不存在第 3 行：...|' '||zip as citystatezip, email, ' ***** ** ***** '||right(cc_n...

关于为什么会发生这种情况的任何想法？我尝试只单独使用`RIGHT()`并放入类似的东西`RIGHT('Help me', 2)`，但我得到了同样的错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T01:11:49.167

我假设`psql`是 PostgreSQL。如果是这种情况，您应该阅读[PostgreSQL 文档](http://www.postgresql.org/docs/8.1/static/functions-string.html)来描述您可以使用的字符串函数。

`right`不是其中之一。

试试`substring(cc_number from char_length(cc_number) - 3)`。

将来您可能希望使用 Google 来帮助回答此类问题。谷歌是一个搜索引擎；您可以使用搜索引擎查找文档；文档告诉您如何使用产品。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-17T17:30:10.113

RIGHT(str, num) - 在 9.1 版中添加到 Postgresql

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-24T18:06:00.740

您可以创建缺少的 RIGHT 函数：

```
DROP FUNCTION IF EXISTS
    RIGHT
        (
            IN_STRING VARCHAR(4000),
            RIGHT_OFFSET INT
        );

CREATE FUNCTION
    RIGHT
        (
            IN_STRING VARCHAR(4000),
            RIGHT_OFFSET INT
        )
    RETURNS VARCHAR
AS $$
    BEGIN 
        RETURN SUBSTRING(IN_STRING FROM CHAR_LENGTH(IN_STRING) - (RIGHT_OFFSET - 1));
    END;
$$ LANGUAGE PLPGSQL; 
```

改编自@ta.speot.is 的回答。

# reporting-services - 安装 SSRS 2008 和 SSRS 2012 会破坏 SSRS 2008

> ID：10592948
> 
> 赞同：3
> 
> 时间：2012-05-15T01:07:04.540
> 
> 标签：reporting-services, ssrs-2008, sql-server-2012

SSRS 2008 已经运行良好很长时间了。

我们已经在同一台服务器上安装了 SSRS 2012，它似乎有点破坏了 SSRS 2008 共享点模式。

所有 .rdl 和 .rsds 文件不再与服务器“关联”。当您单击报告时，它会下载这些文件，而不是执行/显示报告。（图标也更改为“空白文档”外观）。没有更改任何设置。IE。
允许管理内容类型？是等。

当您转到服务器并转到配置工具 --> Reporting Services 配置管理器时，它似乎不再识别服务器名称（无效命名空间）。

关于如何让它再次工作的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-26T20:07:53.440

您必须确保您没有使用相同的端口。默认端口是 80。你改了吗？

参考：http: [//msdn.microsoft.com/en-us/library/ms143711.aspx](http://msdn.microsoft.com/en-us/library/ms143711.aspx)

# math - 快速傅里叶变换多项式评估的“树”？

> ID：10592950
> 
> 赞同：1
> 
> 时间：2012-05-15T01:07:25.670
> 
> 标签：math, computer-science, divide-and-conquer

我正在尝试通过使用 FFT 的分治算法来评估多项式 A(x)。我基本上将多项式分解为奇数根和偶数根，然后在两个较小的多项式上递归。（允许我每次递归计算两倍的数值）。

为了可视化这一点，我试图创建一棵树来显示多项式在算法中的路径。我不确定如何开始——有人可以让我开始吗？我不期望一棵完整的树只是一个让我走上正确道路的简短示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T03:31:14.167

这是[算法](http://www.cs.berkeley.edu/~vazirani/algorithms.html)第 2 章中的一个简单示例：

```
A(x) = 3 + 4x + 6x^2 + 2x^3 + x^4 + 10x^5
     = (3 + 6x^2 + x^4) + x(4 + 2x^2 + 10x^4)
     = E(x^2) + x*O(x^2) 
```

在哪里

```
E(x) = 3 + 6x + x^2
O(x) = 4 + 2x + 10x^2 
```

请注意多项式的大小如何缩小了 2 倍？`x`此外，我们可以在因为`-x`将产生相似的值时循环评估。

```
A(x) = E(x^2) + x*O(x^2)
A(-x) = E(x^2) - x*O(x^2) 
```

我希望你能看到这个递归过程是如何变成一棵树的。

# java - 在 Java 中，我什么时候应该用 * 导入整个包，而不是从包中导入单个对象？

> ID：10592951
> 
> 赞同：0
> 
> 时间：2012-05-15T01:07:38.073
> 
> 标签：java, android, import, packages

使用诸如 import android.view.* 之类的语句而不是仅从视图包中导入我实际使用的对象是否有一些缺点？如果我使用 *，它会使我编译的 android 应用程序变大吗？如果是，那么决定是使用 * 导入整个包还是仅导入单个对象的最佳做法是什么？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T01:12:29.670

你需要知道它`import`没有加载任何东西。类加载器就是这样做的。

`import`所做的只是让您在代码中使用短类名而不是长类名（例如，`Connection`而不是`java.sql.Connection`）。它根本不会影响您的 Android 应用程序的大小。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T02:11:48.907

在他们的《[Core Java Volume 1](https://rads.stackoverflow.com/amzn/click/com/0132354764) 》一书中，作者指出

> java.util.* 语法不那么繁琐。它对代码大小没有负面影响。但是，如果您显式地导入类，您的代码阅读器就会确切地知道您使用了哪些类。

唯一需要担心包的时候是名称冲突。例如，java.util 和 java.sql 包都有一个 Date 类。现在假设您编写了一个导入两个包的程序。*import java.sql.** 和 *import java.util.** 如果你现在尝试使用 Date 类，你会得到一个编译时错误。如果您想同时使用它们，则必须使用完全限定名称。

import 语句的唯一好处是方便。它**与**C 中的 #include 指令不同。在《[The Java Programmin Language》（它的作者之一是 James Gosling）一](https://rads.stackoverflow.com/amzn/click/com/0321349806)书中，作者声明如下，

> 导入语句只是向编译器提供信息（关于您在代码中使用的类型）；它们不会导致文件被“包含”到当前文件中。

我从*The Java Language Specification*（Bill Joy、James Gosling 等人）一书中推断出的，我上面提到的一个是带有通配符的 import 语句称为*Type-Import-on-Demand Declaration*。这告诉编译器，如果它发现它不知道的名称，它应该查看由*import-on-demand*语句给出的包，以查看它是否具有该名称的成员。

# php - 如何修改重定向网址

> ID：10592954
> 
> 赞同：0
> 
> 时间：2012-05-15T01:08:03.990
> 
> 标签：php, sql, url

我的问题是这个

当我使用这个功能时，由于某种原因，正在创建一个额外的目录，所以它看起来像这个 site/dd_folder/dd_folder/(file)

有没有一种简单的方法来修改它，以便所有请求都像这个 site/dd_folder/(file) ？

```
function download_redirect_torrent($winner_id)
{
    global $db, $setts;
    $output = array('url' => null, 'redirect' => false, 'display' => null);

    $winner_id = intval($winner_id);

    $media_details = $db->get_sql_row("SELECT am.*, w.is_dd, w.dd_active, w.dd_active_date FROM 
        " . DB_PREFIX . "auction_media am, " . DB_PREFIX . "winners w WHERE 
        am.auction_id=w.auction_id AND w.winner_id=" . $winner_id . " AND am.media_type=4");

    if ($media_details['is_dd'])
    {
        if ($media_details['dd_active'])
        {
            $expiration = (($setts['dd_expiration'] * 24 * 60 * 60) + $media_details['dd_active_date']) - CURRENT_TIME;

            if ($expiration > 0 || !$setts['dd_expiration'])
            {
                $db->query("UPDATE " . DB_PREFIX . "winners SET dd_nb_downloads=dd_nb_downloads+1 WHERE winner_id=" . $winner_id);

                $output['redirect'] = true;
                $output['display'] = MSG_DD_DOWNLOAD_SUCCESS;           
            }
            else 
            {
                $output['display'] = MSG_DD_DOWNLOAD_LINK_EXPIRED;
            }
        }
        else 
        {
            $output['display'] = MSG_DD_DOWNLOAD_LINK_INACTIVE;         
        }
    }
    else 
    {
        $output['display'] = MSG_DD_NO_DD_OR_NO_AUCT_WINNER;                    
    }

    if ($output['redirect'])
    {
        if (eregi('http://', $media_details['media_url']) || eregi('https://', $media_details['media_url']))
        { /* means we have an external link */
            $output['url'] = $media_details['media_url'];
        }
        else 
        { /* the file is on site */
            //$output['url'] = $setts['dd_folder'] . $media_details['media_url'];
            $output['url'] = $media_details['media_url'];
        }
    }

    return $output;
} 
```

# java - 输出中的简单间距

> ID：10592957
> 
> 赞同：-1
> 
> 时间：2012-05-15T01:08:13.960
> 
> 标签：java, string, spacing

我需要编写一个方法，该方法将采用类似字符串`"1+2+3*4"`并在每个字符之间添加空格，如果空格太多则删除空格。传入的字符串可能有空格/没有空格，我需要确保每个字符之间只有一个空格。

如果有人可以提供实现这一目标的最简单和最简单的方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T01:35:19.000

此解决方案标准化每个运算符周围的空白。

```
return expr.replaceAll("(?<=\\d)\\s*([-+/*])\\s*(?=\\d)", " $1 "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T23:26:27.447

通常可理解的代码更好。

一种更容易理解的蛮力方法，可能更慢，没有棘手的正则表达式，使用 String.replace。

1.  删除每个空格。例如`String.replace(" ", "");`
2.  然后用带空格的运算符替换每个运算符，例如 `String.replace("+", " + ");`

例如完整代码（警告 - 未经测试！）

```
 static final String[] ALL_MY_OPS = { "+", "-", "*", "//"};

 public static String cleanup(String in) {
    String result = in.replace(" ", "");  // remove all spaces
    for (String op : ALL_MY_OPS) {
       String replacement = " " + op + " ";
       result = result.replace(op, replacement);
    }

    return result;
 } 
```

# c++ - 是否有可能出现#include 失败而不中止编译？

> ID：10592961
> 
> 赞同：2
> 
> 时间：2012-05-15T01:08:59.137
> 
> 标签：c++, c

我有一组松散相关的头库，我想让它们一起工作，而不是紧密耦合。我想到的一种方法是尝试包含其他头文件，如果找到它们，那么我可以相应地生成代码。所以也许我会在vector.hh中有一个向量类：

```
#ifndef __VECTOR_HH__
#define __VECTOR_HH__

bunch of vector-y stuff

#endif 
```

然后在另一个文件中的 coordinates.hh （假设它进行坐标转换）：

```
#ifndef __COORDINATES_HH__
#define __COORDINATES_HH__
#include <vector.hh>

class SomeCoordinateType {
#ifdef __VECTOR_HH__
    operator vector() { <convert to vector> }
#endif
}

#endif 
```

这个想法是用户获取他们需要的任何头文件。如果他们获取了vector.hh 头文件以及coordinates.hh，那么我将为他们创建转换运算符，如果没有，我不这样做。这一切都取决于能否让#include 指令在失败时不会产生致命错误。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T02:58:25.027

执行此操作的一种典型方法是使用小型配置工具生成自定义“config.h”（显然使用您认为合适的名称），其中仅包含他们选择的配置所需的其他标头。

另一种可能性是让 config.h 有条件地包含其他头文件，并让您的配置工具生成一个合适的 makefile，通过定义（或不​​）控制这些包含的宏来启用功能。通常，您将拥有一个定义实际依赖项的主 makefile，并且只需生成一个小文件以包含如下行：

特征 = -DCOORDS -DVECTOR

CFLAGS = $（特征）-O2

...然后将其包含到您的主 makefile 中以获取在编译期间定义的那些值，从而启用依赖于它们的功能。然后在你的标题中，你会有类似的东西：

```
// coordinates.h
#ifdef VECTOR
#include <vector>
#endif

// ...
class coordinate {
   #ifdef VECTOR
       operator vector() { /* ... */ }
   #endif
}; 
```

然而，我会努力避免让你的代码`#ifdef`到处塞满，尤其是嵌套到需要长时间和仔细分析才能确定一个类对于任何给定的特性组合具有哪些特性的地步。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T01:12:40.367

根据 C 标准，编译器必须对丢失的标头进行诊断。

一旦它完成了，它就可以继续编译并生成一个它可以并且想要这样做的目标文件。另一方面，大多数情况下，缺少头文件会导致其他错误的主要列表（因为头文件对编译至关重要），因此不会生成目标文件。

由于缺少标头，编译器有权不生成目标文件，因此您不能可移植地假设除了失败之外的任何事情。失败是迄今为止最常见的结果。

（IIRC，曾经——可能是十年或更长时间前——Sun C 编译器生成了一条消息，`#error`但继续编译，有时成功，这取决于`#error`所保护的内容。此后已修复。不直接相同，但有些相关.)

# javascript - Jquery 检测 EditorTemplate 上的 TextBox 内容更改

> ID：10592964
> 
> 赞同：1
> 
> 时间：2012-05-15T01:09:13.833
> 
> 标签：javascript, asp.net-mvc-3, jquery-ui, c#-4.0

我需要检测文本框中的值是否已更改。如果文本框内容被更改/修改，我需要显示一个文本框并强制用户输入一些关于更改的评论。

这是我的 EditorTemplate 页面，位于 Shared/EditorTemplates/Addresses.cshtml

```
@Html.EditorFor(model => model.Address)
@Html.ValidationMessageFor(model => model.model.Address))
@Html.EditorFor(model => model.Comments,new{style="Visible:false" })
@Html.ValidationMessageFor(model => model.Comments ,new{style="Visible:false" }) 
```

这是 MyPage.cshtml，我将上面的 EditorTemplate 称为

```
 @if (!UtilityHelper.IsNullOrEmpty(Model.AddressesRecords))
        {

             @Html.EditorFor(model => model.AddressesRecords)

         }

     <input type="submit" name="ButtonCommand" value="Save" /> 
```

当页面被加载时，会有多个地址文本框。如果用户对任何地址 TextBox 进行任何修改，CommentsTextBox 将立即在该特定地址 TextBox 上可见，并启用验证。

所以当我点击保存按钮时，我需要确保用户在 CommentsTextBox 中输入了一些评论。如果用户在没有更改地址文本框的情况下单击保存按钮，则记录将被保存。

在运行时，我可以看到编辑器 id 是动态生成的，例如 AddressesRecords_0_Address 、AddressesRecords_1_Address ......

我尝试了一些 Jquery，但这似乎永远不会起作用，因为实际的 AddressTextBox id 是动态生成的。

```
<script type="text/javascript">

    $(document).ready(function(){

       var $el = $('#AddressesRecords_0_Address');
       $el.data('oldVal',  $el.val() );

       $el.change(function(){

            $("#AddressesRecords_0_Comments").show();
       })

    });
</script> 
```

在这里，如何将我的 Jquery 更改函数附加到我的每个 addressTextBox ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T01:28:08.707

假设我有 3 个名为 TextBox1、TextBox2 和 TextBox3 的不同文本框，此代码将检查这些字段中的任何更改并显示 Comments 字段

```
$('#TextBox1, #TextBox2, #TextBox3').each(function () {
    $(this).data('oldVal', $(this).val());
    $(this).bind("propertychange keyup input paste", function (event) {
        if ($(this).data('oldVal') != $(this).val()) {
            $(this).data('oldVal', $(this).val());

            $('#Comments').show();
        }
    });
}); 
```

您还可以为每个字段分配一个类并这样做

```
$('.MyClass').each(function () {
    $(this).data('oldVal', $(this).val());
    $(this).bind("propertychange keyup input paste", function (event) {
        if ($(this).data('oldVal') != $(this).val()) {
            $(this).data('oldVal', $(this).val());

            $('#Comments').show();
        }
    });
}); 
```

# sql-server - 从数据库中获取选定行的子记录

> ID：10592970
> 
> 赞同：1
> 
> 时间：2012-05-15T01:10:19.520
> 
> 标签：sql-server, sql-server-2008, tsql

我有 3 张这样的桌子

错误组

```
ID        NAME        DESCRIPTION
--------------------------------------
1         Group1      Some description
2         Group2      Some description
3         Group3      Some description 
```

错误

```
ID        NAME        DESCRIPTION        BELONGSTO
--------------------------------------------------
1         Bug1        something          1
2         Bug2        something          1
3         Bug3        something          2 
```

错误评论

```
ID        BUGID       COMMENT
-----------------------------
1         1           something
2         1           something
3         2           something
4         2           something
5         3           something 
```

我想创建一个存储过程，它将获得 2 个结果集，一个包含给定错误组的所有错误，一个包含该组中所有错误的所有注释。该`BELONGSTO`字段指定错误所属的组。因此，如果我想运行此查询，为错误组 ID 传递 1，我希望得到这个结果

```
RESULT SET 1

ID        NAME         DESCRIPTION         BELONGSTO
----------------------------------------------------
1         Bug1         something           1
2         Bug2         something           1

RESULT SET 2

ID        BUGID        COMMENT
------------------------------
1         1           something
2         1           something
3         2           something
4         2           something 
```

我想我可能需要使用临时表，但我不确定如何执行此操作。这是我到目前为止所拥有的（这不起作用）

```
ALTER PROCEDURE bugs_getAllBugGroupData
    @groupid int
AS
BEGIN
    DECLARE @bugids TABLE (id int)
    INSERT @bugids
    SELECT id FROM bugs
    WHERE belongsto = @groupid

    SELECT * FROM bugs WHERE belongsto = @groupid
    SELECT * FROM bugs_comments WHERE bugid IN (@bugids)
END
GO 
```

我得到的错误消息是“必须在最后一个 select 语句中声明标量变量@bugids”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T01:13:08.900

这条线

```
SELECT * FROM bugs_comments WHERE bugid IN (@bugids) 
```

必须

```
SELECT * FROM bugs_comments WHERE bugid IN (SELECT id FROM @bugids). 
```

但是，您不需要辅助表。您可以使用连接直接查询：

1.

```
SELECT * FROM bugs WHERE belongsto = @groupid 
```

2.

```
SELECT * FROM bugs_comments AS bc
    INNER JOIN bugs AS b ON (bc.bugid = b.id)
    WHERE b.belongsto = @groupid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T01:17:07.177

更有效的方法是...

```
SELECT  ID,
        Name,
        Description,
        BelongsTo
  FROM  bugs
 WHERE  BelongsTo =  @groupid 

SELECT  bc.ID,
        bc.BugID,
        bc.Comment
  FROM  bug_comments bc
        JOIN bug b ON b.BugId = bc.BugID AND b.BelongsTo = @groupid 
```

# mysql - 如何使用 phpMyAdmin 和外键制作音乐库？

> ID：10592972
> 
> 赞同：1
> 
> 时间：2012-05-15T01:10:39.290
> 
> 标签：mysql, sql, phpmyadmin

[在音乐库 MySQL 数据库](https://stackoverflow.com/questions/9234182/music-library-mysql-database)遇到困难后，我需要帮助尝试设置外键。我有多个表：专辑、歌曲、流派、音乐视频、独奏和组。每个特定表都有 ids、names 和其他列。每个 id 都是 int(11) 的主键。Solo 和 Group 代表独奏艺术家和团体。（soloID 和 groupID 是他们的主键）

### 再看一遍

这可能是我设置数据库的方式。

```
 Solo
•   djuIDs – int(11)
•   profilepic – varchar(255)
•   engname – varchar(255)
•   korname – varchar(255)
•   engbn – varchar(255)
•   occupation – set
•   recordlabel – varchar(255)
•   debut  - date
•   dateofbirth – date
•   officialsite -  varchar(255)
•   sitename –varchar(255)
•   page – varchar(255)
Group
•   djuIDs – int(11)
•   profilepic – varchar(255)
•   engname – text
•   korname – text
•   members – text
•   recordlabel – varchar(255)
•   debut – date
•   officialsite -  varchar(255)
•   sitename –varchar(255)
•   page – varchar(255)
Albums
•   albumID – int(11)
•   albumpic – varchar(255)
•   albumthpic – varchar(255)
•   albumTitle – varchar(255)
•   performer – varchar(255)
•   type – set (ex: ep, sp, studio)
•   titletrack – varchar(255)
•   genre
•   releasedate – date
•   distributor – varchar(255)
•   page – varchar(255)
Songs
•   songID – int(11)
•   albumpic – varchar(255)
•   tracknum – int(11)
•   songTitle – varchar(255)
•   performer – varchar(255)
•   album – varchar(255)
•   page – varchar(255)
Music Videos
•   mvID – int(11)
•   title – varchar(30)
•   mvpic – varchar(255)
•   performer – varchar(255)
•   album – varchar(255)
•   releasedate – date
•   vURL – varchar(255)
Genres
•   genreID – int(11)
•   genreName –varchar(30)
•   information – varchar(255) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T01:15:16.403

我认为这是我较早的答案之一...如果您已用`INT(11)`作主键，则外键定义应类似于下表的`Artists`and定义`Albums`：

```
CREATE TABLE Artists (
  /* will later be defined as a FK Albums.artistid */
  id INT NOT NULL PRIMARY KEY,
  name VARCHAR(1024) NOT NULL,
  description TEXT
) ENGINE=InnoDB;

CREATE TABLE Albums (
  id INT NOT NULL PRIMARY KEY,
  artistid INT NOT NULL,
  release_date DATETIME,
  genreid INT NOT NULL,
  picture BLOB,
  FOREIGN KEY (artistid) REFERENCES Artists (id),
  FOREIGN KEY (genreid) REFERENCES Genres (id)
)  ENGINE=InnoDB; 
```

由于您已将所有 PK 列定义为`INT(11)`，因此请确保在相关表中使用相同的数据类型。例如上面，`artistid INT NOT NULL`假设引用的列`Artists`定义为`id INT NOT NULL`.

在上面的定义中，我将 FK 列设为`NOT NULL`，但这并不是绝对必要的。例如，您可以拥有一张包含 NULL 艺术家的专辑。如果您认为这是一种可能性，您应该能够`NOT NULL`在列定义中省略 。

# android - 我如何将 gldrawelements 用于许多正方形？

> ID：10592974
> 
> 赞同：1
> 
> 时间：2012-05-15T01:10:44.423
> 
> 标签：android, opengl-es

我正在开发一个 2D`Open GL`游戏，我必须在屏幕上为瓷砖地图绘制许多正方形，与`glTexCoordPointer`纹理不同。

现在，我不知道如何`Gldrawelements`用于绘制许多正方形，如果我想绘制许多正方形，这将是索引的结构？

而且，我怎样才能把每个数组（顶点），其中包含每个正方形的坐标`vertexbuffer`？

此外，是否可以`glTexCoordPointer`在一次调用该方法时为每个方格设置不同的设置，或者是否需要像 with 这样的循环`GlDrawArrays`？但是，我想使用，因为我不想为每个方块`gldrawelements`创建一个执行多次的循环，我的下降明显。`gldrawarrays``fps`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:57:33.670

如果正方形彼此相邻，则使用四边形（或等效的三角形条）：

![相邻四边形的四边形](../Images/5d07f888ecd86de7c930522b56f4501c.png)

如果正方形不相交，只需使用四边形

![在此处输入图像描述](../Images/0e73dc58cfc319844e68ed989228a609.png)

在这种情况下，您还可以通过添加退化四边形（三角形）来使用四边形（等效于三角形）：

```
GLushort indices[] = {A, B, C, D, D, E, E, F, G, H, H, I, I, J, K, L} 
```

顶点位置相同但纹理坐标不同的两个正方形必须用不同的四边形表示。

# iphone - 无法下载应用程序 - 此时无法下载“APP”

> ID：10592975
> 
> 赞同：10
> 
> 时间：2012-05-15T01:10:56.407
> 
> 标签：iphone, download, installation, icloud, testflight

我有我的应用程序的“PLUS”版本和普通版本。我使用不同的目标对它们进行归档。我将 ipa 上传到 TestFlight（也上传到我的 Hockey 服务器），并且“PLUS”版本总是下载得很好。但是普通版总是给我“无法下载应用程序”的错误。

我根本没有在两个版本之间更改代码。我在构建之间进行“清理”。代码的唯一区别是我定义了一个“PLUS_VER”宏来更改一些代码。与这两个目标相关的资源文件也有一些差异。这过去从来没有发生过，但是每次我使用这个当前版本构建时，这个问题一直是一致的。

有任何想法吗？

<><

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T01:57:19.183

感谢您提供有关查看控制台的提示。在安装时，我看到配置文件与 iCloud 无处不在的键值存储权利不一致。我们将在此版本中启用 iCloud。

我进入并“编辑”了每个配置文件（基本上什么都不做......）并重新下载它们并解决了问题。

有点烦人的是，Apple 不会使您的配置文件无效或让您知道它至少需要更新...... :-/

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-21T17:10:21.327

我正在与同样的问题作斗争，这个问题在谷歌上排名第二。该错误基本上意味着无法安装该应用程序是有原因的。有很多不同的原因可能是这种情况。找出答案的唯一方法是在安装应用程序时查看控制台，那里会出现更有用的错误消息。

如果您可以访问机器，您可以使用 Xcode 中的管理器窗口来查看连接设备的控制台。如果您无权访问机器，请让用户安装 iPhone 配置实用程序。可以从 Apple 下载 Windows 和 Mac 版本。然后他们可以看到控制台并将输出通过电子邮件发送给您。

就我而言，我使用 Testflight 来安装开发版本。我认为一定有一些配置问题并尝试了很多不同的东西。最后，当我看到控制台输出时，很明显我们正在尝试在 iOS 5 设备上安装 iOS 6 应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T12:11:25.727

我在使用 OTA 时遇到了问题（使用 XCode 4.3.3，我猜它在 XCode 4.xx 中是一样的）。

当我使用发布配置文件时，它只允许我在开发设备上安装应用程序。当我更改方案中的设置时（通过单击方案名称并选择“编辑方案...”。在左行，有这个方案设置，我必须单击“存档”并更改“构建配置”到“调试”）。比我能够通过我的开发配置文件使用 OTA 分发应用程序。

希望它可以帮助某人

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T01:20:44.043

检查`Info.plist`服务器上的安装 plist 中的应用程序包 ID 是否匹配，安装 URL 是否指向正确的 plist，安装 plist 是否指向正确的 IPA URL。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-10T02:36:14.233

我刚刚遇到问题，似乎 testflight 已关闭。它从一开始就没有显示在[系统状态](https://developer.apple.com/system-status/)中，但他们更新了它以反映我遇到问题的时期。

[![试飞](../Images/5ae4db28e217ae6ffc22d67fd2caa8bd.png)](https://i.stack.imgur.com/BYNd0.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-28T05:00:54.153

正如其他答案中所说，您需要检查控制台以确定。

例如，我发现以下不言自明的错误：

`The bundle being installed with bundle ID com.foo.myapp is authorized by a free provisioning profile, but apps validated by those are not allowed to be installed from this source`

# jquery - 图像滑块...下一个和上一个按钮不起作用

> ID：10592981
> 
> 赞同：0
> 
> 时间：2012-05-15T01:12:16.857
> 
> 标签：jquery, slider, jcarousel

我无法让我的 jquery 图像滑块滚动到下一组图像。当我单击下一个箭头时，它不断将我带回页面顶部。我也不确定下一行图像是否设置正确。对不起，但我是使用 jquery 的新手。

html

```
<div id="wrapper2">
<label style="color: #5C5C5C;display: block; font-weight: bold; font-size:16px; text-align: center;margin-bottom:0px;padding-bottom:20px;">Reaching our Goal is proud to partner with great organizations</label>
        <div id="thumbs-wrapper2">
            <div id="thumbs">
                <a class="selected" href="#2"><img src="/assets/images/ROG_p.jpg" /></a>
                <a href="#"><img src="/assets/images/gametime_p.jpg" /></a>
                <a href="#"><img src="/assets/images/american_p.jpg" /></a>
                <a href="#"><img src="/assets/images/bfs_p.jpg" /></a>
                <a href="#"><img src="/assets/images/vballfestival_p.jpg" /></a>
                <a href="#"><img src="/assets/images/yfbca_p.jpg" /></a>
                <a href="#"><img src="/assets/images/sportsattack_p.jpg" /></a>
                <a href="#"><img src="/assets/images/ROG_p.jpg" /></a>
                <a href="#"><img src="/assets/images/gametime_p.jpg" /></a>
                <a href="#"><img src="/assets/images/american_p.jpg" /></a>
                <a href="#"><img src="/assets/images/bfs_p.jpg" /></a>
                <a href="#"><img src="/assets/images/vballfestival_p.jpg" /></a>
                <a href="#"><img src="/assets/images/yfbca_p.jpg" /></a>
                <a href="#"><img src="/assets/images/sportsattack_p.jpg" /></a>
            </div>
            <a id="prev" href="#"></a>
            <a id="next" href="#"></a>
        </div>
</div> 
```

脚本

```
$('#thumbs').carouFredSel({
        responsive: true,
        auto: true,
        prev: '#prev',
        next: '#next',
        items: {
            visible: 
             min: 2,
             max: 4
            },
            width: 150,
            height: '25%'
    });
    });

    $('#thumbs a').click(function() {
        $('#carousel').trigger('slideTo', '#'+this.href.split('#').pop());
        $('#thumbs a').removeClass('selected');
        $(this).addClass('selected');
        return false;
    }); 
```

css

```
#wrapper2 {
    position: relative;
    width: 100%;
    top: 50px;
}
#carousel, #thumbs {
    overflow: hidden;
    height: 62px;
}

#carousel span, #carousel img,
#thumbs a, #thumbs img  {
    display: block;
    float: left;
}
#carousel span, #carousel a,
#thumbs span, #thumbs a {
    position: relative;
}
#carousel img,
#thumbs img {
    border: medium none;
    height: 58px;
    left: 0;
    position: relative;
    top: 0;
    width: 100px;
}
#carousel img.glare,
#thumbs img.glare {
    width: 102%;
    height: auto;
}

#thumbs-wrapper2 {
    padding: 20px 40px;
    position: relative;
    width: 73%;
    margin: -18px 0 0 162px;
    height: 90px;
}
#thumbs a {
    height: 58px;
    margin: 0 10px;
    overflow: hidden;
    width: 100px;
    border: 2px solid #899;
    border-radius: 10px;
    -webkit-transition: border-color .5s;
    -moz-transition: border-color .5s;
    -ms-transition: border-color .5s;
    transition: border-color .5s;

}
#thumbs a:hover, #thumbs a.selected {
    border-color: #566;
}

#prev, #next {
    display: block;
    height: 50px;
    margin: -38px 0 0 -35px;
    position: absolute;
    top: 50%;
    width: 50px;
}
#prev {
    background-image: url(/assets/images/left.jpg);
    background-position: 0 0;
    left: 10px;
}
#next {
    background-image: url(/assets/images/right.jpg);
    background-position: -50px 0;
    right: 33px;
}           
#prev:hover { 
    background-position: 0 0;               
}
#next:hover {
    background-position: -50px 0;               
}

#prev.disabled, #next.disabled {
    display: none !important;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T01:14:34.767

在`href="#"`你的下一个和上一个标签中导致它。删除它们或将其更改为`href="javascript:void(0)"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T01:15:02.410

确保您的 javascript 在 html 下方，或使用`$(function()`

```
$(function() {
   $('#thumbs').carouFredSel({
        responsive: true,
        auto: true,
        prev: '#prev',
        next: '#next',
        items: {
            visible: 
             min: 2,
             max: 4
            },
            width: 150,
            height: '25%'
    });
    });

    $('#thumbs a').click(function() {
        $('#carousel').trigger('slideTo', '#'+this.href.split('#').pop());
        $('#thumbs a').removeClass('selected');
        $(this).addClass('selected');
        return false;
    });
}); 
```

`#`此外，大多数浏览器的默认行为是在看到in时将您带到页面顶部，您可以通过调用传入的对象`href`来告诉它停止该行为`.preventDefault()``event``click()`

```
$('#thumbs a').click(function(e) {
    e.preventDefault(); // add this
    $('#carousel').trigger('slideTo', '#'+this.href.split('#').pop());
    $('#thumbs a').removeClass('selected');
    $(this).addClass('selected');
    return false;
}); 
```

编辑：问题是由语法错误引起的：

```
$('#thumbs').carouFredSel({
        responsive: true,
        auto: true,
        prev: '#prev',
        next: '#next',
        items: {
            visible: // here you forgot to assign anything to visible
             min: 2,
             max: 7 
```

# python - 这行得通吗？十六进制编辑文件并将inet_aton更改为inet_pton

> ID：10592990
> 
> 赞同：0
> 
> 时间：2012-05-15T01:13:16.423
> 
> 标签：python, sockets, solaris

我正在尝试将 python 脚本移植到旧的 Solaris 10 机器上。我从 sunfreeware 下载并安装了所有必需的软件包。它在导入行 (import CGIHTTPServer) 中崩溃并显示以下错误消息：

> ImportError：ld.so.1：python：致命：重定位错误：文件/usr/local/lib/python2.6/lib-dynload/_socket.so：符号inet_aton：找不到引用的符号

我尝试使用 libresolve 重新编译，但我不想这样做，所以我将文件 _socket.so 复制到我的 linux 机器并使用 ghex2 进行编辑。我用inet_pton 替换了inet_aton，因为我读到solaris 使用inet_pton。我还在[python 文档中读到这两个系统调用是相似的](http://docs.python.org/release/2.5.2/lib/module-socket.html)。

我将文件 _socket.so 复制回原始目录，备份旧文件并替换为修补过的文件。它正在运行，到目前为止看起来还不错。

你认为python socket模块将来会坏吗？

做`inet_aton`和`inet_pton`返回结构兼容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T01:39:12.307

不; `inet_aton`并且`inet_pton`不兼容。看看原型：

```
int inet_aton(const char *, struct in_addr *);
int inet_pton(int, const char *, void *); 
```

完全不同。试图将一个换成另一个只会导致痛苦和痛苦（并且很可能会导致崩溃）。如果您已经这样做并且它似乎正在工作，那可能是因为`inet_aton`没有调用使用的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T01:55:14.900

*你认为python socket模块将来会坏吗？*

Yes. inet-aton and inet_pton do not use the same number and type of arguments. Your code will likely break or at least dysfunction the first time this php function is called. If you (or a library you use) never call it, you are probably safe.

# .net - 在 VS2010 中调试时 UI 阻塞

> ID：10592995
> 
> 赞同：2
> 
> 时间：2012-05-15T01:14:23.997
> 
> 标签：.net, winforms, debugging

我在运行调试器时 UI 阻塞的 .NET Forms 应用程序有一个难以诊断的问题。

该块是随机的，并且在被阻止时，如果我单击调试器中的暂停按钮，它实际上并没有完成暂停，直到块释放。

我已经通过运行它在调试器之外尝试了该程序，它不会阻塞并且运行良好。

我尝试使用探查器（蚂蚁）来查找块，但在这种状态下它也不会阻止，探查器报告也没有显示任何值得注意的内容。

应用程序运行后台线程来处理套接字连接超时（使用 Threading.Timer 这些不与 UI 通信）。

网络操作正在使用`BeginXXX`调用。

我很难找到这个问题，因为它不会发生在用户身上，但是当这些块似乎发生时，很难尝试调试程序的其他方面。

UI 的主要焦点是一个用户控件，显示一个机器网格，它们的连接状态`POSTerminal`从 UI 线程的 State 对象 () 中检索，

有什么我可以看的可能找到调试器/UI阻塞之间的连接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T03:18:38.863

这是困难的一个。我认为本系列中的视频可以为您提供一些想法来诊断正在发生的事情：

[http://channel9.msdn.com/Series/-NET-Debugging-Stater-Kit-for-the-Production-Environment/Diagnosing-Application-Issues-01](http://channel9.msdn.com/Series/-NET-Debugging-Stater-Kit-for-the-Production-Environment/Diagnosing-Application-Issues-01)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T00:31:56.980

我最终找到了这个。发生的事情是多个线程引发的事件正在返回主窗体。

在表单中它正在检查`InvokeRequired`然后`BeginInvoke`这个事件回到主窗体线程。问题是事件引发中存在一个错误，该错误引发了数千个事件，并且每个事件都被调用，这在表单的检查中具有锁定。因此导致程序（和调试器）冻结。

我没想到调试器会冻结，但是直到所有锁/调用都被处理之后，调试器中的暂停/停止才能被按下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T08:58:01.237

您是否尝试过检查 VS Debug->Windows->Threads 窗口？在那里，您应该能够看到您的线程的状态以及能够“切换到线程”以暂停该特定线程。

# java - url重定向时android webview没有调用onPageFinished

> ID：10592998
> 
> 赞同：1
> 
> 时间：2012-05-15T01:14:36.857
> 
> 标签：java, android, webview

我有这个 android 应用程序，它使用 java-javascript 桥从浏览的页面中获取信息。

它适用于所有其他链接，但有重定向时除外。当页面加载时，我会显示一个全屏半透明对话框，加载完成后我会隐藏对话框。

问题是对话框出现了两次，一个在另一个之上，但页面最终重定向并完全加载，最后一个对话框仍然停留在屏幕上并冻结整个应用程序，除非我强制关闭它并重新安装。

我想知道是否有人有相同的经验，并且任何解决此问题的提示和技巧将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T07:10:03.907

onPageFinished 回调仅在页面完成加载时调用。当发生重定向时，webview 会跳转到下一个地址，而不会完成当前请求。

您的问题的解决方案可能是设置一个标志，告知何时显示“加载”对话框。如果标志为 ON，则不会显示新标志，从而避免了多个对话框的问题。

如果想了解更多关于 WebView 的内部工作原理，我建议查看 Android 的源代码，特别是 webkit 部分：

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.7_r1/android/webkit/](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.7_r1/android/webkit/)