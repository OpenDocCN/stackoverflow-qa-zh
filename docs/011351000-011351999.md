# StackOverflow 问答 11351000-11351999

# xml - xsl 模板匹配

> ID：11351000
> 
> 赞同：0
> 
> 时间：2012-07-05T19:13:43.637
> 
> 标签：xml, xslt

我正在使用带有 xml 的 xsl 创建 xml

这是 XML 的代码

```
<?xml version="1.0" encoding="utf-8"?>
<example>
<sample>245 34</sample>
<sample1>24 36</sample1>
</example> 
```

在 XSL 的帮助下，我想拆分 xml 值

当我在谷歌检查时，我看到有一种方法可以使用 substring-before 或 substring-after(query)

但我有点困惑如何带来如下值

```
<example>
<text>245</text>
<text>34</text
<text>24</text>
<text>36</text>
</example> 
```

任何人都可以帮助我如何带来上述价值

谢谢米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:37:16.153

在这种情况下，最简单的方法是在空格分隔符上进行拆分。如果您受限于 XSLT 1.0，最简单的方法是通过 EXSLT 库（默认情况下，在许多 XSLT 实现中可用，例如 PHP）。

您可以在[此 XMLPlayground](http://www.xmlplayground.com/B0POKh)上运行以下命令（请参阅输出**源**）。

```
<!-- root -->
<xsl:template match='/'>
    <example>
        <xsl:apply-templates select='*' />
    </example>
</xsl:template>

<!-- match sample nodes -->
<xsl:template match="example/*">
    <xsl:apply-templates select='str:split(., " ")' />
</xsl:template>

<!-- match token nodes (from EXSLT split()) -->
<xsl:template match='token'>
    <text><xsl:value-of select='.' /></text>
</xsl:template> 
```

如 Playground 所示，要使用 EXSLT（前提是您可以使用它），您需要在开始`xsl:stylesheet`标记中声明其命名空间。例如，要使用它的字符串库（就像我们在这里使用的那样`split()`），你可以输入：

```
xmlns:str="http://exslt.org/strings"
extension-element-prefixes="str" 
```

**[编辑]** - 如果您坚持使用**子字符串方法**，这是可能的，但更冗长，因为没有生成节点集的能力（这是 EXSLT`split()`所做的），因此，在该节点集上应用模板，唯一的你包里的技巧是递归——一个模板调用自己的次数与其中的空间特征一样多。

您可以在[这个（单独的）XMLPlayground上运行它](http://www.xmlplayground.com/QAG203)

```
<!-- root child nodes -->
<xsl:template match='example/*'>
    <xsl:call-template name='output'>
        <xsl:with-param name='source' select='.' />
    </xsl:call-template>
</xsl:template>

<!-- output - expects two params: -->
<!-- @output_str - the sub-string to output to a <text> node this time (has value only on self-call, i.e. recursion -->
<!-- @source - the source string on which to recurse, for more spaces in the string -->

<xsl:template name='output'>

    <xsl:param name='output_str' />
    <xsl:param name='source' />

    <!-- output something this time? -->
    <xsl:if test='$output_str'>
        <text><xsl:value-of select='$output_str' /></text>
    </xsl:if>

    <!-- recurse... -->
    <xsl:if test='$source'>
        <xsl:choose>

            <!-- $source contains spaces - act on the string before the next space -->
            <xsl:when test='contains($source, " ")'>
                <xsl:call-template name='output'>
                    <xsl:with-param name='output_str' select='substring-before($source, " ")' />
                    <xsl:with-param name='source' select='substring-after($source, " ")' />
                </xsl:call-template>
            </xsl:when>

            <!-- source doesn't contain spaces - act on it in its entirety -->
            <xsl:otherwise>
                <xsl:call-template name='output'>
                    <xsl:with-param name='output_str' select='$source' />
                </xsl:call-template>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:if>
</xsl:template> 
```

# jsf - 仅插入数字作为输入

> ID：11351002
> 
> 赞同：1
> 
> 时间：2012-07-05T19:13:44.747
> 
> 标签：jsf

目前我有一个`<h:inputText>`

```
<h:outputLabel value="#{locale.nroEmployees}:"/>
<h:inputText value="#{companyEditBean.companyEmployeesAmount}"
          disabled="#{not companyEditBean.editingAllowed}">
</h:inputText> 
```

我怎样才能实现，用户只能在输入字段中输入数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:54:00.947

您可以在之后对其进行过滤以仅接受数字，或执行类似以下操作：

```
<h:inputText value="#{companyEditBean.companyEmployeesAmount}"
      disabled="#{not companyEditBean.editingAllowed}"
      onkeypress="if(event.which &lt; 48 || event.which &gt; 57) return false;"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-05T12:02:49.863

作为替代方法，您可以使用 primeface 来实现此目的：

```
<h:form>
<h:panelGrid columns="2">   
        <h:outputText value="Number Input"/>   
        <h:inputText id="txt_" />   
</h:panelGrid> 
<p:keyFilter for="txt_" mask="num" /> 
</h:form> 
```

或者，使用 primeface 扩展，您可以执行此操作（假设您添加了所需的 jar 并将扩展命名空间定义为 pe）

```
<p:inputText id="txt_" required="false" label=""
        value="#{beanclass.blablamethod}" maxlength="10">
        <f:validateLength minimum="10" for="txt_" />
        <pe:keyFilter regEx="/[\d\-]/"></pe:keyFilter>
</p:inputText> 
```

# javascript - f:ajax onerror 在监听器之前调用

> ID：11351004
> 
> 赞同：1
> 
> 时间：2012-07-05T19:13:52.017
> 
> 标签：javascript, ajax, jsf, jsf-2, mojarra

我有一个简单的表单和一个非常简单的 bean 来监听 ajax 事件。这是一些代码：

```
<script type="text/javascript">
    function myfunction() {
         alert('error');
    }
</script>
<h:commandButton  id="someid" value="somevalue" >
   <f:ajax event="click" execute="someids" listener="#{MyBean.fireEvent}" onerror="myfunction()"  />    
</h:commandButton> 
```

我在调试中使用 eclipse 来查看何时`MyBean.fireEvent`被调用，据我所知，它在`onerror="myfunction()"`执行后被调用。这可能是什么原因？

我正在使用带有 Resin 的 mojarra 2.0。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T16:18:14.060

看起来像格式问题，也许试试：

```
<script type="text/javascript">
  function myfunction(error) {
     alert(error.description);
  }
</script>

<h:commandButton  id="someid" value="somevalue" >
  <f:ajax event="click" 
       execute="someids" 
       listener="#{MyBean.fireEvent}" 
       onerror="myfunction" />    
</h:commandButton> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T18:50:36.740

`onerror`属性必须指向函数名本身，而不是函数的返回值。

所以，如果你更换

```
onerror="myfunction()" 
```

经过

```
onerror="myfunction" 
```

那么它应该按预期工作。

# php - 从 YouTube URL 参数中提取分钟和秒（例如“02m12s”）

> ID：11351006
> 
> 赞同：3
> 
> 时间：2012-07-05T19:14:00.120
> 
> 标签：php, regex, string, youtube

从 youtube 网址中提取分钟和秒的最佳方法？

[http://www.youtube.com/watch?v=TjTbNWhsG28#t=1m40s&foo=1&bar=2](http://www.youtube.com/watch?v=TjTbNWhsG28#t=1m40s&foo=1&bar=2)

我需要的字符串在哪里`1m40s`，可以使用“#t=”或“&t=”。

也可能在最后（或在中间但不太可能。我会排除那个）

[http://www.youtube.com/watch?v=TjTbNWhsG28?foo=1&bar=2#t=1m40s](http://www.youtube.com/watch?v=TjTbNWhsG28?foo=1&bar=2#t=1m40s)

'xmxs' 中的 'x' 可以是一位或两位数，并且只能传递其中一个

"#t=10m3s" 或 "&t=09m12s"

它们都是可选的，如

"#t=10m" 或 "&t=3s" 或 "#t=10m03"s

YouTube 现在接受 '#t=' 和 '&t=' 作为这个参数，所以理想情况下我需要同时考虑这两个参数。用户将这些粘贴到博客的评论部分，输出生成嵌入。我当前使用的脚本不会解析这些时间值。

一旦我知道了分钟和秒，我会将总秒数传递给使用“开始”参数生成嵌入代码的脚本。 [https://developers.google.com/youtube/player_parameters#start](https://developers.google.com/youtube/player_parameters#start)

我需要一个 PHP 解决方案。我假设和正则表达式的一个很好的组合`substr()`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:16:55.887

使用这个正则表达式`((#)|(\&))t=(\d+m)?(\d+s)?`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-31T13:40:26.497

我发现接受答案的代码非常混乱。它也不包括几个小时。我也认为 YouTube 删除了`#`URL。我在我的[Advanced Responsive Video Embedder](http://wordpress.org/plugins/advanced-responsive-video-embedder/) WordPress 插件中编写了这个函数。与公认的答案相比，我认为它的编码非常简洁，而且更容易理解。

我希望这会对某人有所帮助。

**2019 年更新通知 (int) 部分去掉了 h/m/s 字符。**我愿意接受改进的建议。

```
/**
 * Calculates seconds based on youtube times
 *
 * @author    Nicolas Jonas
 * @license   GPLv3
 * @link      http://nextgenthemes.com
 *
 * @param     string $yttime   The '1h25m13s' part of youtube URLs
 *
 * @return    int   Starttime in seconds
 */
function youtube_time_to_seconds( $yttime ) {

    $matches['h'] = 0;
    $matches['m'] = 0;
    $matches['s'] = 0;

    $pattern = '/' .
        '(?<h>[0-9]+h)?' .
        '(?<m>[0-9]+m)?' .
        '(?<s>[0-9]+s)?/';

    preg_match( $pattern, $yttime, $matches );

    return ( (int) $matches['h'] * 60 * 60 ) +
        ( (int) $matches['m'] * 60 ) +
        (int) $matches['s'];
} 
```

参考的旧代码。不考虑案例 1h2s：

```
/**
 * Calculates seconds based on youtube times
 *
 * @author    Nicolas Jonas
 * @license   GPLv3
 * @link      http://nextgenthemes.com
 *
 * @param     string $yttime   The '1h25m13s' part of youtube URLs
 *
 * @return    int   Starttime in seconds
 */
function youtube_time_to_seconds( $yttime ) {

    $format = false;
    $hours  = $minutes = $seconds = 0;

    $pattern['hms'] = '/([0-9]+)h([0-9]+)m([0-9]+)s/'; // hours, minutes, seconds
    $pattern['ms']  =          '/([0-9]+)m([0-9]+)s/'; // minutes, seconds
    $pattern['h']   = '/([0-9]+)h/';
    $pattern['m']   = '/([0-9]+)m/';
    $pattern['s']   = '/([0-9]+)s/';

    foreach ( $pattern as $k => $v ) {

        preg_match( $v, $yttime, $result );

        if ( ! empty( $result ) ) {
            $format = $k;
            break;
        }
    }

    switch ( $format ) {
        case 'hms':
            $hours   = $result[1];
            $minutes = $result[2];
            $seconds = $result[3];
            break;
        case 'ms':
            $minutes = $result[1];
            $seconds = $result[2];
            break;
        case 'h':
            $hours = $result[1];
            break;
        case 'm':
            $minutes = $result[1];
            break;
        case 's':
            $seconds = $result[1];
            break;
        default:
            return false;
    }

    return ( $hours * 60 * 60 ) + ( $minutes * 60 ) + $seconds;
} 
```

来源：[Github](https://github.com/nextgenthemes/advanced-responsive-video-embedder/blob/master/public/class-advanced-responsive-video-embedder-public.php#L1664-L1716)

可以这样使用它：

`parse_url`它使用而`parse_str`不是正则表达式整个 URLS 来解析 URL 和参数，这是更好和更可靠的方法。

```
$urls[] = 'http://youtu.be/vrXgLhkv21Y';
$urls[] = 'http://youtu.be/vrXgLhkv21Y?t=foobar';
$urls[] = 'http://youtu.be/vrXgLhkv21Y?foo=bar&t=4s';
$urls[] = 'http://youtu.be/vrXgLhkv21Y?t=1h19m14s';
$urls[] = 'http://youtu.be/vrXgLhkv21Y?t=19m14s';
$urls[] = 'http://youtu.be/vrXgLhkv21Y?t=2h';
$urls[] = 'http://youtu.be/vrXgLhkv21Y?t=5m';
$urls[] = 'http://youtu.be/vrXgLhkv21Y?t=50s';

#extract the part after the &t= in urls and run the function if exists 
foreach( $urls as $url ) {

    $parsed_url = parse_url( $url );

    if ( empty( $parsed_url['query'] ) )
        continue;

    parse_str( $parsed_url['query'], $args );

    if ( empty( $args['t'] ) )
        continue;

    echo youtube_time_to_seconds( $args['t'] ) . "\n";
} 
```

输出：

```
4
4754
1154
7200
300
50 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T19:30:17.257

```
$url = "http://www.youtube.com/watch?v=TjTbNWhsG28#t=40m&foo=1&bar=2";
$regex_pattern1 = "([#|\&]+t+\=+[0-9]+[m]+[0-9]+[s])"; // minutes and seconds
$regex_pattern2 = "([#|\&]+t+\=+[0-9]+[m])"; // only minutes
$regex_pattern3 = "([#|\&]+t+\=+[0-9]+[s])"; // only seconds
$pattern_used = null;
if(!preg_match_all($regex_pattern1, $url, $time)) // not found "#t=XmXs"
{
    if(!preg_match_all($regex_pattern2, $url, $time)) // not found "#t=Xm"
    {
        if(!preg_match_all($regex_pattern3, $url, $time)) // not found "#t=Xs"
            die("Invalid URL");
        else $pattern_used = 3;
    }   
    else $pattern_used = 2;
}
else $pattern_used = 1;
$time = substr($time[0][0], 3, strlen($time[0][0])); // deleting "#t="

//echo $time; // prints "1m40s" or "40s" if only seconds are given

// --------------
$pattern_minutes = "([0-9]+[s])";
$pattern_seconds = "([0-9]+[m])";
if($pattern_used == 1) // we have both minutes and seconds defined
{
    $minutes = preg_split($pattern_minutes, $time);
    $seconds = preg_split($pattern_seconds, $time);

    $array = array("minutes" => substr($minutes[0], 0, -1), 
                   "seconds" => substr($seconds[1], 0, -1));

    /* we have the following array now:
    array (size=2)
        'minutes' => string '1' (length=1)
        'seconds' => string '40' (length=2)*/
}
else
{
    if($pattern_used == 2) $time2 = preg_split($pattern_minutes, $time);
    else $time2 = preg_split($pattern_seconds, $time); 
    $time2 = substr($time2[0], 0, -1);
    echo $time2; // prints "40"
} 
```

# c++ - 如何在 webkit 浏览器控件中返回指向 JavaScript 的 IDispatch 指针

> ID：11351008
> 
> 赞同：1
> 
> 时间：2012-07-05T19:14:01.510
> 
> 标签：c++, windows, com, webkit, controls

我已经能够将 webkit 控件嵌入到 windows (c++) 应用程序中，并注册了我的自定义对象以供 javascript 访问（使用 JSGlobalContextRef、JSObjectMake 等）。成功测试了从 JavaScript 到 c++ 层的调用，用于返回字符串或 int 的简单方法。

现在我想公开一种自定义方法，该方法将在内部使用 COM 库并最终返回 IDispatch 指针（包装为 VARIANT 或其他方式）。如何将 IDispatch 指针转换为 JSValueRef、JSObjectRef 或 JavaScript（在 webkit 内部）可以理解的任何其他内容？

在 IE 浏览器控件世界中，我可以简单地通过“getExternal”（IDocHostUIHandler 接口）公开 IDispatch，甚至可以将其包装在 VARIANT 中并作为自定义“外部”对象内任何其他 API 的 Out-Param 返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T20:51:14.873

这个问题没有一个简单的 n 步答案。我通过 Google 搜索找到了解决类似问题的代码，即从 SpiderMonkey 访问 COM 对象的问题。我可以给你你可能采取的方法，我不再有链接的实际代码，无论如何它是特定于 SpiderMonkey 的。

您的 Javascript 引擎有一些方法可以使用您显然已经在使用的自定义对象来扩展它。您需要定义您正在实现的这个新方法返回另一种类型的自定义对象，并将 IDispatch 指针放在该自定义对象的自定义数据中。您的 JS 引擎不会“理解”或关心自定义对象是 ActiveX 对象的外观。您只需设置这种类型的自定义对象，以便在调用其 Frob 方法时，您的外观将调用委托给 IDispatch 上的 Frob DISPID。

如果这个答案不清楚，给我一个线索，我们至少说的是同一种语言。

# javascript - 排水甜甜圈图的自定义类

> ID：11351010
> 
> 赞同：2
> 
> 时间：2012-07-05T19:14:10.497
> 
> 标签：javascript, class, methods, scope, raphael

我正在开发一个需要圆形用户界面的项目。该界面将使用 Raphael.js 创建环（圆环图样式），每个部分都是一个菜单项。选择后，将生成一个新环，其中包含下一个任务所需的选择数量。

所以我遇到的问题是创建实际的 javascript 类来执行此操作。作为单独的功能，它工作得很好，但效率不高。如何调用新对象并让戒指出现在屏幕上？这是我正在使用的代码：

```
var paper = Raphael('paper', 600, 600);
function RingObj(centerX, centerY, innerR, outerR, startAngle, endAngle, sections) {
this.centerX = centerX;
this.centerY = centerY;
this.innerR = innerR;
this.outerR = outerR;
this.startAngle = startAngle;
this.endAngle = endAngle;
this.sections = sections;

this.donutRing = function(){        
this.endAngle = 360 / this.sections;
this.endAng = this.endAngle;
paper.setStart();
for (i = 1; i <= this.sections; i++){
this.arc = function(){
radians = Math.PI / 180,
largeArc = +(this.endAngle - this.startAngle > 180);
outerX1 = this.centerX + this.outerR * Math.cos((this.startAngle-90) * radians),
outerY1 = this.centerY + this.outerR * Math.sin((this.startAngle-90) * radians),
outerX2 = this.centerX + this.outerR * Math.cos((this.endAngle-90) * radians),
outerY2 = this.centerY + this.outerR * Math.sin((this.endAngle-90) * radians),
innerX1 = this.centerX + this.innerR * Math.cos((this.endAngle-90) * radians),
innerY1 = this.centerY + this.innerR * Math.sin((this.endAngle-90) * radians),
innerX2 = this.centerX + this.innerR * Math.cos((this.startAngle-90) * radians),
innerY2 = this.centerY + this.innerR * Math.sin((this.startAngle-90) * radians);

// build the path array
this.path = [
    ["M", outerX1, outerY1], //move to the start point
    ["A", outerR, outerR, 0, largeArc, 1, outerX2, outerY2],
    ["L", innerX1, innerY1],
    ["A", innerR, innerR, 0, largeArc, 0, innerX2, innerY2],
    ["z"] //close the path
    ];                   
return this.path;

};

this.ringpath = paper.path(this.arc);
this.startAngle = this.endAngle;
this.endAngle = this.endAngle + this.endAng;
}
this.ringP = paper.setFinish();
this.ringP.attr({
          fill :'#f60',
          stroke: '#eee'
        });
return this.ringP;  
};  
};

var Ring = new RingObj (300, 300, 65, 125, 0, 45, 8); 
```

# c# - c# DirectoryInfo.GetFiles by generic mime type

> ID：11351011
> 
> 赞同：0
> 
> 时间：2012-07-05T19:14:12.713
> 
> 标签：c#

有没有办法通过通用 mime 类型获取文件？

示例：对于所有图像（“image/png, image/jpeg, ...”）：

```
DirectoryInfo.GetFiles("image") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:35:19.557

出于兼容性原因，您最好将自己的文件类型包含在一个数组中，例如。

```
string[] imagemime = new []{".jpg", ".gif", ".png", ".bmp", ".jpe", ".jpeg", ".wmf", ".emf", ".xbm", ".ico", ".eps", ".tif", ".tiff", ".g01", ".g02", ".g03", ".g04", ".g05", ".g06", ".g07", ".g08"}; 
```

然后你可以有这样的方法：

```
private static IEnumerable<string> GetFiles(string sourceFolder, string[] exts, System.IO.SearchOption searchOption)
    {
        return System.IO.Directory.GetFiles(sourceFolder, "*.*", searchOption)
                .Where(s=>exts.Contains(System.IO.Path.GetExtension(s), StringComparer.OrdinalIgnoreCase));
    } 
```

[您可以在此处查看](http://msdn.microsoft.com/en-us/library/ms143316%28v=VS.100%29.aspx)与其他替代方案的性能比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:19:55.193

不容易。DirectoryInfo 与文件系统背道而驰，该文件系统本身并不包含 MIME 类型信息。

您可以使用 GetFiles() 和扩展名按扩展名获取所有文件。您还可以点击`HKEY_CLASSES_ROOT\MIME\Database\Content Type`注册表项将 MIME 类型列表转换为扩展列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T19:19:52.943

我不确定，但你是说 Directory.GetFiles 吗？如果是这样，您可以搜索特定的文件格式，例如：

```
Directory.GetFiles(filepath, ".png");
Directory.GetFiles(filepath, ".jpeg");
// etc... 
```

扩展将明确放弃 MIME 类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T19:23:26.020

DirectoryInfo.GetFiles 方法允许放置带有通配符的搜索模式，例如？和 *

所以 DirectoryInfo.GetFiles 没有任何选项来按 mime 类型获取文件

但是您可以使用 UrlMon 来查看这篇文章，例如：[使用 .NET，如何根据文件签名而不是扩展名找到文件的 mime 类型](https://stackoverflow.com/questions/58510/using-net-how-can-you-find-the-mime-type-of-a-file-based-on-the-file-signature)

# php - 在 MySQL 中查询两个表以填充 PHP 数组

> ID：11351012
> 
> 赞同：1
> 
> 时间：2012-07-05T19:14:12.997
> 
> 标签：php, mysql, arrays

我正在使用两个查询从它们各自的表中选择值，并且我想将它们放入一个数组中。例如，使用下面的代码，我想要

```
id, last, first, course1, course2, course3 
```

...从

```
$startsem1 and $endsem1 
```

...在一个阵列中。

```
$startsem1 = $startsem."reg";
$endsem1 = $endsem."reg";
$query = "SELECT id,last,first,course1,course2,course3 FROM $startsem1 
     UNION SELECT id,last,first,course1,course2,course3 FROM $endsem1";
$result = mysql_query($query) or die(mysql_error());

while ($row = mysql_fetch_array($result))
    {
        print_r($row); echo "<br><br>";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:46:13.017

合并数据集有两种方法：

1.  SQL UNION 查询
2.  `array_merge()`使用或其他许多 PHP 函数的数组操作

该帖子建议您同时使用两者。其实你会选择一个。

如果您使用第二个，则 UNION 查询没有意义，因为它会产生一个结果。您需要两个单独的查询、两个结果、两个数组。

如果您使用第一个，您可能仍然有数组函数（例如`array_merge()`）或循环操作来清理或解决数据问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T21:45:39.730

```
while ($row = mysql_fetch_array($result))
    {
        $array[] = $row;
    }
echo nl2br(print_r($array, TRUE)); 
```

# android - Android：访问构成视频的图像

> ID：11351013
> 
> 赞同：1
> 
> 时间：2012-07-05T19:14:14.657
> 
> 标签：android, opencv, camera, android-camera

我正在制作一个应用程序来拍摄视频并对视频进行一些计算。我需要对视频的各个帧进行此计算。所以，我有两个问题：

1.  Android中的视频是否存储为一系列图片？（我看到很多 Android 设备都宣传有 25-30 fps 的摄像头）如果可以，作为开发人员，我可以访问构成视频的这些帧吗？怎么会？

2.  如果没有，我有什么办法可以从 Android 设备上拍摄的视频每秒生成至少 15-20 个不同的帧？（当然，对生成的那些帧进行计算）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:54:32.977

视频存储为视频。要操作帧，可以使用 FFMPEG 库。Android 有 FFMPEG 端口，例如 Dolphin 开源播放器。不过，这需要使用 NDK 进行 C/C++ 编程。

# java - Spring MVC中的多个@PathVariable

> ID：11351015
> 
> 赞同：28
> 
> 时间：2012-07-05T19:14:24.267
> 
> 标签：java, spring, spring-mvc, annotations, path-variables

不幸的是找不到答案，所以希望有人能提供帮助。

在 Spring MVC 3.1.0 中，这是我的方法：

```
@RequestMapping(value = "/{app}/conf/{fnm}", method=RequestMethod.GET)
public ResponseEntity<?> getConf(@PathVariable String app, @PathVariable String fnm) {
    log.debug("AppName:" + app);
    log.debug("fName:" + fnm);
            ...
            return ...
    } 
```

我在网上看过一些例子，理论上有多个@PathVariables 似乎没有问题。

但是，当我这样做时，“app”和“fnm”都包含相同的值（这是分配给“app”的任何值）。

真的很感激有人可能对我出错的地方有任何见解吗？

谢谢！

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-05T19:16:22.233

```
@RequestMapping(value = "/{app}/conf/{fnm}", method=RequestMethod.GET)
public ResponseEntity<?> getConf(@PathVariable("app") String app, @PathVariable("fnm") String fnm) {
   log.debug("AppName:" + app);
   log.debug("fName:" + fnm);
           ...
           return ...
  } 
```

基本上路径变量需要在方法参数中用括号指定。这有帮助吗？

# shell - CakePHP 1.3 - 从控制器调用外壳？

> ID：11351016
> 
> 赞同：0
> 
> 时间：2012-07-05T19:14:26.460
> 
> 标签：shell, cakephp, controller, cakephp-1.3

我一生都无法弄清楚如何从控制器调用外壳。

我们有一个将数据打包成 .pdf 的后台进程，我们不想让页面加载陷入等待，因此我们希望将所有这些处理都放在一个 shell 中。

我已经弄清楚如何使用 $this->args 将值传递给 shell

我知道你可以使用 App::import('Shell','TestShell')... 但在那之后我迷路了。

如何在控制器中调用 shell 的 main() 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-10T23:43:24.427

在 Cake 1.3 中，我可以通过执行以下操作使其工作：

```
App::import('Shell', 'Shell');
App::Import('Vendor', array('shells/shell_title'));

$myShell = new ShellTitleShell(new Object());
$myShell->initialize();
$myShell->someAction(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-05T21:25:59.660

我应该更专注于阅读这个问题：/

可以在 Cake2 中完成，不确定 1.3 会有多大不同。:?

```
<?php
App::import('Console/Command', 'AppShell');
App::import('Console/Command', 'HelloWorldShell');
$h = new HelloWorldShell();
$h->dispatchMethod('main');
?> 
```

**Windows**：如果您没有设置环境变量，则需要提供 PHP 可执行文件的位置。

```
C:\wamp\bin\php\php_v\php.exe C:\wamp\www\cakephp\cake\console\cake.php test this_arg_0 this_arg_1 
```

**Linux**：您可能已经定义了您的 php 位置。如果没有，您可能需要将其导出到 $PATH 或提供 php 的完整路径

```
php /var/www/html/cakephp/cake/console/cake.php test this_arg_0 this_arg_1 
```

main() 函数将被默认调用。希望能帮助到你！

# c# - 改进正则表达式以获得 6 位日期 (MMDDYY)

> ID：11351019
> 
> 赞同：1
> 
> 时间：2012-07-05T19:14:43.200
> 
> 标签：c#, .net, regex

我目前正在使用：

```
[0-1]{1}[0-9]{1}[0-3]{1}[0-9]{1}[0-1]{1}[0-9]{1} 
```

匹配一个 6 位数的日期。有没有办法使这个更具限制性，我的问题是文本中包含其他 6-8 位数字，并且我在非日期序列中偶尔会出现误报。

有什么建议么 ？

谢谢 ！

ps 应该说年份总是高于 2000 并且小于当前日期，因此对年份有限制。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T19:24:21.083

您应该为此使用实际的日期解析器，不仅可以更简单地解析实际可能的值（即第 13 个月无效），还可以为闰年等做好准备。

通常，您最喜欢的语言的日期解析器应该能够解析 MMDDYY 格式的字符串，并在失败时给出某种反馈。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T19:34:57.457

一项改进，仅用了 12 个月 31 天，从 2000 年到 2012 年。

```
(?:0[1-9]|1[0-2])(?:0[1-9]|[1-2][0-9]|3[0-1])(?:200[0-9]|201[1-2]) 
```

*我知道其中一些破折号是不必要的。添加它们以提高可读性。*

然后你可以走得更远，28、30 或 31 天，具体取决于月份。

```
(?:(?:0[13578]|1[02])31|(?:0[13-9]|1[0-2])(?:29|30)|(?:0[1-9]|1[0-2])(?:0[1-9]|1[0-9]|2[0-8]))(?:200[0-9]|201[1-2]) 
```

从技术上讲，有一种方法可以计算闰年，但这有点过火了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T19:24:07.847

[http://www.regular-expressions.info/dates.html](http://www.regular-expressions.info/dates.html) 顺便说一句：您将无法仅使用正则表达式来处理闰年（尽管理论上可能这是不切实际的）。您应该使用适当的日期解析器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T19:22:10.577

使用这个正则表达式`[0-1]\d[0-3]\d[2-9]\d{3}` ，但不可能与当前日期交互

# java - 从结构非常不同的 Java 对象生成 XML 文档

> ID：11351020
> 
> 赞同：5
> 
> 时间：2012-07-05T19:14:44.417
> 
> 标签：java, xml, design-patterns, jaxb, mapping

**情况**

我有一个复杂的 Java 模型对象图，需要来回转换为 XML 文档。XML 文档模式的对象图结构与模型的对象树非常不同。两者是可以互换的，但翻译需要大量上下文驱动的逻辑，其中使用了类似父/子的关系。

**问题**

我正在使用在旧系统中建立良好的模型对象，并且 XML 文档的模式是相当新的。由于我们的很多代码都依赖于模型对象的结构，我们不想重构它们。这是我正在处理的结构差异类型的简化示例：

> *示例数据模型树*
> 
> 物品
> 
> *   描述
> *   成本
> *   ...
> 
> 人
> 
> *   名
> *   姓
> *   地址
> *   ...
> 
> 地址
> 
> *   街道
> *   城市
> *   ...
> 
> SaleTransaction（*这是正在翻译的东西）
> 
> *   采购员（人）
> *   卖家（人）
> *   已售商品[]（列表）
> *   交换物品[]（列表）
> *   交易地点（地址）
> 
> *示例 XML 文档结构*
> 
> 交换
> 
> *   类型
> *   派对
>     *   party_contact_ref
>         *   类型
>         *   联系人 ID
> *   交易所详情
>     *   类型
>     *   total_amount_exchanged
> *   项目
>     *   物品
>         *   类型
>         *   owning_party_contact_ref_id
>         *   交换使用类型
> *   联系人
>     *   接触
>         *   ID
>         *   类型
> 
> 交换类型：[ 现金销售 | 易货交易 | 组合现金和易货]
> 
> 联系方式：[ 人 | 地址 ]
> 
> 交换详情类型：[ 现金交换 | 易货交换]

SaleTransaction 和 Exchange 之间的映射是可能的，但不是 1-1。在示例中，模型中的“买家”将映射到 XML 文档中的联系人和联系人引用元素。此外，“Item”元素的“owning_party_contact_ref_id”属性的值将通过查看 SaleTransaction 对象图中的几个不同值来确定。

如果我正在使用的对象图需要一些翻译才能在 XML 文档中使用，我的首选工具是 XmlAdapter。但是，在这种情况下，出于三个原因，我认为使用 JAXB XML 适配器不是一个可行的解决方案。

1.  模型图中的对象对应的 XML 元素也取决于数据。我相信所有 XmlAdapter 到类/属性的映射都是固定的。
2.  似乎不可能使用 XmlAdapters 执行多对一或一对多解决方案。MOXy 有一个[有趣的扩展](http://blog.bdoughan.com/2010/08/xmltransformation-going-beyond.html%20interesting%20extension)，但同样，它需要到属性的固定映射。
3.  据我所知，XmlAdapters 与单个对象一起工作，并且没有办法获得整个图被编组/解组的上下文。

**问题**

我敢肯定这种类型的问题相当普遍，那么您如何处理呢？有没有办法用标准工具处理这个问题？

**我想出了什么**

如果它很有趣，这里是我想出的可能的方法：

*#1* 将对象图转换问题与 XML 生成问题分开。我有一个自制的工具，可以帮助生成基于某些上下文对象的对象图。我可以从 XML 模式创建 JAXB 类，然后依靠这个工具根据我们的模型对象的上下文生成这些类的对象。这可以很好地从模型对象图生成 XML 文档，但反之则不行。这也意味着依赖非标准工具，如果可能的话我想避免。

*#2* 疯狂地使用 XmlAdapter 并修改模型类以便能够保留翻译状态信息（例如，模型树中的这个对象被用来在 XML 文档中创建这个元素）。这将使问题非常接近 JAXB 的标准使用模型，但我认为开发、测试和维护将是一场噩梦。

*#3* 像我在 #1 中那样分离对象图问题，但使用 JDOM 而不是 JAXB。这将删除所有 JAXB 所需的类和映射，但需要构建另一个自定义工具来管理模型对象到 DOM 树的映射。

我对这三种解决方案中的任何一种都不是很兴奋，但我最偏爱#1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:47:58.673

1 是您最好的选择恕我直言。编写映射代码很乏味，但你应该抵制太聪明的冲动。您使用的任何映射工具都需要配置，我敢打赌，这与手动编写 Java 映射代码一样多。只需编写大量单元测试。

您可以为任何具有相似命名字段的类尝试 Dozer，它将使用反射来进行映射。我过去使用过它，但我的架构看起来更类似于我的域对象，所以它可能没有那么有用。

为了使代码更愉快，请使用您可以为 JAXB 找到的所有 xjc 插件，例如 fluent-api 和 value-constructor 插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T20:30:50.637

> 如果我正在使用的对象树需要一些翻译才能在 XML 文档中使用，我的首选工具是 XmlAdapter。不过，在这种情况下，我认为使用 JAXB XML 适配器不是一个可行的解决方案。据我所知，XmlAdapters 与单个对象一起工作，并且没有办法获得整个树被编组/解组的上下文。

通常 an`XmlAdapter`是无状态的，但您可以`XmlAdapter`在`Marshaller`/上指定一个`Unmarshaller`包含状态的实例。这可能就是您所需要的。

```
YourAdapter yourAdapter = new YourAdapter();
yourAdapter.setState(someState);
marshaller.setAdapter(yourAdapter);
unmarshaller.setAdapter(yourAdapter); 
```

`Marshaller`您在/上指定的实例`Unmarshaller`将用于配置相应类的位置：

```
@XmlJavaTypeAdpater(YourAdapter.class) 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/09/mixing-nesting-and-references-with.html](http://blog.bdoughan.com/2011/09/mixing-nesting-and-references-with.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T20:04:44.843

[如果您有 xsd 模式，那么使用castor](http://www.castor.org/)等工具生成 pojo 非常有用。一旦你有了生成的 pojo 的包，你就可以使用[dozer](http://dozer.sourceforge.net/)来将你的“旧”对象模型映射到代表 xml 文档的 pojo。然后你只需使用 Marshaller 将 castor 生成的对象转换为 Stream、String 等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T19:29:20.307

对不起，我没有给你一个直接的答案，但我还不能评论我的声誉，所以这是我的“答案”。

我肯定会尝试[Altova XML Spy](http://www.altova.com/xmlspy.html)和它的[代码生成功能](http://www.altova.com/xmlspy/xml-code-generation.html)。我已经尝试过了，而且非常有用。我不知道它是否可以反过来工作，但由于它还具有[数据库连接](http://www.altova.com/xmlspy/xml-database.html)和其他一些东西，我相信尝试一下并玩弄它不会有任何害处它。

他们还有另一个名为[MapForce](http://www.altova.com/mapforce.html)的应用程序（如在地图数据库中，而不是 GIS），我从未尝试过，但从他们那里我希望它真的很有用。

我希望您发现所有这些都非常有用，并且您可以对此发表评论，并详细说明它如何帮助您（或没有帮助）。

# cygwin - Cygwin Diff 总是返回退出代码 57

> ID：11351023
> 
> 赞同：0
> 
> 时间：2012-07-05T19:14:53.237
> 
> 标签：cygwin, diff

我的 Cygwin 上的 diff 实用程序总是返回 57 的退出代码，无论文件是否匹配、不匹配或不存在。

我已经成功安装了 diffutils：

```
$ cygcheck -c diffutils
Cygwin Package Information
Package              Version        Status
diffutils            3.2-1          OK

$ which diff
/usr/bin/diff 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T02:34:01.680

您的 Cygwin 安装中一定有问题，因为 Cygwin 版本中`diff`甚至没有返回退出代码 57 的代码。它只使用 0、1 和 2。这意味着其他一些代码正在退出，这是高度可疑的。

我会首先尝试强制重新安装`diffutils`及其依赖项，`libintl8`以及`libiconv2`. 您将在 Cygwin 的 .libs 类别中找到这两个库`setup.exe`。单击“选择软件包”屏幕上第三列中的值，直到显示“重新安装”。（当你第一次进入这个屏幕时，它应该是“保持”。如果是别的，这可能是出错的线索。）

如果这不能解决问题，我会怀疑[BLODA](http://cygwin.com/faq/faq.using.html#faq.using.bloda)。

# ms-access - Access 2003：确定表中是否存在4个字段中的一个或全部

> ID：11351025
> 
> 赞同：0
> 
> 时间：2012-07-05T19:15:01.567
> 
> 标签：ms-access

我有一张每天都在变化的桌子，但总是有相同的名字（Scrubbed）。我需要一个查询来确定当天表中是否存在新字段。我将它们称为field1、field2、field3、field4。

我有一个sql查询：

```
SELECT Scrubbed.field1, Scrubbed.field2, Scrubbed.field3, Scrubbed.field4
FROM Scrubbed; 
```

如果未找到所有 4 个字段，则消息框（新字段不在表中）会出现哪些错误。这行不通。如果表包含字段 1 和 2 但不包含字段 3 和 4，我需要用户在不打开表的情况下知道这一点。

# django - 存储键值“属性”的干净方法？

> ID：11351029
> 
> 赞同：0
> 
> 时间：2012-07-05T19:15:26.457
> 
> 标签：django, django-models

假设我有一个汽车模型。每辆汽车都有属性：颜色、尺寸、重量等……我希望用户允许为每辆汽车对象创建新属性。但是我想共享“属性”，以便属性“大小”在数据库中只存在一次，但用户添加它们的每个对象都存在值。

我的旧方法是两个模型：Car、KeyValue(key:String, value:String) 和 Car 与 KeyValue 的关系为 1:m。

现在，为了确保我的上述约束，我想到了以下几点：

*   三个对象：汽车、钥匙、价值
*   值（键：键）
*   汽车（1:m 与价值的关系）

但是，这种反向方法效果很好，但对我来说看起来并不“干净”。因此，我想问一下更清洁的方法是否可行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:04:21.730

我读了这个 [http://www.craigkerstiens.com/2012/06/11/schemaless-django/](http://www.craigkerstiens.com/2012/06/11/schemaless-django/)

我没用过这个，但我觉得没问题。

一个不太复杂的方法是

django-picklefield [http://pypi.python.org/pypi/django-picklefield/](http://pypi.python.org/pypi/django-picklefield/)

我希望这可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:34:40.083

如果您的“选择”具有延展性，即可以添加、编辑或删除它们，那么选择应该是它自己的模型。例如：

```
class Color(models.Model):
    name = models.CharField(max_length=50)

class Car(models.Model):
    color = models.ForeignKey(Color, related_name='cars') 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-05T19:38:44.200

你应该有 Cars 和 CarModels

CarModel 有两个属性列表。一个具有该模型的所有汽车的“PerModel”属性（这意味着该模型的所有汽车具有相同的值），另一个（只是名称）每个汽车可以具有不同值的属性“PerCar ”。

```
CarModel
{
    KeyValue(key: String, value:String) propertyValuesPerModel;
    List(String) propertyNamesPerCar;
}

Car
{
CarModel model;
KeyValue(key: String, value:String) propertiesPerCar; //Keys can only be those that appear on model.propertyNamesPerCar
} 
```

# java - 正则表达式以获取正斜杠周围的大量 Alpha 字符（JAVA）

> ID：11351030
> 
> 赞同：0
> 
> 时间：2012-07-05T19:15:37.283
> 
> 标签：java, regex

我不太擅长正则表达式，所以我需要一些帮助。

我有一长串乱码（特殊和字母数字）；但是在中间的某个地方，我有一个我感兴趣的块，它有两组单词，由正斜杠分隔，例如：

$234207黄色/绿色$M4/ZlAVadvae1bUAoIfaEbEAZ4HdBHr2ftv+3tIo+yw==

我对整个事情的黄色/绿色部分感兴趣；我感兴趣的部分可以在字符串中的任何位置，所以我不能依赖索引:(

你能帮我找到我可以在我的 Java 代码中使用的正则表达式吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:26:13.597

我不是 100% 确定这是否是你想要的，但看起来你需要找到分隔的单词，`/`所以也许这会有所帮助

```
String s="$234207YELLOW/GREEN$M4/ZlAVadvae1bUAoIfaEbEAZ4HdBHr2ftv+3tIo+yw==";
Pattern p=Pattern.compile("[a-zA-Z]+/[a-zA-Z]+");
Matcher m=p.matcher(s);
if(m.find())
    System.out.println(m.group()); 
```

输出：`YELLOW/GREEN`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:25:05.770

根据您所说的“单词”的含义：

```
[a-zA-Z]+/[a-zA-Z]+ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T19:37:14.393

如果您说的只是字母（无论大小写），您可以使用@TimK 或@Pshemo 建议的内容：
`"[a-zA-Z]+/[a-zA-Z]+"`

但是，如果单词全部大写，您可以将其简化为
`"[A-Z]+/[A-Z]+"`

或者如果你有一个已知单词列表，你可以使用
`"(RED|YELLOW|ORANGE|GREEN|BLUE|PURPLE)/(RED|YELLOW|ORANGE|GREEN|BLUE|PURPLE)"`

使用正则表达式时，我倾向于使用此备忘单
[http://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)

# soa - 作业调度程序是否应该在 soa 环境中共享？

> ID：11351031
> 
> 赞同：0
> 
> 时间：2012-07-05T19:15:46.663
> 
> 标签：soa

例如，会计服务需要安排分类帐更新作业，

1.  会计服务应该包括它自己的调度程序吗？或者，
2.  作业调度应该是共享服务吗？

我猜选项（a）使服务更加自主？

做出决定时还应考虑哪些其他标准？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:09:28.317

作业调度程序通常是一个现成的组件（如[quartz](http://quartz-scheduler.org/)），因此您可能会使用它（很多时候它无论如何都嵌入在服务主机中）。

在任何情况下，当您决定是否创建单独的服务与在服务内部使用组件/库时，您应该考虑维护它的开销，将其开发为单独的单元等（请参阅[纳米服务](http://arnon.me/wp-content/uploads/2010/10/Nanoservices.pdf)反模式）

# python - 可选关键字参数的命名元组和默认值

> ID：11351032
> 
> 赞同：364
> 
> 时间：2012-07-05T19:16:08.167
> 
> 标签：python, default-value, namedtuple, optional-arguments

我正在尝试将一个较长的空心“数据”类转换为一个命名元组。我的班级目前看起来像这样：

```
class Node(object):
    def __init__(self, val, left=None, right=None):
        self.val = val
        self.left = left
        self.right = right 
```

转换后`namedtuple`看起来像：

```
from collections import namedtuple
Node = namedtuple('Node', 'val left right') 
```

但是这里有一个问题。我原来的类只允许我传入一个值，并通过使用命名/关键字参数的默认值来处理默认值。就像是：

```
class BinaryTree(object):
    def __init__(self, val):
        self.root = Node(val) 
```

但这在我重构的命名元组的情况下不起作用，因为它希望我传递所有字段。我当然可以替换 to 的出现，`Node(val)`但这`Node(val, None, None)`不符合我的喜好。

那么是否存在一个很好的技巧可以使我的重写成功而不会增加很多代码复杂性（元编程），还是我应该吞下药丸并继续“搜索和替换”？:)

* * *

## 回答 #1

> 赞同：658
> 
> 时间：2013-08-21T02:40:32.540

## 蟒蛇 3.7

使用*默认*参数。

```
>>> from collections import namedtuple
>>> fields = ('val', 'left', 'right')
>>> Node = namedtuple('Node', fields, defaults=(None,) * len(fields))
>>> Node()
Node(val=None, left=None, right=None) 
```

或者更好的是，使用新的[数据](https://docs.python.org/3/library/dataclasses.html)类库，它比命名元组好得多。

```
>>> from dataclasses import dataclass
>>> from typing import Any
>>> @dataclass
... class Node:
...     val: Any = None
...     left: 'Node' = None
...     right: 'Node' = None
>>> Node()
Node(val=None, left=None, right=None) 
```

## 在 Python 3.7 之前

设置`Node.__new__.__defaults__`为默认值。

```
>>> from collections import namedtuple
>>> Node = namedtuple('Node', 'val left right')
>>> Node.__new__.__defaults__ = (None,) * len(Node._fields)
>>> Node()
Node(val=None, left=None, right=None) 
```

## 在 Python 2.6 之前

设置`Node.__new__.func_defaults`为默认值。

```
>>> from collections import namedtuple
>>> Node = namedtuple('Node', 'val left right')
>>> Node.__new__.func_defaults = (None,) * len(Node._fields)
>>> Node()
Node(val=None, left=None, right=None) 
```

## 命令

在所有版本的 Python 中，如果您设置的默认值少于命名元组中存在的默认值，则默认值将应用于最右边的参数。这允许您将一些参数保留为必需参数。

```
>>> Node.__new__.__defaults__ = (1,2)
>>> Node()
Traceback (most recent call last):
  ...
TypeError: __new__() missing 1 required positional argument: 'val'
>>> Node(3)
Node(val=3, left=1, right=2) 
```

## Python 2.6 到 3.6 的包装器

这是一个适合您的包装器，它甚至可以让您（可选地）将默认值设置为`None`. 这不支持必需的参数。

```
import collections
def namedtuple_with_defaults(typename, field_names, default_values=()):
    T = collections.namedtuple(typename, field_names)
    T.__new__.__defaults__ = (None,) * len(T._fields)
    if isinstance(default_values, collections.Mapping):
        prototype = T(**default_values)
    else:
        prototype = T(*default_values)
    T.__new__.__defaults__ = tuple(prototype)
    return T 
```

例子：

```
>>> Node = namedtuple_with_defaults('Node', 'val left right')
>>> Node()
Node(val=None, left=None, right=None)
>>> Node = namedtuple_with_defaults('Node', 'val left right', [1, 2, 3])
>>> Node()
Node(val=1, left=2, right=3)
>>> Node = namedtuple_with_defaults('Node', 'val left right', {'right':7})
>>> Node()
Node(val=None, left=None, right=7)
>>> Node(4)
Node(val=4, left=None, right=7) 
```

* * *

## 回答 #2

> 赞同：151
> 
> 时间：2013-05-23T18:10:31.807

我继承了 namedtuple 并覆盖了该`__new__`方法：

```
from collections import namedtuple

class Node(namedtuple('Node', ['value', 'left', 'right'])):
    __slots__ = ()
    def __new__(cls, value, left=None, right=None):
        return super(Node, cls).__new__(cls, value, left, right) 
```

这保留了直观的类型层次结构，而伪装成类的工厂函数的创建则没有。

* * *

## 回答 #3

> 赞同：102
> 
> 时间：2012-07-05T20:10:15.687

将其包装在一个函数中。

```
NodeT = namedtuple('Node', 'val left right')

def Node(val, left=None, right=None):
  return NodeT(val, left, right) 
```

* * *

## 回答 #4

> 赞同：90
> 
> 时间：2017-04-01T13:58:10.770

在[`typing.NamedTuple`](https://docs.python.org/3.6/library/typing.html#typing.NamedTuple)Python 3.6.1+ 中，您可以为 NamedTuple 字段提供默认值和类型注释。`typing.Any`如果您只需要前者，请使用：

```
from typing import Any, NamedTuple

class Node(NamedTuple):
    val: Any
    left: 'Node' = None
    right: 'Node' = None 
```

用法：

```
>>> Node(1)
Node(val=1, left=None, right=None)
>>> n = Node(1)
>>> Node(2, left=n)
Node(val=2, left=Node(val=1, left=None, right=None), right=None) 
```

此外，如果您需要默认值和可选的可变性，Python 3.7 将具有[数据类（PEP 557）](https://www.python.org/dev/peps/pep-0557/)，可以在某些（很多？）情况下替换命名元组。

* * *

旁注：Python 中当前[注释](https://www.python.org/dev/peps/pep-3107/)规范（`:`参数和变量之后`->`的表达式以及函数之后的表达式）的一个怪癖是它们在定义时被评估^*。因此，由于“一旦类的整个主体被执行，类名就被定义了”，`'Node'`上面类字段中的注解必须是字符串以避免出现 NameError。

这种类型提示称为“前向引用”（[[1]](https://www.python.org/dev/peps/pep-0484/#forward-references)，[[2]](https://www.python.org/dev/peps/pep-0484/#the-problem-of-forward-declarations)），并且使用[PEP 563](https://www.python.org/dev/peps/pep-0563/) ， Python 3.7+ 将有一个`__future__`导入（在 4.0 中默认启用），允许使用前向引用没有报价，推迟他们的评估。

^(^* AFAICT 仅在运行时不评估局部变量注释。（来源：[PEP 526](https://www.python.org/dev/peps/pep-0526/#runtime-effects-of-type-annotations)）)

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2015-04-20T18:53:55.230

这是[直接来自文档的示例](https://docs.python.org/3/library/collections.html#collections.namedtuple)：

> 可以通过使用 _replace() 自定义原型实例来实现默认值：
> 
> ```
> >>> Account = namedtuple('Account', 'owner balance transaction_count')
> >>> default_account = Account('<owner name>', 0.0, 0)
> >>> johns_account = default_account._replace(owner='John')
> >>> janes_account = default_account._replace(owner='Jane') 
> ```

所以，OP的例子是：

```
from collections import namedtuple
Node = namedtuple('Node', 'val left right')
default_node = Node(None, None, None)
example = default_node._replace(val="whut") 
```

但是，我更喜欢这里给出的其他一些答案。为了完整起见，我只是想添加它。

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2012-07-05T19:25:29.397

我不确定仅使用内置的命名元组是否有简单的方法。[有一个名为recordtype](http://pypi.python.org/pypi/recordtype/)的不错的模块具有此功能：

```
>>> from recordtype import recordtype
>>> Node = recordtype('Node', [('val', None), ('left', None), ('right', None)])
>>> Node(3)
Node(val=3, left=None, right=None)
>>> Node(3, 'L')
Node(val=3, left=L, right=None) 
```

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2014-01-22T18:23:13.590

这是一个更紧凑的版本，灵感来自 justinfay 的回答：

```
from collections import namedtuple
from functools import partial

Node = namedtuple('Node', ('val left right'))
Node.__new__ = partial(Node.__new__, left=None, right=None) 
```

* * *

## 回答 #8

> 赞同：15
> 
> 时间：2018-02-01T17:36:06.067

在 python3.7+ 中有一个全新的[defaults=](https://docs.python.org/3.7/library/collections.html#collections.namedtuple)关键字参数。

> *默认值*可以是`None`默认值或可迭代的默认值。由于具有默认值的字段必须在任何没有默认值的字段之后，因此*默认值*应用于最右边的参数。例如，如果字段名是`['x', 'y', 'z']`并且默认值是`(1, 2)`，那么`x`将是一个必需的参数，`y`将默认为`1`，并且`z`将默认为`2`。

示例用法：

```
$ ./python
Python 3.7.0b1+ (heads/3.7:4d65430, Feb  1 2018, 09:28:35) 
[GCC 5.4.0 20160609] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> from collections import namedtuple
>>> nt = namedtuple('nt', ('a', 'b', 'c'), defaults=(1, 2))
>>> nt(0)
nt(a=0, b=1, c=2)
>>> nt(0, 3)  
nt(a=0, b=3, c=2)
>>> nt(0, c=3)
nt(a=0, b=1, c=3) 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2016-07-12T15:07:10.747

简短，简单，不会导致人们使用`isinstance`不当：

```
class Node(namedtuple('Node', ('val', 'left', 'right'))):
    @classmethod
    def make(cls, val, left=None, right=None):
        return cls(val, left, right)

# Example
x = Node.make(3)
x._replace(right=Node.make(4)) 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2018-07-26T11:17:21.547

`defaults`Python 3.7：在命名元组定义中引入参数。

如文档中所示的示例：

```
>>> Account = namedtuple('Account', ['type', 'balance'], defaults=[0])
>>> Account._fields_defaults
{'balance': 0}
>>> Account('premium')
Account(type='premium', balance=0) 
```

[在这里](https://docs.python.org/3.7/library/collections.html#namedtuple-factory-function-for-tuples-with-named-fields)阅读更多。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2013-09-19T09:18:08.200

一个稍微扩展的示例，用于初始化*所有*缺少的参数`None`：

```
from collections import namedtuple

class Node(namedtuple('Node', ['value', 'left', 'right'])):
    __slots__ = ()
    def __new__(cls, *args, **kwargs):
        # initialize missing kwargs with None
        all_kwargs = {key: kwargs.get(key) for key in cls._fields}
        return super(Node, cls).__new__(cls, *args, **all_kwargs) 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2014-08-26T08:45:45.223

结合@Denis 和@Mark 的方法：

```
from collections import namedtuple
import inspect

class Node(namedtuple('Node', 'left right val')):
    __slots__ = ()
    def __new__(cls, *args, **kwargs):
        args_list = inspect.getargspec(super(Node, cls).__new__).args[len(args)+1:]
        params = {key: kwargs.get(key) for key in args_list + kwargs.keys()}
        return super(Node, cls).__new__(cls, *args, **params) 
```

这应该支持使用位置参数以及混合大小写创建元组。测试用例：

```
>>> print Node()
Node(left=None, right=None, val=None)

>>> print Node(1,2,3)
Node(left=1, right=2, val=3)

>>> print Node(1, right=2)
Node(left=1, right=2, val=None)

>>> print Node(1, right=2, val=100)
Node(left=1, right=2, val=100)

>>> print Node(left=1, right=2, val=100)
Node(left=1, right=2, val=100)

>>> print Node(left=1, right=2)
Node(left=1, right=2, val=None) 
```

还支持TypeError：

```
>>> Node(1, left=2)
TypeError: __new__() got multiple values for keyword argument 'left' 
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2012-10-17T17:34:08.873

你也可以使用这个：

```
import inspect

def namedtuple_with_defaults(type, default_value=None, **kwargs):
    args_list = inspect.getargspec(type.__new__).args[1:]
    params = dict([(x, default_value) for x in args_list])
    params.update(kwargs)

    return type(**params) 
```

这基本上使您可以使用默认值构造任何命名元组并仅覆盖您需要的参数，例如：

```
import collections

Point = collections.namedtuple("Point", ["x", "y"])
namedtuple_with_defaults(Point)
>>> Point(x=None, y=None)

namedtuple_with_defaults(Point, x=1)
>>> Point(x=1, y=None) 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2015-01-06T22:31:18.760

我发现这个版本更容易阅读：

```
from collections import namedtuple

def my_tuple(**kwargs):
    defaults = {
        'a': 2.0,
        'b': True,
        'c': "hello",
    }
    default_tuple = namedtuple('MY_TUPLE', ' '.join(defaults.keys()))(*defaults.values())
    return default_tuple._replace(**kwargs) 
```

这并不像它需要两​​次创建对象那样有效，但是您可以通过在模块内定义默认的 duple 并让函数执行替换行来更改它。

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2018-05-24T09:18:04.570

由于您将`namedtuple`其用作数据类，因此您应该知道 python 3.7 将`@dataclass`为此目的引入一个装饰器——当然它具有默认值。

[文档中的一个示例](https://docs.python.org/3.7/library/dataclasses.html#dataclasses.dataclass)：

```
@dataclass
class C:
    a: int       # 'a' has no default value
    b: int = 0   # assign a default value for 'b' 
```

比 hacking 更干净、可读和可用`namedtuple`。不难预测`namedtuple`s 的使用会随着 3.7 的采用而下降。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2018-02-24T17:31:23.287

受[这个](https://stackoverflow.com/a/48953578)对不同问题的回答的启发，这是我提出的基于[元类](https://docs.python.org/3/reference/datamodel.html?highlight=__metaclass__#metaclasses)和使用的解决方案[`super`](https://docs.python.org/3/library/functions.html#super)（以正确处理未来的子分类）。[这与justinfay 的回答](https://stackoverflow.com/a/16721002)非常相似。

```
from collections import namedtuple

NodeTuple = namedtuple("NodeTuple", ("val", "left", "right"))

class NodeMeta(type):
    def __call__(cls, val, left=None, right=None):
        return super(NodeMeta, cls).__call__(val, left, right)

class Node(NodeTuple, metaclass=NodeMeta):
    __slots__ = () 
```

然后：

```
>>> Node(1, Node(2, Node(4)),(Node(3, None, Node(5))))
Node(val=1, left=Node(val=2, left=Node(val=4, left=None, right=None), right=None), right=Node(val=3, left=None, right=Node(val=5, left=None, right=None))) 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2018-10-05T11:21:24.887

jterrace 使用recordtype 的答案很好，但是库的作者建议使用他的[namedlist](https://pypi.org/project/namedlist/)项目，它提供了mutable ( `namedlist`) 和immutable ( `namedtuple`) 实现。

```
from namedlist import namedtuple
>>> Node = namedtuple('Node', ['val', ('left', None), ('right', None)])
>>> Node(3)
Node(val=3, left=None, right=None)
>>> Node(3, 'L')
Node(val=3, left=L, right=None) 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2018-07-17T18:04:05.803

这是一个简短而简单的通用答案，它为带有默认参数的命名元组提供了很好的语法：

```
import collections

def dnamedtuple(typename, field_names, **defaults):
    fields = sorted(field_names.split(), key=lambda x: x in defaults)
    T = collections.namedtuple(typename, ' '.join(fields))
    T.__new__.__defaults__ = tuple(defaults[field] for field in fields[-len(defaults):])
    return T 
```

用法：

```
Test = dnamedtuple('Test', 'one two three', two=2)
Test(1, 3)  # Test(one=1, three=3, two=2) 
```

缩小：

```
def dnamedtuple(tp, fs, **df):
    fs = sorted(fs.split(), key=df.__contains__)
    T = collections.namedtuple(tp, ' '.join(fs))
    T.__new__.__defaults__ = tuple(df[i] for i in fs[-len(df):])
    return T 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-04-05T06:55:51.680

如果您想保留使用类型注释的可能性，不幸的是，@mark-lodato 的非常好的解决方案不可用（我在设置时失败了`__defaults__`）。另一种方法是使用[attrs](https://pypi.org/project/attrs/)：

```
import attr

@attr.s
class Node(object):
    val: str = attr.ib()
    left: 'Node' = attr.ib(None)
    right: 'Node' = attr.ib(None) 
```

这有：

*   类型注释
*   好`__str__`和`__repr__`
*   可定制的，因为它是一个真正的类
*   与所有 Python 版本相同的实现

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-11-30T15:02:17.197

使用`NamedTuple`我的[`Advanced Enum (aenum)`](https://pypi.python.org/pypi/aenum)库中的类，并使用`class`语法，这非常简单：

```
from aenum import NamedTuple

class Node(NamedTuple):
    val = 0
    left = 1, 'previous Node', None
    right = 2, 'next Node', None 
```

一个潜在的缺点是`__doc__`任何具有默认值的属性都需要一个字符串（对于简单属性，它是可选的）。在使用中它看起来像：

```
>>> Node()
Traceback (most recent call last):
  ...
TypeError: values not provided for field(s): val

>>> Node(3)
Node(val=3, left=None, right=None) 
```

这样做的优点[`justinfay's answer`](https://stackoverflow.com/a/16721002/208880)：

```
from collections import namedtuple

class Node(namedtuple('Node', ['value', 'left', 'right'])):
    __slots__ = ()
    def __new__(cls, value, left=None, right=None):
        return super(Node, cls).__new__(cls, value, left, right) 
```

是简单，也是`metaclass`基于而不是`exec`基于。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-03-27T11:06:20.967

另一种解决方案：

```
import collections

def defaultargs(func, defaults):
    def wrapper(*args, **kwargs):
        for key, value in (x for x in defaults[len(args):] if len(x) == 2):
            kwargs.setdefault(key, value)
        return func(*args, **kwargs)
    return wrapper

def namedtuple(name, fields):
    NamedTuple = collections.namedtuple(name, [x[0] for x in fields])
    NamedTuple.__new__ = defaultargs(NamedTuple.__new__, [(NamedTuple,)] + fields)
    return NamedTuple 
```

用法：

```
>>> Node = namedtuple('Node', [
...     ('val',),
...     ('left', None),
...     ('right', None),
... ])
__main__.Node

>>> Node(1)
Node(val=1, left=None, right=None)

>>> Node(1, 2, right=3)
Node(val=1, left=2, right=3) 
```

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2016-01-19T14:20:49.503

这是 Mark Lodato 包装器的一个不太灵活但更简洁的版本：它将字段和默认值作为字典。

```
import collections
def namedtuple_with_defaults(typename, fields_dict):
    T = collections.namedtuple(typename, ' '.join(fields_dict.keys()))
    T.__new__.__defaults__ = tuple(fields_dict.values())
    return T 
```

例子：

```
In[1]: fields = {'val': 1, 'left': 2, 'right':3}

In[2]: Node = namedtuple_with_defaults('Node', fields)

In[3]: Node()
Out[3]: Node(val=1, left=2, right=3)

In[4]: Node(4,5,6)
Out[4]: Node(val=4, left=5, right=6)

In[5]: Node(val=10)
Out[5]: Node(val=10, left=2, right=3) 
```

# ruby-on-rails - Sprockets::CircularDependencyError application.js 已经是必需的

> ID：11351041
> 
> 赞同：10
> 
> 时间：2012-07-05T19:16:25.337
> 
> 标签：ruby-on-rails, ruby-on-rails-3, git, version-control, sprockets

在我的应用程序中，我收到了一个 Sprockets::CircularDependencyError application.js has been required。这会影响我的应用程序中的每个页面，因为没有 JS 加载。注意 - 此错误发生在相当复杂的合并之后。

我的假设（如果我错了，请纠正我）是因为两个不同的文件需要 application.js 而发生此错误。如果是这样，我应该查看哪些文件来调试此错误？我如何测试我的应用程序以确定哪些文件已经需要 application.js？

非常感谢您的帮助。我非常乐意提供任何相关信息。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-05T19:20:46.220

> “这个错误发生在相当复杂的合并之后。”

我确信冲突肯定也会出现在`application.js`文件中。在合并之后，您可能没有删除额外的 application.js.* 文件，您的版本控制为您创建，它们都将具有 line of`require tree`或其他内容。 . 即两者都需要彼此因此循环依赖。确保该文件夹中没有这样的额外文件...

# python - 在 Python 中用单引号将变量括起来

> ID：11351043
> 
> 赞同：21
> 
> 时间：2012-07-05T19:16:29.970
> 
> 标签：python

如何在 python 中用单引号将变量括起来？这可能很简单，但我似乎无法理解！我需要对变量进行 url 编码`term`。`Term`由用户在表单中输入，并传递给它是 url-encoded 的函数`term=urllib.quote(term)`。如果用户输入“apple computer”作为他们的术语，则在 url 编码后它将是“apple%20comptuer”。我想要做的是在 url 编码之前用单引号将术语括起来，这样它就会是“'apple computer'”，然后在 url 编码“%23apple%20computer%23”之后。我需要将该术语传递给一个 url，除非我使用这种语法，否则它将不起作用。有什么建议么？

示例代码：

```
import urllib2
import requests    

def encode():
        import urllib2
        query= avariable #The word this variable= is to be enclosed by single quotes
        query = urllib2.quote(query)
        return dict(query=query)

def results():

    bing = "https://api.datamarket.azure.com/Data.ashx/Bing/SearchWeb/Web?Query=%(query)s&$top=50&$format=json"
    API_KEY = 'akey'

    r = requests.get(bing % encode(), auth=('', API_KEY))
    return r.json 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-05T19:21:37.533

有以下三种方式：

1.  字符串连接

    ```
    term = urllib.quote("'" + term + "'") 
    ```

2.  旧式字符串格式

    ```
    term = urllib.quote("'%s'" % (term,)) 
    ```

3.  新式字符串格式化

    ```
    term = urllib.quote("'{}'".format(term)) 
    ```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-05T19:18:18.443

您可以只使用字符串插值：

```
>>> term = "foo"
>>> "'%s'" % term
"'foo'" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-05T19:18:15.637

```
def wrap_and_encode(x):
    return encode("'%s'" % x) 
```

应该是你正在寻找的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-12-03T10:30:03.820

对于那些在谷歌上搜索“python环绕字符串”之类的东西并且对时间很认真*（或只是在寻找“最佳”解决方案）的人来说*。

我要补充一点，现在有用于 Python 3.6+ 环境的[f-strings](https://www.python.org/dev/peps/pep-0498/)更容易使用，而且从我读到的内容来看，它们说它们更快。

```
#f-string approach
term = urllib.parse.quote(f"'{term}'") 
```

我决定对python中“包围”字符串的每种方法进行一次[计时。](https://docs.python.org/3/library/timeit.html)

```
import timeit

results = {}

results["concat"] = timeit.timeit("\"'\" + 'test' + \"'\"")
results["%s"] = timeit.timeit("\"'%s'\" % ('test',)")
results["format"] = timeit.timeit("\"'{}'\".format('test')")
results["f-string"] = timeit.timeit("f\"'{'test'}'\"") #must me using python 3.6+
results["join"] = timeit.timeit("'test'.join((\"'\", \"'\"))")

for n, t in sorted(results.items(), key = lambda nt: nt[1]):
    print(f"{n}, {t}") 
```

结果：

```
concat, 0.009532792959362268
f-string, 0.08994143106974661
join, 0.11005984898656607
%s, 0.15808712202124298
format, 0.2698059631511569 
```

*奇怪的是，我每次运行它时都得到连接比 f-string 快，但是您可以复制和粘贴以查看您的字符串/使用是否有不同的工作方式，也可能有更好的方法将它们放入 timeit 比`\`转义所有引号，让我知道*

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-05T19:18:18.717

在 url 编码后添加单引号有什么问题？或者，只是在上面的编码函数中添加它们？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-13T18:32:53.723

我只是偶然发现了一些这样做的代码：

```
term = urllib.quote(term.join(("'", "'"))) 
```

（在这种情况下，`join()`用作`term`分隔符，将可迭代参数中给出的所有元素组合成一个字符串。由于只有两个元素，因此它们只是简单地包裹在 . 的一个实例周围`term`。）

尽管它的可读性很强，但我仍然认为它是一种 hack，并且比其他选项可读性差。因此，我建议使用其他人提到的字符串格式：

```
term = urllib.quote("'{}'".format(term)) 
```

# c++ - 操作数和运算符字符串

> ID：11351044
> 
> 赞同：1
> 
> 时间：2012-07-05T19:16:37.863
> 
> 标签：c++, operator-overloading

> **可能重复：**
> [在 C++ 中计算算术表达式](https://stackoverflow.com/questions/9329406/evaluating-arithmetic-expressions-in-c)

我创建了一个处理有理算术的类。ie 有一个构造函数，它接受“a/b”形式的字符串，并用object.numerator = a 和object.denominator = b 实例化一个对象。我还重载了算术运算符来处理 Rational 对象。

我的问题是，我将从文件中读取行，例如：“a/b + c/d”

我知道如何确保两个操作数都成为 Rational 对象，但是如何从流中拉出运算符，并在操作数上使用它？

谢谢！

# oracle - Oracle 删除列和未使用的列

> ID：11351046
> 
> 赞同：6
> 
> 时间：2012-07-05T19:16:41.403
> 
> 标签：oracle

我有一个名为的表`test`，它有 3 列：

1.  姓名
2.  ID
3.  地址

一段时间后，我知道一列未使用。我想删除一列，比方说`id`。

Oracle 有一个特性可以将列标识为`unused`. `drop`列与设置列有什么区别`unused`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T19:26:13.617

当您删除一列时，它会移动到回收站中，而当您将一列标记为未使用时，它就像在逻辑上删除它但在物理上保留它。

有时将列标记为未使用，然后使用 alter table name 删除未使用的列语句很有用，因为它允许 DBA 快速并立即取消对列的访问。稍后，在例行的数据库维护周末或工作时间之后，您可以删除具有 alter table name 的列 drop used column 以回收空间。

另一方面，将列标记为未使用不会释放任何空间，当需要释放空间并删除不需要的列时，最好放弃它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:31:19.570

其实是为了方便...

看[这里](https://forums.oracle.com/forums/thread.jspa?threadID=953961)

设置为“未使用”就像删除一样，但允许您将实际的物理删除推迟到以后的日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-02T17:17:01.483

这是对 DBA 维护窗口的帮助，一般不供您使用。对于开发人员来说，这意味着 DROP 列。就是这样，以后没有恢复点。相反，如果您在 12 c 中，则使用 INVISIBLE 选项。

# opencv - 在 OpenCV 中微调图像拼接

> ID：11351047
> 
> 赞同：4
> 
> 时间：2012-07-05T19:16:52.637
> 
> 标签：opencv, 2d, image-stitching

（计算机视觉的新手）

目标是使用图像拼接或**任何其他**方法重构游戏关卡。某人播放的关卡是视频录制的，这些帧将作为输入。

预期结果：（来自[http://www.vgmaps.com/](http://www.vgmaps.com/)的 SMB 4-4 级） ![在此处输入图像描述](../Images/1c5e9ced3b02a00e8e3a7fbf97237b42.png)

这是我第一次尝试使用 OpenCV (EmguCV) 解决这个问题。到目前为止结果非常好，但我想知道是否有更合适的技术知道我的输入将严格为 2D ？

我愿意尝试另一种框架/技术，只要它不太复杂。

以下是源图像：

![在此处输入图像描述](../Images/bf6327d483703478649bddb7823eac7f.png)

前 7 张图像的结果：（由于某些原因，OpenCV 中的 Stitcher 没有一次接受 10 张……）

![在此处输入图像描述](../Images/927568a0aa8b16faca92a81ce89702e4.png)

最后 3 张图片的结果：

![在此处输入图像描述](../Images/6ace30eca7b441fdd840b79279babea6.png)

# java - 在 .net 中编译 java 代码

> ID：11351054
> 
> 赞同：0
> 
> 时间：2012-07-05T19:17:09.000
> 
> 标签：java, .net, compilation

我需要从 .net 应用程序编译 java 代码。我尝试运行一个 cmd 进程并给出参数，但它不起作用。关于如何让它发挥作用的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:31:03.037

我已经在 Visual Studio 中为 Mono For Android 项目编译了 java 文件，基本上您仍然需要使用 javac，但您可以创建一个脚本来为您执行此操作。

**免责声明：**这是一个适用于简单应用程序的简单脚本，它不会取代专用的 Java 构建系统，例如 ANT。我的示例使用 powershell，但可以使用常规批处理文件应用相同的概念。

**我们对库的预构建步骤调用了一个 powershell 脚本：**

```
powershell.exe -noprofile C:\mypath\Java\buildj.ps1; exit $LASTEXITCODE 
```

**这是一个执行 javac 编译的 powershell 脚本的精简示例：**

```
if (Get-Command javac -errorAction SilentlyContinue)
{
    Get-Childitem C:\mypath\Java\JBin -include *.class -recurse | foreach ($_) {Remove-Item $_.fullname}

    $JavaList = Get-Content C:\filelist.txt

    foreach ($file in $JavaList) {
        $command = "javac C:\mypath\Java\JBin " + $file
        Write-Host $command
        Invoke-Expression $command
    }

}
else {
    throw "javac could not be located. Check your PATH"
} 
```

在 filelist.txt 中，您需要有一个包含完整路径的 java 文件列表。

# c - 转换为无效时的警告**

> ID：11351055
> 
> 赞同：1
> 
> 时间：2012-07-05T19:17:20.703
> 
> 标签：c, gcc, gcc-warning

我正在尝试将结构指针强制转换`void**`为 a 的函数，该函数采用`void**`;

```
typedef struct {
  uint64_t   key;    // the key in the key/value pair
  void      *value;  // the value in the key/value pair
} HTKeyValue, *HTKeyValuePtr;

HTKeyValuePtr payload = (HTKeyValuePtr)malloc(sizeof(HTKeyValue));
int success = (HTKeyValuePtr) LLIteratorGetPayload(i, (void**) &payload); 
```

给我警告：

```
hashtable.c:161:19: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
hashtable.c:161:19: warning: initialization makes integer from pointer without a cast [enabled by default] 
```

这是怎么回事？我该如何解决？

ps对不起，如果这是任何其他问题的重复。有很多类似的问题，但我找不到适合我的情况并且我理解的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T19:19:13.367

`int success = (HTKeyValuePtr) LLIteratorGetPayload(i, (void**) &payload);`

您正在将一个指针分配给一个 int ...

此外，谷歌告诉我第一个参数`LLIteratorGetPayload`应该是 a `LLIter`，结果是 a `typedef void*`。我猜`i`是一个整数。这就是第一个错误的原因。

# java - Glassfish v3 上的彗星实现

> ID：11351058
> 
> 赞同：1
> 
> 时间：2012-07-05T19:17:28.047
> 
> 标签：java, comet, glassfish-3

我正在尝试在我的 glassfish 服务器 v3 上实现彗星灰熊。

我正在尝试使用 http url 对象从桌面应用程序连接 Web 服务器。

我正在客户端和 Web 服务器上创建 ObjectInputStreamer 和 ObjectOutputStreamer。

在 webserver servlet 中，我正在创建 ObjectOutputStream 以将响应写回客户端。我将这个输出流媒体附加到彗星的处理上，这样我就可以在没有请求的情况下将数据推送到客户端。

在客户端上，我没有关闭 InputStreamer，以便我可以使用 Comet 读取网络服务器推送的响应。

但是在从网络服务器的输出流上写入数据时，它没有给出任何异常，但我仍然无法在客户端读取，这会在从打开的输入流读取时给出 EOFException。

谢谢，阿里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T00:35:25.800

Comet 是一种用于通过 http 互联网连接通知客户端服务器上的更改的技术。开始学习彗星的好地方是[这里的例子。](https://stackoverflow.com/q/333664/906048) 使用 java.io.ObjectInput/OutputStream 用于读取文件、传递序列化的 java 对象等。它们使用[Object Serialization Stream Protocol](http://docs.oracle.com/javase/7/docs/platform/serialization/spec/protocol.html)，这不适用于 Comet。

# pentaho - 如何在 Pentaho 报表设计器中的报表上显示 prpt 文件的名称

> ID：11351060
> 
> 赞同：1
> 
> 时间：2012-07-05T19:17:56.440
> 
> 标签：pentaho

这可能很简单，但我试图在 Pentaho 报告的页脚部分显示报告的名称（.prpt 文件）。Pentaho 报表设计器中有什么方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:07:37.853

您必须创建一个函数类型“打开公式”及其名为“公式写入”的字段`=DOCUMENTMETADATA("http://purl.org/dc/elements/1.1/"; "title")`，然后只需添加一个文本字段并将其添加到您想要的任何部分。

# knockout.js - 将淘汰赛绑定到外部 html

> ID：11351062
> 
> 赞同：1
> 
> 时间：2012-07-05T19:18:11.653
> 
> 标签：knockout.js

我的应用程序中有一个按钮，单击该按钮会弹出一个对话框窗口来查询数据。此窗口使用 jquery 调用 $.get 并加载 html 表单并将其添加到 DOM。完成后，它将使用 jQuery UI 显示一个模态对话框窗口。我在这个表单上有一个按钮，可以将表单数据提交到服务器。取回数据后，我想将此数据绑定到表中。我无法将按钮绑定到视图模型，并且在检索结果后我不知道如何绑定结果。谁能让我开始如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:56:10.247

当您从 ajax 请求中获取 html 并将其注入您的页面时，您需要在新元素上调用 applyBindings。

一个例子：

```
ko.applyBindings(myViewModel, $('#idOfNewElement')[0]); 
```

# regex - 正则表达式查找 " 但不是那些有 ","

> ID：11351065
> 
> 赞同：0
> 
> 时间：2012-07-05T19:18:16.833
> 
> 标签：regex

我只是无法掌握正则表达式的窍门，试图找到 " ，但不是两边都有 , 的

我 ","can haz"," 小猫。“嗯”。美味，美味的小猫。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:21:27.873

这：

```
 (?<!,)"(?!,) 
```

或者，允许空格：

```
 (?<!,\s*)"(?!\s*,) 
```

# powershell - 禁用 MSBuild 子进程的关闭按钮

> ID：11351073
> 
> 赞同：3
> 
> 时间：2012-07-05T19:18:41.993
> 
> 标签：powershell, msbuild

我有一个启动 MSBuild 子进程的 PowerShell 脚本。我想禁用子进程窗口上的“关闭”按钮，这样用户就不能中断进程。但是，我无法找到任何信息表明这是否可能。

如果有人可以确认（并告诉我我将如何去做）或否认这是否可能，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:47:36.360

MSBuild.exe 是一个控制台应用程序，因此默认情况下它将在控制台窗口中运行。您无法真正“禁用”关闭按钮，就像您可以阻止某人（具有正确权限）仅终止 msbuild.exe 进程一样......

你可以做的是使用 PowerShell 2.0 中引入的作业功能来减轻一些风险：

```
$job = Start-Job -ScriptBlock { 
  & msbuild app.csproj
  if ($LASTEXITCODE -ne 0) { throw "MSBuild failed. Exit code: $LASTEXITCODE" }
} 
```

这将安排脚本块在 PowerShell 会话的后台线程上运行，并且不会显示 msbuild 窗口。所有输出都将被捕获并保留，直到您决定检索作业。您可以使用 cmdlet 检查所有后台作业的状态`Get-Job`，并使用以下命令接收结果`Receive-Job`

```
Wait-Job $job # this line pauses PowerShell/your script until the job returns
$output = $job | Receive-Job 
```

您可以对输出执行任何操作 - 值得注意的是，如果 msbuild 退出状态代码为非零，则抛出的异常将一直保留到您收到作业为止，此时它将像任何其他代码一样被提升到您的代码中例外是。您可能需要考虑将您对 Receive-Job 的调用包装在 try/catch 块中以处理失败的构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T20:15:25.327

如果您不希望出现单独的窗口，则另一种选择：

```
$buildArgs = "MySolution.sln", "/t:Build", "/p:Configuration=Debug"
Start-Process -FilePath "msbuild" -ArgumentList $buildArgs -NoNewWindow -Wait 
```

[Start-Process](http://technet.microsoft.com/en-us/library/hh849848%28v=wps.620%29.aspx "启动过程")还有其他标志来控制重定向输出。

# sql-server - SQL：将单行中的列值连接成以逗号分隔的字符串

> ID：11351076
> 
> 赞同：18
> 
> 时间：2012-07-05T19:18:54.177
> 
> 标签：sql-server, tsql, string-concatenation

假设我在 SQL Server 中有一个这样的表：

```
Id    City           Province             Country
1     Vancouver      British Columbia     Canada
2     New York       null                 null
3     null           Adama                null
4     null           null                 France
5     Winnepeg       Manitoba             null
6     null           Quebec               Canada
7     Seattle        null                 USA 
```

如何获得查询结果，以便位置是由“，”分隔的城市、省和国家/地区的串联，并省略空值。我想确保没有任何尾随逗号、前逗号或空字符串。例如：

```
Id    Location
1     Vancouver, British Columbia, Canada
2     New York
3     Adama
4     France
5     Winnepeg, Manitoba
6     Quebec, Canada
7     Seattle, USA 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-05T19:55:27.800

我认为这可以解决我在其他答案中发现的所有问题。无需测试输出的长度或检查前导字符是否为逗号，无需担心连接非字符串类型，在不可避免地添加其他列（例如邮政编码）时不会显着增加复杂性......

```
DECLARE @x TABLE(Id INT, City VARCHAR(32), Province VARCHAR(32), Country VARCHAR(32));

INSERT @x(Id, City, Province, Country) VALUES
(1,'Vancouver','British Columbia','Canada'),
(2,'New York' , null             , null   ),
(3, null      ,'Adama'           , null   ),
(4, null      , null             ,'France'),
(5,'Winnepeg' ,'Manitoba'        , null   ),
(6, null      ,'Quebec'          ,'Canada'),
(7,'Seattle'  , null             ,'USA'   );

SELECT Id, Location = STUFF(
      COALESCE(', ' + RTRIM(City),     '') 
    + COALESCE(', ' + RTRIM(Province), '') 
    + COALESCE(', ' + RTRIM(Country),  '')
    , 1, 2, '')
  FROM @x; 
```

SQL Server 2012 添加了一个新的 T-SQL 函数[`CONCAT`](http://msdn.microsoft.com/en-us/library/hh231515.aspx)，称为分隔器。这避免了担心非字符串类型，但不允许您非常优雅地处理空值与非空值。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-05T19:33:56.123

```
select Id ,   
 Coalesce( City + ',' +Province + ',' + Country,
           City+ ',' + Province,
           Province + ',' + Country,
           City+ ',' + Country,
           City,
           Province,
           Country
          ) as location
from table 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-05T19:30:15.027

这是一个难题，因为逗号必须介于两者之间：

```
select id, coalesce(city+', ', '')+coalesce(province+', ', '')+coalesce(country, '')
from t 
```

看起来它应该可以工作，但我们可以在末尾得到一个无关的逗号，例如当国家为 NULL 时。所以，它需要更复杂一点：

```
select id,
       (case when right(val, 2) = ', ' then left(val, len(val) - 1)
             else val
        end) as val
from (select id, coalesce(city+', ', '')+coalesce(province+', ', '')+coalesce(country, '') as val
      from t
     ) t 
```

没有很多中间逻辑，我认为最简单的方法是给每个元素添加一个逗号，然后在末尾删除任何多余的逗号。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-05T19:44:13.107

使用“+”运算符。

了解 null 值不适用于 '+' 运算符（例如：'Winnepeg' + null = null），因此请务必使用 ISNULL() 或 COALESCE() 函数将 null 替换为空字符串，例如：ISNULL('Winnepeg','') + ISNULL(null,'')。

此外，如果您的列之一可能被解释为数字，那么请务必使用 CAST() 函数，以避免错误返回，例如： CAST('Winnepeg' as varchar( 100))。

到目前为止，大多数示例都忽略了其中的一个或多个部分。另外——一些例子使用子查询或进行长度检查，你真的不应该这样做——只是没有必要——尽管如果你这样做，你的优化器可能会救你。

祝你好运

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-05T19:39:44.650

丑陋，但它适用于 MS SQL：

```
 select
    id,
    case
        when right(rtrim(coalesce(city + ', ','') + coalesce(province + ', ','') + coalesce(country,'')),1)=',' then left(rtrim(coalesce(city + ', ','') + coalesce(province + ', ','') + coalesce(country,'')),LEN(rtrim(coalesce(city + ', ','') + coalesce(province + ', ','') + coalesce(country,'')))-1)
        else rtrim(coalesce(city + ', ','') + coalesce(province + ', ','') + coalesce(country,''))
    end
from
    table 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-07-05T19:24:19.983

这是一个选项：

```
SELECT (CASE WHEN City IS NULL THEN '' ELSE City + ', ' END) + 
(CASE WHEN Province IS NULL THEN '' ELSE Province + ', ' END) +
(CASE WHEN Country IS NULL THEN '' ELSE Country END) AS LOCATION
FROM MYTABLE 
```

# iphone - 让敌人只产生一次cocos2d？

> ID：11351078
> 
> 赞同：-2
> 
> 时间：2012-07-05T19:18:57.407
> 
> 标签：iphone, ios, xcode4, cocos2d-iphone

好的，我知道这应该很简单，但是我脑子里放了一个大屁，我想不通我想要的只是敌人产卵一次。现在它每 180 秒生成一次，我希望它在 180 秒标记处只生成一次。

```
 [self schedule:@selector(gameLogicboss:) interval:180 ];        
          [self schedule:@selector(updateboss:)];                

     -(void)addTarget1 {

Boss *target1 = nil;    

if ((arc4random() % 2) == 0) {{
    target1 = [WeakAndFastBoss boss];
}}  else {
    target1 = [WeakAndFastBoss boss];
}                      

// Determine where to spawn the target along the Y axis
CGSize winSize = [[CCDirector sharedDirector] winSize];
int minY = target1.contentSize.height/2;
int maxY = winSize.height - target1.contentSize.height/2;
int rangeY = maxY - minY;
int actualY = (arc4random() % rangeY) + minY;

// Create the target slightly off-screen along the right edge,
// and along a random position along the Y axis as calculated above
target1.position = ccp(winSize.width + (target1.contentSize.width/2), actualY);
[self addChild:target1 ];

// Determine speed of the target

int minDuration = target1.minMoveDuration;
int maxDuration = target1.maxMoveDuration;
int rangeDuration = maxDuration - minDuration;
int actualDuration = (arc4random() % rangeDuration) + minDuration;

// Create the actions
id actionMove = [CCMoveTo actionWithDuration:actualDuration position:ccp(-target1.contentSize.width/2, actualY)];

id actionMoveDone = [CCCallFuncN actionWithTarget:self 
                                         selector:@selector(spriteMoveFinished:)];
[target1 runAction:[CCSequence actions:actionMove, actionMoveDone, nil]];
target1.tag = 1;
[_targets addObject:target1];   
     }

     -(void)gameLogicboss:(ccTime)dt {
     [self addTarget1];
       iterations_++;
   }

                    - (void)updateboss:(ccTime)dt {
            CGRect projectileRect = CGRectMake(projectile.position.x -                  (projectile.contentSize.width/2), projectile.position.y - (projectile.contentSize.height/2),                           projectile.contentSize.width,                                   projectile.contentSize.height);

    BOOL bossHit = FALSE;
    NSMutableArray *targetsToDelete = [[NSMutableArray alloc] init];
    for (CCSprite *target1 in _targets) {
        CGRect target1Rect = CGRectMake(target1.position.x - (target1.contentSize.width/2),                                    target1.position.y - (target1.contentSize.height/2),                                    target1.contentSize.width,                                  target1.contentSize.height);

        if (CGRectIntersectsRect(projectileRect, target1Rect)) {

            //[targetsToDelete addObject:target];   
            bossHit = TRUE;
            Boss *boss = (Boss *)target1;
            boss.hp--;
            if (boss.hp <= 0) {
                _score ++;
                [targetsToDelete addObject:target1];
            }
            break;

        }                       
    }

    for (CCSprite *target in targetsToDelete) {
        [_targets removeObject:target];
        [self removeChild:target cleanup:YES];                                  
        _projectilesDestroyed++;
        if (_projectilesDestroyed > 2) {

              } 
             }

    if (bossHit) {
        //[projectilesToDelete addObject:projectile];
        [[SimpleAudioEngine sharedEngine] playEffect:@"explosion.caf"];
    }
    [targetsToDelete release];
     }

-(void)spriteMoveFinishedboss:(id)sender {
    CCSprite *sprite = (CCSprite *)sender;
    [self removeChild:sprite cleanup:YES];
    GameOverScene *gameOverScene = [GameOverScene node];
    [gameOverScene.layer.label setString:@"You Lose"];
    [[CCDirector sharedDirector] replaceScene:gameOverScene];    

if (sprite.tag == 1) { // target
    [_targets removeObject:sprite];
} else if (sprite.tag == 2) { // projectile
    [_projectiles removeObject:sprite];
}
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:07:49.057

在这里走弯路。这段代码将让 gameLogicBoss 方法每 180 秒执行一次：

```
[self schedule:@selector(gameLogicboss:) interval:180]; 
```

如果您希望这种情况只发生一次，则必须在执行方法时取消调度选择器：

```
-(void) gameLogicboss:(ccTime)delta
{
    [self unschedule:_cmd];

    // rest of the code here …
} 
```

`_cmd`是当前方法的选择器的简写。当然，您也可以使用 @selector(...) 从不同的方法取消调度选择器。

Cocos2D 2.0 还有一个名为 scheduleOnce 的方法，它只调用一次选择器，而无需手动取消调度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:07:22.880

我从未使用任何这些语言或工具进行开发，所以我真的不知道一个优雅的解决方案，但我可以为您提供一个有效的解决方案。只需创建一个布尔变量并将其初始化为 True。将生成boss的所有代码放在if控件中，这样它只在该变量设置为True时运行。Boss 生成后，将变量设置为 False。

# symfony - Doctrine/Symfony 2 中的单向多对多行为和所需实体

> ID：11351085
> 
> 赞同：1
> 
> 时间：2012-07-05T19:19:17.707
> 
> 标签：symfony, doctrine-orm

所以，我有以下实体结构：

```
/**
 * @ORM\Entity
 */
class Group
{
  /**
   * Many-To-Many, Unidirectional
   *
   * @var ArrayCollection $permissions
   *
   * @ORM\ManyToMany(targetEntity="Permission")
   * @ORM\JoinTable(name="group_has_permission",
   *      joinColumns={@ORM\JoinColumn(name="group_id", referencedColumnName="id")},
   *      inverseJoinColumns={@ORM\JoinColumn(name="permission_id", referencedColumnName="id")}
   * )
   */
  protected $permissions;

  public function __construct()
  {
    $this->permissions = new ArrayCollection();
  }
}

/**
 * @ORM\Entity
 */
class Permission {} 
```

这只是一个例子，但我很困惑。我需要另一个可能称为“group_has_permission”的实体，它有两个字段：group_id 和 permission_id，对吗？还是我错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:58:20.320

您无需创建新实体。

Doctrine 将为您创建一个组表、一个权限表和一个连接表，以便将一个组链接到多个权限。这对你来说是透明的。

# git - Git 和二进制文件历史

> ID：11351091
> 
> 赞同：3
> 
> 时间：2012-07-05T19:19:33.120
> 
> 标签：git, version-control, git-log

^(这是关于[git 处理二进制文件](https://stackoverflow.com/questions/4697216/is-git-good-with-binary)以及[git 如何不能很好地跟踪文件历史的一些类似“已](https://stackoverflow.com/a/6797099/274502)*回答*”问题的后续。)

所以，*git 不能正确地跟踪文件历史*。哎呀，甚至`git log --follow -M100% --name-only -- path-to-my-file`不会这样做，而且我[应该](https://stackoverflow.com/questions/3520023/how-does-git-track-history-during-a-refactoring/3520055#3520055)告诉它只关注 100% 相似的文件！

那么[我们应该使用其他方法](http://git.661346.n2.nabble.com/Directory-renames-without-breaking-git-log-td837434.html)来找出*责任*人，例如一*分为*二。这里的问题是：这些似乎不适用于二进制文件。并且[根据 Linus](https://groups.google.com/forum/?fromgroups#!topic/git-version-control/07oWjHiQTtg)的说法，我们不太可能`git log --follow`很快得到一个完整的工作。

最后**我的问题是**：

我们是否有任何自动化方式来启用某种`git log`跟踪重命名/移动的二进制文件？

或者也许有任何类似的*版本控制系统*但具有此功能？

作为一种解决方案的一个例子，我会接受一些安全和简单的[使用`filter-branch`](https://stackoverflow.com/questions/5656404/git-move-files-in-history-too)方式，但我从来没有玩过它，也不知道它有多么危险。发出这样的程序后，我们是否能够毫无问题地拉动和推动？我们可以轻松地恢复它吗？我们可以在不恢复的情况下跟踪旧名称/引用吗？你知道，在版本控制系统中，访问历史就是一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:25:45.003

过滤器分支是安全的。只是不要更改您提供的脚本中的任何内容。我也对 -M 选项感到恼火。100% 也不适用于常规文件。试试看。

# php - 循环遍历一个对象两次 - php

> ID：11351094
> 
> 赞同：2
> 
> 时间：2012-07-05T19:19:42.280
> 
> 标签：php, zen-cart

我正在玩一个 zencart 试图让它做我想做的事，但我对谷歌的想法已经用完了。

当我使用 zencart 函数查询数据库时，软件返回一个对象，如下所示：

```
queryFactoryResult Object
(
[is_cached] => 
[resource] => Resource id #117
[cursor] => 11
[EOF] => 
[fields] => Array
    (
        [products_id] => 5582
        [products_description] => description here
        [products_name] => Lucky magnet – Each petal...
        [products_type] => 1
        [products_quantity] => 0
        [products_image] => EachPetalMag.jpg
        [products_price] => 3.4000
        [products_status] => 1
        [products_ordered] => 14
        [master_categories_id] => 21
        [supplier_id] => 7
    )
) 
```

在我可以做任何其他事情之前，我必须循环一次以计算有多少 master_categories：

```
while (!$products->EOF) {
  $products_count++;
  $supcats[$products->fields['master_categories_id']] = $products->fields['master_categories_id'];
  $products->MoveNext();
} 
```

然后我需要使用上面的while循环再次循环对象，我试过了：

```
reset($products); 
```

和

```
$products->EOF = FALSE; 
```

但他们不工作。有没有办法做到这一点而不必再次发送查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:52:42.407

Zen Cart queryFactoryResult 上的常规类似数组的操作不起作用，因为它不是数组，所以这不起作用：

```
reset($products); 
```

要再次遍历变量，请使用 queryFactoryResult->Move(row_number) 方法：

```
$products->Move(0); 
```

# c# - 数据上下文在哪里？

> ID：11351099
> 
> 赞同：1
> 
> 时间：2012-07-05T19:19:57.350
> 
> 标签：c#, wpf, xaml, mvvm

我一直在查看 MSDN 文章[WPF Apps With The Model-View-ViewModel Design Pattern](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)。

上面的文章展示了他是如何使用 a`DataTemplate`来显示的`CustomerViewModel`；但是看实际`CustomerView`，没有`DataContext`设定！`Save`当没有任何命令`DataContext`或`ViewModel`连接到视图时，他是如何调用命令的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T19:24:59.280

它在 app.xaml.cs 中设置

请参见图 7，其中窗口的 DataContext 设置为 ViewModel。

# javascript - 定时 jQuery UI 对话框

> ID：11351100
> 
> 赞同：0
> 
> 时间：2012-07-05T19:20:08.030
> 
> 标签：javascript, jquery, jquery-ui, dialog, popup

我想知道如何计算弹出对话框需要多长时间？例如，当您访问某个站点时，我想将其设置为在弹出窗口出现前 30 秒。那可能吗？

```
<script type="text/javascript">
            $(function(){
                // Dialog           
                if ($.cookie('showDialog') == undefined || $.cookie('showDialog') == null || $.cookie('showDialog') != 'false') {
                $('#dialog').dialog({
                    autoOpen: true,
                    width: 700,
                    modal: true,
                    buttons:{ "No Thanks": function() { $(this).dialog("close"); $.cookie('showDialog', 'false');  } },

                });
                }
                // Dialog Link
                $('#dialog_link').click(function(){
                    $('#dialog').dialog('open');
                    return false;
                });

                //hover states on the static widgets
                $('#dialog_link, ul#icons li').hover(
                    function() { $(this).addClass('ui-state-hover'); }, 
                    function() { $(this).removeClass('ui-state-hover'); }
                );

            });
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T19:21:55.017

您可以使用[`setTimeout()`](https://developer.mozilla.org/en/DOM/window.setTimeout).

```
setTimeout(function() {
    $('#my-dialog').dialog('open');
},30000); 
```

[jsFiddle](http://jsfiddle.net/NMu44/)

# jquery - jQuery .load()、PartialView、MVC

> ID：11351101
> 
> 赞同：1
> 
> 时间：2012-07-05T19:20:29.627
> 
> 标签：jquery, asp.net-mvc-3

我将 MVC3 与 Jquery 的 .load() 与 PartialView() 一起使用。

从我的 jquery 中，我正在执行以下操作：

```
 $("#stlist").load('@Url.Action("KitEdit","Kit")' + '?id=' + id+ '&pick=' + pick) 
```

从 KitEdit 操作调用局部视图。

我想知道除了 .load() 之外是否还有另一种加载局部视图的方法？

我得到了一些奇怪的行为，一旦 .load 完成，一些按钮第二次就不起作用了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:27:38.353

是否显示部分视图而不刷新整个页面？如果是这样，您需要添加一些将在加载局部视图后运行的 jQuery，以连接局部视图中的所有控件。我建议向您的 jQuery .load() 调用添加一个完整的函数（http://api.jquery.com/load/），如下所示：

```
 $("#stlist").load('@Url.Action("KitEdit","Kit")' + '?id=' + id+ '&pick=' + pick, Complete); 
```

然后完整的功能将连接部分视图中的所有控件。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:28:04.973

如果您的按钮使用 jquery 点击事件，您可以`.on`在定义点击行为时修改它们以使用语法。

# c# - 多个 AppSettings 文件，可以吗？

> ID：11351106
> 
> 赞同：53
> 
> 时间：2012-07-05T19:20:52.617
> 
> 标签：c#, .net, configuration, appsettings

我想创建 3 个 AppSettings 配置文件：

*   数据库.config
*   消息配置
*   全局配置

在添加我的 App.config 之后：

```
<appSettings file="Database.config" />
<appSettings file="Messages.config" />
<appSettings file="Global.config" /> 
```

但是，当我尝试使用 访问三个文件之一中的密钥时，出现`ConfigurationManager`以下错误：

> 配置系统初始化失败。每个配置文件中的部分只能出现一次。

我不能拥有多个 AppSettings 配置文件？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-07-05T19:25:17.283

您不能拥有多个 appsettings，因为这是一个部分的名称。您可以添加一个新的部分，尽管它使用与 appsettings 相同的部分定义。例如，

```
<configuration>
    <configSections>
        <section name="DatabaseConfig" type="System.Configuration.NameValueFileSectionHandler, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
    </configSections>
    ....
    <DatabaseConfig>
       <add key="Whatever" value="stuff"/>
    </DatabaseConfig>
</configuration> 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2016-10-21T07:09:45.133

单独文件的代码：

网络配置：

```
<configSections>
    <section name="DatabaseConfig" type="System.Configuration.NameValueFileSectionHandler, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
    <section name="MessageConfig" type="System.Configuration.NameValueFileSectionHandler, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
    <section name="GlobalConfig" type="System.Configuration.NameValueFileSectionHandler, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
</configSections>

<DatabaseConfig configSource="database.config">
</DatabaseConfig>

<MessageConfig configSource="message.config">
</MessageConfig>

<GlobalConfig configSource="global.config">
</GlobalConfig> 
```

数据库配置：

```
<DatabaseConfig>
  <add key="Name" value="ServerName" />
</DatabaseConfig> 
```

ETC...

可以通过如下代码访问：

```
var databaseConfiguration = (NameValueCollection)ConfigurationManager.GetSection("DatabaseConfig");
string name = databaseConfiguration["Name"]; 
```

# html - 在 html 邮件中定位相对/绝对问题

> ID：11351109
> 
> 赞同：1
> 
> 时间：2012-07-05T19:21:03.210
> 
> 标签：html, css, email

我最近正在尝试发送 html 邮件，但我遇到了 div 位置的一些问题。相对/绝对。我尝试谷歌，发现电子邮件客户端不支持 div 的定位。

我真正想做的是..我有一张如下图。![原始图像](../Images/2474126f3f152e17b09314dce4756bce.png)

现在我需要通过html在图像上绘制一个矩形。我所拥有的只是图像上矩形的位置。假设一些协调它在房子上。就像下图一样 ![新图片](../Images/8be99b339abba4e26190e1d51ca0304b.png)

有人可以帮忙吗？？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:49:47.447

如果您无法弄清楚为什么您的 css 在电子邮件中不起作用，您可能只想尝试使用内联样式。在过去，我发现一些电子邮件客户端似乎忽略了内部样式表中的类和某些规则。唯一可以正常工作的是内联样式和标签，例如 B.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:29:08.280

你可以去绝对定位。我在这里写了示例代码。请参考此链接[http://jsfiddle.net/shivkumarganesh/Fga2z/](http://jsfiddle.net/shivkumarganesh/Fga2z/)

是的，桌子也会有效率！

```
.table{
background:url('your image URL');
background-width:300px;
background-height:200px;
width:300px;
height:200px;
background-repeat:no-repeat"
}

<table class="table">
<tr>
<td></td>
</tr>
</table>
<!--Now make TD and TR tags and give them Custom height so that at least one cell is on the image.Then give that cell <td> a border eg.border:red 2px solid.--> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T19:32:56.110

根据我的经验，绝对位置应该可以使用。

只需确保至少添加`position: relative`到要放置矩形的容器中。否则它将被定位到文档正文的绝对位置。

像这样的东西应该可以解决问题：

```
<div class="container">
   <div class="rectangle"></div>
   <img src="....">
</div>

.container{
  position:relative;
}

.rectangle{
  position: absolute;
  bottom: 20px;
  right: 20px; 
  border: 2px solid red; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T19:35:53.513

我没有电子邮件客户端的功能支持经验，但是您不能`div`将此图像设置为`background-image`, 并用于`position:relative`将其他 div 放置在您需要的位置吗？

# python - PyQt 声子音频播放器

> ID：11351110
> 
> 赞同：1
> 
> 时间：2012-07-05T19:21:03.427
> 
> 标签：python, audio, pyqt, phonon

我正在使用 Mac OS X。我尝试使用此代码，直接取自 PyQt 文档：

```
source = Phonon.MediaSource("/Users/xxx/Desktop/audio.mp3")
player = Phonon.createPlayer(Phonon.MusicCategory, source)
media = Phonon.MediaObject(player)
media.play() 
```

而且我没有声音输出。

我真的只想播放一个音频文件……不知道为什么这不起作用。它直接取自文档：[http ://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/phonon-module.html#playback](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/phonon-module.html#playback)

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:18:21.837

这对我有用：

```
source = Phonon.MediaSource("test.ogg")
player = Phonon.createPlayer(Phonon.MusicCategory, source)
player.play() 
```

使用`MediaObject`你会做：

```
source = Phonon.MediaSource("test.ogg")
output = Phonon.AudioOutput(Phonon.MusicCategory)
media = Phonon.MediaObject()
media.setCurrentSource(source)
Phonon.createPath(media, output)
media.play() 
```

# javascript - 我想比较滚动条的高度和文档高度

> ID：11351111
> 
> 赞同：0
> 
> 时间：2012-07-05T19:21:08.997
> 
> 标签：javascript, scrollbar

我想要的是，在页面中的元素上传递鼠标时的示例，**然后强制增加滚动条的高度，在这种情况下，我想显示 alert box**。

我使用了以下代码

```
if(document.body.offsetHeight < document.body.scrollHeight ){
    alert('not Equal')
} 
```

我也使用`clientHeight`了函数而不是`offsetHeight`函数，但除了在 chrome 和 safari 浏览器中，他不能很好地工作。

更新....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T17:50:23.660

您无法使用 document.body 确定页面是否有滚动条，而是使用 div 容器，它必须具有溢出 css 属性和指定的高度和/或宽度。在此之后，如果内容大于容器的大小，您可以使用 .offsetHeight 和 .scrollHeight 来确定。

# javascript - 如何获取任何元素的渲染上边距

> ID：11351117
> 
> 赞同：3
> 
> 时间：2012-07-05T19:21:45.587
> 
> 标签：javascript, html, css, margin

我正在寻找一种可靠的方法来确定在浏览器中呈现的任何 DOM 节点的上边距。这应该适用于所有浏览器。我怎样才能做到这一点？（有时，一个元素可能在样式表中具有指定的边距，但它实际上可能不会由浏览器呈现，例如，如果它有`display:inline;`（参见[内联元素中的边距顶部](https://stackoverflow.com/questions/10324527/margin-top-in-inline-element)）。我正在寻找实际呈现的边距。因此，使用`getComputedStyle()`将不起作用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:09:55.747

好的，下面的方法有效吗？

检查元素是否内联显示，如果是，则边距顶部为 0

如果没有，则获得最高边距

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:09:59.987

可能有一种方法可以用 JQuery 做到这一点。如果这不是你想要的，我想你得到了我想要的，也许它可以帮助你找到一些东西。

```
function getRenderedTopMargin(id){
   var prevElementWidth;
   var elementOffset = $('#'+id).offset();
   var prevElementOffset = $('#'+id).prev().offset();
   if ($('#'+id).css("display") == 'inline' || $('#'+id).prev().css("display") == 'inline'){
       prevElementWidth = 0;
   }else{
       prevElementWidth = $('#'+id).prev().width();
   }
   return elementOffset.top - prevElementOffset.top - prevElementWidth;
} 
```

# iphone - 将多个视频资产添加到 AVMutableComposition

> ID：11351119
> 
> 赞同：2
> 
> 时间：2012-07-05T19:21:48.293
> 
> 标签：iphone, cocoa-touch, avassetexportsession, avmutablecomposition

`AVMutableComposition`在使用`AVAssetExportSession`. 但是，当我尝试在第一个视频轨道之后立即添加另一个视频轨道时，我遇到了问题。1）播放第一个视频，并且在 mov 文件的持续时间内冻结其最后一帧（第二个视频永远不会播放）。2) 在第二个视频完全播放之前，会显示一个黑框。3）会话根本不会导出。

我通过调整视频资产各自的时间范围来获得这些不同的结果`insertTimeRange:ofTrack:`.. 方法。

```
AVURLAsset *firstAsset = [AVURLAsset URLAssetWithURL:vidPathURL options:nil];
AVURLAsset *secondAsset = [AVURLAsset URLAssetWithURL:audPathURL options:nil];   
AVURLAsset *thirdAsset = [AVURLAsset URLAssetWithURL:vidPathURL2 options:nil]; 

AVMutableComposition* mixComposition = [[AVMutableComposition alloc] init];

AVMutableCompositionTrack *firstTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];

[firstTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, firstAsset.duration) ofTrack:[[firstAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] atTime:kCMTimeZero error:nil];

CMTime nextClipStartTime = CMTimeAdd(kCMTimeZero, firstAsset.duration);
CMTimeRange timeRange = CMTimeRangeMake(kCMTimeZero, thirdAsset.duration);
AVAssetTrack *secondVideoTrack = [[thirdAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
[firstTrack insertTimeRange:timeRange ofTrack:secondVideoTrack atTime:nextClipStartTime error:nil];

AVMutableCompositionTrack *secondTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];

[secondTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, secondAsset.duration) ofTrack:[[secondAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0] atTime:kCMTimeZero error:nil]; 

CGAffineTransform rotationTransform = CGAffineTransformMakeRotation(M_PI_2);
firstTrack.preferredTransform = rotationTransform;
    // export session 
```

有谁知道应该在这里调整什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:00:18.910

我的猜测是：
`[secondTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, secondAsset.duration) ofTrack:[[secondAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0] atTime:kCMTimeZero error:nil];`

应该替换为
`[secondTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, secondAsset.duration) ofTrack:[[secondAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0] atTime:firstAsset.duration error:nil];`

其次，您应该设置 AVMutableVideoCompositionLayerInstruction 对象的不透明度。我推荐[这个](http://www.raywenderlich.com/13418/how-to-play-record-edit-videos-in-ios)HowTo。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T21:37:36.007

添加音频轨道以及您要添加的第二个视频轨道。或者添加一个音轨，其持续时间等于您要添加的两个视频剪辑的长度。这个想法是让两个音频/视频轨道的长度相同。

# django - 如何查询我的 django 模型的 manyToMany 字段？

> ID：11351126
> 
> 赞同：1
> 
> 时间：2012-07-05T19:22:04.210
> 
> 标签：django, django-queryset

我正在开发一个 django 应用程序来管理我的曲棍球池，但在定义查询时遇到了麻烦。相关模型如下所示：

```
class Player(models.Model):
    name = models.CharField(max_length=100)

class Team(models.Model):
    pool = models.ForeignKey(Pool)
    manager = models.ForeignKey(User)
    active_players = models.ManyToMany(Player) 
```

在我的一个观点中，我想查看每个玩家，并找出该玩家是否为某人所有。如果不是，则将它们添加到传递给模板的列表中。

除了查询他们是否是具有特定 pool.id 且在其 active_player 列表中有特定玩家的团队之外，我已经完成了所有工作。到目前为止我有这个：

```
players = Player.objects.all()
for player in players:
    teams = Team.objects.filter(???not sure what to put here???)
    #and then something here to check if teams is empty 
```

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T19:31:01.803

如果您有该球员，那么您可以通过以下方式访问该球员被分配到的球队：

```
player.team_set.all() 
```

如果您只想获取不在团队中的玩家列表，则更容易：

```
Player.objects.filter(team__isnull=True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:35:51.600

试试这样的东西：

```
without_team = []
for player in Player.objects.all():
    if not Team.objcets.filter(active_players__in=[player]):
        without_team.append(player) 
```

未经测试的代码片段

# php - 在 PHP 头文件中处理特定于页面的 JavaScript

> ID：11351131
> 
> 赞同：0
> 
> 时间：2012-07-05T19:22:17.530
> 
> 标签：php, javascript

在使用 PHP 设计网站时，您通常会`header.php`在网站的每个页面中包含一个文件。该`header.php`文件将包括`<head>`标签（除其他外）。但是，我经常发现我需要将特定于页面的 JavaScript 放在`<head>`标记中。

我过去处理这个问题的方法是在我的标题中添加 IF 语句以确定应该输出哪些 JavaScript 片段（即，如果这是*主页，则输出**主页*所需的 JavaScript ，如果这是*关于页面，输出**关于*页面所需的 JavaScript等）。

这可能是一种糟糕的方法。标准做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:27:16.440

好吧，首先，`<script>`标签不需要位于标题中。将它们放在 HTML 文档中的任何位置都是完全有效的。

但是，如果您决定将它们包含在标头中，一个简单的解决方案是声明一个标头应回显的变量，其中包含您的脚本标签。例如：

```
<?php
$scripts = "<script src='script.js' type='text/javascript'></script>";
include("header.php");
?> 
```

然后你的 header.php 脚本如下所示：

```
<html>
<head>
<!-- header stuff goes here -->
<?php /*echo out scripts */ echo $scripts; ?>
</head>
<body>
<!-- part of body goes here --> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T19:27:49.713

假设您实际上在每个文件中都包含 header.php，只需在包含 header.php 之前定义一个数组并将额外的脚本添加到该数组中。然后在 header.php 中，让它检查该数组并在必要时写出额外的脚本标签：

我的页面.php：

```
$extra_scripts = array('jquery.js','jquery-ui.js');
include('header.php');
// Rest of your code. 
```

header.php：

```
if (is_array($extra_scripts)) {
   foreach( $extra_scripts as $script ) {
         // Render a script tag
   }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T19:26:32.787

如果你使用像[Twig](http://twig.sensiolabs.org/)这样的模板引擎，你可以继承一个*基本*模板而不是包含一个页眉和一个页脚，并修改在该基础中定义的“块”。

例如，您的基本模板可能包括一个内容块和一个 header_javascript 块，如下所示

```
{% block header_javascript %}
<script src='/js/jquery.js' type='text/javascript'></script>
{% endblock %} 
```

然后，在您的子模板中，您可以覆盖此块，调用`{{ parent() }}`然后添加您的其他特定于页面的脚本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-05T19:34:59.343

我可以看到你的问题已经回答得很清楚了。但我想补充一点。

`script`好吧，从技术上讲，将标签放在文档中的任何位置都是有效的，但除非必要，否则最好将脚本放在文档的末尾。它会让访问者仍然看到你的 html 和 javascript 尚未下载，顺便说一句，通常你不需要运行你`DOM`的脚本，直到准备好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-05T19:25:57.517

我就是这样做的：

```
<!DOCTYPE html>
<html lang="en"> 
<head>
    <title>Page Title</title>
    <meta name="description" content="Page Description" />

    <!-- Includes header stuff, css, js, google analytics, etc.. -->
    <? include('header.php'); ?>

</head>
<body>
 ... 
```

这使我可以避免重复编码，同时增加页面的灵活性。

# javascript - 一个表单域贯穿两个 DIVS

> ID：11351132
> 
> 赞同：0
> 
> 时间：2012-07-05T19:22:23.087
> 
> 标签：javascript, html

有没有办法我可以通过两个 div 设置一个表单字段？基本上病态有一个 div 向左浮动，一个 div 向右浮动，并且通过这两个 div 病有一些表单域展开。我将如何处理这个问题，或者我应该像下面那样做？

```
<FORM>
<DIV float left>
...fields...
</DIV>
<DIV float right>
...more fields ... and submit ...
</DIV>
</FORM> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:24:05.067

您的示例结构应该可以正常工作

# javascript - 在 javascript 中创建 ul 和 li 元素。

> ID：11351135
> 
> 赞同：29
> 
> 时间：2012-07-05T19:22:38.403
> 
> 标签：javascript

我正在尝试使用 javascript 在我的代码中创建 ul 和 li 元素。我有以下内容：

```
var test=document.createElement('section');
test.setAttribute('id','test');

var ul=document.createElement('ul');

document.body.appendChild(test);
test.appendChild(ul);

for (var i=0; i<array.length; i++){

    var li=document.createElement('li');

    ul.appendChild(li);
    li.innerHTML=li.innerHTML + array[i];

} 
```

我的数组是使用 php 中的 json_encode 解析的

```
array[0]='aaa';
array[1]='bbb';
array[2]='ccc'; 
```

CSS

```
section { 

    display: block;
    width: 200px;
    margin: 50px auto;
    border: 3px solid red;

} 
```

一切正常，除了列表样式点在我的部分标记之外。

它在 Chrome 和 IE 中显示如下，但 Firefox 工作正常。

```
 -------------
*| aaa       |
*| bbb       |
*| ccc       |
 ------------- 
```

我想要我的部分标签内的点。有人知道吗？非常感谢。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2015-08-07T09:03:28.923

这是我的工作代码：

```
<!DOCTYPE html>
<html>
<head>
<style>
   ul#proList{list-style-position: inside}
   li.item{list-style:none; padding:5px;}
</style>
</head>
<body>
    <div id="renderList"></div>
</body>
<script>
    (function(){
        var ul = document.createElement('ul');
        ul.setAttribute('id','proList');

        productList = ['Electronics Watch','House wear Items','Kids wear','Women Fashion'];

        document.getElementById('renderList').appendChild(ul);
        productList.forEach(renderProductList);

        function renderProductList(element, index, arr) {
            var li = document.createElement('li');
            li.setAttribute('class','item');

            ul.appendChild(li);

            li.innerHTML=li.innerHTML + element;
        }
    })();
</script>
</html> 
```

[在这里](http://jsfiddle.net/sunnysm/so7qfg9p/)工作的jsfiddle示例

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-05T19:26:27.263

使用`CSS`属性`list-style-position`来定位子弹：

```
list-style-position:inside /* or outside */; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-24T10:06:18.067

试试下面的代码片段：

```
 var list = [];
 var text;

function update() {
    console.log(list);    

    for (var i = 0; i < list.length; i++) {
       console.log( i );
       var letters;
       var ul = document.getElementById("list");
       var li = document.createElement("li");

       li.appendChild(document.createTextNode(list[i]));
       ul.appendChild(li);

       letters += "<li>"  + list[i] + "</li>";
    }

 document.getElementById("list").innerHTML = letters;

}

function myFunction() {
    text = prompt("enter TODO");  
    list.push(text);
    update();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-10T05:57:52.537

那很好。让我们创建一个简单的函数，它接受一个数组并在 div 标签内打印我们的有序列表视图/列表。

第 1 步：假设您有一个带有“contentSectionID”ID 的 div。`<div id="contentSectionID"></div>`

第 2 步：然后我们创建我们的 javascript 函数，该函数返回一个列表组件并接受一个数组：

```
function createList(spacecrafts){

var listView=document.createElement('ol');

for(var i=0;i<spacecrafts.length;i++)
{
    var listViewItem=document.createElement('li');
    listViewItem.appendChild(document.createTextNode(spacecrafts[i]));
    listView.appendChild(listViewItem);
}

return listView;
} 
```

第 3 步：最后我们选择我们的 div 并在其中创建一个列表视图：

```
document.getElementById("contentSectionID").appendChild(createList(myArr)); 
```

# unix - 使用unix shell命令的csv文件字段中的最大字符数？

> ID：11351138
> 
> 赞同：1
> 
> 时间：2012-07-05T19:23:15.673
> 
> 标签：unix, command-line, csv, text-processing

我有一个 csv 文件。在其中一个字段中，比如第二个字段，我需要知道该字段中的最大字符数。例如，给定以下文件：

```
adf,jlkjl,lkjlk
jf,j,lkjljk
jlkj,lkejflkj,adfafef,
jfje,jj,lkjlkj
jjee,eeee,ereq 
```

答案是 8，因为第 3 行的第二个字段中有 8 个字符。我想将其集成到 bash 脚本中，因此首选常见的 unix 命令行程序。用于解释命令正在做什么的想象加分。

编辑：这是我到目前为止所拥有的

```
cut --delimiter=, -f 2 test.csv | wc -m 
```

这给了我所有字段的字符数，而不仅仅是一个，所以我还有进步。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:52:00.133

我会用`awk`这个任务。它使用逗号分隔字段中的行，并为每一行检查第二个字段的长度是否大于已保存的值。

```
awk '
    BEGIN { 
        FS = "," 
    } 
    { c = length( $2 ) > c ? length( $2 ) : c } 
    END { 
        print c 
    }
' infile 
```

将其用作单行并将返回值分配给变量，例如：

```
num=$(awk 'BEGIN { FS = "," } { c = length( $2 ) > c ? length( $2 ) : c } END { print c }' infile) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-27T23:17:56.157

好吧@oob，您基本上在上次编辑时提供了答案，这是给出的所有答案中最简单的。但是，我也喜欢@Birei 的回答，因为我喜欢 AWK。:-)

今天，我也必须在文本文件中找到给定字段的最长可能值。用您的样品进行了测试，得到了预期的 8。

`cut -d, -f2 test.csv | wc -L`

如您所见，只需使用正确的选项即可`wc`（我希望您现在已经想到了）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T19:55:57.783

我的解决方案是遍历线路。比我用新行交换逗号来循环*单词*，而不是检查哪个是最长的单词并保存数据。

```
#!/bin/bash

lineno=1
matchline=0
matchlen=0
for line in $(cat input.txt); do
        words=`echo $line | sed -e 's/,/\n/g'`
        for word in $words; do
#               echo "line: $lineno; length: ${#word}; input: $word"
                if [ $matchlen -lt ${#word} ]; then
                        matchlen=${#word}
                        matchline=$lineno
                fi
        done;
        lineno=$(($lineno + 1))
done;

echo max length is $matchlen in line $matchline 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T23:11:06.477

### Bash 和 Coreutils 解决方案

有很多方法可以解决这个问题，但我投票赞成简单。这是一个使用 Bash 参数扩展和一些标准 shell 实用程序来测量每一行的解决方案：

```
cut -d, -f2 /tmp/foo |
while read; do
    echo ${#REPLY}
done | sort | tail -n1 
```

这里的思路是拆分CSV文件，然后使用隐式*REPLY变量的*[参数长度扩展](http://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html#Shell-Parameter-Expansion)来测量每一行的字符。当我们对测量值进行排序时，排序输出的最后一行将保存找到的最长行的长度。

 ** * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-05T02:57:18.993

1.  剪下所需的列
2.  打印每行长度
3.  对行长进行排序
4.  获取最大线长

`cut -d, -f2 test.csv | awk '{print length($0);}' | sort -n | tail -n 1`*

# python - 查找具有多个值的 xml 元素

> ID：11351153
> 
> 赞同：2
> 
> 时间：2012-07-05T19:24:13.803
> 
> 标签：python, xpath, elementtree, findall, multiple-value

我可以使用 xml.etree.ElementTree 中的 element.findall() 在单个属性中查找具有多个值的元素吗？

我可以使用它来查找所有带有 class="day" 的 div 元素：

```
from xml.etree.ElementTree import ElementTree

calendar = ElementTree()
calendar.parse("calendar-week.xml")

calendar.findall('.//div[@class="day"]') 
```

或者这个来查找所有具有 class="first day" 的 div 元素：

```
calendar.findall('.//div[@class="first day"]') 
```

但是有没有办法在他们的班级中找到所有带有“day”的div元素？我找不到任何有关如何执行此操作的文档。有没有办法在这里使用正则表达式？

```
<body>
   <div class="calendar-week">
      <div class="first day" id="su">Sunday</div>
      <div class="day" id="mo">Monday</div>
      <div class="day" id="tu">Tuesday</div>
      <div class="day" id="we">Wednesday</div>
      <div class="day" id="th">Thursday</div>
      <div class="day" id="fr">Friday</div>
      <div class="last day" id="sa">Saturday</div>
      <div class="clear-float"></div>
   </div><!-- /calendar-week -->
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:33:30.040

这个 xpath 是你通常会这样做的方式：

```
'//div[contains(concat(" ", @class, " "), " day ")]' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T04:17:17.890

此代码基于@stranac 的答案中提供的 xpath 术语工作

```
from lxml import etree as ET

calendar = ET.ElementTree()
calendar.parse("calendar-week.xml")

elem_list = calendar.xpath('//div[contains(concat(" ", @class, " "), " day ")]') 
```

# javascript - 在Javascript中迭代bean？

> ID：11351157
> 
> 赞同：0
> 
> 时间：2012-07-05T19:24:21.397
> 
> 标签：javascript, json, jstl

我们通常在 jsp 上执行类似 JSTL 的操作……但我现在需要使用 JSON 在 javascript 中设置数据。我将如何在 Javascript/JSON 中做这样的事情

基本上循环一个bean并拉出它的参数：

```
 <c:forEach var="field" items="${detFields}">
      ${field.groupName}
          ${field.breakoutAllowed}           
 </c:forEach> 
```

所以我可以把它放在这样的东西里面：

```
 "data": [{
        "value": "${field.groupName}"

    }, {

        "value": "${field.breakoutAllowed}"  
    }] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:04:22.180

希望此代码运行良好并受到您的喜爱。我认为将 scriptlet 写入 JS 是一种奇怪的做法，所以只是提出了另一种接近它的方法。如有需要请发表评论。

```
$(document).ready(function(){
    var k=$('#data').val();

    //Convert the value into the required array. Since writing it is JavaScript directly is not a daily practice.
    })

    <input type="hidden" id="data" value=
     <c:forEach var="field" items="${detFields}" varStatus="status">
       { 
         "name":"${field.groupName}",
         "breakoutAllowed":"${field.breakoutAllowed}" 
       }
       <c:if test="${not status.last}">,</c:if>
     </c:forEach>

     /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:35:06.187

看起来您正在寻找的 JSON 结构是一个对象数组，每个对象都有两个属性：`name`和`breakoutAllowed`. 将此数据分配给变量的 JavaScript 可以像这样从 JSP 文件中输出。（当然，在一个`<script>`块或等效的范围内。）

```
var output = [
 <c:forEach var="field" items="${detFields}" varStatus="status">
   { 
     "name":"${field.groupName}",
     "breakoutAllowed":"${field.breakoutAllowed}" 
   }
   <c:if test="${not status.last}">,</c:if>
 </c:forEach>
] 
```

# xml - 具有动态加载选项和鼠标悬停的 Actionscript 3 菜单

> ID：11351159
> 
> 赞同：0
> 
> 时间：2012-07-05T19:24:28.483
> 
> 标签：xml, actionscript-3, flash-cs5

处理（如标题所述）带有鼠标悬停的动态加载选项的菜单。

我看到的事件链（这可能是有缺陷的）是：

• 使用循环为XML 文件中的每个条目放置一个空的MovieClip，每次下降多个像素。我们将这些称为“条目”。

• 在每个条目中添加一个textField（来自XML 的文本），绘制一个alpha=0 的矩形（作为鼠标悬停时的突出显示），然后从库中添加另一个影片剪辑。

•将鼠标悬停和鼠标移出事件监听器添加到每个“条目”，将不可见矩形设置为alpha=1，并从库中更改文本和影片剪辑的颜色。

以下是启动所有这些的函数。*编辑：修复了更多非常愚蠢的东西。

```
//Load List Options
function loadHighlight():void
{
    var yTmp:Number = 0; 
    for (var i:Number = 0; i < photo_total; i++)
    {
        var Highlight:MovieClip = new MovieClip();
        photoHighlights[i] = Highlight;
        photoHighlights[i].addEventListener(MouseEvent.MOUSE_OVER, highlightOvr);

        //Draw Invisible Rectangle
        var rectngle:Shape = new Shape();
        rectngles[i] = rectngle;
        rectngles[i].graphics.beginFill (0x0DAC54);
        rectngles[i].graphics.drawRect(0, 0, 1170, 144);
        rectngles[i].graphics.endFill();
        rectngles[i].alpha = 0;
        rectngles[i].y=yTmp;
        rectngles[i].x= 0;
        photoHighlights[i].addChildAt(rectngles[i], 0);

        //Load photosArray
        var photoname = photo_data[i].@TEXT;;
        var photolist:TextField = new TextField();
        photosArray[i] = photolist;
        photosArray[i].textColor = 0x0DAC54;
        photosArray[i].x = 26.95;
        photosArray[i].y = 92.65;
        photosArray[i].embedFonts = true;
        photosArray[i].antiAliasType = AntiAliasType.ADVANCED;
        photosArray[i].defaultTextFormat = listformat;
        photosArray[i].selectable = false;
        photosArray[i].wordWrap = true;
        photosArray[i].text = photoname;
        photosArray[i].autoSize = TextFieldAutoSize.LEFT;
        photosArray[i].mouseEnabled = false;
        photoHighlights[i].addChildAt(photosArray[i], 1);

        //Load thumbFrames
        var thumbFrame:thmbFrame = new thmbFrame();
        thumbFrame.x= 962;
        thumbFrame.y= 21;
        photoHighlights[i].addChildAt(thumbFrame, 1);
        thmbFrames.push(thmbFrame);

        MediaPage.photoSelect.photoList.addChild(photoHighlights[i]);
        yTmp = yTmp + 153;
    }
}

function  highlightOvr(event:MouseEvent):void
{
    event.target.rectngles.alpha=1;             
    event.target.photosArray.textColor = 0x000000;
    event.target.thmbFrames.color = 0x000000;
    event.target.addEventListener(MouseEvent.MOUSE_OUT, highlightOut);  
}

function  highlightOut(event:MouseEvent):void
{
    event.target.rectngles.alpha = 0;
    event.target.photosArray.textColor = 0x0DAC54;
    event.target.thmbFrames.color = 0x0DAC54;
    event.target.removeEventListener(MouseEvent.MOUSE_OUT, highlightOut);
} 
```

现在的问题已成为回溯放置的movieClips 的子代的问题之一。我知道这是不对的：

```
event.target.rectngles.alpha = 0; 
```

我只是不知道是什么。我如何引用生成的movieClips 和他们的孩子？

我知道有一个简单的方法可以做到这一点，但我不知道它是什么。

此外，根据 ShaunHusain 的回应，我这样做的方式似乎有点令人费解。非常感谢任何指向措辞清晰的资源的链接，这些资源解释了实现这一目标的更有效方法。

再次感谢，-T。

编辑：修复了我所做的一些非常愚蠢的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T23:23:06.123

我正在寻找的非常简单的答案是使用 getChildAt 命令。所以而不是：

```
function  highlightOvr(event:MouseEvent):void
{
    event.target.rectngles.alpha=1;             
    event.target.photosArray.textColor = 0x000000;
    event.target.thmbFrames.color = 0x000000;
    event.target.addEventListener(MouseEvent.MOUSE_OUT, highlightOut);  
} 
```

它应该是：

```
function  highlightOvr(event:MouseEvent):void
{
    event.target.getChildAt(0).alpha=1;             
    event.target.getChildAt(1).textColor = 0x000000;
    event.target.getChildAt(2).color = 0x000000;
    event.target.addEventListener(MouseEvent.MOUSE_OUT, highlightOut);  
} 
```

我可能会补充说 .color 命令使用不正确。我试图将其应用于影片剪辑，但我需要使用我想要的颜色创建一个新的 ColorTransform 变量，并像这样应用它：

```
var MyColorTransform:ColorTransform = new ColorTransform();
MyColorTransform.color = 0x000000;

event.target.getChildAt(2).transform.colorTransform = MyColorTransform; 
```

# c# - 使用 + 的字符串连接是否针对 .NET 中的 StringBuilder 实现进行了优化？

> ID：11351160
> 
> 赞同：2
> 
> 时间：2012-07-05T19:24:29.667
> 
> 标签：c#, java, .net, string, optimization

我已经阅读了多个地方，在 Java 1.5+ 中，`String`连接被优化为`StringBuilder`在编译程序时使用 a 。我不清楚这是标准还是许多编译器采用的常见优化。对此的任何澄清将不胜感激，但主要是我的第二个问题的引导。

.NET 是否同样优化？我知道，如果我使用`StringBuilder`它会消除任何歧义，但我个人发现它的简单性`+`更易于阅读。如果 .NET 有，这是否从特定版本开始？详细说明是赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T19:29:16.157

来自 MSDN：

> 字符串对象连接操作总是从现有字符串和新数据创建一个新对象。StringBuilder 对象维护一个缓冲区来容纳新数据的连接。如果空间可用，则将新数据附加到缓冲区；否则，分配一个新的更大的缓冲区，将原始缓冲区中的数据复制到新缓冲区，并将新数据附加到新缓冲区。
> 
> String 或 StringBuilder 对象的串联操作的性能取决于内存分配的频率。String 连接操作总是分配内存，而 StringBuilder 连接操作仅在 StringBuilder 对象缓冲区太小而无法容纳新数据时才分配内存。如果要连接固定数量的 String 对象，请使用 String 类。在这种情况下，编译器甚至可以将单独的串联操作组合成一个操作。如果要连接任意数量的字符串，请使用 StringBuilder 对象；例如，如果您使用循环连接随机数量的用户输入字符串。

[http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:33:07.670

希望这将使您对 StringBuilder 有更好的看法，然后使用 + 进行字符串连接

> 性能注意事项
> 
> 字符串对象连接操作总是从现有字符串和新数据创建一个新对象。StringBuilder 对象维护一个缓冲区来容纳新数据的连接。如果空间可用，则将新数据附加到缓冲区；否则，分配一个新的更大的缓冲区，将原始缓冲区中的数据复制到新缓冲区，并将新数据附加到新缓冲区。
> 
> String 或 StringBuilder 对象的串联操作的性能取决于内存分配的频率。String 连接操作总是分配内存，而 StringBuilder 连接操作仅在 StringBuilder 对象缓冲区太小而无法容纳新数据时才分配内存。如果要连接固定数量的 String 对象，请使用 String 类。在这种情况下，编译器甚至可以将单独的串联操作组合成一个操作。如果要连接任意数量的字符串，请使用 StringBuilder 对象；例如，如果您使用循环连接随机数量的用户输入字符串。

[MSDN](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder%28v=vs.100%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T19:29:09.143

不，+ 运算符未使用 .NET 中的 StringBuilder 进行优化。在 MSDN 中，有一个提到，如果你想加快字符串操作，你可以使用 StringBuilder

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T19:27:20.587

不，AFAIK .NET 不会自动执行此操作，您需要具体说明。`+`每次使用都会创建一个新字符串，因为字符串类型是不可变的。

我建议阅读此示例：[连接字符串的最有效方法？](https://stackoverflow.com/questions/21078/whats-the-best-string-concatenation-method-using-c)

`Hint`- 接受的答案可能并不总是正确的。

这：[http ://en.csharp-online.net/Manipulating_Strings_in_CSharp%E2%80%94Concatenating_Strings](http://en.csharp-online.net/Manipulating_Strings_in_CSharp%E2%80%94Concatenating_Strings)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T15:41:06.083

如果在一次操作中使用 连接多个字符串`String.Concat`，.net 会将它们的长度相加，创建一个合适大小的新字符串对象，并将源字符串中的所有字符复制到新字符串中。如果您在一次`String.Concat`调用中执行四个或更少的字符串，则会创建一个新对象（新字符串）；除非旧字符串之一被废弃并因此变成垃圾，否则不会创建“垃圾”。如果您连接五个或更多字符串，`String[]`将创建一个新的临时变量来保存参数，但它会很小且寿命很短（因此相对无害），无论字符串的长度如何，除非您传递了数千个的参数。

`+`此外，可以使用C# 中的运算符或 vb.net 中的`+`or运算符连接任意数量的常量字符串`&`，编译器会将它们变成一个更大的常量字符串。我不确定是什么规则规定了 C# 或 vb.net 编译器将字符串合并到包含多个常量和非常量字符串的表达式中的程度（尤其是在涉及括号的情况下）；根据需要使用`String.Concat`带有尽可能多参数的调用，但使用`+`在参数中合并常量字符串，在任何情况下都应该产生最佳代码。

# python - 如何使用 Facebook graph api for python-tornado 阅读 facebook 用户的电子邮件？

> ID：11351163
> 
> 赞同：3
> 
> 时间：2012-07-05T19:24:35.113
> 
> 标签：python, facebook-graph-api, tornado

我已将“电子邮件”包含在扩展参数范围内。如何阅读龙卷风对象中的电子邮件？

我的 LoginHandler 看起来像这样：

```
class LoginHandler(tornado.web.RequestHandler, tornado.auth.FacebookGraphMixin):
    @tornado.web.asynchronous
    def get(self):
        userID = self.get_secure_cookie('user_id')

        if self.get_argument('code', None):
            self.get_authenticated_user(
                redirect_uri='http://localhost:8000/auth/login',
                client_id=self.settings['facebook_api_key'],
                client_secret=self.settings['facebook_secret'],
                code=self.get_argument('code'),
                callback=self.async_callback(self._on_facebook_login))

            return
        elif self.get_secure_cookie('access_token'):
            self.redirect('/')
            return

        self.authorize_redirect(
            redirect_uri='http://localhost:8000/auth/login',
            client_id=self.settings['facebook_api_key'],
            extra_params={'scope': 'email'}
        )

    def _on_facebook_login(self, user):
        if not user:
            self.clear_all_cookies()
            raise tornado.web.HTTPError(500, 'Facebook authentication failed')

        self.set_secure_cookie('user_id', str(user['id']))
        self.set_secure_cookie('user_name', str(user['name']))
        self.set_secure_cookie('access_token', str(user['access_token']))
        self.redirect('/') 
```

我需要在一个对象中收集电子邮件并将其插入数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:24:24.103

就在几天前，我确实遇到了同样的问题。Facebook 文档并不能真正帮助您使用 API。你必须四处挖掘。

Anw，解决方案是制作一个 facebook_request() 并获取用户个人资料。在该用户配置文件中，您可以找到用户的电子邮件。将请求放入登录回调中。

请求如下所示：

```
self.facebook_request("/me", access_token=user["access_token"], callback=self._save_user_profile) 
```

您可以从 _on_facebook_login() 回调中返回的“用户”对象访问用户令牌。现在定义另一个名为 _save_user_profile() 的回调。

```
def _save_user_profile(self, user):
        if not user:
            raise tornado.web.HTTPError(500, "Facebook authentication failed.")
        try:
            User.objects(email=user['email']).get()
        except DoesNotExist, e:            
            new_u = User()
            new_u.first_name = user['first_name']
            new_u.last_name = user['last_name']
            new_u.email = user['email'] #THIS IS WHAT YOU NEED
            new_u.username = user['username']
            new_u.gender = user['gender']
            new_u.locale = user['locale']
            new_u.fb_id = user['id']
            new_u.save()    
        else:
            #User exists
            pass 
```

# sql - 如何在 Oracle sp 中使用 Cast

> ID：11351167
> 
> 赞同：1
> 
> 时间：2012-07-05T19:24:56.203
> 
> 标签：sql, oracle

在以下“AND CAST(FLAGS AS BIGINT) & 1 = 1”如何为 Oracle sp 编写此代码时，我们必须允许应用程序也处理 Oracle 用户。

```
ALTER PROCEDURE [OGEN].[DBD_GET_STOCK_SUMMARY]
@FACILITY_KEY VARCHAR(1000),
@START_DATE DATETIME,
@END_DATE DATETIME
AS
BEGIN
    SELECT COUNT(*) COUNT, OGEN.DATEONLY(CREATED_ON) [DATE]
    FROM OGEN.NDC_M_FORMULARY

    WHERE OGEN.DATEONLY(CREATED_ON) BETWEEN OGEN.DATEONLY(@START_DATE) AND OGEN.DATEONLY(@END_DATE)
    AND FACILITY_KEY IN (SELECT VALUE FROM OGEN.COMMA_TO_TABLE(@FACILITY_KEY)) 
    **AND CAST(FLAGS AS BIGINT) & 1 = 1**
    GROUP BY OGEN.DATEONLY(CREATED_ON) 
END 

GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:34:12.440

代替`BIGINT`，您可以通过 `NUMBER`以下`BINARY_INTEGER`方式在 oracle 中使用...

```
CAST (FLAGS  AS NUMBER(19)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T15:40:20.310

```
select count(*) count, trunc(CREATED_ON) "DATE"
  from NDC_M_FORMULARY
 where trunc(CREATED_ON) BETWEEN trunc(:startDate) AND trunc(:endDate)
   and FACILITY_KEY IN (select cast (regexp_substr(:facilityKey,'[^,]+', 1, level) as number)
                          from dual
                       connect by regexp_substr(:facilityKey, '[^,]+', 1, level) is not null)
   and bitand(cast (flags as int), 1) = 1
 group by trunc(CREATED_ON) 
```

# apache - 如何破解来自 Apache HTTPD 的 HTML 响应？

> ID：11351173
> 
> 赞同：0
> 
> 时间：2012-07-05T19:25:11.443
> 
> 标签：apache

我需要为 HTTPD 处理的每个页面包含一些 HTML 片段（到 HEAD 元素中）。为什么？我需要破解一些本地 JavaScript 函数以满足安全策略的需要。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:41:20.613

如果您可以编辑现有的 HTML 文件，则可以使用 mod_include [http://httpd.apache.org/docs/2.2/mod/mod_include.html 。](http://httpd.apache.org/docs/2.2/mod/mod_include.html)如果您不想这样做，则需要创建一个自定义过滤器来对 HTML 进行后期处理。您可以使用 mod_filter [https://httpd.apache.org/docs/2.2/filter.html添加自定义过滤器](https://httpd.apache.org/docs/2.2/filter.html)

# nhibernate - 重复查询不会刷新返回对象的属性

> ID：11351174
> 
> 赞同：0
> 
> 时间：2012-07-05T19:25:11.637
> 
> 标签：nhibernate, session, caching

使用 NHibernate 进行条件查询时，我想从缓存中获取新结果而不是旧结果。

该过程基本上是：

1.  在 NHibernate 应用程序中查询持久对象。
2.  从外部更改数据库条目（另一个程序，在 SSMS/MSSQL 中手动编辑等）。
3.  查询持久性对象（具有相同的查询代码），以前加载的对象应从数据库中刷新。

这是代码（稍微更改了对象名称）：

```
public IOrder GetOrderByOrderId(int orderId)
{    
...
IList result;
var query = 
    session.CreateCriteria(typeof(Order))
        .SetFetchMode("Products", FetchMode.Eager)
        .SetFetchMode("Customer", FetchMode.Eager)
        .SetFetchMode("OrderItems", FetchMode.Eager)
        .Add(Restrictions.Eq("OrderId", orderId));
query.SetCacheMode(CacheMode.Ignore);
query.SetCacheable(false);

result = query.List();
...
} 
```

我添加了 SetCacheMode 和 SetCacheable 来禁用缓存。此外，NHibernate 工厂使用配置参数 UseQueryCache=false 设置：

```
Cfg.SetProperty(NHibernate.Cfg.Environment.UseQueryCache, "false"); 
```

无论我为查询或会话做什么，包括 Put/Refresh 缓存模式：NHibernate 在第二次调用查询时不断返回我过时的对象，而没有外部提交的更改。顺便说一句，信息：在这种情况下，过时的值是版本列的值（测试是否可以在保存之前检测到陈旧的对象状态）。但出于多种原因，我需要新的查询结果！

NHibernate 甚至生成一个 SQL 查询，但它从不用于返回的值。

保持会话打开对于仅对脏列进行动态更新是必要的（也没有用于解决方案的无状态会话！）；我不想在代码中到处添加 Clear()、Evict() 或类似的东西，特别是因为查询处于较低级别并且不记得以前加载的对象。悲观锁定会降低性能（多用户环境！）

有没有办法通过配置强制 NHibernate 将查询直接发送到数据库并获得新的结果，而不是使用不需要的缓存功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:57:32.687

首先：这与二级缓存（即什么和控制）没有**任何关系。**即使是这样，那些控制查询的缓存，而不是返回实体的缓存。`SetCacheMode``SetCacheable`

当一个对象已经被加载到当前会话中时（也被一些人称为“一级缓存”，虽然它不是缓存而是一个[身份映射](http://martinfowler.com/eaaCatalog/identityMap.html)），使用任何方法从数据库中再次查询它都**不会**覆盖它的值。

这是设计使然，并且有充分的理由这样做。

如果您需要使用查询更新多条记录中可能更改的值，**则**必须`Evict`事先更新它们。

或者，您可能想阅读[Stateless Sessions](http://www.nhforge.org/doc/nh/en/index.html#batch-statelesssession)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:08:52.913

此代码是否在事务中运行？还是该外部进程在事务中运行？如果这两个中的一个仍在交易中，您将看不到任何更新。

如果不是这种情况，您可能会在 NHibernate 创建的日志消息中找到问题。这些信息非常丰富，并且总是会告诉您它在做什么。

> 保持会话打开对于仅对脏列进行动态更新是必要的

这要么是问题，要么将来会成为问题。NHibernate 正在尽一切努力让您的生活更美好，但您正在尝试尽可能多地阻止 NHibernate 正常工作。

如果您希望 NHibernate 仅更新脏列，您可以查看类映射文件中的[`dynamic-update`-attribute](http://www.nhforge.org/doc/nh/en/#mapping-declaration-class)。

# javascript - 在图像下滚动内容而不会中断

> ID：11351175
> 
> 赞同：0
> 
> 时间：2012-07-05T19:25:15.363
> 
> 标签：javascript

我有一个 div 从另一个 html 页面加载内容，上面有一个横幅。我想知道在技术上是否有可能创建一个移动的文本，而不是在旗帜下，所以没有中断。

我正在使用 jScrollPane：

```
<li id="menu1"><div class="link-bg"><a href="#sur-toute-la-ligne">SUR TOUTE LA LIGNE</b></a></div></li> 
```

你给了我什么建议？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:28:25.690

使用 z-index 将其放在顶部？

```
#menu1 {
  position:relative;
  z-index:9999;
} 
```

# core-data - 使用 CoreData 保存/加载游戏的系统

> ID：11351176
> 
> 赞同：1
> 
> 时间：2012-07-05T19:25:15.363
> 
> 标签：core-data, nsmanagedobject, uimanageddocument

我一直在尝试使用 Core Data 为游戏构建一个简单的加载/保存系统。

保存、加载和创建我的 UIManagedDocument 工作正常。在我的存档游戏实体中设置和加载属性值也可以正常工作。

问题是当我的应用退出时这些值会丢失，因为我不知道如何访问它们。

我的存档实体中有大约 200 个属性，例如 (NSNumber *)currentIncome`NSNumber *currentMoney, NSNumber *currentMonth`等。看起来很简单，对吧？如果我将这些属性分组为具有关系的属性，我最终可能会得到大约 20 个属性。根据我从核心数据编程指南中收集到的内容，为了使用保存的 UIManagedDocument 中的值填充实体，我需要使用填充结果数组的谓词执行 fetchrequest。

这是我的第一个问题出现的地方：我是否需要为每个属性执行 fetchrequest？如果您只有几个属性或者如果您有“多”关系，这似乎很有用。就我而言，这似乎非常乏味。

我可能在这里遗漏了一些非常重要的东西，但我需要类似的东西，但我`load my UIManagedDocument and automatically fill my NSManagedModel with the one that was saved in the document's context`找不到。

这就是我的第二个问题出现的地方：CoreData 和 UIManagedDocument 甚至是正确的方法吗？200 个变量对于 NSUserDefaults 来说太多了——不过我可以想象使用 NSCoding。我肯定想在以后合并 iCloud 存档游戏共享，而 UIManagedDocument 和 CoreData 似乎非常适合这一点。

* * *

已解决：我刚刚重写了整个 Core Data 获取代码（20 行到 10 行左右）。对没有谓词的实体执行 fetchrequest 显然会返回整个实体。如果我的`(NSArray *)`fetchedResults 出现 nil（*数据库为空*），我将我的 savegame 实体的一个新实例插入到我的 managedobjectcontext 中。如果它出现非零，我只做 a`(NSManagedObject *)saveGame = [fetchedResults lastObject]`并且每个值都可以正常加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:45:17.750

从数据库的角度来看，这听起来像是一个数据库，其中包含一个`saveGame`包含 200 列`currentMoney, currentMonth`等的表。然后，您的数据库中有一行表示当前游戏状态。

这`NSFetchRequest`相当于数据库`SELECT`语句，并且由于您只有一行，因此您实际上并不需要任何谓词`WHERE`子句等，只需从此表中获取所有内容，这就是您仅指定实体的获取请求正在执行的操作`SELECT * FROM saveGame`。

所以总而言之，这听起来不像你从这里的核心数据框架中获得了太多价值。另一种选择可能是查看`iCloud Key-Value storage API`，这听起来更接近您当前从 core-data 获得的内容。

# python - Python：从字符串数组中提取和计算元素的最短方法？

> ID：11351178
> 
> 赞同：1
> 
> 时间：2012-07-05T19:25:19.090
> 
> 标签：python

我对 Python 很陌生，并且知道我的问题很简单，但我还没有找到关于 SO 的现有问题。

我有一个包含字符串元素的数组。现在我想提取元素并计算它们的出现次数，它们按降序排序。

例如：

```
['ab' 'ab' 'ac'] 
```

那么输出应该是：

```
'ab' 2
'ac' 1 
```

此外，我不知道存储输出的最佳方式是什么（在地图、哈希......或类似的东西中？同样，我不确定）......

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:31:09.800

这可以使用模块中的`Counter`类来完成`collections`。

```
from collections import Counter
x = ['ab', 'ab', 'ac']
counts = Counter(x) 
```

`counts`存储每个元素的计数信息；完整的方法列表可以在[文档](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFcQFjAA&url=http://docs.python.org/library/collections.html&ei=Ouv1T9vnDoGe2AX0_dGEBw&usg=AFQjCNFTyb_RHzPdorBGavEIR_ekNn_AFA)中找到，但您可能关心的只是您可以通过`counts`像哈希一样处理来直接访问计数：

```
counts['ab']
>>> 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:28:01.883

有一些名为 NLTK 的库。链接 - [http://nltk.org/](http://nltk.org/)。

编辑：我发现了更好的东西：

你也可以看这里 - [NLTK 中的真实字数](https://stackoverflow.com/questions/10677020/real-word-count-in-nltk)。

来自上述链接的代码示例：

```
 from collections import Counter
    >>> text = ['this', 'is', 'a', 'sentence', '.']
    >>> counts = Counter(filtered)
    >>> counts
    Counter({'this': 1, 'a': 1, 'is': 1, 'sentence': 1}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T19:32:47.483

这是一个经典问题，即所谓的“字数”问题。您可能想要使用字典，python 内置的摊销线性查找类型。

像这样声明：

```
dict = {} 
```

然后，您可以使用类似于以下内容的循环体遍历您的标记列表：

```
if token not in dict:
    dict[token] = 1
else
    dict[token] += 1 
```

完成后，您将得到一个字典，其中包含作为键的单词和作为值的频率。

以下文档是相关的： http: [//docs.python.org/release/2.5.2/lib/typesmapping.html](http://docs.python.org/release/2.5.2/lib/typesmapping.html)

# unix - macvim 中的默认字体是什么，如何检查？

> ID：11351180
> 
> 赞同：2
> 
> 时间：2012-07-05T19:25:20.277
> 
> 标签：unix, vim, macvim

我知道如何**更改**字体属性，但我不知道如何检查**默认**字体属性。如果有人向我展示如何检查默认字体是什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:51:55.843

1.  `mvim`使用与 MacVim 捆绑的脚本启动 MacVim，无需任何 vimrc 或插件：

    ```
    $ mvim -u NONE -U NONE --noplugin 
    ```

2.  直接向 MacVim 提问：

    ```
    :set guifont? 
    ```

但我认为您会得到一个空字符串（默认值，请参阅`:h guifont`参考资料），并且 MacVim 只是使用 Mac OS X 的默认等宽字体，可能是 Monaco ……或者如果您使用 Lion，可能是 Menlo。

请问您打算如何处理这些信息？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T21:20:27.040

您可能会使用菜单找到所需的信息。单击编辑 > 字体 > 显示字体。看起来 menlo 是我的默认设置，而 monaco 仍然是一个选项。我不确定如何设置默认值。也许这不是堆栈溢出使用的好形式，但我认为如果你发布一个链接会很酷。它们是密切相关的问题。

# python - 如何在 Python 中获取 XML 标记值

> ID：11351183
> 
> 赞同：18
> 
> 时间：2012-07-05T19:25:34.390
> 
> 标签：python, xml, parsing, dom, xml-parsing

我在 Python 的 unicode-string 变量中有一些 XML，如下所示：

```
<?xml version='1.0' encoding='UTF-8'?>
<results preview='0'>
<meta>
<fieldOrder>
<field>count</field>
</fieldOrder>
</meta>
    <result offset='0'>
        <field k='count'>
            <value><text>6</text></value>
        </field>
    </result>
</results> 
```

如何使用 Python提取`6`in ？`<value><text>6</text></value>`

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-05T19:31:31.150

使用 lxml：

```
import lxml.etree
# xmlstr is your xml in a string
root = lxml.etree.fromstring(xmlstr)
textelem = root.find('result/field/value/text')
print textelem.text 
```

编辑：但我想可能会有不止一个结果......

```
import lxml.etree
# xmlstr is your xml in a string
root = lxml.etree.fromstring(xmlstr)
results = root.findall('result')
textnumbers = [r.find('field/value/text').text for r in results] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-05T19:34:06.407

据我所知，[BeautifulSoup是解析 XML 的最简单方法......](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html)

并假设您已经阅读了介绍，那么只需简单地使用：

```
soup = BeautifulSoup('your_XML_string')
print soup.find('text').string 
```

# jquery - Backbone v0.5.1 和 Jquery v1.7.2 不兼容？

> ID：11351188
> 
> 赞同：0
> 
> 时间：2012-07-05T19:25:49.780
> 
> 标签：jquery, backbone.js, version, conflicting-libraries

有人对主干 v0.5.1 和 Jquery v1.7.2 有任何问题吗？似乎当我将 jquery 从 v1.5.2 升级到 v1.7.2 时，我的应用程序开始表现得很奇怪。模型 ID 似乎设置不正确，似乎只有默认值 -1 被发送到服务器。

我不确定这两个版本之间有什么不兼容的地方，但是如果有人遇到过这种情况，请您指出，以便我可以在升级时修复它们？

不确定升级到骨干网的 v0.9.2 和 jquery 的 v1.7.2 是否会*自动*工作 - 会吗？到目前为止，我们不能让我们的应用程序崩溃，并且有点担心*只是尝试看看*。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T01:49:08.340

似乎“不兼容的错觉”源于 jQuery 对`data-*`从 v1.5 到 v1.7 的属性标签的处理。前者忽略了驼峰式引用，例如

`$('#myitem').data('myapp-someId')`将被评估为，`myapp-someId`但在 1.7 中，它将 camelCase 转换为连字符分隔，即，它`myapp-some-id`被评估为导致一切中断，并且由于我不希望功能会跨越两个版本，因此我将其误解为 jQuery 和 Backbone 之间的不兼容。

在 data-* 更改并将 jQuery 和 BB 升级到最新版本后，一切正常。呸！

# ada - Gnat 创建没有控制台的进程

> ID：11351191
> 
> 赞同：3
> 
> 时间：2012-07-05T19:26:00.410
> 
> 标签：ada, gnat

我需要一个在后台静默运行的应用程序，但仍与当前用户的桌面交互，而不是服务。

我希望应用程序在不产生标准输出控制台的情况下启动。

在 C 中，似乎是在 Kernel32.dll 中使用 FreeConsole 完成的，所以我导入了该函数：

```
procedure Free_Console
  is
  use System;

  type Shared_Library_Function
    is access function
      return Interfaces.C.Int;
    pragma Convention(Stdcall, Shared_Library_Function);
  function To_Shared_Library_Function
    is new Ada.Unchecked_Conversion(System.Address, Shared_Library_Function);

  function Load_Library(
    File_Name : in Interfaces.C.Char_Array)
    return System.Address;
  pragma Import(Stdcall, Load_Library, "LoadLibrary", "_LoadLibraryA@4");

  function Get_Function_Address(
    Module        : in System.Address;
    Function_Name : in Char_Array)
    return System.Address;
  pragma Import(stdcall, Get_Function_Address, "GetProcAddress", "_GetProcAddress@8");

  Library : System.Address := Load_Library(To_C("kernel32.dll"));
  Pointer : System.Address := Get_Function_Address(Library, To_C("FreeConsole"));
  begin
    if Pointer /= System.Null_Address then
      declare
        Result : Interfaces.C.Int := 1;
      begin
        Result := To_Shared_Library_Function(Pointer).all;
      end;
    else
      -- TODO Handle Error
      null;
    end if;
  end Free_Console; 
```

这只会将进程与控制台分离，不会删除控制台。[在此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683150%28v=vs.85%29.aspx)找到有关此行为的详细信息

所以我试图跟踪窗口的句柄，然后 CloseHandle() 它。

```
function Get_Console_Handle
  return System.Address
  is
  use System;
  STD_INPUT_HANDLE  : constant Interfaces.C.Unsigned_Long := -10;
  STD_OUTPUT_HANDLE : constant Interfaces.C.Unsigned_Long := -11;
  STD_ERROR_HANDLE  : constant Interfaces.C.Unsigned_Long := -12;

  type Shared_Library_Function
    is access function(
      Standard_Handle : Interfaces.C.Unsigned_Long)
      return System.Address;
    pragma Convention(Stdcall, Shared_Library_Function);
  function To_Shared_Library_Function
    is new Ada.Unchecked_Conversion(System.Address, Shared_Library_Function);

  function Load_Library(
    File_Name : in Interfaces.C.Char_Array)
    return System.Address;
  pragma Import(Stdcall, Load_Library, "LoadLibrary", "_LoadLibraryA@4"); 

  function Get_Function_Address(
    Module        : in System.Address;
    Function_Name : in Char_Array)
    return System.Address;
  pragma Import(stdcall, Get_Function_Address, "GetProcAddress", "_GetProcAddress@8");

  Library : System.Address := Load_Library(To_C("kernel32.dll"));
  Pointer : System.Address := Get_Function_Address(Library, To_C("GetStdHandle"));
  begin
    if Pointer /= System.Null_Address then
      return To_Shared_Library_Function(Pointer).all(STD_OUTPUT_HANDLE);
    else
      return System.Null_Address;
    end if;
  end Get_Console_Handle;

--winbase.CloseHandle
  function Close_Handle(
    Object_Handle : in System.Address)
    return Interfaces.C.Int;
  pragma Import(Stdcall, "CloseHandle"); 
```

这也没有任何作用。我敢打赌 Get_Console_Handle 返回的句柄不正确。

我的问题是，是否有不创建控制台窗口的 Gnat 命令行选项，或关闭控制台窗口的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T06:31:11.857

控制台窗口实际上不是特定于 GNAT 的，更多的是 Windows 上的 GCC。

您可以使用`-Wl,-subsystem,windows`或`-mwindows`使其不弹出。

# c - 确定一周中的哪一天开始

> ID：11351196
> 
> 赞同：3
> 
> 时间：2012-07-05T19:26:15.613
> 
> 标签：c, date

如何确定当前语言环境中一周从哪一天开始？我在 C 中需要这个，大概是通过`<time.h>`标题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:54:51.347

语言环境不携带该信息。那是因为“一周的第一天”的含义取决于应用程序（在*每个*应用程序上），而不是计算机。

在我工作的地方，一些应用程序将星期一视为一周的第一天，而其他应用程序将星期日视为一周的第一天。这里的挂历都以星期日为第一天；制造日历通常使用星期一。

* * *

在 Windows 下，使用 GetLocaleInfo()，但可以在运行时更改区域设置。可以通过 Windows API 进行设置。[GetLocaleInfoEx()](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318103%28v=vs.85%29.aspx)有更详细的文档。看起来 SetLocaleInfo() 可以独立于其他区域设置更改一周的第一天。

`locale`在 Linux 下，实用程序中有用于标识一周中第一天的规定。（`man 5 locale`或[在线语言环境文档](http://www.kernel.org/doc/man-pages/online/pages/man5/locale.5.html)。搜索“LC_TIME”。）它被记录为符合 POSIX.2、ISO/IEC 14652。

```
$ locale day
Sunday;Monday;Tuesday;Wednesday;Thursday;Friday;Saturday 
```

在我的语言环境中，一周的第一天是星期日。

我还没有找到它的系统调用或库调用。我手头没有源代码。

# wpf - 无法绑定 DataGridTemplateColumn ComboBox 编辑模板

> ID：11351201
> 
> 赞同：0
> 
> 时间：2012-07-05T19:26:39.183
> 
> 标签：wpf, templates, datagrid, combobox

以下是我的 DataGrid XAML ：

```
 <DataGrid Visibility="Visible" Margin="20" ItemContainerStyle="{x:Null}" OverridesDefaultStyle="False" CellStyle="{x:Null}" Style="{x:Null}" RowStyle="{x:Null}" ColumnHeaderStyle="{x:Null}" Foreground="Black" CanUserAddRows="True" AutoGenerateColumns="False" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" ItemsSource="{Binding Path=MovieList}">
        <DataGrid.Columns>

            <DataGridTextColumn Binding="{Binding Title, Mode=TwoWay}" CanUserResize="True" MaxWidth="450" CanUserSort="True" Header="Title" Width="200" />

            <DataGridTemplateColumn Width="130" Header="Type">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Path=Type}" />
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
                <DataGridTemplateColumn.CellEditingTemplate>
                    <DataTemplate>
                        <ComboBox Width="120" ItemsSource="{Binding Path=GenreList}" DisplayMemberPath="Name" SelectedValuePath="ID" Height="Auto" HorizontalAlignment="Center" Name="comboBox1" VerticalAlignment="Top" />
                    </DataTemplate>
                </DataGridTemplateColumn.CellEditingTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

单元格编辑模板有一个绑定到可观察集合“GenreList”的组合框。此集合在 ViewModel 中初始化。ComboBox 没有被填充的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:16:06.977

你没有进入你的 ViewModel。您需要前往源 - 绑定到您的 ViewModel 的视觉元素。例如，如果它一直在视图上，假设它是 UserControl 类型，以下将起作用：

```
<ComboBox ItemsSource="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=GenreList}".... /> 
```

另一种方式，如果您想确保从正确的元素而不是类型的基础中选择绑定，请为绑定到您的 ViewModel 的元素命名（我将使用相同的 UserControl）

```
<UserControl x:Name="me".../>

   <ComboBox ItemsSource="{Binding ElementName=me, Path=DataContext.GenreList}".... /> 
```

# python - Python序列翻译

> ID：11351203
> 
> 赞同：1
> 
> 时间：2012-07-05T19:26:52.663
> 
> 标签：python, sequence

我有一个像`[(0, 34), (1, 77), (2, 6), (3, 60), (6, 2), (7, 5), (9, 13), (14, 2)]`. 我需要保持元组的顺序并使用从 0 到 n - 1 的整数重新枚举第二个元素，其中 n 是列表长度。结果应该是`[(0, 4), (1, 6), (2, 2), (3, 5), (6, 0), (7, 1), (9, 3), (14, 0)]`。

我开始编写一个接受整数序列但不接受整数对的函数：

```
def translation(seq):
    return [sorted(set(seq)).index(x) for x in seq]

>>> translate([34, 77, 6, 60, 2, 5, 13, 2])
[4, 6, 2, 5, 0, 1, 3, 0] 
```

`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:36:04.223

也许是这样：

```
xs = [(0, 34), (1, 77), (2, 6), (3, 60), (4, 2), (5, 5), (6, 13)] 
secs = sorted(set(x[1] for x in xs))
res = [(x[0], secs.index(x[1])) for x in xs]
print res # [(0, 4), (1, 6), (2, 2), (3, 5), (4, 0), (5, 1), (6, 3)] 
```

或一个单一的理解（但具有二次表现）：

```
res = [(x[0], sum(1 for y in xs if y[1] < x[1])) for x in xs] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T20:05:33.433

试试这个。我修改了您提供的代码，因此您应该很容易理解。

```
def translation(seq):
    return [(x[0], sorted(seq, key=lambda t: t[1]).index(x)) for x in seq] 
```

示例用法：

```
>>> translation([(0, 34), (1, 77), (2, 6), (3, 60), (6, 2), (7, 5), (9, 13)])
[(0, 4), (1, 6), (2, 2), (3, 5), (6, 0), (7, 1), (9, 3)] 
```

sorted 中的关键参数允许您传递一个函数来进行排序，该函数`lambda t: t[1]`允许每个元组的第二个元素用于排序。

**更新**

我更新了我的解决方案，所以`translation([(1, 8), (4, 9), (12, 8)])`返回`[(1, 0), (4, 1), (12, 0)]`。

```
def translation(seq):
    l = list(set(sorted([x[1] for x in seq])))
    return [(x[0], l.index(x[1])) for x in seq] 
```

# android - 手机关机充电事件

> ID：11351205
> 
> 赞同：0
> 
> 时间：2012-07-05T19:26:58.960
> 
> 标签：android

我正在寻找一种连接充电事件的方法，如果设备关闭，该事件就会启动。你知道那个，它开始一个充电电池的动画。

我有一部已植根的手机，如果连接了充电器，我想启动手机。

首先我需要知道这是系统的哪一部分？引导程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:33:20.897

这绝对是在 Android 领域之外，绝对不是引导加载程序，而是电路板上 SoC 的内部，它被触发并在关闭时显示动画电池充电。

这超出了Android的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:59:23.643

据我所知，电池充电程序是固件，我认为它没有连接到引导加载程序（这只是一个猜测，我不知道）。

但也许你可以使用这个程序，或者了解它是如何工作的：

[https://play.google.com/store/apps/details?id=eu.chainfire.nomoarpowah](https://play.google.com/store/apps/details?id=eu.chainfire.nomoarpowah)

虽然它说它只适用于某些三星设备......

这些线程也可以帮助：

[https://android.stackexchange.com/questions/20392/alarm-which-could-ring-even-when-device-is-off](https://android.stackexchange.com/questions/20392/alarm-which-could-ring-even-when-device-is-off)

[https://android.stackexchange.com/questions/6156/are-there-any-android-devices-with-open-source-bootloaders](https://android.stackexchange.com/questions/6156/are-there-any-android-devices-with-open-source-bootloaders)

[https://android.stackexchange.com/questions/4206/does-the-alarm-work-when-my-phone-is-turned-off](https://android.stackexchange.com/questions/4206/does-the-alarm-work-when-my-phone-is-turned-off)

# node.js - createReadStream 以管道传输到 spawn 的标准输入

> ID：11351206
> 
> 赞同：4
> 
> 时间：2012-07-05T19:27:02.630
> 
> 标签：node.js

我遇到了一些障碍，我想知道是否有人可以帮助我。

我正在尝试使用“.pipe()”将文件重定向到生成进程的标准输入

因此，如果有人知道如何正确地将使用 createReadStream 创建的流通过管道传输到使用 spawn 创建的进程的标准输入中，我会喜欢一个小示例代码：D

```
function pdf_to_text(f,callback){
    var convert = spawn('pdftotext', ['-','-'])

    f.pipe(convert.stdin)
    //... do stuff
}

pdf_to_text(process.stdin,process_log) // this will work just fine
pdf_to_text(fs.createReadStream('./test.txt'),process_log) // i can't get this to work for the life of me 
```

# c# - 关于何时需要特定 DTO 类的另一个讨论

> ID：11351207
> 
> 赞同：2
> 
> 时间：2012-07-05T19:27:14.110
> 
> 标签：c#, dto, single-responsibility-principle, soc

我正在做一个大型项目，其中一部分是要替换现有的服务器堆栈。对于一个非常规范化的大型数据库，很明显我们需要构造许多复合对象。我的一个查询示例如下：我的复合对象定义：

```
[DataContract]
public class CompositeEvent
{
    Guid eventIdentity;
    string accountIdentity;
    string eventMessage;
    DateTime eventLoggedOn;
    string methodName;
    string programName;
    string userIdentity;
    List<CompositeException> exceptions = new List<CompositeException>( );
    List<CompositeParameter> methodParameters = new List<CompositeParameter>( );
    List<CompositeParameter> databaseParameters = new List<CompositeParameter>( );

    [DataMember]
    public Guid EventIdentity
    {
        get { return eventIdentity; }
        set { eventIdentity = value; }
    }
    [DataMember]
    public string AccountIdentity
    {
        get { return accountIdentity; }
        set { accountIdentity = value; }
    }
    [DataMember]
    public string EventMessage
    {
        get { return eventMessage; }
        set { eventMessage = value; }
    }

    [DataMember]
    public DateTime EventLoggedOn
    {
        get { return eventLoggedOn; }
        set { eventLoggedOn = value; }
    }

    [DataMember]
    public string MethodName
    {
        get { return methodName; }
        set { methodName = value; }
    }

    [DataMember]
    public string ProgramName
    {
        get { return programName; }
        set { programName = value; }
    }

    [DataMember]
    public string UserIdentity
    {
        get { return userIdentity; }
        set { userIdentity = value; }
    }

    public string QualifiedCreator
    {
        get 
        {
            if ( String.IsNullOrEmpty( programName ) && String.IsNullOrEmpty( methodName ) )
                return string.Empty;
            return string.Format( "{0}:{1}", String.IsNullOrEmpty( ProgramName ) ? "{undefined}" : ProgramName, String.IsNullOrEmpty( MethodName ) ? "{undefined}" : MethodName );
        }
    }
    [DataMember]
    public int EventTypeIdentity { get; set; }

    [DataMember]
    public string EventTypeName { get; set; }

    [DataMember]
    public List<CompositeException> Exceptions
    {
        get { return exceptions; }
        set { exceptions = value; }
    }

    [DataMember]
    public List<CompositeParameter> MethodParameters
    {
        get { return methodParameters; }
        set { methodParameters = value; }
    }

    [DataMember]
    public List<CompositeParameter> DatabaseParameters
    {
        get { return databaseParameters; }
        set { databaseParameters = value; }
    }
} 
```

我的服务中的数据库查询：

```
 using ( Framework.Data.FrameworkDataEntities context = new Data.FrameworkDataEntities( ) )
        {
            var list = from item in context.EventLogs
                       join typeName in context.EventLogTypes on item.EventTypeId equals typeName.Id
                       orderby item.EventLoggedOn, item.EventLogType
                       select new CompositeEvent
                       {
                           AccountIdentity = item.AccountIdentity,
                           EventIdentity = item.Id,
                           EventLoggedOn = item.EventLoggedOn,
                           EventMessage = item.EventMessage,
                           EventTypeIdentity = item.EventTypeId,
                           EventTypeName = typeName.EventTypeName,
                           MethodName = item.MethodName,
                           ProgramName = item.ProgramName,
                           UserIdentity = item.UserIdentity
                       };
            return new List<CompositeEvent>( list );
        } 
```

现在从我的复合对象的定义中可以清楚地看出，它只包含数据，没有业务规则，也没有其他持久性或业务结构、数据结构或其他任何东西的暴露。

然而我的队友说这只能存在于域模型中，我必须花费周期将我的数据从这个定义明确的对象移动到 DTO。不仅如此，a) 所有 DTO 的名称中都必须包含 DTO，并且 b) 它们的存在必须仅用于在网络中移动的目的。因此，当我们的客户端代码被开发时，它必须 a）创建每个对象属性的属性，并且 b）从 DTO 移动到视图模型属性。

我觉得这把DTO推到了极致。即基于这些 ARE 数据传输对象的复合对象的定义。此外，我认为将此对象存储在客户端并直接绑定到客户端中的此对象绝对没有问题。由于我所做的只是获取复合对象中定义的每个属性并将它们复制到 DTO 中，因此创建一个对象只是为了将其复制到另一个对象然后再次将其复制到内部似乎是浪费大量时间和周期客户端的属性。

我对这方面的其他意见感兴趣。我觉得我没有违反任何 OOP 规则，例如关注点分离或单一责任原则……至少只要您不对这些感到极度敏感。意见？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:50:17.293

好吧，`MUST`你同事强调的一切让他看起来有点强迫症。但这没关系，因为他确实有道理。

DTO，尤其是在 MVC 中，应该以抽象底层数据模型的方式设计，因此它们成为视图的实际模型。让它们靠近您的对象只会导致您修改两组对象，而实际上可能只有其中一个对象需要更改。

在 SoA 或 N 层架构中设计 DTO 时要考虑的另一件事是，它们不应在视图层与底层服务和模型之间创建契约。因此，如果您的数据库（字段、表、视图等）发生了某些变化，您应该能够调整服务层的所有内容，并以不影响 DTO 的方式降低。

视图模型应该保持不变，至少只要您不向其中添加或删除功能。任何潜在的变化都应该适应 DTO（不是这样——但并不总是可能的）。

现在我应该提一下，我现在正在将项目从 SoA 和 DTO 切换到普通的 2 层架构（这是因为性能问题，而不是 DTO :)）。我有一个简单和复杂对象的跨领域域层，旨在仅在内部使用。任何通过 Web 服务公开的 API 都将使用 DTO，因为我不想杀死 WS 消费者。也许会伤害他们一点:)。

但是你应该使用 DTO，就像我上面提到的那样。它将在您的情况下有所帮助（使用 MVC）。为了更轻松地映射到 DTO，我建议反之亦然[**`AutoMapper`**](http://automapper.org/)。会让你的生活更轻松（让你的同事开心）。

# c# - 用 AND 替换嵌套的 if 语句

> ID：11351214
> 
> 赞同：5
> 
> 时间：2012-07-05T19:27:34.880
> 
> 标签：c#, nested-if

我想知道嵌套 if 是否比 AND 语句更好。我有一个循环很多次，所以我正在考虑更快的执行。下面是与我的代码具有相同逻辑的代码。嵌套的 if 语句位于循环内。

```
 for ( int i = 0; i < array.length; i++)
   {
      // do stuff
      if (x == 5)
      {
         if (y == 3)
         {
             // do stuff
         }
      }
   } 
```

如果我用这个 And STATEMENT 替换嵌套的 if，我的代码会更快吗？

```
 if ((x == 5) && (y == 3))
           // do stuff 
```

我已阅读此[链接](https://stackoverflow.com/questions/337037/replacing-nested-if-statements)，但没有找到答案。我是学生，还在学习中，谢谢大家的反馈！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T19:28:56.790

不，它在性能上不会有显着差异，*但*在可读性上可能会有差异。

`IL`使用优化/发布（使用 LINQPad 测试）编译时，这两者都会产生相同的结果：

```
IL_0000:  ldc.i4.5    
IL_0001:  stloc.0     
IL_0002:  ldc.i4.s    0A 
IL_0004:  stloc.1     
IL_0005:  ldloc.0     
IL_0006:  ldc.i4.5    
IL_0007:  bne.un.s    IL_000D
IL_0009:  ldloc.1     
IL_000A:  ldc.i4.3    
IL_000B:  pop 
```

即使没有优化，差异也不是那么显着：

**嵌套语句：**

```
IL_0001:  ldc.i4.5    
IL_0002:  stloc.0     
IL_0003:  ldc.i4.s    0A 
IL_0005:  stloc.1     
IL_0006:  ldloc.0     
IL_0007:  ldc.i4.5    
IL_0008:  ceq         
IL_000A:  ldc.i4.0    
IL_000B:  ceq         
IL_000D:  stloc.2     
IL_000E:  ldloc.2     
IL_000F:  brtrue.s    IL_0020
IL_0011:  nop         
IL_0012:  ldloc.1     
IL_0013:  ldc.i4.3    
IL_0014:  ceq         
IL_0016:  ldc.i4.0    
IL_0017:  ceq         
IL_0019:  stloc.2     
IL_001A:  ldloc.2     
IL_001B:  brtrue.s    IL_001F
IL_001D:  nop         
IL_001E:  nop 
```

**非嵌套语句：**

```
IL_0001:  ldc.i4.5    
IL_0002:  stloc.0     
IL_0003:  ldc.i4.s    0A 
IL_0005:  stloc.1     
IL_0006:  ldloc.0     
IL_0007:  ldc.i4.5    
IL_0008:  bne.un.s    IL_0013
IL_000A:  ldloc.1     
IL_000B:  ldc.i4.3    
IL_000C:  ceq         
IL_000E:  ldc.i4.0    
IL_000F:  ceq         
IL_0011:  br.s        IL_0014
IL_0013:  ldc.i4.1    
IL_0014:  nop         
IL_0015:  stloc.2     
IL_0016:  ldloc.2     
IL_0017:  brtrue.s    IL_001B
IL_0019:  nop 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T19:29:36.593

不，两者之间不会有任何区别。但是，AND 减少了行数并且更具可读性（如果您没有那么多条件）

在某些情况下`if`s 更好，感觉更自然，一个常见的例子如下：

```
String s=//...
if(s==null)return;
if(s.Length > 0) //do something 
```

使用 AND，这可以替换为：

```
if ((s!=null) && (s.Length > 0)) //Dosomething 
```

许多开发人员犯了这个错误：

```
if ((s.Length > 0) && (s!=null) ) //Dosomething 
```

最终会出现空引用异常

`if`可以看到，在使用单独的 s时想到先做空检查比较自然

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-05T19:30:28.043

.NET 将停止检查条件的第一部分是否为假，因此两者之间不会有性能差异。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T19:33:00.743

在编译代码中，速度没有理由不同，它们将转换为完全相同的汇编代码。我绝对同意可读性因素，它也会缩短你的课程长度。

# php - Aptana 3 - 设置 PHP 可执行文件

> ID：11351216
> 
> 赞同：0
> 
> 时间：2012-07-05T19:27:42.960
> 
> 标签：php, aptana, aptana3

我正在尝试使用需要具有特定名称的 PHP 可执行文件的 Aptana 插件。网上到处都有人说去 Window > Preferences > PHP > PHP Executables。

我的 Aptana 3 中没有“PHP 可执行文件”菜单。

是否有另一种方法可以在 Aptana 3 中设置 PHP 可执行文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T05:15:48.977

对于调试/运行，如果您获得最新的夜间构建 (preview.appcelerator.com/studio)，则有一种方法。

一旦你在夜间，包括对 PHP 可执行文件的支持的调试器功能将在*Window > Preferences > Aptana Studio > Editors > PHP > Debugger下添加此首选项页面*

# javascript - 单击时，滑块会更改屏幕的滚动

> ID：11351218
> 
> 赞同：0
> 
> 时间：2012-07-05T19:27:50.363
> 
> 标签：javascript, jquery, slider

我正在一个网站[http://dev.io-web.com/portfolio.aspx](http://dev.io-web.com/portfolio.aspx)上工作，并且在使用我编写的滑块时遇到了困难。**出于某种原因，当您单击更改幻灯片时，它会将站点上的滚动位置重置为顶部。有没有办法让它不改变屏幕的位置？**我还将包含滑块的部分代码，以便更容易理解我在做什么：

```
$(".slide1").click(function() {
    if(current_slide != "slide1"){
            $(".arrow").animate({"margin-left":"349px"});
            if(current_slide == "slide2"){
                $(".slide2_display").stop(true,true).fadeOut().hide();
                $(".slide1_display").fadeIn().show();
                current_slide = "slide1";
                $("#slide2content").hide();
                $("#slide1content").show();
            }
            else if(current_slide == "slide3"){
                $(".slide3_display").stop(true,true).fadeOut().hide();
                $(".reps_display").fadeIn().show();
                current_slide = "slide1";
                $("#slide3content").hide();
                $("#slide1content").show();
            }
            else{
                $(".slide4_display").stop(true,true).fadeOut().hide();
                $(".slide1_display").fadeIn().show();
                current_slide = "slide1";
                $("#slide4content").hide();
                $("#slide1content").show();
            }

    }
}); 
```

我为 4 个不同的显示器中的每一个都进行了编码。它应该只改变显示而不改变页面的滚动，但也许点击功能会自动做类似的事情。任何有关解决方案的帮助将不胜感激。随意查看上面列出的 url 上正在进行的工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:30:53.080

发生这种情况是因为当您使用 jQuery.hide() 隐藏您的 div 时，它的容器 .PortfolioSlider 会在一瞬间被调整为 0px，因为它是空的。这会缩小页面的高度并导致浏览器跳转到页面顶部。

只需将 660px 的固定高度应用于 .PortfolioSlider 的 css 即可解决此问题

# plugins - 带有新闻自动收报机的 Chrome 扩展程序

> ID：11351219
> 
> 赞同：0
> 
> 时间：2012-07-05T19:27:59.807
> 
> 标签：plugins, cross-browser, browser-extension, news-ticker, crossrider

各位程序员好。我想制作一个浏览器扩展程序，将新闻代码放在每个页面的顶部。我想在这里使用代码（因为它会使编码更容易）：[http ://www.gcmingati.net/wordpress/wp-内容/实验室/jquery/newsticker/jq-liscroll/scrollanimate.html](http://www.gcmingati.net/wordpress/wp-content/lab/jquery/newsticker/jq-liscroll/scrollanimate.html)。我想和crossrider一起开发。诚然，我对 javascript 不是很好，但我知道足以制作这样一个简单的应用程序。我正在查看网站上的演示，并意识到他们没有解释如何添加带有扩展名的工具栏之类的东西。我迷失了，或多或少。因此，如果有人可以帮助我弄清楚该怎么做，我将不胜感激。

顺便说一句-新闻自动收报机最终将通过 ajax 连接到服务器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:24:10.883

你可以很容易地使用上面的 jQuery 插件。

只需将其 javascript 代码和 css 添加为资源，然后从扩展代码本身加载它。

我真的建议看看这个演示应用程序： [http ://crossrider.com/apps/9773/ide](http://crossrider.com/apps/9773/ide)

您将确切地看到要完成它需要做什么。

# c# - c# OpenXML - 如何在内容控件中设置富文本字符串并保留格式

> ID：11351223
> 
> 赞同：1
> 
> 时间：2012-07-05T19:28:15.673
> 
> 标签：c#, openxml, contentcontrol, richtext

原谅我迷茫和迷茫！

我有一个包含几个纯文本内容控件的文档。到目前为止，我可以枚举文档中的 SdtElements，找到所有感兴趣的 SdtBlocks 并根据需要替换文本。

接下来，我有一个 RichText 格式的字段，我可以从数据库中检索它作为字符串，现在需要将它插入到文档中。我已经在文档中设置了富文本内容控件，但是如何使用富文本字符串设置/替换它并保留正确的格式？

只是让我更加困惑，当我使用“Word 2007 内容控件工具包”打开文档时，它会按预期显示所有内容控件，并将其正确识别为富文本类型。但是，当我使用“Open XML SDK 2.0 Productivity Tool”打开文档时，它会将富文本控件显示为一个简单的 SdtBlock，与纯文本内容控件完全没有区别，并且反映的代码似乎相同？

那么如何在文档中设置 RichText 字符串呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:45:24.657

纯文本和富文本内容控件由内容控件的属性 (w:sdt/w:sdtPr) 中的一个属性来区分。

富文本内容控件可以包含 WordML 段落和表格，或内联内容等，具体取决于它的级别（块、内联、表格行、表格单元格）。

因此，您需要将数据库内容转换为适当的 WordML，或者在内容控件中包含一个 altChunk，让 Word 为您完成。

# c# - 用于构建自动化的 powershell 或 python

> ID：11351224
> 
> 赞同：3
> 
> 时间：2012-07-05T19:28:22.253
> 
> 标签：c#, .net, python, deployment, continuous-integration

我们目前使用[Psake](https://github.com/psake/psake)进行构建自动化，使用[Pstrami](http://pstrami.codeplex.com/)进行部署。两者都是 Powershell 库。我们使用的其他工具是用于压缩/解压缩包的 7zip 和用于数据库更改管理的[Tarantino 。](https://bitbucket.org/headspringlabs/tarantino/wiki/Home)我们主要使用它来为 Windows 构建和部署 MVC .NET 应用程序。

构建过程非常简单：

1.  使用 MsBuild 编译和构建解决方案
2.  运行 NUnit 测试
3.  打包成zip

部署脚本也很简单：

1.  创建几个文件夹
2.  添加新的 IIS 应用程序
3.  创建数据库
4.  等等

这一切都运作良好。我唯一的问题是 Powershell；我真的不喜欢这种语言。和我一起工作对我来说非常痛苦。

我正在阅读有关 Python 的内容，这似乎很有趣。

我的问题是：

1.  Python 能与 Powershel 竞争吗？
2.  Python 和 Powershell 的优缺点是什么，谁赢了？
3.  我也很好奇是否有人使用 Python 构建和部署 .NET 应用程序，以及您是否遇到任何问题并因此考虑使用其他任何东西。

注意：我在 SO 上看到的类似问题很少，但找不到与 CI 和构建自动化密切相关的任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T04:30:23.467

Python 是一种非常好的通用编程语言。Powershell 是微软的任务自动化框架。因此，Powershell 更像是[DSL](http://en.wikipedia.org/wiki/Domain_specific_language)。在脚本 windows 部署方面，powershell 比 python 强大得多。还可以查看[Powershell V3中的新功能](http://www.infoq.com/news/2012/01/powershell-3/)

# java - 使用 ABBOT 和 COSTELLO 对 WebStart 程序进行自动化测试

> ID：11351225
> 
> 赞同：4
> 
> 时间：2012-07-05T19:28:22.567
> 
> 标签：java, automated-tests, jnlp, java-web-start

我这里有一个棘手的问题。

我们公司有这个巨大的类似桌面的 WebStart 应用程序，现在我们正在尝试为它创建自动化测试。由于我们的应用程序 GUI 没有完全使用 Swing 或 AWT 实现，因此我们无法使用 JUnit、Jelly、UISpec4J 等工具对其进行测试，因为我们无法与某些对象（如 Tracks 和 Curves）进行交互。我们需要使用 Selenium 之类的东西，仅用于 Swing。

问题是要在 Costello 中启动自动化测试，您需要一个带有 main 方法的 JFrame 类。但是我们有一个 WebStart 应用程序，它的开头是这样的：

```
 $ javaws app.jnlp 
```

有没有办法以编程方式将此程序加载到 JFrame 中？！像这样的东西。

```
public class JNLPWindowLoaded extends JFrame{

    public JNLPWindowLoaded(String jnlpPath){
        //start the app here and load it into this class
    }

    public static void main(String args[]){
        new JNLPWindowLoaded("/home/kirill/test.jnlp");
    }
} 
```

请在这里给我点光！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:58:46.620

你的预算是多少？如果这是一个大公司项目，您可能希望查看 HP 统一功能测试（以前称为 x-runner/win-runner）[http://www8.hp.com/us/en/software-solutions/software.html?compURI =1172957#tab=TAB1](http://www8.hp.com/us/en/software-solutions/software.html?compURI=1172957#tab=TAB1)

# c# - 如何在 GeckoFX 浏览器中获取下载的图像？

> ID：11351228
> 
> 赞同：1
> 
> 时间：2012-07-05T19:28:36.127
> 
> 标签：c#, .net, geckofx

如何从 GeckoFX 浏览器中的页面获取图像？

我知道我可以简单地获取 'src' 属性的值，然后使用 WebClient 下载文件，但我需要从浏览器中获取它，否则下次下载时图片将被更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:28:51.230

但是，当右键单击图像时，您可以将此代码放入 etc 上下文菜单条中：

```
if(geckoWebBrowser1.CopyImageContents())//if image contents can be copied...
{
    System.Drawing.Image img = Clipboard.GetImage();//copy image into variable

    //here you can use a folder browser dialog to locate path manualy
    img.Save(Application.StartupPath + "tempImg.jpg");//will save image to path

    //last two lines is optional and can open same image in default image preview program
    string fak = Application.StartupPath + "tempImg.jpg";
    System.Diagnostics.Process.Start(fak);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:45:16.697

Geckofx 13 支持这一点：[geckofx 中的图像创建器](https://bitbucket.org/geckofx/geckofx-13.0/src/9ca5047ceea6/Skybound.Gecko/ImageCreator.cs)

# jquery - 我有这个 jquery 函数...向上滑动。我想让它向左滑动

> ID：11351231
> 
> 赞同：1
> 
> 时间：2012-07-05T19:28:41.440
> 
> 标签：jquery

这是我的功能的一个工作示例。正常工作。但是，如何让它向左滑动，而不是向上/向下滑动？

[http://jsfiddle.net/QWQYS/24/](http://jsfiddle.net/QWQYS/24/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:38:41.850

你这样做：

```
$('.next').click(function () {
    $('.panel:visible').animate({ width: 'hide' }).closest('.panel').nextAll('.panel').eq(0).delay(500).animate({ width: 'show' });
});

$('.prev').click(function () {
    $('.panel:visible').animate({ width: 'hide' }).closest('.panel').prevAll('.panel').eq(0).delay(500).animate({ width: 'show' });
}); 
```

[小提琴](http://jsfiddle.net/QWQYS/34/)

当然，你的元素是相对定位的，容器的高度是动态的，所以这一切看起来都很奇怪。你必须在你的 CSS 中弄清楚这一点。

# svn - 如何自定义 SVN 修订版？

> ID：11351233
> 
> 赞同：0
> 
> 时间：2012-07-05T19:28:52.477
> 
> 标签：svn, tags, repository, repository-design

我想知道如何在 SVN 中自定义修订编号。我有一个在 Ubuntu 机器上运行的存储库。整个事情目前只是增量修订：`Current revision 7`.

我希望能够使用版本编号系统（例如 r1.0.0）自定义整个事物，并使用附加版本系统标记其中的某些项目。

例如：

```
../myproject
../myproject/file1
../myproject/file2
../myproject/firmware/firmware_file1.bin
../myproject/firmware/firmware_file2.bin 
```

目录中的所有内容都`myproject`属于发布版本`(r1.0.0)`。固件文件将是主要 r1.0.0 版本的一部分，但也会标记其当前的 fw 版本。因此，如果`firmware_file1`是`5.6`该产品的版本。它将有一个标签`v5.6`。

那有意义吗？我是 SVN 新手，一直在阅读文档，但没有遇到有关如何执行此操作的说明。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:32:16.483

svn 中的修订只能是增量的，但你不需要。你需要标签。

查看：

*   [http://svnbook.red-bean.com/en/1.1/ch04s06.html](http://svnbook.red-bean.com/en/1.1/ch04s06.html)
*   [如何从主干正确创建 SVN 标签？](https://stackoverflow.com/questions/851377/how-to-properly-create-a-svn-tag-from-trunk)

# java - 在 Android 中捕获 printStackTrace() 输出

> ID：11351235
> 
> 赞同：2
> 
> 时间：2012-07-05T19:28:59.003
> 
> 标签：java, android

我正在调试一个没有为 Android 明确编码的现有库。它可以工作，但包含很多`ex.printStackTrace()`调用。在 Android 中，这些默认情况下不会写入 logcat。

我的问题是：如果无法修改代码，是否有可能以某种方式查看`printStackTrace()`调用生成的堆栈跟踪？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:34:00.087

> 在 Android 中，这些默认情况下不会写入 logcat。

他们当然会。它们以日志级别 WARN 写出，标签通常为`System.err`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:34:38.850

如果您在 Eclipse 中工作，请打印您的堆栈跟踪并检查 Logcat（使用 DDMS）工具中的消息。

如果没有，请`adb logcat`在命令行中使用。

无论哪种方式，结果都不会显示任何标签，因此您必须猜测它们来自哪个应用程序。如果您想知道哪个应用程序正在发送它们，您最好使用[Log](http://developer.android.com/reference/android/util/Log.html)函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T19:35:19.557

我认为您可以使用 getStackTrace 来完成。

无论如何，不​​要这样做，因为打印堆栈跟踪不会返回导致错误的应用程序。使用 java.util 中的 Log 类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T19:53:08.310

如果您无法修改代码，那么如果最初没有编码，您将无法获得未写入 Log 的任何内容。如果您没有看到 PrintStackTrace，请确保您的设备启用了“调试模式”。否则，不，不修改代码，你无能为力。

如果您可以修改代码，则可以将 PrintStackTrace 放入 Log 方法中：

```
Log.e(TAG, "custom message", ex); 
```

# jquery - 在 Jquery 中使用 $.ajax() 处理 json

> ID：11351246
> 
> 赞同：0
> 
> 时间：2012-07-05T19:29:41.773
> 
> 标签：jquery, ajax, json

好的，这就是问题所在。我有一个 api，它会给我一个 json。成功后，我将返回一个包含一些值的漂亮列表，如果出现错误，我将收到一个包含有关该错误的信息的 json。我还没有尝试过“成功”的案例，因为我仍然需要部署 api，但我认为应该可以。现在的问题是“错误”情况。在出现错误的情况下使用 $.ajax 我将收到三个参数，一个 xhrequest（或类似的），一条消息，我不记得了。我该如何处理？在响应正文中应该是一个 json，我在哪里可以找到它？

感谢您的帮助，抱歉没有代码或缩进​​不佳，但我是用手机写的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:37:01.770

当无法从服务器获得响应（如 404 错误等）时，将调用错误回调。如果你想传回你自己的错误，你需要把它们放在 JSON 响应中，并在你的成功回调中测试它们。

例如，在我现在正在处理的成功回调中：

```
 jQuery.ajax({
        'url':      'Client/saveClient.mas',
        'dataType': 'json',
        'data':     {
            'first_name'            :   first_name,
            'middle_initials'       :   middle_initials,
            'last_name'             :   last_name,
            'phone_number'          :   phone_number
            },
        'success':  saveClientSuccessCallback,
        'error':  saveClientFailureCallback
    });
  }
}

function saveClientSuccessCallback(json)
{
  if (json.status == 'error')
  {
    updateClientTips(json.error_msg);
  }
  else
  {
    addReadOnlyClient(json.people.values, json.manager_uperson_id);

    jQuery('#new-client-form').dialog("close");
  }
}
function saveClientFailureCallback(jqXHR, textStatus, errorThrown)
{
  updateClientTips(textStatus + ': ' + errorThrown);
} 
```

如您所见，我在 json.status 中返回错误条件，在 json.error_msg 中返回消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:34:40.570

响应的实际正文应该在`jqxhr.responseText`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T19:48:26.477

正如 Paul Tomblin 所说，您有（至少）两种选择：

*   为您的响应设置错误代码会导致`error`被调用。在这种情况下，响应内容的数据类型通常是无用的，因此不会对其进行解析并放入`data`变量中。但是您可以通过访问响应文本`jqXHR.responseText`并自己解析`JSON`（[.parseJSON()](http://jqapi.com/#p=jQuery.parseJSON)）。

*   返回`200`具有适当`JSON`内容的响应，该响应会自动解析为`data`对象（如果`dataType`设置为`json`）。然后，您可以检查`if(data.error) {...}`、获取错误消息并将其呈现给用户。

我会选择第二个选项，但这取决于您期望的错误。

# webdeploy - 授予 WebDeploy 授权

> ID：11351249
> 
> 赞同：1
> 
> 时间：2012-07-05T19:29:55.360
> 
> 标签：webdeploy

使用本机“管理员”帐户时，我可以“一键式”发布到我的远程（服务器 08）。我正在尝试授予不同的 Windows 帐户进行远程部署的能力。尝试从 IIS 的“开始”页面“连接到站点”以测试帐户的访问权限将始终返回：

无法连接到指定的计算机。远程服务器返回 401 Unauthorized。

为了测试，我让这个用户成为管理员组的成员。

我还应该尝试什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-06T22:38:30.963

以下文章提供了一些有关安装和配置 Web 部署的有用信息。可能是几个不同的区域，因此值得按照以下步骤检查您的设置是否正确：

[安装和配置 Web 部署](http://www.iis.net/learn/install/installing-publishing-technologies/installing-and-configuring-web-deploy "安装和配置 Web 部署")

# jquery - JQuery 从选定的下拉列表中获取选定的值并添加到总数中

> ID：11351257
> 
> 赞同：1
> 
> 时间：2012-07-05T19:30:31.867
> 
> 标签：jquery, jquery-selectors

我将如何开始，我想选择每个选定的“[]”中包含的值并将其添加到#theFinalPrice？

```
<div ID="theFinalPrice">$20.00</div>

<p>Hotel:<br />
<select name="variation1" class="eStore_variation">
<option value="King Bed [+ $50.00]">King Bed</option>
<option value="Double Bed">Double Bed</option>
</select></p>

<p>Add a Guest:<br />
<select name="variation2" class="eStore_variation">
<option value="no added guests">no added guests</option>
<option value="+1 guest [+ $35.00]">+1 guest [+ $35.00]</option>
</select></p>

<p>Additional Fun:<br />
<select name="variation3" class="eStore_variation">
<option value="no additional fun">no additional fun</option>
<option value="1 game of golf [+ $35.00]">+1 game of golf [+ $35.00]</option>
</select></p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:34:18.790

在您想要的任何更改或单击处理程序中，您可以使用 jQuery`each`来获取和汇总所有值：

```
var total = 0; // Set to some base price

$('.eStore_variation option:selected').each(function() {
    var m = /\[\+ \$(\d+\.\d+)\]/.exec(this.value);

    if(m !== null) {
        total += +m[1];
    }
});

var decimalPart = (total - Math.floor(total)) * 100;

$('#theFinalPrice').text('$' + Math.floor(total) + '.' + (decimalPart < 10 ? '0' : '') + decimalPart); 
```

[这是一个演示 jsFiddle。](http://jsfiddle.net/minitech/gQexk/)

# php - 使用 Containable 时 CakePHP 插件模型不关联

> ID：11351260
> 
> 赞同：3
> 
> 时间：2012-07-05T19:30:57.013
> 
> 标签：php, cakephp, containable

我有一个名为 CakePHP 的插件`Foo`，它有一个组件、没有控制器和几个连接模型。它的结构是这样的：

```
/Plugin/Foo/Model/
 -FooModel1.php
 -FooModel2.php
 -FooModel3.php
 -FooModel4.php 
```

为了与标准（非插件）代码连接，插件模型之一有条件地与名为`Bar`. 我不认为这与问题有关，但我想彻底。

在`FooController`I make use 中`Containable`，有好几层：

```
$params = array(
  'conditions' => array('Bar.id' => $bar_id),
  'contain' => array(
    'FooModel1' => array(
      'FooModel2' => array(
        'FooModel3' => array('Something', 'FooModel4')
      ),
    ),
  ),
); 
```

这会产生如下错误：

```
Warning: Model "FooModel2" is not associated with model "FooModel3" [CORE\Cake\Model\Behavior\ContainableBehavior.php, line 339] 
```

所以在我的插件控制器中，我需要包含插件模型。我尝试在模型前加上 Foo（例如`Foo.FooModel1`），但`Containable`我认为我正在尝试获取一个名为 Foo 的模型。在`$hasAndBelongsToMany`插件模型的数组中，我都尝试了`'Model1' => array()`和`'Foo.Model1' => array()`，但都不起作用。如何正确设置此关联？

旁注：当我将模型移出插件并进入标准`/Model/`目录时，一切正常。问题似乎来自不正确的关联，而不是代码本身的逻辑。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T23:25:01.213

在模型中设置关联时，请确保在插件模型前面加上插件名称...否则蛋糕会即时生成一个...并且不要在插件中使用该文件...

# c - “数据位”容量与“开销位”大小？

> ID：11351261
> 
> 赞同：9
> 
> 时间：2012-07-05T19:31:00.197
> 
> 标签：c, computer-science, computer-architecture

我有点卡住了，因为我找不到任何涵盖缓存“数据”部分的东西，我用谷歌搜索的所有内容都涉及 99.9% 的缓存寻址。我被问到的问题是这样写的

```
对比“数据位”容量和“开销位”大小的区别
对于两个缓存。

```

我不想要答案，所以我不会发布实际的集合大小，我只是在寻找一个可能是网站的方向或如何“对比”两者的解释。非常感谢任何可能的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:41:42.393

我不确定你是否为这个问题提供了足够的背景信息，但这里有。

缓存不仅必须存储实际缓存的数据，而且——对于每条数据——它所引用的“索引”。因此，当您查找记录 N 时，缓存不仅要保存记录 N 的值，还要保存 N - 这样您才能真正查找数据。这是一种非常简单的看待它的方式。缓存可能有其他元数据来指示有效性和最后访问时间等。

**示例 #1：32 位地址空间中的字节缓存**

每个缓存条目必须存储数据值（8 位）加上地址（32 位）= 40 位，

**示例 #2：32 位地址空间中的 32 位字高速缓存**

每个缓存条目必须存储数据值（32 位）加上地址（32 位）= 64 位，

您可以看到示例 #1 的开销明显更高。

与往常一样，维基百科可能会有所帮助。[http://en.wikipedia.org/wiki/Cache_](http://en.wikipedia.org/wiki/Cache_(computing) (计算)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T04:02:23.940

缓存存储数据，通常像数据阵列一样在 SRAM 中，但也有开销。我并不特别喜欢术语“数据位大小”和“开销位大小”，因为 (a) 存在不是存储位单元的开销，并且 (b) 并非所有位单元都同样昂贵。但是，让我们暂时接受这些条款。

我的看法是，“开销位大小”可能是指为了访问缓存而需要存储的标记位的数量。通常这些存储在不同的数组中，一个与数据数组分开的标签数组。比较数据位数。

下面是三个简单的例子：

考虑一个 32 KiB（千字节）缓存，以及 64 B（字节）缓存行。通常，我们会让地址的 0-5 位作为缓存行偏移量。

32 KiB / (64 B/line) => 2^(5+10) / 2^6 => 2^9 => 512 缓存行。

---++ 示例 1：直接映射

让我们想象它是一个直接映射的缓存。然后我们可以将接下来的 9 位，即地址的 6-14 位作为缓存线数组的“索引”。

到目前为止，一切都很好。现在，要找出标签，我们需要知道完整的地址宽度。假设它是 64 位（尽管截至 2012 年大多数“64 位”机器仅实现 40 或 48 位）。为了区分缓存行与映射到缓存中同一条目的任何其他缓存行，我们需要将地址的剩余位（位 15-63、49 位）存储为标记。

对这种直接映射缓存的访问然后通过提取索引、读取带有该索引的标签和数据、将读出的标签与我们正在查找的地址的标签进行比较、如果它们匹配则声明命中和未命中来进行如果没有，依此类推。

开销：每 64B（512 位）数据有 49 位标签。

总计：* 标签或“开销”：512 * 49 位 * 数据位：512*512 = 32KiB = 256 Kib（kibi 位）。

---++ 示例 2：8 路集合关联

现在让我们假设缓存是 8 路关联的。这意味着 512 行将分为 512/8 = 64 组，每组包含 8 行。

高速缓存行内的偏移量仍然是位 0-5。

但是，我们现在只需要 6 位作为索引，来确定集合数。位 6-11。

标签需要是所有剩余的位，位 12-63，总共 52 位。

因此，8 路关联高速缓存的标记开销是 52 位标记对应 512 位数据。

总计：* 标签：512 * 52 位 * 数据：512 Kib

比较直接映射的 49 位标记。8-way set associative 基本上将 log2(8) 更多位移动到标签中；通常，N-way set associative 将 ceil(log2(N)) 位移动到标签中。

---++ 示例 3：完全关联

这是直接映射频谱的远端。每个高速缓存行仍然有 512 位数据，但现在整个 64 位地址，除了 6 位偏移量，都是标记。58 位标记用于完全关联，而 52 位用于 8 路，而 49 位用于直接映射。

但还记得我说过我不喜欢“开销位”这个词吗？完全关联缓存中的标记位通常不仅是普通的存储位，而且还必须有比较器——基本上是 XOR 门。这种“CAM（内容可寻址存储器）”位通常比普通位更昂贵。

----+ 结论

所以，我认为这就是你的老师想要的：数据位与标签位的直接比较。这是开销的下限。

从直接映射到 N 路集合关联到完全关联的频谱提供了一个示例。但是缓存设计的其他方面也会影响开销。例如：

*   如果您使用不同的地址大小，则百分比开销会发生变化。例如，在 diredt 映射示例中，32 位地址只有 17 位标记，而 64 位地址则为 49 位。

*   如果您更改缓存索引功能，您可能必须更改标签大小。例如，在高速缓存中具有素数的高速缓存行或集合有一些好处，例如，对于直接映射高速缓存，511 行而不是 512 行。像这样的素数减少了共振问题。但简单来说，它们需要将标签宽度增加到全宽 58 位。

*   像扇区缓存这样的方案允许共享标记位的某些部分。

等等。

至于教程网站：

*   对不起，我不知道这样的初学者的东西。但我会用谷歌搜索许多大学的课堂笔记。

*   我的网站[http://comp-arch.net](http://comp-arch.net)涵盖了计算机体系结构的高级主题。但是这种东西太基础了，太初级了，我不能放在 comp.arch 上。尽管我想我应该先写一些对基础知识的简单解释，然后再讨论高级主题。偶尔会写这样的教程，比如这里，但是我没有收集到。

*   USEnet 新闻组 comp.arch 可能有用。

---+ 为什么这对stackoverflow 上的程序员很重要？

这主要是一个硬件话题。

但是程序员调整代码需要理解这样的东西，以获得最佳性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T19:42:26.120

由于您已经标记了计算机体系结构和 C，因此我假设这是一项任务，要求您在 C 或类似的东西中制作缓存“模拟器”。并且问题中的“两个缓存”指的是两种不同类型的缓存（全关联，n路，直接映射..）。在该范围内，问题是要求您讨论两种类型的缓存之间的区别，主要是“开销位”大小之间的比率，这里是缓存条目（有效位、偏移量、标记）和“数据位”，它是存储在高速缓存行中的实际数据。我希望这有帮助。

# python - 更改 numpy.seterr 默认值？

> ID：11351264
> 
> 赞同：1
> 
> 时间：2012-07-05T19:31:03.217
> 
> 标签：python, numpy

我想将我的 seterr*默认值*更改为全部“警告”或全部“忽略”。这可以通过做交互式地完成`np.seterr(all='ignore')`。有没有办法让它成为系统默认值？`.numpyrc`据我所知，没有；是否有其他配置文件可以更改这些默认值？

（我使用的是 numpy 1.6.1）

编辑：问题不在于 numpy 的默认设置已更改，正如我错误地怀疑的那样，而是另一个代码 ，`pymc`正在更改通常为`ignore`或`warn`to 的内容`raise`，导致各种不希望的和意外的崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:10:21.827

对于交互式会话，您可以使用[`$PYTHONSTARTUP`](http://docs.python.org/using/cmdline.html#envvar-PYTHONSTARTUP)环境变量指向一个文件，然后该文件中的所有命令将在交互式会话开始之前执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:20:58.543

没有为此的配置文件。你将不得不给`np.seterr()`自己打电话。

# jsf - 我可以控制 JSF2 部分渲染更新处理的顺序吗？

> ID：11351265
> 
> 赞同：1
> 
> 时间：2012-07-05T19:31:09.087
> 
> 标签：jsf, jsf-2, primefaces

我有一组特定的组件（primefaces 延迟加载的数据表和 ap:messages）正在通过 ajax 请求中的部分呈现进行更新。我已将消息组件配置为在数据表的页面事件上更新，但似乎消息组件总是在数据表之前更新，除非我将它放在数据表组件下方的相应表单中。

这里总结一下jsf页面配置；我还有一些代码在`#{lazyDataModel}`支持 bean 的“加载”方法中向 faces 上下文添加一条消息，并在检查部分响应（和屏幕结果）时，将此消息添加到“msgsAfter”的更新中，但不是'msgsBefore'。

```
<h:form id="reviewRoomsForm">
    <p:messages id="msgsBefore" globalOnly="true" showDetail="true" />
    <p:dataTable id="hotelRooms" var="room" value="#{lazyDataModel}" paginator="true" 
                 rows="10" emptyMessage="#{msg.noRecordsFound}">
        <p:ajax event="sort" update=":reviewRoomsForm:msgsBefore :reviewRoomsForm:msgsAfter" />
        <p:ajax event="page" update=":reviewRoomsForm:msgsBefore :reviewRoomsForm:msgsAfter" />

        ...

    </p:dataTable>
    <p:messages id="msgsAfter" globalOnly="true" showDetail="true" />
    <br />
</h:form> 
```

我想知道，是否有任何方法（JSF2 或 Primfaces 特定）来控制在部分渲染上更新组件的顺序？或者，如果我不能明确指定更新的顺序，有没有办法传达一个组件依赖于另一个组件（因此应该在另一个组件之后更新）？我的最终目标是让消息显示在页面顶部，即使在部分更新期间发生错误（例如在惰性分页表中）。

**我尝试过的事情：**

*   在“更新”属性中重新排序组件 ID；似乎没关系。看起来迭代的顺序是由父组件的 getFacetsAndChildren() 控制的
*   添加 ap:remoteCommand 在“oncomplete”客户端事件中触发，以便页面事件手动更新消息；以正确的顺序触发，但此时消息不再在 FacesContext 中。

**编辑：**这似乎是 primefaces 组件中的一个可能错误，因为它在 RENDER_RESPONSE 阶段而不是 UPDATE_MODEL_VALUES 阶段触发了lazyDataModel 上的“加载”事件。如果它碰巧在 UPDATE_MODEL_VALUES 阶段更新了它的模型值，那么适当地呈现错误消息就没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:32:44.630

`LazyDataModel#load(...)`在 RENDER RESPONSE 阶段调用。不幸的是，您将无法在此方法中放置消息并让它们显示在数据表之前的 msgsBefore 组件中。如果您可以将创建 Faces 消息的逻辑移动到 JSF 生命周期早期的位置，例如在页面事件的侦听器方法中，那么您的消息将同时显示在 msgsBefore 组件和 msgsAfter 组件中。

如果你不能这样做，以下应该对你有用（对我有用）：

```
<p:ajax event="page" 
        update=":reviewRoomsForm:msgsBefore :reviewRoomsForm:msgsAfter"
        oncomplete="$('#reviewRoomsForm\\\\:beforeMessage').html($('#reviewRoomsForm\\\\:afterMessage').html())" 
```

# javascript - Twitter Bootstrap 轮播分享水平行

> ID：11351267
> 
> 赞同：0
> 
> 时间：2012-07-05T19:31:09.403
> 
> 标签：javascript, css, twitter-bootstrap, carousel

我想设置一个 400x400 像素的轮播，并与左侧的另一个元素共享一个水平行。例如，我有一个包含 span4 类的行类，然后是下面代码中的轮播。但是，导航控件未与轮播图像对齐（控件不会随轮播向右移动，而是保留在 span4 类所在的左侧）。

```
<div class="row">

  <div class="span4">
    <h2>Heading</h2>
    <p>Some Text</p>
  </div>

  <div id="this-carousel-id" class="carousel slide" style="max-width: 400px">
    <div class="carousel-inner">
      <div class="item active"><img src="http://placehold.it/400x400" alt="" />
      </div>
      <div class="item"><img src="http://placehold.it/400x400" alt="" />
      </div>
    </div>
    <!--  Carousel Controls -->
    <a class="carousel-control left" href="#this-carousel-id" data-slide="prev">&lsaquo;</a>
    <a class="carousel-control right" href="#this-carousel-id" data-slide="next">&rsaquo;</a>
  </div>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T16:58:36.960

如果您不打算`span*`在轮播中使用类，则需要在轮播中添加`float: left`样式`<div>`。

或者，由于其选择器的`bootstrap.css`用途`[class*="span"]`，您可以在 carousel 上添加`span`（或任意类似的东西`cspan-is-boring`）作为类`<div>`。

请参阅[JS 小提琴](http://jsfiddle.net/tDkCr/)。

# database - 从数据库或列表中获取数据的更快方法？

> ID：11351277
> 
> 赞同：0
> 
> 时间：2012-07-05T19:31:48.580
> 
> 标签：database, list, jakarta-ee, fetching-strategy

任何人都可以详细说明哪种是获取数据的更快方式。直接从数据库中获取还是从列表中获取？

假设，在一个java web应用程序中，一些数据需要操作，这些数据在数据库中，它们也在一个列表中，并保存在会话或上下文中。现在，当用户发送请求时，它也会发送一些参数，现在基于该参数需要获取一些数据，这些数据位于列表或数据库中。由于该应用程序是一个多用户应用程序，因此将有大量请求向服务器发送，因此为每个请求与数据库交互似乎不是一个好的选择，从列表中获取它似乎是一种缓慢的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:34:31.913

我很确定这在很大程度上取决于您当前存储列表的长度以及数据库的大小。如果没有更具体的例子，真的很难回答这样的问题。

# ios - 安装旧版本时，应用程序更新不会启动

> ID：11351279
> 
> 赞同：1
> 
> 时间：2012-07-05T19:32:03.690
> 
> 标签：ios, launch

我有一个应用程序，它使用核心数据和持久数据库，用户可以在其中存储数据。

该应用程序的第一个版本针对 iOS 4.1

我已经完成了用户端和开发者端的大规模更新。该应用程序现在针对 iOS 5.1，因为我想利用 Storyboards 和 ARC。所以，我没有去旧项目开始改变事情，而是从头开始了一个新项目。我为项目提供了相同的 bundleID，并将版本和构建设置为 2.0（两者）。但是，xcode 项目具有不同的名称。

该应用程序在模拟器和设备上都可以正常工作。但是，为了检查更新过程是否正常，我在两台设备（iPhone 和 iPad）上都安装了旧版本，然后我从后台杀死了该应用程序，并从 xcode 启动了 2.0 版本。

应用程序已安装（图标已更新），但应用程序不会启动。我试图再次点击主屏幕上的应用程序，但它不起作用。唯一可行的方法是我从设备中删除应用程序并安装 2.0 版本。问题是 sqlite 数据库已从文档中删除，用户将丢失他/她的数据。

在控制台上，唯一的消息如下：

```
error: failed to launch '/Users/marcal/Library/Developer/Xcode/DerivedData/pureNMR-ddeelrvexokmoocaqkbwswvyubhi/Build/Products/Debug-iphoneos/pureNMR.app/pureNMR' -- failed to send the qLaunchSuccess packet 
```

我敢肯定，我不是唯一一个遇到这个问题的人，在这里我会非常感谢一些帮助。

提前致谢！

**更新**：

我再次清理了 Xcode 上的派生数据。然后我检查了应用程序名称，它与原始应用程序（v1.0）不匹配。当我这样做时，Xcode 更改了 bundleID 以匹配 App 名称，因此我必须找出如何再次更改 bundleID 以匹配原始名称。这很重要，否则它将被视为新应用程序。

毕竟，我在设备上安装了 v1.0，退出应用程序，从后台删除它并安装了 v2.0

现在控制台给了我以下错误：

```
error: failed to launch '/Users/marcal/Library/Developer/Xcode/DerivedData/pureNMR-ddeelrvexokmoocaqkbwswvyubhi/Build/Products/Debug-iphoneos/Pure NMR.app/Pure NMR' -- No such file or directory (/Users/marcal/Library/Developer/Xcode/DerivedData/pureNMR-ddeelrvexokmoocaqkbwswvyubhi/Build/Products/Debug-iphoneos/Pure NMR.app/Pure NMR) 
```

该应用程序不会立即启动（这是它给我错误的时候）。然而，重要的是，当我在设备上点击应用程序时，它会完美启动并且运行良好。更好的是，存储在 v1.0 上的 sqlite db 上的数据按预期保留在那里。

我认为现在错误是因为我删除了派生数据，但其他都很好。

欢迎进一步讨论这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:01:21.883

尝试重新启动 Xcode 和您的设备，清理，然后构建并重试。

# c# - SlimDX DX9 进程之间的共享表面。（C＃）

> ID：11351281
> 
> 赞同：0
> 
> 时间：2012-07-05T19:32:13.550
> 
> 标签：c#, winforms, directx, directx-9, slimdx

**问题：** 需要与另一个进程共享 SlimDx.Direct3D9.Surface 以便它可以显示渲染输出。我可以创建 Surface，但我还没有找到在进程之间共享它的方法。

**可用代码** 我可以访问应用程序的双方，但提供渲染输出的应用程序是有限的。我无权创建设备。我可以引用 Direct3D9 设备，创建渲染目标，并成功捕获输出。

**更多细节**

我有一种感觉，我会被指责不先看，但我可以向你保证，我必须尽我所能。

但是，我正在尝试将 DirectX 9 Surface 共享给另一个进程，以便我可以在外部表单中捕获渲染输出。

我在共享表面上发现了几件事，但似乎还没有弄清楚如何使用 DirectX 9 设备在 2 个进程之间共享表面。

我对 DirectX 设备本身的访问受到限制。我通过嵌入在应用程序中的内置脚本模块来访问它。我无法知道不是公共变量的创建属性或参数，但我确实可以完全访问设备本身。

**因此，使用下面的代码（以准确演示我在大多数情况下必须使用的内容）我试图弄清楚如何与另一个进程共享该 Surface，以便我可以在该表单上获得渲染器的输出。**

基本上，我的代码如下所示：（ **简化）**

```
byte[] ARGB;
//Getting internal access to renderer's Direct3D9.Device (Already created)
SlimDx.Direct3D9.Device dev = renderer.Device.Device;
//Surface I create to capture the devices output
SlimDx.Direct3D9.Surface destination; 
//Create render target to device
destination = Surface.CreateRenderTarget(this.dev, this.w, this.h, Format.A8R8G8B8, MultisampleType.None, 0, true);

// 1\. Render, 
// 2\. then grab snapshot (internal call), 
// 3\. convert to byte array (not relevant to what I'm currently doing)
if (this.renderer.Render())
{
    board.Snapshot(this.destination); //some internal logic to get surface
    try
    {
        using (DataStream data = destination.LockRectangle(LockFlags.ReadOnly).Data)
        {
            data.Read(ARGB, 0, (int) data.Length);
        }
    }
    finally
    {
        this.destination.UnlockRectangle();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T11:13:37.413

要与 directx9 共享纹理，您的设备需要是以下类型：

```
SlimDX.Direct3D9.DeviceEx mydeviceex; 
```

默认的 directx9 设备不支持共享资源。

然后您可以使用以下方法获取共享句柄：

```
 IntPtr sharedhandle;
 Texture texture = new Texture(mydeviceex, width, height, 1, Usage.RenderTarget,    
 format, Pool.Default, out sharedhandle); 
```

1 用于 mipmap（共享资源必须只有一层）。格式也有一些限制，A8R8G8B8 在这种情况下很常见。

# windows - 如何在 Windows 上远程更改注册表值

> ID：11351283
> 
> 赞同：1
> 
> 时间：2012-07-05T19:32:32.513
> 
> 标签：windows, ssh

我想运行这个命令： reg add "HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\CurrentVersion\Winlogon" /v DefaultPassword /d newpasswd /t REG_SZ /f 在通过命令行连接到 Windows 主机后。

现在，我可以通过 ssh 以管理员身份连接到它，但运行该命令不会导致任何更改发生。

有谁知道为什么？我有什么选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-31T07:05:43.357

这可能是因为您的守护程序与您的系统架构不匹配。我遇到了同样的问题，我的 SSHd 是 32 位，我试图更改 64 位机器上的注册表项。将 SSHd 升级到 64 位对我有用。

# python - nltk 标记化和收缩

> ID：11351290
> 
> 赞同：19
> 
> 时间：2012-07-05T19:32:58.887
> 
> 标签：python, nlp, nltk

我正在用 nltk 标记文本，只是输入 wordpunct_tokenizer 的句子。这会拆分收缩（例如，'don't' 到 'don' +" ' "+'t'），但我想将它们保留为一个词。我正在改进我的方法，以便对文本进行更测量和更精确的标记化，因此除了简单的标记化之外，我还需要更深入地研究 nltk 标记化模块。

我猜这很常见，我想从以前可能不得不处理特定问题的其他人那里得到反馈。

编辑：

是的，我知道这是一个一般性的问题

另外，作为 nlp 的新手，我是否需要担心宫缩？

编辑：

SEprTokenizer 或 TreeBankWordTokenizer 似乎可以满足我现在正在寻找的功能。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-06T01:39:05.470

您使用哪种标记器实际上取决于您接下来要做什么。正如inspectorG4dget 所说，一些词性标注器处理分裂收缩，在这种情况下分裂是一件好事。但也许这不是你想要的。要决定哪种标记器最好，请考虑下一步需要什么，然后将您的文本提交到[http://text-processing.com/demo/tokenize/](http://text-processing.com/demo/tokenize/)以查看每个 NLTK 标记器的行为方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T02:44:16.270

因为缩略词的数量非常少，一种方法是搜索并将所有缩略词替换为完全等效的（例如：“不要”到“不要”），然后将更新的句子输入 wordpunct_tokenizer。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T19:54:53.540

我以前在[这个项目](http://individual.utoronto.ca/ashtopgun/Projects/nlp.html)上与 NLTK 合作过。当我这样做时，我发现考虑宫缩很有用。

但是，我没有编写自定义标记器，我只是在 POS 标记后处理它。

我怀疑这不是您正在寻找的答案，但我希望它有所帮助

# jquery - 如何在 kwicks 的 jquery 手风琴图像滑块底部获得向上滑动的标题

> ID：11351293
> 
> 赞同：2
> 
> 时间：2012-07-05T19:33:03.363
> 
> 标签：jquery, animation, slider

我正在使用[这个](http://www.aoclarkejr.com/demos/accordion-slider.html)手风琴滑块。

一切都很好，除了我需要每个图像，单独的文本将位于特定背景（即灰色）上相应图像的底部。在显示图像时，带有背景的文本只会在图像上向上滑动。文本部分的高度会很小（如果图像高度是 250px ，那么文本部分的高度可以是 50 px ）。

有谁只是告诉js和html的哪一部分要修改以及以哪种方式修改？

向上滑动效果或在图像上放置文本非常容易，但我正在寻找不那么小的（至少在我看来）脚本的情况下的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:30:39.053

您需要使用具有回调[的 Kwicks one 的更新版本。](https://github.com/Mottie/Kwicks)

然后添加字幕，css定位字幕和以下回调代码（这里是一个[演示](http://jsfiddle.net/Mottie/DGEQn/189/)）：

```
$('#demo').kwicks({

    // event called before kwicks expanding animation begins
    expanding: function(kwick) {
        kwick.$kwicks.find('.caption').stop(true,true).slideUp();
        kwick.$active.find('.caption').stop(true,true).slideDown();
    },
    // event called before kwicks collapsing animation begins
    collapsing: function(kwick) {
        kwick.$kwicks.find('.caption').stop(true,true).slideUp();
    }

}); 
```

# jquery - 使用 Jquery 和 AJAX 向 VB.NET webmethod 传递参数

> ID：11351301
> 
> 赞同：3
> 
> 时间：2012-07-05T19:33:46.603
> 
> 标签：jquery, ajax, vb.net, webmethod

我已经在互联网上搜索了几个小时，试图使用 JQUERY $.ajax 将参数传递给我的代码。我尝试了很多不同的东西，但没有任何效果。当我不传递任何参数并将 vb.net 函数设置为不接收参数时，函数将被调用。但是一旦我尝试添加参数，该函数就永远不会被调用。

客户端：

```
$("#<%=saveResource2.clientID %>").click(function() {
        var parDesc = $("#<%=ddlPDesc.clientID %> option:selected").text();
        $("#<%=Button1.clientID %>").click();
        $.ajax({
            type: "POST",
            url: "Projects.aspx/btnSaveResource",
            data: JSON.stringify({Desc: parDesc}),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function(msg) {

                $("#<%=lblPerson.clientID %>").text(msg);
                // Do something interesting here.
            }
        });

    }); 
```

服务器端：

> ```
> <WebMethod()> _
> <ScriptMethod(ResponseFormat:=ResponseFormat.Json)> _
> Public Shared Function btnSaveResource(ByVal parDesc As String) As String
>     Dim d As String = parDesc
>     Return d + "test"
>  End Function 
> ```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T19:36:26.390

尝试从这里改变：

```
data: JSON.stringify({Desc: parDesc}), 
```

到

```
data: JSON.stringify({parDesc: parDesc}), 
```

# html - 在保持斑马条纹的表格中隐藏/显示 TR

> ID：11351302
> 
> 赞同：1
> 
> 时间：2012-07-05T19:33:46.853
> 
> 标签：html, css, zebra-striping

我有一张带有斑马条纹的桌子：

```
tr:nth-child(even)
{
    background-color: red;
}
tr:nth-child(odd)
{
    background-color: blue;
} 
```

我想显示/隐藏它的行，保持表格条纹（从更改的行重新着色到最后一行）。我看到了两种方法：

1.  创建一个不可见的表并`<TR>`使用 jQuery 将 s移入`after()`/移出它。我已经测试了分离并且它可以工作（表在分离时被重新着色），但是插入分离的（无处）行没有，所以我猜将行移动到另一个表应该会有所帮助。
2.  在我们切换后立即调用 jQuery`toggle()`并创建/删除不可见的。`<TR>`

哪一个更好？也许，还有更好的方法？

问候，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T19:54:42.823

CSS 的`:nth-child`选择器根据其**在其兄弟元素中的索引来**选择一个元素。它不考虑元素的可见性（或其他选择器）。

而不是使用jQuery添加/删除行，只需添加/删除类名：http: [//jsfiddle.net/rTER4/](http://jsfiddle.net/rTER4/)

```
var $allRows = $('tr:visible');
var $oddRows = $allRows.filter(':odd');
var $evenRows = $allRows.filter(':even');

// Remove old classes, then add new ones.
$oddRows.removeClass('even').addClass('odd');
$evenRows.removeClass('odd').addClass('even');

/* CSS */
tr.even { background-color: red; }
tr.odd  { background-color: blue;} 
```

# finance - 从纳斯达克仅获取符号和公司名称

> ID：11351324
> 
> 赞同：0
> 
> 时间：2012-07-05T19:34:47.253
> 
> 标签：finance

我可以通过此请求从 nasdaq 获取信息 [http://www.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=nasdaq&render=download](http://www.nasdaq.com/screening/companies-by-name.aspx?letter=0&exchange=nasdaq&render=download) 并且结果将包含这些列 `Symbol,Name,LastSale,MarketCap,ADR TSO,IPOyear,Sector,industry,Summary Quote`

但是在我的数据库中，我有带有列的表 -`Symbol`和`Name`. 是否可以从请求中仅获取符号和名称（因为这样我可以轻松地将所有数据从 .csv 结果读取到数据库）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:46:45.500

您必须就他们的 API 联系 NASDAQ 并查看他们是否接受参数来修改此 CSV 输出。他们可能在他们的网站上的某个地方有更多的文档。

另一种方法是下载数据并对其进行解析以仅获取您需要的数据。为了帮助解决这个问题，您需要提供有关编程语言等的更多数据。

# vb.net - 在 vb.net 中打印 PDF 不能 100% 工作

> ID：11351325
> 
> 赞同：0
> 
> 时间：2012-07-05T19:34:49.197
> 
> 标签：vb.net

全部，

我有以下代码用于打印写入磁盘的 pdf 文件：

```
Public Function PrintPDF(ByVal PDFFile As String, ByVal Printer As String, ByVal Timeout As Integer) As Integer

    log_error.sendEventLog("PrintPDF", "DEBUGGING - Printing PDF. File: " & PDFFile & ". Printer: " & Printer, EventLogEntryType.Information)

    If Printer.Trim.Length = 0 Then
        Printer = (New System.Drawing.Printing.PrinterSettings).PrinterName
    End If

    Dim Proc As New System.Diagnostics.Process

    Try
        Proc.EnableRaisingEvents = True
        Proc.StartInfo.FileName = PDFFile
        Proc.StartInfo.Arguments = Chr(34) + Printer + Chr(34)
        Proc.StartInfo.Verb = "PrintTo"
        Proc.StartInfo.WindowStyle = ProcessWindowStyle.Minimized
        Proc.StartInfo.CreateNoWindow = True

        Proc.Start()
    Catch ex As Exception
        log_error.sendEventLog("PrintPDF Error", "An issue has occured when attemtping to print a PDF", EventLogEntryType.Error)
    End Try

    Do While Timeout > 0 AndAlso Not Proc.HasExited
        System.Threading.Thread.Sleep(1000)
        Timeout -= 1
    Loop

    If Not Proc.HasExited Then
        log_error.sendEventLog("PrintPDF", "Process Killed", EventLogEntryType.Information)
        Proc.Kill()
    End If

    log_error.sendEventLog("PrintPDF", "Process Closed", EventLogEntryType.Information)
    Proc.Close()
    Proc.Dispose()

    Return 0
End Function 
```

使用此方法时，我循环浏览了大约 10 个 PDF 文档。这些文档的大小在 2mb 到 5mb 之间。出于某种原因，某些文档会打印，而其他文档则不会。文件大小和打印成功之间似乎没有相关性。由于正在处理，因此不会引发任何错误。

有没有人遇到过这样的问题？请让我知道，如果你有任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T15:13:30.860

我有一个类似的问题，我发现如果我增加睡眠时间，那么线程就有时间完成它所做的事情，然后打印 PDF。试试看希望有帮助

# php - PHP 自身的 PHP 未定义索引

> ID：11351331
> 
> 赞同：0
> 
> 时间：2012-07-05T19:35:08.540
> 
> 标签：php, forms, undefined-index

我的页面上不断出现未定义的索引错误。我尝试了不同的东西，但似乎无法摆脱它。我有一个项目，我必须创建一个运行 Server PHP Self 的简单区域转换。

```
<?php 
if ($_POST['number'] == "") {
    $number = '';
} else {
    $number = $_POST['number'];
 }
?>

 <form method="POST" action="<?php echo $_SERVER['PHP_SELF'];?>">
     <label>Please Select Area Conversion Method</label>
     <select name="con">
         <option selected="selected"></option>
         <option>Square Feet to Square Meters</option>
         <option>Square Yards to Square Meters</option>
         <option>Square Miles to Square Kilometers</option>
         <option>Square Meters to Square Feet</option>
         <option>Square Meters to Square Yards</option>
         <option>Square Kilometers to Square Miles</option>
     </select><br />
     <label>Input Number: </label>
     <input type="text" name="number" size="10" /><br />
     <input type="submit" value="Calculate" name="submit" />
 </form> 
```

我试过做`if isset`and `if empty`，但似乎无法摆脱`undefined index error`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:38:27.323

试试这个：

```
 <?php 
if (!isset($_POST['number'] || $_POST['number'] == "") {
 $number = '';
} else {
    $number = $_POST['number'];
 }
 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:38:11.350

有错误可能是因为索引`number`不存在于`$_POST`.

在使用它之前检查它是否存在，或者在使用它可能会或可能不会设置的索引之前`$_POST['number']`检查它是否不为空。`$_POST`

```
if ( !empty($_POST) )
{
    if( $_POST['number'] == "" )
    // ...
} 
```

或者，如果您明确检查 'number' 是否为空白字符串：

```
if( isset( $_POST['number'] ) && $_POST['number'] == "" )
{
    // ... 
```

但是，对于您的情况，最好只执行以下操作：

```
$number = isset($_POST['number']) ? $_POST['number'] : ''; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T19:42:07.070

相同答案的另一个变体，但更短：

```
$number = empty($_POST['number']) ? '' : $_POST['number'] ; 
```

# database - 调试慢速数据库调用的一般提示或流程图？

> ID：11351332
> 
> 赞同：0
> 
> 时间：2012-07-05T19:35:10.410
> 
> 标签：database, debugging, database-design

有谁知道调试慢速数据库的*一般*指南？

我被要求调试一个运行非常缓慢并且在数据库调用（具有 MySQL 后端的 ZendPHP 站点）上运行非常缓慢并且挂起或崩溃的网站（不是我编写的）。

我很高兴使用 SQL，但永远不会将自己描述为 devops 类型或数据库开发人员，我想知道首先要问的明智问题。

我正在寻找建议可能的方法的东西，例如：

*   我想我应该从监控数据库*何时*变慢开始——我该怎么做？
*   一旦我知道它什么时候变慢，我该如何调试那些特定的数据库调用？
*   服务器上运行的其他进程是否可能会减慢数据库的速度？我该如何调试这些？

然后是在每种情况下采取的一般策略。

我希望这个问题不是太笼统。我认为这样的指南对许多开发人员来说非常有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:28:17.847

您的第一步应该是找出数据库在运行缓慢时在做什么。使用 MySQL 最简单的方法是使用[slow_query_log](http://dev.mysql.com/doc/refman/5.1/en/slow-query-log.html)。一些合理的设置是：

```
log_slow_queries    = /var/log/mysql/mysql-slow.log
long_query_time = 2
log-queries-not-using-indexes 
```

启用此功能后，您将看到如下内容：

```
# User@Host: myuser[myuser] @ localhost []  # Query_time: 10.000347  Lock_time: 10.000094 Rows_sent: 2  Rows_examined: 4
SET timestamp=1341519484;
select  *  from (mytab) where (field=value); 
```

一旦您确定了一个运行缓慢的查询，您可以再次手动运行相同的查询以找出发生了什么，但这一次以“解释”为前缀：

```
mysql> explain select * from mytab;
+----+-------------+-------+------+---------------+------+---------+------+------+-------+
| id | select_type | table | type | possible_keys | key  | key_len | ref  | rows | Extra |
+----+-------------+-------+------+---------------+------+---------+------+------+-------+
|  1 | SIMPLE      | mytab | ALL  | NULL          | NULL | NULL    | NULL |  189 |       |
+----+-------------+-------+------+---------------+------+---------+------+------+-------+ 
```

然后，您可以识别缺失索引、是否存在不必要的请求等。有关架构的一些信息会很有用。

如果您还安装了类似 sar 或[atop](http://www.atoptool.nl/)（例如，通过编辑 /etc/init.d/atop 将间隔 arg 更改为“60”，然后运行 ​​/etc/init.d/ 将采样率设置得足够低） atop restart) 您可以关联请求出现在 slow_query_log 中时服务器的行为，以确定是否存在任何其他系统争用问题。

Note that databases like MySQL (or, in fact, most applications which don't use O_DIRECT) will take advantages of IO buffering, meaning that once a particular block of data is accessed once, it'll remain in a buffer until the kernel needs to free up that memory space. This means that running the same query time and time again, if that query *is* particularly inefficient, may not give equal results each time.

If you post some more information about the particular query and the schema we could try to look at it a little more.

# javascript - JQuery - 多个超时

> ID：11351333
> 
> 赞同：0
> 
> 时间：2012-07-05T19:35:11.473
> 
> 标签：javascript, jquery

我有一个表单，其中 JQuery 根据不同字段的要求触发错误消息。我希望消息根据需要在每个字段旁边弹出，并且我希望每个消息都淡入，有 3 秒超时，然后淡出。

但我想知道：有没有办法让一个对象或数组存储所有超时？基本上，所有错误当前都在对超时的相同引用中运行。因此，如果一个输入触发错误，而另一个输入在 1 秒后触发错误，则第二条消息会在 2 秒（而不是 3 秒）内消失，因为它都指的是一个超时变量，而第一次触发设置了初始计时器。

这是针对订单的，因此 Product 指的`Div 'product'`是触发错误的输入的父级。

我有这样的事情：

```
function error_check_number(input)
{
    var intRegex = /^\d+$/;
    var product = jQuery(input).closest('div.product');
    if (!intRegex.test(input.val()) && input.val() != '')
    {
        input.val('0');
        if (jQuery('div.error-message', product).length <= 0)
        {
            var error = jQuery("<div class='error-message'>Number Values Only</div>").hide();
            error.appendTo(jQuery(product)).slideDown("fast");
        }

        var thetime = setTimeout(function(){
            jQuery("div.error-message", product).slideUp("fast", function () {
                jQuery("div.error-message").remove();
        });
        }, 3000);       
    }
    else
    {
        clearTimeout(thetime);
        jQuery("div.error-message", product).slideUp("fast", function () {
            jQuery("div.error-message", product).remove();
        });
    }
} 
```

就超时而言，我希望每次调用错误消息都彼此独立运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:11:19.493

试试这个

```
if (!intRegex.test(input.val()) && input.val() != '')
{
    input.val('0');
    if (jQuery('div.error-message', product).length <= 0)
    {
        var error = jQuery("<div class='error-message'>Number Values Only</div>");
        error.appendTo(jQuery(product)).slideDown("fast", function(){
            var timeout=setTimeout(function(){ 
                error.slideUp("fast", function () {
                    error.remove();
                });
            }, 3000);
        });
    }
} 
```

我认为如果没有视觉示例，我将无法走得更远。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:23:02.217

这是我的，未经测试，但我认为它会工作

```
function error_check_number(input) {
    var intRegex = /^\d+$/;
    var product = jQuery(input).closest('div.product');
    var error_div = product.find('div.error-message');

    function displayError(msg, field_name) {
       var error = $('<div class="error" id="error_for_'+field_name+'">'+msg+'</div>').hide();
       error.appendTo(error_div).slideDown("fast");

       error[0].timer = setTimeout(function(){
              error.slideUp("fast", function () {
                 error.remove();
              });
      }, 3000);       
    }

    if (!intRegex.test(input.val()) && input.val() != '') {
        input.val('0');
        displayError("Number Values Only");
    } else {
        err = error_div.find("#error_for_"+input.attr('name'));
        if (err[0]) {
           clearTimeout(err[0].timer)
           err.remove();
        }
    }
} 
```

这假设 div.error-message 始终存在。这充当所有错误消息的容器。它不会移除容器。如果您不喜欢这种行为，您可以简单地将其附加到“div.product”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T20:40:27.417

我刚刚用 doTimeout() 试过这个，它似乎工作得很好。为什么我不应该使用它？

benalman.com/projects/jquery-dotimeout-plugin

```
function error_check_number(input)
{
    var intRegex = /^\d+$/;
    var product = jQuery(input).closest('div.product');
    if (!intRegex.test(input.val()) && input.val() != '')
    {
        input.val('0');
        if (jQuery('div.error-message', product).length <= 0)
        {
            var error = jQuery("<div class='error-message'>Number Values Only</div>").hide();
            error.appendTo(jQuery(product)).slideDown("fast");
        }
        jQuery.doTimeout(jQuery(input).attr('name'), 3000, function(){
            jQuery("div.error-message", product).slideUp("fast", function () {
                jQuery("div.error-message", product).remove();
        });
        }, true);

    }
    else
    {
        jQuery.doTimeout(jQuery(input).attr('name'), function(){
            jQuery("div.error-message", product).slideUp("fast", function () {
                jQuery("div.error-message", product).remove();
        });
        }, false);
    }
} 
```

# java - 自定义注释的使用，如何

> ID：11351335
> 
> 赞同：3
> 
> 时间：2012-07-05T19:35:19.103
> 
> 标签：java, annotations

假设您设置了自定义注释

```
public @interface ThreadSafe {
} 
```

向代码的读者表明类或方法实际上是线程安全的

除了注释的变体之外，这些类型的自定义注释还能如何使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:45:22.127

如果您只是询问此类注释的潜在应用，这里有一些我想不到的......

*   反射代码可能会利用注释方法的线程安全性。例如，Guava`EventBus`使用[`@AllowConcurrentEvents`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/eventbus/AllowConcurrentEvents.html)注释作为其`EventBus`框架的提示。
*   静态分析工具可以使用注释作为提示——一个方法*应该*具有某个属性，或者该方法的用户可以假设某个属性。例如，静态分析工具可能会对带注释的方法执行额外的检查，`@ThreadSafe`以确保它们实际上是线程安全的。
*   您可以设计预处理器来识别仅因为特定方法是线程安全的而可用的优化机会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:45:53.037

这样的注释可以带来可用于提高算法效率的信息。[RandomAccess](http://docs.oracle.com/javase/6/docs/api/java/util/RandomAccess.html)接口用于此目的。

# xcode - 在我选择的编辑器中编辑 xcode 源文件有什么危险吗？

> ID：11351338
> 
> 赞同：0
> 
> 时间：2012-07-05T19:35:23.783
> 
> 标签：xcode

我偶尔会在 Emacs 中查看我的 Xcode 源文件，我对此非常满意。我推测 Apple 已经取消了在 Xcode 4 中指定备用编辑器的功能。但如果我有时在 Emacs 中编辑文件，我是否有可能让 Xcode 陷入某种深深的困惑状态，即。以某种方式“吸管”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:40:17.903

如果您编辑单个文件，那没关系。如果您同时打开了 Xcode，则可能会出现问题。如果 Xcode 编辑器打开了那个文件并且你不小心保存了，你会保存它。但这与使用 2 个编辑器相同。

但是，如果您开始使用实际的 Xcode 项目文件，那么手套就没有了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:37:59.823

我经常在 Dreamweaver 或 TextMate 中编辑 Phonegap 文件，但没有遇到任何问题。

# c# - 如何让本地应用程序从基于浏览器的游戏 Web 服务器轮询游戏数据

> ID：11351340
> 
> 赞同：1
> 
> 时间：2012-07-05T19:35:29.900
> 
> 标签：c#, php, javascript, webserver

感谢您调查我的问题。

拳头让我声明，我在任何类型的 Web 开发方面的经验都非常有限。我的强项是嵌入式系统，与它们的 Web 界面无关。另外，我不是在寻找任何人为我做这项工作。如果有人可以告诉我“是的，这是可以做到的，这是您将要使用的一般方向和方法”，我很乐意自己学习其余部分。

我感兴趣的是从基于浏览器的游戏的网络服务器获取数据并对其进行一些本地分析。例如，像 Ultima 或 Ikariam 这样的游戏允许您从浏览器玩游戏，显然控件和界面是从托管游戏的服务器更新的。我用greasemonkey java脚本做了一些实验，并且看到了从这些游戏中读取数据并修改UI的脚本；但是，这些脚本的性质不允许我将数据传输到本地计算机进行分析。我更喜欢用 C# 编写我的应用程序，但如果没有 .NET 解决方案是实用的，我愿意接受其他选择。有没有办法做到这一点？这个想法是让我能够登录游戏并在我的应用程序轮询数据（如资源计数或攻击等）或其他东西时让我的浏览器保持打开状态。或者也许我 我缺少一些东西，脚本可以写入本地机器。如果您需要更多信息，请告诉我。

感谢你的宝贵时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:45:52.370

大多数游戏引擎都努力使他们的数据不落入服务器之外的人手中。是的，客户端中有请求者检索信息并显示在 UI 上，但这始终是基于客户端状态的孤立信息。

此限制的原因是，如果有人访问数据，例如您的提案，那么它也为黑客帐户或作弊打开了大门。毕竟，如果您可以提取数据，您就可以操纵它并使您的角色无与伦比。这会破坏微妙的游戏平衡。即使您说“但我从未打算这样做”，它也不会为您打开获取数据的大门。这对开发商来说风险太大了。

现在，如果人类可以，程序可以“玩”游戏，这确实是真的。在游戏世界中，这些被称为机器人。与其他合法玩家相比，该机器人让玩家处于不公平的优势，因为它只是坐着等待，直到它可以移动，而玩家在移动之间可能有一个很大的窗口。由于这个原因，大多数游戏网站都禁止机器人。代替人类玩电脑仍然是作弊。

更新：

既然我已经说过，这里有一个网站可以让你练习做你想做的事情，因为它是专门为从网站获取数据并操纵它而编写的： [hacker.org](http://www.hacker.org)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T19:48:36.273

如果我理解这一点，您想以编程方式控制网络浏览器。据我所知，[SeleniumRC](http://seleniumhq.org/projects/remote-control/)是这方面的首选工具。

[我知道它比它的轻量级伴侣Selenium IDE](http://seleniumhq.org/projects/ide/)强大得多，并且仅凭这一点，您就可以编写与网站交互的脚本，而无需深入了解其实现。例如，您可以根据其文本内容而不是其元素 ID 或文档中的位置来定位和单击按钮。

--

如果您只想嗅探游戏的 HTTP 流量，那么基于浏览器的 HTTP 嗅探器（如 Firefox 的实时 HTTP 标头）即使是 SSL（如果您使用代理并且流量是 SSL，我怀疑游戏服务器会能够检测到它）。

我预测理解 HTTP 流量要比使用 Selenium 直接从 UI 中抓取所需的数据更难。

# video - CCVideoPlayer 无法正常工作

> ID：11351344
> 
> 赞同：1
> 
> 时间：2012-07-05T19:35:49.617
> 
> 标签：video, cocos2d-iphone, ccvideoplayer

我已经将扩展“CCVideoPlayer”“导入”到我的 cocos2d 项目中，我想使用它来在我的游戏开始之前显示视频闪屏（我知道很多人讨厌它，但我不在乎）。但是，网上的教程不多，所以你们几乎是我最后的手段。我已将我的视频 - 1280 x 720 Quicktime 电影 (671 MB) - 正确复制到我的项目中，当我打电话时：

```
 [CCVideoPlayer setDelegate:self];
   [CCVideoPlayer playMovieWithFile:@"Main.mov"]; 
```

我看到黑屏并且电影的声音可以正常播放，但是没有视频。所以我该怎么做 ？

**旁注：**我已经实现了委托方法，并且我的班级遵守`CCVideoPlayerDelegate`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:30:29.650

您也可以通过简单地使用 Objective-C 代码来添加视频闪屏。

第一次导入 MediaPlayer 框架第二个 .h 文件#import

在 .m 文件的任何方法中-

```
{
NSString *path=[[NSBundle mainBundle] 
                    pathForResource:@"videoName" ofType:@"mov"]; //only .mov file can run here

   MPMoviePlayerViewController * player=[[MPMoviePlayerViewController alloc]
            initWithContentURL:[NSURL  fileURLWithPath:path]];

    [ self  presentMoviePlayerViewControllerAnimated: player];
} 
```

# ssas - 两个事实 - 两种不同的谷物

> ID：11351349
> 
> 赞同：0
> 
> 时间：2012-07-05T19:36:05.177
> 
> 标签：ssas

在继承现有多维数据集后，我刚刚回到 SSAS，但我不确定如何处理这种情况：

预算事实：

*   产品
*   顾客
*   时间

促销事实： - 产品 - 客户 - 促销 - 时间

我正在寻找结合预算措施组和促销措施组的措施的报告。本质上，我正在尝试获取 Promotion.Discount Value > .4 的客户和产品列表。

这意味着我必须将 Promotion Dimension 拉入我的数据集中，这就是事情开始变得棘手的地方。

关于客户、产品、促销 ID 和促销的报告。金额为 1565 条记录。关于客户、产品和预算的报告。金额为 31 条记录。关于客户、产品、促销 ID、促销金额和预算金额的报告是 179,878 条记录！

我真正想要实现的目标（从 SQL 的角度来看）是返回促销折扣值 > .4 的客户和产品列表，然后将其链接到客户 ID 和产品 ID 上的另一个数据集以获取预算价值。我花了很多时间阅读有关 Dimension Usage 设施等的信息，但似乎没有任何帮助。有什么建议吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:57:48.213

如果多维数据集已经就位并且构造正确，那么您不必更改 Dimension Usage 中的任何内容。但只是为了确保，当您查看该页面时，您应该看到一个属性名称出现在每个维度与相应度量值组的交集中。根据您的描述，只有 Promotion 和 Budget 的交集应该显示为灰色（空）单元格。

听起来问题是如何编写适当的 MDX 查询。您应该能够使用与此类似的查询生成所需的列表（根据需要更改维度和度量的实际名称）：

```
with
set CustomerProductList as
Filter((Customer.Customer.Customer.Members, Product.Product.Product.Members, Promotion.Promotion.Promotion.Members), 
Val(Promotion.Promotion.CurrentMember.Name) > .4)

select
{Measures.BudgetAmount, Measures.PromotionAmount} on columns,
CustomerProductList on rows
from YourCube 
```

# java - Facebook登录后如何在我的Web应用程序上调用主页

> ID：11351352
> 
> 赞同：1
> 
> 时间：2012-07-05T19:36:10.663
> 
> 标签：java, facebook

我正在使用谷歌应用引擎和谷歌网络工具构建一个网络应用程序。我曾尝试使用 html 实现 Facebook 登录页面。所以我有自己的登录和注册系统，还有 Facebook 登录系统。问题是，一旦一个人通过 Facebook 登录，它只会停留在主登录页面，当我希望它转到主页面时。我必须放一些代码直接到主页，但我不知道在哪里放 html。

```
 <div id="fb-root"></div>
  <script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : 'This is where My App ID was...', // App ID
        channelUrl : '//www.Icannnotshowyou.com/', // Channel File
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
      });

      //put something here?

    });

    };
    // Load the SDK Asynchronously
    (function(d){
       var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
       if (d.getElementById(id)) {return;}
       js = d.createElement('script'); js.id = id; js.async = true;
       js.src = "//connect.facebook.net/en_US/all.js";
       ref.parentNode.insertBefore(js, ref);
     }(document));
  </script>
<div class="fb-login-button">Login with Facebook</div>
</body>
</center> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T10:28:26.343

我认为您必须在创建 facebook 应用程序时设置了回调 url，该应用程序应该将您重定向回该 url，在我的情况下，该 url 是一个对图形对象进行所有处理的 servlet，然后我返回一个字符串作为响应，该字符串已处理通过嵌入在我的 html 头标签中的 js 函数。并进一步使用此字符串，我将调用重定向到其他页面。

# django - django中的自定义清理表单数据

> ID：11351357
> 
> 赞同：2
> 
> 时间：2012-07-05T19:36:29.370
> 
> 标签：django, forms, validation

我知道如何清理 django 的 forms.py 中的数据，但我遇到了一个以前从未遇到过的奇怪错误

我有这是我的forms.py：

```
class BetaPhoneForm(ModelForm):
class Meta:
    model = RegisterHotTable
    fields = ('pracPhone',)

def clean_pracPhone(self):
    pracPhone = self.cleaned_data['pracPhone']

    if pracPhone is None:
        raise forms.ValidationError("This value cannot be empty")
    else:
        if not pracPhone.isdigit():
            raise forms.ValidationError("Please enter a valid phone number.")
    return pracPhone 
```

所以我正在使用自定义清理方法 clean_pracPhone 清理我的领域。当我将值留空并看到“此值不能为空”时，它适用于部分

我希望表单显示错误“请输入有效的电话号码”。当我输入字母而不是数字时，而不是标准的“输入整数”。

事实上，我意识到当我输入字母时这个方法甚至没有运行。

我知道我可以通过创建自定义字符域而不使用 ModelForm 来“破解”这个问题，但我真的不想这样做。

我也尝试了 self.data 而不是 self.cleaned_data 但它没有用。

任何想法如何让这个工作。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T01:16:30.487

根据您的错误消息，我假设在您的模型中`pracPhone`由 a 表示。`models.IntegerField`这意味着在您的 ModelForm 中，该字段由 表示`forms.IntegerField`。

`forms.IntegerField`默认情况下带有一些验证：

*   必需的
*   无效的
*   最小值
*   最大值

您应该覆盖默认消息以进行验证`IntegerField`。

```
class BetaPhoneForm(forms.ModelForm):

    pracPhone = forms.IntegerField(error_messages={
        "required": "This value cannot be empty.",
        "invalid": "Please enter a valid phone number.",
    })

    class Meta:
        model = RegisterHotTable
        fields = ('pracPhone',)

    def clean_procPhone(self):
        pracPhone = self.cleaned_data['pracPhone']
        # your other validations go here.
        return pracPhone 
```

# javascript - 自定义弹出框

> ID：11351359
> 
> 赞同：-2
> 
> 时间：2012-07-05T19:36:32.237
> 
> 标签：javascript, popup

问候地球同胞，

我正在尝试自定义一个弹出框。我不希望它有浏览器垃圾。我想从一个普通的 400 像素 x 400 像素的灰色正方形开始，我可以在其中使用我自己的图形来创建“X”（关闭）按钮。我曾尝试寻找一个网站来帮助我，但没有运气。这是太复杂了还是我忽略了一些东西。如果有人知道如何做到这一点，请帮助我。

健康长寿·繁荣昌盛。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:41:24.673

您正在寻找的是一个模态窗口。 [这](http://www.webgurusdesignblog.com/2009/02/10-best-modal-boxes-for-web-design-projects/)是预构建程序的列表，或者您可以构建自己的程序。在这里查看[如何](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFgQFjAA&url=http://www.queness.com/post/77/simple-jquery-modal-window-tutorial&ei=QO31T_ZC6c7aBfHTmN4G&usg=AFQjCNHAR18UrfryyCOWQMvwoMUvVK8cpQ&sig2=0FX3dqNzFvMWwnbskZV99w)使用 jQuery。

# javascript - Sencha touch：使用 HTTP 状态码而不是 {"success":true}

> ID：11351362
> 
> 赞同：3
> 
> 时间：2012-07-05T19:37:02.550
> 
> 标签：javascript, ruby-on-rails, sencha-touch, extjs

我正在构建一个由 rails 应用程序支持的宁静的 Sencha Touch 应用程序，并且在让它们玩得很好时遇到了一些麻烦。

Sencha 似乎忽略了 HTTP 状态代码，而是依赖于将“成功”属性设置为 true 的响应，以便它认为请求成功。

有没有办法覆盖 sencha 以使用 HTTP 状态代码而不是“成功”属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:26:53.600

你有一些代码作为例子吗？如果你使用一个原始的 Ext.Ajax 请求，你可以给它一个回调函数，无论请求发生什么，它都会被调用。那应该是足够的裸机。[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.Ajax-method-request](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.Ajax-method-request)

不过，让我给你一些建议，尽量不要过多地与 Ext API 抗争。从长远来看，这真的会让你的生活更加困难。

# excel - 在 VBA-Excel 中的可变位置粘贴数据

> ID：11351371
> 
> 赞同：0
> 
> 时间：2012-07-05T19:38:02.097
> 
> 标签：excel, vba

我正在尝试将数据从一个 Excel 工作表复制到另一个工作表，但粘贴目标需要是一个变量。

本质上，我想要做的是打开两个 Excel 表。在第一张纸上，会有一些字符串，我保存的坐标如下：

`sCurrentAddress = Selection.Address(True, True, xlA1, True)`

根据已经填充工作表 2 的数据，算法巧妙地找到所需的粘贴位置并将这些坐标保存如下：

`sDestinationAddress = Selection.Address(True, True, xlA1, True)`

然后我想做的是将第一张表中的信息粘贴到第二张表中，如下所示：

`Selection.Copy (sDestinationAddress)` 但我收到错误 1004：运行时错误：范围类的选择方法失败。

现在，我正在处理的第一个值恰好是 A4，当我将鼠标悬停在“sDestinationAddress”上时，它显示保存在 sDestinationAddress 中的值是 `'[exampleFile.xlsx]Sheet 1'!$A$4`

除非我像这样插入实际值，否则宏会失败：

`'Selection.Copy (Worksheets(1).Range("A4"))`

我需要做什么才能使用我的 sDestinationAddress 作为 Selection.Copy 的参数？

* * *

（很抱歉这么长而且口齿不清，昨天是我第一次看visual basic。）

关于算法：我有 144 个不同的标题来标记下面 6 行中的信息。例如，我将数据从标题为：Inventory_S1_1 的列移动到新的电子表格。这张纸上的“S1_1”意味着另一张纸：S=钻石，1 = 黑色，_1 = 玩家 1。所以我的算法找到了一个尚未处理的标题（假设这里 Inventory_S1_1 是它的第一个标题） t 处理），复制标题下方的列，在新电子表格中找到与玩家 1 的黑钻石相对应的位置，然后粘贴。粘贴算法工作正常，因为模板是手工制作的，但是搜索算法在寻找标题时会丢失，因为它搜索可能混乱的数据。

问题是返回到带有原始数据的工作表。
将鼠标悬停在我调用 set 的位置`sCurrentAddress = Selection`表明，`sCurrentAddress= Inventory_S1_2`一旦我移动到第二个标题，然后在我粘贴之后，`sDestinationAddress = 0`
我很确定这正是有问题的行：

`Set rCurrentRange = .Find(What:=sCurrentAddress, LookIn:=xlValues, LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext)` 我跟着

`Application.Goto rCurrentRange, True ActiveCell.Select Selection.Offset(-1, 1).Select Set sCurrentAddress = Selection`

我正在寻找下一个标题。当我尝试使用精确坐标时，这个 .Find 似乎可以工作，但现在它 .Finds 找到 0 (sDestinationAddress) 的第一个实例，这是复制材料中的第一个值。由于它总是复制 0，然后寻找第一个 0，它永远不会找到下一个标头。

我意识到 Range 对象有一个 .Address 属性，但我不知道在这种情况下它是否有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:18:47.190

您可以直接使用范围而不是使用地址

```
Dim rngSrc as Range, rngDest as range

Set rngSrc = Selection
'do your destination-finding thing
Set rngDest = Selection

rngSrc.Copy rngDest 'no need for parentheses here 
```

**编辑**

您很少需要选择范围来使用它们，并且将实际范围对象存储在变量中几乎总是比尝试使用范围地址更好。

如果您需要保留特定单元格或范围的坐标，则将其存储在范围变量中是最简单的方法。

要记住的一件事是范围对象的默认属性是“值”——这可以解释为什么在单步执行代码时将光标悬停在范围变量上时会看到范围的值——它是显示的值。

`.Copy`如果您只是将单元格值从一个地方复制到另一个地方，那么如果两个范围的尺寸相同，您甚至不需要使用：

```
rngDestination.Value = rngSource.Value 
```

# javascript - 在画布上转换会导致奇怪的行为

> ID：11351372
> 
> 赞同：2
> 
> 时间：2012-07-05T19:38:04.113
> 
> 标签：javascript, html, canvas

我使用了 canvas 元素，下面的代码在没有变换的情况下也能正常工作，但是当我放入变换时，红色框在自身后面画了一个“尾巴”。奇怪的是，尾巴的颜色与盒子的颜色不同，而且它也因浏览器而异（在 FF 中更暗）。这正常吗？我猜是因为四舍五入。

```
function draw() {  
 var canvas = document.getElementById("canvas");
 g = canvas.getContext("2d");

 var x = 0;
 var y = 200;
 g.transform(.5,0,0,1,0,0);
 g.fillStyle = "rgb(200,0,0)";
 timer = setInterval(function() {
     if(x == 750) clearInterval(timer);
     g.clearRect(x,y,50,50);
     x ++;
     g.fillStyle = "rgb(200,0,0)";
     g.fillRect(x,y,50,50);
 }, 10);
} 
```

```
<!DOCTYPE html>
<html>  
 <head>  
  <script type="text/javascript" src="test.js"></script>
 </head>  
 <body onload="draw()">
   <canvas id="canvas" width="800" height="600"></canvas>  
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T01:16:16.027

缩放也适用于`clearRect`。每次调用`setInterval`回调函数时，最后绘制的矩形都被`clearRect`白色完美覆盖，因为 X 值仍然相同，但是当您调用`fillRect`以再次绘制红色矩形时，X 值会增加 1 . 由于您的 X 轴按 0.5（半个像素）缩放，因此在偶数值上它需要另一个像素，但在奇数值上它应该占用“半个像素”，因为这不存在像素的两种颜色（白色和红色）混合以尝试获得平滑效果，因为两种颜色都应该在该像素上，每个像素占一半。我想这在大多数情况下是好的，但在这种情况下，例如它不是。

```
So let x be 2 (forget about the y axis here, kay?)
Have a rect from x to x+50 (transformed coords are 1, 26)
Clear rect from x to x+50 (1, 26)

We end up here with a white rect from 1 to 26, right?

add 1 to x
Have a rect from x to x+50 (1.5, 26.5)

Oops, there's no such pixel 1.5, 1 it is.
Pixel one is filled with white already, nobody ordered me to clear that but I have to fill with red this same pixel.

Solution = blend colors 
```

是的，所以你看到的尾巴是 1 列像素的结果，这些像素充满了红色+白色，不是完全白色到消失，也不是完全红色与矩形的其余部分混合。

一个解决方案是：

```
g.clearRect(x-1,y,50,50); 
```

使用`x-1`您将能够捕捉到这一列像素。

希望我很清楚。

我认为的色调差异可能是由于每个浏览器中混合实现的差异，但我总是注意到不同浏览器的相同颜色的色调存在一些差异，而不仅仅是画布应用程序。

# ruby - Ruby 使用 Rspec 存根 Dir.glob

> ID：11351375
> 
> 赞同：1
> 
> 时间：2012-07-05T19:38:16.390
> 
> 标签：ruby, rspec, stub

我想用 rspec 测试我的类 Episode，它在构造函数中获取一个字符串，该字符串将确定剧集编号，搜索具有相应剧集编号的剧集字幕文件并设置剧集的字幕名称。

我面临的问题是我不想使用真实文件进行测试，也不想创建假文件（已经这样做并且工作正常）。

我相信我需要停止对 Dir.glob 的调用，但到目前为止我很不走运。

有任何想法吗 ？

```
class Episode
  attr_reader :avi_file, :subtitle_name, :number, :name, :directory

  # an episode is instantiated with an avi filename
  def initialize(avi)
    @name = File.basename(avi, ".avi")
    @directory = File.dirname(avi)
    # Looking for an episode number in the form of 
    # s01e01 or 01x01
    match_data = @name.match /(s\d{2,}e\d{2,}|\d{2,}x\d{2,})/i
    @number = match_data.to_s
    find_subtitle_in
    puts self.subtitle_name
  end

  private

  def find_subtitle_in
    srt_files = Dir.glob("#{@directory}/*.srt")
    @subtitle_name = srt_files.find { |e| /#{@number}/i =~ e }
  end

end 
```

* * *

**眼镜**

```
 it "does find a subtitle" do
    episode = Episode.new "Friends s01e01.avi"
    Dir.stub!(:glob){["Friends.s02e01 subtitle french.srt", "Friends.s01e01 subtitle french.srt" ]}
    episode.subtitle_name.should == "Friends.s01e01 subtitle french.srt"
  end 
```

* * *

**rspec 的输出**

1) 剧集确实找到了字幕失败/错误：episode.subtitle_name.should == "Friends.s01e01 subtitle french.srt" 预期："Friends.s01e01 subtitle french.srt" got: nil (using ==) # ./spec /lib/episode_spec.rb:25:in `block (2 levels) in '

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T21:57:59.633

尝试这个：

```
it "does find a subtitle" do
    Dir.stub!(:glob){["Friends.s02e01 subtitle french.srt", "Friends.s01e01 subtitle french.srt" ]}
    episode = Episode.new "Friends s01e01.avi"
    episode.subtitle_name.should == "Friends.s01e01 subtitle french.srt"
end 
```

# python - 在 Django 中处理 M2M 关系

> ID：11351378
> 
> 赞同：1
> 
> 时间：2012-07-05T19:38:31.037
> 
> 标签：python, django, relationship, manytomanyfield

我有一个扩展内置 Django 用户模型的用户模型：

```
class CustomUser(User):
    objects = UserManager()
    tasks = models.ManyToManyField(Task) 
```

我在 shell 中创建了一个用户，使用：

```
user=CustomUser.objects.create_user('fred', 'fred@gmail.com', 'fredpass') 
```

我有另一个任务模型，如您所见，CustomUser 有一个与任务相关的多字段。

如何添加和删除已创建的与我创建的用户相关联的任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:54:48.663

```
P=Project.objects.get(pk=1)
task=p.task_set.get(task_name='Task1')
user1=CustomUser.objects.get(username='john')
user1.tasks.add(task) 
```

这是我的解决方案

# google-maps-api-3 - 在 Google 地图中将站点作为窗口打开

> ID：11351379
> 
> 赞同：1
> 
> 时间：2012-07-05T19:38:34.840
> 
> 标签：google-maps-api-3

我不确定这对于这个特定站点是否是一个有效的问题，但我正在使用 Google Maps API v.3，我想知道一个功能。我不确定这是否可能考虑到谷歌对 HTML 的限制，它将在信息窗口中解释，但我希望能够在信息窗口（或类似的东西）中打开一个新网站. 该应用程序有点复杂，但基础是我试图将来自一个站点的信息（我实际上无法访问）与我在地图中显示的数据集成。作为一个临时修复，我想简单地在地图上的一个窗口中打开辅助网站，让用户正常登录。有谁知道这是否可能？

# python - 在 Python 中模拟修补 from/import 语句

> ID：11351382
> 
> 赞同：40
> 
> 时间：2012-07-05T19:38:42.767
> 
> 标签：python, python-mock

我正在尝试让 mock.patch 处理以下示例代码：

```
from mock import patch
from collections import defaultdict

with patch('collections.defaultdict'):
  d = defaultdict()
  print 'd:', d 
```

这将输出以下内容：

```
d: defaultdict(None, {}) 
```

这意味着 defaultdict 没有被修补。

如果我用直接导入语句替换 from/import 语句，它可以工作：

```
from mock import patch
import collections

with patch('collections.defaultdict'):
 d = collections.defaultdict()
 print 'd:', d 
```

输出是：

```
d: <MagicMock name='defaultdict()' id='139953944084176'> 
```

有没有办法使用 from/import 修补呼叫？

谢谢

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-07-05T19:47:36.460

如果您要修补同一模块中的某些内容，则可以使用`__main__`：

```
from mock import patch
from collections import defaultdict

with patch('__main__.defaultdict'):
    d = defaultdict()
    print 'd:', d 
```

但是，如果您要为导入的模块模拟​​某些内容，则需要使用该模块的名称，以便修补正确的引用（或名称）：

```
# foo.py

from collections import defaultdict

def bar():
    return defaultdict()

# foo_test.py    

from mock import patch
from foo import bar

with patch('foo.defaultdict'):
    print bar() 
```

这里的重点是补丁想要它正在修补的东西的完整路径。在修补当前模块中的某些内容时，这看起来有点奇怪，因为人们不经常使用`__main__`（或者必须参考当前模块，就此而言）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-05T19:47:48.747

`patch`通过修补*名称*来工作。`collections.defaultdict`如果您使用名称`defaultdict`（在本地命名空间中）访问对象，则无法通过修补名称来实现任何目标。[请参阅https://docs.python.org/3/library/unittest.mock.html#where-to-patch](https://docs.python.org/3/library/unittest.mock.html#where-to-patch)上的文档

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-02-12T17:24:45.610

在这种情况下，名称可能会非常混乱。我们总是想在命名空间中模拟一个类定义。命名空间是进行导入的模块。类定义是该命名空间中使用的名称。

让我们举一个具体的例子：

*   myproj.utilities 模块包含 Actor 类
*   myproj.application 将其导入为`from myproj.utilities import Actor`
*   我的测试应该执行 my.proj.application 并模拟我们的 Actor

# myproj.utilities.py

```
class Actor:
    def __init__(name):
        self.name = name 
```

# myproj.application.py

```
from myproj.utilities import Actor

class App:
    def __init__(name):
        self.actor = Actor(name) 
```

# 测试代码

```
from mock import patch
from myproj.application import App

test:
  # format: patch('<namespace>.<Class>')
  # the namespace in which we with to mock
  # the class definition we wish to mock
  with patch('myproj.application.Actor'):
      app = App('Someone')
      print( type(app.actor) ) # expect a MagicMock 
```

我尝试了其他几种方法，这一种对我来说效果很好。我没有测试上面的代码，而是从我自己的具体案例中对其进行了概括。所以，可能有点偏了。

# android - 在 Android 中，有没有办法在 GSM 手机上检索呼叫转移号码？

> ID：11351384
> 
> 赞同：0
> 
> 时间：2012-07-05T19:38:49.893
> 
> 标签：android, gsm, forwarding

由于 GSM 手机有一个单独的呼叫设置屏幕用于呼叫转移（我相信这些设置存储在 SIM 卡上），有没有办法以编程方式检索呼叫转移信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:51:47.043

您可以通过“com.android.internal.telephony.phone”类来做到这一点。您不能直接在 Eclipse 中导入它，您必须使用反射来使用该私有 API。请注意：此 API 在各种手机上的工作方式可能不同，因为它不打算用于非系统应用程序。

我刚刚找到了这个帖子，它可能会给你一个线索。 [http://www.anddev.org/post52643.html?hilit=incoming%20call#p52643](http://www.anddev.org/post52643.html?hilit=incoming%20call#p52643)

# html - 如何使用 CSS 将元素放置在页面顶部？

> ID：11351385
> 
> 赞同：0
> 
> 时间：2012-07-05T19:38:50.240
> 
> 标签：html, css

假设我想在页面顶部放置一段文本，如下所示：

![酒吧](../Images/5b83fa0d7a8e286e87982f3bbb52c2ae.png)

我将如何仅使用 CSS 来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T19:42:32.210

```
//same place when scrolling:
position:fixed;
//just stay at the top
position:absolute;

top: 5px;
left: 5px; 
```

注意：对于绝对，请确保它不在带有`position:relative;`或直接放在 BODY 标签内的元素内

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T19:42:01.237

检查一下，这就是我学习 css 定位的方式。但是我必须说你应该先用谷歌搜索，这是第二个结果，第一个仍然很好：

[http://www.barelyfitz.com/screencast/html-training/css/positioning/](http://www.barelyfitz.com/screencast/html-training/css/positioning/)

```
#div-1a {
    position:absolute;
    top:0;
    left:0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T19:42:57.790

尝试使用它。使用顶部/左侧属性进行调整。

```
<div class="textToTop">
    Text here.
</div>

.textToTop {
    position:absolute;
    top:0px;
    left:0px;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T19:41:39.770

有很多方法可以做到这一点，一种是使用绝对定位：

[http://jsfiddle.net/WHu7h/](http://jsfiddle.net/WHu7h/)

```
<div class="toolbar">element positioned absolutely</div>

.toolbar { position:absolute; top:0; background:#ccc; }​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-05T19:41:42.300

```
position: absolute; top: 0px; left: 0px; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-05T19:42:21.087

```
<ul>
<li><a href=#>Item</a></li>
<li><a href=#>Item</a></li>
<li><a href=#>Item</a></li>
<li><a href=#>Item</a></li>
<li><a href=#>Item</a></li>
<li><a href=#>Item</a></li>
<li><a href=#>Item</a></li>
<li><a href=#>Item</a></li>
<li><a href=#>Item</a></li>
<li><a href=#>Item</a></li>
</ul> 
```

​</p>

和CSS

```
ul li{

 float: left;
 margin-right: 8px;    

}
​ 
```

[例子](http://jsfiddle.net/h3gxu/)

# jboss - LDAP 不适用于 JBoss 5.x，但它适用于 JBoss 4.x

> ID：11351392
> 
> 赞同：1
> 
> 时间：2012-07-05T19:39:15.293
> 
> 标签：jboss, ldap

我们正在尝试在 Jboss 5.1 上运行 LDAP java 程序，但身份验证失败。同样的应用程序可以在 Jboss 4.3 下运行，并通过 JVM 从命令行运行。

基本上，代码中填充了一个 cookie。而且它仅适用于 Jboss 5.1。

他们正在使用 JDK 1.6.0_27。

下面是用于 LDAP 的代码片段。

为什么 PagedResultsResponseControl getCookie 仅适用于 JBoss 5.x？那个部门有什么变化吗？

```
 do { 
            NamingEnumeration results = ctx.search("ou=people,ou=appname,dc=dept,dc=test,dc=com", 
                    "(&(objectclass=user)(CN=*))", new SearchControls()); 
            Control[] controls = ctx.getResponseControls(); 
            if (controls != null) 
            { 
                System.out.println("if (controls != null) controls.length=" + controls.length); 
                for (int i = 0; i < controls.length; i++) 
                { 
                    if (controls[i] instanceof PagedResultsResponseControl) 
                    { 
                        PagedResultsResponseControl prrc = (PagedResultsResponseControl)controls[i]; 
                        cookie = prrc.getCookie(); /// The cookie is returned as null when run on jboss 5.1\. It returns a cookie containg details of next page to be retrieved. 
                                                   // This part of the code works perfectly fine with jboss 4.3 and command line. 
                    } 
                } 
            } 
            else 
            { 
                System.out.println("No controls were sent from the server"); 
            } 
            // Re-activate paged results 
            ctx.setRequestControls(new Control[]{ 
                    new PagedResultsControl(pageSize, cookie, Control.CRITICAL) }); 

            if(cookie==null) 
            { 
                System.out.println("cookie is null"); 
            } 
            else 
            { 
                System.out.println("cookie.length= " + cookie.length + "cookie= " + cookie.toString()); 
            } 

        } while (cookie != null); 
```

# sql - 列名 '*******' 无效

> ID：11351394
> 
> 赞同：1
> 
> 时间：2012-07-05T19:39:25.050
> 
> 标签：sql

此查询的格式确定，调试时我看到更新的值但只显示此消息`{"Invalid column name 'Mohannad' "}`，请帮助我

```
UPDATE Employee 
SET Name =Mohannad 
, Age=22 
, GenderID =1 
, CountryID=1 
, Mobile=8765 
FROM Employee 
    INNER JOIN Country ON Employee.CountryID = Country.CountryID 
    INNER JOIN Gender ON Employee.GenderID = Gender.GenderID 
WHERE EmployeeID=1 ; 

SELECT Employee.EmployeeID, Employee.Name, Employee.Age, Employee.GenderID, Gender.GenderName, Employee.CountryID, Country.CountryName, Employee.Mobile 
FROM Employee 
    INNER JOIN Country ON Employee.CountryID = Country.CountryID 
    INNER JOIN Gender ON Employee.GenderID = Gender.GenderID 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:40:07.530

您需要 Mohannad 周围的报价：

```
SET Name='Mohannad' 
```

如果没有引号，数据库引擎会假定它是列的名称。

如果您在程序中生成此查询，则应使用准备好的语句，而不仅仅是在名称周围加上引号，以避免错误和注入。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T19:41:49.180

尝试使用此代码

```
SET Name='Mohannad' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T19:40:45.997

Monhannad 应该用引号引起来

```
UPDATE Employee 
SET Name = 'Mohannad', Age=22, GenderID =1, CountryID=1, Mobile=8765 
FROM Employee 
    INNER JOIN Country ON Employee.CountryID = Country.CountryID 
    INNER JOIN Gender ON Employee.GenderID = Gender.GenderID 
WHERE EmployeeID=1 ; 
```

# extjs - Sencha Touch 2 导航栏标题

> ID：11351397
> 
> 赞同：1
> 
> 时间：2012-07-05T19:39:41.283
> 
> 标签：extjs, sencha-touch-2

我有一个使用导航视图并具有项目列表的 Sencha touch 2 应用程序。当有人单击一个项目时，我会动态地将导航栏的标题更改为该人单击的项目，并向导航栏添加 3 个按钮。但是，当用户单击某个项目并将屏幕大小调整为较小时，标题的格式不正确。

呈现面板后是否会发生事件，以便我可以调用 refreshTitlePosition()？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T10:15:22.207

sencha中的每个容器都有一个名为resize的事件......希望它有帮助......

# django - 将静态媒体部署到与主环境分开的服务器

> ID：11351399
> 
> 赞同：1
> 
> 时间：2012-07-05T19:39:52.737
> 
> 标签：django, deployment, fabric

我在对结构部署脚本进行一些更改时遇到问题。我们正在从使用容易损坏的 NFS 挂载来托管我们的静态媒体转换为使用单独的 Web 服务器来托管和处理我们所有的静态媒体。

目标是，无论我们部署的环境（测试、产品等）如何，upload_static_content 命令都只会在静态媒体服务器上运行。现在，如果我们运行`fab test upload_static_content`一切都可以完美运行。静态内容最终出现在正确目录中的正确服务器上。但是，如果我们运行`fad test deploy`静态内容，最终会出现在测试网络服务器上，而不是预期的服务器上。

```
def test():
    ...
    env.hosts=testhosts

def prod():
    ...
    env.hosts=prodhosts

def deploy():
    # Do some deployment stuff
    ...
    upload_static_content()
    ...

@hosts([static_server,])
@run_once
def upload_static_content()
    # Upload static content to a different server
    ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:48:38.417

你试过Fabric 1.3 中引入的*执行功能吗？*它应该尊重@hosts 装饰器。

```
def deploy():
    # Do some deployment stuff
    ...
    execute(upload_static_content) 
```

这是文档：

[http://docs.fabfile.org/en/1.4.2/usage/execution.html#intelligently-executing-tasks-with-execute](http://docs.fabfile.org/en/1.4.2/usage/execution.html#intelligently-executing-tasks-with-execute)

# ios - JPEG2000 & UIImage

> ID：11351403
> 
> 赞同：3
> 
> 时间：2012-07-05T19:40:08.183
> 
> 标签：ios, uiimage, jpeg2000

我正在使用 UIImage (UIImageView) 比较 Jpeg2000 和 Jpeg 的显示速度，并注意到显示 Jpeg2000 与 Jpeg 相比相当慢。

这是预期的吗？有没有办法加快速度？

谢谢，-r

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T20:42:25.200

不，您对此无能为力（当然，除了不使用 JPEG 2000）。JPEG 2000 需要比普通 JPEG 文件更多的 CPU 能力来编码和解码。所以即使包括第三方解码器也可能不会带来巨大的改进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-03T17:03:28.730

您可以从 JPEG 2000 数据创建 UIImage。解码过程将比解码 JPEG 慢，但一旦解码，在 UIImageView 中显示它应该与任何其他格式一样快。如果您有大量 JPEG 2000 图像，您可能希望将解码后的图像缓存在 NSCache 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-26T13:01:03.413

这里提到的一切都有些真实。然而，JPEG2000 的一些实现在整个编码/解码过程中比标准 JPEG 编码器/解码器更快。他们通过过多的多线程和 NEON 加速来实现这一点。

查看[http://kakadusoftware.com/](http://kakadusoftware.com/)和[https://groups.yahoo.com/neo/groups/kakadu_jpeg2000/conversations/messages](https://groups.yahoo.com/neo/groups/kakadu_jpeg2000/conversations/messages) 了解更多详情。图书馆是商业的。有商业版本和个人/非商业版本。有相当多的努力来为 iOS 实现它。顺便说一句：Apple 仅通过此 API 为 Quicktime 和 Mac 提供 JPEG2000 支持。在一定程度上也是iOS。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-28T12:58:59.920

您可以将接收到的图像数据转换为 .jpg 格式，然后使用这种数据。

```
import Foundation
import UIKit
import SDWebImageWebPCoder

extension Data {
    var jpegData: Data? {
    var image: UIImage?
    image = UIImage(data: self) ?? SDImageWebPCoder.shared.decodedImage(with: self, options: nil)
    return image?.jpegData(compressionQuality: 1.0)
   }
} 
```

如果您对 WepP 图像的使用不感兴趣，则不能使用 SDImageWepPCoder。使用示例：

```
func loadImage(_ url: URL) {
    DispatchQueue.global(qos: .background).async { [weak self] in
        guard let data = try? Data(contentsOf: url) else {return}
        if let jpegData = data.jpegData {
            DispatchQueue.main.async {
                let displayingImage = UIImage(data: jpegData)
                yourImageView.image = displayingImage
            }
        }
    }
} 
```

这个决定可以让你在后台线程中将你的 jp2 数据转换为 JPEG，然后像往常一样使用它（具有高速渲染并且没有 UI 冻结）

# database - 对引用相同主键的两个外键进行数据建模

> ID：11351406
> 
> 赞同：0
> 
> 时间：2012-07-05T19:40:33.093
> 
> 标签：database, data-modeling

如果我在一个表中有两个外键引用另一个表中的相同主键，这是什么类型的关系？一对多？还是一对一？

例如：

表作者有主键 AUTHOR_ID

Table Book 有两个外键 PRIMARY_AUTHOR_ID 和 SECONDARY_AUTHOR_ID 都引用 AUTHOR_ID

这是什么类型的关系？

*我知道作者书籍示例可以以更好的方式处理，我只是以这些字段为例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T23:25:30.063

看起来您在图书与其作者之间建立了 1..[1-2] 关系。换句话说，您在 Book 和主要作者之间有 1..1 关系，并且您在 Book 和次要作者之间实际上有 1..[0-1] 关系。有人可能会争辩说，因此一本书与其作者之间存在 1..[1-2] 关系。

这只考虑方程的一个方向，因为显然一个作者也可以有多本书，所以真正的关系更像是 N..[1-2] Books（复数）和 Author(s) 之间的关系，具体取决于符号和一种使用的方法。

我意识到您刚刚设计了一个示例，以便您可以提出问题。关于这个结构的使用，我主张你应该考虑一个更一般的 N..M 关系结构（书籍与其作者之间）。从设计的角度来看，你不想做的一件事做是将过多的业务逻辑硬编码到您的结构表示中。最初的业务规则通常建议您有一个有限的（1..1 或 1..N）关系，然后是业务需求（微妙地或可能不是这样）巧妙地）改变，现在你需要能够对 N..M 建模。这意味着模式改变，这当然是可能的，但在某些情况下可以预见是可以避免的，你可以选择不那么脆弱。（这是另一种说法是过早优化是万恶之源。）

您可能已经知道这一点，尽管可能是为了其他人的利益，要到达 N..M，您需要从 BOOKS 表中删除两个外键，并引入第三个表：BOOKS_AUTHORS，它具有表的外键BOOKS (BOOK_ID) 和另一个给 AUTHORS (AUTHOR_ID)。您还可以添加一列来指定作者顺序，对作者进行排序，主要、次要、三级等...

（注意：我倾向于使用复数命名表，例如 BOOKS，因为表是一个集合，而 Book 是作为 BOOKS 表成员的一行。当然，从 OOP 中，您倾向于使用单数，例如 BOOK，Book 是 BOOK 类的一个实例——主要是术语。）

# ruby - 为什么不需要添加所有名称？

> ID：11351408
> 
> 赞同：0
> 
> 时间：2012-07-05T19:40:35.560
> 
> 标签：ruby

我有一个文件，`my_helper.rb`看起来像这样：

```
require 'cgi'
require 'enumerator'

module MyHelper
  # ...
end

class MyUpstreamError < StandardError
  # ...
end 
```

当我`require 'my_helper'`在别处时，`MyHelper`变得可见，但`MyUpstreamError`不可见。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:07:48.027

原来是文件名冲突。在我的 Rails 设置的目录中还有一个名为 的文件`my_helper.rb`，我从未编辑过它。`helpers`它正在隐藏这个文件，该文件位于`lib`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:57:39.103

Ruby 的 require 类似于包含在 C 中。

你可能想读一读： [http:](http://rubylearning.com/satishtalim/including_other_files_in_ruby.html) //rubylearning.com/satishtalim/including_other_files_in_ruby.html http://ionrails.com/2009/09/19/ruby_require-vs-load-vs-include-vs-extend/

# javascript - 从 ajax 调用构建 html 到 jquery UI 可排序列表

> ID：11351410
> 
> 赞同：0
> 
> 时间：2012-07-05T19:40:54.343
> 
> 标签：javascript, jquery, jquery-ui, html-lists

我在 HTML/JavaScript 中遇到了设计问题。

我将可排序的 jquery UI 添加到我的 Web 应用程序中：这是关于可排序的演示（现在无法显示我的应用程序）：http: [//jqueryui.com/demos/sortable/default.html](http://jqueryui.com/demos/sortable/default.html)

现在我用来自 ajax 调用的数据填充 JavaScript 中的拖放列表。该列表一直由用户更改。

我尝试做这样的事情：

```
Var htmlData = '<div id=wrapper>'
             +'<div>'
             +data.title
             +'</div>'
             +'<div>'
             +data.description
             +'</div>';

${"#sortable-list"}.html(htmlData); 
```

等等。一些 div 还具有在变量中设置的属性，例如`'id="' + data.id + '"'` 我然后尝试将此字符串 htmldata 放入可排序列表中。但它很快就变得混乱了。我试图适应`<tables>`它，并`<p>`加入`<span>`s。但仍然很难得到我想要的设计。

由于缺乏声誉，无法发布图片，但这是我想要的设计（这只是其中`<li>`的一个`<ul>`）：

[http://img546.imageshack.us/img546/9179/48361880.gif http://img546.imageshack.us/img546/9179/48361880.gif](http://img546.imageshack.us/img546/9179/48361880.gif)

那么你会怎么做呢？我一直在阅读有关 mustache 之类的模板，但它似乎对我没有帮助。而且我用字符串构建表格的方式不是最好的方式。

非常感谢任何有关如何执行此操作的示例或信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:33:50.440

你可以做这样的事情。

```
var items[]

items.push($('<div />', { html: data.title }));
items.push($('<div />', { html: data.description}));

$("#sortable-list").html($('<div />', {
     'id' : 'wrapper',
     'class' : 'yourclass',
     html: items.join('')
  })
); 
```

您可以在循环中`items.push`使用来循环所有数据并将项目推送到数组中。稍后将数组项加入到html中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:37:05.480

客户端诱惑有很多优点，但主要的优点是您不必在 JavaScript 中将 HTML 串在一起。这样做不仅容易出错，而且很快就会成为维护的噩梦。

例如，您可以使用 Underscore.js 来满足您的需求。

如您所见，HTML 布局清晰，并且可以随着您的需求变化而轻松更改。

```
<script type="text/template" id="sortable-entry">
    <% _.each(items, function(item) { %>
        <div>Title: <%= item.title %></div>
        <div>Description: <%= item.description %></div>
        <hr />
    <% }); %>
</script>

<ul id="sortable-list"></ul>​

<script>
    var data = {
        items: [
        { title: 'title1', description: 'description1' },
        { title: 'title2', description: 'description2' },
        { title: 'title3', description: 'description3' },
        { title: 'title4', description: 'description4' },
        { title: 'title5', description: 'description5' }
        ]
    };

    var event_html = _.template($('#sortable-entry').html());
    $(event_html(data)).appendTo($('#sortable-list'));
</script> 
```

这是一个活生生的例子 - [http://jsfiddle.net/tj_vantoll/kmXUr/](http://jsfiddle.net/tj_vantoll/kmXUr/)。

# javascript - jQuery - setInterval 问题

> ID：11351411
> 
> 赞同：1
> 
> 时间：2012-07-05T19:40:59.223
> 
> 标签：javascript, jquery

我正在使用 jQuery 生成随机数量的云并将其添加到页面的标题中，并在指定的时间间隔内将它们向左移动。一切正常，除了间隔只为每个云运行一次，而不是再次运行。这是我的代码：

```
if(enableClouds) {
    var cloudCount = Math.floor(Math.random() * 11); // Random Number between 1 & 10

    for(cnt = 0; cnt < cloudCount; cnt++) {
        var cloudNumber = Math.floor(Math.random() * 4);
        var headerHeight = $('header').height() / 2;
        var cloudLeft = Math.floor(Math.random() * docWidth);
        var cloudTop = 0;
        var thisHeight = 0;
        var cloudType = "one";

        if(cloudNumber == 2) {
            cloudType = "two";
        }else if(cloudNumber == 3) {
            cloudType = "three";
        }

        $('header').append('<div id="cloud' + cnt + '" class="cloud ' + cloudType + '"></div>');

        thisHeight = $('#cloud' + cnt).height();
        headerHeight -= thisHeight;
        cloudTop = Math.floor(Math.random() * headerHeight);

        $('#cloud' + cnt).css({
            'left' : cloudLeft,
            'top' : cloudTop
        });

        setInterval(moveCloud(cnt), 100);
    }

    function moveCloud(cloud) {
        var thisLeft = $('#cloud' + cloud).css('left');

        alert(thisLeft);
    }
} 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:56:43.677

工程师给了你你需要的代码。这是正在发生的事情。

该`setInterval`函数接受一个 Function 对象和一个区间。Function 对象只是一个可以调用的对象，如下所示：

```
/* Create it */
var func = function() { /* ... blah ... */};

/* Call it */
var returnVal =  func(parameters) 
```

这里的对象是`func`。如果你调用它，你得到的是返回值。

因此，在您的代码中：

```
setInterval(moveCloud(cnt), 100); 
```

您正在提供`setInterval`调用的返回值`moveCloud(cnt)`，而不是函数对象`moveCloud`。所以那一点被打破了。

一个不正确的实现是：

```
for(cnt = 0; cnt < cloudCount; cnt++) {
    /* ... other stuff ... */
    var interval = setInterval(function() {
       moveCloud(cnt);
    }, 100);
} 
```

现在，您正在为它提供一个函数对象，这是正确的。当这个函数对象被调用时，它会调用`moveCloud`. 这里的问题是`cnt`.

你在这里创建的是一个闭包。您捕获对变量的引用`cnt`。当您传递给的函数对象`setInterval`被调用时，它会看到对的引用`cnt`并尝试解析它。当它这样做时，它会到达您迭代的变量，查看它的值并发现它等于`cloudCount`。问题是，没有映射到您创建的云（您有云 0 到 (cloudCount -1)），所以充其量不会发生任何事情，最坏的情况是您会收到错误消息。

正确的做法是：

```
 setInterval((function(i){
      return function(){
         moveCloud(i);
      };
 })(cnt), 100); 
```

这使用返回函数的“立即函数”。您创建一个函数：

```
function(i){
    return function(){
        moveCloud(i);
    };
} 
```

它返回另一个函数（让我们称之为它`outer`），当使用 value`i`调用`moveCloud`时，使用该值调用。然后，我们*立即*`outer`用我们的 value调用`cnt`。这给了我们一个函数，当被调用时，它会`moveCloud`使用**此时****的任何值来`cnt`**调用。这正是我们想要的！

这就是我们这样做的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T19:45:11.830

这是要走的路：

```
 setInterval((function(i){
      return function(){
         moveCloud(i);
      };
 })(cnt), 100); 
```

# .net - OpenXML 每行的文件越大越慢？

> ID：11351421
> 
> 赞同：3
> 
> 时间：2012-07-05T19:41:38.517
> 
> 标签：.net, vb.net, openxml, openxml-sdk

我正在 VB.NET 中构建一个应用程序来从 Excel 文件中读取行并将它们填充到`DataTable`.

```
dtRow = dataTable.NewRow()
Dim startTime As DateTime = DateTime.Now

dtRow("name") = suppliers.CellValue("A", rowCount)
/* SNIP - just more string retrieval */
dtRow("statistics") = suppliers.CellValue("P", rowCount)

dataTable.Rows.Add(dtRow)

Dim endTime As DateTime = DateTime.Now

Debug.Print(String.Format("Time elapsed to retrieve '{0}': {1} ms", rowCount, (endTime - startTime).ToString("fffffff"))) 
```

`CellValue`是我自己的创作——但它是一个小功能，我已经测量了它的运行时间。它相当快。

但是，当我打开一个 10,000 行的 Excel 文件（填充相同的数据）时，处理时间会慢得多。

**3,000 行**：

```
Time elapsed to retrieve '2': 0510051 ms
Time elapsed to retrieve '3': 0500050 ms
Time elapsed to retrieve '4': 0340034 ms
Time elapsed to retrieve '5': 0350035 ms
Time elapsed to retrieve '6': 0340034 ms
Time elapsed to retrieve '7': 0340034 ms
Time elapsed to retrieve '8': 0350035 ms 
```

**6,000 行**：

```
Time elapsed to retrieve '2': 0710071 ms
Time elapsed to retrieve '3': 0760076 ms
Time elapsed to retrieve '4': 0620062 ms
Time elapsed to retrieve '5': 0670067 ms
Time elapsed to retrieve '6': 0750075 ms
Time elapsed to retrieve '7': 0750075 ms
Time elapsed to retrieve '8': 0700070 ms 
```

**10,000 行**：

```
Time elapsed to retrieve '2': 0920092 ms
Time elapsed to retrieve '3': 0920092 ms
Time elapsed to retrieve '4': 1790179 ms
Time elapsed to retrieve '5': 1810181 ms
Time elapsed to retrieve '6': 1930193 ms
Time elapsed to retrieve '7': 2240224 ms
Time elapsed to retrieve '8': 1820182 ms 
```

![在此处输入图像描述](../Images/9d8f5e828721210af1c2dcd7142b4944.png)

为什么会出现这种情况？我可以修复它吗？

编辑：`suppliers`是我创建的用于处理 Excel 文件的类，具有以下构造函数：

```
Public Sub New(ByVal doc As SpreadsheetDocument, ByVal sheetName As String)
    pWorkbookPart = doc.WorkbookPart

    Dim sheet As Sheet = pWorkbookPart.Workbook.Descendants(Of Sheet).Where(Function(s) s.Name = sheetName).FirstOrDefault()

    pWorksheetPart = CType(pWorkbookPart.GetPartById(sheet.Id), WorksheetPart)

    pSharedStringTable = pWorkbookPart.GetPartsOfType(Of SharedStringTablePart).FirstOrDefault()
End Sub 
```

`CellValue`：

```
Public Function CellValue(ByVal column As String, ByVal row As Integer) As String
    Dim cellAddress As String = column & row
    Dim cell As Cell = pWorksheetPart.Worksheet.Descendants(Of Cell).Where(Function(c) c.CellReference = cellAddress).FirstOrDefault()

    Dim index As Integer
    Dim returnValue As String

    If cell IsNot Nothing Then
        If cell.DataType IsNot Nothing Then
            index = Integer.Parse(cell.InnerText)
            returnValue = pSharedStringTable.SharedStringTable.ElementAt(index).InnerText
        Else
            returnValue = CStr(cell.InnerText)
        End If
    End If

    Return returnValue
End Function 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T20:03:37.650

一个可能的问题是，如果您的字符串表变得非常大，那么`ElementAt`对于遍历`SharedStringTable`. 由于此表相对于您的处理是静态的，因此我建议删除该部分并使用`List<string>`or 数组存储它：

```
' Use this instead of pSharedStringTable
' Dim sharedStringTable As New List(Of String)

' Initialize your string table
sharedStringTable.AddRange( _
    From xml In pSharedStringTable.SharedStringTable _
    Select xml.InnerText)

' Now you can use sharedStringTable.ElementAt(index) and enjoy optimization
' Or you can use sharedStringTable(index) 
```

另一个可能的问题是通过引用对单元格进行恒定线性搜索。相反，您应该将其转换为字典：

```
' Dim cells As New Dictionary(Of String, Of Cell)
For Each cell In pWorksheetPart.Worksheet.Descendants(Of Cell)
    cells.Add(cell.CellReference.InnerText, cell)
Next cell
' Only one round-trip to Excel for cells using this method 
```

在每种情况下，您都会用记忆换取时间，在这两种情况下，我都认为这符合您的最佳利益：

```
' Revised lookup using data structures optimized for common access
If cells.TryGetValue(cellAddress, cell) Then
    If cell.DataType IsNot Nothing Then
        index = Integer.Parse(cell.InnerText)
        returnValue = sharedStringTable(index)
    Else
        returnValue = CStr(cell.InnerText)
    End If
End If 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T20:05:39.210

这条线看起来很可疑：

```
Dim cell As Cell = pWorksheetPart.Worksheet.Descendants(Of Cell).Where(Function(c) c.CellReference = cellAddress).FirstOrDefault() 
```

如果 .Where() 条件针对电子表格中的每个单元格执行。随着行数的增加，单元地址比较的数量增加（行 x 列）。即使单元格引用比较操作非常简单，它加起来也很快。

如果显示的 OpenXML 或 Workbook 类不提供方便的 x,y 单元格寻址，您可能必须创建自己的索引。遍历所有单元格以将它们添加到您自己的列列表中，然后您可以通过 x,y 放弃索引。x = 列列表中列列表的索引，y = 列列表中的索引以获取单元格。

# html - load() 在 jquery 中包含 ckeditor 的页面

> ID：11351428
> 
> 赞同：1
> 
> 时间：2012-07-05T19:41:53.947
> 
> 标签：html, jquery

我在加载（）包含ckeditor的页面时遇到问题。问题是当我加载我的页面时，加载后页面不再包含ckeditor。我的代码在这里：

我在加载（）包含ckeditor的页面时遇到问题。问题是当我加载我的页面时，加载后页面不再包含ckeditor。我的代码在这里：

```
 $("#editpost").click(function(){
            $("#postbodycenter").load("editepost.php");
        });

<?php
include 'php/auth.inc';
include 'manage.php';
if(!empty($_POST["title"]) && !empty($_POST["txfpost"]))
{
    connect();
    if(isset($_POST["select_page_name"]))
    {

        $p_name = mysql_real_escape_string($_POST['select_page_name']);
        $query = 'SELECT `id` FROM `pages` WHERE `page_name` ='.'"$p_id"'.'';
        $get_p_id = mysql_query($query) or die(mysql_error());  
        while ($result = mysql_fetch_array($get_p_id))
        {
            $p_id = $result[id];
            $query ="insert into post (page_id,header,category,date,author,body,more) values
                 ($p_id,'$_POST[title]','$_POST[txfcat]','$_POST[date]','admin','$_POST[txfpost]','$_POST[txfmore]')";
            mysql_query($query) or die(mysql_error());

        }   
    }

}
?>
     <!DOCTYPE  html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf8">
<title>new post</title>

<link rel="stylesheet" href="cssadmin.css" type="text/css" />
<script type="text/javascript"  src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="ckeditor/ckeditor.js"></script>
<script type="text/javascript">
    $(document).ready(function(){

    $("#btnsub").click(function(){
        var cat = $("#txfcat").val();
        var title = $("#title").val(); 
        var editor1 = $("#editor1").val();
        var editor2 = $("#editor").val();
        if(!(cat == "" || title == "" || editor1 =="" || editor2 == "")){
            alert("Fill all fields!");
        }else{
            $('#form1').submit();
            alert("done");
        }

    });
});
</script>
</head>
<body id ="body">
<center>
                  <form id="form1" name="form1" method="post" action="newpost.php">
                        <table id = "tb_post">
                            <tbody>
                                <tr>
                                    <td>cat</td>
                                    <td><input type="text" name="txfcat" id="txfcat" size="130" /></td>
                                </tr>
                                <tr>
                                    <td>title:</td>
                                    <td><input type="text" name="title" id="title" size="130" /></td>
                                </tr>
                                <tr>
                                    <td>refers to :</td>
                                    <td>
                                        <select name="select_page_name">
                                            <option>select the page</option>
                                            <option value="home">home</option>
                                            <?php pages();?>                                        
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td><input type = "hidden" name = "date" value="<?php echo date("H:i:s d-m-Y")?> "/></td>
                                    <td><textarea class="ckeditor" cols="95" id="editor1" name="txfpost" rows="10"></textarea>
                                    </td>                   
                                </tr>
                                <tr>
                                    <td>more</td>
                                        <td><textarea   class="ckeditor" cols="95" id="editor" name="txfmore" rows="10"></textarea>
                                    </td>
                                </tr>                   
                                <tr>
                                        <td></td>   
                                    <td> <button type="submit" name="btnsub" id="btnsub" value="update">send</button> </td>                 
                                </tr>
                            </tbody>
                        </table>
                </form>
</center>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:04:36.093

您的页面不包含加载 CKEditor 的脚本。

只需将以下代码添加到`<script>`页面中的一个标签中：

```
$(document).ready(function(){
    CKEDITOR.replace('editor1');
} 
```

# macos - 全屏应用不断切换位置

> ID：11351430
> 
> 赞同：62
> 
> 时间：2012-07-05T19:42:02.593
> 
> 标签：macos, osx-lion

我在 osx 中发生了一个非常烦人的副作用，我似乎无法找到解决方法：由于某种原因，全屏应用程序不断切换位置。例如，如果我以全屏方式打开 Safari、Mail 和 Xcode，完全按照这个顺序，它们每隔一段时间就会交换位置（例如，Xcode 有时会向左移动，所以向左滑动会带我到Safari 而不是邮件）。这些应用程序的顺序对于生产力目的很重要，当您打开其中的 6 个并且突然邮件从位置 6 转到位置 2 时，它会变得非常混乱。

任何想法如何让这种地点转换停止？

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-07-07T22:03:00.473

转到“系统偏好设置”>“任务控制”并确保**未**勾选“根据最近使用自动重新排列空间”。

# email - GMX 的“文本模式分析器”阻止英文交易电子邮件

> ID：11351432
> 
> 赞同：6
> 
> 时间：2012-07-05T19:42:05.087
> 
> 标签：email, spam, email-spam, transactional-email

我的网络应用程序正在向其用户发送交易电子邮件（例如“您收到了付款”、“请激活您的帐户”、“您的文章已售出”）。GMX 用户定期报告说，由于“文本模式分析器”，这些电子邮件被标记为垃圾邮件。我可以用我自己的帐户重现该问题，但只有英文电子邮件受到影响，来自我的 Web 应用程序的德文电子邮件传送没有问题。

所以我很确定内容一定是问题所在（因为“文本模式分析器”已经说过:)），但我不知道如何解决它。有什么我可以做的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T03:29:34.450

阅读此问题后，我联系了 GMX 支持。我要求以下两件事之一：

1.  指向我可以推荐的发件人的一些提示/技巧的链接
2.  一种帮助根据他们的文本模式分析器测试电子邮件的工具

他们回应说他们无能为力，因为这些信息是专有的。如果我是你，我会向你的用户推荐他们从 GMX 迁移出去。

**GMX 响应：**

> 尊敬的 GMX 客户，
> 
> 对于我们的延迟回复，我们深表歉意。我们感谢您的询问，并希望您能满意地回答。
> 
> 不幸的是，我们不能这样做。垃圾邮件过滤器不仅本质上是第三方专有的，而且我们不允许披露任何与此相关的信息。我们道歉。
> 
> 如果您有任何进一步的问题或意见，请不要犹豫再次与我们联系。
> 
> 亲切的问候，
> 
> 您的 GMX 支持团队。

# ruby-on-rails - 太阳黑子和高级关联搜索

> ID：11351435
> 
> 赞同：1
> 
> 时间：2012-07-05T19:42:13.290
> 
> 标签：ruby-on-rails, ruby, search, solr, sunspot

我的应用程序拥有`Machines`并属于许多`Specifications`

```
class Machine < ActiveRecord::Base
  has_and_belongs_to_many :specs 
```

规格具有`field`（宽度、重量、容量、马力）和`value`属性。

搜索完全通过 Solr 通过 Sunspot 完成。

我希望能够根据其规格找到一台机器，例如找到宽度大于 50 的所有机器。

我知道我可以单独索引`spec_field`和`spec_value`，但它会过滤值超过 50 的规格，其中可能包括我不想要的字段，例如高度或容量（因此搜索宽度 > 50 将在结果中产生容量 > 50） .

理想情况下，我想将机器的每个规格及其值分配给它自己的索引字段，以便我的索引具有诸如“高度”或“重量”之类的字段，但规格是灵活的，有些机器有一个一套规格，而另一台机器有一套不同的规格，所以看起来它不能正常工作。

甚至可以用 Solr 完成吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T14:00:44.770

**找到解决方案**

[我找到的解决方案是使用此处](http://outoftime.github.com/)描述的“动态字段”

索引

```
dynamic_integer :specs do
  specs.inject({}) do |hash,spec|
    hash.merge(spec.spec_field.label.to_sym => spec.value)
  end
end 
```

询问

```
 dynamic :specs do
    if params[:specs].present?
      for spec in params[:specs]
        case spec[:condition]
          when "gt"
            with(spec[:field]).greater_than(spec[:value])
          when "lt"
            with(spec[:field]).less_than(spec[:value])
          else
            with(spec[:field],spec[:value])
        end
      end
    end
  end 
```

SOLR 在我看来越来越好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:53:23.240

您可以构造一个方法，为您指定的数字范围和字符串值返回 TRUE，然后索引该布尔值。

```
def width_greater_than_50
  (field == "width") && (value > 50)
end 
```

然后，您会将符号`:width_greater_than_50`作为您要索引的内容传递。

# git - 使用 Git 扩展的工作目录差异

> ID：11351440
> 
> 赞同：15
> 
> 时间：2012-07-05T19:42:32.640
> 
> 标签：git, git-extensions

[有没有一种简单的方法可以使用Git 扩展](http://code.google.com/p/gitextensions/)UI（除了提交对话框）来获取工作目录的差异？

感觉 View Diff 应该允许我在工作目录和提交版本之间进行区分。然而，它似乎只想向我展示我的提交历史。

我是一个正在恢复的[Tortoise Git](http://code.google.com/p/tortoisegit/)用户，我习惯于在我的提交日志 UI 中有一个“工作目录”pseduo-commit。Git Extensions 中是否有与此类似的东西？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-08T10:21:58.650

GitExtensions 有一个设置来启用你提到的“伪提交”。只需转到设置，打开选项卡 Git Extensions 并选中“显示修订图中的当前更改”选项。

默认情况下禁用此选项。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-09-28T14:55:42.133

Henk 的回答非常适合旧版本的 GitExtensions。但是，我使用的是 2.51 版本，步骤不同。以下是我采取的步骤：

*   在顶部功能区上，转到工具 --> 设置

[![在此处输入图像描述](../Images/5aba5bdf05c00d4588f144258192810c.png)](https://i.stack.imgur.com/Kk456.jpg)

*   找到“Git 扩展”列表项并选中“显示当前工作目录更改人工提交”复选框

[![在此处输入图像描述](../Images/d4f2b71ee0de9c2e7e0cf2ae961e92c7.png)](https://i.stack.imgur.com/0nr9M.jpg)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-12-24T10:30:29.003

在最新版本（我有 3.3.0 版）中，此选项已从设置移至`View -> Show artificial commits`菜单。

`Working directory`在提交图中选择伪提交时，您将看到本地更改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-03T04:55:46.800

在版本 3.00.00.4433 中，可以在此处找到设置：

`Tools->Settings->Git Extensions->General`

`Show current working directory changes as an artificial commit`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-10T16:26:58.440

我看不到你们中的一些人在这里提到的选项，但对我有用的是以下选项。

右键单击任何提交，然后选择**查看 > 显示人工提交**并确保禁用它。

[![在此处输入图像描述](../Images/579e39714bbe5aa517511f26c2329160.png)](https://i.stack.imgur.com/nnNbF.png)

# php - svg 按需图像

> ID：11351441
> 
> 赞同：5
> 
> 时间：2012-07-05T19:42:38.543
> 
> 标签：php, node.js, svg, d3.js, jquery-svg

我有 javascript 代码，当有人登陆其中一个页面时，它会动态生成 svg 图像标签。我使用[d3 库](http://mbostock.github.com/d3/ex/bubble.html)来帮助制作图像。唯一的问题是 d3 不完全兼容 IE，我想根据 svg 文件生成 .png、jpg、gif 或任何其他图像文件。有没有已知的方法可以做到这一点？服务器端代码是基于 PHP 的，我们使用 node.js 和 render.js 来处理很多动态内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T19:53:04.897

我正在使用 ImageMagick 将 SVG 图像转换为 PNG 图像。这工作得很好。

如何执行此操作的快速示例：

```
exec('/usr/bin/convert /path/to/image.svg /path/to/output_image.png'); 
```

我使用它非常成功地处理了用[libqrencode](https://github.com/fukuchi/libqrencode)制作的不同尺寸和颜色的二维码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T06:11:45.850

首先，您需要在服务器端使用 DOM 实现，因为您想获得在客户端呈现的 svg。为此，我们将 jsdom 与 node.js 一起使用。使用它，您可以在服务器端渲染 D3 并在服务器上获取 svg，然后将其转换为您喜欢的任何格式。

这是有关如何操作的[链接。](http://eng.wealthfront.com/2011/12/converting-dynamic-svg-to-png-with.html)

一旦你获得了 SVG 和 PNG，然后使用[modernizer.js](http://modernizr.com/)

1) 使用 Modernizr 检查浏览器的兼容性。

2）然后根据兼容性加载SVG或PNG。

示例（JS解决方案）：

```
if (!Modernizr.svg) {
$("#logo").css("background-image", "url(fallback.png)");
} 
```

示例（CSS 解决方案）：

```
.no-svg #logo { background-image: url(fallback.png); } 
```

# jquery - 知道为什么 .addClass 不适用吗？jQuery

> ID：11351442
> 
> 赞同：1
> 
> 时间：2012-07-05T19:42:40.727
> 
> 标签：jquery, addclass

```
(function (){

var stones = parseInt($('body').attr('data-site')) + 1,
    theul = $(".submenu > ul li:nth-child(" + stones + ")");

    console.log(theul);
    $('theul').addClass('active');
    console.log(theul);
})(); 
```

日志在添加类之前和之后显示完全相同的内容。

![在此处输入图像描述](../Images/034441787c119bde544ef3767f6443a1.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T19:44:45.137

您的选择器错误，应该是：

```
theul.addClass('active'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T19:44:33.727

简单地做

```
var stones = parseInt($('body').attr('data-site')) + 1,
    theul = $(".submenu > ul li:nth-child(" + stones + ")");

    console.log(theul);
    theul.addClass('active');
    console.log(theul);
})(); 
```

因为 `$('theul').addClass('active');`会将类添加`active`到 ipotetical 标签的元素中`theul`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T19:45:20.710

它应该是 theul.addClass('active');

# lisp - 如何从 Lisp 类中导出插槽和访问器？

> ID：11351443
> 
> 赞同：4
> 
> 时间：2012-07-05T19:42:41.707
> 
> 标签：lisp, common-lisp, sbcl, clos

这是我班的包：

```
(in-package :cl-user)
(defpackage foo
  (:use :cl)
  (:export :bar))
(in-package :foo)

(defclass bar ()
  (baz)) 
```

我可以创建一个`bar`in package的实例`cl-user`。

```
CL-USER> (defvar f)
F
CL-USER> (setf f (make-instance 'foo:bar))
#<FOO:BAR {10044340C3}> 
```

但我无法访问该成员`baz`。这么叫`slot-value`……

```
CL-USER> (slot-value f 'baz) 
```

...导致此错误消息：

```
When attempting to read the slot's value (slot-value), the slot
BAZ is missing from the object #<FOO:BAR {10044340C3}>.
   [Condition of type SIMPLE-ERROR] 
```

我已经尝试添加`baz`到`:export`列表中，但这也不起作用。

如何从包中导出插槽和访问器？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-05T19:56:36.530

您不能*导出*插槽和访问器。

在 Common Lisp 中，您可以导出符号。

因此，导出`BAZ`命名插槽的符号。

然后在包装中`CL-USER`：

```
(slot-value some-instance 'foo:baz) 
```

未导出你必须写：

```
(slot-value some-instance 'foo::baz) 
```

如果将符号导入包中`CL-USER`：

```
(slot-value some-instance 'baz) 
```

# jquery - 编写需要其他插件的 jQuery 插件

> ID：11351445
> 
> 赞同：1
> 
> 时间：2012-07-05T19:42:56.743
> 
> 标签：jquery, jquery-plugins

我目前正在编写一个 jQuery 插件，它需要另一个插件才能工作（特别是[Ben Alman 的 doTimeout](https://github.com/cowboy/jquery-dotimeout/ "jquery-dotimeout")

**在我的项目中将另一个插件指定为依赖项的最佳做法是什么？**

[如果我要将我的项目上传到 github...在我的仓库中包含doTimeout](https://github.com/cowboy/jquery-dotimeout/ "jquery-dotimeout")的副本是否合适？这纯粹是文档问题吗？

我试图通过 google 和 stackoverflow 找到这个答案，但还没有真正找到我正在寻找的答案。我确定这已经在某个地方被问过了，所以我提前道歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T22:59:25.057

最佳做法是简单地正确记录它。“此插件需要先包含 XXX 插件。”

请务必将其包含在所有示例等中。

如果您查看现有插件，这是每个依赖于另一个插件的插件*的事实上的*标准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T23:13:32.630

注册 JS 库之间的依赖关系没有行业标准，但是有一种尝试，叫做 AMD（异步模块定义）。它被包括 jQuery 在内的一些主要库使用。但是你可能已经猜到了，只有在对方也使用 AMD 的情况下，你才能注册依赖。

要获得更多信息，您可以阅读这[两篇](http://addyosmani.com/writing-modular-js/) [文章](http://requirejs.org/docs/whyamd.html)。

但是，我同意 Hugo 的观点，即最好记录您的需求，接受 JS 是一种有缺陷的语言，并在开发人员之间就如何记录这一点达成一致，而不是阅读另一本关于持续炒作的毫无意义的书。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-05T22:54:04.700

您可以为此使用[http://yepnopejs.com/](http://yepnopejs.com/)而不是自己编写代码。只需 1.7 KB 即可加载 CSS 或 JS，然后在加载后执行代码。

# jquery - 更改悬停时的链接颜色

> ID：11351447
> 
> 赞同：0
> 
> 时间：2012-07-05T19:43:08.477
> 
> 标签：jquery, html, css

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T19:47:39.207

将此行添加到您的 CSS 文件并忘记 jQuery：

```
tr:hover a { color: white; } 
```

如果您非常希望您的 jQuery 代码能够正常工作，那么您只需要定位悬停行内的锚点：

```
$('tr').hover(function(){
   $('a', this).css('color','white');
 }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T19:44:31.843

有一些方法可以做到。.hover 方法可以有两个功能（将鼠标移到上方，将鼠标移出），您可以同时实现这两个功能来更改颜色，例如：

1 - 通过 javascript (jquery)

```
$(document).ready(function(){
  $('tr').hover(
    function(){
      var $this = $(this);
      $this.css('background-color', '#fff');
    },
    function(){
      var $this = $(this);
      // original color -> $this.css('background-color', $this.data('bgcolor'));
      $this.css('background-color', '#000');
    }
  );    
}); 
```

您可以使用`.data('bgcolor')`样式属性或标签上设置的原始 css 来获取颜色。

2）或者只是添加一个CSS

```
.row {
   background-color: #000;
}

.row : hover {
   background-color: #fff;
} 
```

并将其设置在行上

```
<tr class='row'>
...
</tr> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-01T23:37:25.567

我面临着类似的问题；发现这个解决方案是有效的。

```
 div.cntrblk tr:hover td a {
       color:rgb(0,0,255);
     } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-03T00:26:21.530

我不知道它是否与您的情况相关，我正在制作一种主要颜色和第二种颜色为白色的网站。每次刷新颜色都是随机的，所以我需要悬停元素来改变颜色。所以我最终得到：

```
#menu-buttons>li{ color:#fff; }
#menu-buttons>li:hover { color: inherit; } 
```

然后我只是为父元素分配随机颜色：

```
$('#menu-buttons').css('color',mainColor); 
```

# windows - 如何使用 .NET 获取鼠标位置

> ID：11351448
> 
> 赞同：0
> 
> 时间：2012-07-05T19:43:09.053
> 
> 标签：windows, windows-services, position, mouse

我正在开发一个 WINDOWS SERVICE，它应该每 10 秒记录一次鼠标位置。问题是我无法获得鼠标位置...我为“GetCursorPos(ref Point)”方法调用 user32 但我总是得到 |0,0|

谁能告诉我如何正确获得该职位？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:49:22.537

实现这一点的最好方法可能是编写一个[系统托盘应用程序](https://stackoverflow.com/questions/995195/writing-a-windows-system-tray-application-with-net)。

如果您使该服务具有交互性，则可以在 Windows 服务中执行此操作，但如果您采用该路线，则会出现许多安全问题。

有关完整详细信息，请参阅

[http://www.freelists.org/post/program-l/C-creating-a-service-that-logs-mouse-and-keyboard-input,1](http://www.freelists.org/post/program-l/C-creating-a-service-that-logs-mouse-and-keyboard-input,1)

# sql-server - 不允许从数据类型 ntext 到 varchar 的隐式转换。使用 CONVERT 函数运行此查询

> ID：11351450
> 
> 赞同：1
> 
> 时间：2012-07-05T19:43:19.233
> 
> 标签：sql-server, stored-procedures, sql-server-2000

我的 SQL Server 2000 存储过程之一出现上述错误。在这里，我不使用任何带有 type 的变量`ntext`。我不知道为什么会收到此错误。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T20:07:55.033

看来问题根本不在于存储过程。正如您在评论中所说，当输入超过 8000 个字符时会发生错误。SQL Server 2000 没有`VARCHAR(MAX)`，最大长度为`VARCHAR`8000。因此，如果您尝试将更长的字符串传递给您的 sp，它需要进行转换`TEXT`，但它不能是隐式转换，所以您需要类型的参数`TEXT`。当然，您需要更改您的 sp，并且无法在此数据类型的列上执行许多操作，因此您可能无法实际执行您想要的操作。

# java - 提高从 JDBC (SQL Server) 向 XML 列插入 SQL 的速度

> ID：11351451
> 
> 赞同：1
> 
> 时间：2012-07-05T19:43:19.743
> 
> 标签：java, xml, performance, sql-server-2008, jdbc

我目前正在编写一个 Java 程序，它遍历一个包含大约 4000 个 XML 文件的文件夹。

使用 for 循环，它从每个文件中提取 XML，将其分配给字符串“xmlContent”，并使用 PreparedStatement 方法 setString(2,xmlContent) 将字符串插入存储在我的 SQL Server 中的表中。

列“2”是 XML 类型的称为“数据”的列。

该过程有效，但速度很慢。它每 7 秒向表中插入大约 50 行。

有人对我如何加快这个过程有任何想法吗？

代码：

```
{ ...declaration, connection etc etc
        PreparedStatement ps = con.prepareStatement("INSERT INTO Table(ID,Data) VALUES(?,?)");

        for (File current : folder.listFiles()){
           if (current.isFile()){
              xmlContent = fileRead(current.getAbsoluteFile());
              ps.setString(1, current.getAbsoluteFile());
              ps.setString(2, xmlContent);
              ps.addBatch();

              if (++count % batchSize == 0){
                    ps.executeBatch();
              }

           }
        }
        ps.executeBatch();   // performs insertion of leftover rows
        ps.close();
} 
```

* * *

```
private static String fileRead(File file){

         StringBuilder xmlContent = new StringBuilder();

         FileReader fr = new FileReader(file);
         BufferedReader br = new BufferedReader(fr);
         String strLine = "";
         br.readLine();      //removes encoding line, don't need it and causes problems
         while ( (strLine = br.readLine() ) != null){
             xmlContent.append(strLine);
         }
         fr.close();

         return xmlContent.toString();
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:09:19.323

仅仅通过一点阅读和快速测试——看起来你可以通过关闭连接上的 autoCommit 来获得不错的加速。我看到的所有批处理查询教程也都推荐它。如[http://www.tutorialspoint.com/jdbc/jdbc-batch-processing.htm](http://www.tutorialspoint.com/jdbc/jdbc-batch-processing.htm)

将其关闭 - 然后将显式提交放到您想要的位置（在每个批次结束时，在整个函数结束时等）。

```
 conn.setAutoCommit(false);
 PreparedStatement ps = // ... rest of your code

 // inside your for loop

     if (++count % batchSize == 0) 
     {
           try {
             ps.executeBatch();
             conn.commit();
           }
           catch (SQLException e)
           {
              // .. whatever you want to do
              conn.rollback();
           }
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:36:09.703

最好使读写并行。

使用一个线程读取文件并存储在缓冲区中。使用另一个线程从缓冲区读取并在数据库上执行查询。

您可以使用多个线程并行写入数据库。这应该会给你更好的性能。

我建议您遵循这种 MemoryStreamMultiplexer 方法，您可以在一个线程中读取 XML 文件并存储在缓冲区中，然后使用一个或多个线程从缓冲区中读取并针对数据库执行。

[http://www.codeproject.com/Articles/345105/Memory-Stream-Multiplexer-write-and-read-from-many](http://www.codeproject.com/Articles/345105/Memory-Stream-Multiplexer-write-and-read-from-many)

这是一个 C# 实现，但你明白了。

# objective-c - 处理由于 iOS 通讯录 API 中的链接卡导致的重复联系人

> ID：11351454
> 
> 赞同：38
> 
> 时间：2012-07-05T19:43:40.683
> 
> 标签：objective-c, cocoa-touch, duplicates, abaddressbook, abrecord

[我即将推出](http://twelvetwenty.nl/gettogether)的应用程序的一些 beta 用户报告说联系人列表包含大量重复记录。我使用来自的结果[`ABAddressBookCopyArrayOfAllPeople`](https://developer.apple.com/library/ios/#documentation/AddressBook/Reference/ABPersonRef_iPhoneOS/Reference/reference.html#//apple_ref/c/func/ABAddressBookCopyArrayOfAllPeople)作为我的自定义联系人表格视图的数据源，令我感到困惑的是，结果与 iPhone 的“联系人”应用程序不同。

当更仔细地查看联系人应用程序时，似乎重复来自带有“链接卡”的条目。下面的屏幕截图有些模糊，但正如您在最右侧的应用程序中看到的那样，“Celine”出现了两次，而在左侧的“联系人”应用程序中只有一个“Celine”。如果您单击该单个联系人的行，您会得到一张“统一信息”卡片，其中包含两个“链接卡片” *（如中间所示，我没有使用 Celine 的联系方式，因为它们不适合一张截图）*：

![截屏](../Images/b9cef9f6f3b0dee8d1599115f3d056d4.png)

围绕“Linked Cards”的问题在[Apple 的最终用户论坛](https://discussions.apple.com/message/13089845#13089845)上有[很多](https://discussions.apple.com/message/17320564#17320564)[主题](https://discussions.apple.com/thread/2475796?start=0&tstart=0)，但除了许多指向[404 支持页面](http://support.apple.com/kb/HT3677)这一事实之外，我实际上无法修复所有应用程序用户的地址簿。我更愿意优雅地处理它而不打扰用户。更糟糕的是，似乎我不是唯一遇到此问题的人，因为[WhatsApp 显示的是包含重复联系人的相同列表](http://www.quora.com/WhatsApp-Messenger/How-can-I-delete-duplicate-contacts-in-WhatsApp)。

*只是为了清楚重复联系人的来源，我没有存储、缓存或以其他方式尝试对数组`ABAddressBookCopyArrayOfAllPeople`返回进行智能处理。因此，重复记录直接来自 API 调用。*

有谁知道如何处理或检测这些链接卡，防止出现重复记录？Apple 的通讯录应用程序做到了，我们其他人怎么能做到呢？

**更新：我编写了一个库并将其放在 Cocoapods 上以解决手头的问题。请看下面我的回答**

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-14T01:43:47.640

一种方法是仅从默认通讯簿源中检索联系人：

```
ABAddressBookRef addressBook = ABAddressBookCreate();
NSArray *people = (__bridge NSArray *)ABAddressBookCopyArrayOfAllPeopleInSource(addressBook, ABAddressBookCopyDefaultSource(addressBook)); 
```

但这很蹩脚，对吧？它针对的是设备上的通讯录，但不是 Exchange 或其他花哨的同步通讯录中的额外联系人。

**所以这是您正在寻找的解决方案：**

1.  遍历 ABRecord 引用
2.  抓住每个相应的“链接参考”（使用`ABPersonCopyArrayOfAllLinkedPeople`）
3.  将它们捆绑在一个 NSSet 中（以便可以唯一标识分组）
4.  将该 NSSet 添加到另一个 NSSet
5.  利润？

您现在有一个 NSSet，其中包含链接的 ABRecord 对象的 NSSet。总体 NSSet 将与“联系人”应用程序中的联系人数量相同。

**示例代码：**

```
NSMutableSet *unifiedRecordsSet = [NSMutableSet set];

ABAddressBookRef addressBook = ABAddressBookCreate();
CFArrayRef records = ABAddressBookCopyArrayOfAllPeople(addressBook);
for (CFIndex i = 0; i < CFArrayGetCount(records); i++)
{
    NSMutableSet *contactSet = [NSMutableSet set];

    ABRecordRef record = CFArrayGetValueAtIndex(records, i);
    [contactSet addObject:(__bridge id)record];

    NSArray *linkedRecordsArray = (__bridge NSArray *)ABPersonCopyArrayOfAllLinkedPeople(record);
    [contactSet addObjectsFromArray:linkedRecordsArray];

    // Your own custom "unified record" class (or just an NSSet!)
    DAUnifiedRecord *unifiedRecord = [[DAUnifiedRecord alloc] initWithRecords:contactSet];

    [unifiedRecordsSet addObject:unifiedRecord];
    CFRelease(record);
}

CFRelease(records);
CFRelease(addressBook);

_unifiedRecords = [unifiedRecordsSet allObjects]; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-07T04:28:46.940

我在我的应用程序中使用 ABPersonCopyArrayOfAllLinkedPeople() 已经有一段时间了。不幸的是，我刚刚发现它并不总是做正确的事情。例如，如果您有两个同名的联系人，但一个设置了“isPerson”标志而另一个没有设置，则上述函数不会将它们视为“链接”。为什么这是一个问题？因为 Gmail(exchange) 来源不支持此布尔标志。如果您尝试将其保存为 false，它将失败，并且您保存在其中的联系人将在您的应用程序的下一次运行时返回，因为与您在 iCload (CardDAV) 中保存的联系人取消链接。

社交服务的类似情况：Gmail 不支持它们，如果一个有 facebook 帐户而一个没有，上述功能将看到两个同名的联系人不同。

我正在切换到我自己的 name-and-source-recordID-only 算法来确定是否应将两个联系人记录显示为单个联系人。更多的工作，但有一线希望：ABPersonCopyArrayOfAllLinkedPeople() 很慢。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-03T20:10:45.953

@Daniel Amitay 提供的方法包含了非常有价值的块，但不幸的是代码还没有准备好使用。对联系人进行良好的搜索对我和许多应用程序至关重要，因此我花了很多时间来解决这个问题，同时还解决了与 iOS 5 和 6 兼容的地址簿访问问题（通过块处理用户访问）。它解决了由于不正确同步源导致的许多链接卡片和来自新添加的 Facebook 集成的卡片。

我编写的库使用内存（可选磁盘）Core Data 存储来缓存地址簿记录 ID，提供简单的后台线程搜索算法，返回统一的地址簿卡片。

源代码在[我的 github 存储库中](https://github.com/epologee/EEEUnifiedAddressBook)可用，这是一个[CocoaPods](http://cocoapods.org/) pod：

```
pod 'EEEUnifiedAddressBook' 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-09-21T14:35:07.317

借助新的 iOS 9**联系人框架**，您终于可以拥有统一的联系人了。

我给你看两个例子：

1）使用快速枚举

```
//Initializing the contact store:
CNContactStore* contactStore = [CNContactStore new];
if (!contactStore) {
    NSLog(@"Contact store is nil. Maybe you don't have the permission?");
    return;
}

//Which contact keys (properties) do you want? I want them all!
NSArray* contactKeys = @[ 
    CNContactNamePrefixKey, CNContactGivenNameKey, CNContactMiddleNameKey, CNContactFamilyNameKey, CNContactPreviousFamilyNameKey, CNContactNameSuffixKey, CNContactNicknameKey, CNContactPhoneticGivenNameKey, CNContactPhoneticMiddleNameKey, CNContactPhoneticFamilyNameKey, CNContactOrganizationNameKey, CNContactDepartmentNameKey, CNContactJobTitleKey, CNContactBirthdayKey, CNContactNonGregorianBirthdayKey, CNContactNoteKey, CNContactImageDataKey, CNContactThumbnailImageDataKey, CNContactImageDataAvailableKey, CNContactTypeKey, CNContactPhoneNumbersKey, CNContactEmailAddressesKey, CNContactPostalAddressesKey, CNContactDatesKey, CNContactUrlAddressesKey, CNContactRelationsKey, CNContactSocialProfilesKey, CNContactInstantMessageAddressesKey
];

CNContactFetchRequest* fetchRequest = [[CNContactFetchRequest alloc] initWithKeysToFetch:contactKeys];
[fetchRequest setUnifyResults:YES]; //It seems that YES is the default value
NSError* error = nil;
__block NSInteger counter = 0; 
```

在这里，我使用快速枚举遍历所有统一联系人：

```
BOOL success = [contactStore enumerateContactsWithFetchRequest:fetchRequest
                                                         error:&error
                                                    usingBlock:^(CNContact* __nonnull contact, BOOL* __nonnull stop) {
                                                        NSLog(@"Unified contact: %@", contact);
                                                        counter++;
                                                    }];
if (success) {
    NSLog(@"Successfully fetched %ld contacts", counter);
}
else {
    NSLog(@"Error while fetching contacts: %@", error);
} 
```

2）使用`unifiedContactsMatchingPredicate`API​​：

```
// Contacts store initialized ...
NSArray * unifiedContacts = [contactStore unifiedContactsMatchingPredicate:nil keysToFetch:contactKeys error:&error]; // Replace the predicate with your filter. 
```

PS 你可能也对这个新的 API 感兴趣`CNContact.h`：

```
/*! Returns YES if the receiver was fetched as a unified contact and includes the contact having contactIdentifier in its unification */
- (BOOL)isUnifiedWithContactWithIdentifier:(NSString*)contactIdentifier; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T00:26:38.733

我正在获取所有源`ABAddressBookCopyArrayOfAllSources`，将默认源移到`ABAddressBookCopyDefaultSource`第一个位置，然后遍历它们并让所有的人从源中`ABAddressBookCopyArrayOfAllPeopleInSource`跳过我以前见过的链接，然后在每个`ABPersonCopyArrayOfAllLinkedPeople`.

# java - 我应该如何在 Java 中实现马氏距离函数？

> ID：11351455
> 
> 赞同：1
> 
> 时间：2012-07-05T19:43:48.320
> 
> 标签：java, 3d, matrix, distance, covariance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:08:19.117

[协方差](http://en.wikipedia.org/wiki/Covariance)矩阵包含任意两个变量之间的预期关系。给定向量 上的统计分布`x`，具有统计平均值`avg`：

```
covariance(i,j) = expected value of [ (x[i] - avg[i])(x[j] - avg[j]) ] 
```

给定一组统计`N`向量`v_1 ... v_N`和均值向量`avg`，您可以估计它们的分布的协方差，如下所示：

```
sample_covariance(i,j) = sum[for k=1..N]( (v_k[i] - avg[i])*(v_k[j] - avg[j]) ) / (N-1) 
```

最后一个是您正在寻找的协方差矩阵。我建议您也阅读上面的 wiki 链接。

# .htaccess - 带有 .htaccess 的友好网址

> ID：11351457
> 
> 赞同：0
> 
> 时间：2012-07-05T19:43:54.967
> 
> 标签：.htaccess

我在我的网站中使用以下 .htaccess 代码将所有网址重定向到 index.php

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule ^(.*)$ index.php?url=$1 [QSA,L] 
```

然后我正在检查 url 并查看该页面的名称是否在数据库中可用。然后我将用户重定向到该特定页面，如果发现如下：

```
www.mywebsite.com/videos.php?v=Name_of_the_video
www.mywebsite.com/images.php?i=Name_of_the_image
www.mywebsite.com/users.php?u=Name_of_the_user 
```

如您所见，我有 3 种主要类型的页面。我想使用 .htacces 所以我可以像这样转换这些网址：

```
www.mywebsite.com/videos/Name_of_the_video
www.mywebsite.com/images/Name_of_the_image
www.mywebsite.com/users/Name_of_the_user 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T23:22:11.370

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^/])([^/]+)/(.*) /$1$2.php?$1=$3 [L,QSA] 
```

不过，您可能希望将此放在其他规则之前。

# jquery - 使用 Jquery 切换 HTML 和 CSS

> ID：11351462
> 
> 赞同：1
> 
> 时间：2012-07-05T19:44:13.130
> 
> 标签：jquery, html, css

我正在寻找使用 jquery 作为一种切换按钮来在以下两种状态之间切换；

![切换 A](../Images/3f6d2de0ea28c7c19e58f918ec99a860.png)

![切换 B](../Images/22e4cbe673e010a9c1394eb370a64ac9.png)

因此，当我单击切换按钮/链接时，图片 A 中的所有内容（红线上方）都被隐藏，当我再次单击切换按钮时，它会重新出现。

我一直在研究 Jquerys toggleClass 功能；

```
$("button").click(function(){
$("p").toggleClass("main");
}); 
```

但我相信这只会隐藏 CSS，而不是 HTML。我是在滥用这个功能还是不是为了这个？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:54:55.270

这是一个工作示例：

[http://jsfiddle.net/pV7Qe/](http://jsfiddle.net/pV7Qe/)

```
<div class="header">header</div>
<div class="menu">
    <div class="my-toggle">toggle</div>
</div>
<div class="content">
content            
</div>

.header
{
    background:lime;
}
.menu
{
    height:100px;
    background:gray;        
}
.my-toggle
{
    width:100px;
    background:red;
    cursor:pointer;
}
.content
{
    height:500px;            
    background:#ddd;
}​

$(".my-toggle").click(function() {
  $(".header").slideToggle();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T19:48:11.047

如果您可以将红线上方的所有内容放入具有唯一 ID 的单个包含元素中，您可以简单地[`.toggle()`](http://api.jquery.com/toggle/)在该单个元素上使用 jQuery 函数来实现您想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T19:53:50.017

考虑两个类

```
.hide{visibility: hidden;}
.show{visibility: visible;} 
```

现在使用这个 JQuery 代码

```
$("button").click(function(){
$("p").toggleClass('hide','show');
}); 
```

这将解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T19:47:28.817

尝试使用切换功能。

```
$("idOfButton").click(function(){
    $(".main").toggle();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T19:48:08.467

使用不带任何参数的切换功能..

```
 $("button").click(function(){
$("p").toggleClass();
}); 
```

这应该有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-05T19:58:58.540

您可以使用`slideToggle()`,`toggle()`或`toggleClass('hidden')`

```
.hidden {
    display: none;
} 
```

参考：

*   [滑动切换](http://api.jquery.com/slideToggle/)
*   [切换](http://api.jquery.com/toggle/)
*   [切换类](http://api.jquery.com/toggleClass/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-05T20:04:53.357

没有理由使用 toggleClass 并为隐藏类提供额外的 css。

只需使用toggle或slideToggle即可获得更好的效果，这里的每个人都建议这样做。

我唯一添加的输入是，而不是

```
$('.buttons').click(function(){
    $('#div').slideToggle();
}); 
```

我相信使用'on'是更好的做法

```
$('.buttons').on('click', function(){
    $('#div').slideToggle();
}); 
```

# php - 在 Rails 中附加文件并在 ExtJs + CakePHP 中读取它们

> ID：11351464
> 
> 赞同：0
> 
> 时间：2012-07-05T19:44:23.930
> 
> 标签：php, ruby-on-rails, ruby, cakephp, paperclip

我有一个由两个独立部分组成的项目。一方面，有一个 Rails 应用程序，另一方面，有一个带有 CakePhp 服务器的 ExtJs 客户端。

需要做的是：在 Rails 中附加一个文件（这是通过使用 Paperclip 完成的）并能够在 Cake 端读取它们。如果两个系统都在同一台服务器上，这可能很容易，但这需要远程完成，因此 Cake 端将调用 Rails 路由，Rails 将提供文件。

蛋糕代码下载文件：

```
function download_file($path, $file_name, $content_type, $size) {
    if ($fd = fopen ($path, "r")) {
        header("Content-type: " . $content_type);
        header("Content-Disposition: attachment; filename=\"".$file_name."\"");
        header("Content-length: $size");
        header("Cache-control: private"); //use this to open files directly
        header('Pragma: public');
        ob_clean();
        flush();
        echo readfile($path);
        // $this->log(apache_response_headers(), 'debug');
    }
    fclose ($fd);
} 
```

Ruby/Rails 代码提供文件：

```
send_file document.path, :type => document.document_content_type 
```

Rails 文档模型：

```
class Document < ActiveRecord::Base
    belongs_to :attachable, :polymorphic => true

    has_attached_file :document,
        :url => '/download/:id/:fingerprint/documents'

    def path
        document.path
    end
end 
```

除了一种类型的文件 .docx 之外，一切都按预期工作。我可以上传，然后下载除此类文件之外的任何其他文件。上传后，我可以在rails中读取文件，没有问题。Cake 方面似乎有问题，因为发生了这样的事情：我可以下载文件，但之后我无法使用 LibreOffice 打开它。我似乎将 mime 类型正确设置为 apache，并且浏览器识别文件类型和打开它的应用程序。看来我可以用 TextEdit 打开文件。

所以，问题是：出了什么问题？为什么 .docx 文件不能在 php / Cakephp 端打开？

任何想法都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T04:58:52.097

找到了答案。实际上这毕竟是某种 Cake 问题，并且与 Cake 渲染视图的方式有关。

Cakes MediaView 不允许使用远程文件，因为它构建文件路径的方式，但我添加了

```
$this->autoRender = false; 
```

之后一切顺利。

这篇文章很有帮助：[Corrupted .docx download using phpdocx](https://stackoverflow.com/questions/10693660/corrupted-docx-download-using-phpdocx)

感谢 burzum 以及 MediaView 的提示。

# c# - 检查控件中的值是否从按钮单击时的原始数据更改

> ID：11351470
> 
> 赞同：1
> 
> 时间：2012-07-05T19:44:38.820
> 
> 标签：c#, asp.net

我有一个带有不同控件（复选框、文本区域、ddls..等）的页面，在页面加载时，数据被加载到控件中。

在单击按钮后检查数据是否从原始数据修改的好方法是什么。使用 c#。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:49:48.427

在 HiddenField 中隐藏控件的默认内容。通过比较 ButtonClicked 事件中隐藏字段中的值来检查控件的最后内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:55:16.597

你这样做是为了检查并发性吗？如果是这样，我建议使用实体数据模型。它具有内置功能来检查字段是否与原始字段发生了变化。这是一个如何使用它的快速示例：

[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/handling-concurrency-with-the-entity-framework-in-an-asp-net-mvc-application](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/handling-concurrency-with-the-entity-framework-in-an-asp-net-mvc-application)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T19:47:55.510

您可以使用`ViewState["Key"]`

尝试

**1.在负载**

```
ViewState["Key"] = texbox.Text; 
```

**2.在帖子中比较两个值**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T19:48:20.790

如果这是一个 Web 应用程序，我会查看会话变量、ViewState 等，我个人更喜欢会话变量。如果这是一个 Windows，我会查看属性，有几种方法可以做到这一点。您能否提供并举例说明您想要保存的数据类型听起来像是您正在寻找创建类似 DELTA 的东西

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-05T19:50:54.957

您可以从这些控件继承并创建`custom controls`. 在那里，您可以创建属性来存储您的初始值。稍后您可以将其与当前值进行比较，看看它是否已更改。

# treeview - D3 Tree-Interactive 如何检测对父节点和子节点的点击

> ID：11351473
> 
> 赞同：0
> 
> 时间：2012-07-05T19:44:44.420
> 
> 标签：treeview, d3.js

试图从节点上的点击中接收回调。当前，如果您单击该示例以显示子节点，则该示例会展开父节点。我希望能够单击子节点并接收独立于父节点单击的呼叫。但我还需要知道单击了哪个子节点。这将如何做到最好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T01:07:08.120

考虑在父元素上使用[pointer-events](https://developer.mozilla.org/en/CSS/pointer-events/) css 属性：

```
d3.selectAll(_parents_).style("pointer-events","none"); 
```

并给子节点一个点击功能：

```
d3.selectAll(_children_).on("click", _somefunction_); 
```

不完全确定这是否是您要问的，否则我建议创建一个 jsfiddle 来更好地描述您的意图

# java - InputStream 的问题

> ID：11351474
> 
> 赞同：2
> 
> 时间：2012-07-05T19:44:44.030
> 
> 标签：java, inputstream, outputstream

以下是我将用于我的项目的代码片段的一部分。

```
public String fetchFromStream()
{
    try
    {
        int charVal;
        StringBuffer sb = new StringBuffer();

        while((charVal = inputStream.read()) > 0) {
            sb.append((char)charVal);
        }
        return sb.toString();
    } catch (Exception e)
    {
        m_log.error("readUntil(..) : " + e.getMessage());
        return null;
    } finally {
        System.out.println("<<<<<<<<<<<<<<<<<<<<<< Called >>>>>>>>>>>>>>>>>>>>>>>>>>>");
    }
} 
```

最初，while 循环开始工作得很好。但是在从流中读取可能的最后一个字符之后，我期望得到 -1 返回值。但这就是我的问题开始的地方。代码被挂起，即使 finally 块没有被执行。

我在 Eclipse 中调试此代码以查看运行时实际发生的情况。我在 while 循环中设置了一个指针（调试），并不断地监视 StringBuffer 被一个一个地填充 char 值。但是突然在检查while循环内的条件时，调试控制丢失了，这就是代码进入挂断状态的地方！也不例外！

这里发生了什么？

编辑：：

这就是我获取 InputStream 的方式。基本上我使用 Apache Commons Net 进行 Telnet。

```
private TelnetClient getTelnetSession(String hostname, int port)
{
    TelnetClient tc = new TelnetClient();
    try
    {
        tc.connect(hostname, port != 0 ? port : 23);

                    //These are instance variables
        inputStream = tc.getInputStream();
        outputStream = new PrintStream(tc.getOutputStream());

        //More codes...

        return tc;
    } catch (SocketException se)
    {
        m_log.error("getTelnetSession(..) : " + se.getMessage());
        return null;
    } catch (IOException ioe)
    {
        m_log.error("getTelnetSession(..) : " + ioe.getMessage());
        return null;
    } catch (Exception e)
    {
        m_log.error("getTelnetSession(..) : " + e.getMessage());
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T19:48:29.330

查看[JavaDocs](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#read%28%29)：

> Reads the next byte of data from the input stream. The value byte is returned as an int in the range 0 to 255\. If no byte is available because the **end of the stream has been reached, the value -1 is returned**. **This method blocks until input data is available**, the end of the stream is detected, or an exception is thrown.

In simple turns: if your stream ended (e.g. end of file), `read()` returns -1 immediately. However if the stream is still open but JVM is waiting for data (slow disk, socket connection), `read()` will *block* (not really hung).

Where are you getting the stream from? Check out the [`available()`](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#available%28%29) - but please do not call it in a loop exhausting CPU.

Finally: casting `int`/`byte` to `char` will only work for ASCII characters, consider using `Reader` on top of `InputStream`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T19:47:28.877

阅读文档

如果 InputStream 没有关闭，read() 将一直​​等到 InputStream 上有更多数据。

我怀疑你是用套接字做这个的吗？这是出现这种情况的最常见区域。

"从输入流中读取数据的下一个字节。值字节以 int 形式返回，范围为 0 到 255。如果由于到达流的末尾而没有可用的字节，则返回值 -1。这方法阻塞，直到输入数据可用、检测到流结束或抛出异常”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T14:04:56.690

I have the same issue with the Apache Commons on Android ... the read() command on the inputstream hangs forever for some reason. And no, it is not just blocking "until data is available" ... my debugging information shows that there are several 100 chars available() ... yet it just randomly blocks at some read. However, whenever I send something to the telnet server the block is suddenly released and it will continue reading for several chars until it suddenly stops/blocks again at some arbitrary point!

I believe there is some bug within the Apache Commons library! This is really annoying because there isn't a lot that can be done ... no timeout for the read command or anything else ...

EDIT: I was able to get around it ... by setting the TelNetClient.setReaderThread(false) ... obviously there is a bug within the Library that exists as long as a thread handles the input data ... when dispabled it works just fine for me!

# ruby-on-rails - 使用不同应用程序的单一登录接近 ruby on rails

> ID：11351484
> 
> 赞同：4
> 
> 时间：2012-07-05T19:45:38.520
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, single-sign-on

在以下情况下最好的方法是什么：

*   处理用户身份验证的主要应用程序（最好是设计）。
*   几个不同的应用程序可以访问用户数据库进行单次登录。
*   同步用户数据（首选项、配置文件数据）

场景示例：

*   用户注册应用程序 A
*   用户可以使用相同的凭据访问应用程序 B（但必须明确确认新协议才能使用应用程序 B）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:56:15.843

首先，所有应用程序都需要访问用户数据库，因此用户只需注册一次。您可以有一个属性或关系来检查用户是否已确认不同应用程序的协议。

为了使所有应用程序只需一次登录即可访问，您可以为所有应用程序使用相同的会话存储。

例如，您可以将 memcached 用于会话存储，并在所有应用程序中使用相同的会话存储键。如果用户在一个应用程序中登录，当他在没有关闭会话的情况下转到另一个应用程序时，该应用程序可以检查会话是否已创建，用户可以在不登录的情况下进入新应用程序。

使用此解决方案，您需要注意会话数据，以免一个应用程序的数据与其他应用程序的数据重叠。

# ios - UIViewContentModeRedraw 与 setNeedsDisplay？

> ID：11351485
> 
> 赞同：3
> 
> 时间：2012-07-05T19:45:43.597
> 
> 标签：ios, xcode

我不知道setneedsdisplay和uiviewcontentmoderedraw之间的区别，你什么时候使用它们，它们不是完全相同的东西吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T21:03:04.863

它们是不同的东西。 `setNeedsDisplay`是动词。用它来告诉视图它正在查看的东西的状态已经改变，所以它应该重绘（通过在运行循环的下一次迭代中调用它的 drawRect: 方法）。

`contentMode`是视图的属性。它不会导致视图立即执行任何操作。它指定视图如何处理相对于其大小的内容。 `UIViewContentModeRedraw`是可能分配给此属性的值。这意味着视图将通过导致自身重绘（通过调用`setNeedsDisplay`自身）来呈现大小变化。

如果您计划对视图大小的更改进行动画处理，`UIViewContentModeRedraw`这是一个昂贵的选择，因为它会在动画期间尝试从头开始重复重绘（而不是操作位图副本）。

# php - 将关联数组的键数组与整数索引数组进行比较

> ID：11351486
> 
> 赞同：5
> 
> 时间：2012-07-05T19:45:47.087
> 
> 标签：php, arrays, associative-array

我编写了以下代码来检查数组是否是关联的

```
function is_associative( $arr ) {
    $arr = array_keys( $arr );
    return $arr != array_keys( $arr );
} 
```

它为以下数组返回 true：

```
array("a" => 5,"b" => 9); 
```

数字数组为 false

但是对于具有单个元素的关联数组，它不会返回 true，例如：

```
array("a" =>9); 
```

为什么它对于具有单个元素的关联数组返回 false？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T19:48:44.820

您需要`!==`在比较中使用：

```
return $arr !== array_keys( $arr ); 
```

这会产生[正确的输出](http://viper-7.com/cyiiTG)，它们都为真。

否则类型杂耍将认为单个元素数组的值相等：

```
array(1) { [0]=> string(1) "a" } 
array(1) { [0]=> int(0) } 
```

在这里，`"a" == 0`是真的（因为“a”被默默地转换为 0），但是`"a" === 0`是假的。

# css - 是什么导致了这个双滚动条/空白？

> ID：11351494
> 
> 赞同：0
> 
> 时间：2012-07-05T19:46:15.867
> 
> 标签：css, wordpress, scrollbar, whitespace

我对 Chrome、Firefox 和显然 IE 有一个奇怪的问题。我正在为我的投资组合网站/博客构建一个 WordPress 主题，一切都很好，直到今天我在 chrome 中查看该网站时，页面底部突然出现了一个大的白条，当页面被查看时Firefox/IE 它显示一个双边栏。这是页面[http://iamdannygreen.com/?p=5](http://iamdannygreen.com/?p=5) 请原谅 Firefox 中丑陋的标题，尚未修复所有浏览器的错误。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:50:28.483

修复您的标题并`overflow-x: hidden`从正文中删除，它会正常工作。

通过修复你的标题，我的意思是，这是什么......？

```
margin-left:-1000px;
padding-left:1000px;
padding-right:1000px;
margin-right:1000px; 
```

如果您希望标题背景跨越窗口的宽度，请将其移到外面`#wrapper`并在里面放置另一个包装器（以便内容保持居中）。

```
<div id="header">
    <div class="wrap">content here</div>
</div>
<div class="wrap" id="content"> body stuff here </div>

.wrap {
  width: 500px;
  margin: 0 auto;
}
#header {
  background-color: #CCC;
}

#content {
  background-color:#FFF;
} 
```

[**演示**](http://cssdesk.com/NcwDW)。

# computational-geometry - 网格重划分算法

> ID：11351495
> 
> 赞同：1
> 
> 时间：2012-07-05T19:46:18.660
> 
> 标签：computational-geometry, mesh, triangulation

我需要一种算法来重新对给定的 3D 实体对象进行三角测量。

输入：一个三角形网格输出：一个新的三角形网格，其中三角形 - 尽可能 - 具有相等的边长。允许有一定的容忍度。

目前我正在思考一种聚类算法，以便在表面上平均分配点。然后我可以使用 2D Delaunay 三角剖分并将三角形投影到表面。但这只是一个模糊的想法，而不是算法。如果有人可以提出算法或相关科学工作的参考，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:01:33.990

CGAL 提供了一种可用于重新划分网格的表面网格划分算法。文档页面在[这里](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Surface_mesher/Chapter_main.html)。

可以直接在demo中试用。Windows 上的预编译演示可[在此处](http://www.cgal.org/demo/4.0.2/polyhedron_3.zip)获得。您还需要以下[dll 的](http://www.cgal.org/demo/4.0.2/CGAL-demoDLLs.zip).

科学出版物的参考资料可在上述页面上找到。

# c++ - 实现简单线程安全通用互斥锁的正确方法

> ID：11351497
> 
> 赞同：0
> 
> 时间：2012-07-05T19:46:36.087
> 
> 标签：c++, multithreading, pthreads, mutex

我想知道我实现通用互斥锁的方式是否是一种好的软件设计模式，它是线程安全的吗？

这是我的互斥锁类：

```
#ifdef HAVE_WINDOWS_H
void *CSimpleMutex::object;
#endif
#ifdef _PTHREADS
pthread_mutex_t CSimpleMutex::object;
#endif

CSimpleMutex::CSimpleMutex(bool lockable)
{
    isLockableMutex = lockable;
    if (!lockable)
    {
#ifdef _WINDOWS
        object = CreateMutex(NULL, false, NULL);
#endif
#ifdef _PTHREADS
        pthread_mutex_init(&object, NULL);
#endif
    }
    else
    {
#ifdef _WINDOWS
        InitializeCriticalSection(&mutex);
#endif
#ifdef _PTHREADS
        pthread_mutex_init(&mutex, NULL);
#endif
    }
}

CSimpleMutex::~CSimpleMutex()
{
    if (!isLockableMutex)
    {
#ifdef _WINDOWS
        if(object!=NULL)
        {
            CloseHandle(object);
        }
#endif
#ifdef _PTHREADS
        pthread_mutex_destroy(&object);
#endif
    }
    else
    {
#ifdef _WINDOWS
        DeleteCriticalSection(&mutex);
#endif
#ifdef _PTHREADS
        pthread_mutex_destroy(&mutex);
#endif  
    }
}

// Aquires a lock
void CSimpleMutex::Lock()
{
    if (!isLockableMutex)
        return;
#ifdef _WINDOWS
    EnterCriticalSection(&mutex);
#endif
#ifdef _PTHREADS
    pthread_mutex_lock(&mutex);
#endif
}

// Releases a lock
void CSimpleMutex::Unlock()
{
    if (!isLockableMutex)
        return;
#ifdef _WINDOWS
    LeaveCriticalSection(&mutex);
#endif
#ifdef _PTHREADS
    pthread_mutex_unlock(&mutex);
#endif
} 
```

这是它的使用方式：

```
class CEnvironment : public CHandleBase
{
    private:
        CSimpleMutex *mutex;
    public:
        CEnvironment(){mutex = new CSimpleMutex(true);};
        ~CEnvironment(){delete mutex;};
        void Lock() { mutex->Lock(); };
        void Unlock() { mutex->Unlock(); };
        void DoStuff(void *data);
}; 
```

当我想使用 CEnvironment 时，我会执行以下操作：

```
env->Lock();
env->DoStuff(inData);
env->Unlock(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:24:30.360

您通常会使用[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)分别在进入和离开给定范围时获取和释放锁，以便在该范围内引发异常时自动释放锁。在您的情况下，您可以定义一个附加锁“守卫”类，该类在其构造函数中获取锁并在其析构函数中释放。例如，C++11 标准定义了几个[互斥](http://en.cppreference.com/w/cpp/thread)类和一个[`std::lock_guard`](http://en.cppreference.com/w/cpp/thread/lock_guard)提供我刚才描述的行为的类。

[Doug Schmidt](http://www.cs.wustl.edu/~schmidt/)的论文“ [Strategized Locking, Thread-safe Interface, and Scoped Locking](http://www.cs.wustl.edu/~schmidt/PDF/locking-patterns.pdf) ”提供了其他可能有用的设计细节和想法。

# asp.net - 表格行的底部边框未在 IE 中显示

> ID：11351498
> 
> 赞同：0
> 
> 时间：2012-07-05T19:46:45.527
> 
> 标签：asp.net, html

[http://www.surefiretaxes.com/Business/Crosslink-Tax-Software](http://www.surefiretaxes.com/Business/Crosslink-Tax-Software)

在显示“功能”的视频和 2 个图像下，这在 Chrome/FireFox 中正确显示，但在 IE9 中不显示。真正让我困惑的是，当我取出相同的信息并将其放入 DreamWeaver 时，它工作得非常好。

```
<style>
.Comparisonlbl                               {font-size: 13pt; color: #0061A0; line-    height:1.2em}
.Comparison                {border-collapse: collapse; border-spacing: 0;}
.Comparison tr                             {border-bottom: 1px solid #4D4D4D; line-height:1.3em}
.Comparison th                             {font-size: 11pt; color: #595959; padding: 15px 0 3px; text-align:center; vertical-align:top}
.Comparison td                             {text-align:left; color:#4D4D4D; font-size: small;}
</style>
</head>

<body>

<table class="Comparison" width="700px;">
  <tbody>
    <tr>
      <th style="padding: 15px 0px 3px; text-align: center; color: maroon; font-size: 11pt; vertical-align: top;" width="324">Features Not Mentioned in the Video Above</th>
      <th style="padding: 15px 0px 3px; text-align: center; color: maroon; font-size: 11pt; vertical-align: top;" width="364">Feature Description</th>
    </tr>
 <tr>
      <th>Free Included Features:<br></th>
  <th><div align="center"></div></th>
</tr>
<tr>
      <td><strong>Free Unlimited E-Filing</strong><br>
<span style="font-size: x-small;">1040s, 1041, 1120s/c, 1065, 706, 709, 990, 5500 and more</span></td>
      <td>You can E-File any Individual or Business form for any of the 50 U.S. states free of charge. To see a complete list of all the forms that you can e-file for free see our [<a href="/Home/Tax-Forms" target="blank">Included Tax Forms</a>] page.</td>
    </tr>
    <tr style="line-height: 1.3em; border-bottom-width: 0px;">
      <td>&nbsp;</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <th>Free Included Features:<br>
        <div style="font-size: 9pt;">Crosslink doesn't offer these options</div></th>
      <th><div align="center"></div></th>
   </tr>
    <tr>
      <td><strong>Automatic Backup Software</strong></td>
      <td>Backup your Tax Data from any year using our backup software. You can also retrieve these returns anywhere anytime. - [<a href="/Business/New-2013#Backup" target="blank">read more</a>]</td>
    </tr>
    <tr>
      <td><strong>E-File 2010, 2011, and 2012 returns</strong></td>
      <td>With Sure-Fire you will be able to E-File 2010, 2011, and 2012 tax returns. This feature isn't available with many software vendors. - [<a href="/Business/New-2013#EFILE" target="blank">read more</a>]</td>
    </tr>
    <tr>
      <td><strong>Interview Form Sheet</strong></td>
      <td>Our software has a built in Interview Form Sheet that asks you questions to help determine what forms are needed for the return. - [<a href="/Business/New-2013#Interview" target="blank">read more</a>]</td>
    </tr>
    <tr>
      <td>
<table border="0">
<tbody>
<tr>
<td vAlign="center;"><strong>Refund by Pre-Paid Mastercard</strong>
</td>
<td vAlign="center;" width="85"><img border="0" src="/SureFire/v2/moneywise_card.png" width="60"></td>
</tr>
</tbody>
</table>
</td>
  <td>Give your customers a Pre-Paid Mastercard their refund will be deposited onto before they leave your store. - [<a href="WesternUnion-Moneywise" target="blank">read more</a>]</td>
</tr>
<tr>
  <td><strong>Sure-Fire Assistant</strong></td>
  <td>This software shows videos on how to do everything from a 1040 return to an amended return. Also, this software can automatically fix any software issues you might run into 9 times out of 10 without contacting support. - [<a href="/Business/Sure-Fire-Assistant" target="blank">read more</a>]</td>
</tr>
  </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:27:27.807

我不认为边框底部适用于 tr。尝试将其放在 td 标签上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:17:33.743

您是否尝试过声明一个文档类型，例如：

DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 过渡//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"

仅供参考，您将需要适当的标记，但我无法放置它们。没有它们，IE 对表格样式很挑剔。希望它有效，对不起，我通常会先为您测试它，但我在移动设备上。

# http-status-code-404 - 找不到服务器给 404

> ID：11351500
> 
> 赞同：0
> 
> 时间：2012-07-05T19:46:51.820
> 
> 标签：http-status-code-404, cloud-foundry

我正在部署一个包含大约 100000 个条目的文件的 spring 应用程序。文件中的每一行大约有 23 个字符。当文件有 100000 个条目时，该应用程序部署良好，但是当我将内容增加到 400000 个条目时，当我访问我的应用程序 url 时，我收到 404 Not found 错误。

我需要找出导致崩溃的原因（无论是内存问题还是其他问题），但我没有在 tomcat 日志文件中看到任何错误，使用命令 vmc files [app_name] tomcat/logs/catalina....只是信息与服务器启动相关的消息。

是否有其他选项来调试问题？

谢谢，克里斯蒂安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T04:43:03.977

我会看看丹提到的！您还可以查看日志文件夹以查看那里的文件是否提供更多信息。

```
vmc logs <app-name> 
```

或者

```
vmc files <app-name> logs/stderr.log
vmc files <app-name> logs/stdout.log 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T09:40:49.017

好的，应用程序使用了太多内存，结果 Java 进程被破坏，导致路由器在尝试路由到应用程序时返回 404。

# python - 遍历python中的子列表

> ID：11351502
> 
> 赞同：1
> 
> 时间：2012-07-05T19:47:08.557
> 
> 标签：python, list, iterator

假设我有以下列表：

```
my_list = [2, 3, 4, 1, 44, 222, 43, 22] 
```

如何在不使用 for 循环的情况下为子列表中的所有元素分配一个常量值？就像是：

```
my_list[0:5:1] = 1 # Assign 1 to first 5 elements. This code is wrong since list requires an iterator 
```

具体来说，我想为所有元素分配一个常量值，从索引开始，`i`直到`end`列表的

```
my_list[i:end] = 1 # What I would like to do. The code itself is wrong 
```

关于如何在 python 中以最干净的方式做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T19:50:24.313

有时 2 线比 1 线更好。

```
for i in range(0,5):
    my_list[i] = 0 
```

如果你真的想让一些东西变得模糊：

这是一个在不改变原始数组的情况下完成这项工作的单线器。

```
new_list = [0 if i in range(0,5) else x for x, i in zip(my_list, xrange(len(my_list)))] 
```

您更愿意在未知代码中遇到哪个？或 6 个月后您自己的代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T19:53:20.527

以下应该有效：

```
my_list[i:end] = [1]*(end-i) 
```

例子：

```
>>> def test(my_list, i, end):
...     my_list[i:end] = [1]*(end-i)
...     return my_list
>>> test(range(10), 0, 5)
[1, 1, 1, 1, 1, 5, 6, 7, 8, 9]
>>> test(range(10), 5, 10)
[0, 1, 2, 3, 4, 1, 1, 1, 1, 1]
>>> test(range(10), 3, 8)
[0, 1, 2, 1, 1, 1, 1, 1, 8, 9] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T19:52:19.897

一种可能性是`stuff [0:5] = [1] * 5`。但是，您应该小心，因为如果替换元素的数量错误，这将改变列表的大小。如果这样做`stuff [0:5] = [1] * 6`，您将增加列表的大小（即，在原来有五个原始值的地方放置六个 1）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T19:55:22.760

要转到列表的末尾，只需省略切片的末尾。然后，您可以重复一个列表以分配给它：

```
my_list[i:] = [1] * (len(my_list) - i) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-05T20:40:54.923

这个怎么样？

```
from itertools import repeat

my_list[start:end] = repeat( 1, end - start ) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-05T19:49:39.533

这会起作用吗：

```
my_list = my_list[:i] + [1 for x in xrange(len(my_list) - i)] 
```

# c# - 从 Windows 7 手机绑定到 Web 服务

> ID：11351503
> 
> 赞同：1
> 
> 时间：2012-07-05T19:47:16.507
> 
> 标签：c#, web-services, windows-phone-7, dynamics-crm-2011

我正在为想要通过 Web 服务连接到 Microsoft CRM 2011 的 Windows 7 Phone 制作应用程序。

我之前创建了一个控制台应用程序，并且能够让它毫无问题地发送数据。不过，让它在手机上工作要困难得多。经过多次故障排除后，我发现问题出在我使用手机的绑定中。看来我需要一个**SymmetricSecurityBindingElement**，这在 Windows 手机上不可用。有没有办法不需要这个元素或解决方法？

编辑

这是我对控制台应用程序的绑定，它工作正常。

```
BindingElementCollection bindingElements = new BindingElementCollection();

SymmetricSecurityBindingElement security = new SymmetricSecurityBindingElement();
security.IncludeTimestamp = true;
security.ProtectionTokenParameters = new SspiSecurityTokenParameters();
bindingElements.Add(security);

bindingElements.Add(new TextMessageEncodingBindingElement(MessageVersion.Soap12WSAddressing10, System.Text.Encoding.UTF8));

HttpTransportBindingElement transport = new HttpTransportBindingElement();
transport.MaxBufferSize = Int32.MaxValue;
transport.MaxReceivedMessageSize = Int32.MaxValue;
bindingElements.Add(transport);

CustomBinding binding = new System.ServiceModel.Channels.CustomBinding(bindingElements);
binding.Name = "CustomBinding_IDiscoveryService";
return binding; 
```

这是我对 windows phone 的绑定。它抛出**MessageSecurityException**。

```
BindingElementCollection phoneBindingElements = new BindingElementCollection();

TransportSecurityBindingElement security = new TransportSecurityBindingElement();
security.IncludeTimestamp = true;
phoneBindingElements.Add(security);

phoneBindingElements.Add(new TextMessageEncodingBindingElement(MessageVersion.Soap12WSAddressing10, System.Text.Encoding.UTF8));

HttpTransportBindingElement transport = new HttpTransportBindingElement();
transport.MaxBufferSize = Int32.MaxValue;
transport.MaxReceivedMessageSize = Int32.MaxValue;
phoneBindingElements.Add(transport);

CustomBinding binding = new System.ServiceModel.Channels.CustomBinding(phoneBindingElements);
binding.Name = "CustomBinding_IDiscoveryService"; 
```

# python - python函数没有正确递归（将节点添加到图形）

> ID：11351504
> 
> 赞同：0
> 
> 时间：2012-07-05T19:47:16.610
> 
> 标签：python, graph, recursion, nodes

我遇到了一个罕见的诚实至善的计算机科学问题（与通常的我如何制作这种语言相反，我不经常写 - 足够 - 做什么 - 我 -想要问题），并且真的觉得我缺乏CS学位来改变。

这有点混乱，因为我使用了几个列表的字典，但基本概念是这样的：一个 Twitter 抓取功能，将给定推文的转推添加到图形中，逐个节点，从原始向外构建作者（以追随者关系为边）。

```
for t in RTs_list:
g = nx.DiGraph()
followers_list=collections.defaultdict(list)
level=collections.defaultdict(list)
hoppers=collections.defaultdict(list)
retweets = []
retweeters = []
try:
    u = api.get_status(t)
    original_tweet = u.retweeted_status.id_str
    print original_tweet
    ot = api.get_status(original_tweet)
    node_adder(ot.user.id, 1)
    # Can't paginate -- can only get about ~20 RTs max. Need to work on small data here.
    retweets = api.retweets(original_tweet)
    for r in retweets:
        retweeters.append(r.user.id)
    followers_list["0"] = api.followers_ids(ot.user.id)[0]
    print len(retweets),"total retweets"
    level["1"] = ot.user.id
    g.node[ot.user.id]['crossover'] = 1
    if g.node[ot.user.id]["followers_count"]<4000:
        bum_node_adder(followers_list["0"],level["1"], 2)
    for r in retweets:
        rt_iterator(r,retweets,0,followers_list,hoppers,level)      
except:
    print ""

def rt_iterator(r,retweets,q,followers_list,hoppers,level):
q = q+1
if r.user.id in followers_list[str(q-1)]:
    hoppers[str(q)].append(r.user.id)
    node_adder(r.user.id,q+1)
    g.add_edge(level[str(q)], r.user.id)
    try:
        followers_list[str(q)] = api.followers_ids(r.user.id)[0]
        level[str(q+1)] = r.user.id
        if g.node[r.user.id]["followers_count"]<4000:
            bum_node_adder(followers_list[str(q)],level[str(q+1)],q+2)
            crossover = pull_crossover(followers_list[str(q)],followers_list[str(q-1)])
        if q<10:
            for r in retweets:
                rt_iterator(r,retweets,q,followers_list,hoppers,level)
    except:
        print "" 
```

那里还有一些其他的函数调用，但它们与问题无关。主要问题是从（例如）2 跳节点到 3 跳节点时 Q 如何计数。我需要它为从中心的每个分支构建到最大深度 (10)，而现在我相信它只是为它尝试的第一个分支构建到最大深度。希望这是有道理的。如果没有，在这里输入对我有帮助；我想我只是在某个地方错过了一个循环，但我很难看到。

另外，请忽略各种 dicts 引用 Q+1 或 Q-1，这是我在重构以使其递归之前如何实现它的工件。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:16:00.403

我不完全确定你所说的“中心”是什么意思，但我认为你想要这样的东西：

```
def rt_iterator(depth, other-args):
    # store whatever info you need from this point in the tree
    if depth>= MAX_DEPTH:
        return
    # look at the nodes you want to expand from here
    for each node, in the order you want them expanded:
        rt_iterator(depth+1, other-args) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:17:44.337

想我已经修好了……这样 Q 在不应该增加的时候就不会增加。

```
def rt_iterator(r,retweets,q,depth,followers_list,hoppers,level):
def node_iterator (r,retweets,q,depth,followers_list,hoppers,level):
    for r in retweets:
        if r.user.id in followers_list[str(q-1)]:
            hoppers[str(q)].append(r.user.id)
            node_adder(r.user.id,q+1)
            g.add_edge(level[str(q)], r.user.id)
            try:
                level[str(q+1)] = r.user.id
                if g.node[r.user.id]["followers_count"]<4000:
                    followers_list[str(q)] = api.followers_ids(r.user.id)[0]
                    bum_node_adder(followers_list[str(q)],level[str(q+1)],q+2)
                    crossover = pull_crossover(followers_list[str(q)],followers_list[str(q-1)])
                if q<10:
                    node_iterator(r,retweets,q+1,depth,followers_list,hoppers,level)
            except:
                print ""
depth = depth+1
q = depth
if q<10:
    rt_iterator(r,retweets,q,depth,followers_list,hoppers,level) 
```

# ravendb - RavenDB - 文档参考

> ID：11351506
> 
> 赞同：3
> 
> 时间：2012-07-05T19:47:24.213
> 
> 标签：ravendb, ravendb-studio

我是 RavenDB 菜鸟，试图了解 RavenDB 如何知道将文档链接到另一个文档？

在我看来，它扫描了文档的每个属性，如果属性值与 documentId 匹配，则表明工作室中的引用，即使我并没有真正尝试将其作为引用。

有没有办法避免这种行为？

谢谢，

![RavenDB Studio 文档参考](../Images/3e32f3d149a8fd9769fc16fc85337621.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T22:27:00.710

Juma，这只是一个 UI 特性，它是基于寻找约定的，它对操作没有影响。

# c# - Chrome 显示未定义的 keyCode

> ID：11351507
> 
> 赞同：4
> 
> 时间：2012-07-05T19:47:25.797
> 
> 标签：c#, javascript, asp.net

所以我有一个下拉列表，当用户从列表中选择某些内容并按 Enter 而不是单击时，假设使用所选数据刷新页面。

它在 IE 和 Firefox 中运行良好，但 Safari 和 Chrome 似乎完全忽略了它。

这是我将属性添加到下拉列表的位置：

```
cboContext.Attributes.Add("OnKeyDown", "if (typeAhead(event,'" + cboContext.ClientID + "') == 1) contextPostback();"); 
```

它似乎忽略了 Chrome 和 Safari 中的 OnKeyDown 属性

**编辑：**

根据 Sime 和 Nil 的工作和评论，我发现 Chrome 无法识别 keyCode，它显示为未定义。

我已将 typeAhead() 代码放在[jsFiddle](http://jsfiddle.net/rcMGP/1/)

这是我为 keyCode 声明变量的地方：

```
var charCode = evt.keyCode || evt.which; 
```

有谁知道为什么它会保持未定义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:22:36.227

您可以使用“onchange”属性（另外，或作为“onkeydown”属性的替代品）。

在 Chrome 中，当 SELECT 元素打开并按下 ENTER 时，“onchange”代码将执行。

**现场演示：http:** [//jsfiddle.net/nQhUT/3/](http://jsfiddle.net/nQhUT/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:58:43.503

事件名称区分大小写。该事件应该是“onkeydown”。IE 可能不会强制执行此操作？

```
cboContext.Attributes.Add("onkeydown", "if (typeAhead(event,'" + cboContext.ClientID + "') == 1) contextPostback();"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T17:20:19.383

**编辑：**

~~我不确定 inputBuffer.accumString 在你的 typeAhead 函数中做了什么，当我用小提琴尝试它时它正在破坏代码。~~

如果您尝试使用**onchange**调用 typeAhead 函数，则下面代码中的 charCode 将是未定义的。您只能在跨浏览器的 Keyup/keyDown 上获取 keyCode。请检查[这个](http://www.aspsnippets.com/Articles/Event.keyCode-Demystified.aspx)。

```
var charCode = evt.keyCode || evt.which; 
```

如果你仔细检查你的函数，它只会返回 1 并在 inputBuffer 上执行一些操作，如果按下的键是 enter 或 tab，否则它返回 -1。**如果您可以按照Šime Vidas**的建议让您的函数在**onchange**上运行，而不是 onkeydown/onkeyup，那么它将在浏览器中运行。

# python - 读取 csv 行并为每一行创建列表

> ID：11351508
> 
> 赞同：1
> 
> 时间：2012-07-05T19:47:27.897
> 
> 标签：python

我有一个带有 X,Y 坐标行的文本文件。像这样：

```
0,23.345,-122.456

1,12.546,-118.987

2,67.435,-104.112 
```

如何将这些行带入 python，以便每一行进入时都是它们自己的列表？

每条线都是一对坐标，等于一个点。所以我需要比较第 0 行和第 1 行以及第 1 行和第 2 行，依此类推。我不希望每一行都是一个列表，以便我可以访问它们吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T19:49:19.470

此 Python 模板将导致将每个 .csv 行读入列表列表。

```
import csv
reader = csv.reader(open('mycsv.csv'))
mylines = list(reader) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T19:55:27.440

```
import csv
with open("csvfile.csv", "rb") as f:
  lines = list(csv.reader(f))

>>> lines
[['0', '23.345', '-122.456'], ['1', '12.546', '-118.987'], ['2', '67.435', '-104.112']] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T19:52:11.853

```
matrix = []
line = fileHandle.readline()
while (line) :
     currentList = line.strip().split(",")
     matrix.append(currentList)
     line = fileHandle.readline() 
```

这将以列表列表结束，其中每个内部列表都是行的不同元素的列表。该组的行将是矩阵中的索引（基于 0）。

# xml - 连接到域注册 EPP 服务器

> ID：11351516
> 
> 赞同：1
> 
> 时间：2012-07-05T19:47:50.080
> 
> 标签：xml, ssl, epp

我得到了我的海腿，需要一些指针和一小段连接到 epp 服务器的代码示例。代码示例需要登录并发送一个命令并接收响应。（在 XML 中）。代码可以在 php 或 python 中。

我相信这将为我进一步深入研究并了解有关该主题的更多信息奠定基础/启动。它把我逼到了墙边——以一种很好的方式，因为我想在一天或一千年内解决它。

我已经搜索了好几天，但似乎无法理解找到的信息，现在选择在这里寻求指导。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T09:11:55.120

这是示例 php 脚本

```
<?php

class Epp 
{

var $socket;

public function __construct()
{
}

private $_connected = false;

function connect($host, $port = 700, $timeout = 1, $ssl = true)
{
    if ($this->_connected)
        return true;
    $target = sprintf('%s://%s', ($ssl === true ? 'ssl' : 'tcp'), $host);
    $socket = fsockopen($target, $port, $errno, $errstr, $timeout);
    if (!$socket) {
        return new PEAR_Error("Error connecting to $target: $errstr (code $errno)");
    } else {
        $this->socket = $socket;
        $this->_connected = true;
        return $this->getFrame();
    }
}

function getFrame()
{
    if (feof($this->socket))
        return new PEAR_Error("Connection appears to have closed.");
    $hdr = @fread($this->socket, 4);
    if (empty($hdr)) {
        return new PEAR_Error("Error reading from server: $php_errormsg");
    } else {
        $unpacked = unpack('N', $hdr);
        $answer = fread($this->socket, ($unpacked[1] - 4));
        return $answer;
    }
}

function sendFrame($xml)
{
    return @fwrite($this->socket, pack('N', (strlen($xml) + 4)) . $xml);
}

function disconnect()
{
    return @fclose($this->socket);
}

}

?> 
```

并且有4个函数，connect、getFrame、sendFrame、disconnect。Epp 协议的工作原理如下。首先，您必须连接到服务器。

向服务器发送 xml 请求并从服务器接收 xml 响应。

首先你必须登录到服务器。为此，您必须将登录 xml 发送到服务器。

```
&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?>
<epp xmlns="urn:ietf:params:xml:ns:epp-1.0"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="urn:ietf:params:xml:ns:epp-1.0
      epp-1.0.xsd">
    <command>
        <login>
            <clID><?php echo $username;?></clID>
            <pw><?php echo $password;?></pw>
            <options>
                <version>1.0</version>
                <lang>en</lang>
            </options>
            <svcs>
                <svcExtension>

                </svcExtension>
            </svcs>
        </login>
        <clTRID>12345</clTRID>
    </command>
</epp> 
```

所有请求和响应都是 xml 。你可以从这个网站找到 xmls [https://www.rfc-editor.org/rfc/rfc5732](https://www.rfc-editor.org/rfc/rfc5732)

# c# - 创建可以匹配两个数据网格中的项目的程序的想法

> ID：11351518
> 
> 赞同：0
> 
> 时间：2012-07-05T19:47:56.647
> 
> 标签：c#, algorithm, datagridview, matching, inventory-management

我正在创建一个程序，该程序将分析两个数据网格并找到它们之间存在的可能匹配项。这两个数据网格将保存有关地毯的信息。这两个网格是在两个不同时间进行的库存，它们之间存在很大差异。这些地毯的尺寸可能略有不同，描述也有很大差异。我希望这个程序找到两个网格之间可能的匹配并将它们合并为一个。

我正在寻找有关如何开始真正的编程内容的想法，寻找可能的匹配项。这将是这个程序中最耗时的部分，我不知道从哪里开始。

这将是一个用 C# 编写的 Windows 程序。我有 C# 编程经验，但非常感谢示例和/或主要思想。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:22:42.477

*此答案适用于没有简单答案的数据。如果您有数据密钥，请使用它。*

在编写任何代码之前，我首先会问自己要搜索什么。“匹配”这两者的搜索参数是什么？关键词？你的地毯上有某种标识符吗？也许通过模式？在触摸键盘之前，我会先尝试解决这个问题。按大小搜索可能不是一个好主意。毕竟，两张 8x8 的地毯可能有数百种不同的可能性。

但也许描述之间有一些相似之处。如果描述本身是简单的英语，我会看看我是否找不到删除一些非常常见的单词以及标点符号并用空格替换它们的方法。 **编辑：**还使用 ToLower() 函数调用删除大写

```
List<String> CommonWords; 
foreach(string a in CommonWords) 
{
    DataBaseA.DescriptionString.replace(a, " "); 
    DataBaseB.DescriptionString.replace(b, " ");
} 
```

例如，假设地毯描述 1 如下：“这款地毯是任何房间的绝妙补充，红色花卉图案与米色质朴外观相结合”

地毯描述 2 是：“时尚质朴的花卉图案，搭配现代的红色和米色”

运行 'common word remover' 会删除，比如'A'、'with'、'and'、'this'、'is'、'to'

你会拥有： 地毯美妙的添加任何房间红色花卉图案结合米色质朴的外观

和

“时尚质朴的花卉图案完整的当代红米色”

然后您可以遍历字符串并进行字符串匹配，如果匹配超过一定数量，则触发“数据网格”匹配。

```
string[] ArrayStringA = DataBaseA.DescriptionString.split(" ");
string[] ArrayStringB = DataBaseB.DescriptionString.split(" ");
int DataCounter = 0;

for(int i = 0; i < ArrayStringA.Length; i++)
{
    for(int j = 0; j < ArrayStringB.Length; j++)
    { 
        if(ArrayStringB[j] == ArrayString[i])
            DataCounter++;
    }
}

if(DataCounter > 4) //Match 
```

现在请记住，**这并不漂亮**。这样做可能会花费大量时间来比较和维护，这绝不是万无一失的。但是，这是一个想法，希望您至少可以使用其中的一点点来提出更好的解决方案。

**编辑二：**当你的程序运行时，我不认为这是你想要一遍又一遍地发生的事情。所以我要做的是运行程序并构建匹配的 DataGrid。然后，一旦您找到匹配项并且一切看起来都不错，***请将唯一标识符键添加到您的新数据***中。通过这种方式，您将能够准确地知道*未来*哪个是哪个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:58:35.180

真的，这些数据将在数据网格中这一事实并不重要。数据网格将由列表或表格支持，而这个“源”数据将是您必须处理的。

回答这个问题很困难，因为您承认您不知道如何比较数据。在我看来，这些是重要的问题：

1.  这两个来源是否按列匹配？
2.  请问**KEY**，如果没有那么这提供了一个简单的匹配方法。如果不是，那么可以使用哪些字段进行匹配？
3.  对新数据集的更新是否*可信*，如果不可信，为什么？
4.  你为什么要进行这种匹配？是定期的还是一次性的？

如果 1-3 为真，那么答案很简单。遍历一个表，在另一个表中找到匹配的键，并使用您的逻辑（可能是更新时间）来确定哪些信息是准确的。

# mongodb - 如何识别流星内运行的minimongo的端口？

> ID：11351527
> 
> 赞同：5
> 
> 时间：2012-07-05T19:48:28.013
> 
> 标签：mongodb, meteor

我是流星新手。我正在开发一个应用程序，它利用了流星包附带的 mongo db。流星在 3000 端口下运行，但我想知道 mini mongo 在哪个端口下运行。我正在使用工具 MongoVUE 来查看在端口中运行的 mongo 下的所有集合。当我运行独立的 mongo 时，我能够查看 mongo 集合，因为我知道它的端口，但是对于在流星下运行的这个迷你 mongo，我无法知道端口。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-05T20:27:51.650

Mingomongo 在浏览器中运行，它是一个客户端 Javascript 库。它在内存中运行，它没有端口。它使您能够使用 MongoAPI 样式语法在客户端应用程序中查询服务器发布的数据。

获取在服务器上运行的 Mongo 实例的连接字符串（例如，如果您想从不同的客户端连接，或者只查看端口号）运行

```
meteor mongo -U 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-19T07:25:02.557

在我的 Fedora 系统上使用`ps auxww|grep mongo|grep meteor`我得到：

```
jwulf    20635  0.3  2.6 150800 41336 pts/1    Sl+  17:07   0:01 /usr/lib/meteor/mongodb/bin/mongod --bind_ip 127.0.0.1 --smallfiles --port 3002 --dbpath /home/jwulf/tools/leaderboard/.meteor/local/db 
```

所以它在我系统的端口 3002 上运行。从允许我`mongo`连接`--port 3002`到 Meteor mongo 服务器并将数据复制到数据库中。

您还可以通过`meteor mongo`在 Meteor 应用程序目录中运行来连接到本地实例。

数据库本身在`<app-name>/.meteor/local/db`我的 Fedora 系统上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-12T16:04:25.447

在流星 0.8.3 中，它使用端口 3001

所以我跑：

mongo localhost:3001 使用使用流星

我很高兴……感谢 Sitapati Das 的上述命令……

# asp.net - UI 是否应该引用存储库？

> ID：11351529
> 
> 赞同：1
> 
> 时间：2012-07-05T19:48:29.377
> 
> 标签：asp.net, project-structure

我有四个程序集；用户界面、业务逻辑、数据访问、通用。

用户界面引用了 DataAccess 中的存储库，这是不好的做法吗？我是否应该在 BusinessLogic 中创建传递方法以使 UserInterface 不耦合到 DA 程序集？

即使在 BusinessLogic 方法只调用相关的 Repository 方法什么都不做的情况下？

还是我很悬？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:08:09.703

rather than think of the UI talking to the repository, think of implementations depending on abstractions. in this instance the UI depends on `IRepository`. How `IRepository` is implemented doesn't matter.

and putting this all into separate assemblies is overkill. just use namespaces to segregate your code. it will be much easier to maintain.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:57:45.863

如果您正在尝试进行领域驱动设计，那么在您考虑在 UI 中使用它之前，请先了解存储库的作用。很好的解释在这里[http://devlicio.us/blogs/casey/archive/2009/02/20/ddd-the-repository-pattern.aspx](http://devlicio.us/blogs/casey/archive/2009/02/20/ddd-the-repository-pattern.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T20:06:51.110

我认为你缺少一个图层。实体层或数据传输层。

这绝对不是一个好的实践，UI 必须了解你的 DAL，这就是你有你的业务层的原因。

我认为你应该用经典的方式 UI - BL - DAL 和向后应该是相同的，使用数据传输对象

始终在这些层之间使用 DTO，将对象从 UI 传输到 BL，从 BL 传输到 DAL，然后反向传输。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T20:00:55.203

我认为分层结构的主要原因是“关注点分离”。SoC 基本上是提供松散耦合的。所以在 DAL 中引用 UI 并不是一件好事。

另一方面，UI 应该处理用户交互（而不是直接从 DAL 调用）。BL 应该负责验证并调用 DAL 方法。DAL 是最后一步，它可以根据 SQL 方面验证数据，然后处理 SQL 语句。

# jqgrid - 寻呼机按钮不显示，但寻呼机在 JQGrid 中显示

> ID：11351533
> 
> 赞同：1
> 
> 时间：2012-07-05T19:48:37.613
> 
> 标签：jqgrid, pager

出于某种原因，我的寻呼机显示在我的网格下方，但没有显示导航到下一页、上一页、第一页或最后一页的按钮。我知道显示了寻呼机，因为显示了 rowList 属性，并且我可以选择要显示的条目数。

这是 JQGrid 声明代码：

```
<script type="text/javascript">
    jQuery(document).ready(function(){ 
    jQuery("#Table").jqGrid({
      jsonReader: {
           root:"rows",
           page:"page",
           total:"total",
           records:"records",
           repeatitems:false,
           cell:"",
           id:"id",
           userdata:"userdata"
         },
      url:'project/selectTable/loadTableInfo.do',
      datatype:'json',
      colNames:['Name','Size','Delete'],
      colModel:[
      {name:'name',index:'name', sorttype:'text'}, 
      {name:'size',index:'size', sorttype:'int'},
      {name:'delete',index:'delete',width:20, stype:'select'}],
      pager:'#pager',
      rowNum:50,
      rowList:[10,25,50,75,100],
      viewrecords:true,
      autowidth:true,
      height:"auto",
      pgbuttons:true,
      pginput:true,
      loadComplete: function(){ 
        var ids = jQuery("#Table").getDataIDs(); 
        for(var i=0;i<ids.length;i++){ 
          var cl = ids[i]; 
          X = "<input style='height:22px;width:20px;' type='button' value='X' onclick=deleteRow("+cl+");>" 
          jQuery("#Table").setRowData(ids[i],{delete:X});
          }
      }, 
      caption:'Info'
    });
  });
</script>
<div id="gridContainer">
  <table id="Table"></table> 
  <div id="pager"></div> 
</div> 
```

# objective-c - 有没有办法将方法作为块传递？

> ID：11351534
> 
> 赞同：10
> 
> 时间：2012-07-05T19:48:39.313
> 
> 标签：objective-c, objective-c-blocks, afnetworking

我讨厌积木。它们旨在使代码更简洁，但我找不到更难看的东西。例如，使用 AFNetworking：

```
AFJSONRequestOperation* operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request
             requestsuccess:^(NSURLRequest *request, NSURLResponse *response, id JSON) {
  // Some
  // very
  // long
  // (and as ugly as blocks)
  // processing
}
                    failure:^(NSURLRequest *request, NSURLResponse *response, NSError *error, id JSON )) {
  // Failure code
}] 
```

这样的事情会好得多：

```
AFJSONRequestOperation* operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request
             requestsuccess:@selector(requestSuccess:response:json:)
                    failure:@selector(requestSuccess:response:error:)] 
```

那么，是否可以将方法的选择器用作块？如果没有，我怎样才能使块代码更好？

这让我很恼火，因为这些块似乎是 Objective-C 编程的未来，它们只是不可读。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T20:13:59.647

所以你认为块结构使代码更难阅读？我认为它们有时可以使事情更容易理解，尤其是在异步上下文中，例如在网络代码中。

为了更容易阅读，您可以将块分配给变量。（实际上块是objective-c 对象。）

例子：

```
typedef void(^SuccessBlock)(NSURLRequest *request, NSURLResponse *response, id JSON);

SuccessBlock successBlock = ^(NSURLRequest *request, NSURLResponse *response, id JSON) {
    // code block
};

AFJSONRequestOperation* operation;
operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request
                                                            success:successBlock
                                                            failure:nil]; 
```

您还可以在块内调用单个处理程序方法以使其保持小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T20:24:05.903

短块是好的，过长的不是，你划线的地方当然是个人喜好......

对块使用方法并不难（反之则更具挑战性）。如果您想使用一种方法，最简单的方法是：

```
- (void) requestSuccess:(NSURLRequest *)request
               response:(NSURLResponse *)response
                   json:(id)JSON
{
   // Some
   // very
   // long
   // (and as ugly as blocks)
   // processing
}

- (void) requestFailure:(NSURLRequest *)request
               response:(NSURLResponse *)response
                  error:(NSError **)error
                   json:(id)JSON
{
   // Failure code
}

...

AFJSONRequestOperation* operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request
         requestsuccess:^(NSURLRequest *request, NSURLResponse *response, id JSON)
         {
            [self requestSuccess:request response:response json:JSON];
         }
         failure:^(NSURLRequest *request, NSURLResponse *response, NSError *error, id JSON ))
         {
            [self requestFailure:request response:response error:error json:JSON];
         }] 
```

您可以使用宏走得更远，甚至`performSelector`/`NSInvocation`有趣 - 是否值得取决于您。

您还可以在调用本身之前移动块定义，如下所示：

```
var = block;
[object method:var]; 
```

您选择哪种方法是风格问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T20:13:08.493

您可以剥离块，使它们不是方法调用的内联参数。它仍然涉及一些块丑陋，但仍然提高了一些可读性：

```
void (^successBlock)(NSURLRequest *request, NSHTTPURLResponse *response, id JSON);

successBlock = ^ (NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
  // Some
  // very
  // long
  // (and as ugly as blocks)
  // processing
};
//do same for failure block as "failureBlock"
...

AFJSONRequestOperation* operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request
             requestsuccess:successBlock
                    failure:failureBlock]; 
```

# ruby-on-rails - 使用 Rails 向隐藏字段添加值

> ID：11351535
> 
> 赞同：0
> 
> 时间：2012-07-05T19:48:43.247
> 
> 标签：ruby-on-rails, hidden-field, embedded-ruby

我正在研究一种方法来构建一个名为派对的活动的客人名单。每个受邀客人的 user_id 存储在一个隐藏字段中，以空格分隔。

```
<%= hidden_field_tag 'guestlist', nil, :class => 'guest_list' %> 
```

当用户邀请新客人时，客人的 ID 将添加到该字段并存储。

我试图找出一种方法，以便当用户编辑现有聚会时，已邀请客人的 ID 会显示在隐藏的 guest_list 字段中。

有没有办法用嵌入式 Ruby 做到这一点？类似于以下内容：

```
<% @party.guests.each do |guest| %>
 Do something here
<% end %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:58:48.317

试试这个（为了便于阅读，分两步）：

```
<% guest_ids = @party.guests.map(&:id).join(",") %>
<%= hidden_field_tag 'guestlist', guest_ids, :class => 'guest_list' %> 
```

第一行将调用`.id`每个客人，然后将它们收集在一个数组中（如`[1, 4, 12]`），然后`.join`将它们放入一个字符串中，它将使用`","`来分隔它们。

**编辑**这`.map(&:id)`和说的一样：

```
@part.guests.map do |guest|
    guest.id
end 
```

但它被浓缩为那个`&:id`。这`.id`显然是我们要调用的方法名称以及我们要收集其结果的方法，& 基本上将其转换为块。您可以[阅读这篇文章](http://www.potstuck.com/2011/08/06/ruby-symbols-instead-of-blocks/)以获取更多信息，或者更好地阅读[这篇 SO 帖子](https://stackoverflow.com/questions/1961030/ruby-ruby-on-rails-ampersand-colon-shortcut)。

# c - OpenGL：每个图元的顶点属性数组？

> ID：11351537
> 
> 赞同：5
> 
> 时间：2012-07-05T19:48:45.860
> 
> 标签：c, opengl

我想知道是否有可能在 OpenGL 中（通过扩展或其他方式）有一个由`glVertexAttribPointer`类型函数指定的属性数组，该类型函数为每个基元（或 N 个顶点）推进一个而不是每个顶点推进一个？

例如，如果我有一个具有纯色的三角形数组，我必须为每个顶点重复相同的颜色数据，我想要的是沿着这些线：

```
struct pos {
    uint8_t x, y;
} positions[NUM_VERTICES];

struct col {
    uint8_t r, g, b;
} colors[NUM_VERTICES / 3]; 
```

当两个数组都提交给 OpenGL并使用单个元素进行渲染时`colors`，每 3 个连续元素重复使用数组的一个元素`positions``glVertexAttribPointer``glDrawArrays(GL_TRIANGLES, ...);`

我找到了`ARB_instanced_arrays`扩展，它提供了`glVertexAttribDivisorARB`起初看起来很有希望的功能，但我认为它不像我描述的那样工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T20:03:04.747

这本质上是[这个关于多索引渲染](https://stackoverflow.com/questions/11148567/rendering-meshes-with-multiple-indices)的问题的另一种形式（它是不同的，这就是为什么我不称它为重复）。简单回答是不。不太简单的答案是自己进行访问和索引。

# javascript - 管理 GUI：我应该使用 Bootstrap 吗？

> ID：11351540
> 
> 赞同：-1
> 
> 时间：2012-07-05T19:49:03.293
> 
> 标签：javascript, html, css, twitter-bootstrap, wijmo

我需要制作一个具有许多功能（如列表、表单、导航等）的管理 GUI。

我查看了 twitter Bootstrap，这看起来非常好，但它缺少一些我必须合并的功能。我可以为 Bootstrap 集成 Jquery，这会有所帮助，但我的解决方案中的所有（缩小的）资源文件都超过 250KB。

我查看了一些商业产品，比如我也在考虑的 Wijmo，但我担心我会被困在某个地方。ExtJS 也是我正在考虑的一个建议选项。

任何人都可以为管理 GUI 提供一些替代的 CSS3 + Javascript (jquery) + HTML5 框架吗？只需要支持新的浏览器，ie6 - ie8 不需要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:56:00.167

Twitter Bootstrap 非常适合制作网站，对于管理 GUI，我会查看 Javascript 应用程序框架，例如[ExtJS](http://www.sencha.com/products/extjs/)。

# html - 获取asp.net mvc中禁用下拉的值

> ID：11351554
> 
> 赞同：24
> 
> 时间：2012-07-05T19:50:20.913
> 
> 标签：html, asp.net-mvc, post, drop-down-menu

我有一个 ASP.NET MVC 应用程序。我的页面中有多个下拉列表（HTML SELECT），我必须禁用它们，因为用户继续一一选择它们。当用户将其发布回控制器时，我得到 null 作为函数（操作方法）参数。我搜索并发现 HTML 不会在表单数据中发送禁用字段的值。用 readonly 替换 disabled 属性是行不通的，因为它会使下拉菜单工作。

随着用户的继续，我正在使用 javascript 动态生成下拉列表。所以没有一个下拉菜单，但用户想要多少就多少。

有人可以告诉我应该如何获得这些值吗？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-07-05T19:53:29.217

一种可能性是制作下拉列表`disabled="disabled"`并包含一个具有相同名称和值的隐藏字段，这将允许将此值发送到服务器：

```
@Html.DropDownListFor(x => x.FooId, Model.Foos, new { disabled = "disabled" })
@Html.HiddenFor(x => x.FooId) 
```

如果您必须使用 javascript 动态禁用下拉菜单，则只需在禁用下拉菜单后将当前选择的下拉列表值分配给隐藏字段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T19:55:47.470

这是禁用控件的默认行为。我建议您添加一个隐藏字段并在此隐藏字段中设置 DropDownList 的值并使用它。

就像是：

```
//just to create a interface for the user
@Html.DropDownList("categoryDump", (SeectList)ViewBag.Categories, new { disabled = "disabled" });
// it will be send to the post action
@Html.HiddenFor(x => x.CategoryID) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-20T15:51:21.720

您还可以创建自己的 DropDownListFor 重载，它接受一个`bool disabled`参数并为您完成繁重的工作，这样您的视图就不会被`if disablethisfield then ...`.

这些行中的某些东西可以做：

```
public static MvcHtmlString DropDownListFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression, IEnumerable<SelectListItem> selectList, bool disabled)
{
    if (disabled)
        return MvcHtmlString.Create(htmlHelper.HiddenFor(expression).ToString() + htmlHelper.DropDownListFor(expression, selectList, new { disabled="disabled" }).ToString());
    else
        return htmlHelper.DropDownListFor(expression, selectList);
} 
```

仅 DropDownListFor 就有 6 个重载，所以它是很多猴子编码，但它最终得到了回报。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-22T08:12:00.920

创建一个具有指定 ID 的隐藏字段并在禁用下拉列表之前设置它。

> 在 MVC 中，

```
@Html.DropDownListFor(x => x.FooId, Model.Foos)
@Html.HiddenFor(x => x.FooId, new { @id = "hdnFooId" }) 
```

> 在 jQuery 中，

```
function handleDropDownListFooChange(){
    // Get the selected value from drop-down-list before disabling it.
    var selectedFooId = $('#FooId').val();
    $('#FooId').prop("disabled", "disabled");
    $("#hdnFooId").val(selectedFooId);

    // Load any data the depends on selected FooId using `selectedFooId` variable.
} 
```

选定的值将自动绑定到`Model.FooId`。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-11-11T16:20:26.067

在提交调用之前 $('#FooId').removeAttr('disabled')

# mysql - 使用 MYSQL 扩展连接表中的值

> ID：11351559
> 
> 赞同：1
> 
> 时间：2012-07-05T19:50:50.110
> 
> 标签：mysql

我目前有一个浓度表，它链接到一个元素表。有浓度表

```
|conc_id|element_id|conc| 
```

和和元素表

```
|element_id|symbol| 
```

浓度表只有每个 conc_id 具有非零浓度的 element_id。我要做的是创建一个查询，该查询将为每个浓度 ID 按顺序列出所有元素及其浓度，无论它们是否非零。我已经以许多越来越复杂的方式（从 a 开始`RIGHT JOIN`）尝试了这个，但是当其中没有那个元素时，它总是输出一个 NULL conc_id 。我正在寻找的输出是这样的：

```
|conc_id|element_id|symbol|conc|
|1      |1         |H     |1.2 |
|1      |2         |He    |NULL|
|1      |3         |Li    |2.3 |
              ...
|3      |1         |H     |4.5 |
|3      |2         |He    |NULL|
|3      |3         |Li    |NULL|
              ... 
```

等等。有没有办法在没有 NULL conc_id 的情况下做到这一点？

提前感谢您的任何帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T20:19:46.710

首先，您必须构建一个包含`conc_id`和之间所有组合的表`element_id`：

```
SELECT DISTINCT conc_id, elements.element_id FROM concentrations, elements; 
```

这为您提供了下表：

```
| conc_id | element_id |
|       1 |          1 |
|       1 |          2 |
|       1 |          3 |
            ...
|       3 |          1 |
|       3 |          2 |
|       3 |          3 |
            ... 
```

一旦有了这样的表格，将其与浓度和元素连接起来应该相当简单。例如：

```
SELECT combinations.conc_id, combinations.element_id, symbol, conc
FROM 
  (SELECT DISTINCT conc_id, elements.element_id FROM concentrations, elements) AS combinations
  LEFT JOIN concentrations ON (combinations.conc_id = concentrations.conc_id AND combinations.element_id = concentrations.element_id)
  LEFT JOIN elements ON (combinations.element_id = elements.element_id); 
```

结果：

```
| conc_id | element_id | symbol | conc |
|       1 |          1 | H      |  1.2 |
|       1 |          2 | He     | NULL |
|       1 |          3 | Li     |  2.3 |
                  ...
|       3 |          1 | H      |  4.5 |
|       3 |          2 | He     | NULL |
|       3 |          3 | Li     | NULL |
                  ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:07:58.727

```
select conc_id, conc.element_id, symbol, concentration from concentration_table as conc 
join element_table as elem on conc.element_id = elem.element_id
order by conc.conc_id asc 
```

这给了我这张桌子：

```
conc_id     element_id  concentration   element_id  symbol 
1           1                  1.2           1       H
1           2                  0             2       He
1           3                  2.3           3       Li
3           1                  4.5           1       H
3           2                  0             2       He
3           3                  0             3       Li 
```

这些是起始表：

元素表：

```
element_id    symbol 
1               H
2               He
3               Li 
```

浓度表：

```
conc_id        element_id        concentration 

1                1                1.2
1                2                0
1                3                2.3
3                1                4.5
3                2                0
3                3                0 
```

编辑：编辑查询以获得请求的正确表值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T19:58:31.200

老实说，我认为最好的方法是在 conc 列中用零值实际填充缺失的数据。否则，您正试图破解它以显示您实际上没有的数据，并且它比保持空值更切实......

当然，假设没有性能考虑会阻碍这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T20:20:50.467

假设您在某处没有所有 conc_id 的简单列表，您可以尝试以下操作：

```
SELECT c.conc_id, e.element_id, e.symbol, c2.conc

FROM
(SELECT DISTINCT conc_id FROM concentration c) c
INNER JOIN element e
LEFT JOIN concentration c2 ON c2.conc_id = c.conc_id AND c2.element_id = e.element_id

ORDER BY c.conc_id, e.element_id 
```

逻辑是：

1.  获取所有唯一 conc_id 派生表 c 的列表
2.  对元素进行交叉连接（对于 c 的每一行，列出所有元素行）
3.  左连接反对完整的浓度表。

如果您有另一个包含所有 conc_id 的表，则可以完全避免派生表。

# android - 导出 Android 应用程序到底有什么作用？

> ID：11351562
> 
> 赞同：5
> 
> 时间：2012-07-05T19:51:02.623
> 
> 标签：android, eclipse, build, release, apk

[http://developer.android.com/tools/publishing/preparing.html](http://developer.android.com/tools/publishing/preparing.html)上的说明表明我应该先导出我的 android 应用程序，然后再将其发布给公众。导出中执行的步骤是什么？

以下是我所知道的：

1.  <Application> 中的 android:debuggable 在 AndroidManifest.xml 中设置为 false
2.  APK 由开发者的（我的）密钥签名，而不是内置的调试密钥
3.  zipalign 在该签名的 APK 上运行

    我在我的 AndroidManifest.xml 中手动将 android:debuggable 设置为 false，并比较了调试和导出的 apk。这些是唯一不同的文件：

    `Binary files ../../release/x//classes.dex and x/classes.dex differ`
    `Binary files ../../release/x//META-INF/CERT.RSA and x/META-INF/CERT.RSA differ`
    `diff -r ../../release/x//META-INF/CERT.SF x/META-INF/CERT.SF`
    `diff -r ../../release/x//META-INF/MANIFEST.MF x/META-INF/MANIFEST.MF`

    那么我上面的清单是否包括所有内容？或者不同的 classes.dex 是否表明调试和导出的 apk 之间存在其他一些差异？

    感谢下面错误 454 的回答，我在每个 apk 中的 classes.dex 文件上运行了 baksmali，我发现了一个不同之处：

    `diff -r out/xx/xx/xx/BuildConfig.smali ../../../release/x/out//xx/xx/xx/BuildConfig.smali`
    `7c7`
    `< .field public static final DEBUG:Z = true`
    `---`
    `> .field public static final DEBUG:Z`

    所以我想我可以在这个列表中添加第四项：

4.  在 BuildConfig 类 (gen/.../BuildConfig.java) 中，DEBUG 设置为 false。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T20:07:30.447

除了您列出的内容之外，proguard 还在导出期间运行。

如果您对 classes.dex 差异的性质非常好奇，您可以获取[baksmali](http://code.google.com/p/smali/downloads/list)，解压缩您的 apk 并反编译 classes.dex 文件：

```
java -jar baksmali-1.3.3.jar classes.dex 
```

这将创建一个 out/ 文件夹，其中包含您可以在旧/新之间进行区分的内容。

BuildConfig.DEBUG 标志不同的原因是因为您导出了发布版本与调试版本，如[SDK 发行说明修订版 17](http://developer.android.com/tools/sdk/tools-notes.html)中所述：

> 添加了一项功能，允许您仅在调试模式下运行某些代码。构建现在会生成一个名为 BuildConfig 的类，其中包含一个根据您的构建类型自动设置的 DEBUG 常量。您可以检查代码中的 (BuildConfig.DEBUG) 常量以运行仅调试功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T17:53:11.000

构建会发生许多步骤，无论目标是`debug`还是`release`. 这不是一个直接的答案，但我建议看看`android-sdk/tools/ant/build.xml`

打开文件后，搜索`target name="release"`. 您将看到该`depends`属性列出了将被调用的同一文件中的其他目标。您可以将目标与目标进行`release`比较`debug`。在每个目标内部，您可以具体查看运行的内容（例如 中的一些实用程序`android-sdk/platform-tools`），以及确定是否运行的内容。

您还可以查看在目标调用期间将哪些参数传递给外部实用程序，这使您可以阅读有关实用程序的这些参数的文档，以具体了解特定步骤发生的情况。

需要注意的是，虽然您可能在 eclipse 中导出应用程序，但研究 ant build.xml 提供了一种方法来系统地识别将要为完整构建执行的每个步骤。

举例说明这可能会变得多么复杂，如果您查看 target `-set-release-mode`，您会看到一个实例，您可以在其中生成一个使用发布密钥而不是调试密钥签名的调试包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T19:58:31.530

> 或者不同的 classes.dex 是否表明调试和导出的 apk 之间存在其他一些差异？

即使使用相同的代码，生成的 classes.dex 也不必与以前编译的版本是二进制相同的。这是由于编译器优化代码 AFAIK 的不同方式。

# sql - 如何将此 SQL 查询转换为 DQL？

> ID：11351563
> 
> 赞同：0
> 
> 时间：2012-07-05T19:51:07.643
> 
> 标签：sql, doctrine-orm

我在尝试将此 SQL 查询转换为 DQL 查询时遇到了很多困难（我使用的是 Symfony2）。

`SELECT d.* FROM Document d JOIN DocumentType dt ON dt.id = d.document_type_id WHERE (d.dateFinal - INTERVAL dt.renewal SECOND) > NOW();"`

非常感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:05:50.117

*   您需要使用您`Document`和`DocumentType`类的字段，而不是数据库字段。

*   通过命名文档的[关联字段来完成](http://doctrine-orm.readthedocs.org/en/latest/reference/working-with-associations.html)[连接](http://doctrine-orm.readthedocs.org/en/latest/reference/dql-doctrine-query-language.html#joins)（类似于）`d.documenttype`

*   对于那些 MySQL 日期函数：至少据我所知，您需要编写[自定义 DQL 函数](http://doctrine-orm.readthedocs.org/en/latest/cookbook/dql-user-defined-functions.html?highlight=interval)。在该链接后面有一个`INTERVAL`函数示例。这可能是您想要执行本机 SQL 查询的地方。

```
SELECT d 
FROM MyProject\Model\Document d
    JOIN d.documenttype
WHERE [...your own DQL functions here...] 
```

# powershell - 如何强制调用命令的 STDOUT 调用 cmd.exe 的 STDOUT？

> ID：11351571
> 
> 赞同：1
> 
> 时间：2012-07-05T19:52:08.143
> 
> 标签：powershell, windows-7, stdout, powershell-2.0, cmd

上下文：Oracle Enterprise Manager 具有“执行主机命令”的功能。如果在该功能中输入“dir c:\temp”，则输出窗口会回显该命令，然后显示目录列表。如果进入该功能，我输入“powershell dir c:\temp”，输出窗口仅显示 echo'd 命令。没有目录列表。如果在目标机器上我在两种情况下都输入这两个命令，我会得到 echo'd 命令，后跟目录列表。

我假设我在客户端的 cmd.exe 窗口中看到的内容混合了两个标准输出流：一个来自 cmd.exe 本身，一个来自调用的进程（powershell dir c:\temp）。Oracle 的东西似乎只识别 cmd.exe 的标准输出。

有什么方法可以强制调用进程中的标准输出位于 cmd.exe 的标准输出流中，以便 Oracle 能够识别它并且我正在尝试构建的东西可以工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:50:17.337

我认为您不能将一个程序的输出直接通过管道传输回父 cmd.exe 的 STDOUT - 假设这就是 Oracle 在某个级别上所做的事情。

话虽如此，您可以尝试以下聪明的方法：

```
cmd /c "powershell -Command ""& echo Hello" > %TEMP%\a.txt & TYPE %TEMP\a.txt 
```

基本上，这是从 PowerShell 捕获输出，将其放置在一个临时文件中，然后将该文件转储回 cmd.exe 中的 STDOUT。一个不错的方法是`& DEL %TEMP%\a.txt`在命令末尾使用 a 清理临时文件。

您可能需要使用命令行来解决 Oracle 如何传递事物的任何怪癖 - 我的猜测是它是`cmd.exe /c`直接调用的，因此您可能可以忽略该部分。

# sql - 删除ms access中的类似条目

> ID：11351577
> 
> 赞同：0
> 
> 时间：2012-07-05T19:52:23.917
> 
> 标签：sql, ms-access

我有一个这样的 ms 访问 mdb 文件：

表主要：

```
int recordID
int status
int placement
bool @private
string category
string note
string description
string dueDate
bool completed
int priority
byte[] blob
bool repeatOnCompleteDate
string completeDate
bool alarmSet
string alarmTime
int alarmAdvance
string repeatStartDate
string repeatInfo 
```

我想删除描述+注释相同的重复条目，因此只保留一个具有相同描述+注释内容的条目。如果有两个或多个重复项，其中某些条目的类别为 0（注意它是一个字符串），则删除它而不是类别不等于 0 的那个。

Fi。

```
Desc - Note - Cat
Hello - Test - 0
Hello - no - 3
Hello - Test - 0
Hello - Test - 4
Hello - Test - 0 
```

然后应该保留一个带有 Note Test 和 Category 4 的 Desc Hello。

我发现

```
delete from MyTable
where uniqueField not in
(select min(uniqueField) from MyTable T2
where T2.dupField=MyTable.dupField) 
```

将其转换为

```
delete from Main where Category not in (select min(Category) from Main T2 where T2.Description=Main.Description) 
```

但这不起作用。

您推荐哪个 MSACCESS SQL 命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:40:34.700

网上有很多可用的资源，您可能会[在此处](http://www.techrepublic.com/article/eliminate-duplicate-records-with-this-built-in-access-query/1043732)或[此处](http://office.microsoft.com/en-us/access-help/find-eliminate-or-hide-duplicate-records-in-access-HA001034558.aspx)看到。您也可以通过如下查询来做到这一点

```
DELETE
FROM MyTable
WHERE ID NOT IN
(
SELECT MAX(ID)
FROM MyTable
GROUP BY DuplicateColumn1, DuplicateColumn2, DuplicateColumn3) 
```

# c - 如何将 Apache 模块（处理程序）限制为虚拟主机（vhost）

> ID：11351582
> 
> 赞同：0
> 
> 时间：2012-07-05T19:52:50.133
> 
> 标签：c, apache-modules

我有一个 apache 模块，它在`ap_hook_post_read_request`满足某些条件时使用钩子执行内部重定向。我想将此处理程序限制为单个虚拟主机，但目前它会在所有虚拟主机上触发（有很多）。httpd.conf 配置仅限于`LoadModule`指令。我已经尝试`SetHandler handlername`在虚拟主机和`SetHandler None`主配置中使用，但处理程序仍会在对其他虚拟主机的请求时被调用。该模块还注册了`ap_register_output_filter`钩子，但输出过滤器除了删除自身并继续传递控制之外不执行任何操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T05:31:02.903

我在虚拟主机中创建了一些自定义配置。我在模块中查找此配置，如果没有配置则返回，因此这实际上允许我将模块限制为虚拟主机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:18:30.233

尝试这个：

```
# VirtualHost1 = localhost:80

<IfModule mod_weblogic.c>
<VirtualHost 127.0.0.1:80>
DocumentRoot "C:/test/VirtualHost1"
ServerName localhost:80
</VirtualHost>
</IfModule> 
```

# mips - ld 如何决定重定位类型 MIPS GPREL16 的偏移量？

> ID：11351583
> 
> 赞同：2
> 
> 时间：2012-07-05T19:52:58.923
> 
> 标签：mips, ld, elf

我正在为 MIPS32 架构编写运行时链接器，但 GPREL16 重定位类型存在问题。例如，编译器/汇编器输出带有如下指令的可重定位对象：

```
ff838018        sd      v1,-32744(gp) 
```

这里涉及的符号属于 .sbss 段，并设置为运行时地址 0x12b119e8。假设 _gp 是 0x12b12220，并且 .sbss 部分从 0x12b11868 开始。（这些值是从目标 ELF 对象中读取的。）

被ld重定位后，指令变为：

```
ff83f7c8        sd      v1,-2104(gp) 
```

我的问题是：ld如何计算偏移量0xf7c8？我的猜测是 0xf7c8 是由 _gp、.sbss 地址和原始偏移量 0x8018 计算得出的。而且我相信相关代码在binutils/src/bfd/elf32-mips.c的例程_bfd_mips_elf_gprel16_reloc中。

但我无法弄清楚这是如何计算的。有人可以帮忙吗？

谢谢和问候，-清莱

# java - Netbeans GUI 和非静态方法

> ID：11351584
> 
> 赞同：1
> 
> 时间：2012-07-05T19:52:59.233
> 
> 标签：java, user-interface, netbeans, non-static

我正在尝试制作一个有 3 个课程的应用程序。控制器（主类）、SerialHandler 和 MainWindow，它是使用 NetBeans Gui Builder 创建的 JFrame 窗体。

```
public class Controller {
    SerialHandler serialHandler;
    MainWindow mainWindow;
    /**
    * @param args the command line arguments
    */
    public static void main(String[] args) {
        // TODO code application logic here
        Controller controller = new Controller();
        controller.initializeSystem(controller);
    }
    public void initializeSystem(Controller _controller){
        mainWindow = new MainWindow(_controller);
        mainWindow.setVisible(true);
    }
    public void anotherMethod(){
        mainWindow.setMyLabelText("Hello");
    }
} 
```

所以问题是，如果我这样做并且来自 SerialHandler 类的事件调用 anotherMethod()，则 setMyLabelText 方法不起作用，但如果我从 initializeSystem() 调用它；有用。

现在，如果我在主窗口中声明主窗口，则从另一个方法（）中看不到主窗口实例。

如果我在 main 之外声明 mainWindow 对象并尝试从 main 上下文中使用它的方法，我不能因为 mainWindow 对象已在非静态上下文之外声明。

任何人都可以帮助我或至少指出我正确的方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:15:41.517

您的代码存在设计不一致：

```
 public static void main(String[] args) {
        // TODO code application logic here
       Controller controller = new Controller();
       controller.initializeSystem(controller);
   }
   public void initializeSystem(){
       mainWindow = new MainWindow(_controller);
       mainWindow.setVisible(true);
   } 
```

您正在创建作为参数传递给它的控制器，`initializeSystem`这是多余的，因为您可以在`this`内部使用`initializeSystem`。

你应该这样做：

```
 public static void main(String[] args) {
        // TODO code application logic here
       Controller controller = new Controller();
       controller.initializeSystem();
   }
   public void initializeSystem(Controller _controller){
       mainWindow = new MainWindow(this);
       mainWindow.setVisible(true);
   } 
```

第二个不一致是`anotherMethod`访问您的 UI 并更新其中内容的方法。你应该把它留给控制器。像这样的东西：

```
public class Controller {
     //...

     public void updateUIText(String text){
           SwingUtilities.invokeLater(new Runnable() {
              public void run() {
                mainWindow.setMyLabelText("Hello");
              }
           });
     }
} 
```

现在，`SerialHandler`可以在需要时通过 Controller 更新 UI。您所要做的就是传递`Controller`对`SerialHandler`

**编辑**请注意，我使用`SwingUtilities.invokeLater`来更新 UI，这将确保`Controller`即使在我认为是您的情况的多线程场景中也能正确更新 UI

# objective-c - 何时向托管对象添加类别以及何时使用瞬态属性？

> ID：11351587
> 
> 赞同：1
> 
> 时间：2012-07-05T19:53:12.690
> 
> 标签：objective-c, ios, core-data, ios5, nsmanagedobject

我想将自定义计算方法添加到托管对象（根据该对象的其他属性计算某个日期）。

我不确定将其编码为瞬态属性或将类别中的属性添加到此托管对象是否更好。

你怎么看？

这是我当前的代码（类别）：

。H：

```
@interface IBFinPeriod (DateCalculations)
@property (readonly) NSDate* periodBeginDate;
@end 
```

米：

```
#import "IBFinPeriod+DateCalculations.h"

@implementation IBFinPeriod (DateCalculations)

- (NSDate*)periodBeginDate
{
    NSDateComponents *offsetComponents = [[NSDateComponents alloc] init];
    if ([self.incPeriodTypeCode isEqualToString:@"M"]) {
        offsetComponents.month = - [self.incPeriodLength intValue];
    } else if ([self.incPeriodTypeCode isEqualToString:@"W"]) {
        offsetComponents.week = - [self.incPeriodLength intValue];
    }
    NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSDate *beginDate = [calendar dateByAddingComponents:offsetComponents toDate:self.EndDate options:0];
    return beginDate;
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:01:59.620

您的解决方案似乎很好。如果您使用瞬态属性，则仍然需要代码来计算其值，因此无论如何您都需要一个类别。

我猜如果你经常访问它的值，那么拥有一个瞬态属性会更有意义，在这种情况下你会想要缓存它的值。如果您只打算访问该值几次，则没有必要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T00:14:47.097

为类别提供的只读属性很简单——从长远来看。并且不会弄脏那个对象模型。

但是瞬态属性方法对用户来说很有吸引力，因为派生属性是自动更新的。它有点像这样......

```
@implementation IBFinPeriod (IBFinPeriod_Observations)

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {

    if ([@"incPeriodTypeCode" isEqualToString: keyPath]  ) {
        [self updatePeriodBeginDate];
    }
    else {
        [super observeValueForKeyPath: keyPath ofObject:object change:change context:context];
    }
}

- (void)updatePeriodBeginDate
{
    NSDateComponents *offsetComponents = [[NSDateComponents alloc] init];
    if ([self.incPeriodTypeCode isEqualToString:@"M"]) {
        offsetComponents.month = - [self.incPeriodLength intValue];
    } else if ([self.incPeriodTypeCode isEqualToString:@"W"]) {
        offsetComponents.week = - [self.incPeriodLength intValue];
    }
    NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSDate *beginDate = [calendar dateByAddingComponents:offsetComponents toDate:self.EndDate options:0];

    // NOW SET THE TRANSIENT PROPERTY HERE
    [self setPeriodBeginDate: beginDate];
//        return beginDate; // NOt returning anymore
}

@end 
```

# .net - EF 模型第一个实体键属性名称重复

> ID：11351588
> 
> 赞同：0
> 
> 时间：2012-07-05T19:53:18.610
> 
> 标签：.net, entity-framework, ef-model-first

我正在尝试使用模型优先的方法，但我遇到了麻烦。例如，如果我有一个名为 Building 的实体和一个名为 BuildingID 的键属性，并且我创建了一个与 Room 实体的关联，那么 Room 实体中的外键属性最终会被命名为 BuildingBuildingID。

我怎么能阻止这种疯狂！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:58:44.127

Visual Studio 将尝试为关联键选择最佳名称。默认情况下，我相信它是`<EntityName><EntityKeyName>`，因此在您的情况下是 BuildingBuildingId 。但是，由于概念模型与存储模型是分开的，因此您可以将该属性重命名为您想要的任何名称。

此外，如果您在 Visual Studio 中使用关联向导屏幕，并且您不希望 VS 创建新的外键。您可以取消选中一个框以防止它创建属性。

# windows - 无法使用 Cocos2D-X 在 Windows 的 plist 中为 png 充气

> ID：11351594
> 
> 赞同：1
> 
> 时间：2012-07-05T19:53:30.880
> 
> 标签：windows, png, plist, cocos2d-x, inflate

我正在使用 Mac 创建的 plist 文件运行 Coco2D-X 的particleWithFile() 函数。使用“textureImageData”键将图像数据嵌入到 plist 文件中。在 Mac 上它可以正常工作，但在 Windows 上它会失败，在 CCAssert(isOK) 上，请参阅下面的 Coco2D-X 代码 (CCParticleSystem.cpp)：

```
char *textureData = (char*)valueForKey("textureImageData", dictionary);
CCAssert(textureData, "");

int dataLen = strlen(textureData);
if(dataLen != 0) 
{
    // if it fails, try to get it from the base64-gzipped data  
    int decodeLen = base64Decode((unsigned char*)textureData, (unsigned int)dataLen,          &buffer);
    CCAssert( buffer != NULL, "CCParticleSystem: error decoding textureImageData");
    CC_BREAK_IF(!buffer);

    int deflatedLen = ZipUtils::ccInflateMemory(buffer, decodeLen, &deflated);
    CCAssert( deflated != NULL, "CCParticleSystem: error ungzipping textureImageData");
    CC_BREAK_IF(!deflated);

    image = new CCImage();
    bool isOK = image->initWithImageData(deflated, deflatedLen);
    CCAssert(isOK, "CCParticleSystem: error init image with Data");
    CC_BREAK_IF(!isOK);
    m_pTexture = CCTextureCache::sharedTextureCache()->addUIImage(image, fullpath.c_str());
} 
```

看来解码成功了，问题出在zlib的inflate()函数内部，无法解压png文件。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T13:39:07.623

好的，我发现了问题。

显然我的资源不是 png 文件，而是 tiff 文件。所以 Inflate() 返回了一个正确的缓冲区（一个 tiff 文件 - 对我来说看起来太长了，所以我怀疑它是错误的），但是 initWithImageData() 未能创建图像，因为 tiff 在 windows 上不受 Cocos2d-x 支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-25T07:12:09.880

我遇到问题是因为我将 CC_USE_TIFF 设置为 0。

在我将 CC_USE_TIFF 恢复为 1 后，问题解决了。

# delphi - 如何重置 Delphi Tado 命令参数

> ID：11351603
> 
> 赞同：0
> 
> 时间：2012-07-05T19:54:04.497
> 
> 标签：delphi, parameters, ado

我的数据模块上有一个 Tadocommand，它连接到 MSSQL 存储过程。存储过程用于更新表。在我的代码中，我在我的一个 Tclientdataset 的 beforeupdaterecord 方法中调用了 tado 命令。

首先，我使用 Tclientdataset 的 deltads.fieldbyname().newvalue 为 tadocommand 参数提供值，然后调用执行过程。它适用于第一次更新，但如果我尝试进行下一次更新，它会生成“将 varchar 更改为 datetime 时出错”。

如果我在 beforeupdaterecord 方法中动态创建 tadocommand，即

```
sp1_editcontract:=Tadocommand.Create(nil);
sp1_editcontract.CommandType:=cmdStoredProc;
sp1_editcontract.Connection:=DMDBconn.DBConn;
sp1_editcontract.CommandText:='EditContract';
sp1_editcontract.Parameters.Refresh; 
//assign parameter values
sp1_editcontract.execute;
sp1_editcontract.free; 
```

它没有任何错误。我认为在数据模块上使用静态 Tado 命令时参数值存在一些问题。

为什么在使用静态创建的 tadocommand 而不是动态创建的 tadocommand 时多次更新会产生错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:58:04.420

我将假设您指的是`TDatasetProvider.BeforeUpdateRecord`而不是`TClientDataSet.BeforeUpdateRecord`.

从您提供的信息中很难说（您没有指出存储过程的数据类型或参数的顺序）。错误消息来自 SQL Server 引擎。我会确保分配给参数的值始终以正确的顺序设置。还要尝试确定导致错误的参数。如果您可以在客户端代码中可靠地重现它，则可以尝试在 SSMS 中调用存储过程，传递导致客户端应用程序错误的相同值。

一旦确定了参数，您就可以检查其数据类型在 ADOCommand、DatasetProvider 和 ClientDataset 之间是否一致。如果它沿途更改类型，则可能是导致错误的原因。

最后一个建议，确保`TDatasetProvider.Applied := True`在退出`BeforeUpdateRecord`处理程序之前进行设置。这可以防止数据集提供程序在您已应用更新后尝试使用动态 sql 应用更新。如果客户端数据集中的数据由 TADOQuery 填充，它可能会尝试直接更新表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T11:01:31.663

我有一个类似的问题。为了在添加新参数之前清除 ADOCommand 的所有现有参数，请使用以下代码：

```
while Command.Parameters.Count>0 do
  Command.Parameters.Delete(0); 
```

`Parameters.Clear`应该有效，但没有，所以我决定一一删除参数。这对我来说是固定的。

# linux - 如何使用自定义 glibc 为 suse 企业 linux 编译 php-cgi 二进制文件？

> ID：11351606
> 
> 赞同：1
> 
> 时间：2012-07-05T19:54:09.483
> 
> 标签：linux, compilation, glibc

我认为非常直截了当。这是可行的吗？

背景：我这样做是因为我需要在 suse enterprise 9 上运行 php-cgi，并且无法获取 LD_PRELOAD 或 LD_LIBRARY_PATH 以使用非系统版本的 glibc。

```
php-cgi: /lib/tls/libc.so.6: version `GLIBC_2.7' not found 
```

我从这里下载了 2.7

[http://rpmfind.net/linux/rpm2html/search.php?query=libc.so.6(GLIBC_2.7](http://rpmfind.net/linux/rpm2html/search.php?query=libc.so.6(GLIBC_2.7) )

更确切地说

[ftp://rpmfind.net/linux/sourceforge/r/ro/roblinux/64-32_pkg/core/i686/glibc-2.7-2rt.i686.rpm](ftp://rpmfind.net/linux/sourceforge/r/ro/roblinux/64-32_pkg/core/i686/glibc-2.7-2rt.i686.rpm)

并使用 rpm2cpio 解压。

我需要 php-cgi，因为我无法安装 php，并且想尝试使用 JavaBridge 从 tomcat 中运行 php。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:23:13.180

> 如何使用自定义 glibc 为 suse 企业 linux 编译 php-cgi 二进制文件？
> 
> 我认为非常直截了当。

不，一个*非常*困惑和迂回的问题。

首先，cygwin与您的问题*完全无关*：它用于在 Windows 上运行 UNIX 程序，这根本*不是*您要问的。

其次，您的问题似乎是：“如何在具有比构建 php-cgi 的旧 glibc 的系统上运行预构建 php-cgi 二进制文件？”，而不是*编译*任何东西。

对于*这个*问题，答案是：你不能（很容易）——UNIX 系统不支持前向二进制兼容性（在新系统上构建，在旧系统上运行）。仅支持向后兼容性（旧的动态链接二进制文件继续在较新的系统上运行）。

*您最好的方法是尝试在您的系统上*构建 php- cgi （这将消除它对`GLIBC_2.7`. t 重新执行本身。假设您将 glibc-2.7 解压缩到 eg中，这样做的方法类似于：*`/tmp/glibc-2.7`*

 *```
/tmp/glibc-2.7/lib/ld-linux.so.2 --library-path \
    /tmp/glibc-2.7/lib:/lib:/usr/lib \
  /path/to/php-cgi <args> 
```

（上面的库路径可能需要一些调整才能让加载器找到所有需要的库。）

更新：

> 在cygwin中为我的linux盒子编译东西是否实用

这*是*可能的，但*比*简单地在 linux 机器本身上编译要痛苦得多（因此实际上并不实用）。*除了错误地认为 cygwin 可以解决所有*问题之外，您似乎没有任何理由想要这样做。*

# ruby - 救援条款中未捕获 AWS S3 NoSuchBucket 异常

> ID：11351610
> 
> 赞同：1
> 
> 时间：2012-07-05T19:54:44.957
> 
> 标签：ruby, amazon-s3, amazon-web-services

我正在尝试使用 AWS 开发工具包在 Ruby 中获取存储桶，并尝试捕获 NoSuchBucket 错误。问题是，我的救援块没有捕捉到错误，所以我的应用程序崩溃了。以下是相关代码：

```
begin
    b = s3.buckets[bucket_name]

rescue AWS::S3::Errors::NoSuchBucket
    puts Invalid bucket name.
    exit 1
end 
```

错误信息是：

```
C:/Ruby193/lib/ruby/gems/1.9.1/gems/aws-sdk-1.5.6/lib/aws/core/client.rb:277:in
`return_or_raise': The specified bucket does not exist (AWS::S3::Errors::NoSuchBucket) 
```

我只是犯了一个愚蠢的初学者语法错误，还是 AWS 代码中的错误实际上并未引发错误？我也尝试过捕捉所有错误，但仍然没有骰子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T20:46:18.290

```
b = s3.buckets[bucket_name] 
```

实际上不会提出任何请求，也不会通过像`NoSuchBucket`.

它只是返回一个知道其名称的存储桶对象。仅当您实际尝试对存储桶执行某些操作（列出其内容，向其中添加文件）时才会发生请求，并且此时`NoSuchBucket`会引发请求。这是你的`begin`块之外，所以你`rescue`不处理它。如果你需要拯救那个异常，你需要把你的开始/拯救放在你实际使用桶的地方。

如果您只是想验证它确实存在，您可以执行类似的操作

```
s3.buckets[bucket_name].exists? 
```

# hash - ABAP中文件的MD5哈希

> ID：11351617
> 
> 赞同：4
> 
> 时间：2012-07-05T19:55:18.670
> 
> 标签：hash, md5, abap

我想在 ABAP 中生成一个文本文件的 MD5 哈希。我还没有找到任何标准的解决方案来为一个非常大的文件生成它。函数模块`CALCULATE_HASH_FOR_CHAR`不符合我的要求，因为它需要一个字符串作为输入参数。虽然它适用于较小的文件，但如果是 4 GB 的文件，则无法构造这么大的字符串。

有谁知道是否有一个标准的编码来做到这一点（我的谷歌努力没有给我带来任何东西）或者也许有人在 ABAP 中有一个 MD5 算法来计算文件的哈希值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T17:42:42.700

看起来该算法的实现是不可能的，`ABAP`因为该语言在计算过程中不允许算术溢出。这也应该回答了为什么到目前为止它还没有在 SAP 系统中实施的问题。无论哪种方式看起来都没有其他方法可以调用外部工具，遗憾的是，它几乎不独立于平台。

编辑：好的！[因此，在 René 和Java 中 Fast MD5 Implementation](http://www.twmacinta.com/myjava/fast_md5.php)的代码的大力帮助下，我在 ABAP 中创建了[MD5 算法的实现](https://gist.github.com/3145457)。此实现允许使用更多字节更新计算的哈希值，当然这些字节可能来自不同的来源。

到目前为止，还没有任何方法可以获取文件，但无论如何大部分工作已经完成。

代码中包含了一些简单的 ABAP 单元测试，其中还记录了如何使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T08:30:31.543

也许您可以读取几兆字节的数据块中的文件，并使用建议的函数创建一个哈希列表。然后使用生成的哈希列表创建单个顶部哈希。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T07:59:59.027

SDN 通常是寻找 ABAP 相关解决方案的一个很好的起点。我能找到这篇文章：[http ://scn.sap.com/thread/1483479](http://scn.sap.com/thread/1483479)

作者建议：

> *   将 .txt 文件上传为 BIN。
> *   使用函数 MD5_CALCULATE_HASH_FOR_RAW 计算哈希码

您是否能够以二进制格式获取文件并使用`MD5_CALCULATE_HASH_FOR_RAW`？

编辑：这篇文章甚至有更详细的答案`CALCULATE_HASH_FOR_RAW`：[http ://scn.sap.com/thread/1298723](http://scn.sap.com/thread/1298723)

引用 Shivanand Kalagi 的回答：

```
STR_LEN = XSTRLEN( DATA ).

CALL FUNCTION 'CALCULATE_HASH_FOR_RAW'
  EXPORTING
    ALG            = 'MD5'
    DATA           = DATA
    LENGTH         = STR_LEN
  IMPORTING
    HASH           = L_MD5_HASH. 
```

# python - 如何使 Django 的 DateTimeField 可选？

> ID：11351619
> 
> 赞同：72
> 
> 时间：2012-07-05T19:55:24.567
> 
> 标签：python, django

我正在尝试实现一个待办事项列表网站来练习使用 Django。在models.py 中，我有一个类`Item`来表示一个待办事项。在其中，我有以下行：

```
due_date = models.DateTimeField(required=False) 
```

`due_date`是一个可选字段，以防用户对某些待办事项有截止日期。问题是上面的行给了我一个`TypeError`由于意外的关键字参数“必需”。

所以，似乎我不能对`DateTimeField`. 有什么办法可以`DateTimeField`选择吗？或者我遇到的问题有标准实现吗？

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2012-07-05T19:59:48.057

“必需”是 Django 表单的有效参数。对于模型，您需要关键字 args `blank=True`（对于管理员）和`null=True`（对于数据库）。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-07-05T19:58:16.267

利用 `due_date = models.DateTimeField(null=True, blank=True)`

检查[字段选项](https://docs.djangoproject.com/en/2.2/ref/models/fields/#field-options)以获取更多信息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-05-27T14:32:03.793

在保存表单之前，您需要将日期字段设置为无。它对我有用

```
class ActividadEdit(SuccessMessageMixin, UpdateView ):
model = Ges_Actividad
form_class = GestionActividadesUpdateForm
template_name = 'seguimiento_formula/actividades_seguimiento_update.html'

def post(self, request, *args, **kwargs):
    form_class = self.get_form_class()
    self.object = self.get_object()
    id_actividad = kwargs['pk']
    instancia_nivel = self.model.objects.get(id=id_actividad)
    form = self.form_class(request.POST, instance=instancia_nivel)
    id_usuario_actual = self.request.user.id  # obtiene id usuario actual

    try:
        periodo_actual = Glo_Periodos.objects.get(id_estado=1)
    except Glo_Periodos.DoesNotExist:
        return None

    try:
        id_jefatura = Ges_Jefatura.objects.get(Q(id_user=id_usuario_actual) & Q(id_periodo=periodo_actual.id))
    except Ges_Jefatura.DoesNotExist:
        return None

    try:
        usuario_controlador = Ges_Controlador.objects.get(id_jefatura=id_jefatura.id)
    except Ges_Controlador.DoesNotExist:
        return None
   #**before you save the form you need to set the datefields to None. Its works for me**.
    form.instance.fecha_real_termino = None
    form.instance.fecha_real_termino = None
    form.instance.fecha_real_termino = None

    if form.is_valid():

        if self.request.session['id_orden'] == 2:
            id_objetivo = Ges_Objetivo_Tactico.objects.get(id=self.request.session['id_objetivo'])
            form.instance.id_objetivo_tactico = id_objetivo

        if self.request.session['id_orden'] == 3:
            id_objetivo = Ges_Objetivo_TacticoTN.objects.get(id=self.request.session['id_objetivo'])
            form.instance.id_objetivo_tacticotn = id_objetivo

        if self.request.session['id_orden'] == 4:
            id_objetivo = Ges_Objetivo_Operativo.objects.get(id=self.request.session['id_objetivo'])
            form.instance.id_objetivo_operativo = id_objetivo

        form.save()
        request.session['message_class'] = "alert alert-success"
        messages.success(self.request, "Los datos fueron actualizados correctamente!")
        return HttpResponseRedirect('/actividades/detalle/' + str(self.request.session['id_objetivo']))
    else:
        request.session['message_class'] = "alert alert-danger"
        messages.error(self.request,
                       "Error interno: No se ha creado el registro. Comuníquese con el administrador.")
        return HttpResponseRedirect('/actividades/detalle/' + str(self.request.session['id_objetivo'])) 
```

# android - Android 滑动速度

> ID：11351624
> 
> 赞同：2
> 
> 时间：2012-07-05T19:55:28.517
> 
> 标签：android, gesture, swipe

计算滑动速度/速度的最佳方法是什么？是否有一些花哨的类或功能提供此功能，或者我是否需要通过测量触摸向上和向下触摸来执行此操作？我做了一些搜索，但没有找到——也许我没有正确的术语。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T19:58:26.467

[`OnGestureListener`](http://developer.android.com/reference/android/view/GestureDetector.OnGestureListener.html)具有以下方法，提供 x 轴和 y 轴的速度：

```
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) 
```

您可以`OnGestureListener`从文档中实现 , 或：

> 如果你想监听所有不同的手势，那么实现这个接口。如果您只想监听一个子集，扩展 GestureDetector.SimpleOnGestureListener 可能更容易。

# c# - 使用 itextsharp 从多页 pdf 制作 1 页 pdf

> ID：11351630
> 
> 赞同：1
> 
> 时间：2012-07-05T19:55:56.623
> 
> 标签：c#, .net, pdf, itextsharp

我有一个 pdf，我想将其制作成几个 1 页的 pdf，其中原始 pdf 中的每一页现在都是它自己的 pdf 文档。我正在尝试使用 itextsharp 执行此操作，但即使开始也遇到了一些困难。

我会以错误的方式解决这个问题吗？有人知道我会怎么做吗？

万分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:24:02.947

```
using (FileStream fs = new FileStream(argPdfFileName, FileMode.Create))
{
  Document doc = new Document(argReader.GetPageSize(argPdfPageNumber));
  PdfCopy copy = new PdfCopy(doc, fs);
  doc.Open();
  PdfImportedPage page = copy.GetImportedPage(argReader, argPdfPageNumber);
  copy.AddPage(page);
  doc.Close();
} 
```

从一些工作代码中删除了这个。argReader 是指向源文档的 PdfReader 实例。argPdfPageNumber 是有问题的页码。基本上你只需创建一个新的pdf。将源页面导入其中，然后将其添加到文档中并保存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T00:09:00.020

有两种不同的命令行工具可以做到这一点，它们都适用于任何可用的主要操作系统平台。

## pdftk

示例命令行：

```
pdftk input.pdf burst output page_%04d-from-input.pdf 
```

## 鬼脚本

示例命令行：

```
gs \
   -o page_%04d-from-input.pdf \
   -sDEVICE=pdfwrite \
    input.pdf 
```

**警告：**它只是最新版本的 Ghostscript，它支持这种命令行语法，`%04d`用于分页不同的输出文件 + 名称。

`pdftk`在此过程中无法进行任何 PDF 操作，而且速度非常快。

新的 Ghostscript 方法有点慢，但它的优点是它可以在您需要时应用许多其他 PDF 处理功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T19:59:30.637

有一个不同的库[PDFSharp](http://www.pdfsharp.net/)可能更适合于此。您可以打开一个 PDFDocument 对象，并单独浏览每个页面，将其提取到自己的独立 PDF 文档中。

# scala - Java/Scala 关闭挂钩 -noclassdeffounderror

> ID：11351633
> 
> 赞同：1
> 
> 时间：2012-07-05T19:56:00.803
> 
> 标签：scala, shutdown-hook

我有一个多线程 Scala 应用程序，并且我有一个关闭挂钩，它在对象上调用一个 shutdown() 方法。不幸的是，这似乎并不可靠。很多时候它无法处理 SIGINT 并在匿名函数上抛出 NoClassDefFoundError。

如何使这个关闭处理程序更健壮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T02:51:13.177

一个建议：与其直接注册钩子，不如`shutdown()`创建一个`ShutdownManager`对象并让它注册一个`shutdown()`钩子。您的应用程序对象将自己添加到`ShutdownManager`其中，然后可以使用特征或通过函数对象调用某些应用程序对象关闭方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-26T14:56:34.857

预加载你的钩子需要的所有类：

Class.forName("YourObject") 或 Class clasz = YourObject.class

# c# - 将 3 个网格视图导出到 3 个不同的工作表中

> ID：11351642
> 
> 赞同：3
> 
> 时间：2012-07-05T19:56:38.160
> 
> 标签：c#, asp.net, sql, excel

在我的网站上，我有一个按钮，它调用一个方法，然后生成 Excel 报告。代码有效。问题是代码在同一个选项卡上显示所有网格视图（有 3 个）。我可以添加什么代码，以便当我单击按钮时，它将下载文档，但每个 gridview 显示在其单独的选项卡上。选项卡名称将是顶部 1、顶部 2 和顶部 3。因此，为了澄清，现在所有的网格视图都显示在顶部 1 选项卡上，我需要再制作 2 个选项卡（顶部 2 和顶部 3）并放置 gridview2在顶部 2 选项卡上，以及在顶部 3 选项卡上的 gridview3。

```
using System;
using System.Configuration;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;
using System.Data;
using System.Data.SqlClient;
using System.Collections;
using System.Text;
using System.IO;

public partial class _Default : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{
    DataSet dataSet = new DataSet();

    SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["ISALog1ConnectionString"].ToString());

    SqlCommand cmd = new SqlCommand("exec ProxyReport", conn);
    cmd.CommandTimeout = 200;

    SqlDataAdapter ad = new SqlDataAdapter(cmd);
    ad.Fill(dataSet);

    GridView1.DataSource = dataSet.Tables[0];
    GridView1.DataBind();
    GridView2.DataSource = dataSet.Tables[1];
    GridView2.DataBind();
    GridView3.DataSource = dataSet.Tables[2];
    GridView3.DataBind();

}
protected void Button1_Click(object sender, EventArgs e)
{
    string attachment = "attachment; filename=Top 1.xls";
    Response.ClearContent();
    Response.AddHeader("content-disposition", attachment);
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    Response.ContentType = "application/ms-excel";
    StringWriter sw = new StringWriter();
    HtmlTextWriter htw = new HtmlTextWriter(sw);
    GridView1.RenderControl(htw);
    GridView2.RenderControl(htw);
    GridView3.RenderControl(htw);
    Response.Write(sw.ToString());
    Response.End();
}
public override void VerifyRenderingInServerForm(Control control)
{

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T20:08:19.650

是的，您需要从 codeplex 添加 EPPlus：[http](http://epplus.codeplex.com/) ://epplus.codeplex.com/ ，然后将其添加到您的代码中。您可以使用它来添加任意数量的工作表：

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using System.Web.UI;
    using System.Web.UI.WebControls;
    using System.Data;
    using System.Data.SqlClient;
    using System.IO;
    using OfficeOpenXml;
    using System.Configuration;

    public partial class _Default : System.Web.UI.Page
    {
protected void Page_Load(object sender, EventArgs e)
{

}

protected void Button1_Click(object sender, EventArgs e)
{
    GetExcel ge = new GetExcel();
    ge.ProcessRequest(HttpContext.Current);
}

public class GetExcel : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        DataSet dataSet = new DataSet();

        SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["ISALog1ConnectionString"].ToString());
        SqlCommand cmd = new SqlCommand("exec ProxyReport", conn);
        cmd.CommandTimeout = 200;
        SqlDataAdapter ad = new SqlDataAdapter(cmd);
        ad.Fill(dataSet);

       GridView1.DataSource = dataSet.Tables[0];
       GridView1.DataBind();
       GridView2.DataSource = dataSet.Tables[1];
       GridView2.DataBind();
       GridView3.DataSource = dataSet.Tables[2];
       GridView3.DataBind();   

        dataSet.Tables[0].TableName = "1";
        dataSet.Tables[1].TableName = "2";
        dataSet.Tables[2].TableName = "3";

        int count = 3;   

            MemoryStream ms = GetExcel.DataTableToExcelXlsx(dataSet, count);
            ms.WriteTo(context.Response.OutputStream);
            context.Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
            context.Response.AddHeader("Content-Disposition", "attachment;filename=EPPlusData.xlsx");
            context.Response.StatusCode = 200;
            context.Response.End();

    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }

    public static MemoryStream DataTableToExcelXlsx(DataSet ds, int count)
    {
        MemoryStream Result = new MemoryStream();
        ExcelPackage pack = new ExcelPackage();

        for (int i = 1; i <= count; i++)
        {
            DataTable table = ds.Tables[i.ToString()];
            ExcelWorksheet ws = pack.Workbook.Worksheets.Add("MySheet" + i.ToString());

            int col = 1;
            int row = 1;

            foreach (DataColumn cl in table.Columns)
            {
                ws.Cells[row, col].Value = cl.ColumnName;
                col++;
            }
            col = 1;
            foreach (DataRow rw in table.Rows)
            {
                foreach (DataColumn cl in table.Columns)
                {
                    if (rw[cl.ColumnName] != DBNull.Value)
                        ws.Cells[row + 1, col].Value = rw[cl.ColumnName].ToString();
                    col++;
                }
                row++;
                col = 1;
            }
        }
        pack.SaveAs(Result);
        return Result;
    }
}} 
```

# c# - 如何正确处置表单，而不会有从处置对象上的另一个线程调用 Invoke 的风险？

> ID：11351646
> 
> 赞同：5
> 
> 时间：2012-07-05T19:57:02.920
> 
> 标签：c#, winforms, multithreading, events, dispose

我有一个表单，它“监听”在其他地方引发的事件（不是在表单本身，也不是它的一个子控件）。事件由即使在 Form 被释放后仍然存在的对象引发，并且可能在创建 Form 句柄的线程之外的线程中引发，这意味着我需要在事件处理程序中执行 Invoke（以显示更改形式，例如）。

在`Dispose(bool)`表单（重写）的方法中，我取消了在调用此方法时可能仍订阅的所有事件。但是，有时仍会从其中一个事件处理程序调用 Invoke。我认为这是因为事件处理程序在事件取消订阅前一刻被调用，然后操作系统将控制权切换到执行的 dispose 方法，然后将控制权返回给调用已处理对象上的 Invoke 方法的处理程序。

锁定线程无济于事，因为对 Invoke 的调用将锁定调用线程，直到主线程处理调用的方法。这可能永远不会发生，因为主线程本身可能正在等待调用调用线程已获取的对象上的锁释放，从而产生死锁。

所以，简而言之，当订阅可能在不同线程中引发的外部事件时，如何正确处理表单？

以下是目前一些关键方法的外观。这种方法遇到了我上面描述的问题，但我不确定如何纠正它们。

这是一个处理模型数据部分更改的事件处理程序：

```
private void updateData()
{
 if (model != null && model.Data != null)
 {
  model.Data.SomeDataChanged -= new MyEventHandler(updateSomeData);

  model.Data.SomeDataChanged += new MyEventHandler(updateSomeData);
 }
 updateSomeData();
} 
```

这是一个必须对视图进行更改的事件处理程序：

```
private void updateSomeData()
{
 if (this.InvokeRequired) this.myInvoke(new MethodInvoker(updateSomeData));
 else
 {
  // do the necessary changes
 }
} 
```

和 myInvoke 方法：

```
private object myInvoke(Delegate method)
{
 object res = null;
 lock (lockObject)
 {
  if (!this.IsDisposed) res = this.Invoke(method);
 }
 return res;
} 
```

我对方法的覆盖`Dispose(bool)`：

```
protected override void Dispose(bool disposing)
{
 lock (lockObject)
 {
  if (disposing)
  {
   if (model != null)
   {
    if (model.Data != null)
    {
     model.Data.SomeDataChanged -= new MyEventHandler(updateSomeData);
    }
    // unsubscribe other events, omitted for brevity
   }
   if (components != null)
   {
    components.Dispose();
   }
  }
  base.Dispose(disposing);
 }
} 
```

更新（根据艾伦的要求）：

我从不显式调用 Dispose 方法，我让框架来完成。到目前为止，死锁仅在应用程序关闭时发生。在我进行锁定之前，我有时会在表单关闭时抛出一些异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T23:45:06.763

有两种方法需要考虑。一种是在 内部有一个锁定对象`Form`，并且内部调用`Dispose`和`BeginInvoke`调用发生在锁定内；因为既不`Dispose`也不`BeginInvoke`应该花费很长时间，代码永远不必等待很长时间才能获得锁。

另一种方法是仅仅声明由于`Control.BeginInvoke`/中的设计错误`Form.BeginInvoke`，这些方法有时会抛出实际上无法防止的异常，并且应该在动作是否发生在表单上并不重要的情况下简单地被吞下反正已经被处理掉了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T13:13:02.460

我想为 supercat 的答案提供一种可能很有趣的附录。

首先创建一个初始计数为 1 的 CountdownEvent（我们将其称为 _invoke_counter）。这应该是表单（或控件）本身的成员变量：

```
private readonly CountdownEvent _invoke_counter = new CountdownEvent(1); 
```

将 Invoke/BeginInvoke 的每次使用包装如下：

```
if(_invoke_counter.TryAddCount())
{
    try
    {
        //code using Invoke/BeginInvoke goes here
    }
    finally { _invoke_counter.Signal(); }
} 
```

然后在您的 Dispose 中，您可以执行以下操作：

```
_invoke_counter.Signal();
_invoke_counter.Wait(); 
```

这也允许你做一些其他的好事。CountdownEvent.Wait() 函数有一个超时过载。也许您只想等待一段时间让调用函数完成，然后再让它们死掉。如果您希望调用需要很长时间才能完成，您还可以使用 DoEvents() 在循环中执行类似于 Wait(100) 的操作，以保持响应。使用这种方法可以实现很多漂亮的东西。

这应该可以防止任何奇怪的计时竞争条件类型的问题，并且理解和实现起来相当简单。如果有人对此有任何明显的问题，我很想听听他们，因为我在生产软件中使用了这种方法。

重要提示：确保处理代码在终结器的线程上（它应该在“自然”处理中）。如果您尝试从 UI 线程手动调用 Dispose() 方法，它会死锁，因为它会卡在 _invoke_counter.Wait(); 并且调用不会运行，等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-08T14:10:18.870

我在多线程时遇到了 Invoke 方法的问题，我找到了一个像魅力一样工作的解决方案！

我想在更新表单上的标签以进行监视的任务中创建一个循环。

但是当我关闭表单窗口时，我的 Invoke 抛出了一个异常，因为我的 Form 被释放了！

这是我为解决此问题而实施的模式：

```
class yourClass : Form
{
    private bool isDisposed = false;
    private CancellationTokenSource cts;
    private bool stopTaskSignal = false;
    public yourClass()
    {
        InitializeComponent();
        this.FormClosing += (s, a) =>
        {
            cts.Cancel();
            isDisposed = true;
            if (!stopTaskSignal)
                a.Cancel = true;
        };
    }

    private void yourClass_Load(object sender, EventArgs e)
    {
        cts = new CancellationTokenSource();
        CancellationToken token = cts.Token;

        Task.Factory.StartNew(() =>
        {
            try
            {
                while (true)
                {
                    if (token.IsCancellationRequested)
                    {
                        token.ThrowIfCancellationRequested();
                    }

                    if (this.InvokeRequired)
                    {
                        this.Invoke((MethodInvoker)delegate { methodToInvoke(); });
                    }
                }
            }
            catch (OperationCanceledException ex)
            {
                this.Invoke((MethodInvoker)delegate { stopTaskSignalAndDispose(); });
            }
        }, token);
    }

    public void stopTaskSignalAndDispose()
    {
        stopTaskSignal = true;
        this.Dispose();
    }

    public void methodToInvoke()
    {
        if (isDisposed) return;
        label_in_form.Text = "text";
    }
} 
```

我在调用中执行 methodToInvoke() 以从表单的线程更新标签。

当我关闭窗口时，将调用 FormClosing 事件。我借此机会取消关闭窗口（a.Cancel）并调用对象Task的Cancel方法来停止线程。

然后我访问 ThrowIfCancellationRequested() 方法，该方法抛出一个 OperationCanceledException 允许，就在之后，退出循环并完成任务。

Invoke 方法在队列中发送“窗口消息”。

微软说： « 对于每个创建窗口的线程，操作系统都会为窗口消息创建一个队列。»

所以我调用了另一个方法，它现在将真正关闭窗口，但这次使用 Invoke 方法来确保该消息将是队列的最后一条！

And then I close the window with the Dispose() method.

# objective-c - 在 iOS 应用中显示表情符号图标的问题

> ID：11351647
> 
> 赞同：1
> 
> 时间：2012-07-05T19:57:07.763
> 
> 标签：objective-c, ios, xcode, emoji

我无法弄清楚如何让表情符号图标显示在我正在开发的 iPhone 应用程序中。问题是，当有人从应用程序向数据库发布内容时，它会在应用程序中显示为正方形。应用程序从表情符号应该所在的服务器获取的内容类似于 \uf604

有谁知道我做错了什么？我一直在寻找一个好的答案，但到目前为止我还没有找到任何完全相关的东西。

```
//more info
[request setHTTPMethod:@"POST"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:postData];

returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];
        self.memoArray = [returnString JSONValue]; 

//when adding it to the label
cell.memoLabel.text = [itemData objectForKey: @"memo"]; 
```

我发现例如'\Uf604'需要是'\U0001F604'。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T06:43:58.837

这是 Json 解析器 SBJSON 中的一个错误。我一直在使用 SBJson 类，在几个项目中，使用多个版本，并发现一些 Emoji 字符使用的复杂 unicode 存在一些问题。那个图标用一个很长的 unicode 表示，我不记得确切的格式，但它就像一个双 unicode。在 SBJson 中，我发现了一些解析大型 unicode 的错误。

我确实修改了一个方法，它现在可以工作了，但是当我去 Stig 的 SBJson 存储库告知这一点时，我发现了一个关于 unicodes 的未解决问题：[https ://github.com/stig/json-framework/issues/115](https://github.com/stig/json-framework/issues/115)

然而，我的解决方案非常不同。在我使用的版本中，我只需要在方法 scanUnicodeChar: all this if with its body 中进行注释：

```
/*
if (hi >= 0xd800) {     // high surrogate char?
    ... if-body ... ... 
}
*/ 
```

如果您的版本包含该方法和“如果”，请尝试将其删除。

对于其他版本，也许解决方案同样简单。找到一个名为 getStringToken: 的方法，在其中，在 switch-case '\' 语句中，尝试这样注释：

```
/*
if (SBStringIsSurrogateHighCharacter(hi)) {
  ..... body ....
} else if ....... {
    .... ....
} else {
*/

CFStringAppendCharacters((CFMutableStringRef)acc, &hi, 1);

/*
}
*/ 
```

我还没有测试过最后一个，肯定需要做更多的事情才能使一切正常运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T12:47:31.810

请按照以下步骤操作：

*   将 Emoji 字符转换为 base64 并发送到服务器。
*   在服务器端将 base64 保存在数据库中，无需解码。
*   当您想在应用程序上显示表情符号时，请从服务器检索相同的 base64 数据。
*   解码检索字符串并在应用程序上显示。
*   您的表情符号字符将正确显示。

注意：当您想在网页上显示时，当您在网页上显示数据时解码数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T19:22:55.103

更新到最新的 SBJson，此问题已修复。

[https://github.com/stig/json-framework/tags](https://github.com/stig/json-framework/tags)

# javascript - 不正确的 DOM 问题

> ID：11351648
> 
> 赞同：0
> 
> 时间：2012-07-05T19:57:10.807
> 
> 标签：javascript, jquery, asp.net, html, dom

我有一个加载的页面，然后我在它上面做了一些 JQuery。做线时：

```
var div = $("<div class='modal'>").append(r); 
```

我试图弄清楚为什么它会出错并说存在层次结构错误。也许r中有不正确的DOM？为了节省输出，因为它很长，我将展示服务器端。下面的 r 不会出错，但它是在将它附加到上面的 div 时实际发生问题的地方。

```
var r = $(result); 
```

结果：

```
"<div>
   <input type='text' id ='queryInput' />
   <button id = 'queryButton' runat='server' value = 'Re-Filter'>Re-Filter</button>
</div>
<div id='set'>
   <select>
     <!-- The options are populated by a loop in ASP.net -->
     <option value = '" + Convert.ToString(record.fe_id) + "'>" + Convert.ToString(record.fe_name) + "</option>  
   </select>
</div>
<div>
   <button id = 'buttonReturnValue' value = 'Return Selected Element'>Return Selected Element</button>
</div>" 
```

如果我认为上述内容是不正确的 dom，我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:09:12.843

```
var text = "<div><input type='text' id ='queryInput' /><button id = 'queryButton' runat='server' value = 'Re-Filter'>Re-Filter</button></div><div id='set'><select><option value = '" + Convert.ToString(record.fe_id) + "'>" + Convert.ToString(record.fe_name) + "</option></select></div><div><button id = 'buttonReturnValue' value = 'Return Selected Element'>Return Selected Element</button></div>"; 
```

这是一种解决方法，但有效...

```
var d = document.createElement("div");
d.innerHTML = text;
document.getElementById('modal').appendChild(d); 
```

# windows - 如何使用命令检查窗口的防火墙是否启用

> ID：11351651
> 
> 赞同：15
> 
> 时间：2012-07-05T19:57:20.653
> 
> 标签：windows, security, windows-firewall

我在安装程序中使用**netsh advfirewall firewall命令添加 Windows 防火墙规则。**如果系统禁用了 Windows 防火墙，我的代码会给出错误消息。

**所以我需要在执行命令netsh advfirewall firewall add**之前检查窗口的防火墙状态。即，如果防火墙被禁用，则无需添加规则。

我正在使用窗口注册表值“ **EnableFirewall** ”检查防火墙是否已启用。

**HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\SharedAccess\Parameters\FirewallPolicy\StandardProfile**

我不确定这是正确的方法。也可以有域防火墙配置文件（？）。

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-12T11:41:08.887

另一种选择是使用`netsh`自身检查防火墙是否启用。执行命令`netsh advfirewall show private|public|domain`。它将打开/关闭状态。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-22T21:04:22.580

`Invoke-Command -ComputerName <servername> -Credential <username> -ScriptBlock {[Microsoft.Win32.RegistryKey]::OpenRemoteBaseKey("LocalMachine",$env:COMPUTERNAME).OpenSubKey("System\CurrentControlSet\Services\SharedAccess\Parameters\FirewallPolicy\StandardProfile").GetValue("EnableFirewall")}`

`1`表示启用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-10-02T22:37:03.613

试试这个进行合规性和不合规性检查：

```
$FirewallStatus = 0
$SysFirewallReg1 = Get-ItemProperty -Path "HKLM:\SYSTEM\CurrentControlSet\Services\SharedAccess\Parameters\FirewallPolicy\DomainProfile" -Name EnableFirewall | Select-Object -ExpandProperty EnableFirewall
If ($SysFirewallReg1 -eq 1) {
$FirewallStatus = 1
}

$SysFirewallReg2 = Get-ItemProperty -Path "HKLM:\SYSTEM\CurrentControlSet\Services\SharedAccess\Parameters\FirewallPolicy\PublicProfile" -Name EnableFirewall | Select-Object -ExpandProperty EnableFirewall
If ($SysFirewallReg2 -eq 1) {
$FirewallStatus = ($FirewallStatus + 1)
}

$SysFirewallReg3 = Get-ItemProperty -Path "HKLM:\SYSTEM\CurrentControlSet\Services\SharedAccess\Parameters\FirewallPolicy\StandardProfile" -Name EnableFirewall | Select-Object -ExpandProperty EnableFirewall
If ($SysFirewallReg3 -eq 1) {
$FirewallStatus = ($FirewallStatus + 1)
}

If ($FirewallStatus -eq 3) {Write-Host "Compliant"}
ELSE {Write-Host "Non-Compliant"} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-06T22:26:14.303

我只需要为我接管的环境做类似的事情。我使用以下内容检查所有三个配置文件的状态。

```
invoke-command -computername $computer  -scriptblock {
    try{ get-netfirewallprofile | select name,enabled }
    catch{ netsh advfirewall show all state }
} 
```

try 块将适用于 server 2012 或 windows 8 和更新的系统。如果当它抛出一个关于没有将被捕获的 cmdlet 的错误时失败，而不是给你一个错误，它将回退到使用 netsh 来显示信息。

我在服务器 2008 R2、2012 R2 和 2016 上使用了它，效果很好。希望这对你有用！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-02-04T12:54:20.817

写成**单行**：

```
if (((Get-NetFirewallProfile | select name,enabled) | where { $_.Enabled -eq $True } | measure ).Count -eq 3) {Write-Host "OK" -ForegroundColor Green} else {Write-Host "OFF" -ForegroundColor Red} 
```

它能做什么？

*   遍历每个防火墙设置项：`[Domain, Private, Public]`
*   检查每个项目是否已启用并设置为`TRUE`
*   有 3 个项目，所以我们计算所有 TRUES 并与 3 进行比较
*   打印绿色`OK`或红色`OFF`
*   **不**使用`netsh`或注册
*   *需要Get-NetFirewallProfile* cmdlet的工作`NetSecurity`模块。

 ** * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-28T12:25:41.090

确保还检查防火墙的 GPO 策略，它们不存储在注册表中，而是存储在另一个存储中，也请参阅此问题： [Windows Firewall state different between Powershell output and GUI](https://stackoverflow.com/questions/31058090/windows-firewall-state-different-between-powershell-output-and-gui?s=1|52.2132)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-19T06:33:30.460

我对此并不陌生，但是我如何使用 reg 查询来获取详细信息。

在命令行中输入它并按回车键。

```
reg query \\IP_Address\HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\SharedAccess\Parameters\FirewallPolicy\StandardProfile 
```

我在我的作品中使用它，并且也在使用下面的命令。

```
reg query \\ip_address\path 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-02T18:18:09.233

```
$Compliance = 'Non-Compliant'
$Check = get-netfirewallprofile | Where-Object {$_.Name -eq 'Domain' -and $_.Enabled -eq 'True'}
$Check = get-netfirewallprofile | Where-Object {$_.Name -eq 'Public' -and $_.Enabled -eq 'True'}
$Check = get-netfirewallprofile | Where-Object {$_.Name -eq 'Private' -and $_.Enabled -eq 'True'}
if ($Check) {$Compliance = 'Compliant'}
$Compliance 
```*

# php - Prolog 和 php 编码

> ID：11351653
> 
> 赞同：0
> 
> 时间：2012-07-05T19:57:28.437
> 
> 标签：php, string, encoding, prolog, swi-prolog

我正在创建 swi-prolog 和 php 之间的接口。php 编写它希望 prolog 在文件上运行的命令，然后进行系统调用，以便 prolog 运行该文件。问题是当文件中有特殊字符（如á、í、ã、ê 等...）时，这些字符在 prolog 的输出中被 \uFFFD 替换，我知道此代码点用于[未知/未识别codepoints](http://www.fileformat.info/info/unicode/char/fffd/index.htm)，但我没有成功解决我在互联网上找到的问题。如果我自己从终端运行文件，它会显示正确的字符，就在 php 从 exec 或 shell_exec 运行时，它似乎失去了理由。

这是使用的代码，首先是php：

```
 $arquivo = fopen("/home/giz/prologDB/run.pl", w);
        $run = <<<EOT
    go :-   
        consult('/home/giz/prologDB/pessoasOps.pl'),
        addPessoa(0,'$name','$posicao','$resume','$unidade','$curso','$disciplina',$alunos,[]),
        halt.
EOT;

        echo $run;
        fwrite($arquivo, $run);

        $cmd = "prolog -f /home/giz/prologDB/run.pl -g go";     
        exec( $cmd, $output );
        echo "\n";      
        print_r( $output );   
        echo "\n"; 
```

序言代码：

```
addPessoa(LOCAL, NOME, POSICAO, RESUMO, UNIDADE, CURSO, DISCIPLINA, ALUNOS, REFERENCIA):-
    write( 'Prolog \nwas called \nfrom PHP \nsuccessfully.\n' ),    
    write('pessoa('),
    write(LOCAL),
    write(',\''),   
    write(NOME),
    write('\',\''),
    write(POSICAO),
    write('\',\''),
    write(RESUMO),
    write('\',\''),
    write(UNIDADE),
    write('\',\''),
    write(CURSO),
    write('\',\''),
    write(DISCIPLINA),
    write('\','),
    write(ALUNOS),
    write(','),
    write(REFERENCIA),
    write(').\n'),
    make. 
```

有人知道如何让它正确解释字符串吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:23:55.197

Prolog 很可能需要 UTF-8 编码的字符，而您正在输入[ISO-8859-n](http://en.wikipedia.org/wiki/ISO-8859)字符，其中 n 很可能是 1 或 15。在[UTF-8](http://en.wikipedia.org/wiki/UTF-8)中，当看到一个字节 >= 128 时，它要么是第一个多字节序列（如果 >= 192）或连续字节。如果多字节序列的第一个字节后面没有连续字节，或者如果序列以连续字节开头，则会得到无法识别的字节序列，在您的情况下为[U+FFFD 代码点](http://www.fileformat.info/info/unicode/char/fffd/index.htm)。在 ISO-8859-n 中，所有带变音符号的字符都在 128 以上。

还要查看[swi-prolog 的有关 encoding 的手册页](http://www.swi-prolog.org/man/widechars.html)，尤其是以这两个句子开头的整个段落：

> 文件的默认编码来自 Prolog 标志 `encoding`，它是从环境初始化的。如果环境变量 LANG 以“UTF-8”结尾，则假定使用此编码。

当从 shell 或 PHP 中调用时 swi-prolog 的不同行为的一个很好的原因可能是`LANG`在这两种情况下环境变量的不同设置。但在同一段落中，手册提到了强制编码的方法。

在 shell 中，查看文件中包含的字节的最快方法是执行 an `od -tx1z filename | less`（在难以打印字符的情况下省略 z）。

# c# - DevExpress XtraGrid：从对象获取 RowHandle 的正确方法是什么

> ID：11351657
> 
> 赞同：1
> 
> 时间：2012-07-05T19:57:39.997
> 
> 标签：c#, winforms, devexpress

我在 DevExpress **XtraGrid** (WinForms)中列出日期范围的集合（每个日期范围由*Period对象表示）。*

 **在将 Period 一分为二的方法中（分割日期由用户输入），代码执行以下操作：

1.  获取焦点行上的 Period 引用。((期间)GridViewPeriods.GetRow(selectedRows[0]);)
2.  克隆选定的时间段。
3.  获取关于新克隆的 Period 的引用。

工作完成后，我想把重点放在新克隆的 Period 上。此时，我只有两个 Period 引用。

我在 XtraGrid 中没有找到任何可以根据行的值定位行的方法（例如通过传递对象返回 RowHandle）。

我最终写了这个辅助方法：

```
 public int GetDataRowIndex(RatePeriod period)
    {
        int foundIndex = 0;

        for (int i = 0; i < GridViewRatePeriods.DataRowCount; i++)
        {
            if ((RatePeriod)GridViewRatePeriods.GetRow(i) == period)
            {
                foundIndex = i;
                break;
            }
        }
        return foundIndex;
    } 
```

然后我将重点放在新创建的 Period 上，如下所示：

```
GridViewPeriods.FocusedRowHandle = GetDataRowIndex(tailingPeriod); 
```

有没有更短或更聪明的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:53:48.900

看起来您正在以最好的方式做到这一点，尽管您似乎必须通过一堆东西来获得您正在寻找的东西 Dev Express 具有与您相同的解决方案

[http://www.devexpress.com/Support/Center/p/A1488.aspx](http://www.devexpress.com/Support/Center/p/A1488.aspx)

我想也许 rowindex 可能与您的数据源的顺序相关，但似乎没有任何排序规则

[http://www.devexpress.com/Support/Center/p/A1488.aspx](http://www.devexpress.com/Support/Center/p/A1488.aspx)

如果您在单个单元格中显示任何一种唯一的识别信息，您可能可以使用 [LocateByValue](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsBaseColumnView_LocateByValuetopic)如果您没有显示唯一的识别信息，您总是可以隐藏该列**

# backbone.js - 将复合视图与 Backbone Marionette 和关系一起使用

> ID：11351665
> 
> 赞同：7
> 
> 时间：2012-07-05T19:58:28.670
> 
> 标签：backbone.js, backbone-relational, marionette

我已经使用 Marionette 几个星期了，刚刚发现了 Backbone Relational，所以我试图弄清楚如何将两者结合起来。理想情况下，我想使用复合视图来呈现结构如下的数据，其中每个“项目”都有自己的项目视图：

```
list : {
  name : 'List 1',
  items : [
    item1 : {
      name : 'Item 1',
      id : 1
    },
    item2 : { ... }
    item3 : { ... }
  ]
} 
```

通常对于复合视图，您需要有一组模型，它将遍历以呈现每个项目。对于关系，我只有一个模型（列表），并且该模型中有一个集合（项目）。是否可以使用 Marionette 的视图将其渲染出来，还是我需要使用普通的 Backbone 视图并自己处理渲染和迭代？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-06T01:09:23.677

这很常见，也很容易做到。在您的 CompositeView 定义中，您可以指定要在初始化方法中使用的集合。

```
 Backbone.Marionette.CompositeView.extend({
  // ...

  initialize: function(){
    this.collection = this.model.get("childcollection");
  }
}); 
```

# jquery - jQuery .hover() 或 .animate() 在 Marquee 插件中导致冒泡动画

> ID：11351677
> 
> 赞同：3
> 
> 时间：2012-07-05T19:58:50.490
> 
> 标签：jquery, jquery-plugins, jquery-animate, marquee

我在玩[Giva Labs jQuery Marquee 插件](http://www.givainc.com/labs/marquee_jquery_plugin.htm)。[此处为 jsFiddle](http://jsfiddle.net/AkQgH/)示例。

示例中有两行切换文本：`First line`和`Second row`. 当您开始连续将鼠标光标移出浅蓝色框时，文本会变得疯狂：线条开始像随机的、无序的一样相互移动。当您在循环中将鼠标移动速度从慢到快更改时，这种疯狂程度最高。

我搜索了“jquery animate stop”并找到了[`.stop()`](http://api.jquery.com/stop/)和[`.clearQueue()`](http://api.jquery.com/clearQueue/)效果。我尝试将这些附加到选框效果，如下所示：

```
$("#marquee").marquee().stop(); 
```

还有这个：

```
$("#marquee").marquee().clearQueue(); 
```

也像这样：

```
$("#marquee").marquee()
    .hover(function() {
        $(this).clearQueue();
    }); 
```

我还尝试了插件的内置[方法](http://www.givainc.com/labs/marquee_jquery_plugin.htm#methods)：

```
$("#marquee").marquee()
    .hover(function() {
        $(this).marquee("pause");
    })
    .mouseout(function() {
        $(this).marquee("resume");
    }); 
```

他们都没有工作。

如何摆脱这个故障？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T04:01:02.240

**更新/解决**：

**代码：[jsFiddle](http://jsfiddle.net/YtdAS/1/)**

* * *

**解决方案总结：**

*   添加`var timedout`
*   设置`timedout`在里面`scroll()`
*   `clearTimeout(timedout)`在里面打电话`pause()`

* * *

当您设置非常低`pauseSpeed`（例如 2）时，该错误不会发生，这使我相信它发生的错误是由于和之间的`pause()`相互作用`resume()`

具体来说，这段代码在`pause()`：

```
if( $marquee.data("marquee.showing") != true ){
    // we must dequeue() the animation to ensure that it does indeed stop animation
    $lis.filter("." + options.cssShowing).dequeue().stop();
} 
```

这段代码在`resume()`：

```
if ($marquee.data("marquee.showing") != true) scroll($lis.filter("." + options.cssShowing), 1); 
```

这段代码在`scroll()`：

```
setTimeout(function() {
    // if paused, stop processing (we need to check to see if the pause state has changed)
    if (paused == true) return false;

    // scroll the message down
    $li.animate({
        top: (options.yScroll == "top" ? "+" : "-") + $marquee.innerHeight() + "px"
    }, options.showSpeed, options.fxEasingScroll);
    // finish showing this message
    finish($li);
}, delay);​ 
```

据我所知，问题的发生是因为`dequeue().stop()`[这很有意义] 是即时的，并且`scroll(...)`有一些延迟发生的代码（`pauseSpeed)`.

所以会发生以下情况：

1.  动画被取消`pause()`
2.  然后`resume()`调用依次`scroll()`将超时函数设置为在 2000 毫秒内发生
3.  实际上，每次您将鼠标悬停并移出时，它都会创建一个
4.  这最终把一切都搞砸了……别问我怎么了，我现在很累

To fix this I would suggest editing `jquery.marquee.js` code and actually calling `clearTimeout()` every time you stop the animation.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T20:19:53.553

我已在此处将您的代码更新为 JSFiddle。 [http://jsfiddle.net/AkQgH/7/](http://jsfiddle.net/AkQgH/7/)

我无法复制快速运动。您获得快速滚动的原因是当您移出并在特定块内的光标中它会生成暂停和播放事件。您可以使用

```
setTimeout(
  function() 
  {
  }, 5000); 
```

在暂停事件后延迟您想要等待的时间，它不会产生奇怪的效果。

更新网址。删除了 JS 错误，因为您的代码应该是“marquee”而不是“marque”。- 还有其他错误是“over”，您需要使用“mouseover”

# emacs - Emacs term-mode：停止在某些主机上设置远程默认目录

> ID：11351681
> 
> 赞同：2
> 
> 时间：2012-07-05T19:59:18.090
> 
> 标签：emacs, term, tramp, advising-functions

我曾经`term-mode`在 Emacs 中运行 Bash shell。在远程主机上，`term-mode`的目录跟踪功能有助于将`default-directory`主机名设置在其中，以便通过 Tramp 远程完成选项卡完成和文件访问。然而，有时我使用与我的工作站共享相同文件系统的远程主机，因为它们从 NFS 加载相同的目录。在这些情况下，流浪汉让我放慢了太多的速度。我希望在使用这些系统时，让 Emacs 在`default-directory`本地设置。为此，我`term-handle-ansi-terminal-messages`已从系统复制`term.el`到我的`.emacs`. 我替换这部分：

```
((= command-code ?h)
 (setq term-ansi-at-host argument)) 
```

有了这个：

```
((= command-code ?h)
 (setq term-ansi-at-host-real argument)
 (setq term-ansi-at-host
       ;; if it has an equivalent filesystem group, set to system-name
       (if (term-equivalent-filesystem-host-group-p argument)
           (system-name)
         argument))) 
```

这调用了一个`term-equivalent-filesystem-host-group-p`函数，该函数告诉主机是否应该被视为具有等效的文件系统。

此方法具有预期的效果，但复制和修改系统 Lisp 代码对代码中的任何未来更改都不可靠。我认为如果不复制其一半的功能（消息循环或`default-directory`和`ange-ftp-`...变量的设置），就不可能为该函数提供建议。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T06:09:56.487

我认为您可以通过建议获得该死的接近。我将建议定义如下：

```
(defadvice term-handle-ansi-terminal-messages
   (before rewrite-remote-paths-to-local (message) activate)
   (when (and (string-match ".*\eAnSiTh.\\([^\r\n]+\\)\r?\n" message)
              (term-equivalent-filesystem-host-group-p (match-string 1 message)))
     (setq term-ansi-at-host-real (match-string 1 message))
     (setq message (replace-match (system-name) t t message 1)))) 
```

所有这一切都是寻找输入的子字符串，该子字符串`term-handle-ansi-terminal-messages`将落入相关案例中，并主动重写路径。现在没有必要摆弄 的内部`term-handle-ansi-terminal-messages`，因为它永远不会看到远程路径。

**这与修改功能有什么不同吗？**我会说是的，但这可以解释。特别是，我认为上述代码*所依赖*`term-long-function-name-you-already-know`的唯一知识是要查找的子消息的格式，这实际上是**终端**协议的属性，而不是`term-now-i'm-just-being-silly`. 有一些潜在的问题，例如新代码会根据匹配中的第 7 个字符改变行为。（这是上面唯一`.`的`string-match`。）

不用说，我根本没有测试这段代码。

# objective-c - AVCaptureSession“startRunning”崩溃

> ID：11351687
> 
> 赞同：3
> 
> 时间：2012-07-05T19:59:29.947
> 
> 标签：objective-c, memory-management, avfoundation, avcapturesession

所以这是我的问题：我创建了一个自定义的 AVCaptureSession 来拍照。我不知道为什么，但你第三次打电话`startRunning`，它崩溃了。我实现`didReceiveMemoryWarning`了，它在崩溃之前没有被调用。我还在上面运行了仪器，并且没有与 AVCaptureSession 相关的内存泄漏。XCode 中的控制台也没有日志。

所以我的问题是......即使`didReceiveMemoryWarning`没有被调用，这是否是内存问题？这是我的一些代码。

viewWillDisappear (视图控制器)

```
- (void)viewWillDisappear:(BOOL)animated {
if (cameraFlashButton) { [cameraFlashButton release]; }
if (switchCamera) { [switchCamera release]; }
if (cameraBadgeBack) { [cameraBadgeBack release]; }
if (cameraBadgeNumber) { [cameraBadgeNumber release]; }
if (cameraUseButton) { [cameraUseButton release]; }
if (cameraOverlayView) { [cameraOverlayView release]; }
if (blackOverlay) { [blackOverlay release]; }
if (loadingIndicator) { [loadingIndicator release]; }
if (cameraPickButton) { [cameraPickButton release]; }
if (whiteOverlay) { [whiteOverlay release]; }
if (imageOverlay) { [imageOverlay release]; }
if (captureManager) { [captureManager release], captureManager = nil; }
if (theCaptureSession) { [theCaptureSession release], theCaptureSession = nil; }
[super viewWillDisappear:YES];
} 
```

解除分配（CaptureSessionManager）

```
- (void)dealloc {
if ([self captureSession]) { [[self captureSession] stopRunning]; }
if (previewLayer) { [previewLayer release], previewLayer = nil; }
if (captureSession) { [captureSession release], captureSession = nil; }
if (stillImageOutput) { [stillImageOutput release], stillImageOutput = nil; }
if (stillImage) { [stillImage release], stillImage = nil; }
[super dealloc];
} 
```

想法？如果您需要查看其他内容，请询问！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:25:54.317

如果`didReceiveMemoryWarning`正确实施并且从未调用过，则您的问题可能不是由于内存不足。当您开始运行捕获会话时，还有许多其他方法可以让您崩溃。您需要发布更多的实现以及崩溃的详细信息以帮助调试。

但是，您发布的代码存在许多效率低下和样式问题。在 Objective-C 消息中对 nil 的注释非常好。因此，在您的`viewWillDisappear`和`dealloc`方法中，您可以并且应该删除每个`if`测试的可读性。例如，而不是：

```
if (cameraFlashButton) { [cameraFlashButton release]; } 
```

只需使用：

```
[cameraFlashButton release]; 
```

如果您使用的是正确合成的访问器，那么替换以下行也会更好

```
if (previewLayer) { [previewLayer release], previewLayer = nil; } 
```

简单地

```
self.previewLayer = nil; 
```

# firebase - 检测 Firebase 连接是否丢失/重新获得

> ID：11351689
> 
> 赞同：70
> 
> 时间：2012-07-05T19:59:44.270
> 
> 标签：firebase

是否有一种策略可以在当前的 Firebase 产品中起作用，以检测服务器连接是否丢失和/或重新获得？

我正在考虑移动设备的一些离线突发事件，我想要一种可靠的方法来确定 Firebase 数据层何时可用。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-07-05T20:12:08.203

这是一个普遍要求的功能，我们刚刚发布了一个 API 更新，让您可以做到这一点！

```
var firebaseRef = new Firebase('http://INSTANCE.firebaseio.com');
firebaseRef.child('.info/connected').on('value', function(connectedSnap) {
  if (connectedSnap.val() === true) {
    /* we're connected! */
  } else {
    /* we're disconnected! */
  }
}); 
```

完整文档可在[https://firebase.google.com/docs/database/web/offline-capabilities](https://firebase.google.com/docs/database/web/offline-capabilities)获得。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-08-24T19:40:33.647

**更新：** 对于许多与状态相关的功能，客户端知道它何时在线或离线很有用。Firebase 实时数据库客户端在 /.info/connected 中提供了一个特殊位置，每次客户端的连接状态更改时都会更新该位置。这是一个例子：

```
DatabaseReference connectedRef = FirebaseDatabase.getInstance().getReference(".info/connected");
connectedRef.addValueEventListener(new ValueEventListener() {
  @Override
  public void onDataChange(DataSnapshot snapshot) {
    boolean connected = snapshot.getValue(Boolean.class);
    if (connected) {
      System.out.println("connected");
    } else {
      System.out.println("not connected");
    }
  }

  @Override
  public void onCancelled(DatabaseError error) {
    System.err.println("Listener was cancelled");
  }
}); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-11-16T13:13:51.350

我想这在过去几个月里发生了变化。目前的说明在这里： [https ://firebase.google.com/docs/database/web/offline-capabilities](https://firebase.google.com/docs/database/web/offline-capabilities)

总而言之：

```
var presenceRef = firebase.database().ref("disconnectmessage");
// Write a string when this client loses connection
presenceRef.onDisconnect().set("I disconnected!"); 
```

和：

```
var connectedRef = firebase.database().ref(".info/connected");
connectedRef.on("value", function(snap) {
  if (snap.val() === true) {
    alert("connected");
  } else {
    alert("not connected");
  }
}); 
```

我承认我不太了解参考是如何设置的，或者这意味着什么（您是凭空制作它们还是必须事先创建它们？）或者其中哪一个会触发某些事情在服务器上而不是在前端，但是如果在您阅读本文时链接仍然是最新的，那么阅读更多内容可能会有所帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-01-20T11:13:37.390

对于 android，您可以通过一个名为的函数使用户离线`onDisconnect()`

我在我的一个聊天应用程序中执行此操作，如果**网络连接丢失**或用户**与 Internet 断开连接，用户需要自动离线**

```
DatabaseReference presenceRef = FirebaseDatabase.getInstance().getReference("USERS/24/online_status");

presenceRef.onDisconnect().setValue(0); 
```

在与网络断开连接时，我`online_status`在 Firebase 中将 ID 为 24 的用户设为 0。

`getReference("USERS/24/online_status")`是您需要离线/在线更新的值的路径。

[您可以在离线功能](https://firebase.google.com/docs/database/android/offline-capabilities)中了解它

请注意，firebase 执行 onDisconnect() 函数需要大约 2-10 分钟的时间。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-10-23T13:21:12.420

[网络火力基地](https://firebase.google.com/docs/database/web/offline-capabilities)

```
firebase.database().ref(".info/connected").on("value",(snap)=> {}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-06-27T09:18:51.823

建议的解决方案对我不起作用，所以我决定通过写入和读取“健康/检查”值来检查连接。这是代码：

```
const config = {databaseURL: `https://${projectName.trim()}.firebaseio.com/`};
//if app was already initialised delete it
if (firebase.apps.length) {
    await firebase.app().delete();
}
// initialise app
let cloud = firebase.initializeApp(config).database();
// checking connection with the app/database
let connectionRef = cloud.ref('health');
connectionRef.set('check')
    .then(() => {
        return connectionRef.once("value");
    })
    .then(async (snap) => {
        if (snap.val() === 'check') {
            // clear the check input
            await connectionRef.remove();
            // do smth here becasue it works
    }
}); 
```

[![在此处输入图像描述](../Images/2a3f117f258a6137bb2b2ea9d67c7686.png)](https://i.stack.imgur.com/Z27qY.gif)

# node.js - ejs '部分未定义'

> ID：11351691
> 
> 赞同：29
> 
> 时间：2012-07-05T19:59:53.457
> 
> 标签：node.js, express, ejs

好的，我有一个主要是静态的主页，但我想拥有用于导航、页脚等的部分视图。我正在使用 ejs，它看起来像这样：

我的控制器：home.js

```
// Dependencies
var express = require('express');

    module.exports = {
        get: function(req, res) {
            app.set('view engine', 'ejs');  
            var model = {
            layout:'home',
                    };

            res.render('home');

        }
    }; 
```

我的视图目录有导航、主页和页脚所有 .ejs

然后，去除文本的实际 html 文件将如下所示。

```
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" >
<title>Tom Jones</title>

<!-- CSS -->
<link rel="stylesheet" href="/css/home.css" type="text/css" media="screen" >

</head>
<body>

<%- partial('nav') %>

<!--content part -->  
<div id="showcontainer">
        <section>

        </section>
</div>

<div id="maincontainer">
        <section>

        </section>
</div>

</body>
</html> 
```

问题当我测试它时，我遇到了未定义的错误部分。我尝试要求 ejs 但没有成功。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-08-06T20:42:47.333

正如@Pickels 所说，Partial 在 3.x 中被删除。但是，最新版本的 EJS 提供了一种包含“部分”的机制，称为“包含”：

[https://github.com/visionmedia/ejs#includes](https://github.com/visionmedia/ejs#includes)

> 包含与包含语句的模板相关，例如，如果您有“./views/users.ejs”和“./views/user/show.ejs”，您将使用 <% include user/show %>。包含的文件实际上包含在模板中，编译后不执行 IO，因此这些包含的模板可以使用局部变量。

以下将替代旧的 partial() 函数。您需要在其他地方进行调整以完全支持 Express 3.x，但在大多数情况下，这似乎运行良好（实际上更好 - 更少的代码和更高的性能）。

```
<% include nav.ejs %> <!-- replaces your old <%- partial('nav') %> --> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T20:05:43.173

部分在 3.x 中被删除。现在由模板引擎提供部分。

# jquery - 如何使用带有 KnockoutJS foreach 模板的 Bootstrap Collapse

> ID：11351692
> 
> 赞同：1
> 
> 时间：2012-07-05T20:00:02.633
> 
> 标签：jquery, twitter-bootstrap, knockout.js, collapse

我有一个用于将“项目”添加到商店库存页面的模板。我需要将项目最小化以仅显示名称和价格等信息，但是一旦单击它将扩展到其他信息。该列表使用的是 knockoutJS，我不确定如何连接 Twitter Bootstrap Collapse 项目。我引用的 div 的 id 是重复的，因此切换“更多信息”div 的链接仅切换页面上的第一个 div。到目前为止，这是我的代码。无论模板标记的实例有多少，我都需要每个链接来切换它后面的 div。

```
 <ul data-bind="foreach: items" class="inline">
  <fieldset>
    <legend>Store Item List</legend>
    <li class="separator"><div id="item-accordian">
        <div class="row">
            <a id="store-item" data-toggle="collapse" data-target=".collapse" href="#store-item-details">
                <div class="span2">
                    <strong>Name: </strong><span data-bind="text: Name"></span>
                </div>
                <div class="span2">
                    <strong>Price: </strong><span data-bind="text: FormatUnitPrice"></span>
                </div>
                <div class="span2">
                    <strong>Type: </strong><span data-bind="text: ItemType"></span>
                </div>
                <div class="span2">
                    <strong>Status: </strong><span data-bind="text: Status"></span>
                </div>
            </a>
        </div>
        <div id="store-item-details" class="collapse">
            <div class="row">
                <div class="span1">
                    <strong>Description:</strong>
                </div>
                <div class="span4">
                    <span data-bind="text: Description"></span>
                </div>
            </div>
            <div class="row">
                <div class="span8">
                    <ul data-bind="foreach: ItemAttributes">
                        <li class="control-group">
                            <div class="controls">
                                <div class="float-left omega-spacer-10">
                                    <strong data-bind="text: Name">:</strong></div>
                                <div class="float-left omega-spacer-35">
                                    <select class="input-medium" data-bind="options: AttributeValues, optionsText: 'Text', optionsValue: 'Value'">
                                    </select></div>
                            </div>
                        </li>
                    </ul>
                    <div class="row">
                        <div class="span8 float-right">
                            <div class="float-right">
                                <button data-bind="click: $parent.deleteItem">
                                    Delete</button></div>
                            <div class="float-right">
                                <button data-bind="click: $parent.editItem">
                                    Edit</button></div>
                        </div>
                    </div>
                </div>
            </div>
        </div></div>
    </li>
  </fieldset>
</ul> 
```

感谢您提供的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T00:37:23.637

我只是使用了以下 jQuery：

```
jQuery(document).ready(function(){
$('.accordion .head').click(function() {
    $(this).next().toggle('slow');
    return false;
}).next().hide();
}); 
```

此代码在@Ingro 建议的[Jquery UI 手风琴文档中指定。](http://jqueryui.com/demos/accordion/#collapsible)谢谢你指点我那里。

这允许打开多个部分，也让我不必与我不想使用的 jQuery UI 样式作斗争。我实际上使用了 twitter bootstrap 中的“collapse”类，它提供了一个很好的边框效果，所以我不必手动想出一些东西。

# c# - 将表达式的值打印为字符串

> ID：11351694
> 
> 赞同：6
> 
> 时间：2012-07-05T20:00:15.797
> 
> 标签：c#, .net

我想采用一个带有变量的数学表达式并打印（分配给字符串）填充了变量的公式。

```
int iTwo = 2;
int iResult = 0;

iResult = iTwo * iTwo;

string theString = (iTwo * iTwo).ToString(); 
```

在上面的代码中 iResult = 4 和 theString = "4"

我想做一些填充变量并返回数学表达式的事情，例如：

```
theString = (iTwo * iTwo).ExpressionToString(); 
```

最后以 theString = "2 * 2";

想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T20:30:15.703

你可以使用`Expression<>`类型。

```
public static string ExpressionToString<T>(Expression<Func<T>> e)
{
    var un = e.Body as BinaryExpression;
    if (un != null)
    {
        var left = un.Left.ToString();
        var leftEnd = left.Split('.').LastOrDefault();
        var right = un.Right.ToString();
        var rightEnd = right.Split('.').LastOrDefault();
        return e.Body.ToString().Replace(left, leftEnd).Replace(right, rightEnd);
    }
    return e.Body.ToString();
}

Console.WriteLine(ExpressionToString(() => iTwo * iTwo));

//prints (iTwo * iTwo) 
```

您需要使该方法更复杂才能解析比简单的二进制表达式更复杂的事物，但这是一般的想法。您可以这样做`e.Body.ToString()`，但是由于为您的 lambda 制作匿名类型的方式，这可能会得到丑陋的结果，例如：`"(value(TestApp.Program+<>c__DisplayClass3).iTwo * value(TestApp.Program+<>c__Dis playClass3).iTwo)"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T20:27:10.193

随着一些运算符重载...

```
class Expression {

    string exprStr;

    public static explicit operator Expression(int value) {
        return new Expression() { exprStr = value.ToString() };
    }

    public static Expression operator *(Expression exp, int value) {
        return new Expression() { exprStr = exp.exprStr + " * " + value.ToString() };
    }

    public override string ToString() {
        return exprStr;
    }

}

class Program {
    static void Main() {
        int iTwo = 2;
        string theString = ((Expression)iTwo * iTwo).ToString();
    }
} 
```

当然，您需要以类似的方式重载您需要的其他运算符（例如`+`，`/`等等）。
如果需要，您还应该提供接受除 int 以外的其他类型的方法，但基本思想保持不变。

请注意，您必须仅将第一个操作数强制转换为 Expression，否则您只会得到要转换的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T20:46:01.270

您可以使用`Expression<>`和存储在表达式中的参数信息来获得您想要的。将表达式存储在`Expression<>`变量中。

```
int n1 = 4;
int n2 = 3;
Expression<Func<int, int, int>> exp = (arg1, arg2) => arg1 * arg2;

string expString = exp.ToString(); // (arg1, arg2) => arg1 * arg2
int startRHS = expString.IndexOf("=>") + 2; // starting index of RHS
string onlyRHS = expString.Substring(startRHS).Trim();  // arg1 * arg2

// replace args with values
string withValues = onlyRHS.Replace(exp.Parameters[0].Name, n1.ToString()); // 4 * arg2
withValues = withValues.Replace(exp.Parameters[1].Name, n2.ToString()); // 4 * 3 
```

虽然这不是最强大的解决方案，但它适用于简单的场景。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T20:05:29.643

```
string ExpressionToString(int first, string operator, int second)
{
   StringBuilder sb = new StringBuilder();
   sb.Append(first.ToString());
   sb.Append(operator);
   sb.Append(second.ToString());
   return sb.ToString();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T20:07:24.907

```
public static string ExpressionToString(params object[] param)
{
    return string.Join(" ", param.Select(t => t.ToString()).ToArray());
} 
```

使用：

```
string result = Helper.ExpressionToString(2, "*", 2 , ">=", -10);
//result = "2 * 2 >= -10"; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-05T20:02:31.480

您可以创建自己的方法，该方法调用类似于以下内容：

```
public string ExpressionToString(int parameter1, string operator, int parameter2) {
  return string.Format("{0} {1} {2}", parameter1, operator, parameter2);
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-05T20:04:26.280

请使用创建您的方法并在其中使用以下代码来满足您的要求

```
string answer = string.Format("{0} {1} {2} = {3}", iTwo, iTwo, operator, result); 
```

# visual-studio-2010 - 如何在 Visual Studio 2010 中打开对话框编辑器

> ID：11351695
> 
> 赞同：2
> 
> 时间：2012-07-05T20:00:22.597
> 
> 标签：visual-studio-2010, dialog

我创建了一个简单的项目，它从对话框编辑器开始向表单添加控件。我关闭了对话框编辑器，但我无法弄清楚如何再次显示对话框编辑器以添加更多控件。

如何在 Visual Studio 2010 中打开对话框编辑器？

谢谢大卫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-14T20:55:32.263

按 CTRL+SHIFT+E 打开资源视图窗口，然后展开文件夹“对话框”，您将在那里看到您的对话框，您可以双击它打开您的对话框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T20:03:27.730

在菜单栏中，尝试

> > 查看 >> 工具栏 >> 对话框编辑器

# jquery - jQuery - 如何选择文本中的特定元素？

> ID：11351697
> 
> 赞同：1
> 
> 时间：2012-07-05T20:00:31.887
> 
> 标签：jquery, select, text

我有一些这样的文本行：

*   vt_wildshade2^508^508
*   vt_ailleurs2^1188^1188
*   ...
*   vt_high2^13652^13652

是否可以使用 jQuery 选择第二个“^”之后的最后一个数字并删除另一部分？

即保持每行的最后一个数字是这样的：

*   508
*   1188
*   ...
*   13652

我知道如何选择类 / id / 特定文本，但我挂断了。预先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:05:18.837

如果格式始终相同，您可以使用 javascript 的 String.split(delimiter) 方法将 '^' 处的字符串拆分为一个数组，该数组将返回如下内容：

```
 ["vt_wildshade2", "508", "508"] 
```

在这种情况下，以下代码将从您的行中获取最后一位：

```
 var str = "vt_wildshade2^508^508";
    var numbers = str.split("^")[2]; 
```

以供参考：

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split)

如果格式并不总是相同，则需要使用正则表达式以您需要的格式查找所需的数据，正如其他回答者所解释的那样。

不确定这些数据是如何进来的，您能否在脚本运行之前澄清这些数据是如何显示的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T20:07:28.603

```
var string = 'vt_wildshade2^508^508',
    number = string.match(/[0-9]+$/)[0];
console.log(number); 
```

`$`: 匹配字符串的结尾。
`[0-9]`: 匹配数字。
`+`：匹配前面的 1 次或多次。
`*`: 计​​算前面 0 次或更多次。如果您不确定字符串末尾是否有数字，
您可以更改`+`为，这种情况下将是一个空字符串。`*``number`

[**演示**](http://jsfiddle.net/ricardolohmann/CpzVm/0/)使用`+`
[**演示**](http://jsfiddle.net/ricardolohmann/CpzVm/2/)使用`*`

参考：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T20:06:46.277

如果你有：

```
vt_wildshade2^508^508 
```

说，从：

```
var theText = $('p').text(); 
```

所以，相当于：

```
var theText = 'vt_wildshade2^508^508'; 
```

您可以通过以下方式获得最终的“508”文本：

```
var finalNumber = theText.split('^')[2]; 
```

如果你需要它是一个数字，更像是：

```
var finalNumber = (theText.split('^').length > 2) ? parseInt(theText.split('^')[2], 10) : -1; 
```

如果没有第 3 个数字，则在上面的代码中默认为 -1。

# asp.net - 在 ASP.NET 中，如何将 ~/Application/Page.aspx 转换为 http://localhost:45/MyApp/Application/Page.aspx

> ID：11351699
> 
> 赞同：0
> 
> 时间：2012-07-05T20:00:40.883
> 
> 标签：asp.net

基本上我想将虚拟路径转换为绝对路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:11:18.463

尝试这个

```
/// <summary>
/// Return full path of the IIS application
/// </summary>
public string FullyQualifiedApplicationPath
{
    get
    {
        //Getting the current context of HTTP request
        var context = HttpContext.Current;

        //Checking the current context content
        if (context == null) return null;

        //Formatting the fully qualified website url/name
        var appPath = string.Format("{0}://{1}{2}{3}",
                                    context.Request.Url.Scheme,
                                    context.Request.Url.Host,
                                    context.Request.Url.Port == 80
                                        ? string.Empty
                                        : ":" + context.Request.Url.Port,
                                    context.Request.ApplicationPath);

        if (!appPath.EndsWith("/"))
            appPath += "/";

        return appPath;
    }
} 
```

# c# - DropDownList 导致错误：对象引用未设置为对象的实例

> ID：11351701
> 
> 赞同：3
> 
> 时间：2012-07-05T20:00:44.670
> 
> 标签：c#, asp.net, visual-studio-2010, entity-framework, drop-down-menu

我不断收到此错误，不知道为什么。我用谷歌搜索并扫描了 asp.net 网站两天，所以我需要一些帮助。错误是：

```
Object reference not set to an instance of an object 
```

这是我的代码：

```
DropDownList DropDownList1 =(DropDownList)ListView1.InsertItem.FindControl("DropDownList1");

string highToLow = DropDownList1.SelectedValue;
string lowToHigh = DropDownList1.SelectedValue;

if (highToLow == "1")
{
    var exmapleFilter = from users in testEntities.users 
                        orderby users.id descending
                        select users;

    ListView1.DataBind();
} 
```

我将下拉列表的值设置为 1 表示高，2 表示低，并且在选定的索引发生更改时，我想运行 ADO.net 实体框架代码以返回排序的数据列表。

我目前正在使用 linq 数据源和列表视图来显示我的数据库中的内容。

谢谢。

编辑：

这是堆栈跟踪

```
 System.NullReferenceException was unhandled by user code
   Message=Object reference not set to an instance of an object.
   Source=App_Web_s0ked5y3

   StackTrace:
   at Default.DropDownList1_SelectedIndexChanged(Object sender, EventArgs e)
   in Default:line 120

   at System.Web.UI.WebControls.ListControl.OnSelectedIndexChanged(EventArgs e)

   at System.Web.UI.WebControls.DropDownList.RaisePostDataChangedEvent()

   at System.Web.UI.WebControls.DropDownList.System.Web.UI.IPostBackDataHandler.
   RaisePostDataChangedEvent()

   at System.Web.UI.Page.RaiseChangedEvents()

   at System.Web.UI.Page.ProcessRequestMain(Boolean 
   includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
   InnerException: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T20:19:38.280

检查您的列表视图中是否有

```
<InsertItemTemplate>
   ....          
   <asp:DropDownList ID="DropDownList1" runat="server" />
   .... 
```

与

```
ListView1.InsertItem.FindControl("DropDownList1"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:34:19.563

“对象引用未设置为对象的实例”异常通常发生在您尝试使用值为 null 的引用变量时。这意味着堆上没有对应的对象。

因此，请确保仔细检查您的模板并在 pageload 事件中加载所有值。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T20:18:31.377

基于他们没有堆栈跟踪，我怀疑是行：

```
DropDownList DropDownList1 =
    (DropDownList)ListView1.InsertItem.FindControl("DropDownList1"); 
```

导致 oObject 引用未设置为对象的实例

一个强有力的理由：名为 InsertItem 的控件不是 ListView1 的子控件

# c# - Telerik 树视图 | 使用 NodeTemplate 时，NodeExpand 事件提供了错误的节点值

> ID：11351702
> 
> 赞同：4
> 
> 时间：2012-07-05T20:00:48.887
> 
> 标签：c#, asp.net, vb.net, treeview, telerik

我正在使用 Telerik 版本：2009.3.1208.0

我的任务是向节点添加一个箭头（在节点的右侧），以便人们可以左键单击它并访问上下文菜单。

![在此处输入图像描述](../Images/928c1e53a7725a5ce030674b981848fe.png)

我能够通过创建节点模板（订阅接口）然后将我的类分配给 NodeTemplate 属性（在 Page Init 上）来做到这一点

这是代码：

```
Imports System.Web.UI
Imports System.Web.UI.WebControls
Imports Telerik.Web.UI

    Public Class MyNodeTemplate
        Implements ITemplate

        Public Sub InstantiateIn(ByVal container As Control) Implements ITemplate.InstantiateIn
            Dim newLabel As New Label()
            newLabel.CssClass = "nodeLabel"
            newLabel.Text = DirectCast(container, RadTreeNode).Text

            Dim arrowDiv As New System.Web.UI.HtmlControls.HtmlGenericControl("DIV")
            arrowDiv.Attributes.Add("class", "nodeRightClickArrow")
            arrowDiv.Attributes.Add("onclick", "LeftClickContextMenuClick(event, this);")

            container.Controls.Add(newLabel)
            container.Controls.Add(arrowDiv)
        End Sub

    End Class 
```

一切似乎都很好**，除了**：

展开其中一个节点时，**NodeExpand 事件为正在展开的节点发送错误的值**。例如，如果我展开节点 3，它会为节点 1 提供值 (e.Node.Value)。有关更多说明，请参见下图。结果加载了错误的子节点。 ![在此处输入图像描述](../Images/b27c379bbeb4b1282080ecc4b973c6bf.png)

问题：

1) 为什么在添加 NodeTemplate 时 NodeExpand 会损坏？

2）有什么方法可以在节点上添加一个箭头，这样人们就可以在不覆盖NodeTemplate的情况下左键单击它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:46:38.397

我认为您需要使用 Node Click 方法，在节点中单击您的代码

```
protected void treeView_NodeClick(object sender, RadTreeNodeEventArgs e)
{
    int id;
    int.TryParse(e.Node.Value, out id);
    e.Node.Expanded = true // Expand the node manually, or IsExpanded, not remember
} 
```

需要工作。此外，您可以手动使用冷扩展节点。[Telerik 文档](http://www.telerik.com/help/aspnet-ajax/treeview-server-node-expand.html "Telerik 文档")说当节点扩展时会发生此事件，因此这意味着当节点扩展时会发生什么，我认为您需要扩展节点。

# php - XML simpleDOM sortedXPath - 如何选择和显示父属性？

> ID：11351705
> 
> 赞同：1
> 
> 时间：2012-07-05T20:00:58.617
> 
> 标签：php, xml, dom, simpledom

xml文件：

```
<?xml version='1.0' encoding='utf-8'?>

<MyName>

<EventGroup Name="Japan Shows" ID="341">
  <Event Name="Sapporo" ID="40163" StartTime="07/07/12 06:00:00" />
  <Event Name="Consadole" ID="5106" StartTime="07/07/12 07:30:00" />
  <Event Name="Albirex" ID="4063" StartTime="07/07/12 05:20:00" />
  <Event Name="Niigata" ID="1144" StartTime="07/07/12 09:00:00" />
</EventGroup>

<EventGroup Name="USA Shows" ID="342">
  <Event Name="Phoenix" ID="40162" StartTime="07/06/12 09:00:00" />
  <Event Name="California" ID="5105" StartTime="07/08/12 08:30:00" />
  <Event Name="Seattle" ID="4062" StartTime="07/08/12 02:20:00" />
  <Event Name="Chicago" ID="1143" StartTime="07/08/12 04:00:00" />
</EventGroup>

</MyName> 
```

代码 ：

```
<?php
include 'SimpleDOM.php';
$xml = simpledom_load_file($cache_file);
$count = 0;
$max = 50;

foreach ($xml->sortedXPath("EventGroup/Event", "@StartTime", SORT_ASC) as $EventGroup => $item) {

$time = date("d/m - H:i", strtotime($item['StartTime']));
$event_name = $item['Name'];

    if ($count < $max) {
        echo "$time";
        echo "$event_name";
    }
    $count++;
}
?> 
```

结果 ：

```
07/06 - 09:00 Phoenix
07/07 - 06:00 Sapporo
07/07 - 07:30 Consadole
07/08 - 04:00 Chicago 
```

等等……这些都是正确的。

但是如何显示适当的 EventGroup 名称？我如何选择并显示每个事件结果的父名称属性？我想要的结果应该是这样的：

```
USA Shows   07/06 - 09:00 Phoenix
Japan Shows 07/07 - 06:00 Sapporo
Japan Shows 07/07 - 07:30 Consadole
USA Shows   07/08 - 04:00 Chicago 
```

ETC...

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:01:25.617

您可以使用`parentNode()`. 然后就可以正常获取属性值了：

```
$parent = $item->parentNode();
echo $parent['Name']; 
```

# oracle - 使用链接到 Oracle 的 Excel 进行读/写访问

> ID：11351706
> 
> 赞同：0
> 
> 时间：2012-07-05T20:01:01.800
> 
> 标签：oracle, excel, automation, conditional, sql-loader

我想知道这是否可能。

基本上我有一组 9 个用户。顶部有一个管理员，其下有 2 个用户，每个用户下有 3 个用户，Oracle 数据库表中有一组 50 条记录。每条记录都有一个用于读取访问和写入访问的字段。

一开始，管理员拥有所有读取权限和写入权限。Excel 电子表格中有 2 个工作表，一个只读工作表和一个写工作表。每个都填充有数据库中的相关记录。管理员应该能够将读取权限和写入权限字段编辑为不同的用户名，保存更改，当该用户打开 Excel 工作表时，他们应该只能看到与他们关联的那些记录。

基本上我可以自动化吗？我想要发生的是，当用户打开 excel 表时，excel 表会获取与它们关联的记录，然后他们可以根据需要编辑/阅读。

# c# - 是否可以在运行时应用 [ScriptIgnore] 属性？

> ID：11351707
> 
> 赞同：0
> 
> 时间：2012-07-05T20:01:02.823
> 
> 标签：c#, data-annotations

我可以更改字段吗

```
public virtual ClassOne ClassOne { get; set; } 
```

至

```
[ScriptIgnore]
public virtual ClassOne ClassOne { get; set; } 
```

在运行时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T20:04:04.007

不，属性是生成的 IL 的一部分。

您*可以*使用反射 API（或[roslyn CTP](http://www.microsoft.com/en-us/download/details.aspx?id=27746)）在运行时创建具有此属性的类型，但您不能简单地将其“注入”到正在运行的代码中。

# networking - 用于捕获> 1024字节的数据包流并写入文件的工具？

> ID：11351708
> 
> 赞同：0
> 
> 时间：2012-07-05T20:01:03.673
> 
> 标签：networking, network-programming, netcat

我一直在使用 Netcat，最近发现它会将大小为 1328 字节的数据包（不包括标头）截断为 1024 字节。

我正在寻找一个程序，它捕获发送到指定端口的数据包的数据部分的总大小，并将所有接收到的数据按接收顺序写入指定文件。你知道任何这样的程序吗？

如果没有，我将创建自己的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-04T07:04:41.833

我也遇到过同样的问题，你可以加上'-j'参数来解决。

printf "tttt"|nc -u -j

# tridion - Tridion UI - 预览不更新

> ID：11351709
> 
> 赞同：5
> 
> 时间：2012-07-05T20:01:07.073
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

今天我根据[http://sdllivecontent.sdl.com/](http://sdllivecontent.sdl.com/)上的文档安装了 Tridion UI 。除了“更新预览”功能外，一切似乎都在工作。对组件进行更改后，页面正确显示预览已过期，但单击“更新预览”按钮会重新加载页面，除了显示相同的警告“此页面的预览不是最新的” ”。

我看到有另一篇与此相关的帖子（[Tridion New UI Preview Site 没有反映更改，除非发布](https://stackoverflow.com/questions/11263963/tridion-new-ui-preview-site-is-not-reflecting-with-the-changes-unless-pulished)）但我没有使用任何虚拟目录。

我已经解决了我在日志中发现的警告和错误，只留下一个警告（在部署程序和登台站点上）：

> 2012-07-05 19:44:25,085 WARN AmbientDataContext - 没有当前环境数据上下文 - 环境数据框架未正确初始化

启用调试日志记录后，我看到 AmbientDataContext 只是默认为 com.tridion.ambientdata.web.WebContext 我认为这是正确的吗？

有时，会显示会话清理错误 - 但不确定这是否与问题有关：

`$ 2012-07-05 19:52:55,300 ERROR SessionManagerImpl - Could not clean session storage after session expired! com.tridion.broker.StorageException: Exception while cleaning-up session data: Rollback took place, didn't removed., attempt to create delete event with null entity, attempt to create delete event with null entity, Rollback took place, didn't removed., attempt to create delete event with null entity, attempt to create delete event with null entity, Rollback took place, didn't removed., attempt to create delete event with null entity, attempt to create delete event with null entity at com.tridion.storage.persistence.session.SessionWrapperFactory.cleanupSessionData(SessionWrapperFactory.java:154) ~[cd_session.jar:na] at com.tridion.storage.session.SessionManagerImpl.expireSession(SessionManagerImpl.java:415) [cd_session.jar:na] at com.tridion.storage.session.SessionManagerImpl.performCleanup(SessionManagerImpl.java:231) [cd_session.jar:na] at com.tridion.storage.persistence.session.SessionsCleanerMonitor.run(SessionsCleanerMonitor.java:54) [cd_session.jar:na] at java.lang.Thread.run(Unknown Source) [na:1.6.0_26] 2012-07-05 19:52:55,300 ERROR SessionsCleanerMonitor - Could not perform sessions clean-up. Will retry in 120000 milliseconds. com.tridion.storage.persistence.session.SessionHandlingException: Could not clean session storage after session expired: Exception while cleaning-up session data: Rollback took place, didn't removed., attempt to create delete event with null entity, attempt to create delete event with null entity, Rollback took place, didn't removed., attempt to create delete event with null entity, attempt to create delete event with null entity, Rollback took place, didn't removed., attempt to create delete event with null entity, attempt to create delete event with null entity, Exception while cleaning-up session data: Rollback took place, didn't removed., attempt to create delete event with null entity, attempt to create delete event with null entity, Rollback took place, didn't removed., attempt to create delete event with null entity, attempt to create delete event with null entity, Rollback took place, didn't removed., attempt to create delete event with null entity, attempt to create delete event with null entity, Exception while cleaning-up session data: Rollback took place, didn't removed., attempt to create delete event with null entity, attempt to create delete event with null entity, Rollback took place, didn't removed., attempt to create delete event with null entity, attempt to create delete event with null entity, Rollback took place, didn't removed., attempt to create delete event with null entity, attempt to create delete event with null entity at com.tridion.storage.session.SessionManagerImpl.expireSession(SessionManagerImpl.java:444) ~[cd_session.jar:na] at com.tridion.storage.session.SessionManagerImpl.performCleanup(SessionManagerImpl.java:231) ~[cd_session.jar:na] at com.tridion.storage.persistence.session.SessionsCleanerMonitor.run(SessionsCleanerMonitor.java:54) ~[cd_session.jar:na] at java.lang.Thread.run(Unknown Source) [na:1.6.0_26]`

任何帮助将不胜感激？不知道还有什么可以尝试的。

谢谢

菲尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T09:20:25.077

发生该错误是因为 UI 每次在页面或内容发生更改或按下“更新预览”按钮时创建的临时文件未创建，因此当它尝试删除它们时会向您显示该错误。所以，这个错误更像是其他错误的征兆，而不是错误本身。您需要检查的是这些临时文件是否已创建。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T07:46:04.267

问题原来是发布属性中的“发布路径”和“发布 URL”值不正确。恢复到默认值后，它现在可以工作了——非常感谢 Tridion PS 的这一点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T12:42:36.220

文档的这一部分 (http://sdllivecontent.sdl.com/LiveContent/content/en-US/UIU4SDLT2011SP1/task_89D69D4B67C340388652DEAECA6B5B79) 介绍了会话预览的设置。

您似乎错过了配置此部分的一些步骤。

# python - 使用 tweepy 获取用户整个 Twitter 时间线

> ID：11351711
> 
> 赞同：12
> 
> 时间：2012-07-05T20:01:13.580
> 
> 标签：python, twitter, tweepy

我正在尝试使用 python 和 tweepy 检索包含我个人 twitter 状态的全部内容的列表。

我已通过 OAuth 成功进行身份验证，但似乎无法从 twitter 收到超过 800 条状态更新。我的推特简历页面显示我有超过 2000 条推文。我完全在 Twitter 强加给我们的 3200 条推文限制之内。

任何帮助将不胜感激！

这是我当前的代码（减去 OAuth API 身份验证）：

```
for page in tweepy.Cursor(api.user_timeline, count=200).pages(16):
    page_list.append(page)
    n = n+1
    print n

for page in page_list:
    for status in page:
       print status.text 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T22:30:44.383

您需要指定 include_rts=True 作为 api.user_timeline 的参数；默认情况下不包括转推。如果你转发了很多东西，这很可能是你丢失的推文消失的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T22:23:41.880

Twitter 不会返回超过 800 个状态。这写在 Twitter API 文档中（[https://developer.twitter.com/en/docs/tweets/timelines/api-reference/get-statuses-home_timeline](https://developer.twitter.com/en/docs/tweets/timelines/api-reference/get-statuses-home_timeline)）：

> 此方法最多只能返回所有页面的 800 个状态，包括转发。

# sql-server - 将图像存储在数据库中：优缺点

> ID：11351712
> 
> 赞同：1
> 
> 时间：2012-07-05T20:01:14.397
> 
> 标签：sql-server, database, blob

我的问题可能与其他人非常相似，但不一样。在我正在开发的信息系统中，我面临下一个问题：我需要存储许多图像数据（每月大约 10 万个，每年 1.2-150 万个）。我正在考虑两种方法：作为 BLOB 存储在 DB 中或存储在 DB 文件路径中。从相关问题中，我读到仅存储在数据库中的参考对性能来说更便宜。也无需编写处理程序（在 asp.net 中从 DB 获取 BLOB 字段）。但是拥有超过 100 万个文件 - 这是个好主意吗？备份非常困难，当一些文件被意外删除时，数据库不再一致。将所有内容存储在数据库中的方法不存在这些问题。你会推荐什么？有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:19:16.400

你错过了一件关键的事情。将文件存储在将其存储在文件系统中的数据库中，而不是存储在 MDF 文件中。查看 FileStream 的文档。集成备份，通过 SQL 完全访问，但文件位于单独的共享和/甚至另一台计算机上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:04:25.793

有了这么多文件，无论如何备份都会很痛苦。你现在最好采取更便宜的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T20:25:31.033

我会选择数据库...如果您曾经在同一个文件夹中看到过 100 万个文件，那么在文件系统上可能会非常困难并且难以导航

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T20:35:50.507

您可以通过多种方式对此进行攻击。首先，将图像存储在数据库中是一个坏主意。

更好的方法是存储在分布式文件系统中。

具有可扩展的命名模式，并将该位置信息存储在数据库或分布式哈希表中。所有的军团都是这样做的。

# c# - 允许消除 lambda 表达式中的参数的技术的名称是什么？

> ID：11351714
> 
> 赞同：3
> 
> 时间：2012-07-05T20:01:17.187
> 
> 标签：c#, lambda

以下陈述完全可以。

```
var sb = new string[] { "line1", "line2" };
sb.ForEach(Console.WriteLine); 
// same as sb.ForEach(item => Console.WriteLine(item)); 
```

这种不使用 lambda 表达式中的参数的做法叫什么名字？

谢谢，

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T20:06:38.790

“方法组转换”是您正在寻找的术语。它自动将一组方法（重载）转换为委托。

在这种情况下，`Console.WriteLine`是一组大约 19 个不同的方法，它们都以相同的名称重载。然后编译器确定这些重载之一是否与预期的委托兼容（`Action<String>`是唯一的委托）。由于有一个匹配，它会为您转换`Console.WriteLine`为`new Action<String>(Console.WriteLine)`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-05T20:07:53.410

将形式的 lambda 转换`Method(x => f(x))`为`Method(f)`称为[eta reduction](http://www.haskell.org/haskellwiki/Eta_conversion)。我不知道 C# 编译器是否在内部执行 eta 缩减，但它确实支持将方法组（在您的情况下为 Console.WriteLine）转换为委托类型（可能`Action<string>`在这里）。

C# 编译器会将重载包装`Console.WriteLine(string)`在`Action<string>`委托中并将其传递给您的`ForEach`方法。

C# 规范定义了将方法组转换为兼容委托类型的规则：

> **6.6 方法组转换**
> 
> 从方法组（第 7.1 节）到兼容委托类型存在隐式转换（第 6.1 节）。给定一个委托类型 D 和一个被归类为方法组的表达式 E，如果 E 包含至少一个适用于其正常形式（第 7.5.3.1 节）构造的参数列表的方法，则存在从 E 到 D 的隐式转换通过使用 D 的参数类型和修饰符

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-09T14:03:34.183

虽然前面的两个答案都很好 - 并且正确 - 如果您有如下代码，还有一个额外的答案：

```
int i = 7;
return () => Foo(i); 
```

这就是所谓的*闭包*，因为虽然 lambda 没有参数，但它将整数包含在父作用域中。当使用返回的匿名方法时，它仍然可以使用变量 i，就好像它从未超出范围一样......而且因为它是封闭的，所以它没有！

根据您的原始问题，您展示了 eta 减少或方法组转换。你的问题*措辞*听起来有点像结束语。

# asp.net-mvc-3 - MVC 3 在保存到数据库之前检查重复项，显示重复的错误消息

> ID：11351717
> 
> 赞同：0
> 
> 时间：2012-07-05T20:01:30.683
> 
> 标签：asp.net-mvc-3

我需要在控制器内的创建和编辑方法中保存到数据库之前检查重复项。然后我需要显示重复的错误消息而不是通用错误消息。

我对重复的定义是：userid + Code1ID + Code2ID + Code3ID + Code4ID。

问题：当上述值的组合已经存在时，如何检查重复项？

**表名**

```
 Character:
CharacterID int 
UserID int
Code1ID int
Code2ID int
Code3ID int
Code4ID int
Name Varchar(40) 
```

我的主键由 UserID + Code1ID + Code2ID + Code3ID + Code4ID 组成。这保证没有重复输入到数据库中。但我返回的错误消息是一般错误消息。

我需要先检查重复项，然后仅根据重复项返回警告消息或错误消息。

**这是控制器内部的编辑方法**

```
 //
        // GET: /Character/Edit/5

        public ActionResult Edit(int id)
        {
            Character character = db.Characters.Find(id);
        PopulateUserIDDropDownList(character.UserID);
            PopulateCode1IDDropDownList(character.Code1ID);
            PopulateCode2IDDropDownList(character.Code2ID);
            PopulateCode3IDDropDownList(character.Code3ID);
            PopulateCode4IDDropDownList(character.Code4ID);
            return View(character);
        }

        //
        // POST: /Character/Edit/5

        [HttpPost]
        public ActionResult Edit(Character character)
        {
            try
            {
                if (ModelState.IsValid)
                {
                    db.Entry(character).State = EntityState.Modified;
                    db.SaveChanges();
                    return RedirectToAction("Index");
                }
            }
            catch
            {
                ModelState.AddModelError("", "Generic Error. Unable to save changes. Try again, and if the problem persists, see your system administrator.");
            }
        PopulateUserIDDropDownList(character.UserID);
            PopulateCode1IDDropDownList(character.Code1ID);
            PopulateCode2IDDropDownList(character.Code2ID);
            PopulateCode3IDDropDownList(character.Code3ID);
            PopulateCode4IDDropDownList(character.Code4ID);
            return View(character);
        } 
```

**这是控制器内部的创建方法**

```
 //
    // GET: /Character/Create

    public ActionResult Create()
    {
    PopulateUserIDDropDownList();
        PopulateCode1IDDropDownList();
        PopulateCode2IDDropDownList();
        PopulateCode3IDDropDownList();
        PopulateCode4IDDropDownList();
        return View();
    } 

    //
    // POST: /Character/Create

    [HttpPost]
    public ActionResult Create(Character character)
    {
        try
        {
            if (ModelState.IsValid)
            {
                db.Characters.Add(character);
                db.SaveChanges();
                return RedirectToAction("Index");
            }
        }
        catch
        {
            ModelState.AddModelError("", "Generic Error.Unable to save changes. Try again, and if the problem persists, see your system administrator.");
        }
    PopulateUserIDDropDownList(character.UserID);
        PopulateCode1IDDropDownList(character.Code1ID);
        PopulateCode2IDDropDownList(character.Code2ID);
        PopulateCode3IDDropDownList(character.Code3ID);
        PopulateCode4IDDropDownList(character.Code4ID);
        return View(character);
    } 
```

**模型**

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;

namespace myproject.Models
{
    public class Character
    {
        [Key]
        public int CharacterID { get; set; }

        [Required(ErrorMessage = "User is required.")]
        [Display(Name = "User")]
        public Guid UserId { get; set; }

        [Required(ErrorMessage = "Code1 is required.")]
        [Display(Name = "Code1")]
        public int Code1ID { get; set; }

        [Required(ErrorMessage = "Code2 is required.")]
        [Display(Name = "Code2")]
        public int Code2ID { get; set; }

        [Required(ErrorMessage = "Code3 is required.")]
        [Display(Name = "Code3")]
        public int Code3ID { get; set; }

        [Required(ErrorMessage = "Code4 is required.")]
        [Display(Name = "Code4")]
        public int Code4ID { get; set; }

        [Required(ErrorMessage = "level is required.")]
        [Display(Name = "Level")]
        public int LevelID { get; set; }

        public virtual aspnet_Users Aspnet_User { get; set; }
        public virtual Code1 Code1 { get; set; }
        public virtual Code2 Code2 { get; set; }
        public virtual Code3 Code3 { get; set; }
        public virtual Code4 Code4 { get; set; }

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T20:11:11.580

您需要将`remote`属性添加到要检查重复的列中。[你可能会在这里](http://www.aaronstannard.com/post/2010/12/07/remote-validation-asp-net-mvc3.aspx)看到一个例子。您还可以根据[此处](https://stackoverflow.com/questions/6000495/asp-net-mvc-3-remote-validation-set-custom-error-message?rq=1)描述的逻辑自定义错误消息。您可能需要在具有完整键的视图模型中添加另一个字段，然后在其上添加远程属性。如果您想要单个消息，那么您可能需要[在此处](http://dotnetslackers.com/articles/aspnet/Understanding-ASP-NET-MVC-Model-Binding.aspx)描述自定义模型绑定器。或者如上所述添加另一个包含键连接值的字段并将远程属性添加到该字段并启用`validationsummary`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T20:33:09.857

在保存到数据库之前...使用这些值搜索数据库...如果您找到某些内容...您有重复项，您可以显示正确的消息。

在编辑时，您需要为查询排除正在编辑的当前对象。

您可以使用这些 ID 作为 WHERE 部分在您的存储库上执行 Count() ...如果结果为 1 或更多...您有重复项。

# java - 我如何知道 BufferedReader 是否与 DataInputStream 链接？

> ID：11351719
> 
> 赞同：1
> 
> 时间：2012-07-05T20:01:45.490
> 
> 标签：java, file, java-7

在一种方法中，我需要一个将 DataInputStream 作为参数包装的 BufferedReader。我想将方法​​声明为：

```
public void firstPass(BufferedReader inStream){ // some code ... } 
```

但我不知道如何检查 inStream 是否包装了 DataInputStream。

我试过了

```
public static void firstPass(BufferedReader inStream){
    if (inStream instanceof DataInputStream){

    }       
} 
```

但代码无法编译（Eclispe 不接受代码：“不兼容的条件操作数类型 BufferedReader 和 DataInputStream”）。

* * *

为什么需要这个？因为我想使用相同的变量 inStream ：

*   来自 BufferedReader 的方法 readLine()
*   来自 DataInputStream 的方法 readDouble()

所以我需要一个链接两个类的流。

我正在使用 Java 7 JDK 进行编程。

有人可以帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:06:12.020

DataInputStream 永远不能是 BufferedReader 的实例——它们都在不同的类层次结构中。

BufferedReader 包装了另一个 Reader，而不是 Stream。

您可以使用[InputStreamReader](http://docs.oracle.com/javase/7/docs/api/java/io/InputStreamReader.html)从 Streams 桥接到 Readers 。

从同一个 Reader 读取双精度和行并没有什么意义——一个是原始二进制数据，另一个是字符数据。也许您需要阅读双打的文本编码，并使用`Double.parseDouble(text)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T20:06:37.523

A. 不可能通过向您的方法添加一个接受 bufferedReader 参数的标志来完成您想要完成的事情

B. 目前尚不清楚您如何将 DataInputStream 传递给 BufferedReader（可能是通过 InputStreamReader 对吗？）但无论如何，将 BufferedReader 和 DataInputStream 一起使用似乎是错误的。BufferedReader 将像普通 InputStream 一样使用您的 DataInputStream，所以我不知道您为什么要将 DataInputStream 放在它周围

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T20:14:01.813

**DataInputStream**类不是**BufferedReader类的子类型**

```
class DataInputStream extends FilterInputStream implements DataInput {}

class BufferedReader extends Reader {} 
```

**更多信息：**

*   [http://docs.oracle.com/javase/7/docs/api/java/io/DataInputStream.html](http://docs.oracle.com/javase/7/docs/api/java/io/DataInputStream.html)
*   [http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T20:09:21.037

`BufferedReader`不是的子类，`DataInputStream`所以你的错误是合乎逻辑的......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T20:09:28.690

BufferedReaders 用于文本数据，DataInputStream 用于二进制数据。除非你喜欢混淆别人，否则你永远不会把一个与另一个包装起来。

您可以使用 DataInputStream 来包装 BufferedInputStream （以其他方式包装它没有任何意义）

您可以将 BufferedReader 包裹在 InputStreamReader 周围，但没有简单的方法可以确定这已完成。

你可以写

```
BufferedReader br = new BufferedReader(new FileReader(name)); 
```

但是您必须使用**反射库**来确定 BufferedReader 包装的内容。

# debugging - Visual Studio 2008 项目和调试

> ID：11351720
> 
> 赞同：0
> 
> 时间：2012-07-05T20:01:57.110
> 
> 标签：debugging, visual-studio-2008, symbols

我不是普通的 Visual Studio 用户...

我想对我拥有的现有 VS 2008 项目进行一些更改。我将项目复制到一个新文件夹。

我似乎能够更新新位置的代码并成功编译和构建。当我尝试使用调试器时，虽然我在遇到断点时看到了错误：

“源代码与原始版本不同。”

在项目调试器启动时的输出窗口中，我看到用于调试的 dll 是从原始文件夹结构中检索的，而不是新位置中的那个。我还在 Debug->Windows->Modules 窗口中看到了错误的路径。

似乎应该很容易在某处指定正确的路径......我搜索了新项目中的所有文件，但我没有看到对旧路径的引用。而且我在 Project -> Project Properties 下看不到设置路径的选项。我删除了所有 obj 文件，对项目进行了清理和重建，但这无济于事。

我在哪里可以更改设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:04:27.010

您在此解决方案中有多个项目吗？是否有一些引用旧路径的项目的引用？您可能想要压缩旧的解决方案并将其删除。然后查找构建错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:18:28.380

问题似乎是您的可执行文件正在使用带有可执行文件的旧 dll。确保旧 dll 未注册（使用 Regsvr32 /u nameofthedll.dll）。我猜您的项目必须构建一个新的 dll，因此请确保将其复制到可执行文件的文件夹中。

如果您想自动化复制过程，您可以进入您的项目属性、构建事件、发布构建事件并在 $(OutDir) 文件夹中放置一行复制 dll 的行。像这样的东西：“xcopy /Y /Q /D PathOfNewDll\nameofthedll.dll $(OutDir)”

# iframe - 单击 iframe 时，Bootstrap 下拉菜单不会折叠

> ID：11351726
> 
> 赞同：7
> 
> 时间：2012-07-05T20:02:17.587
> 
> 标签：iframe, drop-down-menu, twitter-bootstrap

我在一个 Web 应用程序上使用 Bootstrap，该应用程序有一些包含 iframe 的页面。目前，我们无法移除 iframe。Bootstrap 下拉菜单可以正常打开，但是如果您单击属于 iframe 的页面的任何区域，则不会触发折叠事件。

这里的例子：http: [//jsfiddle.net/mark47/bCzMf/3/](http://jsfiddle.net/mark47/bCzMf/3/)

尝试单击以关闭 iframe 之外的任何位置，然后在 iframe 内关闭菜单。注意：iframe 内容似乎没有出现在小提琴中，但你可以看到我的问题。

知道如何在单击页面上的任何位置时使其折叠吗？

更新：在@baptme 回答的帮助下，我能够让它工作。在我下面的回答中描述。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-10-27T10:57:22.430

我使用不同的方法解决了这个问题。我的解决方案是在窗口中添加一个模糊事件。也许不像其他一些建议那么优雅，但这是我发现的一个有效的建议。

```
$(window).on('blur',function() { $('.dropdown-toggle').parent().removeClass('open'); } ); 
```

我想避免覆盖或透明蒙版，所以这似乎是一个不错的选择。我欢迎有关改进这种方法的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T20:36:01.947

下拉菜单的关闭是通过点击页面触发的。

由于 iframe 不是页面，因此它不会关闭。

您必须使用 javascript 删除`data-toggle="dropdown"`调用下拉列表`$('.dropdown-toggle').dropdown()`

然后在 iframe 的顶部显示一个透明的 div，例如`.transparent-mask`

并使用javascript（jQuery personnaly）从单击 或文档中删除`.open`该类。`.dropdown``.transparent-mask`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T19:35:42.130

基于@baptme 的回答和在另一个问题中找到的一些[关于制作覆盖的提示](https://stackoverflow.com/questions/10226448/detecting-click-inside-iframe-using-invisible-div)，我能够让它工作。诀窍是得到它，这样当菜单关闭时你仍然可以与 iframe 的内容进行交互。

我所做的是在 iframe 区域上放置一个覆盖层——因为 iframe 的大小在站点的不同部分有所不同，所以我使用 jquery 来动态生成大小。默认设置`visibility: hidden`. 然后我不得不修改 bootstrap-dropdown.js 以更改下拉菜单打开时的可见性。

请参阅[此处的工作小提琴](http://jsfiddle.net/mark47/rFbVT/)。

我不必像最初建议`data-toggle="dropdown"`的那样删除 or类。`.open`

希望其他人会发现这很有用！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-02T14:43:35.817

我今天看到了这篇文章，发现下面的代码对我有用。我只是附加到引导事件并动态创建了一个背景。我想设置不透明度，这样用户就知道点击 iframe 部分不会做任何事情。另外，我的页面不包含 iframe，我希望它们以相同的方式运行。我还必须禁用非 iframe 页面的滚动。希望这段代码有所帮助。

```
var navBackdrop =
    $('<div id="nav-backdrop" class="modal-backdrop" tabindex="-1" style="z-index: 0; top: 50px; overflow-y: auto; display: none; opacity: .4"></div>');

$(document).ready(function () {
    $("body").append(navBackdrop);

    $(".navbar").on("shown.bs.dropdown", ".dropdown", function () {
        navBackdrop.show();
        $("body").css("overflow", "hidden");
    }).on("hide.bs.dropdown", ".dropdown", function () {
        navBackdrop.hide();
        $("body").css("overflow", "auto");
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-24T13:54:48.417

在更多情况下，当单击另一个区域时，下拉菜单不会折叠，例如，如果用户单击在`event.stopPropagation();`单击事件中使用的另一个元素。

我的解决方案：

```
$(document).on('show.bs.dropdown', function ( event ) {

    //Get the element that responsible on opening the drop-down (parent of the clicked element)
    var $target = $(event.target);

    //Close the menu when the user click on any area
    $(document).one( 'mouseup.collapseBsDropdown', function() {
         $target.removeClass('open');
         $(window).off('blur.collapseBsDropdown');
    });
    $(window).one( 'blur.collapseBsDropdown', function() {
        $target.removeClass('open');
        $(document).off('mouseup.collapseBsDropdown');
    });
}); 
```

感谢@Witchfinder，我为 Iframe 问题混合了您的解决方案。

# java - 在 Swing 中使图像按钮看起来被按下/单击

> ID：11351728
> 
> 赞同：9
> 
> 时间：2012-07-05T20:02:36.917
> 
> 标签：java, swing, icons, jbutton

我创建了一个 JButton，它的图像设置为代表按钮的图标。现在，我已经设置

```
setContentAreaFilled(false);
setBorderPainted(false);
setOpaque(false); 
```

这使图像按钮看起来不错的属性，没有边框或背景颜色等。

现在的问题是，当我单击图像时，它没有显示按钮的 onclick 效果，因此当涉及一些后台处理或在单击按钮时触发某些事件需要时间来处理请求并返回某些内容时，它给人的印象是按钮没有被点击，用户可能会继续点击它。

如何制作一个带有上述属性的图标集的按钮，但我可以控制设置 onpress 或 onmouseover 事件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T20:07:40.893

我找到了答案：[`setRolloverIcon()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#setRolloverIcon%28javax.swing.Icon%29)并且[`setPressedIcon()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#setPressedIcon%28javax.swing.Icon%29)会施展魔法。

# python - 编写结构文件以安装软件包的新手

> ID：11351734
> 
> 赞同：1
> 
> 时间：2012-07-05T20:03:14.957
> 
> 标签：python, fabric

```
from fabric.api import sudo, put, run

def install():
    run('source /home/user/.virtualenvs/demo/bin/activate')
    run('pip install requests')

if __name__ == '__main__':
    install()
# to run this, do fab fabfile 
```

Q1。我想在那个环境中安装 pip。但是在脚本运行之后，requests 并没有安装在 virtualenv 中。为什么？

Q2。我被要求提供主机信息（以下也是 Q1 的日志）。如果我的目标是在本地运行，有没有更好的方法来处理这个问题？

```
No hosts found. Please specify (single) host string for connection: localhost
[localhost] run: source /home/user/.virtualenvs/demo/bin/activate
[localhost] Passphrase for private key: 
[localhost] Login password: 
[localhost] run: pip install requests
[localhost] out: Requirement already satisfied (use --upgrade to upgrade): requests in /usr/local/lib/python2.7/dist-packages
[localhost] out: Requirement already satisfied (use --upgrade to upgrade): certifi>=0.0.7 in /usr/local/lib/python2.7/dist-packages (from requests)
[localhost] out: Requirement already satisfied (use --upgrade to upgrade): oauthlib>=0.1.0,<0.2.0 in /usr/local/lib/python2.7/dist-packages (from requests)
[localhost] out: Requirement already satisfied (use --upgrade to upgrade): chardet>=1.0.0 in /usr/lib/python2.7/dist-packages (from requests)
[localhost] out: Requirement already satisfied (use --upgrade to upgrade): rsa in /usr/local/lib/python2.7/dist-packages (from oauthlib>=0.1.0,<0.2.0->requests)
[localhost] out: Requirement already satisfied (use --upgrade to upgrade): pyasn1>=0.0.13 in /usr/local/lib/python2.7/dist-packages (from rsa->oauthlib>=0.1.0,<0.2.0->requests)
[localhost] out: Cleaning up...
[localhost] out: 
```

* * *

**更新**

我可以在一个`run`命令中安装这些软件包。有没有更好的方法来做到这一点？

谢谢。

* * *

这是更新代码：

```
from fabric.api import sudo, put, run
from fabric.context_managers import prefix

def install():
    with prefix('source /home/user/.virtualenvs/demo/bin/activate'):
        run('pip install requests')

if __name__ == '__main__':
    install() 
```

[http://docs.fabfile.org/en/1.2.0/api/core/context_managers.html?highlight=prefix#fabric.context_managers.prefix](http://docs.fabfile.org/en/1.2.0/api/core/context_managers.html?highlight=prefix#fabric.context_managers.prefix)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:23:57.160

每个 fabric.run 命令生成一个单独的子shell，在其中执行命令。

如果您在其中一个运行命令中激活 virtualenv，则该环境不可用于在单独调用运行命令中执行后续命令。

有关正确的解决方案，请参阅以下有关 stackoverflow 的讨论：

*   [以部署用户身份通过​​结构激活 virtualenv](https://stackoverflow.com/questions/1180411/activate-a-virtualenv-via-fabric-as-deploy-user)

检查 contextmanager 的使用以在激活 virtualenv 的情况下运行命令。

# android - 从自定义列表视图启动 Activity

> ID：11351735
> 
> 赞同：0
> 
> 时间：2012-07-05T20:03:19.590
> 
> 标签：android, android-layout, android-intent, android-listview

我正在尝试从自定义 lisview 启动一项活动。我已经隐藏了 onItemclick 方法并通过创建新意图调用了该类！

```
public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {

    if (position == 0) {
        Intent i = new Intent(getApplicationContext(), InstalledApps.class);
        startActivity(i);
    }
} 
```

但是当我尝试启动它时，它给了我一个空指针异常。我想要做的是，获取单击项目的位置并通过 if 子句将其引导到正确的活动。以下是日志猫输出。

```
07-05 04:39:52.718: W/dalvikvm(3189): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
07-05 04:39:52.758: E/AndroidRuntime(3189): FATAL EXCEPTION: main
07-05 04:39:52.758: E/AndroidRuntime(3189): java.lang.NullPointerException
07-05 04:39:52.758: E/AndroidRuntime(3189):     at com.sliit.droidman.thirdpartyapplist.ListViewAdapter.getView(ListViewAdapter.java:69)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at android.widget.AbsListView.obtainView(AbsListView.java:2267)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at android.widget.ListView.onMeasure(ListView.java:1156)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at android.view.View.measure(View.java:15172)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at     android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at android.view.View.measure(View.java:15172)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at android.view.View.measure(View.java:15172)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:833)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at android.view.View.measure(View.java:15172)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2148)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at android.view.View.measure(View.java:15172)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1848)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1100)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1273)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:998)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4212)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at android.view.Choreographer.doCallbacks(Choreographer.java:555)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at android.view.Choreographer.doFrame(Choreographer.java:525)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at android.os.Handler.handleCallback(Handler.java:615)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at android.os.Handler.dispatchMessage(Handler.java:92)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at android.os.Looper.loop(Looper.java:137)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at android.app.ActivityThread.main(ActivityThread.java:4745)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at java.lang.reflect.Method.invokeNative(Native Method)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at java.lang.reflect.Method.invoke(Method.java:511)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
07-05 04:39:52.758: E/AndroidRuntime(3189):     at dalvik.system.NativeStart.main(Native Method) 
```

请让我知道我在这里做错了什么！

适配器类。

```
 package com.sliit.droidman.thirdpartyapplist;
 import com.sliit.droidman.R;

 import android.app.Activity;  
 import android.graphics.drawable.Drawable;
 import android.view.LayoutInflater;  
 import android.view.View;  
 import android.view.ViewGroup;  
 import android.widget.BaseAdapter;  
 import android.widget.ImageView;
 import android.widget.TextView;  

 public class ListViewAdapter extends BaseAdapter  
 {  
Activity context;  
String title[];  
String description[];
Drawable icon[];

public ListViewAdapter(Activity context, String[] title, String[] description , Drawable[] ico) {  
    super();  
    this.context = context;  
    this.title = title;  
    this.description = description;
    this.icon = ico;
}  

public int getCount() {  
    // TODO Auto-generated method stub  
    return title.length;  
}  

public Object getItem(int position) {  
    // TODO Auto-generated method stub  
    return null;  
}  

public long getItemId(int position) {  
    // TODO Auto-generated method stub  
    return 0;  
}  

private class ViewHolder {  
    TextView txtViewTitle;  
    TextView txtViewDescription;
    ImageView image;
}  

public View getView(int position, View convertView, ViewGroup parent)  
{  
    // TODO Auto-generated method stub  
    ViewHolder holder;  
    LayoutInflater inflater =  context.getLayoutInflater();  

    if (convertView == null)  
    {  
        convertView = inflater.inflate(R.layout.listitem_row, null);  
        holder = new ViewHolder();  
        holder.txtViewTitle = (TextView) convertView.findViewById(R.id.appname);  
        holder.txtViewDescription = (TextView) convertView.findViewById(R.id.packagename);
        holder.image = (ImageView) convertView.findViewById(R.id.avatar);
        convertView.setTag(holder);  
    }  
    else  
    {  
        holder = (ViewHolder) convertView.getTag();  
    }  

    holder.txtViewTitle.setText(title[position]);  
    holder.txtViewDescription.setText(description[position]);
    holder.image.setImageDrawable(icon[position]);

return convertView;  
}  

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:08:30.680

`07-05 04:39:52.758: E/AndroidRuntime(3189): at com.sliit.droidman.thirdpartyapplist.ListViewAdapter.getView(ListViewAdapter.java:69)`

`com.sliit.droidman.thirdpartyapplist.ListViewAdapter`在'方法的第69 行有一个空指针`getView`。找出导致该空指针的原因并确保它不会发生。

看来第69行如下

```
 holder.txtViewTitle.setText(title[position]); 
```

可能导致这种情况的一些事情：

*   也许标题数组为空。我认为如果只是`position`参数太大，你会得到一个 ArrayIndexOutOfBoundsException 。
*   实例的`txtViewTitle`成员是，可能是因为第 59 行中的 id不正确。`holder``null``R.id.appname`

您可以通过在调试器的第 69 行放置一个断点并检查 and 的值来解决这个`holder.txtViewTitle`问题`title`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T21:45:46.853

试试这个：

```
package com.sliit.droidman.thirdpartyapplist;
 import com.sliit.droidman.R;

 import android.app.Activity;  
 import android.graphics.drawable.Drawable;
 import android.view.LayoutInflater;  
 import android.view.View;  
 import android.view.ViewGroup;  
 import android.widget.BaseAdapter;  
 import android.widget.ImageView;
 import android.widget.TextView;  

 public class ListViewAdapter extends BaseAdapter  
 {  
Activity context;  
String title[];  
String description[];
Drawable icon[];

public ListViewAdapter(Activity context, String[] title, String[] description , Drawable[] ico) {  
    super();  
    this.context = context;  
    this.title = title;  
    this.description = description;
    this.icon = ico;
}  

public int getCount() {  
    // TODO Auto-generated method stub  
    return title.length;  
}  

public Object getItem(int position) {  
    // TODO Auto-generated method stub  
    return null;  
}  

public long getItemId(int position) {  
    // TODO Auto-generated method stub  
    return 0;  
}  

 //You have to overide the getView method
@Override
public View getView(int position, View convertView, ViewGroup parent)  
{  
    //added row, to convert view
    View row = convertView; 
    ViewHolder holder;  

    if (convertView == null)  
    {  
        //added casting to the context 
         LayoutInflater inflater =  ((Activity)this.context).getLayoutInflater();    
        //made changes here
        row = inflater.inflate(R.layout.listitem_row, parent, false);  
        holder = new ViewHolder();  
        holder.txtViewTitle = (TextView) convertView.findViewById(R.id.appname);  
        holder.txtViewDescription = (TextView) convertView.findViewById(R.id.packagename);
        holder.image = (ImageView) convertView.findViewById(R.id.avatar);
        row.setTag(holder);  
    }  
    else  
    {   //added row
        holder = (ViewHolder) row.getTag();  
    }  

    holder.txtViewTitle.setText(title[position]);  
    holder.txtViewDescription.setText(description[position]);
    holder.image.setImageDrawable(icon[position]);
//changed to row
return row;  
}  

 }  
static  class ViewHolder {  
    TextView txtViewTitle;  
    TextView txtViewDescription;
    ImageView image;
} 
```

基本上，我在您的 listadapter 类之外创建了一个静态 ViewHolder 类，并进行了其他一些小的更改，包括覆盖您的 getView 方法。我在我做出更改的地方留下了评论。让我知道这个是否奏效！希望这可以帮助！

# javascript - XMLHttpRequest 打开并发送：如何判断它是否有效

> ID：11351739
> 
> 赞同：2
> 
> 时间：2012-07-05T20:03:28.850
> 
> 标签：javascript, xmlhttprequest

正如标题所示，我的问题是，是否可以判断 XMLhttpRequest 中的 open 和 send 方法是否真的有效？有没有指标？示例代码：

```
cli = new XMLHttpRequest();
cli.open('GET', 'http://example.org/products');
cli.send(); 
```

我正在尝试对此进行故障处理，但我需要能够判断请求是否失败，以便我可以处理它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T20:05:17.693

这是一个异步操作。在发送请求时，您的脚本会继续执行。

您使用回调检测状态更改：

```
var cli = new XMLHttpRequest();
cli.onreadystatechange = function() {
        if (cli.readyState === 4) {
            if (cli.status === 200) {
                       // OK
                       alert('response:'+cli.responseText);
                       // here you can use the result (cli.responseText)
            } else {
                       // not OK
                       alert('failure!');
            }
        }
};
cli.open('GET', 'http://example.org/products');
cli.send();
// note that you can't use the result just here due to the asynchronous nature of the request 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-05T20:17:32.780

```
req = new XMLHttpRequest;
req.onreadystatechange = dataLoaded;
req.open("GET","newJson2.json",true);
req.send();

function dataLoaded()
{
    if(this.readyState==4 && this.status==200)
    {
        // success
    }
    else
    {
        // io error
    }
} 
```

# image - Wordpress 致命错误：允许的内存大小为 67108864 字节已用完不会上传图像

> ID：11351741
> 
> 赞同：-1
> 
> 时间：2012-07-05T20:03:33.600
> 
> 标签：image, wordpress, memory, php

请你帮帮我。我在 WordPress 中遇到了这个致命错误。我的网站已经运行多年，直到几天前才运行，这发生在我更新网络和我的 wordpress 多用户安装时？它只在主站点上运行，因为它在子站点上运行良好。

> 致命错误：第 258 行 /home/artygirl/public_html/wp-includes/media.php 中允许的内存大小为 67108864 字节已用尽（尝试分配 4890018 字节）

它不可能是我很久以前修复的内存限制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T08:16:44.287

增加`php.ini`例如内存限制设置

```
memory_limit = 128M ; 
```

或将以下行添加到您的`wp-config.php`

```
define('WP_MEMORY_LIMIT', '128M'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:29:54.367

啊哈哈，我想是因为它们是 png 文件！

# performance - 如果请求是异步的，为什么减少页面需要加载的 http 请求数量会提高性能？

> ID：11351745
> 
> 赞同：1
> 
> 时间：2012-07-05T20:03:42.597
> 
> 标签：performance, http

我一直在翻阅一些网页性能文章，这些文章都解释说减少加载页面所需的 http 请求数量将减少加载所需的总时间。如果http请求是异步的并且并行发生，我不太明白为什么会这样。

我读过的一篇文章似乎让浏览器故意将它们发出的请求数量限制为单个主机名，我猜这与限制有关，但我还没有找到任何可以确认的东西。

我的直觉表明构建http请求必须在客户端上花费一些时间，因此尽管等待时间是异步的，但每个请求的构建需要一些少量的时间，随着请求数量的增加，这一时间变得很重要。但这只是一种预感。

谁能解释为什么随着http请求的减少性能会提高？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:24:21.310

每个 HTTP 请求/响应都有巨大的开销。不仅请求和响应都有一个标头块，而且在 tcp/ip 层上也有各种握手和标头，它们强调了 http 协议。

如果您好奇，我建议您安装[Wireshark](http://www.wireshark.org/)并使用它来检查通过线路传输的网络流量，然后您访问一个典型的网站。这是相当多的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T20:50:20.610

每个请求/响应对都包含必须从客户端到服务器生成、传输和处理的 HTTP 标头数据，反之亦然。如果您减少加载页面所需的请求数，则可以减少此开销。

此外，许多浏览器会限制发送到同一主机的并发请求的数量。请参阅用于 FireFox 的 network.http.pipelining.maxrequests 和 network.http.max-connections-per-server 配置参数。当浏览器发出更多请求以加载您的页面时，它将通过管道传输这些请求并可能将更多 TCP 流连接到您的主机。建立连接需要等待三次握手往返，页面加载时间会增加更多。

一个现实生活中的例子：派 5 个人从一个小厨房给你拿一杯加牛奶、糖和勺子的咖啡。只用一个人再试一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T20:15:05.700

HTTP 是*同步*的——您可以使用 AJAX 等技术使 Web*应用程序*异步，即您可以*向您的页面*异步发出 HTTP 请求；但是，一旦您发出 HTTP 请求，您就会坐下来等待响应。

# java - Java - 使用 Wordnet 和 JWI 获取名词数组

> ID：11351748
> 
> 赞同：2
> 
> 时间：2012-07-05T20:03:57.617
> 
> 标签：java, wordnet, jwi

关于 WordNet 和[MIT JWI](http://projects.csail.mit.edu/jwi/)（用于访问 WordNet 的 Java API），我有一个非常简单的问题：我将一个文件读入一个字符串数组，并将其拆分为单词。如何使用[getPOS()](http://projects.csail.mit.edu/jwi/api/edu/mit/jwi/item/Word.html#getPOS%28%29)获取仅包含名词的单独字符串数组？谢谢！

我尝试过的示例：

公共类测试{

```
public static void main(String[] args) {

    String sentence1 = "The cat ate the fish";

    String[] s1Split = sentence1.split(" ");

    String wnhome = "C:/Program Files/WordNet/2.1";
    String path = wnhome + File.separator + "dict";
    URL url = new URL("file", null , path); 
    IDictionary dict = new Dictionary(url);
    dict.open();

    for (int i = 0; i <s1.length; i++) {
                    //this is where I got confused, wanted to use something like:
                    //Word w = dict.getIndexWord(s1[i], ..) but I need a POS argument, 
                    //and I can't find another suitable method
                    //if w.getPOS() is a noun I would add it to a separate vector
    }

} 
```

}

编辑：刚刚想到另一个 - 使用类似的东西是否可靠`w = dict.getIndexWord(s1[i], POS.NOUN)`，如果名词不存在，w 将为空？这会是值得尝试的事情吗？

EDIT2：所以我的问题是，如果有什么方法可以将字符串（单词）转换为 Wordnet 对象，那么我可以使用 getPOS() 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:15:14.717

如果您使用另一个库，您的方法将无法正常工作 - WordNet 被设计为类固醇而不是解析器的“字典/词库”。斯坦福解析器是寻找替代方案的好地方。

也就是说，您可以对每个单词执行查找，但是如果有单词既是名词又是动词，您将无法区分，因为您没有考虑语法。

[这](http://projects.csail.mit.edu/jwi/api/index.html)应该可以帮助您入门（请参见底部的示例）。查找一个名词，如果它没有返回，则丢弃它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T10:04:58.097

对于 JWNL，它的工作原理如下，但不知道是否相同。

如果我理解您的问题是获取 POS（词性标签）。为此，您必须使用其他工具，例如 Stanford Pos Tagger。但是，通过这种方式，您可以获得每个单词字符串的字符串，因此您必须从字符串格式的 POS 转换为 JWNL 的 POS 类中的 POS。

# git - 如何在同一命令中应用和删除我最新的 git stash？

> ID：11351756
> 
> 赞同：3
> 
> 时间：2012-07-05T20:04:22.863
> 
> 标签：git

看来，当我执行 git stash apply 时，我需要输入 git stash drop 以便从可用的存储中删除该存储。我可以在一个命令中执行此操作吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T20:06:04.167

`git stash pop`就是你要找的。正如[手册页](http://www.kernel.org/pub/software/scm/git/docs/git-stash.html)所说：

```
pop [--index] [-q|--quiet] [<stash>]

    Remove a single stashed state from the stash list and apply it on
    top of the current working tree state, i.e., do the inverse operation
    of git stash save. The working directory must match the index.

    Applying the state can fail with conflicts; in this case, it is not
    removed from the stash list. You need to resolve the conflicts by hand
    and call git stash drop manually afterwards. 
```

# c# - WebMethod - JSON 序列化错误

> ID：11351761
> 
> 赞同：0
> 
> 时间：2012-07-05T20:04:30.820
> 
> 标签：c#, json, serialization, .net-3.5, webmethod

我正在对 aspx.cs 页面中的后端 WebMethod 进行 jQuery AJAX 调用。我在 .NET JSON 序列化中遇到错误。因此，我正在寻找修复错误或避免使用 JSON（WebMethods 的唯一返回格式）的方法：

`Error during serialization or deserialization using the JSON JavaScriptSerializer. The length of the string exceeds the value set on the maxJsonLength property`

相关的 StackTrace 是： `at System.Web.Script.Serialization.JavaScriptSerializer.Serialize(Object obj, StringBuilder output, SerializationFormat serializationFormat)\r\n at System.Web.Script.Services.RestHandler.InvokeMethod(HttpContext context, WebServiceMethodData methodData, IDictionary'2 rawParams)\r\n at System.Web.Script.Services.RestHandler.ExecuteWebServiceCall(HttpContext context, WebServiceMethodData methodData)`

后端代码如下（注意：`result`实际上大约 110k 的控件呈现为字符串）：

```
[WebMethod]
public static string GetContactListControl()
{
    try
    {
        var result = "Hello World!"
        return result;
    }
    catch (Exception e){
        Logging.LogException(e);
        return "Exception Thrown";
    }
} 
```

而且我从来没有遇到过`catch`障碍，这对我来说表明这个问题不在我的代码范围内。

我找到了一个涉及通过插入以下块更改 web.config 的修复程序，但它不起作用：

```
<system.web.extensions>
    <scripting>
       <webServices>
          <jsonSerialization maxJsonLength="123456"></jsonSerialization>
       </webServices>
    </scripting>
</system.web.extensions> 
```

项目是.NET 3.5。

感谢您的任何想法和建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T14:05:19.717

必须在 web.config 中设置 maxJsonLength 属性的配置。为了允许 IIS 允许此配置，`<sectionGroup>`必须在 中包含以下内容`<configSections>`：

```
<sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
  <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
    <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
    <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="Everywhere"/>
      <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
      <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
      <section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
    </sectionGroup>
  </sectionGroup>
</sectionGroup> 
```

# mysql - “并发插入”是否提高了数据库插入速度？

> ID：11351764
> 
> 赞同：0
> 
> 时间：2012-07-05T20:04:38.483
> 
> 标签：mysql, database, database-performance, tokudb

我需要向一张表中插入大量数据（超过 10 亿行）。

我使用 TokuDB 作为我的数据库引擎。而且我知道它支持“并发插入”。

我只是想知道我是否有一个非常强大的服务器来托管我的数据库。“并发插入”是否提高了插入速度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T03:49:23.537

如果你的意思是像这里描述的并发插入：http: [//dev.mysql.com/doc/refman/5.0/en/concurrent-inserts.html](http://dev.mysql.com/doc/refman/5.0/en/concurrent-inserts.html)那么不，它不会让你的插入更快。它只是意味着您仍然可以在插入时读取表格。

此功能仅与使用表级锁定的引擎相关。

# php - 让 humanTiming 函数与 MySQL 一起工作？

> ID：11351765
> 
> 赞同：0
> 
> 时间：2012-07-05T20:04:42.187
> 
> 标签：php, mysql

这是 arnorhs 的代码，它将日期和时间转换为“人类”时间，例如“3 天前”：

```
$time = strtotime('2010-04-28 17:25:43');

echo 'event happened '.humanTiming($time).' ago';

function humanTiming ($time)
{
    $time = time() - $time; // to get the time since that moment

    $tokens = array (
        31536000 => 'year',
        2592000 => 'month',
        604800 => 'week',
        86400 => 'day',
        3600 => 'hour',
        60 => 'minute',
        1 => 'second');

    foreach ($tokens as $unit => $text) {
        if ($time < $unit) continue;
        $numberOfUnits = floor($time / $unit);
        return $numberOfUnits.' '.$text.(($numberOfUnits>1)?'s':'');
    }
} 
```

手动输入日期时效果很好。

但是当我使用一个包含 MySQL 数据库 DATETIME 的字符串时，结果总是“42 年”：

```
// MySQL date is: 2012-01-02 11:22:33
$date1 = mysql_result($result,0,"date");
$date2 = date("Y:m:d H:i", strtotime($date1));
echo humanTiming($date2);
// Result: "42 years" 
```

编辑：这是我的第二次尝试

```
$date1 = mysql_result($result,0,"date");
$date2 = "2012-01-02 11:22:33";
echo "The first date is $date1 which is ";
echo humanTiming( strtotime($date1));
echo ", and the second date is $date2 which is ";
echo humanTiming( strtotime($date2));
// Result: The first date is 2012-01-02 11:22:33 which is , and the second date is 2012-01-02 11:22:33 which is 6 months 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:07:33.360

该`humanTiming()`函数需要一个 UNIX 时间戳，而不是格式化的日期，所以这样称呼它：

```
 $date1 = mysql_result($result,0,"date");
 echo humanTiming( strtotime($date1)); 
```

使用您的示例日期，[输出为](http://viper-7.com/2wzm2N)：

```
6 months 
```

# visual-studio-2010 - #include 之后有任何垃圾时，Visual Studio 2010 不会给出任何错误 在同一行

> ID：11351768
> 
> 赞同：0
> 
> 时间：2012-07-05T11:52:55.393
> 
> 标签：visual-studio-2010, visual-studio, c++, c

我偶然发现了这个。如果您 `#include <file.h>`在同一行之后添加任何垃圾，例如

```
#include <myheaderfile.h> something something type anything here 
```

和编译/构建，Visual Studio 2010 不会给出任何错误。为什么？

# iis - cfdirectory 网络驱动器

> ID：11351769
> 
> 赞同：2
> 
> 时间：2012-07-05T20:05:00.930
> 
> 标签：iis, coldfusion

这有效：

```
<cfdirectory action="list" name="qry" directory="C:\inetpub\wwwroot\Atlas\" >
</cfdirectory>
<cfdump var="#qry#"> 
```

所以我知道 cfdirectory 正在工作。但这不起作用：

```
<cfdirectory action="list" name="qry" directory="\\Vostro420\myDir\">
</cfdirectory>
<cfdump var="#qry#"> 
```

它不会失败：它只是返回一个空结果。我可以将地址复制/粘贴到 Windows 资源管理器中，然后导航到 Vostro420\myDir\，所以我知道这不是错字。

我正在尝试访问我们本地网络上的文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T20:10:34.500

这里首先要检查的是权限。如果您尝试访问远程/映射的网络驱动器，则需要将 ColdFusion 服务更改为在网络驱动器的域中以用户身份运行，并具有允许它读取/写入该映射驱动器的权限。

因此，请确保 ColdFusion 具有访问映射驱动器上系统的正确权限，并且您应该已准备就绪。:)

Adobe ColdFusion 帮助档案有一篇关于如何以特定用户身份运行 ColdFusion 的好文章：

[http://helpx.adobe.com/coldfusion/kb/running-coldfusion-specific-user.html](http://helpx.adobe.com/coldfusion/kb/running-coldfusion-specific-user.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-05T20:12:02.097

我在家里的服务器上工作，但我将网络位置附加为逻辑位置。所以我的路径不是：

//计算机名/目录

我在用着：

X:/目录

我唯一遇到的问题是网络计算机休眠时：P

# html - 用 HEAD 中的代码覆盖链接文件中的 CSS

> ID：11351770
> 
> 赞同：1
> 
> 时间：2012-07-05T20:05:05.017
> 
> 标签：html, css

编辑：代码有效，显然我没有注意到一个错字。对不起大家。

我想在某些页面上覆盖一些 CSS 规则。这是我想如何实现它的一个例子。这是一种有效的方法吗？它似乎在我的浏览器中不起作用。

主.css：

```
#header {
    background-color: yellow;
    color: #003300;
    height: 65px;
    margin-top: 5px;
    padding: 10px 0 10px;
} 
```

索引.html

```
<head>
<link rel="stylesheet" type="text/css" href="/main.css" />

<style>
    #header {
        background-color: red;
    }
</style>
</head> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:13:39.417

CSS 有这种继承感。

我实际上喜欢另一个链接 css 标记，在你已经拥有的那个以你想要的方式包含 #header 之后..

一个有趣的面试问题是为什么级联样式表被称为...为什么它们不只是称为样式表。

这是因为您可以覆盖样式表。包含您要引用的类的最底部样式表是使用的样式表。

您还可以将样式放在您想要的位置并覆盖那里的 css。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T20:08:09.150

那应该可以工作。您可能需要在`style`标签中提供更多信息。尝试这个：

```
<style type="text/css">
#header {
    background-color: red;
}
</style> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T20:11:21.940

内联样式不是最好的方法。

尝试将页面内容包装在一个 div 中，然后选择容器和标题 div 作为一个：

```
<div class="my-page">
    <div id="header">header</div>
</div>

.my-page #header { background-color:pink; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T20:08:35.907

```
#header {
    background-color: yellow;
    color: #003300;
    height: 65px;
    margin-top: 5px;
    padding: 10px 0 10px;
} 
```

不确定这是否是问题所在，但您的第二个填充参数`px`后面没有。它可能导致解析器出错。试一试，然后从那里告诉我们。

# mysql - MySQL 爆炸字符串？

> ID：11351775
> 
> 赞同：0
> 
> 时间：2012-07-05T20:05:21.850
> 
> 标签：mysql, string, stored-procedures

我正在尝试将一些 PHP 代码转换为 MySQL 存储过程。这是PHP代码：

```
$aORs = array(); // create an empty array to hold the individual criteria to be OR'd...
$months = explode('|',$_REQUEST['sSearch_'.$i]);
$sWhere .= '(';
foreach($months as $month) {
    $year = intval(substr($month, 0, 4));
    $mon  = intval(substr($month, 5, 2));
    array_push($aORs, '(MONTH(e.StartDate) = '.$mon.' and YEAR(e.StartDate) = '.$year.')');
}
$sWhere .= implode(" OR ",$aORs); // transform the array of criteria into a properly delimited WHERE clause...
$sWhere .= ')'; 
```

我将像这样将参数传递给存储过程：

```
2012-07|2012-10|2013-02 
```

我无法弄清楚如何将上述输入解析为 WHERE 子句，如下所示：

```
(MONTH(e.sDate) = 07 AND YEAR(e.sDate) = 2012) OR
(MONTH(e.sDate) = 10 AND YEAR(e.sDate) = 2012) OR
(MONTH(e.sDate) = 02 AND YEAR(e.sDate) = 2013) OR 
```

我怎样才能在存储过程中做到这一点？我见过“臭名昭​​著”的 split_str 函数，但我不知道可能有多少值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:11:44.660

如果您的参数值在显示时总是格式正确，一个四位数的年份、一个破折号和一个两位数的月份，由没有空格的竖线分隔，您可以让数据库像这样为您搜索：

```
INSTR(CONCAT('|',parameter_value,'|'),DATE_FORMAT(e.sDate,'|%Y-%m|')) > 0 
```

或者，对空白和分隔符更自由一点，

```
INSTR(parameter_value,DATE_FORMAT(e.sDate,'%Y-%m')) > 0 
```

我认为这些在性能方面不会比在日期列上运行 MONTH 和 YEAR 函数并与文字进行相等比较更差。这些谓词都不会是 sargable（即，允许使用索引）。

这种方法的好处是在存储过程中要做的工作更少，因为您不必动态创建 SQL 语句并传入可变数量的参数。（要测试的代码更少。）

如果您需要允许参数是可选的，即不提供参数时（默认为空字符串），您可以避免在相同的确切语句中将谓词应用于日期列，而无需更改SQL 文本：

```
(paramater_value = '' OR INSTR(parameter_value,DATE_FORMAT(e.sDate,'%Y-%m')) > 0) 
```

* * *

* * *

为了使谓词可搜索，我希望我的 SQL 引用本机日期列。我会将其编写为范围扫描，因此我的 SQL 文本将采用以下形式：

```
(  ( e.sDate >=          CONCAT('2012-07','-01') AND
     e.sDate <  DATE_ADD(CONCAT('2012-07','-01'),INTERVAL 1 MONTH) )
OR ( e.sDate >=          CONCAT('2012-10','-01') AND
     e.sDate <  DATE_ADD(CONCAT('2010-10','-01'),INTERVAL 1 MONTH) )
OR ( e.sDate >=          CONCAT('2013-02','-01') AND 
     e.sDate <  DATE_ADD(CONCAT('2013-02','-01'),INTERVAL 1 MONTH) ) 
```

拥有使用索引的能力是我不厌其烦地解析参数字符串、使用可变数量的谓词构建查询文本、使用动态 SQL 以及测试所有这些的麻烦的唯一好理由. 我几乎宁愿创建一个临时表并使用从参数字符串解析的“yyyy-mm”值加载它，并在连接谓词中引用它。

```
CREATE TEMPORARY TABLE my_temp_parameter
( yyyy  SMALLINT          NOT NULL COMMENT 'year yyyy'     
, mm    TINYINT  UNSIGNED NOT NULL COMMENT 'month, 1-12'
, PRIMARY KEY (yyyy,mm)
) 
```

（我肯定希望对这两列有一个唯一的约束，因为我不希望我的连接生成“额外”行。）在我的查询中，我会引用这样的临时表：

```
FROM ... e
JOIN my_temp_parameter p
  ON e.sDate >= CONCAT(p.yyyy,'-',p.mm,'-01') AND 
     e.sDate < DATE_ADD(CONCAT(p.yyyy,'-',p.mm,'-01'),INTERVAL 1 MONTH) 
```

这种方法的优点是我不必调试动态 SQL，也不必维护生成 SQL 文本的代码。我更喜欢更容易测试的静态 SQL 文本。

如果这不能回答你的问题，我很抱歉。但在我走上在存储过程中创建动态 SQL 的道路之前（在某些情况下需要它），我会尝试其他方法，如果找不到其他合适的解决方案，我会回退到动态 SQL .

# node.js - NPM 清洁模块

> ID：11351784
> 
> 赞同：194
> 
> 时间：2012-07-05T20:05:58.527
> 
> 标签：node.js, npm

有没有办法让 npm 取消构建 node_modules 下的所有模块？像 npm rebuild 这样的东西会删除所有构建工件但不重建它们？

* * *

## 回答 #1

> 赞同：186
> 
> 时间：2012-07-06T10:04:59.367

您可以删除 node_module 目录

```
rm -rf node_modules/ 
```

* * *

## 回答 #2

> 赞同：98
> 
> 时间：2020-07-24T21:40:47.277

这个工作实际上有特殊的命令

```
npm ci 
```

它将删除`node_modules`目录并根据您的`package-lock.json`文件安装软件包

更多信息：[https ://docs.npmjs.com/cli/ci.html](https://docs.npmjs.com/cli/ci.html)

* * *

## 回答 #3

> 赞同：80
> 
> 时间：2018-03-31T15:22:55.637

我将此添加到我的 package.json 中：

```
"build": "npm build",
"clean": "rm -rf node_modules", 
"reinstall": "npm run clean && npm install", 
"rebuild": "npm run clean && npm install && npm run build", 
```

似乎运作良好。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2019-11-06T17:43:16.200

试试 [https://github.com/voidcosmos/npkill](https://github.com/voidcosmos/npkill)

```
npx npkill 
```

它会找到所有 node_modules 并让您删除它们。

[![npkill](../Images/4b989068c38d8420d5b9736092bce012.png)](https://i.stack.imgur.com/B6GlX.gif)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-12-19T17:00:20.247

You can take advantage of the 'npm cache' command which downloads the package tarball and unpacks it into the npm cache directory.

The source can then be copied in.

Using ideas gleaned from [https://groups.google.com/forum/?fromgroups=#!topic/npm-/mwLuZZkHkfU](https://groups.google.com/forum/?fromgroups=#!topic/npm-/mwLuZZkHkfU) I came up with the following node script. No warranties, YMMV, etcetera.

```
var fs = require('fs'),
path = require('path'),
exec = require('child_process').exec,
util = require('util');

var packageFileName = 'package.json';
var modulesDirName = 'node_modules';
var cacheDirectory = process.cwd();
var npmCacheAddMask = 'npm cache add %s@%s; echo %s';
var sourceDirMask = '%s/%s/%s/package';
var targetDirMask = '%s/node_modules/%s';

function deleteFolder(folder) {
    if (fs.existsSync(folder)) {
        var files = fs.readdirSync(folder);
        files.forEach(function(file) {
            file = folder + "/" + file;
            if (fs.lstatSync(file).isDirectory()) {
                deleteFolder(file);
            } else {
                fs.unlinkSync(file);
            }
        });
        fs.rmdirSync(folder);
    }
}

function downloadSource(folder) {
    var packageFile = path.join(folder, packageFileName);
    if (fs.existsSync(packageFile)) {
        var data = fs.readFileSync(packageFile);
        var package = JSON.parse(data);

        function getVersion(data) {
            var version = data.match(/-([^-]+)\.tgz/);
            return version[1];
        }

        var callback = function(error, stdout, stderr) {
            var dependency = stdout.trim();
            var version = getVersion(stderr);
            var sourceDir = util.format(sourceDirMask, cacheDirectory, dependency, version);
            var targetDir = util.format(targetDirMask, folder, dependency);
            var modulesDir = folder + '/' + modulesDirName;

            if (!fs.existsSync(modulesDir)) {
                fs.mkdirSync(modulesDir);
            }

            fs.renameSync(sourceDir, targetDir);
            deleteFolder(cacheDirectory + '/' + dependency);
            downloadSource(targetDir);
        };

        for (dependency in package.dependencies) {
            var version = package.dependencies[dependency];
            exec(util.format(npmCacheAddMask, dependency, version, dependency), callback);
        }
    }
}

if (!fs.existsSync(path.join(process.cwd(), packageFileName))) {
    console.log(util.format("Unable to find file '%s'.", packageFileName));
    process.exit();
}

deleteFolder(path.join(process.cwd(), modulesDirName));
process.env.npm_config_cache = cacheDirectory;
downloadSource(process.cwd()); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-04-12T20:22:25.470

总之*没有*。

在两个，*还没有*。

然而，一个`--no-build`标志在`npm install`不构建的情况下执行安装存在一个未解决的问题，它可以用来做你所要求的。

请参阅[这个未解决的问题](https://github.com/npm/npm/issues/6529)。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-02-26T09:55:07.447

对于windows环境：

```
"scripts": {
    "clean": "rmdir /s /q node_modules",
    ...
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-07-08T08:44:14.983

我在 package.json 中添加了几行：

```
"scripts": {
  ...
  "clean": "rmdir /s /q node_modules",
  "reinstall": "npm run clean && npm install",
  "rebuild": "npm run clean && npm install && rmdir /s /q dist && npm run build --prod",
  ...
} 
```

如果你只想`clean`你可以使用这个`rimraf node_modules`。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2021-04-08T10:13:37.927

`npm ci`适用于这种情况，但仅当您的`package.json`和`package-lock.json`同步时，如果您一直致力于快速解决冲突或通过删除目录/符号链接在目录级别进行更新，则情况可能并非总是如此。这个问题的综合答案将是这个..

1.  用你想要的东西编辑`package.json`并删除你不需要的东西。
2.  生成`package-lock.json`这样的，`npm install --package-lock-only`
3.  运行`npm ci`。这应该删除所有工件并且不应该重建它们。

# javascript - 来自 Delphi 中动态页面的 Javascript 中的字符集

> ID：11351788
> 
> 赞同：0
> 
> 时间：2012-07-05T20:06:33.283
> 
> 标签：javascript, html, delphi, utf-8, delphi-xe

我在 Delphi 中生成动态 HTML。我在网页正文中显示 UTF-8 字符串没有问题。我使用 HTMLEscape 对常规字符串进行编码（字符串列表中的所有字符串之前都已转义）。

问题发生在动态页面内的脚本（javascript）函数中。

```
'<script language="javascript" charset="UTF-8">'+#10+
(...)
'function ProcessAddUserButton(){'+#10+
'alert("'+web_content_sl[70]+'");'+
'}'+#10+ 
```

对于带有单词“usuário”的字符串，我会`usu&#225;rio`进入警告框中，但如果我在 HTML 正文中使用相同的字符串，它将正确显示。如上所示，我尝试将字符集包含在脚本定义中，但没有成功。我不明白为什么我从同一页面中的同一字符串中得到不同的结果。

动态页面中的 META 标记为：

```
'<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />'+#10+ 
```

正如任何人经历过的那样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:17:35.527

字符串是字面意思`"usu&#225;rio"`。它只会在解码 html 的上下文中“正确”显示。您也可以使用 javascript 手动对其进行解码，但首先从服务器传递文字字符而不是 html 编码更容易。

这是在javascript中手动解码的功能：

```
function decodeHTML( str ) {
    return str.replace( /(?:&#x([a-fA-F0-9]+);|&#([0-9]+);)/g, function(full, m1, m2 ) {
        if( m1 ) {
            return String.fromCharCode(parseInt(m1, 16));
        }
        else {
            return String.fromCharCode(parseInt(m2, 10));
        }
    });
}

alert(decodeHTML( "usu&#225;rio" )) //alerts "usuário" 
```

# mysql - 如何在codeigniter的mysql数据库中的编码数据之间进行搜索？

> ID：11351798
> 
> 赞同：0
> 
> 时间：2012-07-05T20:07:12.847
> 
> 标签：mysql, codeigniter, search, encryption

我使用codeigniter的加密方法对一些数据进行了编码，并将它们存储在mysql数据库中。检索它们没有问题，但是当我想在它们之间进行搜索时，它似乎是胡说八道。如何在 mysql 和 codeigniter 中的编码数据之间进行搜索？

这是我的编码功能：

```
function _encode($options = array()){

    $key = 'Q7tBBb1iECkl5Kk1U3mVPur1J863KGz4';

    $encoded = $this->encrypt->encode($options['code'], $key);

    return $encoded;
} 
```

这是我在模型中用作搜索方法的方法：

```
function search()
{
    //Pagination config
    $search_by = $this->session->userdata('search_by');
    $search_term = $this->_encode($this->session->userdata('search_term'));

    $config['base_url'] = base_url() . 'acp/cds/search_result/page/';
    $config['total_rows'] = $this->db->like($search_by, $search_term)->get('cards')->num_rows();
    $config['per_page'] = 15;
    $config['num_links'] = 4;
    $config['uri_segment'] = 5;
    $this->pagination->initialize($config);

    $page_num = $this->uri->segment(5, 1);
    $offset = ($page_num - 1) * $config['per_page'];
    $this->db->order_by('card_Id', 'ASC');        
    $this->db->like($search_by, $search_term);
    $query = $this->db->get('cards', $config['per_page'], $offset);

    return $query->result();        
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T23:36:38.710

您的加密函数将数组作为参数，其中要在数组的代码密钥中加密的内容。但是，当您调用加密函数时，`search()`您传递的是一个普通参数。您的函数的第三行`search()`当前如下所示：

```
$search_term = $this->_encode($this->session->userdata('search_term')); 
```

将其更改为：

```
$search_term = $this->_encode(array('code' => $this->session->userdata('search_term'))); 
```

也就是说，我不确定您希望通过以这种方式加密数据获得什么，特别是如果您在该示例中发布的密钥是您正在使用的真实密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:41:10.240

改用`$this->encrypt->sha1()`，因为您要通过“静态”加密字符串搜索什么。所有其他密码方法都会在每个请求上为您提供随机字符串，从而无法通过该字符串进行搜索。

# c - 隐藏和显示 EditBox CURSOR 的非常简单的功能

> ID：11351799
> 
> 赞同：1
> 
> 时间：2012-07-05T20:07:17.543
> 
> 标签：c, winapi

我想知道如何制作一个简单的函数来使光标从 EditBox 中出现和消失，这是一个简单的函数，我传递窗口的 HWND 和 EditBox 的名称只是为了消失并出现光标？

谢谢 （：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:55:01.117

HideCaret [()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648403.aspx)和[ShowCaret()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648406.aspx)怎么样？

# mysql - MySQL解释更新

> ID：11351804
> 
> 赞同：20
> 
> 时间：2012-07-05T20:07:32.767
> 
> 标签：mysql, sql, database, query-optimization

作为大学修订的一部分，我正在尝试回答以下问题：

> 在“员工”数据库中的表的至少一个属性上创建索引，您可以在其中使用 MySQL 的“解释”工具清楚地显示创建的好处（在术语或检索方面）和负面（在更新方面）有问题的索引。

在第一部分中，我在*employees*表上创建了一个索引，并在索引前后使用了以下查询来证明从检索的角度来看它是有益的：

```
EXPLAIN SELECT * FROM employees WHERE birth_date = '1953-09-02'; 
```

该索引具有将访问的行从 300,000 减少到仅 63 的效果。

现在，我对如何做第二部分感到困惑。我希望能够将*EXPLAIN*命令与*UPDATE*一起使用，但它不起作用。

我试图分析的*UPDATE*查询如下：

```
UPDATE employee SET first_name = 'first_name' WHERE birth_date = '1953-09-02'; 
```

这是回答问题的合适查询吗？我该如何进行分析。

提前谢谢了。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-05T20:13:49.943

`EXPLAIN UPDATE`通过比较 MySQL 的文档，存在于 MySQL [5.6](http://dev.mysql.com/doc/refman/5.6/en/explain.html)而不是 MySQL [5.5中。](http://dev.mysql.com/doc/refman/5.5/en/explain.html)你在 MySQL 5.6 服务器上试过吗？

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-03-03T10:33:52.330

Mysql 5.6的参考文档：http: [//dev.mysql.com/doc/refman/5.6/en/explain.html](http://dev.mysql.com/doc/refman/5.6/en/explain.html)

**从 MySQL 5.6.3 开始，EXPLAIN 允许的可解释语句是 SELECT、DELETE、INSERT、REPLACE 和 UPDATE。在 MySQL 5.6.3 之前，SELECT 是唯一可解释的语句。**

# sql - 将 sql 查询中的值与其他数据一起插入表列

> ID：11351814
> 
> 赞同：0
> 
> 时间：2012-07-05T20:07:50.303
> 
> 标签：sql, sql-server

我刚刚创建了这张表：

```
create table dbo.OrderTypes
(
ID smallint primary key identity,
Name varchar(300) not null,
CreatedOn datetime default getdate(),
CreatedBy nvarchar(300) not null,
ModifiedOn datetime default getdate(),
ModifiedBy nvarchar(300) not null
) 
```

我要做的是使用此查询的结果填充名称字段：

```
select distinct ordertype from unit_results 
```

以及手动插入 CreatedBy 和 ModifiedBy （它们对于每一行都是相同的）。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:09:21.817

```
INSERT INTO dbo.OrderTypes (Name, CreatedBy, ModifiedBy)
SELECT DISTINCT ordertype, 'CreatedBy Value Here', 'ModifiedBy Value Here'
FROM unit_results 
```

# java - Java/Oracle 连接性能问题

> ID：11351819
> 
> 赞同：0
> 
> 时间：2012-07-05T20:08:00.890
> 
> 标签：java, performance, oracle

我正在使用以下代码连接到一个 Oracle 存储过程，平均为`jdbcExecutionTime`860 毫秒，执行加序列化时间为 172 毫秒。

我`jdbcExecutionTime`很担心，我知道它可以做得更快，但从我所读到`CallableStatement`的应该是最快的。

这里有任何提高性能的提示吗？

**另外：**我正在使用`Oracle 11`with `ojdbc14.jar`。

```
final long jdbcStartTime1 = System.currentTimeMillis(); 
    final long jdbcEndTime1;
    final long jdbcEndTime2;
    Connection con = null;

    logger.info("Loading properties...SYS TIME:"+System.currentTimeMillis());

    InputStream inputStream = blah.class.getClassLoader().getResourceAsStream("properties/jdbc.properties");
    logger.info("Done loading properties...SYS TIME:"+System.currentTimeMillis());
    try {

        PROPERTIES.load(inputStream); //Load the jdbc properties
        Class.forName(PROPERTIES.getProperty("jdbc.driverClassName")).newInstance(); //Load the oracle driver
        //Set the connection 
        logger.info("Starting JDBC connection...SYS TIME:"+System.currentTimeMillis());
        con = DriverManager.getConnection(PROPERTIES.getProperty("jdbc.url"), PROPERTIES.getProperty("jdbc.username"), PROPERTIES.getProperty("jdbc.password"));
        ((OracleConnection)con).setDefaultRowPrefetch(80);

        logger.info("JDBC connection established...SYS TIME:"+System.currentTimeMillis());

        String jobquery =   "{call PKG_TEST.MY_PACKAGE(?,?,?,?,?,?)}";  
        CallableStatement callStmt = con.prepareCall(jobquery);

        callStmt.setString(1,blah);                     
        callStmt.setBoolean(2, blah2);
        callStmt.registerOutParameter(3, OracleTypes.CURSOR);   
        callStmt.registerOutParameter(4, OracleTypes.CURSOR);   
        callStmt.registerOutParameter(5, OracleTypes.CURSOR);   
        callStmt.registerOutParameter(6, OracleTypes.CURSOR);   

        jdbcEndTime1 = System.currentTimeMillis();

        logger.info("Executing stored procedure...SYS TIME:"+System.currentTimeMillis());
        callStmt.execute();
        logger.info("Stored procedure complete...SYS TIME:"+System.currentTimeMillis());

        logger.info("Storing db cursor objects as result sets...SYS TIME:"+System.currentTimeMillis());
        ResultSet cur1 = (ResultSet)callStmt.getObject(3);
        ResultSet cur2 = (ResultSet)callStmt.getObject(4);
        ResultSet cur3 = (ResultSet)callStmt.getObject(5);
        ResultSet cur4 = (ResultSet)callStmt.getObject(6);
        logger.info("Completed storing cursors...SYS TIME:"+System.currentTimeMillis());

        jdbcEndTime2 = System.currentTimeMillis();

        final long jdbcExecutionTime =  (jdbcEndTime1-jdbcStartTime1);
        final long spEx_ResultSetTime = (jdbcEndTime2-jdbcEndTime1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:16:24.643

第一次执行此操作时，大部分时间将花费在加载库（仅在您第一次使用它时发生）和创建连接上。一旦你有一个现有的连接，你应该期望大约 <10 毫秒的延迟（比你正在做的要长）

# javascript - 函数中的Javascript字符串参数

> ID：11351825
> 
> 赞同：3
> 
> 时间：2012-07-05T20:08:26.230
> 
> 标签：javascript

我正在使用 google maps api，我希望标记的标签有一个执行警告的链接。

```
var str = "hi";
var mp_position = createGoogleMapsLocation(data[i].location);
var text = "<p>Edit: <a href=# onClick='edit("+str+")'>Click here</a></p>";
addMeetingMarker(mp_position, text); 
```

addMeetingMarker 功能有效，但编辑功能无效。代码是：

```
function edit(message) {
    alert(message);
} 
```

如果在编辑函数的参数中设置一个整数，它会起作用，但传递变量 str 不起作用。为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T20:10:42.643

您需要更多的双引号来包围您的值字符串 - 所以：

```
var text = "<p>Edit: <a href=# onClick='edit("+str+")'>Click here</a></p>"; 
```

变成

```
var text = "<p>Edit: <a href=# onClick='edit(\""+str+"\")'>Click here</a></p>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T20:12:33.250

```
edit("+str+") 
```

将导致javascript代码

```
edit(hi) 
```

哪里`hi`是未知变量。根据您希望`edit`函数执行的操作，添加引号：`edit\""+str+"\")`或删除加号：`edit(str)`。在最后一种情况下，编辑函数将接收`str`变量，在第一种情况下，它将接收“hi”字面量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T20:10:44.890

您缺少创建`str`带引号的字符串所需的双引号。

# sql - 选择中的 SQL 计数

> ID：11351829
> 
> 赞同：1
> 
> 时间：2012-07-05T20:08:46.380
> 
> 标签：sql, count

我想显示照片库以及每张照片的评分次数。

这是我的简单查询，但不确定如何从 Ratings 表中获取计数。

```
SELECT
   Photo.photoID
  ,Photo.photoName
  ,Member.memberID
  ,Member.memberFName
  ,Rating.ratingID
FROM
  Photo
INNER JOIN Member ON Photo.memberID = Member.memberID
LEFT OUTER JOIN Rating ON Photo.photoID = Rating.photoID
ORDER BY Photo.photoID DESC 
```

每次有人单击 Star Rating 按钮时，都会在 Rating 表中插入一条新记录。我只允许对一张照片进行 100 次评分，因此我想在用户浏览图库时显示一张照片的评分次数（即 57/100）。

感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:12:42.577

```
select p.photoID,
    p.photoName,
    m.memberID,
    m.memberFName,
    coalesce(rc.Count, 0) as RatingCount
from Photo p
inner join Member m on p.memberID = m.memberID
left outer join (
    select photoID, count(*) as Count
    from Rating
    group by photoID
) rc on p.photoID = rc.photoID
order by p.photoID desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:33:37.123

您可以将 count 函数与 group by 语句一起使用来获取评分计数。

```
select p.photoID,
p.photoName,
m.memberID,
m.memberFName,
count(r.RatingID) as RatingCount
from Photo p
inner join Member m on p.memberID = m.memberID
left outer join Rating r on p.photoID = r.photoID
group by p.photoID, p.photoName, m.memberID, m.memberFName 
```

# visual-studio-2010 - 如何在备用驱动器中安装 Visual Studio 2010？

> ID：11351831
> 
> 赞同：2
> 
> 时间：2012-07-05T20:09:03.550
> 
> 标签：visual-studio-2010, installation

我正在尝试在 D 驱动器上安装 VS 2010，但是当我更改安装程序目标字段中的位置时，没关系，它仍然将其安装在 C 上。唯一转到 D 的是安装日志文件。有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:23:28.300

它应该允许将实际软件安装在不同的驱动器上，但是它的许多关键组件（.NET Framework、库等）必须放在 C 驱动器上。我认为最终，即使应用程序本身安装在不同的驱动器上，它也会在 C 驱动器上放置更多内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T20:20:40.627

您可以在 C: 上安装 VS 并将其移动到 D: 上的任何位置并与此文件夹建立连接。之后 VS 仍然会认为它在 C 上的位置：

如何建立路口，您可以[在此处阅读](http://meta-coding.blogspot.com/2011/05/links-to-files-and-directories-in.html)

# css - 两排三个 - 如何让每一行顶部对齐

> ID：11351837
> 
> 赞同：0
> 
> 时间：2012-07-05T20:09:25.747
> 
> 标签：css, css-float, alignment, html-lists

我在一个网站上有一个菜单部分，它由 2 行组成，每行 3 个项目。我设法通过使用使顶行顶部对齐`float:left`，但不确定如何顶部对齐底行。关于如何实现这一目标的任何想法？非常感谢任何和所有建议。

```
<div id="services">
    <div class="banner-image">
    <img src="img/large.jpg" alt="BodywoRx room" />
    </div><!-- end banner-image -->
    <h2>We have a massage that fits YOU.</h2>
    <div id="service-list">
    <div class="service">
        <h3>Coffee Break $25:</h3><p>15 minute chair massage that focuses on the shoulders, neck, arms, wrists and hands.</p>
    </div>
    <div class="service">
        <h3>Lunch Break $40:</h3><p>30 minute table massage that focuses on the shoulders, neck, and lower back.</p>
    </div>
    <div class="service">
        <h3>Lympathic Drainage $50:</h3><p>Session provides congestion relief for the face, throat, and chest.</p>
    </div>
    <div class="service">
            <h3>Bliss $60:</h3><p>60 minute full body massage using light to medium pressure.</p>
    </div>
    <div class="service">
        <h3>Deep Tissue $80:</h3><p>60 minute full body massage using deep pressure.</p>
    </div>
    <div class="service">
        <h3>Correction $95:</h3><p>Session focuses on centering the body and finding and relieving dysfunction that is causing chronic pain and discomfort.</p>
    </div>
    </div><!-- end service-list -->

#services {
    width: 960px;
}

#services .banner-image {
    margin-top: 100px;
    padding-bottom: 40px;
}

#services h2 {
    font-size: 30px;
    padding-bottom: 20px;
}

#services #service-list {
    margin-left: 40px;
}

.service {
    display: inline-block;
    float: left;
    padding-right: 40px;
    width: 265px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:15:14.967

如果通过“顶部对齐”，您的意思是保持第二行垂直从同一位置开始（即顶部全部对齐）只需添加`height:100px;`到您的`.service`样式中

# android - 带有和不带有 SD 卡的设备的 /Downloads 文件夹的位置

> ID：11351840
> 
> 赞同：2
> 
> 时间：2012-07-05T20:09:30.647
> 
> 标签：android

请让我知道`Downloads`有和没有 SD 卡的设备上文件夹的默认位置是什么。

以及如何检查特定手机是否没有 SD 卡。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T20:13:48.893

要检查设备是否有 SD 卡，请使用：`Environment.getExternalStorageState()`如果您没有 SD 卡，请使用：`Environment.getDataDirectory()`

本质上，如果没有 SD 卡，您可以在本地设备上创建自己的目录。我列出了一些可能有帮助的代码：

```
/*
             * This sections checks the phone to see if there is a SD card. if
             * there is an SD card, a directory is created on the SD card to
             * store the test log results. If there is not a SD card, then the
             * directory is created on the phones internal hard drive
             */
                    //if there is no SD card, create new directory objects to make directory on device
            if (Environment.getExternalStorageState() == null) {
                            //create new file directory object
                directory = new File(Environment.getDataDirectory()
                        + "/RobotiumTestLog/");
                photoDirectory = new File(Environment.getDataDirectory()
                        + "/Robotium-Screenshots/");
                /*
                 * this checks to see if there are any previous test photo files
                 * if there are any photos, they are deleted for the sake of
                 * memory
                 */
                if (photoDirectory.exists()) {
                    File[] dirFiles = photoDirectory.listFiles();
                    if (dirFiles.length != 0) {
                        for (int ii = 0; ii <= dirFiles.length; ii++) {
                            dirFiles[ii].delete();
                        }
                    }
                }
                // if no directory exists, create new directory
                if (!directory.exists()) {
                    directory.mkdir();
                }

                // if phone DOES have sd card
            } else if (Environment.getExternalStorageState() != null) {
                // search for directory on SD card
                directory = new File(Environment.getExternalStorageDirectory()
                        + "/RobotiumTestLog/");
                photoDirectory = new File(
                        Environment.getExternalStorageDirectory()
                                + "/Robotium-Screenshots/");
                if (photoDirectory.exists()) {
                    File[] dirFiles = photoDirectory.listFiles();
                    if (dirFiles.length > 0) {
                        for (int ii = 0; ii < dirFiles.length; ii++) {
                            dirFiles[ii].delete();
                        }
                        dirFiles = null;
                    }
                }
                // if no directory exists, create new directory to store test
                // results
                if (!directory.exists()) {
                    directory.mkdir();
                }
            }// end of SD card checking 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T20:19:58.317

我不知道内部下载位置。

要以编程方式获取外部下载位置，请使用：

```
Environment.getExternalStorageDirectory()+"/Downloads/" 
```

或者至少，我的 HTC EVO 4G 就是这样。

对于我的应用程序，我开发了一个简单的类来检测 SD 卡的当前状态，并简化为人类可以理解的术语。它可以很容易地使用

```
Environment.getExternalStorageState() 
```

并将其与`Environment`类下定义的各种默认状态进行比较。重要的是`Environment.MEDIA_REMOVED`和`Environment.MEDIA_SHARED`。第一个（我相信）告诉您是否有任何外部存储，第二个告诉您它是否已安装。

注意：比较状态时，使用 .equals 因为它们是字符串，而不是像 Android 中的大多数状态对象那样的整数。

# jsf - 重新渲染丰富：日历不是第一次工作，而是在页面刷新上工作

> ID：11351843
> 
> 赞同：2
> 
> 时间：2012-07-05T20:09:32.753
> 
> 标签：jsf, richfaces, ajax4jsf

我有一个搜索条件来从两个不同日期之间的数据库中获取详细信息。

我有 ah:slectOneMenu 填充了列表 {"from","to","between"}。对于“从”和“到”日期，我必须显示一个丰富的：日历以提供日期输入，而对于“介于”，我必须显示两个丰富的：日历以提供输入开始日期和结束日期。

我的代码是这样的

```
<h:selectOneMenu id="startdate" 
       value="#{commoncontroller.coverDateType}">  
      <a4j:support event="onchange" ajaxSingle="true"     
                   action="#controller.dateSelectionChanged}" 
                   reRender="startdateone,startdatetwo"/>
          <f:selectItems value="#{controller.startDateMap}" />
    </h:selectOneMenu>

     <h:panelGrid id="startdateone" layout="block" rendered="#{controller.dateOneStatus}">
            <rich:calendar id="date1"                               value="#{controller.covStartDate}" showWeeksBar="false" />
     </h:panelGrid>

     <h:panelGrid id="startdatetwo" layout="block" rendered="#{controller.dateTwoStatus}">
            <rich:calendar id="date2"                               value="#{controller.covStartDate2}" showWeeksBar="false" />
     </h:panelGrid> 
```

如果我从选择菜单中选择任何值，则即使 panelGrid 渲染属性在后端设置为 true，日历也不会第一次渲染，但如果我刷新页面，则会渲染它们。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T09:37:28.500

直接使用属性重新渲染组件存在问题`rendered`，当我说直接意味着您刚刚在代码中做了什么时。尝试使用父组件`a4j:outputPanel`和`reRender`a4j:outputPanel 使用其 id 来包装您的两个面板网格。

像这样：

```
<h:selectOneMenu id="startdate" 
       value="#{commoncontroller.coverDateType}">  
      <a4j:support event="onchange" ajaxSingle="true"     
                   action="#controller.dateSelectionChanged}" 
                   reRender="box"/>
          <f:selectItems value="#{controller.startDateMap}" />
    </h:selectOneMenu>

<a4j:outputPanel id="box">
     <h:panelGrid id="startdateone" layout="block" rendered="#{controller.dateOneStatus}">
            <rich:calendar id="date1"                               value="#{controller.covStartDate}" showWeeksBar="false" />
     </h:panelGrid>

     <h:panelGrid id="startdatetwo" layout="block" rendered="#{controller.dateTwoStatus}">
            <rich:calendar id="date2"                               value="#{controller.covStartDate2}" showWeeksBar="false" />
     </h:panelGrid>

</a4j:outputPanel> 
```

希望这可以帮助。-干杯

# lucene - Gremlin 中的数值比较运算符和通配符

> ID：11351844
> 
> 赞同：2
> 
> 时间：2012-07-05T20:09:43.983
> 
> 标签：lucene, range, wildcard, neo4j, gremlin

有没有办法使用数字比较运算符（>=、<=、<、>、...）在 Neo4j 中搜索手动索引？查看 Gremlin 索引示例，它们都倾向于呈现具有特定属性值的搜索。

假设我有大约 10M 的两种类型的关系，它们都在一个名为“property”的属性中具有数值，在第一个 double 中，在第二个 int 中。

```
gremlin> g.e(123).getProperty('property')
==> 1.57479276459179 
```

现在，如果我知道确切的属性值，它是一个基于对数的双精度 pvalue，我可以很容易地找到节点

```
gremlin> g.idx('index_e_ASSOC').get('property', 1.57479276459179)
==> e[2421730][31493-ASSOCIATION->53378]
==> e[4885094][53378-ASSOCIATION->31493]
==> e[866409][37891-ASSOCIATION->6292]
==> e[123][6292-ASSOCIATION->37891] 
```

相反，我想对'property'进行范围搜索，例如查找'property'> = 0 && 'property' <= 1.6的所有边。这可以用 Gremlin 做吗？看看[Gremlin 用户讨论组](https://groups.google.com/forum/#!msg/gremlin-users/9B8FJlV8n1o/Rn33V03-Z6MJ)告诉我，即使是从全文 Lucene 索引中进行通配符搜索也有点 hack，而且[Neo4j API](http://tinkerpop.com/maven2/com/tinkerpop/blueprints/0.5/api/com/tinkerpop/blueprints/pgm/impls/neo4j/Neo4jIndex.html)也无济于事。

编辑：在 Stackoverflow 中发现了另一个类似的问题（标题为“使用 Lucene 查询语法在 Neo4j 中进行范围查询”；新用户最多只能发布两个超链接）导致 Neo4j 文档。我通过对数值使用 ValueContext 重新创建了索引。通过遵循在 neo4j 讨论组中找到的示例（标题：将 numericRange 查询与关系查询结合起来），我可以进行如下查询

```
start a=node(123)
match a-[rel]-(b)
where type(rel) = "ASSOCIATION" AND rel.`property` > 1.0 AND rel.`property` < 2.0
RETURN b
LIMIT 20; 
```

它使用范围搜索。Gremlin 的语法是什么？它应该是这样的

```
g.idx('index_e_ASSOC')[[property: Neo4jTokens.QUERY_HEADER + "[1.0 TO 2.0]"]].count() 
```

这在语法上是正确的，但是即使在该范围内有具有属性的边，计数也会产生 0 结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T17:47:01.550

您可以在所有边缘上使用 Gremlin 过滤器步骤，但这会进行表扫描：

```
g.E.filter{it.property >= 0 && it.property <= 1.6} 
```

见[https://github.com/tinkerpop/gremlin/wiki/Gremlin-Steps](https://github.com/tinkerpop/gremlin/wiki/Gremlin-Steps)

如果索引`index_e_ASSOC`包含所有边的子集，则可以使用通配符查询来缩小范围：

```
start = g.idx('index_e_ASSOC')[['property': Neo4jTokens.QUERY_HEADER + "*"]]
start.filter{it.property >= 0 && it.property <= 1.6} 
```

请注意，`Neo4jTokens.QUERY_HEADER`解析为，`"%query%"`因此您也可以这样编写：

```
start = g.idx('index_e_ASSOC')[['property': "%query%" + "*"]]
start.filter{it.property >= 0 && it.property <= 1.6} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:41:47.000

可能你最好的选择是通过 groovy 使用 Neo4j API，就像[http://docs.neo4j.org/chunked/snapshot/gremlin-plugin.html#rest-api-send-an-arbitrary-groovy-script-- -lucene 排序](http://docs.neo4j.org/chunked/snapshot/gremlin-plugin.html#rest-api-send-an-arbitrary-groovy-script---lucene-sorting)？

# apache - htaccess 重写不能正常工作，因为它应该与 www

> ID：11351846
> 
> 赞同：0
> 
> 时间：2012-07-05T20:09:53.627
> 
> 标签：apache, .htaccess, codeigniter

我正在开发基于 CodeIgniter 的应用程序。我的 htacess 看起来像这样：

```
RewriteEngine On
RewriteCond  %{REQUEST_FILENAME} !-f
RewriteCond  %{REQUEST_FILENAME} !-d
RewriteBase /
RewriteRule ^(.*)$ /index.php?$1 [L]
RewriteCond %{HTTP_HOST} ^www.example.com$ [NC]
RewriteRule ^(.*)$ http://example.com/$1 [R=301,L] 
```

这在大多数情况下都很好用，我可以像这样访问控制器和方法：

```
http://example.com/controller/method/args 
```

但是，如果它附加了一个 www，像这样

```
http://www.example.com/foo 
```

它重定向到

```
http://example.com/index.php?foo 
```

显示的页面始终是我网站的索引页面。

我添加了最后一对 RewriteCond / RewriteRule 只是为了删除（如​​果`www`存在）。

我不太确定如何让它以我想要的方式工作，所以

```
http://www.example.com/foo 
```

只是重定向到

```
http://example.com/foo 
```

**编辑**

从我的 CI 配置文件：

```
$config['base_url'] = 'http://example.com/';
$config['index_page'] = '';
$config['uri_protocol'] = 'AUTO'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T20:33:02.553

如评论中所述。

你的重写规则`RewriteRule ^(.*)$ /index.php?$1 [L]`应该放在底部。在这种情况下，由于您的`[L]`旗帜，订单很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T20:39:03.657

在这里并没有真正提供比 Steven Lu 更多的东西……但清理了您的订单以使其更有意义

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^www.example.com$ [NC]
RewriteRule ^(.*)$ http://example.com/$1 [R=301,L]

RewriteCond  %{REQUEST_FILENAME} !-f
# You don't really need the !-d (directory) flag here
RewriteRule ^(.*)$ /index.php [L] # Could put QSA in here too, but CI doesn't play too nice with query strings 
```

# sql - 删除表中的行，但保留具有 FK 约束的行

> ID：11351852
> 
> 赞同：0
> 
> 时间：2012-07-05T20:10:21.800
> 
> 标签：sql, sql-server, delete-row

我需要删除表中的行，例如

```
DELETE FROM TABLE_X WHERE COL_A = 0 
```

但我不想删除任何可能违反约束的行，我需要知道哪些行有这种违反......

我知道我可以与关系表进行连接，但我想知道是否存在任何通用方法来知道删除时哪些行会违反约束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:18:16.117

假设您使用 JDBC，有一个名为 GetExportedKeys() 的元数据函数

[http://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html#getExportedKeys%28java.lang.String,%20java.lang.String,%20java.lang.String%29](http://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html#getExportedKeys%28java.lang.String,%20java.lang.String,%20java.lang.String%29)

使用它，您首先获得外键约束。使用该信息，您可以构建一个 Join 语句来捕获违规行为。您运行该语句以获取违反约束的实际行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T20:33:40.603

这样的事情可能会帮助你：

/* 表 X 是子表 表 Y 是父表 */

DELETE FROM TABLE_X where Y_ID not in (SELECT Y_ID FROM TABLE_Y)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T20:14:00.707

没有通用的方法。您需要使用连接（或在运行时从通用但非内置的元数据生成连接）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T20:16:02.517

您可以检查系统表、解析约束并使用它们动态构建 JOIN。这并不容易。

另一种方法是逐个删除行（`SELECT`所有 ID，然后使用其主键值删除每一行）。失败的`DELETE`操作是删除带有约束的行。

在事务中执行此操作并在最后回滚，因此您实际上不会删除这些行。

顺便说一句，我不推荐这种做法，它很奇怪而且效率低下。但它会起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T20:17:00.523

DElete from x where col = 0 and primarykey not in ( PrimaryKey from x Inner Join Y on x.FKey = Y.PrimaryKey )

# c# - 绑定 WebGrid 表单 AJAX

> ID：11351853
> 
> 赞同：3
> 
> 时间：2012-07-05T20:10:33.077
> 
> 标签：c#, json, asp.net-mvc-3, razor, webgrid

我是 MVC3 和 Razor 的新手，一旦从 AJAX 帖子返回数据，我需要有关绑定/加载 WebGrid 的帮助。任何帮助将不胜感激（项目到期日很快临近）；）

我的情况是这样的：我有两个级联下拉列表。第一个列表包含数据库中的区域。选择一个区域后，它会在第二个下拉列表中填充设施列表。选择设施后，我需要使用建筑物列表填充 WebGrid。我的级联下拉菜单正常工作

索引.cshtml：

```
@using ThisController = MyProject.Controllers.BuildingModelsController
@model IEnumerable<MyProject.Models.BuildingModel>

<div id="tabs-2">
    <!-- Current Buildings -->
    @{ 
        if (Model != null && Model.Count() > 0)
        {                            
            var grid = new WebGrid(source: Model, rowsPerPage: ThisController.PageSize, ajaxUpdateContainerId: "tabs-2", defaultSort: "BuildingNumber");
            grid.Bind(Model, rowCount: Model.Count(), autoSortAndPage: false);
            grid.Pager(WebGridPagerModes.All);

            grid.GetHtml(
                tableStyle: "display",
                alternatingRowStyle: "alt",
                columns: grid.Columns(
                //grid.Column(format: (item) => Html.ActionLink("Edit", "Edit", new { EmployeeID = item.EmployeeID, ContactID = item.ContactID })),
                grid.Column("BuildingNumber", header: "Building Number"),
                    grid.Column("ConstructionDate", header: "Construction Date"),
                    grid.Column("ExtSquareFeet", header: "Exterior Sq. Ft."),
                    grid.Column("IntSquareFeet", header: "Interior Sq. Ft."),
                    grid.Column("IU_Avail", header: "IU Available"),
                    grid.Column("SpaceAvail", header: "Space Available"),
                    grid.Column("FixedAssetValue", header: "Fixed Asset Value"),
                    grid.Column("FixedEquipValue", header: "Fixed Equipment Value")
                ));   
        }
        else
        {
            @:There are no buildings at this facility.
        }
     }   
</div> 
```

这是我的 AJAX 调用

```
var regId = $("#ddlRegion").val();
var facId = $("#ddlFacility").val();

$.ajax({
    type: "POST",
    url: '@Url.Action("GetFacilityDetails")',
    data: { regionId: regId, facilityId: facId },
    success: function (returndata) {
        if (returndata.ok) {
            var itemData = returndata.data;
            var address = itemData.Address + " " + itemData.City + " " + itemData.State + " " + itemData.Zip;

            $("#lblFacilityType").html(itemData.FacilityType);
            $("#lblFacilityPurpose").html(itemData.FacilityPurpose);
            $("#lblFacilityStatus").html(itemData.FacilityStatus);
            $("#lblFacilityAddress").html(address);

            $("#tabs").tabs({ disabled: [] });
            //need to populate webgrid here
        }
        else {
            window.alert(' error : ' + returndata.message);
        }

    }
}
); 
```

我的控制器：

```
[HttpPost]
public ActionResult GetFacilityDetails(int regionId, string facilityId)
{
    try
    {
        //ViewBag.Buildings = buildingsVM.GetFacilityBuildings(regionId, facilityId);
        var facility = buildingsVM.GetFacilityDetails(regionId, facilityId);
        facility.Buildings = buildingsVM.GetFacilityBuildings(regionId, facilityId) as List<BuildingModel>;

        return Json(new { ok = true, data = facility, message = "ok" });
    }
    catch (Exception ex)
    {
        return Json(new { ok = false, message = ex.Message });
    }
} 
```

@Darin 我让你建议更改，但我没有看到屏幕上显示任何内容。我也没有收到任何错误。我单步执行了代码，并确认视图中的模型对象有 12 个我的自定义“建筑模型”对象。

这是我的部分视图：

```
@model IEnumerable<COPSPlanningWeb.Models.BuildingModel>
@{ 
    if (Model != null && Model.Count() > 0)
    {
       var grid = new WebGrid(rowsPerPage: 50, defaultSort: "BuildingNumber", ajaxUpdateContainerId: "tabs-2");
       grid.Bind(Model, rowCount: Model.Count(), autoSortAndPage: false);
       grid.Pager(WebGridPagerModes.All);

       grid.GetHtml(
        tableStyle: "display",
        alternatingRowStyle: "alt",
        columns: grid.Columns(
            grid.Column("BuildingNumber"),
            grid.Column("ConstructionDate"),
            grid.Column("ExtSquareFeet"),
            grid.Column("IntSquareFeet"),
            grid.Column("IU_Avail"),
            grid.Column("SpaceAvail"),
            grid.Column("FixedAssetValue"),
            grid.Column("FixedEquipValue")
        ));   
    }
    else 
    {
       @:There are no buildings at this facility. 
    }
} 
```

有趣的是，当我在浏览器中查看源代码时，我看到“该设施没有建筑物。”，但它没有显示在屏幕上，当我在调试器中单步执行代码时，模型确实有我的自定义对象.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T05:44:31.657

您可以将 WebGrid 放入部分：

```
@using ThisController = MyProject.Controllers.BuildingModelsController
@model IEnumerable<MyProject.Models.BuildingModel>

<div id="tabs-2">
    @Html.Partial("_Buildings")
</div> 
```

在里面`_Buildings.cshtml`：

```
<!-- Current Buildings -->
@{ 
    if (Model != null && Model.Count() > 0)
    {                            
        var grid = new WebGrid(source: Model, rowsPerPage: ThisController.PageSize, ajaxUpdateContainerId: "tabs-2", defaultSort: "BuildingNumber");
        grid.Bind(Model, rowCount: Model.Count(), autoSortAndPage: false);
        grid.Pager(WebGridPagerModes.All);

        grid.GetHtml(
            tableStyle: "display",
            alternatingRowStyle: "alt",
            columns: grid.Columns(
                grid.Column("BuildingNumber", header: "Building Number"),
                grid.Column("ConstructionDate", header: "Construction Date"),
                grid.Column("ExtSquareFeet", header: "Exterior Sq. Ft."),
                grid.Column("IntSquareFeet", header: "Interior Sq. Ft."),
                grid.Column("IU_Avail", header: "IU Available"),
                grid.Column("SpaceAvail", header: "Space Available"),
                grid.Column("FixedAssetValue", header: "Fixed Asset Value"),
                grid.Column("FixedEquipValue", header: "Fixed Equipment Value")
            )
        );   
    }
    else
    {
        @:There are no buildings at this facility.
    }
} 
```

现在在你的控制器动作中，如果成功返回这个部分：

```
[HttpPost]
public ActionResult GetFacilityDetails(int regionId, string facilityId)
{
    try
    {
        var facility = buildingsVM.GetFacilityDetails(regionId, facilityId);
        facility.Buildings = buildingsVM.GetFacilityBuildings(regionId, facilityId) as List<BuildingModel>;
        return PartialView("_Buildings", facility.Buildings);
    }
    catch (Exception ex)
    {
        return Json(new { ok = false, message = ex.Message });
    }
} 
```

并在您的 AJAX 调用中简单地刷新：

```
var regId = $("#ddlRegion").val();
var facId = $("#ddlFacility").val();

$.ajax({
    type: "POST",
    url: '@Url.Action("GetFacilityDetails")',
    data: { regionId: regId, facilityId: facId },
    success: function (returndata) {
        if (!returndata.ok) {
            window.alert(' error : ' + returndata.message);
        } else {
            $('#tabs').tabs({ disabled: [] });
            $('#tabs-2').html(returndata);
        }
    }
}); 
```

# video - mp4box 的 mp4 seek 比 input h264 慢

> ID：11351857
> 
> 赞同：0
> 
> 时间：2012-07-05T20:10:47.807
> 
> 标签：video, h.264, mp4

我有一个从 TI DM365 处理器生成的 h264 文件。当我在 VLC 播放器中播放它时，我可以跳到视频的任何部分，它会很快播放。但是，当我使用 mp4box 将 h264 放入 mp4 文件时，尝试跳转到 40 分钟文件的末尾可能需要 4 分钟。似乎它正在丢弃关键帧。我可以使用哪些设置来保持快速搜索性能。注意：我使用 ffmpeg 进行转换，转换需要 10 分钟，但搜索速度很快。mp4box 转换速度快，搜索速度慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:14:19.320

只是猜测，但我猜 TI 仅包含非常稀疏的关键帧。

当您使用 FFmpeg 进行转换时，它会重新编码文件，以合理的间隔添加关键帧。因此，转变是缓慢的，但寻求是快速的。使用 mp4box，无需重新编码，因此转换速度很快，但由于关键帧很少而且相距甚远，因此搜索需要很长时间。

解决方案是进行重新编码并接受它需要一些时间但允许快速搜索，或者只是重新打包流并以缓慢搜索为代价获得快速转换。

# dojo - Dojo 1.7.2 拖放错误 - “mouseButtons.isLeft”

> ID：11351859
> 
> 赞同：3
> 
> 时间：2012-07-05T20:11:07.277
> 
> 标签：dojo, drag-and-drop, mouseevent

我在 dojo 1.7.2 上并第一次尝试使用拖放。

在 dojo/dnd/Source.js 的函数`_legalMouseDown`中，有这一行：

```
// accept only the left mouse button
if(!dojo.mouseButtons.isLeft(e)){ return false; } 
```

可笑的`.isLeft`是，即使我按下鼠标左键，它也会返回 false。

这完全破坏了拖放功能。

我已将本地代码替换为`if(!e.button==0){return false;}`，这似乎有效。

`.isLeft`在dojo中似乎有多种实现，其中一些正在做`==0`，而另一些正在做`&1`。

**问题：**我发现了一个错误，还是我在做一些愚蠢的事情？

如果有帮助，我已经在 Chrome（版本 20.0.1132.47）和 Firefox（版本 13.0.1）中进行了测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T00:05:37.057

您的页面是否使用怪癖模式？这是 quirks 模式的已知问题。

[http://trac.dojotoolkit.org/ticket/15404](http://trac.dojotoolkit.org/ticket/15404)

您的解决方案可能破坏了其他浏览器 (IE)，因此请务必测试您的应用程序支持的浏览器。

# objective-c - 导航栏 iOS 5 上的多个按钮？

> ID：11351860
> 
> 赞同：13
> 
> 时间：2012-07-05T20:11:09.867
> 
> 标签：objective-c, ios

我知道这个话题有很多，但我无法让任何代码工作。我正在运行 iOS5 并为 iPad 构建，我只是无法在导航栏的一侧获得两个按钮。

任何帮助将不胜感激，谢谢。

编辑：

我测试过的一些代码，它 in `viewDidLoad`，但没有做任何事情。

```
UIBarButtonItem *saveButton = [[UIBarButtonItem alloc] initWithTitle:@"Save" style:UIBarButtonItemStylePlain target:self action:@selector(save)];

    UIBarButtonItem *deleteButton = [[UIBarButtonItem alloc] initWithTitle:@"Delete" style:UIBarButtonItemStylePlain target:self action:@selector(delete)];

    self.navigationItem.rightBarButtonItems = [NSArray arrayWithObjects:saveButton,deleteButton,nil]; 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-05T20:16:22.453

在 iOS 5 中`UINavigationItem`获得了数组属性：`rightBarButtonItems`和`leftBarButtonItems`. 您可以在类参考 中查看更多关于它们如何工作的详细信息，`leftBarButtonItem`以及[此处](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationItem_Class/Reference/UINavigationItem.html)`rightBarButtonItem`的后退按钮。

简而言之，您只需使用按钮制作一个数组，然后设置导航项的属性。我使用此功能在导航栏的左侧和右侧都有两个按钮。

**编辑**

这是我用来创建数组的代码。我的按钮都是在界面生成器中创建的：

```
self.navigationItem.leftBarButtonItems = [NSArray arrayWithObjects:backButton, settingsButton, nil];
self.navigationItem.leftItemsSupplementBackButton = YES;

self.navigationItem.rightBarButtonItems = [NSArray arrayWithObjects:continueButton, saveButton, nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T19:17:17.483

我相信这些答案假设您使用的是默认导航栏。（换句话说，当你使用 UINavigationViewController 时，iOS 会“免费”提供给你。）

如果您使用的是自定义 UINavigationBar，则需要检索它的第一个 UINavigationItem。（您也可以覆盖默认的 UINavigationItem。）从那里，您可以设置 leftBarButtonItems 和 rightBarButtonItems 属性。

像这样的东西：

```
// customNavBar points to my custom UINavigationBar
navItem = [[UINavigationItem alloc] initWithTitle:@"Details"];
NSArray *navArray = [[NSArray alloc] initWithObjects:navItem, nil];
[customNavBar setItems:navArray];  // This wipes out all existing UINavigationItem objects

NSArray *leftArray = [[NSArray alloc] initWithObjects:itemOk, nil];
NSArray *rightArray = [[NSArray alloc] initWithObjects:itemCancel, nil];
navItem.leftBarButtonItems = leftArray;
navItem.rightBarButtonItems= rightArray; 
```

# c# - 使用 c# 读取 csv 文件，不要读取双引号中的逗号

> ID：11351864
> 
> 赞同：3
> 
> 时间：2012-07-05T20:11:19.960
> 
> 标签：c#, csv

我正在使用 c# 读取一个 csv 文件，这是一个小代码片段。

```
using (StreamReader readFile = new StreamReader("C:\\temp\\" + whichTable))
{
    while ((line = readFile.ReadLine()) != null)
    {
        row = line.Split(',');

        switch (row.Length)
        {
            case 5:
                if (counter == 0) 
                { 
                    break; 
                } 
                else
                {
                    v00.Add(Convert.ToInt32(Regex.Replace(row[0], @"[^\w\.@-]", "")));
                }

                if (row[1] == "") 
                { 
                    v01.Add((1)); 
                }
                else
                {
                    v01.Add(Convert.ToInt32(Regex.Replace(row[1], @"[^\w\.@-]", "")));
                }

                if(row[2]=="")
                {
                    v02.Add(2);
                } 
                else
                {
                    v02.Add(Convert.ToInt32(Regex.Replace(row[2], @"[^\w\.@-]", "")));
                }

                v3.Add(row[4]);
                v4.Add(row[3]);
                counter++;
                break;
        }
        counter++;
    }
    break;
} 
```

正如您从我的代码中可以看出的那样，我测试了字符串行的长度，以确保它的长度正好是 5。我的问题是，如果 csv 中有一个带逗号的字段，那么它的计算结果将超过 5。我的 csv 格式正确，所以当这种情况发生时，我确实有一个该字段双引号。我怎么能告诉 c# 只计算双引号之外的逗号？这真的是我的问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T20:14:01.923

不要自己解析 CSV - 格式比大多数人意识到的更难正确解析。您可以使用许多现有的优秀 CSV 解析器。

[Microsoft.VisualBasic.FileIO](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.aspx)命名空间（常规 .NET 库）中的[`TextFieldParser`](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)库和许多第三方库 - [FileHelpers](http://filehelpers.sourceforge.net/)是一种流行的免费选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T20:17:43.043

有多种可能的解决方法，最简单的方法是逐个字符地逐行下去并自己计算逗号。如果你遇到引号，你可以切换一个布尔值，比如说。`bool inQuotes`，当`inQuotes`为真时，您只需忽略逗号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-31T05:48:55.337

您可以使用下面的代码，它对我有用：

```
 private void ImportCSV(string filePath = @"E:\nucc_taxonomy_140.csv", string tableName = "TempTaxonomyCodes")
    {
        string tempPath = System.IO.Path.GetDirectoryName(filePath);
        string strConn = @"Driver={Microsoft Text Driver (*.txt; *.csv)};Dbq=" + tempPath + @"\;Extensions=asc,csv,tab,txt";
        OdbcConnection conn = new OdbcConnection(strConn);
        OdbcDataAdapter da = new OdbcDataAdapter("Select * from " + System.IO.Path.GetFileName(filePath), conn);
        DataTable dt = new DataTable();
        da.Fill(dt);

        using (SqlBulkCopy bulkCopy = new SqlBulkCopy(ConfigurationSettings.AppSettings["dbConnectionString"]))
        {
            bulkCopy.DestinationTableName = tableName;
            bulkCopy.BatchSize = 50;
            bulkCopy.WriteToServer(dt);
        }

    } 
```

# riak - Riak 是否有任何同步功能来帮助同步。移动和网络应用程序？

> ID：11351866
> 
> 赞同：0
> 
> 时间：2012-07-05T20:11:29.523
> 
> 标签：riak

想知道 Riak 是否有任何东西可以帮助人们在移动和 Web 应用程序之间同步数据？

即，当用户在他们的手机/网络上发布记录或更新记录时，应用程序开发人员很容易检测到数据不同步。并刷新显示的数据。

我听说 couchdb 有一些东西，但我仍在调查我的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:53:52.267

Riak 有[提交挂钩](http://wiki.basho.com/Commit-Hooks.html)，您可以在其中测试值是否正在更改。

至于 CouchDB，我相信您说的是[Changes API](http://guide.couchdb.org/draft/notifications.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T10:31:50.220

Trifork 是 Riak 的制造商 Basho 的合作伙伴，我们制作了我们称之为 Riak Sync 协议的东西。

Riak Sync 基本上是 Internet 上某处的 Riak 集群与移动设备或多个移动设备之间的存储桶同步协议。它基于 Merkle 树和并行连接，非常高效。

您可以在此演示文稿中查看 Riak Sync 的概述：

[http://gotocon.com/dl/goto-aarhus-2011/slides/KrestenKrabThorup_BringingRiakToTheMobilePlatform.pdf](http://gotocon.com/dl/goto-aarhus-2011/slides/KrestenKrabThorup_BringingRiakToTheMobilePlatform.pdf)

我相信我们也为 Riak 服务器实现了 Riak Sync - 显然 - 以及不同的移动设备。

如果您对使用 Riak Sync 感兴趣，请随时与我联系。我可以挖掘更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-08T05:46:48.270

**“Riak Mobile”现在是新的替代品。** [http://www.linkedin.com/groups/Free-GeekNight-in-Malm%C3%B6-about-2583523.S.90093295](http://www.linkedin.com/groups/Free-GeekNight-in-Malm%C3%B6-about-2583523.S.90093295)说“GOTO 扬声器 Kresten Krab Thorup 将展示 Riak Mobile，这是一个可以嵌入到您的 iOS 或 Android 应用程序，使其成为一个完整的 Riak 复制感知对等体，并了解 Riak Mobile 的工作原理。.. 8\. februar, 2012" 但是“Riak+Mobile”的 Google 搜索似乎没有找到实际的软件（虽然我有点记得可能在 6 个月前读过它）但现在在官方网站上我只能找到[http://basho.com/popular-use-cases-for-mobile-platforms-on-riak/的文章](http://basho.com/popular-use-cases-for-mobile-platforms-on-riak/)只是概述细节，没有提及任何嵌入式软件，而是使用转换后的短语“Mobile on Riak”，所以我有根据的猜测是，Riak 的制造商发现在移动设备上存储对等 Riak 存在问题，但随后做了一些事情导致我对他们失去了显着的尊重：而不是在他们的产品页面上记录和解释这个问题，或者如果确实有必要的话，可能会将产品标记为停产，**似乎他们已经从他们的产品中删除了所有提及他们的产品“Riak Mobile”网站**。如果我知道 URL，我会挖掘“Riak Mobile”的 archive.org 来展示这个。

# objective-c - 如何在特定“时刻”在加速度计轴上施加力？

> ID：11351870
> 
> 赞同：0
> 
> 时间：2012-07-05T20:11:46.027
> 
> 标签：objective-c, ios, accelerometer

我对 Objective-C 和 iOS 开发相当陌生，在阅读了一些关于 Accelerometer 类的文档后，我仍然不确定一些事情，所以也许你可以为我澄清这些......另外请原谅我的 C++ ..我只是用它作为一个例子..

我想创建一个看起来像这样的 while 循环：

```
while(play)
{
    while(getYaxis()>=..... && getYaxis()<=....)
    {
        //do something..
    }
    //more code to execute...
} 
```

我想创建一个名为“getYaxis”的方法，它返回在调用该方法时在加速度计的 Y 轴上施加的力......

这可能吗？如何？显然，您可以将加速度计设置为定期返回 g 值，因为我只想让一个值返回“秒”，我在我的 while 条件下要求它。然后其余的代码应该如上所示执行，在某个时候我将返回到那个while循环并再次检查Y值。换句话说，我不想设置检查加速度计值的频率间隔，而是让该间隔成为执行其余代码并返回将检查 Y- 的 while 循环所花费的时间再次值..或者两次检查之间的间隔太短以至于最终可能导致问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:08:51.430

以下是您获得加速度计并成为代表的方法：

```
UIAccelerometer *theAccelerometer = [UIAccelerometer sharedAccelerometer];
theAccelerometer.updateInterval = 0.001; //in seconds
theAccelerometer.delegate = self; 
```

记得添加`<UIAccelerometerDelegate>`到你的 VC。

然后你可以捕捉到变化：

```
-(void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration

{
    self.x = acceleration.x;
    self.y = acceleration.y;
    self.z = acceleration.z;
} 
```

确保您有为`x,y,z`类型创建的属性`UIAccelerationValue`。

然后只需编写一个名为`getX`or的方法`getY`；

```
-(UIAccelerationValue *) getY
{
    return self.y;
} 
```

您将让它以毫秒或您想要的速度更新，并将其保存在属性中。然后您可以使用该函数检查属性的值。

# jquery - 使用 jquery 动态调整大小

> ID：11351871
> 
> 赞同：1
> 
> 时间：2012-07-05T20:11:56.433
> 
> 标签：jquery

我已经看到对此的另一个参考，但我无法理解响应。我正在尝试在调整窗口大小时动态更改页面元素（#maincontent）的高度。

这是我的代码：

```
$(function() {
   if($(window).resize()){
      var h1 = $(window).height();
      var h2 = $('#maincontent').height();
      if (h2<h1){
          $('#maincontent').css('height',h1);
      }
   }
}); 
```

没有页面刷新它就行不通，我不明白为什么不这样做。我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:15:01.563

您没有正确捕获窗口调整大小事件：

```
 $(window).resize(function () {

      var h1 = $(window).height();
      var h2 = $('#maincontent').height();
      if (h2<h1){
          $('#maincontent').css('height',h1);
      }

   }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T20:13:57.817

调整大小功能不能这样工作。它接受一个函数作为参数：

```
$(function(){
    $(window).resize(function() {
       // do things when the window is resized
    });
}); 
```

大多数 jquery 函数都采用这样的回调，在发送事件（此处为“调整大小”）时调用该回调。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T20:14:41.467

这是因为 window.resize() 将函数作为其参数

前任。

```
 $(function () {
        $(window).resize(function () {
            // your code here
        });
    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T20:15:02.420

```
$(function() {
    $(window).resize(function(e){

        var h1 = $(window).height();
        var h2 = $('#maincontent').height();
        if (h2<h1){
        $('#maincontent').css('height',h1);
        }

    })
 }); 
```

你不应该检查是否而是通过函数来​​调整大小事件

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-05T20:15:15.637

这是因为在页面加载时不会`resize`触发。

```
var h2 = $('#maincontent').height();

function setSize(){         // wrap you necessary code inside a function
   var h1 = $(window).height();       
   if (h2<h1){
      $('#maincontent').css({height: h1 });
   }
}
setSize();                 // call at page load

$(window).resize(function(){
  setSize();               // and on window resize.
}); 
```

# python - 将字典转换为列表

> ID：11351874
> 
> 赞同：4
> 
> 时间：2012-07-05T20:12:15.317
> 
> 标签：python

我有

```
{key1:value1, key2:value2, etc} 
```

我希望它变成：

```
[key1,value1,key2,value2] , if certain keys match certain criteria. 
```

我怎样才能尽可能像pythonically那样做呢？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T20:15:02.313

这应该可以解决问题：

```
[y for x in dict.items() for y in x] 
```

例如：

```
dict = {'one': 1, 'two': 2}

print([y for x in dict.items() for y in x]) 
```

这将打印：

```
['two', 2, 'one', 1] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-05T20:22:41.763

给定 a `dict`，这会将所有项目组合成一个元组

```
sum(dict.items(),()) 
```

如果你想要一个列表而不是一个元组

```
list(sum(dict.items(),())) 
```

例如

```
dict = {"We": "Love", "Your" : "Dict"}
x = list(sum(dict.items(),())) 
```

`x`那么是

```
['We', 'Love', 'Your', 'Dict'] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T20:14:35.310

此代码应该可以解决您的问题：

```
myList = []
for tup in myDict.iteritems():
    myList.extend(tup)

>>> myList
[1, 1, 2, 2, 3, 3] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-05T20:16:51.627

最有效的（不一定是最易读或 Python 是）

```
from itertools import chain

d = { 3: 2, 7: 9, 4: 5 } # etc...
mylist = list(chain.from_iterable(d.iteritems())) 
```

除了实现列表之外，所有内容都保存为迭代器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-05T20:27:34.403

另一个条目/答案：

```
import itertools

dict = {'one': 1, 'two': 2}

bl = [[k, v] for k, v in dict.items()]
list(itertools.chain(*bl)) 
```

产量

```
['two', 2, 'one', 1] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-05T20:16:43.953

```
>>> a = {"lol": 1 }
>>> l = []
>>> for k in a.keys():
...     l.append( k )
...     l.append( a[k] )
... 
>>> l
['lol', 1] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-05T20:35:44.153

如果速度很重要，请使用 extend 将键、值对添加到空列表中：

```
l=[]
for t in sorted(d.items()):
    return l.extend(t)

>>> d={'key1':'val1','key2':'val2'}
>>> l=[]
>>> for t in sorted(d.items()):
...    l.extend(t)
... 
>>> l
['key1', 'val1', 'key2', 'val2'] 
```

这种形式不仅更快，而且更容易为每个键值对添加逻辑。

速度比较：

```
d={'key1':'val1','key2':'val2'}

def f1():
    l=[]
    for t in d.items():
        return l.extend(t)

def f2():
    return [y for x in d.items() for y in x]

cmpthese.cmpthese([f1,f2]) 
```

印刷：

```
 rate/sec    f2     f1
f2   908,348    -- -33.1%
f1 1,358,105 49.5%     -- 
```

# java - 从 Java 应用程序内部反编译 jas/ClassEnv 创建的 .class 文件

> ID：11351875
> 
> 赞同：2
> 
> 时间：2012-07-05T20:12:17.790
> 
> 标签：java, decompiling

我的 java 应用程序使用 jas ClassEnv 创建 .class 文件。我需要能够反编译这些 .class 文件并将内容转换为字符串（以便可以在 TextArea 中显示）。我发现的所有反编译器都是独立程序，是否有任何集成的 java 库可以进行这种反编译？或者无论如何我可以从 ClasseEnv 对象中获取字符串表示形式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T15:00:26.493

以下是我发现的一些选项：

1.  [back2code](http://code.google.com/p/back2code/)
2.  [烟灰](http://www.sable.mcgill.ca/soot/)+[达瓦](http://www.sable.mcgill.ca/dava/)
3.  [爵士乐](http://jclazz.sourceforge.net/)
4.  [杰德克](http://jdec.sourceforge.net/)
5.  [笑话](http://jode.sourceforge.net/)
6.  [编译器](http://sourceforge.net/projects/dcompiler/)
7.  [jreversepro](http://jreversepro.blogspot.com/)

*注意*：我自己没有使用过以上任何一个，所以您必须检查它们是否支持您需要的功能，或者它们是否足够成熟以满足您的需求

*注意*：虽然列出的一些选项看似独立的程序，但所有需要执行 Java 的程序（例如，您没有运行 .exe ——但*请*检查 .bat/.sh 脚本内部），您可以调用从您的程序中：只需将适当的 .jar 文件添加到应用程序的类路径中，您就可以从程序中访问其中的所有类 - 至少您可以`main()`在 .jar 的默认类中调用该方法适当的参数。您可能需要打开一个文件（其中提取了反编译的 .class 的源代码）才能在程序中以字符串形式访问该源代码。

# php - 将基于时间戳的 JSON 响应保存到数据库

> ID：11351876
> 
> 赞同：-1
> 
> 时间：2012-07-05T20:12:20.753
> 
> 标签：php, mysql, sql, regex, json

通过 API，我得到以下 JSON 响应，

```
status: "550",
created: "2012-07-02 19:00:58",
reason: "550 #5.1.0 Address rejected. ",
email: "somemail@dummy.org" 
```

我希望将此响应保存到数据库中，

每次填充数据库时，我都需要“创建”字段，它实际上是一个时间戳，是唯一的，我要编写的脚本基本上是一个 cron 作业，所以我不想在数据库中多次添加相同的记录，

如何根据时间戳填充数据库？

另外，我如何提取从

```
reason: "550 #5.1.0 Address rejected. ", 
```

这里的反弹代码是

> 5.1.0

请指导我，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:22:56.960

**1 - 避免重复条目**

**使列唯一**- 将[`UNIQUE`索引](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)添加到时间戳列，以便数据库服务器在您尝试再次插入相同的索引时抱怨。

```
CREATE UNIQUE INDEX name_of_index ON tablename (created); 
```

在此之后，您可以[`INSERT IGNORE INTO`](http://dev.mysql.com/doc/refman/5.1/en/insert.html)或[`REPLACE INTO`](http://dev.mysql.com/doc/refman/5.1/en/replace.html)表，它将失败或更新现有行。

**检查值是否存在**- 您可以在插入任何内容之前执行查询，检查时间戳是否存在。

```
SELECT count(created) FROM tablename WHERE created = '2012-07-02 19:00:58'; 
```

如果结果是`> 0`您知道您已经有一行带有该时间戳，那么您就不要插入。如果没有其他人在您的查询和插入语句之间在该数据库中放置任何内容，这是安全的。

**始终删除和插入**- 第三种方法是预防性地删除具有该时间戳的所有行，然后插入一行。

```
DELETE FROM tablename WHERE created = '2012-07-02 19:00:58'; 
```

```
INSERT INTO tablename [...]; 
```

但是由于我并没有真正了解您在这里要做什么，因此您需要编辑您的问题并更加具体。

**2 - 提取退回代码**

取决于这些原因可能是什么样子。如果可以安全地[假设](http://php.net/manual/en/function.mb-substr.php)没有其他. 这里不需要正则表达式。或者干脆参考[André Catita 的回答](https://stackoverflow.com/a/11352079/95033)。`#``space``#`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T20:27:05.453

要获取退回代码，请使用正则表达式。简单的方法是：

```
$string = 'asdsa#5.3.1 A';
preg_match('/#(.+) /is', $string, $match);
echo $match[1]; // match[1] will be '5.1.0' 
```

我假设您想将“创建”变量转换为时间戳？只需使用 strtotime，因为您收到的日期是该函数的有效复合格式，它将正常工作，如下所示。

```
$created = '2012-07-02 19:00:58';
$timestamp = strtotime($created); 
```

这样您就可以将日期转换为时间戳，然后只需确保时间戳的列是唯一的。

# google-chrome - Chrome 静默打印问题

> ID：11351878
> 
> 赞同：0
> 
> 时间：2012-07-05T20:12:32.337
> 
> 标签：google-chrome, printing, silent

我在 chome 中使用 --kiosk --kiosk-printing 模式时遇到问题。

我正在使用 chrome 20.x。

第一页打印得很好，但是所有下一页都完全空白，甚至没有标题......

有谁知道修复？

还有人知道具有信息亭和静音打印模式的不同浏览器吗？（Firefox插件似乎有很多错误......）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:11:20.283

也许你想检查你的空闲时间？

# c# - 带有 Ninject 依赖注入的 ASP.NET MVC 应用程序中的 MongoDB 官方 C# 驱动程序

> ID：11351880
> 
> 赞同：4
> 
> 时间：2012-07-05T20:12:35.293
> 
> 标签：c#, .net, asp.net-mvc, mongodb, ninject

有没有人有一个代码示例遵循在 ASP.NET MVC 应用程序中使用 MongoDB Official C# Driver 和 Ninject 的最佳实践？

我的看起来像这样：

```
namespace WebApp
{
    public class DataModule : NinjectModule
    {
        public override void Load()
        {
            var conventions = new ConventionProfile().SetElementNameConvention(new CamelCaseElementNameConvention());
            BsonClassMap.RegisterConventions(conventions, x => true);

            var server = MongoServer.Create(connectionString);
            var database = server.GetDatabase("webapp");
            Bind<MongoDatabase>().ToConstant(database);
        }
    }
} 
```

由于这段代码是单例的，我对此有一种不好的感觉：|

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T00:18:04.600

MongoServer 可以作为单例保存。MongoDatabase 也是如此。它们都是线程安全的，即使你每次都创建一个新的 MongoServer 和 MongoDatabase，你也会得到相同的实例，因为只要连接字符串完全相同，它们就会被缓存在下面。

# android - 在现有 SQLITE 中创建附加表（不丢失数据）

> ID：11351885
> 
> 赞同：6
> 
> 时间：2012-07-05T20:12:46.020
> 
> 标签：android, sql, sqlite

我想在我现有的数据库中添加一个额外的表而不丢失数据。因此，删除表并创建新表是没有选择的。最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T22:09:03.993

这似乎要容易得多。我使用 SQLiteOpenHelper。因此，如果数据库已经存在，则永远不会调用 onCreate()。当版本号增加时，会调用 onUpdate()。在 onUpdate() 中，我添加了“如果不存在则创建表”的新表。从 SQLITE.ORG 的文档中：但是，如果“IF NOT EXISTS”子句被指定为 CREATE TABLE 语句的一部分并且同名的表或视图已经存在，则 CREATE TABLE 命令根本没有效果（并且没有返回错误信息）。现在该表已创建并且很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T20:15:39.053

我这样做的方法是创建一个单独的数据库，将所有内容从当前数据库复制到临时新数据库，然后删除旧数据库在那里做任何事情，然后从临时数据库中复制信息。

不确定是否有其他方法可以做到，但如果有的话，我很想听听

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-19T11:03:52.720

如果要在现有数据库中添加新表，则应在 onUpgrade() 方法中执行此操作，例如：-

```
 @Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    if (oldVersion == xyz) {
        db.execSQL(QUERY_CREATE_TABLE_..........NEW);
    }
} 
```

这里**xyz**是您要在其中添加新表的旧版本数据库。

并记得更新 DATABASE_VERSION

> 当我们增加数据库版本然后**onUpgrade()**方法调用，并使用条件添加表。
> 
> 并且还在 onCreate() 中使用现有表创建一个新表，用于全新安装，例如：-

```
 @Override
public void onCreate(SQLiteDatabase db) {
        db.execSQL(QUERY_CREATE_TABLE_..........OLD);
        db.execSQL(QUERY_CREATE_TABLE_..........OLD);
        db.execSQL(QUERY_CREATE_TABLE_..........NEW);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T20:18:50.693

创建一个扩展 SQLiteOpenHelper 的类，覆盖 onOpen(SQLiteDatabase db)，使用表创建查询创建一个 String，然后使用 db.execSQL(String str);

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-03-15T08:09:48.493

首先你应该了解 onCreate() 和 onUpgrade() 方法

**onCreate -**当您的数据库第一次创建时 onCreate() 方法被调用。当您第一次安装应用程序时，总是调用 onCreate() 方法

**onUpgrade() -**当你改变你的数据库版本然后 onUpgrade() 方法调用

所以新用户应该得到所有表，老用户得到所有升级表和新表。

在以下示例中，假设我们正在添加新表**Table_5**和**Altering Table_4**

```
public void onCreate(SQLiteDatabase db) {
 //For new User oncreate method will executed an new user get all the table
    db.execSQL( Create_Table );
    db.execSQL( Create_Table2 );
    db.execSQL( Create_Table3 );
    db.execSQL( Create_Table4 );
    db.execSQL( Create_Table5);  
}
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

      if(oldVersion<newVersion)
        {
           //For old user onUpgrade method is execute 
             db.execSQL( Alter_Table4);
             db.execSQL( Create_Table5);

         }     
} 
```

# php - Drupal 中的德语字符被截断（可能是由于 mysql）

> ID：11351887
> 
> 赞同：0
> 
> 时间：2012-07-05T20:12:54.250
> 
> 标签：php, mysql, drupal

我有一个德语的drupal页面。它是在其他地方写的，但是当我将它粘贴到 drupal 页面并保存时，只保存了一半或四分之一的文本。出于某种原因，其余文本没有保存在数据库中，并且在保存后查看时只显示了四分之一的文本。所以，基本上它被切断了。这是数据库问题还是drupal问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T22:00:21.020

我为任何仍然感兴趣的人想通了。复制所有德语文本，将其放入 Microsoft Word 中，转到“审阅”选项卡并单击“设置语言”，然后选择“英语”。将其粘贴回您的 drupal 文本框并提交！

# python - 移动名称中带有空格的文件

> ID：11351889
> 
> 赞同：0
> 
> 时间：2012-07-05T20:13:09.067
> 
> 标签：python, shutil

我正在尝试在 python 中移动一些文件，但它们的名称中有空格。有没有办法专门告诉python将字符串视为文件名？

```
listing = os.listdir(self.Parent.userTempFolderPath)
for infile in listing:
    if infile.find("Thumbs.db") == -1 and infile.find("DS") == -1:

        fileMover.moveFile(infile, self.Parent.userTempFolderPath, self.Parent.currentProjectObject.Watchfolder, True) 
```

从列表中获取文件后，我运行`os.path.exists`它以查看它是否存在，但它永远不存在！有人可以在这里给我一个提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:15:13.500

文件名中的空格不是问题；`os.listdir`返回文件名，而不是完整路径。

您需要将它们添加到您的文件名中以测试它们；[`os.path.join`](http://docs.python.org/library/os.path.html#os.path.join)将使用适合您平台的正确目录分隔符为您执行此操作：

```
listing = os.listdir(self.Parent.userTempFolderPath)
for infile in listing:
    if 'Thumbs.db' not in infile and 'DS' not in infile:
        path = os.path.join(self.Parent.userTempFolderPath, infile)

        fileMover.moveFile(path, self.Parent.userTempFolderPath, self.Parent.currentProjectObject.Watchfolder, True) 
```

请注意，我还简化了您的文件名测试；而不是使用`.find(..) == -1`我使用`not in`运算符。

# ruby-on-rails - 单表继承或在 Rails 中有很多通过

> ID：11351891
> 
> 赞同：0
> 
> 时间：2012-07-05T20:13:17.773
> 
> 标签：ruby-on-rails, has-many-through, single-table-inheritance

我认为这是一个简单的问题，但无法弄清楚我的确切答案。

我有一个`Event`列表：`People, Food, Costs, To-Do, etc.`所有作为不同的信息项。如果存在相关数据项，我不必检查每个相应的表，而是希望能够计算或抓取所有`Items`属于给定的`Event`.

使用 HMT 最容易做到这一点吗？起初我认为是 STI，但不确定这是否有意义，因为它们共享的数据很少（除了时间戳和创建者）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:51:11.310

我认为您的架构设计过于复杂。这些是可以使用给定模型回答的一些问题：

*   给定一个事件，将哪些项目带到事件中？

*   给定一个事件，谁来参加这个事件？

*   给定一个事件，谁带来了哪个项目？

## - 给定一个事件，有哪些活动？

```
class Event < ActiveRecord::Base
  has_many_and_belongs_to_many :items
  has_many_and_belongs_to_many :todos
  has_many :people, :through => :attendances
end

class Attendance < ActiveRecord::Base
  belongs_to :event
  belongs_to :person
end

class Person < ActiveRecord::Base
  has_many :events, :through => :attendances
end

class Item < ActiveRecord::Base
  has_many_and_belongs_to_many :events
end

class Todo < ActiveRecord::Base
  has_many_and_belongs_to_many :events 
end 
```

该模型假设：

*   可以将单个项目带到两个不同的事件中。例如，一个篮球可以同时参加 2012 年 NBA 总决赛和 2011 年 NBA 总决赛。

*   一项活动可以在两个不同的事件中完成。例如，家庭聚会和早餐都可以喝啤酒

# php - 尝试在 ByetHost 上从 VistaPanel 使用 phpMyAdmin 时出现 phpMyAdmin 无限循环

> ID：11351895
> 
> 赞同：2
> 
> 时间：2012-07-05T20:13:45.763
> 
> 标签：php, database, redirect, phpmyadmin, hosting

我正在使用一个名为[ByetHost](http://byethost.com/)的免费主机，因为我正在构建的网站不需要昂贵的托管解决方案，因为流量会很低。

尝试在我的 VistaPanel 帐户中登录 phpMyAdmin 时，我遇到了无限重定向循环。我正在使用 CMS，需要备份我的数据库。

当我尝试输入 phpMyAdmin 时，使用 URL [http://www.php-myadmin.com/login.php?phpMyAdmin=HASHINHERE](http://www.php-myadmin.com/login.php?phpMyAdmin=HASHINHERE)我只是在我的浏览器中得到这个：

> 页面未正确重定向
> 
> Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。
> 
> 此问题有时可能是由禁用或拒绝接受 cookie 引起的。

我已清除所有 cookie 和缓存并尝试了两种不同的浏览器（FF 和 Safari）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T12:44:36.837

我已经找到了解决这个问题的方法，我可以想象这对于 phpMyAdmin 的其他 VistaPanel/cPanel 用户来说可能是一个问题。

我必须登录 cPanel，**更改密码**，注销，清除所有 cookie，然后重新登录。当我重新登录并尝试连接到 phpMyAdmin 时，我可以正常登录！

# jquery - jQuery验证插件不断刷新页面

> ID：11351899
> 
> 赞同：0
> 
> 时间：2012-07-05T20:13:59.397
> 
> 标签：jquery, jquery-validate

我正在使用 jQuery 的验证插件在进行 Ajax 调用之前验证表单，但由于某种原因，每次我提交表单时页面都会刷新。这是我的验证功能：

```
//Invite form validation
$("#inviteForm").validate({
//Rules for invite validation
rules: {
            name: "required",
            email: {
                required: true,
                email: true
            }
        },
//Messages to print if validation fails
messages: {
            name: "Please provide your friend's name.",
            email: "We cannot contact your friend without a valid email address.",
        },
//What to do when validation succeeds
submitHandler: function(form) {
            //Form is valid, make Ajax call
            $.ajax({
            type: "POST",
            url: '/invite/process',
            data: $("#inviteForm").serialize(),
            datatype: "html",
            success: function(data, textStatus ,XHR) {
                $("#inviteModal").html(data);
                if(data.indexOf("Thank you") >= 0 ){
                    invites -=1;
                    $("#overlay").css("display", "none");
                    $("#inviteModal").fadeOut(5000);
                }
            }
            });
            return false;
        }
}); 
```

我将它放在 a`$(document).ready`中，但我没有发布整个内容，因为那里还有一些其他功能。这是表单的代码：

```
<!--// MODAL: INVITE //-->
<div id="inviteModal" class="modal" style="display: none">
<script type="text/javascript" src="/includes/js/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
var invites = <?php echo $user->getInvitesLeft(); ?>;
if(invites < 1){

$("#inviteModal").html("You have no invites left. You can get more by increasing your score.");
}
else{
$("#inviteModal").html("<h2>Please enter the specified information for the friend you wish to invite. </h2>"+
   "<form id=\"inviteForm\" >"+
   "<p>Name: <input type=\"text\" name=\"name\"></p>"+
   "<p>Email: <input type=\"text\" name=\"email\"></p>"+
   "<p><input type=\"submit\" name=\"submit\" value=\"Invite\"></p>"+
   "</form>");
}

</script>
</div> 
```

每当我提交表单时，它会刷新页面而不执行 Ajax 调用并将表单数据添加到 URL，例如？name=bobby&email=williamrump%40aol.com&submit=Invite。为什么它会在不进行 Ajax 调用的情况下刷新页面，我可以做些什么来阻止它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:48:35.263

似乎您在尝试附加验证器*后正在创建表单。*这是可能导致这种情况的少数原因之一：我会检查：

*   `document.ready()`围绕 jQuery 代码，以确保在创建验证器事件*后*附加它。
*   如果您通过 JavaScript 创建表单，请确保在附加验证器事件之前执行代码。
*   检查 JavaScript 错误。它们可能会停止执行您的 JavaScript 的其余部分，并阻止其将验证器事件附加到表单。
*   检查`,`发送给验证器的选项对象中的额外内容。某些浏览器（如 IE）可能会失败。
*   尝试`console.log()`在您的提交处理程序上添加一个，以查看是否有任何内容通过您的验证器。

*Last minute note*: Seems like my first suggestion, also provided in the comments to your question was the issue. So you may take the rest as future check list for this kind of issues :)

# nosql - HDFS 如何放松 POSIX

> ID：11351904
> 
> 赞同：5
> 
> 时间：2012-07-05T20:14:02.080
> 
> 标签：nosql, posix, hdfs

根据我的阅读，HDFS 速度很快，因为它放松了一些 POSIX 技术，但这是如何工作的？或者至少是哪些？我没有找到答案，因为在谷歌上，我发现有人将提问者重定向到一个大型网站！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T02:37:30.607

根据[Hadoop - The Definitive Guide](https://rads.stackoverflow.com/amzn/click/com/1449311520)（建议买这本书）

> 创建文件后，它在文件系统命名空间中可见，正如预期的那样：
> 
> 文件系统的一致性模型描述了文件读取和写入的数据可见性。HDFS 权衡了一些 POSIX 对性能的要求，因此某些操作的行为可能与您预期的不同。
> 
> 但是，即使流被刷新，写入文件的任何内容都不能保证可见。所以文件的长度似乎为零：
> 
> 一旦写入了超过一个块的数据，第一个块将对新读者可见。后续块也是如此：它始终是当前正在写入的块对其他读者不可见。
> 
> HDFS 提供了一种通过 FSDataOutputStream 上的 sync() 方法强制所有缓冲区同步到数据节点的方法。从 sync() 成功返回后，HDFS 保证写入文件中该点的数据被持久化并且对所有新读者可见：

另一件事是

> 权限分为三种：读权限（r）、写权限（w）和执行权限（x）。读取文件或列出目录的内容需要读取权限。写入文件或目录需要写入权限才能在其中创建或删除文件或目录。文件的执行权限被忽略，因为您无法在 HDFS 上执行文件（与 POSIX 不同），并且对于目录，它需要访问其子级。

# javascript - node.js 网站/应用模板设计

> ID：11351906
> 
> 赞同：4
> 
> 时间：2012-07-05T20:14:21.427
> 
> 标签：javascript, html, model-view-controller, node.js

**精简版：**

模板完全通过提供一个 html 文件并使用 ajax/sockets 加载特定于页面的数据以及节点来完成，我应该期望什么样的性能？设计方面的好坏？

**长版**

我目前正在学习编写更好的节点。我是 javascript 的忠实粉丝，我目前正在尝试找出 node.js 中的好/坏做法

我正在考虑模板，我正在努力将我呈现的内容与我存储的内容分开。我正在阅读很多 MVC 文章，我真的很想将视图逻辑分开，而不会出现杂乱的代码。

**我的问题是：**

假设我有一个网站，它包含几个代表用户看到的“屏幕”的文件，假设在这个基本示例中用户应该能够看到：`Index, About, Contact, Portfolio`.

现在我需要动态加载这些页面，这意味着我不想每次都更新每个文件的模板，但它们看起来都非常相似。

由于节点完全基于异步操作 - 为所有这些操作提供相同的 .html 页面，然后根据我正在使用 AJAX / web 的页面从服务器加载所有数据会有多好/坏插座？

（天真地，遍历所有具有 name='view' 的部分并通过 id 或类似的东西获取内容）

我觉得这将提供页面的异步加载，并将站点布局与站点的其余部分完全分离。这对我来说感觉非常节点，没有阻塞，一切都是异步的。我正在寻找经验丰富的开发人员关于该主题的意见。

此外，任何与使用 node.js 构建站点相关的提示都值得赞赏。我来自 PHP 背景，我真的想在设计时避免使用类似于 webmatrix 的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:01:24.287

这种“单页网站”有几个陷阱：

SEO：蜘蛛很难索引此内容。它更适用于封闭的内容，例如用户的电子邮件。

导航：保留用户习惯的浏览器行为是可能的，但您必须明确考虑 - 书签将如何工作？后退键怎么样？

以传统方式提供页面可能会更好（没有理由不能在后端的节点中呈现模板）。然后优化您的客户端代码和缓存系统，以便快速加载第二个页面 - 它不需要重新获取 .css 或 .js。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T20:51:24.843

简单的概念是您有一些布局模板和一些部分。您将加载这些模板，就好像它们是 JS 文件一样（它们是在编译时）。您可以将已编译的模板设置为某处的全局对象.. App.templates.portfolio = JST["templates/portfolio"]。为您的应用程序执行一次。这些模板可以缓存在任何地方——浏览器的本地存储、反向代理等。

当用户点击“投资组合”时，您的服务器会发回 JSON，然后您使用从服务器返回的数据在浏览器中编译“投资组合”模板。

[https://github.com/sstephenson/eco/](https://github.com/sstephenson/eco/) 非常适合这个目的。还有很多其他的同样好，甚至更好。这都是个人喜好。玉是我的最爱。

大多数 MVC 框架都包含其中之一。

如果您有一个简单的基于页面的站点，那么 Node 可能不是最佳选择。我相信你已经知道了。

# php - 如何根据匹配的列值进行 mySQL 查询？

> ID：11351907
> 
> 赞同：0
> 
> 时间：2012-07-05T20:14:31.440
> 
> 标签：php, mysql

我希望 while 循环根据匹配的“id”列值输出。

```
 $query = "SELECT s.id,s.last,s.first,s.course1,s.course2,s.course3
            ,e.id,e.last,e.first,e.course1,e.course2,e.course3
            FROM $startsem1 s
            JOIN $endsem1 e on s.id = e.id";
    $result = mysql_query($query) or die(mysql_error());

    while ($row = mysql_fetch_assoc($result))
    {
         print_r($row); echo "<br><br>";
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:16:18.557

使用连接：

```
SELECT s.id,s.last,s.first,s.course1,s.course2,s.course3
      ,e.id,e.last,e.first,e.course1,e.course2,e.course3
  FROM $startsem1 s
  JOIN $endsem1 e on s.id = e.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:16:38.583

您在 while 循环条件中使用二元运算符`&`，而不是逻辑。`&&`

# trigger.io - 我可以在 Trigger.io 上的 iOS 应用程序中使用本机后退按钮吗？

> ID：11351909
> 
> 赞同：2
> 
> 时间：2012-07-05T20:14:37.680
> 
> 标签：trigger.io

如果我的 trigger.io iOS 应用程序中有本机顶栏，我可以使用本机后退按钮（指向一侧）转到上一个视图吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:18:48.867

如果我理解正确，您正在寻找一侧带有箭头的后退按钮。我现在无法看到 Trigger.io 在本机上是如何实现的。

一种可能的解决方法是自己模仿箭头后退按钮，可能沿用[这种纯 CSS 方法](http://dream-world.us/2011/11/30/the-best-pure-css3-ios-style-arrow-back-button/)。

但是，我不确定您是否可以将其集成到本机顶栏而不自己构建整个东西（这会导致新问题，例如移动设备上的固定标题......）。

让我们希望 Trigger.io 将原生包含这些箭头后退按钮。

# android - 滚动我的自定义 ListView 时复选框丢失选中值

> ID：11351915
> 
> 赞同：5
> 
> 时间：2012-07-05T20:15:03.840
> 
> 标签：android, listview, checkbox

**我所拥有的：**带有 Textviews 和复选框的自定义列表视图。
**问题：**如果我检查屏幕上显示的初始项目，然后滚动列表，当我返回列表顶部（向上滚动）时，它们的值被正确保存。但是，如果我滚动列表，例如我想检查列表的最后一个树复选框，那么如果我向上和向下滚动它们就会被取消选中....为什么？**
我在其他论坛上看到了相同问题的各种解决方案也在stackoverflow上，但问题仍然存在。
在我认为可以的 getView 函数下方：

```
 @Override
      public View getView(final int position, View convertView, ViewGroup parent) {
    final ViewHolder viewHolder;
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.item_select_friends, null);
        viewHolder=new ViewHolder();
        viewHolder.nameText=(TextView) convertView.findViewById(R.id.personName);
        viewHolder.surnameText=(TextView) convertView.findViewById(R.id.personSurname);
        viewHolder.contactImage=(ImageView) convertView.findViewById(R.id.personImage);
        viewHolder.checkBox=(CheckBox)convertView.findViewById(R.id.checkBox);

        convertView.setTag(viewHolder);

        viewHolder.nameText.setTag(viewHolder.nameText);
        viewHolder.nameText.setTag(viewHolder.surnameText);
        viewHolder.contactImage.setTag(data[position]);
        viewHolder.checkBox.setChecked(data[position].isCheck());  
        viewHolder.checkBox.setOnClickListener(new OnClickListener() {  

            public void onClick(View arg0) {  

                if(viewHolder.checkBox.isChecked()==true)   
                    data[position].setCheck(true);  
                else  
                    data[position].setCheck(false);  
            }  
        });
    }
    else{
        viewHolder = (ViewHolder) convertView.getTag();
    }

    viewHolder.nameText.setText(data[position].getName());
    viewHolder.surnameText.setText(data[position].getSurname());
    viewHolder.contactImage.setImageResource(data[position].getPhotoRes());
    viewHolder.contactImage.setScaleType(ScaleType.FIT_XY);
    viewHolder.checkBox.setChecked(data[position].isCheck());
    return convertView;
} 
```

**已解决**：我用以下代码解决了我的 getView 问题：

```
 public class NewQAAdapterSelectFriends extends BaseAdapter {
private LayoutInflater mInflater;
private Person[] data;
boolean[] checkBoxState;
ViewHolder viewHolder;

public NewQAAdapterSelectFriends(Context context) { 
    mInflater = LayoutInflater.from(context);
}

public void setData(Person[] data) {
    this.data = data;
    checkBoxState=new boolean[data.length];
}

@Override
public int getCount() {
    return data.length;
}

@Override
public Object getItem(int item) {
    return data[item];
}

@Override
public long getItemId(int position) {
    return position;
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.item_select_friends, null);
        viewHolder=new ViewHolder();

        viewHolder.nameText=(TextView) convertView.findViewById(R.id.personName);
        viewHolder.surnameText=(TextView) convertView.findViewById(R.id.personSurname);
        viewHolder.contactImage=(ImageView) convertView.findViewById(R.id.personImage);
        viewHolder.checkBox=(CheckBox)convertView.findViewById(R.id.checkBox);

        convertView.setTag(viewHolder);

    }
    else{
        viewHolder = (ViewHolder) convertView.getTag();
    }

    viewHolder.nameText.setText(data[position].getName());
    viewHolder.surnameText.setText(data[position].getSurname());
    viewHolder.contactImage.setImageResource(data[position].getPhotoRes());
    viewHolder.contactImage.setScaleType(ScaleType.FIT_XY);
    viewHolder.checkBox.setChecked(checkBoxState[position]);
    viewHolder.checkBox.setOnClickListener(new View.OnClickListener() {

           public void onClick(View v) {
               if(((CheckBox)v).isChecked()){
                   checkBoxState[position]=true;
                   data[position].setCheck(true);
               }else{
                   checkBoxState[position]=false;
                   data[position].setCheck(false);
               }
            }
        });
    return convertView;
}

static class ViewHolder {
    TextView nameText;
    TextView surnameText;
    ImageView contactImage;
    CheckBox checkBox;
} 
```

}

我已经看过这个教程来做我的getView：[http ://androidcocktail.blogspot.it/2012/04/adding-checkboxes-to-custom-listview-in.html](http://androidcocktail.blogspot.it/2012/04/adding-checkboxes-to-custom-listview-in.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:39:55.223

即使在方法中使用`new`创建类时，也为变量创建了不同的范围。换句话说：

```
// Creating a new scope here -->       vvv
viewHolder.checkBox.setOnClickListener(new OnClickListener() {
    // Any variables not visible to the entire class, won't work properly in here! 
    //  (variables like: viewHolder, position, possibly data) 
    public void onClick(View arg0) {  
        if(viewHolder.checkBox.isChecked()==true)   
            data[position].setCheck(true);  
        else  
            data[position].setCheck(false);  
    }  
}); // Exited "new class'" scope 
```

`position`和你想的不一样`position`。尝试保存`position`可以再次引用它的值：

```
viewHolder.checkBox = (CheckBox) convertView.findViewById(R.id.checkBox);
viewHolder.position = position;
convertView.setTag(viewHolder);
...

viewHolder.checkBox.setOnClickListener(new OnClickListener() {  
    public void onClick(View view) {
        ViewHolder viewHolder = (ViewHolder) view.getTag();
        data[viewHolder.position].setCheck(viewHolder.checkBox.isChecked());   
    }  
}); 
```

由于您正在处理 CheckBox ，但我建议您使用[OnCheckedChangeListener](http://developer.android.com/reference/android/widget/CompoundButton.OnCheckedChangeListener.html)。

[但是，如果您更改ChoiceMode](http://developer.android.com/reference/android/widget/AbsListView.html#setChoiceMode%28int%29)，您可能不需要为 ListView 行定义任何侦听器：

```
listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-20T09:10:41.687

也加`viewHolder.checkBox.setChecked(checkBoxState[position]);`在`viewHolder.checkBox.setOnCheckedChangedListener`or之后`viewHolder.checkBox.setOnClickListener`。

因为滚动后，当 listview 回收它的视图时，它将`setChecked`在旧监听器的基础上使用，这在某些情况下可能会丢失值。

所以这是流程 -

```
getView()
---
---
---
viewHolder.checkBox.setOnCheckedChangedListener()
---
---
---
viewHolder.checkBox.setChecked() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-07T20:31:45.257

```
public class MyAdapter extends RecyclerView.Adapter<MyAdapter.ViewHolder>
{
    boolean[] checkBoxState;

    public MyAdapter(Context context, ArrayList<String> list ) {
        checkBoxState = new boolean[list.size()];
    }

    @Override
    public void onBindViewHolder( final ViewHolder holder,  final int position) {
        holder.checkBox.setTag(position); 

            holder.checkBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener(){
                @Override
                public void onCheckedChanged(CompoundButton compoundButton, boolean b) {
                    if(compoundButton.isPressed()) // check whether user pressed the checkbox.
                    {
                        int getPosition = (Integer) compoundButton.getTag();  // Here we get the position that we have set for the checkbox using setTag.
                        checkBoxState[getPosition] = compoundButton.isChecked(); // Set the value of checkbox to maintain its state.
                    }
                }
            });

            holder.checkBox.setChecked(checkBoxState[position]);
    }   

    public class ViewHolder extends RecyclerView.ViewHolder  {
        public CheckBox checkBox;
        public ViewHolder(View v,MainActivity mainActivity) {
            super(v);
            checkBox= (CheckBox) v.findViewById(R.id.checkBox);
        }
    }

    @Override
    public int getItemCount() {
        return list.size();
    }
} 
```

滚动时，可能会自动调用 onCheckedChanged() 方法。因此，您可能需要 isPressed() 方法来检查用户是否按下了复选框。我的适配器类如上所示。请注意，当您向列表中添加新元素时，您应该更新布尔数组 checkBoxState，例如，当您向列表中添加元素时，您应该调用以下命令：

```
checkBoxState = new boolean[list.size()+1]; 
```

或者使用一个数组列表来保存布尔变量并将元素添加到这个数组列表中，无论你想要什么。

我还为此解决方案实施了一个项目。您可以从这里下载： [https ://www.dropbox.com/s/ssm58w62gw32i29/recyclerView_checkbox_highlight.zip?dl=0](https://www.dropbox.com/s/ssm58w62gw32i29/recyclerView_checkbox_highlight.zip?dl=0)

截图如下：

[![屏幕1](../Images/cc8c83b5f2cd846c46c58c760abc3a3a.png)](https://i.stack.imgur.com/Aikip.jpg) [![屏幕2](../Images/3b8664c50dd480d6c1699c4b3e0bb75e.png)](https://i.stack.imgur.com/Kk9fd.jpg) [![屏幕3](../Images/d766a2b8ee80ab1c9269816114103526.png)](https://i.stack.imgur.com/bco9z.jpg) [![屏幕4](../Images/43af9b6a6daa9c88db21ed60b19fd0a4.png)](https://i.stack.imgur.com/SXuO3.jpg)

# json - 将 solr 响应（solrdocumentlist）转换为 json（或 xml）

> ID：11351917
> 
> 赞同：2
> 
> 时间：2012-07-05T20:15:06.240
> 
> 标签：json, solr

我正在进行搜索，我试图将响应从 a 转换`HttpSolrServer`为 json 格式。响应以`SolrDocumentList`. 我现在的代码是：

```
SolrQuery solrQuery = new SolrQuery(query);
solrQuery.setParam("wt", "json");  //doesn't affect the return format

QueryResponse rsp = solrServer.query(solrQuery);
SolrDocumentList docs = rsp.getResults();

return docs.toString(); 
```

当我打印出退货时，它会返回为：

```
{numFound=2,start=0,docs=[SolrDocument{cat=[electronics, camera], features=[3x zoop, 7.1 megapixel Digital ELPH, movie clips up to 640x480 @30 fps, 2.0" TFT LCD, 118,000 pixels, built in flash, red-eye reduction], id=9885A004, inStock=true, includes=32MB SD card, USB cable, AV cable, battery, manu=Canon Inc., manufacturedate_dt=Mon Feb 13 10:26:37 EST 2006, name=Canon PowerShot SD500, popularity=7, price=329.95, store=45.17614,-93.87341, weight=6.4}, SolrDocument{cat=[electronics, multifunction printer, printer, scanner, copier], features=[Multifunction ink-jet color photo printer, Flatbed scanner, optical scan resolution of 1,200 x 2,400 dpi, 2.5" color LCD preview screen, Duplex Copying, Printing speed up to 29ppm black, 19ppm color, Hi-Speed USB, memory card: CompactFlash, Micro Drive, SmartMedia, Memory Stick, Memory Stick Pro, SD Card, and MultiMediaCard], id=0579B002, inStock=true, manu=Canon Inc., name=Canon PIXMA MP500 All-In-One Photo Printer, popularity=6, price=179.99, store=45.17614,-93.87341, weight=352.0}]}} 
```

搜索`canon`使用他们的示例数据。

如果我这样做，`return rsp.toString();`我会用它来取回标题信息：

```
{responseHeader={status=0,QTime=1,params={indent=true,q=canon\*,wt=xml,version=2.2}},response={numFound=2,start=0,docs=[SolrDocument{cat=[electronics, camera], features=[3x zoop, 7.1 megapixel Digital ELPH, movie clips up to 640x480 @30 fps, 2.0" TFT LCD, 118,000 pixels, built in flash, red-eye reduction], id=9885A004, inStock=true, includes=32MB SD card, USB cable, AV cable, battery, manu=Canon Inc., manufacturedate_dt=Mon Feb 13 10:26:37 EST 2006, name=Canon PowerShot SD500, popularity=7, price=329.95, store=45.17614,-93.87341, weight=6.4}, SolrDocument{cat=[electronics, multifunction printer, printer, scanner, copier], features=[Multifunction ink-jet color photo printer, Flatbed scanner, optical scan resolution of 1,200 x 2,400 dpi, 2.5" color LCD preview screen, Duplex Copying, Printing speed up to 29ppm black, 19ppm color, Hi-Speed USB, memory card: CompactFlash, Micro Drive, SmartMedia, Memory Stick, Memory Stick Pro, SD Card, and MultiMediaCard], id=0579B002, inStock=true, manu=Canon Inc., name=Canon PIXMA MP500 All-In-One Photo Printer, popularity=6, price=179.99, store=45.17614,-93.87341, weight=352.0}]}} 
```

我知道`HttpSolrServer`响应格式目前只能是 xml 或 javabin（我已设置为 xml）。这似乎对实际返回的结果及其格式没有影响。

我似乎找不到任何关于将响应转换为 json 的信息。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T21:03:54.633

对于您尝试做的事情，您不需要使用 solrj 库。您可以使用 CommonsHTTPClient 直接通过 HTTP 发送查询参数并设置 'wt=json' - 以 JSON 格式检索响应。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T03:24:40.217

好吧，虽然这是一个老问题，但我提出了一个类似的问题，在挖掘代码之后，我能够将响应转换为 json，尽管我仍然对代码的速度和性能持怀疑态度，以防万一很多reqs来了..

所以下面是我写的一段代码（我使用了 Jettison 的 JSON 库并忽略了 for 循环的愚蠢结构）：

```
QueryResponse qp = server.query(solrQuery);
SolrDocumentList docList= qp.getResults();
JSONObject returnResults = new JSONObject();
Map<Integer, Object> solrDocMap = new HashMap<Integer, Object>();
int counter = 1;
for(Map singleDoc : docList)
{
  solrDocMap.put(counter, new JSONObject(singleDoc));
  counter++;
}
returnResults.put("docs", solrDocMap); 
```

基本上这会让你在 json 中得到结果...... solrj 不允许你使用除 javabin 以外的任何类型，**尽管你可以在查询中显式设置 wt**

希望能帮助到你

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T06:31:26.430

以下代码有效

```
SolrDocumentList list =  new SolrDocumentList();
JSONArray jArray =new JSONArray();
QueryResponse result = solr.query(parameters);          
list=result.getResults();

for (int i = 0; i < list.size(); i++) {
     JSONObject json = new JSONObject(list.get(i));
     jArray.put(json);           
} 
```

还要添加参数`json.nl=map`。

来源：[http ://wiki.apache.org/solr/SolJSON](http://wiki.apache.org/solr/SolJSON)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-06-13T10:00:12.020

导入 Gson 并使用它的实用方法。

# jquery - jquery 表单向导和验证

> ID：11351925
> 
> 赞同：0
> 
> 时间：2012-07-05T20:15:27.953
> 
> 标签：jquery, asp.net

我正在尝试将 jquery 表单向导与 asp.net 一起使用来创建多步骤表单。我已经构建了表单，但是在验证电子邮件时遇到了问题。在进行下一步之前，我有两个表单字段电子邮件和确认电子邮件，它们应该匹配。我遇到的问题是我正在使用母版页，因此我的控件 ID 被重命名。jquery 表单向导的 validationOptions 似乎正在查看输入控件的名称属性而不是 ID，因此设置 clientidmode 也不起作用。我正在寻找有关如何完成这项工作的建议或替代方案。

这是我的标记

```
 <label for="txtconfemail">Confirm Email</label>
   <asp:TextBox CssClass="input_field_12em" runat="server" ID="txtconfemail"  ClientIDMode="Static"></asp:TextBox> 
```

这是我的javascript。此代码仅检查 required（不是 equalTo），即使这样也不起作用。

```
 <script type="text/javascript">
    $(function () {

        $("#myform").formwizard({
            formPluginEnabled: true,
            validationEnabled: true,
            focusFirstInput: true,
            formOptions: {
                success: function (data) { $("#status").fadeTo(500, 1, function () { $(this).html("You are now registered!").fadeTo(5000, 0); }) },
                beforeSubmit: function (data) { $("#data").html("data sent to the server: " + $.param(data)); },
                dataType: 'json',
                resetForm: true
            },
            validationOptions: {
                rules: {
                    txtconfemail : {
                        required: true

                    }
                },
                messages: {
                  txtemailconf:
                     { 
                        required:"Email is required"

                    }

               }
            }
        }
            );
    });
</script> 
```

如果我用 ctl100$MainContent$txtconfemail 替换 txtemailconf，那么我的验证就会被触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:17:14.777

尝试使用

```
 <%= txtconfemail.UniqueID %> 
```

# c++ - C++ 中的抽象函子

> ID：11351928
> 
> 赞同：3
> 
> 时间：2012-07-05T20:15:37.787
> 
> 标签：c++

我想写一个抽象基类

```
class func_double_double_t : public unary_function<double, double>
{
    virtual double operator()(double x) = 0;
}; 
```

并将其专门用于几种不同的类型

```
class func_pow_t : public func_double_double_t
{
 public:
    func_pow_t(double exponent) : exponent_(exponent) {};
    virtual double operator()(double x) { return pow(x, exponent_); };
}

class func_exp_t : public func_double_double_t
... 
```

并在必要时将它们传递给函数：

```
double make_some_calculation(double num, func_double_double_t f)
{
     return f(x);
} 
```

但是我不能定义一个类型的对象，`func_double_double_t`因为它是抽象的。我可以传递一个指向函数的指针，但首先使用`f`like`f->operator()(num)`似乎违背了运算符重载的精神。（`(*f)(num)`更好，但仍然如此。）

有没有办法让运算符重载和这种抽象很好地结合在一起？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T20:19:03.043

您可以简单地将引用传递给您的函数：

```
double make_some_calculation(double num, func_double_double_t& f)
{
    return f(x);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T20:22:30.620

虽然您可以通过将函数作为引用传递到那里，但 C++11 标准内置了以下仿函数类型：

```
double make_some_calculation(double d, std::function< double(double) > f) {
   return f(d);
}

...
auto add_2=std::bind( std::plus(), 2.0 );
double result=make_some_calculation(1.1, add_2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T20:19:00.793

似乎显而易见的答案是传递参考，因此您只需使用 : `f(num)`，就像往常一样。

除非您需要能够在运行时使用不同的函数对象（例如，具有不同类型的函子数组，并在循环中调用它们），否则您可以考虑将要调用的函数作为模板参数：

```
template <class F>
double do_some_calculation(double num) { 
    return f(num);
} 
```

如果要使用的函数在编译时是已知的，那么这通常是首选。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T20:21:10.790

您可能需要重新审视几个基本概念。首先，您的问题的直接答案是您应该传递一个*参考*，它允许使用良好的语法并传递不同的派生实例。

除此之外，如果您想要运行时多态行为，那么您`operator()`应该在基类中是虚拟的（在复制到问题时可能会被忽略？--即没有*纯说明符*`virtual`的格式不正确） *`=0`*

 ** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T20:21:12.710

如果您尝试通过运行时多态性来实现它，则需要以下内容

1.  应声明基类函数`virtual`（它在哪里？）

    ```
    class func_double_double_t : public unary_function<double, double>
    {
        virtual double operator()(double x) = 0;
    }; 
    ```

2.  从基类继承时派生类不需要`virtual`（为什么放在那里？）

    ```
    class func_pow_t : public func_double_double_t {
      ... 
    ```

3.  调用函数应该通过指针或引用接收对象

    ```
    double make_some_calculation(double num, func_double_double_t& f)
    {
      return f(x);
    } 
    ```

    或者

    ```
    double make_some_calculation(double num, func_double_double_t* f)
    {
      return (*f)(x);
    } 
    ```*

# objective-c - 调整大小的 UIImages 质量差

> ID：11351929
> 
> 赞同：2
> 
> 时间：2012-07-05T20:15:38.117
> 
> 标签：objective-c, ios, uiimage, retina-display

我正在尝试创建一个与视网膜和非视网膜显示器兼容的应用程序。我正在使用高分辨率图像并让操作系统按比例缩小它们以用于非视网膜显示器。

这些图像被命名为 xxx@2x.png 并且我使用相同的名称加载。这可行，并且图像在两种设备类型上以相同的相对大小显示。不幸的是，非视网膜显示屏上调整大小的图像质量远非理想。

```
self.navigationItem.rightBarButtonItem.image = [localAssets imageAtPath:@"content/home/settings@2x.png"];

+ (UIImage*)imageAtPath:(NSString*)path;
{
    NSString* extension = [path pathExtension];
    path = [path stringByDeletingPathExtension];

    NSString* filePath = [[NSBundle mainBundle] pathForResource:[path lastPathComponent] 
                                                         ofType:extension 
                                                    inDirectory:[path stringByDeletingLastPathComponent]];
    UIImage* theImage = [UIImage imageWithContentsOfFile:filePath];

    if(!theImage)
    {
        NSLog(@"Error no file found at %@", [path stringByAppendingPathExtension:extension]);
    }
    return theImage;
} 
```

视网膜：

![http://i.imgur.com/gmn1q.png](../Images/205751110b66c7d0440e3d5eca97fdf8.png)

遗产：

![在此处输入图像描述](../Images/358d8cb75c2a85985d8995923319a26f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:17:58.317

如果您自己调整图像大小，并将它们保存为 xxx.png 和 xxx@2x.png，那么您可以将它们用作“xxx”，iOS 将在使用 Retina 显示器时自动使用 @2x 版本。

# java - android layout get framelayout总是在tabwidget之上

> ID：11351932
> 
> 赞同：0
> 
> 时间：2012-07-05T20:15:43.043
> 
> 标签：java, android, eclipse, android-layout

以下布局用于显示选项卡内容的视图。但是，当出现 admob 时，framelayout 会下降，并在前面显示 tabwidget。我怎样才能将 frameLayout 设置在 tabwidget 之上？或相同，在框架布局下方的 tabwidget。谢谢

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              >

      <com.google.ads.AdView android:id="@+id/adView"
                         android:layout_width="wrap_content"
                         android:layout_height="wrap_content"
                         ads:adUnitId="xxx"
                         ads:adSize="SMART_BANNER"
                         ads:testDevices="TEST_EMULATOR, xxx"
                         ads:loadAdOnCreate="true"/>   

<TabHost 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

      <RelativeLayout       
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/mainLayout">

        <LinearLayout  
            android:id="@+id/mainLayout"
            android:orientation="vertical"
            android:layout_width="fill_parent" 
            android:layout_height="fill_parent"
            >

                    <FrameLayout 
                        android:id="@android:id/tabcontent"
                        android:layout_width="fill_parent" 
                        android:layout_height="0dip"
                        android:layout_weight="1" 
                        android:scrollbars="none">
                    </FrameLayout>

            <TabWidget 
                android:id="@android:id/tabs"
                android:layout_width="fill_parent" 
                android:layout_height="wrap_content"
                android:layout_weight="0"/>

        </LinearLayout>         
    </RelativeLayout>
</TabHost> 

</LinearLayout> 
```

![在此处输入图像描述](../Images/b4abb9a170041df6bb0d89cde5ddbe96.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:30:56.910

我在您的布局中看到两个可能导致此问题的问题。首先，`layout_height`您的 TabHost 不应该是填充父级。如果您希望它占用布局中的剩余空间（广告未占用的所有空间），请将高度设置为 0dip 和`layout_weight`1，就像您对 FrameLayout 所做的那样。此外，看起来您有一个嵌套在 RelativeLayout 中的 LinearLayout，其中一个不是必需的。对于您正在尝试的内容，我会消除RelativeLayout。您可能还想去掉`layout_weight`TabWidget 上的属性。将 Frame 设置为 1 表示您希望它拉伸以填充父级中剩余的所有空间，并且应该为您提供所需的结果。小部件的重量可能是导致重叠的原因。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T21:33:53.467

应该是这样的……

```
<TabHost>start

    <LinearLayout>start

        <com.google.ads.AdView
            start
            end />

        <FrameLayout>start

            <LinearLayout>start
            <LinearLayout>end

        </FrameLayout>end

        <TabWidget>start
        </TabWidget>end

    </LinearLayout>end

</TabHost>end 
```

如果你想让谷歌使用不同的标签添加更改，那么上面的方法是最好的，但如果你不这样做，那就让它像这样......

```
<LinearLayout>start

    <com.google.ads.AdView
        start
        end />

    <TabHost>start

        <LinearLayout>start

            <FrameLayout>start

                <LinearLayout>start
                <LinearLayout>end

            </FrameLayout>end

            <TabWidget>start
            </TabWidget>end

        </LinearLayout>end

    </TabHost>end

</LinearLayout>end 
```

还要将选项卡小部件设置为 android:layout_marginBottom="-4dp" 以防万一。

# php - 从 Google 获取当前位置，无需将用户发送出去进行身份验证

> ID：11351933
> 
> 赞同：0
> 
> 时间：2012-07-05T20:15:43.500
> 
> 标签：php, javascript, google-api

有没有什么方法可以使用 Google 的 API 来检索用户当前的邮政编码，而无需明确征求他们的许可？我了解 Google 现在使用 OAuth 2.0，这是一种身份验证协议，用户必须允许对特定服务的权限。但是，我想找到用户的位置而无需询问他们！

这可能吗？我对翻译 IP 地址不感兴趣，因为它们通常会返回不正确的结果。同样，HTML5 的地理定位功能也无法使用，因为它也需要用户许可。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:35:06.143

我以前不得不在类似的情况下做类似的事情。我得到的答案可能不是最漂亮的东西，但它确实有效，你可以得到一个邮政编码。

有一些类似的服务，但我发现 MaxMind 非常擅长给我一个非常准确的纬度，经度（至少对于城市/邮政编码读数）。这使您不必在 php.ini 中自己处理这个问题。

[maxmind 链接](http://www.maxmind.com/app/javascript_city)

警告：您必须将链接返回给 maxmind，或者购买月度许可证。抱歉，但您可以四处寻找其他服务 - 否则您必须自己制作。

因此，想法是您在页面上包含他们的脚本 - 现在您在页面上拥有这些功能。

```
function geoip_country_code() { return 'US'; }
function geoip_country_name() { return 'United States'; }
function geoip_city()         { return 'San Diego'; }
function geoip_region()       { return 'CA'; }
function geoip_region_name()  { return 'California'; }
function geoip_latitude()     { return '32.7153'; }
function geoip_longitude()    { return '-117.1573'; }
function geoip_postal_code()  { return ''; }
function geoip_area_code()    { return '619'; }
function geoip_metro_code()   { return '825'; } 
```

从这里你需要做一些地理编码（通过[谷歌](https://developers.google.com/maps/documentation/geocoding/)或选择另一个）。从地理编码中获取您的响应，您可以遍历结果并提取邮政编码。如果您在该步骤需要更多输入，我可能会挖掘更多脚本。

可能不是最优雅的方法，但我也被限制为无法使用地理定位，并且处于仅限 javascript 的环境中。这对我有用。干杯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T20:27:20.817

您肯定必须使用 Google（或 Facebook ... 或 [在此处插入社交网络]）对用户进行 oAuth，以便访问存储在第 3 方中的有关该用户的任何信息（例如家庭或工作“邮政编码”）地点。但是一旦通过身份验证，您将无法获得用户*当前*的邮政编码或位置。您想要他们当前的位置还是他们的家庭地址或他们的工作地址 - 您可能需要澄清一下。无论如何，如果您想要用户的当前位置，我建议您使用 HTML5 地理定位 API。

地理定位 API 的最简单用法如下所示：

```
function get_location() {
  navigator.geolocation.getCurrentPosition(show_map);
} 
```

那没有检测，没有错误处理，也没有选项。您的 Web 应用程序可能至少应该包括其中的前两个。要检测对地理定位 API 的支持，您可以使用[Modernizr](http://modernizr.com/)：

```
function get_location() {
  if (Modernizr.geolocation) {
    navigator.geolocation.getCurrentPosition(show_map);
  } else {
    // no native support; maybe try Gears?
  }
} 
```

HTML5 地理定位资源：

*   [http://diveintohtml5.info/geolocation.html](http://diveintohtml5.info/geolocation.html)
*   [http://html5doctor.com/finding-your-position-with-geolocation/](http://html5doctor.com/finding-your-position-with-geolocation/)
*   HTML5 Geolocation API 的 W3 规范：http: [//dev.w3.org/geo/api/spec-source.html](http://dev.w3.org/geo/api/spec-source.html)

# jquery - jQuery - 在显示 html 之前阻止进一步的代码执行

> ID：11351939
> 
> 赞同：0
> 
> 时间：2012-07-05T20:16:19.460
> 
> 标签：jquery

我正在使用带有 Flash 保存方法的[jquery 网络摄像头插件。](http://www.xarg.org/project/jquery-webcam-plugin/)我想在用户单击保存后设置一条消息，以便他们知道它正在保存。我的代码是这样的：

```
$('#savepicmessage').html("Saving picture, please wait");
webcam.capture();
webcam.save('/savephoto.php'); 
```

问题是“保存图片”消息仅在图片保存后显示。有没有办法阻止执行 .html("Saving picture, please wait") 调用之后的代码，以便在显示消息之前不执行？

我可以使用 setTimeout 来实现它，并在从那里调用的函数中进行捕获和保存，但这还不够可靠。

我查看了 .when 和 deferred.then ，但这似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:23:50.697

根据您的插件的文档，您可以像这样构建插件的加载：

```
 $("#camera").webcam({
    width: 320,
    height: 240,
    mode: "callback",
    swffile: "/download/jscam_canvas_only.swf",
    onTick: function() {},
    onSave: function() {

         $('#savepicmessage').html("Saving picture, please wait");

    },
    onCapture: function() {},
    debug: function() {},
    onLoad: function() {}
 }); 
```

之前没有使用过这个插件，所以不确定你是否会这样做`onSave`，或者`onTick`，但是如果你显示你的初始化代码，会更有帮助。`onCapture``onLoad`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T21:15:25.973

一般来说，我使用 Promise 和诸如 $.when() 之类的东西来协调诸如 AJAX 调用或动画之类的异步事物。但事实上，这几乎就像它是异步的一样，这让我很惊讶。

不过，我有一个建议。您可以在第一次调用后循环 $('#savepicmessage').html() 以设置它并测试返回的内容吗？也许一旦返回的值与您尝试设置的值匹配，那么您可能会使用网络摄像头功能，并且您的消息将在调用网络摄像头之前对用户可见。

# html - html 基目录和子目录

> ID：11351944
> 
> 赞同：5
> 
> 时间：2012-07-05T20:16:41.673
> 
> 标签：html, hyperlink

在我的 html 中，我有

```
<head>
 <base href="http://mydomain.com/dev/">
</head> 
```

但是我的链接都转到 mydomain.com/（没有“dev”子文件夹）。为什么我的链接没有指向子文件夹？

提前致谢。

编辑：我的链接 html 是：

```
<div id="navigation">
<ul>
  <li><a href="/index.html">Home</a></li>
  <li><a href="/realestate.html">Real Estate</a></li>
  <li><a href="/property.html">Vehicles &amp; Boats</a></li>
  <li><a href="/location.html">Auction Locations</a></li>
  <li><a href="/auctionDetails.html">How the Auction Works</a></li>
  <li><a href="/contact.html" class="activeTab">Contact</a></li>
</ul> 
```

再次，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T20:29:21.330

您正在使用根相对 URI ( `<a href="/foo">`) 而不是文档相对 URI ( `<a href="foo">`)。

解析将从开始，`http://example.com/dev/`但`/`会导致本地部分（域/端口号之后的所有内容）被丢弃。

不要以`/`字符开头链接。

# node.js - 在 Sublime Text 2 中重新启动/停止 nodejs 服务器？

> ID：11351949
> 
> 赞同：19
> 
> 时间：2012-07-05T20:16:55.413
> 
> 标签：node.js, sublimetext, sublimetext2

我使用 Sublime Text 2 下载了 nodejs 包（[https://github.com/tanepiper/SublimeText-Nodejs](https://github.com/tanepiper/SublimeText-Nodejs)），但除了必须进入任务管理器并杀死进程。当使用插件提供的命令来运行带有节点的文件时，它没有给你任何类型的命令窗口，所以 Ctrl+C 不起作用。

我发现了一些骇人听闻的做事方式，例如查找在特定端口上运行的进程的 .bat 文件，然后将其杀死。然后有几个 linux 命令对我没有好处，因为我在 Windows 上。

我希望这里有人会看到这一点并知道我可以用来轻松启动和停止节点服务器以进行开发的解决方案。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-24T10:59:51.030

如果你使用`ctrl`+`b`命令从 sublime 构建你的服务器，它将运行服务器，然后你可以使用默认的`ctrl`+`break`命令杀死它。由于我使用的是没有中断键的笔记本电脑，因此我将键绑定修改为我确实拥有的东西 ( `ctrl`++ `alt`) `k`。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-31T05:46:53.220

我认为对你来说最好的解决方案是使用一个名为**Nodemon**的模块，它会在你每次在项目中保存文件时重新启动你的节点服务器。

[https://github.com/remy/nodemon](https://github.com/remy/nodemon)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T10:35:11.430

我建议你创建一个看门狗循环。

1）启动看门狗，用命令说明如何重启节点

2）看门狗监控你的 src/ 文件夹，并在检测到更改时重新启动节点（你保存文件）

那里有不同的看门狗应用程序和库，但众所周知，这可以跨平台工作：

[http://pypi.python.org/pypi/watchdog/](http://pypi.python.org/pypi/watchdog/)

至少 CoffeeScript 编译器可以在内部进行监控，因此您不需要任何第三方解决方案来自动重新启动它。但不知道准系统节点:(

# c++ - 为什么 boost::barrier 等待不是中断点？

> ID：11351951
> 
> 赞同：1
> 
> 时间：2012-07-05T20:17:03.230
> 
> 标签：c++, multithreading, boost, synchronization, interrupt-handling

调用 boost::thread Interrupt() 时，使用 boost::barrier wait() 等待的线程不会被中断。例如 [http://www.justsoftwaresolutions.co.uk/threading/thread-interruption-in-boost-thread-library.html](http://www.justsoftwaresolutions.co.uk/threading/thread-interruption-in-boost-thread-library.html)

这有充分的理由吗？

当然，我们可以手动放置一个 boost::this_thread::interruption_point() 来解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T00:09:13.287

如果在当前线程上设置了中断标志并且行为与挂起线程和调用中断处理程序根本不同，则提升中断点会抛出异常。boost 中的任何一个锁都不是中断点，它遵循 pthread 锁的行为；当 pthread 锁在等待期间被信号处理程序中断时，它会在处理程序完成后继续等待。同样的方式，如果你将一个 boost 线程标记为中断，`boost::mutex::lock()`或者`boost::barrier::wait()`会一直等待。

另一件事是，如果您允许`barrier::wait()`在未获取锁的情况下提前返回，则必须在抛出异常之前从等待屏障的线程池中注销当前线程，这会使实现更加复杂。它还允许锁定/等待方法在不获取锁定的情况下返回，这也会使您的代码更加复杂。

一般来说，我认为这只是一个设计选择。

如果您查看作为中断点的方法，您会发现它们通常意味着要休眠更长的时间 ( `boost::this_thread::sleep()`, `boost::condition_variable_any::wait()`) 及其对应部分`sleep`，并且`pthread_cond_wait`也会被信号终止。虽然这里有一个例外`boost::thread::join()`，它是一个中断点，但`pthread_join`在处理完信号后继续等待。

# php - PHP Post数组的数组

> ID：11351953
> 
> 赞同：3
> 
> 时间：2012-07-05T20:17:05.337
> 
> 标签：php, html, arrays, forms, post

我想将两个不同的表从 HTML 发布请求更改为运行 PHP 的服务器。以前，当我只想更改一个表时，所有的列和值都被放入 POST 数组中，所以我会有`[colname1]=>val1`,`[colname2]=val2`等。然后我将遍历 POST 以构建正确的 MySQL 语句来运行查询。

我已经修改了我的代码，以便根据选择的下拉框，不仅第一个表会被修改，而且另一个表（用户选择的）也会被修改。所以理想情况下，我希望 PHP 中的 POST 变量有一个数组数组。所以最后，如果 POST 变量看起来像这样会很好......

```
[mainTable][colnam1]=>val1 [colnam2]=>val2
[otherTable][colnam1]=>val1 [colnam2]=>val2 
```

我当前的解决方法是必须在表单输入名称前面给出表名，然后在服务器上解析它，但我宁愿更灵活，不要这样做。

```
<input type="text" name="mainTable_colname">
<input type="text" name="otherTable_colname"> 
```

根据我对使用表单和 POST 的理解，只有命名的 html 表单元素会被传递到 post 变量中。

有谁知道这样做的更好方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T20:18:22.700

将元素的 name 属性指定为数组，包括您想要的键，您将获得数组`$_POST`：

```
<input type="text" name="mainTable[colname]">
<input type="text" name="mainTable[colname2]">
<input type="text" name="otherTable[colname]"> 
```

A`var_dump( $_POST['mainTable']);`会产生类似于：

```
array( 'colname' => 1, 'colname2' => 1); 
```

# mysql - 左连接导致重复行

> ID：11351966
> 
> 赞同：2
> 
> 时间：2012-07-05T20:18:08.097
> 
> 标签：mysql

我有一个查询成功地从我的产品表中获取独特的产品并显示它们。我正在尝试将图标表添加到组合中，其中某些产品可以有多个图标。问题是我试图只使用连接，例如，当一个产品有 2 个图标时，我将为该 1 个产品选择 2 行。

这是我的sql：

```
 SELECT p.products_image, 
           pd.products_name, 
           p.products_id, 
           p.products_model, 
           p.manufacturers_id, 
           p.products_price, 
           p2i.icons_id, 
           p.products_tax_class_id, 
           IF(s.status, s.specials_new_products_price, NULL)             AS 
           specials_new_products_price, 
           IF(s.status, s.specials_new_products_price, p.products_price) AS 
           final_price 
    FROM   products p 
           LEFT JOIN manufacturers m 
                  ON p.manufacturers_id = m.manufacturers_id 
           LEFT JOIN specials s 
                  ON p.products_id = s.products_id 
           LEFT JOIN products_to_categories p2c 
                  ON p.products_id = p2c.products_id 
           LEFT JOIN products_description pd 
                  ON p.products_id = pd.products_id 
           LEFT JOIN products_to_icon p2i 
                  ON p.products_id = p2i.products_id 
    WHERE  p.products_status = '1' 
           AND pd.language_id = '1' 
           AND p2c.categories_id = '36' 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T20:20:13.497

`GROUP BY`在末尾添加一个子句。如果你仍然想要所有的图标 id，你可以结合`group_concat`

例如：

```
SELECT p.products_image, 
       pd.products_name, 
       p.products_id, 
       group_concat(p2i.icons_id separator ",") as icons_ids
       (...)
WHERE  p.products_status = '1' 
       AND pd.language_id = '1' 
       AND p2c.categories_id = '36'
GROUP BY p.products_id 
```

# image - Wordpress 海王星主题问题（特别是主页照片网格）

> ID：11351968
> 
> 赞同：0
> 
> 时间：2012-07-05T20:18:18.593
> 
> 标签：image, wordpress

我想彻底改造我的网站，因为我不太喜欢我现在的设计。我想切换到的主题是[Neptune](http://www.wpexplorer.com/neptune-wordpress-theme)。我试图切换我的网站，但由于某种原因，我无法弄清楚如何获取我发布的图片以显示在首页上。我基本上只是希望我的主页看起来像带有图像网格的主题演示页面（当然还有我的图像）。我尝试过发布新帖子...我尝试在左侧栏的“投资组合”部分添加一个新项目，但似乎没有任何效果。

以防万一，[我现在的主题是 Cloriato Lite](http://wordpress.org/extend/themes/cloriato-lite)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T02:29:24.370

主题是否附带文档？您可能必须在阅读设置页面上将主页设置为静态页面。

# ios - iOS 开发者 - 支持不同版本的设备

> ID：11351975
> 
> 赞同：2
> 
> 时间：2012-07-05T20:18:31.123
> 
> 标签：ios, xcode

我想知道其他人在测试多个 iOS 版本的方式上做了什么。您是否使用多个运行不同 iOS 版本的 iPhone / iPad？你只依赖模拟器吗？有没有一种简单的方法可以在设备上交换版本？

我发现的一切都告诉我，我的 5.x 的 iPhone 不能降级到 4，我只是想知道其他人如何处理这种事情

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:54:34.133

首先在您手头上最旧的设备/IPSW 上进行开发。如有必要，降级。当您的应用程序在 3.2.1 上的 iPhone 3G[S] 上正确构建和运行时，您可以继续在更新的硬件/软件上进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T23:17:02.443

我建议购买一台旧设备来运行 3.1.3（它们在 ebay 或类似设备上非常便宜），然后在该设备和最新版本上进行测试。如果一个应用程序在 iOS 3.x 和 5.x 上运行，它基本上总是可以在 4.x 上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T21:33:12.807

我在最旧的操作系统中保留尽可能多的设备，除非我已经放弃了对太旧版本（例如，3.1.3）的支持。

上次我检查时（5 分钟前），除非您保存了与您要降级到的操作系统版本相对应的正确“SHSH Blob”，否则无法降级（即使越狱），特定于您的设备。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T20:40:54.427

就个人而言，我测试了最新的固件，然后开始降级我的设备并在每个设备上再次测试。这有点乏味，但它对我有用。网上有很多关于如何通过下载 ipsw 然后从中恢复来降级固件的教程。它运行良好，我不建议纯粹在模拟器上进行测试。一些较旧的方法可能已被弃用，您可能希望将它们切换出去。您还可以切换部署目标，以便在较旧的 iOS 版本上构建它。

# c# - 从头开始构建语法树

> ID：11351977
> 
> 赞同：25
> 
> 时间：2012-07-05T20:18:37.383
> 
> 标签：c#, roslyn

我之前问过这个问题，这个问题得到了回答，但是有人提出了一个建议，可以帮助我在前进的过程中避免犯类似的错误。

[使用 Roslyn 将自动实现的属性添加到类](https://stackoverflow.com/questions/11336712/adding-auto-implemented-property-to-class-using-roslyn)

建议是我自下而上而不是自上而下构建语法树。有人可以提供一个小演示或链接来说明我将如何从头开始执行此操作吗？

这是代码：

```
var root = (CompilationUnitSyntax)document.GetSyntaxRoot();

    // Add the namespace
    var namespaceAnnotation = new SyntaxAnnotation();
    root = root.WithMembers(
        Syntax.NamespaceDeclaration(
            Syntax.ParseName("ACO"))
                .NormalizeWhitespace()
                .WithAdditionalAnnotations(namespaceAnnotation));
    document = document.UpdateSyntaxRoot(root);

    // Add a class to the newly created namespace, and update the document
    var namespaceNode = (NamespaceDeclarationSyntax)root
        .GetAnnotatedNodesAndTokens(namespaceAnnotation)
        .Single()
        .AsNode();

    var classAnnotation = new SyntaxAnnotation();
    var baseTypeName = Syntax.ParseTypeName("System.Windows.Forms.Form");
    SyntaxTokenList syntaxTokenList = new SyntaxTokenList()
        {
            Syntax.Token(SyntaxKind.PublicKeyword)
        };

    var newNamespaceNode = namespaceNode
        .WithMembers(
            Syntax.List<MemberDeclarationSyntax>(
                Syntax.ClassDeclaration("MainForm")
                    .WithAdditionalAnnotations(classAnnotation)
                    .AddBaseListTypes(baseTypeName)
                    .WithModifiers(Syntax.Token(SyntaxKind.PublicKeyword))));

    root = root.ReplaceNode(namespaceNode, newNamespaceNode).NormalizeWhitespace();
    document = document.UpdateSyntaxRoot(root);

    var attributes = Syntax.List(Syntax.AttributeDeclaration(Syntax.SeparatedList(Syntax.Attribute(Syntax.ParseName("STAThread")))));

    // Find the class just created, add a method to it and update the document
    var classNode = (ClassDeclarationSyntax)root
        .GetAnnotatedNodesAndTokens(classAnnotation)
        .Single()
        .AsNode();

        var syntaxList = Syntax.List<MemberDeclarationSyntax>(
                Syntax.MethodDeclaration(
                    Syntax.ParseTypeName("void"), "Main")
                    .WithModifiers(Syntax.TokenList(Syntax.Token(SyntaxKind.PublicKeyword)))
                    .WithAttributes(attributes)
                    .WithBody(
                        Syntax.Block()));
        syntaxList = syntaxList.Add(Syntax.PropertyDeclaration(Syntax.ParseTypeName("System.Windows.Forms.Timer"), "Ticker"));
        var newClassNode = classNode
            .WithMembers(syntaxList);

    root = root.ReplaceNode(classNode, newClassNode).NormalizeWhitespace();
    document = document.UpdateSyntaxRoot(root); 
```

那么我将如何做同样的事情，但从头开始呢？

提前致谢，

鲍勃

PS我的财产也缺少“get; set;” 里面的文字。有人可以评论我忘记添加导致此文本添加到属性的内容吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-23T05:29:15.623

信不信由你，我编写了一个名为[Roslyn Code Quoter](http://blogs.msdn.com/b/kirillosenkov/archive/2012/07/22/roslyn-code-quoter-tool-generating-syntax-tree-api-calls-for-any-c-program.aspx)的工具来专门回答这个问题。

[http://roslynquoter.azurewebsites.net](http://roslynquoter.azurewebsites.net)

该工具可以采用任何 C# 程序并自动生成一段代码，就像 Matt 上面写的那样。由于它还可以完美地生成包括所有空格在内的所有内容，因此代码可能会变得相当笨拙。但是您可以排除生成琐事的部分，然后在结果节点上调用 NormalizeWhitespace()，它会自动插入琐事，以便代码正确格式化。

为了完整起见，我发布了所有血腥细节的代码，以便您了解如何构造空白和所有这些小细节。

```
CompilationUnit().WithMembers(
SingletonList<MemberDeclarationSyntax>(
    NamespaceDeclaration(
        IdentifierName("ACO"))
    .WithMembers(
        SingletonList<MemberDeclarationSyntax>(
            ClassDeclaration("MainForm")
            .WithModifiers(
                TokenList(
                    Token(SyntaxKind.PublicKeyword)))
            .WithBaseList(
                BaseList(
                    SingletonSeparatedList<BaseTypeSyntax>(
                        SimpleBaseType(
                            QualifiedName(
                                QualifiedName(
                                    QualifiedName(
                                        IdentifierName("System"),
                                        IdentifierName("Windows")),
                                    IdentifierName("Forms")),
                                IdentifierName("Form"))))))
            .WithMembers(
                List<MemberDeclarationSyntax>(
                    new MemberDeclarationSyntax[]{
                        PropertyDeclaration(
                            QualifiedName(
                                QualifiedName(
                                    QualifiedName(
                                        IdentifierName("System"),
                                        IdentifierName("Windows")),
                                    IdentifierName("Forms")),
                                IdentifierName("Timer")),
                            Identifier("Ticker"))
                        .WithModifiers(
                            TokenList(
                                Token(SyntaxKind.PublicKeyword)))
                        .WithAccessorList(
                            AccessorList(
                                List<AccessorDeclarationSyntax>(
                                    new AccessorDeclarationSyntax[]{
                                        AccessorDeclaration(
                                            SyntaxKind.GetAccessorDeclaration)
                                        .WithSemicolonToken(
                                            Token(SyntaxKind.SemicolonToken)),
                                        AccessorDeclaration(
                                            SyntaxKind.SetAccessorDeclaration)
                                        .WithSemicolonToken(
                                            Token(SyntaxKind.SemicolonToken))}))),
                        MethodDeclaration(
                            PredefinedType(
                                Token(SyntaxKind.VoidKeyword)),
                            Identifier("Main"))
                        .WithAttributeLists(
                            SingletonList<AttributeListSyntax>(
                                AttributeList(
                                    SingletonSeparatedList<AttributeSyntax>(
                                        Attribute(
                                            IdentifierName("STAThread"))))))
                        .WithModifiers(
                            TokenList(
                                Token(SyntaxKind.PublicKeyword)))
                        .WithBody(
                            Block())}))))))
.NormalizeWhitespace() 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-05T21:17:50.760

这将在一个表达式中构建整个编译单元树。

```
var cu = SyntaxFactory.CompilationUnit()
            .AddMembers(
                SyntaxFactory.NamespaceDeclaration(Syntax.IdentifierName("ACO"))
                        .AddMembers(
                        SyntaxFactory.ClassDeclaration("MainForm")
                            .AddBaseListTypes(SyntaxFactory.ParseTypeName("System.Windows.Forms.Form"))
                            .WithModifiers(SyntaxFactory.Token(SyntaxKind.PublicKeyword))
                            .AddMembers(
                                Syntax.PropertyDeclaration(SyntaxFactory.ParseTypeName("System.Windows.Forms.Timer"), "Ticker")
                                        .AddAccessorListAccessors(
                                        SyntaxFactory.AccessorDeclaration(SyntaxKind.GetAccessorDeclaration).WithSemicolonToken(SyntaxFactory.Token(SyntaxKind.SemicolonToken)),
                                        SyntaxFactory.AccessorDeclaration(SyntaxKind.SetAccessorDeclaration).WithSemicolonToken(SyntaxFactory.Token(SyntaxKind.SemicolonToken))),
                                SyntaxFactory.MethodDeclaration(SyntaxFactory.ParseTypeName("void"), "Main")
                                        .AddModifiers(SyntaxFactory.Token(SyntaxKind.PublicKeyword))
                                        .AddAttributes(SyntaxFactory.AttributeDeclaration().AddAttributes(SyntaxFactory.Attribute(SyntaxFactory.IdentifierName("STAThread"))))
                                        .WithBody(SyntaxFactory.Block())
                                )
                        )
                ); 
```

当然，您不必将其作为单个表达式进行。我可以使用单独的局部变量来收集我想要的片段，然后将它们添加到包含语法片段的构造中。

# php - 无论类型如何，自动下载指定文件夹中的文件

> ID：11351979
> 
> 赞同：1
> 
> 时间：2012-07-05T20:18:42.807
> 
> 标签：php, .htaccess, mod-headers

我怎样才能使当用户访问指定文件夹中的文件时，我可以强制下载文件？

我知道可以使用 .htaccess 按类型执行此类型，并且您可以使用 php 脚本强制下载文件，但是如何在没有 php 脚本的情况下强制下载他们在指定文件夹中访问的文件？

目前，当您查看浏览器知道如何读取的文件时，它会读取文件而不是下载文件。我希望它自动下载文件夹中的所有文件，而不是读取浏览器支持的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:25:56.090

“mod_headers”模块应该可用。然后你可以将它添加到你的 .htaccess 文件中。

按类型：

```
<FilesMatch "\.jpg$">
    Header set Content-Disposition attachment
    Header set Content-Type application/octet-stream
</FilesMatch> 
```

按名称的特定文件：

```
<Files test.jpg>
    Header set Content-Disposition attachment
    Header set Content-Type application/octet-stream
</Files> 
```

将其放入要下载的文件的特定文件夹中的 .htaccess 文件中。

对于整个文件夹，请忽略 Files/FilesMatch 指令。

# javascript - 如何将选项卡索引限制为仅覆盖及其元素

> ID：11351983
> 
> 赞同：11
> 
> 时间：2012-07-05T20:19:01.200
> 
> 标签：javascript, indexing, tabs, popup, overlay

我有一个复杂的页面，其中包含几个叠加层（灯箱类型），这些叠加层是基于几个下拉菜单中的选择而出现的。这是用 jQuery 完成的。目标是限制用户只能通过键盘在覆盖层（定位的灯箱 div 上方）上的元素之间切换。换句话说，从选项卡序列中删除下面的页面元素。

我知道我可以使用 javascript 或 jQuery 在下面的所有元素上设置 tabindex="-1" 属性，这确实有效，但有一个很大的缺点。

问题是该项目可能要求以下某些元素具有特定的选项卡索引，而不是默认的浏览器选项卡索引。如果在下面的元素上设置了任何现有的选项卡索引属性，当我将它们全部设置为“-1”时，我将丢失它们。

所以，我想知道是否有其他方法可以将选项卡索引限制为仅覆盖 div，或者是否有另一种我没有想到的方法来解决这个问题？任何帮助将不胜感激，因为这正在扼杀我的生产时间！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T15:19:39.440

这是一个不需要全局使用tabindex的问题的简单解决方案。（使用 jQuery）。我在 Firefox、Chrome、Safari、Opera 和 IE9、IE8 和 IE7 中检查过它。似乎运作良好。

```
function tabFocusRestrictor(lastItem,firstItem){
    $(lastItem).blur(function(){
        $(firstItem).focus();
    });
} 
```

tabFocusRestrictor('#clsButton','#firstItemInSequence');

所以叠加层上的 html 输入字段大致如下所示：

```
<form>
  <input type="text" id="firstItemInSequence" />
  <input type="text" id="secondItemInSequence" />
  <input type="text" id="thirdItemInSequence" />
  <button id="clsButton">close</button>
</form> 
```

这允许按钮正常工作，除了模糊，例如当您关闭按钮时，它会将您带到指定的输入字段，在这种情况下，该输入字段的 id 为“firstItemInSequence”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:44:37.313

另一种解决方案。在 tabIndex = maxindex 的控件中按下 TAB 键后，此函数将焦点放在 id = controlID 的控件上。这将通过按 TAB 产生圆周运动。

它将位于：

```
<body class="body" onkeydown="return onKeyDownTab(event, 7,'txtName');">

function onKeyDownTab(event, maxIndex, controlFocusID)
{

    var key = event.keyCode ? event.keyCode : event.which ? event.which : event.charCode;
    if (key == 9)
    {
        try
        {
            if (event.srcElement.id == "" || event.srcElement.className.indexOf("body") > -1)
            {
                document.getElementById(controlFocusID).focus();
                return false;
            }
            if (parseInt(event.srcElement.attributes.tabIndex.value) < 0 || parseInt(event.srcElement.attributes.tabIndex.value) >= maxIndex)
            {
                document.getElementById(controlFocusID).focus();
                return false;
            }
            return key;
        }
        catch (e)
        {
            return false;
        }        
    }
    else
    {
        return key;
    }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-24T00:10:41.553

我认为我创建的 jQUery 插件可以满足您的需求：

[https://github.com/spirytoos/TABGuard](https://github.com/spirytoos/TABGuard)

我希望它有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-14T16:33:16.537

**[jsFiDDLE](http://bloggerplugnplay.blogspot.in/2014/02/tab-and-tabshift-focus-on-selected-div.html)**

```
$(document).ready(function() {
lastIndex = 0;
$(document).keydown(function(e) {
    if (e.keyCode == 9) var thisTab = $(":focus").attr("tabindex");
    if (e.keyCode == 9) {
        if (e.shiftKey) {
            //Focus previous input
            if (thisTab == startIndex) {
                $("#" + tabLimitInID).find('[tabindex=' + lastIndex + ']').focus();
                return false;
            }
        } else {
            if (thisTab == lastIndex) {
                $("#" + tabLimitInID).find('[tabindex=' + startIndex + ']').focus();
                return false;
            }
        }
    }
});
var setTabindexLimit = function(x, fancyID) {
        console.log(x);
        startIndex = 1;
        lastIndex = x;
        tabLimitInID = fancyID;
        $("#" + tabLimitInID).find('[tabindex=' + startIndex + ']').focus();
    }
/*Taking last tabindex=10 */
setTabindexLimit(10, "Selector_With_Where_Tab_Index_You_Want");
}); 
```

**setTabindexLimit()**函数两个属性**10**是 Div 中的最后一个 Tabindex 和**Selector_With_Where_Tab_Index_You_Want**是您希望 tabindex 在其中重复的 div 的类或 ID。

# jasper-reports - 在 netbeans gui 中显示报告的最佳方式

> ID：11351990
> 
> 赞同：1
> 
> 时间：2012-07-05T20:19:31.247
> 
> 标签：jasper-reports, ireport

我有菜单项（NetBeans），按下时需要在 linux 机器上生成报告。你知道我应该用什么最好的方式来显示表格吗？

1.  使用 iReport 和 Jasper 报告

2.  以某种 jdialogue 形式显示信息，一旦选择菜单项就会弹出。

我制作报告的方式可能不够。我使用一个 c-shell 脚本读取调用一个 sql 脚本从数据库中读取信息，然后将其转储到一个 txt 文件中。我想阅读此文本文件并使用 ireport 或在 jdiale 表单上生成官方报告。从审查 ireport 看来我不必使用这种方法。我可以直接从 ireport 运行 sql 脚本并生成 rpeort？问题是我在一台 linux 机器上，我不确定 ireports 是否能正常工作，而且这将是构建桌面 gui 的长期努力，我想知道这是否是正确的方法。iReport 是否有可靠的支持，它是否可以与最新的 netbeans 版本一起使用？有经验的都可以回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T20:57:26.697

Jasper Reports 是跨平台的，iReport 是建立在 Netbeans 平台上的。我个人在 OS X 和 Windows 上使用过 iReport/JasperReports，效果很好。我在 Linux 上使用过 Netbeans，效果很好。iReport 在 Linux 上应该和它支持的其他平台一样好。iReport 支持的另一个选项是将它作为 Netbeans 中的插件运行，它运行良好。

是的，iReport 和 Jasper Reports 通常是可靠的。不过，我不确定您所说的支持是什么意思。他们有商业版本来提供实际支持，其他一切都是论坛和/或来自其他用户的。

至于您正在考虑的过程，解析文本文件等等，我不建议这样做。Jasper Reports 允许您将查询放在实际报告中。与您所说的多步骤过程相比，它会更快、更容易使用。

**2) 以某种 jdialogue 形式显示信息，一旦选择菜单项就会弹出。**

我不知道你在这里问什么。